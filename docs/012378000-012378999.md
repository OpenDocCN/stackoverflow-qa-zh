# StackOverflow 问答 12378000-12378999

# vb.net - VB.net - 时间半

> ID：12378006
> 
> 赞同：1
> 
> 时间：2012-09-11T21:12:43.127
> 
> 标签：vb.net

我坚持如何修改它，以便为超过 40 小时的任何工作时间支付员工时间和一半。我知道这将是一个 if 语句，但我不确定我将如何具体处理它.

示例：如果用户输入 35.5 小时和 9.56 作为费率，则净值为 237.56 美元。

输入：工作时间和工资率。

输出：不同的税收和净工资。

这是我到目前为止所拥有的：

```
 Const FWT_ As Decimal = 0.2
    Const FICA_ As Decimal = 0.08
    Const STAT As Decimal = 0.02

    Dim Hrs As Decimal
    Dim Rate As Decimal
    Dim Gros As Decimal
    Dim FWT As Decimal
    Dim Fi As Decimal
    Dim stat As Decimal
    Dim NetPay As Decimal

    Decimal.TryParse(txtHours.Text, Hrs)
    Decimal.TryParse(txtRate.Text, Rate)

    Gros = Math.Round(Hrs * Rate, 2)
    FWT = Math.Round(Gros * FWT_, 2)
    Fi = Math.Round(Gros * FICA_, 2)
    stat = Math.Round(Gros * STAT, 2)
    NetPay = Gros - FWT - Fi - stat

    lblGr.Text = Gros.ToString("N2")
    lblF.Text = Fi.ToString("N2")
    lblF.Text = Fi.ToString("N2")
    lblSt.Text = stat.ToString("N2")
    lblN.Text = NetPay.ToString("C2") 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:16:10.590

You could just add `0.5 * Rate` pay for any hours worked over 40 to your existing calculation:

```
If Hrs > 40 Then
    Gros += Math.Round( (Hrs-40) * Rate * 0.5 )
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:17:06.010

I don't know how specifically to write the answer such that it will compile in your visual basic program but i can give you the algorithmic answer

```
if(hours > 40)
    payment = 40 * rate + ((hours-40)) * (rate*1.5);
else
    payment = hours * rate; 
```

**or** if VB supports the ternary operator

```
payment = hours > 40 ? (40 * rate + ((hours-40)) * (rate*1.5)) : (hours * rate); 
```

If i were to be given this code to edit the first thing i'd try is :

```
Gros = Math.Round(Hrs * Rate, 2) 
```

to

```
Gros = Math.Round(hours > 40 ? (40 * rate + ((hours-40)) * (rate*1.5)) : (hours * rate), 2) 
```

# .htaccess - 设置文件夹上的域 A 上的 SSL 其他所有内容的域 B 上的 SSL

> ID：12378015
> 
> 赞同：0
> 
> 时间：2012-09-11T21:13:17.993
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

我正在建立一个新站点并为该站点使用 2 个域，一个是 domain-A.com，它上面有一个 SSL/HTTPS 证书，一个是 domain-B.co.uk

我希望所有访问者都去 domain-B.co.uk，然后当他们去门户网站，计费等时......去[https://www.domain-A.com/portal/FILENAME.php](https://www.domain-A.com/portal/FILENAME.php)

然后当他们离开[https://www.domain-A.com/portal/](https://www.domain-A.com/portal/)时，将域改回[http://domain-B.co.uk/FILENAME.php](http://domain-B.co.uk/FILENAME.php)

因此，基本上将域-A 用于我想要 SSL 的设置论坛，其他任何东西都使用域-B。

我不确定如何做到这一点，请帮助？

谢谢，加里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:20:08.517

尝试将这些规则放在文档根目录的 htaccess 文件中：

```
RewriteEngine On

# if the request is for domain-A and not for /portal/, redirect to domain-B
RewriteCond %{HTTP_HOST} domain-A\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/portal/
RewriteRule ^(.*)$ http://domain-B.co.uk/$1 [L,R=301]

# if the request is for domain-B and for /portal, redirect to SSL domain-A
RewriteCond %{HTTP_HOST} domain-B\.co\.uk$ [NC]
RewriteRule ^/?portal/(.*)$ https://domain-A.com/portal/$1 [L,R=301] 
```

# ssl - 当 Idle Timeout 事件发生时，带有 SSL 的 Netty 抛出 ClosedChannelException

> ID：12378019
> 
> 赞同：2
> 
> 时间：2012-09-11T21:13:40.397
> 
> 标签：ssl, netty

当我们得到一个空闲超时事件时，我们关闭通道。如果我们当时也启用了 ssl，我们会得到：

```
java.nio.channels.ClosedChannelException
at org.jboss.netty.handler.ssl.SslHandler.channelClosed(SslHandler.java:1377) 
```

有一些注释在： [https ://github.com/netty/netty/issues/305](https://github.com/netty/netty/issues/305)

我们可以在空闲状态处理程序方法中进行某种清理`channelIdle`以防止这种情况发生吗？或者我们应该在方法中捕捉到这个`exceptionCaught`？

我们一般应该如何处理这个异常？

谢谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:50:44.437

如何扩展 SSLHandler 并覆盖它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:22:35.527

抛出异常基本上是为了告诉您还有一些数据需要“刷新”。如果您不在乎，您可以只拥有一个处理异常的处理程序，仅此而已。

# sql - 如何与 oracle 中可能的空值进行比较？

> ID：12378020
> 
> 赞同：1
> 
> 时间：2012-09-11T21:13:40.357
> 
> 标签：sql, oracle, null, where-clause

我在这个问题上看到了许多变体，但在询问比较空值时，它们似乎都在谈论性能和索引。

我的问题是我有一个嵌套的 SELECT，它可以返回我根据日期参数进行比较的 null。

```
SELECT a.* 
FROM Table_One a,
     Table_Two b
WHERE a.Fieldc IN (SELECT CompareValue from Table_Three cv WHERE inDate between cv.Date_ and SYSDATE)
AND a.Fielda = b.Fieldb(+) 
```

似乎当这里的嵌套选择返回 null 时，左连接就会混乱。

如果需要，我很乐意提供一些虚假数据，但也许我只是遗漏了一些东西。我需要发生的是 Fieldc 比较只发生在该日期规范内。

感谢您的任何见解。谢谢。

更多信息：

Table_One 数据：所有字段都是 varchar2

```
Fielda | Fieldb | Fieldc|
'aVal' | 'bVal' | 'cVal'|
'dVal' | 'eVal  | 'fVal'|
'dVal' | 'fVal  | 'eVal'| 
```

Table_Two 数据：所有字段都是 varchar2

```
Fielda | Fieldb | Fieldc|
'aVal' | 'bVal' | 'cVal'|
'dVal' | 'fVal  | 'gVal'|
'dVal' | 'fVal  | 'cVal'| 
```

Table_Three 数据：CompareValue 为 varchar2，date_ 为 date

```
CompareValue | date_      |
'fval'       | 2012-09-10 | 
```

因此，如果参数是今天，则选择返回“fval”，我们就可以正确地左连接。但是，当日期参数在 '2012-09-10' 之前，则嵌套选择正在比较 null 并且左连接不会正确发生。这是原始版本的简化版本。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T21:16:47.627

use `NVL(inDate, sysdate+1)` to not match when null

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T00:56:09.337

`No records`您需要了解和`Null`值之间的区别。当你说 - “当日期参数在 '2012-09-10' 之前，那么嵌套选择正在比较一个空值并且左连接没有正确发生”，这意味着`SELECT`返回一行但行值是`NULL`（这是与无记录不同）。在这种情况下，`NVL`对`NULL`列值执行操作并将其替换为假字符串（如您所说）将像 -

```
SELECT NVL(CompareValue,'dummy') 
  from Table_Three cv WHERE inDate between cv.Date_ and SYSDATE 
```

以上将返回`dummy`if `CompareValue`is`NULL`但如果查询根本没有返回 NO RECORDS 则不会。

但是，查看您的数据，我看不到 NULL 值的可能性，这使我相信`NULL`如果在 2012 年 9 月 10 日之前，子查询实际上将返回 NO RECORDS（与 不同）`inDate`。在这种情况下，您的查询应该非常好（除非其他地方出现其他问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:42:06.503

我假设您在 a.Fieldc 被视为“活动”的条件下从表 a 中进行选择，因为在 table_three 中，它的 inDate 位于某个开始日期和 sysdate 之间。

因此，我认为您不希望总是有结果。相反，我建议您在代码中处理空结果。

恐怕我无法给出更准确的答案，因为您还没有分享有关您案件的更多信息。

# asp.net - 在 MVC3/Ninject 3 环境中使用 ASMX Web 服务的 Ninject

> ID：12378026
> 
> 赞同：4
> 
> 时间：2012-09-11T21:13:58.213
> 
> 标签：asp.net, ninject, asmx, ninject.web.mvc, ninject.web

我正在寻找将经典 asmx Web 服务整合到我的 MVC3 环境中的最佳方式。我希望在两者之间共享内核/容器。

在过去使用 ASP.NET Web 表单时，我能够使用以下内容：

```
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.Web.Script.Services.ScriptService]
public class Service : WebServiceBase
{
    [Inject]
    public IContextProvider ContextProvider { get; set; }
... 
```

这使用较旧的 Ninject.Web 来共享内核，使用在 WebServiceBase、PageBase 等之间共享的 KernelContainer 等。

现在我有一个使用 Ninject.Web.MVC 的 MVC3 应用程序，我需要一个较旧的 Web 服务在相同的空间中运行，使用相同的内核/绑定。我无法找到有关启动和运行这样的设置的任何信息。

有没有人有任何想法、示例或帖子可以指向我（除了不使用 asmx Web 服务）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T01:01:31.297

MVC 框架支持与 Ninject for MVC 集成的 DependencyResolver。尽管无法为 ASMX Web 服务定义自定义工厂，但您可以执行以下操作：

```
public class Service : WebService
{
  public IContextProvider ContextProvider {get;set;}

  public Service()
  {
    ContextProvider = DependencyResolver.Current.GetService<IContextProvider>();
  }
} 
```

虽然您不能在构建服务期间注入依赖项，但您可以在构造函数中自己解决它们。

# excel - 如何在 Excel 中计算相隔 102 行的单元格的平均值？

> ID：12378034
> 
> 赞同：2
> 
> 时间：2012-09-11T21:14:52.947
> 
> 标签：excel

考虑以下 Excel 电子表格：

```
 A          B       C        D        E
   1  company  date    money    date    average
   2  1        03-14       6    03-14      4    (6 + 3 + 3) / 3
   3  1        03-15       2    03-15      6    (2 + 7 + 9) / 3
   4  1        03-16       5    03-16      3.33 (5 + 1 + 4) / 3
   5  1        03-17       1    03-17      5.67 (1 + 9 + 7) / 3
   6  2        03-14       3    .
   7  2        03-15       7    .
   8  2        03-16       1    08-05
   9  2        03-17       9
   10 3        03-14       3
   11 3        03-15       4
   12 3        03-16       4
   13 3        03-17       7 
```

对于`100`公司，我`money`为每个`date`介于`03-14`和`08-05`（`102`天，因为我删除了周末和节假日；上面的电子表格是一个缩短的示例）之间的每个值都有一个值。数据结构为面板数据。在列`D`中，我列出了所有日期，并且`E`我想计算`money`每个日期的平均值（参见示例计算）。

我的问题是：我可以用什么 Excel 列公式来`E`完成这个？

`average`for将`03-14`是`AVERAGE`单元格`D2 + D104 + D206 + ... D10202`（`102`单元格分开），`AVERAGE`for`03-15`将计算为 的平均值`D3 + D105 + D207 ... etc`。

谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T21:19:08.940

您使用的是哪个版本的 Excel？在 Excel 2007 或更高版本中，您可以使用 AVERAGEIF 函数，例如将此公式在 E2 中复制下来

`=AVERAGEIF(B:B,D2,C:C)`

在早期版本的 excel 中尝试这样的 SUMIF/COUNTIF

`=SUMIF(B:B,D2,C:C)/COUNTIF(B:B,D2)`

# android - 如何使背景图像持续存在

> ID：12378038
> 
> 赞同：1
> 
> 时间：2012-09-11T21:15:12.290
> 
> 标签：android, android-imageview

我以前问过这个，但我的理解略有增加。我已经弄清楚如何让用户在布局上选择自定义背景图像。我用这个：

在我的 onCreate 方法中：

```
Button player = (Button) setBg.findViewById(R.id.plBg);

                player.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {

                        Intent i = new Intent(Intent.ACTION_PICK, 
                                android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

                        i.setDataAndType(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI, "image/*");                                      
                        startActivityForResult(i, RESULT_LOAD_PLAYER);

                        setBg.dismiss();
                    }
                }); 
```

在我的 onActivityResult 方法中：

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, final Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

if (requestCode == RESULT_LOAD_PLAYER && resultCode == RESULT_OK && null != data) {
         Uri selectedImage = data.getData();
         String[] filePathColumn = {MediaStore.Images.Media.DATA};

         Cursor cursor = getContentResolver().query(selectedImage,
                 filePathColumn, null, null, null);
         cursor.moveToFirst();

         int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
         String picturePath = cursor.getString(columnIndex);
         cursor.close();

         playerBg = (ImageView) findViewById(R.id.playerBg);
         playerBg.setImageBitmap(BitmapFactory.decodeFile(picturePath));
         playerBg.setScaleType(ScaleType.CENTER_CROP);
     }
} 
```

但是当您“退出”应用程序时，背景会恢复为默认值。我如何让这个背景选择坚持下去？

我已经看过这个：[将位图保存到位置](https://stackoverflow.com/questions/649154/android-bitmap-save-to-location)

但我很难理解它。
我也尝试过将其保存在共享偏好中，但了解到这不是他们的目的。我还是一个初学者，这个。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:23:45.660

IMO，您可以在 sharedpreference 中使用标志（boolean var）来指示用户是否设置了任何背景？而且，如果用户设置了任何背景，那么您可以将图片路径保存在 sharedpreference 中。因此，每次您的活动开始时，哪个 onCreate()。您检查 sharedpref 中的标志并使用保存在 sharedpref 中的图片路径设置背景。

另外，我同意 matheszabi，您需要了解更多关于 android 生命周期的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:21:45.773

如果您是初学者，那么您不会欣赏“诀窍”，但也许有人会基于此为您编写 100% 工作代码，可以复制粘贴。

> 但是当您“退出”应用程序时，背景会恢复为默认值。

那是因为你不知道 Activity Lifecycle 方法。您应该在 OnCreate 中再次加载保存的免费。请在[此处](http://www.google.com/imgres?imgurl=http://www.androidjavadoc.com/1.0_r1_src/android/app/doc-files/activity_lifecycle.png&imgrefurl=http://www.androidjavadoc.com/1.0_r1_src/android/app/Activity.html&h=668&w=538&sz=65&tbnid=fVYDmaM7UbyNSM%3a&tbnh=90&tbnw=72&prev=/search?q=activity%2blifecycle&tbm=isch&tbo=u&zoom=1&q=activity%20lifecycle&usg=__3-6hGSaeMUr-k1aA_PL1EV_VuiU=&docid=n-RxzZlvjBz6WM&hl=en&sa=X&ei=HatPUPezLczAtAbU5YCgCw&ved=0CEAQ9QEwBQ&dur=179)查看 Activity 生命周期方法。

希望它可以帮助某人。

# ruby-on-rails - Rails has_many：通过困难

> ID：12378041
> 
> 赞同：0
> 
> 时间：2012-09-11T21:15:15.900
> 
> 标签：ruby-on-rails, model, associations

我只是无法弄清楚为什么这个关联不起作用......我很确定这没关系，但找不到错字

```
class Lesson < ActiveRecord::Base
  has_many :lessons_units, :foreign_key => "lesson_id",
                           :dependent => :destroy
  has_many :units, :through => :lessons_units
end

class Unit < ActiveRecord::Base
  has_many :lessons_units, :foreign_key => "unit_id",
                           :dependent => :destroy
  has_many :lessons, :through => :lessons_units
end

class LessonsUnits < ActiveRecord::Base
  attr_accessible :lesson_id, :unit_id

  belongs_to :unit
  belongs_to :lesson

  validates :unit_id, :presence => true
  validates :lesson_id, :presence => true
end 
```

然后在控制台

```
1.9.3p194 :001 > Unit.lessons.build
NoMethodError: undefined method `lessons' for #<Class:0x007fe733c29f30>
from /Users/robert/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/dynamic_matchers.rb:50:in `method_missing' 
```

并在应用程序中

```
 def create
    @unit = Unit.find(params[:unit_id])
    @lesson = @unit.lessons.build(params[:lesson]) 
```

结果：

```
uninitialized constant Unit::LessonsUnit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:34:27.943

终于想通了。这是因为我的链接模型以“s”结尾-rails 将其转换为单数。注意到它是因为错误显示模型没有's' - Unit::LessonsUnit 而不是 Unit::LessonsUnits

编辑与 :lessons_unitss 的关系修复它......我将通过并将模型重命名为不是复数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:37:48.757

```
LessonsUnits - 

class LessonsUnits < ActiveRecord::Base 
```

应该是单数：

```
class LessonsUnit < ActiveRecord::Base 
```

# mongodb - Mongodb fetching only particular field

> ID：12378043
> 
> 赞同：0
> 
> 时间：2012-09-11T21:15:25.137
> 
> 标签：mongodb, mongodb-java

I have two collections

```
checkone
  {"_id":1,"name":"alex"},
  {"_id":2,"name":"sandy"}

checktwo
  {"_id":11,"password":"alex",tenant_id:{$ref:"checkone","$id":1}}
  {"_id":12,"password":"suman",tenant_id:{$ref:"checkone","$id":2}} 
```

when I do dbref fetch, am getting all the fields referencing it.

```
DBCursor cursor = coll.find();
while(cursor.hasNext()){
  DBRef addressObj = (DBRef)cursor.next().get("tenant_id");
  System.out.println(addressObj.fetch());   
} 
```

Output:

```
{"_id":1,"name":"alex"},
{"_id":2,"name":"sandy"} 
```

But I need to fetch only NAME field how to restrict it. I have tried it like this.

```
BasicDBObject query=new BasicDBObject();

Map<String, Object> whereMap = new HashMap<String, Object>();
whereMap.put("tennat_id", 1);
query.putAll(whereMap); 
BasicDBObject field=new BasicDBObject("name",1);
DBCursor cursor = coll.find(query,field);

while(cursor.hasNext()){
    DBRef addressObj = (DBRef)cursor.next().get("tenant_id");
     System.out.println(addressObj.fetch()); 
} 
```

But I am getting null pointer exception in this line

```
DBCursor cursor = coll.find(query,field); 
```

How to restrict the fields in mongodb java?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:39:15.240

我认为您的错误可能在此代码中：`whereMap.put("tennat_id", 1);`应该`tenant_id`改为。

除此之外，您的代码看起来还可以。

如果您不想获取 _id 字段，可以将另一个对象添加到您的`field`对象中`_id:0`。您必须明确排除该`_id`字段：

```
BasicDBObject field=new BasicDBObject("name",1)
  .append("_id": 0); 
```

# mysql - Need help structuring a 'complicated' MySQL query for multiple databases

> ID：12378045
> 
> 赞同：-1
> 
> 时间：2012-09-11T21:15:48.313
> 
> 标签：mysql, join, subquery

I'm trying to run two MySQL queries on tables with no matching columns. The results of these two queries need to be matched up and present information only if a portion of one column matches a column from the other database. Here is what I have so far:

```
select data2, time_id from db.table1
where data2 in
(select right(dst,10) from db2.table2
where calldate like '2012-09-01%' and lastdata like <blocked for privacy>)
having (time_id between '1346475600' and '1346562000'); 
```

In my understanding, the subquery on lines 3-4 should be called first, correct? My issue with this statement is that it always times out. It just takes too long. Am I formatting this incorrectly? I'm sure an alternative would be to use a `join` statement, and any help in that direction would be great.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:02:43.240

你没有错误地格式化它，这只是一个非常糟糕的查询，需要服务器进行一些荒谬的计算。让我们采取一些步骤把它做好，真的只是一件大事和一件小事。

1.  不要尝试加入部分字段。向 table2 添加一列，该列将包含要加入的数据。运行查询以填充该字段。添加触发器以使该字段保持最新。不允许提醒架构？创建一个临时表并相应地填充它并加入它。
2.  不要在日期时间字段上使用like，`call date BETWEEN <datetime 1> AND <datetime 2>`而是说。

# php - PHP REST API 认证

> ID：12378046
> 
> 赞同：3
> 
> 时间：2012-09-11T21:15:56.860
> 
> 标签：php, api, rest, authentication

我正在为 php 应用程序构建一个宁静的 API。目前，API 将只接受和响应 json。请求、路由和响应都由框架处理，但我需要构建一个自定义的身份验证机制。

为了额外的安全性和避免重放攻击，我想添加两个项目：时间戳和随机数。

1.  除了这两项之外，我还想要一个健全性检查，以确保从安全性或可用性的角度来看，我没有遗漏任何其他真正明显的东西。
2.  entity_id 应该放在标头而不是请求中吗？

到目前为止，这是我进行身份验证的内容：

```
function authenticate_request()
{
    $request = json_decode(file_get_contents('php://input'));
    $request_headers = apache_request_headers();

    if ( ! isset($request_headers['X-Auth']) OR ! isset($request_headers['X-Auth-Hash'])) {
        return false;
    }

    $user = User::get_by('public_key', $request_headers['X-Auth']);

    if ( ! $user) {
        return false;
    }

    // every request must contain a valid entity
    if (isset($request->entity_id) && $request->entity_id > 0) {
        $this->entity_id = $request->entity_id;
    } else {
        return false;
    }

    $entity = Entity::find($this->entity_id);
    if ( ! $entity) {
        return false;
    }

    // validate the hash
    $hash = hash_hmac('sha256', $request, $user->private_key);

    if ($hash !== $request_headers['X-Auth-Hash']) {
        return false;
    }

    return true;
} 
```

卷曲请求示例：

```
$public_key = '123';
$private_key = 'abc';

$data = json_encode(array('entity_id' => '3087', 'date_end' => '2012-05-28'));
$hash = hash_hmac('sha256', $data, $private_key);
$headers = array(
    'X-Auth: '. $public_key,
    'X-Auth-Hash: '. $hash
);
$ch = curl_init('http://localhost/myapp/api/reports/');

curl_setopt($ch,CURLOPT_HTTPHEADER,$headers);
curl_setopt($ch,CURLOPT_POSTFIELDS, $data);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);

$result = curl_exec($ch);
curl_close($ch);

print_r($result); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:21:31.883

`hash_hmac()`期望它的第二个参数是一个字符串，你正在传递你*解码*的JSON 对象。除此之外，您的方法似乎很标准。`entity_id`也应该受到 HMAC 签名的保护，所以我会把它保存在请求正文中，否则你的签名计算会变得有点复杂而没有真正的收益。

# python - Usage of somearray[i].var() in python

> ID：12378047
> 
> 赞同：0
> 
> 时间：2012-09-11T21:15:58.173
> 
> 标签：python

I am completely new to python and trying to debug a code which needs to be re-written in C. This might be a very silly question. I came across this statement

```
result[i, j] = arr[i:j+1].var() * (j-i) 
```

I just couldn't find the documentation of this var() method even after googling out. Can some one tell me what exactly does it mean?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:20:45.940

这是一个疯狂的猜测，但如果那是[Numpy`ndarray`](http://docs.scipy.org/doc/numpy/reference/arrays.ndarray.html#calculation)：

> **ndarray.var([axis, dtype, out, ddof])** 返回数组元素沿给定轴的方差。

你会创建一个类似的`ndarray`东西：

```
import numpy

a = numpy.array([1, 2, 3, 4]) 
```

然后`a.var()`会给你方差。

# jquery - KnockoutJS binding to object function

> ID：12378050
> 
> 赞同：1
> 
> 时间：2012-09-11T21:16:26.630
> 
> 标签：jquery, knockout.js

I am trying to use the jQuery ColumnListView library (found [http://code.google.com/p/jcvl/](http://code.google.com/p/jcvl/)) with KnockoutJS.

I'm having an issue trying to fire a function on my ViewModel when the onItemChecked event is fired in the jCOlumnListView:

Here's an example:

```
var items = jQuery.fn.jColumnListView({
    id: 'heirarchyclv',
    width: 400,
    columnWidth: 150,
    columnHeight: 200,
    columnMargin: 8,
    paramName: 'columnview',
    columnNum: 4,
    appendToId: 'heirarchy',
    elementId: 'heirarchyTest',
    removeAfter: false,
    columnMinWidth: 120,
    columnMaxWidth: 200,
    childIndicator: true,
    leafMode: true,
    checkAndClick: true,
    useSplitters: false,
    onItemChecked: function (item) {
        // fire the showChildren method on the ViewModel
    }
}); 
```

This is setup after the data is loaded for the ul that it is bound to in the html. The listing in the first list view works fine, but I want to be able to click on one of the items in the view and have the method `showChildren` on my `ViewModel` get fired, just as if I had bound a button in the list to the `showChildren` method.

I was thinking I could do something like this perhaps: onItemChecked: function (item) { console.log(item); ko.contextFor(item.elems.elem[0]).showChildren(); }

but that results in a js error that `ko.contextFor(item.elems.elem[0])` is not defined.

Any help would be appreciated. Let me know if I can make this question better.

# .net-4.0 - Msbuild fails with error msb4064 and msb4063

> ID：12378051
> 
> 赞同：8
> 
> 时间：2012-09-11T21:16:34.647
> 
> 标签：.net-4.0, msbuild, .net-4.5

After installing Visual Studio 2012 with .NET 4.5 I started to get the following errors while building using msbuild:

*   **error MSB4064:**

> The "SdkToolsPath" parameter is not supported by the "GenerateResource" task. Verify the parameter exists on the task, and it is a settable public instance property.

*   **error MSB4063:**

> The "GenerateResource" task could not be initialized with its input parameters. Project file header is as follows:

```
 <Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0"> 
```

Any ideas what changes have been made in .NET 4.5 that could cause the abover errors?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T06:31:53.463

这是 C:\Windows\Microsoft.Net\v4.0.30319 中的 Microsoft.Common.targets 文件的问题。安装 Visual Studio 2012 后，此文件已更改。所做的更改之一是在有人将他们的机器升级到 Windows 8 的情况下“修复”GenerateResourceMSBuildRuntime（有关详细信息，请阅读第 2271 行的详细注释）。我的修复只是在 Microsoft.Common.targets 文件中注释掉以下行

```
<GenerateResourceMSBuildRuntime 
     Condition="'$(GenerateResourceMSBuildRuntime)' == '' and 
                 $([MSBuild]::DoesTaskHostExist(`$(TargetFrameworkAsMSBuildRuntime)`, `$(GenerateResourceMSBuildArchitecture)`))">$(TargetFrameworkAsMSBuildRuntime)</GenerateResourceMSBuildRuntime> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T02:18:35.833

如果您执行了 Bernard 建议的解决方法，实际上是一个更好的解决方案，即[（如果您的构建失败并显示“MSB6002：“ResGen”任务的命令行太长”）](http://blogs.msdn.com/b/visualstudio/archive/2010/02/15/if-your-build-fails-with-msb6002-the-command-line-for-the-resgen-task-is-too-long.aspx)。是从您的项目文件中完全删除解决方法。Microsoft 实际上已经通过 Visual Studio 2012 SDK 工具解决了对这种变通办法的需求。

请参阅有关此问题[的连接讨论。](http://connect.microsoft.com/VisualStudio/feedback/details/763379/sdktoolspath-parameter-stops-build-of-net-3-5-project-when-net-framework-4-5-is-installed)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:24:29.680

我遇到了同样的问题，发现我在其中一个项目中使用 hack 来处理大量资源文件（[如果您的构建失败并显示“MSB6002：“ResGen”任务的命令行太长” </a>）。](http://blogs.msdn.com/b/visualstudio/archive/2010/02/15/if-your-build-fails-with-msb6002-the-command-line-for-the-resgen-task-is-too-long.aspx)

[](http://blogs.msdn.com/b/visualstudio/archive/2010/02/15/if-your-build-fails-with-msb6002-the-command-line-for-the-resgen-task-is-too-long.aspx)

[删除任务（ GenerateResource Task ）](http://msdn.microsoft.com/en-us/library/c0aff32f-f2cc-46f6-9c3e-a5c9f8f912b1%28v=vs.90%29)[版本 3.5 不支持的所有属性后，](http://blogs.msdn.com/b/visualstudio/archive/2010/02/15/if-your-build-fails-with-msb6002-the-command-line-for-the-resgen-task-is-too-long.aspx)我的构建再次工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-22T15:11:57.943

我最近偶然发现了这个问题，解决了关闭并重新打开视觉工作室的问题。我在 Visual Studio Enterprise 2019 16.10.2 中使用 dotnetcore 2.1 开发一些 azure 功能

# jquery - How can I save a url hash to a variable for use on a different page with a different url?

> ID：12378056
> 
> 赞同：0
> 
> 时间：2012-09-11T21:16:52.060
> 
> 标签：jquery, api, instagram

I am using the instagram api and I registered and got passed the authorization. It returns an access token in the url hash, since I am using "Client-Side (Implicit) Authentication."

> http://your-redirect-uri#access_token=20001105.f59def8.a85e3ca34d8b406f9c0ec54a44d0bcf5

I save the access token hash as a variable and add it to the ajax json url like so:

```
$(document).ready(function() {

    var hash = window.location.hash.substring(1);

    $(function() {
        $.ajax({
            type: "GET",
            dataType: "jsonp",
            cache: false,
            url: "https://api.instagram.com/v1/users/self/feed?" + hash, 
```

I want to save the hash to a variable I can access later on a different page, so that it's not in the url bar.

How can this be done with using PHP or javascript and jQuery?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:29:38.213

要将其保存在浏览器上，您可以将其保存到 cookie 或本地存储（仅限较新的浏览器）。

您将被限制只能访问您最初存储数据的同一域中的数据，但只要要访问此保存数据的多个页面位于同一域中，您就可以以这种方式存储它。事实上，这就是大多数网站如何进行客户端登录，然后记住从一个页面到下一个页面的登录状态（通常使用 cookie）。

# wcf - Deserialize byte[] object using XmlSerializer

> ID：12378067
> 
> 赞同：1
> 
> 时间：2012-09-11T21:18:15.097
> 
> 标签：wcf, windows-phone-7.1, xml-deserialization

Here is my code for Deserializer for byte[] object

```
public static T DeserializeObject<T>(byte[] xml)
{
    //BinaryFormatter xs = new BinaryFormatter();
    MemoryStream memoryStream=new MemoryStream(xml);
    XmlSerializer xs = new XmlSerializer(typeof(T));
    return (T)xs.Deserialize(memoryStream);
} 
```

It gives error `There is an error in XML document`

**InnerException** `Invalid character in the given encoding`

How can I Deserialize it?

Calling funcation:

```
 void svc_Get_Conn(object send, GetConnCompletedEventArgs e)
    {  
        CookieContainer con =DeserializeObject<CookieContainer>(e.Result);
    } 
```

Following funcation is from **Service1.svc.cs**

```
public static byte[] SerializeObject<T>(T obj) 
    { 
        try 
        {
            using (MemoryStream memoryStream = new MemoryStream()) 
            { 
                BinaryFormatter xs = new BinaryFormatter(); 
                xs.Serialize(memoryStream, obj); 
                return memoryStream.ToArray(); 
            } 
        } 
        catch 
        { 
            return null; 
        } 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:41:18.047

**XmlSerializer 不能用于反序列化使用 BinaryFormatter ¹创建的内容。**

解决方案：

1.  使用 XmlSerializer*序列化*数据，或者；
2.  使用 BinaryFormatter*反序列*化数据，或者；
3.  使用替代方法进行序列化*和*反序列化。

替代方案包括[Json.NET](http://james.newtonking.com/projects/json-net.aspx)和[protobuf-net](http://code.google.com/p/protobuf-net/)，它们都提供 .NET Compact Framework (Windows Phone) 构建。还有[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)，这是“普通”.NET 中的标准，但我不确定它对 CF 有什么支持。

* * *

¹序列化格式通常*不可互换*，在这种情况下尝试使用不兼容的对与序列化为 JSON 并尝试反序列化为 ANS.1（显然不是 JSON）一样有意义。

[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)：

> **在XML 文档中**序列化和反序列化对象。

 **[二进制格式化程序](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)：

> 序列化和反序列化 [对象进出] **[内部] 二进制格式。****

# linq - 根据导航属性中包含的值过滤 odata 结果

> ID：12378068
> 
> 赞同：1
> 
> 时间：2012-09-11T21:18:18.190
> 
> 标签：linq, entity-framework, linq-to-entities, wcf-data-services, odata

使用[http://services.odata.org/Northwind/Northwind.svc/](http://services.odata.org/Northwind/Northwind.svc/)上提供的 Northwind OData 提要，如何获取分配给 TerritoryID = 19713 的员工列表？

我可以使用以下 LINQ 查询获取员工和地区，但如果没有 All/Any 方法，我不确定如何执行我所要求的操作。

```
from e in Employees.Expand("Territories") select e 
```

我假设这很简单，我只是没有看到树木的森林......所以，提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T22:00:24.250

在这种情况下，您可以将其翻转

```
Territories.Expand("Employees").Where (t => t.TerritoryID == "19713") 
```

但通常，linq to odata 的操作数子集非常有限。`Any`不支持类似or的方法`Contains`，这些方法在 linq to 实体中的类似查询中很有用。

# python - GAE 是否提供使用套接字的访问权限？

> ID：12378069
> 
> 赞同：1
> 
> 时间：2012-09-11T21:18:21.063
> 
> 标签：python, google-app-engine

有没有办法可以在 Google 应用程序引擎中使用套接字？我正在构建一个示例，但是每当我尝试使用套接字模块时，控制台都会报告：

```
**'module' object has no attribute 'socket'.** 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T21:23:38.857

不，它不支持套接字。

看看通道 API：

[https://developers.google.com/appengine/docs/python/channel/](https://developers.google.com/appengine/docs/python/channel/)

> Channel API 在您的应用程序和 Google 服务器之间创建持久连接，允许您的应用程序实时向 JavaScript 客户端发送消息，而无需使用轮询

[谷歌应用引擎，套接字被禁用，这意味着什么](https://stackoverflow.com/questions/5459371/google-app-engine-sockets-are-disabled-what-it-means)

支持/不支持的内容： [https ://developers.google.com/appengine/kb/general#libraries](https://developers.google.com/appengine/kb/general#libraries)

编辑：现在预览中的套接字支持：[https ://developers.google.com/appengine/docs/python/sockets/](https://developers.google.com/appengine/docs/python/sockets/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T22:47:56.760

截至 09/2012 的答案是否定的。但， ..

如果您对出站套接字感兴趣，请考虑加入早期测试程序以访问 App Engine 中的出站套接字功能： [https ://groups.google.com/d/topic/google-appengine/m1x6sDhqx1o/discussion](https://groups.google.com/d/topic/google-appengine/m1x6sDhqx1o/discussion)

# php - mysql_data_seek and mysql_num_rows

> ID：12378071
> 
> 赞同：0
> 
> 时间：2012-09-11T21:18:30.607
> 
> 标签：php, mysql, reset

I'm trying to reset the data in my variable so I can call from it again. If there is data in the first query, I need it to run the reset. First I'm checking for data, and second, if there is data, I'm setting the index back to 0\.

This works in my localhost environment, but not in my live environment. I know I'm getting the error I am getting because the first query isn't turning up any results, so `mysql_num_rows($query)` is empty.

I get the error: `Warning: mysql_num_rows(): supplied argument is not a valid MySQL result resource.`

(This code works when the first query turns up results, successfully resetting and displaying the second query.)

```
if (mysql_num_rows($query)){
    mysql_data_seek($query, 0);
} 
```

Is there a better way I can check if the first query has information, without spitting out an error if there isn't any information found?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:45:48.887

请注意有关使用 mysql_ 的其他评论？功能。

如果您出于某种原因要多次遍历结果，请按照 Marc B 的评论，在您的第一遍中将它们转储到一个数组中。例如（仍在使用您的 mysql_? 函数）；

```
$result = mysql_query($query);
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}
while($row = mysql_fetch_row($result)){
    $myResultSet[]=$row;
} 
```

完成后，我们可以随心所欲地迭代该集合

```
foreach($myResultSet as $row){  # note foreach resets each time
    # do stuff with $row['fieldname']
} 
```

但是，您应该借此机会将您的 mysql_ 更新为最新的方法……此基础解决方案将保持不变。

如果这不能解决问题，请发布更多代码，以便我们了解您尝试执行的原因和操作。

# c# - 显式调用 FormExtensions.BeginForm 解析 HttpGet 修饰的方法而不是 HttpPost

> ID：12378083
> 
> 赞同：0
> 
> 时间：2012-09-11T21:19:20.657
> 
> 标签：c#, asp.net-mvc-3

我正在遵循我在当前项目中多次使用的模式，但对于我编写的最新视图，BeginForm() 正在为我的操作方法解析 GET 路由，而不是 POST。我不知道我做了什么不同，所以我真的很难过。下面的示例代码：

```
public class FooController:Controller {
  [HttpGet]
  public ActionResult Bar(int id) {
    return View(new Model(id));
  }

  [HttpPost]
  public ActionResult Bar(Model model) {
    //do stuff with the model
  }
}

//Bar View
<script type="text/javascript">
  $(document).ready(function() {
    $('#formName').submit(function() {
      if(/* invalid input */) {
        //set html for an error div
        return false;
      }
    });
  });
</script>
@model Model
@using(Html.BeginForm("Bar",           //action name
                      "Foo",           //controller name
                      null,            //explicit null for route values
                      FormMethod.Post  //explicitly set form method
                      new {id="formName"})){  //explicitly id the form
  //bunch of inputs, a la
  @Html.TextBox("Property", Model.Property)
}

//Bar html
<form id="formName" action="/Foo/Bar/{Model Id}" method="post">
  <!-- input elements, etc -->
</form> 
```

我尝试过的 BeginForm 的每个重载都在操作之后使用 Id 解析了路由，因此每次表单都发布到 GET 方法。

我尝试将 POST 方法重命名为，例如“BarBar”，并更新对 BeginForm 的调用——在这种情况下，路由正确解析，并且表单已发布到适当的操作。

我已经在其他几十种表格中遵循了这种模式——有人知道我这次可能做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:40:57.633

对于输入，您是否使用 Html.TextBoxFOR、Html.DropDownListFOR 等，而不仅仅是 Html.TextBox？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:52:50.853

只是在这里跳出框框思考，但是如果您使用以下内容会发生什么。您的任何操作都没有明确采用零参数，所以我想知道路由引擎是否很难选择“正确”路径：

```
@using(Html.BeginForm("Bar",          
                      "Foo",          
                      new {model = null},
                      FormMethod.Post,
                      new {id="formName"})) 
```

# android - IntelliJ/Eclipse 不尊重 Android 应用程序的最低 SDK 版本

> ID：12378084
> 
> 赞同：2
> 
> 时间：2012-09-11T21:19:21.730
> 
> 标签：android, eclipse, intellij-idea

我有一个针对 Android 15 的 Android 项目，但最低版本为 Android 8。这在清单文件中定义：

```
<uses-sdk android:minSdkVersion="8"
    android:targetSdkVersion="15"/> 
```

这意味着我只能使用最高到 Android 8 的功能。

当我使用 String 类的 isEmpty() 方法（在 API 9 中添加）之类的方法时，IntelliJ 和 Eclipse 都会愉快地编译它，但是当我在旧设备上运行它时，我会崩溃，因为 API 8 没有 isEmpty( ） 实施的。

有谁知道为什么两个IDE都不能捕捉到这样的东西？

我的 Java 编译器是 1.6.0_33 版 - 会强制 IDE 在此处使用旧版本帮助吗？

谢谢！如果我错过了任何信息，请随时发表评论，我会挖掘信息！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T21:25:43.053

它应该编译。这允许您通过包装类在更新的 SDK 中使用更新的方法。如果您的**目标**SDK 是 8，那么 IDE 会抓住您并抱怨。

更多信息在这里：

[http://developer.android.com/guide/practices/compatibility.html](http://developer.android.com/guide/practices/compatibility.html)

包装类技术非常有用。这篇博客文章中有一个关于它的指南：

[http://android-developers.blogspot.com/2009/04/backward-compatibility-for-android.html](http://android-developers.blogspot.com/2009/04/backward-compatibility-for-android.html)

**编辑：**

应该注意的是最新的 ADT（r20，也许更早）在它的默认设置中带有**Lint**的 Eclipse将寻找在 minSDK 之上的 API 方法的使用。但是，它只会在文件被修改后或运行 Lint 时检查文件。

更多关于 Lint：[http ://tools.android.com/tips/lint](http://tools.android.com/tips/lint)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T21:57:28.750

对于 IntelliJ IDEA：

1.  `Project Structure`>`Modules`
2.  选择一个模块
3.  在`Dependencies`选项卡上，选择与`Module SDK`您要限制自己的 API 级别相关的选项。 `Android 2.3.3 Google APIs`例如。

IDEA 还在努力改进他们的`Android Lint`支持，以便即使在使用最新的 SDK 编译时，它也可以帮助您更轻松地检查对 API 级别的遵守情况。

[http://youtrack.jetbrains.com/issue/IDEA-85200](http://youtrack.jetbrains.com/issue/IDEA-85200)

# silverlight - 保持 Silverlight 文本框选择显示而不集中显示？

> ID：12378090
> 
> 赞同：4
> 
> 时间：2012-09-11T21:19:38.927
> 
> 标签：silverlight, user-interface, textbox, visualstates

[如标题所示，基本上我想为 WPF](https://stackoverflow.com/questions/642498/how-to-keep-wpf-textbox-selection-when-not-focused)做与此相同的事情，但改为在 Silverlight 中。

但是在我的 TextBox.LostFocus 事件中，没有 e.Handled。而且我还尝试使用 VisualStateManger.GoToState 来聚焦状态：

```
 VisualStateManager.GoToState(TextBox1, "Focused", false);
        TextBox1.SelectionStart = 0;
        TextBox1.SelectionLength = 3;
        TextBox1.SelectionForeground = new SolidColorBrush(Colors.Orange); 
```

但它也不起作用。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-31T21:34:12.763

以下代码将选择所有焦点。

```
TextBox1.Select(0, TextBox1.Text.Length); 
```

也许使用这种方法来设置选择。如果选择不存在，请尝试将插入符号的位置和长度存储在临时变量中（在自定义文本框类中）。

# php - php：删除Windows上的共享内存

> ID：12378098
> 
> 赞同：4
> 
> 时间：2012-09-11T21:20:10.870
> 
> 标签：php, shared-memory, php-extension

这段代码：

```
shmop_delete();
shmop_close(); 
```

不会删除共享内存。一个实验：

```
$shmid = @shmop_open(1234, 'a', 0, 0);
var_dump($shmid); 
```

产量

```
bool(false) 
```

当然。但

```
$shmid = shmop_open(5678, 'c', 0644, 10);
...
shmop_delete($shmid);
shmop_close($shmid);
...
$shmid = @shmop_open(5678, 'a', 0, 0);
var_dump($shmid); 
```

产量

```
int(157) 
```

怎么还没删？如何删除共享内存？我在 Windows 7 上运行 apache。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T23:08:49.377

SHM 在 Windows 中本身并不可用，因此 PHP 试图通过在内部使用 Windows 文件映射在其“线程安全资源管理器”(TSRM) 中模拟它，这是一个丑陋的 hack (/TSRM/tsrm_win32.c)。

因此，shmop 扩展也将 TSRM 用于 Windows 系统上的 SHM。 与命令一起`shmop_delete()`使用来标记内存段被销毁，但是在仿真中是通过以下方式实现的：`shmctl()``IPC_RMID``IPC_RMID`

```
 switch (cmd) {
            [...]
            case IPC_RMID:
                    if (shm->descriptor->shm_nattch < 1) {
                            shm->descriptor->shm_perm.key = -1;
                    }
                    return 0; 
```

段所附加的进程数在哪里`shm_nattch`（或至少 TSRM 认为它是什么数）。通过设置`shm_perm.key`为 -1，后续访问`shmget()`将被阻止，直到 Windows 文件映射被破坏。但是，当从 调用此代码时`shmop_delete()`，至少始终有 PHP 进程本身附加到内存段，因此它实际上什么都不做。该段仅在您调用后分离`shmop_close()`

所以你的答案是：如果不修复 PHP，在 Windows 上，你不能删除共享内存。

您可以将其归咎于 TSRM 中的 SHM 仿真，这不是完全正确的，也可以归咎于 shmop 扩展以盲目使用它。

您可以尝试无条件地删除`if`and 设置为 -1 并重新编译 PHP。`shm_perm.key`它只能破坏 shmop 扩展本身、sysvshm 扩展或可能其他未随 PHP 分发的扩展。

[随时向http://bugs.php.net/](http://bugs.php.net/)上的 PHP bugtracker 报告该问题，并由更熟悉 PHP 内部结构的人修复。

与此同时，也许[http://www.php.net/w32api](http://www.php.net/w32api)会有所帮助 - 您可以更直接地使用 Win32-API 中的 CreateFileMapping 和朋友。但是，我从未测试过它，并且在 PECL 中它说它没有被维护，所以要小心。它当然也不是便携式的。

您还可以尝试将这些`shmop_*`东西包装到您自己的库中，并将您自己的已删除标志放在内存段的开头——毕竟 TSRM 在内部做了类似的事情。但是你可能会遇到一个相关的错误：我想我记得有人报告说他无法创建一个`shmop_open()`比使用相同密钥创建的最后一个段更大的段。

# sml - 有没有办法在 SML 的递归函数中保留变量值？

> ID：12378099
> 
> 赞同：2
> 
> 时间：2012-09-11T21:20:17.583
> 
> 标签：sml

```
fun temp(x) = 
let val a = x
in if a mod (x-1) = 0 then x
   else temp(x-1)
end; 
```

这是示例标准 ML 代码。

我想知道的是，例如用户调用 temp(10); 然后 a = 10 并调用 temp(x-1)。

那么变量“a”将变为 9。我可以在标准 ML 中将其保持为 10 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:30:57.843

如果您的函数包含`val a = x`，那么对于 的任何调用`temp(x)`， 的值`a`将等于 的值`x`。如果您想在`a`递归时记住先前调用的值，则需要将其作为参数传递，如下所示：

```
fun temp_helper x a =
  if a mod (x-1) = 0 then x
  else temp_helper (x-1)

fun temp x = temp_helper x x 
```

您还可以使辅助函数成为内部函数。如果你这样做，你实际上可以`a`作为参数删除，而是`a`像这样关闭：

```
fun temp x =
let
  val a = x
  fun helper x =
    if a mod (x-1) = 0 then x
    else helper (x-1)
in
  helper x
end 
```

# python - Python：可靠地将 8601 字符串转换为时间戳

> ID：12378102
> 
> 赞同：0
> 
> 时间：2012-09-11T21:20:38.247
> 
> 标签：python, datetime, timezone

我读过很多关于解析时间有多不稳定的文章。我相信我已经想出了一种可靠的方法来转换 ISO8601 格式的时间戳：

[https://gist.github.com/3702066](https://gist.github.com/3702066)

最重要的部分`astimezone(LOCALZONE)`是解析日期时的调用。这允许 time.mktime() 做正确的事情，并且似乎可以正确处理夏令时。

我错过了明显的陷阱吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:32:26.700

即使在夏令时转换之前或之后的时间段内，您的代码*似乎也确实有效，但我担心在某个位置的时区偏移量实际发生变化的极少数情况下，它可能仍然会失败。*我没有一个例子可以测试。

因此，即使确实有效（或几乎总是有效），我认为以任何方式涉及或通过本地时间的方式将 UTC 时间字符串转换为 UTC 时间戳也是疯狂的。本地时区应该无关紧要。这是一个不需要的依赖。我不是说**你**疯了。您只是在尝试使用给定的 API，而 C 库的时间 API 设计得很糟糕。

`mktime()`幸运的是，Python 提供了 C 库应该提供的替代方案： `calendar.timegm()`. 有了这个函数，我可以像这样重写你的函数：

```
parsed = parse_date(timestamp)
timetuple = parsed.timetuple()
return calendar.timegm(timetuple) 
```

因为不涉及本地时间，所以这也消除了对 pytz 的依赖以及令人讨厌的怀疑，即某人当地时区的模糊伪影会导致不良影响。

# java - 在 Java 中使用随机运算符创建最小值

> ID：12378109
> 
> 赞同：0
> 
> 时间：2012-09-11T21:21:23.573
> 
> 标签：java, algorithm, random

我需要生成一个介于最小值和 1 -> [min, 1) 之间的随机数

我一直在阅读 java 的随机类，发现生成随机双精度时，结果是从 0 到 1.0 的双精度，但是，您不能限制界限。

我最初的想法是将随机函数的最高值限制为 0.7，但这对于随机函数是不可能的。

如果有人可以帮助我，这是我的代码：

```
public static double random(){
        // generate an random number accuracy within range [min, 1)
        Random randomNum = new Random();
        double accuracy = min + randomNum.nextDouble();
        System.out.println("Min " + min);
        return accuracy;
    } 
```

例如，如果在这种情况下我们将 min 设为 0.2，那么我所理解的函数的可能结果是 0.2 到 1.2。我怎样才能使它简单地 0.2 到 1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:24:51.870

```
 /**
  * A double uniformly distributed in the range [min, max).
  * @param min finite and inclusive.
  * @param max finite, > min, and exclusive.
  * @return d such that min <= d && d < max.
  */
 public static boolean uniformInRange(double min, double max, Random r) {
   assert min < max && !Double.isInfinite(min) && !Double.isInfinite(max);
   return min + (r.nextDouble() * (max - min));
 } 
```

要使用它，只需调用

```
 uniformInRange(min, 1.0d, randomNum) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T21:26:22.663

如果我错了，请纠正我，但这不起作用：

```
public static double random(int min, int max){
    Random randomNum = new Random();
    return (max - min) * randomNum.nextDouble() + min;
} 
```

解释：

*   `(max - min)`返回 和 之间的`max`差`min`。
*   `randomNum.nextDouble()``0`返回一个介于和之间的随机数`1`
*   `+ min`将添加该`min`值，因此它是最低值

*   `(max - min) * randomNum.nextDouble()``0`返回一个介于和之间的随机数`max-min`

*   `(max - min) * randomNum.nextDouble() + min``min`返回一个介于和之间的随机数`max`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:27:45.033

这样的事情呢？

```
double min = .2;
Random gen = new Random();
double rand = (gen.nextDouble() * 0.8) + min; 
```

在这里，您在末尾添加最小界限，并将您的 0-1 比率乘以 0.8，即 0.2 和 1 之间的差。

# dns - 是否可以将域重定向到自身的区分大小写的版本？

> ID：12378112
> 
> 赞同：0
> 
> 时间：2012-09-11T21:21:37.033
> 
> 标签：dns

是否可以进行 DNS 重定向，以便 mywebsite.com 重新映射到 MyWebsite.com？

这仅用于域名的纯粹装饰目的。我了解域名最终会解析为小写版本，并且 TLD 后面的所有字符最好保持小写。

我想要实现的只是在 URL 栏中维护 MyWebsite.com/whatever-in-lower-case 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:46:04.863

DNS 不区分大小写，因此这不太可能。不过，您可以修改书签/主页链接/嵌入的 URL/任何内容以包含您想要的案例，但我不确定这是否真的值得努力......

# asp.net - 在新服务器上迁移到 IIS7 后，由于 MachineKey IIS6 用户密码不起作用

> ID：12378114
> 
> 赞同：1
> 
> 时间：2012-09-11T21:21:42.497
> 
> 标签：asp.net, encryption, iis-7, machinekey

我们不得不紧急从 Windows 2003 + IIS6 迁移到新的 Windows 2008 + IIS7

我有几个带有散列密码的 ASP.NET 成员数据库的网站，在未使用的新服务器用户上工作正常，但最近使用它的用户无法登录（错误是密码无效）即使设置新密码相同发生。

我可以读到问题在于 MachineKey（它没有设置，所以它使用的是计算机 MachineKey） 我正在尝试将 IIS7 机器密钥设置为与以前相同，以便让用户再次工作。

我们有超过 500 个用户，我们不知道他们的密码或任何东西，因此我们无法重新创建它们。

关于我在哪里可以从以前的服务器（win 2003）中找到旧的 MachineKey 的任何想法？

问候，

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:38:52.543

将此东西设置到您的应用程序的 web.config 中

```
<system.web>
    <machineKey  
    validationKey="<blah>"           
    decryptionKey="<blah>"
    validation="SHA1"
    decryption="AES"
    /> 
```

您需要使用旧的机器密钥才能使其工作。

也许你可以试试这个找出机器密钥

[http://aspnetresources.com/blog/how_to_read_auto_generated_machinekey](http://aspnetresources.com/blog/how_to_read_auto_generated_machinekey)

# algorithm - 同步在线和离线库存水平

> ID：12378117
> 
> 赞同：0
> 
> 时间：2012-09-11T21:22:01.513
> 
> 标签：algorithm, synchronization, e-commerce

我们有一个电子商务网站和几家实体店。

我已经设法从“实体”数据库中提取库存数据并将其发送到网站，但事实证明，将在线销售数据放回数据库几乎是不可能的。没有文档 + 不合作的供应商。

目前发生的情况是网站销售了一些东西，订单被手动处理到商店数据库中，然后库存水平被更新回网站。问题是库存水平不会立即更新，因此有可能 2 个人可以购买相同的商品，特别是对于只剩下一件商品的促销商品。

我想知道是否有任何好的解决方案？

我的一个想法是在网站上存储购买数量，然后从库存商品数量中减去该数量，从而保持正确的库存水平。但是，一旦在“实体店”中处理订单，导出到网站的库存水平将包含该差异，并且我的在线库存水平将不正确。

任何为我指明正确方向的帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:54:26.400

您应该使用“锁定”和“确认”的方法。如果某个 POS 的客户请求物品，您应该联系服务器并锁定该物品（如果有的话）。然后客户将有几秒钟的时间来“确认”销售（否则 POS 会请求服务器解锁商品）。

# java - 在maven结构中生成java源的脚本放在哪里？

> ID：12378122
> 
> 赞同：1
> 
> 时间：2012-09-11T21:22:26.427
> 
> 标签：java, maven, maven-3

在一个项目（[http://jodd.org](http://jodd.org)）中，我们有一些由 python 脚本生成的类。这些是一些大类，它们具有对所有基元和对象具有相似行为的实用方法；我们只是想简化生活并避免重复类似代码所带来的潜在错误。

另请注意，此脚本是手动调用的，因此我们不需要任何自动化过程等。

我们正在对项目进行 mavenizing，这些脚本位于**src/main/resources**文件夹中。因此，它们与其他资源一起成为分布式 jar 的一部分，这是我们要避免的。

这些文件的标准 Maven 位置是什么？所以它们不会成为发行版 jar 的一部分？是**src/main/scripts**还是**src/main/python**，还是我们应该简单地将它们放在外面，例如**etc**文件夹中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:29:53.563

如您所述，我认为放置 python 脚本的好地方是**src/main/python**。这样做，它们不会被复制到最终的 jar 中。在我的项目中，我对一些用 C 编写的本机代码使用了类似的方法。

# node.js - form.on('error') 不处理 Node.js/formidable 错误

> ID：12378123
> 
> 赞同：0
> 
> 时间：2012-09-11T21:22:32.210
> 
> 标签：node.js, formidable

我正在使用强大的上传文件。当上传失败时（例如，当 uploadDir 不可写时），form.on('error') 不会处理错误，而是未捕获的异常。如何处理上传错误？这基本上是 fromidable 的自述文件中的示例代码，带有不存在的 uploadDir 和错误处理程序。

```
var formidable = require('formidable'),
    http = require('http'),

    util = require('util');

http.createServer(function(req, res) {
  if (req.url == '/upload' && req.method.toLowerCase() == 'post') {
    // parse a file upload
    var form = new formidable.IncomingForm();

    form.uploadDir = '/foo/'; // this does not exist

    form.on('error', function(error) { // I thought this would handle the upload error
      console.log("ERROR " + error);
      return;
    })

    form.parse(req, function(err, fields, files) {
      res.writeHead(200, {'content-type': 'text/plain'});
      res.write('received upload:\n\n');
      res.end(util.inspect({fields: fields, files: files}));
    });
    return;
  }

  // show a file upload form
  res.writeHead(200, {'content-type': 'text/html'});
  res.end(
    '<form action="/upload" enctype="multipart/form-data" method="post">'+
    '<input type="text" name="title"><br>'+
    '<input type="file" name="upload" multiple="multiple"><br>'+
    '<input type="submit" value="Upload">'+
    '</form>'
  );
}).listen(8000); 
```

我收到的错误是：

```
events.js:66
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: ENOENT, open '/foo/9b4121c196dcf3f55be4c8465f949d5b' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:48:18.060

从我在[Formidable 中看到的`lib/file.js`](https://github.com/felixge/node-formidable/blob/master/lib/file.js)情况来看，它尝试将文件打开为`fs.WriteStream`，但从未在该流上附加`error`事件处理程序。当`WriteStream`打开文件失败时，它会发出一个`error`事件，该事件未在 Formidable 中处理并引发错误。我会说这是 Formidable 中的一个错误，因为该`File`文件中定义的包装器本身就是一个`EventEmitter`，并且可以拦截流上的错误并将它们作为自己的错误事件重新发出以进行上游处理。

# javascript - 将对象动态插入现有对象

> ID：12378124
> 
> 赞同：1
> 
> 时间：2012-09-11T21:22:35.267
> 
> 标签：javascript

假设我有一个简单的模型，如下所示：

```
var person = {
    name: "Bob",
    age: "30"
} 
```

但是我将如何将一个新对象插入到现有对象中呢？假设我制作了一个新对象：

```
var pets = [{name: "Lucky", type: "Dog"}, {name: "Paws", type: "Cat"}]; 
```

我需要动态生成各种模型并将它们插入模型的各个部分。

我的最终模型如下所示：

```
var person = {
        name: "bob",
        age: "30",
        pets: [
            {name: "Lucky", type: "dog"},
            {name: "Paws", type: "Cat"}
        ]
    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:24:31.883

我不确定我是否完全理解您的问题，但我如何理解它，您需要做的就是设置`person`.

```
var person = {
        name: "Bob",
        age: "30"
    },
    pets = [{ name: "Lucky", type: "Dog" }, { name: "Paws", type: "Cat" }];

person.pets = pets;

console.log(person); // Object: (String) name, (String) age, (Array) pets; 
```

您也可以使用 EMCAScript 5 的`Object.create()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:24:20.587

在 person 中创建一个数组：

```
person.pets = [
   {name: "Lucky", type: "dog"},
   {name: "Paws", type: "Cat"}
]; 
```

或者

```
var pets = [{name: "Lucky", type: "Dog"}, {name: "Paws", type: "Cat"}];
person.pets = pets; 
```

# installation - 使用 Visual Studio 2012 创建 MSI 或设置项目

> ID：12378125
> 
> 赞同：130
> 
> 时间：2012-09-11T21:23:11.217
> 
> 标签：installation, windows-installer, visual-studio-2012, project-types

我创建了一个小型应用程序，我想创建一个 MSI 文件。

在[Visual Studio 2010](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2010)中，您有以下项目类型：

*其他项目类型*->*安装和部署*-> *Visual Studio 安装程序*->*安装项目*

[但是您在Visual Studio 2012](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2012)中获得的唯一内容是“启用 InstallShield Limited Edition”。

您可以更改 .NET Framework，但没有任何更改。

为什么它不再存在了？我怎样才能把它拿回来？有没有新的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-09-12T01:04:52.197

请参见：

[Visual Studio 安装项目 (vdproj) 不会随 VS 的未来版本一起提供](http://blogs.msdn.com/b/buckh/archive/2011/03/17/visual-studio-setup-projects-vdproj-will-not-ship-with-future-versions-of-vs.aspx)

[Windows 安装程序部署](http://msdn.microsoft.com/en-us/library/2kt85ked.aspx)

1 1/2 年前宣布，项目类型正在被杀死。替代方案是：

1.  使用 VS2008/2010 解决方案来构建您的安装程序
2.  切换到其他工具，例如 InstallShield 或 Windows Installer XML

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-05-28T06:48:13.340

要使用 InstallShield Limited Edition 在 Visual Studio 2012 中创建安装项目，请观看[此视频](http://blogs.msdn.com/b/visualstudio/archive/2014/04/17/visual-studio-installer-projects-extension.aspx)。

无法安装服务的 InstallShield 限量版。

> “ISLE 是迄今为止最糟糕的安装程序选项，升级的、已付费的版本使用起来很麻烦，而且在大多数情况下是不可能的。InnoSetup、Nullsoft、Advanced、WiX 或几乎任何其他安装程序都更好。如果你做了一项调查，你会发现没有人在使用 ISLE。我不知道你们为什么继续与 InstallShield 联系。这会损害你的信誉。任何价值一半盐的开发人员都知道 ISLE 毫无价值，当你支持它时，我们不得不质疑微软的判断。”

作者：Edward Miller（*[Visual Studio 安装程序项目扩展](http://blogs.msdn.com/b/visualstudio/archive/2014/04/17/visual-studio-installer-projects-extension.aspx)*中的评论）。

[WiX 工具集](http://wix.codeplex.com)，虽然功能强大，但对用户非常不友好，并且学习曲线陡峭。甚至还有一个用于安装 Windows 服务的可下载模板（参考*[VS2012：Windows 服务的安装程序？](http://arstechnica.com/civis/viewtopic.php?f=20&t=1190745)*）。

对于 Visual Studio 2013，请参阅博客文章*[使用 Visual Studio 创建安装程序](http://blogs.msdn.com/b/bharry/archive/2014/04/18/creating-installers-with-visual-studio.aspx)*。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-05-01T23:20:03.663

您是否尝试过“发布”方法？您只需在解决方案资源管理器中右键单击项目文件，然后从弹出菜单中选择“发布”。这通过几个非常简单的步骤创建了一个安装程序。

您可以从项目属性窗口的发布选项卡中对安装程序进行更多配置。

注意：此方法仅适用于 WPF 和 Windows 窗体应用程序。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-04-28T11:17:54.787

微软听取了在 Visual Studio 中支持安装程序 (MSI) 的呼声，并发布了[Visual Studio 安装程序项目扩展](http://blogs.msdn.com/b/visualstudio/archive/2014/04/17/visual-studio-installer-projects-extension.aspx)。您现在可以在 Visual Studio 2013 中创建安装程序；从 visualstudiogallery[下载扩展程序。](http://visualstudiogallery.msdn.microsoft.com/9abe329c-9bba-44a1-be59-0fbf6151054d)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-10-07T14:18:39.547

ISLE（InstallShield Limited Edition）是 Visual Studio Setup and Deploy 项目的“替代品”，但许多用户认为微软在从 Visual Studio 2012（及更高版本）中删除 .vdproj 支持并支持第三方公司软件方面采取了错误的步骤。

许多人要求将其退回（*[将基本设置和部署项目类型 Visual Studio Installer 退回](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3041773-bring-back-the-basic-setup-and-deployment-project-)*），但微软对我们的声音充耳不闻……真的很伤心。

由于 WiX 非常复杂，我认为值得尝试一些免费的安装系统 - [NSIS](http://en.wikipedia.org/wiki/Nullsoft_Scriptable_Install_System)或[Inno Setup](http://en.wikipedia.org/wiki/Inno_Setup)。两者都可编写脚本且易于学习 - 但与原始 SADP 一样强大。

我为 NSIS 和 Inno Setup 创建了一个非常棒的 Visual Studio 扩展，具有许多功能（智能感知、语法高亮、导航栏、直接从 Visual Studio 编译等）。您可以在[www.visual-installer.com](http://www.visual-installer.com)上试用（对不起，自我宣传 :)

下载[Inno Setup](http://rsoftware.org/isdl.php) (jrsoftware.org/isdl.php) 或[NSIS](http://nsis.sourceforge.net/Download) (nsis.sourceforge.net/Download) 并安装[V&I](http://unsigned-softworks.sk/visual-installer/downloads.html) (unsigned-softworks.sk/visual-installer/downloads.html)。

所有安装程序都很简单 Next/Next/Next...

在 Visual Studio 中，选择菜单*File* -> *New* -> *Project*，选择*NSISProject*或*Inno Setup*，将创建一个新项目（具有完整源代码）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-04-20T21:13:45.253

Visual Studio 2013 开发人员取得了一些进展：-D woot woot！请参阅博文*[Visual Studio 安装程序项目扩展](http://blogs.msdn.com/b/visualstudio/archive/2014/04/17/visual-studio-installer-projects-extension.aspx)*。

链接和信息取自 Brian Harry 的博客文章*[使用 Visual Studio 创建安装程序](http://blogs.msdn.com/b/bharry/archive/2014/04/18/creating-installers-with-visual-studio.aspx)*。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-08-28T13:30:57.600

查看文章*[Visual Studio 安装程序部署](https://msdn.microsoft.com/en-us/library/2kt85ked(v=vs.100).aspx)*。它肯定会帮助你。

您可以在页面上选择正确版本的 .NET 框架。所以对你来说，让它成为 .NET 4.5。我想这将适用于 Visual Studio 2012。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-25T16:47:45.053

我认为*[使用 ClickOnce](https://msdn.microsoft.com/en-us/library/bb772100.aspx)* (MSDN) 部署 Office 解决方案可能很有用。

在为 Office 2010 创建[Outlook](http://en.wikipedia.org/wiki/Microsoft_Outlook)插件后，问题是将其安装在客户的计算机上，而不使用 ISLE 或其他复杂工具（或昂贵的工具）。

解决方案是使用 Visual Studio 项目的发布工具，如链接中所述。在设置生效之前只需做两件事：

*   [安装 Office 2010 的 PIA（主互操作程序集）](https://www.microsoft.com/en-us/download/details.aspx?id=3508)
*   [安装 VSTO 2010 运行时](https://www.microsoft.com/it-it/download/details.aspx?id=48217)

# c# - 如何解析小时 0 到 24 的字符串时间戳

> ID：12378128
> 
> 赞同：0
> 
> 时间：2012-09-11T21:23:26.613
> 
> 标签：c#, .net, datetime

我正在尝试解析格式的字符串`"yyyyMMddHHmmss"`时间戳`DateTime.ParseExact()`。问题是我必须允许“24”的小时值（即小时可以从 0 到 24，其中**24 小时表示第二天的 0 小时**（天 + 1，小时 = 0）注意：我无法控制输入值。）当然，这会导致异常。
我可以设置任何设置/属性而不是手动解析/使用正则表达式吗？如果没有，任何有效的解析想法？

前任。

```
DateTime.ParseExact("20120911240000", "yyyyMMddHHmmss", 
   System.Globalization.CultureInfo.InvariantCulture); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:28:54.190

如果您想手动执行此操作，您可以使用[String.Substring()](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)来检测“24”的小时值，然后使用[String.Replace](http://msdn.microsoft.com/en-us/library/system.string.replace)将其设置为“00”，然后解析您的日期，然后添加一天（如果是） “24”的小时值是什么意思

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:22:38.060

山姆的解决方案很好，但既然你正在使用`yyyyMMddHHmmss`我会做类似的事情：

```
bool addDay = false;
DateTime result;
string dtToParse = "20120911240000";

if (dtToParse[8] == '2' && dtToParse[9] == '4')
{
    dtToParse = dtToParse.Substring(0, 8) + "00" + dtToParse.Substring(10);
    addDay = true;
}

result = DateTime.ParseExact(dtToParse, "yyyyMMddHHmmss", System.Globalization.CultureInfo.InvariantCulture);

if (addDay) { result = result.AddDays(1); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:35:43.653

没有简单的标志可以做你想做的事。

但是，这是创建自定义日期时间解析器的方法：

[如何为 DateTime 创建和使用自定义 IFormatProvider？](https://stackoverflow.com/questions/2382154/how-to-create-and-use-a-custom-iformatprovider-for-datetime)

# php - 添加具有 hrs 和 mins 值的字段

> ID：12378131
> 
> 赞同：3
> 
> 时间：2012-09-11T21:23:56.717
> 
> 标签：php, mysql, explode, hour, minute

我试图显示每个项目组的总数。问题是该字段的所有值都记录如下：

```
0h 06m 
```

总和显示为：

```
0 
```

使用以下代码。如何以正确的 HH:MM 格式显示总结果

```
<?
$query = "SELECT taskname, SUM(tasktime) FROM tictoc WHERE uid = '6' GROUP BY taskname"; 

$result = mysql_query($query) or die(mysql_error());

// Print out result
while($row = mysql_fetch_array($result)) {
    echo "<br />";
    echo "Total ". $row['taskname']. " = <strong>". $row['SUM(tasktime)']."</strong>";
    echo "<br />";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:31:37.853

如果`tasktime` 是时间戳数据类型，那么您可以使用`DATE_FORMAT(tasktime,'%Hh %im')`.

# emacs - whitespace-mode中特殊字符的含义

> ID：12378134
> 
> 赞同：2
> 
> 时间：2012-09-11T21:24:13.877
> 
> 标签：emacs, unicode, editor, whitespace, sentinel

在`whitespace-mode`（[`whitespace.el`](http://emacswiki.org/emacs/whitespace.el)在 EmacsWiki 上）中，有一个名为`whitespace-display-mappings`. 该变量决定了某些特殊字符应如何在不同的上下文中呈现。根据您的环境，它可以有各种默认值，但一个默认值是：

```
'((space-mark   ?\     [?\u00B7]     [?.]) ; space - centered dot
  (space-mark   ?\xA0  [?\u00A4]     [?_]) ; hard space - currency
  (space-mark   ?\x8A0 [?\x8A4]      [?_]) ; hard space - currency
  (space-mark   ?\x920 [?\x924]      [?_]) ; hard space - currency
  (space-mark   ?\xE20 [?\xE24]      [?_]) ; hard space - currency
  (space-mark   ?\xF20 [?\xF24]      [?_]) ; hard space - currency
  (newline-mark ?\n    [?$ ?\n])    ; eol - dollar sign
  (tab-mark     ?\t    [?\u00BB ?\t] [?\\ ?\t])) ; tab - left quote mark 
```

`?\`、和的映射是直截了当的，因为它们分别映射普通空格、无间断空格、换行符和制表符`?\xA0`。`?\n``?\t`

但是，字符`?\x8A0`、和是神秘的。它们分别代表、和。他们映射的角色也很神秘；默认情况下，它们只是映射到 Unicode 块中“稍后”的 4 个字符，这是没有意义的。`?\x9A0``?\xE20``?\xF20``Devanganari/<not assigned>``Bengali/BENGALI LETTER TTHA``Thai/THAI CHARACTER PHO SAMPHAO``Tibetan/TIBETAN DIGIT ZERO`

这些字符可能是由 Emacs 生成的代表某种“特殊”字符的哨兵，但这没有任何意义，因为`TIBETAN DIGIT ZERO`在这种情况下无法将例如映射到其他字符。

这些字符和它们映射到的字符实际代表什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:55:22.567

这段代码很可能是为 Emacs<23 编写的，当时 Emacs 中字符的内部编码不是 Unicode。所以这些字符实际上是各种不同的 NBSP（一个用于 latin-1，一个用于 latin-2，......）。

# nspasteboard - nspasteboard readObjectsForClasses 爆炸了

> ID：12378138
> 
> 赞同：1
> 
> 时间：2012-09-11T21:24:27.687
> 
> 标签：nspasteboard

我正在尝试在 tableView 中实现一个简单的拖放操作。但是，当我尝试使用 readObjectsForClasses 从粘贴板中检索数据时，出现运行时异常

“[__NSCFConstantString initWithBytes:length:encoding:]: 无法识别的选择器发送到实例”

这是我出现问题的 acceptDrop 方法。有人可以帮助指出我做错了什么。

```
 (BOOL) tableView: (NSTableView *) view
    acceptDrop: (id ) info
           row: (NSInteger) row
 dropOperation: (NSTableViewDropOperation) op
   {    

   NSArray *pBoardClasses = [[NSArray alloc] initWithArray:[NSArray arrayWithObjects:[NSStringPboardType class], [NSDragPboard class], nil]];
   NSPasteboard *board =[info draggingPasteboard];

   if(![board canReadObjectForClasses:pBoardClasses options:nil])
   {
    NSLog(@"No acceptable data format in pasteboard. Cannot perform this operation!");
    return NO;
   }

   NSArray * dFromPboard = [board readObjectsForClasses:pBoardClasses options:nil];

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:20:07.737

**使用`[NSString class]`而不是`[NSStringPboardType class]`**

还有：`[NSDragPboard class]`好像不太对。删除它并测试它是否`[NSString class]`仅适用。

```
NSArray *stringObjects = [pboard readObjectsForClasses:@[ [NSString class], [NSAttributedString class] ] options:@{}];
    if(stringObjects.count > 0) {
        NSString *myStr = stringObjects[0];
        //…
    }
//… 
```

# java - 有什么方法可以控制 Swing 组件的缩放？

> ID：12378140
> 
> 赞同：0
> 
> 时间：2012-09-11T21:24:40.570
> 
> 标签：java, swing, user-interface, jframe, scale

我试图让我的 Swing 组件既不能垂直缩放，也不能水平缩放，或者反过来（换句话说，我只希望它们有一个自由轴。在某些情况下它们可以水平缩放，也可以垂直缩放其他）。

有什么优雅的方法可以做到这一点，而无需添加大量的 JPanel？

LE：我宁愿不对我收到的已经制作好的布局进行任何重大修改。

我希望对这个问题有一个神奇、简单的解决方法，比如 JTextField.don'tScaleVerticallyIdiot();

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:35:49.550

您需要使用适当的布局管理器。

最强大的两个是[MigLayout](http://www.miglayout.com/)和[FormLayout](http://www.jgoodies.com/freeware/libraries/forms/)。我个人更喜欢 MigLayout，因为它更容易直接使用，而 FormLayout 仅适用于像[WindowBuilder](http://www.eclipse.org/windowbuilder/)这样的窗口设计器。

两者具有相似的特征特征。

使用 MigLayout，您可以指定是否允许组件在特定轴上增长，如果允许，应该为其提供什么样的权重（与其他组件的额外空间相反）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T22:23:09.790

你没有提到`LayoutManager`你目前正在使用哪个。

就个人而言，我会使用`GridBagLayout`你想要实现的目标。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T21:35:13.310

我认为您可以通过将[BorderLayout](http://docs.oracle.com/javase/6/docs/api/java/awt/BorderLayout.html)设置为容器的[LayoutManager来实现这一点，因此：](http://docs.oracle.com/javase/6/docs/api/java/awt/LayoutManager2.html)

*   **[在BorderLayout.EAST](http://docs.oracle.com/javase/6/docs/api/java/awt/BorderLayout.html#EAST)**上添加 swing 组件将使其只能*垂直*伸缩。
*   **[在BorderLayout.WEST](http://docs.oracle.com/javase/6/docs/api/java/awt/BorderLayout.html#WEST)**上添加 swing 组件将使其只能*垂直*伸缩。
*   **[在BorderLayout.NORTH](http://docs.oracle.com/javase/6/docs/api/java/awt/BorderLayout.html#NORTH)**上添加 swing 组件将使其只能*水平*扩展。
*   **[在BorderLayout.SOUTH](http://docs.oracle.com/javase/6/docs/api/java/awt/BorderLayout.html#SOUTH)**上添加 swing 组件将使其只能*水平*缩放。
*   **[在BorderLayout.CENTER](http://docs.oracle.com/javase/6/docs/api/java/awt/BorderLayout.html#CENTER)**上添加 swing 组件将使其*水平*和*垂直*可伸缩。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T13:04:29.137

> 我希望它是单行，高度和水平缩放与拖动框架一样多，但不添加多个 JPanel。

我认为`BoxLayout`可以`PAGE_AXIS`做到这一点。

# c# - foreach循环中的C#整数变量

> ID：12378146
> 
> 赞同：-3
> 
> 时间：2012-09-11T21:25:08.453
> 
> 标签：c#, variables, foreach, integer

在 C# 中，我有一个 foreach 循环，我想在其中 ++ 一个整数。

代码是这样的：

```
private void btnClick(object sender, EventArgs e) 
{
   int Counter = 0;
   foreach (SettingsProperty currrentProperty in Properties.Settings.Default.Properties)
   {
      Counter++;
   }
   lblText.Text = Counter.ToString();
} 
```

很简单，但当然因为我必须将整数赋值为 0，否则编译器会出错。所以`lblText.Text`打印 0 给我。

我就是不能让它正常工作。当然这很简单，但我找不到遮阳篷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:42:32.947

我认为那`Properties.Settings.Default.Properties`是空的。因此，要确保它是空的，请尝试：

```
private void btnClick(object sender, EventArgs e) 
{  
   if(Properties.Settings.Default.Properties.Count != 0)
   {
      int Counter = 0;
      foreach (SettingsProperty currrentProperty in Properties.Settings.Default.Properties)
      {
         Counter++;
         //Some stuff here else just use .Count without use a foreach
      }
      lblText.Text = Counter.ToString();
   } 
   else
      throw new Exception("Properties.Settings.Default.Properties is empty");
} 
```

否则在编译代码之前尝试设置一些*断点。*

# c# - 软停止工作

> ID：12378147
> 
> 赞同：-2
> 
> 时间：2012-09-11T21:25:36.927
> 
> 标签：c#

这可能真的很奇怪，但我不知道这是什么魔法。基本上，我的 Visual Studio 停止响应我的更改，它停止构建解决方案。我可以注释代码，这会完全破坏程序的逻辑，Visual Studio 仍然会运行我猜它在内存中的程序。这真的很烦人，我不知道它是什么。我一直在重新启动软件，但它仍然是一样的。这是一个许可软件。我想知道是否有人知道发生了什么。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:37:21.587

我已经看过几次了，通常以下一种或几种方法会起作用：

*   清理解决方案，然后构建它。
*   将“发布”更改为调试（或反之亦然），然后清理并构建，然后恢复。
*   关闭 Visual Studio 并手动删除 \bin 目录中的所有内容
*   对于 asp.net 网站，关闭 Visual Studio 并删除 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files 中的文件（路径将根据您的机器设置而有所不同这是我的 ASP. NET versino 4 文件编译为。）

# java - Eclipse：如何在应用程序库中搜索字符串？

> ID：12378152
> 
> 赞同：3
> 
> 时间：2012-09-11T21:25:53.813
> 
> 标签：java, eclipse, maven, m2eclipse

> **可能重复：**
> [如何使 eclipse “文件搜索”也可以在包含一些文本的源 jar 中搜索？](https://stackoverflow.com/questions/5295889/how-to-make-eclipse-file-search-to-also-search-inside-source-jars-containig-so)

我有一个使用 Maven 管理的库的 Eclipse Java 项目。在这些库中，必须有一个**值为**(not name)的字符串变量/字段`form-login`。

Eclipse 提供“Java 搜索”功能。它允许在应用程序库中搜索（包括 Maven 依赖项），但只能搜索变量的**名称**，而不是它的**值**。

另一方面，“文件搜索”功能不提供在应用程序库中的搜索。

如何在我的应用程序使用的库中找到一些字符串（或至少是某个变量的值）？

欢迎黑客！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:38:36.527

如果您在库中寻找“硬编码”值，请使用 Eclipse 中的[Maven Source 设置](https://stackoverflow.com/questions/310720/get-source-jar-files-attached-to-eclipse-for-maven-managed-dependencies)来下载库的源代码。然后你应该能够进行搜索。

如果这不是一个选项，那么，正如您可能已经知道的那样，您不是在寻找源代码中的某些内容，而是在运行时在内存中查找的内容。您可以在软件中设置断点，然后使用 YourKit 之类的工具来查找您要查找的内容。

[http://www.yourkit.com/docs/11/help/inspections_mem.jsp](http://www.yourkit.com/docs/11/help/inspections_mem.jsp)

当然，这是实现结果的一种冗长而繁琐的方法，但它*应该可以*工作。

# c++ - C++ 代码比它的 C 等效代码慢？

> ID：12378154
> 
> 赞同：4
> 
> 时间：2012-09-11T21:26:05.743
> 
> 标签：c++, c, performance, latency

C++ 编程语言是否存在已知代码比等效 C 语言慢的方面？显然，这将排除 OO 特性，如虚拟函数和 vtable 特性等。

我想知道，当您在延迟关键区域（并且您不担心 OO 功能）进行编程时，您是否可以坚持使用基本的 C++ 还是 C 会更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T21:29:34.257

C 或 C++ 语言标准中没有任何内容指定任何构造的速度（C++ 确实指定了应用于容器的某些操作的时间复杂度，但这超出了您的问题范围）。为给定构造生成代码的速度取决于用于编译它的编译器以及运行它的系统。

对于具有相同语义的有效 C 和有效 C++ 的给定代码构造，没有*根本*原因为什么两者都应该比另一个更快。但是，如果编译器的开发人员更聪明一点，一个可能会比另一个更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T22:00:22.867

例如，C++ 缺少关键字`restrict`. 正确使用有时允许编译器生成更快的代码。

*   在实践中很少见从中受益`restrict`，但它确实发生了，
*   在很多情况下，C++ 或 C 编译器可以推断（在内联之后）`restrict`应用的必要条件，并采取相应的行动，即使没有使用关键字，
*   同样是 C 编译器的 C++ 编译器可能会提供`restrict`或`__restrict`作为扩展提供。

但偶尔（或在某些领域很常见），这`restrict`是一个*非常*好的优化，我被告知这是仍然使用 Fortran 的原因之一。`restrict`这当然是 C 和 C++ 中严格的别名规则的原因之一，这提供了与更有限的情况相同的优化机会。

您是否“计算”这在一定程度上取决于您认为“等效代码”的内容。`restrict`永远不会改变有效使用它的程序的含义——编译器可以自由地忽略它。因此，将使用它的程序（对于 C 编译器的眼睛）和不使用它的程序（对于 C++）描述为“等效”并不是一件容易的事。这个版本`restrict`花费了更多（也许只是稍微多一点）程序员的努力来创建，因为程序员在使用它之前必须确保它是正确的。

如果您的意思是，是否有一个程序既是有效的 C 又是有效的 C++，并且在两者中具有相同的含义，但是实现在某种程度上受到 C++ 标准的限制，使其运行速度比 C 实现慢，那么我很确定答案没有”。如果您的意思是，标准 C 中是否有任何潜在的性能调整，但标准 C++ 中没有，那么答案是“是”。

您是否可以从调整中获得任何好处是另一回事，通过两种语言提供的不同优化，您是否会以相同的努力获得更多好处是另一回事，以及任何好处是否足以让您选择语言上还是另一种。在 C 和 C++ 代码之间进行互操作非常容易，因此如果您有任何理由更喜欢 C++，那么就像任何改变您首选编码方式的优化一样，切换到 C 通常是您在分析器告诉您时会做的事情你你的功能太慢了，之前没有。

此外，我试图以一种或另一种方式说服自己，假设您从不使用任何具有非平凡析构函数的类型，那么异常的可能性是否会降低性能。我怀疑在实践中它可能可以（并且这与“不为你不使用的东西付费”的原则相矛盾），如果只是因为否则 gcc 没有任何意义`-fno-exceptions`。C++ 实现将成本降低得相当低（而且主要是在rodata，而不是代码中），但这并不意味着它为零。延迟关键代码可能也可能不是二进制大小关键代码。

同样，它可能取决于您所说的“等效”代码的含义——如果我必须使用非标准编译器（例如）编译我所谓的“标准 C++ 程序”`g++ -fno-exceptions`以“证明”C++ 代码是和 C 一样好，那么从某种意义上说，C++ 标准让我付出了一些代价。

最后，C++ 运行时本身有一个启动成本，它不一定与“相同”程序的 C 运行时启动成本相同。您通常可以通过删除您并不严格需要的东西来降低两者的成本。但这就是努力，实现不一定每次都完全为您完成，因此*严格*来说，在 C++ 中您不必为不使用的东西付费。这是一般原则，但实现它是实施质量问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T21:35:23.717

这取决于您所说的“等效”是什么意思。如果将 C 的 stdio.h 与 C++ 的 iostream 进行比较，stdio.h 的操作通常更快（在某些情况下快得多）。但是，如果您谈论的是用 C++ 子集编写的代码，它也可以编译为有效的 C，那么生成的机器代码可能是相同的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T21:36:29.440

与许多 C 程序员喜欢的想法相反，人们通常可以在 C++ 中编写更紧凑、更快的代码，而无需在设计上做出大量牺牲。

我想不出 C++ 中的任何东西都比 C 中的对应物慢。不排除虚函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T21:34:29.193

*延迟关键*意味着*尽可能快，*还是仅仅意味着*一切都必须在可预测的时间内*运行？

如果是第二种情况，那么唯一不能在可预测时间内运行的事情`new`是`delete`和`try/catch`。在嵌入式编程中，有一些指令可以避免此类调用。在其他情况下，尤其是在 C++11 中，您可能会注意到有些事情更快（std::sort 比 C 的 sort() 快），有些事情稍微慢一些。

但是您比 C++ 获得的是更高的抽象级别，并且您不会遇到 C 风格的错误（比如`malloc()`没有相应的典型错误`free()`）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T21:54:56.257

C++ 中没有与 C 中直接等效的代码更快——或者实际上更易于维护。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-12T00:45:15.717

如果您使用的语言是 C 和 C++ 的交集，那么使用 C 编译器与 C++ 编译器编译代码时的性能差异纯粹是实现质量问题；没有理由一个应该比另一个更快。

当然，在现实世界中，如果您使用 C++，您将使用 C++在 C 和 C++ 交叉点上的*附加功能以及使用与 C**不同的习语*进行编程。相反，如果您使用 C，您至少使用了与在 C++ 中使用的非常不同的习语，并且您可能还使用了 C++ 所没有的现代 C 语言的附加功能，例如 Steve 提到的`restrict`关键字、VLA 或指向- VLA 类型或复合文字。在某些情况下，这些特性*可以*带来很大的性能优势，但根据我的经验，它们并不是大多数选择 C ​​而不是 C++ 的人这样做的原因。

在我看来，主要的区别确实是成语。在 C 中，通过将 next/prev 指针直接放在保存在列表中的结构中来创建链接列表是惯用的，而不是为列表和列表节点使用单独的包装器对象。在 C 中，将字符串的元素作为字符数组直接迭代是惯用的。在 C 中，尽可能使用完全存在于自动存储中的对象而不是分配动态存储是惯用的。等等。这些*惯用*的差异是 C 代码往往比 C++ 更快、更轻的主要方式。

当然，如果您愿意，您可以在 C++ 中使用相同的惯用语，因为大多数 C 惯用语所需的大部分语言结构都存在于 C 和 C++ 的交集中。然后，您还可以在适当的时候使用 C++ 的附加功能。但是您将编写非惯用的 C++ 代码，并且您可能会受到其他 C++ 程序员的很多批评......

# java - 通过迭代创建对象时，如何获取特定对象？

> ID：12378155
> 
> 赞同：0
> 
> 时间：2012-09-11T21:26:05.300
> 
> 标签：java, object, iteration, acm-java-libraries

我有一个 GRect 类型的实例变量

```
private GRect brick; 
```

我通过迭代创建了几个

```
private void makeBrickLineX(int x, int y, Color color)
{
    for (int i = 0; i < NBRICKS_PER_ROW; i++, 
                        x += BRICK_WIDTH + BRICK_SEP)                // Sets the x locations and separation between each brick.
    {                                                
        GRect brick  = new GRect (BRICK_WIDTH, BRICK_HEIGHT);
        brick.setFilled(true);
        brick.setColor(color);
        add(brick, x,y);
    }
} 
```

问题是，我正在创建一个“突围”游戏，我需要知道球何时击中砖块。它的代码很简单，我使用了一个名为 getElementAt (balls x & y location) 的方法，这一切都有效。但是有几块砖，并且在砖上调用 remove `remove (brick)`。只删除了右下角的一块砖，所以这些砖不能同名？我该怎么做才能使其适用于所有“砖”实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:46:46.973

您正在使用存储砖块的底层数据结构是什么？删除（砖）做什么？如果您使用的是散列数据结构，这似乎是 hashCode() 和/或 equals() 方法的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T23:31:02.433

您可以删除所有实例，`GRect`但您只是保留对最后一个命名实例的引用`brick`并将其从您的视图中删除。如果您已经将所有积木存储在一个对象中，您可以删除它们，例如在 a 的情况下，`List`通过给出一个数字索引：

```
List allBricks = getAllBricks();
int removeIndex = getIndexForRemove();
allBricks.remove(removeIndex); 
```

与球的位置进行比较时，您如何读取积木的位置？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:55:17.630

每次打电话

```
GRect brick = new GRect (BRICK_WIDTH, BRICK_HEIGHT) 
```

您正在创建一个设置为新 GRect 对象的新变量“brick”。在 Java 中，每个变量都必须有一个唯一的名称，因此您不能有多个 GRect 对象，每个对象都被命名为“brick”。

为了解决这个问题，每次创建一个名为“brick”的对象时，Java 只是用名为“brick”的第二个对象覆盖之前的名为“brick”的对象。因此，变量名称“brick”仅与您创建的最终砖对象相关联。

您大概仍在使用 add() 方法将您创建的每个砖对象添加到某些数据存储中。你能告诉我们你的 add() 方法的代码吗？您的 add() 方法很可能应该将每个砖块添加到某个数据结构中，然后您可以直接从中删除所有砖块。

# apache - htaccess 中的多个 RewriteRule

> ID：12378156
> 
> 赞同：0
> 
> 时间：2012-09-11T21:26:10.253
> 
> 标签：apache, .htaccess, mod-rewrite

```
RewriteRule ^([a-zA-Z0-9]+)/$ index.php?$1=1 [L]
RewriteRule ^([a-zA-Z0-9]+)$ index.php?$1=1 [L]

#if category 
RewriteRule ^category/([a-zA-Z0-9]+)/$ index.php?results=true&lid=$1 [L,NC]
RewriteRule ^category/([a-zA-Z0-9]+)$ index.php?results=true&lid=$1 [L,NC] 
```

第一部分工作得很好，当我在 url 中添加类别时，它会在其他参数之前写入类别，因此 css 和图像正在消失。

mywebsite.com/category/380 应该重定向到 mywebsite.com/index.php?results=true&lid=380 ，但原始 url 有图片和 css 但干净的 url 没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:32:25.543

这是因为相对基本 URI 已更改，并且您的 css 和图像可能是相对链接（例如`<img src="image_folder/image.png">`）而不是绝对链接（例如`<img src="/image_folder/image.png">`）。

原来的基地是`/`，这是`index.php`坐的地方。但是一旦有了`/category/something`，基地就变成了`/category/`。因此，您可以将所有链接从相对链接更改为绝对链接（通过添加前导斜杠），也可以将其添加到所有页面的标题中：

```
<base href="/"> 
```

* * *

如果已经`/category/`在 URI 前面生成了指向 css 和图像的链接，那么这听起来与您的框架相关。但是，如果没有解决方法，您可以将这些规则添加到您已经拥有的规则之上：

```
# if the request ends with one of these extensions
RewriteCond %{REQUEST_URI} \.(css|png|gif|jpe?g|bmp|ico|js)$ [NC]
RewriteRule ^category/(.*)$ /$1 [L] 
```

# php - Youtube API、AuthSub 还是 ClientLogin？

> ID：12378160
> 
> 赞同：1
> 
> 时间：2012-09-11T21:26:27.310
> 
> 标签：php, api, youtube

所以我有点困惑我应该使用哪种身份验证方法。基本上，我的应用程序应该允许其他人上传到我自己的 Youtube 帐户。据我了解，AuthSub 允许用户使用他们自己的 YT 帐户进行身份验证，并且 ClientLogin 存储他们的用户信息以进行登录。

所以我的问题是，如果我使用 ClientLogin 并让它登录到我的帐户，他们是否有可能获得我的帐户密码或上传以外的任何其他内容？

# algorithm - 遗传编程 - 种群初始化算法

> ID：12378165
> 
> 赞同：1
> 
> 时间：2012-09-11T21:26:50.217
> 
> 标签：algorithm, artificial-intelligence, genetic-programming

有人可以为我提供一些关于遗传编程的种群初始化算法的指导吗？

我已经了解了 Grown, Full, Ramped half half（取自“遗传编程领域指南”），并看到了一种新算法[两个快速树创建](http://www.cs.gmu.edu/~sean/papers/treecreation.pdf)（还没有阅读论文。）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-22T11:29:29.083

初始种群在启发式算法（例如 GA）中起着重要作用，因为它有助于减少这些算法获得可接受结果所需的时间。此外，它可能会影响进化算法给出的最终答案的质量。( [http://arxiv.org/pdf/1406.4518.pdf](http://arxiv.org/pdf/1406.4518.pdf) )

因此，正如您了解 Koza 的不同填充方法一样，您还必须记住，所使用的每种算法都不是 100% 随机的，也不是可以使用的算法。因此，您可以预测下一个值将是什么。您可能使用的另一种方法是统一初始化（请参阅免费的 pdf 文件：“遗传编程领域指南”）。这样做的想法是，最初，当在几代内创建种群时，由于交叉和选择，整个语法树可能会在几代内丢失。Langdon (2000) 提出了*梯度均匀分布的概念*这有效地允许用户指定可能的树可以具有的大小范围，并且如果在搜索空间中生成的树的排列不满足大小范围，那么树将被自动丢弃，而不管它的体能评价值。从这里开始，斜坡均匀分布将根据您使用的范围创建等量的树 - 所有这些都是您正在使用的函数和终端值的随机、唯一排列。（再次，有关更多详细信息，请参阅“遗传编程领域指南”）这种方法在所需解决方案是不对称而不是对称的采样方面非常有用（这是倾斜的一半和一半处理的内容）。

人口初始化的其他推荐读物： [http ://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.50.962&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.50.962&rep=rep1&type=pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T05:08:09.480

我认为这将取决于您要解决的问题。例如，我正在研究 TSP，我的初始种群是使用简单的贪婪技术生成的。有时您只需要创建可行的解决方案，因此您必须为此创建一个机制。通常，您会找到有关您的问题以及如何创建初始解决方案的论文。希望这可以帮助。

# java - 登录常用神器

> ID：12378171
> 
> 赞同：1
> 
> 时间：2012-09-11T21:27:52.863
> 
> 标签：java, log4j

我正在创建一个通用工件，可以导入到我公司的不同项目中。我的代码中有一些调试日志记录语句 (log4j)。

我的问题是我是否应该在我的 jar 中包含 log4j dtd 和 xml，以及我需要在 xml 中进行哪些设置？我希望仅当父项目启用调试级别时才显示调试消息，并且消息应进入该项目中配置的日志文件。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:35:08.733

我会在我的工件中使用像[Simple Logging Facade for Java](http://www.slf4j.org/)或[Commons Logging](http://commons.apache.org/logging/)这样的包装器，并让集成商决定使用哪个日志记录工具以及如何配置它。

# c# - 来自 SharpSSH 和公钥的 Sftp

> ID：12378176
> 
> 赞同：1
> 
> 时间：2012-09-11T21:28:36.020
> 
> 标签：c#, sftp, sharpssh

我正在使用 SharpSSH 的 Sftp 类来上传文件。有人要求我启用 RSA 身份验证。我找不到如何执行此操作的信息。为了支持 SharpSSH 中的公钥认证，我需要做什么？

我目前所做的就是这个

```
 ftp = new Sftp(config.SftpServer, config.SftpUsername, config.SftpPassowrd);
 ftp.Connect(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T18:29:31.783

为了连接 RSA，我需要创建一个 OpenSSH 格式的密钥并将其保存到磁盘。PuttyGen 在这方面做得很好。然后我只需要像这样使用该文件调用 AddIdentityFile

```
 ftp = new Sftp(config.SftpServer, config.SftpUsername, config.SftpPassowrd);
 ftp.AddIdentityFile("file");
 ftp.Connect(); 
```

# java - 如何使用 Spring context.xml 实例化一个类

> ID：12378180
> 
> 赞同：0
> 
> 时间：2012-09-11T21:28:53.673
> 
> 标签：java, spring, spring-mvc

我真的不知道从哪里开始，因为我对 Spring 非常陌生。

目前我正在实例化一个正常的类，

```
ClassImpl newImpl = new ClassImpl(); 
```

我想通过 Spring 的 context.xml 来做到这一点——所以我已经将该类作为 bean 加载了——

```
<bean id="ClassId" class="ClassImpl"></bean> 
```

我如何利用我已将 ClassImpl 作为 bean 传入的事实来知道实例化 ClassImpl？也就是说，我如何通过让Spring注入newImpl一个新的ClassImpl？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:37:38.350

你会做这样的事情：

```
ApplicationContext ctx = new ClassPathXmlApplicationContext("classpath:" + [package_name/context.xml]);
ClassImpl newImpl = (ClassImpl) ctx.getBean("ClassId") 
```

如果您从项目外部的 context.xml 加载它，我相信您可以做到

```
ApplicationContext ctx = new FileSystemXmlApplicationContext(path_to_context.xml);
ClassImpl newImpl = (ClassImpl) ctx.getBean("ClassId") 
```

# javascript - 获取选定的选项数据

> ID：12378183
> 
> 赞同：0
> 
> 时间：2012-09-11T21:29:09.667
> 
> 标签：javascript, jquery

我正在尝试从当前选择的选项中获取数据。我出来了这个。我可以以某种方式改进它还是这样好吗？

我特别不确定当前的选项选择器。

```
<option data-id='one'></option>

....

$('select#first').change(function(){

var smth = $("option:selected",this).data('id');
alert(smth);

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:35:29.923

看起来这应该工作，，

```
 $('select#first').change(function() {
    var smth = $(this).find('option:selected').attr('data-id');
    alert(smth);
});​

   OR

$('select#first').change(function() {
    var smth = $(this).find('option:selected').data('id');
    alert(smth);
});​ 
```

检查这个[小提琴](http://jsfiddle.net/sushanth009/rfNCg/)

# c - 如何做到这一点：嵌入式 USB 主机与插入的 USB 设备通信

> ID：12378185
> 
> 赞同：1
> 
> 时间：2012-09-11T21:29:22.053
> 
> 标签：c, usb, arm, host, atmel

我目前正在 AT91SAM9G20 评估套件上练习 USB 编程。在使用 ATMEL 提供的 USB 设备端口项目（CDC-driver，..）时，我学到了很多关于 USB 设备和 USB 设备端口驱动程序的知识。

但现在我想编写一个小驱动程序来控制我插入其中一个板 USB-A 主机端口的无线棒。

我阅读了很多关于 stackoverflow、OpenHCI 规范的内容，甚至在网上找到了一些库，但我不确定这是否是在没​​有任何“好的”USB 主机端口编程知识的情况下实现我自己的堆栈的好方法。

有没有一种小而简单的方法来控制板 USB 主机端口上的无线棒？（比如使用 USART 接口？）

不知道今天是不是太晚了，还是我“瞎了眼”，但你能不能给我一个关于如何在 AT91 中实现 RTUSB 或 libUSB 的提示？

提前致谢！

问候， 奥伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-24T16:40:03.163

您可以从此[页面从 atmel 下载 AT91LIB 1.9 版](http://www.atmel.com/tools/AT91SAMSOFTWAREPACKAGE.aspx)

USB 主机库位于 at91lib/usb/host 下。它们不是你需要的完整包，因为它们只是 OHCI 驱动程序——你仍然需要一个 USB 驱动程序和类驱动程序来实现你想要的。

您可以尝试支持 USB 主机的 RTOS，例如[rt-usb32](http://www.on-time.com/rtusb-32.htm)

# c# - 实体框架 5 MaxLength

> ID：12378186
> 
> 赞同：16
> 
> 时间：2012-09-11T21:29:28.320
> 
> 标签：c#, asp.net-mvc-4, entity-framework-5

我正在使用 EF4 和我发现的一段代码`MaxLength`从这样的实体中获取值：

```
public static int? GetMaxLength(string entityTypeName, string columnName)
        {
            int? result = null;
            using (fooEntities context = new fooEntities())
            {
                Type entType = Type.GetType(entityTypeName);
                var q = from meta in context.MetadataWorkspace.GetItems(DataSpace.CSpace)
                                  .Where(m => m.BuiltInTypeKind == BuiltInTypeKind.EntityType)
                        from p in (meta as EntityType).Properties
                        .Where(p => p.Name == columnName
                                    && p.TypeUsage.EdmType.Name == "String")
                        select p;

                var queryResult = q.Where(p =>
                {
                    bool match = p.DeclaringType.Name == entityTypeName;
                    if (!match && entType != null)
                    {
                        match = entType.Name == p.DeclaringType.Name;
                    }

                    return match;

                }).Select(sel => sel.TypeUsage.Facets["MaxLength"].Value);
                if (queryResult.Any())
                {
                    result = Convert.ToInt32(queryResult.First());
                }

                return result;
            }
        } 
```

但是，我升级到 EF5 并且我知道收到此错误消息：

```
...fooEntities'  does not contain a definition for 'MetadataWorkspace' and no
extension method 'MetadataWorkspace' accepting a first argument of type
'...fooEntities' could be found (are you missing a using directive or an assembly
 reference?) 
```

从 EF5 获取元数据的最佳方式是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-18T22:18:59.027

这是一段非常方便的代码。我对其进行了一些重构，它非常有用，我想我会把它贴在这里。

```
public static int? GetMaxLength<T>(Expression<Func<T, string>> column)
    {
        int? result = null;
        using (var context = new EfContext())
        {
            var entType = typeof(T);
            var columnName = ((MemberExpression) column.Body).Member.Name;

            var objectContext = ((IObjectContextAdapter) context).ObjectContext;
            var test = objectContext.MetadataWorkspace.GetItems(DataSpace.CSpace);

            if(test == null)
                return null;

            var q = test
                .Where(m => m.BuiltInTypeKind == BuiltInTypeKind.EntityType)
                .SelectMany(meta => ((EntityType) meta).Properties
                .Where(p => p.Name == columnName && p.TypeUsage.EdmType.Name == "String"));

            var queryResult = q.Where(p =>
                                          {
                                              var match = p.DeclaringType.Name == entType.Name;
                                              if (!match)
                                                  match = entType.Name == p.DeclaringType.Name;

                                              return match;

                                          })
                .Select(sel => sel.TypeUsage.Facets["MaxLength"].Value)
                .ToList();

            if (queryResult.Any())
                result = Convert.ToInt32(queryResult.First());

            return result;
        }
    } 
```

你可以这样称呼它：

```
GetMaxLength<Customer>(x => x.CustomerName); 
```

这是假设您已在 Customer 类型的 DbContext 中定义了一个 DbSet，该 DbSet 具有 CustomerName 的属性和已定义的 MaxLength。

这对于创建将文本框的最大长度设置为数据库中字段的最大长度的模型属性非常有用，始终确保两者相同。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-04-04T20:44:33.987

我将 mccow002 的示例重构为一个可复制粘贴的扩展方法类：

```
using System.Data.Entity;
using System.Data.Entity.Infrastructure;
using System.Data.Metadata.Edm;

public static class DbContextExtensions
{

    // get MaxLength as an extension method to the DbContext
    public static int? GetMaxLength<T>(this DbContext context, Expression<Func<T, string>> column)
    {
        return (int?)context.GetFacets<T>(column)["MaxLength"].Value;
    }

    // get MaxLength as an extension method to the Facets (I think the extension belongs here)
    public static int? GetMaxLength(this ReadOnlyMetadataCollection<Facet> facets)
    {
        return (int?)facets["MaxLength"].Value;            
    }

    // just for fun: get all the facet values as a Dictionary 
    public static Dictionary<string,object> AsDictionary(this ReadOnlyMetadataCollection<Facet> facets) {
        return facets.ToDictionary(o=>o.Name,o=>o.Value);
    }

    public static ReadOnlyMetadataCollection<Facet> GetFacets<T>(this DbContext context, Expression<Func<T, string>> column)
    {
        ReadOnlyMetadataCollection<Facet> result = null;

        var entType = typeof(T);
        var columnName = ((MemberExpression)column.Body).Member.Name;

        var objectContext = ((IObjectContextAdapter)context).ObjectContext;
        var test = objectContext.MetadataWorkspace.GetItems(DataSpace.CSpace);

        if (test == null)
            return null;

        var q = test
            .Where(m => m.BuiltInTypeKind == BuiltInTypeKind.EntityType)
            .SelectMany(meta => ((EntityType)meta).Properties
            .Where(p => p.Name == columnName && p.TypeUsage.EdmType.Name == "String"));

        var queryResult = q.Where(p =>
        {
            var match = p.DeclaringType.Name == entType.Name;
            if (!match)
                match = entType.Name == p.DeclaringType.Name;

            return match;

        })
            .Select(sel => sel)
            .FirstOrDefault();

        result = queryResult.TypeUsage.Facets;

        return result;

    }

} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-12T08:18:53.523

这意味着您不仅升级了 EF，还更改了 API。有两个 API - 核心 ObjectContext API 和简化的 DbContext API。您的代码依赖于 ObjectContext API（EF4 中唯一可用的 API），但 EF5 使用 DbContext API（自 EF4.1 起在单独的 EntityFramework.dll 程序集中添加）。如果您想使用新的 EF 功能和以前的代码，您应该升级到 .NET 4.5。

如果您还想使用新的 API，您将不得不更新大量现有代码，但仍然可以从中获取`ObjectContext`并使`DbContext`您的方法再次工作。你只需要使用这个片段：

```
var objectContext = ((IObjectContextAdapter)context).ObjectContext; 
```

并在您的代码中使用`objectContext`而不是。`context`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-08T00:43:13.693

我有类似的问题，解决方案在这里；

```
 MyDBEntities ctx = new MyDBEntities();
        var objectContext = ((IObjectContextAdapter)ctx).ObjectContext;

        var cols = from meta in objectContext.MetadataWorkspace.GetItems(DataSpace.CSpace)
                   .Where(m => m.BuiltInTypeKind == BuiltInTypeKind.EntityType)
                   from p in (meta as EntityType).Properties
                      .Where(p => p.DeclaringType.Name == "TableName")
                   select new
                   {
                       PropertyName = p.Name                          
                   }; 
```

# java - 自动定位.jar

> ID：12378187
> 
> 赞同：0
> 
> 时间：2012-09-11T21:29:29.457
> 
> 标签：java, jfilechooser

我正在编写一个具有`JFileChooser`.

我希望在其中打开的默认位置是（一旦创建程序）程序（可运行）.jar 文件所在的文件夹。

有没有一种简单的方法可以在文件系统中定位程序，还是我必须手动完成？

另外，如果有一种简单的方法，当我的程序仍然只是一个项目（不是 jar）时，默认位置是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:28:35.997

查找执行位置：

```
public static void main(String[] args) {
  new Test();
}

public Test() {
  JFileChooser jfc = new JFileChooser();
  File loc = new File(getClass().getProtectionDomain().getCodeSource().getLocation().getPath());
  jfc.setCurrentDirectory(loc);
  jfc.showOpenDialog(null);
} 
```

当您在项目中时，该目录将是您的类文件所在的位置。例如，project_dir/bin/。

# objective-c - 创建 PDF 时 HTML 中的图像标记

> ID：12378188
> 
> 赞同：2
> 
> 时间：2012-09-11T21:29:31.693
> 
> 标签：objective-c, ios, pdf

我正在使用以下代码从 iOS 中的 HTML 字符串生成 PDF。创建 PDF 时，我似乎丢失了任何标签。我已经尝试在设备上添加指向文件的 src 属性以及将 base64 图像数据放入源中。

这里我创建了一个 UIMarkupTextPrinterFormatter：

```
UIMarkupTextPrintFormatter *fmt = [[UIMarkupTextPrintFormatter alloc]
                                   initWithMarkupText:htmlStringHere]; 
```

我的 htmlStringHere 值包含：

```
<html><head><style>.testClass{color:yellow;font-weight:bold;}</style></head><body><img src="Icon.png" ></img></body> 
```

然后我使用自定义 UIPrintPageRenderer 来生成 PDF。此时，图像已经丢失。然而，其他 html 元素并没有丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T06:47:17.433

每当您使用带有 HTML 字符串的 UIWebView 时，我都会在这里建议。您必须在其第二个参数中指定 BASEURL。BASEURL 负责加载 HTML 字符串中的资源。我认为您错过了指定或可能指定错误。

请参阅此答案以获取 BASEURL

[在 UIWebView 中使用 HTML 和本地图像](https://stackoverflow.com/a/747644)

[UIWebView 类参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006950-CH3-SW10)

希望这会有所帮助:)

# jquery - 通过他们的队列键访问动画元素？

> ID：12378190
> 
> 赞同：0
> 
> 时间：2012-09-11T21:29:35.827
> 
> 标签：jquery

我可以在自定义命名队列中停止动画而不访问动画元素吗？

```
$(complictedSelector).animate( 
     {opacity: .5}, 
     {duration: 10000, queue: 'hover'} ); 
```

我幼稚的使用尝试`$stop( 'hover' )`不起作用:-)

看来我**确实**需要这些元素。那么......有没有办法通过他们的队列键/名称访问动画元素？

队列键是指传递给选项的字符串（在本例中为“悬停”）。

*[（从 jQuery 1.7 开始，queue 选项也可以接受一个字符串，在这种情况下，动画被添加到由该字符串表示的队列中。）](http://api.jquery.com/animate/)*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:16:05.507

> *“我可以在不访问动画元素的情况下停止自定义命名队列中的动画吗？”*

我不建议这完全有效，但是：

```
$(":animated").stop('hover');
// or even
$("*").stop('hover'); 
```

我想您必须在编写低效单行代码的便利性与拥有更多基础设施以保持对动画元素的引用之间取得平衡，也许可以测试速度，并自行决定如何进行。

# mysql - mysql 组由 min

> ID：12378193
> 
> 赞同：5
> 
> 时间：2012-09-11T21:29:58.873
> 
> 标签：mysql, having

下面是表数据（一小块），基本上我希望在按帐户编号分组时仅查询具有最小 original_date_ctr 的行。

我尝试过使用 HAVING(MIN()) 和 where = Min() 以及其他没有运气的方法。

这里的正确结果会给我 id_ctr 688、1204 和 1209

```
id_ctr  account_number_cus  original_date_ctr   mrc_ctr  
------  ------------------  -----------------  ----------
   688               20062  2008-05-17             138.97
  1204              151604  2006-08-10           42000.00
  1209              151609  2006-06-29             968.68
  1367               20062  2011-10-27             207.88
  1434              151609  2009-09-10            1469.62
  1524              151604  2009-09-01           36999.99
  1585              151609  2012-05-31            1683.88 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T21:38:55.487

使用连接执行此操作会更快：

```
SELECT a.*
FROM mytable a
LEFT JOIN mytable b
  ON a.account_number_cus = b.account_number_cus
  AND b.original_date_ctr < a.original_date_ctr
WHERE b.id_ctr IS NULL 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T21:33:16.673

您可以通过以下方式执行此操作：

```
select t1.id_ctr,
    t1.account_number_cus,
    t1.original_date_ctr,
    t1.mrc_ctr  
from yourtable t1
inner join
(
    select min(original_date_ctr) as mindate, account_number_cus
    from yourtable
    group by account_number_cus
) t2
    on t1.account_number_cus = t2.account_number_cus
    and t1.original_date_ctr = t2.mindate 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/e49ee/3)

# git - 提交后如何在 git 分支中搜索文件名？

> ID：12378194
> 
> 赞同：1
> 
> 时间：2012-09-11T21:30:01.960
> 
> 标签：git

不久前，在一个已知的分支中，我提交了一个文件，该文件随后被删除。多次迭代后，我想恢复这个文件。

请问这怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:43:11.557

如果您记得文件名，则可以运行`git log -- <filename>`以显示涉及该文件的所有提交。如果您不记得文件名，但记得有关内容的一些信息，您可以使用`git log -S <string>`或`git log -G <regex>`来搜索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:42:08.067

`git log -U | less`

查找引用文件名的最新提交

`git checkout MOST-RECENT-COMMIT FILENAME`

# windows-7 - 通过 Cygwin 在 Windows 上配置 Hadoop

> ID：12378199
> 
> 赞同：10
> 
> 时间：2012-09-11T21:30:32.180
> 
> 标签：windows-7, hadoop, cygwin

我正在尝试在我的 Windows 7 机器上配置 Hadoop。我能够启动名称节点和其他服务，但是当我运行 Hadoop 包（版本 1.0.3）附带的示例时，出现以下错误：

```
bin/hadoop: line 320 : C:\Program: Command not found. 
```

我使用以下命令运行示例：

```
bin/hadoop jar hadoop-examples-1.0.3.jar pi 10 
```

我打开了这个`hadoop`文件，其中出现了错误，发现在第 320 行正在生成一个路径：

```
JAVA_PLATFORM=`CLASSPATH=${CLASSPATH} ${JAVA} -Xmx32m ${HADOOP_JAVA_PLATFORM_OPTS} org.apache.hadoop.util.PlatformName | sed -e "s/ /_/g"` 
```

所以我觉得问题可能出在这个`JAVA`变量上，因为 Cygwin 对路径名使用了不同的约定。有没有人也遇到过这个问题或知道是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-04T22:29:57.760

# 快速总结：

*   下面的`hadoop`bash 脚本`(path)/bin/hadoop`实际上有一个 bug。该脚本假定 hadoop 需要的所有文件/路径中都没有空格。好吧，对于任何 Windows，它们都会在某个地方有一个空间，因为“程序文件”中有一个空间。

# 细节

这是一个棘手的问题......我遇到了同样的问题，我花了一段时间来解决。

首先，问题是：当文件路径/名称中涉及空格时，通过脚本设置环境变量可能会变得粗略（这在当今的非 *nix 系统中经常发生）。

接下来，可能有***两个***地方需要解决问题：

1.  在你的`(path)/conf/hadoop-env.sh`脚本中，你应该设置`JAVA_HOME`脚本，它应该看起来像：

    ```
    export JAVA_HOME=/cygdrive/c/"Program Files"/Java/jdk1.7.0_06 
    ```

    （请注意，“程序文件”周围有引号，以便将其识别为单个元素。您不能使用`\`转义字符，因为 cygwin 对 Windows 到 UNIX 路径进行了一些修饰，因此`\`不能充当转义符。

2.  在您的`(path)/bin/hadoop`脚本中，第 320 行可能会写成如下内容：

    ```
    JAVA_PLATFORM=`CLASSPATH=${CLASSPATH} ${JAVA} -Xmx32m ${HADOOP_JAVA_PLATFORM_OPTS} org.apache.hadoop.util.PlatformName | sed -e "s/ /_/g"` 
    ```

    您需要将其更改为：

    ```
    JAVA_PLATFORM=`CLASSPATH="${CLASSPATH}" "${JAVA}" -Xmx32m ${HADOOP_JAVA_PLATFORM_OPTS} org.apache.hadoop.util.PlatformName | sed -e "s/ /_/g"` 
    ```

    请注意，我在环境变量`${CLASSPATH}`和`${JAVA}`. 通过将引号括起来，您是在说“此变量指定的整个字符集应被视为一个字符串对象”。

* * *

好的，现在如果您想了解为什么会发生这种情况以及发生了什么，问题是您的 JDK 可能存储在“程序文件”下，或者可能存储在“程序文件（x86）”下，两者都有***空格***小路。Hadoop 需要的所有其他环境变量不依赖于“程序文件”路径中的任何内容。这就是为什么您只看到一个错误被标记的原因。所有其他缺少引号的环境变量都没有空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T20:34:00.187

这些是片段，错误是： hadoop.util.Platform command not found

*   `"CLASSPATH=cygpath -p "$CLASSPATH"` 分布，产生错误
*   `"CLASSPATH=cygpath -p -w "$CLASSPATH"` 添加了 windows 标志，产生了错误
*   `"CLASSPATH=cygpath -wp "$CLASSPATH"` **问题已解决**

这是在 Vista 上。

# python - 简化一些东西

> ID：12378200
> 
> 赞同：-3
> 
> 时间：2012-09-11T21:30:33.517
> 
> 标签：python

是否可以在 Python 中简化这一点？

```
status = get_git_status()   
for s in ("modified", "deleted", "Untracked files:"):
    if s in status:
        pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:42:30.357

这取决于您是否需要为每个匹配项执行操作，或者您是否只对其中任何一个匹配项感兴趣。如果您只是对其中任何一个匹配感兴趣，请使用`any`：

```
if any(s in status for s in ("modified", "deleted", "Untracked files:")):
    whatever() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:43:19.937

如果状态“已修改”和“已删除”，您会运行两次密码吗？如果只需要运行一次，可以使用any()：

```
status_list = ("modified", "deleted", "Untracked files:")

if any(s in status for s in status_list):
    pass 
```

# c# - 将 WCF NetTcpBinding 设置为仅接受本地连接时出错

> ID：12378209
> 
> 赞同：0
> 
> 时间：2012-09-11T21:31:06.887
> 
> 标签：c#, wcf, nettcpbinding, mex-bindings

我正在尝试设置一个只接受来自自身的传入消息/连接的 WCF 服务。

我已经能够成功创建服务并运行它并使用此代码与其通信以创建 WCF 端点（不仅限于本地主机）

```
NetTcpBinding binding = new NetTcpBinding();
binding.Security.Mode = SecurityMode.None;
_host = new ServiceHost(this, new Uri("net.tcp://localhost:19852"));
_host.Description.Behaviors.Add(new ServiceMetadataBehavior());
_host.AddServiceEndpoint(typeof(ISyncClient), binding, "SyncService");
_host.AddServiceEndpoint(typeof(IMetadataExchange), System.ServiceModel.Description.MetadataExchangeBindings.CreateMexTcpBinding(), "mex");
_host.Open(); 
```

一旦我添加此行以限制来自本地主机的连接

```
binding.HostNameComparisonMode = HostNameComparisonMode.Exact; 
```

我得到了这个例外

System.ServiceModel.AddressAlreadyInUseException：IP 端点 0.0.0.0:19852 上已经有一个侦听器。如果有另一个应用程序已经在侦听此端点，或者您的服务主机中有多个服务端点具有相同的 IP 端点但绑定配置不兼容，则可能会发生这种情况。---> System.Net.Sockets.SocketException: 每个套接字地址（协议/网络地址/端口）通常只允许使用一次

我什至不确定我在做什么是限制 WCF 访问的正确方法，但显然它不起作用。对我来说，这看起来像是与 MEX 端点的某种冲突。据我所知，我需要 mex 端点，所以我无法摆脱它。有人指出我的解决方案的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T00:49:12.937

最简单的方法是使用命名管道绑定。它只支持本地呼叫。从[选择交通工具](http://msdn.microsoft.com/en-us/library/ms733769.aspx)：

> 如果需要在单台计算机上的不同 WCF 应用程序之间进行通信，并且您希望阻止来自另一台计算机的任何通信，则使用命名管道传输。

此外，Mex 积分是完全可选的。您可以毫无问题地摆脱其端点和行为。

# objective-c - 在 iOS 设备被锁定或应用程序处于后台时启动下载

> ID：12378213
> 
> 赞同：0
> 
> 时间：2012-09-11T21:31:27.793
> 
> 标签：objective-c, ios, xcode, ios5

我正在使用 AVAudioPlayer 的实例播放音乐。一旦一首歌曲完成，“播放列表”中的下一首歌曲将使用 NSURLConnection 下载。

我卡住的地方：我希望能够下载播放列表中的下一个音频文件，并在手机锁定或用户使用另一个应用程序时开始在后台播放。我该怎么做呢？

我偶然发现了这篇文章：使用建议[使用 AVAudioplayer 在后台播放音乐](https://stackoverflow.com/questions/7619794/play-music-in-background-in-iphone-using-avaudioplayer)`[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];`，但这似乎只允许在后台播放音频，而不是启动下载。

这当然是可能的，因为 Pandora、Spotify 和其他人都可以做到......帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:33:37.497

您应该请求系统让您在下载音频文件时在后台运行。您可以通过使用 UIApplication 的 beginBackgroundTaskWithExpirationHandler: 方法来做到这一点。下载文件后，您可以让 AVAudioPlayer 播放您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:20:51.107

您应该阅读有关多任务处理的 Apple 文档。

[http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3)

您需要将 UIBackgroundModes 键添加到 info.plist 以获取音频。这会阻止您的应用程序被暂停，然后所有正常的回调仍将运行。

# netbeans - NetBeans JIRA 模块似乎无法处理自定义工作流

> ID：12378216
> 
> 赞同：0
> 
> 时间：2012-09-11T21:31:49.840
> 
> 标签：netbeans, jira

我在谷歌上花了大约一天的时间试图找到这个问题的答案，但无济于事。

我们的 JIRA 实例为我们的项目定制了一个工作流，当我们的开发人员提交更改时，我们希望使用 NetBeans JIRA 模块将问题转移到工作流的下一步（“测试”）。

但是，NetBeans 中的 JIRA 模块在“提交”对话框或“编辑问题”窗口中均不提供任何转换。

我们已经尝试了一个带有默认工作流程的 vanilla JIRA 实例，并且效果很好，但是我们希望为我们的项目提供更详细的工作流程。

我什至找不到这个模块的作者甚至来源。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:36:36.987

我最终开始下载整个 NetBeans 源代码并选择了 JIRA 插件代码。

工作流程**硬**连线到标准的默认 JIRA 工作流程。

但是，在与插件作者协商后，我们想出了一种使插件与任何工作流程兼容的方法。

希望从 NetBeans 的 7.3 beta 版本中可以使用插件的更新。

# security - API 设计和安全性：为什么要隐藏内部 ID？

> ID：12378220
> 
> 赞同：19
> 
> 时间：2012-09-11T21:32:04.810
> 
> 标签：security, api, database-design

我听一些人说你永远不应该将你的内部 id 暴露给外界（例如 auto_increment'ng 主键）。

有些人建议使用某种 uuid 列来代替查找。

我真的很想知道为什么会建议这样做，以及它是否真的很重要。

使用 uuid 基本上只是混淆了 id。重点是什么？我唯一能想到的是 auto_incrementing 整数显然指出了我的数据库对象的顺序。外部用户是否知道一件事是在另一件事之前/之后创建的？

或者纯粹是混淆 id 会阻止“猜测”对特定对象的不同操作？

在设计面向外部的 API 时，这甚至是我应该考虑的问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-03-01T11:34:39.007

很好的答案，我将添加另一个原因来说明您不想公开内部自动递增 ID 的原因。
作为一家有竞争力的公司，我可以轻松地衡量您每周/每天/每小时获得多少新用户/订单/等。我只需要创建一个用户和/或订单，然后从上次得到的 ID 中减去新 ID。
因此，不仅是出于安全原因，也是出于商业原因。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-12T07:10:29.567

您向恶意用户提供的有关您的应用程序及其布局的任何信息都可以并将用于您的应用程序。我们在（Web）应用程序安全中面临的问题之一是，在项目初期做出的看似无害的设计决策在项目规模扩大时变成了致命弱点。让攻击者对实体的顺序做出明智的猜测可能会以以下一些无关的方式再次困扰您：

1.  实体的 ID 不可避免地会在您的应用程序中作为参数传递。这将导致黑客最终能够提供他们通常不应该访问的应用程序参数。我个人能够查看我没有业务查看的订单详细信息（在一个非常受欢迎的零售商网站上），作为 URL 参数同样如此。我只是从我自己的合法订单中输入应用程序序列号。

2.  了解限制或至少了解主键字段值的进展对于 SQL 注入攻击来说是非常宝贵的素材，这里我无法涵盖其范围。

3.  键值不仅用于 RDBMS 系统，还用于其他键值映射系统。想象一下 JSESSION_ID cookie 顺序是否可以预先确定或猜测？每个具有相反拇指的人都将在 Web 应用程序中重播会话。

还有更多我相信这里的其他人会想出的。

海豹突击队 6 并不一定意味着有 6 个海豹突击队。只是让敌人猜测。潜在攻击者花在猜测上的时间是你口袋里的更多钱。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-12T09:08:57.563

与许多与安全相关的问题一样，这是一个微妙的答案——kolossus 提供了一个很好的概述。

它有助于了解攻击者可能如何破坏您的 API，以及发生了多少安全漏洞。

大多数安全漏洞都是由错误或疏忽引起的，攻击者会寻找这些。试图破坏您的 API 的攻击者首先会尝试收集有关它的信息 - 因为它是一个 API，所以您可能会发布详细的使用文档。攻击者将使用此文档，并尝试许多不同的方法来使您的站点崩溃（如果幸运的话，从而暴露更多信息），或者以您未预料到的方式做出反应。

你必须假设攻击者有很多时间，并且会编写他们的攻击脚本以尝试每条途径 - 就像一个有无限时间的窃贼，他在你的房子里走来走去尝试每一扇门和窗户，并且从每次尝试中学习的开锁器。

因此，如果您的 API 公开了类似的方法`getUserInfo(userid)`，并且 userID 是一个整数，那么攻击者将编写一个脚本从 0 向上迭代以找出您有多少用户。他们会尝试负数，并且`max(INT) + 1`. 在所有这些情况下，您的应用程序都可能泄漏信息，并且 - 如果开发人员忘记处理某些错误 - 可能会暴露比您预期更多的数据。

如果您的 API 包含限制对某些数据的访问的逻辑 - 例如，您可以`getUserInfo`为好友列表中的用户执行 - 攻击者可能会因为错误或疏忽而幸运地获得一些数字，并且他会知道这些信息他正在与一个有效的用户建立联系，因此他们可以建立一个应用程序设计方式的模型。这相当于一个窃贼知道你所有的锁都来自一个制造商，所以他们只需要带上那个开锁器。

就其本身而言，这可能对攻击者没有任何好处 - 但它会让他们的生活变得更轻松。

考虑到使用 UUID 或其他无意义的标识符的努力，可能值得让攻击者更加困难。当然，这不是最重要的考虑因素——它可能不会成为保护 API 免受攻击者应该做的前 5 件事——但它会有所帮助。

# java - 将 JLabel 绑定到类变量

> ID：12378223
> 
> 赞同：0
> 
> 时间：2012-09-11T21:32:20.567
> 
> 标签：java, netbeans-7, jlabel

我使用 Netbeans 7.2，我创建了一个名为“Form”的表单，在这个表单中有一个变量名为“label”的标签，但是如果我尝试访问这个标签（Form.label），我会得到一个语法错误，这个类似乎没有一个名为'label'的静态变量。如何获取它？

PS：我对xcode中的interface builder很熟悉，我问的是相当于绑定一个outlet。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T01:25:31.320

太糟糕了，我没有看到 Netbeans 生成我可以修改的类代码。所以标签在类中。

# java - Tomcat 7：从 Tomcat 6 迁移 - Invoker Servlet

> ID：12378225
> 
> 赞同：0
> 
> 时间：2012-09-11T21:32:26.400
> 
> 标签：java, tomcat, servlets, tomcat7

实际上我正在使用一个旧的 Web 应用程序（它的开发有 10 年）。早些时候，webapp 在 Tomcat 5.x 中运行，实际上它在 Tomcat 6 (6.0.28) 中运行，并且使用了“[邪恶](http://www.coderanch.com/how-to/java/InvokerServlet)”的 Invoker Servlet。

我们正在尝试迁移到 Tomcat 7，并寻找一种方法来让调用者 servlet[工作](http://blogs.nologin.es/rickyepoderi/index.php?/archives/44-Tomcat-7-and-the-Invoker-Servlet.html)，我们已经看到它很复杂（而且，“解决方案”与映射 web.xml 文件中的每个 Servlet 非常相似）。

今天，该项目有大约 2600 个类，我们有一个严重的问题：映射每个 servlet。

问题：有没有办法“优化”整个应用程序的映射？我不知道，一些工具可以帮助我获取每个 servlet 的限定名称。我负责这个项目，我不知道如何开始......

**另一个问题：**我们没有完整的源代码，实际上，如果我想对 webapp 进行任何更改，我必须“反编译”.class 文件（我们使用 Gel 来反编译 .class 文件），修复任何错误并再次编译文件，因此，[Servlet 3.0 Annotations](https://blogs.oracle.com/swchan/entry/servlet_3_0_annotations) for mapping 似乎不是一个好主意。

我们很乐意接受任何建议。

**编辑：**现在，我将尝试映射每个 servlet。但是，我有一个问题：这个任务可以在与 web.xml 不同的文件中完成吗？这个问题是因为 servlet 的扩展列表，以及这个文件的未来管理。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:53:00.133

行。如果我问了一个“毫无意义”的问题，我很抱歉。解决这个问题的唯一方法是映射 web.xml 文件中的每个 servlet。

经过广泛的谷歌搜索并通过 stackoverflow，除了[WebServlet 注释](http://www.javabeat.net/2008/12/new-features-in-servlets-3-0/)或 web.xml 映射之外别无选择。

没有简单的方法，并且“重新创建”调用程序 servlet 不是一个实际的选择。

谢谢大家。

# python - MySQLdb 每个连接有多个事务

> ID：12378227
> 
> 赞同：8
> 
> 时间：2012-09-11T21:32:40.863
> 
> 标签：python, mysql, database, database-connection, mysql-python

可以在不关闭它们之间的连接的情况下对多个事务使用单个 MySQLdb 连接吗？换句话说，是这样的：

```
conn = MySQLdb.connect(host="1.2.3.4", port=1234, user="root", passwd="x", db="test")

for i in range(10):
    try:
        cur = conn.cursor()
        query = "DELETE FROM SomeTable WHERE ID = %d" % i
        cur.execute(query)
        cur.close()
        conn.commit()

    except Exception:
        conn.rollback()

conn.close() 
```

它似乎工作正常，但我只是想仔细检查。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-11T22:52:43.803

我认为这里对交易的构成存在误解。

您的示例打开一个连接，然后在其上执行*一项*事务。您在该事务中执行多个 SQL 语句，但在提交后将其完全关闭。当然，这还不错。

执行多个*事务*（而不仅仅是 SQL 语句），如下所示：

```
conn = MySQLdb.connect(host="1.2.3.4", port=1234, user="root", passwd="x", db="test")

for j in range(10):
    try:
        for i in range(10):
            cur = conn.cursor()
            query = "DELETE FROM SomeTable WHERE ID = %d" % i
            cur.execute(query)
            cur.close()
        conn.commit()
    except Exception:
        conn.rollback()

conn.close() 
```

上面的代码提交了 10 个事务，每个事务由 10 个单独的删除语句组成。

是的，只要您不在线程之间共享该连接，您就应该能够毫无问题地重新使用打开的连接。

例如，[SQLAlchemy](http://www.sqlalchemy.org/)通过池化连接来重用连接，根据需要将打开的连接分发给应用程序。在应用程序的整个生命周期中，新事务和新语句都会在这些连接上执行，而无需在应用程序关闭之前关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T23:56:00.477

最好先构建一个查询字符串，然后执行该单个 MySQL 语句。例如：

```
query = "DELETE FROM table_name WHERE id IN ("
for i in range(10):
    query = query + "'" + str(i) + "', "
query = query[:-2] + ')'

cur = conn.cursor()
cur.execute(query) 
```

# file - 需要澄清我应该在哪里放置（存储）我的核心数据的 SQLite 文件？

> ID：12378228
> 
> 赞同：2
> 
> 时间：2012-09-11T21:32:42.837
> 
> 标签：file, sqlite, core-data, filesystems, directory

是的，我知道。这个问题已经在[哪里存储核心数据文件？](https://stackoverflow.com/questions/4525694/where-to-store-the-core-data-file)并在[文档目录之外存储 coredata 文件？](https://stackoverflow.com/questions/5243917/store-coredata-file-outside-of-documents-directory).

@Kendall Helmstetter Gelner 和 @Matthias Bauch 提供了非常好的回复。我为他们投了赞成票。

现在我的问题是相当概念性的，我将尝试解释它。

从Apple 文档[中您应该将应用程序的文件部分放在哪里](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html#//apple_ref/doc/uid/TP40010672-CH2-SW2)，我已经阅读了以下内容：

> **以以下两种方式之一处理支持文件**——应用程序下载或生成并可以根据需要重新创建的文件：
> 
> *   在 iOS 5.0 及更早版本中，将支持文件放在 /Library/Caches 目录中，以防止它们被备份
>     
>     
> *   在 iOS 5.0.1 及更高版本中，将支持文件放在 /Library/Application Support 目录中并 `com.apple.MobileBackup`对其应用扩展属性。此属性可防止将文件备份到 iTunes 或 iCloud。如果您有大量支持文件，您可以将它们存储在自定义子目录中，并将扩展属性仅应用于该目录。

Apple 表示，对于处理支持文件，您可以根据已安装的 iOS 采用两种不同的方式。在我看来（但也许我错了）Core Data 文件是一个支持文件，因此它属于这些类别。

说到这里，Matthias 和 Kendall 的方法是否继续有效？特别是，如果我在*Library文件夹中创建一个目录，比如**Private* ，这个目录在 iOS 5 版本（5.0 和 5.0.1）中是否继续保持隐藏状态，还是我需要遵循 Apple 解决方案？如果后者有效，您能否提供任何示例或链接？

 *先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T20:13:53.360

我会说核心数据文件并不是真正的支持文件——除非你有某种方法可以复制存储的数据，否则你会希望它备份。

支持文件更多的是图像或数据库，它们只是远程网站的缓存。

因此，您可以继续将您的核心数据数据库放在您喜欢的位置（尽管它应该在应用程序支持下）。

截至 2013 年 1 月的最新补充：Apple 已开始将您从捆绑软件复制到可写区域的预加载 CoreData 数据存储区视为支持文件 - 即使您也将用户数据写入相同的数据库。解决方案（来自 DTS）是确保当您将数据库复制到位时，设置 do-not-backup 标志，然后在用户数据写入数据库时​​取消设置。

如果您的 CoreData 存储纯粹是下载的网络数据的缓存，请继续确保它位于缓存之类的地方或设置了“不备份”标志。*

# matlab - 替换 MATLAB 中的波浪号

> ID：12378229
> 
> 赞同：1
> 
> 时间：2012-09-11T21:32:44.200
> 
> 标签：matlab, substitution, tilde

我正在尝试在 MATLAB 中执行一个使用波浪号的脚本。但是，早期版本的 MATLAB 不支持波浪号。我怎样才能代替波浪号？

这是代码：

```
 fname = 'worldmap.png';
                img = imread(fname);
                [imgH,imgW,~] = size(img); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:37:44.060

当您的版本不支持时，只需使用虚拟变量代替波浪号

```
 [imgH, imgW, dummy_variable] = size(img); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T21:37:27.407

旧版本的 matlab 中事实上的转储变量是“ans”，因为它总是被覆盖。

# java - 调用 TimerTask 的 run() 方法

> ID：12378230
> 
> 赞同：0
> 
> 时间：2012-09-11T21:32:45.237
> 
> 标签：java, notify, timertask

对于我正在解决的问题，我必须定期运行一系列调用。为此，我实现了 TimerTask。但是，我有时也想通知 timertask 并且需要在满足某些条件时调用相同的方法，即使计时器没有过期。我的代码看起来与此类似。

```
//File TimerTaskA.java
public class TimerTaskA extends TimerTask
{
    @Override
    public void run()
    {
        processEvent1();
        processEvent2();
        processEvent3();
    }
}

//File ProcessEventManager.java
public class ProcessEventManager
{
    public TimerTaskA timerTask;

    public ProcessEventManager()
    {
        initTimerTask();
    }

    public void initTimerTask()
    {
        Timer timer = new Timer("TimerTaskA", true);
        timerTask == new TimerTaskA();
        timer.schedule(timerTask , 0, 10000);
    }

    public void conditionalTask()
    {
        long time = System.currentTimeMillis();
        // some condition statement. here it happens to be time in millisecs ends with 2 or 3.
        if (time%10 == 2 || time%10 == 3)
            timerTask.run();
    }
} 
```

在方法`ProcessEventManager.conditionalTask()`中直接调用TimerTask的`run(`)方法来度过这种情况是否正确？有没有更好的设计方式来解决这样的问题？

这些`processEvent`方法可能是耗时的方法，我不希望`ProcessEventManager`在执行这些方法时阻塞正在运行的线程。为了`TimerTask`在计时器到期和`ProcessEventManager.conditionalTask`满足条件的情况下运行这些方法，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:38:19.037

基本上，是的，可以按照你写的去做，但是更清晰的方法是从内部调用一些处理方法`TimerTask`，当你想要执行这个操作时，直接调用它，而不是通过`TimerTask`对象。

```
public class TimerTaskA extends TimerTask
{

    public void doCoolThings()
    {
        processEvent1();
        processEvent2();
        processEvent3();
    }

    @Override
    public void run()
    {
        doCoolThings();
    }
} 
```

在另一个班级中，当需要时：

```
timerTask.doCoolThings(); 
```

原因在我看来，主要是因为它的目的`run`是充当线程（或调用者）的入口点，而不是执行特定的任务。

# ios - 解析 json 数组后 nsurl 到 uimageview 不显示

> ID：12378233
> 
> 赞同：0
> 
> 时间：2012-09-11T21:33:03.357
> 
> 标签：ios, uiimageview

那么在我的 .m 文件中，我正在执行以下操作：

我正在通过网络获取数据并通过解析 json 数组将它们存储在 NSMutable 数组中。这些数据是图像 url（图像在我的服务器上），然后我想将它们设置在我的自定义单元格上。每个单元格有 2 个图像视图。

我正在正确解析数据。我确实正确存储它们。我可以看到它们的值打印出来，如果我在浏览器中打开它们，它们是正确的值。

如果在我的单元格中放置来自我的资源的静态图像，我可以看到它们。

但是，如果我尝试从 url 设置它们，我什么也看不到。

这是我的代码：

对于获取数据：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSLog(@"connectionDidFinishLoading");
    NSLog(@"Succeeded! Received %d bytes of data",[self.responseData length]);

    // convert to JSON
    NSError *myError = nil;
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&myError];
    images_url= [NSMutableArray new];

    for (NSDictionary *alert in json ){
        NSString* image = [alert  objectForKey:@"image"];
        [images_url addObject:image];

    }
    [self.myTable reloadData];

} 
```

其中 myTable 是我合成的 TableView。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    int i=[images_url count]/2;
    return i;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier=@"ListTableCell";
    //this is the identifier of the custom cell
    ListsCell *cell = (ListsCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ListsCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }
    /*NSString *url_left=[images_url objectAtIndex:(indexPath.row*2)];
    NSLog(@"Left url is:%@",url_left);
    NSString *url_right=[images_url objectAtIndex:(indexPath.row*2+1)];
    NSLog(@"Right url is:%@",url_right);*/  THEY ARE PRINTED HERE

    NSURL *url_left=[NSURL URLWithString:[images_url objectAtIndex:(indexPath.row*2)]];
    cell.Left.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:url_left]];
    NSURL *url_right=[NSURL URLWithString:[images_url objectAtIndex:(indexPath.row*2+1)]];

    return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 81;
} 
```

如果我删除了重新加载数据，那么我会看到它们的值而不是正确的行数，所以这是必要的。

那么任何人都可以找出这里有什么问题吗？

# logging - 如何为 jar 配置日志记录

> ID：12378234
> 
> 赞同：0
> 
> 时间：2012-09-11T21:33:03.047
> 
> 标签：logging, slf4j, logback

我在 logback.xml 中为我的所有类添加了单独的记录器，我正在使用它来控制我的记录器。现在我从班级使用的罐子里得到一些日志。我如何关闭或控制这些记录器的级别。有什么建议么 ？？？我无法知道 jar 的确切位置，因为在日志消息中它看起来好像来自类本身而不是来自 JAR。请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:23:53.360

Suppose You are getting some DEBUG level messages from the "com.eclipse" jar and you want to turn it off. You can do it like this in your logback.xml file :

```
 <logger name="org.eclipse" level="INFO" /> 
```

# javascript - 在threejs中使用纹理网格和线框网格

> ID：12378238
> 
> 赞同：3
> 
> 时间：2012-09-11T21:33:18.570
> 
> 标签：javascript, opengl-es, webgl, three.js

我正在尝试在threeJS中绘制线框网格和纹理网格，但是当我将两者都添加到我的场景中时，纹理网格不会显示。下面的代码：

我无法创建两个共享相同几何形状的网格，其中一种材料是线框，另一种是纹理。如果其中一种材料是线框，而另一种只是颜色填充，它可以正常工作-但是一旦我将第二种材料设为纹理，它就会停止工作。

如果我注释掉，`scene.add( wireMesh );`那么纹理网格就会出现。

```
var wireMat =  new THREE.MeshBasicMaterial( { color:0x00FFFF, wireframe: true,                 transparent: true, overdraw:true } );
var wireMesh = new THREE.Mesh(geometry, wireMat);
scene.add( wireMesh );

var texture = texture = THREE.ImageUtils.loadTexture( 'textures/world.jpg' );

var imageMat = new THREE.MeshBasicMaterial( {color:0xffffff, map: texture } );

var fillMesh = new THREE.Mesh(geometry, imageMat);
scene.add( fillMesh ); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-06T04:36:37.090

Under SceneUtils there is a `createMultiMaterialObject(geometry, materials)`. It essentially creates multiple meshes that all share the same geometry all in a group.

Example:

```
var mesh = THREE.SceneUtils.createMultiMaterialObject( geometry, [

    new THREE.MeshLambertMaterial( { color: 0xffffff} ),
    new THREE.MeshBasicMaterial( { color: 0x222222, wireframe: true} )

]); 
```

[THREE.SceneUtils source code](https://github.com/mrdoob/three.js/blob/master/src/extras/SceneUtils.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:52:13.510

不幸的是，无法在使用线框的对象和不使用线框的对象之间共享几何图形。您需要克隆该几何体。这提醒我，我们还没有完成`.clone()`。`Geometry`

# if-statement - 好的做法：将值与布尔值进行比较？

> ID：12378239
> 
> 赞同：0
> 
> 时间：2012-09-11T21:33:22.740
> 
> 标签：if-statement, boolean, code-readability

大多数时候，我更喜欢这样写：

```
if(isWelcome() == true){}
if(isWelcome() == false){} 
```

而不是这个

```
if(isWelcome()){}
if(!isWelcome()){} 
```

因为我觉得它更容易阅读（但我确实理解它没有意义）。

我想知道是否有关于这种做法的共同协议。大多数开发人员做什么？而且我想知道编译器是否正在进行额外的比较，或者它是否理解它是无用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:49:17.413

可读性很重要，添加单词并不总能提高可读性。虽然这

```
if(isWelcome() == false){} 
```

可能比这更具可读性

```
if(!isWelcome()){} 
```

对于不熟悉什么的人！做这个

```
if(isWelcome()){} 
```

实际上比这更具可读性

```
if(isWelcome() == true){} 
```

因为现在您已经引入了没有信息价值的“干扰词”，并增加了您的眼睛需要扫描以了解正在发生的事情的区域。您应该争取完全传达程序员意图的最少代码。

要真正回答您的问题，我会说大多数程序员会使用较短的版本。没有经验的程序员倾向于使用“冗长”的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:36:13.117

如果你使用像 Resharper 这样的工具，你会得到一个提示，使用 isWelcome() == true 是多余的。编译器可以选择优化比较，所以我不会太担心。

# java - JFrame - 在透明背景上绘制图形？

> ID：12378241
> 
> 赞同：1
> 
> 时间：2012-09-11T21:33:35.270
> 
> 标签：java, swing, jframe, transparency

我正在尝试制作一个未装饰的透明 JFrame，然后在其上绘制一些图形。如果我扩展 JFrame，将 undecorated 设置为 true，并使用覆盖绘制，我可以制作一个透明的 JFrame。像这样：

```
public class MainFrame extends JFrame {
public static void main(String[] args) throws Exception {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                MainFrame frame = new MainFrame();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

public MainFrame() {
    setTitle("ASDF");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    setUndecorated(true);
    setBounds(0, 0, 200, 200);      
}

public void paint(Graphics g){
    g.setFont(new Font(Font.MONOSPACED, Font.PLAIN, 20));
    g.drawString("ASDF", 100, 100);
}
} 
```

问题是，当我尝试在其上绘制某些东西时，我无法清除为另一次重绘绘制的内容。就像在这个例子中一样，文本保留了绘制时的背景。所以如果我在框架后面移动一个窗口，它看起来很奇怪，因为框架本身有旧的背景。我尝试了 AlphaComposite.Clear，但这只会产生黑色背景。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:51:57.623

> 如果我扩展 JFrame，将 undecorated 设置为 true，并使用覆盖绘制，我可以制作一个透明的 JFrame。

我不这么认为。你只是在不关心背景的情况下绘画，这很快就会消失。如果您想知道如何在 java 中制作透明窗口，请使用 Stackoverflow：搜索`[java] transparent window`. 这应该可以帮助您创建这样一个窗口，但这是一项相当复杂的任务：[透明窗口](https://stackoverflow.com/questions/7941635/transparent-window)

# websocket - sockjs-tornado 方法中的异步调用

> ID：12378242
> 
> 赞同：4
> 
> 时间：2012-09-11T21:33:47.540
> 
> 标签：websocket, socket.io, tornado, sockjs

我正在[sockjs-tornado](https://github.com/mrjoes/sockjs-tornado)上构建服务器，想知道如何利用 tornado 的异步 HTTP 客户端或其他用于 tornado 的异步工具，例如 asyncmongo、tornado-redis 等。显然不可能使用`tornado.web.asynchronous`&`tornado.gen.engine`装饰器关于随机方法。因此，如果我需要从 SockJSConnection's 中进行异步 Mongo/HTTP/Redis 调用`on_message()`，我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T17:53:19.357

您所要做的就是创建一个由 tornado.gen 装饰器装饰的方法（或函数）

创建小要点来说明如何做到这一点：[https ://gist.github.com/3708549](https://gist.github.com/3708549)

如果您将运行示例并检查服务器控制台，您将看到以下输出：

1 - 提出请求

2 - 从 on_message 返回

... 稍微延迟 ...

3 - 向客户端发送数据

因此，它不会阻塞 ioloop 并在后台进行 HTTP 调用。

# javascript - 选择时更改值

> ID：12378243
> 
> 赞同：-1
> 
> 时间：2012-09-11T21:33:50.337
> 
> 标签：javascript, html, function, select

我的目标是在选择全职和兼职两个选项之一时显示另一个div

如果可能，为每个计算不同的值当用户选择 Part time 时，PrcA 的值将更改为 PrcB

这是我使用的代码

```
<!====================================================================================>

<script language="javascript">
<!--//

function dm(amount) 
{
  string = "" + amount;
  dec = string.length - string.indexOf('.');
  if (string.indexOf('.') == -1)
  return string + '.00';
  if (dec == 1)
  return string + '00';
  if (dec == 2)
  return string + '0';
  if (dec > 3)
  return string.substring(0,string.length-dec+3);
  return string;
}

function calculate()
{

  QtyA = 0;  
  TotA = 0;  

  PrcA = 1280; 
  PrcB = 640; 

  if (document.form1.qtyA.value > "")
     { QtyA = document.form1.qtyA.value };
  document.form1.qtyA.value = eval(QtyA);  

  TotA = QtyA * PrcA;
  document.form1.totalA.value = dm(eval(TotA));

  Totamt = 

     eval(TotA) ;

  document.form1.GrandTotal.value = dm(eval(Totamt));

} 

//-->
</script>

<!====================================================================================>
<p>
<label for="acct" style="margin-right:90px;"><strong>Account Type<strong><font color=red size=3> * </font></strong></label>
<select name="acct" style="background-color:white;" class="validate[custom[serv]] select-input" id="acct" value="">

                <option value="Full Time">Full-Time</option>
                <option value="Part Time">Part-Time</option>
                <option selected="selected" value=""></option>

</select></p>

<!====================================================================================>
<script>
$(document).ready(function() {
    $("input[name$='acct']").select(function() {
        var test = $(this).val();

        $("div.desc").hide();
        $("#acct" + test).show();
    });
});
</script>

<!====================================================================================>
<p>
<table><tr><td>
<lable style="margin-right:91px;"># of Agent(s)<font color=red size=3> * </font></lable>
</td><td>
<input style="width:25px; margin-left:5px;" type="text" class="validate[custom[agnt]] text-input" name="qtyA" id="qtyA" onchange="calculate()" />
</td><td>
<div id="acctFull Time" class="desc">
 x 1280 = 
</div>
<div id="acctPart Time" class="desc" style="display:none">
 x 640 = 
</div>
</td><td>
$<input style="width:80px; margin-left:5px;" type="text" readonly="readonly"  name="totalA" id="totalA" onchange="calculate()" />
</p>
</td></tr></table> 
```

我有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:03:26.077

检查这个[[FIDDLE]](http://jsfiddle.net/sushanth009/KMssp/2/) ..

向显示金额的 div 添加了两个类。这应该使访问它们更容易。

```
 $(document).ready(function() {
    $("#acct").on('change', function() {
        var selVal = $(this).val();
        if (selVal == '1') { // Full Time
            $('.parttime').hide();
            $('.fulltime').show();
            $('.agent').show();
            $('.error').hide();
        }
        else if (selVal == '2') { // Part Time
            $('.parttime').show();
            $('.fulltime').hide();
            $('.agent').show();
            $('.error').hide();
        }
        else {
            $('.parttime').hide();
            $('.fulltime').hide();
            $('.agent').hide();
            $('.error').show();
        }
    });

    $('#qtyA').on('change', function() {
        var selVal = $("#acct").val();
        if (!isNaN($(this).val())) {
            var total = 0;
            if (selVal == '1') {
                total = parseInt($(this).val()) * 1280;
            }
            else if (selVal == '2') {
                total = parseInt($(this).val()) * 640;
            }
            $('#totalA').val(total.toFixed(2));
        }
        else {
            $(this).val('0');
             $('#totalA').val('0.00');
        }
    });
});​ 
```

此外，您可以完全消除香草 javascript 并使用 jQuery，这应该更容易..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:53:30.237

得到了答案这是我用的

```
<script type="text/javascript">
$(document).ready(function(){
  $('#acct').change(function() {
    $('.box').hide();
    $('#acct' + $(this).val()).show();
 });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T22:04:09.917

jsfiddle 在这里会有很大帮助。但是，听起来您正在尝试：

1.  根据下拉选择显示/隐藏内容容器，以及
2.  根据下拉选择处理字段值。

这两个问题通常可以这样解决（假设 jQuery，根据您的代码段）：

```
<select id="time-select">
  <option value="full">Full-Time</option>
  <option value="part">Part-Time</option>
</select>
<div id="full-detail" class="detail">
  Full-time info.
</div>
<div id="part-detail" class="detail">
  Part-time info.
</div>
<input type="text" id="computed-value"/>

<script>
$(function() {
  "use strict";

  function computeValueBasedOn( opt ) {
    // Evaluate the computed value here...
    return opt ? "do" : "stuff";
  }

  $("#time-select").change(function(evt) {
    $(".detail").hide();
    $("#"+ this.value +"-detail").show();
    $("#computed-value").val( computeValueBasedOn( this.value ) );
  });
});
</script> 
```

# android - 如何在 Android NDK 的 Android.mk 文件中正确包含预构建的静态库？

> ID：12378245
> 
> 赞同：7
> 
> 时间：2012-09-11T21:34:25.907
> 
> 标签：android, c++, android-ndk

我无法将我的库包含在 Android NDK 构建中。

在创建虚拟 cpp 文件并使用 shell 中的直接 g++ 命令构建所有内容时，这些库已正确编译并且工作正常。

当前的 Android.mk 文件不起作用，并引发无法找到相应头文件（属于 .a 文件的一部分）的错误。

**如何正确包含预构建的静态库？**

我的 Android.mk 文件如下所示：

```
LOCAL_PATH := $(call my-dir)

# V8 Base

include $(CLEAR_VARS)

LOCAL_MODULE          := v8_base
LOCAL_MODULE_FILENAME := v8_base_static
LOCAL_SRC_FILES := ../lib/libv8_base.a

include $(PREBUILT_STATIC_LIBRARY)

# V8 Nosnapshot

include $(CLEAR_VARS)

LOCAL_MODULE          := v8_nosnapshot
LOCAL_MODULE_FILENAME := v8_nosnapshot_static
LOCAL_SRC_FILES := ../lib/libv8_nosnapshot.a

include $(PREBUILT_STATIC_LIBRARY)

# V8GL Runtime

include $(CLEAR_VARS)

LOCAL_MODULE    := v8gl-runtime
LOCAL_SRC_FILES := main.c ../src/v8gl/v8gl.cpp
LOCAL_CPPFLAGS  := -D__ANDROID__
LOCAL_LDLIBS    := -llog -landroid -lEGL -lGLESv1_CM
LOCAL_STATIC_LIBRARIES := android_native_app_glue v8_base v8_nosnapshot

# LOCAL_EXPORT_CPPFLAGS := -D__ANDROID__

include $(BUILD_SHARED_LIBRARY)

$(call import-module,android/native_app_glue) 
```

编译器输出如下，这是有道理的，但只显示没有包含单个 .a 文件，我不知道为什么：

```
Compile++ thumb  : v8gl-runtime <= v8gl.cpp
(... g++ call)
In file included from jni/../src/v8gl/v8gl.cpp:6:
jni/../src/v8gl/v8gl.h:5:16: error: v8.h: No such file or directory 
```

**绝对路径的解决方案**

感谢@alex-cohn 的提示，我发现包含被错误地指出。所以我决定使用在调用 ndk-build 之前设置的包含绝对路径的环境变量。这解决了包含的问题。

所以最后一个模块，实际包含完成的地方，现在看起来像：

```
ADK_PATH=/var/whatever/to/your/project/root_not_jni

include $(CLEAR_VARS)
LOCAL_MODULE    := v8gl-runtime
LOCAL_SRC_FILES := main.c ../src/v8gl/v8gl.cpp

LOCAL_C_INCLUDES:= $(ADK_PATH)/external/v8/include

LOCAL_CPPFLAGS  := -D__ANDROID__
LOCAL_LDLIBS    := -llog -landroid -lEGL -lGLESv1_CM
LOCAL_STATIC_LIBRARIES := android_native_app_glue v8_base v8_nosnapshot 
```

现在它还显示包含库，因为它们是在之后编译的 - 无论出于何种原因。

**具有相对路径的解决方案**

所有包含路径都相对于**项目根文件夹**，而不是**jni**文件夹。这意味着它将作为编译器着陆 -I 标记为如下所示：

```
LOCAL_C_INCLUDES := $(LOCAL_PATH)/../file_in_project.root

# resulting g++ flag:
-Ijni/../file_in_project.root 
```

**所以相对包含路径和相对于 jni 文件夹的 LOCAL_SRC_FILES 之间存在差异！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T06:28:00.497

您可能`v8.h`在目录`../include`或其他地方有文件...

你应该添加行

```
LOCAL_C_INCLUDES = $(LOCAL_PATH)/../include 
```

请注意，与`LOCAL_SRC_FILES`您不需要的地方不同`$(LOCAL_PATH)`，这里您必须将所有目录的完整路径放在必要`.h`文件所在的位置。

# ios - 有没有办法在没有按钮的情况下在 iOS 中创建类似 UIButton 的框架？

> ID：12378248
> 
> 赞同：0
> 
> 时间：2012-09-11T21:34:37.540
> 
> 标签：ios, cocoa-touch, cocoa, ios5, uikit

我现在正在开发一个 iPad 应用程序，该应用程序将 XML 文件作为输入并输出基于 XML 文件内容动态生成的类似 Cocoa 的用户界面。我得到的部分规范规定，其中一个 UI 元素是一个简单的框架，看起来与 Cocoa Touch 按钮完全一样，但不充当按钮。IE，单击时它什么也不做，并且在视觉上没有任何变化。我想使用 iOS 等效的 NSBox 模拟成看起来像 NSButton，但经过检查，似乎没有 UIBox 类等效于 NSBox，就像 UIButton 类似于/等效于 NSButton。谁能比我建议的在没有新按钮额外重量的情况下创建按钮“框架”的设计模式更有经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:38:01.330

很简单，只需禁用按钮上的用户交互。这样它看起来仍然像一个按钮，但它不会像一个按钮。

```
[myButton setUserInterActionEnabled:NO]; 
```

或者，您可以创建一个`UIImageView`并使用 Quartz 来调整图像的角半径。

```
#import QuartzCore/QuartzCore.h

[[myImageView layer] setCornerRadius:15.0]; 
```

# java - 读取模块失败

> ID：12378251
> 
> 赞同：0
> 
> 时间：2012-09-11T21:35:00.207
> 
> 标签：java, gwt, maven

我正在开发一个使用来自另一个项目的 JAR 的 GWT 2.4/Maven/Spring 项目。我已将 GWT 模块文件 (.gwt.xml) 添加到引用的 JAR 中，以使其类可由 GWT 翻译。一段时间后一切正常，然后突然（即在许多代码更改之一之后）我现在在 Eclipse 中收到此错误：

```
Failed to read module XML file 
   sun.net.www.protocol.jar.JarURLConnection$JarURLInputStream@68e72c 
       (org.codehaus.mojo:gwt-maven-plugin:2.4.0:compile:default:prepare-package)
           pom.xml     /PivotReportsWeb       line 118 Maven Build Problem 
```

PivotReportsWeb 是我的 GWT 应用程序的名称。该错误是指在我的 pom.xml 中的*gwt-maven-plugin声明中**执行。*然而，Maven 愉快地从命令行构建项目，没有任何错误或警告。

 *强制 Maven 更新项目依赖项并没有奏效，我尝试过的许多其他技巧也没有奏效。

有什么想法，有人吗？

* * *

**更新**

事实证明，这是一个 Windows 权限问题！我注意到我无法再删除引用项目的目标文件夹或修改我的用户权限（即使我是本地管理员）。所以我重新启动并 - 瞧！一切都恢复正常。

让我想起了我曾经在朋友的 T 恤上看到的一个令人讨厌的标语：REBOOT IS SEXY*

# mongodb - 未知的数据库内容

> ID：12378252
> 
> 赞同：0
> 
> 时间：2012-09-11T21:35:03.440
> 
> 标签：mongodb

我被提供给 MongoDB 的数据文件，而没有被告知内容中的大部分内容。有没有办法探测数据库的内容以识别数据库中的共性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:01:16.867

有一些不同的[`mongo`shell](http://www.mongodb.org/display/DOCS/mongo+-+The+Interactive+Shell)助手可以让您了解集合的一般结构（例如，字段/数据类型及其在集合中的使用频率）：

*   [schema.js](http://skratchdot.com/projects/mongodb-schema/)

*   [种类](https://github.com/variety/variety)

为了更好地了解实际内容，您可以尝试其中一个[Admin UI](http://www.mongodb.org/display/DOCS/Admin+UIs)。

# android - 如何将 WCP 1252 字符串读入 std::tstring？

> ID：12378254
> 
> 赞同：1
> 
> 时间：2012-09-11T21:35:09.427
> 
> 标签：android, c++

我在 WCP 1252 编码的头文件中有一个字符串：

```
#define MY_STR "This string has some fancy characters like ©" 
```

如何将其读入`std::tstring`使用喜欢 UTF-8（特别是在 Android 上运行）的编译器和运行时环境？

`_T(MY_STR)`不起作用。循环遍历字符并一次添加一个是可行的，但是有更清洁的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-06T01:06:33.833

我最终使用预处理器#ifdef 来根据平台初始化字符串，并且每个字符串文字都根据该平台的首选编码进行编码。

# php - 大量数据和 PHP 错误

> ID：12378260
> 
> 赞同：2
> 
> 时间：2012-09-11T21:35:36.273
> 
> 标签：php, javascript, mysql, highcharts, highstock

我目前正在使用以下 HighCharts:HighStock:Charts: [http://www.highcharts.com/stock/demo/data-grouping](http://www.highcharts.com/stock/demo/data-grouping)以显示从服务器返回的数据。

我们从 MySQL 数据库中检索数据，而且非常大。我们每 1 秒存储一次传感器指标。一段时间后，我们收到以下错误：

```
[Wed Sep 12 00:15:56 2012] [error] [client 127.0.0.1] PHP Fatal error:  Allowed memory size of 134217728 bytes exhausted (tried to allocate 4756882 bytes) in C:\\wamp\\www\\admin\\getTrends.php on line 156, referer: http://localhost/admin/trends.php
[Wed Sep 12 00:15:56 2012] [error] [client 127.0.0.1] PHP Stack trace:, referer: http://localhost/admin/trends.php
[Wed Sep 12 00:15:56 2012] [error] [client 127.0.0.1] PHP   1\. {main}() C:\\wamp\\www\\admin\\getTrends.php:0, referer: http://localhost/admin/trends.php
[Wed Sep 12 00:15:56 2012] [error] [client 127.0.0.1] PHP   2\. getTrendsDataAI() C:\\wamp\\www\\admin\\getTrends.php:33, referer: http://localhost/admin/trends.php
[Wed Sep 12 00:15:56 2012] [error] [client 127.0.0.1] PHP   3\. printResults() C:\\wamp\\www\\admin\\getTrends.php:102, referer: http://localhost/admin/trends.php
[Wed Sep 12 00:15:56 2012] [error] [client 127.0.0.1] PHP   4\. createData() C:\\wamp\\www\\admin\\getTrends.php:230, referer: http://localhost/admin/trends.php
[Wed Sep 12 00:15:56 2012] [error] [client 127.0.0.1] PHP   5\. implode() C:\\wamp\\www\\admin\\getTrends.php:156, referer: http://localhost/admin/trends.php 
```

将此数据作为 JSON 对象返回到 HighStocks 以供查看的最佳解决方案是什么？我们如何克服 PHP 的限制？我们每次都返回一大块数据吗？他们通常如何向用户展示大量数据并根据这些数据创建图表和报告？我们需要克服的另一个大问题是返回的 JSON 对象非常庞大。此时大约为 20-30 mbs，将来会更大。可以将此数据返回给用户并在客户端执行所有操作吗？

欢迎任何建议或想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:43:10.543

当显示大量数据时，我认为你能做的最好的事情（也是最常见的）就是生成具有一定分辨率的视图。

当用户缩小（放大）给定点时，您将增加该点的分辨率，从而减小块的整体大小

通过这种方式，您可以通过 php 生成更小的文件大小，这将理想地表示相同的图表。类似于谷歌地图过去的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:40:31.593

JSON 并不能真正修改为分块。每个 json 字符串本身必须是完整的，因为它直接代表一个完整的数据结构：字符串、数组、对象等......

您可以做的是将数据以独立的块发送，并在 JS 中重建数据结构。例如，请求 #1 发送超过 10,000 行的数据，请求 #2 获得 10,001-20,000，＃3 获得 20,001-30,000 等等...

但是你最终还是会在浏览器中占用大量内存。对于大型结构，PHP 和 JS 的内存效率都不是特别高。

# django - Django中的Unicode问题

> ID：12378261
> 
> 赞同：0
> 
> 时间：2012-09-11T21:35:38.297
> 
> 标签：django, unicode, unicode-string

`deal_instance_name`我似乎在 Deal 模型中遇到了 unicode 问题。

它说：

> `coercing to Unicode: need string or buffer, __proxy__ found`

异常发生在这一行：

```
return smart_unicode(self.deal_type.deal_name) + _(u' - Set No.')  + str(self.set) 
```

如果我删除该行，`smart_unicode(self.deal_type.deal_name)`但为什么？

那时在 Django 1.1 中，有人在[Stackoverflow](https://stackoverflow.com/questions/2133508/django-gettext-and-coercing-to-unicode)上遇到了同样的问题，我尝试`unicode()`了新的和新的`smart_unicode()`，没有任何快乐。

请问我会错过什么？

```
class Deal(models.Model):
    def __init__(self, *args, **kwargs):
        super(Deal, self).__init__(*args, **kwargs)      
        self.deal_instance_name = self.__unicode__()      

    deal_type           = models.ForeignKey(DealType)
    deal_instance_name  = models.CharField(_(u'Deal Name'), max_length=100)    
    set                 = models.IntegerField(_(u'Set Number'))

    def __unicode__(self):
        return smart_unicode(self.deal_type.deal_name) + _(u' - Set No.')  + smart_unicode(self.set)

    class Meta:
        verbose_name = _(u'Deal')
        verbose_name_plural = _(u'Deals') 
```

交易类型：

```
class DealType(models.Model):    
    deal_name           = models.CharField(_(u'Deal Name'), max_length=40)
    deal_description    = models.TextField(_(u'Deal Description'),     blank=True)

    def __unicode__(self):
        return smart_unicode(self.deal_name) 

    class Meta:
        verbose_name = _(u'Deal Type')
        verbose_name_plural = _(u'Deal Types') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:51:51.457

实际上，该`smart_unicode`部分与您的问题无关：

```
from django.utils.translation import ugettext_lazy
stuff = u'abc' + ugettext_lazy(u'efg') 
```

会提出完全相同的问题。

这基本上是因为`ugettext_lazy(u'efg')`不会返回`unicode`字符串，而是 a `__proxy__`，当你这样做时会引发错误`u'abc' + ugettext_lazy(u'eg')`。

你会得到完全相同的问题：`u'a' + 1`。

您可以使用以下方法解决此问题：

```
from django.utils.translation import ugettext_lazy
stuff = u'abc {0}'.format(ugettext_lazy(u'efg')) 
```

或者，您可以`ugettext_lazy(u'efg')`使用.`unicode``unicode(ugettext_lazy(u'efg'))`

# maven - mvn 部署到 AWS（通过 distributionManagement 进行 ssh）

> ID：12378264
> 
> 赞同：3
> 
> 时间：2012-09-11T21:35:48.240
> 
> 标签：maven, amazon-web-services, maven-3, maven-deploy-plugin

我正在使用 Maven 将 WAR 文件部署到 AWS。我打算使用'mvn deploy'来将war文件ssh到AWS。我正在关注[http://maven.apache.org/plugins/maven-deploy-plugin/examples/deploy-ssh-external.html](http://maven.apache.org/plugins/maven-deploy-plugin/examples/deploy-ssh-external.html)。

这是我的 POM 文件

```
<project>
  ...
  <distributionManagement>
    <repository>
      <id>ssh-aws</id>
      <url>scpexe://<ec2 instance>.compute-1.amazonaws.com</url>
    </repository>
  </distributionManagement>

  <build>
    <extensions>
      <!-- Enabling the use of FTP -->
      <extension>
        <groupId>org.apache.maven.wagon</groupId>
         <artifactId>wagon-ssh-external</artifactId>
         <version>1.0-beta-6</version>
      </extension>
    </extensions>
  </build>
  ..
</project> 
```

这是我的 settings.xml

```
<server>
    <id>ssh-aws</id>
    <username>aws-user</username>
</server> 
```

唯一的问题是我无法找出pom.xml**的 distributionManagement**节点中的 url。

我可以通过以下方式在 AWS 服务器中进行 ssh。

```
ssh -i ~/pemfile/pemfile-key.pem aws-user@<ec2 instance>.compute-1.amazonaws.com 
```

但是当我运行 mvn clean deploy 时，我收到了这个..

```
Exit code: 1 - Permission denied (publickey). -> [Help 1] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-12T20:14:50.560

您需要在 maven 配置文件**settings.xml中****添加私钥的路径**，即 pem 文件以及*服务器 id*和*用户名*，如下所示：

 **```
<settings>
...
  <servers>
    <server>
      <id>ssh-aws</id>
      <username>aws-user</username>
      <privateKey>/path/to/your/private/key</privateKey>
    </server>
  </servers>
...
</settings> 
```**

# xml - 在 TXMLDocument 中多次添加相同的 IXMLNode

> ID：12378266
> 
> 赞同：3
> 
> 时间：2012-09-11T21:35:51.423
> 
> 标签：xml, delphi, txmldocument

我注意到可以将同一个节点多次添加到同一个 TXMLDocument 中——这是个好主意吗？

```
 n := XMLDocument1.CreateElement('Test', '');
  XMLDocument1.DocumentElement.ChildNodes.Add(n);
  XMLDocument1.DocumentElement.ChildNodes.Add(n);
  n.Text := 'fool me once...'; 
```

节点测试会在树中出现多次

编辑：为了让我的问题更清楚 - 如果我在 TXMLDocument 中多次添加 IXMLNode 会导致任何问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:45:18.323

通过将节点添加到文档中，您不会丢失对刚刚添加的节点的引用，因此多次执行此操作并没有错。如果这是一个好主意，那么它只是一个设计问题——如果您需要一次将多个相同的节点添加到文档中，那么这是最好的方法。

# java - 带有 miglayout 和嵌套面板的 Swing 布局

> ID：12378268
> 
> 赞同：2
> 
> 时间：2012-09-11T21:35:52.223
> 
> 标签：java, swing, miglayout, flowlayout

我有一个使用 SwingLayout 的 Swing 程序。Swing 组件的结构如下所示。

```
JFrame
    JPanel (Cardlayout)
        JPanel (Miglayout) - Main panel
            Jpanel (Flowlayout) - Checkbox Panel
            JPanel (Flowlayout) - Option Panel 
```

我现在的问题是我不确定如何防止复选框面板增长。我不希望它“推出”它在右侧的列。我希望 Wraplayout（在选项面板上工作正常）在复选框面板变得太大时包装它的内容。

这是 Eclipse 内的 Windowsbuilder GUI 的视图。带有“站点”标签的面板是复选框面板。复选框面板的右侧是选项面板。包含它们的大面板是主面板。 [http://i.imgur.com/S7Njo.png](http://i.imgur.com/S7Njo.png)

当我添加太多复选框时会发生这种情况 [http://i.imgur.com/f2SZz.png](http://i.imgur.com/f2SZz.png)

我的主要问题是我不明白为什么在主面板中的第一列的列约束上设置“增长 0”并不能阻止它在内部组件变得太大时增长，因为我向站点面板添加了新的复选框（站点面板可以有任意数量的复选框）。

这是我的主面板miglayout。

```
mainPanel.setLayout(new MigLayout("", "[][grow]", "[][][][][][][][grow]")); 
```

这是我添加复选框面板时的组件约束

```
siteCheckBoxPanel = new JPanel();
mainPanel.add(siteCheckBoxPanel, "cell 0 0,alignx left,gapx 0px,aligny center");
siteCheckBoxPanel.setLayout(new FlowLayout(FlowLayout.CENTER, 5, 5)); 
```

我也尝试过没有流布局，但这并不能解决任何问题。您能提供的任何见解都会很棒！如果人们有问题，我也很乐意提供更多信息。仅供参考，我还尝试在复选框面板所在的单元格的列和行约束上“增长 0”。

这是一个SSCCE。您可以获取以下来源。您需要的唯一依赖项是 miglayout。您可以单击按钮添加复选框。

[https://dl.dropbox.com/u/20614368/Test.java](https://dl.dropbox.com/u/20614368/Test.java)

```
import java.awt.CardLayout;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;

import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.border.EmptyBorder;

import net.miginfocom.swing.MigLayout;

public class Test extends JFrame {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            private Test frame;

            public void run() {
                try {
                    frame = new Test();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    private JPanel contentPane;
    private JPanel mainPanel;
    private JPanel optionPanel;
    private JButton btnUploadImages;
    private JLabel thumbnailLabel;
    private JTextArea textArea;
    private JPanel checkboxPanel;
    private final Action action = new SwingAction();

    /**
     * Create the frame.
     */
    public Test() {
        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 1098, 846);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(new CardLayout(0, 0));

        mainPanel = new JPanel();
        mainPanel.setName("");
        contentPane.add(mainPanel, "name_329556913535654");
        mainPanel.setLayout(new MigLayout("", "[][grow]", "[][][][][][][][grow]"));

        JLabel lblPicture = new JLabel("Picture");
        mainPanel.add(lblPicture, "cell 0 1");

        optionPanel = new JPanel();
        optionPanel.setBackground(Color.red);
        mainPanel.add(optionPanel, "cell 1 0 1 5,grow");

        btnUploadImages = new JButton("Upload Images");
        btnUploadImages.setAction(action);

        thumbnailLabel = new JLabel("");
        mainPanel.add(thumbnailLabel, "cell 0 4");

        textArea = new JTextArea();
        mainPanel.add(btnUploadImages, "cell 0 6");

        checkboxPanel = new JPanel();
        checkboxPanel.setBackground(Color.green);
        mainPanel.add(checkboxPanel, "flowx,cell 0 0");

        JLabel lblSites = new JLabel("Sites");
        checkboxPanel.add(lblSites);

    }
    private class SwingAction extends AbstractAction {
        public SwingAction() {
            putValue(NAME, "Add checkbox");
            putValue(SHORT_DESCRIPTION, "Some short description");
        }
        public void actionPerformed(ActionEvent e) {
            JCheckBox box = new JCheckBox();
            box.setName("Foobar!");
            checkboxPanel.add(box);
            contentPane.validate();
            contentPane.repaint();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:37:34.177

从理论上讲，您的设置应该按照您的预期工作 - 只要您告诉布局

*   通过将最大值设置为百分比，第一列不会超过最大值，fi
*   不通过在列约束中将 min 设置为 pref 来缩小 optionPanel 列的 pref, fi

列约束示例：

```
// first column - restrict max  
"[grow, fill, n:pref:30%]" +
// second column - restrict min 
"[grow, pref:pref:n]" 
```

实际上，我无法通过任何限制使 FlowLayout 和 MigLayout 很好地协同工作：即使是初始布局也被破坏（fi optionPanel 推离了框架宽度）。[用Rob 的 WrapLayout](http://tips4java.wordpress.com/2008/11/06/wrap-layout/)替换 FlowLayout看起来更好，虽然不是完全最佳，因为盒子没有完全对齐。

```
/*
 * Created on 12.09.2012
 *
 */
package layout;

import java.awt.CardLayout;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;

import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.border.EmptyBorder;

import net.miginfocom.swing.MigLayout;

public class MigLayoutNested extends JFrame {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            private MigLayoutNested frame;

            public void run() {
                try {
                    frame = new MigLayoutNested();
                    frame.pack();
//                    frame.setSize(frame.getWidth(), frame.getHeight()* 2);
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    private JPanel contentPane;
    private JPanel mainPanel;
    private JPanel optionPanel;
    private JButton btnUploadImages;
    private JLabel thumbnailLabel;
    private JTextArea textArea;
    private JPanel checkboxPanel;
    private final Action action = new SwingAction();

    /**
     * Create the frame.
     */
    public MigLayoutNested() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        contentPane = (JPanel) getContentPane(); //new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new CardLayout(0, 0));

        mainPanel = new JPanel();
        contentPane.add(mainPanel, "name_329556913535654");

        mainPanel.setLayout(new MigLayout("debug", 
                "[grow, fill][grow, pref:pref:n]" 
               , "[grow, fill][][][][][][][grow]"
                ));

        // stand-in to simulate a row-spanning all-growing component
        optionPanel = new JPanel();
        ((FlowLayout) optionPanel.getLayout()).setAlignment(JLabel.RIGHT);
        JLabel option = new JLabel("just some label so we see the trailing corner, long enough");
        optionPanel.add(option);
        optionPanel.setBackground(Color.YELLOW);
        mainPanel.add(optionPanel, "cell 1 0 1 5, grow");

        // the panel to dynamically add components to  
        // expected behaviour is to wrap on revalidate if needed
        // not working with FlowLayout, but looks half-way fine
        // with Rob's WrapLayout
        checkboxPanel = new JPanel(new WrapLayout()); 
        checkboxPanel.setBackground(Color.green);
        JLabel lblSites = new JLabel("Sites");
        checkboxPanel.add(lblSites);
        mainPanel.add(checkboxPanel, "cell 0 0");

        JLabel lblPicture = new JLabel("Picture");
        mainPanel.add(lblPicture, "cell 0 1");

        thumbnailLabel = new JLabel("thumb");
        mainPanel.add(thumbnailLabel, "cell 0 3");
        textArea = new JTextArea(10, 10);
        mainPanel.add(textArea, "cell 0 4");

        btnUploadImages = new JButton("Upload Images");
        btnUploadImages.setAction(action);
        mainPanel.add(btnUploadImages, "cell 0 6");

    }
    private class SwingAction extends AbstractAction {
        public SwingAction() {
            putValue(NAME, "Add checkbox");
            putValue(SHORT_DESCRIPTION, "Some short description");
        }
        @Override
        public void actionPerformed(ActionEvent e) {
            JCheckBox box = new JCheckBox();
            box.setName("Foobar!");
            checkboxPanel.add(box);
            checkboxPanel.revalidate();
        }
    }
} 
```

# c++ - 对象在内存中是什么样子的？

> ID：12378271
> 
> 赞同：48
> 
> 时间：2012-09-11T21:36:22.637
> 
> 标签：c++

> **可能重复：**
> [内存中 C++ 对象的结构与结构](https://stackoverflow.com/questions/422830/structure-of-a-c-object-in-memory-vs-a-struct)
> [内存布局 c++ 对象](https://stackoverflow.com/questions/1632600/memory-layout-c-objects)

这可能是一个非常愚蠢的问题，但无论如何我都会问。我很好奇对象在内存中的样子。显然，它必须包含所有成员数据。我假设对象的函数不会在内存中重复（或者我错了？）。内存中的 999 个对象都一遍又一遍地定义相同的函数，这似乎很浪费。如果所有999个对象的内存中只有1个函数，那么每个函数如何知道要修改谁的成员数据（我特别想在底层知道）。是否有一个对象指针被发送到幕后的函数？也许每个编译器都不同？

另外，静态关键字如何影响这一点？对于静态成员数据，我认为所有 999 个对象都将使用完全相同的内存位置存储它们的静态成员数据。这个存储在哪里？我猜静态函数也只是内存中的一个位置，并且不必与实例化对象交互，我想我理解。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-11T21:43:47.230

静态类成员的处理方式几乎与全局变量/函数完全相同。因为它们不依赖于实例，所以没有什么关于内存布局的讨论。

可以想象，每个实例的类成员*变量*都是重复的，因为每个实例都可以为每个成员变量具有自己的唯一值。

类成员*函数*在内存中的代码段中只存在一次。在低级别，它们就像普通的全局函数一样，但它们接收一个指向`this`. 使用 x86 上的 Visual Studio，它是通过`ecx`使用[`thiscall`](http://en.wikipedia.org/wiki/X86_calling_conventions#thiscall)调用约定的注册。

当谈到虚函数、多态性时，内存布局变得更加复杂，引入了一个“ [vtable](http://en.wikipedia.org/wiki/Virtual_method_table) ”，它基本上是一堆定义类实例拓扑结构的函数指针。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-11T21:57:00.260

正如您所怀疑的，数据成员（字段）是按顺序排列的。这也包括基类的字段。

如果类（或其基类之一）包含任何虚拟方法，则布局通常以 vptr 开头，即指向虚拟表（或 vtable）的指针，该表是指向与该类相关的函数实现的指针表。请注意，这不是标准定义的，但 AFAIK 所有当前的编译器都使用这种方法。此外，对于多重继承，它变得更加复杂，所以我们暂时忽略它。

```
+-----------+
|  vptr     |  pointer to vtable which is located elsewhere
+-----------+
|  fieldA   |  first member
|  fieldB   |  ...
|  fieldC   |
|  ...      |
+-----------+ 
```

字段可以占用比它们各自大小的总和更多的空间，这取决于打包（例如，1 字节打包确保没有间隙，但在性能方面比 4 或 8 字节打包效率低）。

成员函数（非静态）接收指向对象的指针，但如何完成是特定于实现和平台的，例如在 x86 架构上，指针通常通过`ecx`寄存器传递。这也没有被标准定义。

静态函数类似于全局函数，它们对位于数据段中的静态类字段（类的所有实例共享）进行操作。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-11T21:50:38.570

你在这里问了几个问题...

**布局**

所有非静态成员都像结构一样在内存中组织。如果编译器选择放入任何填充，则可能会有填充。如果您有一个对象数组，它就像一个结构数组

**静态成员**

显然是分开存放的。一份。

**函数调用**

课程的幕后发生了一些小魔术。当您调用成员函数时，它与任何其他函数非常相似，只是它具有不同的调用约定。实际上，这会将对象的指针 (this) 插入到参数列表中。

[*编辑*：函数本身的代码不会与您的对象一起存储——这使您可以做一些有趣的事情`delete this`，例如在您不再访问刚刚删除的对象的情况下继续执行成员函数]。

当你有重载或多态函数时，事情会变得更加神奇。 [这篇文章](http://www.go4expert.com/forums/showthread.php?t=16544)是我在大约 5 秒内搜索到的解释。我敢肯定还有很多。我从不关心对象调用的内部结构，但知道总是很高兴。

您应该尝试制作一个展示所有这些不同方面的类，并查看每种情况下生成的程序集。我之前在调整一些时间关键的代码时已经这样做了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-11T22:39:13.427

首先要注意的是，在 C++ 中，“对象”一词包括整数之类的东西。

接下来的事情是，结构几乎按照您的期望进行布局。内存中的下一个成员之后的一个成员之间的填充量未定义。

当一个类从另一个类继承时，该类将从它的基类开始，而基类又可以从它自己的基类开始。因此，在单继承的情况下，Derived* 和 Base* 将是相同的值。在基类区域（其成员）之后将依次是派生类的成员，它们之间的填充量未定义。

当一个类从多个基类继承时，情况会有所不同。基本区域按顺序排列在内存中。Base1 后跟 Base2 等...之后派生类的成员依次排列，它们之间的填充量未定义。

如果对象属于 POD 类，则可以保证该类中的第一个成员将位于对象所在的内存位置。这意味着 Class* 和 Class->firstMember* 将是相同的值。我认为这不适用于非 POD 实体。

对于多态类，即具有虚函数的类，将创建一个额外的秘密成员，称为 vtable。标准中的任何内容都不能保证这一点，但几乎是唯一的方法来做到这一点并遵守规则。每个班级都有这个，所以如果你的班级有基地，那么它就会有它的桌子，你会有你的桌子来获得额外的功能。

所有成员函数的名称都将被修改并修改参数以接受`this`作为第一个参数。当编译器构建东西时，这发生在幕后。vtable 将指向虚函数。非虚拟将简单地静态解析并直接使用。

静态成员不是由类创建的对象的成员。静态成员只是具有不同范围的全局变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T21:38:00.877

它将布局其成员变量，如果它是多态的，还有一个虚函数表，其中将包含指向其虚方法实际关联的函数的指针列表。

静态意味着只有一个副本。

# android - Web 视图身份验证

> ID：12378273
> 
> 赞同：2
> 
> 时间：2012-09-11T21:36:38.973
> 
> 标签：android, authentication, https, android-webview

我遇到了身份验证问题，因为我`WebView`有一个需要身份验证的 https 地址，但它不是基本身份验证。

当我在手机上访问 chrome 并访问该站点时，出现一个对话框，要求我输入用户名和密码一切似乎都是为了基本身份验证，我不认为这就是它。

任何帮助表示赞赏，对不起，如果这是重复的，但我已经看过并没有发现类似的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T22:37:27.223

我不确定您所说的“这不是基本身份验证”是什么意思。

当你设置你的`WebView`时，你给它一个`WebViewClient`实现`onReceivedError()`吗？我相信这将是知道发生 401 并请求用户身份验证的载体。

或者，使用`onReceivedHttpAuthRequest()`用户名/密码并将其传递给处理程序`handler.proceed(username,pwd)`；

AFAIK a`WebView`不处理您将在 Chrome 中看到的弹出窗口。实现类似的东西留给开发人员。您可以创建向用户请求凭据所需的任何身份验证对话。如果这是你想要的，你可以参考[这个线程](https://stackoverflow.com/questions/4220832/webview-basic-authentication-help)。

# objective-c - Objective C 编程中的 HTML 标签

> ID：12378277
> 
> 赞同：1
> 
> 时间：2012-09-11T21:36:56.667
> 
> 标签：objective-c

Objective-C 中是否有任何功能可以将元素列表打印为无序的 HTML 元素。例如 - [@"a--bc---d" htmlList: @"--"] 返回 @"

*   一个
*   公元前
*   -d

"

“--”是分隔元素字符串的分隔符。我使用 NSSArray 来存储输入字符串和函数 componentsSeperatedByString:@"--" 来获取元素。如何继续在元素之间添加 HTML 标签 li 和 /li 以及在整个列表的末尾添加 ul 和 /ul？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:51:44.330

没有为此内置任何内容，但编写起来并不难。查看 NSString 和 NSArray 的文档。

# html - 将 300 像素 x 300 像素表格网格内的图像居中

> ID：12378281
> 
> 赞同：0
> 
> 时间：2012-09-11T21:37:28.023
> 
> 标签：html, css, html-table, centering

我的代码在下面，我正在寻找通过 CSS 将图像（水平和垂直）居中在 300 x 300 像素正方形中的最佳方法。较大的图像将适合该尺寸，较小的图像应居中，而不是拉伸。

```
<table width="100%">
  <tr>
    <td><div class="300box"><img class="centeredimage" /></div></td>
    <td><div class="300box"><img class="centeredimage" /></div></td>
    <td><div class="300box"><img class="centeredimage" /></div></td>
  </tr>
</table> 
```

CSS：

```
.300box {
  height: 300px;
  width: 300px;
}

.centeredimage {
  vertical-align: middle;
  text-align: center;
} 
```

我知道以上是不正确的，所以我希望找到一种更有效的方法来做到这一点。每个表格行都有 3 个 300x300 像素的 div，其中图像居中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:16:45.657

在 td 中使用 div 并不比任何其他使用表格的方式差。

你可以试试这个——

CSS：

```
.blocks.table td {
    width: 300px;
    height: 300px;
    border: 1px solid #ff0000;
    vertical-align: middle;
    text-align: center;
}
p.centeredimage img {
    max-height: 300px;
    max-width: 300px;
} 
```

HTML：

```
<table width="100%" class="table blocks">
    <tr>
        <td>
            <p class="centeredimage" ><img src = "http://a1.sphotos.ak.fbcdn.net/hphotos-ak-ash4/185106_431273290248855_254736287_n.jpg" /></p>
        </td>

        <td>
            <p class="centeredimage" ><img src = "http://a6.sphotos.ak.fbcdn.net/hphotos-ak-ash4/304640_10151181184992355_456123210_n.jpg" /></p>
        </td>
        <td>
            <p class="centeredimage" ><img src = "http://sphotos-b.ak.fbcdn.net/hphotos-ak-snc7/s480x480/422953_410146439043183_1035950087_n.jpg" /></p>
        </td>
        <td>
            <p class="centeredimage" ><img src = "http://sphotos-e.ak.fbcdn.net/hphotos-ak-ash3/s480x480/561574_467101546644877_728463753_n.jpg" /></p>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:49:05.533

保持您的代码完全相同，更改这一样式定义：

```
.centeredimage {
  margin: auto;
} 
```

你说你想让更大的图像被强制不超过 300 像素？我知道 max-width 属性有时会起作用（当然 IE8 非常不喜欢它），但我不知道它在图像上的效果如何（我自己从未测试过），但要补充一点，你只是将 max-width: 300px 添加到 centeredimage 类。

经过反思，其他人所说的也适用：将您的 .300box 类应用于 td，并摆脱 div。对于您所描述的，它们不是必需的。

# php - PHP 验证表单数组

> ID：12378286
> 
> 赞同：1
> 
> 时间：2012-09-11T21:37:43.353
> 
> 标签：php, arrays, validation

我有一个可以用 jQuery 复制的输入表单。输入是这样的

```
<select name='user_id[]'>
    <option value=''>Select a user</option>
    <option value='1'>Alice</option>
    <option value='2'>Bob</option>
</select>
<input type="text" id="drinks1" name="drinks[]" />
<input type="text" id="drinks2" name="drinks[]" />
<input type="text" id="food1" name="food[]" />
<input type="text" id="food2" name="food[]" /> 
```

所以在我的处理脚本中，我有数组`$_POST['userid']`，`$_POST['drinks']`并且`$_POST['food']`

如何检查这些是否为空？该`empty()`功能不起作用，因为当我打印它们时它们看起来像这样，它们`Array ( [0] => )`似乎是非空的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:41:25.583

只需遍历数组以检查是否有任何字段为空：

```
foreach($_POST['userid'] as $key=>$value) if(empty($value)) echo "empty"; 
```

您可以对所有阵列执行相同的操作。

# html - HTML：空 标签显示没有换行符

> ID：12378288
> 
> 赞同：4
> 
> 时间：2012-09-11T21:37:51.967
> 
> 标签：html, css

我们有一个在 axml 中保存消息的 .NET 应用程序。我们需要做的是将其转换为 html。我发现第 3 方库“HtmlFromXamlConverter”可以做到这一点，但有一个小缺陷：如果 axml 包含多个换行符，它将被转换为：

```
<P ><SPAN STYLE="text-decoration:underline;" /> </P>
<P ><SPAN STYLE="text-decoration:underline;" /> </P>
<P ><SPAN STYLE="text-decoration:underline;" /> </P> 
```

仅显示为 1 个换行符。我不能插入“”作为值，因为有下划线样式。所以问题是，有没有办法将空的 P 标签配置`<p></p>`为换行符？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-15T09:20:51.747

How about adding a tiny inline block like so:

```
p:after {
  content:"";
  display:inline-block;
  width:0px;
  outline:1px solid red; /* debug, remove me */
} 
```

This will force even empty paragraphs to be of the line-height you've set.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-11T21:53:13.463

据我所知，你不能只用 CSS 来做到这一点，你必须在段落内添加一个不可破坏的空间：

```
<p>&nbsp;</p> 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-11-07T16:24:15.573

This solution gives empty paragraphs the current lineheight:

```
p:empty:before {
  content: ' ';
  white-space: pre;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-05T16:52:12.453

There are clever solutions already mentioned, but one solution I like that uses *only CSS* is to set a minimum height on your `p` tags.

```
.myText {
  font-size: 14px;
  line-height: 18px;
}
.myText p {
  min-height: 18px;
} 
```

This will make even empty `p` tags take up the same height as their neighbors, and you don't need to mess around with inserting text.

This is really good if you're displaying user input, because you might want to save that user input again and you'd need to carefully rip out all of the `&nbsp;`s or whatever else you inserted.

For downsides, It does require that you have some wrapping element. I also wish I could use relative line-heights but don't see a way to make that work.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-12T05:17:09.850

HTML 代码非常奇怪且损坏，但我认为您无法修复它。使用 CSS使`p`空行产生空行的方法，以及通常的 CSS 警告，是将其高度设置为与行高相同，并将其边距设置为零（删除将出现在此渲染中的默认顶部和底部边距除此以外）：

```
p { height: 1.3em; margin: 0; } 
```

这假设行高为 1.3，最好显式设置（而不是让浏览器默认设置）：

```
* { line-height: 1.3; } 
```

The value should be chosen according to the properties of the font; but 1.3 is reasonable for a typical situation.

If there are other `p` elements on the page, you need some added complexity to restrict the effect of the rule to the desired set only. (There is no way to select elements on the basis of its content in CSS; but JavaScript could be used for that.)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-11T22:05:56.217

如果您不需要下划线并且仍想添加空格，您可以在 CSS 中使用 !important 标签覆盖内联样式。

```
p span {
   text-decoration: none !important; 
   /* This will force the underline to go away if you want to add spaces */
} 
```

如果您只想在每个段落标签的底部添加一些边距，您可以这样做：

```
p { 
   display: block;
   margin-bottom: <value>px;
} 
```

请记住，这将影响页面上的所有段落，对这些段落应用类将是仅调整这些换行标记的最佳解决方案。然后，您可以执行以下操作：

```
.linebreak {
   display: block;
   margin-bottom: <value>px;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-11T23:06:59.710

您始终可以使用 javascript 将空的 <p> 标记替换为 <br>。以下解决方案使用 jQuery：

```
var emptyPs = $('P > SPAN[STYLE="text-decoration:underline;"]').filter(function() {
    var $this = $(this);
    return $.trim($this.text()).length == 0;});

emptyPs.replaceWith('<br />'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-02T14:54:41.530

everything is much simpler:

```
 p:empty {
      display: none;
    }
```

# java - Android/Java：如何在 5 秒后停止下载？

> ID：12378289
> 
> 赞同：3
> 
> 时间：2012-09-11T21:37:51.687
> 
> 标签：java, android, networking

我正在使用 AsyncTask 下载文件，目的是测量连接的下载速度。我想在 5 秒后停止下载，这样我就可以检查下载的总字节数并计算速度。这是我正在使用的代码（位于 doInBackground() 方法中）：

```
try{                
    InputStream is = new URL("http://www.domain.com/linux.iso").openStream();
    byte[] buf = new byte[1024];

    long startTime = System.nanoTime();
    long limitTime = System.nanoTime();
    long difference = 0;    

    while (difference < 5000000000){ /*5 billion nanoseconds = 5 seconds*/
        is.read(buf);
        limitTime = System.nanoTime();
        difference = limitTime - startTime;
    }           

    is.close();
}
catch(Exception e){
    e.printStackTrace();
} 
```

当连接到 WiFi 时，它工作正常。测得的速度非常准确，完成测试只需 5 秒。但是，一旦我转移到 3G，测试需要 10 到 15 秒才能完成（我注意到连接越慢，完成所需的时间就越长）。

怎么会？我猜操作系统正在等待它发送的 read() 请求的回复，但不确定。

你知道无论如何都会将下载限制在 5 秒的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:44:27.673

您需要将时间计算和下载分开在不同的线程中。你是对的，因为两者都在同一个线程中，只有在完成`limitTime = System.nanoTime();`时才会执行`is.read(buf);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:44:41.463

`read()`绝对是阻塞调用。但我认为这是必须等待手机中的蜂窝无线电启动到全功率的结果。

确定的一种方法是打开浏览器，浏览页面，然后在页面加载后进行测试。

今年有一个非常有趣的 Google IO 演讲，讲述了蜂窝无线电如何在大部分时间处于空闲/低功耗状态，并且需要几秒钟来“预热”

我看看能不能找到视频的链接。

编辑：这是视频：

[http://www.youtube.com/watch?v=PwC1OlJo5VM](http://www.youtube.com/watch?v=PwC1OlJo5VM)

电池谈话大约在 17:12 开始

[http://www.youtube.com/watch?v=PwC1OlJo5VM&feature=player_detailpage#t=1032s](http://www.youtube.com/watch?v=PwC1OlJo5VM&feature=player_detailpage#t=1032s)

加速时间约为 2 秒。

演示文稿中的一张幻灯片：

![在此处输入图像描述](../Images/af23eee128568efcbb52d0353beb5f31.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T22:28:17.570

试试这个代码，让我知道它是否有效：

```
final InputStream is = new URL("http://www.domain.com/linux.iso").openStream();
byte[] buf = new byte[1024];

final byte[] buf = new byte[1024];
long startTime = System.nanoTime();
long limitTime = System.nanoTime();
long difference = 0;

ExecutorService executor = Executors.newCachedThreadPool();
Callable<Object> task = new Callable<Object>()
{
    public Object call()
    {
        try
        {
            return is.read(buf);
        }
        catch(IOException e)
        {
            return null;
        }
    }
};

long endTime = 5000000000L;

while(difference < endTime)
{   
    Future<Object> future = executor.submit(task);
    limitTime = System.nanoTime();
    difference = limitTime - startTime;

    try
    {
        if(future.get(endTime - difference, TimeUnit.NANOSECONDS) == null)
        {
            System.out.println("IOException is raised on read()!");
        }
    }
    catch(TimeoutException ex)
    {
        System.out.println("TimeoutException is raised, because of the timeout!");
        break;
    }
    catch(Exception e){}
    finally
    {
        future.cancel(true);
    }
} 
```

# playframework - 在 playfrmework 中查看未在生产中重新编译

> ID：12378291
> 
> 赞同：0
> 
> 时间：2012-09-11T21:37:59.927
> 
> 标签：playframework

必须在生产中调整 html 显示文本。在测试服务器上获取我的副本并在我的视图 Display.html 中进行更改

停止并启动tomcat/apache。刷新浏览器时没有看到我的更改。

有没有一种方法可以执行此操作，还是必须重新编译整个项目并更改视图，然后将其投入生产？或者我是否在我的测试机器上更改了一个 java 文件，然后重新启动 tomcat/apache，这样会强制整个应用程序重新编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:25:50.730

视图是在生产环境中预编译的。在独立的 play 安装中，您可以使用 play precompile 命令（使用 play 1.2.x），但我猜想使用 tomcat 您必须重建您的战争

# magento - Magento - 售罄时简单产品的显示选项

> ID：12378296
> 
> 赞同：0
> 
> 时间：2012-09-11T21:38:16.200
> 
> 标签：magento, attributes, options, product

是否有可能在售罄时在可配置产品上显示选项/简单产品？

让我解释一下：
我们有不同颜色、不同尺寸的产品。

并非所有尺寸都售罄，这意味着颜色也已售罄，可配置产品也已售罄。

我设法显示配置。具有 Magento 功能的产品即使已售罄，但是……下拉区域中的选项/属性/简单产品根本不显示。

它看起来像这样：
[http ://cl.ly/image/263x2T2h2u1l](http://cl.ly/image/263x2T2h2u1l)

但它应该看起来像这样，即使卖光了。也许有一个禁用的添加到购物车按钮或灰色等：
[http ://cl.ly/image/3w2D3a3F3G3p](http://cl.ly/image/3w2D3a3F3G3p)

我尝试了几种方法，核心黑客，编写扩展，但我没有设法显示这些字段。

有人可以推动我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T22:15:42.363

允许/禁止在选项中添加产品的代码是用于可配置产品的 Mage_Catalog_Block_Product_View_Type_Configurable::getAllowProducts()。

在我的测试中，只需更改（Magento 1.7.0.1 上的第 90 行）：

```
$skipSaleableCheck = Mage::helper('catalog/product')->getSkipSaleableCheck(); 
```

到

```
$skipSaleableCheck = true; 
```

Magento 成功地将所有简单产品添加为选项，即使这些简单产品已售罄。

如果我很好地理解您的问题，这可能足以实现您想要实现的目标。

如果这是您正在寻找的内容，请确保重写此块类而不是编辑核心文件。

# debugging - Intellij IDEA 11.0.2 断点中的 Grails 2.0.4 不会暂停，尽管代码显然正在运行

> ID：12378299
> 
> 赞同：1
> 
> 时间：2012-09-11T21:38:19.127
> 
> 标签：debugging, grails, intellij-idea, breakpoints, grails-2.0

我有一个控制器类，里面有非常无聊的代码。如果我转到运行->调试菜单并运行它，然后导航到与控制器关联的页面，则不会暂停断点。时期。红色圆圈中有复选标记，表明我没有将它们错误地设置在不可执行的行上。我已经完成了'grails clean'。它只影响某些控制器，另一个带有断点的控制器将暂停。

所有新创建的控制器也无法挂起。

它必须是 IntelliJ 中的配置问题，但它似乎不会让步。

也发生了，不知道它是否相关：在 Grails 视图的侧面板上，它用红色曲线在控制器下划线。但是，树视图中的所有叶子都没有下划线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T15:26:58.733

我发现了问题：

我最初使用 Grails 1.3.7 创建了这个项目。在发现仍未修复的错误后，我升级到 2.0.4。在 1.3.7 中，action 似乎默认是闭包，您可以在其中设置断点，它们将被执行。在 2.0.4 中，action 是默认的方法并且可以有断点，但是关于新版本的某些东西不允许在闭包中使用断点。如果您创建一个新的操作闭包并尝试设置断点，它会警告您“该行上没有可执行代码”。但是现有的闭包你不会收到这样的警告，并且断点都有红色的小复选标记（不正确），表明它们应该被尊重。

将这些更改为方法操作似乎可以解决问题。对于可能希望得到更笼统答案的主演，我很抱歉，我希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:01:32.550

我不熟悉 Grails，但我肯定遇到过 Java 的这个问题。对我来说，是 IntelliJ 没有接受我的更改并且未能重新构建我的项目（它使用过时的编译代码运行）。尝试清理您的程序集目录（与 .class 文件等效的 Grails 所在的位置）并重新构建您的项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T00:24:17.300

我从来没有遇到过完全相同的设置问题（在 Win7 下）...如何尝试从带有 debug: 的 cmd 行运行 grails `grails-debug run-app`，然后连接 IDEA 以在端口 5005 上调试远程，看看是否有任何改变？

# c++ - 将 C++ 方言更改为 C++11，但在 XCode4 上保留标准库非 C++11 是否存在风险？

> ID：12378300
> 
> 赞同：1
> 
> 时间：2012-09-11T21:38:20.270
> 
> 标签：c++, compiler-construction, c++11, clang

假设我有一个不使用任何 C++11 的跨平台（Win 和 Mac）生产代码库。

假设 mac 上的编译器选项已更改为使用 C++11 语言方言，但没有 C++11 标准库。

我曾尝试在谷歌上搜索以了解可能的含义，但结果却一无所获。

我的问题是：

1.  改变clang中的语言方言甚至意味着什么？
2.  做这样的事情有什么风险？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T22:30:44.670

我不使用 XCode，但我想如果他们为 clang 提供（可能不完整但到达那里）C++11 模式，那么他们也会提供（可能不完整但到达那里）C++11 标准图书馆。并一起测试它们。所以你的情况*不应该*出现，但假设它无论如何：

1.  从形式上讲，它没有任何意义，因为该标准不承认任何混合和匹配“语言”和“库”的方式。这取决于你的编译器它认为它意味着什么。这可能意味着新的“语言特性”（如右值引用、lambda 等）变得可用，但命名空间中的新类和函数`std`不可用。

2.  主要风险可能是您不再按照公认的标准进行编程，而是按照编译器发明的可能文档不足的东西进行编程。如果编译器说在 C++11 模式下它需要一个 C++11 标准库，而你为它提供了一个 C++03 标准库，那么你甚至不必责怪编译器文档——任何事情都可能发生了，你弄坏了，你的错。

除了这种有趣的组合的风险之外，使用 C++03 代码库并使用*任何*C++11 编译器编译它都有很小的风险。C++03 中有一些代码结构可以编译为 C++11，但含义略有不同。

例如，几乎可以在 C++03 中编写一个在 C++11 中使用时会中断的类，因为 C++11 将生成一个不正确的移动构造函数。有时您必须替换编译器生成的不正确的复制构造函数（三规则），虽然 C++11 确保在那些“正常”情况下移动构造函数被抑制，但仍有一些奇怪的优势案例。不幸的是，我现在不记得他们了。

C++11 标准列出了 C++11 和 C++03 之间的一些不兼容性。你会希望一切，但你知道它是怎么回事。该列表在附录 C 中。它的开头是：

> 有效的 C++ 2003 代码可能无法编译或在本国际标准中产生不同的结果。具体来说，名为`R`, `u8`, `u8R`, `u`, `uR`, `U`,`UR`或的宏`LR`在与字符串文字相邻时不会被扩展，但将被解释为字符串文字的一部分。

并且从那里阅读并没有更多引人入胜的读物。但它基本上是一个列表，如果它们出现在您的 C++03 代码库中，需要更改才能获得等效的 C++11。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T00:45:23.710

没有真正的“风险”，但 C++11 的很多价值都来自库。

将语言更改为 C++11 意味着支持 C++11 语言功能。如果您查看标准，您会发现它分为语言（第 1-16 条）和库（第 17-30 条）功能。语言功能涵盖语法、表达式和语句的含义、重载解析等。库功能涵盖标准标题的内容。因此，如果您需要一个特定的头文件来在 C++11 中做某事，那么您可能需要一个 C++11 标准库。

Xcode 支持 gcc 4.2 附带的 libstdc++ 版本，并且是为 C++03 构建的。当 clang 设置为 C++11 模式时，这可以正常工作。它还支持 libc++，它旨在提供许多 C++11 功能，即使使用 C++03 编译器也是如此。因此，混合和匹配在大多数情况下应该可以正常工作。但是，通过使用为彼此设计的语言和库，您将获得更多价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T22:46:21.017

不要忘记，许多 C++11 语言特性都由库特性支持——例如，如果没有 and ，你将不会有太多的右值引用使用`std::move`，`std::forward`而且初始化列表也会是垃圾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T02:34:22.717

GCC 和 clang 编译 c++ 略有不同。这可能对您的情况没有影响，但在其他人的情况下可能会，因此您可以切换回 GNU 风格的编译。因此，“语言方言”。

只要您将语言和标准库设置为 GNU 版本，它就不会产生影响。但是在 GNU 方言中使用 Apple LLVM 编译器（clang）进行编译可能不会产生与在 Windows 上相同的结果（假设您在两者上都使用 GCC）。我想说除非您在两个平台上都使用匹配的库、编译器和设置，否则您总是处于某种风险之中，尤其是当第 3 方库开始发挥作用并且您将 libstdc++ 换成 libc++ 以获得 C++11 支持时。

如果你在 Windows 上使用 VC++，它对 C++11 的支持相当缺乏，所以当你的 XCode 代码拒绝在 VC++ 中构建时不要感到惊讶。

# mysql - 仅选择两次具有相同 foreign_id 的条目

> ID：12378311
> 
> 赞同：4
> 
> 时间：2012-09-11T21:39:17.100
> 
> 标签：mysql, select, count

我有一个具有以下结构的 mysql InnoDB 表：

```
id
artist_id 
```

那里有很多条目，大多数artist_ids在那里有15次。但有些人只在那里两次。我需要得到那些。

我想出了以下方法，但无济于事：

```
SELECT artist_id FROM matches HAVING COUNT(artist_id)=2 
```

它返回 0 行，尽管有些艺术家 ID 只出现在表中两次。我怎样才能得到它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T21:42:46.943

你好，
我会用这个：
`SELECT artist_id,count(*) FROM matches GROUP BY artist_id HAVING COUNT(*)=2`
因为`HAVING`是结果的过滤器。

与您一起`=2`，您会发现恰好存在两次的那些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:47:19.383

```
select artist_id, count(id) as num from matches group by artist_id having num = 2; 
```

# javascript - 如何将内容分配给元素？

> ID：12378312
> 
> 赞同：0
> 
> 时间：2012-09-11T21:39:34.027
> 
> 标签：javascript

我在尝试将内容分配给变量时遇到了麻烦。

我有

```
 var test=document.getElementsByClassName('current')
 var title='test name';
 //doesn't show in my div element.
 test.innerHTML=title; 
```

但它没有显示在当前元素中

我的 html

```
<div class='current'> </div> 
```

无论如何我可以尝试解决这个问题吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:42:48.860

`document.getElementsByClassName`返回一个~~元素数组~~ [NodeList](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)。您必须迭代该列表或获取第一个元素（如果这是您要修改的元素），然后设置该元素的 innerHTML：

```
test[0].innerHTML = title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:45:13.817

变量 test 将返回一个具有类名的 html DOM 对象数组`current` 因此，您有责任通过向其附加数组索引来指定要定位的元素。

```
var test=document.getElementsByClassName('current')[0] 
//return the first found DOM object with the matching class 
```

# sql-server-2008 - 即使没有记录，SQL 计数为零？

> ID：12378316
> 
> 赞同：0
> 
> 时间：2012-09-11T21:39:56.180
> 
> 标签：sql-server-2008

我正在使用 SQL Server 2008

我有 2 张桌子

1.  附言

    列：PS_ID(PK)、AID(FK)、PS_Vendor

2.  系统

    列：System_ID(PK)、AID(FK)、Sys_Prod

这两个表通过连接`PS.AID = System.AID`

我必须找到每个的计数和`PS_Vendors`每个`SYS_Product`的总数`Sys_product`。

我的输出必须看起来像：

```
PS_Vendor Sys_product Count Total
 ABC         A         2      10  
 ABC         B         5      20       
 ABC         C         0      15
 XYZ         A         3      10
 XYZ         B         0      20
 XYZ         C         12     15 
```

我创建了一个名为`PS_system_View`：

```
select * from system
left outer join ps
on ps.aid=system.aid 
```

我无法结合这些

```
select B.ps_vendor, A.sys_product, B.Count,A.Total from 

--To get the total:

select sys_product, sum(total) as Total from

(select sys_product, ps_vendor, sum(case when sys_product is not null then 1 else 0 end) as total

 from PS_System_view

)A

group by sys_product

left join

(

--To get the count:

select sys_product, ps_vendor, sum(case when ps_vendor is not null then 1 else 0 end) as count from
 PS_System_view

where ps_vendor is not null and sys_product is not null

)B on B.sys_product=A.Sys_product 
```

# mongodb - Mongodb插入没有_id字段的文档

> ID：12378320
> 
> 赞同：17
> 
> 时间：2012-09-11T21:40:22.307
> 
> 标签：mongodb, mongodb-java, mongodb-query

我是 mongodb 的新手。

1.  我需要插入一个没有自动生成 _id 字段的文档。

2.  我需要将字段 Tenant_id 设置为唯一或需要将“_id”字段更改为 Tenant_id。

怎么做？

像这样的东西

```
 Tenant
        {Tenant_id: 123, Tenant_info: ...} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-12T09:17:16.343

默认情况下，如果 _id 字段不存在，所有常规集合都会自动插入该字段。

但是，可以在创建集合时更改此行为，方法是将 autoIndexId 参数显式设置为 false。

```
> db.createCollection("noautoid", { autoIndexId: false })
{ "ok" : 1 } 
```

然后您可以插入没有 _id 字段的文档。但是一些驱动程序，例如 javascript 驱动程序（以及 mongo 控制台），会自行添加 _id 字段。在 mongo 控制台中，您可以执行以下操作：

```
> db.noautoid._mongo.insert(db.noautoid._fullName, {name: "Jack"})
> db.noautoid.find()
{ "name" : "Jack" } 
```

有关 autoIndexId 字段的更多信息可以在[MongoDB 文档](http://www.mongodb.org/display/DOCS/Capped+Collections#CappedCollections-autoIndexId)中找到。这个页面是关于 Capped Collections 的，但是 autoIndexId 字段对于常规和 capped collections 都是通用的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T21:59:04.800

除非您使用上限集合，否则该`_id`字段是 mongo 文档的默认键。

它是一个不可改变的字段，不能被排除在文档结构之外。

我建议改用`tennant_id`as `_id`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T21:59:48.797

只有在插入文档时没有为“_id”字段指定值时，mongodb才会自动生成“_id”字段。因此，您可以在插入文档时手动设置 _id：

```
db.tenants.insert( {"_id" : 123, "Tenant_info" : ... } ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T21:59:29.437

每个 MongoDB 文档都必须有一个唯一的字段“_id”，如果您不提供它，它将自动为您生成。

无法重命名此字段。

你的两个选择是：

1）忽略生成的_id字段并使用您自己的tenant_id字段（您需要在该字段上添加唯一索引）或2）将tenant_id值存储在_id字段中（并利用它已经具有唯一索引的事实在上面）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-18T06:47:41.153

无法删除任何 mongodb 集合中的 _id 字段。正如@stephene 所说，我尝试了同样的方法，但我遇到了这样的错误

```
> db.noautoid._mongo.insert(db.noautoid._fullName, {name: "Jack"});
 2015-06-18T11:22:29.149+0530 E QUERY    Error: insert needs 3 args
 at (shell):1:20 
```

# c# - 使用 linq 过滤子子集合

> ID：12378321
> 
> 赞同：0
> 
> 时间：2012-09-11T21:40:24.197
> 
> 标签：c#, linq

我有以下结构，

事件（PARENT）并具有以下字段；ID、事件名称

EventProcess (CHILD) 有以下字段；ID EventID(FK), EventProcessName

EventProcessForms (GRANDCHILD) 有以下字段；ID, eventProcessID, FormID

Forms-具有以下字段，ID，FormName

我试图只返回 EventProcess 具有存储在 EventProcessForms 表中的表单的事件？

我如何使用 linq 返回一个集合？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:53:52.367

听起来你需要深入两个层次：

```
events.Where(
    e => e.EventProcesses.Any(
        ep => ep.EventProcessForms.Any()
        )
    ); 
```

如果这些属性中的任何一个可以为空，则更改为：

```
events.Where(
    e => e.EventProcesses != null && e.EventProcesses.Any(
        ep => ep.EventProcessForms != null && ep.EventProcessForms.Any()
        )
    ); 
```

如果您只想过滤到具有表单的*流程*，您将使用 a 修改事件实体`foreach`或创建新的事件对象来选择过滤的流程：

```
events.Select(e=> new Event() {
         ID = e.ID, 
         Name = e.Name, 
         EventProcesses = e.EventProcesses.Where( 
             ep => ep.EventProcessForms.Any())
    .Where(e=>EventProcesses.Any())
    ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:45:34.110

我编辑了我的答案：

```
using (yourDataContext db = new yourDataContext());
{    
    var results = db.Event.Where(e -> e.EventProcess.EventProcessForms.count() > 0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:47:34.813

就像是：

```
var q = from @event in events 
    where @event.EventProcess.EventForms.Count() > 0 
    select @event; 
```

也可以表示为：

```
 var q = from @event in events
            where @event.EventProcess.EventForms.Any()
            select @event; 
```

猜测没有某种实际类来基于属性......

# java - Java限制随机双精度

> ID：12378326
> 
> 赞同：0
> 
> 时间：2012-09-11T21:40:53.930
> 
> 标签：java

我有一个简单的问题，我对随机数生成有点生疏。我想生成大的奇数整数（我使用双精度数，因为我的数字可能超出 int 范围），但我不知道如何在随机数生成中去掉小数并让数字为奇数。

现在我只有：

```
N = nMin + (nMax - nMin) * rand.nextDouble(); 
```

正如我所说，这给了我 nMin 和 nMax 之间的任何随机数（带小数）。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T21:44:37.407

如果您的数字可能超出 int 范围，那么您应该使用`long`，或失败，`BigInteger`。

使用[此问题](https://stackoverflow.com/q/2290057/330057)中的信息创建一个 random `BigInteger`，如果它甚至只是简单地添加 1 。

```
BigInteger randomOdd(BigInteger min, BigInteger max) {
    BigInteger range = max.subtract(min);

    // expected iterations: 2 - max iterations: infinite
    BigInteger tmp;
    do {
        tmp = new BigInteger(n.bitLength(), rng); // rng is your Random Number Generator
    } while (tmp.compareTo(range) >= 0);

    BigInteger result = min.add(tmp);

    // force the result to be odd
    // TODO: will this push it over max?
    result = result.or(BigInteger.ONE); 

    return result;
} 
```

或者，您可以使用 BigInteger 类上的方法`BigInteger.probablePrime()`：

> `public static BigInteger probablePrime(int bitLength, Random rnd)`
> 
> 返回一个`BigInteger`可能是素数的正数，带有指定的`bitLength`. 此方法返回的 BigInteger 是复合的概率不超过`2^100`。
> 
> **参数：**
> 
> *   bitLength - 返回的位长度`BigInteger`。
> *   rnd - 随机位的来源，用于选择要测试素性的候选者。
> 
> **回报：**
> 
> *   `BigInteger`可能是素数的 bitLength位

如果它可能是素数，它也可能是奇怪的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:43:15.873

`(long)(expression)`将`expression`转换为`long`（一个 64 位整数），截断小数（因此有效地向零舍入）。创建奇数可以通过首先创建一个整数然后将其乘以 2*并加 1*来完成（令人尴尬的编辑）。（您可能能够计算出您需要如何调整`nMin`和`nMax`自己。:-)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:43:04.880

摆脱小数是一个常见的问题。一个技巧是乘以 100，然后将该结果转换为 int（或 long）。这是你熟悉的好习惯！！

# c# - 我如何搜索列表 并检查网址是否已经存在？

> ID：12378327
> 
> 赞同：-5
> 
> 时间：2012-09-11T21:40:55.540
> 
> 标签：c#

在这种情况下，它无法正常工作，它会不断将相同的链接添加到列表中。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using HtmlAgilityPack;
using System.IO;
using System.Text.RegularExpressions;
using System.Xml.Linq;
using System.Net;
using System.Web;

namespace GatherLinks
{
    public partial class Form1 : Form
    {
        int sites = 0;
        int y = 0;
        string url = @"http://www.google.co.il";
        string guys = "http://www.google.com";

        public Form1()
        {
            InitializeComponent();

            List<string> a = webCrawler(guys, 2);
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private int factorial(int n)
        {
            if (n == 0) return 1;
            else y = n * factorial(n - 1);
            richTextBox1.Text = y.ToString();
            return y;

        }

        private List<string> getLinks(HtmlAgilityPack.HtmlDocument document)
        {

            List<string> mainLinks = new List<string>();
            var linkNodes = document.DocumentNode.SelectNodes("//a[@href]");
            if (linkNodes != null)
            {
                foreach (HtmlNode link in linkNodes)
                {
                    var href = link.Attributes["href"].Value;
                    mainLinks.Add(href);
                }
            }
            return mainLinks;

        }

        private List<string> webCrawler(string url, int levels)
        {

                HtmlAgilityPack.HtmlDocument doc;
                HtmlWeb hw = new HtmlWeb();
                List<string> webSites;// = new List<string>();
                List<string> csFiles = new List<string>();

                csFiles.Add("temp string to know that something is happening in level = " + levels.ToString());
                csFiles.Add("current site name in this level is : " + url);
                                try
                {
                    doc = hw.Load(url);
                    webSites = getLinks(doc);

                    if (levels == 0)
                    {
                        return csFiles;
                    }
                    else
                    {
                        int actual_sites = 0;
                        for (int i = 0; i < webSites.Count() && i < 20; i++)                         {
                            string t = webSites[i];
                                                        if ((t.StartsWith("http://") == true) || (t.StartsWith("https://") == true)) // replace this with future FilterJunkLinks function
                            {
                               // for (int e = 0; e < csFiles.Count; e++)
                               // {
                                    if (csFiles.Contains(t))
                                    {
                                    }
                                    else
                                    {
                                        actual_sites++;
                                        csFiles.AddRange(webCrawler(t, levels - 1));
                                        Texts(richTextBox1, "Level Number " + levels + " " + t + Environment.NewLine, Color.Red);
                                    }
                               // }
                            }
                        }
                        // report to a message box only at high levels..
                        //if (levels==1)
                        //MessageBox.Show(actual_sites.ToString());

                        return csFiles;
                    }

                }
                catch
                {
                    return csFiles;
                }

        } 
```

和文本功能：

```
public void Texts(RichTextBox box, string text, Color color)
        {
            box.SelectionStart = box.TextLength;
            box.SelectionLength = 0;

            box.SelectionColor = color;
            box.AppendText(text);
            box.SelectionColor = box.ForeColor;
        } 
```

我需要在 webCrawler 函数中做两件事：

1.  如果无法解析 url 变量，那么 try 和 catch 应该可以完成这项工作。

2.  如果列表 csFiles 已经包含相同的项目，请不要再次添加它们。例如，如果在 csFiles 中已经有[http://www.google.com](http://www.google.com)则不要再次添加[http://www.google.com](http://www.google.com)所以最后 csFiles 列表将只包含[http://www.google.com](http://www.google.com)一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:01:04.533

您对 contains 的使用是错误的。如果我了解您的问题..我会勇敢地冒险猜测..

```
for (int i = 0; i < webSites.Length && i < 20; i++)
{

   if ((t.StartsWith("http://") == true) || (t.StartsWith("https://") == true)) // replace this with future FilterJunkLinks function
   {
     if (csFiles.Contains(t))
     {
     //dosomething
     }
     else
     {
        actual_sites++;
        csFiles.AddRange(webCrawler(t, levels - 1));
        Texts(richTextBox1, "Level Number " + levels + " " + t + Environment.NewLine,  
        Color.Red);
     }
   }
} 
```

}

更新：我不太了解递归。事实上我避免它，但我认为这是你的另一个问题。当您递归调用您的代码时，您将“忘记”包含所有链接的先前列表。因此，我建议您不要每次都创建一个新的 csFile，而是在 webcrawler 中传递对列表的引用。希望能解决它。

意义：

`private List<string> webCrawler(string url, int levels,List<string> csFiles)`

# hibernate - 使用和不使用 JNDI 的休眠

> ID：12378335
> 
> 赞同：1
> 
> 时间：2012-09-11T21:41:30.937
> 
> 标签：hibernate, hibernate-4.x

我在 Tomcat 7 中成功使用了 Hibernate 4。我现在需要创建一个也使用 Hibernate 的独立应用程序，并将利用我在 Tomcat 应用程序中使用的 Hibernate 代码。

Hibernate 配置当前使用 JNDI 和 Tomcat。

由于 Hibernate 自动生成生成的代码，看起来它需要 JNDI 才能工作（这里是 XXXXHome 类之一的片段：

```
protected SessionFactory getSessionFactory() {
    try {
        return (SessionFactory) new InitialContext().lookup("SessionFactory");
    } catch (Exception e) {
        log.error("Could not locate SessionFactory in JNDI", e);
        throw new IllegalStateException("Could not locate SessionFactory in JNDI");
    }
} 
```

任何人都知道如何在独立环境中使用这些自动生成的 Hibernate 类？

# ruby-on-rails - Rails 3 中的全球路线

> ID：12378339
> 
> 赞同：0
> 
> 时间：2012-09-11T21:41:45.200
> 
> 标签：ruby-on-rails, omniauth

我让我的 Rails 应用程序运行 OmniAuth-identity，以“用户”模型保存用户。访问用户需要指向：

```
0.0.0.0:3000/users/:id 
```

但我想通过输入用户的唯一名称来到达那里，例如 facebook 或 twitter：

```
0.0.0.0:3000/username 
```

所以我创建了一个全球路线：

```
match "/*id" => "users#show" 
```

并根据传递的参数修改了用户控制器的显示方法以按名称而不是 ID 查找：

```
def show
    if params[:id].is_a?(String)
      @user = User.find_by_name(params[:id])
    else
      @user = User.find(params[:id])
    end
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @user }
    end
  end 
```

路由工作，如果我去

```
0.0.0.0:3000/username 
```

它成功显示了用户信息。但是像旧路由一样注销或查找用户不起作用..（即使我添加到控制器中的条件是检查 String||Int.

做这些事情时，我得到：

```
NoMethodError in Users#show

Showing /home/juanchi/Dropbox/GitHub/RSandBox/app/views/users/show.html.erb where line #5 raised:

undefined method `provider' for nil:NilClass
Extracted source (around line #5):

2: 
3: <p>
4:   <b>Provider:</b>
5:   <%= @user.provider %>
6: </p>
7: 
8: <p>
Rails.root: /home/juanchi/Dropbox/GitHub/RSandBox

Application Trace | Framework Trace | Full Trace
app/views/users/show.html.erb:5:in `_app_views_users_show_html_erb___448583227_80374500'
app/controllers/users_controller.rb:22:in `show'
Request

Parameters:

{"id"=>"logout"}
Show session dump

Show env dump

Response

Headers:

None 
```

在用户控制器的 show 方法中获取信息失败。但是当使用新路线时它会很好......那么它缺少什么？

如何同时支持我的新路由规则和旧路由规则？

该路由与用户注销方法有什么关系？

注销时它会调用 session#detroy 方法：

```
def destroy
    session[:user_id] = nil
    redirect_to root_url, :notice => "Goodbye!"
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:11:17.543

我不确定我是否明白了这个想法，但我认为您不需要使用全局路由。

你可以使用这样的东西：

```
get "users/:id" => "users#show"
get ":username" => "users#show" 
```

在您的操作中，您可以检查参数是否存在：

```
def show
  if params[:id].present?
    @user = User.find(params[:id])
  elsif params[:username].present?
    @user = User.find_by_name(params[:username])
  end
end 
```

像在代码中那样检查参数的类型是没有意义的，因为它总是 String （或者 NilClass，如果它是 nil）。

还有一件重要的事情 - 路由是有序的，因此您必须`get ":username" ...`在路由表的末尾放置您的某个位置，以防止与 /logout、/login 等标准操作发生冲突。

实际上，要完全消除这些冲突并不容易 - 假设您的用户选择了名称“注销”。因此，您必须添加另一个逻辑来阻止用户使用此类名称。

**Update:** I forgot to explain why I think that globbing is not necessary - you need globbing to catch things like "foo/bar", "something/nice/in/rails" with one rule `match "*xxx"`

# android - 在 Android 中单击下一个/上一个按钮时显示完整图像

> ID：12378342
> 
> 赞同：0
> 
> 时间：2012-09-11T21:42:07.893
> 
> 标签：android, gridview, android-imageview

我是 Android 编程新手。我正在创建一个非常简单的应用程序，其中有超过 5 张静态图片（存储在可绘制文件夹中）。现在，我创建了一个在 gridView 中显示所有图片的活动。假设，如果我单击第二个位置的图像，它将打开一个新活动，以全尺寸（使用 ImageView）模式显示该特定图像以及下一个下一个/上一个按钮以在图像上导航（用户不必只能从第一个图像，他/她可以从 gridView 中选择任何图像，然后导航将从该点本身开始）。我的问题是，我不想硬编码开关盒的数量等于图像数量来浏览按钮。有没有其他方法来实现所需的场景？或者我可以用来实现相同功能的任何其他 Android 功能？

提前致谢！！！

我也在添加我的代码（第一个活动）：

```
公共类 GridViewActivity 扩展 Activity {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_grid_view);
    GridView gridview = (GridView) findViewById(R.id.gridView);
    gridview.setAdapter(new ImageAdapter(this));

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

            //Create an Intent
            Intent intent = new Intent(getApplicationContext(), FullImageActivity.class);
            intent.putExtra("image", position);
            startActivity(intent);
        }
    });
} 
```

}
 `Second Activity:

public class FullImageActivity extends Activity implements OnClickListener {

Button button;
int drawable;
ImageView display;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_full_image);
    Intent intent = getIntent();
    display = (ImageView) findViewById(R.id.fullImageView);

    ImageView imageView = null;

    String idName = "ivImage";
    int id;
    for (int i = 1; i <= 2; i++) {
        id = getResources().getIdentifier(idName + i, "id",
                getPackageName());
        imageView = (ImageView) findViewById(id);
        imageView.setTag((Integer) i);
        imageView.setOnClickListener(this);
        if (i == 1) {
            // make sure that your "drawable" has a value different than 0!
            // otherwise a click on setWall button might result into a crash
            drawable = id;
        }
    }
    int pos = intent.getExtras().getInt("image");
    ImageAdapter imageAdapter = new ImageAdapter(this);

    imageView.setImageResource(imageAdapter.mThumbIds[pos]);
    Log.i("pos", "" + pos);
    // System.out.println("pos: " + pos);

    button = (Button) findViewById(R.id.btnNextScreen);
    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            InputStream inputStream = getResources().openRawResource(
                    drawable);
            Bitmap bitmap = BitmapFactory.decodeStream(inputStream);

            try {
                getApplicationContext().setWallpaper(bitmap);
            } catch (IOException e) {
                // use Log.e() with all 3 params instead of
                // e.printStackTrace();
                Log.e("MyTag", "couldn't set wallpaper", e);
            }
        }
    });

}

@Override
public void onClick(View v) {
    // just to make sure that the clicked view is a ImageView
    if (v instanceof ImageView) {
        ImageView imageView = (ImageView) v;
        int place = (Integer) imageView.getTag();
        int drawableId = getResources().getIdentifier("image" + place,
                "drawable", getPackageName());
        display.setImageResource(drawableId);
        drawable = drawableId;
    }

}` 
```

 `}

我已经添加了@WarrenFaith 建议我的代码。添加建议的代码后，它在“imageView.setTag((Integer) i);”上给我一个错误。请告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:26:59.990

我刚刚[回答](https://stackoverflow.com/a/12378721/180538)了一个[问题](https://stackoverflow.com/q/12360262/180538)，目标是动态获取硬编码的东西。这不完全是您的应用程序类型，但我回答背后的基本思想应该为您提供正确的方向。`

# javascript - jQuery图像幻灯片在停止后淡入第一张图像

> ID：12378344
> 
> 赞同：0
> 
> 时间：2012-09-11T21:42:09.563
> 
> 标签：javascript, jquery, slideshow

我正在尝试构建一个图像幻灯片，该幻灯片在停止后淡入第一张图像，但我不明白。有人会这么好心地指出我的解决方案吗？

这是代码：[http ://codepen.io/peterschmidler/pen/hFHtJ](http://codepen.io/peterschmidler/pen/hFHtJ)

非常感谢！

附言

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:53:00.150

代码：[http ://codepen.io/anon/pen/zJFcj](http://codepen.io/anon/pen/zJFcj)

```
if (context.hasClass("stopshow")) {
   next = context.find('.images img:first');  
   stopshow = true;
}else{
   next = next.length ? next : context.find('.images img:first');
} 
```

在这里，我们只是检查类`stopshow`是否存在，并使用一个简单的`if`语句来操作我们对`next`.

然后在动画回调中，我们只在`stopshow`变量不为真时重复

```
if(!stopshow) filesCrossfade(context) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:49:55.893

为什么要重新发明轮子？试试著名的 jQuery 循环幻灯片插件。它是轻量级的，适用于移动设备，非常容易实现，并且有许多非常有用的自定义选项。见[这里](http://jquery.malsup.com/cycle/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T22:02:58.653

```
$(document).ready(function(){

  function filesCrossfade(context) {
    if (context.hasClass("stopshow")) {
      context.find('.images img.active').removeClass('active').delay(500).fadeOut(500);
      context.find('.images img:first').addClass('active').delay(500).fadeIn(500);
      return;

    }

    if (context.find('.images img').length > 1) {

      var active = context.find('.images img.active');
      var next = active.next();
      next = next.length ? next : context.find('.images img:first');
      active.removeClass('active').delay(500).fadeOut(500);
      next.addClass('active').delay(500).fadeIn(500, function() {
        filesCrossfade(context) });

    }

  }

  $(".content .slideshow").each(function(){
    $(this).find('.images img').hide();
    $(this).find('.images img').eq(0).fadeIn(500);

  });

  filesCrossfade($(".content .slideshow").eq(0));

  $('.stop').click(function(){
    $(".content .slideshow").eq(0).addClass("stopshow");
  });  

}); 
```

# c - D-Bus 列表名称

> ID：12378350
> 
> 赞同：1
> 
> 时间：2012-09-11T21:42:45.490
> 
> 标签：c, dbus, gio

如何使用 C 列出 D-Bus sessionBus 中的所有名称？

我正在寻找[dbus.list_names python 方法的](http://dbus.freedesktop.org/doc/dbus-python/api/dbus.bus-pysrc.html#BusConnection.list_names)[C GIO](http://developer.gnome.org/gio/stable/gdbus-lowlevel.html)等效项

我想列出 «org.mpris.MediaPlayer2» 中的所有名称，例如 «org.mpris.MediaPlayer2.clementine, org.mpris.MediaPlayer2.someotherplayer, ...»

有一个名为 «qdbusviewer» 的应用程序执行类似的操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:50:42.593

关于接口名称、方法和参数的信息应该在[introspection 部分](http://developer.gnome.org/gio/stable/gio-D-Bus-Introspection-Data.html)。

`org.mpris.MediaPlayer2`您可以使用[g_dbus_node_info_lookup_interface ()](http://developer.gnome.org/gio/stable/gio-D-Bus-Introspection-Data.html#g-dbus-node-info-lookup-interface)方法请求有关接口的信息（例如） ，您可以为其提供一个`GDBusNodeInfo`参数，该参数应包含您要查询的 dbus 对象的路径。

通过这个调用，您可以返回一个[GDBusInterfaceInfo](http://developer.gnome.org/gio/2.26/gio-D-Bus-Introspection-Data.html#GDBusInterfaceInfo)对象，该对象包含有关所请求接口的方法和参数的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T23:40:28.120

此任务没有特定的 GIO 方法，

总线名称可以通过调用 « [org.freedesktop.DBus.ListNames](http://dbus.freedesktop.org/doc/dbus-specification.html#bus-messages-list-names) » 来列出，过滤必须稍后完成。

[可以使用自省](http://developer.gnome.org/gio/stable/gio-D-Bus-Introspection-Data.html)方法获取有关总线的信息。

# java - 如何在java中从数据库中生成实体类

> ID：12378354
> 
> 赞同：1
> 
> 时间：2012-09-11T21:42:55.550
> 
> 标签：java, .net, orm, entity, pojo

我已经习惯于从 .net 中的数据库生成实体类。但是最近我开始研究 java 并且我一直在寻找方法来使用 hibernate 或任何其他 ORM 工具来做同样的事情。我还没有找到一种方法来做同样的事情，我发现的只是生成 xml 映射或使用 java 注释。

我在这里遗漏了什么吗，它曾经是.net 中的一种非常简单的方法。你找出你的数据模型，创建一个数据库，然后使用实体框架生成实体类。它还负责为外键映射生成类。

另一方面，在 java 中，我必须手动映射所有表及其字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:52:18.560

这是你要找的东西吗？

[http://www.wikihow.com/Generate-Hibernate-Pojo-Classes-from-DB-Tables](http://www.wikihow.com/Generate-Hibernate-Pojo-Classes-from-DB-Tables)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:12:29.020

如果 Spring Roo 和 Spring Roo 满足您的需求，Spring Roo 的 DB 逆向工程插件[Spring Roo DBRE可以做到这一点。](http://static.springsource.org/spring-roo/reference/html/base-dbre.html)生成外键映射对我也很有效。Spring Roo 还提供了 web 脚手架生成。

# ruby-on-rails-3 - 无法索引 link.title 和 link.description 因为“链接”似乎与 Thinking Sphin 中的某些内容冲突

> ID：12378355
> 
> 赞同：0
> 
> 时间：2012-09-11T21:43:02.430
> 
> 标签：ruby-on-rails-3, thinking-sphinx

我有以下 define_index 方法：

define_index 索引内容索引 tags.content, :as => :tag_content 索引 link.title

```
has :is_private
has :user_id
has :created_at 
```

结尾

当我索引时，我收到以下错误：警告：不推荐使用对 Rake DSL 方法的全局访问。请将 ... Rake::DSL 包含在使用 Rake DSL 方法的类和模块中。警告：在 /Users/azamtaghipoor/pakrat/Pakrat/app/models/user_post.rb:64:in 'block in' rake 中调用的 DSL 方法 ThinkingSphinx::Index::Builder#link 已中止！参数数量错误（1 对 2）

我已经尝试过 :link, :link:title :link.title 和类似的变体

没有索引 link.title 一切正常。任何帮助将不胜感激谢谢， Soheil

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:16:29.717

找到了答案：

```
indexes assoc(:link).title, :as => :link_title 
```

来自[https://groups.google.com/forum/?fromgroups=#!topic/thinking-sphinx/aLkuwVzJSgg](https://groups.google.com/forum/?fromgroups=#!topic/thinking-sphinx/aLkuwVzJSgg) 由 pat allen 提出的问题：索引 link.title 由于名称冲突而导致错误与一些思考 sphinx 方法

# hadoop - Hadoop Streaming 和多个 reducer 步骤，每个步骤之间没有映射器

> ID：12378360
> 
> 赞同：4
> 
> 时间：2012-09-11T21:43:13.367
> 
> 标签：hadoop, streaming, mapreduce, mapper

我正在排除如何对数据进行多次排序而不必每次都返回映射器的问题。

我想设置：mapper 1 --> reducer 1 ---> reducer 2 ---> reducer 3

我想让减速器 1 输出（键、数据），然后让它直接进入减速器 2……这可能吗？

我从故障排除中了解到您可以链接作业，但这需要每个步骤的映射器？

每当我尝试在没有映射器的情况下运行时，它都会以错误结束。如果我可以根据需要从减速器 1 输出它，那么似乎为每个步骤运行映射器将浪费时间/资源。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:34:26.397

简而言之，如果您使用的是 Java，ChainReducer 和 ChainMapper 就是您所需要的。使用这些类，您可以按任意顺序在链中添加任意数量的 reducer 或 mapper。

“Hadoop in Action”一书在第 5 章中描述了这个过程。

# paypal - 如何保护数字商品免遭拒付

> ID：12378369
> 
> 赞同：14
> 
> 时间：2012-09-11T21:43:45.220
> 
> 标签：paypal, fraud-prevention

好的，我要谈谈贝宝。原因是很难获得一个接受您销售数字商品的商家帐户。因此，出于这个原因，贝宝是唯一简单的选择。

我发布这个的原因是有很多关于退单和贝宝的旧信息。我想我会在这里分享我的发现，这样比我了解更多的人可以指出任何错误。

**要点：**

PayPal 不保护涉及无形商品的买家或卖家。

**这意味着什么：**

这里重要的一点是 PayPal 不保护买家或卖家。这意味着如果有人试图通过 PayPal 对您提供的无形产品/服务进行退款。您只需要告诉 PayPal 是无形商品，该案件应该结案。

但是，正如您所读到的，人们总是会在涉及 PayPal 的退单案件中败诉。这归结于这样一个事实，虽然 PayPal 不会为无形商品的买家提供保护，但用于购买该产品的信用卡公司会。所以退单实际上是信用卡公司从 PayPal 拿钱，然后 PayPal 从你那里拿钱。在这种情况下，您似乎无能为力，只能接受它。

信用卡公司执行退款的原因有很多。其中一个大问题是被盗的信用卡。这是我最担心的一个。

但这让我想到，在英国，很多网站都使用“3D Secure”，这基本上是一个额外的安全层，这意味着每次使用信用卡时都必须输入密码。这意味着将责任从商家转移到卡公司。

经过一番挖掘，我发现 PayPal 确实以 Visa 验证和 MasterCard SecureCode 的形式提供买家身份验证（与 3D 安全几乎相同。

出色的！然后，这大大降低了成为信用卡被盗受害者的风险。但由于很多人不想要额外的步骤，它会减少销售额。

但它没有帮助的是人们出于其他原因进行退款。例如“我没有拿到该物品”、“它与描述的不一样”、“我只是个小混蛋，只想骗你”。

**好的，考虑到这一切，这是我的问题：**

1) PayPal 不会保护您免受数字商品的信用卡拒付。但这是否意味着您不能尝试直接向信用卡公司提供证据？

2) 您是否可以提供任何形式的保证证据，证明有人购买并使用了您提供的无形商品/服务，信用卡公司可以接受。（最好不要依赖传真个人资料）

# ruby-on-rails - 无法让复选框数组提交

> ID：12378383
> 
> 赞同：0
> 
> 时间：2012-09-11T21:45:07.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我有以下表格（截断）

```
 <%= form_for(daysevent, :html => { :class => "form-inline"} ) do |f| %>
    <fieldset>
    <div class="control-group">
        <%= f.label :start_date, :class => 'control-label' %>
        <div class="controls">
          <%= f.text_field :start_date, 'data-behavior' => 'datepicker1' %>
        </div>
      </div>
      <div class="control-group">
        <%= f.label :end_date, :class => 'control-label' %>
        <div class="controls">
          <%= f.text_field :end_date, 'data-behavior' => 'datepicker2' %>
        </div>
      </div>
    Locations for this date:<br/>
    <% daysevent.event.locations.each do |l|%>         
        <%= check_box_tag 'location_ids[]', l.id, true -%><%= h l.name -%><br/>    
    <% end %> 
    <%= f.submit 'Create Date' %>
    </fieldset>
    <% end %> 
```

我正在尝试在 ID 数组中获取位置复选框列表，但它不起作用，在我的创建方法中 return render :text => params[:days_event] 只是返回 start_date 和 end_date。我只做了几个月的rails，所以它可能很简单，但对他的赞赏都有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:41:37.447

您不是在 中发送复选框的值，`params[:days_event]`而是在`params[:locations_ids]`. 您可以检查调试输出`rails server`，您将看到已解析的`params`哈希。

如果您想发送它们，请将复选框更改为：

```
<%= check_box_tag "days_event[location_ids][]" .... %> 
```

# c# - 调用 url 的 Webservice 方法

> ID：12378386
> 
> 赞同：2
> 
> 时间：2012-09-11T21:45:16.777
> 
> 标签：c#, web-services, asmx, webmethod

我有一个 web 服务，它有它的 wsdl，当我调用我的 web 服务时一切正常。

我现在要做的是从我的网络服务方法中的某个地方调用一个 url。在后面的 c# 代码中，我可以这样做：

```
Response.Redirect("Insurance.aspx?fileno1=" + txtFileNo1.Text + "&fileno2=" + txtFileNo2.Text + "&docid=" + Convert.ToString(GridView1.SelectedDataKey[2])); 
```

但 Response.Redirect 选项在 asmx 页面上不可用。

这样的事情可能吗？如果是这样，那么任何人都可以告诉我如何。我试过到处搜索，但只能找到有关调用 Web 服务或在另一个 Web 服务中调用 Web 服务的信息，但没有关于从 Web 服务中调用 url 的此类主题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T22:01:20.553

该`Response.Redirect`方法向浏览器发送状态码 300，将用户引导至新页面。您要做的是创建一个`WebRequest`并解析响应：

```
string url = string.Format("www.insuranceini.com/insurance.asp?fileno1={0}", txtfileno1);
WebRequest request = HttpWebRequest.Create(url);
using(WebResponse response = request.GetResponse())
{
    using(StreamReader reader = new StreamReader(response.GetResponseStream()))
    {
        string urlText = reader.ReadToEnd();
        //Do whatever you need to do
    }
} 
```

编辑：我将 WebResponse 和 StreamReader 对象包装在 using 语句中，以便在使用完它们后正确处理它们。

# django - django 活塞无法写入 rc.BAD_REQUEST

> ID：12378391
> 
> 赞同：1
> 
> 时间：2012-09-11T21:45:35.377
> 
> 标签：django, django-piston

截至昨天，我有 django 1.4 和 pip 的最新活塞（我试图获得该版本，但我不知道如何）

当我尝试写入 rc.BAD_REQUEST 时，一切似乎都运行良好。当我尝试返回 rc.BAD_REQUEST 时，它工作正常。但是当我这样做时

```
resp = rc.CREATED
resp.write("Everything went fine!")
return resp 
```

我收到以下错误

```
AttributeError at /car/api/model-lookup-model.json/allard/1956/

'HttpResponseServerError' object has no attribute '_is_string'

Request Method:     GET
Request URL:    http://127.0.0.1:8000/car/api/model-lookup-model.json/allard/1956/
Django Version:     1.4.1
Exception Type:     AttributeError
Exception Value:    

'HttpResponseServerError' object has no attribute '_is_string'

Exception Location:     /Users/mo/Projects/pythonic/garenv/lib/python2.7/site-packages/piston/resource.py in __call__, line 184
Python Executable:  /Users/mo/Projects/pythonic/garenv/bin/python
Python Version:     2.7.2 
```

不太确定出了什么问题，我有相同的处理程序在不同的项目上工作正常，但它的 1.3 .. 有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T19:30:22.850

这显然在 django-piston 的源代码树中已修复 [1]。您可以尝试使用 pip 安装它，如下所示：

```
pip install hg+https://bitbucket.org/jespern/django-piston 
```

[1] [https://bitbucket.org/jespern/django-piston/changeset/7c90898072ce9462a6023bbec5d408ad097a362b](https://bitbucket.org/jespern/django-piston/changeset/7c90898072ce9462a6023bbec5d408ad097a362b)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T22:15:58.003

我尝试在 Mac OS（小牛队）上执行“pip install hg+https://bitbucket.org/jespern/django-piston”，但没有成功。我收到此错误消息：

> 下载/解压 hg+https://bitbucket.org/jespern/django-piston
> 
> 克隆 hg https://bitbucket.org/jespern/django-piston 到 /var/folders/kr/06j9n8kj2fd0dbfs0_sf54q00000gn/T/pip-PwNUCl-build
> 
> 打扫干净...
> 
> 找不到命令“hg”
> 
> 在 /Users/marcelosoares/.pip/pip.log 中存储失败的调试日志

更新：

之前需要卸载django-piston并且需要已经安装了Mercurial。我刚刚安装并工作：

> [https://www.mercurial-scm.org/downloads](https://www.mercurial-scm.org/downloads)

# javascript - 检测非移动页面上的移动设备屏幕宽度和高度

> ID：12378404
> 
> 赞同：1
> 
> 时间：2012-09-11T21:46:53.440
> 
> 标签：javascript, css, height, width

我在未格式化为移动设备的页面上有一个 div 元素。不过，我不想将此页面格式化为对移动设备友好。单击时，div 会扩展到移动设备的大小。这在 div 位于空白页面上时有效，但当 div 在充满内容的页面上时不起作用。我尝试使用多种方法来检测屏幕或窗口的高度/宽度，但它永远无法正确缩放。我认为正在发生的是：

div 正确检测设备的像素宽度和高度 - 因此对于 Droid Razr Maxx，它检测到 540x960 的纵向。因为这是一个非移动网站，所以该网站被格式化为缩小视图。我不想调整实际网页的缩放机制，因此 div 被格式化为 540x960，但相对于文档的大小 - 而不是实际的屏幕。

我需要做的是检测可见帧的像素大小，并将 div 调整为相对于屏幕而不是页面的大小。或者我需要在缩小模式下检测页面的大小 - 然后缩放到那个？

不幸的是，我目前无法提供示例代码。

有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:07:57.740

没有示例代码很难确切地知道您要完成的工作，但我将解释我的理解以及可能的解决方案。

听起来您有一个元素，当单击该元素时，它会扩展到屏幕的宽度。但是，在手机中，屏幕！= 页面。无论缩放级别如何，您都希望元素仅保持与屏幕一样宽。

如果我理解正确，那么听起来您可能需要创建一些 jQuery（或 POJS）来调整窗口大小而不是页面大小。window.innerWidth 属性在用户缩放时更新。您可以使用此值而不是 clientWidth 或任何类似值。

这是使用 window.innerWidth 获取缩放级别的示例：

[在 Safari 中使用 jQuery 检测页面缩放变化](https://stackoverflow.com/questions/6163174/detect-page-zoom-change-with-jquery-in-safari)

# c# - Mono 和 .NET dll 可互换性

> ID：12378406
> 
> 赞同：2
> 
> 时间：2012-09-11T21:46:54.453
> 
> 标签：c#, .net, mono

单声道库是否完全可以从 MS.NET 引用？

反过来呢？

如果“排序”，那么哪些，以及有什么限制？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T21:50:17.913

是的，Mono 编译器生成与 .NET 框架兼容的二进制文件，反之亦然。

AFAIK 的唯一限制是托管 C++：

1.  Mono 编译器没有用于此的编译器。
2.  此语言的 MS.NET 编译器生成无法在 Mono 中运行的混合模式程序集。

（有关托管 C++ 的更多信息，[请参阅其他 stackoverflow 问题](https://stackoverflow.com/questions/183377/does-mono-net-support-and-compile-c-cli)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:10:04.790

文件格式是相同的（对于完全托管的库，请参阅 knocte 的答案），因此理论上 Mono 库完全可以从 .NET 引用（反之亦然）。

在实践中，它取决于库的内容。如果您在库中编写纯 Linux 代码，它当然不会在 .NET 上运行。这也是唯一的潜在问题，如果您编写独立于平台的代码，您可以使用 Mono 的 mcs 编译器或 Microsoft 的 csc 编译器，并在任一平台上使用生成的库而不会出现问题。

# java - 按下 Jbutton 后在 Jbutton 上设置文本

> ID：12378410
> 
> 赞同：-2
> 
> 时间：2012-09-11T21:47:29.587
> 
> 标签：java, user-interface, jbutton, actionlistener, minesweeper

我是 Java （以及几乎所有语言）的大菜鸟。我正在尝试为一项任务制作扫雷游戏，但我仍处于测试阶段。但是，一旦按下按钮，我就无法将地雷显示为“0”。我使用二维数组创建了 Jbuttons，但我似乎无法将“0”放在我想要的特定按钮上。

这是我的代码（请原谅丑陋/可能的低效率）当谈到 GUI 时我真的一无所知。

```
import java.awt.*;
import javax.swing.*;
import java.awt.GridLayout;
import java.awt.event.*;
import java.awt.geom.*;
import javax.swing.event.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JOptionPane;
import javax.swing.JFrame;

public class Grid extends JPanel {
    // Initializes rows,columns and mines
    int rows = 10;
    int cols = 10;
    int i, j = 0;
    int mines = 10;
    boolean[][] setmine = new boolean[rows][cols];
    boolean[][] clickable = new boolean[rows][cols];
    private JToggleButton squares[][], squares2[][];

    // Contructor for creating a grid(with default size 400x400
    public Grid() {
        this.setSize(600, 600);
        this.setLayout(new GridLayout(rows, cols));
        squares = new JToggleButton[rows][cols];
        buildButtons();
    }

    private void buildButtons() {
        // loops are used for creating the "buttons" on the grid.
        int MinesNeeded = 10;
        // builds buttons
        // ----------------------------------------
        for (i = 0; i < rows; i++) {
            for (j = 0; j < cols; j++) {
                squares[i][j] = new JToggleButton();
                // squares[i][j].setEnabled(false);
                squares[i][j].setSize(600, 600);

                // --------------------------------------------------
                // This part randomises the mines
                // -----------------------------------------------------
                while (MinesNeeded > 0) {

                    int x = (int) Math.floor(Math.random() * rows);
                    int y = (int) Math.floor(Math.random() * cols);
                    if (!setmine[x][y]) {
                        setmine[x][y] = true;

                        MinesNeeded--;
                    }
                }
                // ----------------------------------------------------------------------------

                this.add(squares[i][j]);

                if (setmine[i][j] == true) {

                    squares[i][j].addActionListener(new ActionListener() {
                        public void actionPerformed(ActionEvent ae) {
                            // this is the problem
                            squares[i][j].setText("0");
                        }
                    });
                }
            }
        }
    }

    public static void main(String[] args) {
        Grid g = new Grid();
        JFrame frame = new JFrame("Minesweeper");

        frame.add(g);
        frame.setSize(600, 600);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:20:55.373

我的建议是不要为数字显示 JButton，而是让我的单元格使用 CardttLayout，以便它最初显示一个 JButton，然后在按下时显示一个 JLabel。我在 stackoverflow 上有一个示例，我将搜索并通过链接回复您。

这是链接：[扫雷行动事件](https://stackoverflow.com/a/7016492/522444)

这里有一个链接更详细地解释了我的一些代码：[需要我的扫雷程序帮助吗？](https://stackoverflow.com/questions/7460650/need-help-with-my-minesweeper-program)

如果您运行该程序，您将看到如下所示的初始屏幕：

![扫雷1](../Images/e49a17d6a6b2931c907380a561750b8f.png)

按下空方格后，您会看到所有空方格的清除：

![扫雷2](../Images/a16502ec2b8f6fdfe5c745145f9dc178.png)

击中炸弹后，您会看到所有炸弹出现：

![扫雷3](../Images/e607caff399bbaca8303465aba921875.png)

# ajax - 使用模型的部分视图，使用 Ajax 更新它

> ID：12378412
> 
> 赞同：0
> 
> 时间：2012-09-11T21:47:33.883
> 
> 标签：ajax, asp.net-mvc, model, asp.net-mvc-partialview

我有一个使用模型的局部视图。部分视图是空的，除了一个文本框和一个按钮。

用户将在文本框中键入一个值并单击该按钮。

我想使用**Ajax**获取在文本框中输入的值，并在数据库上执行搜索。然后使用返回的数据，使用模型更新局部视图。

到目前为止我的代码 -

```
<input id="searchValue" type="text" />   
<input id="searchButton" type="submit" value="submit" />

<div>
@if(Model != null)
{
    foreach(var stuff in Model.ListOfStuff)
    {
        <li>@stuff.value</li>  
    }
}
</div> 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T01:17:34.017

本文将为您提供帮助，只需按照他们的做法并将他们的概念应用到您的代码中：[Updating Partial Views with Unobtrusive AJAX in MVC 3](http://geekswithblogs.net/blachniet/archive/2011/08/03/updating-partial-views-with-unobtrusive-ajax-in-mvc-3.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T01:33:54.793

为您的 Result Div 提供一个 ID，以便我们稍后通过 jQuery 进行更新。

```
<div id="resultDiv">
    <ul></ul>
</div> 
```

现在添加这个javascript代码

```
$(function(){
  $("#searchButton").click(function(e){
     var key=$("#searchKey").val();
     $.getJSON("@Url.Action("search","Items")/"+key,function(data){
        var items="";
        $.each(data,function(index,item){
            items+="<li>"+item.Name+"</li>;
        });
        $("#resultDiv>ul").html(items);
     });
  });
}); 
```

现在我们应该有一个动作方法，它接受搜索键并以 JSON 格式返回结果。

```
public ActionResult Search(string id)
{
  List<Product> productList=repo.GetSearchResultFromKey(id);
  return Json(productList,JsonRequestBehaviour.AllowGet);
} 
```

假设我们有一个`Product`如下所示的视图模型，并且我们的`GetSearchResultFromKey`方法从我们的搜索键返回 Product 类的集合。

```
public class Product
{
  public string Name { set;get;}
} 
```

我们在这里所做的是，当用户单击搜索按钮时，我们获取搜索键并调用搜索操作方法，该方法将返回`JSON`格式的产品列表。我们正在遍历`JSON`响应中的项目并创建`li`项目并将其添加到`ul`元素中。

确保页面中包含 jQuery。

# css - CSS：“+”和“-”图标仅在打开手风琴时显示为“-”

> ID：12378418
> 
> 赞同：0
> 
> 时间：2012-09-11T21:47:57.750
> 
> 标签：css, html, jquery-mobile

如下所示：

[对齐顶部 http://www.kerrydeaf.com/aa.png](http://www.kerrydeaf.com/aa.png "工具提示")

问题：当我点击手风琴打开时，你可以看到'+'和'-'图标同时出现。这是因为文本标题分散到两行。只有一行就可以了。

[对齐顶部 http://www.kerrydeaf.com/bb.png](http://www.kerrydeaf.com/bb.png "工具提示")

如何强制“+”和“-”图标仅在打开时显示为“-”。

我使用 jQuery 1.7，它适用于 iPhone。

这是CSS：

```
 .trigger {padding:0px;margin:0; background:url(../images/toggle_small.svg) no-repeat right; background-position:100% -20px; } 
  .trigger a{color: #636363;text-decoration: none;display: block; padding:2px 0 2px 0;font-size:16px;font-family:opensans;font-weight:normal; } 
```

HTML：

```
 <div class="toogle_wrap">
        <div class="trigger"><a href="#"><span class="trig">8.</span> lorem lorem lorem lorem lorem lorem lorem lorem</a></div>
        <div class="toggle_container">
        <ul class="lists">
        <li>Lorem ipsum consectetur adipisicing elit</li>
        <li>Lorem ipsum consectetur adipisicing elit</li>
        <li>Lorem ipsum consectetur adipisicing elit.</li>
        </ul>
        </div>
    </div> 
```

JS：

```
<script type="text/javascript">
     var $ = jQuery.noConflict();
     $(function() {
         $('#tabsmenu').tabify();
         $(".toggle_container").hide(); 

         $(".trigger").click(function(){
         $(this).toggleClass("active").next().slideToggle("slow");
         return false;
         });
     });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:06:42.727

您正在使用精灵

```
+-----+
|  -  |
|  +  |
+-----+ 
```

当标题分成两行时，精灵的其他部分“流血”到视图中。您只需要增加精灵的单个部分之间的填充。

```
+-----+
|  -  |
|     |
|     |
|  +  |
+-----+ 
```

这仅在打开时发生，因为打开图标位于关闭图标上方。

如果你不想编辑精灵，你可以引入一个额外的元素来保存图标并声明一个固定的高度并在其上隐藏溢出。

```
<div class="toogle_wrap">
        <div class="trigger"><a href="#">...<span class="open"></span></a></div> 
```

```
.open{
   background:      /* declare your background-image here*/
   height:          /* exact height of the - sign*/
   overflow:hidden; /* prevent bleeding*/
} 
```

在关闭状态前做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:34:55.263

我建议使用另一个精灵

此版本适用于各种身高，与 Christoph 的解决方案不同

```
+----------+
|  -       |
|          |
|          |
|       +  |
+----------+ 
```

# python - 使用多处理混淆修改传入的对象

> ID：12378421
> 
> 赞同：0
> 
> 时间：2012-09-11T21:48:19.107
> 
> 标签：python, multiprocessing, python-multithreading

我写了一个函数来修改传入的字典。但是，当我使用多处理模块并行化代码时，它表现出与串行运行时不同的行为。字典没有被修改。

下面附上我的问题的玩具示例。使用 map_async 运行时不会修改字典，但在 for 循环中运行时会修改字典。感谢您澄清我的困惑！

```
#!/usr/bin/env python

from multiprocessing import Pool

def main1(x):
  x['a'] = 1
  print x

  return 1

def main2(x):
  x['b'] = 2
  print x

p = Pool(2)
d = {1:{}, 2:{}}
r = p.map_async(main1, d.values())
print r.get()
print "main1", d

for x in d.values():
  main2(x)

print "main2", d 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:54:18.193

您正在更改 中的可变参数`main1`。但这发生在与运行池的进程不同的进程中。他们不共享数据。

运行时`map_async`，python将每次迭代的数据*复制*到工作进程，然后工作进程执行函数，收集*返回值*并将其传递回正在运行的进程`map_async`。它不会传回任何修改后的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T23:16:44.613

`r = p.map_async(main1, d.values())`做这个：

**1）**评估`d.values()`- 那是`[{}, {}]`
**2）**在池中的工作人员上执行`main1(item)`该列表中的每个项目
**3）**将这些调用的结果收集到一个列表中`[1, 1]`- 因为这就是`main1`返回的内容
**4）**将该列表分配给`r`

所以它完全按照内置函数[`map()`](http://docs.python.org/library/functions.html#map)的方式执行，但是以并行化的方式。

这意味着，您的 dict`d`永远不会进入任何工作进程，因为它不是对`d`传递给的引用`map_async`，因此是`main1`.

即使您传递对`d`- 的引用，由于@Roland Smith 解释的原因，它也不起作用。

关键是：你不应该首先修改字典。即使函数可以修改参数，在传统编程中也不是很好的风格。对于并行编程，遵循函数式编程风格绝对*至关重要，在这种情况下，这意味着：*

函数应该对其输入进行计算，并返回进一步处理的结果。

**map**和**reduce**函数在函数式编程中非常常见，它们结合在一起形成了一种非常适合分布式计算的模式。来自关于[MapReduce](http://en.wikipedia.org/wiki/MapReduce)的维基百科文章：

> **“映射”步骤**：主节点获取输入，将其划分为更小的子问题，并将它们分配给工作节点。工作节点可能会再次执行此操作，从而形成多级树结构。工作节点处理较小的问题，并将答案传回其主节点。
> 
> **“减少”步骤**：主节点然后收集所有子问题的答案，并以某种方式将它们组合以形成输出——它最初试图解决的问题的答案。

因此，为了有效地并行化您的程序，尝试根据这些功能考虑您的问题会有所帮助。

有关一个非常具体的示例，请参阅IEEE Spectrum 中[的多核问题一文。](http://spectrum.ieee.org/computing/software/the-trouble-with-multicore/0)它描述了[一种并行化 PI 计算的方法，该方法](http://spectrum.ieee.org/image/1627665)可以很容易地用 map/reduce 实现。

# sql - 如何获取Oracle表的最后一行

> ID：12378424
> 
> 赞同：37
> 
> 时间：2012-09-11T21:48:38.917
> 
> 标签：sql, oracle, oracle11g

我想获取最后一行，我将其插入到 Oracle 11g Express 数据库的表中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-11T22:01:30.447

表中没有“最后”行这样的东西，因为 Oracle 表没有顺序的概念。

然而，假设你想找到最后插入的主键*并且*这个主键是一个递增的数字，你可以这样做：

```
select *
  from ( select a.*, max(pk) over () as max_pk
           from my_table a
                )
 where pk = max_pk 
```

如果您有每行的创建日期，如果列名为`created`：

```
select *
  from ( select a.*, max(created) over () as max_created
           from my_table a
                )
 where created = max_created 
```

或者，您可以使用聚合查询，例如：

```
select *
  from my_table
 where pk = ( select max(pk) from my_table ) 
```

这是一个小[SQL Fiddle](http://www.sqlfiddle.com/#!4/18fd6/1)来演示。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-05-11T18:11:13.353

```
SELECT * FROM (
    SELECT * FROM table_name ORDER BY sortable_column DESC
) WHERE ROWNUM = 1; 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-09-24T03:42:58.230

```
select * from table_name ORDER BY primary_id DESC FETCH FIRST 1 ROWS ONLY; 
```

这是最简单的，不做子查询

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-12T12:59:07.367

最后一行根据复合键 K(k1, ..., kn) 上的严格总顺序：

```
SELECT  *
FROM    TableX AS o
WHERE   NOT EXISTS (
            SELECT  *
            FROM    TableX AS i
            WHERE   i.k1 > o.k1
                OR  (i.k1 = o.k1 AND i.k2 > o.k2)
                ...
                OR  (i.k1 = o.k1 AND i.k2 = o.k2 AND i.k3 = o.k3 AND ... AND i.kn > o.kn)
        )
; 
```

考虑到 K 是简单的（即不是复合的）的特殊情况，上面的内容被缩短为：

```
SELECT  *
FROM    TableX AS o
WHERE   NOT EXISTS (
            SELECT  *
            FROM    TableX AS i
            WHERE   i.k1 > o.k1
        )
; 
```

请注意，要使此查询仅返回一行，键必须在没有关系的情况下进行排序。如果允许关联，则此查询将返回与最大键关联的所有行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-01T13:12:42.877

你可以这样做：

```
SELECT * FROM (SELECT your_table.your_field, versions_starttime
               FROM your_table
               VERSIONS BETWEEN TIMESTAMP MINVALUE AND MAXVALUE)
WHERE ROWNUM = 1; 
```

或者：

```
SELECT your_field,ora_rowscn,scn_to_timestamp(ora_rowscn) from your_table WHERE ROWNUM = 1; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-28T16:03:55.000

```
SELECT * FROM 
  MY_TABLE
WHERE 
  <your filters>
ORDER BY PRIMARY_KEY DESC FETCH FIRST ROW ONLY 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-03-13T07:18:47.223

```
$sql = "INSERT INTO table_name( field1, field2 )  VALUES ('foo','bar') 
        RETURNING ID INTO :mylastid";
$stmt = oci_parse($db, $sql);
oci_bind_by_name($stmt, "mylastid", $last_id, 8, SQLT_INT);
oci_execute($stmt);

echo "last inserted id is:".$last_id; 
```

* * *

**提示：**您必须在下面的 {your_id_col_name} 中使用您的 id 列名...

```
"RETURNING {your_id_col_name} INTO :mylastid" 
```

# objective-c - 如何从objective-c中调用的方法中获取参数

> ID：12378425
> 
> 赞同：-3
> 
> 时间：2012-09-11T21:48:43.813
> 
> 标签：objective-c, ios

你如何从 C/C++ 等中调用这样的东西：

执行：

```
int foo(int a, int b)
{
    a += b;
    return a;
} 
```

称呼：

```
int newNumber = foo(1,2); 
```

我想知道这部分：

执行：

```
-(int) foo: (int)a addTo: (int)b
{
    a += b;
    return a;
} 
```

称呼： ？？？

但是你如何在同一个类的另一个方法中调用这个方法并检索它呢？

我提前道歉这是公然在文档或另一个问题中 - 我想我需要一些额外的帮助。：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:50:39.837

在类实例（如您的情况）或类上调用目标 C 方法，如下所示：

```
int res = [self foo:1 addTo:2]; 
```

或者如果它是其他对象的方法：

```
int res = [theObject foo:1 addTo:2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:50:01.253

你可以做`[self foo:1 addTo:2];`

# android - Android 和 iPhone/WinPhone 的开发

> ID：12378431
> 
> 赞同：0
> 
> 时间：2012-09-11T21:44:43.747
> 
> 标签：android, ios, html, windows-phone-7, cross-platform

我从两个不同的来源向我建议，可以使用 HTML5 为所有三个主要的移动设备平台进行开发。显然，根据他们的说法，一个人可以同时编写代码并部署到所有三个。

现在，我的印象是 iPhone 是 C++ 和 WinPhone C#，而 Android 是由 Java 驱动的。我错了多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T22:26:45.003

有框架可以做这样的事情。看看[PhoneGap](http://phonegap.com/)、[MoSync](http://www.mosync.com/)、[Sensha Touch](http://www.sencha.com/products/touch)或[Apache Cordova](http://incubator.apache.org/cordova/)之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:59:23.160

最简洁的答案是不。但是，您可以使用 HTML5 开发一个网页，该网页的外观和行为都类似于可同时适用于所有平台的应用程序。但这在任何意义上都不是一个应用程序，只是完成工作的一种廉价方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T23:26:16.447

是的，您可以使用 html5 来开发网页应用程序，但如果您不想将其用于不同操作系统上的应用程序：请尝试 corona。

* * *

我更喜欢使用 Xcode 进行 iOS 开发，但我听说 corona 非常适合跨平台编程并且易于使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T13:25:35.603

事实上，答案是肯定的。您可以使用 MoSync SDK（例如）在 C++ 中创建应用程序，它将构建到 Android ARM 代码，或使用 Xcode 和 Visual Studio（在后台）创建本机应用程序。

您可以使用 HTML 和 JavaScript 创建本机应用程序。HTML 用作创建本机小部件的声明性 API。您将获得实际的原生小部件，而不仅仅是看起来像原生小部件的 HTML。

# c# - C# 转换动作 到拉姆达

> ID：12378434
> 
> 赞同：1
> 
> 时间：2012-09-11T21:49:39.850
> 
> 标签：c#, lambda

我有以下代码：

```
int[] iArray = new int[] { 2, 3, 4 };
Action<int> action = new Action<int>(ShowSquares);
Array.ForEach(iArray, action);

private static void ShowSquares(int val)
{
    Console.WriteLine("{0:d} squared = {1:d}", val, val * val);
} 
```

虽然此代码有效，但我想转换第二行

```
Action<int> action = new Action<int>(ShowSquares); 
```

使用 lambda 表达式。

这可能吗？

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:57:25.173

```
int[] iArray = new int[] { 2, 3, 4 };
Array.ForEach(iArray, val => Console.WriteLine("{0:d} squared = {1:d}", val, val * val)); 
```

生成的 lambda 将与您的`ShowSquares`方法相同。只要`action`以后不需要使用，可以在`ForEach`方法中内联声明，而不是先声明动作。此外，作为了解委托和 lambda 的练习，这很好，但在实践中，我建议：

```
int[] iArray = new int[] { 2, 3, 4 };
foreach (var val in iArray)
    Console.WriteLine("{0:d} squared = {1:d}", val, val * val)); 
```

或者，如果最后一行将在其他地方重用，则将其分解为一个`ShowSquares`方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T22:00:07.860

```
Action<int> action = (a) => ShowSquares(a); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T22:01:57.843

```
Array.ForEach(iArray, i=>ShowSquares(i)); 
```

# ios - 多个 iOS 分发证书问题

> ID：12378438
> 
> 赞同：4
> 
> 时间：2012-09-11T21:50:03.097
> 
> 标签：ios, certificate, distribution

我们有一个分发证书，该证书将在 11 月到期。为了在签署我们当前的应用程序时取得进展，一位同事继续创建了第二个证书。

不幸的是，自从下载此证书后，我在使用终端时无法使用旧证书或新证书签署应用程序。每次我尝试在终端中签署应用程序并且钥匙串中都存在两个证书时，我都会收到错误消息：

`iPhone Distribution: XXXX: ambiguous (matches "iPhone Distribution: XXXX and iPhone Distribution: XXXX in /Users/applicatonsigning/Library/Keychains/login.keychain)`

此外，如果我删除证书/私钥并尝试单独使用旧证书或新证书，则会收到以下错误：

```
XYZ.app: object file format unrecognized, invalid, or unsuitable. 
```

因此，到目前为止，我已经撤销并重新分配了我的 Apple Developer Cert，并尝试在我的 MAC 上创建一个配置文件以仅用于签名。此外，根据我的钥匙串，这两个证书都是有效的并且有关联的私钥。

不幸的是，我完全不知道下一步该做什么。我需要尽快开始辞职应用程序，但我不能。

关于如何签署我的申请有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:14:22.370

由于您已经尝试了所有可能的方法，我建议您尝试全新安装。

(1) 转到您的配置门户并撤销您的所有分发证书。（不用担心。它不会影响 App Store 上已经存在的任何内容）。

(2)在您的 Xcode Organizer 窗口中，仅从您的 Organizer 窗口刷新并删除所有分发证书。（而不是从配置门户。）

(3)在您的“钥匙串访问”中，删除/删除所有分发证书。

(4)根据供应门户上的说明创建新的分发证书并提交。

(5) 修改供应门户上的所有分发配置文件，并确保它们使用新的分发证书。

(6) 下载新的分发证书并安装它，使其出现在 Keychain Access 上。（在任何时候，您的 Keychain Access 上都应该有多个分发证书）

(7)通过Xcode登录开发者门户刷新Xcode Organizer。

(8) 在 Xcode 中安装新的分发证书，如果它还没有的话。

(9) 使用新的分发配置文件并干净地构建您的应用程序。这应该有效。

# php - 请求准备文件和返回路径，准备好后允许用户下载

> ID：12378440
> 
> 赞同：1
> 
> 时间：2012-09-11T21:50:10.693
> 
> 标签：php, javascript, node.js, asynchronous

### 场景和问题描述：

1.  用户请求文件到服务器
2.  文件很大，所以需要时间来生成
3.  客户端正在运行微调器以显示我们正在制作文件。
4.  几分钟后，他们的代理超时，因为服务器没有响应查询（原因文件太大而无法生成）

### 我的理解 ：

在深入研究了这种情况之后，我发现客户的代理正在超时，我无法控制它。我唯一能做的就是改变客户端请求和下载文件的逻辑。

### 我想到的解决方案：

### 解决方案 1：

1.  用户请求文件

2.  服务器在服务器端创建一个临时文件，并创建一个http路径如

    http:\www.mydomain.com\temp\download\files\12342323.pdf

3.  该链接会更快地传递给客户，但它会在一定时间内保持不活动状态。

4.  一旦链接被激活，用户点击链接。

### 解决方案2：

我对此了解不多，但是是否可以通过 node.js 创建套接字连接并传输文件？

## 笔记：

解决方案 1 是我的头等大事，过去 4 小时内没有任何咖啡。我唯一被困在知识上的是。我将如何检测该文件是在服务器端完成的，现在我的 ajax 脚本可以启用链接或下载它。

请提出一些新想法来处理这种情况。无需直接回答。我宁愿知道使用哪种设备钓鱼，然后准备好鱼。:) 干杯。

仅供参考：我目前使用 php 和 javascript 作为工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T22:00:49.967

如果文件最终总是被创建，并且问题出在客户端，您可以执行以下操作：

1.  当用户单击下载时，您开始通过 AJAX 生成文件，并将名称存储在会话变量中，例如
2.  在客户端，最简单的解决方案是每 X 秒轮询一次服务器，并让它简单地检查文件是否存在（通过 php），以了解它是否已经创建
3.  完成后，使用 javascript 将用户重定向到文件的位置以使其下载。

然后你可以设置一个 cron 作业或类似的东西来删除已经下载的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:00:06.503

将生成文件的条件添加到队列中，然后将用户重定向到另一个页面。然后每分钟左右运行一个进程，从队列中读取并生成文件。创建文件后，通过电子邮件将链接发送给用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T22:04:00.213

我们已经通过超时请求完成了它，因为我们不需要整个推送服务器。那么它是如何工作的。

您创建了一个链接和一个**检查链接**。然后你开始向检查链接发送请求，这给你一个文件状态。对我来说 10 秒就足够了。在服务器端，您创建一个队列，完成后它会写入标志，您检查 url 说明成功生成并为客户端提供 url 重定向到文件。就是这样。

如果您的时间限制很短，并且您想说客户端尽快准备好该文件，您可以创建一个套接字连接。而不仅仅是向客户推送请求。

# asp.net - ASP.Net MVC 3 - 密码保护视图

> ID：12378445
> 
> 赞同：4
> 
> 时间：2012-09-11T21:50:29.233
> 
> 标签：asp.net, asp.net-mvc, passwords

视觉工作室 2010 - MVC 3

我有一个我想限制访问的 asp.net mvc 应用程序的管理部分。该应用程序不会使用帐户，因此我不会使用管理员角色或用户来授权访问。

我希望通过输入单个密码来访问该部分。本节将有许多操作。我已经设置了一个管理控制器，它重定向到许多不同的视图，所以基本上这个控制器控制的任何视图都需要受到限制。

我也希望密码只需要在会话中输入一次，因此当浏览器关闭并重新打开时，需要重新输入密码。

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-11T22:21:35.520

假设您有一个名为`Protected`（作为您的控制器）的视图文件夹，并且您有几个指向多个视图的操作，我会这样做：

*   用动作过滤器装饰控制器/动作，例如：`[SimpleMembership]`
*   在该操作过滤器上，只需检查会话变量的存在和内容
*   重定向到一个`SignIn`如果不是正确的

在代码中：

```
public class SimpleMembershipAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        //redirect if not authenticated
        if (filterContext.HttpContext.Session["myApp-Authentication"] == null ||
            filterContext.HttpContext.Session["myApp-Authentication"] != "123")
        {
            //use the current url for the redirect
            string redirectOnSuccess = filterContext.HttpContext.Request.Url.AbsolutePath;

            //send them off to the login page
            string redirectUrl = string.Format("?ReturnUrl={0}", redirectOnSuccess);
            string loginUrl = "/Protected/SignIn" + redirectUrl;
            filterContext.HttpContext.Response.Redirect(loginUrl, true);
        }
    }
} 
```

和你的控制器

```
public class ProtectedController : Controller
{
    [SimpleMembership]
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult SignIn()
    {
        return View();
    }
    [HttpPost]
    public ActionResult SignIn(string pwd)
    {
        if (pwd == "123")
        {
            Session["myApp-Authentication"] = "123";
            return RedirectToAction("Index");
        }
        return View();
    }
} 
```

如果你想装饰整个`controller`，你需要将`SignIn`方法移到外面才能到达那里，你需要经过身份验证。

* * *

**源代码：**

您可以**下载**简单的 MVC3 解决方案[http://cl.ly/JN6B](http://cl.ly/JN6B)或免费查看[**GitHub 上**](https://github.com/balexandre/Stackoverflow-Question-12378445)的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:05:35.453

我会使用表单身份验证。然后将 [Authorize] 属性添加到您要限制的控制器或单个操作。然后，您将需要一种登录方式等。[在此处](http://www.asp.net/mvc/tutorials/older-versions/security/authenticating-users-with-forms-authentication-cs)查找有关表单身份验证的信息希望对您有所帮助

您始终可以创建自己的身份验证系统，将用户名和密码保存在配置文件或数据库或其他东西中。您可以覆盖 [Authorize] 或创建自己的操作过滤器并按照您的意愿使用它。如果您不想进入完整的表单身份验证。

# c# - 当父对象在 NHibernate 中仍有引用时删除子对象

> ID：12378448
> 
> 赞同：0
> 
> 时间：2012-09-11T21:50:41.427
> 
> 标签：c#, nhibernate

我阅读[了这个关于我的问题的帖子，](https://stackoverflow.com/questions/302720/how-to-delete-child-object-in-nhibernate)但仍有疑问。

我有两个实体——一个订单和一个任务。订单与其子任务之间存在一对多的关系。

```
//Order.hbm.xml
<bag name="Tasks" table="Task" inverse="true" cascade="all-delete-orphan">
  <key column="OrderID" />
  <one-to-many class="Task, Orders" />
</bag>

//Task.hbm.xml
<many-to-one name="Order" column="OrderID" /> 
```

我想删除一个任务并让 NHibernate 保持我的订单同步。

我的第一次尝试产生了这个问题：

> 删除的对象将被级联重新保存

我通过在提交交易之前手动清理 Order 对 Task 的引用来解决这个问题：

```
public void DeleteTask()
{
    NHibernateSessionManager.Instance.BeginTransaction();
    //Need to remove Order's reference to Task before deleting so that Task is not resaved.
    Task.Order.Tasks.Remove(Task);
    TaskDao.Delete(Task);
    NHibernateSessionManager.Instance.CommitTransaction();
} 
```

不过，似乎这段代码应该能够由 NHibernate 的 XML 文件处理。这是一个正确的假设吗？我需要如何更改我的 NHibernate 配置，以便在删除任务时自动清理其父订单的引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T12:45:41.830

实际上，既然你有`cascade="all-delete-orphan"`，你可以不用显式`Delete()`：

```
public void DeleteTask()
{
    NHibernateSessionManager.Instance.BeginTransaction();
    Task.Order.Tasks.Remove(Task);
    NHibernateSessionManager.Instance.CommitTransaction();
} 
```

这更像是 DDD-ish，因为您可以在不引用 NH 的情况下从模型 itelf 进行更改，然后让 NH 的更改跟踪来处理删除。

# c# - 传递基类列表并获取具体类

> ID：12378450
> 
> 赞同：0
> 
> 时间：2012-09-11T21:50:52.087
> 
> 标签：c#, .net, oop, inheritance

我有两个从基类派生的具体类。与具体的 B 类相比，具体的 A 类有十个额外的属性。我有一个方法，其中一个参数是基类列表，如下所示：`List<baseClass>`. 在方法内部，我必须遍历列表，并转换为适当的具体类并访问属性。请让我知道如何实现这一目标。有什么好的设计模式可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:53:55.807

c# 有一个[GetType](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)方法，您可以查看它。

你也有`is`运营商

```
if (baseClass is derivedClass)
{
    // do what you will with derived class.
} 
```

但

一般来说，你所做的首先是一个糟糕的设计模式。当您遍历基类然后强制转换为派生类时，多态性的全部意义就消失了。

也许您可以在基类中创建一个方法来执行您需要执行的各种操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T09:40:48.453

我猜 C# 的[动态](http://msdn.microsoft.com/en-us/library/dd264741.aspx)类型在这里可以成为你的朋友。

```
class BaseClass {}

class ConcreteClass1 : BaseClass
{
    void Display1 () {}
}

class ConcreteClass2 : BaseClass
{
    void Display2 () {}
}

void Enumerate (List<BaseClass> baseItems)
{
    foreach (BaseClass baseItem in baseItems)
    {
        ConcreteAccessor ((dynamic)baseItem);
    }
}

void ConcreteAccessor (ConcreteClass1 concreteItem1)
{
    concreteItem1.Display1 ();
}

void ConcreteAccessor (ConcreteClass2 concreteItem2)
{
    concreteItem2.Display2 ();
} 
```

这里的关键是每个具体类都有不同的重载，并使用***dynamic***以无缝方式调用其中一个。美妙之处在于，在运行时解决了重载问题，使您的代码看起来很干净。

因为它是运行时类型解析，所以不执行编译时验证。假设您错过了其中一种具体类型的重载，并且运行时将***baseItem***解析为该特定具体类型。然后它会导致运行时错误 - 崩溃 - 因为没有过载。

另一个问题是**动态**在引擎盖下使用反射。如您所知，反射会减慢您的应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T21:54:58.247

这是基本方法：

```
foreach(baseClass x in theList)
{
   if (x is classA)
   {
       classA a = (classA) x;
       ...
   }
   else if (x is classB)
   {
       classB b = (classA) x;
       ...    
   }
} 
```

当您需要拆分多种类型时，它并没有变得更简单。您可以尝试使用接口或不同的继承模型来避免整个事情。没有看到更多细节就不可能准确地说出来。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T21:56:11.107

```
foreach(var baseClass in baseClasses)
{
    if(baseClass.GetType() == typeof(ClassA)
    {
       var myClassA = (ClassA) baseClass;
        dowork();
    }
    else if(baseClass.GetType() == typeof(ClassB)
    {
       var myClassB = (ClassB) baseClass;
        dowork();
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-12T08:50:19.980

为了避免显式转换，我建议您以不同的方式进行：在您的基类中放置一个抽象方法，该方法将与您的具体类的属性一起使用。

例如：

```
public abstract void DoSomethingUsingProperties(); 
```

在您的具体类中，使用正确的业务逻辑实现（覆盖）它。

然后，在您的方法*中，其中一个参数是基类列表，*您可以执行以下操作：

```
public void YourMethod(List<BaseClass> list, ...other params)
{
    // ...

    foreach(var bc in list)
    {
        // so you don't need to know specific properties of concrete classes...
        bc.DoSomethingUsingProperties();
    }

    //...
} 
```

# php - 我需要帮助来使用 PHP 从 MySQL 数据库生成分组和列表报表吗？

> ID：12378455
> 
> 赞同：1
> 
> 时间：2012-09-11T21:51:44.223
> 
> 标签：php, mysql, foreach

如果有人可以帮助我，我将不胜感激；我花了几天时间试图找到解决方案。我有一个包含多个表的 MySQL 数据库；我希望根据影响这些表的某些查询显示格式化报告。

一个查询提取我的数据库中所有地区的记录的详细信息；地区的详细信息包括地区代码、位置、地区部长、电话和电子邮件。而另一个查询提取我的数据库中所有区域的记录的详细信息；区域的详细信息包括区代码、区域代码、区域名称、区域部长。每个区由一个或多个区域组成。

我的报告是有区代码的标题，区的详细信息，然后是该区的区域列表及其详细信息。

```
$districts = all_districts_details();  // The function that returns the Districts as an array
$zones = all_zones_details();  // The function that returns the Zones as an array 
```

我的代码是

```
<?php include '../view/report_header.php'; ?>
    <?php 
    foreach ($districts as $district) {    ?>            
        <table width="1000" border="1" align="center" cellpadding="2">
        <tr>
            <td id="header5" colspan="2" rowspan="2"><?php echo $district['districtCode']; ?><br><div id="header2"><?php echo '(' . $district['locationName'] . ')'; ?></div></td>
            <td id="header3" width="74">DM</td>
            <td id="header3" width="294"><?php echo 'Pst. ' . $district['othernameDM'] . ' ' . $district['surnameDM']; ?></td>
            <td id="header4" width="177"><?php echo $district['emailDM']; ?></td>
            <td id="header2" width="143"><?php echo $district['phoneDM1']; ?></td>
        </tr>
        <tr>
            <td id="header3">ADM</td>
            <td id="header3"><?php echo $district['titleADM'] . '. ' . $district['othernameADM'] . ' ' . $district['surnameADM']; ?></td>
            <td id="header4"><?php echo $district['emailADM']; ?></td>
            <td id="header2"><?php echo $district['phoneADM1']; ?></td>
        </tr>

            <?php   foreach ($zones as $zone) { ?>
                <?php if ($zone['district_districtCode'] == $district['districtCode']) { ?>
                    <tr>
                        <td id="header6" width="47"><?php echo $zone['district_districtCode'] . '/' . $zone['zoneCode']; ?></td>
                        <td id="header2" width="225"><?php echo $zone['zoneName']; ?></td>
                        <td id="header3">ZM</td>
                        <td id="header3"><?php echo $zone['titleZM'] . '. ' . $zone['othernameZM'] . ' ' . $zone['surnameZM']; ?></td>
                        <td id="header4"><?php echo $zone['emailZM']; ?></td>
                        <td id="header2"><?php echo $zone['phoneZM1']; ?></td>
                    </tr>
                <?php }?>
            <?php } ?>

        </table>
 <?php   } ?>

<?php include '../view/report_footer.php'; ?> 
```

上面的代码仅显示第一区的区域详细信息，并显示其他区域但不显示区域详细信息。

是不是我做错了什么？我想在不必使用类的情况下实现这一点。我很感激建议。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:54:35.523

在第一个循环之后，您需要：

*   倒回 $zones 数组以重新开始。这将为第二个区域显示相同的区域。
*   获取第二区的新区域。

# asp.net-mvc - 在 MVC 控制器中有存储库引用

> ID：12378458
> 
> 赞同：3
> 
> 时间：2012-09-11T21:51:54.073
> 
> 标签：asp.net-mvc, model-view-controller, nhibernate, design-patterns, architecture

我正在使用 MVC、Nhibernate 和 IOC 容器开发企业应用程序。

我三层：

DAL - 休眠数据存储库

```
public class CustomerRepository : Repository<int>,ICustomerRepository
{
    public CustomerRepository(IUnitOfWork unitOfWork)
        : base(unitOfWork)
    {

    }
} 
```

BLL - 业务层

```
public class CustomerManager
{
    private readonly ICustomerRepository _repository;
    public CustomerManager(ICustomerRepository repository)
    {
        _repository = repository;
    }
    public IList<Customer> GetAll()
    {
        return _repository.GetAll<Customer>();
    }
} 
```

演示 - MVC 控制器

```
private readonly IUnitOfWork _unitOfWork;
private readonly ICustomerRepository _repository;
private readonly CustomerManager _manager;

public HomeController(IUnitOfWork unitOfWork, ICustomerRepository repository)
    {
        _unitOfWork = unitOfWork;
        _repository = repository;
        _manager = new CustomerManager(_repository);
    } 
```

我正在使用 IOC 容器来注册工作单元和 CustomerRepository 对象。IOC 容器工作正常。

这个解决方案让我烦恼的是我在控制器中有 CustomerRepository 引用。这个架构好还是有更好的方法来实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T21:59:30.133

您不应该需要/在控制器中有`IUnitOfWork`or `ICustomerRepository`，使用 IoC 容器您应该能够注册`CustomerManager`然后执行以下操作：

```
private readonly CustomerManager _manager;

public HomeController(CustomerManager customerManager)
{
    _manager = customerManager;
} 
```

IoC 容器应该了解依赖链并根据需要注入所有各种依赖项。

即 MVC 将尝试`HomeController`从 IoC 容器中获取 a ，而后者又需要 a `CustomerManager`... 所以 IoC 容器将尝试获取 a `CustomerManager`，而后者又需要 a `ICustomerRepository`... 所以 IoC 容器将尝试... 你得到观点。

我还将尽可能地从`CustomerManager`（`ICustomerManager`可能）中提取接口以消除耦合并使控制器的测试更加容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:04:37.047

您的所有业务逻辑都应该在 Manager 类中，因此您不需要依赖于控制器中的 Repository。控制器应该只是在您的 Manager 类中调用相当高级的方法。

# php - TCPDF 不显示 MICR 字体

> ID：12378460
> 
> 赞同：0
> 
> 时间：2012-09-11T21:52:10.067
> 
> 标签：php, fonts, tcpdf

我正在尝试使用 TCPDF 类打印支票，但是当我想打印支票时，MICR 字体没有显示，为什么？

谢谢

**编辑：**

这是如何包含它

```
// set font
$fontname = $pdf->addTTFfont('micr65.ttf', 'TrueTypeUnicode', '', 32);
$pdf->SetFont($fontname, '', 14, '', false);
$pdf->SetFont('Helvetica', '', 14, '', false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T20:04:01.590

我的问题是字体文件，该字体不是 PDF 的好字体样式，我不知道为什么，第一个字体类型无效，但只是为了让您知道，如果您对一种字体有问题，请不要不要害怕它的发生，只需尝试另一种具有相同样式的字体。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T16:34:30.467

我相信， $subset 参数是错误的。将整个字体子集嵌入到 PDF 中应该是正确的，而不是错误的。

```
 $pdf->SetFont($fontname, '', 14, '', false); // Might be wrong.
    $pdf->SetFont($fontname, '', 14, '', true); // This should work 
```

这可能是相关的： [https ://stackoverflow.com/a/23812199/997536](https://stackoverflow.com/a/23812199/997536)

# haskell - Haskell 中的快速数据结构

> ID：12378464
> 
> 赞同：2
> 
> 时间：2012-09-11T21:52:23.343
> 
> 标签：haskell, containers, ghc

我发现在`containers`包中关键的数据结构，例如`Data.Map`或`Data.IntMap`在纯 Haskell 中实现。问题：我想知道，在 中实施它们不是更有效`C`吗？我知道 ghc 非常好，但绝对无法与优化`C`代码竞争。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T11:27:38.310

这是一个有趣的问题，但我不确定是否有人能够以一种或另一种方式提供任何确凿的答案（除了设计和构建一个广泛的测试套件并生成大量数字之外）。

这个问题背后的*假设*似乎是“C 总是很快，Haskell 总是很慢，所以用 C 而不是 Haskell 编写代码不是更好吗？” 我不确定这个假设是否准确。（在我有限的经验中，并不是 Haskell*很*慢，而是 Haskell*可能很*慢 - 或非常快 - 很难*预测*你将获得什么样的速度。）

通过 FFI 调用 C 有开销。Haskell 数据结构由垃圾收集器处理；通过 C 使用的内存必须手动管理。你在这里付出了相当多的努力，可能没有你想象的那么多好处。

由于可变性，C 数据结构往往更有效。大多数人不想在 Haskell 中使用可变数据结构。（从某种意义上说，它首先否定了使用 Haskell 的所有好处，所以为什么要麻烦呢？）如果您在 C 中使用不可变数据结构，您甚至可能会发现它比 Haskell 慢。（例如，有人告诉我 C 在动态内存分配方面非常慢，这对于持久性数据结构来说是个问题。另一种方法是在整个地方*复制*东西，这也不会很快。）

最重要的是，GHC 做了一些聪明的优化，比如砍伐森林，这有时会导致容器在运行时*完全消失*。C 编译器*永远不会*做这样的事情。而 Haskell 作为一种懒惰的语言，有时可以完全*跳过*你要求它做的工作；如果容器是用 C 实现的，那将无法工作。

总之，“看起来”在 C 中实现这些东西应该“显然”快得多。实际上，我怀疑答案并不那么明确。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T12:37:07.650

GHC 的运行时针对有效分配不可变结构进行了优化。它通常会在此任务中击败 C 运行时 (malloc)。因此，C 主要用于优化算法，而不是数据结构。一个例外是非常低级的数据结构或高度调整的可变结构。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-12T11:28:28.650

首先，`Data.Map`不是通常的命令式映射，而是所谓的持久性映射。它应该支持有效地保存自身的多个版本。C 不太适合这种类型的数据结构——例如，经典的 C 风格的内存管理是不可能的。

其次，GHC 堆布局相当复杂，尤其是在使用`Ord a`字典进行比较的情况下。因此，与旧的优秀 C 的接口并不简单，接口的成本可能会超过所谓的更好代码生成的优势。

用 C实现`Data.Map`是可能的，但由于所有这些簿记，它几乎没有帮助。您可以尝试让我们知道它是否更快 :) 如您所见，它尚未完成，因为社区非常确定无能为力。

# c++ - const * const 的预处理器简写

> ID：12378465
> 
> 赞同：1
> 
> 时间：2012-09-11T21:52:34.597
> 
> 标签：c++, constants, c-preprocessor, shorthand

我有一个大代码，我的许多函数都接受类型的参数
`<typename> const * const <varname>`或`<typename> const * const * const <varname>`

定义像
`_CsC`或`_CsCsC`

例如
`#define _CsC const * const`和`#define _CsCsC const * const * const`

`C`Stands for`const`和`s`Stands for `*`and the是为了引起你`_`的注意，这是一个`#define`d 速记。

我意识到最初的反应可能是“嗯，什么？” 但是一旦你阅读了几行以上的代码，似乎你会适应它，它会通过让你更快地查看类型/变量名来提高可读性......

在我看来，初始测试编译并且双指针更具可读性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T21:53:28.957

这将是可怕和辱骂，是的。改用 a `typedef`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T21:59:20.617

使用模板：

```
template <typename T> using CsCsC = const * const * const T; 
```

用法：

```
CsCsC<Foo> x = /* ... */; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T22:00:16.067

为了解释 Luchian 的回答：

如果你使用

```
typedef int * IntPtr;
typedef int ** IntPtrPtr; 
```

你写

```
const IntPtr x;  
const IntPtrPtr y; 
```

那么它等于

```
const int * const x;
const int * const * const y; 
```

# sql-server - 从 SQL Server 链接表时将 DCount 与 Access VBA 一起使用

> ID：12378467
> 
> 赞同：0
> 
> 时间：2012-09-11T21:52:46.023
> 
> 标签：sql-server, vba, ms-access-2007

我在链接到 SQL 2005 表的 Access 2007 数据库中遇到了 DCount 问题。

`tblPART_CandD_MASTER`如果表“ ”是本地的，则以下代码可以正常工作

```
DCount("*", "tblPART_CandD_MASTER", ("[InvalidContract] =0 and [MissingContract] =0  and DateTimeSubmittedtoDB = #" & Me.txtDateTime & "#")) 
```

我已将所有本地表移至 SQL 2005 服务器。现在，上面的代码每次都返回零。

如果我以以下方式分解代码，它也可以工作：

```
DCount("*", "tblPART_CandD_MASTER", ("[InvalidContract] =0 and [MissingContract] =0"))

DCount("*", "tblPART_CandD_MASTER", ("DateTimeSubmittedtoDB = #" & Me.txtDateTime & "#")) 
```

由于上述两行代码有效，我对为什么这不起作用感到沮丧：

```
DCount("*", "tblPART_CandD_MASTER", ("[InvalidContract] =0 and [MissingContract] =0  and DateTimeSubmittedtoDB = #" & Me.txtDateTime & "#")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:08:58.513

我发现通过一些摆弄这是可行的：

```
=DCount("*","dbo_tblPART_CandD_MASTER",("InvalidContract=false And MissingContract=false And  DateTimeSubmittedtoDB=#" & [DateTimeSubmittedtoDB] & "#")) 
```

对我来说，困难在于位数据类型在 MS Access 中显示为 False，即使 SQL Server 中的值为 Null。有办法解决这个问题。我通过在 SQL Server 中运行发现了问题：

```
select count(*) 
from tblPART_CandD_MASTER 
where MissingContract=0 
and InvalidContract=0 
and DateTimeSubmittedtoDB={d '2012-09-21'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:53:02.020

我创建了一个非优雅的解决方案。我将 SQL 表中的相关数据提取到本地访问表中，然后在本地表上执行 DCount 操作。宁愿不这样做，但我需要把这个问题抛在脑后。非常感谢大家的意见。

# python - 触发围绕readline构建的python批处理的选项卡完成

> ID：12378473
> 
> 赞同：2
> 
> 时间：2012-09-11T21:53:16.920
> 
> 标签：python, batch-file, command-line-interface, stdin, readline

**背景：**我有一个python程序，它导入并使用readline模块来构建一个自制的命令行界面。我有第二个 python 程序（围绕瓶子构建，一个 Web 微框架）充当该 CLI 的前端。第二个 python 程序打开一个类似于管道的接口到第一个，本质上是在两者之间来回传递用户输入和 CLI 输出。

**问题：**在外包装程序（Web 界面）中，每当最终用户按下 TAB 键（或我绑定 readline 完成函数的任何其他键）时，该键都会插入到 CLI 的标准输入中**，而不会**触发 readline 完成函数. 我需要它来触发 readline 的命令完成功能，这通常发生在交互式 CLI 会话期间。

**可能的解决方案#1：**是否有某种方法可以将 TAB 键发送到子进程的标准输入，以便批处理使用与交互式使用相同？

**可能的解决方案#2：**或者，如果有某种方法可以手动触发整个完成过程（包括匹配**生成**和**显示**），我可以插入并扫描特殊的文本序列，例如手动`"<TAB_KEY_HERE>"`触发可能的完成匹配**显示**功能。（我编写了完成函数，它生成可能的匹配项，所以我真正需要的是访问 readline 的函数来显示可能的匹配项。）

**可能的解决方案#3：** 我猜，如果我无法访问readline的matches-display函数，最后一个选择是重写readline的内置显示完成函数，这样我就可以直接调用它了。:(

有更好的解决方案吗？关于遵循上述任何解决方案提出的路径的任何建议？我被困在#1 和#2，我试图避免#3。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T18:21:46.523

**解决方案#1**被证明是一种可行的方法。关键是**不要**将 Web 套接字直接连接到 CLI 应用程序。显然，readline 正在退回到一些更简单的模式，该模式过滤掉了所有 TAB，因为它没有连接到真正的 PTY/TTY。（我可能记错了。许多蜘蛛网已经形成。）相反，需要打开一对 PTY/TTY 并将其插入 CLI 应用程序和 web-sockets 应用程序之间，这使 CLI 应用程序误以为它已连接到一个真正的基于键盘的终端，如下所示：

```
import pty
masterPTY, slaveTTY = pty.openpty()
appHandle = subprocess.Popen(
    ['/bin/python', 'myapp.py'],
    shell=False,
    stdin=slaveTTY,
    stdout=slaveTTY,
    stderr=slaveTTY,
    )
...
while True
    # read output from CLI app
    output = os.read(masterPTY, 1024)
    ...
    # write output to CLI app
    while input_data:
        chars_written = os.write(masterPTY, input_data)
        input_data = input_data[chars_written:]
    ...
appHandle.terminate()
os.close(masterPTY)
os.close(slaveTTY) 
```

HTH 别人。:)

有关更多背景信息，请参阅相关问题的答案：

[https://stackoverflow.com/a/14565848/538418](https://stackoverflow.com/a/14565848/538418)

# c# - .Net 中的接口继承/层次结构 - 有没有更好的方法？

> ID：12378475
> 
> 赞同：6
> 
> 时间：2012-09-11T21:53:21.720
> 
> 标签：c#, inheritance, interface

我想我将在我的代码中使用一个案例研究作为我的意思的例子。

现在，我正在为基于组件的游戏系统开发行为/动作系统。GameObjects 可以有一个 IBehaviorComponent 和一个 IActionComponent 附加到它们，它们只显示相关细节，公开以下内容：

```
public interface IBehaviorComponent : IBaseComponent
{
   IBehavior Behavior { get; }
}

public interface IActionComponent : IBaseComponent
{
   IAction Action { get; }
   void ExecuteAction(IGameObject target = null);
} 
```

现在，到目前为止一切都很好（至少对我来说！）。但是，当我查看 IActionComponent 的实现时，麻烦就开始出现了。

例如，一个简单的 IActionComponent 实现：

```
public class SimpleActionComponent : IActionComponent
{
   public IAction Action { get; protected set; }

   public void ExecuteAction(IGameObject target = null)
   {
      Action.Execute(target);
   }

   public void Update(float deltaTime) { } //from IBaseComponent
} 
```

但是，假设我想引入一个更复杂的 IActionComponent 实现，它允许按时间安排执行操作：

```
public class TimedActionComponent : IActionComponent
{
   public IAction Action { get; protected set; }

   public float IdleTime { get; set; }

   public float IdleTimeRemaining { get; protected set; }

   public void ExecuteAction(IGameObject target = null)
   {
      IdleTimeRemaining = IdleTime;
   }

   public void Update(float deltaTime)
   {
      if (IdleTimeRemaining > 0f)
      {
         IdleTimeRemaining -= deltaTime;
      }
      else
      {
         Action.Execute(target);
      }
   }
} 
```

现在，假设我想公开 IdleTime 以便可以通过外部影响对其进行更改。一开始我的想法是创建一个新界面：

```
public interface ITimedActionComponent : IActionComponent
{
   float IdleTime { get; set; }

   float IdleTimeRemaining { get; set; }
} 
```

但是，这里的问题是我的组件系统将所有内容都存储在 IBaseComponent 的上一级。因此，GameObject 的动作组件被检索为 IActionComponent，而不是例如 ITimedActionComponent 或 IRandomizedActionComponent，甚至 ICrashTheProgramActionComponent。我希望这样做的原因是显而易见的，因为我希望任何东西都能够查询 GameObject 的其中一个组件，而不必确切知道它想要什么超出基本类型的组件（IActionComponent、IRenderableComponent、IPhysicsComponent 等）

有没有一种更简洁的方法来处理这个问题，这将允许我公开在子类中定义的这些属性，而不必将检索到的 IActionComponent 转换为它感兴趣的类型？或者这仅仅是实现这一目标的唯一/最佳方式。就像是：

```
public void IWantYouToAttackSuperSlow(IGameObject target)
{
   //Let's get the action component for the gameobject and test if it's an ITimedActionComponent...
   ITimedActionComponent actionComponent = target.GetComponent<IActionComponent>() as ITimedActionComponent;

   if (actionComponent != null) //We're okay!
   {
      actionComponent.IdleTime = int.MaxValue; //Mwhaha
   }
} 
```

现在我在想那是*唯一的方法*，但我想我会看看木制品中是否隐藏着一种我不知道的图案，或者是否有人可以提出一种更好的方法来完成这一点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:24:55.313

您展示的将 an 向下转换为 an 的代码`IActionComponent`（`ITimedActionComponent`据我所知）是不可避免的——您必须了解这些`IdleTime`属性才能使用它们，对吧？

我认为这里的诀窍是隐藏那些看起来不太好看的代码，使用你的类`IActionComponent`不必处理它。
我对如何做到这一点的第一个想法是使用`Factory`：

```
 public void IWantYouToAttackSuperSlow(IGameObject target)
{
   //Let's get the action component for the gameobject 
   IActionComponent actionComponent = ActionComponentsFactory.GetTimedActionComponentIfAvailable(int.MaxValue); 
} 
```

和你工厂的方法：

```
public IActionComponent GetTimedActionComponentIfAvailable(IGameObject target, int idleTime)
{
var actionComponent = target.GetComponent<IActionComponent>() as ITimedActionComponent;

   if (actionComponent != null) //We're okay!
   {
      actionComponent.IdleTime = int.MaxValue; //Mwhaha
   }
return (actionComponent != null)? actionComponent : target.GetComponent<IActionComponent>();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:22:57.527

没错，通过转换为子类型来测试特定实现并不是一个好主意。从您提供的示例来看，您似乎有一个`IGameObject`要对其执行某些操作的示例。与其让您`IActionComponent`公开一个将 the`IGameObject`作为参数的方法，您还可以用另一种方式来做，即让`IGameObject`您可以执行一个或多个您可以执行的操作。

```
interface IActionComponent
{
    ExecuteAction();
}

interface IGameObject
{
    IActionComponent ActionComponent { get; }
} 
```

然后在执行方法中做

```
public void IWantYouToAttackSuperSlow(IGameObject target)
{
    target.ActionComponent.ExecuteAction();
} 
```

根据您实现 IActionComponent 的方式，多态性将确保执行正确的代码。

有一种称为[命令模式](http://en.wikipedia.org/wiki/Command_pattern)的模式似乎适合您的需要。

# .net - Facebook API 隐藏/显示页面应用

> ID：12378476
> 
> 赞同：0
> 
> 时间：2012-09-11T21:53:22.810
> 
> 标签：.net, asp.net-mvc-3, facebook-graph-api

我的网站允许用户管理他们页面上的应用程序。我已经实现了更改选项卡名称的请求：

```
Uri url = new Uri(string.Format("https://graph.facebook.com/{1}", pageId,tabId));

Dictionary<string, string> args = new Dictionary<string, string>();

args["custom_name"] = tabName;
args["access_token"] = accessToken;

MakeRequest(url, HttpVerb.POST, args); 
```

...我要求将应用程序添加到页面并删除。

我找不到如何在页面上显示/隐藏标签。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:32:51.973

是的 - 您可以通过 POST 和 DELETE 请求执行此操作`/PAGE_ID/tabs`- 您需要获得这些调用的`manage_pages`权限，这些调用记录在[https://developers.facebook.com/docs/reference/api/page/#tabs](https://developers.facebook.com/docs/reference/api/page/#tabs)

# objective-c - 如何为我的 Xcode 项目添加更多本地化？

> ID：12378477
> 
> 赞同：1
> 
> 时间：2012-09-11T21:53:26.453
> 
> 标签：objective-c, xcode, macos, cocoa, localization

我已经将我的 Xcode 项目本地化了一次，但我不知道如何添加更多语言。我找不到“+”按钮。
我有英语和葡萄牙语的 .xib 和 .strings。
这是我看到的：![在此处输入图像描述](../Images/13c19466d22ee602a2a4d6b7d6e48358.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:58:10.790

您必须将本地化添加到您的项目中：

![在此处输入图像描述](../Images/c40c3809ad23d2b3e06349651d1d50a3.png)

然后，您可以简单地分别为每个文件选择本地化。

# java - ArrayList 丢失项目

> ID：12378501
> 
> 赞同：1
> 
> 时间：2012-09-11T21:55:30.277
> 
> 标签：java, android, arraylist

ArrayList 是否会丢失项目？我有一个 ArrayList，其中包含包含整数的 ArrayLists。每个大约有 32 个项目。稍后当我需要调用 ArrayList 时，除了最后一个之外，其他项目都丢失了。仍然有 32 个项目，但它们是空的。

```
[[], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [-16323110, -16688166, -14978279, -837220, -11002320, -4136419, -13118245, -5370572, -11382698, -13140399, -13754890, -8184649, -11711035, -11668025, -12910969, -11058211, -9974559, -9665946, -12513105, -14320755, -16332438, -7673092, -13016023, -15454286, -12413148, -9780316, -2553149, -3313219, -10953060, -940790, -11989718, -12189591]] 
```

我能读一次，一切都在那里……但后来当我再次调用它时，它就消失了。我不会删除任何东西。这里发生了什么？

我不能发布我的原始代码，但这是一个模型。

```
private ArrayList<ArrayList<Integer>> myArray = new ArrayList<ArrayList<Integer>>();

private void makeArray() {
for(int i = 0; i<= _height - 1; i++) {
            ArrayList<Integer> row = new ArrayList<Integer>();
            for(int ii = 0; ii <= _width - 1; ii++) {
                row.add(ii);    
            }
            myArray.add(row);
        }
}

private void readArray() {
ArrayList<Integer> row = new ArrayList<Integer>();

            for(int a = 0; a <= _height - 1; a++) {
                row.clear();
                row = myArray.get(a);

                for(int aa = 0; aa <= _width - 1; aa++) {
                    int c = row.get(aa);
//stuff
                }
            }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T21:59:40.540

看看你的代码：

```
private void readArray() {
    ArrayList<Integer> row = new ArrayList<Integer>();

    for(int a = 0; a <= _height - 1; a++) {
        row.clear();
        row = myArray.get(a);
        ...
    }
} 
```

在每次迭代开始时，您将清除`ArrayList`您在上一次迭代中查看的内容。为什么要这么做？

只要摆脱`row.clear()`电话，我希望一切都会好起来的。我还建议使用更惯用的：

```
for(int a = 0; a < _height; a++) { 
```

甚至更好：

```
for(int a = 0; a < myArray.size(); a++) { 
```

甚至*更好*：

```
for (ArrayList<Integer> row : myArray) {
    ...
} 
```

（那你根本不需要打电话`myArray.get()`！）

# haskell - 超载显示列表

> ID：12378502
> 
> 赞同：1
> 
> 时间：2012-09-11T21:55:43.770
> 
> 标签：haskell, newtype

我想要一个换行符分隔的表示，而不是通常的逗号分隔的表示，因为可能有新的数据类型：

```
newtype SimpleRecord = SimpleRecord ([Char], [Char], Integer)
    deriving (Show) 
```

我试图写这个 istance `Show class`：

```
instance  Show [SimpleRecord] where
        show [(SimpleRecord (n, i, c))] = show (SimpleRecord (n, i, c))++['\n']
        show (l:ls) = (show l)++['\n']++(show ls) 
```

GHC 严重侮辱我。

有人可以尝试向我解释我该怎么办吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T11:12:28.983

首先，`Show`该类*应该*用于生成 Haskell 源代码，`Read`然后该类可以读回该源代码。它不应该用于生成人类可读的“漂亮”输出。

话虽如此，几乎每个人都将它误用于后者，它有助于调试目的。

因此，您的选择是：

1.  编写一些未调用`show`的函数来执行您想要的操作。（根据`AndrewC`的评论。）

2.  使用`showList`方法。

如果你写`deriving Show`，这告诉编译器`Show`为你写所有的方法。`deriving`如果你想自己写，你需要先把它拿走。然后你可以编写你的实例，它看起来像

```
instance Show SimpleRecord where
  show (SimpleRecord (x, y, z)) = ...

  showList rs = unlines (map show rs) 
```

* * *

顺便说一句，如果你还不知道这一点，你可以写

```
mapM_ print records 
```

在 GHCi 提示符处打印出每行一个元素的*任何可打印事物列表。*

* * *

最后说一句，为什么

```
newtype SimpleRecord = SimpleRecord ([Char], [Char], Integer) 
```

而不是

```
data SimpleRecord = SimpleRecord [Char] [Char] Integer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:06:57.090

你的问题很模棱两可。如果我解释正确，您正在尝试`Show`更改`[SimpleRecord]`.

由于 GHC 已经定义了实例`Show [a]` when`Show a`被定义。当您尝试`FlexibleInstances`再次为`Show [SimpleRecord]`.

```
Matching instances:
      instance Show a => Show [a] -- Defined in `GHC.Show'
      instance Show [SimpleRecord] -- Defined at show.hs:5:11 
```

所以你需要使用`OverlappingInstances`语言扩展来允许重载它。它声明 GHC 匹配最具体的实例。

您可能还想包含`FlexibleInstances`扩展，它允许在实例声明中提及任意嵌套类型。

```
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE OverlappingInstances #-}
newtype SimpleRecord = SimpleRecord ([Char], [Char], Integer)
    deriving (Show)

instance  Show [SimpleRecord] where
    show [SimpleRecord (n, i, c)] = show (SimpleRecord (n, i, c))++"\n"
    show (l:ls) = show l ++ "\n" ++ show ls 
```

[您可以在GHC Docs](http://www.haskell.org/ghc/docs/7.4.2/html/users_guide/type-class-extensions.html)获得有关这些语言扩展的更多信息

只是对您的类型设计的评论，最好将您的类型定义为

```
data SimpleRecord = SimpleRecord String String Integer 
```

在部分构造函数应用程序等方面，您在这里获得了更大的灵活性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T02:40:51.047

我可能遗漏了一些东西，但不清楚您为什么要输入新类型 (String,String,Integer) 而不是您想要很好地显示的内容，即它们的列表。然后你会避开列表的通用 Show 实例：

```
newtype SimpleRecords = SimpleRecords [(String, String, Integer)]

instance Show SimpleRecords where
  show (SimpleRecords []) = ""
  show (SimpleRecords ((n, i, c): xs)) = 
       show (n, i, c) ++ "\n" ++ show (SimpleRecords xs)

 -- Prelude Main> let a = words "We hold these truths to be self-evident"
 -- Prelude Main> let b = words "All the best people are using Clorox"
 -- Prelude Main> let c = zip3 a b [1::Integer ..]
 -- Prelude Main> SimpleRecords c
 -- ("We","All",1)
 -- ("hold","the",2)
 -- ("these","best",3)
 -- ("truths","people",4)
 -- ("to","are",5)
 -- ("be","using",6)
 -- ("self-evident","Clorox",7) 
```

# objective-c - 使用 UIGraphicsPushContext(aContext) 和 UIGraphicsPopContext()

> ID：12378512
> 
> 赞同：0
> 
> 时间：2012-09-11T21:56:40.797
> 
> 标签：objective-c, cocoa-touch, uikit, cgcontextref

我在让主题电话正常工作时遇到问题。下面的测试应该绘制两个橙色和一个绿色的矩形。

这是我对以下代码的理解...

*   我在 50,50 处画了一个橙色矩形
*   我在 200,200 处调用绘制 greenRect，发送当前上下文
*   我将当前上下文推入堆栈，更改笔触颜色并在 100,100 处绘制一个绿色矩形
*   我弹出应该恢复原始上下文的当前上下文（橙色笔触颜色）
*   然后我画出最后一个应该是橙色的矩形

最后一个矩形应该是橙色的，但是是绿色的，告诉我我修改了原始上下文

想法？

```
- (void)drawRect:(CGRect)rect{

CGRect aRectangle=CGRectMake(50., 50., 40., 40.);
UIBezierPath *path=[UIBezierPath bezierPathWithRect:aRectangle];
UIColor *strokeColor=[UIColor orangeColor];
[strokeColor setStroke];
[path stroke];

CGContextRef context=UIGraphicsGetCurrentContext();

[self drawGreenRect:context];

CGRect anotherRectangle=CGRectMake(100., 100., 40., 40.);
UIBezierPath *anotherPath=[UIBezierPath bezierPathWithRect:anotherRectangle];
[anotherPath stroke]; 
```

}

```
- (void)drawGreenRect:(CGContextRef)ctxt{

UIGraphicsPushContext(UIGraphicsGetCurrentContext());

CGRect aRectangle=CGRectMake(200., 200., 40., 40.);
UIBezierPath *path=[UIBezierPath bezierPathWithRect:aRectangle];
UIColor *strokeColor=[UIColor greenColor];
[strokeColor setStroke];
[path stroke];

 UIGraphicsPopContext(); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:35:02.320

`UIGraphicsPushContext()`不会为您创建新的上下文，它只是将您传递的上下文推送到堆栈中。所以在你这样做之后`UIGraphicsPushContext(UIGraphicsGetCurrentContext());`，你有一个图形上下文堆栈两层，但它上面的两个项目都是相同的上下文，即你的视图为你设置​​的上下文。

您需要实际创建一个要推送的上下文，很可能使用[`UIGraphicsBeginImageContext()`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIGraphicsBeginImageContext). 然后，您可以从该上下文中获取图像并将其放入您的视图中。

# hibernate - 子查询 HQL 中的对象列表/集合

> ID：12378520
> 
> 赞同：2
> 
> 时间：2012-09-11T21:57:39.387
> 
> 标签：hibernate, set, subquery, hql

我正在尝试使用 HQL 进行查询。是否可以在 hql 的子查询中返回对象集/列表？如果是这样，该怎么做。

例如：

```
SELECT ta1.id, ta1.name, obj FROM table1 AS ta1, table2 AS obj WHERE obj.id = ta1.id; 
```

table2 将返回一个对象列表，我想将它们作为`list`or检索`set`。因此，响应将包含 id、name、obj 集。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:45:14.257

实现结果转换器。这里的代码是为了说明，我这里没有IDE/编译器

```
class ResultTransformer : Resulttransformer
{
    public List transformList(List collection)
    {
        ArrayList<T1> result = new ArrayList<T1>();
        for (int tuple : collection)
        {
            T1 t1 = GetT1ById(result, tuple[0]);
            if (T1 == null)
            {
                result.add(t1)
            }
            t1.T2s.add(new T2(tuple[3], ...));
        }
        return result;
    }

    public object transformTuple(Object[] tuple, String[] aliases)
    {
        return tuple;
    }
} 
```

# emacs - 记录 Emacs 文件打开/保存命令

> ID：12378521
> 
> 赞同：0
> 
> 时间：2012-09-11T21:57:50.773
> 
> 标签：emacs

我希望保留 Emacs 中文件操作的历史记录，特别是文件打开和保存命令，以及相关的时间戳和 pid，有人做过这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T05:53:28.480

您可以使用[emacs 标准 hooks](http://www.gnu.org/software/emacs/manual/html_node/elisp/Standard-Hooks.html)轻松实现它。

像这样的东西：

```
(setq *find-file-list* '())
(setq *save-file-list* '())

(add-hook 'find-file-hook (lambda () 
                             (push (list (buffer-file-name) (time-stamp-string)) *find-file-list*)))

(add-hook 'after-save-hook (lambda () 
                             (push (list (buffer-file-name) (time-stamp-string)) *save-file-list*))) 
```

# java - 从另一个类访问私有最终静态双精度

> ID：12378530
> 
> 赞同：0
> 
> 时间：2012-09-11T21:58:47.177
> 
> 标签：java, class

我正在尝试从另一个类访问私有的最终静态双精度。

这是课程：

```
public class coolMath{

private final static double alpha = 5.87;

public coolMath(){

}

public static double calDistance(double x1, double y1, double x2, double y2){
        double dist = Math.sqrt(Math.pow((x2-x1), 2) + Math.pow((y2-y1),2));     
        return dist;
    }

} 
```

我需要访问另一个类中的变量 alpha 。这可能吗？构造函数中是否需要发生某些事情才能使其可用？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:02:15.967

要么创建`alpha`一个公共字段，要么提供一个`public static double getAlpha()`返回它的字段。

如果您公开该字段，您可以像这样访问它`double a = coolMath.alpha`。

除此以外，`double a = coolMath.getAlpha();`

我强烈建议您再次使用 java 修饰符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:04:37.110

这在技术上可以通过一些深奥的反思方法实现，但我强烈反对。最好更改`alpha`变量的可见性或编写一些返回它的方法（或者可能设置它，如果你也需要的话（但如果你的 var 是`final`））。

# java - 查询放宽 - 更改约束

> ID：12378531
> 
> 赞同：0
> 
> 时间：2012-09-11T21:58:54.960
> 
> 标签：java, database, algorithm, networking, bayesian

这对我来说是一个新领域，我不确定这是否是我正在寻找的。查询数据库时需要更改约束。这方面的一个例子是求职网络应用程序。如果用户在 50 英里半径范围内搜索具有某些特征的工作，我需要找到不完全匹配但与他非常相关的工作。

如果用户的工作几乎 100% 匹配，但距离 52 英里，我还需要检索它以呈现给用户（考虑到它的相关性，因为 50 英里中的 2 英里仅多 4%）。

这个想法是开发一个新的求职网络应用程序，并希望它会发展。这些公司在网站上创建他们的工作机会，并由用户搜索。这几乎是常态。不同之处在于搜索机制。它比简单的数据库查询要聪明一点，这就是为什么我需要知道如何获得更多结果来过滤它们。如果有一个限制，例如（从薪水 > 25000 或薪水 < 26000 的工作中选择 *），则 100% 匹配但薪水为 24999 的工作将不会显示在结果中，尽管它应该显示在结果中，因为它很接近。这个想法是通过贝叶斯网络或其他方式获得数据库中所有接近的工作（因此我必须将约束放宽到更大的值），确定它与用户的相关性。

所以我需要一些指针来寻找关于这个主题的更多信息，如何放松这些约束以进行更广泛的搜索，然后通过贝叶斯网络计算与用户的相关性并显示它。

谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:22:25.353

一种通用的方法是进行快速的第一阶段搜索，这可能会让一些垃圾通过，然后对你从中得到什么进行更详细的检查。在您的示例中，您可能只需将查询词每次更改 10%，因此 (select * from jobs where Salary > 25000 or Salary < 26000) 变为 (select * from jobs where Salary > 22500 or Salary < 23400) - 你真的意味着或在这里，顺便说一句，还是应该是和？

然后取出通过第一阶段的答案，并按照与理想值的百分比差的平方和之类的方式对它们进行排序，并向用户显示前 N 个答案。这很简单，您可能会找到一个涉及正态分布的论点，证明它是对某事物或其他事物的贝叶斯计算。

# sql-server-2008 - 仅用于更新和删除的更改数据捕获

> ID：12378532
> 
> 赞同：3
> 
> 时间：2012-09-11T21:58:56.067
> 
> 标签：sql-server-2008, change-data-capture

我们的数据库插入不密集（每晚 200-500k），但更新光照（可能每天几百）。

我需要无限期地保留对插入行本身的所有更改的历史记录（但不是实际的插入）。我很想使用更改数据捕获，但支持此功能所需的空间量不可用。如果我能想办法做到以下几点，我的生活会容易得多。

1) 将更改数据跟踪限制为仅 UPDATES 和 DELETES 2) 定期从 CDC 表中清除 INSERTS

在过去，我只是使用了一个触发器（它仍然没有被排除在外！）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T22:01:53.243

我只会使用触发器来捕获更新和删除。

我不认为你可以告诉 CDC 需要注意什么 DML，我认为让 CDC 记录所有这些插入然后删除它们是相当浪费的。这本身就很昂贵，并且它会导致的碎片也会导致您对捕获表运行的任何查询（您将有很多大部分为空的页面）以及工作统计信息必须不断做保持最新的统计数据。

您可以在捕获表上放置一个而不是插入触发器，它什么都不做，但我没有尝试这样做甚至查看它是否被允许，我当然不知道这会对疾控中心职能。可能值得进行一些调查，但即使这个 hack 确实有效，我的原始答案仍然有效：只需使用触发器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-31T00:48:56.183

如果空间是一个考虑因素，您始终可以分配 CDC 表以使用可能位于不同服务器上的不同文件组。你会这样做：

```
 ALTER DATABASE YourDatabase
 ADD FILEGROUP [cdc_ChangeTables];
 go

 --this step requires going on to somewhere on your hard drive and creating a folder
 ALTER DATABASE YourDatabase
 ADD FILE ( NAME = N'cdc_ChangeTables',
            FILENAME = N'E:\NameOfFolderYouSetUp\YourDatabase_cdc_ChangeTables.mdf',
            SIZE = 1048576KB,
            FILEGROWTH = 102400KB )
 TO FILEGROUP [cdc_ChangeTables];
 GO 
```

然后，当您要设置 CDC 表时，请将它们指向该文件组：

```
EXEC sys.sp_cdc_enable_table
    @source_schema = N'dbo',
    @source_name = N'TableYouWantToCapture',
    @role_name = N'cdc_admin',
    @filegroup_name = N'cdc_ChangeTables', --this is where you name the filegroup from previous step
    @supports_net_changes = 1,  
    @capture_instance = N'dbo_TableYouWantToCapture',
    @captured_column_list = 'ColumnName1, ColumnName2'; --comma-delimited list of column names
GO 
```

如果你只想查询更新/删除，你可以像这样使用系统函数：

```
SELECT * 
FROM cdc.fn_cdc_get_all_changes_dbo_TableYouWantToCapture(@from_lsn, @to_lsn, N'all update old')
WHERE __$operation IN (1,3,4) 
```

# sql - 将附件从 Dynamics 3.0 MSSQL 表导出到本地文件夹

> ID：12378534
> 
> 赞同：1
> 
> 时间：2012-09-11T21:59:01.867
> 
> 标签：sql, sql-server, tsql, stored-procedures, dynamics-crm

我正在处理一个 ETL 项目，部分要求是从 MS Dynamics CRM 3.0 中提取电子邮件附件，以便迁移到 Salesforce.com。

我被难住的部分是提取（即保存为本地文件夹中的文件），在 DocumentBody 字段下存储为 MS SQL 2005“文本”（Base64）对象的文档。

如果您熟悉 MS Dynamics 架构，这些都存储在“AnnotationsBase”表下。这是一个查询示例和几行输出：

```
SELECT top 1
   [AnnotationId]
  ,[OwningUser]
  ,[ObjectId]
  ,[Subject]
  ,[MimeType]
  ,[DocumentBody]
  ,[FileName]
FROM [Manufacturing_Company_MSCRM].[dbo].[AnnotationBase]
where isdocument = 1
order by filesize 
```

* * *

**AnnotationId：** 02E5D4E3-​​5323-DC11-ADF9-0013726038EA

**拥有用户：** DC86BB76-0A74-DB11-8659-0013726038EA

**对象 ID ：** ED0A7E57-4518-DC11-8EB4-0013726038EA

**主题：** Microsoft CRM 于 2009 年 3 月 31 日下午 1:19 创建的注释

**MimeType：**文本/纯文本

**DocumentBody：** Rmlyc3QgTmFtZSxMYXN0IE5hbWUsRS1tYWlsIEFkZHJlc3MNCkpvaG4sU21pdGgsanNtaXRoQG1pY3Jvc29mdC5jb20NCkZyYW5rLEpvbmVzLGZqb25lc0Bjb250b3NvLmNvbQ0KLCwNCiwsDQosLA0KLCwNCiwsDQosLA0KLCwNCiwsDQosLA0KLCwNCiwsDQo =

**文件名：** bmc_import.csv

* * *

对于许多不同的 mime 类型和数千个附件，我如何编写一种方法来使用这些文件（如 c:\attachments\bmc_import.csv、c:\attachments \budget.xls 等）？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:43:48.970

我在 2011 年写了一个关于如何使用 Web 服务执行此操作的示例。我意识到这是前面的几个版本，并且是直接 sql 调用的不同方法，但您可能会发现它很有用。我不认为 Crm 3 中的代码会有很大不同，只是服务调用的执行方式和结果解析方式。

[导出附件 Mscrm 2011](http://woodsworkblog.wordpress.com/2012/07/28/exporting-annotation-note-attachment/)

# ruby-on-rails - NameError: 未初始化的常量工厂

> ID：12378542
> 
> 赞同：16
> 
> 时间：2012-09-11T21:59:22.177
> 
> 标签：ruby-on-rails, ruby, rspec, tdd, factory-bot

我正在按照[本教程](http://everydayrails.com/2012/03/19/testing-series-rspec-models-factory-girl.html)开始使用工厂女孩 rspec 在 Rails 上使用 TDD，但我遇到了这个问题，我无法理解。

这是我的“工厂”.rb (events.rb)

```
require 'faker'

FactoryGirl.define do
   factory :event do
     name "HIGH"
     genre "house, techno, idb"
     venue_name "Westbourne Studios"
     venue_address "4-6 Chamberlayne Road"
     venue_postcode "NW103JD"
     begin_time "10pm"
     end_time "2am"
     user_id 2
     description "A Super massive party with loads of everything you would want around."
     status true
     venue_id nil
   end
end 
```

这是event_spec.rb：

```
require 'spec_helper'
require 'factory_girl_rails'

describe Event do

it "has a valid factory" do
  Factory.create(:event).should be_valid
end

  it "is invalid without a name"
  it "is invalid without a genre"
  it "is invalid without a venue_name"
  it "is invalid without a venue_address"
  it "is invalid without a venue_postcode"
  ...

 end 
```

我已经设置了模型，迁移了等等。当我运行“rspec spec/models/event_spec.rb”时，我收到以下错误：

```
Failures:

1) Event has a valid factory
 Failure/Error: Factory.create(:event).should be_valid
 NameError:
   uninitialized constant Factory
 # ./spec/models/event_spec.rb:7:in `block (2 levels) in <top (required)>'

 Finished in 0.1682 seconds
 13 examples, 1 failure, 12 pending

 Failed examples:

 rspec ./spec/models/event_spec.rb:6 # Event has a valid factory

 Randomized with seed 64582 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-11T22:07:18.430

尝试以这种方式使用它：

```
FactoryGirl.create(:event).should be_valid 
```

我想，我记得，它只是旧版本的 gem 中的“工厂”。如果您查看最近的 Factory Girl 的[“入门”指南](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)，则只有“FactoryGirl”的调用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-23T14:58:28.640

如果您创建文件 spec/support/factory_girl.rb 的内容：

```
RSpec.configure do |config|
  config.include FactoryGirl::Syntax::Methods
end 
```

然后你可以简单地使用：

```
create(:event)
build(:book) 
```

代替：

```
FactogyGirl.create(:event)
FactogyGirl.build(:book) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-08T06:22:02.913

我在使用工厂机器人时遇到了同样的错误，为了补充 Stefan 的回答，我遇到了这个小备忘单。

[https://devhints.io/factory_bot](https://devhints.io/factory_bot)

# php - 将隐藏变量传递到链接中

> ID：12378543
> 
> 赞同：-4
> 
> 时间：2012-09-11T21:59:25.157
> 
> 标签：php

请问我有这个问题。我有一个链接，一旦点击，用户就可以访问我域之外的另一个 URL。该网址使用户有可能赢得价格，比方说，它是这样的：

```
www.outsideurl.com/users_phone_number-winning_message.php 
```

我怎样才能使这种情况不会发生？我的意思是，我无法控制外部 URL 的 url，但是，我如何发送链接而不将用户重定向到那里？

因为，我是用户，一旦我有链接，我可以提交超过 100 个并赢得 100 个价格。

有没有办法隐藏网址，或者类似的东西..谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:07:23.580

如果你想在服务器端调用一个链接（所以你的用户看不到它），但是你想把页面调用的结果发送给他，你可以尝试：

```
echo file_get_contents("http://www.outsideurl.com/users_phone_number-winning_message.php"); 
```

但是，如果此页面中有相关链接/表单操作，您的用户将无法点击/发布它们。

# android - 显示下拉列表时微调器的状态是什么？

> ID：12378545
> 
> 赞同：2
> 
> 时间：2012-09-11T21:59:29.183
> 
> 标签：android, android-widget

我正在创建一个带有自定义视图的微调器，无论如何我设法在微调器处于非活动状态以及按下它时显示不同的可绘制对象，我想在下拉列表显示时保持按下状态可绘制。这是 mi XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_focused="true"
      android:state_pressed="false"
      android:drawable="@drawable/ComboBoxInactive" />
  <item android:state_focused="true"
      android:state_pressed="true"
      android:drawable="@drawable/ComboBoxActive" />
  <item android:state_focused="false"
      android:state_pressed="true"
  android:drawable="@drawable/ComboBoxActive" />
  <item android:drawable="@drawable/ComboBoxInactive" />
</selector> 
```

显示下拉列表时我应该添加什么状态？我希望它显示 ComboBoxActive 可绘制对象。我已经尝试添加这个：

```
 <item android:state_enabled ="false"
        android:drawable="@drawable/ComboBoxActive"/> 
```

知道状态是什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-05T08:11:24.010

没有 android:state_dropdown_showing 状态。微调器下拉列表中的唯一一个状态是 state_enabled="true"

您可以使用我的选择器来区分下拉列表状态

```
<?xml version="1.0" encoding="UTF-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- disabled state -->
<item android:state_enabled="false" android:drawable="@drawable/spinner_off"/>
<!-- pressed state -->
<item android:state_enabled="true" android:state_window_focused="true" android:state_pressed="true" android:drawable="@drawable/spinner_pressed"/>
<!-- unselected state -->
<item android:state_enabled="true" android:state_window_focused="true" android:drawable="@drawable/spinner_default"/>
<!-- dropdown list state -->
<item android:state_enabled="true" android:state_focused="true" android:drawable="@drawable/spinner_dropdown_list_is_shown"/>
<!-- default -->
<item android:drawable="@drawable/spinner_default"/>
</selector> 
```

不要忘记在微调器上设置 setFocusable 和 setFocusableInTouchMode 属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-22T07:16:43.700

根据 Olef Koshkin 的回答，我可以补充一点，如果您想在单击微调器后保存更改的状态，并仅在关闭微调器后将其恢复为默认值，您可以使用。这个对我有用。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- disabled state -->
    <item android:drawable="@drawable/custom_spinner_inactive"
          android:state_enabled="false"/>
    <!-- pressed state -->
    <item android:drawable="@drawable/custom_spinner_inactive"
          android:state_enabled="true"
          android:state_pressed="true"
          android:state_window_focused="true"/>
    <!-- unselected state -->
    <item android:drawable="@drawable/custom_spinner_inactive"
          android:state_enabled="true"
          android:state_window_focused="true"/>
    <!-- dropdown list state -->
    <item android:drawable="@drawable/custom_spinner_inactive"
          android:state_enabled="true"
          android:state_focused="true"/>
    <!-- default -->
    <item android:drawable="@drawable/custom_spinner_active"/>
</selector> 
```

在其他情况下，我看到默认状态闪烁，我不喜欢它。

# c# - Linq to XML：获取包含某些子节点的所有节点

> ID：12378547
> 
> 赞同：2
> 
> 时间：2012-09-11T21:59:30.840
> 
> 标签：c#, xml, linq, linq-to-xml

我有以下 XML 结构：

```
<Capabilities>
    <Capability ID="1" Name="Capability # 1">
        <Relations>
            <Relation RelatedTo="2" RelationType="Child"/>
            <Relation RelatedTo="3" RelationType="Child"/>
            <Relation RelatedTo="4" RelationType="Child"/>
            <Relation RelatedTo="5" RelationType="Child"/>
        </Relations>
    </Capability>
    <Capability ID="3" Name="Capability # 3">
        <Relations>
            <Relation RelatedTo="1" RelationType="Dependant" />
        </Relations>
    </Capability>
    <Capability ID="2" Name="Capability # 2">
        <Relations>
            <Relation RelatedTo="6" RelationType="Child" />
            <Relation RelatedTo="5" RelationType="Child" />
        </Relations>
    </Capability>
</Capabilities> 
```

而且我需要查询所有具有 Child 关系且相关属性值为 5 的 Capabilities。到目前为止，我已经尝试使用以下查询，但我得到了一个“空引用异常”集合，我不知道如何做。

```
 var result = root.Elements("Capability")
                 .Where(c => c.Elements("Relations")
                            .Where(r => r.Attribute("RelatedTo").Value == "5"
                                && r.Attribute("").Value == Enum.GetName(typeof(RelationTypes), RelationTypes.Children)).Any()); 
```

关于我做错了什么或查询它的正确方法的任何线索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T22:02:57.447

```
var capabilites = root.Descendants("Capability")
            .Where(c => c.Descendants("Relation")
                         .Any(r => (string)r.Attribute("RelatedTo") == "5"))
            .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:12:10.063

这个：

```
var xDoc = XDocument.Parse(
@"<Capabilities>
<Capability ID=""1"" Name=""Capability # 1""> 
        <Relations> 
            <Relation RelatedTo=""2"" RelationType=""Child""/> 
            <Relation RelatedTo=""3"" RelationType=""Child""/> 
            <Relation RelatedTo=""4"" RelationType=""Child""/> 
            <Relation RelatedTo=""5"" RelationType=""Related""/> 
        </Relations> 
    </Capability> 
    <Capability ID=""3"" Name=""Capability # 3""> 
        <Relations> 
            <Relation RelatedTo=""1"" RelationType=""Dependant"" /> 
        </Relations> 
    </Capability> 
    <Capability ID=""2"" Name=""Capability # 2""> 
        <Relations> 
            <Relation RelatedTo=""6"" RelationType=""Child"" /> 
            <Relation RelatedTo=""5"" RelationType=""Child"" /> 
        </Relations> 
    </Capability> 
</Capabilities>");

var q = xDoc.Descendants("Capability").
            Where(c => c.Descendants("Relation").Where(r => (int)r.Attribute("RelatedTo") == 5).Any());

foreach (var r in q)
{
    Console.WriteLine(r);
} 
```

结果是：

```
<Capability ID="1" Name="Capability # 1">
  <Relations>
    <Relation RelatedTo="2" RelationType="Child" />
    <Relation RelatedTo="3" RelationType="Child" />
    <Relation RelatedTo="4" RelationType="Child" />
    <Relation RelatedTo="5" RelationType="Related" />
  </Relations>
</Capability>
<Capability ID="2" Name="Capability # 2">
  <Relations>
    <Relation RelatedTo="6" RelationType="Child" />
    <Relation RelatedTo="5" RelationType="Child" />
  </Relations>
</Capability>
Press any key to continue . . . 
```

我想你在追求什么...

# c# - 来自命名空间和构造函数名称的表单设计器的 InitializeComponent 错误

> ID：12378552
> 
> 赞同：0
> 
> 时间：2012-09-11T22:00:01.383
> 
> 标签：c#, initialization

我将一些旧的（不是我自己的）代码引入了我想要修改的新解决方案。我是 C# 新手，所以如果我的术语不正确或遗漏了任何明显的内容，我深表歉意。

我有一个主窗体 MainForm.cs 和继承 PropertyGrid 的自定义组件 CustomComponent.cs。CustomComponent 在 MainForm 中。

我收到一个错误：

```
The type name 'MainNameSpace' does not exist in the type 'MainNameSpace.MainNameSpace' 
```

在 MainForm.Designer.cs 我有生成的代码：

```
/// <summary>
/// Required method for Designer support - do not modify
/// the contents of this method with the code editor.
/// </summary>
private void InitializeComponent()
    {
        // stuff
        this.customComponent1 = new MainNameSpace.MainNameSpace();
        // more stuff
    } 
```

如果我手动进入并将其更改为“new MainNameSpace();” 它工作得很好。我不知道为什么命名空间的名称被添加了两次。我尝试检查 .resx 文件是否有任何可疑内容，但没有看到任何内容，并不是说我知道要查找什么。有一个好的起点吗？我已经进入 MainForm、CustomComponent 和所有我能想到的寻找罪魁祸首的东西，但没有找到任何看起来像罪魁祸首的东西。关于我应该在哪里寻找/寻找什么的任何想法？我觉得问题出在 CustomComponent.cs 但我不知道。

自定义组件.cs：

```
namespace MainNameSpace
{
    public partial class MainNameSpace : PropertyGrid
    {
        public MainNameSpace()
        {
            InitializeComponent();
        }

        // other stuff
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:03:59.480

我以前遇到过这个问题，我很确定它与这些行有关：

```
namespace MainNameSpace
{
    public partial class MainNameSpace : PropertyGrid
    { 
```

命名空间和类不能具有相同的名称，因为它不知道您调用的是哪一个。尝试更改命名空间或类名，它应该可以工作。

希望这可以帮助！

# shell - 如何在 shell 脚本中为多行变量添加行号前缀？

> ID：12378558
> 
> 赞同：2
> 
> 时间：2012-09-11T22:00:21.100
> 
> 标签：shell, unix, sh

我想从 shell 脚本 (#!/bin/sh) 中显示编号菜单。目前我使用

```
echo "choice1
choice2
choice3
choice4
" 
```

输出菜单。现在我想为每一行添加一个数字前缀，因此结果将如下所示：

```
1) choice1
2) choice2
3) choice3
4) choice4
... 
```

我怎样才能做到这一点，而不必手动为每一行加上一个数字前缀？我想我想逐行迭代变量并将行号连接起来并将其输出到一个新变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T22:05:33.733

如果您正在使用`bash`，我建议您使用`select`内置的此类任务。

下面是[一些例子](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_09_06.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T22:19:28.807

`select`可能是要走的路，但你也可以这样做：

```
echo "$string" | nl -ba -s') ' 
```

# python - 在 Python 中使用装饰器创建动态方法

> ID：12378564
> 
> 赞同：3
> 
> 时间：2012-09-11T22:00:56.533
> 
> 标签：python, decorator

这很难。我不仅想动态创建方法，还想将装饰器与它们关联起来。这是我尝试过的

```
import inspect
import types

class Dynamo(object):
    pass

def call_me_dec(func):
    print 'I am here'
    return func

def add_dynamo(cls,i):
    # @call_me_dec
    def innerdynamo(self):
        print "in dynamo %d" % i
        return i

    innerdynamo.__doc__ = "docstring for dynamo%d" % i
    innerdynamo.__name__ = "dynamo%d" % i
    setattr(cls, innerdynamo.__name__, innerdynamo)

def add_decorators(cls):
    for name, fn in inspect.getmembers(cls):
        if isinstance(fn, types.UnboundMethodType):
            setattr(cls, name, call_me_dec(fn))

for i in range(2):
    add_dynamo(Dynamo, i)

add_decorators(Dynamo)

d=Dynamo()
d.dynamo0()
d.dynamo1() 
```

输出是：

```
 I am here
    I am here
    in dynamo 0
    in dynamo 1 
```

预期输出：

```
 I am here
    in dynamo 0
    I am here
    in dynamo 1 
```

请解释为什么会发生这种情况以及如何获得所需的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T22:17:31.333

您会看到，因为装饰器代码是在创建装饰函数时调用的，而不是在调用函数时调用的。如果你想让代码在调用时运行，你需要让装饰器返回一个调用被装饰方法的可调用对象（通常是一个闭包）。前任：

```
def call_me_dec(func):
    print 'Decorating %s' % func
    def func_wrapper(*args, **kwargs):
        print 'Calling %s' % func
        return func(*args, **kwargs)
    return func_wrapper 
```

装饰器语法只是语法糖。记住：

```
def func():
    pass
func = deco(func) 
```

相当于

```
@deco
def func():
    pass 
```

无论哪种方式，您最终都会`func`得到本地命名空间中的标签，该标签引用从`func`明确定义的传递到`deco`. 装饰器语法捆绑了一些额外的检查（例如确保输入和输出`deco`始终是可调用的），但基本上，如果某些东西在示例 1 中以给定的方式工作，那么它将在示例 2 中以这种方式工作。

# html - 文本换行在带有左浮动图像的 div 中，但不是带有右浮动图像的 div

> ID：12378566
> 
> 赞同：0
> 
> 时间：2012-09-11T22:01:08.153
> 
> 标签：html, css

我已经能够成功地将文本包装在一个带有左侧图像的 div 中，但我无法将文本包装在一个图像浮动到右侧的 div 中。我试过向左浮动 p。我还尝试将带有右浮动图像的 div 的显示模式更改为内联和内联块。我也尝试使用 text-align left。

这是 div 的代码，文本换行正常。

```
#text_area_top  
        { 
            margin-top:5%; margin-left: 2%; 
            height: 150px; width:700px;  position:relative; 
            font-family:Arial, Helvetica, sans-serif; font-size:18px;
        } 
```

这是文本不会换行的 div 的代码。

```
#text_area_bottom
        {
            margin-top:5%; margin-left: 2%; 
            height: 150px; width:700px;  position:relative; 
            font-family:Arial, Helvetica, sans-serif; font-size:18px; 
            background-color:#00FF00; 
            text-align:left;
        }
#text_area_bottom img { float:right; } 
```

这里有一些额外的代码，对于解决这个问题很重要。

```
p { display:inline-block; position:absolute; margin:0px;   } 
```

如果您需要我提供更多信息，请告诉我，我会及时发布。

这是html：

```
 <div class="content">
            <div id="text_area_top">
                <img src="img.png" id="content_img" />
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi ornare 
                  urna et ligula lobortis sed aliquam eros eleifend. Aliquam gravida tellus mollis                   
                   massa rhoncus egestas.

                   Aliquam molestie arcu vitae est accumsan rutrum. Cras vitae tellus justo. Quisque pulvinar                adipiscing dolor, non consectetur enim  vehicula quis.Etiam tortor augue, interdum et congue a,                                  imperdiet sed risus. Cras sagittis vestibulum</p>
              </div>

              <div id="text_area_bottom">
                <img src="img.png" id="content_img2" />
                <p>Scelerisque vitae, convallis non nibh. Maecenas euismod lacinia ipsum, non vulputate metus eleifend id. Quisque sagittis posuere massa, sed pretium odio                 dignissim eu. In sit amet est non lectus semper pellentesque vitae in tellus. Nullam facilisis auctor quam at pretium.
                </p>

             </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:48:28.687

尝试它在我身边工作。

```
p { width:500px; display:inline-block; position:relative; margin:0px; } 
```

只需为您的 p 标签添加宽度。

# java - Java 人脸检测库

> ID：12378567
> 
> 赞同：4
> 
> 时间：2012-09-11T22:01:13.563
> 
> 标签：java, image-processing, face-detection

我有一大堆图像，需要过滤掉所有有人脸的图像。是否有这样一个 Java 库提供了一个方法，该方法将图像作为输入并输出是或否？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T22:06:58.840

您可以使用[JavaCV](http://code.google.com/p/javacv/)进行人脸检测。JavaCV 是 OpenCV 的 Java 包装器。它不提供真/假，而是图片中人脸的位置。您可以执行以下操作：

```
public class FaceDetect {

   // Create memory for calculations
   CvMemStorage storage = null;

   // Create a new Haar classifier
   CvHaarClassifierCascade classifier = null;

   // List of classifiers
   String[] classifierName = {
                "./classifiers/haarcascade_frontalface_alt.xml",
                "./classifiers/haarcascade_frontalface_alt2.xml",
                "./classifiers/haarcascade_profileface.xml" };

   public FaceDetect() {
        // Allocate the memory storage
        storage = CvMemStorage.create();

        // Load the HaarClassifierCascade
        classifier = new CvHaarClassifierCascade(cvLoad(classifierName[0]));

        // Make sure the cascade is loaded
        if (classifier.isNull()) {
                System.err.println("Error loading classifier file");
        }
   }

   public boolean find (Image value ){
        // Clear the memory storage which was used before
        cvClearMemStorage(storage);

        if(!classifier.isNull()){
                // Detect the objects and store them in the sequence
                CvSeq faces = cvHaarDetectObjects(value.getImage(), classifier,
                                storage, 1.1, 3, CV_HAAR_DO_CANNY_PRUNING);

                // Get the number of faces found.
                int total = faces.total();
                if (total > 0) {
                    return true;
                }
        }
        return false;
   }
} 
```

# sql - 这个数据库子类型关系应该如何建模？

> ID：12378570
> 
> 赞同：1
> 
> 时间：2012-09-11T22:01:25.020
> 
> 标签：sql, database-design, web-applications, language-agnostic

我正在修改一个旧的多租户应用程序，其中购物车功能将多个供应商和多个客户存储在同一个数据库中。一个供应商的一些客户可能是不同供应商的客户。一些供应商实际上可能是另一个供应商的客户。

我目前有一个带有主键的超级类型“party”的表，一个带有主键（references ）`party_ID`的子类型“company”的表和一个带有主键的“vendor”角色的表（references ）。我还有一个联结表，“客户端”，其复合主键为and 。`company_ID``party_ID``vendor_ID``company_ID``vendor_ID``party_ID`

我的问题是“订单”表应该如何引用供应商和客户表？我的第一个想法是该表应该有一个复合主键`vendor_ID`,`client_ID`和`order_ID`(`order_ID`可以是整个表的自动增量或顺序 per `vendor_ID + client_ID`) 但这似乎有点可疑，因为有三个属性组成了键......

有没有人对这个话题有任何见解？大多数“购物车”只与一个供应商打交道，因此订单表只是`client_ID`作为外键列出。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T23:12:54.023

> 我的问题是订单表应该如何引用供应商和客户表？我的第一个想法是该表应该有一个复合主键“vendor_ID”、“client_ID”和“order_ID”，但这似乎有点可疑，因为有三个键......

*复合主键*并不意味着三个键。这意味着一个键由三列组成。

但这不是真正的问题。

订单是会计记录；它*不能*随时间而改变。除非您已经建立了临时表，否则存储 ID 号是有风险的，我怀疑您是否已经这样做了。如果供应商今天更改名称，其名称将不再与之前订单上的名称匹配。您*不能*让会计记录发生这种情况。

除非您通过“订单”表示不寻常的东西，否则我希望 Order_id 是它的主键。可能还有其他限制；甚至可能还有其他关键约束来防止仅由 Order_id 不同的重复订单。但我仍然希望 Order_id 成为订单表的主键。

如果供应商和客户是子类型，我希望您存储的任何（高风险）id 编号都引用子类型表中的 id 编号。在您的情况下，您似乎有一个附加表来标识供应商的客户；它包含列 {vendor_id, client_id}。*该*表的外键引用应该是显而易见的。

您的订单表应该有一个指向*该*表的外键引用，而不是一个指向供应商的外键和另一个指向客户的外键。所以在订单表中，`foreign key (vendor_id, client_id) references vendor_clients (vendor_id, client_id)`. 供应商客户表将需要主键约束或 {vendor_id, client_id} 上的唯一约束。

但是除非您使用时态表，否则您不应该为会计这样做。相反，您可能应该同时存储 id 号和文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T23:14:23.873

对于您的主键，您只需要`order_id`.

实际上，我将使用的复合（和唯一）键是 [ `vendor_id`, `client_id`, `occurredAt`] （其中`occurredAt`是时间戳） - 假设订单只能每毫秒下一次。然而，这是一个广泛的关键，一些系统不欣赏这些。但是，您仍然需要这些列，并且可能已编入索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:14:35.690

我会从这样的事情开始。我承认我仍然不太了解`company, vendor, and client`您的问题之间的区别。正如猫叫所提到的，在这个模型中你不能删除`Parties`( `People`, `Organizations`)；会计记录应该被冻结——通常是通过在订单表中捕获当前的客户/供应商信息。

* * *

![在此处输入图像描述](../Images/42a9a5852c1613bca4493be9d996ddc5.png)

# java - 多行 JTable 单元格在编辑期间不是多行的

> ID：12378573
> 
> 赞同：2
> 
> 时间：2012-09-11T22:01:35.097
> 
> 标签：java, swing, jtable, jtextarea

我正在开发一个应用程序，它有一个需要多行单元格的 JTable。因此我扩展了 JTextArea 并且一切都显示出来了，但是当我尝试编辑一个单元格时。文本显示为单行，编辑后变为多行。我希望文本在编辑过程中保持多行。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T22:07:32.220

使用 JTextArea（而不是使用 JTextField 的默认行为）创建[TableCellEditor并将其设置为 JTable。](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/TableCellEditor.html)

如果您愿意，也可以使用[JEditorPane](http://docs.oracle.com/javase/6/docs/api/javax/swing/JEditorPane.html)来支持文本样式。

---- 编辑2 ----

新的 TableCellEditor：

```
 class MyTableCellEditor extends AbstractCellEditor implements TableCellEditor {

 JComponent component = new JTextArea();

 public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected,
 int rowIndex, int vColIndex) {

 ((JTextArea) component).setText((String) value);

 return component;
 }

 public Object getCellEditorValue() {
 return ((JTextArea) component).getText();
 }
 } 
```

# javascript - Adobe Air SDK 在页面加载时调整窗口大小

> ID：12378574
> 
> 赞同：0
> 
> 时间：2012-09-11T22:01:39.403
> 
> 标签：javascript, html, air

我需要将 html 页面上的 adobe air sdk 窗口调整为某个像素的高度和宽度。不在应用描述符中寻找初始窗口。我不太擅长编码，所以有人可以给我代码吗？我认为这将是一个javascript函数。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:34:27.327

没有意识到我可以只使用普通的javascript来做到这一点：

```
<body onload='window.resizeTo(width,height)'> 
```

# javascript - 如何克隆和附加Barbara 的锚 html 值对div 容器非常好

> ID：12378577
> 
> 赞同：1
> 
> 时间：2012-09-11T22:02:08.810
> 
> 标签：javascript, html, jquery-ui, jquery

如何克隆具有多个`<a href="#">Barbara is so nice</a>`元素的列表的锚 html 值并将其附加到 div 容器。我能够克隆`.counter`元素并将其附加到容器中，但不能使用锚点。

我在[这里创建了一个 jsFidle](http://jsfiddle.net/creativestudio/h3Y8a/)

这是我的js代码：

```
$(window).load(function(){
    $('.ordered-list li a').on("click", function() {
        var button = $(this);
        $('.overlay').fadeIn('slow',function(){
            button.find('.user-comment-list').clone().fadeIn(1000).appendTo('.overlay-content-inner');
            button.find('.counter').clone().appendTo('.overlay-title-content');
    });
});
    $('.icon-remove').click(function(){
        $('.overlay').fadeOut('slow');
        $('.overlay-content-inner, .overlay-title-content').empty();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:39:14.717

我不确定为什么你不能得到锚值。你已经在锚中了。

```
$('.ordered-list li a').on("click", function() { 
```

您正在将点击事件绑定到锚点。它只会增加您命名引用当前锚点的局部变量的混乱`button`。

代替：

```
button.find('.counter').clone().appendTo('.overlay-title-content'); 
```

如果您想附加锚点 HTML，您可以执行以下操作：

```
$('.overlay-title-content').append(button.html()); 
```

### [演示](http://jsfiddle.net/h3Y8a/1/)- 附加锚 HTML 值

如果指向 DEMO 的链接失效，这里是新代码：

```
$('.ordered-list li a').on("click", function() {
    var button = $(this); // not a button! "this" is referencing the clicked anchor.
    $('.overlay').fadeIn('slow', function() {
        button.find('.user-comment-list').clone().fadeIn(1000).appendTo('.overlay-content-inner');
        $('.overlay-title-content').append(button.html());
        //button.find('.counter').clone().appendTo('.overlay-title-content');
    });
});
$('.icon-remove').click(function() {
    $('.overlay').fadeOut('slow');
    $('.overlay-content-inner, .overlay-title-content').empty();
});​ 
```

希望这可以帮助。

# html - 移动应用开发：HTML5 Image 或 Canvas

> ID：12378581
> 
> 赞同：-1
> 
> 时间：2012-09-11T22:02:32.867
> 
> 标签：html, css, mobile, html5-canvas

我对 Web 开发（但不是编程）相当陌生，需要一些建议：

我正在使用 HTML5、CSS 和 Javascript（以及用于设备功能的 Cordova）开发移动应用程序。

该应用程序将类似于抽认卡（您小时候用来记忆事物的那些东西）。会有一些动画（将卡片翻过来）等，但在大多数情况下，抽认卡的设计将是静态的（边框与中心的主要内容）。

进行此操作的最佳方法是什么（在画布上绘图或为每个抽认卡使用图像？我对两者的性能和视觉考虑感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:45:31.413

这实际上取决于卡片将执行的动画类型，如果它们在 x/y 轴上翻转，您可以简单地拥有图像并使用 JS 操纵其大小/翻转它等。

根据我的经验，这些计算/动画更快（如果您希望它在多个设备上兼容）但是任何更复杂的动画都应该使用画布 - 我注意到在为智能手机创建广告时，画布确实会减慢一些动画的速度。

# c++ - C++代码解释

> ID：12378591
> 
> 赞同：0
> 
> 时间：2012-09-11T22:03:20.487
> 
> 标签：c++, bitwise-operators

我有来自串行读取的数组，名为`sensor_buffer`. 它包含 21 个字节。

```
gyro_out_X=((sensor_buffer[1]<<8)+sensor_buffer[2]);
gyro_out_Y=((sensor_buffer[3]<<8)+sensor_buffer[4]);
gyro_out_Z=((sensor_buffer[5]<<8)+sensor_buffer[6]);
acc_out_X=((sensor_buffer[7]<<8)+sensor_buffer[8]);
acc_out_Y=((sensor_buffer[9]<<8)+sensor_buffer[10]);
acc_out_Z=((sensor_buffer[11]<<8)+sensor_buffer[12]);
HMC_xo=((sensor_buffer[13]<<8)+sensor_buffer[14]);
HMC_yo=((sensor_buffer[15]<<8)+sensor_buffer[16]);
HMC_zo=((sensor_buffer[17]<<8)+sensor_buffer[18]);
adc_pressure=(((long)sensor_buffer[19]<<16)+(sensor_buffer[20]<<8)+sensor_buffer[21]); 
```

这条线有什么作用：

```
variable = (array_var<<8) + next_array_var 
```

它对8位有什么影响？

```
<<8  ? 
```

更新：任何其他语言的例子（java，处理）？

处理示例：（为什么使用 H like header？）。

```
/*
 * ReceiveBinaryData_P
 *
 * portIndex must be set to the port connected to the Arduino
 */
import processing.serial.*;

Serial myPort;        // Create object from Serial class
short portIndex = 1;  // select the com port, 0 is the first port

char HEADER = 'H';
int value1, value2;         // Data received from the serial port

void setup()
{
  size(600, 600);
  // Open whatever serial port is connected to Arduino.
  String portName = Serial.list()[portIndex];
  println(Serial.list());
  println(" Connecting to -> " + Serial.list()[portIndex]);
  myPort = new Serial(this, portName, 9600);
}

void draw()
{
  // read the header and two binary *(16 bit) integers:
  if ( myPort.available() >= 5)  // If at least 5 bytes are available,
  {
    if( myPort.read() == HEADER) // is this the header
    {
      value1 = myPort.read();                 // read the least significant byte
      value1 =  myPort.read() * 256 + value1; // add the most significant byte

      value2 = myPort.read();                 // read the least significant byte
      value2 =  myPort.read() * 256 + value2; // add the most significant byte

      println("Message received: " + value1 + "," + value2);
    }
  }
  background(255);             // Set background to white
  fill(0);                     // set fill to black
// draw rectangle with coordinates based on the integers received from Arduino
  rect(0, 0, value1,value2);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T22:08:37.950

您的代码具有相同的模式：

```
value = (partial_value << 8) | (other_partial_value) 
```

您的数组以 8 位字节存储数据，但值以 16 位字节存储。每个数据点都是两个字节，最重要的字节首先存储在数组中。该模式通过将最高有效字节向左移动 8 位，然后将最低有效字节 OR'ing 到低 8 位来简单地构建完整的 16 位值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T22:06:37.923

它是一个移位运算符。它将变量中的位向左移动 8。向左移动 1 位相当于乘以 2（向右移动除以 2）。所以本质上 <<8 相当于乘以 2^8。

有关 C++ 运算符的列表及其作用，请参见此处： [http ://en.wikipedia.org/wiki/C%2B%2B_operators](http://en.wikipedia.org/wiki/C%2B%2B_operators)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T22:08:04.017

`<<`是左移位运算符，结果是从第一个操作数开始向左*移动*的位，从右侧填充 0 位。

伪代码中的一个简单示例：

```
x = 10000101;
x = x << 3;

now x is "00101000" 
```

研究 wikipedia 上的[Bitwise operation](http://en.wikipedia.org/wiki/Bitwise_operation#Bit_shifts)文章以获得介绍。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T22:09:44.730

这只是一个位移运算符。If 基本上是取值并将位移到左侧。这相当于将值乘以 2^8。该代码看起来像是读取数组的 2 个字节并从每对中创建一个 16 位整数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-11T22:16:19.250

这似乎`sensor_buffer`是一个字符矩阵。为了获得您的价值，例如，`gyro_out_X`您必须结合`sensor_buffer[1]`and `sensor_buffer[2]`，其中

*   `sensor_buffer[1]`持有最高有效字节和
*   `sensor_buffer[2]`保存最低有效字节

在这种情况下

```
int gyro_out_X=((sensor_buffer[1]<<8)+sensor_buffer[2]); 
```

结合两个字节：

*   如果`sensor_buffer[1]`是 0xFF
*   并且`sensor_buffer[2]`是 0x10

那么 gyro_out_X 是 0xFF10

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-11T22:07:51.477

它将位向左移动 8 位，例如：

```
0000000001000100 << 8 = 0100010000000000

0000000001000100 << 1 = 
0000000010001000 << 1 =
0000000100010000 << 1 =
0000001000100000 << 1 =
0000010001000000 << 1 =
0000100010000000 << 1 =
0001000100000000 << 1 =
0010001000000000 << 1 =
0100010000000000 
```

# macos - NSSharingService 共享子菜单

> ID：12378595
> 
> 赞同：14
> 
> 时间：2012-09-11T22:03:41.073
> 
> 标签：macos, cocoa, menu, menuitem, submenu

如何在 Mac 应用程序中添加共享子菜单？例如 Safari > 文件 > 共享。我戳了一下[Apple SharingServices 示例代码](http://developer.apple.com/library/mac/#samplecode/SharingServices/Introduction/Intro.html#//apple_ref/doc/uid/DTS40012313-Intro-DontLinkElementID_2)，但它不包含工作菜单项。

![在此处输入图像描述](../Images/9daba0c6f5d16c500821c1647d2e95e9.png)

现在我有一个按钮，点击时会显示可用共享服务的选择器：

```
NSMutableArray *shareItems = [NSMutableArray arrayWithObject:[self.noteSynopsisView string]];
NSSharingServicePicker *sharingServicePicker = [[NSSharingServicePicker alloc] initWithItems:shareItems];
sharingServicePicker.delegate = self;
[sharingServicePicker showRelativeToRect:[self.shareButton bounds] ofView:self.shareButton preferredEdge:NSMaxYEdge]; 
```

我还在我的 MainWindow.xib 的文件菜单下定义了一个共享子菜单项。

据我了解，NSSharingService 列表正在动态生成。所以我不能真正为我在 Interface Builder 中创建的菜单项预定义服务。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T01:54:10.950

查看 NSSharingService 的 +sharingServicesForItems:。在 -validateMenuItem: 方法中，您可以使用它返回的 NSSharingServices 的 -title 和 -image 创建子菜单。将每个服务与每个菜单项相关联，并将每个菜单项的操作指向此：

```
- (IBAction)shareFromService:(id)sender {
  [[sender representedObject] performWithItems: arrayOfItemsToShare];
} 
```

这真的很简单。苹果在这方面做得很好。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T07:29:07.697

我发现要点可以帮助您轻松创建适当服务的子菜单。 [https://gist.github.com/eternalstorms/4132533](https://gist.github.com/eternalstorms/4132533)

这是一个 NSSharingServicePicker 类别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-01T07:47:19.170

斯威夫特版本：

```
extension NSSharingServicePicker {

    class func menu(forSharingItems items: [AnyHashable]) -> NSMenu? {

        let sharingServices = NSSharingService.sharingServices(forItems: items)

        if sharingServices.isEmpty {
            return nil
        }

        let menu = NSMenu()

        for service in sharingServices {

            let item = MenuItem(label: service.title, action: #selector(_openSharingService), target: self, userInfo: ["sharingItems": items])

            item.image = service.image
            item.representedObject = service
            item.target = self
            menu.addItem(item)

        }

        return menu

    }

    @objc class private func _openSharingService(sender: MenuItem) {

        guard let items = sender.userInfo["sharingItems"] as? [AnyHashable], let service = sender.representedObject as? NSSharingService else {
            return
        }

        service.perform(withItems: items)

    }

}

class MenuItem: NSMenuItem {

    var userInfo: [String : Any] = [:]

    init(label: String, action: Selector?, target: AnyObject?, userInfo: [String : Any]) {
        self.userInfo = userInfo
        super.init(title: label, action: action, keyEquivalent: "")
    }

    required init(coder decoder: NSCoder) {
        super.init(coder: decoder)
    }

} 
```

# java - Java webservice监控（图表）

> ID：12378603
> 
> 赞同：0
> 
> 时间：2012-09-11T22:04:27.480
> 
> 标签：java, web-services, monitoring

我正在寻找一种允许监控 web 服务正常运行时间/响应时间的工具。我对两个特定的群体感兴趣：

1.  监控现有应用程序中的外部调用：显示所有外部调用的响应时间。

2.  仅监控 web 服务：一个应用程序会定期查询给定的 web 服务，准备好请求并记录响应时间。

在这两种情况下，我都想获得一些图表和基本报告（至少平均/最小/最大响应时间）。我应该看哪些工具，你有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:46:00.020

Jmeter 可以帮助你。请参考以下链接 [http://jmeter.apache.org/usermanual/build-ws-test-plan.html](http://jmeter.apache.org/usermanual/build-ws-test-plan.html)

# javascript - $(.class).empty 总是缺少一个元素

> ID：12378604
> 
> 赞同：1
> 
> 时间：2012-09-11T22:04:32.863
> 
> 标签：javascript, jquery, html, web

`enter code here`我对 jquery.empty() 有一点问题。我有一些 Html Div，如下所示：

```
<div id="Description_Error" class="ui-helper-hidden errorMessage"></div>
    <div id="Order_Error" class="ui-helper-hidden errorMessage"></div>
    <div id="ColorHex_Error" class="ui-helper-hidden errorMessage"></div> 
```

这些 Div 在运行时会被一些 Uls 和 Lis 填满。它们基本上用于显示错误。现在，我正在清除它在进行 POST 之前显示的所有错误。

我用

$('ui-helper-hidden errorMessage').empty();

为了那个原因。现在，我适合显示所有三个错误，然后它将消除两个 bue 留下一个。如果它当时只显示一个错误，那么它根本不会被删除。我不知道为什么班级选择决定总是留下一个元素。无论如何，我试图在 Jsfiddler 上复制相同的行为，但效果很好。我无法找到关于我的代码可能有什么问题的线索。有什么建议么？

这是适用于所有文件的提琴手链接。只是我的 HTML 代码不能正常工作：

[http://jsfiddle.net/g55Rs/3/](http://jsfiddle.net/g55Rs/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T22:11:28.123

您既不是指类也不是元素标识符。

```
$('ui-helper-hidden errorMessage').empty(); 
```

要引用类，请使用`.`，要使用元素标识符，请使用`#`.

在您的情况下，这将清空所有 div：

```
// Selecting all elements which have both classes
$('.ui-helper-hidden.errorMessage').empty(); 
```

### [DEMO](http://jsfiddle.net/znbMZ/) - 清空所有具有两个类的元素

我还在 DEMO 中添加了一些只有一个或另一个类的元素，以表明它们不受影响。

# tsql - 在 T-SQL 中顺序解析表的最佳方法

> ID：12378605
> 
> 赞同：2
> 
> 时间：2012-09-11T22:04:34.733
> 
> 标签：tsql, sql-server-2008-r2

我正在 SQL Server 中编写一个存储过程，希望有人能提出一种计算效率更高的方法来处理这个问题：

我有一个包含 3000 个行项目的**客户订单**（即“产品需求”）数据表。每条记录表示特定产品的订单数量。

我还有另一个**生产订单**表（即“产品供应”）数据，其中包含大约 200 个行项目。每条记录表示每个特定产品的可用数量。

问题是供应通常少于需求，因此，自定义订单表包含一个分配优先级值，该值显示每个客户订单在接收产品的队列中的位置。

将生产订单中的可用数量分配给客户订单中的订单数量的最佳方法是什么？请注意，您分配给每个客户订单的数量不能超过已订购的数量。

我可以通过创建一个 WHILE 循环并逐个产品、逐行地分配产品来做到这一点，但它非常慢。

有没有更快的基于集合的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:47:06.740

我没有要测试的数据。这不会尝试填充部分数量。

```
 select orders.custID, orders.priority, orders.prodID, orders.qty, SUM(cumu.qty) as 'cumu'
 from orders 
 join orders as cumu 
 on cumu.prodID = orders.prodID 
    and cumu.priority <= orders.priority
 join available 
 on availble.prodID = orders.prodID  
 group by orders.custID, orders.priority, orders.prodID, orders.qty 
 having SUM(cumu.qty) < availble.qty
 order by orders.custID, orders.priority, orders.prodID 
```

# flash - IE9中的Flash失真

> ID：12378608
> 
> 赞同：0
> 
> 时间：2012-09-11T22:04:39.210
> 
> 标签：flash, internet-explorer-9, distortion

我的客户报告了 ie9 (9.0.8112.16421) 中闪存的奇怪问题。这是结果的截图：http: [//i46.tinypic.com/f41ens.jpg](http://i46.tinypic.com/f41ens.jpg)。Flash 应用仅供内部使用，因此我无法提供网址。这种效果发生在应用程序中的一些点击之后，但显然是在相同的地方。少数测试人员无法重现该问题。

是什么原因？

我的假设是：

*   flash不是最新的吗？
*   显卡驱动问题？
*   放大查看的页面（右下角），也许是一个原因？

谢谢并恭祝安康

# php - 提交按钮正在运行会话验证

> ID：12378609
> 
> 赞同：0
> 
> 时间：2012-09-11T22:04:40.913
> 
> 标签：php, html

我有这个页面，当它打开时只是读取一些会话变量并将它们分配给新变量然后取消设置它们，我这样做是为了它们不能被转移到另一个页面。这一切都很好。

但是，我在同一页面上也有一个带有表单的提交按钮。出于某种原因，当我按下提交按钮时，它没有完成它应该完成的查询，只是重用了会话检查代码。这是因为会话变量未设置，因此无法对其进行验证。

为什么它重新运行此会话验证而不运行我的提交按钮代码/

这是页面顶部的会话验证，并且是由于某种原因在单击提交按钮时重新运行的代码

```
$ahid="";
    $bid="";
    $np="";
    $nt="";

if (isset($_SESSION['ahid'])) {

          $ahid = $_SESSION['ahid'];
          unset($_SESSION['ahid']);
          if (isset($_SESSION['bid'])) {

                $bid = $_SESSION['bid'];
                unset($_SESSION['bid']);
                if (isset($_SESSION['nt'])) {

                        $nt = $_SESSION['nt'];
                        unset($_SESSION['nt']);
                        if (isset($_SESSION['np'])) {

                            $np = $_SESSION['np'];
                            unset($_SESSION['np']);
                         }else{
                                  header('Location: builders.php?hi=1');
                                  exit();
                              }
                 }else{
                          header('Location: builders.php?hi=2');
                          exit();
                      }
         }else{
                  header('Location: builders.php?hi=3');
                  exit();
              }
     }else{
              header('Location: builders.php?hi=4');
              exit();
          } 
```

这是应该运行的提交按钮代码，但甚至没有被触及

```
if(isset($_POST['build_chk_finish'])){

        $construction_insert = mysql_query("INSERT INTO construction (user_id, estate_id, addon_h_id, builder_id, con_total_price, con_total_time, con_time_started, con_time_ending, con_completed) 
     VALUES('$user_id', '$estate_id', '$ahid', '$bid', '$np', '$nt', now(), '$future_date', '0')", $general)  
     or die (mysql_error());

     $construction_id = mysql_insert_id();

     $con_error="";
     $con_error = "Congratualtions! Your Builder has been hired and has begun work.";
            $_SESSION['error'] = $con_error;
            header("Location: houses.php");

    } 
```

只是为了补充信息，当我按下提交按钮时，第一次会话验证失败`builders.php?hi=4`。

这是提交按钮

`<input name="build_chk_finish" type="submit" class="build_chk_finish" id="bc_submit"/>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:28:59.023

据我了解，这个早午餐是执行的：

```
}else{
        header('Location: builders.php?hi=4');
        exit();
} 
```

据我了解，什么时候不应该。但是看看 if 分支。当 $_SESSION['ahid'] 未设置时，将在任何时候执行上述一个。那是因为 else 与`if (isset($_SESSION['ahid'])) {`：

```
 if (isset($_SESSION['ahid'])) {
        ....// a lot of other if statements here
    }else{
            header('Location: builders.php?hi=4');
            exit();
    } 
```

# android - 如何在自定义视图中从样式资源中读取 android:layout_height

> ID：12378610
> 
> 赞同：1
> 
> 时间：2012-09-11T22:04:44.777
> 
> 标签：android, android-custom-view

我正在构建一个`View`包含两个标准视图的自定义。我为每个包含的视图都有一个默认样式，以及一个允许用户为每个包含的视图指定自定义样式的自定义属性。我可以很好地获取默认*样式和*自定义样式，并将正确的样式 ID 作为每个包含的 View 构造函数的第三个参数传递。我很难做的是`ViewGroup.LayoutParams`根据`android:layout_height`和`android:layout_width`以适当的样式为这些包含的视图生成一个。

看来*我*需要使用`ViewGroup.LayoutParams(Context, AttributeSet)`构造函数，而[AttributeSet 文档](http://developer.android.com/reference/android/util/AttributeSet.html)说我应该得到一个`AttributeSet` *via*

```
XmlPullParser parser = resources.getXml(myResouce);  
AttributeSet attributes = Xml.asAttributeSet(parser); 
```

...但这会引发 a`Resources$NotFoundException`并发出`frameworks/base/libs/utils/ResourceTypes.cpp`警告`Requesting resource %p failed because it is complex`。

因此，我的问题，按特异性降序排列：

1.  有没有办法得到一个`XmlPullParser`适用于“复杂”元素的方法？
2.  是否有其他方法可以获取与元素`AttributeSet`对应的`<style>`元素？
3.  是否有其他方法来构建一个`LayoutParameters`将关注给定样式中的`layout_height`和值的方法？`layout_width`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T00:47:21.683

```
 static ViewGroup.LayoutParams layoutFromStyle(Context context,
        int style) {
      TypedArray t = context.getTheme().obtainStyledAttributes(
              null,
              new int[] { android.R.attr.layout_width,
                      android.R.attr.layout_height }, style, style);
      try {
          int w = t
                  .getLayoutDimension(0, ViewGroup.LayoutParams.WRAP_CONTENT);
          int h = t
                  .getLayoutDimension(1, ViewGroup.LayoutParams.WRAP_CONTENT);
          return new ViewGroup.LayoutParams(w, h);
      } finally {
          t.recycle();
      }
    } 
```

# javascript - jQuery在元素的上下文中运行函数

> ID：12378611
> 
> 赞同：0
> 
> 时间：2012-09-11T22:04:58.793
> 
> 标签：javascript, jquery, html, function

我有一些功能（例如）查找所有 div 并附加到它们。

```
function test() {
    $('div').append(/*...*/);
} 
```

现在我正在通过 $.get 函数将新的 div 加载到我的容器元素中。加载新的 div 后，我想在 contex（仅限于）我的容器元素中调用 test() 函数。我只想将某物附加到新的 div 中。我不想将两次附加到旧 div 中。

如果可能的话，我不想编辑测试功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:12:47.740

```
function test(container) {
    $(container).find('div').append(/*...*/);
} 
```

像这样使用：

```
test("body");
test("#mainContainer");
test("ul.spiffy > li"); 
```

简而言之，您只需将要修改的 div 的选择器传入其中。

如果您想允许“默认”值，您可以执行以下操作：

```
function test(container) {
    if (container == undefined) container = "body";
    $(container).find('div').append(/*...*/);
} 
```

现在，如果您不传递任何参数进行测试，它将`append`应用于`div`.`body`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:07:42.520

```
$('div', 'container').append(/* code */); 
```

# html - 在整个屏幕上扩展图像

> ID：12378612
> 
> 赞同：0
> 
> 时间：2012-09-11T22:05:01.160
> 
> 标签：html, css

我为正在开发的网站创建了站点地图，但在整个屏幕上拉伸背景图像时遇到了一些问题，如此屏幕截图所示。[截屏](http://img.ctrlv.in/504fb3d6eb5dd.jpg)

如您所见，我正试图摆脱右侧和底部的边框。我使用的标记是

```
#sitemap {
background-image:url(images/gradient-sitemap.png);
position: relative;
left: -10px;
top: -1px;
width: 100%;;
height: 225px; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:17:58.953

尝试从您的正文标签和 HTML 中删除所有内容

```
html, body{margin:0px; padding:0px border:0px} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:23:14.033

将宽度设置为 101%，将高度设置为大于当前 225px

# batch-file - 使用用户输入自定义 .bat 关机命令

> ID：12378614
> 
> 赞同：3
> 
> 时间：2012-09-11T22:05:13.333
> 
> 标签：batch-file, dos, shutdown

好的。我想出了一种将 .bat 文件中的关机命令变成即时通讯工具的方法，因为我工作的地方不允许使用即时通讯软件：

```
 shutdown -s -m \\[computer name] -t 20 -c "[message]"
    PING 127.0.0.1 -n 6
    shutdown -a -m \\[computer name] 
```

这工作正常，5 秒后中止关机命令，但您必须使用文本编辑器手动编辑计算机名称和消息并重新启动程序才能发送另一条消息。我想要一种使用 SET 命令获取用户输入的方法，该命令将计算机名称和消息作为输入。我已经尝试过了，但是没有用：

```
 :Jump
    set /P computer ="Enter the computer name: "
    set /P message ="Enter the message: "
    shutdown -s -m %computer% -t 20 -c "%message%"
    PING 127.0.0.1 -n 6
    shutdown -a -m %computer%
    GOTO Jump 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T02:54:42.230

您需要删除变量名和等号之间的空格：

```
set /p computer=Enter the computer name: 
```

否则不会设置变量（默认为“”）

# c - 如何打印 short int C 对象的字节表示

> ID：12378615
> 
> 赞同：2
> 
> 时间：2012-09-11T22:05:28.137
> 
> 标签：c, int, byte, short

> **可能重复：**
> [使用 C 以二进制表示形式打印 int](https://stackoverflow.com/questions/1024389/print-an-int-in-binary-representation-using-c)

我将如何打印一个短整数的字节表示，并在 C 中加倍。

假设我有一个函数 display_shortInt，我将如何让它打印一个短整数的字节表示？我是C新手，谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T22:17:13.423

那这个呢？

```
void print_bytes(void *p, size_t len)
{
    size_t i;
    printf("(");
    for (i = 0; i < len; ++i)
        printf("%02X", ((unsigned char*)p)[i]);
    printf(")");
}

void print_short(short x)
{
    print_bytes(&x, sizeof(x));
}

void print_double(double x)
{
    print_bytes(&x, sizeof(x));
}
//etc. 
```

这将以十六进制形式打印形成值的字节，每个字节两个字符。

例如，在 little-endian 机器中，`print_short(42)`将打印`(2A00)`. 在大端机器中它将是`(002A)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T22:14:24.820

没有直接的方法（即使用 printf 或其他标准库函数）来打印它。您将不得不编写自己的函数。

```
void printbits(unsigned int v) {
   for (; v; v >>= 1) 
      putchar('0' + (v & 1));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T22:48:35.073

如果您想查看它在内存中的组织方式（取决于架构）：

```
short val = 0x1234;
printf( "%02x%02x", ((char*)&val)[0], ((char*)&val)[1] ); 
```

If you just want to see how it is written (big-endian):

```
printf( "%04x", val ); 
```

# ruby-on-rails - 如何使用 Rails 在 PostgreSQL 中创建日期范围

> ID：12378618
> 
> 赞同：3
> 
> 时间：2012-09-11T22:05:49.453
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, postgresql-9.2, range-types

我正在使用 Rails 3.2.7 和 Postgres 9.2 尝试创建日期范围

这是我创建它的方式

```
schedule_block              = ScheduleBlock.new
schedule_block.date_range   = [Date.new, Date.new]
schedule_block.save 
```

这是结果查询和错误：

```
INSERT INTO "schedule_blocks" ("date_range") VALUES ($1) RETURNING "id"  [["date_range", [Mon, 01 Jan -4712, Mon, 01 Jan -4712]]]
PG::Error: ERROR:  malformed range literal: "---
- -4712-01-01
- -4712-01-01
"
DETAIL:  Missing left parenthesis or bracket.
: INSERT INTO "schedule_blocks" ("date_range") VALUES ($1) RETURNING "id"
   (0.1ms)  ROLLBACK
Completed 500 Internal Server Error in 496ms 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T22:13:20.713

如果此拉取请求将被合并，将在 rails 4 中可用 - [https://github.com/rails/rails/pull/7345](https://github.com/rails/rails/pull/7345)

# windows - Windows R 中的 TTF/OTF 字体选择：屏幕上与 pdf()

> ID：12378620
> 
> 赞同：5
> 
> 时间：2012-09-11T22:05:52.630
> 
> 标签：windows, r, unicode, fonts

我知道在 Linux 或 Mac 上的 R 中，字体始终被定义为参数 family="Charis SIL" 到 par()、text() 或图形设备函数之一，如 tiff()、svg() 等（用您想要的任何字体名称替换“Charis SIL”）。我也知道在 Windows 上，这仅适用于 cairo_pdf() 和 svg() 设备；jpeg()、tiff()、png() 和 bmp() 等光栅图形设备要求首先将字体映射到“Windows 字体数据库”中：

```
# this doesn't work on windows
jpeg(filename='test1.jpg', family='Charis SIL')
plot(0,0,type='n',ann=FALSE,frame.plot=FALSE)
text(0,0,labels='iyeøɛœaɶɪʏæɑɒʌɔɤoɯuʊɨʉɘɵəɜɞɐɚɝ')
dev.off()
# (gives warnings: Font family not found in Windows font database)  

# this does work on windows (assuming you have the Charis SIL font installed)
windowsFonts(myCustomWindowsFontName=windowsFont('Charis SIL'))
jpeg(filename='test2.jpg', family='myCustomWindowsFontName')
plot(0,0,type='n',ann=FALSE,frame.plot=FALSE)
text(0,0,labels='iyeøɛœaɶɪʏæɑɒʌɔɤoɯuʊɨʉɘɵəɜɞɐɚɝ')
dev.off() 
```

pdf() 设备仍然不同：它似乎需要在 postscriptFonts() 和/或 pdfFonts() 数据库中定义的字体，这意味着只有 Type1 字体：

```
# this doesn't work on windows
pdf('test.pdf', family='Charis SIL')
# gives error: Unknown family "Charis SIL"

# this doesn't work either
windowsFonts(myCustomWindowsFontName=windowsFont('Charis SIL'))
pdf('test.pdf', family='myCustomWindowsFontName')
# gives error: Unknown family "myCustomWindowsFontName"

# this also won't work
pdf.options(family='Charis SIL')
pdf('test.pdf')
# gives error: Invalid font type
# also gives warning: font family "Charis SIL" not found in Postscript font database 
```

通常这无关紧要，因为 cairo_pdf() 可以很好地替代 pdf() 设备，并且可以很好地处理 TTF 和 OTF 字体。问题是，如果用户在屏幕设备上绘图，然后使用菜单命令另存为 PDF，它似乎调用 pdf() 而不是 cairo_pdf()，然后会引发错误：

```
# this part works
windowsFonts(myCustomWindowsFontName=windowsFont('Charis SIL'))
par(family='myCustomWindowsFontName')
plot(0,0,type='n',ann=FALSE,frame.plot=FALSE)
text(0,0,labels='iyeøɛœaɶɪʏæɑɒʌɔɤoɯuʊɨʉɘɵəɜɞɐɚɝ')

# but menu command "File > Save As > PDF" gives errors:
# Error: Invalid font type
# Warning: font family "Charis SIL" not found in Postscript font database 
```

这是一个问题，因为我正在开发的 R 包在 Windows 上一直未能通过“R CMD 检查”，显然是因为示例代码生成的屏幕输出会自动保存为 PDF，从而产生上述错误。一种解决方案是放弃 Windows 中屏幕设备的自定义字体（即，如果选择的输出是“screen”，则忽略“family”参数）。另一种选择是使用 Cairo() 包进行屏幕绘图，但如果可以的话，我更愿意坚持使用基本图形。有什么方法可以在屏幕绘图中获取自定义字体，并且在使用“另存为 PDF”菜单命令时不会引发错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:43:21.233

我最终解决这个问题的方法如下：

```
oldSans <- windowsFonts()$sans
windowsFonts(sans=windowsFont('Charis SIL'))
par(family='sans') # this line isn't necessary anymore
plot(0,0,type='n',ann=FALSE,frame.plot=FALSE)
text(0,0,labels='iyeøɛœaɶɪʏæɑɒʌɔɤoɯuʊɨʉɘɵəɜɞɐɚɝ')
windowsFonts(sans=oldSans) 
```

这样，屏幕窗口中将使用正确的字体，当用户使用菜单命令保存为 PDF 时，PDF 将被保存，但使用默认的 sans 字体而不是自定义字体。仅在 PDF 确实被导出的意义上，它是一个“解决方案”，但如果绘图具有非 ASCII 字形，则不能保证它们会出现在以这种方式生成的 PDF 中。它也可以说比原来的情况更糟，因为动作不再抛出一个`error`甚至一个`warning`。故事的寓意：不要依赖 GUI 中的菜单命令来执行您应该知道如何在控制台中执行的操作。

# drupal-7 - 具有空字段的多个字段组

> ID：12378622
> 
> 赞同：1
> 
> 时间：2012-09-11T22:05:59.680
> 
> 标签：drupal-7, drupal-fields

我正在努力使这个工作

```
 [Title Field] [Link Field]

 [Add More values] // Will add a [Title Field] [Link Field] 
```

但例如第一个`[Title Field]`是具有值：Foo。带有指向[http://foogle.fo](http://foogle.fo)的链接 然后我单击`[Add More values]`，显示组字段的新行。在这一行中，我只写在`[Link Field]`.

当我保存它时，它还将保存标题和链接字段之间的正确连接。但是我怎么可能在一个循环中打印它，这样`print_r($node->field_titel);`只会返回一个字段（一个有值的字段），我还想要一个空字段，这样我就可以获取连接到每个标题的链接。

有关字段组的更清晰信息，请参见图像。 ![多字段示例](../Images/b3d4bcb4b1df73ac145e4e355ce8202e.png) 因此，如果有第三行，第二行不会获取第二个`Beskrivning`值，它将获取第三个值`Beskrivning`。因为对象`$node->field_beskrivning`不会返回任何空结果。

所以，我想要的是一个`$node->field_beskrivning`以正确顺序排列的空行或任何其他解决方案示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T00:12:29.837

你可以试试[Field Collection 模块](http://drupal.org/project/field_collection)

> Field Collection 模块是 CCK3 Multigroup 的继承者。它允许将一组字段组合在一起并作为单个字段处理。例如，可以创建一个名为 Playlist 的字段集合，其中包含文本字段 Song 和 Artist。创建播放列表条目时，歌曲和艺术家字段作为播放列表字段的元素一起显示。

# android - android中的run-as命令

> ID：12378623
> 
> 赞同：1
> 
> 时间：2012-09-11T22:06:01.963
> 
> 标签：android

我目前正在使用名为 AIDE 的 ide 应用程序直接在我的设备上进行开发。但是在创建数据库后，我无法访问它来检查我的数据/应用程序是否正常工作。

我已经设法在手机插入笔记本电脑的情况下使用 adb 运行运行方式，但我真的希望它可以直接在手机上工作，这样我就可以在移动中进行编码、测试和调试。

使用 connectbot 我可以在 system/bin/ 中看到 run-as 命令，但它没有可执行访问权限。

有任何想法吗？

# java - Toggle's with HashMap，怎么会更好呢？

> ID：12378635
> 
> 赞同：0
> 
> 时间：2012-09-11T22:07:11.210
> 
> 标签：java, map, hashmap, toggle

```
public Map<String, Boolean> zoom = new HashMap<String, Boolean>();

public void Toggle() {
        if(zoom.containsKey("test")){
            // Turning off
            zoom.remove("test");
        } else {
            // Turning on.
            zoom.put("test", false);
        }
    } 
```

我使用 HashMap 来完成它，但我从不使用布尔值。那么我怎样才能摆脱哈希图，而不会遇到太多问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T22:11:37.320

只是改变：

```
Map<String, Boolean> zoom = new HashMap<String, Boolean>(); 
```

到

```
Set<String> zoom = new HashSet<String>(); 
```

然后将所有调用替换为`put(String, Boolean)`，`add(String)`调用`remove`不会改变，调用`containsKey(String)`替换为`contains(String)`。

# yii - Yii: 如何使用翻译 Yii::t() 和超链接

> ID：12378636
> 
> 赞同：4
> 
> 时间：2012-09-11T22:07:16.067
> 
> 标签：yii

我的代码中有很多与此类似的行：

```
echo Yii::t('forms','Would you like to create a new item?'); 
```

例如，我想在“创建新项目”周围进行超链接。

以下是我考虑过的一些替代方案：

1.  将 URL 拆分为 2 个已翻译的字符串，由超链接包围：

    ```
    echo Yii::t('forms','Would you like to').' <a href="/new_item">'.Yii::t('forms','create a new item').'</a>?'; 
    ```

2.  使用占位符，如 Yii 文档中所述（[http://www.yiiframework.com/doc/guide/1.1/en/topics.i18n](http://www.yiiframework.com/doc/guide/1.1/en/topics.i18n)虽然没有给出超链接作为明确的示例）：

    ```
    echo Yii::t('forms','Would you like to {url}create a new item',array('{url}'=>"<a href='/new_item'>")).'</a>?'; 
    ```

可能有一种更简单的方法可以做到这一点，但我一直无法找到首选方法......构建包含 URL 的翻译字符串的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-13T13:00:20.050

我建议你这个解决方案：

```
echo Yii::t(
    'forms', 
    'Would you like to {link:create}create a new item{/link}?',
    array(
        '{link:create}'=>'<a href="/new_item">',
        '{/link}'=>'</a>',
    )
); 
```

好处是，如果您想在标签中放置`id`,和更多内容，`class`您可以这样做。所以翻译字符串是清晰的。 请注意，in只是一个指向超链接字符串的理想字符串。`onclick``a`
`create``{link:create}`

另一个高级示例：

```
echo Yii::t(
    'forms', 
    'Would you like to {link:create}create a new item{/link}? And you can {link:delete}delete the item{/link}.',
    array(
        '{link:create}'=>'<a href="/new_item" class="button">',
        '{link:delete}'=>'<a href="#" id="item-21" onclick="delete(21);">',
        '{/link}'=>'</a>',
    )
); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T03:03:44.933

根据目标语言，链接在翻译字符串中可能有不同的位置（开头、中间或结尾）和标签。因此，您应该只对 url 使用占位符：

```
echo Yii::t(
  'forms', 
  'Would you like to <a href="{url}">create a new item</a>?', 
  array('{url}' => '/new_item')
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T08:59:14.000

如果您有动态 uri，请使用以下内容：

```
echo Yii::t(
    'forms',
    'Would you like to <a href=":url">create a new item?</a>',
    array(':url'=>'/new_item')
); 
```

或者：

```
echo Yii::t(
    'forms',
    'Would you like to <a href="/new_item">create a new item?</a>',
); 
```

或者，如果您想传递 url 以外的其他动态属性，请使用以下内容：

```
echo Yii::t(
    'forms',
    'Would you like to <a :linkAttr>create a new item?</a>',
    array('linkAttr'=>'href="/new_item" id="link-id" class="link-class"')
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-26T10:59:54.510

我认为这是一个更好的解决方案：

```
echo Yii::t(
    'forms',
    'Would you like to {action}?'
    [
        'action' => Html::a(
            Yii::t('forms', 'create a new item'),
            ['controller/action']
        )
    ]
); 
```

此解决方案的好处

*   您可以使用助手来生成您的链接
*   您可以在不修改翻译的情况下修改您的 html 代码
*   做翻译的人不需要知道任何关于 html 的知识，也不会弄乱 html 代码。

# c# - 如何使 System.Net.WebProxy 不绕过本地 url？

> ID：12378638
> 
> 赞同：7
> 
> 时间：2012-09-11T22:07:18.947
> 
> 标签：c#, .net, proxy, restsharp, webproxy

我正在尝试让[Fiddler](http://www.fiddler2.com/fiddler2/)与[RestSharp](http://restsharp.org/)女巫使用一起工作`System.Http.WebProxy`，所以我希望将其设置为`localhost:8888`或`127.0.0.1:8888`

这是代码：

```
 var webProxy = new WebProxy(new Uri("http://127.0.0.1:8888"))
    {
        BypassProxyOnLocal = false
    };

    var bypassed = webProxy.IsBypassed(new Uri("http://127.0.0.1"));
    Console.WriteLine(bypassed); 
```

输出：**真**

MSDN 声明如下：

> IsBypassed方法用于确定在访问 Internet 资源时是否绕过代理服务器**。**
> 
> **BypassProxyOnLocal 和 BypassList 属性控制IsBypassed**方法的返回值。
> 
> **IsBypassed**在以下任一条件下返回**true**：
> 
> *   如果 BypassProxyOnLocal 为**true**并且*host*是本地 URI。本地请求由 URI 中缺少句点 (.) 来标识，如“http://webserver/”。
>     
>     
> *   如果主机匹配 BypassList 中的正则表达式。
>     
>     
> *   如果地址为空。
>     
>     
> 
> 所有其他条件返回**false**。

我不明白为什么在我的情况下它返回**true**，这是一个错误吗？那如何让它工作呢？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T22:11:21.657

这是在 .Net 框架中实现 HTTP 客户端库的**硬编码行为**，反映了 Internet Explorer 9 之前 WinInet 的行为。

请参阅Fiddler 网站上的[从 IE 或 .NET 监控到 localhost 的流量，](http://fiddler2.com/documentation/Configure-Fiddler/Tasks/MonitorLocalTraffic)了解如何处理它。

# php - 无法在类内的 try-block 中使用 return

> ID：12378640
> 
> 赞同：0
> 
> 时间：2012-09-11T22:07:23.753
> 
> 标签：php, class, return, try-catch

我在实施以下方法时遇到问题：

```
private function query($statement, $params = array(), $name = ""){

    try{
        $this->prepare($statement, $name);
    }catch (Exception $e){
        echo 'Exception: ',  $e->getMessage(), "\n";
    }   
    try{
        return $this->execute($name, $params);
    }catch (Exception $e){
        echo 'Exception: ',  $e->getMessage(), "\n";
    }
} 
```

第二个 try-block 应该从另一个调用的方法返回值。我这样称呼它：

```
$resultset = $db->select('SELECT * FROM tabelle WHERE "ID" > $1', array(1));
var_dump($resultset); 
```

并得到一个NULL。
如果我 var_dump 尝试块内的值，我会得到一个结果：

```
private function query($statement, $params = array(), $name = ""){

    try{
        $this->prepare($statement, $name);
    }catch (Exception $e){
        echo 'Exception: ',  $e->getMessage(), "\n";
    }   
    try{
        var_dump($this->execute($name, $params));
    }catch (Exception $e){
        echo 'Exception: ',  $e->getMessage(), "\n";
    }
} 
```

> 数组（3）{[“ID”]=>字符串（1）“2”[“名称”]=>字符串（13）“名称1”[“时间”]=>字符串（26）“2012-09-11 20:23:38.854918”} 空

我做错了什么？

**编辑**$db->select 和发布的方法之间的部分：

```
public function select($statement, $params = array(), $name){
  $this->setQueryType("select"); // just a setter
  return $this->query($statement, $params, $name);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:19:12.770

尝试存储execute的返回值，并在方法结束时返回，看看是否有效？

```
private function query($statement, $params = array(), $name = ""){
  $return = false;
  try{
    $this->prepare($statement, $name);
    $return = $this->execute($name, $params);
  }
  catch (Exception $e){
    echo 'Exception: ',  $e->getMessage(), "\n";
  }
  return $return;
} 
```

# c++ - 控制台窗口中的 C++ 像素

> ID：12378642
> 
> 赞同：17
> 
> 时间：2012-09-11T22:07:30.710
> 
> 标签：c++, console, codeblocks, pixel

在使用 Code::Blocks v10.05 的 C++ 中，如何在控制台屏幕上绘制单个像素？这很容易吗，还是只画一个矩形会更容易？我该如何着色？

很抱歉，我无法从 SOF、HF 甚至 cplusplus.com 获得任何代码来工作。这是屏幕上的超级马里奥世界人物。我认为是16位的游戏，适用于SNES系统。C::B 说我需要 C::B 的 SDK。它说“afxwin.h”不存在。可以下载吗？

这就是我想要做的：

![我正在尝试创建的图像](../Images/801911ce6ad606a79fc568b4c556b068.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-11T22:40:18.413

这取决于您的操作系统。我想你是在 Windows 平台上编程，因此你可以使用[SetPixel](http://msdn.microsoft.com/en-us/library/aa453646.aspx)但你必须使用“windows.h”来获取控制台句柄，所以这里有一个绘制 cos() 函数的示例：

```
#include<windows.h>
#include<iostream>
#include <cmath>

using namespace std;

#define PI 3.14

int main() 
{
    //Get a console handle
    HWND myconsole = GetConsoleWindow();
    //Get a handle to device context
    HDC mydc = GetDC(myconsole);

    int pixel =0;

    //Choose any color
    COLORREF COLOR= RGB(255,255,255); 

    //Draw pixels
    for(double i = 0; i < PI * 4; i += 0.05)
    {
        SetPixel(mydc,pixel,(int)(50+25*cos(i)),COLOR);
        pixel+=1;
    }

    ReleaseDC(myconsole, mydc);
    cin.ignore();
    return 0;
} 
```

您还可以使用其他一些库，例如：conio.h allegro.h sdl 等。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-12T03:14:26.220

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T01:09:26.670

`windows.h`提供`SetPixel()`在窗口的指定位置打印像素的功能。函数的一般形式是

```
SetPixel(HDC hdc, int x, int y, COLORREF& color); 
```

其中，x 和 y 是要显示的像素的坐标，color 是像素的颜色。

**重要提示**：要使用 Code::blocks IDE 在您的机器中打印像素，请在链接器设置中添加链接库`libgdi32.a`（通常位于内部）。`MinGW\lib`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T22:28:38.323

控制台是一种文本设备，因此通常您不会写入单个像素。您可以创建一种特殊字体并将其选择为控制台字体，但它将是单色的。有一些库可以简化控制台 UI 的编写（例如 Curses），但我相信除了显示精灵之外，您还有更多类似游戏的功能。

如果你想写一个游戏，我建议看看一些图形/游戏框架/库，例如[SDL](http://www.libsdl.org)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-12T15:09:22.777

我在 code::blocks 中使用 windows.h 绘制了直线。我无法详细解释它，但我可以为您提供代码和过程以在 code::blocks 中编译它。

1.  转到设置菜单并选择编译器和调试器。
2.  单击链接器选项卡并添加一个链接库 libgdi32.a，它位于 C:\Program Files\CodeBlocks\MinGW\lib 目录中。

现在编译这个程序

```
#include <windows.h>

#include <cmath>

#define ROUND(a) ((int) (a + 0.5))

/* set window handle */

static HWND sHwnd;

static COLORREF redColor=RGB(255,0,0);

static COLORREF blueColor=RGB(0,0,255);

static COLORREF greenColor=RGB(0,255,0);

void SetWindowHandle(HWND hwnd){

sHwnd=hwnd;

}

/* SetPixel */

void setPixel(int x,int y,COLORREF& color=redColor){

if(sHwnd==NULL){

    MessageBox(NULL,"sHwnd was not initialized !","Error",MB_OK|MB_ICONERROR);

    exit(0);

}

HDC hdc=GetDC(sHwnd);

SetPixel(hdc,x,y,color);

ReleaseDC(sHwnd,hdc);

return;

// NEVERREACH //

}

void drawLineDDA(int xa, int ya, int xb, int yb){

   int dx = xb - xa, dy = yb - ya, steps, k;

   float xIncrement, yIncrement, x = xa, y = ya;

   if(abs(dx) > abs(dy)) steps = abs(dx);

   else steps = abs(dy);

   xIncrement = dx / (float) steps;

   yIncrement = dy / (float) steps;

   setPixel(ROUND(x), ROUND(y));

   for(int k = 0; k < steps; k++){

    x += xIncrement;

    y += yIncrement;

    setPixel(x, y);

 }

}

/* Window Procedure WndProc */

LRESULT CALLBACK WndProc(HWND hwnd,UINT message,WPARAM wParam,LPARAM lParam){

 switch(message){

    case WM_PAINT:

        SetWindowHandle(hwnd);

        drawLineDDA(10, 20, 250, 300);

        break;

    case WM_CLOSE: // FAIL THROUGH to call DefWindowProc

        break;

    case WM_DESTROY:

        PostQuitMessage(0);

        return 0;

    default:

    break; // FAIL to call DefWindowProc //

  }

 return DefWindowProc(hwnd,message,wParam,lParam);

}

int WINAPI WinMain(HINSTANCE hInstance,HINSTANCE hPrevInstance,LPSTR lpCmdLine,int      iCmdShow){

static TCHAR szAppName[] = TEXT("Straight Line");

WNDCLASS wndclass;

wndclass.style         = CS_HREDRAW|CS_VREDRAW ;

wndclass.lpfnWndProc   = WndProc ;

wndclass.cbClsExtra    = 0 ;

wndclass.cbWndExtra    = 0 ;

wndclass.hInstance     = hInstance ;

wndclass.hIcon         = LoadIcon (NULL, IDI_APPLICATION) ;

wndclass.hCursor       = LoadCursor (NULL, IDC_ARROW) ;

wndclass.hbrBackground = (HBRUSH) GetStockObject (WHITE_BRUSH) ;

wndclass.lpszMenuName  = NULL ;

wndclass.lpszClassName = szAppName ;

// Register the window //

if(!RegisterClass(&wndclass)){

    MessageBox(NULL,"Registering the class failled","Error",MB_OK|MB_ICONERROR);

    exit(0);

}

// CreateWindow //

HWND hwnd=CreateWindow(szAppName,"DDA - Programming Techniques",

            WS_OVERLAPPEDWINDOW,

             CW_USEDEFAULT,

             CW_USEDEFAULT,

             CW_USEDEFAULT,

             CW_USEDEFAULT,

             NULL,

             NULL,

             hInstance,

             NULL);

if(!hwnd){

    MessageBox(NULL,"Window Creation Failed!","Error",MB_OK);

    exit(0);

  }

  // ShowWindow and UpdateWindow //

  ShowWindow(hwnd,iCmdShow);

 UpdateWindow(hwnd);

 // Message Loop //

 MSG msg;

 while(GetMessage(&msg,NULL,0,0)){

    TranslateMessage(&msg);

    DispatchMessage(&msg);

 }

  /* return no error to the operating system */

  return 0;

} 
```

在这个程序中，我使用了 DDA 画线算法。像素绘制任务由 setPixel(ROUND(x), ROUND(y)) 函数完成。这是 Windows 编程，您可以[在此处了解详细信息](http://msdn.microsoft.com/en-us/library/ff381409%28v=vs.85%29)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-09T11:42:51.053

要在 CodeBlocks 中使用，我发现了这个（你必须添加一个链接器选项`-lgdi32`）：

```
//Code Blocks: Project Build Options Linker settings Othoer linker options: add -lgdi32 
```

我忘记了：您必须在包括以下内容之前输入`windows.h`：

```
#define _WIN32_WINNT 0x0500 
```

再次完整的余弦码。准备编译：

```
//Code Blocks: Project Build Options Linker settings Othoer linker options: add -lgdi32
#define _WIN32_WINNT 0x0500
#include "windows.h"
#include <iostream>
#include <cmath>
using namespace std;

#define PI 3.14

int main(){
    HWND myconsole = GetConsoleWindow();
    HDC mydc = GetDC(myconsole);
    int pixel =0;
    COLORREF COLOR= RGB(255,255,255);

    //Draw pixels
    for(double i = 0; i < PI * 4; i += 0.05)
    {
        SetPixel(mydc,pixel,(int)(50+25*cos(i)),COLOR);
        pixel+=1;
    }

    ReleaseDC(myconsole, mydc);
    cin.ignore();
    return 0;
} 
```

# php - 如何检索当前的错误处理程序？

> ID：12378644
> 
> 赞同：22
> 
> 时间：2012-09-11T22:07:32.517
> 
> 标签：php

我想知道当前是什么错误处理程序，嗯，处理错误。

我知道这[`set_error_handler()`](http://php.net/manual/en/function.set-error-handler.php)将返回以前的错误处理程序，但是有没有办法在不设置新错误处理程序的情况下找出当前的错误处理程序？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-08-06T20:32:43.257

尽管 PHP 中缺少一个`get_error_handler()`函数，但您可以使用一些技巧`set_error_handler()`来检索当前的错误处理程序，尽管您可能无法对这些信息做太多事情，具体取决于它的值。尽管如此：

```
set_error_handler($handler = set_error_handler('var_dump'));
// Set the handler back to itself immediately after capturing it.

var_dump($handler); // NULL | string | array(2) | Closure 
```

看，妈，它是幂等的！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-04-11T09:40:52.310

是的，有一种方法可以在不设置新错误处理程序的情况下找出错误处理程序。这不是一步原生 php 功能。但它的效果正是你所需要的。

总结@aurbano、@AL the X、@Jesse 和@Dominic108 替换方法的所有建议可以是这样的

```
function get_error_handler(){
    $handler = set_error_handler(function(){});
    restore_error_handler();
    return $handler;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-11T22:11:11.733

你可以使用`set_error_handler()`. `set_error_handler()`返回当前的错误处理程序（尽管是“混合的”）。取回它后，使用`restore_error_handler()`，它将保持原样。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-11T22:11:56.087

这在 PHP 中是不可能的 - 正如您所说，您可以在调用 set_error_handler 并使用 restore_error_handler 恢复它时检索当前错误处理程序

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-09T14:46:36.420

```
<?php

class MyException extends Exception {}

set_exception_handler(function(Exception $e){
    echo "Old handler:".$e->getMessage();
});

$lastHandler = set_exception_handler(function(Exception $e) use (&$lastHandler) {
    if ($e instanceof MyException) {
        echo "New handler:".$e->getMessage();
        return;
    }

    if (is_callable($lastHandler)) {
        return call_user_func_array($lastHandler, [$e]);
    }

    throw $e;
}); 
```

触发异常处理程序：

```
throw new MyException("Exception one", 1); 
```

输出：`New handler:Exception one`

```
throw new Exception("Exception two", 1); 
```

输出：`Old handler:Exception two`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-19T10:33:55.993

也可以使用[https://stackoverflow.com/a/43342227](https://stackoverflow.com/a/43342227)获取最后一个异常处理程序：

```
function get_exception_handler()
{
    $handler = set_exception_handler(function () {});
    restore_exception_handler();
    return $handler;
} 
```

如果您想要 - 例如在单元测试中 - 注册了哪个异常处理程序，这可能很有用。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-09-11T22:20:31.463

我检查了来源，答案是否定的。

# joomla - 如何设置输出的样式 在模板内？

> ID：12378646
> 
> 赞同：3
> 
> 时间：2012-09-11T22:07:48.083
> 
> 标签：joomla, joomla2.5

有没有办法`<jdoc:include type="component" />`在不修改 Joomla 核心功能的情况下设置模板内的输出样式？

具体来说，我想添加一个带有 id 的 div`article`来包含文章，仅此而已。到目前为止，在我的主题中，有一个`item-page`包含文章、评分、操作甚至评论框的类的 div（添加了外部插件）。

所以，我希望新模板类似于：

```
<div class="item-page>
    <!-- something here -->
    <div id="article">
        <!-- The article and nothing else here -->
    </div>
    <!-- comments and whatever may be here -->
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T23:38:26.637

使用布局覆盖。

转到`tmpl`要修改布局的视图文件夹，然后复制到`html`模板的文件夹中......所以说文章：获取`/components/views/article/default.php`并复制它以根据需要 `templates/[yourtemplate]/html/com_content/article/default.php` 修改文件。

这将默认在使用该模板的所有页面上更改它。

# ruby-on-rails - 用于向 Rails 模型的子类添加额外属性的模型结构

> ID：12378647
> 
> 赞同：1
> 
> 时间：2012-09-11T22:07:49.040
> 
> 标签：ruby-on-rails, attributes, models, relationships

我有一个名为“Contacts”的 Rails 模型，它包含法律线索的基本联系信息，例如电子邮件、电话、姓名等。它看起来像这样：

```
class Contact < ActiveRecord::Base

  attr_accessible :name, :phone, :email, :city, :state, :zip_code 
```

根据他们的联系类型，他们需要具有彼此不同的附加属性。

我想要这样的行为：

```
class DisabilityContact < Contact 
    attr_accessible :employed, :medical_condition, :represented 
```

但这是不可能的，因为 DisabilityContact 使用不包含那些额外字段的“联系人”表。我想要关于如何构建我的模型和关系以便能够设置这些属性的建议，例如：

```
@contact = DisabilityContact.create
@contact.employed =  true 
```

或者

```
@contact = DisabilityContact.create
@contact.special_attributes.employed = true 
```

PS我不想序列化任何数据。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:14:27.107

无论如何，您都可以将这些字段添加到联系人表中，并仅在需要时使用它们。或者你可以有不止一张桌子。

[Rails 中的单表继承一](http://code.alexreisner.com/articles/single-table-inheritance-in-rails.html)文可能对您有所帮助。

# asp.net-mvc - 基控制器类的位置是否有约定？

> ID：12378653
> 
> 赞同：1
> 
> 时间：2012-09-11T22:08:25.903
> 
> 标签：asp.net-mvc, conventions

我有一个 GridDataController 类来处理来自我的 jqGrids 的所有数据请求。我认为如果我将那个类分开，将相关操作放在它们各自的控制器中，将网格特定功能保留在基本控制器类中，然后当我需要在我的控制器。

Base Controller 类驻留在 Controllers 文件夹中似乎不正确，因为我不希望调用它的任何操作。

有这方面的约定吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T00:53:53.590

没有约定。如果你把它放在下面，对每个人来说都会更容易`Controllers`，因为它是一个控制器，不管你想要与否:)。但是，您可以将它放在任何地方，`using`并通过继承它在控制器中引用它（如果这是您想要做的）。

如果您不希望调用其操作，请将其适当地声明为抽象类...

所以，你的问题没有正确答案，但在把它放在任何地方之前，做两件事，然后改变主意，把它放回`Controllers`:)

# sql - 简单的自联接查询性能不佳

> ID：12378660
> 
> 赞同：5
> 
> 时间：2012-09-11T22:08:59.947
> 
> 标签：sql, sql-server, sql-server-2008, self-join, sqlperformance

任何人都可以就如何提高以下查询的性能提出建议。请注意，问题似乎是由`where`子句引起的。

数据（表包含大量行 - 500K+，调用它的参数集假定每个查询返回 2-5K 记录，目前需要 8-10 分钟）：

```
USE [SomeDb]
GO

    SET ANSI_NULLS ON
    GO

    SET QUOTED_IDENTIFIER ON
    GO

    CREATE TABLE [dbo].[Data](
        [x] [money] NOT NULL,
        [y] [money] NOT NULL,
     CONSTRAINT [PK_Data] PRIMARY KEY CLUSTERED 
    (
        [x] ASC
    )WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
    ) ON [PRIMARY]

    GO 
```

查询

```
select top 10000
s.x as sx,
e.x as ex,
s.y as sy,
e.y as ey,
e.y - s.y as y_delta,
e.x - s.x as x_delta
from Data s 
    inner join Data e
    on e.x > s.x and e.x - s.x between xFrom and xTo
--where e.y - s.y > @yDelta -- when uncommented causes a huge delay 
```

更新 1 - 执行计划

* * *

```
<?xml version="1.0" encoding="utf-16"?>
<ShowPlanXML xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" Version="1.2" Build="11.0.2100.60" xmlns="http://schemas.microsoft.com/sqlserver/2004/07/showplan">
  <BatchSequence>
    <Batch>
      <Statements>
        <StmtSimple StatementCompId="1" StatementEstRows="100" StatementId="1" StatementOptmLevel="FULL" StatementOptmEarlyAbortReason="GoodEnoughPlanFound" StatementSubTreeCost="0.0263655" StatementText="select top 100&#xD;&#xA;s.x as sx,&#xD;&#xA;e.x as ex,&#xD;&#xA;s.y as sy,&#xD;&#xA;e.y as ey,&#xD;&#xA;e.y - s.y as y_delta,&#xD;&#xA;e.x - s.x as x_delta&#xD;&#xA;from Data s &#xD;&#xA;    inner join Data e&#xD;&#xA; on e.x &gt; s.x and e.x - s.x between 100 and 105&#xD;&#xA;where e.y - s.y &gt; 0.01&#xD;&#xA;" StatementType="SELECT" QueryHash="0xAAAC02AC2D78CB56" QueryPlanHash="0x747994153CB2D637" RetrievedFromCache="true">
          <StatementSetOptions ANSI_NULLS="true" ANSI_PADDING="true" ANSI_WARNINGS="true" ARITHABORT="true" CONCAT_NULL_YIELDS_NULL="true" NUMERIC_ROUNDABORT="false" QUOTED_IDENTIFIER="true" />
          <QueryPlan DegreeOfParallelism="0" NonParallelPlanReason="NoParallelPlansInDesktopOrExpressEdition" CachedPlanSize="24" CompileTime="13" CompileCPU="13" CompileMemory="424">
            <MemoryGrantInfo SerialRequiredMemory="0" SerialDesiredMemory="0" />
            <OptimizerHardwareDependentProperties EstimatedAvailableMemoryGrant="52199" EstimatedPagesCached="14561" EstimatedAvailableDegreeOfParallelism="4" />
            <RelOp AvgRowSize="55" EstimateCPU="1E-05" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row" EstimateRows="100" LogicalOp="Compute Scalar" NodeId="0" Parallel="false" PhysicalOp="Compute Scalar" EstimatedTotalSubtreeCost="0.0263655">
              <OutputList>
                <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[s]" Column="x" />
                <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[s]" Column="y" />
                <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="x" />
                <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="y" />
                <ColumnReference Column="Expr1004" />
                <ColumnReference Column="Expr1005" />
              </OutputList>
              <ComputeScalar>
                <DefinedValues>
                  <DefinedValue>
                    <ColumnReference Column="Expr1004" />
                    <ScalarOperator ScalarString="[SomeDb].[dbo].[Data].[y] as [e].[y]-[SomeDb].[dbo].[Data].[y] as [s].[y]">
                      <Arithmetic Operation="SUB">
                        <ScalarOperator>
                          <Identifier>
                            <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="y" />
                          </Identifier>
                        </ScalarOperator>
                        <ScalarOperator>
                          <Identifier>
                            <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[s]" Column="y" />
                          </Identifier>
                        </ScalarOperator>
                      </Arithmetic>
                    </ScalarOperator>
                  </DefinedValue>
                  <DefinedValue>
                    <ColumnReference Column="Expr1005" />
                    <ScalarOperator ScalarString="[SomeDb].[dbo].[Data].[x] as [e].[x]-[SomeDb].[dbo].[Data].[x] as [s].[x]">
                      <Arithmetic Operation="SUB">
                        <ScalarOperator>
                          <Identifier>
                            <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="x" />
                          </Identifier>
                        </ScalarOperator>
                        <ScalarOperator>
                          <Identifier>
                            <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[s]" Column="x" />
                          </Identifier>
                        </ScalarOperator>
                      </Arithmetic>
                    </ScalarOperator>
                  </DefinedValue>
                </DefinedValues>
                <RelOp AvgRowSize="39" EstimateCPU="1E-05" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row" EstimateRows="100" LogicalOp="Top" NodeId="1" Parallel="false" PhysicalOp="Top" EstimatedTotalSubtreeCost="0.0263555">
                  <OutputList>
                    <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[s]" Column="x" />
                    <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[s]" Column="y" />
                    <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="x" />
                    <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="y" />
                  </OutputList>
                  <RunTimeInformation>
                    <RunTimeCountersPerThread Thread="0" ActualRows="100" ActualEndOfScans="1" ActualExecutions="1" />
                  </RunTimeInformation>
                  <Top RowCount="false" IsPercent="false" WithTies="false">
                    <TopExpression>
                      <ScalarOperator ScalarString="(100)">
                        <Const ConstValue="(100)" />
                      </ScalarOperator>
                    </TopExpression>
                    <RelOp AvgRowSize="39" EstimateCPU="151828" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row" EstimateRows="100" LogicalOp="Inner Join" NodeId="2" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="0.0263455">
                      <OutputList>
                        <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[s]" Column="x" />
                        <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[s]" Column="y" />
                        <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="x" />
                        <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="y" />
                      </OutputList>
                      <RunTimeInformation>
                        <RunTimeCountersPerThread Thread="0" ActualRows="100" ActualEndOfScans="0" ActualExecutions="1" />
                      </RunTimeInformation>
                      <NestedLoops Optimized="false">
                        <OuterReferences>
                          <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="x" />
                          <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="y" />
                        </OuterReferences>
                        <RelOp AvgRowSize="23" EstimateCPU="1.80448" EstimateIO="3.76461" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row" EstimateRows="1" LogicalOp="Clustered Index Scan" NodeId="3" Parallel="false" PhysicalOp="Clustered Index Scan" EstimatedTotalSubtreeCost="0.0032831" TableCardinality="1640290">
                          <OutputList>
                            <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="x" />
                            <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="y" />
                          </OutputList>
                          <RunTimeInformation>
                            <RunTimeCountersPerThread Thread="0" ActualRows="15225" ActualEndOfScans="0" ActualExecutions="1" />
                          </RunTimeInformation>
                          <IndexScan Ordered="false" ForcedIndex="false" ForceScan="false" NoExpandHint="false">
                            <DefinedValues>
                              <DefinedValue>
                                <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="x" />
                              </DefinedValue>
                              <DefinedValue>
                                <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="y" />
                              </DefinedValue>
                            </DefinedValues>
                            <Object Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Index="[PK_Data]" Alias="[e]" IndexKind="Clustered" />
                          </IndexScan>
                        </RelOp>
                        <RelOp AvgRowSize="23" EstimateCPU="0.902317" EstimateIO="1.88387" EstimateRebinds="1" EstimateRewinds="0" EstimatedExecutionMode="Row" EstimateRows="100" LogicalOp="Clustered Index Seek" NodeId="4" Parallel="false" PhysicalOp="Clustered Index Seek" EstimatedTotalSubtreeCost="0.0263655" TableCardinality="1640290">
                          <OutputList>
                            <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[s]" Column="x" />
                            <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[s]" Column="y" />
                          </OutputList>
                          <RunTimeInformation>
                            <RunTimeCountersPerThread Thread="0" ActualRows="100" ActualEndOfScans="15224" ActualExecutions="15225" />
                          </RunTimeInformation>
                          <IndexScan Ordered="true" ScanDirection="FORWARD" ForcedIndex="false" ForceSeek="false" ForceScan="false" NoExpandHint="false" Storage="RowStore">
                            <DefinedValues>
                              <DefinedValue>
                                <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[s]" Column="x" />
                              </DefinedValue>
                              <DefinedValue>
                                <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[s]" Column="y" />
                              </DefinedValue>
                            </DefinedValues>
                            <Object Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Index="[PK_Data]" Alias="[s]" IndexKind="Clustered" />
                            <SeekPredicates>
                              <SeekPredicateNew>
                                <SeekKeys>
                                  <EndRange ScanType="LT">
                                    <RangeColumns>
                                      <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[s]" Column="x" />
                                    </RangeColumns>
                                    <RangeExpressions>
                                      <ScalarOperator ScalarString="[SomeDb].[dbo].[Data].[x] as [e].[x]">
                                        <Identifier>
                                          <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="x" />
                                        </Identifier>
                                      </ScalarOperator>
                                    </RangeExpressions>
                                  </EndRange>
                                </SeekKeys>
                              </SeekPredicateNew>
                            </SeekPredicates>
                            <Predicate>
                              <ScalarOperator ScalarString="([SomeDb].[dbo].[Data].[x] as [e].[x]-[SomeDb].[dbo].[Data].[x] as [s].[x])&gt;=($100.0000) AND ([SomeDb].[dbo].[Data].[x] as [e].[x]-[SomeDb].[dbo].[Data].[x] as [s].[x])&lt;=($105.0000) AND ([SomeDb].[dbo].[Data].[y] as [e].[y]-[SomeDb].[dbo].[Data].[y] as [s].[y])&gt;(0.01)">
                                <Logical Operation="AND">
                                  <ScalarOperator>
                                    <Compare CompareOp="GE">
                                      <ScalarOperator>
                                        <Arithmetic Operation="SUB">
                                          <ScalarOperator>
                                            <Identifier>
                                              <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="x" />
                                            </Identifier>
                                          </ScalarOperator>
                                          <ScalarOperator>
                                            <Identifier>
                                              <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[s]" Column="x" />
                                            </Identifier>
                                          </ScalarOperator>
                                        </Arithmetic>
                                      </ScalarOperator>
                                      <ScalarOperator>
                                        <Const ConstValue="($100.0000)" />
                                      </ScalarOperator>
                                    </Compare>
                                  </ScalarOperator>
                                  <ScalarOperator>
                                    <Compare CompareOp="LE">
                                      <ScalarOperator>
                                        <Arithmetic Operation="SUB">
                                          <ScalarOperator>
                                            <Identifier>
                                              <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="x" />
                                            </Identifier>
                                          </ScalarOperator>
                                          <ScalarOperator>
                                            <Identifier>
                                              <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[s]" Column="x" />
                                            </Identifier>
                                          </ScalarOperator>
                                        </Arithmetic>
                                      </ScalarOperator>
                                      <ScalarOperator>
                                        <Const ConstValue="($105.0000)" />
                                      </ScalarOperator>
                                    </Compare>
                                  </ScalarOperator>
                                  <ScalarOperator>
                                    <Compare CompareOp="GT">
                                      <ScalarOperator>
                                        <Arithmetic Operation="SUB">
                                          <ScalarOperator>
                                            <Identifier>
                                              <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[e]" Column="y" />
                                            </Identifier>
                                          </ScalarOperator>
                                          <ScalarOperator>
                                            <Identifier>
                                              <ColumnReference Database="[SomeDb]" Schema="[dbo]" Table="[Data]" Alias="[s]" Column="y" />
                                            </Identifier>
                                          </ScalarOperator>
                                        </Arithmetic>
                                      </ScalarOperator>
                                      <ScalarOperator>
                                        <Const ConstValue="(0.01)" />
                                      </ScalarOperator>
                                    </Compare>
                                  </ScalarOperator>
                                </Logical>
                              </ScalarOperator>
                            </Predicate>
                          </IndexScan>
                        </RelOp>
                      </NestedLoops>
                    </RelOp>
                  </Top>
                </RelOp>
              </ComputeScalar>
            </RelOp>
          </QueryPlan>
        </StmtSimple>
      </Statements>
    </Batch>
  </BatchSequence>
</ShowPlanXML> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T22:12:00.367

我经常看到通过将第一个查询的结果（在您的情况下没有 where 子句）插入到 TEMP 表或表变量中，然后从中选择（这基本上有助于查询优化器选择适当的执行）来获得巨大的性能提升计划）。

还刚刚注意到您在 Y 列上没有索引，这可能会加快一点速度。

**编辑** 另外，请尝试以下操作（给我带来更好的性能）：

```
SELECT * FROM 
    (SELECT
        s.x as sx,
        e.x as ex,
        s.y as sy,
        e.y as ey,
        e.y - s.y as y_delta,
        e.x - s.x as x_delta
    FROM Data s 
    JOIN Data e
    ON e.x > s.x 
) data
WHERE data.y_delta > @yDelta AND data.x_delta BETWEEN @xFrom AND @xTo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:37:16.123

主要问题是 where 子句给出了一个交叉连接（不是我所说的简单连接）（给出许多行是连接比较 e 中的许多行与 s 中的一行）并且 .y 比较必须使用表扫描（如果不是整个表，至少是临时数据）。

如果查询很常见，则可以进行一次连接并将数据复制到预先计算的表中并对差异进行索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T02:33:21.187

我能想到一个奇怪的策略来提高性能。这包括在表中添加一个自动递增的 id，然后根据 id 查找 Xfrom 和 Xto 的边界，然后查找该范围内的任何内容。

以下查询表明了我的意思：

```
with e1 as (
    select e.*,
           (select min(id) from data s where e.x between s.x + @xfrom and s.x + @xto) as idstart,
           (select max(id) from data s where e.x between s.x + @xfrom and s.x + @xto) as idend
    from data e
)
select <whatever>
from e1 join
     e1 s
     on e1.idstart = s.id
where e1.idstart <= e1.idend union all
select <whatever>
from e1 join
     e1 s
     on e1.idstart+1 = s.id
where e1.idstart+1 <= e1.idend
. . . 
```

我对返回下一个值的索引字段上的相关子查询很幸运。之后，连接是等连接，应该非常快。最后，您可能希望修改查询，以便它可以使用枚举值表进行比较。

# android - Jsoup解析错误

> ID：12378661
> 
> 赞同：0
> 
> 时间：2012-09-11T22:09:06.243
> 
> 标签：android, parsing, html-parsing, jsoup

我收到以下错误（在“for（Element div：divs）”部分）：

```
Type mismatch: cannot convert from element type org.jsoup.nodes.Element to android.sax.Element 
```

使用以下代码：

```
 Document doc = Jsoup.connect("www.example.com").get();
    Elements divs = doc.select("div#heading");
    for (Element div : divs)
    {
        System.out.println(div.text());
    } 
```

和以下进口：

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;

import android.app.Activity;
import android.os.Bundle;
import android.sax.Element;
import android.view.Menu; 
```

我该如何解决这个问题>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:16:47.657

`android.sax.Element`是错误的导入-->`org.jsoup.nodes.Element`

**编辑**

这是我对您的代码的测试（这里没有进行异常处理！）：

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class Main
{
    public static void main(String[] args) throws Exception
    {
        Document doc = Jsoup.connect("http://www.tip.it/runescape").get();
        Elements divs = doc.select("div[class=heading]");

        for( Element div : divs )
        {
            System.out.println(div.text());
        }
    }
} 
```

# ffmpeg - ffmpeg对多张图片加水印

> ID：12378667
> 
> 赞同：2
> 
> 时间：2012-09-11T22:09:50.947
> 
> 标签：ffmpeg, overlay, watermark

我在这里有点困惑，无法找到以下问题的答案。是否可以`.png`在单个命令行中将 2 个文件加水印到视频中`Libavfilter`？

我正在使用这个命令行，但是我尝试在其中获取第二个 PNG 图像的一切都失败了。

```
ffmpeg –i inputvideo.avi -vf "movie=watermarklogo.png [watermark]; [in][watermark] overlay=main_w-overlay_w-10:10 [out]" outputvideo.flv 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T01:39:58.750

这当然是可能的，应该看起来像：

```
ffmpeg –i in.avi -vf "movie=logo1.png [logo1]; movie=logo2.png [logo2]; \
[in][logo1] overlay [tmp]; [tmp][logo2] overlay=50:50" out.flv 
```

两个徽标文件都被读入。一个覆盖在 0,0 处。然后下一个覆盖在第一个覆盖过滤器的输出上的 50,50。

使用更新版本的 FFmpeg，这个命令可以稍微不那么冗长，如下所示：

```
ffmpeg -i in.avi -i logo1.png -i logo2.png -filter_complex "overlay [tmp]; \
[tmp] overlay=50:50" out.flv 
```

第一个覆盖命令覆盖前两个输入（in.avi 和 logo1.png），第二个自动使用第三个输入（logo2.png）作为其第二个输入。

# entity-framework - EntityFramework 5 - 获取值不能为空参数名称：使用设计器时出现字体错误

> ID：12378670
> 
> 赞同：16
> 
> 时间：2012-09-11T22:10:20.900
> 
> 标签：entity-framework, ef-database-first

在设计器上使用 Database First 方法使用 EF 5 时，我遇到了一个奇怪的错误。错误是说“值不能为空参数名称：字体”。我还在设计区域上得到一个大的红色 X。我不确定设计器是如何产生这个错误的，到目前为止，我只使用设计器来创建我的 edmx。

想法？这是 VS 2012 RTM 版本。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-08T12:47:35.107

我只需重新启动 Visual Studio 即可解决相同的错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T21:21:35.703

我可以通过修复 Visual Studio 2012 的实体框架设计器来解决这个问题（控制面板 -> 卸载程序等。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-09T19:29:48.753

在安装实体框架设计器后立即开始使用实体框架设计器后，我遇到了完全相同的问题（几年后）。（使用 VS2019、.NET Framework 4.7.2 和 Entity Framework 6）

在我记录它之前，问题就消失了：
**仅重新启动 Visual Studio 一次是不够的**；我做了几次。我不知道为什么，但很可能是因为当我刚刚重新启动它时，一些 VS 组件没有立即卸载。

我请它通过重新启动计算机立即工作，以确保所有内容都从内存中卸载。

感谢*SausageFingers*提供的线索。

# symfony - Symfony 2.1、作曲家和 git 存储库

> ID：12378674
> 
> 赞同：3
> 
> 时间：2012-09-11T22:10:51.533
> 
> 标签：symfony, symfony-2.1, composer-php

使用 Symfony 2.0.x，我将所有客户端依赖项（jQuery 等）存储在 deps 文件中，因此我可以使用 vendor/install 轻松地一次更新它们，而在 2.1 中切换到 composer 这是不可能的。我的选择似乎是：

*   fork 所有 repos 并添加到 composer.json 文件中（很痛苦，浪费时间）
*   手动下载它们并将它们粘贴在我的仓库中的某个地方（也是一个痛苦的屁股）
*   编写我自己的 Grunt 脚本或类似的东西

有没有人有解决这个问题的方法，还是我做错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T04:26:07.753

Composer 确实支持下载不支持 Composer 的库。这需要更多的工作，但您可以像这样定义每个依赖项：

```
{
    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "jquery/jquery",
                "version": "1.8.1",
                "dist": {
                    "url": "http://code.jquery.com/jquery-1.8.1.min.js",
                    "type": "file"
                }
            }
        }
    ],
    "require": {
        "jquery/jquery": "1.8.1"
    }
} 
```

在此处阅读更多信息：http: [//getcomposer.org/doc/05-repositories.md#package-2](http://getcomposer.org/doc/05-repositories.md#package-2)。

这将`vendors/jquery/jquery`默认下载 jQuery。我认为目前没有办法指定目录之外的目录`vendors`，因此这可能会大大限制此建议的有用性。

FWIW，我会考虑向 Composer Github 项目提交拉取请求/问题。这实际上很有意义。

# php - 使用 PHP DOMDocument 将样式标签添加到头部

> ID：12378675
> 
> 赞同：5
> 
> 时间：2012-09-11T22:10:53.480
> 
> 标签：php, css, domdocument, appendchild, createelement

我想创建一组`<style>`标签并将其添加到 HTML 文档的头部标签。

我知道我可以这样开始：

```
$url_contents = file_get_contents('http://example.com');
$dom = new DOMDocument;
$dom->loadHTML($url_contents);

$new_elm = $dom->createElement('style', 'css goes here');
$elm_type_attr = $dom->createAttribute('type');
$elm_type_attr->value = 'text/css';
$new_elm->appendChild($elm_type_attr); 
```

现在，我也知道我可以像这样将新的样式标签添加到 HTML 中：

```
$dom->appendChild($ss_elm);
$dom->saveHTML(); 
```

但是，这将创建以下场景：

```
<html>
<!--Lots of HTML here-->
</html><style type="text/css">css goes here</style> 
```

以上基本上是没有意义的；CSS 没有被解析，只是坐在那里。

我在网上找到了这个解决方案（显然没有用）：

```
$head = $dom->getElementsByTagName('head');
$head->appendChild($new_elm);
$dom->saveHTML(); 
```

谢谢您的帮助！！

### 编辑：

是否可以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T22:24:25.623

`getElementsByTagName`返回一个节点数组，所以可能会尝试

```
 $head->[0]->appendChild($new_elm); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T22:24:25.047

```
$head = $dom->getElementsByTagName('head'); 
```

返回一个 DOMNodeList。我认为像这样获得第一个元素会更好

```
 $head = $dom->getElementsByTagName('head')->item(0); 
```

所以 $head 将是一个 DOMNode 对象。所以你可以使用 appendChild 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-20T15:07:15.047

这是对我有用的解决方案

```
// Create new <style> tag containing given CSS
$new_elm = $dom->createElement('style', 'css goes here');
$new_elm->setAttribute('type', 'text/css');

// Inject the new <style> Tag in the document head
$head = $dom->getElementsByTagName('head')->item(0);
$head->appendChild($new_elm); 
```

您还可以在末尾添加此行以获得干净的缩进

```
// Add a line break between </style> and </head> (optional)
$head->insertBefore($dom->createTextNode("\n")); 
```

# java - 为 iOS、Android 和桌面开发应用程序

> ID：12378677
> 
> 赞同：1
> 
> 时间：2012-09-11T22:11:08.583
> 
> 标签：java, android, ios, web-services, rest

我们有一个现有的分布式应用程序，被一家小公司用来管理他们的客户。

服务器端组件作为一个简单的 Java 应用程序部署在云中，用于管理与 MySQL 数据库的连接。

客户端实现为使用 JNLP 部署的 Java Swing 应用程序，并使用 RMI 与服务器端通信。

到目前为止，这对我们来说效果很好，但最近我们一直在研究我们的客户如何从移动设备、平板电脑（iOS 和 Android）以及桌面访问应用程序。

目前我在想我们应该考虑在服务器端开发 RESTful Web 服务来管理对 MySQL 数据库的访问。在客户端，我们可以使用 Google 的 GWT 提供一个快速简便的解决方案，以便从所有平台访问服务。展望未来，我们可以实现原生 iOS / Android 应用程序来访问 Web 服务。

我是正确的轨道吗？有没有人有更好的方法？有人对我应该看哪些工具有任何建议吗？

我感兴趣的关键是能够从任何平台访问服务器端。我真的不想为每个实现单独的服务器端实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:20:02.493

听起来您在使用 RESTFul Web 服务时走在了正确的轨道上。如果你走这条路，你应该被后端覆盖。只要您的前端可以执行 http 请求并处理 JSON 数据，您就可以了。

> 展望未来，我们可以实现原生 iOS / Android 应用程序来访问 Web 服务。

可以设计一个移动应用程序同时部署在 android 和 iOS 上，这样可以节省开发时间。为此，您可以使用例如 PhoneGap，它在电话硬件上创建一个抽象层，以及类似 jQuery Mobile 的东西，其中 UI 是用 HTML5 和 javascript 开发的，并且通过 PhoneGap 在两个设备上部署相同的代码.

PhoneGap： http: [//phonegap.com/](http://phonegap.com/)

jQuery 移动：http: [//jquerymobile.com/](http://jquerymobile.com/)

如果有其他选项可以让您在 android、iOS 和桌面上部署相同的前端，我会同意，这样您就只有一个前端代码库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T00:15:59.623

我认为您的解决方案（GWT/HTML5）客户端与服务器端“业务”层对话是一个很好的多客户端解决方案。在您所描述的上下文中，RESTful Web 服务是不必要的，因为 GWT 实现会处理客户端和服务器之间的通信：

```
 GWT client <--->  Server (GWT) <---> Database 
```

如果您使用不同的客户端实现（例如 iOS），那么 RESTful 服务确实会非常方便（而且您不会使用 GWT）：

```
 iOS client <--->  Server (RESTful endpoints)  <---> Database 
```

HTML5 正在成为广泛适用性（许多客户端）和丰富客户端功能之间的良好折衷。过去我看过一篇关于同时使用 PhoneGap 和 GWT 的文章，这听起来像是使用 GWT（我喜欢）并获得设备相关功能访问权限的好策略。在您可以（Java-）调试甚至客户端代码（非常有用的 GWT 功能）的环境中工作。

# javascript - Ajax 和 Json 与 Rails

> ID：12378682
> 
> 赞同：2
> 
> 时间：2012-09-11T22:11:27.880
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, rjs

我遵循了 Hartl 的 Rails[教程](http://ruby.railstutorial.org/chapters/following-users#sec-a_working_follow_button_with_ajax)，他在其中使用 RJS 进行 Ajax，并在响应中发送 javascript 以在客户端执行以编辑 DOM。

但是，如果您只想在响应中发送 JSON 而不发送 javascript，您会怎么做。这也意味着操作 DOM 的 javascript 应该已经在客户端的 html 文件中。有没有像 Hartl 的[书](http://ruby.railstutorial.org/chapters/following-users#sec-a_working_follow_button_with_ajax)一样好的关于如何在 Rails 中做到这一点的教程。大概它会使用 Jquery 和其他一些我没有听说过的东西来使代码不是一百万行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T23:16:59.660

我对答案的最佳尝试是，它实际上取决于您要实现的目标的范围和复杂性。通常，JSON 会显示在视图中。如果您的应用程序不需要您动态检索 JSON，也就是说，您可以在最初呈现视图时将其全部加载，那么您可以像这样在视图的控制器中设置一个实例变量 `@my_json = some_object.to_json()` 然后，您的实例变量在您的视图中可用

```
    <script type = 'text/javascript'>
        var theJSON = <%= @my_json %>
    </script>

```

现在，您的数据在 DOM 中可用，并很好地解析为 JSON。

如果您的应用程序要求您在加载控制器/视图后动态检索 JSON，那么您可能应该考虑使用 AJAX 来访问返回所需 JSON 的特定控制器方法。

这是一个很好的 RailsCast，希望可以帮助您将[数据传递给 Javascript](http://railscasts.com/episodes/324-passing-data-to-javascript?view=asciicast)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T16:02:33.143

您应该看看[Rails 3.1 - A Roadmap 中的 Ajax](http://blog.madebydna.com/all/code/2011/12/05/ajax-in-rails-3.html)。

# blackberry - Epub 文件类型的 BlackBerry 默认应用程序

> ID：12378683
> 
> 赞同：1
> 
> 时间：2012-09-11T22:11:31.897
> 
> 标签：blackberry, epub

我正在 BlackBerry java 平台上开发 Epub 阅读器，我想知道是否有可能将我的应用程序注册为 Epub 文件的默认阅读器，例如单击电子邮件中附加的 Epub 文件，或浏览器中指向该文件的链接，或者即使我在本地浏览所有文件时单击它，我还能做到这一点吗？是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T01:34:23.687

尝试使用 Content Handler API，它允许您注册应用程序来处理特定扩展名和内容类型（例如`.epub`和 type `application/epub+zip`）的文件。

有关详细信息，请参阅[此 BlackBerry 参考文档](http://docs.blackberry.com/en/developers/deliverables/23567/Integration_handling_content_1375916_11.jsp)

**如果您安装了完整的SDK**，您还应该在`samples/com/rim/samples/device/chapidemo`.

# javascript - iPad 未加载所有 HTML5 元素

> ID：12378688
> 
> 赞同：0
> 
> 时间：2012-09-11T22:11:55.697
> 
> 标签：javascript, html

我正在编写这个网络应用程序，它上面有很多 .png，所以它相对较重（5MB）。我遇到的问题是，每次我在主屏幕模式下启动 web 应用程序时，iPad 似乎都没有加载所有元素。

该应用程序基本上是一堆带有背景图像的 DIV，它们是“漂亮的按钮”和运行的 js 代码。突然图像没有加载，所以我看不到按钮，但我可以按下它并且功能在那里，所以我的 JS 代码正在加载和工作。我怀疑这与图像过多有关，因此如果 ipad 认为它没有资源，则不会加载这些图像-

有没有人有过这样的经历？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:05:07.750

问题不在于 iPad 或 HTML 5。我的 Webapp 正在加载大量图像，而在服务器端，我在 XP 机器上安装了 IIS / ASP .NET。IIS 的 MaxConnections 默认设置为 10。当它被来自应用程序的请求淹没时，它会随机锁定一些图像，iPad（或任何浏览器）无法加载它们（403 错误）。将 MaxConnections 参数增加到最大值 40 解决了这个问题：

{C:\Inetpub\AdminScripts>cscript adsutil.vbs SET w3svc/1/MaxConnections 40}

现在我想检测这些 403 错误以警告用户它是否仍然会发生，但这是另一个故事（以及 StackOverflow 中的另一个问题）......

# msbuild - 通过 Visual Studio 扩展设置 MSBuild 'Condition' 属性

> ID：12378692
> 
> 赞同：2
> 
> 时间：2012-09-11T22:12:00.937
> 
> 标签：msbuild, visual-studio-extensions, vspackage

我有一个 C# 项目，它是用几种不同的配置构建的。某些源文件应始终包含在内，而某些源文件仅在某些配置中包含。到目前为止，我一直`#if ... #endif`在对整个文件进行此操作，但我希望创建一个小扩展来以更好的方式执行此操作。

我创建了一个扩展，将项目添加到文件的上下文菜单中，但我找不到任何方法来设置`Condition`项目文件中项目节点的属性。

我查看`Properties`了界面的集合`EnvDTE.ProjectItem`，但在那里看不到任何有用的东西（除了 BuildAction ......我会回到那个）。

然后我尝试`IVsBuildPropertyStorage`在该项目上获得一个并打电话给`SetItemAttribute()`. 这确实将信息添加到项目文件中，但作为这样的子元素：

```
<ItemGroup>
  <Compile Include="Program.cs">
    <Condition>%27%24%28Configuration%29%27==%27Debug%27</Condition>
  </Compile>
</ItemGroup> 
```

当我试图实现的是：

```
<ItemGroup>
  <Compile Include="Program.cs" Condition="'$(Configuration)'=='Debug'" />
</ItemGroup> 
```

还有一个`IVsBuildPropertyStorage.SetPropertyValue()`but 将类似的子元素添加到`PropertyGroup`靠近顶部的部分，而不是添加到 item 节点。

我看过'Project Subtypes/Flavors'，但看起来它只会让我得到另一个 `IVsBuildPropertyStorage`，这似乎没有用。它们看起来确实能够处理很多复杂的事情，但有关该主题的文档似乎很少且含糊不清。

我看过一些描述如何使用 MSBuild 程序集直接加载和操作项目文件的帖子，但我不确定*什么时候*可以安全地这样做，而不会混淆 Visual Studio 并可能丢失更改，因为 VS 会在它提示重新加载时检测对项目文件的更改。

作为最后一个想法，我考虑过在和`BuildAction`之间操作属性，但这听起来我的扩展需要做很多工作才能正确维护，例如每次用户在 IDE 中切换配置时都要保持同步。`Compile``None`

有没有人对这种事情有任何经验可以给我任何建议，还是我应该放弃希望并坚持在`#if`任何地方手动添加指令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:48:45.467

您可能想探索您提到的 MSBuild 选项。

您实际上不必从文件中加载 MSBuild 项目，因为 Visual Studio 为您提供了一种直接访问 MSBuild 项目的方法，即：

```
string projectPath = projectItem.ContainingProject.FullName;
MsBuildProject project = ProjectCollection.GlobalProjectCollection.GetLoadedProjects(projectPath);
var compileItems = project.GetItems("Compile"); 
```

从那里您可以找到您的特定项目并可能添加条件属性，尽管我自己没有尝试过此步骤（如果这不起作用，您可能不得不尝试修改`project.Xml`属性下的项目元素）。

然后您可以调用`project.Save()`，这不应该触发“重新加载项目？” 对话框，因为 MsBuild 项目实例链接到 Visual Studio 项目层次结构的方式。

但是，您可能希望强制 Visual Studio 重新加载项目，因为如果您切换构建配置（例如在调试和发布之间），MSBuild 引擎可能不会在构建期间重新评估您的项目条件。可以在此处找到以编程方式执行此操作的代码：

[修改基础文件后，如何以编程方式刷新/重新加载 VS 项目？](https://stackoverflow.com/questions/12320527/how-do-i-programmatically-refresh-reload-a-vs-project-after-modifying-the-underl/12328298#12328298)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-22T16:58:51.783

[不幸的是，我从来没有时间去坚持创建扩展的最初目标，但是我确实使用lex-li](https://stackoverflow.com/questions/12378692/setting-msbuild-condition-attribute-via-visual-studio-extension#comment16631835_12378692)的建议实现了我所需要的：每个配置使用单独的项目文件。

由于项目文件都可以驻留在同一个目录中，因此只需使用解决方案资源管理器中的“从项目中包含/排除”上下文菜单项来选择包含哪些文件很容易。这种方式也不需要文件链接，我之前尝试过，发现管理起来非常耗时。

[如果您有类似的需求，部分方法](https://stackoverflow.com/questions/12378692/setting-msbuild-condition-attribute-via-visual-studio-extension#comment16631835_12378692)也值得一看。它们允许您在一个地方定义方法的签名，但**可以选择**在其他地方实现它。如果你不实现它，编译器不会生成调用。

关于扩展的最初想法，我怀疑[Daniel Nolan 的答案](https://stackoverflow.com/a/12420205/55559)是朝着正确的方向发展，但不幸的是我没有尝试过。

# javascript - 如何检查消息（postMessage）来自哪个跨域 iframe？

> ID：12378694
> 
> 赞同：7
> 
> 时间：2012-09-11T22:12:06.977
> 
> 标签：javascript, iframe, cross-domain, postmessage

我知道`MessageEvent`has`source`属性是发送消息的窗口对象。现在如何让这些信息检查主文档中的哪个 iframe（当然还有消息到达时的主文档中）是该特定消息的来源？`location.href`是否只有检查窗口对象的可用选项`event.source`，然后循环所有 iframe 以检查哪个匹配？如果主文档中存在具有相同源 url 的 iframe 怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-11T21:05:08.480

遍历页面上的所有 iframe 并对它们的`window`对象进行身份比较。

```
window.addEventListener('message', function(e) {
    if(e.origin === 'https://www.example.com') {
        var iframes = document.getElementsByTagName('iframe');

        for(var i = 0; i < iframes.length; i++) {
            if(e.source === iframes[i].contentWindow) {
                // Do stuff with iframes[i]
            }
        }
    }
} 
```

我相信这适用于所有现代浏览器；我很想知道是否有人对此有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:01:09.513

如果您尝试读取`location.href`跨域 iframe/窗口的属性，则会抛出异常，因为它违反了同源策略。您可以**写入**该属性，但无法**读取**. 即使这样可行，您也会遇到具有相同 URL 问题的多个 iframe 的问题，正如您所猜测的那样。

无论如何，您可以做的是 - 为某种消息发送确认建立协议。换句话说，在接收到消息 X 的 iframe 中，您将遍历父文档中的所有 iframe，并向每个 iframe 发送一条消息，询问*“您是否向我发送了消息 X？”* 你会编程所有的 iframe 来回答这些问题。当然，您必须将唯一 ID 附加到所有消息，以便您知道哪个 iframe 确认它发送了哪个消息。

我认为您必须考虑为什么消息的接收者需要知道发送者是谁，以及为什么您只知道对该发送者的引用（`event.source`）是不够的？如果发件人知道某些信息 - 那么发件人可以首先在消息中发送此信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-05T03:09:45.547

一种更有效的方法是在启动时为每个 iframe 传递一个唯一 ID，并让它们在回发到父框架时使用该 ID。

# java - 如何为正则表达式“单词字符”编写 CharMatcher 等效项？

> ID：12378702
> 
> 赞同：0
> 
> 时间：2012-09-11T22:12:59.977
> 
> 标签：java, regex, guava

正则表达式`\w`与 characters 完全匹配`[A-Za-z0-9_]`，这正是我现在需要的。我想知道是否有任何简单的方法可以创建相应的 Guava 的[CharMatcher](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/CharMatcher.html)。我做了以下事情（我不喜欢静态导入）：

```
private final static CharMatcher IDENTIFIER_CHAR = CharMatcher.is('_')
    .or(CharMatcher.inRange('A', 'Z'))
    .or(CharMatcher.inRange('a', 'z'))
    .or(CharMatcher.inRange('0', '9'))
    .precomputed(); 
```

有一些预定义的匹配器，但是像

```
private final static CharMatcher IDENTIFIER_CHAR = CharMatcher.ASCII
    .and(CharMatcher.JAVA_LETTER_OR_DIGIT)
    .or(CharMatcher.is('_'))
    .precomputed(); 
```

看起来没有任何好转。[在 Java 8 中使用闭包](http://java.dzone.com/news/java-8-lambda-syntax-closures)`forPredicate`之前也不会使用。这里没有真正的问题，对于简单且（我猜）常见的事情来说，它太冗长了。

有更好的解决方案吗？也许有人实施过类似的东西`newRegexLikeCharMatcher("[A-Za-z0-9_]")`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:18:28.150

您建议的方法的实现可能是：

```
public CharMatcher newRegexLikeCharMatcher(String regex) {
    final Pattern pattern = Pattern.compile(regex);
    return new CharMatcher() {
        @Override
        public boolean matches(char c) {
            return pattern.matcher(Character.toString(c)).find();
        }
    }.precomputed();
} 
```

或者

```
public CharMatcher newRegexLikeCharMatcher(String regex) {
    return CharMatcher.forPredicate(Predicates.compose(Predicates.containsPattern(regex), Functions.toStringFunction()))
            .precomputed();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:12:11.703

我写了这个简单的方法，它被使用了几次，让它变得更好：

```
private static CharMatcher inRanges(char startInclusive, char endInclusive, char... chars) {
    Preconditions.checkArgument((chars.length & 1) == 0, "The chars must come in pairs");
    CharMatcher result = CharMatcher.inRange(startInclusive, endInclusive);
    for (int i=0; i<chars.length; i+=2) result = result.or(CharMatcher.inRange(chars[i], chars[i+1]));
    return result;
} 
```

恐怕像我这样的情况还不够普遍，每个用户都可以像我一样为他们的特殊情况制定解决方案......

* * *

我发现我的上述解决方案仍然不切实际（输入的撇号太多）并创建了这个微不足道的方法

```
public static CharMatcher newRegexLikeCharMatcher(String s) {
    CharMatcher result = CharMatcher.NONE;
    for (int i=0; i<s.length(); ++i) {
        if (i+2 < s.length() && s.charAt(i+1) == '-') {
            result = result.or(CharMatcher.inRange(s.charAt(i), s.charAt(i+2)));
            i += 2;
        } else {
            result = result.or(CharMatcher.is(s.charAt(i)));
        }
    }
    return result;
} 
```

每当它遇到“char-dash-char”三元组时，它会将其解释为一个范围，否则它会添加一个匹配的字符（因此前导和尾随破折号按字面意思解释，即使是奇怪的东西，比如`-a-b-`和`a-b-c`工作）。

# jqgrid - 在jqgrid中使用复选框选择所有虚拟滚动可能？

> ID：12378703
> 
> 赞同：3
> 
> 时间：2012-09-11T22:13:01.357
> 
> 标签：jqgrid, scroll

我的 jqgrid 中有一个复选框列，并且正在使用本地数据类型和 scroll=1 来获取（动态翻页，例如虚拟滚动）和一个 numRows 值。

当我单击标题复选框以选择所有行时，它没有选择任何不在可见范围内的行。有没有办法设置 jqgrid 以支持单击复选框标题以选择所有数据而不仅仅是部分显示的部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-27T22:58:20.830

`$("#grid").jqGrid('getGridParam','data');`将返回一个对象数组，它是网格中的所有数据（每一页）。这些对象具有`_id_`作为它们的属性。您现在可以遍历此数组并使用该`setSelection`方法使用`_id_`.

例子：

```
var all_data = $("#grid").jqGrid('getGridParam','data');
for(var i=0; i<all_data.length; i++){
$("#grid").setSelection(all_data[i]._id_);
} 
```

# c# - 如何将许多文本文件组合成 4 个组

> ID：12378704
> 
> 赞同：0
> 
> 时间：2012-09-11T22:13:03.883
> 
> 标签：c#, while-loop, text-files, streamreader, streamwriter

每个文件夹都有一长串文本文件（大约 80 - 100 个文件）。我必须将每 4 个文本文件合并为一个文本文件。每个文本文件都是一个单独的 SQL 插入命令，因此必须在输出文件中保留 4 个文本文件中第一个文件的第一行（INSERT INTO database (value1, value2, value3) VALUES），其余 3 个文件应跳过第一行，只有值。

我遇到的问题是，在组合 4 个文件中的最后一个文件时，最后一个文件仅将最后一个文件的大约一半复制到新的组合文件中。

即使我尝试仅将 3 个文件或 2 个文件合并为一个。它仍然只复制最后一个文件的大约一半。

这是我的代码。

`fourCount`指示第 4 个文本文件何时被合并。

```
 string[] array2 = sqlInsertList.ToArray();
        StreamWriter outfile3 = new StreamWriter(folderPath.Text + "\\" + count + ".txt");
        count++;

        foreach (string dirFileName in array2)
        {
            StreamReader readFile = new StreamReader(dirFileName);
            string readFromFile = readFile.ReadLine();

            if(fourCount == 1)
            {
                outfile3 = new StreamWriter(folderPath.Text + "\\" + count + ".txt");
                outfile3.WriteLine(readFromFile);
            }

            while(!readFile.EndOfStream)
            {
                readFromFile = readFile.ReadLine();
                outfile3.WriteLine(readFromFile);
            }

            count++;
            if(fourCount == 4)
            {
                outfile3.WriteLine(";");
                fourCount = 1;
            }
            else
            {
                fourCount++;
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T22:15:13.823

您没有关闭，因此没有刷新输出文件。

将其更改为：

```
 using(StreamWriter outfile3 = new StreamWriter(...))
 {
    count++;

    foreach (string dirFileName in array2)
    {

        if(fourCount == 1)
        {
            outfile3.Close();  // add this
            outfile3 = new StreamWriter(folderPath.Text + "\\" + count + ".txt");
            outfile3.WriteLine(readFromFile);
        }

       ...
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:57:39.060

您可以将**auto Flush**设置为 true 属性或使用**Flush**方法，
但是让流保持打开状态是不好的，因此如果可能的话，在您知道不需要它时将其关闭

# asp.net - 使用 vb.net 和 asp.net 将 Excel 导入 SQL 数据库

> ID：12378705
> 
> 赞同：1
> 
> 时间：2012-09-11T22:13:15.180
> 
> 标签：asp.net, vb.net, visual-studio-2010, sql-server-2008

我目前正在构建一个项目，允许用户通过 Web 界面（内置）导入 Excel 文件，将文件保存到服务器（内置），然后根据一些用户选项将数据导入服务器上的 SQL 数据库（未建成）。

我根本不熟悉 VS 中的 SQL 数据库工具，所以我在两天的大部分时间里一直在摸索，只是想把所有东西都设置好。我很确定我需要使用 BulkCopy，但我不太确定如何使用它，而且我似乎找不到具体的例子来解释它与我的特定应用程序有关。

所以在我的 App_Data 文件夹中，我有一个 .mdf 标题“设备数据库”。在那个数据库中，我有三个表：“Galaxy Nexus”、“Hercules”和“Ruby”

我正在尝试将每个导入的 excel 表中的四个单元格导入到各自的表中。

我想将单元格（2,2）导入表格中的column1，将cell（2,3）导入column2，将cell（3,2）导入column3，将cell（1,1）导入column4。

我试图完成此操作的代码是：

```
 Dim ExcelContentType As String = "application/vnd.ms-excel"
    Dim Excel2010ContentType As String = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
    Dim excelConnectionString As String = String.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=Excel 8.0", SavedFile)
    Using connection As New OleDbConnection(excelConnectionString)
        Dim Command As OleDbCommand = New OleDbCommand("Select * FROM [Sheet1$]", connection)
        connection.Open()
        Using reader As DbDataReader = Command.ExecuteReader()
            Dim sqlConnectionString As String = "Data Source=.\sqlexpress;Initial Catalog=ExcelDB;Integrated Security=True"
            Using bulkCopy As New SqlBulkCopy(sqlConnectionString)
                bulkCopy.DestinationTableName = DropDown1.SelectedItem.ToString
                bulkCopy.WriteToServer(reader)
            End Using
        End Using
    End Using 
```

我遇到的问题是，我不知道如何从 Excel 表中选择某些单元格进行导入，也不知道如何将这些单元格复制到指定表中的特定列。

任何和所有的帮助总是值得赞赏的。谢谢，扎克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T23:01:02.060

我发布了一个答案，以便如果其他人偶然发现这一点，他们也可能会得到帮助。

这就是让一切为我工作的原因。（向凯文大喊）

```
Protected Sub Button1_Click(sender As Object, e As System.EventArgs)
    Dim appPath As String = Request.PhysicalApplicationPath
        Dim con As New System.Data.SqlClient.SqlConnection
        con.ConnectionString = "Data Source=.\SQLEXPRESS;AttachDbFilename=" & appPath & "App_Data\Devicedatabase.MDF;Integrated Security=True;User Instance=True;"
        con.Open()
        MsgBox("open")
        con.Close()
        MsgBox("close")
    End Sub 
```

经过多次尝试和挫折，这使连接打开。

这得到了导入数据库的 excel 值：

```
 Using con As New SqlClient.SqlConnection With
{
    .ConnectionString =
    "Data Source=.\SQLEXPRESS;AttachDbFilename=" & appPath & "App_Data\Devicedatabase.MDF;Integrated Security=True;User Instance=True;"
}
Using cmd As New SqlClient.SqlCommand With
    {
        .Connection = con,
        .CommandText = "INSERT INTO " & """" & DropDownList1.SelectedItem.ToString & """" & "ColumnName1, ColumnName2)VALUES (@Col1,@Col2)"
    }
    cmd.Parameters.Add(New SqlClient.SqlParameter With {.DbType = DbType.String, .ParameterName = "@Col1"})
    cmd.Parameters.Add(New SqlClient.SqlParameter With {.DbType = DbType.String, .ParameterName = "@Col2"})
    cmd.Parameters(0).Value = "Value obtained from Excel"
    cmd.Parameters(1).Value = "Value obtained from Excel"
    con.Open()
    Dim Result As Integer = cmd.ExecuteNonQuery
    If Result <> 1 Then
        MessageBox.Show("Insert failed.")
    Else
        MessageBox.Show("Row inserted.")
    End If

End Using
End Using 
```

尽情享受吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:15:35.323

为此，请使用[Excel 数据阅读器](http://exceldatareader.codeplex.com/)dll。它将读取 excel 文件并给出数据集作为结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-09T11:22:15.277

'abcConnectionString' 作为连接字符串和 'pqr_table' 作为 sql 表的简单代码。'Sheet1' 用于 Excel 文件的 sheet1。重要的是表格格式，即excel n数据库文件的行n列应该相同

这是 vb.net 代码敌人 veb 应用程序一个 FileUpload，名称为“FileUpload1”和一个按钮。此代码在按钮方法中

```
Dim excelConnectionString As String = String.Empty     
Dim uploadPath As String = "~/Uploads/" 
Dim filePath As String = Server.MapPath(uploadPath + FileUpload1.PostedFile.FileName)

Dim fileExt As String = Path.GetExtension(FileUpload1.PostedFile.FileName)

Dim strConnection As [String] = ConfigurationManager.ConnectionStrings("abcConnectionString").ConnectionString

If fileExt = ".xls" OrElse fileExt = "XLS" Then
    excelConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0; Data Source='" & filePath & "'" & "; Extended Properties ='Excel 8.0;HDR=Yes'"
ElseIf fileExt = ".xlsx" OrElse fileExt = "XLSX" Then
    excelConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & filePath & ";Extended Properties=Excel 12.0;Persist Security Info=False"
End If
Dim excelConnection As New OleDbConnection(excelConnectionString)
Dim cmd As New OleDbCommand("Select * from [Sheet1$]", excelConnection)
excelConnection.Open()
Dim dReader As OleDbDataReader
dReader = cmd.ExecuteReader()
Dim sqlBulk As New SqlBulkCopy(strConnection)
sqlBulk.DestinationTableName = "pqr_table"
sqlBulk.WriteToServer(dReader)
MsgBox("Congratulations! Successfully Imported.")
excelConnection.Close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-09T11:18:11.663

'abcConnectionString' 作为连接字符串和 'pqr_table' 作为 sql 表的简单代码。'Sheet1' 用于 Excel 文件的 sheet1。重要的是表格格式，即excel n数据库文件的行n列应该相同

她是 vb.net 代码敌人 veb 应用程序，一个名为“FileUpload1”的 FileUpload 和一个按钮。此代码在按钮方法中

```
Dim excelConnectionString As String = String.Empty
Dim uploadPath As String = "~/Uploads/"
Dim filePath As String = Server.MapPath(uploadPath + FileUpload1.PostedFile.FileName)
Dim fileExt As String = Path.GetExtension(FileUpload1.PostedFile.FileName)
Dim strConnection As [String] = ConfigurationManager.ConnectionStrings("abcConnectionString").ConnectionString
If fileExt = ".xls" OrElse fileExt = "XLS" Then
            excelConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0; Data Source='" & filePath & "'" & "; Extended Properties ='Excel 8.0;HDR=Yes'"
ElseIf fileExt = ".xlsx" OrElse fileExt = "XLSX" Then
            excelConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & filePath & ";Extended Properties=Excel 12.0;Persist Security Info=False"
End If
Dim excelConnection As New OleDbConnection(excelConnectionString)
Dim cmd As New OleDbCommand("Select * from [Sheet1$]", excelConnection)
excelConnection.Open()
Dim dReader As OleDbDataReader
dReader = cmd.ExecuteReader()
Dim sqlBulk As New SqlBulkCopy(strConnection)
sqlBulk.DestinationTableName = "pqr_table"
sqlBulk.WriteToServer(dReader)
MsgBox("Congratulations! Successfully Imported.")
        excelConnection.Close() 
```

# php - PHP初学者安全恐惧

> ID：12378706
> 
> 赞同：3
> 
> 时间：2012-09-11T22:13:16.263
> 
> 标签：php, security

我是一名技术作家，他写了很多 HTML/CSS，但被扔进了压力锅里用 PHP 重写了一个 Web 应用程序，并且做得相当好，但我有点担心安全性。

具体来说，主页是用户登录的 INDEX.PHP。一旦他们登录，该页面会重写部分自身并显示未登录用户无法使用的菜单选项。大约 50% 的用户会永远不需要登录，因为他们将查看不需要安全性的公共文档。其他 50% 的用户将对某些文档/页面的查看权限受到限制，并且能够写入数据库。

我让所有这些工作正常，但我担心我正在做的两件事以及它们是否正确：

1.  登录的用户可能会被重定向到另一个页面，例如 PAGE1.PHP。我不希望他们能够保存 PAGE1.PHP 的 URL，然后直接去那里，绕过安全性，所以在 PAGE1.PHP 上，我检查了我在 INDEX.PHP 上创建的登录 cookie。如果 cookie 存在，他们可以访问该页面，如果不存在，则不能。这是做这种事情的正确方法吗？

2.  如何阻止恶意用户将重定向插入到我的各种表单上的众多文本框中之一？我需要允许 HTML，例如强、字体、背景等。我一直在通过一个检查可能的恶意内容的函数运行所有文本框值，一次一个，例如“元 http”或“锚点” " 或 "java script" 但我不确定这是最好的解决方案。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T22:18:13.137

`$_SESSION`会是你的朋友。在正常的共享主机环境中，`$_SESSION`可能不会持续任何时间超过，呃，当前会话，所以相应地计划。（IE，除了登录之外，不要依赖它。）

你需要继续阅读`session_start`和朋友。

此外，请查看此讨论：[PHP HTML sanitizer](https://stackoverflow.com/questions/2721184/php-html-sanitizer) for sanitizing HTML input。`bbcode`（仅供参考，之所以`markdown`如此受欢迎是有原因的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:19:45.287

1.  不——每个客户都可以操纵他的 cookie 并发送他们想要的一切——甚至是无效的“登录”cookie。您必须将这些信息服务器端存储在会话中

2.  您可以使用`strip_tags`只允许一些特殊标签或使用 html sanitizer

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T22:25:34.843

1\. 成功登录后，存储一个新`$_SESSION`变量，例如用户 ID（因为这似乎经常需要）

例子：

```
 if(login is successful)
    { 
       $_SESSION['userId'] = $userId;
    } 
```

创建一个 php 身份验证页面，检查以确保填充了会话变量。如果没有，请重定向到拒绝访问或登录页面。

例子：

```
if(! isset($_SESSION['userId']) || $_SESSION['userId'] == '')
{
    header("Location: accessDenied.php?msg=Not logged in");
} 
```

在每个安全页面上，`require('auth.php');`

2\. 您可以`strip_tags`在文本框和`mysqli_real_escape_string`最终进入数据库的用户输入上使用。（或使用准备好的语句，请参阅[Best way to prevent SQL Injection in PHP](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)）

# javascript - javascript数字数组

> ID：12378708
> 
> 赞同：0
> 
> 时间：2012-09-11T22:13:38.753
> 
> 标签：javascript

大家好，只是想知道为什么下面的代码会导致 NaN？

```
function multiply(num1,num2){
    var total = num1 * num2;
    return total;
}

var numbers = Array(10,2);
var results = multiply(numbers);
alert (results); 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T22:17:21.183

用于`.apply`调用函数。

```
var results = multiply.apply(null, numbers); 
```

* * *

该`.apply`方法调用该`multiply`函数，但接受一个数组或类似数组的集合作为第二个参数，并将集合的成员作为单独的参数发送。

仅供参考，`.apply`设置调用上下文的第一个参数。我通过了`null`，因为您的函数没有使用`this`.

如果您决定让`multiply`函数采用可变数量的参数，则此技术特别有用。使用`.apply`，数组中有多少并不重要。他们将作为个人通过。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T22:14:49.937

您只将一个参数传递给`multiply`. 函数内部`num1`是一个数组，`num2`未定义。

你想做的是这个

```
var result = multiply(numbers[0], numbers[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T22:16:20.060

您将一个数组传递给 multiply 需要 2 个数字。

当您尝试将数组相乘时，结果是 NaN 是有道理的，它代表 Not a number。

尝试：

```
var results = multiply(numbers[0], numbers[1]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T22:18:12.177

调用数组值时，必须在数组中定义值。

例如：

```
var numbers = Array(10, 2) 
```

JavaScript 从 0 开始数组计数，因此`numbers[0]`等于 10 并且`numbers[1]`等于 2。

# ruby-on-rails - rails has_man 通过范围

> ID：12378709
> 
> 赞同：2
> 
> 时间：2012-09-11T22:13:46.887
> 
> 标签：ruby-on-rails, scope, has-many-through

我正在通过表格链接 a`Company`和模型：`User``Association`

```
class User < ActiveRecord::Base
  has_many :associations
  has_many :companies, :through => :associations

class Company < ActiveRecord::Base
  has_many :associations
  has_many :users, :through => :associations 
```

在我的协会中，我有一个名为的布尔列`active`：

```
create_table "associations", :id => false, :force => true do |t|
    t.integer  "company_id"
    t.integer  "user_id"
    t.boolean  "active" 
```

在我的公司控制器中，我试图获取一个公司数组，其中包括用户已为公司激活或未激活的事实。

我设法使用了一个范围，但这只能过滤公司是否活跃，而不是关联：

```
@companiesactive = @user.companies.by_status(true) 
```

希望得到类似的结果：

```
@companiesuseractive = @user.companies.where("association.active", true) 
```

任何帮助将非常感激。

# sql - 使用jsp从sql数据库中删除一个值

> ID：12378711
> 
> 赞同：0
> 
> 时间：2012-09-11T22:13:51.833
> 
> 标签：sql, jsp, jakarta-ee, jdbc, glassfish

我正在尝试使用 jsp 来呈现一个简单的数据库，并能够使用按钮删除一行。我遇到了无法从行中获取主键的麻烦，因为我一直在使用遍历表。我试过只传递简单的数字来表示主键（整数），但它没有抓住它。

假设我想删除主键为 12 的行。

```
 <form action="deleteResponse.jsp">
                              <c:set var="numId" value="12"/>
                              <input type="submit" name="delete" value="Delete"/>
                           </form> 
```

这会生成一个打开 deleteResponse.jsp 的按钮，该按钮具有以下捕获值。

```
<sql:update var="counselorDelete" dataSource="jdbc/IFPWAFCAD">
    DELETE FROM Counselor
    WHERE counselor_id = ?<sql:param value="${param.numId}"/>
</sql:update> 
```

它什么也没做，我不确定它发生了什么。如果我在 sql 查询中手动输入值 12，它将删除该行，但如果我尝试获取该值，它将不会这样做。

首先十分感谢！

也作为旁注。我很难理解如何正确编写 JSP。我看到大多数时候人们使用 <% Java code %> 但在 netbean 教程中，它使用了 and 函数。有人可以向我解释一下吗？我还使用 glassfish 作为 localhost sql 服务器。Netbean 生成一个 glassfish xml，但我也看到人们使用 DriverManager.getConnection 方法。传统上哪一个更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T00:34:03.270

我会尝试将 UI/JSP 代码与 DAO 层分开，使用单独的 Bean 来处理所有插入/uodate/delete 操作。

看看你的应用服务器的日志文件，这可能会给你一些提示。

氪，R

编辑：关于sql：

```
<sql:update var="counselorDelete" dataSource="jdbc/IFPWAFCAD" 
      sql="DELETE FROM Counselor WHERE counselor_id = ?" >
      <sql:param value="${param.numId}"/>
</sql:update> 
```

# json - 加载 .json 文件会产生 404 错误

> ID：12378712
> 
> 赞同：42
> 
> 时间：2012-09-11T22:13:53.700
> 
> 标签：json, azure

我的第一个 Azure 网站是一个简单的测试站点，我已经有一段时间了，它可以将 ajax 回调到服务器以获取 JSON 数据。所有数据文件都有 .json 扩展名。Azure 不会“看到”这些文件。如果我将扩展名更改为 .txt，它会为它们提供服务。

我是否必须使用 IIS 才能看到这个 .json？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2015-04-14T16:50:11.120

我也发现 Ahmed Sabbour 的博客文章很有帮助，但它给我带来了额外的问题。虽然修复适用于 Azure Web 应用程序，但当我尝试在本地运行该应用程序时，它可怕地死了，到处抛出 HTTP 500.19。我花了一段时间才弄清楚如何在维护单个 web.config 的同时解决这个问题。解决方案是（尽管有点软糖）首先删除 fileExtension 然后将其重新添加：

```
<staticContent>
  <remove fileExtension=".json" />
  <mimeMap fileExtension=".json" mimeType="application/json" />
</staticContent> 
```

出于我狭隘的目的，这很好，我希望这可以节省一些人试图解决这个问题的时间。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2014-07-08T13:06:50.933

在他的博客文章中引用**Ahmed Sabbour** [http://blogs.msdn.com/b/africaapps/archive/2013/06/07/how-to-serve-static-json-files-from-a-windows-azure-website .aspx](http://blogs.msdn.com/b/africaapps/archive/2013/06/07/how-to-serve-static-json-files-from-a-windows-azure-website.aspx)您必须执行以下操作：

“如果您将 .json 文件上传到您的 Windows Azure 网站并尝试访问它，它会给您一个 404 File Not Found 错误，因为默认情况下未设置 .json 的 MIME 类型。这通常也适用于任何可能需要特定 MIME 类型的文件。

要解决此问题，请通过 FTP 进入您的网站并上传以下 Web.config 文件，该文件将设置正确的 MIME 类型。如果您已经有一个 Web.config 文件，只需将以下内容添加到相应的部分。

```
<?xml version="1.0"?>

<configuration>
    <system.webServer>
        <staticContent>
            <mimeMap fileExtension=".json" mimeType="application/json" />
     </staticContent>
    </system.webServer>
</configuration> 
```

“。我这样做了，404不见了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-29T23:42:29.960

Azure（至少是云服务）似乎知道如何从已部署的 ASP.NET MVC 项目中提供 JSON。我的问题是 JSON 文件属性页上的构建操作设置不正确。将构建操作更改为内容为我修复了它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T22:23:20.867

您是否尝试将特定的 MIME 类型添加到服务器的配置文件中？

[http://www.iis.net/configreference/system.webserver/staticcontent/mimemap](http://www.iis.net/configreference/system.webserver/staticcontent/mimemap)

如果您添加 mime 类型， `application/json; charset=utf` 那应该可以工作。

# powershell - 使用 PowerShell 递归删除文件

> ID：12378714
> 
> 赞同：4
> 
> 时间：2012-09-11T22:14:01.827
> 
> 标签：powershell, windows-server-2008

我需要根据**上次访问**时间删除所有文件（递归地在所有文件夹和子文件夹中）。

我正在查看 Stack Overflow 发布的*[批处理文件以删除超过 N 天](https://stackoverflow.com/questions/51054/batch-file-to-delete-files-older-than-n-days/51069#51069)*的建议此答案的文件：

```
forfiles -p "C:\what\ever" -s -m *.* -d <number of days> -c "cmd /c del @path" 
```

但是，这会根据上次修改时间而不是上次访问时间删除文件。

另外，有没有办法将命令保存在脚本文件中，这样我就可以双击它来运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T23:51:33.257

用于`Get-ChildItem -recurse`获取所有文件，然后您可以将它们通过管道传送到`where-object`命令行开关以过滤掉目录并使用`LastAccessTime`属性根据该属性进行过滤。然后将结果通过管道传递给执行删除命令的 foreach-object。

它最终看起来像这样。注意 Get-Date 的使用，要获取自年初以来更新的所有文件，请替换为您自己的日期：

```
get-childitem C:\what\ever -recurse | where-object {-not $_.PSIsContainer -and ($_.LastAccessTime -gt (get-date "1/1/2012"))} | foreach-object { del $_ } 
```

或者使用一些常见的别名来缩短所有内容：

```
dir C:\what\ever -recurse | ? {-not $_.PSIsContainer -and ($_.LastAccessTime -gt (get-date "1/1/2012"))} | % { del $_ } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T06:53:59.707

顺便说一句，这就是您在 PowerShell 3.0 中执行相同操作（仅获取文件）的方式：

```
$old = Get-Date "1/1/2012"

Get-ChildItem C:\what\ever -File -Recurse | 
Where-Object {$_.LastAccessTime -gt $old} | 
Remove-Item -Force 
```

# django - 在 django-tables2 中格式化表格单元格内容

> ID：12378717
> 
> 赞同：0
> 
> 时间：2012-09-11T22:14:11.513
> 
> 标签：django, django-tables2

喜欢 django-tables ......但我确信解决起来很简单的事情让我很适应。当我为给定行/列传递的值类似于：

```
some<br/>random<br/>words<br/>returned 
```

我希望浏览器解析和呈现该单元格中的内容......看起来像这样：

返回了一些
随机
单词

*不要*逃避我传递的内容并像这样显示它：

```
some<br/>random<br/>words<br/>returned 
```

肯定有一些我错过的标志或选项吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T17:38:34.917

使用 mark_safe 如下：

```
import django_tables2 as tables
from django.utils.safestring import mark_safe

class testTable(tables.Tables):
    id = tables.Column()
    html = tables.Column()

    def render_html(self):
        return mark_safe('some<br/>random<br/>words<br/>returned') 
```

[在这个帖子](https://stackoverflow.com/questions/237235/how-to-disable-html-encoding-when-using-context-in-django)中问了同样的问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T23:32:22.820

如果您的某些数据已经包含 HTML，最简单的解决方案是使用 a`TemplateColumn`而不是普通列并将值标记为安全：

```
class Table(tables.Table):
    html_data = tables.TemplateColumn("{{ value|safe }}")
    # ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T22:21:59.363

哈。找到了。自动转义我的内容的不是 django-tables2，而是 django 模板系统本身：[https](https://code.djangoproject.com/wiki/AutoEscaping) ://code.djangoproject.com/wiki/AutoEscaping 。

我不得不改变我的模板代码来呈现 django-table2 像这样：

```
{% autoescape off %}
    {% load render_table from django_tables2 %}
    {% render_table route_table %}
{% endautoescape %} 
```

# towerjs - Towerjs的奇怪路由问题

> ID：12378724
> 
> 赞同：0
> 
> 时间：2012-09-11T22:15:03.953
> 
> 标签：towerjs

如果我的路由器说

```
@resources "homes" 
```

我导航到 `/homes`

一切都加载

但如果我有

```
@match '/', to: 'homes#index' 
```

并导航到`/`

没发生什么事。我刚拿到我的模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:41:32.877

我自己解决了这个问题并发送了一个 PR，它似乎按预期工作。

# json - Groovy JSON/GPath 查询

> ID：12378726
> 
> 赞同：7
> 
> 时间：2012-09-11T22:15:07.980
> 
> 标签：json, groovy, gpath

鉴于以下 JSON，我想提取 postal_code（long_name 或 short_name）。我使用 JsonSlurper 将其摄取到变量中，并使用 find/contains/etc 尝试了各种查询。抓取在其“类型”中具有“postal_code”但无法弄清楚的节点。任何帮助是极大的赞赏。

```
{
   "results" : [
      {
         "address_components" : [
            {
               "long_name" : "Jefferson Ave",
               "short_name" : "Jefferson Ave",
               "types" : [ "route" ]
            },
            {
               "long_name" : "North Newport News",
               "short_name" : "North Newport News",
               "types" : [ "neighborhood", "political" ]
            },
            {
               "long_name" : "Newport News",
               "short_name" : "Newport News",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Virginia",
               "short_name" : "VA",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "United States",
               "short_name" : "US",
               "types" : [ "country", "political" ]
            },
            {
               "long_name" : "23608",
               "short_name" : "23608",
               "types" : [ "postal_code" ]
            }
         ],
         "formatted_address" : "Jefferson Ave & Denbigh Blvd, Newport News, VA 23608, USA",
         "geometry" : {
            "location" : {
               "lat" : 37.13852930,
               "lng" : -76.52013079999999
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 37.13987828029151,
                  "lng" : -76.51878181970848
               },
               "southwest" : {
                  "lat" : 37.13718031970851,
                  "lng" : -76.52147978029149
               }
            }
         },
         "types" : [ "intersection" ]
      }
   ],
   "status" : "OK"
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-11T23:15:16.453

下面应该找到 postal_code 类型的节点。如果`results`或`address_components`曾经有多个列表项，您将不得不通过用一些迭代替换索引访问来相应地进行调整，但希望这会有所帮助。

```
import groovy.json.*

def text = '''
{
   "results" : [
<omitted rest to save space>
....
}
'''

def json = new JsonSlurper().parseText(text)

def theNode = json.results[0]
                  .address_components
                  .find { it.types[0] == 'postal_code' }

assert '23608' == theNode.long_name 
```

# php - web 服务器上使用的 file_put_contents 编码？

> ID：12378728
> 
> 赞同：6
> 
> 时间：2012-09-11T22:15:23.027
> 
> 标签：php

在这篇stackoverflow帖子之后，我正在尝试使用`file_put_contents`（并且`file_get_contents`就此而言）使用UTF-8 `¥`：[如何以UTF-8格式编写文件？](https://stackoverflow.com/questions/4839402/how-to-write-file-in-utf-8-format)它使用：

```
$data = mb_convert_encoding($data, 'UTF-8', 'OLD-ENCODING'); 
```

这并没有得到很好的解释，因为它会产生以下错误：

```
mb_convert_encoding(): Illegal character encoding specified 
```

所以`'OLD-ENCODING'`只是他们使用的占位符。我的问题是我应该把它改成什么编码？ASCII 还是 ISO-8859-1？大多数网络主机使用什么编码？有关系吗？

当我打开文件时，我会正确地得到符号，只有当我的记事本设置为编码 UTF-8 时。如果我用另一个字符集打开它，它会显示一个“ `?`”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T22:20:15.617

尝试不使用第三个参数。

```
$str = mb_convert_encoding($str, "UTF-8"); 
```

或者`auto`：

```
$str = mb_convert_encoding($str, "UTF-8", "auto"); 
```

更多信息和示例： http: [//php.net/manual/function.mb-convert-encoding.php](http://php.net/manual/function.mb-convert-encoding.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:18:50.280

`mb_convert_encoding($data, 'UTF-8', mb_detect_encoding($data));`

[mb_detect_encoding](http://php.net/manual/en/function.mb-detect-encoding.php)

# java - 在 Safari 中执行 JavaFX jar 小程序的问题

> ID：12378734
> 
> 赞同：0
> 
> 时间：2012-09-11T22:15:35.477
> 
> 标签：java, safari, javafx-2

按照[netbeans](http://netbeans.org/kb/docs/java/javafx-setup.html)的说明，我可以构建 JavaFX jar 文件。

![在此处输入图像描述](../Images/d79ce950afa185772ce335c890e81f9a.png)

问题是我无法在 Safari 网络浏览器中执行生成的 JavaFX 小程序。

![在此处输入图像描述](../Images/62baf0d5264065021480742a7fc8970f.png)

火狐工作正常。

![在此处输入图像描述](../Images/99b6a3052d9bf302438107d6fcde4408.png)

Safari 可以执行 JavaFX 吗？

[我从Java SE DK 7 站点](http://www.oracle.com/technetwork/java/javase/downloads/jdk7u7-downloads-1836413.html)下载了 JavaFX 2.2 。

# asp.net-mvc - ASP.NET MVC 错误长度不能小于零。参数名称：长度。使用 IE 8 并打开兼容性视图

> ID：12378740
> 
> 赞同：0
> 
> 时间：2012-09-11T22:16:04.773
> 
> 标签：asp.net-mvc, internet-explorer-8, windows-xp, compatibility

我正在一个网站上工作，该网站在 ascx 页面中有以下代码：

```
 <%Using (Html.BeginForm("MakeABooking", "User", FormMethod.Post))%>
 <button type="submit" class="searchCarButton JQryStyleButton" name="btnSubmit" value="1;    <%:DataBinder.Eval(c.DataItem, "currentAsset.AssetID").ToString %>; <%:DataBinder.Eval(c.DataItem, "SearchForDate").ToString %>">Make Booking</button> 
<%End Using%> 
```

此表单在 ViewController 中调用 MakeABooking 函数：

```
 <HttpPost()> _
    <ValidateInput(False)> _
    Public Function MakeABooking(btnSubmit As String) As ActionResult
        Dim sMan As String = btnSubmit
        Dim sSegmentBooked As String = sMan.Substring(0, sMan.IndexOf(";"))
        sMan = sMan.Substring(sMan.IndexOf(";") + 1)
        Dim sAsseID As String = sMan.Substring(0, sMan.IndexOf(";"))
        Dim sDateBook As String = sMan.Substring(sMan.IndexOf(";") + 1)

        Dim BookingModel As New BookingViewModel(CInt(sAsseID), CInt(sSegmentBooked), CDate(sDateBook))
        Return View("MakeABooking", BookingModel)
    End Function 
```

在打开兼容性视图的情况下使用 Internet Explorer 8 时，我收到以下错误**长度不能小于零。参数名称：长度。**

但是，当兼容性视图关闭时，它可以正常工作，但这会导致我正在处理的网站上出现另一个问题，即 ui-selector 控件无法正常工作（jQuery 控件）。

我们为其创建此网站的客户使用的是 Windows XP 和 Internet Explorer 8，因此需要解决 Internet Explorer 8 的问题，因为他们不愿意使用其他浏览器，例如 Google Chrome 或 Firefox，而我们的网站在这些浏览器上运行良好。

我已经设法使用打开兼容模式的 Windows 7 IE 9 来复制问题，并且传递给 MakeABooking 函数（即 btnSubmit）的字符串值是“ `<SPAN class=ui-button-text>Make Booking</SPAN>`”，而传递的字符串应该是这样的“1;8463;12/ 09/2012 12:00:00 AM”，因为函数 MakeABooking 正在寻找分号，因此我得到了这个错误。有谁知道为什么我得到字符串**“ `<SPAN class=ui-button-text>Make Booking</SPAN>`”**而不是前面提到的我所期望的？

如果我能得到任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:47:43.880

感谢 hagensoft，在正确的 aspx 页面中添加以下额外代码解决了该问题。

```
<asp:Content ID="Meta" ContentPlaceHolderID="MetaContent" runat="server">
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" />
</asp:Content> 
```

我还需要在标签的 Site.Master 页面中添加以下代码行。

```
<asp:ContentPlaceHolder ID="MetaContent" runat="server" /> 
```

# android - Android ListView 标头：为标头添加下划线

> ID：12378744
> 
> 赞同：0
> 
> 时间：2012-09-11T22:16:28.627
> 
> 标签：android, android-listview

我有一个带有自定义适配器和一些元素的列表视图。然后我在这个 listView 中添加了一个标题。listView 中的元素按行分隔，我也想用一行将标题与列表的第一个元素分开。

那可能吗？如果是这样，我该怎么做。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T23:23:12.203

**从评论中提出：**
只需将以下答案之一添加到标题布局的底部：[Android Drawing Separator/Divider Line in Layout？](https://stackoverflow.com/q/5049852/1267661)

* * *

我倾向于第三个答案：

```
 style="?android:attr/listSeparatorTextViewStyle" 
```

如果你想模仿已经存在的分隔线。

很高兴我能帮上忙！

# google-apps-script - 可公开访问的 GAS HtmlService 表单

> ID：12378747
> 
> 赞同：0
> 
> 时间：2012-09-11T22:17:10.810
> 
> 标签：google-apps-script

是否有可能拥有一个可公开访问的 HtmlService 表单，以便未登录 Google 服务的人可以访问它并将其用作简单的 html 表单，但仍会将其响应发布到 Google 电子表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:47:26.443

是的，将应用发布为任何人都可以使用，即使是匿名的。

# windows - Metro App OnNavigatedTo 以不同的方法设置文本框值

> ID：12378749
> 
> 赞同：0
> 
> 时间：2012-09-11T22:17:19.190
> 
> 标签：windows, microsoft-metro

我正在关注我为开发 Metro 应用程序而购买的 Kindle 书。由于某种原因，我无法在 OnNavigatedTo 方法之外的方法中设置文本框的文本值。这是本书提供的代码：

```
 protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        //passed in the view model
        viewModel = e.Parameter as ViewModel;
        this.DataContext = viewModel;

        viewModel.PropertyChanged += (sender, eventArgs) =>
        {
            if (eventArgs.PropertyName == "SelectedItemIndex")
            {
                if (viewModel.SelectedIndex == -1)
                {
                    SetItemDetail(null);
                }
                else
                {
                    SetItemDetail(viewModel.GroceryList[viewModel.SelectedIndex]);
                }
            }
            SetItemDetail(viewModel.GroceryList[viewModel.SelectedIndex]);
        };
    }

    private void SetItemDetail(GroceryItem item)
    {
        ItemDetailName.Text = "test"; //(item == null) ? "" : item.Name;
        ItemDetailQuantity.Text = "test"; //(item == null) ? "" : item.Quantity.ToString();

        //if (item != null)
        //{
        //    ItemDetailStore.SelectedItem = item.Store;
        //}
        //else
        //{
        //    ItemDetailStore.SelectedIndex = -1;
        //}
    } 
```

我已经在 set item detail 方法中注释掉了部分，但是当我单击它时我仍然无法设置文本框的值（这应该是行为）。我已经使用了断点并且设置了文本框的属性，但是它没有显示在屏幕上。

谢谢。

# php - PHP自动生成pdf文件？

> ID：12378764
> 
> 赞同：0
> 
> 时间：2012-09-11T22:19:08.313
> 
> 标签：php, pdf

> **可能重复：**
> [使用 PHP 创建 PDF 文件](https://stackoverflow.com/questions/1204630/create-a-pdf-file-with-php)

我和我的朋友正在创建一个基于用户的反馈网站，现在当有人发布他们的项目并且它超过 5,000 个字符时，例如我们希望能够将用户链接到该项目的 pdf。现在我们不知道如何生成 pdf，我们不想将 pdf 文件保存在我们的服务器上，我们只希望数据库中的帖子内容显示在 pdf 上。感谢您的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:22:29.513

看看[TCPDF](http://www.tcpdf.org/)。看起来它具有您正在寻找的一些功能。

# c# - 通过 StringReader 使用本地文件

> ID：12378769
> 
> 赞同：1
> 
> 时间：2012-09-11T22:19:55.087
> 
> 标签：c#, xml, windows-phone-7, stringreader

我正在为 WP 开发应用程序。

我在网上使用 XML 文件，它工作正常，但是当我想在本地存储中使用相同的 XML 文件时，这不起作用......

我在我的项目中添加了它。

要在线使用它，我正在使用它：

```
client.DownloadStringCompleted += client_DownloadStringCompleted;
client.DownloadStringAsync(new Uri("http://exemple.com/news.xml"), "News"); 
```

在我的函数 client_DownloadStringCompleted 中，我是这样读的：

```
StringReader stringReader = new StringReader(e.Result); 
```

因此，它可以正常工作，但是对于我的本地文件，我正在直接这样做并且它不工作：

```
StringReader stringReader = new StringReader("news.xml"); 
```

你知道我该如何解决吗？

谢谢您的帮助。

编辑：没关系，谢谢你的帮助！

我写道：

```
var resource = Application.GetResourceStream(new Uri(@"/YOURASSEMBLYNAME;component/news.xml", UriKind.Relative));
StreamReader streamReader = new StreamReader(resource.Stream);
StringReader stringReader = new StringReader(streamReader.ReadToEnd()); 
```

我把文件当作资源使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T22:29:22.750

StringReader 构造函数的参数是您要读取的字符串。

在您拥有的不起作用的代码中，您正在读取文件的名称而不是文件的内容。

# asp.net-mvc - 使用 mvc4 创建动态控件并仅对某些字段应用验证

> ID：12378774
> 
> 赞同：2
> 
> 时间：2012-09-11T22:20:13.320
> 
> 标签：asp.net-mvc, validation, c#-4.0, data-annotations

我正在使用 MVC4 构建一个应用程序，它是一个问题生成器，允许用户提出一堆问题，并在是否需要时设置真/假。

我现在正在生成准备好供用户回答问题的问题。

我想同时启用服务器端和客户端验证。

将必填字段应用于已设置为必填的问题的最佳方法是什么？

如果我有一个简单的模型和视图模型，例如

```
 public class TestModel
{
    public Guid Id { get; set; }
    public string Question { get; set; }
    public bool Required { get; set; }
}

public class TestViewModel
{
    public string TestName { get; set; }
    public List<TestModel> Tests { get; set; }
} 
```

我不能只向 Question 属性添加 [Required] 属性

是否可以仅将验证应用于必需属性设置为 true 的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T08:51:41.553

您可以使用[MVC Foolproof](http://foolproof.codeplex.com/) NuGet 轻松实现：

只需安装它：

```
install-package foolproof 
```

现在您可以拥有以下模型：

```
public class TestModel
{
    public Guid Id { get; set; }
    public string Question { get; set; }

    [RequiredIf("Required", true)]
    public string Answer { get; set; }
    public bool Required { get; set; }
}

public class TestViewModel
{
    public string TestName { get; set; }
    public List<TestModel> Tests { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new TestViewModel
        {
            TestName = "The test",
            Tests = new[]
            {
                new TestModel { Id = Guid.NewGuid(), Question = "q1", Required = true },
                new TestModel { Id = Guid.NewGuid(), Question = "q2", Required = true },
                new TestModel { Id = Guid.NewGuid(), Question = "q3", Required = false },
                new TestModel { Id = Guid.NewGuid(), Question = "q4", Required = true },
            }.ToList()
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(TestViewModel model)
    {
        return View(model);
    }
} 
```

对应的`~/Views/Index.cshtml`视图：

```
@model TestViewModel

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/mvcfoolproof.unobtrusive.min.js")" type="text/javascript"></script>

<h2>@Html.DisplayFor(x => x.TestName)</h2>

@using (Html.BeginForm())
{
    @Html.HiddenFor(x => x.TestName)
    @Html.EditorFor(x => x.Tests)
    <button type="submit">OK</button>
} 
```

最后是 TestModel ( `~/Views/Home/EditorTemplates/TestModel.cshtml`) 的自定义编辑器模板：

```
@model TestModel

<div>
    @Html.HiddenFor(x => x.Id)
    @Html.HiddenFor(x => x.Required)
    @Html.HiddenFor(x => x.Question)
    @Html.LabelFor(x => x.Answer, Model.Question)
    @Html.EditorFor(x => x.Answer)
    @Html.ValidationMessageFor(x => x.Answer)
</div> 
```

# jakarta-ee - 我必须在所有 EJB 方法（甚至是内部方法）上设置事务注释吗？

> ID：12378779
> 
> 赞同：0
> 
> 时间：2012-09-11T22:20:25.847
> 
> 标签：jakarta-ee, transactions, weblogic

如果我有一个公共 EJB 有状态会话 bean 方法，该方法使用必需事务注释进行注释，并且它在同一个 EJB 上调用私有方法，但该私有方法未使用事务注释进行注释，我会遇到任何潜在的事务问题吗？

假设公共方法被注释为需要事务，它获取数据库连接，进行更新，调用私有方法也更新数据库，私有方法返回并且公共方法提交事务。

我真的应该将“支持”作为私有方法上的事务注释，还是我可以不在该方法上放置任何注释？

我在 WebLogic 11g 作为我的容器中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:29:07.650

您绝对可以不在该方法上添加任何注释。事实上，如果您像“myPrivateMethod(...)”一样调用您的私有方法，则对该方法的注释没有任何效果。它们仅在您通过 EJB 代理调用方法时才重要，您可以通过 JNDI 查找或 DI 获得该代理。

# vb.net - Oracle.DataAccess 内存泄漏

> ID：12378782
> 
> 赞同：0
> 
> 时间：2012-09-11T22:20:52.930
> 
> 标签：vb.net, oracle10g, windbg

我正在支持和开发一个 ASP.NET 应用程序，它连接到几个 SQL 数据库和几个 Oracle 数据库。一段时间后（有时是一天，有时是一周，有时是几周），W3WP.exe 进程内存增加到 1GB 以上。

此时我无法连接到 Oracle 数据库（尝试连接到 Oracle 数据库时抛出内存不足异常或 OracleException），但我能够连接到 SQL 数据库。

我使用 Oracle.DataAccess 连接到 Oracle 数据库（版本 10.2.0.100）。我遇到了一些网页，它们讨论了这个第三方 API 和我的版本的内存泄漏，例如这里：[https](https://forums.oracle.com/forums/thread.jspa?threadID=1060230) ://forums.oracle.com/forums/thread.jspa?threadID=1060230 。

我打算升级到下一个版本。有没有其他人对这个 API 有任何内存泄漏类型的问题？

# java - SSL 通信 Java

> ID：12378790
> 
> 赞同：0
> 
> 时间：2012-09-11T22:21:42.057
> 
> 标签：java, security, ssl

`admin`我为我的应用程序实例和我的应用程序实例生成了自签名证书`judge`。这些实例在不同的机器上运行，并且它们都有彼此证书和自己证书的副本。我想在这两者之间进行交流，我想知道我目前的方法是否是正确的方法：

```
CertificateFactory cf = CertificateFactory.getInstance("X.509");
Certificate certificate = cf.generateCertificate(new FileInputStream(...));

KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
keyStore.load(null, "test".toCharArray());
keyStore.setCertificateEntry("admin", certificate);

// Code omitted which repeats the above to set the judge certificate

TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
tmf.init(keyStore);
SSLContext ctx = SSLContext.getInstance("TLS");
ctx.init(null, tmf.getTrustManagers(), null);

factory = ctx.getSocketFactory(); // Or #getServerSocketFactory() if admin and not judge 
```

有了这个，我将能够与两个实例安全地通信，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T23:07:58.503

不，KeyManager 需要一个带有密钥条目的密钥库，而不是证书条目。只需按照 JSSE 设计者的意图使用密钥库文件。

# objective-c - 在 NSMutableArray 错误上执行选择器

> ID：12378793
> 
> 赞同：1
> 
> 时间：2012-09-11T22:22:06.500
> 
> 标签：objective-c, nsmutablearray, performselector

您好，我在 NSMutableArray 上的 performSelector 遇到了棘手的问题。我可能误解了 performSelector 的作用。基本上我有带有对象的 NSMutableArray（它们都是基于我的类的对象，它继承自 UIButton，但我猜这并不重要），我需要向数组中的所有对象发送消息。

在我的类的头文件中，我声明了由选择器调用的函数。它看起来像这样：

```
-(void)scaleChangedWithANumber:(NSNumber *)scale; 
```

在此示例中，我的数组包含 3 个对象。如果我逐项调用它们，它就完美了：

```
NSNumber *tmpNumber=[NSNumber numberWithFloat:scale];

ButtonOfElement *tmpButton1=[elementsButtonContainer objectAtIndex:0];
[tmpButton1 performSelector:@selector(scaleChangedWithANumber:) withObject:tmpNumber];

ButtonOfElement *tmpButton2=[elementsButtonContainer objectAtIndex:1];
[tmpButton2 performSelector:@selector(scaleChangedWithANumber:) withObject:tmpNumber];

ButtonOfElement *tmpButton3=[elementsButtonContainer objectAtIndex:2];
[tmpButton3 performSelector:@selector(scaleChangedWithANumber:) withObject:tmpNumber]; 
```

但是，如果我尝试在数组上调用 performSelector（我需要向数组中的所有对象发送消息）：

```
NSNumber *tmpNumber=[NSNumber numberWithFloat:scale];
[elementsButtonContainer performSelector:@selector(scaleChangedWithANumber:) withObject:tmpNumber];
tmpNumber=nil; 
```

我得到错误：

```
[__NSArrayM scaleChangedWithANumber:]: unrecognized selector sent to instance 0x1737f0
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayM scaleChangedWithANumber:]: unrecognized selector sent to instance 0x1737f0'
*** First throw call stack:
(0x34e456c3 0x370be97f 0x34e49227 0x34e47951 0x34d9f468 0x31d1 0x369a70eb 0x369a7447 0x369324d9 0x368f9c0d 0x36ae5649 0x3681df4f 0x3681c9b3 0x3682791f 0x368274eb 0x36814f29 0x36814843 0x337425d3 0x33742203 0x34e1a593 0x34e1a537 0x34e193b9 0x34d8c39d 0x34d8c229 0x3374131b 0x368688f9 0x2363 0x2308)
libc++abi.dylib: terminate called throwing an exception 
```

我当然可以使用循环并逐项调用执行选择器，但我认为在数组上使用 performSelector 会更加优雅和清晰。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T22:40:00.630

试试这个：

```
[elementsButtonContainer makeObjectsPerformSelector:@selector(scaleChangedWithANumber:) withObject:tmpNumber]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:26:53.953

`elementsButtonContainer`没有一个名为`scaleChangedWithANumber`. 您需要使用一些不同的逻辑来声明它，或者在数组中的所有按钮子类上调用现有方法。

# iphone - 释放 ScrollView 内存

> ID：12378794
> 
> 赞同：0
> 
> 时间：2012-09-11T22:22:10.900
> 
> 标签：iphone, ios, ipad, uiview, uiscrollview

我有一个滚动视图，我可能会添加 400 个缩略图。我在仪器中对其进行了分析，并观察内存 livebytes 高达约 70MB。然后我从超级视图中删除所有这些，并且活动字节保持不变。

需要恢复这个内存。有什么诀窍？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:26:57.930

我认为这是一个类似的问题： [Problem dealloc'ing memory used by UIImageViews with rather large image in an UIScrollView](https://stackoverflow.com/questions/289360/problem-deallocing-memory-used-by-uiimageviews-with-fairly-large-image-in-an-ui)

我以前也遇到过类似的问题。一种解决方案似乎是在最终发布之前将 UIImageView 图像设置为 nil，根据这个问题的答案： [在 iPhone 上混淆内存分配错误](https://stackoverflow.com/questions/4032293/confusing-memory-allocation-error-on-iphone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:31:18.103

确保您还从数据源中删除了 UIImage 实例。另外，考虑将 UIImage 放在 NSCache 中，当内存不足时清除它们，并使用 UITableView 而不是 UIScrollView（以重用界面元素）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T23:20:22.670

有两件事需要管理 - 视图和图像。您只需要足够的滚动视图子视图来填充滚动视图的可见部分。这里的好模式是有一个重用池。当您需要滚动视图的子视图时，请在重用池中检查一个。如果没有，分配一个。当滚动发生时，将不再可见的视图放入重用池中，并在新可见的空间中添加视图（首先检查重用池）。

图像可以放置在由它们的 url 和时间索引的缓存中。可变字典非常适​​合 url 索引。包含 url 的可变数组可以是时间索引的一个很好的 FIFO 队列。该 url 可以是应用程序中打包图像的文件 url，也可以是下载图像时的远程 url。要添加到缓存中，请将 url-image 对添加到字典中，并将 url 添加到时间数组的前面（索引 0）。

每次添加到缓存时，请检查它的大小是否超出您的目标。如果它确实删除了最旧的图像。为此，请从数组中获取 lastObject，从字典中删除该 url 键值对并从数组中删除LastObject。

此图像缓存可以/应该大于滚动视图中可见视图的数量。您可以调整此大小以匹配所需的内存目标，同时考虑获取图像所需的时间（如果图像是远程的，您可能需要更大的缓存）。

将图像子视图添加到滚动视图时，为其分配默认图像。使用 url 查找检查缓存中的缓存图像。如果那里有一个，请替换默认值。如果没有，请为该图像启动异步获取。当该图像到达时，将其添加到缓存中并检查滚动视图以查看包含该图像的子视图是否仍然可见（它可能已被滚动）。如果是，请设置图像。

# mysql - 将主键保留为 django 中的自动递增字段有什么好处和坏处？

> ID：12378803
> 
> 赞同：1
> 
> 时间：2012-09-11T22:23:02.110
> 
> 标签：mysql, django, primary-key

我很好奇 pk 以及它们是如何工作的。Django 自动将所有模型的主键设置为自动递增整数字段，但这通常是效率方面的最佳选择吗？

在哪些情况下将 pk 保留为递增整数比以某种方式创建自定义整数更有害？人们通常使用的自定义pk是什么？

编辑：最后一个问题。对于我之前的大部分项目，我都在 URL 中公开使用主键作为获取参数，例如：website.com/1234/ 其中 1234 是查询模型的 pk 'id'。这被认为是糟糕的设计还是这样做的共性？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:37:11.807

[主键](http://dev.mysql.com/doc/refman/5.5/en/optimizing-primary-keys.html)只是表中数据的一种特殊类型的索引。主键的一个约束是它必须是唯一的。当您使用 where 子句中的主键执行查找时，该数据的检索速度非常快。

如果您的查询永远不会使用主键执行查找或将其数据与基于主键的另一个表连接，那么拥有自动递增的主键并没有多大用处。在这种情况下，它只是一个浪费的索引，您最好使用表中其他列的主键（如果您可以满足唯一约束）。如果使用自动递增的 pkey 没有意义，并且您也不能拥有唯一索引，那么只需创建没有 pkey 的表，并确保在获取、更新或删除时始终使用最有效的索引单条记录。

~~我想不出任何理由将 pkey 保留为自动递增整数弊大于利，如果从未使用过，只会浪费空间并变得无关紧要。~~ 正如评论中所指出的，当 pkey 是访问数据所需的唯一信息时，顺序主键可能会暴露信息或使您容易受到某些社会工程攻击。

如果您想使用[复合索引](http://dev.mysql.com/doc/refman/5.5/en/multiple-column-indexes.html)作为主键，您可以使用自定义主键。另一个实例可能是跟踪所有具有唯一序列号的项目的表。在这种情况下，您可以将序列号用作 pkey 而不是自动递增的 ID，因为序列号也是唯一的，并且可能会在大多数查找或搜索中使用。

# android - 在Android中使用ImageView移动时如何使ImageView跟随我的手指并旋转？

> ID：12378808
> 
> 赞同：1
> 
> 时间：2012-09-11T22:23:47.093
> 
> 标签：android, rotation, imageview, move

亲爱的android专家我想问你如何在移动时让ImageView旋转。我有飞机的照片。当我 touch_down 并随之移动时，ImageView 会跟随我的手指并动态旋转。当我手指向上触摸时，ImageView 平面向上旋转，当我向左触摸时，ImageView 动态向左旋转。请你给我指路好吗？我正在寻找一些示例，并且只能使用屏幕上的固定点，而不是移动对象。我正在使用示例，例如示例[计算触摸点的角度并在 Android 中旋转它](https://stackoverflow.com/questions/7926816/calculate-angle-of-touched-point-and-rotate-it-in-android)。但是我有移动的物体，你能帮忙吗？！[画出我需要的东西 - 动态跟随手指并旋转它][1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:12:05.753

尝试这个，

```
 public class abc extends Activity implements OnTouchListener 
    {
 ImageView img;
 protected void onCreate(Bundle savedInstanceState) 
 {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.one);

            img = (ImageView) findViewById(R.id.imageView1);
            img.setOnTouchListener(this);
 }

    public boolean onTouch(View v, MotionEvent event) 
{
    switch (event.getAction())
    {
        case MotionEvent.ACTION_DOWN:
        {       
              // Here u can write code which is executed after the user touch on the screen 
                 break; 
        }
        case MotionEvent.ACTION_UP:
        {             
               // Here u can write code which is executed after the user release the touch on the screen    
             break;
        }
        case MotionEvent.ACTION_MOVE:
        {  
           // Here u can write code which is executed when user move the finger on the screen   
            break;
        }
    }
    return true;
} 
```

并检查此链接， http: [//obviam.net/index.php/moving-images-on-the-screen-with-androi/](http://obviam.net/index.php/moving-images-on-the-screen-with-androi/)

# javascript - 当我在 form_for 中的 text_field_tag 之一中按 Enter 键时，如何禁用发出 POST 请求

> ID：12378811
> 
> 赞同：0
> 
> 时间：2012-09-11T22:24:12.693
> 
> 标签：javascript, ruby-on-rails-3, dom-events

我有 form_for，里面有几个 text_field_tag。当我输入 *_tag 之一时，它会向提供的 URL 发出 POST 请求，我想禁用它并执行其他操作。

```
 <%= form_for 'sample', :url => sample_path, :remote => true do %>
    <%= text_field_tag :field_1, nil, :class => 'input', :onKeyPress=>"return disableEnterKey(event)" %>
    <%= text_field_tag :field_2, nil, :class => 'input', :onKeyPress=>"return disableEnterKey(event)" %>
      <%= submit_tag "Send", :id => 'send', :class => 'floatright' %>
    </div>
  <% end %> 
```

这是`disableEnterKey()`：

```
disableEnterKey = function(e) {
    var code = (e.keyCode ? e.keyCode : e.which);
    if(code == 13) { //Enter keycode
        //do somethig else
    }
  }; 
```

这`disableEnterKey`被调用了，但是 POST 请求也是如此。如何禁用默认设置`onKeyPress`并覆盖事件？

红宝石：“1.8.7”

导轨：3.2.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:28:13.513

你需要使用：

```
e.preventDefault(); 
```

所以它看起来像这样：

```
disableEnterKey = function(e) {
    var code = (e.keyCode ? e.keyCode : e.which);
    if(code == 13) { //Enter keycode
        e.preventDefault();
        //do somethig else
    }
  }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:29:04.143

解决了，如果你有 return false; 在 disableEnterKey 结束时，它也不会发出 POST 请求。感谢@ujm 的快速反馈！

# ruby - 如何从终端运行 Ruby 代码？

> ID：12378818
> 
> 赞同：112
> 
> 时间：2012-09-11T22:24:38.087
> 
> 标签：ruby, console, terminal

我需要从终端运行几行 Ruby 代码，但找不到所需的参数。

你能解释一下如何做到这一点吗？

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2012-09-11T22:26:35.327

如果安装了 Ruby，那么

```
ruby yourfile.rb 
```

`yourfile.rb`包含 ruby​​ 代码的文件在哪里。

或者

```
irb 
```

启动交互式 Ruby 环境，您可以在其中键入代码行并立即查看结果。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-09-11T22:28:33.623

`-e`您可以使用以下标志在一行中运行 ruby​​ 命令：

```
ruby -e "puts 'hi'" 
```

查看[手册页](http://linux.die.net/man/1/ruby)以获取更多信息。

# jquery - 模态确认 - 如果单击确定，则未提交表单

> ID：12378820
> 
> 赞同：1
> 
> 时间：2012-09-11T22:24:46.297
> 
> 标签：jquery, modal-dialog

我在页面上有乘法表格（自动生成）。我要求用户确认删除记录。如果用户单击否，模式对话框将关闭并且没有任何反应，但是如果他单击是按钮，则不会再次发生任何事情。任何人都可以帮忙吗？

这是代码：

```
 <input type="submit" value="Click me" class="button" />

 <div id="modal">
<div id="heading">
    Record will be deleted! Please Confirm.
</div>

<div id="content">
    <p>Record will be deleted! This operation can't be undone. <br />Are you sure?</p>

    <input type="button" onclick="return true;" class="button green close" value="Yes"></button>
    <input type="button" onclick="return false;" class="button red close" value="No"></button>

</div> 
```

```
$('.oneUser').on('submit',function(e){
    $('#modal').reveal({ 
        animation: 'fade',                   
        animationspeed: 600,                       
        closeonbackgroundclick: true,           
        dismissmodalclass: 'close'    
    });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:51:12.983

更新了，现在有一个[小提琴！](http://jsfiddle.net/g76BX/1/)

更新的标记

```
<form>
    <input type="submit" value="Click me" class="button" id="submitButton" />
</form>​ 
```

*   对话框标记已删除。
*   包括表单标记。

更新的脚本

```
var confirmDelete = $('<div></div>')
    .html('Record will be deleted! This operation can\'t be undone. <br />Are you sure?')
    .dialog({
        autoOpen: false,
        title: 'Record will be deleted! Please Confirm.',
        buttons: {"Yes": function() { 
                      $(this).dialog("close"); 
                      $('form').submit();
                 }, "No": function() {
                      $(this).dialog("close");
                 }
        }
    });  
$('#submitButton').on('click', function(e){
    e.preventDefault();
    $(confirmDelete).dialog('open');
}); 
```

*   使用按钮的点击事件而不是表单的提交事件。
*   [像这个人那样](https://stackoverflow.com/questions/3560872/returning-value-from-confirmation-dialog-using-jquery-ui-dialog)实现对话框。
*   是和否选项将关闭对话框，单击“是”也将调用`$('form').submit();`.

# javascript - 如果助手不在，如何从 Grunt 中的代码调用任务

> ID：12378823
> 
> 赞同：8
> 
> 时间：2012-09-11T22:25:02.503
> 
> 标签：javascript, node.js, gruntjs

Grunt 正在删除助手，这已经在 grunt-contrib 中发生了。

但是，我有一个 Grunt 文件，它依赖于调用其中一些帮助程序的一些自定义任务。没有帮手，它就会崩溃。我只是想知道替换它们的正确方法应该是什么。

我会以某种方式直接调用任务，但我不确定如何。由于 Grunt 文档尚未更新，因此举个例子会有很大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T04:58:58.397

好的，经过一些研究和 grunt-contrib 维护者的帮助，我重写了我的任务：

```
grunt.registerMultiTask('multicss', 'Minify CSS files in a folder', function() {
    grunt.file.expandFiles(this.data).forEach(function(file) {
        var minified = grunt.helper("mincss", grunt.file.read(file));
        grunt.file.write(file, minified);
        grunt.log.writeln("Minified CSS "+file);
    });
}); 
```

进入这个：

```
grunt.registerMultiTask('multicss', 'Minify CSS files in a folder', function() {
    var count = 0;
    grunt.file.expandFiles(this.data).forEach(function(file) {
        var property = 'mincss.css'+count+'.files';
        var value = {};
        value[file] = file;
        grunt.config(property, value);
        grunt.log.writeln("Minifying CSS "+file);
        count++;
    });
    grunt.task.run('mincss');
}); 
```

配置文件中不需要其他更改。新的代码使用了任务本身，而不是已经消失的助手。

这可能不是最好的方法，Grunt 0.4.0 可能会再次改变游戏规则，但它现在确实适用于 Grunt 0.3.15 和 grunt-contrib 0.2。

# sql - T-SQL 查询选择过去 3 个月的数据、去年的月份、本月的平均值和所有月份的平均值

> ID：12378825
> 
> 赞同：1
> 
> 时间：2012-09-11T22:25:19.587
> 
> 标签：sql, tsql, common-table-expression

我有一个带有列的表`Category, Date, Monthly_Revenue`。

我需要一个查询，它将选择`Todays_Month`, `Last_Month`, 2 个月前, `Last_years_Month`, 今天月份的平均值, 所有月份的平均值。

此查询需要按类别分组。

例子 ：

```
Category | Sept, 2012 | Aug, 2012| Jul, 2012 | Sept, 2011 | Average of Sept | Avg all Mo 
```

作为 SQL 的新手，我还没有掌握它。我想看看那里是否有人可以破解它。谢谢。

**样本数据**

```
'Burger'  '9/1/2012'   '500'
'Fries'  '10/1/2012    '300'
'Burger'  '6/1/2011'   '250' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:18:09.823

您需要这些方面的东西。不是最佳解决方案，但会给您一个开始。这是一个静态解决方案，但看起来您可能需要一个动态解决方案

*未经测试

```
 SELECT 
 Category
,[Sep 2012]=SUM(CASE WHEN YEAR(TranDate)= YEAR(GETDATE()) AND MONTH(TranDate)= MONTH(GETDATE()) THEN Amount ELSE NULL END)
,[Aug 2012]=SUM(CASE WHEN  YEAR(TranDate)= YEAR(DATEADD(month,-1,GETDATE())) AND MONTH(TranDate)= MONTH(DATEADD(month,-1,GETDATE()))  THEN Amount ELSE NULL END)
,[Jul 2012]=SUM(CASE WHEN YEAR(TranDate)= YEAR(DATEADD(month,-2,GETDATE())) AND MONTH(TranDate)= MONTH(DATEADD(month,-2,GETDATE())) THEN Amount ELSE NULL END)
,[AVG Sep 2012]=AVG(CASE WHEN YEAR(TranDate)= YEAR(GETDATE()) AND MONTH(TranDate)= MONTH(GETDATE()) THEN Amount ELSE NULL END)
,[AVG 12 months]=AVG(CASE WHEN TranDatee > CAST(DATEADD(year,-1,GETDATE()) AS DATE) THEN Amount ELSE NULL END)/12
FROM Table1
GROUP BY Category,Amount 
```

# php - memcached 资源需求

> ID：12378826
> 
> 赞同：0
> 
> 时间：2012-09-11T22:25:23.017
> 
> 标签：php, memcached

我是memcache的新手。我的主机（hostgator）说他们推荐在 VPS 5 及以上的 memcahce 上。我使用的是 VPS 4（Centos，2 Ghz，1.3 GB 内存，60 GB 硬盘），而 VPS 5 是 Centos，2.7Ghz，1.8GB 内存，80GB 硬盘。

memcache 需要这么多资源吗？我认为 VPS4 应该这样做，但我的主人认为其他明智。谁能提出为什么 memcahced 资源需求如此之高？谢谢安妮塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:31:57.743

这取决于您要使用 memcache 存储多少数据。所有数据都将保存在 RAM 中，因此如果您要保存大量数据，您还需要大量 RAM。好吧.. 如果您的 VPS4 RAM 完全被您已经拥有的站点/应用程序使用 - 使用 VPS 5（甚至是具有大量 RAM 的系统）是合理的。当然，它会使用一些额外的 CPU 资源，但它的需求应该不会很高。但是，如果您的 VPS 上有一些足够简单的东西 - 看起来他们只是想出售 VPS 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:33:44.453

确定需要缓存多少数据？您只需要了解数据对象的大小以及您认为会有多少个数据对象。

您真的只需要查看 memcached 统计信息...可能会达到 90% 以上的命中率（取决于应用程序需求）、0 的逐出率，以及当缓存完全填充时可能大约 50% 的内存使用率提供任何增长需求、峰值等。

一旦您知道内存分配是多少，您就可以正确调整服务器的内存大小。

# openerp - 在 openerp 中的产品表单上创建一个按钮

> ID：12378827
> 
> 赞同：1
> 
> 时间：2012-09-11T22:25:33.473
> 
> 标签：openerp

我正在尝试在产品表单上创建一个按钮。这是我的xml

```
<record id="action_button" model="ir.actions.server">
    <field name="type">ir.actions.server</field>
    <field name="condition">True</field>
    <field name="state">code</field>
    <field name="model_id" ref="product_normal_form_view"/>
    <field eval="5" name="sequence"/>
    <field name="code">action=self.action_button(cr,uid, context)</field>                                                                                                       
</record> 
```

==================

# 按钮定义为

```
<group col="2" colspan="2">
    <button name="%(action_button)d" type="action"  string="Test Hello"/>
</group> 
```

# 在python文件中有一个方法action_button

```
 def action_button(cr,uid,context):
        test={}
        modelname="Hello Usha"
        test['tryhello']=modelname
        return{'value':test} 
```

==============

# 单击按钮时出现错误，在 temp_range 上没有为 action_button 定义属性

pl。帮助，提前谢谢

-乌莎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:19:22.743

试试下面的代码::

```
<record id="action_button" model="ir.actions.server">
    <field name="type">ir.actions.server</field>
    <field name="condition">True</field>
    <field name="state">code</field>
    <field name="model_id" ref="product_normal_form_view"/>
    <field eval="5" name="sequence"/>
    <field name="code">action=self.pool.get('product.product').action_button(cr, uid,  context
    </field> 
```

并在我们定义action_button方法的py文件中进行更改

```
def action_button(self, cr, uid, context=None):
    test={}
    modelname="Hello usha"
    test['tryhello']=modelname
    return{'value':test} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T06:43:26.453

我已经尝试了您的代码，修改后它工作正常并且该方法也在执行。

```
 <record id="action_button" model="ir.actions.server">
        <field name="type">ir.actions.server</field>
        <field name="name">Testing</field>
        <field name="condition">True</field>
        <field name="state">code</field>
        <field name="model_id" ref="model_product_product"/>
        <field eval="5" name="sequence"/>
        <field name="code">action=obj.action_button(context=context)</field>                                                                                                       
    </record>

def action_button(self, cr, uid, ids, context=None):
    #your code 
```

希望这能解决您的问题。

# html - Is there an example on using Razor to generate a static HTML page?

> ID：12378829
> 
> 赞同：3
> 
> 时间：2012-09-11T22:25:34.623
> 
> 标签：html, visual-studio-2010, razor, razorgenerator

I want to generate a static HTML page by RAZOR, basically by using includes of partial sub pages.

1.  I have tried T4 as well and do look for an alternative: see [here](https://stackoverflow.com/questions/12359804/vs2010-disable-validation-for-particular-html-file-not-all-files) and [here](https://stackoverflow.com/questions/12366426/html-doctype-for-includes-visual-studio-or-html-generic)
2.  This [answer](https://stackoverflow.com/a/11188359/356726) says it is possible - but no concrete example
3.  I have installed [Razor generator](http://razorgenerator.codeplex.com/) because I thought this is the way to go, but I do not get how to generate static HTML with this.

Best would be a complete extension which behaves like the T4 concept, but allows me to use the RAZOR syntax and **HTML formatting** (the formatting issue is basically the reasons why I am not using T4).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T23:22:23.013

If you are trying to take a Razor view and compile it and generate the HTML then you can use something like this.

```
public static string RenderViewToString(string viewPath, object model, ControllerContext context)
{
    var viewEngineResult = ViewEngines.Engines.FindView(context, viewPath, null);
    var view = viewEngineResult.View;

    context.Controller.ViewData.Model = model;

    string result = String.Empty;
    using (var sw = new StringWriter())
    {

        var ctx = new ViewContext(context, view,
                                  context.Controller.ViewData,
                                  context.Controller.TempData,
                                  sw);
        view.Render(ctx, sw);

        result = sw.ToString();
    }

    return result;
} 
```

Or outside of ControllerContext [http://razorengine.codeplex.com/](http://razorengine.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-24T11:51:20.700

The current version of Razor Generator has the "Generator" option which when used with the "MvcHelper" generator produces a static method for the helpers too.

For example, add this line at the top of your CSHTML file (with the Custom Tool Visual Studio property set to RazorGenerator of course):

```
@* Generator: MvcHelper, GeneratePrettyNames : true *@ 
```

The pretty names option is not strictly necessary but is something I feel should be default, to avoid those crazy long class names with underscores :-)

As you may know already, the main benefit of this method is you can share your helpers in separate assemblies. That is why I use Razor Generator in the first place.

Even within the same assembly, you could now leave your code outside App_Code folder. However that is not the best practice (at least for security) and the Visual Studio designer gets confused. It thinks the method is still not static, but it isn't and works fine.

I'm prototyping my helpers in the App_Code folder of the same site/assembly for speed then copying them to shared components when they're tested. The reason I needed this solution was to create generic Bootstrap helpers without hand-coding every piece of HTML in a HtmlHelper, i.e. used together with [this solution](https://stackoverflow.com/questions/4760783/is-it-possible-to-create-a-generic-helper-method-with-razor) from @chrismilleruk.

I guess later I may have to convert the CSHTML helpers to a hand-coded HtmlHelper for speed. But to start with see a great development speed increase at the beginning, from the ability to copy and paste blocks of HTML code I want to automate, then perfect and debug them quickly in the same format/editor.

# javascript - Mootools 或 jQuery 中的 Windows 7 样式日历

> ID：12378832
> 
> 赞同：1
> 
> 时间：2012-09-11T22:26:04.783
> 
> 标签：javascript, jquery, sharepoint-2010, calendar, mootools

我正在尝试为网站构建一个 Windows 7（甚至是 Windows Phone 7）样式的事件日历（最好使用 Mootools、本机 JS 或 jQuery）。

当我们单击 Windows 7 时钟的月份时，它会显示全年的月份。再次单击它，它会显示过去的十几年，然后按十年分组。

**问题：**

1.  那里使用了什么样的过渡/动画？

2.  JS中有现成的Windows 7风格的日历吗？

3.  在 Windows Phone 7 中，事件日历具有相同的转换，并且它在某些日期块中显示非常小的（几乎不可读）文本，表明该日期有一些事件。单击日期，它会展开详细信息（如 Outlook）。在品牌网站的活动页面上部署这种控制是个好主意吗？这是一个 SharePoint 项目。在这方面有什么建议吗？

# mysql - 在 MySQL 或 Oracle 中将 ASCII 文件存储为 BLOB 字段是否会降低存储要求？

> ID：12378844
> 
> 赞同：1
> 
> 时间：2012-09-11T22:27:04.453
> 
> 标签：mysql, storage, blob

我有几千个小 ASCII 文件，其中包含我需要存储在某处的分子中原子的 3D 笛卡尔坐标（以及其他信息）。

一个简单的计算告诉我，我们将需要几个 TB 的空间，最多可能会减少到几个 GB，但在当前的基础设施限制下是无法管理的。有人告诉我，有些人在 MySQL 和 Oracle 中以 BLOB 字段的形式存储了相似数量的文件（格式相同，但有时被压缩）。我的问题是，存储诸如 BLOB 之类的文件是否会减少某种形式的存储需求？如果是，我可以期望减少多少？

这是来自需要存储的 ASCII 文件的示例文本：

```
@<TRIPOS>MOLECULE
****
    5     4     1     1     0
SMALL
GAST_HUCK

@<TRIPOS>ATOM
      1 C1         -9.7504    2.6683    0.0002 C.3       1 <1>        -0.0776 
      2 H1         -8.6504    2.6685    0.0010 H         1 <1>         0.0194 
      3 H2        -10.1163    2.1494   -0.8981 H         1 <1>         0.0194 
      4 H3        -10.1173    3.7053   -0.0004 H         1 <1>         0.0194 
      5 H4        -10.1176    2.1500    0.8982 H         1 <1>         0.0194 
@<TRIPOS>BOND
     1    1    2 1    
     2    1    3 1    
     3    1    4 1    
     4    1    5 1    
@<TRIPOS>SUBSTRUCTURE
     1 ****        1 TEMP              0 ****  ****    0 ROOT 
@<TRIPOS>NORMAL
@<TRIPOS>FF_PBC
FORCE_FIELD_SETUP_FEATURE Force Field Setup information
v1.0  0 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 NONE 0 0 0 0 1 0 0 0 0 0 0 0 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:51:36.617

将数据存储在`BLOB`列中并不能减少存储需求。类型的存储要求`BLOB`很简单：

*   `TINYBLOB`     L + 1 个字节，其中 L < 2 ⁸
*   `BLOB`             L + 2 个字节，其中 L < 2 ^(16)
*   `MEDIUMBLOB`L + 3 个字节，其中 L < 2 ^(24)
*   `LONGBLOB`     L + 4 个字节，其中 L < 2 ^(32)

`L`以字节为单位表示字符串数据的长度。

有关详细信息，请参阅[存储要求](http://dev.mysql.com/doc/refman/5.5/en/storage-requirements.html)。

如果不需要在数据库中搜索分子文件的内容，您可以通过在插入数据之前压缩数据或在插入时使用 MySQL [COMPRESS()](http://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html#function_compress)函数来减少存储需求。

我认为这解决了您的主要问题，并且根据这些数字以及您计划根据平均大小存储多少文件，您可以计算`BLOB`类型列将消耗多少存储空间。

# android - notifyDataSetChanged Android ListView

> ID：12378845
> 
> 赞同：0
> 
> 时间：2012-09-11T22:27:07.197
> 
> 标签：android, arraylist, android-listview

我的应用程序类中有一个项目列表：

```
public class MyApp extends Application {
   private static ArrayList<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>();
   //GET AND SET
} 
```

我会在 ListView 中使用它。我有一个按钮可以在 MyApp 列表中添加一个元素：

```
public void addBase(View view){
   MyApp.add2List(....); //add to MyApp.list
   adapter.notifyDataSetChanged();
} 
```

在同一个活动中，我设置了 ListView：

```
list=(ListView)findViewById(R.id.list_view);         
adapter=new MyListAdapter(this, R.layout.list_item, Session.getList());
list.setAdapter(adapter); 
```

这是我的适配器：

```
public class MyListAdapter extends ArrayAdapter<HashMap<String, String>> {

  private Context _context;
  private Activity activity;
  private ArrayList<HashMap<String, String>> data;
  private static LayoutInflater inflater=null;

  public MyListAdapter(Context context, int resourceId, ArrayList<HashMap<String, String>> items) {
    super(context, resourceId, items);
    this.data = items;
    _context = context;
    activity = ((Activity)context);
    inflater = activity.getLayoutInflater();    
  }

   public View getView(final int position, View convertView, ViewGroup parent) {
      View vi=convertView;
      final ArrayList<HashMap<String, String>> list = Session.getList();
      if(convertView==null){
         vi = inflater.inflate(R.layout.list_item, null);

         ImageButton delete = (ImageButton)vi.findViewById(R.id.delete_item);
         delete.setOnClickListener(new Button.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        list.remove(position);
                        notifyDataSetChanged();
                    }
                });

      }
      return vi;
  } 
```

我使用**了 notifyDataSetChanged()**方法，但它不起作用！没有更新列表视图。
如果尝试再次创建适配器，添加按钮将起作用。

```
adapter=new MyListAdapter(this, R.layout.list_item, Session.getList());
list.setAdapter(adapter); 
```

我该如何为删除按钮执行此操作？
为什么 notifyDataSetChanged() 方法不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:10:29.937

不要重新创建传递给适配器的 ArrayList 或 Array 对象，只需再次修改相同的 ArrayList 或 Array。并且当您修改适配器后数组或 arrylist 大小未更改时，在这种情况下 notifydatasetchange 将不起作用。

在镜头中，它仅在数组或数组列表大小增加或减少时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:55:04.873

我解决它以重新创建每次适配器。
不是很好的解决方案，但它是我唯一找到的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T23:33:51.873

试试这个

```
Adapter.clear()
for (HashMap <String,String> object : Session.getList())
Adapter.add(object) 
```

# apache - Apache - CXF jaxrs-server - 无法访问在 jaxrs-server 端点中首先定义的资源

> ID：12378847
> 
> 赞同：0
> 
> 时间：2012-09-11T22:27:14.863
> 
> 标签：apache, rest, cxf, jax-rs

我将 Apache-CXF 用于 JAX-RS 实现。我有两个资源，它们在两个 bean 中定义。我在 context.xml 操作系统中的 jaxrs-server 如下

```
 <jaxrs:server id="serverId" address="/">
    <jaxrs:serviceBeans>
        <bean id="bean1" class="com.Bean1" />
        <bean id="bean2" class="com.Bean2" />
    </jaxrs:serviceBeans>
</jaxrs:server> 
```

Bean1 的接口如下 -

```
 @Path("/")
   public interface IBean1 {
    @GET
    @Path("/beaninfo1")
    @Produces({ MediaType.APPLICATION_XML })
    public Response checkBean1();
   } 
```

Bean2 的接口如下 -

```
 @Path("/")
   public interface IBean2 {
    @GET
    @Path("/beaninfo2")
    @Produces({ MediaType.APPLICATION_XML })
    public Response checkBean1();
   } 
```

我无法访问 serviceBans 定义中最后定义的资源。在这种情况下，我能够击中 Bean2 但不能击中 Bean1，出现 404 错误，好像我先放 Bean2 然后放 Bean1，我只能击中 Bean1。

我的配置有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:21:16.720

`@Path`在类级别可以有相同的注释。您需要使用资源比较器。请检查这个[问题](https://stackoverflow.com/questions/9725770/multiple-resoucebean-configuration-in-cxf-using-spring)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T00:39:12.373

是的。`@Path`在班级级别给他们不同的注释。

# actionscript-3 - 点击事件有问题

> ID：12378848
> 
> 赞同：0
> 
> 时间：2012-09-11T22:27:37.403
> 
> 标签：actionscript-3, flash

我有一个名为“instructionButton”的按钮实例，我正在尝试跟踪“Clicked”。当它被单击作为测试时输出到输出，但到目前为止我还没有成功。有什么我想念的吗？

我在 Flash Pro 6 中使用代码

```
import flash.events.MouseEvent;

var clickedVar:String = "Clicked.";
var runVar:String = "mice running...";

trace(runVar);

function instructionOpen(event:MouseEvent):void
{
    trace(clickedVar);
    gotoAndPlay(255);
}

instructionsButton.addEventListener (MouseEvent.CLICK, instructionOpen); 
```

当然，如果有更简单的方法来解决这个问题，所有知识都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:37:58.607

1.  检查按钮的属性窗口中是否提供了实例名称（单击按钮并转到菜单“窗口->属性”以打开属性窗口）

2.  属性窗口中提到的按钮名称，应该在动作脚本编码中使用相同的实例名称。确保脚本（代码）和属性窗口实例名称的拼写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:58:10.763

这不起作用的唯一方法是如果你没有达到这个框架。

尝试在您的第一帧上添加此代码并告诉我这是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T12:58:09.360

我真的没有看到您的按钮代码有任何问题，但这是我在 AS3 中的操作方式，它可能会有所帮助:) 在事件侦听器中创建一个简单的函数，我使用 stopPropgation 来防止我的按钮单击下面的任何内容它在闪存文件中。（假设你有两个按钮，你会点击两个而不是一个）

```
instructionsButton.addEventListener(MouseEvent.CLICK, function(e){
    e.stopPropagation();
    trace("Clicked.");
    gotoAndPlay(255);
    }); 
```

这是一个按钮，如果你需要说 15，请告诉我，因为我有一个代码示例，我会给你我使用 switch/case 创建无限数量的按钮和事件列表，这对我有很大帮助： )

# ruby-on-rails - 在 config.action_mailer.default_url_options 中使用 root_url

> ID：12378851
> 
> 赞同：1
> 
> 时间：2012-09-11T22:27:47.527
> 
> 标签：ruby-on-rails, heroku, devise, actionmailer

我在 Heroku 上有一个暂存应用程序和一个生产应用程序。我正在使用 Devise 进行身份验证，这对于我的生产应用程序需要我设置

```
# in config/environments/production.rb
config.action_mailer.default_url_options = { host: 'myapp.com' } 
```

对于我的登台应用程序，我必须设置主机：'myapp-staging.herokuapp.com'

我宁愿在部署到不同的应用程序时不必更改它，因为我一定会在某些时候忘记这一点。有没有办法使用 root_url 代替主机字符串？

# android - TabActivity 上的 NFC 意图启动一项新活动，而不是刷新现有活动

> ID：12378857
> 
> 赞同：3
> 
> 时间：2012-09-11T22:28:36.480
> 
> 标签：android, refresh, nfc, tabactivity, android-pendingintent

*在[我的旧问题](https://stackoverflow.com/questions/12322324/nfc-intent-on-tabactivity-starts-new-activity-instead-of-changing-content-of-exi)结束后，考虑到你给我的建议，我现在再次尝试......*

我有一个 Android-Test-App，我想在使用 NFC 读取某些内容（fe RFID 芯片）后立即将文本更改为 TextView。

问题是我与 TextView 的活动位于 TabHost 的选项卡中。当 NFC 正在读取某些内容时，Activity 在前台启动并且 TextView 不会更改。我想要的是只有 TextView 发生变化，其他一切都保持原样......

这是我的代码：

**我的标签活动：**

```
public class NfcTabsActivity extends TabActivity {

    private NfcAdapter nfc;
    private PendingIntent nfcintent;
    private String[][] nfctechfilter = new String[][] { new String[] { NfcA.class.getName() } };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        TabHost tabHost = getTabHost();

        Intent intent = new Intent().setClass(this, NfcTest.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

        TabSpec spec = tabHost.newTabSpec("nfctab").setIndicator("NFC").setContent(intent);
        tabHost.addTab(spec);

        nfc = NfcAdapter.getDefaultAdapter(this);

            // PendingIntent using the NfcTest-Activity to receive the Intent. (Am I doing this correctly??)
        nfcintent = PendingIntent.getActivity(getApplicationContext(), 0, intent, 0);
    }

    // Start looking for NFC when activity is started/resumed.
    @Override
    protected void onResume() {
        super.onResume();
        nfc.enableForegroundDispatch(this, nfcintent, null, nfctechfilter);
    }

    // Disable NFC when leaving activity
    @Override
    protected void onPause() {
        super.onPause();
        nfc.disableForegroundDispatch(this);
    }
} 
```

这是**我的 NfcTest 活动**，在使用 NFC 时应该接收意图：

```
public class NfcTest extends Activity {

    private TextView status;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.nfctest);

        status = (TextView) findViewById(R.id.textView2);

    }

    @Override
    public void onNewIntent(Intent intent) {

        status.setText("RFID detected...");

    }
} 
```

感谢**NFC 人员**将 PendingIntent 放入 TabActivity 的建议！不幸的是 - 正如我在另一个线程中所说 - 这对我也不起作用...... :(也许我在我的代码中做错了什么？

**这是我的AndroidManifest.xml**中的活动定义：

```
 [...]
        <activity android:name=".NfcTest" android:clearTaskOnLaunch="true" android:alwaysRetainTaskState="true" android:finishOnTaskLaunch="true"></activity>
        [...] 
```

谁能帮我解决这个问题？也许你是 NFC 家伙？也许我只是理解你的想法有问题，或者在我的代码中混淆了一些东西......？：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T20:32:55.213

尝试这个

```
 Intent intent = new Intent().setClass(this, NfcTest.class);

    TabSpec spec = tabHost.newTabSpec("nfctab").setIndicator("NFC").setContent(intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    tabHost.addTab(spec); 
```

# php - 我如何在php中编写新行\r\n？

> ID：12378865
> 
> 赞同：2
> 
> 时间：2012-09-11T22:30:03.857
> 
> 标签：php, csv

> **可能重复：**
> [PHP - 如何创建换行符？](https://stackoverflow.com/questions/4238433/php-how-to-create-a-newline-character)

我正在尝试创建一个 csv 文件。但我得到的只是一排。我想

```
echo '\r\n' . $lineStr; 
```

将创建一个新行。

我添加了以下标题：

```
header("Content-Type:   application/vnd.ms-excel; charset=utf-8");
header("Content-Disposition: attachment; filename=myFile.xls");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: private",false); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-11T22:30:37.480

你需要[双引号](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)：

```
"\r\n" 
```

# java - 如何让 Android 中的 popupWindow 正常工作？

> ID：12378867
> 
> 赞同：0
> 
> 时间：2012-09-11T22:30:31.860
> 
> 标签：java, android, logging, popup

我试图让一个简单的弹出窗口发生，但正在返回一个错误。错误发生在所提供代码的第四行（最后一行）。有什么建议吗？

活动代码

```
logoutoption = new PopupWindow();
logoutoption.showAtLocation(new LinearLayout(this), Gravity.CENTER, 0, 0);
logoutoption.setBackgroundDrawable(getResources().getDrawable(drawable.logoutoption_default));
logoutoption.update(100, 50); 
```

日志

```
09-11 22:26:13.324: E/AndroidRuntime(1232): FATAL EXCEPTION: main
09-11 22:26:13.324: E/AndroidRuntime(1232): java.lang.NullPointerException
09-11 22:26:13.324: E/AndroidRuntime(1232):     at android.widget.PopupWindow.update(PopupWindow.java:1322)
09-11 22:26:13.324: E/AndroidRuntime(1232):     at My.Taste.App.MyTasteActivity.getLogoutOption(MyTasteActivity.java:487)
09-11 22:26:13.324: E/AndroidRuntime(1232):     at My.Taste.App.MyTasteActivity.access$0(MyTasteActivity.java:478)
09-11 22:26:13.324: E/AndroidRuntime(1232):     at My.Taste.App.MyTasteActivity$3.onClick(MyTasteActivity.java:313)
09-11 22:26:13.324: E/AndroidRuntime(1232):     at android.view.View.performClick(View.java:3511)
09-11 22:26:13.324: E/AndroidRuntime(1232):     at android.view.View$PerformClick.run(View.java:14105)
09-11 22:26:13.324: E/AndroidRuntime(1232):     at android.os.Handler.handleCallback(Handler.java:605)
09-11 22:26:13.324: E/AndroidRuntime(1232):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-11 22:26:13.324: E/AndroidRuntime(1232):     at android.os.Looper.loop(Looper.java:137)
09-11 22:26:13.324: E/AndroidRuntime(1232):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-11 22:26:13.324: E/AndroidRuntime(1232):     at java.lang.reflect.Method.invokeNative(Native Method)
09-11 22:26:13.324: E/AndroidRuntime(1232):     at java.lang.reflect.Method.invoke(Method.java:511)
09-11 22:26:13.324: E/AndroidRuntime(1232):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-11 22:26:13.324: E/AndroidRuntime(1232):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-11 22:26:13.324: E/AndroidRuntime(1232):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:57:44.177

替换为以下代码：

```
LayoutInflater layoutInflater  = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);  
        View popupView = layoutInflater.inflate(R.layout.logoutoption, null);  
        final PopupWindow logoutoption = new PopupWindow(popupView, LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);  
        logoutoption.showAsDropDown(search, 50, -30); 
```

# winforms - 在 Beta 测试期间检测异常

> ID：12378869
> 
> 赞同：0
> 
> 时间：2012-09-11T22:30:36.400
> 
> 标签：winforms, visual-studio, exception, testing

（见下面的更新）

在 VisualStudio 2010 环境中运行时，我可以轻松判断我的 Winform 应用程序是否导致异常。我只需要去调试 | 例外，并确保复选框的两列都被选中。然后我运行应用程序，如果有任何异常，我会直接进入有问题的代码段。

当我向测试人员提供测试版本时，如何在测试期间确定异常。我不希望测试人员像普通用户一样在 Visual Studio 中运行。我还是想知道有没有例外以及相关的细节。

Obviosualy，我应该能够控制这个过程，这样当代码被释放时，就会发生正常的执行。

是的，我知道并使用 try/catch 块，但我说的是一种类似于 Visual Studio 异常捕获器和报告器的方法，可能只是编译到产品中并用于部署到 beta 测试人员。

也许Visual Studio有这样的功能，在这种情况下在哪里以及如何设置，或者可能是第三方组件。

[更新：我添加了两个子问题，您可以在[Unhandled Exception next line 或 exit](https://stackoverflow.com/questions/12731065/unhandled-exception-next-line-or-exit)找到。

下面提到的解决方案听起来很棒，并且经过调整可能会奏效，只是目前不行。

在 Visual Studio 中，2010 和现在的 2012 都运行良好。异常处理程序被调用，好吧，在 VS 换行后我说继续。我决定在 VS2012 IDE 之外进行测试，这是一件好事。操作系统捕获错误，显示标准的“发生未处理的异常”对话框，提供详细信息以及继续和退出按钮。选择继续，只是继续应用程序而不陷入我的超级异常处理程序。选择相当，白化应用程序并显示标准关闭窗口对话框。退出按钮也不会调用我的超级处理程序。

目的是让我的异常处理程序被调用。如果我在 VS2012 IDE 中工作，我不需要超级异常处理程序。处理程序的目的是为最终用户和 beta 测试人员服务，即除我自己以外的任何人，他们不会拥有我的开发站。

因此，除非我遗漏了什么，否则问题仍然存在。

另一个问题中有代码示例，足以在几分钟内复制和粘贴并创建一个测试应用程序。]

提前致谢，

莎拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:40:52.313

我不知道在 Visual Studio 中报告错误的任何自动方法，但这就是我所做的。

1.  挂钩到应用程序的[UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)事件。

2.  使用像 nLog 或 Log4Net 这样的日志框架来记录您从该事件中获得的异常和其他数据。或者只是写入一个文本文件。

3.  从您的应用程序中上传该数据或让 Beta 测试人员将其发送给您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:50:43.867

好的，Google Uberlord 对我很失望，我发现这篇精彩的文章解决了这个问题。赞美全能的谷歌。

这是链接： [http ://www.switchonthecode.com/tutorials/csharp-tutorial-dealing-with-unhandled-exceptions](http://www.switchonthecode.com/tutorials/csharp-tutorial-dealing-with-unhandled-exceptions)

基本上，JRadness 的想法是正确的，只是略有错误。他应该使用

```
Application.ThreadException += 
```

新 System.Threading.ThreadExceptionEventHandler(Application_ThreadException);

而不是

```
AppDomain.CurrentDomain.UnhandledException += 
    new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException); 
```

Switch on Code 上的作者谈到了三种方法，第一种是 JRadness 提出的，不适用于 Windows 窗体。

作者甚至解决了我的另一个问题 Continue and Abort。操作系统被绕过了。

是的！！

# solr - Solr：在带有空格的字符串上使用通配符

> ID：12378872
> 
> 赞同：10
> 
> 时间：2012-09-11T22:31:01.850
> 
> 标签：solr, lucene, wildcard

我遇到的问题与此处讨论的问题基本相同：[Solr wildcard query with whitespace](https://stackoverflow.com/questions/10023133/solr-wildcard-query-with-whitespace)，但没​​有回答这个问题。

我在名为“品牌”的字段的过滤查询中使用了通配符。

当品牌名称中有空格时，我遇到了麻烦。例如，当我说 fq={!tag=brand}brand:Lexing*n 时，过滤品牌“Lexington”效果很好。然而，像“Athentic Models”这样的多词品牌会引起问题。似乎必须在名称周围包含双引号。

当有 "s，*s 什么都不做，即品牌："Athentic Mode*" 或品牌："Lexingt*"，不会匹配任何东西。没有双引号，说品牌：Authen*，没有引号和空格，这将匹配 Authentic Models。但是一旦品牌名称中包含空格，匹配时似乎只考虑到第一个空格的字符串。

品牌字段是类型

```
<fieldType name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/> 
```

据我了解，这不是空格标记的。但是，它填充了来自空白标记化字段的 copyField。

我可以做些什么来阻止 Solr 在不使用双引号的情况下对过滤器查询进行标记？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-20T16:12:11.647

就像 Rob 在他的回答中所说的那样，我已经就他所链接的问题[自己发布了一个答案。](https://stackoverflow.com/a/14426341/1045497)

您需要做的就是转义查询中的空格（如`customer_name:Pop *Tart`--> `customer_name:Pop\ *Tart`）。根据我的经验，无论您将通配符放在哪里，这种方法都有效，这得到了 Solr 如何声称类似以下内容的支持：

```
customer_name:Pop\ *Tart 
```

被解析为：

```
customer_name:Pop *Tart 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T01:37:28.657

尝试将类型从字符串更改为文本。字符串类型未标记化，因此当字符串字段中有空格时，它将尝试匹配您的查询，包括字段中的空格。

在默认模式文件中，您可以在字符串字段类型上方看到这一行

```
<!-- The StrField type is not analyzed, but indexed/stored verbatim. --> 
```

使用文本类型应该可以解决您的问题，例如 text_general 或类似的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T23:37:51.010

我在原始问题[Solr wildcard query with whitespace添加了一个可能的解决方案](https://stackoverflow.com/questions/10023133/solr-wildcard-query-with-whitespace/14299081#14299081)

请注意，这仅适用于尾随通配符。我知道这个问题示例在字符串中使用了通配符，但它可以回答问题的具体情况。

基本上它相当于使用[FieldQParserPlugin](http://lucene.apache.org/solr/4_0_0/solr-core/org/apache/solr/search/FieldQParserPlugin.html)查询解析器。查看我关于原始问题的帖子以获取更多详细信息，这样我就不会因为重复自己而受到嘲笑。

# jquery - jQuery 验证：添加要提交的附加任务

> ID：12378873
> 
> 赞同：0
> 
> 时间：2012-09-11T22:31:06.713
> 
> 标签：jquery, validation

想不通这个 单击提交时，我有 jquery 验证插件成功验证所有表单输入。但是...单击提交时，我还想清除包含无效文本的任何输入的数据。无效输入被分配类“.incomplete”

```
 $('#button').click(function(){
            var e = $('.incomplete').length;
            if (e) {
                $('.incomplete').val('');
            };
        }); 
```

上面的代码使“提交”按钮在第二次单击时清除无效输入。我看不出我在做什么会使其在第二次点击而不是第一次点击时执行。

完整的表格，对于那些好奇的人：http: [//pastie.org/4704511](http://pastie.org/4704511)

# database - 用于在线加密数据和使用多个不同密钥解密的私钥/公钥变体

> ID：12378876
> 
> 赞同：2
> 
> 时间：2012-09-11T22:31:22.973
> 
> 标签：database, security, encryption, public-key-encryption

假设以下示例：

我有一个在线服务，用户可以在其中注册和输入个人数据。现在我想加密这些数据。我有一个私钥 Pr1 和公钥 Pu1。

1.  用户在我的在线服务中使用密码登录
    *   将登录密码转换为适合私钥格式 = Pr2
    *   从 Pr2 获取公钥 Pu2
2.  用户输入数据以在线存储在数据库中
3.  使用 Pu1 加密用户输入的数据并**添加**--recipient Pu2类似[使用多个不同密钥的加密？](https://stackoverflow.com/questions/597188/encryption-with-multiple-different-keys)
4.  现在我可以将在线数据库中的加密数据复制到我的本地机器并使用我本地的 Pr1 解密数据
5.  用户可以使用他们的普通密码在线解密他们已经输入的数据，**每次**登录时都会转换为他们的 Pr2（步骤 2a），但在**整个会话期间都有效**

**使用这种方法，即使攻击者可以访问我的服务器以及所有文件和数据库**，也无法解密数据，对吧？当然，暴力攻击是可能的，但每次尝试都需要计算私钥，因此需要一些时间。但是没有私钥在线存储或需要交换。所以这应该很省钱。

**这里的问题是：**如果这种方法安全且可行，那么肯定已经有类似或更好的东西具有这些功能并使用一些很好的安全标准。它是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:12:10.260

一堆看似随机的想法：为什么这不是人们这样做的方式......

首先，用于多用户访问。通常我见过的系统希望让两个用户使用自己的凭据访问某些东西，但只保护一次，是创建一个密钥来保护内容，然后用多个凭据保护该密钥并以这种形式存储密钥很多次。也就是说，您将密钥存储在项目本身的旁边，但是密钥存储了N次，每个访问者一次。如果我授予您访问权限，我的凭据将用于解密密钥，然后将其与您的材料再次存储。

沿着相同的多用户路线，“授予访问”流程是有问题的。您在上面建议的方案要求，为了让我授予您访问权限，系统需要在同一时刻。这在现实世界中是相当有问题的。

该方案不会为用户提供“忘记密码”的体验。丢失密码 -> 丢失密钥。

该方案假设用户选择了好的密码。

该方案意味着具有相同密码的两个用户拥有相同的密钥。

您断言数据库被盗不是问题，因为他们必须计算所有密码（这意味着下游密钥），但实际上这并不太难做到，也不太昂贵。我只需要计算一次 Password123，然后就可以扫描整个数据库。

希望这可以帮助。

# javascript - IE9 与 HTML5 Canvas getImageData() 函数有问题

> ID：12378879
> 
> 赞同：1
> 
> 时间：2012-09-11T22:31:46.537
> 
> 标签：javascript, html, canvas, internet-explorer-9, getimagedata

由于某种原因，下面的代码将不起作用。它停在与`getImageData`。IE9 抛出此错误：`SCRIPT5022: DOM Exception: INDEX_SIZE_ERR (1)`. 有没有办法解决这个问题？但是，它适用于 Chrome 和 FF。

```
//Select our canvas and context
var canvas = document.getElementById("imageCanvas");
var context = canvas.getContext('2d');
//Select the image from the DOM
var selectedImage = document.getElementById("image");

//Draw the image to the canvas then read in the data
context.drawImage(selectedImage, 0, 0);
var originalLakeImageData = context.getImageData(0,0, width, height);

//Image data is now stored in an array in the form
//originalLakeImageData.data = [r1, g1, b1, a1, r2, g2, b2, a2....] 
```

*注意：上面的代码不是我的代码。来源在[这里](http://nooshu.com/using-image-data-inside-the-html5-canvas-element)。但是，我的问题与此示例相同。要查看错误 IE9，请尝试此[链接](http://nooshu.com/explore/canvas-image-data/)*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T00:38:36.507

刚刚在搜索另一个问题时遇到了您的问题。您遇到的问题与您的 CSS`oldImage`中设置为的事实有关。`display: none`这会导致`width`and`height`属性为零。

您应该尝试使用`visibility: hidden`. CSS`display:none`意味着该元素根本不应该显示，而是`visibility:hidden`意味着元素存在但不可见。这是一个细微的差别，但应该使你的例子工作。

您还可以使用绝对定位和 z-index 将其他图像“隐藏”在您想要查看的图像后面。

# ios - 启动应用程序 iOS 6 时出错

> ID：12378880
> 
> 赞同：0
> 
> 时间：2012-09-11T22:31:48.940
> 
> 标签：ios

我有一个适用于 iOS 5.0 的应用程序构建，并且在 iOS 6 上运行相同的应用程序运行良好，但在启动时崩溃了。

在调用 didFinishLaunchingWithOptions 方法之前似乎崩溃了。

它在 bad_excess 上崩溃了

```
0x00480848  <+0024>  ldr    r0, [pc, #240]  (0x48093c <_ZN6google8protobuf18InsertIfNotPresentISt3mapISsSt4pairIPKviESt4lessISsESaIS3_IKSsS6_EEESsS6_EEbPT_RKT0_RKT1_+268>)
0x0048084a  <+0026>  ldr    r1, [pc, #244]  (0x480940 <_ZN6google8protobuf18InsertIfNotPresentISt3mapISsSt4pairIPKviESt4lessISsESaIS3_IKSsS6_EEESsS6_EEbPT_RKT0_RKT1_+272>) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:27:57.187

出现以下问题

1.  检查您是否清楚地卸载了以前的 Xcode。如果否，请明确卸载应用程序。

2.  检查主窗口文件是否明确链接到文件拥有。

3.  升级新的 xcode。不是测试版。

# php - MySQL/PHP mysql_fetch_array() 一直缺少第一行

> ID：12378884
> 
> 赞同：0
> 
> 时间：2012-09-11T22:32:19.237
> 
> 标签：php, mysql, arrays, row, fetch

大家晚安！

由于某种原因，Database::fetchArray() 正在跳过查询结果集的第一个 $row。

它正确打印所有行，只是由于某种原因一直错过第一行，我认为我的 fetchArray() 函数有问题？

我在 phpMyAdmin 中运行查询并返回 4 行，当我在本地主机上使用 php 文件（下面的代码）尝试它时，它只打印了 3 行，当然使用相同的“WHERE tunes.riddim”值。google 上的大多数类似主题表明，一个常见的错误是在 while() 之前使用 mysql_fetch_array()，这会将指针提前并导致第一行丢失，不幸的是我只有一个 mysql_fetch_array() 调用（在while()-head)。

```
<?php 

    $db->query("SELECT " .
                "riddims.riddim AS riddim, " .
                "riddims.image AS image, " .
                "riddims.genre AS genre, " .
                "tunes.label AS label, " .
                "tunes.artist AS artist, " .
                "tunes.tune AS tune, " .
                "tunes.year AS year," .
                "tunes.producer AS producer " .
                "FROM tunes " . 
                "INNER JOIN riddims ON tunes.riddim = riddims.riddim " .
                "WHERE tunes.riddim = '" . mysql_real_escape_string(String::plus2ws($_GET['riddim'])) . "'" .
                "ORDER BY tunes.year ASC");

    $ar = $db->fetchArray();

    for($i = 0; $i < count($ar) - 1; $i++)
    {
        echo $ar[$i]['riddim'] . " - " . $ar[$i]['artist'] . " - " . $ar[$i]['tune'] . " - " . $ar[$i]['label'] . " - " . $ar[$i]['year'] . "<br>";
    }

?> 
```

数据库::fetchArray() 看起来像：

```
public function fetchArray()
{

    $ar = array();

    while(($row = mysql_fetch_array($this->result)) != NULL)
        $ar[] = $row;

    return $ar;
} 
```

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T22:33:46.200

您应该`-1`从 for 循环中删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:35:07.713

您还可以使用简单的[foreach](http://php.net/foreach)：

```
foreach($db->fetchArray() as $row)
{
        echo $row['riddim'] # ...
} 
```

它也会使您的代码更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T22:35:45.023

问题出在您的 while 循环中：

```
for($i = 0; $i < count($ar) - 1; $i++) 
```

if`count ($ar)`为 1，因为只有一个条目，您的循环将永远不会被调用；尝试调整检查部分：

```
for($i = 0; $i < count($ar) ; $i++) 
```

# java - 如何为 Ant 构建配置 Ivy

> ID：12378892
> 
> 赞同：18
> 
> 时间：2012-09-11T22:33:30.210
> 
> 标签：java, ant, ivy, build.xml, taskdef

我目前`ANT_HOME`位于`/home/<myuser>/ant/1.8.4/ant-1.8.4`.

我刚刚下载[了包含其依赖项的 Apache Ivy tarball](http://ant.apache.org/ivy/download.cgi)。我将其提取到`/home/<myuser>/ivy/2.3.0-rc1/ivy-2.3.0-rc1`.

然后我复制`/home/<myuser>/ivy/2.3.0-rc1/ivy-2.3.0-rc1/lib/*.jar`到`ANT_HOME/lib`. 如果我对 Ant 如何使用插件/扩展的理解是正确的，那么 Ant 现在应该能够在运行时访问所有 Ivy 的任务。

我的下一个问题是，如何在 Ant 构建文件中定义 Ivy 任务？说我要使用`ivy-retrieve`,`ivy-resolve`和`ivy-publish`任务。当我从命令行运行我的 Ant 构建（我不会通过 Ant-Eclipse 插件构建）时，我需要做哪些配置（在 XML 中）才能使这些任务正常工作。提前致谢！

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-09-12T03:06:04.780

首先，您必须定义一个`<taskdef>`指向 Ivy 的任务。

```
<property environment="env"/>
<property name="ivy.home" value="${env_IVY_HOME}"/>

<taskdef resource="org/apache/ivy/ant/antlib.xml">
    <classpath>
        <fileset dir="${ivy.home}">
            <include name="*.jar"/>
        </fileset>
    </classpath>
</taskdef> 
```

这将使您可以访问常春藤任务。你会像这样使用这些任务：

```
<cachepath pathid="main.classpath" conf="compile"/> 
```

问题是您的 Ivy 任务名称可能与其他 Ant 任务发生冲突。例如，有一个 Ivy 任务`<report>`。为了解决这个问题，您可以创建一个 Ivy 命名空间。为此，您在`<project>`实体的命名空间中放置一个引用，如下所示：

```
<project name="my.proj" default="package" basedir="."
    xmlns:ivy="antlib:org.apache.ivy.ant"/> 
```

现在，当您定义 Ivy 任务时，您可以使用对该名称空间的`antlib:org.apache.ivy.ant`引用。`ivy`与以前相同的 taskdef，但有一个`uri`字段：

```
<property environment="env"/>
<property name="ivy.home" value="${env_IVY_HOME}"/>

<taskdef resource="org/apache/ivy/ant/antlib.xml"
    uri="antlib:org.apache.ivy.ant">
    <classpath>
        <fileset dir="${ivy.home}">
            <include name="*.jar"/>
        </fileset>
    </classpath>
</taskdef> 
```

顺便说一句，这并没有什么特别之处`uri`。我可以这样做：

```
<project name="my.proj" default="package" basename="."
   xmlns:ivy="pastrami:with.mustard">

[...]
<taskdef resource="org/apache/ivy/ant/antlib.xml"
    uri="pastrami:with.mustard">
    <classpath>
        <fileset dir="${ivy.home}">
            <include name="*.jar"/>
        </fileset>
    </classpath>
</taskdef> 
```

现在的重点是您可以在任务名称前加上`ivy:`. 而不是这个：

```
<cachepath pathid="main.classpath" conf="compile"/> 
```

您现在可以这样做：

```
<ivy:cachepath pathid="main.classpath" conf="compile"/> 
```

这就是您访问 Ivy Ant 任务的方式。

现在，您可以访问您的 Ivy Ant 任务，您需要定义一个`ivysettings.xml`文件并使用该`<ivy:settings/>`任务指向那里：

```
 <ivy:settings file="${ivy.home}/ivysettings.xml"/> 
```

Ivy 中嵌入了一个默认`ivysettings.xml`文件，它将指向全球 Maven 存储库系统。如果您没有公司范围的 Maven 存储库，则可以使用默认`ivysettings.xml`文件：

```
<ivy:settings/> 
```

这很简单。

完成此操作后，您需要读取并[解析](http://ant.apache.org/ivy/history/latest-milestone/use/resolve.html)`ivy.xml`文件，该文件通常位于项目的根目录中，与文件位于同一目录中`build.xml`。

基本上，您的`ivy.xml`文件包含对您想要带入项目的第三方 jar 的引用。例如：

```
<dependencies>
    <dependency org="log4j"  name="log4j" rev="1.2.17" conf="compile->default"/>
    <dependency org="junit"  name="junit" rev="4.10" conf="test->default"/>
</dependencies> 
```

这就是说我需要`log4j.jar`(revision 1.2.17) 来编译（以及编译测试），我需要`junit.jar`(revision.4.10) 来编译我的测试代码。

这`compile->default`是我的`compile`配置到 Maven`default`配置的映射（这表示我只想要 Jar 和它可能依赖的任何其他 jars。

我的`compile`配置来自哪里？我在我的`ivy.xml`. 有十种标准配置。这也进入您的`ivy.xml`文件：

```
<configurations>
  <conf name="default" visibility="public" description="runtime dependencies and master artifact can be used with this conf" extends="runtime,master"/>
  <conf name="master" visibility="public" description="contains only the artifact published by this module itself, with no transitive dependencies"/>
  <conf name="compile" visibility="public" description="this is the default scope, used if none is specified. Compile dependencies are available in all classpaths."/>
  <conf name="provided" visibility="public" description="this is much like compile, but indicates you expect the JDK or a container to provide it. It is only available on the compilation classpath, and is not transitive."/>
  <conf name="runtime" visibility="public" description="this scope indicates that the dependency is not required for compilation, but is for execution. It is in the runtime and test classpaths, but not the compile classpath." extends="compile"/>
  <conf name="test" visibility="private" description="this scope indicates that the dependency is not required for normal use of the application, and is only available for the test compilation and execution phases." extends="runtime"/>
  <conf name="system" visibility="public" description="this scope is similar to provided except that you have to provide the JAR which contains it explicitly. The artifact is always available and is not looked up in a repository."/>
  <conf name="sources" visibility="public" description="this configuration contains the source artifact of this module, if any."/>
  <conf name="javadoc" visibility="public" description="this configuration contains the javadoc artifact of this module, if any."/>
   <conf name="optional" visibility="public" description="contains all optional dependencies"/>
 </configurations> 
```

你可以使用任何你想要的配置名称，但是这些映射到默认的 Maven 配置并且被广泛使用。

一旦你`ivy.xml`定义了你的文件，你就可以使用它`<ivy.resolve>`来解决你的依赖：

```
<ivy:resolve/> 
```

* * *

所以，我们有以下内容：

1.  如何`<taskdef>`在您`build.xml`的构建中使用 Ivy Ant 任务。
2.  如何使用 Ivy Ant 任务`<ivy:settings>`来配置 Ivy。
3.  如何使用`<ivy:resolve/>`读取您的`ivy.xml`文件并解决您的第三方 jar 依赖项。

现在，您可能想要实际使用这些 jar 文件。有三种方法可以做到这一点：

```
 <ivy:cachepath pathid="main.classpath" conf="compile"/> 
```

该`<ivy:cachepath/>`任务将创建一个指向您在文件配置中拥有的 jar 的类路径（在本例中称为*main.classpath ）。*大多数时候都使用这个。`ivy.xml``compile`

如果你需要一个文件集，你可以使用这个：

```
 <ivy:cachefileset setid="compile.fileset" conf="compile"/> 
```

在这种情况下，它将创建一个 refid 为`compile.fileset`.

有时您必须将罐子带入您的项目中。例如，如果你创建了一个 war 或 ear 文件，你想把你的 jar 包起来。在这种情况下，你可以使用这个：

```
<property name="lib.dir" value="${target.dir}/lib"/>
<ivy:retrieve pattern="${lib.dir}/[artifact].[ext]"
     conf="runtime"/> 
```

这会将您的 jars 提取到`${lib.dir}`目录中，因此您可以将它们包含在 war 或 ear 中。

抱歉，答案很长，但是要涵盖很多步骤。我强烈推荐 Manning 的书[Ant in Action](http://www.manning.com/loughran/)，其中有一整章是关于 Ivy 的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-12T21:30:09.050

大卫给出了一个很好的答案，但我想指出 taskdef 不是必需的。如果 ivy.jar 位于预期位置，则 ANT 文件顶部的命名空间声明就足够了：

```
<project ..... xmlns:ivy="antlib:org.apache.ivy.ant"> 
```

有关更多详细信息，我建议阅读有关[ANT 库](http://ant.apache.org/manual/Types/antlib.html)如何工作的信息。

以下答案提供了更多“设置常春藤”的建议：

*   [Ivy 无法解决依赖关系，无法找到原因](https://stackoverflow.com/questions/9853851/ivy-fails-to-resolve-a-dependancy-unable-to-find-cause/9855381#9855381)

# java - 如何在形成列表视图行的多个文本视图中动态设置文本大小？

> ID：12378896
> 
> 赞同：2
> 
> 时间：2012-09-11T22:33:42.957
> 
> 标签：java, android, android-listview, textview, font-size

我已经看了几天了，但无济于事（还！）

正如问题所说 - 我正在尝试动态更改列表视图中显示的文本的大小。我的 xml 设置为将列表视图中的每一行描述为具有图像视图（图标）和文本视图（标签）。

我想在两种情况下一次性调整列表视图中所有“标签”文本视图中的文本大小：1）响应当前活动中的按钮单击 2）响应从共享中读取的值优先

我相信我可以使用 setTextAppearance 方法。这是我的代码 - 它运行没有错误，但它也没有达到预期的效果！

如果您对此有任何想法，我将不胜感激。最好的祝愿史蒂文

```
import android.content.Context;
import android.content.SharedPreferences;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class IndexCustomAdapter extends ArrayAdapter<String>
{
LayoutInflater inflater;
String[] indexContents;
String[] scores;

private SharedPreferences spSettings;

public IndexCustomAdapter(Context context, int indexRowId, String[] objs) 
{
    super(context, indexRowId, objs);
    inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    indexContents = objs;
    spSettings = getContext().getSharedPreferences("settings", 0);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    if (convertView == null)
    {
        convertView = inflater.inflate(R.layout.indexrow, parent, false);
    }

    TextView label = (TextView) convertView.findViewById(R.id.label);
    ImageView icon = (ImageView) convertView.findViewById(R.id.icon);

    // Select the correct text size
    int fontSize = spSettings.getInt("fontSize", 16);
    switch (fontSize)
    {
        case 24:
            label.setTextAppearance(getContext(), android.R.attr.textAppearanceLarge);
            break;
        case 20:
            label.setTextAppearance(getContext(), android.R.attr.textAppearanceMedium);
        case 16:
            label.setTextAppearance(getContext(), android.R.attr.textAppearanceSmall);
    }       

    label.setText(indexContents[position]);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T00:30:59.233

在按钮的 onClickListener 中，将新字体大小保存到您的共享首选项中，然后使用 notifyDataSetChanged 方法。我在想这样的事情。

```
button.SetOnclickListener(new OnclickListener(){
    public void onClick(View v){
        //Update shared preferences with desired
        //font size here

        //Instance of your IndexCustomAdapter that you attatched to your listview
        indexCustomAdapter.notifyDataSetChanged();

    }
}) 
```

# php - 将 js 添加到 wordpress 以实现 css activemenu 高亮

> ID：12378902
> 
> 赞同：0
> 
> 时间：2012-09-11T22:34:25.097
> 
> 标签：php, javascript, css, wordpress

我想在 wordpress 中为我的活动菜单添加一个简单的突出显示。为了做到这一点，我已经找到了一些可能有用的代码（如果它们有效）。当谈到 js 时，我是一个完整的新手，但我知道将这段代码放入我的函数中.php

```
// Enqueue JavaScripts
function theme_scripts() {
    wp_enqueue_script('cartrawler', get_template_directory_uri() . 'https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js', array(), '20120802', '1');
    wp_enqueue_script('cartrawler', get_template_directory_uri() . '/js/jquery.colorbox-min.js', array(), '20120802', '1');
    wp_enqueue_script('cartrawler', get_template_directory_uri() . '/js/activemenu.js', array(), '30120802', '1');
}
add_action('wp_enqueue_scripts', 'theme_scripts'); 
```

我参考了这个链接来帮助我完成使这成为可能的小脚本：http: [//jsfiddle.net/K6F8m/](http://jsfiddle.net/K6F8m/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:44:29.417

如果您使用函数 wp_nav_menu() 创建菜单，Wordpress 会自动添加允许您创建所需的“活动菜单突出显示”效果的类。

其中一些类是`.current-menu-item`, `.current-menu-parent`, `.current-{object}-parent`,`.current-{type}-parent`等。

这是[官方文档](http://codex.wordpress.org/Function_Reference/wp_nav_menu)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:41:49.460

你的第一`wp_enqueue_script`行很糟糕。您使用的是完全限定的 URL ( `https://ajax.googleapis.com...`)，但在其前面加上主题的 URL。尝试将第一`wp_enqueue_script`行替换为：

```
wp_enqueue_script('cartrawler', 'https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js', array(), '20120802', '1'); 
```

如果这不能彻底解决您的问题，请详细说明您遇到的实际问题是什么。脚本没有显示在 HTML 中吗？它们在 HTML 中但不工作吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T15:17:04.097

好吧，通过多看 DOM，我注意到 wordpress 已经为未知菜单项创建了一个类：

```
div#menu li.current_page_item a{
color:#000;
}
div#menu li.current_page_item a:hover{
color:#662D91;
} 
```

我现在的问题是，当我进入父页面时，该父级的所有子级也会以黑色突出显示。:(我不记得如何解决这个问题了！！

# python - Python：创建 csv 文件时在哪里添加新的换行符？

> ID：12378903
> 
> 赞同：0
> 
> 时间：2012-09-11T22:34:31.700
> 
> 标签：python, csv, newline

我对一般的编程很陌生，对 Python 也很陌生。我有一个 csv 列表，它被读入 python，打乱，然后以不同的顺序写出。

在当前状态下，它会打印出一长串被打乱的项目。我需要将它们分别打印到一个新行上。为此，我知道我需要在某处添加 \n，但我不知道在哪里。我应该将它添加到首先创建列表的代码部分，还是写入 csv 文件的位置？我猜是后者，所以这里是相关代码，但如果需要我可以粘贴更多：

```
make_list = csv.writer(open('026a_te.csv', 'wb'))
make_list.writerow(list_a) 
```

我在哪里添加 \n 以便将 list_a 的每个元素写入输出文件 026a_te.csv 中的新行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T22:40:37.883

您只在输出 csv 中写入一行，所以很自然地它会全部在一行上。

`writerows`您应该有一个要使用而不是编写的列表列表`writerow`，或者您应该处于一个`writerow`多次调用的循环中。将自动为您添加换行符。

# postscript - 后记：连接两个字符串？

> ID：12378904
> 
> 赞同：5
> 
> 时间：2012-09-11T22:34:34.133
> 
> 标签：postscript

如何在 Postscript 中连接两个字符串？

```
(foo) (bar) ??? -> (foobar) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T00:02:57.703

PostScript 没有内置的字符串连接运算符。您需要为此编写一些代码。例如

```
 /concatstrings % (a) (b) -> (ab)  
   { exch dup length    
     2 index length add string    
     dup dup 4 2 roll copy length
     4 -1 roll putinterval
   } bind def 
```

（代码来自[https://en.wikibooks.org/wiki/PostScript_FAQ/Programming_PostScript#How_to_concatenate_strings%3F。](https://en.wikibooks.org/wiki/PostScript_FAQ/Programming_PostScript#How_to_concatenate_strings%3F.)）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-18T08:05:01.467

相同的想法推广到任意数量的字符串。较早的版本使用一个辅助函数`acat`，它接受一个字符串数组（便于计数和迭代）。这个版本使用更高级的循环和堆栈操作来避免分配数组。此版本还将通过将`string`运算符更改为`array`.

```
% (s1) (s2) (s3) ... (sN) n  ncat  (s1s2s3...sN)
/ncat {        % s1 s2 s3 .. sN n                   % first sum the lengths
    dup 1 add  % s1 s2 s3 .. sN n n+1 
    copy       % s1 s2 s3 .. sN n  s1 s2 s3 .. sN n
    0 exch     % s1 s2 s3 .. sN n  s1 s2 s3 .. sN 0 n 
    {   
        exch length add 
    } repeat             % s1 s2 s3 .. sN  n   len  % then allocate string
    string exch          % s1 s2 s3 .. sN str   n   
    0 exch               % s1 s2 s3 .. sN str  off  n
    -1 1 {               % s1 s2 s3 .. sN str  off  n  % copy each string
        2 add -1 roll       % s2 s3 .. sN str  off s1  % bottom to top
        3 copy putinterval  % s2 s3 .. sN str' off s1
        length add          % s2 s3 .. sN str' off+len(s1)
                            % s2 s3 .. sN str' off'
    } for                               % str' off'
    pop  % str'
} def 

(abc) (def) (ghi) (jkl) 4 ncat == %(abcdefghijkl) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T09:22:15.047

有一些有用的子程序

> [http://www.jdawiseman.com/papers/placemat/placemat.ps](http://www.jdawiseman.com/papers/placemat/placemat.ps)

包括`Concatenate`（接受两个字符串）和`ConcatenateToMark`（标记 string0 string1 ...）。

# html - 为什么 div 标签中的 padding-bottom 不起作用？

> ID：12378905
> 
> 赞同：1
> 
> 时间：2012-09-11T22:34:44.477
> 
> 标签：html, css

我有一个`<div>`，我想把文本从 `. 但是，它对我不起作用。以下是代码。

```
<div id="title" style="height:35px;border-bottom:thin solid rgb(65,31,30);margin-left:14px;padding-bottom:10px;font-size:18px;font-weight:thicker">Hello, world!
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T22:41:43.860

删除你的`height:35px`风格。这与您正在尝试做的事情相矛盾。它有一个 35px 的高度加上一个额外的 10px 底部填充。

看看这个[jsFiddle](http://jsfiddle.net/Lat8v/)。我希望这对你有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-31T09:18:41.663

我过去有过这种事情的经验。在某些浏览器中就是这种情况，尤其是在您`overflow-y: scroll;`启用了样式的情况下。你的语法看起来不错，我已经试过了。即使末尾有或没有分号，它仍然可以正常工作，因为您在 div 内将其样式设置为属性本身。

如果这不是您的整个代码，我看到它的方式请注意`overflow: scroll;`它的代码会覆盖您的样式。

或尝试使用其他浏览器运行它。

或者您可以重组代码以确保填充像这样工作：

`<div id="title" style="height:35px;margin-left:14px;font-size:18px;font-weight:thicker">Hello, world!<div style="border-bottom:thin solid rgb(65,31,30);padding:10px">&nbsp;</div> </div>`：

只需在该 div 中添加另一个 div

# javascript - 如何计算对象的实例？

> ID：12378909
> 
> 赞同：13
> 
> 时间：2012-09-11T22:35:04.940
> 
> 标签：javascript

如果我有一个 Javascript 对象定义为：

```
function MyObj(){};

MyObj.prototype.showAlert = function(){
   alert("This is an alert");
   return;
}; 
```

现在用户可以将其称为：

```
var a = new MyObj();
a.showAlert(); 
```

到目前为止一切顺利，并且还可以在同一代码中运行另一个实例：

```
var b = new MyObj();
b.showAlert(); 
```

现在我想知道，如何保存 MyObj 的实例数？有一些内置功能吗？

我想到的一种方法是在 MyObj 初始化时增加一个全局变量，这将是跟踪这个计数器的唯一方法，但是有什么比这个想法更好的吗？

**编辑：**

看看这里的建议：

![在此处输入图像描述](../Images/b84e6683a835eb5186ee81c7f2d0bc16.png)

我的意思是我怎样才能让它回到 2 而不是 3

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-11T22:39:44.690

没有内置任何东西；然而，你可以让你的构造函数记录它被调用的次数。不幸的是，JavaScript 语言无法判断对象何时超出范围或已被垃圾回收，因此您的计数器只会上升，而不会下降。

例如：

```
function MyObj() {
  MyObj.numInstances = (MyObj.numInstances || 0) + 1;
}
new MyObj();
new MyObj();
MyObj.numInstances; // => 2 
```

当然，如果你想防止篡改计数，那么你应该通过闭包隐藏计数器并提供一个访问器函数来读取它。

**[编辑]**

根据您更新的问题 - 无法跟踪实例何时不再使用或“删除”（例如通过将 null 分配给变量），因为 JavaScript 没有为对象提供[终结器方法](http://en.wikipedia.org/wiki/Finalizer)。

您能做的最好的事情是创建一个“dispose”方法，当对象不再处于活动状态时（例如，通过[引用计数](http://en.wikipedia.org/wiki/Reference_counting)方案）将调用该方法，但这需要程序员的合作 - 该语言不提供帮助：

```
function MyObj() {
  MyObj.numInstances = (MyObj.numInstances || 0) + 1;
}
MyObj.prototype.dispose = function() {
  return MyObj.numInstances -= 1;
};
MyObj.numInstances; // => 0
var a = new MyObj();
MyObj.numInstances; // => 1
var b = new MyObj();
MyObj.numInstances; // => 2
a.dispose(); // 1 OK: lower the count.
a = null;
MyObj.numInstances; // => 1
b = null; // ERR: didn't call "dispose"!
MyObj.numInstances; // => 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T22:45:34.243

`MyObj`在名为 say的构造函数上创建一个静态属性，`count`并在构造函数本身内递增它。

```
function MyObj() {
    MyObj.count++;
}

MyObj.count = 0;

var a = new MyObj;
var b = new MyObj;

alert(MyObj.count); 
```

这就是你通常在 Java 中使用的方式（使用静态属性）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-17T16:03:36.430

```
var User = (function() {
   var id = 0;
   return function User(name) {
      this.name = name;
      this.id = ++id;
   }
})();

User.prototype.getName = function() { 
    return this.name; 
}

var a = new User('Ignacio');
var b = new User('foo bar');

a
User {name: "Ignacio", id: 1}
b
User {name: "foo bar", id: 2} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-04-03T14:45:34.757

使用[**ES6 Classes** ^([*MDN*])](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes)语法——我们可以定义一个`static`方法：

> **关键字定义类**的`static`静态方法。静态方法在没有实例化它们的类的情况下被调用，并且不能通过类实例来调用。静态方法通常用于为应用程序创建实用功能。

 **```
class Item {

  static currentId = 0;    
  _id = ++Item.currentId;  // Set Instance's this._id to incremented class's ID
                           // PS: The above line is same as:
                           // constructor () { this._id = ++Item.currentId; }
  get id() {               
    return this._id;       // Getter for the instance's this._id
  }
}

const A = new Item(); // Create instance (Item.currentId is now 1)
const B = new Item(); // Create instance (Item.currentId is now 2)
const C = new Item(); // Create instance (Item.currentId is now 3)

console.log(A.id, B.id, C.id);                     // 1 2 3
console.log(`Currently at: ${ Item.currentId }`);  // Currently at: 3
```

PS：如果您不想*记录*- 公开内部`currentId`属性，请将其设为**私有**：

```
static #currentId = 0; 
_id = ++Item.#currentId; 
```

* * *

这是一个有`constructor`和没有 getter 的例子：

```
class Item {

  static id = 0;

  constructor () {
    this.id = ++Item.id;
  }

  getID() {               
    console.log(this.id);
  }
}

const A = new Item(); // Create instance (Item.id is now 1)
const B = new Item(); // Create instance (Item.id is now 2)
const C = new Item(); // Create instance (Item.id is now 3)

A.getID();   B.getID();   C.getID();       // 1; 2; 3
console.log(`Currently at: ${ Item.id }`); // Currently at: 3
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-24T12:56:07.863

这种方法怎么样？

```
var Greeter = (function ()
{
    var numInstances;

    function Greeter(message)
    {
        numInstances = (numInstances || 0) + 1;
        this.greeting = message; 
    }

    Greeter.prototype.greet = function ()
    {
        return "Hello, " + this.greeting;
    };

    Greeter.prototype.getCounter = function ()
    {
        return numInstances;
    };

    return Greeter;

})();

var greeter = new Greeter("world");
greeter.greet();
greeter.getCounter();

var newgreeter = new Greeter("new world");
newgreeter.greet();
newgreeter.getCounter();

greeter.getCounter(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-27T10:57:25.417

保持全局计数变量并每次递增是一种选择。另一种选择是在手动创建每个实例后调用`counter`方法（我能想象到的最糟糕的事情）。但是还有另一个更好的解决方案。
每次我们创建一个实例时，都会调用构造函数。问题是正在为每个实例创建构造函数，但我们可以`count`在其中有一个属性`__proto__`，每个实例可以是相同的。

```
function MyObj(){
    MyObj.prototype.addCount();
};

MyObj.prototype.count = 0;

MyObj.prototype.addCount = function() {
    this.count++;
};

var a = new MyObj();
var b = new MyObj(); 
```

这毕竟是我们的`a`和变量：`b`

[![在此处输入图像描述](../Images/4de6e0214c4911fe01b935d7e86bffd8.png)](https://i.stack.imgur.com/rz3fy.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-11T23:40:43.640

最终，JS 将拥有内置的代理能力，它将对后台发生的各种事情进行低级访问，永远不会暴露给前端开发人员（通过代理除外——think magic -PHP 等语言中的方法）。

那时，只要跨平台 100% 保证支持销毁/垃圾收集作为触发器，在您的对象上编写一个减少计数器的析构函数方法可能完全是微不足道的。

目前，可靠地做到这一点的唯一方法可能是创建所有已创建实例的封闭注册表，然后*手动*销毁它们（否则，它们将永远不会被垃圾收集）。

```
var Obj = (function () {
    var stack = [],

        removeFromStack = function (obj) {
            stack.forEach(function (o, i, arr) {
                if (obj === o) { arr.splice(i, 1); }
                makeObj.count -= 1;
            });
        };

    function makeObj (name) {
        this.sayName = function () { console.log("My name is " + this.name); }
        this.name = name;
        this.explode = function () { removeFromStack(this); };
        stack.push(this);
        makeObj.count += 1;
    }

    makeObj.checkInstances = function () { return stack.length; };
    makeObj.count = 0;
    return makeObj;

}());

// usage:

var a = new Obj("Dave"),
    b = new Obj("Bob"),
    c = new Obj("Doug");

Obj.count; // 3

// "Dave? Dave's not here, man..."
a.explode();

Obj.count; // 2
a = null;  // not 100% necessary, if you're never going to call 'a', ever again
           // but you MUST call explode if you ever want it to leave the page's memory
           // the horrors of memory-management, all over again 
```

这个模式会做你想做的事吗？只要：

1.  你不会`a`变成别的东西
2.  你不会覆盖它的`explode`方法
3.  你不会`Obj`以任何方式搞砸
4.  您不希望任何`prototype`方法可以访问任何内部变量

...那么是的，这种方法可以很好地让计数器正常工作。您甚至可以编写一个名为 的通用方法`recycle`，它调用`explode`您传递给它的任何对象的方法（只要它的构造函数或工厂支持这样的事情）。

```
function recycle (obj) {
    var key;
    obj.explode();
    for (key in obj) { if (obj.hasOwnProperty(key)) { delete obj[key]; } }
    if (obj.__proto__) { obj.__proto__ = null; }
} 
```

注意 - 这实际上不会摆脱对象。您只需将其从闭包中删除，并删除它曾经拥有的所有方法/属性。

所以现在它是一个空壳，你可以重复使用它，`null`在回收它的部分后明确设置它，或者让它被收集并忘记它，因为你知道你删除了必要的引用。

这有用吗？可能不是。

我真正认为这是有用的唯一一次是在游戏中，您的角色一次只能发射 3 发子弹，并且在屏幕上的第 1 发子弹击中某人或熄灭之前，他不能射击第 4 发子弹边缘（这就是，比如说，Contra 在当时是如何工作的）。

您也可以将“消失”的子弹从堆栈中移出，并通过重置其轨迹、重置适当的标志并将其推回堆栈来为任何玩家/敌人重复使用该子弹。

但是再一次，直到代理允许我们定义“神奇”的构造函数/析构函数方法，这些方法在低级别得到尊重，这只有在你要微观管理你自己的所有对象的创建和销毁时才有用（真的不是一个好主意）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-08T12:08:29.573

```
 class Patient{

        constructor(name,age,id){        
            Object.assign(this,{name, age, id});    

        }
        static patientList = []; // declare a static variable
        static addPatient(obj){       
            this.patientList.push(...obj); // push to array
            return this.patientList.length; // find the array length to get the number of objects
        }

    }

    let p1 = new Patient('shreyas',20, 1);
    let p2 = new Patient('jack',25, 2);
    let p3 = new Patient('smith',22, 3);
    let patientCount = Patient.addPatient([p1,p2,p3]); // call static method to update the count value with the newly created object
   console.log(Patient.patientList);
    console.log(patientCount); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-12T06:55:38.730

我的解决方案是创建一个对象存储实例计数和一个在原型中增加它们的函数。

```
function Person() {
  this.countInst();
}

Person.prototype = {
  constructor: Person,
  static: {
    count: 0
  },
  countInst: function() {
    this.static.count += 1;
  }
};

var i;

for (i = 0; i < 10; i++) {
  var p = new Person();
  document.write('Instance count: ');
  document.write(p.static.count);
  document.write('<br />');
} 
```

这是我的 plunker：[https ://plnkr.co/edit/hPtIR2MQnV08L9o1oyY9?p=preview](https://plnkr.co/edit/hPtIR2MQnV08L9o1oyY9?p=preview)**

# jquery - 正确打破 jquery $.each() - 这是浏览器问题吗？

> ID：12378916
> 
> 赞同：5
> 
> 时间：2012-09-11T22:36:05.217
> 
> 标签：jquery, each

为什么以下内容在 Firefox 中可以正常工作，但在 Chrome 中却不行？如果我将 .each 循环中的返回值更改为“true”，则它适用于 Chrome 而不是 Firefox。是什么赋予了？

（当它不起作用时，它只会在几秒钟内返回正确的日期、小时等）

```
function time_remaining(expire_time)
    {
        var now = new Date().getTime()/1000,
        time_left = expire_time - now,
        time_left_str = '0 seconds';

        if (time_left < 1) {
            return time_left_str;
        }

        var a = {};
            a[ 12 * 30 * 24 * 60 * 60 ] = 'year',
            a[      30 * 24 * 60 * 60 ] = 'month',
            a[           24 * 60 * 60 ] = 'day',
            a[                60 * 60 ] = 'hour',
            a[                     60 ] = 'minute',
            a[                      1 ] = 'second';

        $.each(a, function (secs, str) {
            var d = time_left / secs;
            if (d >= 1) {
                var r = Math.round(d);
                time_left_str = r + ' ' + str + ((r > 1) ? 's' : '');
                return false;
            }
        });

        return time_left_str;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T00:40:58.593

这不是`$.each`问题，`var a = {};`是一个对象并且`$.each(a, function (secs, str) {})`以某种方式失败，因为 jQuery 每个函数只接受一个数组。

需要转换`object`为`array`然后使用`$.each`功能。

在函数体中添加了新代码以`object`进行`array`

```
// converting object to array
var temp = [];
var finalArr = [];
for (val in a) {
    temp.push(val);
}

temp = temp.sort(function (a, b) {
    return a - b
});
for (var i = 0; i < temp.length; i++) {
    finalArr.push(a[temp[i]] + "|" + temp[i]);
} 
```

并且还修改了如何访问新创建的数组的数据和索引值

```
 function time_remaining(expire_time) {
    var now = new Date().getTime() / 1000,
        time_left = expire_time - now,
        time_left_str = '0 seconds';

    if (time_left < 1) {
        return time_left_str;
    }

    var a = {};
    a[12 * 30 * 24 * 60 * 60] = 'year',
    a[30 * 24 * 60 * 60] = 'month',
    a[24 * 60 * 60] = 'day',
    a[60 * 60] = 'hour',
    a[60] = 'minute',
    a[1] = 'second';

    // converting object to array
    var temp = [];
    var finalArr = [];
    for (val in a) {
        temp.push(val);
    }

    temp = temp.sort(function (a, b) {
        return a - b
    });
    for (var i = 0; i < temp.length; i++) {
        finalArr.push(a[temp[i]] + "|" + temp[i]);
    }

    $.each(finalArr, function (secs, str) {
        var time = time_left / parseInt(str.split("|")[1], 10);

        if (time >= 1) {

            var randomNum = Math.round(time);
            time_left_str = randomNum + ' ' + str.split("|")[0] + ((randomNum > 1) ? 's' : '');
            return true;
        }
    });

    return time_left_str;

} 
```

# asp.net-mvc - ASP.NET MVC：围绕控制器分组类

> ID：12378917
> 
> 赞同：6
> 
> 时间：2012-09-11T22:36:11.567
> 
> 标签：asp.net-mvc, asp.net-mvc-4

在 asp.net mvc (4) 中，开箱即用，视图进入`Views`文件夹，然后由子文件夹中的控制器分组。

控制器进入`Controllers`文件夹，（查看/编辑/输入）模型进入`Models`文件夹等。

我确实喜欢视图的组织方式。然而，我不喜欢水平地破坏 MVC 的其余部分。

我的问题是，保留视图组织结构的缺点是什么，但按控制器（即按用例）对其他类进行分组。例如：

```
/Home
  HomeController.cs
  IndexViewModel.cs
  IndexViewModelBinder.cs
/Messages
  MessagesController.cs
  MessagesApiController.cs
  MessagesViewModelBinder.cs
  MessageViewModel.cs
  MessagesListViewModel.cs
/Views
  /Home
     Index.cshtml
  /Messages
     MessagesIndex.cshtml
     MessageDetails.cshtml 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T23:19:41.203

重要的是视图文件的排列，因为它们是在运行时访问的。其他所有内容都编译到程序集中，因此其源文件的物理位置无关紧要。

和你一样，我发现对于大型项目的默认安排有点尴尬，所以这就是我布置当前项目的方式：

```
~/
    /Areas
        /DefaultArea // I always use areas, even when there's only one, because it simplifies things when adding additional areas.
            /Controllers
                FooController.cs
            /Views
                /Foo
                    FooView.aspx // Yes, I use WebFormView. Just a matter of personal preference
                    FooEdit.aspx
                    FooModels.cs // this file contains my ViewModels 
```

所以基本上，我将 ViewModel 类与视图放在同一个文件夹中，而不是将所有 ViewModel 放在一起（这在逻辑上不太合理）。我很想把我的控制器放在他们视图的文件夹中，但我决定不这样做。

到目前为止，我没有发现我的方法有任何缺点（现在已经使用了将近 2 年了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T02:10:20.373

我通常喜欢尽可能避开某些区域，因为它会产生一些路由问题。

我认为您的结构完全没问题（并且优于基于“类型”而不是“功能”分离代码的默认 MVC/Web 结构）。

我的建议是，您只将“web”.cs 文件保存在 web DLL 中（例如控制器、ViewModel、Binders 等），并且在域/服务/等层的单独 DLL 中具有相同的结构，因此它们如果/根据需要，可以单独重复使用/测试。

# oracle-sqldeveloper - SQL Developer - 最后看不到某些行？

> ID：12378918
> 
> 赞同：4
> 
> 时间：2012-09-11T22:36:34.920
> 
> 标签：oracle-sqldeveloper

我知道我的表中有大约 180 行。但是，SQL 开发人员让我向下滚动，只看到 100。滚动选项卡/字段显示超过 100。但是，当我向下拉滚动条时，我看不到剩余的行。之后，当我释放鼠标按钮时，滚动条返回到滚动字段的中间。

这以前从未发生过。这可能是一个错误吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T22:52:49.287

单击返回的行的任何字段，然后按 CTRL+END 以检索行的重置……这就是我一直这样做的方式。

编辑：也可能是您的首选项工具 - >首选项展开数据库点击高级更新SQL数组获取值（MAX = 500）

# css - 3 个浮动图像的间距不相等

> ID：12378922
> 
> 赞同：1
> 
> 时间：2012-09-11T22:37:15.673
> 
> 标签：css, css-float, image

我很难让 3 个大小相同的图像正确浮动。我已将中心浮动图像的左右边距设置为自动，但它仍然不起作用。我的布局中的所有面板都向左浮动，这是我从教程中修改的，并且工作正常，因为它们相互对接，但是当空间超过必要时尝试浮动图像，不会按我想要的方式显示：等于图像左&中和中&右之间的间距。我的内容面板是 534px 宽，10px 填充占用 554px 加上 1px 边框加上 5px 外边距。图片都是 160px 宽，我给 FloatLeft 类设置了 10px 的右边距，FloatRight 类设置了 10px 的左边距，FloatCenter 设置了左右两边的自动边距。FloatLeft 和 FloatRight 都在多个页面上使用，

好的，更新 - 我现在意识到浮动：中心是不可能的，DUH！，这是问题 - 我只是几个月的 CSS 等！

有没有其他选择（除了桌子）。我可以将它们全部向左对齐并设置边距：右属性 27px（160px x 3 图像 + 27 + 27 = 534px）但是我需要专门为这些图像创建一个新的 FloatLeft 类。任何关于对齐图像的最佳方法的建议将不胜感激。

加里。

相关的 HTML 和 CSS：

```
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Solar Power Today</title>
<link rel="stylesheet" type="text/css" href="solarpower.css">
</head>
<body>
  <div id="wrapper">
  ...........
  <!-- header panel, then horizontal navigation panel then left panel then ... -->
  ..........
  <div id="content">
  <!-- main content -->
  <h1 id="contentheader">Introduction to Solar Power</h1>
  <p>
  <img class="FloatLeft" src="images/sunonsolarpanelroof160px.jpg" alt="Sun shining
  on roof solar panels" width="160" height="160">
  <img class="FloatCenter" src="images/smallwindturbine160px.jpg" alt="Small wind
  turbine spinning" width="160" height="160">
  <img class="FloatRight" src="images/waveturbine160px.jpg" alt="Wave turbines in
  motion" width="160" height="160">
  </p>

CSS:

* {padding:0; margin:0; border:0;}

.FloatLeft {
  float: left;
  margin: 0 10px 10px 0;
}
.FloatRight {
  float: right;
  margin: 0 0 10px 10px;
}
.FloatCenter {
  float: center;
  margin: 0 auto 10px auto;
}

#content {
  width: 534px;
  min-height: 400px;
  margin: 0px 5px 5px 0px;
  padding: 10px;
  float: left;
  border: 1px solid black;
  display: inline;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:09:38.210

我正在努力，尽可能让事情变得简单。我更愿意知道我正在应用的代码是如何工作的，而不是在没有完全理解的情况下使用解决方案。我不知道 text-align 可以帮助对齐图像，所以我玩了一下。在我完全理解上面的 text-align: justify 解决方案之前，这让我有点不知所措，我已经将 3 个图像中的每一个都放在了一个新的 div 容器类 .ImageBox 中：

```
.ImageBox {
  width: 178px;
  margin-bottom: 10px;
  float: left;
} 
```

然后我把每张图片放在一个

元素并在

对齐图像位置的元素：

```
<div class="ImageBox">
<p style="text-align: left"><img src="images/sunonsolarpanelroof160px.jpg" alt="Sun
  shining on roof solar panels" width="160" height="160"></p>
</div>
<div class="ImageBox">
<p style="text-align: center"><img src="images/smallwindturbine160px.jpg" alt="Small
  wind turbine spinning" width="160" height="160"></p>
</div>
<div class="ImageBox">
<p style="text-align: right"><img src="images/waveturbine160px.jpg" alt="Wave turbines
  in motion" width="160" height="160"></p>
</div> 
```

我知道内联样式不受欢迎，但与为每个图像创建单独的 div 容器并将每个 div 容器中的 text-align 属性设置为样式表中的左侧、中心或右侧相比，它使用的代码更少。我也刚刚意识到，简单地指定宽度和或高度属性甚至是边框（用于测试目的）都不会在浏览器中显示 div 容器。div 容器类似乎需要一个 float 或 clear 属性才能使盒子栩栩如生。我需要学习更多的CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T23:34:26.903

您`float:center;`在`.FloatCenter`课堂上使用，这是无效的，没有`center`价值`float`，放置`float:none;`并更改您的边距长度；

```
.FloatCenter {
  float: none;
  margin: 0 auto 10px 15px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T22:52:30.863

这是您实现所需目标的一种方法：

[http://jsfiddle.net/CsjYN/1/](http://jsfiddle.net/CsjYN/1/)

的HTML：

```
<div id="content">

  <h1 id="contentheader">Introduction to Solar Power</h1>

  <div class="images">
   <img class="img-left" src="images/sunonsolarpanelroof160px.jpg" alt="Sun shining on roof solar panels" />

   <img class="img-center" src="images/smallwindturbine160px.jpg" alt="Small wind turbine spinning" />

   <img class="img-right" src="images/waveturbine160px.jpg" alt="Wave turbines in motion" />
  </div>

</div> 
```

CSS：

```
#content {
 width: 534px; /* full width 556px */
 padding: 10px;
 border: 1px solid #000;
}

#content h1 {
 margin-bottom:20px;
}
#content .images {
 overflow:auto;
}
#content .images img {
 width:160px;
 height:60px;
 float:left;
}
#content .images img.img-left,
#content .images img.img-center {
 margin-right:27px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T23:01:09.680

我最近使用`text-align: justify;`. 完整的讨论可以在[“text-align: justify;”中找到。内联块元素正确吗？](https://stackoverflow.com/questions/11589590/text-align-justify-inline-block-elements-properly)，对优缺点和替代解决方案进行了很好的讨论。

这是一个[小提琴](http://jsfiddle.net/89bnF/91/)，展示了如何使用所讨论的技术排列三个图像。它应该可以在所有主要浏览器中运行，尽管您可以随意踢轮胎并在遇到问题时与我联系。

# c - 用 C 语言编程。数据验证和将字符转换为整数

> ID：12378924
> 
> 赞同：0
> 
> 时间：2012-09-11T22:37:17.777
> 
> 标签：c

我正在制作一个包含简单开关条件的程序。

我遇到的问题是我也在验证用户输入，这样用户就不能通过输入字符来破坏程序。

当我删除时开关工作正常，`isdigit()`所以我知道这是数据验证发生的事情。

我被告知要做的是`%c`在我的中使用，`scanf()`但如果我这样做，那么其他东西会阻止程序工作。我怀疑这是因为不再引用开关，因为案例是 1,2,3 ...

我想这样做的方法是在字符到达开关之前将其转回整数，但我不确定我该怎么做。

当我复制和粘贴程序的一部分时发生了一些事情，所以我将粘贴整个程序。

```
#include <stdio.h>
#include <ctype.h>

int main(void)
{
   int BusRoute, LTrigger;
   char StartLoc,DestLoc;

   LTrigger = 1;
   BusRoute = 0;
   StartLoc = 0;
   DestLoc = 0;

   while (LTrigger >= 1)
   {
//Give user a menu and prompt to select input for BusRoute
   printf("\n\n\tPlease only use the numbers provided.");
   printf("\n\n  1.\n\tRoute_1\tCherokee Park and KFC YUM Center transit.");
   printf("\n\n  2.\n\tRoute_2\tUL and Cherokee Park transit.");
   printf("\n\n  3.\n\tRoute_3\tUL and KFC YUM Center transit.");
   printf("\n\n\n\t Please select one route from the above menu.");
   printf(" \n\n\tOnly use the single digit corresponding to the route: ");
   scanf("%d" , &BusRoute);

//Refresh window      
   system("cls");    

   if(isdigit(BusRoute))
   {
//Use switch to determin user's Route. Then present choice of To/From          
  switch (BusRoute)
             {         
        case 1:
        printf("\n\n\tYou have chosen Cherokee Park and KFC YUM Center transit.");
        printf("\n\n\tIf you want to travel from Cherokee Park to KFC YUM Center enter C.");
        printf("\n\n\tIf you want to travel from KFC YUM Center to Cherokee Park enter K.");
        printf("\n\n\tEnter your seletion now: ");
        scanf("%c" , &StartLoc);                                                           
        break;

//give two if statements to determine users location and confirm destination
        if (StartLoc == 'c' || StartLoc == 'C')
        {
        printf("\n\n\tYou have chosen to travel from Cherokee Park to KFC YUM Center.");
        printf("\n\n\tTo confirm you want to travel from Cherokee Park to KFC YUM Center please enter K: ");
        scanf("%c" , DestLoc);
//refresh           
        system("cls");  

 //confirmation of destination
         if (DestLoc == 'k' || DestLoc == 'K')
          {
               printf("\n\n\tYour bus route will pick you up from Cherokee Park and take you to KFC YUM Center.");
               getch();
           }//end dest                                                    
          }//end start

          //false user input           
             else
             {
               printf("\n\n\tYou did not enter a correct character.\n\n\tPress enter and only enter specific values.");
               getch();

                   //reset loop and refresh
               LTrigger = 1;
               system("cls");
               }//end else

          case 2:
          printf("\n\n\tYou have chosen Cherokee Park and UL transit.");
          break;

          case 3:
          printf("\n\n\tYou have chosen UL and KFC YUM Center transit.");
          break;

             }//end switch
      }//end if
               else
               {
                   printf("\n\n\tYou did not enter a number.\n\n\tPress enter and only enter specific values.");
                   getch();

                   //reset loop and refresh
                   LTrigger = 1;
                   system("cls");
                }//end else
      }//end loop

      getch();

 }//end main 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T23:00:31.657

`isdigit`接受一个字符并说它是否是 和 之间的`'0'`字符`'9'`。但是你传递的是一个整数，而不是一个字符，所以它的输出是没有意义的。

如果您想知道是否`scanf`成功，只需检查它的返回值：如果成功则为 1，如果失败则为 0（实际上它会返回分配的变量数）：

```
if (scanf("%d", &BusRoute) > 0)
{ 
```

如果您想知道是否`BusRoute`是一位数，那么您可以简单地检查它是否在 0 和 9（或 3）之间，但没有必要这样做：相反，`default:`在您的`switch`.

顺便说一句，你错过了`&`一个

```
scanf("%c" , DestLoc); 
```

它应该是：

```
scanf("%c" , &DestLoc); 
```

`%c`此外，在它会耗尽缓冲区中剩余的任何空格或回车之前添加一个空格通常是一个好主意（例如，来自先前的用户操作）：

```
scanf(" %c" , &DestLoc); 
```

同上，对于这种`StartLoc`情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:58:06.220

在没有看到您的代码的情况下回答这个问题很棘手。您可以使用类型转换将字符转换为整数：

```
switch((int) variable) 
```

如果`variable`是用户输入的字符，则类型转换`(int)`会将其转换为`switch`. 但是，通常 C 不需要类型转换来将字符解释为整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T23:00:21.103

看这个：

```
char charBusRoute;
int BusRoute;

/* ... */

scanf("%c",&charBusRoute);

if(isdigit(charBusRoute)){
    BusRoute = charBusRoute - '0';
    /* ... */
} 
```

# join - 记录主动溢出到 Hadoop Pig 中？

> ID：12378925
> 
> 赞同：4
> 
> 时间：2012-09-11T22:37:24.967
> 
> 标签：join, hadoop, apache-pig

我是 Hadoop 新手，对我的 pig 脚本中的命令行消息感到好奇。

```
Total records written : 7676
Total bytes written : 341396
Spillable Memory Manager spill count : 103
Total bags proactively spilled: 39
Total records proactively spilled: 32389322 
```

最终结果被指示为“成功！”。我仍然不确定。上面这些数字是什么意思？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T15:09:56.770

前两个显示您的 MR 作业写入 HDFS 的总记录/字节。
可能会发生，在 MR 作业期间，**并非所有**记录都*适合内存*。溢出计数器指示有多少记录已写入数据节点的本地磁盘，以避免内存不足。

Pig 使用两种方法来控制内存使用并在必要时进行溢出：

1. [可溢出内存管理器](http://pig.apache.org/docs/r0.10.0/api/index.html?org/apache/pig/impl/util/SpillableMemoryManager.html)：

这就像注册可溢出袋的中心位置。如果内存不足，此管理器会遍历已注册包的列表并执行`GC`.

2.主动（自我）溢出：

如果达到内存限制，包也会自行溢出（请参阅`pig.cachedbag.memusage`）

回到你拥有的统计数据：

*   主动溢出的袋子总数：已溢出的袋子数
*   主动泄露的记录总数：这些袋子中的记录数

检查工作的溢出统计数据总是好的，因为大量溢出可能表明需要[避免的](https://cwiki.apache.org/Hive/skewed-join-optimization.html)*巨大性能*损失。

# java - 什么是 RHS 向量

> ID：12378929
> 
> 赞同：8
> 
> 时间：2012-09-11T22:38:29.823
> 
> 标签：java, apache, matrix

请我试图理解矩阵计算。我的问题可能看起来很简单，但需要一个答案，可以简单地向我解释什么是 RHS 向量。我经常看到它在 Apache commons 数学库中使用，例如我从 stackoverflow 页面得到这个：

```
public class LinearAlgebraDemo
{
    public static void main(String[] args)
    {
        double [][] values = {{1, 1, 2}, {2, 4, -3}, {3, 6, -5}};
        double [] rhs = { 9, 1, 0 }; /* RHS Vector */

        RealMatrix a = new Array2DRowRealMatrix(values);

        DecompositionSolver solver = new LUDecompositionImpl(a).getSolver();

        RealVector b = new ArrayRealVector(rhs);
        RealVector x = solver.solve(b);

        RealVector residual = a.operate(x).subtract(b);
        double rnorm = residual.getLInfNorm();

    }
} 
```

有人可以向我解释这段代码，尤其是 RHS 向量及其用途。非常感谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-11T23:27:25.340

您的矩阵方程如下所示：

```
Ax = b 
```

其中`A`是具有 m 行和 n 列的矩阵，`x`是`m`未知数的列向量，并且是已知值`b`的另一个列向量（也称为右侧） 。`m`它位于等号的右侧——因此得名。

如果我给你一个包含两个数字和一个未知值 x 的简单方程，你就会确切地知道如何求解它：

```
Ax = b -> x = b/A 
```

将其视为通过将等式两边乘以 A 的倒数来求解 x。

在这种情况下，它更复杂，因为除以矩阵意味着反转它。

您不会反转矩阵；您将创建一个称为矩阵 A 的 LU 分解的东西。如果您有兴趣，您应该了解它是什么以及为什么它比计算完全逆更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T23:33:46.390

RHS 是“右手边”的常见数学缩写。在这里，您似乎正在求解一个线性方程组`Ax = b`，其中`A`是 nxn 矩阵，`x`并且`b`是 n 维列向量。如果你不理解这个术语，那么我建议你学习线性代数。

至于代码，`rhs`是一个数组，用于初始化向量的元素`b`。类似地，二维数组`values`用于初始化矩阵的元素`A`（实际上是一个名为 的引用变量`a`）。

# file - msdeploy + setParameters.xml，如何设置web物理文件位置

> ID：12378931
> 
> 赞同：4
> 
> 时间：2012-09-11T22:38:59.663
> 
> 标签：file, path, location, msdeploy

这个问题已经绕了一点，如果它是重复的，请原谅我，但我无法找到确切的答案。

我正在尝试为指定网站的目标物理文件夹的部署配置创建一个 Parameters.xml。这适用于使用 TeamCity 的自动构建，例如使用 .deploy.cmd 的命令行。

有人可以解释我需要做什么吗？

参数.xml：

```
<parameter name="physicalPathLocation" description="Physical path where files for this Web service will be deployed." defaultValue="\" tags="PhysicalPath">
    <parameterEntry kind="DestinationVirtualDirectory" scope="Default\ Web\ Site/iag\.application\.services\.exampleservice/" match="" />
</parameter> 
```

并在 SetParameters.xml

```
<setParameter name="physicalPathLocation" value="C:\MyFolder\MySite" /> 
```

我怀疑我的问题在于我如何声明范围，但不确定需要做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T05:16:08.423

假设`Default Web Site/iag.application.services.exampleservice`是 IIS 中的虚拟目录（`DestinationVirtualDirectory`仅对“应用程序”有效），您可能只需删除`/`后缀而不对其进行编码即可。（我也删除了`match`属性）

```
<parameter name="physicalPathLocation" 
           description="Physical path where files for this Web service will be deployed." 
           defaultValue="\" 
           tags="PhysicalPath"
           >
    <parameterEntry kind="DestinationVirtualDirectory" 
                    scope="Default Web Site/iag.application.services.exampleservice" />
</parameter> 
```

请记住，您不必在设置参数*之前*声明参数。您可以轻松地声明完整参数并同时设置它：

```
<setParameter name="physicalPathLocation" 
              kind="DestinationVirtualDirectory" 
              scope="Default Web Site/iag.application.services.exampleservice" 
              value="C:\MyFolder\MySite" /> 
```

# windows - Appfabric 最大对象大小

> ID：12378938
> 
> 赞同：0
> 
> 时间：2012-09-11T22:39:55.097
> 
> 标签：windows, appfabric-cache

在 Appfabric 缓存中缓存一些大对象（可能约为 10mb）时，它会引发以下异常

ErrorCode :SubStatus: 连接已终止，可能是由于服务器或网络问题或序列化对象大小大于服务器上的 MaxBufferSize。请求的结果未知。

这是传输通道设置

<transportProperties connectionBufferSize="131072" **maxBufferPoolSize="268435456" maxBufferSize="50000000"** maxOutputDelay="2" channelInitializationTimeout="60000" receiveTimeout="600000"/>

即使 maxBufferPoolSize 设置在 2GB 以上，为什么存储 10MB 对象会抛出异常。如果我在这里遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:11:21.083

[需要在客户端和服务器](https://stackoverflow.com/questions/3449683/is-it-possible-to-adjust-appfabric-cache-server-to-store-larger-objects)上设置 WCF 传输设置才能生效。

`maxBufferSize`AFAIK 两者的最大可能设置为`maxBufferPoolSize`2GB，但我不会将这些设置任意大，因为它会[占用内存](http://social.msdn.microsoft.com/Forums/en/wcf/thread/d6e234d3-942f-4e9d-8470-32618d3f3212/)。

# jquery - 使用 JSON 的 Flot 无法正常工作

> ID：12378944
> 
> 赞同：0
> 
> 时间：2012-09-11T22:40:58.650
> 
> 标签：jquery, json, flot

您好，当我从 Jquery 加载时，我在将数据部分加载到 Flot 时遇到了一些问题，但是当我手动输入数据值时，它工作正常。

```
<script type="text/javascript">

    $(document).ready(function() {
        var kcArray = [];

        function onDataReceived(series) {

            $.each(series, function(i, marker) {
            var dq = [[new Date(1346976001000), 3904.8408203125], [new Date(1346976011000), 3919.70678710938], [new Date(1346976021000), 3933.97265625], [new Date(1346976031000), 3956.583984375], [new Date(1346976041000), 3975.85083007813], [new Date(1346976051000), 3960.72924804688], [new Date(1346976061000), 3962.5751953125], [new Date(1346976071000), 4001.56372070313], [new Date(1346976081000), 4005.63549804688], [new Date(1346976091000), 3994.11499023438], [new Date(1346976101000), 3992.95141601563], [new Date(1346976111000), 3972.32470703125], [new Date(1346976121000), 3957.19848632813], [new Date(1346976131000), 3943.83935546875], [new Date(1346976141000), 3939.63305664063], [new Date(1346976151000), 3944.61474609375], [new Date(1346976161000), 3960.82592773438], [new Date(1346976171000), 3967.658203125], [new Date(1346976181000), 3975.17578125], [new Date(1346976191000), 4001.0302734375], [new Date(1346976201000), 4015.51171875], [new Date(1346976211000), 4004.38500976563], [new Date(1346976221000), 3974.08227539063], [new Date(1346976231000), 3941.20751953125], [new Date(1346976241000), 3936.21801757813], [new Date(1346976251000), 3945.08984375], [new Date(1346976261000), 3933.44970703125], [new Date(1346976271000), 3933.52319335938], [new Date(1346976281000), 3939.19970703125], [new Date(1346976291000), 3954.7646484375], [new Date(1346976301000), 3962.11254882813], [new Date(1346976311000), 3956.17358398438], [new Date(1346976321000), 3992.56396484375], [new Date(1346976331000), 4008.015625], [new Date(1346976341000), 4039.65112304688], [new Date(1346976351000), 4045.77319335938], [new Date(1346976361000), 4010.93359375], [new Date(1346976371000), 3990.35888671875], [new Date(1346976381000), 3984.05810546875], [new Date(1346976391000), 3986.58666992188], [new Date(1346976401000), 3988.79345703125], [new Date(1346976411000), 3996.03857421875], [new Date(1346976421000), 4017.88989257813], [new Date(1346976431000), 4011.49584960938], [new Date(1346976441000), 4031.03857421875], [new Date(1346976451000), 4038.71362304688], [new Date(1346976461000), 4048.50927734375], [new Date(1346976471000), 4036.84204101563], [new Date(1346976481000), 3998.3544921875], [new Date(1346976491000), 3981.95434570313], [new Date(1346976501000), 3980.75952148438], [new Date(1346976511000), 3961.21630859375], [new Date(1346976521000), 3966.2451171875], [new Date(1346976531000), 3969.21728515625], [new Date(1346976541000), 3981.84155273438], [new Date(1346976551000), 3988.89111328125], [new Date(1346976561000), 4003.67626953125], [new Date(1346976571000), 4010.57202148438], [new Date(1346976581000), 3994.47241210938], [new Date(1346976591000), 3968.3349609375], [new Date(1346976601000), 3971.16723632813], [new Date(1346976611000), 3967.21752929688], [new Date(1346976621000), 3961.94604492188], [new Date(1346976631000), 3956.22509765625], [new Date(1346976641000), 3958.71850585938], [new Date(1346976651000), 3942.47021484375], [new Date(1346976661000), 3945.68188476563], [new Date(1346976671000), 3962.16723632813], [new Date(1346976681000), 3981.14794921875], [new Date(1346976691000), 3999.26635742188], [new Date(1346976701000), 3989.92456054688], [new Date(1346976711000), 3980.75903320313], [new Date(1346976721000), 3965.29516601563], [new Date(1346976731000), 3986.69189453125], [new Date(1346976741000), 4004.6005859375], [new Date(1346976751000), 4020.123046875], [new Date(1346976761000), 4023.11865234375], [new Date(1346976771000), 4035.29150390625], [new Date(1346976781000), 4052.357421875], [new Date(1346976791000), 4038.36108398438], [new Date(1346976801000), 4062.8505859375], [new Date(1346976811000), 4064.73315429688], [new Date(1346976821000), 4051.31616210938], [new Date(1346976831000), 4021.96899414063], [new Date(1346976841000), 3997.01147460938], [new Date(1346976851000), 3977.91577148438], [new Date(1346976861000), 3974.49682617188], [new Date(1346976871000), 3961.978515625], [new Date(1346976881000), 4001.267578125], [new Date(1346976891000), 4007.3154296875], [new Date(1346976901000), 3996.1484375], [new Date(1346976911000), 4042.66772460938], [new Date(1346976921000), 4022.11743164063], [new Date(1346976931000), 4019.2509765625], [new Date(1346976941000), 4023.57934570313], [new Date(1346976951000), 3999.955078125], [new Date(1346976961000), 3998.23413085938], [new Date(1346976971000), 3983.35693359375], [new Date(1346976981000), 3977.345703125], [new Date(1346976991000), 3990.88525390625]];
                var chartData = { label: marker.label, data: dq };
                kcArray.push(chartData);
                //alert(dq);
                //$('#content').html(marker.data);
            });
            // and plot all we got
            $.plot($('#content'), kcArray);

        }

        $.ajax({
            url: '/Charts/GetPowerChart',
            method: 'GET',
            dataType: 'json',
            success: onDataReceived
        });

    });  

</script> 
```

每当我加载这个我的图表加载很好

但是，每当我将 dq 更改为 marker.data 时，标签都不起作用，但数据不会加载到图表上，我在手动加载中输入的数据和 marker.data 完全相同：

```
 <script type="text/javascript">

    $(document).ready(function() {
        var kcArray = [];

        function onDataReceived(series) {

            $.each(series, function(i, marker) {
                var dq = marker.data;
                var chartData = { label: marker.label, data: dq };
                kcArray.push(chartData);
                //alert(dq);
                //$('#content').html(marker.data);
            });
            // and plot all we got
            $.plot($('#content'), kcArray);

        }

        $.ajax({
            url: '/Charts/GetPowerChart',
            method: 'GET',
            dataType: 'json',
            success: onDataReceived
        });

    });  

</script> 
```

有人可以帮忙吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:15:07.460

这就是我能够修复它的方法：

JS：

```
var data24 = [];

function onDataReceived(seriesData) {
  //alert(seriesData.seriesData);
  var p = $.plot(placeholder, seriesData.seriesData, options);
}

var fullDate = new Date();
var twoDigitMonth = ((fullDate.getMonth().length+1) === 1)? (fullDate.getMonth()+1) : '0' + (fullDate.getMonth()+1); 
var currentDate = twoDigitMonth + "/" + fullDate.getDate() + "/" + fullDate.getFullYear(); 

$.ajax({
  url: '/Charts/LineChart?SeriesToGraph=5,7,9,11&DatePull=' + currentDate,
  method: 'GET',
  dataType: 'json',
  success: onDataReceived
}); 
```

这是我在 MVC 端所做的：

```
public JsonResult LineChart(string SeriesToGraph, string DatePull) {
  chartJson js = new chartJson();
  IList<testData> dt = new List<testData>();

  //string DatePull = "09-12-2012";            
  //string SeriesToGraph = "1,2,3,4";

  foreach (var series in SeriesToGraph.Split(',')) {
    IList<clsGraphData> dc = _mainRepository.graphRepository.GetGraphData(int.Parse(series), DatePull);
    IList<string[]> rw = new List<string[]>();

    string Label = string.Empty;

    foreach (var item in dc) {
      Label = item.Name;
      rw.Add(new string[] { DateTime.Parse(item.DatapointDate.ToString(), System.Globalization.CultureInfo.InvariantCulture).Subtract(new DateTime(1970, 1, 1)).TotalMilliseconds.ToString(System.Globalization.CultureInfo.InvariantCulture), item.DatapointValue.ToString() });
    }

    testData data = new testData();
    data.label = Label;
    data.data = rw;

    dt.Add(data);
  }
  js.seriesData = dt;

  return Json(js, JsonRequestBehavior.AllowGet);
} 
```

# asp.net-mvc-3 - 使用剃刀将视图导出到 excel 而不会丢失样式

> ID：12378945
> 
> 赞同：9
> 
> 时间：2012-09-11T22:41:09.570
> 
> 标签：asp.net-mvc-3, excel, razor

我有一个剃刀视图，我想导出到 excel。

在我看来，我正在使用这条线来做到这一点：

```
Response.AddHeader("Content-Type", "application/vnd.ms-excel"); 
```

当我评论这一行时，我可以看到具有我想要的样式的视图。当我取消注释并要求它时，浏览器会要求我下载 Excel 文件。但问题是当我打开文件时，我得到了这个错误

```
Missing file c:\scrips\excel.css 
```

这是我用来显示页面的 css。

那么如何使文件与其布局一起保存？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-12T01:25:32.780

您可能需要创建一个单独的“导出”视图。这意味着，它是自己的控制器`Action`，也是`View`它自己。该视图需要与您希望生成的 Excel 文件的外观相同。它必须是独立的。没有布局，以及包含 CSS 的样式标签（没有样式/脚本/等的链接）。

这是一个简单的例子：

假设您有一个`Controller`名为“家”。

**内部**动作**`HomeController`：**

 **```
public ActionResult Export()
{
    Response.AddHeader("Content-Type", "application/vnd.ms-excel");
    return View();
} 
```

**查看**（主页\Export.cshtml）：

```
@{
    Layout = "";
}
<style type="text/css">
    body {font-family: Tahoma;}
    h2 {color:red}
    table {border:1px solid black; border-spacing:0}
    td {color:green; font-size:.8em; padding:5px}
    .heading {background:#ccc}
</style>

<h2>Test</h2>

<table>
    <tr class="heading">
        <th>Name</th>
        <th>Age</th>
    </tr>
    <tr>
        <td>Test1</td>
        <td>15</td>
    </tr>
    <tr>
        <td>Test2</td>
        <td>16</td>
    </tr>
</table> 
```

加载此页面后，它将弹出一个下载框，并以适当的样式在 Excel 中打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T01:57:58.910

您的控制器应该有一个实际提供 Excel 文件的操作，而不是包含 Excel 文件的网页。控制器动作应该是这样的。

```
public ActionResult Export()
{
    byte[] doc = GetExcelFileSomehow();
    var file = File(doc, "application/vnd.ms-excel");
    file.FileDownloadName = "MyFile.xlsx";
    return file;
} 
```**

# javascript - Javascript eval（）不适用于传递的字符串

> ID：12378946
> 
> 赞同：0
> 
> 时间：2012-09-11T22:41:12.687
> 
> 标签：javascript, eval

我的代码片段：

```
function receive(mag)
{
    var text = eval(mag);
    alert(text);
}

receive('["magnolia,", ["Magnolia (Flower)"], [], [], [], [], [], [[3, 19019, "INV_MAG_39 ", 5]]]'); 
```

当我在示例中传递字符串时（如上所示），`eval(mag)`它不起作用。但如果我直接这样做：

```
function receive(mag)
{
    var text = eval('["magnolia,", ["Magnolia (Flower)"], [], [], [], [], [], [[3, 19019, "INV_MAG_39 ", 5]]]');
    alert(text);
} 
```

它确实有效。有谁知道出了什么问题/我怎样才能让它与传递的变量一起工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T22:45:28.630

我认为您缺少括号：

```
eval('(' + mag + ')') 
```

但是为什么不使用 JSON.parse 呢？

```
var text = JSON.parse(mag); 
```

# php - PHP - 文件获取内容无法从 URL 打开流

> ID：12378948
> 
> 赞同：1
> 
> 时间：2012-09-11T22:41:33.890
> 
> 标签：php

我有这段代码，它允许我从链接中检索信息......现在，它说无法打开流......这是代码：

谢谢！

```
$b = time ();
$date1 =date( "Y-m-d;h:i:s" , mktime(date("h")+6, date("i"), date("s"), date("m") , date("d"), date("Y")));
$str_time = "";
$str_msg = "";
$str_from = "";
$str_zip = "";

echo file_get_contents('href="http://testext.i-movo.com/api/receivesms.aspx?".$str_from."".$str_zip."".$phone."".$str_time."".$date1."".$str_msg.""');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:45:11.363

这：

```
echo file_get_contents('href="http://testext.i-movo.com/api/receivesms.aspx?".$str_from."".$str_zip."".$phone."".$str_time."".$date1."".$str_msg.""'); 
```

应该是这样的：

```
echo file_get_contents("http://testext.i-movo.com/api/receivesms.aspx?".$str_from.$str_zip.$phone.$str_time.$date1.$str_msg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:44:23.220

请阅读[file_get_contents的文档](http://php.net/manual/en/function.file-get-contents.php)

例子说

```
$homepage = file_get_contents('http://www.example.com/');
echo $homepage; 
```

您正在使用

```
$homepage = file_get_contents('href="http://www.example.com/'); 
```

现在出了什么问题..

# ubuntu - How can I create a shortcut to dual boot between ChromeOS and Ubuntu easily?

> ID：12378955
> 
> 赞同：0
> 
> 时间：2012-09-11T22:41:52.577
> 
> 标签：ubuntu, chromium

It took my quite a while to find this information, and unlike most topics it was not on StackOverflow (or at least I couldn't find it).

* * *

It used to be I used the `qemacs` editor on chromeos (CR48) to change the `.profile` file. I couldn't find the updated one for the newer Samsung chromebooks, so

**question:** *How can I create the shortcut to dual boot between ChromeOS and Ubuntu easily?*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:42:56.803

**Credit goes to:** [cr-48.wikispace.com/Dual+Boot+shortcuts](http://cr-48.wikispaces.com/Dual+Boot+Shortcuts)

* * *

After completing these steps you will be able to switch to Ubuntu from Chrome OS by simply entering the command ubuntu in the terminal.

You will be able to switch to Chrome OS from Ubuntu by entering the command chromeos in the terminal.

*   Install Ubuntu using the instructions here*   Boot into Ubuntu and navigate to the Home folder*   Press ctrl + h*   Double-click the file .bashrc*   Scroll to the bottom of the file and add this command: alias chromeos='sudo cgpt add -i 6 -P 0 -S 0 /dev/sda;sudo reboot'*   Save the file and close it*   Open a terminal by selecting Applications > Accessories > Terminal and type chromeos*   After entering your password (the default password is 'user'), the computer should reboot into Chrome OS*   Log in to Chrome OS and press ctrl + alt + → (→ is the forward arrow where the F2 key would normally be)*   Type chronos and press enter*   Type sudo vim .profile and press enter (to see a complete list of vim editor commands go here)*   Press the letter a to begin 'insert mode'*   Type alias ubuntu='sudo cgpt add -i 6 -P 5 -S 1 /dev/sda;sudo reboot'*   Press esc to return to 'command mode'*   Press shift + z then shift + z again to save the file and return to the terminal*   Type exit and press enter*   Type chronos to log in again and press enter*   Type ubuntu and press enter*   The computer should reboot into Ubuntu

# c# - 从后台工作人员返回到从 Winforms 应用程序中托管的 WPF 对话框调用线程

> ID：12378957
> 
> 赞同：1
> 
> 时间：2012-09-11T22:41:57.777
> 
> 标签：c#, wpf, multithreading, backgroundworker, synchronizationcontext

我们有一个 Winforms 应用程序，它启动一个 WPF 对话框，我将其称为向导。该向导的目的是打开多个文本文件并将其内容保存到数据库中。将这些文件保存到数据库所需的时间从 15 到 60+ 秒不等。为了给向导 UI 响应，将文本文件保存到数据库的过程在 BackgroundWorker 线程上完成。不幸的是，由于 Winforms 宿主应用程序中的一些遗留代码，向导在 80 - 90% 的时间里完全没有响应。因此，向导在其自己的工作线程上启动。

```

    //将Wizard放在单独的线程上维护UI  
    //导出过程中的响应
    线程 t = 新线程（LaunchBatchExportWizardView）；
    t.SetApartmentState(ApartmentState.STA);
    t.Name = "向导线程";
    t.Start();

```

所以总的来说我们有三个主线程，支持Winforms主机的主线程、向导线程和BackgroundWorker线程。用户可以通过单击向 BackgroundWorker 线程发送 CancelAsync 消息的向导上的按钮来暂停此导出过程。在 BackgroundWorker_DoWork 事件处理程序中，我们检查此取消消息，如果找到，则停止处理并返回。这会触发 BackgroundWorker_RunWorkerCompleted 事件处理程序，我可以在其中检查使用 Thread.CurrentThread.Name 已将控制权返回到的线程的标识。

用户第一次暂停 BackgroundWorker 进程时，控制权返回给 Wizard 线程。如果用户想要恢复导出过程，我们调用 RunWorkerAsync 依次启动 BackgroundWorker_DoWork 事件处理程序。从观察中我可以看到，这个处理程序没有使用它之前使用的同一个线程，而是使用了线程池中的一个新线程。出于调试目的，我给这个线程一个名字。

```

    if(Thread.CurrentThread.Name == null)
    {
       Thread.CurrentThread.Name = "MyBackgroundWorkerThread" 
           + "_" + _threadCounter.ToString();
        _threadCounter++;
    }

```

第一个 BackgroundWorker 线程命名为 MyBackgroundWorkerThread_1，第二个命名为 MyBackgroundWorkerThread_2，以此类推。

稍后当用户决定再次暂停进程时，控制不会返回到 BackgroundWorker_RunWorkerCompleted 事件处理程序中的 Wizard 线程（因为它是第一次），而是返回到某个新线程。但是，这不是致命的，用户仍然可以恢复，并且导出过程将从中断的地方继续。

但是，当我们尝试在与数据库的连接丢失的情况下启动自定义警告对话框时，就会出现问题。显然，如果向导无法与数据库通信，它就无法执行其主要任务。如果我们在一个或多个暂停/恢复周期后启动此对话框，则会引发异常并显示消息“调用线程必须是 STA，因为许多 UI 元素都需要这个”。由于这个要求，向导线程被显式设置为 STA（参见上面的相关代码），因此如果在任何暂停/恢复周期之前发生数据库连接丢失，一切正常。这个新线程显然不是 STA，因此会引发异常。

我尝试的一个选项是测试是否在我们想要启动我们的 DatabaseConnectivityLoss 对话框的时间点我们在向导线程上。由于 Wizard 线程是一个显式命名的线程（见上面的代码），我只是测试一下当前线程的 name 属性是否为 null：

```

     if (Thread.CurrentThread.Name == null)
     {
         if (Application.Current == null)
         {
              新应用程序（）；
          }
          线程 t = 新线程（LaunchDatabaseConnectivityLossDialog）；
          t.SetApartmentState(ApartmentState.STA);
          t.Name = "NewStaThread";
          t.Start();
      }

```

在没有前面提到的异常的情况下，这可以很好地启动对话框，但是当我们在连接恢复后尝试恢复导出过程时，应用程序会挂起。

我尝试的第二件事是设置一个 SynchronizationContext 变量来保存对向导线程的引用。我的理解是，我可以使用此引用在向导线程上启动我的 DatabaseConnectivityLoss 对话框，而不管哪个线程在任何时候都是当前​​的。为此，我在向导的构造函数中设置了这个变量：

```
    _synchronizationContext = SynchronizationContext.Current;
     if (_synchronizationContext == null)
     {//在我的情况下总是如此，因为向导是 Winforms 应用程序的子项
          _synchronizationContext = new SynchronizationContext();
     }

```

但是，当我后来尝试使用此 SynchronizationContext 将我的代码强制返回到向导线程时，它失败了：

```

 `_synchronizationContext.Send(Test, null);

    私人无效测试（对象占位符）
    {
        Debug.WriteLine(Thread.CurrentThread.Name); 
    }`

```

Thread.CurrentThread.Name 通常返回 null，在其他情况下返回“NewStaThread”。我不想暗示这种行为是间歇性的。只是我尝试了许多不同的变体，并在不同的情况下从许多不同的位置调用了此方法。

我的印象是，synchronizationContext 应该持有对 Wizard 线程的引用，当我调用 Send 方法时，回调方法应该在 Wizard 线程上执行。

任何人都可以看到我的哪些假设是无效的，或者提出解决方案的途径。

从概念上讲，我认为要么我必须强制我的应用程序从 DoWork 处理程序返回到向导线程，要么在启动我的 DatabaseConnectivityLoss 对话框之前强制它返回到向导线程。据我了解，我无法访问匿名线程，直到将其设置为 STA 为时已晚，这必须在它开始之前完成。

# sql - 在 SELECT 语句中调用函数时的性能

> ID：12378958
> 
> 赞同：2
> 
> 时间：2012-09-11T22:42:02.660
> 
> 标签：sql, performance, postgresql, string-formatting, plpgsql

我有一个查询，我需要调用一个 SQL 函数来格式化查询中的特定列。所需的格式与格式化电话号码非常相似，即。变成. `1234567890`_`(123)456-7890`

我读过从 select 语句中调用函数可能是性能杀手，这在我的情况中有所反映，查询花费的时间增加了三倍多，我认为函数不会花费这么长时间。该函数以线性时间运行，但确实使用 SQL 循环。为了了解数据库的大小，这个特定的查询返回了大约 220,000 行。不调用函数与运行调用函数相比，查询的运行时间从 < 3 秒变为 > 9 秒。需要格式化的列未在连接条件或 where 子句中编制索引或使用。

这里的性能下降是预期的还是我可以做些什么来改善它？

这是有问题的功能：

```
CREATE OR REPLACE FUNCTION fn(bigint)
  RETURNS character varying LANGUAGE plpgsql AS
$BODY$
DECLARE
   v_chars varchar[];
   v_ret   varchar;
   v_length int4;
   v_count  int4;
BEGIN
   if ($1 isnull or $1 = 0) then
      return null;
   end if;

   v_chars  := regexp_split_to_array($1::varchar,'');
   v_ret    := '';
   v_length := array_upper (v_chars,1);
   v_count  := 0;

   for v_index in 1..11   loop
      v_count := v_count + 1;

      if (v_index <= v_length) then
         v_ret := v_chars[v_length - (v_index - 1)] || v_ret;
      else
         v_ret := '0' || v_ret;
      end if;

      if (v_count <= 6 and (v_count % 2) = 0) then
         v_ret := '.' || v_ret;
      end if;
   end loop;

   return v_ret;
END
$BODY$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:52:26.193

If you really *must* perform the formatting in the database then modify your table to include a field to store the formatted number.

A trigger can call your function to generate the formatted number when the value changes, then you only (slightly) increase the time taken to `INSERT` or `UPDATE` a few rows at a time, rather than all of them.

Your query returning all 220k rows then becomes a simple `SELECT` of the formatted value and should be nice and quick.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:52:34.840

It depends on the specifics of the function. To find out how much a *bare function call* will cost, create dummy functions like:

```
CREATE FUNCTION f_bare_plpgsql(text)
  RETURNS text LANGUAGE plpgsql IMMUTABLE AS
$BODY$
BEGIN
   RETURN $1;
END
$BODY$;

CREATE FUNCTION f_bare_sql(text)
  RETURNS text LANGUAGE sql IMMUTABLE AS
$BODY$
   SELECT $1;
$BODY$; 
```

And try your query again.
If then you wonder why your function is slow, add it to your question.

* * *

### Solution for updated question

Your function could be improved in many places, but there is a more radical solution:

```
SELECT to_char(12345678901, '00000"."00"."00"."00') 
```

Many times faster, obviously. More about [`to_char()` in the manual](http://www.postgresql.org/docs/current/interactive/functions-formatting.html#FUNCTIONS-FORMATTING-TABLE).
Consider the following demo:

```
WITH x(n) AS (
   VALUES  (1::bigint), (12), (123), (1234), (12345), (123456), (1234567)
          ,(12345678), (123456789), (1234567890), (12345678901), (123456789012)
   )
SELECT n, x.fn(n), to_char(n, '00000"."00"."00"."00')
FROM x

      n       |       fn       |     to_char
--------------+----------------+-----------------
            1 | 00000.00.00.01 |  00000.00.00.01
           12 | 00000.00.00.12 |  00000.00.00.12
          123 | 00000.00.01.23 |  00000.00.01.23
         1234 | 00000.00.12.34 |  00000.00.12.34
        12345 | 00000.01.23.45 |  00000.01.23.45
       123456 | 00000.12.34.56 |  00000.12.34.56
      1234567 | 00001.23.45.67 |  00001.23.45.67
     12345678 | 00012.34.56.78 |  00012.34.56.78
    123456789 | 00123.45.67.89 |  00123.45.67.89
   1234567890 | 01234.56.78.90 |  01234.56.78.90
  12345678901 | 12345.67.89.01 |  12345.67.89.01
 123456789012 | 23456.78.90.12 |  #####.##.##.## 
```

`to_char()` is only prepared for up to 11 decimal digits, as you can see.
Can easily be extended, if need should be.

# asp.net-mvc-3 - MVC3 JQGrid 从控制器动态设置 colmodel

> ID：12378959
> 
> 赞同：0
> 
> 时间：2012-09-11T22:42:05.483
> 
> 标签：asp.net-mvc-3, jqgrid

我已经看到了大量关于在视图中设置 colmodel 的示例，但我无法看到控制器代码！我正在尝试这样做，但设置一直出错。我试图达到这个列的形成：

```
colModel:
[
    { name: 'ID', index: 'ID', hidden: true },
    { name: 'Votes', index: 'Votes', width: 100, align: 'left' },
    { name: 'Question', index: 'Question', width: 300, align: 'left' },
    { name: 'my_clickable_checkbox', index: 'my_clickable_checkbox',
        sortable: true,
        formatter: chkFmatter, formatoptions: { disabled: false }, editable: true,
        edittype: "checkbox"
    }
], 
```

这是我在控制器中的试验：

```
return Json(
    new { colNames = new[] { "ID2", "Votes2", "Question2", "checkbox" },
          colModel = new[] { 
            new { name = "ID", index = "ID", width = 0, formatter="",
                  edittype="", hidden = true },
            new { name = "Votes", index = "Votes", width = 100, formatter="",
                  edittype="", hidden = false },
            new { name = "Question", index = "Question", width = 300, formatter="",
                  edittype="", hidden = false },
            new { name = "checkbox", index = "my_clickable_checkbox", width = 100,
                  formatter="chkFmatter", edittype="checkbox", hidden = false }
          }
}, JsonRequestBehavior.AllowGet); 
```

在控制器中创建这个数组迫使我在所有行中拥有相同数量的属性。例如，我只需要`ID`隐藏 ，但它迫使我向`hidden`所有其他列提供属性。

第二个问题，我需要`chkFmatter`为第四列调用js函数。

我怎样才能在控制器中达到 colModel 形成？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:34:34.180

您可能有兴趣查看 jqGrid[导入和导出](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aimport_methods)功能。它允许您将整个 jqGrid 配置导入或导出到另一种文件格式或从另一种文件格式导出。

你可以阅读这篇博文：

*   [jqGrid 和 ASP.NET MVC - 配置导入/导出](http://tpeczek.blogspot.co.uk/2010/01/jqgrid-and-aspnet-mvc-configuration.html)

了解如何将这些功能与 ASP.NET MVC 一起使用的总体思路，但如果涉及 ASP.NET MVC 的东西（它基于 ASP.NET MVC 1），它有点过时了。

您还可以查看这个 jqGrid 示例项目：

*   [ASP.NET MVC 3 和 Razor 中的 jqGrid](http://tpeczek.codeplex.com/releases/view/61796)

其中（除其他外）包含配置导入/导出的示例。

这里要记住的最重要的事情是，您仍然需要在配置导入后设置任何 jqGrid 事件/回调或调用任何其他方法，如“setFrozenColumns”。

# shell - 后台作业、等待和 cron

> ID：12378960
> 
> 赞同：0
> 
> 时间：2012-09-11T22:42:09.897
> 
> 标签：shell, crontab

我有以下 ksh 脚本：

```
sqlplus usr1/pw1@DB1 @$DIR/a.sql $1 &
sqlplus usr2/pw2@DB2 @$DIR/b.sql $1 &
wait
echo "Done!" 
```

其中 $DIR 是一个变量，具有 a.sql 和 b.sql 所在的绝对路径。

一段时间以来，我每天都在运行这个脚本，它运行良好。目的是两个 SQL*Plus 会话都进入后台并并行执行，当它们完成后，我可以继续执行应用程序的以下步骤。

由于它不再是测试版本，所以我在 crontab 上安排它每天执行。我现在遇到的问题是它不会在“等待”上暂停并让 sqlplus 会话完成，但它直接输出“完成！”。在真正的应用程序中，那个“echo Done！” 实际上是调用另一个程序对 a.sql 和 b.sql 的输出进行一些处理。但由于它没有等待两个 sql 脚本实际完成，因此无法完成处理。

当我自己运行它时，它绝对完美，无论我是从本地目录还是从根目录（就像 crontab 那样）。但是当它由 crontab 自动执行时，我并没有停下来等待，而是把整个事情搞砸了。

关于可能发生的事情有什么想法吗？谢谢！

# javascript - Backbone.js restful json API 设计

> ID：12378961
> 
> 赞同：1
> 
> 时间：2012-09-11T22:42:19.977
> 
> 标签：javascript, rest, backbone.js

我的 API 有以下功能，我偶然发现了几个问题：

1.  POST /user（需要全名、电子邮件、密码）将创建一个新用户，如果已创建用户，则会生成一个唯一的激活 ID，并通过邮件将激活帐户的链接发送给用户。

2.  PUT /user（需要 id、email）将激活用户。

一旦用户激活了它的帐户，它就可以登录。

1.  POST /session（需要电子邮件、密码）并登录用户。
2.  GET /session 将查看 cookie 会话 ID，如果经过身份验证，则返回用户信息。
3.  DELETE /session 将用户注销。

一旦用户登录，他会被要求提交他们的兴趣（只是一个 HTML 文本区域），他们也可以提交关于他们的帐户的描述（位置、性别等，但这都是可选的，所以也是一个 HTML 文本区域，就像 Twitter 帐户一样描述）

现在我的问题是：

如您所见 2\. PUT /user 将激活用户，但是我将如何在适当的 restful 设计中处理提交的兴趣和帐户描述？

我是否应该查看我的后端服务器 PUT /user 将进入并检测提交的字段的位置？

或者创建一个单独的 PUT /user/activate 和 PUT /user/interests 是否更有意义。

完成后，我想用恢复密码来扩展它，这也是一个 PUT /用户，服务器端的字段检测会不会有点乱？

现在关于骨干网，这是我的会话模型：

```
var Session = Backbone.Model.extend({
  url: '/session'
});

var session = new Session();
session.fetch(); // Get the user authentication of the backend server. 
```

我的用户模型：

```
var User = Backbone.Model.extend({
  url: '/user'
});

function signup(fullName, email, password){
  var user = new User();
  user.save({
    fullName: fullName,
    email: email,
    password: password
  });
};

function activate(id, activationId){
  var user = new User();
  user.save({
    id: id,
    activationId: activationId
  });
};

// Possibility...?
function submitInterests(id, interests){
  var user = new User(url: '/user/interests/');
  user.save({
    id: id,
    activationid: activationId
  });
} 
```

感谢您的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:33:57.780

RESTful 世界的经验法则是：

> 动词向下，名词向上。

那是因为魔法 4 [ `GET, POST, PUT, DELETE`] 应该足以满足所有操作：没有`/users/activate`/`/user/edit`周围的东西。

虽然对激活`PUT`进行整体`/users`处理似乎是合法的，但向`/root`“实体 = 用户，ID = 3，...”等发出所有请求并传递这些请求也是如此。

我建议您使用`/entityname`集合 [您可以`POST`在其中创建新集合]，然后`/entityname/:id`引用单个实体 [在这种情况下，单个用户]。

现在你可以做一个`PUT`完成`/users/123`你需要的任何事情。

* * *

当然你可以嵌套资源：

```
/users/:id/interests 
```

这是`:id-th`用户所有兴趣的路线 - 你可以`GET`在它上面发出一个来检索它们，或者一个`POST`向列表中添加一个元素，一个从头开始`PUT`设置**所有列表。**

* * *

关于您的资源的最后一个想法`session`：真正的 RESTful 服务应该是 * *stateless*，即它不应该依赖会话。必须对每个请求进行授权，请参阅[HTTP Basic Auth](http://en.wikipedia.org/wiki/Basic_access_authentication)，尽管有时您可以使用会话。

为了与您的架构保持一致，您可以定义一个`/user/:id/sessions`资源，`POST`以便进行新的登录，这样您就可以跟踪用户访问。

# php - 对发出 CURL 请求的 PHP 脚本的异步请求有什么限制

> ID：12378962
> 
> 赞同：1
> 
> 时间：2012-09-11T22:42:24.060
> 
> 标签：php, curl, asynchronous

正如标题所述：可以对`PHP`发出请求并返回一些信息的脚本发出的异步请求的数量是多少`CURL`，或者如果取决于硬件，则为近似数量。

例如：

一段`Javascript`循环运行 50 次，通过 AJAX 向同一个 PHP 脚本发出异步获取请求，并在返回结果时将结果存储在数组中。

可以合理地发出多少这样的请求，或者服务器一次只能考虑一个`CURL`请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T23:03:52.830

您正在寻找的是[curl_multi_*](http://www.php.net/curl_multi_init)函数。一个例子是这样的：

```
//create the multiple cURL handle
$mh = curl_multi_init();

// Loop over pages and get set the URL to the cURL queue
foreach ($urls as $url) {

    // Get a cURL handle of the current URL
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    // Set all your other curl_setopt() options here for the transfers

    // Success
    if (gettype($ch) == 'resource' && get_resource_type($ch) == 'curl') {
        curl_multi_add_handle($mh, $ch);
    }
}

// Execute the handles
do {
    $mrc = curl_multi_exec($mh, $active);
} while ($mrc == CURLM_CALL_MULTI_PERFORM);

while ($active && $mrc == CURLM_OK) {
    if (curl_multi_select($mh) != -1) {
        do {
            $mrc = curl_multi_exec($mh, $active);
        } while ($mrc == CURLM_CALL_MULTI_PERFORM);
    }
} 
```

我在我的一个网站上使用它来下载大约 50 个 URL，它运行良好。当然，这完全取决于为您的脚本分配的内存。您还可以设置超时，以便没有任何 URL 可以使您的脚本挂起太久。

**编辑：**要实际回答您的问题，我不确定您可以输入此函数的 URL 数量的限制是多少。我相信它会因服务器而异，具体取决于连接速度，内存和可能的 CPU，如果你正在做一些处理器密集型的结果。但是话虽如此，如果所有请求都发送到同一个远程服务器，您可能会遇到瓶颈问题，具体取决于其配置。这与您是使用 PHP 多 cURL 请求还是 AJAX 无关。即使对同一个脚本，所有 Web 服务器都可以处理许多并发请求，但您仍然可能遇到以下任何情况的问题：

*   发送的每个请求都非常消耗资源
*   远程服务器需要锁定数据库，这种情况下所有的请求都会一个一个的执行，所以一次发送或者一次发送没有什么区别。
*   远程服务器在 PHP 中使用基于文件的会话，您的请求需要会话
*   远程服务器设置为允许很少的最大并发客户端（通常 Nginx 处理许多并发客户端比 Apache 更好，因为它不需要为每个请求派生一个新进程，所以如果它成为一个问题，你可能想要调查切换网络服务器）。在这种情况下，所有后续请求都将排队到某个硬限制数量，超过该数量，它们将被丢弃。

# javascript - 骨干表单隐藏字段未呈现

> ID：12378964
> 
> 赞同：0
> 
> 时间：2012-09-11T22:42:43.940
> 
> 标签：javascript, forms, backbone.js

我正在尝试使用 powmedia 主干表单呈现表单，但没有看到它在我的标记中生成。我的模型架构如下所示：

```
schema: {
    name: {
        title: 'Report Name',
        validators: ['required'],
        fieldClass: 'ui-fieldset-1'
    },
    organization_id: {
        type: 'Hidden'
    },
} 
```

名称字段显示正常，但我的源代码中看不到 organization_id 字段。有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:57:36.547

回答我自己的问题。

我没有使用内置的：

```
form.getValue() 
```

相反，我使用另一个名为 Backbone Siphon 的插件来序列化我的数据，但效果并不好。似乎隐藏的输入并未故意包含在源中。因为 Backbone 在设计上是无状态的，所以更容易将隐藏的输入值存储在浏览器中的 JavaScript 对象中。在这里查看查理的评论：[https ://groups.google.com/forum/?fromgroups=#!topic/backbone-forms/BWvsEMVHC6I](https://groups.google.com/forum/?fromgroups=#!topic/backbone-forms/BWvsEMVHC6I)

# javascript - 自定义滚动条

> ID：12378965
> 
> 赞同：0
> 
> 时间：2012-09-11T22:42:48.197
> 
> 标签：javascript, html, scroll, scrollbar

我想用更好的东西替换 PC 网络浏览器上显示的疏浚滚动条。

我有一个 div 设置了“宽度”，“overflow-x”设置为“滚动”，这给了我水平滚动条。

我怎样才能改变这个标准滚动 -

![在此处输入图像描述](../Images/ad64b01b6236952cd03edecf7bfa3b71.png)

对于这样的事情 -

![在此处输入图像描述](../Images/45d679526b88aceb95cb62522c545708.png)

我确信它可能可以用 javascript 完成，但不知道如何实现。

干杯...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:48:31.860

看看这个：http: [//jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)

您可以自定义滚动条的大小和颜色。

（您没有指定，我假设这是针对网络浏览器的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T23:30:02.073

[您可以使用Jquery Tools Scrollable](http://jquerytools.org/demos/scrollable/index.html)来实现这一点。如果它不能自行解决您的问题，则可能将它与[本示例](http://jqueryui.com/demos/slider/#side-scroll)中的 Jquery UI 结合使用。

# java - 查找图像文件中的压缩类型

> ID：12378969
> 
> 赞同：0
> 
> 时间：2012-09-11T22:43:17.933
> 
> 标签：java, compression, tiff, bin, javax.imageio

我想找到当前存储为 .bin 文件的图像的压缩类型（不知道为什么它只是这样存储）但我的问题是我应该在 .bin 文件中找到压缩类型还是应该当我转换为 .tiff 文件时执行此操作。我做了大量的研究，不确定什么是最好的方法。如果有人能给我一些反馈，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T04:03:31.737

您可以查看文件的前几个字节，以至少了解图像格式是什么。大多数文件格式都以一些“幻数”开头，以便解码器可以验证格式。你可以使用这个[神奇的数字列表](http://www.garykessler.net/library/file_sigs.html)来猜测你有什么，然后在数据上尝试适当的图像解码器。

# php - 通过表单上传文件

> ID：12378971
> 
> 赞同：0
> 
> 时间：2012-09-11T22:43:42.020
> 
> 标签：php, forms, upload, permissions

我编写了一个包含 3 个文本输入和一个文件输入的表单。此表单发布到 PHP 脚本，该脚本保存文件并执行一些其他业务逻辑。该程序在我的本地主机上运行良好，甚至在我的服务器上运行良好。

该程序现在嵌入在 Facebook 应用程序中，它仍然可以工作 - 但上传的文件最初没有保存；因此，我将上传目录权限更改为 777（我知道这是一个粗略的做法）。现在上传的文件被保存为一串数字“13474022561”，没有扩展名。

谁能告诉我为什么？或者如何解决这个问题？

下面的源代码片段：

```
 if($_FILES['resume']['type']!='')
  {
        $target_path = "resumes/";

        $target_path = $target_path .time().basename( $_FILES['resume']['name']!="");
        if($_FILES['resume']['type']=="application/vnd.openxmlformats-officedocument.wordprocessingml.document" || $_FILES['resume']['type']=="application/pdf")
        {
            if(move_uploaded_file($_FILES['resume']['tmp_name'], $target_path)) 
            {
                echo "success";
            }
            else
                echo "failure";
        }
        else 
        {
                echo "<center>Resume must be MS DOC or PDF <br/>";                    
                exit;
        }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:59:38.817

这行代码：

```
$target_path = $target_path .time().basename( $_FILES['resume']['name']!=""); 
```

应该：

```
$target_path = $target_path . time() . basename( $_FILES['resume']['name']); 
```

您当前的代码是这样评估的：

```
$target_path = 'resumes/' . time() . basename(true); 
```

这可能不是你想要的。

# jsf - JSF 表单验证失败后滚动到锚点或页面底部

> ID：12378974
> 
> 赞同：2
> 
> 时间：2012-09-11T22:44:14.710
> 
> 标签：jsf

我在页面底部有一个联系表单，其中包含必填且经过验证的表单字段。如果验证失败，我怎样才能让滚动位置回到页面底部？

我希望这个页面在禁用 Javascript 的情况下工作，所以没有 AJAX 解决方案。我有这样的事情：

```
<a id="contact"></a>
<h:form id="cform">
    <h5>Contact!</h5>

    <h:outputLabel for="name">Name: 
        <h:message id="nameMsg"  for="name" />
    </h:outputLabel>

    <h:inputText id="name" value="#{bean.name}" required="true" requiredMessage="Please enter name!" />

    <h:outputLabel for="email">Email: 
        <h:message id="emailMsg" for="email" />
    </h:outputLabel>

    <h:inputText id="email" value="#{bean.email}" required="true" requiredMessage="Email is required!">
        <f:validator validatorId="myValidator" />
    </h:inputText>

    <h:outputLabel for="comment">Comment: 
        <h:message id="commentMsg" for="comment" />
    </h:outputLabel>

    <h:inputTextarea id="comment" value="#{bean.comment}" required="true" requiredMessage="Please enter a comment!"/>

    <h:commandButton action="#{bean.go}" id="send" value="send" />
</h:form> 
```

我考虑过在 bean 端进行验证并手动重定向到适当的锚点，但这似乎违背了开始使用 JSF 的目的。我认为有一种简单的方法可以做到这一点，但我在谷歌搜索解决方案时遇到了麻烦，因为我可能没有正确地措辞这个问题。任何人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T11:01:54.007

您可以[`<f:event type="postValidate">`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/event.html)在验证阶段之后使用侦听器挂钩。您可以[`FacesContext#isValidationFailed()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isValidationFailed%28%29)用来检查验证是否失败。您可以使用[`Flash#setKeepMessages()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/Flash.html#setKeepMessages%28boolean%29)让面孔消息在重定向中幸存下来（默认情况下，它们是请求范围的！）。您可以使用[`ExternalContext#redirect()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#redirect%28java.lang.String%29)非操作方法执行重定向。

所以，总结一下，这应该做：

```
<h:form id="cform">
    ...
    <f:event type="postValidate" listener="#{bean.postValidate}" />
</h:form> 
```

和：

```
public void postValidate() throws IOException {
    FacesContext context = FacesContext.getCurrentInstance();

    if (context.isValidationFailed()) {
        context.getExternalContext().getFlash().setKeepMessages(true);
        context.getExternalContext().redirect("contact.xhtml#cform");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T09:44:31.387

或者我们可以使用**f:ajax onerror=**来做一些事情，如果他们是一个错误：

```
 <p:commandButton **>
  <f:ajax onerror="window.scrollTo(0, 0);" />
 </p:commandButton> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T14:40:48.260

您不需要明确的锚标记，表单的 id 就可以了。

您可以让 Faces 在表单操作 Url 的末尾呈现 id。

例如。

...您的主页内容在这里....

`<form id="contact-form" action="/MyView.jsf#contact-form" method="post">`

这将导致浏览器在提交后滚动到表单。

它也显示在 URL 中。

您可能可以实现一个自定义表单渲染器来执行此操作。

# rally - Rally Cardboard for Stories by Project

> ID：12378975
> 
> 赞同：2
> 
> 时间：2012-09-11T22:44:15.827
> 
> 标签：rally

我试图在 Rally 中创建一个 Cardboard 来显示分配给特定项目的故事（在给定的版本中）。

我们使用项目字段来确定我们三个 Scrum 团队中的哪一个正在处理特定的故事。我想要一个板式显示，让我可以快速地将故事从一个团队转移到另一个团队，并显示给定版本的每个团队板块上的内容列表。

我想出了以下自定义 HTML 应用程序：

```
function cardboardOnLoad(cardboard, args) {
    var items = args.items;
    var itemsByType = cardboard.getItems(null, "Defect");
    var itemsByState = cardboard.getItems("Accepted");
    var itemsByTypeAndState = cardboard.getItems("Backlog", "Defect");
}

function onLoad() {
    var rallyDataSource = new rally.sdk.data.RallyDataSource('__WORKSPACE_OID__',
                          '__PROJECT_OID__', '__PROJECT_SCOPING_DOWN__');
    var cardboardConfig = {
        types : ["Defect", "HierarchicalRequirement"],
        attribute: "Project",
        fetch : "Name,FormattedID,Owner,ObjectID",
        query : 'Release.Name = "RI 3.1.0"',
        order : 'Rank'
    };

    var cardboard = new rally.sdk.ui.CardBoard(cardboardConfig, rallyDataSource);
    cardboard.addEventListener(cardboard.getValidEvents().onLoad, cardboardOnLoad);
    cardboard.display("cardboard");
}

rally.addOnLoad(onLoad); 
```

唯一的问题是它实际上并没有显示我的故事......只是项目列名......

如果我将属性值更改为“ScheduleState”，但不是“项目”，它会显示故事，我不知道为什么......

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:02:10.393

这需要对手动查询列的纸板进行稍微高级的使用。上面的评论是正确的，否则你可能会遇到一些奇怪的项目范围行为。

以下应用程序将为当前范围项目的所有直接子项目构建一个板。

假设您有这样的项目层次结构：

项目 1
+--项目 2
+--项目 3
+--项目 4

当范围为项目 1 时，该板将包含项目 2、项目 3 和项目 4 列。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>Release Project Board</title>
        <meta name="Name" content="Release Project Board" />
        <script type="text/javascript" src="/apps/1.32/sdk.js"></script>
        <script type="text/javascript">

            var rallyDataSource;
            var cardBoard;
            var releaseDropdown;

            function onLoad() {
                rallyDataSource = new rally.sdk.data.RallyDataSource('__WORKSPACE_OID__',
                   '__PROJECT_OID__',
                   '__PROJECT_SCOPING_UP__',
                   '__PROJECT_SCOPING_DOWN__');
                releaseDropdown = new rally.sdk.ui.ReleaseDropdown({}, rallyDataSource);
                releaseDropdown.addEventListener("onLoad", findProjects);
                releaseDropdown.addEventListener("onChange", onReleaseChanged);
                releaseDropdown.display("release");
            }

            function onReleaseChanged(rd, args) {
                var config = cardboard.getConfiguration();
                config.query = releaseDropdown.getQueryFromSelected();
                cardboard.refresh(config);
            }

            function findProjects() {
               rallyDataSource.find({
                   key: "projects",
                   type: "project",
                   query: new rally.sdk.util.Query('Parent = /project/__PROJECT_OID__'),
                   fetch: true
               }, onProjectsRetrieved);
            }

            function onProjectsRetrieved(results) {
                var columns = {};
                rally.forEach(results.projects, function(project) {
                    columns[rally.sdk.util.Ref.getRelativeRef(project)] = {
                        displayValue: project.Name 
                    };
                });

                var cardboardConfig = {
                    types : ["Defect", "HierarchicalRequirement"],
                    attribute: "Project",
                    fetch : "Name,FormattedID,Owner,ObjectID,Project",
                    query: releaseDropdown.getQueryFromSelected(),
                    columns: columns
                };

                cardboard = new rally.sdk.ui.CardBoard(cardboardConfig, rallyDataSource);
                cardboard.display("cardboard");
            }

            rally.addOnLoad(onLoad);

        </script>
    </head>
    <body>
        <div id="release"></div>
        <div id="cardboard"></div>
    </body>
</html> 
```

# objective-c - Objective C - 不能在一种方法中设置值并从另一种方法访问它

> ID：12378982
> 
> 赞同：0
> 
> 时间：2012-09-11T22:46:00.833
> 
> 标签：objective-c, ios, nsdate

我正在尝试执行以下操作：

1）用户点击按钮**开始**，它运行`startTimer`方法，设置一个新的`[NSDate date]`。

2）用户单击按钮**停止**它运行`stopTimer`方法，该方法检索`[NSDate date]`值。

我无法让第 2 步工作。我已经在`.h`文件中设置了。如果我将代码从 start 方法复制到 stop 方法中，它就可以工作。所以，我可以设置`[NSDate date]`. 但是，这不是我想要的。我希望能够在`startTimer`方法中设置它。我该怎么做？

**.h 文件**

```
@interface StartTest : UIViewController {
    IBOutlet UILabel *timer;

    NSDate *startNSDate;
    NSDate *start;

}

- (IBAction)startTimer;
- (IBAction)stopTimer;

- (NSDate *)setStart;
- (NSDate *)getStart;

@end 
```

**.m 文件：**

```
@implementation Ash

- (IBAction)startTimer {

    startNSDate = [NSDate date];

}

- (IBAction)stopTimer{

    start = [NSDate date];

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"yyyy"];

    NSString *stringFromDate = [formatter stringFromDate:startNSDate]; // <<< this is where it fails

    NSLog(@"stringfromdate: %@", stringFromDate);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T23:00:06.557

startNSDate 没有被保留，当你想访问它时，它已经被释放了，因此你试图访问垃圾指针

对你来说最简单的解决方案是

```
@interface StartTest : UIViewController {
    IBOutlet UILabel *timer;

    NSDate *startNSDate;
    NSDate *start;

}
@property (nonatomic, strong) NSDate* startNSDate;

- (IBAction)startTimer;
- (IBAction)stopTimer;

- (NSDate *)setStart;
- (NSDate *)getStart;

@end

@implementation Ash

- (IBAction)startTimer {

    self.startNSDate = [NSDate date];

}

- (IBAction)stopTimer{

    start = [NSDate date];

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"yyyy"];

    // this is where it fails, the reason being that startNSDate isn't retained
    // and by this line, it's already dealloc'd, hence you're trying to access
    // garbage pointer
    NSString *stringFromDate = [formatter self.startNSDate]; 

    NSLog(@"stringfromdate: %@", stringFromDate);
}

- (void)dealloc
{
    self.startNSDate = nil;
    [super dealloc];
} 
```

# php - MySQL 表示约会的时间段

> ID：12378983
> 
> 赞同：0
> 
> 时间：2012-09-11T22:46:12.770
> 
> 标签：php, mysql, database, appointment, timeslots

我正在使用 php+mysql 创建（更多尝试...）约会系统

我为客户、员工、服务创建了表格，并为一周中的每一天创建了一个表格来保存工作人员的工作时间表。

现在我需要创建一个表格来保存约会......但我很困惑......

预约用户选择一天。在那一天，程序将检查哪些员工正在工作。如果有员工工作，他们将在几点开始和结束？之后检查空闲时间段。

由于服务可以有 15 分钟、20 或 45 分钟，我决定我需要创建 5 分钟的时间段......

但我无法想象如何在 mysql 表中完成此操作....

有任何想法吗？

干杯

# signalr - SignalR 捕获异常

> ID：12378986
> 
> 赞同：0
> 
> 时间：2012-09-11T22:46:46.483
> 
> 标签：signalr

我有一个简单的登录中心，客户可以提交用户名。如果用户名已被使用，则集线器会引发异常。在客户端上，我正在尝试处理异常并阅读消息。但是我正在阅读的消息是“发生了一个或多个错误”。

```
try
{
    await Client.SignIn(user);
    UserName = SignInInput;                      
}
catch (Exception ex)
{ //One or more errors has occurred } 
```

我在 SignalR github 上询问了这条消息，我收到了回复：

> 您需要解开错误。我们通过 SignalRError 对象提供此功能。这是一个如何打开`Exception`e 的示例。
> 
> ```
> using (var error = e.GetError())
> {
>     Console.Error.WriteLine(error);
> } 
> ```
> 
> 以后请在 Stackoverflow 等网站上提问或在[http://jabbr.net/#/rooms/signalr](http://jabbr.net/#/rooms/signalr)与我们聊天。

现在我正在浏览我的对象浏览器，我似乎无法在任何地方找到任何这样的方法或类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:03:32.707

它是一种扩展方法，在[`SignalR.Client.ErrorExtensions`](https://github.com/SignalR/SignalR/blob/master/SignalR.Client/Infrastructure/ErrorExtensions.cs).

# jquery - 如何选择元素旁边的字符串？

> ID：12378991
> 
> 赞同：0
> 
> 时间：2012-09-11T22:48:25.610
> 
> 标签：jquery

> **可能重复：**
> [使用 jquery 获取 span 元素之后的文本](https://stackoverflow.com/questions/6925088/get-the-text-after-span-element-using-jquery)

我正在尝试选择 span 元素旁边的文本。

我有

```
 <span class='spanClass'>span text</span>

test this string.... 
```

我用了

```
$('.spanClass').next().val() ->give me undefined....

//how to get the 'test this string....'? 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:52:42.977

你需要使用

```
<div>
    <span class='spanClass'>span text</span> 
    <label>Hello World!!</label>
</div>

   $('.spanClass').next().text();

            OR

   $('.spanClass').next().html(); 
```

.val() 用于输入元素.. .text() 用于标签和 div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:55:07.380

**工作演示**有点不同`:)` [http://jsfiddle.net/4Rx2r/](http://jsfiddle.net/4Rx2r/)

如果需要，您也可以将其作为插件放入您的 js 文件中`:)`。

希望能满足需求`:)`

**代码**

```
jQuery.fn.justtext = function() {

    return $(this).clone()
            .children()
            .remove()
            .end()
            .text();

};

alert($('.spanClass').parent().justtext());
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T22:55:28.607

获取父元素的内容并过滤文本节点：

```
var text = $('.spanClass').parent().contents().filter(function() {
    return this.nodeType===3;
}); 
```

[**小提琴**](http://jsfiddle.net/7bzah/1/);

# parameters - 如何在安装包中存储配置数据？

> ID：12378994
> 
> 赞同：0
> 
> 时间：2012-09-11T22:48:50.313
> 
> 标签：parameters, registry, windows-installer, installshield, filepath

我的软件产品有一个使用 Installshield 创建的安装包。

软件产品必须指向文件路径才能访问特定于其安装站点的文件。此文件路径存储在注册表中。

到目前为止，我不得不修改每个客户端的安装包，以便注册表设置指向特定于该客户端的文件路径。

我希望我的安装包是这样的，当客户端收到它时，他们可以自己配置包，以便在安装时将客户端特定的设置写入注册表。

实现这一目标的最佳方法是什么？有没有一种简单的方法可以使用 Installshield 或 MSI 参数来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T00:55:15.267

您需要使用安全自定义属性（CAPS 中并在 SecureCustomProperties 属性中列出的属性），然后在注册表中使用它来设置值。

例子

msiexec /I foo.msi SECUREPROPERTY=somevalue

然后在注册表中引用如下值：

[安全财产]

您还需要做一些自定义 UI 工作，以允许用户在交互运行时输入值。您可能还需要一些输入验证。最后，您需要了解属性不会为后续安装保留，因此您需要使用系统搜索 (AppSearch/RegLocator) 将属性拉回，以免在维修和升级过程中被清除.

一旦你做了几次，这并不难，但它有很多要描述的。

# c# - 如何使用 QuickFix 读取 secdef.dat 文件

> ID：12378998
> 
> 赞同：1
> 
> 时间：2012-09-11T22:49:54.600
> 
> 标签：c#, quickfix, fix-protocol

我正在尝试从 CME 读取静态证券定义文件，该文件位于： ftp: [//ftp.cmegroup.com/fix/Production/secdef.dat.gz](ftp://ftp.cmegroup.com/fix/Production/secdef.dat.gz)

由于它们似乎是标准修复消息，我想我可以使用 QuickFix 来帮助我将它们读入 C#，而不是自己解析文件。我创建了一个基本上可以满足我要求的测试应用程序，但是我遇到了两个问题：

1) 从字符串形成消息时，我收到 QuickFix 异常“无效消息：标头字段乱序”。如果我将“验证”布尔值设置为 false，则此消息消失并且构造函数成功，但可能是下一个问题的指示符。

2) 在调用 p.Crack 时，我得到了 QuickFix 异常“QuickFix.UnsupportedMessageType”，但似乎没有任何迹象表明应该不支持的消息类型是什么。

无论如何，也许 QuickFix 不打算以这种方式使用，但是关于如何让它工作的任何想法？

```
using System;
using System.IO;
using System.Collections.Generic;
using System.Text;
using QuickFix;

namespace TestQuickFix
{
    class Program : QuickFix.MessageCracker
    {
        static void Main(string[] args)
        {
            int count = 0;
            string line;

            Program p = new Program();
            StreamReader file = new StreamReader(@"C:\secdef.dat");

            while (((line = file.ReadLine()) != null && count < 10))
            {
                // ISSUE #1 REQUIRES false 2ND ARG WHEN CREATING THE MESSAGE
                Message m = new Message(line, false); 

                // ISSUE #2 Exception of type 'QuickFix.UnsupportedMessageType' was thrown.
                p.Crack(m, new SessionID("beginString", "senderCompID", "targetCompID"));
            }

            file.Close();

        }

        public void OnMessage(QuickFix.FIX50.SecurityDefinition secDef, SessionID sessionID)
        {
            Console.WriteLine(secDef.ToString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:05:38.823

这些消息似乎是 FIX50sp2 格式，受 QuickFIX 支持。（请查看标签 1128=9）。

[http://www.onixs.biz/fix-dictionary/5.0.SP2/tagNum_1128.html](http://www.onixs.biz/fix-dictionary/5.0.SP2/tagNum_1128.html)

但是每条消息似乎格式不正确。标头中有遗漏的标签 8（应该是 BeginString），以及标签 56（TargetCompID），这是强制性的。

因此，为了在消息中加载单行，您必须输入“false”参数以避免验证。

我想第二个错误与格式不正确的消息有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:32:19.140

在通过电子邮件向 QuickFix listserv 发送此问题后，我能够获得足够的信息来使其正常工作。尽管由于某种原因，每一行似乎仍然格式错误，但如果我关闭验证，我可以使用以下简化代码让解析器完全按照我的需要做：

```
using System;
using System.IO;
using QuickFix;
using QuickFix.DataDictionary;

namespace TestQuickFix
{
    class Program
    {
        private const int MAX_LINES = 10;

        static void Main(string[] args)
        {
            DataDictionary dd = new QuickFix.DataDictionary.DataDictionary("fix\\FIX50SP2.xml");   
            StreamReader file = new StreamReader(@"C:\secdef.dat");
            int count = 0; string line;
            while (((line = file.ReadLine()) != null && count++ < MAX_LINES))
            {
                QuickFix.FIX50.SecurityDefinition secDef = new QuickFix.FIX50.SecurityDefinition();
                secDef.FromString(line, false, dd, dd);
                Console.WriteLine(secDef.SecurityDesc);
            }
            file.Close();
        }
    }
} 
```

# c++ - 用于简单链表c ++的for循环

> ID：12378999
> 
> 赞同：0
> 
> 时间：2012-09-11T22:50:13.883
> 
> 标签：c++

我正在尝试为这部分做一个循环：

```
 insert_front(&list,name[0]);
    insert_front(&list,name[1]);                 
    insert_front(&list,name[2]); 
```

但是，我不知道哪个应该用作限制器，哪个应该停止循环，以及它将如何更改 name[] 周长。

这是整个代码：

```
#include "list.h"
#include "string"
using namespace std;
int main(){
    cout<<"What is your name \n";
    string name;
    getline(cin,name);

    Node *list;

    list = new_list();                          
    insert_front(&list,name[0]);
    insert_front(&list,name[1]);                  
    insert_front(&list,name[2]);
    }                          
    print_list(list);                                      
    delete_list(&list);
        print_list(list);
        return 0;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T22:56:14.677

迭代器版本（C++03）：

```
for (std::string::iterator iter = name.begin(); iter != name.end(); ++iter)
    insert_front(&list, *iter); 
```

Foreach 版本（C++11）：

```
for ( char c : name)
    insert_front(&list, c); 
```

索引版本（C++03）：

```
for (size_t i = 0; i < name.size(); ++i)
    insert_front(&list, name[i]); 
```

Foreach 版本（带有 Boost 的 C++03）：

```
std::for_each(name.begin(), name.end(), boost::bind(insert_front, &list, _1)); 
```

我不太确定 C++11 foreach 版本。

如果您的手动编码列表具有迭代器，则可能还有一种合理的方式来使用 std::copy 或 std::transform 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:55:43.757

正如您所说，这并不是真正的“整个代码”。您的列表存储了哪些元素？看起来每个节点只有一个字符。因此，您似乎是在尝试创建一个字符列表来以相反的顺序表示该人的姓名。

既然如此：

```
for( size_t i = 0; i < name.length(); i++ ) {
    insert_front(&list,name[i]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T23:02:06.560

标准模板库（字符串是其中的一部分）提供了一些非常高效且安全的迭代器，用于处理您可能想要循环的项目。

```
for(string::iterator iter = name.begin(); iter < name.end(); iter++) {
    insert_front(&list, *iter);
} 
```

[string::begin](http://www.cplusplus.com/reference/string/string/begin/)显示了同样的例子。

string::begin() 返回一个对象，当使用 operator* 取消引用时，该对象给出其所在的值。operator++() 递增到下一个位置。string::end() 在字符串末尾给出另一个对象，以便 operator++() 之后的 operator==() 停止循环。

现在，重要的部分是您没有使用索引。许多 STL 容器允许您使用迭代器复制值。您甚至可以跳过 for 循环以使用 stl 列表并执行以下操作：

```
std::list list (name.begin(), name.end()); 
```

完毕。根本没有手动 for 循环或 for_each() 调用。您甚至可以使用 name.begin() + 1 跳过第一个字符。请参阅[列表构造函数](http://www.cplusplus.com/reference/stl/list/list/)。

正如评论中指出的，要实现 insert_front() 反转效果，应该是：

```
std::list list (name.rbegin(), name.rend()); 
```

string::rebgin() 和 string::rend() 以相反的顺序迭代。更简单地说，这是在使用 string::begin() 和 string::end() 分别引入反转之后出现的。

显然，您使用的是不同的列表，并且需要一些循环才能继续使用它。但是，您可能只是决定将字符串保留为字符串并将相关的迭代器传递给打印函数，并完全避免使用列表。这可能使您可以使代码足够通用，而不必关心它是来自字符串还是列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T22:54:50.887

我认为您正在尝试这样做：

```
for(int i=0; i<name.size(); i++)
{
      insert_front(&list,name[i]);
} 
```

这会将名称的每个字符存储在列表中。