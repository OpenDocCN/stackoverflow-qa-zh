# StackOverflow 问答 11082000-11082999

# jquery - 如何让 If Else 在点击时工作？

> ID：11082006
> 
> 赞同：0
> 
> 时间：2012-06-18T11:37:19.500
> 
> 标签：jquery

```
$(cell).click(function(){
  var cellColor = $(this).css("background-color");

  if(cellColor != "red"){
    $(this).css("background-color", "red");
  }else{    
    $(this).css("background-color", "blue");
  }
}); 
```

你好，

为什么再次单击同一个单元格时 else 语句在这里不起作用（即单元格的背景在第一次单击时按预期变为红色）？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T11:40:36.820

jQuery 不是按名称返回颜色代码，而是按 RGB - [http://jsfiddle.net/cHWxv/](http://jsfiddle.net/cHWxv/)

```
$("div").click(function(){
  var cellColor = $(this).css("background-color");

    alert(cellColor);

  if(cellColor != "rgb(255, 0, 0)"){
    $(this).css("background-color", "rgb(255, 0, 0)");
  }else{    
    $(this).css("background-color", "rgb(0, 0, 255)");
  }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:49:45.797

什么是元素的“细胞”？也许元素不支持背景颜色样式？

尝试在 firefox 中使用 firebug 来调试您的 JS 代码，以查看确切的值是什么。

[检查有关 css-function http://api.jquery.com/css/](http://api.jquery.com/css/)的 jquery 文档。尤其是这一段：

".... jQuery 理解并返回 .css('background-color') 和 .css('backgroundColor') 的正确值。不同的浏览器可能返回逻辑上但文本上不相等的 CSS 颜色值，例如，# FFF、#ffffff 和 rgb(255,255,255)...."

# android - Opengl Android 中的可移动文本

> ID：11082008
> 
> 赞同：5
> 
> 时间：2012-06-18T11:37:28.273
> 
> 标签：android, opengl-es

如何使用 Open GL 在 Android 中显示可移动文本？或者是他们以任何其他方式显示文本移动而没有任何混蛋。我已经尝试过 Android 动画和选取框，但它并没有减少混蛋。我需要像新闻头条一样从右进左出的单行文本。在 Open GL 中，我应该在渲染器中做什么？

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    touchStart = new PointF();
    objs = new GLSurfaceView(this);
    sqobj = new  rendsquare();
    objs.setRenderer(sqobj);
    setContentView(objs);

    TextView editBox = new TextView(getApplicationContext());
    editBox.setTextColor(Color.BLUE);
    editBox.setEllipsize(TruncateAt.MARQUEE);
    editBox.setMarqueeRepeatLimit(-1);
    editBox.setHorizontallyScrolling(true);
    editBox.setFocusable(true);
    editBox.setFocusableInTouchMode(true);

    editBox.setText("Hello GL testing 123 hello hello h r u i am fine hello u there hello! hello !! !! !! !!");

    addContentView(editBox, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT));
} 
```

//另一个

```
public class SquaropnglActivity extends Activity {

private rendsquare sqobj;
private PointF touchStart;
private GLSurfaceView objs;
Animation mAnimation = new TranslateAnimation(300f, -300f, 0.0f, 0.0f); 
/** Called when the activity is first created. */
@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    touchStart = new PointF();
    objs = new GLSurfaceView(this);
    sqobj = new  rendsquare();
    objs.setRenderer(sqobj);
    setContentView(objs);

    mAnimation.setRepeatMode(1);
    mAnimation.setInterpolator(new DecelerateInterpolator());
    mAnimation.setDuration(3000L);
    mAnimation.setRepeatCount(-1);
    TextView editBox = new TextView(getApplicationContext());
    editBox.setTextColor(Color.BLUE);

    editBox.setAnimation(mAnimation);
    editBox.setTextSize(40);
    editBox.setLines(1);
    editBox.setText("Hello GL testing 123 hello hello h r u i am fine hello u there hello! hello !! !! !! !!");

    addContentView(editBox, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT));
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:55:01.620

如果您想以 opengl 方式进行文本渲染，请在您的 `onDrawFrame(gl)` 方法中编写文本绘制逻辑，并在每帧更新时更新文本位置以获得选取框动画。

对于文本渲染，请查看[OpenGL Text Rendering](http://fractiousg.blogspot.in/2012/04/rendering-text-in-opengl-on-android.html)

没有测试过。它应该适合你。最好的祝愿。

# html - 解析 HTML 内容并返回一个 div 属性

> ID：11082023
> 
> 赞同：1
> 
> 时间：2012-06-18T11:38:28.800
> 
> 标签：html, parsing, dom

这段代码

```
$html = file_get_html('http://runkeeper.com/user/'.RUNKEEPER_ID.'/activity/');
$link1  = $html->find('.activityMonth', 0); 
```

*将使用Simple HTML DOM*返回活动列表的 FIRST (foo, 0) 元素。

这是输出（$link1 的内容）：

```
<div class="activityMonth menuItem selected" link="/user/zzvimercm/activity/95648619"><div class="highlight"></div><div class="distanceUnit">km.</div><div class="distance">7.26</div>
<div class="day"><img src="http://d2b4ufapzmnxpw.cloudfront.net/build/3694/static/kronos/images/icon-calendar-17.png" width="24" height="26" border="0" /></div>
<div class="mainText">Running</div> 
</div> 
```

我需要解析第一个 div 的“链接”属性，并检索活动 ID（在本例中为 95648619）。我想 sscanf 或 Simple HTML DOM 本身可能会成功，但到目前为止我还没有成功。

有什么提示吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:01:57.150

例子：

```
// Get the "link"
$link = $html->find('div[link]', 0)->link;

// Explode the link, and get the last item
$activity_id = end(explode('/', $link)); 
```

# asp.net - 从 convert.tostring() 转换 Null 值

> ID：11082034
> 
> 赞同：3
> 
> 时间：2012-06-18T11:39:21.420
> 
> 标签：asp.net, c#-4.0

我有这样的代码。

```
string b=null;
string a = Convert.ToString(b); 
```

参考：

[在 ToString() 之前检查 null](https://stackoverflow.com/questions/550374/checking-for-null-before-tostring)

但是，当我将 b 转换为字符串时，我只得到空值而不是空字符串。但几天前，我也使用相同的 convert.tostring() 进行了空覆盖。在那它工作正常，但现在不工作。我在这里旋转我的头，请帮助我为什么会这样？唯一的问题是我在 3.5 框架中工作，但现在是 4.0 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T11:44:19.203

Convert.ToString(string) 将返回未更改的字符串。根据文档，每个版本的框架都是如此：

*   [4.0](http://msdn.microsoft.com/en-us/library/1a2xyyx8%28v=vs.100%29.aspx)
*   [3.5](http://msdn.microsoft.com/en-us/library/1a2xyyx8%28v=vs.90%29.aspx)
*   [3.0](http://msdn.microsoft.com/en-us/library/1a2xyyx8%28v=vs.85%29.aspx)
*   [2.0](http://msdn.microsoft.com/en-us/library/1a2xyyx8%28v=vs.80%29.aspx)

你误会了，调用会`Convert.ToString((string)null)`返回除 null 之外的任何内容。您**可能**调用的是`Convert.ToString((object)null)`. 这[将返回](http://msdn.microsoft.com/en-us/library/astxcyeh)空字符串。

```
string a = Convert.ToString((object)null);
string b = Convert.ToString((string)null);
// a now equals string.Empty, but b equals null. 
```

`b`您可以像我所做的那样将字符串转换为对象，但我建议您改用[null-coalescing](http://msdn.microsoft.com/en-us/library/ms173224.aspx)运算符：

```
string a = b ?? string.Empty 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:49:35.937

尝试这个 ：

字符串 a = (b == null) ？字符串。空：b；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:08:05.680

当我们进行任何转换时，请尝试检查它是否为空。

尝试这样做

```
if(!String.IsNullOrEmpty(b))
{
string c=Convert.ToString(b);
} 
```

# xamarin.android - 通过单击monodroid中axml的按钮设计添加事件？

> ID：11082037
> 
> 赞同：1
> 
> 时间：2012-06-18T11:39:34.273
> 
> 标签：xamarin.android

是否可以通过单击 axml 的设计来添加按钮单击事件？如果是，那怎么办？如果没有，我该如何通过其他方式添加？我正在尝试使用 Visual Studio 2010 制作我的第一个应用程序。

代码示例

```
public class Activity1 : Activity
{
     string dbPath = System.IO.Path.Combine(System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal), "tdsl_validation.sqlite");

        private Button login_button;
        private EditText  user;
        private EditText passs;

    protected override void OnCreate(Bundle bundle)
    {
        var ss=dbPath;

         base.OnCreate(bundle);
         user = (EditText)FindViewById(Resource.Id.editText1);
         passs = (EditText)FindViewById(Resource.Id.editText3);
         login_button = (Button)FindViewById(Resource.Id.button1);
         login_button.Click += new EventHandler(button1_Click);
         SetContentView(Resource.Layout.Main);

    }

    private  bool validate_user(string username, string password)
    {
        bool i;
        i = true;
        string str;

        DataTable dt = new DataTable();
        string dbPath1 = System.IO.Path.Combine(System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal), "tdsl_validation.sqlite");

        SqliteConnection con = new SqliteConnection("Data Source="+ dbPath1);
        str = "select pass from user_detail where user_name='" + username + "' and pass='" + password + "'";
        SqliteCommand cmd = new SqliteCommand(str, con);
        SqliteDataAdapter da = new SqliteDataAdapter(cmd);
        da.Fill(dt);

        if (dt != null)
        {
            if (dt.Rows.Count > 0)
            {
                i = true;

            }
            else
            {
                i = false;
            }

        }
        else
        {
            i = false;
        } 

        return i;

    }

    void button1_Click(object sender, EventArgs e)
    {
        bool i;
         user = (EditText)FindViewById(Resource.Id.editText1);
         passs = (EditText)FindViewById(Resource.Id.editText3);
         i = validate_user(user.Text, passs.Text);

         i = validate_user(user.Text, passs.Text);
         if (i == true)
         {

         }
         else
         {
             Toast.MakeText(this, "Invalid Username or Password", ToastLength.Short).Show();
         }

        // stuff here
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T13:38:46.570

新的 Mono for Android 应用程序的默认项目模板包括如何处理按钮的单击事件的示例。我不相信当前的设计师有任何方法可以手动将其连接起来。使用默认模板中的示例，假设布局中的按钮 Main.axml 的 ID 为“MyButton” (@+id/MyButton)。在您的活动中，您需要执行以下操作：

首先，声明 Main.axml 应该用作活动的布局：

```
SetContentView(Resource.Layout.Main); 
```

声明布局后，您可以获取对布局中元素的引用。这使您可以获取对按钮的引用：

```
Button button = FindViewById<Button>(Resource.Id.MyButton); 
```

一旦你有了它，你就可以挂钩该按钮上的 Click 事件，以便在单击按钮时进行处理：

```
button.Click += delegate { 
    // handle the click event here
}; 
```

或者，如果您想为单击处理程序使用单独的方法而不是内联定义它，您可以执行以下操作：

```
button.Click += ButtonClicked;

private void ButtonClicked(object sender, EventArgs eventArgs)
{
    // handle button click here
} 
```

**编辑（基于评论和更新的问题）**

如前所述，在调用 FindViewById()*之前*需要调用 SetContentView()。SetContentView() 告诉 Android 你想为活动使用哪个布局，所以在你这样做之前，它不知道在哪里可以找到你的 UI 元素。将 SetContentView() 调用移到 FindViewById() 调用之上，并确保您想要的布局是 Main.axml。如果它有不同的名称，则需要在调用 SetContentView() 时指定正确的名称。

我还建议从一开始就大大简化你的代码，只是为了缩小可能出现问题的地方。目前，您的按钮单击将开始尝试访问数据库并执行其他操作，但我建议您在执行该步骤之前让您的单击处理程序正常工作。

# java - HQL 中的日期/时间数学

> ID：11082038
> 
> 赞同：0
> 
> 时间：2012-06-18T11:39:39.673
> 
> 标签：java, hibernate, datetime, date

这是来自 HQL 中的 WHERE 子句：

```
(current_timestamp() - c.m_some_time) >= :3000) // finding 3 seconds and older 
```

它不起作用。

我看到了很多关于这个主题的问题，但他们都避免使用`current_timestamp()`并使用 Java Date() 代替（使用`setString()`），这对我来说是**错误的，因为我需要精确**。

我看到的另一种方法是派生一种方言并注册我自己的函数。这个好像太过分了。

**有什么方法可以在纯内置 HQL 中进行简单的时间数学运算并将其与简单的毫秒/秒值进行比较？**

我很好奇的另一个问题是**为什么上面的 WHERE 子句确实通过了 HQL 的检查？**我的意思是，这是有效的 HQL 查询的一部分（当其他 WHERE 子句有效时）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:49:44.817

更改查询中的变量顺序：

```
current - from_db >= 3000 
```

到：

```
from_db <= (current - 3000) 
```

您将在查询中计算值：

```
calculated_timestamp = current_timestamp() - 3000;

c.m_some_time <= :calculated_timestamp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:57:09.673

最终似乎没有答案，所以最好的办法是扩展`Dialect`和注册一个函数。

# c# - 如何在类 WriteToFile 中使用类 CButtonCreate 中的属性 newFileName？

> ID：11082039
> 
> 赞同：0
> 
> 时间：2012-06-18T11:39:39.673
> 
> 标签：c#, vb.net, visual-studio-2010

我有一个没有 get & set Methode 的 CButtonCreate 类。但我想在另一个类即WriteToFile类中使用来自类CButtonCreate的属性“string newFileName”。如何在类 WriteToFile 中使用属性 newFileName？

```
class CButtonCreate
{
    // Create a Folder && SubFolder from the tbProject
    public void CreateFolder(string MyFolderName, string Mytbs, string MytbRevision, string MyTestSystem)
    {
        // Open the Directory path
        string activeDir = @"Y:\temp";

        //Combine the current active folder with the tbProject
        string newPath = Path.Combine(activeDir, MyFolderName);

        // Create a folder in the active Directory
        Directory.CreateDirectory(newPath);

        // Create a new SubFolder name. This example generates a random string. "tbs"
        string newSubPath = Path.Combine(newPath, Mytbs);

        //Create a new Subfolder under the current active folder
        Directory.CreateDirectory(newSubPath);

        // Create a new file name.
        string newFileName = "Project_" + MyFolderName + "_" + MytbR + ".txt";

        // Combine the new file name with the path
        newPath = System.IO.Path.Combine(newPath, newFileName);

        if (!System.IO.File.Exists(newPath))
        {
            using (System.IO.FileStream fs = System.IO.File.Create(newPath))
            {
               // Call the Function WriteInFile
            }
        }
    }

class WriteToFile
{
    public void WriteInFile(string MyFolderName, string MytextBox, string MytbR, string MycbTest)
    {
        CButtonCreate myFile = new CButtonCreate();
        StreamWriter sw = new StreamWriter(newFileName);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:12:24.483

您的 WriteInFile 方法需要将该`newFileName`值作为该方法的参数，例如：

```
class WriteToFile
{
    public void WriteInFile(string newFileName, string MyFolderName, string MytextBox, string MytbR, string MycbTest)
    {
        CButtonCreate myFile = new CButtonCreate();
        StreamWriter sw = new StreamWriter(newFileName);
    }
} 
```

然后，`CButtonCreate.CreateFolder`你会这样称呼它：

```
WriteToFile w = new WriteToFile();
w.WriteInFile(newFileName, ...); 
```

或者，如果您愿意，可以将值传递给 WriteToFile 构造函数中的参数，例如：

```
class WriteToFile
{
    public WriteToFile(string newFileName)
    {
        _newFileName = newFileName;
    }

    private string _newFileName;

    public void WriteInFile(string MyFolderName, string MytextBox, string MytbR, string MycbTest)
    {
        CButtonCreate myFile = new CButtonCreate();
        StreamWriter sw = new StreamWriter(_newFileName);
    }
} 
```

然后，`CButtonCreate.CreateFolder`你会这样称呼它：

```
WriteToFile w = new WriteToFile(newFileName);
w.WriteInFile(...); 
```

还有其他方法可以使用属性、将`CButtonCreate`对象传递给`WriteToFile`对象或使用静态属性，但我给出的示例中的这两个选项似乎是最有可能和最好的解决方案。

另外，我应该提到您误用了“属性”一词。在 .NET 语言中，属性是一个非常具体的东西，与您所说的完全不同。属性提供了一种使用描述代码的元数据“装饰”代码的方法。例如，有一些属性指示调试器是否跟踪您的方法，或者在调试时跳过它。还有其他属性可以指示编译器如何正确构建您的程序集。例如，属性用于指定程序集的版本号。

我相信您打算使用的术语是“财产”或“领域”。但是，这些术语也都不正确，因为该`newFileName`变量当前是该`CreateFolder`方法的局部变量。因此，无法从另一个类外部访问它，甚至无法从同一个类中的另一个方法访问它，因为它的作用域就是那个`CreateFolder`方法。它仅在执行该方法时存在。一旦该方法结束，该字符串就消失了。如果出于某种原因，您想让整个班级都可以访问它，则需要将其移至班级级别并使其成为班级的字段：

```
class CButtonCreate
{
    private string newFileName;

    public void CreateFolder(string MyFolderName, string Mytbs, string MytbRevision, string MyTestSystem)
    {
        ...
    }
} 
```

然后，如果你想让其他类可以访问它，你可以为它创建一个公共的 get/set 属性。

# rest - 适合 REST 架构模式的应用程序？

> ID：11082040
> 
> 赞同：2
> 
> 时间：2012-06-18T11:39:40.153
> 
> 标签：rest, hateoas

我最近[在 SO 上阅读了这个讨论](https://stackoverflow.com/questions/1164154/is-that-rest-api-really-rpc-roy-fielding-seems-to-think-so/11081588#11081588)，有人评论说并非所有应用程序都适合基于 REST 的架构。
这里我所说的“基于 REST 的架构”是指 RESTful apis + HATEOAS 的全部内容。网络上的大多数示例都引用了“咖啡店”示例，它们通过创建订单的工作流程位突出了 Hateoas 部分 --> 更新/确认 --> 支付 --> 收货。那么 REST 最适合具有显着状态转换的应用程序，还是同样适用于其他类型的应用程序，在这些应用程序中，我们可能应该更多地考虑状态转换以让 REST 为我们工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:02:52.527

REST 同样适用于其他类型的应用程序，我们应该更多地考虑状态转换。[用状态图构建用户界面](https://rads.stackoverflow.com/amzn/click/com/0201342782)是一个很好的指导如何处理这个（如果你能以合理的价格获得一份副本）。当您阅读它时，请确保您在脑海中将“用户界面”替换为普通的旧“界面”。

# c++ - 在小部件和向导页面之间共享数据

> ID：11082041
> 
> 赞同：0
> 
> 时间：2012-06-18T11:39:47.787
> 
> 标签：c++, qt

我在 QWizard 中使用了一组 QWizardPage 类。除此之外，我有一个登录对话框，它获取信息并从数据库中读取。然后将此数据库信息存储在我创建的结构中。

如果可以的话，我想避免紧耦合和全局数据（以及相应的单例），因为我想尝试以最好的方式执行任务。

现在首先我目前在应用程序初始化期间创建向导，并使用信号/插槽将结构发送到向导。这当然意味着当我创建登录表单时向导必须存在。我想的另一种方法是向向导添加公共函数或更新构造函数。但这意味着我需要在创建向导页面时将数据传递到向导页面。有没有更好的方法来做到这一点，也许沿着这个问题的相关部分：

另一件事是我在向导期间的某些阶段从数据库中读取信息。如果您使用`registerField()`它似乎是一种不错的方法，但是我从数据库中读取的信息并未存储在小部件中，因此我看不到如何从其他页面访问这些数据。有没有办法做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:28:56.187

将 GUI 与应用程序的业务逻辑分开是一个好主意。您可以添加一个控制器类来处理对数据库的请求，然后更新 GUI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:05:31.213

可能有更好的方法来做到这一点，但我所做的是我可以在我的代码中创建属性，然后使用`registerField`这些属性。此处的示例非常简单，但通过这样做，我可以针对我需要的任何内容进行注册。我认为，如果您开始拥有不是“正常”类型的更复杂的属性，那么它可能会变得更复杂一些。

```
Q_PROPERTY(int settingID READ getSettingID)

public:
    int getSettingID() const; 
```

然后在代码中：

```
registerField("test_setting", this, "settingID");

int TestSettingsWizardPage::getSettingID() const
{ 
    // Return the value here
} 
```

# linux - Linux 安全性和 /etc/shadow

> ID：11082044
> 
> 赞同：-3
> 
> 时间：2012-06-18T11:40:03.833
> 
> 标签：linux, password-protection

我很想知道 linux 中的密码是如何保存在 /etc/shadow 中的。即使您有两个使用相同密码的用户，/etc/shadow 中的关联条目也是不同的。

u1 和 u2 的密码都设置为 123

u1:$6$Ht/JdwSZ$no69zCL6q4KYapW2GKPy1iAHl3i.r.0WgvFF5KxF2pzYnG7WfG3.96no2lquIZBFmYJ0VX4VmJoTxErCGOE6c.:15508:0:99999:7:::

u2:$6$7LUQhoQa$V0S7rpjQ7QO1op0EbCpJ7j5B8iRWiKpbQob7axqREqb2q0z6Cs8NxJ1FzzTMNmAysq3ZWqmGjwDpwLZ1CigmB1:15508:0:99999:7:::

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T11:47:09.717

那是因为*盐*。加密密码字段的第二部分是*salt*，在哈希计算期间附加到密码的随机字符序列。

在你的情况下，*盐*是`Ht/JdwSZ`和`7LUQhoQa`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-11T15:04:35.507

在 Linux 中，用于用户身份验证的文件有两种，一种是密码，另一种是影子文件。/etc/password 文件包含用户 ID、组 ID、shell、主目录。这可以通过以下命令准备好。

[root@localhost~]#head -n 1 /etc/passwd

所以它对所有人都是可读的。要解决此问题，请将密码重新定位到另一个文件 /etc/shadow

由于影子文件是加密的，这就是为什么几乎不可能破解的原因。

要获取有关 Linux 系统的更多详细信息，请查看以下链接

[http://topicsfeedback.com/linux-password-file/](http://topicsfeedback.com/linux-password-file/)

您也可以在名为“Advance Linux”的 google play 商店中尝试以下应用程序，这可能会更有助于轻松访问 Linux 信息

[https://play.google.com/store/apps/details?id=com.topicsfeedback.advancelinux](https://play.google.com/store/apps/details?id=com.topicsfeedback.advancelinux)

# c# - 如何直接显示最近上传的视频？

> ID：11082045
> 
> 赞同：5
> 
> 时间：2012-06-18T11:40:07.387
> 
> 标签：c#, jquery, asp.net, file-upload, video.js

我不想创建一个概念证明来向用户展示如果他们以 .MP4 和 OGG 格式上传相同的视频，则生成的视频标签（使用 videojs）将是跨平台的。

我已经使用设计器成功创建了一个文件上传器，它将最大 512mb 的文件上传到解决方案内的文件夹“文件”，但我想知道如何使用生成的视频标签更新网页。

这是我要更改的标签：

```
<video id="example_video_1" class="video-js vjs-default-skin"  
      controls preload="auto" width="640" height="264"  
      poster="http://video-js.zencoder.com/oceans-clip.png"  
      data-setup='{"example_option":true}'>  
   <source id="mp4" src="http://video-js.zencoder.com/oceans-clip.mp4" type='video/mp4' />  
   <source id="webm" src="http://video-js.zencoder.com/oceans-clip.webm" type='video/webm' />  
   <source id="ogg" src="http://video-js.zencoder.com/oceans-clip.ogv" type='video/ogg' />  
</video> 
```

我的保存方法：

```
protected void btnUpload_Click(object sender, EventArgs e){    
            //check to make sure a file is selected    
            if (FileUpload1.HasFile)    {
                //create the path to save the file to        
                string fileName = Path.Combine(Server.MapPath("~/Files"), FileUpload1.FileName);
                //save the file to our local path
                FileUpload1.SaveAs(fileName);    
            }
        } 
```

编辑：

我现在几乎有了解决方案。不知何故，它没有得到正确的路径。我创建的解决方案：

```
<script type="text/javascript">
    var _strSource = '<ASP:LITERAL runat="server" id="litSource" />';
    window.onload = function ()
    {
        if ( _strSource != "" ) {
            alert( _strSource );
            var video = document.getElementById( 'objVideo' );
            var sources = video.getElementsByTagName( 'source' );
            alert( sources[0].src );
            sources[0].src = _strSource;
            video.load();
            video.play();
        }
    }
</script> 
```

在服务器端：

```
protected void btnUpload_Click(object sender, EventArgs e){
    //check to make sure a file is selected    
    if (FileUpload1.HasFile)    {
        //create the path to save the file to        
        string fileName = Path.Combine(Server.MapPath("/Files"), FileUpload1.FileName);
        //save the file to our local path
        FileUpload1.SaveAs(fileName);
        this.litSource.Text = fileName.Replace("\\", "\\\\");
    }
} 
```

我还在我的 web.config 中添加了这个：

```
<staticContent>
  <mimeMap fileExtension=".mp4" mimeType="video/mp4" />
  <mimeMap fileExtension=".ogg" mimeType="video/ogg" />
  <mimeMap fileExtension=".webm" mimeType="video/webm" />
  <mimeMap fileExtension=".m4v" mimeType="video/m4v" />
</staticContent> 
```

它现在将路径更改为（在我的情况下）C:\Projects\FileUploadTest\FileUploadTest\Files\c4b3ae2189ea.ogg。这是文件上传到的实际路径，但浏览器无法访问此路径。有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:31:17.233

你需要创建一个可以通过浏览器访问的 url，例如，如果你的文件被上传到`c:\www\mysite\uploadfolder`你就必须创建这个 url`http://mysite/uploadfolder/movieFileName.ogg`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:20:10.187

这是通过添加文字的简单方法

```
<video id="example_video_1" class="video-js vjs-default-skin"  controls preload="auto" width="640" height="264" poster="http://video-js.zencoder.com/oceans-clip.png" data-setup='{"example_option":true}'>  
    <asp:Literal ID="ltSources" runat="server"></asp:Literal>
</video> 
```

在你的按钮事件中

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        StringBuilder sb = new StringBuilder();
        string mp4Url = "http://video-js.zencoder.com/oceans-clip.mp4";
        string webmUrl = "http://video-js.zencoder.com/oceans-clip.webm";
        string oggUrl = "http://video-js.zencoder.com/oceans-clip.ogv";

        sb.AppendFormat("<source id=\"mp4\" src=\"{0}\" type='video/mp4' />", mp4Url);
        sb.AppendFormat("<source id=\"webm\" src=\"{0}\" type='video/webm' />", webmUrl);
        sb.AppendFormat("<source id=\"ogg\" src=\"{0}\" type='video/ogg' />", oggUrl);

        ltSources.Text = sb.ToString();
    } 
```

最好是让用户控制它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T09:32:26.113

显然对于 Flash 后备你不能。不过，它确实适用于 Chrome 等浏览器。是时候在所有浏览器中弃用 Flash 了；）。

# java - java - 如何为java中的许多方法建立一个数据库连接？

> ID：11082046
> 
> 赞同：1
> 
> 时间：2012-06-18T11:40:14.227
> 
> 标签：java, database, mysql-connector

我有一个 DAO 类，它有许多操作数据库的方法。我为这样的所有方法使用一个连接对象（Database.connect() 返回一个连接对象）：

```
class ExampleDAOImpl implements ExampleDAO{
  private Connection con = null;

  public void method1 () {
   con = Database.connect();
   ....
   con.close();
  }

  public void method2 () {
   con = Database.connect();
   ....
   con.close();
  }

 public void method1 () {
   con = Database.connect();
   ....
   con.close();
  }
} 
```

这是为每个方法实例化一个新连接并关闭它的好习惯吗？我现在有错误说“连接关闭后不允许操作”虽然我在每个方法的开头初始化连接并在最后关闭它。或者最好使用相同的连接对象并有一个单独的方法在我调用它时关闭它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:56:59.960

类`ExampleDAOImpl`的对象不是线程安全的。因此，如果多个线程同时使用同一个`ExampleDAOImpl`对象并调用方法，则可能会发生一个关闭连接然后另一个线程尝试使用它的情况。

可能的解决方案：

*   确保`ExampleDAOImpl`永远不会在多线程上下文中使用对象。这仍然容易出错。
*   更好的建议：不要使用单个`Connection`对象，而是使用 a`ConnectionPool`在每个方法的开头获取连接，并在完成后释放它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:44:38.407

创建两个功能之一

```
 connection() 
```

另一个为

```
 disconnection() 
```

在每个方法中调用这些方法

```
 function method()
 {
  //call 

  connection();

  //code;

  //call 

     disconnection();
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:45:50.340

在每种方法中打开连接时建立全局连接有什么意义。当您从方法 1 调用方法 2 时，可能会发生这种情况，它会关闭方法 1 使用的连接

通常，良好的做法是在应用程序生命周期中创建一次连接并在应用程序关闭/退出时关闭连接，因为打开和关闭连接是有成本的.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T11:55:02.083

**您的代码不是线程安全的**，因为 jdbc 连接不能同时使用！请将 Connection con 更改为 ThreadLocal，并添加连接和断开两种方法。

代码将如下所示：

```
public class ConnectionHelper
{
private static ThreadLocal<Connection> con = new ThreadLocal<Connection>();

protected Connection getConnection()
{
if(con.get() ==null)
{
con.set(Database.connect());
}
return con.get();
}

protected Connection closeConnection()
{
if(con.get() !=null)
{
con.get().close;
}
}
} 
```

在您的 DAO 中： public void method1 () { try { Connection con = ConnectionHelper.getConnection(); } 最后 { ConnectionHelper.closeConnection(); } }

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T12:00:45.953

If you are using a Connection Pool implementation like [BoneCP](http://jolbox.com/), it is perfectly fine to open new connections for each method, just ensure that the method does not reference the instance variable, but rather a local variable.

On the other hand if you have no connection pool available and working with only one connection, you will have to find a suitable place to close that connection, since getting new ones without a pool is quite expensive.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-16T08:08:36.527

如果你想要干你的代码，那么使用抽象类和 lambdas

```
class ExampleDAOImpl implements ExampleDAO{

    // With lambdas
    public void method1 () {
       withConnection( (Connection con) -> {
           // do whatever you want with the connection
           // no need to open or close it
       })
    }

    // Old style abstract class
    public void method2 () {
       withConnection(new TaskExecutor(){
          void doStuff(Connection con){
             // do whatever you want with the connection
             // no need to open or close it
          }
       })
    }

    // This is the magic you have to add.
    private void withConnection(TaskExecutor executer){
        // Instantiate it to avoid race conditions
        // good thing this is the only place
        // you have to worry about opening and closing it
        Connection con = Database.connect();
        executer.doStuff(con);
        con.close();
    }

    private abstract class TaskExecutor{
        abstract void doStuff(Connection con);
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-27T11:19:40.213

我通过为所有方法创建一个连接解决了我自己的问题：

```
 public void generateTestData() throws SQLException, ClassNotFoundException, IOException {
    ConnectionToDatabase connectionToDatabase = new ConnectionToDatabase();
    try (Connection connection = connectionToDatabase.connectToDatabase()) {
        {
            generateGroups(connection);
            generateCourses(connection);
            assignCoursesToStudents(connection);
        }
    }
} 
```

也许对于 smb 会很有用:)

# java - Android 滚动到同一页面上的 ID

> ID：11082047
> 
> 赞同：1
> 
> 时间：2012-06-18T11:40:15.477
> 
> 标签：java, android, android-layout

我已经在谷歌上搜索了一个关于在同一页面上通过 ID 滚动到元素但没有成功的示例。我想知道如何使用以下示例完成？

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
       android:layout_width="fill_parent"
       android:layout_height="fill_parent" >

    <Button 
       android:id="@+id/pressMe"
       android:layout_height="wrap_content"
       android:layout_width="wrap_content"
       android:text="Press me to scroll to A">

    <ImageView
       android:id="@+id/scrollToMe"
       android:layout_height="100dp"
       android:layout_width="fill_parent"
       android:layout_marginTop="2000dp"
       android:background="#f00">

    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:43:48.843

您可以专注于该视图，我认为它会自动滚动到该视图。

我相信您还可以获得所需视图的坐标并滚动到它们。

# admob - Admob：偶尔插入我自己的替代广告

> ID：11082056
> 
> 赞同：0
> 
> 时间：2012-06-18T11:40:30.560
> 
> 标签：admob

是否可以像使用 Adsense 一样将广告插入其他网站以输入“空槽”的替代 URL？我已经深入研究了 Admob 设置以及 AdView 和 AdMobAdapterExtras 的方法，但没有发现任何类似的东西。如果确实没有这样的东西，是否有人实施了一种方法来实现以特定频率显示替代广告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:39:24.067

不确定您的确切意思，但在 AdMob 中您可以展示自家广告，这些是您自己的广告，您可以设置展示自家广告而不是真实广告的展示次数百分比，您在 AdMob 控制台中创建这些广告，没有代码改变。

# android - 在android中获取USSD的响应

> ID：11082057
> 
> 赞同：2
> 
> 时间：2012-06-18T11:40:35.287
> 
> 标签：android, android-service

我想通过代码在android中获得USSD消息的响应。我可以在android中获得USSD的响应吗？如果是，那么请举例来接收响应。我正在尝试这个链接 [在此处输入链接描述，](http://codepaste.ru/7545/)但我没有得到回应。

# c# - 如何从 url 读取 csv 文件？

> ID：11082062
> 
> 赞同：22
> 
> 时间：2012-06-18T11:40:53.373
> 
> 标签：c#, csv

我试图创建一个 Web 服务，它可以访问一个 URL，例如`www.domain.co.uk/prices.csv`然后读取 csv 文件。这可能吗？如何？理想情况下不下载 csv 文件？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-18T11:52:10.303

你可以使用：

```
public string GetCSV(string url)
{
    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
    HttpWebResponse resp = (HttpWebResponse)req.GetResponse();

    StreamReader sr = new StreamReader(resp.GetResponseStream());
    string results = sr.ReadToEnd();
    sr.Close();

    return results;
} 
```

然后拆分它：

```
public static void SplitCSV()
{
    List<string> splitted = new List<string>();
    string fileList = getCSV("http://www.google.com");
    string[] tempStr;

    tempStr = fileList.Split(',');

    foreach (string item in tempStr)
    {
        if (!string.IsNullOrWhiteSpace(item))
        {
            splitted.Add(item);
        }
    }
} 
```

虽然那里有很多 CSV 解析器，但我建议不要自己滚动。[FileHelpers](http://www.filehelpers.net/)是一个很好的工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T11:44:45.180

```
// Download the file to a specified path. Using the WebClient class we can download 
// files directly from a provided url, like in this case.

System.Net.WebClient client = new WebClient();
client.DownloadFile(url, csvPath); 
```

url 是带有 csv 文件的站点，而 csvPath 是您希望实际文件所在的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T11:45:43.243

在您的 Web 服务中，您可以使用 WebClient 类来下载文件，如下所示（我没有进行任何异常处理，没有任何 using 或 Close/Dispose 调用，只是想给出您可以使用和改进/改进的想法。 ..)

```
using System.Net;

WebClient webClient = new WebClient();
webClient.DownloadFile("http://www.domain.co.uk/prices.csv"); 
```

然后，一旦文件内容在您的服务的执行流程中可用，您就可以用它做任何您喜欢的事情。

如果您必须将其作为 Web 服务调用的返回值返回给客户端，您可以返回一个`DataSet`或任何其他您喜欢的数据结构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T12:03:30.340

[Sebastien Lorion 的 CSV Reader](https://github.com/Sjord/CsvReader)有一个接受 Stream 的构造函数。

如果您决定使用它，您的示例将变为：

```
void GetCSVFromRemoteUrl(string url)
{
    HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
    HttpWebResponse response = request.GetResponse() as HttpWebResponse;

    using (CsvReader csvReader = new CsvReader(response.GetResponseStream(), true))
    {
        int fieldCount = csvReader.FieldCount;
        string[] headers = csvReader.GetFieldHeaders();

        while (csvReader.ReadNextRecord())
        {
            //Do work with CSV file data here
        }
    }

} 
```

曾经流行的[FileHelpers](http://www.filehelpers.net/docs/html/M_FileHelpers_FileHelperEngine_1_ReadStream.htm)还允许您直接从流中读取。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T11:48:17.610

[WebRequest](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx)的文档有一个使用流的示例。使用流允许您解析文档而不将其全部存储在内存中

# c# - MVC3 - razor：传递查询字符串时出错

> ID：11082066
> 
> 赞同：2
> 
> 时间：2012-06-18T11:41:16.143
> 
> 标签：c#, asp.net-mvc-3, razor

我是 MVC3 剃须刀的新手。谁能帮助我为什么我在运行时遇到此错误。

**错误：** `Object reference not set to an instance of an object.` 它在 ActionLink 上中断。

**HTML 代码：**

```
@model Solution.User

@using (Html.BeginForm())
{
    @Html.TextBoxFor(model => model.Name, new {@id = "name-ref", @class = "text size-40"})
    @Html.ActionLink("Go Ahead", "Index", "Home", new {name = Model.name, @class = "button" })
} 
```

**控制器**

```
[HttpPost]
public ActionResult Index(string name)
{
    return View();
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:44:08.640

您尚未向视图提供模型。

定义一个类作为视图模型

```
public class User
{
    public string Name { get; set; }
} 
```

在您的控制器的操作中：

```
[HttpPost]
public ActionResult Index(User model)
{
    return View(model);
} 
```

MVC 的模型绑定器会自动为参数创建一个实例`model`并为您绑定`name`值`User.Name`。

**编辑**您的视图提到了一个名为`User`. 我改变了我的答案以反映这一点。

# bash - 如何允许用户在 Unix 中执行“sudo bash”？

> ID：11082069
> 
> 赞同：0
> 
> 时间：2012-06-18T11:41:32.383
> 
> 标签：bash, unix, ubuntu, sudo

我的 Ubuntu 系统中有一个名为“Teacher”的普通用户，它必须能够执行“sudo bash”命令？我怎样才能做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:43:37.237

使用命令将用户添加到 sudoers 列表`visudo`（您需要 root 权限才能执行此操作）。`sudo`以这种格式 ( )指定您要授予的用户`user ALL=(ALL) ALL`，因此

```
Teacher ALL=(ALL) ALL 
```

[如何将用户添加到 sudoers 列表](http://www.pendrivelinux.com/how-to-add-a-user-to-the-sudoers-list/)以及[如何将用户添加到 /etc/sudoers](http://www.ghacks.net/2010/01/06/how-to-add-users-to-etcsudoers/)提供了分步说明。

有关详细信息，请参阅[Visudo 手册](http://www.gratisoft.us/sudo/visudo.man.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:44:27.800

我认为这不是一个好主意，但如果你愿意，你可以简单地将这样的行添加到`/etc/sudoers`（使用`visudo`）：

```
Teacher    ALL=(ALL) /bin/bash 
```

# database - 如何将表格转换为 rdf 图？

> ID：11082072
> 
> 赞同：2
> 
> 时间：2012-06-18T11:41:39.557
> 
> 标签：database, properties, rdf, relational

让我们考虑一个关系数据库中的表，它有两个属性 x 和 y，以及两行：

1) x=一月，y=12
2) x=二月，y=3

如果我想在 rdf 图中翻译它，我会定义：

> *   表 ":table1" 的 URI/bnode；
> *   每行的一个bnode“ *：row1”，“*：row2”；

然后我应该将行连接到表：

> _:row1 rdf:type :table1
> _:row2 rdf:type :table1

最后，我应该以这种方式将每一行连接到它们的值：

> _:row1 :x "一月"
> _:row1 :y "12"
> _:row2 :x "二月"
> _:row2 :y "3"

到目前为止这是正确的吗？其他解决方案？

那么，现在，如何用一些其他信息来注释 x 和 y？
例如，我需要表示 x 指的是远程本体中的概念“月”（这是一个 owl:Class btw）。
我的第一个想法是直接使用 URI“myonto:Month”而不是“:x”，但我担心的是，使用远程 URI（实际上是本体的一个类）作为属性可能在概念上有些错误，或者至少可以更好地表示。

你有什么建议？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T12:05:25.477

这看起来像是从表格转换为三元组的一种非常典型的方式。

如果你的语法是 Turtle，你可以写

```
_:row1 :y 12 . 
```

这是整数 12，而不是字符串“12”。

您还可以有一个月份的 URI，例如

```
_:row1 :x month:january 
```

如你所说。

使用来自另一个本体的“远程”URI 很好，实际上是推荐的做法。毕竟它应该是一个Web系统。

# php - JOOMLA-在两列中显示一个类别下的文章，并带有阅读更多选项

> ID：11082074
> 
> 赞同：0
> 
> 时间：2012-06-18T11:41:57.270
> 
> 标签：php, joomla, joomla2.5

在 joomla 应用程序中，我有一个服务列表页面。在服务类别下添加了几篇文章。现在单击服务按钮，我想在两列布局中显示最新的 8 篇文章，大约 200 个字符和一个链接到每个字符的阅读更多按钮以显示整篇文章？我实现了，但现在可以使用博客类别列表属性以单一布局列出文章，但我无法进行两列显示..任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:07:44.693

据我所知，在创建菜单时，您应该在博客布局选项中指定没有列。它将页面划分为您在选项中定义的列，然后更改文章选项。

# c# - ASP.NET MVC 3 缓存持续时间

> ID：11082084
> 
> 赞同：1
> 
> 时间：2012-06-18T11:42:46.240
> 
> 标签：c#, asp.net-mvc-3, caching

我有一个托管在 IIS 上的 ASP.NET MVC 3 应用程序。这个应用程序正在使用 MemoryCache 处理内存中的一些数据，以帮助最大限度地减少对我的数据库的访问。我希望这些数据最多可以缓存一天。在我的代码中，我设置了以下内容：

```
List<MyObject> myItems = GetMyItems();
CacheItemPolicy cachePolicy = new CacheItemPolicy();
cachePolicy.AbsoluteExpiration = new DateTimeOffset(DateTime.Now.AddMinutes(1440));
Cache.Set("myCacheKey", myItems, cachePolicy); 
```

虽然我的缓存似乎正在工作。但是，它似乎并没有在预期的时间内停留在缓存中。是否需要在 web.config 中进行设置，如果有，需要什么设置？如果不是，是否需要设置 IIS 设置以启用更长的缓存持续时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:50:06.453

问题很可能在于您的应用程序池在不使用一段时间后正在回收。当应用程序池被回收时，您在内存中的所有内容都会丢失。

如果您需要更持久的缓存，则需要切换到不在进程中托管的内容。有许多商业和开源缓存服务；我建议选择其中之一。

这里只是一些缓存解决方案：

1.  [共享缓存](http://sharedcache.codeplex.com/)
2.  [AppFabric](http://www.microsoft.com/en-us/download/details.aspx?id=15848)
3.  [NCache](http://www.alachisoft.com/ncache/)
4.  [内存缓存.NET](http://sourceforge.net/projects/memcacheddotnet/)

在其他人中。

# c# - 如何在我的 C# 命令中使用 N 字符使我的程序更新阿拉伯语字段

> ID：11082085
> 
> 赞同：1
> 
> 时间：2012-06-18T11:42:48.173
> 
> 标签：c#, sql-server-2008

//如何使用 N 字符让我的程序更新阿拉伯语字段（名字="الاسم الاول"）...我的意思是

```
UPDATE  students SET first_name = N'الاسم' , last_name = N'الاسم الاخير' , father_name = N'الاسم الاخير' , mother_name = '', birth_date = '1/1/1990 12:00:00 AM' , education_level = '' , address = '' , notes = '' WHERE student_id = 33 
```

//此命令在 MSSQL-Server 中，但我试图在我的 C# 程序中使用 UPDATE 命令

```
 public string student(int id, string first_name, string last_name, string father_name, string mother_name, DateTime birth_date, string education_level, string address, 
         int[] phone_numbers, int[] old_phone_numbers, string notes)
    {
        SqlConnection SQLconnection = new SqlConnection(connectionString);
        SqlCommand command = SQLconnection.CreateCommand();
        SQLconnection.Open();
        command.CommandText = "UPDATE  students SET " +
        "first_name = " + "'" + first_name + "'" + " , last_name = " + "'" + last_name + "'" +
         " , father_name = " + "'" + father_name + "'" + " , mother_name = " + 
        "'" + mother_name + "'" + ", birth_date = " + "'" + birth_date + "'" +
        " , education_level = " + "'" + education_level + "'"  +
        " , address = " + "'" + address + "'" + " , notes = " + "'" + notes + "'" +
        " WHERE student_id = " + id ;
        command.ExecuteNonQuery();
        SQLconnection.Close(); 
```

//有没有比这些语法更好更清晰的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:25:31.380

最好的方法是使用[Parameters](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)。像这样：

```
command.CommandText = @"UPDATE  students SET 
first_name = @first_name, 
last_name = @last_name,
//... and so on...
WHERE student_id = @id";
command.Parameters.AddWithValue("@first_name", first_name);
command.Parameters.AddWithValue("@last_name", last_name);
//... and so no...
command.Parameters.AddWithValue("@id", id); 
```

# c# - 通过 string.Substring 操作文件路径

> ID：11082089
> 
> 赞同：0
> 
> 时间：2012-06-18T11:43:15.767
> 
> 标签：c#

我无法理解这两行以及为什么我们用子字符串切根：

```
root=AppDomain.CurrentDomain.BaseDirectory;
C.FileName = root.Substring(0, root.Length - 10) + "etat_selection_formula.rpt"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:56:51.507

您应该强烈考虑使用 System.IO.Path 类来操作文件路径，而不是直接操作字符串。它知道 UNC 路径的语义，不会将您与原始（显然是短视的）实现联系起来。当路径的第一部分不是正好 10 个字符时会发生什么？您的整个应用程序中断只是因为有人移动或重命名了文件夹。

MSDN 文档（包括使用示例）在这里：http: [//msdn.microsoft.com/en-us/library/system.io.path.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:50:58.820

没有必要正常进行。

有人只是使用它来替换另一个报告路径或页面名称。

在我看来，这是糟糕的代码，如果需要，应该将基本路径存储在一个常量中。这样会更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:51:12.520

```
root=AppDomain.CurrentDomain.BaseDirectory; 
C.FileName = root.Substring(0, root.Length - 10) + "etat_selection_formula.rpt"; 
```

第一行只是获取您的应用程序正在运行的目录。第二行从中删除最后 10 个字符并添加一些报告的名称（“etat_...”）。

至于你为什么这样做……好吧，如果你不知道——我也不知道。最佳猜测：您想要建立一个目录（在某个固定路径中），然后附加您的标准报告。

如果是这样：不好的做法 - 你应该重新考虑这一点。

# java - JTree 节点的可变工具提示

> ID：11082092
> 
> 赞同：3
> 
> 时间：2012-06-18T11:43:24.723
> 
> 标签：java, swing, tooltip, jtree, renderer

我有一个填充了一些（自定义）节点的 JTree。我有一个类是 DefaultTreeCellRenderer 的子类，使用“MyTreeCellRenderer”我可以为树中的每个节点设置工具提示。它工作正常：填充了 JTree，设置了单元格渲染器，所有添加的节点都有工具提示。问题是我不知道如何更改已填充树中某些节点的工具提示...怎么做？有没有办法为 JTree 中的一个节点“重新创建”单元格渲染器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T13:57:38.027

我做的！我没有使用扩展的 CellRenderer，而是使用了树的“getTooltipText”方法（我扩展了树）。这样我就能够根据鼠标指针在它上面的对象来控制工具提示的文本。

```
@Override
public String getToolTipText(MouseEvent evt) {
    if (getRowForLocation(evt.getX(), evt.getY()) == -1)
      return null;
    TreePath curPath = getPathForLocation(evt.getX(), evt.getY());
    TreeNode node = (TreeNode)curPath.getLastPathComponent();
    if(something)
        return "Empty";

    if(something_else)
        return "Not empty";

    return null;
  } 
```

在工具提示渲染之前，您还需要告诉工具提示管理器您的树：

```
ToolTipManager.sharedInstance().registerComponent(myTree); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T12:34:51.220

根据我对您问题的了解，您想触发树中特定节点的渲染。这应该通过`TreeModel`触发适当的事件（即treeNodesChanged）来执行。`DefaultTreeModel`为此目的提供了一个实用方法：[nodeChanged](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultTreeModel.html#nodeChanged%28javax.swing.tree.TreeNode%29)。

但是，JTree 中的工具提示是由 JTree 通过重新调用 TreeCellRenderer 主动处理的，这意味着无需执行任何操作即可更改工具提示。每次需要显示工具提示时，都会执行给定节点的渲染。请参阅此示例，该示例不断更新其工具提示（只需在树的节点周围移动鼠标）。

```
import java.awt.Component;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Enumeration;
import java.util.List;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.SwingUtilities;
import javax.swing.ToolTipManager;
import javax.swing.tree.DefaultTreeCellRenderer;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.TreeNode;

public class TestTree {

    public class MyTreeCellRenderer extends DefaultTreeCellRenderer {

        private int rendering = 0;

        @Override
        public Component getTreeCellRendererComponent(JTree tree, Object value, boolean sel, boolean expanded, boolean leaf, int row,
                boolean hasFocus) {
            Component cell = super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);
            if (cell instanceof JComponent) {
                ((JComponent) cell).setToolTipText("Hello " + rendering++);
                if (value instanceof Node && cell instanceof JLabel) {
                    ((JLabel) cell).setText(((Node) value).name);
                }
            }
            return cell;
        }
    }

    private JFrame f;
    private JTree tree;

    protected void initUI() {
        Node root = new Node("Root");
        fillTree(root, 5, "Some tree label");
        DefaultTreeModel model = new DefaultTreeModel(root);

        tree = new JTree(model);
        ToolTipManager.sharedInstance().registerComponent(tree);
        tree.setCellRenderer(new MyTreeCellRenderer());
        f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setLocationRelativeTo(null);
        f.add(new JScrollPane(tree));
        f.pack();
        f.setVisible(true);

    }

    public void fillTree(Node parent, int level, String label) {
        for (int i = 0; i < 5; i++) {
            Node node = new Node(label + " " + i);
            parent.addNode(node);
            if (level > 0) {
                fillTree(node, level - 1, label);
            }
        }

    }

    public class Node implements TreeNode {

        private Node parent;
        private List<Node> children;
        private String name;

        public Node(String name) {
            this.name = name;
            this.children = new ArrayList<TestTree.Node>();
        }

        public void addNode(Node child) {
            children.add(child);
            child.parent = this;
        }

        @Override
        public TreeNode getChildAt(int childIndex) {
            return children.get(childIndex);
        }

        @Override
        public int getChildCount() {
            return children.size();
        }

        @Override
        public Node getParent() {
            return parent;
        }

        @Override
        public int getIndex(TreeNode node) {
            return children.indexOf(node);
        }

        @Override
        public boolean getAllowsChildren() {
            return true;
        }

        @Override
        public boolean isLeaf() {
            return children.size() == 0;
        }

        @Override
        public Enumeration<Node> children() {
            return Collections.enumeration(children);
        }

    }

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTree().initUI();
            }
        });
    }

} 
```

# email - Plesk VPS 服务器 - 电子邮件转发

> ID：11082101
> 
> 赞同：0
> 
> 时间：2012-06-18T11:44:11.497
> 
> 标签：email, html-email, vps, plesk, forwarding

我的服务器的 Plesk 面板已升级到 10.4.4，自从此更改以来，我注意到有关电子邮件转发的一些小烦人的更改。

以前，电子邮件帐户将电子邮件转发给外部电子邮件提供商（例如 Google Mail）并保留电子邮件的 HTML 格式。但现在它只是将电子邮件显示为纯文本。如：

```
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable 
```

之后的内容，但有文字，没有图像等。

它们是设置还是其他东西，以便它将作为 HTML 而不是纯文本转发？我尝试过使用一些外部电子邮件，例如 Google、Hotmail 和 ISP 电子邮件帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:41:26.317

这一定是某种网络邮件设置。

如果您使用 Horde，您可以尝试使用选项 > 邮件 > 消息回复/转发 > [x] 回复/转发消息时，我们是否应该使用与原始消息相同的格式

# php - 当部分 id 更改时，在单独的 div 中显示查询结果

> ID：11082104
> 
> 赞同：0
> 
> 时间：2012-06-18T11:44:32.490
> 
> 标签：php, while-loop

我有一个查询

```
mysql_select_db($database_auditing, $auditing);
$query_sections3 = sprintf("SELECT tblanswer.questionid AS answerqid,
                                tblanswer.answerid AS answerid, 
                                tblanswer.answer AS answer, 
                                tblquestion.questionid AS questionid, 
                                tblquestion.questiontext AS questiontext, 
                                tblquestion.questionid AS quesid, 
                                tblquestion.questiontypeid AS questiontype, 
                                tblquestion.sectionid AS sectionid, 
                                tblscore.score1 AS score1, 
                                tblscore.score2 AS score2, 
                                tblscore.score3 AS score3, 
                                tblscore.score3 AS score3, 
                                tblscore.score4 AS score4, 
                                tblhelptext.helptext AS help, 
                                tblsection.sectionname AS sectionname 
                            FROM tblanswer 
                            LEFT JOIN tblquestion ON tblanswer.questionid = tblquestion.questionid 
                            LEFT JOIN tblscore ON tblquestion.questionid = tblscore.questionid 
                            LEFT JOIN tblhelptext ON tblquestion.questionid = tblhelptext.questionid 
                            LEFT JOIN tblsection ON tblquestion.sectionid=tblsection.sectionid 
                            WHERE tblanswer.auditid=%s 
                            ORDER BY tblquestion.sectionid",  
                        GetSQLValueString($_SESSION['auditid'], "int"));

$sections3 = mysql_query($query_sections3, $auditing) or die(mysql_error());

$totalRows_sections3 = mysql_num_rows($sections3); 
```

它从数据库中提取相关问题并构建与该站点相关的问卷。

每个问题都与某个部分相关。

所以我想要做的（并且失败得很惨）是让上面查询的结果出现在我用于调查问卷的手风琴的相关部分，而不必在每个 div 中使用嵌套查询（这导致我将给定结果输入数据库时​​出现问题）。

感谢所有为[这篇文章](https://stackoverflow.com/questions/9392583/mysql-fetch-array-group-results?rq=1)做出贡献的人。

我已经设法让手风琴在它自己的选项卡中搜索每个问题，但我想要实现的是在同一个选项卡中获取所有相关问题。

这是手风琴代码：

```
<?php $prevsub='';
$purpleronnie=0;
 while ($row_sections3=mysql_fetch_assoc($sections3)) {

     if ($row_sections3['sectionid'] !=$prevsub) {
         ?>

<div class="AccordionPanel">
<div class="AccordionPanelTab"><?php echo $row_sections3['sectionname'];?></div>
<div class="AccordionPanelContent">

<br />
<h5>Please answer the questions below to the best of your ability. For help, hover over the help icon, help text will appear in the box to the right of the screen.</h5>
<?php }?>

<table class="table2" align="center">
<tr>

<th><?php echo $row_sections3['questiontext'];?> <input type="hidden" name="qnumber[]" value="<?php echo $row_sections3['questionid'];?>" />
</th>
<td>
<input type="text" name="answerid[<?php echo $purpleronnie;?>]" value="<?php echo  $row_sections3['answerid'];?>" size="1" />

<?php if ($row_sections3['questiontype']=="1") { ?> 
<input type="text" size="25" name="answer[<?php echo $purpleronnie;?>]" value="<?php echo $row_sections3['answer'];?>" />

<?php } ?>

</table>    

</div>
</div>
<?php $purpleronnie++;
 if ($prevsub!=''&&$prevsub!=$row_sections3['sectionid'])
 $prevsub=$row_sections3['sectionid']; }?> 
```

有关如何更改上述内容以使手风琴 div 在每次部分 id 增加时更改的任何建议，而不是针对每个问题？

非常感谢戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:19:26.380

如果您能够按部分 id 对内容进行排序，那么您可以先构建一个由 section_id 划分的数据数组，然后您将遍历该数据并构建您的 div 等。下面的代码基于您的示例代码并且可能不是最优雅的，但它会做你想做的事，假设数据进来。如果这不是你所需要的 100%，它至少会给你一个开始的地方。另外，请注意结束标签。您错过了在发布的示例代码中关闭表格列和行。

```
$purpleronnie=0;
$data = array();

// sort your questions into "buckets" first
while ($row_sections3=mysql_fetch_assoc($sections3)) {
    // store that row of data in the correct sectioned off container
    $data[$row_sections3['sectionid']][] = $row_sections3;
}

// do nothing if we have no data! 
if(empty($data)) exit('woops! no results in this section!');

// now loop through these results and build your divs
echo '<div class="AccordionPanel">';

foreach($data as $sectionid => $rows){
    // grab the section name of the first row to use for the main section tabs
    $section_name = $rows[0]['sectionname'];
    echo 
        '<div class="AccordionPanelTab">'.$section_name.'</div>
         <div class="AccordionPanelContent">
            <br />
            <h5>Please answer the questions below to the best of your ability. 
                For help,hover over the help icon, help text will appear in the 
                box to the right of the screen.</h5>
            <table class="table2" align="center">';

    // now just loop through the rows in this section and fill in the stuff
    foreach($rows as $row){
      echo 
          '<tr>
               <th>'.$row['questiontext'].'
                   <input type="hidden" name="qnumber[]"
                          value="'.$row['questionid'].'"/>
               </th>
               <td>
                   <input type="text" name="answerid['.$purpleronnie.']" 
                          value="'.$row['answerid'].'" size="1" />';

        // do your conditional here
        if($row['questiontype']=="1") {
            echo '<input type="text" size="25" name="answer['.$purpleronnie.']" 
                         value="'.$row['answer'].'" />';
        }

        // make sure you close your rows!
        echo '</td></tr>';
    } // end foreach row of questions

    // close of question table and accordion panel content
    echo '</table></div>';

    // increment your counter thing
    ++$purpleronnie; 
}// end foreach sectionid

// close the accordian panel container
echo '</div>'; 
```

# python - 如何使用 python 在 x 轴或 y 轴标签之间添加更多刻度？

> ID：11082105
> 
> 赞同：1
> 
> 时间：2012-06-18T11:44:32.833
> 
> 标签：python, matplotlib

在这里您可以找到我的代码.. 基本上，python 默认情况下会返回一个带有 x-ticks 标签的图，例如 4,6,8...，而我想要的是 4,5,6,7,8..有什么帮助吗？非常感谢！！

```
from mpl_toolkits.axes_grid.parasite_axes import SubplotHost
import numpy as np
import matplotlib.pyplot as plt

fig = plt.figure(1)
host = SubplotHost(fig, 111)
fig.add_subplot(host)

c13=[1.79, 2.15, 3.81, 6.12, 8.28, 7.93, 8.07, 8.88]
c13014=[3.12, 3.28, 4.57, 7.24, 8.37, 9.26, 8.24, 8.25]
C13dflow=[0., 0., 0., 0., 8.06, 8.13]
d20=[5, 7, 8, 9, 10, 11, 12, 13]
d20low=[5, 7, 8, 10, 11, 13]

host.plot(d20, c13, 'ro')
host.plot(d20, c13, 'r-', label='f1=0.01 (0.09 in TDU)')
host.plot(d20, c13014, 'bo')
host.plot(d20, c13014, 'b--', label='f1=0.014 (0.126 in TDU)')
host.plot(d20low, C13dflow, 'go')
host.plot(d20low, C13dflow, 'g-.', label='f1=0.01 (0.01 in TDU)')
host.axis([4., 14., 0., 10.])

legend(loc=2)
plt.ylabel('$^{13}C$ pocket mass [$10^{-5}$ $M_{\odot}$]', fontsize=27)
plt.xlabel('Log(D20) [$cm^{2}$/s]', fontsize=27)
plt.title('Max $^{13}C$ pocket masses using double-f overshooting ', fontsize=27)
size=20
plt.xticks(size=size)
plt.yticks(size=size)
host.toggle_axisline(False)
host.grid(True) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:52:44.827

```
In [1]: import matplotlib.pyplot as plt

In [2]: plt.xticks?
Type:       function
Base Class: <type 'function'>
String Form:<function xticks at 0x2c1e050>
Namespace:  Interactive
File:       /usr/lib/pymodules/python2.7/matplotlib/pyplot.py
Definition: plt.xticks(*args, **kwargs)
Docstring:
Set/Get the xlimits of the current ticklocs and labels::

  # return locs, labels where locs is an array of tick locations and
  # labels is an array of tick labels.
  locs, labels = xticks()

  # set the locations of the xticks
  xticks( arange(6) )

  # set the locations and labels of the xticks
  xticks( arange(5), ('Tom', 'Dick', 'Harry', 'Sally', 'Sue') )

The keyword args, if any, are :class:`~matplotlib.text.Text`
properties. For example, to rotate long labels::

  xticks( arange(12), calendar.month_name[1:13], rotation=17 ) 
```

这建议您应该尝试类似`plt.xticks(range(round(d20[-1])+2), size=size)`.

# c++ - 为 AES3 (AES-2003) 制作 CRC 表

> ID：11082109
> 
> 赞同：2
> 
> 时间：2012-06-18T11:44:39.890
> 
> 标签：c++, crc, clearcase-remote-client

作为对我正在做的事情的一点了解，我正在尝试为 SDI 接口处理 AES/EBU 子帧。这不应该太重要。让我们抽象一下。

**标准文档的第 12 页**要求使用多项式进行 CRC 校验：G(x) = x^8 + x^4 + x^3 + x^2 + 1（或 x^0）。

该文件可以在这里找到：http: [//tech.ebu.ch/docs/tech/tech3250.pdf](http://tech.ebu.ch/docs/tech/tech3250.pdf)

正如您可能预期的那样，我想为给定的公式生成一个 CRC 表。我遇到了一个代码片段，它使用公式 G(x) = x^8 + x^2 + x^1 + x^0。

代码片段可以在这里找到： [http ://www.koders.com/cpp/fid9C544B36B8C41721691790197D38DAC91D2C29EF.aspx?s=crc#L8](http://www.koders.com/cpp/fid9C544B36B8C41721691790197D38DAC91D2C29EF.aspx?s=crc#L8)

可以修改公式（请参阅下面的修改版本）以与我的 AES3 CRC 一起使用吗？下面的工作吗？

```
// x^8 + x^4 + x^3 + x^2 + x^0 or (1)
void make_crc_table( void )
{
    int i, j;
    unsigned long poly, c;

    /* terms of polynomial defining this crc (except x^8): */
    static const byte p[] = {0,2,3,4};

    poly = 0L;

    for ( i = 0; i < sizeof( p ) / sizeof( byte ); i++ )
    {
        poly |= 1L << p[i];
    }

    for ( i = 0; i < 256; i++ )
    {
        c = i;

        for ( j = 0; j < 8; j++ )
        {
                            //ZeroDefect: This part has me worried.
            c = ( c & 0x80 ) ? poly ^ ( c << 1 ) : ( c << 1 );
        }
        crctable[i] = (byte) c;
    }
} 
```

任何提示/建议将不胜感激。

零缺陷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:11:19.503

据我所知，这只是将 CRC 反馈寄存器的所有可能状态转换（参见[Wikipedia](http://en.wikipedia.org/wiki/Computation_of_CRC)中的图表）编码到查找表中。

看起来您需要做的就是修改`p[]`数组以考虑您的分接位置。

# php - .htaccess 用于干净的 url

> ID：11082110
> 
> 赞同：0
> 
> 时间：2012-06-18T11:44:40.060
> 
> 标签：php, .htaccess

我有州列表和一个 php 文件，它将列出该州的所有城市。通过将 URL 参数作为`/common.php/?state=Texas`并列出所有城市。单击城市后，它会将 url 作为`/common.php/?city=Alanreed&state_code=TX`并显示城市信息。

我想使用 .htaccess 格式化 url，就像它应该采用的状态`state_name.html` `eg. Texas.html`和城市名称一样，`Texas/sugar_land.html`或者`tx/sugar_land.html`我如何使用 php 和 .htaccess 来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:50:46.530

```
RewriteEngine On
RewriteRule ^(.*)/(.*).html$ common.php/?state=$1&city=$2 [L]
RewriteCond %{REQUEST_URI} !^(.*/)?index\.html$ [NC]
RewriteRule ^(.*).html$ common.php/?state=$1 [L] 
```

`\w{2}`表示2字字符，所以重写为状态码，第二条规则是重写完整的状态名称，第三条是重写状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:14:01.993

尝试这样的事情：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteRule ^([a-z]{2})\.[hH][tT][mM][lL]?$ common\.php\?state_code=$1
    RewriteRule ^([a-zA-Z]+)\.[hH][tT][mM][lL]?$ common\.php\?state=$1

    RewriteRule ^([a-z]{2})/([_a-zA-Z]+)\.[hH][tT][mM][lL]?$ common\.php\?state_code=$1&city=$2
    RewriteRule ^([a-zA-Z]+)/([_a-zA-Z]+)\.[hH][tT][mM][lL]?$ common\.php\?state=$1&city=$2
</IfModule> 
```

也应该适用于 tx.htm 这假设您的 apache 启用了 mod_rewrite。

# internet-explorer - 防止在 Internet Explorer 8 中缓存页面

> ID：11082111
> 
> 赞同：6
> 
> 时间：2012-06-18T11:44:41.793
> 
> 标签：internet-explorer, browser-cache

在我的 IE8 页面上，我有一些通过管理面板更改的文本。例如：如果页面包含文本“hello world”，则 5 分钟后文本可能会有所不同，具体取决于管理员是否更改了它。

问题在于 IE8 缓存页面并再次显示相同的文本。如果我们清除缓存并刷新，文本就会更新。

我正在使用`<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">`标签来避免浏览器缓存。

我看到如果我每次访问网页时选择*Internet选项*→*浏览历史（设置） →问题就消除了；*但如果设置为自动，则会显示页面的缓存版本。

即使最终用户将 IE8 中的缓存选项设置为自动，是否有办法强制“无缓存”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T11:53:38.870

您可以使用以下标头强制 Internet Explorer 不缓存您的页面：

```
Expires: -1
Cache-Control: private, max-age=0 
```

↪ 请参阅[如何在所有浏览器中控制网页缓存？](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers/2068407#2068407)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-19T17:10:04.633

The best way to disable cache is to use a variable with random unique value in your URLs.

For example if your page's URL is:

`www.abc.com/hello.php`

make it like:

`www.abc.com/hello.php?randomVar=1SH232X-182N19-1929SK`

You can use the current timestamp as the value of `randomVar`. This way, the page will not be cached.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T14:38:34.873

当您通过 POST 方法而不是 GET 请求页面时，您可以确定它永远不会被缓存。User1419007 的回答也是正确的。

# jquery - jQuery、Shadowbox + Facebook JS SDK：访问属性 ownerDocument 被拒绝

> ID：11082124
> 
> 赞同：0
> 
> 时间：2012-06-18T11:45:54.550
> 
> 标签：jquery, facebook, iframe, shadowbox

在自定义 CMS 中，网站的编辑可以启用侧边栏框以显示最新的 Facebook-Fanpage-Posts 之一及其相关评论。

为了选择合适的帖子，通过 Shadowbox = as iFrame 打开一个表单。

在这个 iFrame 内

*   FB Javascript SDK 初始化
*   获取粉丝专页帖子（使用访问令牌）
*   下拉列表中填充了帖子（每个帖子的前 20 个字符）

当编辑器在下拉列表中选择其中一个帖子摘录时，另外两个输入字段（对用户输入禁用）将填充帖子 ID/完整帖子消息。

在点击 SAVE 按钮时，这两个值（之前已写入禁用输入字段的 id + 消息）应该被保存，并且 shadowbox 将关闭。

一切正常，除了 Firefox 中的保存部分：错误：访问 jquery-1.6.4.min.js 第 5151 行中的属性“ownerDocument”的权限被拒绝。

引发错误的代码（根据错误日志）：

```
 Sizzle.isXML = function( elem ) {
    // documentElement is verified for cases where it doesn't yet exist
    // (such as loading iframes in IE - #4833) 
    var documentElement = (elem ? elem.ownerDocument || elem : 0).documentElement;

return documentElement ? documentElement.nodeName !== "HTML" : false; 
```

};

主 CMS 页面和 iFrame 内容都来自同一个域，我想我可以排除跨域错误？

# cocos2d-iphone - cocos2d中如何使用openGL画线

> ID：11082131
> 
> 赞同：1
> 
> 时间：2012-06-18T11:46:30.600
> 
> 标签：cocos2d-iphone, line, draw

我喜欢画线，但是cocos2d里面的ccDrawLine有锯齿，怎么画出模糊的线，谁能帮帮我？

```
ccDrawLine( ccp(StartP.x, StartP.y), ccp(EndP.x, EndP.y) ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:32:37.050

我没有使用 ccDrawLine，但我用 Sprite 创建了一条线，并为它设置了动画（参见下面的代码）。通过这种方式，我能够使用制作的自定义线条图像（但没关系。我就是这样做的）。

如果你想坚持原语我想你应该**设置线原语的不透明度**（参见[这篇](https://stackoverflow.com/questions/9262245/ccdrawline-opacity)解释如何的帖子）然后你可以创建一个设置不透明度级别的动作序列（例如从 100% 的不透明度开始，然后75%，然后像我对图像所做的那样回到 100%，但使用上面链接中的方法）以获得模糊效果。

**使用图像的代码：**

```
CCSprite * string = [self getChildByTag:tag];
[string setOpacity:100]; 
NSMutableArray* frames = [[NSMutableArray alloc]initWithCapacity:3];
NSString*lineFrame = [NSString stringWithString:@"line0.png"];            

CCSpriteFrame* frame = [[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:lineFrame];
[frames addObject:frame];

lineFrame = [NSString stringWithString:@"line1.png"];
frame = [[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:lineFrame];
[frames addObject:frame];

lineFrame = [NSString stringWithString:@"line0.png"];
frame = [[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:lineFrame];
[frames addObject:frame];

CCAnimation* anim = [CCAnimation animationWithFrames:frames delay:0.1f];
CCAnimate* animate = [CCAnimate actionWithAnimation:anim];
//CCRepeatForever* repeat = [CCRepeatForever actionWithAction:animate];
[string runAction:animate];

[string setOpacity:75]; 
```

希望这会有所帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T08:01:34.113

```
#import "cocos2d.h"

@interface CClineSprite : CCLayer
{
    CCRenderTexture * renderTarget;
    NSMutableArray  * pathArray;
    CCSprite        * pathBrush;
    CGPoint           prePosition;
}

-(void)setLinePosition:(CGPoint)position;

-(void)setLineOpacity:(GLubyte) anOpacity;

-(void)setLineScale:(float) scale;

-(void)setLineColor:(ccColor3B) color;

@end

#import "CClineSprite.h"

@implementation CClineSprite

- (id) init
{
    self = [super init];

    if (self)
    {
        CGSize s = [[CCDirector sharedDirector] winSize];
        renderTarget = [CCRenderTexture renderTextureWithWidth:s.width height:s.height];
        [renderTarget setPosition:ccp(s.width/2, s.height/2)];
        [self addChild:renderTarget z:1];
        pathBrush = [CCSprite spriteWithFile:@"dots.png"];
        pathBrush.color = ccWHITE;
        [pathBrush setOpacity:100];
        [pathBrush setScale:0.5];
        pathArray = [[NSMutableArray alloc]init];
    }
    return self;
}

-(void)setLineOpacity:(GLubyte) anOpacity
{
    [pathBrush setOpacity:anOpacity];
}

-(void)setLineScale:(float) scale
{
    [pathBrush setScale:scale];
}

-(void)setLineColor:(ccColor3B) color
{
    [pathBrush setColor:color];
}

-(void)setLinePosition:(CGPoint)position
{
    [pathArray addObject:[NSValue valueWithCGPoint:position]];
    [self renderPath];
}

- (void) renderPath
{
    [renderTarget clear:0 g:0 b:0 a:0];
    [renderTarget begin];

    for (int i = 0; i < pathArray.count-1;i++)
    {
        CGPoint pt1;
        CGPoint pt2;

        [[pathArray objectAtIndex:i] getValue: &pt1];
        [[pathArray objectAtIndex:i + 1] getValue: &pt2];

        float distance = ccpDistance(pt1, pt2);

        if (distance > 1)
        {
            int d = (int)distance;
            for (int i = 0; i < d; i += 10)
            {
                float difx = pt2.x - pt1.x;
                float dify = pt2.y - pt1.y;
                float delta = (float)i / distance;

                [pathBrush setPosition:ccp(pt1.x + (difx * delta), pt1.y + (dify * delta))];
                [pathBrush visit];
            }
        }
    }
    [renderTarget end];
}

@end 
```

用法：

```
CClineSprite* streak = [CClineSprite node];
[self addChild:streak z:999];
[streak setLinePosition:associatedTurtleObject.position];
[streak setLineScale:0.4]; 
```

要动态更新或扩展行，只需使用

```
[streak setLinePosition:ccp(x,y)]; 
```

希望这会给您更多的使用灵活性

# tcl - 以下正则表达式试图匹配什么？

> ID：11082132
> 
> 赞同：0
> 
> 时间：2012-06-18T11:46:59.103
> 
> 标签：tcl, expect

以下正则表达式试图匹配什么： `expect -re "classType=(.{3})"`？这`(.{3})`在正则表达式中意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:48:37.510

在正则表达式中，`.`匹配任何字符，`{3}`是使某些内容重复三次的后缀（即，`...`），并且它周围的括号使其成为*捕获*组。（这意味着匹配的输入将在`$expect_out(1,string)`之后可用。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:50:41.070

同`(...)`--- 三个字符。

# xslt - 在 xslt 中分配一个变量

> ID：11082134
> 
> 赞同：3
> 
> 时间：2012-06-18T11:47:05.097
> 
> 标签：xslt

我有以下 xsl

```
<Root>
    <child>
       <Book name="Title" value="hailey" />
       <Book name="Title" value="After death" />
       <Book name="Price" value="100" />
    </child>
    <child>
       <Book name="Title" value="After death" />
       <Book name="genre" value="fiction" />
    </child>
</Root> 
```

我想遍历“子”节点，如果出现“标题”（至少一次），我想设置一个变量。我在 xslt 中使用以下代码

```
<xsl:variable name="flag">
        <xsl:for-each select="/Root/Child" >
            <xsl:for-each select="./Book" >
                   <xsl:if test="./@name = 'Title'">
                    <xsl:value-of select="'true'"/>                     
                </xsl:if>
            </xsl:for-each>
        </xsl:for-each>

</xsl:variable> 
```

问题是变量“flag”设置为“truetruetrue”时的值，而我希望它只是“true”。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T11:59:04.170

**No need for iteration or conditional instructions at all. Just use this one-liner**:

```
<xsl:variable name="vYourName" select="boolean(/Root/Child/Book[@name='Title'])"/> 
```

**For this particular XML document this can be expressed even shorter**:

```
<xsl:variable name="vYourName" select="boolean(/*/*/*[@name='Title'])"/> 
```

**Explanation**:

Both definitions define the variable named `"vYourName"` to be `true()` exactly when at least one of the `Root/Child/Book` elements has a `Title` attribute.

**Do note**:

1.  By definition the function [**`boolean`**](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-boolean) ($ns) returns true if and only if the nodeset `$ns` is non-empty.

2.  The string representation of the boolean value `true()` is the string `"true"`.

**Update**:

In a comment, the OP asked:

> if there is atleast one occurence, is there a way to assign the "value" of that to the variable?

**The answer**: Yes, if by "the value" you mean *the first* `value` attribute, use:

```
 <xsl:variable name="vYourName" select="(/*/*/*[@name='Title'])[1]/@value"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:51:05.390

```
<xsl:variable name="flag">
   <xsl:if test="/Root/Child/Book/@name = 'Title'">
      <xsl:value-of select="'true'"/>                     
   </xsl:if>
</xsl:variable> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:54:50.490

**如果您喜欢坚持使用您的代码，可以使用**

```
<xsl:variable name="flag">
    <xsl:for-each select="//Book" >
        <xsl:if test="@name = 'Title'">
            <xsl:value-of select="'true'"/>
        </xsl:if>
    </xsl:for-each>
</xsl:variable> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T11:50:27.823

未经测试（并且由于 Lucero 的评论而更新）**...**

```
<xsl:variable name="flag">
  <xsl:if test="count(/Root/Child/Book[@name='Title'])>0">true</xsl:if>
</xsl:variable> 
```

# php - 如何使用php替换iframe html标签的宽度和高度？

> ID：11082137
> 
> 赞同：0
> 
> 时间：2012-06-18T11:47:27.873
> 
> 标签：php

如果我有以下代码并使用 php，如何更改宽度/高度：

```
<iframe src="http://player.vimeo.com/video/43598400" 
        webkitallowfullscreen="" 
        mozallowfullscreen="" 
        allowfullscreen="" 
        frameborder="0" 
        height="300" 
        width="500">
</iframe> 
```

到：

```
<iframe src="http://player.vimeo.com/video/43598400" 
        webkitallowfullscreen="" 
        mozallowfullscreen="" 
        allowfullscreen="" 
        frameborder="0" 
        height="400" 
        width="680">
</iframe> 
```

用法非常有限，我想要一个简单的替换解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:53:13.330

像这样的东西：

```
$iframe = '<iframe src="http://player.vimeo.com/video/43598400" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" frameborder="0" height="300" width="500"></iframe>';

$newWidth = 680;
$newHeight = 400;

$iframe = str_replace('height="300"', 'height="' . $newHeight . '"', $iframe);
$iframe = str_replace('width="500"', 'width="' . $newWidth . '"', $iframe); 
```

假设您确定原始宽度和高度将始终为 500*300。如果没有，您可以尝试使用 preg_match()

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T11:52:40.240

假设调用了保存您的字符串的变量，请`$iframe`尝试使用

```
str_replace('300', '400', $iframe);
str_replace('500', '680', $iframe); 
```

当然，这是最硬编码的可能解决方案 - 如果这对您没有帮助，请向我们展示更多此 iframe 代码所在的上下文

# c - 检测堆栈覆盖错误

> ID：11082138
> 
> 赞同：1
> 
> 时间：2012-06-18T11:47:29.750
> 
> 标签：c, debugging, arm, cortex-m3

我正在使用 IAR EWARM IDE 和编译器为 Cortex-M3 嵌入式微控制器 (Atmel SAM3S) 开发软件。我怀疑由于某种原因，我有缓冲区溢出或内存泄漏，导致堆栈损坏，因为我突然发现自己卡在了代码空间之外。

我问这个问题的原因是，很难找出究竟是什么导致了这个混乱，我想知道当你想找出问题的原因时你使用了哪些技术。

您是否使用内存调试器、在线跟踪调试硬件等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T12:13:08.663

您应该尝试使用金丝雀值。基本上就是这样 - 假设你有一些`struct`：

```
struct foo {
    unsigned long bar;
    void * baz;
}; 
```

修改它，使它看起来像这样：

```
struct foo {
    unsigned long canary1;
    unsigned long bar;
    void * baz;
    unsigned long canary2;
}; 
```

初始化 时`struct`，将一些任意值放入`canary1`和`canary2`中。每当您对 进行一些操作时`struct`，请检查值是否保持不变。这样，如果您有缓冲区溢出或堆栈粉碎，您将检测到它。您可以使用自动变量执行相同的内部函数：

```
int foo(int bar) {
      unsigned long canary1 = 0xDEADBABE;
      char baz[20];
      unsigned long canary2 = 0xBAD0C0DE;
      ...
} 
```

等等。不要忘记在您之前检查这些值是否保持不变`return`。此外，如果您可以让代码始终跳转到同一位置，请尝试将一些代码放在那里（或断点）并获取堆栈跟踪。

GCC 知道如何自己添加这些金丝雀值，但我不知道您的编译器是否可以这样做。但你仍然可以手动完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T11:52:27.917

程序计数器是一个寄存器，因此它不能被“覆盖”。正如您所说，可能发生的情况是堆栈被覆盖，然后您执行返回指令，该指令从堆栈中读取无效的返回地址，从而导致跳转到 la-la-land。

我最喜欢的调试方法是打印出来，当然这在嵌入式目标上可能很困难。第二好的方法是逐步检查可疑的例程。

您还应该调查已知会导致跳转的事物，例如中断服务例程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T14:41:39.820

我在 STM32 上使用 IAR EWARM 时遇到了类似的问题。内存转储、反汇编、金丝雀，都一无所获。最后回滚到 EWARM 的早期版本，问题就消失了。我向 IAR 支持发送了一条消息，但从未收到回复。抱歉，我不记得这是哪个版本的 EWARM。这是之前的几个项目。

我会保持一个内存窗口打开并首先尝试金丝雀测试。如果它仍然随机跳出代码空间，请尝试安装旧版本的 EWARM。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T14:57:57.113

我可以补充的一件事是，对于 ARM 芯片，某处可能存在 BL 而不是 BX 或 BLX，从而导致芯片进入错误的 Thumb/ARM 模式。不像后来的芯片那么常见，但仍然......

当我发现无处跳转时，我会寻找错误的函数指针表、任何中断向量表的覆盖，以及是最容易测试的堆栈溢出。将已知字节值放入您的堆栈区域，当崩溃发生时，查看调试器还剩下多少堆栈。如果没有，那就去吧。

我也会按照标准查看过去 X 天的内容发生了什么变化，以尝试隔离任何问题。最后，只需从代码中 printf 尝试缩小错误跳转发生的位置。如果您可以将其归结为一两个函数，您可以跟踪汇编程序并很快查看它是编译器问题、内存问题还是中断问题。祝你好运！

# python - 从文本文件中读取 ID3 标记和值

> ID：11082144
> 
> 赞同：0
> 
> 时间：2012-06-18T11:47:52.290
> 
> 标签：python, python-2.7

假设我有以下列表：

```
ID3_tag = ['Title','Artist','Album','Track'] 
```

我有一个名为“This Boy.song”的文件，其内容如下：

```
[Title: This Boy]
[Artist: The Beatles]
[Album: Meet The Beatles!]
[Track: 3] 
```

如何返回 This Boy.song 中特定 ID3 标签的值？例如：

```
>>> song = get_file_str('This Boy.song')
>>> search_ID3(Artist,song)
    The Beatles 
```

编辑：忘了提。我知道要到达适当的线路，我必须使用

```
def search_ID3(tag,file):
    for tag in ID3_tags:
        if tag in file:
            block 
```

或类似的东西（或者我可能会完全错误地解决这个问题）。在 This Boy.song 中，我知道每个项目都在一个列表中，所以也许我使用了一些列表功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:59:38.337

你知道那个文件格式的名字吗？您应该能够为文件找到一个解析器，它将为您提供适当的 Python 结构（例如 dict 或 multidict）的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:04:57.397

这是否符合您的要求？

```
def get_file_str(filename):
    ID3_tag = ['Title','Artist','Album','Track']
    out = ['','','','']
    with open(filename) as f:
        for line in f:
            try:
                (tag, value) = line.split(':')
                tag = tag.strip('[ ]\n')
                value = value.strip('[ ]\n')
                i = ID3_tag.index(tag)
                out[i] = value
            except Exception as e:
                print('Invalid data:', e)
                return -1
    return out

print(get_file_str('thisboy.song')) 
```

输出：

```
['This Boy', 'The Beatles', 'Meet The Beatles!', '3'] 
```

**编辑**：您刚刚编辑了问题以搜索特定标签，而不是全部返回。这当然可以通过添加另一个参数来轻松实现，如果等于则`desiredTag`返回。`value``tag``desiredTag`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:49:03.740

```
>>> from collections import defaultdict
>>> tags = defaultdict(list)
>>> with open('test.txt') as f:
...     for line in f.readlines():
...         if line.strip():
...              parts = line.split(':')
...              tags[parts[0].strip()[1:]].append(parts[1].strip()[:-1])
...
>>> tags['Artist']
['The Beatles'] 
```

# google-apps-script - urlFetch 服务条款和配额 - 使用 Google Docs 监控网站正常运行时间

> ID：11082148
> 
> 赞同：1
> 
> 时间：2012-06-18T11:48:05.017
> 
> 标签：google-apps-script, urlfetch

我一直在对监控网站的正常运行时间/停机时间的 Google Docs 电子表格（和底层脚本）进行改进。您可以在此处查看说明并复制电子表格：http: [//agileadam.com/google-docs-uptime-monitor](http://agileadam.com/google-docs-uptime-monitor)

我是一名网络开发人员，需要监控 199 个（数量将会增长）网站的正常运行时间。这是多年发展的积累——我们控制的所有网站。所以，我有一个 5 分钟的时间驱动触发器来运行我的函数，它遍历每个 URL 并使用 urlFetch 检查 HTTP 状态。

我有两个问题：

1.  这是否违反了 Google 文档服务条款？

2.  早上 5 点 57 分，我收到一条消息：“异常：一天内调用的服务次数过多：urlfetch。” 根据[https://docs.google.com/macros/dashboard](https://docs.google.com/macros/dashboard)，我的帐户限制为 20,000。根据我的计算，我应该只有大约 14,000 次使用。为什么要轰炸我？

我将删除许多相似的域名（我想我不需要监视同一站点的 .com 和 .org），并且我已将触发器更改为每 15 分钟运行一次。这将大大减少执行次数。

# android - 应用程序意外停止请重试？

> ID：11082152
> 
> 赞同：1
> 
> 时间：2012-06-18T11:48:22.507
> 
> 标签：android, android-activity

当我在下面运行代码时，它会发出一条消息：

```
 the application stopped unexcepctedlly pleas try again 
```

任何人都可以帮助解决这个问题。

```
public class TheNewActivity extends Activity {
    /** Called when the activity is first created. */
    int counter;
    Button sub,add;
    TextView display;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        add=(Button) findViewById(R.id.button1);
        display=(TextView) findViewById(R.id.dis);

     add.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            counter++;
            display.setText("your total is"+counter);
        }
    }); 
     sub.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter--;
            display.setText("your total is"+counter);
        }
    });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:50:34.140

你还没有实例化“sub”.......并且你正在实现它`onClickListner()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:50:42.427

您需要在设置 onClickListener 之前添加它：

```
sub=(Button) findViewById(R.id.urbtnname); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T11:50:47.590

您尚未初始化 Button `sub`。添加您的代码：

```
sub=(Button) findViewById(R.id.button2); // if button2 is the id for sub in xml file. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T11:51:32.270

这里没有像这样的子按钮参考 add=(Button) findViewById(R.id.button1);

谢谢

# iphone - 将图像发布到特定频道

> ID：11082153
> 
> 赞同：0
> 
> 时间：2012-06-18T11:48:28.513
> 
> 标签：iphone, mobli

我正在使用您的 api，并且我已成功调用将照片上传到我的个人资料。现在我正在尝试发布到特定频道，我需要为频道 ID 设置什么值....尝试了这个值：“/channel/{channel_id}”“channel_id”“channel”

```
 NSString *mediaCaption = [self.uploadedMediaInfo valueForKey:@"text"];
UIImage *img = viewImage;//[self.uploadedMediaInfo valueForKey:UIImagePickerControllerOriginalImage];

NSMutableDictionary *uploadMediaParams = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                          @"jpg",                       @"extension",
                                          /*@"215913",                   @"/channel/{channel_id}",*/
                                          /*mediaCaption,                 @"text",*/
                                          nil];

// Additional parameters relevant to image upload are also added in the postImage request method
[self postImage:img params:uploadMediaParams delegate:self];
[self.uploadedMediaInfo removeAllObjects]; 
```

[http://developers.mobli.com/documentation/authentication](http://developers.mobli.com/documentation/authentication)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:34:54.717

请使用 channels_list[] ：移动频道 ID 的数组

# javascript - 文本框上的 OnChange 事件调用两次

> ID：11082155
> 
> 赞同：0
> 
> 时间：2012-06-18T11:48:33.147
> 
> 标签：javascript, jquery, asp.net

我正在使用 jQuery 动态添加 onchange 事件。当我更改文本框时，事件会触发两次，两次警报框有时会出现 3 次。

```
if(Country.toUpperCase().indexOf("MALAYSIA")!=-1)
{    debugger;
    if(productDesc.toUpperCase().indexOf("SV")!=-1)
    {                   
        $("#<%=txtlAxis.ClientID%>").change(function()
        {         
                if(productDesc.toUpperCase().indexOf("SV")!=-1)
                {                           
                alert('2');
                }
        });  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:06:47.300

你可以在这段代码中使用 unbind 吗？

```
if(Country.toUpperCase().indexOf("MALAYSIA")!=-1)
   {  
        if(productDesc.toUpperCase().indexOf("SV")!=-1)
        {       
            $("#<%=txtlAxis.ClientID%>").unbind();
            $("#<%=txtlAxis.ClientID%>").change(function()
            {         
                 if(productDesc.toUpperCase().indexOf("SV")!=-1)
                 {                           
                    alert('2');
                 }
            });  
        }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:23:09.700

它是固定的。非常感谢你的回复。MMK unbind() 是正确的。我也使用了 Kanavi 的 .attr("onchange", "") 但没用。在 IE8 和 CROME 中检查。

是的，Kanavi，我会将其纳入一个变量 thx 以供您建议。StackOverflow 摇滚。

```
 if(Country.toUpperCase().indexOf("MALAYSIA")!=-1)
       {    
            if(productDesc.toUpperCase().indexOf("SV")!=-1)
            {                  
                $(".clstxtlAxis").unbind("change"); 
                $(".clstxtlAxis").change(function()
                {             
                     if(productDesc.toUpperCase().indexOf("SV")!=-1)
                     {
                        alert("2");                                                   
                     }
                }); 
             }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:11:00.153

下面试试。`Unbind`OnChange 事件并在运行中再次添加它。

```
if(Country.toUpperCase().indexOf("MALAYSIA")!=-1)
{    
    if(productDesc.toUpperCase().indexOf("SV")!=-1)
    {      
        $('.txtlAxisClass').attr("onchange", "");             
        $("#<%=txtlAxis.ClientID%>").change(function()
        {         
             if(productDesc.toUpperCase().indexOf("SV")!=-1)
             {                           
                alert('2');
             }
        });  
    }
} 
```

您还可以`Downgrading the Performance`通过再次重新评估下面提到的表达式。所以把它放在变量中。

`productDesc.toUpperCase().indexOf("SV")`

# html - 带阴影的垂直线

> ID：11082156
> 
> 赞同：3
> 
> 时间：2012-06-18T11:48:35.393
> 
> 标签：html, css

我想在整个页面上创建一个垂直线阴影，如下所示：http: [//i.stack.imgur.com/fsJCE.png](http://i.stack.imgur.com/fsJCE.png)。我已经尝试过 box-shadow 但是我仍然在顶部有一个阴影，我只希望它在图像的右侧。

我已经尝试过：

```
<html>
<head>
    <title>Box Shadow Test</title>
    <style>
    body,
html {
margin:0;
padding:0;
color:#000;
background:#52667B;
}
    wrapper {
        width:750px;
margin:0 auto;
background:#99c;
    }

    #main {
        padding-left: 50px;
float:left;
width:500px;
 -webkit-box-shadow: -4px 0px 5px -2px #000 ;
}
#sidebar {
float:left;
width:250px;

}
    </style>
</head>
<body>
    <div class="wrapper">
        <div id="sidebar" class="navigation">

    <ul>
        <li><a href='home'>Nieuws</a></li>
        <li><a href='events'>Duiken</a></li>
        <li><a href='places'>Duikplaatsen</a></li>
        <li><a href='reports'>Duikverslagen</a></li>
        <li><a href='forum'>Forum</a></li>
        <li><a href='gallery'>Galerij</a></li>
        <li><a href='faq'>FAQ</a></li>
        <li><a href='contact'>Contact</a></li>
    </ul>

        </div>
        <div id="main">
            Lorem ipsum aute commodo cupidatat veniam occaecat esse culpa exercitation dolore magna commodo enim eiusmod laboris est dolor laboris velit sint voluptate id cillum nisi quis aliqua ut labore consectetur Duis nisi occaecat do et cupidatat in aute labore nulla consequat dolore dolor consectetur cupidatat fugiat eiusmod tempor anim eiusmod dolor proident ex aute sunt Excepteur cupidatat fugiat nostrud irure id laboris ad enim nulla deserunt quis eu ullamco consectetur tempor nostrud magna quis ut ex minim id cupidatat amet culpa amet nisi Duis Duis irure irure ullamco est dolor culpa esse id in ut reprehenderit in esse pariatur in nostrud fugiat labore ut irure do in consectetur incididunt ullamco sint do occaecat dolor Ut pariatur non sint ut in incididunt id Duis aute nulla et eu ullamco in tempor non nisi reprehenderit sit reprehenderit et tempor officia sunt pariatur aliquip in pariatur labore veniam ad adipisicing velit aliqua aliqua cillum esse Duis pariatur eiusmod sed consectetur in cillum laborum dolor enim laborum qui velit pariatur adipisicing id aute cupidatat cupidatat quis anim tempor ad labore ad sunt minim laborum exercitation labore sunt quis nulla consequat Duis deserunt deserunt eiusmod aliqua sed in qui occaecat do velit reprehenderit dolor dolor cillum veniam dolor consectetur est commodo deserunt eu amet velit velit commodo est reprehenderit aute. 
        </div>
    </div>

</body>
</html> 
```

但正如你在这张图片上看到的那样：http: [//i.stack.imgur.com/01My9.png](http://i.stack.imgur.com/01My9.png)你在底部仍然有一些阴影。

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:07:48.093

首先，使用`box-shadow`代替 `-webkit-box-shadow`. 然后，只需使用这些值，直到你得到完美的阴影。

我试过这个：

> 盒子阴影：-5px 0px 5px -4px #000 ;

然后添加`position:absolute;`和`top:0`_`bottom:0;``#main`

演示：http:
[//jsfiddle.net/magq5/1/](http://jsfiddle.net/magq5/1/)

# gnuplot - gnuplot条形图中不同颜色的条形图？

> ID：11082159
> 
> 赞同：6
> 
> 时间：2012-06-18T11:48:43.320
> 
> 标签：gnuplot

我有一个非常简单的数据集：

```
Critical 2
High 18
Medium 5
Low 14 
```

用这个数据集在 gnuplot 中创建一个条形图很容易，但是所有的条形图都是相同的颜色。我想要它，以便关键是黑色，高是红色等，但似乎几乎没有任何在线教程可以做到这一点。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T12:24:33.237

```
set xrange [-.5:3.5]
set yrange [0:]
set style fill solid
plot "<sed 'G;G' test.dat" i 0 u (column(-2)):2:xtic(1) w boxes ti "Critical" lc rgb "black",\
     "<sed 'G;G' test.dat" i 1 u (column(-2)):2:xtic(1) w boxes ti "High" lc rgb "red" ,\
     "<sed 'G;G' test.dat" i 2 u (column(-2)):2:xtic(1) w boxes ti "Medium" lc rgb "green",\
     "<sed 'G;G' test.dat" i 3 u (column(-2)):2:xtic(1) w boxes ti "Low" lc rgb "blue" 
```

这会占用`sed`您的文件的三倍空间，以便 gnuplot 将每一行视为不同的数据集（或“索引”）。您可以像我所做的那样使用`index <number>`或简称分别绘制每个索引。`i <number>`此外，索引号是可用的，`column(-2)`这就是我们如何让盒子正确间隔的方式。

可能更干净（仅限 gnuplot）的解决方案是使用过滤器：

```
set xrange [-.5:3.5]
set yrange [0:]
set style fill solid
CRITROW(x,y)=(x eq "Critical") ? y:1/0
HIGHROW(x,y)=(x eq "High") ? y:1/0
MIDROW(x,y) =(x eq "Medium") ? y:1/0
LOWROW(x,y) =(x eq "Low") ? y:1/0
plot 'test.dat' u ($0):(CRITROW(stringcolumn(1),$2)):xtic(1) w boxes lc rgb "black" ti "Critical" ,\
     '' u ($0):(HIGHROW(stringcolumn(1),$2)):xtic(1) w boxes lc rgb "red" ti "High" ,\
     '' u ($0):(MIDROW(stringcolumn(1),$2)):xtic(1) w boxes lc rgb "green" ti "Medium" ,\
     '' u ($0):(LOWROW(stringcolumn(1),$2)):xtic(1) w boxes lc rgb "blue" ti "Low" 
```

此解决方案也不依赖于数据文件中的任何特定顺序（这就是为什么我更喜欢它而不是其他解决方案。我们在这里使用`column(0)`（或`$0`）完成间距，它是数据集中的记录号（在这种情况下，电话号码）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-27T18:57:03.207

这是使用该`linecolor variable`选项执行此操作的方法。

如果您知道这些行始终处于相同的已知顺序，则可以使用行号（第零列，`$0`）作为线型索引：

```
set style fill solid noborder
set linetype 1 lc rgb 'black'
set linetype 2 lc rgb 'red'
set linetype 3 lc rgb 'yellow'
set linetype 4 lc rgb 'green'

set yrange [0:*]
unset key
plot 'alerts.txt' using 0:2:($0+1):xtic(1) with boxes linecolor variable 
```

如果顺序可能不同，您可以使用 gnuplot 样式的索引函数，该函数从以空格分隔的单词的字符串中确定警告级别的索引：

```
alerts = 'Critical High Medium Low'
index(s) = words(substr(alerts, 0, strstrt(alerts, s)-1)) + 1

set style fill solid noborder
set linetype 1 lc rgb 'black'
set linetype 2 lc rgb 'red'
set linetype 3 lc rgb 'yellow'
set linetype 4 lc rgb 'green'

set yrange [0:*]
unset key
plot 'alerts.txt' using 0:2:(index(strcol(1))):xtic(1) with boxes linecolor variable 
```

![在此处输入图像描述](../Images/c82d8fbf5c62b68cf6e9fb84e8d34653.png)

# webgl - 在 webgl (xtk) 中为卷绘制轮廓

> ID：11082160
> 
> 赞同：1
> 
> 时间：2012-06-18T11:48:48.590
> 
> 标签：webgl, xtk

我想实现用户可以浏览体积的切片，但为了保证更多的方向，我想绘制代表体积尺寸的立方体的轮廓。

我认为我需要做的：

**1）**获取体积的尺寸

**2)**开始画线，例如从 [0,0,0] 到 [0,1,0] 从 [0,1,0] 到 [1,1,0] 以及从 [1,1,0] 到 [1 ,0,0] 并再次返回 [0,0,0] 等等......

有没有一种简单的方法可以在 xtk 中画一条线？[喜欢在这里](http://jsfiddle.net/gh/get/library/pure/xtk/lessons/tree/gh-pages/09/#run)使用类似 sphere-constructor 的东西吗？

**示例（黑色轮廓）：**

[立方体](http://prosjekt.ffi.no/unik-4660/lectures04/chapters/jpgfiles/vol_slice.jpg)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:35:01.223

在`X.slice`中，我们像这样创建当前切片的边框。

```
var borders = new X.object();
borders._points.add(point0.x, point0.y, point0.z); // 0
borders._points.add(point1.x, point1.y, point1.z); // 1
borders._points.add(point1.x, point1.y, point1.z); // 1
borders._points.add(point4.x, point4.y, point4.z); // 4
borders._points.add(point4.x, point4.y, point4.z); // 4
borders._points.add(point2.x, point2.y, point2.z); // 2
borders._points.add(point2.x, point2.y, point2.z); // 2
borders._points.add(point0.x, point0.y, point0.z); // 0
borders._normals.add(0, 0, 0);
borders._normals.add(0, 0, 0);
borders._normals.add(0, 0, 0);
borders._normals.add(0, 0, 0);
borders._normals.add(0, 0, 0);
borders._normals.add(0, 0, 0);
borders._normals.add(0, 0, 0);
borders._normals.add(0, 0, 0);
borders._color = [1, 0, 0];

# set the drawing type to lines
borders._type = X.displayable.types.LINES;

borders._linewidth = 2; 
```

这是目前内部使用的一个示例，但应该可以对公共 API 做同样的事情。

啊，我只是看到`type`getter/setter 还不存在。我们需要创建它以启用在外部设置类型。所以我刚刚为那个[https://github.com/xtk/X/issues/62创建了一个问题](https://github.com/xtk/X/issues/62)

随意贡献它:)应该很容易:)

# c++ - g ++，需要链接器警告/错误以进行多模板专业化

> ID：11082161
> 
> 赞同：12
> 
> 时间：2012-06-18T11:48:55.110
> 
> 标签：c++, templates, linker, g++

想象一下你有一个文件啊

```
 #include <iostream>

template<typename T> struct A{  
  int magic;
  A():magic(1234){}
  void f(){std::cout<<"default f"<<magic<<std::endl;}
};

void f(A<int>* a); 
```

然后函数 f 在“a.cpp”中定义

```
 #include "a.h"
void f(A<int>* a){
  a->f();
} 
```

最后，“main.cpp”特化模板，然后使用 f

```
#include "a.h"
template<> struct A<int>{   
};

int main(){
  A<int> a;
  f(&a);

} 
```

很明显，编译器对ao使用了非专门化的版本，对main.o使用了专门化的版本，即A恰好有两种不同的实现。在执行时，f只能打印garbage / segfault，因为传递的对象具有不同的结构出乎意料。

有没有办法让链接器警告有两个版本的 A ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T05:31:11.020

Gold 没有对此发出警告的原因是 Gold 只检测*符号*不匹配（同一符号以不兼容的方式在多个目标文件中定义），示例中不存在此类不匹配。

在 Valgrind 下运行示例确实会产生此错误：

```
valgrind --track-origins=yes ./a.out

==11004== Memcheck, a memory error detector
==11004== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==11004== Using Valgrind-3.8.0.SVN and LibVEX; rerun with -h for copyright info
==11004== Command: ./a.out
==11004== 
==11004== Conditional jump or move depends on uninitialised value(s)
==11004==    at 0x40B6D24: std::ostreambuf_iterator<char, std::char_traits<char> > std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::_M_insert_int<long>(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, long) const (in /usr/lib64/libstdc++.so.6.0.16)
==11004==    by 0x40B703C: std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::do_put(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, long) const (in /usr/lib64/libstdc++.so.6.0.16)
==11004==    by 0x40C26DE: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib64/libstdc++.so.6.0.16)
==11004==    by 0x40094F: A<int>::f() (a.h:6)
==11004==    by 0x4008CB: f(A<int>*) (a.cpp:3)
==11004==    by 0x400977: main (main.cpp:7)
==11004==  Uninitialised value was created by a stack allocation
==11004==    at 0x400964: main (main.cpp:5) 
```

[您应该从Address Sanitizer](http://code.google.com/p/address-sanitizer/)获得更好的报告：

更新：

> 关键是我想在链接时检测错误，而不是在执行期间。

我理解你的意思，但编译器（没有关于其他翻译单元的信息）或链接器（没有关于所涉及的类型的信息）目前不可能警告你这一点。

现在，对于调试版本，链接器*理论上*可以这样做，如果它还为每个函数比较参数类型的调试信息。[我建议在bugzilla](http://sourceware.org/bugzilla/enter_bug.cgi?product=binutils)中提交黄金功能请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:02:07.327

黄金链接器可能会使用 --detect-odr-violations 发出警告

它通过比较每个模板定义的文件和行号来工作，如果它们不完全相同，则发出警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T20:32:05.020

我认为答案是“不”，并且会保持这种状态。

类型只有当它们出现在函数参数或模板参数中时链接器看到的名称（其他一些奇怪的东西？也许）。您的示例实际上是更简单的情况之一，并且要检测链接器必须使用（实际上）标记由专业化提供的模板参数的 ABI。但是他们不能这样做：你必须能够将一个指针传递给一个模板结构，而不知道它是否指向一个特化。

即使这样，您也无法获得比微不足道的 ABI 更改更激进的方法，这意味着至少要考虑是否需要重新编译和/或重新链接每个库和可执行文件。如果您的结构是成员`struct trojan { A<int> greeks; }`，那么无论如何您都将具有相同的类型名称，并且如果它们从未作为函数参数或模板参数出现，则即使它们不同，链接器也永远不会看到它们。

为了获得自动检测，我将从像 clang 这样平易近人的 OSS C++ 前端开始。您将需要（非标准）名称修饰规则来标记模板专业化参数名称并使其生成它找到引用的所有模板声明的边带列表。然后编写一个单独的工具，查看链接在一起的所有对象的列表，并抱怨它是否发现一个对象中使用的名称+参数（不仅仅是引用或声明），该对象也用于另一个对象，但来自不同的专业。

# wpf - 用于删除列表视图中的项目的上下文菜单

> ID：11082162
> 
> 赞同：15
> 
> 时间：2012-06-18T11:48:56.127
> 
> 标签：wpf, listview, contextmenu

我有一个显示字符串值列表的 ListView。我想为列表中的每个项目添加一个上下文菜单条目以删除所选项目。我的 XAML 看起来像这样：

```
<ListView x:Name="itemsListView" ItemsSource="{Binding MyItems}">
  <ListView.ContextMenu>
    <ContextMenu>
      <MenuItem Header="Remove"
                Command="{Binding RemoveItem}"
                CommandParameter="{Binding ElementName=itemsListView, Path=SelectedItem}" />
    </ContextMenu>
  </ListView.ContextMenu>
</ListView> 
```

问题是该`CommandParameter`值始终为空。我添加了一个额外的按钮来删除选定的项目以检查我的命令是否有效。该按钮具有完全相同的绑定和通过按钮工作删除项目。该按钮如下所示：

```
<Button Content="Remove selected item"
        Command="{Binding RemoveItem}"
        CommandParameter="{Binding ElementName=itemsListView, Path=SelectedItem}"/> 
```

该命令如下所示：

```
private ICommand _removeItem;

public ICommand RemoveItem
{
  get { return _removeItem ?? (_removeItem = new RelayCommand(p => RemoveItemCommand((string)p))); }
}

private void RemoveItemCommand(string item)
{
  if(!string.IsNullOrEmpty(item))
    MyItems.Remove(item);  

} 
```

任何想法为什么打开上下文菜单时所选项目为空？也许是列表视图的焦点问题？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-18T12:11:25.930

HB是对的。但您也可以使用 RelativeSource 绑定

```
 <ListView x:Name="itemsListView" ItemsSource="{Binding MyItems}">
        <ListView.ContextMenu>
            <ContextMenu>
                <MenuItem Header="Remove"
            Command="{Binding RemoveItem}"
            CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=ContextMenu}, Path=PlacementTarget.SelectedItem}" />
            </ContextMenu>
        </ListView.ContextMenu>
    </ListView> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T12:00:32.113

`ContextMenus` are disconnected, you cannot use `ElementName` bindings. One workaround would be using `Binding.Source` and [`x:Reference`](http://msdn.microsoft.com/en-us/library/ee795380.aspx) which requires you to extract parts that use it to be in the resources (due to cyclical dependency errors). You can just put the whole context menu there.

An example:

```
<ListBox Name="lb" Height="200">
    <ListBox.Resources>
        <ContextMenu x:Key="cm">
            <MenuItem Header="{Binding ActualHeight, Source={x:Reference lb}}" />
        </ContextMenu>
    </ListBox.Resources>
    <ListBox.ContextMenu>
        <StaticResource ResourceKey="cm" />
    </ListBox.ContextMenu>
</ListBox> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-15T17:02:35.300

这对我有用 CommandParameter="{Binding}"

# sharepoint - 如何从计时器作业访问网站中的列表

> ID：11082166
> 
> 赞同：3
> 
> 时间：2012-06-18T11:49:15.157
> 
> 标签：sharepoint, timer-jobs, splist

我正在创建一个计时器作业。而且我必须访问存储在站点中的解决方案中的一些列表：“http://server:9090/sites/thesite”

目前，在我的 Timer Job 中，我使用这个：

```
 SPWebApplication webApplication = this.Parent as SPWebApplication;
 SPContentDatabase contentDb = webApplication.ContentDatabases[contentDbId];

 SPList ParametresTech = contentDb.Sites["sites/thesite"].RootWeb.Lists[Constantes.Listes.PARAMETRES_TECHNIQUES.Name]; 
```

我在这里面临的问题是我在我的开发环境中，我不知道他们将用于在生产中部署解决方案的站点的 url 是什么。

那么有没有办法在不知道站点名称的情况下进入列表？

谢谢

编辑：这就是定时器工作的激活方式：

```
public override void FeatureActivated(SPFeatureReceiverProperties properties)
    {
        string ListJobName = "SAPToSQL";

        SPSite site = properties.Feature.Parent as SPSite;
        // make sure the job isn't already registered
        foreach (SPJobDefinition job in site.WebApplication.JobDefinitions)
        {
            if (job.Name == ListJobName)
                job.Delete();
        }
        // install the job
        TimerJobSAPToSP listLoggerJob = new TimerJobSAPToSP(ListJobName, site.WebApplication);
        SPHourlySchedule schedule = new SPHourlySchedule();
        schedule.BeginMinute = 0;
        schedule.EndMinute = 59;
        listLoggerJob.Schedule = schedule;
        listLoggerJob.Update();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:47:20.080

我肯定会使用创建计时器作业的功能 ID 而不是 URL 来识别网站集。这不仅使您可以灵活地命名站点，还允许您处理每个都订阅了作业的多个站点集。

我编写了以下实用程序方法来收集计时器作业的网站集：

```
public static List<Guid> GetSiteIDs(SPWebApplication webApplication, Guid featureId)
{
    List<Guid> ids = new List<Guid>();
    foreach (SPSite site in webApplication.Sites)
    {
        try
        {
            if (SPSite.Exists(new Uri(site.Url)) 
                && null != site.Features[featureId])
            {
                try
                {
                    ids.Add(site.ID);
                }
                catch (Exception ex)
                {
                    // Handle Exception
                }
            }
        }
        finally
        {
            site.Dispose();
        }
    }
    return ids;
} 
```

在 featureId 参数中，我传递了一个在我的作业定义类中声明的常量。

有关更多信息，请参阅：[功能激活的自定义 Sharepoint-Timer 作业的范围](https://stackoverflow.com/questions/3396084/scope-of-a-feature-activated-custom-sharepoint-timer-job)

# iphone - UITableView 内带有 CATextLayer 的 NSAttributed 字符串

> ID：11082167
> 
> 赞同：0
> 
> 时间：2012-06-18T11:49:15.423
> 
> 标签：iphone, uitableview, nsattributedstring, catextlayer

我的要求是部分文本应该在 UITableview 的每个单元格中显示为粗体和彩色。我使用 NSMutableAttributedString、CATextLayer 和单元格的 contenview 层对其进行了管理。下面是我用来显示的代码。

```
 CATextLayer *textLayer = nil;   //used to draw the attributed string
 CALayer *layer = nil; 
    if(cell == nil) {
                 textLayer = [[CATextLayer alloc] init];
                textLayer.backgroundColor = [UIColor clearColor].CGColor;
                [textLayer setForegroundColor:[[UIColor clearColor] CGColor]];
                [textLayer setContentsScale:[[UIScreen mainScreen] scale]];
                textLayer.wrapped = YES;
                layer = cell.contentView.layer;
                [layer addSublayer:textLayer];
                textLayer = nil;
    }
//get the layer by nesting sublayer of cell layer because we don't have tag property for the layer and textlayer.

if (!layer) {
       layer = cell.contentView.layer;
   }

for (id subLayer in layer.sublayers) {
            if ([subLayer isKindOfClass:[CATextLayer class]]) {
                // NSLog(@"found textlayer");
                textLayer = subLayer;
                textLayer.string = nil;
            }
        }
textLayer.frame = CGRectMake(53.0f, 23.0f, 240.0f, attributedStrHeight);

        if([self isNotNull:mAttrbtdStr]) {
            textLayer.string = mAttrbtdStr;
        } 
```

问题是当我快速滚动表格时，文本显示为动画（重叠），并且在停止滚动后显示正确。请找到下面的参考图片

![表快速滚动时重叠 AttributedString](../Images/eeab2229704ef2aada626edfc222a9a4.png)

任何人都可以帮助我为什么只有当我滚动表格时才会发生这种重叠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:35:02.057

这确实是一个有趣的问题，`CALayer`属性是默认动画的（隐式动画），所以它可能是`CATextLayer`滚动视图动画内部的默认行为。一种解决方案可能是禁用它们，您有两种选择：

1.  在当前事务中禁用动画，但即使您正在创建新事务，我也不会对 tableview 上的正常动画产生影响

    `[CATransaction begin];`

    `[CATransaction setValue: [NSNumber numberWithBool: YES] forKey: kCATransactionDisableActions];`

    `[CATransaction commit];`

2.  将动画动作字典设置为 return null，这里有一个帮助[Disabling implicit animations in -[CALayer setNeedsDisplayInRect:]](https://stackoverflow.com/questions/2244147/disabling-implicit-animations-in-calayer-setneedsdisplayinrect)

# ios - iPhone SDK：System() 问题

> ID：11082169
> 
> 赞同：2
> 
> 时间：2012-06-18T11:49:34.517
> 
> 标签：ios, system, nslog

之前很无聊，想知道能不能在iOS平台上执行终端命令。果然，就像 OSX 一样，你可以。这真是太棒了，但是我如何将终端输出的内容输出到文本区域或类似的东西？这没什么大不了的，只是一个有趣的项目。
我正在使用 system("") 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:02:40.037

这一点，我的朋友是使用`system`. 我也希望你明白这`system`在非越狱的 iDevice 上是不可用的，所以除非你按照[iPhone App Minus App Store](https://stackoverflow.com/questions/37464/iphone-app-minus-app-store)上的 #1 答案中的说明安装它，否则你不能使用它。

现在，继续前进，您有几个选择。

1.  将命令的输出通过管道传输到文件，然后在应用程序中读取该文件。您的代码应如下所示：

    ```
    system("myCommand -f \"/path/to/my/file\" > output.txt")

    NSString *results = [NSString stringWithContentsOfFile:@"output.txt" usedEncoding:nil error:nil];
    NSLog(@"%@", results); 
    ```

2.  使用该函数创建进程`popen`，然后将输出直接通过管道传输到您的应用程序中：

    ```
    NSFileHandle *openProcessRead(const char *command)
    {
        FILE *fPtr = popen(command, "r");

        NSFileHandle *fileHandle = [[NSFileHandle alloc] initWithFileDescriptor:fileno(fPtr) closeOnDealloc:YES];

        return fileHandle;
    } 
    ```

    您现在可以使用[NSFileHandle](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilehandle_Class/Reference/Reference.html)文档来做您需要的事情。

# email - 使用 ssl 的 Yandex smtp 设置

> ID：11082171
> 
> 赞同：1
> 
> 时间：2012-06-18T11:49:37.543
> 
> 标签：email, web-config, smtp, sendmail

我可以通过 enableSsl="false" 和 25 端口发送电子邮件。但是如果有自己的域是不够的。

此设置有什么问题或缺失？

```
<system.net>
    <mailSettings>
      <smtp  deliveryMethod="Network" from="Name">
        <network  host="smtp.yandex.ru" port= "465 " enableSsl="true" userName="noreply@domain.com" password="***" />
      </smtp>
    </mailSettings>
  </system.net> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T11:22:35.020

```
using (MailMessage mm = new MailMessage("Name <from@yandex.ru>", "to@site.com")){
    mm.Subject = "Mail Subject";
    mm.Body = "Mail Body";
    mm.IsBodyHtml = false;
    using (SmtpClient sc = new SmtpClient("smtp.yandex.ru", 25)){
        sc.EnableSsl = true;
        sc.DeliveryMethod = SmtpDeliveryMethod.Network;
        sc.UseDefaultCredentials = false;
        sc.Credentials = new NetworkCredential("from@yandex.ru", "YandexPassword");
        sc.Send(mm);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-11T06:10:44.837

看来 25 端口已经无法使用了。您可以将端口 587 与 SmtpClient 和 yandex 邮件一起使用。

# php - 转换用户输入数据？

> ID：11082172
> 
> 赞同：0
> 
> 时间：2012-06-18T11:49:39.167
> 
> 标签：php, forms, input, iso-8859-1

我的表单存在拉丁字符（葡萄牙语）问题。如果用户使用特殊字符提交了他的信息，我会在我的电子邮件中收到带有混乱字符的信息。其余的都很好（表单页面显示特殊字符，好吧，只是我收到的电子邮件将字符与用户信息混淆了）。

长话短说，我可能已经找到了修复它的地方。在哪里，而不是如何。

这是我认为可以修复的地方：

```
 $content = $fields['name'] . " has sent you a message through the your Form:\r\n\n";
    $content .= "-------\n" . $fields['message'] . "\r\n\n";
    $content .= "Contact reason: " . $fields['contact_reason']
            . " \n\nEmail: " . $fields['email']
            . " \n\nPhone: " . $fields['phone'] . " \n\n"; 
```

如何向其中添加一些代码以便我可以将用户输入数据转换为 ISO-8859-1？或者这不是正确的地方吗？

PS：这是我购买的脚本。业主没有回复，也不提供支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:00:30.117

Firstly, you must know whether the Portuguese characters can be fully converted to ISO-8859-1 (check this, not even all European languages can be converted, e. g. Hungarian ő and ű can't be converted to ISO-8859-1). If not, you'll have to change settings of your email. If yes, you might want to use [utf8_decode](http://www.php.net/manual/en/function.utf8-decode.php), [mbstring](http://www.php.net/manual/en/ref.mbstring.php) or [iconv](http://php.net/manual/en/function.iconv.php).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:49:34.237

这是固定的。

解决方案是在第一篇文章中将 MIME 添加到特定字段。

# sql - 在 Microsoft SQL 报告服务中生成报告时出错：NOT A VALID DESIGNATOR

> ID：11082180
> 
> 赞同：2
> 
> 时间：2012-06-18T11:50:06.813
> 
> 标签：sql, sql-server

我在 Microsoft SQL Server 报表生成器中收到以下错误

> 在 Microsoft sql 报告服务中生成报告时出错：NOT A VALID DESIGNATOR

![错误图像](../Images/a2d0c84bef294f43ea43bb70d5b9a6a0.png)

以下是查询及其输出（数据集）的图像 ![在此处输入图像描述](../Images/38b889f700d8ede9c09e0dbc9db04d4e.png)

请任何人告诉我为什么会发生这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T19:05:43.283

您可能希望检查您的计算机区域设置并确保小数点设置为`.`.

此链接包含更多信息：[Bug Report Builder 2.0](http://mk-hu.blogspot.co.uk/)

![在此处输入图像描述](../Images/0ec9aa78ddaeb09654a101f8d5fe18c2.png)

# android - 机器学习算法 Android 拼写检查和自动更正

> ID：11082182
> 
> 赞同：3
> 
> 时间：2012-06-18T11:50:11.337
> 
> 标签：android, machine-learning, autocorrect, spell-checking

我很想知道Android是否在输入文本时使用任何机器学习算法进行拼写检查和自动更正功能？如果是，那么有没有办法知道他们使用哪种算法？

非常感谢拉贾特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T15:37:11.490

不能阻止自己把[它](http://xkcd.com/1068/)丢在这里。

每个键盘都使用自己的算法。我可以假设这些算法基于词频、贝叶斯决策和编辑距离（用于拼写检查）。

在我看来，学习部分是写下用户更常写的单词，并将它们作为类似单词的自动更正提供。

# python - 芹菜抽象任务事件处理程序未执行

> ID：11082184
> 
> 赞同：1
> 
> 时间：2012-06-18T11:50:15.573
> 
> 标签：python, celery

我为 3 个不同的任务设置了一个抽象任务类。对于一项任务，after_return/on_success 事件处理程序执行良好，但对于其他两项任务 - 尽管 celeryd 显示“任务已成功完成”，但事件处理程序并未执行。这里可能是什么问题？

# sql-server - 员工表（主表和明细表）

> ID：11082186
> 
> 赞同：1
> 
> 时间：2012-06-18T11:50:23.533
> 
> 标签：sql-server, oracle, database-design, schema, history

我想知道是否可以为员工提供主表和明细表？

根据要求，数据可以按部门按国家和员工代码在报告级别进行过滤。

如果员工的部门或国家代码发生更改，则更改将进入明细表，旧记录将设置为 IS_ACTIVE = 'T'。

---------------------主表---------------------------- ------------

```
**EMPLOYEE_CODE**      VARCHAR2(20 BYTE)  NOT NULL, 
EMAIL                  VARCHAR2(100 BYTE)
FIRST_NAME             VARCHAR2(50 BYTE)
LAST_NAME              VARCHAR2(50 BYTE)
WORKING_HOURS          NUMBER 
```

---------------------明细表---------------------------- ------------

```
**PK_USER_DETAIL_ID**     NUMBER,
FK_EMPLOYEE_CODE          VARCHAR2(20 BYTE),
FK_GROUP                  NUMBER,
FK_DEPARTMENT_CODE        NUMBER,
FK_EMPLOYER_COUNTRY_CODE  VARCHAR2(5 BYTE),
FK_MANAGER_ID             VARCHAR2(20 BYTE),
FK_ROLE_CODE              VARCHAR2(6 BYTE),
START_DATE                DATE,
END_DATE                  DATE,
IS_ACTIVE                 VARCHAR2(1 BYTE),
INACTIVE_DATE             DATE 
```

* * *

员工表将与时间表表链接，对于时间表报告，数据可以按部门、国家和员工代码进行过滤。

**选项：我**

*   拥有一个具有一个主键的员工表，并在为员工更新部门或角色时创建一个新条目。
*   在时间表表中添加国家和部门代码。

--> 这样我就不需要搜索员工表了。

**选项：二**

*   有主表和明细表。
*   在时间表表中添加国家和部门代码。

--> 这样我就不需要搜索员工表，而且我会有主从表

**选项：新**

*   有主表和明细表。
*   时间表表将有 EmpCode。
*   如果用户移动到新*位置*或*更改部门*，则在明细表中插入一个新行，其中包含新的部门代码和相同的员工编号。
*   更新旧行并设置结束日期字段，因此如果他更改他的位置或部门，则需要更新结束日期字段。

哪一个是最好的选择，还有其他更好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:18:22.163

这是实现此要求的一种方法，也是许多人采用的方法。但是，它有一个主要缺点：每次查询*当前*员工状态时，都需要过滤开始和结束日期的详细信息。这似乎是一件微不足道的事情，但你不会相信它会引起多少混乱，而且它也对性能有影响。

这些事情很重要，因为大多数时候您只需要当前的详细信息，而对历史的查询相对罕见。因此，您阻碍了最常见用例的实现，以便更容易实现较少使用的用例。（当然，我正在对您的业务需求做出假设，也许您的不是普通的员工应用程序......）

更好的解决方案是有两个表，一个包含所有详细信息列的 EMPLOYEES 表和一个包含相同列以及开始和结束日期的 EMPLOYEES_HISTORY 表。当您更改员工的记录时，可能通过触发器在历史表中插入旧记录的副本。您的标准流程只有一张表可供查询，您的历史记录需求得到充分满足。

* * *

顺便说一句，您提出的数据模型是错误的。Working_hours、email_address 和 last_name 绝对是可以改变的东西，甚至可能是名字（例如，通过个人情况的改变，比如结婚）。因此，所有这些列都应保存在您的详细信息名称中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:57:24.807

## 选项 3 - 请注意，此选项仅对报告观点有用。

1.  每当您插入数据时，请`De-Normalized`在新表中创建一个条目。
2.  每当更新条目时，该`De-Normalized`条目将在新表中更新。
3.  新表将包含`De-Normalized`Employee 的所有列。
4.  因此，在执行搜索时，这将使您受益，因为结果将在不使用`Joins`. 因此，访问时间将减少。
5.  新表中的记录将在插入/更新触发器中创建/更新。

## 选项 - 2 和选项 1 的改进

不要通过添加重复列来创建冗余。

# hibernate - 带有 JBoss 7.1.1 的自定义 Hibernate 持久性提供程序

> ID：11082188
> 
> 赞同：4
> 
> 时间：2012-06-18T11:50:24.067
> 
> 标签：hibernate, jboss, jboss7.x

我们有一个当前在 JBoss 6 中运行的 Java EE 6 应用程序。该应用程序在“persistence.xml”中使用定制的 Hibernate 持久性提供程序

定制的持久性提供者类继承自 org.hibernate.ejb.HibernatePersistence。

定制的持久性提供程序打包在应用程序“ear”文件中。

现在在将应用程序部署到 JBoss 7.1.1 时会发生以下异常：

```
08:50:14,766 WARN  [org.jboss.modules] (MSC service thread 1-2) Failed to define class my.custom.HibernatePersistence in Module "deployment.ear.ear:main" from Service Module Loader: java.lang.LinkageError: Failed to link my/custom/HibernatePersistence (Module "deployment.ear.ear:main" from Service Module Loader)
  at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:396) [jboss-modules.jar:1.1.1.GA]
  at org.jboss.modules.ModuleClassLoader.loadClassLocal(ModuleClassLoader.java:243) [jboss-modules.jar:1.1.1.GA]
  at org.jboss.modules.ModuleClassLoader$1.loadClassLocal(ModuleClassLoader.java:73) [jboss-modules.jar:1.1.1.GA]
  at org.jboss.modules.Module.loadModuleClass(Module.java:517) [jboss-modules.jar:1.1.1.GA]
  at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:182) [jboss-modules.jar:1.1.1.GA]
  at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) [jboss-modules.jar:1.1.1.GA]
  at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) [jboss-modules.jar:1.1.1.GA]
  at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) [jboss-modules.jar:1.1.1.GA]
  at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) [jboss-modules.jar:1.1.1.GA]
  at org.jboss.as.jpa.processor.PersistenceProviderProcessor.deploy(PersistenceProviderProcessor.java:76)
  at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
  at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
  at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0]
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0]
  at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0]
Caused by: java.lang.NoClassDefFoundError: org/hibernate/ejb/HibernatePersistence
  at java.lang.ClassLoader.defineClass1(Native Method) [rt.jar:1.7.0]
  at java.lang.ClassLoader.defineClass(ClassLoader.java:791) [rt.jar:1.7.0]
  at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) [rt.jar:1.7.0]
  at org.jboss.modules.ModuleClassLoader.doDefineOrLoadClass(ModuleClassLoader.java:327) [jboss-modules.jar:1.1.1.GA]
  at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:391) [jboss-modules.jar:1.1.1.GA]
  ... 15 more
Caused by: java.lang.ClassNotFoundException: org.hibernate.ejb.HibernatePersistence from [Module "deployment.ear.ear:main" from Service Module Loader]
  at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190) [jboss-modules.jar:1.1.1.GA]
  at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) [jboss-modules.jar:1.1.1.GA]
  at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) [jboss-modules.jar:1.1.1.GA]
  at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) [jboss-modules.jar:1.1.1.GA]
  at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) [jboss-modules.jar:1.1.1.GA]
  ... 20 more
08:50:14,789 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC00001: Failed to start service jboss.deployment.unit."ear.ear".INSTALL: org.jboss.msc.service.StartException in service jboss.deployment.unit."ear.ear".INSTALL: Failed to process phase INSTALL of deployment "ear.ear"
  at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
  at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
  at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0]
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0]
  at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS011426: Could not deploy application packaged persistence provider 'my.custom.HibernatePersistence'
  at org.jboss.as.jpa.processor.PersistenceProviderProcessor.deploy(PersistenceProviderProcessor.java:91)
  at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
  ... 5 more
Caused by: java.lang.ClassNotFoundException: my.custom.HibernatePersistence from [Module "deployment.ear.ear:main" from Service Module Loader]
  at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
  at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
  at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
  at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
  at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
  at org.jboss.as.jpa.processor.PersistenceProviderProcessor.deploy(PersistenceProviderProcessor.java:76)
  ... 6 more 
```

我们在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:17:55.373

这可能就像`org.hibernate`向您的`MANIFEST.MF`. 也可能是您的自定义提供程序不在正确的目录中，`EAR/lib`这是默认情况下预期的位置。

首先查看[类加载文档](https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7)。特别是在您的情况下[EAR 类加载](https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7#ClassLoadinginAS7-EARClassLoading)。

# java - 树集示例

> ID：11082197
> 
> 赞同：2
> 
> 时间：2012-06-18T11:50:44.473
> 
> 标签：java, string-comparison, treeset

为什么第三个对象没有被添加到这里的树集中，尽管它是一个不同的对象？

```
import java.util.*;

class Student implements Comparable<Student>{
public String fn,ln;
public Student(String fn,String ln){
    this.fn=fn;
    this.ln=ln;
}

//overiding equals

public boolean equals(Object o) {
    if (!(o instanceof Student))
        return false;
    Student s=(Student) o;
    if(this==s)
        return true;
    if(this.fn.equals(s.fn) && this.ln.equals(s.ln))
        return true;
    return false;
}

//overiding hashcode

public int hashCode() {
    return fn.hashCode()+ln.hashCode();
}

//overiding compareTo

public int compareTo(Student o) {

    return this.fn.compareTo(o.fn);
}
  }

public class Practice {

public static void main(String[] args) {
    Student st1=new Student("Girish","J");
    Student st2=new Student("Master","M");
    Student st3=new Student("Girish","Jay");
    Set S=new TreeSet();

           //adding 3 different student objects

    System.out.println(S.add(st1));
    System.out.println(S.add(st2));
    System.out.println(S.add(st3));
    Iterator sitr=S.iterator();
    while(sitr.hasNext())
    {
        Student stu=(Student) sitr.next();
        System.out.println(stu.fn+" "+stu.ln);
    }

}

 } 
```

**输出：**

```
true
true
false
Girish J
Master M 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T11:55:47.400

您的比较器功能仅使用`fn`：

```
public int compareTo(Student o) {
    return this.fn.compareTo(o.fn);
} 
```

`TreeSet` *仅*使用排序比较 - 它不使用`hashCode()`and `equals()`。

通过这种比较，`st1`和`st3`相等（`s1.compareTo(s3)`将返回 0）因此`st3`不会添加到集合中。

如果您想保持区别，您可能应该比较`fn`，然后`ln`在`fn`值相同时使用：

```
public int compareTo(Student o) {
    int fnResult = this.fn.compareTo(o.fn);
    return fnResult == 0 ? ln.compareTo(o.ln) : fnResult;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T12:05:27.113

您的观察是正确的，TreeSet 不使用 .equals 和 .hashcode 进行比较。

从javadocs：

```
This is so because the Set interface is defined in terms of the equals operation, but a 
TreeSet instance performs all element comparisons using its compareTo (or compare) method,
so two elements that are deemed equal by this method are, from the standpoint of the set, 
equal. 
```

基本上，他们说对于 TreeSet，相等性不是通过 .equals 确定的，而是通过 Comparable 接口上的 .compareTo 确定的。请注意，.compareTo 应始终与 .equals 一致，这意味着如果 a.equals(b)，则 a.compareTo(b) == 0。

这与 TreeSet 是 SortedSet 的实现有关。因此，它需要 .compareTo 来确定顺序，因为在这种情况下 .equals 是不够的。

PS：如果你不想实现 Comparable （有时你不能，因为你可能并不总是控制对象的代码），你总是可以将 Comparator 传递给 TreeSet 构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:57:04.717

您的比较仅使用该`fn`值...

```
public int compareTo(Student o) {
    return this.fn.compareTo(o.fn);
} 
```

第三个失败，`Student`因为名字与第一个相同`Student`

您需要调整代码以比较`fn`和`ln`值...

```
public int compareTo(Student o) {
    int firstNameComparison = this.fn.compareTo(o.fn);
    if (firstnameComparison != 0){
        // the first names are different
        return firstNameComparison;
    }
    else {
        // the first names are the same, so compare the last name
        return this.ln.compareTo(o.ln);
    }
} 
```

此代码`fn`首先比较值。如果它们相同，则比较这些`ln`值。

# sql-server - sql server compact db手动合并

> ID：11082200
> 
> 赞同：0
> 
> 时间：2012-06-18T11:50:52.490
> 
> 标签：sql-server, synchronization, sql-server-ce, sync, merge-replication

我有一个移动数据库（ ），它通过**合并复制**`SQL Server CE`与我在 SQL 服务器上的数据库同步。

 **在设备出现一些问题后，我不得不从设备上复制移动数据库，但在此之前我无法再同步。

里面有一些重要信息，我没有其他设备可以在那里使用数据库。我可以用 SSMS 读取它，但我需要它在服务器上，我不想手动复制它（里面有太多记录，改变了，还有很多新的）

是否可以在没有设备的情况下同步 SQLCE 数据库

谢谢**

# ios - 将 UINavigationController 添加到现有 UIViewController 的正确方法

> ID：11082203
> 
> 赞同：0
> 
> 时间：2012-06-18T11:50:57.293
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller

我正在尝试通过在 ViewDidLoad 中添加它来将 UINavigationController 添加到我现有的视图控制器中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    navController = [[UINavigationController alloc]init];

    [self.view addSubview:navController.view];
} 
```

但是这样做，它完全挡住了我的视线。它将 UINavigationBar 放在顶部，但视图的其余部分不响应输入。

这就是我呈现观点的方式。SecondViewController是我想要的 NavController ***：***

```
UITabBarController *tabController = [[UITabBarController alloc] init];

FirstViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"CardsViewController" bundle:nil];

UITabBarItem *tab1 = [[UITabBarItem alloc] initWithTitle:@"First" 
                                                   image:[UIImage imageNamed:@"img1.png"] tag:1];
[viewController1 setTabBarItem:tab1];    

SecondViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"ShoppingViewController" bundle:nil];

UINavigationController *SecondViewNavCont = [[UINavigationController alloc]initWithRootViewController:viewController2];

UITabBarItem *tab2 = [[UITabBarItem alloc] initWithTitle:@"Second" 
                                                   image:[UIImage imageNamed:@"img2.png"] tag:2];
[SecondViewNavCont setTabBarItem:tab2];

UIViewController *viewController3 = [[UIViewController alloc] init];
UITabBarItem *tab3 = [[UITabBarItem alloc] initWithTitle:@"Third" 
                                                   image:[UIImage imageNamed:@"img3.png"] tag:3];
[viewController3 setTabBarItem:tab3];

tabController.viewControllers = [NSArray arrayWithObjects:viewController1, 
                                 viewController2, 
                                 viewController3, 
                                 nil];

[self.view addSubview:tabController.view]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:54:22.597

您不能将它添加到当前视图控制器您需要做的不是呈现 ViewController 而是将此视图控制器添加到导航视图控制器并呈现

```
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:YourPresentedViewController];
//then present the navController
[self presentModalViewController:navController animated:YES]; 
```

现在，当您展示它时，请执行以下操作

```
NSArray arrayWithObjects:viewController1, 
                                 SecondViewNavCont, 
                                 viewController3, 
                                 nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T11:59:13.857

您可以尝试使用此代码将 uiviewcontroller 加载到 uinavigationcontroller：

```
 yourviewController *viewcontroller=[[yourviewController alloc] initWithNibName:@"yourviewController" bundle:nil];
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:viewcontroller];
    [self presentModalViewController:navController animated:YES]; 
```

（或）您想在应用程序启动中加载 uinavigationcontroller 在您的应用程序委托类中尝试以下代码：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    
   UINavigationController *navController = [[UINavigationController alloc]  initWithRootViewController:viewcontroller.view];
   [self.window addSubview:navController.view];
   [self.window makeKeyAndVisible];
   return YES;
} 
```

欢迎！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T11:53:41.257

您需要为`navController`对象设置 RootViewController。然后您可以进一步使用 pushViewController 方法推送 UIViewcontroller 对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T11:54:40.037

您需要为该导航控制器添加一个视图。添加的导航控制器没有视图，因此它覆盖在 UIViewController 您需要添加

```
 [[UINavigationController alloc] initWithNibName:@"ViewControllerName" bundle:nil]; 
```

# iphone - 播放多个视频

> ID：11082206
> 
> 赞同：1
> 
> 时间：2012-06-18T11:51:02.003
> 
> 标签：iphone, cocoa, ios5, mpmovieplayercontroller

我实际上是`MPMoviePlayerController`在我的 iPad 应用程序中使用播放视频。

实际上，我可以轻松播放 1 个视频，但我正在尝试同时播放 2 个视频，这是我的代码：

```
// Look for the video in the main bundle
NSString *urlStr = [[NSBundle mainBundle] pathForResource:@"3idiots.mov" ofType:nil];
NSURL *url = [NSURL fileURLWithPath:urlStr];

NSString *urlStr2 = [[NSBundle mainBundle] pathForResource:@"3idiots.mov" ofType:nil];
NSURL *url2 = [NSURL fileURLWithPath:urlStr2];

videoPlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
[self.view addSubview:videoPlayer.view];
videoPlayer.view.frame = CGRectMake(0, 0,200, 200); 

videoPlayer2 = [[MPMoviePlayerController alloc] initWithContentURL:url2];
[self.view addSubview:videoPlayer2.view];
videoPlayer2.view.frame = CGRectMake(0, 300,200, 200);

[videoPlayer2 play];
NSLog(@"Video 1 playing");

[videoPlayer play];
NSLog(@"Video 2 playing"); 
```

第一个视频正确启动，但不是第二个。（顺便说一句，第二个视频在第一个完成后没有发布）

这是我的输出：

```
2012-06-18 13:47:23.015 testMosaique[2498:11f03] Video 1 playing

2012-06-18 13:47:23.016 testMosaique[2498:11f03] Video 2 playing 
```

有没有办法同时`MPMoviePlayerController`播放 2 个或更多视频？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:54:43.063

如果您想同时播放多个视频，则必须使用`AVPlayer`框架。`MPMovie`一次只能播放一个视频。

请参阅`AVPlayer` [文档](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:12:13.330

As Safecase mentioned, **MPMovieplayerController** will only allow one video to be played at a time. But here is an example to play two simultaneously with the use of **AVFoundation**:

[http://www.sdkboy.com/?p=66](http://www.sdkboy.com/?p=66)

Hope this helps!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:00:55.113

What I did is display 4 videos using AVPlayer, but those video are made from 4 another video (I create each videos with AVFoundation). Si I'm able the display thousand and thousand videos in only 4 players, pretty good performances when you play the videos !

# lua - 使用什么来从 Lua 中的固定分钟以秒为单位倒计时？

> ID：11082210
> 
> 赞同：1
> 
> 时间：2012-06-18T11:51:13.033
> 
> 标签：lua, coronasdk

我正在尝试从 Lua 中的 1:00 到 0:00 这样的固定分钟倒计时。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T17:06:43.443

我假设您正在使用 Corona SDK。

Corona 提供了一种简单的方法

```
local time = 60
local function decreaseTime()
   time = time-1
   print(time)
end

timer.performWithDelay(1000,decreaseTime,60) 
```

在这里阅读 [http://developer.anscamobile.com/reference/index/timerperformwithdelay](http://developer.anscamobile.com/reference/index/timerperformwithdelay)

# tsql - 计算去年发生的所有事件

> ID：11082211
> 
> 赞同：0
> 
> 时间：2012-06-18T11:51:16.840
> 
> 标签：tsql

我有一个问题，虽然我不能真正进入细节。

将以下查询：

```
SELECT DISTINCT tableOuter.Property, (SELECT COUNT(ID) FROM table AS tableInner WHERE tableInner.Property = tableOuter.Property)
FROM table AS tableOuter
WHERE tableOuter.DateTime > DATEADD(year, -1, GETDATE())
  AND tableOuter.Property IN (
   ...
) 
```

选择 IN 子句中每个属性的一个实例，以及该属性的行在去年出现的频率？

我刚刚阅读了 MSDN 上的相关子查询，但不确定我是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:55:32.690

如果我正确地理解你，你想`Property`在去年得到每一个的所有发生，对吗？

然后`GROUP BY`与`HAVING`子句一起使用：

```
SELECT tableOuter.Property, COUNT(*) AS Count
FROM table AS tableOuter
GROUP BY tableOuter.Property
HAVING tableOuter.DateTime > DATEADD(year, -1, GETDATE())
AND tableOuter.Property IN ( .... ) 
```

# ruby-on-rails - 更改设计默认布局

> ID：11082213
> 
> 赞同：22
> 
> 时间：2012-06-18T11:51:20.037
> 
> 标签：ruby-on-rails, layout, devise

我正在尝试设计以在某些方面显示与默认设置不同的布局模板。

当用户进入登录页面时，我有这个工作，但我需要显示不同的布局来注册、忘记密码和重置。

这是我的应用程序控制器中的当前代码：

```
layout :layout

  private
  def layout
    # only turn it off for login pages:
    is_a?(Devise::SessionsController) ? "login" : "application"
    # or turn layout off for every devise controller:
    #devise_controller? && "application"
  end 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-08-08T18:42:23.353

如果您将备用布局命名为 devise.html.erb，那么 gem 的控制器自然会使用它，而无需询问。节省一些代码。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-06-18T15:10:42.503

将这行代码添加到您的 application.rb 中：

```
config.to_prepare do
    Devise::SessionsController.layout "your_layout_name"
    Devise::RegistrationsController.layout "your_layout_name"
    Devise::ConfirmationsController.layout "your_layout_name"
    Devise::UnlocksController.layout "your_layout_name"
    Devise::PasswordsController.layout "your_layout_name"
end 
```

如果您希望所有 Devise 视图具有相同的布局，除了用户正在编辑其数据时，您可以使用以下内容：

```
config.to_prepare do
  Devise::SessionsController.layout "your_layout_name"
  Devise::RegistrationsController.layout proc{ |controller| user_signed_in? ? "application" : "your_layout_name" }
  Devise::ConfirmationsController.layout "your_layout_name"
  Devise::UnlocksController.layout "your_layout_name"            
  Devise::PasswordsController.layout "your_layout_name"        
end 
```

有关更多信息，您可以阅读这篇[文章](https://github.com/plataformatec/devise/wiki/How-To%3a-Create-custom-layouts)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T12:23:20.197

您不需要自己处理布局，只需执行以下操作：

```
rails generate devise:views 
```

然后，查看views文件夹中的devise文件夹，你会看到你需要自定义的所有表单

# javascript - jQuery columnize 在设置高度时崩溃

> ID：11082215
> 
> 赞同：0
> 
> 时间：2012-06-18T11:51:23.643
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用 jquery columnizer 插件在 div 中创建文本列。使用的插件可以在[这里](http://welcome.totheinter.net/columnizer-jquery-plugin/)找到。

下面是我的 html 示例，它应该分为三列：

```
 <div class="textColumn">    
        <div class="text">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum adipiscing,
nisi tempus tincidunt tempor, lorem libero venenatis lectus, molestie congue arcu risus ut
lorem. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras mauris lorem, eleifend
vitae auctor id, rhoncus eget mi. Nunc convallis condimentum pretium. Praesent vulputate
mauris sit amet nisl porttitor fringilla. Aliquam sit amet venenatis risus. Nullam
malesuada hendrerit dolor, id sagittis libero condimentum non. Sed dapibus bibendum augue,
id lobortis arcu iaculis laoreet. Maecenas lacinia mattis ipsum, ut vehicula nulla
tristique id. Quisque vehicula orci vitae nibh ultricies ac dictum metus pretium. Donec id
arcu tellus, vulputate blandit augue. Integer turpis felis, cursus et congue sit amet,
mollis at neque. Nunc pellentesque erat vel odio tempus aliquam.<br>
    <br>
    Quisque faucibus lectus luctus odio blandit aliquet. Phasellus blandit augue vel eros
lacinia nec hendrerit ligula sagittis. Sed sollicitudin ultricies sem sit ametpellentesque.
Fusce semper purus vel massa porttitor vestibulum. Fusce eget erat eu augue ullamcorper
mattis. Morbi adipiscing fermentum purus, ut ultrices libero tristique sed. Fusce ut augue
in ante rhoncus iaculis. Nunc auctor, est sit amet ornare dictum, dolor odio elementum 
orci, vitae porta enim nisi id felis. Aenean justo mauris, fringilla id faucibus eget,
tincidunt ornare purus. Aenean dapibus sapien non justo elementum sollicitudin. In at
vehicula turpis. Sed porta rhoncus arcu a cursus. Maecenas eu purus in urna mattis ornare
et et arcu. Suspendisse auctor magna ac tortor condimentum condimentum.<br>
        </div>
    </div> 
```

在一个通用的 javascript 文件中，我定义了一个 document.ready 函数，在该函数中执行 columnizer 以创建我的列。这是通过下面的 javascript 完成的。仅定义宽度时它工作正常。但是，我也想为列设置一个有限的高度。一旦我这样做，插件（还有浏览器）就会崩溃。

```
$(document).ready(function(){
    $('#content.one .textColumn .text').columnize({
            width: 169
            /*,height: 162*/    /*Enabling this rule crashes the internet!*/
    });
}); 
```

我已经尝试过设置宽度和高度，但也只设置了高度。两者都使插件崩溃。还定义插件内部的高度（并随之修改插件）使其崩溃。根据[this jquery plugin](http://archive.plugins.jquery.com/project/columnize) page，应该可以设置一个高度，[这个例子](http://welcome.totheinter.net/autocolumn/sample5.html)也显示了一个工作版本。

有人对此有很好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:15:23.853

这是插件中的一个错误，请使用这个： [https ://raw.github.com/cioddi/Columnizer-jQuery-Plugin/71eae2c531419274a1ec085f6a6485038e98c9f3/src/jquery.columnizer.js](https://raw.github.com/cioddi/Columnizer-jQuery-Plugin/71eae2c531419274a1ec085f6a6485038e98c9f3/src/jquery.columnizer.js)

我从一个 git push 请求中得到它。您的 js 代码有效。请看这个jsfiddle作为证明：http: [//jsfiddle.net/kxMJM/](http://jsfiddle.net/kxMJM/)

我从[cioddi得到了补丁插件](https://github.com/cioddi/Columnizer-jQuery-Plugin/commit/71eae2c531419274a1ec085f6a6485038e98c9f3#diff-0)

# javascript - 通过 id jquery 将文本转换为链接

> ID：11082216
> 
> 赞同：1
> 
> 时间：2012-06-18T11:51:30.477
> 
> 标签：javascript, jquery, ajax, jquery-ui

我想将纯文本转换为我拥有的输入的链接。HTML 代码是：

```
<input type="text" value="http://www.test.com" id="url"> 
```

因此，每次带有此 id 的输入在页面上转换为可点击链接以在新页面中打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:57:12.253

```
var href = $('#url').val();
$('#url').replaceWith('<a href="' + href + '">click text</a>') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:56:50.673

像这样的东西：

```
var $el = $("#url"),
    url = $el.val();

$el.replaceWith( $("<a />").attr({"href":url,"target":"_blank"}).html(url) ); 
```

将其放在文档就绪处理程序或正文末尾的脚本块中。

你没有说你想要链接的文本是什么所以我只是重复了这个工作演示中显示的 url：http: [//jsfiddle.net/khJx2/1/](http://jsfiddle.net/khJx2/1/)

将“target”属性指定为“_blank”将在新页面（或选项卡，取决于浏览器）中打开链接。删除它以代替当前页面打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:52:23.877

ID 必须是唯一的。如果您有超过两倍的相同 ID，则说明您做错了。

你要找的是`class`es。

这是一个示例：

```
<input type="text" value="http://some.url" class="url"> 
```

和 jQuery 代码（比其他答案复杂得多）：

```
$( '.url' ).on( 'click', function() {
    window.open( this.value );
} ); 
```

[PS：感谢“类似于_blank”代码的[这个答案。](https://stackoverflow.com/a/1574020/851498)]

# javascript - 从 html 中删除“子弹”符号

> ID：11082218
> 
> 赞同：1
> 
> 时间：2012-06-18T11:51:45.173
> 
> 标签：javascript, jquery, greasemonkey, userscripts

我有一个脚本，它从表格中读取地址列表并在谷歌地图上追踪路线。

（类似于我的旧的：[如何使用带有greasemonkey的google maps api来读取地址表并跟踪路线？](https://stackoverflow.com/questions/7894996/how-to-use-the-google-maps-api-with-greasemonkey-to-read-a-table-of-addresses-an)）

但是每个地址前面都有一个“子弹”符号，谷歌地图不会删除它来渲染地图，给我下面的错误

![在此处输入图像描述](../Images/68c3b1bb46de3b469ca542eb2096527b.png)

这是表格单元格的 HTML

![在此处输入图像描述](../Images/579ac985115018609db3369ecb3fde9b.png)

关于如何使用 JQuery/Javascript 删除“子弹”的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:04:38.487

如果您不想这样做，`.substr(2)`可以将第一次出现替换为：

```
var s = $("#para").text().replace("\u2022", ""); 
```

`\u2022`html项目符号实体的字符在哪里`&bull;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:58:47.367

```
$(".dadosf").each(   
 function(i,e)
 {
     $(e).text($(e).text().substring(2));
 }
); 
```

​ JQuery`.each()`对集合进行迭代，我们只需将内部文本替换为取自第二个字符 ( `substring(2)`) 的相同文本

* * *

正如另一位用户指出的那样，这种方法在您**确定**有子弹的情况下有效。如果不是，我会在代码中使用条件而不是`:contains(text)`选择器，以采用通用方法并确保我们仅删除开头的字符（文本内不太可能有项目符号，但`:contains()`也会匹配具有此条件的字符串，这是错误的）：

```
$(".dadosf").each(   
 function(i,e)
 {
     var t = $(e).text();
     if (t.substring(0,1) == "\u2022")
         $(e).text(t.substring(2));
 }
); 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T12:03:39.393

```
$(".dadosf:contains('.')").each(

 function()
 {
     $(this).text($(this).text().substring(2));
 }

); 
```

# sql - 加入sql结果

> ID：11082223
> 
> 赞同：-1
> 
> 时间：2012-06-18T11:52:06.170
> 
> 标签：sql, sql-server

请帮我处理命令的连接结果（MS SQL）：

```
SELECT name,value FROM table1  WHERE idfoo1 IN(SELECT _id FROM table3 where id = 1);
SELECT value FROM table2  WHERE idfoo2 IN(SELECT _id_2 FROM table3 where id = 1) AND name='fooname'; 
```

我得到：

```
name  value 
John  2     
Bill  32    
Alex  11   

value
434
234
144 
```

但我需要加入结果。

```
name  value value
John  2     434
Bill  32    234
Alex  11    144 
```

所以，id == id, _id != _id_2,

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:02:41.247

使用此查询：

```
SELECT t1.name,
       t1.value,
       t2.value
FROM table1 t1
INNER JOIN table3 t3 ON t1.idfoo1 = t3._id
INNER JOIN table2 t2 ON t2.idfoo2 = t3._id_2
WHERE t3.id=1 AND t2.name = 'fooname' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:59:43.297

```
Select  a.name,a.value,c.value FROM table1  as a inner join table3 as b
on a.idfoo1=b.id and b.id=1 inner join table3 as c
on c.idfoo2=b._id_2 and b.id=1 and c.name='fooname' 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-18T12:00:59.877

我想这就是你需要的-

```
SELECT t1.name, t1.value, t2.value
FROM table1 t1, table2 t2, table3 t3 
WHERE 
   t1.idfoo1 = t3._id
   AND t2.idfoo2 = t3._id_2
   AND t3.id = 1
   AND t2.name='fooname'; 
```

# android - 位图中的解码器出错

> ID：11082224
> 
> 赞同：2
> 
> 时间：2012-06-18T11:52:06.907
> 
> 标签：android, bitmap

我在解码我的位图时遇到问题。这是我的代码：

```
public static Bitmap loadujSmallBitmapeczke(File file) {
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(file.getAbsolutePath(), options);
        int imageHeight = options.outHeight;
        int imageWidth = options.outWidth;

        options.inSampleSize=4;

        options.inJustDecodeBounds = false;

        return BitmapFactory.decodeFile(file.getAbsolutePath(), options);
    } 
```

在这里我用来从 sd 卡获取图像：

```
public class ServiceImages1 extends LinearLayout{
    public ServiceImages1(Context context, String id) {
        super(context);
        init(id);
    }
    public ServiceImages1(Context context, AttributeSet attrs, String id) {
        super(context, attrs);
        init(id);
    }
    private void init(String id) {
        File file;
        file = new File("/sdcard/DinEgen/"+id);
        ImageView imageView = new ImageView(getContext());
        //imageView.setImageURI(Uri.fromFile(file));
        imageView.setImageBitmap(HejSokolyLadujBMP.loadujSmallBitmapeczke(file)); 

        addView(imageView);
    }
} 
```

其中 id 是我的图像的名称。

我得到错误：`decoder->decode returned false`。我该如何解决这个问题？问题出在哪里？

编辑：我的图片在 sd 卡上，所以我不能使用带有 URL 的解决方案。只有我得到的是文件路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:21:03.990

试试这个代码

```
byte[] byteimage = file.toByteArray(); // I dont know whether toByteArray() will work        
   // or not Some how convert your file into byte[]

BitmapFactory.Options opt = new BitmapFactory.Options();
opt.inDither = true;
opt.inPreferredConfig = Bitmap.Config.ARGB_8888;
Bitmap rebitmap = BitmapFactory.decodeByteArray(byteimage,0,byteimage.length, opt);

return rebitmap; 
```

# abap - 滚动时固定文本

> ID：11082225
> 
> 赞同：3
> 
> 时间：2012-06-18T11:52:08.370
> 
> 标签：abap

我的程序显示一个 ABAP 列表，我试图在报告中向下滚动时显示一个固定的标题（一些文本行，没什么花哨的）。

我必须使用某种标签或声明吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T19:24:19.880

您可以使用“转到 -> 文本元素 -> 列表标题”`SE38`来定义列表标题。 ![列表标题的维护屏幕](../Images/7acc5aa87ccdcf7fbbaad771b51a2825.png)

您可以定义列表标题和列表标题（列标题）。

优点之一：`GOTO -> Translations`您可以用不同的语言定义不同的文本。

获取此维护屏幕的另一种方法：

从您的列表中，您可以选择：`System -> List -> List Header`。 ![列表屏幕：系统 -> 列表 -> 列表标题](../Images/33c8293069b083ce1f44dcae9778d9ec.png) ![定义标题文本](../Images/08062b992c9b5ce243b41acdfe4aab57.png)

* * *

另一种方式：

您可以使用`top-of-page`在报告代码中定义标题文本。

```
top-of-page.
  write 'My header'. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T19:28:59.503

您可以使用 TOP OF PAGE 事件来编写将在滚动时粘在页面顶部的内容。[你可以在这里](http://help.sap.com/saphelp_470/helpdata/en/9f/dba02835c111d1829f0000e829fbfe/content.htm)找到更多信息。

您还可以使用文本元素菜单中的列表标题。更多信息[在这里](http://help.sap.com/saphelp_bw/helpdata/en/e3/960a05eb0711d194d100a0c94260a5/content.htm)。

最好的问候，塞尔吉乌

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T06:39:04.330

一种方法是在代码中直接使用页顶。

其他方法是调用reuse_alv_grid_display 或reuse_alv_list_display（取决于您的输出类型）并在I_CALLBACK_TOP_OF_PAGE 行中声明“页面顶部”。然后创建一个与“页面顶部”同名的子例程。在那里你可以写 wa_list-typ = 'H'。wa_list-info = ''。将 wa_list 附加到 it_list。清除 wa_list。

或者

wa_list-typ = 'A'。wa_list-info = '报告标题'。将 wa_list 附加到 it_list。清除 wa_list。

或者

wa_list-typ = 'S'。wa_list-info = '报告标题'。将 wa_list 附加到 it_list。清除 wa_list。

取决于您想要什么（标题、操作或选择）。

最后，您可以使用 REUSE_ALV_COMMENTARY_WRITE 函数并调用表（在本例中为 it_list）。

希望它有所帮助。

# javascript - 有可能找出干扰之前运行良好的 jquery 代码的原因吗？

> ID：11082227
> 
> 赞同：2
> 
> 时间：2012-06-18T11:52:10.590
> 
> 标签：javascript, jquery, debugging

我在 Wordpress 的头文件的头中有一些基本的 jquery 代码。它一直在工作，直到我交给它的客户添加了几个插件，如果可能的话，我宁愿不要关闭它们，因为这可能会导致其本身出现问题。

我正在尝试确定是否有一种简单的方法可以找出可能会干扰代码的内容（作为一个相对较新的 javascript 开发人员，我仍然习惯于控制台）。**不仅适用于这种情况，而且适用于任何其他类似情况的解决方案也会很棒！**

当我说它不起作用时，它只会显示所有应该隐藏的 div（根据代码）。控制台中没有出现错误。

该网站的代码如下：

```
<script type="text/javascript">
$(document).ready(function(){
    $("ul.tabs").tabs("div.panes", {tabs:'li'});
    });

</script> 
```

我之前在一个基本的 HTML 文件中对此进行了测试，它工作正常；

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("ul.tabs").tabs("div.panes", {tabs:'li'});
    });
</script>
</head>
<body>
<div class="tab_nav">
    <ul class="tabs">
        <li><a href="#">Most Recent</a></li>
        <li><a href="#">Most Viewed</a></li>
        <li><a href="#">Most Comments</a></li>
    </ul>
    <div class="clear"></div>
</div>
<div class="tab_content panes">
CONTENT ONE
</div>
<div class="tab_content panes">
CONTENT TWO
</div>
<div class="tab_content panes">
CONTENT THREE
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:03:51.747

首先在无冲突模式下尝试 JQuery。

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

（你必须使用`jQuery`而不是`$`），看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:56:53.970

删除插件，然后一次重新添加一个，直到问题再次出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:57:46.477

一些 Jquery 文件（可能来自添加的插件）可能与您的代码冲突。尝试注释掉 WP 插件中包含的一些 jquery 文件。它通常有助于从一个干净的石板开始，然后一个一个地添加文件，这样你就会发现是哪一个导致了问题。

# python - 单个数据库列的搜索引擎

> ID：11082229
> 
> 赞同：3
> 
> 时间：2012-06-18T11:52:12.240
> 
> 标签：python, mysql, database, search

我正在寻找一个搜索引擎，它可以指向我的数据库中支持拼写更正和“接近”结果等高级功能的列。

现在我只是在使用

`SELECT <column> from <table> where <colname> LIKE %<searchterm>%`

我错过了一些结果，尤其是当用户拼错项目时。

我编写了一些代码来通过拼写检查器运行它来修复拼写错误，但我认为可能有更好的开箱即用选项可供使用。谷歌提供了很多索引和搜索整个网站的选项，我真的只需要索引和搜索这一表列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:38:37.707

Apache Solr 是一个很棒的搜索引擎，它提供 (1) N-Gram 索引（不仅搜索完整的字符串，还搜索部分子字符串，这有助于获得类似的结果）(2) 提供基于距离的开箱即用拼写校正器公制/编辑距离（这将帮助您在用户输入 chicaog 时获得“您的意思是芝加哥”）（3）它为您提供了一个开箱即用的模糊搜索选项（模糊搜索帮助您获得与您的查询，例如，如果用户输入 GA-123，他将获得 VMDEO-123 作为结果）（4）Solr 还为您提供“更多类似”组件，它可以帮助您解决上述选项。

Solr（基于 Lucene 搜索库）是开源的，并且正在慢慢上升为搜索（垂直）行业的事实，并且非常适合数据库搜索（正如您所说的索引数据库列，这是 Solr 的小菜一碟）。许多财富 500 强公司以及互联网巨头都在使用 Lucene 和 Solr。

Sphinx 搜索引擎也很棒（我也喜欢它，因为它对所有内容的占用空间都非常小，并且基于 C++），但简单地说，Solr 更受欢迎。

现在 Python 支持和 API 都可用于两者。然而，Sphinx 是一个 exe，而 Solr 是一个 HTTP。所以对于 Solr，你只需从你的 python 程序中调用 Solr URL，它会返回结果，你可以发送到前端进行渲染，就这么简单）

***到目前为止，一切都很好。来到你的问题：***

首先，您应该问自己，您是否真的需要搜索引擎？搜索引擎适用于上述所有用例，但真正适用于搜索大量全文数据或数百万行表格数据。你的意思是什么，类似的记录，拼写校正等算法可以写在上面。在对 Solr 进行归零之前，还请在 Google 上搜索 (1) Peter Norvig Spell Corrector & (2) N-Gram Indexing。可能性是，只需编写几行代码，您就可以获得真正想要的东西。

我让你决定:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:40:44.660

我建议研究像 Sphynx Search 这样的开源技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:54:04.077

在沿着 Solr/Sphinx 路线进行全文索引之前——这会增加复杂性和它们自己的开销——如果你使用的是 PostgreSQL 数据库，你可以尝试使用 PostgreSQL 中的内置全文引擎。它易于设置并且比`LIKE`查询性能更好。

查看[https://github.com/hcarvalhoalves/django-tsearch2](https://github.com/hcarvalhoalves/django-tsearch2)

# c - 在 C++ 中使用 Clearcase 和 Eclipse

> ID：11082232
> 
> 赞同：3
> 
> 时间：2012-06-18T11:52:16.313
> 
> 标签：c, eclipse, clearcase

我从事一个大型 C/C++ 项目，代码库在 Clearcase 中维护。到目前为止，我们主要在 Linux 环境中工作，我们没有广泛使用 IDE。我们通过VI直接签出和编辑文件。

由于我可以访问 Clearcase 以进行 Windows 访问，因此我现在正在尝试访问 Eclipse 中的源文件。我主要想使用 Eclipse 进行编辑和代码导航。我通过我的 Unix 帐户创建视图。我可以使用 Clearcase Explorer 在我的 Windows PC 上安装相同的视图。我能够访问代码并对之前签出的文件进行更改。

熟悉 Eclipse 的人可以告诉我如何在 Eclipse 中查看该代码库。我不想在我的本地文件系统中创建代码库的副本。如果我尝试使用代码库驱动器作为根文件夹创建一个新项目，则不会创建该项目，因为我在该文件夹中没有写权限。

有解决方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:29:17.103

只要您可以在 Windows 上挂载您的 Linux 文件系统，您就应该能够直接从 Eclipse 中引用源代码。

要使 ClearCase 插件正常工作，最重要的细节是在您的快照视图中， `.project`to 和`.classpath`files 与源代码相邻。
看：

*   “[在提交项目时，我应该包含`.project`&`.classpath`吗？](https://stackoverflow.com/a/9808263/6309) ”
*   “[导入的 Eclipse 项目未链接到 ClearCase](https://stackoverflow.com/questions/4432945/imported-eclipse-project-not-linking-to-clearcase/4433604#4433604) ”
*   “ [Eclipse 使用的 Clearcase 插件](https://stackoverflow.com/questions/3393758/clearcase-plugin-for-eclipse-usage/3393857#3393857)”

要从 Windows 识别该 Unix 视图，您必须在 Windows 区域中标记和注册它：“ [ClearCase：在 Unix 中创建的视图是否在 Windows 中不可见，反之亦然？](https://stackoverflow.com/questions/7572145/clearcase-are-views-created-in-unix-not-visible-from-windows-and-vice-versa/7573651#7573651) ”。

请注意快照视图（从 Windows 访问 Unix 视图）的情况，如本[帮助页面](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/before_access_different_ssv.htm)的详细信息，任何 ClearCase 操作都可能*失败*：
请参阅“[在跨不同平台访问快照视图之前](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/before_access_different_ssv.htm)”

> 您可以跨不同平台访问快照视图，但不能跨平台发出 Rational ClearCase 命令。
> 例如，**您不能从 Windows 计算机上的 Rational ClearCase 主机检出 UNIX 工作站快照视图中的文件**，也不能从 Rational ClearCase Explorer 创建 UNIX 工作站快照视图的快捷方式。
> 
> 如果您在运行在 Windows 计算机上的 Rational ClearCase 主机上并且您劫持了 UNIX 快照视图中的文件，那么当您从 UNIX 平台上的 Rational ClearCase 主机更新视图时会检测到劫持。

在您的情况下，如果“挂载”是指挂载动态视图，那么您应该没问题，如本[帮助页面](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_mvfs/c_about_access_ux_dyn_from_win.htm)中所述，使用区域同步器将视图的 Linux 或 UNIX 视图标签导入您的 Windows 网络区域。

# linux - 如何将linux time命令的结果重定向到某个文件

> ID：11082233
> 
> 赞同：12
> 
> 时间：2012-06-18T11:52:23.940
> 
> 标签：linux

我正在运行以下命令（在 Ubuntu 上）

```
time wget 'http://localhost:8080/upLoading.jsp' --timeout=0 
```

并在命令行中得到结果

```
real    0m0.042s
user    0m0.000s
sys     0m0.000s 
```

我尝试了以下方法：

```
time -a o.txt wget 'http://localhost:8080/upLoading.jsp' --timeout=0 
```

并得到以下错误

```
-a: command not found 
```

我想让结果重定向到某个文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T12:01:45.140

-a 仅由 time 二进制文件 (/usr/bin/time) 理解，当仅使用 time 时，您使用的是不处理 -a 选项的 bash 内置版本，因此尝试将其作为命令运行.

```
/usr/bin/time -o foo.txt -a wget 'http://localhost:8080/upLoading.jsp' --timeout=0 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-18T11:56:18.727

检查`man time`，我想你需要的是

```
time -o o.txt -a ... 
```

（注意你需要-a*和*-o）。

[编辑：] 如果你在 bash，你还必须注意写

```
/usr/bin/time 
```

（检查手册页的解释）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T11:55:53.720

您可以使用该字符`stdout`将任何命令的输出定向到文件。`>`要将输出*附加*到文件中，请使用`>>`

请注意，除非明确完成，否则输出`stderr`仍将转到控制台。要*同时* 指向同一输出流，请`stderr`使用`stdout`

```
 command 2>&1 outfile.txt (with bash) 
```

或者

```
 command >& outfile.txt (with t/csh) 
```

如果您正在使用`bash` [All about redirection](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html)，将为您提供有关重定向的更多详细信息和控制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T12:17:33.147

```
\time 2> time.out.text command

\time -o time.out.text command 
```

该答案基于先前的评论。它经过测试它可以工作。`\`over的好处`/usr/bin/`是你不必知道`time`.

这些答案也只捕获时间，而不是其他输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T11:55:36.620

正是`time`来自 GNU 将其输出写入*stderr*，如果要将其重定向到文件，可以使用 --output=PATH 参数`time`

看到这个[http://unixhelp.ed.ac.uk/CGI/man-cgi?time](http://unixhelp.ed.ac.uk/CGI/man-cgi?time)

如果您想将*标准输出*重定向到某个文件，您可以使用`> filename`创建文件并填充它或`>> filename`在初始命令之后附加到某个文件。

如果你想自己重定向*stderr*，你可以使用`$ command >&2 your_stderr_output`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T12:10:23.453

尝试使用`/usr/bin/time`，因为许多 shell 都有自己的实现，`time`它们可能支持也可能不支持相同的标志`/usr/bin/time`

所以将您的命令更改为

```
 /usr/bin/time -a -o foo.txt wget .... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-07T18:21:46.573

尝试：

```
command 2> log.txt 
```

并且“命令”的实时输出可以在另一个控制台窗口中看到：

```
tail -f log.txt 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-23T15:45:27.530

这对我有用：

```
( time command ) |& tee output.txt 
```

[https://unix.stackexchange.com/questions/115980/how-can-i-redirect-time-output-and-command-output-to-the-same-pipe](https://unix.stackexchange.com/questions/115980/how-can-i-redirect-time-output-and-command-output-to-the-same-pipe)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-31T10:09:19.137

你的 LANG 呢？

```
$ time -ao o.txt echo 1
bash: -ao: コマンドが見つかりません

real    0m0.001s
user    0m0.000s
sys     0m0.000s
$ export|grep LANG
declare -x LANG="ja_JP.utf8"

$ LANG=C time -ao o.txt echo 1
1

$ cat o.txt
0.00user 0.00system 0:00.00elapsed 0%CPU (0avgtext+0avgdata 1984maxresident)k
0inputs+0outputs (0major+158minor)pagefaults 0swaps 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-06-18T11:56:40.817

`>`如果你想重定向输出，你可以这样做。

例如：

```
time wget 'http://localhost:8080/upLoading.jsp' --timeout=0 > output.txt 2>&1 
```

`2>&1`表示将 STDERR 重定向到同一个文件。

此命令将删除所有 output.txt 文件并使用您的输出创建一个新文件。如果您使用`>>`它将在任何现有 output.txt 文件的末尾附加输出。如果它不存在，它将创建它。

# snmp - 我们如何将 OID 的数字形式更改为人类可读的形式

> ID：11082236
> 
> 赞同：1
> 
> 时间：2012-06-18T11:52:30.553
> 
> 标签：snmp, net-snmp, mib

我们如何将私有 MIB OID 的数字形式更改为人类可读的形式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T05:34:37.220

MIB 浏览器可以帮助翻译不同的形式，例如

[http://www.mg-soft.si/mgMibBrowserPE.html](http://www.mg-soft.si/mgMibBrowserPE.html)

还有免费的命令行工具，比如

[http://www.net-snmp.org/tutorial/tutorial-5/commands/snmptranslate.html](http://www.net-snmp.org/tutorial/tutorial-5/commands/snmptranslate.html)

但是人类可读的形式只对人类有用。网络设备仍然只以数字形式交谈。

# ipad - 视频标签上的 iPad alpha

> ID：11082241
> 
> 赞同：0
> 
> 时间：2012-06-18T11:52:45.943
> 
> 标签：ipad, html, mobile-safari, html5-video

好吧，我有一个紧迫的问题，iPad .. 更具体地说是 iPad 上的 Safari。

该标签根本不播放 .mov，使用 Quicktime 转换为 .m4v 会丢失我的 alpha 层。

目前正在使用 PNG 序列，但它太可怕了。有什么办法可以保持我的 alpha 通道并让视频标签工作？

非常感谢！戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:20:46.043

html5-video 可以播放 mov 文件！如果服务器没有很好地配置视频的 MIME 类型，通常会发生这种情况。在此处查看我的答案 在[网站上播放电影/DVD](https://stackoverflow.com/questions/9728977/playing-a-movie-dvd-on-a-website/9736361#9736361)可能会解决您的 mov 问题，并且您根本不必使用 .m4v

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:19:21.947

事实证明 iPad 不支持 alpha 通道（或者至少我尝试过的每种方法和格式都不起作用）并且它不会播放视频，因为 Apple 禁用了自动播放属性

但是我确实做了一个解决方法，在页面加载时似乎有一个缓冲区，您可以在其中启动视频上的 play() 函数并停止它，这意味着它可以播放了。但是你只能得到一个视频...

无赖。。

# iphone - 为什么 Xcode 引用不存在的文件？

> ID：11082242
> 
> 赞同：0
> 
> 时间：2012-06-18T11:52:59.617
> 
> 标签：iphone, ios, xcode, svn, versions

我正在为 Mac 使用版本控制“版本”SVN。更新后，Xcode开始显示这个错误

```
clang: error: no such file or directory:'/Users/ThisUser/Documents/Applic/trunk/ios/Applic1.0/CheckBoxClass/FCheckBox.m' 
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

真的，我从目录中删除了 FCheckBox.h 和 FCheckBox.m 文件，以及对它的所有引用。还从 SVN 中删除了它们（通过 bash）。但尽管出现了错误..（也试图清理）

有人知道问题是什么吗？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T11:58:26.197

您是否删除了编译器源中的文件？

如果从项目导航器中删除它，它不会在编译器源中被删除。

去`Targets-> Build Phases->Compiler Sources`。检查文件名。如果文件的名称为红色，请选择该文件并将其删除。

# c# - 如何使用 WebBrowserControl 以编程方式在网站中设置 TextArea 值

> ID：11082249
> 
> 赞同：0
> 
> 时间：2012-06-18T11:53:14.947
> 
> 标签：c#, javascript, web

我正在尝试使用 C#.Net webbrowser 控件以编程方式设置 textarea 的值，并且我尝试了许多解决方案。其中一些**工作**正常，但并非适用于所有网站。

这是我的代码

```
HtmlElement item ; 
.....
if (item.GetAttribute("name") == TextBody) 
{
try
 { //code reaches this point
//for some pages, all the coming solutions do not work

  item.SetAttribute("value", MyText);
  item.InnerText = MyText;
  item.InnerHtml = MyText;

} 
```

我最终得出的结论是，这些网站可能不允许通过代码设置值。这个限制是可以设置的吧？

如果是这样，是否有人有另一种解决方案？

我考虑手动发送包含所有信息的 POST 请求。但我不知道如何做到这一点，也不知道应该在 post 请求标头和数据中写什么。如果有一些工具或插件可以让我检查原始帖子内容以制作类似的内容，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:29:03.517

对于 textarea -`InnerText or InnerHtml`不能很好地工作，附加`textarea`一个 textNode 的元素 - 通过用你的值提供它来动态创建

[**例子**](http://jsfiddle.net/Dcdbq/2/)

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:26:17.617

解决方案是使用上面相同的代码，但在浏览器中禁用 java 脚本。

# iphone - 应用内购买中的恢复按钮

> ID：11082260
> 
> 赞同：1
> 
> 时间：2012-06-18T11:53:49.613
> 
> 标签：iphone, xcode, ipad, in-app-purchase

我将具有应用内购买功能的应用程序上传到 iTunes 商店。但由于“没有恢复按钮”，苹果拒绝了我的应用程序。如果我添加了“恢复”按钮，如何获取本地存储的数据？请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:58:42.207

如果，当您调用 时`[[SKPaymentQueue defaultQueue] restoreCompletedTransactions];`，将之前购买过的东西的购买状态设置为 YES，则应该没有问题。您无需考虑已存储的本地数据。

要从 NSUserDefaults 中检索某些内容：

```
[[NSUserDefaults standardUserDefaults] integerForKey:@"intKey]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:56:44.033

您需要使用`restoreCompletedTransactions`来`SKPaymentQueue`恢复您之前的交易

# java - SphinxQL 通配符

> ID：11082261
> 
> 赞同：2
> 
> 时间：2012-06-18T11:53:56.793
> 
> 标签：java, sphinx, wildcard

我想在我的项目中使用 sphinx。我想使用 RT 索引和 sphinxQL。但是我不能使用通配符查询。有人有建议吗？

这是我的 sphinx.conf ： index testrt

```
{
    type                    = rt
    path                    = /usr/local/sphinx/var/data/testrt
    charset_type            = utf-8
    min_infix_len           = 1
    enable_star             = 1
    rt_field                = name
    rt_attr_string          = game 
```

}

```
INSERT:
insert into testrt values(1,'sphinx','sphinx'); 
```

查询正常，1 行受影响（0.02 秒）

```
mysql> select * from testrt; 
```

+--------+--------+--------+ | 编号 | 重量 | 游戏 | +--------+--------+--------+ | 1 | 1 | 狮身人面像 | +--------+--------+--------+ 1 行在集合中（0.01 秒）

```
mysql> select * from testrt where match('sphinx'); 
```

+--------+--------+--------+ | 编号 | 重量 | 游戏 | +--------+--------+--------+ | 1 | 1500 | 狮身人面像 | +--------+--------+--------+ 1 行在集合中（0.00 秒）

```
 mysql> select * from testrt where match('sphin*'); 
```

空集（0.00 秒）

```
 mysql> select * from testrt where match('sphin\\*'); 
```

空集（0.02 秒）

我希望你能帮我一个忙。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:49:18.953

需要 dict=keywords 进行前缀匹配才能处理 rt 索引。

[http://sphinxsearch.com/docs/2.0.4/conf-dict.html](http://sphinxsearch.com/docs/2.0.4/conf-dict.html)

请注意，目前仅支持前缀搜索，中缀在 rt 索引上不起作用

# c# - 动态加载 Xml 并自动映射类型

> ID：11082263
> 
> 赞同：2
> 
> 时间：2012-06-18T11:54:05.917
> 
> 标签：c#, xml, linq-to-xml

我正在开发一些测试自动化，我们使用 xml 文档进行一些测试输入。现在我正在将 xml 文档加载到数据集，并从数据集中访问数据。

为了方便访问，我定义了一些具有类似 xml 架构的类。

完成将 xml 加载到数据集中后，使用数据集中的数据创建我定义的类的实例。并从测试中访问这些对象。

但是这里类结构和xml同步的维护太难了。如果 xml 中有任何更改，例如添加新节点，我必须更改我的类结构和初始化类以适应新属性。

我正在寻找一些方法来避免 xml 和类结构保持不同步。我基本上是在 xml 和我的 C# 类之间寻找一些 Automapper。

-纳雷什

# cocos2d-iphone - 如何使用 Box2D 物理引擎在轨道上创建火车的俯视图？

> ID：11082266
> 
> 赞同：0
> 
> 时间：2012-06-18T11:54:14.373
> 
> 标签：cocos2d-iphone, cocos2d-android

我认为使用像 Box2D 这样的物理库来模拟火车的顶视图沿着轨道、穿越开关等会很有趣。我需要什么关节和马达来完成这项工作？

我很好奇如何实现使汽车遵循样条轨道所需的力，以便它可以撞到其他火车车厢、行人、DeLoreans 等。只需对每个时间步说“汽车现在处于样条曲线（t）”会在物理引擎中产生过大的力。如果我理解正确，您必须用一种力将汽车固定在轨道上，用另一种力将其角度限制为与轨道平行（或用两种力将汽车的前部和后部固定在轨道上），然后创建另一个推动火车前进的力量。我正在寻找有关如何完成这些事情的一些细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:43:30.647

对于使用物理引擎的火车的 2D 自上而下视图听起来像是严重的矫枉过正。使用物理学会看到的唯一显着效果是各个汽车在加速或减速时如何相互碰撞。这些力很容易对整个火车造成难以平衡的影响，使其跳跃、抖动或可能脱轨（或者，如果你无论如何都将它们强行放到轨道上，汽车肯定不会遵守物理定律）。

车厢与车厢之间的接头旨在将它们保持在固定距离，与火车的总长度相比，火车中的车厢来回移动的空间真的很小。要使火车的 2D 自上而下视图最逼真，您实际上只需要在火车加速或停止时对这些车与车之间的交互进行建模。恕我直言，最好在没有物理引擎的情况下完成，因为这只是延迟加速的问题，具有最小-最大距离阈值，即汽车彼此之间的距离。

# c++ - 对稀疏矩阵求逆

> ID：11082274
> 
> 赞同：-1
> 
> 时间：2012-06-18T11:54:42.067
> 
> 标签：c++, sparse-matrix, matrix-inverse

我正在使用稀疏矩阵，我需要反转它。实际上，我正在寻找一个可以存储和反转稀疏矩阵的库。有人知道一些吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:05:22.390

不能比 NIST 做得更好：

[http://math.nist.gov/sparselib++/](http://math.nist.gov/sparselib++/)

# xml - 如何从其内部子组件正确组装有效的 xlsx 文件？

> ID：11082278
> 
> 赞同：52
> 
> 时间：2012-06-18T11:54:51.083
> 
> 标签：xml, zip, xlsx

我正在尝试在 iOS 上以编程方式创建一个 xlsx 文件。由于 xlsx 文件的内部数据基本上存储在单独的 xml 文件中，因此我尝试使用其所有文件和子目录重新创建 xlsx 结构，将它们压缩成 zip 文件并将其扩展名设置为 xlsx。我使用 GDataXML 解析器/编写器来创建所有必要的 xml 文件。但是，我得到的文件不能作为 xlsx 文件打开。即使我从有效的 xlsx 文件中提取所有数据，通过从原始 xml 文件复制数据并手动压缩它们来手动创建所有 xml 文件，我也无法重新创建有效的 xlsx 文件。

问题是：

*   xlsx 真的只是一个包含 xml 文件的存档吗？
*   如果我不能将 xml 文件压缩为 zip 文件并将其扩展名设置为 xlsx，如何以编程方式创建有效的 xlsx 文件？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-06-20T09:47:15.817

在回答您的问题时：

1.  XLSX 只是一个 zip 容器中的 XML 文件集合。没有其他魔法。
2.  如果您解压缩/解压缩一个有效的 XLSX 文件，然后重新压缩/压缩它并且您无法读取结果输出，那么问题出在压缩软件或您重新压缩的文件上。尝试不同的库/实用程序或检查它使用的默认压缩类型和级别，并尝试将其与 Excel 使用的任何内容相匹配。或者检查 zip 文件以确保目录结构得到维护。

xlsx 文件的内容示例：

```
unzip -l example.xlsx
Archive:  example.xlsx
  Length     Date   Time    Name
 --------    ----   ----    ----
      769  10-15-14 09:23   xl/worksheets/sheet1.xml
      550  10-15-14 09:22   xl/workbook.xml
      201  10-15-14 09:22   xl/sharedStrings.xml
      ... 
```

我会定期解压缩 XLSX 文件，对测试进行细微更改，然后重新压缩它们，没有任何问题。

更新：重要的是要避免压缩父目录。`zip`这是在 Linux 或 OS X 上使用系统实用程序的示例：

```
# Unzip an xlsx file into a directory.
unzip example.xlsx -d newdir

# Make some valid changes to the files.
cd newdir/
vi xl/worksheets/sheet1.xml

# Rezip the files *FROM* the unzipped directory.
# Note: you could also re-zip to the original file if required.
find . -type f | xargs zip ../newfile.xlsx

# Check the file looks okay.
cd ..
unzip -l newfile.xlsx
xdg-open newfile.xlsx 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-10-24T10:25:10.207

如果我将 xlsx 文件解压缩到文件夹中，然后再次重新压缩，则 xlsx 将损坏/无法识别。就我而言，原因是我的 zip 工具使用文件夹名称作为 zip 中每个文件的相对路径的第一级。

我通过在包含 xlsx 内容的文件夹中创建一个空的 zip 文件，然后将所有文件和文件夹添加到其中来解决了这个问题。

实际上，如果您尝试压缩文件夹本身，则该文件不是有效的 xlsx。您应该进入文件夹，选择所有内容，然后右键单击并压缩。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-21T00:00:48.423

我使用 WinZip 15.5 重新压缩 xlsx xml 文件。不同的压缩类型产生不同的结果。

**注意：**原始文件大小为 555KB。

*   **.Zip：新文件大小为 3,279KB (!)。Excel 可以打开。**
*   .Zipx：新文件大小 341KB。Excel*无法*打开。
*   **Zip SuperFast：新文件大小为 606KB。Excel 可以打开。**
*   邮编 Enh。Deflate：新文件大小为 429KB。Excel*无法*打开。
*   Zipx bzip2：新文件大小 333KB。Excel*无法*打开。
*   Zipx LZMA：新文件大小 328KB。Excel*无法*打开。
*   Zipx PPMd：新文件大小 317KB。Excel*无法*打开。

结论：**Zip SuperFast**是唯一有效的压缩格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-11T11:16:51.267

我遇到了问题，发现压缩在错误的文件夹级别。您需要导航到解压缩 xlsx 并压缩实际文件时创建的文件夹，而不是容器文件夹。假装我，分享我的故事，也许它可以帮助其他人节省时间......

# asp.net - 在 web.config 中找不到连接字符串

> ID：11082279
> 
> 赞同：0
> 
> 时间：2012-06-18T11:54:52.833
> 
> 标签：asp.net, deployment, connection-string, publish

我对 ASP.NET 相当陌生，并且在尝试发布我的应用程序时遇到了以下问题。当我单击“打包/发布 SQL”按钮，然后继续尝试从我的 web.config 文件中导入数据库条目时，我收到一条错误消息，显示为“在 web.config 中找不到连接字符串”

如您所见，我的 Web.config 中有连接

任何帮助将不胜感激。

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->

<configuration>
  <appSettings>
    <add key="webpages:Version" value="1.0.0.0"/>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
  </appSettings>

  <connectionStrings>   <!--<clear/>
    <remove name="LocalSqlServer"/>-->
    <add providerName="System.Data.SqlClient" name="LocalSqlServer" connectionString="server=mydatabase\SqlExpress; database=AssetManager.Models.AssetManagerContext; Integrated Security=SSPI " />
  </connectionStrings>

  <system.web>
    <globalization culture="auto" uiCulture="auto" />
    <roleManager enabled="true" />
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>

    <authentication mode="Forms">
      <forms loginUrl="~/Calendar/Index?showLogin=1" timeout="2880" />
    </authentication>

    <membership defaultProvider="AssetManagerMembershipProvider">
      <providers>
        <clear/>
        <add name="AssetManagerMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="LocalSqlServer"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="true"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>

    <profile inherits="AssetManager.Models.ProfileModel" defaultProvider="AssetManagerProfileProvider">
      <providers>
        <clear/>
        <add name="AssetManagerProfileProvider" type="System.web.Profile.SqlProfileProvider" connectionStringName="LocalSqlServer"/>
      </providers>
    </profile>

    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages"/>
      </namespaces>
    </pages>

  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>

  <system.net>
    <mailSettings>
      <smtp from="nathandavies.markdrummond@email.com">
        <network
          host="smtp.gmail.com"
          port="587"
          password="!password"
          userName="nathandavies.markdrummond@email.com"
        />
      </smtp>
    </mailSettings>
  </system.net>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:42:20.727

尝试在以下几行修改您的连接字符串：

**对于 Sql Server 身份验证：**

```
<connectionStrings>   
  <add name="LocalSqlServer" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;database=AssetManager.Models.AssetManagerContext;User ID=yourusername;password=yourpassword"           providerName="System.Data.SqlClient"/>   
</connectionStrings> 
```

在相应的属性中输入用户名和密码。

**对于 Windows 身份验证**

```
<connectionStrings> 
<add name="LocalSqlServer"  
connectionString="Data Source="localhost"; 
Initial Catalog=AssetManager.Models.AssetManagerContext;Integrated Security=True" 
providerName="System.Data.SqlClient" /> 
</connectionStrings> 
```

希望它有效。

# sql - 对多个表的单个 SQL 语句中的“for each”行为

> ID：11082283
> 
> 赞同：-1
> 
> 时间：2012-06-18T11:55:04.970
> 
> 标签：sql, sql-server, join

我有两张相当大的桌子，我们称它们为“作者”和“文章”。“articles”表中的每一行都与“AuthorID”字段中的值表示的单个作者相关联。

我们有一个页面，其中显示了一组符合特定条件的作者，以及与每个作者关联的第一篇文章，按文章中“DatePublished”字段的值排序。

目前这是通过执行多个查询来实现的，结果证明这非常慢，尤其是在为大量作者执行时。我不是这方面的专家，但我很确定有一种方法可以通过单个语句获取这些数据，这将比当前的混乱情况优化得多。

换句话说：（将每个函数调用视为单个 SQL 查询）

我们现在拥有的：

```
$authors = get_some_authors($criteria);
for each($author in $authors) {
    $author->lastArticle = get_latest_article_by_author($author_id);
} 
```

我们需要的：

```
$authors_with_last_articles = get_some_authors_and_their_latest_articles($criteria); 
```

我们使用的是 MS SQL Server 9.0。

希望我能正确解释问题。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T12:04:32.620

您可以使用 an`outer apply`来实现`for-each`行为：

```
select  *
from    Authors
outer apply
        (
        select  top 1 *
        from    Articles
        where   Authors.ID = Articles.AuthorId
        order by
                Articles.PublishDate desc
        ) as LastArticle 
```

# android - 应用程序“结束”时存储数据

> ID：11082284
> 
> 赞同：1
> 
> 时间：2012-06-18T11:55:13.720
> 
> 标签：android, database, object-lifetime

我有一个小型数据库，并在名为 MainDataManager 的类中读取像这样静态存储的 Singleton 对象中所需的数据提取：

```
public class MainDataManager {
    private static Context context;
    public static MainDataManager mainDataManager = null;

    public static MainDataManager getInstance(Context ctx) {
        context = ctx;
        if (mainDataManager == null) {  
           ...get the data from DB
          ...put the data in static mainDataManager variable 
          } 
        return mainDataManager;
        } 
```

现在，在应用程序的每个类/活动中，我都可以轻松访问 MainDataManager.mainDataManager 数据。

有时我想将数据保存回数据库。

目前我在每个活动中都这样做

```
 @Override
    protected void onPause() {
    super.onPause();
    saveState(); //saves the mainDataManager's data to the DB
    } 
```

我想避免这种情况，并认为如果我仅在用户退出应用程序时更新数据库（无论这意味着什么），它实际上就足够“保存”了——或者当 Android 想要销毁 MainDataManager 对象时甚至更好。

虽然我可以`saveState()`在方法中调用活动`onDestroy()`- 如果 MainDataManager 对象被破坏，我宁愿只将数据保存到 DB。但是`onDestroy()`对于一个普通的对象是没有的。

处理这个问题的最佳方法是什么？

ps我不想在每个活动中保存状态（）的`onDestroy()`原因是，因为即使数据很少（尤其是在旧的Android手机上！）保存到数据库也很慢，这不是逻辑 - 只是因为任何活动正在被破坏-然后更新数据库。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:28:41.770

> 处理这个问题的最佳方法是什么？

您目前处理它的方式，尽管可能使用`AsyncTask`from `onPause()`，并且仅来自您正在更改数据的活动，并且可能使用某种`isDirty`标志来让您知道数据是否需要持久化。

您不想等到的*真正*`onDestroy()`原因是`onDestroy()`不能保证被调用。

> 如果 MainDataManager 对象被破坏，我宁愿只将数据保存到 DB。

该对象永远不会被“销毁”——它会一直存在到进程终止。

# wordpress - wordpress 插件管理面板创建

> ID：11082288
> 
> 赞同：0
> 
> 时间：2012-06-18T11:55:20.583
> 
> 标签：wordpress, plugins, admin, manual

我正在寻找一个好的手册/帮助页面来为 wordpress 插件创建一个漂亮的管理面板。

我已经创建了基本的管理面板和插件，但是我遇到的问题是我想让我的用户编辑存储在与插件相关的数据库表中的信息。

基础是数据库中有一个所有项目的列表，用户可以单击该列表进行编辑。我可以让用户编辑它，但是一个错误（不是正确的 ID 号作为示例）或取消时，重定向到原始列表是我遇到的第一点。

在询问与管理面板相关的所有这些问题之前，我想知道是否有任何带有帮助指南/手册的好网站来帮助构建此类插件。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:17:18.833

你谷歌了吗？搜索 wordpress 选项面板。

[KC 设置](http://wordpress.org/extend/plugins/kc-settings/)非常棒，因为您可以使用漂亮的界面创建所有选项，然后只需将代码插入到您需要的模板中。

在我的脑海中，[Jaredatch 元框](https://github.com/jaredatch/Custom-Metaboxes-and-Fields-for-WordPress)，选项树，WP Alchemy。就个人而言，我喜欢 KC Settings 和 Jaretach 元框，但其中有很多，每个都有自己的优势。KC 设置易于使用，jeradatch 非常多的输入选项（所见即所得、滑块、复选框、电子邮件、时间等），具有高质量 OOP 和文档的 WP Alchemy 等。

希望有帮助。

# visual-studio-2010 - 如何使用 SQL 身份验证在 Visual Studio 中创建数据库？

> ID：11082295
> 
> 赞同：0
> 
> 时间：2012-06-18T11:55:51.693
> 
> 标签：visual-studio-2010, sql-server-2008, database-connection

我希望能够将我的程序基本上打包为 exe 文件。

为此，我需要一个连接字符串，只需使用用户名/密码连接到本地数据库文件。

如果我可以关闭数据库安全性，那也可以。

每次我创建一个新的数据连接或数据库文件时，它都会在打开 Windows 身份验证的情况下自动创建，我显然不允许通过“修改连接”来更改它。

我正在使用 VS 2011，但我认为该过程非常标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:10:44.237

数据库安全无法关闭，它是内置的。

# c# - 使用 devexpress 页面中的事件顺序

> ID：11082299
> 
> 赞同：0
> 
> 时间：2012-06-18T11:56:00.177
> 
> 标签：c#, asp.net, visual-studio-2010, devexpress

你能告诉我在页面上执行标准事件的顺序吗？（我使用的是 devexpress aspx.net 组件）比如 Page_Load、Page_Init 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:26:12.910

您基本上是在寻找页面事件的执行顺序，您可以从以下链接获得：

[http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

# symfony - 对来自不同 Symfony2 包的多个实体进行选择的 Doctrine2 查询

> ID：11082305
> 
> 赞同：11
> 
> 时间：2012-06-18T11:56:18.663
> 
> 标签：symfony, doctrine-orm

您好，我的 Symfony2 应用程序中有三个 Doctrine2 实体：包 Acme:PromoBundle 中有两个（“Promo”和“PromoPeriod”）；Acme:ShopBundle 包中的一个（“Shop”）。这些关系是： Promo - PromoPeriod: *Many-to-One*。PromoPeriod - 商店：*一对多*。

在实体“促销”的存储库中，我尝试获取所有促销和商店，如下所示：

```
 return $this->getEntityManager()
        ->createQuery("SELECT p, s
            FROM AcmePromoBundle:Promo p JOIN p.period pp JOIN pp.shops s")
            ->getResult(); 
```

其中： p.period 是 Promo 实例 p 与 PromoPeriod 周期的关系；pp.shops 是 PromoPeriod pp 和 Shops 之间的关系。返回以下错误：

```
An exception has been thrown during the rendering of a template 
("The parent object of entity result with alias 's' was not found. 
The parent alias is 'pp'.") 
```

因此，我认为 Doctrine 无法理解“s”的类型（这是一个 Shop 实体），因为它位于另一个捆绑包中。因此我尝试添加一个 INSTANCE OF 子句：

```
SELECT p, s
FROM AcmePromoBundle:Promo p JOIN p.period pp JOIN pp.shops s
WHERE s INSTANCE OF AcmeShopBundle:Shop 
```

又什么都没有。也许这不是解决问题的方法。

任何想法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-06T00:36:32.087

您应该选择 3 个实体，如下所示

```
SELECT p, pp, s
FROM AcmePromoBundle:Promo p
JOIN p.period pp
JOIN pp.shops s 
```

您正在执行获取连接，即：学说将返回查询根的实体（此处为 Promo(s)），并使用其他选择实体对其进行水合。因此，如果您告诉学说加载商店，即“来自”时期，但不选择时期......他不能做你要求它做的事情。在这里，SQL 查询运行良好，当学说试图对对象进行水合时，它会引发异常。

阅读相关文档[http://docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#joins](http://docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#joins)

# jsrender - JSRender 将字段留空

> ID：11082307
> 
> 赞同：1
> 
> 时间：2012-06-18T11:56:23.033
> 
> 标签：jsrender

我在渲染模板时遇到问题，我的数据如下所示：

```
var data = {"addresses":
                [{"Title":null,
                  "Name":null,
                  "Address1":"Add 1.1",
                  "Address2":"Add = 2.1",
                  "Town":"Town1",
                  "County":"County 1",
                  "Country":"United Kingdom",
                  "Postcode":"CV10 1RH",
                  "CountryId":229},
                 {"Title":null,
                  "Name":null,
                  "Address1":"Add 1.2",
                  "Address2":"Add = 2.2",
                  "Town":"Town2",
                  "County":"Count 2",
                  "Country":"United Kingdom",
                  "Postcode":"CV10 2RH",
                  "CountryId":229}
                 ]}; 
```

我的模板存储在 javascript 中并呈现如下：

```
var defaultAdressSelectorTemplate = '<label for="addressSelector">Select Adress:</label><select id="addressSelector" name="addressSelector">{{#each addresses}}<option>{{>Address1}}</option>{{#/each}}</select>';          

$.templates({ addressTemplate: defaultAdressSelectorTemplate });

html = $.render.addressTemplate( data ); 
```

我遇到的问题是`{{>Address1}}`总是呈现为空。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:08:44.250

使用您要使用的最新 JSRender`{{for}}`

```
var defaultAdressSelectorTemplate = '<label for="addressSelector">Select Adress:</label><select id="addressSelector" name="addressSelector">{{for addresses}}<option>{{>Address1}}</option>{{/for}}</select>'; 
```

**[jsfiddle 示例](http://jsfiddle.net/markcoleman/KA2nY/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:44:20.040

在渲染模板之前尝试使用 jQuery.parseJSON() 方法

```
var renderedTemplate = $("#templateId").render($.parseJSON(data));
$("#dataGridId").html(renderedTemplate); 
```

# c# - 不同页面内的 MVC3 模态表单

> ID：11082309
> 
> 赞同：0
> 
> 时间：2012-06-18T11:56:32.033
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

如果这令人困惑，我提前道歉，我很难用语言表达这个概念。

假设我有一个`Payment`Create 屏幕，带有一个下拉列表或列表框来选择关联的`Vendor`，其中`Vendor`必须选择一个……但`Vendor`尚不存在。我不想将用户重定向到另一个页面，以便他们可以创建先决条件`Vendor`，并让用户丢失他/她已经输入的所有信息。相反，我想在屏幕上放置一个链接，当单击后，会出现一个模态表单，因此他们可以动态添加`Vendor`对象、验证它并引用它，然后继续添加`Payment`记录。

我已经有一个创建屏幕，`Vendor`如果我能以某种方式重用该代码，那将是理想的，但我没有看到一个简单的方法来做到这一点。

这是另一个技巧：`Vendor`记录也可能引用不存在的东西；可能存在“嵌套”模式形式的可能性相当高。此外，任何给定记录可能有多个“依赖项”，我希望每个记录都表现出相同的行为以获得一致的用户体验。

MVC 框架中是否有某种机制，或者创建此行为的适当建立的模式？我正在尝试一种连续的、直观的用户体验，并且我正在摸索最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:13:54.070

您正在寻找的概念是**Partial Views**。它们几乎可以是整个页面，您只需将它们插入任何您想要的地方。

您将它们包含在这样的页面中：

```
@Html.Partial("_PaymentScreen") 
```

或者，如果您需要在加载原始页面的同时渲染图像或媒体，您可以使用：

```
@Html.RenderPartial("_PaymentScreen") 
```

[这些是](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.partialextensions.partial.aspx)渲染局部视图的所有选项，它非常通用。

对于您的模态，您可以执行以下操作：

```
<div id="myModal">
    @Html.RenderPartial("_PaymentScreen")
</div> 
```

有很多关于如何使用它们的资源，这里有一些：

*   [http://coding-in.net/mvc-3-organize-your-partial-views/](http://coding-in.net/mvc-3-organize-your-partial-views/)
*   [http://www.c-sharpcorner.com/UploadFile/aravindbenator/mvc-3-razor-and-partial-view/](http://www.c-sharpcorner.com/UploadFile/aravindbenator/mvc-3-razor-and-partial-view/)
*   [http://geekswithblogs.net/blachniet/archive/2011/08/03/updating-partial-views-with-unobtrusive-ajax-in-mvc-3.aspx](http://geekswithblogs.net/blachniet/archive/2011/08/03/updating-partial-views-with-unobtrusive-ajax-in-mvc-3.aspx)

# ios - 将 NSString 存储在 NSDIctionary 中时，变量不是 CFString

> ID：11082320
> 
> 赞同：1
> 
> 时间：2012-06-18T11:56:57.273
> 
> 标签：ios, xmppframework

我将聊天应用程序中的消息存储在 NSDictionary 中。但是，如果我这样做

```
NSString *msg = [[message elementForName:@"body"] stringValue];
[m setObject:msg forKey:@"msg"]; 
```

它抱怨说（在调试时）“变量不是 CFString”并且 msg 变为 nil。所以，我把它改成：

```
CFStringRef cfstring=(__bridge CFStringRef) msg;
[m setObject:(__bridge NSString*) cfstring forKey:@"msg"]; 
```

但是“msg”仍然是 nil，它不应该是 nil。

这仅在发送消息时发生。当它收到它们时......没有问题！

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:16:04.583

你不应该使用`objectForKey`而不是`elementForName`吗？当对象`NSString`存储时，您不需要使用`stringValue`. 您绝对不需要担心免费桥接到 CFStringRef，这只是编译器看到的底层 C 数据类型

# java - 从页面到标签主机的数据显示

> ID：11082323
> 
> 赞同：1
> 
> 时间：2012-06-18T11:57:00.690
> 
> 标签：java, android, eclipse, android-tabhost

有没有人遇到过这种情况，现在我正在尝试将数据从一个屏幕显示到 tabhost 中的一个选项卡，该选项卡由两个选项卡组成。

请在下面找到我的代码

**主类.java**

```
 public class Demo_webserviceActivity extends Activity 
{

private static String NAMESPACE = "http://tempuri.org/";
   private static String METHOD_NAME = "FahrenheitToCelsius";
   private static String SOAP_ACTION = "http://tempuri.org/FahrenheitToCelsius";
   private static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";

   Button btnFar;
   EditText txtFar;

       @Override
       public void onCreate(Bundle savedInstanceState)
       {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       btnFar = (Button)findViewById(R.id.btnFar);

       txtFar = (EditText)findViewById(R.id.editText1);

       btnFar.setOnClickListener(new View.OnClickListener()
       {
       public void onClick(View v)
       {

           String b;

         //Initialize soap request + add parameters
         SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);       

         //Use this to add parameters
         request.addProperty("Fahrenheit",txtFar.getText().toString());

         //Declare the version of the SOAP request
         SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

         envelope.setOutputSoapObject(request);
         envelope.dotNet = true;

         try 
         {
             HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

             //this is the actual part that will call the webservice
             androidHttpTransport.call(SOAP_ACTION, envelope);

             // Get the SoapResult from the envelope body.

             SoapPrimitive result = (SoapPrimitive)envelope.getResponse();

             if(result != null)
             {
              //Get the first property and change the label text

                b = result.toString();

                Intent i = new Intent(getApplicationContext(), Tab_1.class);
                i.putExtra("gotonextpage", b.toString());
                startActivity(i);
              }

             else
             {
               Toast.makeText(getApplicationContext(), "oops!.. empty",Toast.LENGTH_SHORT).show();
             }
        }
        catch (Exception e)
        {
           e.printStackTrace();
               }
             }
           }); 
```

**Tab_1.java**

```
public class Tab_1 extends Activity 
{
TextView tv;
String result;
/** Called when the activity is first created. */

 @Override
 public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main2);

Bundle extras = getIntent().getExtras();
if(extras != null)
{
    result = extras.getString("gotonextpage");
}
tv = (TextView)findViewById(R.id.editText_tab1);
tv.setText(result);

}
} 
```

谁能告诉我我在这里犯了什么错误？

谢谢你的时间！..

# oop - Scala 的强大的面向静态 OO 的多范式替代方案

> ID：11082326
> 
> 赞同：5
> 
> 时间：2012-06-18T11:57:06.310
> 
> 标签：oop, scala, static

我想知道是否有任何 Scala 替代品试图提供更强大的类型系统和语法。我知道诸如 Haskell 之类的功能性替代方案，但是有没有真正推动事物的静态 OO 方面，例如在 Scala 缺乏虚拟类、完全多重继承和更灵活的构造函数语法、静态的这些领域合同检查，更强大的路径依赖，MyTypes，朋友修饰符，一流的导入，或者可能是一些深奥的打字工具，我什至没有想到/听说过。

OO 和在较小程度上静态现在似乎并不流行。然而，令我震惊的是，现代计算机的强大功能使静态编译器的创建远远超出了编译器作者在过去几十年的梦想。

我想我没有遇到任何事情，没有其他选择，我很可能想要在任何时候淘汰生产代码。但即使它们仍然是非常学术的语言，我仍然想关注它们，也许会和它们一起玩。我特别在寻找可能被称为 Scala 的左字段替代方案。所以不是 Ceylon 或 Kotlin 试图优先考虑简单性而不是功能。这些天，埃菲尔似乎无处可去。我遇到过 gBeta 和 Ceasar，但无法弄清楚是否有任何领域输给了 Scala。还有其他可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:23:43.663

一句话，没有。没有任何流行的 OO 替代方案可以接近 Scala 的类型系统。鉴于您想要的功能，我建议您仔细研究 C++、D 和 Go。

如果你喜欢冒险并且你并不完全依赖于 OO 的想法，那么看看 Typed Racket。Coq、Idris 和 Agda 提供了非常有趣的依赖类型的好东西。或者只是转向流行的 FP 语言，如 Haskell、F# 和 OCaml。

你有什么特别的理由想要一门面向对象的语言吗？*同样，如果您想要一个很酷的类型系统和*OO ，那么 Scala 可能和现在一样好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:19:39.773

D（特别是 D 版本 2，又名 D2）几乎正是您正在寻找的语言。

Youtube 上有介绍 D、IDE/插件的视频，例如 Visual D（Visual C++ 插件）、Mono-D（MonoDevelop 插件）和 DDT（Eclipse 插件）。

dlang.org 的主站点有完整的库参考、语言语法、教程、初学者/高级讨论论坛等。

对于 GUI，请查看 GtkD。我相信您目前需要为此使用 DMD 编译器。

dsource.org 和 github 有很多其他的第三方库/代码，但是你会发现核心库包含了所有的基础知识，比如 json 解析器、XML 解析器等等，而且核心语言有很多你需要构建的东西——在，如哈希图、动态数组、合同设计、静态评估的模板/表达式等。

使用 D2，您可以直接链接到 C 和 C++，并绑定到 Python/LUA 代码等。它可以作为系统语言（如果需要，您可以用它编写操作系统），但也可以作为现代、高级、优雅、快速的应用程序语言，支持并发、安全代码等。

总而言之，它非常令人印象深刻。遗憾的是它没有更受欢迎，因为相比之下 Scala 是一个缓慢的内存猪；）

# c++ - 当我使用不带括号的函数时，为什么 C++ 编译器不报错？

> ID：11082329
> 
> 赞同：7
> 
> 时间：2012-06-18T11:57:15.043
> 
> 标签：c++, compilation, parentheses

我正在查看朋友发给我的一些代码，他说：“它可以编译，但不起作用”。我看到他使用了不带括号的函数，如下所示：

```
void foo(){
  cout<< "Hello world\n";
}

int main(){
  foo; //function without parentheses
  return 0;
} 
```

我说的第一个是“使用括号，你必须”。然后我测试了该代码 - 它确实编译，但执行时不起作用（没有显示“Hello world”）。

那么，为什么它可以编译（编译器**GCC 4.7**根本没有警告），但不起作用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T11:59:40.737

It surely warns if you set the warning level high enough.

A function name evaluates to the address of the function, and is a legal expression. Usually it is saved in a function pointer,

```
void (*fptr)() = foo; 
```

but that is not required.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-18T12:00:30.367

You need to increase the warning level that you use. `foo;` is a valid expression statement (the name of a function converts to a pointer to the named function) but it has no effect.

I usually use `-std=c++98 -Wall -Wextra -pedantic` which gives:

```
<stdin>: In function 'void foo()':
<stdin>:2: error: 'cout' was not declared in this scope
<stdin>: In function 'int main()':
<stdin>:6: warning: statement is a reference, not call, to function 'foo'
<stdin>:6: warning: statement has no effect 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T12:00:46.447

```
foo; 
```

You're not actually 'using' the function here. You're just using the address of it. In this case, you're taking it but not really using it.

Addresses of functions (i.e. their names, without any parenthesis) are useful when you want to pass that function as a callback to some other function.

# android - 为什么 TextView 的背景会改变它的大小？

> ID：11082331
> 
> 赞同：2
> 
> 时间：2012-06-18T11:57:19.553
> 
> 标签：android, layout, textview

我为 TextView 设置了背景。我希望背景会根据我现有的布局参数进行调整，并且不会改变我的 TextView 的大小。因此，如果我将宽度和高度设置为 wrap_content，我希望背景也会包裹内容（并按比例缩小）。但是不，我得到的是更大的 TextView

```
<TextView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="a"
    android:textColor="#ffffff"
    android:textSize="20sp"
    android:background="@drawable/large_bg"
/> 
```

我明白了

![在此处输入图像描述](../Images/e8c651ec4910790516428a31e5a1daae.png)

...

如何使背景也服从 wrap_content？

我的意思是，这看起来像背景将被视为内容......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:59:39.487

这是因为当我们设置背景而不是 textView 或任何 Widget 根据该背景进行自我调整时。直到和除非我们没有提到修复高度和宽度[其糟糕的方法]

# html - 为什么我无法读取我的 cookie 值？

> ID：11082335
> 
> 赞同：0
> 
> 时间：2012-06-18T11:57:36.743
> 
> 标签：html, ajax, asp.net-mvc-4

我正在尝试用 cookie 做一些事情。现在我只是想读取一个 cookie 并使用 alert(value) 在弹出框中显示该值。我正在关注的教程是： [http ://www.w3schools.com/js/tryit.asp?filename=tryjs_cookie_username](http://www.w3schools.com/js/tryit.asp?filename=tryjs_cookie_username)

当我将它实现到我的 Web 应用程序中时，不知何故这不起作用。cookie 将被创建，但读取部分不知何故不起作用。当我使用 Web Developer Toolbar 时，我可以看到有一个名为“语言”的 cookie。

这是我的 Index.aspx 中的脚本块

```
function createCookie() {
    var box = document.getElementById("language");
    var value = box.options[box.selectedIndex].value;
    var name = "language";
    var days = 1;
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        var expires = "; expires=" + date.toGMTString();
    } else var expires = "";
    document.cookie = name + "=" + value + expires + ";path=/;";
    document.cookie = 'language=en; expires=Thu, 2 Aug 2012 20:47:11 UTC;                                   path=/'
    window.location = 'http://localhost:57688';
}

function readLanguageCookie() {
    var language = getCookie("language");
    if (language != null && language != "") {
        alert("Language is: " + language);
    } else {
        language = "en";
        if (language != null && language != "") {
            setCookie("language", language, 365);
        }
    }
}

function getCookie(c_name) {
    var i, x, y, ARRcookies = document.cookie.split(";");
    for (i = 0; i < ARRcookies.length; i++) {
        x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
        y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
        x = x.replace(/^\s+|\s+$/g, "");
        if (x == c_name) {
            return unescape(y);
        }
    }
} 
```

这就是我尝试执行该方法的方式

```
<form method="get" action="http://localhost:57688">
<label for="language">hjhj</label>
<select id="language" onchange="readLanguageCookie()">
<option value="en">English</option>
<option value="nl">Dutch</option>
</select>
</form> 
```

饼干详情：

```
Name    language
Value   en
Host    localhost
Path    /
Secure  No
Expires Thu, 02 Aug 2012 20:47:11 GMT 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T12:13:06.630

可能是硬编码日期的原因？：

```
 document.cookie = 'language=en; expires=Thu, 2 Aug 2012 20:47:11 UTC; 
```

# spring - 您如何为视频大小或图片大小的不同 maxUploadSize 配置 MultipartResolver？

> ID：11082336
> 
> 赞同：2
> 
> 时间：2012-06-18T11:57:41.333
> 
> 标签：spring, spring-mvc, upload, multipart

我想为视频文件和其他图片文件定义一个**MultipartResolver ，但大小不同。**

```
<!-- Configure the multipart resolver -->
<beans:bean id="multipartResolver"      class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
 <!-- one of the properties available; the maximum file size in bytes -->
 <beans:property name="maxUploadSize" value="100000000"/>        
</beans:bean> 
```

任何想法？

一种解决方案是在上传后使用**spring 验证器**验证文件，但文件已上传......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:48:58.457

可能发生的一件事是，您可以在文件转到服务器之前使用 Javascript（如果您使用的是 HTML5）在客户端检查文件的大小。

[HTML5](https://stackoverflow.com/questions/7133870/check-filesize-before-upload)具有检查文件大小的功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:30:58.320

您可以执行以下操作举个例子，视频文件最大大小 = 1000，图片文件最大大小 = 500

然后在 multipartResolver bean 中为“maxUploadSize”属性定义最高值为 1000。因此，对于视频和图片，Spring 将首先检查最大尺寸限制为 1000。

然后您需要编写自定义代码来验证图片文件以允许最大大小为 500。请查看 [http://www.roseindia.net/tutorial/spring/spring3/web/spring-3-mvc-fileupload-example 上的示例代码。 html](http://www.roseindia.net/tutorial/spring/spring3/web/spring-3-mvc-fileupload-example.html)

或者

检查某些方法，例如 mr.setMaxUploadSize(10000); 使用它可以在运行时将最大大小设置为 multipartResolver bean。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T08:37:19.467

我可以提供使用接口 MultipartResolver 的一些复合实现，它采用 MultipartResolver 列表，您可以根据传入请求的某些标识来定义 MultipartResolver 使用的内容。

# php - 如何制作可执行的phar？

> ID：11082337
> 
> 赞同：8
> 
> 时间：2012-06-18T11:57:43.050
> 
> 标签：php, shebang, phar

我想将 phar 脚本作为可执行文件直接启动，`foo.phar <params>`而不是`php foo.phar <params>`.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-18T11:57:44.127

通过修改默认存根（添加与php对应的shebang）很容易。

```
// start buffering. Mandatory to modify stub.
$phar->startBuffering();

// Get the default stub. You can create your own if you have specific needs
$defaultStub = $phar->createDefaultStub('index.php');

// Adding files
$phar->buildFromDirectory(__DIR__, '/\.php$/');

// Create a custom stub to add the shebang
$stub = "#!/usr/bin/php \n".$defaultStub;

// Add the stub
$phar->setStub($stub);

$phar->stopBuffering(); 
```

# android - Android RequestFocus() 无效

> ID：11082341
> 
> 赞同：4
> 
> 时间：2012-06-18T11:57:57.677
> 
> 标签：android, focus, android-edittext

我希望我的应用程序中的 EditText 在应用程序启动时默认具有光标。我尝试使用

```
<EditText
    android:id="@+id/idInput"
    android:layout_width="480dp"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:ems="10" >

    <requestFocus />
</EditText> 
```

并且

```
userIdInput = (EditText)findViewById(R.id.idInput);
userIdInput.setFocusable(true);
userIdInput.setFocusableInTouchMode(true);
userIdInput.requestFocus(); 
```

但似乎没有任何效果。应用程序启动时光标无处可见，我必须手动单击 EditText 以使光标出现在其上。

我哪里可能出错了？

顺便说一句，我正在为 Android 4.0.3 平板电脑开发。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-18T12:08:32.277

尝试这个

```
userIdInput = (EditText)findViewById(R.id.idInput);

userIdInput.post(new Runnable() 
    {
      public void run() 
       {
        userIdInput .requestFocus();
       }
    }); 
```

# objective-c - 带参数的 init 和 init

> ID：11082342
> 
> 赞同：0
> 
> 时间：2012-06-18T11:57:57.963
> 
> 标签：objective-c, class, initialization

这是代码：

```
@implementation Accumulateur

    // Constructor
    - (id) init
    {
        return ([self initWithTotal:0]);
    }

    - (id) initWithTotal:(int)aTotal
    {
        AccumulateurMoyen   *ac;

        if ((ac = [[AccumulateurMoyen alloc] init]) == nil)
        {
            [self release];
            return (nil);
        }
        return ([self initWithTotal:aTotal andAccumulateurMoyen:ac]);
    }

    - (id) initWithTotal:(int)aTotal 
    andAccumulateurMoyen:(AccumulateurMoyen *)aAcMoyen
    {
        if (self = [super init])
        {
            [aAcMoyen retain];
            [acMoyen release];
            acMoyen = aAcMoyen;
            total = aTotal;
        }
        return (self);
    }
@end 
```

问题就在这里： `if ((ac = [[AccumulateurMoyen alloc] init]) == nil)` 当我重新定义`init`时，被`init`调用的是我的，而不是`NSObject`......我不知道，我怎么能正确地做到这一点（`AccumulateurMoyen`是子类`Accumulateur`）

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:40:34.043

您可能在那里有不希望的递归：`[[AccumulateurMoyen alloc] init]`尝试创建新的`AccumulateurMoyen`但导致嵌套`initWithTotal:`再次尝试创建另一个`AccumulateurMoyen`实例等。

即，您的代码尝试创建`Accumulateur`将成员`acMoyen`设置为的新实例`AccumulateurMoyen`，再次将其`acMoyen`设置为`AccumulateurMoyen`等的另一个新实例。

你必须打破无休止的递归。例如`initWithTotal:`，替换行

```
if ((ac = [[AccumulateurMoyen alloc] init]) == nil) 
```

和

```
if ((ac = [[AccumulateurMoyen alloc] initWithTotal:0 andAccumulateurMoyen:nil]) == nil) 
```

即嵌套`AccumulateurMoyen`的成员将设置为`nil`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:17:15.703

抱歉，但我认为您在这里遇到了结构性问题。为什么你的超类需要引用扩展它的类？我认为你最好的选择是再想想你的班级结构将如何。

但是在您的子类中，您可以将 init 方法更改为，这样您的问题就会消失。

```
(id)init {
    return ([NSObject init]);
} 
```

# c++ - 如何删除在设计器模式下创建的插槽？

> ID：11082348
> 
> 赞同：17
> 
> 时间：2012-06-18T11:58:18.137
> 
> 标签：c++, qt, user-interface, qt4, qt-designer

我已经创建了按钮`cancelButton`。然后我`on_cancelButton_clicked()`使用 context menu item 为它创建了函数槽`Go to slot`。但是，过了一会儿，我删除了这个按钮（不再需要它），并试图删除那个函数，但是编译器给出了错误`undefined reference to <class_name>::on_cancelButton_clicked()`。

我已经清理了构建文件夹（并删除了它），检查了 ui 文件中可以指向此函数的某些行，但我没有找到任何东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-18T10:29:28.697

解决方法很简单。我没有`<class_name>::on_cancelButton_clicked()`从头文件中删除声明。（由[Ammar](https://stackoverflow.com/users/447144/ammar "阿马尔")发布，在[此处](https://stackoverflow.com/questions/11082348/how-to-remove-slot-created-in-designer-mode#comment14510244_11082348)发布）

# android - android:scrollHorizo ntally 不适用于三星 Galaxy Nexus

> ID：11082349
> 
> 赞同：1
> 
> 时间：2012-06-18T11:58:19.527
> 
> 标签：android, xml, android-layout, user-interface, marquee

在我的音乐播放器应用程序中，我有一个带有 Artist、Title 等的 TextView，它在 View 中水平滚动。（就像旧的 html marquee 标签一样）。它适用于 Xperia Arc 上的 Android 2.3.4，但不适用于三星 Galaxy Nexus（文本仅显示而不滚动）。TextView 是这样定义的。在代码中，它只是设置了匹配的 Songtext。

```
 <TextView
        android:id="@+id/songArtist"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ellipsize="marquee"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:marqueeRepeatLimit="marquee_forever"
        android:scrollHorizontally="true"
        android:textColor="#FFFFFA" / 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:12:02.383

我找到了一种方法 - 添加：

```
 android:singleLine="true" 
```

诀窍...

# mysql - Mysql - SELECT查询中的不同列名

> ID：11082353
> 
> 赞同：0
> 
> 时间：2012-06-18T11:58:30.207
> 
> 标签：mysql, database, select

我目前正在准备一个主要的程序更新并遇到以下问题：我在 Mysql-Database 中有一个表，看起来（大致）像这样：

```
+-----------------------+--------------+------+-----+---------+----------------+
| Field                 | Type         | Null | Key | Default | Extra          |
+-----------------------+--------------+------+-----+---------+----------------+
| ID                    | int(15)      | NO   | PRI | NULL    | auto_increment |
| Versionnumber         | decimal(5,3) | NO   | UNI | NULL    |                |
| ChangeLog             | text         | NO   |     | NULL    |                |
| ReleaseDate           | datetime     | NO   |     | NULL    |                |
| Enabled               | tinyint(1)   | NO   |     | 1       |                |
+-----------------------+--------------+------+-----+---------+----------------+ 
```

现在我已将（前）列“ID”的列名更改为“VersionID”。这意味着表格现在看起来像这样：

```
+-----------------------+--------------+------+-----+---------+----------------+
| Field                 | Type         | Null | Key | Default | Extra          |
+-----------------------+--------------+------+-----+---------+----------------+
| VersionID             | int(15)      | NO   | PRI | NULL    | auto_increment |
| Versionnumber         | decimal(5,3) | NO   | UNI | NULL    |                |
| ChangeLog             | text         | NO   |     | NULL    |                |
| ReleaseDate           | datetime     | NO   |     | NULL    |                |
| Enabled               | tinyint(1)   | NO   |     | 1       |                |
+-----------------------+--------------+------+-----+---------+----------------+ 
```

现在我的问题如下：有没有办法在不确切知道列名是“VersionID”还是“ID”的情况下执行“SELECT”查询？类似的东西（伪代码）

```
SELECT (ID OR VersionID) AS VersionID FROM versions; 
```

所以我需要的是类似“或子句”的列名。存在这样的东西吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:04:32.797

不，我认为你不能这样做。使用 SELECT * FROM 知道列的名称

# tfs - 保持任务迭代与用户故事迭代同步

> ID：11082358
> 
> 赞同：6
> 
> 时间：2012-06-18T11:58:38.730
> 
> 标签：tfs, tfs-workitem

当我在 TFS 2010 中将用户故事从一个迭代移动到另一个迭代时，我必须手动更新每个子任务中的迭代。否则，它会保留先前的迭代值，并且各种报告和过滤器不会产生预期的结果。

任何人都可以推荐一种方法或扩展，它可以使任务迭代自动与他们的用户故事迭代保持同步，或者如果失败了，就按需为产品中的所有用户故事/任务做这件事吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T12:36:24.857

尝试[**TFS 聚合器**](https://github.com/tfsaggregator/tfsaggregator)

## 示例用途

*   当孩子移动到“进行中”时，将错误、PBI（或任何父级）的状态更新为“进行中”
*   当所有子级移动到“完成”或“已移除”时，将 Bug、PBI（或任何父级）的状态更新为“完成”
*   用所有任务的“剩余工作”的总和来更新 Bug、PBI 等上的“剩余工作”。
*   将 Sprint 上的“Work Remaining”更新为其孙辈的所有“Work Remaining”（即 Sprint 中的 PBI 和 Bugs 的任务）的总和。
*   总结单个工作项的总计（即开发估计 + 测试估计 = 总估计）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:36:38.997

您可以导出 Excel 中的所有工作项并将它们批量编辑为新值。
为此，您需要维护工作项查询并将所有 WI 包含在一个团队项目中。通常，当新的迭代即将开始时，这是一项在计划扑克期间停止的活动。

我发现A.Bjork 的[这个](http://www.slideshare.net/aaronbjork/scrum-with-tfs-2010)演示文稿对于如何执行（除其他外）类似的任务非常有用。

# html - 叠加层上的垂直滚动条

> ID：11082359
> 
> 赞同：2
> 
> 时间：2012-06-18T11:58:41.867
> 
> 标签：html, css

我创建了一个宽度为 700 像素、高度为 500 像素的叠加层。不过它的内容会很长，因此用户必须能够在叠加层中向上/向下滚动。

考虑到每个浏览器中滚动条的宽度不同这一事实，我能否获得有关如何设置的建议？

例如，如果我将 15px 的 padding-right 添加到覆盖包装器中，它在 Firefox 中会显示得很好。内容将完全适合 div 并且不会出现水平条。

但是在另一个浏览器中，垂直滚动条可能是 20px 宽，这会导致内容被强制水平滚动，或者，如果我禁用 overflow-x，它们会在右侧被截断 5px。

我怎样才能得到它，无论浏览器如何，当垂直滚动条出现时，覆盖包装的宽度都会调整，使其内容可以在没有水平滚动条的情况下完美显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:11:49.983

[溢出属性](http://www.w3schools.com/cssref/pr_pos_overflow.asp)听起来像你需要的：`overflow:scroll;`？但我想我不确定您对不同宽度的滚动条的关注是什么。如何设置这是可变的？

或者以不同的方式看待您的问题，将带有覆盖包装器的 div 放在另一个 div 中，并让新 div 具有滚动属性，从而使其第一个直接与滚动条无关。例如：[[链接](http://jsfiddle.net/Kyomu/gxRhW/)]

**编辑：**看看你提供的例子，你想要这样的东西[吗](http://jsfiddle.net/Kyomu/gxRhW/6/)？技巧就像我上面所说的，将 div 放在所有东西周围，而不是给它一个宽度并让它`display:inline-block;`（[display](http://www.w3schools.com/cssref/pr_class_display.asp)）所以它适合孩子（但滚轮留在孩子外面）。

**编辑 2：**请注意，如果您需要它在屏幕上居中，则必须有另一个父 div 围绕 inline-block ，并且有 inline-block `text-align:center;`。（[示例](http://jsfiddle.net/Kyomu/gxRhW/7/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:14:05.673

使用 max-width 和 jquery 滚动条插件 jscrollpane。

如果需要，您可以为每个浏览器定义滚动条宽度和样式。

[http://jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)

# java - Java Hibernate Criteria 选择子类

> ID：11082364
> 
> 赞同：2
> 
> 时间：2012-06-18T11:58:51.317
> 
> 标签：java, hibernate, criteria-api

我想使用 Criteria API 通过从搜索值中获取输入来选择实体。一个文档可以有多个收件人。收件人有许多子类

```
@Entity
public class Document implements Serializable {
  @OneToMany(mappedBy="document")
  private List<Recipient> recipients = new ArrayList<Recipient>();

@Entity
public class RecipientAccount extends Recipient {
  String name; 
```

如何选择具有特定名称的 ReciepientAccount 的所有文档？我需要搜索所有子类并将它们与 OR 连接起来。有没有优雅的方法？

问候米

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T14:13:42.367

以下应该有效：

```
Criteria c = session.createCriteria(Document.class, "document");
c.createAlias("document.recipients", "recipient");
c.add(Restrictions.in("recipient.class", Arrays.asList(SubClass1.class, 
                                                       SubClass2.class,
                                                       SubClass3.class)));
c.add(Restrictions.eq("recipient.name", theName)); 
```

# php - PHP：htmlentities 和 htmlspecialchars 不转换某些字符

> ID：11082365
> 
> 赞同：1
> 
> 时间：2012-06-18T11:58:57.147
> 
> 标签：php, mysql, html-entities, htmlspecialchars

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:09:22.137

`header()`如果您通过以下命令将网站的编码更改为 UTF-8，也许就足够了：

`header("Content-Type: text/html; charset=utf-8");`在 PHP 中

或者

`<?xml version="1.0" encoding="utf-8" ?>;`如果您使用一个，则位于 HTML 模板的顶部。

但是，如果您确实需要将这些字符转换为其特定的 html 代码，您应该创建自己的函数来替换未涵盖的符号`htmlspecialchars()`。

# c# - Bind checkbox in Listbox programmatically in C#/WP7

> ID：11082366
> 
> 赞同：0
> 
> 时间：2012-06-18T11:58:57.010
> 
> 标签：c#, windows-phone-7, checkbox, listbox, bind

Using a Listbox, how to have checkboxes for each item that can be added/removed by code , not xaml.

the Simplest example is welcome.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:03:31.680

除了复选框，尝试在堆栈面板中添加一些控件。我希望这个能帮上忙

将 StackPanel 添加到网格（称为 InputList）：

```
 for(int i = 0; i < 5;i++)
  {

    var checkbox = new CheckBox
    {
      Content = "inbox",

      HorizontalAlignment = HorizontalAlignment.Left,

      VerticalAlignment = VerticalAlignment.Top,

      FontFamily = new FontFamily("Calibri"),

      FontSize = 30
    };

    InputList.Children.Add(checkbox);

  } 
```

# php - Easy modification to show the image instead of the url

> ID：11082367
> 
> 赞同：-2
> 
> 时间：2012-06-18T11:58:58.863
> 
> 标签：php

How do I show the image instead of the url?

```
echo "<b>Image: </b> http://graph.facebook.com/" . $posts['from']['id'] ."/picture?type=large</br>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:00:30.410

Simply use the `<img>` tag with `src` set to your url:

```
echo "<b>Image: </b> <img src='http://graph.facebook.com/"
      . $posts['from']['id'] ."/picture?type=large'></br>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:00:21.697

try:

```
echo "<b>Image: </b><img src='http://graph.facebook.com/" . $posts['from']['id'] ."/picture?type=large'/></br>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:00:48.753

```
<img src="http://graph.facebook.com/".$posts['from']['id'] 
         ."/picture?type=large"> 
```

这将构建正确的标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T12:00:52.917

```
echo '<b>Image: </b> <img src="http://graph.facebook.com/' . $posts['from']['id'] . '/picture?type=large" /><br />'; 
```

或者，不使用串联：

```
<b>Image: </b> <img src="http://graph.facebook.com/<?php echo $posts['from']['id']; ?>/picture?type=large" /><br /> 
```

或使用短标签：

```
<b>Image: </b> <img src="http://graph.facebook.com/<?=$posts['from']['id']?>/picture?type=large" /><br /> 
```

# c# - Stop StoryBoard from been launched at project startup

> ID：11082368
> 
> 赞同：1
> 
> 时间：2012-06-18T11:58:59.230
> 
> 标签：c#, visual-studio-2010, animation, storyboard, blend

I've created a project in Visual Studio and I opened it in Blend so I can do some animations.

I've created two animation using the StoryBoard and associated every animation to a different button (in the Clic action).

My problem is that the the two animations are starting when I launch the application, and what I want to do is to stop them until the button is triggered.

How can I achieve that ?

`EDIT`

This is my source code.

```
<s:SurfaceWindow.Resources>
<Storyboard x:Key="StoryboardStart" x:Name="SBStrt">
    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="image">
        <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
    </DoubleAnimationUsingKeyFrames>
</Storyboard>
<Storyboard x:Key="StoryboardStop" x:Name="STStp">
    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="image">
        <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="0"/>
        <EasingDoubleKeyFrame KeyTime="0:0:1" Value="1"/>
    </DoubleAnimationUsingKeyFrames>
</Storyboard> 
```

And in the .cs constructor I have this

```
public SurfaceWindow1()
{
    InitializeComponent();

    // Add handlers for window availability events
    AddWindowAvailabilityHandlers();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:16:30.363

也许动画从 initializecomponent 方法开始。尝试编辑表单的设计器文件。搜索定义 StoryBoard 的行并尝试找到启动动画的行。

如果您想禁用它，请将其转换为评论，以便稍后将其打开。为了更好地回答你的问题，我需要一些代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:36:23.590

我想我知道你想要什么。。

您可以使用在表情混合行为下的**控制故事板动作资产。**

您只需将一个控制故事板动作拖到一个按钮上，对于这个控制故事板动作，您必须选择一个事件名称作为鼠标左键按下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-19T17:39:14.053

我知道你的问题出在哪里。它在您的窗口 XAML 文件中。进入混合并选择你的故事板。选择启动时出现的动画并检查底部窗格中显示的 XAML 文件。在此 XAML 文件中查找 Window.Triggers 并删除开始情节提要。

[![清除所有你不想从你的应用程序开始的内容。例如，我的没有。]](http://i.stack.imgur.com/yCADh.png) [1](http://i.stack.imgur.com/yCADh.png)

# c++ - C++ templates: separation of definition and implementation using template arguments

> ID：11082370
> 
> 赞同：0
> 
> 时间：2012-06-18T11:59:11.440
> 
> 标签：c++, templates, visual-c++, c++11

To be honest, I do not really know how to name that problem. I'll just show the code that is not working:

```
template<int SIZE>
struct bar{

};

template<int SIZE>
struct foo{
    template<int X>
    void f(bar<X> b);
};

template<int SIZE, int X>
void foo<SIZE>::f(bar<X> b){

}

int main(){
    foo<1> f;
    bar<2> b;
} 
```

I'd like to separate definition from implementation to avoid cyclic dependency issues. Separation is done in header files only, I don't want to put template code into cpp files. Using pointers is no option in that case. Refactoring has been considered but is not a real option, either.

Implementing foo::f without a parameter that has template parameters itself is working fine. I do not really get the problem with that parameter, though.

Code should work using gcc 4.7 and (even more important) Visual Studio 2010\. C++11 is ok as long as supported by the platforms mentioned.

Solutions, workarounds as well as theoretical explanations why I'm doing something completly wrong will be highly appreciated. TIA.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T12:02:19.837

```
template<int SIZE, int X>    //problem : what is what here?
void foo<SIZE>::f(bar<X> b){

} 
```

这是错误的语法。

正确的语法是使用`template`两次：

```
template<int SIZE>   //for the class template
template<int X>      //for the member function template
void foo<SIZE>::f(bar<X> b){

} 
```

请注意，这里的顺序很重要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T12:01:56.947

这是正确的语法：

```
template<int SIZE>
template<int X>
void foo<SIZE>::f(bar<X> b){

} 
```

否则，您会说这`foo`是一个带有 2 个模板参数的类模板。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-18T12:03:13.310

有两个级别的模板，您必须分别指定它们

```
template<int SIZE>
template<int X>
void foo<SIZE>::f(bar<X> b){  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T12:04:05.143

循环依赖是你的主要问题。你真的需要它们吗？尝试以一种依赖关系形成有向无环图的方式来解决您的问题，而且通常情况下，您最终会得到一个更好的解决方案。

如果你不能打破循环依赖，那么也许你应该重新考虑这两个模板是否应该在不同的组件中（在这种情况下是标题），因为如果没有另一个，这两个模板似乎都不有效。

# jasper-reports - JasperServer - 输入控件的空值

> ID：11082379
> 
> 赞同：0
> 
> 时间：2012-06-18T12:00:03.947
> 
> 标签：jasper-reports, jasperserver

最近，当用户在输入控件中输入空值时，我得到了一些分组帮助（[Jaspersoft iReport 中的“汇总”组](https://stackoverflow.com/questions/10897962/rolling-up-groups-in-jaspersoft-ireport)）。我正在使用 iReport/JasperServer Professional 4.5.1。我的三个分组级别是药房、设施和包装类型。

将报告部署到 后`JasperServer`，我遇到了一些空值问题。我为我的输入控件取消选中“始终提示”，当报表第一次打开时，它的行为就好像它已经适当地接收到所有输入控件和组的空值（这是我想要的）。我的输入控件的显示模式是“in page”，因此它们显示在屏幕的左侧。然后，当我尝试选择一家药房并重新运行报告时（预计设施和包装类型的聚合值，因为我没有为这些控件选择任何内容），报告的执行就像聚合代码不存在一样，并列出所有设施和所有包装类型。

但是 - 如果我将一个选定的药房保存为保存的输入控件，然后返回存储库并使用保存的输入控件运行报告，它工作正常，并聚合所有设施和包装类型数据。

有什么想法吗？

谢谢，
丽莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:19:47.143

我的输入控件是多选查询，我的参数是集合。我发现当我第一次通过单击存储库中的链接进入报告时，报告被发送空值。但是，当我在 JasperServer 中打开报告后尝试再次运行报告时，我正在生成空列表。

Matthew Dahlman 建议我在 iReport 中创建参数来处理空值并“汇总”我的分组。这些参数看起来像：

```
 $P{packtype}==null ? " 'All Package Types' " : " FAC.PACKTYPE_CODE " 
```

这在 iReport 和第一次在 JasperServer 中打开报表时效果很好。要处理空列表和空值，我必须将参数更改为：

```
 $P{packtype} == null ? " 'All Package Types' " :
 ($P{packtype}.isEmpty() ? " 'All Package Types' " :
 " FAC.PACKTYPE_CODE ") 
```

# git - 如何在开源项目中隐藏私人信息？

> ID：11082390
> 
> 赞同：2
> 
> 时间：2012-06-18T12:00:33.500
> 
> 标签：git, version-control, open-source

最近，我一直在开发一个具有客户端和服务器的开源代理。客户端和服务器都有脚本。

服务器端可以运行在云平台上，客户端连接服务器。

我在Heroku上注册了一个用于调试服务器的应用程序，该应用程序的地址暂时写在客户端脚本中。

这就是环境。但显然服务器的地址只是为了个人调试。我不想公开。

我目前的方法是，每次在我提交到存储库之前，我都会删除该地址，并在提交后将其添加回来。这显然不是一个好方法。

这种现象应该很普遍。人们通常如何处理它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T12:04:01.237

有一个`config.ini`从 git 中排除的配置文件（例如 ）（即，将其添加到您的项目中[`.gitignore`](http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository#Ignoring-Files)）并包含一个示例配置（`config.example.ini`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:04:10.800

将信息存储在环境变量或源代码树之外的文件中。

对于更复杂的项目，您可以将其作为参数提供给构建脚本。

# excel - SSIS动态excel列标题

> ID：11082392
> 
> 赞同：3
> 
> 时间：2012-06-18T12:00:43.883
> 
> 标签：excel, dynamic, import, header, ssis

我在使用 SSIS 时遇到问题，希望有人可以帮助我。我是这个 Microsoft 软件的新手，我被要求从一个包含 13 周的 Excel 计划文件中导入数据。因此数据在 Excel 文件中显示如下：

```
Person id | Person age| School activity | Activity leader| 18-06-2012 | 25-06-2012 | ..(more weeks)

1452      | 14        | Painting        | John Smith     | 2          | 6          | ... 
```

其中 2 和 6 代表每周在此活动上花费的小时数。

虽然，人员 ID、人员年龄、学校活动和活动负责人是此 excel 文件中的静态列标题，但在文件之间更改时，周列标题。

因此，我不知道如何将这样的数据文件导入我的数据库，因为我遇到了从一个文件到另一个文件的映射问题。

我希望将数据作为每个星期列的单独行放入数据库中，因此我使用 unpivot 转换来实现这一点。我想要的是无论列标题如何都能够导入数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T13:07:52.067

如果数据可以以 CSV 格式提供，则可以使用平面文件源，然后跳过标题行，只要始终有相同数量的列具有相同的、可预测的格式。

您在讨论中提到您将使用 unpivot 转换将数据转换为单独的行，因此您知道如何完成其​​余的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:05:41.463

我最近不得不解决这个问题。我发现的最大问题是带有 Excel 的 SSIS 需要一组静态列。

因此，我获取了一组文件并为每个文件构建了一个类似的数据流（仅在列不同的地方有所不同）。然后，我使用文件枚举器放置一个控制流来获取所有文件并根据文件名做出关于要使用的数据流的决定。

它并不优雅——但效果很好。

# internet-explorer - 如何在多个浏览器上运行 jBehave 测试？

> ID：11082398
> 
> 赞同：1
> 
> 时间：2012-06-18T12:00:52.280
> 
> 标签：internet-explorer, google-chrome, browser, selenium, jbehave

我目前在当前浏览器上运行 JBehave Selenium 测试，我使用 PropertyWebDriverProvider() 来设置我的浏览器。有我的代码：

公共类 PlayerLandingPageRunner 扩展 JUnitStories {

```
private WebDriverProvider driverProvider = new PropertyWebDriverProvider();
private WebDriverSteps lifecycleSteps = new PerStoriesWebDriverSteps(driverProvider);
private Pages pages = new Pages(driverProvider);
private SeleniumContext context = new SeleniumContext();
private ContextView contextView = new LocalFrameContextView().sized(500, 100);

public PlayerLandingPageRunner() {
    if ( lifecycleSteps instanceof PerStoriesWebDriverSteps ){
        configuredEmbedder().useExecutorService(MoreExecutors.sameThreadExecutor());
        configuredEmbedder().useMetaFilters(asList("-skip"));
    }
}

@Override
public Configuration configuration() {
    Class<? extends Embeddable> embeddableClass = this.getClass();
    return new SeleniumConfiguration()
            .useSeleniumContext(context)
            .useWebDriverProvider(driverProvider)
            .useStepMonitor(new SeleniumStepMonitor(contextView, context, new SilentStepMonitor()))
            .useStoryLoader(new LoadFromClasspath(embeddableClass))
            .useStoryReporterBuilder(new StoryReporterBuilder()
                .withCodeLocation(codeLocationFromClass(embeddableClass))
                .withDefaultFormats()
                .withFormats(CONSOLE, TXT, HTML, XML));
} 
```

...

如何设置它以在其他浏览器上运行？IE，铬？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:08:57.973

[您应该使用此处](http://jbehave.org/reference/web/stable/javadoc/web-selenium/org/jbehave/web/selenium/PropertyWebDriverProvider.html "PropertyWebDriverProvider JavaDoc")描述的值之一将“浏览器”系统属性传递给 JVM 。

**以下是设置测试以在 Chrome 上运行的方法。**

如果您在命令行中运行，只需像这样传递它

```
java -Dbrowser=chrome ... 
```

如果您使用的是 Eclipse，请打开*Run Configurations*，选择用于运行测试的配置并附加到*VM 参数*文本框中`-Dbrowser=chrome`。

# linux - shell 脚本如何判断它是否在支持 256 色的 xterm 窗口中运行？

> ID：11082407
> 
> 赞同：6
> 
> 时间：2012-06-18T12:01:17.917
> 
> 标签：linux, shell, colors, xterm, terminfo

我正在编写一个 shell 脚本，我想在存在时使用 256 色支持。在一个公正的世界中，`xterm`只需将`TERM`环境变量设置为，`xterm-256color`然后我会使用它`tput colors`来发现支持。

但我们生活在一个不公正的世界。 `xterm`设置`TERM`为`xterm`即使使用`TERM=xterm-256color`. 我可以从 shell 脚本中做些什么来发现脚本是否正在运行，stdout 连接到在 256 色`xterm`窗口中运行的 tty？如果是这样，我可以自己设置环境变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:11:55.897

您可以检查 xterm 版本 - $XTERM_VERSION。虽然我不确定 xterm 从哪个版本开始支持 256 色。其他终端（例如 gnome-terminal）的行为与 xterm 类似，但也将 COLORTERM 变量设置为正确的终端名称（gnome-256color）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T03:54:21.310

由于现在大多数`xterm`-s 都是彩色的，所以我假设终端有 256 种颜色，并让脚本接受一个选项（可能是`-monochrome`or `-no-colors`），否则。

顺便说一句，我也看到了一些高级用户强制`-monochrome` 行为的原因：在非常慢的连接上（想想 intercontinental `ssh`），禁用颜色以降低带宽可能很有用。

# unit-testing - 在 nodeunit 中是否有与 assertFalse 等价的东西？

> ID：11082408
> 
> 赞同：4
> 
> 时间：2012-06-18T12:01:26.290
> 
> 标签：unit-testing, node.js, nodeunit

使用[nodeunit](https://github.com/caolan/nodeunit)是否有断言来检查错误值？其他测试框架有类似的东西`assertFalse`，我应该使用类似的东西：

```
test.ok(!shouldBeFalse()); 
```

或者

```
test.equals(shouldBeFalse(), false); 
```

或者有没有添加错误断言的项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:10:22.630

如果你想确定 only`boolean` `false`比使用匹配[`strictEqual`](http://nodejs.org/docs/v0.4.2/api/assert.html#assert.strictEqual)：

```
test.strictEqual(shouldBeFalse(), false) 
```

否则[`equal`](http://nodejs.org/docs/v0.4.2/api/assert.html#assert.equal)也可以。

# python - Grep-ing 项目中的类/函数

> ID：11082409
> 
> 赞同：1
> 
> 时间：2012-06-18T12:01:28.420
> 
> 标签：python, search, vim, tags, grep

grep（或vim）有没有办法打印出命名的函数/类？

即来自：

```
 class InternalTimer(Sim.Process):
        def __init__(self, fsm):
            Sim.Process.__init__(self, name="Timer")
            random.seed()
            self.fsm = fsm

        def Lifecycle(self, Request):
            while True:
                yield Sim.waitevent, self, Request
                yield Sim.hold, self, Request.signalparam[0]
                if(self.interrupted()):
                    self.interruptReset()
                else:
                self.fsm.process(Request.signalparam[1]) 
```

调用`$my-func-grep '__init__(self,fsm)' filename.py`会产生

```
 def __init__(self, fsm):
            Sim.Process.__init__(self, name="Timer")
            random.seed()
            self.fsm = fsm 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:07:37.330

您可以创建一个 vim 扩展来有效地执行以下操作：

```
import inspect
print inspect.getsource(name_of_function) 
```

这将打印函数签名和函数体。如果 Vim 已在 Python 支持下编译，您可以在 Python 本身中编写扩展。

# windows-phone-7.1 - 在 Windows Phone 的页面中添加用户控件

> ID：11082416
> 
> 赞同：3
> 
> 时间：2012-06-18T12:01:57.087
> 
> 标签：windows-phone-7.1

我有一个 Windows Phone 应用程序，我需要在其中一个页面中添加一个用户控件。我想像在 asp.net 页面中一样添加它，而不是作为弹出窗口。如何将此用户控件添加到页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:03:14.703

假设您的 UserControl 格式如下：

```
<UserControl x:Class="UserControlExample.NameReporter"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" >

<!-- Controls here -->

</UserControl> 
```

当你创建一个新的 UserControl 并且后面的代码类似于

```
using System.Text;
using System.Windows;
using System.Windows.Controls;

namespace UserControlExample
{
    public partial class NameReporter : UserControl
    {
        public NameReporter()
        {
            InitializeComponent();
        }

        // your custom methods here
    }
} 
```

然后，您应该能够使用类似于的代码将其添加到页面中

```
<Grid xmlns:src="clr-namespace:UserControlExample" 
        Background="White" Margin="0,50,0,0">
  <Grid.RowDefinitions>
    <RowDefinition Height="Auto"/>
    <RowDefinition Height="Auto"/>
  </Grid.RowDefinitions>
  <src:NameReporter Grid.Row="0"/>
  <src:NameReporter Grid.Row="1" Margin="0,15,0,0"/>
</Grid> 
```

只需更改之后的命名空间`clr-namespace:`和之后的控件名称`src:`

您可以将`xmlns:`标签放入`<phone:PhoneApplicationPage>`标签中，以在整个表单中使用控件（而不仅仅是在网格中），您可以将其更改`src`为您希望引用的任何内容。

如果正确创建了 UserControl，则编译解决方案应该意味着它也会出现在您的工具箱中以供使用，因此您只需拖放即可。

有关更完整的示例，请参阅参考资料。

> 参考：
> 
> [http://msdn.microsoft.com/en-us/library/system.windows.controls.usercontrol%28v=VS.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.usercontrol%28v=VS.95%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-29T03:11:56.330

对于 Windows Phone 8 和 Windows Phone 8.1，我可以通过执行以下操作来完成此操作：

创建您的用户控件。在这个例子中，我创建了一些矩形来模仿经典的移动菜单按钮。

![您的用户控件](../Images/92fcfc42bad5678b139906e122606294.png)

**构建解决方案**。项目将更新，您现在将在工具箱中看到您的用户控件。

![工具箱](../Images/b3f6dc976dc75cc0709682f9c683cae2.png)

只需将您的用户控件拖出工具箱，然后将其放在您希望使用您的用户控件的 XAML 页面中。

![使用中的用户控件](../Images/5f18a05fc3752fb3ef2816b15a4232e0.png)

# sql - 获取用于声明的列创建数据类型

> ID：11082418
> 
> 赞同：2
> 
> 时间：2012-06-18T12:02:03.553
> 
> 标签：sql, sql-server, sql-server-2008, tsql

有没有一种快速的方法来获取包含列声明所需的 sql 数据类型的字符串，基于数据库中的列/列信息。

例如，我希望返回字符串，例如：

```
varchar(200)
datetime
numeric(35,5) 
```

`SYS.COLUMNS`显然，我可以从自己或从中获取生成此信息所需的信息`INFORMATION_SCHEMA.COLUMNS`并开始处理这些信息，但我想要一种（最好是 MS 提供的）方法来自动将数据类型/最大长度/精​​度/比例信息转换为列声明数据类型。

我猜想如果有一种标准的方法可以做到这一点，它将处理所有可能的数据类型，这将是一个痛苦的尝试手动覆盖。

编辑：对不起 - 似乎我对我想要的东西还不够清楚。

例如，当您`CREATE`在 SSMS 中为表编写脚本时，生成的脚本包含我想要的格式的数据类型。有没有办法自动获得这些？

编辑：

好的：再来一次：

我想要的有点像这个问题：

[根据列类型声明变量类型](https://stackoverflow.com/questions/2683686/sql-server-declaring-variable-type-based-on-a-column-type)

不同之处在于我不介意必须动态声明变量，因为我已经在使用动态 SQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:06:58.993

恐怕我不知道正确的方法，但我已经尝试过`INFORMATION_SCHEMA.Columns`。这并不漂亮，但确实可以处理数据库默认值、可为空值等。

```
SELECT column_name + ' ' + DATA_TYPE + COALESCE('(' + CASE
                                                        WHEN DATA_TYPE = 'XML' THEN NULL
                                                        WHEN CHARACTER_MAXIMUM_LENGTH = -1 THEN 'max'
                                                        ELSE Cast(CHARACTER_MAXIMUM_LENGTH AS VARCHAR(5))
                                                      END + ')', '(' + Cast(NUMERIC_PRECISION AS NVARCHAR(5)) + ',' + Cast(NUMERIC_SCALE AS NVARCHAR(5)) + ')', '') + ' ' + CASE IS_NULLABLE
                                                                                                                                                                              WHEN 'YES' THEN 'NULL'
                                                                                                                                                                              ELSE 'NOT NULL'
                                                                                                                                                                            END + COALESCE(' DEFAULT' + COLUMN_DEFAULT, '')
FROM   INFORMATION_SCHEMA.Columns
WHERE  table_name = 'mytable' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T15:15:49.140

这是我的工具箱中的一些东西。请注意，它可以自由转换`TEXT`为`VARCHAR(MAX)`. 意见可能会有所不同，但我认为这是一个功能，因为我讨厌`TEXT`类型:)

```
SELECT REPLACE(REPLACE(REPLACE(CASE ORDINAL_POSITION WHEN 1 THEN '' ELSE ', ' END   +'['+column_name+'] '
    +c.DATA_TYPE
    +ISNULL('('+CAST(c.CHARACTER_MAXIMUM_LENGTH AS VARCHAR(30))+')','')
    +CASE WHEN c.DATA_TYPE IN ('NUMERIC','DECIMAL') THEN
        ISNULL('('+CAST(c.NUMERIC_PRECISION AS VARCHAR(30))+','+CAST(c.NUMERIC_SCALE AS VARCHAR(30))+')','')
        ELSE '' END
    +' ','text(2147483647)','varchar(max)'),'(-1)','(max)')

    -- These last two are optional
    +isnull(CASE WHEN c.IS_NULLABLE='NO' THEN 'NOT ' ELSE NULL END,'')
    +'NULL'
    , 'XML(MAX)','XML')
FROM INFORMATION_SCHEMA.COLUMNS c
WHERE TABLE_NAME='MyTable' and TABLE_SCHEMA='dbo'
ORDER BY ORDINAL_POSITION 
```

**编辑**：用 XML 替换 XML(MAX) 结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:07:29.297

```
SELECT
OBJECT_NAME(c.OBJECT_ID) TableName
,c.name AS ColumnName
,t.name AS TypeName
,c.max_length
,c.PRECISION
,c.scale
FROM sys.columns AS c
JOIN sys.types AS t ON c.user_type_id=t.user_type_id
ORDER BY c.OBJECT_ID 
```

我担心无论哪种方式（information_schema.columns）或上面的查询，您都必须“按摩”返回集以生成正确的数据类型声明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T12:15:21.770

第二个结果集`sp_help`呢？我认为您可以很容易地调整该输出以获得您想要的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-25T07:05:17.477

这就是我最终的结果（使用 SQL Server 2014）

```
CREATE FUNCTION dbo.GetTypeDeclaration(@schema AS VARCHAR(MAX), @table AS VARCHAR(MAX), @column AS VARCHAR(MAX)) RETURNS VARCHAR(MAX) AS
BEGIN
    DECLARE @type as SYSNAME
    DECLARE @typeDeclaration as VARCHAR(MAX)
    DECLARE @maxLength AS SMALLINT
    DECLARE @precision AS TINYINT
    DECLARE @scale AS TINYINT

    SELECT @type = ty.name, @maxLength = c.max_length, @precision = c.precision, @scale = c.scale
    FROM sys.tables t
    INNER JOIN sys.columns c ON t.object_id = c.object_id
    INNER JOIN sys.types ty ON ty.user_type_id = c.user_type_id
    WHERE t.schema_id = SCHEMA_ID(@schema) AND t.name = @table AND c.name = @column

    IF @maxLength <> -1 AND @type IN ('nchar', 'nvarchar', 'nvarbinary')
    BEGIN
        SET @maxLength = @maxLength / 2
    END

    IF @type IN ('binary', 'char', 'nchar')
    BEGIN
        SET @typeDeclaration = @type + '(' + CAST(@maxLength AS VARCHAR) + ')'
    END
    ELSE IF @type IN ('datetime2', 'datetimeoffset', 'time')
    BEGIN
        SET @typeDeclaration = @type + '(' + CAST(@scale AS VARCHAR) + ')'
    END
    ELSE IF @type IN ('nvarchar', 'nvarbinary', 'varchar', 'varbinary')
    BEGIN
        SET @typeDeclaration = @type + '(' + CASE WHEN @maxLength = -1 THEN 'max' ELSE CAST(@maxLength AS VARCHAR) END + ')'
    END
    ELSE IF @type IN ('decimal', 'numeric')
    BEGIN
        SET @typeDeclaration = @type + '(' + CAST(@precision AS VARCHAR) + ', ' + CAST(@scale AS VARCHAR) + ')'
    END
    ELSE
    BEGIN
        SET @typeDeclaration = @type
    END

    RETURN @typeDeclaration
END 
```

# ruby-on-rails - Rails、Koala 和 Facebook - 将图片发布到墙上并跟踪点赞数

> ID：11082423
> 
> 赞同：0
> 
> 时间：2012-06-18T12:02:28.083
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, facebook-graph-api, koala

我正在开发一个与 Facebook 进行大量通信的 Rails 应用程序。这个概念是用户可以上传图像，并且会有一种带有这些图像缩略图的画廊和一个“喜欢计数”指示器。我正在使用`koala`宝石。

我成功地将图像发布到我的墙上，如下所示：

```
 if current_user && session[:fb_token]
    @user_graph = Koala::Facebook::API.new(session[:fb_token])
  end
  @user_graph.put_picture(@post.photo.url) 
```

在我的`_post.html.erb`我做这样的事情：

```
<div class="fb-like left_float" data-href="<%= post.photo.url %>" data-send="false" data-layout="button_count" data-width="170" data-show-faces="false" data-font="segoe ui"></div> 
```

如果我只包含来自 facebook 的这个 html 片段，我不会得到正确的结果，因为它指向同一个上传的图像，而不是之前创建的帖子。我想我需要我之前创建的 Facebook 帖子中的某种 post_id 吗？

有任何想法吗 ？

**更新**

put_picture 方法返回以下内容：

```
id: '109668002508542'
post_id: '100003960282996_109668032508539' 
```

[但是当我使用http://graph.facebook.com/109668002508542](http://graph.facebook.com/109668002508542)或检查这些 ID 时

```
@user_graph.get_object('109668002508542') 
```

我没有得到任何信息，没有喜欢，只是一个“假”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:52:30.450

那么，您是否希望统计您上传的照片的点赞数？你不应该为此使用like按钮。您可以使用该`get_connections`方法来检索页面的点赞数。尝试类似的东西

```
<div>
  <%= @user_graph.get_connections(@the_post_id_from_put_picture, "likes") likes
</div> 
```

请记住确保您具有访问对象的正确权限。使用 Koala 中的 OAuth 流程检查您的权限[https://github.com/arsduo/koala/wiki/OAuth](https://github.com/arsduo/koala/wiki/OAuth)

# java - 在 Spring MVC（泛型、反射或其他）中处理泛型实体的最佳方式？

> ID：11082426
> 
> 赞同：0
> 
> 时间：2012-06-18T12:02:35.437
> 
> 标签：java, spring, hibernate, spring-mvc

我有一个名为 Commercial 的实体。我有一个类别实体，其中包含商业类别列表。对于每个类别，都有一个单独的实体扩展 Commercial（如 RestaurantCommercial、PhotoStudioCommercial 等，总共多达 20 个实体），具有 JOINED 继承策略。

商业实体持有一些公司商业广告的标题、文本联系人号码等一般属性，而 RestaurantCommercial 和 PhotoStudioCommercial 持有与该类别相关的其他特定属性。

问题是为每个实体编写一个单独的 dao 和控制器有点大量的工作，所以我正在寻找一种巧妙的方法来处理这个问题。

我需要一个统一的控制器，并且可能是用于处理表单控件和持久化扩展 Commercial 的实体的新实例的 DAO。

这大概是我在想的：

```
@RequestMapping(value={"/vendor/commercial/{categoryName}/new"}, method=RequestMethod.GET)
public String showNewCommercialForm(@PathVariable("categoryName") String categoryName,
                                    Map<String, Object> map) {
    Category category = categoryDAO.getCategoryByServiceName(categoryName);

    Class clazz = Class.forName(category.getClassName()); //here className is smth like domain.commercial.RestaurantCommercial

    map.put("commercialInstance", clazz.newInstance());
    //separate view for each category of commercial
    return "vendor/commercial/"+categoryName+"/new";
} 
```

而且我正在考虑使用类似的控制器来保存表单数据，即使我必须为这些东西编写一个单独的活页夹。

所以问题是：如果您已经面临类似的需求（泛型、反射或其他），您会建议如何处理这个问题，或者最佳实践是什么？或者这是否值得，为什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:47:41.843

我为这种情况创建了一个 Dao 接口：

```
public interface Dao<T extends Commercial> {

    T getAll();
} 
```

之后是一个抽象的 Dao 实现，例如基于 hibernate：

```
public CommonHibernateDao<T extends Commercial> implements Dao<T> 
{
    private final Class<T> entityType;

    protected CommonHibernateDao(Class<T> entityType) {
        this.entityType = entityType;
    }

    public List<T> getAll() {
        // hibernate get all implementation
    }
} 
```

以及RestaurantCommercial Dao接口和实现：

```
public interface RestaurantCommercialDao extends Dao<RestaurantCommercial> {

}

public class HibernateRestaurantCommercialDao extends CommonHibernateDao<RestaurantCommercial> implements RestaurantCommercialDao {

    public HibernateRestaurantCommercialDao() {
        super(RestaurantCommercial.class);
    }
} 
```

所有实现都转到 CommonHibernateDao。在它的子类中，只有构造函数调用 neaded。基本上你可以通过反思来做到这一点，但对我来说还不清楚。

对于控制器（类似于 RESTfull API）：

```
@Controller
public class YourController() {

    @RequestMapping(value = "/restapi/{entityType}")
    public String postEntity(HttpServletRequest request, @PathVariable(value = "entityType") String entityType) {
        // If enetity name will be packegae + class name
        Object beanInstance = Class.forName(entityName);
        ServletRequestDataBinder binder = new ServletRequestDataBinder(beanInstance);
        binder.bind(request);

        // Here by type of entity you can get DAO and persist
    }
} 
```

如果表单输入名称与您的 bean 名称相同 - 绑定将自动完成。

# android - 如何一个一个播放音频文件

> ID：11082430
> 
> 赞同：1
> 
> 时间：2012-06-18T12:02:49.580
> 
> 标签：android

所以我有一个带有音频文件 ID 的数组。但这取决于用户将有多少个 id（他键入“a”并且 R.raw.a 出现在数组中）。如何使用 MediaPlayer 一个接一个地播放这些声音。我想我应该使用 OnCompletionListener，但我不知道数组中有多少声音 id。我应该使用

```
for(){} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:22:48.340

你能做的是

```
//define a variable to be used as index.
int audioindex = 0;
//Extract the files id into an array
int[] audioFileIds=new int[]{R.raw.as,R.raw.bs}; 
```

然后在你`MediaPlayer` `onCompletionListener`放的东西如下。

然后在您的 OnCompletionListener 中。

```
mp.setOnCompletionListener(new OnCompletionListener(){
    // @Override
    public void onCompletion(MediaPlayer player) {
    // File has ended, play the next one.
   FunctionPlayFile(audioFileIds[audioindex]);
   audioindex+=1; //increment the index to get the next audiofile
     }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:13:22.453

您可以为 OnCompletionListener 设置 MediaPlayer

```
public class MyActivity extends Activity
    implements MediaPlayer.OnCompletionListener {

    MediaPlayer player = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        player = new MediaPlayer();
        player.setOnCompletionListener(this);
        ...
    }

    @Override
    public void onCompletion(MediaPlayer mp) {
        // Called when playback is complete
        //Play a next song
        ...
    }
} 
```

欢迎！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:14:56.103

使用 IntentService 播放歌曲。所有使用[intentservice](http://developer.android.com/reference/android/app/IntentService.html)开始的歌曲都将在队列中。它会一个接一个地播放。

# c++ - 使用 AES 和 Crypto++ 加密-解密单个块

> ID：11082432
> 
> 赞同：4
> 
> 时间：2012-06-18T12:03:07.897
> 
> 标签：c++, cryptography, crypto++, block-cipher

我需要加密单个 AES 块。我不能使用任何模式，如 CBC 和其他。我看到的每个示例都使用流模式。

编辑：好的，我用下一种方式做了，但我真的不喜欢这个尝试。

```
void dec(const byte *key, const byte* xblock, const byte *cipher, byte *plain) {
    AESDecryption d;

    try {
        const NameValuePairs &nvp = MakeParameters("", 0);
        d.UncheckedSetKey(key, 16, nvp);
        d.ProcessAndXorBlock(cipher, xblock, plain);
    }
    catch(...) {}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T17:30:27.367

ECB 模式下的 AES 与单块加密相同，只是您可以为其提供多个块。

如果您只有可用的 CBC 模式加密，则可以使用 CBC 加密的第一个块，使用包含所有值为零的字节的（块大小）IV。计数器（CTR）模式加密和包含所有值为零的字节的随机数也是如此（计数器仅在第一个块加密后增加）。

Crypto++ 似乎是更高级别的 Crypto API，所以最好不要直接调用 AES 实现。

# c++ - 查找服务器机器中的物理 CPU 插槽数

> ID：11082435
> 
> 赞同：7
> 
> 时间：2012-06-18T12:03:22.747
> 
> 标签：c++, window, windows-server-2003, cpu

我有一个带有 4 个物理处理器插槽的系统。运行 Windows 2003，我想使用 C++ 以编程方式查找套接字的数量。这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:18:25.610

对于 Windows 7 和 2008 服务器，有[GetActiveProcessorGroupCount 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd405486.aspx)。但是你有 2003 服务器，所以它不是一个选项。

在 C++ 中，这需要编写 WMI 消费者代码，这是一个笨拙而无聊的 (D)COM 东西。

一个不错的解决方案是运行`systeminfo`命令并解析输出，但要小心，因为输出的列标题已本地化为系统的区域设置。

## 编辑

刚刚找到了一个更好的解决方案，它利用 WMI 的命令行界面。

运行以下命令并解析输出，每个套接字有一行

```
> wmic.exe cpu get
AddressWidth  Architecture  Availability  Caption                               ConfigManagerErrorCode  ConfigManagerUserConfig  CpuStatus  CreationClassName  CurrentClockSpeed  CurrentVoltage  DataWidth  Description                           DeviceID  ErrorCleared  ErrorDescription  ExtClock  Family  InstallDate  L2CacheSize  L2CacheSpeed  L3CacheSize  L3CacheSpeed  LastErrorCode  Level  LoadPercentage  Manufacturer  MaxClockSpeed  Name                                             NumberOfCores  NumberOfLogicalProcessors  OtherFamilyDescription  PNPDeviceID  PowerManagementCapabilities  PowerManagementSupported  ProcessorId       ProcessorType  Revision  Role  SocketDesignation  Status  StatusInfo  Stepping  SystemCreationClassName  SystemName       UniqueId  UpgradeMethod  Version  VoltageCaps  
64            9             3             Intel64 Family 6 Model 23 Stepping 6                                                   1          Win32_Processor    2532               33              64         Intel64 Family 6 Model 23 Stepping 6  CPU0                                      421       2                                               0            0                            6      1               GenuineIntel  2532           Intel(R) Core(TM)2 Duo CPU     T9400  @ 2.53GHz  2              2                                                                                            FALSE                     BFEBFBFF00010676  3              5894      CPU   CPU Socket #0      OK      3                     Win32_ComputerSystem     CHBROSSO-WIN7VM            1                       2 
```

在 C++ 中运行 exe 和解析输出应该是最容易的部分。您还可以使用 POCO 库或 Boost.Process 来获得更简洁的代码。

（这是未经测试的代码）

```
//get wmic program output 
FILE* pipe = _popen("wmic.exe cpu get", "r");
if (!pipe) throw std::exception("error");
char buffer[128];
std::string output;
while(!feof(pipe)) {
  if(fgets(buffer, 128, pipe) != NULL)
      output += buffer;
}
_pclose(pipe);

//split lines to a vector<string>
std::stringstream oss(output);
std::vector<std::string> processor_description; std::string buffer;
while (std::getline(oss, buffer))
  processor_description.push_back(buffer);
//processor_description has n+1 elements, n being nb of sockets, +1 is the header of columns 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-30T08:26:57.007

您将使用 C++ 找到套接字的数量。 [https://msdn.microsoft.com/en-us/library/windows/desktop/ms683194(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms683194(v=vs.85).aspx)

```
#include <windows.h>
#include <malloc.h>    
#include <stdio.h>
#include <tchar.h>

typedef BOOL (WINAPI *LPFN_GLPI)(
    PSYSTEM_LOGICAL_PROCESSOR_INFORMATION, 
    PDWORD);

// Helper function to count set bits in the processor mask.
DWORD CountSetBits(ULONG_PTR bitMask)
{
    DWORD LSHIFT = sizeof(ULONG_PTR)*8 - 1;
    DWORD bitSetCount = 0;
    ULONG_PTR bitTest = (ULONG_PTR)1 << LSHIFT;    
    DWORD i;

    for (i = 0; i <= LSHIFT; ++i)
    {
        bitSetCount += ((bitMask & bitTest)?1:0);
        bitTest/=2;
    }

    return bitSetCount;
}

int _cdecl _tmain ()
{
    LPFN_GLPI glpi;
    BOOL done = FALSE;
    PSYSTEM_LOGICAL_PROCESSOR_INFORMATION buffer = NULL;
    PSYSTEM_LOGICAL_PROCESSOR_INFORMATION ptr = NULL;
    DWORD returnLength = 0;
    DWORD logicalProcessorCount = 0;
    DWORD numaNodeCount = 0;
    DWORD processorCoreCount = 0;
    DWORD processorL1CacheCount = 0;
    DWORD processorL2CacheCount = 0;
    DWORD processorL3CacheCount = 0;
    DWORD processorPackageCount = 0;
    DWORD byteOffset = 0;
    PCACHE_DESCRIPTOR Cache;

    glpi = (LPFN_GLPI) GetProcAddress(
                            GetModuleHandle(TEXT("kernel32")),
                            "GetLogicalProcessorInformation");
    if (NULL == glpi) 
    {
        _tprintf(TEXT("\nGetLogicalProcessorInformation is not supported.\n"));
        return (1);
    }

    while (!done)
    {
        DWORD rc = glpi(buffer, &returnLength);

        if (FALSE == rc) 
        {
            if (GetLastError() == ERROR_INSUFFICIENT_BUFFER) 
            {
                if (buffer) 
                    free(buffer);

                buffer = (PSYSTEM_LOGICAL_PROCESSOR_INFORMATION)malloc(
                        returnLength);

                if (NULL == buffer) 
                {
                    _tprintf(TEXT("\nError: Allocation failure\n"));
                    return (2);
                }
            } 
            else 
            {
                _tprintf(TEXT("\nError %d\n"), GetLastError());
                return (3);
            }
        } 
        else
        {
            done = TRUE;
        }
    }

    ptr = buffer;

    while (byteOffset + sizeof(SYSTEM_LOGICAL_PROCESSOR_INFORMATION) <= returnLength) 
    {
        switch (ptr->Relationship) 
        {
        case RelationNumaNode:
            // Non-NUMA systems report a single record of this type.
            numaNodeCount++;
            break;

        case RelationProcessorCore:
            processorCoreCount++;

            // A hyperthreaded core supplies more than one logical processor.
            logicalProcessorCount += CountSetBits(ptr->ProcessorMask);
            break;

        case RelationCache:
            // Cache data is in ptr->Cache, one CACHE_DESCRIPTOR structure for each cache. 
            Cache = &ptr->Cache;
            if (Cache->Level == 1)
            {
                processorL1CacheCount++;
            }
            else if (Cache->Level == 2)
            {
                processorL2CacheCount++;
            }
            else if (Cache->Level == 3)
            {
                processorL3CacheCount++;
            }
            break;

        case RelationProcessorPackage:
            // Logical processors share a physical package.
            processorPackageCount++;
            break;

        default:
            _tprintf(TEXT("\nError: Unsupported LOGICAL_PROCESSOR_RELATIONSHIP value.\n"));
            break;
        }
        byteOffset += sizeof(SYSTEM_LOGICAL_PROCESSOR_INFORMATION);
        ptr++;
    }

    _tprintf(TEXT("\nGetLogicalProcessorInformation results:\n"));
    _tprintf(TEXT("Number of NUMA nodes: %d\n"), 
            numaNodeCount);
    _tprintf(TEXT("Number of physical processor sockets: %d\n"), 
            processorPackageCount);
    _tprintf(TEXT("Number of processor cores: %d\n"), 
            processorCoreCount);
    _tprintf(TEXT("Number of logical processors: %d\n"), 
            logicalProcessorCount);
    _tprintf(TEXT("Number of processor L1/L2/L3 caches: %d/%d/%d\n"), 
            processorL1CacheCount,
            processorL2CacheCount,
            processorL3CacheCount);

    free(buffer);

    return 0;
} 
```

# .net - 检测 VSPackage 中的 Visual Studio 版本

> ID：11082436
> 
> 赞同：16
> 
> 时间：2012-06-18T12:03:29.280
> 
> 标签：.net, visual-studio, vsix, vspackage, vs-extensibility

如何检查/检测在我的 VSPackage 下运行的 Visual Studio 版本？

我无法从注册表中获取，因为计算机可能安装了多个版本，所以我想有一个 API 可以获取它。

有人知道如何使用 C# 从托管的 Visual Studio 包中获取它吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-18T15:00:51.917

您可以尝试**通过自动化 DTE 对象**获取版本。在 MPF 中，您可以通过以下方式获得它：

```
EnvDTE.DTE dte = (EnvDTE.DTE)Package.GetGlobalService(typeof(EnvDTE.DTE)); 
```

还有一些其他相关的东西可以检索 DTE 对象 - 通过[Project.DTE](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/4cfd6eef-f1ab-4062-983c-4f894db5f172) ，如果您为 DTE 获得空值，也请阅读[此线程。](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/1a827bc5-657a-466f-88a2-909865de3ec2/)

**然后您可以使用[DTE.Version 属性](http://msdn.microsoft.com/en-us/library/envdte._dte.version.aspx)获取版本。**

也可以在 Carlos Quintero (VS addin ninja) 网站[HOWTO: Detect installed Visual Studio editions, packages or service packs上找到有用的信息](http://www.mztools.com/articles/2008/MZ2008003.aspx)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-19T08:32:58.177

最后我写了一个类来检测 Visual Studio 版本。测试和工作：

```
public static class VSVersion
{
    static readonly object mLock = new object();
    static Version mVsVersion;
    static Version mOsVersion;

    public static Version FullVersion
    {
        get
        {
            lock (mLock)
            {
                if (mVsVersion == null)
                {
                    string path = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "msenv.dll");

                    if (File.Exists(path))
                    {
                        FileVersionInfo fvi = FileVersionInfo.GetVersionInfo(path);

                        string verName = fvi.ProductVersion;

                        for (int i = 0; i < verName.Length; i++)
                        {
                            if (!char.IsDigit(verName, i) && verName[i] != '.')
                            {
                                verName = verName.Substring(0, i);
                                break;
                            }
                        }
                        mVsVersion = new Version(verName);
                    }
                    else
                        mVsVersion = new Version(0, 0); // Not running inside Visual Studio!
                }
            }

            return mVsVersion;
        }
    }

    public static Version OSVersion
    {
        get { return mOsVersion ?? (mOsVersion = Environment.OSVersion.Version); }
    }

    public static bool VS2012OrLater
    {
        get { return FullVersion >= new Version(11, 0); }
    }

    public static bool VS2010OrLater
    {
        get { return FullVersion >= new Version(10, 0); }
    }

    public static bool VS2008OrOlder
    {
        get { return FullVersion < new Version(9, 0); }
    }

    public static bool VS2005
    {
        get { return FullVersion.Major == 8; }
    }

    public static bool VS2008
    {
        get { return FullVersion.Major == 9; }
    }

    public static bool VS2010
    {
        get { return FullVersion.Major == 10; }
    }

    public static bool VS2012
    {
        get { return FullVersion.Major == 11; }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T05:00:36.327

我认为以下代码更好：

```
string version = ((EnvDTE.DTE) ServiceProvider.GlobalProvider.GetService(typeof(EnvDTE.DTE).GUID)).Version; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-07T09:11:32.977

要获得包含补丁号的完整语义版本，例如“15.9.6”，`DTE.Version`文件版本和文件版本都没有提供足够的信息。

我在新的托管项目系统（[https://github.com/dotnet/project-system](https://github.com/dotnet/project-system)）中找到了一个解决方案，该解决方案似乎至少在 VS2017 中有效。

基本上，它使用的`IVsAppId`是您需要声明的 COM 接口，就像在[这个文件](https://github.com/dotnet/project-system/blob/master/src/Microsoft.VisualStudio.ProjectSystem.Managed.VS/ProjectSystem/VS/Interop/IVsAppId.cs)中一样。（您基本上可以按原样复制该文件。）

一旦你这样做了，你需要`IVsAppId`通过服务提供者以通常的方式获得实现，并调用`GetProperty`方法`VSAPropID.VSAPROPID_ProductSemanticVersion`（枚举也在链接文件中定义）：

```
var vsAppId = serviceProvider.GetService<IVsAppId>(typeof(SVsAppId));

vsAppId.GetProperty((int)VSAPropID.VSAPROPID_ProductSemanticVersion, out var semanticVersionObj); 
```

上面示例中的`semanticVersionObj`将包含一个字符串，格式为`15.9.6+28307.344`. 获取之前的部分`+`（有时`-`）会为您提供语义版本：`15.9.6`.

[顺便说一句：它在这里](https://github.com/dotnet/project-system/blob/master/src/Microsoft.VisualStudio.ProjectSystem.Managed.VS/ProjectSystem/VS/UI/VsShellUtilitiesHelper.cs)用于托管项目系统。

（MS 将新项目系统代码开源真是太好了。它提供了很好的信息来源，您还可以在其中找到有用的模式。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-10T19:55:29.730

@gaspar-nagy 答案提供了最精确的版本。但是，它可以进一步增强。就像您需要添加`IVsAppId`/`SVsAppId`接口声明的答案建议一样，获取版本的代码也几乎相同。但是，您需要使用`VSAPROPID_ProductDisplayVersion`枚举值而不是`VSAPROPID_ProductSemanticVersion`来自`VSAPropID`枚举：

```
var vsAppId = serviceProvider.GetService<IVsAppId>(typeof(SVsAppId));
vsAppId.GetProperty((int)VSAPropID.VSAPROPID_ProductDisplayVersion, out var versionObj); 
```

我的 VS 16.9.4 的 @gaspar-nagy 答案的语义版本是“16.9.4+31205.134”，需要进一步解析。但是这个显示版本是用户友好的，它的版本是“16.9.4”。

**UPDATE**: One important thing I've discovered recently is that in case of preview VS the version string in my answer will look something like `16.11.0 Preview 3.0`. It may be important if you pass the obtained raw version string without any extra processing to some other APIs like `System.Version` constructor.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-07T09:25:54.497

```
var shell = _package.GetService(typeof(SVsShell)) as IVsShell;
shell.GetProperty((int)__VSSPROPID5.VSSPROPID_ReleaseVersion, out object ver);
return ver.ToString(); 
```

# sphinx - Sphinx 配置文件的持续变化

> ID：11082439
> 
> 赞同：0
> 
> 时间：2012-06-18T12:03:30.713
> 
> 标签：sphinx

我正在做一个项目，其中我有一个 Sphinx 配置文件。Sphinx 主要有四个部分（源、索引、索引器、搜索）。在配置文件中只有一个索引器和一个搜索器，但源和索引是多个。现在我正在通过这个配置文件启动 searchd 服务。当在配置文件中添加新的源和索引时，我在索引中使用 --rotate 选项通知 searchd 服务，以通知在该服务上添加了新索引。但是现在假设我要删除一些来自配置文件的源和索引。那时我必须重新启动 searchd 服务以通知该特定索引不再使用。有没有直接的方法可以在不重新启动 searchd 服务的情况下执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:43:41.623

你可能想用

```
 kill -HUP `cat /path/to/sphinx.pid` 
```

告诉 Sphinx 重新加载当前配置

# jquery - 通过 jquery asp.net mvc 3.0 上传图片时出错

> ID：11082444
> 
> 赞同：0
> 
> 时间：2012-06-18T12:03:41.473
> 
> 标签：jquery, asp.net-mvc-3

我需要将单个图像上传到服务器。该项目使用 .NET MVC、jQuery 和 jQueryUi。 **error show :** *IO Error* 你们能帮我解决这个错误吗？

我的代码如下：

**这些指令我已经包含在我的项目中。**

```
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" /> <script src="@Url.Content("~/Scripts/js/jquery-1.7.1.min.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/custom-theme/jquery-ui-1.8.18.custom.css")" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="@Url.Content("~/Scripts/js/jquery-ui-1.8.18.custom.min.js")"></script>
<link href="@Href("~/Content/uploadify.css")" rel="stylesheet" />
<script src="@Href("~/Scripts/jquery.uploadify.js")" type="text/javascript"></script> 
```

**JS：**

```
$(window).load(
            function() {
                $("#fileuploader").fileUpload({
                        'uploader': '/Scripts/uploader.swf',
                        'cancelImg': '/images/cancel.png',
                        'buttonText': 'Select Image',
                        'script': 'ShowClientQuotation/Upload',
                        'folder': '/images',
                        'fileDesc': 'Image Files',
                        'fileExt': '*.jpg;*.jpeg;*.gif;*.png',
                        'multi': false,
                        'auto': true
                    });
            }
); 
```

**html:**

```
<div id="fileuploader"></div> 
```

**我的控制器名称**：*ShowClientQuotation*

```
public string Upload(HttpPostedFileBase fileData)
        {
            var fileName = this.Server.MapPath("~/images/UserProfilePic/" + System.IO.Path.GetFileName(fileData.FileName));
            fileData.SaveAs(fileName);

            return "ok";
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T04:20:39.397

仅更改 JS 代码：

```
$(window).load(
            function() {
                $("#fileuploader").fileUpload({
                        'uploader': '/Scripts/uploader.swf',
                        'cancelImg': '/images/cancel.png',
                        'buttonText': 'Select Image',
                        'script': "@Url.Action("ShowClientQuotation", "upload")",
                        'folder': '/images',
                        'fileDesc': 'Image Files',
                        'fileExt': '*.jpg;*.jpeg;*.gif;*.png',
                        'multi': false,
                        'auto': true
                    });
            }
); 
```

更改后，我的代码运行完美。感谢你所做的一切。

# xslt - 使用 xsl 从字符串中提取字符串

> ID：11082451
> 
> 赞同：1
> 
> 时间：2012-06-18T12:04:06.813
> 
> 标签：xslt, xslt-1.0

抱歉这个愚蠢的问题，但 xsl 1.0 中的字符串处理不是我的强项之一。我正在寻找一种提取伪html标签之间的字符串的方法。例如。

```
<xsl:variable name="test">
    This is a string <link>http://www.stackoverflow.com</link> and some more stuff here
</xsl:variable> 
```

这个想法是最终包含 2 个进一步的变量。

var1 = [http://www.stackoverflow.com](http://www.stackoverflow.com) 和 var2 = 这是一个字符串，还有更多内容

就像我说的，对不起，这是一个模糊的问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:33:19.660

**以下是如何做到这一点**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="test">
  This is a string <link>http://www.stackoverflow.com</link> and some more stuff here
 </xsl:variable>

 <xsl:variable name="vTestNodeset" select="document('')/*/xsl:variable[@name='test']"/>

 <xsl:variable name="var1" select="string($vTestNodeset/link)"/>

 <xsl:variable name="var2">
  <xsl:copy-of select="$vTestNodeset/text()"/>
 </xsl:variable>

 <xsl:template match="/">
     "<xsl:value-of select="$var1"/>"
============    
     "<xsl:value-of select="$var2"/>"
============    
     "<xsl:value-of select="normalize-space($var2)"/>"
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的结果：**

```
 "http://www.stackoverflow.com"
============    
     "
  This is a string  and some more stuff here
 "
============    
     "This is a string and some more stuff here" 
```

# wordpress - 管理员未登录时永久链接不起作用

> ID：11082454
> 
> 赞同：0
> 
> 时间：2012-06-18T12:04:31.673
> 
> 标签：wordpress

我已经在我的 wordpress 上配置了 premalink。当我以管理员身份登录时，它工作正常。但是，如果我注销，则无法打开所有链接。相反，它给了我一个 404 页面。

有没有人遇到过这个问题并告诉我如何解决它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:08:49.517

仔细检查您的页面属性。可能是受密码保护/私有，也可能是未发布。

检查页面属性：

*   登录仪表板。
*   点击`Pages`左侧。
*   将鼠标悬停在您获得 404 的页面上，然后单击`Quick Edit`

这将显示有关您页面的所有详细信息。检查密码字段、私人和状态字段。状态应该是`published`。

核实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T03:29:08.617

尝试通过返回永久链接选项并单击保存来刷新永久链接缓存（不更改任何内容）。如果这不起作用，请确保您已清除浏览器缓存：P

# php - 在 PHP 中相交 2 个数组

> ID：11082461
> 
> 赞同：0
> 
> 时间：2012-06-18T12:04:41.333
> 
> 标签：php, arrays, arraylist

例如，我需要一个可以与 2 个数组相交的函数

```
$Array1 = array(1,2,3);
$Array2 = array(5,6); 
```

在：

```
$Array3 = array(1,5,2,6,3); 
```

到目前为止我所拥有的是这个

```
<?php
$Array1 = array(1,2,3);
$Array2 = array(5,6);

function zip() {
    $args = func_get_args();
    $zipped = array();
    $n = count($args);
    for ($i=0; $i<$n; ++$i) {
        reset($args[$i]);
    }
    while ($n) {
        $tmp = array();
        for ($i=0; $i<$n; ++$i) {
            if (key($args[$i]) === null) {
                break 2;
            }
            $tmp[] = current($args[$i]);
            next($args[$i]);
        }
        $zipped[] = $tmp;
    }
    return $zipped;
}

$bothMonths = zip($Array1, $Array2);

print_r($bothMonths);

?> 
```

有类似的输出

```
Array (
    [0] => Array (
        [0] => 1
        [1] => 5
    )
    [1] => Array (
        [0] => 2
        [1] => 6
    )
) 
```

哪里 3 不见了，我不知道为什么

我也需要纯编程，忘记了`array_merge`，`array_intersect`...或其他功能

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T12:17:27.607

```
// Interleaves arbitrarily many input arrays. Example:
// a1 = [1, 2, 3], a2 = [5, 6], a3 = [7, 8, 9]
// zip(a1, a2, a3) => [1, 5, 7, 2, 6, 8, 3, 9]
function zip() {
  $arrays = func_get_args();
  $result = array();

  // Count the length of the arrays to get the length of the longest
  $longest = array_reduce($arrays, function($old, $e) {
      return max($old, count($e));
    }, 0);

  // Traverse the arrays, one element at a time
  for ($i = 0; $i < $longest; $i++) {
    foreach($arrays as $a) {
      if (isset($a[$i]))
        $result[] = $a[$i];
    }
  }

  return $result;
} 
```

这假设您的数组从 0 及以上进行数字索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T12:17:00.137

试试这个：

```
function custom_intersect($arr1, $arr2) {
   $len1 = count($arr1);
   $len2 = count($arr2);
   $max_len = ($len1 >= $len2) ? $len1 : $len2;

   $arr = array();
   for($i = 0; $i < $max_len; ++$i)
   {
      if(isset($arr1[$i]))
      {
         $arr[] = $arr1[$i];
      }
      if(isset($arr2[$i]))
      {
         $arr[] = $arr2[$i];
      }
   }
   return $arr;
} 
```

# android - 在android的编辑框中添加标签

> ID：11082462
> 
> 赞同：13
> 
> 时间：2012-06-18T12:04:42.993
> 
> 标签：android, android-edittext

我的问题是，如何在 android的**editBox中放置标签？**

例如，我想将“收件人：”放在联系人选择器的**编辑框中**，即使我按屏幕键盘上的退格键也不会被删除。

我尝试使用**android:hint**，但是当 editBox 成为焦点或单击时它会被删除。

我尝试了图像，但看起来不太好。所以，我需要一种方法来实现这个标签。

见视觉图![所需设计](../Images/76932e8786ef5eec8d67068d55af0330.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-18T12:36:26.620

我给你两个想法来做到这一点：

如果您只在几个地方需要它，您可以使用 FrameLayout / merge 在您的 EditText 上放置一个 TextView。然后在编辑文本上使用填充，您可以使 TextView 看起来像是在 EditText“内部”。：

```
<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="40dp" >

        <requestFocus />
    </EditText>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:paddingLeft="10dp"
        android:text="To : " />
</FrameLayout> 
```

否则，您可以通过编写自己的类来实现自己的 EditText 版本。这是一个基本示例，您需要对其进行一些调整：

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;
import android.text.TextPaint;
import android.util.AttributeSet;
import android.widget.EditText;

public class LabelledEditText extends EditText {

    public LabelledEditText(Context context) {
        super(context);
        mPaddingLeft = getPaddingLeft();
    }

    public LabelledEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        mPaddingLeft = getPaddingLeft();
    }

    protected void onDraw(Canvas canvas) {
        TextPaint textPaint = getPaint();
        Rect size = new Rect();
        textPaint.getTextBounds(mLabel, 0, mLabel.length(), size);
        setPadding(mPaddingLeft + size.width(), getPaddingTop(), getPaddingRight(), getPaddingBottom());
        super.onDraw(canvas);

        canvas.drawText(mLabel, mPaddingLeft + size.left, size.bottom + getPaddingTop(), textPaint);
    }

    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }

    private String mLabel = "To :  ";
    private int mPaddingLeft;

} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-18T12:30:27.323

您总是可以在 a中添加一个`TextView`+ ，如下所示：`EditText``LinearLayout``EditText`

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@android:drawable/edit_text" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:text="To:" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="3dp"
        android:background="@null" />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T12:14:27.970

试试这个

```
<LinearLayout
    android:id="@+id/linearLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="5dp" >

    <RelativeLayout
        android:id="@+id/linearlayout2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:text="To:" />

        <EditText
            android:id="@+id/editTextTo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginLeft="20dp"
            android:background="@android:color/transparent"
            android:hint="Type your text..."
            android:singleLine="true"
            android:textColor="#000000" />
    </RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T12:09:01.983

在android中，标签被称为`TextView`：

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

            <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="To:"
            />

            <EditText
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
            />
        </LinearLayout> 
```

`EditText`没有标签，所以你需要两者。值得庆幸`ViewGroup`的是，这对开发人员来说相对轻松。因此，`EditText`uses`fill_parent`属性与“To:”标签紧密相关。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T12:09:33.353

然后用这个...

```
<LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <EditText
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TO:"    
            />
    </LinearLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T12:11:41.037

你可以像这样添加

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.home_screen);

EditText edittext = (EditText)getViewById(R.id.edittextid); 
edittext.setText("To:") 
} 
```

然后，您将在开始活动时看到文本。

我希望它有帮助....

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-18T12:54:43.097

您可以使用 Here FrameLayout，您可以在其中使用 3 个小部件：

1.TextView 设置文本“TO”

1.  在 TextView 旁边你可以有 Edittext 在那里你可以输入数据

2.  最后是显示十字符号的 ImageButton...

用圆角矩形设置 FrameLayout 的背景图像,,,,

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-19T05:17:05.290

**圆形文本视图**

* * *

```
<LinearLayout
    android:id="@+id/linearLayoutSearch"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent"
    android:padding="5dp" >

    <RelativeLayout
        android:id="@+id/linearlayout2"
        android:layout_width="fill_parent"
        android:layout_height="36dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:background="@drawable/rounded_textview"
        android:paddingLeft="5dp" >

        <TextView
            android:layout_width="22dp"
            android:layout_height="22dp"
            android:layout_centerVertical="true"
            android:alignParentLeft="true"
            android:text="To:" />

        <EditText
            android:id="@+id/search"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginLeft="25dp"
            android:layout_marginRight="25dp"
            android:background="@android:color/transparent"
            android:hint="Enter your text..."
            android:imeOptions="actionDone"
            android:singleLine="true"
            android:textColor="#000000" />
        <ImageView
            android:layout_width="22dp"
            android:layout_height="22dp"
            android:layout_centerVertical="true"
            android:alignParentRight="true"
            android:src="@drawable/stop" />
    </RelativeLayout>
</LinearLayout> 
```

* * *

**rounded_textview.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:padding="10dp"
android:shape="rectangle" >

<solid android:color="#FFFFFF" />

<corners
    android:bottomLeftRadius="15dp"
    android:bottomRightRadius="15dp"
    android:topLeftRadius="15dp"
    android:topRightRadius="15dp" />

</shape> 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-06-18T12:45:39.873

```
 <EditText
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TO:"    
        /> 
```

# jpa - JPQL：获取最新项目

> ID：11082464
> 
> 赞同：1
> 
> 时间：2012-06-18T12:04:48.050
> 
> 标签：jpa, jpql

我有一个具有以下属性的表和 Java 实体：

> 通知
> 
> -ID
> 
> -范围
> 
> -活动
> 
> -用户
> 
> -创建时间
> 
> -readTime (null --> 新消息)

如何使用一条 JPQL 语句获取每个范围和活动的最新通知？由于 JPA（版本 1.0，没有可用的 Criteria API）不支持“SELECT TOP”或语句中的 LIMIT 运算符（仅通过实体管理器（em.setmax...））我找不到解决方案...有没有只用一个 JPQL 语句来完成这项任务的方法？使用原生 SQL 获取 LIMIT 或 TOP 无解……</p>

例子：

```
Notification 1
-Id:1
-scope:test
-activity:1
-user:user1
-cTime: 01.01.1999

Notification 2
-Id:2
-scope:test
-activity:1
-user:user1
-cTime: 02.02.2000

Notification 3
-Id:3
-scope:dev
-activity:2
-user:user1
-cTime: 01.01.1997 
```

这应该返回：通知 2 和 3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:55:55.907

您可以尝试以下查询，可以相应地更改字段的顺序。

```
//-- MAX_RESULT_SIZE is the number of results to be fetched
entityManager.createQuery("SELECT n.scope, n.activity, MAX(n.Id) FROM Notification n GROUP BY n.scope, n.activity ORDER BY n.cTime DESC").setMaxResults(MAX_RESULT_SIZE); 
```

要从此查询中检索结果，这将是对象数组，请参阅[此处](https://stackoverflow.com/a/4536802/366964)。

# android - Android 同步适配器 - 在某些设备上不显示联系人同步

> ID：11082465
> 
> 赞同：1
> 
> 时间：2012-06-18T12:04:51.323
> 
> 标签：android, permissions, android-contacts, android-syncadapter

在一个学校项目中，我实现了一个工作同步适配器，用于将联系人与我的应用程序同步。我已经在模拟器和 Android 4.0.3 上的 HTC Evo 3D 上尝试过它，它可以工作。

但在某些设备（HTC Hero 4.0.3 和 Xperia X10 2.3.7）上，当我为我的应用添加帐户时，该帐户不显示同步联系人行。我在那些未授予 logCat WRITE_SECURE_SETTINGS 的设备上看到。

与此同时，我看到市场应用程序（不是系统应用程序，例如：Hotmail）可以拥有一个我无法拥有的具有相同联系线路的帐户。

他们是怎么做到的？我能做些什么呢？

我只需要一个快速的答案，截止日期非常接近。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:40:40.280

感谢它帮助我的评论。我刚刚删除了权限并逐行查看 xml 以罚款 XML 中的小错误。现在一切正常。因此，如果您是我的情况，请尝试查看您需要每个权限的原因，它可以解决问题。

谢谢您的帮助。

# jquery - 使用 JQuery、C# 在单选按钮上保留标签文本的提交值

> ID：11082467
> 
> 赞同：0
> 
> 时间：2012-06-18T12:04:59.957
> 
> 标签：jquery

我有下面的 JQuery 代码来更改公式中的文本标签值。但是在提交它们时（如果有一个无效的填充字段），文本标签值返回原始值。我怎样才能保持这些值不再填写字段？

```
<script type="text/javascript">

    $(document).ready(function () {
        $('input:radio').change(function () {
            var rbvalue = $('input:radio:checked').val();
            if (rbvalue === "D") {
                $('#idCard').html('IC:');
                $('#userName').html('User Name: ');
                $('#completeName').html('Complete Name: ');
                $('#userAdress').html('User Adress: ');
            }
            else if (rbvalue === "B") {
                $('#publicId').html('Public Identificator: ');
                $('#publicName').html('Public Name: ');
                $('#publicCompleteName').html('Public Complete Name: ');
                $('#publicAdress').html('Public Adress: ');
            }

        });
    }); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:28:12.250

你可以：

1.  编写一个更改标签文本的服务器端例程，以便页面在回发后正确呈现。
2.  在提交表单之前将客户端标签存储在隐藏字段中，然后在回发后使用 JavaScript 恢复标签。
3.  在实际提交表单之前使用 AJAX 调用检查值，并在值不正确时阻止提交表单。
4.  如果值不正确，则完全执行客户端验证并阻止提交表单。

或以上任意组合。

# asp.net - 不使用默认打印按钮打印水晶报表

> ID：11082469
> 
> 赞同：0
> 
> 时间：2012-06-18T12:05:12.810
> 
> 标签：asp.net, crystal-reports

我有一个应用程序（ASP.NET），因为我使用水晶报表查看器显示不同的报表。默认打印对话框与我在页面中使用的模板不匹配。所以决定制作一个不同的。导出选项正在动态工作和导出报告，但对于打印，我使用 printToPrinter 方法，它没有显示打印对话框，我可以在其中选择打印机和打印质量、纸张方向..等等...

任何人都可以建议一种通过此方法调用打印对话框的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:00:22.317

为了在您的代码中配置这些参数，您可以使用：

```
string printerName = ""; //Insert printer name here.
CrystalDecisions.CrystalReports.Engine.ReportDocument rpt = new ReportDocument();
rpt.PrintOptions.PrinterName = printerName;
rpt.PrintOptions.PaperOrientation = PaperOrientation.Landscape; 
```

等等......我认为您需要的所有其他配置都在那里，可供您设置。

# c# - c# 语言如何防止泛型协变，除非它们不包含需要 T 作为输入的方法？

> ID：11082476
> 
> 赞同：9
> 
> 时间：2012-06-18T12:05:27.593
> 
> 标签：c#, .net-4.5, type-systems

我一直在阅读 .NET4.5 将带来的变化，在[这篇](http://msdn.microsoft.com/en-us/magazine/jj133817.aspx)博文中，我偶然发现了一些我既不知道也不理解的东西。

在谈到只读集合的​​实现时，[Immo Landwerth](http://msdn.microsoft.com/en-us/magazine/ee532098.aspx?sdmr=ImmoLandwerth&sdmi=authors)说：

> 不幸的是，我们的类型系统不允许使类型 T 协变，除非它没有将 T 作为输入的方法。因此，我们不能在 IReadOnlyList 中添加 IndexOf 方法。我们认为，与不支持协方差相比，这是一个很小的牺牲。

从我明显有限的理解来看，他似乎是在说，为了使我们能够`IReadOnlyList<Shape>`通过传入 a来调用需要 a 的方法`IReadOnlyList<Circle>`，我们不能有一个`IReadOnlyList<T>.IndexOf(T someShape)`方法。

我看不出类型系统会如何阻止这种情况。有人可以解释吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T12:11:17.300

假设`Circle`实现`IEquatable<Circle>`. `IReadOnlyList<Circle>.IndexOf`如果它可用，它自然会被使用。现在，如果你可以这样写：

```
IReadOnlyList<Circle> circles = ...;
IReadOnlyList<Shape> shapes = circles;
int index = shapes.IndexOf(new Square(10)); 
```

那最终会试图将 a 传递`Square`给`Circle.Equals(Circle)`这显然是一个坏主意。

强制“输入位置没有值”的规则`T`在 C# 4 规范的第 13.1.3 节中。您还应该阅读Eric Lippert 关于泛型方差的[博客系列以了解](http://blogs.msdn.com/b/ericlippert/archive/tags/covariance+and+contravariance/)*更多*详细信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T01:00:22.987

由于`IReadOnlyList<T>`是协变的，您可以将其转换为任何超类型，`T`并且所有方法仍应根据合同工作。最超级的超类型`T`是`Object`，所以如果`IndexOf`是接口的一部分，它应该接受`Object`。

正如 Jon Skeet 所说，在对象列表中，您可以问：此列表中`Circle`特定对象的索引是什么？`Square`唯一正确的响应是“它不在这里”，并且`IndexOf`应该返回 -1 并且不抛出异常。

所以，我不同意 Jon Skeet 的观点。鉴于协变泛型参数的局限性，并且类似于[`ArrayList.indexOf`Java](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html#indexOf%28java.lang.Object%29)，BCL 团队应该包含一个`IndexOf`具有以下签名的方法：

```
int IndexOf(object item); 
```

完全相同的参数适用于`Contains`in `IReadOnlyCollection`：当您传入一个不兼容类型的对象时，集合显然不包含它，并且该方法应该只是 return `false`。

唯一的缺点是值类型的装箱，但实际实现仍然可以隐藏`IReadOnlyList.IndexOf`方法并提供自己的泛型重载，这使得这个论点没有实际意义。

因此，如果在接口上传递不兼容的对象，您期望`IndexOf`返回 -1 是正确的。

* * *

我在我的`M42.Collections`库中实现了这个原则，以展示它在实践中是如何工作的。你可以在这里下载：

> [**M42 Collections**](https://bitbucket.org/Virtlink/m42-collections/) - 用于正确处理集合的便携式 .NET 库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T15:38:00.350

请注意，理论上（不确定是否在 .NET 中实现）是正确的，`IndexOf`为 的所有子类型定义`T`：

```
class ReadOnlyList<+T> = { ...
  Int IndexOf<U>(U elem) where T : U { ... }
} 
```

有趣的是为什么`IndexOf(T elem)`不明显是协变的，而这个是：如果你有`T2 : T1`，一个方法`IndexOf(T1 elem)`可能与签名不兼容`IndexOf(T2 elem)`。相反，如果你有`IndexOf<U>(U elem) where T1 : U`，你知道`T2 : T1`and `T1 : U`，所以你也有`T2 : U`所有这些`U`：这种类型是 的子类型`IndexOf<U>(U elem) with T2 : U`。

例如，在 Emir、Kennedy、Russo 和 Yu 的 2006 年文章[Variance and Generalized Constraints for C# Generics](http://research.microsoft.com/apps/pubs/default.aspx?id=64042) 中就有这样的评论：他们提出了一个可以接受这个定义的类型系统。

# ios - iOS SQLite 插入和选择不起作用？

> ID：11082479
> 
> 赞同：1
> 
> 时间：2012-06-18T12:05:42.997
> 
> 标签：ios, sqlite

我正在尝试读取/写入 SQLite 数据库，但我不断收到错误。我已验证数据库存在于 ...iPhone Simulator/Applications/5.1/app#/Documents/kipSQLDB.db

我已经从终端完成了 INSERT 和 SELECT 。

但是从应用程序中它只是出错了。（附加问题 - sqlite 有没有办法在 mysql 中获取信息性错误消息，如 mysql_error？当我在应用程序中出错时，我只得到一些符号。

这是我的代码：

。H

```
#import <Foundation/Foundation.h>
#import <sqlite3.h>

@interface SQLiteController : NSObject { 

//file management
NSFileManager *fileManager;
NSString *documentsDirectory;

//sqlite data
sqlite3* databaseHandle;

}

- (void) initSQLiteDB; 

- (void) insertData : (NSString* ) fName : (NSString* ) lName : (NSString* ) companyName; 

- (NSArray* ) getData;

@end 
```

.m

```
- (void) insertData : (NSString* ) fName : (NSString* ) lName : (NSString* ) companyName { 

NSString* insertStatement = [NSString stringWithFormat:@"INSERT INTO nameList (userFName, userLName, userCompany) VALUES (\"%@\", \"%@\", \"%@\")", fName, lName, companyName];
NSLog(@"%@", insertStatement);

char *error;
if ( sqlite3_exec(databaseHandle, [insertStatement UTF8String], NULL, NULL, &error) == SQLITE_OK) {

    int recordID = sqlite3_last_insert_rowid(databaseHandle);
    NSLog(@"A record was inserted into the database %@ with the id of %i", databaseHandle, recordID);
} else { 
    NSLog(@"Error: %s", error);
}
}

- (NSArray* ) getData {

NSMutableArray* dataArray = [[NSMutableArray alloc] init];

NSString* getStatement = @"SELECT * FROM nameList";

sqlite3_stmt *statement;
if (sqlite3_prepare_v2(databaseHandle, [getStatement UTF8String], -1, &statement, NULL) == SQLITE_OK){

    // Iterate over all returned rows
    while (sqlite3_step(statement) == SQLITE_ROW) {

        int recordID = sqlite3_column_int(statement, 0);
        NSString* fNameFromDB = [NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 1)];
        NSLog(@"%@", fNameFromDB);
    }
} else { 
    NSLog(@"No soup for you!");
}

return 0;

}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:09:18.690

使用 Try catch 格式，捕获 sql 的错误类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:27:39.223

试试这个，我想它会对你有所帮助

```
 - (void) insertData : (NSString* ) fName : (NSString* ) lName : (NSString* ) companyName { 

    if(insertStatement == nil)
    {

    NSString* insertStatement = [NSString stringWithFormat:@"INSERT INTO nameList (userFName, userLName, userCompany) VALUES (\"%@\", \"%@\", \"%@\")", fName, lName, companyName];
    NSLog(@"%@", insertStatement);
    if(sqlite3_prepare_v2(database, insertSql, -1, &insertStmt, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating insert statement. '%s'", sqlite3_errmsg(database));
    }

    sqlite3_bind_text(insertStatement, 1, [Gunameq UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(insertStatement, 2, [Gpassq UTF8String], -1, SQLITE_TRANSIENT);
    if(SQLITE_DONE != sqlite3_step(insertStmt))
        NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
    else
        NSLog("Inserted");
    //Reset the add statement.
    sqlite3_reset(insertStatement);
    insertStatement= nil;      

    - (NSArray* ) getData {

    NSMutableArray* dataArray = [[NSMutableArray alloc] init];

    NSString* getStatement = @"SELECT * FROM nameList";

    sqlite3_stmt *statement;
    if (sqlite3_prepare_v2(databaseHandle, [getStatement UTF8String], -1, &statement, NULL) == SQLITE_OK){

        // Iterate over all returned rows
        while (sqlite3_step(statement) == SQLITE_ROW) {

            int recordID = sqlite3_column_int(statement, 0);
            NSString* fNameFromDB = [NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 1)];
            NSLog(@"%@", fNameFromDB);
        }
    } else { 
        NSLog(@"No soup for you!");
    }

    return 0;

    }
    @end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-11T15:02:18.387

SQLite 可能有点棘手。对它的所有访问都必须来自同一个线程。对于每个准备语句，都必须有一个 finalize 语句。

这里有一个使用 SQLite 的示例项目，您可以参考：[https ://github.com/AaronBratcher/ABSQLite](https://github.com/AaronBratcher/ABSQLite)

它有用于以更传统的数据库方式访问 SQLite 的类，我觉得这更容易。

# ios - 构建成功，.app 为红色，（空的 ios 1view 模板项目，Xcode 4.3.3）

> ID：11082481
> 
> 赞同：1
> 
> 时间：2012-06-18T12:05:53.170
> 
> 标签：ios, xcode, ios-simulator, product, .app

给我编译成功，编译运行后iphone模拟器运行良好，但是产品组下的.app是红色的。我尝试了以下方法，但到目前为止都没有奏效：

(1) 在 Preferences 中将 Build Locations 更改为自定义位置并重新打开项目

(2) 代码签名改为iphone开发者

(3)base SDK设置为iOS 5.1

整个构建过程没有出现错误，当构建位置设置为自定义文件夹时，可以在finder中找到实际的.app文件（对于默认的~/Library/Developer/Xcode/DerivedData情况，.app可以'在finder中找不到，但建筑物也成功了，也许它被隐藏了？），

那么在 finder 中找到的 .app 是成功构建的包吗？但是为什么 xcode 找不到它们呢？

.app 现在仍然是红色的，谁能告诉我如何将 .app 变成正常的黑色？：-（ 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:42:18.937

您是否尝试过清除您的 XCode 项目并重新启动 XCode？

或者您在构建设置中更改了产品名称？

# flash - Firefox 插件面板中的 Flashvideo 仅播放声音

> ID：11082484
> 
> 赞同：0
> 
> 时间：2012-06-18T12:06:08.927
> 
> 标签：flash, firefox, firefox-addon

我有一个带有面板的 Firefox 插件。在这个面板中，我嵌入了 flashvideo 的代码。当我单击它开始播放时，我只听到声音而没有视频。

有谁知道为什么或有任何进一步调查的指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:44:07.677

我还创建了一个 firefox 插件，它可以获取 activeTab 的当前视频链接，我也遇到了同样的问题。

插件面板上没有视频显示，但是当我点击视频的方形区域时，有声音但没有视频。

更新于 2012 年 11 月 12 日。

到目前为止，AddOnSDK 是 1.11，这个问题仍然存在。这个问题变得越来越严重，因为它使 Firefox v16 停止工作并需要重新启动。

# javascript - 如何将简单的表单提交转换为 ajax 调用；

> ID：11082485
> 
> 赞同：13
> 
> 时间：2012-06-18T12:06:18.310
> 
> 标签：javascript, html, ajax

我有一个带有输入字段的表单，可以像这样访问

```
var algorithm = document.forms["algoForm"]["algorithm"].value;
var input = document.forms["algoForm"]["input"].value; 
```

之前的电话是

```
document.forms["algoForm"].submit(); 
```

形式是

```
<form name="algoForm" method="post" action="run.do"> 
```

一切运行良好
现在我想将其转换为 ajax 调用，以便我可以在同一页面上使用从 java 代码返回的数据。所以我用了类似的东西

```
 var algorithm = document.forms["algoForm"]["algorithm"].value;
        var input = document.forms["algoForm"]["input"].value;
        var data = 'algorithm = ' + algorithm + '&input = ' + input;

    $.ajax(
            {
                url: "run.do",
                type: "POST",
                data: data,
                success: onSuccess(tableData) 
                { //line 75
                    alert(tableData);
                }

            }
        ); 
```

但是上面的代码没有运行。请帮我让它运行

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T12:36:35.320

让我们使用 jQuery`serialize`来获取数据，`form`然后使用 jQuery 的`ajax`函数将数据发送到服务器：

```
var data = $("form[name=algoForm]").serialize();
$.ajax({
    url: "run.do",
    type: "POST",
    data: data,
    success: function(tableData){
        alert(tableData);
    }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T12:15:29.340

`data`需要一个文字对象，所以你需要：

```
var data = {
    'algorithm': algorithm,
    'input': input
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T12:33:13.350

**而不是检索所有参数值然后单独发送它们（这也可以在服务器端完成，使用下面的代码）**，使用这个：

```
var $form = $("#divId").closest('form');
    data = $form.serializeArray();

    jqxhr = $.post("SERVLET_URL', data )
        .success(function() {
            if(jqxhr.responseText != ""){
                //on response
            }
        });
    } 
```

`divId`是包含此表单的 div 的 id。

此代码会将所有表单参数发送到您的 servlet。现在，您可以在 servlet 中使用 request.getParameter 来获取 servlet 上的所有单个字段值。

您可以轻松地将上面的 jquery post 转换为 jquery ajax。

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T13:36:27.360

不知道怎么回事，这个跑的不错

```
 var algorithm = document.forms["algoForm"]["algorithm"].value;
    var input = document.forms["algoForm"]["input"].value;

    $.post('run.do', {  
            algorithm  : algorithm,
            input      : input
        }, function(data) {                  
            alert(data);
        }
    ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-09T10:23:23.593

```
// patching FORM - the style of data handling on server can remain untouched
$("#my-form").on("submit", function(evt) {
	var data = {};
	var $form = $(evt.target);
	var arr = $form.serializeArray(); // an array of all form items
	for (var i=0; i<arr.length; i++) { // transforming the array to object
		data[arr[i].name] = arr[i].value;
	}
	data.return_type = "json"; // optional identifier - you can handle it on server and respond with JSON instead of HTML output
	$.ajax({
		url: $form.attr('action') || document.URL, // server script from form action attribute or document URL (if action is empty or not specified)
		type: $form.attr('method') || 'get', // method by form method or GET if not specified
		dataType: 'json', // we expect JSON in response
		data: data // object with all form items
	}).done(function(respond) {
		console.log("data handled on server - response:", respond);
		// your code (after saving)

	}).fail(function(){
		alert("Server connection failed!");
	});

	return false; // suppress default submit action
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
```

# javascript - 如何嵌入谷歌地图？

> ID：11082491
> 
> 赞同：0
> 
> 时间：2012-06-18T12:06:36.867
> 
> 标签：javascript, jquery, google-maps

我正在尝试将谷歌地图添加到我的网站，我尝试了这个：

```
 $.getScript("https://maps.googleapis.com/maps/api/js?sensor=false", function () {
     alert("1");          
     var map;
     var myOptions = {
         zoom: 8,
         center: new google.maps.LatLng(-34.397, 150.644),
         mapTypeId: google.maps.MapTypeId.ROADMAP
     };
     alert("2");
     map = new google.maps.Map(document.getElementById("container"), myOptions);
 }); 
```

这是行不通的。谁能告诉我为什么？

**编辑**

脚本加载完美。我知道这是因为`alert(1)`显示但之后控制没有达到`alert(2)`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T12:09:13.470

```
document.getElementById(id) 
```

什么是**id**，它是在哪里定义的？

getScript 还用于执行 Ajax 请求，而这并不是您应该执行 Google Maps 的方式。只需以正常方式调用脚本，并有一个在文档就绪时执行的 init 函数。或者更好地使用 Google Maps API 为您提供的 window.load 事件侦听器。

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false" />

<script type="text/javascript">
function init(id) 
     {          
             var map;
             var myOptions = {
                 zoom: 8,
                 center: new google.maps.LatLng(-34.397, 150.644),
                 mapTypeId: google.maps.MapTypeId.ROADMAP
             };
             map = new google.maps.Map(document.getElementById(id), myOptions);
     }

google.maps.event.addDomListener(window, 'load', init('yourDivID'));
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:56:28.257

您必须为此使用异步加载 - [https://developers.google.com/maps/documentation/javascript/tutorial#asynch](https://developers.google.com/maps/documentation/javascript/tutorial#asynch)

在当前方法中，脚本执行此操作 -

```
function getScript(src) {
  document.write('<' + 'script src="' + src + '"' + ' type="text/javascript"><' + '/script>');
} 
```

所以，当你打电话时`$.getScript`，那将是无效的。并且，`google.maps.LatLng`变得未定义。

我创建了一个带有异步版本的版本。您可以检查小提琴@ [http://jsfiddle.net/rifat/G3yPw/](http://jsfiddle.net/rifat/G3yPw/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:12:39.430

你应该看看你的容器 div。

它必须具有指定的宽度和高度。

我曾经把 LatLng 的矫揉造作分开：

```
 var map;
     var ll = new google.maps.LatLng(-34.397, 150.644);
     var myOptions = {
         zoom: 8,
         center: ll,
         mapTypeId: google.maps.MapTypeId.ROADMAP
     };
     map = new google.maps.Map(document.getElementById("container"), myOptions); 
```

# .htaccess - 用于将旧 URL 重定向到新 URL 的 RewriteRule

> ID：11082498
> 
> 赞同：0
> 
> 时间：2012-06-18T12:07:01.623
> 
> 标签：.htaccess, mod-rewrite

我无法编写 RewriteRule 将旧 URL 重定向到新 URL：

**旧网址：** `http://www.hostname.com/hello.php`

**新网址：** `http://www.hostname.com/folder1/hello.php`

这`hello.php`是任何动态名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:13:18.687

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.hostname\.com$
RewriteRule ^/hello.php$ /folder1/hello.php [L,R=301] 
```

*   `RewriteCond`是为了确保这种重写只发生在特定的域名上，如果不相关则删除
*   `L`表示不会处理任何进一步的规则
*   `R=301`意思是“永久移动”

如果有多个文件名要重定向，您可以更改该`RewriteRule`行以匹配多个名称：

```
RewriteRule ^/(hello|goodbye|welcome).php$ /folder1/$1.php [L,R=301] 
```

这`$1`是括号中的第一个子模式，如果还有更多，他们将得到后续数字 - `$2`, `$3`, 等

# php - 根据选择的值 php 回显不同的结果

> ID：11082502
> 
> 赞同：0
> 
> 时间：2012-06-18T12:07:09.603
> 
> 标签：php, loops, option, selected

我在数据库中有 2 个表，一个被调用`productBrands`，另一个被调用`products`。

现在我想根据我选择的品牌来回应产品的结果。

我掌握了基础知识，但我不确定如何测试选择的品牌。

```
 echo '
           Brand:<br><select name="brand">';

        $brandsQuery = "SELECT * FROM productBrands";
        $brands  = mysql_query($brandsQuery) or
        die("SQL: $brandsQuery)<br />".mysql_error());

        $brandsNo = mysql_num_rows($brands);
        echo '<option value="" selected>Choose a brand...</option>';
        for ($i = 0; $i < $brandsNo; $i++) {
            $name       = mysql_result($brands, $i, 'name');
            $brandid         = mysql_result($brands, $i, 'id');

            echo '<option value="' . $brandid . '">' . $name . '</option>';
        }

        echo '</select><br/>';

        echo 'Produkt:<br><select name="produkt">';

                   $productsQuery = "SELECT * FROM products";
                   $products  = mysql_query($productsQuery) or
                   die("SQL: $productsQuery)<br />".mysql_error());

                   $productsNo = mysql_num_rows($products);     
                   $brandQuery = "SELECT productBrand from products";                       
                   for ($f = 0; $f < $productsNo; $f++ ) {
                       $productName = mysql_result($products, $f, 'productName');
                       $productId = mysql_result($products, $f, 'productId');

                       echo '<option value="' .$productId .'">' . $productName .'</option>';}
                   echo '</select><br/>'; 
```

这会打印出正确的值，但不会考虑首先选择的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:14:54.250

尝试改变这个：

```
$brandsQuery = "SELECT * FROM productBrands"; 
```

对此：

```
$brandsQuery = sprintf("SELECT * FROM productBrands WHERE brandname = '%s'", 
                                           mysql_real_escape_string($brand)); 
```

这将插入您向用户询问的品牌，并且不会产生所有结果，只会插入与指定品牌相关的产品。

注意：以上假设您`$brand`从评论中提到的保管箱中获得了值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:15:46.273

假设这是表单的一部分（或提交的某些过滤器）并且您正在使用 POST 提交表单，您必须扩展脚本的第二部分：

```
echo 'Produkt:<br><select name="produkt">';
$whereBrand = '';
if(isset($_POST['brand']) $where = " WHERE productBrand = '".mysql_real_escape_string($_POST['brand'])."'";
$productsQuery = "SELECT * FROM products{$whereBrand}";
$products  = mysql_query($productsQuery) or
    die("SQL: $productsQuery)<br />".mysql_error());

$productsNo = mysql_num_rows($products); 
for ($f = 0; $f < $productsNo; $f++ ) {
    $productName = mysql_result($products, $f, 'productName');
    $productId = mysql_result($products, $f, 'productId');

    echo '<option value="' .$productId .'">' . $productName .'</option>';
}
echo '</select><br/>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:21:25.893

有三种常见的方法来处理这个问题。

1）将其写成表格并回发所选值。请记住，PHP 只是服务器端的，因此服务器不知道用户在页面上做了什么。

2) 选择品牌时，使用 jQuery 或其他方式对服务器上的另一个操作执行 AJAX 回调。此回调的结果是您要为页面的其余部分填写的信息。

3）如果数据集比较小，可以将所有数据加载到页面中，作为一个javascript数组，然后在页面上用javascript处理其余的数据。

选项#2 可能是您最好的选择，所有方面。但是，对于初学者来说，选项 #1 可能更容易实施。如果数据集相对较小，则仅使用选项 #3。

# html - 视频js初始化错误

> ID：11082506
> 
> 赞同：3
> 
> 时间：2012-06-18T12:07:38.160
> 
> 标签：html, html5-video

我使用 videojs 作为 html5 视频播放器。但是当页面加载时，会出现一些错误，例如（firebug）： `Video Error Object { originalEvent=Event error, type="error", timeStamp=`

但是这之后视频就可以正常播放了，但是恐怕这会引起一些未知的问题。

我使用videojs，如： `<video id="my_video_1" class="video-js vjs-default-skin" preload="auto" width="640" height="480" data-setup="{}"> <source src="movie.mp4 " type='video/mp4'> <source src="movie.ogv" type='video/ogg'> </video>`

有人说把这个加到/var/www/的htaccess文件里，或者加到apache httpd.conf文件里，

```
AddType video/ogg .ogv
AddType video/mp4 .mp4
AddType video/webm .webm 
```

但它还没有工作。有什么问题？

# c++ - Boost中的Reg序列化和反序列化

> ID：11082509
> 
> 赞同：0
> 
> 时间：2012-06-18T12:07:47.380
> 
> 标签：c++, boost, boost-serialization

在下面的序列化和反序列化中，反序列化程序在下面提到的行终止。

```
const char *file = "aaa.bin";

std::ofstream outputstring(file,ifstream::binary);
boost::archive::binary_oarchive oa(outputstring,boost::archive::no_header);
int i =1;
oa<< i;
outputstring.close();

std::ifstream intputstring(file,ifstream::binary);
**boost::archive::binary_iarchive ia(intputstring);**   //Program is terminating here
int j;
ia >> j;
intputstring.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:55:00.923

您忘记在输入存档中添加相同的标志。

```
boost::archive::binary_iarchive ia(intputstring, boost::archive::no_header); 
```

# linux - Bash 无法更改文件内容

> ID：11082511
> 
> 赞同：0
> 
> 时间：2012-06-18T12:07:48.890
> 
> 标签：linux, bash, shell

我有一个奇怪的问题。

有一个文件：

```
$ cat fp_id_led
1
$ echo 0 > fp_id_led
$ cat fp_id_led
1 <--- Still shows 1! 
```

此外，当我在 vim 中打开文件时，它只是空的。我怎样才能翻转文件中的那个值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T12:13:12.703

可能该文件不在普通文件系统上，而是在伪文件系统上，例如`/proc`？

# objective-c - 如何让 UITextField 接受焦点而不显示键盘？

> ID：11082515
> 
> 赞同：1
> 
> 时间：2012-06-18T12:08:03.357
> 
> 标签：objective-c, ios

我试图找到一种方法来防止当用户点击 TextField 时出现键盘但找不到方法。

在将我的 textField 链接到委托后，我尝试了此代码，但它仍然对我不起作用，代码正在记录，但键盘确实出现了。

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField { 
    NSLog(@"BeginEditing");
    return YES;
    [textField resignFirstResponder];
} 
```

当我返回时，`NO`我失去了我需要的 textField 的焦点。

我拥有的 textFields 填充了来自同一视图上的按钮的值，这就是我不希望键盘出现的原因，同时我希望用户选择他们想要填充的 textField。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T12:21:02.413

如果您只想让用户选择要填充的文本字段并且不想显示键盘，那么您可以执行以下操作：

*   将标签添加到您的文本字段
*   将代码更改为：

> ```
> -(BOOL)textFieldShouldBeginEditing:(UITextField *)textField 
> {
>     selectedTextFieldTag = textField.tag;
>     return NO;
> } 
> ```

使用`selectedTextField`value 来确定要填写代码的文本字段。`return NO`不允许键盘出现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T19:35:13.537

这肯定会帮助你。

```
-(BOOL)textFieldShouldBeginEditing:(UITextField*)textField {
UIView *dummyView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 1, 1)];
activeField.inputView = dummyView; // Hide keyboard, but show blinking cursor
return YES;
} 
```

我测试过，它对我有用。希望这对其他有类似问题的人有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T12:09:55.537

[textField resignFirstResponder]; 不会被调用，因为您在调用它之前从该方法返回。这不会发出警告吗？

尝试在此处返回 NO，或者如果这不起作用，请尝试在文本字段上禁用用户交互：

```
[myTextField setUserInteractionEnabled:NO]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T12:10:38.040

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField { 
NSLog(@"BeginEditing");
[textField resignFirstResponder];
return YES;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T12:24:15.333

所以在这里你只需使用标志 int 变量将值分配给焦点文本字段

`int i;`在 .h 或 .m 文件中全局定义标志

之后在 textField Delegate 方法中使用下面的代码......

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField{

    if (textField == yourtextField1 ) {
        i=1;
    }
    else if (textField == yourtextField2 ) {
        i=2;
    }
    else if (textField == yourtextField3 ) {
        i=3;
    }
    else if (textField == yourtextField4 ) {
        i=4;
    }
    return NO;
}
-(IBAction)yourbutton1_Clicked:(id)sender{
           if( i == 1){
              yourtextField1.text=yourbutton1.titleLabel.text;
          }
          else if ( i == 2){
            yourtextField2.text=yourbutton1.titleLabel.text;
          }
          else if ( i == 3){
            yourtextField3.text=yourbutton1.titleLabel.text;
          }
          else if ( i == 4){
            yourtextField4.text=yourbutton1.titleLabel.text;
          }
          else{
              NSLog(@"Please Click On TextField");//here you can put AlertView Message
          }
} 
```

等等.......

您也可以使用带有按钮的发件人ID和标签的常用方法......

# c# - 如何在没有 PerformanceCounter 的情况下获得可用内存和 CPU 使用率？

> ID：11082522
> 
> 赞同：1
> 
> 时间：2012-06-18T12:08:30.263
> 
> 标签：c#, .net, performancecounter

我的 Windows XP 不提供类别处理器或内存，我无法将其显示（我不允许编辑注册表或更改系统文件）

有没有办法在不使用 PerformanceCounter 的情况下获得实际的 CPU 使用率和可用内存？

我正在使用Windows XP `.NET 3.5`SP2`C#`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:11:29.180

要使用 WMI 获取没有性能计数器的处理器使用情况，请查看 win32_Processor 类。如果你想查看可用的总内存使用`GC.GetTotalMemory - Process.GetCurrentProcess().PrivateMemorySize64`；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:10:06.880

你能使用本机 win32 API 调用吗？如果是这样，那么他们会在您之后提供信息。

请参阅以下文章：[CodeProject：使用 C# 调用 API 函数](http://www.codeproject.com/Articles/1285/Calling-API-functions-using-C)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:12:20.460

如果您使用的是 .net 4，并且您只对当前应用程序域在做什么感兴趣，那么您可以使用它：

```
this.AppDomain.MonitoringTotalProcessorTime 
```

请参阅[MSDN 文档 MonitoringTotalProcessorTime](http://msdn.microsoft.com/en-us/library/system.appdomain.monitoringtotalprocessortime.aspx)

# javascript - 仅限客户端的 cookie - 永远不会发送到服务器的 cookie

> ID：11082526
> 
> 赞同：33
> 
> 时间：2012-06-18T12:08:39.847
> 
> 标签：javascript, jquery, html, cookies, session-cookies

我想将用户点击的数据存储在一个永远不必去服务器的 cookie 中。它就像一个会话添加的数据，我想在会话中持续存在，因为数据只是不断添加到 cookie 中，并且存储了很长时间，并且只有在用户删除浏览历史记录时才会被删除。cookie 是纯客户端的 cookie，它永远不必去服务器，因为我不需要服务器上的用户生成数据，所以我想摆脱 cookie 在之间来回发送时产生的额外开销浏览器和服务器。有可能实现这一目标吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-04T16:42:24.910

我知道这对你来说有点晚了，但这个答案适用于所有有同样问题的人。

1) 使用 HTML5，您可以使用 [网络存储][1]。

2）（只是一个想法！-未经测试！）您可以定义一个cookie（通过客户端上的javascript）并设置“安全”属性。在这种情况下，cookie 将仅通过 HTTPS 连接发送到服务器。为了确保 cookie 永远不会离开浏览器，您永远不会打开 HTTPS 连接；-)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-18T13:33:47.597

如果浏览器兼容性是一个问题，您可以使用一些 javascript 来包装各种不同的技术。旧版本的 IE 支持（supprise supprise）名为 userData 的专有版本的本地存储（我认为它不完全相同，但应该做你需要的）。

像[https://github.com/andris9/jStorage](https://github.com/andris9/jStorage)或[https://github.com/marcuswestin/store.js](https://github.com/marcuswestin/store.js)这样的包装脚本应该可以满足您的需要。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-03T18:03:47.930

我 100% 确定没有办法强制 cookie 仅在客户端，它们总是发送到服务器。然而，也可以做相反的事情：通过在 cookie 上设置 HttpOnly 标志，仅服务器端的 cookie（javascript 无法读取）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-06T08:44:45.027

使用不可能的路径来设置 cookie：

```
document.cookie = "cookieName=...; expires=... ; path=/never_reached/ablkappmqlnahsuia"; 
```

# java - IntelliJ Idea：缺少远程调试选项

> ID：11082530
> 
> 赞同：3
> 
> 时间：2012-06-18T12:08:46.437
> 
> 标签：java, intellij-idea, remote-debugging

我需要使用 IntelliJ Idea 10.5（终极版）调试远程 java 代码

当我创建新的调试配置时，主机和端口不会出现在那里。

如何打开远程调试？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T12:33:06.133

确保创建**远程**类型的配置：

![偏僻的](../Images/295c91c96841ad236ae45369ac697aa8.png)

如果没有帮助，请尝试禁用第三方插件，它们可能会破坏标准功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-01T11:18:15.027

对我来说，默认配置类型列表中完全缺少远程选项，因此我无法添加远程配置。

修复很简单：重启 IDEA。

# php - 如何在 PHP 中创建函数字典？

> ID：11082532
> 
> 赞同：5
> 
> 时间：2012-06-18T12:08:52.353
> 
> 标签：php, function-pointers

我想要一本函数字典。有了这个字典，我可以有一个处理程序，它接受一个函数名和一个参数数组，并执行该函数，如果它返回任何内容，则返回它返回的值。如果名称与现有函数不对应，则处理程序将引发错误。

实现 Javascript 将非常简单：

```
var actions = {
  doSomething: function(){ /* ... */ },
  doAnotherThing: function() { /* ... */ }
};

function runAction (name, args) {
  if(typeof actions[name] !== "function") throw "Unrecognized function.";
  return actions[name].apply(null, args);
} 
```

但是由于函数在 PHP 中并不是真正的一流对象，所以我不知道如何轻松地做到这一点。有没有一种相当简单的方法可以在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:11:17.160

我不清楚你的意思。
如果您需要一组函数，只需执行以下操作：

```
$actions = array(
'doSomething'=>function(){},
'doSomething2'=>function(){}
); 
```

你可以运行一个函数`$actions['doSomething']();`

当然你可以有 args：

```
$actions = array(
'doSomething'=>function($arg1){}
);

$actions['doSomething']('value1'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T12:13:56.760

```
$actions = array(
    'doSomething'     => 'foobar',
    'doAnotherThing'  => array($obj, 'method'),
    'doSomethingElse' => function ($arg) { ... },
    ...
);

if (!is_callable($actions[$name])) {
    throw new Tantrum;
}

echo call_user_func_array($actions[$name], array($param1, $param2)); 
```

您的字典可以包含任何允许的[`callable`](http://php.net/manual/en/language.types.callable.php)类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T12:13:47.230

您可以为此使用 PHP [`__call()`](http://php.net/manual/en/language.oop5.overloading.php)：

```
class Dictionary {
   static protected $actions = NULL;

   function __call($action, $args)
   {
       if (!isset(self::$actions))
           self::$actions = array(
            'foo'=>function(){ /* ... */ },
            'bar'=>function(){ /* ... */ }
           );

       if (array_key_exists($action, self::$actions))
          return call_user_func_array(self::$actions[$action], $args);
       // throw Exception
   }
}

// Allows for:
$dict = new Dictionary();
$dict->foo(1,2,3); 
```

对于静态调用，`__callStatic()`可以使用（从 PHP5.3 开始）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T12:14:56.157

```
// >= PHP 5.3.0
$arrActions=array(
    "doSomething"=>function(){ /* ... */ },
    "doAnotherThing"=>function(){ /* ... */ }
);
$arrActions["doSomething"]();
// http://www.php.net/manual/en/functions.anonymous.php

// < PHP 5.3.0
class Actions{
    private function __construct(){
    }

    public static function doSomething(){
    }

    public static function doAnotherThing(){
    }
}
Actions::doSomething(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T12:25:46.327

如果您打算在对象上下文中使用它，您不必创建任何函数/方法字典。

您可以使用魔术方法简单地在不存在的方法上引发一些错误`__call()`：

```
class MyObject {

    function __call($name, $params) {
        throw new Exception('Calling object method '.__CLASS__.'::'.$name.' that is not implemented');
    }

    function __callStatic($name, $params) { // as of PHP 5.3\. <
        throw new Exception('Calling object static method '.__CLASS__.'::'.$name.' that is not implemented');
    }
} 
```

然后每个其他类都应该扩展你的`MyObject`类......

[http://php.net/__call](http://php.net/__call)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T12:12:01.783

[http://php.net/manual/en/function.call-user-func.php](http://php.net/manual/en/function.call-user-func.php)

`call_user_func`将让您将函数的名称作为字符串执行并传递参数，但我不知道这样做对性能的影响。

# .net - Visual Studio Winforms 设计器蓝色箭头

> ID：11082533
> 
> 赞同：4
> 
> 时间：2012-06-18T12:08:52.813
> 
> 标签：.net, winforms, visual-studio-2010

当控件出现在 Visual Studio 2010/C# 中时，位于控件左上角的蓝色箭头表示什么？例如：

![](../Images/0bf707fcf42afcdffce0cfdd67016cb4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:20:01.183

这些是从当前窗口/控件继承的窗口/控件继承的控件。

这些控件位于父窗口中。

# repository - 如何从 Alfresco 存储库中隐藏“数据字典”？

> ID：11082534
> 
> 赞同：0
> 
> 时间：2012-06-18T12:09:01.107
> 
> 标签：repository, hide, admin, alfresco, data-dictionary

我是露天的新手。我正在将 Alfresco 与 Web 应用程序集成为我的应用程序的库。我以管理员身份登录到 alfresco，我可以在我的存储库中看到数据字典。我想隐藏它。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:40:34.273

为了隐藏普通用户的数据字典文件夹，您必须正确配置权限。默认情况下，Alfresco 中的所有文件夹都使用默认的 ACL，这使得每个人都成为消费者（即只读）。这就是使它们对每个用户可见的原因。

尝试以下方法之一：

[来自露天探险家]

*   以管理员身份登录
*   转到数据字典
*   点击更多操作 -> 管理空间用户
*   删除您在那里的唯一一个条目

[来自户外分享]

*   以管理员身份登录
*   转到存储库
*   如果需要，请单击“显示文件夹”
*   悬停在数据字典上
*   点击更多 -> 管理权限
*   将鼠标悬停在操作列上，单击删除

这样，您就可以对普通用户隐藏 Data Dictionary 文件夹。管理员用户始终可以访问所有内容。通过类似的过程，您可以在文件夹上配置更细粒度的访问级别，例如使某些用户能够访问它们。

# c# - wcf http 绑定 vs dualhttp 绑定

> ID：11082536
> 
> 赞同：1
> 
> 时间：2012-06-18T12:09:03.027
> 
> 标签：c#, wcf

我正在尝试使用 wcf 构建一个 http 侦听器（webservice）。此侦听器是更大的桌面应用程序的一部分。此桌面应用程序还调用 http 侦听器。

当监听器接收到数据时，它应该被传递给桌面应用程序。我尝试构建一个httpbinding服务并使用回调机制

```
[OperationContract(IsOneWay = true)]
void OnDataReceived(Data data); 
```

问题是我需要 wsDualhttpbinding 因为回调。

我真的需要使用 dualhttp 将数据从一个 .NET 应用程序发送到另一个应用程序还是我遗漏了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:11:39.500

是的，您需要双工或双工通信。HTTP 本质上是一个单向协议。客户端必须调用服务器。没有它，服务器无法与客户端交谈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:21:24.660

如果您使用的是回调机制，而不是轮询机制，那么是的，您需要双重绑定，因为 WCF 服务需要能够发送和接收消息（而不是接收和返回响应）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:17:12.097

您的问题是您有一个作为 WCF 服务公开的事件源。服务实时向其客户端发送事件的唯一方法是通过全双工连接，这意味着使用 duathttp 或 dualtcp 绑定。

但是，使用双工绑定充其量是复杂的。允许客户端订阅服务并在客户端感兴趣的事件发生时接收消息会更简单。

这比双工绑定简单得多，因为客户端和服务之间没有实际的连接，只有异步消息。

虽然 WCF 为 msmq 传输提供绑定，但它不提供具有这种 pub-sub 支持的绑定，因此您可以为此编写代码，也可以使用像[NServiceBus](http://www.nservicebus.com/)这样的开源消息传递总线。

# iphone - 使用 libffmpeg 在 iPhone 上播放视频示例

> ID：11082537
> 
> 赞同：0
> 
> 时间：2012-06-18T12:09:05.197
> 
> 标签：iphone, objective-c, ios, ffmpeg, avfoundation

有人可以提供有关使用 libffmpeg 库播放苹果不支持的视频文件的参考或示例。

让我们考虑 mkv 文件。我想该库会解码原始媒体数据并将其传递给 AVFoundation 对象以在设备上播放它。我对吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T13:05:18.670

另一种选择是 GitHub 上的[kxmovie](https://github.com/kolyvan/kxmovie)项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:35:07.770

另一个有用的例子是 ffmpeg4iphone 项目，它确实有`Player`真正播放视频和音频通道的类

# javascript - jQuery：儿童计数 = 0 和 ajax

> ID：11082538
> 
> 赞同：0
> 
> 时间：2012-06-18T12:09:06.667
> 
> 标签：javascript, jquery

我正在开发一个 jQuery，它从服务器获取元素列表，将其附加到元素，然后循环输入新附加的元素以转换它们（使它们可编辑）。

我的循环有问题。附加工作正常，所以我有一个元素列表，例如：

```
<div id="innerModal">
    <label id="exampleTitle">Title :</label>
    <label id="exampleField" class="ftext">Value</label>
</div> 
```

然后我尝试循环：

```
function makeListEditable(element, type){
    //I checked here that the element sent is well '#innerModal'
    alert($(element).children().length);
    $(element).children().each(function() {

        if( $( this ).is( 'ftext' ) ){
            makeEditable( $( this ), type, '', '' );
        }
    });
} 
```

警报打印“0”。

这个问题是从哪里来的？我该如何解决？

编辑：这是 makeListEditable 的调用：

```
getFormOnElement(//Gets the form and appends it
    "getorganisationeditable/"+curOId,
                        "#innerModal"
    );
    makeListEditable('#innerModal'); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:20:02.117

由于 ajax 是异步的，它不会等到元素被追加并执行 makeEditable。由于 ajax 不一定已经完成，因此该元素没有子元素。将 makeEditable 移动到 ajax 调用的成功回调

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:21:43.583

`ftext`是一门课，需要“点”`.is(".ftext")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:28:13.547

添加其他警报，例如：

```
alert($(element).text()); 
```

或者

```
alert($(element).html()); 
```

这样您就可以知道您的选择器是否工作正常。

# java - 在其他模块中加载测试资源？

> ID：11082539
> 
> 赞同：5
> 
> 时间：2012-06-18T12:09:09.500
> 
> 标签：java, maven, junit

我在另一个模块中使用抽象类来读取和输入我的测试数据：

```
package src/main/java/path/to/my/base/testclass;
InputStream stream = getClass().getResourceAsStream(filename); 
```

`filename`例如`"test.txt"`，位于`src/main/resources/path/to/my/base/testclass`

只要我将这个抽象类放入与我的测试类所在的模块相同的模块中，一切正常。然后我将 acstract 类（以及资源​​）提取到其他模块，编译，添加到 pom 等结果：我的测试实现运行良好，但是：我得到 IO 异常作为`file could not be found.`

我在这里想念什么？为什么抽象类在同一个模块中工作，而不是在另一个模块中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:41:11.780

测试资源仅用于此工件的测试，它们不会被部署。

有两种可能的解决方法：

*   Dirty：让您的应用程序[部署一个测试 jar 和主 jar](http://maven.apache.org/plugins/maven-jar-plugin/usage.html#How_to_create_a_jar_containing_test_classes "jar：测试使用")，并将其作为具有范围 TEST 的依赖项添加到第二个工件。
*   Clean：为基础测试类和通用测试资源创建单独的测试工件。重要提示：在这个工件中，src/test 中没有任何内容，所有内容都在 src/main 中。从具有范围 TEST 的其他两个工件中引用此测试工件。

# internet-explorer - 为什么 X-UA-Compatible 有时无法生效？

> ID：11082543
> 
> 赞同：1
> 
> 时间：2012-06-18T12:09:30.863
> 
> 标签：internet-explorer, internet-explorer-8, x-ua-compatible

我有一个为 IE7 编写的旧版 Intranet Web 应用程序，其中包含一些糟糕的 CSS，这使得它在 IE8 中无法正确呈现。由于使用它的组织现在正在切换到 IE8，因此我通过将`X-UA-Compatible`HTTP 标头设置为`EmulateIE7`. 我已经确认标头实际上是通过`wget -S`.

对于大多数用户来说没有问题，但有些用户报告说一个（相当重要的）iframe 渲染不正确。虽然我无法重现该问题，但只需使用 IE8 和开发人员工具并将文档模式设置为“Internet Explorer 8 标准”即可达到相同的效果

因此，对于某些用户而言，似乎“某事”导致一个 iframe 以与 HTTP 标头指定的文档模式不一致的文档模式呈现。

所以问题是：在这个页面中可能会发生什么使 IE8 切换出 HTTP-header-specified 文档模式？

**编辑**：根据@Václav Dajbych 提供的链接，我发现根据流程图，我应该获得 IE7 标准模式（如我所料。）流程是：不，不，是，是，是。我受影响页面的文档类型是

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:20:39.360

检查[确定IE8的文档模式](http://blogs.msdn.com/b/ie/archive/2010/03/02/how-ie8-determines-document-mode.aspx)。在决策算法中，只有元标记和开发人员工具设置的优先级高于 HTTP 标头。有代理服务器吗？我不知道还有什么可能导致它。

# objective-c - 如何最好地调试 NSDate / NSTimezone 相关代码

> ID：11082546
> 
> 赞同：0
> 
> 时间：2012-06-18T12:09:41.363
> 
> 标签：objective-c, cocoa, debugging, nsdate, nstimezone

我知道这`NSDate`不代表时区，但也许有人可以建议我如何最好地调试它与其他类的关系，`NSDatePicker`例如`CalCalendarStore`.

例如，我想将日期选择器的日期设置为 01-01-2012。我做这样的事情：

```
newDate = [NSDate date];
NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];
NSDateComponents *components = [calendar components:(NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit) fromDate:newDate];
[components setMonth:1];
[components setDay:1];
newDate = [calendar dateFromComponents:components]; 
```

这在我的日期选择器中运行良好，但是一旦我尝试调试与日期相关的代码，事情就会变得非常混乱（与 TZ 相关的一小时甚至一天的变化）。有人可以建议我如何做到这一点吗？

如果我应该使用日期格式化程序（可能！），我应该如何做到这一点，以便我可以轻松调试而不会过多地混淆代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:26:29.257

NSDate 只是 unix 时间的包装器，因此根本不知道时区，它实际上是您的日期格式化程序，它可以在其上放置任何类型的时区。

处理类似的问题我最终只是强制我所有的 NSDate 对象使用 UTC 日期（当不担心“时间”组件本身时）。

您必须使用将时区属性设置为 UTC 的新 NSCalendar 实例来生成这些日期，但这样您就可以处理一致的日期，只需使用 UTC 时区设置格式化程序来显示它们，或者使用 UTC 设置日历来中断根据需要将它们组合成组件。

# java - 无法从 Google Plus 访问用户的个人资料

> ID：11082550
> 
> 赞同：5
> 
> 时间：2012-06-18T12:09:58.020
> 
> 标签：java, oauth-2.0, google-plus, scribe

我正在使用 Scribe-Java 使用 OAuth2 连接到 Google plus。我能够对我的应用程序进行身份验证并获得用户的许可，但是当我尝试访问 以外的任何内容`userinfo`时，我得到了这个异常。

> 403
> 
> {
> 
> “错误”： {
> 
> ```
>  "errors": [
>             {
> 
>           "domain": "usageLimits",
>            "reason": "accessNotConfigured","message": "Access Not Configured"
> 
>             }
> 
>             ],
> 
>   "code": 403,
> 
> "message": "Access Not Configured"
> 
>      }
> 
> } 
> ```

我已将我的应用程序的范围设置为`https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/userinfo.profile`并访问我正在使用此 url 的用户个人资料：

`https://www.googleapis.com/plus/v1/people/{userid}/activities/public`

你能告诉我我做错了什么吗？我需要在此处使用其他范围来访问配置文件吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T01:05:33.770

1) 访问 Google API 控制台： [http ://code.google.com/apis/console](http://code.google.com/apis/console)

2) 转到“服务”页面。

3) 将 Google+ API 切换为 On 以启用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T08:56:44.507

我在使用[HybridAuth](http://hybridauth.sourceforge.net/)的 PHP 中遇到了同样的错误：

我必须在*APIs & Auth* -> *APIs中的*[Google Developers Console](https://console.developers.google.com/)中激活以下内容

 ***   联系人 API
*   谷歌+ API

[另请参阅http://hybridauth.sourceforge.net/userguide/IDProvider_info_Google.html](http://hybridauth.sourceforge.net/userguide/IDProvider_info_Google.html)上的讨论**

# javascript - 如何在 javascript 中读取本地 Json 文件

> ID：11082551
> 
> 赞同：1
> 
> 时间：2012-06-18T12:10:11.797
> 
> 标签：javascript, json

请注意，此应用程序永远不会在服务器系统上运行。

我正在尝试读取本地 json 文件，我使用的代码是：

```
jQuery.getJSON('/Users/michael/jscrud/json/test.json')
  .done(function(data) {
 //do something here
} 
```

我还需要能够更改此文件，添加有关所做更改的元数据。任何帮助都会非常感谢。因为我花了 3 天时间试图找到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:14:06.217

大多数浏览器禁止来自 JavaScript 的文件请求，但它们通常也有非标准的方式来禁用它以用于本地调试目的（例如，参见[Chrome 的解决方案](https://stackoverflow.com/questions/4819060/allow-google-chrome-to-use-xmlhttprequest-to-load-a-url-from-a-local-file)）。但是，绝对没有浏览器允许您更改数据，因为它根本不是正常在线工作的方式 - 您不能告诉某些服务器“更改此 URL 上的文件”，因此不支持 file:// 这样的事情协议。

# android - 具有可变宽度和背景的 TextView

> ID：11082552
> 
> 赞同：1
> 
> 时间：2012-06-18T12:10:17.957
> 
> 标签：android, background, textview

> **可能重复：**
> [为什么 TextView 的背景会改变它的大小？](https://stackoverflow.com/questions/11082331/why-does-the-background-of-textview-change-its-size)

我有一个 TextView，我将在其中动态放置文本，它有一个背景（自定义位图，不是纯色或渐变）。我希望 TextView（当然还有背景）环绕包含的文本（wrap_content）。我该怎么做？

另请参阅[为什么 TextView 的背景会改变它的大小？](https://stackoverflow.com/questions/11082331/why-does-the-background-of-textview-change-its-size).

我发现的唯一一件事是使背景位图非常小，然后它会拉伸和换行。但这不会是好的质量......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:19:00.687

如果您放置固定大小的背景图像，那么您的视图将采用它的大小，因此您需要使用没有大小的背景，以便它可以占用您的文本大小。为此，您可以执行以下 2 件事：

**1.**获取1像素的图像。

**2.**绘制渐变图像：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <gradient
        android:angle="270"
        android:endColor="#FFFFFF"
        android:startColor="#FFFFFF"
        android:type="linear" >
    </gradient>

    <corners android:radius="10dp" />

    <stroke
        android:width="2dp"
        android:color="#AAAAAA" />

</shape> 
```

**注意：**有关详细说明，请点击[链接](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)。

**编辑：**

**3.**如果图像不是普通的或渐变的，那么您需要在每次设置文本时以编程方式设置文本视图的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:17:24.327

试试这个方法。。

```
 EditText saveas = new EditText(context);
    saveas.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT)); 
```

我认为它对你有帮助。

谢谢

# jquery - IE 渲染：光标检测（正确）在其他地方显示（错误）的可点击元素

> ID：11082554
> 
> 赞同：0
> 
> 时间：2012-06-18T12:10:22.690
> 
> 标签：jquery, jquery-ui, internet-explorer, internet-explorer-8

我对 Internet Explorer 8 有一个有趣的问题。我的任务是使网页在 Internet Explorer 下正常工作（不幸的是，我不允许在此处发布指向此页面的链接）。问题是：页面的某些元素显示在错误的位置。它们在页面上放错了位置，但我无法在显示它们的位置单击它们。如果我点击它们应该在的位置，我可以点击它们......好吧，我敢打赌这听起来令人困惑，所以这里有一个屏幕可能会有所帮助：

![错位的按钮](../Images/384f22a379a63d0a2d9b0a857df2ef78.png)

带有“Liczba zmian: 5 [Pokaż]”的按钮和整个灰色条显示在错误的位置。它应该放在光标所在的空白处。现在，如果我尝试单击红色箭头指向的按钮 - 什么也没有发生。但是，如果我单击蓝色箭头指向的空白位置，则会单击该按钮并执行 .click() 函数。

似乎光标正在查看网站的不同（正确）版本。

整个页面塞满了 JQuery、JQuery-UI、JQuery.Weekdcalendar 和许多其他 jquery 插件。我有以下文档类型：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

“显然”在 Firefox 和 Chrome 上一切正常，我不知道 IE9（我只有 winXP）。

对于如何处理此问题的任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:52:40.807

检查浏览器和文档模式的 IE 开发人员工具（您希望 IE 8 标准使此类事情更可预测）。我会尝试使用 HTML 5 DOCTYPE 强制 IE 8 标准模式

```
 <!doctype html> 
```

和/或

```
 <meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

在头部标签中。这是适用于 IE 9 的 MSDN 链接，但也可能适用于 IE 8：

[http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx)

请注意，当您更改 DOCTYPE 时，如果有些事情看起来很奇怪——那么您的 HTML/CSS 可能有一些混乱/非标准的内容，最终会给您在基于标准的浏览器上带来问题（例如，如果您的客户升级到 IE9）。

# mysql - Mysql - Concat - 过程执行失败

> ID：11082557
> 
> 赞同：0
> 
> 时间：2012-06-18T12:10:29.383
> 
> 标签：mysql, triggers, procedure, concat

我也有 123 张桌子：M001 -> M010 -> M123。每个人都是客户。当它到达带有触发器的父表的记录时，调用如下函数：

```
 Declare MasterX  int;
  Set MasterX = New.Master;
  Call Lecturas_Insertar(MasterX,New.Id); 
```

这是我的功能：

```
BEGIN

#Set Master
  If MasterX < 10 Then 
  Set MasterX = Concat("lecturas.M00",MasterX);
  End If;
#Set Master
  If MasterX Between 10 and 99 Then 
  Set MasterX = Concat("lecturas.M0",MasterX);
  End If;

  set @a=concat("INSERT INTO ",MasterX, "(Id) Values(" ,Id, ")");
  PREPARE stmt1 FROM @a;
  EXECUTE stmt1; 
  DEALLOCATE PREPARE stmt1;

END 
```

但它总是向我抛出以下错误：

```
 Procedure execution failed
  1146 - Table 'lecturas.M' does not exist 
```

感谢大家的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:20:28.500

试试这个脚本 -

```
BEGIN
  SET @a = CONCAT('INSERT INTO lecturas.M', LPAD(MasterX, 3, 0), '(Id) Values(', Id, ')');
  PREPARE stmt1 FROM @a;
  EXECUTE stmt1; 
  DEALLOCATE PREPARE stmt1;
END 
```

# javascript - 如何使用 javascript 显示来自 MYSQL 数据库的文本

> ID：11082558
> 
> 赞同：0
> 
> 时间：2012-06-18T12:10:30.623
> 
> 标签：javascript, mysql, javascript-objects

如何从 MYSQL 键/值对中获取数据到 javascript 对象中。我使用 php、javascript 和 HTML5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:46:33.647

创建一个包含数据库摘录的 div，onClick，div 展开。QED。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:20:21.663

我认为您没有使用除 JS 和 MYSQL 之外的其他编程语言，并且您需要一种内部语言来交流它们。

Javascript 是一种客户端语言，而 SQL 是一种服务器语言，因此出于安全原因，您需要另一种编程语言来连接它们（如 PHP、RoR、Java 等），您能想象如果您的计算机是任何银行的数据库的登录名和密码？

如果你想学习一些其他的 PHP，你可以看看这里：[http](http://www.youtube.com/playlist?list=PLD1E8E67698E6A612) ://www.youtube.com/playlist?list=PLD1E8E67698E6A612或[http://php.net/manual/en/tutorial.php](http://php.net/manual/en/tutorial.php)

或者 RoR，你可以去 railscast.com。

# python - python unhashable type - 发布xml数据

> ID：11082560
> 
> 赞同：2
> 
> 时间：2012-06-18T12:10:41.130
> 
> 标签：python, typeerror, httplib

首先，我不是 python 程序员。我是一个老 C 狗，学习了新的 Java 和 PHP 技巧，但是 python 看起来是一门很酷的语言。

我遇到了一个我无法完全理解的错误。错误遵循以下代码。

```
import httplib, urllib
url = "pdb-services-beta.nipr.com"
xml = '<?xml version="1.0"?><!DOCTYPE SCB_Request SYSTEM "http://www.nipr.com/html/SCB_XML_Request.dtd"><SCB_Request Request_Type="Create_Report"><SCB_Login_Data CustomerID="someuser" Passwd="somepass" /><SCB_Create_Report_Request Title=""><Producer_List><NIPR_Num_List_XML><NIPR_Num NIPR_Num="8980608" /><NIPR_Num NIPR_Num="7597855" /><NIPR_Num NIPR_Num="10166016" /></NIPR_Num_List_XML></Producer_List></SCB_Create_Report_Request></SCB_Request>'

params = {}
params['xmldata'] = xml

headers = {}
headers['Content-type'] = 'text/xml'
headers['Accept'] = '*/*'
headers['Content-Length'] = "%d" % len(xml)

connection = httplib.HTTPSConnection(url)
connection.set_debuglevel(1)
connection.request("POST", "/pdb-xml-reports/scb_xmlclient.cgi", params, headers)

response = connection.getresponse()
print response.status, response.reason
data = response.read()
print data
connection.close 
```

这是错误：

```
回溯（最近一次通话最后）：   
 文件“C:\Python27\tutorial.py”，第 14 行，在 connection.request("POST", "/pdb-xml-reports/scb_xmlclient.cgi", params, headers)   
 文件“C:\Python27\lib\httplib.py”，第 958 行，在请求 self._send_request(method, url, body, headers)   
 _send_request self.endheaders(body) 中的文件“C:\Python27\lib\httplib.py”，第 992 行
 文件“C:\Python27\lib\httplib.py”，第 954 行，在 endheaders self._send_output(message_body)
 _send_output self.send(message_body) 中的文件“C:\Python27\lib\httplib.py”，第 818 行
 文件“C:\Python27\lib\httplib.py”，第 790 行，在发送 self.sock.sendall(data)
 文件“C:\Python27\lib\ssl.py”，第 229 行，在 sendall v = self.send(data[count:])
TypeError：不可散列的类型

```

我的日志文件显示 xmldata 参数为空。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:19:29.170

我猜params在传递给.request时必须是一个字符串，这可以解释错误，因为散列不可散列

尝试先编码你的参数

```
params = urllib.urlencode(params) 
```

您也可以在以下底部找到另一个代码示例：

[http://docs.python.org/release/3.1.5/library/http.client.html](http://docs.python.org/release/3.1.5/library/http.client.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:14:33.720

感谢您的反馈。

我想我太难了。我走了一条不同的路线，它似乎奏效了。

```
import urllib2
URL = "https://pdb-services-beta.nipr.com/pdb-xml-reports/scb_xmlclient.cgi"
DATA = 'xmldata=<?xml version="1.0"?><!DOCTYPE SCB_Request SYSTEM "http://www.nipr.com/html/SCB_XML_Request.dtd"><SCB_Request Request_Type="Create_Report"><SCB_Login_Data CustomerID="someuser" Passwd="somepass" /><SCB_Create_Report_Request Title=""><Producer_List><NIPR_Num_List_XML><NIPR_Num NIPR_Num="8980608" /></NIPR_Num_List_XML></Producer_List></SCB_Create_Report_Request></SCB_Request>'
req = urllib2.Request(url=URL, data=DATA)
f = urllib2.urlopen(req)
print f.read() 
```

# javascript - 页面的 Facebook 订阅按钮

> ID：11082562
> 
> 赞同：0
> 
> 时间：2012-06-18T12:10:44.657
> 
> 标签：javascript, facebook

是否可以为 Facebook 页面而不是用户个人资料实现[Facebook 订阅按钮？](http://developers.facebook.com/docs/reference/plugins/subscribe/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:20:20.120

~~是的。只需输入您页面的用户名，而不是一个人的用户名。~~

不，请改用[类似框](https://developers.facebook.com/docs/reference/plugins/like-box/)。

# django - django-object-permissions Vs django-guardian Vs django-authority

> ID：11082564
> 
> 赞同：37
> 
> 时间：2012-06-18T12:10:58.500
> 
> 标签：django, django-authentication, django-apps, django-permissions

我为 Django 1.2+ 找到了 3 个行级权限解决方案

*   [django 对象权限](http://pypi.python.org/pypi/django-object-permissions)
*   [django-监护人](https://github.com/lukaszb/django-guardian)
*   [django-权威](http://packages.python.org/django-authority/index.html)

有人可以告诉是否有比其他人更多的推荐，他们的主要区别是什么等？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-18T12:28:42.003

我将首先说我们没有将这些用于对象级权限 - 我们使用我们自己的自定义方法，我真的希望我们没有。如果您可以完全避免对象级别的权限，那么就这样做，它们很难组织起来。

这就是我评估您提到的 3 个应用程序的方式。

积极发展：

1.  django-guardian（1 周前）
2.  django-object-permissions (1 年前)
3.  django-authority（近 2 年前）

API

1.  django-guardian（保存已定义模型的实例）
2.  django-object-permissions（注册权限）
3.  django-authority（定义类）

顺便说一下，以上是按顺序排列的。

我建议仅在 API 上使用 Guardian，但事实上它仍在开发中，而其他人通常不是这样的，这意味着一个巨大的胜利。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-08-19T05:18:49.900

至于 13 年 8 月，django-object-permissions 已被[django-permission](https://github.com/lambdalisue/django-permission)取代。这3个项目正在积极开发中。

就个人而言，我更喜欢权限或权限，它使用检查权限的*方法*（运行时），而不是使用*数据库*来保持权限的 django-guardian（附加在对象创建时，fe）。

**- 编辑 -**

文档中的示例。

## django-监护人

```
joe = User.objects.create(username='joe')
task = Task.objects.create(summary='Some job', content='', reported_by=boss)
joe.has_perm('view_task', task)
>> False
assign_perm('view_task', joe, task)
joe.has_perm('view_task', task)
>> True 
```

您分配权限并将其保存在数据库中。

## django-权威

宣言：

```
class FlatpagePermission(permissions.BasePermission):
    label = 'flatpage_permission'
    checks = ('morning_flatpage_check',)

    def morning_flatpage_check(self, flatpage):
        hour = int(datetime.datetime.now().strftime("%H"))
        if hour >= 8 and hour <= 12 and flatpage.url == '/about/':
            return True
        return False

authority.register(Flatpage, FlatpagePermission) 
```

用法：

```
def my_view(request):
    check = FlatPagePermission(request.user)
    flatpage_object = Flatpage.objects.get(url='/homepage/')
    if check.morning_flatpage_check(flatpage=flatpage_object):
        print "Yay, you can change *this* flatpage!" 
```

它还包装了标准的 django 权限，但您可以在上面的自定义权限中看到 -AFAIK- 在监护人中无法做到的灵活性。

## 常见用例

学生可以属于教室。

**监护人**：

1.  当学生被分配到新教室时，将权限附加`'attend_classroom'`到学生超过教室对象。
2.  当学生从课堂中移除时，移除`'attend_classroom'`学生对课堂对象的权限。
3.  访问“课堂”时，请检查`'attend_classroom'`权限。

**权限**：

1.  定义自定义权限`ClassroomPermission.can_attend_classroom()`，将查询学生是否属于教室。
2.  访问“课堂”时，请检查`ClassroomPermission.can_attend_classroom()`

当局将检查逻辑保存在单独的文件中。Guardian 需要通过其余代码附加/分离权限。

# html - 显示白页的 Flotr 图表

> ID：11082567
> 
> 赞同：0
> 
> 时间：2012-06-18T12:11:02.590
> 
> 标签：html, graph, charts, flotr

我正在使用 Flotr 图表 javascript 库。当我从上面的链接创建 basic_axis 图表时，它向我展示了白页

[http://www.solutoire.com/experiments/flotr/examples/basic-axis.html](http://www.solutoire.com/experiments/flotr/examples/basic-axis.html)

听到的是示例代码，我是 flotr javascript 的新手。

```
http://jsfiddle.net/Navya/7WGkZ/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:44:14.523

这是您的示例：http: [//jsfiddle.net/7WGkZ/1/](http://jsfiddle.net/7WGkZ/1/)

你必须在“头”中添加这个：

```
<head>
... 
   <script type="text/javascript" src="https://raw.github.com/HumbleSoftware/Flotr2/master/flotr2.min.js"></script>
...
</head> 
```

# .net - 在 Linux 上运行时的 Mono System.Security.Cryptography.CryptographicException

> ID：11082571
> 
> 赞同：1
> 
> 时间：2012-06-18T12:11:21.597
> 
> 标签：.net, jboss, mono

我正在使用单声道 2.10.2 在 RHEL 5 上运行 .Net 应用程序。该应用程序有一个参考程序集 Dll，它对 JBoss 服务器进行 Web 服务调用。运行它时我得到**“System.Security.Cryptography.CryptographicException”**在 RHEL 中。我在 windows 上安装了单声道，它在那里运行良好。客户端应用程序使用 .p12 证书

我使用以下命令运行程序：

```
mono --debug --trace=N:MyApplication "Prod_Module/TestApp/bin/Debug/abc Prod Module Test.exe" 
```

我在运行它时得到以下跟踪：

> [0x40570940:] 异常处理：System.Security.Cryptography.CryptographicException：存储根不存在。[0x40570940:] 异常处理：System.Security.Cryptography.CryptographicException：存储根不存在。[0x42155940：]异常处理：System.Net.WebException：远程服务器返回错误：（500）内部服务器错误。[0x40fd8940:] 异常处理：System.Net.WebException：远程服务器返回错误：（500）内部服务器错误。[0x2b15fbbefb50:] 异常处理：System.ServiceModel.FaultException：解组错误：意外元素（uri：“http://ws.array.asi.abc.com/”，本地：“用户名”）。预期元素是 <{}username>,<{}password> [0x2b15fbbefb50:] 异常处理：System.ServiceModel.FaultException：解组错误：意外元素（uri：“http://ws.array.asi.abc.com/”，本地：“用户名”）。预期的元素是 <{}username>,<{}password> [0x2b15fbbefb50:] 异常处理：System.ServiceModel.FaultException: Unmarshalling Error: unexpected element (uri:"http://ws.array.asi.abc.com/ "，本地："用户名")。预期的元素是 <{}username>,<{}password> [0x2b15fbbefb50:] 异常处理：System.ServiceModel.FaultException: Unmarshalling Error: unexpected element (uri:"http://ws.array.asi.abc.com/ "，本地："用户名")。预期元素是 <{}username>,<{}password> [0x2b15fbbefb50:] 异常处理：abc.Prod.Module.Exception_Model.ModulePluginException: Unmarshalling Error: unexpected element (uri:"http://ws.array.asi. abc.com/", 本地：“用户名”）。预期元素是 <{}username>,<{}password> 解组错误：意外元素（uri:"http://ws.array.asi.abc.com/", local:"username"）。预期元素是 <{}username>、<{}password>
> 
> JBoss(v7.1) 服务器日志具有以下内容：
> 
> 01:26:09,038 警告 [org.apache.cxf.phase.PhaseInterceptorChain] (http--0.0.0.0-3506-1) {http://ws.array.asi.abc.com/}ArrayWSAPIImplService#{ 的拦截器http://ws.array.asi.abc.com/}登录已经抛出异常，现在展开：org.apache.cxf.interceptor.Fault: Unmarshalling Error: unexpected element (uri:"http://ws.array. asi.abc.com/”，本地：“用户名”）。预期元素是 org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshall(JAXBEncoderDecoder.java: org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshall(JAXBEncoderDecoder.java:801) 中的 <{}username>、<{}password>第642章. jar:] 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:] 在 org.apache.tomcat.util.net.JIoEndpoint$Worker .run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:] at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_27] 原因：javax。 xml.bind.UnmarshalException - 带有链接异常：[javax.xml.bind.UnmarshalException：意外元素（uri：“http://ws.array.asi.abc.com/”，本地：“用户名”）。预期的元素是 com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.handleStreamException(UnmarshallerImpl.java:434) 上 com.sun.xml.bind.v2 上的 <{}username>,<{}password>] .runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:371) 在 com.sun.xml.bind.v2.runtime.unmarshaller。UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:348) at org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshall(JAXBEncoderDecoder.java:778) ... 29 更多原因：javax.xml.bind.UnmarshalException：意外元素（uri： “http://ws.array.asi.abc.com/”，本地：“用户名”）。预期元素是 com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:662) 上 com.sun.xml.bind.v2 上的 <{}username>、<{}password>。 runtime.unmarshaller.Loader.reportError(Loader.java:258) 在 com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:253) 在 com.sun.xml.bind.v2。 runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:120) 在 com.sun.xml.bind.v2.runtime.unmarshaller.Loader.childElement(Loader.java:105) 在 com.sun.xml。bind.v2.runtime.unmarshaller.StructureLoader.childElement(StructureLoader.java:251) 在 com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:498) 在 com.sun.xml。 bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:480) 在 com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.handleStartElement(StAXStreamConnector.java:247) 在 com.sun.xml。 bind.v2.runtime.unmarshaller.StAXStreamConnector.bridge(StAXStreamConnector.java:181) at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:369) ... 31 更多：javax.xml.bind.UnmarshalException：意外元素（uri：“http://ws.array.asi.abc.com/”，本地：“用户名”）。预期的元素是 <{}username>,<

它与客户端证书有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:32:44.670

[如Mono Security FAQ](http://www.mono-project.com/FAQ%3a_Security#Secure_Socket_Layer_.28SSL.29_.2F_Transport_Layer_Security_.28TLS.29)所述，您需要自己导入证书。

# c++ - 异常多态 C++

> ID：11082574
> 
> 赞同：1
> 
> 时间：2012-06-18T12:11:26.177
> 
> 标签：c++, exception, inheritance

我已经创建了自己的异常类，它派生自`runtime_error`c'tor 并在 c'tor 中得到一个 int。

我想为这个异常创建一个基类，以便使用多态性，所以我只能捕获基类，基本上我会捕获派生类。

所以，这是基类：（在另一个 cpp 文件中，我得到了 baseException::~baseException(){}）

```
class baseException
{
    virtual ~baseException()=0 {}
}; 
```

这是派生类：

```
class myException: public runtime_error, public baseException
{
public:
    myException(int): runtime_error("Error occured") {}
}; 
```

请注意，我在基类中没有任何实际错误，它的唯一作用是使我能够在我将制作的未来自定义异常类上实现多态性。这就是为什么它只有一个纯粹的虚拟 d'tor。我不需要此类的任何“实际”对象`BaseException`。

但是，当我尝试在 main 中捕获 baseException 并调用 what() 时，我做不到。我如何使它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T12:21:53.100

第一个问题是你缺少析构函数声明中的 ，并且类名后面`()`有一个流氓。`:`

解决此问题后，您可能会收到如下错误：

```
error: pure-specifier on function-definition 
```

由于某些只有 C++ 标准委员会知道的原因，纯虚函数不能像这样在类定义中实现。如果您希望它是纯虚拟的，那么您需要将定义移到类之外：

```
class baseException
{
    virtual ~baseException()=0;
};

inline baseException::~baseException() {} 
```

您还需要决定是从还是`myException`派生：在类头中使用一个，在构造函数的初始化程序列表中使用另一个。假设您使用的是标准异常类型，它可能应该通过（并且，如果您的头文件中有 a ，那么您应该删除它以避免破坏不希望全局命名空间被这样污染的代码）。`runtime_exception``runtime_error``std::runtime_error``using namespace std;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:21:35.630

如前所述，您的析构函数需要括号和非内联定义。

此外，您从`runtime_exception`（来自 AMP 库？）派生，但调用`runtime_error`（来自`std`我假设的命名空间）的构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:16:49.147

你忘了括号。它应该是

```
virtual ~baseException()=0 {} 
```

# date - 使用 sed 转换日期格式

> ID：11082577
> 
> 赞同：0
> 
> 时间：2012-06-18T12:11:34.717
> 
> 标签：date, sed, format

我有一个问题，如何使用 sed 将日期从“2012 年 6 月 14 日下午 5:00”转换为“2012-06-14”？因此也省略了“下午 5:00”。我正在尝试类似的东西，`s/(...)(\d\d)(\d\d\d\d)/$2.$1.$3/`但无法做到。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:30:21.860

你真的不需要 sed 来做 - 你需要日期：

```
$ date --date='Jun 14 2012 5:00PM' '+%Y-%m-%d'
2012-06-14 
```

在此命令中，我要求 date 将日期转换`'Jun 14 2012 5:00PM'`为由四位数年份 ( `%Y`) 后跟连字符和两位数月份 ( `%m`) 后跟另一个连字符和两位数日期 ( `%d`) 组成的格式。

现在，关于您的 sed 命令的一些说明：

Sed 使用特定的、有些受限的正则表达式语法。区别之一是括号组之前应该有反斜杠以进行有效分组。如果没有反斜杠，则括号被视为文字括号字符。我知道，这与其他语言中的正则表达式完全相反，但这就是它的工作方式。所以，而不是

```
s/(...)(\d\d)(\d\d\d\d)/$2.$1.$3/ 
```

你应该有

```
s/\(...\)\(\d\d\)\(\d\d\d\d\)/$2.$1.$3/ 
```

此外，sed 中没有`\d`通配符。相反，您应该使用`[[:digit:]]`：

```
s/\(...\)\([[:digit:]][[:digit:]]\)\([[:digit:]][[:digit:]][[:digit:]][[:digit:]]\)/$2.$1.$3/ 
```

或者，更好的是：

```
s/\(...\)\([[:digit:]]\{2\}\)\([[:digit:]]\{4\}\)/$2.$1.$3/ 
```

最后但并非最不重要的一点是，对匹配组的引用不是用 标记`$`，而是用反斜杠标记：

```
 s/\(...\)\([[:digit:]]\{2\}\)\([[:digit:]]\{4\}\)/\2.\1.\3/ 
```

（哦，呃，好吧，你也可以[在 GNU sed 中使用扩展的正则表达式](http://www.gnu.org/software/sed/manual/sed.html#Extended-regexps)，但是有什么好玩的呢？）

无论如何，这也与您的日期不匹配 - 我刚刚提到了语法错误，也存在一些语义错误（例如，您的日期由正则表达式中不存在的空格分隔）。尽管如此，这没有问题，因为 date 可以做得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:51:45.840

这可能对您有用：

```
echo "Jun 14 2012 5:00PM" |
sed 's/$/Jan01Feb02Mar03Apr04May05Jun06Jul07Aug08Sep09Oct10Nov11Dec12/;s/\(...\) \(..\) \(....\).*\1\(..\).*/\3-\2-\4/'
2012-14-06 
```

使用反向引用添加查找和匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T05:30:48.410

你可以试试这样的 -

```
echo "Jun 21 2011 5:00PM" | 
awk '{"date \"+%Y/%m/%d\" -d \""$1" "$2" "$3" \"" | getline var; print var}' 
```

### 测试：

```
$ echo "Jun 21 2011 5:00PM" | 
awk '{"gdate \"+%Y/%m/%d\" -d \""$1" "$2" "$3" \"" | getline var; print var}'
2011/06/21
$ 
```

# sql-server - dbo.Split 在特定数据库中不起作用

> ID：11082589
> 
> 赞同：-3
> 
> 时间：2012-06-18T12:12:11.550
> 
> 标签：sql-server

在我的情况`dbo.Split`下不在特定数据库中工作

前任：

```
Declare @ID varchar(100)
SET @ID='1,2,3,4,5'
SELECT Value FROM dbo.Split(@ID,',') 
```

.....正在某些数据库中工作，但在某些数据库中出现错误：

> 无效的对象名称“dbo.Split”。为什么这样 ？

谁能告诉我解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:13:34.677

该`dbo.Split`函数可能只存在于一个数据库中。您可以复制它，或通过三部分名称引用它：

```
select * from OtherDB.dbo.Split(@ID, '.') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:40:08.630

检查`Split`您的数据库中是否存在名为的函数。

该函数应该存在于它正在工作的数据库中。

# javascript - 使网页上的文本可拖动

> ID：11082591
> 
> 赞同：0
> 
> 时间：2012-06-18T12:12:20.850
> 
> 标签：javascript, jquery, html

这是我想要做的。

1.  用户从页面中选择文本
2.  突出显示的文本现在应该是可拖动的
3.  文本现在被放入可放置的
4.  这将文本提醒我们。

这是我用来检测选定文本的代码。

```
if (!window.x) {
    x = {};
}
x.Selector = {};
x.Selector.getSelected = function() {
    var t = '';
    if (window.getSelection) {
        t = window.getSelection();
    } else if (document.getSelection) {
        t = document.getSelection();
    } else if (document.selection) {
        t = document.selection.createRange().text;
    }
    return t;
}

$(function() {
    $(document).bind("mouseup", function() {
        var mytext = x.Selector.getSelected();
        alert(mytext);
}); 
```

直到这里一切正常，我当时尝试这样做。

```
$(function() {
    $(document).bind("mouseup", function() {
        var mytext = x.Selector.getSelected();
    alert(mytext);
    var item=$(mytext);
    $(item).draggable({
            start:function(event,ui){$( "#draggable" ).draggable( "option", "revert", true );},
        stop:function(event,ui){$( "#draggable" ).draggable( "option", "revert", true );}

    });

    $("#droppable").droppable({
        accept: item ,
        drop: function() { alert($('#draggable').text()); }
    });    
}); 
```

如何将文本转换为可拖动的，请帮助，任何新的方法都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:27:11.397

有趣的..

```
var item=$(mytext); 
```

您不能选择文本作为 DOM 元素。您应该将其添加到新创建的元素中，例如`<p>`

`$("<p>"+mytext+</p>").appendTo("body").dragable({...}).`

# c++ - 使用 win32 api 向富编辑控件添加格式

> ID：11082592
> 
> 赞同：1
> 
> 时间：2012-06-18T12:12:22.487
> 
> 标签：c++, winapi, rtf

我正在创建一个富编辑文本框，如下所示：

```
const char *testText = "Hello \\bworld!";

LoadLibrary("riched20.dll");  

hwndoutbox = CreateWindowEx(
    ES_SUNKEN,
    RICHEDIT_CLASS,
    testText,
        WS_BORDER | WS_VISIBLE | WS_CHILD,
        0, 40, 300, 300,
        hwnd, 0, hInstance, NULL); 
```

预期结果是以粗体显示“Hello World”和“World”。我究竟做错了什么？

*我有预感 \b 可能是某些东西的转义码，但我找不到太多信息来支持它*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:38:48.320

你需要去看看[RTF](http://msdn.microsoft.com/en-us/library/aa140301%28v=office.10%29.aspx)的规范。首先，RTF 数据有一个标题，而您没有包括它。

事实上，维基百科的 RTF 页面（[此处](http://en.wikipedia.org/wiki/Rich_Text_Format)）可能是您开始的好地方。它包括以下示例文本：

```
{\rtf1\ansi{\fonttbl\f0\fswiss Helvetica;}\f0\pard
This is some {\b bold} text.\par
} 
```

...这是一个带有粗体字的字符串。

“富编辑控件”是设计用于呈现 RTF 的控件。

# objective-c - iOS 将设备操作与时钟同步

> ID：11082601
> 
> 赞同：2
> 
> 时间：2012-06-18T12:12:57.863
> 
> 标签：objective-c, ios, sync, clock, gamekit

我正在尝试同步两个 iOS 设备，以便它们可以同时开始操作。这些的真正应用将是两个设备同时拍照或同时开始录制视频。我实际上是在使用 gamekit 使设备通过蓝牙进行通信，但我不确定我能在多大程度上依赖设备的时钟。还有一件事，有人知道蓝牙传输的最大延迟吗？任何人都有同步两个设备的协议或方法？

# python - 在 Cython 中使用 regex.h C 库

> ID：11082604
> 
> 赞同：3
> 
> 时间：2012-06-18T12:13:01.363
> 
> 标签：python, regex, external, cython

我想在我的 Cython 代码中使用 regex.h 库，因为内置的 re 模块似乎很慢，但我在做这件事时遇到了很多麻烦。我知道我必须创建一个 .pxd 文件并将其用作我的代码中的外部模块，但我真的是 Python/Cython 的新手。

**这是我的 regex.pxd 文件：**

```
cdef extern from *:
    ctypedef char const_char "const char"

cdef extern from "regex.h" nogil:
    int regcomp(regex_t* PREG, const char* REGEX, int CFLAGS)
    int regexec(const regex_t *PREG, const char *STRING, size_t NMATCH, regmatch_t   PMATCH[], int EFLAGS) 
```

我正在运行命令：`$python setup.py build_ext --inplace`

**做完之后我收到了这个错误**：

```
regex.pxd:6:27: Expected ')', found '*' 
```

您对如何在代码中使用该`regex.h`库有任何其他想法吗？`Cython`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-14T06:51:12.523

升级到 Cython 0.18 或更高版本。（注意：该问题是在发布之前提出的）

该版本的相关[发行说明](https://github.com/cython/cython/wiki/ReleaseNotes-0.18)`const`是“该语言支持C声明”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:05:37.263

从以前的经验来看，我认为说明`const`符正在扰乱它。来自 Cython docs on [interface with external C code](http://docs.cython.org/src/userguide/external_C_code.html)，在*引用 C 头文件*下：

> 不要使用常量。Cython 对 const 一无所知，因此请忽略它。大多数情况下这不会造成任何问题，尽管在极少数情况下您可能不得不使用演员表。

我将您的代码复制到我机器上的 .pxd 文件中，Cython 给出了同样的错误。删除这些`const`位消除了该错误。

# php - PHP 包括在 EasyPHP 下的开发中正常工作，但在上传到主机时不能正常工作

> ID：11082605
> 
> 赞同：0
> 
> 时间：2012-06-18T12:13:04.163
> 
> 标签：php, html

我使用 PHP Includes 构建了一个非常简单的网站来显示页脚和侧边栏，当我在计算机上并使用 EasyPHP 查看它们时，这些 PHP 包括工作，但是当我上传网站并查看它时，我得到以下信息页面显示错误：

```
Warning: include() [function.include]: open_basedir restriction in effect.
File(/usr/local/apache/htdocs/includes/sidebar.php) is not within the allowed path(s):
(/home/:/usr/lib/php:/tmp) in /home/a5562725/public_html/index.php on line 26 
```

[这是网站，](http://marcuslywood.co.uk)在 000webhost 上免费托管。

这是 index.php 上包含的示例，用于在我的“包含”文件夹中显示侧边栏：

```
 <?php include $_SERVER['DOCUMENT_ROOT'] . "/includes/sidebar.php"; ?> 
```

我使用 DOCUMENT_ROOT 而不是普通的包含，因为某些页面嵌入在更深的目录中，并且包含将成为死链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:34:25.073

我猜，因为它将是共享主机，它可能被设置为你的 webroot ......

所以简单地包括使用：

```
<?php include "/includes/sidebar.php"; ?> 
```

扩展一下... 出于安全原因，托管服务提供商通常会设置 open_basedir (http://www.php.net/manual/en/ini.core.php#ini.open-basedir)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:45:16.827

这总是会发生，只要我提出问题，我就会找到解决方案！

是的，问题似乎与共享主机有关，我必须指向主机的主根目录才能使其工作，对于 000webhost 用户，您可以在控制面板的右侧找到它。

我的包含现在看起来像这样：

```
<?php include('/home/a********/public_html/includes/sidebar.php'); ?> 
```

*s 是您的主根目录。

# c# - 在 MVC3 中使用 Get 方法提交表单？

> ID：11082609
> 
> 赞同：2
> 
> 时间：2012-06-18T12:13:10.840
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我有以下表格：

```
@model Teesa.Models.SearchModel
@using (Html.BeginForm("Index", "Search", FormMethod.Get, new { id = "SearchForm" }))
{
    <div class="top-menu-search-buttons-div">
        @if (!MvcHtmlString.IsNullOrEmpty(Html.ValidationMessageFor(m => m.SearchText)))
        {
            <style type="text/css">
                .top-menu-search-text
                {
                    border: solid 1px red;
                }
            </style>
        }
        @Html.TextBoxFor(q => q.SearchText, new { @class = "top-menu-search-text", id = "SearchText", name = "SearchText" })
        @Html.HiddenFor(q=>q.Page)
        <input type="submit" value="search" class="top-menu-search-submit-button" />
    </div>
    <div id="top-menu-search-info" class="top-menu-search-info-div">
        Please Select one :
        <hr style="background-color: #ccc; height: 1px;" />
        <div class="top-menu-search-info-checkbox-div">
            @Html.CheckBoxFor(q => q.SearchInBooks, new { id = "SearchInBooks", name = "SearchInBooks" })
            <label for="SearchInBooks">Books</label>
        </div>
        <div class="top-menu-search-info-checkbox-div">
            @Html.CheckBoxFor(q => q.SearchInAuthors, new { id = "SearchInAuthors" })
            <label for="SearchInAuthors">Authors</label>
        </div>
        <div class="top-menu-search-info-checkbox-div">
            @Html.CheckBoxFor(q => q.SearchInTags, new { id = "SearchInTags" })
            <label for="SearchInTags">Tags</label>
        </div>
} 
```

以及以下控制器和模型：

```
namespace Teesa.Models
{
    public class SearchModel
    {
        [Required(ErrorMessage = "*")]
        public string SearchText { get; set; }
        public bool SearchInTags { get; set; }
        public bool SearchInAuthors { get; set; }
        public bool SearchInBooks { get; set; }
        public int Page { get; set; }
        public List<SearchBookModel> Result { get; set; }
        public List<SimilarBookModel> LatestBooks { get; set; }
    }

    public class SearchBookModel
    {
        public int Id { get; set; }
        public string Title { get; set; }
        public string Author { get; set; }
        public string Summary { get; set; }
        public List<Tags> Tags { get; set; }
        public string StatusName { get; set; }
        public string SubjectName { get; set; }
        public string ThumbnailImagePath { get; set; }
        public string BookRate { get; set; }
        public string RegistrationDate { get; set; }
        public int NumberOfVisit { get; set; }
    }
}

[HttpGet]
public ActionResult Index(SearchModel model)
{
    FillSearchModel(model);
    if (ModelState.IsValid)
    {
            string page = model.Page;
        DatabaseInteract databaseInteract = new DatabaseInteract();
        model.Result = new List<SearchBookModel>();
        List<Book> allBooks = databaseInteract.GetAllBooks();
        List<Book> result = new List<Book>();
        #region 
        if (model.SearchInTags)
        {
            var temp = (from item in allBooks
                        from tagItem in item.Tags
                        where tagItem.Name.Contains(model.SearchText)
                        select item).ToList();
            result.AddRange(temp);
        }
        if (model.SearchInBooks)
        {
            var temp = (from item in allBooks
                        where item.عنوان.Contains(model.SearchText)
                        select item).ToList();
            result.AddRange(temp);
        }
        if (model.SearchInAuthors)
        {
            var temp = (from item in allBooks
                        where item.Author.Contains(model.SearchText)
                        select item).ToList();
            result.AddRange(temp);
        }
        #endregion
        #region Paging
        string itemsPerPage = databaseInteract.GetItemsPerPage();
        int ItemInPage = int.Parse(itemsPerPage);
        var pagingParams = Helpers.SetPagerParameters(page, ItemInPage, result);
        ViewBag.AllPagesCount = pagingParams.AllPagesCount;
        ViewBag.CurrentPageNumber = pagingParams.CurrentPageNumber;
        ViewBag.CountOfAllItems = pagingParams.CountOfAllItems.ToMoneyFormat().ToPersianNumber();
        result = pagingParams.ListData as List<Book> ?? result;
        #endregion
        foreach (var item in result)
        {
            var bookRate = (item.BookRate == null || item.BookRate.Count == 0)
                               ? 0.0
                               : item.BookRate.Average(q => q.Rate);
            model.Result.Add(new SearchBookModel
            {
                Author = item.Author,
                Id = item.Id,
                .
                .
                .
            });
        }
    }
    else
    {
        model.Result = new List<SearchBookModel>();
    }
    return View(model);
} 
```

当我提交表单时，我看到以下查询字符串（注意重复名称）：

```
http://localhost:2817/Search?SearchText=book&Page=2&SearchInBooks=true&SearchInBooks=false&SearchInAuthors=true&SearchInAuthors=false&SearchInTags=true&SearchInTags=false 
```

但它必须是这样的：

```
http://localhost:2817/Search?SearchText=book&Page=2&SearchInBooks=true&SearchInAuthors=true&SearchInTags=true 
```

我该如何解决？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:23:54.597

`Html.Checkbox`（以及相关`For...`方法）为 false 生成隐藏输入，为 true 生成复选框。这是为了确保模型绑定在绑定时始终如一地工作。

如果您必须摆脱隐藏输入产生的“错误”项目，您需要自己构建复选框输入（使用 HTML 而不是帮助程序）。

```
<input type="checkbox" id="SearchInBooks" name="SearchInBooks"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:23:56.950

为什么不创建一个与 Get 方法名称匹配的 Post 方法。这将确保代码更容易调试。因为你不会有一个巨大的功能来尝试找到这样的问题。

我找不到您从哪里获取重复的 url 查询字符串。

这也将允许您将结果绑定回模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T12:41:14.753

如果您希望模型绑定成功发生，那么您必须采用这种方式，因为这也是`Html.CheckBox/Html.CheckBoxFor`它们将呈现隐藏字段的方法的本质。

我建议宁愿使用 POST 来让你的生活更轻松。如果您仍想使用 GET，那么您必须直接使用复选框元素，但您必须处理模型绑定问题。当复选框被选中时，并非所有浏览器都返回“true”。firefox 传递“on”，因此默认模型绑定器会引发错误。

其他替代选项是您可以使用自定义模型绑定器，或者您可以通过侦听提交事件来使用 jquery 提交表单。

# sql-server - 已经有一个打开的 DataReader

> ID：11082611
> 
> 赞同：0
> 
> 时间：2012-06-18T12:13:14.750
> 
> 标签：sql-server, entity-framework

我的cshtml中有一些代码：

```
@model IEnumerable<Floor>
@{
    var floors = Model
} 
```

我在这一行有错误：

@foreach（在 floor_l.ShopFloors 中的 var shopfloor）

我可以在模型分配后使用 .ToList() 来解决问题。

错误的原因可能是什么？谁遇到过？

此错误偶尔出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:18:52.400

每个数据库连接一次只能支持一个数据读取器。您的`Model`和`foor_l`使用相同的连接，因此您只能同时读取其中一个。

添加`.ToList()`会将数据读取器中的所有记录读取到列表中，然后关闭数据读取器。这样就可以让下一个数据读取器免费使用该连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-13T18:04:36.340

小心延迟加载。如果启用了该功能，例如，如果您在循环中执行某些操作，则最终可能会出现此错误。

解决此问题的一种方法，如果您不想关闭延迟加载（并且必须记住在需要时重新打开它）是使用急切加载，您可以通过将`Include()`语句添加到您的询问。例如，如果您有一个名为的实体和对 a 上的实体`Contact`集合的引用，并且您想要获取您正在查询的实体，请在您的 LINQ 查询中使用它`Address``Contact``Addresses``Contacts`

```
.Include("Addresses") 
```

这将为通过生成的查询加载的`Addresses`每个加载。`Contact`谨慎使用`Include()`您想要使用急切加载的每个查询，因为可能会影响性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:58:42.250

`"MultipleActiveResultSets=True"`在连接字符串中

# jquery - 无法从 JSONP 中提取数据

> ID：11082614
> 
> 赞同：0
> 
> 时间：2012-06-18T12:13:18.837
> 
> 标签：jquery, jsonp

如果以下工作：

`alert( data.query.results.tbody[1].tr[0].td[0].span.img.src );`

为什么这不起作用？

```
var image = data.query.results.tbody[1].tr;
alert( image[0].td[0].span.img.scr ); 
```

第二个警报给了我：

`Undefined`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:15:10.940

将拼写修复`scr`为`src`:-)

```
alert( image[0].td[0].span.img.src ); 
```

# php - PHP中的正则表达式不起作用

> ID：11082621
> 
> 赞同：0
> 
> 时间：2012-06-18T12:13:49.137
> 
> 标签：php, regex

```
 $subject= "Citation flow <img src='/static/images/icons/help.png'>
                                </span>
                            </p>
                            <p style='font-size: 150%;'><b>11</b></p>";
           $pattern="/Citation flow[.]+<b>([0-9]+)<\/b>/i";

          preg_match_all($pattern, $subject,$matches,PREG_PATTERN_ORDER);

          print_r($matches); 
```

我想在粗体标签中捕获数字 11.. 但我的正则表达式不起作用.. 为什么？

更新：

我想出了这个..但我不是 100% 这是最好的解决方案：

```
$pattern="/Citation flow[\s\S]*<b>([0-9]+)<\/b>/i"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:15:26.260

好吧，它不能匹配，因为`Citation flow`它后面有一个空格，而不是任意数量的点。你可能是说

```
(?si)Citation flow.+<b>(\d+)</b> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:20:41.480

你不想

```
$pattern="/Citation flow[.]+<b>([0-9]+)<\/b>/si"; 
```

# android - Windows 8 安卓 USB 驱动程序

> ID：11082622
> 
> 赞同：6
> 
> 时间：2012-06-18T12:13:52.073
> 
> 标签：android, windows-8

我已经安装了 Windows 8 发布预览版，但我无法安装 android USB 驱动程序，它说：

![截屏](../Images/be91282f51187b189edd453f21208f68.png)

和

“第三方INF不包含数字签名信息”

该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:54:56.520

在 Win8 上禁用设备签名确认并按照此处的指南进行操作。www.androidsim.net/2009/08/how-to-1-how-to-install-usb-driver-on.html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:55:17.420

不久前我有同样的问题。看到 USB 驱动程序从那以后没有更新，简单（并且可能不令人满意）的答案是恢复到 Windows 7。我已经看到了一些 setchy 驱动程序，但不适用于您的设备。

Windows 8 仍处于预览/开发阶段，我怀疑在它接近发布之前我们会看到合适的驱动程序。请继续检查 SDK 管理器，并在 USB 驱动程序有更新时重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-09T11:39:12.873

禁用驱动程序签名 以管理员身份运行命令提示符 粘贴并运行以下命令： bcdedit -set loadoptions DISABLE_INTEGRITY_CHECKS bcdedit -set TESTSIGNING ON

或：Win+c => 参数 => Shift + 重启，然后像下面的链接... [http://windows.microsoft.com/en-us/windows-8/windows-startup-settings-include-safe-模式](http://windows.microsoft.com/en-us/windows-8/windows-startup-settings-including-safe-mode)

[http://www.fotoclubinc.com/blog/how-to-disable-driver-signature-enforcement-to-allow-installation-of-windows-7-printer-drivers-on-windows-8/](http://www.fotoclubinc.com/blog/how-to-disable-driver-signature-enforcement-to-allow-installation-of-windows-7-printer-drivers-on-windows-8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-20T10:47:29.777

我遇到了一些问题，这就是我解决它的方法。

在 Windows 8 上，按住键盘上的**任何 SHIFT**并单击PC 或笔记本电脑**右上角的****设置**，然后会出现设置的菜单栏，然后​​单击**电源**，**然后**单击重新启动

 ******您将看到**选择一个选项**，然后选择**疑难解答** 下的疑难解答选择**高级选项**，然后在**高级选项**下选择**启动设置**，**然后单击重新启动**，**然后按 7**。在您的 PC 或笔记本电脑重新启动后，您**将能够安装 Android ADB 驱动程序**或任何驱动程序

我希望这对你也有帮助

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-07-21T19:02:40.163

BLU VIVO AIR 也有同样的问题。我在博客上写了关于让通用的谷歌 USB 驱动程序逐步安装在这里，没有有趣的链接或广告 - [http://www.devfish.net/post/2015/07/20/android-usb-adb-drivers-for -blu-phones-vivo-air.aspx](http://www.devfish.net/post/2015/07/20/android-usb-adb-drivers-for-blu-phones-vivo-air.aspx)。视窗 8.1 ....

使用 USB 数据线连接 Windows PC 和您的手机。
打开设备管理器。您会看到 BLU VIVO AIR 在“其他设备”中显示为不可用。

[从http://developer.android.com/sdk/win-usb.html#top](http://developer.android.com/sdk/win-usb.html#top)下载并安装 Google 通用 USB 驱动程序 。记下并记住您安装谷歌驱动程序的位置。

鼠标右键 BLU VIVO AIR，选择更新驱动软件...</p>

选择“浏览计算机上的驱动程序软件”

导航到您安装 Google USB 驱动程序软件的位置

选择“让我从计算机上的设备驱动程序列表中选择”

选择“显示所有设备”

选择“从磁盘安装”

导航到您安装 Google USB 驱动程序的位置，选择 android_winusb.inf 文件

在更新驱动程序软件 - VIVO AIR 对话框中选择“Android ADB 接口”

忽略“更新驱动程序警告”消息。

您现在将在设备管理器中看到 Android 设备 -> Android ADB 接口，并且 VIVO AIR 将从“其他设备”中消失。您现在还应该能够在手机上打开 USB/大容量存储模式等功能，以便您可以从 Windows 资源管理器查看文件以及调试设备。******

# wpf - 何时释放 UserControl 事件处理程序？

> ID：11082628
> 
> 赞同：3
> 
> 时间：2012-06-18T12:14:12.417
> 
> 标签：wpf, events, user-controls, dispose

如果我在后面的代码中在 UserControl 上注册事件。例如：

```
public partial class PositionView : UserControl
{
    // If required ViewModel can be accessed using DataContext 
    public PositionViewModel ViewModel 
    {
        get { return (PositionViewModel) this.DataContext; }
    }

    public PositionView()
    {
        InitializeComponent();

        this.DataContextChanged += new System.Windows.DependencyPropertyChangedEventHandler(PositionView_DataContextChanged);
    }

    void PositionView_DataContextChanged(object sender, System.Windows.DependencyPropertyChangedEventArgs e)
    {
        this.ViewModel.UpdateTotalsChanged.Subscribe(_ => this.PositionGridControl.UpdateTotalSummary());
    }       
} 
```

我应该什么时候处理事件处理程序？没有 IDisposable 可挂接？

如果我通过 xaml 绑定到事件，这在生命周期管理方面会是一个更清洁的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:20:18.110

的来源`Event`以及`EventHandler`都是本地的。因此，它们将在收集`UserControl`自身时被收集。

当`UserControl`收集到时，将没有其他对象使您的 eventHandler 保持活动状态。因此，您无需手动实施“生命周期管理”。

# javascript - 结合颜色的奇怪结果

> ID：11082630
> 
> 赞同：1
> 
> 时间：2012-06-18T12:14:21.813
> 
> 标签：javascript, algorithm, blur

我目前正在研究 javascript 中的水平模糊算法，尽管我怀疑语言是否重要。

我从画布中获取数据，该画布基本上是一个巨大的数组，其中每四个（RGBA）值代表一个像素。一个值可以包含一个范围从 0 到 255 的 int。

当我模糊图像时，两种不同颜色之间的区域会变成奇怪的颜色！我在黑色背景上绘制了一个红色矩形。使用下面的算法，我得到以下结果（4px 大小）：

![4px 不良结果](../Images/0d88ab03486a99564eaac0c0ba8bdc02.png)

虽然当使用 1 或 2 像素大小时，一切似乎都正常工作。

![2px 想要的结果](../Images/58e5c77c395c2358e1196cf4df9ef26c.png)

请注意，这有点混乱。我打算让这一切都面向对象！

```
// s: size
// w: width
// h: height
function blur( s, w, h ) {
    var src = ctx.getImageData( 0, 0, w, h ); // get imagedata from source
    var dst = ctx.createImageData( w, h );    // create imagedata for dest
    var x, y, xo, index, rgb; // predefine vars

    // loop through y axis
    for( y = 0; y < h; y++ ) {
        // loop through x axis
        for( x = 0; x < w; x++ ) {
            rgb = 0; // set total to 0

            // loop through area around current pixel
            for( xo = 0 - s; xo <= s; xo++ ) {
                // get specific index
                index = getIndex( x + xo, y, w );

                // add nothing if the value doesn't exist (borders)
                // if( isNaN( src.data[index] ) ) continue;
                if( typeof src.data[index] === 'undefined' ) continue;

                // add the values to total
                rgb += ( src.data[index] << 16 ) + ( src.data[index + 1] << 8 ) + src.data[index + 2];
            }

            // get the average of all pixels in that area
            rgb = rgb / ( s * 2 + 1);

            // get index of current pixel
            index = getIndex( x, y, w );

            // set pixel in dest
            dst.data[index] = ( rgb & 0xff0000 ) >> 16;    // red
            dst.data[index + 1] = ( rgb & 0x00ff00 ) >> 8; // green
            dst.data[index + 2] = ( rgb & 0x0000ff );      // blue
            dst.data[index + 3] = 255; // alpha
        }
    }

    // add the new image data
    ctx.putImageData( dst, 0, 0 );
}

function getIndex( x, y, w ) {
    // calculate the appropriate index, since every pixel has 4 array values
    return ( y * ( w * 4 ) + ( x * 4 ) );
} 
```

那么**我的算法有什么问题？**我有点失落。请注意，我不是在寻找用于画布模糊的现有对象/库/文件。我喜欢重新发明一切来教育自己。

* * *

编辑：我还想补充一点，我得到的值确实是代表画布上显示的颜色的值。这意味着这绝对是我算法中的错误计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:34:08.253

`0x030000`（深红色）和（黑色）之间的平均值`0x000000`变为`0x018000`，得到很多绿色（0x80） 您应该分别平均通道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T12:31:56.103

您应该分别平均您的频道。除以打包的三通道值不太可能将每个通道保持在其字节内。

# scala - 如何编写一个可以通过两个特征扩展两个字段的类？

> ID：11082631
> 
> 赞同：2
> 
> 时间：2012-06-18T12:14:23.903
> 
> 标签：scala, traits

我想要一个 B 类，它可以通过两个特征 A_1 和 A_2 用两个字段扩展。重要的是，B 类本身没有这两个字段，因为 B 类也应该能够在没有这些字段的情况下使用。

我的第一个想法：

```
trait A_1 { val x: Int }
trait A_2 { val y: Int }
class B 
```

但`new B with A_1 with A_2`不起作用，因为`x`and`y`是抽象成员，需要在 B 类中定义。

我的第二个想法：

```
trait A_1 { var x: Int = _}
trait A_2 { var y: Int = _}
class B 
```

然后可以在创建 B 的对象后设置字段：

```
val b = new B with A_1 with A_2
b.x = 1
b.y = 2 
```

这可行，但有点难看，因为必须在之后设置值。这种结构也使类可变。

我的第三个想法：

```
class A_1 (val x: Int)
class A_2 (val y: Int) 
```

但是B类不允许扩展多个类，所以这个想法是行不通的。

还剩下哪些可能性来实现这种情况？有比想法2更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T12:19:30.740

你是如此接近：

```
scala> trait A1 {val x: Int}
defined trait A1

scala> trait A2 {val y: Int}
defined trait A2

scala> class B
defined class B

scala> new B with A1 with A2 {val x = 4; val y = 2}
res0: B with A1 with A2 = $anon$1@2bc20611 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T12:22:48.123

尼古拉斯的建议。

或者：

```
scala> trait A_1 { val x: Int }
trait A_2 { val y: Int }
class B
defined trait A_1
defined trait A_2
defined class B

scala> new { val x = 3; val y = 9 } with B with A_1 with A_2
res3: B with A_1 with A_2 = $anon$1@18e1b 
```

这里使用的特性称为[早期初始化](https://stackoverflow.com/a/3131286/192247)。

# java - 多态性的好处

> ID：11082640
> 
> 赞同：72
> 
> 时间：2012-06-18T12:14:49.497
> 
> 标签：java, oop, jakarta-ee, polymorphism

当我开始寻找多态性的好处时，我在这里发现了[这个](https://stackoverflow.com/questions/11064409/why-to-use-polymorphism)问题。但在这里我找不到我的答案。让我告诉我想找到什么。在这里，我有一些课程：

```
class CoolingMachines{
    public void startMachine(){
        //No implementationion
    }
    public void stopMachine(){
        //No implementationion
    }
}

class Refrigerator extends CoolingMachines{
    public void startMachine(){
        System.out.println("Refrigerator Starts");
    }
    public void stopMachine(){
        System.out.println("Refrigerator Stop");
    }
    public void trip(){
        System.out.println("Refrigerator Trip");
    }
}

class AirConditioner extends CoolingMachines{
    public void startMachine(){
        System.out.println("AC Starts");
    }
    public void stopMachine(){
        System.out.println("AC Stop");
    }
}

public class PolymorphismDemo {
    CoolingMachines cm = new Refrigerator();
    Refrigerator rf = new Refrigerator();
} 
```

现在在这里我在 Demo 类中创建了两个对象，它们是`Refrigerator`. 我已经完全明白，`rf`我可以从对象调用 的`trip()`方法`Refrigerator`，但该方法将对`cm`对象隐藏。现在我的问题是我为什么要使用多态性或为什么要使用

```
CoolingMachines cm = new Refrigerator(); 
```

当我没事的时候

```
Refrigerator rf = new Refrigerator(); 
```

多态对象的效率是好还是重量轻？这两个对象的基本目的和区别是什么？`cm.start();`和有什么区别`rf.start()`吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-06-18T12:19:55.643

当您处理列表时它很有用......一个简短的例子：

```
List<CoolingMachines> coolingMachines = ... // a list of CoolingMachines 
for (CoolingMachine current : coolingMachines) {
    current.start();
} 
```

或者当你想让一个方法与任何子类一起工作时`CoolingMachines`

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-06-18T12:18:39.183

如果您对了解具体类真的没问题，那就没有好处了。但是，在许多情况下，您希望能够编写只知道基类或接口的代码。

例如，看看[`Iterables`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterables.html)Guava [-](http://guava-libraries.googlecode.com)有很多方法（大部分）不关心`Iterable`正在使用什么实现。你真的想要为每个实现单独的所有代码吗？

如果您*可以*对抽象基类或接口进行编码，您可以稍后使用共享相同公共 API 的其他实现，但可能有不同的实现。即使您只想要一个*生产*实现，您也可能需要替代实现来进行测试。（这在很大程度上取决于所讨论的类别。）

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-06-18T12:19:59.683

因为以后如果您想使用`AirConditioner`而不是`Refrigerator`用于冷却，那么您需要更改的代码就是`CoolingMachines cm = new AirConditioner();`

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-06-18T12:18:19.883

您想使用的原因

```
CoolingMachines cm = new Refrigerator(); 
```

是您以后可以轻松使用不同的`CoolingMachines`. 您只需要更改那一行代码，其余代码仍然可以工作（因为它只会使用 的方法`CoolingMachines`，这比特定的机器更通用，例如 a `Refrigerator`）。

因此，对于 的特定实例`Refrigerator`，调用`cm.start();`和`rf.start()`工作方式相同，但`cm`也可能是不同的`CoolingMachines`对象。并且该对象可能具有不同的`start()`.

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-06-18T12:53:42.457

## 第一个答案：

使用多态性进行方法覆盖和方法重载。不同类中使用的其他类方法然后有两个选项：第一个方法继承，第二个方法覆盖。这里扩展接口：使用它们，或者实现方法：逻辑编写它们。多态性用于方法、类的继承。

## 第二个答案：

`cm.start();`和有什么区别`rf.start();`吗？

是的，两者都是彼此完全不同的对象。不要创建接口对象，因为 Java 不支持接口对象。为接口创建的第一个对象，为冰箱类创建的第二个对象。现在是第二个对象。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-06-18T21:50:05.437

您问题的一般部分（我为什么要使用多态？）的最一般答案是多态实现了一些关键的面向对象设计原则，例如：

*   代码重用：通过将所有“冷却机”通用的任何代码放入冷却机中，您只需编写一次该代码，对该代码的任何编辑都会立即生效。

*   抽象：人脑只能记录这么多东西，但他们擅长类别和层次结构。这有助于了解大型程序中正在发生的事情。

*   封装：每个类都隐藏了它正在做的事情的细节，只是建立在基类的接口上。

*   关注点分离：很多面向对象的编程都是关于分配职责的。谁来负责这件事？专门的关注点可以放在子类中。

So polymorphism is just part of the bigger oo picture, and the reasons for using it sometimes only make sense if you are going to try and do 'real' oo programming.

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-06-18T12:21:05.723

多态性的一个简单用例是您可以拥有一个coolingMachines 数组，其中元素0 是冰箱，元素1 是空调等...

您无需进行任何检查或确定您正在处理的对象即可调用 trip 或 start 等。

当从用户那里获取输入并且必须遍历所有对象并调用类似的函数时，这可能是一个很大的好处

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-06-18T12:34:41.847

以多态方式使用对象还有助于创建工厂或相关类的系列，这是实现[工厂设计模式](http://dofactory.com/Patterns/PatternAbstract.aspx)的重要部分。这是多态工厂的一个非常基本的示例：

```
public CoolingMachine CreateCoolingMachines(string machineType)
{
    if(machineType == "ref")
        return new Refrigerator();
    //other else ifs to return other types of CoolingMachine family
} 
```

调用上述代码的用法：

```
CoolingMachine cm = CreateCoolingMachine("AC"); //the cm variable will have a reference to Airconditioner class which is returned by CreateCoolingMachines() method polymorphically 
```

另外，假设您有一个使用具体类参数的方法如下`Refrigerator`：

```
public void UseObject(Refrigerator refObject)
{
    //Implementation to use Refrigerator object only
} 
```

现在，如果您将方法的上述实现更改`UseObject()`为使用最通用的基类参数，则调用代码将有优势以多态方式传递任何参数，然后可以在方法内部使用这些参数`UseObject()`：

```
public void UseObject(CoolingMachine coolingMachineObject)
{
    //Implementation to use Generic object and all derived objects
} 
```

上面的代码现在更具可扩展性，因为稍后可以将其他子类添加到 CoolingMachines 家族中，并且这些新子类的对象也可以与现有代码一起使用。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-06-18T21:42:38.090

我举一个容易理解的例子。假设你有一些 json

```
{"a":[1,2],"sz":"text", "v":3, "f":1.2} 
```

现在让我们以编程方式说您想要列出名称、类型和值。而不是为每种类型（a 的数组，sz 的字符串等）都有一个 switch()，您可以只拥有一个基本类型并调用一个完成其工作的函数。它也比使用具有十几种类型的交换机更高效。

然后是带有接口原因的插件、库和外来代码。

# windows-phone-7 - WP7 Stackpanel/Canvas 问题

> ID：11082648
> 
> 赞同：0
> 
> 时间：2012-06-18T12:15:04.560
> 
> 标签：windows-phone-7, xaml, grid, stackpanel

所以我有一个关于我正在使用的堆栈面板的问题。

基本上，当我不断将项目（费用/收入）添加到堆栈面板中时，我最终会缺乏导航空间，最终会覆盖较旧的条目。

因此，目前它最多可以添加五个条目并同时显示。但是，如果我添加另一个条目/项目/费用等，第一个条目将被删除/在堆栈面板中看不到

所以在图片中，一旦添加了第 6 项，列表中的第 1 项将被删除/不可见

有点难解释，希望能帮到你！

![在此处输入图像描述](../Images/3a08c3e47143a49b896c2c5b5a1796d1.png)

更多代码：

[枢轴项 XAML](http://pastie.textmate.org/4108288)

[ItemsList 控件 XAML](http://pastie.textmate.org/4108371)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:19:58.900

将堆栈面板放在滚动查看器中。这应该允许在添加更多数据时自动调整大小，您也可以滚动浏览它

# javascript - Jquery - 检查选择器是否以数字结尾

> ID：11082657
> 
> 赞同：2
> 
> 时间：2012-06-18T12:15:30.870
> 
> 标签：javascript, jquery

如何检查选择器以查看他是否以数字结尾？JS代码：

```
if(!$(this).val())
{
   $('label[for^=image], input[id^=image], input[name=time]').remove();                              
} 
```

我尝试添加**/d/**，但它不起作用（

> $('label[for^=image' + /d/ +'], ....

)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T12:25:26.547

**演示**就是你要找的东西：http: [//jsfiddle.net/8g2WL/](http://jsfiddle.net/8g2WL/)

行为：对于以数字结尾的 id，`label`您将看到一条警报。

希望这会有所帮助，如果我错过了什么，请告诉我。

**使用正则表达式的示例代码**

```
$('label').each(function(){

    if ($(this).attr("id").match(/\d+$/) != null)
       alert($(this).attr("id").match(/\d+$/));

    });​ 
```

**html**

```
<label id="foo">hulk</label><br/>

<label id="foo_23">HUlk with number</label><br/>

<label id="foo1">ironman with number </label><br/>

<label id="foo">hulk</label><br/>
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:18:53.643

您可能需要使用`.filter()`与正则表达式匹配：

```
$('label').filter(function(){
    var forValue = $(this).attr("for") || '';
    return /^image\d+/.test(forValue);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:27:46.793

```
$('label')
    .filter(function() {
        return $(this).attr("for").search(/image\d/)==0;
    })
    .html("Matched!")
    ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T12:41:50.297

为 jQuery使用扩展[正则表达式选择器](http://james.padolsey.com/javascript/regex-selector-for-jquery/)。预览 - [http://jsfiddle.net/yDA9n/](http://jsfiddle.net/yDA9n/)

```
$('label:regex(id,[0-9]$)').css('color', 'red');​​​​​​ 
```

# asp.net - 将上传的文件流转换为字符串

> ID：11082663
> 
> 赞同：0
> 
> 时间：2012-06-18T12:16:00.607
> 
> 标签：asp.net, c#-4.0, stream

我想使用 UploadedTextFile.FileContent 读取文件的内容并将其保存为 string 。但它返回一组类似编码的字符。这是代码：

```
string content = (new streamReader(UploadedTextFile.FileContent,true)).ReadToEnd(); 
```

但结果是这样的

```
 yua%^#@568sda_sdf89 .... 
```

文件内容不是英文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:00:59.897

Microsoft Word 文档中也有大量的格式化内容。尝试在记事本中打开一个 .doc 文件。无论编码如何，您所见即所得。

如果您仍想尝试从文档中提取内容，C# 中有一些工具可以帮助您。[我建议阅读此链接](http://social.msdn.microsoft.com/Forums/da-DK/oxmlsdk/thread/cb26e9a4-b150-44cd-8392-3d79ebe09745)中的答案

# php - PDO 在不同服务器中复制行 一般错误

> ID：11082664
> 
> 赞同：0
> 
> 时间：2012-06-18T12:16:13.447
> 
> 标签：php, mysql, pdo

所以我试图将选定的行从一个表“移动”到不同数据库中的另一个表。

它在理论上可行（但如果有人想发表任何意见，请这样做，我对 PDO 很陌生。但是我不断收到“SQLSTATE [HY000]：一般错误”错误。

有什么建议吗？

```
 private function broken() {
    try {
        $sql = "SELECT * FROM `calls` WHERE `calls`.`status`=0 AND `calls`.`stage` < 4 AND `calls`.`answer` < (NOW() + INTERVAL 10 MINUTE)";
        $query = $this->staging->query($sql);
        while($row = $query->fetch(PDO::FETCH_ASSOC)) {

            // Insert in production database:
            $sql = "INSERT INTO `ivr_incomplete` (`id`,`sip_id`,`extension`,`caller_id`,`stage`,`status`,`survey_id`,`start`,`answer`,`hangup`,`end`) VALUES (:id, :sip_id, :extension, :caller_id, :stage, :status, :survey_id, :start, :answer, :hangup, :end)";
            $query = $this->production->prepare($sql);
            $query->execute($row);

            // Delete from staging:
            $sql = "DELETE FROM `calls` WHERE `id`='".$row['id']."'";
            $this->staging->query($sql);

        }
    }
    catch(PDOException $e) {
        $this->informer("FATAL", "Unable to process broken IVR surveys. Error: ".$e->getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:25:40.663

两点：

1.  您正在为`INSERT`每次迭代做准备，这在某种程度上消除了使用准备好的语句的一半意义——您使用它的目的就是转义。准备好的语句的要点之一是查询只解析一次，因此如果您需要使用不同的值重复执行相同的查询，调用`prepare()`一次然后简单地`execute()`使用不同的数据集调用可以显着提高性能。

2.  ~~整个事情可以在 2 个查询中完成：~~ ^(由于使用了两个单独的数据库连接而被删除)

**编辑**

试试这个代码：

您可能需要调整错误处理以满足您的需求，特别是如果 出现错误时如何处理它`INSERT`，因为我怀疑您是否想要中断整个操作并将已成功处理的行留在源表。

```
private function broken() {

    try {

        // Fetch records to move
        $sql = "
          SELECT *
          FROM `calls`
          WHERE `status` = 0
            AND `stage` < 4
            AND `answer` < (NOW() + INTERVAL 10 MINUTE)
        ";
        $query = $this->staging->query($sql);
        if (!$query) {
            $errorInfo = $this->staging->errorInfo();
            throw new Exception("MySQL error at SELECT: $errorInfo[1] ($errorInfo[0]): $errorInfo[2]");
        }

        // Prepare the INSERT statement
        $sql = "
          INSERT INTO `ivr_incomplete`
            (`id`,`sip_id`,`extension`,`caller_id`,`stage`,`status`,`survey_id`,`start`,`answer`,`hangup`,`end`)
          VALUES
            (:id, :sip_id, :extension, :caller_id, :stage, :status, :survey_id, :start, :answer, :hangup, :end)
        ";
        if (!$stmt = $this->production->prepare($sql)) {
            $errorInfo = $this->production->errorInfo();
            throw new Exception("MySQL error at prepare INSERT: $errorInfo[1] ($errorInfo[0]): $errorInfo[2]");
        }

        // A list of the row IDs we are working with
        $rowIds = array();

        // Loop the results and insert them
        for ($i = 1; $row = $query->fetch(PDO::FETCH_ASSOC); $i++) {

            if (!$stmt->execute($row)) {
                $errorInfo = $stmt->errorInfo();
                throw new Exception("MySQL error at INSERT row $i (id: {$row['id']}): $errorInfo[1] ($errorInfo[0]): $errorInfo[2]");
            }

            $rowIds[] = (int) $row['id'];

        }

        // Delete from staging:
        if ($rowIds) {

            $sql = "
              DELETE FROM `calls`
              WHERE `id` IN (".implode(', ', $rowIds).")
            ";
            if (!$this->staging->query($sql)) {
                $errorInfo = $this->staging->errorInfo();
                throw new Exception("MySQL error at DELETE: $errorInfo[1] ($errorInfo[0]): $errorInfo[2]");
            }

        }

    } catch(PDOException $e) {

        $this->informer("FATAL", "Unable to process broken IVR surveys (PDO). Error: ".$e->getMessage());

    } catch (Exception $e) {

        $this->informer("FATAL", "Unable to process broken IVR surveys (MySQL). Error: ".$e->getMessage());

    }

} 
```

# ios - 没有数据到达服务器

> ID：11082665
> 
> 赞同：0
> 
> 时间：2012-06-18T12:16:18.993
> 
> 标签：ios, upload, asihttprequest

我正在尝试将图像和文档上传到远程服务器。远程服务器有用于处理上传的 PHP 页面。请求已成功发送，但没有任何内容到达服务器。我正在使用 ASIHTTPREQUEST。这是代码：

```
-(void)uploadFile
{
    NSString *resume =@"0";
    NSUserDefaults *userCredentials =[NSUserDefaults standardUserDefaults];
    NSString *userName =[userCredentials objectForKey:@"userName"];
    NSLog(@"Media Type : %@",selectedMediaType);
    NSLog(@"User Name : %@",[userCredentials objectForKey:@"userName"]);
    NSLog(@"File Name : %@",delegate.fileName);
    NSString *stringToAppend =[NSString stringWithFormat:@"mediatype=%@&file_name=%@&usrname=%@&filesize=%@&sha256sum=%@&resume=%@",selectedMediaType,delegate.fileName,userName,fileSize,fileSHA256Sum,resume];
    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://briareos.code20.com/putmedia.php?%@",stringToAppend ]];
    uploadMedia = [ASIHTTPRequest requestWithURL:url];
    NSLog(@"URL WITH INFO %@",url);
    [uploadMedia appendPostData:dataToUpload];
    [uploadMedia setDelegate:self];
    [uploadMedia setRequestMethod:@"PUT"];
    [uploadMedia startAsynchronous];

} 
```

有人可以让我知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:40:45.357

有什么错误吗？尝试追加

```
NSError *error = [uploadMedia error];
if (!error) {
    NSString *response = [uploadMedia responseString];
} else {
    // catch your error here
} 
```

到你的代码

# node.js - 节点快速安装，无需互联网

> ID：11082666
> 
> 赞同：4
> 
> 时间：2012-06-18T12:16:22.977
> 
> 标签：node.js, express

我在封闭环境中的 Redhat 服务器上安装了 node.js 和 npm。现在意识到我不能使用 npm 来安装任何东西。我要快递，玉石和手写笔。我曾尝试寻找使用 npm 下载安装的软件包，但没有运气。我可以在服务器上没有 Internet 连接的情况下执行此操作吗？

谢谢，

e

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T13:22:40.480

在另一台具有 Internet 访问权限和 npm 的服务器上运行“npm install jam”等。

然后将“node_modules”目录复制到关闭的服务器

另外，请注意，如果有任何已编译的模块，则服务器架构应匹配（并且需要识别并手动运行任何后期构建脚本）

# mysql - MYSQL - 查找列是否具有不同的值..？

> ID：11082668
> 
> 赞同：2
> 
> 时间：2012-06-18T12:16:32.227
> 
> 标签：mysql, distinct-values

我在 mysql-4.1.22 中有一个包含大量数据的表。而且我想检查表中的特定列是否具有不同的值（无需检索所有不同的值）。我已经用谷歌搜索并尝试了 MYSQL 内置函数不同的解决方案和替代组，但两者都需要太多时间来执行。

有没有其他方法可以找到具有不同值的列？. 请分享您的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:20:53.320

```
SELECT count(*), count(colname), count(distinct colname)
  FROM tabname; 
```

1.  首先`count()`将为您提供 ; 中的总行数`tabname`。
2.  第二个会给你`NOT NULL`你想要的值的数量`colname`；
3.  最后一个将为您提供所需的许多不同的值`colname`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T10:57:31.623

通过让 count( )>1*从组中*选择 count( )；

# php - symfony 上 security.yml 的问题

> ID：11082669
> 
> 赞同：2
> 
> 时间：2012-06-18T12:16:32.720
> 
> 标签：php, security, symfony1, symfony-1.4, sfguard

我正在尝试在使用 sfGuardPlugin 5.0.0 在 Symfony 1.4 上开发的应用程序中配置一些安全性。

要求说管理员用户可以做任何事情，查看者只能列出和查看记录。

这是我在模块的目录配置中使用的 security.yml：

```
index:
    is_secure: true
    credentials: [[ admin, viewer ]]

show:
    is_secure: true
    credentials: [[ admin, viewer ]]

all:
    is_secure: true
    credentials: [ admin ] 
```

但是我不知道为什么当我尝试对查看器进行一项允许的操作时，它会停止并显示“不允许”消息。

这是堆栈跟踪：

```
1    sfPatternRouting   Connect sfRoute "sf_guard_signin" (/guard/login)
2    sfPatternRouting   Connect sfRoute "sf_guard_signout" (/guard/logout)
3    sfPatternRouting   Match route "homepage" (/) for / with parameters 
  array ( 'module' => 'strain', 'action' => 'index',)
4    sfFilterChain  Executing filter "sfRenderingFilter"
5    sfFilterChain  Executing filter "sfBasicSecurityFilter"
6    Doctrine_Connection_Mysql  exec : SET NAMES 'UTF8' - ()
7    Doctrine_Connection_Statement  execute : SELECT s.id AS s__id, s.first_name AS 
 s__first_name, s.last_name AS s__last_name, s.email_address AS s__email_address, s.username 
 AS s__username, s.algorithm AS s__algorithm, s.salt AS s__salt, s.password AS s__password, 
 s.is_active AS s__is_active, s.is_super_admin AS s__is_super_admin, s.last_login AS 
 s__last_login, s.avatar AS s__avatar, s.token AS s__token, s.notify_new_order AS 
 s__notify_new_order, s.notify_ready_order AS s__notify_ready_order, s.initials AS 
 s__initials, s.created_at AS s__created_at, s.updated_at AS s__updated_at FROM sf_guard_user 
 s WHERE (s.id = ?) LIMIT 1 - (25)
8    sfBasicSecurityFilter  Action "strain/index" requires credentials 
  "[admin, viewer]", forwarding to "sfGuardAuth/secure"
9    sfFilterChain  Executing filter "sfRenderingFilter"
10   sfFilterChain  Executing filter "InboxFilter"
11   Doctrine_Connection_Statement  execute : DELETE FROM notification WHERE 
   (status = ? AND updated_at < ?) - (2, 2012-05-19 14:21:05)
12   sfFilterChain  Executing filter "sfExecutionFilter"
13   sfGuardAuthActions Call "sfGuardAuthActions->executeSecure()"
14   sfPHPView  Render "sf_app_dir/modules/sfGuardAuth/templates/secureSuccess.php"
15   main   Call "sfGuardAuth->executeSignin_form()"
16   sfPartialView  Render "sf_app_dir/modules/sfGuardAuth/templates/_signin_form.php"
17   main   Set slot "error_message"
18   sfPHPView  Decorate content with "sf_app_dir/templates/login.php"
19   sfPHPView  Render "sf_app_dir/templates/login.php"
20   main   Get slot "error_message"
21   sfWebResponse  Send status "HTTP/1.1 403 Forbidden"
22   sfWebResponse  Send header "Content-Type: text/html; charset=utf-8" 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:27:32.330

最后我发现了问题，不是应用程序要求两个凭据，问题是 Symfony 正在查看表权限，而我正在使用该组。

非常感谢您的所有回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:09:19.767

根据堆栈跟踪，用户需要同时拥有**和** `admin`凭据`viewer`。

如果不是这种情况，错误应该是（注意**[[** & **]]**）：

> 操作“strain/index”需要凭据“[[admin, viewer]]”，转发到“sfGuardAuth/secure”

重新检查您的 security.yml 或将完整文件粘贴到您的问题中。

# opencl - OpenCL - 将结构从全局复制到本地内存

> ID：11082671
> 
> 赞同：2
> 
> 时间：2012-06-18T12:16:43.403
> 
> 标签：opencl, gpgpu

我有一个 struct Primitive，它具有以下定义：

```
typedef struct Primitive {
    float m[12];
    float invm[12];
    enum PrimitiveType type;
    int rayDensity;
    float util1;             
    float util2;                
} Primitive; 
```

我在一个常量内存缓冲区中将这些结构的数组传递给我的内核：

```
__constant Primitive *objects; 
```

作为优化练习的一部分，我想看看将结构加载到本地内存中，所以我的内核有这样的代码：

```
__kernel void test(int n_objects, __constant Primitives *objects) {
    local Primitive pFrom, pTo;

    for(int i = 0; i < n_objects; i++) {
        pFrom = objects[i]; 
    }

} 
```

当我运行它时，我得到一个编译错误说：

```
ptxas application ptx input, line 42; error: State space mismatch between instruction and address in instruction 'ld' 
```

作为一个实验，我尝试首先将结构复制到私有变量，然后复制到局部变量，如下所示：

```
__kernel void test(int n_objects, __constant Primitives *objects) {
    Primitive pF, Pt;
    local Primitive pFrom, pTo;

    for(int i = 0; i < n_objects; i++) {
        pF = objects[i]
        pFrom = pF; 
    }

} 
```

现在可以编译并运行，但是似乎该对象没有被深度复制到局部变量 pFrom 中。

请注意，我的代码示例纯粹是示例，为简洁起见，我删除了所有内容。当我直接从常量全局内存中使用原始结构时，我的代码也可以正常工作。

有谁知道我在这里缺少什么，肯定是深度复制或 OpenCL 地址空间的一些基本原理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:06:15.363

您需要的是[async_work_group_copy 函数](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/async_work_group_copy.html)。[您可以使用wait_group_events](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/wait_group_events.html)函数等待此异步操作完成。

希望这可以帮助。

# ruby-on-rails - 测试存在：Rails 中的真实验证

> ID：11082672
> 
> 赞同：0
> 
> 时间：2012-06-18T12:16:43.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unit-testing

在我的持有人测试文件中：

```
 test "name must be present" do
  holder = Holder.new(name: "name")
  assert holder.valid?
 end

 test "name must not be blank" do
  h = Holder.new(name: "    ")
  assert !h.valid?
 end

 test "name must not be nil" do
  h = Holder.new(name: nil)
  assert !h.valid?
 end 
```

我的持有人模型看起来像：

```
class Holder < ActiveRecord::Base
  attr_accessible :description, :name, :user_id

  validates_length_of :name, maximum: 75
  validates_length_of :description, maximum: 250

  validate :name, presence: true
end 
```

但是，当我运行测试时，最后两个验证仍然是红色的。我需要做些什么来测试它们以使它们变绿？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:23:30.320

你忘记`s`在你的`validate`. 它一定要是：

```
validates :name, presence: true 
```

`validate`并且`validates`是完全不同的方法。

见那里：[http](http://api.rubyonrails.org/classes/ActiveModel/Validations/ClassMethods.html) ://api.rubyonrails.org/classes/ActiveModel/Validations/ClassMethods.html 。

# algorithm - 寻找强大的连接组件？

> ID：11082676
> 
> 赞同：0
> 
> 时间：2012-06-18T12:17:05.220
> 
> 标签：algorithm, computer-science

要在有向图 G 中找到强连通分量，首先需要找到一个汇节点。为了找到 sink 节点，DFS 在 G 的逆向图上运行，我们称之为 H。然后具有最高*post 编号*的节点（标记节点离开的时间）将是 H 中的源节点，因此是 sink 节点在 G 中，使我们能够有效地识别 G 中的汇节点。

与其做所有这些，为什么不简单地使用 G 中帖子编号最低的节点呢？如果在源节点中的图中具有最高职位编号的顶点，是否意味着具有最低职位编号的顶点是汇节点？为什么要通过反向查找源节点来使事情变得过于复杂？**为什么不直接使用 G 中 post 编号最小的顶点作为 sink 节点呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:56:32.507

它可能不是水槽。例如，对于图中 s 的 DFS

```
s->a
^  |
|  v
c<-b
   |
   v
   d 
```

遍历可能是

```
enter(s)
enter(a)
enter(b)
enter(c)
leave(c)
enter(d)
leave(d)
leave(b)
leave(a)
leave(s) 
```

所以 c 的帖子编号最低，但不是接收器。

# extjs - ExtJS 4 - 如何在不同视图中从某个控制器调用函数

> ID：11082677
> 
> 赞同：8
> 
> 时间：2012-06-18T12:17:09.543
> 
> 标签：extjs, extjs4, extjs-mvc

我有一个在我的一个控制器中描述的功能。该函数负责从不同的视图创建我需要在不同情况下使用的表单。是否有可能以及从我需要的视图中调用此函数的方法是什么，而无需在每个控制器中添加相同的代码。

这是控制器的代码，我尝试使用其他控制器的方法：

```
Ext.define('MY.controller.EventsController', {
    extend: 'Ext.app.Controller',
    models: [
        'EventsRecord'],

    stores: [
        'Events'],

    views: [
        'EventsGrid'],
    refs: [{
        ref: 'EventsGrid',
        selector: 'CalendarEvent'
    }],

    init: function () {
        this.control({
            'CalendarEvent': {
                afterEditFinish: this.askForNotify,
                deleteEvent: this.deleteEvent,
                calendarEditFunc: this.calendarEditFunc,
                addCalendarEvent: this.addCalendarEvent,
                itemclick: this.onSelectEnableBtn
            }
        })

    }, 
```

在这里，我尝试使用类似`var contr = Ext.getController('SomeController');`and..nothing..

```
askForNotify: function(editor, e) {... 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-18T13:55:53.177

使其成为全局类的一部分，`singleton: true`并从代码中的任何位置访问它。只是从视图中调用控制器方法有点违反 MVC 范式......

**更新：**如果您真的无法更改现有代码 - 请执行以下操作。

在某处保存对您的应用程序的引用（假设您的应用程序定义了类似的内容：

```
Ext.application({

   launch: function() {
      _myAppGlobal = this;
   }
}); 
```

使用这个变量来获得你想要的控制器：

```
_myAppGlobal.getController('MyController'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-16T09:48:19.217

你可以使用这个 -

```
this.getController('Controller Name').someFn(); 
```

# android - 从坐标获取国家？

> ID：11082681
> 
> 赞同：24
> 
> 时间：2012-06-18T12:17:27.560
> 
> 标签：android, google-maps, geolocation, gps

如何在Android中获取国家名称，如果已知地理坐标？如何使其成为最简单的方法？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-18T12:20:32.053

干得好

```
Geocoder gcd = new Geocoder(context, Locale.getDefault());
List<Address> addresses = gcd.getFromLocation(lat, lng, 1);

    if (addresses.size() > 0)
     {  
       String countryName=addresses.get(0).getCountryName();
     } 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-18T12:25:23.973

为此使用下面的功能。

```
public void getAddress(double lat, double lng) {
    Geocoder geocoder = new Geocoder(HomeActivity.mContext, Locale.getDefault());
    try {
        List<Address> addresses = geocoder.getFromLocation(lat, lng, 1);
        Address obj = addresses.get(0);
        String add = obj.getAddressLine(0);
        GUIStatics.currentAddress = obj.getSubAdminArea() + ","
                + obj.getAdminArea();
        GUIStatics.latitude = obj.getLatitude();
        GUIStatics.longitude = obj.getLongitude();
        GUIStatics.currentCity= obj.getSubAdminArea();
        GUIStatics.currentState= obj.getAdminArea();
        add = add + "\n" + obj.getCountryName();
        add = add + "\n" + obj.getCountryCode();
        add = add + "\n" + obj.getAdminArea();
        add = add + "\n" + obj.getPostalCode();
        add = add + "\n" + obj.getSubAdminArea();
        add = add + "\n" + obj.getLocality();
        add = add + "\n" + obj.getSubThoroughfare();

        Log.v("IGA", "Address" + add);
        // Toast.makeText(this, "Address=>" + add,
        // Toast.LENGTH_SHORT).show();

        // TennisAppActivity.showDialog(add);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
    }
} 
```

在清单中添加以下权限

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-18T12:28:06.403

用这个

```
try {
        Geocoder geo = new Geocoder(this.getApplicationContext(), Locale.getDefault());
        List<Address> addresses = geo.getFromLocation(location.getLatitude(), location.getLongitude(), 1);
        if (addresses.isEmpty()) {
            placeName.setText("Waiting for Location");
        }
        else {
            if (addresses.size() > 0) {
                placeName.setText(addresses.get(0).getFeatureName() + ", " + addresses.get(0).getLocality() +", " + addresses.get(0).getAdminArea() + ", " + addresses.get(0).getCountryName());
            }
        }
    }
    catch(Exception e){
        Toast.makeText(this, "No Location Name Found", 600).show();
    } 
```

在清单文件中使用它

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-18T12:29:08.430

我最近的做法是从 Web API URL 读取数据并解析 JSON。

点 (40.714224, -73.961452) 的示例 URL 是：

```
http://maps.google.com/maps/geo?q=40.714224,-73.961452&output=json&oe=utf8&sensor=true_or_false&key=your_api_key 
```

产生以下输出：

```
{
  "name": "40.714224,-73.961452",
  "Status": {
    "code": 200,
    "request": "geocode"
  },
  "Placemark": [ {
    "id": "p1",
    "address": "285 Bedford Ave, Brooklyn, NY 11211, USA",
    "AddressDetails": {
   "Accuracy" : 8,
   "Country" : {
      "AdministrativeArea" : {
         "AdministrativeAreaName" : "NY",
         "SubAdministrativeArea" : {
            "Locality" : {
               "DependentLocality" : {
                  "DependentLocalityName" : "Williamsburg",
                  "PostalCode" : {
                     "PostalCodeNumber" : "11211"
                  },
                  "Thoroughfare" : {
                     "ThoroughfareName" : "285 Bedford Ave"
                  }
               },
               "LocalityName" : "Brooklyn"
            },
            "SubAdministrativeAreaName" : "Kings"
         }
      },
      "CountryName" : "USA",
      "CountryNameCode" : "US"
   }
},
    "ExtendedData": {
      "LatLonBox": {
        "north": 40.7154779,
        "south": 40.7127799,
        "east": -73.9600584,
        "west": -73.9627564
      }
    },
    "Point": {
      "coordinates": [ -73.9614074, 40.7141289, 0 ]
    }
  } ]
} 
```

我发现 GSON 非常适合在 Android 中解析 JSON。

# python - Django 无法使用 login() 登录

> ID：11082693
> 
> 赞同：0
> 
> 时间：2012-06-18T12:18:15.427
> 
> 标签：python, django, authentication, login

我正在尝试使用`login()`and创建登录页面`authenticate()`，但是当我提交用户名和密码时，用户没有通过身份验证（`is_authenticated = False`），就像我提交错误的密码和/或用户名一样。

视图.py：

```
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response
from django.template import RequestContext
from whitesnake.forms import RegistrationForm, LoginForm
from django.contrib.auth.models import User
from whitesnake.models import Whitesnake
from django.contrib.auth import authenticate, login, logout

def WhitesnakeLogin(request):
if request.user.is_authenticated():
    return render_to_response('index.html', None, context_instance = RequestContext(request))
if request.method =='POST':
    login_form = LoginForm(request.POST)
    if login_form.is_valid():
        username = login_form.cleaned_data['username']
        password = login_form.cleaned_data['password']
        whitesnake = authenticate(username = username, password = password)
        if whitesnake is not None:
            login(request, whitesnake)
            return HttpResponseRedirect('/admin/')
        else:
            login_form = LoginForm()
            context = {'login_form' : login_form}
            return render_to_response('index.html', context, context_instance = RequestContext(request))
    else:
        login_form = LoginForm()
        context = {'login_form' : login_form}
        return render_to_response('index.html', context, context_instance = RequestContext(request))        
else:
    login_form = LoginForm()
    context = {'login_form' : login_form}
    return render_to_response('index.html', context, context_instance = RequestContext(request)) 
```

表格.py：

```
from django import forms
from django.forms import ModelForm
from django.contrib.auth.models import User
from whitesnake.models import Whitesnake

class LoginForm(forms.Form):
    username = forms.EmailField(label=(u'Username'))
    password = forms.CharField(label=(u'Password'), widget = forms.PasswordInput(render_value = False)) 
```

我已经创建了一个注册页面，我确保我使用的用户名和密码是正确的并且已经存储在 MySQL 中。Whitesnake 是用户应用程序的名称

# asp.net - 如何在谷歌地图上显示多个标记

> ID：11082694
> 
> 赞同：0
> 
> 时间：2012-06-18T12:18:17.830
> 
> 标签：asp.net, google-maps

我有谷歌地图的代码，我从数据库中获取坐标并在地图上显示地点。现在我想为各个地方设置多个标记。我怎样才能做到这一点？我的地图代码如下

```
function loadGmap(lat,lang) {
    if (GBrowserIsCompatible()) {
        var point;
        var map = new GMap2(document.getElementById("Gmap"));
        map.addControl(new GOverviewMapControl());
        map.enableDoubleClickZoom();
        map.enableScrollWheelZoom();
        map.addControl(new GMapTypeControl());
        map.addControl(new GSmallMapControl());enter code here
        point = new GLatLng(lat,lang);
        var marker = new GMarker(point);
        map.setCenter(point, 17);
        map.addOverlay(marker);
        map.setMapType(G_HYBRID_MAP);
   }
} 
```

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:20:08.420

该代码来自 google maps API v2，已被弃用。任何新地图都应使用 v3 实现。

有很多方法可以做到这一点，如果您卡在 v2 上，请参阅[Mike Williams 的 v2 教程](http://econym.org.uk/gmap/)。

我已经将他的一些例子翻译成 v3，见[http://www.geocodezip.com](http://www.geocodezip.com)

# mysql - 在 MySQL 中使用空间 POINT 类型时的 Lon/Lat 顺序

> ID：11082696
> 
> 赞同：10
> 
> 时间：2012-06-18T12:18:21.940
> 
> 标签：mysql, point

在 MySQL 中设置 POINT 时正确的顺序是什么？

甚至 SO 问题中的答案也有所不同： [Moving lat/lon text columns into a 'point' type column](https://stackoverflow.com/questions/5756232/moving-lat-lon-text-columns-into-a-point-type-column)

是吗

```
POINT(lat lon) 
```

或者

```
POINT(lon lat) 
```

据我所知，它应该是第一个版本（经纬度），因为 POINT 将参数 x 和 y 用作参数，但我无法找到明确的证据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:56:35.423

正如人们可以在这里看到的那样[https://stackoverflow.com/a/5757054/1393681](https://stackoverflow.com/a/5757054/1393681) 顺序是（经纬度）。

~~**如果我看我的地球仪，**lon**基本上是 y 轴，**lat是 x，但是****lon 沿着 x 轴移动**，**lat 沿着 y 轴移动**，所以我认为这就是你**使用 (lon lat)的原因****~~

 **尽管如此，如果您在应用程序中保持一致，那么世界是否在您的数据库中翻转并不重要；-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-29T22:04:51.490

在我看来`lat lon`。你可以从你的 mysql shell 中检查：

```
mysql> SELECT ST_ASTEXT(coords), ST_LONGITUDE(coords), ST_LATITUDE(coords) FROM table;

+----------------------------+-----------------------+----------------------+
| ST_ASTEXT(coords)          | ST_LONGITUDE(coords)  | ST_LATITUDE(coords)  |
+----------------------------+-----------------------+----------------------+
| POINT(33.520571 -18.20072) | -18.20072             | 33.520571            |
+----------------------------+-----------------------+----------------------+ 
```

注意：使用了 SRID 4326。

另见：[https ://dev.mysql.com/doc/refman/8.0/en/gis-point-property-functions.html#function_st-latitude](https://dev.mysql.com/doc/refman/8.0/en/gis-point-property-functions.html#function_st-latitude)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-05-06T22:20:07.440

从技术上讲，这并不重要。您正在存储到一个点的 x 和 y 坐标中。您只需要以与编写它们相同的方式阅读它们。

如果您关心“正确的方式”，我只能指 Google Maps API 使用创建坐标的事实

```
var location = new google.maps.LatLng(lat, lng); 
```

在学校里，你也会学习“纬度和登录度”，而不是相反。

尽管如此，从技术上讲，它确实并不影响您存储它们的方式。只需确保在回读它们时使用相同的约定。**

# bash - Bash 获取和解析结果

> ID：11082698
> 
> 赞同：1
> 
> 时间：2012-06-18T12:18:25.737
> 
> 标签：bash, parsing

我正在尝试解析一些结果

```
arp -a 
```

和

```
Michael$ arp -a
? (10.254.0.1) at 0:1e:c9:bb:95:8c on en0 ifscope [ethernet]
? (10.254.0.2) at 0:1e:c9:bb:9a:8c on en0 ifscope [ethernet]
? (10.254.0.3) at 0:1e:c9:bb:9d:8c on en0 ifscope [ethernet] 
```

我将如何运行 bash 脚本来运行 arp -a 并打印出每个返回的 IP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:44:56.513

对于 GNU `grep`（以及其他一些支持 PCRE）：

```
arp -a | grep -Po '.*?\(\K.*?(?=\).*)' 
```

AWK：

```
arp -a | awk -F '[()]' '{print $2}' 
```

`sed`：

```
arp -a | sed 's/[^(]*(\([^)]*\)).*/\1/' 
```

珀尔：

```
arp -a | perl -lne 'print $1 if m{.*?\(\K(.*?)(?=\).*)}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:28:55.670

这是另一个解决方案：

```
arp -a | cut -f 2 -d ' ' 
```

如果你不想要括号：

```
arp -a | cut -f 2 -d ' ' | sed 's/[()]//g' 
```

或者，将收集到的 IP 地址转储到数组中：

```
ips=( $(arp -a | cut -f 2 -d ' ' | sed -r -e 's/[()]//g') ) 
```

访问：

```
echo ${ips[1]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:38:36.630

您可以使用 awk 来完成：

```
arp -a | awk '{ gsub(/[()]/, "", $2); print $2; }' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T14:02:57.277

纯重击：

```
arp -a  | while read -a line ; do
  echo ${line[1]:1:-1}
done 
```

# ios - 幸存的ios内存警告

> ID：11082702
> 
> 赞同：2
> 
> 时间：2012-06-18T12:18:36.890
> 
> 标签：ios, ios5, uiviewcontroller, uinavigationcontroller

我有一个教程应用程序，演示如何使用`UINavigationController`. 大多数应用程序都可以正常工作。

当我模拟内存警告时，它会丢失一些数据。我有两个`UIViewController`在一个`UINavigationController`。有一个`UIButton`on first`UIViewController`的视图，当用户触摸它时`UIButton`， first 会创建 second`UIViewController`并推送导航堆栈`UIViewController`。我通过将数据从第二个传递`UIViewController`到第一个。`UIViewController``NSNotificationCenter`

使用这种方法，应用程序可以正常工作，但是如果我在 second`UIViewController`的视图可见时模拟内存警告，则什么也不会传回。那么在那种情况下，我该如何生存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:21:42.537

当触发内存警告时，应用程序会尝试删除所有不再需要的对象。这可能会从第一个 UIViewController 中删除侦听器。

NSNotificationCenter 的问题在于没有一种简单的方法来检查侦听器是否处于活动状态。

我不知道这种情况是否适合使用 NSNotification 设置。很容易失去对将哪些消息发送到哪个视图控制器的控制。

也许这个设置更容易（并且可能记忆更安全）。它保留对第一个 UIViewController 对象的引用

```
//
//  SecondViewController.h
//  test
//
//

#import <UIKit/UIKit.h>
#import "ViewController.h"

@interface SecondViewController : UIViewController

@property(nonatomic, retain) ViewController *parentViewController;

@end 
```

和 .m 文件

```
//
//  SecondViewController.m
//  test
//
//

#import "SecondViewController.h"

@interface SecondViewController ()
    -(IBAction)buttonPressed:(id)sender;
@end

@implementation SecondViewController

@synthesize parentViewController;

-(IBAction)buttonPressed:(id)sender {
    parentViewController.yourObject = @"your value";
}

-(void)dealloc {
    [parentViewController release];
    [super dealloc];
} 
```

推动第二个视图控制器时，请执行以下操作：

```
SecondViewController *vc = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    vc.parentViewController = self;
    [self.navigationController pushViewController:vc animated:YES];
[vc release]; 
```

# bluetooth - 蓝牙的 Cmake 和库链接器标志

> ID：11082704
> 
> 赞同：3
> 
> 时间：2012-06-18T12:18:40.337
> 
> 标签：bluetooth, cmake

我正在尝试用 CMAKE 编译一个 .cpp 程序。当我只是在终端上使用 gcc 时，我需要输入：

```
gcc nxt_bt_connect.c -o nxt_bt_connect -lm -lbluetooth 
```

如何将这两个链接器标志包含到我的 CmakeLists.txt（粘贴在下面）文件中？

```
# YARP needs CMake 2.6 or greater
cmake_minimum_required(VERSION 2.6)
# find YARP
find_package(YARP REQUIRED)
# add YARP include directories
include_directories(${YARP_INCLUDE_DIRS})
# set up our program
add_executable(send_angles send_angles.cpp)
# link with YARP libraries
target_link_libraries(send_angles ${YARP_LIBRARIES}) 
```

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T15:03:16.053

尝试：

```
set(EXTRA_LIBS ${YARP_LIBRARIES})
list(APPEND EXTRA_LIBS "m")
list(APPEND EXTRA_LIBS "bluetooth")
target_link_libraries(send_angles ${EXTRA_LIBS}) 
```

或者：

```
target_link_libraries(send_angles "${YARP_LIBRARIES};m;bluetooth") 
```

# php - 如何从中返回数组中的一些数据？

> ID：11082709
> 
> 赞同：0
> 
> 时间：2012-06-18T12:18:57.670
> 
> 标签：php, xml, rss, preg-match

我有以下数据：

```
<media:group>
    <media:content url="http://www.url.com" bitrate="450" width="320" duration="32" />
    <media:content url="http://www.url.com" bitrate="212" width="320" duration="32" />
</media:group> 
```

我想通过这个搜索并形成一个像这样的数组：

```
Array (
[0] =>
 [url] => http://www.url.com,
 [bitrate] => 459,
 [width] => 320,
 [duration] => 32
[1] =>
 [url] => http://www.url.com,
 [bitrate] => 212,
 [width] => 320,
 [duration] => 32
) 
```

上面的数组只是我希望如何返回数据的一个示例。

我怎样才能做到这一点？此信息有时会发生变化，并且还会包含其他内容。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:33:01.770

您应该尝试[SimpleXML](http://www.php.net/manual/en/simplexml.examples-basic.php)。示例 #5 涵盖了 XML 元素的属性，类似于数组的访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:22:38.753

这将起作用。

```
<?php
$xml = '<media_group>
    <media_content url="http://www.url.com" bitrate="450" width="320" duration="32" />
    <media_content url="http://www.url.com" bitrate="212" width="320" duration="32" />
</media_group>
';
$xml = simplexml_load_string($xml);

// do an xpath query and get all item id's 
$result = $xml->xpath( '//media_content' );

$idList = array();
foreach($result as $key => $node) {
    foreach($node->attributes() as $attr=>$value) {
        $idList[$key][ (string)$attr ] = (string)$value;
    }
}

print_r($idList);
?> 
```

**注意：**我已更改`media:`为，`media_`因为我不知道您使用的命名空间`media`。为此，您必须先使用[registerXpathNamespace](http://us2.php.net/manual/en/simplexmlelement.registerxpathnamespace.php)，然后才能处理代码。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:26:03.817

```
preg_match_all("@url\=\"(?P<url>.*?)\"\s+bitrate\=\"(?P<bitrate>.*?)\"\s+width\=\"(?P<width>.*?)\"\s+duration=\"(?P<duration>.*?)\"@msi", $sYourString, $aResult, PREG_SET_ORDER); 
```

或其他解决方案：

首先将所有项目分开，然后逐个进行，并获取所有属性。

```
$aMyFullResult = array();

preg_match_all("@<media:content(?P<substring>.*?)/>@msi", $sYourString, $aResults, PREG_SET_ORDER);

foreach ($aResults as $iKey=>$aOneRow)
  preg_match_all("@\s+(\w+)\=\"(.*?)\"\s+@msi", $aOneRow['substring'], $aMyFullResult[], PREG_SET_ORDER);

print_r($aMyFullResult); 
```

# xml - 如何提取一个值并在未来的 xpath 查询中使用它？

> ID：11082712
> 
> 赞同：2
> 
> 时间：2012-06-18T12:19:02.420
> 
> 标签：xml, xslt, xpath

我将节点的值提取到变量中：

```
<xsl:variable name="UPC" select="//x:input[@name='field-keywords']/@value"/>
<xsl:value-of select="$UPC" />  <!-- This works! --> 
```

然后我想在另一个 XML 文档中查询具有相同值的节点：

```
<xsl:value-of select="document('price_list.xml')/im_prices/row/UPC_Code[text()='$UPC']"/> 
```

当我用 $UPC 代替实际值时，我发现节点很好，但是当我使用 $UPC 时它不起作用。

我无法弄清楚如何将值提取到变量中并在未来的 xpath 查询中使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T12:47:33.087

**只需删除撇号 - 在您的表达式中，您将与*文字*“$UPC”进行比较：**

```
 <xsl:value-of select=
   "document('price_list.xml')
        /im_prices/row/UPC_Code[text()=$UPC]"/> 
```

**关于这个问题还有很多话要说**：

> 我将节点的值提取到变量中：
> 
> ```
>  <xsl:variable name="UPC" select="//x:input[@name='field-keywords']/@value"/> 
> ```

不，这不是“提取值”——变量的值是一*组*节点，也就是*nodeset*。

另外，请注意这个节点集通常有多个节点。

> ```
>  <xsl:value-of select="$UPC"/>  <!-- This works! --> 
> ```

*这将输出变量中包含的第一个*节点的字符串值`$UPC`。

```
Then I want to query another XML document for a node with the same value:

     <xsl:value-of select="document('price_list.xml')/im_prices/row/UPC_Code[text()='$UPC']"/> 
```

即使撇号被删除，上面输出的*第一个*元素`document('price_list.xml')/im_prices/row/UPC_Code`的字符串值具有文本节点子节点，其字符串值等于变量中包含的*一个*`$UPC`节点的字符串值。

# php - 在 PHP 中合并一个数组

> ID：11082714
> 
> 赞同：0
> 
> 时间：2012-06-18T12:19:13.583
> 
> 标签：php, arrays

> **可能重复：**
> [PHP 合并数组并删除双精度值](https://stackoverflow.com/questions/6180090/php-merge-arrays-and-delete-double-values)

我需要合并两个数组。我知道我可以使用该`array_merge`功能。

但它显示了两个数组中的所有元素。但是我需要用单个值而不是所有值替换所有相似的值。

例如

```
$array1 = array("2", "3", "4");
$array2 = array("2", "7", "8"); 
```

如果我使用`array_merge`上面的函数，输出将是`2,3,4,2,7,8`，但我希望它是`2,3,4,7,8`。我的意思是值二不应该再次重复。我希望有一个功能来完成我的任务。请指出给我

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T12:20:56.050

先用[`array_merge`](http://www.php.net/array_merge)，再用[`array_unique`](http://www.php.net/array_unique)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T12:21:35.890

```
function array_fusion($ArrayOne, $ArrayTwo)
{
    return array_unique(array_merge($ArrayOne, $ArrayTwo));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T12:21:41.993

```
array_unique ( array_merge($array1,$array2)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T12:21:44.280

您可以使用以下功能：

`$result = array_unique($input);`

这将删除 $input 数组中的重复值。所以首先应用 array_merge，然后是我认为的 array_unique 函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T12:26:12.333

万一有人发现这很有用或只是好奇，您还可以进行两次数组翻转。当它从值创建唯一键时，第一次翻转会导致欺骗者退出。再次翻转将其恢复为有用的东西。PHP 总是有很多方法来完成任务。

```
$arrays = array_flip(array_flip(array_merge($array1,$array2))); 
```

当然，array_unique 是更优雅、更正确的方法。

```
$arrays = array_unique(array_merge($array1,$array2)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T12:22:10.397

以您现在的方式使用它，但在 merts 使用[http://php.net/manual/en/function.array-unique.php之后就行了](http://php.net/manual/en/function.array-unique.php)

# sql - 具有多个参数的参数化 sql

> ID：11082721
> 
> 赞同：1
> 
> 时间：2012-06-18T12:19:40.903
> 
> 标签：sql, dynamic, parameterized

我在我的 SQL 查询中遗漏了一些东西，请有人建议如何纠正它？这是我的 SQL：

```
declare @numItems int;
declare @value1 int;
declare @value2 int;
declare @currentValue int;
declare @counter int;
declare @qry nvarchar(max)

set @value1 = 5;
set @value2 = 10;

set @numItems = 2
set @counter=0

WHILE (@counter < @numItems)
BEGIN
    set @qry = 'set @currentValue = @value' + cast(@counter+1 as nvarchar(max)) + ';'   
    exec sp_executesql @qry, N'@currentValue int OUTPUT', @currentValue OUTPUT

    print @currentValue

    set @counter = @counter + 1;
END 
```

我想要的是@currentValue 参数获取@value1 和@value2 的值并打印它们。我不确定如何在 exec 语句中正确声明参数。我正在使用 SQL Server 2005。感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:23:20.057

```
declare @numItems int;
declare @value1 int;
declare @value2 int;
declare @currentValue int;
declare @counter int;
declare @qry nvarchar(max)

set @value1 = 5;
set @value2 = 10;

set @numItems = 2
set @counter=0

WHILE (@counter < @numItems)
BEGIN
    set @qry = 'set @currentValue = @value' + cast(@counter+1 as nvarchar(max)) + ';'   
    exec sp_executesql @qry, 
                        N'@value1 int, @value2 int, @currentValue int OUTPUT', 
                        @value1=@value1,@value2=@value2, @currentValue = @currentValue OUTPUT

    print @currentValue

    set @counter = @counter + 1;
END 
```

# image - OpenCV：缩放和转换 IplImage 数据

> ID：11082723
> 
> 赞同：0
> 
> 时间：2012-06-18T12:19:41.020
> 
> 标签：image, opencv, scale, image-conversion, 24-bit

我是 OpenCV 的新手，所以希望这不是一个太愚蠢的问题。

作为 OpenCV 操作（从设备捕获图像数据）的结果，我得到了一个 IplImage。

根据它的实际大小，我首先必须对其进行缩放，然后将其转换为普通的原始 24 位 RGB 格式。

对于第一次操作，我想有一些可用的缩放功能。但是如何访问和转换原始图像数据呢？我在 IplImage 结构中找不到任何合适的东西 - 至少我无法将成员标识为指向图像数据的指针。

任何缓慢读取每个像素的操作都不合适，我必须经常执行该操作，因此需要快速访问数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:34:28.430

首先你为什么使用`IplImage`而不是`cv::Mat`？这是保存图像的最佳格式。

对于您的第一次操作，有[resize](http://opencv.itseez.com/modules/imgproc/doc/geometric_transformations.html#void%20resize%28InputArray%20src,%20OutputArray%20dst,%20Size%20dsize,%20double%20fx,%20double%20fy,%20int%20interpolation%29)功能。

要将其转换为 RGB 格式（如果我没记错的话，OpenCV 默认将图像保存为 BGR 格式），您可以使用[cvtColor](http://opencv.itseez.com/modules/imgproc/doc/miscellaneous_transformations.html#void%20cvtColor%28InputArray%20src,%20OutputArray%20dst,%20int%20code,%20int%20dstCn%29)函数和代码（第 3 个参数）`CV_BGR2RGB`。

或者，如果您想获取指向图像（像素）数据的指针，请参阅此[SO question](https://stackoverflow.com/questions/7899108/opencv-get-pixel-information-from-mat-image)。

# wicket - JGrowlFeedbackPanel 选项无法正常工作

> ID：11082724
> 
> 赞同：0
> 
> 时间：2012-06-18T12:19:43.323
> 
> 标签：wicket, jgrowl

我正在尝试在我的项目中使用 JGrowlFeedbackPanel 组件。这是 JGrowl 插件 (JQuery) 的检票口采用。我从一个 Maven 的存储库中得到它。

```
ResourceReference cssMenuRef = new ResourceReference(HomePage.class, "style_menu.css");
add(CSSPackageResource.getHeaderContribution(cssMenuRef));

JGrowlFeedbackPanel feedbackPanel = new JGrowlFeedbackPanel("feedbackPanel", new ErrorLevelFeedbackMessageFilter(FeedbackMessage.WARNING));
add(feedbackPanel);
Options errorOptions = new Options();
errorOptions.set("header", "Error"); //works
errorOptions.set("sticky", true); //works
errorOptions.set("position", "center"); //doesn't work
errorOptions.set("theme", "feedback"); //doesn't work
error("TEST!");
feedbackPanel.setErrorMessageOptions(errorOptions);

.feedback {
color: #ff0000;
background-color: #FFFFFF !important ; 
width: 400px;
} 
```

我想改变 jGrowl 的默认位置和颜色，但它们根本没有改变。我可以在我的 css 文件中使用 !important 声明，但我认为这不是一个好主意。我将不胜感激任何建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T22:47:55.143

与 WicketStuff 的 jGrowl 面板集成后，我今天注意到了两件事。

1.  它总是错过我的第一条消息，除非我在页面上显示任何反馈消息之前先调用 $.jGrowl()。这仅在 IE10 中受到影响，请参阅[https://github.com/stanlemon/jGrowl/issues/17](https://github.com/stanlemon/jGrowl/issues/17)
2.  如果您将选项作为字符串传递，它附带的 Options 类喜欢在选项周围加上单引号。因此，请确保使用 new Interger(x) 或其他类型的对象。

否则，这是一个不错的 UI 添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:53:34.023

对于该职位，jGrowl 在其文档中明确表示：

> 这必须在调用启动方法之前更改默认值。

链接：[jGrowl](http://stanlemon.net/pages/jgrowl)

-> 根据我在这里找到的源代码： [JGrowlFeedbackMessage.java](https://github.com/wicketstuff/core/blob/master/jdk-1.6-parent/jquery-parent/jquery/src/main/java/org/wicketstuff/jquery/jgrowl/JGrowlFeedbackMessage.java) 和这里： [JGrowlFeedbackPanel.java](https://github.com/wicketstuff/core/blob/master/jdk-1.6-parent/jquery-parent/jquery/src/main/java/org/wicketstuff/jquery/jgrowl/JGrowlFeedbackPanel.java) 这可能无法正常工作，因为您必须进入“jquery.jgrowl.js”内部来修改默认位置。 ..

另外我不明白为什么 jGrowl 选项不能在 JS 中完全扩展。

也许更好的建议是使用 jquery 通知程序，构建自己的面板并包装调用以通过 target.appendJavaScript() 方法触发通知。wicket6 的示例：

```
 public void showExpiringNotification(final String title, final String message, final int expiringSpeed) {
      AjaxRequestTarget target = RequestCycle.get().find(AjaxRequestTarget.class);
      if (target != null) {
        target.appendJavaScript("$('#container').notify('create','error',{title: '" + title + "', text: '" + message
                + "' },{expires: " + expiringSpeed + "})");
      }
    } 
```

如果需要，我可能会在我的博客上提供更详细的示例...

# python - 发布后如何在表单字段中传递初始值？

> ID：11082727
> 
> 赞同：0
> 
> 时间：2012-06-18T12:19:56.177
> 
> 标签：python, django, django-forms, django-views

在我的应用程序视图中，我有三个应用按钮，因此三个 POST... 第一个我从给定的选项中选择一个对象。第二次对于所选对象，我上传了一个文件，该文件用第二个 POST 解析并返回一些计算值。我想将这些值传递给我的下一个 request.POST 作为我拥有的表单中某些字段的初始值。需要帮助...在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:32:43.520

使用表单向导：[https ://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T12:29:21.190

```
<input type="text" name="stuff" value="some_data_from_step_2"> 
```

# javascript - 如何将重复的 css 值存储在变量中以减少代码的重复性？

> ID：11082730
> 
> 赞同：0
> 
> 时间：2012-06-18T12:20:00.037
> 
> 标签：javascript, jquery, css

```
 $('ul#range-drop li#product1')
    .css( {backgroundPosition: '-914px 0px'} )
    .mouseover(function(){
      if (!($('ul#range-drop li#product1 a').hasClass("current")) ) {
        $(this).css( {background: "none"} );
        $(this).parent().stop().animate({backgroundPosition: '-914px -12px' }, {duration:400, easing: 'easeInOutQuint'});
      }
   })

  .mouseout(function(){
   $(this).parent().stop().animate({backgroundPosition : '-914px 0px'}, {duration:400, easing: 'easeInOutQuint'});
   }); 
```

此代码块针对具有不同背景位置值的每个导航元素重复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:24:53.237

将此代码放入一个函数中，其中输入参数是您要将代码绑定到的元素 ID 的名称、背景位置以及任何其他更改信息。然后你可以为每个元素只写一行（方法调用），但代码的核心只写一次。

例如（只是把它放在一起，没有测试它）

```
applyCSS('ul#range-drop li#product1', -194, 0)

function applyCSS(id, posx, posy)
{
  $(id)
    .css( {backgroundPosition: posx + 'px ' + posy + 'px'} )
    .mouseover(function(){
      if (!($(id).hasClass("current")) ) {
        $(this).css( {background: "none"} );
        $(this).parent().stop().animate({backgroundPosition: posx + 'px ' + posy + 'px'},     {duration:400, easing: 'easeInOutQuint'});
      }
   })

  .mouseout(function(){
   $(this).parent().stop().animate({backgroundPosition: posx + 'px ' + posy + 'px'},     {duration:400, easing: 'easeInOutQuint'});
   });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:26:27.120

您应该将值存储在`data-`属性或 JavaScript 映射中；

```
var map = {
  product1 : ['-914px 0px', '-914px -12px']
}

$('ul#range-drop li').each(function() {
    $(this).css('backgroundPosition', map[this.id][0]);
}).mouseover(function() {
    if (!($(this).hasClass("current"))) {
        $(this).css({
            background: "none"
        });
        $(this).parent().stop().animate({
            backgroundPosition: map[this.id][1]
        }, {
            duration: 400,
            easing: 'easeInOutQuint'
        });
    }
}).mouseout(function() {
    $(this).parent().stop().animate({
        backgroundPosition: map[this.id][0]
    }, {
        duration: 400,
        easing: 'easeInOutQuint'
    });
});​ 
```

地图包含默认背景位置作为数组中的第一个元素，动画位置作为第二个元素（当然，您可以随意更改它，这只是一个让您入门的想法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:26:49.693

```
 $('ul#range-drop li#product1')
        .css( {backgroundPosition: '-914px 0px'} )
        .mouseover(function(){
          if (!($('ul#range-drop li#product1 a').hasClass("current")) ) {
            $(this).css( {background: "none"} );
           animation($(this),"-12");
          }
       })
          .mouseout(function(){
      animation($(this),"0")
       });

function animation(obj,valu)
{       obj.parent().stop().animate({backgroundPosition : '-914px '+valu+'px'}, {duration:400, easing: 'easeInOutQuint'});
} 
```

# google-maps - 在 iOS 中实现 Google Places 自动完成 API

> ID：11082737
> 
> 赞同：8
> 
> 时间：2012-06-18T12:20:23.557
> 
> 标签：google-maps, ios4, google-api, google-places-api

这是我第一次使用 Google API。我在我的项目中实现 Google Places 自动完成 API 时遇到问题。我使用 Google 开发人员链接到 Google Places Autocomplete API 作为参考。

我能够正确实施[本](http://iphonebyradix.blogspot.com/2011/07/working-with-google-places-api.html)教程，但是，我无法在 iOS中[实施。](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)

有人可以指导我看这方面的一些教程吗？基本上我想做以下事情：

当用户在 UITextField 中输入文本时，

*   URL 字符串获取文本（我已成功完成），
*   填充过滤后的数组
*   数组的元素显示在下拉菜单类型中，就像上面的自动完成链接一样。

在这方面的任何帮助将不胜感激。在过去的一周里，我一直被这个问题困扰。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-10T20:27:13.790

查看[https://github.com/spoletto/SPGooglePlacesAutocomplete](https://github.com/spoletto/SPGooglePlacesAutocomplete)

它是 Google Places Autocomplete API 的 Objective-C 包装器。

祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-12T12:11:37.190

这是一个 Swift 版本:)

[https://github.com/watsonbox/ios_google_places_autocomplete](https://github.com/watsonbox/ios_google_places_autocomplete)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T20:45:10.920

还有另一种选择：[https ://github.com/TarasRoshko/TRAutocompleteView](https://github.com/TarasRoshko/TRAutocompleteView)

可以在单行代码中绑定到任何现有的 UITextField。支持定制，可配置。应该是 UITextFields 的好选择，自动处理调整大小和方向。我创建它是因为所有现有的解决方案都没有为文本字段提供简单的下拉列表，而是提供整个单独的视图，甚至是“占位符文本建议”，有时甚至无法实际自动完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-04T22:12:25.097

如果您正在寻找一种了解如何实现 Google 地方信息自动填充功能的好方法，我建议您查看以下示例：

[https://github.com/AdamBCo/GooglePlacesAutocomplete](https://github.com/AdamBCo/GooglePlacesAutocomplete)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-29T07:34:51.287

# 轻量级和更新的解决方案！

*   维护缓存
*   多个请求的会话取消
*   支持多种api

**Google Api 助手（自动完成）**

```
var input = GInput()
input.keyword = "San francisco"
GoogleApi.shared.callApi(input: input) { (response) in
    if let results = response.data as? [GApiResponse.Autocomplete], response.isValidFor(.autocomplete) {
        //Enjoy the Autocomplete Api
    } else { print(response.error ?? "ERROR") }
} 
```

**Google Api 助手（地点信息）**

```
var input = GInput()
input.keyword = "chijucwgqk6mqtkrukvhclvqfie"
GoogleApi.shared.callApi(.placeInformation,input: input) { (response) in
    if let place =  response.data as? GApiResponse.PlaceInfo, response.isValidFor(.placeInformation) {
        //Enjoy the Place Api
    } else { print(response.error ?? "ERROR") }
} 
```

**Google Api Helper（更多）**

[https://github.com/tryWabbit/Google-Api-Helper](https://github.com/tryWabbit/Google-Api-Helper)

# android - ImageView 在Android中使用按钮单击问题放大和缩小

> ID：11082740
> 
> 赞同：1
> 
> 时间：2012-06-18T12:20:48.687
> 
> 标签：android

我开发了一个应用程序，其中有一个 ImageView，在 ImageView 内我在 onDraw() 方法中用 Canvas 画了一个圆圈。第一次（当放大缩小未完成时）我能够单击圆圈并显示一条消息。但是，当我放大 ImageView 时，圆圈也会被放大并改变它的位置，当时当我单击圆圈时，不会显示消息。我知道当图像被放大时，圆圈也会被放大，但它的位置保持不变。因此它没有被点击。当图像放大时，我不知道如何检查并获取圆圈的新位置。有什么想法/建议吗？请回复。

谢谢。

# perl - Lingua::Translate perl 模块在执行时引发错误

> ID：11082744
> 
> 赞同：1
> 
> 时间：2012-06-18T12:21:00.480
> 
> 标签：perl

我们已经安装了 Lingua::Translate 并按如下方式使用它

```
#!/usr/bin/perl

use Lingua::Translate;
my $trans = Lingua::Translate->new
                 (back_end => 'Babelfish',
                   src => "en",
                  dest => "it",);
print $trans->translate("Hello world"); 
```

执行此操作会导致以下错误：

```
Translation back-end failed; Request timed out more than 2 times (Request 1:301 Moved Permanently; Request 2:301 Moved Permanently; Request 3:301 Moved Permanently; ) at /usr/local/share/perl/5.10.1/Lingua/Translate/Babelfish.pm line 206. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:32:02.393

我怀疑这与[http://babelfish.yahoo.com/](http://babelfish.yahoo.com/)现在重定向到[http://www.microsofttranslator.com/](http://www.microsofttranslator.com/)的事实有关。我不知道底层引擎是否发生了变化。我会检查 CPAN 以查看是否有 Lingua::Translate 的更新版本，或者检查 perldoc 以查看 URL 是否可在给定后端配置。

这以前发生过：请参阅[此错误报告](https://rt.cpan.org/Public/Bug/Display.html?id=36076)。

根据该补丁，您似乎可以添加 babelfish_uri 作为传递给 Lingua::Translate->new() 的哈希元素之一。这不在文档中，这只是一个有根据的猜测。

# iphone - 仅在 iPhone 上显示图像的指定区域

> ID：11082753
> 
> 赞同：2
> 
> 时间：2012-06-18T12:21:28.953
> 
> 标签：iphone, objective-c, ios, ios5, cgaffinetransform

![通过按顺序一个一个地显示所有的框，一个跳舞的女孩可以被动画化。](../Images/5b22b4b78abd25557c417f48e99de5fd.png)

我想从单个图像创建动画。通常通过在输出画布/框上显示图像的裁剪部分。我应该使用 CIcrop 还是任何其他技术和想法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:27:36.020

如果你不想使用 cocos2D 框架，你可以使用“翻书动画”之类的东西。

[这种方法在PJ Cabrera - 开始 iPhone 游戏开发 2010](http://www.apress.com/9781430225997)的**第 4 章**中有很好的描述：“She Shoots, She Hits, She Scores!”

您还可以在 Source Code/Downloads 选项卡中找到第 4 章的源代码

# service - Quartz.net 突然停止触发作业

> ID：11082754
> 
> 赞同：1
> 
> 时间：2012-06-18T12:21:31.387
> 
> 标签：service, scheduler, quartz.net, freeze

我已经实现了quartz.net 来在我的项目中安排任务。经过一些测试，我将它部署在 Prod env 上，它开始表现得很奇怪。由于此调度程序是 Windows 服务中的用户，因此我使用日志进行调试。每个作业都会通过 log4net 在日志文件中写入一些信息。工作 3-4 天后，服务停止在日志文件中写入任何信息。提示所有错误也写入日志文件，没有任何错误。手动重启后，一切都按原样开始，持续 3-4 天，然后再次发生。

这是调度程序的启动方式：

```
_jobsTimeTable = ComponentFactory.Resolve<TimeTable>();

// construct a scheduler factory
ISchedulerFactory schedFact = new StdSchedulerFactory();
// get a scheduler
IScheduler sched = schedFact.GetScheduler();

// Configuration of triggers and jobs
int i = 0;
string mainGroup = "mainGroup";
foreach (var job in _jobsTimeTable.TimeTable)
{
    var trigger = (ICronTrigger)TriggerBuilder.Create()
                                          .WithIdentity("trigger" + i, mainGroup)
                                          .WithCronSchedule(job.Value)
                                          .Build();

    var jobDetail = JobBuilder.Create(Type.GetType(job.Key)).StoreDurably(true)
                                .WithIdentity("job" + i, mainGroup).Build();

    var ft = sched.ScheduleJob(jobDetail, trigger);

    _log.InfoFormat("{0} has been scheduled to run at: {1} and repeat based on expression: {2}",
                    jobDetail.Key, ft.ToLocalTime(), trigger.CronExpressionString);

    i++;
}

sched.Start(); 
```

我真的很感激任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:23:47.467

从您的代码看来，您似乎没有对 IScheduler 的全局引用，这最终会导致垃圾收集。您应该在应用程序的整个生命周期内始终拥有一个静态引用，以防止清理。

# jquery - jQuery .on() 和 UpdatePanels

> ID：11082759
> 
> 赞同：1
> 
> 时间：2012-06-18T12:21:37.687
> 
> 标签：jquery, asp.net, ajax, updatepanel, webforms

我有一个 UpdatePanel，我用它来替换页面内的内容。在 UpdatePanel 之外，我有一些 jQuery 使用该`on()`函数来分配一些按钮点击。据我了解[，新的 jQuery.on() 语法](http://api.jquery.com/on/)旨在替换事件处理程序和旧`live()`功能。该`live()`函数应该监视页面的更改并将事件附加到添加到页面的任何元素，但是`on()`在我的测试页面中的函数不会发生这种情况。如果我在 UpdatePanel 更改后打开控制台并运行相同的功能，则事件处理程序可以正常工作。

这是我有 javascript 明智的：

```
$(function () {
    $('.results').on('click', function () {
        $(this).children('.explination').slideToggle();
    });
}); 
```

UpdatePanel 是一个简单的 UpdatePanel，其中包含一个 MultiView。

我知道我可以使用 Microsoft Ajax`PageRequestManager`来处理这个问题，但如果事件像我相信的那样绑定，它似乎应该是不必要的。我现在将使用它，但我很好奇我是否做错了，或者 jQuery 和 ASP.Net 是否不能一起工作。

我的一个理论是，无论出于何种原因，UpdatePanel 都无法触发 jQuery 用来捕获更改并再次触发 on 事件的 DOM 更新触发器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T12:29:57.383

诀窍是使用委托事件。引用 jQuery 文档：

*委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。*

要使用委托事件，请将选择器作为第二个参数传递，例如：

```
$('html').on('click', '.results', function () {
    $(this).children('.explination').slideToggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:30:08.087

我讨厌更新面板……呃。也许尝试这样的事情：

DOM：

```
<asp:UpdatePanel runat="server"><ContentTemplate>
  <MultiView>...</MultiView>
  <script>
    var prm = Sys.WebForms.PageRequestManager.getInstance(); 
    prm.add_endRequest(function() {
        ready();
    });
    </script>
 </ContentTemplate></asp:UpdatePanel> 
```

Jquery-ness：

```
 $(document).ready(function(){
        ready();
    });

    function ready(){
      $('.results').on('click', function () {
         $(this).children('.explination').slideToggle();
      });
    } 
```

# .net - 使用 SmtpClient 和 IDisposable

> ID：11082760
> 
> 赞同：2
> 
> 时间：2012-06-18T12:21:40.183
> 
> 标签：.net, idisposable, smtpclient

我注意到大多数使用 .NET 的 SmtpClient 类的示例代码不会 Dispose 创建的对象或将其包装在 using 块中。（例如[http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)） SmtpClient 的处置是可选的还是不是很重要，或者这些示例是否会导致我们走错路？注意：在上面提供的 MSDN 示例中，已释放 MailMessage，但未释放 SmtpClient 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T00:19:58.670

网上很多例子没有显示正确的处理代码的原因是[SmtpClient 直到 .NET 4 才实现 IDisposable](http://leedumond.com/blog/new-in-net-4-dont-forget-to-dispose-your-smtpclient-instances/)。因此，这些示例可能基于以前的框架，或者由不熟悉新功能的人编写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:25:26.623

你必须处理它。

在他们使用 SendAsync() 的示例中，这就是他们不使用“using”关键字的原因 - SendAsync() 立即返回，您可能会尝试处置当前正在使用的对象。但是，最好在所有异步方法都完成后处理客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:24:03.007

msdn 示例省略了类似的内容，因为重点是在一篇重点小的文章中清楚地展示一个概念，而不是编写一个正确的健壮生产应用程序。

# objective-c - NSMutableArray 未在 initWithNibName 方法中初始化

> ID：11082762
> 
> 赞同：0
> 
> 时间：2012-06-18T12:21:43.213
> 
> 标签：objective-c, nsmutablearray

我正在创建简单的问答 iPhone 应用程序。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    // Call the init method implemented by the superclass
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Create two arrays and make the pointers point to them
        questions = [[NSMutableArray alloc] init];
        answers = [[NSMutableArray alloc] init];
        // Add questions and answers to the arrays
        [questions addObject:@"What is 7 + 7?"];
        [answers addObject:@"14"];
        [questions addObject:@"What is the capital of Vermont?"];
        [answers addObject:@"Montpelier"];
        [questions addObject:@"From what is cognac made?"];
        [answers addObject:@"Grapes"];
    } 
```

数组问题和答案没有被填满并显示为零。可能是什么问题？

数组访问方法：

```
- (IBAction)showQuestion:(id)sender
{
// Step to the next question
currentQuestionIndex++;
// Am I past the last question?
if (currentQuestionIndex == [questions count]) {
    // Go back to the first question
    currentQuestionIndex = 0;
}

// Get the string at that index in the questions array
NSString *question = [questions objectAtIndex:currentQuestionIndex]; **<<- question is nil**

[questionField setText:question];

// Clear the answer field
[answerField setText:@"???"];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:59:35.837

您的答案是通过以下方式启动您的 NSMUtableArrays：

```
questions = [[NSMutableArray alloc] initWithCapacity:1]; 
```

**更新：** 如果您的代码没有达到 IF 条件，这是一个非常奇怪的情况。我建议您删除当前的 XIB 并重新制作一个新的，从头开始。有时，通过重新创建 XIB 可以解决此类奇怪的错误。

# entity-framework - 为什么导航属性必须公开才能创建代理？

> ID：11082766
> 
> 赞同：3
> 
> 时间：2012-06-18T12:21:54.827
> 
> 标签：entity-framework, poco, proxy-classes

在[http://msdn.microsoft.com/en-us/library/dd468057.aspx](http://msdn.microsoft.com/en-us/library/dd468057.aspx)我读到我想要更改跟踪代理的所有导航属性都必须是`public`和`virtual`. 据我了解，CLR 动态创建我的 POCO 的子类，并重新实现属性以提供请求的行为。

为此，我理解该属性需要是`virtual`，并且它应该具有`protected`或更高的可访问性。但是，如果我想在程序集中使用这些方便，但又不想暴露它们，我不希望它们是`public`. 这让我想到了两个问题。

1.  （为了我对正在发生的事情的理解）为什么运行时需要属性`public`而不是`protected`or `internal`？

2.  （针对我的实际情况）是否有任何解决方法可以隐藏导航属性，但仍然具有更改跟踪行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T13:01:20.527

属性必须是公共的（和虚拟的）或受保护的（和虚拟的）代理才能工作。

代理未在您的程序集中预先定义，因此内部将不起作用。

由于明显的原因（代理从您的类继承），私有将不起作用。

# sql - 使用外键将数据从一个表复制到另一个表

> ID：11082767
> 
> 赞同：0
> 
> 时间：2012-06-18T12:21:56.057
> 
> 标签：sql

我面临一个关于 sql 查询的问题。

我有一个表结构

## 表_A

```
A_id : 10,20,30,40 
A_name: a,b,c,d  
B_id: null,null,null,null 
```

## 表_B

```
B_id: 1,2,3,4  
B_name:n1,n2,n3,n4 
A_id: 10,20,30 
```

现在**我需要将 B_id 从 TABLE_A 复制到 TABLE_B 的 B_id，其中 TABLE_A 的 A_id 与 TABLE_B 的 A_id 相同**

然后表格看起来像

## 表_A

```
A_id : 10,20,30,40  
A_name: a,b,c,d   
B_id: 1,2,3,null 
```

我试过这个：

```
UPDATE TABLE_A 
SET B_id = a.B_id
from TABLE_A a 
WHERE TABLE_A.A_id = a.A_id 
```

但它不起作用，错误是`SQLCODE=-104, SQLSTATE=42601`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:26:10.650

你试过这个

```
UPDATE TABLE_A SET B_id = b.B_id 
from TABLE_B b 
WHERE TABLE_A.A_id = b.A_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:42:58.833

```
update TABLE_A A,TABLE_b B set A.b_id = B.b_id where A.a_id = B.a_id; 
```

如果您正在处理`mysql`. 不知道其他数据库是否会接受该语法。

# gridview - iOS Spring board 类似 Grid View，在 iOS 5 中具有拖动和移动项目 + 删除选项

> ID：11082768
> 
> 赞同：2
> 
> 时间：2012-06-18T12:22:03.990
> 
> 标签：gridview, ios5, draggable, long-press

我想在我的应用程序中实现类似 iOS 弹簧板的功能。我想以网格方式显示图像。图像可以拖动，以便我可以更改图像的位置。长按将使图像动画化，与从跳板删除应用程序时相同。有人知道任何可用的控制吗？我看到了 GMGridView。如果 GMGridView 支持上述所有功能，是否有任何替代方案？任何形式的帮助都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-07T05:31:40.620

您可以使用 GMGridView 但您需要对其进行修改以在移动单元格时显示删除图标。

1.  导入 GMGridViewCell+Extended.h

2.  在 GMGridView 的委托方法“确实开始移动单元格”中，添加以下行：

    [单元组编辑：是动画：是]；

注意：-您可能需要为 GMGridView 的每个单元格调用此行。

# asp.net-mvc - 编辑器模板中的 Html.DropDownListFor 未设置选定值

> ID：11082771
> 
> 赞同：5
> 
> 时间：2012-06-18T12:22:21.150
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在编辑器模板中有一个 Html.DropDownListFor ，它确实设置了一个选定的值。 **如果我用部分视图替换编辑器模板（将编辑器模板中的 HTML 复制粘贴到部分视图）它可以工作。**

示例代码

模型：

```
public class MainItemViewModel
{
    public int MainItemId { get; set; }
    public ItemViewModel ItemViewModel { get; set; }
}

public class ItemViewModel
{
    public int ItemId { get; set; }
    public string Text { get; set; }
    public IEnumerable<SelectListItem> ItemSelectList { get; set; }
} 
```

控制器：

```
public class DropDownController : Controller
{
    //
    // GET: /DropDown/

    public ActionResult Index()
    {
        var mainItemViewmodel = new MainItemViewModel();
        mainItemViewmodel.MainItemId = 2;
        mainItemViewmodel.ItemViewModel = new ItemViewModel();
        mainItemViewmodel.ItemViewModel.ItemId = 2;
        mainItemViewmodel.ItemViewModel.Text = "bla5";
        List<SelectListItem> someItems =  new List<SelectListItem>(){new SelectListItem(){Value = "1",Text = "Test1"},new SelectListItem(){Value = "2",Text = "Test2"}};
        mainItemViewmodel.ItemViewModel.ItemSelectList = someItems;
        return View(mainItemViewmodel);
    }

    [HttpPost]
    public ActionResult Index(MainItemViewModel mainItemViewModel)
    {
        return RedirectToAction("Index");
    }

} 
```

下拉\索引.chtml

```
@model MainItemViewModel

@using (Html.BeginForm())
{
 <br/>
 @Html.TextBoxFor(model => model.MainItemId)
 <br/>
 @Html.EditorFor(model => model.ItemViewModel)

 <input name="submit" type="submit" value="submit"/>
} 
```

DropDown\EditorTemplates\ItemViewModel.chtml

```
 @model ItemViewModel
   @{
   @Html.DropDownListFor(model => model.ItemId, Model.ItemSelectList, "Select Item");
   <br/>

    @Html.TextBoxFor(model => model.Text);
   } 
```

DropDownListFor(model => model.ItemId, Model.ItemSelectList, "Select Item"); 不选择 2.我以为它实际上应该为您**自动选择**

我一直在做同样的事情，**除了**在我的所有下拉列表中有另一个视图模型并且它运行良好。

编辑器模板和下拉列表是否有问题，我已经查看了这个问题的大多数答案，但我没有看到任何有效的结论性答案我已经查看了这些解决方案

[将选定值绑定到编辑器模板内的 DropDownListFor 的问题](https://stackoverflow.com/questions/3979191/problem-binding-selected-value-to-dropdownlistfor-inside-editor-template)

[DropDownListFor - 不选择“选定”值](https://stackoverflow.com/questions/9832905/dropdownlistfor-does-not-select-selected-value)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:34:46.557

我想你有一个`ItemId`在你的`ItemViewModel`

然后确保在将 ViewModel 发送到 View 之前在 Controller 中设置它的值：

```
public ActionResult Edit()
{
   var viewModel = new MainViewModel
                              {
                                  ItemViewModel = new ItemViewModel{ ItemId = 7 }
                              };
   return View(viewModel);
} 
```

***如果您想要更多选择，请在[此处查看我的答案](https://stackoverflow.com/a/10967822/105445)***

# mysql - 我总是在 MySql 查询中遇到错误：错误 1054：字段列表中的未知列“列名”

> ID：11082772
> 
> 赞同：1
> 
> 时间：2012-06-18T12:22:21.713
> 
> 标签：mysql, sql, database

这是我试图执行的 MySQL 查询。它不断失败并出现错误：字段列表中的未知列“staff_tbl.mainrank”。这怎么可能？

```
DROP TEMPORARY TABLE IF EXISTS `staff_tbl`;
CREATE TEMPORARY TABLE staff_tbl(childrank TEXT, mainrank TEXT);

INSERT INTO staff_tbl
SELECT permissions_inheritance.child, permissions_inheritance.parent 
FROM permissions_inheritance;

SELECT      authme.username, permissions_inheritance.child,     
permissions_inheritance.parent, staff_tbl.mainrank
FROM        authme 
INNER JOIN  permissions_inheritance ON authme.username = permissions_inheritance.child
INNER JOIN  staff_tbl alies2 ON staff_tbl.mainrank = permissions_inheritance.parent;

DROP TABLE `staff_tbl`; 
```

如果您能帮助我，我将不胜感激。我把我的每一根头发都拔了出来。所以你们是我最后的希望。我还是个新手:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:31:07.087

在最后`SELECT`你有最后一个加入错误。你加入`staff_tbl`并给它一个别名 ( `alies2`)。您必须在后面的语句中使用该别名（`alies2.mainrank = permissions_inheritance.parent`而不是`staff_tbl.mainrank = permissions_inheritance.parent`），但您没有。

尝试`SELECT`像这样写你的最后一个：

```
SELECT      a.username, p.child, p.parent, s.mainrank
FROM        authme a
INNER JOIN  permissions_inheritance p ON a.username = p.child
INNER JOIN  staff_tbl s ON s.mainrank = p.parent; 
```

我在上面解决了这个问题。我还为每个表设置了一个别名，以使查询更短，因此更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:44:05.103

**如果其中一个是临时**的，MySQL 允许创建两个具有相同名称的表。

`staff_tbl`在查询中，您尝试加入临时表，但 MySQL 加入了另一个不包含`mainrank`字段的非临时表。

所以，首先删除这个非临时表。

# java - 只允许父工厂方法实例化子类

> ID：11082776
> 
> 赞同：2
> 
> 时间：2012-06-18T12:22:36.437
> 
> 标签：java, inheritance

我毫不怀疑这个问题已经在这里被问过十几次了，但我就是找不到满意的答案。

我有一个类族，我只想通过这样的静态方法由抽象父类实例化（我在这里可能有错别字，我正在输入但没有尝试编译）。

```
public abstract class Papa {
    public static Papa newInstance() {
        String strClass = Papa.figureOutTheNameOfChildClassToInstantiate();
        Papa papa = (Papa) Class.forName(strClass).newInstance();
        return papa;
    }
    public abstract void doSomething();
    ...
}
public class Child extends Papa {
    public void doSomething() { /* Do something */ }
} 
```

这或多或少是我现在所拥有的。我想做的是确保 Child 只能由工厂方法 Papa.newInstance() 实例化。我试图通过将 Child 的无参数构造函数设为私有来做到这一点，但是 Papa 无法实例化它。

所以，我的问题是，如何确保子实例仅由工厂方法 Papa.newInstance() 创建？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:30:10.050

如果您绝对肯定地想要强制执行此操作，请提供`Papa`一个受保护的构造函数，该构造函数采用 type 参数`Xyzzy`。在`Xyzzy`中创建一个受保护的内部类`Papa`。给它一个私有构造函数。现在，只能`Papa`创建`Xyzzy`. 由于您需要一个实例`Xyzzy`来调用`Papa`的构造函数，并且由于 的​​子类`Papa`必须从其构造函数中调用其构造函数，因此您需要一个实例`Xyzzy`来调用 的任何子类的构造函数`Papa`。因此，只能`Papa`调用其子类的构造函数。虽然`Xyzzy`什么都不做。

子类可能会泄漏它们的`Xyzzy`实例，这将允许其他代码调用子类构造函数。但是您也可以通过`Xyzzy`一次性使用来限制它，并且只能在单个静态工厂调用的上下文中进行。

但老实说，我不会打扰！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T12:31:59.957

几个可能的选择：

1.  使用子类构造函数的默认可见性并将它们放在与父类相同的包中。这样做的缺点是这些类可以由同一包中的*任何其他类实例化，包括任何“兄弟”类。*

2.  将所有子类作为父类中的[嵌套](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)类。将它们标记为`private static`将使它们仅对父类可见。不幸的是，这也意味着*所有*类的代码都在同一个文件中......

# jquery - 移动窗口滚动

> ID：11082780
> 
> 赞同：0
> 
> 时间：2012-06-18T12:22:48.903
> 
> 标签：jquery, scrollbar

我有一个固定`45px`的高度条，一旦你经过某个点，它就会可见。

问题是我也有页面间链接（例如评论 ID），所以每当我链接到评论时，我都无法完全查看它，因为固定栏停留在它的顶部。

我有这个代码：

```
 if(window.location.hash) {

    } 
```

我想在其中包含将滚动条`45px`从当前位置向上移动的代码，因此固定条不会覆盖。

我试过了`$(window).scrollTop();`，但它什么也没动。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:25:26.937

你可以这样做：

```
$('html, body').animate({scrollTop: $(window.location.hash).offset().top - 45}); 
```

# iphone - 如何使用两个 UIbutton 自定义 UIview

> ID：11082785
> 
> 赞同：0
> 
> 时间：2012-06-18T12:23:06.950
> 
> 标签：iphone, ipad

如何`UIview`用两个自定义一个`UIbutton`用户可以将参数传递给自定义类的地方

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.view setBackgroundColor:[UIColor whiteColor]];
    CanvasView *newCanvas = [[CanvasView alloc] initWithFrame:CGRectMake(0.0, 164.0, self.view.frame.size.width, self.view.frame.size.height-350)];
    self.canvas = newCanvas;
    [self.view addSubview:canvas];

} 
```

我只能自定义`UIView`！如何将两者添加`UIButton`到视图中。

当我分配自定义类时，它也`UIView`需要可见`UIButtons`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:30:36.247

您可以使用以下代码创建动态按钮

```
CanvasView *newCanvas = [[CanvasView alloc] initWithFrame:CGRectMake(0.0, 164.0, self.view.frame.size.width, self.view.frame.size.height-350)];
self.canvas = newCanvas;
[self.view addSubview:newCanvas];

UIButton *but=[UIButton buttonWithType:UIButtonTypeRoundedRect];
but.frame= CGRectMake(200, 15, 15, 15);
[but setTitle:@"Ok" forState:UIControlStateNormal];
[but addTarget:self action:@selector(buttonAction) forControlEvents:UIControlEventTouchUpInside];
[newCanvas addSubview:but]; 
```

您可以使用 insertSubview:atIndex 方法

```
 [newCanvas insertSubview:myButton atIndex:0]; 
```

希望它可以帮助你。

# c# - 如何在模板控件中检查 isPostback？

> ID：11082792
> 
> 赞同：1
> 
> 时间：2012-06-18T12:23:31.180
> 
> 标签：c#, asp.net, postback, template-control

我在 Web 应用程序中使用模板控件。目前，所有 OnLoad 都在发生，即使页面是回发（可以理解）。如何访问此方法中的 isPostback 属性以运行必要的检查，就像它是页面代码隐藏一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:25:27.557

您可以将代码块添加到您的标记中：

```
<% if (Page.IsPostBack) { %>
  <div> markup </div>
<% } %> 
```

当然，我假设您正在询问添加`IsPostBack`签入标记。我想你也可能意味着一个`CustomControl`. 在这种情况下，您仍然可以`Page.IsPostBack`在`CustomControl`课堂上使用。

```
protected override void OnLoad(EventArgs args, object source)
{
  if (Page.IsPostBack)
  {
     // stuff that should only happen during POST
  }
} 
```

# android - Match_parent 布局内的高度与 wrap_content 高度

> ID：11082793
> 
> 赞同：4
> 
> 时间：2012-06-18T12:23:36.923
> 
> 标签：android, android-layout

我试图用右侧的阴影绘制覆盖我的整个列表项。

问题是我包裹可绘制对象的布局没有恒定的高度。我厌倦了将我的可绘制对象设置为对齐父顶部和对齐父底部，但它仍然没有拉伸其父布局的整个高度。

看右边的阴影（我提供了一个最小高度属性使其可见，第四个列表项大于最小视图，并且阴影不拉伸）

![在此处输入图像描述](../Images/0cc0aec1ddaf3b9848d98cda85a173f7.png)

来源：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <include layout="@layout/list_item_header" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/img_news_thumb"
            android:layout_width="@dimen/listview_one_row"
            android:layout_height="@dimen/listview_one_row"
            android:scaleType="centerCrop"
            android:src="@drawable/default_news_thumb" />

        <TextView
            android:id="@+id/txt_news_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_alignWithParentIfMissing="true"
            android:layout_marginLeft="@dimen/space_m"
            android:layout_marginTop="@dimen/space_s"
            android:layout_toRightOf="@+id/img_news_thumb"
            android:ellipsize="marquee"
            android:paddingRight="@dimen/space_m"
            android:singleLine="false"
            android:text="Title"
            android:textSize="14sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/txt_news_date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignWithParentIfMissing="true"
            android:layout_below="@+id/txt_news_title"
            android:layout_marginBottom="0dp"
            android:layout_marginLeft="@dimen/space_m"
            android:layout_marginTop="@dimen/space_s"
            android:layout_toRightOf="@+id/img_news_thumb"
            android:ellipsize="end"
            android:paddingRight="@dimen/space_m"
            android:singleLine="true"
            android:text="Date"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@color/font_light" />

        **<ImageView
            android:id="@+id/img_news_list_shadow"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_alignTop="@+id/img_news_thumb"
            android:minHeight="@dimen/listview_one_row"
            android:scaleType="fitXY"
            android:src="@drawable/list_shadow_r" />**

        <ImageView
            android:id="@+id/img_selected_arrow"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:scaleType="fitXY"
            android:src="@drawable/list_item_arrow"
            android:visibility="gone" />
    </RelativeLayout>

    <include layout="@layout/list_item_devider" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:06:53.470

发现这是不可能的，因为在这种情况下，父布局（即线性布局）在列表视图中使用时总是包装内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T11:53:50.090

由于最近的调查，我发现答案比这简单得多。

当膨胀布局时，我们应该使用这个：

```
View rowView = inflater.inflate(R.layout.row_layout, parent, false); 
```

而不是常用的错误：

```
View rowView = inflater.inflate(R.layout.row_layout, null); 
```

# matlab - 没有 for 循环的查找和替换

> ID：11082795
> 
> 赞同：0
> 
> 时间：2012-06-18T12:23:38.963
> 
> 标签：matlab, for-loop, replace

我在 MATLAB 中有一个大型二维数组，它会随着时间的推移而更新。（类似于*A* = ( *i* , *j* , *k* )，其中*k*是时间）。

*我想在时间k*找到所有大于阈值的元素，并在时间*k* - 1替换它们的值。
没有`for`循环是否可能？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:57:06.147

尝试这个：

```
A = zeros(2,2,3);
A(1,1,2) = -1;
A(1,3,2) = 10;
A(3,3,2) = 15;
%%
k = 2; 
thr = 0; 

[row,col,v] = ind2sub(size(A),find(A >thr))
A(row,col,k) = A(row,col,k-1)

A(:,:, k)%display 
```

# c# - 合并 LINQ 组？

> ID：11082796
> 
> 赞同：0
> 
> 时间：2012-06-18T12:23:39.710
> 
> 标签：c#, linq, group-by

假设我有这些域对象：

```
 DataPoint  
    =========  
    public int Id {get;set;}  
    public int TypeId  {get;set;}  
    public string Name  {get;set;}  

    Connector
    =========  
    public DataPoint DataPoint1 {get;set;}  
    public int DataPoint1Id {get;set;}
    public DataPoint DataPoint2 {get;set;}   
    public int DataPoint2Id {get;set;}
    public string Name {get;set;} 
    public int TypeId {get;set;} 
```

我有一个`List<Connector>`：

```
 List<Connector> _Connectors = new List<Connector>()
    {
     new Connector(){Name = "a", DataPoint1Id = 1, DataPoint2Id = 2},...
     new Connector(){Name = "b", DataPoint1Id = 1, DataPoint2Id = 2},... 
     new Connector(){Name = "c", DataPoint1Id = 1, DataPoint2Id = 2},...  
     new Connector(){Name = "d", DataPoint1Id = 2, DataPoint2Id = 1},...
     new Connector(){Name = "e", DataPoint1Id = 2, DataPoint2Id = 1}...
    } 
```

我正在使用 LINQ 进行分组，如下所示：

```
 var groups = (from C in _Connectors
                  group C by new { C.DataPoint1Id, C.DataPoint2Id }
                  into cGroup                                             
                  select new {cGroup.Key.DataPoint1Id, cGroup.Key.DataPoint2Id,      
    cGroup.ToList(), cGroup.Count()}); 
```

var groups 持有：

```
 DataPoint1Id = 1, DataPoint2Id = 2, list of connectors -"a","b","c", count = 3
    DataPoint1Id = 2, DataPoint2Id = 1, list of connectors - "d","e", count = 2 
```

我想将这 2 个对象合并为 1 ：

```
 DataPoint1Id = 1, DataPoint2Id = 2, list of connectors - "a","b","c","d","e", count = 5 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:37:14.837

怎么样

```
var groups =
    from C in _Connectors
    group C by new
        {
            Min = (int)Math.Min(C.DataPoint1Id, C.DataPoint2Id),
            Max = (int)Math.Max(C.DataPoint1Id, C.DataPoint2Id)
        }
    into cGroup
    select new
        {
            DataPoint1Id = cGroup.Key.Min,
            DataPoint2Id = cGroup.Key.Max,
            Connectors = cGroup.ToList(),
            Count = cGroup.Count()
        }; 
```

# c# - 未调用 Web 服务

> ID：11082799
> 
> 赞同：0
> 
> 时间：2012-06-18T12:23:54.567
> 
> 标签：c#, asp.net, web-services, jquery

我正在开发一个 ASP.NET Web 应用程序。

我想使用 Jquery ajax 来调用 Web 服务。Web 服务将返回一个字符串。

这是我的网络服务：

```
[WebService(Namespace = "http://localhost/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
[System.Web.Script.Services.ScriptService]
public class MyWebService : System.Web.Services.WebService
{

    [WebMethod]
    public string GetStringForPerson(string Personname, int StartYear, int EndYear)
    {
        string S = "Hello" + Personname + " You where born between " + StartYear + " and " + EndYear;
        return S;
    }
} 
```

以及将调用它的 Ajax 函数：

```
function GetStringForPerson(Name) {
        $.ajax({
            type: "POST",
            url: "Service/MyWebService.asmx/GetStringForPerson",
            dataType: "json",
            data: "{'Personname':Name, 'StartYear':'2001', 'EndYear':'2005'}",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                alert(data);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus);
                alert(XMLHttpRequest.status);
                alert(errorThrown);
            }
        });
    } 
```

但是当我调用它时，我收到一个错误 500，“内部服务器错误”

我在 web 方法中放置了一个断点，但它没有到达它。

可能是什么问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:35:16.443

我看到的一个错误是`Name`变量，它不是作为字符串发送，也不是作为变量发送。所以将此行更改为：

```
data: "{'Personname':'" + Name + "', 'StartYear':'2001', 'EndYear':'2005'}", 
```

# c# - 在 C#/.NET 中检测图像 URL

> ID：11082804
> 
> 赞同：12
> 
> 时间：2012-06-18T12:24:07.673
> 
> 标签：c#, .net, url, c#-4.0

有没有办法可以检测图像 URL，例如：

```
http://mysite.com/image.jpg 
```

但也有其他格式？我正在使用带有 .NET 4.0 的 C#。

就像是

```
bool isImageUrl(string URL){
} 
```

**编辑**我的意思是如果 URL 指向图像。例如，网址

```
http://mysite.com/image.jpg 
```

**是**一个有效的图像，但

```
http://mysite.com/image 
```

不是。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-18T12:39:29.877

可以用`HEAD`Http的方法确定（不用下载整张图）

```
bool IsImageUrl(string URL)
{
    var req = (HttpWebRequest)HttpWebRequest.Create(URL);
    req.Method = "HEAD";
    using (var resp = req.GetResponse())
    {
        return resp.ContentType.ToLower(CultureInfo.InvariantCulture)
                   .StartsWith("image/");
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-18T12:26:42.117

您可以向 URL 发送 HTTP 请求（使用`HttpWebRequest`），并检查返回的是否`ContentType`以`image/`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T12:30:48.880

您当然可以简单地检查 URL 是否以已知的图像文件扩展名结尾。但是，更安全的方法是实际下载资源并检查您获得的内容是否实际上是图像：

```
public static bool IsUrlImage(string url)
{
    try
    {
        var request = WebRequest.Create(url);
        request.Timeout = 5000;
        using (var response = request.GetResponse())
        {
            using (var responseStream = response.GetResponseStream())
            {
                if (!response.ContentType.Contains("text/html"))
                {
                    using (var br = new BinaryReader(responseStream))
                    {
                        // e.g. test for a JPEG header here
                        var soi = br.ReadUInt16();  // Start of Image (SOI) marker (FFD8)
                        var jfif = br.ReadUInt16(); // JFIF marker (FFE0)
                        return soi == 0xd8ff && jfif == 0xe0ff;
                    }
                }
            }
        }
    }
    catch (WebException ex)
    {
        Trace.WriteLine(ex);
        throw;
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-18T12:27:03.693

您可以使用 .EndsWith() 为您定义的每个字符串检查字符串。

如果您想知道该 URL 上的对象是否*实际上*是图像，则必须自己执行 Web 请求并检查内容类型 HTTP 标头。

然而，即使这样也可能不准确，具体取决于服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-09T01:07:40.980

一个选项是使用 System.Net.Http 中的 HttpClient 而不是

```
HttpClient client = new HttpClient();

HttpResponseMessage res = await client.GetAsync("https://picsum.photos/200/300");

bool IsTypeImage = res.ToString().Contains("Content-Type: image"); 
```

# c++ - Qt 我可以以编程方式设置资源吗？

> ID：11082808
> 
> 赞同：2
> 
> 时间：2012-06-18T12:24:20.633
> 
> 标签：c++, qt

在 Qt c++ 中，有没有办法以编程方式设置资源？
我想让用户设置将加载到应用程序（QtWebKit）中的 exe 图标和他的 html 文件。
因此它将嵌入到当前使用资源集合文件 (.qrc) 编译的应用程序中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T13:04:41.063

如果我理解正确，Qt 资源系统中的文件**不能**在应用程序运行期间更改，因此不能“以编程方式”更改。

但是，如果这是您想要的，您可以通过编程方式（在构建过程中使用脚本）生成 .qrc 文件。但我想这*不是*你想要的，因为你在谈论*user*，他很可能不想重新编译你的应用程序来使用它。

如果您想让用户在几个图标之间进行选择（例如；但这可能适用于其他自定义）并让他们选择自定义文件。您可以从 Qt 资源和真实文件系统中抽象出来，方法是首先扫描应用程序的子文件夹中的图标，然后扫描资源（只需`:/`在本地版本不存在后添加到路径中）。因此，用户可以使用您使用此方法的本地文件“覆盖”所有资源文件。

作为另一个例子，我成功地将这种方法应用于语言文件。有`:/lang/`一些默认语言的文件，但用户也可以将文件放入`<appdir>/lang/`并使用它们。请记住，如果用户还可以在可用文件之间进行选择，您可能需要在运行时在目录中搜索合适的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T22:54:52.960

Windows 不会“让”用户设置“exe”图标——不是没有额外的工具或代码。当然，您可以自由地使用 Windows API 来修改可执行文件，但这不能保证有效。如果应用程序以安全方式安装，它将在没有管理权限的情况下运行，并且无法修改其图标。基本上：这是一个愚蠢的想法。不要这样做。

您当然可以使用以下代码在运行时更改应用程序的图标：

```
void setIcon(QWidget* widget, QPixmap* pixmap);
{
   WId wid = widget->winId();
   HINSTANCE inst = (HINSTANCE)qWinAppInst();
   QPixmap large = pixmap->scaled(48, 48, Qt::KeepAspectRatioByExpanding, Qt::SmoothTransformation);
   SendMessage(wid, WM_SETICON, ICON_BIG, (LPARAM)large->toWinHICON());
   QPixmap small = pixmap->scaled(24, 24, Qt::KeepAspectRatioByExpanding, Qt::SmoothTransformation);
   SendMessage(wid, WM_SETICON, ICON_SMALL, (LPARAM)small->toWinHICON());
} 
```

# cakephp - Cakephp ajax 更新验证 w3c

> ID：11082809
> 
> 赞同：0
> 
> 时间：2012-06-18T12:24:23.750
> 
> 标签：cakephp, cakephp-1.3, w3c, cakephp-ajaxhelper

有人可以帮我验证这个错误吗？

我[网站上的](http://test2.oknihach.eu)[验证器 w3C](http://validator.w3.org/check?uri=http://test2.oknihach.eu/&charset=%28detect%20automatically%29&doctype=Inline&group=0&user-agent=W3C_Validator/1.3)

或者知道如何在 Jdialog 中显示内容？对不起我的英语不好 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:53:52.283

这是因为旧版本的 Cake 将这些额外选项视为链接上的属性。这已在不久前修复，因此请考虑升级您的 Cake 版本以将其删除并允许验证通过。

# iphone - 缺少预期的标识符

> ID：11082810
> 
> 赞同：0
> 
> 时间：2012-06-18T12:24:28.667
> 
> 标签：iphone

`expected identifier`在这两个语句下方收到红色消息

```
}  else if ([playpauseButton.state == UIControlStateSelected])

} else if ([playpauseButton.state == UIControlStateNormal]) 
```

我没有在下面的播放/暂停/恢复操作中找到我缺少标识符的地方

```
if( playpauseButton.state == UIControlStateNormal ){
    [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateSelected];

[audioPlayer play];
self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                              target:self
                                            selector:@selector(displayviewsAction:)
                                            userInfo:nil
                                             repeats:NO];

}  else if ([playpauseButton.state == UIControlStateSelected])
{
[sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateNormal];
[audioPlayer pause];
[self pauseTimer];
} else if ([playpauseButton.state == UIControlStateNormal])
{
[sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateSelected];
[audioPlayer play];
[self resumeTimer];}} 
```

我这样编程是因为我希望在按下播放时它应该播放音频文件并开始一个接一个`NSTimer`地加载`view controllers`。按下暂停时，它应该暂停音频文件`NSTimer`加以避免进一步加载`view controllers`一个又一个，最后暂停恢复以从同一点播放音频文件，它应该恢复计时器以`view controllers`从该点开始一个接一个地加载。

如果有人可以帮助我解决这个问题。

感谢帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:33:10.113

不要在条件测试周围加上方括号。语法只是`else if (playpauseButton.state == UIControlStateSelected)`.

# java - KSOAP android中的ConnectionTimeout

> ID：11082813
> 
> 赞同：1
> 
> 时间：2012-06-18T12:24:50.350
> 
> 标签：java, android

我正在开发一个应用程序，在其中我使用 KSOAP2 库 2.5 来解析 wsdl 基础 webservices。现在我需要在代码中设置 ConnectionTimeOut，所以我参考了一些站点并获得了这样的解决方案......

```
HttpTransportSE androidHttpTransport = new HttpTransportSE(
                    URL,0); 
```

并设置 catch Exception ...

```
catch (InterruptedIOException  e) {
            Log.e(TAG, "Connection Time Out "+e);
        } 
```

但它不会让我在常见情况下执行此代码超时......所以请帮我解决这个问题。

# android - Android应用程序中的多个视频

> ID：11082817
> 
> 赞同：1
> 
> 时间：2012-06-18T12:25:00.603
> 
> 标签：android

我正在寻找在我的 android 应用程序中播放多个 rtsp 流的方法。当我尝试创建多个视频视图时，RTSP-streams 不显示（它只显示一个流，其他流停止）。有人可以帮我吗？提前致谢。

# spring-mvc - spring mvc 获取所有请求映射

> ID：11082818
> 
> 赞同：39
> 
> 时间：2012-06-18T12:25:02.877
> 
> 标签：spring-mvc

我们有一个相当大的 spring mvc Web 应用程序，其中控制器使用 @Controller 注释，方法使用 @RequestMapping 注释。

我现在想创建一个测试来检查每个可能的 url 并检查返回值是否为 200。

是否有可能从 spring 获取所有映射？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-18T13:02:40.023

我在这里复制我[以前的答案](https://stackoverflow.com/questions/10898056/how-to-find-all-controllers-in-spring-mvc/10899118#10899118)之一：

如果您使用的是 Spring 3.1，则此 handlerMapping 组件是 RequestMappingHandlerMapping 的一个实例，您可以查询它以找到 handlerMappedMethods 和相关的控制器，沿着这些线（如果您使用的是旧版本的 Spring，您应该能够使用类似的方法）：

```
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping;

@Controller
public class EndpointDocController {
 private final RequestMappingHandlerMapping handlerMapping;

 @Autowired
 public EndpointDocController(RequestMappingHandlerMapping handlerMapping) {
  this.handlerMapping = handlerMapping;
 }

 @RequestMapping(value="/endpointdoc", method=RequestMethod.GET)
 public void show(Model model) {
  model.addAttribute("handlerMethods", this.handlerMapping.getHandlerMethods());
 } 
} 
```

我已在此网址[http://biju-allandsundry.blogspot.com/2012/03/endpoint-documentation-controller-for.html上提供了更多详细信息](http://biju-allandsundry.blogspot.com/2012/03/endpoint-documentation-controller-for.html)

这是基于 Spring Source 的 Rossen Stoyanchev 对 Spring 3.1 的介绍。

# android - 无法在 Android ICS 上进行蓝牙连接

> ID：11082819
> 
> 赞同：6
> 
> 时间：2012-06-18T12:25:15.860
> 
> 标签：android, bluetooth, galaxy-tab

我正在编写一个将字节码从平板电脑发送到 µ 控制器的应用程序。在联想 A1 (Androi 2.3) 和三星 Galaxy Tab 7 Plus N (Android 3.2) 上一切正常。现在我遇到了新的三星 Galaxy Tab 2 (Android 4.0) 的问题。

我可以与蓝牙天线配对（它连接到 µ 控制器并通过串行协议进行通信）。当我启动应用程序时，我再次被要求输入密码并进行配对。输入配对密码后，我的主布局可见，但未建立连接。

eclipse 中的 LogCat 告诉我：

```
06-19 16:00:20.656: V/BluetoothSocket.cpp(3189): availableNative
06-19 16:00:20.664: V/BluetoothSocket.cpp(3189): abortNative
06-19 16:00:20.664: V/BluetoothSocket.cpp(3189): ...asocket_abort(49) complete
06-19 16:00:20.664: I/ActivityManager(185): No longer want com.google.android.partnersetup (pid 3220): hidden #16
06-19 16:00:20.671: V/BluetoothSocket.cpp(3189): availableNative
06-19 16:00:20.671: V/BluetoothSocket.cpp(3189): destroyNative
06-19 16:00:20.671: V/BluetoothSocket.cpp(3189): ...asocket_destroy(49) complete
06-19 16:00:20.679: D/KeyguardViewMediator(185): setHidden false
06-19 16:00:20.679: W/System.err(3189): java.io.IOException: socket closed
06-19 16:00:20.679: W/System.err(3189):     at android.bluetooth.BluetoothSocket.available(BluetoothSocket.java:370)
06-19 16:00:20.679: W/System.err(3189):     at android.bluetooth.BluetoothInputStream.available(BluetoothInputStream.java:40)
06-19 16:00:20.679: W/System.err(3189):     at java.io.BufferedInputStream.available(BufferedInputStream.java:114)
06-19 16:00:20.687: W/System.err(3189):     at ebs.alphadidact.control.ReceiveThread.run(ReceiveThread.java:79) 
```

更进一步的是 LogCat 接收了一千次消息：

```
V/BluetoothSocket.cpp(3189): availableNative 
```

所以当我在网上搜索时，我发现了一些有类似问题但没有解决方案的人。有人知道这个问题吗？

可能是天线和android 4.0的兼容性问题。我不认为错误出现在我的代码中，因为正如我所说，相同的代码完美地在较旧的 android 版本上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:35:55.203

好的，我发现了问题所在。我不确定这只是三星问题还是 Android ICS 问题。

我尝试通过使用（获取套接字）像往常一样连接到天线：

```
clientSocket = device.createRfcommSocketToServiceRecord(MY_UUID); 
```

好吧，它似乎不适用于我的天线和平板电脑设置，所以我尝试了：

```
clientSocket = device.createInsecureRfcommSocketToServiceRecord(MY_UUID); 
```

这确实有效。第一个选项迫使系统取消天线配对，然后再次要求配对。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:48:37.600

实际上创建一个不安全的套接字与连接两个未配对的设备相同。这显然不是最好的处理方式。

我发现 Android 尝试修复设备，然后拒绝配对响应。在这种奇怪的行为之后，它将接受下一次连接尝试！

我还尝试了 Android bugtracker：[Bluetooth RFCOMM Server Socket no longer connected to embedded device on ICS 4.0.3](http://code.google.com/p/android/issues/detail?id=34161)。

还在等回复。。。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T13:25:10.187

感谢@fuentessifuentes 的回答，我写了这个方法，包括向后兼容性：

```
private BluetoothSocket createBluetoothSocket(BluetoothDevice device) throws IOException {
    if(Build.VERSION.SDK_INT >= 10){
        try {
            final Method  m = device.getClass().getMethod("createInsecureRfcommSocketToServiceRecord", new Class[] { UUID.class });
            return (BluetoothSocket) m.invoke(device, SPP_UUID);
        } catch (Exception e) {
            Log.e(TAG, "Could not create Insecure RFComm Connection",e);
        }
    }
    return  device.createRfcommSocketToServiceRecord(SPP_UUID);
} 
```

也许它可以帮助somone，摆脱这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T13:18:24.720

我相信我看到了同样的问题。我正在使用来自 Google Play 的 spp 终端应用程序，该应用程序在将设备与我的库存 droid x 配对后完美运行。但现在我的 Galaxy s3 使用相同的应用程序和相同的设备，每次都需要重新配对。

您的解决方案是一种解决方法。看来android在ICS中改变了这种行为。因此，真正的解决方案是谷歌修复 ICS 以允许 spp 设备在不配对的情况下配对和连接。

但是，我确实看到了一些代码来解决类似的问题：

```
BluetoothSocket mSocket = null;
mBluetoothAdapter.cancelDiscovery();
Method method;
try {
    method = mBluetoothDevice.getClass()
        .getMethod("createRfcommSocket", new Class[] { int.class});
    mSocket = (BluetoothSocket) method.invoke(mBluetoothDevice,1);
} catch (NoSuchMethodException e1) {
    e1.printStackTrace();
} catch (IllegalArgumentException e) {
    e.printStackTrace();
} catch (IllegalAccessException e) {
    e.printStackTrace();
} catch (InvocationTargetException e) {
    e.printStackTrace();
}

mSocket.connect(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T14:55:31.033

使用此代码：

```
BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address);
mBluetoothAdapter.cancelDiscovery();

Method m;
try {
    m = device.getClass().getMethod("createInsecureRfcommSocket", new Class[] { int.class });
    btSocket = (BluetoothSocket) m.invoke(device, 1);
} catch (SecurityException e1) {
    e1.printStackTrace();
} catch (NoSuchMethodException e1) {
    e1.printStackTrace();
} catch (IllegalArgumentException e) {
    e.printStackTrace();
} catch (IllegalAccessException e) {
    e.printStackTrace();
} catch (InvocationTargetException e) {
    e.printStackTrace();
} 
```

并将以下内容添加到我们的应用程序清单中

`<uses-sdk android:minSdkVersion="13" android:targetSdkVersion="16"/>`

# android - Android应用程序在重新启动时内存不足

> ID：11082820
> 
> 赞同：3
> 
> 时间：2012-06-18T12:25:16.540
> 
> 标签：android, bitmap, out-of-memory

所以我遇到了一个由大位图引起的臭名昭著的 oom 错误。但我已经设法解决了大部分问题。当我单击返回并关闭应用程序然后立即启动应用程序时，剩下的唯一问题发生了。然后应用程序将崩溃，给我一个 oom（内存不足）错误。如果我单击主页，则不会发生这种情况。

为什么会这样？我的猜测是 GC 还没有完成清理，现在我在旧数据仍然存在时启动它。当然，它不是一个新应用程序，所以旧版本和新版本都受到相同的应用程序内存限制。

关于这个问题的任何意见和可能的解决方案都会很棒。

我尝试过的：

在我使用的所有位图下载中：

```
BitmapFactory.Options op = new Options();
op.inPurgeable = true;
bmImg = BitmapFactory.decodeStream(is,null,op); 
```

使图像的尺寸宽度 x 高度更小（以 kb 为单位的大小大致相同）。<-- 这解决了问题，所以我有一个备用解决方案，除非有人有一个超级解决方案:)

错误日志片段：

```
06-25 04:29:28.917: E/AndroidRuntime(8819): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
06-25 04:29:28.917: E/AndroidRuntime(8819):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
06-25 04:29:28.917: E/AndroidRuntime(8819):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
06-25 04:29:28.917: E/AndroidRuntime(8819):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
06-25 04:29:28.917: E/AndroidRuntime(8819):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:715)
06-25 04:29:28.917: E/AndroidRuntime(8819):     at android.content.res.Resources.loadDrawable(Resources.java:1713)
06-25 04:29:28.917: E/AndroidRuntime(8819):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
06-25 04:29:28.917: E/AndroidRuntime(8819):     at android.widget.ImageView.<init>(ImageView.java:122)
06-25 04:29:28.917: E/AndroidRuntime(8819):     at android.widget.ImageView.<init>(ImageView.java:112)
06-25 04:29:28.917: E/AndroidRuntime(8819):     ... 23 more 
```

**编辑**：所以有两件事为我解决了这个问题。

1.  在我的主要活动的 ondestroy() 中清除我的数据库并将大图像设置为空。
2.  使大图像变小。

但这只是提出了同样的基本问题，如果调用 onDestroy()，为什么我的活动在打开新活动之前没有正确关闭？我还看到我的活动在关闭后很长一段时间内继续运行。这可能与问题有关吗？我该如何追查造成这种情况的原因？

**Edit2**：罪魁祸首似乎是我的 LruCache。我使用了一个未在 ondestroy() 中清除的静态 lrucache。当应用程序重新启动时，lrucache 中的所有图像仍然存在，这会导致问题。我仍然想知道为什么这只是重启时的问题？当我在关闭它之前返回我的主要活动时，这不应该也是一个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:09:57.400

我遇到了同样的问题，通过强制关闭进程解决了。这可以通过重写 onDestroy() 来完成。用这个：

```
@Override
public void onDestroy(){
    ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
    List<ActivityManager.RunningAppProcessInfo> pids = am.getRunningAppProcesses();
    for (int i = 0; i < pids.size(); i++) {
        ActivityManager.RunningAppProcessInfo info = pids.get(i);
        if (info.processName.equalsIgnoreCase(context.getPackageName())) {
            android.os.Process.killProcess(info.pid);
        }
    }
    super.onDestroy();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:38:42.187

嘿，请检查我对同一问题的回答：[位图大小超出 Vm 预算错误 android](https://stackoverflow.com/questions/10737582/bitmap-size-exceeds-vm-budget-error-android/10738115#10738115)

在处理这样的位图时，也总是尝试使用最大选项：

```
 final Options options = new Options();
        options.outHeight = (int) scaleHeight; // new smaller height
        options.outWidth = (int) scaleWidth;   // new smaller width
        options.inScaled = true;
        options.inPurgeable = true;

        // to scale the image to 1/8
        options.inSampleSize = 8;
        bitmap = BitmapFactory.decodeFile(imagePath, options); 
```

这可能会解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:05:09.687

罪魁祸首似乎是我的 LruCache。我使用了一个未在 ondestroy() 中清除的静态 lrucache。当应用程序重新启动时，lrucache 中的所有图像仍然存在，这会导致问题。我仍然想知道为什么这只是重启时的问题？当我在关闭它之前返回我的主要活动时，这不应该也是一个问题吗？

尽管如此，我对这个问题的临时/永久修复是清除 ondestroy() 中的所有静态引用，但也使用较小尺寸的图像。这似乎解决了我所有的问题，因为我也找不到任何内存泄漏。

# iphone - 获取异步 Twitter 个人资料图片 iOS5

> ID：11082821
> 
> 赞同：0
> 
> 时间：2012-06-18T12:25:19.243
> 
> 标签：iphone, ios5, twitter, objective-c-blocks

无法弄清楚为什么 profileImage 没有粘住......（我添加了 pImage 只是为了看看它是否与在一个块内......它不是）。

profileImage 只是一个普通的综合属性

```
@property (strong, nonatomic) UIImageView *profileImage;

-(void)fetchProfileImage
{
    __block UIImage *pImage;

    dispatch_async(dispatch_get_global_queue(0, 0), ^
    {
        NSString *url_ = [NSString stringWithFormat:@"http://api.twitter.com/1/users/profile_image/%@", userName];

        TWRequest *fetchUserImageRequest = [[TWRequest alloc] initWithURL:[NSURL URLWithString:url_] parameters:nil requestMethod:TWRequestMethodGET];

        [fetchUserImageRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) 
         {
             if ([urlResponse statusCode] == 200) 
             {
                 dispatch_async(dispatch_get_main_queue(), ^(void) 
                {
                    NSLog(@"[UIImage imageWithData:responseData] = %@", [UIImage imageWithData:responseData]);

                    pImage = [UIImage imageWithData:responseData];

                    NSLog(@"pImage = %@", pImage);

                    self.profileImage.image = pImage;

                    NSLog(@"self.profileImage.image = %@", self.profileImage.image);

                });
             }
         }];
    });
} 
```

日志：

```
[UIImage imageWithData:responseData] = <UIImage: 0x2685d0>
pImage = <UIImage: 0x2685d0>
self.profileImage.image = (null) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:32:56.707

原来我在创建父对象时没有初始化 UIImageView

```
tweet.profileImage = [[UIImageView alloc] init]; 
```

# python - matplotlib.pyplot 如何在同一个图中命名不同的线？

> ID：11082831
> 
> 赞同：22
> 
> 时间：2012-06-18T12:25:42.720
> 
> 标签：python, plot, matplotlib, diagram

考虑这样做：

```
import matplotlib.pyplot as plt

plt.plot(x_A,y_A,'g--')
plt.plot(x_B,y_B,'r-o')
plt.show() 
```

您将如何为两条线赋予不同的名称，即 Microsoft Excel 会这样做？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-18T12:29:24.577

```
import matplotlib.pyplot as plt

plt.plot(x_A,y_A,'g--', label="plot A")
plt.plot(x_B,y_B,'r-o', label="plot A")
plt.legend()
plt.show() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-18T12:28:13.787

你可以给每一行一个标签。

```
plt.plot(x_A,y_A,'g--', label='x_A') 
```

然后可以将这些标签显示在图例中

```
legend() 
```

`legend`需要一些参数，请参阅文档以了解它可以做什么。

# callback - 如何在 aspxgridview 中更改的选择上动态填充控件

> ID：11082833
> 
> 赞同：0
> 
> 时间：2012-06-18T12:25:47.727
> 
> 标签：callback, devexpress, aspxgridview

我有一个链接到数据源的 AspxGridView。在 GridView 下方有一些文本框，它们应该在选择更改事件中填充。我怎样才能做到这一点？也许使用回调面板和客户端 SelectionChanged 来触发自定义回调或...？或者也许 SelectionChange 不是合适的事件？我可以看到在 gridview 中客户端有 Begin 和 EndCallback 但它们何时实际执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:36:08.090

您可以这样做：
1\. 将文本框放在里面`ASPxCallbackPanel`
2\. 将回调面板设置`ClientInstanceName`为例如`callbackPanel1`
3\. 在`ASPxGridView`客户端选择更改的事件调用[callbackPanel1.PerformCallback](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxCallbackPanelScriptsASPxClientCallbackPanel_PerformCallbacktopic)
4\. 在[ASPxCallbackPanel.Callback](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxCallbackPanelASPxCallbackPanel_Callbacktopic)事件处理程序中设置文本框值

[回调概念](http://www.devexpress.com/Support/Center/p/K18387.aspx)知识库文章是必读的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:37:26.133

由于您的文本框在网格之外，因此应该很容易：

```
 void MyGridView_SelectedIndexChanged(Object sender, EventArgs e)
  {
    MyTextBox.Text = "You selected something.";
  } 
```

看看这个：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindexchanged.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindexchanged.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:09:12.903

查看[此](http://demos.devexpress.com/ASPxGridViewDemos/Selection/Selection.aspx)演示以了解有关如何在客户端完成此任务的更多信息。

# c# - C# 确定文本文件名

> ID：11082834
> 
> 赞同：0
> 
> 时间：2012-06-18T12:25:48.917
> 
> 标签：c#, file, file-io

我如何更改它以确定其目录本身中的文本文件？

```
string[] file = new string[] {
    "abc",
    "def",
    "file3"};
var files = (UInt16)file.Length;
for (UInt16 n = 0; n < files; n++)
{
    var streamReader =
        new System.IO.StreamReader(
            file[n] + ".txt");
    ...
    streamReader.Close();
    ...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T12:28:43.173

```
string[] files = Directory.GetFiles(@"c:\MyDir\", "*.txt"); 
```

**更新**一些用法：

```
foreach (var filename in files)
{
    string allText = File.ReadAllText(filename);
    // or string[] lines = File.ReadLines(filename);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T12:29:38.193

使用[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/wz42302f)

```
var files = Directory.GetFiles(Directory.GetCurrentDirectory(),"*.txt"); 
```

如果你想包含子目录：

```
var files = Directory.GetFiles(Directory.GetCurrentDirectory(),"*.txt",
    SearchOption.AllDirectories); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T12:30:08.853

可以使用[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)，或多或少像这样

```
string[] dirs = Directory.GetFiles(@"/*Parent directory*/", "*.txt"); 
```

如果这不是您要的，请澄清。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T12:52:45.333

尝试发布明确的问题，以便您得到正确的答案。

如果您想获取“*.txt”类型的所有文件。试试这个代码

```
DirectoryInfo dir = new DirectoryInfo("Path");
var allTextFiles = dir.GetFiles("*.txt", SearchOption.AllDirectories); 
```

# sql - 客户表上的级联删除查询

> ID：11082836
> 
> 赞同：0
> 
> 时间：2012-06-18T12:25:49.520
> 
> 标签：sql, sqlite

我正在尝试在我的数据库上配置 CLIENTS 表，以便如果从 EMP 表中删除员工，则任何关联的客户端都会自动从 CLIENTS 表中删除。

这是我到目前为止所尝试的。

```
ALTER TABLE clients
MODIFY empno REFERENCES emp(empno) ON DELETE CASCADE 
```

不幸的是，每次我尝试运行它时都会返回一个**接近“修改”：语法错误。**知道出了什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:27:19.287

用这个：

```
ALTER TABLE Clients
  ADD CONSTRAINT `Client_1`
    FOREIGN KEY empno REFERENCES emp(empno) ON DELETE CASCADE; 
```

升级版：

根据这篇[文章](https://stackoverflow.com/questions/1884818/how-do-i-add-a-foreign-key-to-an-existing-sqlite-3-6-21-table)，你无法在 SQLite 中做到这一点。因此，我的建议是这样的：

*   创建一个临时表。
*   复制那里的所有信息。
*   删除原始表并使用外键创建它。
*   从临时表中复制所有信息并删除临时表。

当然，如果 Clients 表现在是空的，您可以简单地删除它并重新创建。

# ios - iOS 文件写入失败

> ID：11082837
> 
> 赞同：1
> 
> 时间：2012-06-18T12:25:58.373
> 
> 标签：ios, ios5

我一直在尝试将字符串写入iOS5.1 中的文件，但文件内容始终为（null）。你能帮我找出原因吗？这是我的代码：

```
NSString *dir = [NSHomeDirectory() stringByAppendingPathComponent:@"mydirectory"];

NSString *letters = @"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
        NSMutableString *randomString = [NSMutableString stringWithCapacity: 64];

for (int i=0; i<DEFAULT_LENGHT_OF_NOTE_FILE_ID; i++) 
{
    [randomString appendFormat: @"%C", [letters characterAtIndex: arc4random() % [letters length]]];
 }

 NSString* randomFileName = [NSString stringWithFormat:@"%@.html",randomString];
 NSString *filePath = [dir stringByAppendingPathComponent:randomFileName];

 NSString *str = @"Mystr";

//save content to the documents directory
 [str writeToFile:filePath atomically:NO encoding:NSStringEncodingConversionAllowLossy 
                       error:nil];

 NSString *content = [[NSString alloc] initWithContentsOfFile:filePath
                                                        usedEncoding:nil
                                                               error:nil];

 NSLog(@"%@", content); 
```

NSLog 总是返回 (null)。我究竟做错了什么？

真挚地，

佐利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:28:14.780

您没有对该文件的写入权限。请尝试写入您的 Documents 文件夹。

```
//Get the documents folder
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsPath = [paths objectAtIndex:0];

...

NSString *filePath = [dir stringByAppendingPathComponent:randomFileName];
[str writeToFile:filePath atomically:NO encoding:NSStringEncodingConversionAllowLossy 
                       error:nil]; 
```

您始终可以使用 writeToFile 中的错误并打印它以找出您的错误。

```
NSError *error = nil;
[str writeToFile:filePath atomically:NO encoding:NSStringEncodingConversionAllowLossy 
                       error:&error];
if(error) NSLog(@"Error:%@" error.localizedDescription); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:29:44.953

更改以下内容

```
NSString *dir = [NSHomeDirectory() stringByAppendingPathComponent:@"mydirectory"]; 
```

至

```
NSString *dir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"]; 
```

# vb.net - XML 处理语言

> ID：11082842
> 
> 赞同：0
> 
> 时间：2012-06-18T12:26:09.133
> 
> 标签：vb.net, msxml

我想处理由 Visio 2010 生成的 MSXML，哪种语言有助于处理生成的 XML，我对此很陌生，

Visual basic、.Net 或 C# 对我有帮助吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:38:09.333

C# 和 VB.NET 都提供对 XML 的等效支持，因为它们共享相同的框架并且可以使用所有相同的库。给猫剥皮的方法有很多，所以这一切都取决于在你的情况下什么最有意义。您可以使用`DataSet`. 您可以使用`XmlDocument`该类来加载它，然后使用 XPath 搜索它。您可以使用`XDocument`类加载它并使用 LINQ 搜索它。您可以将 XML 反序列化为匹配的自定义类对象。或者，如果您对将 XML 文档转换为另一种 XML 或其他格式感兴趣，我建议您使用 XSLT。`XslCompiledTransform`您可以使用该类将 XSLT 脚本应用于 .NET 中的 XML 文档。通过四处搜索，您可以轻松地找到所有这些在线示例，包括在本网站上。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T12:37:12.397

Visual Basic 和 C# 都有多种访问和操作 XML 数据的方法。我建议您查看这两种 .Net 语言中可用的 LINQ-to-XML 功能。

# iphone - 使用 Xcode 创建无线清单文件（.plist 扩展名）

> ID：11082846
> 
> 赞同：9
> 
> 时间：2012-06-18T12:26:23.827
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我的客户想要使用“无线安装应用程序”功能。

使用它，他可以直接从我的服务器下载应用程序，无需同步他的设备。我在互联网上搜索并获得了一些信息，为此我需要两个文件

1.  应用程序 (.ipa) 文件
2.  清单 (.plist) 文件。

我知道如何创建（.ipa）文件，但我不知道（.plist）文件。如果有人知道如何创建（.plist）文件，请分享您的想法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T14:43:25.430

如果您导出 AdHoc 存档并选中“企业分发”框，则 .plist 将导出到与 ipa 同名的同一目录中。我今天第一次这样做，将它托管在我的服务器上并且它有效。

检查这个： http: [//www.paradeofrain.com/2010/11/taking-the-pain-out-of-ad-hoc-testing/](http://www.paradeofrain.com/2010/11/taking-the-pain-out-of-ad-hoc-testing/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T12:41:22.760

我使用 Betabuilder，你可以在[github](https://github.com/HunterHillegas/iOS-BetaBuilder)上找到它。将它与您的 ipa 一起使用，只需将应用程序创建的文件上传到 Web 服务器即可。

# eclipse - 在 Eclipse Indigo WTP 中启动 Tomcat 工作正常，直到超时再次关闭

> ID：11082851
> 
> 赞同：0
> 
> 时间：2012-06-18T12:26:30.130
> 
> 标签：eclipse, eclipse-indigo, eclipse-wtp

在使用 Eclipse Indigo WTP 部署/启动/停止我的 Tomcat 7 服务器几周后，我突然遇到了一个问题，即 Eclipse 编辑器关闭了我的服务器，因为它认为它无法正确启动它事实上确实如此。我有一个完整的日志控制台，它确认它已经启动并且我可以访问我正在构建的 Web 应用程序。似乎 Eclipse 编辑器认为没有问题时有问题！

这是错误消息：

> 本地主机上的服务器 Tomcat v7.0 服务器无法在 45 秒内启动。如果服务器需要更多时间，请尝试在服务器编辑器中增加超时。

我应该补充一点，我的应用程序在不到 5 秒内启动，我尝试过运行`eclipse - clean`，我尝试过从 Eclipse 中删除服务器配置并重新配置它......我还能尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:25:14.093

我已经能够通过将 Eclipse 中的 HTTP 侦听端口更改为不同的东西来解决这个问题。看起来当时一定有某种奇怪的端口冲突。可以在*端口*部分的服务器概览页面中修改端口（双击 Eclipse *Servers*选项卡中配置的服务器并展开*端口*部分）。

另一种方法是终止可能在相关端口上运行的进程。当 Eclipse 崩溃并以某种方式使服务器进程保持运行时，这有时是必要的。在*Windows*中可以使用以下命令终止进程（假设本例中的 HTTP 端口为 8080）：

```
netstat -a -o -n | findstr 0.0.0.0:8080 
```

这是为了确定进程 ID，您应该会看到如下内容：

```
TCP    0.0.0.0:8080           0.0.0.0:0              LISTENING       3028 
```

进程 ID 是最后一个数字，您可以像这样杀死它：

```
taskkill /F /PID 3028 
```

# php - 如何在 Moodle 中将学生注册到类别中？

> ID：11082853
> 
> 赞同：0
> 
> 时间：2012-06-18T12:26:39.007
> 
> 标签：php, moodle

有人可以告诉我如何将学生注册到每个课程的类别中。

问候， 桑德什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T15:22:52.623

**第 1 步：** 您必须启用**类别注册**插件才能将学生注册到某个类别。要启用此插件，请转到*站点管理-->插件-->注册-->管理注册插件*。

**第 2 步：** 现在将上下文**类别**添加到学生。转到打开*站点管理-->用户-->权限-->定义角色*，单击学生角色，单击编辑按钮，然后单击与**类别**关联的复选框。

在同一页面上，通过选择**Allow**为学生提供对**enrol/category:synchronised**的访问权限。并保存更改。

 ****第 3 步：** 访问*站点管理-->课程-->添加/编辑课程*，然后单击类别。在**Category Settings**中，单击**Assign Roles**，选择用户并将其添加到类别中。

现在您可以通过转到*课程设置->用户->已注册用户来确认注册*

* * *

但是，建议您使用**Cohort Sync**将学生注册到某个类别。群组非常容易设置和管理。

更多细节在这里：

[http://docs.moodle.org/22/en/Category_enrolments](http://docs.moodle.org/22/en/Category_enrolments)

[http://docs.moodle.org/22/en/Cohort_sync](http://docs.moodle.org/22/en/Cohort_sync)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:22:58.983

转到类别页面，单击（在左侧栏中）站点管理»课程»添加/编辑课程。

您只需转到类别页面（单击所需类别的名称），然后链接位于左侧栏中“设置”下的“分配角色”。

通过这种方式，您可以分配所需的角色：学生、教师等。

ED**

# c# - Mapnik.NET 图层数据源路径

> ID：11082855
> 
> 赞同：0
> 
> 时间：2012-06-18T12:26:42.707
> 
> 标签：c#, c++, .net, mapnik

我一直在尝试使用 Mapnik.NET ( [https://sourceforge.net/p/mapniknet/](https://sourceforge.net/p/mapniknet/) ) 创建一个图层，但无法设置路径。Mapnik.NET 是一个围绕 C++ dll 的 .NET 包装器。

我试图在 XML 和代码中为形状文件设置“文件”参数，但总是得到错误：

'无法创建数据源。没有找到类型“形状”的插件（搜索：）“。

我尝试了很多不同的路径，但都没有成功。例如：

“shoreline_300.shp”（文件位于 C: 基础和调试文件夹中）

"/shoreline_300.shp"

“海岸线_300.shp”

"C:shoreline_300.shp"

“C:\shoreline_300.shp”

“文件：///shoreline_300.shp”

有没有人能够成功设置路径？

XML:

```
<Datasource>
      <Parameter name="type">shape</Parameter>
      <Parameter name="file">/shoreline_300.shp</Parameter>
</Datasource> 
```

C＃：

```
ValuesDictionary vd = new ValuesDictionary();
vd.Add("type", "shape");
vd.Add("file", "/shoreline_300.shp");

IDatasource ds = DatasourceCache.Create(vd);
worldLayer.Datasource = ds;
self.Map.Layers.Add(worldLayer); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:21:25.127

我才刚刚开始探索使用，`MapnikCs`因此响应的时间间隔，但我发现如果你打电话

```
DatasourceCache.RegisterDatasources(path\to\datasource\plugins) 
```

在创建之前，`datasource`您可能会发现您的代码有效。

# javascript - 获取打开的新窗口的句柄

> ID：11082856
> 
> 赞同：0
> 
> 时间：2012-06-18T12:26:43.503
> 
> 标签：javascript

我想在新窗口中的文本框中插入文本，当我单击父窗口中的链接时，该文本框正在打开

我想知道如何获取新子窗口的处理程序，并且可以找到子窗口中存在的元素的 id 并在 javascript 中执行操作。

注意 - 子窗口和父窗口的视图源不同，使用时`document.getElemntByid("")`不起作用，因为代码无法找到元素，因为父窗口中不存在子窗口的 id，因此我想要处理/切换子窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:37:12.350

您必须创建对窗口的引用。它可能看起来像：

```
// reference to child window
var childWin;

function openChildWindow () {
 childWin = window.open('http://...', 'myChildWindow');
}

function childWindowDocument() {
  return 'contentDocument' in childWin ? childWin.contentDocument : childWin.document;
}

// Update a text area inside child window
childWindowDocument().getElementsById('myTextArea').value = 'Updated...'; 
```

# xmpp - 更正 XMPP 消息以用于广播查询

> ID：11082857
> 
> 赞同：-1
> 
> 时间：2012-06-18T12:26:44.283
> 
> 标签：xmpp, libjingle

我正在尝试使用 Google 的 libjingle 框架，并且需要将来自客户端的查询广播到其他已登录的客户端。

使用 IQ 协议 (http://xmpp.org/extensions/xep-0099.html)、存在协议 (http://xmpp.org/rfcs/rfc3921.html) 或仅通过循环访问相关客户并发送直接消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:58:00.743

首先[，XEP-0099](http://xmpp.org/extensions/xep-0099.html)自 2003 年以来被推迟（根据顶部的红色文本），我不知道它的实现，我真的不认为它是你想要的。

其次，对于`<iq/>`一般的节，你不能广播它们。它们是[一对一的请求和响应机制](http://xmpp.org/rfcs/rfc6120.html#stanzas-semantics-iq)。一个请求只返回一个响应（或错误），而广播会破坏该规则。要广播一些信息，请使用 a[`<message/>`](http://xmpp.org/rfcs/rfc6120.html#stanzas-semantics-message)或什至[`<presence/>`](http://xmpp.org/rfcs/rfc6120.html#stanzas-semantics-presence). 如果您需要从一系列 JID*请求*`<iq type="get">`信息，可能确实是这样做的方法。

# hadoop - 为什么要获得 Hadoop 启动 SafemodeException

> ID：11082859
> 
> 赞同：1
> 
> 时间：2012-06-18T12:26:46.950
> 
> 标签：hadoop

我们有一个具有三个节点的*hadoop集群设置。*当我们启动集群时，我们会收到一条错误消息，例如

```
ssh: Could not resolve hostname master: 
```

但是在我们的应用程序中没有在配置中使用该名称。但是守护进程也都在主从中运行。但是在检查 UI 时，只有一个节点是活动节点。谁能帮我这些conf文件引用的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:25:56.830

你写了`conf/masters`and`conf/slaves file`吗？在您的 hadoop 文件夹中，执行以下操作：

```
echo localhost > conf/masters;
echo localhost > conf/slaves; 
```

另外， In `conf/core-site.xml`，请确保您设置`fs.default.name`

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<configuration>
  <property>
    <name>fs.default.name</name>
    <value>hdfs://127.0.0.1:9000</value>
  </property>
</configuration> 
```

在`conf/mapred-site.xml`：

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<configuration>
  <property>
    <name>mapred.job.tracker</name>
    <value>localhost:9001</value>
  </property>

  <property>
    <name>dfs.datanode.socket.write.timeout</name>
    <value>0</value>
  </property>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:18:17.970

可能是，您在文件 $HADOOP_HOME/conf/masters | 中写入了“master:”而不是“master”。$HADOOP_HOME/conf/slaves...

这是一个 dns 问题，在环境设置过程中会遇到很多 dns 问题。您可以使用 hadoop-dns-checker 工具找出问题...

# java - 当 csv 中第二列中的值与 java 中的用户输入匹配时，在 csv 文件中获取一行

> ID：11082862
> 
> 赞同：1
> 
> 时间：2012-06-18T12:27:00.363
> 
> 标签：java, csv

我有一个包含 5 列的 csv 文件。我想获取第二列中的值与用户输入匹配的行。

我尝试在 csv 中读取一行。使用 csv 分隔符创建一个数组，然后检查数组中的第二个值。

有没有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:36:25.993

参考以下代码：

```
String fName = "C:\\Amit\\abc.csv";
    String input="5";
    String thisLine;
    FileInputStream fis = new FileInputStream(fName);
    DataInputStream myInput = new DataInputStream(fis);

    while ((thisLine = myInput.readLine()) != null) {
        String strar[] = thisLine.split(",");
            if(input.equalsIgnoreCase(strar[1])){
                System.out.println("Found row :"+thisLine);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:53:08.543

CSV 格式通常使用固定的列或行位置来处理。如果不能保证固定的行和列位置，那么您可以查看处理标题以确定行的位置。

作为一般规则，使用专门构建的 CSV 解析器会简单得多，特别是如果您不控制正在使用的 CSV 文件的数据或输出格式，因为 CSV 格式有一系列潜在的极端情况（例如，数据字段中的逗号）无法正确处理`String#split()`。两个经常提到的用于解析 CSV 文件的开源 Java 库是[SuperCSV](http://supercsv.sourceforge.net/)和[OpenCSV](http://opencsv.sourceforge.net/)。OpenCSV 可以处理将带有标头的 CSV 文件解析为 Java bean 对象。SuperCSV 可以处理该功能并将带有标题的 CSV 文件解析为映射。

可以找到针对[这个问题](https://stackoverflow.com/questions/2053761/what-is-a-good-csv-java-utility)、[这个问题](https://stackoverflow.com/questions/101100/csv-api-for-java)和[这个问题](https://stackoverflow.com/questions/200609/can-you-recommend-a-java-library-for-reading-and-possibly-writing-csv-files)列出的其他 CSV 库。

# android - android - 从自定义布局中获取子视图的句柄

> ID：11082864
> 
> 赞同：3
> 
> 时间：2012-06-18T12:27:03.990
> 
> 标签：android, android-layout, android-custom-view

我创建了一个扩展的 Java 类，`LinearLayout`如下所示

```
 public class CustomLinear extends LinearLayout{

        Context context;

         public CustomLinear(Context context) {
        super(context);
          this.context=context;

         ViewFlipper viewFlipper=new ViewFlipper(context);
         viewFlipper.setLayoutParams(this.getLayoutParams());
        this.addView(viewFlipper);

        } 
```

并将自定义构建的布局包含到我的 Main.xml 中，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res/com.example.android.apis"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

              <com.homevito.customlayout.CustomLinear
            android:id="@+id/one"
            android:layout_width="match_parent"
            android:layout_height="0dip"
            android:layout_weight="1"
            android:background="@drawable/alerts"
            android:orientation="horizontal" />

</LinearLayout> 
```

在我的 MainActivity 中，我使用 main.xml 作为内容视图，如下所示：

```
 public class MainActivity extends Activity {

         /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
             super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

        }
    } 
```

我想处理`viewFlipper`来自`MainActivity`. 我尝试设置 ID，`viewFlipper`但仍然有帮助...

我怎样才能处理`viewflipper`..提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:46:18.407

尝试以下片段

```
class CustomLinear extends LinearLayout {

    private Context context;

    public CustomLinear(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.context = context;

        ViewFlipper viewFlipper = new ViewFlipper(context);
        viewFlipper.setId(1234);
        viewFlipper.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        this.addView(viewFlipper);

    } 
```

并在 onCreate()

```
CustomLinear customLinear = (CustomLinear) findViewById(R.id.one);

ViewFlipper flipper = (ViewFlipper) customLinear.findViewById(1234); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:41:41.323

首先，如果您在 xml 布局中使用自定义组件，则需要实现第二个构造函数（采用 , 的构造函数`Context`）`AttributeSet`。其次，您可以为您添加一个 getter 方法`ViewFlipper`：

```
public class CustomLinear extends LinearLayout{

        Context context;
        private ViewFlipper mFlipper;

        public CustomLinear(Context context, AttributeSet attrs) {
             super(context, attrs);
             this.context=context;
             mFlipper = new ViewFlipper(context);
             mFlipper.setLayoutParams(this.getLayoutParams());
             this.addView(mFlipper);
        }

      // the getter method
      public ViewFlipper getTheFlipper() {
           return mFlipper;
      } 
```

然后在您的活动中，您可以简单地执行以下操作：

```
setContentView(R.layout.main);
CustomLinear cl = (CustomLinear) findViewById(R.id.one);
ViewFlipper flipperReference = cl.getTheFlipper(); 
```

# apache - 在 nginx 中重写规则

> ID：11082868
> 
> 赞同：0
> 
> 时间：2012-06-18T12:27:16.073
> 
> 标签：apache, nginx

我正在尝试为以下情况实施 nginx 重写规则：

> 请求 xyz.com/abcd1.css 应该重定向到另一个具有相同 url 和不同 IP 的服务器

`abcd1 css`是形式为 的正则表达式`abcd2.css`，`abcd3.css`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:48:00.027

带有重写规则的简单位置块可以为您做到这一点：

```
http {
    ...
    server {
        ...
        location ~* /abcd(.*).css {
            rewrite ^ $scheme://some.other.host$request_uri? permanent;
        }
    }
} 
```

根据您的确切要求，您可能可以替换几个有效的正则表达式。

相关文档： [location](http://nginx.org/en/docs/http/ngx_http_core_module.html#location) , [rewrite](http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#rewrite) , [$scheme](http://nginx.org/en/docs/http/ngx_http_core_module.html#variables)

# ruby-on-rails - 存根或模拟 Foo.has_many Bar 并用 Bar 预填充

> ID：11082870
> 
> 赞同：1
> 
> 时间：2012-06-18T12:27:21.133
> 
> 标签：ruby-on-rails, rspec

我有一个订单模型，其中`has_many`付款和结帐控制器。如果没有付款退出，控制器应该创建一个新的付款。

```
private 
# Helper method allows calling from several controller-callbacks.
def add_payment_if_not_exists
  if @order.payments.empty?
    Payment.create(...)
  end
end 
```

现在我想指定这种行为`CheckoutControllerSpec`

```
it 'should not add a payment when already added' do
  @order = mock_model(Order)
  @order.payments << mock_model(Payment).as_null_object

  Payment.should_not_receive(:new)
  post :homecoming, @params
end 
```

但这抛出

```
Failure/Error: @order.payments << mock_model(Payment).as_null_object
   Mock "Order_1003" received unexpected message :payments with (no args) 
```

不知何故，我仍然没有完全理解 rspecs stubbing 和 mocking 的概念。我怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:44:34.290

```
@order = mock_model(Order) 
```

在这里，您创建了一个模拟对象，只是一个空白画布。如果你想设置东西，你应该告诉它响应 :payments 的东西。在这种情况下，一个包含 1 个条目的数组（模拟 Payment 对象）

```
@order.stub(:payments) { [mock_model(Payment).as_null_object]} 
```

这会让你走得更远。其他注意事项：

*   我不确定这种期望是否会`Payment.should_not_receive(:new)`测试您的行为。您实际上调用的是 Payment.create，而不是 Payment.new
*   我希望您在某个地方删除 Order.find 以返回 @order，但这没有在这里显示，对吧？
*   我通常会将您的@order 简化为以下内容：

这里我们说#payments 返回一个非空数组，我们不关心内容。

```
@order = mock_model(Order)
@order.stub(:payments) { [stub] } 
```

# magento - Magento 1.7 无法添加/编辑类别

> ID：11082874
> 
> 赞同：1
> 
> 时间：2012-06-18T12:27:31.290
> 
> 标签：magento, categories, backend

由于我将商店升级到 1.7，我无法创建新类别，也无法编辑它们。

我在互联网上看到了一些解决方案，说我需要重新安装 magento 并进行全新安装，但是我将失去整个商店以及我现在添加的东西。

还有其他人更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:40:15.183

你应该去目录 -> 管理产品：

在您的网站上选择您需要的所有产品。

现在从“操作”下拉列表中选择“更新属性”。您必须将它们添加到您需要它们的商店。并保存。

返回目录 -> 管理类别并选择一个类别。现在打开产品选项卡选择“任何”并在此类别中搜索您想要的产品并保存。

访问您的前端检查:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:14:31.400

您可以尝试如下。转到 Magento 管理员 >> Magento 连接管理器。

在 Mage_Downloader 字段中，单击检查升级按钮。

它会给你一些升级信息。然后在要升级的操作字段中选择重新安装。

做升级！

不要忘记刷新缓存和重新索引。

我希望它对你有帮助。

# c# - C# Mono MySql 连接器：无法连接到任何指定的 MySQL 主机

> ID：11082877
> 
> 赞同：6
> 
> 时间：2012-06-18T12:27:52.780
> 
> 标签：c#, mysql, mono, mysql-connector

我假设这是带有单声道的 MySQL 连接器的错误，但我想我会询问是否有人找到了解决方法。

我有一个运行 .net 4（最新单声道）的 VS 解决方案，我正在使用今天早上刚从他们的网站上下载的最新版本的 MySQL 连接器。

如果我用 Visual Studio 打开项目，编译并运行 MySQL 连接器几乎立即连接到 MySQL 数据库，一切都很好。

如果我在 MonoDevelop 中打开完全相同的项目（导致它是用 mono 而不是 MS .net4 构建的）而没有更改任何一行代码，则 MySQL 连接器回复“无法连接到任何指定的 MySQL 主机”

这不可能是数据库问题，否则我会在两个版本中都看到问题。即使留在 MonoDevelop 并从那里使用 MS .net 框架进行构建，仍然会产生良好的连接。

我的连接字符串包含服务器、端口、uid、密码、连接超时、数据库、池

更多细节 ：

Windows 7 x64 视觉工作室 2010 Mono 2.10.8 MonoDevelop 3.0.2

我已经通过谷歌搜索我的问题看到了大量的结果，但它们似乎都是不同的问题，或者是由于旧的错误已经被方法修复，在这种情况下肯定不起作用。

编辑：任何人都可以复制我在这里看到的内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:39:23.227

尝试将“TrustedConnection”作为“True”添加到您的连接字符串中。还要确保您正在构建为 x86 而不是“任何 Cpu”。希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:26:45.540

查看[http://www.mono-project.com/MySQL](http://www.mono-project.com/MySQL)了解 MySQL 的具体说明。具体确保 MySql.data.dll 在 GAC 中：

```
cd path_to_your MySql.Data.dll assembly
gacutil -i MySql.Data.dll 
```

网站上还有一些示例代码可能会有所帮助。

祝你好运。

# c++ - 在 C++ 中取消定义对函数的引用

> ID：11082879
> 
> 赞同：-2
> 
> 时间：2012-06-18T12:27:58.383
> 
> 标签：c++

我有一个名为 Metadata 的类，它在 中声明`namespace A::B::C`，它还包含`struct copyInfo`，它保存有关元数据的信息。所以，元数据只有它的默认构造函数/析构函数，当我尝试使用来自元数据的成员函数时，调用 `importMetadata(vector<copyInfo> &info, const string &src, const string &dst, const int &job:`

我收到以下错误：

```
import_helper.cpp:(.text+0x246): undefined reference to
A::B::C::Metadata::importMetadata(std::vector<A::B::C::copyInfo, std::allocator<A::B::C::copyInfo> >&, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int const&)
namespace A{
  namespace B{
    namespace C{
        class Metadata{
              Metadata();
              ~Metadata();
             importMetadata(vector<copyInfo> &seq, const string &src, 
                 const string &dst, const int &job);
             /* more code down here */
        };
      }
     }
    } 
```

现在，在`Metadata`我有：

该函数是从一个名为 的包装 C++ 函数调用`wrapperMetadataImport`的，该函数属于`import_helper.cpp`.

```
#include "Metadata.h"
using namespace A::B::C;

int wrapperMetadataImport(const char * src, const char * dest, const int * jobid){
        Metadata mtd;
        string src = srcName;
        string dest = destName;

        vector<copyInfo> sequence;

        /* add elemens to the vector sequence */

        if((ret = mtd.importMetadata(sequence,
                        src, dest, *jobid)) == EC_success){

        /* more code down here */ 
```

我不知道为什么会这样。我检查了 .h 和 .cpp 文件，对我来说一切正常。我想这是一个运行时链接问题。命名空间应该是：`A::B::C`. 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:52:48.483

这是一个链接器错误，表示找不到函数的实现。要么你没有编写函数，要么你没有在你的构建中包含包含它的源文件。

您已经在类定义中*声明*了它，但是如果没有完整的*定义*，则无法调用该函数。

# android - 应用程序已安装但未启动。“未安装应用程序”

> ID：11082882
> 
> 赞同：1
> 
> 时间：2012-06-18T12:28:11.660
> 
> 标签：android

也许有人遇到过这个问题。有一个用 Eclipse 编写的 Android 应用程序，导出到 APK（尝试签名与否）。APK 在 Android 平台 2.3 上安装并运行。但是在3.2的平台上安装了honeycomb，启动时程序中有一个快捷方式说“应用程序未安装”。从 ECLIPSE 运行的模拟器上调试运行良好，但不能从快捷方式运行。3周我找不到答案。

这是我的主要代码：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="vassa.PrexAg"
android:versionCode="1"
android:versionName="1.0">
<uses-sdk android:targetSdkVersion="13" android:minSdkVersion="7"></uses-sdk>

<uses-permission android:name="android.permission.INTERNET">    
</uses-permission>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
<uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>

<application android:label="@string/app_name" android:icon="@drawable/agent">
<activity android:name=".Logon"
android:label="@string/app_name" android:screenOrientation="unspecified" android:permission="android.permission.INTERNET">
<intent-filter>
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity> 
<activity android:label="@string/app_name" android:name="login" android:noHistory="true"></activity>
<activity android:name="Settings" android:noHistory="true"></activity>
<activity android:name="Zakaz" android:noHistory="false"></activity>
<activity android:name="calc" android:theme="@android:style/Theme.Dialog"></activity>
<activity android:noHistory="true" android:name="vzm"></activity>
<activity android:noHistory="true" android:name="fo" android:theme="@android:style/Theme.Dialog"></activity>
<activity android:name="ShowCel" android:noHistory="true"></activity>
<activity android:name="SettCel" android:noHistory="true"></activity>
<activity android:name="contextm" android:theme="@android:style/Theme.Dialog" android:noHistory="false"></activity>
<activity android:name="mess" android:noHistory="true" android:theme="@android:style/Theme.Dialog"></activity>
<activity android:name="comment" android:noHistory="true"></activity>
<activity android:name="Geni"></activity>
<activity android:name="Ocenka" android:noHistory="true"></activity>

</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:13:55.863

解决了。只需删除 android:permission="android.permission.INTERNET" 即可进行活动 .Logon

# php - SOAP-ERROR：解析 WSDL：无法从

> ID：11082889
> 
> 赞同：16
> 
> 时间：2012-06-18T12:28:25.093
> 
> 标签：php, soap, https

在 PHP 中：我收到一个错误：

> SOAP 错误：解析 WSDL：无法从“ [http://xxx.xxxx.asmx?WSDL](http://xxx.xxxx.asmx?WSDL) ”加载：无法加载外部实体“ [http://xxx.xxxx.asmx?WSDL](http://xxx.xxxx.asmx?WSDL) ”

我的代码是：

```
<?php
header('Content-Type: text/plain');
if (!class_exists('SoapClient')) {
    die ("You haven't installed the PHP-Soap module.");
}

ini_set('max_execution_time', 1);
try {
    $options = array(
        'soap_version' => SOAP_1_2,
        'exceptions'   => true,
        'trace'        => 1,
        'cache_wsdl'   => WSDL_CACHE_NONE
    );
    $client = new SoapClient('http://xxx.xxxx.asmx?WSDL', $options);
    // Note where 'CreateIncident' and 'request' tags are in the XML
    $results = $client->CreateIncident(
        array(
            'FirstName'         => 'gyaan',
            'LastName'          => 'p',
            'Email'             => 'aa@gmail.com',
            'QueryProductClass' => 'QueryProductClass',
            'ChannelCode'       => 12,
            'CampaignCode'      => 234,
            'Lob'               => 'Lob',
            'PackageName'       => 'SEONI',
            'PackageCode'       => 'SMP',
            'TravelYear'        => 2012,
            'TravelMonth'       => 06,
            'TravelDay'         => 29,
            'CityOfResidence'   => 'Jabalpur',
            'ncidentNotes'      => 'testing ignor this',
            'MobilePhone'       => '1234567890',
            'DepartureCity'     => 'bangalore',
            'NoOfDaysTravel'    => '3 Days',
            'VendorName'        => 'TEST HIQ'
        )
    );
}
catch (Exception $e) {
    echo "<h2>Exception Error!</h2>";
    echo $e->getMessage();
}
?> 
```

请告诉我我在哪里犯错我是 WSDL 和肥皂的新手

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-08T14:48:40.070

我通过启用`php_openssl`扩展在我的 WAMP 设置中解决了这个问题，因为我从使用的 URL 加载`https://`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T20:15:54.220

我有完全相同的错误信息。就我而言，在我的`/etc/hosts`文件中（在托管服务的服务器上）为 WSDL 中引用的目标服务器创建一个条目修复了它。

一种措辞奇怪的错误消息..

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-16T20:05:53.127

我遇到了这个问题，我花了几个小时才弄清楚。此错误的主要原因是 SoapClient 无法从主机流式传输 Web 服务文件。我在我的 php.ini 文件中取消了“extension=php_openssl.dll”这一行的注释，它可以工作。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-09-06T07:34:42.170

尝试这个：

```
$Wsdl = 'http://xxxx.xxx.xx/webservice3.asmx?WSDL';
libxml_disable_entity_loader(false); //adding this worked for me
$Client = new SoapClient($Wsdl);
//Code... 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-26T08:32:58.287

如果您想在 localhost 上使用它，请使用 WAMP。

然后点击托盘图标>PHP 服务> 并启用以下功能：

*   **肥皂**
*   **php_openssl**
*   **openssl**
*   **卷曲**

ps 一些免费的虚拟主机可能没有这些选项

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-12-21T19:06:38.003

尝试添加这段代码。它对我有用。

```
$opts = array(
    'ssl' => array(
        'ciphers'     => 'RC4-SHA',
        'verify_peer' => false, 
        'verify_peer_name' => false 
    ),
);

// SOAP 1.2 client
$params = array(
    'encoding'           => 'UTF-8',
    'verifypeer'         => false,
    'verifyhost'         => false,
    'soap_version'       => SOAP_1_2,
    'trace'              => 1,
    'exceptions'         => 1,
    'connection_timeout' => 180,
    'stream_context'     => stream_context_create( $opts ),
);
$url = 'http://www.webservicex.net/globalweather.asmx?WSDL';

try {
    $client = new SoapClient( $url, $params );
} catch ( SoapFault $fault ) {
    echo '<br>' . $fault;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-25T02:22:10.080

我遇到了同样的错误，我在 php.ini 文件中查找soap设置并将**soap.wsdl_cache_enabled = 1**更改为**soap.wsdl_cache_enabled = 0解决了它**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-12T08:59:21.767

将 dns 条目添加到您的系统主机文件
例如：http://aaa.com/service.asmx?WSDL
您可以通过 ping 获取 aaa.com 的 IP 地址，
然后添加到主机文件

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-12-17T14:12:08.963

**从php.ini**配置文件中启用所有这些

```
extension=php_openssl.dll
extension=php_curl.dll
extension=php_xmlrpc.dll 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-08-28T10:12:13.440

您可以将此选项用于使用 wdsl 调用肥皂：

```
$opts = array(
            'http' => array(
                'user_agent' => 'PHPSoapClient'
            )
        );
        $context = stream_context_create($opts);

        $soapClientOptions = array(
            'stream_context' => $context,
            'cache_wsdl' => WSDL_CACHE_NONE
        );

        $wsdlUrl = 'your wsdl url';
        $soapClient = new SoapClient($wsdlUrl, $soapClientOptions);

        $result = $soapClient->VerifyTransaction($refNum, $MerchantCode); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-07-24T20:06:28.917

类似的错误也是如此。意识到我为特定主机设置了 .htpasswd。从 .htaccess 文件中取消注释它并且工作正常。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-06-16T07:47:39.053

我得到了同样的错误

> 无法连接到 Magento WebService API：SOAP-ERROR：解析 WSDL：无法从“example.com/api/soap/?wsdl”加载：无法加载外部实体“example.com/api/soap/?wsdl "

一旦我将 Magento Root URL 更新为

> example.com/index.php/api/soap/?wsdl

是的，我缺少导致错误的 index.php。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-12-02T16:49:01.987

正如前面的回复中提到的，当通过 HTTPS 连接与 SOAP 服务交互时，可能会发生此错误，并且连接存在问题。问题可能出在远程端（无效证书）或客户端（如果丢失 CA 或 PEM 文件）。有关所有可能的 SSL 上下文设置，请参阅[http://php.net/manual/en/context.ssl.php](http://php.net/manual/en/context.ssl.php)。就我而言，设置本地证书的路径解决了这个问题：

```
$context = ['ssl' => [
    'local_cert' => '/path/to/pem/file',
]];

$params = [
    'soap_version' => SOAP_1_2, 
    'trace' => 1, 
    'exceptions' => 1, 
    'connection_timeout' => 180, 
    'stream_context' => stream_context_create($context), 
    'cache_wsdl' => WSDL_CACHE_NONE, // eliminate possible issue from cached wsdl
];

$client = new SoapClient('https://remoteservice/wsdl', $params); 
```

# mysql - MYSQL 逗号分隔的 ID 与单独的表

> ID：11082894
> 
> 赞同：2
> 
> 时间：2012-06-18T12:28:50.303
> 
> 标签：mysql

考虑一个`products`包含产品详细信息（包括其类别）的表。一种产品可能属于多个类别，因此我将其保留为以逗号分隔的类别 ID 列表。

我知道这不是标准化的方法。

任何 MYSQL 专家都可以告诉我哪种方法可以更快地选择特定类别的产品。

显然，如果采用规范化方法，我们必须将`products`表和表连接起来。`products_category_relation`

**和**

在我的方法中，我们必须编写一个类似的查询来查找产品（假设我们正在搜索类别 id 10）

```
SELECT p.* 
FROM products p
WHERE p.category like '10' 
OR p.category like '10,%'
OR p.category like '%,10'
OR p.category like '%,10,%' 
```

谁能告诉我这种方法更快还是 JOIN 方法会更快？

我知道规范化。我知道我的方法涉及的其他风险。但就我而言，它们并不重要。所以，我关心的是速度。

欢迎任何关于其速度的理论解释或实际测试结果。

**更新**

我正在使用 myISAM 引擎产品表在表的列上有主键全文`product_id` 索引`category``products`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T12:35:59.777

尝试使用[`FIND_IN_SET`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)功能。

```
SELECT * FROM `products` WHERE FIND_IN_SET('10',`category`)>0; 
```

然后，您可以将结果与规范化方法进​​行比较，但这肯定比多个 LIKE 子句更健壮

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T12:33:12.827

符合第一范式的数据库会快得多。您的示例查询不能使用任何索引，需要进行全表扫描才能解决。更糟糕的是，它必须扫描整个文本字段的所有行，并且文本工作几乎总是比计算机的整数工作更昂贵。

规范化的表可以轻松地使用类别列上的索引来加快查询速度。

文本存储也可能需要更多的磁盘空间，因为数字在保存为字符时通常比作为正确的整数类型更昂贵（当然，行存储也涉及一些开销）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T12:33:48.623

采取标准化的方法。

您没有提供有关所涉及的表、在该表上设置的键和索引以及您正在使用的引擎的太多信息，但是`JOIN`在几乎任何情况下 a 都会更快（比`like`-mess 快得多）。

# c# - 如何在 C# (asp.net) 中使用 Request.Form 对创建 NameValueCollection 的方法进行单元测试

> ID：11082896
> 
> 赞同：0
> 
> 时间：2012-06-18T12:28:52.970
> 
> 标签：c#, visual-studio-2010, unit-testing

我有一个需要单元测试的方法，正如主题所暗示的那样，它会生成一个 NameValueCollection。NVC 的所有属性都通过表单数据填充：

```
private NameValueCollection generateCollection()
{
   NameValueCollection nvc;
   nvc = new NameValueCollection();
   nvc.add("firstItem", HttpUtility.HtmlEncode(Request.Form["firstItem"]));
   nvc.add("secondItem", HttpUtility.HtmlEncode(Request.Form["secondItem"]));
   nvc.add("thirdItem", HttpUtility.HtmlEncode(Request.Form["thirdItem"]));

   return nvc;
} 
```

我正在使用 Visual Studio 中包含的单元测试功能。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:30:51.737

您需要更改方法以获取`HttpRequestBase`.

然后，您可以使用模拟版本调用它。

# python - 给出错误无效的语法？

> ID：11082902
> 
> 赞同：0
> 
> 时间：2012-06-18T12:29:13.877
> 
> 标签：python

```
>>> a=1
>>> if a>6:
print "This is my insanity"
else:

SyntaxError: invalid syntax 
```

> > >

我写了简单的 if 条件来检查 if 条件，但它给出了错误“无效的语法”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:32:25.263

当我这样做时，我得到一个`IndentationError: expected an indented block`，不是`SyntaxError: invalid syntax`。您使用的是哪个 Python shell？

代码需要在下面正确缩进`if`（就像在`def`等下一样）。

此外，`else:`在它之后需要一些东西......现在你可以`pass`用作占位符（尽管如果你没有什么可以放在后面`else:`，就把它放在外面）

例如

```
a = 1
if a > 6:
   print "This is my insanity"
else:
   pass  # for now 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:32:32.953

您不能在 if 语句中将 else 块留空：

```
>>> a = 1
>>> if a > 6:
...     print "This is my insanity"
... else:
...     print "In else block"
...
In else block 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:33:35.980

Python 需要适当的缩进。

```
a=1
if a>6:
    print "This is my insanity"
else:
    print 'You need to have some command here as well!' # maybe try pass ? 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T12:32:17.023

```
a=1
if a>6:
    print "This is my insanity"
else:
    pass 
```

你不应该把 else 留作空使用 pass 什么都不做，而且还有缩进问题（可能在发布时）

# python - pyMySQL 设置连接字符集

> ID：11082909
> 
> 赞同：19
> 
> 时间：2012-06-18T12:29:29.933
> 
> 标签：python, mysql, unicode, pymysql

我正在使用 Flask 和 MySQL 开发一个相当简单的网络应用程序。

我正在努力使用 unicode。用户有时会粘贴他们从 Word 中复制的内容，而旧的智能引号会导致这些内容失效`u'\u201c'`。

一点点调查表明，我与 MySQL 的连接正在使用`Latin1`字符集（似乎是默认值）。

如何指定它使用 unicode 进行连接？

我正在使用 pyMySQL，它声称是 MySQLdb 的替代品。MySQLdb`set_character_set(self, charset)`为对象定义了一个函数`connection`，但 pyMySQL 没有（如果我尝试会出错）。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-18T12:47:28.980

我通过在[pyMySQL 源代码](https://github.com/PyMySQL/PyMySQL)中四处寻找来解决这个问题（我试过了，但找不到正确的地方！）。

您可以在创建连接时指定它：

```
conn = pymysql.connect(host='localhost',
                       user='username',
                       passwd='password',
                       db='database',
                       charset='utf8') 
```

解决了我的问题。

# .net - Castle DynamicProxy：获取未代理的对象

> ID：11082911
> 
> 赞同：8
> 
> 时间：2012-06-18T12:29:35.200
> 
> 标签：.net, castle-dynamicproxy

我正在使用 Castle DynamicProxy 为我的类型添加一个拦截器。现在我需要获取底层的基本类型（而不是代理本身）。

我在 SO 上发现了一些提示，建议像这样使用 ProxyUtil 类：

```
object realInstance = ProxyUtil.GetUnproxiedInstance(proxyInstance); 
```

这似乎不起作用

```
bool isProxy = ProxyUtil.IsProxy(realInstance); 
```

总是正确的。

我还尝试使用以下代码片段，这基本上是 ProxyUtil 正在做的事情：

```
var accessor = proxyInstance as IProxyTargetAccessor;
var realInstance = accessor.DynProxyGetTarget(); 
```

结果相同，realInstance 仍然是代理。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-04T07:37:13.680

这个问题有点老了，但希望我的解决方案（依赖于 .NET 4+）能对某人有所帮助。

创建代理如下：

```
ProxyGenerator generator = new ProxyGenerator();
MyClass proxy = generator.CreateClassProxyWithTarget(underlying, new MyInterceptor(this)); 
```

我已经能够使用以下方法获得底层目标：

```
internal static TType UnwrapProxy<TType>(TType proxy)
{
    if (!ProxyUtil.IsProxy(proxy))
        return proxy;

    try
    {
        dynamic dynamicProxy = proxy;
        return dynamicProxy.__target;
    }
    catch (RuntimeBinderException)
    {
        return proxy;
    }
} 
```

它依赖于 Castle 的内部实现——即生成的代理有一个 __target 成员。虽然它很好，而且是独立的，并且有一个或两个单元测试支持，如果更高版本的 Castle 破坏了这一点，我们应该捕捉到任何变化。这是使用城堡的 v3.2.0.0。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-04-14T01:59:42.847

如果您没有`invocation`可用的对象，或者您`'Castle.Proxies.IXeroServiceProxy.__target' is inaccessible due to its protection level`在尝试**@s1mm0t**的答案时观察到，您可以尝试使用反射而不是以下代码`dynamic`：

```
public static T UnwrapProxy<T>(T proxy) {
   if(!ProxyUtil.IsProxy(proxy)) {
      return proxy;
   }
   try {
      const System.Reflection.BindingFlags flags = System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance;
      var proxyType = proxy.GetType();
      var instanceField = proxyType.GetField("__target", flags);
      var fieldValue = instanceField.GetValue(proxy);
      return (T) fieldValue;
   }
   catch(RuntimeBinderException) {
      return proxy;
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T21:20:53.620

我只是使用这样的界面

```
public interface IMarker
{
  Type ActualType { get; }
} 
```

将其添加到我的代理并拦截它：

```
public class MyInterceptor<T> : IInterceptor 
```

...

```
if (invocation.Method.DeclaringType == typeof(IMarker))
{
  if (invocation.Method.Name.Equals("get_ActualType"))
  {
    invocation.ReturnValue = typeof(T);
    return;
  }
} 
```

所以最后我只需要检查

```
if( obj is IMarker ) 
  Type t = (obj as IMarker).ActualType` 
```

也许有更好的选择，但它可以工作并使我的代码免受城堡引用的影响。希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T23:24:00.780

如果您正在构建基于继承的代理 ( `generator.CreateClassProxy<MyClass>()`)，则代理**是**目标。

# hash - Clojure 映射限制和一致性

> ID：11082916
> 
> 赞同：6
> 
> 时间：2012-06-18T12:29:44.967
> 
> 标签：hash, map, clojure, hashmap

我想知道，考虑到 Clojure 使用 32 位哈希来实现其映射，如果 Clojure 映射因此具有 2^32-1 个键的限制（如果这不是真的，它如何管理冲突）以及它的哈希执行是[一致](http://en.wikipedia.org/wiki/Consistent_hashing)的。蒂亚！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T17:02:04.167

Clojure 映射是一种**持久**且不可变的自定义实现（即它不*使用*Java 哈希映射，在不可变数据结构中使用时无法提供足够的性能）。

它使用 32 位哈希码，因此**有 2^32 个可能的哈希桶**。在冲突的情况下，键和值存储在每个哈希桶的数组中，因此**可能有超过 2^32 个键**。请参阅[PersistentHashMap 源](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/PersistentHashMap.java)- 特别是 HashCollisionNode 内部类用于针对单个哈希码值存储一桶键/值。

由于可能的哈希桶的数量是固定的，因此一致的哈希是无关紧要的——密钥永远不需要重新映射。

也可以看看：

*   [http://www.infoq.com/presentations/Value-Identity-State-Rich-Hickey](http://www.infoq.com/presentations/Value-Identity-State-Rich-Hickey)（介绍 Clojure 并发方法的演示文稿，还涵盖了持久不可变数据结构）

# extjs - ExtJS 4.0.7：树形网格未显示

> ID：11082917
> 
> 赞同：2
> 
> 时间：2012-06-18T12:29:50.990
> 
> 标签：extjs, extjs4, treegrid

我无法让动态树形网格按应有的方式显示 - 网格后面的数据正在工作，我可以看到结果正在打印到 FireBug 控制台。然而它没有显示在 ExtJS 树网格中，除了已经在商店中静态设置的 Root 节点。

风景：

```
Ext.define('TS.view.file.archives.raGrid', {
    extend: 'Ext.tree.Panel',
    alias: 'widget.ramaingridpanel',

    id: 'raGrid',
    autoScroll: true,
    store: 'file.archives.Resources',
    layout: {
        type: 'hbox',
        align: 'top',
        pack: 'start'
    },
    columns: [{
        xtype: 'treecolumn',
        id: 'raGridResourceName',
        flex: 2,
        dataIndex: 'text',
        width: 100,
        hideable: false,
        groupable: false,
        text: 'Name',
        editor: {
            xtype: 'textfield'
        }
    }, {
        xtype: 'templatecolumn',
        id: 'raGridResourceIcon',
        tpl: new Ext.XTemplate('<div id="{iconCls}" class="{iconCls}" role="presentation">&nbsp;</div>').html,
        flex: 0.1,
        dataIndex: 'iconCls',
        hideable: false,
        groupable: false,
        editor: {
            xtype: 'combobox',
            store: Ext.data.StoreManager.lookup('file.archive.ResourceIcons')
        }
    }, {
        xtype: 'datecolumn',
        id: 'raGridDate',
        flex: 1,
        dataIndex: 'updated',
        hideable: false,
        groupable: false,
        text: 'Updated'
    }, {
        xtype: 'gridcolumn',
        id: 'raGridPurchasingUnit',
        flex: 1,
        dataIndex: 'purchasedUnit',
        groupable: false,
        text: 'Unit',
        editor: {
            xtype: 'textfield'
        }
    }, {
        xtype: 'numbercolumn',
        id: 'raGridCost',
        flex: 1,
        dataIndex: 'purchasedCost',
        groupable: false,
        text: 'Cost excl. VAT',
        editor: {
            xtype: 'textfield'
        }
    }, {
        xtype: 'numbercolumn',
        id: 'raGridDiscount',
        dataIndex: 'purchasedDiscount',
        flex: 1,
        groupable: false,
        text: 'Discount %',
        editor: {
            xtype: 'textfield'
        }
    }, {
        xtype: 'gridcolumn',
        id: 'raGridEstimatingUnit',
        flex: 1,
        dataIndex: 'estimateUnit',
        groupable: false,
        text: 'Unit',
        editor: {
            xtype: 'textfield'
        }
    }, {
        xtype: 'numbercolumn',
        id: 'raGridAddOn',
        flex: 1,
        dataIndex: 'profitAddOn',
        groupable: false,
        text: 'Mark-up %',
        editor: {
            xtype: 'textfield'
        }
    }, {
        xtype: 'numbercolumn',
        id: 'raGridLanded',
        flex: 1,
        dataIndex: 'landedCost',
        groupable: false,
        text: 'Landed cost',
        editor: {
            xtype: 'textfield'
        }
    }, {
        xtype: 'numbercolumn',
        id: 'raGridCostPrice',
        flex: 1,
        dataIndex: 'number',
        groupable: false,
        text: 'Costprice',
        editor: {
            xtype: 'textfield'
        }
    }, {
        xtype: 'numbercolumn',
        id: 'raGridUnitCorrelation',
        flex: 1,
        dataIndex: 'unitCorrelation',
        groupable: false,
        text: 'Prch./Est.',
        editor: {
            xtype: 'textfield'
        }
    }, {
        xtype: 'numbercolumn',
        id: 'raLeadTime',
        flex: 1,
        dataIndex: 'leadTime',
        groupable: false,
        text: 'Leadtime',
        editor: {
            xtype: 'textfield'
        }
    }, {
        xtype: 'gridcolumn',
        id: 'raGridClass',
        flex: 1,
        dataIndex: 'ResourceClassShortname',
        groupable: false,
        text: 'Class',
        editor: {
            xtype: 'textfield'
        }
    }, {
        xtype: 'gridcolumn',
        id: 'raGridSupplier',
        flex: 1,
        dataIndex: 'supplierName',
        groupable: false,
        text: 'Supplier',
        editor: {
            xtype: 'textfield'
        }
    }],
    viewConfig: {
        id: 'raGridView'
    },
    plugins: [{
        ptype: 'rowediting',
        autoCancel: false,
        clicksToEdit: 2
    }, {
        ptype: 'gridviewdragdrop',
        ddGroup: 'raDdGroup'
    }]
}); 
```

店铺：

```
Ext.define('TS.store.file.archives.Resources', {
    extend: 'Ext.data.TreeStore',
    alias: 'store.file.archives.Resources',

    model: 'TS.model.file.archives.Resources',
    autoLoad: false,
    proxy: {
        type: 'ajax',
        url: 'index.php/ajax/resources/',
        reader: {
            type: 'json',
            root: 'results',
            successProperty: 'success',
            totalProperty: 'total'
        }
    },
    root: {
        text: 'Resources',
        id: 'myResources',
        expanded: true,
        children: {}
    }
}); 
```

该模型：

```
Ext.define('TS.model.file.archives.Resources', {
extend : 'Ext.data.Model',
alias : 'model.file.archives.Resources',

fields : [ {
    name : 'id',
    type : 'int'
}, {
    name : 'parent_id',
    type : 'int'
}, {
    name : 'child_id',
    type : 'int'
}, {
    name : 'text',
    type : 'string'
}, {
    name : 'updated',
    type : 'date'
}, {
    name : 'purchasedUnit',
    type : 'string'
}, {
    name : 'purchasedCost',
    type : 'double'
}, {
    name : 'purchasedDiscount',
    type : 'double'
}, {
    name : 'estimateUnit',
    type : 'string'
}, {
    name : 'profitAddOn',
    type : 'string'
}, {
    name : 'addonManager',
    type : 'string'
}, {
    name : 'landedCost',
    type : 'double'
}, {
    name : 'unitCorrelation',
    type : 'double'
}, {
    name : 'leadTime',
    type : 'string'
}, {
    name : 'ResourceClassShortname',
    type : 'string'
}, {
    name : 'supplierName',
    type : 'string'
}, {
    name : 'iconCls',
    type : 'string'
}, {
    name : 'ClientSessionId',
    type : 'string'
} ]
}); 
```

JSON数据：

```
({
    "success":"true", 
    "total":"1", 
    "results":
    [{
        "id":0,
        "parent_id":0,
        "child_id":2,
        "text":"Gravemaskiner",
        "updated":1339079129,
        "purchasedUnit":"",
        "purchasedCost":0,
        "purchasedDiscount":0,
        "estimateUnit":"",
        "profitAddOn":"",
        "landedCost":0,
        "unitCorrelation":0,
        "leadTime":"",
        "ResourceClassShortname":"",
        "supplierName":"",
        "iconCls":"iconFolder",
        "leaf":false,
        "children":... 
```

如果有人能这么好心地指出我的代码有什么问题那就太好了，

G。

使用 ExtJS 4.0.7

* * *

**更新：2012-06-19**

进行了很多测试，这个错误似乎与它有关，但我不确定它是什么意思以及如何解决它：

`records[i] is undefined` `/extjs/ext-all-dev.js Line 88068`

已将对象打印到控制台，它们清楚地显示了商店中的数据。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:20:32.143

您的读者需要像这样定义：

```
reader : {
    type : 'json',
    root : 'children',
    successProperty : 'success',
    totalProperty : 'total'
} 
```

并且您的 json 根目录应该从更改`results`为`children`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:06:34.413

Sencha支持回复如下：

> 树没有正确加载的原因是因为 json 对树的消化无效。

问题出在 JSON 中 - 它是如何生成的：

```
// I used this:
$result[$i] = $newArray;

// To fix I had to use this to generate the JSON
array_push($result,$newArray); 
```

和：

> 我确实注意到您的原始 json，它被包裹在“（）”中，这是不正确的。

# module - Yii 框架 - 嵌套模块

> ID：11082924
> 
> 赞同：3
> 
> 时间：2012-06-18T12:30:21.847
> 
> 标签：module, yii

我正在尝试定义嵌套模块，但在教程中找不到任何完整的解释。

我有一个模块`admin`，我想在其中添加另一个模块`imgManager`，这是我的目录结构：

```
protected
    ...
    modules
        admin
           ...
           modules
                imgManager
           ...
    ... 
```

我在我的主配置文件中定义了嵌套模块，如下所示：

```
'modules'=>array(
    ...
            'admin'=> array(
                'modules'=>array( 
                    'imgManager' => array(
                        'import'=>array('imgManager.*','imgManager.components.*'),
                        'layout'=>'application.views.layouts.column1',
                        'upload_directory'=>'gal_images',
                        'max_file_number' => '10',//max number of files for bulk upload.
                        'max_file_size' => '1mb',
                          ),
                    ),
            ),      
), 
```

这是我的 urlManager：

```
'components'=>array(
    ...
    'urlManager'=>array(
        'urlFormat'=>'path',
                    'showScriptName'=>false,
        'rules'=>array(
                     'admin'=>'admin',
                     'admin/<controller:\w+>'=>'admin/<controller>',
                     'admin/<controller:\w+>/<action:\w+>'=>'admin/<controller>/<action>',

            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',

        ),
    ), 
```

我需要像这样访问这个嵌套模块：`mydomain.com/admin/imgManager`但我得到`Error 404 Unable to resolve the request "admin/imgManager".`了我在哪里做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T12:41:01.967

我还必须在这里定义模块：

```
class AdminModule extends CWebModule
{
     public function init()
     {
           ...
           $this->setModules(array('imgModule'));
         }
         ...
} 
```

# mysql - 终端中的mysql

> ID：11082927
> 
> 赞同：0
> 
> 时间：2012-06-18T12:30:32.337
> 
> 标签：mysql, terminal

当我尝试通过终端连接到 mysql 时，我收到以下错误消息：

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) 
```

这可能是什么原因造成的？我尝试更改我的 tmp 目录的权限，但没有奏效。mysql.sock 文件也不存在。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:37:43.577

很可能您已经为 MySQL 服务器配置了非默认设置——特别是禁用了套接字连接或更改了套接字文件。您可以尝试通过另一个套接字连接（检查 my.cnf 配置文件以获取特定的套接字文件名）：

```
mysql -u username -pPassword --socket=/your/path/to/socket/file 
```

或者您也可以尝试通过 TCP 连接：

```
mysql -u username -pPassword -h your_hostname_or_ip -P 3306 
```

3306 是 MySQL 的默认 TCP 端口，但也可能因您在 my.cnf 中的设置而异。

顺便说一句，您的问题可能更适合[ServerFault.com](https://serverfault.com/)

# c# - 我应该在一般领域使用什么模式？

> ID：11082929
> 
> 赞同：2
> 
> 时间：2012-06-18T12:30:32.783
> 
> 标签：c#, .net, oop

我有一个类`Field`，其中有两个子类`AccountField`和`DecimalField`.

IE

```
class Field{//some properties} 

class DecimalField : Field {...}

class AccountField : Field {...} 
```

然后我有另一个类`Data`，它的成员属性为 type `Field`。

但它有问题。如果我将一个`DecimalField`变量分配给其中的`Field`属性，`Data`那么我不能使用变量的某些属性，`DecimalFields`也不能使用相同的`Accountfield` 变量......

我必须做什么？我必须使用哪种模式？

我正在使用 C# 4.0 和 MS Studio 2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:33:30.127

**一般**或**抽象**的方法是：

*   创建一个具有可以在子类中覆盖的虚函数/属性的通用泛型类。
*   并且对*严格*与指定类型相关的子类成员，因此不能一概而论，制作一个`cast`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T12:44:19.573

是的你可以。

假设您有这样的字段类

```
public class Field
{
   public string Property1{get;set;}
   public int Property2 {get;set;}
} 
```

和这样的十进制字段类

```
 public class DecimalField:Field
   {
    public int DecimalFieldProperty {get;set;}
} 
```

,和这样的Accountfield

```
public class AccountField:Field
    {
       public double Balance{get;set;}
} 
```

，并假设您有一个名为 DoSomething 的方法，该方法需要一个**Field**类型的参数，如下所示

```
void DoSomething(Field field)
{} 
```

然后要获取传入的具体类型，您可以执行类似的操作

```
 void DoSomething(Field field)
    {
        var decimalField = field as DecimalField;

        //Do something with the decimal field instance
        if(decimalField  !=null)
         {
           Console.WriteLine("Decimal Field Property {0}",decimalField .DecimalFieldProperty );
          return;

        }

        //Cast the field as a account field instance
      var accountField = field as AccountField;
       if(accountField !=null)
       {
         Console.WriteLine("Balance {0}", accountField.Balance );

        return;
      }

      //Do something else with the normal field
    Console.WriteLine("Normal Field");

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T12:35:25.700

如果您想使用 DecimalField 和 AccountField 类型中的属性，这些属性应该/可以在 Field 类型中。

如果你想使用只有 DecimalField 知道的属性，你需要将 Field 转换为 DecimalField：

```
Data data = new Data();
data.Field = new DecimalField();
Field field = data.Field;
DecimalField df = data.Field as DecimalField;
if(df != null)
{
    // use df
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T12:34:07.820

多态性并不是真正的模式，但是是的，它按照您描述的方式正常工作。如果将 DecimalField 分配给 Field 类型的变量，则只能使用 Field 的属性。如果您需要 DecimalField 的属性，则需要将其转换回 DecimalField。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T12:34:51.920

在您的 Data 类中，不要将您的字段声明为 Field，而是酌情使用 DecimalField 或 AccountField。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T12:49:11.937

这不起作用：

```
Field field = myData.Fields[0];
Console.Writeline(field.Name); //assuming Name only exists in AccountField 
```

但如果该字段是 AccountField，那么您可以进行*引用转换*并使用 AccountField 特定属性：

```
if(myData.Fields[0] is AccountField)
{
    var acctField = (AccountField)myData.Fields[0];
    Console.Writeline(acctField.Name);
} 
```

# javascript - jsp中'mustached'下划线模板中的for循环

> ID：11082930
> 
> 赞同：1
> 
> 时间：2012-06-18T12:30:33.047
> 
> 标签：javascript, jsp, underscore.js, mustache

我在 jsp 应用程序中使用带骨干的下划线。

为了做到这一点，我使用了：

```
_.templateSettings = {
        interpolate : /\{\{(.+?)\}\}/g
    }; 
```

为了有类似小胡子的模板以避免jsp冲突。

到此为止，一切正常（即用简单的值正确填充模板）。

现在，我试图在模板中添加一个 for 循环以显示一个 json 数组。

所以我添加了这段代码：

```
<script type="text/template" id="im-template">
<div class="row">                                       
    <div class="horizontal-scroll">
        {{ for (var i = 0; i < data.length; i++) { 
            var template = data[i];
            alert(template.name);
        } }}
    </div>
</div>
</script> 
```

但是在运行应用程序时，我得到：

```
Uncaught SyntaxError: Unexpected token for 
```

您知道可能是什么问题或我该如何解决？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:22:28.310

您正在替换错误的正则表达式，您想要替换*评估*正则表达式而不是*插值*正则表达式。来自[精美手册](http://underscorejs.org/#template)：

> 定义一个**插值**正则表达式以匹配应逐字插入的表达式，一个**转义**正则表达式以匹配应在 HTML 转义后插入的表达式，以及一个**评估**正则表达式以匹配应在不插入结果字符串的情况下计算的表达式。

插值用于将模板标记替换为 JavaScript*表达式*的结果，但`for`循环不是 JavaScript 中的表达式。

如果你想使用这样的循环，你想替换*评估*`for`正则表达式：

```
_.templateSettings.evaluate = /\{\{(.+?)\}\}/g; 
```

演示：http: [//jsfiddle.net/ambiguous/gaYRb/](http://jsfiddle.net/ambiguous/gaYRb/)

# eclipse - Eclipse 编辑器：在垂直标尺的自定义列上显示标记

> ID：11082933
> 
> 赞同：7
> 
> 时间：2012-06-18T12:30:38.867
> 
> 标签：eclipse, editor, eclipse-rcp, eclipse-plugin

我之前问过一个[关于 VerticalRulers](https://stackoverflow.com/questions/10992863/creating-verticalruler-and-add-information)的问题，有了这个提示，我向 VerticalRuler 添加了第二个 Column 并尝试向它添加一个 Marker，但 Marker 总是出现在标准 Column 上，而不是我的。我添加了第二个行号列来说明我的问题。我该如何改变这种行为？谢谢你的帮助。

```
@Override
protected IVerticalRuler createVerticalRuler(){
    IVerticalRuler ruler =  super.createVerticalRuler();
    ruler2 = (CompositeRuler) ruler;
    column1 = new AnnotationRulerColumn(100);
    ruler2.addDecorator(0, column1);
    ruler2.addDecorator(2, createLineNumberRulerColumn());
    column1.addAnnotationType("MARKER");
    return ruler;
}
public String check_line(){
    IEditorPart editor = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().getActiveEditor();
    IFileEditorInput input = (IFileEditorInput)editor.getEditorInput() ;
    IFile file = input.getFile();
    IResource res = (IResource) file;
    try{
        IMarker m = res.createMarker(IMarker.MARKER);
        m.setAttribute(IMarker.LINE_NUMBER,2);
        m.setAttribute(IMarker.MESSAGE, "lala");
        m.setAttribute(IMarker.TEXT, "test");
        m.setAttribute(IMarker.PRIORITY, IMarker.PRIORITY_HIGH);
        m.setAttribute(IMarker.SEVERITY, IMarker.SEVERITY_INFO);
    } catch (CoreException e) { ... }
    return "marker created";
} 
```

![在此处输入图像描述](../Images/a9a7950753a806ac66ece2094fe81286.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:14:01.713

您只需为 AnnotationRulerColumn 使用不同的构造函数：

```
AnnotationRulerColumn(int width, IAnnotationAccess annotationAccess) 
```

您可以使用`DefaultMarkerAnnotationAccess`参数`IAnnotationAccess`：

```
protected IVerticalRuler createVerticalRuler(){
    IVerticalRuler ruler =  super.createVerticalRuler();
    CompositeRuler ruler2 = (CompositeRuler) ruler;
    column1 = new AnnotationRulerColumn(100, new DefaultMarkerAnnotationAccess());
    ruler2.addDecorator(0, column1);
    ruler2.addDecorator(2, createLineNumberRulerColumn());
    column1.addAnnotationType("MARKER");
    return ruler;
} 
```

我假设您已经为您的标记定义了一个名为“MARKER”的注释类型。如果不是，请确保为`column1.addAnnotationType("MARKER");`. 您可以定义自己的注释类型并将其映射到具有扩展点[Annotation Types](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_editors_annotationTypes.html)的标记类型。

然后，您的标记/注释应显示在您自己的垂直标尺上。

# javascript - getElementsByTagName () [0] 未定义

> ID：11082934
> 
> 赞同：1
> 
> 时间：2012-06-18T12:30:39.147
> 
> 标签：javascript, ajax

我第一次尝试使用 AJAX，但遇到了错误。我见过一些人有类似的问题，但是在阅读了他们之后，我仍然无法弄清楚我的代码有什么问题。

我遇到的问题是`rf.getElementsByTagName("motd")[0]`未定义。

这是代码：

```
function refresh() {
    var url = document.getElementById("url");
    var req;
    if (window.XMLHttpRequest) {
        req = new XMLHttpRequest();
    } else {
        req = new ActiveXObject("Microsoft.XMLHTTP");
    }
    req.onreadystatechange=function() {
        if (req.readyState==4 && req.status==200) {
            var rf;
            if (window.DOMParser) {
                parser = new DOMParser();
                rf=parser.parseFromString(req,"text/xml");
            } else {
                rf = new ActiveXObject("Microsoft.XMLDOM");
                rf.async = false;
                rf.loadXML(req); 
            }
            document.getElementById("result").innerHTML="<div id=\"success\">"+
            rf.getElementsByTagName("motd")[0]+"&nbsp;";
        } else {
            document.getElementById("result").innerHTML="<div id=\"working\">Checking...</div>";
        }
    }
    req.open("POST","g2mc_status.php",true);
    req.send("server="+url);
} 
```

我正在尝试处理的 XML（即所有 .php 文件现在都设置为输出）：

```
<minecraft server="mc.nrd.li" port="25565">
    <motd>NerdConglomerate</motd>
    <players>
        <online>0</online>
        <maximum>20</maximum>
    </players>
</minecraft> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:36:26.493

您正在传递`req`而不是传递`req.responseText`或传递`req.responseXML`给 XML 解析器。

否则工作正常：http: [//jsfiddle.net/cLGGZ/](http://jsfiddle.net/cLGGZ/)

# python - 如何在python中多次运行for循环？

> ID：11082937
> 
> 赞同：0
> 
> 时间：2012-06-18T12:30:49.100
> 
> 标签：python, loops, for-loop

我正在尝试获取用户输入并交叉引用它以查看它是否在文件中。但是，它只运行一次 for 循环；如果我第一次做对了，如果我第一次做错了，那么它永远不会做，因为 for 循环只运行一次。当它重新运行 while 循环时，它永远不会重新运行 for 循环。为什么python只允许你运行一次循环，我该如何解决这个问题？这是代码，

```
testDate = open("Sales.txt")

def DateTest(Position):

    validSyntax = False
    Complete = False
    DateIn = True
    while Complete == False:

            if DateIn == False:
                    print
                    print "That date is not in the file."
                    print
            Date = raw_input("Please input the desired %s date in the form YYYY,MM,DD: " % Position)

            try :
                Date = Date.strip().split(',')
                Year = int(Date[0])
                Month = int(Date[1])
                Day = int(Date[2])
                Date = (Year, Month, Day)
            except:
                print
                print "That is invalid input."
                print
            else:
                validSyntax = True

            if validSyntax == True:
                #It only runs this once, if I put a debug statement after the 'for' #then it never prints out, the loop never runs after the first time
                for line in testDate:
                    line = line.strip().split(',')
                    yearTest = int(line[0])
                    monthTest = int(line[1])
                    dayTest = int(line[2])
                    dateTest = (yearTest, monthTest, dayTest)
                    if Date == dateTest:
                        Complete = True
                        print 'success'

            DateIn = False
            validSyntax = False

Response = DateTest("start") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:35:02.897

将文件视为可迭代将读取指针移动到每行的末尾，因为它被读取。一旦到达文件的末尾，就没有更多数据可以从中读取。

您有 2 个选项。如果您乐于保持文件打开并反复阅读，您可以`testDate.seek(0)`在`for`循环之前执行此操作，这会将指针移回开头。

或者，如果文件相对较小并且您想避免持续的磁盘访问，您可以将整个文件读入脚本开头的行列表中，将顶部的 open 调用替换为以下内容：`testDate = open("Sales.txt").readlines()`

# mediaelement.js - MediaElement.js：如何以 00:00|00:00 格式显示时间

> ID：11082945
> 
> 赞同：0
> 
> 时间：2012-06-18T12:31:06.697
> 
> 标签：mediaelement.js

我在代码选项中发现了 timeAndDurationSeparator，但没有成功。如何使用它？存在如何以“00:00 | 00:00”（当前时间+分隔符+持续时间）格式显示时间的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:15:05.647

我通过选项“功能”解决了它。我不知道这可能会更改功能顺序。我很惊讶网站上没有描述如此重要的信息。当您通过选项更改功能顺序时，即。而不是“功能：'播放暂停'，'当前'，'进度'，'持续时间'，'曲目'，'音量'，'全屏']”你设置“功能：'播放暂停'，'进度'，'当前' , 'duration', 'tracks', 'volume', 'fullscreen']"，您的播放器以接近“duration”的“Current time”呈现。之后，您可以在当前跨度的样式中添加边框并解决。

# image - 如何检测文件是否是perl中的图像

> ID：11082947
> 
> 赞同：7
> 
> 时间：2012-06-18T12:31:07.743
> 
> 标签：image, perl, detection

为了设置一些变量，如果我的服务器上的给定文件是图像，我需要这些信息。我对文件的位置和名称一无所知。

**有没有办法在不查看文件扩展名的情况下检测文件是否为图像？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T12:53:55.213

一个简单的方法是通过[PerlMagick](http://search.cpan.org/dist/PerlMagick/) CPAN 模块将工作委托给 ImageMagick。`Identify`和`Ping`方法就是为此目的而设计的。

```
use strict;
use Image::Magick;

my $im = Image::Magick->new();

my ($width, $height, $size, $format) = $im->Ping('/path/to/my/image.jpg'); 
```

执行这个小程序后，`$format`变量将包含一个带有已识别图像格式的字符串（在本例中：“JPEG”），或者`undef`在错误的情况下（不存在的文件、无法识别的格式等）。

**编辑： ...并完全回答您的问题：如果返回格式字符串，并且如果它是您决定从 ImageMagick**[支持的列表中](http://www.imagemagick.org/script/formats.php)`Ping`列入白名单的任何子集的一部分，则可以安全地假设给定文件是图像[格式](http://www.imagemagick.org/script/formats.php)（也包括非图像格式）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-18T13:34:21.770

JRFerguson`file`在附加到问题的评论中提到了该命令。它带有一个 C 库对应部分，`libmagic`. Perl 绑定称为[File::LibMagic](http://p3rl.org/File::LibMagic)。

```
use File::LibMagic qw();
my $detect = File::LibMagic->new;
$detect->checktype_filename("first_success.jpg") =~ /^image/ 
```

对于图像类型，表达式返回 true。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-06T20:42:55.283

`file`正如@JRFerguson 首次提到的，该命令与`File::LibMagic`、`Image::Magick`或相比具有限制`Image::ExifTool`。

但是`file`当您无法安装或使用这些模块时非常好。至于示例代码，您可以使用以下内容：

```
my $file = "/dir/images/image.jpg";
my $type = `file $file`;

unless ($type =~ /JPEG/i
     || $type =~ /PNG/i) {
print "The file is not a valid JPEG or PNG.";
} 
```

这个想法只是针对已知的图像格式进行正则表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T19:34:37.633

你已经得到了两个很好的答案。在这些情况下，还有一种工具可能很有价值。它会比 libmagic 解决方案慢，但有时它更适合额外的信息和实用程序。我不知道哪种工具更全面或在边缘情况下可能会失败。[图片::ExifTool](https://metacpan.org/module/Image%3a%3aExifTool) –

```
use Image::ExifTool "ImageInfo";

my $info = ImageInfo(shift || die "Give an image file!\n");

print "This is a ", $info->{FileType}, "\n";

use Data::Dump "pp";
print "Here's more...\n";
pp $info; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-08T04:44:21.220

这是我做到这一点的方法之一。使用 perl 模块形式的 CPAN "Image-Size-3.300 > Image::Size"。它还具有文件属性图像“类型”。然后，您可以获取这些变量并使用这些信息来处理您的应用程序的代码。

```
#!/usr/bin/perl 

use Image::Size;

print "Content-type: text/html\n\n";

my ($image_width, $image_height, $image_type) = imgsize("path/image.jpg");

unless ($image_type =~ /JPG/i
 || $image_type =~ /PNG/i) {
print "The file is not a valid JPG or PNG.";
}

#To see the results printed to the web browser
 print "<br>(image.jpg) $image_width - $image_height - $image_type<br>\n";

exit(0); 
```

# android - 在android上暂停/睡眠之前和之后执行脚本

> ID：11082948
> 
> 赞同：1
> 
> 时间：2012-06-18T12:31:14.483
> 
> 标签：android, hook, resume, suspend

我想在我的 android 设备进入睡眠状态之前以及在它唤醒之后执行一个脚本。我发现对于 c 有一个类似于“early_suspend”的钩子，但我只想执行几行 bash，我还不想进行交叉编译。

背景如下：我有一个糟糕的 Archos 平板电脑（使用 android 2.2），如果屏幕亮度太低，它有时在暂停后不会重新激活屏幕。我现在的解决方法是在暂停之前增加亮度，然后在醒来后再次恢复。

附带说明：我的设备已植根，只要它有效，我不在乎解决方案有多丑陋。

那么android中的shell代码是否有一些“提前暂停”钩子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:51:14.357

我找到了一种方法来等到在有根的 ICS Galaxy Note 上睡觉。您可以使用“cat /sys/power/wait_for_fb_sleep”（和 wait_for_fb_wake）等待手机睡眠或唤醒。

# mysql - SQL查询拆分并对应另一个表

> ID：11082949
> 
> 赞同：-1
> 
> 时间：2012-06-18T12:31:23.033
> 
> 标签：mysql, sql

我有两张桌子：

```
Table_A
name1
create_date

Table_B
name2
keep_time 
```

`name1`类似于 xxxxxx-yyy 并且`name2`类似于 xxxxxxx。 `name2`恰好是`name1`由'-'分隔的第一部分。

我想获取 中的所有行`Table_A`，其`keep_time`小于（现在 - `create_date`）。

如您所知，问题是**我如何拆分`name1`by '-' 字符**并获取第一部分并`keep_time`通过`Table_B`对应的`name2`.

我需要在 MySQL 中为这样的查询编写 SQL 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:42:24.277

如果我正确理解了您的要求：

```
SELECT a.* FROM table_A a
  LEFT JOIN table_B b on b.name2 = SUBSTRING_INDEX(a.name1, '-', 1)
  WHERE DATEDIFF(NOW(), a.create_date) < b.keep_time 
```

**编辑**：日期差异。

# mysql - 将列名映射到字段名 LOAD XML LOCAL INFILE

> ID：11082952
> 
> 赞同：0
> 
> 时间：2012-06-18T12:31:37.620
> 
> 标签：mysql, xml, postgresql, local, load-data-infile

我刚刚从 phpPgAdmin 导出了一个 XML 格式的数据表。我想将此文件加载到我的本地 mysql 数据库中。两个数据库的表结构相同。

我知道 mysql 允许使用下面的示例 xml 结构导入 xml 数据：

```
<row>
<field name='column1'>value1</field> 
```

我的问题是 phpPgAdmin 以这种格式导出了数据：

```
 <row>
    <column name='column1'>value1</column> 
```

有没有办法映射或设置列名，以便我可以使用 LOAD XML LOCAL INFILE 导入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:35:09.397

您可能早就想通了，但是来自 SO: [LOAD XML LOCAL INFILE with Inconsistent Column Names 的](https://stackoverflow.com/questions/8582837/load-xml-local-infile-with-inconsistent-column-names)答案应该告诉您如果没有的话。我是 MySQL 新手，遇到的问题与您的问题非常相似。希望这对其他人（如果不是您）有所帮助。

# objective-c - magicrecord 删除非导入数据

> ID：11082962
> 
> 赞同：3
> 
> 时间：2012-06-18T12:32:05.293
> 
> 标签：objective-c, ios, core-data, magicalrecord

想象一下CoreData中的以下关系

```
Recipe < --- >> Ingredient 
```

我正在使用 MagicalRecord 定期将服务器数据库 (JSON API) 与我的本地 CoreData 数据库一起导入。

`Recipe 1`所以，如果我这样导入`Ingredient 1`：

```
{
  id:1,
  name: "Recipe 1",
  ingredients: [{
    name: 'Ingredient 1'
  }]
} 
```

所以非常好，MagicalRecord 创建了两个实体并将它们链接在一起。

当服务器更改为以下内容时出现问题：

```
{
  id:1,
  name: "Recipe 1",
  ingredients: [{
    name: 'Ingredient 2' <-- Notice here
  }]
} 
```

MagicalRecord 所做的是创建`Ingredient 2`记录（正确），将其链接为（正确）的*唯一*成分`Recipe 1`。但是，如果我搜索成分，我会在我的 CoreData 数据库中找到*2条记录。*

所以问题是，是否可以在导入和删除对象时跟踪“已删除”对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-14T02:38:36.237

我按照这个过程解决了这个问题。

1.  在您的核心数据存储上运行一个查询，该查询将返回您对任何给定服务器请求的期望值。查找预期由服务器返回的查询找到的每个对象的所有 objectID。
2.  发出服务器请求并导入数据。
3.  在保存之前，从您刚刚用于导入数据的上下文中获取所有更新的对象。
4.  删除原始 objectID 列表中不在更新后 objectID 列表中的任何对象

这种方法应该为任何给定的请求实现所需的行为。请注意，您仍然可能会删除从其他地方引用的记录，因此只有在将来的其他请求可以重新创建它们时才使用这种方法。

**导入代码**

```
NSArray *existingObjectIDs = [self existingObjectIDsForYourQuery];

[MagicalRecord saveWithBlock:^(NSManagedObjectContext *localContext) {
                    [Recipe MR_importFromObject:response inContext:localContext];
                    NSArray *objectIDs = [[[localContext updatedObjects] allObjects] valueForKey:@"objectID"];
                    [self deleteLocalObjectsWithObjectIDs:existingObjectIDs excludingImportedObjectIDs:objectIDs];
}]; 
```

**删除代码**

```
- (void)deleteLocalObjectsWithObjectIDs:(NSArray *)existingObjectIDs excludingImportedObjectIDs:(NSArray *)importedObjectIDs {
    NSMutableArray *objectsToDelete = [NSMutableArray arrayWithArray:existingObjectIDs];

    for ( NSManagedObjectID *objectID in importedObjectIDs ) {
        [objectsToDelete removeObject:objectID];
    }

    [MagicalRecord saveWithBlockAndWait:^(NSManagedObjectContext *localContext) {
        for ( NSManagedObjectID *objectID in objectsToDelete ) {
            NSManagedObject *object = [localContext existingObjectWithID:objectID error:nil];

            if ( object ) {
                [localContext deleteObject:object];
            }
        }
    }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:15:39.183

这里真正的问题是 MagicalRecord 似乎正在导入重复项。这个问题应该已经在最近的更新中解决了，但是，如果你仍然有问题，我建议在[项目问题页面上打开一张票](https://github.com/magicalpanda/magicalrecord/issues)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T14:47:57.580

`Ingredient`如果这是您用作主键的名称，则不能只更改服务器上的名称。MagicalRecord 和 Core Data 不知道更新了哪条记录，它只知道不`Ingredient`存在具有该名称的记录，它会为您创建一个新记录并从`Recipe`. 您必须手动删除本地应用程序数据库中 JSON 有效负载中不存在的所有记录。

考虑以下：

您的`Ingredient`对象没有主键。您必须让 MagicalRecord 知道哪个键是主键（当不存在“ingredientID”属性时。

您可以通过进入核心数据模型并选择`Ingredient`实体来完成此操作。接下来，在数据模型检查器的用户信息中添加一个“relatedByAttribute”键，值是“name”。

接下来进入您的`Recipe`实体，选择关系`Ingredient`并在用户字典中为关系添加“relatedByAttribute”键和“name”值。这样，MagicalRecord 现在知道`Ingredient`通过“名称”属性查找任何现有记录，如果存在，它将映射到现有记录，其他记录创建一个新实体并链接`Recipe`到它。

您可以在此处阅读更多信息：[http](http://www.cimgf.com/2012/05/29/importing-data-made-easy/) ://www.cimgf.com/2012/05/29/importing-data-made-easy/ ，特别是您感兴趣的“按键相关”部分。

同样，如上所述，您只更新了名称，这意味着您可能应该删除`Ingredient`当前`Recipe`. 如果您删除服务器上的对象，您也需要在本地数据库中删除它。

如果您仍然遇到问题，我建议您创建一个类别类`Recipe`，您可以在其中手动查找与名称匹配的任何记录并相应地创建/更新。但是不要忘记删除payload中不存在但本地存在的记录。

# c++ - 为什么g++链接标准库？

> ID：11082963
> 
> 赞同：0
> 
> 时间：2012-06-18T12:32:10.630
> 
> 标签：c++

我有一段简单的 c++ 代码：

```
#include <iostream>
using namespace std;

int main ()
{
  cout << "Hello World!";
  return 0;
} 
```

当我生成此代码的程序集时，我得到一个巨大的程序集文件，我认为它是标准库的编译。为什么会发生这种情况，我该如何预防？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:46:10.733

许多标准库都是由模板组成的。当您使用模板时，它会专门供您使用，并且专业化将成为您的二进制文件的一部分。这是无法避免的，尽管您可以使用外部模板确保专业化仅在您的一个翻译单元中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-18T13:37:24.983

std::cout 是标准库的一部分。

你用过。

真的很明显。

Iostreams 是模板，因此代码是在您的对象中发出的，而不是在共享库中，但启用优化后，（剥离的）大小不应大于实现 helloworld 所需的大小。

有关另一个答案，请参见[http://www2.research.att.com/~bs/bs_faq.html#Hello-world](http://www2.research.att.com/~bs/bs_faq.html#Hello-world)。

# iphone - iOS 简单游戏，从给定数据中选择答案并设置分数

> ID：11082964
> 
> 赞同：1
> 
> 时间：2012-06-18T12:32:12.983
> 
> 标签：iphone, ios, xcode, nsarray

我正在尝试编写一个简单的游戏，该游戏基于从几个问题（如学校考试）中选择正确答案（AB 或 C），并计算正确/错误答案以设置分数。我不知道如何使用 NSArray 存储所有问题和正确答案以及如何设置分数。我唯一的解决方案是为每个问题创建一个新视图，但这听起来像是一个糟糕的解决方案。任何帮助将不胜感激。谢谢

视图控制器.h

```
@interface ViewController : UIViewController {

IBOutlet UILabel *numPregunta;
IBOutlet UILabel *pregunta;
IBOutlet UILabel *lblRespuesta1;
IBOutlet UILabel *lblRespuesta2;
IBOutlet UILabel *lblRespuesta3;
IBOutlet UILabel *lblResultado;

IBOutlet UIButton *respuesta1;
IBOutlet UIButton *respuesta2;
IBOutlet UIButton *respuesta3;

}

-(IBAction)btnRespuesta1:(id)sender;
-(IBAction)btnRespuesta2:(id)sender;
-(IBAction)btnRespuesta3:(id)sender;
-(IBAction)nextPregunta:(id)sender;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{

numPregunta.text = @"Question 1";
pregunta.text = @"Question 1 text";
lblRespuesta1.text = @"ANSWER 1";
lblRespuesta2.text = @"ANSWER 2";
lblRespuesta3.text = @"ANSWER 3 ";

[super viewDidLoad];

}

-(IBAction)btnRespuesta1:(id)sender

{
    if(pregunta.text == @"Question 1 text")
{

    lblRespuesta1.textColor = [UIColor redColor];
    lblResultado.text = @"False! ";
    lblResultado.textColor = [UIColor redColor];

}
}

-(IBAction)btnRespuesta2:(id)sender

{
    if(pregunta.text == @"Question 1 text")
    {

        lblRespuesta2.textColor = [UIColor redColor];
        lblResultado.text = @"False! ";
        lblResultado.textColor = [UIColor redColor];

    }

}

-(IBAction)btnRespuesta3:(id)sender

{
if(pregunta.text == @"Question 1 text")
{

    lblRespuesta3.textColor = [UIColor greenColor];
    lblResultado.text = @"Nice! ";
    lblResultado.textColor = [UIColor greenColor];

}

}    

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:37:22.903

您选择的方式是漫长的过程最初您必须将所有每个问题、选项和答案保存在字典中，并将字典添加到数组中，这样使用起来很简单。

```
[dictionary setObject:value forKey:@"question"];
[dictionary setObject:value forKey:@"option1"];
[dictionary setObject:value forKey:@"option2"];
[dictionary setObject:value forKey:@"option3"];
[dictionary setObject:value forKey:@"option4"];
[dictionary setObject:value forKey:@"answer"]; 
```

并将其添加到数组

```
[array addObject dictionary]

pregunta.text = [[array objectAtIndex:1]objectForKey:"question"];
lblRespuesta1.text = [[array objectAtIndex:1]objectForKey:"option1"];
lblRespuesta2.text = [[array objectAtIndex:1]objectForKey:"option2"];
lblRespuesta3.text = [[array objectAtIndex:1]objectForKey:"option3"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:44:54.870

你可以有一个问题数组，说 questionsArray，它将包含所有问题。第二次创建字典数组，它将包含所有选项和正确的结果说 resultArray 包含在 0 索引字典，键为 Answer1、Answer2、Answer3，结果和值将包含相应的values.现在取一个全局变量，它将存储问题编号意味着它正在显示哪个问题，比如 question0、question1..etc，这只是 questionsArray 中的问题索引。假设您在索引 0 处显示问题，然后显示相应的选项到那个索引，即 0 如下：

```
NSString *answer1 = [[resultArray objectAtIndex:0] valueForKey:@"Answer1"];
NSString *answer2 = [[resultArray objectAtIndex:0] valueForKey:@"Answer2"];
NSString *answer3 = [[resultArray objectAtIndex:0] valueForKey:@"Answer3"]; 
```

并说正确的答案是 answer2，然后结果键将为 2。并为每个按钮提供标签，如 1,2 和 3。然后在按钮操作中，您可以检查用户是否选择了正确的选项，如下所示：

```
if(btn.tag == [[resultArray objectAtIndex:0] valueForKey:@"result"])
{
   //correct answer is selected so increment score.
} 
```

# linux - 可能是 GCC 链接器错误

> ID：11082966
> 
> 赞同：0
> 
> 时间：2012-06-18T12:32:19.180
> 
> 标签：linux, gcc, minix

我收到以下错误：

![错误](../Images/786c6f0ea8d6597a05bdc4299458a6a0.png)

我正在关注本教程： [http ://wiki.minix3.org/en/DevelopersGuide/DriverProgramming](http://wiki.minix3.org/en/DevelopersGuide/DriverProgramming)

这是我的生成文件： ![在此处输入图像描述](../Images/d7f25a7350cc37da13fd26de8cbec986.png)

我的代码在 pastebin 上：

[http://pastebin.com/Jtn2cEsW](http://pastebin.com/Jtn2cEsW)

[http://pastebin.com/YrpKh32m](http://pastebin.com/YrpKh32m)

编辑：将 LPADD 更改为 LDADD 将错误更改为： ![错误2](../Images/f7e0eebe2fcf5b0dcc59838ba5f8ff97.png)

抱歉，由于使用了 Virtualbox，我无法运行 X11。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:38:12.697

在您的 makefile 中，它应该是`LDADD`，而不是`LPADD`

# mysql - mysql_store_result 函数的行为

> ID：11082970
> 
> 赞同：0
> 
> 时间：2012-06-18T12:32:40.073
> 
> 标签：mysql, sql, database

我对 MySql C API 有两个问题。

a）如果查询的结果大于内存的大小，那么函数的 `mysql_store_result`行为如何。在这种情况下，当我们调用该`mysql_fetch_row`函数时会发生什么？

b) 有什么方法可以多次解析这个数据结构？不止一次我的意思是我想访问每一行两次让我们假设。我想这样做是因为我将要处理的数据会很大（大于系统上可用的 RAM），并且我不想再次为此数据创建内存副本。

编辑：

这就是我正在做的事情：我正在根据数据库查询的结果制作布隆过滤器。假设查询`i`是`select user_id from user;`. 现在让我们在数据库中有 100 个表，当对数据库中的该表运行上述查询时，它将返回一组用户。

现在我想在第一个表的布隆过滤器中测试某个表的成员资格，让我们假设 k。现在我想不是再次查询数据库，而是`i`暂时存储查询结果并在需要时使用它。

# actionscript-3 - AS3：从位图中获取颜色值

> ID：11082972
> 
> 赞同：0
> 
> 时间：2012-06-18T12:32:45.623
> 
> 标签：actionscript-3, bitmap

当我单击舞台上的图像时，我正在尝试检索颜色值。我打算用它来为我正在开发的游戏创建高度图，使角色在崎岖地形（高度图的具有特定颜色值的部分）上移动得更慢，但我不断收到以下错误：

```
TypeError: Error #1034: Type Coercion failed: cannot convert flash.display::MovieClip@2fc84f99 to flash.display.Bitmap.
at testGetColor2_fla::MainTimeline/frame1() 
```

到目前为止，这是我的代码：

```
import flash.display.BitmapData;
import flash.display.Bitmap;
import flash.events.MouseEvent;
import flash.display.Sprite;

var container:Sprite = new Sprite();

var myHeightMap:Bitmap = Bitmap(heightMap);

this.addChild(container);
container.addChild(myHeightMap);

container.addEventListener(MouseEvent.CLICK, onClick);

function onClick(e:MouseEvent):void
{
    var obj:Sprite = e.currentTarget as Sprite;

    var myHeightMap:Bitmap = Bitmap(obj.getChildAt(0));

    var pixelValue:uint = myHeightMap.bitmapData.getPixel(mouseX,mouseY);

    trace(pixelValue.toString(16));
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:04:40.843

你这样做的方式不太正确:)

这是将 MovieClip 转换为位图的方法：

```
function toBitmap(value:DisplayObject):Bitmap
{
    var bmpData:BitmapData = new BitmapData(value.width, value.height, true, undefined);
    bmpData.draw(value, null, null, null, null, true);

    return new Bitmap(bmpData, "auto", true);
} 
```

然后你可以得到像素。

请记住，RegistrationPoint 必须是 TOP_LEFT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:07:03.233

问题是您不能像在`MovieClip`创建. 要进行该转换，请使用以下命令：`Bitmap``myHeightMap`

```
var bitmapData:BitmapData = new BitmapData(heightMap.width, heightMap.height);
bitmapData.draw(heightMap);
var myHeightMap:Bitmap = new Bitmap(bitmapData); 
```

当然，可能还有其他方法可以做到这一点。如果您能在调用此代码之前找到一种方法`heightMap`，`Bitmap`那将更有效率。

# perl - 盐的随机性对 Bcrypt 有多重要？

> ID：11082973
> 
> 赞同：3
> 
> 时间：2012-06-18T12:32:51.380
> 
> 标签：perl, bcrypt

我需要为 Bcrypt 生成盐，并且我试图了解我的 PRNG 需要多么随机才能使盐不要太弱以至于使用 Bcrypt 毫无意义。我有五类一般的随机性来源：

1.  Perl 5 附带的 PRNG 使用默认种子播种（这似乎是秒的当前分数、保存当前秒分数的事物的地址、进程的 pid 和 Perl 堆栈的地址指针都与一些素数混合在一起）
2.  Perl 5 附带的 PRNG 与其他种子一起播种
3.  其他一些基于 Perl 5 的 PRNG，例如[`Math::Random::Secure`](http://search.cpan.org/dist/Math-Random-Secure/lib/Math/Random/Secure.pm)
4.  只读取字节`/dev/urandom`
5.  只读取字节`/dev/random`

在我看来，这段代码将运行的机器已经受到`/dev/random`了很大的打击（当机器很忙时，`/proc/sys/kernel/random/entropy_avail`低于 500），否则这将不是问题，我只会使用`/dev/random`. 也就是说，如果它足够重要，我`/dev/random/`无论如何都会使用（人们不会经常设置新密码）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T12:45:37.350

Salt仅用于在同一输入上运行多次时使散列函数的输出不同并防止彩虹表攻击。密码强度由函数本身的实现提供。任何合理分布的 RNG 都可以用于盐，不需要真正的熵。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T14:02:41.470

密码盐不必是随机的，甚至不必是秘密的。重要的是每个密码的盐是*唯一的*。[*请参阅下面 Schneier 的应用密码学*](http://www.schneier.com/book-applied.html)第二版中第 52 和 53 页的摘录。

随机选择位是一种生成唯一盐的实现，碰撞概率很小。这通常被认为是一种体面的交易，因为这样的盐生成器不需要提升权限来读取系统中当前使用的盐值列表。

使用[`bcrypt`](http://en.wikipedia.org/wiki/Bcrypt)，salt 以明文形式存储，以供以后的身份验证尝试使用。这意味着您系统的整个散列密码列表可能会受到损害。那时，随机盐无济于事。请注意下面摘录的最后一段中的妙语。Salt混淆了字典攻击，但只是在一定程度上。

保守的方法是使用加密安全的 RNG 来“以防万一”选择盐值，但取决于你试图保护的东西的价值以及对手愿意投入多少努力，这可能是矫枉过正.

> ### 字典攻击和盐
> 
> 使用单向函数加密的密码文件仍然容易受到攻击。在业余时间，Mallory 编制了 1,000,000 个最常用密码的列表。他使用单向函数对所有 1,000,000 个函数进行运算并存储结果。如果每个密码大约 8 字节，则生成的文件将不超过 8 兆字节；它可以装在几张软盘上。现在，马洛里窃取了一个加密的密码文件。他将该文件与他的加密可能密码文件进行比较，并查看匹配的内容。
> 
> 这是一个**字典攻击**，而且非常成功（参见第 8.1 节 [“生成密钥”]）。**盐**是一种让它变得更加困难的方法。Salt 是一个随机字符串，它在被单向函数操作之前与密码连接。然后，盐值和单向函数的结果都存储在主机上的数据库中。如果可能的盐值的数量足够大，这实际上消除了针对常用密码的字典攻击，因为 Mallory 必须为每个可能的盐值生成单向哈希。这是对初始化向量的简单尝试（参见第 9.3 节 [“密码块链接模式”]）。
> 
> 这里的重点是确保 Mallory 每次尝试破解另一个人的密码时都必须对其字典中的每个密码进行一次尝试加密，而不是对所有可能的密码进行一次大规模的预计算。
> 
> 需要大量的盐。大多数 UNIX 系统只使用 12 位盐。尽管如此，Daniel Klein 还是开发了一个密码猜测程序，该程序通常会在一周内破解给定主机系统上 40% 的密码 [847,848]（参见第 8.1 节）。David Feldmeier 和 Philip Karn 编制了一份包含约 732,000 个常用密码的列表，这些密码与 4096 个可能的盐值中的每一个连接在一起。他们估计，任何给定主机上 30% 的密码都可以通过此列表破解 [561]。
> 
> 盐不是灵丹妙药；增加盐位的数量并不能解决所有问题。Salt 只能防止对密码文件的一般字典攻击，而不是防止对单个密码的协同攻击。它可以保护在多台机器上使用相同密码的人，但不会使选择不当的密码变得更好。
> 
> **561.** DC Feldmeier 和 PR Karn，“UNIX 密码安全——十年后” *，密码学进展——CRYPTO '89 论文集*，Springer-Verlag，1990 年，第 44-63 页。
> **847.** DV Klein，“'Foiling the Cracker'：A Survey of and Implications to, Password Security” *，USENIX UNIX 安全研讨会论文集*，1990 年 8 月，第 5-14 页。
> **848.** DV Klein，个人通讯，1994。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T12:46:33.570

我建议使用`Math::Random::Secure`它，因为它通常会从`/dev/urandom`.

您可以使用弱随机种子，但这样做是在赌 bcrypt 没有仅在盐“容易”可预测时出现的弱点。很有可能，你很好，但你也偏离了加密最佳实践。

对于密码，我会默认为“以正确的方式进行操作”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T12:54:10.927

我终于找到了[描述 Bcrypt 的原始文章](http://static.usenix.org/events/usenix99/provos/provos_html/node6.html#SECTION00051000000000000000)，并找到了这句话：

> 任何 bcrypt 实现的一个重要要求是它利用完整的 128 位盐空间。OpenBSD 从一个 arcfour (arc4random(3)) 密钥流生成 128 位 bcrypt salt，并使用内核从设备时序收集的随机数据播种。

基于此，我将使用`/dev/random`初始化一个高质量的 PRNG 来生成种子。

使用高质量 PRNG 背后的原因也可以在文章中[找到。](http://static.usenix.org/events/usenix99/provos/provos_html/node12.html#SECTION00062100000000000000)

# android - 自定义微调器视图

> ID：11082981
> 
> 赞同：11
> 
> 时间：2012-06-18T12:33:11.517
> 
> 标签：android, android-arrayadapter, custom-attributes, custom-component, android-spinner

我创建了自己的自定义微调器，我可以在它实现时从“自定义和库视图”访问它`View`。但是，问题是当从调色板中拖动我的自定义微调器以在我的中使用它时`main.xml`，它会引发“未处理的事件循环异常”。我不知道我的错误在哪里。

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:pref="http://schemas.android.com/apk/res/com.myspinner"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<com.myspinner.Myspinner
android:id="@+id/myspinner1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
pref:MyEntries="@array/testarray" /> 
```

**MySpinnerattributes.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="MySpinner">
        <attr name="MyEntries" format="reference"/>
    </declare-styleable>
</resources> 
```

**微调器布局.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:text="@string/large_text" android:gravity="center"/> 
```

**Myspinner.java**

```
 public class Myspinner extends Spinner{

    LayoutInflater inflater;
    CharSequence cs[]={"MySpinner"};
    String s[]={"MySpinner"};
    View row;
    TextView txt;

public Myspinner(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    setAttributes(attrs);    
    this.setAdapter(new MyAdapter(this.getContext(), R.layout.spinnerlayout,s));
    }

public Myspinner(Context context, AttributeSet attrs) {
    super(context, attrs);
    setAttributes(attrs);
    this.setAdapter(new MyAdapter(this.getContext(), R.layout.spinnerlayout,s));
}

public class MyAdapter extends ArrayAdapter<String>{

public MyAdapter(Context context, int textViewResourceId,String[] objects){
    super(context, textViewResourceId, objects);
      // TODO Auto-generated constructor stub
  }

  public View getDropDownView(int position, View convertView,ViewGroup parent){
    return getCustomView(position, convertView, parent);
  }

   public View getView(int position, View convertView, ViewGroup parent) {
    return getCustomView(position, convertView, parent);
   }

    public View getCustomView(int position, View convertView, ViewGroup parent) {

    inflater=(LayoutInflater)this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
      row=inflater.inflate(R.layout.spinnerlayout, parent, false);
      txt=(TextView)row.findViewById(R.id.textView1);
      txt.setText(s[position]);
      return row;
    }
    }

       public void setAttributes(AttributeSet attrs){
       if (attrs != null) 
       {
       TypedArray a=getContext().obtainStyledAttributes(attrs,R.styleable.MySpinner);
       final int N = a.getIndexCount();
       for (int i = 0; i < N; ++i)
       {      
           int attr = a.getIndex(i);
           switch (attr)
           {
                 case R.styleable.MySpinner_MyEntries:
                 cs=a.getTextArray(attr);
                 s=new String[cs.length];
                 for (int j = 0; j < cs.length; ++j)
                 s[j]=(String)cs[j];
                 break;

                 default:break;
            }
        a.recycle();
        } 
            }
            }
            } 
```

`main.xml`如果您只是复制粘贴代码，它不会给出错误。当我从调色板中拖动自定义微调器时，它会给出错误。

# c++ - 无法在 C++ 中打开包含文件 sstream.h

> ID：11082991
> 
> 赞同：2
> 
> 时间：2012-06-18T12:33:43.327
> 
> 标签：c++, header

我正在尝试使用头文件`sstream.h`下面是我的代码段

```
 #include <iostream>
 #include <string>
 #include <sstream>

 int main ()
{
string mystr;
float price=0;
int quantity=0;

cout << "Enter price: ";
getline (cin,mystr);
stringstream(mystr) >> price;
cout << "Enter quantity: ";
getline (cin,mystr);
stringstream(mystr) >> quantity;
cout << "Total price: " << price*quantity << endl;
return 0;
  } 
```

但我收到以下错误

```
unable to open include file sstream.h 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T12:39:19.627

有很多问题，试试下面的：

```
#include <iostream>
#include <string>
#include <sstream>
#include <cstdio>

int main()
{
 std::string st = "23 53";
 int result;
 std::stringstream(st) >> result;
 getchar();
 return 0;
} 
```

一些：

*   `getchar`代替`getch`
*   `<cstdio>`为了`getchar`
*   有资格`string`并`stringstream`与`std::`
*   `sstream`， 不是`sstream.h`

# android - 在android eclipse中调用多个活动

> ID：11082995
> 
> 赞同：1
> 
> 时间：2012-06-18T12:33:53.857
> 
> 标签：android, eclipse, android-activity

谁能告诉我如何使用 sharedPreference 从不同页面调用 n 个活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:43:21.653

您可以将数组保存在`SharedPreference`. 这是一个[例子](https://stackoverflow.com/questions/3876680/is-it-possible-to-add-an-array-or-object-to-sharedpreferences-on-android)。

您的数组可以保存您的`Activities`. 像：

```
String activityNames[] = { "Activity1" , "Activity2" , "Activity3" }; 
```

从您的 中获取此数组`SharedPreference`，然后使用以下命令启动所需的数组`Activity`：

```
Class selected = Class.forName("learn.myandroidapp.hr." + activityNames[someIndex]);
Intent selectedIntent = new Intent(CurrentActivity.this,selected);
startActivity(selectedIntent); 
```

我没有给你完整的代码，而是基本的想法（我相信这已经足够了）。随时询问更多。