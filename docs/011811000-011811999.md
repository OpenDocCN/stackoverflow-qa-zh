# StackOverflow 问答 11811000-11811999

# python - 如何将两个默认的列表字典合并为一个

> ID：11811001
> 
> 赞同：0
> 
> 时间：2012-08-04T18:18:51.547
> 
> 标签：python

```
the d1 is  defaultdict(<type 'list'>, {'A': [4, 4, 4, 4], 'S': [1]})
the d2 is  defaultdict(<type 'list'>, {'A': [4, 4, 4], 'B': [2], '[]': [4, 4]}) 
```

如何将这两个字典合二为一？

预期的输出应该是

```
the d3 is  defaultdict(<type 'list'>, {'A': [4], 'B': [2], 'S':[1] ,'[]': [4]}) 
```

在结果字典中，多个值应合二为一

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:23:45.807

您应该使用 a`set`作为`default_factory`属性，因为集合不保留重复元素：

```
d1 = defaultdict(set) 
```

要将现有`defaultdict`的 s 转换为 use `sets`，请尝试以下操作：

```
defaultdict(set, {key: set(value) for key, value in d1.iteritems()}) 
```

对于旧的 Python 版本：

```
defaultdict(set, dict((key, set(value)) for key, value in d1.iteritems())) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:23:46.420

尝试：

```
d1.update(d2)
for val in d1.values():
    if len(val) > 1:
        val[:] = [val[0]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T02:27:28.357

以下是你所说的你想要的：

```
from collections import defaultdict

d1 = defaultdict(list, {'A': [4, 4, 4, 4], 'S': [1], 'C': [1, 2, 3, 4]})
print 'the d1 is ', d1
d2 = defaultdict(list, {'A': [4, 4, 4], 'B': [2], '[]': [4, 4], 'C': [1, 2, 3]})
print 'the d2 is ', d2

d3 = defaultdict(list, dict((key, set(value) if len(value) > 1 else value)
                                for key, value in d1.iteritems()))
d3.update((key, list(d3[key].union(set(value)) if key in d3 else value))
                                for key, value in d2.iteritems())
print
print 'the d3 is ', d3 
```

输出：

```
the d1 is  defaultdict(<type 'list'>, {'A': [4, 4, 4, 4], 'S': [1], 'C': [1, 2, 3, 4]})
the d2 is  defaultdict(<type 'list'>, {'A': [4, 4, 4], 'C': [1, 2, 3], 'B': [2], '[]': [4, 4]})

the d3 is  defaultdict(<type 'list'>, {'A': [4], 'S': [1], 'B': [2], 'C': [1, 2, 3, 4], '[]': [4, 4]}) 
```

请注意，我添加了一个`'C'`以两者为键的列表，`d1`并`d2`显示您的问题中未提及的可能性会发生什么 - 所以我不知道这是否是您想要发生的事情。

# c# - WPF 中的 WindowLoaded 事件

> ID：11811021
> 
> 赞同：2
> 
> 时间：2012-08-04T18:21:51.963
> 
> 标签：c#, wpf

我在构造函数中添加了 WindowLoaded 事件作为路由事件处理程序，但不确定这是否是声明/起诉加载窗口的正确方法。

```
 this.AddHandler(Window.LoadedEvent, new RoutedEventHandler(WindowLoaded)); 
```

目前似乎工作，因为一旦我运行应用程序，我就会得到一个只有边框的空窗口，没有它的内容。

问题是如何在 WPF 中使用 WindowLoaded() 事件？我希望从 VS2010 的顶部下拉框中选择它，但我想必须手动输入它。是对的吗？

干杯，阿米特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T18:27:01.020

您可以在任一 GUI 中设置 Loaded 事件：

![在此处输入图像描述](../Images/f0b8ded17e167ab0d2254bc4de1e5853.png)

或者在控件的代码隐藏中：

```
public MainWindow()
{
    InitializeComponent();
    Loaded += MainWindow_Loaded;
}

void MainWindow_Loaded( object sender, RoutedEventArgs e )
{

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T18:27:46.580

您可以遵循 Mark 的建议，或者，您可以在您的中添加加载的事件`MainWindow.xaml`（如果您在 Loaded 属性中按 ctrl+space，Visual Studio 将为您生成处理程序）：

```
<Window x:Class="StackOverflowWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Loaded="MainWindow_Loaded">
    <!-- your code -->
</Window> 
```

# css - 字母间距对元素宽度的奇怪影响

> ID：11811023
> 
> 赞同：2
> 
> 时间：2012-08-04T18:21:57.783
> 
> 标签：css

我会假设在两个字符跨度上将字母间距设置为 -1px 会将其宽度减少 1px。但是，请在 Chrome 中查看以下内容：

```
span.style.fontSize=48
48
span.textContent="99"
"99"
span.style.letterSpacing=0
0
span.offsetWidth
16
span.style.letterSpacing="-1px"
"-1px"
span.offsetWidth
14 
```

将 letter-spacing 设置为 -1px 会使宽度减少 2px 而不是 1。

如果在您尝试将其与 text-align: center 对齐时，它不会导致字母间距为 -1px 的文本略微偏离中心，那么这可能不太重要。

CSS规范似乎清楚地表明字母间距应该影响字母*之间*的间距。然而，似乎至少在 Chrome 中，一些概念起点和文本的第一个字符之间的间距也被压缩了。

对此有任何想法或想法吗？IE 10 表现出相同的行为。一个错误？还是对规范的误读？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T19:56:22.777

## 行为

我同意规范相当明确地说明了这一点。引用[此页面](http://www.w3.org/TR/css3-text/#letter-spacing)：

> 字母间距不得应用于行首或行尾。

但是， Win 7 上的[这个小提琴](http://jsfiddle.net/Rm5SC/17/)向我展示了在 Chrome、IE9 和 Firefox 上，*所有这些*都在最后一个字母之后应用了一个更少的像素（Firefox 向我展示了从与边框的间隙开始的少一个像素开始)，这似乎违反了它没有应用于行尾。结果是所有似乎都将字符串中每个字符的总宽度减少了 1px。

`letter-spacing`因此，它似乎在任何浏览器中都不能正常工作，如果是[一个正数](http://jsfiddle.net/Rm5SC/22/)也没关系。

## 可能是“最佳”解决方法

添加`padding-right: 1px`到`span`with`letter-spacing: -1px`以抵消[这个 fiddle 中看到](http://jsfiddle.net/Rm5SC/21/)的问题。

## 可选解决方法：`:after`伪元素

在`span`with 上`letter-spacing: -1px`放置以下内容[，如this fiddle所示](http://jsfiddle.net/Rm5SC/20/)：

```
span:after {content:''; display: inline-block; width: 1px;} 
```

## 最后的想法

上述任何一种解决方案都可能对计算差异有所帮助，*也可能*`text-align: center`无济于事，因为这似乎部分取决于基于显示宽度的中心 1px 舍入，如拉伸[此小提琴的宽度时所见）](http://jsfiddle.net/Rm5SC/25/)。

# r - “替换”函数示例

> ID：11811027
> 
> 赞同：41
> 
> 时间：2012-08-04T18:23:13.497
> 
> 标签：r

我没有发现包中`replace`功能的帮助页面*很有帮助*。最糟糕的是，它没有可以帮助理解其工作原理的示例。`base`

 *你能解释一下如何使用它吗？一两个例子会很棒。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-04T18:44:06.710

如果您查看该函数（通过在控制台输入它的名称），您会发现它只是该函数的一个简单的功能化版本，`[<-`在`?"["`. `[`是 R 的一个相当基本的功能，因此建议您查看该页面以获取更多详细信息。尤其重要的是要了解索引参数（in 中的第二个参数`replace`可以是逻辑、数字或字符分类值。当第二个和第三个参数的长度不同时，将发生回收：

您应该将函数调用“读取”为“在第一个参数中，使用第二个参数作为将第三个参数的值放入第一个参数的索引”：

```
> replace( 1:20, 10:15, 1:2)
 [1]  1  2  3  4  5  6  7  8  9  1  2  1  2  1  2 16 17 18 19 20 
```

命名向量的字符索引：

```
> replace(c(a=1, b=2, c=3, d=4), "b", 10)
 a  b  c  d 
 1 10  3  4 
```

逻辑索引：

```
> replace(x <- c(a=1, b=2, c=3, d=4), x>2, 10)
 a  b  c  d 
 1  2 10 10 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-11-20T15:03:05.187

您还可以使用逻辑测试

```
x <- data.frame(a = c(0,1,2,NA), b = c(0,NA,1,2), c = c(NA, 0, 1, 2)) 
x
x$a <- replace(x$a, is.na(x$a), 0)
x
x$b <- replace(x$b, x$b==2, 333) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-04T18:29:57.793

这里有两个简单的例子

```
> x <- letters[1:4]
> replace(x, 3, 'Z') #replacing 'c' by 'Z'
[1] "a" "b" "Z" "d"
> 
> y <- 1:10
> replace(y, c(4,5), c(20,30)) # replacing 4th and 5th elements by 20 and 30
 [1]  1  2  3 20 30  6  7  8  9 10 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-22T13:32:41.837

请注意，上面给出的示例中的第三个参数（值）：该值是一个常数（例如，'Z' 或 c(20,30)）。

使用数据框本身的值定义第三个参数可能会导致混淆。

例如，使用这样的简单数据框（使用 dplyr::data_frame）：

```
tmp <- data_frame(a=1:10, b=sample(LETTERS[24:26], 10, replace=T)) 
```

这将创建这样的东西：

```
 a     b
   (int) (chr)
1      1     X
2      2     Y
3      3     Y
4      4     X
5      5     Z 
```

..ETC

现在假设您想要做的是将“a”列中的值乘以 2，但仅在“b”列是“X”的情况下。我的直接想法是这样的：

```
with(tmp, replace(a, b=="X", a*2)) 
```

然而，这不会提供预期的结果。a*2 将定义为固定向量，而不是对“a”列的引用。向量 'a*2' 因此将是

```
[1]  2  4  6  8 10 12 14 16 18 20 
```

在“替换”操作开始时。因此，'b' 等于 "X" 的第一行，'a' 中的值将被 2 放置。第二次，它将被 4 替换，等等......它不会被替换两次-the-value-of-a 在该特定行中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-05-06T19:27:29.227

这是一个示例，我发现 replace() 函数有助于我深入了解。该问题需要将长整数向量更改为字符向量，并将其整数替换为给定的字符值。

```
## figuring out replace( )
(test <- c(rep(1,3),rep(2,2),rep(3,1))) 
```

看起来像

```
[1] 1 1 1 2 2 3 
```

我想用 A 替换每个 1，用 B 替换 2，用 C 替换 3

```
letts <- c("A","B","C") 
```

所以在我自己的秘密小“脏诗”中，我使用了一个循环

```
for(i in 1:3)
{test <- replace(test,test==i,letts[i])} 
```

做了我想要的

```
test
[1] "A" "A" "A" "B" "B" "C" 
```

在第一句话中，我故意省略了真正的目标是使整数的大向量成为因子向量并为整数值（级别）分配一些名称（标签）。

所以在这里做replace()应用程序的另一种方法是

```
(test <- factor(test,labels=letts))
[1] A A A B B C
Levels: A B C 
```*

# jquery - 使用 .val 时，Highchart 不会从隐藏输入中加载数据

> ID：11811028
> 
> 赞同：2
> 
> 时间：2012-08-04T18:23:18.743
> 
> 标签：jquery, json, highcharts, hidden-field

这是我想做的[一个 JsFiddle 示例。](http://jsfiddle.net/jeryslo/79ymb/)数据未正确加载，如果我[直接输入数据，](http://jsfiddle.net/jeryslo/4vne8/)则它可以工作。为什么`$("#input").val()`不工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T18:26:17.213

因为您传递的是字符串而不是对象，所以试试这个：

```
 data: $.parseJSON($("#input").val()) 
```

[http://jsfiddle.net/79ymb/1/](http://jsfiddle.net/79ymb/1/)

# mysql - MYSQL DBDump 错误信息

> ID：11811029
> 
> 赞同：2
> 
> 时间：2012-08-04T18:23:19.457
> 
> 标签：mysql, mysqldump

我需要一个 DBDUMP，我正在使用 MySQL。当我尝试获取 DB Dump 时出现以下错误。任何线索它做错了什么。

```
C:\Program Files\MySQL\MySQL Server 5.1\bin>mysqldump -u root -p xxx myDB
e >  dump.sql
Enter password: ***
mysqldump: Got error: 1049: Unknown database 'xxx' when selecting the database 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-04T18:32:51.047

该命令表示您要在提示符下输入密码并从数据库中转储`myDB`表。`xxx`如果你去掉“xxx”部分并在提示符下输入密码，它应该可以工作。

如果您确实想在命令行上指定密码，则必须这样做`-pWHATEVER`（其中“WHATEVER”是文字密码，开关后没有空格），或者`--password=WHATEVER`，但是：

> 在命令行上指定密码应该被认为是不安全的。

[文档链接](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_password)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T03:04:50.610

你应该删除 -p 后面的 xxx ，因为在输入密码的下一行输入 int ，你应该写下你的数据库名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-12T10:48:07.917

如果您想避免警告“在命令行上指定密码应该被认为是不安全的”。只需使用选项 --defaults-extra-file

例如：

```
/usr/bin/mysqldump --defaults-extra-file=/tmp/auth.tmp --user=xxx --tables dbname  --host localhost 
```

/tmp/auth.tmp 内容在哪里

```
[client]
password=yyyy 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-07T18:29:47.263

如果您将 localhost 与基本一起使用，`user=root,password=<blank>`只需复制此内容`mysqldump -d -u root -l dbname`

# objective-c - 如何使用 NSUserDefaults 将按钮状态从详细视图返回到表视图

> ID：11811033
> 
> 赞同：-1
> 
> 时间：2012-08-04T18:23:41.583
> 
> 标签：objective-c, ios, xcode, delegates

我这样做是为了改变按钮的状态。这是一个书签样式的按钮。如果用户想要为详细视图添加书签，他单击星号。我想在根视图中取回信息。

这是我的 detailview.m 代码

```
- (IBAction)saveRow
{
 NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
NSString *save = cellNumber;

if ([buttonSave.titleLabel.text isEqualToString:@"Sync off"]) {
    [prefs setValue:@"YES" forKey:save];
    [buttonSave setTitle:@"Sync on" forState:UIControlStateNormal];
    [buttonSave setBackgroundImage:[UIImage imageNamed:@"clicked.png"] forState:UIControlStateNormal];
}
else {
    [prefs setValue:@"NO" forKey:save];
    [buttonSave setTitle:@"Sync off" forState:UIControlStateNormal];
    [buttonSave setBackgroundImage:[UIImage imageNamed:@"notclicked.gif"] forState:UIControlStateNormal];
}

// save
[prefs synchronize];
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
[super viewDidLoad];

if ([[NSUserDefaults standardUserDefaults] boolForKey:cellNumber])
{
    [buttonSave setTitle:@"Sync on" forState:UIControlStateNormal];
    [buttonSave setBackgroundImage:[UIImage imageNamed:@"clicked.png"] forState:UIControlStateNormal];
}
else {
    [buttonSave setTitle:@"Sync off" forState:UIControlStateNormal];
    [buttonSave setBackgroundImage:[UIImage imageNamed:@"notclicked.gif"] forState:UIControlStateNormal];
} 
```

但是在根视图中，我不知道该怎么做才能做同样的事情。根视图是一个表视图。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:54:00.657

`DetailViewController`您可以在`RootViewController`将实现 的委托中定义一个委托。

```
@protocol DetailViewControllerDelegate <NSObject>
- (void)detailViewController:(DetailViewController *)controller didBookmarkSomthing:(Something *)something

@end 
```

然后`RootViewController`将实现此方法并从`something`他那里知道要更新 UI。

话虽如此，我通常在模型层做这种事情——你改变模型的状态，然后告诉谁对这种改变感兴趣。
例如，假设你有一个书籍的表格视图——所以我的模型是一个`Book`对象列表。
现在，当用户点击其中一本书时，我会推送一个详细视图控制器，让我们调用它`BookDetailViewController`来显示该书的信息。
当我推动这个控制器时，我将`Book`对象传递给它，通常我创建一个特殊的 init 方法，它也获取`Book`，如下所示：

```
- (id)initWithBook:(Book *)aBook
{
    self = [super init];
    if (self) {
        self.book = aBook;
    }  
    return self;  
} 
```

现在，无论您在此视图控制器中做什么，都应该感染该`Book`对象，例如，如果您想启用用户为图书操作添加书签（只是一个示例..），那么您需要向该对象添加一个`isBookmarked`属性`Book`来告诉您一本书是否是书签或不。
然后当用户按下`BookDetailViewController`更改模型中的书签按钮时 -`self.book.isBookmarked = YES;`

现在您的模型已更改，您需要更新想要了解此更改的人，我喜欢通过通知来执行此操作。
例如 Book 对象将定义`BookDidChangedBookmarkStateNotification`，并在书签状态更改时发布此通知。
您`RootViewController`将收听此通知并处理 uI 更改。

# java - Java Nimbus L&F - 按钮文本颜色不起作用

> ID：11811034
> 
> 赞同：1
> 
> 时间：2012-08-04T18:23:44.840
> 
> 标签：java, button, look-and-feel, foreground, nimbus

我无法使用 L&F 更改文本按钮的颜色。我正在使用此代码

```
UIManager.getLookAndFeelDefaults().put("Button.background", Color.ORANGE);
UIManager.getLookAndFeelDefaults().put("Button[Default+Pressed].textForeground", Color.BLUE);    
UIManager.getLookAndFeelDefaults().put("Button.foreground", Color.BLUE);    
UIManager.getLookAndFeelDefaults().put("Button[Disabled].textForeground", Color.BLUE);    
UIManager.getLookAndFeelDefaults().put("Button.disabled", Color.BLUE);    
UIManager.getLookAndFeelDefaults().put("Button.disabledText", Color.BLUE); 
```

背景正确为橙色，但文本颜色默认为黑色

这里是使用 Netbeans 编辑器生成的完整代码（上面的行在第 75 行附近）

```
import java.awt.Color;
import javax.swing.UIManager;

public class Test extends javax.swing.JFrame {

    /**
     * Creates new form Test
     */
    public Test() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jButton1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jButton1.setText("TEST BUTTON");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(74, 74, 74)
                .addComponent(jButton1, javax.swing.GroupLayout.DEFAULT_SIZE, 240, Short.MAX_VALUE)
                .addGap(86, 86, 86))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(106, 106, 106)
                .addComponent(jButton1, javax.swing.GroupLayout.DEFAULT_SIZE, 81, Short.MAX_VALUE)
                .addGap(113, 113, 113))
        );

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());

                    UIManager.getLookAndFeelDefaults().put("Button.background", Color.ORANGE);

                    UIManager.getLookAndFeelDefaults().put("Button[Default+Pressed].textForeground", Color.BLUE);    
                    UIManager.getLookAndFeelDefaults().put("Button.foreground", Color.BLUE);    
                    UIManager.getLookAndFeelDefaults().put("Button[Disabled].textForeground", Color.BLUE);    
                    UIManager.getLookAndFeelDefaults().put("Button.disabled", Color.BLUE);    
                    UIManager.getLookAndFeelDefaults().put("Button.disabledText", Color.BLUE);    

                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Test.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Test.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Test.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Test.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new Test().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:38:00.837

尝试：

```
UIManager.getLookAndFeelDefaults().put("Button.textForeground", Color.BLUE); 
```

# ios - ios SDK的头文件在哪里？OSX 在哪里？

> ID：11811040
> 
> 赞同：7
> 
> 时间：2012-08-04T18:24:39.660
> 
> 标签：ios, macos, header

我可以通过在 XCode 中单击命令来打开头文件——但我想知道它们的位置。

我想将它们解析为一个项目（作为文本文件，而不是作为头文件）。

我已经在我的磁盘上查看了所有内容 - 找到它们。

例如 - UIViewController.h 在哪里？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-04T18:29:44.640

SDK 标头位于 Xcode 安装中。

例如：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIViewController.h 
```

# java - 将 JPanel 添加到 JFrame 后如何将 JComponent 添加到 JPanel

> ID：11811045
> 
> 赞同：-1
> 
> 时间：2012-08-04T18:25:46.557
> 
> 标签：java, swing, jpanel, jcomponent

一旦 a`JPanel`被实例化并添加到可见的`JFrame`，我如何添加一个新`JComponent`的*并*更新显示以显示新的`JComponent`？

原始问题：

> 如何添加`JComponent`到已添加`JPanel`到. 我想我可能不得不扩展并可能覆盖.`JPanel``JFrame``JPanel``paintComponent()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T18:34:41.017

`JPanel.add()`应该可以正常工作。如果框架已经可见，则调用：

```
validate();
repaint(); 
```

此外，根据尺寸和布局，您可能需要用`pack()`.

如果您可以将[SSCCE](http://sscce.org/)与您的问题一起发布，那就更容易了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T18:32:02.157

我不知道我是否理解您的问题，将任何添加`JComponent`到 a `JPanel`，之前或之后添加到 a应该没有问题`JFrame`：

```
JPanel panel = new JPanel();
frame.setContentPane(panel);
// sometime later
panel.add(new JLabel("JLabel is a JComponent")); 
```

也许如果您发布代码，问题会更加清楚。

# c# - 如何使用带有计时器滴答的 BackgroundWorker？

> ID：11811048
> 
> 赞同：2
> 
> 时间：2012-08-04T18:26:29.523
> 
> 标签：c#, multithreading, timer

决定不使用任何计时器。我所做的更简单。

添加了后台工作人员。添加了一个 Shown 事件，在加载所有构造函数后，Shown 事件会触发。在显示的事件中，我正在启动后台工作程序异步。

在后台工作人员 DoWork 我正在做：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            while(true)
            {
                cpuView();
                gpuView();
                Thread.Sleep(1000);
            }
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T19:46:28.693

在这种情况下，最好使用两个[`System.Threading.Timer`](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)并在这两个线程中执行 CPU 密集型操作。请注意，您**必须**使用 访问控件[`BeginInvoke`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx)。您可以将这些访问封装到属性设置器中，甚至更好地将它们拉出到视图模型类中。

```
public class MyForm : Form
{
    private System.Threading.Timer gpuUpdateTimer;
    private System.Threading.Timer cpuUpdateTimer;

    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        if (!DesignMode)
        {
            gpuUpdateTimer = new System.Threading.Timer(UpdateGpuView, null, 0, 1000);
            cpuUpdateTimer = new System.Threading.Timer(UpdateCpuView, null, 0, 100);
        }
    }

    private string GpuText
    {
        set
        {
            if (InvokeRequired)
            {
                BeginInvoke(new Action(() => gpuLabel.Text = value), null);
            }
        }
    }

    private string TemperatureLabel
    {
        set
        {
            if (InvokeRequired)
            {
                BeginInvoke(new Action(() => temperatureLabel.Text = value), null);
            }
        }
    }

    private void UpdateCpuView(object state)
    {
        // do your stuff here
        // 
        // do not access control directly, use BeginInvoke!
        TemperatureLabel = sensor.Value.ToString() + "c" // whatever
    }

    private void UpdateGpuView(object state)
    {
        // do your stuff here
        // 
        // do not access control directly, use BeginInvoke!
        GpuText = sensor.Value.ToString() + "c";  // whatever
    }

    protected override void Dispose(bool disposing)
    {
        if (disposing)
        {
            if (cpuTimer != null)
            {
                cpuTimer.Dispose();
            }
            if (gpuTimer != null)
            {
                gpuTimer.Dispose();
            }
        }

        base.Dispose(disposing);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T19:38:31.943

您不能只是将此代码放入后台工作人员中并期望它能够工作。任何更新 UI 元素（标签、文本框等）的东西都需要在主线程上调用。您需要分解逻辑以获取数据和更新 UI 的逻辑。

我会说你最好的选择是这样做：

在计时器 Tick() 方法中：

```
// Disable the timer.
// Start the background worker 
```

在后台工作人员 DoWork() 方法中：

```
// Call your functions, taking out any code that 
// updates UI elements and storing this information 
// somewhere you can access it once the thread is done. 
```

在后台工作者 Completed() 方法中：

```
// Update the UI elements based on your results from the worker thread
// Re-enable the timer. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-04T19:45:15.653

首先确保了解多线程和它的问题（尤其是 UI 的东西）。

然后你可以使用 somethink like

```
public class Program
{
    public static void Main(string[] args)
    {
        Timer myTimer = new Timer(TimerTick, // the callback function
            new object(), // some parameter to pass
            0, // the time to wait before the timer starts it's first tick
            1000); // the tick intervall
    }

    private static void TimerTick(object state)
    {
        // less then .NET 4.0
        Thread newThread = new Thread(CallTheBackgroundFunctions);
        newThread.Start();

        // .NET 4.0 or higher
        Task.Factory.StartNew(CallTheBackgroundFunctions);
    }

    private static void CallTheBackgroundFunctions()
    {
        cpuView();
        gpuView();
    }
} 
```

请记住（就像[John Koerner](https://stackoverflow.com/a/11811470/808723)告诉你的那样）你的`cpuView()`并且`gpuView()`不会按原样工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-23T22:05:40.390

是的你可以：

在您的计时器滴答事件中：

```
private void timer_Tick(object sender, EventArgs e)
{

  timer.Enabled = false;

  backgroundworker.RunWorkerAsync();

  timer.Enabled = true;
} 
```

在您的 Backgroundworker dowork 事件中：

```
private void backgroundworker_DoWork(object sender, System.ComponentModel.DoWorkEventArgs e)
{
   try
   {
       //Write what you want to do
   }
   catch (Exception ex)
   {
       MessageBox.Show("Error:\n\n" + ex.Message, "System", MessageBoxButtons.OK, MessageBoxIcon.Error);
   }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-04T21:02:11.490

我认为`BackgroundWorker`这个案子太复杂了；`Timer`很难实现保证停止。

我想建议您使用带有循环的worker `Thread`，该循环等待取消`ManualResetEvent`您需要的时间间隔：

*   如果设置了取消事件，则工作人员退出循环。
*   如果超时（您需要超过的时间间隔），则执行系统监控。

这是代码的**草稿版本**。请注意**我没有测试过**，但它可以告诉你这个想法。

```
public class HardwareMonitor
{
    private readonly object _locker = new object();
    private readonly TimeSpan _monitoringInterval;
    private readonly Thread _thread;
    private readonly ManualResetEvent _stoppingEvent = new ManualResetEvent(false);
    private readonly ManualResetEvent _stoppedEvent = new ManualResetEvent(false);

    public HardwareMonitor(TimeSpan monitoringInterval)
    {
        _monitoringInterval = monitoringInterval;
        _thread = new Thread(ThreadFunc)
            {
                IsBackground = true
            };
    }

    public void Start()
    {
        lock (_locker)
        {
            if (!_stoppedEvent.WaitOne(0))
                throw new InvalidOperationException("Already running");

            _stoppingEvent.Reset();
            _stoppedEvent.Reset();
            _thread.Start();
        }
    }

    public void Stop()
    {
        lock (_locker)
        {
            _stoppingEvent.Set();
        }
        _stoppedEvent.WaitOne();
    }

    private void ThreadFunc()
    {
        try
        {
            while (true)
            {
                // Wait for time interval or cancellation event.
                if (_stoppingEvent.WaitOne(_monitoringInterval))
                    break;

                // Monitoring...
                // NOTE: update UI elements using Invoke()/BeginInvoke() if required.
            }
        }
        finally
        {
            _stoppedEvent.Set();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-30T10:27:45.180

就我而言，我在**WinForm**应用程序中使用了**BackgroundWorker**、**System.Timers.Timer**和**ProgressBar 。**我遇到的是第二次打勾，我将重复 BackgroundWorker 的 Do-Work 我在尝试更新 BackgroundWorker 的 ProgressChanged 中的 ProgressBar 时遇到**跨线程异常**。然后我在 SO @Rudedog2 [https://stackoverflow.com上找到了](https://stackoverflow.com/a/4072298/1218551)**解决方案**[/a/4072298/1218551](https://stackoverflow.com/a/4072298/1218551)表示当您初始化 Timers.Timer 对象以用于 Windows 窗体时，您必须将计时器实例的 SynchronizingObject 属性设置为窗体。

 ******```
systemTimersTimerInstance.SynchronizingObject = this; // this = form instance. 
```

[http://msdn.microsoft.com/en-us/magazine/cc164015.aspx](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)******

# python - 在 Python 中更改运算符优先级

> ID：11811051
> 
> 赞同：12
> 
> 时间：2012-08-04T18:27:01.627
> 
> 标签：python, operator-precedence

我已经重载了一些 Python 运算符、算术和布尔值。Python 优先规则仍然有效，这对于重载的运算符是不自然的，导致表达式中出现大量括号。有没有办法“重载” Python 的优先级？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-04T19:10:42.043

您可以通过以下方式欺骗该机制：

1.  覆盖所有运算符以不进行计算，而是创建包含在某个对象中的指令列表。
2.  添加您自己的括号运算符（即作为`_`函数）。

例子：

```
>>> a = MyNumber(5); b = MyNumber(2); c = MyNumber(3)
>>> a + b * c
MyExpression([MyNumber(5), '+', MyNumber(2), '*', MyNumber(3)]) 
```

括号：

```
>>> a + _(b * c) 
```

请注意，这`_`是一个评估表达式的函数（以便您在其中强制执行）

因此，如果您颠倒优先级，您将获得：

```
>>> _(a + b * c)
MyNumber(21) 
```

PS。`Q`Django 使用and运算符做类似的技巧`F`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-04T18:32:26.057

不，它是 python 语言本身的一部分。这就是语言解析的方式。

官方报价：[评估订单](http://docs.python.org/reference/expressions.html#evaluation-order)

> Python 从左到右计算表达式。请注意，在评估分配时，右侧先于左侧评估。

其他报价：

[Python:基础:数字和运算符](http://techearth.net/python/index.php5?title=Python:Basics:Numbers_and_operators#Operator_Precedence)

> 在使用混合运算符执行数学运算时，请务必注意 Python 根据预先确定的优先级确定首先执行哪些运算。此优先级遵循与大多数编程语言类似的优先级。

[Python 编程/操作员](http://en.wikibooks.org/wiki/Python_Programming/Operators)

> 请注意，Python 遵循[PEMDAS 操作顺序](http://en.wikipedia.org/wiki/Order_of_operations)。

# c# - AForge.NET 中的“过滤器不支持源像素格式”错误

> ID：11811052
> 
> 赞同：5
> 
> 时间：2012-08-04T18:27:08.257
> 
> 标签：c#, aforge

我正在尝试在 Aforge 中应用 Bradleys 阈值算法

每次我尝试处理图像时，都会出现以下异常

> throw new UnsupportedImageFormatException("过滤器不支持源像素格式。");

在应用算法之前，我使用以下方法对图像进行灰度化

```
private void button2_Click(object sender, EventArgs e)
{
    Grayscale filter = new Grayscale(0.2125, 0.7154, 0.0721);
    Bitmap grayImage = filter.Apply(img);

    pictureBox1.Image = grayImage;
} 
```

算法调用的代码

```
public void bradley(ref Bitmap tmp)
{  
    BradleyLocalThresholding filter = new BradleyLocalThresholding();
    filter.ApplyInPlace(tmp);
} 
```

我在图像处理实验室尝试了健全的图像，它确实有效，但在我的系统上却不行。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T13:26:15.007

在这种情况下，我使用以下代码来获取更好的信息。它不能解决问题，但它至少提供了比 AForge 本身提供的更多有用信息。

```
namespace AForge.Imaging.Filters {

    /// <summary>
    /// Provides utility methods to assist coding against the AForge.NET 
    /// Framework.
    /// </summary>
    public static class AForgeUtility {

        /// <summary>
        /// Makes a debug assertion that an image filter that implements 
        /// the <see cref="IFilterInformation"/> interface can 
        /// process an image with the specified <see cref="PixelFormat"/>.
        /// </summary>
        /// <param name="filterInfo">The filter under consideration.</param>
        /// <param name="format">The PixelFormat under consideration.</param>
        [Conditional("DEBUG")]
        public static void AssertCanApply(
            this IFilterInformation filterInfo, 
            PixelFormat format) {
            Debug.Assert(
                filterInfo.FormatTranslations.ContainsKey(format),
                string.Format("{0} cannot process an image " 
                    + "with the provided pixel format.  Provided "
                    + "format: {1}.  Accepted formats: {2}.",
                    filterInfo.GetType().Name,
                    format.ToString(),
                    string.Join( ", ", filterInfo.FormatTranslations.Keys)));
        }
    }
} 
```

在您的情况下，您可以将其用作：

```
public void bradley(ref Bitmap tmp)
{  
    BradleyLocalThresholding filter = new BradleyLocalThresholding();
    filter.AssertCanApply( tmp.PixelFormat );
    filter.ApplyInPlace(tmp);
} 
```

# ios - 无法通过 IOS sdk 发布到 facebook 提要

> ID：11811055
> 
> 赞同：0
> 
> 时间：2012-08-04T18:28:08.083
> 
> 标签：ios, facebook, post, feed

我目前在通过 facebook API 在用户的墙上发帖时遇到问题。我已请求权限“read_stream”和“publish_stream”。我可以登录并获取用户的名字，但是当我去发帖时，用户的墙上什么都没有显示。该帖子是在收到来自电话的用户信息后立即发布的：

```
[facebook requestWithGraphPath:@"me" andDelegate:self]; 
```

然后我尝试在用户的墙上发帖：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
@"Test", @"name",@"http://www.example.com",@"link",@"New high score!", @"caption",
                               @"Test Caption", @"description",
                               @"Test description", @"message",       
                               @"link",@"type",
                               nil];

// Publish.
[facebook requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

我收到一个回调通知，说响应已成功收到，但帖子的 id 为“0”。我附加了wireshark，但实际上我从未看到通过电线发送的帖子消息。我逐步浏览了 facebook 代码并查看了实际创建的帖子 urlconnection 以及在其上调用的“连接”方法。我检查了会话，它说它仍然有效。我什至尝试用帖子替换获取用户信息的调用，但仍然得到相同的结果。

这发生在模拟器和设备中。

关于我所缺少的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:01:22.870

我回答你的问题有点太晚了，但我才知道你不能再通过 Graph API 在朋友墙上发帖了！！

**移除通过 Graph API 向朋友墙发帖的功能**

我们将删除通过 Graph API 向用户朋友的墙发帖的功能。具体来说，针对 [user_id]/feed 的 [user_id] 与会话用户不同的帖子，或 target_id 用户与会话用户不同的 stream.publish 调用将失败。如果您想允许人们发布到他们朋友的时间线，请调用提要对话框

来源摘录：[https ://developers.facebook.com/blog/post/2012/11/07/platform-updates--operation-developer-love/](https://developers.facebook.com/blog/post/2012/11/07/platform-updates--operation-developer-love/)

我仍在寻找通过提要对话发布的方法，如果我成功完成任务，我会通知您，干杯！:)

# iphone - iPhone SDK：如何为 UILabel 的文本添加大纲

> ID：11811056
> 
> 赞同：1
> 
> 时间：2012-08-04T18:28:09.083
> 
> 标签：iphone, objective-c, ios, ios4, label

我想知道是否有一种方法可以将大纲添加到像`UILabel`.

我怎样才能做到这一点？我试过`text.layer.borderWidth`了，但这只会在标签框周围创建一个框。我希望轮廓围绕标签中的各个字符。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T19:18:05.520

看看这两个帖子，我想他们可以帮助你：

[如何让 UILabel 显示轮廓文本？](https://stackoverflow.com/questions/1103148/how-do-i-make-uilabel-display-outlined-text)

[你如何抚摸NSAttributedString的*外部？*](https://stackoverflow.com/questions/4467597/how-do-you-stroke-the-outside-of-an-nsattributedstring)

# android - 使用 min3d/Rajawali 框架 (android) 在触摸时围绕 3d 对象旋转

> ID：11811059
> 
> 赞同：2
> 
> 时间：2012-08-04T18:28:53.673
> 
> 标签：android, rotation, touch, rajawali

我正在研究一种使用 Min3d/Rajawali 框架围绕 3D 对象旋转相机的算法。

通过我的实现，围绕 X 轴的旋转无法正常工作。我认为该方法`setLookAt()`无法正常工作。

**问题：**

当我垂直旋转球体时，我无法完全看到它。例如，转动地球，我无法完全看到南极，因为算法将相机重置为向下。

是否可以在不使用“setLookAt”方法的情况下实现相机围绕对象旋转？

我尝试了不同的解决方案，但无法使其正常工作。

下面是我的代码：

```
initScene:
    scene.camera().position.z = 90;
    scene.camera().target = raketeOBJ.position();

onTouchEvent:
    public boolean onTouchEvent(MotionEvent me) {
     if (me.getAction() == MotionEvent.ACTION_DOWN) {
        xpos = me.getX();
        ypos = me.getY();
        return true;
    }

    if (me.getAction() == MotionEvent.ACTION_UP) {
        xpos = -1;
        ypos = -1;
        touchTurn = 0;
        touchTurnUp = 0;
        return true;
    }

    if (me.getAction() == MotionEvent.ACTION_MOVE) {
        float xd = me.getX() - xpos;
        float yd = me.getY() - ypos;

        xpos = me.getX();
        ypos = me.getY();

        touchTurn = xd / -200f;
        touchTurnUp = yd / -200f;
        return true;
    }

    try {
        Thread.sleep(15);
    } catch (Exception e) {

    }

    return super.onTouchEvent(me);
}

UpdateScene:

    if (touchTurn != 0) {
        scene.camera().position.rotateY(touchTurn);
        touchTurn = 0;
    }

    if (touchTurnUp != 0) {
        scene.camera().position.rotateX(touchTurnUp);
        touchTurnUp = 0;
    }

Number3d target = scene.camera.target;
Number3d cp = scene.camera.position.clone();
// move position like target is (0,0,0)
cp.x -= target.x;
cp.y -= target.y;
cp.z -= target.z;

cp.roateX(angle);

// restore offset
cp.x += target.x;
cp.y += target.y;
cp.z += target.z;
scene.camera.position.setAllFrom(cp); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-12-17T15:37:51.913

有点晚了，但万一有人遇到麻烦，比如我。

Rajawali 提供了一个名为[ArcballCamera](https://github.com/Rajawali/Rajawali/blob/master/rajawali/src/main/java/org/rajawali3d/cameras/ArcballCamera.java)的相机，它完全可以满足您/我们正在尝试做的事情。

在您的渲染器中添加以下内容：

```
 ArcballCamera arcball = new ArcballCamera(mContext, ((Activity)mContext).findViewById(R.id.contentView)); 
 arcball.setTarget(mObjectGroup); //your 3D Object

 arcball.setPosition(0,0,4); //optional

 getCurrentScene().replaceAndSwitchCamera(getCurrentCamera(), arcball); 
```

现在您无需十几行代码即可旋转和缩放对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T04:38:07.583

这是我根据 x 和 y 旋转 3d 模型的方法

在渲染类

```
public boolean left, right;
public boolean up, down; 
```

并在 onDrawFrame

```
@Override
public void onDrawFrame(GL10 glUnused) {
    super.onDrawFrame(glUnused);
    // getCurrentCamera().setRotY(getCurrentCamera().getRotY() + 1);
    if (left) {
        getCurrentCamera().setRotX(getCurrentCamera().getRotX() - 1);
    }
    if (right) {
        getCurrentCamera().setRotX(getCurrentCamera().getRotX() + 1);
    }
    if (up) {
        getCurrentCamera().setRotY(getCurrentCamera().getRotY() - 1);
    }
    if (down) {
        getCurrentCamera().setRotY(getCurrentCamera().getRotY() + 1);
    }
} 
```

并在 MainActivity

```
@Override
public boolean onTouchEvent(MotionEvent event) {

    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        xpos = event.getX();
        ypos = event.getY();
    }

    if (event.getAction() == MotionEvent.ACTION_UP) {
        xpos = -1;
        ypos = -1;
        mRender.left = false;
        mRender.right = false;
        mRender.up = false;
        mRender.down = false;

    }

    if (event.getAction() == MotionEvent.ACTION_MOVE) {
        xd = event.getX() - xpos;
        yd = event.getY() - ypos;

        xpos = event.getX();
        ypos = event.getY();

        if (xd < 0) {
            mRender.up = true;
        } else {
            mRender.down = true;
        }
        if (yd < 0) {
            mRender.left = true;
        } else {
            mRender.right = true;
        }

    }

    return super.onTouchEvent(event);
} 
```

通过这种方式，我可以旋转我的模型:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:24:32.477

如果您希望相机定期更新，则需要调用 setLookAt() onDrawFrame。但是您需要更关心创建“RotateAroundAnimation”。有关更多信息，请参见此处：[http ://www.rozengain.com/blog/2012/03/26/rajawali-tutorial-12-animation-classes/](http://www.rozengain.com/blog/2012/03/26/rajawali-tutorial-12-animation-classes/)

您必须制作 yourAnimation.setTransformable3D(mCamera)，然后它应该控制您的主相机。我经常使用这种方法，然后在触摸或其他外部刺激时调用“yourAnimation.start()”。

# python - 如何解析结构松散的文档

> ID：11811060
> 
> 赞同：0
> 
> 时间：2012-08-04T18:29:18.897
> 
> 标签：python, text-analysis

我正在分析数据提要，其中的数据有点像这样

```
RAM 4 GB DDR3
RAM 16GB DIMM
memory 4GB DDR3 MHz         // no value for MHz 
memory 4GB DDR3 1333 MHz    // no the order of MHz is not fixed
ram 6GB, 1333 MHz, DDR3     // comma used as delimiter

Processor Intel Core i7-3612QM
Processor Intel Core i7 2630QM
processor i3-380,2.53 GHz          //380 used for model number instead of 380M and model number separated by '-' and clock speed separated by ','
Processor Core i3-380 2.53 GHz 
Processor Intel Ci3 - 2330 (2nd Gen), 2.53 GHz   // multiple symbols used as delimiters(',','-')

Hard drive 500GB 5400RPM
Hard Disk Drive 1.5 TB
Hard Disk 256 GB 
```

现在我需要分析每个规格的含义，`ram 6GB, 1333 MHz, DDR3`我需要弄清楚 6GB 是容量，1333 MHz 是频率，DDR3 是内存的类型。但是您可以看到的问题是这些非常不规则（有些条目有一些字段而没有其他字段，有时空格用作分隔符，有时`,`是 s，有时`-`是 s）。我的第一反应是使用正则表达式，但我很快意识到这很愚蠢。然后我认为我可以`split`在分隔符上（`,`在上述情况下），但即使分隔符也不是固定的。此外，这种方法对于像这样的条目将无用`memory 4 GB 1333 MHz DDR3`使用空格作为该条目的分隔符会使它看起来`4` `GB` `1333` `MHz` 不同，但实际上`4 GB`和`1333 MHz`是不同的。另外，我如何以编程方式决定`Intel Core i3`，，并暗示英特尔酷睿 i3？我知道我必须告诉图书馆一次，并且意思相同。但后来分析文本时应该能够弄清楚。上面提到的条目列表显示了条目的可变性。是否有一些 python 库（或任何其他语言）可以帮助我处理这些任务？`Core i3``i3-380``Ci3``Intel Core i3``Core i3``Ci3`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T18:49:03.160

如果您能够构建一组直接对应于每种类型的条目的类，那么这可能就是要走的路。例如，RAM 的类可能是：

```
class Memory:
    def __init__(self, s):
        if not 'RAM' in s and not 'memory' in s:
            raise ValueError("Not a string that describes RAM.")

        self.capacity = int(re.match(r'(\d+) ?GB', s)[1]) 
```

然后尝试每一堂课，直到适合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T18:44:39.973

首先，您确定没有其他系统的方法可以获取设备信息吗？大多数系统实用程序都提供了一种标准化的信息导出方式。

如果您绝对必须解析这种结构，您将不得不使用正`regex`则**表达式**来处理这种结构松散的文档。

虽然本文档通常没有统一的结构，但本文档中的每一行**都有**自己的标准化结构。

逻辑：

1) 一次解析文件一行。2) 读取第一个标记并使用该方法解析该行的其余部分。

例如：如果您遇到标记“RAM”，您就会知道它后面总是跟着一个数字大小、单位和类型。

快乐编码！

# ios - HTTP Live Streaming 的 AVPlayer 速率属性

> ID：11811062
> 
> 赞同：1
> 
> 时间：2012-08-04T18:29:44.043
> 
> 标签：ios, video-streaming, avfoundation, avplayer, http-live-streaming

我正在尝试使用 AVFoundation 开发播放器并启用快进和快退。我将玩家的 rate 属性设置为 0、0.25、0.5、1、1.5、2.0。0,1 的 rate 属性按预期工作并将其设置为暂停和播放。0.25、0.5 也可以工作并以慢动作显示视频。

我的问题是设置 1.5, 2.0 的属性不起作用，它只是继续播放。不过，这适用于 .mp4 视频。这不支持 HLS 吗？我正在使用 Apple 提供的示例 HLS 流。 [http://devimages.apple.com/iphone/samples/bipbopgear4.html](http://devimages.apple.com/iphone/samples/bipbopgear4.html)

我们如何启用倒带和快进？我应该以某种方式使用 seekToTime 吗？

任何帮助将不胜感激 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:37:20.727

看起来如果我有 i-Frame 播放列表，则支持 FF/RW。但那只是来自iOS5.0+。

从 Apple Dev Forums 确认。仅 HLS 内容的 I 帧播放列表支持速率。对于普通播放列表，仅支持 rate = 0, 1（本质上是播放/暂停）

对于非 HLS 内容，速率可用于 <0, =0,>0 以支持 FF/RW/Slow forward 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:19:50.367

rate 属性只控制播放速度。0 表示停止，最高为 1 表示当前项目的正常速率。任何超过 1 的值都被视为 1。如果您想“快进”到特定点，则需要使用您提到的方法“seekToTime”。没有办法（AFAIK）使用公共 API 以比正常速度更快的速度播放电影。希望有帮助。

# ruby-on-rails - 模型中的 Ruby on Rails 访问数组

> ID：11811066
> 
> 赞同：0
> 
> 时间：2012-08-04T18:30:28.490
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3.1, model

我的模型中有一个数组，但我不知道如何从这个模型中的一些 def 访问它

```
private 

topics =
[
'en','Sports','sports',
'en','Sports,Soccer,Football','soccer,football',
]

def self.load   
    topics.each_slice(3).map do |lang,tags,searchterms|
        load_data(lang,tags,searchterms) 
    end 
end 
```

但是当我尝试从控制台执行时，它会显示错误

NameError：类的未定义局部变量或方法“主题”：

我不想在 def 中声明数组，因为我需要模型中的其他方法可以访问这个数组

任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:46:08.343

因为您已将其定义`topics`为局部变量，但试图将其作为类变量。

只需`@@topics`在定义和方法中都将其更改为`load`，然后它应该可以工作。

# objective-c - 访问子类中的私有（类扩展）成员

> ID：11811070
> 
> 赞同：3
> 
> 时间：2012-08-04T18:31:11.737
> 
> 标签：objective-c

我正在使用包含以下扩展的第 3 方类：

```
@interface BaseClass ()
{
   int privateMember;
}
@end 
```

我创建了自己的子类：

```
 @interface SubClass : BaseClass {
  }
  @end 
```

有没有办法在 SubClass 中访问 privateMember？

* * *

编辑：实际代码

GPUImageMovie.m：（基类）

```
@interface GPUImageMovie ()
{
    BOOL audioEncodingIsFinished, videoEncodingIsFinished;
    GPUImageMovieWriter *synchronizedMovieWriter;
    CVOpenGLESTextureCacheRef coreVideoTextureCache;
    AVAssetReader *reader;
} 
```

MultiTrackGPUImageMovie.h（子类）

```
@interface MultiTrackGPUImageMovie : GPUImageMovie {
}
...
@end 
```

MultiTrackGPUImageMovie.m（子类）

```
 - (void)processMovieFrame:(CMSampleBufferRef)movieSampleBuffer forTarget:(int)targetToSendIdx {
 ...
 CVReturn err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault,       coreVideoTextureCache, movieFrame, NULL, GL_TEXTURE_2D, GL_RGBA, bufferWidth, bufferHeight,   GL_BGRA, GL_UNSIGNED_BYTE, 0, &texture);
 ...
} 
```

给出错误使用未声明的标识符'coreVideoTextureCache'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T18:39:02.897

这取决于如何声明“私人”成员。如果它之前**没有**`@private`关键字，即它是真的

```
@interface BaseClass ()
{
    int privateMember;
}
@end 
```

而**不是**

```
@interface BaseClass ()
{
    @private
    int privateMember;
}
@end 
```

那么你可以很容易地通过使用它的名字来引用这个实例变量——实例变量的默认访问范围是受保护的，即不能在类外访问，但可以从子类访问。

但是，如果它**被**声明为`private`，您将不得不使用运行时函数；在您的子类中，声明并实现此方法：

```
- (void *)pointerForIvarWithName:(NSString *)name
{
    Ivar ivar = class_getInstanceVariable([self class], [name UTF8String]);
    return ((char *)self) + ivar_getOffset(ivar);
} 
```

然后像这样使用它：

```
int ivarPtr;
ivarPtr = *(int *)[self pointerForIvarWithName:@"privateMember"]; 
```

编辑：因此您尝试访问的成员似乎在类扩展中，而不是在头文件中公开。在这种情况下，您只能选择第二种解决方案（尽管不建议这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T19:09:06.013

**对我来说，当类扩展名在`.m`文件**中时，不可能使用子类中的类扩展名中的默认@protected ivar，就像接受的答案所说的那样。

所以这就是我如何在不使用运行时 API（不应该以这种方式使用）的情况下解决这个问题的方法。

* * *

它们也被实现，也用于子类 `SubClass. 您无法访问它们，因为声明对子类不可见。

*子类* 无权访问`@interface BaseClass ()`.`BaseClass`

您有 2 个选项：

复制

> ```
> @interface BaseClass () {
>     int privateMember;
> }
> @end 
> ```

到每个子类。是的，*它*是.`BaseClass``.m``SubClass`

**或者**

创建一个`.h`没有 的文件`.m`，只在里面包含类扩展代码（如上）。将其导入到`BaseClass`和`SubClass`。

# php - 正则表达式，用于达到但不包括输出中的字符

> ID：11811073
> 
> 赞同：0
> 
> 时间：2012-08-04T18:31:55.803
> 
> 标签：php, regex

所以基本上我只需要一些关于我的正则表达式模式的帮助，它可以工作，但它捕获了左括号，我不希望它这样做。我需要它来搜索，但不要将它包含在返回中。我有一个数组，我内爆并用星号粘合

```
$string = 'this is a test*Yes this is a (poor test)*But its easy'; 
```

现在我想，一次失败的一举将所有文本都添加到不包括 ( 并将其拆分为 * 这是我目前所拥有的，它几乎可以工作，但它包括 ( 在输出中。

```
$delimiter = '/.+[(*]/U'; 
```

哦，我正在使用 preg_match_all()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T18:36:18.307

嗯，匹配

```
[^(]+ 
```

反而。*这将匹配不是*左括号的字符序列。所以匹配将在下一个左括号之前停止。

# php - 基于 CSS ID 标签嵌入网站的一部分

> ID：11811084
> 
> 赞同：0
> 
> 时间：2012-08-04T18:33:05.047
> 
> 标签：php, html, css

我想将网站的一部分包含在我的网站中。我可以尝试使用 iframe，但我相信这不是最好的方法。有没有办法根据 CSS ID 嵌入网站的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:35:00.187

> 有没有办法根据 CSS ID 嵌入网站的一部分？

从理论上讲，是的 - 您可以使用 PHP 获取外部页面，使用 HTML 解析器分离元素，并仅显示元素的 HTML。

但是，使用这种方法会丢失所有样式信息，因为 HTML 将在本地页面的上下文中呈现。混合您自己和外部网站的样式通常会导致混乱。

除非您真的只需要来自外部站点的纯 HTML 标记，否则最好使用 iframe。

# ruby-on-rails-3 - Elasticsearch：使用轮胎宝石按组过滤

> ID：11811087
> 
> 赞同：0
> 
> 时间：2012-08-04T18:33:36.577
> 
> 标签：ruby-on-rails-3, elasticsearch, tire

我想按年龄组过滤搜索。

现在我有： **program.rb**

```
class Program < ActiveRecord::Base
  has_many :age_groups, through: :programs_age_groups_relations
  include Tire::Model::Search
  include Tire::Model::Callbacks
  mapping do
    indexes :name, analyzer: 'snowball', boost: 100
    indexes :description, analyzer: 'snowball'
    indexes :age_groups do
      indexes :name, analyzer: 'snowball'
    end
  end

  def to_indexed_json
    to_json(include: {age_groups: {only: :name}})
  end
  def self.search(params, options={})
    tire.search(load: {include: 'age_groups'}) do
      query do
        boolean do
          must { string params[:name_query] } if params[:name_query].present?
        end
      end

    filter do
      boolean do
        if params[:age_groups].present?
          params[:age_groups].each do |ag_name|
            must { string ag_name }
          end
        end
      end
    end
  end
end 
```

**index.html.haml**

```
= form_tag programs_path, method: :get do |f|
  = text_field_tag :name_query, params[:name_query]
  - AgeGroup.all.each do |ag|
    = check_box_tag 'age_groups[]', ag.name, params[:age_groups].include?(ag.name) 
```

在控制器中：

```
@programs = Program.search(params) 
```

年龄组：

```
AgeGroup.create([{name: 'Baby'}, {name: 'Toddler'}, {name: 'Preschoolers'}, {name: 'Elementary'}, {name: 'Middle School'}]) 
```

房地产：

```
class ProgramsAgeGroupsRelation < ActiveRecord::Base
  attr_accessible :age_group_id, :program_id
  belongs_to :age_group
  belongs_to :program
end 
```

当我在搜索表单中检查一个或多个 age_groups 时，搜索结果没有发生任何事情。

我怎样才能正确地使用轮胎来完成这项任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:10:10.680

我不确定我是否理解您的问题，但请查看此 StackOverflow 答案：[Elasticsearch、Tire 和 Nested queries/associations with ActiveRecord](https://stackoverflow.com/questions/11692560/elasticsearch-tire-and-nested-queries-associations-with-activerecord/11711477#11711477)以获取有关 ActiveRecord 与 Tire 关联的信息。

一旦你解决了这个问题，请更新你的问题，因为“搜索结果没有发生任何事情”暗示某种失败的期望，但我不知道是哪一个。

# codeigniter - 需要 Codeigniter ajax 信息

> ID：11811095
> 
> 赞同：0
> 
> 时间：2012-08-04T18:34:27.787
> 
> 标签：codeigniter

我是 Codeigniter 的初学者。这将是我第一次使用 Ajax。单击导航链接时，我只想更改“内容”部分。我需要学习如何在我的网站中使用 ajax。

MY_Controller.php：

```
class MY_Controller extends CI_Controller {

  protected $data = array();

  function __construct() {
    parent::__construct();
  }

   function render_page($view) {
    if( ! $this->input->is_ajax_request() )
    {
      //do this to don't repeat in all controllers...
      $this->load->view('templates/header', $this->data);
      //menu_data must contain the structure of the menu...
      //you can populate it from database or helper
    }

    $this->load->view($view, $this->data);

    if( ! $this->input->is_ajax_request() )
    {
     $this->load->view('templates/menu');
     $this->load->view('templates/footer', $this->data);
    }
  } 
```

我的家/关于控制器视图功能：

```
 public function view($page = 'home')
    {
     $this->load->helper('text');
        $this->data['records']= $this->services_model->getAll();
        if ( ! file_exists('application/views/pages/'.$page.'.php'))
        {
            // Whoops, we don't have a page for that!
            show_404();
        }

        $data['title'] = ucfirst($page); // Capitalize the first letter

        $this->render_page('pages/'.$page,$data);

    } 
```

我想，我可以在 MY_Controller.php 中启用 ajax。这之后该怎么办？我应该如何在视图中启用帖子？

编辑：我对 jquery 和 ajax 做了更多的研究。这是我的 html 导航菜单部分：

```
 <div id="sidebar-content">
    <ul id="menu">
    <li class="current"><a href="<?php echo site_url('home'); ?>">ANASAYFA</a></li>
    <li><a href="<?php echo site_url('about'); ?>">HAKKIMIZDA</a></li>
...... 
```

我在 head 部分中编写了 ajax.js 文件：

//导航

```
$("#sidebar-content ul li a").click( function(){     
        $.ajax({
                    url: "<?php echo site_url('about'); ?>",
                    type: 'POST';
                    data: JSON,
                    success: function(msg) {
                        $('#content').body(msg);
                    }
                });
                });

        return false;
}); 
```

你能改进我的代码吗？另一个问题是：如果我在头部使用 ajax，我如何将不同的页面发布为 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:48:40.263

你的问题有点模棱两可，但这里有一些我可以用你的 JQuery 看到的问题：

*   您已`data: Json`在 JQuery 中设置，但看起来您正在返回 HTML，因此将其更改为 HTML。

*   `type: post`当它应该只是一个逗号时，你有一个分号

*   url 指向控制器，而不是方法。将其更改为`"<?php echo site_url('about/view'); ?>",`

*   没有`.body()`您想要的 JQuery 之类的东西，也没有`.html()`成功功能的完整行：`$('#content').html(msg);`. Obviosult 确保您有一个名为 id="content".JQuery 的元素然后将其替换为来自服务器的响应，该响应应该是从您的控制器返回的纯 html。您可以使用 codeigniters $this->load->view() 返回正确的文件。

其他注意事项 - 似乎您需要阅读 JQuery，尤其是[ajax 函数](http://api.jquery.com/jQuery.ajax/)

这是一个关于将 Ajax 与 CI 结合使用的好教程 - [http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-day-8-ajax/](http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-day-8-ajax/)

最后，使用 Chrome 的开发者工具 web 检查器中的控制台和网络功能或获取 Firebug for Firefox，这样您就可以查看 js 错误并监控 ajax 请求（XHR）

# jquery - jQuery 需要在 iPad 的三个 droppable 之后附加一条成功消息

> ID：11811098
> 
> 赞同：0
> 
> 时间：2012-08-04T18:34:45.413
> 
> 标签：jquery, html, messagebox, jquery-ui-droppable

我有三个可拖动的图像和三个可放置的 div 供它们进入。

一旦所有三个图像都在三个可放置的 div 之一中，我试图让消息框触发，有没有办法只使用 jQuery 来做到这一点？如果重要的话，该项目将主要在 iPad 上使用。我想指出正确的方向。

JavaScript：

```
$('#widget').draggable();

$(window).bind("load", function() {
    $("#falcon,#falcon1,#falcon2").draggable({
        cursor : 'hand',
        start : function(event, ui) {
            $(this).data('startPosition', $(this).position());
        }
    });
    $("#falcon_USA").droppable({
        drop : function(event, ui) {
            if (!confirm('Yes! Falcons like Perry and others can be found from Canada to South America throughout the year!')) {
                $(ui.draggable).animate($(ui.draggable).data('startPosition'), 500);
            }
        }
    });
}); 
```

HTML：

```
<body onload="window.open('', '_self', '');">
    <h1> 
    Place a falcon in all of the areas that they can be found!<br> Drop the falcon onto the     map three times.
    </h1>

    <div id="falcon_USA"></div>
    <div id="falcon_Canada"></div>
    <div id="falcon_SA"></div>

    <div id="falcon" class="ui-widget-content">             
    <img src="Falcon.jpg" height="100" width="100" alt="falcon pic" />
    </div>
    <div id="falcon1" class="ui-widget-content">                
    <img src="Falcon.jpg" height="100" width="100" alt="falcon pic" />
    </div>
    <div id="falcon2" class="ui-widget-content">                
    <img src="Falcon.jpg" height="100" width="100" alt="falcon pic" />
     </div> 
     <div id="footer"><a href="javascript:window.close();"> Go Back to Perry G.</a></div>

</body> 
```

这是一个 jsfiddle 来演示我到目前为止所做的事情：http: [//jsfiddle.net/kYKeM/](http://jsfiddle.net/kYKeM/)

# shell - 如何修改 PS1 以在最右边显示时间？

> ID：11811100
> 
> 赞同：2
> 
> 时间：2012-08-04T18:34:54.213
> 
> 标签：shell, ps1

目前显示如下

```
export PS1='${white}[\t] ${blue}\W:${red}$(__git_ps1)${white} \$ ' 
```

![在此处输入图像描述](../Images/bac52ca446b2da9d67b34f374cfed2a2.png)

我想尝试相同的设置，但时间显示在最右边的角落。

我该如何修改我的`PS1`出口才能发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T20:05:45.710

不要认为有任何方法可以`PS1`在 bash 中使用提示符来正确对齐项目（但可以肯定的是，在 zsh 中有简单的方法可以做到这一点）。您可以尝试为环境变量编写一个函数，`PROMPT_COMMAND`并让它打印带有右对齐的时间，类似于：

```
print_pre_prompt ()
{
    TIME=`date +%H:%M`
    printf "\e[1;37m%$(($COLUMNS))s" "${TIME}"
}
PROMPT_COMMAND=print_pre_prompt 
```

在这里，`\e[1;37m`是“白色”颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T12:39:47.677

这是您要寻找的输出提示吗？

导出 PS1="\u@\w [\$(日期 +%k:%M:%S)]> "

# symfony - 使用 datafixtures 和 fosuserbundle 创建管理员用户

> ID：11811102
> 
> 赞同：10
> 
> 时间：2012-08-04T18:35:00.803
> 
> 标签：symfony, fosuserbundle

我正在尝试从夹具创建一个新的用户管理员。我正在使用 FOSUserBundle 和 Symfony2。

```
$userManager = $this->container->get('fos_user.user_manager');

//$userAdmin = $userManager->createUser();

$userAdmin = new UserAdmin();
$userAdmin->setUsername('francis');
$userAdmin->setEmail('francis@francis.com');
$userAdmin->setEnabled(true);
$userAdmin->setRoles(array('ROLE_ADMIN'));

$userManager->updateUser($userAdmin, true); 
```

我总是收到这个错误：

```
[ErrorException]                                         
Notice: Undefined property:     
INCES\ComedorBundle\DataFixtures\ORM\LoadUserAdminData::$container in 
/public_html/Symfony/src/INCES/ComedorBundle/DataFixtures/ORM/LoadUserAdminData.php line 16 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-06-01T21:25:53.100

这对我有用（我也在使用 FOSUserBundle）：

```
// Change the namespace!
namespace Acme\DemoBundle\DataFixtures\ORM;

use Doctrine\Common\DataFixtures\FixtureInterface;
use Doctrine\Common\Persistence\ObjectManager;
use Symfony\Component\DependencyInjection\ContainerAwareInterface;
use Symfony\Component\DependencyInjection\ContainerInterface;

class LoadUserData implements FixtureInterface, ContainerAwareInterface
{
    //.. $container declaration & setter

    public function load(ObjectManager $manager)
    {
        // Get our userManager, you must implement `ContainerAwareInterface`
        $userManager = $this->container->get('fos_user.user_manager');

        // Create our user and set details
        $user = $userManager->createUser();
        $user->setUsername('username');
        $user->setEmail('email@domain.com');
        $user->setPlainPassword('password');
        //$user->setPassword('3NCRYPT3D-V3R51ON');
        $user->setEnabled(true);
        $user->setRoles(array('ROLE_ADMIN'));

        // Update the user
        $userManager->updateUser($user, true);
    }
} 
```

希望这对某人有帮助！:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T22:43:20.860

遵循文档的[这一](http://symfony.com/doc/current/bundles/DoctrineFixturesBundle/index.html#using-the-container-in-the-fixtures)部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T19:55:19.810

错误是因为 $container 当前未定义。要解决此问题，请将 ContainerAwareInterface 添加到您的类定义中。

```
class LoadUserData implements FixtureInterface, ContainerAwareInterface
{
    ...
} 
```

但是，这并不能完全满足您的需求，因为您正在创建没有 UserManager 的用户。相反，您应该使用已注释掉的行。

在我看来，您不需要 UserAdmin 类。管理员用户应该是用户的子集，仅通过他们拥有的角色来区分。

您应该使用 UserManager 创建用户（而不是 UserAdmin）并设置角色。如果您需要保留所有管理员用户的索引，MySQL VIEW 可以完成此操作，或者您可以创建自己的自定义“缓存”表并在需要时使用 Doctrine Listeners 更新它。

这个问题相当老了，所以我猜你找到了答案或至少找到了解决方法。你能提供吗？可以回答您自己的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-06T11:57:39.370

这是 SF3+ 的更新版本 此答案基于 Anil 和 Mun Mun Das 的答案。

```
namespace App\DataFixtures;

use Doctrine\Bundle\FixturesBundle\Fixture;
use Doctrine\Common\Persistence\ObjectManager;
use FOS\UserBundle\Model\UserManagerInterface;

    class AdminFixtures extends Fixture
    {

        private $userManager;

        public function __construct(UserManagerInterface $userManager)
        {
            $this->userManager = $userManager;
        }

        public function load(ObjectManager $manager)
        {
            $user = $this->userManager->createUser();
            $user->setUsername('username');
            $user->setEmail('email@domain.com');
            $user->setPlainPassword('password');
            $user->setEnabled(true);
            $user->setRoles(array('ROLE_ADMIN'));
            $this->userManager->updateUser($user);
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-11T20:32:49.520

这就是我使用 Symfony 4、SonataAdmin 和 FosUserBundle 所做的

```
namespace App\DataFixtures;

use App\Application\Sonata\UserBundle\Entity\User;
use Doctrine\Bundle\FixturesBundle\Fixture;
use Doctrine\Common\Persistence\ObjectManager;

class UserFixtures extends Fixture
{
    public function load(ObjectManager $manager)
    {
        $user = new User();
        $user->setUsername('yourusername');
        $user->setEmail('youremail@email.com');
        $user->setEnabled(true);
        $user->setPlainPassword('yourpassword');
        $user->setRoles(array('ROLE_SUPER_ADMIN'));
        $manager->persist($user);

        $manager->flush();
    }
} 
```

# c# - C# SetWinEventHook 失败（返回 0）

> ID：11811106
> 
> 赞同：6
> 
> 时间：2012-08-04T18:36:20.840
> 
> 标签：c#, pinvoke

对于我正在制作的应用程序，我想拦截来自外部进程的窗口消息（很像 spy++ 的做法）。我发现我可以使用 SetWinEventHook 来做到这一点。这是我的代码。

```
 `class Program
    {
    internal delegate void WinEventProc(IntPtr hWinEventHook, int iEvent, IntPtr hWnd, int      idObject, int idChild, int dwEventThread, int dwmsEventTime);
        [DllImport("user32.dll", SetLastError = true)]
        internal static extern IntPtr SetWinEventHook(int eventMin, int eventMax, IntPtr hmodWinEventProc, WinEventProc lpfnWinEventProc, int idProcess, int idThread, SetWinEventHookFlags dwflags);
        //[DllImport("user32.dll", SetLastError = true)]
        internal static extern int UnhookWinEvent(IntPtr hWinEventHook);
      internal enum SetWinEventHookFlags
      {
          WINEVENT_INCONTEXT = 4,
          WINEVENT_OUTOFCONTEXT = 0,
          WINEVENT_SKIPOWNPROCESS = 2,
          WINEVENT_SKIPOWNTHREAD = 1
      } 
        static void Main(string[] args)
        {
            int threadId = 0x000306D4;
            int processId = 0x000306BC;
            WinEventProc listener = new WinEventProc(EventCallback);
   //setting the window hook and writing the result to the console
            Console.WriteLine(SetWinEventHook(1, 0x7fffffff, IntPtr.Zero, listener, processId, threadId, SetWinEventHookFlags.WINEVENT_INCONTEXT).ToString());
            Console.WriteLine("done");
            Console.ReadKey(); 
        }
        private static void EventCallback(IntPtr hWinEventHook, int iEvent, IntPtr hWnd, int idObject, int idChild, int dwEventThread, int dwmsEventTime)
        {
   //callback function, called when message is intercepted
            Console.WriteLine(hWnd.ToString());
        }
    }
   }`
```

`据我所知，我使用的是正确的 P/Invoke 声明，但是当我运行此代码时，输​​出为：`

 ````
0
完毕

```

如果成功，它应该返回一个标识此事件挂钩实例的 HWINEVENTHOOK 值。如果不成功，它返回 0。（至少根据微软的网站）线程和进程似乎都是有效的并且正在运行。

谁能帮助我更接近我的问题所在？我认为它一定是小东西，或者我只是使用完全错误的方法来做我想做的事情。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T10:58:59.430

根据[msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373640%28v=vs.85%29.aspx)

> 对于上下文外事件，事件在调用 SetWinEventHook 的同一线程上传递。

我在控制台应用程序中尝试了您的示例，正​​如您提到的，没有收到任何事件。但是在 winform 上，该示例有效并且收到了事件。所以，我认为，这是因为控制台应用程序中的单线程执行。

将 SetWinEventHook 调用放在按钮单击事件中，您应该开始在回调中接收事件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-17T05:53:02.213

重点有点不同：

> 调用 SetWinEventHook 的客户端线程必须有一个消息循环才能接收事件。

( [MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373640%28v=vs.85%29.aspx) )

在控制台应用程序中没有消息循环，在 winform 应用程序中有一个。这就是您在控制台应用程序中没有收到事件的原因。`

# c++ - 如何绘制 QLinearGradient？

> ID：11811108
> 
> 赞同：1
> 
> 时间：2012-08-04T18:36:59.560
> 
> 标签：c++, qt, gradient, qpainter

在“C++ GUI Programming with Qt 4”中简要提到了渐变，并且有一个创建 QLinearGradient 对象的示例代码，但他们没有说明如何在 QPainter 上实际绘制它。

```
QLinearGradient gradient(50, 100, 300, 350);
gradient.setColorAt(0.0, Qt::white);
gradient.setColorAt(0.2, Qt::green);
gradient.setColorAt(1.0, Qt::black); 
```

所以在我用这段代码创建了 QLinearGradient 之后，我如何在 QPainter 上实际绘制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:51:40.810

您使用它来构造 a[`QBrush`](http://qt-project.org/doc/qt-4.8/qbrush.html#QBrush-10)以`QPainter`在小部件的绘制事件中使用 a 。

# c# - 选择不同列表中的两个属性

> ID：11811110
> 
> 赞同：34
> 
> 时间：2012-08-04T18:37:10.973
> 
> 标签：c#, list, distinct, linq-to-objects

我有一个`list<message>`包含类型`Guid`和`DateTime`（以及其他属性）的属性。我想删除该列表中与`Guid`和`DateTime`相同的所有项目（除了一个）。有时这两个属性会与列表中的其他项目相同，但其他属性会有所不同，所以我不能只使用`.Distinct()`

```
List<Message> messages = GetList();
//The list now contains many objects, it is ordered by the DateTime property

messages = from p in messages.Distinct(  what goes here? ); 
```

这就是我现在所拥有的，但似乎应该有更好的方法

```
List<Message> messages = GetList();

for(int i = 0; i < messages.Count() - 1)  //use Messages.Count() -1 because the last one has nothing after it to compare to
{
    if(messages[i].id == messages[i+1}.id && messages[i].date == message[i+1].date)
    {
        messages.RemoveAt(i+1);
    {
    else
    {
         i++
    }
} 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-08-04T18:40:02.513

LINQ to Objects 无法以内置方式轻松提供此功能，但[MoreLINQ](https://github.com/morelinq/MoreLINQ)有一个方便的`DistinctBy`方法：

```
messages = messages.DistinctBy(m => new { m.id, m.date }).ToList(); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-04T20:24:44.930

Jon Skeet's`DistinctBy`绝对是要走的路，但是如果你有兴趣定义自己的扩展方法，你可能会喜欢这个更简洁的版本：

```
public static IEnumerable<TSource> DistinctBy<TSource, TKey>
(this IEnumerable<TSource> source, Func<TSource, TKey> keySelector)
{
    var known = new HashSet<TKey>();
    return source.Where(element => known.Add(keySelector(element)));
} 
```

具有相同的签名：

```
messages = messages.DistinctBy(x => new { x.id, x.date }).ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-10T19:42:20.290

尝试这个，

```
 var messages = (from g1 in messages.GroupBy(s => s.id) from g2 in g1.GroupBy(s => s.date) select g2.First()).ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-15T20:23:36.300

您可以查看我的[PowerfulExtensions](https://www.nuget.org/packages/PowerfulExtensions/)库。目前它还处于非常年轻的阶段，但您已经可以在任意数量的属性上使用 Distinct、Union、Intersect、Except 等方法；

这是你如何使用它：

```
using PowerfulExtensions.Linq;
...
var distinct = myArray.Distinct(x => x.A, x => x.B); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T18:48:36.663

那这个呢？

```
var messages = messages
               .GroupBy(m => m.id)
               .GroupBy(m => m.date)
               .Select(m => m.First()); 
```

# css - 什么是安全和不安全的 CSS 样式（我们会过滤掉什么，我们会允许什么）？

> ID：11811111
> 
> 赞同：1
> 
> 时间：2012-08-04T18:37:26.060
> 
> 标签：css, regex, security, xss, sanitization

我想允许用户在我的网站上提交自定义 css。

我知道样式的某些组合可能不安全，例如`position:absolute`.

然而，如果我们将内容包装在一个带有`position:relative`.

我还听说有一些通过 css 执行脚本的可能性，但我想不起来或想不起来。

所以我的问题是：

*   哪些可以被认为是安全的？
*   什么会进入黑名单？

理想情况下，我将编写我的函数来接受 style="*" 标签的内容，并相应地清理它们。

我也会考虑一些建议，什么方法会更好：

*   从黑名单中匹配并过滤掉不安全的属性，
*   或仅允许绕过白名单中包含的那些（尽管列表可能会变得很大）

如果你的火炮有一些广泛的功能 - 这是吐出它的正确地方！:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T01:15:04.027

您需要定义安全性的含义。如果您的意思是“不要让用户破坏我的布局”，那么我认为您根本不能让用户以 CSS 的方式使用太多。也许字体、颜色和背景可以让用户更改，但除此之外，您就是在自找麻烦。（甚至像边距和填充这样的东西在任何字段中都可以是“有趣”的负值，特别是与 zindex 结合使用时...）作为一般的经验法则，如果它有 HTML 标签（例如`<font>`，`<i>`等），那么这里会没事的。

现在，如果您谈论的是要防止跨站点脚本问题的安全性，那么您需要禁止任何可能执行代码的 css 项目。（例如，如 BoltClock 的评论所示）

如果我是你，虽然我会听从评论者的建议，只是不让人们使用 CSS——如果你希望用户能够对代码进行一些自定义，那么让他们进行这些自定义；但不要让他们输入任意代码。人们总是打破这些过滤器，你不太可能抓住每一个可能的极端情况。

# iphone - 使用仪器进行泄漏搜索

> ID：11811112
> 
> 赞同：0
> 
> 时间：2012-08-04T18:37:43.620
> 
> 标签：iphone, objective-c, xcode, ipad

我是仪器新手，一旦启动我的应用程序并加载带有图像等的视图，我就会发现似乎泄漏的东西。双击该行并没有将我带到导致泄漏的代码，我不确定我为什么或如何找到合适的代码。（这是通过 iPhone 的 iOS 模拟器）。见附图：

![乐器](../Images/6227f27f0200a536f35fac2ff000af36.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:45:46.257

在“查看”选项中选择最右侧的按钮以显示扩展的详细信息窗口。这将显示每个内存分配的堆栈跟踪。然后，您可以双击堆栈跟踪中的行项目，这将打开源代码。

# c++ - 如何从通用块重新设计 Fortran 和 C++ 混合语言库 - 全局结构别名？

> ID：11811114
> 
> 赞同：0
> 
> 时间：2012-08-04T18:38:04.493
> 
> 标签：c++, g++, fortran, gfortran, fortran-common-block

我有一个程序，主要由 Fortran 77 和一个 C++ 包装器组成，该包装器可以读取和写入数据库。应用程序的两个部分通过使用一个功能共享数据，如果您使用一个名为 Fortran 公共块的全局 C/C++ 结构，则该功能可以共享数据。我很确定这种 C++/Fortran 集成的别名方法 1) 适用于许多编译器套件，2) 是 *not8 标准。我尝试维护我的代码，以便它尽可能多地使用标准组件。此外，这种集成已被证明是脆弱的。

在 utd.h 中：

```
/*************************************************************
 *  This struct must follow the common block points.
 *  See the Fortran include file points.i
 *************************************************************/
typedef struct ALIGN points
{
    double  point[3][MAX_PTS];
    double  edge[3][MAX_PTS];
    double  edgenorm[3][MAX_PTS];
    double  edgerho[MAX_PTS];
    int     nfacets[MAX_PTS];
    double  facet1[3][MAX_PTS];
    double  facet2[3][MAX_PTS];
    double  gaussk[MAX_PTS];
    int     sbstin[MAX_PTS];
    int     coatin[MAX_PTS];
    int     sbstout[MAX_PTS];
    int     coatout[MAX_PTS];
    int     ncorners[MAX_PTS];
    double  cnrpoint[3][MAX_CNRS][MAX_PTS];
    int     ncnredgs[MAX_CNRS][MAX_PTS];
    double  cnredge[3][MAX_CNREDS][MAX_CNRS][MAX_PTS];
    int     cnrsbst[MAX_CNREDS][MAX_CNRS][MAX_PTS];
    int     cnrcoat[MAX_CNREDS][MAX_CNRS][MAX_PTS];
    int     npoints;
} POINTS;

extern POINTS  points_; 
```

在 utd.cpp 中：

```
POINTS  points_; 
```

在points.i中：

```
 !  maxpnt  -  maximum number of points in a path.
  integer  maxpnt
  parameter ( maxpnt = 1000 )

  integer npoints, nfacets(maxpnt)
  integer ncorners(maxpnt), ncnredgs(maxpnt,maxcorners)
  integer sbstin(maxpnt), coatin(maxpnt)
  integer sbstout(maxpnt), coatout(maxpnt)
  double precision point(maxpnt,3)
  double precision edge(maxpnt,3), edgenorm(maxpnt,3)
  double precision edgerho(maxpnt)
  double precision facet1(maxpnt,3), facet2(maxpnt,3)
  double precision gaussk(maxpnt), cnrpoint(maxpnt,maxcorners,3)
  double precision cnredge(maxpnt,maxcorners,maxcnredges,3)
  integer cnrsbst(maxpnt,maxcorners,maxcnredges)
  integer cnrcoat(maxpnt,maxcorners,maxcnredges)

  common /points/ point, edge, edgenorm, edgerho,
 *                nfacets, facet1, facet2, gaussk,
 *                sbstin, coatin, sbstout, coatout,
 *                ncorners, cnrpoint, ncnredgs,
 *                cnredge, cnrsbst, cnrcoat,
 *                npoints 
```

有没有更好的办法？我可能想将公共块转换为模块。然后，我确信用全局结构为公共块起别名的业务已经不存在了。您如何从 C++ 构建 Fortran 模块？你如何从这样的模块中读取数据？

您对 C++/Fortran 集成有何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T19:25:00.320

The ISO C Binding of Fortran 2003 makes interoperability of C and Fortran part of the Fortran language standard, and therefore compiler and platform portable. If you only use features of C, most likely it will work in C++, though perhaps that is not absolutely guaranteed. You can mix Fortran 2003 and FORTRAN 77, either within a source file or by mixing routines written in the two versions of the languages. The ISO C Binding supports structures and module variables as global variables, so it can accomplish your goals. Both of these are shown in the Mixed Language Programming Chapter of the gfortran manual. (The ISO C Binding is not specific to gfortran, I'm citing that as a good document.)

Common blocks are also supported, but I agree with you, best avoided ... common blocks add on FORTRAN storage sequence and layout, which is unnecessary. I don't see any way around manually maintaining the C and Fortran "structures" to have equivalent declarations. If that is the reason for the brittleness you will just have to be careful (baring writing a program to write both from common instructions). One approach that would make it a little easier would be not to put the variables into a structure ... then getting a new variable wrong is less likely to effect the older variables and that might make noticing or debugging a mistake easier.

# jquery - divs 总是需要调整 margin-top 属性

> ID：11811116
> 
> 赞同：0
> 
> 时间：2012-08-04T18:38:18.747
> 
> 标签：jquery, css, html

我有一个 div 容器，其中包含 3 个 div，细分为 ff：左列、右列和页脚，

所以基本上事情应该是这样的；

```
-------------------------------
'       '                     '
'       '                     '
'       '                     '
'       '                     '
'       '                     '
'       '                     '
'       '                     '
'       '                     '
'       '                     '
-------------------------------
'                             '
'                             '
------------------------------- 
```

左右列动态填充来自数据库的信息；这意味着每个 div 的（左/右）可以占据页面的小区域或大区域；

但在我的情况下，我有一个意想不到的行为，右 div 似乎几乎从左 div 下方开始，如；

```
---------
'       '                     
'       '                     
'       '                     
'       -----------------------                     '
'       '                     '
--------'                     '
        '                     '
        '                     '
        '                     '
        '                     '
        ----------------------- 
```

所以这意味着当我希望右 div 像左 div 的顶部时，我必须一直重新调整，但这不是我想要做的，我希望左右 div 的顶部始终相同...下面是我两者的来源，有人可以帮助使用 jsfiddle 快速查看确切结果吗？

```
div#divLeft
{
background-color: green;
/*height: 100%;*/
width: 25%;
float: left;
}

div#divRight
{
background-color: red;
width: 73%;
position: relative;
margin-top: -52px;
margin-left: 25%;
float: left;
} 
```

这是一个jsfiddle的事情；[http://jsfiddle.net/Rqyz7/](http://jsfiddle.net/Rqyz7/) -> 希望它有效，我想我现在的网络有些问题...... TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:45:51.637

给`div`列样式属性`display:inline-block;`和`vertical-align:top;`，并删除任何`float`和`margin`属性。这将同时显示内联，同时允许您将垂直对齐定义为顶部。

[此处](http://jsfiddle.net/uWXTd/1/)为JSFiddle 示例[，此处](http://jsfiddle.net/uWXTd/)为更大列的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:51:17.407

更新小提琴：http: [//jsfiddle.net/nupul/Rqyz7/7/](http://jsfiddle.net/nupul/Rqyz7/7/)

基本上，当您向右侧 div 添加边距时，您将其宽度增加“总共超过 75%”，即`width:73%`-`margin-left:25%`这使得 div 的宽度大于允许的 75%（因为 divLeft 为 25%）。要么固定边距，要么降低边距，或者更精确地使用数字。

第二：页脚需要清除它的浮动，以便在右 div“之后”但在左右 div 的底部流动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T18:55:18.113

基本上，第二列试图在第一列之间放置一些边距，并且不适合进入新行。有两种方法，问题是你两者都做。你要么：

*   给两个 columns`float: left`和 container `overflow: auto`，让容器增长到两者中最高的，从而防止页脚与它们重叠。
*   给第一个`float: left`，第二个一个`margin-left`。这样，无论第一列的高度如何，页脚都会出现在第二列之后。当第一列从不高于第二列时使用此选项。

您可以从第二个 div 中删除左边距或浮动，具体取决于您希望列的增长行为。

# dataset - A semantic related dataset

> ID：11811117
> 
> 赞同：0
> 
> 时间：2012-08-04T18:38:22.040
> 
> 标签：dataset, semantic-web

I need some sort of dataset which has related items in it. For example, a `flower` has related subtypes: `roses`, `violets`, etc. Each of those subtypes has their own subtype. This could be a graph of related items which is used in semantic search engines, etc.

Is there anywhere that has such dataset (preferably with images)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:32:08.170

Wordnet would be a good start. You can get if from [here](http://wordnet.princeton.edu/wordnet/) for free.

Conceptnet is another great ontology. It has a lower quality, but a much larger number of concepts. Here's the Conceptnet page for [flower](http://conceptnet5.media.mit.edu/web/c/en/flower)

The third source I'd recommend checking out is wikipedia cross-article links.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T12:08:34.587

Expanding on Wikipedia mentioned above by Sagie, [**DBPedia**](http://dbpedia.org/About) is a project that has extracted the structured data from Wikipedia into data sets. They mentioned that their datasets have 3.77 million 'things' and 400 million facts. There's also localised information in different languages:

> The full DBpedia data set features labels and abstracts for 10.3 million unique things in up to 111 different languages; 8.0 million links to images and 24.4 million HTML links to external web pages; 27.2 million data links into external RDF data sets, 55.8 million links to Wikipedia categories, and 8.2 million YAGO categories. The dataset consists of 1.89 billion pieces of information (RDF triples) out of which 400 million were extracted from the English edition of Wikipedia, 1.46 billion were extracted from other language editions, and about 27 million are data links to external RDF data sets.

Their dataset is queriable via SPARQL. [An example they give](http://dbpedia.org/snorql/?query=SELECT%20?subject%20?population%20WHERE%20%7B%0D%0A?subject%20rdf%3atype%20%3Chttp://dbpedia.org/ontology/City%3E.%0D%0A?subject%20%3Chttp://dbpedia.org/ontology/populationUrban%3E%20?population.%0D%0AFILTER%20%28xsd%3ainteger%28?population%29%20%3E%202000000%29%0D%0A%7D%0D%0AORDER%20BY%20DESC%28xsd%3ainteger%28?population%29%29%0D%0ALIMIT%2020) is for the top 20 cities with over 2 million population:

```
SELECT ?subject ?population WHERE {
?subject rdf:type <http://dbpedia.org/ontology/City>.
?subject <http://dbpedia.org/ontology/populationUrban> ?population.
FILTER (xsd:integer(?population) > 2000000)
}
ORDER BY DESC(xsd:integer(?population))
LIMIT 20 
```

# c# - 托管的像素数组比使用指针更快？

> ID：11811118
> 
> 赞同：0
> 
> 时间：2012-08-04T18:38:30.800
> 
> 标签：c#

我最近在探索处理像素级图像的各种方法时看到了这篇文章。

[http://www.codeproject.com/Articles/16403/Fast-Pointerless-Image-Processing-in-NET](http://www.codeproject.com/Articles/16403/Fast-Pointerless-Image-Processing-in-NET)

作者提到

> 使用托管数组而不是指针的性能成本是多少？使用托管数组不会比使用指针慢吗？这可能会让您感到惊讶，但根据我的测试，答案是否定的。在我的测试中，发现数组方法比指针方法至少快 10%。

我第一次尝试在像素级别处理图像是使用`GetPixel`/`SetPixel`方法，这非常慢。然后我被引导到[这个链接](http://davidthomasbernal.com/blog/2008/03/13/c-image-processing-performance-unsafe-vs-safe-code-part-i/)，它的速度要快得多。

我没有尝试过文章中描述的方法，但有人可以支持吗？或者也许它只是在某些条件下更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T18:47:06.500

这在很大程度上取决于您如何访问数组。

如果您在循环中使用数组的长度，编译器会识别这一点并知道它不必检查索引的边界，因为循环本身使索引不可能超出边界。这种访问数组的方式在性能上将接近于使用指针。

如果您使用任意索引访问数组，编译器必须添加检查索引边界的代码，这将为每次访问添加一些指令。这种访问数组的方式比使用指针要慢。

它还取决于使用指针的代码的效率。最后，即使您使用索引来访问数组，指针也始终用于访问数组数据，因此始终可以编写至少与通过索引访问数组的代码一样高效的指针代码。

此外，这取决于您正在进行多少处理。使用编组将数据从图像移入和移入图像意味着您已经将所有数据移动了两次。如果您只做很少的处理，那将永远不会像访问数据那样快。

* * *

注意：文章中用于编组数据的方法仅在`Stride`值为正时才有效。如果图像在内存中倒置存储（位图文件常见），则`Stride`值为负数，计算出来的数据大小为负数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T19:01:04.607

10% 的性能差异没有统计学意义。由于添加了越界检查，托管代码中的数组访问往往会变慢。这可以通过抖动优化掉，但是对于您作为一维数组访问的二维结构来说，这并不容易。指针是不安全的，主要是因为它们在没有这种检查的情况下使用。

但是，当您开始处理大量 RAM 时，代码速度变得毫无意义，例如存储非平凡大小的位图所需的数量。这种代码的性能受到内存总线带宽的限制。这比处理器可以使用数据的速率慢*很多倍。*现在开始变得重要的一件事是，您以一种优化 L1 处理器缓存使用的方式访问数据。这是您访问位图像素的自然方式，您希望它们按列 (X) 顺序，而不是行顺序。换句话说，X 变量需要是内循环，Y 需要是外循环。

很可能，您已经在尽可能快地进行，特别是如果您复制了带有此类声明的代码。证明它的唯一方法是实际编写使用指针的代码，这需要 C#，并进行比较。

# objective-c - 登录时启动 Cocoa 应用程序崩溃

> ID：11811119
> 
> 赞同：2
> 
> 时间：2012-08-04T18:38:46.580
> 
> 标签：objective-c, cocoa

我在我的应用程序 (SymSteam) 中发现了一个错误，我很难修复它。似乎每当我的应用程序作为登录项启动时，它都会成功启动，但几秒钟后就会崩溃。如果应用程序是由用户启动的（即通过 Finder），它会正常运行并且不会崩溃。

登录后立即检查控制台，我看到以下内容：

```
04/08/2012 18:51:47.437 SymSteam[187]: SteamApps exists & SteamAppsSymb exists, suggesting everything is A-OK.
04/08/2012 18:51:47.451 SymSteam[187]: Succesfully started observing everything I need to
04/08/2012 18:51:52.623 com.apple.launchd.peruser.501[124]: ([0x0-0x16016].com.simplecode.SymSteam[187]) Job appears to have crashed: Segmentation fault: 11 
```

前两行表明我的应用程序启动良好并且能够从 NSWorkspace 的通知中心注册它需要的通知。我无法弄清楚是什么导致了分段错误。

还有一个崩溃报告。这是它的摘录：

```
OS Version:      Mac OS X 10.8 (12A269)
Report Version:  10

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: EXC_I386_GPFLT

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libobjc.A.dylib                 0x00007fff80902278 _cache_getImp + 4
1   libobjc.A.dylib                 0x00007fff80903f51 lookUpMethod + 41
2   libobjc.A.dylib                 0x00007fff80905d5e class_respondsToSelector + 31
3   com.apple.CoreFoundation        0x00007fff82adb7ab objectIsKindOfClass + 43
4   com.apple.CoreFoundation        0x00007fff82adb812 __exceptionMatch + 18
5   libobjc.A.dylib                 0x00007fff8090d1d4 _objc_exception_do_catch(objc_typeinfo*, objc_typeinfo*, void**, unsigned int) + 144
6   libc++abi.dylib                 0x00007fff81621807 get_adjusted_ptr(std::type_info const*, std::type_info const*, void**) + 71
7   libc++abi.dylib                 0x00007fff81621439 __gxx_personality_v0 + 889
8   libunwind.dylib                 0x00007fff8b678c22 _Unwind_RaiseException + 158
9   libc++abi.dylib                 0x00007fff81621baa __cxa_rethrow + 72
10  libobjc.A.dylib                 0x00007fff8090d5f5 objc_exception_rethrow + 40
11  com.apple.CoreFoundation        0x00007fff82a7ce36 CFRunLoopRunSpecific + 390
12  com.apple.HIToolbox             0x00007fff8c855774 RunCurrentEventLoopInMode + 209
13  com.apple.HIToolbox             0x00007fff8c855512 ReceiveNextEventCommon + 356
14  com.apple.HIToolbox             0x00007fff8c8553a3 BlockUntilNextEventMatchingListInMode + 62
15  com.apple.AppKit                0x00007fff87afefa3 _DPSNextEvent + 685
16  com.apple.AppKit                0x00007fff87afe862 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
17  com.apple.AppKit                0x00007fff87af5c03 -[NSApplication run] + 517
18  com.apple.AppKit                0x00007fff87a9a656 NSApplicationMain + 869
19  com.simplecode.SymSteam         0x0000000108df4d54 start + 52

Thread 1:
0   libsystem_kernel.dylib          0x00007fff82dad6d6 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff84c27f2c _pthread_workq_return + 25
2   libsystem_c.dylib               0x00007fff84c27cf3 _pthread_wqthread + 412
3   libsystem_c.dylib               0x00007fff84c121b1 start_wqthread + 13

Thread 2:: Dispatch queue: com.apple.libdispatch-manager
0   libsystem_kernel.dylib          0x00007fff82dadd16 kevent + 10
1   libdispatch.dylib               0x00007fff81bafe26 _dispatch_mgr_invoke + 883
2   libdispatch.dylib               0x00007fff81bafa2a _dispatch_mgr_thread + 54

Thread 3:
0   libsystem_kernel.dylib          0x00007fff82dad6d6 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff84c27f2c _pthread_workq_return + 25
2   libsystem_c.dylib               0x00007fff84c27cf3 _pthread_wqthread + 412
3   libsystem_c.dylib               0x00007fff84c121b1 start_wqthread + 13

Thread 4:
0   libsystem_kernel.dylib          0x00007fff82dad6d6 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff84c27f2c _pthread_workq_return + 25
2   libsystem_c.dylib               0x00007fff84c27cf3 _pthread_wqthread + 412
3   libsystem_c.dylib               0x00007fff84c121b1 start_wqthread + 13

Thread 0 crashed with X86 Thread State (64-bit):
  rax: 0x1000000000000000  rbx: 0x00007fff70bf5810  rcx: 0x0000000000000001  rdx: 0x0000000000000000
  rdi: 0x1000000000000000  rsi: 0x00007fff88323f93  rbp: 0x00007fff56e0b910  rsp: 0x00007fff56e0b8d0
   r8: 0x0000000000000000   r9: 0x0000000000000000  r10: 0x00000000510558d1  r11: 0x1000000000000000
  r12: 0x0000000000000000  r13: 0x0000000000000000  r14: 0x1000000000000000  r15: 0x00007fff88323f93
  rip: 0x00007fff80902278  rfl: 0x0000000000010202  cr2: 0x00007fff88424000
Logical CPU: 0 
```

我对导致问题的原因感到困惑，因为应用程序在登录时未启动时不会崩溃，即使在登录时启动时，它也会启动但几秒钟后崩溃。我不知道如何调试此错误，因为我无法设置断点或在程序上使用 Instruments，因为该错误仅在登录时发生。

非常感谢任何有关如何进行调试的建议！

值得一提的是，我的应用程序是一个后台应用程序（因此它没有停靠图标或主窗口），它使用[Growl](http://growl.info) & [Sparkle](http://sparkle.andymatuschak.org)框架，并在启动时注册来自 NSWorkspace 的通知。

**更新：**

这是我的应用程序启动时执行的代码（`applicationDidFinishLaunching:`方法中一些不相关的代码已被省略）。正如我上面所说，这一切都在崩溃之前执行。

applicationDidFinishLaunching 方法：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification{
    [self.appController performInitialDriveScan];
    [self.appController startWatchingDrives];
} 
```

`performInitialDriveScan:`只需使用 NSFileManager 几次来查看某些目录是否存在。我不会在这里发布它，因为它很长。我*非常*有信心这不是崩溃的根源。

`startWatchingDrives`：

```
- (void)startWatchingDrives{
    [[[NSWorkspace sharedWorkspace] notificationCenter] addObserver:self.saController selector:@selector(didMountDrive:) name:NSWorkspaceDidMountNotification object:nil];
    [[[NSWorkspace sharedWorkspace] notificationCenter] addObserver:self.saController selector:@selector(didUnMountDrive:) name:NSWorkspaceDidUnmountNotification object:nil];
    NSLog(@"Succesfully started observing everything I need to");
} 
```

这只是向 NSWorkspace 的通知中心添加了一个观察者，用于监视正在安装/卸载的驱动器。

这就是在应用程序启动期间执行的所有内容。崩溃发生在`startWatchingDrives`调用该方法之后，并且如上所述，仅在登录时启动应用程序时发生。当我的应用程序实际上没有做任何事情时，就会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:47:21.623

我做了更多的调试并设法解决了我自己的问题。崩溃的总体原因非常无趣，但它是：

当用户登录并注册从 NSWorkspace 安装/卸载驱动器的通知时，该应用程序正常启动。几乎在注册通知后，它会在登录期间收到两个关于挂载 /home 和 /net 的通知。选择`didMountDrive:`器由通知执行，在`didMountDrive:`方法中，我试图获取刚刚安装的驱动器的 URL 的第三个路径组件（因为，如果它是正在安装的外部驱动器，这将是驱动器的名称） . 这就是程序崩溃的地方，因为 /home 和 /net URL 只有两个路径组件，所以我试图访问 URL 的 pathComponents 数组边界之外的索引。

The fix was simply to check that there's at least 3 path components in the URL for the drive that was just mounted.

# android - 整个应用程序中的一个 LocationListener

> ID：11811120
> 
> 赞同：2
> 
> 时间：2012-08-04T18:38:54.553
> 
> 标签：android, gps, location, locationmanager, locationlistener

我需要在整个应用程序中实现一个 LocationListener。

我知道我可以将服务与 LocationListener 一起使用，但问题是我必须在位置更改时使用一些通知程序。当我能够随时获得最后一个位置时，这还不够，因为当它发生变化时，我需要立即在所有活动中的当前位置。

所以在伪代码中我需要这样的东西：

`myLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, new LocationListener() {`

```
public void onLocationChanged(Location location) {
                notifyAllActivities(location);
            }
```

`};`

在每个活动中：

`void onNotify(Location location) { //... }`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T20:18:51.903

您是否尝试过使用[CommonsWare 的 LocationPoller 库](https://github.com/commonsguy/cwac-locpoll)？

众所周知，它非常强大，我个人在我的一个基于位置的应用程序中使用了它。

它的好处之一是它与 using 的兼容性`Service`；即使应用程序在后台，这也是您获取位置更新所需要的。它获取`WakeLock`唤醒电话，获取位置，然后优雅地释放它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T20:10:47.783

使服务调用 sendBroadcast() 以广播 Intent。将经度/纬度作为附加信息添加到该 Intent 中。在需要位置的每个活动中，为意图注册一个广播接收器，并从接收器的 onReceive() 中的意图的附加内容中获取 lng/lat

# php - 根据连续的最高数字对分数进行排名

> ID：11811123
> 
> 赞同：2
> 
> 时间：2012-08-04T18:39:20.687
> 
> 标签：php, mysql, function, rank

我有一个名为“member_points”的表，它的设置如下：

```
|----|-------|----------|------------------------|
| id |  uid  |  points  |  last_loggedin         |
|----|-------|----------|------------------------|
| 1  |  1    |  5075    |  2012-08-02 02:04:00   |
|----|-------|----------|------------------------|
| 2  |  2    |  2026    |  2012-08-04 02:15:02   |
|----|-------|----------|------------------------| 
```

我在下面有一个功能。我希望函数根据“点”行中的数字回显或返回“排名#1”或“排名#2”等排名。

```
function getTopRanks($id) {  
   $sql = "SELECT MAX(points) AS toppoints FROM member_points";
   $r = mysql_query($sql);
   if ( $r !== false && mysql_num_rows($r) > 0 ) {
      while ( $a = mysql_fetch_assoc($r) ) {
          $points = stripslashes($a['toppoints']);
          return ''.$points.'';  
      }
   }
} 
```

有人可以帮我实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T18:46:44.170

在您的 mysql 查询中使用 ORDER BY (http://dev.mysql.com/doc/refman/5.0/en/sorting-rows.html)

所以你的查询会变成

```
SELECT points FROM member_points ORDER BY points DESC 
```

这将按点数对查询结果进行排序。（DESC 将使它们降序，而 ASC 将使结果升序）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T18:52:55.540

我认为您将根据**积分**对用户进行排名。对于此类问题，我建议您在**DESC**订单上对*用户进行排名第一。*然后从行中提取欲望值。

 **```
function getTopRanks($id) {

   $sql = "SELECT uid FROM member_points ORDER BY points DESC ";
   $r = mysql_query($sql);
   if ( $r !== false && mysql_num_rows($r) > 0 ) {
      while ( $a = mysql_fetch_assoc($r) ) {
         $points = stripslashes($a['toppoints']);

           return ''.$points.'';

     }
   }

 } 
```

这将解决您的问题。:)

**根据您的要求更新：**

```
function getTopRanksUser($id) {
$userPos ="Ranked position is:";
  $count = 0;
  $sql = "SELECT uid FROM member_points ORDER BY points DESC ";
  $r = mysql_query($sql);
  if ( $r !== false && mysql_num_rows($r) > 0 ) {
    while ( $a = mysql_fetch_assoc($r) ) {
       $count = $count+1;
       $userPosCount = $userPos+$count;

       return $userPosCount;

  }
 }

} 
```

应该有返回 userPos+count。因为计数增加了表中的行数，并且字符串*排名位置*始终保持不变。这将给出结果。您可以根据您的要求更改返回字符串。：） 谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T18:48:35.363

这是我用于排名的内容......此代码还考虑了关系并正确显示。只需将“用户名”和“点”更改为数据库中适当的列名，然后设置数据库连接变量：$hostName $databaseNanme $username 和 $password 即可。

希望这可以帮助！

```
 $sql1 = "SET @rnk=0; SET @rank=0; SET @scount=0;";
    $sql2 = "SELECT username, points, rank FROM
    (
        SELECT AA.*,BB.username, points
        (@rnk:=@rnk+1) rnk,
        (@rank:=IF(@scount=points,@rank,@rnk)) rank,
        (@scount:=points) newscount
        FROM
        (
            SELECT * FROM
            (SELECT COUNT(1) scorecount,points
            FROM users GROUP BY points
        ) AAA
        ORDER BY points DESC
    ) AA LEFT JOIN users BB USING (points)) A;";

try {
    $conn = new PDO('mysql:host='.$hostName.';dbname='.$databaseName, $username, $password);
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $conn->query($sql1);
    $data = $conn->query($sql2);

    $standings = $data->fetchAll(PDO::FETCH_ASSOC);
} catch(PDOException $e) {
    error_log( 'ERROR: ' . $e->getMessage() );
} 
```

print_r($排名);**

# android - Android phonegap 项目垃圾邮件 QTAGUID 消息

> ID：11811127
> 
> 赞同：16
> 
> 时间：2012-08-04T18:39:31.327
> 
> 标签：android, jquery-mobile, cordova, phonegap-plugins

这个问题我已经有一段时间了，虽然它不会对我的应用程序产生负面影响，但如果可以的话，我想修复它。我不确定如何描述这个问题。

基本上，我有一个**Android PhoneGap 1.9 项目**，使用 API 15（这也发生在**API 10**下），并且 LogCat 日志有来自**QTAGUID**的无情垃圾邮件，特别是来自我的应用程序。

```
08-04 14:31:30.092: I/qtaguid(15542): Failed write_ctrl(u 118) res=-1 errno=22
08-04 14:31:30.092: I/qtaguid(15542): Untagging socket 118 failed errno=-22
08-04 14:31:30.092: I/qtaguid(15542): Failed write_ctrl(u 123) res=-1 errno=22
08-04 14:31:30.092: I/qtaguid(15542): Untagging socket 123 failed errno=-22
08-04 14:31:36.338: I/qtaguid(15542): Failed write_ctrl(u 116) res=-1 errno=22
08-04 14:31:36.338: I/qtaguid(15542): Untagging socket 116 failed errno=-22
08-04 14:31:36.368: I/qtaguid(15542): Failed write_ctrl(t 116 43082816946176 1074812240) res=-1 errno=1
08-04 14:31:36.368: I/qtaguid(15542): Tagging socket 116 with tag 272f00000000(10031) for uid 1074812240 failed errno=-1
08-04 14:31:36.368: I/qtaguid(15542): Failed write_ctrl(t 118 43082816946176 1074812240) res=-1 errno=1
08-04 14:31:36.368: I/qtaguid(15542): Tagging socket 118 with tag 272f00000000(10031) for uid 1074812240 failed errno=-1
08-04 14:31:36.378: I/qtaguid(15542): Failed write_ctrl(t 123 43082816946176 1074812240) res=-1 errno=1
08-04 14:31:36.378: I/qtaguid(15542): Tagging socket 123 with tag 272f00000000(10031) for uid 1074812240 failed errno=-1
08-04 14:31:46.388: I/qtaguid(15542): Failed write_ctrl(u 116) res=-1 errno=22
08-04 14:31:46.388: I/qtaguid(15542): Untagging socket 116 failed errno=-22
08-04 14:31:46.388: I/qtaguid(15542): Failed write_ctrl(u 118) res=-1 errno=22
08-04 14:31:46.388: I/qtaguid(15542): Untagging socket 118 failed errno=-22
08-04 14:31:46.388: I/qtaguid(15542): Failed write_ctrl(u 123) res=-1 errno=22
08-04 14:31:46.388: I/qtaguid(15542): Untagging socket 123 failed errno=-22
08-04 14:31:46.438: I/qtaguid(15542): Failed write_ctrl(t 116 43082816946176 825047349) res=-1 errno=1
08-04 14:31:46.438: I/qtaguid(15542): Tagging socket 116 with tag 272f00000000(10031) for uid 825047349 failed errno=-1
08-04 14:31:46.448: I/qtaguid(15542): Failed write_ctrl(t 118 43082816946176 825047349) res=-1 errno=1
08-04 14:31:46.448: I/qtaguid(15542): Tagging socket 118 with tag 272f00000000(10031) for uid 825047349 failed errno=-1
08-04 14:31:46.448: I/qtaguid(15542): Failed write_ctrl(t 123 43082816946176 825047349) res=-1 errno=1
08-04 14:31:46.448: I/qtaguid(15542): Tagging socket 123 with tag 272f00000000(10031) for uid 825047349 failed errno=-1
08-04 14:31:56.458: I/qtaguid(15542): Failed write_ctrl(u 116) res=-1 errno=22
08-04 14:31:56.458: I/qtaguid(15542): Untagging socket 116 failed errno=-22
08-04 14:31:56.458: I/qtaguid(15542): Failed write_ctrl(u 118) res=-1 errno=22
08-04 14:31:56.458: I/qtaguid(15542): Untagging socket 118 failed errno=-22
08-04 14:31:56.458: I/qtaguid(15542): Failed write_ctrl(u 123) res=-1 errno=22
08-04 14:31:56.458: I/qtaguid(15542): Untagging socket 123 failed errno=-22
08-04 14:31:56.508: I/qtaguid(15542): Failed write_ctrl(t 116 43082816946176 771781733) res=-1 errno=1
08-04 14:31:56.508: I/qtaguid(15542): Tagging socket 116 with tag 272f00000000(10031) for uid 771781733 failed errno=-1
08-04 14:31:56.508: I/qtaguid(15542): Failed write_ctrl(t 118 43082816946176 771781733) res=-1 errno=1
08-04 14:31:56.508: I/qtaguid(15542): Tagging socket 118 with tag 272f00000000(10031) for uid 771781733 failed errno=-1
08-04 14:31:56.518: I/qtaguid(15542): Failed write_ctrl(t 123 43082816946176 771781733) res=-1 errno=1
08-04 14:31:56.518: I/qtaguid(15542): Tagging socket 123 with tag 272f00000000(10031) for uid 771781733 failed errno=-1 
```

这发生在我从事的两个项目中。较旧的版本是为了让我对 PhoneGap 的开发感兴趣。那个项目非常简单，没有任何先进之处。基本上它所要做的就是发布到网站，并处理响应。它纯粹是在 javascript 端开发的。它会发送相同的 QTAGUID 消息。

这些项目都是`jquery 1.7 / jquerymobile 1.1.1`和科尔多瓦。（旧项目是**cordova 1.6**，新项目是1.9）

我已经对此进行了一段时间的研究，但没有找到任何相关信息。任何见解将不胜感激！谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-23T08:03:14.700

这是一个 WiFi 问题，启用“避免连接不良”（设置、无线、WiFi、高级菜单）有时会有所帮助。我只使用 WiFi 网络时遇到了同样的问题。您也可以尝试此应用程序[WiFi Connection Fixer](https://play.google.com/store/apps/details?id=co.in.zextr.wcf)，但据我所知，您在代码中无能为力。

# perl - Mojolicious 模板的测试覆盖率

> ID：11811134
> 
> 赞同：5
> 
> 时间：2012-08-04T18:40:53.473
> 
> 标签：perl, code-coverage, mojolicious

在编写[伽利略](http://p3rl.org/Galileo)的过程中，我在模板 ( ) 中加入了一些逻辑`.html.ep`，没什么，只是一些。为此，我想知道是否可以将这些文件包含在测试覆盖率分析中。

我尝试了一些东西，最有希望的是

```
HARNESS_PERL_SWITCHES='-MDevel::Cover=+select,\.ep$' prove -l t && cover 
```

但这些文件仍未包括在内。也许这是不可能的，但也许有人有一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:53:34.640

Devel::Cover 使用 perl 本身使用的文件和行信息，因此为了覆盖模板，模板编译过程需要正确设置文件和行信息。我快速浏览了 Mojo 的源代码并没有看到这种情况，但我可能找错了地方。

我对 Mojolicious 了解不多，但我看到 .ep 模板中的语法错误得到正确报告，这是一个好兆头。如果该信息来自 perl 通常的错误报告，那么 Devel::Cover 也应该能够提供覆盖信息，但我也没有得到任何信息。

如果您想在 github 上开票，我会在有时间时提醒您进一步研究。

# windows-8 - 使用 mvvmlight 在 Windows 8 中进行状态处理

> ID：11811138
> 
> 赞同：2
> 
> 时间：2012-08-04T18:41:30.923
> 
> 标签：windows-8, mvvm-light, windows-runtime

使用 mvvmlight 在 Windows 8 中实现状态处理 在 mvvmligt 中是否有任何方法可以管理 WinRT 中的状态？如何使用 WinRT 复制默认 Suspensionmanager 的功能？第二个是关于管理导航周期，即如果我从页面 A - > B 导航，然后进入挂起和关闭状态。当我重新启动需要打开页面 B 的应用程序并按下返回键时，我需要加载 A。如何在我的 WinRT 应用程序中使用 MVVM 灯有效地实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:17:48.220

这些并不是真正的 MVVM Light 功能。你需要自己做这些。

一种选择是创建您自己的导航服务（参见[此处](http://dotnetbyexample.blogspot.co.uk/2012/06/navigationservice-for-winrt.html)的示例）。导航服务可以使用暂停管理器来为应用程序构建/管理面包屑路径。如果您添加了其他方法：

```
public void GoToMostRecentPage()
{//blah} 
```

您可以在应用程序启动时调用此方法并将用户带到相应的页面。

我会坚持使用 SuspensionManager。如果你想让它对 MVVM 更友好，你可以将它包装在一个服务中，根据需要注入到你的视图模型中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:18:10.040

您可能对可以从 NuGet 或我上面链接到的 CodePlex 站点获得的开源[Okra App Framework感兴趣。](http://okra.codeplex.com)它是从头开始设计的，可以很好地与 Windows 8 和 MVVM 模式配合使用（您仍然可以使用 MVVM Light 基类）。

它有一个导航管理器，可以自动处理你上面提到的所有事情——管理应用程序的导航堆栈、应用程序暂停/终止时堆栈的持久性，甚至允许视图模型通过一个简单的接口来保持它们自己的状态（比如 SuspensionManager 如何为页面工作） ）。

（免责声明：我是该项目的首席开发人员）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-31T14:35:29.213

我最初是为 WP7 编写的，并且一直在为 Win8 RT 进行更新。它允许您将属性附加到要保留在视图模型中的属性，然后 PersistenceManager 在应用程序暂停时将它们脱水（序列化到文件），并在应用程序恢复时重新水化。

有 WP7 和 Win8 的示例，基本 MVVM 模式和 MVVM Light

[方尖碑](http://obelisk.codeplex.com/)

# javascript - ColdFusion：修改 cfgrid 中的组合框选项

> ID：11811139
> 
> 赞同：1
> 
> 时间：2012-08-04T18:41:45.773
> 
> 标签：javascript, html, dom, extjs, coldfusion

我有`<cfgrid>`一个`<cfgridcolumn>`。我正在使用该`values`列的属性：

```
<cfform>
  <cfgrid name="grdBrokers"
          format="html"
          bind    ="cfc:CFC.Brokers.getGridData ( {cfgridpage},{cfgridpagesize},{cfgridsortcolumn},{cfgridsortdirection})" 
          onChange="cfc:CFC.Brokers.editGridData( {cfgridaction},{cfgridrow},{cfgridchanged})"
          selectMode = "edit">
    <cfgridcolumn name="name" header="Name" values="Item1,Item2" >
  </cfgrid>
</cfform> 
```

当用户编辑列中的单元格时，该`values`属性会导致出现一个组合框`Name`： ![由 Values 属性产生的单元格内组合框](../Images/2d92acc104b96db148ecf14b8b3057e2.png)

我需要动态（不重新加载页面）更改该组合框的选项列表。经过大量研究（stackoverflow.com、[raymondcamden.com](http://www.raymondcamden.com)等），我得出结论，没有 ColdFusion 方法可以做到这一点，所以我想我会使用 JavaScript。为了找到`id`组合框，我查看了我的页面的 HTML 源代码，发现以下内容：

```
<form name="CFForm_1" id="CFForm_1" action="/index2.cfm" method="post" onsubmit="return _CF_checkCFForm_1(this)">
  <div  id="cfgrid1344103796431" style="border: 1px solid #cccccc; overflow: hidden;"></div> 
    <select id='cf_grid_select0' class='ygrid-editor'>
      <option value='Item1'>Item1</option>
      <option value='Item2'>Item2</option>
    </select> 
  <div>
  <input type="hidden" name="__CFGRID__CFForm_1__grdBrokers" value="" /></div>
</form> 
```

所以，我想要的 id 是`cf_grid_select0`. 但是，此元素未被`document.getElementById()`. 我还使用 FireBug 检查了该页面，但在 DOM 选项卡上找不到该`cf_grid_select0`元素。它`document.body.innerHTML`作为原始 HTML 文本包含在其中，但在 DOM 中不作为它自己的元素。

这是我尝试查找的代码`cf_grid_select0`：

```
<script type="text/javascript">
  function find( ) {
    var cbxFind = document.getElementById( 'cf_grid_select0' );

    if ( cbxFind ) alert( "Found!" );
    else           alert( "Not found!" );
  }  
</script>

<form>
  <input id="btnFind" type="button" onclick="find();" value="Find">
</form> 
```

当我单击该`Find`按钮时，我会弹出一个提示“未找到！”。

我的问题是：使用 JavaScript 或 jQuery，我怎样才能找到`<select>`我的浏览器显然知道但似乎不在*DOM*中的一个？我怀疑`ColdFusion.getGridObject()`可能是我正在寻找的东西，但我也找不到使用该方法选择组合框的方法。

谢谢！

**更新：** ColdFusion 似乎在页面加载后使用 ExtJS 将 转换`<select>`为 a `ComboBox`，显然`<select>`从 DOM 中删除了 。我现在正在研究如何定位 ExtJS `ComboBox`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:38:15.773

我几乎肯定会使用 jQuery！尝试这个：

```
<script>
$(document).ready(function() {

var $mySelect = $("#cf_grid_select0");
alert("I found it..." + $mySelect.attr("id"))

});
</script> 
```

祝你好运。

**忍者编辑**

如果您正在查看真正的源代码，那么它就在 DOM 中。如果您正在查看“生成”的 JS 类型的源，那么这很棘手，但我认为 jQuery 无论如何都可以检测到添加到 DOM 的新元素。

# dsl - 领域特定语言、应用程序生成器和软件重用

> ID：11811140
> 
> 赞同：1
> 
> 时间：2012-08-04T18:42:29.083
> 
> 标签：dsl, code-reuse

James Neighbors 提到 DSL 是一种软件重用的方法，但没有解释原因。他只是说 DSL 可能是比可重用组件库更好的方法。我无法理解这种关系以及在软件重用中使用 DSL 可以带来什么好处？

同样在 Mernik 的何时和如何开发 DSL 论文中，他提到 DSL 可以作为应用程序生成器的输入语言，而应用程序生成器是 Krueger 讨论的重用软件的一种方法。

谁能告诉我这些关系或 DSL 如何成为实现软件重用的有效方法？非常感谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:03:29.080

James 非常清楚为什么 DSL 是软件重用的好方法（他和我一起在加州大学欧文分校）：

*   他们捕捉问题域中感兴趣的概念
*   他们使用在该领域工作的社区熟悉的符号
*   它们定义规范/解决方案组件的组合规则以产生答案，以便可以在提供 DSL 片段时检查其完整性

*他的 Draco 系统实现了所有这些概念，接受 DSL 描述，然后是一个 DSL 实例，然后 Draco 通过应用实现知识片段*（“细化规则”）将其从高级 DSL 映射到低级 DSL将其编译为低级代码/在较低级别的 DSL 中进行优化，然后重复，直到您最终以足够低的抽象级别达到 DSL，以提供给传统编译器（例如，LISP 或 C 或 Ada 或 COBOL 或......）。

这是他的细化和优化范式，它允许一组 DSL 通过层次结构层细化为低级代码。因此，您可以获得分层域的可组合性，并且可以在非常高的抽象级别上工作。

因此，您捕获问题规范和实现知识，并将其应用于获取代码。抽象、规范、实现的重用，哇，……不仅仅是重用“代码”，许多人似乎仍然停留在 80 年代初期。代码真的很难重用。

与“子程序作为组件”相比，这确实是一个非常好的范例（目前这个术语的花哨术语是“内部 DSL”，它忽略了域符号、规范检查、实现和组合性元素）。

我认为你真的应该仔细阅读他的博士论文（与他的许多其他论文一起[在此处访问）。](http://www.bayfronttechnologies.com/l02draco.htm)它比预期的要平易近人。它没有充满神秘的数学；它充满了如何设计各种 DSL 的概念和演示。

# android - 在第二个活动中调用时，Android 无法连接到相机服务

> ID：11811142
> 
> 赞同：0
> 
> 时间：2012-08-04T18:42:57.827
> 
> 标签：android, class, camera, runtimeexception

我正在编写一个应用程序，它每 x 秒拍照，检测高于阈值的差异，并最终通过电子邮件发送高清图片。如果我将所有相机功能与主功能放在同一个类中，该应用程序运行良好，但随后代码变得混乱，并且在线程中拍照也变得更加棘手。因此，我决定将所有相机功能移到第二个 java 类 (TakePic.java) 中，并每隔 x 秒从主类调用一次。目前，如果我至少可以调用一次就可以了，但我不能。这是我的代码：

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest android:versionCode="1"
      android:versionName="1.0"
      package="com.lyo.android.CameraSender5"
      xmlns:android="http://schemas.android.com/apk/res/android">

<uses-sdk android:minSdkVersion="5"
        android:targetSdkVersion="6" />
<supports-screens android:largeScreens="false"
                android:normalScreens="true"
                android:smallScreens="false" />

<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.INTERNET"></uses-permission>  
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.RECEIVE_SMS" />
<uses-feature android:name="android.hardware.RECEIVE_MMS" />
<uses-feature android:name="android.hardware.read_owner_data" />
<uses-feature android:name="android.hardware.write_owner_data" />
<uses-feature android:name="android.hardware.acccess_network_state" />

<application 
  android:icon="@drawable/cw"
  android:label="@string/app_name">
<activity 
    android:configChanges="keyboardHidden|orientation"
    android:label="@string/app_name"
    android:name=".PreviewDemo"
    android:screenOrientation="landscape"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen">

  <intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
  </intent-filter>
</activity>
<activity 
    android:configChanges="keyboardHidden|orientation"
    android:label="@string/app_name"
    android:name=".TakePic"
    android:screenOrientation="landscape"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen">        
  <intent-filter>
    <action android:name="com.lyo.android.TAKEPIC" />
    <category android:name="android.intent.category.DEFAULT" />
  </intent-filter>
</activity>
</application>
</manifest> 
```

以下是主类：

```
package com.lyo.android.CameraSender5;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Date;
import java.util.Timer;
import java.util.TimerTask;
import javax.mail.BodyPart;
import javax.mail.Multipart;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Color;
//import android.hardware.Camera;
//import android.hardware.Camera.PictureCallback;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
//import android.view.SurfaceHolder;
//import android.view.SurfaceView;
import android.widget.TextView;
import android.widget.Toast;

import com.lyo.android.CameraSender5.R;

public class PreviewDemo extends Activity 
{
  //private SurfaceView preview=null;
  //private SurfaceHolder previewHolder=null;
  //private Camera camera=null;
  private boolean inPreview=false;
  private boolean cameraConfigured=false;
  public static Integer fileNameINT = 1; 
  /*START*/  
  public static final int MEDIA_TYPE_IMAGE = 1;
  public Bitmap bitmapPictureOld;
  public Bitmap bitmapPictureNew;
  public int singlePixelNew;
  public int singlePixelOld;
  public int colorREDsum = 0;
  public int firstLoop = 1;
  public int tollerance = 500000; //Devi ridurre la tolleranza fino a che c'e' una image detection
  @Override
  public void onCreate(Bundle savedInstanceState) 
  {
  Log.e("onCreate", "onCreate started");
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);
  Log.e("onCreate", "ContentView set");
  //TakePic TakePic = new TakePic();
  Log.e("onCreate", "TakePic called");
  //TakePic.initialize(this);
  Log.e("onCreate", "Initialized");
  startActivity(new Intent("com.lyo.android.TAKEPIC"));
    //try 
    //{
//  Thread.sleep(1000);
//} 
    //catch (InterruptedException e) 
//{
//  // TODO Auto-generated catch block
//  e.printStackTrace();
//}
    //colorREDsum = 0;
  try 
  {
    Thread.sleep(3000);
  } 
  catch (InterruptedException e) 
  {
    // TODO Auto-generated catch block
    e.printStackTrace();
  }
    //this.runOnUiThread(Timer_Tick);
    //camera.takePicture(null, null, mPicture);
  }}; 
```

这是 TakePic.java 类，我在其中输入了所有相机功能（这些曾经在主类中，并且工作正常）：

```
package com.lyo.android.CameraSender5;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Date;
import java.util.Timer;
import java.util.TimerTask;

import javax.mail.BodyPart;
import javax.mail.Multipart;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Color;
import android.hardware.Camera;
import android.hardware.Camera.PictureCallback;
import android.hardware.Camera.PreviewCallback;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.widget.TextView;
import android.widget.Toast;

import com.lyo.android.CameraSender5.R; 

public class TakePic extends Activity
{

public SurfaceView preview=null;
public SurfaceHolder previewHolder=null;
public Camera camera=null;
public boolean inPreview=false;
public boolean cameraConfigured=false;
public static Integer fileNameINT = 1;

/*START*/  
public static final int MEDIA_TYPE_IMAGE = 1;
public Bitmap bitmapPictureOld;
public Bitmap bitmapPictureNew;
public int singlePixelNew;
public int singlePixelOld;
public int colorREDsum = 0;
public int firstLoop = 1;
public int tollerance = 500000; //Devi ridurre la tolleranza fino a che c'e' una image detection

//@Override
public void surfaceDestroyed(SurfaceHolder holder) {
if (camera != null) {
    camera.stopPreview();
    camera.setPreviewCallback(null);
    camera.release();
    camera = null;
    }
}

//@Override
public void surfaceCreated(SurfaceHolder holder) {
if (camera == null) {
    camera = Camera.open();
    try {
        camera.setPreviewDisplay(holder);

        // TODO test how much setPreviewCallbackWithBuffer is faster
        camera.setPreviewCallback((PreviewCallback) this);
    } catch (IOException e) {
        camera.release();
        camera = null;
    }
    }
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    //setContentView(R.layout.main);
    if (camera != null) {
        Log.e("LYO TakePic onResume", "CAMERA NOT NULL");
        camera.unlock();
        camera.stopPreview();
        camera.unlock();
        camera.setPreviewCallback(null);
        camera.unlock();
        camera.release();
        camera.unlock();
        camera = null;
    }
    else
    {
        Log.e("LYO TakePic onResume", "CAMERA NULL");
    }

    Log.e("LYO TakePic onResume", "onResume Start");
    camera = Camera.open();
    Log.e("LYO TakePic onResume", "Camera opened");
    camera.startPreview();
    startPreview();
    Log.e("LYO TakePic onResume", "Preview Started");
    colorREDsum = 0;
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Log.e("LYO TakePic onCreate", "Setting content view");
    setContentView(R.layout.main);
    Log.e("LYO TakePic onCreate", "Content View Set");
    Log.e("LYO TakePic onCreate", "Initialization started");
    preview=(SurfaceView)this.findViewById(R.id.preview);
    Log.e("LYO TakePic onCreate", "preview set");
    previewHolder=preview.getHolder();
    previewHolder.addCallback(surfaceCallback);
    previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    Log.e("LYO TakePic onCreate", "holder set");
    colorREDsum = 0;
}

private PictureCallback mPicture = new PictureCallback() 
  {

        //@Override
        public void onPictureTaken(byte[] data, Camera camera) 
        {
            Log.e("PICTURE TAKEN", "START");
            colorREDsum = 0;
            if (firstLoop == 1)
            {
                Log.e("PICTURE TAKEN", "1st LOOP");
                bitmapPictureNew = BitmapFactory.decodeByteArray(data, 0, data.length);
                firstLoop = 0;
            } 
            else 
            {
                Log.e("PICTURE TAKEN", "OTHER LOOP");
                bitmapPictureOld = Bitmap.createBitmap(bitmapPictureNew);
                //bitmapPictureOld.createBitmap(bitmapPictureNew, 0, 0, bitmapPictureNew.getWidth(), bitmapPictureNew.getHeight());

                //Bitmap bitmapPictureOld = bitmapPictureNew;
                bitmapPictureNew = BitmapFactory.decodeByteArray(data, 0, data.length);
                colorREDsum = 0;
                int counter = 0;
                for (int height = 0; height <= bitmapPictureNew.getHeight() - 1; height++)
                {
                    for (int width = 0; width <= bitmapPictureNew.getWidth() - 1; width++)
                    {
                        singlePixelNew = bitmapPictureNew.getPixel(width, height);
                        singlePixelOld = bitmapPictureOld.getPixel(width, height);
                        colorREDsum = colorREDsum + (Color.red(singlePixelNew) - Color.red(singlePixelOld));
                        counter = counter +1;
                    }
                }

                TextView tv1 = (TextView) findViewById(R.id.integer1);
                tv1.setText(String.valueOf(colorREDsum));
                try 
                {
                    Thread.sleep(500);
                } 
                catch (InterruptedException e) 
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                if(colorREDsum > tollerance)
                {
                    //send message
                    Log.e("PICTURE TAKEN", "RED > TOLLERANCE");
                    //TEMP
                    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
bitmapPictureOld.compress(Bitmap.CompressFormat.PNG, 100, bytes);

                    //you can create a new file name "test.jpg" in sdcard folder.
                    File f = new File(Environment.getExternalStorageDirectory() + File.separator + "ALARM.png");

                    try 
                    {
                        f.createNewFile();
                        //write the bytes in file
                        FileOutputStream fo = new FileOutputStream(f);
                        fo.write(bytes.toByteArray());
                        fo.close();
                    } 
                    catch (IOException e1) 
                    {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }

                    //camera.startPreview();    

                    Log.e("PICTURE TAKEN", "START MAILING");
                    Mail m = new Mail("*****@.com", "*****");
                    String[] toArr = {"*****@hotmail.com"}; 
                    m.setTo(toArr); 
                    m.setFrom("*****@gmail.com"); 
                    m.setSubject("Ciao Ciao"); 
                    m.setBody("You never know... :)"); 

                    try
                    {
                        Log.e("PICTURE TAKEN", "START SEND TRY");
                        tv1.setText("Start Sending");
                        //try 
                        //{
                        //  Log.e("PICTURE TAKEN", "SLEEP 500");
                        //  Thread.sleep(500);
                        //} 
                        //catch (InterruptedException e) 
                        //{
                        //  // TODO Auto-generated catch block
                        //  e.printStackTrace();
                        //}
                        //START SEND
                        MimeMessage msg = new MimeMessage(m.sessionFCN()); 
                        msg.setFrom(new InternetAddress("*****@gmail.com")); //_from
                        msg.setRecipients(MimeMessage.RecipientType.TO, "*****@hotmail.com"); //addressTo
                        msg.setSubject("Ciao Ciao"); 
                        msg.setSentDate(new Date()); 

                        // setup message body 
                        BodyPart messageBodyPart = new MimeBodyPart();  
                        messageBodyPart.setText("You never know... :)"); //_body
                        Multipart _multipart;
                        _multipart = new MimeMultipart();
                        _multipart.addBodyPart(messageBodyPart); 

                        // Put parts in message 
                        try 
                        {
                        msg.setContent(_multipart);
                        } 
                        catch (Exception e) 
                        {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } 

                        // send email 
                        try 
                        {
                            Transport.send(msg);
                        } 
                        catch (Exception e) 
                        {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                            Log.e("PICTURE TAKEN", "ERROR WITH Transport.send(msg)");
                        }
                    //END SEND
                    //m.send();
                    }
                    catch (Exception e)
                    {
                        tv1.setText("Sending Failed");
                    }

                    //try 
                    //{
                    //  Thread.sleep(500);
                    //} 
                    //catch (InterruptedException e) 
                    //{
                    //  // TODO Auto-generated catch block
                    //  e.printStackTrace();
                    //}

                }
                //camera.startPreview();
            }
        }
    };

    private Camera.Size getBestPreviewSize(int width, int height, Camera.Parameters parameters) 
    {
      Camera.Size result=null;

      for (Camera.Size size : parameters.getSupportedPreviewSizes()) 
      {
        if (size.width<=width && size.height<=height) 
        {
          if (result==null) 
          {
            result=size;
          }
          else 
          {
            int resultArea=result.width*result.height;
            int newArea=size.width*size.height;

            if (newArea>resultArea) 
            {
              result=size;
            }
          }
        }
      }

      return(result);
    }

    private void initPreview(int width, int height) 
    {
      if (camera!=null && previewHolder.getSurface()!=null) 
      {
        try 
        {
          camera.setPreviewDisplay(previewHolder);
        }
        catch (Throwable t) 
        {
          Log.e("PreviewDemo-surfaceCallback", "Exception in setPreviewDisplay()", t);
          //Toast.makeText(PreviewDemo.this, t.getMessage(), Toast.LENGTH_LONG).show();
        }

        if (!cameraConfigured) 
        {
          Camera.Parameters parameters=camera.getParameters();
          Camera.Size size=getBestPreviewSize(width, height, parameters);

          if (size!=null) 
          {
            parameters.setPreviewSize(size.width, size.height);
            camera.setParameters(parameters);
            cameraConfigured=true;
          }
        }
      }
    }

    private void startPreview() 
    {
      if (cameraConfigured && camera!=null) 
      {
        camera.startPreview();
        inPreview=true;
      }
    }

    SurfaceHolder.Callback surfaceCallback=new SurfaceHolder.Callback() 
    {
      public void surfaceCreated(SurfaceHolder holder) 
      {
        // no-op -- wait until surfaceChanged()
      }

      public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) 
      {
        initPreview(width, height);
        startPreview();
      }

      public void surfaceDestroyed(SurfaceHolder holder) 
      {
        // no-op
      }
    };

    public void initialize(Context c)
    {
        //Log.e("initialize", "Setting content view");
        //setContentView(R.layout.main);
        //Log.e("initialize", "Content View Set");
        //Log.e("initialize", "Initialization started");
        //preview=(SurfaceView)this.findViewById(R.id.preview);
        //Log.e("initialize", "preview set");
        //previewHolder=preview.getHolder();
        //previewHolder.addCallback(surfaceCallback);
        //previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        //Log.e("initialize", "holder set");
        //colorREDsum = 0;
    }

} 
```

为了完整起见，我还发布了我用来发送电子邮件的课程：

```
package com.lyo.android.CameraSender5;

import java.util.Date; 
import java.util.Properties; 
import javax.activation.CommandMap; 
import javax.activation.DataHandler; 
import javax.activation.DataSource; 
import javax.activation.FileDataSource; 
import javax.activation.MailcapCommandMap; 
import javax.mail.BodyPart; 
import javax.mail.Multipart; 
import javax.mail.PasswordAuthentication; 
import javax.mail.Session; 
import javax.mail.Transport; 
import javax.mail.internet.InternetAddress; 
import javax.mail.internet.MimeBodyPart; 
import javax.mail.internet.MimeMessage; 
import javax.mail.internet.MimeMultipart; 
import javax.mail.Authenticator;
import javax.mail.PasswordAuthentication;

import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;
import android.widget.Toast;

public class Mail extends javax.mail.Authenticator 
{ 
  private String _user; 
  private String _pass; 

  private String[] _to; 
  private String _from; 

  private String _port; 
  private String _sport; 

  private String _host; 

  private String _subject; 
  private String _body; 

  private boolean _auth; 

  private boolean _debuggable; 

  private Multipart _multipart; 

  public Mail() 
  { 
    _host = "smtp.gmail.com"; // default smtp server 
    _port = "465"; // default smtp port 
    _sport = "465"; // default socketfactory port 

    _user = "*****@gmail.com"; // username 
    _pass = "*****"; // password 
    _from = "*****@gmail.com"; // email sent from 
    _subject = "Ciao Ciao"; // email subject 
    _body = "You never know... :)"; // email body 

    _debuggable = false; // debug mode on or off - default off 
    _auth = true; // smtp authentication - default on 

    _multipart = new MimeMultipart(); 

    // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. 
    MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
    mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"); 
    mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"); 
    mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"); 
    mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"); 
    mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"); 
    CommandMap.setDefaultCommandMap(mc); 
  } 

  public Mail(String user, String pass) { 
    this(); 

    _user = user; 
    _pass = pass; 
  } 

  //mie

  public Session sessionFCN()
  {
      Properties props = _setProperties();
      Session session;
    try {
        Log.e("SESSION","TRYING Session.getInstance");
        session = Session.getInstance(props, new GMailAuthenticator("*****@gmail.com", "*****"));
    return session;
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.e("SESSION","ERROR WITH Session.getInstance");
    }
      //DUMMY
    session = Session.getInstance(props, new GMailAuthenticator("*****@gmail.com", "*****"));
    return session;
  }

  class GMailAuthenticator extends Authenticator {
         String user;
         String pw;
         public GMailAuthenticator (String username, String password)
         {
            super();
            this.user = username;
            this.pw = password;
         }
        public PasswordAuthentication getPasswordAuthentication()
        {
           return new PasswordAuthentication(user, pw);
        }
    }

  //stop mie

  public boolean send() throws Exception { 
    Properties props = _setProperties(); 

    if(!"*****@gmail.com".equals("") && !"*****".equals("") && _to.length > 0 && !"*****@gmail.com".equals("") && !"Ciao Ciao".equals("") && !"You never know... :)".equals("")) 
    { 

      Session session = Session.getInstance(props, this); 
      MimeMessage msg = new MimeMessage(session); 
      msg.setFrom(new InternetAddress("*****@gmail.com")); //_from
      InternetAddress[] addressTo = new InternetAddress[_to.length]; 
      for (int i = 0; i < _to.length; i++) 
      { 
        addressTo[i] = new InternetAddress(_to[i]); 
      } 
      msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 
      msg.setSubject("Ciao Ciao"); 
      msg.setSentDate(new Date()); 
      //

      // setup message body 
      BodyPart messageBodyPart = new MimeBodyPart();  
      messageBodyPart.setText("You never know... :)"); //_body
      _multipart.addBodyPart(messageBodyPart); 

      // Put parts in message 
      msg.setContent(_multipart); 

      // send email 
      Transport.send(msg); 

      return true; 
    } 
    else 
    { 
      return false; 
    } 
  } 

  //You can call this method at any time if you want to add an attachment, but make sure you call it before the send method.
  public void addAttachment(String filename) throws Exception 
  { 
    BodyPart messageBodyPart = new MimeBodyPart(); 
    DataSource source = new FileDataSource(filename); 
    messageBodyPart.setDataHandler(new DataHandler(source)); 
    messageBodyPart.setFileName(filename); 

    _multipart.addBodyPart(messageBodyPart); 
  } 

  @Override 
  public PasswordAuthentication getPasswordAuthentication() 
  { 
    return new PasswordAuthentication(_user, _pass); 
  } 

  public Properties _setProperties() //private
  { 
    Properties props = new Properties(); 

    props.put("mail.smtp.host", _host); 

    if(_debuggable) 
    { 
      props.put("mail.debug", "true"); 
    } 

    if(_auth) 
    { 
      props.put("mail.smtp.auth", "true"); 
    } 

    props.put("mail.smtp.port", _port); 
    props.put("mail.smtp.socketFactory.port", _sport); 
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory"); 
    props.put("mail.smtp.socketFactory.fallback", "false"); 

    return props; 
  } 

  // the getters and setters 
  public String getBody() 
  { 
    return _body; 
  } 

  public void setBody(String _body) 
  { 
    this._body = _body; 
  } 

  // more of the getters and setters ….. 
  public void setTo(String[] toArr) 
  {
    this._to = toArr;
  }

  public void setFrom(String string) 
  {
    this._from = string;
  }

  public void setSubject(String string) 
  {
    this._subject = string;
  } 
  }; 
```

感谢 Log.e 消息，我发现错误发生在 camera = Camera.open(); 以下是我从 Eclipse 获得的 LogCat：

```
08-03 22:00:24.135: E/onCreate(1817): onCreate started
08-03 22:00:24.205: E/onCreate(1817): ContentView set
08-03 22:00:24.215: E/onCreate(1817): TakePic called
08-03 22:00:24.215: E/onCreate(1817): Initialized
08-03 22:00:27.295: E/LYO TakePic onCreate(1817): Setting content view
08-03 22:00:27.305: E/LYO TakePic onCreate(1817): Content View Set
08-03 22:00:27.305: E/LYO TakePic onCreate(1817): Initialization started
08-03 22:00:27.305: E/LYO TakePic onCreate(1817): preview set
08-03 22:00:27.305: E/LYO TakePic onCreate(1817): holder set
08-03 22:00:27.305: E/LYO TakePic onResume(1817): CAMERA NULL
08-03 22:00:27.305: E/LYO TakePic onResume(1817): onResume Start
08-03 22:00:27.325: E/AndroidRuntime(1817): FATAL EXCEPTION: main
08-03 22:00:27.325: E/AndroidRuntime(1817): java.lang.RuntimeException: Unable to resume activity {com.lyo.android.CameraSender5/com.lyo.android.CameraSender5.TakePic}: java.lang.RuntimeException: Fail to connect to camera service
08-03 22:00:27.325: E/AndroidRuntime(1817):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3128)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3143)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2684)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at android.os.Looper.loop(Looper.java:123)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at android.app.ActivityThread.main(ActivityThread.java:4627)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at java.lang.reflect.Method.invokeNative(Native Method)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at java.lang.reflect.Method.invoke(Method.java:521)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at dalvik.system.NativeStart.main(Native Method)
08-03 22:00:27.325: E/AndroidRuntime(1817): Caused by: java.lang.RuntimeException: Fail to connect to camera service
08-03 22:00:27.325: E/AndroidRuntime(1817):     at android.hardware.Camera.native_setup(Native Method)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at android.hardware.Camera.<init>(Camera.java:110)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at android.hardware.Camera.open(Camera.java:90)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at com.lyo.android.CameraSender5.TakePic.onResume(TakePic.java:107)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at android.app.Activity.performResume(Activity.java:3823)
08-03 22:00:27.325: E/AndroidRuntime(1817):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3118)
08-03 22:00:27.325: E/AndroidRuntime(1817):     ... 12 more 
```

正如你所看到的，我试图在调用它之前释放/解锁相机，只是为了确保它没有被使用，但我仍然得到同样的错误......我做错了什么？

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:44:12.877

我偶然发现了这篇文章，在我阅读他/她的评论之前，尚不清楚 OP 是否已解决，我只为未来的绊脚石发布此帖子（请不要赞成/反对）。

* * *

根据用户评论：

> 我不知何故找到了让它工作的方法。问题是我没有`TakePic.java`从我的主要活动中正确调用。
> 
> 代替：

```
startActivity(new Intent("com.lyo.android.TAKEPIC")); 
```

> 我必须使用以下内容：

```
final Intent takePic = new Intent(this, TakePic.class);
takePic.setFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
takePic.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
startActivity(takePic); 
```

> 递归调用时我仍然遇到问题，但我通过在`TakePic.java`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T21:30:00.503

我不知何故找到了让它工作的方法。问题是我没有`TakePic.java`从我的主要活动中正确调用。代替：

```
startActivity(new Intent("com.lyo.android.TAKEPIC")); 
```

我必须使用以下内容：

```
final Intent takePic = new Intent(this, TakePic.class);
takePic.setFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
takePic.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
startActivity(takePic); 
```

递归调用时我仍然遇到问题，但我通过在`TakePic.java`

# c# - 在 c# 中使用 Open Xml SDK 将 DataTable 导出到 Excel

> ID：11811143
> 
> 赞同：43
> 
> 时间：2012-08-04T18:42:59.357
> 
> 标签：c#, excel, openxml, openxml-sdk

我的程序能够将一些数据和 DataTable 导出到 Excel 文件（模板） 在模板中，我将数据插入到一些占位符中。它工作得很好，但我也需要插入一个 DataTable ......我的示例代码：

```
using (Stream OutStream = new MemoryStream())
{
    // read teamplate
    using (var fileStream = File.OpenRead(templatePath))
        fileStream.CopyTo(OutStream);

    // exporting
    Exporting(OutStream);

    // to start
    OutStream.Seek(0L, SeekOrigin.Begin);

    // out
    using (var resultFile = File.Create(resultPath))
        OutStream.CopyTo(resultFile); 
```

导出的下一个方法

```
private void Exporting(Stream template)
{
    using (var workbook = SpreadsheetDocument.Open(template, true, new OpenSettings                          { AutoSave = true }))
    {
        // Replace shared strings
        SharedStringTablePart sharedStringsPart = workbook.WorkbookPart.SharedStringTablePart;
        IEnumerable<Text> sharedStringTextElements = sharedStringsPart.SharedStringTable.Descendants<Text>();

        DoReplace(sharedStringTextElements);
        // Replace inline strings
        IEnumerable<WorksheetPart> worksheetParts = workbook.GetPartsOfType<WorksheetPart>();

        foreach (var worksheet in worksheetParts)
        {
            DoReplace(worksheet.Worksheet.Descendants<Text>());
        }

        int z = 40;
        foreach (System.Data.DataRow row in ExcelWorkXLSX.ToOut.Rows)
        {
            for (int i = 0; i < row.ItemArray.Count(); i++)
            { 
                ExcelWorkXLSX.InsertText(workbook, row.ItemArray.ElementAt(i).ToString(), getColumnName(i), Convert.ToUInt32(z)); }
                z++;
            }
        } 

    }
} 
```

但是这个片段输出DataTable slooooooooooooooooooooooowwwwwww...

如何快速、真实地将 DataTable 导出到 Excel？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-08-04T22:48:32.570

我写了这个简单的例子。这个对我有用。我只用一个包含一张表的数据集对其进行了测试，但我想这对你来说可能就足够了。

考虑到我将所有单元格视为字符串（甚至不是 SharedStrings）。如果您想使用 SharedStrings，您可能需要稍微调整一下我的示例。

*编辑：要完成这项工作，必须将 WindowsBase 和 DocumentFormat.OpenXml 引用添加到项目中。*

享受，

```
private void ExportDataSet(DataSet ds, string destination)
        {
            using (var workbook = SpreadsheetDocument.Create(destination, DocumentFormat.OpenXml.SpreadsheetDocumentType.Workbook))
            {
                var workbookPart = workbook.AddWorkbookPart();

                workbook.WorkbookPart.Workbook = new DocumentFormat.OpenXml.Spreadsheet.Workbook();

                workbook.WorkbookPart.Workbook.Sheets = new DocumentFormat.OpenXml.Spreadsheet.Sheets();

                foreach (System.Data.DataTable table in ds.Tables) {

                    var sheetPart = workbook.WorkbookPart.AddNewPart<WorksheetPart>();
                    var sheetData = new DocumentFormat.OpenXml.Spreadsheet.SheetData();
                    sheetPart.Worksheet = new DocumentFormat.OpenXml.Spreadsheet.Worksheet(sheetData);

                    DocumentFormat.OpenXml.Spreadsheet.Sheets sheets = workbook.WorkbookPart.Workbook.GetFirstChild<DocumentFormat.OpenXml.Spreadsheet.Sheets>();
                    string relationshipId = workbook.WorkbookPart.GetIdOfPart(sheetPart);

                    uint sheetId = 1;
                    if (sheets.Elements<DocumentFormat.OpenXml.Spreadsheet.Sheet>().Count() > 0)
                    {
                        sheetId =
                            sheets.Elements<DocumentFormat.OpenXml.Spreadsheet.Sheet>().Select(s => s.SheetId.Value).Max() + 1;
                    }

                    DocumentFormat.OpenXml.Spreadsheet.Sheet sheet = new DocumentFormat.OpenXml.Spreadsheet.Sheet() { Id = relationshipId, SheetId = sheetId, Name = table.TableName };
                    sheets.Append(sheet);

                    DocumentFormat.OpenXml.Spreadsheet.Row headerRow = new DocumentFormat.OpenXml.Spreadsheet.Row();

                    List<String> columns = new List<string>();
                    foreach (System.Data.DataColumn column in table.Columns) {
                        columns.Add(column.ColumnName);

                        DocumentFormat.OpenXml.Spreadsheet.Cell cell = new DocumentFormat.OpenXml.Spreadsheet.Cell();
                        cell.DataType = DocumentFormat.OpenXml.Spreadsheet.CellValues.String;
                        cell.CellValue = new DocumentFormat.OpenXml.Spreadsheet.CellValue(column.ColumnName);
                        headerRow.AppendChild(cell);
                    }

                    sheetData.AppendChild(headerRow);

                    foreach (System.Data.DataRow dsrow in table.Rows)
                    {
                        DocumentFormat.OpenXml.Spreadsheet.Row newRow = new DocumentFormat.OpenXml.Spreadsheet.Row();
                        foreach (String col in columns)
                        {
                            DocumentFormat.OpenXml.Spreadsheet.Cell cell = new DocumentFormat.OpenXml.Spreadsheet.Cell();
                            cell.DataType = DocumentFormat.OpenXml.Spreadsheet.CellValues.String;
                            cell.CellValue = new DocumentFormat.OpenXml.Spreadsheet.CellValue(dsrow[col].ToString()); //
                            newRow.AppendChild(cell);
                        }

                        sheetData.AppendChild(newRow);
                    }

                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-16T10:20:47.637

eburgos，我稍微修改了您的代码，因为当您的数据集中有多个数据表时，它只是在电子表格中覆盖它们，因此您在工作簿中只剩下一张工作表。我基本上只是将创建工作簿的部分移出循环。这是更新的代码。

```
private void ExportDSToExcel(DataSet ds, string destination)
{
    using (var workbook = SpreadsheetDocument.Create(destination, DocumentFormat.OpenXml.SpreadsheetDocumentType.Workbook))
    {
        var workbookPart = workbook.AddWorkbookPart();
        workbook.WorkbookPart.Workbook = new DocumentFormat.OpenXml.Spreadsheet.Workbook();
        workbook.WorkbookPart.Workbook.Sheets = new DocumentFormat.OpenXml.Spreadsheet.Sheets();

        uint sheetId = 1;

        foreach (DataTable table in ds.Tables)
        {
            var sheetPart = workbook.WorkbookPart.AddNewPart<WorksheetPart>();
            var sheetData = new DocumentFormat.OpenXml.Spreadsheet.SheetData();
            sheetPart.Worksheet = new DocumentFormat.OpenXml.Spreadsheet.Worksheet(sheetData);                

            DocumentFormat.OpenXml.Spreadsheet.Sheets sheets = workbook.WorkbookPart.Workbook.GetFirstChild<DocumentFormat.OpenXml.Spreadsheet.Sheets>();
            string relationshipId = workbook.WorkbookPart.GetIdOfPart(sheetPart);

            if (sheets.Elements<DocumentFormat.OpenXml.Spreadsheet.Sheet>().Count() > 0)
            {
                sheetId =
                    sheets.Elements<DocumentFormat.OpenXml.Spreadsheet.Sheet>().Select(s => s.SheetId.Value).Max() + 1;
            }

            DocumentFormat.OpenXml.Spreadsheet.Sheet sheet = new DocumentFormat.OpenXml.Spreadsheet.Sheet() { Id = relationshipId, SheetId = sheetId, Name = table.TableName };
            sheets.Append(sheet);

            DocumentFormat.OpenXml.Spreadsheet.Row headerRow = new DocumentFormat.OpenXml.Spreadsheet.Row();

            List<String> columns = new List<string>();
            foreach (DataColumn column in table.Columns)
            {
                columns.Add(column.ColumnName);

                DocumentFormat.OpenXml.Spreadsheet.Cell cell = new DocumentFormat.OpenXml.Spreadsheet.Cell();
                cell.DataType = DocumentFormat.OpenXml.Spreadsheet.CellValues.String;
                cell.CellValue = new DocumentFormat.OpenXml.Spreadsheet.CellValue(column.ColumnName);
                headerRow.AppendChild(cell);
            }

            sheetData.AppendChild(headerRow);

            foreach (DataRow dsrow in table.Rows)
            {
                DocumentFormat.OpenXml.Spreadsheet.Row newRow = new DocumentFormat.OpenXml.Spreadsheet.Row();
                foreach (String col in columns)
                {
                    DocumentFormat.OpenXml.Spreadsheet.Cell cell = new DocumentFormat.OpenXml.Spreadsheet.Cell();
                    cell.DataType = DocumentFormat.OpenXml.Spreadsheet.CellValues.String;
                    cell.CellValue = new DocumentFormat.OpenXml.Spreadsheet.CellValue(dsrow[col].ToString()); //
                    newRow.AppendChild(cell);
                }

                sheetData.AppendChild(newRow);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-11-02T09:06:37.677

我还写了一个 C#/VB.Net“导出到 Excel”库，它使用 OpenXML 并且（更重要的是）也使用 OpenXmlWriter，因此在编写大文件时不会耗尽内存。

完整的源代码和演示可以在这里下载：

[导出到 Excel](http://mikesknowledgebase.com/pages/CSharp/ExportToExcel.htm)

它很容易使用。只需将您要写入的文件名和`DataTable`,`DataSet`或`List<>`.

```
CreateExcelFile.CreateExcelDocument(myDataSet, "MyFilename.xlsx"); 
```

如果您从 ASP.Net 应用程序调用它，请将其传递给以`HttpResponse`将文件写入。

```
CreateExcelFile.CreateExcelDocument(myDataSet, "MyFilename.xlsx", Response); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-10T17:38:39.237

我编写了自己的导出到 Excel 编写器，因为没有其他东西完全满足我的需求。它速度很快，并且允许对单元格进行大量格式化。您可以在

[https://openxmlexporttoexcel.codeplex.com/](https://openxmlexporttoexcel.codeplex.com/)

我希望它有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T21:47:11.203

你可以试着看看这个库。我将它用于我的一个项目，发现它非常易于使用、可靠且快速（我仅将它用于导出数据）。

[http://epplus.codeplex.com/](http://epplus.codeplex.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-29T09:23:03.047

[你可以在这里](https://openxmlpackaging.codeplex.com)看看我的图书馆。在文档部分下，您将找到如何导入数据表。

你只需要写

```
using (var doc = new SpreadsheetDocument(@"C:\OpenXmlPackaging.xlsx")) {
    Worksheet sheet1 = doc.Worksheets.Add("My Sheet");
    sheet1.ImportDataTable(ds.Tables[0], "A1", true);
} 
```

希望能帮助到你！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-27T13:06:14.770

我尝试了接受的答案并收到消息说生成的 excel 文件在尝试打开时已损坏。我能够通过做一些修改来修复它，比如在代码的行尾添加。

`workbookPart.Workbook.Save();`

我已经[在 c# 中使用 Open XML 发布了完整代码 @Export DataTable to Excel](http://sarangasl.blogspot.com/2015/11/export-datatable-to-excel-with-open-xml.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-06T20:24:35.397

我想添加这个答案，因为我使用了这个问题的主要答案作为我使用 OpenXML 从数据表导出到 Excel 的基础，但是当我发现它比上述方法快得多时转换到 OpenXMLWriter。

您可以在下面链接中的我的回答中找到完整的详细信息。我的代码在 VB.NET 中，所以你必须转换它。

[如何将数据表导出到 Excel](https://stackoverflow.com/questions/8207869/how-to-export-datatable-to-excel/61644625#61644625)

# vb.net - 将字符串拆分为双数组

> ID：11811144
> 
> 赞同：0
> 
> 时间：2012-08-04T18:43:16.950
> 
> 标签：vb.net, arrays, split, double, opentk

我有一个问题：我有一个包含值的字符串，我想将它们拆分为一个双精度数组。

输入：`0.0 0.0 0.0`

我有两种方法，但都不起作用

第一的 ：

```
 Dim arrString As String() = line.Split(New Char() {" "c})
                Dim numbers As Double() = New Double(arrString.Length) {}
                Dim i As Integer = 0
                While i < arrString.Length
                    numbers(i) = Convert.ToDouble(arrString(i))
                    i += 1
                End While 
```

第二 ：

```
 Dim nums As String() = line.Split(" "c)
                Dim numbers As Double() = From num In nums Select Convert.ToDouble(num) 
```

我得到一个 FormatExeption exeption 请帮帮我，它是一个 .obj 加载器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:03:19.160

当前的文化可能使用不同的小数分隔符。使用采用格式提供程序的 的重载`ToDouble`：

```
Convert.ToDouble(num, CultureInfo.InvariantCulture) 
```

（该`InvariantCulture`属性返回基于英语设置的中性文化信息，因此它使用句点作为小数分隔符。）

# ruby-on-rails - 需要对在 Rails 中使用版本控制的模型架构进行评论。有什么建议么

> ID：11811145
> 
> 赞同：0
> 
> 时间：2012-08-04T18:43:38.473
> 
> 标签：ruby-on-rails, database-design, version-control, model, schema

Som 我正在尝试设计一个电子商务系统，供应商可以在其中添加要在网站上显示的产品。供应商可以编辑/更新产品详细信息，但除非管理员对其进行审核，否则他们不应“上线”。

我有几个代表不同产品的模型。这是一种此类产品的设计，但同样的系统将应用于每种产品类型。

这是图表：![在此处输入图像描述](../Images/21ebef6aec6cf8705a6fa6813feb4b64.png)

我能否就这种方法的优缺点得到一些反馈。有没有更好的方法来解决这个问题。这是可扩展的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:05:26.400

`is_current_products`和表中的内容`awaiting_approvals`应存储为列而不是单独的表。

由于当前产品将被大量查询（每次客户访问该站点），因此首先获取`is_current_products`表然后显示来自`products`. `products`当您要对表格进行排序时，这将是一个更大的麻烦。

我将如何设计这是有两个表：`products`和`product_versions`，其中`products`代表所有批准的信息，并`product_versions`代表所有信息，无论它们是批准的还是历史的。

粗略的架构：

```
products
-id
-current_version_id
-#all the product information from newest approved version#

product_versions
-id
-product_id
-approved_by (can be null)
-approved_on (can be null)
-#all the product information from this version# 
```

要显示当前产品信息，访问该`products`表就足够了。

要获取待批准的版本，只需获取所有已批准的产品版本或已批准的属性为空。

要批准一个版本，需要修改product_version 上的approved_by 和approved_on，并将product 的信息修改为当前版本，包括current_version_id。

使用这种设计，您还可以恢复到旧版本，同时保持所有其他版本完好无损。

希望这可以帮助。

# c# - 获取对象类型并动态设置为对象

> ID：11811146
> 
> 赞同：0
> 
> 时间：2012-08-04T18:43:59.603
> 
> 标签：c#

是否可以获取对象的类型并将其动态设置为对象。我有几个 ViewModels 都包含相同的属性并想做这样的事情

```
if (this.DataContext is CamerasViewModel)
{
     //Type type = Type.GetType((this.DataContext.ToString());
     object o = Assembly.GetExecutingAssembly().CreateInstance(this.DataContext.GetType().ToString());
     Type type = o.GetType();

     foreach (ButtonViewModel button in (this.DataContext as type).Buttons)
     {
         if (button.DisplayName == this.Content.ToString())
         {
             this.Template = (ControlTemplate)this.FindResource(button.TemplateResource.Substring(0, button.TemplateResource.Length - 3) + "pr");
             break;
         }
     }
 } 
```

而不是说 this.DataContext 作为 CamerasViewModel 我想说 this.DataContext 作为 THEDYNAMICTYPE

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T18:55:31.880

您可能会更好地获取所有具有`Buttons`要更新模板的属性的类，并让它们实现接口。界面看起来像这样：

```
public interface IHasButtons
{
  public IEnumerable<ButtonViewModel>  Buttons {get; set;}
} 
```

并且您的视图模型将被声明为：

```
public class CamerasViewModel : IHasButtons
{
  public IEnumerable<ButtonViewModel> Buttons {get {. . .} set {. . .} }
  . . .
} 
```

然后，在您的 if 语句中，不是检查对象是否是 CamerasViewModel，而是检查它是否是 IHasButtons。这样做比尝试在运行时确定对象上是否有 Buttons 属性要安全得多。您可能会遇到不幸的 Buttons 属性，该属性具有相同的名称，但功能与您预期的不同。然后你又开始编写疯狂的逻辑来确定这是否真的是你正在寻找的 Buttons 集合。如果你用接口来做，那就非常清楚了。如果 ViewModel 实现了 IHasButtons，那么它就是您要更新的 ViewModel。如果它没有实现 IHasButtons，你会直接跳过它

# objective-c - 将 Mac 应用程序与 GTM 链接：_OBJC_CLASS_$_NSObject

> ID：11811150
> 
> 赞同：3
> 
> 时间：2012-08-04T18:44:15.953
> 
> 标签：objective-c, macos, xcode4, xcode4.2

我正在尝试构建一个使用 google-toolbox-for-mac 的项目。我已将其添加为项目依赖项，并链接到它。

构建完成，但是当它运行时，我得到以下信息：

```
dyld: Symbol not found: _OBJC_CLASS_$_NSObject
  Referenced from: /Users/mbryant/Library/Developer/Xcode/DerivedData/MyApp-fqmbpxocylqjuggktbphorcdabqj/Build/Products/Debug/GoogleToolboxForMac.framework/Versions/A/GoogleToolboxForMac
  Expected in: /usr/lib/libobjc.A.dylib
 in /Users/mbryant/Library/Developer/Xcode/DerivedData/MyApp-fqmbpxocylqjuggktbphorcdabqj/Build/Products/Debug/GoogleToolboxForMac.framework/Versions/A/GoogleToolboxForMac 
```

如果我删除 google-toolbox-for-mac 库，应用程序将按预期运行（尽管没有 GTM 的任何功能）。

我确信这是相当简单的事情，但我主要是一个 Objective-c 新手。

# c++ - 赋值重载显式调用析构函数（在执行其他二元重载运算符后）

> ID：11811158
> 
> 赞同：-2
> 
> 时间：2012-08-04T18:45:11.610
> 
> 标签：c++, operator-overloading, destructor, dynamic-arrays

我的问题很简单（双重免费或腐败（fasttop）：）并且有一个解决方案（[这里](http://www.ittc.ku.edu/~niehaus/classes/268-f08/notes/copy-assign-4.pdf)）。但是，我无法实现它。我不知道问题出在哪里。当我跟踪我的程序时，我看到它发生在二元运算符执行之后......作为一个例子；

`arr1 = arr2 + arr3;`

执行此语句后，它调用析构函数。所以我的析构函数将调用作用域的结尾，以便调用它比需要的多。我的班级定义是；

```
class IntArray
{
public:
    IntArray(int size);
    //IntArray(const IntArray& ref);
    ~IntArray();
    IntArray& operator= (const IntArray&);
    const int& operator[] (int index) const;
    friend ostream& operator <<(ostream&, IntArray);
    friend istream& operator >>(istream&, IntArray);
    friend IntArray operator *(const IntArray&, const IntArray&);
    friend IntArray operator +(const IntArray&, const IntArray&);
    friend IntArray operator -(const IntArray&, const IntArray&);
    friend bool operator ==(const IntArray&, const IntArray&);
    friend bool operator <(const IntArray&, const IntArray&);
    friend bool operator >(const IntArray&, const IntArray&);
    const int& getArr(const int index) const{
        return arr[index];
    }
    void setArr(int value, int index){
        arr[index] = value;
    }
private:
    int* arr;
    int sz;
}; 
```

我的析构函数是；

```
IntArray::~IntArray(){
    delete[] arr;
} 
```

还有我的一个二进制重载函数；

```
 IntArray operator- (const IntArray& refOne, const IntArray& refTwo){
        IntArray newArray(refOne.sz);
        int value;
        for(int i = 0; i < refOne.sz-1; i++){
                value = refOne.getArr(i) - refTwo.getArr(i);
                newArray.setArr(value, i);
            }
        return newArray;
    } 
```

无论是否需要，这里是我的构造函数；

```
IntArray::IntArray(int size){
    sz = size;
    arr = new int[size];
    for (int i = 0;i < size; i++)
        arr[i] = 0;
} 
```

我没有使用复制构造函数。相反，我使用了赋值运算符。我的所有代码都是；

```
/*
 * sampleArrayImplemtation.cpp
 *
 *  Created on: Jul 31, 2012
 *      Author: musbuntu
 */

#include <iostream>
#include <cstdlib>
using namespace std;
class IntArray
{
public:
    IntArray(int size);
    //IntArray(const IntArray& ref);
    ~IntArray();
    IntArray& operator= (const IntArray&);
    const int& operator[] (int index) const;
    friend ostream& operator <<(ostream&, IntArray);
    friend istream& operator >>(istream&, IntArray);
    friend IntArray operator *(const IntArray&, const IntArray&);
    friend IntArray operator +(const IntArray&, const IntArray&);
    friend IntArray operator -(const IntArray&, const IntArray&);
    friend bool operator ==(const IntArray&, const IntArray&);
    friend bool operator <(const IntArray&, const IntArray&);
    friend bool operator >(const IntArray&, const IntArray&);
    const int& getArr(const int index) const{
        return arr[index];
    }
    void setArr(int value, int index){
        arr[index] = value;
    }
private:
    int* arr;
    int sz;
};
IntArray& IntArray::operator= (const IntArray& ref){
    if(this!=&ref){
        delete[] arr;
        sz = ref.sz;
        arr = new int[sz];
        for (int i=0; i<sz;i++)
            arr[i] = ref.arr[i];
    }
    return *this;
}
bool operator< (const IntArray& valOne, const IntArray& valTwo){
    int flag(0);
    for(int i = 0;i<valOne.sz;i++)
    {
        if (valOne[i] < valTwo[i]){
            flag = 1;
        }
        else{
            return(0);
        }
    }
    return(flag);
}
bool operator> (const IntArray& valOne, const IntArray& valTwo){
    int flag(0);
    for(int i = 0;i<valOne.sz;i++)
    {
        if (valOne[i] > valTwo[i]){
            flag = 1;
        }
        else{
            return(0);
        }
    }
    return(flag);
}

bool operator== (const IntArray& valOne, const IntArray& valTwo){
    int flag(0);
    for(int i = 0;i<valOne.sz;i++)
    {
        if (valOne[i] == valTwo[i]){
            flag = 1;
        }
        else{
            return(0);
        }
    }
    return(flag);
}
IntArray operator- (const IntArray& refOne, const IntArray& refTwo){
    IntArray newArray(refOne.sz);
    int value;
    for(int i = 0; i < refOne.sz-1; i++){
            value = refOne.getArr(i) - refTwo.getArr(i);
            newArray.setArr(value, i);
        }
    return newArray;
}
IntArray operator+ (const IntArray& refOne, const IntArray& refTwo){
    IntArray newArray(refOne.sz);
    int value;
        for(int i = 0; i < refOne.sz-1; i++){
            value = refOne.getArr(i) + refTwo.getArr(i);
                newArray.setArr(value, i);
            }
    return newArray;
}
IntArray operator* (const IntArray& refOne, const IntArray& refTwo){
    IntArray newArray(refTwo.sz);
    int value;
        for(int i = 0; i < refOne.sz-1; i++){
                value = refOne.getArr(i) * refTwo.getArr(i);
                newArray.setArr(value, i);
            }
    return newArray;
}
istream& operator>> (istream& inputStream, IntArray ref){
    cout << "Enter one by one with respect to a comma> ";
    for(int i = 0; i < ref.sz; i++){
        inputStream >> ref.arr[i];
    }
    return inputStream;
}
ostream& operator<< (ostream& outStream, IntArray ref){
    outStream << "\nYour array has size = " << ref.sz << " and all members are:" << endl;
    for (int i = 0; i < ref.sz; i++){
        outStream << ref[i] << "\t";
    }
    return outStream;
}
const int& IntArray::operator[] (int index) const{
    if (index >= 0 && index < sz){
        return(arr[index]);
    }
    else{
        cerr << "Index out of range, therefore use vectors instead." << endl;
    }
//  return(arr[1]);
}
IntArray::IntArray(int size){
    sz = size;
    arr = new int[size];
    for (int i = 0;i < size; i++)
        arr[i] = 0;
}
//IntArray::IntArray(const IntArray& ref){
//  arr = new int[ref.sz];
//  for(int i=0;i<ref.sz;i++)
//      arr[i] = ref.arr[i];
//}
IntArray::~IntArray(){
    delete[] arr;
}

int main(){
    int sz;
    cout << "Enter size of array> ";
    cin >> sz;
    IntArray arr1(sz);
    arr1.setArr(5, 3);
    IntArray arr2(sz);
    //arr2 = arr1;
    IntArray arr3(sz), arr4(sz), arr5(sz), arr6(sz);
    arr2.setArr(2, 1);
    arr6 = arr1;
    cout << arr6;
    arr3 = arr2 - arr1;
    arr4 = arr1 * arr2;
    arr5 = arr2 + arr1;
    if (arr6 == arr5)
        cout << "It's working.";
    if (arr2 < arr5)
        cout << "It's working, too";
    if (arr4 > arr2)
        cout << "It is also working.";
    cout << arr1 << arr2 << arr3 << arr4 << arr5 << arr6;
    return 0;
} 
```

为了解决这个问题，我不得不使用深拷贝；并做到这一点；（根据维基百科[文章](http://en.wikipedia.org/wiki/Copy_constructor#User-defined_copy_constructor)：）首先添加这个库/标题：

```
#include <algorithm> 
```

还有一个深拷贝构造函数：

```
IntArray(const IntArray& ref):sz(ref.sz), arr(new int[ref.sz]){
    copy(ref.arr, ref.arr + ref.sz, arr);
} 
```

感谢您的耐心和建议...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:54:14.090

**尊重[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)**。否则，您所有的二进制操作都是错误的：

```
IntArray operator- (const IntArray& refOne, const IntArray& refTwo){
    IntArray newArray(refOne.sz);
    int value;
    for(int i = 0; i < refOne.sz-1; i++){
            value = refOne.getArr(i) - refTwo.getArr(i);
            newArray.setArr(value, i);
        }
    return newArray;
} 
```

您按值返回 a `IntArray`，创建一个副本，并使用编译器生成的复制构造函数。如果您希望它正确运行，则必须实现一个复制构造函数。

如果不是将其注释掉：

```
public:
   IntArray(int size);
   //IntArray(const IntArray& ref); 
```

您可以将其定义为私有：

```
public:
   IntArray(int size);
private:
   //IntArray(const IntArray& ref); 
```

并且问题在编译时就已经很清楚了。

# django - 在 Django 中为多个 SQS 消费者启用锁定机制的常见做法是什么，所以我可以是幂等的

> ID：11811159
> 
> 赞同：2
> 
> 时间：2012-08-04T18:45:21.260
> 
> 标签：django, background-process, amazon-sqs

SQS 期望您的应用程序是幂等的，并且我有多个消费者/生产者（即使 SQS 有一次交付机制）我将有竞争条件创建重复和竞争条件消耗，因为我的消费者通过 cron 作业运行。

我目前的计划是使用 Django 1.4 `select_for_update`，它应该阻止同一行的其他消费者，执行以下操作：

```
reminders = EmailReminder.objects.select_for_update().filter(id=some_id)
if not reminders[0].finished:
    reminder.send()
    reminder.update(finished=datetime.now())
# Delete job. 
```

有没有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T22:16:00.310

将 django-celery 连接到 SQS 并让它使用 celerybeat 指定一个定期作业。然后让 celeryd 工作人员在您想要的任何地方在同一个队列上运行。一次只有一个人会拿起一份工作并执行它。无需在任何级别引入数据库锁定。

只要保证您的工作人员在 celerybeat 触发新工作之前完成其当前任务，您就永远不需要锁。现在，如果您认为它们有可能重叠，您可以为您的通知引入状态：

1.  任何提醒都以“未发送”状态开始。
2.  您的 celerybeat 向队列发送处理未发送电子邮件的请求。
3.  一些工人捡起它并抓住所有这些。
4.  工作人员立即将它们全部转换为“发送”状态。
5.  继续一次发送一个（或批量发送）。
6.  如果任何发送失败，则将其状态恢复为未发送。
7.  对于所有成功过渡到发送。

这样，如果 celerybeat 在初始批次未完成原始工作时触发另一个工作，您将不会发送重复的电子邮件。作为额外的奖励，您可以扩展解决方案并分配负载。

# php - 无法让 Apache 找到 php5apache2_2.dll - 我尝试过的所有解决方案都不起作用

> ID：11811160
> 
> 赞同：0
> 
> 时间：2012-08-04T18:45:24.417
> 
> 标签：php, apache

我知道这个问题已经被问过很多次了，但是我在 Windows 7 上有一个工作的 Apache 2.0.64 并且找不到 php5apache2_2.dll 库（PHP 版本 5.4.5 VC9）。我已经尝试了所有我能找到的解决方案，但没有任何效果。Apache 日志说无论我使用“/”还是“\”，它都找不到路径名中带有“/”的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:52:23.637

您正在尝试将 Apache 2.2 模块加载到 Apache 2.0 中。那行不通——使用更新版本的 Apache，然后再试一次。

# php - jQuery post 无法在 php 中获取 $_POST

> ID：11811162
> 
> 赞同：0
> 
> 时间：2012-08-04T18:45:29.043
> 
> 标签：php, jquery, ajax, wordpress, post

我有一个带有`onkeyup`事件的表格。我尝试将变量发送到我的 php 脚本并在 div 中显示结果。

感谢这个论坛，我的测试功能完成了一半：

```
jQuery.post(the_ajax_script.ajaxurl, 
```

如果我继续：1）`jQuery("#theForm").serialize(),` 我得到响应文本“Hello World”如果我尝试传递一个变量：2）`{ name: "p" },` 我得到：-1

JavaScript

```
function submit_me(){
jQuery.post(
    the_ajax_script.ajaxurl, 
    { name: "p" },
function(response_from_the_action_function){
    jQuery("#txtHint").html(response_from_the_action_function);
    }
);
} 
```

PHP

```
<?php
function the_action_function(){
$name = $_POST['name'];
echo "Hello World, " . $name;
die();
}
?> 
```

形式

```
<form id="theForm">
 <input type="text" name="user">
 <input name="action" type="hidden" value="the_ajax_hook">
 <input id="submit_button" value = "Click This" type="button" onkeyup="submit_me()">
<form> 
```

我实际上希望`onkeyup="submit_me(this.value, 0)"` 我通过他们的 admin-ajax.php 文件在 WordPress 上执行此操作。

这其中的问题在哪里？

编辑

显然我必须向数据添加操作

```
{ action:'the_ajax_hook', name:"p" } 
```

我猜它的 WP 要求，而不是 jQuery，因为我看到了这样的例子：

```
$.post("test.php", { name: "John", time: "2pm" } 
```

到处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:34:43.280

像这样的东西应该工作：

```
<html>
    <head>
        <script>
            $(document).ready(function() {
                $("#my_form").submit(function(event) {
                    event.preventDefault() // to prevent natural form submit action
                    $.post(
                        "processing.php",
                        { name: "p" },
                        function(data) {
                             var response = jQuery.parseJSON(data);
                             $("#txtHint").html(response.hello_world);
                        }
                    );
                });
            });
        </script>
    </head>
    <body>
        <form id="my_form" action="/" method="post">
            <input type="text" name="user" />
            <input name="action" type="hidden" value="the_ajax_hook" />
            <input type="button" name="submit" value = "Click This" />
        </form>
        <div id="txtHint"></div>
    </body>
</html> 
```

然后在 processing.php 中：

```
<?php
    $name = $_POST['name'];
    $response['hello_world'] = "Hello World, " . $name;
    echo json_encode($response);
?> 
```

# iphone - 应用看不到文件

> ID：11811164
> 
> 赞同：0
> 
> 时间：2012-08-04T18:45:37.157
> 
> 标签：iphone, xcode, cocoa, file

这一切都始于我将 my_sound.mp3 更改为“支持文件”文件夹中具有相同名称的另一个声音，但在编译应用程序后仍在播放旧声音。之后我做了很多操作。

我试过的：

*   从 iPhone 和模拟器中删除应用程序

*   从 Library/Developer/Xcode/DerivedData 中删除所有

*   产品 > 在 Xcode 中清理

现在我的应用根本看不到 my_sound.mp3 ......

我如何检查：

```
NSString* path = [[NSBundle mainBundle] pathForResource:@"my_sound" ofType:@"mp3"];
if (![[NSFileManager defaultManager] fileExistsAtPath:path]) { 
    NSLog(@"No file");
} 
```

可以使用很久以前在“支持文件”中创建的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:06:26.023

“my_sound.mp3 是否在目标构建阶段的“复制捆绑资源”部分中以正确的名称列出？– 菲利普米尔斯 8 月 4 日 19:00

# eclipse - 如何在 Eclipse IDE 中自定义 GlassFish 错误的控制台颜色

> ID：11811170
> 
> 赞同：0
> 
> 时间：2012-08-04T18:46:37.730
> 
> 标签：eclipse, glassfish

我已经到了 Eclipse 中 GlassFish 控制台日志的颜色让我烦恼的地步。

与 Tomcat 以红色打印错误并以蓝色打印堆栈跟踪并可以单击堆栈跟踪元素不同，GlassFish 以黑色打印所有内容（非常难看的格式）。

这当然很难快速调试，其实很头疼。

所以我想知道是否有办法让 Eclipse 控制台中的 GlassFish 错误输出看起来更“漂亮”，或者至少看起来像 Tomcat 的错误。

ps：我使用的是 Eclipse Java EE Juno 和 GlassFish 3.1.2（安装了服务器适配器工具）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T17:16:19.167

以下应该可以为 Eclipse 中的任何控制台日志“着色”。

有一个名为[**Grep Console**](http://youtu.be/fXjgGZAxToc)的插件，它根据输出中的字符串模式突出显示或着色控制台日志。

## 更新站点

**Grep Console 2**
[http://eclipse.musgit.com](http://eclipse.musgit.com)
（需要 Eclipse 3.4 (Ganymede) 或更高版本以及 Java 5.0 或更高版本）

**Grep Console 3**
[http://eclipse.schedenig.name](http://eclipse.schedenig.name)
（需要 Eclipse 3.7 (Indigo) 或更高版本以及 Java 6.0 或更高版本）

## 用法

使用更新站点安装插件后，您应该会在控制台视图中看到一个图标，该图标应允许您添加与控制台中的输出匹配的表达式（正则表达式）以及您选择的格式（背景颜色、前景色等）被应用。

### 截屏

请参阅显示整个过程的截屏视频**[。](http://youtu.be/fXjgGZAxToc)**

### 新版本 (3.x) 发布。

我收到了 Grep Console 插件的创建者的评论。他提到**Grep 控制台 3 已经发布。**我已将链接添加到上面的更新站点（查看要求；如果您使用的是 Eclipse 版本 < 3.7，那么您将需要使用 Grep 控制台的 v2.x）

# regex - 正则表达式回溯选项：缩小还是扩大？

> ID：11811173
> 
> 赞同：0
> 
> 时间：2012-08-04T18:47:04.057
> 
> 标签：regex, backtracking

到目前为止，在我对正则表达式的研究中，我得出的结论是，无论何时发生回溯，当前“在回溯点”的标记要么尝试扩展（假设它后面跟着一个惰性量词；比如 x*?最初抓取的“x”将尝试抓取另一个 x 以变成“xx”）或缩小（只要它后面跟着一个贪婪的量词；最初抓取“xxx”的 x* 将尝试释放一个 x 以保持“ xx”）。我的理解是，这些动作是严格由记号后面的量词类型决定的。

但这在某种程度上与正则表达式教程的这一部分中提供的信息相矛盾：[http](http://www.regular-expressions.info/catastrophic.html) ://www.regular-expressions.info/catastrophic.html 。
那里的作者给出了一个正在搜索的字符串的例子 -

```
"1,2,3,4,5,6,7,8,9,10,11,12,13" and regex - "^([^,\r\n]*,){11}P". 
```

他进一步指出：“如果找不到 P，引擎仍然会回溯。但它只会回溯 11 次，并且每次`[^,\r\n]`无法**扩展**超出逗号，迫使正则表达式引擎到 11 中的前一个立即迭代，无需尝试其他选项”。

“扩大”这个词让我很困惑。当它回溯时，令牌是否会在此时尝试扩展？正则表达式是否应该写成这样：`"^([^,\r\n]*?,){11}P",`不会出现任何问题，但现在我想知道我是否正确理解了回溯的概念
。？

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:13:37.583

他所说的是`[^,\r\n]*`永远不会使用逗号以外的字符，这是分隔符。

如果字符集不包含逗号，那么回溯的数量将灾难性地增加，因为它是一个重复的子模式。

# sql-server - 如何查询sql数据库中的列

> ID：11811180
> 
> 赞同：1
> 
> 时间：2012-08-04T18:47:50.093
> 
> 标签：sql-server, database, tsql

我正在合并几个表，我需要查询特定的列名。原因是我要压缩的这些表有 FK 候选列但没有 FK，所以我必须继续查看每个表，看看它是否包含特定的列名，这似乎有点让人眼花缭乱。

我从另一个帖子中得到了这个，但它不完整。

```
SELECT 'SELECT ''' + TABLE_NAME + '.' + column_name + 
   ''' FROM ' + TABLE_NAME + ' WHERE ' + 
   column_name + ' = ''[THE COLUMN NAME I AM LOOKING FOR]'''
FROM INFORMATION_SCHEMA.COLUMNS 
```

上面的 TSQL 似乎结构不正确，或者我遗漏了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:07:07.027

此查询将获得与您放入参数中的任何内容相匹配的列列表（以及它们的模式和表名）`@SomeColumnName`：

```
DECLARE @SomeColumnName VarChar(200) = 'Test';

SELECT S.name SchemaName, T.name TableName, C.name ColumnName
FROM sys.columns C
     JOIN sys.tables T ON C.object_id = T.object_id
     JOIN sys.schemas S ON T.schema_id = S.schema_id
WHERE C.name = @SomeColumnName; 
```

如果您使用的 SQL Server 版本没有较新的 DMV，请使用以下命令：

```
SELECT *
FROM INFORMATION_SCHEMA.COLUMNS C
WHERE C.COLUMN_NAME = @SomeColumnName; 
```

# java - 如何在 Java 中合并音频和视频

> ID：11811181
> 
> 赞同：5
> 
> 时间：2012-08-04T18:48:18.187
> 
> 标签：java, audio, video, add, xuggler

我们创建了一个使用 Xuggler 记录网络摄像头流的应用程序，但视频和音频是分开的。

我们需要合并而不是连接这两个文件。

如何在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:28:37.463

如果您有音频和视频文件，则可以使用 FFmpeg 将它们合并为单个音频视频文件：

1.  下载 FFmpeg： http: [//ffmpeg.zeranoe.com/builds/](http://ffmpeg.zeranoe.com/builds/)
2.  将下载的文件提取到特定文件夹，例如 c:\ffmpeffolder
3.  使用 cmd 移动到特定文件夹 c:\ffmpeffolder\bin
4.  运行以下命令： $ ffmpeg -i audioInput.mp3 -i videoInput.avi -acodec copy -vcodec copy outputFile.avi 就是这样。outputFile.avi 将是生成的文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T01:52:22.433

您可以使用 Java 调用 ffmpeg，如下所示：

```
public class WrapperExe {

 public boolean doSomething() {

 String[] exeCmd = new String[]{"ffmpeg", "-i", "audioInput.mp3", "-i", "videoInput.avi" ,"-acodec", "copy", "-vcodec", "copy", "outputFile.avi"};

 ProcessBuilder pb = new ProcessBuilder(exeCmd);
 boolean exeCmdStatus = executeCMD(pb);

 return exeCmdStatus;
} //End doSomething Function

private boolean executeCMD(ProcessBuilder pb)
{
 pb.redirectErrorStream(true);
 Process p = null;

 try {
  p = pb.start();

 } catch (Exception ex) {
 ex.printStackTrace();
 System.out.println("oops");
 p.destroy();
 return false;
}
// wait until the process is done
try {
 p.waitFor();
} catch (InterruptedException e) {
e.printStackTrace();
System.out.println("woopsy");
p.destroy();
return false;
}
return true;
 }// End function executeCMD
} // End class WrapperExe 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T19:25:32.870

I would recommend to look into ffmpeg and merge them trough command line with the required arguments needed for merging the video and audio files. You can use java Process to execute native processes.

*   [http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html)
*   [http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec(java.lang.String](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec(java.lang.String))
*   [http://www.linglom.com/2007/06/06/how-to-run-command-line-or-execute-external-application-from-java/](http://www.linglom.com/2007/06/06/how-to-run-command-line-or-execute-external-application-from-java/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T01:05:19.377

根据格式的不同，您可以使用 JMF，即 Java 媒体框架，它是古老的并且从来没有那么好，但对于您的目的来说可能已经足够好了。

如果它不支持您的格式，您可以使用 FFMPEG 包装器，如果我没记错的话，它提供 JMF 接口但使用 FFMPEG： http: [//fmj-sf.net/ffmpeg-java/getting_started.php](http://fmj-sf.net/ffmpeg-java/getting_started.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-01T23:57:34.413

正如其他答案已经建议的那样， ffmeg 似乎确实是这里最好的解决方案。

这是我最终得到的代码：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.nio.file.Paths;
import java.util.Arrays; 
```

* * *

```
public static File mergeAudioToVideo(
        File ffmpegExecutable,  // ffmpeg/bin/ffmpeg.exe
        File audioFile,
        File videoFile,
        File outputDir,
        String outFileName) throws IOException, InterruptedException {

    for (File f : Arrays.asList(ffmpegExecutable, audioFile, videoFile, outputDir)) {
        if (! f.exists()) {
            throw new FileNotFoundException(f.getAbsolutePath());
        }
    }

    File mergedFile = Paths.get(outputDir.getAbsolutePath(), outFileName).toFile();
    if (mergedFile.exists()) {
        mergedFile.delete();
    }

    ProcessBuilder pb = new ProcessBuilder(
            ffmpegExecutable.getAbsolutePath(),
            "-i",
            audioFile.getAbsolutePath(),
            "-i",
            videoFile.getAbsolutePath() ,
            "-acodec",
            "copy",
            "-vcodec",
            "copy",
            mergedFile.getAbsolutePath()
    );
    pb.redirectErrorStream(true);
    Process process = pb.start();
    process.waitFor();

    if (!mergedFile.exists()) {
        return null;
    }
    return mergedFile;
} 
```

# javascript - 根据文本框中值的大小将按钮绑定到多个激活的文本框

> ID：11811184
> 
> 赞同：1
> 
> 时间：2012-08-04T18:48:51.640
> 
> 标签：javascript, html, data-binding, button, textbox

我正在建立一个网站，人们可以在其中定制产品的形状，然后再订购。

最终会有几个按钮绑定到四个文本框。当用户在文本框中输入更高的值时，被激活的按钮会发生变化，因此我们知道需要为该客户的设计订购什么尺寸的材料。

如何根据放置在文本框中的值创建启用/禁用的按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:01:31.597

你可以使用 jQuery 并尝试这样的事情：

首先，给你的按钮一个属性`disabled="disabled"`，然后：

```
//Assuming they are typing, if it's a dropdown/select, see below

$('#input-id').on('keyup', function() {
    if($(this).val() >= 10 && $(this).val() <= 20) { // If the value is between 10 and 20...
      $('#button-id').removeAttr('disabled'); // Remove disabled attribute
    } else { // If the value is not our keyword...
      if(!$('#button-id').attr('disabled')) { // And the button is not disabled...
        $('#button-id').attr('disabled', 'disabled'); // Readd disabled attribute
      }
    }
}); 
```

如果您使用的是下拉菜单或选择框，请使用`$("select option:selected")`.

# c#-4.0 - 任务工厂 StartNew Generic

> ID：11811188
> 
> 赞同：2
> 
> 时间：2012-08-04T18:49:12.550
> 
> 标签：c#-4.0, generics, task-parallel-library

有一种`Task.Factory.StartNew(Action<Object> action, Object state)`方法。这看起来很一般。但是，如果我的“行动”是

```
protected void Edit(MyType myType) { } 
```

为什么我不能

```
MyType x = something;
Task.Factory.StartNew(Edit, x); 
```

我得到：

> 参数 1：无法从“方法组”转换为“System.Action”

我可以通过添加另一种方法来使其工作，

```
protected void Edit(object myType) { Edit((MyType)myType); } 
```

或者我可以写

```
Task.Factory.StartNew(() => Edit(x)); 
```

但我觉得我错过了一些应该让我以第一种方式做到的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:22:18.913

方法组`Edit`不可转换为`Action<object>`. 你可以做

```
Action<MyType> act = Edit; 
```

`Action<MyType>`但是和之间没有转换`Action<object>`。如果有你可以做

```
Action<object> act = Edit;
act("abc"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-04T19:44:52.637

Task.Factory.StartNew 的方法签名要求单参数 Action<>，因此只需创建一个 Action<> 实例并在您的调用中使用它：

```
protected void Edit( Object myType ){ ... }

MyType x = something;
Action<Object> action = new Action<Object>(Edit);
Task.Factory.StartNew( action, x ); 
```

或者

```
Task.Factory.StartNew(new Action<Object>(Edit), x); 
```

您也可以使用 lambdas 内联它（您已注意到）：

```
Task.Factory.StartNew( () => Edit(x) ); 
```

# python - 如何从多个相等长度的数组中删除相同的随机项？

> ID：11811190
> 
> 赞同：2
> 
> 时间：2012-08-04T18:49:44.473
> 
> 标签：python, arrays, numpy, python-2.7

我有几个大小不同的数组（20000,1）。我想随机删除每个数组所有行的 25%，这样每个数组都会删除同一行。我发现一种相当乏味的方法如下：

```
import numpy as np

a=np.array(range(1000))
b=np.array(np.random.rand(1000))
seed=np.random.randint(0,100000000)     #picking a random seed
np.random.seed(seed)      #Setting the same seed for each deletion
a[np.random.rand(*a.shape) < .25] = 0
np.random.seed(seed)
b[np.random.rand(*b.shape) < .25] = 0
a=a[a !=0]
b=b[b !=0] 
```

这种方法有几个问题，例如如果数组已经包含零怎么办？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T19:37:24.557

基于并扩展自 Joel Cornett 的解决方案：

```
import numpy as np

length = 20000
limit = int(0.75*length)
keep = np.random.permutation(length)[:limit]

newArray = oldArray[keep] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T19:20:28.870

Here is a non-numpy solution in very general terms:

```
import random
to_keep = set(random.sample(range(total_rows), keep_ratio * total_rows))

#do this for each array:
new_array = np.array(item for index, item in enumerate(old_array) if index in to_keep) 
```

*   `total_rows` is the number of rows in each array (I think you said this was 20,000)

*   `keep_ratio` is the percentage of rows to keep, which according to you is `1 - 0.25 = 0.75`

**EDIT**

You can also use numpy's `compress()` method.

```
import random
to_keep = set(random.sample(range(total_rows), keep_ratio * total_rows))
kompressor = (1 if i in to_keep else 0 for i in xrange(total_rows))

new_array = numpy.compress(kompressor, old_array, axis=1)
kompressor 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T20:16:37.393

类似于 Theodros 的答案，但保留了元素的原始顺序：

```
import numpy as np

mask = np.ones(len(a), dtype=bool)
mask[:len(a)/4] = 0
np.random.shuffle(mask)

a = a[mask]
b = b[mask] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T19:41:18.723

我不知道它与 . 一起使用的效果如何`numpy`，但这是我在纯 Python 中使用的：

```
total = len(a)
toss = int(0.25 * total)
keeping = [False] * toss + [True] * (total - toss)
random.shuffle(keeping)
a = [value for value, flag in zip(a, keeping) if flag]
b = [value for value, flag in zip(b, keeping) if flag] 
```

# c# - 在c#中将值从一种形式传递到另一种形式

> ID：11811196
> 
> 赞同：1
> 
> 时间：2012-08-04T18:50:18.707
> 
> 标签：c#, winforms

我必须`id`在 C# 中从一种形式传递到另一种形式。

我无法做到这一点。

C#代码是：

```
private void btnedit_Click(object sender, EventArgs e)
{
    foreach (DataGridViewRow a in dataGridViewUnPaidList.Rows) 
    {
        if (a.Cells[0].Value != null)
        {
            Convert.ToInt64(a.Cells[1].Value); // i have to pass this id in AddInvoice() form
            AddInvoice ad = new AddInvoice();
            ad.Show();
            NonPaideData non = new NonPaideData();
            non.Hide();
        }
        else
        {
        MessageBox.Show("Now Row Is Selected");
        }
    }
} 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T18:53:07.823

在 中创建一个属性`AddInvoice`：

```
public long CellValue { get; set } 
```

分配给它：

```
private void btnedit_Click(object sender, EventArgs e)
{
    foreach (DataGridViewRow a in dataGridViewUnPaidList.Rows)
    {
        if (a.Cells[0].Value != null)
        {
            AddInvoice ad = new AddInvoice();
            ad.CellValue = Convert.ToInt64(a.Cells[1].Value);
            ad.Show();

            NonPaideData non = new NonPaideData();
            non.Hide();
        }
        else
        {
            MessageBox.Show("Now Row Is Selected");
        }
    } 
```

并且只是在`AddInvoice`as中使用它`CellValue`。

哦，如果这实际上是代码，我认为您的意思可能`this.Hide();`不是创建一个新的`NonPaideData`并隐藏它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T19:39:08.847

在 Form1 中

```
private void ShowForm2()
{
    string value = TheTextBox.Text;
    Form2 newForm = new Form2();
    newForm.TheValue = value;
    newForm.ShowDialog();
} 
```

在 Form2 中

```
private string _theValue;
public string TheValue 
{ 
    get
    {
        return _theValue;
    }
    set
    {
        _theValue = value; 
        // do something with _theValue so that it
        // appears in the UI

    }
} 
```

请参阅此代码，我认为这将对您有所帮助。

# tsql - T SQL 关于分组的查询

> ID：11811197
> 
> 赞同：0
> 
> 时间：2012-08-04T18:50:29.170
> 
> 标签：tsql

第一张图片是我的查询输出。现在我想对主题进行分组，使其变得像第二张图像。可能吗？谢谢您的帮助。

`select Subject, Grade, case when Grade >= 50 Then '1' else '0' end as Pass, case when Grade < 50 Then '1' else '0' end as Fail from Grade_report`

输出：

![在此处输入图像描述](../Images/1e564210e67ee783cd2bff23fbaf4957.png)

我想要的是：

![在此处输入图像描述](../Images/0dc06092a11474e426d19fa603a35d61.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:55:24.693

您的规格不是很准确；您希望合并记录的分数是多少，应该只写 1 或 0 还是汇总通过和失败列的总和？

以下将生成您的输出，它需要`MAX`成绩和`SUM`通过/失败信息：

```
WITH GradePassFail AS (
    SELECT 
        Subject, 
        Grade, 
        CASE WHEN Grade >= 50 THEN 1 ELSE 0 END AS Pass, 
        CASE WHEN Grade < 50 THEN 1 ELSE 0 END AS Fail 
    FROM Grade_report
)
SELECT Subject, MAX(Grade) AS Grade, SUM(Pass) AS Pass, SUM(Fail) AS Fail
FROM GradePassFail
GROUP BY Subject 
```

# google-chrome - 背景大小：封面突然停止在谷歌浏览器中工作？

> ID：11811203
> 
> 赞同：29
> 
> 时间：2012-08-04T18:52:04.717
> 
> 标签：google-chrome, css, cover

还有其他人有这个问题吗？我以创建网站为生，有些网站使用 css 属性`background-size: cover`。突然之间，大约 1 周前，所有具有此属性的网站都不再显示在 Google Chrome 中。（所有其他浏览器都可以正常工作。）还有其他人遇到过这种情况吗？它只是我的谷歌浏览器还是有什么改变？因为直到大约一周前背景才能正常显示，而我没有*更改*任何内容。他们只是停止正常显示，似乎无处不在......

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-02-04T19:54:59.097

最佳实践：始终先设置背景图像，然后设置背景大小。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-10T13:06:19.907

您只需要使用 !important ：

```
background-size: cover !important; 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-02-21T04:07:45.363

我也刚刚在 Chrome 中遇到了这个问题。

以上答案都不适合我。具体来说，我试图将`<body>`元素背景设置为`background-size: cover`. 但是，背景图像永远不会垂直延伸以填充页面。

经过反复试验，我发现将`<html>`元素宽度和高度设置为 100% 可以解决 Chrome 中的问题。（对于它的价值，改变`<body>`元素的宽度和高度似乎没有效果。）

在我的 css 中，我有以下规则来解决这个问题：

```
html {
  width: 100%;
  height: 100%;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T21:21:26.613

你必须为谷歌浏览器做 CSS hack。

```
Use body:nth-of-type(1) .elementOrClassName{property:value;} 
```

仅适用于谷歌浏览器。

对于你的情况，

```
nth-of-type(1) .elementOrClassName{background-size:80px 60px;} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-06T16:32:49.927

我突然遇到了同样的问题，不仅是 GC，还有 FF 和 Opera。我正在使用 php 函数为我的背景提取随机图像，这就是我所拥有的......

CSS：

```
.main-slideshow .video img  {   
  cursor:pointer;
  width:550px !important;       
  height:340px !important;   
  background-repeat: no-repeat; 
  -moz-background-size:cover;
  -webkit-background-size: cover; 
  -o-background-size: cover;
  background-size: cover;   } 
```

和 HTML/PHP：

```
$result .='<img alt="" style="background:url('.$thumbnail.')" src="/images/play1.png" /> '; 
```

它工作了几天，突然`background-repeat`停止`background-size`工作。所以今天早上我发现以下更改对于 GC (v21)、FF (v14)、Opera (v12) 和 Safari (v5.1.7) 非常有效……尽管 IE 仍然没有运气:(

CSS：

```
.main-slideshow .video img  {   
  cursor:pointer;
  width:550px !important;       
  height:340px !important;   
  -moz-background-size:cover;
  -webkit-background-size: cover; 
  -o-background-size: cover;
  background-size: cover;   } 
```

HTML/PHP：

```
 $result .='<img alt="" style="background-image:url('.$thumbnail.')" style="background-repeat: no-repeat" style="background-size:cover" src="/images/play1.png" />'; 
```

可能是一个糟糕的解决方案，但它对我有用（到目前为止）希望这对某人有帮助:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-06T15:26:47.073

**以下是该问题的解决方案，但并不适合所有人。我估计这个解决方案将帮助少数遇到作者问题的人。**

如果与背景图像相比，垂直容器太小，则 background-size 选项可能会停止在 chrome 中工作。

我的情况是，我必须将大背景图像的一小部分放在一个 7 像素高的 div 上。

在 Chrome 调试器中，将 div 高度更改为 9 像素会将背景大小“对齐”到位。

我的最终解决方案是重组我的 div，这样我就不会遇到这个问题。

要查看此解决方案是否对您有帮助，请在 Chrome 调试器中放大您的 div。如果在某个时候背景大小突然到位，那么您就知道这是问题所在。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-17T17:38:54.627

老问题，但有类似的问题，结果我需要添加`&nbsp;`到我申请的空 div`background-size: cover`中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-04T19:51:42.910

试试这个背景大小：包含；

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-23T06:52:39.583

对我来说，以下适用于 Chrome、IE 8、IE 9：

```
.itemFullBg{
background:url('image/path/name.png') no-repeat;

-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;
background-size:100% 100%;      
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader
    (src='image/path/name.png',sizingMethod='scale');
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-09T16:50:44.277

您可以通过设置标签的高度来解决此问题。例如，如果您有一个具有背景图像的页面，请在 CSS 中设置 html 和 body 标签的高度，如下所示：

```
html { height:100%;  min-height:100%;  } body{  min-height:100%;  } 
```

希望这可以帮助

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2013-04-04T13:13:44.930

而不是使用：

```
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover; 
```

采用：

```
-webkit-background-size: 100% 100%;
-moz-background-size: 100% 100%;
-o-background-size: 100% 100%;
background-size: 100% 100%; 
```

# php - 循环通过复选框 PHP

> ID：11811204
> 
> 赞同：-1
> 
> 时间：2012-08-04T18:52:08.953
> 
> 标签：php, loops, checkbox

我想插入一个复选框是否选择到 MySQL 中，只需将 1 或 0 添加到对应于该值的列。我遇到了 0 的问题，详情如下。

这是复选框的示例

```
<input type='checkbox' name='class[]' value='mathhl' id="mathhl"> 
```

为简单起见，我添加了这个

```
$classes = $_POST["class"]; 
```

这是用于检查复选框值的 foreach 循环。

```
foreach($classes as $value) {
    if (!isset($value)) {
        $value = 0;
    }
    else {
        $value = 1;
    }
    echo $value;
} 
```

由于某种原因，它只返回 1，而不返回 0！我是PHP新手，所以我想知道我到底哪里出错了，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T18:54:23.197

只有选中的复选框才会发送到服务器。因此，如果数组中不存在该值，那是因为未选中该框。

您可以通过将值作为数组中的键来简化逻辑：

```
<input type='checkbox' name='class[mathhl]' value='1' id="mathhl"> 
```

现在，您不必遍历`$_POST['class']`. 相反，您可以获取所有键的数组（您应该已经知道）：

```
$keys = array( 'mathh1', 'mathh2', 'mathh3'); 
```

并形成一个具有默认值的数组（比如 0）：

```
$defaults = array_combine( $keys, array_fill( 0, count( $keys), 0)); 
```

并将`$_POST`数组与默认数组合并：

```
$results = array_merge( $defaults, $_POST['class']); 
```

现在，`$results`将包含一个关联数组，键是列，值是 1 或 0，具体取决于复选框是否被选中。小心，因为有人可以发布他们想要的数据`$_POST`，所以它可能不仅仅是 1 和 0。

# java - 您是否监控您的应用程序？

> ID：11811205
> 
> 赞同：2
> 
> 时间：2012-08-04T18:52:15.693
> 
> 标签：java, algorithm, jakarta-ee, memory-management, monitoring

据[孙](http://docs.oracle.com/javase/6/docs/api/java/lang/Error.html)：

> Error 是 Throwable 的子类，表示合理的应用程序不应**尝试**捕获 的严重问题

我不同意这个建议，因为可能会捕获错误并且应用程序可以继续（我的意思不是让抛出`Error`live 的线程。那个线程已经死了；其余的应用程序仍然存在）。这样的错误是 OutOfMemory。
认为这是正确的（如果您认为我在这里错了，我很乐意在这里提出论点）我想知道您是否尝试在应用程序中实现某种监视代码。
举一个具体的例子：我正在考虑在现有应用程序中放置一个小类，该类从日志中检测各种错误（例如 OOM）并创建某种健康统计信息，以便在出现问题时重新启动 JVM。
例如，如果检测到过多的 OutOfMemoryErrors，则重新启动 JVM。太多可能是某种门槛。老实说，我不知道如何计算这个阈值。也许与其他错误类似。
我想知道这样的机制有用吗？你做过类似的事情吗？如果是，您有什么建议或示例代码吗？还是我走错了路，应该以其他方式思考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:05:44.323

通常，一旦你点击 OutOfMemory，你就会被搞砸了——JVM（这可能有点不准确，从内存中）在它已经运行完整的 GC 并且无法释放足够的内存之前不会抛出这个。

我能想到的最接近您正在寻找的东西是使用 [-XX:printGC 和 -XX:printGCdetails](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html#DebuggingOptions)输出 GC 活动并从外部脚本触发重置。

但是，如果您的应用程序经常耗尽内存，则可能表明您应该修复一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:01:46.573

这样的东西可能有用，但我自己没有使用过。我尝试做的一件事是避免根据客户的要求分配内存。

想想像 HTTP 分块编码的处理器。每个块都以长度为前缀。您可以分配该长度的缓冲区，然后将数据读入其中，这实际上是大多数服务器所做的，因为它既快速又简单。

但我更喜欢使用 a 之类的东西`ByteArrayOutputStream`，它可以根据需要增长。当我开始解析时，我将输入流包装在一个长度限制的装饰器中，如果读取的数据总量过大，它会抛出异常。

该限制可以为应用程序配置。因此，例如，如果我正在处理表单，我可能会将输入限制为几千字节。如果我支持图片上传，可能只有几兆字节。但是，如果某个小丑声称要发送数 GB 的块，我不希望我的服务器盲目地尝试为其分配缓冲区。

# redirect - DNS 重定向到另一个网站

> ID：11811209
> 
> 赞同：0
> 
> 时间：2012-08-04T18:52:58.890
> 
> 标签：redirect, dns, web-hosting

我拥有一个网站（A）并在网络域中使用博客平台。上个月的博客被删除，我无法将它（A）重定向到另一个新博客。因为它是（A）域（无托管），我可以将该域（A）重定向到我的另一个网站（B），其中包含托管（B）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:58:16.667

您可以将您的域（网站 A）的 DNS 设置更改为指向网站 B 的服务器的 IP 地址，或者也可以简单地使用指向网站 B 的 FQDN 的 CNAME 记录，例如：www.websiteA。 com CNAME www.websiteB.com。

您的主机可能需要进一步配置，以便他们知道从请求到 websiteA.com 为您的网站提供服务。

注意：这将继续在您的浏览器中显示为 www.websiteA.com/page，而不是真正重定向到 www.websiteB.com/page。

# mysql - MySQL：对左连接中的子选择进行故障排除

> ID：11811214
> 
> 赞同：0
> 
> 时间：2012-08-04T18:53:56.033
> 
> 标签：mysql, subquery, left-join

这可能是非常基本的，但我对子选择完全没有经验。

我有两张桌子：`prm_album`和`gallery_meta`。`prm_album`存储每个相册的名称和 ID，`gallery_meta`存储每个相册的每个图像的图像详细信息。因此，所涉及的列是：

```
prm_album：ID、名称
gallery_meta：文件名、专辑 ID、FileExt、IsDefault、已创建

```

我正在尝试结合两个查询 - 一个给了我专辑列表，另一个给了我每个专辑的缩略图信息。这次我想以一个数组结束，我可以在其中获取每个专辑的名称、ID，以及它的默认（或第一张）图像信息。

```
SELECT a.ID, a.Abbr, a.Name, p.FileName, p.FileExt 
FROM prm_album a
LEFT JOIN ( 
    SELECT FileName, FileExt
    FROM gallery_meta 
    ORDER BY (IsDefault = 1) DESC, Created ASC
    LIMIT 0,1 ) AS p
ON (a.ID = p.AlbumID)
WHERE 1 
```

当通过控制台时，这会引发错误`Unknown column 'p.AlbumID' in 'on clause'`。所有建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T19:03:34.433

在您的查询中，它找不到 p.AlbumID 因为您没有在子查询中选择它。但是，如果每张专辑只有`IsDefault`一张：

```
SELECT a.ID, a.Abbr, a.Name, p.FileName, p.FileExt 
FROM prm_album a
LEFT JOIN
gallery_meta p ON (a.ID = p.AlbumID AND p.IsDefault = 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T19:01:02.417

```
SELECT a.ID, a.Abbr, a.Name, p.FileName, p.FileExt 
FROM prm_album a
LEFT JOIN gallery_meta p
  ON p.AlbumID=a.ID
GROUP BY a.ID
ORDER BY p.IsDefault DESC, p.Created ASC 
```

# c# - 使用 nuget 安装 Web 帮助程序库

> ID：11811227
> 
> 赞同：1
> 
> 时间：2012-08-04T18:56:14.867
> 
> 标签：c#, model-view-controller, asp.net-mvc-4, nuget, helper

如果我创建一个新项目并将其安装在该项目上，它工作正常，但是对我正在处理的项目执行此操作会出现此错误：

我已尝试替换所有 dll 文件、packages.xml、web.config。使用我安装 web 帮助程序之前的文件，但问题仍然存在。

现在显示错误的这行代码（第 50 行）完全相同，并且在安装之前运行良好。

```
Server Error in '/' Application.

Configuration Error

Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: The connection name 'DefaultConnection' was not found in the applications configuration or the connection string is empty.

Source Error: 

Line 48:     <membership defaultProvider="DefaultMembershipProvider">
Line 49:       <providers>
Line 50:         <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
Line 51:       </providers>
Line 52:     </membership>

Source File: C:\Users\BJARKE\Desktop\OlabsRepositories\iconbench\IconBench\web.config    Line: 50 

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.17626 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:52:06.660

不确定这是否能解决您的问题，但我遇到了同样的问题，我修复了它，将这两行添加到 web.config 下的 appsettings

```
<add key="enableSimpleMembership" value="false"/>
<add key="autoFormsAuthentication" value="false"/> 
```

祝你好运马特奥

# android - 自定义选项卡样式 (xml) 在 Android 选项卡中不起作用 (Appcelerator)

> ID：11811229
> 
> 赞同：0
> 
> 时间：2012-08-04T18:57:51.027
> 
> 标签：android, titanium, appcelerator, titanium-mobile, appcelerator-mobile

我想更改 Android 选项卡的默认背景颜色。我正在使用 Appcelerator 框架创建应用程序。但是更改选项卡样式仍然需要我创建 xml 文件。因此，原生 Android 开发人员可能也可以帮助我。

无论如何，我创建了以下 xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="0dp"
        android:background="@drawable/tab_selector" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="0dp"
            android:layout_weight="1" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0" />
    </LinearLayout>
</TabHost> 
```

在那里我尝试在文件夹中指定一个`background`, refering to 。`tab_selector.xml``drawable`

我知道 xml 的一部分有效，因为它也将我的选项卡放在底部。

然后在`tab_selector.xml`我有：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true">
        <shape> 
            <gradient 
                android:endColor="#ffffff" 
                android:startColor="#AAAAAA" 
                android:angle="270" /> 
            <stroke 
                android:width="1px" 
                android:color="#000000" /> 
        </shape>
    </item>

    <item
        android:state_selected="false" 
        android:state_focused="false" 
        android:state_pressed="false">
        <shape> 
            <gradient 
                android:endColor="#ffffff" 
                android:startColor="#AAAAAA" 
                android:angle="270" /> 
            <stroke 
                android:width="1px" 
                android:color="#000000" /> 
        </shape>
    </item>

    <!-- and the other states. They are the same as the ones above -->
    ...
    ...
    ...

</selector> 
```

但是当我运行我的应用程序时，我仍然需要使用旧的原始标签样式。知道为什么我的标签样式没有应用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:40:42.957

嘿，你可以试试[这个](http://developer.appcelerator.com/question/135271/how-i-tabbar-position-set-in-bottom-in-android) ，我认为这对你很有用，干杯......！

# php - 使用 LIKE 语句执行时 PDO 的疯狂行为

> ID：11811230
> 
> 赞同：1
> 
> 时间：2012-08-04T18:58:14.937
> 
> 标签：php, mysql, pdo

我得到了类似的代码：

```
$stmt = $pdo->prepare('SELECT * FROM table WHERE user LIKE :user'); 
```

后来我得到了

```
$stmt->bindValue(':user', '%'.$user.'%', PDO::PARAM_STR);
$stmt->execute(); 
```

它不起作用。我很确定这是用 MySQL 执行 LIKE 语句的正确方法，但是当我输入用户名的某些部分时它不起作用，但是当我输入完整的用户名时它就像一个魅力。任何想法为什么 LIKE 语句不想做一个简单的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:29:43.390

我在自己的代码中用于 LIKE 查询的是：

```
$stmt = $pdo->prepare('SELECT * FROM table WHERE user LIKE CONCAT(\'%\', :user, \'%\')');

$stmt->bindValue(':user', $user, PDO::PARAM_STR);
$stmt->execute(); 
```

`CONCAT`在 $user 变量被 PDO 转义后，使用强制 MySQL 生成比较字符串。

# java - 请求被拒绝，因为没有找到多部分边界

> ID：11811232
> 
> 赞同：4
> 
> 时间：2012-08-04T18:58:30.967
> 
> 标签：java, javascript, jakarta-ee, jquery

我在包含一些输入元素的灯箱中使用表单。

```
<form name="imageUploadForm" action="uploadImage.do" method="post" enctype="multipart/form-data">
<input type="text"  id="id" name="id" style="display: none;" value="">
    <div id="fileUploaderDiv">
         <input type='file' name="file0" id ="file0"  />
    </div>
<input type="submit" value="Submit">
</form> 
```

当我提交表单时，表单会重定向到它的操作位置。我只想提交表单而不重定向用户，所以用户留在灯箱上而不会丢失他的数据。

我已经为此尝试过 jquery ajax 调用

```
var data = new FormData();
var $inputs = $('#imageUploadForm :input');
var values = {};
    $inputs.each(function() {
                values[this.name] = $(this).val();
                data.append(this.name, $(this).val());
            });
$.ajax({
                url: 'uploadImage.do',
                data: data,
                cache: false,
                contentType: 'multipart/form-data',
                processData: false,
                type: 'POST',
                success: function(data){
                   alert(data);
                }
            }); 
```

但是在我的 FileUploader servlet 中的服务器端出现错误。

```
The request was rejected because no multipart boundary was found 
```

谁能告诉我我在这缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:23:01.467

您需要防止提交表单的默认操作：

```
$('form[name="imageUploadForm"]').on('submit', function(e) {
     e.preventDefault();
     $.ajax({
            type: 'POST',
            url: 'uploadImage.do',
            data: data,
            cache: false,
            contentType: false,
            processData: false,
            success: function(data){
               alert(data);
            }
     });
}); 
```

我相信你应该在使用 FormData 类时将 contentType 选项设置为 false，强制 jQuery 不添加 Content-Type 标头，否则会丢失边界字符串，这可能是你的服务器错误的原因。

您还必须将 processData 标志设置为 false，否则，jQuery 将尝试将您的 FormData 转换为字符串，这将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T19:09:15.543

这是使用 jquery Ajax 提交表单的最简单形式。我没有对此进行测试，但它应该可以工作:-)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Test form</title>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
        $('#sbmt').click(function(){
            var text1 = $('#text1').val();
            var text2 = $('#text2').val();
            /// validation of inputs
            ///then
            $.ajax(
            {
                url :'submit.php',
                type : 'post',
                        data :  {'text1' : text1, 'text2' : text2 },
                success: function(data){
                        alert("form submitted . response is :"+ data);
                    }
            }
            ).fail(function(){alert("Failed!!");});
            });
        });
    </script>
</head>
<body>
    <form id="myform">
        <input type="text" id="text1" />
        <input type="text" id="text2" />
        <input type="button" id="sbmt"  value="submit"/>
    </form>
</body>
</html> 
```

# build - Autotools 命名错误

> ID：11811233
> 
> 赞同：2
> 
> 时间：2012-08-04T18:58:42.370
> 
> 标签：build, crash, gnu, autoconf

我有以下内容`configure.ac`：

```
AC_PREREQ([2.69])
AC_INIT([FULL-PACKAGE-NAME], [VERSION], [BUG-REPORT-ADDRESS])
AC_PROG_CXX
AC_OUTPUT 
```

它会生成配置，其中包含以下几行：( `grep core configure`)

```
1572:  rm -f core *.core core.conftest.* &&
2143:rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
2210:rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
2212:rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
2214:rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext 
```

乐趣始于我有一个文件夹，名为`core`. 所以`./configure`产量

```
checking for g++... g++
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... rm: cannot remove 'core': Is a directory
yes
checking whether g++ accepts -g... rm: cannot remove 'core': Is a directory
yes
configure: creating ./config.status
rm: cannot remove 'core': Is a directory 
```

我在 google 中发现，它是在编译器崩溃的情况下完成的。但是禁用此检查是否有任何好方法（我真的不关心可以在 autoconf 测试中进行核心转储的编译器）。重命名文件夹不是我想要做的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:49:06.077

> 但是有什么好方法可以禁用此检查

不，没有。

> 重命名文件夹不是我想要做的。

在这种情况下，我建议在 autoconf 'bootstrap.sh' 脚本中的某个地方或任何运行之后修补'configure' `autoreconf`：

```
#!/bin/sh
autoreconf -fvi # or whatever autoreconf needs
sed -i 's/rm -f core/rm -f/g' configure 
```

请注意，这`sed -i`不是一个通用的解决方案，因为它依赖于 GNU sed，但想出一个可移植的解决方案并不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-26T15:34:06.597

如问题所示，大多数项目都有一个`configure.ac`包含生成`configure`脚本规则的文件。最后一行几乎总是`AC_OUTPUT`（就像你的情况一样）。您可以在该行之后添加它（通常作为文件的最后）来操作生成的配置文件并清除有问题的命令：

```
m4_esyscmd_s([test -f configure && sed -i -e '/rm -f/s/ core / /' configure]) 
```

# mysql - 将具有 2 个结果的 2 个选择查询加入到一个具有一个结果的查询中？

> ID：11811235
> 
> 赞同：0
> 
> 时间：2012-08-04T18:59:15.660
> 
> 标签：mysql, sql, database, join

我试图完成的是我想从 tableA 中选择一行，从 tableB 中选择一行并组合结果（列名不同）。

tableA的布局是这样的：

```
+----------------------------+--------------+------+-----+---------------------+----------------+
| Field                      | Type         | Null | Key | Default             | Extra          |
+----------------------------+--------------+------+-----+---------------------+----------------+
| user_id                    | int(11)      | NO   | PRI | NULL                | auto_increment |
| nickname                   | varchar(32)  | NO   |     | NULL                |                |
| password                   | varchar(129) | NO   |     | NULL                |                |
| mafia_id                   | int(11)      | NO   |     | 0                   |                |
+----------------------------+--------------+------+-----+---------------------+----------------+ 
```

和表B这个：

```
+-------------+-------------+------+-----+---------+----------------+
| Field       | Type        | Null | Key | Default | Extra          |
+-------------+-------------+------+-----+---------+----------------+
| mafia_id    | int(11)     | NO   | PRI | NULL    | auto_increment |
| mafia_name  | varchar(32) | NO   |     |         |                |
| mafia_tag   | varchar(5)  | NO   |     |         |                |
| mafia_color | int(11)     | NO   |     | 0       |                |
| mafia_car   | int(11)     | NO   |     | 0       |                |
| mafia_base  | int(11)     | NO   |     | 0       |                |
+-------------+-------------+------+-----+---------+----------------+ 
```

我试过这样的查询：

```
SELECT *
FROM users

WHERE users.nickname = 'Gamer_Z'

UNION

SELECT * FROM mafia
WHERE mafia.mafia_id = (
    SELECT users.mafia_id
    FROM users
    WHERE users.nickname = 'Gamer_Z'
); 
```

和这个：

```
SELECT *
FROM users
WHERE nickname = 'Gamer_Z'
INNER JOIN mafia ON mafia.mafia_id = users.mafia_id; 
```

但是这些查询给出了错误，我尝试了其他几个，但这些看起来，好，好吗？

我也读了这些问题：

[如何在 MySQL 中连接两个具有不同行数的表？](https://stackoverflow.com/questions/1792850/mysql-join-two-tables-with-different-number-of-rows-and-one-same-column-name)

[在 MySQL 中合并多个查询结果（按列）](https://stackoverflow.com/questions/2126692/combine-multiple-query-results-in-mysql-by-column)

但我似乎无法解决我的问题。

我想要的输出格式是这样的：

```
|users.user_id|users.nickname|users.password|users.mafia_id|mafia.mafia_name|mafia.mafia_tag|mafia.mafia_color|mafia.mafia_car|mafia.mafia_base| 
```

如何为我尝试在 MySQL(5) 中完成的任务构建正确的查询？提前致谢！

\编辑：：

* * *

我差点忘了一件事！如果 mafia_id 在 tableB 中不存在，那么仍然必须返回 tableA 行。（所以用户不是黑手党，我只是加载默认用户数据）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:02:20.283

您必须将`WHERE`条件放在 之后`JOIN`，而不是之前：

```
SELECT    *
FROM      users a
LEFT JOIN mafia b ON a.mafia_id = b.mafia_id
WHERE     a.nickname = 'Gamer_Z' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T19:04:28.067

加入是错误的

应该

SELECT * FROM users a JOIN mafia b ON a.mafia_id = b.mafia_id and a.nickname = 'Gamer_Z'

# python - 在 Python 中使用 xml.etree 解析 xml 代码时出错

> ID：11811237
> 
> 赞同：1
> 
> 时间：2012-08-04T18:59:36.493
> 
> 标签：python, lxml

我正在尝试学习运行 Python 2.7.2 的 XML 处理（使用 lxml）的基础知识。我创建了一个非常简单的起始文件，但它正在崩溃。代码是：

```
from lxml import etree

doc = etree.parse('/Desktop/plc_dmt.xml')

print doc 
```

我尝试了此代码的变体，使用不同的 xml 文件，并在执行 etree.parse() 方法之前先打开文件，但它们都会产生类似或相同的错误消息，如下所示：

```
Traceback (most recent call last):
  File "XMLparse_test.py", line 7, in <module>
    doc = etree.parse('/Users/Dad/Desktop/plc_dmt.xml')
  File "lxml.etree.pyx", line 2954, in lxml.etree.parse (src/lxml/lxml.etree.c:56220)
 ...   {Misc  error stuff}
 ... 
  lxml.etree.XMLSyntaxError: xmlParsePI : no target name, line 3, column 14 
```

我确认至少有一些 XML 文件格式正确，至少在它们在 Web 服务器上正确运行的情况下是这样。我不明白错误消息——它正在寻找的目标名称是什么？

这是输入的xml文件。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<response>
<heartbeat><?--#exec cmd_argument='printf( "0x%02X%02X", InReadUByte( 0 ), InReadUByte( 1 ))'-->    </heartbeat>

<dmt node="1">
    <address><?--#exec cmd_argument='printf( "0x%02X", InReadUByte( 20 ))'--></address>
    <status><?--#exec cmd_argument='printf( "0x%02X", InReadUByte( 21 ))'--></status>
    <realflow><?--#exec cmd_argument='printf( "%f", InReadFloat( 22 ))'--></realflow>
    <pressure><?--#exec cmd_argument='printf( "0x%02X%02X", InReadUByte( 26 ), InReadUByte( 27 ))'--></pressure>
    <temp><?--#exec cmd_argument='printf( "0x%02X%02X", InReadUByte( 28 ), InReadUByte( 29 ))'--></temp>
</dmt>
# Misc stuff pulled out to keep file shorter...
</response> 
```

许多嵌入式代码是此 Web 服务器的服务器端包含命令，它连接到某些工具。该文件在服务器上运行正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:51:03.733

您的 XML 无效，因为您的元素中有`<`和字符。`>`他们必须逃脱。

如果它们实际上应该是评论，那么它应该是：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<response>
<heartbeat><!--#exec cmd_argument='printf( "0x%02X%02X", InReadUByte( 0 ), InReadUByte( 1 ))'-->    </heartbeat>

<dmt node="1">
    <address><!--#exec cmd_argument='printf( "0x%02X", InReadUByte( 20 ))'--></address>
    <status><!--#exec cmd_argument='printf( "0x%02X", InReadUByte( 21 ))'--></status>
    <realflow><!--#exec cmd_argument='printf( "%f", InReadFloat( 22 ))'--></realflow>
    <pressure><!--#exec cmd_argument='printf( "0x%02X%02X", InReadUByte( 26 ), InReadUByte( 27 ))'--></pressure>
    <temp><!--#exec cmd_argument='printf( "0x%02X%02X", InReadUByte( 28 ), InReadUByte( 29 ))'--></temp>
</dmt>
</response> 
```

如果这实际上应该是文本，那么它们需要被转义，如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<response>
<heartbeat>&lt;?--#exec cmd_argument='printf( "0x%02X%02X", InReadUByte( 0 ), InReadUByte( 1 ))'--&gt;    </heartbeat>

<dmt node="1">
    <address>&lt;?--#exec cmd_argument='printf( "0x%02X", InReadUByte( 20 ))'--&gt;</address>
    <status>&lt;?--#exec cmd_argument='printf( "0x%02X", InReadUByte( 21 ))'--&gt;</status>
    <realflow>&lt;?--#exec cmd_argument='printf( "%f", InReadFloat( 22 ))'--&gt;</realflow>
    <pressure>&lt;?--#exec cmd_argument='printf( "0x%02X%02X", InReadUByte( 26 ), InReadUByte( 27 ))'--&gt;</pressure>
    <temp>&lt;?--#exec cmd_argument='printf( "0x%02X%02X", InReadUByte( 28 ), InReadUByte( 29 ))'--&gt;</temp>
</dmt>
</response> 
```

以上两份文件均有效。

# php - 仅重新校准混合关联和数字数组中的数字索引

> ID：11811241
> 
> 赞同：0
> 
> 时间：2012-08-04T19:00:23.327
> 
> 标签：php, mysql, arrays

在我的程序中，我向一个表发送一个 SQL 查询，它返回一个我使用该函数的资源`mysql_fetch_array()`。第一个参数是来自 SQL 查询的结果资源，但如果您不使用下一个参数，则默认返回一个包含关联索引 id 和数字 id 的数组。

这对我很有用，因为我正在使用这些结果来创建另一个查询，因此需要访问关联 ID 和数字 ID，因为我需要遍历这个涉及递增数字的数组。但是，我已经通过 PHP 函数删除了空值，现在我留下了一个不连续的数字条目。我知道我可以使用该`array_values()`函数重新校准我的 ID，但这会从数组中消除我的关联 ID。

**有没有办法只重新校准我的数字 ID 而不是删除关联 ID？**

例如

```
'id' = [0] = '0001'
'gender' = [1] = null
'religion' = [2] = 'jewish' 
```

我删除了空值，即性别：

```
'id' = [0] = '0001'
'religion' = [2] = 'jewish' 
```

现在我想将数字索引重新规范化为：

```
'id' = [0] = '0001'
'religion' = [1] = 'jewish' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:06:04.810

我没有验证这一点，但我认为这应该有效。如果不告诉我，我会删除我的答案。

```
$i=0;
foreach($array as $key=>$value) {
  $array2[$i] = $array2[$key] = $value;
  $i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T19:16:28.730

我认为没有内置函数，但是您可以遍历数组以获取数字索引值：

```
$data = array(
    'id'       => '0001',
    'gender'   => null,
    'religion' => 'jewish',
    0          => '0001',
    1          => null,
    2          => 'jewish',
);

$num_keys = array();
foreach ($data as $k => $v) {
    if ($v === null) {
        unset($data[$k]);
        continue;
    }
    if (is_numeric($k)) {
        $num_keys[$k] = $v;
        unset($data[$k]);
    }
}
ksort($num_keys);
$data = array_merge($data, array_values($num_keys));
var_dump($data); 
```

# amazon-ec2 - 亚马逊 aws ec2 免费套餐

> ID：11811242
> 
> 赞同：1
> 
> 时间：2012-08-04T19:00:25.653
> 
> 标签：amazon-ec2, amazon-web-services, cloud-hosting

我刚开始使用 AWS 免费套餐，我有以下问题：

“在所有 AWS 服务中聚合的 15 GB 输出带宽”。这是按月计算的吗？

我有一个 Windows AMI 正在运行。从我的家用计算机到 EC2 服务器的 RDP/远程处理是否会计入 OUT 带宽？

我在哪里可以查看综合带宽使用情况？我浏览了此链接[https://forums.aws.amazon.com/thread.jspa?messageID=278407](https://forums.aws.amazon.com/thread.jspa?messageID=278407)，但找不到选项“AWS 数据传输”部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T19:09:39.533

是的，它是[每月](http://aws.amazon.com/ec2/pricing/)。RDP 使用将同时使用输入和输出带宽，因为您发送输入（键盘、鼠标等），并且它（主要）发送屏幕更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T08:05:07.047

可以从链接查看聚合的带宽和使用情况报告

[https://portal.aws.amazon.com/gp/aws/developer/account?ie=UTF8&action=activity-summary](https://portal.aws.amazon.com/gp/aws/developer/account?ie=UTF8&action=activity-summary)

这是根据它在 aws 论坛链接中指定的方式。我附上截图以使其更清晰。如图所示展开绿色突出显示的部分以获取带宽使用详细信息。

![在此处输入图像描述](../Images/ce17f33720a61528eada47f20e714b05.png)

# ruby-on-rails - 用于在 Rails 中的嵌套模型中上传文件的表单

> ID：11811246
> 
> 赞同：1
> 
> 时间：2012-08-04T19:01:09.277
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, nested-forms, carrierwave, nested-attributes

我的目标是实现一个一对多 -> 一对多的结构，就像[这里的 rails api](http://guides.rubyonrails.org/association_basics.html)中描述的那样：

```
class Document < ActiveRecord::Base
  has_many :sections
  has_many :paragraphs, :through => :sections
end

class Section < ActiveRecord::Base
  belongs_to :document
  has_many :paragraphs
end

class Paragraph < ActiveRecord::Base
  belongs_to :section
end 
```

我试图让段落类通过carrierwave上传文件，如该主题[的railscast中所述，](http://railscasts.com/episodes/253-carrierwave-file-uploads)[在嵌套的AJAX表单中，我可以添加和删除部分和段落](http://railscasts.com/episodes/196-nested-model-form-revised)。

由于我将仅在完整文档中查看图片，因此我试图将代码保留在我的 Document 控制器中。所以，现在，控制器有：

```
 def show
    @document = Document.find_by_username(params[:documentname])
    @section = @document.sections
#   @paragraph = @section.paragraphs #DONT UNDERSTAND WHY UNCOMMENTING THIS DOESNT WORK.
  end 
```

我的文档和部分模型都有`accepts_nested_attributes_for`设置。但是，当我加载文档视图时，如果我取消注释`@paragraph`上述内容，我会收到一个错误，提示部分分配成功，但由于缺少方法，段落分配不成功：

```
NoMethodError in DocumentController#show
undefined method `paragraph' for #<ActiveRecord::Relation:0x007f9b6409c340> 
```

如果我将其注释掉，它似乎可以很好地加载部分分配。目前，我的部分和段落表完全空白，因为我无法设置表格，所以这可能是问题的一部分。但我认为 nil 会给我一个与没有方法不同的错误，对吧？所以，我怀疑引擎盖下已经有问题了。

*所以，我的主要困惑是：如何以及在哪里构造一个由我的文档控制器控制的表单来接受任何数据，然后尤其是使用载波文件上传？*

如果您对如何更好地构建它有任何其他建议，我将不胜感激。

另外，调试这个的好方法是什么？我似乎缺少一种方法，哪一种，在哪里？

我已经参考了这些，但无法找到解决方案：

*   [http://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)
*   [http://railscasts.com/episodes/253-carrierwave-file-uploads](http://railscasts.com/episodes/253-carrierwave-file-uploads)
*   [带有嵌套表单的载波上传？](https://stackoverflow.com/questions/5009550/carrierwave-upload-with-nested-forms)
*   [Rails 3 + JQuery-文件上传 + 嵌套模型](https://stackoverflow.com/questions/9357607/rails-3-jquery-file-upload-nested-model)
*   [Rails 3 和嵌套的 jQuery 文件上传模型](https://stackoverflow.com/questions/5533879/rails-3-and-a-nested-jquery-file-upload-model)

# 更新 1

我怀疑问题出在我的错误显示命令上？它不能将正确的部分多索引到正确的段落？所以，

```
 def show
    @document = Document.find_by_username(params[:documentname])
    @section = @document.sections
#   @paragraph = @section.paragraphs #DONT UNDERSTAND WHY UNCOMMENTING THIS DOESNT WORK.
  end 
```

应该更像：

```
 def show
    @document = Document.find_by_username(params[:documentname])
    @section = @document.sections
    @paragraph = @section.find(params[:section_id]).paragraphs
  end 
```

这不起作用，但类似的东西？有一种方法似乎没有将这些部分链接到各个段落。我得到的错误是：

```
ActiveRecord::RecordNotFound in DocumentController#show

Couldn't find Section without an ID 
```

# 更新 2

也许这意味着我应该望远镜所有的 show 命令？即，为正确的部分获取正确的段落将更像这样：

在文档控制器中：

```
def show
    @document = Document.find_by_username(params[:documentname])
    @section = @document.sections
end 
```

在部分控制器中：

```
def show
    @section = Section.find(params[:id])
    @paragraph = @section.pictures
end 
```

*那么，如果是这种情况，我该如何设置我的嵌套表单？要在 document#show 页面内的 railcasts 风格的 ajax 界面中共同创建 (1) 部分、(2) 段落和 (3) 图像？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:17:17.003

你有没有尝试过 ？

```
 @section = @document.sections.build
  @paragraph = @sections.paragraphs.build 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:52:01.877

我搜索的所有 SO 答案都不适合我，因为在上传时初始密钥不存在，因此无法链接到它。

所以，我的解决方案就是不要尝试这种设计。用更少的嵌套制作不同的表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T21:25:47.140

我在另一篇文章中写了一个巨大的答案，概述了我如何使用 Carrierwave、jQuery File Uploader 和嵌套模型在 Rails 中进行多文件上传。也许它会有所帮助？

[Rails 3 + JQuery-文件上传 + 嵌套模型](https://stackoverflow.com/questions/9357607/rails-3-jquery-file-upload-nested-model/17179188#17179188)

# google-app-engine - 如何刷新对持久管理器的更改

> ID：11811247
> 
> 赞同：0
> 
> 时间：2012-08-04T19:01:22.803
> 
> 标签：google-app-engine

该场景是一个更新实体，我在其中编写代码如下：

```
 try {
            pm = PMF.get().getPersistenceManager();
            BloodDonor bloodDonor = pm.getObjectById(BloodDonor.class,
                    bean.getBloodDonorSeq());
            bloodDonor.setFirstName(firstName);
finally {
            try {
                if (pm != null && pm.isClosed() == false)
                    pm.close();
            } catch (Exception e) {
                log.severe("Exception in finally of execute of updateDonor");
            }
            log.info("end of updateDonor");
        } 
```

因此，当它在下午结束时到达 finally 块时，更改将被写入数据存储区。我的问题是在某种情况下，我想在关闭 pm 之前回滚我在 try 块中所做的任何事情，那么该怎么做？换句话说，如果我想取消 try 块的效果，那么我如何通知 pm 清除所有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:42:32.163

您应该查看[事务](https://developers.google.com/appengine/docs/java/datastore/transactions)以完成您想要在此处执行的操作。

# haskell - 使用 UndecidableInstances 可以吗？备择方案？

> ID：11811251
> 
> 赞同：5
> 
> 时间：2012-08-04T19:02:37.413
> 
> 标签：haskell, types, ghc, type-families

我想在库中做一些魔术，允许多态地解构产品类型。这是一个或多或少的工作模型，说明了我想做的事情：

```
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies, FlexibleInstances, UndecidableInstances #-} 
newtype Wrapped a = Wrapped { unwrap :: a } 

-- our example structure
ex :: (Int, (Int, Int))
ex = (1,(2,3))

class WrapDecomp x y | y -> x where
    decomp :: x -> y

instance (WrapDecomp x x', WrapDecomp y y')=> WrapDecomp (x,y) (x',y') where
    decomp (x,y) = (decomp x, decomp y)

instance WrapDecomp x (Wrapped x) where
    decomp = Wrapped

example = let w = decomp ex
              (w0, w1) = decomp ex
              (w0', (w1', w2')) = decomp ex :: (Wrapped Int, (Wrapped Int, Wrapped Int))
           in print $ ( unwrap w, unwrap w0, unwrap $ snd w1, unwrap $ fst w1 )
         -- Also works:
         -- in print $ ( unwrap w, unwrap w0, unwrap w1 ) 
```

我的实际应用程序是一个库，并且将具有两个属性，使*我在上面注意到*的疣可以接受：

1.  `Wrapped`类型构造函数未导出

2.  用户将始终调用绑定中的`unwrap`所有`Wrapped`数据（因为我的应用程序的细节很无聊），所以在实践中不应该有歧义

共识似乎`UndecidableInstances`还不错，但我想在继续之前确定以上内容是否符合犹太教规。

* * *

## 更新/解决方案

我对此感到困惑，但我能够通过以下方式解决我的问题`TypeFamilies`：

```
{-# LANGUAGE TypeFamilies #-}
class Out a where
    type In a :: *
    decomp :: In a -> a

instance Out (Wrapped a) where
    type In (Wrapped a) = a
    decomp = Wrapped

instance (Out a, Out b)=> Out (a,b) where
    type In (a,b) = (In a,In b)
    decomp (x,y) = (decomp x, decomp y) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T20:20:28.347

`UndecidableInstances`单独使用通常是洁净的，`UndecidableInstances`它的作用是允许类型检查器在无法提前证明它会完成时尝试解析实例。如果是这样，则代码的安全性不亚于可以提前证明终止的情况。

但是，对于您的实例，您可以创建一种情况，其中类型检查器将使用导致约束的表达式循环`WrapDecomp x (x,y)`，例如

```
foo x = [fst $ decomp x, x] 
```

的使用`fst`要求对某些类型`decomp x`有类型，因此where是 的类型。在同一个列表中也需要有磁带，所以`(a,b)``a``b``instance WrapDecomp t (a,b)``t``x``x``a`

```
instance WrapDecomp a (a,b) 
```

第二个参数有一对的唯一实例是

```
instance (Wrapdecomp x x', WrapDecomp y y') => WrapDecomp (x,y) (x',y') 
```

因此`a = (x,y)`对于某些类型`x`和`y`约束`foo`成为

```
WrapDecomp (x,y) ((x,y),b) 
```

对实例说如果有实例就有这样的实例

```
WrapDecomp y b 
```

和

```
WrapDecomp x (x,y) 
```

这是我们开始使用的实例的确切形式。

# javascript - 如何在 Django 中设置 JavaScript 文件的内容类型

> ID：11811256
> 
> 赞同：7
> 
> 时间：2012-08-04T19:03:54.680
> 
> 标签：javascript, django, mime-types

我有一个 Django 应用程序，它需要几个 JavaScript 文件。

在 Chrome 中，我收到错误“资源解释为脚本，但使用 MIME 类型文本/html 传输”。

![在此处输入图像描述](../Images/094bd3f0f346b68fdd3a8220a1795f72.png)

AFAIK（见[2](https://stackoverflow.com/questions/3467404/chrome-says-resource-interpreted-as-script-but-transferred-with-mime-type-text)）为了解决这个问题，我需要配置 Django，以便 JavaScript 文件以内容类型“application/x-javascript”返回。

我怎样才能在 Django 中做到这一点？

**更新：**我遵循 Daniel Roseman 的建议并找到了以下解决方案。

1）修改urls.py：

```
urlpatterns = patterns('',
    ...
    url(r'.*\.js$', java_script),
    ...
) 
```

2）在views.py中添加以下函数：

```
def java_script(request):
    filename = request.path.strip("/")
    data = open(filename, "rb").read()
    return HttpResponse(data, mimetype="application/x-javascript") 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2018-12-29T06:59:31.927

我遇到了一个问题，Django 使用包含的服务器将 javascript 文件作为文本/纯文本提供，这与 ES6 模块不太兼容。我在[这里](https://stackoverflow.com/a/16355034/7612911)发现您可以通过在 settings.py 中添加以下行来更改文件扩展名关联：

```
#settings.py
if DEBUG:
    import mimetypes
    mimetypes.add_type("application/javascript", ".js", True) 
```

和 javascript 文件现在作为`application/javascript`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-04T20:02:28.243

我怀疑问题不是你想的那样。可能实际发生的是根本没有提供您的 JS 文件：相反，正在发送 Django 错误页面。你需要弄清楚为什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T19:35:36.797

既然这不会阻止浏览器正确解释脚本，为什么这是一个问题？ `runserver`仅用于开发（不是生产用途），因此不是完整的 Web 服务器。

您应该继续在开发中使用它，当您转移到生产环境时，请为静态文件适当地配置您的网络服务器。

但是，如果您***绝对必须***使用开发服务器来提供静态文件；看看[如何提供静态文件](https://docs.djangoproject.com/en/1.1/howto/static-files/#howto-static-files)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T05:22:19.497

对于 Django 在视图中使用请求上下文：

```
return render_to_response('success.html', {'object': varobject},context_instance=RequestContext(request)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-19T13:02:04.093

使用将以下代码放入主项目的 settings.py 来扩展 Alexandre 的答案。之后，您将需要清除浏览器缓存（您也可以通过打开隐身窗口进行测试）以显示调试面板。

```
if DEBUG:
    import mimetypes
    mimetypes.add_type("application/javascript", ".js", True) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-11T23:42:36.497

即使在我的 settings.py 中添加了@piephai 的解决方案后，我今天也遇到了这个错误。然后我注意到@Daniel Roseman 也做对了：我的导入路径错误，我必须将“.js”添加到所有路径中，例如：

`import {HttpTool} from "./requests";`变成了`import {HttpTool} from "./requests.js";`

在考虑如何生成静态文件的路由后才有意义。

# java - Drools 计划者用 NullpointerException 说“解决失败”

> ID：11811258
> 
> 赞同：0
> 
> 时间：2012-08-04T19:04:12.693
> 
> 标签：java, drools, drools-planner

我使用了 drools planner 的考试示例来创建自己的示例。我重命名了课程并删除了除一条之外的所有规则。应用程序启动，我可以加载我的 XML 文件。单击“解决”按钮时发生错误：

```
pool-2-thread-1] ERROR swingui.SolverAndPersistenceFrame - Solving failed.
java.lang.NullPointerException: null 
```

任何人都可以给我提示来解决这个问题吗？我不知道错误消息是什么意思。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:28:28.827

这是整个错误信息！

问题是 cloneSolution 方法。我忘记实现该方法。所以求解器找不到解决方案，因为它必须克隆我的对象。

对于每个人：不要忘记实现此方法并复制 score 属性。没有分数就不是真正的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:59:02.410

在 Planner 5.5.0.Beta1 的 SNAPSHOT 上，我在 cloneSolution 方法中添加了一个 NPE，并得到了这个堆栈跟踪：

```
2012-08-06 08:56:08,157 [AWT-EventQueue-0] INFO  Loaded: data/cloudbalancing/unsolved/cb-0100comp-0300proc.xml
2012-08-06 08:56:09,122 [pool-2-thread-1] ERROR Solving failed.
java.lang.NullPointerException: null
    at org.drools.planner.examples.cloudbalancing.domain.CloudBalance.cloneSolution(CloudBalance.java:92) ~[classes/:na]
    at org.drools.planner.examples.cloudbalancing.domain.CloudBalance.cloneSolution(CloudBalance.java:31) ~[classes/:na]
    at org.drools.planner.core.solver.DefaultSolverScope.setWorkingSolutionFromBestSolution(DefaultSolverScope.java:154) ~[classes/:na]
    at org.drools.planner.core.solver.DefaultSolver.solvingStarted(DefaultSolver.java:176) ~[classes/:na]
    at org.drools.planner.core.solver.DefaultSolver.solve(DefaultSolver.java:154) ~[classes/:na]
    at org.drools.planner.examples.common.business.SolutionBusiness.solve(SolutionBusiness.java:276) ~[classes/:na]
    at org.drools.planner.examples.common.swingui.SolverAndPersistenceFrame$SolveAction$1.run(SolverAndPersistenceFrame.java:252) ~[classes/:na]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) [na:1.6.0_26]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [na:1.6.0_26]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138) [na:1.6.0_26]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [na:1.6.0_26]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [na:1.6.0_26]
    at java.lang.Thread.run(Thread.java:662) [na:1.6.0_26] 
```

因此，stacktrace 吃代码必须在您的自定义 SolverAndPersistenceFrame 代码中（可能是从可能存在此类错误的旧版 Planner 复制而来）。

# xcode - 试图为我的自定义 Quartz Composer 插件找到捆绑包

> ID：11811262
> 
> 赞同：0
> 
> 时间：2012-08-04T19:05:07.550
> 
> 标签：xcode, nsbundle, quartz-composer

我正在编写自己的 Quartz Composer 插件，我想从我的 QC 插件包中加载 GLSL 着色器、纹理等。问题是我似乎正在获取我的加载应用程序（QC 运行时应用程序）捆绑包。我尝试遍历我的所有捆绑包，但这似乎也不起作用。

有什么简单的方法可以直接访问我的 QC 捆绑包吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:34:31.153

`[NSBundle mainBundle]`为您提供应用程序包，而不是插件包。

在插件的类中，您可以这样做来获取插件的包：

```
NSBundle *thisBundle = [NSBundle bundleForClass:[self class]]; 
```

# css - 使元素居中

> ID：11811265
> 
> 赞同：6
> 
> 时间：2012-08-04T19:05:24.823
> 
> 标签：css

 我的标题中有一个元素从 js 文件中获取数据。

我试图在我的页面中将该元素居中，但我所做的一切似乎都有效。

我试过 margin-left: auto 和 margin-right: auto 但仍然没有居中。

元素代码为：

```
<a href="http://[ip]/tunein/tranceilfm.pls" id="cc_strinfo_song_tranceilfm" class="cc_streaminfo" style="margin: 0px; display: block; ">Loading...</a> 
``` 

> [http://tranceil.fm](http://tranceil.fm)

（菜单下方框中的蓝色歌曲信息）

有什么想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-04T19:11:32.103

这应该这样做（`text-align: center`在父容器中使用的链接居中）：

```
<div style="margin: 0 auto; text-align: center">
    <a href="http://94.23.250.14:2199/tunein/tranceilfm.pls" 
    id="cc_strinfo_song_tranceilfm" class="cc_streaminfo" 
    style="margin: 0px; display:block;">Loading...</a>
</div> 
```

或者简单地添加`text-align: center`到元素本身：

```
 <a href="http://94.23.250.14:2199/tunein/tranceilfm.pls" 
    id="cc_strinfo_song_tranceilfm" class="cc_streaminfo" 
    style="margin: 0 auto; display:block; text-align: center">Loading...</a> 
```

```
<!-- text-align: center directly on element -->
<a href="http://94.23.250.14:2199/tunein/tranceilfm.pls" id="cc_strinfo_song_tranceilfm" class="cc_streaminfo" style="margin: 0 auto; display:block; text-align: center">Loading...</a>

<!-- text-align: center on parent container -->
<div style="margin: 0 auto; text-align: center">
  <a href="http://94.23.250.14:2199/tunein/tranceilfm.pls" id="cc_strinfo_song_tranceilfm" class="cc_streaminfo" style="margin: 0px; display:block;">Loading...</a>
</div>
```

**[小提琴](http://jsfiddle.net/a9pyj/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T19:13:11.263

尝试将 A 元素封装在 div 中并添加 CSS text-align 属性：

```
<div style="text-align: center;">
  <a href="http://94.23.250.14:2199/tunein/tranceilfm.pls" id="cc_strinfo_song_tranceilfm" class="cc_streaminfo">Loading...</a>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T19:07:43.067

使用百分比左右边距。有关更多详细信息，请查看以下教程： [http ://www.w3.org/Style/Examples/007/center.en.html](http://www.w3.org/Style/Examples/007/center.en.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T19:08:52.813

要在 CSS 中居中，请确保父元素具有，并且`position: relative`要居中的元素`position: absolute`和。这是水平居中元素的基本思想。要垂直居中，您可以使用相同的技术，但使用and ，或者如果它只是文本，则将equal 设置为容器元素的高度。`left: 50%``margin-left: -width/2``top: 50%``margin-top: -height/2``line-height`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-07T13:16:28.623

```
display: inline-block;
text-align: center; 
margin-left: 50%; 
margin-right: 50%; 
overflow: visible; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-04T19:08:14.620

尝试像这样为元素添加宽度：

```
#cc_strinfo_song_tranceilfm {
width: 90%;
clear: both;
margin: auto;
} 
```

# scala - Scala：指定默认的泛型类型而不是 Nothing

> ID：11811267
> 
> 赞同：13
> 
> 时间：2012-08-04T19:05:33.253
> 
> 标签：scala, generics

我有一对看起来像这样的类。有一个`Generator`基于一些类级别的值生成一个值，还有一个`GeneratorFactory`构造一个`Generator`.

```
case class Generator[T, S](a: T, b: T, c: T) {
  def generate(implicit bf: CanBuildFrom[S, T, S]): S =
    bf() += (a, b, c) result
}

case class GeneratorFactory[T]() {
  def build[S <% Seq[T]](seq: S) = Generator[T, S](seq(0), seq(1), seq(2))
} 
```

你会注意到它`GeneratorFactory.build`接受一个类型的参数`S`并`Generator.generate`产生一个类型的值`S`，但是没有任何类型`S`存储在`Generator`.

我们可以使用这样的类。工厂在 的序列上工作`Char`，并`generate`产生 a`String`因为`build`给定了 a `String`。

```
val gb = GeneratorFactory[Char]()
val g = gb.build("this string")
val o = g.generate 
```

这很好，并且`String`隐式处理类型，因为我们使用的是`GeneratorFactory`.

* * *

## 问题

`Generator`现在，当我想在不经过工厂的情况下构建一个时，问题就出现了。我希望能够做到这一点：

```
val g2 = Generator('a', 'b', 'c')
g2.generate // error 
```

但是我收到一个错误，因为`g2`有类型`Generator[Char,Nothing]`和 Scala “无法基于 Nothing 类型的集合构造带有 Char 类型元素的 Nothing 类型的集合。”

我想要的是一种告诉 Scala 的“默认值”`S`类似于`Seq[T]`而不是`Nothing`. 借用默认参数的语法，我们可以把它想象成这样：

```
case class Generator[T, S=Seq[T]] 
```

* * *

## 解决方案不足

当然，如果我们明确告诉生成器它生成的类型应该是什么，它会起作用，但我认为默认选项会更好（我的实际场景更复杂）：

```
val g3 = Generator[Char, String]('a', 'b', 'c')
val o3 = g3.generate  // works fine, o3 has type String 
```

我考虑过重载`Generator.apply`以拥有一个通用类型的版本，但这会导致错误，因为显然 Scala 无法区分这两个`apply`定义：

```
object Generator {
  def apply[T](a: T, b: T, c: T) = new Generator[T, Seq[T]](a, b, c)
}

val g2 = Generator('a', 'b', 'c')  // error: ambiguous reference to overloaded definition 
```

* * *

## 期望的输出

我想要的是一种简单地构造 a`Generator`而不指定类型`S`并将其默认为的方法，`Seq[T]`以便我可以这样做：

```
val g2 = Generator('a', 'b', 'c')
val o2 = g2.generate
// o2 is of type Seq[Char] 
```

我认为这将是用户最干净的界面。

有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T20:55:17.620

您是否有理由不想使用基本特征然后`S`在其子类中根据需要缩小？以下示例符合您的要求：

```
import scala.collection.generic.CanBuildFrom

trait Generator[T] {
  type S
  def a: T; def b: T; def c: T
  def generate(implicit bf: CanBuildFrom[S, T, S]): S = bf() += (a, b, c) result
}

object Generator {
  def apply[T](x: T, y: T, z: T) = new Generator[T] {
    type S = Seq[T]
    val (a, b, c) = (x, y, z)
  }
}

case class GeneratorFactory[T]() {
  def build[U <% Seq[T]](seq: U) = new Generator[T] {
    type S = U
    val Seq(a, b, c, _*) = seq: Seq[T]
  }
} 
```

我创建了`S`一个抽象类型以使其远离用户，但您也可以将其设为类型参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T22:35:59.380

这并不能直接回答您的主要问题，因为我认为其他人正在处理这个问题。相反，它是对您对类型参数的默认值请求的响应。

我对此进行了一些思考，甚至​​开始写一份提案，要求进行语言更改以允许它。然而，当我意识到 Nothing 的真正来源时，我停下了脚步。这不是我预期的某种“默认值”。我将尝试解释它的来源。

为了将类型分配给类型参数，Scala 使用最具体的可能/合法类型。因此，例如，假设您有“class A[T](x: T)”并且您说“new A[Int]”。您直接为 T 指定了“Int”的值。现在假设您说“new A(4)”。Scala 知道 4 和 T 必须具有相同的类型。4 可以具有介于“Int”和“Any”之间的任何类型。在该类型范围内，“Int”是最具体的类型，因此 Scala 创建了一个“A[Int]”。现在假设您说“new A[AnyVal]”。现在，您正在寻找最具体的类型 T，即 Int <: T <: Any 和 AnyVal <: T <: AnyVal。幸运的是，Int <: AnyVal <: Any，所以 T 可以是 AnyVal。

继续，现在假设您有“class B[S >: String <: AnyRef]”。如果你说“新 B”，你不会得到 B[Nothing]。相反，你会发现你得到一个 B[String]。这是因为 S 被限制为 String <: S <: AnyRef 并且 String 位于该范围的底部。

所以，你看，对于“class C[R]”，“new C”不会给你一个 C[Nothing] 因为 Nothing 是类型参数的某种默认值。相反，你得到一个 C[Nothing] 因为 Nothing 是 R 可以是最低的东西（如果你没有另外指定，Nothing <: R <: Any）。

这就是为什么我放弃了我的默认类型参数的想法：我找不到让它变得直观的方法。在这个限制范围的系统中，如何实现低优先级默认值？或者，如果它在有效范围内，默认优先级是否“选择最低类型”逻辑？我想不出至少在某些情况下不会令人困惑的解决方案。如果可以，请告诉我，因为我很感兴趣。

编辑：请注意，逆变参数的逻辑是相反的。所以如果你有“class D[-Q]”并且你说“new D”，你会得到一个 D[Any]。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T21:11:21.610

一种选择是将 的召唤移动`CanBuildFrom`到它（或者更确切地说，它的实例）可以帮助确定的地方`S`，

```
case class Generator[T,S](a: T, b: T, c: T)(implicit bf: CanBuildFrom[S, T, S]) {
  def generate : S =
    bf() += (a, b, c) result
} 
```

示例 REPL 会话，

```
scala> val g2 = Generator('a', 'b', 'c')
g2: Generator[Char,String] = Generator(a,b,c)

scala> g2.generate
res0: String = abc 
```

**更新**

`GeneratorFactory`还必须修改，以便其方法`build`将适当的`CanBuildFrom`实例传播到`Generator`构造函数，

```
case class GeneratorFactory[T]() {
  def build[S](seq: S)(implicit conv: S => Seq[T], bf: CanBuildFrom[S, T, S]) =
    Generator[T, S](seq(0), seq(1), seq(2))
} 
```

并不是说对于 Scala < 2.10.0，您不能在同一个方法定义中混合视图边界和隐式参数列表，因此我们必须将边界`S <% Seq[T]`转换为其等效的隐式参数`S => Seq[T]`。

# clojure - 如何在 Clojure 中扩展数值协议

> ID：11811271
> 
> 赞同：7
> 
> 时间：2012-08-04T19:05:56.960
> 
> 标签：clojure, protocols

我正在尝试使用协议来创建工程编号类型（“knumber”），所以我可以说`(+ "1k" "2Meg")`并得到类似`"2.001Meg"`. 我应该能够像这样从 knumber 中获取浮点值`(:val my-knumber)`，但通常打印机应该显示字符串，它也可以像这样访问`(:string my-knumber)`。这个数字将支持所有常用的 p、n、u、m、k、Meg、G 后缀，并在其中根据需要进行转换，例如`(/ "1Meg" "1G") -> "1m")`. 我希望能够将其传递给任何需要数字的函数。

无论如何，有人可以为此提出一个策略吗？我想我需要使用协议。我目前有一个`(defrecord knumber [val string])`，但我不确定下一步是什么。

clojure 数字满足哪些协议？我想我需要为此扩展一些现有的协议/接口。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T03:14:12.343

我认为您的策略应该如下：

*   将记录定义`KNumber`为`(defrecord knumber [value unit-map])`
*   将`unit-map`单位映射到整数指数（如果这些是工程数字，你会想要像 m/s^2 这样的单位，对吧？）。`{"m" 1 "s" -2}`它可能看起来像
*   有`KNumber`实现`java.lang.Number`，以便您可以将它与 Clojure 中已经存在的其他数学函数一起使用。你需要实现`doubleValue`等`longValue`。
*   定义一个`NumberWithUnits`可以扩展到`KNumber`s 和普通 clojure 数字的协议。至少它应该有方法`(numeric-value [number])`和`(get-units [number])`
*   然后在你自己的命名空间中定义你的数学函数`+`，等等`*`，这些函数`-`对任何实现`NumberWithUnits`协议的东西进行操作并返回一个`KNumber`.
*   关于不同的单位比例（例如“m”与“km”），我建议在单一比例上标准化每种单位类型的内部表示（例如“m”表示距离），但提供转换为其他单位比例的选项以用于输入/输出目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:07:37.657

frinj[库](https://github.com/martintrojer/frinj)是一个用于单位计算的 Clojure 库。查看源代码可能会给您一些好主意。

# django - 带有中间件的 Django 应用程序使用词汇表创建链接？

> ID：11811272
> 
> 赞同：1
> 
> 时间：2012-08-04T19:05:58.880
> 
> 标签：django

我正在寻找一个使用中间件的应用程序，该中间件会自动添加指向术语定义的链接。

此页面上的内容：http: [//www.jeuxvideo.com/articles/0001/00014721-portal-2-test.htm](http://www.jeuxvideo.com/articles/0001/00014721-portal-2-test.htm)（术语“剧透”、“功能”、“关卡设计”等）。

或者有人做过可以帮助我做这样一个应用程序的中间件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T03:06:11.160

没有找到解决方案，我决定构建自己的：[django-terms](https://github.com/BertrandBordage/django-terms)，使用 HTMLParser。

它有效，但现在有点“太强大”了。

**编辑：**从 0.2 版开始，django-terms 使用起来非常安全。所以不要犹豫，试一试;o)

干杯，

伯特兰

# java - Play Framework 2 中的查询语言

> ID：11811274
> 
> 赞同：2
> 
> 时间：2012-08-04T19:06:09.003
> 
> 标签：java, playframework-2.0, ebean

我如何从表中选择另一个唯一列而不是 id 我正在寻找替代品

```
 String fbid=<some facebookId>
     User user = User.findBy("facebookId",fbid).first(); 
```

我正在使用`Java`+`Ebean`而不是 scala！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:20:34.537

```
User user = User.find.where().eq("facebookId", fbid).findUnique(); 
```

当然，您可以通过在`User`模型中添加方法来创建“快捷方式”：

```
public static User findByFacebookId(String fbid){
    return find.where().eq("facebookId", fbid).findUnique();
} 
```

并在控制器中使用它：

```
User user = User.findByFacebookId(fbid); 
```

这是一个很好的解决方案，因为您可以保持控制器的代码干净，并`finders`根据情况使用复杂的自定义。

# arm - 中断如何在多核 ARM cpu 上工作

> ID：11811276
> 
> 赞同：6
> 
> 时间：2012-08-04T19:06:29.877
> 
> 标签：arm, multicore, interrupt

这个问题已经在 x86 上得到了回答，但是我找不到很多关于 ARM MP cpu 的信息，比如 Cortex-A9、Cortex-A15 等......

更重要的是，我想知道是否可以在没有任何配置等的情况下在非主 CPU 上引发中断。

我正在开发一个只处理主 cpu 的软件，因此我将其余部分置于 WFI 状态，但是我不知道中断如何在 MP arm cpu 上工作，主 cpu 是否有可能继续执行代码和一个辅助 cpu cpu 捡起它并跳转到向量表中的指令并执行该代码？

顺便说一句，这是我用来将它们置于低功耗模式的代码

```
 uint32_t reg;

    __asm__ volatile("mrc p15, 0, %0, c0, c0, 5" : "=r" (reg));
    reg &= 0xF;

    if(reg > 0)
        goto spin;

<code snipped>

spin:
    for(;;)
        cpu_idle(); // cpu_idle -> wfi 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T12:10:15.327

简短且实用的正确答案是，如果没有在辅助核心上执行一些配置，您所要求的是不可能的......

[http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ihi0048b/index.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ihi0048b/index.html)中描述了中断控制器架构（非常详细）

要准备辅助内核以接收 IPI，您需要：

*   启用 GIC 分配器（一次，用于整个系统）
*   启用 GIC CPU 接口（针对每个内核）
*   启用您想要接收的 IPI（针对每个内核）
*   为您想要接收的每个 IPI 设置优先级（针对每个核心）
*   确保 CPU 接口中断优先级屏蔽寄存器（针对每个内核）设置为低于您在上面设置的中断优先级的优先级（更高的数字）。
*   清除 CPSR I 位（针对每个内核）

如果您不打算实现中断处理程序，请跳过清除 I 位。核心将从 WFI 中出来并继续执行。这通常是系统引导操作所需要的。

# ruby-on-rails - 我可以将部分块传递到我在 Rails 3 中渲染的部分吗？

> ID：11811277
> 
> 赞同：2
> 
> 时间：2012-08-04T19:06:39.510
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个模式，我已经提取到我的“共享”文件夹中的一个部分，并将使用 view.js.erb 文件通过 javascript 调用呈现。我想渲染这个模态部分，并且能够在这个模态部分内渲染另一个部分块，但这需要是动态的。当我在模态部分上调用渲染时，我应该能够传入部分。我已经尝试通过局部位置传递本地，这将起作用，但它并不能真正解决我也有想要传递给嵌套局部的局部的情况。

下面是我的代码：

来自我的 new.js.erb 视图文件的调用（当前带有本地）。

```
$('body').append('<%= j(render '/shared/modal', :modal_title => "Create a new Question",      :partial => "render 'questions/form', :btn_message => 'Create'") %>'); 
```

_modal.html.erb

```
<div class="modal hide" id="modal">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">×</button>
    <h3><%= modal_title %></h3>
  </div>
  <div class="modal-body">
  </div>
  <%= render partial %>
<!--   <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal">Close</a>
    <a href="#" class="btn btn-primary">Save changes</a>
  </div> -->
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:36:27.843

我不确定这是否可以在您的用例中使用，但它可能会提供一些灵感：

这是父 HAML 片段

```
- render_component :some_params do
  %h2 Titel
  -# whatever you need 
```

在助手中，您可以将块传递给部分

```
 # in helper
  def render_component(some_param, &block)
    # do other things
    concat(render :partial => "shared/component", 
                  :locals => {:some_param => some_param,
                              :block => block})
  end 
```

这是内部部分

```
.someCopmonent
  .title
    = some_param
  .renderPassedBlockhere
    - concat(capture(&block)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T22:41:59.290

这未经测试，但让我知道它是否适合您：

```
$('body').append('<%= j(render '/shared/modal', :modal_title => "Create a new Question",      :partial => "render 'questions/form', :partial_vars => {:var1 => 'first var', :var2 => 'second var}, :btn_message => 'Create'") %>'); 
```

请注意，我添加了“partial_vars”参数并将其发送到部分。然后，在你的模态共享部分有这个：

```
<%= render :partial => partial, :locals => partial_vars %> 
```

# jquery - JSON 值未与 getJSON 函数一起显示

> ID：11811278
> 
> 赞同：0
> 
> 时间：2012-08-04T19:06:40.273
> 
> 标签：jquery, json

我真的需要帮助来阅读这个 URL 上的 JSON 数据：

[http://www.cloudspokes.com/members/ferbie12/past_challenges.json](http://www.cloudspokes.com/members/ferbie12/past_challenges.json)

我正在尝试`--disable-web-security`在 google chrome 上使用来解决跨域问题。这是我编写的用于读取 JSON 上的简单值的代码。

```
$.getJSON("www.cloudspokes.com/members/ferbie12/past_challenges.json",function(data) {
    $.each(data, function(){
        var test = data.attributes.type;
        $('p#success').append(test);
    });
}); 
```

它不会在浏览器上显示任何内容。非常感谢您的帮助。

更新：我也尝试使用这些代码。仍然没有结果。

```
$.ajax({
    type: "POST",
    url: "www.cloudspokes.com/members/ferbie12/past_challenges.json",
    contentType: "application/json; charset=utf-8",
    dataType: "json",

    success: function(data) {
        $.each(data, function(){
            var test = data.attributes.type;
            $('p#success').append(test);
        });
    itemAddCallback(data);
    },
    error: function (xhr, textStatus, errorThrown) {
    $("#success").html(xhr.responseText);   
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:05:11.870

您缺少 URI 的协议部分

修复它后，使用以下内容迭代项目：

```
$.each(data, function(index,item){
    var test = item.attributes.type;
    $('p#success').append(test);
}); 
```

# java - 如何在现有类型中声明或定义通用 xsd 类型。

> ID：11811279
> 
> 赞同：2
> 
> 时间：2012-08-04T19:06:46.257
> 
> 标签：java, xml, xsd, jaxb

我有一个基于 Java spring 的 Web 服务，它返回许多响应。我想设计响应，使其具有通用性，因为许多字段始终可用，并且调用服务的结果放置在 JAXB 响应中的“有效负载”元素中。为此，我提出了以下响应类型定义：

```
<xs:element name="serviceResponse">
    <xs:element name="responseStatus" type="xs:int"/>               
    <xs:element name="errorNumber" type="xs:int"/>
    <xs:element name="errorDescription" type="xs:string"/>
    <xs:element name="payLoad" type="?????"/>
</xs:element> 
```

如果该元素的类型可能因服务类型而异，我如何声明 payLoad 元素。每个服务都会生成一个不同的 JAXB 类型，我想将其添加到“PayloadElement”中。例如，这里有几个我期望的示例响应：

客户名单：

```
<serviceResponse>
    <responseStatus>0</responsesStatus>
    <errorNumber>0</errorNumber>
    <errorDescription>null</errorDescription>
    <payLoad>
        <customers>
            <customer>
                <customerId>2323</customer>
                <customerName>Joe Bloggs</customerName>
                <invoiceNumber>90347347</invoiceNumber>
            </customer>
            <customer>
                <customerId>54</customer>
                <customerName>Dave hewitt</customerName>
                <invoiceNumber>342343</invoiceNumber>
            </customer>
        </customers>
    </payLoad>
</serviceResponse> 
```

订单清单

```
<serviceResponse>
    <responseStatus>0</responsesStatus>
    <errorNumber>0</errorNumber>
    <errorDescription>null</errorDescription>
    <payLoad>
        <orders>
            <order>

                <orderId>567</orderId>
                <ProductList>
                    <product>
                        <productId>234324</product>
                        <Quantity>5</Quantity>
                    </product>
                    <product>
                        <productId>23434</product>
                        <Quantity>7</Quantity>
                    </product>
                </ProductList>
            </order>
            <order>

                <orderId>34232</orderId>
                <ProductList>
                    <product>
                        <productId>1231</product>
                        <Quantity>5</Quantity>
                    </product>                  
                </ProductList>
            </order>
        </orders>
    </payLoad>
</serviceResponse> 
```

如您所见，有效负载元素可以包含一个 xml 文档，该文档可以是多种类型之一。我如何在 serviceResponse 元素定义中声明它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:29:47.703

为什么不在有效载荷中声明所有可能的类型？就像是：

```
<xs:element name="payloadContent">
  <xs:complexType>
    <xs:sequence>
       <xs:element ref="customers" minOccurs="0"/>
       <xs:element ref="orders" minOccurs="0"/>
       <!-- more elements -->
    </xs:sequence>
  </xs:complexType>
</xs:element>

<xs:element name="payload" ref="payloadContent"/> 
```

# elisp - 如何在 Elisp 中打印双引号

> ID：11811280
> 
> 赞同：1
> 
> 时间：2012-08-04T19:06:51.000
> 
> 标签：elisp

我似乎无法在我的代码中插入 xml 声明。

`(insert "<?xml version="1.0" encoding="UTF-8" standalone="no" ?>")`

这是一个简单的问题，但我无法弄清楚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:55:53.893

```
 (insert "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\" ?>") 
```

这应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T19:18:44.937

[http://www.gnu.org/software/emacs/manual/html_node/elisp/Syntax-for-Strings.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Syntax-for-Strings.html)

> *要在字符串中包含双引号，请在其前面加上反斜杠；因此，"\"" 是一个只包含一个双引号字符的字符串。*

# php - CakePhp 内部服务器错误中的视图

> ID：11811287
> 
> 赞同：0
> 
> 时间：2012-08-04T19:07:40.360
> 
> 标签：php, cakephp

我在 /app/view/layouts 中有以下*布局（称为：“MyView.ctp”）*

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title><?php echo $title_for_layout; ?></title>
        <!-- add favicon here-->
        <!-- js -->
        <?php echo $scripts_for_layout; ?>    
     </head>

    <body> 

    </body>
</html> 
```

我在 /app/view 中有以下*视图（称为 MyView.ctp）*

```
<?php $html->css('fup-prototype','stylesheet', array('media”=>”all' ), false); ?> 
```

app/webroot/css/ 中的以下*css文件（称为 fup-prototype.css）*

但是我收到了这个错误： ![图像1](../Images/5e64b5d481e91beffa84c0675960d488.png)

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T19:39:32.217

代替

```
array('media”=>”all' ) 
```

你很可能是说

```
array('media'=>'all' ) 
```

# eclipse - 即使我增加了 Eclipse 可用的 permgen 大小，我也得到了 java.lang.OutOfMemoryError。怎么修？

> ID：11811291
> 
> 赞同：1
> 
> 时间：2012-08-04T19:07:49.097
> 
> 标签：eclipse, adt, out-of-memory, ubuntu-11.10

我修改了 eclipse.ini 来修复 java.lang.OutOfMemoryError。但问题仍然存在。这些是在 eclipse.ini 中设置的选项：

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.gtk.linux.x86_1.1.200.v20120522-1813
-product
org.eclipse.epp.package.rcp.product
--launcher.defaultAction
openFile
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
3000m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-XX:MaxPermSize=3000m
-Xms3000m
-Xmx3000m
-XX:PermSize=3000m 
```

这是我打开通用 Android 项目的任何文件时遇到的错误：

```
Exception in thread "org.eclipse.wst.sse.ui.internal.reconcile.StructuredRegionProcessor" java.lang.OutOfMemoryError: PermGen space
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:188)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClassHoldingLock(ClasspathManager.java:632)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:614)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:568)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:492)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:465)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:464)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266) 
```

注意：我在 Ubuntu 11.10 上使用 Eclipse junco，我正在尝试使用 ADT 插件开发一个 android 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:33:22.643

我已经修复：我删除了我的 Eclipse“面向 RCP 和 RAP 开发人员的 Eclipse”，而改用了“面向 C/C++ 开发人员的 Eclipse IDE”。现在一切正常。谢谢大家的帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-04T19:13:19.247

您可能想查看您的代码而不是 eclipse。也许其中有一个错误，导致它分配了太多的内存，或者它的编写效率不高。内存异常的可能原因是：

- 将大文件加载到 RAM 中

-无限循环创建对象或将数据附加到变量

- 在 RAM 中存储大量任何类型的数据

我希望这将帮助您更接近解决方案。

# android - 列表视图中的持有人不保留要显示的翻转视图布局

> ID：11811293
> 
> 赞同：0
> 
> 时间：2012-08-04T19:08:19.897
> 
> 标签：android, listview, viewflipper

我正在创建一个包含餐厅菜单的可扩展列表视图。当用户单击其中一个项目时，他会看到该项目的详细信息（例如，单击“鳄梨卷”行会显示一个新布局，其中显示“鳄梨、螃蟹、米饭”）。

这是标准视图的屏幕截图：

（我不能发布照片，因为我是新手，但如果用户看到列表视图，则会看到以下内容：

产品描述

产品描述

产品详情（不同格式）

产品描述

产品描述

这个想法是默认功能是食物的名称；如果用户点击（或最终滑动 - 但现在让我们保持简单），他应该看到描述（黑色）。问题是，当我滚动黑色行时切换回原始默认格式。（当我试图让界面“记住”用户单击并按住这些按钮时，问题将变得更加严重，以便用户知道他点了什么 - 这显然与我不了解持有人的工作原理有关！）

我在每一行内都使用了一个取景器，它运行良好 - 快速且可靠。当我单击时，也只选择了一行，这很好。

我唯一的问题是当我滚动时我无法让持有者记住取景器的状态。所以每次我滚动它都会重置。

例如，在牛排示例中，如果我在行中显示详细视图，然后向下滚动并向后滚动，则该行中的视图将返回名称“avocado roll”。显然，我没有正确实施支架，所以它记住了取景器的价值，但在我的一生中，经过 24 小时的尝试，我无法弄清楚这一点！

这是我的适配器代码：

ExpandMenu 适配器，以便您了解列表所指的内容：

```
public ExpandMenuAdapter(Context passedContext, ArrayList<ExpandOptionsGroup> passedGroupList){
    this.context = passedContext;
    this.groupList = passedGroupList;
} 
```

getChildView 代码：这是我认为持有人问题的地方，但我无法识别它！

```
@Override
public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {

    View rowView = null;

    String[] child = getChild(groupPosition, childPosition);

    if (rowView == null){
        LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
        rowView = infalInflater.inflate(R.layout.item_row, null);

        final ViewHolder viewHolder = new ViewHolder();

        viewHolder.itemName = (TextView) rowView.findViewById(R.id.tvItem);
        viewHolder.itemPrice = (TextView) rowView.findViewById(R.id.tvPrice);
        viewHolder.itemDetail = (TextView) rowView.findViewById(R.id.tvDetail);
        viewHolder.itemLayout = (LinearLayout) rowView.findViewById(R.id.item_layout);
        viewHolder.rowFlipper = (ViewFlipper) rowView.findViewById(R.id.item_row_flipper);

        viewHolder.itemLayout.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub  
                viewHolder.rowFlipper.showNext();
                Toast.makeText(context, "You clicked", Toast.LENGTH_SHORT).show();
            }
        });
        rowView.setTag(viewHolder);
        viewHolder.rowFlipper.setTag(groupList.get(groupPosition));
    }else{
        rowView = convertView;
        ((ViewHolder) rowView.getTag()).rowFlipper.setTag(groupList.get(groupPosition));
    }
    ViewHolder holder = (ViewHolder) rowView.getTag();
    //holder.rowFlipper.set(groupList.get(groupPosition));  CLEARLY THIS IS WRONG
    holder.itemName.setText(child[MenuXMLGettersSetters.ELEMENT_NAME]);
    holder.itemDetail.setText(child[MenuXMLGettersSetters.ELEMENT_DETAIL]);

    if(!child[MenuXMLGettersSetters.ELEMENT_PRICE].isEmpty()){
        holder.itemPrice.setText("$"+child[MenuXMLGettersSetters.ELEMENT_PRICE]);
    }else{
        holder.itemPrice.setText("");
    }
    return rowView;
}

private static class ViewHolder {
    public TextView itemName;
    public TextView itemPrice;
    public TextView itemDetail;
    public LinearLayout itemLayout;
    public ViewFlipper rowFlipper;

    private void getViewHolderDetail(){
        itemDetail.isShown();
    }
} 
```

# entity-framework-4 - EF 代码优先 - 更改为关系生成的列名

> ID：11811295
> 
> 赞同：0
> 
> 时间：2012-08-04T19:09:09.800
> 
> 标签：entity-framework-4

使用 EF 代码首先要控制生成列的名称 WHEN REFERENCING SELF。试过`[ForeignKey]`和`[Column]`属性。`[Column]`不起作用并`[ForeignKey]`强制建立似乎会导致问题的关系。我已经使用`[ForeignKey]`属性来设置连接到这个的另一个类/表中的列的名称。

有

```
public class Episodes
{
    public long ID {get; set;}
    // ... other properties

    public List<Episodes> Children { get; set; }
} 
```

想要一张桌子 ( `ID`, ..., `ParentID`) - 得到一张桌子 ( `ID`, ..., `Episode_ID`)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T19:44:50.763

如果您没有在实体类中将外键列作为属性公开，则只能使用 Fluent API 定义列名：

```
modelBuilder.Entity<Episodes>()
    .HasMany(e => e.Children)
    .WithOptional()
    .Map(m => m.MapKey("ParentID")); 
```

我假设父级是可选的（`ParentID`是 DB 表中的一个可为空的列），因为我想，树中应该有一些“根”，即一个不再有父级的情节，因此至少对于这个插曲`ParentID`栏目必`NULL`。

# c# - 没有 ListCollectionView 的自定义排序 DataGrid

> ID：11811297
> 
> 赞同：0
> 
> 时间：2012-08-04T19:09:33.267
> 
> 标签：c#, wpf, sorting, datagrid, wpfdatagrid

`ItemsSource`当我得到这个异常时，我想为我做自定义排序：

> 无法比较数组中的两个元素。

这很明显，因为我使用转换器类来显示基于对象的正确值。对象是类型的`object`，可以包含多种类型，所以这里排序不起作用。我上网了，但唯一的解决方案是 a `ListCollectionView`，而我的不是。这不会是一件坏事，除了另一个`CollectionView`类没有为我们提供`CustomSort`属性这一事实。

我可以解决这个问题的一种方法是使用 上的`SortMemberPath`属性`DataGridTextColumn`，但这远非理想，因为我需要为我显示的每个属性创建一个新属性（使用转换器）。这会导致不必要的混乱，让我的课程看起来很糟糕。这个“解决方案”对我来说似乎也是一个完整的解决方法，我希望有更好的解决方案。唯一的问题是，我找不到它，有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:56:37.473

我认为使用 DataGrid 的 CollectionView 或 OOTB 功能进行排序并不容易。一种解决方案可能是对您绑定为 ItemsSource 的列表进行排序。

# php - 当用户使用您的应用程序发送推文时，如何使用 PHP 和 Twitter 奖励用户？

> ID：11811298
> 
> 赞同：0
> 
> 时间：2012-08-04T19:09:33.260
> 
> 标签：php, twitter

我以前从未在推特上申请过。但是当我这样做时，我想在用户使用我的应用程序发送推文时使用 PHP 和 Twitter 来奖励他们。

举个例子。

用户点击“Tweet for bonus **insert_stuff_here** ”链接。

然后用户允许应用使用他们的推特。

~*推文发布*~

PHP 检测到 <-- 不知何故？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:16:02.093

您想查看 twitter API，然后当您代表用户发布推文时，您可以同时运行您的代码来奖励奖金。您将需要创建一个 twitter 应用程序并创建一个 oAuth 密钥。

[https://dev.twitter.com/docs/api/1/post/statuses/update](https://dev.twitter.com/docs/api/1/post/statuses/update)

[https://dev.twitter.com/docs/api](https://dev.twitter.com/docs/api)

当你甚至没有自己尝试过时，这里的人不会为你写一个完整的脚本......我建议你做一些研究尝试一些代码，如果你遇到困难，然后发布你到目前为止的内容：- )

# c++ - 在 C++、结构或类中应该使用什么来创建链接列表

> ID：11811299
> 
> 赞同：2
> 
> 时间：2012-08-04T19:09:35.867
> 
> 标签：c++, class, data-structures, struct, linked-list

我想在 C++ 中创建一个链接列表。我很困惑是使用类还是结构。是否可以使用指针来引用类对象并仅使用类创建链接列表？我也可以使用 C++ 的内置列表来创建类对象列表吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T19:11:23.860

在 C++中`class`和`struct`基本相同，所以在这个问题的上下文中，它没有区别。

您可以拥有指向对象的指针：

```
class Foo {};

Foo* = new Foo();
Foo f;
Foo* pf = &f; 
```

关于 和 之间的区别`struct`，`class`前者具有公共访问和继承，后者具有私有默认访问和继承：

```
struct Bar : Foo {
  int a;
  void bar() const;
}; 
```

是相同的

```
struct Bar : public Foo {
 public:
  int a;
  void bar() const;
}; 
```

和一样

```
class Bar : public Foo {
 public:
  int a;
  void bar() const;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T19:14:17.727

你应该使用`std::list`. 然后，你用什么都没关系。例如：

```
std::list<int> listOfInts;

struct Point {
    int x, y;
};

std::list<Point> listOfPoints;

class Line {
public:
    Point a, b;
};

std::list<Line> listOfLines; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-04T19:20:59.687

结构体和类的区别：

*   `struct`默认为公共访问，`class`默认为私有访问。
*   从它们继承时`struct`默认为`public`继承，`class`默认为`private`继承。

请注意，C++ 标准库已经提供了链表：

*   单链表（c++11）：[http ://en.cppreference.com/w/cpp/container/forward_list](http://en.cppreference.com/w/cpp/container/forward_list)
*   双向链表：[http ://en.cppreference.com/w/cpp/container/list](http://en.cppreference.com/w/cpp/container/list)

# php - 允许字符的正则表达式

> ID：11811301
> 
> 赞同：-1
> 
> 时间：2012-08-04T19:09:57.363
> 
> 标签：php, regex, preg-match

我需要检查我的 PHP 代码中的字符串是否仅包含指定的字符列表。但由于他们中的一些人可能需要 scape，我就是无法让它工作。我已经尝试了一切，但它只是不起作用......

所需的验证是：

*   0-9
*   AZ
*   阿兹
*   字符：.%^& *()$#@!/* -+/

基本上，我想检查是否有未知的 ascii 字符（我不知道是否有功能可以做到这一点）。

我的代码现在是这样的：

```
if(preg_match("/[A-Za-z0-9\.\#\-\+\*\\\/\=\_\%\$\(\)]/", $cmd) === false) 
```

那么，所有的字符都是特殊的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:16:09.853

不，所有这些字符都不是特殊的。如果您不确定，可以让 PHP 为您进行转义[`preg_quote()`](http://php.net/preg_quote)：

```
$regex = '/[A-Za-z0-9' . preg_quote( '.%^&()$#@!/-+/', '/') . ']+/';
if( !preg_match( $regex, $cmd)) 
```

此外，[`preg_match()`](http://php.net/preg_match)返回一个`int`，并且你正在做`===`一个布尔值，它永远不会成立，因为它们永远不会属于同一类型。您可以简单地检查`if( !preg_match())`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T19:16:33.363

您可能`*`在正则表达式的末尾缺少 a 。您也可以改为将集合表达为`[\x00-\x7F]`（取自[此处](https://stackoverflow.com/questions/2124010/grep-regex-to-match-non-ascii-characters)）。

这应该有效：

```
[\x00-\x7F]* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T19:14:10.657

`if(preg_match("/[.%^&()$#@!/+-a-zA-Z\d\s]+/", $cmd) === false)` 如果你需要锚`if(preg_match("/^[.%^&()$#@!/+-a-zA-Z\d\s]+$/", $cmd) === false)`

# c# - 如何使用查询字符串和输入表单将数据从一页发送到另一页？

> ID：11811303
> 
> 赞同：1
> 
> 时间：2012-08-04T19:10:33.167
> 
> 标签：c#, asp.net, html

我在 C#(asp.net) 中工作。我有两页“abc.aspx”和“xyz.aspx”。我想将数据从“abc.aspx”发送到“xyz.aspx”。我正在使用此代码。

在“abc.aspx”中

```
<form action='xyz.aspx?site=google&code=123' method='get'>
<input type='text' name='name1' />
<input type='submit' value='submit' />
</form> 
```

现在，我想访问所有三个值（站点、代码和名称 1）。但是，在'xyz.aspx'中，我只有一个值，即name1。如何获得所有三个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:13:25.757

`<input />`如果您想让它们最终出现在查询字符串中，您需要将这些值放入隐藏元素中并对这些值进行硬编码。你是正确的设置`method='get'`：

```
<form action='xyz.aspx' method='get'>
  <input type='hidden' name='site' value='google' />
  <input type='hidden' name='code' value='123' />
  <input type='text' name='name1' />
  <input type='submit' value='submit' />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T10:12:26.817

我认为这个是最好的。

**在 abc.aspx**

```
<form action="xyz.aspx?site=google" method="post">
<input type="text" name="name1" />
<input type="submit" value="Submit" />
</form> 
```

**在 xyz.aspx**中，像这样访问数据..

```
string site = Request.QueryString["site"];
string name = Request.Form["name1"];
//Remaining code... 
```

# solr - 在 Solr 中突出显示关键字

> ID：11811307
> 
> 赞同：1
> 
> 时间：2012-08-04T19:11:09.410
> 
> 标签：solr, highlight

在调整了很多之后，我终于决定发布我的这个查询。请帮忙！！！

所以查询是我想在 Ajax-Solr 的结果部分突出显示搜索关键字。

我尝试编辑 reuters.js 、reuters.theme.js 和 Resultwidget.js 文件，但没有运气。我读到我需要在 tag 中添加这些关键字，但没有说明如何添加它们。

我遵循了这个[http://wiki.apache.org/solr/HighlightingParameters](http://wiki.apache.org/solr/HighlightingParameters)但无法理解它，因为它没有解释如何实现它。

请帮助我。谢谢

# mysql - 计算日期相等但按名称分隔的行

> ID：11811310
> 
> 赞同：1
> 
> 时间：2012-08-04T19:11:33.697
> 
> 标签：mysql

我认为从我拥有的表格和我想要的结果开始是最容易的。

```
Name | Date
A    | 03/01/2012
A    | 03/01/2012
B    | 02/01/2012
A    | 02/01/2012
B    | 02/01/2012
A    | 02/01/2012
B    | 01/01/2012
B    | 01/01/2012
A    | 01/01/2012 
```

我希望我的查询结果是：

```
Name | 01/01/2012 | 02/01/2012 | 03/01/2012
A    |     1      |     2      |     2
B    |     2      |     2      |     0 
```

所以基本上我想计算具有相同日期的行数，但是对于每个单独的名称。所以一个简单的按日期分组是行不通的，因为它会将名称合并在一起。然后我想输出一个表格，使用 php 显示每个日期的计数。

我已经看到答案建议是这样的：

```
SELECT
  NAME,
  SUM(CASE WHEN GRADE = 1 THEN 1 ELSE 0 END) AS GRADE1,
  SUM(CASE WHEN GRADE = 2 THEN 1 ELSE 0 END) AS GRADE2,
  SUM(CASE WHEN GRADE = 3 THEN 1 ELSE 0 END) AS GRADE3
FROM Rodzaj
GROUP BY NAME 
```

所以我想我会有一种方法来调整它，但我想知道是否有另一种方法，或者那是最有效的？我可能在想，如果 while 循环每次只输出一个特定的名称和日期以及计数，那么第一个结果将是 A,01/01/2012,1 然后是下一个 A,02/01/2012， 2 - A,03/01/2012,3 - B,01/01/2012,2 等，那么也许这可以通过不同的技术实现，但不确定这样的事情是否可行以及是否有效。

所以我基本上是想看看是否有人对此有任何不合时宜的想法，以及他们将如何进行比较。

我希望我能很好地解释一切，并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:15:41.437

您必须在您的 中包含两列`GROUP BY`：

```
SELECT   name, COUNT(*) AS count
FROM     your_table
GROUP BY name, date 
```

这将以行格式获取每个名称 -> 日期组合的计数。`0`如果名称在特定日期没有任何行，您还想包含计数，您可以使用：

```
SELECT     a.name,
           b.date,
           COUNT(c.name) AS date_count
FROM       (SELECT DISTINCT name FROM your_table) a
CROSS JOIN (SELECT DISTINCT date FROM your_table) b
LEFT JOIN  your_table c ON a.name = c.name AND 
                           b.date = c.date
GROUP BY   a.name, 
           b.date 
```

* * *

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/6ca96/1/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T19:24:22.937

你要求一个“[支点](http://en.wikipedia.org/wiki/Pivot_table)”。基本上，它就是这样。数据透视的真正问题是列*名*必须适应数据，而单独使用 SQL 是不可能做到的。

这是你如何做到的：

```
SELECT
  Name,
  SUM(`Date` = '01/01/2012') AS `01/01/2012`,
  SUM(`Date` = '02/01/2012') AS `02/01/2012`,
  SUM(`Date` = '03/01/2012') AS `03/01/2012`
FROM mytable
GROUP BY Name 
```

请注意，您可以在 mysql 中使用一个很酷的方法`SUM()`，因为在 mysql`true`中 is`1`和`false`is `0`，因此对条件求和相当于计算它为真的次数。

首先使用内部组并不是更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T18:04:42.243

以防万一有人对最好的方法感兴趣：

Zane 的第二个建议是最慢的，我加载了我为其他两个所做的数据的三分之一，这花了很长时间。也许在较小的表上它会更有效，虽然我没有使用一个巨大的表，但大约 28,000 行足以造成明显的滞后，而 between 子句将结果降至约 4000 行。

波西米亚人的回答给了我最少的代码，我投入了一个循环来创建所有的案例陈述，它工作起来相对容易。这种方法的好处是简单，除了为案例创建循环外，不需要任何 php 技巧就可以得到结果，只需简单的 foreach 即可获取所有列。推荐给那些对 php 没有信心的人。

然而，我发现 Zane 的第一个建议是最快的，尽管需要额外的 php 编码，但我似乎会坚持使用这种方法。这种方法的缺点是它只给出实际有数据的日期，所以创建一个包含所有日期的表变得有点复杂。我所做的是创建一个变量来跟踪它应该与在每个表行上重置的表列进行比较的日期，当查询的结果等于该日期时，它会回显该值，否则它会执行while 循环用 0 回显表格单元格，直到日期匹配。它还必须检查“名称”值是否仍然相同，如果没有，它会在将任何缺失的单元格填充到该行末尾后切换到下一行。

两种方法的结果超过 3 个月的数据（每天一列，因此大约 90 个案例陈述）~ 28,000 行中的 12,000 行：
Bohemian's Pivot - ~0.158s（最高可见 ~0.36s）
Zane's Double Group by - ~0.086s （最高可见〜0.15s）

# html - “噢，啪！” 在 Chrome 中检查元素时出错

> ID：11811313
> 
> 赞同：11
> 
> 时间：2012-08-04T19:11:56.907
> 
> 标签：html, google-chrome, error-handling

每当我检查属于我的导航菜单的任何元素，或检查元素然后浏览到导航菜单时，我都会在 Google Chrome 中收到“Aw，Snap”错误。我认为源代码一定有问题，但在编辑器中查看源代码后，似乎一切格式都正确。

什么可能导致此错误？

您可以[点击这里](http://blacktiephotographers.com)查看该网站:)

# 更新：

此代码中的某些内容导致错误：

```
<li>
    <a id="nav-corporate" class="accordionButton <?php if (is_page(1635) || is_page(1909)) { echo "curr-page-nav";}?>">Corporate</a>
<div class="sub-list-container">

    <ul>
        <li>
            <a href="<?php echo get_page_link(1635); ?>" id="nav-meeting" class="subitem"><span class="nav-hidden">Meetings</span></a>
        </li>
        <li>
            <a href="<?php echo get_page_link(1909); ?>" id="nav-event" class="subitem"><span class="nav-hidden">Events</span></a>
        </li>
    </ul>
    </div>
    </li> 
```

顺便说一下，我在三台电脑上都试过了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T14:06:30.113

问题似乎与您的[style.css](http://blacktiephotographers.com/wp-content/themes/photolux_v120/style.css)文件有关。在该文件中，您有：

```
/*::selection {
    background: #666; /* Safari */
    color: #FFF;
}

::-moz-selection {
    background: #666; /* Firefox */
    color: #FFF;
}*/ 
```

发生的情况是您`/* Safari */`在上面整个片段周围的更广泛的评论中有评论，这会过早关闭更广泛的评论并导致 CSS 解析错误。谷歌浏览器卡在格式错误的 CSS 文件上，导致“哇，啪！” 检查元素时发生错误。

删除`/* Safari */`评论不会解决该问题，因为`/* Firefox */`下面会导致相同的问题。

**编辑：**虽然这确实解决了 CSS 的一个小问题，但这并不是整个解决方案。根据下面[thakis](https://stackoverflow.com/users/551986/thakis)的回答，修复以下样式确实可以防止检查元素时崩溃：

```
#navigation-menu-container{
  border-image:  url(images/shadow-border.png) 10 stretch;
} 
```

比较[这个 fiddle](http://jsfiddle.net/saluce/twkVp/)，它是有问题的站点代码（所有`head`标签和相关 html 标记）的复制/粘贴，与[更正的 fiddle](http://jsfiddle.net/saluce/twkVp/6/)，其中`style.css`标记已导入 fiddle 并且`#navigation-menu-container`规则已更改为上述代码，你会看到小提琴页面没有崩溃。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T17:24:49.330

[当 chrome 崩溃时，请在http://new.crbug.com](http://new.crbug.com)提交错误，以便 chrome 开发人员可以修复问题。（我已经为你提交了这个问题的[http://crbug.com/141139](http://crbug.com/141139)）。理想情况下，尝试复制您的站点并继续从副本中删除内容，直到您有一个仍然重现问题的小测试用例。然后将其附加到错误上。

编辑：看起来你的 style.css 中的这一点导致它：

```
#navigation-menu-container{
  border-image:  url(images/shadow-border.png) stretch 10;
} 
```

`border-image`需要它的数字在前面`stretch`（参见例如[http://css-tricks.com/understanding-border-image/](http://css-tricks.com/understanding-border-image/)），Chrome 会因为不是这种情况而感到困惑。移动`10`前面的`stretch`修复崩溃（但崩溃当然仍然是一个 chrome 错误）。

# c++ - 存储任意引用但本身不是类模板的 C++ 包装类

> ID：11811315
> 
> 赞同：1
> 
> 时间：2012-08-04T19:12:13.917
> 
> 标签：c++, c++11, wrapper

是否可以定义一个不是类模板并且可以存储（例如在构造时）对任何特定类型的引用并稍后通过 getter 方法检索它的类？

```
struct Wrapper {
  template<typename T> Wrapper(const T& t): t_(t);

  // How to store the reference??
}; 
```

`Boost::variant`当然不是解决方案，因为它是作为类模板实现的。而且我没有 RTTI。（它在 HPC 环境中，性能就是一切！）

`getter()`应该能记住类型。这样`auto`以后就可以使用了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T22:42:34.323

> getter() 应该能够记住类型。

它不能。你*删除*了类型。当您将任意类型的值放入一致类型的对象中时，就会发生这种情况。这称为“类型擦除”：从包含类中*删除*原始类型。

这样做的后果之一是无法神奇地恢复该类型。您不能让一个类在每个实例的基础上使用一种类型进行初始化，然后让其成员函数之一根据该特定实例的初始化方式返回不同的类型。

C++ 是一种*静态*类型语言。每个函数的返回类型必须在编译时定义。它不能因为您在运行时放入类中而改变。

> 它不记得类型。
> 
> 我不能使用 RTTI。

那么你想要的是一个`void*`. RTTI 是以类型安全的方式恢复原始值类型的唯一方法。如果你不想要类型安全，那么你想要一个`void*`. 您要做的就是编写一个包装器`static_cast<T*>`。

`void*`在and周围写一个包装器真的没有意义`static_cast`。如果那是您想要的，并且您愿意接受使用它们的风险（即：破坏类型系统），那么就使用它。存在的原因`boost::any`是提供类型*安全* `void*`的，这样至少您知道什么时候错误地转换它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T19:28:05.977

`boost::any` [http://www.boost.org/doc/libs/1_50_0/doc/html/any.html](http://www.boost.org/doc/libs/1_50_0/doc/html/any.html)

```
std::vector<boost::any> many;
int i = 5;
std::string a = "5";

many.push_back(i);
many.push_back(a);

std::string res;
if (many[1].type() == typeid(std::string))
  res = boost::any_cast<std::string>(many[1]); 
```

# android - 如何本机处理PhoneGap Android App的无连接

> ID：11811316
> 
> 赞同：1
> 
> 时间：2012-08-04T19:12:19.143
> 
> 标签：android, html, cordova, android-webview

根据[PhoneGap Connection API](http://docs.phonegap.com/en/1.0.0/phonegap_connection_connection.md.html#connection.type)的文档，似乎在 HTML5 中处理了失败的互联网连接，以使用浏览器显示一个简单的警报框。我怎样才能在 Android 内部委派错误。

如果没有连接，我想显示我的原生加载屏幕（启动画面），然后在 android natively 中显示一个简单的对话框。目前，我正在使用 phoneGap 和下面的代码创建我的 webview...

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // if (phoneGap.connection != false)
    //      initiate loadURL
    // else
    //      load up a different activity and show dialogue box...

    super.loadUrl("http://classtempo.org/teacher.html");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T12:39:53.960

我在 super.loadUrl() 之前添加了这一行：

```
super.setStringProperty("errorUrl", "file:///android_asset/www/no_connection.html"); 
```

# drupal-7 - Drupal 7 - 打印模块 - 选择要打印的内容

> ID：11811317
> 
> 赞同：1
> 
> 时间：2012-08-04T19:12:49.890
> 
> 标签：drupal-7, printing-web-page

我在我的 Drupal 7 站点 (www.kooknet.be) 中使用打印模块。如何选择在我的自定义内容类型中打印哪些字段？我已经将“打印页面”类添加到几个 HTML 标记中，但我无法让它工作。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:55:11.430

如果您安装了打印模块，您可以从管理界面轻松设置为“打印”视图模式显示哪些字段！

1.  转到您的内容类型的“管理显示”屏幕：/admin/structure/types/manage//display
2.  启用打印模块后，您应该开始在可用显示选项的折叠列表中看到“打印”显示选项 ![在此处输入图像描述](../Images/617c8033809ac317fa7ed3417c68d9b9.png)
3.  检查该显示选项（**以及**与您的内容类型相关的任何其他选项）并点击“保存”
4.  现在您会看到该显示选项已添加，您可以随意添加或隐藏字段！

:-)

# android - android - apk 必须使用与以前版本相同的证书进行签名

> ID：11811329
> 
> 赞同：5
> 
> 时间：2012-08-04T19:14:44.560
> 
> 标签：android, eclipse, google-play, keytool, jarsigner

我正在尝试将我的 Android 应用程序上传到 Google Play 市场，但出现错误：

```
the apk must be signed with the same certificates as the previous version 
```

有趣的是，我使用的是原始密码和原始密码，所以我对可能导致此问题的原因感到困惑。

1) 我确实将我的 Mac OS X 升级到了 Lion，这是一个 64 位操作系统，我认为是早期的 32 位操作系统。这可能是问题吗？

2) 在制作这个新的应用程序版本之前，我确实更新了 Android 工具：Eclipse、SDK 和 Java。这可能是问题吗？

3）我也试过跑步

```
jarsigner -verify -verbose -certs 
```

在 Google Play 上的旧版本应用程序和新应用程序和证书有效时间相同。

4) 我手动创建了新的 APK，并在 Eclipse 中使用导出 Android 应用程序。

5）我在Eclipse中使用`手动创建了APK

```
Android Tools -> Export Unsigned Application and then using
jarsigner -verbose -keystore mykeystore.keystore app.apk companyName
/Developer/android-sdk-mac_86/tools/zipalign -v 4 app.apk app_aligned.apk 
```

所以我认为问题不在于我使用了错误的密钥库。我读过这个问题也可能是由

A) 尝试上传调试 apk 而不是发布 apk。

B) 清单中有错误的包名。

C) 不增加 versionCode 和 versionName。

除了使用错误的梯形校正外，还有其他可能导致此问题的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:07:45.267

好吧，就我而言，事实证明我使用了错误的密钥库。是什么让我意识到这是在运行

```
jarsigner -verify -verbose -certs android_app 
```

在以前的和新的应用程序上，并为每个应用程序获取不同的 CERT.RSA 文件名。

所以我挖了一下，找到了另一个密钥库，结果证明是正确的。

# javascript - 动态图像加载是否会减少服务器过载？

> ID：11811339
> 
> 赞同：1
> 
> 时间：2012-08-04T19:16:56.167
> 
> 标签：javascript, performance

例如，如果我制作了一个仅在用户将页面滚动到图像应位于的位置时才加载图像的脚本，该脚本会减少页面加载时间吗？从长远来看会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T19:22:19.883

您不会减少 dom 准备好和显示的时间（至少不会减少很多）。图像由浏览器异步加载，因此占位符被放置在图像的位置，直到它们完全加载。

然而，我会建议你说实现一个脚本来加载需要的图像，没有必要用不需要的图像浪费人们的带宽。（如果你有很多图片），例如谷歌图片搜索。

请记住，如果用户加载页面并快速向下滚动，则一次加载所有图像的页面将不得不等待所有图像加载以确保显示视图中的图像。如果您实现某种脚本，您可以控制图像加载的方式和顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T19:20:06.000

是的，你会减少加载时间，但是你会让你的用户在他们向下滚动时等待图像加载。

# cocoa-touch - 根据计时器更改图像

> ID：11811346
> 
> 赞同：0
> 
> 时间：2012-08-04T19:17:37.777
> 
> 标签：cocoa-touch, nstimer

我希望能够根据计时器更改图像视图中显示的图像，以便图像每 0.5 秒更改一次。我将如何去做这样的事情？我知道如何更改图像，只是不知道如何关闭计时器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T19:22:26.680

Try one of these:

One: Reading [NSTimer's documentation on Apple Developer](http://developer.apple.com/library/ios/#documentation/cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html).

Two: Do something like this:

```
[NSTimer scheduledTimerWithTimeInterval:0.5f target:self selector:@selector(updateImage) repeats:YES userInfo:nil];

- (void)updateImage
{
    if (++counter >= imagesArray.count) counter = 0;
    imageView.image = [imagesArray objectAtIndex:counter]; // or whatever else
} 
```

# android - 发布到节点时服务器没有响应

> ID：11811348
> 
> 赞同：2
> 
> 时间：2012-08-04T19:18:15.967
> 
> 标签：android, xmpp, asmack

我正在尝试获取节点（在 android 中并使用`asmack`库）并尝试在该节点上发布一些内容，但不幸的是，当`node = (LeafNode) mgr.getNode(nodeNameTxt.getText().toString());` 行被执行时，我收到以下错误

```
 No response from server.: 
at org.jivesoftware.smackx.pubsub.packet.SyncPacketSend.getReply(SyncPacketSend.java:50)
at org.jivesoftware.smackx.pubsub.packet.SyncPacketSend.getReply(SyncPacketSend.java:61)
at org.jivesoftware.smackx.pubsub.PubSubManager.getNode(PubSubManager.java:161)
at com.bcl.NodeManager.publishNode(NodeManager.java:176)
at com.bcl.NodeManager.access$1(NodeManager.java:167)
at com.bcl.NodeManager$2.run(NodeManager.java:101)
at java.lang.Thread.run(Thread.java:1019) 
```

这是我的代码

```
 PubSubManager mgr = new PubSubManager(xmpp, "pubusb.example.com");
          // Get the node
    LeafNode node;

    try {
            //HERE I AM GETTING THE ERROR
        node = (LeafNode) mgr.getNode(nodeNameTxt.getText().toString());
        node.send(new PayloadItem("test" + System.currentTimeMillis(), 
                   new SimplePayload("book", "pubsub:test:book", "")));
    } catch (XMPPException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
    } 
```

即使执行了下一行，我也会遇到相同的错误

```
createLeaf = mgr.createNode(nodeNameTxt.getText().toString()); 
```

我真的不知道发生了什么，因为我已经设置`SmackConfiguration.setPacketReplyTimeout(10000);` 并且服务器也使用 stophe javascript 示例运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:31:50.453

我怀疑“收件人”地址不正确，并且数据包没有发送到您服务器中的 pubsub 服务。尝试像这样初始化您的 pubsub 管理器。

```
PubSubManager mgr = new PubSubManager(xmpp, "pubsub.xmppdomain.com"); 
```

其中 xmppdomain.com 当然是您的实际 xmpp 域。

您可以使用 smack.debugEnabled on（或任何 android 等效项）运行以检查正在发送的 XML，以确认它正在到达应有的位置。

# android - Android NDK 设置 RGB 位图像素

> ID：11811349
> 
> 赞同：2
> 
> 时间：2012-08-04T19:18:30.433
> 
> 标签：android, c, image-processing, android-ndk, bit-manipulation

我正在尝试使用 androids ndk 进行一些简单的图像过滤，并且似乎在获取和设置位图的 rgb 值时遇到了一些问题。

我已经剥离了所有实际处理，只是试图将位图的每个像素设置为红色，但我最终得到了一个蓝色图像。我认为我忽略了一些简单的事情，但感谢您提供任何帮助。

```
static void changeIt(AndroidBitmapInfo* info, void* pixels){
int x, y, red, green, blue;

for (y=0;y<info->height;y++) {

     uint32_t * line = (uint32_t *)pixels;
        for (x=0;x<info->width;x++) {

            //get the values
            red = (int) ((line[x] & 0xFF0000) >> 16);
            green = (int)((line[x] & 0x00FF00) >> 8);
            blue = (int) (line[x] & 0x0000FF);

            //just set it to all be red for testing
            red = 255;
            green = 0;
            blue = 0;

            //why is the image totally blue??
            line[x] =
              ((red << 16) & 0xFF0000) |
              ((green << 8) & 0x00FF00) |
              (blue & 0x0000FF);
        }

        pixels = (char *)pixels + info->stride;
    }
} 
```

我应该如何获取然后设置每个像素的 rgb 值？

**更新答案**
如下所示，似乎使用了小端，所以在我的原始代码中，我只需要切换红色和蓝色变量：

```
static void changeIt(AndroidBitmapInfo* info, void* pixels){
int x, y, red, green, blue;

for (y=0;y<info->height;y++) {

     uint32_t * line = (uint32_t *)pixels;
        for (x=0;x<info->width;x++) {

            //get the values
            blue = (int) ((line[x] & 0xFF0000) >> 16);
            green = (int)((line[x] & 0x00FF00) >> 8);
            red = (int) (line[x] & 0x0000FF);

            //just set it to all be red for testing
            red = 255;
            green = 0;
            blue = 0;

            //why is the image totally blue??
            line[x] =
              ((blue<< 16) & 0xFF0000) |
              ((green << 8) & 0x00FF00) |
              (red & 0x0000FF);
        }

        pixels = (char *)pixels + info->stride;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T01:42:22.707

这取决于像素格式。大概您的位图是 RGBA 格式的。所以0x00FF0000对应字节序列0x00、0x00、0xFF、0x00（小端序），也就是透明度为0的蓝色。

我不是 Android 开发人员，所以我不知道是否有帮助函数来获取/设置颜色组件，或者你是否必须自己做，基于 AndroidBitmapInfo.format 字段。您必须阅读 API 文档。

# node.js - mongodb data async in a for-loop with callbacks?

> ID：11811351
> 
> 赞同：0
> 
> 时间：2012-08-04T19:18:53.537
> 
> 标签：node.js, mongodb, for-loop

Here is a sample of the working async code without mongodb. The problem is, if i replace the vars (data1_nodb,...) with the db.collection.find(); function, all needed db vars received at the end and the for()-loop ends not correct. Hope someone can help. OA

```
 var calc = new Array();
    function mach1(callback){               

                        error_buy = 0;                                                  

                        // some vars                            

                        for(var x_c99 = 0; x_c99 < array_temp_check0.length;x_c99++){

                            // some vars                        

                                calc[x_c99] = new Array();                                      
                                calc[x_c99][0]= new Array();    

                                calc[x_c99][0][0] = "dummy1";
                                calc[x_c99][0][1] = "dummy2";
                                calc[x_c99][0][2] = "dummy3";
                                calc[x_c99][0][3] = "dummy4";
                                calc[x_c99][0][4] = "dummy5";

                                function start_query(callback) {

                                        data1_nodb = "data1";
                                        data2_nodb = "data2";
                                        data3_nodb = "data3";
                                        data4_nodb = "data4";

                                        calc[x_c99][0][0] = data1_nodb;
                                        calc[x_c99][0][1] = data2_nodb;
                                        calc[x_c99][0][2] = data3_nodb;

                                        callback(data1_nodb,data2_nodb,etc..);

                                }

                                        start_query(function() {

                                            console.log("start_query OK!"); 

                                            function start_query2(callback) {

                                            data4_nodb = "data5";
                                            data5_nodb = "data6";
                                            data6_nodb = "data7";

                                            calc[x_c99][0][3] = data4_nodb;
                                            calc[x_c99][0][4] = data5_nodb;

                                            callback(data5_nodb,data6_nodb,etc..);

                                        }                                           

                                        start_query2(function() {

                                            console.log("start_query2 OK!");    

                                                function start_query3(callback) {

                                                    for(...){

                                                            // do something
                                                        }

                                                        callback(vars...);                                              
                                                    }

                                            start_query3(function() {
                                                console.log("start_query3 OK!");    
                                            });

                                        });
                                    }); 
                            }

                        callback(calc); 

                };

                function mach2(callback){

                    mach1(function() {

                        console.log("mach1 OK!");

                        for(...){                                                                                               
                        // do something                                                         
                        }   

                    });         

                    callback(calc,error_buy);

                };                          

                mach2(function() {
                console.log("mach2 OK 2!");                                         
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:44:18.340

您需要使用该`collection.find()`方法的异步性质并等待所有这些都完成。一种非常流行的方法是使用[异步](https://npmjs.org/package/async)模块。该模块允许您运行多个并行任务并等待它们完成其`async.parallel()`方法：

```
async.parallel([
  function (callback) {
    db.foo.find({}, callback);
  },
  function (callback) {
    db.bar.find({}, callback);
  },
  function (callback) {
    db.baz.find({}, callback);
  }
], function (err, results) {
  // results[0] is the result of the first query, etc
}); 
```

# php - preg_replace 无法在替换中执行简单的数学运算

> ID：11811353
> 
> 赞同：0
> 
> 时间：2012-08-04T19:19:42.210
> 
> 标签：php, regex, preg-replace

我尝试了各种不同的序列和转义，但没有运气。Preg_replace 忽略`$i`并使用 the 之后的整数`+`作为其替换。

**第一个例子：**

```
$i = 1;
$s = preg_replace( '/\[$/', '${' . $i + 1 . ':[', $s );
var_dump( $s ); 
```

结果：`${1:[ // should be 2`

**第二个例子：**

```
$i = 1;
$s = preg_replace( '/\[$/', '${' . $i + 9 . ':[', $s );
var_dump( $s ); 
```

结果：`${9:[ // should be 10`

**没有添加它工作正常：**

```
$i = 12;
$s = preg_replace( '/\[$/', '${' . $i . ':[', $s );
var_dump( $s ); 
```

结果：`${12:[ // okay`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T19:23:35.367

您需要括号来对表达式进行分组，以便在连接之前进行加法。

```
$s = preg_replace( '/\[$/', '${' . ($i + 1) . ':[', $s ); 
```

# c - Memory leak tool on cygwin

> ID：11811356
> 
> 赞同：22
> 
> 时间：2012-08-04T19:20:00.650
> 
> 标签：c, memory-leaks, cygwin

Is there any alternative available for checking memory leaks on Cygwin as it does not support Valgrind?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T20:15:16.710

我对Windows不太了解，但是你可以试试这个工具，它似乎已经在Windows平台上移植了软件： [http ://code.google.com/p/drmemory/](http://code.google.com/p/drmemory/)

此处提供了一些文档：

[http://www.burningcutlery.com/derek/docs/drmem-CGO11.pdf](http://www.burningcutlery.com/derek/docs/drmem-CGO11.pdf)

希望这有帮助。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:41:29.907

检查 DUMA 项目[http://duma.sourceforge.net/](http://duma.sourceforge.net/)。它与您需要的有点不同，但希望您能在那里找到答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T12:55:04.017

我最近使用[CMemLeak](http://www.codeguru.com/cpp/misc/misc/memory/article.php/c3745/Detecting-Memory-Leaks-in-C.htm)取得了巨大的成功。它非常易于使用，您只需将其包含在每个标头中，并检测内存泄漏、无效写入和非堆释放。它不检测无效读取。

# canvas - three.js overdraw = true 在透明几何体上创建线框工件

> ID：11811357
> 
> 赞同：2
> 
> 时间：2012-08-04T19:20:04.283
> 
> 标签：canvas, three.js, renderer

似乎当 overdraw 设置为 true 时，画布渲染器实际上将填充扩展到面的边缘之外，因此它们重叠了一点。这通常很好，但是当材料是透明的时，这些重叠的边缘会产生不受欢迎的线框类型伪影。

请参阅示例中的粉红色箭头：[示例](http://chrisweeks3d.com/webearth/WebEarthCanvas.html)

有没有办法玩实际扩展了多少填充？恐怕源代码只是在我头上，但如果有人能指出处理的地方（源代码中的哪一行），那将不胜感激。如果做不到这一点，希望有人知道另一种解决方案或解决方法。

我意识到使用 WebGL 渲染器时问题会消失，但我被要求尽可能在 Canvas 上进行这项工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T19:51:17.647

是的。恐怕没有解决方案`CanvasRenderer`。

但是如果你想尝试一些值......这是执行此操作的函数：

[https://github.com/mrdoob/three.js/blob/master/src/renderers/CanvasRenderer.js#L1011-1025](https://github.com/mrdoob/three.js/blob/master/src/renderers/CanvasRenderer.js#L1011-1025)

你可以试试这个...

```
idet = ( 1 / Math.sqrt( det ) ) * 0.5; 
```

然后，在你的系统中安装了 python，转到 /utils 并运行它来生成一个新的 Three.js：

```
python build.py --common 
```

这是为了在你完成后缩小它：

```
python build.py --common --minified 
```

但我认为你可能会在不同的浏览器中得到不同的结果。

很想知道你是否解决了这个问题。

# regex - Unrecognized escape \m passed through in regex with PERL v5.10.1

> ID：11811365
> 
> 赞同：2
> 
> 时间：2012-08-04T19:21:32.363
> 
> 标签：regex, perl

Issue: Unrecognized escape \m passed through in regex; marked by <-- HERE in m/.*?/ at ./build.pl line 890.

```
856 sub addProperity {
857 
858     my ($line,$inprop,$newpom,$depver,$artifactId,$thisartifactId,$br,$paramvalue,$masterpomversion) = @_;
859 
860     my $alllines;
861 
862     if ( $$inprop ) {
863 
864             (my $thisline = $line) =~ s!\r!!;
865             chomp $thisline;
866 
867             $thisline =~ s%<!--.*?-->%%g;
868             $thisline =~ s%<!--.*%%;
869             $thisline =~ s%.*-->%%;
870 
871             $$inprop = '' if ( $thisline =~ m!</properties>! );
872             $thisline =~ s%<.{0,1}properties>%%g;
873             $thisline =~ s%\s*$%%;
874 
875             while ( $thisline ) {
876                 #print "thisline=$thisline"."XX\n";
877                 ( my $propname = $thisline ) =~ s!\s*<(.*?)>.*!$1!;
878                 if ( $propname =~ m!.group\s*! ) {
879 
880                 (my $propvalue = $thisline ) =~ s!.*<$propname>(.*?)</$propname>.*!$1!;
881                 if ( $propvalue =~ /\s*com.alcatel.axs.(.*)\s*/ ) {
882 
883                     my $groupId=$1;
884                     my $thisversion=getThisVersion($depver,$groupId,$artifactId,$thisartifactId,$br,$paramvalue,$masterpomversion);
885                     push ( @{$newpom}, '<'.$propname.'.repversion>'.$thisversion.'</'.$propname.'.repversion>'."\n");
886                 }
887             }
888 
889             my $currentline=$thisline;
890             $thisline =~ s!.*?</$propname>!!;
891             last if ($currentline=$thisline);
892         }
893     }
894 } 
```

Background:

The script was working fine on - Perl v5.8.8 built for i386-linux-thread-multi, but

Not working on Perl - v5.10.1 (*) built for x86_64-linux-thread-multi

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T19:58:22.100

问题只是其中的字符串`$propname`包含字符`\m`。

如果你真的想包含一个反斜杠（我猜不是因为它看起来像你正在使用 XML 标签）那么你需要编写

```
$thisline =~ s!.*?</\Q$propname\E>!! 
```

转义变量中的任何元字符

# windows-phone-7 - Microsoft.Xna.Framework.dll 在 Windows phone 项目中没有添加引用对话框？

> ID：11811366
> 
> 赞同：0
> 
> 时间：2012-08-04T19:21:46.180
> 
> 标签：windows-phone-7

我正在尝试在 Windows 8 上构建一个 Windows phone 7.1 项目，该项目之前是在 Windows7 上构建的。在 Windows 8 上我开始收到此错误，找不到“Microsoft.Xna.Framework”的引用

我在这里错过了一些简单的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:58:27.143

卸载 SDK 并重新安装就可以了！谢谢

# django - “返回该页面可能会导致您重复执行的任何操作” - Django

> ID：11811368
> 
> 赞同：14
> 
> 时间：2012-08-04T19:22:12.030
> 
> 标签：django, django-models, django-database

我的网站上有一个表格，可以在数据库中创建一个条目。因此，每次刷新页面时，我都会首先收到此消息：

```
The page that you're looking for used information that you entered.
Returning to that page might cause any action you took to be repeated.
Do you want to continue? 
```

显然，我不想在我的数据库中多次拥有相同的信息。

以防万一：这是我的代码（我知道有很多废话需要删除）：

```
#views.py
@login_required
def subject(request,username, subject_name):
    subject_id = Subjects.objects.filter(user = request.user).get(name=subject_name)
    #Upload form
    if request.method == "POST":
        if "upload-b" in request.POST:
            form = ContentForm(request.POST, request.FILES, instance=subject_id)       
            if form.is_valid(): # need to add some clean functions
                 up_f = FileDescription.objects.get_or_create(subject=subject_id,
                                                  subject_name=subject_name,
                                                  file_type=request.POST['file_type'],
                                                  file_uploaded_by = username,
                                                  file_name=request.POST['file_name'],
                                                  file_description=request.POST['file_description'],
                                                  image = request.FILES['image'],
                                                  )
form = ContentForm()

#Show uploaded files with respect to clicked session (Homework, Class , Random ... )
homework_files = Homework.homework.filter(subject_name__exact=subject_name,
                                         file_uploaded_by__exact=username)
class_files = ClassPapers.classpapers.filter(subject_name__exact=subject_name)
random_files = RandomPapers.randompapers.filter(subject_name__exact=subject_name,
                                           file_uploaded_by__exact=username)

return render_to_response('subject_content.html', {'form':form,
                                                   'subject_name': subject_name,
                                                   'class_files': class_files,
                                                   'homework_files': homework_files,
                                                   'class_files': class_files,
                                                   'random_files': random_files,
                                                   },
                           context_instance=RequestContext(request))

#forms.py:
class ContentForm(forms.ModelForm):
    file_name =forms.CharField(max_length=255, widget=forms.TextInput(attrs={'size':20}))
    file_description = forms.CharField(widget=forms.Textarea(attrs={'rows':4, 'cols':25}))
    class Meta:
        model = FileDescription 
        exclude = ('subject', 'subject_name', 'file_uploaded_by')

#template
    <div id="sbj-creation-frm">
        <h3>Upload File</h3>
        <form action="." method="post" enctype="multipart/form-data">{% csrf_token %}
            {{ form.as_p }}
            <input type="submit" value="submit" name="upload-b" class="btn-create" />
        </form>
    </div> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-04T19:25:22.340

此消息来自浏览器；它会在您尝试刷新作为 POST 请求结果显示的页面时显示。

它与您的代码无关，浏览器将在您尝试刷新页面（`F5`例如点击）的所有网站上显示相同的消息，该页面是由于先前的 POST 请求而显示的。

为防止这种情况发生，请确保所有 POST 请求在完成后重定向到不同的视图；而不是自己渲染模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-28T15:09:52.397

重定向到为我工作的同一页面：

```
header("Location: #"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T13:24:10.590

插入后只需将页面重定向到当前页面，它将清除所有值并避免添加重复记录！

例子：

```
protected void btnAdd_Click(object sender, EventArgs e)
{
 //your code 
 Response.Redirect("Currentpage.aspx",true);

 //or 
 Response.Redirect(Request.Url.AbsoluteUri);
} 
```

# c# - Twitter API：POST 401，GET 工作正常

> ID：11811369
> 
> 赞同：3
> 
> 时间：2012-08-04T19:22:17.770
> 
> 标签：c#, httpwebrequest, twitter, twitter-oauth, http-status-code-401

我已经搜索了几天，无论是高还是低，都无法将 POST 发送到 twitter API 以正常工作。我能够成功获取请求令牌并将其交换为访问令牌，但是当我对状态/更新进行 POST 时，我收到 401 错误。

我已验证标头的授权部分与我在使用 Twitter OAuth 工具时收到的内容完全匹配。

我相信我的问题是我将状态添加到 Web 请求正文的方式。url 是否需要只是[https://api.twitter.com/1/statuses/update.json](https://api.twitter.com/1/statuses/update.json)，还是应该是[https://api.twitter.com/1/statuses/update.json?status=MyTweetHere](https://api.twitter.com/1/statuses/update.json?status=MyTweetHere) ?

我的代码如下：

```
 public string UpdateStatus(string requestMethod, string baseUrl, string consumerKey, string consumerSecret, string accessToken, OAuthRequestType requestType, string status)
    {
        //baseUrl = https://api.twitter.com/1/statuses/update.json
        const string signatureMethod = "HMAC-SHA1";
        const string oauthVersion = "1.0";

        var timeSpan = (DateTime.UtcNow - new DateTime(1970, 1, 1));
        var timestamp =  (int)timeSpan.TotalSeconds;

        var nonce = CreateNOnce(timestamp, consumerKey, baseUrl, accessToken);
        var signature = CreateSignature(requestMethod, baseUrl, consumerKey, consumerSecret, nonce, signatureMethod, timestamp, accessToken, oauthVersion, string.Empty, string.Empty, requestType, status);

        var bodyData = "status=" + UrlEncode(status);

        var webRequest = (HttpWebRequest)WebRequest.Create(baseUrl);
        webRequest.KeepAlive = true;
        webRequest.ServicePoint.Expect100Continue = false;
        webRequest.Method = requestMethod; //Send in as POST
        webRequest.Accept = "*/*";
        webRequest.UserAgent = "Renicorp.Social";

        webRequest.Headers["Authorization"] = "OAuth " + UrlEncode("oauth_consumer_key") + "=\"" + UrlEncode(consumerKey) + "\", " +
                                                         UrlEncode("oauth_nonce") + "=\"" + UrlEncode(nonce) + "\", " +
                                                         UrlEncode("oauth_signature") + "=\"" + UrlEncode(signature) + "\", " +
                                                         UrlEncode("oauth_signature_method") + "=\"" + UrlEncode(signatureMethod) + "\", " +
                                                         UrlEncode("oauth_timestamp") + "=\"" + UrlEncode(timestamp.ToString()) + "\", " +
                                                         UrlEncode("oauth_token") + "=\"" + UrlEncode(accessToken) + "\", " +
                                                         UrlEncode("oauth_version") + "=\"" + UrlEncode(oauthVersion) + "\"";

        string postData = bodyData;
        byte[] byteArray = Encoding.UTF8.GetBytes(postData);

        webRequest.ContentType = "application/x-www-form-urlencoded";
        webRequest.ContentLength = byteArray.Length;

        using (Stream dataStream = webRequest.GetRequestStream())
        {
            dataStream.Write(byteArray, 0, byteArray.Length);
        }

        //Make the web call and return the response
        WebResponse response = webRequest.GetResponse();
        var responseBody = string.Empty;
        Stream stream = response.GetResponseStream();
        if (stream != null) responseBody = new StreamReader(stream).ReadToEnd();
        return responseBody;
    } 
```

**更新：** 我现在已经编写了一个方法来为 account/verify_credentials.json 执行 GET，并且如果我使用我的应用程序帐户密钥，我能够验证帐户凭据，但是当我尝试使用单独的帐户并提供访问令牌时，我得到了401。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:40:34.593

所以我的问题是创建签名密钥时的密钥。我已经在 twitter 中从我的应用程序中硬编码了我的密钥。这就是为什么我的标头总是匹配的原因，但是当我使用链接的用户帐户运行测试时，请求不会通过。故事的寓意是不要硬编码密钥。我一直在想密钥是干什么用的。现在我知道。

此外，要使用的 url 只是基本 url：[https](https://api.twitter.com/1/statuses/update.json) ://api.twitter.com/1/statuses/update.json 。无需添加 url 参数。最后，在创建 http 请求正文时，它只是“status=UrlEncode(tweetToBeMade)”。

# scala - Scala：为什么我不能在字符串集合上映射一个接受 Seq[Char] 的函数

> ID：11811371
> 
> 赞同：13
> 
> 时间：2012-08-04T19:22:19.767
> 
> 标签：scala, implicit-conversion

我可以定义一个接受`Seq[Char]`

```
def f(s: Seq[Char]) = s 
```

如果我传入 a ，它会起作用`String`：

```
scala> f("this")
res8: Seq[Char] = this 
```

这意味着我可以在 a 中使用它`map`：

```
scala> List("this").map(s => f(s))
res9: List[Seq[Char]] = List(this) 
```

那么为什么我不能这样做呢？：

```
scala> List("this").map(f)
<console>:10: error: type mismatch;
 found   : Seq[Char] => Seq[Char]
 required: java.lang.String => ?
              List("this").map(f)
                               ^ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T19:36:41.163

您不能这样做，因为没有促进隐式转换`A => B`为`F[A] => F[B]`. 特别是，`f`实际上是 type 的一个实例`Seq[Char] => Seq[Char]`，您需要隐式转换 from`String => Seq[Char]`会生成一个 function `String => Seq[Char]`。Scala 不做像这样的两步隐式转换。

如果您编写`s => f(s)`，Scala 可以随意摆弄这些类型，以便`s`在`Seq[Char]`传递到`f`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T22:55:46.690

也许解决这个问题的最好方法是：

```
def f[S <% Seq[Char]](s: S): S = /* some code */ 
```

然后，`map`和朋友会按预期工作。

# opencv - Unable to compile OpenCV project with XCode 4

> ID：11811378
> 
> 赞同：0
> 
> 时间：2012-08-04T19:23:01.757
> 
> 标签：opencv, xcode4

I successfully built OpenCV on my Mac but couldn't compile a simple OpenCV project with XCode.

I added libopencv_core, libopencv_highgui and libopencv_imgproc to a file group in project.

Here is the linker output:

```
/Users/petilodie/Library/Developer/Xcode/DerivedData/opencv_test-fylvojzfgmnpmycaxkpiajicbmii/Build/Products/Debug/opencv_test normal x86_64
    cd /Users/petilodie/Projects/Test/opencv_test
    setenv MACOSX_DEPLOYMENT_TARGET 10.8
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -L/Users/petilodie/Library/Developer/Xcode/DerivedData/opencv_test-fylvojzfgmnpmycaxkpiajicbmii/Build/Products/Debug -F/Users/petilodie/Library/Developer/Xcode/DerivedData/opencv_test-fylvojzfgmnpmycaxkpiajicbmii/Build/Products/Debug -filelist /Users/petilodie/Library/Developer/Xcode/DerivedData/opencv_test-fylvojzfgmnpmycaxkpiajicbmii/Build/Intermediates/opencv_test.build/Debug/opencv_test.build/Objects-normal/x86_64/opencv_test.LinkFileList -mmacosx-version-min=10.8 -o /Users/petilodie/Library/Developer/Xcode/DerivedData/opencv_test-fylvojzfgmnpmycaxkpiajicbmii/Build/Products/Debug/opencv_test

Undefined symbols for architecture x86_64:
  "_cvDestroyWindow", referenced from:
      _main in main.o
  "_cvLoadImage", referenced from:
      _main in main.o
  "_cvNamedWindow", referenced from:
      _main in main.o
  "_cvReleaseImage", referenced from:
      _main in main.o
  "_cvShowImage", referenced from:
      _main in main.o
  "_cvWaitKey", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

Here is the code in main.cpp:

```
#include <iostream>
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"

int main(int argc, const char * argv[])
{
    IplImage* img = cvLoadImage( argv[1] );
    cvNamedWindow( "Example1", CV_WINDOW_AUTOSIZE );
    cvShowImage( "Example1", img );
    cvWaitKey(0);
    cvReleaseImage( &img );
    cvDestroyWindow( "Example1" );
} 
```

So, what's the problem here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:19:19.470

您需要将库链接到您的二进制文件：

![构建设置](../Images/933e7f1abb08f72f77f0cc6170153eb8.png)

# python - 如何从带有列名和列值的 pandas DataFrame 生成列表？

> ID：11811392
> 
> 赞同：17
> 
> 时间：2012-08-04T19:25:34.133
> 
> 标签：python, pandas

我有一个看起来像这样的熊猫数据框对象：

```
 one  two  three  four  five
0    1    2      3     4     5
1    1    1      1     1     1 
```

我想生成一个列表对象列表，其中第一项是列标签，其余列表值是列数据值：

```
nested_list = [['one', 1, 1]
               ['two', 2, 1]
               ['three', 3, 1]
               ['four', 4, 1]
               ['five', 5, 1]] 
```

我怎样才能做到这一点？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-04T19:31:03.777

最简单的方法可能是`list(dt.T.itertuples())`（你的数据框在哪里`dt`）。这会生成一个元组列表。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-12-13T12:21:02.230

上面的@BrenBarn 答案产生了一个元组列表，而不是所问的列表列表。我特别需要一个列表列表，以便能够使用 DataNitro 将数据帧写入电子表格。用列表理解修改了上面的例子：

```
[list(x) for x in dt.T.itertuples()] 
```

这会根据需要产生结果

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-02T16:47:56.457

严格来说，如果您想要嵌套列表（而不是元组列表），您可以这样做

```
df.values.tolist() 
```

因为 df.values 是一个 numpy 数组。这将为您提供所需的列表列表：

```
[[0.0001313652121930252, 3.5915356549999985e-05], 
 [3.5915356549999985e-05, 0.00011634321240684215]] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-04T23:02:21.293

我幼稚的方法是使用带有 'll' 的迭代项作为列表列表，将 l 作为单个列表。

```
df = DataFrame({'one':[1,1], 'two':[2,1], 'three':[3,1], 'four':[3,1] })

ll = []

for idx,row in df.iteritems():
    l = row.values.tolist()
    l.insert(0,idx)
    ll.append(l) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-12T13:53:28.843

我知道的老问题，但这对我来说比其他答案更有意义。

如果这是您的数据框：

```
df = pd.DataFrame({'one': [1, 1], 'three': [3, 1], 'four': [4, 1],
           'five': [5, 1], 'two': [2, 1]},
          columns=['one', 'two', 'three', 'four', 'five']) 
```

做这个：

```
df.T.reset_index().values.tolist() 
```

结果

```
[['one', 1, 1], ['two', 2, 1], ['three', 3, 1], ['four', 4, 1], ['five', 5, 1]] 
```

# r - R create strings in a loop

> ID：11811397
> 
> 赞同：-3
> 
> 时间：2012-08-04T19:26:46.957
> 
> 标签：r, variables, loops, for-loop, string-concatenation

How can I create variables and strings using the value passed by the loop?

* * *

**Example**

I have a set of countries = c('USA','Canada','Mexico').

I have a dataframe 'population'.

I want to query my database to get their population, and assign it to a column in a data frame. Don't worry about accessing the database, I am only concerned with dynamically creating the query string and the dataframe column name.

```
for (country in countries) {
   query = "SELECT population FROM population_database WHERE location='country';"
   population$country = mysql_query(query) 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T19:32:17.270

您可能正在寻找该`paste`功能。

```
x <- "USA"
paste("location =", x)
#[1] "location = USA" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-25T15:07:30.857

现在，如果您想创建一个 for 循环然后创建新的字符串名称，您可以这样做

```
a=c()
for (i in 1:5) {
    d=paste("location = ", i)
    a=c(a,d)
} 
```

因此，

[![在此处输入图像描述](../Images/a828e76955f48f03e5e819588cc912bb.png)](https://i.stack.imgur.com/VKw7y.jpg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T21:55:18.147

你想要`population[[country]]`而不是`population$country`. 该`$`符号是`[[`“两点之间的最长距离是一条捷径”的捷径。

其他已经提到的`paste`and `past0`，你也可以使用`sprintf`or`gsubfn`包。

# c++ - 调用 wxListCtrl::EditLabel (index) 时无法捕获 EVT_LIST_BEGIN_LABEL_EDIT 事件

> ID：11811400
> 
> 赞同：0
> 
> 时间：2012-08-04T19:27:33.107
> 
> 标签：c++, user-interface, windows-7, event-handling, wxwidgets

我想重命名 wxListCtrl 中的选定列表项。我一直在关注 wxwidgets 提供的示例 listctrl 的示例，但它似乎在我的代码中不起作用。

该示例具有用于调用更改项目标签的这段代码：

```
void MyFrame::OnEdit(wxCommandEvent& WXUNUSED(event))
{

// demonstrate cancelling editing: this currently is wxMSW-only
#ifdef __WXMSW__
if ( m_listCtrl->GetEditControl() )
{
    m_listCtrl->EndEditLabel(true);
}
else // start editing
#endif // __WXMSW__
{
    long itemCur = m_listCtrl->GetNextItem(-1, wxLIST_NEXT_ALL,
                                           wxLIST_STATE_FOCUSED);

    if ( itemCur != -1 )
    {
        m_listCtrl->EditLabel(itemCur);
    }
    else
    {
        m_logWindow->WriteText(wxT("No item to edit"));
    }
} 
```

}

而我的看起来像这样：

```
void GUI::OnRename (wxCommandEvent &WXUNUSED (event))
{

  wxListCtrl *list ((wxListCtrl*) this -> FindWindowById (ID_LIST));

  int index = list -> GetNextItem (-1, wxLIST_NEXT_ALL, wxLIST_STATE_SELECTED);

  if (list -> GetEditControl ())
  list->EndEditLabel(true);
  else if (index != -1)
  {
  list -> EditLabel (index);
  } 
```

}

两段代码都调用 EditLabel 函数，其中应该触发编辑标签 (wxEVT_LIST_BEGIN_LABEL_EDIT) 的事件，但是当示例中的代码确实被触发时，我的代码中的绑定方法不会被触发。

我以与示例中相同的方式在事件表中绑定方法：EVT_LIST_BEGIN_LABEL_EDIT (ID_LIST, GUI::OnEditListLabel)

示例：EVT_LIST_BEGIN_LABEL_EDIT(LIST_CTRL, MyListCtrl::OnBeginLabelEdit)

我可能错过了一些非常琐碎的事情，但似乎无法弄清楚。有任何想法吗？

干杯，维利乌斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:50:49.387

在创建 wxListCtrl 的实例时必须添加 wxLC_EDIT_LABELS 样式以启用标签的编辑，这会触发事件 EVT_LIST_BEGIN_LABEL_EDIT 和 EVT_LIST_END_LABEL_EDIT。

# css - 使用 twitter bootstrap 在表单中对齐 ancor

> ID：11811401
> 
> 赞同：1
> 
> 时间：2012-08-04T19:27:40.440
> 
> 标签：css, twitter-bootstrap

我正在使用 twitter 引导程序，我有一个带有链接的表单，应该打开一个带有输入的弹出窗口。由于某种原因，链接没有垂直对齐。我想知道在表单中做锚的“引导方式”是什么。这是 jsFiddle： http: [//jsfiddle.net/3j7QP/4/](http://jsfiddle.net/3j7QP/4/)
这是 html：

```
<form class="form-horizontal" id="postForm">
    <fieldset>
        <div class="control-group">
            <label class="control-label" for="start_location">Origin</label>
            <div class="controls">
                <a id="start_location" name="start_location" href="javascript:;">open select tooltip</a>
            </div>            
        </div>
    </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T20:38:24.880

正如您在这个[jsfiddle 演示](http://jsfiddle.net/Sherbrow/3j7QP/6/)中看到的那样，您应该使用`.help-inline`该类（或`.help-block`根据您的需要），但即使使用该类，如果您不输入任何内容，您也需要进行调整。

```
<div class="controls noinput">
    <span class="help-inline"><!-- <a> --></span>
</div> 
```

```
.controls.noinput > .help-inline { line-height: 28px; } 
```

该`28px`值可能会因您的引导变量而异。它基本上等于`control-group`高度。

# python - 使用生成器进行 WSGI 文件流式传输

> ID：11811404
> 
> 赞同：5
> 
> 时间：2012-08-04T19:27:54.700
> 
> 标签：python, wsgi, large-files

我有以下代码：

```
def application(env, start_response):
    path = process(env)
    fh = open(path,'r')
    start_response('200 OK', [('Content-Type','application/octet-stream')])
    return fbuffer(fh,10000)

def fbuffer(f, chunk_size):
    '''Generator to buffer file chunks'''  
    while True:
        chunk = f.read(chunk_size)      
        if not chunk: break
        yield chunk 
```

我不确定它是否正确，但我在互联网上找到的零碎信息让我认为它应该有效。基本上我想以块的形式输出一个文件，为此我从我的应用程序函数中传回一个生成器。但是，这只会打印出标题，实际上并没有发回任何数据，谁能告诉我这是为什么？

或者，如果这是完全错误的，那么最好的方法是什么？我无法在内存中缓冲整个文件，因为我将使用的文件可能有千兆字节大。

第三个问题：完成输出后关闭文件的最佳方法是什么？在我发布的代码中，我无论如何都看不到实际关闭文件。

（我正在使用 uWSGI 1.2.4 运行 python 3.2.3）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T20:32:06.677

不小心，uwsgi 小心翼翼地不让错误*泄漏*，但是如果你在更严格的实现中运行你的应用程序，比如 python 提供的那个`wsgiref.simple_server`，你可以更容易地看到问题。

```
Serving <function application at 0xb65848> http://0.0.0.0:8000
Traceback (most recent call last):
  File "/usr/lib64/python3.2/wsgiref/handlers.py", line 138, in run
    self.finish_response()
  File "/usr/lib64/python3.2/wsgiref/handlers.py", line 179, in finish_response
    self.write(data)
  File "/usr/lib64/python3.2/wsgiref/handlers.py", line 264, in write
    "write() argument must be a bytes instance"
AssertionError: write() argument must be a bytes instance
localhost.localdomain - - [04/Aug/2012 16:27:08] "GET / HTTP/1.1" 500 59 
```

问题是 wsgi 要求传入和传出 HTTP 网关的数据必须为`bytes`，但是当你使用 时`open(path, 'r')`，python 3 方便地将读取的数据转换为 unicode，在 python 3 中是`str`，使用默认编码。

改变

```
fh = open(path, 'r') 
```

到

```
fh = open(path, 'rb')
#                 ^ 
```

修复它。

# c++ - cin 一行上未定义的坐标数

> ID：11811407
> 
> 赞同：0
> 
> 时间：2012-08-04T19:28:25.080
> 
> 标签：c++

我正在尝试在 1 条单行上输入未定义数量的坐标（x，y，重量）。示例：

```
Please enter all the coords:

(1,2,5) (1,5,7) (2,5,2) (2,4,4) (2,3,5) (3,4,1) (4,5,9) 
```

我会将它们存储在一个二维数组中，所以对于我的第一个坐标，它会是这样的：

```
array[1][2] = 5 
```

如果每行只有一个坐标，我会这样做：

```
cin >> trash_char >> x >> y >> weight >> trash_char;
array[x][y] = weight 
```

对于单行上未确定数量的坐标，我该如何做到这一点？

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T19:55:20.780

定义一个结构。

```
struct Coord3D{
     float x,y,z;
}; 
```

定义插入运算符

```
template<typename ReadFunc>
istream& operator >> (istream& stream, Coord3D& coord){
     return ReaderFunc(stream, coord );
} 
```

定义阅读器功能。

```
istream& MyCoordReader(istream& stream, Coord3D& coord){
     char trash_char = 0;
     return stream >> trash_char >> x >> y >> weight >> trash_char;
} 
```

像这样使用它

```
 //template instantiation, probably wrong syntax
template<MyCoordReader> istream& opeartor >> (istream&,Coord3D&);

int main(){
   std::vector<Coord3D> coordinates;
   Coord3D coord;
   while( cin >> coord ){ coordinates.push_back(coord); }
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T19:35:23.727

像这样

```
#include <sstream>
#include <iostream>
#include <string>

string line;
getline(cin, line);
istringstream buffer(line);
while (buffer >> trash_char >> x >> y >> weight >> trash_char)
{
  // do something
} 
```

使用 getline 将一行读入字符串。然后将该字符串包装在 istringstream 中，以便您可以从中读取坐标。

# ios - Facebook iOS SDK：标记朋友？

> ID：11811412
> 
> 赞同：0
> 
> 时间：2012-08-04T19:29:17.210
> 
> 标签：ios, facebook, facebook-graph-api, facebook-ios-sdk

好吧，关于是否可以在您发布的帖子中标记人，有很多令人困惑/相互矛盾的信息......所以我想知道最新的信息是什么？文档说我们需要发送一个对象数组，每个对象`id`和`name`参数都设置为您要标记的用户，但是当我发送该请求时，我收到一条错误消息，内容如下：

```
Error Domain=facebookErrDomain Code=10000 "The operation couldn’t be completed. (facebookErrDomain error 10000.)" UserInfo=0x79bf5b0 {error=<CFBasicHash 0x79bca80 [0x1740b48]>{type = mutable dict, count = 3,
entries =>
    2 : <CFString 0x7989260 [0x1740b48]>{contents = "type"} = <CFString 0x79be240 [0x1740b48]>{contents = "OAuthException"}
    3 : <CFString 0x79b55a0 [0x1740b48]>{contents = "message"} = <CFString 0x79b7f90 [0x1740b48]>{contents = "(#114) An id must be a valid ID string (e.g., "123")"}
    6 : <CFString 0x79bde00 [0x1740b48]>{contents = "code"} = 114
}
} 
```

我已经仔细检查了 id 本身是否有效。任何帮助深表感谢！

谢谢，
泰加

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T13:59:16.427

**无法在您通过 Facebook 上的 iOS 应用发布的帖子中标记人员。**

**对于很久以前通过 API 发布的帖子，Facebook 停用了此功能**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T19:43:11.513

几个月前我对[这个问题](https://stackoverflow.com/questions/9348624/tag-friends-with-facebook-api-objective-c)进行了很多研究，我创建了一些帖子说可以添加`@[{user_id}:1:{name}]`到帖子中，但最终没有任何效果。我想 Facebook 在某些时候会阻止这个选项。
现在我很确定这是不可能的，但我很高兴在这里证明是错误的......

# html - 居中我的浮动 ul

> ID：11811413
> 
> 赞同：0
> 
> 时间：2012-08-04T19:29:41.330
> 
> 标签：html, css

我似乎无法让我的菜单正确居中。任何人都可以看到问题吗？

```
 ul#navigation {
        float: left;
        margin: 0 auto;
        padding: 0;
        list-style-type: none;
        min-width: 100px;
        background: #003d4c;
        padding-bottom: 15px;
        text-align: center;
    }

    ul#navigation li {

        border: 1px black solid;
        min-width: 100px;
        background-color: white;
        list-style-type: none;
        display: inline-block;
    }

    ul.sub_navigation {
        position: absolute;
        display: none;
    }

    ul.sub_navigation li {
        clear: both;
    }

    a, a:active, a:visited {
        display: block;
        padding: 10px;
    }

    #header{
        text-align: center;
        padding: 10px 20px;
    } 
```

这是HTML：

```
<div id="container">
    <div id="header">
        <br />
        <ul id="navigation">
            <li class="dropdown"><a href="#"></a>
                <ul class="sub_navigation">
                    <li><a href="#">Sub Navigation 1</a></li>
                    <li><a href="#">Sub Navigation 2</a></li>
                    <li><a href="#">Sub Navigation 3</a></li>
                </ul>
            </li>
            ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T19:48:30.330

使导航居中是一个常见但不容易的问题，尤其是如果您希望它与跨浏览器兼容。我一直使用一种非常好的技术，在此[页面](http://matthewjamestaylor.com/blog/beautiful-css-centered-menus-no-hacks-full-cross-browser-support)上对此进行了很好的解释。

基本上归结为：

*   你把你的容器 div 向左浮动，给它一个 100% 的宽度和一个相对的位置
*   你将你的 ul 向左浮动，并给它一个 50% 的相对位置
*   你将你的 li 向左浮动，并给它一个相对右侧 50% 的位置

查看链接以获取示例说明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T01:57:30.153

我决定使用的解决方案是用这个 CSS 将主 ul 包装在一个 div 中：

```
.menuContainer {
    display: table;
    margin: auto;
} 
```

# jquery - Cakephp 2.x Ajax 帖子在第二次提交时不起作用

> ID：11811416
> 
> 赞同：0
> 
> 时间：2012-08-04T19:29:51.393
> 
> 标签：jquery, ajax, post, cakephp-2.1

Okei .. 我的 ajax 登录遇到了一点问题。

当我第一次提交登录表单时，它工作正常。

*   输入正确的用户名/密码 => 登录 => 工作正常。
*   如果输入错误的用户名/密码 => 错误消息显示 =>（错误的 uname/pass）

但是如果我在显示错误信息后尝试重新输入正确的用户名和密码，我就无法再次提交表单了！？！

在 Firebug 中，它给了我一个“响应”，其中包含我所在表单的整个页面。

我需要重新加载页面才能重新发布登录详细信息。

我认为这与安全组件有关，但禁用它是不可能的。

有什么建议么？？

我登录的基础知识。

```
var data = $("#LoginAjax").serialize();
$.ajax({
        type: "post",
        url: "/users/ajax_login",
        data: data,
        dataType: "json",
        success: function(data){
            if (data == 0) {
                alert('wrong username/pass, try again!');
                //location.reload();
            }
        }
    });

public function ajax_login() {
   $this->autoRender = false;
    if ($this->request->is('ajax')) {
        $this->request->data['User']['password'] = $this->Auth->password($this->request->data['User']['password']);
        $user = $this->User->find('first', array('conditions' => array('username' => $this->request->data['User']['email'], 'password' => $this->request->data['User']['password'])));
            if($user){
                echo 1;     
            } else {
                 echo 0; 
            }
    } else {
    $this->Session->setFlash('No Dice!', 'flash/alert');
    $this->redirect($this->Auth->logout());
   }
   exit;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:38:28.873

尝试`echo $this->Js->writeBuffer();`在登录视图的末尾添加。

为什么不用CakePHP的[JsHelper呢？](http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html)

# c++ - 获取可变参数模板类的第 N 个参数的最简单方法是什么？

> ID：11811418
> 
> 赞同：16
> 
> 时间：2012-08-04T19:30:14.937
> 
> 标签：c++, templates, metaprogramming, variadic-templates

**我想知道在编译时**获取可变参数模板类的第 N 个参数的最简单和更常见的方法是什么（返回的值必须作为编译器的静态 const 才能进行一些优化）。这是我的模板类的形式：

```
template<unsigned int... T> MyClass
{
    // Compile-time function to get the N-th value of the variadic template ?
}; 
```

非常感谢你。

编辑：由于 MyClass 将包含 200 多个函数，我无法对其进行专门化。但我可以专门化 MyClass 中的结构或函数。

编辑：从经过验证的答案得出的最终解决方案：

```
#include <iostream>

template<unsigned int... TN> class MyClass
{
    // Helper
    template<unsigned int index, unsigned int... remPack> struct getVal;
    template<unsigned int index, unsigned int In, unsigned int... remPack> struct getVal<index, In,remPack...>
    {
        static const unsigned int val = getVal<index-1, remPack...>::val;
    };
    template<unsigned int In, unsigned int...remPack> struct getVal<1,In,remPack...>
    {
        static const unsigned int val = In;
    };

    // Compile-time validation test
    public:
        template<unsigned int T> inline void f() {std::cout<<"Hello, my value is "<<T<<std::endl;}
        inline void ftest() {f<getVal<4,TN...>::val>();} // <- If this compile, all is OK at compile-time
};
int main()
{
    MyClass<10, 11, 12, 13, 14> x;
    x.ftest();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T19:40:59.377

“归纳设计”应该是这样的：

```
template<unsigned int N, unsigned int Head, unsigned int... Tail>
struct GetNthTemplateArgument : GetNthTemplateArgument<N-1,Tail...>
{
};

template<unsigned int Head, unsigned int... Tail>
struct GetNthTemplateArgument<0,Head,Tail...>
{
    static const unsigned int value = Head;
};

template<unsigned int... T> 
class MyClass
{
     static const unsigned int fifth = GetNthTemplateArgument<4,T...>::value;
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-04T19:56:45.777

这是另一种方法：

```
template<unsigned int index, unsigned int In, unsigned int... remPack> struct getVal
{
    static const unsigned int val = getVal<index-1, remPack...>::val;
};
template<unsigned int In, unsigned int...remPack> struct getVal<0,In,remPack...>
{
    static const unsigned int val = In;
};

template<unsigned int... T> struct MyClass
{
    //go to any arg by : getVal<Some_Unsigned_Index, T...>::val;
}; 
```

测试： http: [//liveworkspace.org/code/4a1a9ed4edcf931373e7ab0bf098c847](http://liveworkspace.org/code/4a1a9ed4edcf931373e7ab0bf098c847)

如果你被“无法将'T ...'扩展到固定长度的参数列表” [http://ideone.com/YF4UJ](http://ideone.com/YF4UJ)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-05T15:45:46.700

您还可以执行以下操作

```
template<int N, typename T, T ... Ts>
struct GetN {
  constexpr T values[sizeof...(Ts)] = { Ts... };
  static const T value = values[N];
};

template<int N, typename T, T ... Ts>
constexpt T GetN<N, T, Ts...>::values[sizeof...(Ts)]; 
```

然后你可以简单地做

```
template<int N, unsigned int... T> struct MyClass {
  static const unsigned int value = GetN<N, unsigned int, T...>::value;
}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-05T17:26:23.837

还有一个简单的方法：

```
#include <array>

template<int... Args>
class Foo {
 public:
  static constexpr int Element(int index) {
    return std::array<int, sizeof...(Args)>{ Args... }[index];
  }

 int First = Element(0);
 int Second = Element(1);
};

int main() {
  return Foo<0, 1>::Element(0);  
}

// or just
int Nth = std::array<int, sizeof...(Args)>{ Args... }[N]; 
```

顺便说一句，这是提取任何可变参数模板的第 N 个参数的一般方法：

```
#include <tuple>

template<typename... Args>
class Foo {
 public:
  template <int N>
  using Nth = typename std::remove_reference<decltype(std::get<N>(std::declval<std::tuple<Args...>>()))>::type;
};

int main() {
  Foo<int, float>::Nth<1> val = 3.14159f;
  return 0; 
} 
```

# ios - iOS：在 UILabel 的子类中存储块和调用它的方法会造成麻烦吗？

> ID：11811420
> 
> 赞同：0
> 
> 时间：2012-08-04T19:30:29.823
> 
> 标签：ios, subclass, objective-c-blocks

所以，我一直在研究如何将块作为选择器传递给按钮，答案似乎比我需要的要复杂。

如果我将 UILabel 子类化为一个名为的方法`doBlock;`和一个名为的块变量`blockToDo`，并且所有方法都是调用`blockToDo ();`，那么我不能这样做：

```
myLabel.blockToDo = ^myBlock;   
[myButton addTarget: myLabel action: @selector (doBlock) forControlEvents: UIControlEventTouchUpInside]; 
```

或者这会让我陷入某种我不知道的麻烦？

编辑：所以，这里有两件事：我真正想做的事情，以及我提出的问题的答案。它们是不同的东西。

表达我的问题的另一种方式可能是将其一分为二。一半是“如果我想向 UILabel 添加一个简单的方法，我可以将其子类化并添加该方法，还是 UILable 的子类有义务做很多其他事情？” 另一半是“向`doBlock;`子类添加方法似乎是将块作为选择器传递的最简单方法，但这些板上的所有建议似乎都是为此目的定义一个全新的类，这似乎是很多额外的工作。为什么？

似乎大多数人都解决了第二个问题，这是可以理解的，因为它实际上是所述原始问题中更明显的部分。

但是，至于我真正想做的事情：我最终要做的是定义一个具有`doBlock;`方法的类别，并使用[关联引用](http://oleb.net/blog/2011/05/faking-ivars-in-objc-categories-with-associative-references/)将`^myBlock`ivar 存储在该类别中。这是非常通用的，因为我可以使用类别将块添加到任何类上，然后它会响应`@selector (doBlock)`.

所以，我不知道如何结束这个。我提出的问题已得到部分回答，但事实证明，我真正想做的并不是与所提出的问题直接相关。我应该如何授予最佳答案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T23:00:15.923

我会做类似以下的事情。您还可以创建一个使这更容易的类别。注意`addTarget:action:forControlEvents:`不保留目标。

更新：如果您使用 ARC，最好的解决方案可能是创建一个将自身分配为关联对象的类别。但是，看看我多久以前写过这个答案，可能有更好的解决方案可用。

```
BlockExecutor *executor = [BlockExecutor executorWithBlock:^(id sender) {

}];

[myButton addTarget:executor action:@selector(invokeWithSender:) forControlEvents: UIControlEventTouchUpInside]; 
```

块执行器.h

```
typedef void (^BlockExecutorBlock)(id);

@interface BlockExecutor : NSObject

@property(nonatomic, copy)BlockExecutorBlock block;

+ (BlockExecutor*)executorWithBlock:(BlockExecutorBlock)block;

@end 
```

块执行器.m

```
@implementation BlockExecutor
@synthesize block = _block;;

+ (BlockExecutor*)executorWithBlock:(BlockExecutorBlock)aBlock
{
    BlockExecutor *executor = [[BlockExecutor alloc] init];
    executor.block = aBlock;

    return [executor autorelease];
}

- (void)dealloc
{
    self.block = nil;
    [super dealloc];
}

- (void)invokeWithSender:(id)sender
{
    if(_block)
    {
        _block(sender);
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T23:25:36.847

您所描述的不会像崩溃或内存泄漏那样“引起麻烦”。

但是，这很可能违反了 MVC 设计模式。通常在 MVC 中，按钮（即视图）向控制器发送消息。然后控制器或者直接更新标签（另一个视图）（如果按钮操作不应该改变模型），或者控制器修改模型，这导致标签被适当地更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T20:32:44.783

使用这种方法，您可以很容易地结束一个保留周期。假设块引用了控制器：

```
label.blockToDo = ^{
    [controller didTapLabel];
} 
```

该块将保留控制器，因此无法释放控制器。由于控制器永远不会收到它的最终版本，它不会删除它的视图，标签也不会释放回调块。

您可以通过注意块中的内容来解决此问题，但我认为将块保留在控制器中并通过附加到标签的目标/操作的选择器调用它会更干净。

# asp.net-mvc - 注入的asp.net mvc控制器构造函数中的多个依赖项

> ID：11811421
> 
> 赞同：1
> 
> 时间：2012-08-04T19:30:30.107
> 
> 标签：asp.net-mvc, model-view-controller, dependency-injection, controller

在我的 asp.net mvc 控制器的构造函数中，我有多个 (5) 接口，它们以这种方式与我的数据库通信：

```
[HttpGet]
public ActionResult Create()
{          
 var releases = _releaseDataProvider.GetReleases();
 var templates = _templateDataProvider.GetTemplates();
 var createTestplanViewModel = new CreateTestplanViewModel(templates, releases);
 return PartialView(createTestplanViewModel);
} 
```

上面我使用 2 个不同的接口从数据库中获取数据。

商业案例：要创建一个测试计划，我需要向用户展示他可以选择的可用版本和模板。

如何减少这两个接口的依赖/过度注入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:29:17.060

在 MVC 项目中：

```
public class MyController : Controller
{
    private readonly IQueryProcessor _queryProcessor;

    public MyController(IQueryProcessor queryProcessor)
    {
        _queryProcessor = queryProcessor;
    }

    [HttpGet]
    public ActionResult Create()
    {
        var releases = _queryProcessor.Execute(new ProvideReleaseData());
        var templates = _queryProcessor.Execute(new ProvideTemplateData());
        var createTestplanViewModel = AutoMapper.Mapper
            .Map<CreateTestplanViewModel>(releases);
        AutoMapper.Mapper.Map(templates, createTestplanViewModel);
        return PartialView(createTestplanViewModel);
    }
} 
```

然后，您可以构造函数将您当前的提供者实现注入到`IQueryHandler`实现中。这`IQueryProcessor`只是基础设施。有关更多信息，请参见：[https ://cuttingedge.it/blogs/steven/pivot/entry.php?id=92](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)

**回复评论：**

它在我链接的网站上。这是我的：

```
using System.Diagnostics;
using SimpleInjector;

namespace MyApp.Infrastructure
{
    sealed class SimpleQueryProcessor : IQueryProcessor
    {
        private readonly Container _container;

        public SimpleQueryProcessor(Container container)
        {
            _container = container;
        }

        [DebuggerStepThrough]
        public TResult Execute<TResult>(IDefineQuery<TResult> query)
        {
            var handlerType = typeof(IHandleQueries<,>)
                .MakeGenericType(query.GetType(), typeof(TResult));

            dynamic handler = _container.GetInstance(handlerType);

            return handler.Handle((dynamic)query);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T19:40:26.250

**编辑**

在我看来，您基本上有这些选项来减少这里的构造函数依赖计数：

1.  拆分控制器
2.  在两个接口前面添加层
3.  切换到属性注入
4.  服务定位器

#3 和 #4 被包括在内是为了很好的衡量，但它们显然并没有真正减少依赖计数，它们只是将它们隐藏在构造函数中。它们也有几个缺点，我认为服务定位器在大多数情况下尤其邪恶。

对于＃1，如果您觉得您的构造函数实际上是在做两个以上的工作，并且您可以拆分的地方有一个干净的分离，我会这样做。但是，我从您的回复中假设您已经考虑过这一点，并且不想这样做。

剩下的＃2 - 添加另一层。在这种情况下，将为该特定视图模型引入工厂接口。天真地，我将此命名为 ICreateTestplanViewModelFactory，但如果您愿意，您可以将其命名为对您的应用程序更有意义的名称。其上的单个方法将构造一个 CreateTestplanViewModel。

这使得该视图的数据来自 2 个来源这一事实仅仅是实现细节。您将连接一个将 IReleaseDataProvider 和 ITemplateDataProvider 作为构造函数依赖项的实现。

* * *

这与我的建议一致：

```
public interface IProvideTestPlanSetupModel
{
    CreateTestplanViewModel GetModel();
}

public class TestPlanSetupProvider : IProvideTestPlanSetupModel
{
    private readonly IReleaseDataProvider _releaseDataProvider;
    private readonly ITemplateDataProvider _templateDataProvider;

    public TestPlanSetupProvider(IReleaseDataProvider releaseDataProvider, ITemplateDataProvider templateDataProvider)
    {
        _releaseDataProvider = releaseDataProvider;
        _templateDataProvider = templateDataProvider;
    }

    public CreateTestplanViewModel GetModel()
    {
        var releases = _releaseDataProvider.GetReleases();
        var templates = _templateDataProvider.GetTemplates();

        return new CreateTestplanViewModel(releases, templates);
    }
}

public class TestPlanController : Controller
{
    private readonly IProvideTestPlanSetupModel _testPlanSetupProvider;

    public TestPlanController(IProvideTestPlanSetupModel testPlanSetupProvider)
    {
        _testPlanSetupProvider = testPlanSetupProvider;
    }

    [HttpGet]
    public ActionResult Create()
    {
        var createTestplanViewModel = _testPlanSetupProvider.GetModel();
        return PartialView(createTestplanViewModel);
    }
} 
```

如果您不喜欢在控制器之外的任何地方构建视图模型，该接口可以提供一个中间对象，该对象具有您将复制到视图模型的相同属性。但这很愚蠢，因为这种数据组合仅与特定视图相关，而这正是视图模型应该表示的内容。

附带说明一下，您似乎在通过同一模型进行读/写时遇到了非常常见的烦恼。由于这些问题困扰着您，您可能会调查 CQRS，这可能会让您对直接与数据库进行这些类型的查询对话时感觉不那么脏，并且会帮助您绕过我们都非常喜欢的分层迷宫。这似乎很有希望，尽管我还没有在生产应用程序中试驾它的乐趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T19:46:59.747

解耦数据库的一个很好的通用方法是使用工作单元。[这是asp.net](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)上的一篇很棒的文章，以及[MSDN](http://msdn.microsoft.com/en-us/magazine/dd882510.aspx)上的另一篇文章。

总之，您创建了一个单元，所有数据库/服务调用都驻留在其中，它可以处理数据库逻辑。这会将您的多个接口的依赖性减少到一个点，因此您只需将 1 个类注入您的控制器。

引用 MSDN 文章：

> 根据 Martin Fowler 的说法，工作单元模式“维护受业务事务影响的对象列表，并协调更改的写入和并发问题的解决”。

# php - 为什么我在使用 php://stdin 时收到重复的正文内容邮件？

> ID：11811424
> 
> 赞同：0
> 
> 时间：2012-08-04T19:30:53.327
> 
> 标签：php, parsing, email

我有一个后缀服务器将所有传入的邮件重定向到一个 php 脚本

但邮件的正文内容似乎重复，看起来：

```
--000e0ce03cf6d06b0c04c67595d4
Content-Type: text/plain; charset=ISO-8859-1

why
show
this
duplicated?

--000e0ce03cf6d06b0c04c67595d4
Content-Type: text/html; charset=ISO-8859-1

why<div>show</div><div>this</div><div>duplicated?</div>

--000e0ce03cf6d06b0c04c67595d4-- 
```

我已经使用带有此正文内容的 gmail 发送了这封邮件：

```
why
show
this
duplicated? 
```

为什么会出现两次邮件？（和一个在 html 中：S）

我怎样才能只得到一个？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:35:55.473

假设您的代码返回相同类型的分隔符，一种方法可能是执行以下操作：

```
// Get separator
$mail_pieces = explode("\n", $mail);
$separator = $mail_pieces[0];

// Separate email
$mail_pieces = explode($separator, $mail);
$text_mail = $mail[0];
$html_mail = $mail[1]; 
```

# html - 为什么 .tagName DOM 属性返回大写值？

> ID：11811426
> 
> 赞同：19
> 
> 时间：2012-08-04T19:31:03.420
> 
> 标签：html, dom, standards, tagname

例如，如果我们有

```
<html>
    <head>
        <title>FooBar</title>
    </head>
    <body></body>
</html> 
```

如果我们这样做`document.getElementByTagName("title").TagName`，那么我们将拥有`TITLE`（大写）。而 html 标准建议以小写形式编写 html 标签。

我知道两者之间没有关系，但这仍然没有意义。

DOM 是否有任何理由应该以大写形式返回标签​​名称？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-04T19:46:13.167

从技术上讲，这是[DOM Level 1](http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-745549614)中规定的：

> `tagName`无论源 HTML 文档中的大小写如何，HTML DOM 都会以规范的大写形式返回HTML 元素的 。

大写标签名称的约定可能源于遗留问题，当时 HTML 是基于 SGML 开发的，元素类型以大写形式声明。请参阅[讨论 SGML、HTML 及其语法的 HTML 4.01 规范的这一部分，](http://www.w3.org/TR/html401/intro/sgmltut.html)以及例如[HTML 4.01 Strict 文档类型定义](http://www.w3.org/TR/html401/sgml/dtd.html)。任何支持 HTML 的 DOM 实现都会效仿。

请注意，小写标签名称仅在 XHTML（但不是 XML）中明确要求，并且通常建议作者编写小写标签以便在 HTML/XHTML 之间轻松移植，并提高可读性。但是，此建议并未出现在规范中；它只是说标签名称仅在 HTML 中不区分大小写，而不是在 XHTML 和 XML 中。

# jquery - Heroku 上的 jQuery 异常

> ID：11811428
> 
> 赞同：1
> 
> 时间：2012-08-04T19:31:15.970
> 
> 标签：jquery, html, jquery-mobile, heroku

我将 jQuery 1.7.1 和 jQuery Mobile 1.1.1 用于简单的移动应用程序。在本地运行良好（Mac OSX Lion）。当我部署到 Heroku 时，我的应用程序不会在浏览器中加载。开发工具 (chrome) 在 jQuery.js 中向我显示以下错误：

```
Uncaught TypeError: Cannot read property 'prototype' of undefined 
```

![在此处输入图像描述](../Images/20f586461fa16cef1b24bd86d2436dac.png)

似乎我正在做的事情非常困难。从 Heroku 提供资产后，如何组装资产会不会是个问题？

更新：另外一个不是，只有当我在 Chrome 中打开开发人员工具时才会发生这种情况。我可以关闭它，但我还有另一个需要开发工具才能看到的错误！感谢任何线索。

# java - 滑块求解器空指针异常

> ID：11811429
> 
> 赞同：0
> 
> 时间：2012-08-04T19:31:22.843
> 
> 标签：java, nullpointerexception

我正在编写一个滑块求解器，它有一个块对象列表（其中包含块大小和左上角的位置）和一个表示托盘的二维数组。只要有块，数组中的那个位置就指向块对象，否则为空。

在我的求解器中，我正在生成尚未见过的可能移动，将它们散列，然后选择一个来做（这会改变托盘布局）并在新的托盘布局上递归调用求解器。当在我返回调用之前没有更多可能的移动布局时，反转上一个移动并继续检查上一个调用，依此类推，直到它被解决或者我用完移动（没有解决方案）。

问题是，当我移动时，我得到了一个空指针异常。奇怪的是，它只发生在相当多的递归调用之后。该程序很好地运行了几次调用/移动，然后它似乎搞砸了。

generateMoves() 通过调用 move() 测试之前是否看到过移动，然后在检查后反转移动。我认为空指针在调用 move() 之后发生，并且 move() 正在设置 toMove = layout[][]。显然，它正在数组中查找一个为空的位置，而不是块中的一个位置。块列表和托盘数组之间似乎存在差异......因为当 move() 然后调用 setTrayAfterMove() 时，它会引发异常。我无法弄清楚为什么它适用于对 solveHelper() 的多次递归调用但随后中断。

```
import java.io.*; 
import java.util.*; 

public class Solver { 
    Tray initial; 
    Tray goal; 
    HashSet<Integer> visited; 
    LinkedList<Integer> movesToSolution; // list of moves leading to solution 
    int recursionCounter; 
    boolean isSolved; 

    public Solver(String initial, String goal) { 
        this.initial = new Tray(initial); 
        this.goal = new Tray(this.initial, goal); 
        visited = new HashSet<Integer>(); 
        movesToSolution = new LinkedList<Integer>(); 
        recursionCounter = 0; 
        isSolved = false; 
    } 

    public void solve() { 
        if (goal.equals(initial)) { 
            System.out.println("Solver finished no moves"); 
            return; 
        } 
        solveHelper(initial); 
        if (movesToSolution.isEmpty()) { 
            System.out.println("No solution"); 
            System.exit(1); 
        } 
        printMoves(); 
        System.out.println("Solver finished"); 
    } 

    private void solveHelper(Tray t) { 
        Stack<Integer> possibleMoves = new Stack<Integer>(); 
        int lastMoveMade = 0; 
        if (recursionCounter > 5000 || isSolved) { 
            return; 
        } 
        if (goal.equals(t)) { 
            isSolved = true; 
            // movesToSolution.addFirst(lastMoveMade); 
            return; 
        } 
        recursionCounter++; 

        LinkedList<Integer> movesToAdd = t.generateMoves(); 
        Iterator<Integer> movesIter = movesToAdd.iterator(); 
        while (movesIter.hasNext()) { 
            possibleMoves.push(movesIter.next()); 
        } 

        while (!possibleMoves.isEmpty()) { 
            lastMoveMade = possibleMoves.pop(); 
            boolean isMoved = t.move(lastMoveMade, false); 

            if (isMoved) { 
                int moveHash = t.hashCode(); 
                visited.add(moveHash); 
                solveHelper(t); 
            } 

            if (isSolved) { 
                movesToSolution.addFirst(lastMoveMade); 
                return; 
            } 
        } 
        t.move(lastMoveMade, true); 
        return; 
    } 

    public void printMoves() { 
        for (Integer move : movesToSolution) { 
            System.out.println(move); 
        } 
    }      

    public class Tray { 
        private int length; // number of rows 
        private int width; // number of columns 
        private LinkedList<Block> blocks; 
        private Block[][] layout; 

        public Tray(String file) { 
            blocks = new LinkedList<Block>(); 
            try { 
                Scanner s = new Scanner(new FileReader(file)); 
                length = s.nextInt(); 
                width = s.nextInt(); 
                layout = new Block[width][length]; 

                while (s.hasNextLine()) { 
                    int l = s.nextInt(); 
                    int w = s.nextInt(); 
                    int r = s.nextInt(); 
                    int c = s.nextInt(); 
                    Block b = new Block(l, w, r, c); 
                    blocks.add(b); 

                    for (int blockX = b.col; blockX < b.col + b.width; blockX++) { 
                        for (int blockY = b.row; blockY < b.row + b.length; blockY++) { 
                            layout[blockX][blockY] = b; 
                        } 
                    } 
                    s.nextLine(); 
                    // isOK(); 
                } 
            } catch (FileNotFoundException e) { 
                System.out.println("File not found"); 
            } 
        } 

        public Tray(Tray t, String file) { 
            blocks = new LinkedList<Block>(); 
            try { 
                this.length = t.length; 
                this.width = t.width; 
                Scanner s = new Scanner(new FileReader(file)); 
                layout = new Block[this.width][this.length]; 

                while (s.hasNextLine()) { 
                    int l = s.nextInt(); 
                    int w = s.nextInt(); 
                    int r = s.nextInt(); 
                    int c = s.nextInt(); 
                    Block b = new Block(l, w, r, c); 
                    blocks.add(b); 

                    for (int blockX = b.col; blockX < b.col + b.width; blockX++) { 
                        for (int blockY = b.row; blockY < b.row + b.length; blockY++) { 
                            layout[blockX][blockY] = b; 
                        } 
                    } 
                    s.nextLine(); 
                    // isOK(); 
                } 
            } catch (FileNotFoundException e) { 
                System.out.println("File not found"); 
            } 
        } 

        public void print() { 
            for (Block b : blocks) { 
                System.out.println(b.length + " " + b.width + " " + b.col + " "
                        + b.row); 
            } 
        } 

        public boolean equals(Object o) { 
            for (int x = 0; x < this.width; x++) { 
                for (int y = 0; y < this.length; y++) { 
                    if (this.layout[x][y] != null
                            && (((Tray) o).layout[x][y] == null || !((Tray) o).layout[x][y] 
                                    .equals(this.layout[x][y]))) { 
                        return false; 
                    } 
                } 
            } 
            return true; 
        } 

        public int hashCode() { 
            // TODO come up with hashcode unique to layout taking in 
            // consideration block at each coordinate, size of block 
            int hashCode = 0; 
            for (Block b : blocks) { 
                hashCode += (17 * (b.width * b.col)) + (7 * (b.length * b.row)); 
            } 
            return hashCode; 
        } 

        public boolean isOK() { 
            Block[][] trayChecker = new Block[width][length]; 
            Iterator<Block> blockIter = blocks.iterator(); 

            while (blockIter.hasNext()) { 
                Block b = blockIter.next(); 
                for (int x = b.col; x < x + b.width; x++) { 
                    for (int y = b.row; y < y + b.length; y++) { 
                        if (trayChecker[x][y] != null) { 
                            throw new IllegalStateException( 
                                    "Two blocks cannot be in the same location"); 
                        } 
                        if (x < 0 || x > width || y < 0 || y > length) { 
                            throw new IllegalStateException( 
                                    "Block must be completely on the board"); 
                        } 
                        trayChecker[x][y] = b; 
                    } 
                } 
            } 
            return true; 
        } 

        // only returns possible valid moves that haven't been seen before 
        public LinkedList<Integer> generateMoves() { 
            LinkedList<Integer> movesToTry = new LinkedList<Integer>(); 
            // TODO: generate moves that haven't been seen 
            int[] moveDir = { -10, 10, -1, 1 }; 
            for (Block b : blocks) { 
                for (int m : moveDir) { 
                    if (canMove(b, m)) { 
                        int trayMove = createMove(b, m); 
                        move(trayMove, false); 
                        if (!visited.contains(hashCode())) { 
                            movesToTry.add(trayMove); 
                        } 
                        move(trayMove, true); // reverse the move 
                    } 
                } 
            } 
            return movesToTry; 
        } 

        public boolean canMove(Block b, int dir) { 
            int tmp = Math.abs(dir); 
            int y = tmp % 10; 
            int x = tmp / 10; 
            if (dir < 0) { 
                x = -x; 
                y = -y; 
            } 

            if ((b.col + x < 0 || b.col + b.width + x > this.width) 
                    || (b.row + y < 0 || b.row + b.length + y > this.length)) { 
                return false; 
            } 

            if (x == 0) { 
                for (int xBlock = b.col; xBlock < b.col + b.width; xBlock++) { 
                    if (layout[xBlock][b.row + y] != null) { 
                        return false; 
                    } 
                    // } else if(x > 0 && layout[xBlock][b.row + y + b.length - 
                    // 1] != null) { 
                    // return false; 
                    // } 
                } 
            } 

            if (y == 0) { 
                for (int yBlock = b.row; yBlock < b.row + b.length; yBlock++) { 
                    if (layout[b.col + x][yBlock] != null) { 
                        return false; 
                    } 
                    // } else if(x > 0 && layout[b.col + x + b.width - 
                    // 1][yBlock] != null) { 
                    // return false; 
                    // } 
                } 
            } 

            return true; 
        } 

        // only takes valid input 
        public boolean move(int moveDirections, boolean reverse) { 
            Block toMove = null; 
            if (moveDirections == 0) { 
                return false; 
            } 

            // System.out.println(moveDirections + " " + recursionCounter); 
            int tmp = Math.abs(moveDirections); 
            int moveY = tmp % 10; 
            tmp /= 10; 
            int moveX = tmp % 10; 
            tmp /= 10; 
            int blockY = tmp % 1000; 
            tmp /= 1000; 
            int blockX = tmp; 
            System.out.println(blockX + " + " + blockY); 

            if (reverse) { 
                if (moveDirections > 0) { 
                    toMove = layout[blockX + moveX][blockY + moveY]; 
                } else { 
                    toMove = layout[blockX - moveX][blockY - moveY]; 
                } 
                setTrayAfterMove(toMove, true); 
                if (moveDirections < 0) { 
                    toMove.col += moveX; 
                    toMove.row += moveY; 
                } else { 
                    toMove.col -= moveX; 
                    toMove.row -= moveY; 
                } 

                setTrayAfterMove(toMove, false); 
            } else { 
                toMove = layout[blockX][blockY]; 
                setTrayAfterMove(toMove, true); 
                if (moveDirections < 0) { 
                    toMove.col -= moveX; 
                    toMove.row -= moveY; 
                } else { 
                    toMove.col += moveX; 
                    toMove.row += moveY; 
                } 
                setTrayAfterMove(toMove, false); 
            } 
            return true; 
            // 256x256 
            // 1x256 23x256 
            // 100x01 100x001 100x100 
            // 1x01 1x001 1x100 
            // 10x01 10x001 10x100 
        } 

        private int createMove(Block b, int dir) { 
            // multiply b.x to get 8 digits 
            // multiply bh .y to get 5 digits 
            int move = b.col * 100000; 
            move += (b.row * 100); 
            move += Math.abs(dir); 
            if (dir < 0) { 
                move *= -1; 
            } 
            return move; 
        } 

        private void setTrayAfterMove(Block b, boolean isBeforeMove) { 
            for (int blockX = b.col; blockX < b.col + b.width; blockX++) { 
                for (int blockY = b.row; blockY < b.row + b.length; blockY++) { 
                    if(isBeforeMove) { 
                        layout[blockX][blockY] = null; 
                    } else { 
                        layout[blockX][blockY] = b; 
                    } 
                } 
            } 
        } 
    } 

    public class Block { 
        private int length; 
        private int width; 
        private int row; 
        private int col; 

        public Block(int l, int w, int r, int c) { 
            length = l; 
            width = w; 
            row = r; 
            col = c; 
        } 

        public boolean equals(Block b) { 
            return this.length == b.length && this.width == b.width 
                    && this.row == b.row && this.col == b.col; 
        } 
    } 

    public static void main(String[] args) { 
        if (args.length < 2 || args.length > 3) { 
            throw new IllegalArgumentException( 
                    "Must have at least 2 and no more than 3 arguments"); 
        } 

        String initialLayout = args[0]; 
        String goalLayout = args[1]; 
        String debug = ""; 

        if (args.length == 3) { 
            if (args[0].substring(0, 2).equals("-o")) { 
                debug = args[0].substring(2, args[0].length()); 
                switch (debug) { 
                // cases for debugging arguments go here 
                } 
            } else { 
                throw new IllegalArgumentException( 
                        "First argument must start with -o"); 
            } 
            initialLayout = args[1]; 
            goalLayout = args[2]; 
        } 

        Solver s = new Solver(initialLayout, goalLayout); 
        s.solve(); 
    } 
} 
```

有人可以看看我的代码吗？也欢迎就如何提高效率提出建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T19:56:38.090

让我给你一些建议，而不是解决你的问题，你如何自己解决这个问题。

*   你在和[IDE](http://www.jetbrains.com/idea/)中开发吗？如果你不是，现在就开始吧。
*   你用过调试器吗？如果没有，请立即开始。
*   你有没有设置过条件[断点](http://jetbrains.dzone.com/tips/set-conditional-breakpoints-id)？如果没有，请立即开始。

在为空的变量上设置条件断点，条件是该变量为空。在调试模式下运行你的程序，看看发生了什么。

如果社区为您解决了这个问题，那么您还没有学到任何关于成为更好的程序员的知识。一定要自己解决这个问题——否则你只是在推迟不可避免的事情：成为一个平庸的程序员。

# jquery - 透明的listview jquery mobile

> ID：11811430
> 
> 赞同：2
> 
> 时间：2012-08-04T19:31:38.783
> 
> 标签：jquery, mobile

如何将列表视图项目设置为透明，这里有一个例子，http: [//img440.imageshack.us/img440/8978/captureum.png](http://img440.imageshack.us/img440/8978/captureum.png)

到目前为止，我已经尝试了几种不同的方法，但都没有成功，我们将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:49:54.753

过去一个小时一直在研究这个，我自己需要它......这就是我带来的，它有效

CSS 规则：

```
.ui-listview .ui-btn-up-a {
    background: rgba(0,0,0,0.2);
} 
```

使用参数`rgba`来获得你想要的效果

并放入 HTML：

```
<div data-role="page" id="homepage" style="background: #000000 url('images/backgound.png') repeat;"> 
```

希望它有帮助，问候

# java - 如何确定用户显示的中点？

> ID：11811432
> 
> 赞同：3
> 
> 时间：2012-08-04T19:32:03.857
> 
> 标签：java, swing, position

我写了一个 Swing 应用程序。我想将 设置`JFrame`为在用户屏幕的中心。我可以使用以下方法将其设置为屏幕的大致中心：

```
JFrame frame = new JFrame("Test Frame");
Rectangle r = new Rectangle(600, 300, 400, 400);
frame.setBounds(r); 
```

有没有办法定义`Rectangle r`它的中心位于任何屏幕的中心？

`setBounds()`动态改变框架位置的方法是错误的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T19:33:39.517

您想在屏幕中居中放置 JFrame 吗？如果是这样，那么只需`setLocationRelativeTo(null)`在调用`pack()`. 如果可以避免的话，您真的不想设置 JFrame 的大小，而是让您的布局管理器为您设置大小。该`pack()`方法将要求容器的布局管理器布置其组件并为其组件设置最佳尺寸。

**编辑**
关于您的问题：

> 谢谢，那太好了。任何机会你都可以告诉我在哪里可以找到 docs.oracle 中的方法详细信息

由于可以在 JFrame 上调用此方法，因此只需转到[JFrame API](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html)即可。如果这是父类的方法，API 会告诉您并提供到父类及其方法的链接。

# wsgi - uwsgi协议和wsgi协议有什么区别？

> ID：11811434
> 
> 赞同：10
> 
> 时间：2012-08-04T19:32:40.490
> 
> 标签：wsgi, uwsgi

我知道 uwsgi 是在 uWSGI 服务器中实现的协议。但是与 wsgi 相比，它有哪些变化呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-04T23:32:59.543

uwsgi 协议是使用 uWSGI 在进程之间的套接字上使用的有线协议。它无法与 WSGI 相提并论，后者是 Python 的编程 API。uwsgi 协议更类似于 FASTCGI 或 SCGI。它与语言无关。从记忆来看，它和 SCGI 之间几乎没有什么区别。

简而言之，uwsgi 的名称为“wsgi”是个坏主意，因为它实际上与 WSGI 无关。你仍然需要一个适配器来从 uwsgi 到 Python WSGI。对于以 C 代码编写并嵌入到 uWSGI 中的 uWSGI。也可以在 uwsgi 和其他语言 API 之间为 Web 应用程序编写一个适配器，并且 uWSGI 内部也有这样的东西。

# javascript - jQuery 事件 ajax 调度

> ID：11811437
> 
> 赞同：1
> 
> 时间：2012-08-04T19:33:02.877
> 
> 标签：javascript, jquery

在 jQuery 中，是否有聪明的/速记方式将标识符附加到一些一般的 ajax 事件？

为了解释，我正在创建一些功能，这些功能分为两个单独的功能：模块 A 和模块 B。模块 A 以及其他一些东西主要负责 ajax 调用。模块 B 负责前端 dom 工作，在模块 a 完成并返回 ajax 调用之后。

我目前只是为每个 ajax 函数触发事件：

*   发送前
*   成功
*   完全的
*   错误

所以模块有这个代码（除其他外）：

```
 $.ajax({
    url: 'myajaxurl',
    beforeSend : function() {
        $('#form').trigger('module_a_before_send');
    },
    success: function(response) {
       $('#form').trigger('module_a_success');
    },
    complete: function() {
        $('#form').trigger('module_a_complete');
    },
    error: function(textStatus) {
        $('#form').trigger('module_a_error');
    },
    timeout: 3000
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:38:01.390

您可以使用 data 选项向服务器端发送一个值来识别 ajax 调用：

```
var data = if some event ? attach some value : if not attach other value etc,
    elem = $('#form');
$.ajax({
    url: 'myajaxurl',
    data: data,
    beforeSend : function() {
        elem.trigger('module_a_before_send');
    },
    success: function(response) {
       elem.trigger('module_a_success');
    },
    complete: function() {
        elem.trigger('module_a_complete');
    },
    error: function(textStatus) {
        elem.trigger('module_a_error');
    },
    timeout: 3000
}); 
```

如何捕获数据取决于所使用的服务器端语言，但对于 PHP 之类的语言，它将是`$_POST`全局的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T19:46:25.567

我对这个问题有点困惑。如果您需要模块之间的一些通信，您可以使用可以传递给触发器的额外数据参数（请参阅[http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)）

```
$(elem).trigger('my-custom-event', {id:1}) 
```

和相应的事件处理程序

```
$(elem).bind('my-custom-event', function(event, data) {}); 
```

另一种方法是创建自己的自定义事件

```
var event = $.Event('my-custom-event',{id:1})
$(elem).trigger(event) 
```

通过这种方式，您可以直接将地图中的属性添加到 jQuery 事件对象中。

# r - For 循环计数不正确

> ID：11811439
> 
> 赞同：0
> 
> 时间：2012-08-04T19:33:32.663
> 
> 标签：r, for-loop

我一生都无法弄清楚这里发生了什么。我有一个包含数千行的数据框。其中一列是“名称”，其他列有各种因素。我试图计算有多少独特的行（即因子集）属于每个“名称”。

这是我作为脚本运行的循环：

```
names<-as.matrix(unique(all.rows$name))
count<-matrix(1:length(names))
for (i in 1:length(names)) {
  count[i]<-dim(unique(subset(all.rows,name==names[i])[,c(1,3,4,5)]))[1]
} 
```

当我从控制台运行for循环中的行并将“i”替换为任意数字（即10、27、40，...）时，它给了我正确的计数。但是当我在 for 循环中运行这条线时，最终的结果是计数都是一样的。我不知道为什么它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:54:35.663

你可以用更简单的代码来做到这一点。尝试将每行中的因子值粘贴在一起，然后使用`tapply`. 这是一个工作示例：

```
data(trees)
trees$name <- rep(c('elm', 'oak'), length.out = nrow(trees))
trees$HV   <- with(trees, paste(Height, Volume))
tapply(trees$HV, trees$name, function (x) length(unique(x))) 
```

最后一个命令为您提供所需的计数。据我所知，给定变量名称的类似代码是

```
all.rows$factorCombo <- apply(all.rows[, c(1, 3:5)], 2, function (x) paste(x, collapse = ''))
tapply(all.rows$factorCombo, all.rows$name, function (x) length(unique(x))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T20:23:28.923

您的代码对我有用：

```
# Sample data.
set.seed(1)
n=10000
all.rows=data.frame(a=sample(LETTERS,n,replace=T),b=sample(LETTERS,n,replace=T),name=sample(LETTERS,n,replace=T))

names<-as.matrix(unique(all.rows$name))
count<-matrix(1:length(names))
for (i in 1:length(names)) {
  count[i]<-dim(unique(subset(all.rows,name==names[i])[,c(1,2)]))[1]
}
t(count) 
```

如果你想坚持使用 for 循环，这更清楚一点：

```
count<-c()
for (i in unique(all.rows$name)) 
  count[i]<-nrow(unique(all.rows [all.rows$name==i,names(all.rows)!='name']))
count 
```

但是使用`by`会非常简洁：

```
c(by(all.rows,all.rows$name,function(x) nrow(unique(x)))) 
```

# ruby-on-rails - Rails 表单提交导致 nil:NilClass 的未定义方法“allow_forgery_protection”

> ID：11811444
> 
> 赞同：0
> 
> 时间：2012-08-04T19:33:55.313
> 
> 标签：ruby-on-rails

我正在尝试创建一个从 1 个控制器提交到另一个控制器的表单。当我这样做时，我得到“nil:NilClass 的未定义方法'allow_forgery_protection'”。但是，如果我 POST 回同一个控制器，它会成功提交。

要知道的事情

*   我的应用程序控制器已`protect_from_forgery`设置。我不是`:before_filter`为了减少可能出现的问题而搞砸或做任何事情。

*   两种控制器都没有型号。两者都是用`rails g controller <name>`

*   Rails 3.2 如果它有所作为

### 应用程序/控制器/first_controller.rb

```
def myaction
end 
```

### app/views/first/myaction.html.erb

```
<%= form_tag(url_for(:controller => 'second', :action => controller.action_name), :method => :post) do %>
  <fieldset>
    <%= label_tag(:file_dir, "File location") %>
    <%= text_field_tag :file_dir, "/var/log" %>
  </fieldset>
  <%= submit_tag "Submit" %>
<% end %> 
```

### 应用程序/控制器/second_controller.rb

```
def myaction
end 
```

### app/views/second/myaction.html.erb

```
<h1>Second#myaction</h1>
<p>Find me in app/views/second/myaction.html.erb</p> 
```

### 路线.rb

```
 match 'first/:action' => 'first#:action'
 match 'second/:action' => 'second#:action' 
```

It's probably my lack of understanding about the CSRF, but I don't see how simply changing `:controller => 'second'`to `:controller => 'first'` will determine whether the nearly identical controllers will work.

### Part of the log

```
# Rendered the form
Started GET "/first/myaction" for 127.0.0.1 at 2012-08-04 14:20:00 -0500
Processing by FirstController#myaction as HTML
Rendered first/myaction.html.erb within layouts/application (3.7ms)
Completed 200 OK in 142ms (Views: 141.9ms | ActiveRecord: 0.0ms)

# Submitted the form here
Started POST "/second/myaction" for 127.0.0.1 at 2012-08-04 14:22:00 -0500
Processing by SecondController#myaction as HTML
Parameters: {"utf8"=>"✓", "authenticity_token"=>"xyQetj0Wdks+iuOXNjrxs96TbEJOw4ktURTrraEARoU=",<everything else looks fine>}
Completed 500 Internal Server Error in 0ms
NoMethodError (undefined method `allow_forgery_protection' for nil:NilClass): 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:05:50.263

I created a third controller to test with (via the same exact steps), and the form performed a POST properly.

During this same time, the second threw this forgery error consistently.

I deleted the second controller with `rails destroy controller second`, and recreated it with `rails g controller second`, keeping the same routes in routes.rb, and everything worked properly.

# javascript - Jquery / AJAX 滑动菜单 - CrazyEgg - 与常见问题一起使用

> ID：11811446
> 
> 赞同：-1
> 
> 时间：2012-08-04T19:34:19.373
> 
> 标签：javascript, jquery, ajax, sliding

我在弄清楚 Crazy Egg 用于他们的常见问题解答时遇到了一些麻烦，我想完全实现同样的事情（点击时问题会向下滑动 - 并为当前的活动问题显示一个蓝色框）。

例如）[https://www.crazyegg.com/help](https://www.crazyegg.com/help)

我浏览了代码，发现它有 javascript 事件，但我无法自己编写脚本。有没有可以用于这种行为的插件？我认为某种形式的显示/隐藏 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:42:14.140

您应该能够使用 jquery 自己编写代码。只需查看非常基本的 jQuery 教程，其中包含*选择器*、*隐藏和显示*以及*单击事件*。您所做的就是为您单击的每个标题分配一个 id，然后在单击时隐藏所有内容并显示单击的内容。您应该在线阅读一些东西，尝试一些东西，然后返回代码并提出问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T19:43:12.687

这个效果可以通过jQuery的`slideToggle`函数轻松实现：

**HTML：**

```
<span class="faq">This is a FAQ question...</span>
<div class="answer" style="display: none;">
    And this is the answer.
</div> 
```

**JavaScript：**

```
$(document).ready(function(){
    $(".faq").click(function(){
        $(this).next("div.answer").slideToggle();
    });
}); 
```

JSFiddle：http: [//jsfiddle.net/ySahP/](http://jsfiddle.net/ySahP/)

# javascript - JS：如果未找到原型，则新窗口 [className] 停止执行

> ID：11811452
> 
> 赞同：0
> 
> 时间：2012-08-04T19:35:21.407
> 
> 标签：javascript, prototype

只是想知道如何根据其名称测试原型是否可用。

例如：

```
var node = new window[className];   
console.log('test'); 
```

如果提供的 className 与可用的原型不匹配，则不会打印任何内容。

所以测试：

```
if(! window[className]) {...} 
```

什么都不做，执行就停止了，在那之后没有可用的断点。

我该如何处理这种情况？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:56:49.153

`className`如果您想在不可用时发生某些事情，只需使用一个[简单的`else`语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/if...else)：

```
if(! window[className]) {
   ...
} else {
   alert("No truthy property '"+className+"' was found on the window object");
   throw new Error("something bad happened");
   // whatever
} 
```

# jquery - 当在 ipad 和 iphone 上查看我的网站时，如何向 :active 添加点击声音？

> ID：11811455
> 
> 赞同：0
> 
> 时间：2012-08-04T19:35:38.693
> 
> 标签：jquery, audio, touch, screen

css 动画和过渡确实很棒——但是当使用触摸屏设备（例如 ipad）时，它们对 :hover 没有影响——这会带来一些乐趣。

我想为一些按钮的 :active 状态添加一个简单的声音，让我的用户在使用触摸屏时单击链接时更加满意......但我不想为每个站点构建一个特殊的应用程序。 ..有人对我有什么建议吗？有没有办法只用 html 和 css 或者 jQuery 来做到这一点？

# c++ - C++ 为什么我以这种格式检索 double

> ID：11811456
> 
> 赞同：-4
> 
> 时间：2012-08-04T19:35:44.603
> 
> 标签：c++

> **可能重复：**
> [在输出的 7 个字符处双截断](https://stackoverflow.com/questions/10996899/double-truncates-at-7-characters-of-output)

C++ 为什么我以这种格式检索 double

1.4547e+08

如果我看到数据本身，它应该是

1.45470197.00

任何人都知道如何将双 1.4547e+08 转换回 1.45470197.00

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T19:39:49.777

如果您使用 打印数据，请`std::cout`使用`std::fixed`以防止科学记数法

```
double d = 145470197.00;
std::cout << std::fixed << d; 
```

# actionscript-3 - 语法错误 1084 无论我做什么

> ID：11811462
> 
> 赞同：0
> 
> 时间：2012-08-04T19:36:59.007
> 
> 标签：actionscript-3, syntax

我正在尝试为游戏制作工具......按下按钮会在计算后给出一些结果。该代码尚未完成，但它不必给出错误。这是代码：

```
import flash.events.MouseEvent;
//-----------------------variables------------------------

var iPPP1:String;
var iPPP2:String;
var iPPP3:String;
var iPPP4:String;
var iPPP5:String;
var iPPP6:String;
var iPPP7:String;
var iCntbonus:String;
var iRawPrice:String;
var iAverSal:String;
var iTax:String;
var iNoC7:String;
var iNoC6:String;
var iNoC5:String;
var iNoC4:String;
var iNoC3:String;
var iNoC2:String;
var iNoC1:String;
var iEm7:String;
var iEm6:String;
var iEm5:String;
var iEm4:String;
var iEm3:String;
var iEm2:String;
var iEm1:String;
var iRaw5:String;
var iRaw4:String;
var iRaw3:String;
var iRaw2:String;
var iRaw1:String;
var apotelesma:Number;
var bonus:Number;
var i1:Number;
var i2:Number;
var i3:Number;
var i4:Number;
var i5:Number;
var i6:Number;
var i7:Number;

//------------------------restricts------------------------

PPP1.restrict = "0-9\\.";
PPP2.restrict = "0-9\\.";
PPP3.restrict = "0-9\\.";
PPP4.restrict = "0-9\\.";
PPP5.restrict = "0-9\\.";
PPP6.restrict = "0-9\\.";
PPP7.restrict = "0-9\\.";
Cntbonus.restrict = "0-5";
RawPrice.restrict = "0-9\\.";
AverSal.restrict = "0-9\\.";
Tax.restrict = "0-9";
NoC7.restrict = "0-9";
NoC6.restrict = "0-9";
NoC5.restrict = "0-9";
NoC4.restrict = "0-9";
NoC3.restrict = "0-9";
NoC2.restrict = "0-9";
NoC1.restrict = "0-9";
Em7.restrict = "0-9";
Em6.restrict = "0-9";
Em5.restrict = "0-9";
Em4.restrict = "0-9";
Em3.restrict = "0-9";
Em2.restrict = "0-9";
Em1.restrict = "0-9";
Raw5.restrict = "0-9";
Raw4.restrict = "0-9";
Raw3.restrict = "0-9";
Raw2.restrict = "0-9";
Raw1.restrict = "0-9";

//-------------------------------borders----------------------------

PPP1.border = true;
PPP2.border = true;
PPP3.border = true;
PPP4.border = true;
PPP5.border = true;
PPP6.border = true;
PPP7.border = true;
Cntbonus.border = true;
RawPrice.border = true;
AverSal.border = true;
Tax.border = true;
NoC7.border = true;
NoC6.border = true;
NoC5.border = true;
NoC4.border = true;
NoC3.border = true;
NoC2.border = true;
NoC1.border = true;
Em7.border = true;
Em6.border = true;
Em5.border = true;
Em4.border = true;
Em3.border = true;
Em2.border = true;
Em1.border = true;
Raw5.border = true;
Raw4.border = true;
Raw3.border = true;
Raw2.border = true;
Raw1.border = true;

//--------------------------calculations-------------------------------
calc_btn.addEventListener(MouseEvent.CLICK, Calco);

function Calco(event:MouseEvent):void;
{
iPPP1 = PPP1.text;
iPPP2 = PPP2.text;
iPPP3 = PPP3.text;
iPPP4 = PPP4.text;
iPPP5 = PPP5.text;
iPPP6 = PPP6.text;
iPPP7 = PPP7.text;
iCntbonus = Cntbonus.text;
iRawPrice = RawPrice.text;
iAverSal = AverSal.text;
iTax = Tax.text;
iNoC7 = NoC7.text;
iNoC6 = NoC6.text;
iNoC5 = NoC5.text;
iNoC4 = NoC4.text;
iNoC3 = NoC3.text;
iNoC2 = NoC2.text;
iNoC1 = NoC1.text;
iEm7 = Em7.text;
iEm6 = Em6.text;
iEm5 = Em5.text;
iEm4 = Em4.text;
iEm3 = Em3.text;
iEm2 = Em2.text;
iEm1 = Em1.text;
iRaw5 = Raw5.text;
iRaw4 = Raw4.text;
iRaw3 = Raw3.text;
iRaw2 = Raw2.text;
iRaw1 = Raw1.text;
i1 = (parseInt(iEm1) + parseInt(iNoC1)) * 10 * bonus;
i2 = (parseInt(iEm2) + parseInt(iNoC2)) * 10 * bonus;
i3 = (parseInt(iEm3) + parseInt(iNoC3)) * 10 * bonus;
i4 = (parseInt(iEm4) + parseInt(iNoC4)) * 10 * bonus;
i5 = (parseInt(iEm5) + parseInt(iNoC5)) * 10 * bonus;
i6 = (parseInt(iEm6) + parseInt(iNoC6)) * 10 * bonus;
i7 = (parseInt(iEm7) + parseInt(iNoC7)) * 10 * bonus;

if (parseInt(iCntbonus) == 0) {
    bonus = 1;
} else if (parseInt(iCntbonus) == 1) {
    bonus = 1,2;
} else if (parseInt(iCntbonus) == 2) {
    bonus = 1,4;
} else if (parseInt(iCntbonus) == 3) {
    bonus = 1,6;
} else if (parseInt(iCntbonus) == 4) {
    bonus = 1,8;
} else {
    bonus = 2;
}

// υπολογισμός εσόδων
apotelesma = (Number(iRawPrice)*bonus*parseInt(iRaw1)*35)+(Number(iRawPrice)*bonus*parseInt(iRaw2)*70)+(Number(iRawPrice)*bonus*parseInt(iRaw3)*125)+(Number(iRawPrice)*bonus*parseInt(iRaw4)*175)+(Number(iRawPrice)*bonus*parseInt(iRaw5)*250)

apotelesma = apotelesma + (i1 * Number(iPPP1)) - (i1 * (parseInt(iTax) / 100) + (i2 * Number(iPPP2)) - (i2 * (parseInt(iTax) / 100) + (i3 * Number(iPPP3)) - (i3 * (parseInt(iTax) / 100) + (i4 * Number(iPPP4)) - (i4 * (parseInt(iTax) / 100) + (i5 * Number(iPPP5)) - (i5 * (parseInt(iTax) / 100) + (i6 * Number(iPPP6)) - (i6 * (parseInt(iTax) / 100) + (i7 * Number(iPPP7)) - (i7 * (parseInt(iTax) / 100)
apotelesma.toString()
} 
```

我对最后 3 行有疑问...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:06:23.293

您有一些非常长的计算，并且缺少至少 5 个右括号。我将第二行粘贴到最后一行（以 开头的行`apotelesma = apotelesma`）到文本编辑器中，并计算了开/关括号的数量。

计算时间很长，目前还不清楚应该将它们插入到哪里。我会分解计算，以便它们更具可读性。在您之后维护此代码的任何人都将从清晰中受益。

要么将长计算分解为许多较小的计算，要么只是在代码中添加换行符，以便清楚您要做什么，如下所示：

```
apotelesma = apotelesma +
    (i1 * Number(iPPP1)) -
    (i1 * (parseInt(iTax) / 100) + // NOTE: you seem to be missing a closing paren here
    (i2 * Number(iPPP2)) -
    (i2 * (parseInt(iTax) / 100) + // and here... (and so on)
    ... 
```

# android - 片段使用

> ID：11811465
> 
> 赞同：1
> 
> 时间：2012-08-04T19:37:43.410
> 
> 标签：android, android-fragments

我遇到了一个问题，是否有必要重写我的应用程序以使用 Fragments API。该应用程序仅包含活动，每个活动只负责一个屏幕，并且不会像 SDK 示例中那样在一个屏幕上包含两个或更多片段。我应该将应用程序重写为 Fragments API 吗？如果我必须重写，你能告诉我项目中应该使用哪种结构：

*   每个 Activity 将包含一个 Fragment 并对其进行管理。
*   只有一个活动，所有其他活动都应该重写为片段。

一般来说，不清楚何时应该使用 Fragment。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:46:33.683

> 是否有必要用 重写我的应用程序`Fragments`？

在这种情况下实现`Fragment`s 只是额外的工作。如果只用s就可以达到你想要的效果`Activity`，那就完美了。

也就是说，`Fragment`即使在不必要的情况下使用 s 来实现您的应用程序也不总是一个坏主意，因为它使过渡到多屏布局变得非常简单。如果您可以看到自己在未来的某个时候为平板电脑进行优化，那么使用`Fragment`s 实现您的 UI 可能是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T19:46:58.703

以下是来自以下链接的引用：

> Android 在 Android 3.0（API 级别 11）中引入了 Fragment，主要是为了在平板电脑等大屏幕上支持更动态和灵活的 UI 设计。因为平板电脑的屏幕比手机大得多，所以有更多的空间来组合和交换 UI 组件。片段允许这样的设计，而无需您管理对视图层次结构的复杂更改。

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

听起来您的应用设计不需要使用片段。下面是一个使用片段的 UI 设计示例：

![在此处输入图像描述](../Images/b651b7ca7336d9da790f21f79c37bc7e.png)

希望这可以帮助！

# android - Android MediaPlayer.Create() 返回 null

> ID：11811466
> 
> 赞同：6
> 
> 时间：2012-08-04T19:37:49.697
> 
> 标签：android, wav, android-mediaplayer

我正在开发一个播放一些声音的 Android 应用程序。为此，我正在创建一个 MediaPlayer 对象。下面是代码：

```
mp = MediaPlayer.create(this, R.raw.testSound); 
```

这里 mp 对于 Android 2.3.3（API 级别 10）为空，我尝试使用其他版本的 Android（2.1、2.2 等）它工作正常。但是，对于 Android 2.3.3（API 级别 10），MediaPlayer.create() 调用返回 null。

声音文件 (testSound.wav) 是一个 wav 文件。我尝试解析 wav 文件以查看它是否已损坏。看起来刚刚好。另外，我可以使用 Windows Media Player 播放这个声音文件。

这是 testSound.wav 文件：[testSound.wav](http://www.filedropper.com/testsound) 以下是详细代码：

```
public MediaPlayer mp;

// OnCreate() funciton
mp = MediaPlayer.create(this, R.raw.testSound);
if(mp == null)   // mp is null for Android 2.3.3 on real device and on AVD both
  {
  Toast msg = Toast.makeText(getApplicationContext(), "Could not play sound",         
  Toast.LENGTH_LONG);
  msg.show();
  }

//SetMediaFileToPlay() is called on Click event of button
void SetMediaFileToPlay() 
{       
    AssetFileDescriptor afd;     
    Resources res = getResources();
    Log.d("In SetMediaFileToPlay %s", g_strFocusedImage.toString());
    switch (g_strFocusedImage)
    {
      case RESID_ALPHA1:
      afd = res.openRawResourceFd(R.raw.ik);
      if(mp != null)
      {
        mp.reset();
        mp.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(),      
        afd.getLength());
      }  
      break;
      .........  //other cases
   }

 if(mp != null)
  {
    mp.prepare();
    mp.start();
  } 
```

}

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T13:32:25.187

您的文件使用 WAVE 8,000Hz MP3 8 kbit/s 格式，而 android 仅支持 8 位和 16 位线性 PCM：http: [//developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)。

尝试修复您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-12T10:37:00.927

它可能会返回`null`，因为设备不支持播放音频，即`watch`.

要检查设备是否支持 MediaPlayer，您可以对`MediaPlayer.create()`

我在 google [santa-tracker 应用程序上找到了它](https://github.com/google/santa-tracker-android/blob/d773d54d20df936a2a8ea7987ac1c5dcdbfcf0e1/common/src/main/java/com/google/android/apps/santatracker/AudioPlayer.kt#L30)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-11T23:37:53.047

`null`似乎在传达出*了什么*问题。由于 Google 将此显示为“android mediaplayer.create() 返回 null”的第一个结果，因此我的建议是检查您的代码并检查

*   如果您的设备支持 Vasily 指示的格式
*   如果您传入的文件确实存在或已经创建

就我而言，我在将其传递给`Mediaplayer.create`. 这在我的模拟设备上运行良好，但在我的个人设备上崩溃了。

# c - C 包含文件扩展名

> ID：11811471
> 
> 赞同：0
> 
> 时间：2012-08-04T19:38:34.063
> 
> 标签：c, include

我一直看到 C 包含扩展名为 .h。

我正在开发一个包含 .r 扩展名的项目。我相信扩展名 .r 指的是 Mac 资源分支。

我想知道 C 是否允许包含文件上的扩展名是任何东西？

代码编译没有任何错误。

例子：

```
#include "HostTypes.h" 
#include "IdentifySpec.r" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T19:39:28.160

是的，您可以毫无顾虑地做到这一点。C 预处理器包含您告诉它包含的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T19:41:52.663

包含文件的名称（包括扩展名）没有限制。以下所有内容均有效

```
#include "foo.bar"
#include "look_ma_no_extension"
#include "1.2.3.4.5.6.7.8.9" 
```

但是，使用 .h 是首选，因为它是通常的扩展名:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T19:41:58.390

如果它可以编译并且可以工作，那没关系；）*.h*只是一个约定

# php - 在 foreach 循环外访问变量方法

> ID：11811472
> 
> 赞同：-1
> 
> 时间：2012-08-04T19:38:57.343
> 
> 标签：php

我正在使用`simple_html_dom`它是具有各种方法的预定义网络爬虫类。

我有以下内容：

```
$html = new simple_html_dom();

$arrayoflinks = //this is where I have a list of links//;

foreach($arrayoflinks as $eachlink){
    $html->load_file($eachlink);   //these are methods from the simple html_dom
    $html->find('a'); //these are methods from the simple html_dom
    //run a function I already wrote
} 
```

问题是循环`$html`中`foreach`没有被识别。我的 Netbeans IDE 告诉我`$html`in`foreach`循环正在引入一个新变量，这隐含地意味着它没有被识别为类方法。

我怎样才能解决这个问题？

编辑：原来错误是别的。访问上述foreach循环中的方法是有效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T19:49:04.463

在 OP 发布错误消息后，再次作为答案：

PHP 有脚本的默认执行时间。此运行时结束后，脚本将中止并显示错误消息。

要么增加 php.ini 中的最大运行时间（不要忘记重新启动你的网络服务器），要么减少脚本必须做的事情的数量（例如通过减少要解析的 URL 数量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T19:47:16.097

我将您的代码粘贴到 PHPStorm 中，它没有给出任何关于 $html 无法从 foreach 循环内部访问的错误。我会说这是一个 Netbeans 错误 - 代码似乎有效。运行它，它应该可以工作。

# c# - 调用 GetOwner 时出现 InvalidOperationException

> ID：11811473
> 
> 赞同：4
> 
> 时间：2012-08-04T19:39:08.150
> 
> 标签：c#, .net, wmi, wmi-query

在以下代码中：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Management;
using System.Diagnostics;

namespace Test
{
    class Program
    {
        static void Main(string[] args)
        {
            string javaProcWql = string.Format("SELECT ProcessId, Name, CommandLine FROM Win32_Process WHERE Name = '{0}' AND CommandLine LIKE '%{1}%'", "firefox.exe", "firefox");
            ManagementObjectSearcher mos = new ManagementObjectSearcher(javaProcWql);
            foreach (ManagementObject mo in mos.Get())
            {
                Console.WriteLine(mo["ProcessId"]);
                string[] userinfo = new string[2];
                mo.InvokeMethod("GetOwner", (object[])userinfo);
                Console.WriteLine("ha ha --> " + userinfo[1] + "\\" + userinfo[0]);
            }
        }
    }
} 
```

我得到`InvalidOperationException`了消息和异常是

> “由于对象的当前状态，操作无效”

这里有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T14:53:07.777

我找到了解决方案。查询应该是这样的：

```
string.format( "SELECT * FROM Win32_Process WHERE Name = '{0}' AND CommandLine LIKE '%{1}%'", "firefox.exe", "firefox" ) 
```

我的解释是猜测，因为我不是 Windows 或 .NET 编程方面的专家。在原始查询（见问题）中，我选择了字段，但是通过指定`*`我选择了对象，所以我可以调用它们的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-21T09:49:08.790

GetOwner 方法需要处理字段。

添加句柄字段以选择语句：

```
SELECT Handle, ProcessId, Name, CommandLine FROM Win32_Process where ... 
```

# c# - 如何在 ItemsControl 中的每个元素周围绘制边框？

> ID：11811479
> 
> 赞同：0
> 
> 时间：2012-08-04T19:39:31.833
> 
> 标签：c#, wpf, itemscontrol, itemtemplate, itemtemplateselector

我正在使用 an`ItemsControl`和 a`ItemTemplateSelector`来绘制显示我的项目的 UI。但是现在，我的所有元素都需要在 a 中`Grid`（并且元素应该在其中的一列）。

一开始我认为`ContentControl`嵌套在 an 中是正确的`ItemsControl`，这`ContentControl`应该有`ItemTemplateSelector`，但我不确定这是否是最好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:43:08.537

像这样的东西应该在`Template`item 容器中，因为`ItemsControls`这有点问题，因为容器`ContentPresenters`没有`Template`. 您可以子类化`ItemsControl` [以使用 a`ContentControl`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.getcontainerforitemoverride)，然后使用`ItemsControl.ItemContainerStyle`来编辑`Template`这些容器的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T20:21:15.847

```
<ItemsControl x:Name="lst">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
            <Border BorderThickness="10" CornerRadius="1" BorderBrush="Navy">
                    <TextBox Text="{Binding Name}"/>
            </Border>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

我希望这将有所帮助。

# java - 关于 Java 代码样式的问题

> ID：11811482
> 
> 赞同：1
> 
> 时间：2012-08-04T19:39:53.747
> 
> 标签：java, syntax, coding-style

所以我看到了很多不同的编码风格，但我只会谈论两个大的。我使用一种风格，在一般意义上使用时，我只是将所有内容命名为类名，如下所示：

```
String str = "This is some text"; 
```

但是在[Java Practices](http://www.javapractices.com/home/HomeAction.do)中，我看到了一种风格，他们会将“I”放在接口类名前面，或者他们将“f”或“a”放在对象名前面。[从"Don't subclass JDialog or JFrame"'](http://www.javapractices.com/topic/TopicAction.do;jsessionid=962B2D60C852C9AAAA9F8E90BBECF9BB?Id=228)中获取这个片段：

```
/**
  Constructor.

  <P>Called when adding a new {@link Movie}.
*/
MovieView(JFrame aParent) {
    fEdit = Edit.ADD;
    buildGui(aParent, "Add Movie");
    fStandardDialog.display();
} 
```

为什么程序员以这种风格编写代码？很多人用吗？而且，专业程序员会使用这种风格吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T19:51:18.763

这是我个人的看法。

我不喜欢在接口上使用前缀（或其他任何东西）。我只是更喜欢称它为它是什么。接口旨在表示一个对象（或它的一部分），而不会对它的实际实现产生任何影响。

假设你有一个 Car 接口。而AudiA4可能是那辆车的一个实现。如果你刚买了一辆新的奥迪A4，你会对那些你认为关心你买什么样的车的人说“我买了一辆新的奥迪A4”。对其他人，你可以说“我买了一辆新车”。当然，你永远不会说，我买了新的 IAudiA4 或新的 ICar。

之所以这样`JFrame`命名，是因为它是一个 Swing Frame，而 Swing 是在 AWT（最初的 Java 窗口工具包，它已经有一个 Frame 类）之后出现的。由于 AWT 和 Swing 同时可用，它们使用“J”前缀来划分工具包（注意 JFrame 扩展了 Frame，顺便说一句）。他们本可以将其称为 SwingFrame，但“J”前缀显然是代表 Swing 包的好选择。所以基本上这个前缀只是一个命名选择，而不是类似于接口的“I”的约定（或者你有时看到的实现的 Impl 后缀）

我的观点是，您总是必须根据它们所代表的确切名称来命名您的类和接口。不多也不少。没有 CarImpl 类。谁在乎它是一个实现。它是哪个实现？为什么它需要自己的类？当我使用 CarImpl 时，我还能得到什么？当我进行第二个实现时会发生什么，我称之为 CarImpl2？所有这些都非常具有约束力，并没有带来太多价值。

叫它什么。这是我制定的唯一规则。

话虽如此，Eclipse 项目和许多其他项目确实使用了 I-for 接口表示法 ( [WIKI](http://wiki.eclipse.org/Naming_Conventions) )。但这是他们的选择。我也见过专业人士使用它。我不喜欢它，但总的来说，我尊重团队的命名约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T19:50:24.947

有一本关于这些事情的书——Steve McConnell 编写的 Code Complete

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T20:00:08.410

我可能错了，但我在命名 Java 变量时看到的唯一通用约定是使用 Camel-Case 表示法，这与名称的格式有关。

至于名称本身，我总是发现根据变量的实际名称命名变量很有用。在您的`String`示例中，尽管您提到这将在通用变量中，但我仍然会给它一个更有意义的名称，例如：

```
String message = "This is some text"; 
```

或者：

```
String msg = "This is some text"; 
```

我在源代码中看到的一些 Java 库在命名变量时往往非常冗长，而另一些在简化上下文中使用变量时只使用单字母名称：

```
public Rectangle setLocation(Point p) {
    return setLocation(p.x(), p.y());
} 
```

我认为命名变量（或与此相关的任何其他内容）时的主要目标始终是尽可能以最佳方式传达您尝试做的事情的意图。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T20:08:12.193

您所描述的有时被称为“匈牙利符号”，尽管它不是真正意义上的“匈牙利”。

基本上，这个想法是区分不同类别的变量——实例变量、局部变量、参数等。这有两个基本目的：

1.  它有助于避免名称冲突，比如说，自然可能（使用“描述性”变量命名）有一个实例变量`ralphsLeftFoot`和一个局部变量`ralphsLeftFoot`。使用前缀允许两者共存，并且，特别是在本地可能（没有警告消息）“隐藏”实例变量的语言中，可以防止此类冲突导致语义发生意外更改。
2.  它使变量的范围显而易见，因此，在维护期间，人们不会意外地假设局部变量具有实例范围，反之亦然。

这种方法值得吗？许多开发人员使用该方案的一个子集，显然效果很好。例如，许多 Objective-C 开发人员会将实例变量命名为“属性”后面并带有前导“_”字符，以清楚地区分两者并避免在预期属性时意外使用实例变量。

同样，许多使用多种语言的开发人员会在实例变量前面加上一个字母（通常是“m”），以将它们与“普通”局部/参数变量区分开来。

可能最重要的是选择一种你（和你的团队）喜欢的风格并坚持下去。如果团队喜欢前缀，则使用前缀。如果团队更喜欢其他东西，那就坚持下去。当然，当一个更好的选择“透露”给你时，改变偏好是可以的，但不要随意来回切换。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-04T20:57:24.690

代码样式有助于开发人员更轻松地阅读和理解彼此的代码。[Java 约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html "Java Code Conventions")规定使用简短和描述性标识符，但不幸的是，简短和描述性不能总是一起实现，因此您可能不得不为了清晰而牺牲简短性，因此： `atmosPres`- 仍然清晰但简短，`atmosphericPressure`- 这不会是错误的，`atm`- 因为每个人都只是知道ATM，对吧？，`ap`-WTF？

I first encountered the practice of prefixing variable names with a three letter type identifier while developing programs in C# - it helps the reader know what data type is contained in a variable without having to look for its declaration (due to short memory or maybe laziness?). Arrays are also prefixed with `I` e.g `IList` to distinguish them from other data types (and for what purpose, I just dunno).

For me, the worst code conventions are in C++ (if indeed there are any at all) - there's a mix of case types for data types and variables, conflicting method and function naming styles and endless cryptic abbreviation which all make it hard for non-regular C++ coders to read and understand C++ code.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-04T19:48:39.813

> 所以我看到了很多不同的编码风格，但我只会谈论两个大的。我使用一种风格，在一般意义上使用时，我只是将所有内容命名为类名，如下所示：
> 
> String str = "这是一段文字";

那太可怕了。想象一下，如果有人正在阅读您的代码，试图了解它在做什么，并且他们遇到了一个名为`str`. 它不会向必须阅读此代码的人传达任何关于您的意图的意义。

人们使用约定来提高可读性，从而提高软件的整体质量。如果没有约定，任何拥有多个开发人员的项目都会受到不同风格的影响，这只会损害代码的可读性。如果您想了解专业人士的工作，请在互联网上四处寻找各种[惯例](http://code.google.com/p/java-coding-standards/wiki/Introduction)。

# sql - SQL CRUD 将 UPDATE 显示为 SQL 系统函数

> ID：11811483
> 
> 赞同：2
> 
> 时间：2012-08-04T19:40:10.480
> 
> 标签：sql, sql-server

所以在玩了 SQL 2012 之后，我注意到它`UPDATE`显示为洋红色的 SQL 系统函数？

只是想知道 as `SELECT`，`DELETE`并`INSERT` 显示为蓝色？当然，它们都会显示为蓝色，`UPDATE`不是系统功能吗？

![在此处输入图像描述](../Images/2409619570d0a0e211f5b98c749c7cd5.png)

![在此处输入图像描述](../Images/f096fd1252c0c709ebef9734c03674f6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:54:50.677

更新是 SQL Server 中的一个函数。[UPDATE() (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187326%28SQL.90%29.aspx)

如果你想改变颜色，你可以在这里投票。[语法高亮：UPDATE 关键字是粉色的](http://connect.microsoft.com/SQLServer/feedback/details/736225/syntax-highlighting-update-keyword-is-pink)

# actionscript-3 - as3 removeChild 方法在游戏中给出问题

> ID：11811485
> 
> 赞同：0
> 
> 时间：2012-08-04T19:40:43.310
> 
> 标签：actionscript-3, actionscript, removechild

我在 removeChild 上看到了很多问题。

我有一个入侵者类型的游戏，砖块从顶部掉下来，你必须用一个不断弹跳的球来摧毁它们。

当我想删除砖块（在 for 循环中使用数组引用它）时，我随机得到异常错误（与许多其他错误一样），该对象必须是调用者的子对象。

这是一个解决方案：

```
if (this.parent != null)
{
this.parent.removeChild(this);
} 
```

- 在我的情况下，从目标对象（砖块）的类中调用。

但问题是.. 如果 this.parent 真的是空的，砖就呆在那里！（当它应该被删除时）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:14:36.063

试试这个删除孩子。它从父级中删除所有子级。此外，如果您想删除所有但保存第一个，只需更改为`yourMovieClip.removeChildAt(1);`

```
while(yourMovieClip.numChildren){
    yourMovieClip.removeChildAt(0); 
} 
```

# svg - 干净地变形 SVG 路径

> ID：11811487
> 
> 赞同：7
> 
> 时间：2012-08-04T19:41:00.590
> 
> 标签：svg, raphael

在[这个小提琴](http://jsfiddle.net/h8DWE/6/)中，我试图通过简单地扩展上升器将小 H 变成大 H。我认为这就像提供新路径并让拉斐尔发挥其魔力一样简单，但显然情况并非如此。

有没有一种简单的方法来拉长上升器而无需先将其损坏？请注意，这是一个更大的标志中的一个移动部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T22:42:47.973

据我从绘制路径中看到的，这两个形状不是从同一个起点绘制的——所以你正在弄乱。

SVG 动画将始终尝试将起始形状的第一段变形为结束形状的第一段。如果绘制顺序不同，那么你会得到像你所看到的那样奇怪的效果。

（请注意，开始和结束形状中的段数和路径类型的顺序必须相同。）

# android - Android Emulator 性能不佳

> ID：11811488
> 
> 赞同：0
> 
> 时间：2012-08-04T19:41:02.597
> 
> 标签：android, eclipse, performance, emulation

我有英特尔 i7 四核和 4GB 内存，但是当我尝试在模拟器上运行我的应用程序时，天哪，这需要很多时间。有时超过5分钟。我不是在模仿任何游戏或图形密集型的东西。我正在学习android，所以只是尝试简单的aps，但仍然很慢。此外，今天我发现这个模拟器已经停止播放我以前在程序中使用的任何音乐或声音。这种奇怪的行为和缓慢的速度可能是什么原因。我该如何解决？我在 Windows 7 PS 上：当我尝试从用户键盘输入应用程序时，除非我使用模拟器键盘，否则模拟器不会接受任何输入。我可以更改其设置以从键盘获取输入吗？问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T19:54:10.767

打开android sdk manager，在extras中，安装“Intel Hardware Accelerated Execution Manager”，使用intel提供的x86镜像（有两个，一个2.3.3，一个4.0.3）。

在windows上，android SDK Manager只下载IntelHaxm的安装程序，所以你必须自己进去安装。通常你可以在 android-sdk\extras\intel\Hardware_Accelerated_Execution_Manager 下找到它并以管理员身份安装 IntelHaxm.exe。

恕我直言，4GB 的 RAM 是不够的，Windows 7 和 Eclipse 一起占用了我的系统超过 2GB 的空间。8GB是最低的，越多越好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:00:26.847

模拟器对我来说总是很慢；我从来没有得到任何标准的速度建议来工作。但是，如果您有可用的设备，直接在其上进行测试会快得多。

# php - PDO 从多个相同的表中选择

> ID：11811492
> 
> 赞同：0
> 
> 时间：2012-08-04T19:41:17.683
> 
> 标签：php, mysql, pdo

我想从多个相同的表（三个甚至更多）中获取数据，它们具有相同的列名（但行中的数据不同）。

所以，我想用循环来获取所有表，就好像它是一个查询（一个循环），而不是三个。

获取数组时，我不想将列数增加三倍。我希望所有表都使用相同的列名。表格中的数据将在数组中一个叠放在另一个上，而不是一个接一个，使数组中的列数增加三倍。但是，一旦它们堆叠在一起，“ORDER BY”过滤器将“混合”这些表：“ORDER BY”将同时作用于所有表（就像它只是一个表一样），而不是全部单独的表。

我对 1 个表的查询如下所示：

```
$pdo = "SELECT * FROM " .$table1 ." ORDER BY price LIMIT " 
       .$current_page_offset .", " .$items_per_pages; 
```

所以...我想获取三个表，就像我只获取一个表一样。

*也想保持我的限制和“ORDER BY”甚至更多的过滤器工作。我不希望在我的页面上显示三倍于我想要的项目数量的三重限制......

有没有办法做到这一点 ？

*编辑：我在第 3 段更改了对“混合”的描述。对不起（也许）我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:54:13.800

你想使用[`UNION`](http://dev.mysql.com/doc/en/union.html)：

> `UNION`用于将多个`SELECT`语句的结果组合成一个结果集。

因此，如果您的表名位于名为的数组中`$tables`：

```
mb_regex_encoding($charset); // character set of database connection
foreach ($tables as $table) {
  $table = '`'.mb_ereg_replace('`','``',$table).'`';
  $sql[] = "(
    SELECT   *
    FROM     $table
    ORDER BY price
    LIMIT    $current_page_offset, $items_per_pages
  )";
}
$sql = implode(' UNION ALL ', $sql); 
```

但是，听起来好像您的架构应该被规范化，这样您就没有这样的“相同”表：而是有一个带有附加列的表来指示每个表的区别。

# javascript - 从高图上显示的日期中删除时间

> ID：11811493
> 
> 赞同：0
> 
> 时间：2012-08-04T19:41:18.180
> 
> 标签：javascript, highcharts

如何从 highchart 上显示的日期中删除时间。数据（日期）是从 twitter 获取请求中接收并保存到数组中的。

```
 for (var i in array) {
        dateArray.push(array[i].date);
            }  
    highchart(dateArray); 
```

图表上显示的日期示例：Sat,04 Aug 2012 19:35:02 +0000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:00:35.940

编辑：根据您的评论

您可以先将字符串转换为日期对象，然后使用 SimpleDateFormat 将日期对象格式化为您喜欢的格式。

```
SimpleDateFormat format = new SimpleDateFormat("EEE, MMM d yyyy");
String formattedDate = format.format(new Date(array[i].date));
dateArray.push(formattedDate); 
```

你可以找到各种日期格式[@http://blog.stevenlevithan.com/archives/date-time-format](http://blog.stevenlevithan.com/archives/date-time-format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:34:57.597

在我看来，您有两种选择：

1.  只为您的类别传递时间的天值。涉及后端处理。
2.  按原样提取数据并转换为 Javascript 时间格式，设置 xAxis 日期时间类型，将 tickInterval 设置为一天，然后运行图表。

不知道你的数据是什么样子，你在 yAxis 上绘制了什么，或者你的预期结果是什么，真的很难说。

我建议使用选项 #2，因为这是基于时间的数据。

# haskell - 在 Haskell 中从用户定义的数据类型生成随机值

> ID：11811498
> 
> 赞同：14
> 
> 时间：2012-08-04T19:42:15.027
> 
> 标签：haskell, types, random

**类似：[来自数据类型的 Haskell Random](https://stackoverflow.com/questions/3769193/haskell-random-from-datatype)**

我创建了一个数据类型来包含石头剪刀布游戏中的不同武器。

```
data Weapon = Rock | Paper | Scissor 
```

现在我想生成一个随机武器，计算机将使用它来对付用户。我看了一下我在开始时发布的类似链接，但这对我来说似乎太笼统了。

我能够从任何其他类型生成随机数。我能想到的是如何使我的数据类型成为 Random 类的实例。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-04T20:32:17.440

要生成 random `Weapon`，无论您是否创建`Weapon`实例`Random`，您都需要一种将数字映射到`Weapon`s 的方法。如果您`Enum`为该类型派生，`Int`则编译器定义与 s 的映射。所以你可以定义

```
randomWeapon :: RandomGen g => g -> (Weapon, g)
randomWeapon g = case randomR (0,2) g of
                   (r, g') -> (toEnum r, g') 
```

例如。使用`Enum`实例，您还可以轻松创建`Weapon`以下实例`Random`：

```
instance Random Weapon where
    random g = case randomR (0,2) g of
                 (r, g') -> (toEnum r, g')
    randomR (a,b) g = case randomR (fromEnum a, fromEnum b) g of
                        (r, g') -> (toEnum r, g') 
```

如果有可能从类型中添加或删除构造函数，那么保持边界`randomR`与类型同步的最佳方法是也派生`Bounded`，正如[Joachim Breitner](https://stackoverflow.com/users/946226/joachim-breitner) [立即建议](https://stackoverflow.com/questions/11811498/generate-a-random-value-from-a-user-defined-data-type-in-haskell/11811809#comment15699776_11811809)的那样：

```
data Weapon
    = Rock
    | Paper
    | Scissors
      deriving (Bounded, Enum)

instance Random Weapon where
    random g = case randomR (fromEnum (minBound :: Weapon), fromEnum (maxBound :: Weapon)) g of
                 (r, g') -> (toEnum r, g')
    randomR (a,b) g = case randomR (fromEnum a, fromEnum b) g of
                        (r, g') -> (toEnum r, g') 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-05T10:31:00.757

虽然 Daniel Fischer 的`Enum`方法确实是一种很好的通用方法，但*实际上*没有必要使用来自`Int`s 的显式映射。你也可以这样做

```
instance Random Weapon where
  random g = case random g of
               (r,g') | r < 1/3    = (Rock    , g')
                      | r < 2/3    = (Paper   , g')
                      | otherwise  = (Scissors, g') 
```

使用. `Double`_ `Random`这比派生`Enum`实例效率低，但更灵活——例如，您可以轻松定义不等分布

```
 random g = case random g of
               (r,g') | r < 1/4    = (Rock    , g')
                      | r < 1/2    = (Paper   , g')
                      | otherwise  = (Scissors, g') 
```

哪里`Scissors`比其他两个更有可能。当然，只有在不等分布在某种程度上对您的数据类型而言是规范的情况下，您才应该这样做，在这个示例中当然不是。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-05T13:13:23.520

```
{-# LANGUAGE FlexibleInstances, UndecidableInstances,
 ScopedTypeVariables, OverlappingInstances #-}

import System.Random

class (Bounded a, Enum a) => BoundedEnum a
instance (Bounded a, Enum a) => BoundedEnum a
instance BoundedEnum a => Random a where
   random gen = randomR (minBound :: a, maxBound :: a) gen
   randomR (f, t) gen =
     (toEnum r :: a, nextGen)
     where
       (rnd, nextGen) = next gen
       r = fromEnum f + (rnd `mod` length [f..t]) 
```

现在你可以说：

```
r <- randomIO :: Anything 
```

其中任何东西都必须是 Enum 和 Bounded 类的实例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T08:56:19.047

如果您有数据生成器，则可以使用`oneof`Test.QuickCheck.Gen

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-04T18:39:08.697

一位同事向我建议了 Alekseev 的解决方案的替代方案，我发现它更具可读性（我仍在学习 Haskell，因此它可能更多地取决于读者而不是代码）。

```
{-# LANGUAGE FlexibleInstances    #-}
{-# LANGUAGE UndecidableInstances #-}

instance {-# OVERLAPPABLE #-} (Bounded a, Enum a) => Random a where
  random = randomR (minBound, maxBound)

  randomR (f, t) gen =
    let (rndInt, nxtGen) = randomR (fromEnum f, fromEnum t) gen
     in (toEnum rndInt, nxtGen)

data Weapon = Rock | Paper | Scissor deriving (Eq, Show, Ord, Bounded, Enum) 
```

然后你可以这样做：`getRandomWeapon = randomRIO (minBound, maxBound) :: IO Weapon`然后用`weaponChoice <- getRandomWeapon`

# c++ - 如何在 Qt 中向小部件添加一个圆圈而不不必要地重新绘制所有内容？

> ID：11811500
> 
> 赞同：2
> 
> 时间：2012-08-04T19:42:44.523
> 
> 标签：c++, qt, paintevent

我正在学习 QPainter，并且我创建了一个简单的小部件，每次用户单击小部件时，都会出现一个新圆圈。

![在此处输入图像描述](../Images/69098c9d36c6384301ce6bbf52b3102d.png)

但是Qt不允许在paintEvent之外进行绘制，所以每次我想画一个新的圆圈时，我都需要使widget区域失效，并重新绘制之前的所有圆圈。这似乎不是很有效 - 如果有数百甚至数千个元素怎么办。

最好不要删除以前的圆圈，我只是在小部件顶部绘制新的圆圈。但是在 Qt 上，如果不先使之前的内容无效（并因此删除），我就无法绘制。

在 Qt 中处理这种情况的推荐方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:11:10.867

处理这种情况的推荐方法是使用[QGraphicsScene](http://qt-project.org/doc/qt-4.8/QGraphicsScene.html)和[QGraphicsView](http://qt-project.org/doc/qt-4.8/QGraphicsView.html)，然后使用[QGraphicsItems](http://qt-project.org/doc/qt-4.8/QGraphicsItem.html)填充场景。根据[文档](http://qt-project.org/doc/qt-4.8/graphicsview.html)，这正是框架的设计目的。

简而言之，您将覆盖`QGraphicsScene::mousePressEvent()`，并在新方法中创建一个`new QGraphicsEllipseItem`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:18:19.383

无需使整个小部件无效。update() 和 repaint() 可以获取您想要重新绘制的坐标，因此只重新绘制更改的部分。

```
void  update ( int x, int y, int w, int h ) 
void  update ( const QRect & rect ) 
void  update ( const QRegion & rgn ) 

void  repaint ( int x, int y, int w, int h ) 
void  repaint ( const QRect & rect ) 
void  repaint ( const QRegion & rgn ) 
```

# jquery - jquery .load 在 IE 中不起作用

> ID：11811504
> 
> 赞同：1
> 
> 时间：2012-08-04T19:43:11.910
> 
> 标签：jquery, html, internet-explorer

虽然下面的代码在所有浏览器中对我来说都很好，但我收到一些报告说 .load 在 IE 中没有做它应该做的事情。

我测试了 IE6-IE8，它对我来说很好用。将`.load`站点的 WordPress 部分引入页面，然后该`click`函数在页面的同一部分中加载新页面。此外，代码所在的页面位于根级别 ( `siteexample.com/new.html`)，然后 WordPress 位于`siteexample.com/wordpress`.

**jQuery**

```
$(document).ready(function() {
    $('.slideshow, .slideshow2').cycle({
        fx: 'fade'
    });

    $('.copy-body').load('/wordpress/', function() {
        $('.spinner').fadeOut();

        function rerun(){
           $('.copy-body a').click(function(){
               url = $(this).attr('href');
               scroll(0,430);

               $('.copy-body').load(url, function() {
                   $('.copy-body').
                       append('<div style="clear:both;">&nbsp;</div>');
                   rerun();
               });

               return false;
           });
        }

        $('.copy-body').append('<div style="clear:both;">&nbsp;</div>');
        rerun();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:44:15.880

If you have issues with load function, use the $.ajax function instead of load.

I have used $.ajax function in lot of applications and i do not have any browser compatibility issues with it. Make sure you change the dataType to html in the ajax function.

```
$.ajax({
  url: '/wordpress/',
  dataType: 'html',
  success: function(html) {
        ... rest of your code that should be added into the load function.
  }
}); 
```

Hope this helps.

Thanks.

# c++ - 在 Windows 上使用 cmake 编译 64 位 qt（来自源代码）

> ID：11811508
> 
> 赞同：0
> 
> 时间：2012-08-04T19:44:19.033
> 
> 标签：c++, qt, cmake

我无法使用各种版本的 cmake 在 Windows 上编译 qt 共享库（64 位）。我认为在选择 cmake 选项时犯了一些错误。任何人都可以向我指出一些教程或告诉我要遵循的步骤。提前致谢。（我不能为此使用视觉工作室。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T19:51:14.043

[这篇文章](http://www.holoborodko.com/pavel/2011/02/01/how-to-compile-qt-4-7-with-visual-studio-2010/#comment-6641)对我有用：

```
@ECHO OFF
rmdir /Q /S C:\Qt\qt-git-build
mkdir C:\Qt\qt-git-build
cd C:\Qt\qt-git-build
..\qt-git\configure -opensource -mp -qt-zlib
nmake
nmake qdoc3
editbin /STACK:0x200000 bin\qdoc3.exe
nmake docs
nmake install
nmake clean
cd .. 
```

# php - 将 php 数组与数组项合并

> ID：11811510
> 
> 赞同：0
> 
> 时间：2012-08-04T19:44:36.240
> 
> 标签：php, arrays, array-merge

我正在尝试合并一个数组中的一个项目和另一个数组中的一个完整数组我不知道什么是最好的解决方案？

这是我所拥有的：

```
$name = $item['name'];
// Returns = Admin 
```

`$item['authority']`实际上拉回链接这个：

```
adverts,blog,comments 
```

所以我把它们放到自己的数组中：

```
$auth = explode(",", $item['authority']); 

// Returns
array(4) {
  [0]=> string(7) "adverts"
  [1]=> string(4) "blog"
  [2]=> string(8) "comments"
  [3]=>
} 
```

我想将它们合并到 1 个数组中这是可能的还是最好的解决方案是什么？

```
$joined = array_merge($name, $auth); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:46:38.407

只需创建一个新数组：

```
$joined = array( 'name' => $name, 'auth' => $auth); 
```

这将创建一个多维数组。你不能使用`array_merge()`on`$name`因为它`$name`不是一个数组。但是，你可以这样做：

```
$joined = array_merge( array( $name), $auth); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T19:47:02.480

```
$name = $item['name'];
// Returns = Admin

$auth = explode(",", $item['authority']); 
$auth[] = $name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T19:49:10.393

你很接近：

```
$joined = array_merge($name, $auth); 
```

只是您需要两个数组并且`$name`还没有：

```
$joined = array_merge(array($name), $auth); 
```

这应该已经做到了。但我不能 100% 确定我是否正确理解了您的问题。

# python - 如何识别 Python 中浮点数的十分之一？

> ID：11811517
> 
> 赞同：0
> 
> 时间：2012-08-04T19:45:20.763
> 
> 标签：python, floating-point, decimal

在查看了 Python 中的各种数学、浮点数和小数函数后，我还没有找到我要找的东西。在我的程序中，可能会出现返回浮点数的情况，我需要浮点数信息以便执行另一个功能。假设根据用户的输入，我们正在使用的商是 1.4，我将其表示为 XY 如何隔离 Y 以便我可以使用 FOR 语句。（在这种情况下，我需要程序执行 4 次。）我尝试过使用 % 函数，但它返回的是余数，而不是我正在寻找的值。我试过 math.fmod 和 math.modf。再次不是我要找的。我也看过[这个例子](https://stackoverflow.com/questions/5017072/how-to-get-the-decimal-part-of-a-float)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T19:48:11.547

看起来`int((x*10) % 10)`会这样做：

```
>>> x = 1.4
>>> int((x*10) % 10)
4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T19:47:35.523

怎么样

```
x = 1.4
y = 10 * (x - int(x))
>>> 4 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T19:48:46.103

或者您可以将其作为字符串操作

```
x=1.4
whole,fractional = map(int,str(x).split(".")) 
```

之后整数等于 1，小数等于 4……它应该同样适用于负数

# javascript - 如何对对象数组进行排序？

> ID：11811521
> 
> 赞同：0
> 
> 时间：2012-08-04T19:46:24.303
> 
> 标签：javascript

> **可能重复：**
> [如何对 javascript 对象数组进行排序？](https://stackoverflow.com/questions/979256/how-to-sort-an-array-of-javascript-objects)

我有一个对象数组：

```
var arr = []
arr[0] = new Object()
...
arr[n] = new Object() 
```

例如，我想通过 arr[i].getSortOrder() 获取排序数组，其中 arr[i].getSortOrder() 返回整数值。怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:48:51.590

仅作记录：

```
arr.sort(function(a, b){return a.getSortOrder() - b.getSortOrder();}); 
```

有关详细信息，请参阅[对 JavaScript 对象数组进行排序](https://stackoverflow.com/questions/979256/how-to-sort-an-array-of-javascript-objects)和该[方法的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)[MDN 文档`sort()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)。

# ruby-on-rails - Rails 路线：浅 => 真

> ID：11811527
> 
> 赞同：4
> 
> 时间：2012-08-04T19:46:49.693
> 
> 标签：ruby-on-rails, ruby, routes

想知道为什么当我申请 :shallow => true 时我的 /articles 路线没有出现？

路线.rb

```
resources :users, :shallow => true do
  resources :articles
end 
```

也试过这个：

```
resources :users do
  resources :articles, :shallow => true
end 
```

访问 /articles 不会按预期显示来自任何用户的所有文章，但我仍然可以访问 /articles/:id 就好了。这是预期的行为吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-04T20:23:51.953

[根据文档](http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Resources.html#method-i-resources)，该`shallow: true`选项不提供索引资源。因此，您将无法仅访问. 所以是的，这是预期的行为。`/articles`

# iphone - iOS：窗口对象为零

> ID：11811531
> 
> 赞同：0
> 
> 时间：2012-08-04T19:47:00.893
> 
> 标签：iphone, uitabbarcontroller, uiapplicationdelegate, ios5.1, uiwindow

我有一个应用程序委托，我需要添加自定义标签栏控制器来覆盖 UITabbarController。我创建了 Window 用户界面，将 Window 引用到 Appdelegate 的 Window 对象。将文件的所有者设置为 UIApplication，添加 NSObject 并将身份类更改为我的委托，添加 UITabbarController 并将身份类更改为我的自定义标签栏控制器。现在我看到 didFinishLaunchingWithOptions 中的 Window 对象非常不寻常，所以我在屏幕上看不到任何东西。我的自定义标签栏控制器对象也是零！以下是我的新窗口结构和 main.m。谁能告诉我我在哪里做错了？谢谢。

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
}

Appdelegate.h

#import <UIKit/UIKit.h>
#import "CustomTabBarController.h"

@interface AppDelegate : UIResponder <UIApplicationDelegate, UITabBarControllerDelegate>

@property (strong, nonatomic) IBOutlet UIWindow *window;

@property (strong, nonatomic) IBOutlet CustomTabBarController *tabBarController;

@end

Appdelegate.m

#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize tabBarController = _tabBarController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if(_window == nil) // This is true for self.Window as well!
        NSLog(@"nil");
    if(_tabBarController.view == nil)
        NSLog(@"nil");
    [self.window addSubview:self.tabBarController.view];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

![在此处输入图像描述](../Images/cc99a2900ae7c94790c8ca288376491f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T11:56:48.527

我解决了这个问题......缺少两件事。

1.  文件的所有者检查员，参考网点委托给 AppDelegate。
2.  在项目的目标设置中，将主界面设置为新创建的窗口。

# iphone - LED显示屏字符集

> ID：11811534
> 
> 赞同：2
> 
> 时间：2012-08-04T19:47:09.660
> 
> 标签：iphone, bitmap, character

我正在寻找字符集来显示我的 LED 显示板上的每个字符。

通常我必须将所有这些字符放在一个布尔数组中，例如 H 和 A：

```
bool[] H = { 1,0,0,0,0,1,   bool[] A = { 0,0,1,1,0,0,
         1,0,0,0,0,1,                0,1,0,0,1,0,
         1,1,1,1,1,1,                0,1,1,1,1,0,
         1,0,0,0,0,1,                1,0,0,0,0,1,
         1,0,0,0,0,1 }               1,0,0,0,0,1 } 
```

我认为互联网上应该已经有这样的集合，但是在带有*字符集*的搜索键下我什么也没找到。所以一个可能有很多字符的列表用这种位图格式表示。

你有什么小费给我吗。会为我省去很多愚蠢的词:)

非常感谢您的帮助。我很感激。

问候，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T03:56:53.507

看看这个网站：[character-set-generator](http://expat.dyndns.org/arduino/character-set-generator/)

![在此处输入图像描述](../Images/664ced0f6eec2fa354b2872e02d7b8c2.png)

网站是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T10:12:51.827

为LED显示屏导入C代码中的字体，我们需要将字体的位图转换为字节数组，以便于叠加到显示屏的显存中。为此，您会找到许多适合您要求的工具。但下面给出了用于 LED 显示代码的最佳字节码格式：

```
{0x07e0, 0x1ff8, 0x3ffc, 0x600e, 0x8001, 0x0000 }, // Byte code for A
{0x8001, 0x4006, 0x7ffc, 0x3ff8, 0x0fe0, 0x0000 }, // Byte code for B
{0x0018, 0x003e, 0x003e, 0x003e, 0x003e, 0x0018, 0x0000 },  // Byte code for W 
```

有几次我在 VC++ 平台上制作了这样的自定义构建应用程序。它以上述形式为位图生成字节码。

如果你真的真的，我可以分享那个应用程序。

通过使用此类字节码格式，您可以轻松实现 LED 显示屏标志，如下图所示：

[http://www.ledsignsdisplays.com/indoor-led-signs.html](http://www.ledsignsdisplays.com/indoor-led-signs.html)

[http://photonplay.com/indoor-led-display.html](http://photonplay.com/indoor-led-display.html)

# php - PHP和XML属性跟进

> ID：11811541
> 
> 赞同：1
> 
> 时间：2012-08-04T19:48:15.040
> 
> 标签：php, xml, xml-parsing, simplexml

如何使用 php 获取秒的属性值：

```
<yt:duration seconds='12445'/> 
```

这是我到目前为止所做的：

```
 $xmlstr  = file_get_contents($xml);
    $xml_content = new SimpleXMLElement($xmlstr); 
    echo $xml_content->xpath('//yt:duration')->attributes;
    print_r($xml_content->xpath('//yt:duration'));
    echo $xml_content->xpath('//yt:duration')->attributes()->seconds; 
```

显示这些消息：

```
Notice: Trying to get property of non-object in C:\xampp\htdocs\ytm\xmlTest.php on line 22
Array ( [0] => SimpleXMLElement Object ( [@attributes] => Array ( [seconds] => 12445 ) ) ) 
Notice: Trying to get property of non-object in C:\xampp\htdocs\ytm\xmlTest.php on line 24

Notice: Trying to get property of non-object in C:\xampp\htdocs\ytm\xmlTest.php on line 24 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:51:41.647

这：

```
$xml_content->xpath('//yt:duration') 
```

返回一个数组（正如您`print_r()`将告诉您的那样）。您必须获取第一个元素（在索引 0 处）才能使用与节点对应的 SimpleXMLElement `<yt:duration>`：

```
$list = $xml_content->xpath('//yt:duration');
$node = $list[0]; 
```

然后，您可以通过以下方式获得属性`attributes()`：

```
$attributes = $node->attributes();
echo $attributes['seconds']; // Not 100% sure on this, might be $attributes->seconds 
```

# javascript - JavaScript 按钮功能交换

> ID：11811549
> 
> 赞同：1
> 
> 时间：2012-08-04T19:49:28.117
> 
> 标签：javascript, jquery, html, alert

我想要做的是：我有一个输入类型按钮，我想在第一次点击时替换它的功能。

```
<input type="submit" class="submit-button" value="Submit" name="boom" /> 
```

所以一个用于提交的[按钮]，我想用一些 jquery 插件显示警报，但让我们在这里用普通的 javascript 警报（默认窗口）来做。

所以第一次点击它会是

```
alert('Something'); 
```

在第二次单击时，它将成为默认功能（提交）。

我怎样才能实现这样的目标？

当然，如果单击按钮一次，然后重新加载页面，它会在第一次单击按钮时再次显示相同的警报。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T19:59:36.850

使用[`one()`](http://api.jquery.com/one/).

> 将处理程序附加到元素的事件。每个元素最多执行一次处理程序。

例子：

```
$(".submit-button").one("click", function(e) {
    // will only run on first click of element
    e.preventDefault();
    alert("Something"); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T20:06:39.637

尝试这个：

```
<script type="text/javascript">
    var clicked = false;

    function btnClick(e) {
        if(clicked === false) {
            alert('Something');
            clicked = true;
            e.preventDefault();
            return true;
        } else {
            return false;
        }
    }
</script>

<input type="submit" onclick="btnClick(event)" class="submit-button" value="Submit" name="boom" /> 
```

# garbage-collection - 有没有办法在收集 Go 结构时释放非托管资源？

> ID：11811551
> 
> 赞同：12
> 
> 时间：2012-08-04T19:49:34.817
> 
> 标签：garbage-collection, interop, go, cgo

我有一个指向由 Go 结构包装的 C 类型的指针，如下所示：

```
type Wrapper struct {
    unmanaged *C.my_c_type
} 
```

C 类型又具有以下功能：

```
my_c_type* make_c_type();
void free_c_type(my_c_type *ct); 
```

有没有一种方法可以确保在实例完成`free_c_type`时调用它？`Wrapper`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-04T22:44:37.760

您可以使用[runtime.SetFinalizer](http://golang.org/pkg/runtime/#SetFinalizer)。这允许您在对象超出范围时运行清理功能。不保证运行。但是，在释放内存时，这并不重要。重要的是，对于一个长时间运行的进程，它可能会控制垃圾。

以下是文档的一些摘录（删除了整个段落）：

> SetFinalizer 将与 x 关联的终结器设置为 f。当垃圾收集器发现一个带有关联终结器的不可访问块时，它会清除关联并在单独的 goroutine 中运行 f(x)。这使 x 再次可访问，但现在没有关联的终结器。假设没有再次调用 SetFinalizer，下次垃圾收集器看到 x 不可达时，它会释放 x。
> 
> x 的终结器计划在 x 变得无法访问后的某个任意时间运行。无法保证终结器会在程序退出之前运行，因此它们通常仅用于在长时间运行的程序期间释放与对象关联的非内存资源。例如，当程序在不调用 Close 的情况下丢弃 os.File 时，os.File 对象可以使用终结器来关闭关联的操作系统文件描述符，但是依赖终结器来刷新内存中的 I 是错误的。 /O 缓冲区，例如 bufio.Writer，因为缓冲区不会在程序退出时被刷新。
> 
> 单个 goroutine 依次运行程序的所有终结器。如果终结器必须运行很长时间，它应该通过启动一个新的 goroutine 来实现。

# php - PHP 邮件 / PEAR 邮件

> ID：11811553
> 
> 赞同：2
> 
> 时间：2012-08-04T19:49:48.363
> 
> 标签：php

在我的目录网站上，我有一个“发送电子邮件”功能。这使用户可以向公司提交查询。此查询的副本也发送到我的收件箱。

几个月前，我注意到我的收件箱不再收到电子邮件副本。所以我对此进行了调查，结果发现我的网络主机不再允许使用 PHP 邮件功能发送外部电子邮件。

当我对此提出质疑时，我被告知我需要开始使用第三方邮件插件，并且建议我使用 PEAR。

所以我将我的 PHP 脚本转换为使用 PEAR 并设法让它在我的网站上运行。一切都很好，直到有一天我认为在我的虚拟主机上切换到 PHP 5.3 是个好主意。几天后，我注意到我的收件箱再次停止接收电子邮件副本。

因此，我再次对此进行了调查，发现它已损坏。有人告诉我，我需要恢复到 PHP 5.2 才能正常工作。所以基本上这就是我必须做的才能让它再次工作。

我的问题是，我怎么知道邮件功能一旦损坏就损坏了？在我意识到它已损坏的这段时间里，可能会从该站点发送几个查询，这些查询实际上并没有发送到任何地方。

其次，我应该坚持使用 PEAR 还是有更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:01:33.283

PEAR::Mail 有许多替代品。但是首先我必须解决一个问题，即您的目标是否是向您的托管公司付款，以便他们任意破坏您的网站并随后破坏您的业务？我不知道为什么有人愿意为失败而付出代价，并为此付出代价。

话虽如此，这个包[http://swiftmailer.org/](http://swiftmailer.org/)已经变得非常流行，并被捆绑为 symfony2 框架的一部分，这是对其功能的极好认可，并支持 PHP 中最新/最强大的特性。

在此之前，[http](http://phpmailer.worxware.com/) ://phpmailer.worxware.com/是一个非常流行的软件包。

至于检测您的邮件是否正常工作，唯一的方法是进行自动化测试工作，每天或以您想要的任何周期向您发送一封电子邮件。如果您没有收到该电子邮件，您就知道存在需要调查的问题。

# javascript - Chrome 扩展程序：端口错误：无法建立连接。接收端不存在。

> ID：11811554
> 
> 赞同：10
> 
> 时间：2012-08-04T19:50:02.950
> 
> 标签：javascript, google-chrome, google-chrome-extension

尝试在内容脚本和后台脚本之间进行通信时，出现以下错误：

```
Port error: Could not establish connection. Receiving end does not exist.
Error in event handler for 'undefined': Cannot read property 'message' of undefined       
TypeError: Cannot read property 'message' of undefined 
```

**背景.js**

```
function onRequest(request, sender, callbackFunction) {
    console.log("Me (BS) became this Message:" + request.message);
    sendResponse({message: request.message})
};
chrome.extension.onRequest.addListener(onRequest); 
```

**流云.js**

```
function contactBackground(nachricht){
    chrome.extension.sendMessage({message: nachricht}, function(response) {
        console.log("The Background Script got the following Message: " + response.message);
    });
} 
```

和我的**manifest.json**

```
{
  "name": "InstantWatch - Dev",
  "manifest_version": 2,
  "version": "0.7",
  "permissions": ["tabs", "http://*/", "https://*/"],
  "background": {
    "scripts": ["background.js"]
  },  
  "browser_action": {
    "default_title": "InstantWatch",
    "default_icon" : "icon.ico"
  },
  "content_scripts": [
    {
      "matches": ["http://*/*", "http://*/*"],
      "js": ["jquery.js", "streamcloud.js"]
    }
  ]
} 
```

我找到了添加一个带有空 background.html 的 background_page: "background.html" 的解决方案，但由于自 manifest_version: 2 以来不支持 background_page，我不能使用它。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-04T20:52:52.410

`sendMessage`并且`onRequest`不**兼容**。

如果您需要支持**Chrome 19 及更早版本**，请使用**`onRequest`**and **`sendRequest`**：

```
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    // Warning: Chrome 19- [receiver]
});
chrome.extension.sendRequest(message, optional_sendResponse); 
```

* * *

对于**Chrome 20 - 25**，使用和：`chrome.extension.**onMessage**``chrome.extension.**sendMessage**`

```
chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
    // Chrome 20+
});
chrome.extension.sendMessage(message, optional_sendResponse); 
```

* * *

对于**Chrome 26+**，请使用和。[`chrome**.runtime.**onMessage`](https://developer.chrome.com/extensions/runtime.html#event-onMessage)[`chrome**.runtime.**sendMessage`](https://developer.chrome.com/extensions/runtime.html#method-sendMessage)

* * *

注意：从 Chrome 26 开始，仍然支持已弃用的方法，尽管没有记录。如果您有机会，请更新您的扩展程序以使用新方法，以确保您的扩展程序将来仍然可以工作。有关创建与 Chrome 20+ 兼容的代码，
请参阅[此答案。](https://stackoverflow.com/a/15718294/938089?chrome-runtime-sendmessage-not-working-as-expected)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T20:51:12.017

代替

```
chrome.extension.onRequest.addListener(onRequest); 
```

采用

```
chrome.extension.onMessage.addListener(onRequest); 
```

由于您使用的是 sendMessage 而不是 sendRequest。

新版 Chrome 中更新了消息解析。sendRequest 和 onRequest 已被弃用。推荐使用 sendMessage 和 onMessage。

[有关Content Script 和 Background 之间](http://code.google.com/chrome/extensions/messaging.html)的消息解析，请参阅文档。

# python - 为什么要在 Python 中打印函数的返回值？

> ID：11811559
> 
> 赞同：-3
> 
> 时间：2012-08-04T19:50:46.117
> 
> 标签：python, python-3.x

对python很陌生，试试这个 -

```
def newlines():
    print()
    print()
    print()    
question = "Which online Course you have signed up, dude?"
response = "Good Luck to you, dude!"
print(question), newlines(), input(), newlines(), print(response) 
```

在 Python 3.2.* 中，输出是这样的

```
Which online Course you have signed up, dude?

Nothing

Good Luck to you, dude!

(None, None, "Nothing", None) # Where this output is coming from ? 
```

python 3.3 beta也不会发生这种情况

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T19:56:49.193

您必须在交互式 shell 中。当我将您的代码作为文件运行时，我得到以下输出：

```
$ python3.2 test.py
Which online Course you have signed up, dude?

dlkjdf

Good Luck to you, dude!
$ 
```

您只能在控制台获得输出：

```
>>> def newlines():
...     print()
...     print()
...     print()    
... 
>>> question = "Which online Course you have signed up, dude?"
>>> response = "Good Luck to you, dude!"
>>> 
>>> print(question), newlines(), input(), newlines(), print(response)
Which online Course you have signed up, dude?

dljdldk

Good Luck to you, dude!
(None, None, 'dljdldk', None, None)
>>> 
```

这是因为控制台将打印您输入的最后一个内容的表示形式。最后一个语句实际上是一个元组，因此它会在最后打印。这里有一些例子：

```
>>> 3
3
>>> 4
4
>>> 3, 4, None, "hey"
(3, 4, None, 'hey') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T19:54:15.943

当你写这个：

`print(question), newlines(), input(), newlines(), print(response)`

它实际上是一个元组，它保存了每个函数的结果。

简单地分解各个线路上的呼叫将解决您的问题。

```
print(question)
newlines()
input()
newlines()
print(response) 
```

# iphone - 如何在 iphone 中检查唯一的 int 号

> ID：11811566
> 
> 赞同：0
> 
> 时间：2012-08-04T19:52:01.203
> 
> 标签：iphone, ipad

我们如何检查通过我生成的数字是否在尝试生成 0 到 10 之间的唯一数字。

> **随机数 = arc4random() % 10;**

是独一无二的吗？

我能够生成一个随机数，但无法检查它是否唯一？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T04:19:33.030

为避免重复，请参阅以下随机数生成代码。当你运行下面的代码时也不会重叠任何数字。如果你的意思是你想要它独一无二。

```
#define COUNT 1000
#define RANGE 1000
int num[COUNT];

bool isNew(int idx, int val)
{
    for (int i=0; i<idx; i++) 
    {
        if (num[i] == val) return false;
    }
    return true;
} 
```

* * *

```
for (int i=0; i<COUNT; i++)
{
    do
    {
        num[i]=arc4random()%RANGE;        
    }
    while (!isNew(i, num[i]));
    NSLog(@"%d ", num[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T19:54:43.023

您可以将所有生成的数字保存在一个数组中，并检查是否有两个重复。

您拥有的数字越多，生成的数字就越确定是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-05T12:03:48.773

试试这个代码......这将为您提供在可变数组中设置的所有可能的唯一数字......

```
-(NSInteger) randomNumber {
NSInteger newRandomNumber = (NSInteger) arc4random() % 10;
NSInteger uniqueNumber;
if ([self.arrayContainingNumbers containsObject: [NSNumber numberWithInteger:newRandomNumber]]) {
    [self randomNumber];
    } else {
    [self.arrayContainingNumbers addObject: [NSNumber numberWithInteger:newRandomNumber]];
}
uniqueNumber = [[self.mutableArrayContainingNumbers lastObject]integerValue];
     NSLog(@"new Unique Number is %ld",(long)uniqueNumber);

return uniqueNumber;  } 
```

不要忘记添加此方法:)

```
-(NSMutableArray *) arrayContainingNumbers {
if (!_mutableArrayContainingNumbers) {
    _mutableArrayContainingNumbers = [[NSMutableArray alloc] init];
}
return _mutableArrayContainingNumbers; } 
```

# sql - 如何在sql中创建子集查询？

> ID：11811568
> 
> 赞同：4
> 
> 时间：2012-08-04T19:52:13.620
> 
> 标签：sql

我有两个表如下：

```
CREATE List (
    id   INTEGER,
    type INTEGER REFERENCES Types(id),
    data TEXT,
    PRIMARY_KEY(id, type)
);

CREATE Types (
    id   INTEGER PRIMARY KEY,
    name TEXT
); 
```

现在我想创建一个查询来确定所有`List`给定类型字符串的 id。

例如，

```
列表：
1 0 "一些文字"
1 1“摩尔文本”
2 0 "富"
3 1“酒吧”
3 2“巴巴兹”
4 0 “巴兹”
4 1“FooBar”
4 2“FooBarBaz”

类型：
0“钥匙1”
1“钥匙2”
2“钥匙3”

```

给定输入“Key1”、“Key2”，查询应返回 1、4。

给定输入“Key2”、“Key3”，查询应返回 3、4。

给定输入“Key2”，查询应返回 1、3、4。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T19:53:53.073

```
select distinct l.id 
from list l
inner join types t on t.id = l.type
where t.name in ('key1', 'key2')
group by l.id
having count(distinct t.id) = 2 
```

您必须将 having 子句调整为放入 where 子句中的键数。仅一键示例：

```
select distinct l.id 
from list l
inner join types t on t.id = l.type
where t.name in ('key2')
group by l.id
having count(distinct t.id) = 1 
```

[SQLlFiddle 示例](http://sqlfiddle.com/#!2/fa295/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T20:05:39.073

您可以使用以下技巧来扩展 Jurgen 的想法：

```
with keys as (
    select distinct t.id
    from types t
    where t.name in ('key1', 'key2')
)
select l.id 
from list l join
     keys k
     on l.type = keys.id cross join
     (select count(*) as keycnt from keys) k
group by l.id
having count(t.id) = max(k.keycnt) 
```

也就是说，计算子查询中的匹配键，然后将其用于计数。这样，您只需更改一行即可输入键值，并且您可以拥有任意数量的键。（请注意，我没有测试过这个 SQL，所以对于任何语法错误，我深表歉意。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T20:17:25.667

如果您可以动态生成 SQL，这可能是许多 DBMS 中最有效的方式之一：

```
SELECT l.id
FROM   List  l
  JOIN Types t1  ON t1.id = l.type
  JOIN Types t2  ON t2.id = l.type
WHERE  t1.name = 'Key1'
  AND  t2.name = 'Key2' ; 
```

看到这个类似的问题，有超过 10 种方法可以获得相同的结果，以及一些基准（针对 Postgres）：**[How to filter SQL results in a has-many-through relationship](https://stackoverflow.com/questions/7364969/how-to-filter-sql-results-in-a-has-many-through-relation)**

# doctrine-orm - Doctrine 2 关联映射开销？

> ID：11811570
> 
> 赞同：3
> 
> 时间：2012-08-04T19:53:06.290
> 
> 标签：doctrine-orm

教义 2 中的关联映射

```
<?php
class User
{
    //...
    /**
     * @ManyToMany(targetEntity="Group")
     * @JoinTable(name="User_Group",
     *      joinColumns={@JoinColumn(name="User_id", referencedColumnName="id")},
     *      inverseJoinColumns={@JoinColumn(name="Group_id", referencedColumnName="id")}
     *      )
     */
    private $groups;
    //...
} 
```

在测试中，假设在此示例中 $groups 在构造函数中初始化为 ArrayCollection()，返回与用户关联的所有组。

我的开发团队中的一位程序员对这种情况提出了一个很好的观点。它加载与用户实体关联的所有组，我们可能不需要所有组。

在执行 DQL 连接语句时，假设我们要选择最喜欢的组，可以通过 DQL 连接实现，我们加入用户、组和收藏夹。Doctrine 是否再次查询所有组？这是我要指出的开销，已经有一个所有组的数组集合。

我们如何控制关联映射的结果？或者如果我们删除关联映射，我们是否仍然可以使用 DQL 来加入没有设置关联映射的实体？或者，Doctrine 是否真的使用了 DQL 中关联映射的数据？

# php - Codeigniter：如何将参数传递给像对象一样的模型方法

> ID：11811572
> 
> 赞同：2
> 
> 时间：2012-08-04T19:53:44.930
> 
> 标签：php, codeigniter

我总是看到以形式传递给模型方法的参数`$this->example_model->method('Some Title');`

我最近在这里看到了一个答案（现在找不到），说正确创建的模型应该接收这样的方法的参数：

```
$this->example_model->method->title = 'Some Title'; 
```

我似乎无法弄清楚如何做到这一点，模型方法会是什么样子来实现这一点？这真的是应该如何传递参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:10:25.157

好吧，取决于需求和使用情况。

假设我需要从模型中的数据库表中提取所有条目 - 这很好：

`$this->example_model->get();`

假设我需要根据某些标准获取所有条目。我可能会做这样的事情：

```
$criterias = array('age' => '> 10', 'gender' => 'm');
$this->example_model->get($criterias); 
```

你想要完成的事情更像是这样的：

```
$this->example_model->criterias->age = '> 10';
$this->example_model->criterias->gender = 'm';
$this->example_model->get(); 
```

或者您可以使用更理想的方法绑定：

```
$this->example_model->set_criteria('age', '> 10');
$this->example_model->set_criteria('gender', 'm');
$this->example_model->get();

// With method binding:
$this->example_model->set_criteria('age', '> 10')->set_criteria('gender', 'm')->get(); 
```

基本上，所有解决方案都很好——没有一个是最正确的，仍然有几种方法可以实现相同的目标。但是有些比其他的更具可读性（并且不易出错）。您应该选择适合您并且您可以轻松使用的任何东西。

# java - 隐藏来自 url 的发送参数

> ID：11811578
> 
> 赞同：1
> 
> 时间：2012-08-04T19:54:36.767
> 
> 标签：java, get, struts-1, url-parameters, struts1

我应该使用链接。这意味着方法 GET 和我可以在 url 中看到的所有参数。我怎样才能像这样隐藏url中的参数

```
http://localhost:8080/MyApp/action.do?method=delete&amp;id=0 
```

以及之后我如何在 java 类中获取参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T20:00:11.443

您不能从 URL 中隐藏 GET 参数。GET 名称值对必须是请求的一部分。但是，您当然可以尝试的一件事是将查询字符串加密为只有您的代码才能在主机上解码的字符串，例如

```
http://localhost:8080/MyApp/action.do?method=delete&amp;id=0 
```

可能

```
http://localhost:8080/MyApp/action.do?param=[ENCRYPTED/OBFUSCATED STRING] 
```

然后您在上述 url 上的应用程序可以对其进行解码并转换回名称值对

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T20:01:14.130

这就是 GET 方法的想法——通过 URL 来路径参数，可能你应该使用 POST。

# r - 在 R 中处理空间数据时出错

> ID：11811580
> 
> 赞同：1
> 
> 时间：2012-08-04T19:54:59.453
> 
> 标签：r, csv, import-from-csv

在尝试处理我似乎无法调试的数据时，我遇到了几个错误。

这是**R**脚本[https://dl.dropbox.com/u/28231177/This%20Should%20Work.R](https://dl.dropbox.com/u/28231177/This%20Should%20Work.R)
这是数据[https://dl.dropbox.com/u/28231177/my_data.csv](https://dl.dropbox.com/u/28231177/my_data.csv)

这是我运行它们时包含错误的最后几行：

```
pds <- fortify(sf_map)
# Using OBJECTID to define regions.
pds$OBJECTID <- as.integer(pds$OBJECTID)
# Error in `$<-.data.frame`(`*tmp*`, "OBJECTID", value = integer(0)) : 
# replacement has 0 rows, data has 16249

### Make the map

p1 <- ggplot(my_data, aes(map_id = zip))
p1 <- p1 + geom_map(aes(fill=vol, map_id = zip), map = pds)
p1 <- p1 + expand_limits(x = pds$lon, y = pds$lat) + coord_equal()
p1 + xlab("Basic Map with Default Elements")
# Error in unit(x, default.units) : 'x' and 'units' must have length > 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:32:42.433

如果您设置，您的代码对我有用

```
pds <- fortify(sf_map, region = "ID") 
```

并删除线

```
pds$OBJECTID <- as.integer(pds$OBJECTID) 
```

你也不应该`long`像`lon`@mdsumner 提到的那样使用。

这是一个略有不同的解决方案（使用`geom_polygon`not `geom_map`）

```
library(maptools)
library(ggplot2)

## 'fortify' needs 'library(gpclib)' locally available
gpclibPermit()

## Import the shapefile
sf_map <- readShapeSpatial("sfzipcodes", ID = "ID")

## Import the data
my_data <- read.csv("my_data.csv")
my_data <- unique(my_data)

## Merge the data
sf_df <- fortify(sf_map, region='ID')
sf_df <- merge(sf_df, my_data, by.x="id", by.y="zip", all=FALSE)
sf_df <- sf_df[order(sf_df$group, sf_df$order), ]

## Make the map
p2 <- ggplot(sf_df, aes(x=long, y=lat, group=group, fill=vol))
p2 <- p2 + geom_polygon() + coord_equal()
p2 <- p2 + xlab("Basic Map with Default Elements")
p2 
```

# magento - magento：从块或 hlper 中获取变量到 javascript 文件中

> ID：11811585
> 
> 赞同：3
> 
> 时间：2012-08-04T19:55:53.893
> 
> 标签：magento

我通过布局 xml 包含一个 js 文件：

例如：

```
<reference name="head">
    <action method="addItem">
        <type>js</type>
        <name>myjs.js</name>
    </action>
</reference> 
```

这可以。但是，我在 myjs.js 中设置了一个 ajax 调用，并想从帮助类中提取帖子 url。

这怎么可能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T20:36:44.160

在您对 I 的引用中，`head`我将添加一个块，该块将输出一个在添加的 myjs.js 文件之前设置 js var 的部分。

例如：

```
<reference name="head">
    <block type="page/html" name="mycustomblock" template="page/html/mycustomblock.phtml"/>
    <action method="addItem">
        <type>js</type>
        <name>myjs.js</name>
    </action>
</reference> 
```

您的文件 mycustomblock.phtml 将包含：

```
<?php

// below is javascript that is being populated by your helper
?>
<script> var myblogpost = <?php echo Mage::helper('mycustom/helper')->blogPostUrl();?>; </script> 
```

# jquery - 停止更改悬停jQuery的偏移量

> ID：11811586
> 
> 赞同：0
> 
> 时间：2012-08-04T19:56:07.233
> 
> 标签：jquery, hover, mouseover, offset

我想在浏览器窗口的左侧创建一个小栏，用于跟踪鼠标 Y 位置并跟随鼠标。到目前为止，没有任何问题。

但是现在我想在鼠标悬停在 div 上时阻止 div 偏移，以便也可以单击 div 刚刚显示的内容。

> 我做了一个小提琴来让自己清楚
> 
> [http://jsfiddle.net/UXWp6/](http://jsfiddle.net/UXWp6/)

```
 <html>
        <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script>
        $(document).bind('mousemove', function(e){
        $('#blokje').offset({top: e.pageY-100}); });

        </script>
<style>
#blokje{width:200px; height:200px; background:white; position:relative; left:-180px; color:black; }
#blokje:hover{left:0;}
#blokje #tit{position:absolute; width:30px; height:200px; background:black; right:0; top:0; }
</style>
     </head>
        <body>
            <div id="blokje">
            <div id="tit">&nbsp</div>
                <p><a href="#">A link</a><br /> This is the content where I would like to have my content clickable like that link on top </p>
            </div>
        </body>
    </html>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:16:06.937

而不是一次又一次地实际绑定和解除绑定事件。我可能会停止传播，因此文档永远不会看到它发生。

```
$(function(){
    $(document).bind('mousemove', function(e){
        $('#blokje').offset({top: e.pageY-100}); 
    });

    $('#blokje').bind('mousemove', function(e){
        e.stopPropagation();
    });
}); 
```

[提琴手](http://jsfiddle.net/scispear/LD4ua/)

# android - 我应该在 Android 培训之前使用 Android 编程书籍吗？

> ID：11811592
> 
> 赞同：-2
> 
> 时间：2012-08-04T19:56:48.727
> 
> 标签：android

是否建议首先从 android pdf 书籍而不是开发者网站开始，因为 developer.android.com Android 培训，因为它们似乎对我来说太快了，我无法理解，而且我有 java 知识

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T20:01:30.217

我强烈推荐这个系列：[http ://www.youtube.com/playlist?list=PLE08A97D36D5A255F](http://www.youtube.com/playlist?list=PLE08A97D36D5A255F)

该系列将诚实地教您需要知道的一切，并且由知识渊博的人教授。不要跳过第一个视频，它们会慢慢播放，但会帮助您了解 Android 系统。

如果你有 Eclipse 并做 android 开发者网站教程。应该足够了。我不认为书是必要的，特别是如果你有 Java 知识。

**1.**观看视频。**2.**浏览教程。**3.**将手指放在键盘上。

在大约一个月的时间里，这三个步骤帮助我发布了一个应用程序，而我对 Java 知之甚少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T20:02:42.383

作为一个对 Java 有短暂但古老历史的人，阅读 O'Reilly 的*Programming Android*封面非常棒。它为您提供了对应用程序生命周期和许多其他极其重要和有用的 Android 组件的非常扎实的概述，包括 SQLite、意图等（许多基础知识，很好地集中在一个地方）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-04T14:06:48.337

这是最好的书

[公用书](https://wares.commonsware.com#comsbook0802)

通过 Mark Murphy，您还将与 Mark 进行及时的聊天以解决您的疑问。这本书也很快更新，所以你不会有过时的版本。到目前为止，最好的钱花在任何一本书上。

# java - 游戏地形精灵旋转

> ID：11811593
> 
> 赞同：0
> 
> 时间：2012-08-04T19:57:21.583
> 
> 标签：java, json, graphics

我正在制作一个RPG游戏。我正在开发一个地图编辑器，我可以用它来设计游戏的世界。现在，当我创建精灵时，我看到我将拥有像海滩这样的东西，草与沙相遇。我制作了一个 32x32 的精灵，其中一半由我的草精灵组成，另一半由我的沙精灵组成。

现在假设我想使用同一个精灵，但它是镜像。首先是沙子，然后是草。

我的地图编辑器使用 JSON 保存地图，所以我无法保存图像，我必须保存一个 URL 才能在玩游戏时检索图像。那么我怎样才能确保保存某种信息来指定如何绘制该图像，无论是旋转 180 度还是镜像？如何对我的图像执行这些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:16:37.963

我建议用于驱动地图/编辑器的 JSON 应该包含有关磁贴方向的信息以及地图位置可能需要的任何其他信息。例如：

```
{
  "name": "Isle of Dread",
  "locations": [
    {
      "x": 0,
      "y": 0,
      "terrain": "sand",
      "tile": {
        "url": "/tiles/grassy-beach.png",
        "orientation": "north"
      }
    },
    {
      "x": 0,
      "y": 1,
      "terrain": "sand",
      "tile": {
        "url": "/tiles/grassy-beach.png",
        "orientation": "east"
      }
    }
  ]
} 
```

实际旋转和绘制瓷砖的代码将取决于您使用的技术。许多图形框架都有旋转图像的方法。

# .net - 32 位 .NET 在 64 位操作系统上的可用性

> ID：11811594
> 
> 赞同：6
> 
> 时间：2012-08-04T19:57:43.440
> 
> 标签：.net

**TLDR：**在 64 位操作系统上安装 .NET 时，32 位组件是否始终存在？

我曾经将我的应用程序 ( [IronScheme](http://ironscheme.codeplex.com/) ) 完全编译为`AnyCPU`. 虽然这适用于所有平台，但 64 位 JIT 编译器对我来说似乎太慢了（启动速度慢了大约 550%，一般来说慢了大约 25%）。启动缓慢可以通过 NGEN'ng 我的程序集来解决，并且实际上这样做可以将启动时间再提高 500%。这使 64 位的启动时间（3700 毫秒对 140 毫秒）提高了大约 2600%。当 32 位和 64 位都是 NGEN 时，启动时间是相同的，但 32 位在运行时仍然表现更好。

现在在大多数情况下根本不需要 64 位，我认为在可执行文件中定位 x86 将是最好的通用解决方案（所有其他程序集都是目标`AnyCPU`，但据我所见，可执行文件决定了它的去向） . 所以这个想法是有 2 个启动可执行文件，一个针对 x86，另一个针对 x64（或 MS 称之为 amd64）。

在 32 位操作系统上安装时，我可以确定不存在 64 位组件。但是相反的情况呢？.NET 安装程序是否同时安装 32 位和 64 位组件？这很重要，因为如果目标与运行时不匹配，NGEN'ng 非 AnyCPU 程序集将失败。

例子：

*“编译 IronScheme.Console.exe 时出错：此版本与您运行的 Windows 版本不兼容。”*

另请注意，我的应用程序是默认为 .NET 2 和 VS2008 构建的，因此新`AnyCPU (32-bit preferred)`选项（在 VS2012/.NET 4.5 中）目前不适合我。

PS：对不起，如果之前有人问过这个问题。我不知道如何搜索这个特定的问题，我的谷歌 fu 也让我失望了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T20:07:49.473

> 32 位组件是否始终存在于 64 位操作系统上？

**没有**。但是没有安装的情况比较少见。Windows Server *Core* 2008 R2（可能是*Core* 2012）支持[WOW64](http://en.wikipedia.org/wiki/WoW64)作为单独的、可安装和可移动的组件 - 包括 .NET 位。在这里[查看](http://blogs.technet.com/b/server_core/archive/2008/12/19/net-3-0-and-3-5-in-windows-server-2008-r2-server-core.aspx)更多信息。

为了安装 Server Core 2008 R2 的 WOW64 组件，需要运行：

> 启动 /w ocsetup NetFx3-ServerCore-WOW64

Server Core 是我能够找到 x64 组件可用的唯一案例，但 x86 组件可能不可用。如果您不针对或不支持服务器核心，那么我相信可以安全地假设 x86 位将与 x64 位一起存在。

# javascript - 包含 4 个问题的 Javascript 测验。单选按钮 + 继续按钮

> ID：11811595
> 
> 赞同：0
> 
> 时间：2012-08-04T19:58:20.757
> 
> 标签：javascript, html

我尝试用例如 4 个问题（多于一个）进行测验。每个问题有 4 个单选按钮和一个继续按钮 ( `input type="submit"`)。我希望当您单击继续按钮时，您将被重定向到某个页面（success.html），但只有当所有问题都得到正确回答时。当您在问题中犯一些错误并单击继续按钮时，它将重新加载测验页面。

我试图这样做：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=windows-1250">
  <meta name="generator" content="PSPad editor, www.pspad.com">
  <title></title>
  </head>
  <body>
  <h3>1\. otazka: otazocka</h3>
  <input type="radio" name="otazka1" value="n" onClick="toggle(this)" /> Yes
  <input type="radio" name="otazka1" value="n" onClick="toggle(this)" /> No
  <input type="radio" name="otazka1e" value="y" onClick="toggle(this)" /> spravna
  <input type="radio" name="otazka1" value="n" onClick="toggle(this)" /> asda
  <br />
  <input type="submit" id="continue" value="Continue" onClick=""/>

  <script>
  var continue_button = document.getElementById('continue');              

  function toggle(switchElement) {
        if (switchElement.value == 'y')
                continue_button.setAttribute("onClick", "window.location.href='http://www.google.sk'");
        else
                continue_button.setAttribute("onClick", "window.location.href='http://www.facebook.com'");             
  }
  </script>
  </body>
</html> 
```

但它只适用于一个问题。

我会很高兴得到一些帮助。谢谢。

* * *

感谢您的回答。但是当我选择单选按钮并单击继续时，它并没有将我重定向到任何页面。所以我试试这个

```
<label><input type="radio" name="otazka1" value="n" /> false</label>
  <label><input type="radio" name="otazka1" value="n" /> false</label>
  <label><input type="radio" name="otazka1" value="y" /> true</label>
  <label><input type="radio" name="otazka1" value="n" /> false</label>
  <input type="submit" id="continue" value="Continue" />
<script>
    var continue_button = document.getElementById('continue');
    continue_button.onclick = function(event) {
        var everything_OK = true;
        var inputs = document.getElementsByTagName("input");
        for (var i=0; i<inputs.length; i++) {
            if (inputs[i].type != "radio")
                continue;
            var should_be = inputs[i].value == "y";
            if (inputs[i].checked != should_be) {
                everything_OK = false;
                break;
            }
        }
        if (everything_OK) {
            // this is not a good success-page
            continue_button.setAttribute("onClick", "window.location.href='succes.html'");
        } else {
            continue_button.setAttribute("onClick", "window.location.href='pop.html'");
        }
    };
</script> 
```

但现在我必须点击两次继续按钮。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:25:19.277

您将需要遍历所有问题并查看是否在按下继续按钮时检查它们是否正确，而不是在仅选择一个答案时更改表单的完整验证状态。尝试这个：

```
<label><input type="radio" name="otazka1" value="n" /> Yes</label>
<label><input type="radio" name="otazka1" value="n" /> No</label>
<label><input type="radio" name="otazka1" value="y" /> spravna</label>
<label><input type="radio" name="otazka1" value="n" /> asda</label>

...

<input type="submit" id="continue" value="Continue" />
<script>
    var continue_button = document.getElementById('continue');
    continue_button.onclick = function(event) {
        var everything_OK = true;
        var inputs = document.getElementsByTagName("input");
        for (var i=0; i<inputs.length; i++) {
            if (inputs[i].type != "radio")
                continue;
            var should_be = inputs[i].value == "y";
            if (inputs[i].checked != should_be) {
                everything_OK = false;
                break;
            }
        }
        if (everything_OK) {
            // this is not a good success-page
            window.location.href = "http://www.facebook.com");
        } else {
            window.location.href = "http://www.google.sk";
        }
    };
</script> 
```

# java - mCamera 无法解析为变量（Android、Eclipse）

> ID：11811598
> 
> 赞同：2
> 
> 时间：2012-08-04T19:58:50.330
> 
> 标签：java, android, eclipse, variables

我对 Android 开发非常陌生。我正在关注 Google 的 Android“类”，并在 Eclipse 中收到此代码的错误：

```
package com.feistie.myfirstapp;

import android.app.ActionBar;
import android.app.Activity;
import android.content.Intent;
import android.os.Build;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Initialize member TextView so we can manipulate it later
        mTextView = (TextView) findViewById(R.id.text_message);

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            // For the main activity, make sure the app icon in the action bar
            //does not behave as a buutton
            ActionBar actionBar = getActionBar();
            actionBar.setHomeButtonEnabled(false);
        }
    }

    @Override
    public void onDestroy() {
        super.onDestroy();  // Always call the superclass

        // Stop method tracing that the activity started during onCreate()
        android.os.Debug.stopMethodTracing();
    }

    @Override
    public void onPause() {
        super.onPause();  // Always call the superclass method first

        // Release the Camera because we don't need it when paused
        // and other activities might need to use it.
        if (mCamera != null) {
            mCamera.release();
            mCamera = null;
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    /** Called when the user clicks the Send button */
    public void sendMessage (View view) {
        // Do Something in response to button
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }
} 
```

这些行中的每一行都有一个错误：

```
if (mCamera != null) {
                mCamera.release();
                mCamera = null;
            } 
```

第一行和第三行的错误是“mCamera 无法解析为变量”。第二行的错误只是说“无法解决 mCamera”。

如果您需要更多信息，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:00:00.210

您需要先声明`mCamera`，然后才能引用它：

```
public class MainActivity extends Activity {
    Camera mCamera; 
```

然后你需要初始化它，可能在 onResume()

```
@Override
protected void onResume() {
    super.onResume();
    mCamera = Camera.open()
} 
```

确保您添加了您清单的适当权限：

```
<uses-permission android:name="android.permission.CAMERA" /> 
```

**添加**

在您尝试在 Java 中使用它之前，您需要声明每个变量。我也看不到你在哪里声明`mTextView`。

```
public class MainActivity extends Activity {
    Camera mCamera;
    TextView mTextView; 
```

# ios - 如何序列化/归档需要相互指针的游戏对象的状态？

> ID：11811599
> 
> 赞同：0
> 
> 时间：2012-08-04T19:58:57.817
> 
> 标签：ios, serialization

当它们需要彼此的指针时，如何将游戏对象的状态序列化并存档到数据库中？除了原始数据类型之外，有没有一种方法可以序列化自定义对象？我应该归档指针吗？或者更好的方法是给每个对象一个唯一的 ID，以便我以后可以重建关系？

我希望有人能分解我应该采取的将 iOS 游戏保存到服务器以供其他设备/玩家稍后检索的一般方法。我知道这似乎很广泛，但我只是在寻找我应该使用的技术/库/类的要点分解。

游戏已经开发好了，我只是不知道如何保存和加密状态服务器端。我正在考虑使用AFNetworking，但我需要保存一个相对复杂的游戏的所有对象。似乎具有原始数据类型的 JSON 对象不会削减它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:30:12.807

使用核心数据。这就是它存在的原因。直接从他们的文档...

> Core Data 框架为与对象生命周期和对象图管理（包括持久性）相关的常见任务提供通用和自动化的解决方案。

核心数据编程指南简介：http: [//developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)

# vim - Vim 不选择新创建的配色方案

> ID：11811602
> 
> 赞同：1
> 
> 时间：2012-08-04T19:59:58.007
> 
> 标签：vim

我最近从 Emacs 切换到 Vim，所以我是个新手。[我在这里](http://vimcolorschemetest.googlecode.com)找到了一堆配色方案，并想我会[试一试](http://vimcolorschemetest.googlecode.com/svn/colors/mod_tcsoft.vim)。我把它放在我的`/usr/share/vim/vim72/colors`目录中。然后我重新打开我的 Vim 并做了：

```
:colorscheme mod_tcsoft 
```

但它无法识别我的配色方案。

（注意：当我直接从网站复制粘贴到我的新`mod_tcsoft.vim`文件时，它会评论所有内容，所以我省略了顶部的评论部分。所以这不是问题。:)）

我是否需要做任何额外的事情才能让 Vim 把它捡起来？

另外，我如何查看 Vundle 中可用的配色方案列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T20:17:29.853

假设 Vim 在 上设置了该目录，这应该可以工作`runtimepath`，而无需关闭并重新打开 Vim。键入`:set runtimepath?`- 注意最后的问号 - 并验证它`/usr/share/vim/vim72`是否在打印的目录中。

当你运行时`:colorscheme mod_tcsoft`，你会得到一个错误：`Cannot find color scheme`？

尝试将文件添加到 ~/.vim/colors。如果中间目录不存在，则创建它们：`mkdir -p ~/.vim/colors`.

> 注意：当我直接从网站复制粘贴到我的新`mod_tcsoft.vim`文件时，它会评论所有内容，所以我省略了顶部的评论部分。所以这不是问题。

听起来是个`paste`问题。你在终端运行 Vim 吗？如果您粘贴并看到这样的问题，请`:set nopaste`在粘贴之前尝试，粘贴，然后`:set paste`.

# android - Android：当 Activity 被销毁时如何保留 AsyncTask 实例？

> ID：11811607
> 
> 赞同：1
> 
> 时间：2012-08-04T20:00:12.917
> 
> 标签：android, android-asynctask

在我的应用程序中，我有一个继承自`AsyncTask`服务器并从服务器下载大量数据的类。我使用 a`ProgressBar`来指示下载的进度。

当用户`HOME`按下键时，它所附加的`Activity`那个`AsyncTask`被破坏，但是下载继续。

我怎样才能重新附加它`AsyncTask`并向用户显示进度？我尝试使用`onRetainNonConfigurationInstance`，但 Android 4.0 似乎没有调用此方法。我的应用程序不使用`Fragments`API。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T20:41:27.133

我在这种情况下所做的如下：

1.  我创建了一个[IntentService](http://developer.android.com/reference/android/app/IntentService.html)来处理与服务器的通信。这具有[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的一些优点（例如，工作线程），但也具有 Service 的一些优点（随时随地可用）。
2.  IntentService 可以通过我的主 Activity 中的用户操作或通过[不精确的重复警报](http://developer.android.com/reference/android/app/AlarmManager.html#setInexactRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)来调用。
3.  数据存储在一个[SQLite 数据库](http://developer.android.com/guide/topics/data/data-storage.html#db)中，前面有一个[ContentProvider](http://developer.android.com/guide/topics/providers/content-providers.html)。[我通过使用SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)并从后台 IntentService 的安全性调用[getWritableDatabase()](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getWritableDatabase%28%29)来回避何时/如何创建我的数据库和表的问题。
4.  任务完成后，如果我的主要活动未激活，它会发布[通知。](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

这种安排的一个好处是，不需要进度条。事实上，不需要 UI。用户在服务运行时继续使用应用程序，并且 UI 会在新数据进入 ContentProvider 时自动刷新。它的另一个优点是它比 AsyncTask 编写的代码更少。它通过从数据库中读取最后一个条目的服务器端元数据并要求用户在该点之后开始，自动从上次中断的地方开始。由于它不绑定到任何 Activity 实例，它不关心[onPostExecute()](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)或[配置更改](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29)或任何其他。而且您不必担心像 AsyncTask 这样的单次执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T20:12:42.347

如果需要在后台下载大量数据，我会使用服务而不是 AsyncTask。Google IO有一个关于使用服务的很好的[演示](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html)。

引用 AsyncTask 文档：

> 如果您需要保持线程长时间运行，强烈建议您使用 java.util.concurrent 包提供的各种 API，例如 Executor、ThreadPoolExecutor 和 FutureTask。

和

> 该任务只能执行一次（如果尝试第二次执行将引发异常。）

据我了解，您无法继续执行上一个 AsyncTask。不过，您可以部分加载数据并保存读取的数据量，然后启动新的 AsyncTask，该任务将从上次保存的点开始。从我的角度来看，当活动进入后台时暂停加载并不是最好的主意，最好使用服务来完成已启动的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T20:14:58.303

您是否考虑过使用服务将 AsyncTask 附加到？将其视为永久运行的服务可能是您手头任务的最佳解决方案。那么您所要做的就是检查服务是否正在运行以及您的下载是否正在运行（使用静态布尔变量很容易完成）然后您只需使用服务中的一些状态保存变量创建一个进度对话框（可能是百分比下载的总文件大小等）在您的主要活动的 onCreate 方法中。

# asp.net-mvc - asp.net mvc 基本路由问题

> ID：11811610
> 
> 赞同：0
> 
> 时间：2012-08-04T20:00:52.923
> 
> 标签：asp.net-mvc

我在视图文件夹下有两个文件夹。一个是 Home 并且有 index.aspx 文件在视图文件夹中的另一个文件夹称为 DashBoard 并且有 MyDash.aspx

我的路由代码看起来像 global.asax

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
        "DashBoard", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "DashBoard", action = "MyDash", id = UrlParameter.Optional } // Parameter defaults
        );
    } 
```

所以当我输入像**http://localhost:7221/**或**http://localhost:7221/Home**这样的 url 时 index.aspx 正在从主文件夹呈现但是当我输入像**http://localhost:7221/DashBoard**这样的 url然后未找到页面即将到来，但如果我输入**http://localhost:7221/DashBoard/MyDash**则页面即将到来。

所以我的第二个路由代码有什么问题。**为什么当我输入http://localhost:7221/DashBoard**之类的 url 时 MyDash.aspx 没有出现。怎么了？

我需要在我的第二个路由代码中更改什么？

请看一看……我是 MVC 的新手。谢谢

## 我的更新

当我更改 global.asax 文件中的路由条目时，它开始工作。你能解释一下为什么....

```
 routes.MapRoute(
                "DashBoard",
                "DashBoard/{action}/{id}",
                 new { controller = "DashBoard", action = "MyDash", id = UrlParameter.Optional }
            );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

我可以这样写路由代码吗

```
 routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional },
            new { controller = "DashBoard", action = "MyDash", id = UrlParameter.Optional } 
); 
```

两个网址的相同模式....请详细讨论。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:20:02.423

路由名称（第一个参数）对调用的动作/控制器没有影响。

但是，您的 2 个路线模式（routes.MapRoute 的第二个参数）是相同的：

```
"{controller}/{action}/{id}" 
```

...所以任何*将*被第二个模式匹配的东西都会被第一个模式捕获。因此，它们都被第一个地图定义映射。

`http://localhost:7221/Home`之所以有效，是因为它与第一个模式匹配，并且可能 Index 操作存在于您的 Home 控制器中。

`http://localhost:7221/DashBoard/MyDash`之所以有效，是因为即使它与第一条路由匹配，它也会通过通过 URL (DashBoard/MyDash) 传入的路由参数覆盖默认操作/控制器 (Home/Index)。

`http://localhost:7221/DashBoard`不起作用，因为它被第一个路由模式拾取，但是您没有传入操作名称，因此它会查找默认值 - 索引 - 我猜你还没有在仪表板控制器。

**更新（如何解决问题）：**
因此，如果您想`http://localhost:7221/DashBoard`使用名为 MyDash 的操作映射到名为 DashBoard 的控制器，同时仍允许通过删除您的第二条路线来拾取其他模式`{controller}/{action}/{id}`，并将此路线作为**第一**条路线：

```
routes.MapRoute(
        "DashBoard", 
        "DashBoard/{action}/{id}",
         new { controller = "DashBoard", action = "MyDash", id = UrlParameter.Optional }               
    ); 
```

这是一条更具体的路线，所以它需要在 catch-all 之前走`{controller}/{action}/{id}`。没有开始的东西*不会*`/DashBoard`被它捡起来。

# javascript - 使用 javascript 创建一个 Form 元素并在不重定向/刷新的情况下提交它

> ID：11811617
> 
> 赞同：0
> 
> 时间：2012-08-04T20:02:09.737
> 
> 标签：javascript, jquery, html, ajax

我在包含一些输入元素的灯箱中使用表单。

```
<form name="imageUploadForm" action="uploadImage.do" method="post" enctype="multipart/form-data">
<input type="text"  id="id" name="id" style="display: none;" value="">
<div id="fileUploaderDiv">
     <input type='file' name="file0" id ="file0"  />
</div>
<button onclick="javascript:ImageUploader.attachImage();">Upload</button>
</form> 
```

谁能告诉我如何将这个表单复制到新的表单中并在不重定向用户或不知道他使用 javascript 或 jquery 提交表单的情况下提交它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:04:48.517

为了将数据发送到服务器（通过提交表单或其他方式），可以使用 AJAX。不需要通知用户（但我建议以某种方式让用户知道）。

*   [JavaScript 教程](http://www.tizag.com/ajaxTutorial/ajax-javascript.php)
*   [jQuery 文档](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:09:22.717

[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

```
$('#yourbutton_notintheexample_you_provided').click(function(){ 
    var myForm = $('form[name=imageUploadForm]')
    var data = myForm.serialize();
    $.ajax({
       url: myForm.attr('action'),
       type: myForm.attr('method'),
       data: data, 
       success: function(){
           window.alert("write your form handling code here")
        }
    });
}); 
```

或类似的东西。

在原型中，有一个方便的方法，称为 Form.request，[请在此处阅读。](http://prototypejs.org/api/form/request)

# java - Struts2标签给jasper异常

> ID：11811624
> 
> 赞同：0
> 
> 时间：2012-08-04T20:03:13.470
> 
> 标签：java, struts2, ognl

下面是jsp代码

```
<ul class="nav pull-right">
          <s:if test="%{curUser != null}">
              <li class="dropdown">
                <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">%{curUser.userName}<b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <s:if test="%{curUser.admin eq true}">
                    <li><a href="/admin" title="Admin Section"><i class="icon-certificate"></i> Admin</a></li>
                  </s:if>
                  <li><a href="/user/%{curUser.userName}" title="%{curUser.userName}'s Profile"><i class="icon-user"></i> Profile</a></li>
                  <li><a href="/user/profile.html?action=edit"><i class="icon-cog"></i> Edit Profile</a></li>
                  <li><a href="/login.html?action=logout"><i class="icon-off"></i> Sign out</a></li>
                </ul>
              </li>
            </s:if>
            <s:else>
              <li><a href="/login">Login</a></li>
              <li class="divider-vertical"></li>
              <li><a href="/signup">Sign Up</a></li>
            </s:else>
        </ul> 
```

我收到这个错误。需要帮助。

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /decorators/base.jsp at line 45

42:               </a></li>
43:             </ul>
44:             <ul class="nav pull-right">
45:               <s:if test="%{curUser != null}">
46:                   <li class="dropdown">
47:                     <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">%{curUser.userName}<b class="caret"></b></a>
48:                     <ul class="dropdown-menu"> 
```

这是我的 web.xml 配置-我猜问题是使用带有站点网格的 Struts 标签。

```
 <filter>
    <filter-name>sitemesh</filter-name>
    <filter-class>com.opensymphony.sitemesh.webapp.SiteMeshFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>sitemesh</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

  <filter>
    <filter-name>LoginCheckFilter</filter-name>
    <filter-class>com.tutorial.filter.LoginCheckFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>LoginCheckFilter</filter-name>
    <url-pattern>/admin</url-pattern>
    <url-pattern>/admin/*</url-pattern>
  </filter-mapping>

  <filter>
    <filter-name>UrlRewriteFilter</filter-name>
    <filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class>
    <init-param>
      <param-name>logLevel</param-name>
      <param-value>WARN</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>UrlRewriteFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

  <filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    <init-param>
      <param-name>actionPackages</param-name>
      <param-value>com.tutorial.action</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
  </filter-mapping>

  <listener>
    <listener-class>
      org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>

  <listener>
    <listener-class>org.apache.struts2.dispatcher.ng.listener.StrutsListener</listener-class>
  </listener> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T15:39:48.480

我也发生了同样的事情，触摸我也收到了另一个错误。发生的情况是struts标签在运行时没有被替换，所以它不能被html处理器编译。解决方法是在 web.xml 中，struts 过滤器映射必须高于 sitemesh 过滤器映射。

我在这个主题中得到了同样的回答： [s:url not replace on decorator sitemesh](https://stackoverflow.com/questions/16811509/surl-not-replaced-on-decorator-sitemesh)

看看它是否听起来很熟悉。

# c# - 在 Oracle 中使用 XML 保存数据

> ID：11811625
> 
> 赞同：0
> 
> 时间：2012-08-04T20:03:24.197
> 
> 标签：c#, oracle

我使用以下代码进行保存。将记录更新到 Oracle，

```
OracleConnection con = new OracleConnection(constr);
con.Open();

// Create the command.
OracleCommand cmd = new OracleCommand("", con);
cmd.CommandText = "<?xml version=\"1.0\"?>\n" +
    "<ROWSET>\n" +
    " <MYROW>\n" +
    " <FIELD1>2</FIELD1>\n" +
    " <FIELD2>zafar</FIELD2>\n" +
    " </MYROW>\n" +
    "</ROWSET>\n";

// Set the XML save properties.
KeyColumnsList = new string[1];
KeyColumnsList[0] = "FIELD1";
UpdateColumnsList = new string[1];
UpdateColumnsList[0] = "FIELD2";

cmd.XmlSaveProperties.KeyColumnsList = KeyColumnsList;
cmd.XmlSaveProperties.UpdateColumnsList = UpdateColumnsList;
cmd.XmlSaveProperties.RowTag = "MYROW";
cmd.XmlSaveProperties.Table = "testconn";
cmd.XmlSaveProperties.Xslt = null;
cmd.XmlSaveProperties.XsltParams = null;
rows = cmd.ExecuteNonQuery();

Console.WriteLine("rows: " + rows); 
```

在`Field2`我要使用的列中`select user from dual`。我无法保存当前的数据库用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T22:42:34.297

中的数据结构`CommandText`假定所有值都是文字。没有办法让它识别内部查询或表达式。如果要查询，`user`则必须单独执行并将其合并到数据中。`Xslt`使用and`XsltParams`子句可以做到这一点。

# vb.net - 如何在 mdi 表单中使用注销按钮

> ID：11811628
> 
> 赞同：-1
> 
> 时间：2012-08-04T20:03:46.007
> 
> 标签：vb.net

我正在使用注销按钮作为单击然后 mdi 表单需要关闭然后登录页面应该出现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:36:12.287

在 mobileMDI 中添加以下代码：

```
Public Class modileMDI

    Private Sub btnLogoff_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnLogoff.Click
        Login.Show()
        Me.Hide()
    End Sub
End Class 
```

我假设注销按钮名为 btnLogoff。

# android - xml中的引用字符串

> ID：11811630
> 
> 赞同：0
> 
> 时间：2012-08-04T20:04:20.457
> 
> 标签：android, xml, android-resources

我正在尝试在我的 strings.xml 中引用格式化的字符串。我在谷歌上搜索，发现了这篇好文章：http: [//developer.android.com/guide/topics/resources/string-resource.html](http://developer.android.com/guide/topics/resources/string-resource.html)

我遵循了它看起来的每一个细节，但打印出来的文本并不是它应该的样子。

首先，在我的资源下的strings.xml中，我将其定义为：

```
<string name="print_binary">This is the printout: %1$s</string> 
```

在 .java 我放：

```
String fromString = "one";
Resources res = getResources();

onScreen = String.format(res.getString(R.string.print_binary), fromString); 
```

这会在屏幕上显示以下文本：这是打印输出：%1$s

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:29:27.987

您可以使用：

onScreen = res.getString(R.string.print_binary, fromString);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:26:42.443

天哪，我完全错过了输入类似的东西

```
TextView show = (TextView) findViewById(R.id.tvDisplay); 
show.setText(onScreen); 
```

然后为我的 TextView 对象添加一个 id。晚上太晚了。似乎不需要 String.format() 语句，我会继续阅读。谢谢你的支持！

# ruby-on-rails - 如何对用户自定义表模型与字段模型的关系进行建模

> ID：11811632
> 
> 赞同：1
> 
> 时间：2012-08-04T20:04:51.707
> 
> 标签：ruby-on-rails, postgresql

我正在构建一个 CMS，我想添加的功能之一是用户指定的伪表，让具有足够权限的用户创建表、列、行和字段。显然，出于安全原因，让他们实际访问数据库是不明智的，所以我正在考虑创建一个表模型和相关的子模型（列、行、字段）。这是我目前正在查看的架构：

```
UserTable:
- id:int
- title:string
- :has_many UserColumns
- :has_many UserRows
- :has_many UserFields :through => rows

UserColumn:
- id:int
- table_id:int (foreign key)
- title:string
- type:enum
- :belongs_to UserTable
- :has_many UserFields

UserRow:
- id:int
- table_id:int (foreign key)
- :belongs_to UserTable
- :has_many UserFields

UserField:
- id:int
- row_id:int (foreign key)
- column_id:int (foreign key)
- data:string 
```

我仍然面临的最大问题是`UserTable`->`UserField`关系。看起来既可以贯穿也可以`UserColumn`贯穿`UserRow`。后者对我来说感觉更直观，所以这就是我目前正在使用的，但如果有充分的理由去任何一种方式，我想听听。同样，如果有任何我没有看到的关键问题，或者只是处理整个混乱的更简单方法（尽管这似乎相当简单）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:27:22.490

我会使用方案，具体取决于涉及多少用户。使用新用户创建新方案，然后创建所需的表是相当容易的。

通过完整的方案，您可以在非常精细的粒度上控制访问，提供简单安全的备份和数据迁移等。

你为什么不首先考虑使用方案？

# javascript - 移动 - 图表的最佳插件

> ID：11811635
> 
> 赞同：7
> 
> 时间：2012-08-04T20:05:38.763
> 
> 标签：javascript, mobile, cordova, charts

用 Cordova(Phonegap) 制作图表的最佳插件是哪个？

（除了 jquery 移动插件）

我尝试过不同的方法，但在网页上，我不知道在移动设备上是如何工作的，例如 Flotr2 或 HighChart

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:55:13.573

检查这个答案：[Phonegap + jQuery Mobile + 股票/折线图](https://stackoverflow.com/questions/8651984/phonegap-jquery-mobile-stock-line-chart)

这：[https ://groups.google.com/forum/?fromgroups=#!topic/phonegap/7sX9b2dQLQg](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/7sX9b2dQLQg)

我会选择[flot](http://code.google.com/p/flot/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T08:53:37.707

**[ZoomCharts](https://zoomcharts.com/en/)**是一个新的图表和图形库，它将 JavaScript 图表和图形带到桌面和移动设备，并且非常强大和优化。

[![在此处输入图像描述](../Images/721d150182e0f82f36f8c2b3f03604d9.png)](https://zoomcharts.com/en/)

使用 ZoomCharts，您可以创建：

*   时间线图
*   类别图（饼图、分面图）
*   网络图

和更多。

# javascript - 如何在页面上进行实时更新

> ID：11811636
> 
> 赞同：0
> 
> 时间：2012-08-04T20:05:37.983
> 
> 标签：javascript, jquery

我有一个页面，用户可以在其中注册参加比赛。用户只需使用用户名填写文本字段并单击提交按钮。

现在，我可以将他们的用户名添加到一个表格中，该表格在他们单击提交时通过 ajax 显示所有已注册的用户。但是，我希望每次添加新用户时无需刷新页面即可更新该表格。

通过设置某种更新该表的间隔来做到这一点的唯一方法是什么？似乎它会进行很多不需要的数据库调用。什么是好的间隔使用？

我是否应该将表格存储在视图中并使用 .load 每隔 10 秒将其插入页面上的 div 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:12:52.003

您必须重新检查间隔内的任何更改：

```
setInterval(function() {
    $.ajax({
        url: "your/url",
        type: "GET",
        success: function(result) {
            // Update table
        }
    });
}, 10000); // Number of milliseconds to recheck 
```

# javascript - 每个值的 jQuery UI Slider 更改类

> ID：11811639
> 
> 赞同：0
> 
> 时间：2012-08-04T20:05:50.450
> 
> 标签：javascript, jquery, jquery-ui

我有一个范围在 1-100 之间的 jQuery UI 滑块。我想为 1-100 之间的每个值更改 div 的类。

我知道有一种更有效的 JavaScript 方法来切换类和遍历值。除了 else if 语句，还有更好的方法吗？

任何使这更有效的提示都值得赞赏。

```
$( '#slider-container' ).slider({
min: 1,
max: 100,
slide: function( event, ui ) {
    if ((ui.value == 2)) { 
        $( ".number_100" ).toggleClass( 'number_102' );
    } else if ((ui.value == 3)) { 
        $( ".number_100" ).toggleClass( 'number_103' );
    }
}
}); 
```

或（但不确定如何查找/删除最后添加的课程？）

```
<div class="position_100 number_101"></div>    

$( '.position_100' ).removeClass().addClass((ui.value<10) ? 'number_10'+ui.value : 'number_1'+ui.value); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:29:35.460

似乎有点啰嗦，但是在检查了另一个答案之后，似乎`toggleClass`还不够；仅仅是因为`slide`我们可能会添加一个类，从而导致项目上有多个“数字类”，即类属性值为：`number_101 number_102 number_103`。相反，我假设您只是在追求最近的`ui.value`变化？

如果是这种情况，可以使用[`data`](http://api.jquery.com/jQuery.data/)jQuery 中的方法来实现，只需记住最近添加的类是什么，如下所示：

```
slide: function(event, ui) {
    if (div.data('lastClass')) {
        div.removeClass(div.data('lastClass'));                   
    }

    var newClass = ui.value < 10 ? 'number_10' + ui.value : 'number_1' + ui.value;
    div.data('lastClass', newClass).addClass(newClass);
} 
```

我知道它可能看起来有点冗长，但这确实意味着我们在滑动之后只有一个“数字类”。

## [jsFiddle](http://jsfiddle.net/GeekyEggo/bZmJ8/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:08:44.347

不会：

```
slide: function( event, ui ) {
    $( ".number_100" ).toggleClass( 'number_10'+ui.value );
} 
```

更有效率？这假定您的类名对应于滑块值，因此值 10 等于类名“number_1010”。

使用三个类的快速**[jsFiddle 示例。](http://jsfiddle.net/j08691/bZmJ8/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T20:12:41.797

尝试这个：

```
slide: function( event, ui ) {
    if (ui.value < 10) { 
        $( ".number_100" ).toggleClass( 'number_10'+ui.value );
    } else { 
        $( ".number_100" ).toggleClass( 'number_1'+ui.value );
    }
} 
```

或者：

```
slide: function( event, ui ) {
   $(".number_100").toggleClass((ui.value<10) ? 'number_10'+ui.value : 'number_1'+ui.value);
} 
```

# php - 检查多维数组中的索引是否为数组

> ID：11811641
> 
> 赞同：1
> 
> 时间：2012-08-04T20:06:02.173
> 
> 标签：php, arrays, multidimensional-array, header

编码：

```
 $row['text'] = 'http://t.co/iBSiZZD4 and http://t.co/1rG3oNmc and http://t.co/HGFjwqHI and http://t.co/8UldEAVt';

    if(preg_match_all('|http:\/\/t.co\/.{1,8}|i',$row['text'],$matches)){
        foreach($matches[0] as $value){
            $headers = get_headers($value,1);
            if(is_array($headers['Location'])){
                $headers['Location'] = $headers['Location'][0];
            }
            $row['text'] = preg_replace('|http:\/\/t.co\/.{1,8}|i', '<a href="' . $headers['Location'] . '">' . $headers['Location'] . '</a>',$row['text']);
        }
    } 
```

这与`get_headers()`. 有时会`get_headers($url,1)`返回一个带有位置索引键的数组，如下所示`[Location]=>Array([0]=>url1 [1]=>url2)`：如果存在，我基本上想`[Location]`等于。但是，上面的代码似乎并没有完成该任务。我也尝试过，但都没有解决问题。想法？`[Location][0]``[Location][0]``array_key_exists()``isset()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:53:37.483

不要试图即时更换。首先获取所有值，然后在一批中进行替换（使用两个数组作为`$search`and`$replace`参数）。

```
<?php

    $replace = array();
    $row = array('text' => 'http://t.co/iBSiZZD4 and http://t.co/1rG3oNmc and http://t.co/HGFjwqHI and http://t.co/8UldEAVt');
    if (preg_match_all('|http:\/\/t.co\/.{1,8}|i', $row['text'], $search)) {
        foreach ($search[0] as $value) {
            $headers = get_headers($value, 1);
            if (is_array($headers['Location'])) {
                $headers['Location'] = $headers['Location'][0];
            }
            $replace[] = "<a href='{$headers["Location"]}'>{$headers["Location"]}</a>";
        }
        $row['text'] = str_replace($search[0], $replace, $row['text']);
        echo $row["text"];
    } 
```

PS - 下次，请告诉我们您的问题的上下文，告诉我们您“正在提供解决缩短 URL 的服务”，不要让我仅从您的代码中弄清楚这一点。

# android - Android 拉伸屏幕以适应更大的屏幕尺寸

> ID：11811645
> 
> 赞同：0
> 
> 时间：2012-08-04T20:07:17.897
> 
> 标签：android, button, size, imageview, screen

当它在更大的屏幕上运行时，如何放大我的活动？我已经为我的 imageview 尝试了 android:scaleType="fitXY" 但它不起作用。我已经尝试了很多我研究过的代码，但它们都不起作用。当我在三星 Galaxy S2 上运行它时，它运行良好。但是当我在 Galaxy Note 或 Galaxy S2 上试用时，UI 完全不同。所有图像视图都很小。

这是 S2 的用户界面：

![S2](../Images/7422dbc3005cf3fe2839b7f19f51ac41.png)

这是 note 和 S3 的 UI：

![S3/笔记](../Images/7e3b730a329c8a28a77ca5f347b9f7df.png)

这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:orientation="vertical" >

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:contentDescription="@string/imageDesc"
        android:src="@drawable/welcome" />

    <Button
        android:id="@+id/btnFinance"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="240dp"
        android:background="@drawable/btn_finance" />

    <Button
        android:id="@+id/btnHowtouse"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="305dp"
        android:background="@drawable/btn_howto" />

    <Button
        android:id="@+id/btnSettings"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="370dp"
        android:background="@drawable/btn_settings" />

    <Button
        android:id="@+id/btnAbout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="435dp"
        android:background="@drawable/btn_about" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T20:18:00.467

您可以为每种分辨率制作不同的图像和布局。

使用不同图像分辨率的文件夹，如 drawable-hdpi 和 drawable-xhdpi

我建议在这里阅读更多详细信息：[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)

# php - 如何使用通过 php GD 生成的图像动态更新页面

> ID：11811646
> 
> 赞同：1
> 
> 时间：2012-08-04T20:07:24.027
> 
> 标签：php, jquery, html, iframe, gd

目前，我正在根据用户表单输入通过 php GD 动态生成 1-(N) 张图像，然后发布到显示图像的 iframe 中。

但是有几个问题：

1.  iframes 在造型时似乎是一种拖累。
2.  在 iframe 中，用户似乎无法正确“右键单击->保存”图像。

那么有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:09:05.350

使用带有set的固定大小的`div`元素。`overflow: scroll`

例如：

```
#container {
    width: 600px;
    height: 300px;
    overflow-y: scroll; //vertical scrolling only
} 
```

它的行为方式与 iframe 相同，但允许您更好地通过 javascript 控制内容和通过 CSS 设置样式。

# php - cakephp的模型关联问题

> ID：11811649
> 
> 赞同：1
> 
> 时间：2012-08-04T20:07:52.107
> 
> 标签：php, mysql, cakephp, database-relations

我在尝试在 cakePHP 中创建的投票系统遇到问题（在这里找到[cakephp 正在查询额外的列，我不知道为什么](https://stackoverflow.com/questions/11805539/cakephp-is-querying-extra-column-and-i-cant-figure-out-why)），但我想通了，现在我遇到了另一个问题。

我正在制作一个投票系统，我遇到的问题是只有一个用户可以对给定的帖子投票。例如，如果用户 1 对帖子 1 投票，然后用户 2 对帖子 1 投票，则用户 2 的投票将覆盖用户 1 的投票。

这是我的桌子

```
Votes
id |   user_id   | vote

Posts
id | title | body | created | modified | user_id | vote_total 
```

我在设置关联时遇到问题

1.  用户可以对许多帖子进行投票

2.  一个帖子可以有很多票，但每个用户只有 1 票

这是在我的用户模型中

```
public $hasMany = array(
    'Posts' => array( 'className'  => 'Post'),
     'Votes' => array('className'  => 'Vote')
    ); 
```

这是在我的帖子模型中

```
 public $hasMany = array( //there can be multiple votes of the same id (references post table)
    'Votes' => array('foreignKey' => 'id')
    ); 
```

我没有投票控制器。这是通过 PostsController.php 上的投票功能完成的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:36:55.347

```
public $hasMany = array( //there can be multiple votes of the same id (references post table)
    'Votes' => array('foreignKey' => 'id')
    ); 
```

是错的。它应该是：

```
 public $hasMany = array( //there can be multiple votes of the same id (references post table)
'Votes' => array('foreignKey' => 'post_id')
); 
```

所以你必须在投票模型中添加 post_id 。

# jquery - 在主页上设置 wordpress 帖子样式

> ID：11811651
> 
> 赞同：1
> 
> 时间：2012-08-04T20:08:35.570
> 
> 标签：jquery, wordpress

好的，我是 wordpress 设计的新手，我发现 wordpress codex 对于像我这样的初学者来说太先进了。

好吧，我的博客主页显示出来`15 posts`了，我已经成功实现了一个特色滑块，它显示了最新的 5 篇文章。现在，我想`previous (5) post`在 jquery 轮播中显示，但我什至不知道该怎么做。关于如何处理这些家伙的任何帮助？我在 wordpress.stackoverflow 区域发布了这个问题，但没有回复。我花了很长时间才实现这个:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:39:51.203

如果插件正在使用 WP 功能，您可以尝试更改“偏移量”参数。请注意您可以根据需要调整的偏移参数。

```
<ul>
<?php
global $post;
$args = array( 'numberposts' => 5, 'offset'=> 5, 'category' => 1 );
$myposts = get_posts( $args );
foreach( $myposts as $post ) :  setup_postdata($post); ?>
    <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>
<?php endforeach; ?>
</ul> 
```

# android - 单击复选框的声音

> ID：11811657
> 
> 赞同：0
> 
> 时间：2012-08-04T20:09:34.300
> 
> 标签：android, checkbox, audio

当用户选中一个框时，我想要一个声音点击。我使用 Ubuntu Natty、Eclipse Indigo，我的代码适用于 Android 2.2。编译正常，但没有声音。我在谷歌中寻找了一个简单的编码，但只有我在这个问题上找到了复杂的例子，想知道。这是我的代码，有什么问题？

```
 package com.stufflist;

   import android.app.Activity;
   import android.os.Bundle;
   import android.util.Log;
   import android.view.Menu;
   import android.view.View;
   import android.widget.CheckBox;

   public class ListStuff extends Activity {

   @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.liststuff);
   }

   @Override
    public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.liststuff, menu);
    return true;
   }

   public void onCheckboxClicked(View view) {
    // Is the view now checked?
    view.setSoundEffectsEnabled(true);
    boolean checked = ((CheckBox) view).isChecked();

    // Check which checkbox was clicked
    switch(view.getId()) {
        case R.id.CheckBox07:
            if (checked)
                view.playSoundEffect(0);
                Log.v((String) view.getTag(),"yeah");
            break;
        case R.id.CheckBox06:
            if (checked)
                view.playSoundEffect(1);
                Log.v((String) view.getTag(),"yeah2");
            break;
        // TODO: Veggie sandwich
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:05:12.577

OnClickListener 是获得默认触摸反馈来解决此问题的唯一方法。我遇到了类似的问题并解决了它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:18:00.380

不幸的是，您可以创建的 AVD 的大多数“目标版本”API 都没有内置 Tones。

我在具有一些内置铃声的 API 级别 15 上进行了测试，但似乎那里也缺少“FX_KEY_CLICK”和其他人。

最好能在真实设备上进行此类测试。

# variables - 哪个变量名是正确的？

> ID：11811659
> 
> 赞同：2
> 
> 时间：2012-08-04T20:09:45.360
> 
> 标签：variables, naming, convention

我想制作一个变量，即客户想要的调味品。

我认为“condimentCustomerWants”还可以

但我永远不会在其他代码中看到包含相对代词的变量名。

所以我问了我的朋友，他推荐了'customerWantsCondiment'，这是句子。

嗯..哪个名字是正确的，好的，可读的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T20:13:15.427

我会`desiredCondiments`加入其中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T20:14:28.910

真的取决于每个人的编码风格。我会做

```
requestedCondiment 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-04T20:15:25.013

desiredCondiment PreferredCondiment condimentForCustomer PreferredCondimentForCustomer WantCondiment

等等...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T20:14:43.283

如何命名变量完全取决于您，但是它们应该始终反映变量实际应该做什么。

如果是：“客户是否想要调味品”，您需要： CustomerWantsCondiment（真/假值，可能是布尔值）

如果是：“客户想要哪种调味品？”，您需要：CondimentCustomerWants（例如一个 int 值）

它们听起来相似，但都有不同的含义。什么最适合你，真的。

您可能还希望遵守变量名称约定，以表示变量类型的字母开头变量名称。这样，您将一眼就知道变量的类型，而无需查找实际定义。请注意，介绍字母总是小写。

例如：bool bCustomerWantsCondiment；诠释 iCustomerWantsCondiment；char *sCustomerWantsCondiment; 等等

有关匈牙利符号的更多信息，请查看此处，例如： [http ://en.wikipedia.org/wiki/Hungarian_notation](http://en.wikipedia.org/wiki/Hungarian_notation)

此外，为了便于阅读，您应该使用“CamelCase”约定。这意味着，每次您在变量名中开始一个新单词时，都以大写字母开头。

# iphone - 我有一条从圆的中心点到另一个点的线。我想找到直线与圆的圆周相交的点

> ID：11811660
> 
> 赞同：2
> 
> 时间：2012-08-04T20:09:46.317
> 
> 标签：iphone, geometry, line-intersection

我已经尝试了几种不同的解决方案，但到目前为止没有运气。

```
- (CGPoint)contractLineTemp:(CGPoint)point :(CGPoint)circle :(float)circleRadius { 
CGFloat x,y;
x = point.x - circle.x;
y = point.y - circle.y;

CGFloat theta = atan2(x, y);

CGPoint newPoint;

newPoint.x = circle.x + circleRadius * sin(theta);
newPoint.y = circle.y + circleRadius * cos(theta);

return newPoint;
}

- (CGPoint)contractLineTemp:(CGPoint)startPoint :(CGPoint)endPoint :(float)scaleBy {

float dx = endPoint.x - startPoint.x;
float dy = endPoint.y - startPoint.y;

float scale = scaleBy * Q_rsqrt(dx * dx + dy * dy);
return CGPointMake (endPoint.x - dx * scale, endPoint.y - dy * scale);
} 
```

这两种解决方案都有效。如果我将线画到圆的中心，您会看到它与圆正好相交在应该的位置。

[http://www.freeimagehosting.net/le5pi](http://www.freeimagehosting.net/le5pi)

如果我使用上述任一解决方案并根据角度绘制圆的圆周，则它不再朝向圆心。在第二张图片中，这条线应该在圆圈右边缘的中间并向右直行。

**http://www.freeimagehosting.net/53ovs**

[http://www.freeimagehosting.net/sb3b2](http://www.freeimagehosting.net/sb3b2)

抱歉链接。我对当前发布图片很陌生。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T20:28:40.530

将其视为向量问题更容易。您的第二种方法很接近，但您没有正确缩放两点之间的矢量。在这种情况下，使用归一化向量更容易，尽管您必须假设线上两点之间的距离不为零。

鉴于：

```
double x0 = CIRC_X0; /* x-coord of center of circle */
double y0 = CIRC_Y0; /* y-coord of center of circle */

double x1 = LINE_X1; /* x-coord of other point on the line */
double y1 = LINE_Y1; /* y-coord of other point on the line */ 
```

那么两点之间的向量就是(vx,vy)：

```
double vx = x1 - x0;
double vy = y1 - y0; 
```

使用单位向量更容易，我们可以通过标准化 (vx,vy) 得到：

```
double vmag = sqrt(vx*vx + vy*vy);
vx /= vmag;  /* Assumption is vmag > 0 */
vy /= vmag; 
```

现在，沿线的任何点都可以描述为：

```
x0 + dist * vx
y0 + dist * vy 
```

哪里`dist`是到中心的距离。圆与直线的交点距离圆心一定为`CIRC_RADIUS`，所以：

```
double x_intersect = x0 + CIRC_RADIUS * vx;
double y_intersect = y0 + CIRC_RADIUS * vy; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:25:16.820

我认为关于 theta、x 和 y 可能存在约定冲突。atan2 函数通过将 theta 的约定作为从 X 轴向 Y 增长的角度来生成 -pi..pi 范围内的值。但是，您将 theta 视为从 Y 到 X 的角度。尝试更改代码：

```
CGFloat theta = atan2(y, x);
CGPoint newPoint;
newPoint.x = circle.x + circleRadius * cos(theta);
newPoint.y = circle.y + circleRadius * sin(theta); 
```

尽管您的公式在坐标系中是一致的，但它可能与屏幕/显示设备坐标系发生冲突。

# android - 如何根据自己的喜好排列操作栏中的菜单项？

> ID：11811665
> 
> 赞同：0
> 
> 时间：2012-08-04T20:10:26.843
> 
> 标签：android, eclipse, layout, android-actionbar

我想知道是否有人可以告诉我如何选择哪些菜单项进入动作栏，哪些进入溢出菜单，我有五个菜单项，我想要在操作栏中的那些进入溢出和我想要的一个在溢出中是在操作栏中。如何重新排列操作栏？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:13:17.963

你可以做两件事。首先你可以设置标志

```
android:showAsAction="ifRoom" 
```

如果有空间，这将显示项目，如果没有，它们将被放置在溢出菜单中。

其次，对 XML 文件进行线性扫描。因此，只需将您在溢出菜单中的操作放在底部即可。

该[文件](http://developer.android.com/guide/topics/ui/actionbar.html)指出

> 未提升为操作项的菜单项在溢出菜单中可用，由设备菜单按钮（如果可用）或操作栏中的“溢出菜单”按钮（当设备不包含菜单按钮时）显示）。

这也是一个包含更多信息的好帖子。 [如何在 android actionbar compat 上强制溢出菜单？](https://stackoverflow.com/questions/8758263/how-to-force-overflow-menu-on-android-actionbar-compat)

# .net - 我应该使用什么框架来获得持久缓存？

> ID：11811671
> 
> 赞同：3
> 
> 时间：2012-08-04T20:11:22.160
> 
> 标签：.net, caching, persistence

我目前正在将一些对象和类保存到 HttpContext.Cache 中，但即使在应用程序池被回收或机器重新启动时，我也想让这些对象和类持久化。我尝试使用 AppFabric 或 Memcached，但它们似乎专注于分布式缓存，而不是本地缓存。此外，与 AppFabric 结合的 EF STE 似乎取决于可序列化的类，并且我的类中的某些属性是例如对不可序列化的 .NET 类的引用（例如，我有对 System.Net.WebSockets 实例的引用。 WebSocket 作为属性）。

所以我的问题是：谁能给我任何好主意或指向一个框架，该框架将允许我将类保存到某种本地缓存中，该缓存可以持久保存到磁盘（或数据库，如果它允许我将任何内容保存到其中） ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T04:37:26.407

新的 Appfabric 1.1 具有通读和后写功能，可保证缓存的持久性。

**通读**- 如果缓存中不存在请求的项目，则可以从后端存储加载数据，然后将其插入缓存。使用通读提供程序，缓存会检测到丢失的项目并调用提供程序来执行数据加载。然后将该项目无缝返回到缓存客户端。
**写入后**- 同样，可以使用直写提供程序定期将在缓存中添加或更新的项目写入后端存储。这在缓存定义的时间间隔内异步发生。

您可以在此处查看我的博客文章以了解实现细节[http://blogs.msdn.com/b/prathul/archive/2011/12/06/appfabric-cache-read-from-amp-write-to-database-read -通过-write-behind.aspx](http://blogs.msdn.com/b/prathul/archive/2011/12/06/appfabric-cache-read-from-amp-write-to-database-read-through-write-behind.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:16:45.193

看看 RavenDB - 它是一个 NoSQL 数据库，但非常轻量级并且与 .net 非常集成，因此您可以存储您的类并将它们作为此类的实例返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T21:06:57.483

如果你想让它们序列化，你可能应该重新考虑你的类的结构。但就手头的问题而言，如果您想缓存对象并让它们在应用程序池回收中持久存在，那么您可能应该考虑配置`HttpContext.Cache`为使用 SQL Server 而不是进程内内存。查看以下链接：

[ASP.NET 缓存概述](http://msdn.microsoft.com/en-us/library/ms178597.aspx)

[演练：在 SQL Server 中使用 ASP.NET 输出缓存](http://msdn.microsoft.com/en-us/library/e3w8402y%28v=vs.80%29.aspx)

请注意，在任何技术/平台特定资源上使用包装器是一种很好的做法。例如，最好使用`CacheWrapper`基本上在`HttpContext.Cache`内部访问的类。这样，您可以轻松地更改包装类的实现以在需要时使用另一个缓存存储。

# c++ - 用不同的返回值声明 extern "C"

> ID：11811676
> 
> 赞同：1
> 
> 时间：2012-08-04T20:12:57.730
> 
> 标签：c++, assembly, return-value, extern

我在外部 ASM 文件中定义了一个名为*ecall的函数。*此函数采用不同数量的参数并返回不同的值。

这是它在我的源代码中的样子：

```
int ret = _function1("Hello", "world");
HANDLER h = _function2(123456);
char * ch = _function3("asdf", 789, h);
// ... and so on 
```

这些“函数”实际上是使用简单的 python 脚本生成的宏。这个自动生成的头文件定义了所有这些宏，如下所示：

```
extern "C" ????? ecall(int code, ...);

#define _function1(...) ecall(0x123, __VA_ARGS__)
#define _function2(...) ecall(0x234, __VA_ARGS__)
#define _function3(...) ecall(0x345, __VA_ARGS__)
#define _function4(...) ecall(0xABC, __VA_ARGS__)
// ... and around 500 more definitions with a different code value 
```

但是，我被困在*ecall*的声明中（我已标记为“?????”）。我需要以某种方式指定返回值，但实际上这个函数返回几乎所有内容（取决于*int 代码*值）——布尔值、整数、指针等。

有没有办法做到这一点？我正在 MSVC10 上编译。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:21:01.543

要么创建你自己的变体类型（包含每种类型的联合），或者像我更强烈建议的那样，创建不同的函数，每个函数只返回一个特定类型。

# ios - 如何在 Xcode 4.3 中成功使用 BOOL

> ID：11811679
> 
> 赞同：0
> 
> 时间：2012-08-04T20:13:20.937
> 
> 标签：ios, xcode, boolean, avfoundation

我刚刚完成了斯坦福大学使用 AVFoundation 的 iPhone 课程。那节课上，助教让我们制作了一个显示视频的应用程序，然后通过人脸识别将太阳镜戴在脸上。所以我想连接几个开关和滑块来做不同的事情。第一个是改变色调过滤器值的滑块。然后我想切换是否显示太阳镜。但开关不会关闭太阳镜。虽然开关有效。我在属性中声明了一个 BOOL

```
@property (nonatomic) BOOL sunGlasses; 
```

我合成了它，然后将开关连接到以下动作

```
- (IBAction)toggleGlasses:(id)sender 
{
if (_mySwitch.on)
{
    NSLog(@"toggle is on");
    self.sunGlasses = YES;
}else {
    NSLog(@"toggle is off");
    self.sunGlasses = NO;
}
} 
```

然后在 -(void) captureOutput 的方法下，这就是改变色调和人脸识别的地方，我将其添加到人脸识别部分

```
if ((faceFound) && (self.sunGlasses = YES)){
    [self.glasses setHidden:NO];
}else{
    [self.glasses setHidden:YES];
} 
```

它曾经只是如果（faceFound）然后隐藏眼镜或展示它们。但是，如果您将开关关闭，这不会使眼镜消失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T20:21:12.150

你用过：

```
self.sunGlasses = YES 
```

单个 = 是一个赋值。它设置该属性的值，当在更大的表达式中使用此语句时，它的值为 YES。因此，“if”条件始终为真，并且始终采用显示太阳镜的分支。

使用双等号 == 来测试是否相等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-30T15:31:58.213

您可以使用

如果（self.sunGlasses）{

}

验证

# drupal-6 - Ubercart 2.x - 添加 produkt 行以通过 php 订购

> ID：11811680
> 
> 赞同：0
> 
> 时间：2012-08-04T20:13:36.167
> 
> 标签：drupal-6, ubercart

我正在尝试将产品添加到 Drupal 6 中的 ubercart 订单中，以获得“经常性客户的免费礼物”。我已经将它与 ubercart 的条件操作集成在一起，效果很好。
我正在努力的是将产品添加到订单中。我可以使用以下方法将产品添加到购物车：

> uc_cart_add_item($settings['gift_product'], $settings['gift_product_quantity']);

为了避免欺诈，客户不只是点击返回并更改免费产品的数量，我想在结帐后添加它，这样在订单确认和包装订单时会出现该行。（如果有更好的方法可以实现，请赐教）
下面的代码，并没有添加产品线，而是“收费”，但它是我得到的最接近的：

> uc_order_line_item_add($order->order_id, $settings[ 'gift_product' ], $product->title, $settings[ 'gift_product_quantity']);

作为附带的事情，我想知道，如果可能，然后如何在添加的产品线上设置价格，或者为该订单线添加 100% 的折扣。

在一周的大部分时间里，我一直在为此寻找解决方案，但我似乎找不到合适的解决方案。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:54:51.267

我找不到任何这样做的模块，所以我最终自己制作了。ubercart 购物车奖励模块，对于实现这一点的可能方式是一个很好的启发：http: [//drupalmodules.com/module/ubercart-cart-bonus](http://drupalmodules.com/module/ubercart-cart-bonus)

我没有更改订单，只更改了购物车，然后进行了必要的检查以防止欺诈。

# javascript - NaCl 中的模块加载进度事件，manifest_version = 2 且没有内联 javascript

> ID：11811681
> 
> 赞同：1
> 
> 时间：2012-08-04T20:14:15.180
> 
> 标签：javascript, module, google-chrome-extension, embed, google-nativeclient

[根据此文档](http://code.google.com/chrome/extensions/manifestVersion.html)，我将 manifest_version 升级为“2” ，然后惊讶地看到 chrome 出现以下错误：

> 拒绝执行内联脚本，因为它违反了以下内容安全策略指令

虽然很清楚他们为什么要这样做，但我现在不清楚我应该如何管理模块加载[进度事件](https://developers.google.com/native-client/dev/devguide/coding/progress-events)。即使我将它升级到最新的（开发）辣椒版本，文档仍然推荐一个内联脚本（这显然不起作用）。

我有点沮丧（在花了一个周末的下午编写模块加载进度后）看到这个版本翻转并使我的东西完全无效。

所以，是的……这是为了更大的利益。我明白。但是现在我必须有一个独立的 javascript 文件（具有自己的加载范例）并及时连接到`<embed/>`元素以正确捕获事件？现在有什么新的和改进的方法来做到这一点？

任何人都可以提出一个可靠的替代这个认可的样板吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T21:31:38.363

根据[NaCl progress events 的文档，](https://developers.google.com/native-client/dev/devguide/coding/progress-events#HandlingEvents)必须添加事件侦听器，如下所示：

```
<div id="listener">
  <script type="text/javascript">
    document.getElementById('listener').addEventListener('load', function() {
        // Example
    }, true);
  </script>
  <embed name="nacl_module" ... type="application/x-nacl" />
</div> 
```

如果内容安全策略**禁止这样做（**[另请参阅](https://stackoverflow.com/a/10417745)）。只有一种方法可以解决它：通过将脚本移动到外部文件：

```
<div id="listener">
  <script src="listener-load.js"></script>
  <embed name="nacl_module" ... type="application/x-nacl" />
</div>

// listener-load.js:
document.getElementById('listener').addEventListener('load', ..., true); 
```

Because the construction of the DOM blocks until the external file is loaded, the script is loaded before the `<embed>` tag is inserted. Since the external files are packaged with the extension, the impact on performance can be neglected.

# php - 从数据库获取结果，转换 XML，对所有结果重复

> ID：11811686
> 
> 赞同：1
> 
> 时间：2012-08-04T20:14:42.123
> 
> 标签：php, xml, loops, for-loop, xml-parsing

php代码：

```
## Loop through results from mysql
try{
    #connection string
        // $dbconn = new PDO('mysql:host=localhost;port=3306;dbname=wudb',array(PDO::ATTR_PERSISTENT => true));
        $dbconn = new PDO('mysql:host=localhost;port=3306;dbname=wudb','root','toshiba1',array(PDO::ATTR_PERSISTENT => true));
        $q = $dbconn->prepare("SELECT FW_ArtSrcLink FROM FW_ArtSrc WHERE OneSet=1 and leagID=20");
    #call stored proc
        $q->execute();
    #get the rows into an array
        $result = $q->fetchAll();
        $newsStory = array();
    foreach($result as $r){
    ## gets url from database as outlined above.
        $xmlUrl = $r['FW_ArtSrcLink'];
    #Loads the url above into XML    
        $ConvertToXml = simplexml_load_file($xmlUrl);
        # -> Setup XML
        $newsStory[] = $ConvertToXml->channel->item;
    } 
```

我正在尝试获取我的数据库提供的链接`$xmlUrl`

然后使用 url 从 url 中提取 XML `$ConvertToXml`，然后对每个结果执行此操作。

然后最后输出结果。

我在这里做错了什么？目前它只从每个结果中获取第一个结果并输出它。我想得到他们所有

# mysql - MySQL - 如果有什么，那么也选择 where

> ID：11811688
> 
> 赞同：2
> 
> 时间：2012-08-04T20:14:50.513
> 
> 标签：mysql

所以，我有一个令人困惑的 MySQL 问题。我觉得我需要使用一些 IF 语句，但我真的不确定如何在这种情况下实现它们！首先，考虑以下查询。这很简单：

```
SELECT *
FROM flow
INNER JOIN flow_strings
    USING(node_id)
WHERE
    (
        flow.parent = 0
        OR flow.parent = :user_flow
    )
    AND flow.source = 0
    AND :input LIKE flow_strings.sql_regex 
```

但是，我需要扩展它，这就是我卡住的地方。考虑到这一点，我不确定如何解释它，所以下面是表结构，然后是一些示例。

# 桌子`flow`

```
+---------+--------+--------+
| node_id | parent | source |
+---------+--------+--------+
|    1    |   0    |    0   |
+---------+--------+--------+
|    2    |   0    |    0   |
+---------+--------+--------+
|    3    |   1    |    1   |
+---------+--------+--------+
|    4    |   3    |    0   |
+---------+--------+--------+ 
```

# 桌子`flow_strings`

```
+----------------+---------+-----------+
| flow_string_id | node_id | sql_regex |
+----------------+---------+-----------+
|        1       |    1    |   fish    |
+----------------+---------+-----------+
|        2       |    1    |   wish    |
+----------------+---------+-----------+
|        3       |    1    |   *yes*   |
+----------------+---------+-----------+
|        4       |    2    |   *no*    |
+----------------+---------+-----------+
|        5       |    2    |   nay     |
+----------------+---------+-----------+
|        6       |    3    |   *herp*  |
+----------------+---------+-----------+

[ ... ] 
```

# 桌子`placeholder_variables`

```
+-------------+--------+------+-------+
| variable_id | source | name | value |
+-------------+--------+------+-------+
|      1      |    0   | yes  | sure  |
+-------------+--------+------+-------+
|      2      |    0   | yes  | yeah  |
+-------------+--------+------+-------+
|      3      |    0   | no   | nope  |
+-------------+--------+------+-------+
|      4      |    1   | herp | derp  |
+-------------+--------+------+-------+ 
```

现在，这就是我需要基于`:input`.

* * *

**“鱼”、“愿望”、“确定”或“是”** ——*选择`flow.node_id`1*

*   这是因为“fish”、“wish”和“*yes*”都与`flow.node_id`1 相关联。请注意，*yes* 被星号包围，因此“yes”不是按字面解释，而是从`placeholder_variables`.

* * *

**“不”或“不”** ——*选择`flow.node_id`2*

*   这是因为“*no*”和“nay”与`flow.node_id`2 相关联。同样，由于星号，“no”不是按字面解释的，但“nope”匹配因为“no”在`placeholder_variables`表中，即使“nope” "不在`flow_strings`表中。

* * *

**"no" 和 "*no*"** ---*不匹配*

即使 *no* is in `flow_strings`，它也不应该匹配，因为它周围有星号（以及相应的 placeholder_variable），这意味着它不应按字面解释，因此只能通过其相应的占位符变量的值来评估。

* * *

**“宝贝”** ——*不匹配*

*   尽管“baby”周围没有星号，但它对应于`flow.node_id`3，并且该节点的`flow.source`为 1。

* * *

**"derp"** ---*不匹配*

*   这是因为`placeholder_variables.source`*herp* 为 1，即使它在`flow_strings`表中。

* * *

**"*herp*"** ---*选择`flow.node_id`4*

*   尽管`flow_strings`表中 *herp* 周围有星号，但对应`placeholder_variable.source`的是 1。

* * *

** 总结一下 **

1.  否`source`= 1
2.  如果 被星号包围，则解释 placeholder_variables `sql_regex`，但前提是相应的 placeholder_variable`source`为 0。
3.  如果`source`为 0，并且不存在星号，则按`sql_regex`字面意思解释。

* * *

我知道我可以使用 MySQL`SUBSTRING()`来处理星号。我也知道，（因为我正在使用 PHP）理论上我可以将其拆分为两个查询，然后通过循环第一个查询来动态生成第二个查询。但是，这将是 A）内存密集型和 B）草率。

**所以我的问题是：**是否可以单独使用 MySQL 来做到这一点？如果是，你会建议我如何格式化它？您不需要为我编写查询，但如果您能帮助我了解一些逻辑，我将非常感激！除了我已经概述的内容之外，我完全不知道该尝试什么，而且我绝对不想这样做。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T20:31:26.830

您可以使用此解决方案：

```
SELECT    a.*,
          COALESCE(c.value, b.sql_regex) AS string #-- If there was a successful JOIN (sql_regex was a variable), then display the value of the "value" column in placeholder_variables, otherwise if the JOIN did not succeed (sql_regex was a literal value), just display sql_regex instead.
FROM      flow a
JOIN      flow_strings b ON a.node_id = b.node_id
LEFT JOIN placeholder_variables c #-- LEFT JOIN placeholder_variables on these conditions:
       ON b.sql_regex LIKE '*%*' AND -- That sql_regex is a variable
          REPLACE(b.sql_regex, '*', '') = c.name AND -- Match sql_regex up with the "name" column in placeholder_variables. We must replace the asterisks in sql_regex so that the values can match ("name" column do not contain asterisks)
          c.source = 0
WHERE     a.source = 0 AND
          COALESCE(c.value, b.sql_regex) = :input -- If the string was interpreted as a placeholder variable, make the condition on the interpreted value in the placeholder_variables table ("name" column), otherwise, just make the condition on the sql_regex column. 
```

* * *

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/5d591/1/0)

# python - PyDev PYTHONPATH 不适用于单独的 test 和 src 目录

> ID：11811700
> 
> 赞同：1
> 
> 时间：2012-08-04T20:16:26.587
> 
> 标签：python

这可能是一个菜鸟问题。为此，我深表歉意，但到目前为止我找不到解决方案。简而言之，由于某种我不明白的原因，我无法`src`在我的测试中从我的目录访问模块。我的项目设置如下所示：

```
src/package/module.py
tests/package/module_test.py 
```

我的测试大致是这样的：

```
import package
import unittest
class module_test(TestCase):
   def testSomeMethod(self):
       m = package.SomeClass() #there is class of that name in module.py 
```

我检查了 PyDev 中的运行配置设置，当我执行测试时，它说两者`src`都`tests`在 PYTHONPATH 上。但是当我尝试运行这个测试时，我得到了错误`'module' object has no attribute 'SomeClass'`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:19:54.327

当你这样做时`import package`，你导入的是包，而不是里面的模块。如果要导入模块，则需要这样做`from package import module`（然后将类称为`module.SomeClass`，而不是`package.SomeClass`）。

包是模块组的容器。它们不会神奇地让您访问任何模块中的所有内容（尽管您可以让它们自动导入它们的模块）。您仍然必须导入包中的各个模块。

# ios - 我在哪里可以获得 UISearchBar 中使用的放大镜图标？

> ID：11811705
> 
> 赞同：7
> 
> 时间：2012-08-04T20:17:12.017
> 
> 标签：ios, cocoa-touch, uitextfield, uisearchbar

我正在使用这个疯狂的代码`UITextField`作为`UISearchBar`替代品并“窃取”原始放大镜图标：`UISearchBar`

```
 UISearchBar *originalSearchBar = [[UISearchBar alloc] init];
    for (UIView *searchBarSubview in [originalSearchBar subviews]) {
        if([searchBarSubview isKindOfClass:[UITextField class]]) {
            UITextField *textField = (UITextField *)searchBarSubview;
            [_textField setLeftView:[textField leftView]];
            [_textField setLeftViewMode:UITextFieldViewModeAlways];
        }
    } 
```

您可能已经猜到了，我不想使用自己的位图。

在 Cocoa 的某个地方没有更容易访问的放大镜图标吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-05T10:09:33.663

因此，这是带有 unicode 字符的代码：

```
 UILabel *magnifyingGlass = [[UILabel alloc] init];
    [magnifyingGlass setText:[[NSString alloc] initWithUTF8String:"\xF0\x9F\x94\x8D"]];
    [magnifyingGlass sizeToFit];

    [textField setLeftView:magnifyingGlass];
    [textField setLeftViewMode:UITextFieldViewModeAlways]; 
```

**编辑：**对于适合 iOS 7 风格的简单外观，添加 Unicode 变体选择器`\U000025B6`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T01:58:40.843

我不知道 Cocoa 中有任何标准图像（Unicode 中也没有字符）。

但是，此图像是 Dock 捆绑包的一部分：

```
/System/Library/CoreServices/Dock.app/Contents/Resources/ectl_search_magnify.png 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-27T15:26:47.157

As I couldn't get a plain unicode magnifying glass to appear, I decided to see what a standard `UISearchBox` uses. It turns out it's an image of a magnifying glass, which I've extracted and included below, though it's a very simple shape which would be trivial to reproduce perfectly.

[![2x Search](../Images/083c54c0eb10110afd1ac76a93519b9d.png)](https://i.stack.imgur.com/PyXyY.png) [![3x Search](../Images/50722748626f2cf43e24ef740f9740ae.png)](https://i.stack.imgur.com/ief64.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T15:56:41.627

使用 OSX 10.7.5 我找不到 ectl_search_magnify.png 但一个简单的

```
find /System -ipath '*magni*' 
```

成立：

```
/System/Library/CoreServices/CoreTypes.bundle/Contents/Resources/MagnifyingGlassIcon.icns
/System/Library/PrivateFrameworks/ProKit.framework/Versions/A/Resources/LionPanels.bundle/Contents/Resources/Dark_NSSmallMagnifyingGlass.tiff
/System/Library/PrivateFrameworks/ProKit.framework/Versions/A/Resources/LionPanels.bundle/Contents/Resources/Night_NSSmallMagnifyingGlass.tiff 
```

The latter two are probably what you want (assuming you need an image).

# google-drive-api - 访问 Google Drive API downloadURL 时出现 403 禁止错误

> ID：11811708
> 
> 赞同：3
> 
> 时间：2012-08-04T20:17:40.967
> 
> 标签：google-drive-api

我一直在使用 Google Drive API 在本地进行大量开发，但突然间我不再能够使用 downloadUrl 链接访问文件。

我想知道我是否被阻止或任何事情，尽管我看不出我应该如何在 API 限制之下。403 不是友好的谷歌，而是一个标准：

HTTP 错误 403（禁止）：服务器拒绝完成请求

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:34:37.820

检查[403 响应上的错误消息](https://developers.google.com/drive/handle-errors)，它会给你一些信息。您可能必须执行[指数退避](https://developers.google.com/drive/handle-errors#implementing_exponential_backoff)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-09T05:20:55.123

您正在使用下载 url 访问 google 驱动器文件 bt 下载 url 在一段时间后过期，以便您捕获错误并为该文件生成新请求

# javascript - 所有输入字段的动态输入长度

> ID：11811709
> 
> 赞同：0
> 
> 时间：2012-08-04T20:17:49.510
> 
> 标签：javascript, html, input

我一直在寻找一种方法来动态更改 HTML 表单中输入字段的长度。我遇到了以下情况：

```
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <title>Example</title>

 <script type="text/javascript">
 window.onload = function() {
 thelink = document.getElementById('MyLink');
 linksize = thelink.value.length;
 if (linksize < 10) thelink.size = 10;
 if (linksize > 50) thelink.size = 50;
 }
 </script>
 </head>

 <body>
 <input id="MyLink" type="text" value="http://www.domain.com/this/is/a/very/long/link/example" />
  </body>

 </html> 
```

我将如何调整它以适用于我非常大的表单上的每个输入字段？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:03:39.230

对于您的情况，我会给出所需的最小值和最大值作为`data-*=`属性，

例如：

```
<input id="MyLink" data-min="10" data-max="50" type="text" value="http://www.domain.com/this/is/a/very/long/link/example" /> 
```

然后遍历表单中的输入，从`data`属性中提取，并检查所需的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T00:10:20.293

[您可以在一个集合](https://developer.mozilla.org/en-US/docs/DOM/HTMLCollection)中收集元素，或者从整个文档中获取它们，或者从它的某些包含元素中获取它们。您可以使用例如[getElementsByTagName('input');](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName) , [getElementsByName('myInput');](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName) 或[getElementsByClassName('shapable_input');](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName) 方法，如果标签设置了相应的属性：

```
<input name="myInput" class="shapable_input" value="...." /> 
```

然后可以在循环中测试所有收集的标签：

```
window.onload = function() {
    var links = document.getElementsByTagName('input');
    //var linksc = links.getElementsByClassName('link');
    var i, thelink, linksize;
    for (i = 0; i < links.length; i++) {
        thelink = links[i];
        linksize = thelink.value.length;
        if (linksize <= 10) {
            thelink.size = 10;
        }
        if (linksize > 10) {
            thelink.size = 50;
        }
    }
}; 
```

[例子](http://jsfiddle.net/UHcwH/)

# email - PHP 的“邮件”是如何工作的？

> ID：11811711
> 
> 赞同：44
> 
> 时间：2012-08-04T20:18:00.523
> 
> 标签：email, php

PHP 的`mail`功能似乎在一个干净的系统上传递邮件，管理员或网站管理员没有进行明显的配置（在 中没有 SMTP 配置`php.ini`等）。该功能如何`mail`将邮件传递到远程服务器？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-04T20:21:31.297

在 *nix 上，它调用`sendmail`二进制文件，然后使用邮件配置来路由电子邮件。在 Windows 上，它发送到 SMTP 服务器。在这两种情况下，系统管理员都会设置邮件系统。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-05-22T16:02:59.420

您可以检测它是如何工作的，如下所示。

# 第一种方法

```
$ ltrace php -r "mail('tester@127.0.0.1', 'Test', 'Hello world');" 2>&1 | grep sendmail
memcpy(0x095ea168, "sendmail_from", 14)          = 0x095ea168
memcpy(0x095ea1e0, "sendmail_path", 14)          = 0x095ea1e0
popen("/usr/sbin/sendmail -t -i ", "w")          = 0x0977c7c0 
```

从上面命令的结果可以看出，该`popen()`函数打开了进程`/usr/sbin/sendmail -t -i`。

```
$ ls -l /usr/sbin/sendmail
... /usr/sbin/sendmail -> exim4 
```

`sendmail`符号链接也是如此`exim4`，因此`sendmail -t -i`调用`exim4 -t -i`.

在您的手册页中，`exim4`您可以阅读这些选项`-t -i`：

```
$ man exim4 | grep ' -t -i'
-ti       This option is exactly equivalent to -t -i. It is provided for compatibility with Sendmail. 
```

# 第二种方法

安装[snoopy](https://github.com/a2o/snoopy)并运行：

```
# grep snoopy /var/log/auth.log | tail
... php -r mail('tester@127.0.0.1', 'Test', 'Hello world');
... /usr/sbin/sendmail -t -i
... /usr/sbin/exim4 -Mc 1YxxYn-0006a7-Nw
... /usr/sbin/exim4 -t -oem -oi -f <> -E1YxxYn-0006a7-Nw
... /usr/sbin/exim4 -Mc 1YxxYn-0006aB-Oj 
```

上述命令的结果显示了执行的命令的顺序。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-18T20:00:10.030

mail() 使用 sendmail，它使用 DNS 查找目标域的 MX 记录并直接发送到那里。而已。

并且由于目标服务器可能不知道您的 IP 地址，特别是如果它经过 NAT，它可能会被标记为垃圾邮件。

您可以修改您的配置以使用不同的（合法广告已知）smtp 服务器充当中介。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-04T20:21:39.730

实际上，它真的不那么可靠，除非底层`sendmail`或其他东西配置正确。

Amazon SES 拥有比您使用的任何服务器更好的服务器，并且在那里接收邮件的次数比使用`mail()`.

您不应该使用的真正原因`mail()`是因为您的服务器的 IP 地址可能对 GMail、Yahoo 等邮件服务完全未知，并且它更有可能被标记为垃圾邮件。为什么会被标记为垃圾邮件？因为`mail()`很容易被利用来达到垃圾邮件的目的。

# encryption - PBEWithMD5AndDES加密生成的CR/LF？

> ID：11811713
> 
> 赞同：1
> 
> 时间：2012-08-04T20:18:14.990
> 
> 标签：encryption, encoding, base64

由 PBEWithMD5AndDES 提供的加密字符串，然后 Base64 编码是否包含 CR 和/或 LF 字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T20:50:59.657

Base64 只是可打印的字符。但是，当它用作电子邮件的 MIME 类型时，它会被分成由 CR-LF 分隔的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T14:19:33.110

PBEWithMD5AndDES 返回二进制数据。PBE 加密在[PKCS#5 标准](ftp://ftp.rsasecurity.com/pub/pkcs/pkcs-5v2/pkcs5v2_1.pdf)中定义，该标准没有专用的 base 64 编码方案。所以问题就变成了你需要对哪个系统进行 Base 64 编码的二进制数据。Wikipedia[在 Base 64 文章](http://en.wikipedia.org/wiki/Base64#Implementations_and_history)中有一个很好的部分，解释了各种形式。

您可能会遇到返回 Base 64 的 PBE 实现，并且该实现没有提及使用上述哪种方案。在这种情况下，您需要以某种方式找出使用哪种方案。我建议搜索它，询问社区，查看源代码，或者如果全部失败，则在输出上创建一组测试。

幸运的是，如果您正在解码 base 64 并且您忽略了所有空白，那么您是非常安全的。请注意，某些实现忽略了填充，因此在解码之前添加它（如果适用）。

如果您自己执行编码 base 64，我强烈建议不要输出任何空格，仅使用默认字母（带`'+'`和`'/'`符号）并始终在需要时执行填充。之后，您始终可以拆分结果并替换任何非标准字符（当然尤其是`'+'`and`'/'`符号），或删除填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T21:10:44.973

我正在使用带有 Andorid SDK 的 java。我发现命令：

```
String s = Base64.encodeToString(enc, Base64.DEFAULT); 
```

做了换行。它将 LF 字符放入输出字符串中。

我找到：

```
String s = Base64.encodeToString(enc, Base64.NO_WRAP); 
```

没有将 LF 字符放入输出字符串中。

# html5-video - 通过 M4V 嵌入 html5 视频

> ID：11811714
> 
> 赞同：0
> 
> 时间：2012-08-04T20:18:29.283
> 
> 标签：html5-video, mp4, m4v

所以我在 Mac 上使用 ScreenFlow 创建了一个视频。然后导出了。它创建了一个 m4v 文件。然后我将扩展名更改为 mp4 并在以下网页中试用：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset=utf-8>
<meta name="viewport" content="width=620">
<title>Fooo</title>

<script src="http://api.html5media.info/1.1.5/html5media.min.js"></script>
</head>
<body>
<video src="Demo.mp4" width="320" height="200" controls preload></video>

</body>
</html> 
```

它不播放。如果我将指针移动到播放器所在的位置，它将显示指针所在的帧。所以所有的帧都在那里，但它不会播放视频。我做错了什么？我如何解决它？

按照@heff 的建议，我删除了脚本行。删除后，我收到以下错误消息：“不支持视频格式或 MIME 类型。”

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T21:22:17.550

.mp4 == .m4v 相同容器格式的不同扩展名。虽然 .mp4 在技术上也等于 .m4a，但 .m4v != .m4a。至少我很确定。:)

听起来像是您的 javascript 库的问题。您是否尝试过仅在支持 HTML5 视频的浏览器中使用 video 标签，没有库？只需删除脚本行，看看会发生什么。

否则，请尝试将链接发布到我们可以查看的实时页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T00:59:36.037

我不知道你是否已经解决了这个问题，但你应该去看看这个网页上的信息：[视频给大家！](http://camendesign.com/code/video_for_everybody). 具体来说，请参阅**第 2.1 节**的第一点，作者解释了您的服务器必须使用正确的 mime 类型，以及**第 3 节**，作者解释了您应该使用哪些编解码器（因为并非每个网络浏览器都可以读取 .m4v 文件）。

# node.js - 使用 node.js 搜索和检索数据？

> ID：11811720
> 
> 赞同：0
> 
> 时间：2012-08-04T20:19:05.663
> 
> 标签：node.js, mongodb, search

我想知道 node.js 是否适合搜索大量数据，我知道它的主要用途是用于聊天、ftp 和实时等异步场景。我正在考虑使用 node.js 和 mongodb 来搜索 300,000 条书籍记录对于我大学的图书馆，看看它是否反对使用 php & mysql。任何建议都会非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T00:48:57.443

Node.js 将是搜索数据的一个很好的应用程序接口......但实际上，PHP 或许多其他语言也是如此:)。

您的后端数据存储解决方案（MySQL、MongoDB、..）是一个更难的选择，实际上取决于您希望如何索引和搜索数据。

如果您的主要目标是搜索，您可能希望研究基于[Apache Lucene 之](http://en.wikipedia.org/wiki/Lucene)类的搜索应用程序。这些通常使用关系数据库后端，尽管[ElasticSearch](http://elasticsearch.org)等一些较新的努力确实有越来越多的社区支持从 MongoDB 等来源获取数据（参考：[MongoDB River Plugin for ElasticSearch](https://github.com/richardwilly98/elasticsearch-river-mongodb/)）。

由于您提到了图书搜索和图书馆，您可能还想研究可能已经解决该问题的[ILS（集成图书馆搜索）应用程序。](http://en.wikipedia.org/wiki/Integrated_library_system)有几个开源产品，例如[Koha](http://www.koha.org/)和[Evergreen](http://open-ils.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:23:31.310

看看 MongooseJS 在我看来绝对完美契合。

# javascript - 如何使用 Three.JS 绘制 n 边区域

> ID：11811722
> 
> 赞同：1
> 
> 时间：2012-08-04T20:19:25.543
> 
> 标签：javascript, three.js

我想用 Three.JS 绘制一个 n 面区域。所有 Vector3 及其顺序都已给出并添加到几何顶点数组中。坐标都看起来像 (x,0,y)

**如何用面孔填充该区域？**将区域分割成三角形是否有函数或数学问题？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T12:27:46.063

也许您可以使用 Shape 对象来实现您的目标。

```
myshape = new THREE.Shape(); 
```

或者

```
myshape = new THREE.ShapeGeometry(); 
```

演示在这里： http: [//mrdoob.github.com/three.js/examples/webgl_geometry_shapes.html](http://mrdoob.github.com/three.js/examples/webgl_geometry_shapes.html)

或者您只需绘制一条路径并在之后填充它

```
context.lineWidth = 0.05;
context.beginPath();

// draw something

context.closePath();
context.stroke();
context.fill(); 
```

希望有帮助

翼

# c - 算术与布尔运算

> ID：11811726
> 
> 赞同：16
> 
> 时间：2012-08-04T20:19:31.393
> 
> 标签：c, boolean, arithmetic-expressions

我在某个论坛遇到过这段代码：

`if ( a * b * c * d == 0 ) ....`

业主声称这比

`if (a == 0 || b == 0 || c == 0 || d == 0)`

这些变量定义为：

`int a, b, c, d;`

并且它们的绝对值保证小于等于100。（所以我们可以忽略溢出的可能性）

如果我们只是忽略`readability`并只关注性能，那么这种说法真的正确吗？

在我看来，第二种方法实际上可能更快，因为您有时可以利用“短路”。但是，我知道什么？！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T21:57:40.977

C 标准没有说明性能。是否的问题

```
if ( a * b * c * d == 0 ) 
```

比

```
if (a == 0 || b == 0 || c == 0 || d == 0) 
```

*仅*在特定编译器生成在特定机器上运行的代码的上下文中才有意义。比较它们的唯一真正方法是在您自己的系统或您感兴趣的任何系统上测量性能。

不过，我们可以推测性能可能是什么。

正如你所说，`a`, `b`,`c`和`d`是类型的对象`int`。您还说它们在 [-100,+100] 范围内——但编译器不一定知道这一点。

编译器可以自由地将任何表达式替换为执行相同操作的代码。

乘法是一个相对复杂的运算，并且可能比加法或比较慢。如果四个变量中的任何一个具有 value ，编译器*可以*识别出第一个条件为真`0`，并将乘法替换为碰巧更快的任何值。但是编译器执行的每个优化都必须由编译器的开发人员显式编程，而且这种特定的模式可能不够普遍，以至于值得努力识别它。

您说这些值足够小，溢出不是问题。事实上，你不能轻易*做出*这样的假设。`INT_MAX`可以小到`32767`。`int`但是编译器知道它在生成代码的系统上有多大。尽管如此，除非它有关于 、 、 和 的值的信息，否则它`a`不能`b`假设`c`不会`d`有溢出。

除了是的，实际上，它*可以*做出这样的假设。有符号整数溢出的行为是未定义的。这为优化编译器提供了假设不会发生溢出的权限（如果发生，则程序表现出的任何行为无论如何都是有效的）。

所以是的，编译器*可以*用更简单的东西代替乘法，但不太可能这样做。

至于另一个表达式，`a == 0 || b == 0 || c == 0 || d == 0`，`||`运算符具有短路语义；如果左操作数为真（非零），则不计算右操作数。由于 CPU 管道问题，这种条件代码会产生性能问题。由于没有一个子表达式有副作用（假设没有声明任何变量`volatile`），编译器可以计算所有四个子表达式，也许是并行的，如果这样更快的话。

一个快速的实验表明`gcc -O3`对于 x86 不执行*任何*优化。对于第一个表达式，它生成执行三个乘法的代码。其次，它生成条件分支，实现规范的短路评估（我不知道避免这种情况是否会更快）。

最好的办法是编写尽可能简单明了的合理代码，既因为它使您的源代码更易于阅读和维护，又因为它可能使编译器有更好的机会识别模式和执行优化。如果您尝试在源代码中进行花哨的微优化，那么您很可能会阻碍编译器的优化，就像您要提供帮助一样。

不要太担心你的代码有多快，*除非*你已经测量过它并发现它太慢了。如果您需要更快的代码，请首先专注于改进的算法和数据结构。只有当失败时，才考虑源代码级别的微优化。

> 程序优化的第一条规则：不要这样做。程序优化的第二条规则（仅限专家！）：不要这样做。

——[迈克尔·杰克逊](http://en.wikipedia.org/wiki/Michael_A._Jackson)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-04T20:28:26.017

两者不等价。例如，在我的机器（32 位 x86 MSVC）上，如果 a、b、c 和 d 都等于，`0x100`那么第一个测试将通过，但第二个条件不会。

另请注意，乘法是一项代价高昂的运算，因此第一个版本不一定会更快。

**编辑：**为第一个版本生成的代码：

```
00401000 8B 44 24 04      mov         eax,dword ptr [esp+4] 
00401004 0F AF 44 24 08   imul        eax,dword ptr [esp+8] 
00401009 0F AF 44 24 0C   imul        eax,dword ptr [esp+0Ch] 
0040100E 0F AF 44 24 10   imul        eax,dword ptr [esp+10h] 
00401013 85 C0            test        eax,eax 
00401015 75 07            jne         f1+1Eh (40101Eh) 
00401017 ... 
```

为第二个版本生成的代码：

```
00401020 83 7C 24 04 00   cmp         dword ptr [esp+4],0 
00401025 74 15            je          f2+1Ch (40103Ch) 
00401027 83 7C 24 08 00   cmp         dword ptr [esp+8],0 
0040102C 74 0E            je          f2+1Ch (40103Ch) 
0040102E 83 7C 24 0C 00   cmp         dword ptr [esp+0Ch],0 
00401033 74 07            je          f2+1Ch (40103Ch) 
00401035 83 7C 24 10 00   cmp         dword ptr [esp+10h],0 
0040103A 75 07            jne         f2+23h (401043h) 
0040103C ... 
```

我机器上的基准测试（以纳秒为单位）：第一个版本运行时间约为 1.83 ns，第二个版本运行时间约为 1.39 ns。a、b、c 和 d 的值在每次运行期间都没有变化，因此显然分支预测器可以预测 100% 的分支。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T21:13:54.470

所以像往常一样，哪个问题更快，到目前为止你尝试了什么？你编译和反汇编，看看会发生什么？

```
unsigned int mfun ( unsigned int a, unsigned int b, unsigned int c, unsigned int d )
{
    if ( a * b * c * d == 0 ) return(7);
    else return(11);
}

unsigned int ofun ( unsigned int a, unsigned int b, unsigned int c, unsigned int d )
{
    if (a == 0 || b == 0 || c == 0 || d == 0) return(7);
    else return(11);
} 
```

对于 arm 一个编译器给出了这个

```
00000000 <mfun>:
   0:   e0010190    mul r1, r0, r1
   4:   e0020291    mul r2, r1, r2
   8:   e0110293    muls    r1, r3, r2
   c:   13a0000b    movne   r0, #11
  10:   03a00007    moveq   r0, #7
  14:   e12fff1e    bx  lr

00000018 <ofun>:
  18:   e3500000    cmp r0, #0
  1c:   13510000    cmpne   r1, #0
  20:   0a000004    beq 38 <ofun+0x20>
  24:   e3520000    cmp r2, #0
  28:   13530000    cmpne   r3, #0
  2c:   13a0000b    movne   r0, #11
  30:   03a00007    moveq   r0, #7
  34:   e12fff1e    bx  lr
  38:   e3a00007    mov r0, #7
  3c:   e12fff1e    bx  lr 
```

所以 equals 和 ors 有短路（它们本身很昂贵），但最坏的路径需要更长的时间，因此性能不稳定，乘法性能更具确定性且不那么不稳定。通过检查，上述代码的乘法解决方案应该更快。

mips 给了我这个

```
00000000 <mfun>:
   0:   00a40018    mult    a1,a0
   4:   00002012    mflo    a0
    ...
  10:   00860018    mult    a0,a2
  14:   00002012    mflo    a0
    ...
  20:   00870018    mult    a0,a3
  24:   00002012    mflo    a0
  28:   10800003    beqz    a0,38 <mfun+0x38>
  2c:   00000000    nop
  30:   03e00008    jr  ra
  34:   2402000b    li  v0,11
  38:   03e00008    jr  ra
  3c:   24020007    li  v0,7

00000040 <ofun>:
  40:   10800009    beqz    a0,68 <ofun+0x28>
  44:   00000000    nop
  48:   10a00007    beqz    a1,68 <ofun+0x28>
  4c:   00000000    nop
  50:   10c00005    beqz    a2,68 <ofun+0x28>
  54:   00000000    nop
  58:   10e00003    beqz    a3,68 <ofun+0x28>
  5c:   00000000    nop
  60:   03e00008    jr  ra
  64:   2402000b    li  v0,11
  68:   03e00008    jr  ra
  6c:   24020007    li  v0,7 
```

除非分支成本太高，否则 equals 和 ors 看起来更快。

开放式 32

```
00000000 <mfun>:
   0:   e0 64 1b 06     l.mul r3,r4,r3
   4:   e0 a3 2b 06     l.mul r5,r3,r5
   8:   e0 c5 33 06     l.mul r6,r5,r6
   c:   bc 26 00 00     l.sfnei r6,0x0
  10:   0c 00 00 04     l.bnf 20 <mfun+0x20>
  14:   9d 60 00 0b     l.addi r11,r0,0xb
  18:   44 00 48 00     l.jr r9
  1c:   15 00 00 00     l.nop 0x0
  20:   44 00 48 00     l.jr r9
  24:   9d 60 00 07     l.addi r11,r0,0x7

00000028 <ofun>:
  28:   e0 e0 20 02     l.sub r7,r0,r4
  2c:   e0 87 20 04     l.or r4,r7,r4
  30:   bd 64 00 00     l.sfgesi r4,0x0
  34:   10 00 00 10     l.bf 74 <ofun+0x4c>
  38:   e0 80 18 02     l.sub r4,r0,r3
  3c:   e0 64 18 04     l.or r3,r4,r3
  40:   bd 63 00 00     l.sfgesi r3,0x0
  44:   10 00 00 0c     l.bf 74 <ofun+0x4c>
  48:   e0 60 30 02     l.sub r3,r0,r6
  4c:   e0 c3 30 04     l.or r6,r3,r6
  50:   bd 66 00 00     l.sfgesi r6,0x0
  54:   10 00 00 08     l.bf 74 <ofun+0x4c>
  58:   e0 60 28 02     l.sub r3,r0,r5
  5c:   e0 a3 28 04     l.or r5,r3,r5
  60:   bd 85 00 00     l.sfltsi r5,0x0
  64:   0c 00 00 04     l.bnf 74 <ofun+0x4c>
  68:   9d 60 00 0b     l.addi r11,r0,0xb
  6c:   44 00 48 00     l.jr r9
  70:   15 00 00 00     l.nop 0x0
  74:   44 00 48 00     l.jr r9
  78:   9d 60 00 07     l.addi r11,r0,0x7 
```

这取决于乘法的实现，如果它是一个时钟，那么乘法就有它。

如果您的硬件不支持乘法，那么您必须拨打电话进行模拟

```
00000000 <mfun>:
   0:   0b 12           push    r11     
   2:   0a 12           push    r10     
   4:   09 12           push    r9      
   6:   09 4d           mov r13,    r9  
   8:   0b 4c           mov r12,    r11 
   a:   0a 4e           mov r14,    r10 
   c:   0c 4f           mov r15,    r12 
   e:   b0 12 00 00     call    #0x0000 
  12:   0a 4e           mov r14,    r10 
  14:   0c 49           mov r9, r12 
  16:   b0 12 00 00     call    #0x0000 
  1a:   0a 4e           mov r14,    r10 
  1c:   0c 4b           mov r11,    r12 
  1e:   b0 12 00 00     call    #0x0000 
  22:   0e 93           tst r14     
  24:   06 24           jz  $+14        ;abs 0x32
  26:   3f 40 0b 00     mov #11,    r15 ;#0x000b
  2a:   39 41           pop r9      
  2c:   3a 41           pop r10     
  2e:   3b 41           pop r11     
  30:   30 41           ret         
  32:   3f 40 07 00     mov #7, r15 ;#0x0007
  36:   39 41           pop r9      
  38:   3a 41           pop r10     
  3a:   3b 41           pop r11     
  3c:   30 41           ret         

0000003e <ofun>:
  3e:   0f 93           tst r15     
  40:   09 24           jz  $+20        ;abs 0x54
  42:   0e 93           tst r14     
  44:   07 24           jz  $+16        ;abs 0x54
  46:   0d 93           tst r13     
  48:   05 24           jz  $+12        ;abs 0x54
  4a:   0c 93           tst r12     
  4c:   03 24           jz  $+8         ;abs 0x54
  4e:   3f 40 0b 00     mov #11,    r15 ;#0x000b
  52:   30 41           ret         
  54:   3f 40 07 00     mov #7, r15 ;#0x0007
  58:   30 41 
```

你会希望这两者是等价的，从纯粹的数学意义上来说，它们应该是等价的，要使乘法的结果为零，一个操作数需要为零。问题是这是处理器的软件，您可以轻松地在乘法上溢出并且具有非零操作数并且仍然为零，因此要正确实现乘法必须发生的代码。

由于特别是 mul 和 divide 的成本，您应该在软件中尽可能避免使用它们，在这种情况下，您的乘法解决方案要使两个解决方案等效，将需要更多代码来检测或防止可能导致的溢出情况为误报。是的，许多处理器在一个时钟内执行 mul，并且除法也是如此，您看不到除法，有时在指令集中看不到 mul 实现的原因是因为所需的芯片空间，费用现在是功率，热量，零件的成本等。因此 mul 和 divide 仍然很昂贵，当然不仅限于这些，但它们确实在帐篷中制造了关于零件性能、时钟速率的长杆，人们想要单时钟操作却没有意识到这一点指令可能会减慢整个芯片的速度，使其成为多时钟*可能会*提高您的整体时钟频率。帐篷里的很多东西都是长杆，所以移除 mul 可能不会改变性能，这完全取决于......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T20:26:04.847

**是**的，当 if 指令失败时，因为在这种情况下，我们`at most 4 comparisons (Operations)`在第二条指令中执行，而对于第一条指令，我们总是执行`4 operations`。

编辑：解释

第二个 if 指令总是比第一个快：

假设：a = 1，b =2，c =0 和 d = 4，在这种情况下：

*   对于第一条指令：我们有 3 次乘法和一次比较 = 4 次操作

*   对于第二个 if 指令：我们将 a 与 0（结果 KO）进行比较，然后将 b 与 0（再次 KO）和 c 与 0（OK）进行比较 = 3 次操作。

这是一个输出这 2 条指令的执行时间的简单程序，您可以修改 a、b、c 和 d，并将指令的编号作为参数传递。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

/* This is a test program to demonstrate that the second if is faster always than the first one*/
int main(int argc, char **argv)
{
        int i;
        int a = 1;
        int b = 2;
        int c = 0;
        int d = 4;
        int instruction_number;
        clock_t begin, end;
        double time_spent;

        begin = clock();

        if (argc != 2)
        {
                fprintf(stderr, "Usage : ./a.out if_instruction_number (1 or 2)\n");

                exit(EXIT_FAILURE);
        }

        instruction_number = atoi(argv[1]);

        for (i = 1; i < 100000; i++)
        {
                switch (instruction_number)
                {
                        case 1:
                                fprintf(stdout, "First if instruction : \n");
                                if (a * b * c * d == 0)
                                        fprintf(stdout, "1st instruction\n");
                                break;
                        case 2:
                                fprintf(stdout, "Second if instruction : \n");
                                if (a == 0 || b == 0 || c == 0 || d == 0)
                                        fprintf(stdout, "2nd instruction\n");
                                break;
                        default:
                                break;
                }
        }
        end = clock();
        time_spent = (double)(end - begin) / CLOCKS_PER_SEC;
        fprintf(stdout, "Time to accomplish %d instruction ---> %f\n", instruction_number, time_spent);

        return 0;
} 
```

希望这有帮助。

问候。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T20:32:48.517

`if ( a * b * c * d == 0 )`编译为（没有优化）

```
movl   16(%esp), %eax
imull  20(%esp), %eax
imull  24(%esp), %eax
imull  28(%esp), %eax
testl  %eax, %eax
jne .L3 
```

并`if (a == 0 || b == 0 || c == 0 || d == 0)`编译为

```
cmpl   $0, 16(%esp)
je  .L2
cmpl    $0, 20(%esp)
je  .L2
cmpl    $0, 24(%esp)
je .L2
cmpl    $0, 28(%esp)
jne .L4 
```

# javascript - 如何检测html元素是否在浏览器窗口中？

> ID：11811727
> 
> 赞同：1
> 
> 时间：2012-08-04T20:19:51.877
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [如何判断 DOM 元素在当前视口中是否可见？](https://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport)

有一个 HTML 页面，其中只有一个 div 和一个图像。

您如何检测该元素是否正在被查看/它是否在浏览器窗口中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T20:31:20.560

如果我理解正确，您想知道图像是否在视口中并且尚未滚动。在这种情况下，您需要获取视口和图像高度，获取图像的位置和文档的当前位置。如果您使用的是 jquery（我假设来自标签），您可以这样做：

```
var viewportHeight = $(window).height();
var imageOffset = $('img:first').offset().top;
var imageHeight = $('img:first').height;
var documentPosition = $(window).scrollTop();

var visibleArea = documentPosition + viewportHeight; //end of visible area
var imageArea = imageOffset + imageHeight;

if (documentPosition <= imageOffset && visibleArea >= imageArea) {
  //image is entirely visible
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:25:42.163

你可以试试[`Element ‘in view’ Event Plugin`](http://remysharp.com/2009/01/26/element-in-view-event-plugin/)。

# sql-server-2008 - 检查并执行存储过程

> ID：11811730
> 
> 赞同：0
> 
> 时间：2012-08-04T20:20:03.610
> 
> 标签：sql-server-2008

我正在尝试检查存储过程是否存在，然后我需要执行它。当我尝试这个时，我在 if 部分遇到错误：

```
use [ST_Analysis]
GO
/***** Object:  StoredProcedure [dbo].[sp_CleanRelogTables]  
INPUT PARAMETERS
none
*****/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO

IF NOT EXISTS(SELECT  name FROM sysobjects WHERE name = 'sp_CleanRelogTables' 
              AND type = 'P')
begin
    CREATE PROCEDURE [dbo].[sp_CleanRelogTables]
    AS
    BEGIN
        SET NOCOUNT ON
        TRUNCATE TABLE COUNTERDATA
        TRUNCATE TABLE COUNTERDETAILS
        SET NOCOUNT OFF
    END
end
Else
    execute sp_CleanRelogTables 
```

# php - 如何在没有原始 fla 文件的情况下使 swf 成为链接？

> ID：11811734
> 
> 赞同：0
> 
> 时间：2012-08-04T20:20:54.317
> 
> 标签：php, html, css, flash, hyperlink

好的，所以我有这个 swf 可以完美地作为我网站的按钮，但是按钮是 swf，我没有原始 fla 文件来编辑它重定向的位置。无论如何要添加指向此按钮的链接？*注意我已经尝试在 swf 上方添加一个不透明度为 0 的附加图像，但这不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:28:19.667

试一试：

**已编辑：现在适用于所有主要浏览器：**

```
<style type="text/css">
    #playnow {
        position: relative;
        z-index: 9999;
    }
</style>

<div id="playnow">
    <object type="application/x-shockwave-flash" 
      data="http://justxp.x10.mx/test/cta-play-free-now.swf"
      width="209" height="37">
        <param name="wmode" value="transparent" />
        <p>Alternative content</p>
        <embed src="http://justxp.x10.mx/test/cta-play-free-now.swf"
          quality="high" bgcolor="#000000" width="209" height="37"
          name="button" type="application/x-shockwave-flash" play="true"
          loop="true" wmode="transparent"
          pluginspage="http://www.adobe.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash">
        </embed>
    </object>
</div>

<script type="text/javascript">
    $('#playnow').on('mouseup', function() {
        window.location = "your/link";
    });​
</script> 
```

小提琴：http: [//jsfiddle.net/kgeGP/6/](http://jsfiddle.net/kgeGP/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T21:32:59.597

[Sothink SWF Decompiler](http://www.sothink.com/product/flashdecompiler/)能够将文件转换为 .fla 格式。我以前用它做了不少事情。

刚刚尝试将[此处](http://justxp.x10.mx/test/cta-play-free-now.swf)找到的按钮从 .swf 转换为 .fla：

我在试用版中进行了尝试，它在没有火焰的情况下导出它。试用版不导出 ActionScript，所以我认为有什么东西可以控制火焰。

虽然您确实无法单独使用 CSS 实现火焰效果，但可能值得尝试使用不同的按钮，或者使用动画 gif 代替，因为它会为您提供一个更容易编辑的按钮，并且可以在很远的地方使用更多平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T20:23:00.933

并不真地。您希望实现的最接近的事情是：

要么`<a>`在闪光灯按钮上方有一个，但这可能不可行，因为您可能想要一些华丽的悬停动画？

否则，您必须拥有`.fla`，并且您可以保存它以便可以将`$_GET`s 传递给它。像`example.com/button.swf?url=http%3A%2F%2Fgoogle.com`

您可以尝试将其导入`.swf`新的`.fla`，看看是否得到了您想要的。

但是使用现代 CSS，您可以如前所述仅通过 HTML 重新创建它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T20:24:02.697

为什么要使用 swf 作为按钮？您可能可以在 css 中实现相同的目标。而且加载速度会更快，更不用说你有更多的灵活性。

您可能会在它周围附加一个 div 并执行某种 jquery click 功能，但这很混乱且不可靠。

# python - 无法使用 South 迁移，因为模型和数据库不同

> ID：11811735
> 
> 赞同：0
> 
> 时间：2012-08-04T20:20:56.277
> 
> 标签：python, mysql, django, django-south

由于我在使用 South 和 MySQL 时遇到的所有麻烦，我正在从 MySQL 切换到 Postgres，但我什至无法完成这个过程。

现在我的数据库处于混乱状态。我的 main/models.py 具有数据库没有列的其他字段，因此我尝试使用 South 迁移它们，但出现错误。

这是我试图做的：

```
python2.7 manage.py dumpdata --indent=4 > dump.js 
```

我收到此错误：

```
django.db.utils.DatabaseError: (1146, "Table 'kelp_goals.main_actionstep' doesn't exist") 
```

我收到错误是因为 actionstep 作为模型存在于 mains/models.py 中，但该表实际上并不存在于数据库中。

我执行以下操作来尝试创建 actionstep 列：

```
python2.7 manage.py schemamigration main --auto
python2.7 manage.py migrate main 
```

然后，我收到此错误：

```
_mysql_exceptions.OperationalError: (1050, "Table 'main_goal' already exists") 
```

我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:21:50.513

我建议手动修改您的数据库（或从模型中删除字段），直到您拥有和谐的模型/数据库......然后您可以开始使用 South。

在任何情况下，您都应该在开始将数据/表传输到不同的数据库引擎之前清理它们。

# python - Python上使用其他变量的变量“生成器”

> ID：11811744
> 
> 赞同：0
> 
> 时间：2012-08-04T20:22:04.100
> 
> 标签：python, variables, loops, for-loop, generator

我想知道，是否可以在 Python 上创建变量并命名使用字符串和其他变量。它真的会帮助我做某事。

例如我想创建 10 个变量：

```
var0
var1
var2
... 
```

我试过用这样的“for”循环来做：

```
for i in range(10):
    'var'+str(i) = 0 
```

但它给了我一个错误。请帮忙！

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T20:25:30.140

您不想使用“变量”。你想使用字典：

```
>>> vars = {i:0 for i in range(10)}
>>> vars
{0: 0, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0, 9: 0} 
```

现在您可以像这样访问每个元素`var[6]`（并且您也不限于将整数作为字典键：）`var["yay!"] = "Great!"`。

当然，对于 0 到 9 范围的特殊情况，你也可以简单地使用一个列表：

```
>>> vars = [0 for i in range(10)]
>>> vars
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-04T20:26:01.760

您需要使用列表，而不是大量变量：

```
>>> var = [1, 2, 5, 6, 7, 10]
>>> var[1]
2
>>> var [2]
5
>>> 
```

我的经验法则是，如果三个以上的变量具有相似的名称（例如`var1`，`var2`和`var3`），请将它们放在一个列表中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-04T20:31:35.280

这是您可以执行的操作：

```
for i in range(10):
    locals()['var' + str(i)] = 0

print var3 
```

# jquery - 如何通过在背景画布中绘制线条来连接两个 HTML 元素？

> ID：11811746
> 
> 赞同：5
> 
> 时间：2012-08-04T20:22:12.977
> 
> 标签：jquery, html, html5-canvas

可能更多的是一个数学问题，但在这里......

我想要做的是通过背景画布上的动画线连接两个 HTML 元素

这是我想做的简化版本的小提琴。

[http://jsfiddle.net/loupax/zUqXn/](http://jsfiddle.net/loupax/zUqXn/)

线条确实在那里，但它们在画布之外，如果您使用元素检查器，您可以看到画布中绘制的线条的坐标。有人可以帮我解决我做错了什么并且线条不合适吗？

这证明了线条是画出来的，但不合适。（用固定尺寸替换流体阶段和画布尺寸）

[http://jsfiddle.net/loupax/zUqXn/8/](http://jsfiddle.net/loupax/zUqXn/8/)

编辑看起来我正在尝试做的事情对于流畅的布局是不可能的。经过很多麻烦后，我发现 Canvas 元素是它自己的平面，并且没有安全的方法可以将锚坐标与没有固定大小的画布坐标匹配

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T12:21:37.133

我已经找到了线路错位的原因。

似乎画布的CSS宽度和高度与画布元素的实际宽度和高度完全不同。因此，如果您希望 HTML 元素的坐标与 Canvas 元素上的线条坐标相匹配，则需要在包含它的 div 上设置固定宽度，并且直接在元素上设置相同且固定的宽度和高度

这是固定示例，因此您可以查看：

[http://jsfiddle.net/loupax/zUqXn/29/](http://jsfiddle.net/loupax/zUqXn/29/)

# facebook - Facebook Graph API - 查看用户的哪些朋友的朋友也安装了我的应用

> ID：11811748
> 
> 赞同：0
> 
> 时间：2012-08-04T20:22:19.577
> 
> 标签：facebook, facebook-graph-api

是否有可能有一个应用程序返回安装了该应用程序的当前用户的朋友的朋友？我知道由于隐私问题，这可能是不可能的，但是在安装应用程序时是否可以强加某种要求以将此信息公开给所有人以及当前用户？

**编辑：**

事实上，用户将被输入到我自己的数据库中，所以我真正需要做的是搜索用户的所有朋友，并为每个人查询他们是否有任何与我的数据库中的名称/ID 匹配的朋友。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:33:16.640

不，应用程序只能访问当前用户的朋友的信息，而不能再次访问这些朋友的朋友。

否则，应用程序的“操作距离”可能会非常大，人们甚至不知道应用程序能够以何种方式访问​​他们的信息（或者它甚至根本无法访问）——这样看：

如果您不想在朋友使用它们时*一般*不允许应用访问您的某些信息，因为从您的角度来看它有*一些*（社会）好处，但是您的朋友中有这个奇怪的男孩/女孩，他正在使用 sh*tloads的应用程序并一直给他们*朋友*权限……好吧，没问题，取消他/她的朋友，一切都很好。但是现在让我们说，那个家伙/女孩/花花公子/无论什么都不是你的*直接*朋友，而只是和你的弟弟（在这种情况下你是 FB 朋友，当然）——你实际上必须取消你的朋友*兄弟*让这个停止......而且，不知道你的小弟弟（或者你是否有一个） - 我仍然猜这不会是*最*Facebook 用户会想要。

# .htaccess - 禁用特定文件夹的目录浏览

> ID：11811751
> 
> 赞同：0
> 
> 时间：2012-08-04T20:22:50.377
> 
> 标签：.htaccess

我使用以下禁用，但我的子域也无法访问。是否有任何代码仅保留某些文件夹？

```
# disable directory browsing
Options All -Indexes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:12:48.573

您可以使用 htaccess 和 mod_rewrite 禁用目录浏览，并且您只能在某些条件下执行此操作。例如，在要禁用目录浏览的目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !subdomain.domain.com [NC]
RewriteRule ^$ - [L,F] 
```

仅当主机不是时，这将禁用目录列表`subdomain.domain.com`。

或者：

```
RewriteEngine On
RewriteCond %{REMOTE_ADDR} !123.45.67.89 [NC]
RewriteRule ^$ - [L,F] 
```

仅当请求不是从 IP 发出时，这将禁用目录列表：123.45.67.89

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T22:27:17.867

听起来您将代码放在 Web 根文件夹中的 .htaccess 文件中。您可以改为在要阻止目录浏览的每个文件夹中的 .htaccess 文件中使用相同的代码。

# jquery - 无法使用 jquery 触发超链接事件

> ID：11811753
> 
> 赞同：1
> 
> 时间：2012-08-04T20:23:01.687
> 
> 标签：jquery

我正在 ASP.Net 中使用带有 AJAX 和 jQuery 的 MVC3 技术。

根据我的要求，我动态创建了一个表。每个 的最后一个都有一个超链接`td`，`tr`例如：`<a href = "#">edit</a>`。

我已经在用户定义的函数中封装了生成表格的代码，但问题是每当我想从函数外部使用 jQuery 生成超链接的单击事件时，页面都无法识别表格。自然它无法识别表的子项以及属性，例如超链接，因此我无法触发超链接的单击事件。

请帮我找出解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:29:47.090

我建议您面临的问题是事件没有绑定到动态生成的元素（因为它们在事件绑定时不存在于 DOM 中）。为了解决这个问题，使用`on()`，并传递一个选择器来识别你想要处理事件的元素类型：

```
$(selector).on('click', 'table a', function(e){
    // do stuff here when a link inside a table is clicked
}); 
```

或者你可以`delegate()`改用（在低于 1.7 的 jQuery 版本中）：

```
$(selector).delegate('table a', 'click', function(e){
    // do stuff here when a link inside a table is clicked
}); 
```

参考：

*   [`delegate()`](http://api.jquery.com/delegate/).
*   [`on()`](http://api.jquery.com/on/).

# ruby-on-rails - Rails：覆盖 as_json 以获得动态值——有更聪明的方法吗？

> ID：11811757
> 
> 赞同：12
> 
> 时间：2012-08-04T20:23:30.123
> 
> 标签：ruby-on-rails, json

我想输出一个附属链接列表，每个链接都标记为标识当前用户。它在 HTML 中会很简单，但我们正在编写一个 API，所以输出是 JSON。

我有它的工作，但它似乎过于复杂。这是最好的方法吗？

我的模型 AffiliateLink 包含一个字段（链接的原始 HTML），我将通过添加令牌即时转换和输出该字段。我有一个产生替换的模型方法——这很重要，因为我们使用多个附属公司，每个附属公司都有一个特殊的转换规则，这个方法知道：

```
def link_with_token(user_token)
  # some gnarly code that depends on a lot of stuff the model knows
  # that returns a proper link
end 
```

为了在 JSON 中获得正确的链接 html，我做了这些事情：

*   添加`attr_accessor :link_html`到模型
*   添加一个实例方法来设置新的访问器

...

```
def set_link_html(token)
  self.link_html = link_with_tracking_token(token)
end 
```

*   在模型中覆盖`as_json`，将原来的 html_code 替换为 link_html

...

```
def as_json(options = {})
  super(:methods => :link_html, :except => :html_code)
end 
```

*   迭代控制器方法中返回的集合以进行转换

...

```
def index
  @links = Admin::AffiliateLink.all  # TODO, pagination, etc.

  respond_to do |format|
    format.html # index.html.erb
    format.json do
      @links.each do |link|
        link.set_link_html(account_tracking_token)
      end
      render json: @links
    end
  end
end 
```

这似乎是为了完成我的青少年转变而要做的很多事情。欢迎提供有用的建议（与此问题有关，而不是与代码的其他方面有关，现在正在不断变化）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-26T04:09:08.643

**1）**快速解决您的问题（如此处所示[）](https://stackoverflow.com/a/5146541/334121)：

附属链接控制器.rb

```
def index
  @links = Admin::AffiliateLink.all  # TODO, pagination, etc.

  respond_to do |format|
    format.html # index.html.erb
    format.json do
      render json: @links.to_json(:account_tracking_token => account_tracking_token)
    end
  end
end 
```

会员链接.rb

```
# I advocate reverse_merge so passed-in options overwrite defaults when option
# keys match.
def as_json(options = {})
  json = super(options.reverse_merge(:except => :html_code))
  json[:link_with_token] = link_with_token(options[:account_tracking_token])
  json
end 
```

* * *

**2）**一个更核心的解决方案，如果你真的在写一个 API：

1.  请参阅描述您的问题的[这篇文章。](https://blog.codepath.com/2011/05/16/if-youre-using-to_json-youre-doing-it-wrong/)
2.  请参阅作者作为解决方案制作[的 gem 。](https://github.com/nesquena/rabl)
3.  有关使用 gem 的信息，请参阅[此 railscast](http://railscasts.com/episodes/322-rabl)。

* * *

**3）**最后，方便的解决方案。如果你有一个方便的模型关系，这很干净：

假装 AffiliateLink `belongs_to :user`。并假设 user_token 是 User 的可访问属性。

会员链接.rb

```
# have access to user.user_token via relation
def link_with_token
  # some gnarly code that depends on a lot of stuff the model knows
  # that returns a proper link
end

def as_json(options = {})
  super(options.reverse_merge(:methods => :link_with_token, :except => :html_code))
end 
```

附属链接控制器.rb

```
def index
  @links = Admin::AffiliateLink.all  # TODO, pagination, etc.

  respond_to do |format|
    format.html # index.html.erb
    format.json do
      render json: @links
    end
  end
end 
```

# cocoa - 不能 CTRL+拖动 NSButton 到自定义 NSView 标题

> ID：11811765
> 
> 赞同：2
> 
> 时间：2012-08-04T20:25:00.057
> 
> 标签：cocoa, interface-builder, nstableview, nsview, nstablecellview

我想创建一个`NSTableCellView`由 Interface Builder 实例化的自定义。我已将表格单元视图类设置为`MyTableCellView`，并正确创建了`MyTableCellView : NSTableCellView`.m/.h 文件。

但是，我不能 CTRL+将一个简单的按钮从这个视图内部拖到`MyTableCellView.h`以创建一个`IBOutlet`.

这是一个展示发生了什么的视频：http: [//youtu.be/sNNbuVT-SZs](http://youtu.be/sNNbuVT-SZs)。

**视图的子类化方式：**

![NSTableCellView 子类化](../Images/6fd4e354c53dea5a313f9b8de2e9d22f.png)

**我如何尝试 CTRL+拖动按钮**

![CTRL+拖动 NSButton](../Images/027da5c8641cfff9c6b879f0d2b0f2a5.png)

此外，有时，Interface Builder 只是不允许修改单元格视图的类。发生了什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T19:26:32.963

我终于找到了一个解决方案，这有点奇怪，但可以按预期工作。我没有直接连接`NSButton`to`MyTableCellView`标头，而是使用了反向路径：

手动创建一个出口：

```
@property(retain, nonatomic) IBOutlet NSButton* button; 
```

然后单击左侧的空圆圈，并将其拖到您的 XIB 文件的按钮上：

![在此处输入图像描述](../Images/1488a1a5a4b97c2a5fcf4947f775dc03.png)

我不知道为什么它会这样工作，如果你知道答案，请告诉我。

# apache-flex - Flex ApplyFormatOperation 中断 Spark TextArea 中的撤消/重做

> ID：11811769
> 
> 赞同：0
> 
> 时间：2012-08-04T20:25:17.677
> 
> 标签：apache-flex, textarea, flex-spark

这是我在这里的第一个问题。所以..如果我问得不好，我很抱歉。

我编写了一个语法高亮文本编辑器，它扩展了 spark TextArea。通过将 ApplyFormatOperations 应用于文本的各个不同部分来突出显示。但是，一旦我应用任何格式操作，我就会失去所有内置的撤消/重做功能。我关闭着色并撤消重做回来。

这是我正在做的事情的简化版本，它消除了撤消/重做。想象一下，每次你输入一个字符时都会触发它。

```
//select everything
var operationState:SelectionState = new SelectionState(textFlow, 0, text.length);
//make an example format.
var exampleFormat:TextLayoutFormat = new TextLayoutFormat();
//everytime we run change the color of all the the text.
m_undoTest = !m_undoTest;
if (m_undoTest) {
    exampleFormat.color = "#0839ff"; //make all text bluish.
} else {
    exampleFormat.color = "#ff0839"; //make all text redish.
}
//make an operation to apply my formatting.     
var formatOperation:ApplyFormatOperation = new ApplyFormatOperation(operationState,            exampleFormat, null);
//apply the operation to the text area.
formatOperation.doOperation(); 
```

现在，当我键入时，我的文本会从红色切换为蓝色，并且我无法再撤消。有趣的是，如果我执行相同的步骤但不更改新格式的任何属性。IE 不会在我们每次运行时切换颜色。撤消重做仍然有效。

任何帮助将不胜感激，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:50:16.370

嗯......我在这方面更进一步，通过“editManager”类传递我的所有操作，我不再丢失撤消重做历史。但是……着色现在算作不可撤销的操作……正如您可能想象的那样，这并不理想。因此，现在与您的实际撤消混合在一起，您可以删除所有语法突出显示。仍在试图找出解决方法。

当前实现的要点是这样的：

```
var editManager:IEditManager = textFlow.interactionManager as IEditManager;
//make an operation to apply my formatting.     
var formatOperation:ApplyFormatOperation = new ApplyFormatOperation(operationState,            exampleFormat, null);
//apply the operation to the text area.
editManager.doOperation(formatOperation); 
```

# java - java字节码的不同行为

> ID：11811774
> 
> 赞同：16
> 
> 时间：2012-08-04T20:25:44.597
> 
> 标签：java, bytecode

我是 Java 字节码的新手。我通过一些示例来理解字节码，但我陷入了一个示例。
这些是我的 java 和字节码文件

```
class SimpleAdd{
    public static void main(char args[]){
        int a,b,c,d;
        a = 9;
        b = 4;
        c = 3;
        d = a + b + c;
        System.out.println(d);
    }
}  
Compiled from "SimpleAdd.java"
class SimpleAdd extends java.lang.Object{
SimpleAdd();
  Code:
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   return

public static void main(char[]);
  Code:
   0:   bipush  9
   2:   istore_1
   3:   iconst_4
   4:   istore_2
   5:   iconst_3
   6:   istore_3
   7:   iload_1
   8:   iload_2
   9:   iadd
   10:  iload_3
   11:  iadd
   12:  istore  4
   14:  getstatic   #2; //Field java/lang/System.out:Ljava/io/PrintStream;
   17:  iload   4
   19:  invokevirtual   #3; //Method java/io/PrintStream.println:(I)V
   22:  return

} 
```

我只想知道当我们有指令 a = 9 时为什么会有 bipush 9
而在所有其他情况下都有 iconst。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-04T20:32:16.880

`iconst`可以将常量值 -1 推送到 5。它是单字节指令。

`bipush`可以将常数值推入 -128 和 127 之间。它是一个两字节指令。

要推动 9，您不能使用`iconst`. 没有`iconst_9`指示。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-04T20:33:46.120

[iconst_n 定义为从 0 到 5 的 n](https://en.wikipedia.org/wiki/Java_bytecode_instruction_listings)

没有`iconst_9`，所以你必须使用等效的（但效率较低）`bipush`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T20:33:31.493

没有 iconst_9 指令

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T04:20:50.273

i_const 指令的范围只有 0~5，所以它必须通过 push 和 store 吐出指令

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-04T13:49:50.227

指令iconst_* 被优化用于处理小的和特定的数字，而bipush（将一个字节作为整数值压入堆栈）适用于更大的数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-16T17:35:07.580

没有`iconst_9`指示。所以要推 9 你不能使用 iconst。你必须去`bipush`

# android - 在 android 上使用 phonegap 更改活动

> ID：11811777
> 
> 赞同：1
> 
> 时间：2012-08-04T20:26:08.907
> 
> 标签：android, cordova

您如何使用 DroidGap 更改活动？即使我们使用的是 DroidGap，有没有办法获取当前上下文？

```
public class MainActivity extends DroidGap {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (isOnline() == true) {
    super.loadUrl("http://myurl.com");
    }
    else {
        Intent myIntent = new Intent(SOME CONTEXT...DroidGap.getContext(), LoadScreen.class);

        startActivity(myIntent);
        finish();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:16:42.150

这解决了我的问题`Intent myIntent = new Intent(getContext(), LoadScreen.class);`

# javascript - jquery 插件 - 1 个配置设置从另一个配置设置中获取值

> ID：11811780
> 
> 赞同：1
> 
> 时间：2012-08-04T20:26:57.560
> 
> 标签：javascript, jquery

在 jquery 中创建插件时，我正在创建我的可配置设置，如下所示：

```
var settings = $.extend( {
    'setting_one'  : 'setting_one_value',
    'setting_two'  : 'setting_two_value'
}, options) 
```

我想做的是创建另一个设置，该设置取决于 setting_one 或 setting_two 的值。

例如：

```
var settings = $.extend( {
    'setting_one'    : 'setting_one_value',
    'setting_two'    : 'setting_two_value',
    'setting_three'  : setting_one + setting_two,
}, options) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:42:28.807

我认为你可以存档的唯一方法是通过设置三个之后：

```
var defaults = {
  one: 1,
  two: 2
};
var options = {
  one: 2,
  two: 4
};

var settings = $.extend({}, defaults, options);

settings.three = settings.one + settings.two; 
```

这是确保您获得正确数据的唯一方法，如果选项不具有以下属性，则 eq `two`：

```
var options = {
  one: 2
} 
```

`settings.three`将会`4`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:34:07.653

```
var ops = (function (){
  var one, two, three
  one = 'foo'
  two = 'baz'
  three = one + ' ' + two
  return {
    one: one,
    two: two,
    three: three
  }
}())

var o = $.extend(ops, options) 
```

# html - 表单值创建一个 URL

> ID：11811782
> 
> 赞同：6
> 
> 时间：2012-08-04T20:27:46.140
> 
> 标签：html, forms, url

我正在尝试使用一些额外的代码创建一个非常简单的表单，以获得如下所述的结果：问题是我不知道如何去做。

我想要达到的目标：

我有一个表单，它有一个名为“url”的文本输入框。我希望用户能够在框中输入一个数字。当用户提交表单时，他们应该被重定向到一个新网站。新网站的 URL 将基于表格中输入的数字。

URL 的第一部分始终是： http: [//name.com/](http://name.com/)

然后将用户输入的数字附加到末尾。因此，如果在表单中输入 123456，那么在提交表单时，用户将被带到[http://name.com/123456](http://name.com/123456)

我怎样才能得到这个工作？我猜它需要JavaScript或其他东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-04T20:36:10.863

```
<script>
    function process()
    {
        var url = "http://name.com/" + document.getElementById("url").value;
        location.href = url;
        return false;
    }
</script>

<form onSubmit="return process();">
    URL: <input type="text" name="url" id="url">
    <input type="submit" value="go">
</form> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-04T20:37:25.483

您可以添加`onsubmit="this.action='http://google.com/'+this.fieldName.value;"`到您的标签。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T20:38:01.873

这应该这样做：

```
<script type="text/javascript">
    function goToPage() {
        var page = document.getElementById('page').value;
        window.location = "http://name.com/" + page;
    }
</script>
<input type="text" id="page" />
<input type="submit" value="submit" onclick="goToPage();" /> 
```

# android - Android - Button OnTouch 事件更改按钮的焦点

> ID：11811792
> 
> 赞同：2
> 
> 时间：2012-08-04T20:29:27.920
> 
> 标签：android

我有一个带有 10 个按钮的应用程序。每次用户按下一个按钮时，TextView 都应该改变。如果用户改变焦点并将其手指移到右侧，到下一个按钮（没有将手指从屏幕上移开），第二个按钮应该被聚焦。

我尝试将 OnTouchListner 设置为所有按钮，但是一旦移动手指，焦点仍停留在第一个按钮上：

```
btn1.setOnTouchListener(new View.OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                txt1.settext("1");
                return false;
            }
        }); 
```

我希望你明白我的意思并能帮助我。

谢谢

编辑：

我找到了一个应用程序，这是一个视频，所以你可以想象我的意思。请注意我如何移动鼠标（在本例中为手指）并且 Boxes 改变了它的焦点：

[http://www.youtube.com/watch?v=MRVFpNrBmsA&feature=youtu.be](http://www.youtube.com/watch?v=MRVFpNrBmsA&feature=youtu.be)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-04T21:18:50.663

要从你的 onTouch() 开始，你应该处理这些事件......

就像是

```
 public boolean onTouch(View v, MotionEvent event) {

            if(event.getAction() == MotionEvent.ACTION_HOVER_ENTER) {
               txt1.settext("1");
            } else if(event.getAction() == MotionEvent.ACTION_HOVER_EXIT){
               txt1.settext("0");
            }
            return true;
        } 
```

Not sure if those are the proper actions to check against but it is just to give the idea.

Also I believe you should return true otherwise it means that the event wasn't processed and it gets stuck.

# android - 如何在应用程序中随机显示一个对话框

> ID：11811805
> 
> 赞同：1
> 
> 时间：2012-08-04T20:32:02.540
> 
> 标签：android, dialog

我想知道是否有人可以告诉我如何显示一个带有“评价此应用程序”按钮的警报对话框，我希望该对话框显示，例如每周甚至一次。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:34:37.693

您可以将用户最后一次在应用程序中看到警报的日期和时间存储在某处（可能在数据库中），并检查从那时起是否已经过了足够的时间。

如果上次显示警报的时间是三天前，则显示警报，如果少于三天，则不显示。

# java - 如何使 JEE6 javadoc 为 NetBeans 7.0.1 中的常规 JavaSE 项目工作？

> ID：11811807
> 
> 赞同：4
> 
> 时间：2012-08-04T20:32:11.010
> 
> 标签：java, netbeans, javadoc, netbeans-7, enterprise

我想要的只是在我的 JavaSE 项目中显示 JavaEE6 文档。也许这是不可能的。

问题是我在 NetBeans中创建了一个普通的旧**JavaSE**项目（即*New Project -> Java -> 'Java Application' ），但其中包含***Java Enterprise Edition**元素。

这些元素之一是**javax.persistence** *@Basic(fetch/optional)*注释。

- 当我在这个注释上按**ctrl+space**时，NetBeans 说“*找不到 Javadoc。*'。当我使用**Alt+F1** ( *Right-Click->'Show Javadoc'* ) 时，状态栏显示：' *Cannot perform Show Javadoc here* .'。

额外信息：

1) *netbeans_installation_dir\NetBeans 7.0.1\enterprise\docs*包含正确的 API 文档 zip 文件 ( **javaee6-doc-api.zip** )。

2) 我在 stackoverflow 上四处寻找类似的解决方案，但它们对我不起作用 - 将**.jar/.zip/文件夹**添加到库**或**通过*“工具 -> Java 平台 -> Javadoc 选项卡”*也不起作用。

非常奇怪的是，当我将*javaEE6.jar添加到**JDK6*平台的*Javadoc*选项卡并在“*项目结构”窗口*中右键单击“显示 Javadoc”的“ **JDK1.6** ”库时，会打开一个浏览器窗口，我可以看到我想要的 *JEE6文档。*

*****我猜问题是我有一个常规的 JavaSE 项目，而 NetBeans 无法获取 JavaEE6 javadoc，因为它不知道我的应用程序部分使用了 EE 元素。这也可能是因为该文档适用于 JavaEE6 应用程序（这就是它位于*/enterprise*文件夹下的原因）。

所以我不知道如何解决这个问题。它是一个错误吗？（我在 NetBeans 错误报告中读到这可能是一个错误）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T23:14:21.500

这似乎是您如何将库附加到项目的问题。最简单的方法是使用工具 > 库中提供的库。您只需要确保附加到项目的库也附加了正确的 Javadoc。如果未附加 Javadoc，您可以尝试以下步骤来执行此操作：

1.  在 NetBeans IDE 中，转到“工具 > 库”。
2.  选择正确的库并选择 Javadoc 选项卡。
3.  单击“添加 ZIP/文件夹”并浏览到您的项目 Javadoc 所在的位置。
4.  指定 Javadoc ZIP 或文件夹，然后单击“添加 ZIP/文件夹”。
5.  单击“确定”关闭库管理器。

可以在 [this NetBeans Wiki page][1] 找到更多详细信息。*****

# jquery - 将类添加到默认选中复选框和单选的标签

> ID：11811810
> 
> 赞同：-1
> 
> 时间：2012-08-04T20:32:26.910
> 
> 标签：jquery, css, forms

我发现了很多这样的例子，但没有一个完全符合我在一个掘金中尝试做的事情。我需要更改复选框或收音机的标签（标签必须包裹在我喜欢的输入的输入周围），具体取决于复选框或收音机是否被“选中”。其中一些输入将在到达表格时被检查，因此如果选中，班级需要在到达时显示。

它现在适用于复选框，但是如何在不破坏它的情况下将单选按钮添加到组合中？感谢帮助！

这是我的 HTML/CSS：

```
<style type="text/css">
.c_on {color: #F0F;}
.r_on {color: #0F0;}
</style>

<fieldset class="checkboxes">

    <label for="chk1"><input type="checkbox" id="chk1" />chk1</label><br />
    <label for="chk2"><input type="checkbox" id="chk2" checked="checked" />chk2</label>

</fieldset>

<fieldset class="radios">

    <label for="rdo1"><input type="radio" name="group1" id="rdo1" />rdo1</label><br />
    <label for="rdo2"><input type="radio" name="group1" id="rdo2" checked="checked" />rdo2</label>

</fieldset> 
```

这是我的 jQuery：

```
$(document).ready(function() {

    /* Turn checkbox class on */
    var checkOn = 'c_on'

    function toggleLabelClass(input){
        var $input = $(input);
        if ($input.is('[type="checkbox"]:checked')){
            $input.parent('label').addClass(checkOn);
        }else{
            $input.parent('label').removeClass(checkOn)
        }
    }
    $(function() {
        $('input[type="checkbox"]').each(function(){
            toggleLabelClass(this);
            $(this).click(function(evt){
                toggleLabelClass(evt.target);
            });
        });
    });

}); 
```

[http://jsfiddle.net/P2n2V/](http://jsfiddle.net/P2n2V/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:50:10.013

也许这样的事情会起作用：

```
$(function() {
    var inputOn = 'c_on',
        radioOn = 'r_on',
        elms=$('input[type="checkbox"], input[type="radio"]');

    function setLabelClass() {
        elms.each(function(i,e) {
            $(e).parent('label')[e.checked?'addClass':'removeClass']($(e).is(':radio')?radioOn:inputOn);
        });
    }

    elms.on('change', setLabelClass);
    setLabelClass();
});​ 
```

[**小提琴**](http://jsfiddle.net/qdM2T/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:41:46.867

您需要在`each()`循环中添加无线电输入并对函数进行一些更改`toggleLabelClass()`。这是你需要的吗：http: [//jsfiddle.net/zjc9e/](http://jsfiddle.net/zjc9e/)

我不知道你所说的不打破混合是什么意思。您不想更改代码的任何部分吗？

# google-closure - 如何使源元素的克隆在 Google Closure 中拖放时消失？

> ID：11811811
> 
> 赞同：1
> 
> 时间：2012-08-04T20:32:27.147
> 
> 标签：google-closure, google-closure-library

我一直在修改 Google Closure 库中的拖放操作：http: [//closure-library.googlecode.com/svn/docs/class_goog_fx_DragDropGroup.html](http://closure-library.googlecode.com/svn/docs/class_goog_fx_DragDropGroup.html)

我想知道当“dragstart”事件被触发时如何隐藏克隆的源元素（跟随光标）。这是我当前的 dragstart 事件回调函数。我确信它在正确的时间被调用。但是，它无法隐藏克隆的元素。

```
/**
 * Called when drag starts.
 * @param {Event} e The event signaling the start of drag.
 * @private
 */
Foo.prototype.dragStart_ = 
    function(e) {
  goog.style.setOpacity(e.dragSourceItem.element, 0);
  goog.style.showElement(e.dragSourceItem.element, false);
} 
```

如何隐藏跟随鼠标的克隆源元素？我也不介意隐藏实际的拖动源元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T22:03:54.967

`dragstart`如果您删除对 的调用，您的事件处理程序应该可以工作`goog.style.showElement`。

```
/**
 * Called when drag starts.
 * @param {Event} e The event signaling the start of drag.
 * @private
 */
Foo.prototype.dragStart_ = function(e) {
  goog.style.setOpacity(e.dragSourceItem.element, 0.0);
}; 
```

请参阅***[拖放演示](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/index.html)***。

在演示文件*dragdrop.html*中，`dragStart(event)`函数定义如下：

```
function dragStart(event) {
  goog.style.setOpacity(event.dragSourceItem.element, 0.5);
} 
```

更改不透明度以`0.0`成功隐藏源元素和拖动元素。

要保持源元素可见并仅隐藏拖动元素，您可以覆盖`goog.fx.AbstractDragDrop.prototype.createDragElement(sourceElement)`并使用 CSS 设置拖动元素的不透明度。例如，在*dragdrop.html*演示中，`button 1`使用了一个自定义的拖动元素，样式为 CSS 类`foo`。下面的 CSS 隐藏了`button 1`拖动元素：

```
.foo {
  position: absolute;
  opacity: 0.0;
} 
```

# html - 粘性页脚文本移动

> ID：11811816
> 
> 赞同：2
> 
> 时间：2012-08-04T20:33:12.930
> 
> 标签：html, css

我在[这里实现了一个粘性标题。](http://cargocollective.com/btatest/)

然而，当它到达它的粘点时，文本会向下移动，从容器中移出。

我想让它粘在容器里。

我的 HTML 和 Jq：

```
<div id="container">
<div id="menu">
    <ul>
        <li><a href='#'>Line 1</a></li>
        <li><a href='#'>Line 2</a></li>
        <li><a href='#'>Line 3</a></li>
    </ul>
</div>
</div> 
```

我的脚本：

```
<script type="text/javascript">
    $(document).ready(function(){
        $(window).scroll(function(){
           if($(this).scrollTop()>=575)
           {
           $('#menu').addClass('fixed');
           }else{
               $('#menu').removeClass('fixed');
           }
                   });
    });
    </script> 
```

CSS：

```
#menu{
    height: 35px;
    background-color:brown;
    z-index:200;
}

#menu ul li{
    float: left;
    list-style: none;
    line-height: 35px;
}

#menu a {
    color: #fff;
    text-decoration: none;
    font-size 16px;
    font-weight: bold;
    padding: 0 20px;
}

#menu.fixed{
    position: fixed;
    top:0;
    width: 720px;

}

#container{
    width: 720px;
    margin: 0 auto;
} 
```

提前致谢

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:53:56.943

这个元素转移是因为你的元素有默认边距。只需添加css

```
ul {
    margin:0;
} 
```

但是，您最好在样式表的开头添加 css-reset，例如这个

```
 /**
 * Eric Meyer's Reset CSS v2.0 (http://meyerweb.com/eric/tools/css/reset/)
 * http://cssreset.com
 */
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
} 
```

您应该使用 css 重置，因为所有浏览器都有默认的 css 规则，这可能会导致您的页面在不同浏览器之间呈现不同

# c# - 将 ContentPresenter 添加到 ContentTemplate 的异常

> ID：11811820
> 
> 赞同：1
> 
> 时间：2012-08-04T20:33:37.550
> 
> 标签：c#, wpf, templates, xaml, wpf-controls

```
<ContentControl Content="Test">
    <ContentControl.ContentTemplate>
        <DataTemplate>
            <Border>
                <ContentPresenter />
            </Border>
        </DataTemplate>
    </ContentControl.ContentTemplate>
</ContentControl> 
```

它抛出堆栈溢出异常。但是，如果我使用除 ContentPresenter 之外的任何其他控件，它也可以正常工作，即使 ItemPresenter 也可以工作。我知道将 ContentPresenter 放在那里没有任何意义，只是为了了解知识。为什么它会抛出 StackOverFlow 异常以及为什么 Intellisense 显示它可以添加（我的意思是它出现在 Intellisense 中，这意味着在语法上它没有错 ContentPresenter 在那里）。任何帮助都将受到高度重视。或者它是Wpf中的任何缺陷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:01:33.263

[ContentPresenter](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentpresenter.aspx)的 MSDN 页面说：

> 当 ContentPresenter 对象位于 ContentControl 的 ControlTemplate 中时，Content、ContentTemplate 和 ContentTemplateSelector 属性从 ContentControl 的同名属性中获取它们的值。您可以通过设置 ContentSource 属性或绑定到它们，让 ContentPresenter 属性从模板化父级的其他属性中获取这些属性的值。

我想它给出了一个 StackOverflow，因为它只是继续尝试将模板应用到 ContentTemplate 中的 ContentPresenter，然后应用到其中的下一个，然后是其中的一个，等等。

您还可以执行以下操作，因此这种模式可能并不总是错误的，即使 IntelliSense 可能不会对这些类型的场景进行任何检查。

```
<ContentControl Content="Test"> 
    <ContentControl.ContentTemplate> 
        <DataTemplate> 
            <Border> 
                <ContentPresenter ContentStringFormat="{}{0}" />
            </Border> 
        </DataTemplate> 
    </ContentControl.ContentTemplate> 
</ContentControl> 
```

# iphone - 从 UIImage 获取数据

> ID：11811822
> 
> 赞同：0
> 
> 时间：2012-08-04T20:33:54.503
> 
> 标签：iphone, objective-c, image, cocoa, uiimage

我想打印 UIImage 的 ISO、拍摄日期、分辨率等详细信息，并使用 NSLog 将它们打印到控制台上，我想知道是否有任何框架可以让我获得 UIImage 的“元”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:39:12.917

也许这会对您有所帮助：

[http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGImageSource/Reference/reference.html#//apple_ref/doc/uid/TP40001399](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGImageSource/Reference/reference.html#//apple_ref/doc/uid/TP40001399)

# java - 如何在 ContainerRequestFilter 中检索请求的匹配资源

> ID：11811827
> 
> 赞同：12
> 
> 时间：2012-08-04T20:34:37.043
> 
> 标签：java, annotations, jersey, jax-rs

我正在使用 JAX-RS/Jersey 开发 WebService。

我设置了一个*ContainerRequestFilter*，其目的是对用户进行身份验证。我只需要通过身份验证保护一些路径，其余的可供所有人使用。

我想通过我的 ContainerRequestFilter 中的 ExtendedUriInfo 检索matchedResources /matchedResults，以便我可以检查路径是否应该受到保护。有没有办法创建一个在填充 ExtendedUriInfo 之后调用的过滤器，但在调用匹配的资源类和方法之前？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-11T13:10:25.530

这是一个更一般的答案（例如，如果您使用另一个 jax-rs 实现，如 CXF）：

只需在您的过滤器类中添加以下内容作为实例变量：

> @语境
> 
> 资源信息信息；
> 
> “javax.ws.rs.container.ResourceInfo 是一个新的 JAX-RS 上下文，可以将其注入过滤器和拦截器，并**检查将要调用哪个资源类和方法。** ”

（来源：[https](https://cwiki.apache.org/confluence/display/CXF20DOC/JAX-RS+Basics#JAX-RSBasics-ResourceInfo) ://cwiki.apache.org/confluence/display/CXF20DOC/JAX-RS+Basics#JAX-RSBasics-ResourceInfo ）

[原始答案在这里](https://stackoverflow.com/questions/19525185/how-to-get-target-resource-from-containerrequestfilter-in-apache-cxf/20519922#20519922)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-11T09:18:50.207

找到了一种使用*ContainerRequestFilter*的方法：

```
public void filter(ContainerRequestContext requestContext) {
    UriRoutingContext routingContext = (UriRoutingContext) requestContext.getUriInfo();
    ResourceMethodInvoker invoker = (ResourceMethodInvoker) routingContext.getInflector();
    Class<?> className = invoker.getResourceClass();
    Method methodName = invoker.getResourceMethod();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-05T23:43:36.053

我设法弄清楚了。

我发现可行的方法是放弃在*ContainerRequestFilter*中执行此操作，而是创建一个*ResourceFilterFactory 。*在*ResourceFilterFactory*我可以使用

```
AbstractMethod.isAnnotationPresent(clazz) 
```

确定我的自定义注释是否存在。如果我的注释存在，我可以返回一个包含我的*AuthenticationContainerRequestFilter*的列表。

*阅读此答案的任何人的另一个提示是，使用ResourceFilterFactory*方法时，ContainerRequestFilter 中的注入将不起作用。我所做的是在*ResourceFilterFactory*中进行任何注入，然后通过其构造函数将注入的对象传递给*ContainerRequestFilter 。*

# c - 是否可以创建不带参数的 C 可变参数函数？

> ID：11811828
> 
> 赞同：5
> 
> 时间：2012-08-04T20:34:51.463
> 
> 标签：c

> **可能重复：**
> [是否可以在 C 中使用没有非可变参数的可变参数函数？](https://stackoverflow.com/questions/2622147/is-it-possible-to-have-a-variadic-function-in-c-with-no-non-variadic-parameter)

是否可以创建不带参数的 C 可变参数函数？

例如：

```
int foo(...); 
```

我想做如下的事情：

```
list* create_list(...){
    list *mylist = list_create();
    void *current_arg = va_arg(void*);
    while (current_arg != NULL){
        list_add(mylist, current_arg);
        current_arg = va_arg(void*);
    }
    return mylist;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T20:36:25.890

不可以。可变参数函数必须有一个或多个命名参数。

自己试试，你会看到类似的东西：

> 错误：ISO C 在“...”之前需要一个命名参数

# wordpress - 在发布帖子时即时更改 wordpress 帖子作者

> ID：11811829
> 
> 赞同：1
> 
> 时间：2012-08-04T20:35:30.787
> 
> 标签：wordpress, publish, author

我正在开发我的网站，并且需要在发布时即时更改帖子作者 ID。

所有帖子将由管理员编写和发布，但作为不同作者提供的内容，需要将帖子作者 ID 从管理员更改为其他作者（作者 ID 将从自定义字段中获取）

那么如何在发布时即时执行此操作。

作者信息*是否*必须来自自定义字段？因为您可以直接在 UI 中手动执行此操作。

*   创建帖子时在显示选项中启用“作者”块

*   在下拉菜单中更改作者

这是我使用 wpalchemy metabox 脚本的主题 metabox.php 代码，下面的代码在我的 cpt 循环 php 文件中

```
// getting custom field value from image_artist
// this is giving value like artist_login_name / id
$png_gallery_meta->the_field('image_artist');
$artist_info = $png_gallery_meta->get_the_value();

// to separate artist_login_name and id
$string = $artist_info;
$artist = substr($string, 0, stripos($string, "/") );

// getting first name and last name from user id
$author_first_name = get_userdata(basename($string))->first_name;

$author_last_name = get_userdata(basename($string))->last_name; 
```

所以我使用上面的代码从自定义字段下拉选择框中获取用户信息。现在如何在管理员发布帖子时使用上述值动态更改 id，帖子作者 id 应该随着从选择框中获取的上述 id 值而更改。我希望现在更清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:38:15.303

作者信息*是否*必须来自自定义字段？因为您可以直接在 UI 中手动执行此操作。

*   创建帖子时在显示选项中启用“作者”块

*   在下拉菜单中更改作者

这是我使用 wpalchemy metabox 脚本的主题 metabox.php 代码，下面的代码在我的 cpt 循环 php 文件中

```
// getting custom field value from image_artist
// this is giving value like artist_login_name / id
$png_gallery_meta->the_field('image_artist');
$artist_info = $png_gallery_meta->get_the_value();

// to separate artist_login_name and id
$string = $artist_info;
$artist = substr($string, 0, stripos($string, "/") );

// getting first name and last name from user id
$author_first_name = get_userdata(basename($string))->first_name;

$author_last_name = get_userdata(basename($string))->last_name; 
```

所以我使用上面的代码从自定义字段下拉选择框中获取用户信息。现在如何在管理员发布帖子时使用上述值动态更改 id，帖子作者 id 应该随着从选择框中获取的上述 id 值而更改。我希望现在更清楚了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T21:28:39.790

```
$post_id = $post->ID; // change this to whathever
$user_id = '4'; // change this too

$the_post = array();
$the_post['ID'] = $post_id;
$the_post['post_author'] = $user_id;

wp_insert_post( $the_post ); 
```

上面的代码将使用 ID 为 4 的作者更新当前循环的帖子（通过 $post->ID）。

[在此处](http://codex.wordpress.org/Function_Reference/wp_insert_post)阅读 wp_insert_post 的工作原理。基本上，如果您向它传递一个已经存在的帖子的 ID，它将使用您传递给它的新信息更新该帖子。（本例中的作者 ID）

如果您想从自定义字段中获取内容，您可以使用：

```
$author = get_post_meta($this->ID, 'author_id', TRUE); 
```

[有关自定义字段](http://codex.wordpress.org/Function_Reference/get_post_meta)的更多信息。

# iphone - 仅作为 UITabBarItem 的图像

> ID：11811831
> 
> 赞同：23
> 
> 时间：2012-08-04T20:35:40.383
> 
> 标签：iphone, objective-c, uitabbar

我只想有一个图标作为 UITabBarItem 而不是下面的文本，我想知道这是否可能，如果可以，如何？TIA

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-11-08T17:08:40.533

如果您使用故事板，也许您可​​以使用`Image Inset`from size inspector of bar item 并将标题同时设置为空：

![在此处输入图像描述](../Images/8fa9301f0b15ecc3607abbc5931e40c6.png)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-11-16T03:58:39.373

## **删除标题**

***检查员的简单方法***

*   选择您的 TabbarItem
*   在**标题位置**更改为自定义偏移
*   将垂直设置为 100
*   完毕

[![在此处输入图像描述](../Images/c43bb47b1ae43171853ee027e77ed956.png)](https://i.stack.imgur.com/qi3S7.png)

## **修复图像**

***调整图像***

*   选择您的 TabbarItem
*   定义你的**顶部**和**底部**

[![在此处输入图像描述](../Images/ffa0422aa68799bc0dca33d037f36796.png)](https://i.stack.imgur.com/lhMGU.png)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-12-10T01:35:28.050

如果您只是设置图像并将 nil 传递给标题，则图像将显示在 UITabBar 项的顶层。您还必须设置位置。

```
int offset = 7;
UIEdgeInsets imageInset = UIEdgeInsetsMake(offset, 0, -offset, 0); 
```

为 TabBarItem 设置图标图像后，设置属性值以更改图像位置，执行以下操作：

```
uiViewController.tabBarItem.imageInsets = imageInset; 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-03-07T06:15:00.527

将项目的标题设置为 nil 通常是不够的，因为如果您设置视图控制器的标题，它也会设置标签栏项目的标题。

相反，请执行以下操作：

```
tabbarItem.titlePositionAdjustment = UIOffsetMake(0.f, 50.f); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-05-06T17:35:12.617

你可以使用这个 Swift 扩展来定义一个新的方法`tabBarItemShowingOnlyImage()`，它会返回任何`UITabBarItem`修改后的只显示图像：

```
// helper for creating an image-only UITabBarItem
extension UITabBarItem {
    func tabBarItemShowingOnlyImage() -> UITabBarItem {
        // offset to center
        self.imageInsets = UIEdgeInsets(top:6,left:0,bottom:-6,right:0)
        // displace to hide
        self.setTitlePositionAdjustment(UIOffset(horizontal:0,vertical:30000))
        return self
    }
} 
```

此扩展基于其他评论中提供的建议构建。

它通过替换标题来隐藏标题，而不是将其设置为`nil`，因为有时其他对象（如视图控制器本身）会在标签栏项目初始化后将标题设置为某个值。它通过使用 6pt 将图像居中，`imageInsets`这是我在运行 iOS8.3 的 iPhone 6 上观察到的值。

我想其他设备和布局配置可能需要不同的偏移校正，因此通用解决方案可能必须更复杂。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-04-08T04:14:13.197

我知道已经有一段时间了。但我可能有这个问题的解决方案。

@ThiagoPires 答案仅在图像大到足以覆盖标题时才有用。如果不是，则标题将在图像下方可见。

我认为最简单的方法是在视图控制器代码中将 tabBarItem 的标题设置为“”。

重要的是要知道每次更改视图控制器标题时，tabbaritem 的标题也会更新。您可以使用 KVO 来观察标题的变化，并相应地将 "" 设置为 tabbaritem 标题。但是，如果您不在代码中的很多地方更改它，您可以在更改 ViewController 标题的地方正确设置它。

这是一个快速的例子：

```
override func viewDidLoad() {

    super.viewDidLoad()

    self.title = "View controller's Title"

    self.tabBarItem.title = ""
} 
```

而已。我希望这会有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-04T20:38:33.103

相关文档（突出显示我的）：

**initWithTitle:image:tag：** 使用指定的属性创建并返回一个新项目。

```
- (id)initWithTitle:(NSString *)title image:(UIImage *)image tag:(NSInteger)tag 
```

参数

标题：项目的标题。**如果为 nil，则不显示标题。**

图片：商品的图片。如果为零，则不显示图像。标签栏上显示的图像来自此图像。如果此图像太大而无法放在选项卡栏上，则会对其进行裁剪以适应。标签栏图像的大小通常为 30 x 30 点。源图像中的 alpha 值用于创建未选中和选中的图像——不透明的值将被忽略。

tag：接收者的标签，一个整数，可用于标识应用程序中的条形项目对象。

返回值：具有指定属性的新初始化项。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-10T04:50:31.883

试试下面的代码：

```
UIViewController *viewController1=[[RootViewController alloc]initWithNibName:@"RootViewController" bundle:nil];
UIViewController *viewController2=[[SecondViewCtr alloc]initWithNibName:@"SecondViewCtr" bundle:nil];
UIViewController *viewController3=[[ThirdViewCtr alloc]initWithNibName:@"ThirdViewCtr" bundle:nil];
UIViewController *viewController4=[[FourthVIewCtr alloc]initWithNibName:@"FourthVIewCtr" bundle:nil];
UIViewController *viewController5=[[FIfthViewCtr alloc]initWithNibName:@"FIfthViewCtr" bundle:nil];

UINavigationController *nav1 = [[UINavigationController alloc] initWithRootViewController:viewController1];
UINavigationController *nav2 = [[UINavigationController alloc] initWithRootViewController:viewController2];
UINavigationController *nav3 = [[UINavigationController alloc] initWithRootViewController:viewController3];
UINavigationController *nav4 = [[UINavigationController alloc] initWithRootViewController:viewController4];
UINavigationController *nav5 = [[UINavigationController alloc] initWithRootViewController:viewController5];
peekArray = [[NSMutableArray alloc] init];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:nav1, nav2,nav3,nav4,nav5, nil];

UITabBar *tabBar = _tabBarController.tabBar;
UITabBarItem *tabBarItem1 = [tabBar.items objectAtIndex:0];
UITabBarItem *tabBarItem2 = [tabBar.items objectAtIndex:1];
UITabBarItem *tabBarItem3 = [tabBar.items objectAtIndex:2];
UITabBarItem *tabBarItem4 = [tabBar.items objectAtIndex:3];
UITabBarItem *tabBarItem5 = [tabBar.items objectAtIndex:4];

[tabBarItem1 setFinishedSelectedImage:[UIImage imageNamed:@"home123.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"home_112.png"]];
[tabBarItem2 setFinishedSelectedImage:[UIImage imageNamed:@"gift123.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"gift_112.png"]];
[tabBarItem3 setFinishedSelectedImage:[UIImage imageNamed:@"cam12.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"cam_112.png"]];
[tabBarItem4 setFinishedSelectedImage:[UIImage imageNamed:@"message12.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"message_112.png"]];
[tabBarItem5 setFinishedSelectedImage:[UIImage imageNamed:@"people12.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"people_112.png"]];

[self.tabBarController setSelectedIndex:0];
self.window.rootViewController = self.tabBarController; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-10T02:46:48.133

像这样

```
UITabBarItem * personalBarItem = [[UITabBarItem alloc] init];
[personalBarItem setFinishedSelectedImage:[UIImage imageNamed:@"personal_click"] withFinishedUnselectedImage:[UIImage imageNamed:@"personal"]]; 
```

# java - 将 JSON POST 发送到 Django 应用程序

> ID：11811835
> 
> 赞同：0
> 
> 时间：2012-08-04T20:36:15.900
> 
> 标签：java, django, json, rest

我有一些 Java 代码试图将 POST 数据发送到 Django 应用程序。但是，视图根本不会被调用。如果我将 java 代码命中的相同 URL 粘贴到我的浏览器中，则会调用 Django 视图。我不知道我错过了什么，但 Java 编写一定有问题。

这是执行写入的 Java 函数：

```
public void executeWrite(String requestUrl, JsonObject jsonObject)
{
    DataInputStream  input = null;
    try
    {
        URL                 url;
        HttpURLConnection urlConn;
        DataOutputStream printout;

        System.out.println(requestUrl);
        // URL of CGI-Bin script.
        url = new URL (requestUrl);
        // URL connection channel.
        urlConn = (HttpURLConnection)url.openConnection();
        // Let the run-time system (RTS) know that we want input.
        urlConn.setDoInput (true);
        // Let the RTS know that we want to do output.
        urlConn.setDoOutput (true);
        // No caching, we want the real thing.
        urlConn.setUseCaches (false);
        // Specify the content type.
        urlConn.setRequestMethod("POST");
        urlConn.setRequestProperty("content-type","application/json; charset=utf-8");

        OutputStreamWriter wr = new OutputStreamWriter(urlConn.getOutputStream());
        wr.write(jsonObject.toString());
        wr.flush();
        wr.close();
    }
    catch(Exception ex)
    {
        ex.printStackTrace();
    }
} 
```

现在传入函数的 requestURL 直接对应于 Django 视图的请求URL。请求网址是：

```
http://127.0.0.1:8000/events/rest/33456/create 
```

这是 Django Urlconfig：

```
(r'^events/rest/(?P<key>\d+)/create', 'events.views.restCreateEvent'), 
```

最后，这是 Java 代码永远不会调用的视图

```
@csrf_exempt 
def restCreateEvent(request, key):
    #doesn't really matter what is in here it never runs 
```

那么，Django服务器从未收到过POST请求，我做错了什么？我花了大约 2 个小时试图弄清楚，我找不到 Java 代码的任何问题。显然有些地方出了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:40:19.417

确保您的视图是[csrf 豁免](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#csrf-protection-should-be-disabled-for-just-a-few-views)的，因为您没有从 Java 请求中发送适当的 CSRF 令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T21:20:26.283

我认为 crsf 的事情实际上是问题所在。添加后，我稍微更改了 Java 代码，它就可以工作了。我仍然不确定微妙的 Java 错误是什么，这里是有效的 Java 代码。

```
public void executeWrite(String requestUrl, JsonObject jsonObject)
{
    InputStreamReader  input = null;
    try
    {
        URL                 url;
        HttpURLConnection urlConn;
        DataOutputStream printout;

        System.out.println(requestUrl);
        // URL of CGI-Bin script.
        url = new URL (requestUrl);
        // URL connection channel.
        urlConn = (HttpURLConnection)url.openConnection();
        // Let the run-time system (RTS) know that we want input.
        urlConn.setDoInput (true);
        // Let the RTS know that we want to do output.
        urlConn.setDoOutput (true);
        // No caching, we want the real thing.
        urlConn.setUseCaches (false);
        // Specify the content type.
        urlConn.setRequestMethod("POST");
        urlConn.setRequestProperty("content-type","application/json; charset=utf-8");

        OutputStreamWriter wr = new OutputStreamWriter(urlConn.getOutputStream());
        wr.write(jsonObject.toString());
        wr.flush();
        wr.close();

        input = new InputStreamReader (urlConn.getInputStream ());
        String response = UserInterface.read(new BufferedReader(input));

        if(response.length() > 0)
        {
            System.out.println("Response:" + response);
        }

        input.close();
    }
    catch(IOException ex)
    {
        ex.printStackTrace();
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-07-05T06:34:14.470

我记得使用“POST”类型时，URL 需要更改为“ [http://127.0.0.1:8000/events/rest/33456/create/ ”。](http://127.0.0.1:8000/events/rest/33456/create/)

# cocoa - 设置一个弱 ivar 并获得 nil

> ID：11811846
> 
> 赞同：1
> 
> 时间：2012-08-04T20:37:55.993
> 
> 标签：cocoa, core-animation, automatic-ref-counting

在 ARC 项目中，我将 __weak ivar（声明为`id __weak weakLayer;`）设置为 CALayer，该 CALayer 由其超级层保留。大多数时候这有效。有时，weak ivar 测试为零。我编写了一些测试代码来简化演示问题的调试。我希望这是一个无限循环，但它会爆发，通常在不到 20 次迭代中。突破所需的迭代次数并不一致。

```
array = [NSMutableArray array];
while (1) {
  CALayer *layer = [CALayer layer];
  [array addObject:layer];
  weakLayer = layer;
  if (!weakLayer) {
    NSLog (@"nil");
    break;
  }
  NSLog(@"not nil");
} 
```

`po weakLayer`如果我使用内部的操作删除断点`if`，它会打印一个有效的对象。我已经使用 Lion 和 Mountain Lion SDK 在 Xcode 4.3.3 和 4.4 上进行了测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T23:28:39.457

3 个人（包括我自己）现在已经确认这适用于 10.8，但不适用于 10.7.4。

# ios - UISwitch 未显示在 UITable 中

> ID：11811850
> 
> 赞同：-1
> 
> 时间：2012-08-04T20:38:18.190
> 
> 标签：ios, xcode, xcode4, ios4, xcode4.2

我用一些数据制作了一个 UITable，并且我在其中包含了一个 UISwitch，但它在运行时没有显示在表中。

在.h

```
@interface CalcViewController : UITableViewController {

    IBOutlet UITableView *mainTableView;

    NSMutableArray *courseMURArray;

    NSMutableArray *switchStates;
} 
```

在.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    switchStates = [[NSMutableArray alloc] init ];

    int i = 0;

    for (i = 0; i < 33; i++) {
        [switchStates addObject:@"OFF"];
    }
} 
```

并且在

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

        UISwitch *theSwitch = nil;

        if (cell == nil) {

            cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];

            theSwitch = [[UISwitch alloc]initWithFrame:CGRectZero];
            theSwitch.tag = 100;

            CGRect frame = theSwitch.frame;
            frame.origin.x = 230;
            frame.origin.y = 8;
            theSwitch.frame = frame;

            [theSwitch addTarget:self action:@selector(switchChanged:) forControlEvents:UIControlEventValueChanged];

            [cell.contentView addSubview:theSwitch];

        }else{

            theSwitch = [cell.contentView viewWithTag:100];

        }

        if ([[switchStates objectAtIndex:indexPath.row] isEqualToString:@"ON"]) {
            theSwitch.on = YES;
        }else{
            theSwitch.on = NO;
        }

return cell;
} 
```

这是选择器方法

```
-(void) switchChanged: (UISwitch *) sender{

    UITableViewCell *theParentCell = [[ sender superview] superview];
    NSIndexPath * indexPathOfSwitch = [mainTableView indexPathForCell:theParentCell];

    if (sender.on) {
        [switchStates replaceObjectAtIndex:indexPathOfSwitch.row withObject:@"ON"];
    }else{
        [switchStates replaceObjectAtIndex:indexPathOfSwitch.row withObject:@"OFF"];
    }

} 
```

数据一切正常，但数据没有问题，有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T00:03:22.070

当您为 RowAtIndexPath 设置单元格中的单元格时，您将框架设置为 CGRectZero，即位置 (0,0) 处的矩形，宽度 = 高度 = 0。然后重置位置，但从未重置宽度 &高度。
在您的 2 frame.origin 行之后添加：

*   frame.size.width = XX;
*   frame.size.height = YY；

或者只是使用 CGRectMake(X, Y, width, height) 来制作框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T03:02:40.563

在您的 cellForRowAtIndexPath 中，如果单元格为 nil，则初始化 UISwitch 并将其添加到单元格中。如果单元格最初不是 nil 怎么办？

假设 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"] 返回一个有效的单元格，那么根本不会创建任何开关。

您可能需要验证是否已在界面构建器中指定“Cell”作为 UITableViewCell 的标识符，以防万一。

或者，将用于初始化 UISwitch 的代码移到“if(cell==nil)”之外。看看这是否能解决您的问题。如果 dedequeueReusableCellWithIdentifier: 返回 nil，则“if(cell==nil)”块应该用于初始化单元格。

此外，您为所有开关使用标记号 100，在 else 块中，使用标记 100 的 contentView 初始化 Switch。如果您有多个开关，iOS 应该将哪个 UISwitch 分配给 theSwitch？您可能想参考我关于如何正确设置标签号[的帖子。](https://stackoverflow.com/a/11756445/1479411)

# html - 如何缩短长网址 我有时会出现在我看来很长的网址，例如： "https://www.google.de/#hl=de&sclient=psy-ab&q=break+long+url+css&oq=break+long+url+&gs_l=serp.1.1.0i30l4.3822.3822.0.5634.1.1.0.0.0.0.85.85.1.1.0. 问问题 问问题 2012-08-04T20:38:25.137 16636 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. htmlasp.net-mvcurlhref 4 3 回答 3 This answer is useful 7 [short-url](full-url) 短 url 将显示在页面上，但链接将指向完整 url。 于 2012-08-04T20:48:29.353 回答 This answer is useful 1 使用 URL Shortener，谷歌有一个你可以连接到的 Api http://goo.gl/ https://developers.google.com/url-shortener/v1/getting_started 于 2012-08-04T20:45:32.027 回答 This answer is useful 0 您可以使用 CSS 属性将长文本 url 显示为短 试试这个... white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: inline-block; max-width: 40%; 于 2021-03-15T05:40:39.947 回答 Related 1 android - java.lang.NullPointerException 在 android.widget.ArrayAdapter.init(ArrayAdapter.java) 2 git - 拆分大型 git 存储库 2 excel - Excel UDF通过范围循环现有函数 3 regex - 从R中的字符串获取日期/时间 1 jquery - Eclipse Juno maven-archetype-webapp 处理奇怪的 jquery 插件在项目资源管理器目录中创建错误 1 csv - Super-CSV：如何进行“CSV 标准化”？ 0 jquery - 引导折叠关闭所有折叠元素并在链接单击时打开特定 2 sql-server - 外键与同一张表中的主键链接 1 xorg - Linux：调整应用程序窗口大小以适应显示 2 matlab - 替换matlab中两个矩阵之间的diag Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11811852
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, asp.net-mvc, url, href

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T20:48:29.353

```
<a href="full-url">short-url</a> 
```

短 url 将显示在页面上，但链接将指向完整 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T20:45:32.027

使用 URL Shortener，谷歌有一个你可以连接到的 Api

[http://goo.gl/](http://goo.gl/)

[https://developers.google.com/url-shortener/v1/getting_started](https://developers.google.com/url-shortener/v1/getting_started)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-15T05:40:39.947

您可以使用 CSS 属性将长文本 url 显示为短 试试这个...

```
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
display: inline-block;
max-width: 40%; 
```

# c# - 将 C# 中的调试器附加到另一个进程

> ID：11811856
> 
> 赞同：19
> 
> 时间：2012-08-04T20:39:00.953
> 
> 标签：c#, debugging

我希望能够自动附加一个调试器，例如： `System.Diagnostics.Debugger.Launch()`，除了当前进程而不是当前进程到另一个命名进程。我有一个进程名称和 PID 来识别另一个进程。

这可能吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-04T20:43:21.397

**编辑：** [`GSerjo`](https://stackoverflow.com/a/11812430/1106367)提供了正确的解决方案。我想分享一些关于如何改进它的想法（和解释）。我希望我改进的答案对遇到同样问题的其他人有用。

* * *

# 将 VS 调试器附加到进程

## 手动

1.  打开 Windows 任务管理器 ( `Ctrl`++ `Shift`) `Esc`。
2.  转到选项卡`Processes`。
3.  右键单击该进程。
4.  选择`Debug`。

或者，在 Visual Studio 中，选择`Debug > Attach to Process...`.

结果会有所不同，具体取决于您是否有权访问源代码。

## 自动使用 C#

> **注意事项：**以下代码很脆弱，因为某些值（例如 Visual Studio 版本号）是硬编码的。如果您打算分发您的程序，请记住这一点。

首先，在你的项目中添加对 EnvDTE 的引用（右键单击解决方案资源管理器中的引用文件夹，添加引用）。在下面的代码中，我只会展示不寻常的 using 指令；正常的如`using System`省略。

因为您正在[与 COM 交互，](http://msdn.microsoft.com/en-us/library/ms173185.aspx#sectionToggle2)所以您需要确保`Main`使用[`STAThreadAttribute`](http://msdn.microsoft.com/en-us/library/system.stathreadattribute.aspx).

然后，您需要[定义`IOleMessageFilter`](http://msdn.microsoft.com/en-us/library/ms228772(v=vs.100).aspx#exampleToggle)允许您与定义的 COM 方法交互的[接口](http://msdn.microsoft.com/en-us/library/ms228772(v=vs.100).aspx#exampleToggle)[`ComImportAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comimportattribute.aspx)（注意）。我们需要访问消息过滤器，以便在 Visual Studio COM 组件阻止我们的调用之一时重试。

```
using System.Runtime.InteropServices;

[ComImport, Guid("00000016-0000-0000-C000-000000000046"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
public interface IOleMessageFilter
{
    [PreserveSig]
    int HandleInComingCall(int dwCallType, IntPtr hTaskCaller, int dwTickCount, IntPtr lpInterfaceInfo);

    [PreserveSig]
    int RetryRejectedCall(IntPtr hTaskCallee, int dwTickCount, int dwRejectType);

    [PreserveSig]
    int MessagePending(IntPtr hTaskCallee, int dwTickCount, int dwPendingType);
} 
```

现在，我们需要实现这个接口来处理传入的消息：

```
public class MessageFilter : IOleMessageFilter
{
    private const int Handled = 0, RetryAllowed = 2, Retry = 99, Cancel = -1, WaitAndDispatch = 2;

    int IOleMessageFilter.HandleInComingCall(int dwCallType, IntPtr hTaskCaller, int dwTickCount, IntPtr lpInterfaceInfo)
    {
        return Handled;
    }

    int IOleMessageFilter.RetryRejectedCall(IntPtr hTaskCallee, int dwTickCount, int dwRejectType)
    {
        return dwRejectType == RetryAllowed ? Retry : Cancel;
    }

    int IOleMessageFilter.MessagePending(IntPtr hTaskCallee, int dwTickCount, int dwPendingType)
    {
        return WaitAndDispatch;
    }

    public static void Register()
    {
        CoRegisterMessageFilter(new MessageFilter());
    }

    public static void Revoke()
    {
        CoRegisterMessageFilter(null);
    }

    private static void CoRegisterMessageFilter(IOleMessageFilter newFilter)
    {
        IOleMessageFilter oldFilter;
        CoRegisterMessageFilter(newFilter, out oldFilter);
    }

    [DllImport("Ole32.dll")]
    private static extern int CoRegisterMessageFilter(IOleMessageFilter newFilter, out IOleMessageFilter oldFilter);
} 
```

为了更好的可读性，我将返回值定义为常量，并对整个内容进行了一些重构，以消除 MSDN 示例中的一些重复内容，所以我希望你会发现它是不言自明的。`extern int CoRegisterMessageFilter`是我们与非托管消息过滤器代码的连接 - 您可以[在 MSDN 上阅读 extern 关键字](http://msdn.microsoft.com/en-us/library/e59b22c5(v=vs.100).aspx)。

现在剩下的就是一些说明用法的代码：

```
using System.Runtime.InteropServices;
using EnvDTE;

[STAThread]
public static void Main()
{
    MessageFilter.Register();
    var process = GetProcess(7532);
    if (process != null)
    {
        process.Attach();
        Console.WriteLine("Attached to {0}", process.Name);
    }
    MessageFilter.Revoke();
    Console.ReadLine();
}

private static Process GetProcess(int processID)
{
    var dte = (DTE)Marshal.GetActiveObject("VisualStudio.DTE.10.0");
    var processes = dte.Debugger.LocalProcesses.OfType<Process>();
    return processes.SingleOrDefault(x => x.ProcessID == processID);
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-04T22:25:26.077

看一下这个

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.InteropServices;
using EnvDTE;
using NUnit.Framework;

namespace UnitTests
{
    [TestFixture]
    public class ForTest
    {
        [STAThread]  
        [Test]
        public void Test()
        {
            var dte = (DTE) Marshal.GetActiveObject("VisualStudio.DTE.10.0");
            MessageFilter.Register();

            IEnumerable<Process> processes = dte.Debugger.LocalProcesses.OfType<Process>();
            var process = processes.SingleOrDefault(x => x.ProcessID == 6152);
            if (process != null)
            {
                process.Attach();
            }
        }
    }

    public class MessageFilter : IOleMessageFilter
    {
        //
        // Class containing the IOleMessageFilter
        // thread error-handling functions.

        // Start the filter.

        //
        // IOleMessageFilter functions.
        // Handle incoming thread requests.

        #region IOleMessageFilter Members

        int IOleMessageFilter.HandleInComingCall(int dwCallType,
                                                 IntPtr hTaskCaller, int dwTickCount, IntPtr
                                                                                          lpInterfaceInfo)
        {
            //Return the flag SERVERCALL_ISHANDLED.
            return 0;
        }

        // Thread call was rejected, so try again.
        int IOleMessageFilter.RetryRejectedCall(IntPtr
                                                    hTaskCallee, int dwTickCount, int dwRejectType)
        {
            if (dwRejectType == 2)
            // flag = SERVERCALL_RETRYLATER.
            {
                // Retry the thread call immediately if return >=0 & 
                // <100.
                return 99;
            }
            // Too busy; cancel call.
            return -1;
        }

        int IOleMessageFilter.MessagePending(IntPtr hTaskCallee,
                                             int dwTickCount, int dwPendingType)
        {
            //Return the flag PENDINGMSG_WAITDEFPROCESS.
            return 2;
        }

        #endregion

        public static void Register()
        {
            IOleMessageFilter newFilter = new MessageFilter();
            IOleMessageFilter oldFilter = null;
            CoRegisterMessageFilter(newFilter, out oldFilter);
        }

        // Done with the filter, close it.
        public static void Revoke()
        {
            IOleMessageFilter oldFilter = null;
            CoRegisterMessageFilter(null, out oldFilter);
        }

        // Implement the IOleMessageFilter interface.
        [DllImport("Ole32.dll")]
        private static extern int
            CoRegisterMessageFilter(IOleMessageFilter newFilter, out
                                                                     IOleMessageFilter oldFilter);
    }

    [ComImport, Guid("00000016-0000-0000-C000-000000000046"),
     InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    internal interface IOleMessageFilter
    {
        [PreserveSig]
        int HandleInComingCall(
            int dwCallType,
            IntPtr hTaskCaller,
            int dwTickCount,
            IntPtr lpInterfaceInfo);

        [PreserveSig]
        int RetryRejectedCall(
            IntPtr hTaskCallee,
            int dwTickCount,
            int dwRejectType);

        [PreserveSig]
        int MessagePending(
            IntPtr hTaskCallee,
            int dwTickCount,
            int dwPendingType);
    }
} 
```

*   [如何：创建并附加到另一个 Visual Studio 实例](http://msdn.microsoft.com/en-us/library/6cefss65.aspx)
*   [如何：修复“应用程序正忙”和“呼叫被被呼叫者拒绝”错误](http://msdn.microsoft.com/en-us/library/ms228772%28v=vs.90%29.aspx)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-05-17T11:08:27.270

更简单的方法。

```
public static void Attach(DTE2 dte)
        {
            var processes = dte.Debugger.LocalProcesses;
            foreach (var proc in processes.Cast<EnvDTE.Process>().Where(proc => proc.Name.IndexOf("YourProcess.exe") != -1))
                proc.Attach();
        }

        internal static DTE2 GetCurrent()
        {
            var dte2 = (DTE2)Marshal.GetActiveObject("VisualStudio.DTE.12.0"); // For VisualStudio 2013

            return dte2;
        } 
```

用法：

```
Attach(GetCurrent()); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-04T22:11:43.087

一个选项是运行；`vsjitdebugger.exe -p ProcessId`

可以`Process.Start`在 ac# app 中使用它来执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-01T11:14:01.177

如果您在将调试器附加到手动附加太快的进程时遇到麻烦，请不要忘记您有时可以添加`Console.ReadKey();`到代码的第一行，然后您就有了所有时间需要手动附加它。令人惊讶的是，我花了一段时间才弄清楚：D

# javascript - 如何浮动不同高度的元素？

> ID：11811858
> 
> 赞同：27
> 
> 时间：2012-08-04T20:39:18.193
> 
> 标签：javascript, jquery, css, css-float

我正在开发一个响应式网页设计，它可以并排浮动 4 列中的多个项目。这些物品具有不同的高度，因此浮动无法正常工作。

这是目前发生的情况：

[![浮动错误](../Images/66538c7bd5161634f56752c66ae7f0ff.png)](https://i.stack.imgur.com/5g6mN.png)

关于如何使元素像这样浮动的任何想法：

[![向右浮动](../Images/fc4908ebdc6a4560ce881f451616f514.png)](https://i.stack.imgur.com/Jf63X.png)

我想这应该适用于 jQuery“砌体”，对吧？但是我正在使用 Zepto.js，我猜想 jQuery 插件不起作用。

有没有纯 CSS (CSS3) 的方法？有什么技巧吗？

如果这不适用于纯 CSS 或 JS，是否可以这样做：

[![浮动不同](../Images/09a2cb47bbc046253afd76df13d2ac33.png)](https://i.stack.imgur.com/EuG17.png)

现在，带有元素 5、6 和 7 的第二行并没有“真正”像您期望的那样浮动，但里面有一个隐藏的换行符（clearfix）。

纯CSS有什么办法吗？例如，使用`nth-child(4n+4)`和伪选择器喜欢用?`:after`应用换行符`content`

有什么想法吗？有什么聪明的技巧可以让它发挥作用吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-04T20:53:04.007

你可以对每五个元素应用一个 clear 来强制它从左边开始。我认为它在 css3 中看起来像这样：

```
div#wrapper > *:nth-child(4n+1) {
   clear: both;
} 
```

[jsFiddle 演示](http://jsfiddle.net/GeekyEggo/zPGVT/)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-04T22:04:26.967

正如@Arieljuod 所提到的，您可以使用`display: inline-block`而不是`float`. 这样做的美妙之处在于它可以在所有浏览器中运行（包括 IE7+ 以及下面的 hack）并且完全流畅：

```
div {
    ...
    display: inline-block;
    vertical-align: top;
    margin-bottom: 0.3em;
    *display: inline;
    *margin-right: 0.3em;
    *zoom: 1;
    ...   
} 
```

**工作示例：http: [//jsfiddle.net/cRKpD/1/](http://jsfiddle.net/cRKpD/1/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-21T03:07:04.910

我知道我参加聚会迟到了，但有人只是将这个问题与另一个类似的问题联系起来，我意识到这个问题错过了 flexbox 解决方案......
（当问题被问到时，它不在身边）。

添加所需的供应商前缀并删除 CSS 中不必要的前缀

```
.parent {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: -moz-box;
  display: flex;
  -webkit-flex-wrap: wrap;
      -ms-flex-wrap: wrap;
          flex-wrap: wrap;
  -webkit-flex-flow: row wrap;
      -ms-flex-flow: row wrap;
          flex-flow: row wrap;
} 
```

`[example](https://jsfiddle.net/websiter/y7f5vakr/3/embedded/result/#Result)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T21:46:18.463

对于第二个选项，“float:left”使用“display:inline-block”，您甚至可以将它与 text-align:center 结合使用以始终填充 100%，除了最后一行

对于第一个选项，您可以将 1 和 5 放在 onw 容器中，将 2 和 6 放在另一个容器中，依此类推，然后将这些容器浮动

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T22:04:24.333

对于最后一个，您可以用一个容器围绕每组四个。然后将 div 浮动在容器内，如果您不想或不能手动执行此操作，您可以使用 JavaScript 轻松执行此操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-04T22:51:20.087

**第一个选项**

[CSS 多列布局](http://www.w3.org/TR/css3-multicol/)一旦得到充分的标准化和支持，就可以提供一种灵活的方式来做到这一点。

唯一想到的其他 CSS 解决方案，虽然它可能响应不够快，但是将列容器中的元素分组（1 和 5，然后是 2 和 6，然后是 3 和 7，然后是 4）。

除了这两个选项之外，我认为 JS 是必需的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-08T08:04:12.860

有点晚了，但把 1 放在一个额外的分隔符中。然后将 7 放入该分隔符（您必须调整分隔符，使 7 出现在 1 下方）。使用溢出可能有用：在此分隔符中可见。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-30T16:08:16.387

我会像这样使用jQuery来做到这一点：

```
var max_height = divs_cnt = 0;

$("#holder .box").each(function() {
  if (divs_cnt % 4 == 0) {
    $(this).css("clear", "both");
  }
  if (max_height < $(this).height()) {
    $("#holder .box").height($(this).height());
  }
  max_height = $(this).height();
  divs_cnt ++;
})
```

```
#holder{
   width:100%;
   border:1px dotted blue;
   display:inline-block;
}
.box{
   width:100px;
   height:150px;
   background-color:#CCC;
   float:left;
   text-align:center;
   font-size:45px;
   display:inline-block;
}
.one{
   background-color:#0F0;
   height:200px;
}

.two{
   background-color:#0FF;
}

.three{
   background-color:#00F;
}

.four{
   background-color:#FF0;
}

.five{
   background-color:#0a1;
}

.six{
   background-color:#ec5;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="holder">
    <div class="box one">1</div>
    <div class="box two">2</div>
    <div class="box three">3</div>
    <div class="box four">4</div>
    <div class="box five">5</div>
    <div class="box six">6</div>
</div>
```

# android - Android 活动堆栈行为

> ID：11811862
> 
> 赞同：2
> 
> 时间：2012-08-04T20:39:35.253
> 
> 标签：android, stack, lifecycle

我在这里看到了很多关于 android 堆栈的东西，但我就是无法让事情按照我想要的方式工作。在下图中，我对每个转换进行了编号。

![应用导航流程图](../Images/8de8d10dff058fbdf248aa6010e7582e.png)

过渡 8 很容易。我只是使用 Intent.FLAG_ACTIVITY_NO_HISTORY 开始关卡难度选择活动。然后，回击将跳过它并返回到关卡选择活动。

过渡 4 导致了一个问题，因为重新启动后在游戏中的回击最终出现在同一游戏的前一个实例中。我正在调用finish（），所以我不知道为什么它经常卡住，但是在开始游戏活动时使用Intent.FLAG_ACTIVITY_NO_HISTORY可以解决这个问题。但是，这会导致问题，因为转换 6 和 7 不起作用。从任务管理器或图标启动应用程序将始终从主菜单启动。

最大的问题是过渡 5。回家离开应用程序。没有办法捕获它，所以我可以弹出一个对话框询问用户是否真的想退出。所以，这意味着我需要获得转换 6 和 7 才能回到游戏活动。我不知道该怎么做。

我需要知道的是将哪些标志添加到各种意图中，以便转换 4 不会保持游戏活动的多个实例运行，而转换 6 和 7 最终会返回到游戏活动（假设那是他们按下主页按钮的地方）。

# lua - 是否有一种更简单（更有效）的方法来先遍历表值，然后在 Lua 中进行索引？

> ID：11811865
> 
> 赞同：1
> 
> 时间：2012-08-04T20:40:28.863
> 
> 标签：lua, iteration, lua-table

目前，我有以下代码：

```
runtable={}
for _,v in pairs(akeys) do
  if string.match(string.upper(v),string.upper(area)) then
    table.insert(runtable,area)
    break
  end
end

if #runtable = 0 then
  for i,_ in pairs(akeys) do
    if string.match(string.upper(i),string.upper(area)) then
    table.insert(runttable,area)
    end
  end
end 
```

这个脚本的目的是先遍历所有的值，看看 area 变量是否与值匹配。如果是这样，它将是一次性的，因此它将停止循环并继续执行脚本的其余部分（超出`if #runtable = 0`. 如果它未能在值中找到任何内容，则它会再次遍历列表，但这次将索引与区域进行比较，并且每次找到匹配项（部分或完整）时，它会将其添加到运行表中。

有没有更有效的方法来做到这一点？或者这是运行它的最佳方式，不管它看起来多么混乱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T21:54:07.497

```
local rt1, rt2 = {}, {}
for i,v in pairs(akeys) do
  if string.match(string.upper(v),string.upper(area)) then
    table.insert(rt1,area)
    break
  end
  if string.match(string.upper(i),string.upper(area)) then
    table.insert(rt2,area)
  end
end

local runtable = #rt1 > 0 and rt1 or rt2 
```

就丑陋而言并没有很大的节省，但它节省了第二个循环。可悲的是，我知道没有一种魔法可以使这个更漂亮，但这是拥有像 Lua 这样紧凑的语言的权衡之一。

# xml - 从子节点过滤和删除元素值到父节点xslt

> ID：11811867
> 
> 赞同：2
> 
> 时间：2012-08-04T20:40:50.470
> 
> 标签：xml, xslt-1.0, xslcompiledtransform

有人可以告诉我如何删除所有子元素并将它们放在父节点中的逗号分隔行中，同时完全删除`thumbURl`图像`title`元素我已经必须对此文件进行转换，这是 xs：

```
<?xml version="1.0" encoding="UTF-8"?>
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:template match="@* | node()">
     <xsl:copy>
       <xsl:apply-templates select="@* | node()" />
   </xsl:copy>
   </xsl:template>
   <xsl:template match="propertyURL/text()">
     <xsl:call-template name="string-replace-all">
       <xsl:with-param name="text"    select="."/>
       <xsl:with-param name="replace" select="'?ref=0'"/>
       <xsl:with-param name="by"      select="'?ref=1000'"/>
     </xsl:call-template>
   </xsl:template>
   <xsl:template name="string-replace-all">
     <xsl:param name="text"/>
     <xsl:param name="replace"/>
     <xsl:param name="by"/>
     <xsl:choose>
       <xsl:when test="contains($text, $replace)">
         <xsl:value-of select="substring-before($text,$replace)"/>
         <xsl:value-of select="$by"/>
         <xsl:call-template name="string-replace-all">
           <xsl:with-param name="text" select="substring-after($text,$replace)"/>
           <xsl:with-param name="replace" select="$replace"/>
           <xsl:with-param name="by" select="$by"/>
         </xsl:call-template>
       </xsl:when>
        <xsl:otherwise>
         <xsl:value-of select="$text"/>
        </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

这就是我需要修改的数据的样子

```
 <p id="1">
  <amenities>
   <amenity>Air conditioning</amenity>
   <amenity>Lift/elevator</amenity> 
   <amenity>Pets accepted</amenity>
   <amenity>Guarded car park</amenity>
   <amenity>Private parking</amenity>
   <amenity>Garage</amenity>
   <amenity>Limousine service</amenity>
  </amenities>
  <images> 
   <image num="1">
    <imageURL>path/to/image.url1</imageURL>
    <thumbURL>..</thumbURL>  
    <title>..</title>
   </image>
   <image num="2">
    <imageURL>path/to/image.url2</imageURL>
    <thumbURL>..</thumbURL>
     <title>..</title>
    </image>
   </images>
  </p> 
```

这就是我需要对数据做的事情：

```
<p>
 <amenities>
   Air conditioning,Lift/elevator,Pets accepted,Guarded car park,....
 </amenities>
 <images>
  <imageURL>path/to/image.url1</imageURL>
  <imageURL>path/to/image.url2</imageURL>
 </images>
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:51:22.797

像这样的东西怎么样...

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()">
        <xsl:copy>
            <xsl:apply-templates select="node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="amenity">
        <xsl:value-of select="."/>
        <xsl:if test="following-sibling::amenity">,</xsl:if>
    </xsl:template>

    <xsl:template match="image">
        <xsl:apply-templates select="imageURL"/>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<p>
   <amenities>Air conditioning,Lift/elevator,Pets accepted,Guarded car park,Private parking,Garage,Limousine service</amenities>
   <images>
      <imageURL>path/to/image.url1</imageURL>
      <imageURL>path/to/image.url2</imageURL>
   </images>
</p> 
```

# wix - wix复制文件错误

> ID：11811878
> 
> 赞同：1
> 
> 时间：2012-08-04T20:42:38.380
> 
> 标签：wix, wix3.5

我收到此错误：

> 未解决对“产品：*”部分中符号“目录：SQLSERVERDATAPATH”的引用

```
<Property Id="SQLSERVERINSTANCENAME" >
  <RegistrySearch Id="SqlServerInstanceName" Root="HKLM" Key="SOFTWARE\Microsoft\Microsoft SQL Server\Instance Names\SQL" Name="MSSQLSERVER" Type="raw"/>
</Property>

<Property Id="SQLSERVERDATAPATH" >
  <RegistrySearch Id="SqlServerDataPath" Root="HKLM" Key="SOFTWARE\Microsoft\Microsoft SQL Server\[SQLSERVERINSTANCENAME]\Setup" Name="SQLDataRoot" Type="raw"/>
</Property>

<DirectoryRef Id="SomeFolder">
      <Component Id="MDFFileCopyComponent" Guid="4A002555-D939-4DC9-8C23-62747C2BA905">
        <!--<RemoveFile Id="DatabaseFileRemove" Name="MyFile" On="install" Directory="MyCopyDir" />-->
        <CopyFile Id="MDFFileCopy" FileId="MDF" DestinationDirectory="SQLSERVERDATAPATH" />
      </Component>
      <Component Id="LDFFileCopyComponent" Guid="4A002555-D939-4DC9-8C23-62747C2BA905">
        <!--<RemoveFile Id="DatabaseFileRemove" Name="MyFile" On="install" Directory="MyCopyDir" />-->
        <CopyFile Id="LDFFileCopy" FileId="LDF" DestinationDirectory="SQLSERVERDATAPATH" />
      </Component>
</DirectoryRef> 
```

* * *

更新：

```
<DirectoryRef Id="SomeFolder">
  <Component Id="cmpMDF" Guid="066AFD32-D9B4-42A9-AEE1-F1951DAE959F">
    <File Id="MDF" Name="Database.MDF" Source="DatabaseScripts/Database/Database.MDF" KeyPath="yes" ReadOnly="no">
      <CopyFile Id="MDFFileCopy" DestinationProperty="SQLSERVERDATAPATH" />
    </File>
  </Component>
  <Component Id="cmpLDF" Guid="311283B0-A6E8-402D-BB33-D1BEB6EA282B">
    <File Id="LDF" Name="Database.LDF" Source="DatabaseScripts/Database/Database.LDF" KeyPath="yes" ReadOnly="no">
      <CopyFile Id="LDFFileCopy" DestinationProperty="SQLSERVERDATAPATH" />
    </File>
  </Component>
</DirectoryRef> 
```

* * *

日志：

MSI (s) (18:BC) [13:42:32:002]: 执行操作: FileCopy(SourceName=Database.MDF,SourceCabKey=MDF,DestName=Database.MDF,Attributes=512,FileSize=1178468352,PerTick= 32768,,VerifyMedia=1,,,,,CheckCRC=0,,,InstallMode=58982400,HashOptions=0,HashPart1=-67171634,HashPart2=622189464,HashPart3=-328220288,HashPart4=-1777642375,,)

MSI (s) (18:BC) [13:42:32:006]：文件：C:\Program Files\MyApp\Database\Database.MDF；待安装；不会打补丁；没有现有文件

MSI (s) (18:BC) [13:42:32:009]：文件“MDF”的源已压缩安装文件：文件：Database.MDF，目录：C:\Program Files\MyApp\Database\，大小： 1178468352

MSI (s) (18:BC) [13:42:32:015]: 注意: 1: 2318 2: C:\Program Files\MyApp\Database\Database.MDF

MSI (s) (18:BC) [13:42:32:034]: 注意: 1: 2360

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:46:14.203

在你的`<CopyFile>`你包括`DestinationDirectory="SQLSERVERDATAPATH"` 这意味着你还必须有一个`<Directory>`地方`id="SQLSERVERDATAPATH"`。

编辑：看起来你想`DestinationProperty="SQLSERVERDATAPATH"`改用。见[http://wix.sourceforge.net/manual-wix2/wix_xsd_copyfile.htm](http://wix.sourceforge.net/manual-wix2/wix_xsd_copyfile.htm)

# git - 跟踪版本、分支或标签？

> ID：11811880
> 
> 赞同：4
> 
> 时间：2012-08-04T20:43:13.717
> 
> 标签：git, release, development-environment

你如何跟踪你的发布？

目前，我们有2个主要分支机构

*   开发者
*   释放

由几个人进行的持续开发总是发生在`dev`. 一旦完成了足够多的更改，代码就会被合并到`release`中，从中构建并标记。然后部署代码。

**问题：**这很好用，但通常会出现新的错误，这些错误目前在开发分支中处理，已经......继续前进（有时很多）。一旦问题得到解决，提供给客户的新版本通常包含修复和一些新功能。

我想将流程更改为以下内容：

*   当前 <- 当前开发流，最新和最好的，**尚未部署**
*   prod <- 当前在 prod 中，从 dev/1.0.2 合并
*   dev/1.0.0 <- 前段时间构建并交付给 prod
*   dev/1.0.1 <- 对先前构建的错误修复，将被构建并交付给 prod
*   dev/1.0.2 <- 对先前版本的错误修复，将被构建并交付给 prod。**目前在生产中**

你怎么看？这种趋势会奏效并长期可持续吗？我们每年发布大约 15 次，每个版本至少有 2-3 次生产后事故需要修复，所以大致而言，我们每年将有 75 个分支（这是很多，但我想过一段时间他们可以被删除）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T21:16:45.690

如果有几个人致力于新功能（以及现有功能的改进）并且他们都使用 dev 分支来提交他们的代码，那么您永远无法确定 dev 分支是稳定的。如果开发人员使用功能分支来构建新功能，并且仅在功能完成后将其合并到 dev 分支中，那么 dev 分支应该始终是稳定的。（然后特性分支也可以删除。）

我喜欢[`git flow`](http://nvie.com/posts/a-successful-git-branching-model/). 您有一个主（生产）分支和一个开发分支。还有一些功能分支，您可以在其中处理新功能和修补程序分支，用于需要在生产中修复并且不能等到下一个版本的东西。

# java - 安卓短信管理器

> ID：11811885
> 
> 赞同：0
> 
> 时间：2012-08-04T20:43:40.050
> 
> 标签：java, android, sms

我一直在考虑开发一个允许用户免费向该应用程序的其他用户发送短信的应用程序。我想我会使用 SMS Manager API 来完成这个。

我的问题是，SMS Manager API 是否使用手机的短信计划发送短信？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:45:45.187

是的，它确实。

[http://developer.android.com/reference/android/telephony/SmsManager.html](http://developer.android.com/reference/android/telephony/SmsManager.html)

所有“短信”均由运营商执行。如果您想要应用到应用的消息传递，则需要数据。通过运营商或 Wi-Fi。

# google-chrome - 在 chrome 上下文菜单标题中显示 & 符号

> ID：11811886
> 
> 赞同：3
> 
> 时间：2012-08-04T20:43:47.903
> 
> 标签：google-chrome, google-chrome-extension

我一直在开发一个小的 Chrome 扩展，但有一个问题：我似乎无法理解，希望有人能以全新的视角看待它。

目标是创建一个 Chrome 扩展程序，使您能够选择任何给定网站上的文本，并显示一个选项以将选择发送到另一个网站以使用上下文菜单项进行搜索。

我的 manifest.json (v2) 看起来像这样：

```
{
   "name": "simple ext",
   "version": "0.0.1.0",
   "description": "this is a test",
   "background": {
        "scripts": ["js/test.js"]
   },
   "default_locale": "en",
   "manifest_version": 2
} 
```

消息.json：

```
{
"contextMenuTitle": {
        "message": "Search for '$searchStr$'"
        "placeholders":{
            "searchStr": {
                "content": "$1"
            }
        }
}
} 
```

和 js/test.js：

```
chrome.contextMenus.create({
       "title": chrome.i18n.getMessage("contextMenuTitle", "%s"),
       "contexts": ["selection"],
       "onclick" : function(e){
               if(e.selectionText){
                var searchURL = getSearchURL(e.selectionText);
                chrome.tabs.create({"url": searchURL});
                }
            }}); 
```

我遇到的问题是，当我选择“科学与技术”之类的文本时，上下文菜单显示文本“搜索‘科学技术’”，但在 onclick 事件中，我得到了正确的文本（即“科学与技术”）。所以我的搜索工作正常。问题在于文本在上下文菜单中显示为标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T02:40:38.523

我看了一下这个，如果一个错误不存在，你可能想在[http://crbug.com/](http://crbug.com/)上报告一个错误（有一个“快速”的外观并且找不到任何东西）。这个“错误”似乎适用于本地化和上下文菜单标题。如果您只使用一个，则两者都不会显示＆符号，要显示一个似乎您必须使用两个`&&`，然后它将显示为`&`（在您的错误报告中，提到这在文档中也没有解释）。但是由于您无法在显示之前更改 %s 的内容，我不知道您将如何处理它....除非您没有使用 %s 并且每次他们在页。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-04T20:50:38.273

也许它被呈现为html？

试试“ `Science &amp; Technology`”

# sql-server-2008 - 如何避免只有一个参数变化的相同查询的重复？

> ID：11811889
> 
> 赞同：2
> 
> 时间：2012-08-04T20:44:13.207
> 
> 标签：sql-server-2008, tsql, code-duplication

使用 Microsoft SQL Server 2008，我有一个类似于此的 SQL 查询：

```
insert into [Schema].[Table] ([A], [B], [C]) values (@A, 1, @C)
insert into [Schema].[Table] ([A], [B], [C]) values (@A, 2, @C)
                                                         ⁞
insert into [Schema].[Table] ([A], [B], [C]) values (@A, n, @C) 
```

鉴于查询性能无关紧要，有没有办法避免编写*n行代码或至少使查询更紧凑？*如果性能很重要，那会是一个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:46:49.803

这可能有更好的选择，但 SQL Server 2008+ 具有以下语法`VALUES`：

```
insert into [Schema].[Table] ([A], [B], [C]) 
values (@A, 1, @C),
(@A, 2, @C),
(@A, 3, @C),
(@A, 4, @C),
...
(@A, n, @C) 
```

另一种选择可能是加入[数字表](http://web.archive.org/web/20150411042510/http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-numbers-table.html)，或使用[递归 CTE](http://msdn.microsoft.com/en-us/library/ms186243%28SQL.105%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T20:57:07.407

也许您可以针对这种特定情况使用循环，即：

```
declare @counter int
set @counter = 1

while @counter < 10
begin
  insert into [Schema].[Table] ([A], [B], [C]) values (@A, @counter, @C)
  set @counter = @counter + 1
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T02:36:12.867

正如 Oded 所指出的，CTE 可以快速完成以下工作：

```
declare @A as DateTime = GetDate()
declare @C as Float = 3.141459265358979323846264338
declare @N as Int = 10

declare @T as Table ( A DateTime, N Int, C Float )

; with Alicia as (
  select 1 as Number
  union all
  select Number + 1
    from Alicia
    where Number < @N )
  insert into @T
    select @A, Number, @C
      from Alicia
      order by Number

select * from @T order by N 
```

# .htaccess - localhost 未读取 htaccess，httpd AllowOverride All 导致错误

> ID：11811900
> 
> 赞同：1
> 
> 时间：2012-08-04T20:46:45.947
> 
> 标签：.htaccess, apache

我是新手，试图使用 Apache 2.2.22 和 PHP 5.3.15 将我的在线站点复制到本地服务器上。但是，我的本地主机没有读取 .htaccess 文件。我修改了示例 httpd.conf 文件，它正确地注册了以 localhost/index.php 开头的站点。但是，如果我转到 localhost/index，我会收到“未找到”错误。.htaccess 文件可以通过我的 ISP 正常工作（即 mysite.com/index 可以正常工作）。

起初我认为这是我的 .htaccess 重写的问题
`ErrorDocument 404 /404.php`
`RewriteEngine on`
`RewriteRule ^([a-zA-Z0-9]+)(/[a-zA-Z0-9/]+)?$ /$1\.php$2 [L]`

但是我的本地主机也没有读取 404 错误，这让我认为它是 httpd.conf 文件。经过一些研究，当 AllowOverride 未切换到“全部”时，会发生类似的问题。这是我所拥有的。

```
<Directory "D:/mywebfile/webserver/website/public_html">
Options Indexes FollowSymLinks
AllowOverride None
Order allow,deny
Allow from all
</Directory> 
```

当我将其切换到 AllOverride All 时，我收到“内部服务器错误”，并出现以下日志错误

> httpd.exe：无法可靠地确定服务器的完全限定域名，使用 10.0.99.35 作为 ServerName [Sat Aug 04 15:15:55 2012] [notice] Child 9152：子进程正在运行
> [Sat Aug 04 15:15： 55 2012] [通知] Child 9152：获得了启动互斥锁。
> [Sat Aug 04 15:15:55 2012] [notice] Child 9152：启动 64 个工作线程。
> [2012 年 8 月 4 日星期六 15:15:55] [通知] 子 4764：释放了启动互斥体
> [2012 年 8 月 4 日星期六 15:15:56] [通知] 子 4764：所有工作线程已退出。
> [2012 年 8 月 4 日星期六 15:15:56] [通知]子 4764：子进程正在退出
> [2012 年 8 月 4 日星期六 15:15:56] [通知]子 9152：启动线程以侦听端口 80。
> [2012 年 8 月 4 日星期六 15:15:58] [警报] [客户端 127.0.0.1] D:/mywebfile/mywebserver/website/public_html/.htaccess: >无效命令“RewriteEngine”，可能拼写错误或由未包含的模块定义在服务器配置中

我也尝试取消注释

> `#LoadModule rewrite_module modules/mod_rewrite.so`

在 httpd 文件中，但我仍然得到相同的“内部服务器错误”

这似乎是一个简单的问题，但我已经用尽了所有简单的解决方案。任何帮助将不胜感激（并节省我没有拔掉的小头发）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:50:11.673

问题出在`RewriteEngine`命令上，而不是`AllowOverride`. 这只是*激活*了重写命令。

激活 mod_rewrite 是要走的路，你展示的方式。确保您正在编辑正确的 httpd.conf 文件并在重试之前重新启动服务器。

# opencv - 如何使用给定的蒙版覆盖图片

> ID：11811904
> 
> 赞同：1
> 
> 时间：2012-08-04T20:47:37.927
> 
> 标签：opencv, overlay, javacv

我想在给定图像中叠加图像。我创建了一个带有区域的蒙版，我可以在其中放置这张图片：

[图片由 ImageShack.us 托管 http://img560.imageshack.us/img560/1381/roih.jpg](http://img560.imageshack.us/img560/1381/roih.jpg)

问题是，白色区域包含一个黑色区域，我不能在其中放置物体。

我怎样才能有效地计算子图像必须放在哪里？我知道一些功能，例如`PointPolygonTest`. 但这需要很长时间。

编辑：

叠加图像必须放在白色地方的某个地方。例如在蓝色矩形的地方。

[图片由 ImageShack.us 托管 http://img513.imageshack.us/img513/5756/roi2d.jpg](http://img513.imageshack.us/img513/5756/roi2d.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:30:44.377

如果我理解正确，您想将图像放在蒙版中完全白色的区域（与图像一样大）。

在这种情况下，为了获得有效区域，我将使用与要插入的图像大小相同的内核对掩码应用**侵蚀。**侵蚀后，所有有效区域都将变为白色。

但是，您显示的图像没有完全白色的 200*200 区域，所以我一定误解了...

但是，如果您要计算蒙版中黑色最少的区域，您可以应用**模糊**而不是侵蚀，并在模糊蒙版中寻找最大强度像素。

在这两种情况下，您都希望插入子图像，使其中心位于侵蚀/模糊蒙版的位置最大强度像素上。

编辑：

如果您有兴趣找到**距离任何黑色像素最远**的区域来放置子图像，您可以将其中心定义为掩码**距离变换的最大值。**

祝你好运，

# c - 原子写入 64kB

> ID：11811905
> 
> 赞同：1
> 
> 时间：2012-08-04T20:47:51.543
> 
> 标签：c, linux, gcc

我需要在现有文件的中间原子地写入 64 kB 的数据。就是这样，或者什么都不应该写。如何在 Linux/C 中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T20:54:48.193

我认为这是不可能的，或者至少没有任何接口可以保证作为其合同的一部分写入是原子的。换句话说，如果现在有一种原子方式，那是一个实现细节，依靠它保持这种方式是不安全的。您可能需要为您的问题找到另一种解决方案。

但是，如果您只有一个写入进程，并且您的目标是其他进程看到完整的写入或根本没有写入，您可以只在文件的临时副本中进行更改，然后使用`rename`原子替换它。任何已经打开旧文件的文件描述符的阅读器都会看到旧内容；任何按名称新打开它的读者都会看到新内容。任何读者都不会看到部分更新。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T11:43:09.257

有几种方法可以“原子地”修改文件内容。虽然从技术上讲，修改本身从来都不是真正的原子，但有一些方法可以使它对所有其他进程*看起来都是原子的。*

1.  我在 Linux 中最喜欢的方法*是*使用[`fcntl(fd, F_SETLEASE, F_WRLCK)`](http://www.kernel.org/doc/man-pages/online/pages/man2/fcntl.2.html). `fd`只有当它是文件的唯一打开描述符时才会成功；也就是说，没有其他人（甚至这个进程也没有）打开文件。此外，该文件必须由运行该进程的用户拥有，或者该进程必须以 root 身份运行，或者该进程必须具有`CAP_LEASE`内核授予租约的能力。

    `SIGIO`成功后，只要另一个进程打开或截断文件，租用所有者进程就会收到一个信号（默认情况下）。opener 将被内核阻止最多`/proc/sys/fs/lease-break-time`几秒钟（默认为 45 秒），或者直到租约所有者释放或降级租约或关闭文件，以较短者为准。因此，租用所有者有几十秒的时间来完成“原子”操作，而没有任何其他进程能够看到文件内容。

    有几个皱纹需要注意。一是内核允许租用所需的特权或所有权。另一个是对方打开或截断文件只会延迟；租赁所有者无法替换（硬链接或重命名）文件。（嗯，它可以，但打开器将始终打开*原始*文件。）此外，重命名、硬链接和取消链接/删除文件不会影响文件内容，因此完全不受文件租约的影响。

    还要记住，您需要处理生成的信号。你可以`fcntl(fd, F_SETSIG, signum)`用来改变信号。我个人使用一个简单的信号处理程序——一个空主体——来捕获信号，但也有其他方法。

2.  实现*半原子性*的一种可移植方法是使用内存映射，使用[`mmap()`](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html). 想法是使用`memmove()`或类似的方法尽快替换内容，然后使用[`msync()`](http://www.kernel.org/doc/man-pages/online/pages/man2/msync.2.html)将更改刷新到实际存储介质。

    如果文件中的内存映射偏移量是页面大小的倍数，则映射的页面反映了页面缓存。也就是说，以任何方式读取文件的任何其他进程 -`mmap()`或其`read()`派生类 - 将立即看到`memmove()`. `msync()`只需要确保更改也存储在磁盘上，以防系统崩溃 - 它基本上等同于`fsync()`.

    为了避免抢占（由于当前时间片启动而导致内核中断操作）和页面错误，我首先读取映射数据以确保页面在内存中，然后`sched_yield()`在`memmove()`. 读取映射数据应该将页面错误地放入页面缓存，并`sched_yield()`释放剩余的时间片，从而极有可能`memmove()`不会被内核以任何方式中断。（如果您不确定页面已经出现故障，内核可能会`memmove()`分别中断每个页面。您不会在进程中看到这一点，但其他进程会看到修改发生在页面大小的块中。）

    这并不完全是原子的，但它是实用的：它没有给你任何保证，只会让比赛窗口非常非常短；因此我称之为*semi-atomic*。

    请注意，此方法与文件租约兼容。人们可以*尝试*对文件进行写租约，但如果在某个可接受的时间段内（比如一两秒）内没有授予租约，则回退到无租约内存映射。我将使用[`timer_create()`](http://www.kernel.org/doc/man-pages/online/pages/man2/timer_create.2.html)and[`timer_settime()`](http://www.kernel.org/doc/man-pages/online/pages/man2/timer_settime.2.html)创建超时计时器，以及相同的空体信号处理程序来捕获`SIGALRM`信号；这样当超时发生时`fcntl()`被中断（返回`-1`）`errno == EINTR`- 定时器间隔设置为一些小的值（比如 25000000 纳秒或 0.025 秒），因此它会在此之后经常重复，如果初始中断错过则中断系统调用任何原因。

3.  大多数用户空间应用程序创建原始文件的副本，修改副本的内容，然后用副本替换原始文件。

    打开文件的每个进程只会看到完整的更改，而不会看到新旧内容的混合。但是，任何保持文件打开的人都只会看到其原始内容，而不会意识到任何更改（除非他们自己检查）。大多数文本编辑器都会检查，但守护进程和其他进程不会打扰。

    请记住，在 Linux 中，文件名和它的内容是两个不同的东西。您可以打开一个文件，取消链接/删除它，并且只要您打开文件，就可以继续阅读和修改内容。

还有其他方法。我不想建议任何具体的方法，因为最佳方法在很大程度上取决于具体情况：其他进程是否保持文件打开，或者在阅读内容之前是否总是（重新）打开它？原子性是首选还是绝对需要？数据是纯文本、XML 结构还是二进制？

编辑添加：

请注意，无法事先保证文件将被原子地成功修改。理论上没有，实践中也没有。

例如，您可能会遇到磁盘已满的写入错误。或者驱动器可能会在错误的时刻打嗝。我只列出了三种**实用**的方法来使它在典型的用例中**看起来**是原子的。

我最喜欢写租约的原因是我总是可以`fcntl(fd,F_GETLEASE,&ptr)`用来检查租约是否仍然有效。如果不是，那么写入不是原子的。

如果之前已经读取了相同的数据（因此它很可能在页面缓存中），那么高系统负载不太可能导致 64k 写入的租约中断。如果进程具有超级用户权限，您可以使用`setpriority(PRIO_PROCESS,getpid(),-20)`临时将进程优先级提高到最大，同时获取文件租用和修改文件。如果要覆盖的数据刚刚被读取，极不可能移动到swap；因此也不应该发生交换。

换句话说，虽然租用方法很可能失败，但实际上它几乎总是成功的——即使没有本附录中提到的额外技巧。

就个人而言，我只是检查修改是否不是原子的，在修改之后，在/`fcntl()`之前使用调用（确保数据命中磁盘以防断电）；这给了我一个绝对可靠、简单的方法来检查修改是否是原子的。`msync()``fsync()`

对于配置文件和其他敏感数据，我也推荐 rename 方法。（实际上，我更喜欢用于 NFS 安全文件锁定的硬链接方法，这相当于同一件事，但使用临时名称来检测命名竞争。）但是，它的问题是任何保持文件打开的进程都必须检查并自愿重新打开文件以查看更改的内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-04T20:54:34.993

如果没有抽象层，磁盘写入不能是原子的。如果写入中断，您应该保留日志并恢复。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T21:00:03.653

据我所知，低于 PIPE_BUF 大小的写入是原子的。但是我从不依赖这个。如果访问文件的程序是你自己写的，可以使用[flock()](http://linux.die.net/man/2/flock)实现独占访问。该系统调用在文件上设置一个锁，并允许其他知道该锁的进程访问或不访问。

# jquery-mobile - jquery mobile 背景没有完全扩展到页面末尾

> ID：11811907
> 
> 赞同：0
> 
> 时间：2012-08-04T20:47:57.260
> 
> 标签：jquery-mobile

我的 jquery 移动背景确实延伸到了页面的末尾。我正在移动 Safari 中的 iphone 上对此进行测试。这个白条没有出现在我的桌面上。当我在 Google Nexus 的浏览器上测试它时，同样的问题也不会发生。任何想法为什么会发生这种情况？

我在我的 css 文件中使用这行代码来扩展背景：

```
 [data-role=page]{height: 100% !important; position:relative !important;} 
```

![在此处输入图像描述](../Images/71232511569cfdbbbdf8c7ef8ab53dda.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:54:15.820

根据您是否要将其设置为 HTML 文档的高度或视口的高度（初始可视区域），您可以尝试：

```
$('#container').css('height', $(window).height());   // returns height of browser viewport
$('#container').css('height', $(document).height()); // returns height of HTML document 
```

# java - 忽略透明部分的图像的二维碰撞检测

> ID：11811908
> 
> 赞同：0
> 
> 时间：2012-08-04T20:47:57.927
> 
> 标签：java, 2d, transparency, collision-detection

所以我决定查找一些碰撞检测，但我一直无法找到有关两幅图像之间 2d 碰撞检测的正确信息，包括如何正确避免检测图像的透明区域，但我确实找到了一篇我自己附上的帖子到，但问题是我并不真正理解这个帖子，也不明白他为什么要做这些事情......

这是有问题的帖子：[https ://stackoverflow.com/posts/336615/revisions](https://stackoverflow.com/posts/336615/revisions)

所以首先我想问一下这个解决方案是否真的是一个好的/合适的，或者我是否应该去别处看看。

其次，我想知道，在他的帖子中，他提到使用整数数组，而不是二维数组，设置 1 和 0 来决定像素是否透明，但我真的不知道我应该如何实现这个。起初我认为可以通过形成一串 1 和 0 并将其转换为 Long 来实现，但即使图像宽度仅为 25，Long 也会变得......太长......

我也试过这个，但没有运气，因为代码不适用于这个数组：

```
 long[] array = new long[30*30]; // height * width of the image
    int x = 0;
    int y = 0;

for(int i = 0; i<30*30; i++){
    if(image.getRGB(x,y) == 0){
         array[i] = 0;
    }
    else{ array[i] = 1; }

    x++;
    if (x==30){
         y++;
         x=0;
    } 
} 
```

第三，我希望有人可以解释整个过程以及为什么他所做的事情是必要的。顺便说一句，我确实知道这些位操作员是如何工作的！换句话说，我不明白他在代码中做所有事情的思路/动机，我想了解这一切！

我现在真的不知道该怎么做嘿嘿...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:37:20.247

对于两个操作数中相应位为真的每个位，[按位与运算](http://en.wikipedia.org/wiki/Bitwise_operation#AND)( )的结果为真 (1)，否则为假 (0)。`&`

他使用的想法是创建一个图像版本（掩码），其中原始图像中的每个不透明像素都存储为“1”位，每个透明像素都存储为“0”位。这些被打包成一个整数，可以通过一个 AND 操作针对另一个图像的掩码进行测试（在 AND 之前，他计算两个图像之间的水平距离并在必要时移动一个掩码）。

例如，假设我们有以下两个 4x1 像素的图像：

```
5, 0, 0, 5
      8, 8, 8, 8 
```

尽管出于实用目的我将它们放在不同的行上，但您应该将它们视为在同一行上，因此左图像的最后两个像素与右图像的前两个像素重叠。

以二进制表示形式查看时，行的掩码为：

```
1001
1111 
```

左右图像之间的距离为-2，因此我们将第一个掩码向左移动 2 位：

```
1001 << 2 => 100100 
```

所以现在我们有了这些面具：

```
100100
001111 
```

与这些相加给我们：

```
000100 
```

非零结果告诉我们发生了碰撞。

# javascript - 通过代码+敲除更新数组中的值

> ID：11811910
> 
> 赞同：0
> 
> 时间：2012-08-04T20:48:24.570
> 
> 标签：javascript, jquery, knockout.js, knockout-mapping-plugin, knockout-2.0

我有一个使用模板填充可观察数组的表，我需要为该表中的每一行更新一个带有 Text 的列，同时更新模型。

谢谢！

示例：http: [//jsfiddle.net/pdelacruz/aqYvW/6/](http://jsfiddle.net/pdelacruz/aqYvW/6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:54:08.737

佩德罗

我不认为您收藏中的项目的属性是可观察的。默认情况下，映射插件不这样做。

您必须使用集合中每个项目的创建回调来实现映射，并返回具有所需可观察属性的对象

# coffeescript - ST2 Mocha CoffeeScript 符号

> ID：11811912
> 
> 赞同：0
> 
> 时间：2012-08-04T20:48:29.237
> 
> 标签：coffeescript, sublimetext2, mocha.js

任何人都知道是否有办法通过 Sublime Text 2 符号列表浏览 Mocha 测试（在 CoffeeScript 中）？理想情况下会有一个插件，但我可以编辑我的 CoffeeScript 插件来查找`describe`和`it`. 我不知道整个 tmLanguage 是如何工作的，有人可以告诉我怎么做或者让我知道要添加的代码。

使用 ST2 符号列表导航我的睾丸会非常棒！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:14:40.823

虽然 CoffeeScript 在 ST2 中有很好的着色支持，但在 Go To Symbol 面板中却很糟糕。

我创建了一个原始插件的分支，其中（以及其他一些外观更改）它显示了文件中定义的所有类和函数，以及一些已知的方法调用，例如'describe'、'it' for Mocha 和' Express 的 app.get'、'app.post' 等。

目前它看起来像这样：

![测试样品](../Images/defc1ae8c6938d761997dd3232797dba.png)

![班级样本](../Images/e25c25799d255ea67d21cc1a689d96d6.png)

[您可以在 GitHub 上](https://github.com/ashtuchkin/CoffeeScript-Sublime-Plugin/compare/correct-goto-symbols)查看更改差异。

要安装它，要么[下载包](https://github.com/ashtuchkin/CoffeeScript-Sublime-Plugin/zipball/correct-goto-symbols)并将其内容解压缩到你的 Packages/CoffeeScript 目录，要么 git clone 它（不要忘记事先关闭 ST2）：

```
cd <user directory>/Packages
rm -r CoffeeScript
git clone -b correct-goto-symbols git://github.com/ashtuchkin/CoffeeScript-Sublime-Plugin.git CoffeeScript 
```

我还将它作为拉取请求添加到原始插件作者，所以希望它很快就会出现在标准包中。

# c++ - 如何使用模板 在 C++ 中

> ID：11811913
> 
> 赞同：0
> 
> 时间：2012-08-04T20:48:30.240
> 
> 标签：c++, templates

我正在实现 AVL 树并试图了解模板的工作原理，以便可以在树中存储不同类型的数据。现在我只能存储 int，但如果需要，我希望能够存储其他类型。我将如何使用模板呢？

现在这是我的课程：

```
struct Avlnode{
int data;
int balfact;
Avlnode *left;
Avlnode *right;
};

class Avltree{
public:
Avltree();
~Avltree( );
Avlnode* insert(int i, bool* j);
static Avlnode* buildtree ( Avlnode *root, int data, bool *h ) ;
void display( Avlnode *root );
Avlnode* deldata ( Avlnode* root, int data, bool *h );
static Avlnode* del ( Avlnode *node, Avlnode* root, bool *h );
static Avlnode* balright ( Avlnode *root, bool *h );
static Avlnode* balleft ( Avlnode* root, bool *h );
void setroot ( Avlnode *avl );
static void deltree ( Avlnode *root );
private:
Avlnode *root;
int items;
}; 
```

它们被定义为：

```
Avltree::Avltree( ){
root = NULL;
items = 0;
}

Avlnode* Avltree::insert( int data, bool *h ){
root = buildtree( root, data, h );
return root;
}

Avlnode* Avltree::buildtree( Avlnode *root, int data, bool *h ){
Avlnode *node1, *node2;

if( root == NULL ){
    root = new Avlnode;
    root -> data = data;
    root -> left = NULL;
    root -> right = NULL;
    root -> balfact = 0;
    *h = true;
    return( root );
}
if ( data < root -> data ){
    root -> left = buildtree( root -> left, data, h );

    // If left subtree is higher
    if( *h ){
        switch ( root -> balfact ){
            case 1:
                node1 = root -> left;
                if ( node1 -> balfact == 1 ){
                    //cout << "\nRight rotation.";
                    root -> left = node1 -> right;
                    node1 -> right = root;
                    root -> balfact = 0;
                    root = node1;
                }
                else{
                    //cout << "\nDouble rotation, left then right." ;
                    node2 = node1 -> right;
                    node1 -> right = node2 -> left;
                    node2 -> left = node1;
                    root -> left = node2 -> right;
                    node2 -> right = root;
                    if ( node2 -> balfact == 1 )
                        root -> balfact = -1;
                    else
                        root -> balfact = 0;
                    if ( node2 -> balfact == -1 )
                        node1 -> balfact = 1;
                    else
                        node1 -> balfact = 0;
                    root = node2;
                }
                root -> balfact = 0;
                *h = false;
                break;

            case 0:
                root -> balfact = 1;
                break;
            case -1:
                root -> balfact = 0;
                *h = false;
        }
    }
}

if ( data > root -> data ){
    root -> right = buildtree ( root -> right, data, h );

    if ( *h ){
        switch ( root -> balfact ){
            case 1:
                root -> balfact = 0;
                *h = false;
                break;
            case 0:
                root -> balfact = -1;
                break;
            case -1:
                node1 = root -> right;
                if ( node1 -> balfact == -1 ){
                    //cout << "\nLeft rotation.";
                    root -> right = node1 -> left;
                    node1 -> left = root;
                    root -> balfact = 0;
                    root = node1;
                }
                else{
                    //cout << "\nDouble rotation, right then left.";
                    node2 = node1 -> left;
                    node1 -> left = node2 -> right;
                    node2 -> right = node1;
                    root -> right = node2 -> left;
                    node2 -> left = root;
                    if ( node2 -> balfact == -1 )
                        root -> balfact = 1;
                    else
                        root -> balfact = 0;
                    if ( node2 -> balfact == 1 )
                        node1 -> balfact = -1;
                    else
                        node1 -> balfact = 0;
                    root = node2;
                }
                root -> balfact = 0;
                *h = false;
        }
    }
}
return ( root );
}

void Avltree::display ( Avlnode* root ){
if ( root != NULL ){
    display ( root -> left );
    cout << root -> data << "\t";
    display ( root -> right );
}
}

Avlnode* Avltree::deldata ( Avlnode *root, int data, bool *h ){
Avlnode *node;
if ( root -> data == 13 )
    cout << root -> data ;
if ( root == NULL ){
    //cout << "\nNo such data.";
    return ( root );
}
else{
    if ( data < root -> data ){
        root -> left = deldata ( root -> left, data, h ) ;
        if ( *h )
            root = balright ( root, h ) ;
    }
    else{
        if ( data > root -> data ){
            root -> right = deldata ( root -> right, data, h ) ;
            if ( *h )
                root = balleft ( root, h );
        }
        else{
            node = root;
            if ( node -> right == NULL ){
                root = node -> left ;
                *h = true ;
                delete ( node ) ;
            }
            else{
                if ( node -> left == NULL ){
                    root = node -> right ;
                    *h = true ;
                    delete ( node ) ;
                }
                else{
                    node -> right = del ( node -> right, node, h ) ;
                    if ( *h )
                        root = balleft ( root, h ) ;
                }
            }
        }
    }
}
return ( root ) ;
}

Avlnode* Avltree :: del ( Avlnode *succ, Avlnode *node, bool *h ){
Avlnode *temp = succ ;

if ( succ -> left != NULL ){
    succ -> left = del ( succ -> left, node, h ) ;
    if ( *h )
        succ = balright ( succ, h ) ;
}
else{
    temp = succ ;
    node -> data = succ -> data ;
    succ = succ -> right ;
    delete ( temp ) ;
    *h = true ;
}
return ( succ ) ;
}

Avlnode* Avltree :: balright ( Avlnode *root, bool *h ){
Avlnode *temp1, *temp2 ;
switch ( root -> balfact ){
    case 1 :
        root -> balfact = 0 ;
        break ;
    case 0 :
        root -> balfact = -1 ;
        *h  = false ;
        break ;
    case -1 :
        temp1 = root -> right ;
        if ( temp1 -> balfact <= 0 ){
            cout << "\nLeft rotation." ;
            root -> right = temp1 -> left ;
            temp1 -> left = root ;
            if ( temp1 -> balfact == 0 ){
                root -> balfact = -1 ;
                temp1 -> balfact = 1 ;
                *h = false ;
            }
            else{
                root -> balfact = temp1 -> balfact = 0 ;
            }
            root = temp1 ;
        }
        else{
            cout << "\nDouble rotation, right then left." ;
            temp2 = temp1 -> left ;
            temp1 -> left = temp2 -> right ;
            temp2 -> right = temp1 ;
            root -> right = temp2 -> left ;
            temp2 -> left = root ;
            if ( temp2 -> balfact == -1 )
                root -> balfact = 1 ;
            else
                root -> balfact = 0 ;
            if ( temp2 -> balfact == 1 )
                temp1 -> balfact = -1 ;
            else
                temp1 -> balfact = 0 ;
            root = temp2 ;
            temp2 -> balfact = 0 ;
        }
}
return ( root ) ;
}

Avlnode* Avltree::balleft ( Avlnode *root, bool *h ){
Avlnode *temp1, *temp2 ;
switch ( root -> balfact ){
    case -1 :
        root -> balfact = 0 ;
        break ;

    case 0 :
        root -> balfact = 1 ;
        *h = false ;
        break ;

    case 1 :
        temp1 = root -> left ;
        if ( temp1 -> balfact >= 0 ){
            cout << "\nRight rotation." ;
            root -> left = temp1 -> right ;
            temp1 -> right = root ;

            if ( temp1 -> balfact == 0 ){
                root -> balfact = 1 ;
                temp1 -> balfact = -1 ;
                *h = false ;
            }
            else{
                root -> balfact = temp1 -> balfact = 0 ;
            }
            root = temp1 ;
        }
        else{
            cout << "\nDouble rotation, left then right." ;
            temp2 = temp1 -> right ;
            temp1 -> right = temp2 -> left ;
            temp2 -> left = temp1 ;
            root -> left = temp2 -> right ;
            temp2 -> right = root ;
            if ( temp2 -> balfact == 1 )
                root -> balfact = -1 ;
            else
                root -> balfact = 0 ;
            if ( temp2-> balfact == -1 )
                temp1 -> balfact = 1 ;
            else
                temp1 -> balfact = 0 ;
            root = temp2 ;
            temp2 -> balfact = 0 ;
        }
}
return ( root ) ;
}

void Avltree::setroot ( Avlnode *avl ){
root = avl ;
}
Avltree::~Avltree( ){
deltree ( root ) ;
}

void Avltree::deltree ( Avlnode *root ){
if ( root != NULL ){
    deltree ( root -> left ) ;
    deltree ( root -> right ) ;
}
delete ( root ) ;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T20:53:34.350

首先制作`Avlnode`一个类模板：

```
template<typename T>
struct Avlnode{
  typedef value_type T;
  value_type data;
  value_type balfact;
  Avlnode<T> *left;
  Avlnode<T> *right;
}; 
```

然后，制作`Avltree`一个类模板：

```
template <typename T>
class Avltree{
public:
typedef T value_type;
typedef node_type Avlnode<T>;
Avltree();
~Avltree( );
node_type* insert(const T& i, bool* j);
static node_type* buildtree ( node_type*root, const T& data, bool *h ) ;
void display( node_type*root );
node_type* deldata ( node_type* root, const T& data, bool *h );
static node_type* del ( node_type* node, node_type* root, bool *h );
....
private:
node_type *root;
T items;
}; 
```

然后，实例化：

```
Avltree<float> treeF;
bool smth = true;
typename AvlTree<float>::node_type* node = treeF.insert(0.5, &smth); 
```

尽管我建议通过`bools`引用而不是指针传递。

# c# - C# - 何时进行线程安全调用

> ID：11811915
> 
> 赞同：0
> 
> 时间：2012-08-04T20:49:11.330
> 
> 标签：c#, winforms, multithreading

我有一个大型项目，我正在使用 C# 进行开发，C# 是一种我相当陌生的语言。该项目严重依赖 GUI，并且显示了大量数据。最近，我们在以前从未出现过的地方遇到了跨线程错误。这些发生的错误很容易解决：

```
if (logListView.InvokeRequired)
{
      logListView.BeginInvoke(new MethodInvoker(
          () => logListView.Items[logListView.Items.Count - 1].EnsureVisible()));
}
else
{
      logListView.Items[logListView.Items.Count - 1].EnsureVisible();
} 
```

然而，我的问题是：**每次访问 Windows 窗体对象时都需要应用该方法**吗？有特殊情况吗？我没有使用多线程，所以据我所知，这些错误发生在我的控制之外。例如，我无法控制哪段代码由哪个线程执行：C# 自己完成所有这些工作（我不太了解该语言）。为修改 GUI 的每一行实现一个 if 语句似乎非常令人讨厌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:51:05.123

如果您从 UI 线程外部（即从您产生的任何线程）访问 winform 组件，您只需要该代码。核心库中有一些组件会产生线程，例如`FileSystemWatcher`. Winforms 不只是自己产生线程，它只有 UI 线程。由于您编写的代码或您使用的库，会出现任何跨线程问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:59:53.583

您只需要在代码不在 GUI 线程中运行时调用代码。

> 我无法控制哪段代码由哪个线程执行

是的你可以。在 GUI 线程中运行哪些代码并没有什么不可预测的，您只需要找出规则是什么。

在您的代码中用完 GUI 线程的唯一代码是作为异步回调运行的方法，例如计时器或异步 Web 请求。（虽然在 GUI 线程中`System.Windows.Forms.Timer`运行事件。）`Tick`

（还有其他方法可以在另一个线程中运行代码，但是您会意识到使用多线程。）

# algorithm - 如何计算两个单词之间的“最短距离”？

> ID：11811918
> 
> 赞同：3
> 
> 时间：2012-08-04T20:49:51.567
> 
> 标签：algorithm, data-structures, graph-theory

最近我有一个采访，我被要求写一个算法来找到从一个特定单词到给定单词的最小 1 个字母变化，即 Cat->Cot->Cog->Dog

我不希望问题的解决方案只是指导我如何在此算法中使用 BFS？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T01:56:01.813

根据这个拼字游戏列表，猫和狗之间的最短路径是：['CAT', 'COT', 'COG', 'DOG']

```
from urllib import urlopen

def get_words():
    try:
        html = open('three_letter_words.txt').read()
    except IOError:
        html = urlopen('http://www.yak.net/kablooey/scrabble/3letterwords.html').read()
        with open('three_letter_words.txt', 'w') as f:
            f.write(html)

    b = html.find('<PRE>') #ignore the html before the <pre>
    while True:
        a = html.find("<B>", b) + 3
        b = html.find("</B>", a)
        word = html[a: b]
        if word == "ZZZ":
            break
        assert(len(word) == 3)
        yield word

words = list(get_words())

def get_template(word):
    c1, c2, c3 = word[0], word[1], word[2]
    t1 = 1, c1, c2
    t2 = 2, c1, c3
    t3 = 3, c2, c3
    return t1, t2, t3

d = {}
for word in words:
    template = get_template(word)
    for ti in template:
        d[ti] = d.get(ti, []) + [word] #add the word to the set of words with that template

for ti in get_template('COG'):
    print d[ti]
#['COB', 'COD', 'COG', 'COL', 'CON', 'COO', 'COO', 'COP', 'COR', 'COS', 'COT', 'COW', 'COX', 'COY', 'COZ']
#['CIG', 'COG']
# ['BOG', 'COG', 'DOG', 'FOG', 'HOG', 'JOG', 'LOG', 'MOG', 'NOG', 'TOG', 'WOG']

import networkx
G = networkx.Graph()

for word_list in d.values():
    for word1 in word_list:
        for word2 in word_list:
            if word1 != word2:
                G.add_edge(word1, word2)

print G['COG']
#{'COP': {}, 'COS': {}, 'COR': {}, 'CIG': {}, 'COT': {}, 'COW': {}, 'COY': {}, 'COX': {}, 'COZ': {}, 'DOG': {}, 'CON': {}, 'COB': {}, 'COD': {}, 'COL': {}, 'COO': {}, 'LOG': {}, 'TOG': {}, 'JOG': {}, 'BOG': {}, 'HOG': {}, 'FOG': {}, 'WOG': {}, 'NOG': {}, 'MOG': {}}

print networkx.shortest_path(G, 'CAT', 'DOG')
['CAT', 'OCA', 'DOC', 'DOG'] 
```

作为奖励，我们可以走得最远：

```
print max(networkx.all_pairs_shortest_path(G, 'CAT')['CAT'].values(), key=len)
#['CAT', 'CAP', 'YAP', 'YUP', 'YUK'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T20:59:53.847

乍一看，我想到了[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)，但你需要使用 BFS。所以我认为你应该从构建树开始。给定的单词应该是根，然后下一个节点是首字母改变的单词。下一个节点已更改第二个字母。当您构建图形时，您使用 BFS，当您发现新单词时存储路径长度。在算法结束时选择最小距离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T21:07:38.030

1.  从路径集中的起始词开始。

2.  如果您的路径集中任何路径的结束词是所需的词，请停止，该路径就是所需的路径。

3.  将路径集中的每条路径替换为以该路径开头但长一个字的所有可能路径。

4.  转到第 2 步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T05:07:09.090

如果我们开始以广度方式构建从目标词到源词的有向无环图，并且我们进行字典查找以验证在添加词时是否在树中较早看到过该词，那么源词的第一次出现，应该给出从“目标词”到“源词”的反向最短路径。

由此我们可以打印从“源”到“目标”的路径

# google-app-engine - 查询 user_ID 后打印 appengine 数据存储区的 key_name

> ID：11811925
> 
> 赞同：0
> 
> 时间：2012-08-04T20:51:06.470
> 
> 标签：google-app-engine, primary-key

以下代码的最后一行抛出错误“AttributeError: 'Notebooks' object has no attribute 'key_name'”。我需要为我的应用程序生成 key_name 结果，但不知道该怎么做。

```
from google.appengine.api import users
from models import Notebooks
user = users.get_current_user()
user_ID = user.user_id()

print user_ID

notebook = db.Query(Notebooks)
notebook.filter('user =', user_ID)
notebook.filter('deleteRequested =', False)
pages = notebook.fetch(limit=100)

for page in pages:
   print page.user
   print page.key_name 
```

我的数据存储实体如下所示：

```
Edit Entity
Entity Kind  Notebooks
Entity Key   aghkZXZ-ZGVtb3IUCxIJTm90ZWJvb2tzIgVSb2dlcgw
Key Name     Roger
deleteRequested (bool)  

moreinfo (string)   

user 185804764220139124118 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:28:38.053

您需要使用 page.key().name()。（假设键名在实体键上）

请参阅[https://developers.google.com/appengine/docs/python/datastore/keyclass](https://developers.google.com/appengine/docs/python/datastore/keyclass)

干杯，罗伯

# sql-server - 尝试根据服务器选择数据库

> ID：11811927
> 
> 赞同：1
> 
> 时间：2012-08-04T20:51:11.503
> 
> 标签：sql-server

谁能告诉我为什么这不起作用？

```
if ((select @@servername) = 'ServerA')
begin
    use DatabaseA
    select top 5 * from dbo.SignUPRequest
end
else if ((select @@servername) = 'ServerB')
begin
    use DatabaseB
    select top 5 * from dbo.SignUPRequest
end 
```

当我在 ServerA 上运行它时，我收到一条消息，指出 DatabaseB 在 ServerA 上不存在，但它不存在，但我不明白为什么如果第二个 if 评估为 false，它为什么要尝试读取。

> 消息 911，级别 16，状态 1，第 8 行
> 数据库“DatabaseB”不存在。确保输入的名称正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T21:11:49.973

代码在运行之前被解析。当它被解析时，SQL Server 检查它是否可以访问代码中的所有内容，它无法访问其他服务器上存在的数据库，因此运行代码的解析步骤失败。结果，您会收到显示的错误消息。

如果你想解决这个问题，你可以将 IF 块中的代码作为动态执行的代码（我总是觉得这有点像 hack/workaround）。

```
DECLARE @sql NVARCHAR(4000);
if ((select @@servername) = 'ServerA')
begin
    SET @sql = 'use DatabaseA; select top 5 * from dbo.SignUPRequest;'
end
else if ((select @@servername) = 'ServerB')
begin
    SET @sql = 'use DatabaseB; select top 5 * from dbo.SignUPRequest'
end

EXEC (@sql) 
```

因此，这里发生的情况是，您推迟了使用适当数据库为服务器运行时间的代码的解析和运行，就像最后的 EXEC 语句所做的那样。

**更新**

根据下面的附加评论，您还可以将其重写为：

```
DECLARE @sql NVARCHAR(4000);
if ((select @@servername) = 'ServerA')
begin
    select top 5 * from DatabaseA.dbo.SignUPRequest;
end
else if ((select @@servername) = 'ServerB')
begin
    select top 5 * from DatabaseB.dbo.SignUPRequest;
end 
```

因此，`USE <database-name>`您还可以在 select 语句中更全面地限定表的名称，而不是在开头添加 a。如果你只有一行 SQL 来处理这可能会更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T21:10:11.027

您在编译查询时收到错误，而不是在执行时。您可以执行语句以`exec`将它们分批获取，仅当数据库存在时才编译。

```
if ((select @@servername) = 'ServerA')
begin
   exec(N'use DatabaseA
          select top 5 * from dbo.SignUPRequest')
end
else if ((select @@servername) = 'ServerB')
begin
   exec(N'use DatabaseB
          select top 5 * from dbo.SignUPRequest')
end 
```

# ios - 如何将滚动视图中的图像上传到 Web 服务器？

> ID：11811928
> 
> 赞同：0
> 
> 时间：2012-08-04T20:51:19.413
> 
> 标签：ios, uiscrollview

我有一个 iOS 应用程序，它在滚动视图（相机图片）中有一系列图像。我希望能够将这些单独或集体发布到一个 url 上。

有人可以向我指出一个示例或一些示例代码可以帮助我入门吗？

非常感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T10:00:41.393

在这种情况下，如果您设置服务器（我现在不怎么做，因为我使用了 quickblox - 现成的解决方案）尝试将 GET 请求发送到服务器。您可以这样尝试：（来源 -[如何在 iOS 中发送 Get 请求？](https://stackoverflow.com/questions/6212453/how-to-send-a-get-request-in-ios)）

```
 NSString *getString = [NSString stringWithFormat:@"parameter=%@",yourvalue];
 NSData *getData = [getString dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

 NSString *getLength = [NSString stringWithFormat:@"%d", [getData length]];

 NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];

 [request setURL:[NSURL URLWithString:@"https:yoururl"]];

  [request setHTTPMethod:@"GET"];

  [request setValue:postLength forHTTPHeaderField:@"Content-Length"];

  [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

  [request setHTTPBody:getData];

  self.urlConnection = [[[NSURLConnection alloc] initWithRequest:request delegate:self] autorelease];

  NSAssert(self.urlConnection != nil, @"Failure to create URL connection.");

  // show in the status bar that network activity is starting
  [UIApplication sharedApplication].networkActivityIndicatorVisible = YES; 
```

对于更高级的偏好，我建议您尝试学习[http://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T22:01:23.310

为此，您可以创建文件服务器或使用其他maded。看这个： http: [//quickblox.com/](http://quickblox.com/) - 他们的服务器有 blob 和 ios api，所以下载|上传文件简单地用代码实现。首先，您需要注册您的帐户，然后注册您的应用程序。（[https://admin.quickblox.com/signin](https://admin.quickblox.com/signin)）（这并不难，几分钟）然后，使用网站上的说明将 Quickblox 身份验证添加到您的应用程序，然后使用 QBBlobs下载照片。祝你好运！

# python - 为什么这里会发生递归？

> ID：11811935
> 
> 赞同：6
> 
> 时间：2012-08-04T20:52:45.973
> 
> 标签：python, class, recursion, decorator

最近我阅读[了一篇关于如何在 Python 中制作单例的有趣讨论](https://stackoverflow.com/questions/6760685/creating-a-singleton-in-python)。其中一个解决方案是一个[棘手的装饰器，在其代码中定义一个类作为装饰类的替代品](https://stackoverflow.com/a/6810621/862380)：

```
def singleton(class_):
    class class_w(class_):
        _instance = None
        def __new__(class2, *args, **kwargs):
            if class_w._instance is None:
                class_w._instance = super(class_w, class2).__new__(class2, *args, **kwargs)
                class_w._instance._sealed = False
            return class_w._instance
        def __init__(self, *args, **kwargs):
            if self._sealed:
                return
            super(class_w, self).__init__(*args, **kwargs)
            self._sealed = True
    class_w.__name__ = class_.__name__
    return class_w

@singleton
class MyClass(object):
    def __init__(self, text):
        print text
    @classmethod
    def name(class_):
        print class_.__name__

x = MyClass(111)
x.name()
y = MyClass(222)
print id(x) == id(y) 
```

输出是：

```
111     # the __init__ is called only on the 1st time
MyClass # the __name__ is preserved
True    # this is actually the same instance 
```

据说，如果我们使用`super(MyClass, self).__init__(text)`inside `__init__`of `MyClass`，我们就会进入**递归**。

我测试了，确实发生了递归。但是，据我所知，`MyClass`继承`object`，所以`super(MyClass, self)`应该只是`object`，但事实证明`super(MyClass, self)`是`__main__.MyClass`

您能否逐步解释一下这里发生了什么，以便我了解递归发生的原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T21:08:20.277

问题是，通过编写`super(MyClass, self).__init__(text)`，您是说使用 super 相对于`MyClass`当时所指的任何类`super`。但是装饰器替换`MyClass`为它自己的一个子类。因此，当您调用原始`__init__`方法时，`MyClass`实际上是指定义执行方法的类的子类。

一步一步说，我将调用原始类（如源代码中所写）`OrigMyClass`和结果版本（在装饰器之后）`DecMyClass`。我将`MyClass`仅用作变量，因为它的含义在执行过程中会发生变化。

1.  您在 上定义一个`__init__`方法`OrigMyClass`，但该`__init__`方法调用`super(MyClass, self)`，而不是`super(OrigMyClass, self)`。因此，实际调用的方法取决于调用方法时`MyClass`所指*的内容*。的值`MyClass`在执行时像任何其他变量一样被查找；将它放在`super`调用或`__init__`方法中不会神奇地将它绑定到您编写它时碰巧所在的类；函数中的变量是在调用它们时计算的，而不是在定义它们时计算的。

2.  装饰器运行。装饰器定义了一个新类`DecMyClass`作为`OrigMyClass`. `DecMyClass`定义一个`__init__`调用`super(DecMyClass, self)`.

3.  装饰器运行后，名称`MyClass`绑定到类`DecMyClass`。请注意，这意味着`super(MyClass, self)`稍后执行调用时，它将执行`super(DecMyClass, self)`.

4.  当你这样做时`MyClass(111)`，你实例化了一个`DecMyClass`. `DecMyClass.__init__`来电`super(DecMyClass, self).__init__`。这执行`OrigMyClass.__init__`.

5.  `OrigMyClass.__init__`来电`super(MyClass, self).__init__`。因为`MyClass`指的是`DecMyClass`，这个是一样的`super(DecMyClass, self).__init__`。但是`DecMyClass`是 的子类`OrigMyClass`。关键是因为`MyClass`引用`DecMyClass`，`OrigMyClass`实际上是*在自己的子类上*调用super 。

6.  因此`super(DecMyClass, self).__init__`再次调用`OrigMyClass.__init__`，它再次调用自身，以此类推到无穷大。

效果和这段代码一样，可能会让执行路径更加明显：

```
>>> class Super(object):
...     def __init__(self):
...         print "In super init"
...         super(Sub, self).__init__()
>>> class Sub(Super):
...     def __init__(self):
...         print "In sub init"
...         super(Sub, self).__init__() 
```

注意`Super`调用`super(Sub, self)`. 它试图调用超类方法，但它试图调用`Sub`. `Sub`is的超类`Super`，所以`Super`最终再次调用它自己的方法。

编辑：只是为了澄清您提出的名称查找问题，这是另一个具有相同结果的稍微不同的示例：

```
>>> class Super(object):
...     def __init__(self):
...         print "In super init"
...         super(someClass, self).__init__()
>>> class Sub(Super):
...     def __init__(self):
...         print "In sub init"
...         super(Sub, self).__init__()
>>> someClass = Sub 
```

这应该清楚地表明`super`（第一个参数，here `someClass`）的类参数在任何方面都不是特殊的。它只是一个普通的名字，在普通的时候，也就是在`super`调用执行的时候，以普通的方式查到它的值。如本例所示，在定义方法时变量甚至不必存在；*在您调用*该方法时会查找该值。

# java - JPQL + 指南中是否可以使用此 SQL 语句？

> ID：11811941
> 
> 赞同：0
> 
> 时间：2012-08-04T20:53:42.440
> 
> 标签：java, mysql, sql, database, jpa

背景：我有一个用户实体。用户实体如下所示：

```
private String name;
private String address;
private List<Picture> pictureList; //The users pictures
private int rolesBitmask; //Is a bitmask for around 20 different roles
private int anotherBitmask; //Is similar bitmask as the roles
//
// Maybe 20 more fields.. 
```

我将有一个 AJAX 搜索网页，它将对所有这些字段执行 JPQL 查询（可能不是图片，而是大多数字段）。

例如，网络用户可能正在搜索名称为“An%”、居住在“Pica%”之类的地址、具有“printer”、“admin”、“guest”角色的用户，并且不关心其余的可用的角色。“printer”、“admin”和“guest”角色根据预定义的值被解释为位掩码。

**我的第一个问题：**

仅在 1 个 JPQL / 任何查询中执行此类查询是不是一个坏主意？

**第二个问题：** 如果我决定继续进行这些“复杂”查询，那么性能如何（请记住，它是一个 AJAX 网页，每次用户更改表单时它可能是一个新的数据库访问）。

**第三个问题：** 在 SQL 中，我会做这样的事情来获取所有用户的姓名、地址和角色：

```
SELECT * FROM User WHERE (rolesBitmask & queryRoleBitmask) ^ queryRoleBitmask = 0 AND name LIKE 'An%' AND address LIKE 'Pica%'; 
```

据我所知，JPQL 不支持按位运算，因此我必须使用本机查询或尝试将其转换为等效的 JPQL，但我不知道我应该如何去做。你？

你能在这里指导我吗，也许我不得不把整个 AJAX 搜索网页的想法扔到 thrashcan 中，或者你怎么看？当您处理许多标准时，最佳实践是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:54:14.807

您可以为此使用本机 SQL 查询。

JPQL 不直接支持按位运算符，但如果您使用 EclipseLink，则可以使用 SQL 运算符。

```
Select u from User u where SQL('((? & ?) ^ ?)', u.rolesBitmask, u.queryRoleBitmask, u.queryRoleBitmask) = 0 and u.name LIKE 'An%' AND u.address LIKE 'Pica%' 
```

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#SQL](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#SQL)

# php - 从第三方网站读取 simplexml 是否存在域限制

> ID：11811942
> 
> 赞同：1
> 
> 时间：2012-08-04T20:53:45.793
> 
> 标签：php, xml, simplexml

我有一个非常简单的问题。我是新手所以如果太基本请原谅。

如果我在我的本地主机服务器（apache/mamp）上运行以下脚本，它运行良好并为我提供某个位置的当前温度。如果我将它上传到我的网站，它不会运行。想不通。也许有人可以帮忙。谢谢。我正在使用网络解决方案域服务器，共享主机。

```
<?php
    $myFeed = simplexml_load_file('http://w1.weather.gov/xml/current_obs/KAND.xml');
    $temperature =  ($myFeed->temp_f) . " F ";
    echo $temperature;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:15:39.190

您最可能的问题[是`allow_url_fopen`设置](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)。这可能由您的主机设置为关闭，或者他们可能有相关的限制。

请注意，设置此限制的不是 SimpleXML -`simplexml_load_file`主要设计为作用于本地文件路径。PHP“文件系统包装器”允许您使用 URL，就好像它是本地文件的路径并自动下载它，但前提是配置为允许这样做。

要解决此问题，请查找使用“CURL”将内容从 URL 显式提取到字符串中的示例，然后使用`simplexml_load_string`

# php - 不断收到此错误：无效查询：键“PRIMARY”的重复条目“0”

> ID：11811944
> 
> 赞同：-2
> 
> 时间：2012-08-04T20:54:04.940
> 
> 标签：php, mysql

这是我创建数据库的脚本。提前感谢大家的帮助。

发生错误时我要插入数据的四个表是：

1.  资产
2.  资产详情
3.  地点
4.  发票

* * *

```
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL';

DROP SCHEMA IF EXISTS `inventory1` ;
CREATE SCHEMA IF NOT EXISTS `inventory1` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci ;
USE `inventory1` ;

-- -----------------------------------------------------
-- Table `inventory1`.`department`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inventory1`.`department` ;

CREATE  TABLE IF NOT EXISTS `inventory1`.`department` (
  `department_id` INT NOT NULL ,
  `department_name` VARCHAR(45) NOT NULL ,
  `job_id` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`department_id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `inventory1`.`employee`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inventory1`.`employee` ;

CREATE  TABLE IF NOT EXISTS `inventory1`.`employee` (
  `employee_id` INT NULL ,
  `department_id` INT NULL ,
  `fname` VARCHAR(45) NULL ,
  `lname` VARCHAR(45) NULL ,
  `email` VARCHAR(45) NULL ,
  `phone_number` VARCHAR(45) NULL ,
  `hire_date` VARCHAR(45) NULL ,
  `job_id` VARCHAR(45) NULL ,
  `manager_id` VARCHAR(45) NULL ,
  PRIMARY KEY (`employee_id`) ,
  INDEX `department_id` (`department_id` ASC) ,
  CONSTRAINT `department_id`
    FOREIGN KEY (`department_id` )
    REFERENCES `inventory1`.`department` (`department_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `inventory1`.`invoice`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inventory1`.`invoice` ;

CREATE  TABLE IF NOT EXISTS `inventory1`.`invoice` (
  `invoice_number` VARCHAR(25) NULL ,
  `invoice_date` INT UNSIGNED NULL ,
  `purchase_price` INT UNSIGNED NULL ,
  `quantity` INT UNSIGNED NULL ,
  `order_date` INT UNSIGNED NULL ,
  `vender` INT UNSIGNED NULL ,
  `warranty_end` DATE NULL ,
  `notes` VARCHAR(255) NULL ,
  `vender_name` VARCHAR(45) NULL ,
  PRIMARY KEY (`invoice_number`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `inventory1`.`assignment`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inventory1`.`assignment` ;

CREATE  TABLE IF NOT EXISTS `inventory1`.`assignment` (
  `assignment_id` INT NOT NULL ,
  `assignment_status` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`assignment_id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `inventory1`.`asset`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inventory1`.`asset` ;

CREATE  TABLE IF NOT EXISTS `inventory1`.`asset` (
  `asset_tag` INT NOT NULL ,
  `cap_ex` VARCHAR(10) NULL ,
  `asset_type_id` INT NULL ,
  `invoice_number` VARCHAR(25) NULL ,
  `status_id` INT NULL ,
  PRIMARY KEY (`asset_tag`) ,
  INDEX `assignment_id` (`status_id` ASC) ,
  CONSTRAINT `invoice_number`
    FOREIGN KEY (`invoice_number` )
    REFERENCES `inventory1`.`invoice` (`invoice_number` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `assignment_id`
    FOREIGN KEY (`status_id` )
    REFERENCES `inventory1`.`assignment` (`assignment_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `inventory1`.`location`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inventory1`.`location` ;

CREATE  TABLE IF NOT EXISTS `inventory1`.`location` (
  `location_id` INT NOT NULL ,
  `location_name` VARCHAR(45) NULL ,
  `rack` INT NULL ,
  `row` INT NULL ,
  `unit` INT NULL ,
  PRIMARY KEY (`location_id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `inventory1`.`physical_asset`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inventory1`.`physical_asset` ;

CREATE  TABLE IF NOT EXISTS `inventory1`.`physical_asset` (
  `physical_asset_id` INT NOT NULL ,
  `location_id` INT NOT NULL ,
  `employee_id` INT NOT NULL ,
  `physical_asset_name` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`physical_asset_id`) ,
  INDEX `location_id` (`location_id` ASC) ,
  INDEX `employee_id` (`employee_id` ASC) ,
  CONSTRAINT `location_id`
    FOREIGN KEY (`location_id` )
    REFERENCES `inventory1`.`location` (`location_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `employee_id`
    FOREIGN KEY (`employee_id` )
    REFERENCES `inventory1`.`employee` (`employee_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `inventory1`.`asset_details`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inventory1`.`asset_details` ;

CREATE  TABLE IF NOT EXISTS `inventory1`.`asset_details` (
  `asset_type_id` INT NULL ,
  `asset-tag` INT NULL ,
  `asset_type` VARCHAR(45) NULL ,
  `physical_asset_id` INT NULL ,
  `manufacturer` VARCHAR(45) NULL ,
  `os` VARCHAR(45) NULL ,
  `os_version` VARCHAR(45) NULL ,
  `make` VARCHAR(45) NULL ,
  `model` VARCHAR(45) NULL ,
  `serial_number` VARCHAR(45) NULL ,
  `processor` VARCHAR(45) NULL ,
  `ram` VARCHAR(45) NULL ,
  `memory` VARCHAR(45) NULL ,
  `hdd` VARCHAR(45) NULL ,
  `host_name` VARCHAR(45) NULL ,
  `notes` VARCHAR(250) NULL ,
  PRIMARY KEY (`asset_type_id`) ,
  INDEX `physical_asset_id` (`physical_asset_id` ASC) ,
  INDEX `asset_tag` (`asset-tag` ASC) ,
  CONSTRAINT `physical_asset_id`
    FOREIGN KEY (`physical_asset_id` )
    REFERENCES `inventory1`.`physical_asset` (`physical_asset_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `asset_tag`
    FOREIGN KEY (`asset-tag` )
    REFERENCES `inventory1`.`asset` (`asset_tag` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:59:08.813

您需要确保`AUTO_INCREMENT`在主键上使用，否则它会尝试将它们全部设为 0，因为主键必须是唯一的，所以它不能这样做。

# prolog - prolog差异列表和zipWith

> ID：11811945
> 
> 赞同：2
> 
> 时间：2012-08-04T20:54:06.767
> 
> 标签：prolog, difference-lists

我有一个 zipWith 功能：

```
zipW(_, [], _, []) :-
  !.
zipW(_, _, [], []) :-
  !.    
zipW(F,[H1|T1],[H2|T2],[H3|R]) :-
  X =.. [F, H1,H2, H3],
  call(X),
  zipW(F, T1, T2, R). 
```

它工作正常，但现在我想为差异列表做，所以我添加了

```
zipW(F, DL-A, DL2-B, NL) :-
  zipW(F,DL,DL2,NL). 
```

但是当我运行测试时

```
44 ?- A=[1,2,3|X]-X,B=[5,5,5|Y]-Y, zipW(add,A,B,C). 
```

我收到一条错误消息，说我不在本地堆栈中，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T13:14:14.317

首先，差异列表只不过是一个开放式（通常）列表及其结尾列表单元/指针/logvar的配对。对于`[1,2,3|X]`,`X`是它的结束列表单元，仍然未分配/未实例化。配对的要点是能够通过实例化第二部分（变量）轻松扩展第一部分（列表）。

`X=[4]`配对后`[1,2,3,4]-[4]`仍然是差异列表，但无法再扩展。如果我们使用，和`X=[4|Y]`的配对将成为我们新的差异列表。`[1,2,3,4|Y]``Y`

我们不必将两者包装在一个复合术语中，我们可以将两者放在谓词的两个不同参数中。

因此，对于您的`zipWith`谓词，只有结束条件会改变：

```
zipW(_,L1,Z1,_ ,_ ,L3,Z3) :- L1=@=Z1, L3=Z3, !.  % 1st exhausted
zipW(_,_ ,_ ,L2,Z2,L3,Z3) :- L2=@=Z2, L3=Z3, !.  % 2nd exhausted 
```

对于`var,var`pair 和一对两个相等的接地列表，测试都成功，这两种情况都表示一个空的差异列表。

工作条款很容易修改：

```
zipW(F, [H1|T1],Z1, [H2|T2],Z2, [H3|R], Z3) :-
      X =.. [F, H1, H2, H3],
      call(X),
      zipW(F, T1,Z1, T2,Z2, R,Z3). 
```

用 SWI Prolog 测试：

```
3 ?- A=[1,2,3|X],B=[10,11,12,13|Y],zipW(plus, A,X, B,Y, C,Z).

A = [1, 2, 3|X]
B = [10, 11, 12, 13|Y]
C = [11, 13, 15|Z] ;

No
4 ?- 
```

# authentication - Apache httpd 模块对 Web 服务进行身份验证？

> ID：11811951
> 
> 赞同：3
> 
> 时间：2012-08-04T20:54:35.993
> 
> 标签：authentication, module, apache

我正在寻找是否有可用的 apache httpd 模块来执行此操作，或者我是否必须自己编写。我希望能够基于将 JSON 从我们的 SSO 应用程序返回的 RESTful Web 服务调用对用户进行身份验证和授权。它必须这样做：

从请求中提取 cookie 值。如果没有 cookie 跳转到重定向。

基于它构造一个URL

获取网址

检查 JSON 对象以获取授权的布尔值。如果未授权，则重定向到将原始请求 URL 作为参数传递的登录应用程序。

如果获得授权，请对照 JSON 对象中的数组检查允许的组。如果不在列表中，则返回 401，如果在，则让请求继续。

我们在 Java 应用程序中使用 servlet 过滤器来做到这一点，但是能够使用它来限制任何 URL 会很方便，无论是静态内容还是代码。

# windows-phone-7 - 在 windows phone 中更改消息框按钮的名称

> ID：11811957
> 
> 赞同：1
> 
> 时间：2012-08-04T20:55:37.760
> 
> 标签：windows-phone-7, messagebox

我想更改出现在我的应用程序中的消息框按钮中的文本。例如，我想使用“相机”而不是“是”，而不是“否”，我想使用“媒体库”……有人知道吗？

这就是我走了多远..

DialogResult dlgResult=MessageBox.Show("导入照片","选择从哪里导入照片",MessageBoxButtons.YesNo,MessageBoxIcon.None);

我非常挣扎，欢迎任何想法。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-21T13:05:18.063

您不能更改 MessageBox 的默认按钮。更好的是，您可以`Microsoft Phone Toolkit`在此使用所需的左右按钮创建自定义消息框，还可以设置单击这些按钮时的功能。

要下载 NuGet，请点击此处。并在您的项目中按左键单击，然后管理 NuGet 包并搜索 Microsoft Phone Toolkit，一旦找到该包，只需按安装，然后使用我下面的代码。

```
CustomMessageBox messageBox = new CustomMessageBox()
        {
            Title = "Inport photo", //your title
            Message = "Select from where to import photo", //your message
            RightButtonContent = "Yes", // you can change this right and left button content
            LeftButtonContent = "No",
        };

        messageBox.Dismissed += (s2, e2) =>
        {
            switch (e2.Result)
            {
                case CustomMessageBoxResult.RightButton:
                    //here your function for right button
                break;
                case CustomMessageBoxResult.LeftButton:
                    //here your function for left button
                break;
                default:
                break;
            }
        };

        messageBox.Show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T00:09:13.157

默认 Silverlight API 不允许您这样做，但 XNA API 可以。请参阅以下链接：

[http://dotnet.dzone.com/articles/delivering-message-using](http://dotnet.dzone.com/articles/delivering-message-using)

# java - 根据字符串的宽度绘制动态按钮

> ID：11811959
> 
> 赞同：1
> 
> 时间：2012-08-04T20:55:51.370
> 
> 标签：java, image, swing, drawing

所以，我一直在修改 Minecraft 一段时间，我看到了它是如何生成按钮的。它需要一个非常宽的按钮图像，占据左侧的一部分，占据右侧的一部分，然后将两者重新组合在一起形成一个较小的图像。

很抱歉，我无法用语言很好地解释这一点，所以让我向您展示一下糟糕的 Paint.Net 技能：

![解释](../Images/f9788d964bffbfdcaa28548e8e51a61b.png)

但是，我无法让它工作，结果是这样的： ![结果是](../Images/85bca82f5f32441789d7d750b92d0653.png)

这是我的代码的一部分：

```
public class ComponentToolbarButton extends JComponent implements MouseListener {

    private static final int HEIGHT = 40;

    // ... other methods here

    private BufferedImage getImageBasedOnWidth(Graphics g) {
        BufferedImage finalImage = null;
        BufferedImage rawImage = null;

         // Try/catch block to initialize rawImage

         // Setting font and things here        

        int compWidth = determineComponentWidth(g); // Returns the (should-be) width of the component

        if (compWidth != getWidth()) { 
            setPreferredSize(new Dimension(compWidth, HEIGHT)); // Just making sure :)
        }

        finalImage = new BufferedImage(compWidth, HEIGHT, BufferedImage.TYPE_INT_RGB);
        Graphics finalImageGraphics = finalImage.getGraphics();

        // Draw left side:
        finalImageGraphics.drawImage(rawImage, 0, 0, 0, compWidth / 2, 0, 0, compWidth, HEIGHT, null);

        // Draw right side:
        finalImageGraphics.drawImage(rawImage, compWidth / 2, 0, compWidth, HEIGHT, rawImage.getWidth() / 2 - compWidth,
            0, rawImage.getWidth(), rawImage.getHeight(), null);

        return finalImage;
    }
} 
```

提前致谢！（顺便说一句，我试图尽可能地缩短代码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T21:54:42.383

好的，经过一番思考，我想出了这个小技巧来展示我认为它应该如何工作：P

```
public class TestMenu extends JComponent {

    protected static final int MAX_HEIGHT = 40;
    protected static final int LEFT_MARGIN = 5;
    protected static final int RIGHT_MARGIN = 5;

    protected static final ImageIcon BACKGROUND = new ImageIcon(TestMenu.class.getResource("/Menu.png"));

    private String text;

    public TestMenu() {

        setOpaque(false);
        text  = "This is some text";
        setFont(UIManager.getFont("Label.font"));

    }

    @Override
    public Dimension getPreferredSize() {

        FontMetrics fm = getFontMetrics(getFont());
        int width = fm.stringWidth(text) + LEFT_MARGIN + RIGHT_MARGIN;

        Dimension size = new Dimension(width, MAX_HEIGHT);

        return size;

    }

    @Override
    protected void paintComponent(Graphics g) {

        super.paintComponent(g);

        int width = getWidth() - 1;
        int height = getHeight() - 1;

        BufferedImage imgLeft = new BufferedImage(LEFT_MARGIN, MAX_HEIGHT, BufferedImage.TYPE_INT_ARGB);
        BufferedImage imgRight = new BufferedImage(RIGHT_MARGIN, MAX_HEIGHT, BufferedImage.TYPE_INT_ARGB);
        BufferedImage imgBody = new BufferedImage(width - LEFT_MARGIN - RIGHT_MARGIN, MAX_HEIGHT, BufferedImage.TYPE_INT_ARGB);

        Graphics2D g2d = imgLeft.createGraphics();
        g2d.drawImage(BACKGROUND.getImage(), 0, 0, this);
        g2d.dispose();

        g2d = imgRight.createGraphics();
        g2d.drawImage(BACKGROUND.getImage(), RIGHT_MARGIN - BACKGROUND.getIconWidth(), 0, this);
        g2d.dispose();

        g2d = imgBody.createGraphics();
        g2d.drawImage(BACKGROUND.getImage(), -LEFT_MARGIN, 0, this);
        g2d.dispose();

        g2d = (Graphics2D) g;

        g2d.drawImage(imgLeft, 0, 0, this);
        g2d.drawImage(imgBody, LEFT_MARGIN, 0, this);
        g2d.drawImage(imgRight, width - RIGHT_MARGIN, 0, this);

        FontMetrics fm = g2d.getFontMetrics();

        int x = (width - fm.stringWidth(text)) / 2;
        int y = ((height - fm.getHeight()) / 2) + fm.getAscent();

        g2d.setColor(Color.WHITE);
        g2d.drawString(text, x, y);

    }

} 
```

首先，永远不要尝试在该`paint`方法中构建所有图像片段，它会减慢绘制程序并消耗大量内存，但对于这个示例，我只是想演示一下这个想法。改用后备缓冲区（我认为这就是你想要做的）。

这将产生：

![在此处输入图像描述](../Images/1e4977120f75681004aa03aeb2448bfb.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T21:29:17.343

也许坐标在调用中混淆了`drawImage`：

```
boolean Graphics.drawImage(Image img,
       int dstx1, int dsty1, int dstx2, int dsty2,
       int srcx1, int srcy1, int srcx2, int srcy2,
       ImageObserver observer); 
```

宽度和高度尺寸是根据以下公式计算的：`(dstx2-dstx1), (dsty2-dsty1)`。

在左侧试试这个：

```
finalImageGraphics.drawImage(rawImage, 
        0, 0, compWidth / 2, HEIGHT, 
        0, 0, rawImage.getWidth() / 2, rawImage.getHeight(),
        null); 
```

[绘制图像](http://docs.oracle.com/javase/tutorial/2d/images/drawimage.html)是该主题的一个很好的教程。

# jquery - 透明背景在 IE9 中无法正常工作

> ID：11811962
> 
> 赞同：0
> 
> 时间：2012-08-04T20:56:38.803
> 
> 标签：jquery, html, css, internet-explorer, lightbox

基本上它是一个灯箱演示。代码来自[这里。](http://www.cssjockey.com/web-design-tutorials/an-easy-way-to-create-light-box-with-jquery-css/comment-page-4#comments)我想点击一个链接“显示面板”然后弹出一个表单。它在 Firefox 中运行良好，但在 IE9 中错误。

html代码很简单：

```
<body>
<a id="show-panel" href="#">Show Panel</a>

 <div id="lightbox-panel">
    <h2>Lightbox Panel</h2>
    <p>You can add any valid content here.</p>
    <p align="center">
    <a id="close-panel" href="#">Close this window</a>
    </p>
    </div><!-- /lightbox-panel -->

    <div id="lightbox"> </div><!-- /lightbox -->
    </body> 
```

CSS：

```
<style type="text/css">

#lightbox {
display:none;
opacity:0.9;
filter:alpha(opacity=90);
position:fixed;
top:0px;
left:0px;
min-width:100%;
min-height:100%;
z-index:1000;
background-color: #FFCC66;
    }

#lightbox-panel {
display:none;
position:fixed;
top:180px;
left:50%;
margin-left:-200px;
width:450px;
border:2px solid #CCCCCC;
z-index:1001;
background-color: #999900;
padding-top: 10px;
padding-right: 15px;
padding-bottom: 10px;
padding-left: 15px;
    }

.show-panel {
font-family: Arial, Helvetica, sans-serif;
font-size: xx-large;
    }
    </style> 
```

jQuery 代码：

```
$("a#show-panel").click(function(){
$("#lightbox, #lightbox-panel").fadeIn(300);
})
 $("a#close-panel").click(function(){
 $("#lightbox, #lightbox-panel").fadeOut(300);
 }) 
```

Firefox中的效果： ![火箱](../Images/407ebbf0624e6dd4571cf7322c41fc8e.png)

IE9中的效果： ![IE9](../Images/1236081dc8f927829076967184a66d88.png)

您不仅看到透明背景，而且灯箱的位置也不对。

感谢帮助。

整个代码：

[https://skydrive.live.com/?cid=03a8bb9eaeeff1db#cid=03A8BB9EAEEFF1DB&id=3A8BB9EAEEFF1DB!234](https://skydrive.live.com/?cid=03a8bb9eaeeff1db#cid=03A8BB9EAEEFF1DB&id=3A8BB9EAEEFF1DB!234)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:13:17.917

# 问题

正如 Jashwant 所说，这可能是一个文档类型问题。这正是问题所在。一旦我在`<html>`标签前面添加了 HTML 5 文档类型，它就被修复了。

```
<!DOCTYPE html> 
```

请记住，IE 不如其他浏览器聪明。因此，您应该为网页使用正确的设置：

```
<!DOCTYPE html>

<html>
  <head>
  </head>

  <body>
  </body>
</html> 
```

* * *

它似乎正在处理这个[JsFiddle](http://jsfiddle.net/dJ6Sa/1/)。

我确实看到你说它在你身边的 JsFiddle 上也能正常工作。那么，你能把你的整个 HTML 发布在一个`pasteTool`类似的[pastebin](http://pastebin.com/)上吗？这将使解决这个问题更容易。

不过，我想指出的一件事是，您将灯箱垂直居中的方式并不均匀。

灯箱的宽度`450px`非常适合`margin-left`您将其减半。450 的一半是 225，所以你的新`margin-left`是 -225px。

这将使它完美地位于中心。我还喜欢使用 JavaScript 来获取对象的宽度并在其中进行数学运算。这将需要更长的时间来加载页面，因为它必须做更多的工作，但我认为它工作得很好。

考虑到对您而言，灯箱似乎无法在该 HTML 页面上运行，这有点离题，但我认为这也可能有用。确保再次检查您的 HTML。可能存在 IE 无法修复的问题，而其他浏览器（如 Google Chrome）可以。

哦，如果您想将灯箱水平居中，您可以使用相同的方法，只需将高度减半，然后在`margin-top`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T21:24:21.693

这可能是`doctype`个问题。

把这个放在你的前面`<html>`

```
<!DOCTYPE html> 
```

还，

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

在`head`部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T21:05:36.473

它似乎对我有用。您确定没有其他原因导致此问题吗？

[现场演示](http://jsfiddle.net/a9hnb/1/)

我建议同时设置 html 和 body 标签的高度和宽度。我不确定这是否是原因，但我认为它会有所帮助。

```
html, body {
    height:100%;
    width:100%;
} 
```

我已经创建了一个您在 html 文件中提供给我们的内容的示例，它似乎可以正常工作。我认为我们需要更多信息。这些是我放在 html 文件中的内容。

```
<!DOCTYPE html>

<html>
    <head>
        <style type="text/css">
            #lightbox {
                display:none;
                opacity:0.9;
                filter:alpha(opacity=90);
                position:fixed;
                top:0px;
                left:0px;
                min-width:100%;
                min-height:100%;
                z-index:1000;
                background-color: #FFCC66;
            }

            #lightbox-panel {
                display:none;
                position:fixed;
                top:180px;
                left:50%;
                margin-left:-200px;
                width:450px;
                border:2px solid #CCCCCC;
                z-index:1001;
                background-color: #999900;
                padding-top: 10px;
                padding-right: 15px;
                padding-bottom: 10px;
                padding-left: 15px;
            }

            .show-panel {
                font-family: Arial, Helvetica, sans-serif;
                font-size: xx-large;
            }
        </style>
    </head>
    <body>
        <a id="show-panel" href="#">Show Panel</a>

        <div id="lightbox-panel">
            <h2>Lightbox Panel</h2>

            <p>You can add any valid content here.</p>
            <p align="center">
                <a id="close-panel" href="#">Close this window</a>
            </p>
        </div><!-- /lightbox-panel -->

        <div id="lightbox"> </div><!-- /lightbox -->

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript">
            $("a#show-panel").click(function(){
                $("#lightbox, #lightbox-panel").fadeIn(300);
            });

            $("a#close-panel").click(function(){
                $("#lightbox, #lightbox-panel").fadeOut(300);
            })
        </script>
    </body>
</html> 
```

当我将我的测试与您给我们的测试进行比较时，您缺少文档类型。一旦我添加了文档类型，一切正常。

# php - 无法在 chrome 上编辑表单

> ID：11811966
> 
> 赞同：0
> 
> 时间：2012-08-04T20:57:47.393
> 
> 标签：php, html, google-chrome

我有一个可以在除 chrome 之外的所有浏览器中使用的表单，由于某种原因，chrome 不允许我单击并输入表单字段，这是表单：

```
 <form action="registration.php" method="post">
    <fieldset>
        <p style="color:red; font-weight:bold; font-size:14px;"> <?php echo $errorMsg; ?> </p>
        <label style="margin-bottom:10px" for="username">Username</label>
        <input style="margin-bottom:10px"name="username" id="username" value="<?php print $username; ?>" type="text" />
        <label style="margin-bottom:10px" for="email">Email</label>
        <input style="margin-bottom:10px" name="email" id="email" value="<?php print $email; ?>" type="text" />
        <label style="margin-bottom:10px" for="emailconf">Confirm Email</label>
        <input style="margin-bottom:10px" name="emailconf" id="emailconf" value="<?php print $emailconf; ?>" type="text" />
        <label style="margin-bottom:10px" for="paypal">PayPal Email</label>
        <input style="margin-bottom:10px" name="paypal" id="paypal" value="<?php print $paypal; ?>" type="text" />
        <label style="margin-bottom:10px" for="pass">Password</label>
        <input style="margin-bottom:10px" type="password" value="<?php print $pass; ?>" name="pass" id="pass" onkeyup="passwordStrength(this.value)" />
        <label style="margin-bottom:10px" for="passwordconf">Confirm Password</label>
         <input style="margin-bottom:10px" name="passwordconf" id="passwordconf" value="<?php print $passwordconf; ?>" type="password" />
           <div style="height:35; color:black;" id="passwordDescription">Password not entered</div>
           <div id="passwordStrength" class="strength0"></div>
    </fieldset>
        <input style="float:right; margin-right:45%;" id="SaveAccount" type="submit" class="loginbtn" value="Submit Form"/>
    </form> 
```

php 打印是这样，如果有错误，他们不必再次重新输入信息，据我所知可以忽略。chrome为什么会这样表现有什么理由吗？我绝不是表格大师，但我过去曾以同样的方式制作过一些，如果有记忆的话，它们之前也曾工作过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T21:13:31.640

快速修复：添加`position:relative`到`#main_wrapper`

正确修复：整个布局需要~~很多更改...~~重新设计（`table`整行充满`nbsp`？认真吗？）

# wpf - 在 WPF 中创建类似 Office 2010 侧边栏的菜单

> ID：11811968
> 
> 赞同：0
> 
> 时间：2012-08-04T20:58:37.503
> 
> 标签：wpf, xaml, menu, wpf-controls

我是 WPF 的新手，我终于开始使用导航制作我的第一个应用程序。但是，我被困在一件事上。我很想创建一个类似于 Office 2010 侧边栏中的垂直菜单。像这样（注意，我对与之配套的功能区不感兴趣，只是一个简单的菜单）：

![在此处输入图像描述](../Images/08261674f75e415eaee43bbda4fd0f0b.png)

它有这样的悬停效果：

![在此处输入图像描述](../Images/5c2ce9a228fe9a571af2a7665ed3344d.png)

我想这对于那些擅长 XAML 的人来说可能是在公园里散步，但是我被卡住了，被卡住了，我尝试过谷歌搜索，尝试在 Blend 和 VS 中获取它，但我被卡住了。

我不需要右侧的三角形，只需一个带有悬停的方形“按钮”，就像上面看到的那样，我就可以成为一个非常快乐的露营者。

那么，关于我应该寻找或阅读什么的任何提示和指示？

到目前为止我所拥有的（但我不确定它是否正确）是这样的：

```
 <Button Content="Choice One!" Margin="204,153,231,0" VerticalAlignment="Top" Background="{x:Null}" BorderBrush="{x:Null}"/>
    <Button Content="Choice One!" Margin="204,191,231,0" VerticalAlignment="Top">
        <Button.BorderBrush>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <LinearGradientBrush.RelativeTransform>
                    <TransformGroup>
                        <ScaleTransform CenterY="0.5" CenterX="0.5" ScaleY="1.09" ScaleX="1"/>
                        <SkewTransform AngleY="0" AngleX="0" CenterY="0.5" CenterX="0.5"/>
                        <RotateTransform Angle="-179.963" CenterY="0.5" CenterX="0.5"/>
                        <TranslateTransform Y="0.045"/>
                    </TransformGroup>
                </LinearGradientBrush.RelativeTransform>
                <GradientStop Color="Black" Offset="0"/>
                <GradientStop Color="White" Offset="1"/>
            </LinearGradientBrush>
        </Button.BorderBrush>
        <Button.Background>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FFCACACA" Offset="0"/>
                <GradientStop Color="WhiteSmoke" Offset="1"/>
            </LinearGradientBrush>
        </Button.Background>
    </Button> 
```

感谢所有帮助。:)

//JaggenSWE

# c - 为什么函数不能有静态参数？

> ID：11811975
> 
> 赞同：1
> 
> 时间：2012-08-04T21:00:02.337
> 
> 标签：c

以下是c中的代码。

```
 fact(2);
     void fact(static int i)
     {..} 
```

输出：错误不能有静态参数
那么为什么我们不能在函数中使用静态参数呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-04T21:03:46.903

static 关键字意味着一个变量在其范围内可能只有一个实例，并且该实例在其范围之外是不可见的。这些要求对函数参数都没有意义：它可能会在不同的内存地址被多次调用，并且由于它是用于通信的，因此它必须对外部世界可见。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-04T21:02:33.753

尝试应用于`static`参数没有多大意义，因此标准不允许这样做（第 6.7.5.3/2 节：“参数声明中应出现的唯一存储类说明符是`register`.”）

# asp.net-mvc - Membership.ValidateUser 总是返回 false

> ID：11811978
> 
> 赞同：0
> 
> 时间：2012-08-04T21:00:45.160
> 
> 标签：asp.net-mvc, asp.net-membership

我正在努力设置默认会员资格。我可以注册，但后来我无法登录我的应用程序。Membership.ValidateUser 总是返回 false。

这是我正在使用的配置：

```
<connectionStrings>
   <clear />
   <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=tcp:s09.winhost.com;Initial Catalog=*****;User ID=******;Password=**********;Integrated Security=False;" />
</connectionStrings> 

<profile defaultProvider="DefaultProfileProvider">
  <providers>
    <clear/>
    <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
  </providers>
</profile>
<membership defaultProvider="DefaultMembershipProvider"  hashAlgorithmType="SHA1">
  <providers>
    <clear/>
    <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/goaly" />
  </providers>
</membership>
<roleManager defaultProvider="DefaultRoleProvider">
  <providers>
    <clear/>
    <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
  </providers>
</roleManager>
<sessionState mode="InProc" customProvider="DefaultSessionProvider">
  <providers>
    <clear/>
    <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
  </providers>
</sessionState>

<machineKey validationKey="2CE9C29E0CA905FA4CB11E7A20158566A1C7B0CFD9B94528B6758FB1B1588E2928B70F7D1EC2174CB1CB2C6AAB03F2D3848B502AEB46C60B7370A032FFDA716C" decryptionKey="6B0F32F19532E948C4431B9437A12F32BE56706DB3483205706ECCF2BDA7C167" validation="SHA1" decryption="AES" /> 
```

我看过几个问题[为什么 Membership.ValidateUser() 总是返回 false？](https://stackoverflow.com/questions/4890026/why-does-membership-validateuser-always-return-false)但我已经尝试添加机器密钥和设置 hashalgoritm。

我可以看到注册新用户时在 dbo.Memberships 表和 dbo.User 表中创建了一条新记录，但无法登录。

一个可能的问题是缺少视图或存储过程，我没有创建任何这些，只是假设它们将被正确创建（用户、UsersInRolesm Roles、Profiles、Memberships 表是自动创建的）

谢谢你的帮助

拉尔西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:39:28.450

啊啊啊！！！

我发现了我无法登录的原因。

在我的 accountcontroller（由 mvc 4 模板创建）中，该行

```
 Membership.CreateUser(model.UserName, model.Password, model.Email, passwordQuestion: null, passwordAnswer: null, isApproved: true, providerUserKey: null, status: out createStatus); 
```

改为

```
 Membership.CreateUser(model.UserName, model.Password, model.Email, passwordQuestion: null, passwordAnswer: null, isApproved: false, providerUserKey: null, status: out createStatus); 
```

当我抓取最新的位时，它设置为 true。不知道为什么它被设置为假。

也许模板已更改，或者 IsApproved 功能已更改。无论如何，它没有工作正常。

拉尔西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:16:31.527

其他可能的原因：

1：密码错误

2：用户被锁定

3：用户未获批准

4：还有什么？？？？并且需要更多的调查。即它之前是否工作并停止工作？您是否对您的 memberhsip 提供商进行了任何其他更改，例如 passwordFormat 或其他内容……等等。

来源：[http ://forums.asp.net/t/1392208.aspx](http://forums.asp.net/t/1392208.aspx)

# php - 具有父子主题的网站的MySQL结构

> ID：11811979
> 
> 赞同：2
> 
> 时间：2012-08-04T21:01:01.030
> 
> 标签：php, javascript, mysql, sql

我正在建立一个具有各种主题的父/子结构的网站。（再解释一下，它实际上有 4 个级别，所以`parent < child < 2nd child < 3rd child`：）目前我在 MySQL 中为每个级别都有一个表。每个孩子都有一行引用父母的 id 和主键。我遇到的问题是，我看不到创建一个显示子主题的列表，如下所示：

```
Food 
    Fruit  
        Red  
           Cherry  
        Yellow  
           Banana  
    Meat  
        Beef  
        Pork 
```

我考虑过使用像这样的单个分层表：http: [//mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)我知道可以输出这样的列表。

但是，问题在于该表可能很容易有数百万个帖子（假设这是基础），并且每次请求页面时都会对其进行排序的递归函数似乎需要很长时间才能加载。

虽然我承认这不是一个很好的问答网站，但我想知道是否有人知道 Yahoo Answers 如何存储他们的类别和子类别，因为它似乎与我需要做的类似。是否有任何网站拥有任何人都可以提供信息的类别/子类别数据库？

如果我想要一个像上面那样的列表，我是否必须使用单个分层表（相邻列表模型或修改的预排序树结构）或者我可以只使用 php、sql 和 javascript 来创建一个像我目前这样的列表有; 每个级别的孩子有4张桌子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:04:16.183

您不需要每个级别的表格。您需要基于递归关系的表，这些表将允许您创建“n”个级别。

这是一个简单的概念，考虑一个包含以下字段的表：

```
id(primary key) - item_name - parent_id(foreign key {default=0}) 
```

其中： parent_id 指回相同的表 id 列。

例子：

```
id - name - parent_id
1 - ABC - 0
2 - XYZ - 0
3 - ABX - 1
4 - JKK - 1
5 - KHM - 3
6 - KHJ - 5 
```

在这里，ABC 处于 0 级（即他们没有父级），但 ABX 是 KHM 的父级，同时也是 ABC 的子级。

# javascript - jQuery：如何访问外部变量？

> ID：11811980
> 
> 赞同：-1
> 
> 时间：2012-08-04T21:01:12.040
> 
> 标签：javascript, jquery, global-variables, undefined, local-variables

我处于需要以这种方式解决的情况；需要将 a 转换`local variable`为 a `global variable`。有一个示例返回图像的真实宽度和高度，我从[**这个答案中找到了这些方法。**](https://stackoverflow.com/a/670433/1428241).

需要将局部变量转换为全局变量`pic_real_height`并`pic_real_width`返回其真实值。

**[这是jsFiddle。](http://jsfiddle.net/mjaA3/78/)**

CSS：

```
img { width:0px; height:0px; }​ 
```

jQuery :

```
console.log($('.imgCon img').height());//returns 0

var img = $('.imgCon img')[0]; // Get my img elem
var pic_real_width, pic_real_height;
$('<img/>').attr('src', $(img).attr('src')).load(function() {
        pic_real_width = this.width;   
        pic_real_height = this.height;

        console.log( pic_real_width + 'x' + pic_real_height );
        // -- returns true 570x320 --
});
//problem starts here:
console.log( pic_real_width + 'x' + pic_real_height );
//returns undefined
// need to return this as an global variable 570x320 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T21:28:42.270

这条线，

`console.log( pic_real_width + 'x' + pic_real_height );`

不等待这些行

```
 pic_real_width = this.width;   
    pic_real_height = this.height;

    console.log( pic_real_width + 'x' + pic_real_height );
    // -- returns true 570x320 -- 
```

执行，因为它是异步的。

因此， `console.log( pic_real_width + 'x' + pic_real_height );`在回调函数被调用之前执行（即在你设置`width`and之前`height`）。

因为，您还没有定义它们，所以它们显示`undefined`.

一个简单的解决方案是，

```
$('<img/>').attr('src', $(img).attr('src')).load(function() {
        pic_real_width = this.width;   
        pic_real_height = this.height;

        console.log( pic_real_width + 'x' + pic_real_height );
        // -- returns true 570x320 --
        restOfMyProcessing();

}); 

function restOfMyProcessing() {
    console.log( pic_real_width + 'x' + pic_real_height );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T21:41:28.110

在图像加载事件中设置之前，您尝试使用 pic_real_width 和 pic_real_height。
就像在您的代码中一样，第一个`alert( pic_real_width + 'x' + pic_real_height )`是在图像加载函数之后返回`undefined`的，第二个`alert`在加载事件中返回您所期望的。
虽然最好在加载函数/事件之后移动源属性的设置：

```
$('<img/>')
.load(function() {
    pic_real_width = this.width;
    pic_real_height = this.height;

    alert( pic_real_width + 'x' + pic_real_height );
    // -- returns true 570x320 --
    //now continue process here or call another function...
})
.attr('src', $(img).attr('src')); 
```

# android - Activity in Destroyed时Android停止Activity中的线程

> ID：11811981
> 
> 赞同：3
> 
> 时间：2012-08-04T21:01:13.473
> 
> 标签：android, multithreading, tcp

我有一个 Activity 在 onStart() 方法中创建一个线程。Thread 用于通过 TCP 读取网络数据，并在 while 循环中具有阻塞网络读取方法，该方法在每次增量时检查布尔变量。

我的问题是，当使用返回键销毁 Activity 时，我将布尔循环控制变量的值设置为 false，但线程不会完成，因为它卡在阻塞网络方法上。

```
public class MyActivity extends Activity implements Runnable
{
    Thread thread;
    boolean loopControl;
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
    }
    protected void onStart()
    {
        super.onStart();
        loopControl=true;
        thread = new Thread(this);
        thread.start();
    }

    public void run()
    {
        while(loopControl)
        {
            directories = (Vector<String>) TCPFunctions.inputStream.readObject();
        }
    }

    protected void onDestroy()
    {
        super.onDestroy();
        loopcontrol = false;
    }
} 
```

我该如何完成我想要的线程，因为当再次启动此 Activity 时它会产生问题。

实际上，每次活动启动时，它都会从服务器读取一些数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T21:08:31.090

在你的 onDestroy() 方法中尝试

```
thread.interrupt();  
thread=null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T22:05:08.203

我在 Android 上还是个新手，但我会试一试：

你确定你的 onDestroy() 方法被调用了吗？也许您只是使用 Home 或 Back 按钮退出您的应用程序，在这些情况下，根本不需要调用 onDestroy() 方法，如本页图表所示： [Activity Lifecycle - Pausing](http://developer.android.com/training/basics/activity-lifecycle/pausing.html)

也许您希望线程在应用程序“隐藏”时停止工作，并将其放在 onStop() 中：

```
loopcontrol = false;
thread.interrupt();  
thread=null; 
```

如果是这种情况，当您返回/重新启动应用程序时，也不一定会调用 onCreate()，所以也许线程启动应该在 onResume() 中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T22:36:01.797

你想达到什么目的？

在这种情况下，从 Activity 回调方法之一启动后台线程可能不是一个好主意。Activity 可能会被销毁并从头开始重新创建（例如，这是旋转手机的默认行为），在这种情况下，您将丢失线程...

更好的方法可能是创建[服务](http://developer.android.com/reference/android/app/Service.html)......但是这里有很多关于来自活动/服务/其他事物的 tcp 通信的问题/答案。

# css - CSS3 动画

> ID：11811982
> 
> 赞同：2
> 
> 时间：2012-08-04T21:01:31.383
> 
> 标签：css, css-animations

我已经开始玩 CSS 动画了。乐趣！

我已经设置了这个小提琴来练习公共汽车上轮子的想法。

[http://jsfiddle.net/Dr56H/2/](http://jsfiddle.net/Dr56H/2/)

奇怪的是，有时两个 div 在动画中向下移动时会有一个空白区域。知道为什么吗？

（我现在只有 chrome 的代码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:01:50.610

我这样做了，它奏效了。

```
.one {
width:100px;
height:100px;
background:red;
position:absolute;
/* Safari and Chrome: */
-webkit-animation:myfirst .4s linear 0s infinite normal; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T21:07:24.113

如果您从 .one 中删除动画，就像在[jsfiddle](http://jsfiddle.net/Dr56H/3/)中一样，它不再存在

# maven - 运行某个 Maven 目标时激活配置文件？

> ID：11811984
> 
> 赞同：9
> 
> 时间：2012-08-04T21:01:45.673
> 
> 标签：maven, maven-3, maven-profiles

我正在寻找一种通用解决方案，以在运行某个 Maven 目标时启用 Maven 配置文件。例如，如果我运行

```
mvn site 
```

我还想自动激活配置文件*报告*。我不想手动进行，例如使用：

```
mvn site -Preporting 
```

我希望在配置文件的激活部分中，我可以指定一个触发配置文件启用的 Maven 目标，但情况似乎并非如此。

另一个想法是，如果运行某个目标，我可以以某种方式配置一个属性来设置，因为配置文件可以由一个属性激活。但我还没有真正找到一种方法来做到这一点。

任何指向通用解决方案的指针？

# ios - 如何将 setReturnsDistinctResults 与 Magical Record 一起使用？

> ID：11811985
> 
> 赞同：0
> 
> 时间：2012-08-04T21:01:57.940
> 
> 标签：ios, core-data, unique, nsfetchedresultscontroller, magicalrecord

我正在尝试在名为“name”的实体属性上获得唯一的结果。为此，我正在使用带有 NSFetchedResultsController 的 Magical Record 事情根本不起作用，我得到了所有结果，但它们不是唯一的结果。

我使它工作的代码如下：

```
- (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"custom == 0"];

    [_fetchedResultsController.fetchRequest setReturnsDistinctResults:YES];
    [_fetchedResultsController.fetchRequest setResultType:NSDictionaryResultType];
    [_fetchedResultsController.fetchRequest setPropertiesToFetch:[NSArray arrayWithObject:@"name"]];

    _fetchedResultsController = [MyQuestion fetchAllSortedBy:@"name"
                                                   ascending:YES
                                               withPredicate:predicate
                                                     groupBy:nil
                                                    delegate:self];

    return _fetchedResultsController;
} 
```

我还尝试使用本机 NSFetchedResultsController 方法（没有 Magical Record），但我得到数据库损坏异常，可能是因为我仍在使用应用程序委托上的 Magical Record 初始化我的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:17:49.060

在这种情况下，您要使用的技术是：

1.  使用您的自定义选项创建获取请求
2.  之后让 MagicalRecord 接管

因此，在 nsmanagedobject 上寻找一个名为 MR_requestAllSortedBy: 的类别方法。还有比这更多的请求助手，但这会让你朝着正确的方向前进。创建获取请求后，设置您的选项，例如 setReturnsDistinctResults。然后，要将其发送回 MagicalRecord 助手/管道，您需要在本地副本中公开 MR_fetchController:... 方法。此方法接受获取请求和其他选项，还处理错误处理等。

# ruby-on-rails - Rails 发送过期文件

> ID：11811995
> 
> 赞同：0
> 
> 时间：2012-08-04T21:03:52.137
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

所以我有一个 Rails 应用程序，它在我的输出一些文件`folhas_controller.rb`：

```
 def show
    @folha = Folha.find(params[:id])
    @servicos = @folha.servicos
    nome = "#{@folha.nome_do_mes}-#{@folha.ano}-#{DateTime.now.to_i}"
    respond_to do |format|
      format.csv { send_data @folha.to_csv, filename: "#{nome}.csv" }
      format.xlsx do
        xlsx_package = @folha.to_xls
        begin
          temp = Tempfile.new("folha.xlsx")
          xlsx_package.serialize temp.path
          xlsx_package.use_shared_strings
          send_file temp.path, filename: "#{nome}.xlsx", type: "application/xlsx"
        ensure
        temp.close
        temp.unlink
        end
      end
      format.pdf do
        pdf = @folha.to_pdf(view_context)
        send_data pdf.render, filename: "#{nome}.pdf", type: "application/pdf"#, disposition: "inline"
      end
    end
  end 
```

事情在发展中很好。然后我部署到heroku，并`<%= link_to image_tag('xls_small.png'), folha_path(folha, format: 'xlsx'), class: 'item' %>`不断向我发送过去生成的文件，包括旧文件名。如何删除这些旧文件并强制 Rails 生成一个新文件？

# objective-c - iOS - 如何刷新/更新核心数据瞬态属性？

> ID：11811996
> 
> 赞同：5
> 
> 时间：2012-08-04T21:03:52.333
> 
> 标签：objective-c, ios, core-data, refresh, transient

我正在使用具有瞬态 NSDate 属性的核心数据 NSFetchedResultsController UITableView。我将其作为瞬态属性的主要原因是我的 UITableView 条目会根据 NSDate 放入部分中，但是当日期更改时可以在部分之间移动。

到目前为止，它似乎工作得很好，但它只会更新/刷新（我对此真的很陌生，所以我不知道我是否使用了正确的术语，抱歉！）当我关闭应用程序并杀死它时从多任务处理，或通过 Xcode 重新运行它。如果我不这样做，这些项目就不会改变，也不会被放入正确的部分。有没有办法手动让它刷新，这样用户就不需要这样做来让它正常运行？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T17:02:19.637

**首先**，确保您的瞬态属性仅用于`sectionNameKeyPath`创建获取的结果控制器时。最好命名它`sectionIdentifier`（正如 Apple 在其示例代码中所做的那样。）实际日期应该是您实体的单独属性。（我会叫它`dateAttribute`。

**其次**，确保在 Entity.m 文件中指定关键路径依赖项：

```
+ (NSSet *)keyPathsForValuesAffectingSectionIdentifier {
    // If the value of dateAttribute changes, the section identifier may change as well.
    return [NSSet setWithObject:@"dateAttribute"];
} 
```

**第三**，确保在您的控制器中，您通过以下方式对托管对象上下文中的更改做出适当的反应

```
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
   if (!self.tableView.editing) [self.tableView reloadData];
   // the quick and dirty method without animations;
   // see referenced code for a more pleasant approach
} 
```

如果有任何不清楚的地方，请查看 Apple 示例[DateSectionTitles](http://developer.apple.com/library/ios/#samplecode/DateSectionTitles/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009939)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T06:35:09.113

*向对象发送 a 时会刷新*瞬态属性*`refreshObject:mergeChanges:`。*

 *Mundi 提供的应用键值观察机制的解决方案可能也有效，如果有效，肯定比显式刷新方便得多。*

# wcf - WCF 可以在同一个进程中运行吗？是否可以使用这种方式来实现部件之间的通信？

> ID：11811997
> 
> 赞同：0
> 
> 时间：2012-08-04T21:04:05.343
> 
> 标签：wcf

为了这个例子，想象一下一个像股票代码这样的应用程序。WCF 在收集刻度方面有一个明显的应用，可能会将它们发送到数据库中，但是在内部呢？

您会/可以使用 WCF 来定义和协调同一应用程序的模块之间的通信吗？我们的股票代码有小部件，一个显示最后价格，一个显示随着价格变化而更新的图表，一个显示最后两个价格之间的差异。

所有这些都可以通过 WCF 在同一流程中进行协调吗？你会吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:12:27.767

它们都可以通过 WCF 通信进行协调，但是，我不确定这是否是一个好主意。在您给出的示例中，我认为性能（就延迟而言）是关键。换句话说，如果您的股票行情正被竞争首先查看股票结果的股票经纪人使用，那么与 .NET 事件之类的事件相比，WCF 通信可能会松动。

据我了解，这主要是因为 WCF 被设计为一种跨进程通信机制。为了实现这一点，它序列化所有对象，然后将数据编组到另一个进程，即使它是同一个进程。我不知道配置 WCF 的方法，因此它知道您正在与同一进程交谈。

如果您在同一个 .NET 进程中，则所有公共方法都可以直接调用。因此，与使用 WCF 相比，直接使用对象的开销要少得多。