# StackOverflow 问答 10845000-10845999

# java - 线程可见性问题：如果我只在一个 cpu 上运行多线程。如果存在变量可见性问题？

> ID：10845003
> 
> 赞同：-1
> 
> 时间：2012-06-01T05:43:59.460
> 
> 标签：java, multithreading

如标题：线程可见性问题：如果我只在一个 cpu 上运行多线程。如果 exieted 变量可见性问题？我认为线程将共享缓存并且没有任何可见性，还有其他意见吗？感谢先进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T05:47:46.033

只需关注[Java 内存模型](http://en.wikipedia.org/wiki/Java_Memory_Model)- CPU 架构（缓存等）的详细信息已从您那里抽象出来，并由 JVM 透明地处理。

> Java 内存模型 (JMM) 定义了多线程程序的允许行为 [...] 它对线程和主内存之间的关系设置了执行时间限制，以实现一致且可靠的 Java 应用程序。通过这样做，即使面对动态编译器、处理器和缓存执行的优化，也可以在多线程环境中推理代码执行。

Java 是跨平台的，因此您不能依赖于特定单核机器的特性。

另请参阅： Brian Goetz[的修复 Java 内存模型，第 2 部分](https://www.ibm.com/developerworks/library/j-jtp03304/)。

# jquery - Jquery在复选框更改时禁用元素

> ID：10845004
> 
> 赞同：1
> 
> 时间：2012-06-01T05:44:00.723
> 
> 标签：jquery, select, checkbox

```
<input type="checkbox" id="dw"/>

<select id="oo">
    <option>a</option>
    <option>b</option>
    <option>c</option>
</select>

$('#dw').change(function() {
    if ($(this).is(':checked')) {
        $('#oo').removeAttr('disabled');
    } else {
        $('#oo').attr('disabled', true);
    }
} 
```

我看不出错误在哪里。

[http://jsfiddle.net/f8jGU/](http://jsfiddle.net/f8jGU/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T05:44:47.507

```
$('#dw').on('change', function() {

    // If this.checked = true, then select will enabled else disabled
    // instead of attr() use prop()
    $('#oo').prop('disabled', !this.checked);
}); 
```

**[工作样本](http://jsfiddle.net/thecodeparadox/DzgxN/4/)**

阅读更多关于**[.prop()](http://api.jquery.com/prop/)**

您可以从以下链接获得巨大收益：

**[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T05:46:58.823

**工作演示** [http://jsfiddle.net/2gbHQ/5/](http://jsfiddle.net/2gbHQ/5/)

**好读** [http://api.jquery.com/prop/](http://api.jquery.com/prop/)

> .prop() 方法仅获取匹配集中第一个元素的属性值。它为尚未设置的属性的值返回 undefined，或者如果匹配的集合没有元素。要单独获取每个元素的值，请使用循环构造，例如 jQuery 的 .each() 或 .map() 方法。

**jQuery代码**

```
$('#dw').change(function() {
    if ($(this).is(':checked')) {
        $('#oo').prop('disabled', false);
    } else {
        $('#oo').prop('disabled', true);
    }
});​ 
```

**HTML**

```
<input type="checkbox" id="dw" />

<select id="oo" disabled="true">
    <option>a</option>
    <option>b</option>
    <option>c</option>
</select>
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T06:02:36.983

您的代码也可以工作，只是您错过了关闭该`change`功能。请参阅更新的小提琴[http://jsfiddle.net/f8jGU/1/](http://jsfiddle.net/f8jGU/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-26T12:31:39.863

您的代码不起作用的原因在`.prop()`( [https://api.jquery.com/prop/](https://api.jquery.com/prop/) ) 的 jQuery 文档中进行了解释：

> 属性通常会影响 DOM 元素的动态状态，而不会更改序列化的 HTML 属性。示例包括输入元素的 value 属性、输入和按钮的 disabled 属性或复选框的 checked 属性。`.prop()`应该使用方法来设置禁用和检查而不是方法`.attr()` 。该`.val()`方法应用于获取和设置值。
> 
> ```
> 1 $( "输入" ).prop( "禁用", false );
> 2 $( "输入" ).prop("检查", true );
> 3 $("输入").val("someValue");
> 
> ```
> 
> **重要提示：`.removeProp()`不应使用该方法将这些属性设置为 false。移除原生属性后，将无法再次添加。有关`.removeProp()`更多信息，请参阅。**

# .htaccess - 我无法让所有人都拒绝我在我的 Htaccess 中为所有人工作

> ID：10845010
> 
> 赞同：1
> 
> 时间：2012-06-01T05:44:28.567
> 
> 标签：.htaccess

```
ErrorDocument 500 /errors/notfound.html
ErrorDocument 404 /errors/notfound.html
ErrorDocument 403 /errors/notfound.html

Options +FollowSymLinks

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?operationtoad.com/.*$ [NC]
RewriteRule \.(rar|exe|zip|html)$ - [F]
</IfModule>

order deny,allow
deny from all
allow from ##.###.###.## 
```

当我在第二个允许行中添加第二个或第三个人时，他们可以看到主站点，但他们无法转到 /notfound.html 或 /anonexistingfile.html - 他们将看到 apache 起始页或他们得到 500 错误。

现在，如果我从中删除自己，我只会在根目录上获得 apache 测试页面，而在其他页面上获得 403 禁止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:03:50.227

不是真正的答案，但...而不是允许 IP，您可以用 htpassword 替换它。

并仔细检查您的 RewriteRule 条件，可能是其中的错误。

# iphone - bounds property gives wrong information

> ID：10845011
> 
> 赞同：0
> 
> 时间：2012-06-01T05:44:29.587
> 
> 标签：iphone, ios, uiviewcontroller, bounds

I have just run template from Xcode (Master-Detail Application for iPhone). I only added

```
NSLog(@"%@", NSStringFromCGRect(self.view.bounds)); 
```

in DetailViewController:viewdidLoad

and when I rotated the screen (on Simulator) on MasterViewController to Landscape next I pushed a DetailViewController, in console I've seen:

```
 {{0, 0}, {320, 460}} 
```

which is not correct because, view is in Landscape.

Any idea why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T05:58:19.900

Your view's bounds is portrait by default.

If you launch your application in landscape mode, a rotation message is sent to view controller before it appears. so try to print in `viewDidAppear`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T05:58:12.760

Did you add into you detail view: - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation { return YES; }

If yes, then you should print those values in viewWillAppear because maybe the screen is loaded in portrait by default then it is rotated right after loaded.

# java - Android Java 源代码中的歧义

> ID：10845016
> 
> 赞同：1
> 
> 时间：2012-06-01T05:44:57.200
> 
> 标签：java, android

```
EditText ed1 = (EditText)findViewById( R.id.editText1 );

int a = Integer.parseInt( ed1.getText().toString() ); 
```

上面的代码是否以数字形式从用户那里获取输入并将其显示为字符串？

我的要求是将输入作为整数并作为字符串返回。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T05:47:30.890

> 上面的代码引用是否从用户那里获取数字输入并将其显示为字符串？

反过来——它正在经历这些步骤：

*   找到编辑框
*   从编辑框中获取*文本*
*   将文本解析为数字

> 我的要求是将输入作为整数并作为字符串返回

从哪里获取输入？如果您从*用户*那里获得输入，那么它可能已经是字符串形式。如果您尝试从代码中的其他位置转换整数，那么您*可以*使用

```
String text = Integer.toString(number); 
```

...或者您可以使用一个`NumberFormat`对象，该对象将考虑不同的文化信息，允许对数字等进行分组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T05:51:04.870

EditText.getText() 返回 Editable 对象，您必须将其转换为字符串。您无法直接从编辑文本中获取号码。您可以访问从 EditText 返回的文本，将其转换为字符串，然后将其转换为已实现的数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T05:51:07.377

```
EditText ed1=(EditText)findViewById(R.id.editText1);
String ed1Str = ed1.getText().toString().trim();
int a = Integer.parseInt(ed1Str); 
```

将使其以整数 ( `int a`) 和字符串 ( `String ed1Str`)的形式提供

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-01T06:40:07.400

对上面的代码做一点修改**ed1.setInputType(InputType.TYPE_CLASS_NUMBER);**
这将使您的edittext**仅接受整数值**..

# php - 如果键包含日文字符，如何处理 PHP 数组中的键

> ID：10845018
> 
> 赞同：-2
> 
> 时间：2012-06-01T05:40:56.290
> 
> 标签：php, arrays, character-encoding

我有这个数组：

```
[ID] => 荒川之下流三十景-その二十三「赤羽之景」__35.79_139.72
[Email] => 
[InBuildingAddress] => 
[Price] => 
[Street] => 
[Title] => 荒川之下流三十景 その二十三「赤羽之景」
[Website] => 
[Zip] => 
[Rating Star] => 0
[Rating Weight] => 0
[Latitude] => 35.7865334803033
[Longitude] => 139.716800710514
[Building] => 
[City] => Unknown_Japan
[OpeningHour] => 
[TimeStamp] => 0000-00-00 00:00:00
[CountViews] => 0 
```

然后我做这样的事情：

```
 $output[$info['ID']] = $info; //mess up here
    $tes = $info['ID']['Title']; 
```

好吧，猜猜看：它搞砸了。它可能会搞砸的原因是因为 $info['ID'] 不是 ascii。但是我将它用作 $output[$info['ID']] 的键。

基本上即使 PHP 中数组的内容可以是日语。这是真的？

怎么了？我得到的错误是：

调试警告：/sdfdsfdf/api/test2.php 第 36 行 - 找不到元素 ????????-???????????__35.79_139.72 在变量调试警告：/sdfdsfdf/ api/test2.php 第 36 行 - main() [function.main]：依赖系统的时区设置是不安全的。您*需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。我们选择了 'Asia/Krasnoyarsk' 作为 '7.0/no DST'

这么多问号。

为什么会这样？PHP 内部到底发生了什么？我在哪里可以学到更多这样的东西？最重要的是，处理这种情况的最佳方法是什么？我应该告诉 PHP 在内部始终使用 UTF-8 吗？PHP 数组本身可以没有非 ASCII 值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:59:48.967

运行这个：

```
$utf8str = '荒川之下流三十景-その二十三「赤羽之景」__35.79_139.72';
$arr = Array(
    $utf8str => $utf8str,
);
var_dump($arr);

$arr[$utf8str] = "test";
var_dump($arr); 
```

我明白了：

```
array
  '荒川之下流三十景-その二十三「赤羽之景」__35.79_139.72' => string '荒川之下流三十景-その二十三「赤羽之景」__35.79_139.72' (length=72)

array
  '荒川之下流三十景-その二十三「赤羽之景」__35.79_139.72' => string 'test' (length=4) 
```

所以**PHP 可以处理 utf8 字符作为数组键**...

* * *

关于`date`相关警告，请先使用谷歌，它更快地提出问题并等待人们一遍又一遍地提出相同问题的答案（假设这就是你被否决的原因）

[谷歌搜索](https://www.google.ro/search?q=It%20is%20not%20safe%20to%20rely%20on%20the%20system%27s%20timezone%20settings.%20You%20are%20required%20to%20use%20the%20date.timezone%20setting%20or%20the%20date_default_timezone_set "谷歌")

# android - 渲染/显示和播放嵌入 pdf、Android 的 youtube 视频

> ID：10845020
> 
> 赞同：2
> 
> 时间：2012-06-01T05:45:04.843
> 
> 标签：android, pdf-reader, pdfrenderer, pdf-rendering

我有一个包含超链接和嵌入其中的 YouTube 视频的 PDF。

**目标：**需要打开 PDF 并且所有超链接和视频都应该可以工作。

**结果：**我尝试了许多项目和第三方应用程序。他们中的大多数使用 MuPDF，并且无法播放 YouTube 视频。

我可以尝试使用 native 或 PhoneGap。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-20T12:55:14.350

我们在 Android 的 PSPDFKit v1.2 中添加了对 YouTube 和其他嵌入式媒体的支持。这是一个商业图书馆，我是构建它的团队的一员。前往[https://pspdfkit.com/](https://pspdfkit.com/)并尝试演示。

我们使用 Android 上的[Picasso 库](http://square.github.io/picasso/)来显示视频。如果您实现自己的 PDF 渲染引擎，这绝对是一个好的开始。将所有内容同步起来非常棘手，我们最终重新实现了自定义滚动视图，以最大限度地控制所有方面。

# xcode - AVPlayer 声级计

> ID：10845021
> 
> 赞同：5
> 
> 时间：2012-06-01T05:45:11.950
> 
> 标签：xcode

我正在将 AVPlayer 用于网络流应用程序。我需要开发一个声级计，但周围的大多数东西都可以与 AVAudioPlayer 一起使用。

有人可以建议如何实现这一点。任何帮助或领导将不胜感激。

# iphone - 执行“if”条件“x”毫秒并停止“y”毫秒并重复条件？

> ID：10845025
> 
> 赞同：2
> 
> 时间：2012-06-01T05:45:21.360
> 
> 标签：iphone, objective-c, ios

我有一个程序在程序运行期间连续测试 if 循环内的条件。但我希望这个**if 条件**在一段时间内变为 true 或激活（比如 5 毫秒），然后在接下来的 10 毫秒内停用**if 条件**。然后继续这个模式直到用户关闭程序。我不知道如何解决这个问题，请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:00:46.390

你可以尝试这样的事情；

```
布尔结果 = 否；
BOOL prevResult = NO;

而（条件1）
{
    如果（条件2）
        结果=是；
    别的
        结果=否；

    如果（结果）
    {
        if(!prevResult)
            // 存储时间
        else if(/* 当前时间 - 存储时间 < 5ms */)
            // 让线程休眠 10ms
    }

    上一个结果 = 结果；
}

```

请注意，期望毫秒精度可能不太现实。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-01T06:27:21.927

我有一个建议给你...

当您想以 TRUE 值启动进程时，创建一个方法并调用此方法。

```
-(void)yourProcessMethod(BOOL _flag){

  if(_flag){
      //Execute your process 
      //now check for time is it 5ms or not
      if(time elapsed < 5ms){
          [self yourProcessMethod(TRUE)];
      }else{
          [self yourProcessMethod(FALSE)];
      }
  }else{
      //Execute your process (or do nothing if you want to stop it for 10 ms)
      //now check for time is it 10ms or not
      if(time elapsed < 10ms){
          [self yourProcessMethod(FALSE)];
      }else{
          [self yourProcessMethod(TRUE)];
      }

  }
} 
```

编辑：-

您可以使用这段代码来检查执行时间。

```
NSDate *start = [NSDate date];
// do stuff...
NSTimeInterval timeInterval = [start timeIntervalSinceNow]; 
```

`timeInterval`是 start 和 now 之间的差异，以秒为单位，精度为亚毫秒。

计算经过的时间，即 timeInterval 并检查其值并比较它是 < 5ms 还是 10 [self yourProcessMethod(TRUE/FALSE)];。

**我希望这可以帮助你。:)**如果是，您可以接受答案或UpVote :)

# php - 如何使用uploadify向控制器发送数据

> ID：10845028
> 
> 赞同：1
> 
> 时间：2012-06-01T05:45:43.090
> 
> 标签：php, jquery, codeigniter, uploadify

当uploadify事件发生时，我想向控制器发送一些数据。我该怎么做？例如，我可以通过数据属性使用 ajax 发送数据。现在我想使用uploadify 将数据发送到控制器。提前帮助我。

```
$("#image_upload1").uploadify({
            'buttonText':'Select',
            'fileTypeDesc' : 'Image Files',
            'fileTypeExts' : '*.gif; *.jpg; *.png',
            'swf':'<?php echo base_url()?>resources/flash/uploadify.swf',
            'uploader':'<?php echo site_url('item/update_item_image1')?>',
            'width': 40,
            'multi':false,
            'onUploadComplete':function(file)
            {
                $('#original').hide();
                $('#image1').attr('style','background-image:url("../resources/uploads/18/thumbnail/'+file.name+'")');
                $('#hidden_img_value1').attr('value',file.name)
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T05:54:05.230

您可以像这样使用[formdata](http://www.uploadify.com/documentation/uploadify/formdata/)选项

```
$("#image_upload1").uploadify({
        'formData'      : {'someKey' : 'someValue', 'someOtherKey' : 1},
        'swf'           : '/uploadify/uploadify.swf',
        'uploader'      : '/uploadify/uploadify.php'
    }); 
```

正如文档所说，您可以使用 PHP 中的`$_GET`or`$_POST`数组访问这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:30:16.123

这是我的做法

基本上，在所有上传结束时，在 onAllComplete 方法中，我构建了我需要的所有信息，包括文件名和一些其他变量，并使用 jquery ajax 调用将其发布到控制器方法。在我的示例中，vId、vYear 和 uploadFileNames 的值在我的文档中的其他位置设置，但您可以将它们替换为您需要传递回控制器的任何数据。

```
$('#file_input_que').uploadify({
    'uploader'  : '/core/javascript/uploadify/uploadify.swf',
    'script'    : '/core/javascript/uploadify/uploadify.php',
    'cancelImg' : '/core/javascript/uploadify/cancel.png',
    'folder'    : '/listings/tmp',
    'auto'      : true,
    'multi'     : true,
    'queueSizeLimit' : <?=12-count($imagecount)?>,
    'fileExt'   : '*.jpg;*.jpeg;*.png;*.gif',
    'fileDesc'    : 'Image Files',
    'sizeLimit'   : 5242880,
    'onAllComplete': function(event, data) {
        var vId = $('#vehicleId').val();
        var vYear = $('#vehicleYear').val();

        $.ajax({
            url:'<?=site_url('/dash/uploadImagesAjax')?>',
            type: 'POST',
            data: { vId: vId, vYear: vYear, uploadedFileNames: uploadedFileNames },
            success: function(data) {
                location.reload();
            } 

        }); 

        hideOverlay("ajaxoverlay");
    } 
  }); 
```

# php - 我应该使用 nl2br(htmlspecialchars($text)) 来回显/打印到屏幕上的所有内容吗？

> ID：10845034
> 
> 赞同：0
> 
> 时间：2012-06-01T05:46:10.953
> 
> 标签：php, database, string, htmlspecialchars

标题有点说明了一切。我应该使用 nl2br(htmlspecialchars($text)) 来回显/打印到屏幕上的所有内容吗？

我一直在环顾四周，似乎这个词是在处理来自用户的输入时，通过将其转义并将其插入数据库来对其进行清理。然后从数据库中检索时，如果我打算将其吐出到屏幕上，我应该使用 htmlspecialchars() 将不友好的字符转换为安全的等效字符，如果我想将换行符转换为换行符，则使用 nl2br() 围绕它？

我是否应该创建一个名为 safeEch​​o() 的新函数，`echo nl2br(htmlspecialchars($text))`它在我可能不得不输出可能来自用户的任何地方使用它，而不是通常的 echo/print 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T05:53:08.960

不，要安全地保存在您的数据库中，您只需要这个：（转义单/双引号和其他）

```
mysql_real_escape_string($thedata); 
```

从数据库读取时，不要做任何事情；许多转换没有任何好处。

nl2br 只接受 "\n" 并产生一个`<br \>`; 肯定不需要打印..

# sql - SQL Server 2000 中最长的前缀匹配

> ID：10845035
> 
> 赞同：1
> 
> 时间：2012-06-01T05:46:17.353
> 
> 标签：sql, sql-server-2000

我有 2 张桌子。让我们说一下它的记录和数字

records.number 包含一个数字，我想在 SQL Server 2000 中的 numbers.prefix 中找到最长的关联前缀

我该怎么做呢？

例如

```
records.number = '0841234567'

numbers.prefix = '084'
                 '0841'
                 '08412' 
```

我想选择 08412

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T05:52:28.407

```
select top 1 N.Prefix
from Numbers as N
  inner join Records as R
    on R.Number like N.Prefix+'%'
order by len(N.Prefix) desc 
```

**更新。**

中每个数字的最长前缀`Records`。

```
select R.Number,
       (select top 1 N.Prefix
        from Numbers as N
        where R.Number like N.Prefix+'%'
        order by len(N.Prefix) desc) as Prefix
from Records as R 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/71488)

# iphone - 注册 UINavigationController 代表

> ID：10845036
> 
> 赞同：2
> 
> 时间：2012-06-01T05:46:22.937
> 
> 标签：iphone, uinavigationcontroller

我正在使用故事板，我基本上有这个： ![在此处输入图像描述](../Images/9bdbe7fa650989ba9203e165a0270745.png)

它是一个 mapView，它以模态方式呈现一个 UINavigationController，其中一个 UIViewController 子类作为它的 contentViewController（位置）。然后，该 LocationViewController 根据表选择（EditLocation）推送另一个 viewController。

在 EditLocation 中，我想在调用 popViewController 时传回信息。我认为我可以使用 UINavigationControllerDelegate 来做到这一点。所以在位置，我尝试：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"ShowEditLocation"]) {
        UIViewController *destination = segue.destinationViewController;

        if ([destination respondsToSelector:@selector(setDelegate:)]) {
            [destination setValue:self forKey:@"delegate"];
        }
    }
} 
```

此 Location 类符合 UINavigationControllerDelegate 协议。但是，我从未从 UINavigationController 协议中获得 willShowViewController 或 didShowViewController 回调。想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:44:36.120

每当即将发生 segue 时，都会调用 prepareForSegue 方法。我尝试在 MapViewController 的 viewDidLoad 中访问 navigationController（表示选择 tableview 中的任何单元格时加载的 viewController），我得到了正确的描述，如下所示。

```
NSLog(@"desc: %@", [[self navigationController] description]);

2012-06-01 12:01:09.986 Sample_Storyboard[1126:207] desc:<UINavigationController: 0x68378e0> 
```

# python - 如何将列表的整数项作为 Python 中的字符串参数传递给函数？

> ID：10845038
> 
> 赞同：2
> 
> 时间：2012-06-01T05:46:34.840
> 
> 标签：python, string, list, arguments

我有一个由整数组成的 Python 列表：

```
a = [1, 2, 3] 
```

我想将此列表中的项目作为参数传递给函数，它们必须是字符串：

```
myfunc("1", "2", "3") 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T05:49:05.337

所以......我们使用`*`运算符将​​序列用作函数调用的多个参数；我们希望将每个参数转换为字符串。转换是最明显和最简单的，只需将值传递给 builtin `str`；然后我们可以将`map`那个转换函数放到列表中。这些都是基本技术，我们要做的就是把它们放在一起：

```
myfunc(*map(str, a)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T06:15:34.723

[* 关键字](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists) 可以解包参数列表。

```
a = [1, 2, 3]
myfunc(*(str(l) for l in a)) 
```

# c# - Watin behaviour in debug mode is different than in normal mode

> ID：10845045
> 
> 赞同：0
> 
> 时间：2012-06-01T05:47:31.210
> 
> 标签：c#, visual-studio-2008, automation, watin, ui-automation

Im testing the WatiN library using this simple code:

```
using (var browser = new IE("http://www.google.de"))
{
    browser.TextField(Find.ByName("q")).TypeText("WatiN");        
    Button btn1 = browser.Button(Find.ById("gbqfba"));
    btn1.Click();
    while (!browser.ContainsText("watin.org"))
    {
        System.Threading.Thread.Sleep( 500 );
        btn1.Click();
    }
} 
```

Anyway it works fine when i run it in debug mode having a breakpoint somewhere, but as soon as i run in release mode it types the desired text but the button doesnt seem to be clicked, so i have the search field with the text in it, and i dont get any search results.

Any known issues about this? any Ideas?

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:05:00.370

You need to insert a wait in your code till everything is loaded, then you will be able to find controls.

It works in debug mode **because**, while debugging with breakpoints it get time things to be fully loaded.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T16:02:08.127

I'm a WatiN newbie, too, and it took me a while before I got this to work. First, read this solution:

[WatiN clicking a button](https://stackoverflow.com/questions/12215326/watin-clicking-a-button/12215875#12215875)

You might have to try different ways of implementing the solution to get it to work for you. For example:

First I put the line

```
browserInstance.NativeDocument.Body.SetFocus(); // set focus befor u click 
```

before the "click" action, but that worked only in Debug mode (My code didn't work at all before, so getting it to work in Debug mode was progress).

Then I put the line before **each** item to get it to work in Run mode:

```
browserInstance = new IE(@"http://www.google.com");

TextField criteria = browserInstance.TextField(tf => tf.Name == "q");

browserInstance.NativeDocument.Body.SetFocus(); // set focus befor u click
criteria.TypeText("Come Jam With Us");

browserInstance.NativeDocument.Body.SetFocus(); // set focus befor u click
browserInstance.Button(Find.ById("gbqfb")).Click(); 
```

I'm not sure why this works, but I hope it helps.

# sql - 为什么我的 sql server profiler 只显示空白模板

> ID：10845047
> 
> 赞同：2
> 
> 时间：2012-06-01T05:47:40.707
> 
> 标签：sql, sql-server, database, sql-server-profiler

我是这个 SQL Server Profiler 的新手。我正在尝试在 sql server profiler 中创建跟踪。当我尝试选择模板时，它只显示空白，没有模板名称谁能告诉我为什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:38:45.643

默认情况下，SQL Server Profiler 模板存储在此处：

```
C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Profiler\Templates\Microsoft SQL Server 
```

在此文件夹中，您将看到不同 SQL Server 版本 (80,90,100,1050) 的子文件夹。可能是您试图将分析器连接到运行更高版本的服务器。

检查这个：[http ://social.msdn.microsoft.com/Forums/en-US/sqltools/thread/b5a0c106-faf6-4a21-a012-2d60366190e3/](http://social.msdn.microsoft.com/Forums/en-US/sqltools/thread/b5a0c106-faf6-4a21-a012-2d60366190e3/)

> “您要连接的服务器是 10.50 sql 服务器，而您的机器没有文件夹。所以要修复它，请复制您的 100 文件夹（找到：C:\Program Files (x86)\Microsoft SQL Server\100\Tools \Profiler\Templates\Microsoft SQL Server\100）在名为 1050 的同一位置创建一个新文件夹。”

# git - Git：显示两次提交之间的总文件大小差异？

> ID：10845051
> 
> 赞同：83
> 
> 时间：2012-06-01T05:48:08.723
> 
> 标签：git, filesize, git-diff

是否可以显示两次提交之间的总文件大小差异？就像是：

```
$ git file-size-diff 7f3219 bad418 # I wish this worked :)
-1234 bytes 
```

我试过了：

```
$ git diff --patch-with-stat 
```

这显示了 diff 中每个*二进制*文件的文件大小差异——但不是文本文件，也不是总文件大小差异。

有任何想法吗？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-06-01T08:54:13.657

`git cat-file -s`将在 git 中输出对象的大小（以字节为单位）。`git diff-tree`可以告诉你一棵树和另一棵树的区别。

将它放在一个名为`git-file-size-diff`位于 PATH 某处的脚本中，您就可以调用`git file-size-diff <tree-ish> <tree-ish>`. 我们可以尝试以下方法：

```
#!/bin/bash
USAGE='[--cached] [<rev-list-options>...]

Show file size changes between two commits or the index and a commit.'

. "$(git --exec-path)/git-sh-setup"
args=$(git rev-parse --sq "$@")
[ -n "$args" ] || usage
cmd="diff-tree -r"
[[ $args =~ "--cached" ]] && cmd="diff-index"
eval "git $cmd $args" | {
  total=0
  while read A B C D M P
  do
    case $M in
      M) bytes=$(( $(git cat-file -s $D) - $(git cat-file -s $C) )) ;;
      A) bytes=$(git cat-file -s $D) ;;
      D) bytes=-$(git cat-file -s $C) ;;
      *)
        echo >&2 warning: unhandled mode $M in \"$A $B $C $D $M $P\"
        continue
        ;;
    esac
    total=$(( $total + $bytes ))
    printf '%d\t%s\n' $bytes "$P"
  done
  echo total $total
} 
```

在使用中，它如下所示：

```
$ git file-size-diff HEAD~850..HEAD~845
-234   Documentation/RelNotes/1.7.7.txt
112    Documentation/git.txt
-4     GIT-VERSION-GEN
43     builtin/grep.c
42     diff-lib.c
594    git-rebase--interactive.sh
381    t/t3404-rebase-interactive.sh
114    t/test-lib.sh
743    tree-walk.c
28     tree-walk.h
67     unpack-trees.c
28     unpack-trees.h
total 1914 
```

通过使用`git-rev-parse`它应该接受所有指定提交范围的常用方法。

编辑：更新以记录累计总数。请注意，bash 在子 shell 中运行 while read，因此需要额外的花括号以避免在子 shell 退出时丢失总数。

编辑：通过使用`--cached`调用参数`git diff-index`而不是`git diff-tree`. 例如：

```
$ git file-size-diff --cached master
-570    Makefile
-134    git-gui.sh
-1  lib/browser.tcl
931 lib/commit.tcl
18  lib/index.tcl
total 244 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-01T06:18:40.583

您可以通过管道输出

```
git show some-ref:some-path-to-file | wc -c
git show some-other-ref:some-path-to-file | wc -c 
```

并比较这两个数字。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-29T01:41:11.413

我制作了一个 bash 脚本，通过实际文件/内容大小来比较分支/提交等。它可以在[https://github.com/matthiaskrgr/gitdiffbinstat](https://github.com/matthiaskrgr/gitdiffbinstat)找到，还可以检测文件重命名。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-12T19:17:13.017

扩展[matthiaskrgr 的答案](https://stackoverflow.com/a/14077961/1677912)，[https://github.com/matthiaskrgr/gitdiffbinstat](https://github.com/matthiaskrgr/gitdiffbinstat)可以像其他脚本一样使用：

```
gitdiffbinstat.sh HEAD..HEAD~4 
```

我觉得它真的很好用，比这里发布的任何其他东西都要快得多。样本输出：

```
$ gitdiffbinstat.sh HEAD~6..HEAD~7
 HEAD~6..HEAD~7
 704a8b56161d8c69bfaf0c3e6be27a68f27453a6..40a8563d082143d81e622c675de1ea46db706f22
 Recursively getting stat for path "./c/data/gitrepo" from repo root......
 105 files changed in total
  3 text files changed, 16 insertions(+), 16 deletions(-) => [±0 lines]
  102 binary files changed 40374331 b (38 Mb) -> 39000258 b (37 Mb) => [-1374073 b (-1 Mb)]
   0 binary files added, 3 binary files removed, 99 binary files modified => [-3 files]
    0 b  added in new files, 777588 b (759 kb) removed => [-777588 b (-759 kb)]
    file modifications: 39596743 b (37 Mb) -> 39000258 b (37 Mb) => [-596485 b (-582 kb)]
    / ==>  [-1374073 b (-1 Mb)] 
```

./c/data... 的输出目录很时髦，因为 /c 实际上是文件系统根目录。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-22T09:40:06.667

对脚本的评论：git-file-size-diff，由 patthoyts 建议。该脚本非常有用，但是，我发现了两个问题：

1.  当有人更改文件的权限时，git 在 case 语句中返回另一种类型：

    ```
    T) echo >&2 "Skipping change of type"
    continue ;; 
    ```

2.  如果 sha-1 值不再存在（出于某种原因），脚本将崩溃。您需要在获取文件大小之前验证 sha：

    `$(git cat-file -e $D) if [ "$?" = 1 ]; then continue; fi`

完整的 case 语句将如下所示：

```
case $M in
      M) $(git cat-file -e $D)
         if [ "$?" = 1 ]; then continue; fi
         $(git cat-file -e $C)
         if [ "$?" = 1 ]; then continue; fi
         bytes=$(( $(git cat-file -s $D) - $(git cat-file -s $C) )) ;;
      A) $(git cat-file -e $D)
         if [ "$?" = 1 ]; then continue; fi
         bytes=$(git cat-file -s $D) ;;
      D) $(git cat-file -e $C)
         if [ "$?" = 1 ]; then continue; fi
         bytes=-$(git cat-file -s $C) ;;
      T) echo >&2 "Skipping change of type"
         continue ;;
      *)
        echo >&2 warning: unhandled mode $M in \"$A $B $C $D $M $P\"
        continue
        ;;
    esac 
```

# wpf - 从数据网格中删除行

> ID：10845053
> 
> 赞同：36
> 
> 时间：2012-06-01T05:48:12.880
> 
> 标签：wpf, wpfdatagrid

我们可以删除每行数据网格之间的线吗？使它看起来像列表视图（因此只有数据应该是两行之间没有线）

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-01T05:51:47.960

您可以使用 切换网格线的可见性`GridLinesVisibility`。要隐藏它们，只需将其设置为`None`

```
<DataGrid ...
          GridLinesVisibility="None"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-14T09:25:46.990

```
<asp:DataGrid ... GridLines="None">
<Columns>
</Columns>
</asp:DataGrid> 
```

# c# - 数据未保存在数据库中 (MVC3)

> ID：10845054
> 
> 赞同：2
> 
> 时间：2012-06-01T05:48:14.590
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我有一个记录列表，对于每条记录，我都有一个编辑按钮来显示数据和修改信息。当我单击保存按钮时，数据未保存在数据库中。我的代码有什么问题，请帮忙？这是我编辑记录的代码

```
[HttpPost,ValidateInput(false)]
       public ActionResult EditEventDetails(int id, FormCollection collection)
       {
           var eventsdetails = _service.GeteventByID(id);
           UpdateModel(eventsdetails, "tbl_SBAem_Event");
           _eventRepository.SaveChanges();
           return RedirectToAction("Index");
       } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T05:51:02.230

尚不完全清楚您的代码的用途，但您从不使用该参数，该参数可能包含您要更新的数据*。*`collection`在保存更改之前，您可能应该将其应用于您的模型。

你现在的`UpdateModel`方法是做什么的？你只是给它你刚刚从存储库中*获取*的信息。我希望它能够接受`FormCollection`它的签名，例如

```
UpdateModel(eventsdetails, collection, "tbl_SBAem_Event"); 
```

...但我真的只是在猜测，因为我们没有太多的上下文。无论这是否是正确的地方，看起来似乎忽略传入的数据很可能是原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T05:52:39.160

编辑函数签名，因为 MVC 没有绑定函数。

```
EditEventDetails(FormCollection collection) 
```

`FormCollection`你可以从对象中获取 ID

# php - symfony 1.4，在自定义任务中访问模块级库

> ID：10845058
> 
> 赞同：0
> 
> 时间：2012-06-01T05:48:36.883
> 
> 标签：php, symfony1, symfony-1.4

我有 2 个应用程序：前端和后端。

我正在使用以下命令运行自定义任务：

```
php symfony newCron:createClusters --application=frontend 
```

在每个应用程序中，我都有一个`lib`文件夹和一个`modules`文件夹。通过上面的命令只能访问这个`apps->frontend->lib`文件夹，而里面的 lib 文件夹`apps->frontend->modules->module1->lib`是不能访问的。

如何在我的任务中访问模块级 lib 文件？

我尝试在 config 方法中使用 addOption 命令，但仍然没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:13:20.253

我认为你有两个选择。

**“symfony 方式”**

使用`autoload.yml`（在`apps/frontend/config/autoload.yml`）：

```
autoload:
  my_module_lib:
    path:        %SF_APP_MODULE_DIR%/name_of_your_module/lib
    recursive:   true 
```

**“php 旧方式”**

`require_once`在您的任务中使用基本功能：

```
class createClustersTask extends sfBaseTask
{
  /**
   * @see sfTask
   */
  protected function configure()
  {
    require_once sfConfig::get('sf_app_module_dir') . '/name_of_your_module/lib/name_of_your_first_lib.class.php';
    require_once sfConfig::get('sf_app_module_dir') . '/name_of_your_module/lib/name_of_your_second_lib.class.php'; 
```

# objective-c - 在 Objective C 中消费服务

> ID：10845061
> 
> 赞同：1
> 
> 时间：2012-06-01T05:49:21.283
> 
> 标签：objective-c

注意：这可能看起来像重复但不是。

我创建了一个 .net(WCF) 服务来验证用户名和密码。现在我想在我的 Objective C 中使用它。我正在阅读几本关于 Objective C 的书，但是没有足够的关于使用 Web 服务的描述。

注意：大多数谷歌参考都使用第三方工具，如[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/) 但我不想使用任何第三方源代码。

请指导我并帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:07:52.237

您可以使用 NSURLConnection 从 Web 服务中检索数据。创建一个指定 URL、方法等的请求 (NSMutableURLRequest)。接下来，创建一个 NSURLConnection 并设置一个连接委托。您通常希望在异步模式下使用 url 连接，因此您需要一个委托来在连接连接、获取数据、完成等时接收消息。

如果它是基于 SOAP 的服务，您需要做一些工作才能将数据转换为可用的形式。如果它是一个提供 JSON 或 XML 的 RESTful 服务，那么生活会容易得多——MacOS X 和 iOS 都包含可以帮助您解析这些格式的类。

有很多使用 Web 服务的示例，它们并不都依赖于 ASIHTTPRequest。Apple 提供的一个这样的例子是[“地震”项目](http://developer.apple.com/library/ios/#samplecode/SeismicXML/Listings/ReadMe_txt.html)。

# jquery - 如何使用带有文本框输入 onclick 的 JQuery Datepicker

> ID：10845062
> 
> 赞同：1
> 
> 时间：2012-06-01T05:49:24.700
> 
> 标签：jquery, jquery-ui, jquery-plugins

如何使用带有文本框输入的 JQuery Datepicker onclick 我不想在焦点和日历图像上

```
 $("#my_txtbox").datepicker({
 // options
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T05:59:41.973

```
You need to download 2 JS files for that. 
```

[http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/scripts/date.js](http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/scripts/date.js) [http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/scripts/jquery.datePicker .js](http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/scripts/jquery.datePicker.js)

在页面中添加这两个文件并将该文本框保留在一个类中并使用该类，你可以做你想做的事。

```
Like this:
$(function()
{
     $('.date-pick').datePicker({clickInput:true}) 
}
);

<input id="datepicker" class="date-pick"/>
keep the classname as "date-pick". 
```

# git - 关于以窗口用户身份使用 git 和 VS2010 的查询

> ID：10845064
> 
> 赞同：3
> 
> 时间：2012-06-01T05:49:49.770
> 
> 标签：git, github, github-for-windows

[最近github为window用户](http://windows.github.com/)推出了客户端，我已经安装在我的系统中，使用本地和远程存储库很容易克隆、提交和推送更改。此客户端正在使用 http 而不是 ssh 路径。

[在此之前，我根据我在我的系统中设置的这个链接](http://devlicio.us/blogs/sergio_pereira/archive/2009/05/06/git-ssh-putty-github-unfuddle-the-kitchen-sink.aspx)使用 Git 扩展，它与 Visual Studio 以及来自目录的工作良好，它完全基于 ssh。

现在我的问题是我已经安装了新客户端，并且无论如何它都不会使用 SSH，所以是否有任何扩展可以与 Visual Studio 一起使用，可以根据这个新的 github 客户端与存储库同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:16:32.393

没关系。您可以为同一个存储库设置多个遥控器。无论如何，我都会建议从命令行使用 git。Visual Studio 集成被高估了。如果您不使用命令行，则会放弃很多功能：

*   可搜索的历史
*   命令链
*   制表符补全

# c - 对 cubefr(spoj) 的回答总是错误

> ID：10845072
> 
> 赞同：0
> 
> 时间：2012-06-01T05:51:04.640
> 
> 标签：c, algorithm

我在做一个关于 spoj [cubefr](http://www.spoj.pl/problems/CUBEFR/)的问题。

我写了一个代码，但我不知道为什么我总是得到错误的答案，谁能告诉我

```
#include<stdio.h>
#include<stdlib.h>

int main()
{   
    int arr[1000001];
    int i,root,temp,j=0;

    for(i=2;i<=100;i++)
    {
        temp = i*i*i;
        root = temp;
        while(root <=1000000)
        {
            arr[root] = 1;
            root = root + temp;

        }

    }

    int a[1000001];
    a[0]=0;
    a[1]=1;
    int b=2,n;
    int cnt=0;

    for(j=2;j<=1000000;j++)
    {
        if (arr[j] != 1)
        {
            a[b] = j-cnt;
            b++;
        }
        else
        {
            b++;
            cnt++;
        }

    } 
    int k,t;
    scanf("%d",&t);
    for(k=1;k<=t;k++)
    {
        scanf("%d",&n);
            if (arr[n] == 1)
            {
                printf("Case %d: Not Cube Free\n", k);
            }
            else
            {
                printf("Case %d: %d\n", k, a[n]);
            }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:01:37.523

局部变量不能保证在程序执行时归零。如果你想确保 a 和 arr 归零，要么将它们设为全局，要么使用 memset。顺便说一句，我会两者兼而有之。在全局范围内拥有大数组（当然是为了比赛）通常是一个好主意，并且使用 memset 创建一个很好的例程，可以帮助您解决一些多测试用例问题。相信我——痛苦的经历。

# javascript - 为什么调用 split 和 splice 会给出空数组？

> ID：10845075
> 
> 赞同：2
> 
> 时间：2012-06-01T05:51:16.397
> 
> 标签：javascript

在这个 JavaScript 中，为什么我没有得到`azbc`？

```
var x = "a-b-c".split('-').splice(1, 0, 'z');
alert(x.join('')); 
```

`split``a`返回一个包含,`b`和的数组`c`。

不应该在之后`splice`插入并给我吗？`z``a``azbc`

为什么我得到一个空数组？

注意：我知道我想要的可以通过以下方式完成：

```
var x = "a-b-c".split('-')
x.splice(1, 0, 'z');
alert(x.join('')); 
```

因为`splice`“修改”了原始数组本身。它不应该修改`{a,b,c}`为`{a,z,b,c}`然后分配给`x`吗？

明白了...下面的代码帮助我理解。

```
var x = "a-b-c".split('-')
x = x.splice(1, 0, 'z');
alert(x.join('')); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T05:52:56.070

[`splice`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)返回从数组中删除的项目，而不是新数组：

```
> x = 'a-b-c'.split('-');
["a", "b", "c"]
> x.splice(1,0,'z');
[]
> x
["a", "z", "b", "c"]
> x.splice(1,1,'x');
["z"]
> x
["a", "x", "b", "c"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T05:54:38.660

就像 Paolo 所说，splice 修改了数组[http://jsfiddle.net/k9tMW/](http://jsfiddle.net/k9tMW/)

```
var array = "a-b-c".split('-');
array.splice(1, 0, 'z');
alert(array.join('')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T05:54:41.047

[Mozilla Developer Network-Array splice method](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice) - 更改数组的内容，在删除旧元素的同时添加新元素。

***返回***- 包含已删除元素的数组。如果仅删除一个元素，则返回一个包含一个元素的数组。

```
var x = "a-b-c".split('-');
x.splice(1, 0, 'z');
document.write(x + "<br />"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T05:58:16.797

你必须这样做，

```
var x = "a-b-c".split('-');
x.splice(1, 0, 'z');
alert(x.join(''));​ 
```

# magento - 如何在 Magento 生成的电子邮件中调用产品 url

> ID：10845076
> 
> 赞同：2
> 
> 时间：2012-06-01T05:51:18.020
> 
> 标签：magento

我有一封从 magento 内部生成的电子邮件，其中显示了客户购买的内容。（基于新订单模板）。

是否可以将列出的项目设置为链接，以便可以单击并直接转到我网站上的项目。听起来很简单，但找不到任何信息如何在 magento 中执行此操作。

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:02:42.333

在设计中，您有一个电子邮件文件夹。如果您想要一个新列，只需覆盖 email/order/items/order/default.phtml 和 email/order/items.phtml。祝你好运 ！:) 如果您想了解更多详细信息，请询问我，我会帮助您。

# silverlight - 缺少列表选择器

> ID：10845078
> 
> 赞同：0
> 
> 时间：2012-06-01T05:51:28.847
> 
> 标签：silverlight, windows-phone-7, listpicker

考虑到我是 WP7-Silverlight 开发的新手，所以如果我问的是非常愚蠢的问题，请耐心等待。
昨天我决定开始学习WP7，所以我的

*   Windows 七 64 位
*   Visual Studio 2010 专业版 SP1

我安装了所有必需的工具：

*   视窗电话 7 SDK 7.1
*   Windows Phone 7 SDK 7.1.1 补丁

观看一些 Microsoft 指南，我看到了现在缺少的 ComboBox 控件，您可以在其中阅读

*   [下拉列表 Windows Phone 7](https://stackoverflow.com/questions/4356330/drop-down-list-windows-phone-7)
*   [Windows Phone 组合框样式的问题](https://stackoverflow.com/questions/3686827/problem-with-windows-phone-combobox-style)

所以我下载了[Silverlight 5 Toolkit - December 2011](http://silverlight.codeplex.com/releases/view/78435)并安装了它。
奇怪的是，当我启动一个新的 WP7-Silverlight 应用程序时，我在工具箱中看不到`ListPicker`。
所以我尝试在工具箱引用中手动加载它`C:\Program Files (x86)\Microsoft SDKs\Silverlight\v5.0\Toolkit\dec11\Bin\System.Windows.Controls.Toolkit.dll`，但我收到一条错误消息，指出它缺少一些引用。
这是我做错了，我敢肯定......但我真的不知道是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:00:50.377

ListPicker 存在于 Windows Phone 工具包中，您从 codeplex 下载了错误的二进制文件，请 [点击此链接](http://silverlight.codeplex.com/releases/view/75888)

# oracle - 在游标中执行插入的最佳实践

> ID：10845080
> 
> 赞同：1
> 
> 时间：2012-06-01T05:51:42.620
> 
> 标签：oracle, plsql

我需要在大约 300000 行的游标中进行一些插入，但是运行速度很慢，关于如何让它运行得更快的任何想法？我可以通过批量提交来加快速度吗？因此，例如，我将在第 1000 行之后执行提交

```
DECLARE

  CURSOR test_cursor IS 
    SELECT a from database.mytable
BEGIN

  FOR curRow IN test_cursor LOOP

    insert into tableb (testval)
    values ('something');

  commit;

  END LOOP;
END; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T08:45:57.840

300000 行并不是那么多行。除非每行都**非常**大，否则不应在批处理中间提交。

中间提交[只会实现](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:4951966319022)：

*   额外的开销，因为每次提交都会产生额外的工作，
*   在错误的情况下失去可重新启动性（以及事务完整性的损失），
*   遇到 ORA-1555 的机会更大

如果你的进程真的是一个在循环内有一个插入的游标，你应该运行一个语句：

```
BEGIN
   INSERT INTO tableb (col1..coln) (SELECT col1..coln FROM database.mytable);
END; 
```

如果您仍然需要额外的性能，您可以研究直接插入和并行操作，但它可能会过度优化“仅”300k 行。

到目前为止，您可以使用的最大优化是从*集合*的角度来考虑，而不是传统的由成批的单行语句组成的过程方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T08:21:55.767

或者你可以试试这个：

```
DECLARE
  CURSOR test_cursor IS 
    SELECT col1 from table_a;

  TYPE fetch_array IS TABLE OF test_cursor%ROWTYPE;
  test_array fetch_array;

  l_errors                              PLS_INTEGER;
  l_dml_errors                          EXCEPTION;
  PRAGMA EXCEPTION_INIT(l_dml_errors, -24381);    

BEGIN

  open test_cursor;
  loop
    fetch test_cursor bulk collect into test_array limit 10000;
    forall i in 1..test_array.count save exceptions
      insert into table_b(col1)
      values(test_array(i).col1);
      exit when test_cursor%notfound;
  end loop;
  close test_cursor;
  commit;

EXCEPTION 
WHEN l_dml_errors THEN
    l_errors := SQL%BULK_EXCEPTIONS.COUNT;
    dbms_output.put_line('Number of INSERT statements that failed: ' || l_errors);
    FOR i IN 1 .. l_errors
    LOOP
      dbms_output.put_line('Error #' || i || ' at '|| 'iteration #' || SQL%BULK_EXCEPTIONS(i).ERROR_INDEX);
      dbms_output.put_line('Error message is ' || SQLERRM(-SQL%BULK_EXCEPTIONS(i).ERROR_CODE));
    END LOOP;
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T06:04:06.377

我不会为此推荐游标方法。对于这种情况，我使用附加并行提示。大多数情况下，您的查询实际上以 N 倍的速度运行，其中 N 是并行度。偶尔使用 nologging / noarchivelog 绕过灾难恢复是个好主意。

对于真正的大型迁移（数十到数百 GB），我发现批处理表的自然键（通常是日期）是一个好主意。它周围的一些少量状态可以让您在必要时随意取消+恢复迁移。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-01T06:06:51.847

可能这会帮助你请试试这个

```
DECLARE
i number;
  CURSOR test_cursor IS 
    SELECT a from database.mytable
BEGIN

  FOR curRow IN test_cursor LOOP

    insert into tableb (testval)
    values ('something');
i:i+1;
if mod(i,1000)=0 then
  commit;
end if;
  END LOOP;
commit;
END; 
```

# java - JSP中用户定义函数内的HTML标签，不使用out.println

> ID：10845087
> 
> 赞同：0
> 
> 时间：2012-06-01T05:52:51.520
> 
> 标签：java, jsp

我有一个在 JSP 中包含 html 标记和简单语句的方法。我在每个陈述之前都做了感叹号（！）。在服务器中部署 jsp 后，我检查了 jsp 文件，发现通过这样做（使用“！”符号），我的所有语句都保留在同一个函数中，html 进入 jsp 的 Service() 方法，这根本不需要。out.println() 是一个选项，但我不想使用 out.println() 方法来编写 html，因为它相当于在 servlet 中编写 html。

部署后的JSP页面：

```
public final class DynamicGUI
{
    // This is where the request comes in
     public void _jspService(HttpServletRequest request, HttpServletResponse response) 
        throws IOException, ServletException
     {
        JspWriter out = ...; 

    out.write("<html>");
    out.write("<head/>");
    out.write("<body>");
    out.write(printelements()); // i.e. write the results of the method call
    out.write("</body>");
    out.write("</html>");
}

// my method

private String printelements()
{
    // code stays here 
    but html tags goes into service(). I want them to be here
} 
```

}

有没有其他方法可以做同样的事情？

感谢帮助

# php - 查询返回数组而不是值

> ID：10845090
> 
> 赞同：0
> 
> 时间：2012-06-01T05:53:11.637
> 
> 标签：php, mysql

选择查询返回一个“数组”而不是一个值。因为该插入语句引发错误。

这是我的保存方法，我在其中获取 id 的值并在插入语句中使用该 id

```
 function save() 
            {
              if(isset( $_POST['description']) && isset( $_POST['age']) && isset( $_POST['country']) && isset( $_POST['state'])) {
               $descrip = $_POST['description'];
               $ag = $_POST['age'];
               $country = $_POST['country'];
               $state= $_POST['state'];
            }
              $id = $this->db->query("SELECT table_tbldescription.Id  FROM table_tbldescription Left join table_tblpricetype1 as a on a.Id=table_tbldescription.Id  where table_tbldescription.Description = '". $descrip. "'");
              $arr = $id->result();
              //$arra = $sql->result();
              if(!empty($arr)) {
               $sql =  $this->db->query("Insert into table_tblpricetype1  (Id,age,country ,state) VALUES( '". $arr. "' ,'". $age. "' , '". $country. "','". $state. "')");
               }
               else{
               return false;
              }
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T05:58:35.113

尝试使用：

```
$arr = $id->result()[0]; 
```

# mongodb - 尝试在 mac osx lion 上运行 mongodb 时出现错误“错误：无法连接到服务器 127.0.0.1 shell/mongo.js”

> ID：10845092
> 
> 赞同：6
> 
> 时间：2012-06-01T05:53:18.057
> 
> 标签：mongodb

我正在使用 Mac OS X Lion，我刚刚使用 macports 重新安装了 MongoDB，当我第一次尝试运行 mongodb 时出现以下错误

```
MongoDB shell version: 2.0.5
connecting to: test
Fri Jun  1 11:20:33 Error: couldn't connect to server 127.0.0.1 shell/mongo.js:84
exception: connect failed 
```

有人可以帮忙吗？谢谢

当我运行 mongod 我得到：

```
hisham-agil:~ hisham$ mongod
mongod --help for help and startup options
Fri Jun  1 11:24:47 [initandlisten] MongoDB starting : pid=53452 port=27017 dbpath=/data/db/ 64-bit host=hisham-agil.local
Fri Jun  1 11:24:47 [initandlisten] db version v2.0.5, pdfile version 4.5
Fri Jun  1 11:24:47 [initandlisten] git version: nogitversion
Fri Jun  1 11:24:47 [initandlisten] build info: Darwin gamma.local 11.3.0 Darwin Kernel Version 11.3.0: Thu Jan 12 18:48:32 PST 2012; root:xnu-1699.24.23~1/RELEASE_I386 i386 BOOST_LIB_VERSION=1_49
Fri Jun  1 11:24:47 [initandlisten] options: {}
Fri Jun  1 11:24:47 [initandlisten] exception in initAndListen: 10296 dbpath (/data/db/) does not exist, terminating
Fri Jun  1 11:24:47 dbexit: 
Fri Jun  1 11:24:47 [initandlisten] shutdown: going to close listening sockets...
Fri Jun  1 11:24:47 [initandlisten] shutdown: going to flush diaglog...
Fri Jun  1 11:24:47 [initandlisten] shutdown: going to close sockets...
Fri Jun  1 11:24:47 [initandlisten] shutdown: waiting for fs preallocator...
Fri Jun  1 11:24:47 [initandlisten] shutdown: lock for final commit...
Fri Jun  1 11:24:47 [initandlisten] shutdown: final commit...
Fri Jun  1 11:24:47 [initandlisten] shutdown: closing all files...
Fri Jun  1 11:24:47 [initandlisten] closeAllFiles() finished
Fri Jun  1 11:24:47 dbexit: really exiting now 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-01T05:56:06.480

您在没有先启动服务器的情况下运行 mongo 客户端。尝试先运行 mongod。

您必须使用 --dbpath 开关指定 mongo“工作区”的位置，例如`mongod --dbpath /mongo/db`. 指定的文件夹应该存在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T03:59:17.700

默认情况下，mongod 将尝试使用`/data/db`数据库文件的目录。

在您的情况下，该目录不存在。

在开始之前，`mongod`您应该创建这些目录并确保它们可由运行`mongod`进程的同一用户写入。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-17T16:23:18.647

我删除`/data/db/mongod.lock`以解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T20:40:00.060

我在我的 Mac 上遇到了同样的问题。尝试，

> sudo chown -R `id -u`/data/db

然后启动指定您的 dbpath /data/db 的守护程序，如上面的 bdares 帖子中所示。这对我有用。

# c# - 检索 Gridview 中复选框的选中属性

> ID：10845093
> 
> 赞同：1
> 
> 时间：2012-06-01T05:53:36.190
> 
> 标签：c#, javascript, asp.net

我有一个 aspx 页面，其中有三个占位符。现在我在每个占位符内都有复选框。如何检索客户端复选框的选中属性。我尝试了以下代码，但它不起作用。

```
<asp:CheckBox ID="lblIsActive"  runat="server" CssClass="s_label" />

function Mark_Confirm(elem) 
{
    //var chk=document.getElementById("<%=lblIsActive.ClientID%>");
    var div = document.getElementById('<% = lblIsActive.ClientID %>');    
    var chk = div.getElementsByTagName('input');

    var len = chk.length;      

    if (chk.type == 'checkbox')              
        chk.checked = elem.checked;        

    if(chk.checked==true)
    {
        if (confirm("Do you want to mark the device as lost?")) 
        {
            var confirm_value1 = document.createElement("INPUT");
            confirm_value1.type = "hidden";
            confirm_value1.name = "confirm_value1";
            confirm_value1.value = "Yes";
        } 
        else 
        {
            confirm_value1.value = "No";
        }
    }
    if(chk.checked==false)
    {
        if (confirm("Do you want to mark the device as active?")) 
        {
            var confirm_value2 = document.createElement("INPUT");
            confirm_value2.type = "hidden";
            confirm_value2.name = "confirm_value2";
            confirm_value2.value = "Yes";
        } 
        else 
        {
            confirm_value2.value = "No";
        }
    }
    document.forms[0].appendChild(confirm_value1);
    document.forms[0].appendChild(confirm_value2);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:13:01.913

你可能正在寻找这个。使用' `checked`'属性

```
var isChecked =  document.getElementById('<%=lblIsActive.ClientID%>').checked;
alert(isChecked); 
```

或者通过使用 jquery 你可以像这样检查属性

```
var isChecked = $("#<%=lblIsActive.ClientID%>").is(':checked');
alert(isChecked); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:00:15.153

您可以使用 jQuery 实现此目的；

```
$('.s_label')​​​​​​.each(function(){
  var confirm = $(this).is(':checked');
  alert(confirm);
});;​ 
```

# jquery - 为什么 IE 不显示 JQuery UI 对话框？

> ID：10845098
> 
> 赞同：0
> 
> 时间：2012-06-01T05:54:31.823
> 
> 标签：jquery, jquery-ui

我有显示 JQuery 模态对话框的代码：

```
 if (jQuery.browser.msie) {
            $("#dialog-form").dialog();
        } else {
            $("#dialog-form").dialog('open');
        }

        $("#dialog-form").dialog({
          autoOpen: false,
          modal: true,
          buttons: {
            Cancel: function () {
                $(this).dialog("close");
            }
          },
          close: function () {
            $(this).dialog("close");
          }
        }); 
```

这是HTML：

```
 <div id="dialog-form" title="Select Employee">
        <form id="dialogForm">
            <fieldset>
                <select id="employeeList"> <option value="0"><%=LocalizedContext.SelectAnEmployeeText%></option> <%=model.EmployeeOptions%> </select> 
            </fieldset>
        </form>
    </div> 
```

它在 FF 中显示良好，但是当它在 IE 中弹出时，对话框在那里（带有取消按钮），但缺少下拉菜单。任何想法为什么下拉没有出现在 IE 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:14:34.287

试试这个代码..

```
 if (jQuery.browser.msie) {
            $("#dialog-form").dialog();
        } else {
            $("#dialog-form").dialog('open');
            $('#employeeList').show(); //show the select box explicitly
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:09:44.850

您的代码是否嵌入在 .ready() 方法中？否则它将尝试渲染您尚未准备好的 div。IE

```
$(document).ready( function (){
    // your code below
if ($.browser.msie) {
            $("#dialog-form").dialog();
        } else {
            $("#dialog-form").dialog('open');
        }

        $("#dialog-form").dialog({
          autoOpen: false,
          modal: true,
          buttons: {
            Cancel: function () {
                $(this).dialog("close");
            }
          },
          close: function () {
            $(this).dialog("close");
          }
        });

}); 
```

# jquery - 如何从本地服务器在 Android 设备上运行文件？

> ID：10845099
> 
> 赞同：0
> 
> 时间：2012-06-01T05:54:37.660
> 
> 标签：jquery, android, html, android-emulator, local-storage

我想从 Android 上的本地主机或本地服务器在我的 Android 设备上处理 HTML5、CSS3 和 jQuery 文件。我尝试保存文件并在 Android 和 Mozilla 浏览器中运行它们以运行文件，但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T06:35:08.067

将该html文件保存在资产中并将该html文件加载到webview。参考请参阅下面的链接[Load html5 to webview](https://stackoverflow.com/questions/3152422/webview-load-html-from-assets-directory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T21:53:45.633

你可以！使用 htmlview 应用程序从 android 内存卡或内部存储器打开 .html 或使用 html5 离线缓存（即清单）使其离线，因此当您键入 www.yourtestxdomain.org/yourapp.html 时，它无需在线连接即可工作。

或在您的 android 中安装网络服务器。

# iphone - 在 Core Graphics 中，为什么首选 Alpha 通道是最重要的？(kCGImageAlphaPremultipliedFirst vs kCGImageAlphaPremultipliedLast)

> ID：10845105
> 
> 赞同：3
> 
> 时间：2012-06-01T05:54:52.123
> 
> 标签：iphone, ios, core-graphics, cgbitmapcontextcreate

大多数创建位图上下文的代码使用`kCGImageAlphaPremultipliedFirst`, 来创建 ARGB，而不是`kCGImageAlphaPremultipliedLast`创建 RGBA。是否有首选 ARGB 的原因？

（用法）：

```
CGBitmapContextCreate(NULL, size.width, size.height, 8, size.width * 4, 
    colorSpace, kCGImageAlphaPremultipliedFirst); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:26:34.633

我认为这与所用 CPU 的“字节顺序”有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T21:28:18.007

上面两个常量指定了 alpha 分量的位置以及颜色分量是否被预乘。它可以存储在每个像素的最高或最低有效位中，除了两个常数的性能相同之外，就性能而言，彼此没有优先权。

对于在 iOS 3.2 及更高版本中创建的位图，绘图环境使用预乘 ARGB 格式来存储位图数据。对于在 iOS 3.1.x 及更早版本中创建的位图，绘图环境使用预乘 RGBA 格式来存储位图数据。

# ios5 - 更改 UIScrollView 中的 UILabel 文本

> ID：10845106
> 
> 赞同：0
> 
> 时间：2012-06-01T05:54:53.917
> 
> 标签：ios5, uiscrollview, uilabel, paging

我正在尝试制作一个应用程序，其中有一个滚动视图，其中框架和内容大小从情节提要中设置。我已经插入了一个标签，并且 scrollview 和 uilabel 都创建了 iboutlet。每次滚动分页时，我都想更改 uilabel 的文本。内容作为字符串保存在 nsmutable 数组中。只有一个 uilabel，我想在滚动视图的每一页中将它与数组中的内容一起重用。请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:31:01.083

我认为您需要使用其中一种`UIScrollViewDelegate`类似的方法，`scrollViewDidEndDecelerating:`您可以更改标签的文本以及标签的框架以将其显示在滚动视图的可见矩形中

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)ascrollView
{

    if(lastContentOffset < ascrollView.contentOffset.x)
    {
        if(index-2 >= 0)
        {
            [ascrollView addSubview:[thumbs objectAtIndex:index-2]];
            index-=1;
            //change label text using the index and also it's frame's origin.x
            NSLog(@"Direction Right Index %d",index);
        }
    }
    else if(lastContentOffset > ascrollView.contentOffset.x)
    {
        if(index+2 < [thumbs count])
        {
            [ascrollView addSubview:[thumbs objectAtIndex:index+2]];
            index+=1;
             //change label text using the index and also it's frame's origin.x
            NSLog(@"Direction Left Index %d",index);
        }
    }
    NSLog(@"ScrollViewDidScroll is called");
    lastContentOffset = ascrollView.contentOffset.x;
} 
```

这里`lastContentOffset`是浮点变量，它保存滚动视图的当前可见帧的 x

在 .m 文件中将所有 @synthesize 下面的两个 ivars 声明为

`NSMutableArray *arr;`&`float lastContentOffset;`

然后当你填充你的滚动视图时，只需将它的框架的 origin.x 分配给`lastContentOffset`，然后使用`arr`来更改标签的文本

# javascript - innerHTML 不适用于 JS 中的类名

> ID：10845109
> 
> 赞同：3
> 
> 时间：2012-06-01T05:55:03.023
> 
> 标签：javascript, innerhtml

我的下拉列表选择特定值-

```
<select name="category" id="category" onChange="showDiv(this.value);" >
    <option value="">Select This</option>
    <option value="1">Nokia</option>
    <option value="2">Samsung</option>
    <option value="3">BlackBerry</option>
    </select> 
```

这是我要显示文本的 div

> `<span class="catlink"> </span>`

这是我的 JS 函数 -

```
 function showDiv( discselect )
    {

    if( discselect === 1)
    {
    alert(discselect); // This is alerting fine
    document.getElementsByClassName("catlink").innerHTML = "aaaaaaqwerty"; // Not working
    }

} 
```

让我知道为什么这不起作用，以及我做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-01T05:56:32.133

`document.getElementsByClassName("catlink")`正在选择网页中**的所有元素**作为**数组**，因此您必须使用**[0]**

```
 function showDiv( discselect ) 
 { 

 if( discselect === 1) 
 { 
 alert(discselect); // This is alerting fine 
 document.getElementsByClassName("catlink")[0].innerHTML = "aaaaaaqwerty"; // Now working 
 } 
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T06:18:29.667

您正在`nodeList`使用`getElementsByClassName`. 或者，您可以使用`document.querySelector`，它返回带有 className 的第一个元素`.catlink`：

```
function showDiv( discselect ) {
    if( discselect === 1)    {
      document.querySelector(".catlink").innerHTML = "aaaaaaqwerty";
    }
} 
```

# properties - 在 Google Apps 脚本发布的 UI 服务中用户之间共享的 UserProperties

> ID：10845110
> 
> 赞同：2
> 
> 时间：2012-06-01T05:55:07.590
> 
> 标签：properties, google-apps-script

我正在开发一个作为服务发布并由多个用户通过 UI 访问的 google 应用程序脚本。

我遇到的问题是，当一个用户导致设置 UserProperty 时，所有用户随后也将其 UserProperty 设置为该用户属性。换句话说，它的行为类似于 ScriptProperty，而不是 UserProperty，因为它不是特定于用户的。所有用户似乎都会导致这种情况发生。

我研究了我的代码，但我看不出它与此有什么关系。我没有提到 EffectiveUser，所以只有 ActiveUser 可以设置这些值。

我的猜测是： - 我误解了 UserProperties 的范围 - 我的变量不知何故损坏了（我在其他 UserProperties 变量做一些奇怪的事情时遇到了问题）

有没有人遇到过这种情况，或者有人有什么建议吗？

问候克里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T08:58:14.253

UserProperties 更适合在电子表格中运行而不是发布的脚本。原因是发布的脚本在创建脚本的用户的用户 ID 下运行，而不是以调用它的人的身份运行。

因此，如果脚本是由某人@example.com 编写的，那么无论谁调用该脚本，用户属性都将是某人@example.com 的用户属性。因此，当一个用户编写 UserProperty 时，所有其他用户都会看到相同的值

# sequences - 测量两个字符串序列之间相似性的算法

> ID：10845114
> 
> 赞同：7
> 
> 时间：2012-06-01T05:55:47.317
> 
> 标签：sequences

如何测量两个字符串序列之间的相似性百分比？

我有两个文本文件，在文件中有序列写成

第一个文件：

> AAA BBB DDD CCC GGG MMM AAA MMM

第二个文件：

> BBB DDD CCC MMM AAA MMM

如何根据字符串的顺序来衡量这两个文件之间的相似性？

例如，在上面的示例中，由于字符串的顺序相同，两个文件都具有相似性，但是 file-2 中缺少一些字符串。什么算法最适合解决这个问题，以便我可以测量字符串的顺序而不是两个字符串的频率有多相似？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T05:58:00.100

您可以使用[Levenstein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)算法。它分析将一个字符串转换为另一个字符串所需的编辑次数。[本文](http://www.codeproject.com/Articles/13525/Fast-memory-efficient-Levenshtein-algorithm)很好地解释了它，并提供了一个示例实现。

从[Codeproject](http://www.codeproject.com/Articles/13525/Fast-memory-efficient-Levenshtein-algorithm)复制粘贴：

```
1\.  Set n to be the length of s. ("GUMBO")
    Set m to be the length of t. ("GAMBOL")
    If n = 0, return m and exit.
    If m = 0, return n and exit.
    Construct two vectors, v0[m+1] and v1[m+1], containing 0..m elements.
2\.  Initialize v0 to 0..m.
3\.  Examine each character of s (i from 1 to n).
4\.  Examine each character of t (j from 1 to m).
5\.  If s[i] equals t[j], the cost is 0.
    If s[i] is not equal to t[j], the cost is 1.
6\.  Set cell v1[j] equal to the minimum of:
    a. The cell immediately above plus 1: v1[j-1] + 1.
    b. The cell immediately to the left plus 1: v0[j] + 1.
    c. The cell diagonally above and to the left plus the cost: v0[j-1] + cost.
7\.  After the iteration steps (3, 4, 5, 6) are complete, the distance is found in the cell v1[m]. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-19T08:00:03.687

您可以使用 python 的`SequenceMatcher.ratio`函数将序列相似性测量为 range 中的浮点数`[0, 1]`。如果**T**是两个序列中元素的总数，**M**是匹配数，则为`2.0 * M / T`。主要代码如下：

```
from difflib import SequenceMatcher
text1 = 'AAA BBB DDD CCC GGG MMM AAA MMM'
text2 = 'BBB DDD CCC MMM AAA MMM'
s = SequenceMatcher(None, text1, text2)
similarity = s.ratio() * 100 
```

我希望这可以帮助你！

# iphone - 活动指示器无法正常工作

> ID：10845116
> 
> 赞同：2
> 
> 时间：2012-06-01T05:55:48.763
> 
> 标签：iphone, objective-c, uiactivityindicatorview

嗨，我在我的应用程序中使用 SQllite。我想在 db 进程开始和结束期间显示活动指示器。

这是我的代码：

```
[activityIndicator startAnimating];
// DB Open

// DB close
// DB process ends
[activityIndicator stopAnimating]; 
```

当我尝试这个时，它不能正常工作。sqllite 代码是否会阻止指示器的动画？我在滚动视图中使用活动指示器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T06:07:52.857

试试下面的代码：

```
[[activityIndicator startAnimating];
[self performSelector:@selector(DB_process) withObject:nil afterDelay:0.1]; 
```

创建数据库处理方法

```
- (void)DB_process
{
   // DB close
   // DB process ends
   [activityIndicator stopAnimating];

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T06:32:15.627

关于它为什么不起作用的解释很简单：**UI 仅在当前运行循环终止后更新。**运行循环包含您在单个线程（当前是应用程序的主线程）中进行的所有调用。

因此，例如，如果您调用类似`for (int i=1; i<1000; i++) { label.text = i }`（粗略的伪代码），您的标签将不会显示其文本的 1000 次更改，它只会显示最终值。

UIKit 就是这样做的，这样界面就可以平滑无锯齿。

如果您真的非常想以相同的方法在 UI 上执行多次更新，则必须在后台线程中执行计算。**其他答案提到使用延迟呼叫（0.1 秒），但这没有用，如果您反复调用它会产生巨大的滞后，比如一百次。**正确的解决方案是这样的：

```
- (void)doSomethingVeryLong
{
    [spinner startAnimating];
    // or [SVProgressHud showWithMessage:@"Working"];
    [self performSelectorInBackground:@selector(processStuffInBackground)];
}

- (void)processStuffInBackground
{
    for (int i = 0; i < 1e9; i++)
    {
        /* Make huge computations, 
         * wait for a server, 
         * teach a neurasthenic French (no offence, I'm French)
         */
    }
    [self performSelectorOnMainThread:@selector(workDone)];
}

- (void)workDone
{
    [spinner startAnimating];
    // or [SVProgressHud dismiss];
} 
```

如果您想弄乱技术内容，请查看线程编程指南或 NSRunloop 参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T06:02:01.557

延迟几秒钟后尝试调用流程部分。

```
[activityIndicator startAnimating]; 
```

// 在不同的方法（DB Open）延迟后调用这部分

```
// DB close
// DB process ends
[activityIndicator stopAnimating]; 
```

它会起作用的。

# linux - Shell 脚本语句没有一个接一个地运行

> ID：10845117
> 
> 赞同：0
> 
> 时间：2012-06-01T05:55:49.717
> 
> 标签：linux, shell, gnome-terminal, zenity

我编写了一个 shell 脚本，它在一个新的终端窗口中调用其他一些 shell 脚本。它在我的电脑上运行良好。就像这样

```
#!/bin/sh
gnome-terminal -e "sh one.sh"
zenity --info --text "exed one"
gnome-terminal -e "sh 2.sh"
zenity --info --text "exed 2"
firefox "www.aurl1.com" "www.aurl2.com" 
```

据我了解，该脚本将首先打开一个终端并运行第一个脚本，完成后它将显示zenity然后在新终端中运行两个然后显示zenity。但是当在另一台计算机上执行相同的操作时，脚本不遵循此顺序。它只是并排打开所有终端，而不是等待一个完成并一起显示对话。为什么会出现这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:57:51.610

过去它`gnome-terminal`会在自己的进程中运行每个终端。但是现在`gnome-terminal`在启动时检查是否已经有一个`gnome-terminal`进程正在运行，如果是，则告诉现有的终端进程使用给定的参数打开一个新窗口。您的脚本没有问题：它正在等待每个进程依次完成，只是`gnome-terminal`在将其工作传递给另一个进程后立即退出。

根据`man gnome-terminal`，您可以使用该`--disable-factory`选项禁用此行为，并在其自己的进程中运行每个命令。

尝试这个：

```
gnome-terminal --disable-factory -e 'sh -c "echo hi && sleep 10"'
echo now you can run script 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:33:16.260

像这样运行它们：

```
gnome-terminal -e "sh one.sh" ; zenity --info --text "exed one" ; gnome-terminal -e "sh 2.sh" ; zenity --info --text "exed 2" 
```

逗号的作用是告诉 shell 执行第一个命令，等待它完成，然后才继续执行下一个命令。否则，您描述的行为是正常的，它会逐行解析，而无需等待任何内容。

# php - 使用 Joomla 的 jRoute 库时出现 POST URL 问题

> ID：10845119
> 
> 赞同：0
> 
> 时间：2012-06-01T05:56:01.290
> 
> 标签：php, javascript, joomla

我正在使用 Joomla 的 jRoute 库，而我的控制台请求 url 是`Post http://localhost/jfirst/index.php/en/hospital`我需要这种类型的控制台 url`Post http://localhost/jfirst/`

```
function get_state(e) {
    $js.ajax({
        url: "<?php JRoute::_('') ?>",
        type: "POST",
        dataType: 'json',
        data: {
            'option': 'com_doctors',
            'view': 'hospital',
            'task': 'get_state',
            'id': e
        },
        beforeSend: function() {

        },
        success: function(res) {
            $js('#city').html(res.html);
        },
        error: function() {
            alert('error');
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:14:07.380

尝试使用`<?php JRoute::_('index.php') ?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:41:46.417

我自己找到了问题，我使用了 url：“”，并且工作正常。

# c - 是 printf ("%d %d", c++, c) 的输出；也未定义？

> ID：10845122
> 
> 赞同：20
> 
> 时间：2012-06-01T05:56:24.080
> 
> 标签：c, undefined-behavior

我最近看到一个帖子[cout << c++ << c; 的正确答案是什么？](https://stackoverflow.com/questions/10782863/what-is-the-correct-answer-for-cout-c-c)并且想知道是否输出

```
int c = 0;  
printf ("%d %d", c++, c); 
```

也是未定义的？？

我在讲座中研究过，后缀和前缀运算符仅在获得分号后才会增加值。所以在我看来，输出`0 0`是正确的！！！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-01T14:20:26.417

> 我在讲座中研究过，后缀和前缀运算符仅在获得分号后才会增加值。

把你的讲师给我，这样我就可以~~拿棒球棒给他~~礼貌地指出他的错误。

确切地说，当应用前缀或后缀`++`的副作用时*未指定*，除了要求它发生在下一个序列点之前。在像这样的表达中`--`

 *```
x = a++ * b 
```

`a`可以在`a++`评估后立即更新，或者可以推迟更新，直到`a++ * b`评估完毕并将结果分配给`x`，或介于两者之间的任何位置。

这就是为什么像`i++ * i++`and`printf("%d %d", c++, c)`和`a[i++] = i`许多其他的表达都是不好的 juju 的原因。您将根据编译器、优化设置、周围代码等获得不同的结果。语言标准明确地*未定义*行为，因此编译器没有义务“做正确的事情”，无论正确的事情是什么。请记住，*未定义行为*的定义是

> ### 3.4.3
> 
> 1**未定义行为**
> 使用不可移植或错误程序结构或错误数据时的行为，本国际标准对此没有要求
> 
> 2 注：可能的未定义行为范围从完全忽略具有不可预测结果的情况，到在翻译或程序执行期间的行为环境的记录方式特征（有或没有诊断消息的发布），以终止翻译或执行（有诊断消息的发布）。
> 
> 3 示例 未定义行为的一个示例是整数溢出行为。

这是一个经过深思熟虑的设计决策 - 未指定这些操作的顺序的基本原理是让实现自由重新排列评估顺序以进行优化。但是，为了换取这种自由，某些操作不会有明确的结果。

请注意，编译器可以自由地*尝试*检测这些情况并发出诊断；`printf("%d %d", c++, c);`很容易被抓住，但在一般情况下，这将是一个难以检测的漏洞。想象一下，如果那是写的`printf("%d %d", (*p)++, c)`；如果`p`指向`c`，则行为未定义，否则没关系。如果`p`在不同的翻译单元中分配，那么在编译时无法知道这是否是一个问题。

这个概念并不难理解，但它是 C 语言中最常被误解（和误传*）*的方面之一。毫无疑问，这就是为什么 Java 和 C# 语言规范对所有内容都强制使用特定的求值顺序（所有操作数从左到右求值，并且所有副作用都会立即应用）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T06:02:18.793

> 我在讲座中研究过后缀和前缀运算符仅在获得分号后才会增加值

这不是标准描述它的方式。[序列点](http://en.wikipedia.org/wiki/Sequence_point)是代码中的一个点，其中已经评估了可能在代码的先前部分中发生的副作用。函数参数之间的逗号不是序列点，因此那里的行为是未定义的。

未指定函数参数的评估顺序。不能保证函数的参数将按顺序计算`(1, 2, N)`，因此不能保证在传递第二个参数之前计算增量。

> 所以在我看来，输出 0 0 是正确的！！！

不，行为未定义，因此您不能合理地声称输出将为 0 0。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T06:11:05.450

程序的行为是未定义的，因为它违反了 6.5 表达式的要求：

> 在前一个和下一个序列点之间，对象的存储值最多只能通过表达式的评估修改一次。此外，应仅读取先验值以确定要存储的值。

`c++`并且`c`都在没有中间序列点的情况下进行评估，并且`c`读取 的先验值以确定要由 存储的值`c++`，并确定表达式 的值`c`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-01T06:08:28.123

由于参数的未定义评估顺序，行为肯定是未定义的。您可以通过一些随机测试来证明这个“未定义的输出”：

```
printf("%d %d\n", c++, c);
// result: 0 1
printf("%d %d %d\n", c++, c, c++);
// result: 1 2 0
printf("%d %d %d %d\n", c++, c++, c++, c);
// result: 2 1 0 3
printf("%d %d %d %d\n", c++, c, c++, c);
// result: 1 2 0 2
printf("%d %d %d %d\n", c++, c, c, c);
// result: 0 1 1 1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T06:02:08.107

你是对的：它是未定义的。原因是，虽然可以保证在调用`printf()`之前对 to 的三个参数求值`printf()`，但对三个参数求值的顺序是未定义的。

顺便说一句，仅在分号之后发生递增在技术上是不正确的。标准保证增量不会晚于分号。[实际上，在你的情况下，我相信标准保证它会在控制权传递给`printf()`函数之前发生——但现在这个答案开始演变成迂腐琐事的领域，所以让我把事情放在那里吧！ ]

无论如何，简而言之，你是对的。行为未定义。

*更新：* 正如@R.. 正确观察到的，未定义的行为来自于参数之间缺少序列点。*该标准对未指定*和*未定义*的分词非常谨慎，因此接受更正并表示感谢。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-16T19:11:31.753

该程序展示了[未指定行为](http://en.wikipedia.org/wiki/Unspecified_behavior)和[未定义行为](http://en.wikipedia.org/wiki/Undefined_behavior)的组合。*从未指定的行为*开始，部分段落中的[C99 标准草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)说：`6.5``3`

> 运算符和操作数的分组由语法指示。74) 除稍后指定（对于函数调用 ()、&&、||、?: 和逗号运算符）外，**子表达式的求值顺序和中的顺序发生哪些副作用都未指定。**

它还说 except as specified as later and specific cites `function-call ()`，所以我们看到稍后在`6.5.2.2` *函数调用*段落中的标准草案中`10`说：

> **函数指示符、实际参数和实际参数中的子表达式的求值顺序是未指定的**，但在实际调用之前有一个序列点。

所以我们不知道C的读取*或**C++*的评估是否会首先发生在这行代码：

```
printf ("%d %d", c++, c); 
```

此外，在`6.5.2.4` *后缀增量和减量运算符*部分中`2`说：

> [...]**获得结果后，操作数的值递增。**[...]**更新操作数存储值的副作用应发生在前一个序列点和下一个序列点之间。**

所以我们所知道的是，在执行后增量时，`c`将在读取其值之后但在调用之前的下一个[序列点](http://en.wikipedia.org/wiki/Sequence_point)之前更新，`printf`但没有别的。至于*未定义的行为*，如果我们查看标准草案中的部分`6.5`段落`2`，则说：

> 在前一个和下一个序列点之间，对象的存储值最多只能通过表达式的评估修改一次。**此外，应仅读取先验值以确定要存储的值。**

在`printf`表达式`c`的先验值被读取以评估*C++*和*C*，因此我们现在处于*未定义*的领域。*

# jquery - 输入 val 需要在点击时更改

> ID：10845125
> 
> 赞同：0
> 
> 时间：2012-06-01T05:56:35.827
> 
> 标签：jquery, input

输入 val 需要在点击时更改

这是我的代码

```
<div class="inputQty">
     <span>
        <small class="up">^</small>
         <small class="down">V</small>
     </span>
     <input type="text" maxlength="6" name="oa_quantity" class="input-quantity"  value="1"/>
 </div> 
```

如果我们单击“.up”输入 val 更改为 1++，如果我们单击“.down”输入 val 更改为 1- -

请帮我

ja 小提琴在这里[http://jsfiddle.net/X57Mz/](http://jsfiddle.net/X57Mz/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:00:45.100

用这个：

```
$(function(){
  $('.up').on('click',function(){
     $('.input-quantity').val(parseInt($('.input-quantity').val())+1);
  });

  $('.down').on('click',function(){
     $('.input-quantity').val(parseInt($('.input-quantity').val())-1);
  });
});
​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/X57Mz/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T06:01:29.593

可以这样做。检查 jsfiddle [http://jsfiddle.net/X57Mz/4/的工作示例](http://jsfiddle.net/X57Mz/4/)

```
$(document).ready(function() {

    $(".up").click(function() {
       $(".input-quantity").val(parseInt($(".input-quantity").val())+1); 
    });

    $(".down").click(function() {
       $(".input-quantity").val(parseInt($(".input-quantity").val())-1); 
    });
});​ 
```

如果你不想去负数并且想要非负框，你可以这样做

```
$(document).ready(function() {

    $(".up").click(function() {
       $(".input-quantity").val(parseInt($(".input-quantity").val())+1); 
    });

    $(".down").click(function() {
      if(parseInt($(".input-quantity").val())>0)
       $(".input-quantity").val(parseInt($(".input-quantity").val())-1); 
    });
});​ 
```

这是jsfiddle [http://jsfiddle.net/X57Mz/6/](http://jsfiddle.net/X57Mz/6/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T06:02:28.477

**演示** [http://jsfiddle.net/7hzcB/6/](http://jsfiddle.net/7hzcB/6/)

**jQuery代码**

```
<script type="text/javascript"> 
 $(function() {
    $(".up").click(function() {
        $(".input-quantity").val(parseInt($(".input-quantity").val()) + 1)
    });
    $(".down").click(function() {
        $(".input-quantity").val(parseInt($(".input-quantity").val()) - 1)
    });
}); 

 </script>​​​​​​​​​​​​​​​​​​ 
```

**html**

```
<div class="inputQty"> 
         <span> 
            <small class="up">^</small> 
             <small class="down">V</small> 
         </span> 
         <input type="text" maxlength="6" name="oa_quantity" class="input-quantity"  value="1"/> 
     </div> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-01T06:04:58.567

**这是你的代码..**

```
$('.up').click(function()
{

 var temp=$('.input-quantity').val();

    $('.input-quantity').val(parseInt(temp)+parseInt(1));

});

$('.down').click(function()
{

 var temp=$('.input-quantity').val();

    $('.input-quantity').val(parseInt(temp)-parseInt(1));

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T06:01:26.513

获取当前值，将其增加 1，替换该值：

```
$(document).ready(function(){
    $('.up').on('click',function(){
        var value = parseInt($('.input-quantity').first().val());
        value++;
        $('.input-quantity').first().val(value);

    });
});​ 
```

[**演示**](http://jsfiddle.net/X57Mz/3/)

让向下按钮工作是对上述代码的简单修改。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T06:03:52.660

```
$('.inputQty small').on('click', function() {

    var cls = $(this).hasClass('up'); // check that it has up class
    $('.input-quantity').val(function() {
        // if up class exists then increase value by 1 else decrease by 1
        return cls ? parseInt(this.value) + 1 : parseInt(this.value) - 1;
    });
}); 
```

**[工作样本](http://jsfiddle.net/thecodeparadox/VK4m7/)**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-01T06:04:14.837

**另一个演示** [http://jsfiddle.net/3v3YL/2/](http://jsfiddle.net/3v3YL/2/)

**代码**B-)

```
var inputval = parseInt($('.input-quantity').val());

$(".up").click(function(){

    $('.input-quantity').val(inputval++);

});

$(".down").click(function(){

     $('.input-quantity').val(inputval--);
});
​ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-01T06:04:32.380

```
$(document).ready( function() {
  var el = $('#test');
  function change( amt ) {
    el.val( parseInt( el.val(), 10 ) + amt );
  }

  $('.up').click( function() {
    change( 1 );
  } );
  $('.down').click( function() {
    change( -1 );
  } );
} ); 
```

# ruby-on-rails - 使用 Capistrano 部署 Rails 应用程序 - 无响应

> ID：10845126
> 
> 赞同：0
> 
> 时间：2012-06-01T05:57:07.383
> 
> 标签：ruby-on-rails, ruby, nginx, passenger, capistrano

我在使用 capistrano 将 rails 应用程序部署到 VPS 时遇到了一些问题。我正在运行 ubuntu 10.04、rvm、rails 3.2.2 和 ruby​​ 1.9.2、nginx 和乘客。

我尝试毫无问题地部署一个测试应用程序，然后尝试以几乎相同的方式使用实际应用程序做所有事情，现在我遇到了麻烦。我运行 cap deploy:setup, cap deploy:check, cap deploy:cold 没有任何错误。

然而，当我尝试访问该网站时，我没有得到任何回应。我也无法访问静态资产。我的 nginx.conf 文件指向 'app_name/current/public'

production.log 也没有给出任何提示。除了有关资产编译和迁移的一些信息之外，它几乎没有任何信息。

所以我很难过。当一切顺利时，我认为我所做的一切都与测试应用程序相同，但显然我忘记了一些事情。让我知道是否可以发布任何文件来帮助诊断问题。感谢帮助！

我的部署.rb：

```
# RVM

$:.unshift(File.expand_path('./lib', ENV['rvm_path']))
require "rvm/capistrano"
set :rvm_ruby_string, 'default'
set :rvm_type, :user

# Bundler

require "bundler/capistrano"

# General

set :application, "my_app"
set :user, "deploy_user"

set :deploy_to, "/home/#{user}/#{application}"
set :deploy_via, :copy

set :use_sudo, false

set :normalize_asset_timestamps, false

# Git

set :scm, :git
set :repository,  "~/#{application}/.git"
set :branch, "master"

# VPS

role :web, "app_name.com"
role :app, "app_name.com"
role :db,  "app_name.com", :primary => true

# Passenger

namespace :deploy do
 task :start do ; end
 task :stop do ; end
 task :restart, :roles => :app, :except => { :no_release => true } do
   run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
 end
end 
```

**编辑 1** nginx access.log 显示了很多这些：

```
[01/Jun/2012:11:23:11 -0400] "-" 400 0 "-" "-" 
```

和 error.log 有这些：

```
cache: [GET /] miss 
```

**编辑 2：**不知道为什么，但我意识到我可以访问应用程序公用文件夹中的资产。这是什么意思！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:31:33.840

你是否正确配置了 Nginx？虚拟主机的根目录必须指向 Ruby on Rails 应用程序的公用文件夹。[将Nginx 与 Phusion 乘客一起](http://www.modrails.com/documentation/Users%20guide%20Nginx.html)使用的文档可能会有所帮助。尝试检查 Nginx 日志文件，`access.log`并且`error.log`，可能它们可以在`/var/log/nginx`.

# c# - 关于c#线程中锁的一个小查询

> ID：10845130
> 
> 赞同：0
> 
> 时间：2012-06-01T05:57:19.943
> 
> 标签：c#, thread-safety

我看到很多使用静态只读对象的锁定，在下面给出的代码中这条语句的意义是什么？我知道锁被应用在一个对象上，这只是一个使锁工作的对象，它只是一个黑客，因为我不'这里不需要任何对象，而只是创建一个对象以使锁定工作？

另外，我不只是说 object obj1= new object() 我使用只读和静态，我猜是由于性能提高，但只读和静态如何帮助提高性能？

```
static readonly object locker = new object(); 
```

代码如下：

```
class ThreadSafe 
{
  static bool done;
  static readonly object locker = new object();

  static void Main()
  {
    new Thread (Go).Start();
    Go();
  }

  static void Go()
  {
    lock (locker)
    {
      if (!done) { Console.WriteLine ("Done"); done = true; }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T06:03:43.893

[建议的做法](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.80%29.aspx)是使用单独的私有对象而不是已经存在的全局可见对象进行锁定，因为其他代码的锁定决策干扰您的私有锁定方案的风险较低（此类问题极难记录，并且诊断；所以最好让他们不可能）。

如果它为静态类提供服务，或者您的意图是应用程序范围的锁定，则该储物柜对象必须是静态的；如果它仅用于锁定单个对象实例，则它必须是实例对象，从而允许并发处理同一服务类或类层次结构的其他对象。

在这种特殊情况下，显式只读不会对性能产生直接影响，但在大多数其他情况下（主要是通过防止重新加载）会产生直接影响，因此将所有只读对象标记为此类是一个有用的习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:07:31.120

拥有一个唯一目的是提供锁的对象可以稍微简化一些事情。为了防止外部代码弄乱你的锁并给你带来各种各样的痛苦，你真的很想要一个对你自己可见的锁。最简单的方法是创建一个对象。（如果你有另一个没有其他人可以访问的对象，你可以想象使用它......但是将锁与其他所有东西分开往往会使东西在概念上更简单。）

至于为什么它是静态的……与其说是性能问题，不如说是正确性问题。为了锁定静态方法或同步对静态资源的访问，您需要一个属于该类而不是实例的对象。否则，每个实例都将锁定自己的锁而不是共享一个——除非只有一个实例，否则这将毫无用处，即使在那时也不正确。`static`对于非静态方法，除非出于某种原因您正在访问静态属性或类似的东西，否则您不会使用。如果您确实使用了它，并且不需要在实例之间同步访问，那么您最终会不必要地锁定并减慢速度。

# c#-4.0 - 如何使用 c# 获取 ms word 中的页码

> ID：10845132
> 
> 赞同：3
> 
> 时间：2012-06-01T05:57:52.127
> 
> 标签：c#-4.0, ms-word

如何使用命名空间获取 ms word 中的页码

```
microsoft.office.interop.word in C#. 
```

请帮我.......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T14:19:38.200

您可以使用以下`Document.ComputeStatistics`方法执行此操作：http: [//msdn.microsoft.com/en-us/library/microsoft.office.tools.word.document.computestatistics.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.word.document.computestatistics.aspx)

有关详细信息，请参阅我之前对类似问题的回答：[https ://stackoverflow.com/a/12339712/700926](https://stackoverflow.com/a/12339712/700926)

# iphone - 设置背景颜色扭曲表格单元格

> ID：10845136
> 
> 赞同：0
> 
> 时间：2012-06-01T05:58:02.900
> 
> 标签：iphone, objective-c, ios

我的一个视图上有一个分组表视图。在 cellForRowAtIndexPath 委托方法中，我为每个表格单元格设置了背景颜色，如下所示。

```
UIColor *color = [UIColor colorWithRed:221.0/255 green:241.0/255 blue:249.0/255 alpha:1.0];
[cell.contentView setBackgroundColor:color]; 
```

背景颜色设置没有任何问题。但是问题出现在顶部和底部单元格中。在顶部和底部单元格有弯曲的边缘。但是当我添加背景颜色时，它会扭曲边缘。我已经在这样的窗口中上传了一个打印屏幕。您可以在我设置背景颜色的底部单元格中看到问题。有人可以告诉我如何解决这个问题。![在此处输入图像描述](../Images/792a7e37b18a4f21a9f7b521f60a179a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:11:32.037

采用`cell.backgroundColor = [UIColor redColor];`

不是

```
[cell.contentView setBackgroundColor:color]; 
```

UITableViewCell 是一个比具有 contentView 属性的对象更复杂的对象。[您可以在UITableViewCell 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)中找到有关单元格的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:15:27.077

将单元格的 clipsToBounds 属性设置为 YES，这应该使其尊重圆形单元格边界。

# ruby-on-rails - Rails 3.2 + CoffeeScript + 命名空间 + 单独文件 = 混乱

> ID：10845143
> 
> 赞同：1
> 
> 时间：2012-06-01T05:58:59.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, coffeescript

我有一个用于 Rails 模型的配套脚本文件，它使用我已经分解成十几个类的层次结构的代码，例如 jQuery/Bootstrap UI 代码、分解不同类型对话框之间的相似性等等。假设我在`articles.js.coffee`这里作为“主页脚本”使用。

我可以定义 Coffeescript 类，`window.ourproject.OurUIDialog`将它们命名为`app/assets/javascripts/OurUIDialog.js.coffee`. 重新启动 Rails 服务器，该类可以是子类，例如`window.ourproject.PostInfoDialog extends window.ourproject.OurUIDialog`. 只要`PostInfoDialog`是在`articles.js.coffee`（在哪里实例化`PostInfoDialog`），一切都很好。

但是，如果我将子类 ( `PostInfoDialog`) 移出到一个单独的文件中，例如 ，`PostInfoDialog.js.coffee`那么尝试在主文章脚本中对其进行任何操作都会产生

> `Uncaught TypeError: Cannot read property 'prototype' of undefined`

再次：

1.  这围绕着 Rails 模型的配套脚本文件，这里称为`articles.js.coffee`;
2.  `window.ourproject.OurUIDialog`无论是在自己的文件中还是在`articles.js.coffee`
3.  `window.ourproject.PostInfoDialog`（extends `OurUIDialog`）只能在它*不在*单独的文件中时使用，*即使*查看生成的 HTML 显示`PostInfoDialog`包含在所有其他脚本文件中。

我正在努力解决这个问题，但我已经没有多少东西可以开始了。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:40:13.957

很确定 Trevor Burnham 在回答这个问题时回答了我的[问题](https://stackoverflow.com/questions/6150455/structuring-coffeescript-code)；我只是在前十次搜索时没有看到它。:-P

不过，感谢你们俩阅读这篇文章。:-)

# objective-c - NSTableHeaderView 调整大小使表格行向下移动

> ID：10845144
> 
> 赞同：0
> 
> 时间：2012-06-01T05:59:13.130
> 
> 标签：objective-c, macos, nsscrollview, nstableheaderview

我创建了一个 NSScrollView 的子类，它被设置为 IB 中带有表格视图的滚动视图的类。我增加了表格标题视图的高度并添加了一个标签作为表格视图的标题。问题是表格行从列标题下方开始的数量等于我使标题视图更高的数量（因此列标题出现在新的更高标题视图的中间）。

![在此处输入图像描述](../Images/1c61ff12f68504bd3a6bf6b4297f61ac.png)

我已经尝试更改表格的原点或大小、表格的剪辑视图、标题视图及其剪辑视图——除了标题视图的大小之外，这些都没有改变。这是我用来制作自定义标题视图的代码：

```
-(void)awakeFromNib {
    //self is a subclass of NSScrollView enclosing an NSTableView
    NSClipView *tableClip = [self.subviews objectAtIndex:0];
    NSClipView *headerClip = [self.subviews objectAtIndex:3];
    NSTableHeaderView *header = [[[self.subviews objectAtIndex:3] subviews]lastObject];
    NSTableView *table = [[[self.subviews objectAtIndex:0] subviews]lastObject];
    NSLog(@"%@  %@  %@  %@",tableClip,headerClip,header,table);

    [header setFrameSize:NSMakeSize(header.frame.size.width, header.frame.size.height+60)];//HeaderView Frame
    NSTextField *titleLabel = [[NSTextField alloc] initWithFrame:NSMakeRect(0, 5, header.frame.size.width,22)];
    titleLabel.selectable = NO;
    titleLabel.font = [NSFont systemFontOfSize:16];
    titleLabel.alignment = NSCenterTextAlignment;
    titleLabel.bordered = NO;
    titleLabel.stringValue = @"This is my title";
    [header addSubview:titleLabel];
} 
```

# jsp - JSP 2.0 - 在没有 .tld 声明的 JSP 文档中使用标记文件

> ID：10845150
> 
> 赞同：4
> 
> 时间：2012-06-01T05:59:56.077
> 
> 标签：jsp, jsp-tags

我想在我的**jsp 文档**文件中使用这样的东西：

```
<%@ taglib prefix="tags" tagdir="/WEB-INF/tags" %> 
```

但是，在我见过的所有 30 多个示例中，每个人都使用简单的 jsp 语法，而不是 jsp 文档语法。像这样的东西：

```
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
    xmlns:t="/WEB-INF/tags" 
    xmlns="http://www.w3.org/1999/xhtml"
    version="2.0"> 
```

根本行不通。在页面上看不到所有驻留在 /WEB-INF/tags 中的标签文件。只有我定义了一个 tld 文件，并列出了那里的所有标签，才能在页面上访问它们。是否可以避免 tld 声明并仍然在 jsp 文档页面中使用标记文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T06:53:28.293

1 在您的 WEB-INF/ 目录中创建标签目录

2 创建您的标签所在的 sample.tag 文件：

```
<%@ attribute name="exampleAttribute" required="true" type="java.lang.String" description="Example attribute" %>

<c:out value="${exampleAttribute}"> 
```

3 在你想要使用它的 jsp 中声明标签库：

```
<%@ taglib prefix="tags" tagdir="/WEB-INF/tags" %> 
```

4 使用它：

```
<tags:sample exampleAttribute="Hello from custom tag!"/> 
```

而且我认为您应该拥有 Web 应用程序 2.5 的版本。仅从支持 JSP 2.0 的版本开始考虑（检查 web.xml）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T15:33:49.517

您需要在 xmlns 属性中添加前缀“urn:jsptagdir:”。在你的情况下，

```
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
    xmlns:t="urn:jsptagdir:/WEB-INF/tags" 
    xmlns="http://www.w3.org/1999/xhtml"
    version="2.0"> 
```

您还可以使用前缀“urn:jsptld:”来指定 TLD 的位置。[有关更多详细信息，请参阅http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPX3.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPX3.html)中的“声明标记库”部分。

# elasticsearch - 弹性搜索中的脚本

> ID：10845153
> 
> 赞同：5
> 
> 时间：2012-06-01T06:00:17.670
> 
> 标签：elasticsearch

我是 elasticsearch 的新手，目前正在研究 ES 中的脚本。如果任何了解 elasticsearch 中的脚本的人都可以对脚本及其在 ES 中的使用有所了解，那将是非常棒的？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-01T12:09:58.583

您可以从阅读 elasticsearch 文档开始。elasticsearch 网站上的以下主题涵盖了脚本：

*   [一般信息](http://www.elasticsearch.org/guide/reference/modules/scripting.html)
*   [脚本字段](http://www.elasticsearch.org/guide/reference/api/search/script-fields.html)
*   [使用脚本过滤结果](http://www.elasticsearch.org/guide/reference/query-dsl/script-filter.html)
*   [使用脚本对结果进行排序](http://www.elasticsearch.org/guide/reference/api/search/sort.html)
*   [在构面中使用脚本](http://www.elasticsearch.org/guide/reference/api/search/facets/index.html)（请参阅各个构面文档页面）

如果在查看这些页面后，您仍然对脚本有疑问，请不要犹豫，在 elasticsearch 邮件列表或 stackoverflow 上提问。遵循elasticsearch 网站[帮助](http://www.elasticsearch.org/help/)页面上的指南将显着提高您获得快速有用答案的机会。

# objective-c - 使用 chcsv 解析器将 sqlite db 转换为 csv（需要使用核心数据而不是 fmdb）

> ID：10845154
> 
> 赞同：0
> 
> 时间：2012-06-01T06:00:35.223
> 
> 标签：objective-c, sqlite, core-data, csv, fmdb

我正在使用[CHCSVParser](https://github.com/davedelong/CHCSVParser.git) 将 sqlite 文件转换为 csv 格式。在此链接 -[如何在 iPhone SDK 中将 SQLite 文件导出为 CSV 文件，](https://stackoverflow.com/questions/4656887/how-to-export-sqlite-file-into-csv-file-in-iphone-sdk) 该示例提供了使用 FMDB 库（sqlite db 上的包装器）执行此操作的精确方法。我可以使用 FMDB 来做到这一点。但我实际上想使用 CHCSV 解析器使用核心数据（访问 sqlite db）。

简而言之，我的 iOS 应用程序正在尝试使用核心数据访问 sqlite db（之前使用核心数据生成），然后转换为 csv 文件。我是核心数据的新手，所以发现它有点困难。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T08:24:06.263

您不能使用 Core Data 读取任意 SQLite 文件。Core Data 通常使用 SQLite 来持久化数据，但 Core Data 控制数据库中的表和列的命名方式（以及其他一些事情）。如果您需要/想要读取不是由 Core Data 编写的 SQLite 文件，则需要直接使用 SQLite（或 FMDB 之类的包装器）读取它。

# open-source - 适用于单用户的 GPL 许可软件

> ID：10845156
> 
> 赞同：-1
> 
> 时间：2012-06-01T06:00:42.740
> 
> 标签：open-source, licensing, gpl

我有一个关于 GPL 许可的问题，我在 GPL 常见问题解答中找不到答案。我打算使用 GPL 许可库（实际上是一个 DLL）并将其动态链接到我的财产软件。由于我和我的客户之间的合同，我正在开发我的软件。我没有未来计划向不同的客户发布它，它将为单个客户开发。在我们的合同中，我还需要与二进制文件一起发布我的源代码。我知道，如果我使用 GPL 许可库，我需要让我的软件获得 GPL 兼容许可。但是，我并不打算公开我的源代码。将来，如果他们愿意，我的客户会向公众开放。

问题是：如果我使用与 GPL 兼容的许可证许可我的软件并将我的源代码和二进制文件交付给我的合同客户而不公开源代码，那么关于 GPL 许可条款是否会有任何问题/违反？请注意：我接受我的合同客户在将来需要时将源代码公开。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:04:33.927

不可以。关于使源可用的条款*仅适用于二进制的消费者*。没有必要向您未提供二进制文件的任何人显示源代码。

# sql - 使用字符串语句的 SQL 数据类型

> ID：10845160
> 
> 赞同：0
> 
> 时间：2012-06-01T06:00:52.397
> 
> 标签：sql, sql-server, sqldatatypes

我想创建一个这样的 SQL Server 存储过程：

```
CREATE PROCEDURE dbo.uspGetCharacterID                             
   (@characterName vchar(1000)) 
as            
   SELECT c.charatcer_full    
   FROM CHARACTER c (nolock)      
   WHERE character_full IN (@characterName)      
   ORDER BY C.characterID 
```

从代码中，`@charactername`我通过 -->`'Batman in latest movies', 'Superman in latest movies'`

但在代码中它返回零行。

注意：如果我在 SQL 中使用这些字符串运行相同的选择查询，它会成功返回两行。

**问题**：应该使用哪种数据类型，以便满足要求？

`'Varchar'`并`'Text'`没有工作。

请指导

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:45:06.420

```
CREATE TYPE tp_names AS
        TABLE
        (
        name VARCHAR(1000) NOT NULL
        )

GO

CREATE PROCEDURE
        uspGetCharacterID (@names tp_names READONLY)
AS
        SELECT  c.character_full    
        FROM    CHARACTER c
        WHERE   character_full IN
                (
                SELECT  name
                FROM    @names
                )
        ORDER BY
                characterID

GO

DECLARE @names tp_names

INSERT
INTO    @names
VALUES
        ('Batman in latest movies'),
        ('Superman in latest movies')

EXEC    uspGetCharacterID
                @names = @names 
```

# streaming - 播放rtsp流的延迟

> ID：10845168
> 
> 赞同：2
> 
> 时间：2012-06-01T06:01:44.217
> 
> 标签：streaming, rtsp, vlcj

我正在使用 Windows 7 系统中的 vlcj 在 java 中试验 rtsp 流。我发现显示视频有 5 秒的延迟。我试图将它写入一个临时的 .mpg 文件。我怎样才能将该文件的内容提供给流媒体播放时播放器？

# android - Android - 使用 postDelayed() 调用定期运行方法

> ID：10845172
> 
> 赞同：46
> 
> 时间：2012-06-01T06:02:13.643
> 
> 标签：android, postdelayed

我在一个 Android 应用程序中遇到一种情况，我想启动一个应该每秒运行的网络活动（发送一些数据）。我实现这一点如下：

在`onCreate()`我有代码：

```
tv = new TextView(this);
tv.postDelayed(sendData, 1000); 
```

`sendData()`功能：

```
 Handler handler = new Handler();
   private Runnable sendData=new Runnable(){
    public void run(){
        try {
            //prepare and send the data here..
            handler.removeCallbacks(sendData);
            handler.postDelayed(sendData, 1000);    
        }
        catch (Exception e) {
            e.printStackTrace();
        }   
    }
}; 
```

问题是这样出现的：当用户按下后退按钮并且应用程序出现（UI 消失）时，该`sendData()`功能仍然会被执行，这正是我想要的。现在，当用户重新启动应用程序时，我`onCreate()`会再次被调用，并且每秒会`sendData()`被调用两次。就这样继续下去。每次用户出来并重新开始时，`sendData()`每秒都会发生一次。

我究竟做错了什么？是我的`new Handler()`创作问题吗？处理这个问题的最佳方法是什么？我希望`sendData()`每秒打一个电话，直到用户退出应用程序（表单应用程序管理器）。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-12-26T11:51:46.643

```
final Handler handler = new Handler();
    handler.postDelayed(new Runnable() {
      @Override
      public void run() {
        //Do something after 100ms
        Toast.makeText(c, "check", Toast.LENGTH_SHORT).show();  
        handler.postDelayed(this, 2000);
      }
    }, 1500); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-06-01T06:12:53.710

也许涉及活动的生命周期方法来实现这一点：

```
Handler handler = new Handler();

@Override
protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      handler.post(sendData);
}

@Override
protected void onDestroy() {
      super.onDestroy();
      handler.removeCallbacks(sendData);
}

private final Runnable sendData = new Runnable(){
    public void run(){
        try {
            //prepare and send the data here..

            handler.postDelayed(this, 1000);    
        }
        catch (Exception e) {
            e.printStackTrace();
        }   
    }
}; 
```

在这种方法中，如果您在 activity 或 call 上按*返回键*`finish();`，它也会停止*postDelayed*调用。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-06-01T06:11:17.307

为什么不创建服务并将逻辑放入`onCreate()`. 在这种情况下，即使您按下返回按钮，服务也会继续执行。一旦您进入应用程序，它就不会 `onCreate()`再次调用。相反，它会调用`onStart()`

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-09-25T08:47:50.397

您可以像这样简化代码。

在 Java 中：

```
new Handler().postDelayed (() -> {
    //your code here
}, 1000); 
```

在科特林：

```
Handler().postDelayed({
   //your code here
}, 1000) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-11T22:37:54.180

请在下面的代码中检查它在我身边的工作，当您进行相同的活动时，您的处理程序将在每 1 秒后运行一次

```
 HandlerThread handlerThread = new HandlerThread("HandlerThread");
                handlerThread.start();
                handler = new Handler(handlerThread.getLooper());
                runnable = new Runnable()
                {
                    @Override
                    public void run()
                    {

                            handler.postDelayed(this, 1000);
                        }
                };
                handler.postDelayed(runnable, 1000); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-26T17:36:54.067

```
Handler h = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        super.handleMessage(msg);
        if (msg.what==0){
            // do stuff
            h.removeMessages(0);  // clear the handler for those messages with what = 0
            h.sendEmptyMessageDelayed(0, 2000); 
        }
    }
};

 h.sendEmptyMessage(0); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-01T06:13:30.353

我认为您可以尝试不同的活动标志，因为这听起来像是多个实例。

"singleTop" "singleTask" "singleInstance"

是我会尝试的，它们可以在清单中定义。

[http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-01T06:17:47.817

您应该在 Manifest.xml**中将 andrid:allowRetainTaskState="true"**设置为 Launch Activity。如果此 Activity 不是 Launch Activity。你应该在这个活动中设置**android:launchMode="singleTask"**

# php - 限制文件下载php

> ID：10845173
> 
> 赞同：4
> 
> 时间：2012-06-01T06:02:14.143
> 
> 标签：php, authorization, download

我的代码中有这个：

```
<a href = "res/pdf/sample.pdf">Sample PDF</a> 
```

所以基本上它似乎是文件“sample.pdf”的下载链接，但问题是，下载这个文件是有限制的。因此，每当上传了机密报告并且恶意用户不小心记住或查看了浏览器历史记录中下载链接的 URL 时，即使不访问该网站，他也可以轻松下载它，因为它是直接链接。我应该怎么做才能保护这个链接？还是只为分配给它的用户下载？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T06:05:39.553

不要通过其直接 URL 提供文件。让 PHP 脚本接收所需文件的文件名，并提供它。

所以，如果有人想下载上述文件，他会去

`example.com/getfile?file=sample.pdf`

您的 PHP 脚本将检查当前用户是否有权查看该文件，然后提供该文件。

使您的链接像这样：

```
<a href = "http://example.com/getfile?file=sample.pdf">Sample PDF</a> 
```

您当前的方法对于敏感文件非常不安全。恶意用户可以轻松编写脚本来下载`res/pdf`. 他需要做的就是检查目录中每个字母的排列，并扔掉所有的 404 错误。

您不会重定向用户，因为这会破坏目的。`Content-disposition`您将使用适当的标题将文件作为下载提供。

这是一个示例：[使用 PHP 提供文件的最快方式](https://stackoverflow.com/questions/3697748/fastest-way-to-serve-a-file-using-php)

您可以 google 并获得更多示例。

这是一个很好的示例，展示了如何提供 PDF 文件： [https ://serverfault.com/questions/316814/php-serve-a-file-for-download-without-providing-the-direct-link](https://serverfault.com/questions/316814/php-serve-a-file-for-download-without-providing-the-direct-link)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:05:10.803

您可以限制使用 htaccess

# html - CSS 循环布局列

> ID：10845174
> 
> 赞同：3
> 
> 时间：2012-06-01T06:02:15.503
> 
> 标签：html, css

我有一个这样的列表：

```
<ul>
  <li>A</li>
  <li>B</li>
  <li>C</li>
  <li>D</li>
  <li>E</li>
  .... etc ....
</ul> 
```

而不是它最终像

```
A
B
C
D
E
... 
```

我希望它最终出现在这样的列中：

```
A      B      C
D      E      F
G      H      I
....  etc  (ordered alphabetically) 
```

如果我必须用服务器端语言来做这件事，我会做一些事情，比如创建三个数组，每列一个，然后循环遍历每个项目，把它放在正确的列中，但是有没有更简单的方法来做到这一点CSS3？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T06:55:57.403

使用这个 CSS：

```
li {
    display: inline
}

li:nth-child(3n):after {
    content: '\a';
    white-space: pre;
} 
```

演示：http: [//jsfiddle.net/3UN4f/1/](http://jsfiddle.net/3UN4f/1/)

首先我使列表项内联，然后`\a`插入换行符。这是规范：[http](http://www.w3.org/TR/CSS2/syndata.html#strings) ://www.w3.org/TR/CSS2/syndata.html#strings 。`nth-child`是 CSS3：[http ://www.w3.org/TR/css3-selectors/#nth-child-pseudo](http://www.w3.org/TR/css3-selectors/#nth-child-pseudo)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T06:09:53.853

我有两种方法给你：

1.  使用`<table>`为了有列
2.  为您的元素设置此 CSS：

```
li {
   width: 100px;
   float: left;
}

ul {
   width: 320px;
}
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T06:15:36.347

我不知道这是否合适，但看看[演示小提琴](http://jsfiddle.net/3UN4f/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T07:19:24.417

你有不同的选择：

1.  多列布局（atm 在浏览器中的支持不是很好） -[规格](http://www.w3.org/TR/css3-multicol/)
2.  将`float:left`和`width:100%/<no of cols>`（对于 3 列 = 33%）放在 -`li`元素上
3.  在伪元素上的`:nth-child(<no of cols>)`via之后放置一个 break 。`content`
4.  如果您有表格数据：使用表格

# haskell - 用户应该使用/避免哪些 Haskell (GHC) 扩展？

> ID：10845179
> 
> 赞同：64
> 
> 时间：2012-06-01T06:02:27.513
> 
> 标签：haskell, language-extension

我有几次让 GHC 告诉我使用扩展的经验，只是发现在使用该扩展时，我使代码变得更加复杂，而一个简单的重构可以让我坚持使用 Haskell 98（现在[2010](http://www.haskell.org/onlinereport/haskell2010/haskell.html#haskellli2.html) ) 并有一个更直接的解决方案。

另一方面，有时 GADT 或 Rank2Types（很少是 RankNTypes）可以减少工作量和更简洁的代码。

哪些扩展通常会掩盖更好设计的可能性，哪些通常会改进它？如果有一些两者兼而有之，那么在决定使用该扩展程序之前，用户应该寻找什么（确定他们想要的解决方案是否正确）？

（另请参阅[我是否应该使用 GHC Haskell 扩展？](https://stackoverflow.com/questions/801785/should-i-use-ghc-haskell-extensions-or-not)）

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-01T11:54:03.147

道德上“好”的扩展和道德上“坏”的扩展列表 - 这是一个审美判断！

**好的**

*   GADT
*   并行列表推导
*   图案防护
*   单子理解
*   元组部分
*   记录通配符
*   空数据声明
*   存在类型
*   广义新类型推导
*   MPTC + FD
*   类型族
*   显式量化
*   高阶多态性
*   词法范围的 tyvar
*   爆炸模式

**坏的**

*   SQL 推导式
*   隐式参数

**丑陋的**（但必要的）

*   模板 Haskell
*   未装箱的类型和元组
*   不确定的、重叠的和不连贯的实例——通常意味着你有一个错误的设计。

**没有把握**

*   箭头符号
*   查看模式

# google-apps-script - 在 Apps 脚本中的自定义函数中，BigQuery 调用失败

> ID：10845185
> 
> 赞同：0
> 
> 时间：2012-06-01T06:03:07.137
> 
> 标签：google-apps-script, google-bigquery

我在 Apps Script 中编写了一个自定义函数，该函数使用函数参数构造查询，并调用提供查询的 BigQuery 服务（我使用 API 密钥启用了该服务）。但是当我在电子表格中使用该函数时，它总是返回服务器错误。

```
error: We're sorry, a server error occurred. Please wait a bit and try again. 
```

这是我的代码（当我通过手动提供变量在调试器中运行它时它可以工作）：

```
function GetAge(first_name, last_name) {
  var select_text = "SELECT first_name, last_name, age FROM Testing.FullNames WHERE ";
  var filter_text = "first_name = '" + first_name + "' AND last_name= '" + last_name + "' ";
  var group_text = "GROUP BY 1,2;";
  var query_text = select_text + filter_text + group_text;

  var query = {'query': query_text};
  var response = BigQuery.Jobs.query('<My Project Id>', query);

  var value = response.getRows()[0].getF()[2].getV();

  return value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:20:02.643

v2 API 已启用？首次尝试运行时，是否提示您完成 OAuth 流程？

注意 - 一旦你克服了这个初始错误，你就需要改变你的查询参数。查询调用只需要一个字符串作为第二个参数：

```
var response = BigQuery.Jobs.query('project_id', query_text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:32:52.450

BigQuery 服务 v2beta1 目前仅限于部分受信任的测试人员。如果您改为使用 v2 版本（需要字符串查询），它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T00:48:20.530

[这里](https://devsite.googleplex.com/apps-script/articles/bigquery_tutorial)有一个关于如何从 Google Apps 脚本调用 BigQuery API 的教程。

# ios - 使用 GCD 和 NSData 时的 Web 请求锁

> ID：10845191
> 
> 赞同：0
> 
> 时间：2012-06-01T06:03:34.487
> 
> 标签：ios, httpwebrequest, nsdata, grand-central-dispatch

我有以下代码。任何线索为什么我偶尔会遇到死锁？大多数情况下它工作得很好，似乎当发生 wi-fi 到 3g 的转换或应用程序处于非活动状态并恢复运行时，就会发生死锁。

```
-(void) dictionaryFromJSONWithURL: (NSURL *) URL callback: (void (^)(NSDictionary* resp, NSError* error)) block{

#ifdef TX_DEBUG
    NSLog(@"%s", __FUNCTION__);
#endif

dispatch_async( dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_HIGH, 0 ), ^(void){
    NSData* data = [NSData dataWithContentsOfURL:URL ];

    NSError* error = nil;
    NSDictionary* dict = [NSJSONSerialization 
                          JSONObjectWithData:data //1                              
                          options:kNilOptions 
                          error:&error];

    dispatch_sync(dispatch_get_main_queue(), ^{
        if(error || !dict) block(nil, error);
        else block(dict, nil);
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:09:23.257

```
dispatch_sync(dispatch_get_main_queue(), ^{
        if(error || !dict) block(nil, error);
        else block(dict, nil);
    }); 
```

这**可能**是问题所在，您不应该同步调度到主队列。

它并不总是锁定的事实引起了我的兴趣。

# c# - 从 Java 到 C#，线程构造的差异

> ID：10845192
> 
> 赞同：0
> 
> 时间：2012-06-01T06:03:35.157
> 
> 标签：c#, java

我已经从 java 迁移到 C#，并且对 wait() 和 sleep() 感到困惑。在 java 中，sleep 不会移除对对象的锁定，并且在 sleep 完成后线程重新开始工作，并且在等待的情况下，它会从对象中移除锁定并允许其他线程访问该对象一段时间。

在 C# 中也是如此还是有什么不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T06:06:40.823

是的，在 C# 中也是如此。在大多数情况下，`Thread.sleep`Java中的,`Object.wait`​​ , `Object.notify`,与 .NET 中的 ,​​ , ,`Object.notifyAll`密切对应。`Thread.Sleep``Monitor.Wait``Monitor.Pulse``Monitor.PulseAll`

我希望在公平性等细节上有一些差异，但基本原理是一样的。

但是，您应该很少在现代代码中使用这些低级抽象，无论是在 Java 还是 C# 中 - 在 Java 中`java.util.concurrent`，在 .NET 中使用更高级别的抽象，`Task`如果可以（并且如果您在.NET 4)。特别是，使用`Task`将使您为 C# 5（和 WinRT）中的异步盛宴做好准备。

# mysql - MySql 添加索引：0 行受影响

> ID：10845197
> 
> 赞同：7
> 
> 时间：2012-06-01T06:04:00.050
> 
> 标签：mysql, indexing

```
Alter table table1 add index col1_idx (column1); 
```

即使 table1 有很多行并且所有的 column1 都有非空值，上面的查询说“0 Rows AFfected”。为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T06:07:00.307

这是因为查询不会直接影响任何行，而不是修改行的更新语句。它（非常、非常、非常基本）只会改变列的存储和排序方式。

# batch-file - 在 linux 上运行的 IBM Message Broker 需要调用 windows 可执行文件。可以做到吗？

> ID：10845200
> 
> 赞同：0
> 
> 时间：2012-06-01T06:04:15.280
> 
> 标签：batch-file, messagebroker

场景是：

在 linux 上运行的 IBM WMB V8 在 MQ 消息中提供了一个用户 ID 列表。对于每个用户 ID，我需要连接到 Windows 框（可能是 samba 共享），然后将此用户 ID 传递给 Windows 可执行文件，即

C:\temp\command.exe 1234 C:\temp\command.exe 5678

此命令的输出会将这个用户的图像从数据库输出返回到目录。

WMB 然后去检索这个图像并以某种方式映射（用户 ID => 图像）并在某处更新数据库。

在不涉及 Windows 机器上的其他处理器的情况下，这种情况在 WMB 中是否可行？

我看不到任何可以帮助解决此问题的节点，我希望我必须将用户 ID 列表转储到一个文件中并使用 perl 或类似方法来处理命令和图像捕获并将这些作为消息或其他内容返回给 WMB .

问候，

萨帕托斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T23:03:24.673

似乎是一项艰巨的任务。您可以在 C 中调用任意 C 代码和代码自定义节点，因此这并非不可能，因为您可能可以使用 C 和库互联网来做大多数事情。

似乎你可以通过在 windows 框上设置一个简单的服务来节省几个月的麻烦，例如监听 MQ 的东西，调用命令然后用图像回复。你没有错过任何东西。WMB 中没有针对此任务的任何内置功能。至少在非 Windows 平台上运行时不会。

# sql - TSQL 连接查询

> ID：10845201
> 
> 赞同：2
> 
> 时间：2012-06-01T06:04:24.597
> 
> 标签：sql, tsql, ssis

```
Employee Table:
Empid   FNAme           LName      Hair Race
1       john            adam       1     1
2       clift           susanne    2     3

Code Table:
code  type    description
1     hair    black
2     hair    brown
1     race    black
3     race    white 
```

我们需要得到输出数据`empid, Fname, Lname, Hair, Race`；其中`hair`和`race`不显示为代码，而是描述形成代码表。

我是 sql 的初学者。你能帮我写一个查询吗？我在下面的查询中没有得到预期的输出

```
select E.Empid,E.FName,E.Lname,c.description as Hair,c.description as race
From Employee2 E  inner join code c
on (c.code = E.Hair ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T06:10:25.960

您应该加入您的代码表两次：

*   一次得到头发
*   一次参加比赛

**SQL 语句**

```
SELECT E.EmpID
       , E.FName
       , E.LName
       , c1.Description AS Hair
       , c2.Description AS Race
FROM   Employee E
       INNER JOIN Code c1 ON c1.Code = e.Hair AND c1.type = 'hair'
       INNER JOIN Code c2 ON c2.Code = e.Race AND c2.type = 'race' 
```

*请注意，如果其中任何一个可能是`NULL`，您可能需要将 更改`INNER JOIN`为`LEFT OUTER JOIN`*

* * *

话虽如此，我建议您**为 Hair 和 Race 创建一个单独的代码表**。

试图将所有内容都转储到一个代码表中只会使人们感到困惑，并迫使您充其量编写次优查询。您强迫自己将类型添加到代码表以及您将创建的每个连接中。

更好的选择是

```
Employee Table:
Empid   FNAme           LName      Hair Race
1       john            adam       1     1
2       clift           susanne    2     3

HairCode Table:
code  description
1     black
2     brown

RaceCode Table:
1     black
3     white 
```

并将您的陈述简化为

```
SELECT E.EmpID
       , E.FName
       , E.LName
       , c1.Description AS Hair
       , c2.Description AS Race
FROM   Employee E
       INNER JOIN HairCode c1 ON c1.Code = e.Hair 
       INNER JOIN RaceCode c2 ON c2.Code = e.Race 
```

您将免费获得更好的性能和更小的占用空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T06:10:55.250

您可以加入两次以获得您需要的数据

```
select E.Empid, E.FName, E.Lname, hair.description as Hair, race.description as race 
From Employee2 E  
inner join code hair on (hair.code = E.Hair and hair.type = 'hair' ) 
inner join code race on (race.code = E.Race and race.type = 'race') 
```

# javascript - 如何调用 datepicker jquery 的 js 函数 onSelect 事件？

> ID：10845206
> 
> 赞同：11
> 
> 时间：2012-06-01T06:04:53.923
> 
> 标签：javascript, jquery, datepicker, onselect

请任何人帮助我..我有一个js函数

```
function updateAb(param){ some manipulation } 
```

我正在调用 datepicker jquery onselect 事件，例如..

```
$( ".datepicker").datepicker({onSelect: function(dateText, inst) { ... }}); 
```

我想在select中调用js函数，怎么做？我的目标是从日期选择器中获取日期选择值并在输入字段中设置属性值。谁能帮我？？？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-01T06:08:43.853

**这是你的代码**

```
$('.datepicker').datepicker({
    dateFormat: 'dd-mm-yy',
    numberOfMonths: 1,
    onSelect: function(selected,evnt) {
         updateAb(selected);
    }
});

function updateAb(value){     
    $('#yourInputID').val(value);    
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T06:07:03.020

```
$( ".datepicker").datepicker({
    onSelect: function(dateText, inst) { 
        updateAb(dateText);
    }
}); 
```

更简单地说，如果您确实希望将`dateText`and`inst`参数传递给`updateAb`

```
$( ".datepicker").datepicker({onSelect: updateAb}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T06:06:29.450

```
$( ".datepicker").datepicker({
       onSelect: function(dateText, inst) {
          updateAb(dateText, inst);
       }
}); 
```

简而言之

```
$( ".datepicker").datepicker({
    onSelect: updateAb
}); 
```

# swing - Jython swing supercall 到类“扩展”JTextField

> ID：10845209
> 
> 赞同：2
> 
> 时间：2012-06-01T06:05:09.010
> 
> 标签：swing, jython

我正在尝试制作一个类似于[此处面板](http://docs.oracle.com/javase/tutorial/uiswing/painting/step2.html)的自定义 TextField 。但是，如果我尝试为某些方法调用 super ，它会进入无限递归，导致递归限制（对于 stackoverflow 从来没有更合适的问题；）），这些方法是例如`paint`和`add`（我试过的那两个，我猜这是继承的一切）。

这是重要的代码摘录：

```
class inputWithButtons(JLayeredPane):
    def __init__(self):
        self.setLayout(_textFieldWithButtons())

        self._fileField = JTextField()
        self.add(self._fileField, Integer(1))
        self.preferredSize = (0, 40) #TODO: why does minimumSize not work?

    def add(self, component, layer):  #recurses indefinitly
        super(inputWithButtons, self).add(component, layer)
        self.revalidate() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-09T10:58:22.070

如果该方法在各自的 java 类中受到保护，则必须使用以下语法（老实说，讨厌这种方法）

```
self.super__ 
```

前任：

```
from javax.swing import JPanel

class panel(JPanel):
    def paintComponent(self, graphic):
        self.super__paintComponent(graphic)
        # Do something 
```

[来源](http://sourceforge.net/p/jython/mailman/message/8856980/)

要调用任何其他超类方法，请使用以下语法：

```
SuperClassName.method(self, *args) 
```

使用[新型类](http://docs.python.org/glossary.html#term-new-style-class)：

```
super(panel, self).method(*args) 
```

# c# - 外部应用程序调用 Excel VSTO 加载项中的事件

> ID：10845211
> 
> 赞同：-2
> 
> 时间：2012-06-01T06:05:12.187
> 
> 标签：c#, winforms, excel, vsto, invoke

Excel 加载项中的`Refresh`按钮/方法需要通过外部 winform 应用程序调用。这是我要做的事情：

```
private Microsoft.Office.Interop.Excel.Application excel = new Microsoft.Office.Interop.Excel.Application();
public FormMain()
{
InitializeComponent();
RefreshExcelSheet(@C:\a.xls");
} 

private bool RefreshExcelSheet(string path)
        {
           using (var wb = excel.Workbooks.Open(path).WithComCleanup()) 
```

**如何单击刷新按钮或简单地调用其事件？**

我正在查看这些文章，但它们使用的是 VBA，我想要一个 Winform 应用程序来打开电子表格并单击按钮：
[从 VBA (Excel) 访问 VSTO 应用程序插件类型](https://stackoverflow.com/questions/1474205/accessing-a-vsto-application-addin-types-from-vba-excel)
[将 VSTO 功能暴露给 VBA w/o local admin](https://stackoverflow.com/questions/120579/expose-vsto-functionality-to-vba-w-o-local-admin)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:09:13.853

解决此问题的最简单方法是通过将现有的自定义 .net 方法公开为 COM 方法，方法是制作一个 com 可调用包装对象 (CCW)。VSTO 为您提供了一种公开 COM 自动化服务器的简单方法。

[http://blogs.msdn.com/b/andreww/archive/2007/01/15/vsto-add-ins-comaddins-and-requestcomaddinautomationservice.aspx](http://blogs.msdn.com/b/andreww/archive/2007/01/15/vsto-add-ins-comaddins-and-requestcomaddinautomationservice.aspx)

**由 OP 编辑​​：** Andrew Whitechapel 更新了这篇文章，但我无法让它工作。即使使用`StandardOleMarshalObject`并注册 COM 互操作，我仍然会收到与本文中详述的相同的错误消息：http: [//blogs.msdn.com/b/andreww/archive/2008/08/11/why-your-comaddin-object-应该从-standardolemarshalobject.asp 派生](http://blogs.msdn.com/b/andreww/archive/2008/08/11/why-your-comaddin-object-should-derive-from-standardolemarshalobject.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:25:44.903

如果您可以扩展 Excel 加载项，匿名类型的建议肯定是最好的方法。

如果它是第 3 方工具，仍然可以使用功能区的 IAccessible 接口来调用功能区按钮。但是，您可以预期这要复杂得多。如果您必须遵循该路径，这里有一些链接可以帮助您入门：

*   [如何获取功能区自定义选项卡 ID？](https://stackoverflow.com/questions/615482/how-to-get-ribbon-custom-tabs-ids)
*   [http://www.codeproject.com/Articles/38906/UI-Automation-Using-Microsoft-Active-Accessibility](http://www.codeproject.com/Articles/38906/UI-Automation-Using-Microsoft-Active-Accessibility)

# objective-c - 是否可以在表格视图中移动一个部分

> ID：10845215
> 
> 赞同：4
> 
> 时间：2012-06-01T06:05:33.737
> 
> 标签：objective-c, ios, xcode, uitableview

我想在表格视图中移动部分。我用谷歌搜索了这个我没有找到任何关于那个的文件。任何文档或示例代码都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:03:56.593

您在 UITableView 类中有这些功能：

```
– insertSections:withRowAnimation:
– deleteSections:withRowAnimation:
– moveSection:toSection: 
```

它们在官方 API 文档中有详细记录：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/moveSection:toSection](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/moveSection:toSection)：

# c - 如何使用 C 中的银行家舍入将 double 舍入为 int

> ID：10845220
> 
> 赞同：6
> 
> 时间：2012-06-01T06:06:07.313
> 
> 标签：c, algorithm, rounding

我想编写一个函数来使用银行家的舍入方法将双精度数舍入为整数（舍入一半到偶数：[http](http://en.wikipedia.org/wiki/Rounding#Round_half_to_even) ://en.wikipedia.org/wiki/Rounding#Round_half_to_even ），例如：

```
int RoundToInt(double x); 
```

我怎样才能做到这一点？

**更新**：

我能得到的最好的是：

```
int RoundToInt(double x)
{
  int s = (int)x;
  double t = fabs(x - s);

  if ((t < 0.5) || (t == 0.5 && s % 2 == 0))
  {
    return s;
  }
  else
  {
    if (x < 0)
    {
      return s - 1;
    }
    else
    {
      return s + 1;
    }
  }
} 
```

但这很慢，我什至不确定它是否准确。

有没有一些快速准确的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T06:12:11.393

使用标准`lrint`功能；在默认的舍入模式下，它会给出你想要的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T06:11:02.727

```
double decimal = x % 1;
if(decimal < 0.5) return (int)x;
if(decimal > 0.5) return (int)x + 1;
return (int)x + ((int)x % 2 == 1 ? 1 : 0); 
```

# java - 如何在 java 中使用 jdbc 为 oracle 10g 执行 log miner PL/SQL 查询

> ID：10845221
> 
> 赞同：0
> 
> 时间：2012-06-01T06:06:13.357
> 
> 标签：java, jdbc, plsql, oracle10g

我在 Oracle 中为我的项目使用了一个名为 LogMiner 的工具。我在 Windows 7 32 位机器上使用 Oracle 10g。

为了启动日志挖掘工具，我登录`sqlplus`并执行以下查询：

```
 //Query to create flat file

 alter system set utl_file_dir='C:\oracle\product\10.2.0\logminer_dir' scope=spfile;
 shutdown immediate
 startup
 show parameter utl_file_dir
 SELECT SUPPLEMENTAL_LOG_DATA_MIN FROM V$DATABASE;    
 ALTER DATABASE ADD SUPPLEMENTAL LOG DATA;

 SELECT SUPPLEMENTAL_LOG_DATA_MIN FROM V$DATABASE;
 alter system switch logfile; 
```

这个 PL/SQL 查询使用 sqlplus 运行良好，但现在我想在 Java 中使用 jdbc 运行同样的查询

我为它编写了以下代码，如下所示：

```
 package src;
    import java.awt.event.ActionEvent;
    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.ResultSet;
    import java.sql.Statement;
    import javax.swing.JButton;
    import javax.swing.JLabel;
    import javax.swing.WindowConstants;
    import javax.swing.SwingUtilities;

    public class LogMiner extends javax.swing.JFrame {
      private JLabel jLabel1;
      private JButton jButton1;
      private JButton jButton4;
      private JButton jButton3;
      private JButton jButton2;

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            LogMiner inst = new LogMiner();
            inst.setLocationRelativeTo(null);
            inst.setVisible(true);
        }
    });
}

public LogMiner() {
    super();
    initGUI();
}

private void initGUI() {
    try {
        setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
        getContentPane().setLayout(null);
        {
            jLabel1 = new JLabel();
            getContentPane().add(jLabel1);
            jLabel1.setText("LogMiner Tool");
            jLabel1.setBounds(236, 18, 97, 21);
        }
        {
            jButton1 = new JButton();
            getContentPane().add(jButton1);
            jButton1.setText("Create the flat file");
            jButton1.setBounds(212, 71, 133, 28);
        }
        pack();
        setSize(600, 400);
    } catch (Exception e) {

        e.printStackTrace();
    }

 jButton1.addActionListener(new java.awt.event.ActionListener() {
      public void actionPerformed(ActionEvent e) {

        //write query statement
            try
              {
               // load oracle driver
              Class.forName("oracle.jdbc.driver.OracleDriver");
              // connect using Thin driver
              Connection con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:test","system","oracle");
              System.out.println("Connected Successfully To Oracle");
                      //getting errors in the following line...need help here
              String sql="alter system set                              
                     utl_file_dir='C:\oracle\product\10.2.0\logminer_dir'scope=spfile;"
                     +"shutdown immediate"+
                     "startup"+
                     "show parameter utl_file_dir"+
                     "SELECT SUPPLEMENTAL_LOG_DATA_MIN FROM V$DATABASE"+
                     "alter system switch logfile";

                      Statement statement = con.createStatement();
              ResultSet resultset = statement.executeUpdate(sql);  

           resultset.next();
           String s = resultset.getString(1);      
           System.out.println(s);
          statement.close();
              con.close();
              }
              catch(Exception ex)
              {
                ex.printStackTrace();
              }

               }

         });

     }

    } 
```

我应该如何在 Java 中编写相同的查询才能正确执行？有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T06:48:19.633

您的代码有几个问题：

1.  `executeUpdate()`一次调用不能运行多个语句
2.  `executeUpdate()`永远不会返回结果集，您需要使用`execute()`或`executeQuery()`
3.  `shutdown` and `startup` are SQL*Plus commands and cannot be executed through JDBC. Since 11.1 there is however an extension in Oracle's JDBC driver that will allow you to do so: [http://docs.oracle.com/cd/E11882_01/java.112/e16548/dbmgmnt.htm#CHDJABJI](http://docs.oracle.com/cd/E11882_01/java.112/e16548/dbmgmnt.htm#CHDJABJI)
    However I don't know if this will also work with Oracle 10 (which by the way is de-supported if I'm not mistaken, you should upgrade to 11.x anyway)
4.  `show parameter` is a SQL*Plus command that you cannot run from JDBC. You need to run a `select * from v$parameter` instead.

# xml - 在 XSLT 中编写 xsl:value-of 的正确方法

> ID：10845222
> 
> 赞同：0
> 
> 时间：2012-06-01T06:06:17.083
> 
> 标签：xml, visual-studio-2010, xslt, xpath

我正在尝试编写 XSLT 将我的 XML 从一种格式转换为另一种格式。当我将我`.xslt`的文件应用到 VS 2010 中的 XML 文件时，**可以毫无问题地创建输出 XML 结构。但它没有填写处理所期望的数据`xsl:value-of`。**

当我使用`XMLSpy`和评估`XPath`表达式时，它表示`no result`以下 XSLT 中的表达式。但是当我`node()`在 XPath 表达式的末尾使用函数时，它会显示值！

1.  编写 XPath 的正确方法是什么？
2.  每次读取元素内容（当它没有子元素时）是否真的需要某种`node()`功能？`text()`如果不是，为什么 XmlSpy 在没有这些功能的情况下也不会给出结果？
3.  有时（当我将模板匹配值从“/”更改为“ServiceMessage”时）在调试 XSLT 时，VS 2010 会进入内置模板规则。为什么会这样？如何摆脱 VS 2010 中的内置模板？

我一开始就遵循[w3school 教程](http://www.w3schools.com/xsl/xsl_value_of.asp)。我是 XSLT 的新手。

这是我想要转换为其他 XML 格式的 XML。

```
<ServiceMessage xmlns="http://requestservice/requests" xmlns:req="http://requestservice/requests/xmlstds">

<TypeOfReq> General </TypeOfReq>
<Details>
   <Id> 123456789 </Id>
   <SenderDetails>
        <Sender id="345"></Sender>
   </SenderDetails>
</Details>

</ServiceMessage> 
```

**这是我的 XSLT**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
  <xsl:output method="xml" indent="yes"/>
  <xsl:template match="/">
    <request>
      <requestType>
        <xsl:value-of select="ServiceMessage/TypeOfReq" />
      </requestType>
      <Id>
        <xsl:value-of select="ServiceMessage/Details/Id"/>
      </Id>
      <senderId>
        <xsl:value-of select="ServiceMessage/Details/SenderDetails/Sender/@id"/>
      </senderId>
    </request>

  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:32:11.273

从语法的角度来看，您已经正确编写了 xpath。您实际遇到的问题实际上与名称空间有关。在您的 XML 中，您指定了默认命名空间

```
<ServiceMessage xmlns="http://requestservice/requests"> 
```

这意味着所有子元素，除非另有说明，都属于该命名空间。但是，在您的 XSLT 中，根本没有对此命名空间的引用，因此 XSLT 正在寻找没有指定命名空间的元素。这不是您的 XML 的情况。

对于 XSLT 1.0，您需要声明命名空间，如下所示：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:s="http://requestservice/requests"> 
```

然后，您将明确说明它用于匹配元素的位置

```
<xsl:value-of select="s:ServiceMessage/s:TypeOfReq" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:s="http://requestservice/requests">
   <xsl:output method="xml" indent="yes"/>
   <xsl:template match="/">
      <request>
         <requestType>
            <xsl:value-of select="s:ServiceMessage/s:TypeOfReq"/>
         </requestType>
         <Id>
            <xsl:value-of select="s:ServiceMessage/s:Details/s:Id"/>
         </Id>
         <senderId>
            <xsl:value-of select="s:ServiceMessage/s:Details/s:SenderDetails/s:Sender/@id"/>
         </senderId>
      </request>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<request xmlns:s="http://requestservice/requests">
   <requestType> General </requestType>
   <Id> 123456789 </Id>
   <senderId>345</senderId>
</request> 
```

请注意这里选择的字母“s”纯粹是任意的，它可以是任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:04:22.293

要回答您的第三个问题“我怎样才能摆脱内置模板？”

如果您没有为 xml 中出现的元素指定模板，则在您的情况下，VS 将应用**身份模板**，该模板只会将源元素复制到您的输出中。

```
<xsl:template match="/ | @* | node()">
    <xsl:copy>
        <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
</xsl:template> 
```

有关详细信息，请参阅[Microsoft 关于内置模板](http://msdn.microsoft.com/en-us/library/bb552390.aspx)的说明。

*（atm 我不知道是否可以关闭它，因为我这里只有 VS Express，它不提供 Xslt 调试）*

作为一般规则，您应该始终为要处理的所有元素指定模板，因此您的基本 xslt 将始终以

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:s="http://requestservice/requests">

    <xsl:template match="/">
        <xsl:apply-templates />
    </xsl:template>

</xsl:stylesheet> 
```

接下来，在您的情况下，为根元素*ServiceMessage添加一个模板*

```
<xsl:template match="s:ServiceMessage">
    <!-- usually apply-templates, in your case create new output element(s) -->
<xsl:template> 
```

# java - 验证签名而不需要原始消息（在java中）

> ID：10845223
> 
> 赞同：1
> 
> 时间：2012-06-01T06:06:19.797
> 
> 标签：java, signature, verify

我想签署一条消息，然后从签名中获取原始消息。我在 java 中找到 RSA 和 DSA 签名：http: [//docs.oracle.com/javase/tutorial/security/apisign/vstep4.html](http://docs.oracle.com/javase/tutorial/security/apisign/vstep4.html)
但他们的验证方法使用原始数据进行验证，无法从签名中恢复消息。
有没有办法在 Java 或任何免费的 Java 库中做到这一点？
谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:38:43.113

您可以使用 BouncyCastle。它[支持 ISO-9796-2](http://www.bouncycastle.org/specifications.html)。ISO9796Test.java[提供](http://www.bouncycastle.org/viewcvs/viewcvs.cgi/java/crypto/test/src/org/bouncycastle/crypto/test/ISO9796Test.java?view=markup)了一个例子。这是一个可能有帮助的摘录：

```
RSAKeyParameters pubParameters = new RSAKeyParameters(false, mod3, pub3);
RSAKeyParameters privParameters = new RSAKeyParameters(true, mod3, pri3);
RSAEngine rsa = new RSAEngine();
byte[] data;
ISO9796d2Signer eng = new ISO9796d2Signer(rsa, new RIPEMD128Digest());
eng.init(true, privParameters);
eng.update(msg4[0]);
eng.update(msg4, 1, msg4.length - 1);
data = eng.generateSignature();
eng.init(false, pubParameters);
eng.update(msg4[0]);
eng.update(msg4, 1, msg4.length - 1);
if (eng.hasFullMessage()) {
    eng = new ISO9796d2Signer(rsa, new RIPEMD128Digest());
    eng.init(false, pubParameters);
    if (!eng.verifySignature(sig4)) {
        // signature tampered with
    }
    byte[] message = eng.getRecoveredMessage(), 0, msg4);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T02:23:43.023

我想您指的是不需要原始消息的 ISO9796-2 数字签名方案 1、尾部字段 1、八位字节“BC”。

```
 RSAEngine rsa = new RSAEngine();
    //DS as SHA1
    Digest dig = new SHA1Digest();
    //3rd parameter "true" indicates implicit which means TF1(octet BC)
    ISO9796d2Signer eng = new ISO9796d2Signer(rsa, dig, true);
    eng.init(false, pubKeyParameter);

    eng.verifySignature(sig);  // if the signature is valid
    eng.getRecoveredMessage(); // get the recovered message, only after successful signature verification 
```

# php - kohana htaccess 和索引结构

> ID：10845224
> 
> 赞同：1
> 
> 时间：2012-06-01T06:06:26.233
> 
> 标签：php, .htaccess, kohana

我正在使用 kohana 3.2

我的网站是 www.mysite.com/best，kohana 安装在 best 上。

我正在使用带有 rewritebase /best 的默认 htaccess 文件

那么重定向访问 www.mysite.com 的用户的最佳方式是什么？

现在如果有人把 www.mysite.com/helo (www.mysite.com/best/helo) 它加载但 apache 给出 404 未找到。

我希望我的问题是有道理的。

> **编辑**

如果用户访问主域 (www.mysite.com)，我希望它加载位于 mysite/best 的 kohana。但是如果用户现在输入完整的内容并省略了最佳内容，则站点将加载但我的表单将无法正常工作，因为它发布到 www.mysite.com/helo 而不是 www.mysite.com/best/helo 而不是加载假直升机控制器，它必须显示未找到的页面。

> 编辑

好的，我将其添加到 htaccess 文件中，并且效果很好

```
RewriteCond %{REQUEST_URI} !^/best/ 
```

`RewriteRule ^(.*)$ /best/$1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:06:11.070

试试这个 .htaccess 代替：

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /best/

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
#RewriteRule .* index.php?kohana_uri=$0 [PT,L,QSA]
RewriteRule .* index.php?/$0 [PT,L,QSA] 
```

请注意，RewriteBase 上的尾随 / 是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:46:34.293

你不能在 htaccess 中有多个 rewritebase 所以......重写你的规则以适应你在 /best 中的需要，或者在 / 中放入另一个 htaccess 来重写你的需要。

# repository - Cydia Repo“以下签名无效：NODATA 1 NODATA 2”

> ID：10845229
> 
> 赞同：1
> 
> 时间：2012-06-01T06:06:44.357
> 
> 标签：repository, gnupg, cydia

任何人都可以帮助我们检查为什么我们的 Cydia 存储库总是生成错误消息“GPG 错误，发布：以下签名无效：NODATA 1 NODATA 2 当将源添加到 Cydia 或 Cydia 酸重载时。

我们的回购网址是[http://ikeymonitor.com/apt](http://ikeymonitor.com/apt)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:34:26.047

添加您的存储库时，我没有遇到任何异常情况。我什至可以毫无问题地安装 iLostFinder。您的回购托管在哪里？如果它在家里，您需要注意某些服务在本地网络内部不起作用。我不知道这是否也算 cydia repos。但请尝试使用其他网络和/或其他 iPad/iPhone。

# javascript - 我想知道jsp中的一个动作所花费的时间。怎么做？

> ID：10845232
> 
> 赞同：0
> 
> 时间：2012-06-01T06:06:59.923
> 
> 标签：javascript, jsp-tags

```
<a  onclick="javascript:submitForm('save.htm');">
<span>Save</span></a> 
```

在上面的代码中，当我单击保存时，我想存储 save.htm 操作所花费的时间来保存所有输入。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:31:00.497

最好的方法是检查服务器日志——您可能需要根据您使用的 Web 框架配置日志系统。如果服务器日志无法访问，您可以使用浏览器调试工具来计时完成网络往返

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:35:55.593

看起来有点工作，但你试过[jsperf](http://jsperf.com/oop-benchmark/13)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T06:56:16.937

您提供的代码片段显示代码是从浏览器中的 Javascript 调用的。浏览器将提交表单。如果您想从客户端的角度查看处理保存需要多长时间，包括从浏览器来回提交时间，您只需要添加显示时间的警报。

出于调试目的，例如，您可以这样做：

```
<a  onclick="javascript:var start=new Date();submitForm('save.htm'); stop=new Date(); alert('start: ' + start + '\nstop: ' + stop);">
<span>Save</span></a> 
```

您可以创建一些花哨的 Javascript 代码来将结果放在适当的位置，而不是使用警报对话框。

另一方面，如果你想知道在服务器端具体处理了什么，应该记录的是“save.htm”页面，它应该打印开始和停止时间，你也可以计算他们之间的区别。

例如，最简单的（不推荐用于生产）是将此 scriptlet 添加到正在处理 save.htm 的 JSP 中（假设“save.htm”是 JSP，而不是控制器类）：

```
long start = System.currentTimeMillis();    
// do the processing here
process();
saveHereAndThere();
long stop = System.currentTimeMillis();    
System.out.println("The processing took: " + (stop - start) + "milliseconds."); 
```

# python - 如何在python中从网络获取html输入值

> ID：10845236
> 
> 赞同：0
> 
> 时间：2012-06-01T06:07:09.793
> 
> 标签：python, django

当我访问时，`www.sampleweb.com/reg/`我有一个输入值，例如 .

`<input id="input-id" class="input-class" name="myinput" type="text" value="hello world">`

如何使用 python 获取输入的`hello world`值`www.sampleweb.com/reg/`？

我认为访问 `www.sampleweb.com/reg/`是这样的：

```
url = 'http://www.sampleweb.com/reg/'
urlopen(url) 
```

这在访问网址时是否正确？

任何人都可以帮助我处理我的情况吗？

提前致谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:15:26.593

您应该在使用任何 python html 解析器通过 urllib（如您所提到的）gwetting 之后解析 html。例如，使用 BeautifulSoup：[http](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#find%28name,%20attrs,%20recursive,%20text,%20) : //www.crummy.com/software/BeautifulSoup/bs3/documentation.html#find%28name,%20attrs,%20recursive,%20text,%20 **kwargs%29

在你的情况下是这样的：

```
soup = BeautifulSoup(html)
inputs=soup.find("input", {"id": "input-id"})
print inputs[0]['value'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T06:37:27.647

您可以使用名为[BeautifulSoup的库](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T06:17:54.907

请注意，使用[DOM 解析器](http://docs.python.org/library/xml.dom.minidom.html)是解析任何资源的 HTML 的最佳选择。

但是，如果“hello world”是您唯一想要的 HTML，那么快速而肮脏的方法将是：

```
toFind = '<input id="input-id" class="input-class" name="myinput" type="text" value="'
htmlStr = urllib.urlopen('yoururl.com/your/path').read()
value = htmlStr[htmlStr.index(toFind)+len(toFind):]
value = htmlStr[:htmlStr.index('\"')]
print value 
```

# .net - 在对象内部编码时应该使用对象的属性还是内部变量？

> ID：10845237
> 
> 赞同：4
> 
> 时间：2012-06-01T06:07:11.000
> 
> 标签：.net, oop

我正在清理一个具有可设置属性的类中的一些代码，其中一个局部变量保存该值。

代码的某些部分当前在外部调用以获取值，而不是使用自己的属性，其他部分有时使用属性本身，而在其他部分使用局部变量。

在这种情况下，属性只是由创建此类对象的工厂方法设置，因此属性始终与变量相同。但是我不确定我是否应该假设我正在编写的代码中就是这种情况，因为这使得将来在 getter 方法后面添加逻辑变得更加困难。

这可能是正确的，还是我忘记了我的 OO 原则中的一些基本内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:17:27.570

降低复杂性并提高可维护性。

您应该做的第一件事是减少项目存在的位置数量（您似乎正在这样做）。

接下来，您应该使用任何语言技巧来减少代码的大小。例如，在某些版本的 c# 中，您不需要声明字段来保存属性值。

完成此操作后，您可以选择任何一种方法 - 没有来自另一种的性能优化。但要保持一致。那将增加可维护性。

就我个人而言，我更喜欢尽可能使用属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:14:19.617

使用[自动实现的属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)，仅在以后需要时添加私有变量和额外的获取/设置代码。

例如

```
 public int CustomerID { get; private set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T06:49:25.263

我使用属性，但我将它们标记为的字段除外，`readonly`这意味着它们仅通过对象初始化/构造函数获取其常量值。

如果将来您的应用程序的任何要求发生变化，属性对我来说更容易维护。您只需在一处添加代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T20:59:56.663

从面向对象的角度来看，我认为有两种类型的属性。（注意：这仅适用于班级内部。班级用户*不应*意识到这种差异。）

有些属性实际上是包含在主类中的独立类。（“主”类是正在考虑的类，不一定是启动程序的类。）它们只能通过属性引用，即使在主类的代码中也是如此。查看它的 get 和 set 方法应该会告诉您该属性的整个故事。它们不是主要对象的组成部分，而是相关信息，如公共字段，但更安全。

另一类*是*主要对象的组成部分。在极端情况下，它们甚至可能没有关联的字段；调用时，getter 可能会通过涉及许多字段的计算来组装一个值。当存在单个字段时，对其进行读写的内部代码很容易发现 getter 和 setter 对其进行了太多更改。（对象可能会跟踪一个以 5 开头的值。随着时间的推移，可能会减去 10 并添加 12。此时，该值应该是 7。但是 getter 可能永远不想向外界承认其值小于比零，所以当值为 -5 时，它将返回 0。）

我会决定每一个是哪种类型的财产，然后采取一种或另一种方式。不要分裂差异。要么所有引用都应该指向属性本身，要么所有引用都应该指向它后面的一个或多个字段。（除了直接引用属性而不是在 getter 和 setter 中复制代码可能更好。不过，我对此并不满意。）

通过“外部调用”，我收集到有一个返回字段值的普通方法。这可能是有道理的。为了直观起见，属性的行为必须尽可能像公共字段，常规方法可以在其中进行更改。（考虑一个属性 DistanceInFeet 和一个方法 GetDistanceInMeters()）。调用 Get 方法而不是复制其代码是有意义的。这确实意味着整体属性是第二种类型，是对象的一个​​组成部分。

因此，您正在清理的代码可能是正确的，面向对象 - 但我怀疑不是。

# javascript - 出现错误：javascript 中 window.open() 函数的访问被拒绝

> ID：10845243
> 
> 赞同：3
> 
> 时间：2012-06-01T06:07:52.673
> 
> 标签：javascript

我在打开文件时遇到问题。这是我的javascript代码：

```
<script language="javascript" type="text/javascript">
var refViewer = null;

function OpenViewerWindow(image) {
   alert(image)
   return window.open("file:///E:/HOBBYHOMES_E-PORTFOLIO/HobbyHomesWebApp/ePortfolio/PortFolioContent/5/ReferenceMaterial/"+image, "Viewer", "height=400px,width=550px,menubar=no,scrollbars=yes ,resizable=yes,top=100px,left=234px");
}

function openViewer(image) {

    if (refViewer != null) {
       if (refViewer.closed == false) {
            refViewer.close();
            refViewer = OpenViewerWindow(image);
        }
        else refViewer = OpenViewerWindow(image);
    }
    else
        refViewer = OpenViewerWindow(image);
}   
</script> 
```

@item.candidateportfolo.FilePath 包含文件名：prtf_1.docx

但我的文件没有打开。在 Internet Explorer 中，我得到 Accesdenied 错误。
在 Mozilla Firfox 中，它无法打开
我指定了错误的路径吗？请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:14:20.990

你不能通过浏览器访问本地文件，除非你有特殊权限，或者你在本地运行页面（即使那样它也不能跨浏览器可靠地工作）

除非您使用 HTML5 文件 API [http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-19T10:18:35.183

YMMV，但此注册表设置适用于我公司的 Web 应用程序，可打开本地（下载的）Word 文档：

```
[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Lockdown_Zones\0]
"2101"=dword:00000000 
```

# php - 在数组 php mysql 中显示每个结果的排名

> ID：10845245
> 
> 赞同：0
> 
> 时间：2012-06-01T06:07:57.483
> 
> 标签：php, mysql, arrays, rank

我整天都在为这个问题撞墙，我知道该怎么做。我希望这不是很简单，因为这对我来说是一场斗争！我已经搜索了一整天，希望有人可以帮助我。

我有一个 html 表格，显示训练营中每个球员的体能测试结果。我已经弄清楚如何将它们连同它们的名称一起显示（取自另一个 mysql 表）。现在，在每个测试结果旁边，我想添加它们对特定测试结果的排名。这是现在减去过滤部分的代码（我认为不需要它来解决这个问题）：

数据库查询如下。它按位置对桌上的球员进行排序，以便所有防守队员一起出现，所有前锋一起出现，守门员一起出现，以便教练轻松查看。

```
//get the camp id for the coach logged in
$getcampid = "SELECT value FROM profile_values WHERE uid = '$user->uid'";   
$campid = mysql_query ($getcampid);
$campidrow = mysql_fetch_array($campid);
$coachescamp = $campidrow[0];

$getplayerdata = mysql_query("SELECT * FROM content_type_test 

INNER JOIN content_type_player ON content_type_test.field_player_uid=
content_type_player.field_uid 

WHERE content_type_test.field_training_camp_nid='$coachescamp' 

ORDER BY content_type_player.field_position_value") or die(mysql_error());

$left = true;
while($playerdata=mysql_fetch_array($getplayerdata))
{

echo "<td>", $playerdata['field_position_value'], "</td>";
echo "<td>", $playerdata['field_last_name_value'],", ",$playerdata['field_first_name_value'], "</td>";
echo "<td>", $playerdata['field_speed_value'], "</td>";
echo "<td>Show rank of players speed compared to other players in $getplayerdata query</td>";
echo "<td>", $playerdata['field_agility_value'], "</td>";
echo "<td>Show rank of players agility compared to other players in $getplayerdata query</td>";
echo"</tr>";
}
echo"</tbody></table>"; 
```

我需要在“显示玩家等级......”的列中显示玩家速度和敏捷度的等级。总共还有 5 个等级，我需要在该表中显示，我没有包括在内，以保持简单。如果我能看到如何为这两个做这件事，我就可以为其他人做这件事。

注意：速度和敏捷是数字。数组中的最低数字应排名第一。

感谢您提供的任何帮助，这些帮助一直在杀死我。

编辑 - - - - - - - - - - - - - - - - - - -

这是我只返回 1 个结果的代码

```
$getplayerdata = mysql_query("SELECT * FROM content_type_test 

INNER JOIN content_type_player ON content_type_test.field_player_uid=
content_type_player.field_uid 

WHERE content_type_test.field_training_camp_nid='$coachescamp' 

ORDER BY content_type_player.field_position_value") or die(mysql_error());

$left = true;
while($playerdata=mysql_fetch_array($getplayerdata))
{

$arrayOfAllData = array();
while($playerdata=mysql_fetch_array($getplayerdata)){
$arrayOfAllData[$playerdata[ID]] = array(field_position_value =>$playerdata['field_position_value'],
                                      field_last_name_value=>$playerdata['field_last_name_value'], 
                                      field_speed_value=>$playerdata['field_speed_value']);

}

$sql = mysql_query("SELECT @rownum:=@rownum+1 'rank', * FROM content_type_test, (SELECT @rownum:=0) r 
INNER JOIN content_type_player ON content_type_test.field_player_uid=
content_type_player.field_uid 
WHERE content_type_test.field_training_camp_nid='$coachescamp' 
ORDER BY content_type_player.field_speed_value");

while($playerdata=mysql_fetch_array($sql)){
    $arrayOfAllData[$playerdata[ID]]["field_speed_value"] = $playerdata['field_speed_value'];
}

foreach($arrayOfAllData as $player){
   echo "<td>", $player['field_position_value'], "</td>";
   echo "<td>", $player['field_last_name_value'],", ",$player['field_first_name_value'], "</td>";
   echo "<td>", $player['field_speed_value'], "</td>";
   echo "<td>*I dont know what to put here to display the rank*</td>";   
   echo"</tr>";
}
}
echo"</tbody></table>"; 
```

打印显示一行这样的数组（[] => 数组（[field_position_value] => Forward [field_last_name_value] => Tester [field_speed_value] => 4.504））

同样如一栏中所述，我不知道该键入什么来显示排名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:01:25.403

好的，因为没有优雅的方法可以使用 1 个 MySQL 查询来执行此操作，所以我会使用多个查询，将它们组合成一个数组并循环遍历它以获得您的结果。这有点骇人听闻，但可以完成工作。

使用您的原始查询，然后不是循环并立即显示，而是循环并放入数组：

```
$arrayOfAllData = array();
while($playerdata=mysql_fetch_array($getplayerdata)){
$arrayOfAllData[$playerdata[ID]] = array(field_position_value =>$playerdata['field_position_value'],
                                          field_last_name_value=>$playerdata['field_last_name_value'], 
                                          field_speed_value=>$playerdata['field_speed_value'])

} 
```

然后获取您的下一个 MySQL 查询，该查询将按 field_speed_value 对玩家进行排名

```
$sql = mysql_query("SELECT @rownum:=@rownum+1 ‘rank’, * FROM content_type_test, (SELECT @rownum:=0) r 
INNER JOIN content_type_player ON content_type_test.field_player_uid=
content_type_player.field_uid 
WHERE content_type_test.field_training_camp_nid='$coachescamp' 
ORDER BY content_type_player.field_speed_value"); 
```

此查询将为每个玩家添加一个排名，现在您必须将此排名作为一个值添加到 $arrayOfAllData

```
while($playerdata=mysql_fetch_array($sql)){
    $arrayOfAllData[$playerdata[ID]]["field_speed_value"] = $playerdata['field_speed_value']);
} 
```

为每个排名创建一个新查询，并以相同的方式将其添加到您的数组中。然后当你完成添加到数组中时，你可以像这样输出：

```
foreach($arrayOfAllData as $player){
   echo "<td>", $player['field_position_value'], "</td>";
   echo "<td>", $player['field_last_name_value'],", ",$player['field_first_name_value'], "</td>";
....etc...
} 
```

希望这会有所帮助，我累了，要睡觉了，如果您有任何问题，明天可以澄清。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-01T06:32:25.110

编辑：抱歉-此查询仅适用于 SQL Server，不适用于 MySQL。

您可以将列添加到将具有排名的 sql 查询：

```
SELECT *, ROW_NUMBER() OVER (ORDER BY field_speed_value) AS field_speed_Ranking,
ROW_NUMBER() OVER (ORDER BY field_agility_value) AS field_agility_Ranking
FROM content_type_test
INNER JOIN content_type_player ON content_type_test.field_player_uid=   
content_type_player.field_uid 
WHERE content_type_test.field_training_camp_nid='$coachescamp' 
ORDER BY content_type_player.field_position_value") or die(mysql_error()); 
```

这将在查询结果中为您提供两个新列，field_speed_Ranking 和 field_agility_Ranking，每个玩家按顺序排列。只需以与其他列相同的方式回显它们即可。

# ruby-on-rails - 视图中的时间格式

> ID：10845246
> 
> 赞同：0
> 
> 时间：2012-06-01T06:07:59.200
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我将时间作为字符串存储在数据库中。但是在视图层，我想确保该时间的格式是有效的。

另外，如何添加查找显示上午和下午。

在控制器处将 2 个视图级别字段合并为一个并存储在模型中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:17:00.327

你为什么不存储为`datetime`或`time`在你的数据库中，并使用`time_select`辅助方法？

[http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_select](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_select)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:57:31.773

日期时间将是您的最佳选择。为此目的存储字符串是没有意义的。

此外，它会更容易格式化，比如

article.published_at.strftime("发表于：%d/%m/%Y %H:%M")

将是这样的：

发表于：31/05/2012 11:57

# regex - 正则表达式文件名排除匹配

> ID：10845249
> 
> 赞同：1
> 
> 时间：2012-06-01T06:08:34.363
> 
> 标签：regex

我已经看到其他关于正则表达式匹配的帖子，不包括字符串（使用否定前瞻/后视），但我仍然很难让它工作。希望有人能帮忙。

我有一个正则表达式

```
\.(gif|jpg|png)$ 
```

我用来匹配任何以 (gif/jpg/png) 结尾的文件名

但是我想使用排除列表，以便某些文件名不会匹配。

例如

*   匹配任何[http://example.com/images/filename.jpg](http://example.com/images/filename.jpg) / gif / png
*   除了（[http://example.com/images/foo.jpg、http://example.com/images/foo.gif、http://example.com/images/foo.png）（http://example](http://example.com/images/foo.gif) _ [_](http://example.com/images/foo.png) .com/images/bar.jpg、http: [//example.com/images/bar.gif、http :](http://example.com/images/bar.gif) [//example.com/images/bar.png](http://example.com/images/bar.png)）

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:14:45.767

您可以使用：

```
^(?!(foo|bar)\.(gif|jpg|png)$).*\.(gif|jpg|png)$ 
```

[看见](http://www.rubular.com/r/9OZvpmtUpP)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T07:49:16.907

如果排除的数量很少，您可以像这样使用多个否定的look-behinds：

```
(?<!\/foo)(?<!\/bar)(?<!www\.site\.com\/foobar)\.(gif|jpg|png)$ 
```

foo 和 bar 之前的 '/' 确保全名匹配 foo 或 bar，它不仅以它结尾。如果文件名前可能没有'/'，则需要调整这部分。

后视的一个缺点是您只能使用定义的长度，因此 no `*`, `+`or`{1,5}`是允许的。您必须自己指定每个异常。

请注意，环视不会更改查看它的字符串中的“位置”，这就是为什么您可以像这样连接它们的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T06:19:26.760

我发现尝试在 6 周后阅读我的代码意味着将这样的过滤器与正则表达式分开应用几乎总是更好。如果你会原谅一点perl：

```
# Apply original png/gif/jpg filter to get list of files
my @files = qw/
    asdf.jpg
    bar.png
    fdsa.png
    foo.gif
    foo.jpg
/;

# Filter files to only those that don't look like ^<forbidden>\.
@files = grep {
    $_ !~ /^(foo|bar)\./
} @files; 
```

这也是人们倾向于将 shell 命令串在一起的方式。

# java - netbeans 的自动完成 JTextField

> ID：10845250
> 
> 赞同：1
> 
> 时间：2012-06-01T06:08:37.440
> 
> 标签：java, swing, netbeans, autocomplete, jtextfield

我在 netbeans 中创建了一个桌面应用程序，直到昨天它都很好，但现在要求发生了变化，客户端希望所有 JTextField 都作为自动完成，源是数据库，我用谷歌搜索并试图找到任何合适的 netbeans 示例，但我无法找到这样的东西所以请帮助我如何在netbeans中实现自动完成的东西？请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T06:13:05.463

您可以使用[自动完成包](http://www.jdocs.com/swingx/1.0/org/jdesktop/swingx/autocomplete/package-summary.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T06:32:18.677

*   您可以使用基于标准 Java5/6 API 的[AutoComplete JComboBox/JTextField ，](https://stackoverflow.com/a/7255918/714968)

*   SwingX 在 NetBeans 中有（我在两年前尝试过）用于托盘的包

*   您可以在 Swing GUI 中使用和组合 SwingX 包，没有任何限制

# google-sheets - 如何在javascript中调用谷歌电子表格的公式

> ID：10845252
> 
> 赞同：1
> 
> 时间：2012-06-01T06:08:44.393
> 
> 标签：google-sheets, google-apps-script

在 Excel 宏模块的 VB 脚本中，我可以在脚本中调用 excel 公式，例如：

iRow = application.match(a,b)

但在 Google 电子表格中，如何通过 Javascript 调用电子表格公式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:14:03.477

这是不可能的。在问题跟踪器上查看此[增强请求。](http://code.google.com/p/google-apps-script-issues/issues/detail?id=26)

您必须自己实现它（例如，`match`公式非常简单），或者将公式写在电子表格的某处并获取其结果。

# javascript - 如何更改正则表达式以给它一个范围

> ID：10845255
> 
> 赞同：-8
> 
> 时间：2012-06-01T06:08:50.173
> 
> 标签：javascript, regex

```
var digitsOnly = /[1234567890]/g; 
```

我有一个像上面这样的正则表达式来限制用户输入只接受整数。我想给它一个范围。知道如何更改它以便我可以给出一个范围让我们说 1 到 5 之间？

如果有人可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T06:11:57.643

```
/^[1-5]$/ 
```

我认为有人应该阅读一个好的正则表达式教程。

**解释**

*   `^`输入的开头：这样 A1 将不匹配
*   `$`输入结束：使 1A 不匹配
*   `-`范围运算符：上面的正则表达式与`/^[12345]$/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:26:34.957

```
/^[1-5]$/g 
```

这应该对您有用，其他任何事情都取决于您想要什么，但是很难从缺乏信息中分辨出来。

您可以在字符类中使用范围来减少混乱，例如`a-z`、`A-Z`或`A-z`。这当然也可以与数字一起使用。

如果要重复给定数字零次或多次，请使用 a `*`，如果要重复一次或多次，则`+`需要 a 。最后，如果您想重复一定次数，请将该数字括在大括号中：{1} 将重复一次，{2} 重复两次，{1,3} 重复一次或三次。

如果你真的需要了解更多关于正则表达式的知识，我会推荐[这个网站](http://www.regular-expressions.info/)。

# c++ - 在 Post Read Config 中使用 ap_retained_data_create/get 开发跨平台 Apache 模块

> ID：10845256
> 
> 赞同：2
> 
> 时间：2012-06-01T06:08:50.260
> 
> 标签：c++, apache2, cross-platform, apache-modules

在构建跨平台模块的同时，我非常高兴地调试了 Apache 2.4 设计中的一个怪癖。

我面临的问题是 Apache 在启动时会加载配置文件两次，因此会加载模块本身两次。一旦我猜想测试配置并读取命令结构，然后下一步填写空白以供服务器运行。这通常不会有任何问题，但我需要在加载时加载我的模块配置，然后再为任何客户端提供服务，并且只解析我的模块的需求一次和一次。

由于我使用了许多资源，包括数据库等，我认为多次运行并不是最好的主意，尤其是在访问数据库服务器时。

在线手册（“Developer API 2.5”）说要使用 ap_retained_data_get 和 ap_retained_data_create 来跨模块卸载保留数据，而不是使用旧方法（我会让读者自行查找）。最好将标志传递给您已经通过测试阶段的下一阶段。

这就是令人头疼的地方。这不是它在 Windows 上的工作方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:08:50.477

Linux 确实分两次运行，但 Windows 运行四次。

在 post config 读取挂钩中使用此方法适用于 Linux，但不适用于 Windows

```
 // variables for base config start
    const char  *flag = "some_prefixed_flag_to_mashup_with_other_flags";
    void        *init_flag = NULL;
    int         dbl = APLOG_TRACE4;
    // logger
    logging logger(NULL, s, p);     
    // determine if this is the first time we have loaded
    init_flag = ap_retained_data_get(flag);
    // check flag result
    if (init_flag == NULL) 
    {
        // breakpoint
        stdLog(logger, INFX_LOG_DATA, dbl);
        // set first time flag local
        ap_retained_data_create(flag, 1);
    }
    // call initization routine
    else
    {
        // do something here

    } 
```

请注意，我在我的模块中导出 C++ 代码，因此使用类。为简洁起见，还缺少一些变量声明。

所以这对 Windows 来说应该足够了吧？错误的。因为我首先在 Windows 上构建，所以我不得不向后学习，但是 Windows 有四遍而不是两遍。您的初始化仍然会运行两次。

我的下一个解决方案如下：

```
 // variables for base config start
    const char  *flag = "some_prefixed_flag_to_mashup_with_other_flags";
    void        *init_flag = NULL;
    char        *pidname;
    int         dbl = APLOG_TRACE4;
    pid_t       pidNKey;
    apr_file_t  *pidfile;       
    // logger
    logging logger(NULL, s, p);     
    // determine if this is the first time we have loaded
    init_flag = ap_retained_data_get(flag);
    // check flag result
    if (init_flag == NULL) 
    {
        // breakpoint
        stdLog(logger, INFX_LOG_DATA, dbl);
        // set first time flag local
        ap_retained_data_create(flag, 1);
    }
    else
    {
        // break point
        stdLog(logger, INFX_LOG_DATA, dbl);
        // create a pid if not exists
        if (ap_read_pid(p, "logs/httpd.pid", &pidNKey) == OK)
        {
            // break point
            stdLog(logger, INFX_LOG_DATA, dbl);
            // create a pid especially for our setup
            pidname = apr_psprintf(ptemp, "logs/infx.%d.pid", pidNKey);
            // if pidfile does not exist then create it
            if (!fileExists(pidname, ptemp))
            {
                // break point
                stdLog(logger, INFX_LOG_DATA, dbl);
                // create the pid
                apr_file_open(&pidfile, pidname, APR_WRITE|APR_APPEND|APR_CREATE, INFX_BASE_PERM, ptemp);
                // add nonsensical data to it
                apr_file_puts("1", pidfile);
                // cllose the file and wait for run 2
                apr_file_close(pidfile);
            }
            // begin work
            else 
            {
                // break point
                stdLog(logger, INFX_LOG_DATA, dbl);
                // we no longer require the pid file
                apr_file_remove(pidname, ptemp);
            }
        }
    } 
```

似乎工作....好吧，我完成了那部分，对吧？错误的！我来到了 Linux 机器和 segfault 城市。我敢肯定，很多经验丰富的 Apache 开发人员现在可能正在摇头，但这些人没有记录这些问题。

我最后的解决方法是将 Windows 代码包装在定义块中。我不确定是否有更好的方法，但它对我有用。因此，以下在两个平台上都有效，没有段错误。

```
 // variables for base config start
    const char  *flag = "some_prefixed_flag_to_mashup_with_other_flags";
    void        *init_flag = NULL;
    int         dbl = APLOG_TRACE4;
    // logger
    logging logger(NULL, s, p);     
    // determine if this is the first time we have loaded
    init_flag = ap_retained_data_get(flag);
    // check flag result
    if (init_flag == NULL) 
    {
        // breakpoint
        stdLog(logger, INFX_LOG_DATA, dbl);
        // set first time flag local
        ap_retained_data_create(flag, 1);
    }
    // call initization routine
    else
    {
        // break point
        stdLog(logger, INFX_LOG_DATA, dbl);
        #if defined(WIN32)
        // create a pid if not exists
        if (ap_read_pid(p, "logs/httpd.pid", &pidNKey) == OK)
        {
            // break point
            stdLog(logger, INFX_LOG_DATA, dbl);
            // create a pid especially for our setup
            pidname = apr_psprintf(ptemp, "logs/infx.%d.pid", pidNKey);
            // if pidfile does not exist then create it
            if (!fileExists(pidname, ptemp))
            {
                // break point
                stdLog(logger, INFX_LOG_DATA, dbl);
                // create the pid
                apr_file_open(&pidfile, pidname, APR_WRITE|APR_APPEND|APR_CREATE, INFX_BASE_PERM, ptemp);
                // add nonsensical data to it
                apr_file_puts("1", pidfile);
                // cllose the file and wait for run 2
                apr_file_close(pidfile);
            }
            // begin work
            else 
            {
                // break point
                stdLog(logger, INFX_LOG_DATA, dbl);
                // we no longer require the pid file
                apr_file_remove(pidname, ptemp);
        #endif
                // do something here for both platforms
        #if defined(WIN32)
            }
        }
        // crash if we do get a proper pid
        else
        {
            // breakpoint
            stdLog(logger, INFX_LOG_DATA, APLOG_CRIT, "HTTPD File not found? A Bug?");
            // set status
            return HTTP_INTERNAL_SERVER_ERROR;
        }
        #endif
    } 
```

希望其他人可以从中受益。

# performance - OpenLayers - 显示大量数据的最佳方式？

> ID：10845258
> 
> 赞同：1
> 
> 时间：2012-06-01T06:08:54.077
> 
> 标签：performance, openlayers

我有一张易滑的地图，我想在上面显示一些高速公路的叠加层。我有一个 PHP 脚本，它从我的本地 Overpass API 服务器获取过滤数据，将该数据发送到 OpenLayers，然后在具有基本样式（红色、黄色或绿色线条颜色，基于高速公路）。它可以工作，但是当要显示大量数据时，它不能很好地扩展。我说的是由 83000 个节点组成的大约 2600 种方式。即使在相对较新的计算机上，SVG 渲染也很困难。

我不需要任何花哨的交互功能，目标只是显示该数据。

我正在考虑一种用这些方式渲染透明图块的方法，然后将这些图块作为叠加层加载到 OpenLayers 中（也许与 TMS 层？）。也许 Mapnik 在这里会很有用？

显示这种负载的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:14:07.663

似乎使用预渲染图块的叠加是最好的变体。

正面：在 Openlayers 中很容易实现；它适用于慢速 PC；一旦你设置了渲染机器，所有的工作就完成了

负面：设置 Mapnik 可能会很痛苦；需要一些硬盘空间来存储渲染图块

# iphone - 更改贝塞尔曲线的颜色

> ID：10845260
> 
> 赞同：0
> 
> 时间：2012-06-01T06:08:59.313
> 
> 标签：iphone, objective-c, ios, cocoa-touch, bezier

以下是用于自由手绘的代码。但是每次我改变画笔的颜色时，新的颜色也会应用到以前的曲线上。为什么会这样。

```
 - (void)drawRect:(CGRect)rect
 {

for (UIBezierPath *_path in pathArray) {

    [brushPattern setStroke];

    _path.lineCapStyle = kCGLineCapRound;

    [_path stroke]; 

  }
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

isEdited=YES;

myPath=[[UIBezierPath alloc]init];

myPath.lineWidth=lineWidths;

CGPoint touchPoint = [[touches anyObject] locationInView:self];

UITouch *mytouch=[[touches allObjects] objectAtIndex:0];

[myPath moveToPoint:[mytouch locationInView:self]];

[myPath addLineToPoint:CGPointMake(touchPoint.x+1, touchPoint.y+1)];

[pathArray addObject:myPath];

[self setNeedsDisplay];

}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

UITouch *mytouch=[[touches allObjects] objectAtIndex:0];

[myPath addLineToPoint:[mytouch locationInView:self]];

[self setNeedsDisplay];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:15:59.227

因为您在 drawRect 中重绘所有路径，所有路径都使用相同的颜色 (brushPattern)。如果您有不同颜色的路径，则必须在绘图时存储使用的颜色，并将其设置为绘图循环中的笔触颜色。

我建议你的 pathArray 保存字典，每个字典都有一个路径和一个颜色，而不仅仅是保存路径。

# iphone - UISearchBar 清除背景图片

> ID：10845266
> 
> 赞同：5
> 
> 时间：2012-06-01T06:09:22.117
> 
> 标签：iphone, objective-c, ios, ipad, uisearchbar

我的 UISearchBar 有以下代码：

```
 UISearchBar * searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 300, 44)];
    searchBar.placeholder = @"Search for a tag";
    searchBar.delegate = self; 
```

结果如下：

![在此处输入图像描述](../Images/1fd728d2894a023762c005db4b11f0c2.png)

我想将白色背景更改为清晰的颜色。我该怎么做呢？基本上我希望**textField 背景颜色清晰**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-04T17:28:15.993

如果您支持 iOS 5 及更高版本，请执行以下操作：

```
[self.searchBar setBackgroundImage:[[UIImage alloc] init]]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T06:18:35.690

尝试下面的代码来清除背景颜色：

```
//to clear searchbar backgraound
- (void) clearSearchBarBg
{
    for (UIView *subview in theSearchBar.subviews) 
    {
        if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")]) 
        {
            [subview removeFromSuperview];
            break;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T06:34:21.687

制作透明图像，并将该图像与以下代码一起使用。

```
[search setSearchFieldBackgroundImage:[UIImage imageNamed:@"bg_search.png"] forState:UIControlStateNormal]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T06:25:51.797

试试这个：

```
[[searchBar.subviews objectAtIndex:0] removeFromSuperview]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T06:13:54.497

使用此代码：

```
searchBar.backgroundColor=[UIColor clearColor]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-02T00:18:47.843

对于 iOS 7，请使用

```
[searchBar setBarTintColor:[UIColor whiteColor]]; 
```

对于 iOS 6，使用

```
[searchBar setTintColor:[UIColor whiteColor]]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-11T15:13:54.500

好的，这是一个清晰的背景，“搜索”占位符是灰色的，望远镜图标也是灰色的。

```
[self.searchBar setPlaceholder:@"Search          "; //the spaces push it to left align as there is no left align for the UISearchBar
[self.searchBar setBackgroundImage:[UIImage imageNamed:@"thatSearchIconThing"] forBarPosition:UIBarPositionTop barMetrics:UIBarMetricsLandscapePhone]; //my app is landscape
[self.search setSearchBarStyle:UISearchBarStyleMinimal]; 
```

# android - 从列表中选择元素时，从 SQLite 填充的 Android ListView 无法正常工作

> ID：10845270
> 
> 赞同：0
> 
> 时间：2012-06-01T06:09:47.920
> 
> 标签：android, sqlite, android-listview

我对 Android 有点陌生，我 3 天前开始使用 SQLite。我设法从数据库中填充了一个列表，并在 The Pragmatic Programmers - Hello Android 之后定义了一些视图，但是我有一个问题：当显示列表并且我想选择一个项目时，它只会突出显示条目下方和上方的一行列表。我确信它必须与列表行 xml 或 listview xml 的定义有关。虽然我会发布整个代码。

验证列表.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<TextView
android:id="@+id/l_id"
android:layout_width="wrap_content"
android:layout_height="wrap_content" />
<TextView
android:id="@+id/l_idcolon"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text=": "
 />
<TextView
android:id="@+id/l_name"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
 />
<TextView
android:id="@+id/L_namecolon"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text=": "
/>
<TextView
android:id="@+id/av"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:ellipsize="end"
android:singleLine="true"
android:textStyle="italic"
 />
</LinearLayout> 
```

测试.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<!-- Note built-in ids for 'list' and 'empty' -->
<ListView
android:id="@android:id/list"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
/>
<TextView
android:id="@android:id/empty"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/empty" />
</LinearLayout> 
```

这是我的活动的代码：

```
public class LinesListActivity extends ListActivity {

private static final String TAG = "ValidationsListActivity";
private static int [] TO = {R.id.l_id,R.id.l_name,R.id.av};

private DbManipulator dbm;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.testing);

    dbm = new DbManipulator(this);
    try
    {

        Cursor c = dbm.getLines();
        startManagingCursor(c);
        showEvents(c);
    }
    finally
    {

    }
}

private void showEvents(Cursor c) {

    SimpleCursorAdapter adapter = new   SimpleCursorAdapter(this,R.layout.validations_list,c,FROM_V,TO);
    setListAdapter(adapter);

}

@Override
public void onPause()
{
    super.onPause();
    dbm.close();
}
} 
```

而且我为我的应用程序定义了一种样式，但是当我将其更改回正常样式时，问题仍然存在，实际上没有任何变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:36:44.213

选择器默认显示在默认为透明的列表后面，因此您可以通过它看到选择器。

您已经为背景设置了不透明的颜色，因此您需要将选择器设置在顶部。

将此添加到您的列表视图 XML

```
android:drawSelectorOnTop="true" 
```

那应该解决它。

**编辑**

好的，下一个技巧。设置颜色状态选择器。

1）在您的文件夹中创建一个颜色列表`values`，将颜色名称设置为其十六进制数字：

颜色.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="white">#ffffff</color>
    <color name="blue">#2554C7</color>
    <color name="green">#347C2C</color>
</resources> 
```

2）在您的文件夹中创建一个选择器`drawable`：

item_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item 
     android:state_pressed="true" 
     android:drawable="@color/green" />
</selector> 
```

3) 最后，将选择器设置为列表行元素的背景：

```
android:background="@drawable/item_selector" 
```

使用上述方法会导致您按下的列表项的背景在按下时变为绿色，从而使文本在顶部可见。

# android - android水平滚动视图

> ID：10845275
> 
> 赞同：2
> 
> 时间：2012-06-01T06:10:41.293
> 
> 标签：android, horizontalscrollview

我在 android 中使用 Horizo​​ntal Scrollview 在我的应用程序中显示图像，

我需要让它精确滚动到用户左右手势上下一个或上一个图像的初始位置，如何解决它，它具有线性布局（水平方向）并且图像被加载，

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T06:28:11.173

滚动视图没有属性/方法/属性可以让你轻松地做你想做的事。但好消息是解决方案很简单 - 不要使用滚动视图，而是为此目的设计的视图：

[浏览器](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

[视图切换器](http://developer.android.com/reference/android/widget/ViewSwitcher.html)

[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)和[示例](http://dj-android.blogspot.in/2012/03/view-flipper-example-android.html)在这里

[画廊](http://developer.android.com/resources/tutorials/views/hello-gallery.html)

这三个视图设计用于在具有水平手势的视图之间显示和导航。
他们有属性/属性/方法来控制屏幕上的视图数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T06:20:13.620

图库视图最好解决这个问题

# android - 如何在 Android 中将应用货币从美元更改为印度卢比

> ID：10845276
> 
> 赞同：1
> 
> 时间：2012-06-01T06:10:43.367
> 
> 标签：android, in-app-purchase, in-app-billing

我正在使用应用内计费来让用户购买几件商品。这个应用程序面向印度观众。我在市场中选择印度作为目标国家并进入应用产品并将金额设置为 50 美分。我的问题是当印度的用户在谷歌结帐中打开这个时，他们看到的货币是 $.50 我怎样才能把它换成印度卢比？或者是否有任何选择可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:55:13.767

此处列出了支持的货币：http: [//support.google.com/googleplay/android-developer/bin/answer.py ?hl=en&answer=138412](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=138412)

不幸的是，INR 不是受支持的货币之一。

# c++ - Boost tokenizer 将引用的字符串视为一个标记

> ID：10845281
> 
> 赞同：5
> 
> 时间：2012-06-01T06:11:11.263
> 
> 标签：c++, boost, tokenize

有没有办法让 Boost 分词器在不拆分引用部分的情况下拆分字符串以下？

```
string s = "1st 2nd \"3rd with some comment\" 4th";

Exptected output:
1st
2nd
3rd with some comment
4th 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T10:38:18.200

您可以使用`escaped_list_separator`分词器库中的一个。有关如何将其应用于您的问题的更多详细信息，请参阅[此问题。](https://stackoverflow.com/questions/541561/using-boost-tokenizer-escaped-list-separator-with-different-parameters)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T10:38:27.100

C++11解决方案

```
#include <iostream>
#include <string>
#include <vector>

std::vector<std::string> tokenize(const std::string& str) {
    std::vector<std::string> tokens;
    std::string buffer;
    std::string::const_iterator iter = str.cbegin();

    bool in_string = false;

    while (iter != str.cend()) {
        char c = *iter;
        if (c == '"') {
            if (in_string) {
                tokens.push_back(buffer);
                buffer.clear();
            }
            in_string = !in_string;
        } else if (c == ' ') {
            if (in_string) {
                buffer.push_back(c);
            } else {
                if (!buffer.empty()) {
                    tokens.push_back(buffer);
                    buffer.clear();
                }
            }
        } else {
            buffer.push_back(c);
        }

        ++iter;
    }

    if (!buffer.empty()) {
        tokens.push_back(buffer);
    }

    return tokens;
}

int main() {
    std::string s = "1st 2nd \"3rd with some comment\" 4th";
    std::vector<std::string> tokens = tokenize(s);
    for (auto iter = tokens.cbegin(); iter != tokens.cend(); ++iter) {
        std::cout << *iter << "\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T10:16:21.200

试试这段代码，这样你就可以避免使用 Boost.Tokenizer 和 Boost.Spirit 库

```
#include <vector>
#include <string>
#include <iostream>

const char Separators[] = { ' ', 9 };

bool Str_IsSeparator( const char Ch )
{
    for ( size_t i = 0; i != sizeof( Separators ); i++ )
    {
        if ( Separators[i] == Ch ) { return true; }
    }

    return false;
}

void SplitLine( size_t FromToken, size_t ToToken, const std::string& Str, std::vector<std::string>& Components /*, bool ShouldTrimSpaces*/ )
{
    size_t TokenNum = 0;
    size_t Offset   = FromToken - 1;

    const char* CStr  = Str.c_str();
    const char* CStrj = Str.c_str();

    while ( *CStr )
    {
        // bypass spaces & delimiting chars
        while ( *CStr && Str_IsSeparator( *CStr ) ) { CStr++; }

        if ( !*CStr ) { return; }

        bool InsideQuotes = ( *CStr == '\"' );

        if ( InsideQuotes )
        {
            for ( CStrj = ++CStr; *CStrj && *CStrj != '\"'; CStrj++ );
        }
        else
        {
            for ( CStrj = CStr; *CStrj && !Str_IsSeparator( *CStrj ); CStrj++ );
        }

        // extract token
        if ( CStr != CStrj )
        {
            TokenNum++;

            // store each token found
            if ( TokenNum >= FromToken )
            {
                  Components[ TokenNum-Offset ].assign( CStr, CStrj );
                  // if ( ShouldTrimSpaces ) { Str_TrimSpaces( &Components[ TokenNum-Offset ] ); }
                  // proceed to next token
                  if ( TokenNum >= ToToken ) { return; }
            }
            CStr = CStrj;

            // exclude last " from token, handle EOL
            if ( *CStr ) { CStr++; }
        }
    }
}

int main()
{
    std::string test = "1st 2nd \"3rd with some comment\" 4th";
    std::vector<std::string> Out;

    Out.resize(5);
    SplitLine(1, 4, test, Out);

    for(size_t j = 0 ; j != Out.size() ; j++) { std::cout << Out[j] << std::endl; }

    return 0;
} 
```

它使用预先分配的字符串数组（它不是从零开始的，但很容易修复），而且非常简单。

# qt - Gstreamer 和 Taglib 未解析的外部符号

> ID：10845289
> 
> 赞同：2
> 
> 时间：2012-06-01T06:11:50.543
> 
> 标签：qt, gstreamer, taglib, waf, visual-studio-2010

我正在尝试使用 msvc 在 Windows 中创建一个基于 Gstreamer-Qt 的小型程序并使用 waf 构建它。即使我已经链接了所有所需的库，我也会收到此链接器错误。

```
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_object_get_type referenced in function "public: virtual __cdecl GSTEngine::~GSTEngine(void)" (??1GSTEngine@@UEAA@XZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_element_set_state referenced in function "public: virtual __cdecl GSTEngine::~GSTEngine(void)" (??1GSTEngine@@UEAA@XZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol g_type_check_instance_cast referenced in function "public: virtual __cdecl GSTEngine::~GSTEngine(void)" (??1GSTEngine@@UEAA@XZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_element_get_type referenced in function "public: virtual __cdecl GSTEngine::~GSTEngine(void)" (??1GSTEngine@@UEAA@XZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_object_unref referenced in function "public: virtual __cdecl GSTEngine::~GSTEngine(void)" (??1GSTEngine@@UEAA@XZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_element_link referenced in function "public: virtual void __cdecl GSTEngine::init(void)" (?init@GSTEngine@@UEAAXXZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol g_object_set referenced in function "public: virtual void __cdecl GSTEngine::init(void)" (?init@GSTEngine@@UEAAXXZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_element_add_pad referenced in function "public: virtual void __cdecl GSTEngine::init(void)" (?init@GSTEngine@@UEAAXXZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_ghost_pad_new referenced in function "public: virtual void __cdecl GSTEngine::init(void)" (?init@GSTEngine@@UEAAXXZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_element_get_static_pad referenced in function "public: virtual void __cdecl GSTEngine::init(void)" (?init@GSTEngine@@UEAAXXZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_bin_add_many referenced in function "public: virtual void __cdecl GSTEngine::init(void)" (?init@GSTEngine@@UEAAXXZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_bin_get_type referenced in function "public: virtual void __cdecl GSTEngine::init(void)" (?init@GSTEngine@@UEAAXXZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_bin_new referenced in function "public: virtual void __cdecl GSTEngine::init(void)" (?init@GSTEngine@@UEAAXXZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_bus_add_watch referenced in function "public: virtual void __cdecl GSTEngine::init(void)" (?init@GSTEngine@@UEAAXXZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_pipeline_get_bus referenced in function "public: virtual void __cdecl GSTEngine::init(void)" (?init@GSTEngine@@UEAAXXZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_pipeline_get_type referenced in function "public: virtual void __cdecl GSTEngine::init(void)" (?init@GSTEngine@@UEAAXXZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol g_timeout_add referenced in function "public: virtual void __cdecl GSTEngine::init(void)" (?init@GSTEngine@@UEAAXXZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_element_factory_make referenced in function "public: virtual void __cdecl GSTEngine::init(void)" (?init@GSTEngine@@UEAAXXZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_init referenced in function "public: virtual void __cdecl GSTEngine::init(void)" (?init@GSTEngine@@UEAAXXZ)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_element_query_position referenced in function "bool __cdecl show_position(struct _GstElement *)" (?show_position@@YA_NPEAU_GstElement@@@Z)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol g_error_free referenced in function "int __cdecl bus_state_changed(struct _GstBus *,struct _GstMessage *,void *)" (?bus_state_changed@@YAHPEAU_GstBus@@PEAU_GstMessage@@PEAX@Z)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_message_parse_error referenced in function "int __cdecl bus_state_changed(struct _GstBus *,struct _GstMessage *,void *)" (?bus_state_changed@@YAHPEAU_GstBus@@PEAU_GstMessage@@P
EAX@Z)
GSTEngine.cpp.4.o : error LNK2019: unresolved external symbol gst_element_seek_simple referenced in function "public: virtual void __cdecl GSTEngine::jump(int,bool)" (?jump@GSTEngine@@UEAAXH_N@Z)
id3.cpp.3.o : error LNK2019: unresolved external symbol "__declspec(dllimport) public: class TagLib::AudioProperties * __cdecl TagLib::FileRef::audioProperties(void)const " (__imp_?audioProperties@FileRef@TagLib@@QEBAPEAVAudioProperties@2@XZ)
 referenced in function "struct MetaData __cdecl ID3::getMetaDataOfFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (?getMetaDataOfFile@ID3@@YA?AUMetaData@@V?$basic_string@DU?$char_traits@D@std@@V
?$allocator@D@2@@std@@@Z)
id3.cpp.3.o : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual __cdecl TagLib::String::~String(void)" (__imp_??1String@TagLib@@UEAA@XZ) referenced in function "struct MetaData __cdecl ID3::getMetaDataOfFile(cla
ss std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (?getMetaDataOfFile@ID3@@YA?AUMetaData@@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)
id3.cpp.3.o : error LNK2019: unresolved external symbol "__declspec(dllimport) public: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl TagLib::String::to8Bit(bool)const " (__imp_?to8Bit@String@T
agLib@@QEBA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@_N@Z) referenced in function "struct MetaData __cdecl ID3::getMetaDataOfFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)"
(?getMetaDataOfFile@ID3@@YA?AUMetaData@@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)
id3.cpp.3.o : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual __cdecl TagLib::FileRef::~FileRef(void)" (__imp_??1FileRef@TagLib@@UEAA@XZ) referenced in function "struct MetaData __cdecl ID3::getMetaDataOfFile(
class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (?getMetaDataOfFile@ID3@@YA?AUMetaData@@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)
id3.cpp.3.o : error LNK2019: unresolved external symbol "__declspec(dllimport) public: class TagLib::Tag * __cdecl TagLib::FileRef::tag(void)const " (__imp_?tag@FileRef@TagLib@@QEBAPEAVTag@2@XZ) referenced in function "struct MetaData __cdecl
 ID3::getMetaDataOfFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (?getMetaDataOfFile@ID3@@YA?AUMetaData@@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)
id3.cpp.3.o : error LNK2019: unresolved external symbol "__declspec(dllimport) public: bool __cdecl TagLib::FileRef::isNull(void)const " (__imp_?isNull@FileRef@TagLib@@QEBA_NXZ) referenced in function "struct MetaData __cdecl ID3::getMetaData
OfFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (?getMetaDataOfFile@ID3@@YA?AUMetaData@@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)
id3.cpp.3.o : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __cdecl TagLib::FileRef::FileRef(class TagLib::FileName,bool,enum TagLib::AudioProperties::ReadStyle)" (__imp_??0FileRef@TagLib@@QEAA@VFileName@1@_NW4ReadS
tyle@AudioProperties@1@@Z) referenced in function "struct MetaData __cdecl ID3::getMetaDataOfFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (?getMetaDataOfFile@ID3@@YA?AUMetaData@@V?$basic_strin
g@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)
id3.cpp.3.o : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __cdecl TagLib::FileName::FileName(char const *)" (__imp_??0FileName@TagLib@@QEAA@PEBD@Z) referenced in function "struct MetaData __cdecl ID3::getMetaDataO
fFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (?getMetaDataOfFile@ID3@@YA?AUMetaData@@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)
C:\cygwin\project\build\test\Playback\app.exe : fatal error LNK1120: 31 unresolved externals 
```

我的 waf wscript（针对阅读进行了优化）

```
top = '.'
out = 'build'

def options(opt): 
    opt.load('compiler_cxx qt4 compiler_c')

def configure(conf):
    conf.load('compiler_cxx qt4 compiler_c boost')
    conf.check_cfg(atleast_pkgconfig_version='0.0.0') 
    conf.check_cfg(package='gstreamer-0.10', uselib_store='GSTREAMER', args='--cflags --libs', mandatory=True)
    conf.check_cfg(package='taglib', uselib_store='TAGLIB', args='--cflags --libs', mandatory=True) 
    conf.check_boost(lib='filesystem system unit_test_framework prg_exec_monitor test_exec_monitor program_options')
    conf.env.append_value('CXXFLAGS', ['-DWAF=1']) # test

def build(bld):
    cxxflags = bld.env.commonCxxFlags
    uselibcommon = 'QTMAIN QTCORE QTGUI QTOPENGL QTSVG QWIDGET QTSQL QTUITOOLS QTSCRIPT TAGLIB GSTREAMER'

    libpath = bld.env.LIBPATH_TAGLIB + bld.env.LIBPATH_GSTREAMER
    lib = bld.env.LIB_GSTREAMER + bld.env.LIB_TAGLIB
    include = [bld.options.boost_includes] + bld.env.INCLUDES_GSTREAMER + bld.env.INCLUDES_TAGLIB + bld.env.INCLUDES_QTGUI

    bld(features = 'cxx',   includes = include, source = 'Util.cpp' , target = 'Util.o', uselib = uselibcommon, lib = lib, libpath = libpath, cxxflags=cxxflags)

    bld(features = 'cxx',   includes = include, source = 'MetaData.cpp' , target = 'MetaData.o', uselib = uselibcommon, lib = lib, libpath = libpath, cxxflags=cxxflags)

    use = ['MetaData.o', 'Util.o' ]
    bld(features = 'cxx',   includes = include , source = 'id3.cpp' , target = 'id3.o', use = use, uselib = uselibcommon, lib = lib, libpath = libpath, cxxflags=cxxflags, linkflags=bld.env.commonLinkFlags)

    flags = cxxflags + ['-DWAF']
    use = ['MetaData.o', 'Util.o' , 'id3.o']
    bld(features = 'qt4 cxx',  includes = include , source = 'GSTEngine.cpp' , target = 'GSTEngine.o', use = use, uselib = uselibcommon, lib = lib, libpath = libpath, cxxflags=flags, linkflags=bld.env.commonLinkFlags)

    use = ['GSTEngine.o','MetaData.o', 'Util.o' , 'id3.o', ]
    bld(features = 'qt4 cxx c', uselib = uselibcommon, includes = include , source   = 'MainWindow.cpp' , target = 'MainWindow.o', lib = lib, libpath = libpath, use = use, linkflags=bld.env.commonLinkFlags, cxxflags=cxxflags )

    #when doing multiple entry in use space before coma
    use = ['GSTEngine.o','MetaData.o', 'Util.o' , 'id3.o','MainWindow.o', 'BOOST']

    if bld.env.COMPILER_CXX == 'msvc':
        libfile = bld.options.debug and ['qtmaind'] or ['qtmain'] 
        lib = lib + libfile
        libpath = libpath + ['C:\Qt\4.8.1_x64\lib']
        linkflags=bld.env.commonLinkFlags + ['/DEBUG']
    else:
        #lib = lib + []
        libpath = libpath + ["/usr/lib"]
        linkflags=bld.env.commonLinkFlags

    bld(features = 'qt4 cxx cxxprogram', includes = include, source = 'main.cpp MasterDetail.qrc', target   = 'app', uselib = uselibcommon , cxxflags=cxxflags, use = use,  lib = lib, libpath = libpath, subsystem='windows', linkflags=linkflags) 
```

如果你打印`lib`

```
 ['gstreamer-0.10', 'gobject-2.0', 'gmodule-2.0', 'xml2', 'gthread-2.0', 'glib-2.0', 'intl', 'tag', 'qtmain'] 
```

如果你打印`libpath`

```
['C:/taglib-1.7.2/taglib/Release', 'C:/OSSBuild/GStreamer/v0.10.7/sdk/lib', 'C:/OSSBuild/GStreamer/v0.10.7/lib', 'C:/gtk/lib', 'C:\\Qt\x04.8.1_x64\\lib'] 
```

如果你打印`include`

```
 ['C:\\Users\\sobingt\\Desktop\\boost_1_49_0', 'C:/OSSBuild/GStreamer/v0.10.7/sdk/include/gstreamer-0.10', 'C:/OSSBuild/GStreamer/v0.10.7/sdk/include/libxml2', 'C:/OSSBuild/GStreamer/v0.10.7/sdk/include', 'C:/gtk/include/glib-2.0', 'C:/gtk/lib
    /glib-2.0/include', 'C:/taglib-1.7.2', 'C:/taglib-1.7.2/include', 'C:/Qt/4.8.1_x64/include', 'C:/Qt/4.8.1_x64/include/QtGui', 'C:/Qt/4.8.1_x64/include/QtCore'] 
```

如果我必须为 gstreamer 添加任何其他库，你能告诉我我错过了什么吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T06:39:49.607

似乎是 Gstreamer 和 TagLib 32 位问题。我正在研究 64 位 msvc、boost 和 QT，并且正在使用 32 位 Gstreamer 和 Taglib。我现在正在用 64 位编译 Gstreamer 和 Taglib。当我使用 64 位的 32 位 msvc、boost 和 QT 插入时程序工作

谢谢大家

# jquery - jquery fadeIn 将不透明度设置为 0

> ID：10845293
> 
> 赞同：7
> 
> 时间：2012-06-01T06:11:57.690
> 
> 标签：jquery, fadein

我有这种奇怪的行为`.fadeIn()`

如果我写

```
$('#MyDiv').show(); 
```

div 显示得很好。

但是，如果我写

```
$('#MyDiv').fadeIn(400); 
```

div 显示但不透明`0`！

前一行是：

```
$('#MyDiv').hide()
    .html(TheHTML)
    .css('top', 0); 
```

**更新：**如果我写`$('#MyDiv').show(400);`

div 也保持在 opacity `0`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T06:19:33.520

**某些 CSS 在隐藏时会覆盖您的 div。最好将不透明度样式添加到您的 div 为 1。**

否则，

```
$('#MyDiv').css('opacity','1'); 
```

**在你的淡入淡出电话之后......**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T06:37:49.697

试试 jQuery [.fadeTo](http://api.jquery.com/fadeTo/)函数。

```
.fadeTo( duration, opacity [, callback] )  
.fadeTo( duration, opacity [, easing] [, callback] ) 
```

**样本：**

```
$('#book').fadeTo('slow', 0.5, function() {
  // Animation complete.
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T06:13:21.370

以下将使其随心所欲地可见

```
$('#MyDiv').animate({
  opacity: 1
},400); 
```

您可以尝试以下操作：

```
$('#MyDiv').fadeIn(400, function(){
    $(this).css('opacity', 1)
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/5r3TP/1/)**

但我认为你也应该工作得很好。看**[这里](http://jsfiddle.net/thecodeparadox/5r3TP/3/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T06:22:34.373

检查你是否有

```
opacity: 0 !important;

//or

opacity: 0; 
```

`opacity`在这种情况下，在您的 css 中，您必须像这样自己手动更改

```
$('#MyDiv').fadeIn(400,function(){
   $(this).css('opacity',1);
}); 
```

检查这个[小提琴](http://jsfiddle.net/joycse06/PHD7k/1/)。第一个 div 永远不会出现。

# java - 通用接口混乱

> ID：10845295
> 
> 赞同：3
> 
> 时间：2012-06-01T06:12:13.660
> 
> 标签：java, generics, interface

我试图将 3 个接口封装在一个 ( `ICountable`) 中，并使具体类实现这个封装接口。``ICountable`代码：

```
public interface ICountable extends IAddable, Cloneable, Serializable {} 
```

`Addable`接口定义为：

```
public interface IAddable<T> {
    T add(T other);
} 
```

现在，当我尝试`ICountable`在具体类（`BaseCounter`）中实现时，我收到了错误，即并非所有方法都已实现（抱怨`add`方法）。我不明白为什么。`BaseCounter`代码如下：

```
public class BaseCounter implements ICountable {
    @Override
    public BaseCounter add(BaseCounter other) {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

`add`将方法签名更改为

```
public ICountable add(ICountable other) 
```

解决这种情况。但是，我最初想要的是创建一个接口 ( `ICountable`) 来扩展其他 3 个接口（2 个标记和 1 个接口，描述实现类`add`在相同类型的对象上执行的能力）。我需要更改以使`add`方法实现`BaseCounter`如下所示：

```
public BaseCounter add(BaseCounter other) 
```

我会很感激你的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T06:17:07.827

1 将泛型添加到 ICountable

```
public interface ICountable<T> extends IAddable<T>, Cloneable, Serializable {} 
```

2 在实现中指定泛型

```
public class BaseCounter implements ICountable<BaseCounter> {
    @Override
    public BaseCounter add(BaseCounter other) {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T06:18:21.827

在没有编译代码的情况下，我认为您需要向接口添加泛型类型。如果没有将类型传递给接口，则方法无法知道要提供哪种返回类型（当然除了 ICountable，您也提到过它有效）。例子

```
public interface IAddable<T> { 
    T add(T other);
}

public interface ICountable<T> extends IAddable<T>, ... {
    ....
}

public class BaseCounter implements IAddable<T> {
    @Override public BaseCounter add(BaseCounter other) { ... }
} 
```

这应该可以解决问题..

# java - 用Java加载图像的高效和跨平台方式

> ID：10845296
> 
> 赞同：2
> 
> 时间：2012-06-01T06:12:37.127
> 
> 标签：java, image, text, cross-platform, embedded-resource

我正在学习用 Java 创建游戏，并且需要在为它们设置动画之前加载几个图像。这就是我现在正在做的事情：

```
bg = new ImageIcon(System.getProperty("user.dir")+"/src/img/bg.jpg").getImage(); 
```

但显然它有很多缺点。首先，它看起来又长又丑，我怀疑它很慢。~~此外，正斜杠“/”仅适用于 Mac 或 Linux，而在 Windows 上，它将使用反斜杠。~~

编辑：正如下面塞缪尔罗西尔所纠正的，正斜杠“/”实际上在 Windows 上工作。

我想知道是否有加载图像，在应用程序目录中，不会改变，以更优雅的方式，以及跨平台？

加载文本文件怎么样？他们有什么不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T06:17:14.147

查看信息。关于[嵌入式资源](https://stackoverflow.com/tags/embedded-resource/info)。请注意，大多数接受 a 的方法和构造函数也`File`将接受`InputStream`or `URL`。嵌入式资源是只读的。

* * *

关于文件的问题（在极少数情况下，您可能正在使用它们并且必须从 a 形成路径`String`）。

```
String fileSep = System.petProperty("file.separator");
bg = new ImageIcon(System.getProperty("user.dir")+
    fileSep+
    "src"+
    fileSep+
    "img"+
    fileSep+
    "bg.jpg").getImage(); 
```

这是获取使用文件系统正确分隔符的目录路径的一种方法。该类`File`还提供了方便的构造函数，这样[`new File(parent,child)`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#File%28java.lang.String,%20java.lang.String%29)可以插入正确的分隔符。

顺便说一句，我强烈认为 J2SE 中所有接受`String`用于表示`File`路径的方法和构造函数都应该被弃用。如果它需要 a `File`，给它 a`File`并完成它。

# html - 使用本地 json 数据加载 jqxgrid 失败

> ID：10845297
> 
> 赞同：-1
> 
> 时间：2012-06-01T06:12:43.583
> 
> 标签：html, ajax, jqxgrid

嗨，我正在研究 jqxgrid。我正在尝试使用本地 json 网格加载这个 jqxgrid。

下面是我到目前为止尝试的代码。但是我得到一个空白网格。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="jqwidgets/styles/jqx.base.css" type="text/css" />
    <script type="text/javascript" src="scripts/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="jqwidgets/jqxbuttons.js"></script>
    <script type="text/javascript" src="jqwidgets/jqxscrollbar.js"></script>
    <script type="text/javascript" src="jqwidgets/jqxmenu.js"></script>
    <script type="text/javascript" src="jqwidgets/jqxgrid.js"></script>
    <script type="text/javascript" src="jqwidgets/jqxgrid.selection.js"></script> 
    <script type="text/javascript" src="jqwidgets/jqxgrid.columnsresize.js"></script> 
    <script type="text/javascript" src="jqwidgets/jqxdata.js"></script> 
    <script type="text/javascript" src="scripts/gettheme.js"></script>
    <script type="text/javascript">
$(document).ready(function () {
var jsonData = [{"creation_dt":"2011-04-08 00:00:00.0","request_deliv_dt":"2011-07-01 00:00:00.0”},
                {"creation_dt":"2011-04-08 00:00:00.0","request_deliv_dt":"2011-07-02 00:00:00.0"},
                {"creation_dt":"2011-04-08 00:00:00.0","request_deliv_dt":"2011-07-01 00:00:00.0"},
                {"creation_dt":"2011-04-08 00:00:00.0","request_deliv_dt":"2011-07-02 00:00:00.0"},
                {"creation_dt":"2011-04-08 00:00:00.0","request_deliv_dt":"2011-07-01 00:00:00.0"},
                {"creation_dt":"2011-04-08 00:00:00.0","request_deliv_dt":"2011-07-02 00:00:00.0"];
var jsonColumns = [{ text: 'creation_dt', datafield: 'creation_dt', width: 250 },{text:'request_deliv_dt', datafield: 'request_deliv_dt', width: 250 }];

var jsonFields = [{ name: 'creation_dt' },{ name: 'request_deliv_dt' }];

var source ={
                  datatype: "json",
                  datafields: jsonFields,
                  localdata: jsonData
            };
var dataAdapter = new $.jqx.dataAdapter(source);
$("#jqxgrid").jqxGrid(
                        {
                            width: 670,
                            source: dataAdapter,
    columns: jsonColumns
                        });
                  });

});
    </script>
</head>
<body class='default'>
    <div id='jqxWidget' style="font-size: 13px; font-family: Verdana; float: left;">
        <div id="jqxgrid"></div>
    </div>
</body>
</html> 
```

上面的代码有什么问题..？？

谁能帮我解决这个问题。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:29:32.647

您的代码中有 2 个错误：

*   最后 '}）;' 不应该在那里。
*   在您的 JSON 中缺少“}”

# keyboard - 是否可以使用上下文菜单键或其他键作为修饰键

> ID：10845303
> 
> 赞同：1
> 
> 时间：2012-06-01T06:13:16.717
> 
> 标签：keyboard, autohotkey

是否可以使用`AppsKey`（上下文菜单键）或其他键作为使用 AutoHotKey 程序的修饰符？（例如`AppsKey`+`s`打开 stackoverfolow.com ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:40:03.587

您可以像这样一起使用两个键：

```
AppsKey & s::Run stackoverflow.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:20:14.673

使用：SC15D 这是扫描码。你可以试试这个：

```
SC15D::Soundbeep, 500,500 
```

哦，你也可以使用：APPSKEY

```
APPSKEY::Soundbeep, 500,500 
```

# sql - 如何使用 SQL Server 探查器进行跟踪

> ID：10845304
> 
> 赞同：1
> 
> 时间：2012-06-01T06:13:19.900
> 
> 标签：sql, sql-server, sql-server-profiler

我正在尝试使用 SQL Server Profiler 我想知道如何使用 SQL Server Profiler 进行跟踪。任何与 apprpiate GUI 的链接都会更有帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T09:42:33.717

脚步：

**SQL Server 管理工作室**

1.  转到 MS SQL Server Management Studio 并选择要在 Profiler 中跟踪的数据库。
2.  右键单击数据库并选择新建查询。
3.  在查询窗口类型中选择 db_id() 然后执行...并记住生成的数字

**SQL Server 探查器**

1.  文件 - 新建跟踪然后选择服务器，身份验证模式提供用户名和密码，然后单击连接。
2.  在跟踪属性中，转到事件选择选项卡。
3.  单击**显示所有事件**和**显示所有列**。
4.  单击*列过滤器*按钮
5.  单击数据库ID
6.  点击 Equals 然后在 Mangement Studio 中输入之前生成的 DB ID
7.  单击确定，然后单击**运行**按钮

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T06:34:11.527

在 sql Profiler 中转到 File -> New Trace 输入您的服务器名称

![SQL 探查器](../Images/6b5043939b09c7e722dd1049638b895f.png)

在接下来的窗口中，只需单击运行，您就会看到跟踪命令 ![痕迹](../Images/927e667440e64b8cb1dd57c1fb0359e0.png)

在您的管理工作室中执行一些语句，然后检查分析器

# perl - 使用 List::MoreUtils::firstidx 的问题

> ID：10845306
> 
> 赞同：3
> 
> 时间：2012-06-01T06:13:21.737
> 
> 标签：perl

我正在尝试使用 List::MoreUtils 方法。但是，在某些情况下需要对其使用有所了解。

请告诉我，如果它可以与地图一起使用。例如：

```
#!/usr/bin/perl

use strict;
use warnings;
use List::Util;
use List::MoreUtils;
use Data::Dumper;

my @udData1 = qw(WILL SMITH TOMMY LEE JONES);

my @arr = qw(WILL TOMMY);
my %output = map{$_=>List::MoreUtils::firstidx{/$_/} @udData1} @arr;
print Dumper %output;
print List::MoreUtils::firstidx{/TOMMY/} @udData1;
print "\n"; 
```

输出：

```
$VAR1 = 'TOMMY';
$VAR2 = 0;
$VAR3 = 'WILL';
$VAR4 = 0;
2 
```

正如所观察到的，我在使用 map 时没有正确获取值，但在后面的命令中使用时却很好。我打算使用 $_ 作为@arr 的一个元素。这可能是不正确的。所以，请给我一个替代方案。我必须使用foreach吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T06:21:19.510

问题就在这里：

```
List::MoreUtils::firstidx{/$_/} @udData1 
```

在这段代码中，您期望*同时*`$_`成为模式取自`@arr`和字符串取自。（记住这意味着，同样意味着。）`@udData1` *`firstidx{/TOMMY/}``firstidx{$_ =~ /TOMMY/}``firstidx{/$_/}``firstidx{$_ =~ /$_/}`*

 *实际发生的是`$_`来自`@udData1`（因为这是最内层循环）的值，并且您最终将其与自身匹配。因为它是一个简单的字母字符串，它总是匹配自身，并且 firstidx 正确返回 0。

这是使用临时词法变量的一种解决方案：

```
my %output = map{ my $p = $_;
                  $p => List::MoreUtils::firstidx{/$p/} @udData1 } @arr; 
```*

# apache - 使用 Apache 和 Tomcat 进行负载平衡并结合 URL 重定向

> ID：10845312
> 
> 赞同：3
> 
> 时间：2012-06-01T06:14:10.713
> 
> 标签：apache, tomcat, servlets, url-rewriting, mod-jk

我现在有一台 Apache 服务器和两台 Tomcat 服务器。它们使用 mod_jk 模块连接。并且配置了负载均衡。所有请求都将被重定向到负载均衡器，在 httpd.conf 中：

```
JKMount /* controller 
```

控制器是负载均衡器，工作的tomcat服务器是worker1、worker2。

问题是，除了自动加载dispatch之外，我还需要一个url匹配重定向。[具体来说，对http://www.example.com/test1/index.html](http://www.example.com/test1/index.html)的请求应该发给 worker1（Tomcat），而[http://www.example.com/test2/index.html](http://www.example.com/test2/index.html)应该发给 worker2。但是，在worker1和worker2中，应用程序结构都是webapps/test/结构。

我可以使用 mod_jk url 映射来分派 /test1/ 到 worker1 和 /test2/ 到 worker2，但是 PATH 将是 /test1/ 和 /test2/ 而不是 /test/。同时，如果我使用 apache redirectMatch 或 url rewrite 将 /test1/(/test2/) 更改为 /test/，则 mod_jk 现在不会将 url 分派给不同的 worker，因为它们具有相同的 PATH。

我该如何处理这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:38:17.367

您需要使应用程序成为 Tomcat 中的根应用程序。您可以通过将 META-INF/context.xml 添加到您的应用程序来执行此操作，其中包含以下内容：

```
<Context path="/"/> 
```

我建议您从 webapps 目录中删除其他应用程序。然后您需要更改您的应用程序 web.xml，以便 servlet(s) 现在映射到具有适当上下文的适当 url：

```
<servlet-mapping>
    <servlet-name>TestApp</servlet-name>
    <url-pattern>/test</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>TestApp</servlet-name>
    <url-pattern>/test1</url-pattern>
</servlet-mapping> 
```

第二个 JVM 中的应用程序将需要 url-pattern /test2 代替。对于 Apache/Tomcat 连接，我使用 mod_ajp 而不是 mod_jk。这是您在 Apache 中为 mod_ajp 所需要的：

```
<Proxy balancer://cluster>
    BalancerMember ajp://127.0.0.1:8015 route=ajp13_node1
    BalancerMember ajp://127.0.0.1:8016 route=ajp13_node2
</Proxy>
<Location "/test">
    ProxyPass balancer://cluster/test stickysession=JSESSIONID
</Location>
<Location "/test1">
    ProxyPass ajp://127.0.0.1:8015/test1
</Location>
<Location "/test2">
    ProxyPass ajp://127.0.0.1:8016/test2
</Location> 
```

这是假设 AJP 连接器正在侦听第一个 JVM 的 8015 和第二个 JVM 的 8016。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T23:42:57.480

也许一个简单的方法是在 tomcat 工作人员上使用[urlrewrite过滤器。](http://www.tuckey.org/urlrewrite/)根据文档，您的 urlrewrite.xml 文件应该有以下规则[：](http://urlrewritefilter.googlecode.com/svn/trunk/src/doc/manual/3.2/index.html)

```
 <rule>
       <from>^/test[0-9]*/(.*)$</from>
       <to type="redirect">/$1</to>
    </rule> 
```

所以工作人员会忽略 test1 或 test2 URI 部分。并且 apache 可以按照您使用 mod_jk 计划的方式工作。

# asp.net - 在 ASP .Net 中动态更改 Facebook 共享缩略图

> ID：10845316
> 
> 赞同：1
> 
> 时间：2012-06-01T06:14:28.903
> 
> 标签：asp.net, facebook-graph-api

我在 ASP .Net 我的网站母版页中以及在 Facebook 中共享页面链接时使用了 Facebook 之类的按钮。我想更改带有每个页面链接的缩略图附加，我得到我的asp网站的图像url后端并分配给变量，当我试图将它绑定到前端时，如下所示它没有得到实际值

```
<link rel="image_src" type="image/jpeg" href=" <% = ImgLink %>"/> 
```

（ImgLink 是我从代码后端获得的动态变量）至少它在 Visual Studio 中没有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:27:48.143

尝试

```
<asp:PlaceHolder runat="server">
    <link rel="image_src" type="image/jpeg" <%= "href='" + ImgLink + "'"%>/>
</asp:Placeholder> 
```

[这](http://csharpin.blogspot.ro/2011/11/saga-on-asp-net.html)是一个详细的解释为什么这是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T07:16:31.173

```
LitFacebook.Text = "<a name=\"fb_share\" type=\"button\" share_url =\"http://kidstrail.inoday.co.in/\"></a>" +
                   "<script " +
                   "src=\"http://static.ak.fbcdn.net/connect.php/js/FB.Share\" " +
                   "type=\"text/javascript\"></script>"; 
```

在设计页面上，进行文字控制：

```
<div style="float:left; height:18px; margin-left:3px; overflow:hidden;"><asp:Literal ID="LitFacebook" runat="server" ></asp:Literal> </div> 
```

# python - 如何在 Python 中替换字符串中的某些字符串？

> ID：10845321
> 
> 赞同：0
> 
> 时间：2012-06-01T06:15:09.990
> 
> 标签：python, loops, replace

我正在尝试编写两个程序来替换python中字符串中的匹配字符串。我必须编写两个程序。

defmatched_case（旧新）：......

注意：输入是两个字符串，它返回一个替换转换器。

def 替换(x,another_string): ..........

注意：inputs 是上一个过程的转换器和一个字符串。它返回将转换器应用于输入字符串的结果。

例如：

```
a = matched_case('mm','m')
print replacement(a, 'mmmm')
it should return m 
```

另一个例子：

```
R = matched_case('hih','i')
print replacement(R, 'hhhhhhihhhhh')
it should return hi 
```

我不确定如何使用循环来完成整个操作。非常感谢任何人都可以提供提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T06:25:46.903

```
def subrec(pattern, repl, string):
    while pattern in string:
        string = string.replace(pattern, repl)
    return string 
```

`foo('mm', 'm', 'mmmm')` 返回`m`

`foo('hih', 'i', 'hhhhhhihhhhh')` 返回`hi`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:38:29.430

以下内容可能会有所帮助：

```
def matched_case(x,y):
    return x, lambda param: param.replace(x,y)

def replacement(matcher, s):
    while matcher[0] in s:
        s = matcher[1](s)
    return s

print replacement(matched_case('hih','i'), 'hhhhhhihhhhh')
print replacement(matched_case('mm','m'), 'mmmm') 
```

输出：

```
hi
m 
```

`matched_case(..)`返回一个替换转换器，因此最好使用[lambda](http://docs.python.org/reference/expressions.html#lambda)表示（简而言之，匿名函数）。这个匿名函数将找到的字符串和实际替换它的代码包装起来。

# ios - 使用 myang 的 Qr 编码器项目加密/解密

> ID：10845328
> 
> 赞同：3
> 
> 时间：2012-06-01T06:15:39.467
> 
> 标签：ios, qr-code, encryption, encoder

嗨，这是 myang 在 github 上找到的一个 QR 编码器项目，[https://github.com/myang-git/QR-Code-Encoder-for-Objective-C](https://github.com/myang-git/QR-Code-Encoder-for-Objective-C)我想使用此处提供的编码和解码功能，能够成功创建带有加密字符串的二维码，但无法解码...

如何解码扫描二维码后返回的字符串...

为解密提供的方法采用 nsdata 和 passphase 参数我尝试将扫描的字符串转换为 nsdata，然后将其作为参数传递给该函数，但它不起作用...

我如何解码字符串？

这就是我要做的编码然后字符串..

```
 DataMatrix* qrMatrix = [QREncoder encodeWithECLevel:QR_ECLEVEL_AUTO version:QR_VERSION_AUTO string:aVeryLongURL AESPassphrase:@"xyz"];

UIImage* qrcodeImage = [QREncoder renderDataMatrix:qrMatrix imageDimension:qrcodeImageDimension]; 
```

这就是我试图解码扫描后返回的字符串....

```
NSString *strReturedAfterscanning=@"ñ?³éMX¹Ç7T?îéz°z ";
NSData* data=[strReturedAfterscanning dataUsingEncoding:NSUTF8StringEncoding];
NSString *str1=[QREncoder AESDecryptString:data withPassphrase:@"xyz"]; 
```

这不工作？

# java - CAS 客户端中的服务属性

> ID：10845332
> 
> 赞同：0
> 
> 时间：2012-06-01T06:16:03.927
> 
> 标签：java, spring-security, cas

我想将我的一个网络应用程序与 CAS 服务器连接起来。我也使用 SSL 设置成功创建了我的 CAS 服务器。但是当我想设置我的 CAS 客户端时存在歧义。

在 spring 网站上有一个像这样的 bean，他们说我们应该初始化并创建它。

```
<bean id="serviceProperties" class="org.springframework.security.cas.ServiceProperties">
    <property name="service" value="https://localhost:8443/cas-sample/j_spring_cas_security_check" />
    <property name="sendRenew" value="false" />
</bean> 
```

这里的问题我无法理解什么是“服务”以及它所引用的 URL？我的意思是在我的网络应用程序中，“服务”的价值应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:14:23.623

来自 Spring Security 3 书：

> service 属性向 CAS 指示用户将被验证到的服务。

例如：`https://localhost:8443/your-web-application/j_spring_cas_security_check`

# php - PHP MYSQL 将数据插入到 2 个表中

> ID：10845334
> 
> 赞同：-1
> 
> 时间：2012-06-01T06:16:13.740
> 
> 标签：php, mysql, sql

嘿，我目前的插入 php 文件有问题

我有一个表单.. 用户在其中输入详细信息.. 对于我的表单.. 事件名称、事件日期和位置基本上工作良好的位首先我想在 2 个表中添加一个条目：事件和结果

将条目添加到事件中没有问题

但它不会在“结果”中添加相同的条目

事件表具有以下列：事件 ID、事件名称、事件日期和位置

结果表有：事件 ID、成员 ID、事件名称、分数和地点

事件 ID 是自动递增的

所以它会自动为其分配一个ID

并将其应用于两个表

事件 ID 中的自动增量

起作用的一点是

将条目插入事件表

但是因为事件表和结果表都有“事件名称

我希望这个 php 完全插入事件表的详细信息

但同时，只需将事件名称插入结果表

但事件中的 EventID 必须与结果中的 EventID 生成的数字相同。

以下是我的代码：非常感谢所有帮助！！！

```
<?

        $pdo = new PDO('mysql:host=localhost;dbname=clubresults', 'root', '12345678');
    #Set Error Mode to ERRMODE_EXCEPTION.
    $pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);  

$query = $pdo->query('SELECT EventID, EventName, EventDate, Location from events');
$rowset = array();

if ($query) {
  while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
    // Build array of rows
    $rowset[] = $row;
  }    

  // Output header first
  $headrow = $rowset[0];
  print("<table border=\"1\">\n<tr>\n");
  // Use $rowset[0] to write the table heading
  foreach ($headrow as $col => $val) {
    printf("<th>%s</th>\n", $col);
  }
  print("</tr>");

  // Then output table rows.
  // Outer loop iterates over row
  foreach ($rowset as $row) {
     print("<tr>");
     // Inner loop iterates over columns using $col => $val
     foreach ($row as $col => $val) {
        // We don't know your column names, but substitute the first column (the ID) for FIRSTCOL here
        printf("<td><a href=\"adminlistresults.php?EventID=%s\">%s</a></td>\n", $row['EventID'],$val);
     }
     print("</tr>");
  }
}
print("</table>");
?>
    </form>
</div>

<?

        $pdo = new PDO('mysql:host=localhost;dbname=clubresults', 'root', '12345678');
    #Set Error Mode to ERRMODE_EXCEPTION.
    $pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);  

$stmt=$pdo->prepare('INSERT INTO events (EventName, EventDate, Location)
VALUES (:EventName, :EventDate, :Location)');

  $stmt->bindValue(':EventName', $_POST['EventName']);
  $stmt->bindValue(':EventDate', $_POST['EventDate']);
  $stmt->bindValue(':Location', $_POST['Location']);

  $stmt->execute();   

    ?>
<?
    $int_event_id = $_GET["EventID"];
    if((int)$int_event_id)
    {
$stmt=$pdo->prepare('INSERT INTO results (EventName, EventID)
VALUES (:EventResultsName, $int_event_id)');
  $stmt->bindValue(':EventName', $_POST['EventResultsName']);
      $stmt->execute();    
      }
      ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:24:02.623

如果插入总是按顺序进行，我会使用`$pdo->lastInsertId()`（参见：[http](http://www.php.net/manual/en/pdo.lastinsertid.php) ://www.php.net/manual/en/pdo.lastinsertid.php ）

所以，我认为这条线是错误的：

```
$int_event_id = $_GET["EventID"]; 
```

我会这样写：

```
<?
    $stmt = $pdo->prepare('
              INSERT INTO results (EventName, EventID)
              VALUES (:EventResultsName, :EventId)
            ');
    $stmt->bindValue(':EventName', $_POST['EventResultsName']);
    $stmt->bindValue(':EventId', $pdo->lastInsertId());
    $stmt->execute();    
?> 
```

请注意，这假定插入结果立即发生在插入事件之后。

您可以使用 MySQL 的本机`last_insert_id()`函数在没有绑定变量的情况下完成相同的操作，如下所示：

```
<?
    $stmt = $pdo->prepare('
              INSERT INTO results (EventName, EventID)
              VALUES (:EventResultsName, last_insert_id())
            ');
    $stmt->bindValue(':EventName', $_POST['EventResultsName']);
    $stmt->execute();    
?> 
```

但是，与前面的示例相比，它的可移植性较差。但是，pdo`lastInsertId()`也不完全与 RDBMS 无关（请参阅文档），因此如果您正在考虑以另一个 RDBMS 为目标，则无论如何您都必须修复这段代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:31:46.400

假设`Event`实体代表一个事件，而`Result`实体代表一个特定成员的事件结果。`Event`所以->之间存在 1->n 的关系`Result`

## 问题

这意味着有时您会收到一个需要插入数据`Event`和数据的请求，而在其他情况下只会有数据。在后一种情况下，您将能够从请求中获取 EventId 。`Result``Result``_GET[EventId]`

在第一种情况下，您将没有此`EventId`设置，并且由于您基于 check 执行第二次插入`if((int)$int_event_id)`，因此`Result`永远不会插入。

## 解决方案

您应该做的第一件事是检查`_GET["EventId"]` *isset*是否存在。如果**不是，**那么您需要同时插入一个`Event`和`Result`。在这种情况下，`EventId`将从最后插入的语句中获取如下：

`$pdo->lastInsertId()`

而如果 `_GET["EventId"] *isset*，你应该只做你正在做的第二次插入。

# javascript - “异常：... [nsIWebProgressListener::onStatusChange]”在单击事件中使用 jQuery AJAX 时？

> ID：10845342
> 
> 赞同：3
> 
> 时间：2012-06-01T06:17:16.360
> 
> 标签：javascript, html, jquery

你好，我是 ajax 新手，我正在使用它和 jquery 来在另一个 html 文档中的 html div 中加载一个 html 文档，我实现这一点的方式是这样的：

```
 function pageload()//page load is called on body onload event
    {
        $.ajax({
            url: 'Marker.aspx',
            cache: false,
            dataType: "html",
            success: function (data) {
               $(".mainBar").html(data);
               alert("loaded");
            }
        });
} 
```

这似乎工作正常，当我尝试使用像这样的一些 js 事件来做这件事时，问题就来了

```
$(".panelHead").click(function(){

     alert("clicked!");
       $.ajax({
        url: 'Marker.aspx',
        cache: false,
        dataType: "html",
        success: function (data) {
           $(".mainBar").html(data);
           alert("loaded");
        }
    }); 
```

我什至尝试在按钮上创建 onclick 函数，但问题仍然存在，它在浏览器控制台中没有显示任何错误，但根本不加载文档，我尝试使用 firebug 进行调试，它给出了一些我没有的 jquery.js 错误t理解错误是：

```
Timestamp: 06/01/2012 AM 11:43:25
Error: [Exception... "'JavaScript component does not have a method named: "onStatusChange"' when calling method: [nsIWebProgressListener::onStatusChange]"  nsresult: "0x80570030 (NS_ERROR_XPC_JSOBJECT_HAS_NO_FUNCTION_NAMED)"  location: "<unknown>"  data: no] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:31:25.190

该错误不是由 jQuery 引起的，不是 jquery.js 错误。它最有可能是由一些 Firefox 扩展引起的。请尝试其他浏览器，例如 chrome。

# tridion - 如何在第三级访问 componentlink 字段名称？

> ID：10845347
> 
> 赞同：-1
> 
> 时间：2012-06-01T06:18:14.577
> 
> 标签：tridion, tridion-2011

如何在第三级访问 componentlink 字段名称？我有一个包含作为可嵌入模式的字段的模式，在该可嵌入模式中，我有一个从另一个模式派生的组件链接。我如何检索该架构的字段？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T09:39:20.370

这真的取决于这些字段的目的，也许您可​​以提供更多信息？

此处未提及的另一个选项是编写您自己的 C# 构建块以将这些 3 级组件添加到您的包中。通过这样做，您可以更轻松地在 DWT 布局中使用它们。

例如，如果您的第三级项目用于生成*办公室位置列表*，您可以编写一个 C# 块来获取所有相关的*办公室位置*组件并将它们作为组件列表“位置”添加到您的包中，您只需要在您的 DWT 中要做的是循环这些项目并提供您需要的显示。

就我个人而言，我不喜欢在 DWT 中使用/添加功能，我尽量让它尽可能简单，如果你能提供更多关于你的场景的信息，这会从社区为你产生更好的答案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T07:19:26.310

据我所知，您需要一个特殊的 DWT TBB 来控制您的嵌入式/组件链接。也许你可以使用 Nuno 的 Get Extensions ？[http://www.sdltridionworld.com/community/extension_overview/dreamweaver_get_extension.aspx](http://www.sdltridionworld.com/community/extension_overview/dreamweaver_get_extension.aspx) 或者使用 Razor Mediator，也许： [http ://www.sdltridionworld.com/community/2011_extensions/razormediator.aspx](http://www.sdltridionworld.com/community/2011_extensions/razormediator.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-01T11:18:29.477

为了避免不得不使用 DGX（如 MDa 所建议的那样）或编写 C# TBB（如 John Winter 所建议的那样），您还可以简单地调用`RenderComponentPresentation`以使用您要使用的模板来渲染链接的组件。

```
<!-- TemplateBeginRepeat name="Component.Fields.LinkFieldName" -->
    @@RenderComponentPresentation(Field, "tcm:1-23-32")@@
<!-- TemplateEndRepeat --> 
```

它是组件模板的TCM `tcm:1-23-32`URI，它只是将组件的名称呈现为超链接。在您使用的 DWT 中，`tcm:1-23-32`您可以简单地引用链接组件的所有字段和属性，例如`Component.Title`、`Component.Fields.Field1`等。

请注意，这些其他问题/答案中已经涵盖了相关主题：

*   渲染链接组件的标题 -[在 SDL Tridion 2011 中的 Dreamweaver TBB 中循环多个组件链接以获取链接组件的架构名称](https://stackoverflow.com/questions/10738405/looping-through-the-multiple-component-links-to-get-the-schema-name-of-the-linke)
*   获取链接组件的值 -[在 Dreamweaver TBB 中检索链接组件的值 - 并使其成为 SiteEditable](https://stackoverflow.com/questions/10256744/retrieving-values-of-a-linked-component-in-dreamweaver-tbb-and-making-it-sitee)
*   处理嵌套的嵌入式架构 -[如何在 SDL Tridion 2011 SP1 中处理 Dreamweaver TBB 中的嵌套重复区域](https://stackoverflow.com/questions/10309577/how-to-handle-nested-repeating-regions-in-dreamweaver-tbbs-in-sdl-tridion-2011-s)

如果不知何故这些对您没有足够的帮助，我建议您发布您的组件的 XML 和您正在尝试制作的 DWT。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-01T22:46:49.150

这是使用 C# 的快速示例

```
Session session = engine.GetSession();
Item componentItem = package.GetByName(Package.ComponentName);
Component component = new Component(new TcmUri(componentItem.GetValue("ID")), session);

ItemFields itemFields = new ItemFields(component.Content, component.Schema);
IEnumerable<ComponentLinkField> ie = itemFields.OfType<EmbeddedSchemaField>().OfType<ComponentLinkField>();
for (IEnumerator<ComponentLinkField> e = ie.GetEnumerator(); e.MoveNext(); ) {
    Component linkedComponent = e.Current.Value;
} 
```

通过使用 Linq，您可以非常快速地浏览字段结构并获得结果。它将为您提供第三级的组件链接，当然您可以使用它来更深入地了解结构。

# apache - Tomcat 服务器的 DNS 管理

> ID：10845350
> 
> 赞同：2
> 
> 时间：2012-06-01T06:18:24.723
> 
> 标签：apache, tomcat, dns, a-records

我有一个运行良好的 tomcat 服务器，`http://68.169.56.63:8080`我有一个子域[http://solar.wbe.in](http://solar.wbe.in)。现在我希望我的网站[http://solar.wbe.in](http://solar.wbe.in)指向那个 tomcat 服务器，这样如果我打开[http://solar.wbe.in](http://solar.wbe.in)网站，我的浏览器应该会显示`http://68.169.56.63:8080`我正在查看 DNS 管理中的 A 记录。它具有映射 IP 但不是端口号的选项。如何将[http://solar.wbe.in](http://solar.wbe.in)的 80 端口映射到 8080 端口`http://68.169.56.63`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:16:32.930

您可以更改 Tomcat Server.xml 中的端口，例如

```
<Connector port="80" maxHttpHeaderSize="8192"
               maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
               enableLookups="false" redirectPort="8443" acceptCount="100"
               connectionTimeout="20000" disableUploadTimeout="true" /> 
```

或者你可以安装一个像 apache 这样的网络服务器来监听端口 80，然后使用 mod_jk 或 mod_proxy 将请求代理到 Tomact。

# android - 如何在不使用 Canvas 的情况下在图像上书写

> ID：10845363
> 
> 赞同：2
> 
> 时间：2012-06-01T06:19:49.853
> 
> 标签：android, image, textview, drawable, android-canvas

我想在图像上写文本但不使用 Canvas，因为 Canvas 文本质量太低。我需要文本质量，就像 TextView 文本一样。有没有什么机制可以做到这一点？欢迎提出建议。提前致谢。

# android - Eclipse becomes stuck on "starting activity" when sending application to device. How to solve this?

> ID：10845365
> 
> 赞同：6
> 
> 时间：2012-06-01T06:20:20.427
> 
> 标签：android, eclipse, adb, android-2.3-gingerbread

Sometimes, when I attempt to "Run" my application on my Droid Charge (running Gingerbread), Eclipse displays the following in the console:

```
[2012-05-31 23:08:50 - SomeApp] Android Launch!
[2012-05-31 23:08:50 - SomeApp] adb is running normally.
[2012-05-31 23:08:50 - SomeApp] Performing com.test.SomeActivity activity launch
[2012-05-31 23:08:52 - SomeApp] Uploading SomeApp.apk onto device 'DEVICEIDHERE'
[2012-05-31 23:08:52 - SomeApp] Installing SomeApp.apk...
[2012-05-31 23:08:53 - SomeApp] Success!
[2012-05-31 23:08:53 - SomeApp] Starting activity com.test.SomeActivity on device DEVICEIDHERE 
```

However, the application never starts up on the phone. I am not able to see the that the .apk ever installed in the application's list.

What can I do to make it launch? It works just fine with AVD's running via the emulator.

Thank you!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T06:41:35.207

I can see 3 possible ways to give a try in solving your issue:

**1\. Have you checked the manifest.xml file?** The field

 **```
<category android:name="android.intent.category.LAUNCHER" /> 
```* 

*must be present inside your "main" activity, otherwise it will not launch in emulation mode.*

 ***2\. Your AVD machine is somewhat corrupted or the ADB is instable:** Check [this](https://stackoverflow.com/questions/8290879/eclipse-not-running-android-app-on-emulator-a-second-time) issue.

**3\. Your project can be out of synchronization in some way:** Try to cleanup (project->clean) your project as well as to rebuild it and reloading your AVD.

Hope it helps you in some way... ;D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T16:45:30.990

I faced with this problem and solved that easily.

**Solution:** Just check that you have selected the root folder of android project in Package Explorer.

That's it.**

# actionscript-3 - Flex：无法在数组集合中获取值

> ID：10845367
> 
> 赞同：0
> 
> 时间：2012-06-01T06:20:58.200
> 
> 标签：actionscript-3, apache-flex

我有一个包含一些数据的数组集合对象'invArrayCol'。我也有一个数据网格。我已将 dataProvider 设置为 invArrayCol。当我将数据与数据网格一起使用时，我会正确显示数据。但是，在数据网格以外的任何地方使用时，相同的 invArrayCol 显示为 null。我写了这段代码

```
protected function titlewindow1_creationCompleteHandler(event:FlexEvent):void
{
    Cgt=new CgtSRObject();

    var autoobj:CSAutoNumberType=new CSAutoNumberType();
    autoobj.addEventListener(ResultEvent.RESULT,getInvNubmer);
    autoobj.getInvNo(invoiceType);

    trace(robj.salesPerson_Id);     

    getSalesReturnCgt.token=csInvoicePrint.getCgtData(robj.receive_Id);
    getSalesReturnCgt.addEventListener(ResultEvent.RESULT,getInvArrList);
    trace(Cgt.sr_no);

    datagrid_dataprovider=new ArrayCollection();
    datagrid_dataprovider=invArrayCol;
    calculateTotal();
} 
```

这 2 行将数据设置为 invArrayCol

```
getSalesReturnCgt.token=csInvoicePrint.getCgtData(robj.receive_Id);
getSalesReturnCgt.addEventListener(ResultEvent.RESULT,getInvArrList); 
```

但在这里它给出了 invArrayCol 的值为 null。

```
datagrid_dataprovider=new ArrayCollection();
datagrid_dataprovider=invArrayCol; 
```

请告诉我一些解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:52:18.170

ResultEvent 的结果可能会返回一个 ObjectProxy，以防数据长度为 1。通过“as”进行强制转换会导致强制强制转换失败。因此，只需检查结果的类型，您就可以确定是否可以直接使用结果，或者是否必须将 ArrayCollection 包裹起来。

```
// This happens asynchronously, should have no effect in the function
getSalesReturnCgt.addEventListener(ResultEvent.RESULT,getInvArrList); 
```

此外，该

```
// datagrid_dataprovider=new ArrayCollection(); // This line is obsoloete
datagrid_dataprovider=invArrayCol; // invArrayCol will get its value later 
```

因此，看起来您希望某些代码能够同步执行，但它始终是异步工作的。

# javascript - django 视图无法使用 request.FILES 从 ajax 表单提交获取文件

> ID：10845368
> 
> 赞同：0
> 
> 时间：2012-06-01T06:21:02.460
> 
> 标签：javascript, ajax, django, file-upload

我尝试使用 ajax 提交此表单，以便 django 视图可以从 request.FILES 中提取所选文件并写入服务器上的目录

```
<form enctype="multipart/form-data" method="post" id="fileupoadform">{% csrf_token %}
<p>
<label>Select a file
<input type="file" name="fselect" id="fselect"> </input>
</label>
</p>
<input type="submit" value="upload">
</form> 
```

观点是

```
def ajax_upload(request):
    print 'ajax_upload()'
    print 'request=',request
    to_return = {}
    store_message="failure"
    if (request.is_ajax()) and (request.method == 'POST'):
        print 'is ajax and post'
        print 'request.FILES=',request.FILES
        if request.FILES.has_key('fselect'):
            print "request has key='fselect'"
            file = request.FILES['fselect']
            with open(settings.UPLOADPATH'%s' % file.name, 'wb+') as dest:
                for chunk in file.chunks():
                    dest.write(chunk)
            store_message="success"
    to_return['store_message']= store_message
    print 'to_return=',to_return
    to_return['store_message']= store_message
    serialized = simplejson.dumps(to_return)
    print 'serialized=',serialized
    if store_message == "success":
        print 'suceessfully returning'
        return HttpResponse(serialized, mimetype="application/json")
    else:
        print 'failed!! returning'
        return HttpResponseServerError(serialized, mimetype="application/json") 
```

我使用 jquery 使 ajax 提交

```
$(document).ready(function(){
    $('#fileupoadform').submit(function(e){
        submitUploadForm(e);            
    });
});
function submitUploadForm(e){
    console.log('clicked submit');
    e.preventDefault(); 
    var file = $('#fselect').get(0).files[0];
    console.log('filename='+file.name)  
    var data = { name:file.name };
    var args = { type:"POST", url:"upload/", data:data, complete:doneAjaxUpload };  
    $.ajax(args);   
} 
```

当我尝试这个时，我得到了这个控制台输出

```
ajax_store_uploaded_file()
request= <WSGIRequest
GET:<QueryDict: {}>,
POST:<QueryDict: {u'name': [u'myfile.srt']}>,
COOKIES:{'csrftoken': 'ca367878345fa9e59adf79hg047a1dvb'},
...
is ajax and post
request.FILES= <MultiValueDict: {}>
to_return= {'store_message': 'failure'}
serialized= {"store_message": "failure"}
failed!! returning
[01/Jun/2012 11:27:26] "POST /myapp/upload/ HTTP/1.1" 500 28 
```

我感觉到我在 django 视图中做错了什么。是我无法从 .In 获取上传的文件吗？我`request.FILES`能够`non ajax version`使用`django view`request.FILES 从 request.FILES 获取文件`request.FILES['fselect']`

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:25:51.977

我认为您不能（轻松地）进行 ajax 文件上传。

当然，看起来您实际上并没有将文件传递给您的帖子数据，您只是传递了文件名 -

```
var data = { name:file.name }; 
```

查看此问题以获取插件/信息以帮助执行此操作-[如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)

# php - preg_replace 文本中的链接，但有一些例外

> ID：10845369
> 
> 赞同：1
> 
> 时间：2012-06-01T06:21:08.120
> 
> 标签：php, regex, hyperlink, href

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-20T09:21:02.803

```
$string = preg_replace("/<a(.*?)>/", "<a$1 target=\"_blank\">", $string); 
```

这将添加一个额外的`target=\"_blank\"`incase 它已经设置。

```
$string = preg_replace("/<a (href=".*?").*?>/", "<a $1 target="_blank">", $string); 
```

这将确保`target="_blank"`在 URL 中只添加一个

例如：- [http://www.phpliveregex.com/p/6qG](http://www.phpliveregex.com/p/6qG)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T06:50:38.740

这将添加目标：

```
$string = preg_replace("/<a(.*?)>/", "<a$1 target=\"_blank\">", $string); 
```

这是一种检测 URL 并将它们变成链接的粗略方法（这很脆弱）：

```
$string = preg_replace("/(http[^\ ]+)/", "<a href=\"$1\" target=\"_blank\">$1</a>", $string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T06:45:14.627

First, I would use some XML/HTML processing library, to get text between tags, then using simple regex:

[PHP validation/regex for URL](https://stackoverflow.com/questions/206059/php-validation-regex-for-url)

make all URLs as links.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T10:11:09.570

```
$result = preg_replace(
  "/(?<![\>https?:\/\/|href=\"'])(?<http>(https?:[\/][\/]|www\.)([a-z]|[A-Z]|[0-9]|[\/.&?= ]|[~])*)/",
  "<a href=\"$1\">$1</a>",
  $string
); 
```

# iphone - Tabbar 应用程序中的 PopViewController

> ID：10845371
> 
> 赞同：1
> 
> 时间：2012-06-01T06:21:30.843
> 
> 标签：iphone, ios, uitabbarcontroller, uinavigationcontroller

我正在开发一个标签栏应用程序。

```
 TAB-BAR CONTROLLER
                                   |
          _______________________________________________________
         |                |                 |                  |

       View 1           View 2            View 3            View 4
        |                 |
     SearchingON       Detail View 
```

问题 1：我有一个按钮（比如说退出），单击视图 4 上的按钮时，我想弹出视图 2 的详细信息视图。

这样在新登录后新用户不应该访问详细信息。

我努力了 ：

```
 if ([[NSUserDefaults standardUserDefaults] valueForKey:@"IsChattingON"])
 {
    ChatDetail *chat = [[ChatDetail alloc] initWithNibName:@"ChatDetail" bundle:nil];

    [chat BackButtonClicked:nil];
 } 
```

在详细视图返回按钮中，我的代码是：

```
-(IBAction)BackButtonClicked:(id)sender
{

 [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"IsChattingON"];

 [self.navigationController popViewControllerAnimated:YES];
} 
```

无论详细视图是否打开，此处的用户默认值都具有布尔值。

问题 2：我在 View 1 的 Table View 上应用 Search，如果单击 View 4 SignOut 按钮，我想删除 Search。如果单击视图 4 的注销按钮，我想刷新我的视图 1。

为了删除搜索，我已经完成了这段代码，但没有得到想要的结果。

```
 PeopleController *People = [[PeopleController alloc] initWithNibName:@"PeopleController" bundle:nil];

 People.isSearchingRecords = NO; 
```

到目前为止，我已经搜索了有关 popViewControllers 的信息，但找不到这个场景。请让我知道如何实现此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:41:32.973

我假设您在 appDelegate 中保留导航控制器的实例，然后您可以尝试以下操作：

```
NSArray *viewNavStack = appDelegate.viewNavController.viewControllers;
    if ([viewNavStack count] > 1) {
        [appDelegate.overviewNavController popToRootViewControllerAnimated:NO];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:29:47.537

当用户点击注销时，您不应该分配新的视图控制器，而是应该执行以下操作

```
- (void) logOut
{
   //get the view 2
   //you should have a way to access view 2

   [view2 closeChatView];
}

//On view 2 maintain a reference of chat detail controller
- (void) closeChatView
{
   [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"IsChattingON"];

   //chat is the reference to the chat details controller
   [chat.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T10:45:23.407

最后我得到了问题2的解决方案：

我将 NSUserDefault BOOL 设置为 NO，并且在 ViewWillAppear 中，无论搜索是否打开，我都会获得 UserDefaults 值。

点击退出按钮：

```
 [[NSUserDefaults standardUserDefaults]setBool:NO forKey:@"SearchingON"]; 
```

在视图 1 上：

```
 isSearchingRecords = [[NSUserDefaults standardUserDefaults] boolForKey: @"SearchingON"];

    if (isSearchingRecords)
    {
        self.btnSearchCancel.hidden = NO;
    }else
    {
        self.btnSearchCancel.hidden = YES;
    } 
```

但是找不到问题 1 的解决方案 - 通过另一个选项卡弹出视图，如果有人有任何想法，请告诉我！

# bash - 运行 xterm -e 而不终止

> ID：10845372
> 
> 赞同：21
> 
> 时间：2012-06-01T06:21:33.140
> 
> 标签：bash, execute, terminate, xterm

我想在不终止的情况下运行 xterm -e file.sh。

在文件中，我正在向后台发送命令，脚本完成后，它们仍未完成。

我目前正在做的是：

```
(cd /myfolder; /xterm -ls -geometry 115x65 -sb -sl 1000) 
```

然后在弹出窗口后

```
sh file.sh
exit 
```

我想做的是：

```
(cd /myfolder; /xterm -ls -geometry 115x65 -sb -sl 1000 -e sh file.sh) 
```

无需终止并等待后台命令完成。

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-09T06:52:58.203

使用`hold`选项：

```
xterm -hold -e file.sh 
```

> -hold 打开hold 资源，即当shell 命令完成时，xterm 不会立即销毁它的窗口。它将等到您使用窗口管理器销毁/杀死窗口，或者如果您使用发送信号的菜单项，例如 HUP 或 KILL。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-05-05T22:56:45.913

我尝试了 -hold，它使 xterm 处于无响应状态，需要通过非标准方式（窗口管理器、kill 命令）关闭。如果您希望有一个可以退出的打开的 shell，请尝试将该 shell 添加到命令的末尾：

```
xterm -e "cd /etc; bash" 
```

我在[Super User](https://superuser.com/questions/363614/leave-xterm-open-after-task-is-complete)上找到了答案。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-01T06:47:26.857

使用`wait`内置的 shell 脚本。它将等到所有后台作业完成。

工作示例：

```
#!/bin/bash
# Script to show usage of wait
sleep 20 &
sleep 20 &
sleep 20 &
sleep 20 &
sleep 20 &
wait 
```

输出

```
sgulati@maverick:~$ bash test.sh
[1]   Done                    sleep 20
[2]   Done                    sleep 20
[3]   Done                    sleep 20
[4]-  Done                    sleep 20
[5]+  Done                    sleep 20
sgulati@maverick:~$ 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-07T22:46:27.427

基于先前的答案，如果您指定 $SHELL 而不是 bash，它将使用用户首选的 shell。

```
xterm -e "cd /etc; $SHELL" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-06T23:37:05.463

关于创建单独的外壳，您可能希望在后台运行它，以便您可以继续在当前外壳中执行更多命令 - 独立于单独的外壳。在这种情况下，只需添加`&`运算符：

```
xterm -e "cd /etc; bash" &
PID=$!

<"do stuff while xterm is still running">

wait $PID 
```

最后的`wait`命令将阻止您的主 shell 退出，直到 xterm shell 退出。如果没有`wait`，即使在主 shell 退出后，您的 xterm shell 仍将继续运行。

# python - 非常轻量级的网站框架推荐

> ID：10845378
> 
> 赞同：2
> 
> 时间：2012-06-01T06:22:10.960
> 
> 标签：python, mercurial, sinatra, nancy

我想更新/重写一个小（10 页）的简单网站；8 个页面完全是静态的，可以用 html 编写，1 个页面有联系表，另一个必须显示可过滤的俱乐部列表。目前该站点是用经典的 asp 编写的，并使用 Dreamweaver 模板来实现一致的页面。

我的要求是

1.  一个“母版页”/模板系统，所以所有共享页面元素都只写在一个地方。
2.  轻量级/低开销框架
3.  学习一门新语言

我可以使用 ASP.NET Webforms 或 ASP.NET MVC 来获取母版页，但它们都带来了这样一个小站点不需要的开销，而且在我的 Godaddy 托管上，从冷启动一个站点明显比纯html页面。

俱乐部页面将显示可按位置过滤的俱乐部列表，但我不想使用数据库来存储此列表 - 另一个网站有俱乐部的官方列表，但系统无法提供此列表作为服务或其他消耗性资源，因此我需要定期抓取详细信息并在本地缓存它们或使用 iframe 或其他东西

我想也许 Python 或 django 可能是不错的候选人，但知道的不够多。我现在认为我正在寻找的是一个“微型网络框架”。我快速浏览了一下用 python 编写的[Mercurial Web Server](http://www.the-wombat-speaks.co.uk/blog/post/2011/03/31/setting-mercurial-18-server-iis7-windows-server-2008-r2.aspx)，它看起来很简单，但是我无法访问 Go Daddy 上的托管 Web 服务器，所以无法安装 python...

**编辑**
我需要它在我当前与 GoDaddy 的共享主机上运行（IIS7）

**Edit2**
俱乐部列表由总部官方网站维护，他们偶尔会添加/删除俱乐部。我只需要让我的清单与他们的清单保持同步。我每隔几个月就会检查一次（如果我记得的话）并更新一个 MS SQL 数据库，但这远远超出了顶部。我正在考虑将详细信息提取为 json 格式并将其保存在文本文件中（每月一次，或其他内容），然后我可以将其用作带有 jQ​​uery 过滤的表的基础。俱乐部详情只是文字；俱乐部名称、主要联系人、电话号码、地址和电子邮件地址。

我还希望发布变得简单，将代码提交给 Mercurial（或 git）并让其运行网站。我知道 bitbucket（和 github）都提供静态页面站点（我不确定如何获得联系我们表格以在该环境中工作 - 但这是我想要的部署模型）

我要更新的网站是[Seika Dojo](http://www.seikadojo.co.uk/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T06:31:27.937

无需运行怪物来服务 10 个几乎静态的页面。如果您打算从 Web 中提取和缓存一些数据，这是一种更新静态 HTML 的方法。

正如另一位作者提到的那样，HTML5 可以帮助您。看看 jQuery 的[表格过滤](http://www.picnet.com.au/resources/tablefilter/demo.htm)。至于使用通用元素重新生成页面，请考虑[jekyll](http://jekyllrb.com/) / [hyde](http://ringce.com/hyde)或[org-mode](http://orgmode.org/)（使用带有 emacs 的批处理模式）。您有很多语言可供选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T14:45:12.150

好吧，我不了解其他框架，但我在 NancyFx 中构建一个小型站点有很好的经验。

1.  NancyFx 支持多个视图引擎。您可以使用 SuperSimpleViewEngine；[masterpages 开箱即用](https://github.com/NancyFx/Nancy/wiki/View-engines)。
2.  [Nancy 入门非常简单](https://github.com/NancyFx/Nancy/wiki/Introduction)。
3.  我想你已经知道 .NET/C#，但是 Nancy 充分利用了新的动态特性，这些特性很有趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T07:12:12.423

Python 是我最喜欢的语言，但我不会用它来创建一个简单的网站。我建议您使用现成的 CMS 解决方案，例如 Wordpress。

*   你会学到一些新东西。
*   您不必实现任何功能（CMS + 插件将提供您所需要的一切）。
*   您将获得所需的所有支持。
*   它很容易部署在任何主机上（因为它是基于 PHP 的-是的，对不起，php-）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T07:24:23.470

仙人掌：

[https://github.com/koenbok/Cactus](https://github.com/koenbok/Cactus)

是我目前最喜欢的静态站点生成器 - 它使用 Django 模板从一组模板（在“pages”目录中）创建一组页面（在“build”目录中）以及“静态”中的所有常用图像和 css ' 目录。

在客户端上用 Javascript 做你的可过滤表——听起来不太复杂。这个可爱的表格网格组件：

[http://datatables.net/](http://datatables.net/)

可能只是门票。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-03T07:31:58.880

[鹈鹕](http://blog.getpelican.com/)没有被提及。它生成静态页面并在 Python 中完成。它符合所有规定的标准。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T06:25:47.223

请参阅[http://wiki.python.org/moin/WebFrameworks](http://wiki.python.org/moin/WebFrameworks)并尝试一些让您喜欢的选择。根据您的描述，我倾向于使用更轻的框架。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-01T06:42:15.183

也许看看[cherrypy](http://www.cherrypy.org/)或[webpy](http://webpy.org/)？它们是非常简约的 Python Web 框架，专为此类事情而设计。（我认为 django 对于这么小的应用程序来说太大了，恕我直言）

另外，如果您想学习一些 ruby ​​，请查看[Sinatra 。](http://www.sinatrarb.com/)

[Express](http://expressjs.com/)适合一些 JavaScript 体验。

对于单页应用程序，[backbone.js](http://backbonejs.org/)很流行并且非常强大，但可能不是您想要的。

但最重要的是，玩得开心学习一门新语言！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-01T06:53:32.560

虽然不完全是主题，但由于您不需要完全静态的网站，[StaticMatic](http://staticmatic.rubyforge.org/) 作为静态内容生成的最佳轻量级工具之一可能会引起人们的兴趣。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-01T06:57:42.460

Flask 和 web.py 都是不错的选择。我不认为 Django 真的适合这么小的项目，但你绝对可以使用它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-10T07:50:01.133

我一直在环顾四周，只需使用[xml 包含](https://stackoverflow.com/a/4703613/96505)或[嵌入式 JavaScript](http://embeddedjs.com/)来拉入页眉/页脚/菜单部分，就可以实现模板系统的目标。所有的“工作”都在客户端浏览器上完成，因此 Web 服务器只需要提供尽可能轻量级的静态文件。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-06-10T08:13:58.537

根据我的经验，任何 8 页静态网站总有一天都需要动态功能，因此从可扩展的东西开始总是一个好主意。

然后第一个决定是使用框架或 CMS。这取决于您对网站未来变得更大的期望，您开发自定义代码以实现动态功能的能力以及手头项目的结构和要求。

当我们需要我们使用的 CMS 时，

[Orchard](http://www.orchardproject.net/) if ASP .NET MVC 3：看看我们的网站[www.dreamrain.com](http://www.dreamrain.com)，它看起来像一个静态网站，但实际上使用 Orchard 主题和模块来实现动态功能。如果您不需要主题和模块，您仍然可以创建一个 8 页的网站，然后您可以在将来扩展它。顺便说一句，我们用 4 小时的开发工作在 5 天内建立了这个网站

注意：Orchard 可能需要完全信任，因此请查看其文档并询问 GoDaddy 是否允许。

[WordPress](http://wordpress.org/)如果是 PHP，

当我们需要一个我们使用的框架时，

ASP .NET MVC 3 for .NET、 [Django](https://www.djangoproject.com/)或[Pyramid](http://pyramid.readthedocs.org) for Python、 [Zend](http://framework.zend.com/) for PHP、 [Grails](http://grails.org/) for Groovy/Java/J2EE、 [Play](http://www.playframework.org/) for SCALA

# java - 如何解决eclipse中通过maven导入的java项目中的依赖关系？

> ID：10845382
> 
> 赞同：3
> 
> 时间：2012-06-01T06:22:54.013
> 
> 标签：java, eclipse, maven, pom.xml

我通过maven在eclipse中导入了多个项目。在eclipse中导入项目后，我看到项目资源管理器中的项目文件夹有一些错误。所有这些错误都在 pom.xml 上。

当我打开 pom.xml 时，错误是这样的：

```
Project build error: Non-resolvable parent POM: Failure to find org.openhie.openempi:openempi:pom:2.2.5 in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced and 'parent.relativePath' points at wrong local POM 
```

如何解决eclipse中的这个错误？我通过添加错误消息中指定的缺失 JAR 尝试了很多，但仍然在 pom.xml 上突出显示错误。

请为此建议我。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T06:31:12.973

通过 eclipse 市场安装[http://www.eclipse.org/m2e/ 。](http://www.eclipse.org/m2e/)该插件添加了一个

classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER"

eclipse 的 .classpath 文件中的条目和来自 maven 依赖项的每个 jar 都将在您的类路径中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T06:25:29.563

你有一个 Maven 插件可以做到这一点。您必须使用 Maven 项目根目录下的命令行并键入

```
mvn eclipse:eclipse 
```

它将创建（或更新）一个 eclipse 项目，该项目依赖于`jar`位于本地 maven 存储库中的项目，以及同一存储库中的 eclipse 项目工件（.project、.classpath 和其他东西）。

然后使用“导入现有项目”向导在 Eclipse 中导入您的项目。

[http://maven.apache.org/guides/mini/guide-ide-eclipse.html](http://maven.apache.org/guides/mini/guide-ide-eclipse.html)了解更多信息

# sql-server - SQL 错误：“无法在用户实例中使用全文搜索。”

> ID：10845385
> 
> 赞同：9
> 
> 时间：2012-06-01T06:23:13.430
> 
> 标签：sql-server, sql-server-2008

作为构建过程的一部分，我正在使用 SSEUtil 从我的开发数据库 (SQL Server 2008 R2) 派生的模式中自动创建功能测试数据库。这允许我保持两个数据库同步（模式方式），而无需针对我的开发数据库运行 SQL 存储库测试。

我最近在我的开发模式中首次为该项目的表添加了全文索引，现在当我尝试将模式应用于新创建的单元测试数据库时，当它执行 SQL 以创建全文目录：

```
CREATE FULLTEXT CATALOG [FullTextCatalog] AUTHORIZATION [dbo]
GO 
```

> 无法在用户实例中使用全文搜索。
> [SqlException 编号 9982，第 16 类，状态 100，第 1 行]

我搜索了高低。我找到的唯一帮助是在另一个网站上有人建议“附加到父数据库”。我不知道那是什么意思。而且我不知道这个错误是什么意思。什么是“用户实例”？

任何人都可以提出解决这个问题的方法吗？有没有更好的方法让两个数据库模式保持同步以进行持续集成？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-01T06:29:05.477

任何一个

用户必须对数据库具有 CREATE FULLTEXT CATALOG 权限，或者是 db_owner 或 db_ddladmin 固定数据库角色的成员。

或者

如果没有安装 SQL 实例，您将无法使用全文目录。确保 SQL Server 实例运行全文服务。

这里有两种测试这个功能是否安装的方法。此功能适用于 SQL Server 2005 和 2008 的所有版本（包括 SQL Express）

1.  检查此条目的服务小程序（运行 -> 键入“services.msc”）：SQL Server FullText Search 或 SQL Server FullText Search (SQLEXPRESS)（在 SQL Express 的情况下）。启动这个不运行的服务

2.  在查询分析器中运行查询“select fulltextserviceproperty('isfulltextinstalled')”。如果结果为“1”，则安装，否则不安装。

在此功能不可用的情况下，您需要通过从[http://www.microsoft.com/express/sql/download/default.aspx下载“SQLEXPR_ADV.EXE”进行安装](http://www.microsoft.com/express/sql/download/default.aspx)

[参考取自这里](http://blog.sqlauthority.com/2008/09/05/sql-server-creating-full-text-catalog-and-index/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-13T13:37:04.033

这并不是问题的真正答案，但是在更新实体框架代码优先数据库（命令`update-database`）时，我遇到了与 Visual Studio 包管理器类似的问题。

问题是我选择了错误的启动项目，因此 Visual Studio 根本没有使用我的连接字符串。它正在连接到 localdb 实例，因此出现神秘的错误消息“无法在用户实例中使用全文搜索”。一旦我让它连接到实际的数据库，它就会按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-16T13:02:23.633

我也遇到了这个用户实例问题。我不得不承认我对SSMS只有基本的了解。显然我以`public`用户身份登录。我怎样才能成为会员`db_owner`？我尝试在不使用 GUI 的情况下生成所有内容并编写脚本。

例如，如果我执行这个

```
ALTER AUTHORIZATION ON DATABASE::[dbname] TO sa;

EXEC sp_changedbowner 'sa'; 
```

我仍然收到**`Cannot use full-text search in user instance`**错误

```
USE [dbname]
    CREATE FULLTEXT CATALOG [ftc_dbname] AS DEFAULT
GO 
```

# jquery - 如何通过传递参数和覆盖我自己的回调来自定义 jquery 小部件？

> ID：10845390
> 
> 赞同：5
> 
> 时间：2012-06-01T06:24:11.247
> 
> 标签：jquery, jquery-ui, callback, jquery-callback, jquery-widgets

我对 jquery 很陌生，最近根据我的需要定制了[jquery 组合框。](http://jqueryui.com/demos/autocomplete/#combobox)但是，我需要在我网站的其他地方重用这个组件。我基本上需要传入一些参数和一个回调函数，应该调用它们来处理 jquery 中的某些事件。我在语法上苦苦挣扎，并试图找到 jquery 的做事方式：

为了给你一个样本，这里`source`是`combobox -> input -> autocomplete -> source`：

（创建了一个工作[**jsfiddle**](http://jsfiddle.net/SRekL/)以供参考）

```
source: function( request, response ) {
    // implements retrieving and filtering data from the select
    var term = request.term;
    var prefixLength = 2;
    if (term.length >= prefixLength) {
        var abbreviation = term.substring(0, prefixLength);

        if(!(abbreviation.toLowerCase() in cache)){
            cache[abbreviation.toLowerCase()] = 1;

            $.ajax({
                url: "/wah/destinationsJson.action",
                dataType: "json",
                data: {
                    term: abbreviation
                },
                type: "GET",
                success: function(data) {
                    if(!data || !data.cities || !data.cities.length){
                        // response(["No matches for " + term]);
                        return;
                    } 
                    updateOptions(select, data.cities);
                    response(filterOptionsForResponse(select, term));
                    return;
                }
            });
        }
    }

    response(filterOptionsForResponse(select, term));
} 
```

在这里`updateOptions(...)`，`filterOptionsForResponse(select, term)`是简单的 javascript 函数。

为了重用，我需要为`source`我创建的每个组合框实例指定一个回调来处理。

**有人可以指出我如何做到这一点的正确方向吗？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T06:48:04.600

唯一有用的小部件工厂文档在 wiki[中，上面写着](http://wiki.jqueryui.com/w/page/12138135/Widget-factory)：

> **属性：**
> [...]
> **this.options**
> 当前用于插件配置的选项。在实例化时，用户提供的任何选项都将自动与任何默认值合并

因此，如果您需要为 提供回调函数`source`，那么您会这样说：

```
$("#searchbox").combobox({
    source: function(request, response) { /* ... */ }
}); 
```

然后在你的插件里面，看看`this.options.source`：

```
$.widget("ui.combobox", {
    options: {
        // Default options go here...
    },
    _create: function() {
        //...
        input = $("<input>").appendTo(wrapper).val(value).addClass("ui-state-default").autocomplete({
            source: this.options.source,
            //... 
```

您不必包含默认选项，但这样做几乎总是有意义的（即使您只是将其用于文档目的）。

# python - 规范化 numpy 数组中的子数组长度以对其进行数学运算

> ID：10845395
> 
> 赞同：1
> 
> 时间：2012-06-01T06:24:25.660
> 
> 标签：python, multidimensional-array, numpy, max

今晚为此苦苦挣扎了一段时间。

我有`numpy`具有不同长度的数据子数组的数组。

```
segements_np = 
[ [   30\.    20\.    20\.    30\.    40\.    50\.    50\.    60\.    50\.    70.
      70\.    60\.    70\.    60\.    80\.    80\.    90\.    90\.    90\.   100.
     100\.   110\.   120\.   560\.   510\.   460\.   430\.   380\.    380   370
     360\.   320\.   320\.   300\.   250\.    80\.    80\.    80\.    60\.    70.
      80\.    80\.    70\.    70\.    60\.    70\.    60\.    70\.    70\.    70.
      70\.    70\.    60\.    60\.    60\.    70\.    50\.    50\.    50\.    40.
      40\.    40\.    40\.    30\.    40\.    40\.    40\.    40\.    40.]

  [   30\.    40\.    50\.    50\.    60\.    50\.    70\.    70\.    60\.    70\.    
     560\.   510\.   460\.   430\.   380\.   360\.   320\.   320\.   300\.   250.
      40\.    40\.    40\.    30\.    40\.    40\.    40\.    40\.    40.]] 
```

我不知道加载数据文件时每个段的大小，也不知道我将拥有多少段。我有将数据文件分成这些段的脚本。

我想对它们进行各种计算，因此是`numpy`数组。例如，我想`segments_np.max()`

但是，由于它们的大小不同，这些命令当然不会按原样工作。

我尝试将数组大小（零）初始化为我知道不会被我分段的数据填充的大小，然后尝试将实际数据值添加到该大小（初始化数组）中。从而标准化每个子数组的大小。但是，我无法正确初始化它，也无法将数据复制到初始化数组中。

我也试过：

```
peaks_np = array([ segments_np.max(i) for i in range( len(segments_np) ) ]) 
```

这些会起作用吗？我做错了什么还是有更好的方法来做到这一点？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:57:15.683

尝试将段存储为 numpy 数组的 Python 列表。然后你可以去

```
peaks_np = array([s.max() for s in segments]) 
```

# javascript - Firefox 10.0.1 不播放 html mp4 视频

> ID：10845396
> 
> 赞同：0
> 
> 时间：2012-06-01T06:24:27.713
> 
> 标签：javascript, flash, html

**我有以下代码用于在网页中播放视频：**

```
<video width="420" height="345" controls="controls" autoplay="autoplay">
        <source src="/common/videos/EPyl1LgNtoQ.ogg" type="video/ogg" />
        <source src="/common/videos/EPyl1LgNtoQ.mp4" type="video/mp4" />
          <source src="/common/videos/EPyl1LgNtoQ.webm" type="video/webm" />

        <object width="320" height="240" src="/common/videos/EPyl1LgNtoQ.mp4">
            <embed width="320" height="240" src="/common/videos/EPyl1LgNtoQ.swf">
            Your browser does not support video
            </embed>
        </object>            
    </video> 
```

**该文件为 .mp4 格式，我有 firefox 10.0.1 版本和 chrome 17.0 版本。**

**该视频在 chrome 上播放，但不在 Firefox 上。**

**它显示播放器但不播放视频。**

**我想在 Firefox 上播放它，所以它将如何播放。我正在阅读很多教程，但没有找到任何解决方案。**

**提前致谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:24:31.180

修改您的 apache .htaccess 文件，如：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L]
AddType application/x-shockwave-flash swf
AddType video/x-m4v .m4v
AddType video/mp4 .mp4
AddType video/webm .webm
AddType audio/ogg .oga 
```

试试这个，我希望我会为你工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:43:30.827

看看[videoJS.com](http://videojs.com/) - 它是一个基于 HTML5 视频技术的开源抽象层（带有用于旧版浏览器的 Flash Player 后备）。

# java - 来自java服务器的APN推送通知？

> ID：10845397
> 
> 赞同：0
> 
> 时间：2012-06-01T06:24:28.057
> 
> 标签：java, push-notification, apple-push-notifications

我正在使用 p12 文件使用 java 代码连接到 APN 服务器，但出现错误：javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure

代码：

```
private String token="c585ca35 21468c52 e7285b15 5441fcd3 77b50594 c05000c1 165aa025a87a1660";
private String host = "gateway.sandbox.push.apple.com";
private int port = 2195;
private String payload = "{\"aps\":{\"alert\":\"Message from Java o_O\"}}";
  try {
    KeyStore keyStore = KeyStore.getInstance("PKCS12");

    keyStore.load(getClass().getResourceAsStream("E://workspace//Product//javatest//lib//Certificates_key.p12"), "ducont".toCharArray());
  //  keyStore.load(getClass().getResourceAsStream("Certificates_key.p12"), "ducont".toCharArray());
    KeyManagerFactory keyMgrFactory = KeyManagerFactory.getInstance("SunX509");
    keyMgrFactory.init(keyStore, "ducont".toCharArray());

    SSLContext sslContext = SSLContext.getInstance("TLS");
    sslContext.init(keyMgrFactory.getKeyManagers(), null, null);
    SSLSocketFactory sslSocketFactory = sslContext.getSocketFactory();

    SSLSocket sslSocket = (SSLSocket) sslSocketFactory.createSocket(host, port);
    String[] cipherSuites = sslSocket.getSupportedCipherSuites();
    sslSocket.setEnabledCipherSuites(cipherSuites);
    sslSocket.startHandshake();

    char[] t = token.toCharArray();
    byte[] b = Hex.decodeHex(t);

    OutputStream outputstream = sslSocket.getOutputStream();

    outputstream.write(0);
    outputstream.write(0);
    outputstream.write(32);
    outputstream.write(b);
    outputstream.write(0);
    outputstream.write(payload.length());
    outputstream.write(payload.getBytes());

    outputstream.flush();
    outputstream.close();

} catch (Exception exception) {
    exception.printStackTrace();
} 
```

# android - 在这种情况下，究竟什么是内存泄漏？

> ID：10845400
> 
> 赞同：2
> 
> 时间：2012-06-01T06:25:26.540
> 
> 标签：android, memory-leaks

要清除所有后台活动，我执行了以下操作：

我保留了一个静态数组列表，每当我从一个活动转到另一个活动时，在新活动的 onCreate() 方法中，我将当前活动的对象添加到该列表中，如下所示：

```
SomeClass.addActivity(CurrentActivity.this); 
```

我在每个活动中添加了上述语句。

添加活动（）：

```
public void addActivity(final Activity activity) {
            activityList.add(activity);
        } 
```

当我想清除堆栈时，我调用了：

```
public boolean clearStack() {
        for (Activity activity : activityList) {
            activity.finish();
        }
        activityList.clear();
        return (activityList.isEmpty());
    } 
```

这样，我清除了我的活动堆栈。

但它产生了内存泄漏。这不是正确的做法。持有对活动的引用是不行的。你们能解释一下在这种情况下为什么以及如何发生内存泄漏吗？

我使用 MAT for eclipse 在我的应用程序中找到了这个内存泄漏。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:38:21.340

持有对其上下文之外的活动的引用（当它们在后台或“关闭”/完成时）会导致内存泄漏 - Android 操作系统希望在决定是时候从内存中清除“旧”活动（您无法手动控制）。

在那种情况下 - 垃圾收集器会尝试从内存中释放活动/活动，但是因为某些东西（你对活动的引用数组）持有对它的引用 - 它不能被垃圾收集，所以它不能释放它来自内存 - 这是内存泄漏的一个示例。

本文档描述了如何避免内存泄漏：

[http://android-developers.blogspot.co.uk/2009/01/avoiding-memory-leaks.html](http://android-developers.blogspot.co.uk/2009/01/avoiding-memory-leaks.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:45:29.627

尝试旋转设备几次，看看会发生什么——你最终会耗尽内存，因为你仍然持有对 GC 无法清除的先前上下文的引用。

# javascript - 计算中的轻微错误

> ID：10845403
> 
> 赞同：2
> 
> 时间：2012-06-01T06:25:38.223
> 
> 标签：javascript, math

我正在尝试构建一个有点像命运之轮的游戏，实际上它已经完成了，但似乎有一个我无法弄清楚的奇怪问题。

这是轮子本身，您可以看到这些值是均匀分布的，每个值都有一个 15° 的切片。

![在此处输入图像描述](../Images/cebaa14c87156f64c718336ca9335b59.png)

要旋转轮子，我会生成一个随机数，它是以度为单位的旋转量，我为轮子设置动画，一切都很好，但是当旋转停止时，我必须从轮子中获取值，该轮子停止在顶部中心位置，所以我虽然这会解决它：

```
wheelValues = [
    1000, 3250, 1800, 1000, 1200, 3750, 5000, 1000, 3000, 1600, 1000, 3500,
    1000, 2000, 1000, 2750, 1000, 4000,   -1, 1000, 2500, 1400, 1000, 2250
];

if (toAngle > 360)
{
    toAngle = toAngle - (Math.floor(toAngle / 360) * 360);
}
arrIndex = Math.floor(toAngle / 15) + 1;
result = wheelValues[arrIndex]; 
```

我生成的随机自旋在哪里`toAngle`，可以在 370 到 1440 之间。

这种方法在 10 次中大约有 8/9 次有效，我实际上可以获得车轮停止的正确值，但我无法真正理解为什么有时该值关闭（有时真的关闭，甚至不接近正确值） .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T06:33:32.797

您出于某种原因将 1 添加到数组索引中。

数组索引从 0 开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T06:45:54.680

我可以看到两个问题；

首先，这一行：

```
 if (toAngle > 360) 
```

如果 toAngle == 360，我相信这会产生错误，因为您将跳过“模数”部分，toAngle 最终将是 24（大于您的数据集）

第二：

```
arrIndex = Math.floor(toAngle / 15) + 1; 
```

无需为此 +1，因为您永远不会获得第一个值，并且有时您会超出数组范围。

另外，至于为什么会得到奇数，您是否尝试过编写一些简单的代码来调试您的假设？编写一个循环，从 370 迭代到 1440（您声明的输入边界），然后查看每个值的计算结果。将其打印到文件或屏幕上，您可以快速扫描以查看问题可能出在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T07:01:36.383

顺便说一句，如果你首先让你的随机数成为 15 度的偶数倍数可能是最好的，那么你就不需要所有的舍入和地板，例如

```
function randDeg() {
  var epoch = 360; // minimum value
  var max = 1440;  // maximum value to return
  var step = 15;   // even multiple to return
  var t = Math.random() * (max - epoch) | 0;
  t -= t % 15;
  return  t + epoch;
} 
```

将返回一个数字 n，其中 epoch <= n <= max 且 n%15 = 0。

# iphone - 如何在 iPhone 的单个 UILabel 中创建粗体和普通字体文本？

> ID：10845408
> 
> 赞同：9
> 
> 时间：2012-06-01T06:26:00.160
> 
> 标签：iphone, ios, ios4, ios5

我想在 UILabel 中创建如下示例文本..

> **Muthu：**嗨，我正在去办公室的路上……
> 等几分钟……

这种类型的文本有 UITableviewCustom 单元格有 UILabel。

如何在 UILabel 中创建？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T07:24:20.087

使用以下代码并包含来自以下链接“https://github.com/AliSoftware/OHAttributedLabel”的 .h 和 .m 文件。

```
-(void)addTitleView{

    NSMutableAttributedString* attrStr = [NSMutableAttributedString attributedStringWithString:@"Muthu: Hi I am on the way to office..wait for the few mins..."];
    [attrStr setFont:[UIFont fontWithName:@"Verdana" size:16]];
    [attrStr setTextColor:[UIColor whiteColor]];
    [attrStr setFont:[UIFont fontWithName:@"Verdana-Bold" size:16] range:NSMakeRange(0,6)];

    OHAttributedLabel *titleLabel = [[OHAttributedLabel alloc] init];
    titleLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    [titleLabel setFrame:CGRectMake(0, 0, 200, 35)];
    [titleLabel setBackgroundColor:[UIColor clearColor]];
    titleLabel.adjustsFontSizeToFitWidth = YES;
    titleLabel.attributedText = attrStr;
    titleLabel.textAlignment = UITextAlignmentJustify;
    [self.view addSubview:titleLabel];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T06:37:04.597

使用支持属性字符串的 UILabel 是[TTTAtributedLabel](https://github.com/mattt/TTTAttributedLabel)或[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)

我使用 OHAttributedLabel。有关示例，请参阅[此](https://stackoverflow.com/questions/10789518/is-it-possible-to-to-have-more-than-one-color-in-the-same-uilabel)ansewr 并使用 setTextBold 进行粗体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T06:30:42.607

你必须使用[NSAttributedString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsattributedstring_Class/Reference/Reference.html)。有许多开源组件可以为您做到这一点。看看[这个](https://stackoverflow.com/questions/3786528/iphone-ipad-how-exactly-use-nsattributedstring)。

# asp.net-mvc - Nuget 包：在可用时使用不同的 MVC 版本

> ID：10845413
> 
> 赞同：3
> 
> 时间：2012-06-01T06:26:34.693
> 
> 标签：asp.net-mvc, nuget, nuget-package

我有一个开源 nuget 包[AttributeRouting](https://github.com/mccalltd/AttributeRouting)。目前打包的程序集引用 System.Web.Mvc 版本 2。我想在 MVC 3/4 项目中引用 MVC 3/4，以便 Windows 8/VS 2011 的用户不必安装 MVC 2 即可使用包裹。有人知道这样做的方法吗？谷歌不是我的朋友。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:23:46.610

目前，Nuget 无法做到这一点。这就是 Nuget 库中有单独的 MVC2 和 MVC3 库包的原因。

所以你必须为 MVC3 和 MVC4 创建一个单独的 Nuget 包（如果需要）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-29T10:26:23.087

您可以将所有受支持的 MVC 版本的程序集添加到 Nuget 包中，然后使用 install.ps1 脚本删除不必要的程序集，并仅保留与目标项目中使用的 MVC 版本兼容的程序集。

您将在此处找到更详细的说明和 install.ps1 脚本示例：http: [//blogs.korzh.com/2013/12/nuget-package-different-mvc-versions.html](http://blogs.korzh.com/2013/12/nuget-package-different-mvc-versions.html)

# objective-c - iOS 改变切换视图

> ID：10845415
> 
> 赞同：-1
> 
> 时间：2012-06-01T06:26:40.123
> 
> 标签：objective-c, ios, uiwebview

单击 view1.xib 中的音频按钮时

我想加载 view2.xib 文件（这不在 uiwebview 中）

我想在我的应用程序中就像[这个链接](http://fuelyourcoding.com/iphone-view-switching-tutorial/comment-page-1/#comment-8987)一样。

但是在此链接`rootviewcontroller`中，`uiview`但在我的应用程序中，根视图控制器在`UIWebView`如何更改视图`rootview`中`uiwebview`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:34:43.757

在用于导航到另一个视图的 uiwebview html 内容中，您确实有一个链接，例如

```
<a href="TEST://GOTOVIEW">Go To Second View</a> 
```

在包含 UIWebView 的 viewcontroller 中，将 webView 的 delegate 设置为 viewcontroller

```
- (void) viewDidLoad
{
   webView.delegate = self;
} 
```

在视图控制器中实现以下

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    if (navigationType == UIWebViewNavigationTypeLinkClicked) {

        NSString *urlAbsolute = [request.URL absoluteString];
        if ([urlAbsolute isEqualToString:@"TEST://GOTOVIEW"])
        {
            //Go to the second view by calling the switchPage function
            return NO;
        }
    }
    return YES;
} 
```

# ant - 如何使用 Ant 任务构建爆炸的罐子？

> ID：10845416
> 
> 赞同：1
> 
> 时间：2012-06-01T06:26:50.890
> 
> 标签：ant, jboss, jar, ear, exploded

请建议如何使用 Ant 任务构建爆炸的罐子？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:03:45.143

分解的 jar 只是一个与 jar 文件具有相同结构的目录。`copy`例如，只需使用将您想要的所有文件放在此目录中。

# ruby-on-rails - Active Admin Gem - Rails 3.2.3，Heroku 错误日志

> ID：10845417
> 
> 赞同：6
> 
> 时间：2012-06-01T06:26:55.940
> 
> 标签：ruby-on-rails, heroku, activeadmin

我在理解错误日志时遇到问题。我正在使用 Active Admin，在我的本地服务器上一切正常，但是当我推送到 Heroku 时，我无法登录或使用 Active admin。我对问题是什么感到有点困惑。我妻子的前端工作，但是当我第一次尝试登录时，我得到了这个错误。

我跑了

```
 heroku run rake db:migrate 
```

应用程序.rb

```
 config.assets.initialize_on_precompile = false 
```

路线.rb

```
 break if ARGV.join.include? 'assets:precompile' 
```

**Heroku 日志**

```
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/responder.rb:153:in `respond'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/responder.rb:146:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/mime_responds.rb:239:in `respond_with'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/devise-2.1.0/app/controllers/devise/sessions_controller.rb:9:in `new'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/base.rb:167:in `process_action'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/rendering.rb:10:in `process_action'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:436:in `_run__2148348972389484395__process_action__581573497384646045__callbacks'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/callbacks.rb:17:in `process_action'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/rescue.rb:29:in `process_action'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `block in instrument'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `instrument'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/rai
lties/controller_runtime.rb:18:in `process_action'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/base.rb:121:in `process'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/rendering.rb:45:in `process'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal.rb:203:in `dispatch'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal.rb:246:in `block in action'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:73:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:36:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/mapper.rb:40:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.3/lib/journey/router.rb:68:in `block in call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.3/lib/journey/router.rb:56:in `each'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.3/lib/journey/router.rb:56:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:600:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/sass-3.1.18/lib/sass/plugin/rack.rb:54:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:25:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/head.rb:14:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/flash.rb:242:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/cookies.rb:338:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/dragonfly-0.9.12/lib/dragonfly/cookie_monster.rb:9:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/query_cache.rb:64:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `_run__2527400173333692808__call__757062616006589650__callbacks'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/rack/logger.rb:26:in `call_app'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/rack/logger.rb:16:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/static.rb:62:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/dragonfly-0.9.12/lib/dragonfly/middleware.rb:13:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:479:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:220:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:14:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/rack/log_tailer.rb:14:in `call'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:80:in `block in pre_process'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:78:in `catch'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:78:in `pre_process'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:53:in `process'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:38:in `receive_data'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/backends/base.rb:61:in `start'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/server.rb:159:in `start'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/thin.rb:13:in `run'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:265:in `start'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands/server.rb:70:in `start'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:55:in `block in <top (required)>'
2012-06-01T06:11:53+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `<top (required)>'
2012-06-01T06:11:53+00:00 app[web.1]:   script/rails:6:in `require'
2012-06-01T06:11:53+00:00 app[web.1]:   script/rails:6:in `<main>'
2012-06-01T06:11:53+00:00 app[web.1]: 
2012-06-01T06:11:53+00:00 app[web.1]: 
2012-06-01T06:11:53+00:00 app[web.1]: Processing by ActiveAdmin::Devise::SessionsController#new as HTML
2012-06-01T06:11:53+00:00 app[web.1]:   Rendered vendor/bundle/ruby/1.9.1/bundler/gems/active_admin-3020d04d5c8f/app/views/active_admin/devise/shared/_links.erb (1.1ms)
2012-06-01T06:11:53+00:00 app[web.1]:   Rendered vendor/bundle/ruby/1.9.1/bundler/gems/active_admin-3020d04d5c8f/app/views/active_admin/devise/sessions/new.html.erb within layouts/active_admin_logged_out (292.9ms)
2012-06-01T06:11:53+00:00 app[web.1]: Completed 500 Internal Server Error in 456ms 
```

**配置/env/development.rb**

```
 # Do not compress assets
  config.assets.compress = false

  # Expands the lines which load the assets
  config.assets.debug = true 
```

**宝石文件**

```
source 'https://rubygems.org'
ruby '1.9.3'
gem 'rails', '3.2.3'
# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development do
        gem 'pg'
        #gem 'sqlite3'
end
# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'pg'
  gem 'thin'
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby
  gem 'uglifier', '>= 1.0.3'
  gem 'chosen-rails'
end

gem 'jquery-rails'
gem "activeadmin", :git => "git://github.com/gregbell/active_admin.git"
gem "zurb-foundation"
gem "friendly_id", "~> 4.0.1"
gem 'simple_form'
gem 'rack-cache', :require => 'rack/cache'
gem 'dragonfly', '~>0.9.12'
gem "fog"
gem 'rmagick'
gem 'tinymce-rails' 
```

**更新：**

我在我现在正在使用的 gemfile 上

```
ruby '1.9.3'
gem  'rails', '3.2.5' 
```

但错误日志有

```
vendor/bundle/ruby/1.9.1/gems/ 
```

heroku 不应该为我选择 Ruby 1.9.3 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T19:14:01.053

试试这两件事：

```
config/environments/production.rb config.assets.compile = true 
```

在你的 gem 文件中

```
gem "activeadmin", :git => "git://github.com/gregbell/active_admin.git" 
```

和`bundle install`

推到heroku，看看它有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T12:58:01.527

移出资产组，捆绑并重试`gem 'sass-rails', '~> 3.2.3'`。`gem 'pg'`我会强制执行`rake assets:precompile RAILS_ENV=production` 并将`public/assets`更新添加到我的提交中。

如果您想重建资产，只需`rm -rf public/assets` 再次运行资产预编译命令。

你可以`git rm public/assets --cached -r` 和 `git add public/assets`

做一个提交并推送到heroku。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T13:09:15.483

我只是猜测您没有运行迁移，因为**pg gem**隐藏在您的资产组中。`heroku run rake db:migrate`如果您尝试在这些条件下运行它们，您可能会在发布时遇到错误。

另外，我建议将您的薄宝石放在生产或全球环境中。确保你有一个[Procfile](https://devcenter.heroku.com/articles/procfile)，否则 heroku 将使用 webrick。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T01:45:33.693

需要将此添加到`production.rb`

```
config.assets.precompile += %w( active_admin.css active_admin.js active_admin/print.css) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T22:50:20.903

当我忘记运行 $ heroku run rake db:migrate 时，我收到了非常相似的错误消息。我创建了一个新的 Family 模型，并将应用程序的根设置为开发中的 family#show 页面。我收到了与部署到 Heroku 时相同的神秘错误消息，并且能够通过在生产数据库中运行迁移并在控制台中创建 Family 对象来解决它。

# javascript - 没有中继设置（用作window.postMessage targetOrigin），无法发送跨域消息

> ID：10845419
> 
> 赞同：1
> 
> 时间：2012-06-01T06:27:03.820
> 
> 标签：javascript, iframe, social-networking, google-plus-one, social-media

我有一个顶部有社交栏按钮的页面，还有通过包含第三方社交栏的标签呈现的视频。在加载 iframe 视频时，错误如下所示。不确定为什么会出现错误。我用谷歌搜索了错误我发现原因是因为 JS API 冲突和 RPC 错误。我找不到解决此错误的方法。谁能帮助我。

```
No relay set (used as window.postMessage targetOrigin), cannot send cross-domain    message
bd()cb=gapi.loaded_0 (line 117)
a = 3
c = "No relay set (used as w...nd cross-domain message"
 ed()cb=gapi.loaded_0 (line 118)
 a = "No relay set (used as w...nd cross-domain message"
 xb()cb=gapi.loaded_0 (line 193)
 a = ".."
  c = "wistia_embed"
 d = Object { s="_noop_echo", f="wistia_embed", c=1, more...}
 Vb()cb=gapi.loaded_0 (line 210)
 a = ".."
 c = "_noop_echo"
 d = a(a)
  e = undefined
 xg() 
```

# google-chrome - 为特定的 MIME 类型加载本机客户端 Chrome 扩展

> ID：10845420
> 
> 赞同：3
> 
> 时间：2012-06-01T06:27:14.623
> 
> 标签：google-chrome, google-chrome-extension, google-nativeclient

我为播放特殊类型音频文件的 Google Chrome 网络浏览器创建了一个 Native Client 应用程序。伟大的; 这部分在这一点上工作得很好。

我已准备好进入下一个阶段——与全世界分享这个应用程序。我需要这部分的帮助。

据我了解，分发此应用程序的最佳方法是将其打包为 Chrome 扩展程序，将其上传到 Chrome 网上应用店 (CWS)，然后使用包含音频文件的我的网站的内联安装。此外，[此页面描述了如何将 MIME 类型与 NaCl 扩展关联](https://developers.google.com/native-client/devguide/distributing#mime_types)。我为此文件类型设计了一个自定义 MIME 类型。

**所以这是我的问题** *（我认为）：*如何从扩展内部加载 Native Client 应用程序？

当我在本地开发这个程序时，有一个 < embed > 标签，它的“src”属性引用了一个指向 .nexe 文件的 .nmf 文件。embed 标记还具有传递给 NaCl 应用程序的其他参数。在扩展方案中，.nmf 和 .nexe 文件（以及图标和 manifest.json 文件）存在于扩展中。

扩展场景下，网页如何指定扩展内部的 NaCl 应用需要加载？通过嵌入标签或其他机制？我是否应该直接加载文件 URL 并相信 MIME 类型会调用 NaCl 扩展？

如果这个问题令人困惑，我深表歉意——这是一种不知道要问正确问题的情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T08:21:12.377

您需要加载 MIME 类型的页面或内容，浏览器将调用 NaCl 扩展和调用`HandleDocumentLoad`方法。

# android - 没有在谷歌地图上显示位置

> ID：10845424
> 
> 赞同：0
> 
> 时间：2012-06-01T06:27:37.733
> 
> 标签：android, google-maps, gps

我有一个地址，想在 Google 地图上显示该地址。地图显示但未指向该特定地址。这是我的代码。我收到此错误：`couldn't get connection factory client`。

```
private MapController mc;
private MapView mapView;
GeoPoint p;
private MyOverlays mapOverlay;
mapView = (MapView) findViewById(R.id.myMapView);
mapView.setBuiltInZoomControls(true);
Geocoder geoCoder = new Geocoder(getBaseContext(), Locale.getDefault());
  try {
    List<Address> addresses = geoCoder.getFromLocationName(loc, 5);
    if (addresses.size() > 0) {
      p = new GeoPoint(
        (int) (addresses.get(0).getLatitude() * 1E6),
        (int) (addresses.get(0).getLongitude() * 1E6));
      mc.animateTo(p);
      mapView.invalidate();
    }
  } catch (IOException e) {
    e.printStackTrace();
  }
  if (p != null) {
    Drawable drawable = this.getResources().getDrawable(R.drawable.ic_launcher);
    mapOverlay = new MyOverlays(drawable, this);
    OverlayItem overlayitem = new OverlayItem(p, "", "");
    mapOverlay.addOverlay(overlayitem);
    mapView.getOverlays().add(mapOverlay);
    this.mc = this.mapView.getController();
    this.mc.setCenter(this.p);
    this.mc.setZoom(16);
  }
  // LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
  // lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000L, 500.0f, (LocationListener) this); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:31:54.940

我假设您在 android **Manifest中提供了以下权限**
`<uses-permission android:name="android.permission.INTERNET"/>`
`<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>`

您需要在测试设备上激活 GPS。如果您在模拟器上进行测试并且它没有被激活，如果您尝试使用*`LocationManager`*.

Google Map Activity 应该会自动激活模拟器中的 GPS 设备，但如果您想直接使用位置管理器，则需要自己执行此操作。 [使用 GPS 和设置位置](http://www.vogella.com/articles/AndroidLocationAPI/article.html)将对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:03:33.927

您应该在设备上而不是在模拟器上测试您的代码。

不知道为什么，但是模拟器中存在一些问题。

就我而言，它在设备上正常工作，但在模拟器上给出相同的错误。

# php - 电子邮件发送到 gmail 帐户的垃圾邮件

> ID：10845426
> 
> 赞同：0
> 
> 时间：2012-06-01T06:27:46.537
> 
> 标签：php

我已设置自动从我的网站向用户发送电子邮件。但是这封电子邮件会发送给使用 gmail 帐户的用户的垃圾邮件。但是它可以在 yahoo 或 hotmail 帐户中正常工作。我应该如何解决这个问题？

```
$to = "$Email";
$subject = "Greeting";
$message = 'message here';
$from = "sender@example.com";
$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
$headers .= "From: sender@example.com" . "\r\n" .
  "Reply-To: sender@example.com" . "\r\n";            

                mail($to,$subject,$message,$headers); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:53:39.867

它应该是 smtp 配置电子邮件和站点信息电子邮件 ID 应该不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:32:09.660

由于您的标题看起来是正确的，因此它可能在消息中键入了某些内容。SpamAssassin（不知道这是否是 Gmail 使用的）键的一件事是像上面这样包含超链接或图形的非常短的消息，因此您可能会受益于实际使您的消息更长一点。找出答案的方法之一是将其发送到您自己的 gmail 帐户，当它出现在您的垃圾邮件文件夹中时，检查那里的标题是否有任何添加的垃圾邮件信息。它可能包含有关 Gmail 使用的垃圾邮件引擎或您的邮件违反了哪些规则的线索。

请看这里：

[发送给联系人的垃圾邮件 - 邮件传递](http://groups.google.com/group/Gmail-Help-Message-Delivery-en/browse_thread/thread/e5c554347f7f3221)

希望这可以帮助！

# python - 为 Web 和桌面创建应用程序

> ID：10845428
> 
> 赞同：9
> 
> 时间：2012-06-01T06:27:48.623
> 
> 标签：python, web, cross-platform, desktop-application

我想创建一个应用程序，它应该可以在桌面（没有互联网连接）和网络上运行。应用程序应该是相同的（我的意思是 UI 和代码）并且可以在 Web 和桌面上运行（或者可能有一点不同）

作为服务器端和桌面应用程序编程语言，我决定使用 Python。

作为 UI 我想使用 HTML5 + Javascript (JQuery) + CSS

那么，你能帮我用什么工具吗？我的意思是我的任务可能有一些框架。我应该在网络中使用什么框架以及在桌面中使用什么（也许在桌面中它将是我的带有 webkit 引擎的网络版本的某种包装器？）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-07T05:36:36.460

我的问题是 1 年前的问题，但现在看来我发现了一些非常有趣的东西，并且似乎是在多个设备上使用的好条件。它的[阿帕奇科尔多瓦](http://cordova.apache.org/)

它是开源的，有很多支持的平台，包括移动和桌面。

**[更新] 2016 年 1 月：**

过去 4 年情况发生了变化，现在最好的选择是[atom electron](http://electron.atom.io/)。这正是我 4 年前想要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T07:05:54.940

我建议你使用[web2py](http://www.web2py.com)。您可以创建离线工作的 web 应用程序，并且可以为任何平台打包它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T06:42:52.423

看看用于 UI 的[Pyjs](http://pyjs.org/)。服务器仍然是你的问题。

# orchardcms - 无法插入图像 - 文本字段

> ID：10845429
> 
> 赞同：0
> 
> 时间：2012-06-01T06:27:53.323
> 
> 标签：orchardcms

我下载了新版 Orchard - 1.4.2。创建了一个新的内容类型。添加了一个新的文本字段。将风味更改为 HTML。但是，我无法将图像插入到 WSIWYG。没有错误。但是图像选择器工具似乎不起作用。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T04:24:17.677

这在以后的版本中得到了修复。

# json - 在 GWT 中使用 Javascript Overlay 类型创建 JSON 请求字符串

> ID：10845431
> 
> 赞同：2
> 
> 时间：2012-06-01T06:28:02.607
> 
> 标签：json, gwt

我们在 GWT 客户端使用 JSO 进行 JSON 解析。现在，我们需要将 Java 对象转换为 JSON 字符串。我只是想了解，我们如何才能做到这一点？JSO 覆盖类型用于 JSON 解析。它也可以用来创建 JSON 请求字符串还是我们必须通过其他方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:44:53.143

在 JavaScript 中生成 JSON 对象非常简单。你可以这样做：

```
var obj = { "var1": "hello", "var2": "world" }; 
```

这将生成一个带有两个变量（“var1”和“var2”）及其值（“hello”、“world”）的 JSON 对象。可以使用该方法将对象转换为字符串（用于发送目的）`JSON.stringify(jso);`。

由于所有变量都被优化为单个字符串，因此无法从 java 代码生成 JSON 数据（当然也不会产生有用的结果），因此应用此方法不会产生有用的结果（如果可能的话）。

如果您已经有一个 JSO 对象（使用 safeeval 之类的东西生成）。您可以在那里编辑您的变量，如下所示：

```
public final native void newValue(String newValue) /*-{
    this.ValueName = newValue;
}-*/; 
```

如果您希望将对象作为字符串，则必须在 JSO 类中定义以下方法：

```
 public final native String returnAsString () /*-{
    return JSON.stringify(this);
}-*/; 
```

或者在你的 Java 类中使用它：`String s = (new JSONObject(jso)).toString();`.

这样，您可以编辑原始输入数据并将原始对象发送回服务器。

BR

# html - 您如何使用 XSLT 显示此 HTML 输出：1 + 3 + 4 + 17 + 8 + 15 = 48..？

> ID：10845436
> 
> 赞同：1
> 
> 时间：2012-06-01T06:28:14.527
> 
> 标签：html, xml, xslt, xpath

我需要知道如何在样式表中使用 xPath 的数字函数来显示 HTML 输出：

1 + 3 + 4 + 17 + 8 + 15 = 48

样式表需要使用数字函数 position() 以及测试和条件语句来呈现 HTML 输出。

这是xml数据：

```
<account>
   <number>1</number>
   <number>3</number>
   <number>4</number>
   <number>17</number>
   <number>8</number>
   <number>15</number>
</account> 
```

到目前为止，这就是我的 .xsl 中的所有内容。它只显示总和 48 ......

```
<?xml version="1.0" encoding="UTF-8" ?>

<xsl:stylesheet version='1.0' xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <xsl:value-of select='sum(//number)'/>
    </xsl:template>
</xsl:stylesheet> 
```

任何帮助将不胜感激 ！

谢谢，

肖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:07:09.493

像这样的东西会起作用......

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="account">
        <html>
            <p>
                <xsl:apply-templates select="number"/>
                <xsl:value-of select="concat(' = ',sum(number))"/>              
            </p>
        </html>
    </xsl:template>

    <xsl:template match="number">
        <xsl:value-of select="."/>
        <xsl:if test="following-sibling::number">
            <xsl:text> + </xsl:text>
        </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

**HTML 输出**

```
<html>
   <p>1 + 3 + 4 + 17 + 8 + 15 = 48</p>
</html> 
```

* * *

此外，如果您必须`position()`在样式表中使用，您可以将其更改`xsl:if`为：

```
<xsl:if test="position() != count(/*/number)">
    <xsl:text> + </xsl:text>
</xsl:if> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T10:28:50.147

在 XSLT 2.0 中，这几乎是一条直线：

```
<xsl:template match="account">
  <xsl:value-of select="string-join(number, ' + '), '=', sum(number)"/>
</xsl:template> 
```

哦，你说你需要使用 position()。如果你认为你会因为不使用 position() 而被取消资格，那么你可以将其更改为：

```
<xsl:template match="account">
  <xsl:value-of select="string-join(number, ' + '), '=', sum(number)*position()"/>
</xsl:template> 
```

但是你可能会因为嘲笑法官的愚蠢而被取消资格。

# ruby-on-rails-3 - Aptana Studio 3 - 无法远程调试部署在 virtualbox 上的 rails 应用程序

> ID：10845437
> 
> 赞同：3
> 
> 时间：2012-06-01T06:28:27.993
> 
> 标签：ruby-on-rails-3, aptana, remote-debugging

您好，我在 Aptana 3 中远程调试 Rails 应用程序（部署在 vagrant vm 上）有问题。

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'bootstrap-sass', '2.0.0'
gem 'bcrypt-ruby', '3.0.1'
gem 'linecache19', :git => 'git://github.com/mark-moseley/linecache'
gem 'ruby-debug-base19x', '~> 0.11.30.pre4'
gem 'ruby-debug19',:require => 'ruby-debug'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.9.0'
  gem 'rb-inotify', '0.8.8'
  gem 'libnotify', '0.5.9'
  gem "watchr", "~> 0.7"
  gem 'guard-rspec', '0.5.5'
  gem 'guard'
  gem 'annotate', '~> 2.4.1.beta'
  gem 'sextant'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.0'

group :test do
  gem 'capybara', '1.1.2'
  gem 'spork', '~> 0.9.0'
  gem 'factory_girl_rails', '1.4.0'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano' 
```

导轨 s -u：

```
=> Booting WEBrick
=> Rails 3.2.3 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
=> Debugger enabled
[2012-06-01 06:41:48] INFO  WEBrick 1.3.1
[2012-06-01 06:41:48] INFO  ruby 1.9.3 (2011-10-30) [i686-linux]
[2012-06-01 06:41:48] INFO  WEBrick::HTTPServer#start: pid=14225 port=3000 
```

所以启用了调试模式

在 Aptana 3 中：

调试 -> 调试配置 -> 远程 Ruby 调试会话，创建新的：

```
host: localhost
port: 3000 
```

尝试运行“调试”，但仍然出现问题对话框，显示“在“启动轨道”期间发生内部错误。无效的'

知道如何启用 aptana 3 远程调试吗？

谢谢你。

# codeigniter - 带有 codeigniter 的 FURLS

> ID：10845440
> 
> 赞同：0
> 
> 时间：2012-06-01T06:28:36.997
> 
> 标签：codeigniter

我正在开发一个包含许多页面的网站，其内容将从数据库中获取。整个网站都是在codeigniter中完成的。

我不想拥有像 www.mywebsite.com/pages/1 之类的网址。相反，我希望管理员在输入页面内容时询问 url 名称 (FURL)。假设管理员输入 FURL 为：study-programs/animation，那么路径应该显示为 www.mywebsity.com/study-programs/animation

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:55:08.070

1) Foreach 页面存储页面名称（可以使用**uri_title()**）

2）在路由（*application/config/routes*）中添加类似的东西；

```
$route['page/(:any)'] = "pages/page_lookup"; 
```

3）在页面控制器中；

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Pages extends CI_Controller {

    public function __construct() {
        parent::__construct();
    }

    public function page_lookup($page) {
        // do your database query getting page id where page name = $page
        $result = $this->page_model->get_page_by_name($page);

        // $result could hold the page html
        // if so, then just do
        $this->load->view($result);
    }
} 
```

有关更多详细信息，请查看 Codeigniter 手册中的[示例](http://codeigniter.com/user_guide/general/routing.html)。

# java - 接口和一些类转换期间的java classcastexception

> ID：10845441
> 
> 赞同：0
> 
> 时间：2012-06-01T06:28:50.543
> 
> 标签：java

我`ClassCastException`在一些类 `MarketplaceBasicProductList`和接口`IMarketplaceProductList`类之间进行转换时得到了 - 为什么？

```
public static IMarketplaceProductList createMarketplaceBasicProductList(Table basicInfoTable) {
        ArrayList list = new ArrayList();
        if (basicInfoTable != null) {
            for (int i = 1; i <= basicInfoTable.getRowCount(); i++) {
                IMarketplaceBasicProduct product = createMarketplaceBasicProduct(basicInfoTable, i);
                list.add(product);
            }
        }
        return (IMarketplaceProductList) new MarketplaceBasicProductList(list);
    } 
```

## 其他细节是：

1.

```
 public interface IMarketplaceProductList extends Serializable {

    public int getProductCount();
    public IMarketplaceBasicProduct getProductMKPInfo(int index);

} 
```

1.  `public class MarketplaceBasicProductList extends AbstractProductList`{ ...................

2.  `public abstract class AbstractProductList implements IProductList`{ ......

我需要在这里添加还实现 IMarketplaceProductList 吗？

1.  `public interface IMarketplaceBasicProduct extends Serializable`{ ...获取 MarketplaceBasicProduct 函数的方法..

5.`public class MarketplaceBasicProduct extends BasicProduct implements IMarketplaceBasicProduct, IGenericProductFields {`

1.  `public class BasicProduct extends AbstractProduct {`

7.`public abstract class AbstractProduct extends AbstractGenericProduct implements IProduct {`

我还需要在这里添加实现`IMarketplaceBasicProduct`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:34:06.223

你得到，`ClassCastException`因为你的班级`MarketplaceBasicProductList` **不是** `IMarketplaceProductList`。

```
MarketplaceBasicProductList extends AbstractProductList implements IMarketplaceProductList 
```

从您拥有的结构来看，`AbstractProductList`对于每种类型的产品列表都是通用的，并且`IMarketplaceProductList`将包含特定的方法`MarketplaceBasicProductList`，因此只会`MarketplaceBasicProductList`实现`IMarketplaceProductList`

此外，我觉得`IMarketplaceProductList`将提供以上及以上的功能，`IProductList`因此它的`IMarketplaceProductList`定义应该是：

```
public interface IMarketplaceProductList extends IProductList {

} 
```

# iphone - 带有 UINavigationController 的 KVO 的 removeObserver

> ID：10845446
> 
> 赞同：0
> 
> 时间：2012-06-01T06:29:27.550
> 
> 标签：iphone, key-value-observing

我正在尝试使用 Storyboards 并使用 KVC 减少我的类之间的耦合。与联系人应用程序一样，我有可编辑的字段，可以推送新的视图控制器，您可以在其中编辑数据。在我展示我的一个 detailViewControllers 之前，我会做这样的事情

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"ShowDetailMap"]) {
        UIViewController *destination = ((UINavigationController *)segue.destinationViewController).topViewController;

        if ([destination respondsToSelector:@selector(setMapTypeAsNum:)]) {
            [destination setValue:[NSNumber numberWithInteger:self.mapView.mapType] forKey:@"mapTypeAsNum"];

            [destination addObserver:self forKeyPath:@"mapTypeAsNum" options:NSKeyValueObservingOptionNew context:NULL];
        } 
```

如何移除Observer 并保持类之间的松散耦合？我可以使我的 viewController 类符合 UINavigationControllerDelegate 协议，但是这样做似乎很糟糕：

```
- (void)navigationController:(UINavigationController *)navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated {

    if ([viewController respondsToSelector:@selector(setNewmap:)]) {
        if ([[navigationController topViewController] isKindOfClass:[AddMapViewController class]]) {
           // remove observer
        }
    }
} 
```

似乎应该有一种更好的方法来删除观察者，而不是检查 DetailViewController 是否属于某种类型并删除该视图控制器的观察者。你会推荐什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:43:10.690

一种方法是让所有基类都有两种方法

*   一种用于注册以目标和观察键为参数的观察者。基类中的函数什么都不做，该函数将被继承并在子类中重新定义以注册观察者
*   另一个功能将删除对该键或所有观察键的观察。此函数将在基类中不执行任何操作，但在派生类中，它将删除您指定的观察键（如果它们符合）

使用这种方法，视图的解耦将被最大化，因为调用者都不必担心类是否符合给定的观察

# asp.net - 如何在较小的 iframe 中呈现完整的网页？

> ID：10845452
> 
> 赞同：0
> 
> 时间：2012-06-01T06:29:54.383
> 
> 标签：asp.net, html, iframe

我有一个定制的内容管理系统。我正在使用 CKEditor 来更改内容。我想要在编辑后单击提交按钮时实时预览网页。我正在使用 iframe，但它显示水平和垂直滚动条，因为网页更大。

我想在特定维度上查看完整页面意味着以更小的尺寸呈现网页。即使它是网页的图像，我也没有任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T06:51:51.477

我喜欢[css3please](http://css3please.com/)：

```
<style type="text/css">
.box_scale {
              width:300px;
             height:300px;
  -webkit-transform: scale(0.5);  /* Saf3.1+, Chrome */
     -moz-transform: scale(0.5);  /* FF3.5+ */
      -ms-transform: scale(0.5);  /* IE9 */
       -o-transform: scale(0.5);  /* Opera 10.5+ */
          transform: scale(0.5);
             filter: progid:DXImageTransform.Microsoft.Matrix(/* IE6–IE9 */
                     M11=0.9999619230641713, M12=-0.008726535498373935, M21=0.008726535498373935, M22=0.9999619230641713,SizingMethod='auto expand');
}

</style>

<div class="box_scale">
    <iframe width="300" height="300" src="http://example.org"></iframe>
</div> 
```

除了选择比例之外，唯一要做的就是为 div 添加宽度和高度。当然，您可能还想为变换原点添加一些规则。另见：[https ://developer.mozilla.org/en/CSS/transform](https://developer.mozilla.org/en/CSS/transform)

# wpf - 如何在WPF中本地报表处理报表定义期间设置路径，可以与setup绑定

> ID：10845453
> 
> 赞同：-1
> 
> 时间：2012-06-01T06:30:15.470
> 
> 标签：wpf

> **本地报表处理时如何设置报表的文件路径**

```
 private void btnReport_Click(object sender, RoutedEventArgs e)
    {
        try
        {                             
                    if (!_isReportViewerLoaded)
                    { 
```

> Tbl_SensorDataSet 是一个具有 Tbl_SensorDataSetTableadapter 的数据集

```
 Microsoft.Reporting.WinForms.ReportDataSource reportDataSource1;
                        Tbl_SensorDataSet dataset;
                        string query = Reportingquery;
                        dataset = new Tbl_SensorDataSet();
                        reportDataSource1 = new Microsoft.Reporting.WinForms.ReportDataSource();
                        Tbl_SensorDataSetTableAdapters.GetFilterReadingTableAdapter TableAdapter1 = new Tbl_SensorDataSetTableAdapters.GetFilterReadingTableAdapter();
                        TableAdapter1.ClearBeforeFill = true;
                        TableAdapter1.Fill(dataset.GetFilterReading, query);
                        dataset.BeginInit();
                        reportDataSource1.Name = "DataSet1";
                        reportDataSource1.Value = dataset.GetFilterReading;
                        this._reportViewer.LocalReport.DataSources.Add(reportDataSource1);                            
                        this._reportViewer.LocalReport.ReportPath = "../../SensorReport.rdlc";
                        dataset.EndInit();
                        _reportViewer.RefreshReport();
                        _isReportViewerLoaded = true;
                    }
                }

        catch (Exception ex) { throw ex; }            
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:11:31.803

使用`ReportEmbeddedResource`而不是`ReportPath`，因为`ReportPath`查找文件存在并将`ReportEmbeddedResource`程序集资源作为完全限定的对象名称进行查找。

这是示例：

```
report.ReportEmbeddedResource = full Namespace.report.rdlc 
```

# objective-c - 如何检查用户选择的文件是否我的沙盒应用程序具有写入权限？

> ID：10845454
> 
> 赞同：3
> 
> 时间：2012-06-01T06:30:24.400
> 
> 标签：objective-c, macos, cocoa, sandbox

我在我的 OS X 应用程序中启用沙盒以重新提交到应用程序商店，并且我试图找到最优雅的方式来确保用户只能选择我的应用程序有权更改的资源。

精简场景：

1.  用户通过`NSOpenPanel`
2.  用户单击`Process Picture`应用程序上的按钮
3.  应用程序从互联网检索信息
4.  应用程序更改图片的元数据。

用户选择完图片后，我想确保每张图片都位于 Pictures 文件夹下，否则我对物理文件的写入将无声无息地失败。

Apple[建议使用以下方法来确定“图片”文件夹的位置：](http://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/AppRuntime/AppRuntime.html)

> 图片目录包含用户的图像和照片。要获取此目录的路径，请使用带有 NSUserDomainMask 域的 NSPicturesDirectory 搜索路径键。

实现上述内容给了我一条如下所示的路径： `/Users/thomas/Library/Containers/com.blazingfrog.latipics/Data/Pictures/picture1.jpg`

但是当我想查看用户选择了哪些图片时，`[myOpenPanel URLs]`返回`/Users/thomas/Pictures/picture1.jpg`

**这两条路径在逻辑上是相同的，但看起来非常不同。我怎样才能以每次都有效的方式比较它们？**

如果有帮助，为了准备我的应用程序以进行沙盒操作，我做了以下操作

*   XCode 中启用的权利
*   启用应用沙盒
*   启用文件系统（读取）
*   启用允许传入/传出网络连接
*   启用图片文件夹访问（读/写）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:57:50.873

1.  你几乎**不**应该默默地失败。如果出现问题，请尽可能向用户报告。这正是`NSError`设计的目的。

2.  在尝试之前，您几乎**不**应该尝试确定操作是否会成功。这样做会使您对竞争条件持开放态度。而是继续尝试操作；如果失败，请优雅地处理。

3.  听起来你真的想要这个`com.apple.security.files.user-selected.read-write`权利。这将为您提供对用户使用打开面板选择的任何文件的写入权限。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-09-02T19:30:54.043

```
[[NSFileManager defaultManager] isWritableFileAtPath:path] 
```

# opengl - 链接到 NVIDIA OpenGL 库

> ID：10845456
> 
> 赞同：2
> 
> 时间：2012-06-01T06:30:34.867
> 
> 标签：opengl, cuda, glut, nvidia, glew

我正在尝试正确运行 OpenGL 程序。我正在使用带有 GT 630M 的笔记本电脑，操作系统是 Fedora 16 64 位。它使用大黄蜂，我必须`optirun`在每个可执行文件之前使用才能访问 GPU。

这是glx信息：

```
[sj755@localhost WINDOWS_VERSIONS]$ glxinfo | grep OpenGL
OpenGL vendor string: Tungsten Graphics, Inc
OpenGL renderer string: Mesa DRI Intel(R) Sandybridge Mobile 
OpenGL version string: 2.1 Mesa 7.11.2
OpenGL shading language version string: 1.20
OpenGL extensions:
[sj755@localhost WINDOWS_VERSIONS]$ optirun glxinfo | grep OpenGL
OpenGL vendor string: NVIDIA Corporation
OpenGL renderer string: GeForce GT 630M/PCIe/SSE2
OpenGL version string: 4.2.0 NVIDIA 295.49
OpenGL shading language version string: 4.20 NVIDIA via Cg compiler
OpenGL extensions: 
```

我正在尝试编译的程序来自一本名为“交互式计算机图形学”的书，源代码可以在这里下载：[http ://www.cs.unm.edu/~angel/BOOK/INTERACTIVE_COMPUTER_GRAPHICS/SIXTH_EDITION/](http://www.cs.unm.edu/~angel/BOOK/INTERACTIVE_COMPUTER_GRAPHICS/SIXTH_EDITION/)

我只是使用以下命令编译了示例程序：

```
nvcc -o example1 example1.cpp ../../Common/InitShader.cpp -I ../../include/ -I /usr/include/GL/ -L /usr/include/GL/ -lglut -lGL -lGLEW -lGLU -lX11 -lXmu -lXi -lm -lpthread 
```

当我像这样运行程序时，`optirun ./example1`我遇到了段错误。我不确定是图书馆还是我编译它的方式，但似乎从来没有工作过。如果我尝试运行该示例，`./example1`则会收到以下错误：

```
glXCreateContextAttribsARB not found 
```

关于如何让 OpenGL 4.1 在这台笔记本电脑上工作的任何想法？

注意：我的 CUDA 程序运行成功。

**更新： ldd ./example1 的输出**

```
[sj755@localhost WINDOWS_VERSIONS]$ ldd ./example1

    linux-vdso.so.1 =>  (0x00007fff31b1c000)
    libglut.so.3 => /usr/lib64/libglut.so.3 (0x00007f4d0b7dc000)
    libGL.so.1 => /usr/lib64/libGL.so.1 (0x0000003990a00000)
    libGLEW.so.1.6 => /usr/lib64/libGLEW.so.1.6 (0x000000389b600000)
    libGLU.so.1 => /usr/lib64/libGLU.so.1 (0x00000038a0000000)
    libX11.so.6 => /usr/lib64/libX11.so.6 (0x000000397a800000)
    libXmu.so.6 => /usr/lib64/libXmu.so.6 (0x000000389f800000)
    libXi.so.6 => /usr/lib64/libXi.so.6 (0x000000397c400000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x0000003976800000)
    libcudart.so.4 => /usr/local/cuda/lib64/libcudart.so.4 (0x00007f4d0b57d000)
    libstdc++.so.6 => /usr/lib64/libstdc++.so.6 (0x0000003983800000)
    libm.so.6 => /lib64/libm.so.6 (0x0000003977400000)
    libgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x0000003977800000)
    libc.so.6 => /lib64/libc.so.6 (0x0000003976400000)
    libXext.so.6 => /usr/lib64/libXext.so.6 (0x000000397b000000)
    libXxf86vm.so.1 => /usr/lib64/libXxf86vm.so.1 (0x000000398e600000)
    libXdamage.so.1 => /usr/lib64/libXdamage.so.1 (0x000000397f800000)
    libXfixes.so.3 => /usr/lib64/libXfixes.so.3 (0x000000397d000000)
    libdrm.so.2 => /usr/lib64/libdrm.so.2 (0x0000003991200000)
    libdl.so.2 => /lib64/libdl.so.2 (0x0000003976c00000)
    libxcb.so.1 => /usr/lib64/libxcb.so.1 (0x000000397a000000)
    libXt.so.6 => /usr/lib64/libXt.so.6 (0x0000003996e00000)
    /lib64/ld-linux-x86-64.so.2 (0x0000003976000000)
    librt.so.1 => /lib64/librt.so.1 (0x0000003977000000)
    libXau.so.6 => /usr/lib64/libXau.so.6 (0x000000397ac00000)
    libSM.so.6 => /usr/lib64/libSM.so.6 (0x0000003988400000)
    libICE.so.6 => /usr/lib64/libICE.so.6 (0x0000003988800000)
    libuuid.so.1 => /lib64/libuuid.so.1 (0x0000003980800000) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:04:10.793

实际上这是一个 VirtualGL 错误。

您可以从这里获得更多信息：[https ://github.com/Bumblebee-Project/Bumblebee/issues/209](https://github.com/Bumblebee-Project/Bumblebee/issues/209)

这个问题可以用新的（每日）版本的 virtualgl 来解决：http://virtualgl.sourceforge.net/vgl.nightly/[但是](http://virtualgl.sourceforge.net/vgl.nightly/)要让它工作，你应该删除一个，它是 bumblebee 附带的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T05:30:58.743

原来我的程序链接到 NVIDIA 的 OpenGL 库。问题在于代码本身。这几乎解决了我的大部分问题： http: [//openglbook.com/glgenvertexarrays-access-violationsegfault-with-glew/](http://openglbook.com/glgenvertexarrays-access-violationsegfault-with-glew/)

这解释了为什么我能够编译和运行所有使用曲面细分的 cg 示例，这些示例仅在 OpenGL 4 中找到。

# xml - 将内部文本文件加载为 XML

> ID：10845457
> 
> 赞同：3
> 
> 时间：2012-06-01T06:30:36.787
> 
> 标签：xml, vb.net, my.resources

我正在编写一个 VB.NET 应用程序，我想从 Resource 加载一个内部文本文件。

但是代码显示**Invalid URI: The Uri string is too long。**

代码是

```
'document.Load("C:\Users\Sou\Documents\Visual Studio 2010\Projects\info.xml")
document.Load(My.Resources.info)
'some processing job with XML node ... 
```

那么，如何加载资源文件呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T06:55:04.377

```
Dim xdc As New XmlDocument
xdc.LoadXml(My.Resources.info)
MsgBox(xdc.OuterXml) 
```

# tfs - 以不同方式在 TFS 中共享项目文档，您的最佳实践是什么？

> ID：10845460
> 
> 赞同：10
> 
> 时间：2012-06-01T06:30:57.163
> 
> 标签：tfs, documentation

我想知道关于在 TFS 2010 中管理（和版本化）不同类型的项目文档（例如版本化目标文档，例如：用例、主测试计划、质量保证计划和非版本化相关文档，例如 MinutesOfMeetings），您的最佳实践是什么。

你正在用吗

1.  团队 Wiki 或
2.  共享文件或
3.  源代码控制

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T11:18:25.553

我们对发送给客户的所有文档令牌使用源代码控制。这包括手册/安装指南等。这样他们就可以获得常规的构建标签，并且我们知道哪个手册对应于哪个软件版本。

对于内部文档（MoM、设计文档、项目管理等），我们使用 Sharepoint；对于 UserStories，我们显然使用内置的 TFS 工作项类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:38:21.310

我对此添加我的想法：

回答这个问题的最好方法是：没有最好的方法。这取决于许多因素，这就是为什么每支球队的做法都不同。

但是，对此有一些指导：

*   如果可能的话，将工件放在可以处理相同类型开发周期的地方。例如，如果您在 wiki 上存储针对每个软件版本的文档，您很快就会遇到麻烦。版本控制至关重要，因此您必须选择可以支持所需版本控制的服务。

*   考虑到受众：例如，您不想在源代码管理中存储规范的 word 文档。

*   如果有意义，请不要害怕将内容存储在源代码管理中：您将永远不会获得更好的性能，数据在存储中以增量方式打包并打包以传输到客户端：非常高效。

*   您可以使用工作项来存储您的文档，使用附件，这是一个不错的方式，但肯定不是最容易设置和整个团队购买它。

我推荐的（但这只是个人的）：

*   使用 Wiki 或共享 OneNote 书籍（OneNote**很棒**）来获取开发团队内部的文档。OneNote 具有极大的灵活性，可以通过您需要的形式来构建协作数据，从而提高工作效率。
*   SharePoint 用于由非开发人员生成或阅读的文档。
*   源代码管理存储所有文档/工件的完整版本。当我的发布完成后，我喜欢复制源代码管理的给定文件夹中的所有文档和资产，这样我知道我总是能够在需要时恢复它们。（而且我不太确定 SharePoint 或 OneNote）。
*   我曾经用工作项驱动过任何正式的东西，这很棒，但需要时间和定制工具来实现我想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T10:27:52.780

[TFS 到 SharePoint 集成](http://msdn.microsoft.com/en-us/library/ms253177)- 如果您的组织有 SharePoint，这是迄今为止存储文档的最佳选择。

否则，请选择更符合以下要求的选项：

*   访问所有项目贡献者的共享文档
*   没有 Visual Studio 的用户可以从 Web 访问
*   提供版本控制
*   允许权限管理

![SharePoint 文档和 TFS](../Images/6d5611cc469f15fd3a1ffeb1f52231fa.png)

不推荐使用源代码控制选项，因为非开发人员无法访问以及可能让他们滥用源代码控制（曾经尝试下载 1GB 的源代码树，其中大部分是纯垃圾 - 文档存档、日志、数据库转储等。 ..？）。

# linux - pam_unix : bad username 是什么意思？

> ID：10845463
> 
> 赞同：1
> 
> 时间：2012-06-01T06:31:17.033
> 
> 标签：linux, login, pam

谁能告诉我这个错误是什么意思。什么时候会出现。我尝试谷歌搜索，但没有结果。请指出正确的文档以了解此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:52:28.340

此错误由 pam_unix 模块中的以下代码触发（来源：Linux-PAM-0.99.5）：

```
if (name == NULL || !isalnum(*name)) 
```

这`name == NULL`将由使用 PAM 协议中的程序错误触发，其中用户名变量未设置为 pam 对话的一部分。

第二个原因，也可能是最有趣的原因是用户名的第一个字符必须是字母数字，即该字符必须是`A-Z`或`a-z`中的一个`0-9`。不接受重音字符。

较新版本的 Linux-PAM（从[fedorahosted 的 pam_unix.c 源中](https://fedorahosted.org/linux-pam/browser/modules/pam_unix/pam_unix_auth.c#L131)可以看出）说：

```
if (name == NULL || name[0] == '-' || name[0] == '+') 
```

这意味着它只拒绝`-`and`+`字符 - 即它没有旧的来源那么严格。

# c# - 是否有任何事件可以识别页面已在 c# 中终止？

> ID：10845466
> 
> 赞同：0
> 
> 时间：2012-06-01T06:31:37.383
> 
> 标签：c#, events, session

是否有任何事件可以识别页面已在 c# 中终止？我有一个场景，当我从页面“A”导航到任何其他页面时，我需要删除某些会话变量。我没有使用 response.redirect() 导航到另一个页面。那么我怎么知道我什么时候退出A呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:12:25.507

没有确切的方法来处理页面的卸载事件。但是您可以编写一些上面答案中提到的javascript..

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:39:52.943

尝试 onbeforeunload 事件：它在页面卸载之前触发

按照这个链接

[http://www.4guysfromrolla.com/demos/OnBeforeUnloadDemo1.htm](http://www.4guysfromrolla.com/demos/OnBeforeUnloadDemo1.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T07:07:56.393

如果您需要从页面 A 到页面 B 的某些特定操作。您应该考虑调用服务器，执行您的操作，然后重定向到页面 B。

否则你可能会在链接客户端工作，并在重定向时对服务器进行一些 JQuery 调用，以便接收到调用，服务器正在做你的事情。

如果您正在寻找某个页面的一般出口，那么您正在进入一个痛苦的世界。

# c# - 带有 RSA 密钥库的 C# MD5

> ID：10845469
> 
> 赞同：3
> 
> 时间：2012-06-01T06:31:46.823
> 
> 标签：c#, security, md5, rsa

我需要使用 C# 中的密钥存储私有密钥库创建签名。

密钥库的详细信息如下：

```
 <certificate>
            <storeType>JKS</storeType>
            <storeName>classpath:docRtvKStoreS</storeName>
            <storePass>storexamp3</storePass>
            <keyPass>pass12rr</keyPass>
            <alias>rtvDocKeyRSA</alias>
            <algorithm>MD5WITHRSA</algorithm>
   </certificate 
```

你们中有人知道如何读取私钥库并使用证书详细信息在 C# 应用程序中生成签名吗？

非常感谢示例代码。

# asp.net - ComboBox的DropDown按钮出现在远离输入框的地方

> ID：10845470
> 
> 赞同：0
> 
> 时间：2012-06-01T06:31:47.273
> 
> 标签：asp.net, ajaxcontroltoolkit

我正在使用 AjaxControlToolkit 的 ComboBox 控件。DropDown 箭头看起来离它应该在的实际位置很远。看这张图片：

![在此处输入图像描述](../Images/c7a244d5e17e0f3de9babf3b8eab6478.png)

如何解决这个问题，让它看起来像一个理想的 DropDownList？

如果图像未出现，请单击此链接： http: [//postimage.org/image/99yqullkb/](http://postimage.org/image/99yqullkb/)

****编辑（CSS代码）****

```
.WindowsStyle .ajax__combobox_inputcontainer .ajax__combobox_textboxcontainer input
{
    margin: 0;
    padding: 0px 0px 1px 0px;
    border: solid 1px #7F9DB9;
    border-right: 0px none;
    font-size: 13px;
    height: 18px;
    width:200px;
}
.WindowsStyle .ajax__combobox_inputcontainer .ajax__combobox_buttoncontainer button
{
    padding: 0px 0px 10px 0px;
    height: 21px;
    width: 21px;
}
.WindowsStyle .ajax__combobox_itemlist
{
    border-color: #7F9DB9;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T19:24:13.933

看起来像 CSS 样式的副作用。检查箭头按钮的计算样式及其容器，其中包含一些工具，如 FireBug 或开发人员工具。IAE 尝试应用下面的样式规则，也许它可以解决问题：

```
table.ajax__combobox_inputcontainer td
{
    padding: 0 !important;
    text-align: left !important;
}
table.ajax__combobox_inputcontainer td.ajax__combobox_buttoncontainer button
{
    margin-left: 0 !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:21:29.567

如果您使用 width="20%" 之类的宽度属性，则会出现此问题。避免在宽度属性中使用“%”，并尝试以像素为单位的精确宽度，例如 width="200px"。

# plugins - 如何编写像Skype这样的应用程序作为浏览器插件？

> ID：10845473
> 
> 赞同：1
> 
> 时间：2012-06-01T06:32:02.883
> 
> 标签：plugins, npapi, skype, browser-plugin

涉及哪些技术、框架、编程语言？必须支持 tcp 入站和出站连接，读取网络摄像头和麦克风数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:11:50.807

浏览器插件可以访问操作系统的原生 API，因此在相机​​、音频和网络访问方面与独立应用程序没有太大区别。但是，您必须注意的是，您的代码可能在特权较低的进程中运行。

对于 Internet Explorer，您必须使用 C++编写[内容扩展](http://msdn.microsoft.com/en-us/library/aa741309%28v=vs.85%29.aspx)，特别是[ActiveX 控件。](http://msdn.microsoft.com/en-us/library/aa751972%28v=vs.85%29.aspx)对于所有其他浏览器，您将编写[NPAPI 插件](https://stackoverflow.com/questions/2649056/how-to-write-a-browser-plugin)C++ 或 C。

在 Windows 上，您可以将两种插件类型组合到一个 DLL 中。[FireBreath](http://firebreath.org)可以做到这一点，你应该研究一下，因为它已经为你抽象了浏览器（和其他问题）。

# xml - 通过 FLASH AS2 检测 XML 中的空字段

> ID：10845479
> 
> 赞同：1
> 
> 时间：2012-06-01T06:32:28.193
> 
> 标签：xml, flash, actionscript-2

我有这个简单的 XML 文件，我正在调用一个 SWF 文件。这是代码：

```
<goals1>
<minute>32</minute>
<name>Name</name>
<minute>35</minute>
<name>Name2</name>
</goals1> 
```

所以这些节点将是空的。他们甚至不会存在。但我将把路径放到 AS2 中。所以我的问题是： - 如何使它们在 swf 文件中不显示“未定义”。换句话说，我需要在有内容时显示内容。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:34:01.590

如果您没有空格，您只需检查该节点是否为空。

```
if (example.nodeValue != '') {
    // Run your stuff
} 
```

您还可以根据 xml 对象的长度运行 for() 以仅执行给定的子对象。

像这样的东西：

```
xmlFeed.onLoad = function() {
    // Pre defined and go the depth you need
    parsedXML = xmlFeed.firstChild.firstChild.childNodes;

    for (var i:Number = 1; i <= parsedXML.length; i++) {
        if(parsedXML[i].firstChild.nodevalue != "") {
            // Run your stuff here
        }
    }
} 
```

# blackberry - 如何在 Blackberry java 中使用 TELUGU_SCRIPT 标志

> ID：10845481
> 
> 赞同：1
> 
> 时间：2012-06-01T06:32:47.770
> 
> 标签：blackberry

黑莓java中TELUGU_SCRIPT标志的用途是什么以及如何使用它

# c++ - 从列表中添加和删除自身的对象

> ID：10845483
> 
> 赞同：2
> 
> 时间：2012-06-01T06:33:11.663
> 
> 标签：c++, inheritance, shared-ptr, ownership

我有一个小的类层次结构，我试图找出一种简单的维护所有权的方法。由于这些对象驻留在堆上，而且我讨厌原始指针，我想我将使用 boost 共享指针和弱指针。（我对替代方案持开放态度，但这是我习惯的。）共享指针有助于所有权，因为当共享指针的所有者这样说时，弱指针不会阻止对象被删除。

层次结构：

```
class Actor;
class Body : public virtual Actor;
class Owned : public virtual Actor;
class Combatant : public Body, public Owned; 
```

那里还有一些其他的课程。我可以使用虚拟继承来处理钻石继承，所以这没什么大不了的。另外，我将为它们中的每一个键入一些 shared_ptrs 和 weak_ptrs。

我的想法是让 Actor 维护一个 Actor 共享指针（ActorPTR）的静态列表，并让子类维护弱指针（BodyWPTR 等）的静态列表。这样就有一个共享指针的明确集合，所以应该管理一些某种所有权（我会尽量不要在其他任何地方永久存储共享指针。）拥有这些列表很方便，因为我可以很快地说，“让我附近的所有战斗人员”或“移动所有尸体”。

我希望对象将自己插入到正确的列表中：Body 会将自身的弱指针插入到 body 弱指针列表中，并将 Actor 共享指针插入到该列表中，这可能在构造函数中完成。但是（显然）在构造函数中使用“this”指针（或它的 shared_from_this() 等效项）是不好的。我能想到的唯一其他方法是通过一大堆工厂方法。我还认为层次结构中的多个类从 enable_shared_from_this 继承是不好的。

如何让对象在其构造函数期间自动将指向自身的共享或弱指针插入到列表中？这是个坏主意吗？

（同样在上面的“代码”中，我可能弄乱了虚拟继承语法，但这不是我现在关心的，所以不用担心。）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:45:47.193

您可以使用模板仅使用一种工厂方法：

```
template <typename T>
T *myNew() {
    T *t = new T();
    t->push_to_list();
    return t;
} 
```

然后像这样调用它：

```
MyClass *c = myNew<MyClass>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T06:53:26.277

我不明白你为什么要为弱指针而烦恼。

我认为您的问题不是您要问的具体问题，而是您的设计。本质上，您使用的是全局变量，这通常是个坏主意。确实，您可能应该拥有某种`World`对象，其中 a`World`拥有的是世界上所有参与者的集合，所有物体的列表，等等。

因此，您的典型构造是，例如，创建一个新的`Combatant`并将其填充到世界中。或者，也许你的世界有一个`spawnCombatant`.

# html - JAXB 如何处理标签中的属性？

> ID：10845484
> 
> 赞同：1
> 
> 时间：2012-06-01T06:33:12.650
> 
> 标签：html, xml, jaxb, marshalling, unmarshalling

假设我有以下 xml：

```
<root>
<tag1>value1</tag1>
<tag2 attr1="somevalue"></tag2>
</root> 
```

我想知道当 JAXB 从 xml 转换为任何对象时，它如何处理任何标记的属性。（我的意思是当它解组时）

# sql - Rails：使用多个标准对两个不同的模型（表）进行排序

> ID：10845485
> 
> 赞同：0
> 
> 时间：2012-06-01T06:33:17.443
> 
> 标签：sql, ruby-on-rails

我有两个不同的模型（Container 和 StockReceipt），我需要合并和订购它们以在表格中显示为交货。我目前正在对控制器中的记录进行排序：

> stock_receipts = StockReceipt.where(:delivery_date.gt => 1.month.ago)
> 
> 容器 = Container.joins(:shipment).where(:shipment => {:etd.gt => 1.month.ago})
> 
> @deliveries = (stock_receipts + 容器).sort!{|a,b| 交货日期（a）<=>交货日期（b）}

delivery_date 是一个帮助方法，根据类返回日期

它有效，但我想按供应商进行子排序（在 SQL 中：ORDER BY delivery_date，supplier_id）。我可以 group_by(delivery_date).group_by(supplier) 但这有点难看。

我想知道是否有更优雅的方法可以在 Rails 中或直接在 SQL 中执行此操作。

谢谢大家， 加姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:00:08.897

您可以使用支持多模型搜索的 Solr 和 Sunspot gem(http://sunspot.github.com/) 等搜索引擎

这是一个小例子：

```
search = Sunspot.search(Post,Comment) do
  with(:published_at).less_than(Time.now)
  paginate(:page => params[:page])
end 
```

# sql - 通过 SSIS 创建新数据库

> ID：10845489
> 
> 赞同：1
> 
> 时间：2012-06-01T06:33:34.830
> 
> 标签：sql, ssis

我有两个名为：olddatabase 和 newdatabase 的数据库。我想创建一个名为 newdatabase2 的新数据库，然后将数据库结构从 newdatabase 复制到 newdatabase2，然后将数据从 olddatabase 转换为 newdatabase2。

要将数据库结构从newdatabase复制到newdatabase2，我使用`Transfer SQL Server Object`SSIS中的Task组件，然后执行SSIS Package来转换数据。但在第 1 步中，我现在不知道如何创建名为 newdatabase2 的新数据库。目前我手动创建数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:37:17.837

有一个“传输数据库任务”。您可以使用它来将 newdatabase 复制到 newdatabase2：

![在此处输入图像描述](../Images/59811442117faa00f1f86e8f55d12a6c.png)

编辑：

或者您可以使用一次“复制数据库向导”。它将生成一个 SSIS 包和一个 SQL Server 作业，然后您可以根据需要多次重复使用它。

EDIT2：在 BIDS 上打开没有多大意义，因为您只会看到如下内容： ![在此处输入图像描述](../Images/d9831224b5e99422846d685a31be1c9d.png)

我不认为这些包是可编辑的。不过，您可以访问它：

![在此处输入图像描述](../Images/45eaadc02588a7ef3bdf95a16c440bc4.png)

# mysql - 我想要返回名称而不是 id

> ID：10845490
> 
> 赞同：1
> 
> 时间：2012-06-01T06:33:45.973
> 
> 标签：mysql

我有 3 张桌子，我想加入它。

检查这个小提琴：[http ://sqlfiddle.com/#!2/20410/2](http://sqlfiddle.com/#!2/20410/2)

在列中： segunda、terca、quarta、quinta 和 sexta 而不是数字......我需要“materias”表中的名称。但我检查了同一张表“材料”中的所有 ID

那可能吗？有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:45:26.650

You can do that in two ways using inner joins and using sub queries.

Using Inner Join:

```
SELECT
h.id_classe,
h.id_aula,
s.serie,
m1.materia as segunda,
m2.materia as terca,
m3.materia as quarta,
m4.materia as quinta,
m5.materia as sexta
FROM horario_de_aulas h
INNER JOIN materias as m1 on h.segunda = m1.id_materia
INNER JOIN materias as m2 on h.terca = m2.id_materia
INNER JOIN materias as m3 on h.quarta = m3.id_materia
INNER JOIN materias as m4 on h.quinta = m4.id_materia
INNER JOIN materias as m5 on h.sexta = m5.id_materia
INNER JOIN series s ON h.classe = s.id_serie = 1
LIMIT 4 
```

Using Sub Query

```
SELECT
h.id_classe,
h.id_aula,
s.serie,
(select materia from materias where id_materia=h.segunda) as segunda,
(select materia from materias where id_materia=h.terca) as terca,
(select materia from materias where id_materia=h.quarta) as quarta,
(select materia from materias where id_materia=h.quinta) as quinta,
(select materia from materias where id_materia=h.sexta) as sexta
FROM horario_de_aulas h
INNER JOIN materias m
INNER JOIN series s ON h.classe = s.id_serie = 1
LIMIT 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T06:41:52.213

尝试以下查询：

```
SELECT
h.id_classe,
h.id_aula,
s.serie,
m1.materia as segunda,
m2.materia as terca,
m3.materia as quarta,
m4.materia as quinta,
m5.materia as sexta
FROM horario_de_aulas h
INNER JOIN materias as m1 on h.segunda = m1.id_materia
INNER JOIN materias as m2 on h.terca = m2.id_materia
INNER JOIN materias as m3 on h.quarta = m3.id_materia
INNER JOIN materias as m4 on h.quinta = m4.id_materia
INNER JOIN materias as m5 on h.sexta = m5.id_materia
INNER JOIN series s ON h.classe = s.id_serie = 1
LIMIT 4 
```

# c++ - 如何确保远程对等方在调用 asio socket close() 函数之前接收到所有数据

> ID：10845491
> 
> 赞同：0
> 
> 时间：2012-06-01T06:33:58.397
> 
> 标签：c++, boost-asio, send, shutdown

问题是当我调用asio socket函数close()关闭socket时，之前发送的数据都丢失了！</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T01:46:04.707

为了确保在调用之前*写入*`close`所有数据，您应该使用 io_service 的事件循环。

以 asio 的[聊天客户端](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/example/chat/chat_client.cpp)为例说明如何操作：

```
void write(const chat_message& msg)
{
  io_service_.post(boost::bind(&chat_client::do_write, this, msg));
}

void close()
{
  io_service_.post(boost::bind(&chat_client::do_close, this));
} 
```

通过`post`对事件循环进行实际写入，您正在委派确保一切以正确顺序发生的工作。

如果您想在关闭套接字之前确保远程端点已收到所有内容，则需要构建某种协议，即让远程端点发送一条消息来确认。

# android - 以编程方式从 android 设备访问服务器数据

> ID：10845500
> 
> 赞同：1
> 
> 时间：2012-06-01T06:34:31.917
> 
> 标签：android

我正在做 android 本机应用程序，它需要使用登录凭据和 IP 地址显示来自服务器端 PC 的所有文件和文件夹。我可以在那里做一些事情（比如复制、移动、删除）。我不对此有任何经验。我怎么能启动这个？给一些想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:44:21.027

Make a request over http to your server and encode the server response in JSON format and parse the response with the [JSONObject class](http://developer.android.com/reference/org/json/JSONObject.html).

Server-side example with PHP to list files in a directory

```
$file_id = 0;
$files = array();

if ($handle = opendir('/path/to/files')) {

    while (false !== ($entry = readdir($handle))) {
        $files[$file_id] = $entry;
        $file_id ++;
    }
    echo json_encode($files);
    closedir($handle);
} 
```

# php - Web 套接字在 Firefox 12 中不起作用

> ID：10845502
> 
> 赞同：3
> 
> 时间：2012-06-01T06:34:35.080
> 
> 标签：php, websocket, php-socket

Firefox 无法与位于 ws://192.168.0.155:5555/socket/server3.php 的服务器建立连接。

```
$(document).ready(function(){
if(!("WebSocket" in window)){
alert('not available');
}else{
_init(); 
}
});
function _init(){
     var websocket;
     var host = 'ws://192.168.0.155:5555/socket/server3.php';
     try{
     websocket = new WebSocket(host);
     websocket.onopen = function(evt){ onOpen(evt); };
     websocket.onclose = function(evt) { onClose(evt); };
     websocket.onmessage = function(evt) { onMessage(evt); };
     }catch(exception){
     alert(exception);
     }
     }

  function onOpen(evt){
    $('.logger_screen').append('Connected');
      }

  function onClose(evt){
      $('.logger_screen').append('Disconnected');
       }

  function onMessage(evt){
    $('.logger_screen').append(evt.data);
   } 
```

我的代码有问题吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:36:03.620

从您的一条评论来看，我认为您正在服务器上使用[phpwebsocket](http://code.google.com/p/phpwebsocket/)。这个项目似乎没有得到维护，也没有跟上 websocket 协议规范的变化。

使用了两个不兼容的 websocket 协议版本。Safari 仍然使用 phpwebsocket 实现的原始（现已弃用）[Hixie](https://datatracker.ietf.org/doc/html/draft-hixie-thewebsocketprotocol-76)变体；Firefox、IE10 和 Chrome 使用较新的[Hybi](https://www.rfc-editor.org/rfc/rfc6455)变体。

要对此进行测试，您可以尝试使用 Safari 来执行您的 javascript。

如果您想在服务器上使用 PHP 并且需要支持的不仅仅是 Safari，我不确定您有哪些选择。我可以看到一台[开源服务器](https://github.com/GulDmitry/php-websocket-server)应该支持上面列出的所有浏览器。或者，如果您想尝试编写自己的服务器，这里有很多问题发布在 websocket 标签下，您可以从中获得灵感。

# iphone - 如何从图像选择器控制器删除中录制视频

> ID：10845504
> 
> 赞同：0
> 
> 时间：2012-06-01T06:35:18.687
> 
> 标签：iphone

我想从 imagepicker 控制器委托录制视频。我正在获取捕获图像，但没有获取视频模式记录。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:05:56.900

在其开发人员中心查看 Apple 的 AVCAmDemo，以进行自定义视频录制和添加自定义覆盖。< [http://developer.apple.com/videos/wwdc/2010/](http://developer.apple.com/videos/wwdc/2010/) >

# php - 从时间戳中获取正确的星期和年份

> ID：10845505
> 
> 赞同：0
> 
> 时间：2012-06-01T06:35:24.267
> 
> 标签：php, sql

我有一个函数可以获取所有新注册的用户，并根据过滤器显示它是按月还是按年新注册。

在这个例子中，我使用的是年份，我有这个 sql

`Select date_registered from users where date_registered > '2011-12-31 12:59:59' AND date_registered < '2013-01-01 12:00:00'`

所以这将导致所有`date_registered`注册为 2012 年

问题是如何变得更有活力，例如我可以应用过滤器 `where date_registered > $dynamic_date and date_registered < $dynamic_date`

或任何好的建议如何更好地实现这一目标。

谢谢 。.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:48:46.060

我相信这就是您正在寻找的：

```
$sql = "SELECT date_registered 
       FROM users
       WHERE YEAR(date_registered) = YEAR(NOW())"; 
```

看看这个以获取[更多信息](http://dev.mysql.com/doc/refman/4.1/en/year.html)

既然你也想要正确的星期，那么还要看看函数`YEARWEEK()`。它以相同的方式工作并返回周数。[看这里](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_year)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T06:46:44.230

try this code

```
$sql = "SELECT date_registered FROM users WHERE date_registered > '$dateStart' AND date_registered < '$dateEnd'"; 
```

where `$dateStart` and `$dateEnd` are your dynamic date variables

A pair of SINGLE quotes around your variables should be enough. All the statement string has to be in DOUBLE quotes as you see.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T06:49:44.023

如果它是一个小数据集，我会走 Tikkes 的回答显示的纯 SQL 路线；但是，出于索引目的，计算边界可能会更好。

[mktime](http://php.net/mktime)和[date](http://php.net/date)可用于此：

```
$lowerBound = date('Y-m-d H:i:s', mktime(0, 0, -1, 1, 1, date('Y')); //1 second before 00:00:00 1 Dec <current year>
$upperBound = date('Y-m-d H:i:s', mktime(0, 0, -1, 1, 1, date('Y') + 1); //1 second before 00:00:00 1 Dec <current year + 1> 
```

因此，您只需将它们放入查询中：

```
$sql = " ... WHERE d > '$lowerBound' AND d < '$upperBound'"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T06:57:42.603

您应该使用`BETWEEN`，它更具可读性。

MySQL 有一个很棒[的日期和时间函数列表](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

基本上，你想要做的是：

```
SELECT *
FROM Store_Information
WHERE Date BETWEEN '$start' AND '$end' 
```

我不知道你从什么数据开始，或者你从哪里得到你的 $start 和 $end 输入。我将假设您使用的是从[time()](http://php.net/time)生成的 unix 时间戳，然后您可以执行以下操作：

```
SELECT *
FROM Store_Information
WHERE Date BETWEEN FROM_UNIXTIME('$start') AND FROM_UNIXTIME('$end') 
```

如果这还不够，请更清楚您如何格式化您的数据（$start，$end）。

# javascript - Ruby on Rails 与 Parse + Backbone.js

> ID：10845506
> 
> 赞同：3
> 
> 时间：2012-06-01T06:35:34.183
> 
> 标签：javascript, ruby-on-rails, parsing, backbone.js

我去年开始制作我的应用程序，但最近有一个**神圣**的时刻，我意识到用 PHP 开发一个严肃的 Web 应用程序现在在可扩展性和整体理智方面不会削减它。

这导致我有以下选择：

1.  用最漂亮的 MVC 重写我的后端 - 37Signal 的**Ruby on Rails** 或
2.  废弃我的数据库并在**Backbone.js + [Parse中重写我的后端](https://www.parse.com/)**

（[Parse 刚刚发布了他们的 Web SDK](http://blog.parse.com/2012/05/30/parse-launches-javascript-sdk%3a-parse-for-websites/)）

我不是历史爱好者，但请听我说完。直到最近，PHP 才引领 Web 开发。现在 Rails 正在接管。仅此一项就足以让大多数人选择选项 1。但是，如果 Parse 像 Rails 一样接管了 PHP 一样接管 Rails 会怎样？我正在为未来做计划，我开始认为 Parse 是未来的发展方向。

**我应该用什么重写我的应用程序以最大限度地提高未来几年的可扩展性？**

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T08:21:41.890

我是一名 Rails 开发人员并且喜欢 Rails，但我不认为 Rails 以任何形式“接管”了 PHP。PHP中仍然有很多站点。PHP，它的框架和它周围的一切都一如既往地蓬勃发展。并且会持续相当长的一段时间。

Ruby on Rails 已经建立了强大的地位和社区。这也将持续很多年。Backbone 很可能也会找到它的社区（已经在某种程度上）

关于技术的决定不应该过多地考虑哪个技术堆栈将成为新的孩子。有一些考虑因素，比如经验丰富的程序员的可用性，可能取决于框架的使用量，但关于您的技术需求的确凿事实更为重要。不应该有任何关于此的“神圣”时刻。那只是直觉，毫无价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:49:05.790

Javascript是未来的方式。一切都在**一种**语言中，而不必担心后端。模仿 Parse 的引擎将是最好的免费替代品，尽管我认为我们都可以以 Apple 为例，并理解人们付费购买的软件是更好维护的软件。谢谢。

# regex - Textmate 需要一个简单的（我认为）正则表达式

> ID：10845509
> 
> 赞同：0
> 
> 时间：2012-06-01T06:35:45.270
> 
> 标签：regex, textmate, oniguruma

有人可以建议如何在 textmate 中进行此搜索和替换。我想我需要一个正则表达式（但我对正则表达式知之甚少！）

我想将所有这些子弹图像更改为 GIF...

**子弹1.png**

变成

**子弹1.gif**

我希望数字是通配符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:44:24.233

The regular expression:

```
bullet-(\d+).png 
```

The replacement:

```
bullet-$1.gif 
```

# android - ActionBar Sherlock ，操作栏选项卡和片段

> ID：10845515
> 
> 赞同：2
> 
> 时间：2012-06-01T06:36:33.840
> 
> 标签：android, tabs, fragment, actionbarsherlock

我想为手机和平板电脑创建一个应用程序。我正在使用 actiobBar sherlock 库。我有一个扩展 SherlockFragmentActivity 的 MainActivity。MainActivity 有一个仅包含选项卡的操作栏。现在，我想为每个选项卡关联一个片段，这个片段应该有两个片段（列表片段和详细片段）。请建议我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T09:49:22.070

有几种方法，我只解释我的。

你可以使用任何导航，ViewPager，TabAdapter... 想法是**添加一个片段层**。

例如，您的 TabAdapter 带有视图寻呼机：

```
 private ViewPager           _viewPager;
    private TabsAdapter         _tabsAdapter;

   _tabsAdapter = new TabsAdapter(this, _viewPager);
   _tabsAdapter.addTab(bar.newTab().setCustomView(getTabIndicator(getString(R.string.tle_tab_home), R.drawable.ic_menu_home)), FragmentAccueil.class, null);
   _tabsAdapter.addTab(bar.newTab().setCustomView(getTabIndicator(getString(R.string.tle_tab_directory), R.drawable.tab_list_icon)), ContainerFragmentAnnuaire.class, null); 
```

ContainerFragmentAnnuaire 是一个包含片段的布局

例如对于手机，您将创建此布局

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <fragment class="com.example.android.ContainerFragmentAnnuaire"
              android:id="@+id/list_frag"
              android:layout_width="match_parent"
              android:layout_height="match_parent"/>
</FrameLayout> 
```

对于**平板电脑**，您将创建这个

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="horizontal"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:id="@+id/frags">
  <fragment class="com.example.android.ContainerFragmentAnnuaire"
            android:id="@+id/list_frag"
            android:layout_width="@dimen/titles_size"
            android:layout_height="match_parent"/>
  <fragment class="com.example.android.ContainerFragmentDetail"
            android:id="@+id/details_frag"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />
</LinearLayout> 
```

只需在好文件夹中添加布局

res/layout/layout.xml 用于**手机**

**用于平板电脑**的 res/layout-large/layout.xml

# css - 如何更改 div CSS 的特定类中的链接颜色

> ID：10845517
> 
> 赞同：41
> 
> 时间：2012-06-01T06:36:37.840
> 
> 标签：css, class, colors, hyperlink, hover

在我的页面中设置了以下 CSS：

```
a:link {
    color: #0094DE;
    text-decoration: none;

}
a:visited {
        text-decoration: none;
color: #0094DE;

}
a:hover {
text-decoration: underline;
color: #DD127B;

} 
```

我想更改分配给它的类的 div 内的链接颜色。我尝试了以下方法：

```
register:link{color:#FFFFFF;
        } 
```

其中 register 是我要更改链接颜色的 div 的名称。我怎样才能做到这一点？另外如何更改同一div上悬停链接的颜色？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-01T06:40:03.340

```
.register a:link{
    color:#FFFFFF;
} 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2015-05-18T07:05:57.570

它可以是这样的：

```
a.register:link { color:#FFF; text-decoration:none; font-weight:normal; }
a.register:visited { color: #FFF; text-decoration:none; font-weight:normal; }
a.register:hover { color: #FFF; text-decoration:underline; font-weight:normal; }
a.register:active { color: #FFF; text-decoration:none; font-weight:normal; } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-06T16:58:03.460

像这样的东西怎么样......

```
a.register:link{
    color:#FFFFFF;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-04-27T12:04:01.060

我认为对OP实际要求的内容存在混淆。

这个解决方案：

```
a.register:link {color:#FFF} 
```

...更改类为“注册”的链接的颜色。但这不是OP所要求的。

而这个解决方案：

```
.register a:link {color:#FFFFFF;} 
```

...更改本身没有类但放置在具有“注册”类的 div 内的链接的颜色。这就是OP所要求的。

这两个答案都在这里被赞成，但只有第二个是对原始问题的正确答案。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-01T10:31:42.533

```
#register a:link
{
color:#fffff;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-01T11:54:07.357

如果您想在`a:hover`不是所有标签上添加 CSS，而是在某些标签上添加 CSS，最好的方法是使用 class. 将类赋予您想要赋予样式的所有标签 - 请参见下面的示例。

```
<style>
a.change_hover_color:hover { 
    color: white !important;
}
</style>

<a class="change_hover_color">FACEBOOK</a>
<a class="change_hover_color">GOOGLE</a> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-08T21:09:30.480

我认为您想将, 放在CSS 文件中的( , )`a`前面。我可以摆脱那种可怕的默认蓝色链接颜色的唯一方法。我不确定这对于我们拥有的早期版本的浏览器是否有必要，因为它应该可以在没有`a:link``a``a:link``a`

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-09-03T07:44:06.757

小尺寸版本：

```
#register a:link {color: #fff} 
```

# tdd - 由外而内不同层的 BDD 解决方案测试

> ID：10845522
> 
> 赞同：2
> 
> 时间：2012-06-01T06:37:12.593
> 
> 标签：tdd, bdd, xunit.net

最近，我开始阅读 BDD 和 TDD 并迷上了。我迷失在大量杂乱无章的信息来源和关于什么是最好什么不是什么的不同意见中。最后我选择了[xBehave & xUnit](https://bitbucket.org/adamralph/xbehave.net/wiki/Home "xBehave")。我喜欢流畅的语法以及使用 Fluent Assertions 和 Fluent Validation 轻松定义行为。

我也在尝试通过我正在学习的测试项目来实现洋葱架构。这是我的场景：为了简单起见，该项目是一个产品跟踪器。我可以创建产品并跟踪谁拥有它。我想实现两个规范：

*   当创建没有名称的新产品时，应显示错误
*   如果在没有分配所有者的情况下创建新产品，则应显示错误。

我创建了实例化一个新产品和一个新产品服务的规范，而新产品服务又创建了产品。规范通过并且正在验证，现在问题是：

1.  如何测试我的 ProductRepository 类？我是接下来测试它还是模拟它并先完成所有规范，然后再回来测试存储库类？
2.  我应该在第一个规范中嘲笑 ProductService 类吗？
3.  这是在单元测试级别完成的吗？我应该创建一个单元测试类吗？
4.  测试存储库不会使其成为集成测试吗？

到目前为止，我还没有 UI，我正在为域、服务和基础架构层编写规范。

*   我需要使用 watin 进行 UI 测试吗？
*   切换到 watin/specflow 会更有意义，并且会节省从上到下进行全面测试层的努力吗？

这是我研究的规格之一：

```
[Scenario]
public void creating_new_product_without_a_name_should_throw_error()
{
    var productService = default(IProductService);
    var action = default(Action);
    _
        .Given("a new product", () =>
            productService = new ProductService() as IProductService)

        .When("creating the new product without a name", () =>
            action = () => productService.Create(new Product()))

        .Then("it should should display an error", () =>
            action.ShouldThrow<ValidationException("Name is required."));
} 
```

提前感谢您的回复，如果您正在回答此线程，请提供一些材料/文章/示例代码，以说明您的建议为什么会更好地遵循。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:36:17.673

听起来您正在测试小部件，然后计划将它们粘合在一起形成大的东西。这是（IMO，againt）而不是 TDD（当然也不是 BDD）：您不会让测试驱动设计/架构。

首先，不要过多考虑设计。不要考虑洋葱架构，不要考虑存储库，不要考虑服务。

首先编写一个测试，从头到尾验证整个解决方案。使该测试尽可能小。首先，只需验证是否显示了一个标签。然后编写您能想到的最小解决方案以使测试通过。然后编写另一个测试和解决方案。

过了一会儿，看看代码（生产，但也测试）以找到责任。那里有服务的雏形吗？提取它！但不要过早地这样做。让代码告诉你它想要的样子。

开始考虑领域（产品、所有者等）并尽早将其包含在您的代码中。使用持久性（存储库）稍等片刻，但不要太久。

继续在这个级别（端到端）进行测试。必要时添加微测试。所以我对“我如何测试我的 ProductRepository/Service 类”这个问题的回答对你来说是一个问题：你需要吗？或者它是否被端到端测试充分覆盖？如果不是，为什么？

# mysql - 客户端隐藏/显示功能

> ID：10845523
> 
> 赞同：1
> 
> 时间：2012-06-01T06:37:21.110
> 
> 标签：mysql, html, perl

我在 HTML 页面上有一个链接，它调用 perl 脚本。Perl 脚本将从 mysql 数据库中获取数据并显示在 HTML 页面上。

```
<a href = cgi-bin/customers.pl> show all customers </a> 
```

HTML页面中有一些过滤器。

仅限 chennai 客户 - 当最终用户点击此内容时，只有 chennai 客户应显示

仅限孟买客户 - 当最终用户点击此内容时，只有孟买客户应显示

我是否需要为所有这些客户运行单独的 mysql 查询，或者我可以在客户端隐藏/再次显示它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:47:17.083

the question is to query all data and send to client or to query just the necessary and sent to client.

the answer depends on your data size. if your data set is small, i suggest to query all at once and hide and show at client.

if your data set is large, then just query the needed ones.

besides the current data set size, think about the growth rate. how fast and how big does your data grow. all those will change how you implement it.

# actionscript-3 - 转换 xmlElements XML 的简单方法

> ID：10845528
> 
> 赞同：0
> 
> 时间：2012-06-01T06:38:08.000
> 
> 标签：actionscript-3, sdk, adobe-indesign

我正在为 flex 中的 indesign 进行扩展。我需要将 xmlElements 转换为 xml。当您将文件导出为 xml 时，您会得到一个结构良好的 xml 文件。但是我怎样才能轻松地将 exmlElements 转换为在我的代码中使用呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:23:55.597

您可以从 xmlElement 调用 exportFile。话虽如此，您应该能够获得一个很好的 xml 结构。

这是一个简单的测试：

```
app.activeDocument.xmlElements[0].xmlElements[-1].exportFile ( ExportFormat.XML , File ( Folder.desktop + "/test.xml" ) ); 
```

然后输出给我：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Article>dssds</Article> 
```

洛伊克

# android - Android：需要帮助从 .GPX 文件中解析数据

> ID：10845532
> 
> 赞同：3
> 
> 时间：2012-06-01T06:38:31.100
> 
> 标签：android, xml-parsing, gpx

我按照教程学习从 gpx 文件（位于我的原始文件夹中）中解析数据，并且由于某种原因，没有数据被解析到 NodeList 中。这是我的 XMLParser 类

```
package bry.Bicker.OjaiHiking;

import java.io.IOException;
import java.io.StringReader;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import android.util.Log;

public class XMLParser {

public Document getDomElement(String xml) {
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(xml));
        doc = db.parse(is);

    } catch (ParserConfigurationException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    } catch (SAXException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    } catch (IOException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    }
    // return DOM
    return doc;
}

public String getValue(Element e, String str) {
    NodeList n = e.getElementsByTagName(str);
    return this.getElementValue(n.item(0));
}

public final String getElementValue(Node elem) {
    Node child;
    if (elem != null) {
        if (elem.hasChildNodes()) {
            for (child = elem.getFirstChild(); child != null; child = child
                    .getNextSibling()) {
                if (child.getNodeType() == Node.TEXT_NODE) {
                    return child.getNodeValue();
                }
            }
        }
    }
    return "";
}

} 
```

这是我尝试使用该类来解析文件的方式：

```
public void displayPoints(MapView map, Context context) {
    final String KEY_TRKPT = "trkpt";
    final String KEY_LAT = "lat";
    final String KEY_LON = "lon";

    XMLParser parser = new XMLParser();
    Document doc = parser.getDomElement(getString(R.raw.test));

    NodeList n1 = doc.getElementsByTagName(KEY_TRKPT);

    if (n1.getLength() > 0) {
        int[] lat = new int[n1.getLength()];
        int[] lon = new int[n1.getLength()];

        for (int i = 0; i < n1.getLength(); i++) {
            org.w3c.dom.Element e = (org.w3c.dom.Element) n1.item(i);
            lat[i] = Integer.parseInt(parser.getValue(e, KEY_LAT));
            lon[i] = Integer.parseInt(parser.getValue(e, KEY_LON));
        }
    } else {
        Log.i("Debug", "XML Parsing error. No data in nodelist.");
    }
} 
```

并且 GPX 文件是从应用程序“MyTracks”中导出的。

我没有收到任何错误，但我的消息指出“XML 解析错误。节点列表中没有数据。” 被展示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-25T09:10:18.420

那里有一些有用的库——包括我的。[请参阅StackOverflow 上其他问题的](https://stackoverflow.com/questions/18660787/parsing-local-gpx-file-in-android/34975010#34975010)答案。基本上，我的库提供了两种解析 GPX 文件的方法：一旦获得/创建 GPXParser 对象（`mParser`在下面的示例中），您就可以直接解析 GPX 文件

```
Gpx parsedGpx = null;
try {
    InputStream in = getAssets().open("test.gpx");
    parsedGpx = mParser.parse(in);
} catch (IOException | XmlPullParserException e) {
    e.printStackTrace();
}
if (parsedGpx == null) {
    // error parsing track
} else {
    // do something with the parsed track
} 
```

或者您可以解析远程文件：

```
mParser.parse("http://myserver.com/track.gpx", new GpxFetchedAndParsed() {
    @Override
    public void onGpxFetchedAndParsed(Gpx gpx) {
        if (gpx == null) {
            // error parsing track
        } else {
            // do something with the parsed track
        }
    }
}); 
```

欢迎投稿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-27T22:18:53.957

这个开源库目前正在一个安卓应用程序中使用，包括智能手机端和智能手表端

[https://plus.google.com/u/0/communities/110606810455751902142](https://plus.google.com/u/0/communities/110606810455751902142)

使用示例

```
Gpx gpx = GpxFileIo.parseIn( "SomeGeoCollection.gpx" ) ;

for (Point pt: gpx.getPoints( ) )
{
    Location loc = new Location( pt.getLatitude( ), pt.getLongitude( ) ) ;
    if (pt.getElevation( ) != null) loc.setElevation( pt.getElevation( ) ) ;
} 
```

# qt - QML 窗口最小宽度

> ID：10845538
> 
> 赞同：3
> 
> 时间：2012-06-01T06:39:09.490
> 
> 标签：qt, text, qt4, qml

我正在使用 QML 和下面的代码创建一个窗口。如何为窗口设置最小宽度，以便我不能调整小于我定义的值？

```
Rectangle {
    color: red;
    width: 300
    height: 100
}

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    QDeclarativeView view;

    view.setSource(QUrl::fromLocalFile("QML/main.qml"));
    view.setResizeMode(QDeclarativeView::SizeRootObjectToView);
    view.show();

    return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-26T11:42:32.297

我不知道您使用的是哪个版本的 QML，但如果您可以使用 QtQuick 2，那么您将`ApplicationWindow`在 QML 中设置为您的顶级项目，如下所示：

```
import QtQuick 2.0

ApplicationWindow {
    id: appWnd
    minimumWidth: 300
    minimumHeight: 300
} 
```

您还可以查看每个特定 QML 类型的`implicitWidth`属性`implicitHeight`，并将`appWnd`minimumWidth/Height 设置为包含布局的implicitWidth/Height。例如：

```
import QtQuick 2.0
import QtQuick.Layouts 1.0
import QtQuick.Controls 1.0

ApplicationWindow
{
    minimumWidth: gridLayout.implicitWidth
    minimumHeight: gridLayout.implicitHeight
    height: 500
    width: 500

    color: "gold"

    GridLayout {
        id: gridLayout
        anchors.centerIn: parent
        columns: 2

        Button {text: "Push me" }
        Button {text: "Push me" }
        Button {text: "Push me" }
        Button {text: "Push me" }
        Button {text: "Push me" }
        Button {text: "Push me" }
    }

} 
```

这不会让应用程序窗口缩放小于它包含的控件（因为隐式布局的宽度和高度等于包含的项目隐式宽度和高度的总和）。

您还可以使用 绑定到布局的绝对最小宽度`gridLayout.Layout.minimumWidth`，如[文档中所述](http://doc.qt.io/qt-5/qtquicklayouts-overview.html#connecting-windows-and-layouts)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T06:47:10.473

```
view.setMinimumSize(QSize(min-width,min-height)); 
```

# android - Android：帮助处理屏幕方向

> ID：10845543
> 
> 赞同：0
> 
> 时间：2012-06-01T06:39:34.550
> 
> 标签：android, orientation

我正在开发一个动态创建控件的 Android 应用程序。我做了这种类型的编码。

```
TextView lblTitle = new TextView(myContext);
relLayoutHeader.addView(lblTitle);

@Override
public void onConfigurationChanged(Configuration newConfig) {
super.onConfigurationChanged(newConfig); 
   if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
       lblTitle.settext("LandScape");
   } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
       lblTitle.settext("Portrait");
} 
```

在清单文件中：

```
android:configChanges="orientation|keyboardHidden" 
```

当我将方向从纵向更改为横向时，效果很好。但是从横向到纵向的应用程序崩溃了。强制关闭。

对我的代码有什么建议吗？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:58:10.870

您需要在 重新初始化您的视图`onConfigurationChanged`。

```
// used in onCreate() and onConfigurationChanged() to set up the UI elements
public void InitializeUI() {
    // get views from ID's
    relLayoutHeader = _______Initialise_here;
    TextView lblTitle = new TextView(myContext);
    relLayoutHeader.addView(lblTitle);
    // etc... hook up click listeners, whatever you need from the Views
}

// Called when the activity is first created.
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    InitializeUI();
}

// this is called when the screen rotates.
// (onCreate is no longer called when screen rotates due to manifest, see:
// android:configChanges)
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    setContentView(R.layout.main);

    InitializeUI();
    //And then do your stuff
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
           lblTitle.settext("LandScape");
   } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
       lblTitle.settext("Portrait");
   }
} 
```

# jpa - 内部异常：java.sql.SQLException：无效状态，Connection 对象已关闭

> ID：10845545
> 
> 赞同：3
> 
> 时间：2012-06-01T06:39:47.723
> 
> 标签：jpa, eclipselink

我有一个使用 Eclipse Persistence Services - 2.1.1.v20100817-r8050 的 JSF 应用程序，有时会出现以下错误：

```
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.1.1.v20100817-r8050):    org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLException: Invalid state, the Connection object is closed.
Error Code: 0
Call: SELECT XXXXX FROM XXXXX
bind => [/Home/Footer/]
Query: ReadAllQuery(name="WWW.find" referenceClass=WWW sql="SELECT XXXXX FROM XXXXX") 
```

我不知道是什么原因造成的。在“return q.getResultList();”的以下函数中抛出异常 线。

```
public List<WWW> find(String url) {
    }
    EntityManager em = getEntityManager();
    try {
        Query q = em.createNamedQuery("WWW.find");
        q.setParameter("url", url);
        return q.getResultList();
    } finally {
        em.close();
    }
} 
```

* * *

我们有 SQL Server 2005 并且数据库没有关闭。这是最近不断发生的事情。下面是我们在 persistence.xml 文件中设置的属性。对此有何改变有何评论？

```
<properties>
  <property name="javax.persistence.jdbc.password" value="password"/>
  <property name="javax.persistence.jdbc.user" value="user"/>
  <property name="javax.persistence.jdbc.driver" value="net.sourceforge.jtds.jdbc.Driver"/>
  <property name="javax.persistence.jdbc.url" value="jdbc:jtds:sqlserver://SERVER:1433/DB"/>
  <property name="eclipselink.ddl-generation" value="none"/>
  <property name="eclipselink.jdbc.timeout" value="20"/>
  <property name="eclipselink.jdbc.connections.wait-timeout" value="20"/>
  <property name="javax.persistence.query.timeout" value="20"/>
  <property name="eclipselink.allow-zero-id" value="true"/>
</properties> 
```

这是我编辑的课程 public class WWWJpaController {

```
public WWWWJpaController() {
    emf = Persistence.createEntityManagerFactory("properties");
}

public WWWWJpaController(String unitName) {
    emf = Persistence.createEntityManagerFactory(unitName);
}

private EntityManagerFactory emf = null;

public EntityManager getEntityManager() {
    return emf.createEntityManager();
}

public List<WWW> find(String url) {
    EntityManager em = getEntityManager();
    try {
        Query q = em.createNamedQuery("WWW.find");
        q.setParameter("url", url);
        return q.getResultList();
    }finally{
        em.close();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:37:13.763

My guess is your database connection has timed out, or your database is down. You may need to retry the query, or re-connect your session.

How have you configured your connection pooling and what database are you using?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-18T14:35:49.957

正如 BalusC 在他的评论中指出的那样，也许您的应用服务器无法重新连接到数据库，每次备份完成时都会发生这种情况。

您可以按照[Jboss 的此链接中的说明重新连接服务器](https://stackoverflow.com/a/32023627/8084118)

# jquery - Jquery验证引擎：没有验证的表单提交

> ID：10845551
> 
> 赞同：1
> 
> 时间：2012-06-01T06:40:01.257
> 
> 标签：jquery, jquery-validation-engine, ajax-forms

我正在为我的一种表单使用 Jquery 验证引擎（https://github.com/posabsolute/jQuery-Validation-Engine）。验证运行良好，但即使字段值不符合验证，也无法阻止表单提交：

我有一个时事通讯 Sigunp 表格，如下所示：

```
<form id="submit-newsletter" method="POST" action="">
   <input type="text" class="searchform validate[required, custom[email]]" value="Enter Your Email" id="email" name="nw-email" onblur="defaultInput(this);" onfocu    s="clearInput(this);" />
   <input type="hidden" id="newsletter" name="newsletter" value="nl" />
   <input type="submit" class="submit" title="Signup" value="Sign Up" name="newsletter-signup" onclick="newsletterSubscribe(event);" />
</form> 
```

该表单通过ajax提交如下：

```
// Newsletter Subscription Without Refresh

function newsletterSubscribe(e) {
  e.preventDefault();
  var dataString = 'nw-email=' + $('input[name=nw-email]').val() + '&newsletter=' + $('input[name=newsletter]').val();
  $.ajax({
    type: "POST",
    url: "/newsletter/",
    data: dataString,
    success: function () {
      $('#newsletter-box').html('<div id="message"></div>');
      $('#message').html('<img width="18px" height="18px" src="/static/img/smtick.png" /><h5>Thank You !</h5>')
      .append('<p>We have recieved your request. Please Check your mail for activation instructions. You will start recieving our newsletter once you have verified t    his email address.</p>')
      .hide()
      .fadeIn(1200);
      }
  });
  return false;
} 
```

验证触发器如下：

```
$(document).ready(function() {
  $('#submit-newsletter').validationEngine();
}); 
```

现在我可以看到验证错误消息，但是如果我按下提交按钮，无论值不是电子邮件地址，都会提交表单。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T06:51:06.860

将代码移动到单击事件处理程序中并使用 jquery 绑定它。然后使用验证引擎 validate 方法测试您的表单是否有效。

```
$(function(){
    $('#newsletter-signup').click(function(e){
         e.preventDefault();

         //if invalid do nothing
         if(!$("#submit-newsletter").validationEngine('validate')){
         return false;
          }

      var dataString = 'nw-email=' + $('input[name=nw-email]').val() + '&newsletter=' + $('input[name=newsletter]').val();
      $.ajax({
        type: "POST",
        url: "/newsletter/",
        data: dataString,
        success: function () {
          $('#newsletter-box').html('<div id="message"></div>');
          $('#message').html('<img width="18px" height="18px" src="/static/img/smtick.png" /><h5>Thank You !</h5>')
          .append('<p>We have recieved your request. Please Check your mail for activation instructions. You will start recieving our newsletter once you have verified t    his email address.</p>')
          .hide()
          .fadeIn(1200);
          }
      });
      return false;
    })
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T06:47:16.627

**如果您将提交放在表单中，它会尝试提交而不考虑您的验证..它主要发生在 mozilla 中..**

**尝试将提交放在表单之外**

```
<form id="submit-newsletter" method="POST" action="">
   <input type="text" class="searchform validate[required, custom[email]]" value="Enter Your Email" id="email" name="nw-email" onblur="defaultInput(this);" onfocu    s="clearInput(this);" />
   <input type="hidden" id="newsletter" name="newsletter" value="nl" />
</form>
   <input type="submit" class="submit" title="Signup" value="Sign Up" name="newsletter-signup" onclick="newsletterSubscribe(event);" /> 
```

**甚至你可以在表单外创建一个提交按钮..**

```
<button class="submit" title="Signup" value="Sign Up" name="newsletter-signup" onclick="newsletterSubscribe(event);" /> 
```

希望这有效:)

# c# - 结束 else if 语句 C#

> ID：10845556
> 
> 赞同：2
> 
> 时间：2012-06-01T06:40:29.013
> 
> 标签：c#, if-statement

我不知道在这种情况下还能使用什么，而是使用 if 语句。

我想做的是`string direction;`从 Windows 窗体中获取一个值并检查它是否具有我正在寻找的值。然后检查`turtleDir`which 是否是指示方向的字符串值`turtleDir`。

问题出现在 else if 语句中，当`turtleDir`它`lookingleft`执行所有 else if 语句时。我想要它做的是在它完成 else if 语句之后它需要停止并等待下一个命令。不经过所有的陈述。

有人可以告诉我如何解决它以及我做错了什么吗？

这是代码：

```
else if ( Program.form.direction == "right" ) 
{
   if ( turtleDir == "left" )
   {
      angle = -1.6f;
      turtleDir = "lookingLeft";
      Program.form.direction = "";
   }
   else if ( turtleDir == "lookingLeft" )
   {
      angle = 3.15f;
      turtleDir = "lookingDown";
   }
   else if ( turtleDir == "lookingDown" )
   {
      angle = 1.6f;
      turtleDir = "lookingRight";
   }
   else if ( turtleDir == "lookingRight" )
   {
      angle = 0.0f;
      turtleDir = "lookingUp";   
   }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T06:45:14.607

您也可以对字符串使用`switch`语句：

```
switch (turtleDir) {
    case "left":
        angle = -1.6f;
        turtleDir = "lookingLeft";
        Program.form.direction = "";
        break;
    case "lookingLeft":
        angle = 3.15f;
        turtleDir = "lookingDown";
        break;
    // other cases
} 
```

这样，`switch`在您的指令完成后，块总是会退出。`case default:`您还可以通过在末尾添加 a 来指定当字符串与这些值都不匹配时要执行的操作。请记住，这些案例中的每一个都需要由一个`break`语句终止（或`return`/`throw`但我认为您在这种情况下不需要这些）。

如果仍然执行每个案例，则您的问题出在其他地方。如果一个方法包含此代码并以 eg 开头被`turtleDir == "left"`调用，则该方法的每次连续调用都将`turtleDir`循环，直到每个案例都已执行并`turtleDir`以最终值结束`"lookingUp"`。因此，请查看您的控制流，并可能跟踪您是否已经执行了此检查。也许跟踪经过的时间并`turtleDir`仅在它处于特定状态一段时间后进行更改（我不知道您的要求）。

**编辑：**您应该`Program.form.direction = ""`在每个`case`语句中设置。这就是为什么您的代码会一遍又一遍地执行。另外，如果没有输入方向，也要清除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:42:42.303

你可以使用一个空的`return;`- 声明，但你也离开了你的方法......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T06:46:26.467

使用开关

```
switch (turtleDir)
{
    case "left":
        angle = -1.6f;
        turtleDir = "lookingLeft";
        Program.form.direction = "";
        break;

    case "lookingLeft":
        angle = 3.15f;
        turtleDir = "lookingDown";
        break;

    case "lookingDown":
        angle = 1.6f;
        turtleDir = "lookingRight";
        break;

    case "lookingRight":
        angle = 0.0f;
        turtleDir = "lookingUp";   
        break;

    default:
        // Optional, but place any actions if non of the above is matched
        break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T07:34:10.200

这里还有**其他事情**正在发生......

将只执行 IF/ELSE-IF 语句的一个分支。出于可读性原因，您可能希望重构为 SWITCH 语句；但**不是因为它会改变你的行为**。

看看这段代码：

```
 if(0 == 0) { Console.WriteLine("Branch 1"); }
    else if(true==true) { Console.WriteLine("Branch 2"); }
    else if(false==false) { Console.WriteLine("Branch 3"); } 
```

所有条件都为真。第一个执行。只有第一个。

在这段代码中 - 只有后两个是真的： if(0 == 2) { Console.WriteLine("Branch 1"); } else if(true==true) { Console.WriteLine("Branch 2"); } else if(false==false) { Console.WriteLine("Branch 3"); }

只有第二个执行。

如果条件为真，一系列 else-if 将不会全部执行。

我的*猜测*是，您正在快速循环执行此操作，并且下一次迭代正在进入 IF 逻辑并执行下一个分支。您可能需要发布更多代码，以便针对您的特定情况获得更多有用的答案。

恕我直言，追踪这一点的最佳方法是在 IF 逻辑的开头放置一个断点，并一次执行一个单步执行代码。您应该看到它只进入一个 ELSE-IF 分支并退出，并且您可以看到它是否/为什么重新进入。

最后，SWITCH 语句也不允许您隐式执行多个分支。

```
 switch(test)
    {
        case "one":
            Console.WriteLine("Branch 1");
        case "two":
            Console.WriteLine("Branch 2");
    } 
```

那甚至不会编译。我相信在 C/C++ 中，除非您明确添加了 break，否则您可能会遇到 case 语句；或类似的控制语句。在 C# 中，情况并非如此。

# hibernate - 检查当前日期是否介于开始日期和结束日期之间

> ID：10845559
> 
> 赞同：1
> 
> 时间：2012-06-01T06:40:46.140
> 
> 标签：hibernate, grails, groovy

我正在 Grails 中做一些工作。我的域类（简单消息）由开始日期和结束日期组成。我只想在当前日期（现在）在开始日期和结束日期之间时向用户显示“消息”，即只有当今天在开始日期和结束日期之间时，用户才能看到消息。另请注意，我不想要任何与时间相关的计算。

这是域类：

```
class SimpleMessage
{
    String message
    Date startDate
    Date endDate
} 
```

这是我的服务中定义的提取有效消息的方法：

```
def GetLiveMessages()
{
    def coTimeStamp = new Date().clearTime().toTimestamp()

    def c = SimpleMessage.createCriteria()

    def coCurrentMessages = c.list
    {
        ge("startDate", coTimeStamp) 
        le("endDate", coTimeStamp)
    }

    return coCurrentMessages
} 
```

coCurrentMessages 总是返回大小为 0。我添加了有效日期的记录（开始日期 - 2012 年 6 月 1 日和结束日期 2012 年 6 月 2 日），但仍然返回 0（今天 - 2012 年 6 月 1 日）。令人惊讶的是，如果我删除第二个约束“le”，我会正确获得消息记录。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T07:00:51.353

如果上面使用的 API 类似于本机 Hibernate Restrictions API（我猜是这样，因为它会更合乎逻辑），那么您只是`ge`在应该使用`le`的时候使用，反之亦然：

```
le("startDate", coTimeStamp) // startDate <= current date
ge("endDate", coTimeStamp) // endDate >= current date 
```

# java - Java:XML 解析

> ID：10845562
> 
> 赞同：0
> 
> 时间：2012-06-01T06:40:57.803
> 
> 标签：java, xml

我有如下的xml文件，

```
<CHPkt xmlns="Smartscript/EmarSchema">  

    <CHInfo>
        <StoreId>1800</StoreId>

        <CHId>DB439A79-3D6F-4D25-BE0A-C4692978C072</CHId>

        <CHName>Test</CHName>

        <Address>
            <Address1>Test Address</Address1>           
        </Address>      

    <DrugRounds>
        <RoundTime>09:00</RoundTime>            

        <RoundTime>13:00</RoundTime>            

        <RoundTime>17:00</RoundTime>
    </DrugRounds>
    </CHInfo>
</CHPkt> 
```

如何获取具有相同名称的标签的值，我的代码如下，

```
public class ReadXml {

    public static void main(String[] args){
            try{
                File xmlFile = new File("/home/jayakumar/Desktop/SmartScript.XML");
                DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
                DocumentBuilder builder = factory.newDocumentBuilder();
                Document document = builder.parse(xmlFile);     

                NodeList nodeList1 = document.getElementsByTagName("CHInfo");
                System.out.println("######################################");
                for(int i =0;i<nodeList1.getLength();i++){
                    org.w3c.dom.Node node = nodeList1.item(i);
                    if(node.getNodeType()== org.w3c.dom.Node.ELEMENT_NODE){
                        Element element = (Element) node;
                        System.out.println("StoreId : " + getTagValue("StoreId", element));
                        System.out.println("CHId : " + getTagValue("CHId", element));
                        System.out.println("CHName : " + getTagValue("CHName", element));
                        System.out.println("Address : " + getTagValue("Address1", element));                                        
                    }

                    NodeList nodeList2 = document.getElementsByTagName("DrugRounds");
                    System.out.println("-------------->"+"DrugRounds");             
                    for(int j =0;j<nodeList2.getLength();j++){
                        org.w3c.dom.Node subNode = nodeList2 .item(j);
                        Element e = (Element) subNode;                  
                        System.out.println("RoundTime : "+getTagValue("RoundTime", e));
                        System.out.println("RoundTime : "+getTagValue("RoundTime", e));
                        System.out.println("RoundTime : "+getTagValue("RoundTime", e));                 
                    }               
                }

            }catch (Exception e) {
                System.out.println(e.getMessage());
            }
        }

        private static String getTagValue(String sTag, Element element) {
            NodeList nlList = element.getElementsByTagName(sTag).item(0).getChildNodes();        
            Node nValue = (Node) nlList.item(0);
            return nValue.getNodeValue();
        }
    } 
```

我无法提取第二个和第三个 Roudtimes 的值。如何解析具有相同名称的标签

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:57:55.040

为什么不检查它是否有任何子节点然后从中获取值

```
for (int j = 0; j < nodeList2.getLength(); j++) {
    org.w3c.dom.Node subNode = nodeList2.item(j);
    NodeList childNodes = subNode.getChildNodes();
    for(int iDx = 0; iDx < childNodes.getLength(); iDx++){
    if(childNodes.item(iDx) instanceof Element){
        Element e = (Element) childNodes.item(iDx);
        System.out.println("RoundTime : "+ e.getFirstChild().getNodeValue());
    }
} 
```

# jquery - 使用jQuery在悬停时向li元素的子元素添加类

> ID：10845574
> 
> 赞同：1
> 
> 时间：2012-06-01T06:42:43.317
> 
> 标签：jquery, html, hover, html-lists, addclass

**问题：** 我想在 li 元素悬停时为其子元素添加一个类。

**HTML 代码：**

```
<li class="active">
    <a href="index.html" title="Homepage">Homepage<i class="icon-home"></i></a>
</li> 
```

**jQuery代码：**

```
<script type="text/javascript">
    $(document).ready(function()
    {
        $('li[ class="active" ]').hover(
            function(){ $(this).addClass('icon-white') },
            function(){ $(this).removeClass('icon-white') }
        )
    });
</script> 
```

**期望的结果：**

```
<li class="active">
    <a href="index.html" title="Homepage">Homepage<i class="icon-home icon-white"></i></a>
</li> 
```

**将类添加到特定元素的代码：**

```
<script type="text/javascript">
    $(document).ready(function()
    {           
        if ($('#main-nav > li').hasClass('active') == true)
        {
            $("a > i", this).addClass('icon-white');
        }
    });
</script> 
```

**更新（最终解决方案）：**

```
<script type="text/javascript">
    $(document).ready(function()
    {
        $('#main-nav li').hover(function() 
        {
            if ($(this).hasClass('active') != true)
            {
                $('a', this).find('i').toggleClass('icon-white');   
            }
        });

        $("#main-nav li.active > a > i").addClass('icon-white');
    });
</script> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T06:44:29.583

```
$(document).ready(function() {
    $('li.active').hover(
    function() {
        $('a', this).addClass('icon-white');
    }, function() {
        $('a', this).removeClass('icon-white');
    });
}); 
```

**[DEMO 1](http://jsfiddle.net/thecodeparadox/qzKzd/1/)**

Also can write (Its better)

```
$('li.active').hover(
function() {
    $('a', this).toggleClass('icon-white');
}); 
```

**[DEMO 2](http://jsfiddle.net/thecodeparadox/QStkd/96/)**

Using jQuery **[`.on()`](http://api.jquery.com/on)** hover:

```
$(document).ready(function() {
    $('li.active').on('hover',
    function() {
        $('a', this).toggleClass('icon-white');
    });
}); 
```

**[DEMO 3](http://jsfiddle.net/thecodeparadox/qzKzd/1/)**

**According to comment**

### How do I add class to `i`?

```
$('i', this).addClass('icon-white'); 
```

ans similarly for `.removeClass()` or `.toggleClass()`.

**According to edit**

```
$(document).ready(function(){          
     $("li.active > a > i").addClass('icon-white');
}); 
```

**[DEMO 4](http://jsfiddle.net/thecodeparadox/3f3kr/2/)**

**Combining with hover:**

```
$("li.active > a > i").addClass('icon-white');

$('li.active').hover(
function() {
    $('a', this).toggleClass('icon-white');
}); 
```

**[DEMO 5](http://jsfiddle.net/thecodeparadox/3f3kr/5/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T06:47:36.413

```
$('li.active').hover(function() {
  $(this).find('a').toggleClass('icon-white') 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T06:44:41.680

You could do something like ->

```
$(document).ready(function()
  {
    $('li.active').hover(
      function(){ 
        $(this).children("a").addClass("icon-white"); //Add an active class to the anchor
      },
      function() {
        $(this).children("a").removeClass("icon-white"); //Remove an active class to the anchor
      }
   )
 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T07:21:39.823

你走的路是对的......你只需要删除“function（）{ $（this）.removeClass（'icon-white'）}”并将它放在mouseout事件中......就像 -

`$(".active").hover(function () { $(".active a").addClass('icon-white'); });` `$(".active").mouseout(function () { $(".active a").removeClass('icon-white'); });`

如果您有任何疑问，请随时提问 :) 编码快乐！！！！

# django - django 1.4 多对多批量添加

> ID：10845579
> 
> 赞同：31
> 
> 时间：2012-06-01T06:43:19.400
> 
> 标签：django, many-to-many

我想知道对于多对多的关系是否有相当于“全部添加”或“批量创建”的方法，这会减少查询的数量（我会为一长串列表这样做）？

关于这个主题的文档似乎表明这是不可能的：

[https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)

```
**Associate the Article with a Publication:**
a1.publications.add(p1)

**Create another Article, and set it to appear in both Publications:**
a2 = Article(headline='NASA uses Python')
a2.save()
a2.publications.add(p1, p2)
a2.publications.add(p3) 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-06-06T09:34:44.003

如果要将查询集添加到多对多关系模型的批量添加或删除方法：

```
qs = Article.objects.all()
publications = Publications.objects.get(id=1)

publications.article_set.add(*qs)
publications.save()
publications.article_set.remove(*qs)
publications.save() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-01T11:39:54.480

当然有可能！你只需要创建一个显式的[中间表](https://docs.djangoproject.com/en/1.4/topics/db/models/#extra-fields-on-many-to-many-relationships)，然后使用这个模型的`bulk_create`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-09T10:25:07.533

您可以[`RelatedManager.set`](https://docs.djangoproject.com/en/3.0/ref/models/relations/#django.db.models.fields.related.RelatedManager.set)为此使用：

```
a2 = Article(headline='NASA uses Python')
a2.save()
a2.publications.set([p1, p2, p3]) 
```

[文档](https://docs.djangoproject.com/en/3.0/ref/models/relations/#django.db.models.fields.related.RelatedManager.set)还告诉我们，最后不需要打电话`.save()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-16T07:42:12.310

添加组并分配其权限的示例

```
group = Group.objects.create(name='user_manager')
codenames = ['delete_user', 'add_user', 'view_user', 'change_user']
permissions = Permission.objects.filter(codename__in=codenames)
group.permissions.add(*permissions) 
```

# objective-c - 如何设置 WebView 的字体样式？

> ID：10845580
> 
> 赞同：4
> 
> 时间：2012-06-01T06:43:21.687
> 
> 标签：objective-c, cocoa, webview

我正在使用这行代码来设置文本的字体和大小。但这不起作用

```
NSString *abc=@"<html><body style=\"font-family:Verdana; font-size:12px; color:#000000;\"></body></html>";
    [msgWebView setCustomTextEncodingName:abc]; 
```

请让我知道如何在 WebView 中设置文本的字体样式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T00:07:06.827

我认为你以错误的方式接近它。另一种方法是：

```
[[msgWebView preferences] setDefaultFontSize:12];
[[msgWebView preferences] setStandardFontFamily:@"Verdana"]; 
```

# javascript - 避免一遍又一遍地写同一个词

> ID：10845582
> 
> 赞同：1
> 
> 时间：2012-06-01T06:43:26.947
> 
> 标签：javascript, jquery

我对javascript很陌生，所以这个问题听起来可能很愚蠢。但是在变量和函数中替换某些单词的正确语法是什么。例如，我有这个功能：

```
function posTelegram(p){
var data = telegramData;
$("#hotspotTelegram").css("left", xposTelegram[p] +"px");
if (p < data[0] || p > data[1]) {
$("#hotspotTelegram").hide()
} else {
$("#hotspotTelegram").show()
}
}; 
```

有很多重复的“电报”这个词，每次我创建一个新的热点时，我都会手动插入这个词来替换每行中的“电报”。编写该代码的更聪明的方法是什么，以便我只需要编写一次“电报”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:48:26.953

你不能总是避免这种重复（这对所有编程语言都是通用的）。

有时，您可以制作泛型函数或泛型类，例如嵌入所有数据的类：

```
Thing = function(key, xpos) {
    this.$element = $('#hotspot'+key);
    this.xpos = xpos;
};

Thing.prototype.pos = function (p, data) {
    this.$element.css("left", this.xpos[p] +"px");
    if (p < this.data[0] || p > this.data[1]) {
        this.$element.hide()
    } else {
       this.$element.show()
    }
}; 
```

我们可以想象这可以这样调用：

```
var telegramThing = new Thing('telegram', xposTelegram);
...
telegramThing.pos(p, data); 
```

但是，如果没有关于您的确切问题的更多信息，很难做出更具体的提议。

我建议您阅读一些有关 OOP 和 javascript 的内容，因为它可以帮助您使复杂的程序更加清晰、简单和易于维护。例如，在此处使用 Thing 类将启用

*   不要在代码中多次定义“#hotspotTelegram”字符串
*   重用逻辑并避免使用“电报”以外的其他东西制作相同的代码
*   在您的主应用程序逻辑中没有事物逻辑（通常在另一个 Thing.js 文件中）

但不要抽象太多，会适得其反。如果您不使用对象，请尝试保留有意义的变量名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T06:49:41.503

将相似/相关的数据分组到数据结构中，而不是为每个位设置一个变量。

缓存调用jQuery的结果

使用参数

```
function posGeneral(p, word){

  // Don't have a variable for each of these, make them properties of an object
  var data = generalDataThing[word].data; 

  // Don't search the DOM for the same thing over and over, use a variable
  var hotspot = $("#hotspot" + word);
  hotspot.css("left", generalDataThing[word].xpos[p] +"px");

  if (p < data[0] || p > data[1]) {
    hotspot.hide()
  } else {
    hotspot.show()
  }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T06:48:12.800

```
var t = "Telegram";
var $_tg = $('#hotspotTelegram');

$_tg.css("left", "xpos"+t[p] + "px"); // not sure about this line, lol
$_tg.hide();
$_tg.show(); 
```

等等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T06:48:46.643

你可以创建一个选择器作为变量，像这样

```
function posTelegram(p){
  var data = telegramData;
  var $sel = $("#hotspotTelegram");

  $sel.css("left", xposTelegram[p] +"px");
  if (p < data[0] || p > data[1]) {
    $sel.hide()
  } else {
    $sel.show()
  }
}; 
```

# javascript - 在主 div 中创建任意数量的 div，并在运行时使用 jQuery 分配位置

> ID：10845584
> 
> 赞同：1
> 
> 时间：2012-06-01T06:43:51.313
> 
> 标签：javascript, jquery

我想以圆形的形式放置许多 div。我将为 div 使用相对定位。首先，我试图在圆圈周围放置四个 div

div 1 - 前 50，左 100

div 2 - 前 100，左 150

div3 - 前 150，左 100

div 4 - 前 100，左 50

我将在实际情况下计算值并设置它们，但现在没关系。是否可以在外部 div 中创建四个 div（在实际情况下会是一个很大的数字）。但我需要为这些 div 分配不同的顺序 ID，并将它们放在提到的位置。

我将不得不计算然后使用脚本分配顶部和左侧位置。那么您能否展示如何使用脚本分配这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:25:46.790

这确实是一个很好的问题，因为它还需要一些数学背景。

所以，首先，让我们说一下我们要做什么： 0\. 你必须决定圆的中心和它的半径 1\. 我们必须决定在哪个角度，在一个圆上，我们应该放置我们的 div 2 然后我们应该做一个给定角度的函数，为您提供 div 的位置

那么，我们该怎么做呢？

1.  决定哪个应该是圆的中心（如果它必须留在页面的中心

2.  决定半径（也可以根据窗户尺寸计算）

3.  一些三角学：要理解角度迭代，只需将 360° 除以 div 的数量：如果你有两个 div，那么你的角度间隔是 360/2=180（丑陋）。如果你有 10 个 div，你的 intrval 是 36°

很好，现在我们可以开始编码了。

1.  获取中心：我只是在这个[stackoverflow 链接上将你重定向到它](https://stackoverflow.com/questions/210717/using-jquery-to-center-a-div-on-the-screen)

2.  使用相同的代码来确定半径

3.  该函数将 div 的数量、半径、中心作为输入，并返回一个带有 div 坐标的数组。中心是一个 2 位数组（x 和 y）。在函数中我们做了一些调整以输出 div 的实际位置。

.

```
 function getCoords(divNum, radius, center){
   var num= divNum;
   var angleInt= (6.28/num);
   var outArray=[];
   for (i=0;i<divNum;i++){
    outArray.push([(Math.cos(angleInt*i)*radius+center[0]),(Math.sin(angleInt*i)*radius+center[1])]);
   }
  return outArray;
} 
```

好了，完成了，现在您可以使用任何 jquery 方法放置 div，如下例所示：

```
var localization=getCoords(10,200,[400,400]);

var i=1;
for (var element in localization){
    var posTop=localization[element][0];
    var posLeft=localization[element][1];
    var element= $("<div class='inner'>"+i+"</div>");
    $(element).css({ position: "absolute",
            marginLeft: 0, marginTop: 0,
            top: posTop, left: posLeft });
    $("body").append(element);
   i=i+1;

} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:03:25.010

```
<script>
    $(document).ready(function() {
        "use strict";

        var NR_OF_ITTERATIONS = 4,
            RADIUS = 40,
            i,
            $wrapper = $("#wrapper");

        for(i=0;i<NR_OF_ITTERATIONS;i+=1) {
            $wrapper.append(
                $("<div/>")
                    .css({
                        top: /* Top position */,
                        left: /* Left position */
                    });
            );
        }
    };
</script>

<style>
    ​#wrapper > div {
        position: absolute;
        border: 1px solid black;
        width: 40px;
       height: 40px;        
    }​
</style>

<div id="wrapper"></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T07:08:04.413

这是生成div的代码。将您的顶部和左侧样式放在 div 的样式属性中。您可以忽略随机数。我把它用作占位符。

```
 <div id="outterDiv" class="outterDivision"> </div>​

var html = '';

        var i;
        for(i=0;i<=4;i++) {
           var Random_Number = Math.ceil(Math.random()*500+i);
            html +='<div id="inner'+i+'" class="anything" style="top:50px; left:100px;">'+Random_Number+'</div>';         
        }
        $('#outterDiv').html(html); 
```

# c++ - 在基于 Eclipse 的 IDE 中调试 C++ - 是否有类似“循环/循环”之类的东西？

> ID：10845588
> 
> 赞同：3
> 
> 时间：2012-06-01T06:44:07.317
> 
> 标签：c++, eclipse, debugging, gdb, eclipse-cdt

目前我正在使用一个类 Eclipse IDE 和相应的调试透视图，你们中的大多数人可能都很熟悉。在调试代码时，我经常发现自己要遍历多行代码并观察变量并仔细检查一切是否符合预期。

但是假设有这样的事情：

```
1\. important line, e.g. generating a new object;
2\. another important line, e.g. some tricky class method;
3\. for (int i = 0; i < some_limit; ++i)
4\.     some_array[i]++;
5\. more important stuff; 
```

显然我对第 1,2 行和第 5 行发生的事情很感兴趣（我知道这是一个糟糕的例子，但请耐心等待一段时间），但我不想遍历所有数百个（甚至数千个） ) 第 3/4 行的迭代次数。

所以，最后，我的问题是：有没有办法直接跨过 for 循环？我现在所做的是在第 5 行设置一个新断点，并在我到达第 3 行时让程序运行，我相信这不是最佳解决方案。

编辑： ks1322 提出的 Eclipse 实现称为“运行到行”，并映射到 ctrl-r

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:14:08.853

使用`until`命令而不是`next`.

来自[gdb 文档](http://sourceware.org/gdb/onlinedocs/gdb/Continuing-and-Stepping.html)：

> 继续运行，直到到达当前堆栈帧中超过当前行的源代码行。此命令用于避免多次单步执行循环。

如果您将使用`until`而不是`next`，gdb 将只跳过循环一次，这几乎正是您想要的。

# extjs - i18n Support in ExtJS

> ID：10845589
> 
> 赞同：0
> 
> 时间：2012-06-01T06:44:17.850
> 
> 标签：extjs, unicode, internationalization

I'm looking for the support of i18n in the ExtJS,and have seen in the net about reading the resource bundles and replacing the component's labels depends upon the locale. Though I've some doubts

1.  How about the data which got stored in the DB as unicode and I want populate those into ExtJs's component's

2.  Is rendering the labels of the Extjs components into different languages only possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:14:15.200

有一个名为 Ext.ux.Localizer 的扩展

[https://github.com/devotis/Ext.ux.Localizer](https://github.com/devotis/Ext.ux.Localizer)

使用这个组件，您不仅可以通过 localizableProps 翻译标签：

```
localizableProps : {
    // Ext.button
    button : ["text", "tooltip"],
    // Ext.form.field
    checkboxfield : ["fieldLabel", "boxLabel"],
    field : ["fieldLabel"],
    filefield : ["fieldLabel", "buttonText"],
    radiofield : ["fieldLabel", "boxLabel"],
    // Ext.form
    checkboxgroup : ["fieldLabel"],
    fieldcontainer : ["fieldLabel"],
    fieldset : ["title"],
    label : ["text"],
    // Ext.grid
    gridcolumn : ["text"],
    panel : ["title"],
    tooltip: ["html"],
    image: ["src"]
} 
```

您甚至可以通过 localizableColumns 翻译某些列中的数据：

```
localizableColumns: [ //add grid column renderers 
    "status_description", "bounced"
] 
```

它不翻译表单中字段的值。

# mongodb - What is the performance implications of nested hashes in mongodb?

> ID：10845599
> 
> 赞同：0
> 
> 时间：2012-06-01T06:44:59.340
> 
> 标签：mongodb, mongoid, mlab

So I have a very large set of metrics (15GB and growing) that has some of the data in nested hashes. Like so:

```
{
   _id: 'abc0000',
   type: 'foo',
   data: { a: 20, b: 30, c: 3 }
},
... more data following this schema...
{
   _id: 'abc5000',
   type: 'bar'
   data: { a: 1,  b: 2,  c: 4, d: 10 }
} 
```

What is the performance implications when I run a query on the nested hashes? The data inside the hash can't be indexed...or rather, it would be pointless to index it.

I can always reform the data into a flat style `data_a`, `data_b`, etc...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:14:46.303

您可以在嵌套散列中的属性上创建索引。查看[Indexing with dot notation](http://www.mongodb.org/display/DOCS/Indexes#Indexes-IndexingonEmbeddedFields%28%22DotNotation%22%29)了解更多详细信息。如果需要，您还可以创建复合索引，但要注意[并行数组](http://www.mongodb.org/display/DOCS/Multikeys#Multikeys-CaveatswithParallelArrays)的注意事项。基本上，如果您创建一个复合索引，那么只有一个索引值可以是数组，但是，这不应该影响您（从发布的架构来看）。

`data.a`因此，您可以在上`data.b`或`data.a, data.c`根据您的需要创建索引。

# bash - How do I merge FileA.txt and FileB.txt giving FileB.txt overwrite power using a bash script?

> ID：10845601
> 
> 赞同：1
> 
> 时间：2012-06-01T06:45:01.160
> 
> 标签：bash, properties, merge, match

> **Possible Duplicate:**
> [How can I replace lines in a text file with lines from another file based on matching key fields?](https://stackoverflow.com/questions/10828272/how-can-i-replace-lines-in-a-text-file-with-lines-from-another-file-based-on-mat)

I want to merge the following files and I want the contents of FileB.txt to overwrite FileA.txt where there are common lines, but I don't want to completely replace FileA.txt with FileB.txt.

For example:

File A:

```
# cat FileA.txt 
interface.1.type = ethernet
interface.1 = A
interface.1.ip = 192.168.1.1
interface.1.netmask = 255.255.255.0
interface.1.dhcp = false 
```

File B:

```
# cat FileB.txt 
interface.1 = B
interface.1.ip = 192.168.1.1
interface.1.netmask = 
interface.1.dhcp = true
interface.1.dhcp.range = 192.168.1.1,192.168.1.15
interface.1.extraline = 
```

In this case The merge result should be:

```
# cat FileA.txt
interface.1.type = ethernet
interface.1 = B
interface.1.ip = 192.168.1.1
interface.1.netmask = 
interface.1.dhcp = true
interface.1.dhcp.range = 192.168.1.1,192.168.1.15
interface.1.extraline = 
```

So anything before the '=' on each line should be checked and matched between FileA.txt and FileB.txt. If any after the '=' on FileB.txt differs from FileA.txt then whatever is in FileB.txt should be written to FileA.txt.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:34:05.993

试试这个`sort`命令：

```
sort -t= -k1,1 -us FileB.txt FileA.txt 
```

`-t=`：将行拆分为“=”上的字段，因此您正在对键进行排序

`-k1,1`: 按第一个字段排序。这很重要，因为重复（见下文）仅取决于指定的排序字段。

`-u`: 消除重复。如果两行具有相同的密钥，则只保留第一行。

`-s`: 稳定排序。如果两行基于它们的排序字段相同，则在输入中首先看到的行在输出中仍然是最先出现的。

通过`FileB.txt`首先放入输入文件列表，您可以确保 如果它们共享相同的密钥，`FileB.txt`则选择line from 而不是 line from。`FileA.txt`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:22:03.417

这是纯粹的 BASH 方式，一致性和性能被抛到脑后。这是您永远不会在关键应用程序中使用的东西。

如果您在关键应用程序中使用它，请考虑寻找配置库。例如，在 Java 中，Properties 类对此非常有用。虽然这适用于简单的脚本，但您可能需要稍微更改正则表达式。

如果正确转义或引用，属性文件在一行上包含多个“=”并不违法。在这个脚本中它可能会导致问题

```
#!/bin/bash
FILEA="filea.txt"
FILEB="fileb.txt"
RESULT="filec.txt"
:> $RESULT

while read line; do
    ELEM=$(echo $line | perl -pe 's/\s*\=.*?$//gi')
    FILEBLINE=$(grep "^\s*$ELEM" $FILEB)
    if [[ -n $FILEBLINE ]]; then
        echo $FILEBLINE >>$RESULT
    else
        echo $line >>$RESULT
    fi
done < $FILEA 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T11:36:07.493

```
#!/usr/bin/awk -f
BEGIN {
    FS = " = ?"; OFS = " = "
}

NR == FNR {
    attrib[$1] = $2
    printed[$1] = 0
    next
}

(! ($1 in attrib)) {
    print
}

$1 in attrib && $2 != attrib[$1] {
    print $1, attrib[$1]
    printed[$1] = 1
}

END {
    for (i in printed) {
        if (! printed[i]) {
            print i, attrib[i]
        }
    }
} 
```

像这样运行它：

```
$ ./interfacemerge FileB.txt FileA.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T10:32:18.023

```
{
    # print the fileA settings not in fileB
    awk -F= 'NR==FNR {lhs[$1]; next} !($1 in lhs)' fileB.txt fileA.txt

    # then print all of fileB
    cat fileB.txt

    # then write to a new file and overwrite fileA
} > newfile && mv newfile fileA.txt 
```

# java - 在 Web 应用程序中获取当前 URL

> ID：10845606
> 
> 赞同：5
> 
> 时间：2012-06-01T06:45:28.873
> 
> 标签：java, javascript, jsp, jakarta-ee

我正在捕获当前 URL，因为它显示在我的 JSP 页面的浏览器地址栏中，并且没有几个选项可以完成它。

*   在 Servlet 2.4 规范中使用`javax.servlet.include.request_uri`和其他定义。我参考此线程以获取有关它的详细信息[java-httpservletrequest-get-url-in-browsers-url-bar](https://stackoverflow.com/questions/1256562/java-httpservletrequest-get-url-in-browsers-url-bar)。

在我当前的应用程序中，我们将把 web-server 放在我们的应用程序服务器前面，因为这些值似乎没有任何用处。

我有另一种方式来获取 javascript 的帮助， `document.URL`但我不确定它会有多可靠。

我需要获取有关用户位置的详细信息，如果可以使用`getRequestURI()`，它将返回类似`www.abc.com/abc/search.jsp`.

简而言之，我只想捕获浏览器地址栏中的 URL 并将其保存在我的 JSP 页面的隐藏字段中。

我不确定实现这一目标的最佳方法是什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-04-10T12:36:00.513

在 Java 中，您可以这样做：

```
 public static String getCurrentUrl(HttpServletRequest request){

    URL url = new URL(request.getRequestURL().toString())

    String host  = url.getHost();
    String userInfo = url.getUserInfo();
    String scheme = url.getProtocol();
    String port = url.getPort();
    String path = request.getAttribute("javax.servlet.forward.request_uri");
    String query = request.getAttribute("javax.servlet.forward.query_string");
    URI uri = new URI(scheme,userInfo,host,port,path,query,null)
    return uri.toString();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T07:00:58.887

如果您想要一个 javascript 解决方案，您可以使用**window.document.location**对象及其属性：

```
console.log(window.document.location.protocol);
http:
console.log(window.document.location.host);
stackoverflow.com
console.log(window.document.location.port);

console.log(window.document.location.href);
http://stackoverflow.com/questions/10845606/get-current-url-in-webapplication
console.log(window.document.location.pathname);
/questions/10845606/get-current-url-in-webapplication 
```

您可以在 MDN阅读[本文](https://developer.mozilla.org/en/DOM/window.location)了解其他参数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-01T07:02:18.403

您可以在表单中创建隐藏字段

```
<input type="hidden" id="myurl" name="myurl"/> 
```

然后写一个javascript

```
<script type="text/javascript">
document.getElementById('myurl').value = window.location.href
</script> 
```

那是帮助吗？

# php - ISBN 搜索的正则表达式错误

> ID：10845613
> 
> 赞同：2
> 
> 时间：2012-06-01T06:46:02.740
> 
> 标签：php, regex

你好，谁能看到这个正则表达式有什么问题？我从[这里得到它并](http://www.php.net/manual/en/function.ereg.php)[对此](http://www.solmetra.com/scripts/regex/index.php)进行了测试，一切都检查过了，但我收到了这个错误

分隔符不能是字母数字或反斜杠

这是我的代码

```
$input = $item_details['description'];
$regex = '^[0-9]{9}[[0-9]|X|x]$^';
preg_match($input, $regex, $output);
echo ($output); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:49:35.207

尝试：

```
$regex = '/^[0-9]{9}([0-9]|X|x)$/'; 
```

或者

```
$regex = '/^[0-9]{9}[0-9Xx]$/'; 
```

或者

```
$regex = '/^[0-9]{9}[0-9X]$/i'; 
```

# ruby-on-rails - CSS 导入未连接

> ID：10845617
> 
> 赞同：1
> 
> 时间：2012-06-01T06:46:28.917
> 
> 标签：ruby-on-rails, sass, asset-pipeline

我有一个 rails 3 应用程序，我正在使用资产管道。如果我`application.css.scss`这样做，我有：

```
@import 'foo.css'; 
```

在我编译资产之后，`foo.css`没有连接，`application.css`而是`@import`声明变成：

```
@import url(foo.css); 
```

有什么方法可以强制连接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:53:13.233

试试这个

```
@import "foo.scss"; 
```

或者

```
@import "foo"; 
```

[通过此http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#import](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#import)获取更多信息会很好

# wcf - Colon : in a REST WCF Request

> ID：10845620
> 
> 赞同：0
> 
> 时间：2012-06-01T06:46:58.697
> 
> 标签：wcf, rest, colon

So I have a URL to my wcf service that looks like this:

`http://dev.verse-master.com/api/VerseMasterService.svc/Search/bi/isaiah 34:16/0/60`

My operation contract looks like this:

```
[OperationContract]
[WebGet(UriTemplate = "/Search/{translation}/{searchTerm}/{skip}/{take}", ResponseFormat = WebMessageFormat.Json)]
VerseMaster.BusinessLayer.DataObjects.ServerObjects.GetVersesSearchServerObject GetVersesBySearch(string translation, string searchTerm, string skip, string take); 
```

I have tried from reading online to add this line to the web.config:

```
<httpRuntime requestPathInvalidCharacters="" requestValidationMode="4.0"/> 
```

But I still get this error:

> HTTP Error 400 - Bad Request.

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:54:52.423

对 url 进行编码，应该没问题，只需在返回时处理它。这也将有助于反斜杠，这将导致与以下相同数量的问题：

例如

调用服务：

```
String encodedSearchTerm = Server.UrlEncode(searchTerm);
String UrlToCall = String.Format("{0}{1}{2}","http://dev.verse-master.com/api/VerseMasterService.svc/Search/bi/",encodedSearchTerm,"/0/60"); 
```

...ETC...

然后在您的操作中：

```
[WebGet(UriTemplate = "/Search/{translation}/{searchTerm}/{skip}/{take}", ResponseFormat = WebMessageFormat.Json)] 
VerseMaster.BusinessLayer.DataObjects.ServerObjects.GetVersesSearchServerObject GetVersesBySearch(string translation, string searchTerm, string skip, string take){
...etc...
String DecodedSearchTerm= Server.UrlDecode(searchTerm);
...etc...
} 
```

记得需要导入`System.Web`

# javascript - window.print() is not printing the whole page

> ID：10845621
> 
> 赞同：16
> 
> 时间：2012-06-01T06:47:00.903
> 
> 标签：javascript, jquery

I have a page ![screenShot](../Images/46f90cfd77ac334dea705beddd253cf6.png)

I want to print this page. On print button i am using something like this

```
<input id="print" type="submit" onclick="window.print();" /> 
```

But the problem is it is not printing the whole page. Like it only print that is currently in the view. When i click on the print button then till `Email:tahir@7-cs.com` page print. It does not print the text below the scrollbar.

![textBelowScrollbar](../Images/cc7fa805856ad334e015191eb6ee1fbf.png)

How can i print the whole text. Like suppose i have a very big page and i am using tabs to accommodate my page. And when click on print button, then i want to include the whole page including tabs. How can i do it?

Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T06:53:06.657

您应该使用单独的 css 文件来打印页面或使用 css3 媒体查询：

```
<link rel="stylesheet" href="css/print.css" type="text/css" media="print"/> 
```

创建 css 打印文件时，使用百分比值是最佳选择。

```
body, html, #wrapper {
    width: 100%;
} 
```

或在您的主 css 文件中：

```
@media print {
      body, html, #wrapper {
          width: 100%;
      }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-15T12:17:53.703

利用

```
 body,html { margin-top:0%;
   display:block;
   height:100%;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-29T08:53:21.263

## 使用这个 CSS

```
@media print{ 
    body, html, #page-container, .scrollable-page, .ps, .panel {
        height: 100% !important;
        width: 100% !important;
        display: inline-block;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T06:52:52.630

尝试使用 CSS 打印样式表，看看谷歌的[一些例子](http://www.google.com/search?q=css+print+stylesheet)。

关于为什么它实际上没有打印整个页面，我假设您在打印对话框中缺少一个设置，该设置说明了如何完成打印。

# php - Return reference to parameter

> ID：10845622
> 
> 赞同：0
> 
> 时间：2012-06-01T06:47:04.997
> 
> 标签：php

is any way to return reference at class parameter or global variable? I try this

```
class test{

  public static $var;

  public static function get(&$ref){

    $ref = self::$var;

  }

}

test::get($ref);
$ref = 'test';
var_dump(test::$var); 
```

it's a basic example, i know, then this example can be use another way, but i need to keep principle

* * *

this is my function, where is problem with reference to variable

```
class mySession{

    public static function issetKeys(){

      $keys = func_get_args();

      $session = &$_SESSION;
      $c = 0;

      if (is_array($keys)){
        foreach ($keys as $val){

          if (isset($session[$val])){
            $session = &$session[$val];
            $c++;
          }
          else break;

        }
      }

      return $c == count($keys);

    }

    public static function &get(){

      $keys = func_get_args();

      $session = &$_SESSION;

      if (is_array($keys)){
        foreach ($keys as $val){

          if (!isset($session[$val])) $session[$val] = Array();
          $session = &$session[$val];

        }
      }

      return $session;

    }

  }

  function getValue(){

    if (!mySession::issetKeys('p1', 'p2')){
      $session = mySession::get('p1', 'p2');
      $session = 'string';
    }

    return mySession::get('p1', 'p2');

  }

  print_r($_SESSION); 
```

but no variable save in to $_SESSION

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:22:27.597

不，*你为什么会做这样的事情*？

如果要访问公共静态变量，只需编写

```
test::$var = "Hello there handsome"; 
```

在上面的例子中，您没有将引用传递给`this::$var`$ref，而是让对 $ref 的引用包含 this::$var 的值。PHP 不是 C 语言，在 PHP 中不需要时通常应避免引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:59:39.737

在一般情况下，参数只存在于它被传递到的函数的持续时间内；当函数返回时，调用堆栈被展开并且参数消失，这意味着对存在于调用堆栈中的变量的任何引用将不再有效（因为它指向已被释放的内存并且现在很可能包含一些东西否则完全。）

也就是说，*可以*返回对参数的引用，尽管如果您尝试返回对实际存在于堆栈中的变量（即不是通过引用传递的变量）的引用，这将不起作用：

```
$myGlobal = 10;

// Note the & before the function name
function &returnReference(&$x) {
    return $x;
}

// Note the & before the function call
$someValue = &derp($myGlobal);
echo $myGlobal;

$someValue = 0;
echo $myGlobal; 
```

# ios - ASIHTTPRequest Get Request - Delegate Not Getting Called

> ID：10845623
> 
> 赞同：1
> 
> 时间：2012-06-01T06:47:06.230
> 
> 标签：ios, cocoa-touch, ios4, xcode4.2, asihttprequest

My request is

```
 NSURL *requestUrl = [NSURL URLWithString:url];

    if(request_) {
        [request_ setDelegate:nil];
        [request_ release];
    }
    request_ = [[ASIFormDataRequest requestWithURL:requestUrl] retain];
    [request_ setDelegate:self];
    [request_ setRequestMethod:@"GET"];
    [request_ setTimeOutSeconds:HTTP_TIME_OUT];
    [request_ startAsynchronous]; 
```

The call is going since the network access indicator on the top bar is rotating and disappearing after a few seconds. But either of the delegate methods

```
- (void)requestFinished:(ASIHTTPRequest *)request 
```

or

`- (void)requestFailed:(ASIHTTPRequest *)request`

is not being called. What could have went wrong?

Thanks in advance.

PS: Sometimes, due to some issue, server is returning a "500 Internal Server Error". But even in that case, shouldn't the delegate

`- (void)requestFailed:(ASIHTTPRequest *)request`

be called?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T06:57:02.157

你可以使用积木来检查。

这是相同的示例：

```
 NSURL *url = [NSURL URLWithString:@"http://allseeing-i.com"];
   __block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
   [request setCompletionBlock:^{
      // Use when fetching text data
      NSString *responseString = [request responseString];

      // Use when fetching binary data
      NSData *responseData = [request responseData];
   }];
   [request setFailedBlock:^{
      NSError *error = [request error];
   }];
   [request startAsynchronous]; 
```

我希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T06:52:08.397

确保您的课程符合`ASIHTTPRequestDelegate`协议。

```
@interface YourClass : ... <ASIHTTPRequestDelegate> 
```

# android - Click on webview and on listener at the same time

> ID：10845624
> 
> 赞同：1
> 
> 时间：2012-06-01T06:47:08.610
> 
> 标签：android, webview, onclick

I have an invisible listener above of webview and i want that when the user click on this area, the invisible listener does something and if the web has some button, it does like if the invisible listener doesn't exist.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:10:56.577

研究 WebView 中 Javascript 接口的使用。请参阅[Android 开发者指南的这个区域](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)。基本上，您应该能够使用 Javascript 接口从页面与设备进行通信，并让您的 WebView Activity 知道页面上的按钮是否存在。

# gwt - google-web-toolkit add alt attrib in image

> ID：10845626
> 
> 赞同：0
> 
> 时间：2012-06-01T06:47:14.227
> 
> 标签：gwt, imagebutton, alt

Hi I have an image that that has arrows. I want to add "alt" attribute.

here is my class:

```
public interface DisclosurePanelArrows extends ClientBundle
{

    public static final DisclosurePanelArrows INSTANCE = GWT.create(DisclosurePanelArrows.class);

    @Source("disclosurePanelClosed.png")
    ImageResource disclosurePanelClosed();

    @Source("disclosurePanelOpen.png")
    ImageResource disclosurePanelOpen();

} 
```

I used it in here: (not working)

```
 closedImage = new ICMImage(DisclosurePanelArrows.INSTANCE.disclosurePanelClosed());
        openImage = new ICMImage(DisclosurePanelArrows.INSTANCE.disclosurePanelOpen());
 closedImage.getElement().setAttribute("alt", "close test alt");
        openImage.getElement().setAttribute("alt", "open test alt"); 
```

I noticed that the HTML tags are being created programatically and produces it in a .gwtml file.

The only js i found linked to it is this which is in the WAR folder so I am not sure.

```
function com_irondata_icmcase_ICMCase(){var O='',vb='" for "gwt:onLoadErrorFn"',tb='" for "gwt:onPropertyErrorFn"',hb='"><\/script>',Y='#',cc='../css/ICMCase.css',dc='../css/dummy.css',bc='../css/theme.css',Wb='.cache.html',$='/',Rb='3A2B8EBB69B48C7A8A7573A74E0C6812',Sb='59203CCA1EBBD79FD6BB80354E15F64D',Vb=':',nb='::',kc='<script defer="defer">com_irondata_icmcase_ICMCase.onInjectionDone(\'com.irondata.icmcase.ICMCase\')<\/script>',gb='<script id="',gc='<script language="javascript" src="',qb='=',Z='?',Eb='ActiveXObject',sb='Bad handler "',Tb='C3CB1347D72F2C0FB0DF18AB080081C2',Fb='ChromeTab.ChromeFrame',Ub='DDDD212960179CCBED9A98B8863C29E1',ec='DOMContentLoaded',ib='SCRIPT',fb='__gwt_marker_com.irondata.icmcase.ICMCase',jb='base',bb='baseUrl',S='begin',R='bootstrap',Db='chromeframe',ab='clear.cache.gif',P='com.irondata.icmcase.ICMCase',db='com.irondata.icmcase.ICMCase.nocache.js',mb='com.irondata.icmcase.ICMCase::',pb='content',X='end',Lb='gecko',Mb='gecko1_8',T='gwt.codesvr=',U='gwt.hosted=',V='gwt.hybrid',Xb='gwt/chrome/chrome.css',ub='gwt:onLoadErrorFn',rb='gwt:onPropertyErrorFn',ob='gwt:property',ac='head',Pb='hosted.html?com_irondata_icmcase_ICMCase',_b='href',Kb='ie6',Jb='ie8',Ib='ie9',wb='iframe',_='img',xb="javascript:''",fc='js/amathcontext.js',hc='js/amathcontext.js"><\/script>',ic='js/bigdecimal.js',jc='js/bigdecimal.js"><\/script>',Yb='link',Ob='loadExternalRefs',kb='meta',zb='moduleRequested',W='moduleStartup',Hb='msie',lb='name',Bb='opera',yb='position:absolute;width:0;height:0;border:none;alt=""',Zb='rel',Gb='safari',cb='script',Qb='selectingPermutation',Q='startup',$b='stylesheet',eb='undefined',Nb='unknown',Ab='user.agent',Cb='webkit';var l=window,m=document,n=l.__gwtStatsEvent?function(a){return l.__gwtStatsEvent(a)}:null,o=l.__gwtStatsSessionId?l.__gwtStatsSessionId:null,p,q,r,s=O,t={},u=[],v=[],w=[],x=0,y,z;n&&n({moduleName:P,sessionId:o,subSystem:Q,evtGroup:R,millis:(new Date).getTime(),type:S});if(!l.__gwt_stylesLoaded){l.__gwt_stylesLoaded={}}if(!l.__gwt_scriptsLoaded){l.__gwt_scriptsLoaded={}}function A(){var b=false;try{var c=l.location.search;return (c.indexOf(T)!=-1||(c.indexOf(U)!=-1||l.external&&l.external.gwtOnLoad))&&c.indexOf(V)==-1}catch(a){}A=function(){return b};return b} 
```

I also tried this [solution](https://groups.google.com/group/Google-Web-Toolkit/browse_thread/thread/2f66508a088f7643/ce928b035afc1945#ce928b035afc1945) but it is putting the alt in diff tag

Any suggestions? thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:17:20.487

假设`ICMImage`是一种`com.google.gwt.user.client.ui.Image`，那又如何[`setAltText`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Image.html#setAltText%28java.lang.String%29)呢？

否则，请显示 的代码`ICMImage`，因为您没有显示*如何*使用`ImageResource`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:06:22.883

我找到了。经过8个多小时的努力。这是答案。

```
 protected DisclosurePanel         disclosurePanel;

  if(disclosurePanel.getElement().hasChildNodes()) 
        { 
            NodeList<com.google.gwt.dom.client.Element> imgs =  disclosurePanel.getElement().getElementsByTagName("img");
            com.google.gwt.dom.client.Element elem = imgs.getItem(0);
            elem.setAttribute("alt", " ");
        } 
```

# javascript - jquery .load 问题

> ID：10845632
> 
> 赞同：0
> 
> 时间：2012-06-01T06:47:53.250
> 
> 标签：javascript, jquery, asp.net-mvc

我正在尝试在 asp-mvc4 的另一个视图中显示某个视图的元素

在 index1.cshtml 中：

```
<div id="divToUpdate"></div> 
```

在 index2.cshtml 中：

```
<div id="sss"><table id="grid1"></table></div>
<div id="fff">Hello!</div> 
```

在我的 javascript 文件中：

```
 $('#ThisIsALink').click(function () {
    $('#divToUpdate').load('../Employee/Index #fff');
}); 
```

该脚本将显示“你好！” 在 index1.cshtml 的 div 中...但如果我改为写 '../Employee/Index #sss'，则不会显示我的表（实际上是 jqgrid）。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:54:00.500

原因是您的表是由 javascript 创建的。

> 当使用没有后缀选择器表达式的 URL 调用 .load() 时，内容会在脚本被删除之前传递给 .html()。这会在脚本块被丢弃之前执行它们。但是，如果调用 .load() 时将选择器表达式附加到 URL，则脚本会在 DOM 更新之前被剥离，因此不会执行。

用于您的表的 javascript`jqgrid`将不会被执行，因此您的 jqgrid 将不会显示。

# javascript - jQuery 3D 戒指

> ID：10845633
> 
> 赞同：0
> 
> 时间：2012-06-01T06:47:55.137
> 
> 标签：javascript, jquery, 3d

我想做一个和这个网站一样的3D效果[http://www.asanimedia.com/](http://www.asianimedia.com/)

但我在 jquery 中需要它，而不是在 flash 中。

我尝试过 JQUERY 3D 引擎，通过使用这个库我可以做类似的事情，但我需要 99% 相同，我现在做不到

谁能告诉我该怎么做？或者有没有更好的3D库

这是我目前使用的 3D 引擎 [http://www.devirtuoso.com/2009/09/3d-plane-for-jquery-3d-engine/](http://www.devirtuoso.com/2009/09/3d-plane-for-jquery-3d-engine/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:25:30.653

好的，所以只使用 jQuery（没有 css 转换，这意味着它应该非常兼容），我想出了以下内容：

[http://jsfiddle.net/andyc/ZncP6/](http://jsfiddle.net/andyc/ZncP6/)

```
var numOfBoxes = 10;
var boxContainer = $(".boxcontainer");
var gap = 360 / (numOfBoxes);

for (var i = 0; i < numOfBoxes; i++) {
    $("<div>").attr("data-offset", (gap * i)).addClass("box").appendTo(boxContainer);
}

$(".box").each(function() {
    var box = $(this);
    positionBox(box, 0);
});

$({position: 0}).animate({position: 360}, {
    duration: 4000,
    step: function() {
        var currentPosition = this.position;
        console.log(currentPosition);
        $(".box").each(function() {
            var box = $(this);
            positionBox(box, currentPosition);
        });
    }
});

function positionBox(box, position) {
    var newPosition = position + box.data("offset");
    var newRadianPosition = convertToRadians(newPosition);

    var x = Math.cos(newRadianPosition) * 200 + 200;
    var y = Math.sin(newRadianPosition) * 100 + 200;

    var absolutePosition = newPosition % 360;
    if (absolutePosition > 180) {
        box.css("z-index", "0");
    }
    else {
        box.css("z-index", "");
    }

    // Could scale the size of the item here as well as position
    box.css("top", y + "px").css("left", x + "px");
}

function convertToRadians(degrees) {
    return degrees * (3.14159265 / 180);
}​ 
```

它有点粗糙和准备好了，所以显然你想根据你的需要定制它。实际上，它所做的是创建一个自定义的 jQuery 动画，每一步都会在中心 div 周围增加和重新定位小 div。如果它们是一半，它的 z 索引就会改变，从而产生深度的错觉。

如果你想让它看起来更真实一点，你总是可以根据它们与字体的接近程度来调整 div 的大小。

这有帮助吗？

如果您想要更多解释，请告诉我！:) 塔！

# php - 将 mpeg 转换和下采样为动画 gif？

> ID：10845638
> 
> 赞同：1
> 
> 时间：2012-06-01T06:48:12.393
> 
> 标签：php, ruby-on-rails, image, image-processing, imagemagick

我需要将 mpeg 文件调整为更小的尺寸（从 720p 到 640x480，带有信箱边框），并以编程方式将最终产品转换为动画 gif。怎样才能最有效地做到这一点？

我被限制在 Heroku 上执行操作，所以我需要考虑大小，mpeg 通常为 25 到 45 MB，我需要相对快速地执行操作。最终，如果迫在眉睫并且我不能在这部分过程中使用 Heroku，那么我可以探索备用 VPS，但这只是最后的手段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:50:14.030

对于 gif 转换，您可以使用[ffmpeg](http://ffmpeg.org/)

[一些使用](http://www.wikihow.com/Use-FFmpeg)技巧。

可以制作信箱和调整视频大小。

# java - eclipse中的GWT项目

> ID：10845642
> 
> 赞同：1
> 
> 时间：2012-06-01T06:48:22.860
> 
> 标签：java, gwt, core

如何将 GWT 项目导出到文件系统，然后如何将该项目导入到新的 Eclipse 工作区

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T07:03:57.707

导出：文件-> 导出-> 常规\文件系统。
导入：文件 -> 导入 -> 现有项目到工作区 -> 选择相应的文件夹，然后单击确定。

# python - python类设置器限制

> ID：10845644
> 
> 赞同：2
> 
> 时间：2012-06-01T06:48:32.940
> 
> 标签：python

我有一个类和一个属性`writable_attributes`，它是一个属性数组，在类被实例化时应该可以设置：

```
class User(object):
    writable_attributes = ['username','email'] 
```

如果设置了另一个属性（如果它不在`writable_attributes`. 我正在浏览一个通用的二传手，但我找不到任何适合我需要的东西。就像是：

```
user = User()
user.foo = 'bar' # This should raise an error since only `username` and `email` can be set 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:51:50.787

听起来您*真正*要寻找的是[`__slots__`](http://docs.python.org/reference/datamodel.html#slots).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T06:52:12.123

首先，重新考虑您是否真的需要这样做。它通常是过度设计的。如果您确实决定*确实*需要，请查看[`__slots__`](http://docs.python.org/reference/datamodel.html#slots)- 如果您将您的重命名`writable_attributes`为`__slots__`，则尝试创建更多内容将是错误的。如果您需要避免某些现有的在设置一次后被写入，您可以使用属性来做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T07:01:59.750

您可能还对`__setattr__`. 这会覆盖对象的属性设置。 **slot**具有**setattr**所没有的其他复杂性。

# c - 将结构指针数组传递给函数

> ID：10845645
> 
> 赞同：4
> 
> 时间：2012-06-01T06:48:35.083
> 
> 标签：c, pointers, struct

我正在编写一个程序，其中我必须将结构指针数组传递给主体中的函数，如下所示

```
 struct node *vertices[20];
create_vertices (&vertices,20); 
```

功能的实现是这样的

```
void create_vertices (struct node *vertices[20],int index)
{
} 
```

在这我必须传递一个索引为 20 的结构指针数组，我在 mains 之外所做的声明如下

```
void create_vertices(struct node **,int); 
```

但是，每次编译代码时，我都会在这三行中遇到问题，因为

```
bfs.c:26:6: error: conflicting types for ‘create_vertices’
bfs.c:8:6: note: previous declaration of ‘create_vertices’ was here
bfs.c: In function ‘create_vertices’:
bfs.c:36:15: error: incompatible types when assigning to type ‘struct node’ from type ‘struct node *’ 
```

我无法理解我应该怎么做。我想要做的是：

1.  在 main 中声明一个结构指针数组（我已经这样做了）。
2.  将数组的地址传递给函数（这是我搞砸的地方）。
3.  在主电源之外声明正确的函数原型。

代码必须在 C 上，我正在 Linux 上对其进行测试。有人能指点我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T06:59:14.333

`&vertices`通话中的类型`create_vertices(&vertices, 20)`不是你想的那样。

它是指向结构指针数组的指针：

```
struct node *(*)[20] 
```

并不是

```
struct node ** 
```

挂断`&`电话，您将重新开始工作。

编译（在 Mac OS X 10.7.4 上使用 GCC 4.7.0）：

```
$ gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -c x3.c
x3.c: In function ‘func1’:
x3.c:16:9: warning: passing argument 1 of ‘create_vertices’ from incompatible pointer type [enabled by default]
x3.c:7:10: note: expected ‘struct node **’ but argument is of type ‘struct node * (*)[20]’
$ 
```

编码：

```
struct node { void *data; void *next; };

void make_node(struct node *item);
void func1(void);
void create_vertices(struct node **array, int arrsize);

void create_vertices(struct node *vertices[20], int index)
{
    for (int i = 0; i < index; i++)
        make_node(vertices[i]);
}

void func1(void)
{
    struct node *vertices[20];
    create_vertices(&vertices, 20);
} 
```

删除`&`和代码编译干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T07:00:15.290

正如您所写：`struct node *vertices[20];`声明指向节点的指针数组。现在，如果您想创建一个更改其元素的函数，您应该声明一个将这种数组作为参数的函数：

```
void create_vertices(struct node *arr[20], int size) 
```

或者由于在这种情况下可以省略大小，最好将其声明为：

```
void create_vertices(struct node *arr[], int size) 
```

注意，这个函数可以这样调用：`create_vertices(vertices, 20);`这使得这个函数的第一个参数（`arr`）指向这个数组的第一个元素。您可以在此函数内更改此数组，并且更改将在外部可见。

假设您具有`void foo(struct node *ptr)`更改指向的`node`功能。`ptr`当您声明`struct node *ptr;`并传递给此函数时：`foo(ptr);`它可以更改此`node`对象并且更改在外部可见，但不能更改传递的指针`ptr`本身。当您需要更改函数内的指针以使更改在外部可见时，这就是您将指针地址传递给函数以获取指针的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T07:01:35.920

在 的原型中`create_vertices`，第一个参数是指向结构指针的指针。在定义中，第一个参数是指向结构的 20 个指针的数组。

原型和定义都必须相同。

# android - 通过单击任何列表项，应使用片段在 android 中打开一个新布局

> ID：10845648
> 
> 赞同：0
> 
> 时间：2012-06-01T06:48:47.590
> 
> 标签：android

我正在使用片段开发一个 android 应用程序。主布局应分为两个片段，一个是列表视图片段，另一个应该是具有编辑框和其他项目的布局。我能够在第二个布局中显示但无法启动的图像我应该做的布局。如果您对此有任何想法，请分享。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:48:14.103

使用片段事务设置片段。

```
Fragment f=SomeFragment.newInstance(someparams...)
FragmentTransaction ft=getFragmentManager().beginTransaction();
ft.replace(R.id.someid, f); 
ft.commit(); 
```

R.id.someid 是布局中片段的 id。

# c# - 奇怪的报告 VIewer 错误：无法加载文件或程序集 'App_WebReferences.e8ik1wuc

> ID：10845650
> 
> 赞同：2
> 
> 时间：2012-06-01T06:49:17.853
> 
> 标签：c#, asp.net

我正在我的 asp.net 4.0 Web 应用程序中连接到 MS NAV 2009 Web 服务...与 Web 服务的所有其他通信都可以正常工作，但是当我尝试使用报告向导创建报告时，我收到以下错误：

> “无法加载文件或程序集 'App_WebReferences.e2c6mdeb, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' 或其依赖项之一。系统找不到指定的文件。”

将程序集复制到 Bin 文件夹可以解决问题，但随后会出现另一个错误并且应用程序无法编译。错误：

> “‘eOnline.LessonsClasses’类型存在于‘c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\cavendishwebonline\9db1de22\42dd86dd\App_WebReferences.zxqfnb5w.dll’和‘c:\ Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\cavendishwebonline\9db1de22\42dd86dd\assembly\dl3\048caf7e\caa8a704_c13fcd01\App_WebReferences.e2c6mdeb.DLL'"

我希望能在这个问题上提供一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:24:48.097

请更改 bin 文件夹中的 ajaxtoolkit 引用（更新版本）

# jquery - setInterval 不工作的jQuery

> ID：10845655
> 
> 赞同：0
> 
> 时间：2012-06-01T06:49:31.040
> 
> 标签：jquery

当我单击并按住时`down`，该值应不断减小，直到 i`mouseup`或`mouseleave`. 相反，我必须继续点击。这是 jsfiddle [http://jsfiddle.net/mdanz/5mdwe/8/](http://jsfiddle.net/mdanz/5mdwe/8/)

```
$('#bid-down').live('mousedown',function() {

var button = $(this);
var number = $(this).parent('div').siblings('#bid-child-container-2').find('#bid-price').val();
var newnumber = number.split('.');

button.data('interval2', setInterval(function (){

var on = button.attr('data-on');

if(newnumber[0]==2 && newnumber[1]==5) {
    alert('Minimum Bid($2.50)');
    }

if(on==1) {
    if(newnumber[0]>2) {
        if(newnumber[1]==0) {
        var first = parseInt(newnumber[0])-1;    
        var second = 9;    
        }
    }

    if(newnumber[1]==0) {
    var first = parseInt(newnumber[0])-1;    
    var second = 9;
    }

    if(newnumber[1]>0) {
    var first = newnumber[0];    
    var second = parseInt(newnumber[1])-1;    
    }

    if(first==2 && second==5) {
    button.attr('data-on','0');
    }

    var finalnumber = first+'.'+second;
    button.parent('div').siblings('#bid-child-container-2').find('#bid-price').val(finalnumber);

}

}, 100));

}).bind('mouseup mouseleave', function() {

clearInterval($(this).data('interval2'));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:01:27.620

你的间隔工作得很好。但是，您不处理`number`并`newnumber`在`setInterval`功能内部

如果您添加类似的内容`console.log('down');`然后查看浏览器的错误控制台，您可以看到您`setInterval`正在重复执行

使用您现有的代码，您需要更改几行，请参阅[http://jsfiddle.net/5mdwe/23/](http://jsfiddle.net/5mdwe/23/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:01:56.657

您需要将代码行以提取间隔函数内的数字

-或者-

在区间函数的末尾设置 number/newnumber 的值。

见[演示](http://jsfiddle.net/5mdwe/17/)。

# c# - 为什么这个随机字符串生成器总是返回相同的值

> ID：10845656
> 
> 赞同：0
> 
> 时间：2012-06-01T06:49:35.013
> 
> 标签：c#, random, concurrency

我今天遇到一个奇怪的问题，我可以理解原因。采取以下控制台程序。

```
internal class Program
    {
        private static void Main(string[] args)
        {
            string s1 = GenerateRandomCode(8);
            string s2 = GenerateRandomCode(8);
            string s3 = GenerateRandomCode(8);
        }

        public static string GenerateRandomCode(int length)
        {
            string charPool = "ABCDEFGOPQRSTUVWXY1234567890ZabcdefghijklmHIJKLMNnopqrstuvwxyz";
            StringBuilder rs = new StringBuilder();
            Random random = new Random();

            for (int i = 0; i < length; i++)
            {
                rs.Append(charPool[(int)(random.NextDouble() * charPool.Length)]);
            }

            return rs.ToString();
        }
    } 
```

如果我在程序中设置断点并运行程序，则 s1、s2、s3 的值都是相等的。现在，例如，如果我在 s2 处放置一个断点，则返回的值将有所不同。

似乎是某种并发问题？这是怎么回事？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:53:35.727

随机数生成器实际上并不是完全随机的：给定相同的种子值，多个实例将生成相同的随机序列。

不能说它比Random 构造函数的[MSDN 文档更好](http://msdn.microsoft.com/en-us/library/h343ddh9.aspx)

> “默认种子值源自系统时钟并且具有有限的分辨率。因此，通过调用默认构造函数连续创建的不同 Random 对象将具有相同的默认种子值，因此将产生相同的集合随机数。这个问题可以通过使用单个 Random 对象来生成所有随机数来避免。您也可以通过修改系统时钟返回的种子值，然后将这个新的种子值显式提供给 Random(Int32 ) 构造函数。有关更多信息，请参阅 Random(Int32) 构造函数。

因此，在您的情况下，您需要将 Random 实例保留为类级字段或函数参数，并且只实例化一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T06:52:51.780

`Random`因为您在每次调用中实例化一个 new`GenerateRandomCode`并且调用花费的时间非常短，所以所有 3 个`Random`对象最终都具有相同的基于时间的种子，这意味着它们都将返回相同的第一个值。为您的对象创建一个字段，`Random`在程序开始时仅将其实例化一次，然后`GenerateRandomCode`使用该实例`Random`代替 - 您现在在调用`random.NextDouble()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T06:52:54.317

把`new Random()`电话拉到外面`GenerateRandomCode`。

由于您每次都在重新创建它并快速连续调用它，因此它可能会获得相同的随机种子值。

您可以将其设为静态，或使用依赖注入（传入）。

我相信这将解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T07:00:58.777

**原因：**没有给定任何种子值的随机数实例将`DateTime.Now.Ticks`值作为种子值。由于您的实例正在快速连续地重新创建，因此该实例会以相同的滴答声播种。因此相同的随机数。

**证明：**在代码中放置一些断点。然后你会得到真正的随机值，因为当它触发调试器时，在你按下 F10 或 F11 或 F5 之前会浪费时间。造成时间流逝。

**解决方案：**创建一个 Random 类的静态实例，并在任何你想要的地方使用它的 Next 函数。

# facebook - facebook打开图表必须重新加载页面才能发布到时间线

> ID：10845662
> 
> 赞同：-3
> 
> 时间：2012-06-01T06:49:51.100
> 
> 标签：facebook, facebook-graph-api

很困惑，但我的开放图有效。唯一的问题是我必须刷新几次才能真正发布到时间线。

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:58:44.533

您应该添加 javascript 超时功能以在页面加载几秒钟后调用 facebook。例如

```
setTimeout( function() {
    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            //  publish action to facebook
            FB.api( '/me/news.reads', 'post', { article : 'http://www.yourdomain.com/your_article/' } );
        } else if (response.status === 'not_authorized') {
            // the user is logged in to Facebook, 
            // but has not authenticated your app
        } else {
            // the user isn't logged in to Facebook.
        }
    });
}, 2000 ); 
```

这将为 Facebook SDK 提供足够的时间来加载和初始化，然后再将您的操作发布到 Facebook。

# jquery - jQuery.parseJSON 不使用 jquery-1.7.1 版本解析

> ID：10845666
> 
> 赞同：0
> 
> 时间：2012-06-01T06:49:55.997
> 
> 标签：jquery

我使用的是 jquery-1.7.1 版本，我的 ajax 调用如下，

```
var url = "getrequest.do?method=getTemplates";
$.ajax({
         url : url,
         type : "GET",
         dataType : 'text', 
         success:function(response){
                 var templates = jQuery.parseJSON(response);
          }
       }); 
```

我对这个 ajax 调用的响应是：

```
{"response":{"result":{"templates":true},"uri":"/api/private/json/templates"}} 
```

当我使用 jquery-1.7.1 时，parseJSON 方法会引发解析错误，但它适用于 jquery.1.5.1。

有人可以帮我调试这个问题。

提前谢谢拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:51:54.547

只需您可以更改`dataType`如下：

```
dataType : 'json' 
```

你不需要`$.parseJSON()`，**jQuery**会为你做。

**代码**

```
$.ajax({
    url: url,
    type: "GET",
    dataType: 'json',
    success: function(response) {
        var templates = response;
        console.log(templates);
    }
}); 
```

# mysql - MySQL - Count 没有返回我正在寻找的值

> ID：10845667
> 
> 赞同：0
> 
> 时间：2012-06-01T06:50:03.267
> 
> 标签：mysql, sql, count, left-join

我对 SQL 还是很陌生，我还没有完全理解我的代码中的问题来自哪里。下面的代码主要来自我的工作，所以我不是从头开始编写的。该代码收集了一堆不同的信息并基于它进行过滤。如果您查看代码，您会看到一个学生有许多与之相关的observations_students。代码的第一个版本返回所有具有observation_student 的学生的信息，observation_id = 2567。这似乎与以下代码一起正常工作：

```
SELECT DISTINCT
SUBSTRING(s.osis_id,INSTR(s.osis_id,'-')+1) AS osid,
s.id AS student_id,
CONCAT(s.last_name, ' ',s.first_name) AS sname
FROM students s

# course info
INNER JOIN 
(
    SELECT c.id AS cid,
    c.description AS cname,
    cs.date_end,
    cs.student_id,
    gl.description AS grade,
    c.gradelevel_id
    FROM courses_students cs
    INNER JOIN courses c ON c.id = cs.course_id
    INNER JOIN gradelevels gl ON gl.id = c.gradelevel_id
    WHERE
    IFNULL(cs.date_end, NOW()) >= NOW()
    AND IFNULL(c.date_end, NOW()) >= NOW()
    AND c.school_id = 1509
    AND c.subject_id = 24
) AS cs ON cs.student_id = s.id

# RTI flag info
INNER JOIN 
(
    SELECT os.id,
    os.student_id
    FROM observations o
    INNER JOIN observations_students os ON os.observation_id = 2567
    WHERE
    o.school_id = 1509
) AS os ON os.student_id = s.id

LEFT JOIN schools_students ss ON ss.student_id = s.id
WHERE s.active = 1
AND ss.school_id = 1509
AND IFNULL(ss.date_end,NOW()) >= NOW()
AND cs.gradelevel_id BETWEEN 10 AND 16 
```

在此之后我想做的是对于每个有 2567 观察的学生，我想找到学生拥有的 2009 观察的数量。为此，我添加了另一个 LEFT JOIN，完成的代码如下所示：

```
SELECT DISTINCT
SUBSTRING(s.osis_id,INSTR(s.osis_id,'-')+1) AS osid,
s.id AS student_id,
CONCAT(s.last_name, ' ',s.first_name) AS sname,
COUNT(fdos.id) AS fd_count
FROM students s

# course info
INNER JOIN 
(
    SELECT c.id AS cid,
    c.description AS cname,
    cs.date_end,
    cs.student_id,
    gl.description AS grade,
    c.gradelevel_id
    FROM courses_students cs
    INNER JOIN courses c ON c.id = cs.course_id
    INNER JOIN gradelevels gl ON gl.id = c.gradelevel_id
    WHERE
    IFNULL(cs.date_end, NOW()) >= NOW()
    AND IFNULL(c.date_end, NOW()) >= NOW()
    AND c.school_id = 1509
    AND c.subject_id = 24
) AS cs ON cs.student_id = s.id

# RTI flag info
INNER JOIN 
(
    SELECT os.id,
    os.student_id
    FROM observations o
    INNER JOIN observations_students os ON os.observation_id = 2567
    WHERE
    o.school_id = 1509
) AS os ON os.student_id = s.id

LEFT JOIN
(
    SELECT fdos.id,
    fdos.student_id
    FROM observations o
    INNER JOIN observations_students fdos ON fdos.observation_id = 2009
    WHERE
    o.school_id = 1509
) AS fdos ON fdos.student_id = s.id

LEFT JOIN schools_students ss ON ss.student_id = s.id
WHERE s.active = 1
AND ss.school_id = 1509
AND IFNULL(ss.date_end,NOW()) >= NOW()
AND cs.gradelevel_id BETWEEN 10 AND 16 
```

如果我将“COUNT(fdos.id) AS fd_count”更改为“fdos.id AS fdosid”，则会返回正确的条目数。但是，从 COUNT 返回的数字不是同一个数字，也不正确。谁能理解这里发生的事情足以解释我做错了什么？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:06:17.273

似乎 os 的 INNER JOIN 已经过滤了你的结果，只显示observation_id = 2567。因此你不能得到不同observation_id的任何其他记录。您可以将 INNER JOIN 更改为 LEFT JOIN 并查看它的运行情况。

```
SELECT DISTINCT
SUBSTRING(s.osis_id,INSTR(s.osis_id,'-')+1) AS osid,
s.id AS student_id,
CONCAT(s.last_name, ' ',s.first_name) AS sname,
COUNT(fdos.id) AS fd_count
FROM students s

# course info
INNER JOIN 
(
    SELECT c.id AS cid,
    c.description AS cname,
    cs.date_end,
    cs.student_id,
    gl.description AS grade,
    c.gradelevel_id
    FROM courses_students cs
    INNER JOIN courses c ON c.id = cs.course_id
    INNER JOIN gradelevels gl ON gl.id = c.gradelevel_id
    WHERE
    IFNULL(cs.date_end, NOW()) >= NOW()
    AND IFNULL(c.date_end, NOW()) >= NOW()
    AND c.school_id = 1509
    AND c.subject_id = 24
) AS cs ON cs.student_id = s.id

# RTI flag info
LEFT JOIN  #change this to LEFT JOIN
(
    SELECT os.id,
    os.student_id
    FROM observations o
    INNER JOIN observations_students os ON os.observation_id = 2567
    WHERE
    o.school_id = 1509
) AS os ON os.student_id = s.id

LEFT JOIN
(
    SELECT fdos.id,
    fdos.student_id
    FROM observations o
    INNER JOIN observations_students fdos ON fdos.observation_id = 2009
    WHERE
    o.school_id = 1509
) AS fdos ON fdos.student_id = s.id

LEFT JOIN schools_students ss ON ss.student_id = s.id
WHERE s.active = 1
AND ss.school_id = 1509
AND IFNULL(ss.date_end,NOW()) >= NOW()
AND cs.gradelevel_id BETWEEN 10 AND 16 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:09:19.580

我敢打赌你正在使用 MySQL。

如果您使用以下任何内容：

*   `GROUP BY`条款;
*   `HAVING`条款;
*   聚合函数，`count()`即

那么您的查询将被聚合一个。

这意味着，数据*将按*子句中指定的字段进行分组`GROUP BY`，这些字段应按原样保留在选择列表和查询的其他位置。所有其他字段都应该是聚合函数的参数，否则数据库不知道应该返回集合中与您的组匹配的哪个值。

对于按照您的方式构建的查询，所有主要数据库都会给您一个错误，因为`GROUP BY`一堆字段没有子句： `s.osis_id`、`s.id`和. MySQL 不会。相反，它将隐式分组数据。我不知道分组标准是什么，我也不想这样做，因为这种行为容易出错且不可靠。`s.last_name``s.first_name`

相反，您的查询应该被重写。最简单的方法是：

*   使用没有该功能的现有查询`count()`，即获取列表`fdos.id`；
*   将整个查询用作另一个子查询，省略`DISTINCT`子句；
*   数学生。

像这样的东西：

```
SELECT osid, student_id, sname, count(fdos_id) AS fd_count
  FROM (
    SELECT
        substring(s.osis_id,instr(s.osis_id,'-')+1) AS osid,
        s.id AS student_id,
        concat(s.last_name, ' ',s.first_name) AS sname,
        fdos.id AS fdos_id
      FROM students s
       ...
  ) AS src
 GROUP BY osid, student_id, sname
 ORDER BY osid, student_id, sname; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:11:40.530

一个快速修复似乎是更改`COUNT(fdos.id)`为`COUNT(*)`.

这是一个解释。结果`fdos`是*外*连接的，因此`fdos`连接左侧的某些行可能不会返回行。当它们没有被返回时，对应的列（包括`fdos.id`）被返回为 NULL。但是`COUNT()`省略了 NULL，这意味着`COUNT(fdos.id)`会省略连接结果集中的某些行。无论匹配、NULL 等如何计算*所有*行的标准方法是使用`COUNT(*)`.

# git - 将 piwik 安装切换到 git

> ID：10845668
> 
> 赞同：0
> 
> 时间：2012-06-01T06:50:12.767
> 
> 标签：git, github, matomo

这主要是一个 git 设置问题。

我有一个 piwik 就地安装，我一直在从 zip 文件手动更新。（我的主机不支持自动更新功能，手动更新越来越烦人。）

我想从这里将我的安装切换到 git 更新： [https ://github.com/piwik/piwik](https://github.com/piwik/piwik)

...我可以用来 git pull 新的 piwik 更新。

有人可以指导我如何做到这一点吗？具体来说，我如何`git clone`回购并忽略我当前的`config`文件夹，所以我每次拉新更新时都不必备份它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T07:32:47.197

克隆存储库

```
git clone git://github.com/piwik/piwik.git <directory> 
```

`<directory>`要克隆到的目录在哪里（`piwik`省略时默认为）。

要让 git 忽略您的自定义配置文件，只需将此行添加到 repo 的`.gitignore`文件中：

```
config/config.ini.php 
```

由于 piwik 存储库不包含该文件（只是 a `config.ini.sample.php`），因此在拉取更新时不会被覆盖。

如果您要更改 piwik 的源代码，请创建一个新分支或[fork](http://help.github.com/fork-a-repo/)存储库。

# ios5 - iOS5：在先前返回后重新访问时禁用查看，并且 textFieldShouldEndEditing 设置为 NO

> ID：10845670
> 
> 赞同：0
> 
> 时间：2012-06-01T06:50:25.043
> 
> 标签：ios5

我正在为 iPhone 的 Xcode 4.3 目标 iOS5 上工作。

我有视图 B，它使用简单的按钮操作从视图 A 中分离出来。在视图 B 中有文本字段，我需要验证此文本字段输入。验证规则很简单：如果文本字段为空，则 textFieldShouldEndEditing 返回 NO。代码是：

```
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField
{
    if (![textField.text length]) {
        return NO;
    }
    return YES;
} 
```

这工作正常。但是，如果我没有输入任何内容并且按下“返回”按钮（即弹出视图控制器）返回视图 A，并且我在视图 A 中再次按下该按钮以导航到视图 B，则视图 B 被完全禁用并且我无法编辑文本字段中的任何内容。当验证未实现或始终返回 YES 时，情况并非如此。如果我输入了一些东西，但 textFieldShouldEndEditing 总是返回 NO，我也尝试过；

我跟踪代码并注意到如果控制器弹出，textFieldShouldEndEditing 也会被触发。我认为问题与将 textFieldShouldEndEditing 设置为“是”或“否”有关，但我完全糊涂了。

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:11:57.767

首先尝试检查视图控制器是否是顶视图控制器：

```
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField {
    if (self == self.navigationController.topViewController)
        if (textField == self.confirmationCodeField)
            if (textField.text.length < kAuthCodeMinLength)
                return NO;

    return YES; // default
} 
```

# php - 用于 PHP 中 Bing 搜索的 Windows Azure 身份验证

> ID：10845672
> 
> 赞同：2
> 
> 时间：2012-06-01T06:50:30.490
> 
> 标签：php, http, authentication, azure, header

我正在尝试使用 Windows Azure Marketplace API 执行必应搜索，我已经下载了他们的指南和示例代码。该代码准备了一个带有基本身份验证的 HTTPS 请求，但是我经常收到以下错误：

`Warning: file_get_contents(https://api.datamarket.azure.com/Data.ashx/Bing/SearchWeb/Web?Query=%27washburn%27&Adult=%27Off%27&$top=50&$format=Atom): failed to open stream: Connection refused`

php 代码（来自微软的文档）：

```
$context = stream_context_create(array(
    'http' => array(
    'proxy' => 'tcp://127.0.0.1:8888',
    'request_fulluri' => true,
    'header'  => "Authorization: Basic " . base64_encode($accountKey.":".$accountKey)
    )
)); 
```

请问有谁知道是什么导致了错误？我已正确设置`$accountKey`并在浏览器中对其进行了测试。让我有点困惑的是`127.0.0.1:8888`，为什么在使用浏览器之前和之后都`base64_encode($accountKey.":".$accountKey)`需要，你应该将用户名留空，只需在密码字段中输入帐户密钥？`$accountKey``:`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T07:34:47.487

我已经解决了它，这是我为将来会做同样事情的人发现的：

我注释掉了上面写着的那一行：

```
'proxy' => 'tcp://127.0.0.1:8888',
'request_fulluri' => true, 
```

并`base64_encode("ignored:".$accountKey)`改为设置

根据我在 MSDN 上阅读的内容，据说 username 部分是被**忽略**的，所以它的值是什么并不重要。我在想可能是键中的长度或特殊字符搞砸了，所以我用`ignored`（或其他任何东西）替换它。

这成功了，我可以解析返回的 JSON 数据。祝你好运！

# c# - 使用 .net 为选定窗口绘制边框

> ID：10845676
> 
> 赞同：0
> 
> 时间：2012-06-01T06:50:57.130
> 
> 标签：c#, .net, winapi

我应该使用哪些 WinAPI 函数在选定窗口上绘制边框。例如，我通过鼠标激活任何窗口（例如，记事本），它应该由边框构成。如何使用.net 实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:01:26.507

使用当鼠标在边界上时运行的函数，`MouseHover`该函数在该函数内部定义或绘制边界。

```
 //write an function like this
function()
{
  // do what you want some like this... or draw border
  selectedwindow.BorderStyle = BorderStyle.Fixed3D;

}

//then call it on MouseHover event. 
```

# blackberry - 适用于 OS 7.1 的 BlackBerry 应用程序是否适用于 BlackBerry OS 10？

> ID：10845679
> 
> 赞同：1
> 
> 时间：2012-06-01T06:51:08.180
> 
> 标签：blackberry

请告诉我 BlackBerry 应用程序在 OS 7.1 之前是否适用于新的 BlackBerry OS 版本 10？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:04:45.580

如果它是用java编写的，它将无法工作。如果您使用 webworks、html5 等，它将在 os 10 上运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:34:55.977

昨天在伦敦的 BlackBerry10Jam 上，有人在舞台上表示，RIM 未来的目标是为在以前版本的 BB OS 上运行的应用程序提供支持。我猜他们的意思是他们正在寻求调整他们对 BB 10 的 Android 应用程序支持（这实际上是一个 java/dalvik 运行时，您可以在其中运行一些 Android 应用程序）。虽然没有时间框架。

# ruby - 当我在 AppFog 上访问 Sinatra 应用程序时显示“禁止”消息

> ID：10845680
> 
> 赞同：3
> 
> 时间：2012-06-01T06:51:20.043
> 
> 标签：ruby, sinatra, rack, paas

我将一个简单的 Sinatra 应用程序上传到 AppFog。它在我的本地机器上运行良好。但是将应用程序上传到 AppFog 后，当我访问[AppFog 域](http://recall.ap01.aws.af.cm/)时，会显示一个带有“禁止”消息的页面。

这些是 appFog 日志：

```
====> /logs/stderr.log <====
...
W, [2012-06-01T06:32:54.008426 #28933]  WARN -- : attack prevented by Rack::Protection::IPSpoofing
211.32.146.42 - - [01/Jun/2012 06:32:54] "GET / HTTP/1.1" 403 - 0.0002
10.0.64.157 - - [01/Jun/2012:06:32:54 UTC] "GET / HTTP/1.0" 403 9 - -> /
W, [2012-06-01T06:32:54.393022 #28933]  WARN -- : attack prevented by Rack::Protection::IPSpoofing
211.32.146.42 - - [01/Jun/2012 06:32:54] "GET /favicon.ico HTTP/1.1" 403 - 0.0002
10.0.64.157 - - [01/Jun/2012:06:32:54 UTC] "GET /favicon.ico HTTP/1.0" 403 9 - -> /favicon.ico 
```

我没有`Rack::Protection::IPSpoofing`在我的代码中使用，但我得到了这些错误。`Rack::Utils`用于辅助块。这是造成问题的原因吗？

我编写的唯一 Ruby 代码如下：

```
require 'sinatra'
require 'data_mapper'
require 'builder'
require 'sinatra/flash'
require 'sinatra/redirect_with_flash'
require 'haml'

enable :sessions

SITE_TITLE = "Recall"
SITE_DESCRIPTION = "'cause you're too busy to remember"

DataMapper::setup(:default, "sqlite3://#{Dir.pwd}/recall.db")

class Note
  include DataMapper::Resource
  property :id, Serial
  property :content, Text, :required => true
  property :complete, Boolean, :required => true, :default => false
  property :created_at, DateTime
  property :updated_at, DateTime
end

DataMapper.finalize.auto_upgrade!

helpers do
  include Rack::Utils
  alias_method :h, :escape_html
end

get '/' do
  @notes = Note.all :order => :id.desc
  @title = 'All Notes'
  if @notes.empty?
    flash[:error] = 'No notes found. Add your first below.'
  end
  haml :home
end

# ... 
```

[您可以在此处](https://github.com/philipjkim/sinatra-quickstart)查看完整的源代码。

我怎么解决这个问题？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T03:22:12.680

这是一个简单的修复，尝试添加这个：

```
set :protection, :except => :ip_spoofing 
```

我们很快就会修补我们的 nginx 来解决这个问题，但这个解决方法现在会有所帮助。

# c# - C# 中的日期时间转换 - 使用格式

> ID：10845681
> 
> 赞同：2
> 
> 时间：2012-06-01T06:51:23.667
> 
> 标签：c#

我需要将 a 转换`String`为`DateTime`格式，为此我只是尝试过

```
DateTime.ParseExact(DateOfBirth,"MM/dd/yyyy",CultureInfo.InvariantCulture); 
```

当我传递像`05/30/2012`.

但是，如果我尝试将该值作为`5/30/2012`显示错误传递：

> 字符串未被识别为有效的 DateTime

为了解决这个问题，我尝试过

```
DateTime.ParseExact(String.Format("{0:MM/dd/yyyy}", DateOfBirth), "MM/dd/yyyy",
                                                  CultureInfo.InvariantCulture); 
```

它仍然无法正常工作。在这里，如果我尝试显示相同格式`String.Format("{0:MM/dd/yyyy}", DateOfBirth)`的值`5/30/2012`而不是`05/30/2012`.

我该如何解决这个问题，任何人都可以在这里帮助我...

在 C# 中检查此链接 [字符串到 DateTime 转换](https://stackoverflow.com/questions/336226/string-to-datetime-conversion-in-c-sharp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:03:33.683

使用`M/d/yyyy`而不是您正在使用的格式说明符。也只使用一个`M`带有前导零的匹配月份。对于`d`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:15:13.027

如果您需要使其与文化无关..

```
var dateTimeFormat = CultureInfo.CreateSpecificCulture(CultureInfo.CurrentUICulture.Name).DateTimeFormat;
dateTimeFormat.ShortDatePattern = 
    Regex.Replace(Regex.Replace(dateTimeFormat.ShortDatePattern, "[M]+", "MM"), "[d]+", "dd");

var newDate = date.HasValue ? date.Value.DateTime.ToString("d", dateTimeFormat) : null; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T06:55:36.347

尝试只使用“d”而不是“MM/dd/yyyy”。

所以，声明应该是：

```
var date = DateTime.ParseExact(DateOfBirth, "d", CultureInfo.InvariantCulture); 
```

这方面的文档在这里：http: [//msdn.microsoft.com/en-us/library/w2sa9yss.aspx](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)

**编辑**

糟糕，我误读了文档。它应该是“M/d/yyyy”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T06:56:54.913

假设你的`DateOfBirth`字符串总是用斜杠分隔，你可以尝试这样的事情：

```
string[] dateParts = DateOfBirth.Split('/');
DateTime.ParseExact(string.Format("{0:00}", dateParts[0]) + "/" + string.Format("{0:00}", dateParts[1]) + "/" + string.Format("{0:0000}", dateParts[2])); 
```

我认为问题是格式字符串无法识别，因为`DateOfBirth`它不是`DateTime`对象。因此，您通过自己重新格式化字符串来强制格式化

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T07:03:22.353

有一个您可能感兴趣的超载

```
DateTime.ParseExact(DateOfBirth,
                    new[] { "MM/dd/yyyy", "M/dd/yyyy" },
                    CultureInfo.InvariantCulture,
                    DateTimeStyles.None); 
```

这应该可以帮助您处理单个和两位数的月份部分（因为`5`格式对您来说是失败的`MM`）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-01T07:04:16.103

由于您的字符串中有分隔符（即`/`），您可以这样做；

```
DateTime.ParseExact(DateOfBirth,"M/d/yyyy",CultureInfo.InvariantCulture); 
```

这将解析*一位数或两位数的 days/months*。当您使用 时`MM/dd/yyyy`，您要求它们都是两位数，在这种情况下，这显然不是您想要的。

# perl - 根据自定义重复值从数组中删除一个条目

> ID：10845683
> 
> 赞同：2
> 
> 时间：2012-06-01T06:51:47.390
> 
> 标签：perl

我正在寻找一些帮助。

要求：

通过一些验证，我在一个数组中存储了以下类型的值。

```
@array_name = ("Rajesh","Raju","Ram","John","peter"); 
```

现在我从一些背景知道“Rajesh”、“Ram”、“peter”是重复的条目，所以我希望我的输出是：

```
@array_name = ("Rajesh","Raju","John");
# or 
@array_name = ("Ram","Raju","John");
# or 
@array_name = ("peter","Raju","John"); 
```

我已经完成了如下示例程序，但它并不满足我...

```
 my $spcific_output ="";
    my $output ="";

    foreach my $name (@array_name) 
    {
        if($name eq "Rajesh" || $name eq "Ram" || $name eq "peter")
        {
            $spcific_output = "Rajesh and Ram and peter");
        }
        else
        {
            $output .= "My Name is $name";
        }
    } 
    $output .= $spcific_output; 
```

有什么最好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:42:15.923

如果您使用的是 v5.10 或更高版本，则可以在具有重复名称的数组上使用智能匹配：

```
#!/usr/bin/env perl
use strict;
use warnings;
use Data::Dumper;

my @names = qw(Rajesh Raju Ram John Peter);
my @dupl = qw(Rajesh Ram Peter);
my $seen;

my @names = grep {$_ ~~ @dupl ? !$seen++ : 1} @names;

print Dumper \@names; 
```

输出：

```
$VAR1 = [
          'Rajesh',
          'Raju',
          'John'
        ]; 
```

条件 in`grep`评估`!$seen++`来自 的名称`@names`是否在 中`@dupl`，并且`$_`仅在`$seen`为 0 时保留。否则`1`( `true`) 被评估并`$_`保留。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:32:42.457

使用 Perl，每当您想从某个集合中获取唯一值时，请考虑如何使用散列来帮助您自动折叠重复项，或者至少帮助您记住您已经看到的值。例如，请参阅[如何从两个哈希中获取唯一键？](http://perldoc.perl.org/perlfaq4.html#How-can-I-get-the-unique-keys-from-two-hashes%3f)在 Perl FAQ 的第 4 节中。

您的案例有点棘手，因为您有一组可互换的名称，因此您必须记录此信息。

```
sub add_names {
  my $equivalent = shift;

  for (@_) {
    my @names = map lc, @$_;
    for (@names) {
      die "$0: overlap on name '$_'" if exists $equivalent->{$_};
      $equivalent->{$_} = \@names;
    }
  }

  $equivalent;
} 
```

这里，`$equivalent`是对哈希的引用。打电话后

```
add_names $equivalent, [ qw/ Rajesh Ram peter / ]; 
```

散列将具有键`'rajesh'`, `'ram'`，`'peter'`其值为 all `[ 'rajesh', 'ram', 'peter' ]`。以这种方式构建它意味着无论我们首先遇到哪个名称，我们都可以获得完整的名称集。

另请注意，您可以在一次调用中堆叠多组名称，如

```
add_names $equivalent, [ qw/ Rajesh Ram peter / ],
                       [ qw/ Jim Bob Bubba / ]; 
```

映射出名称后，我们现在可以处理一个列表并保留我们找到的每个集合中的第一个名称。对于给定的名称，请检查我们之前是否见过它或任何它的等价物。如果我们还没有看到它，请保存名称并将所有等效项标记为已看到。

```
sub remove_duplicates {
  my $equivalent = shift;

  my %seen;
  my @uniques;
  foreach my $name (@_) {
    my $normal = lc $name;
    unless ($seen{$normal}) {
      push @uniques, $name;
      ++$seen{$_} for @{ $equivalent->{$normal} };
    }
  }

  wantarray ? @uniques : \@uniques;
} 
```

[`wantarray`](http://perldoc.perl.org/functions/wantarray.html)底部的位是一个常见的 Perl 习惯用法，用于使返回值适应调用上下文。如果调用者想要一个数组，我们返回该数组。如果不是，我们返回一个标量，即对我们唯一名称数组的引用。

把它们放在一起就可以了

```
my $equivalent = {};
add_names $equivalent, [qw/ Rajesh Ram peter /];

my @array_name = ("Rajesh","Raju","Ram","John","peter");
print $_, "\n" for remove_duplicates $equivalent, @array_name; 
```

输出：

```
拉杰什
拉朱
约翰
```

# iphone - NSCalendar 查找当月的周六和周日

> ID：10845688
> 
> 赞同：0
> 
> 时间：2012-06-01T06:51:56.740
> 
> 标签：iphone, ios, nsdate, nscalendar, nsdatecomponents

我正在做一个项目，我想在我的应用程序中集成 NSCalendar 功能。因此我用谷歌搜索并找到[了这个](http://super-mak.blogspot.in/2011/06/how-to-create-calendar-in-iphone-and.html)解决方案。它给了我一年中的所有月份，我也可以选择特定的日期。没关系。但是我想以某种方式禁用每个月的所有星期六和星期日，但是当我点击上个月或下个月时，它会更改选择。我已经经历了几乎所有的stackoverflow问题，但我没有找到合适的方法来做这件事。我请求大家对此是否有任何灵活的解决方案，我可以禁用周末和任何特定日期。流程应该是这样的：

1.  运行应用程序当前月份是显示和所有星期六和太阳禁用。
2.  当点击下个月或上个月时，相应的星期六和太阳应按该月禁用。
3.  我想禁用的任何特定日期的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:22:58.443

您好，我更新了文件，并创建了一系列禁用日期，请在此处查看代码表

RootViewController.m 文件 [http://shorttext.com/l7iKEdf](http://shorttext.com/l7iKEdf)

RootViewController.h 文件 [http://shorttext.com/lFaath](http://shorttext.com/lFaath)

只需用您提供的链接中的原始文件替换这些文件，您会发现我添加了一个 disabledDays NSMutableArray 向它添加任何整数，如下所示 0 = sat 6 = friday 并且那天将被禁用

# iphone - openEars 项目错误和警告

> ID：10845694
> 
> 赞同：0
> 
> 时间：2012-06-01T06:52:26.557
> 
> 标签：iphone, ios, openears

命令 /Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/clang 失败，退出代码为 1

警告：“ `iOS deployment target '5.0' for architecture 'armv6' and variant 'normal' is greater than the maximum value '4.2.99' for the iOS 4.2 SDK.` ”

" `ld: warning: unexpected srelocation type 9`"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:00:19.637

您已将项目配置为部署到 iOS 5.0，但您正在构建 iOS 4.2 SDK。

通常，您可以反过来执行此操作：针对最新的 SDK（例如 5.0）构建，但将部署设置为您支持的最低版本（例如 4.2）。

# nhibernate - NHibernate 使用 Mapping by Code 的一对一映射

> ID：10845695
> 
> 赞同：0
> 
> 时间：2012-06-01T06:52:29.027
> 
> 标签：nhibernate, mapping-by-code

我有一个这样的类结构：

```
public class BaseEntity
{
    public Guid Id { get; set; }
}

// CREATE TABLE Project (Id, Name)
public class Project : BaseEntity
{
    public ProjectProperties Properties { get; set; }
    public string Name { get; set; }
}

// CREATE TABLE ProjectProperties (Id, Markup)
// ForeignKey from ProjectProperties.Id -> Project.Id
public class ProjectProperties  : BaseEntity
{
    public int Markup { get; set; }
} 
```

使用 NH 3.2 和按代码映射的正确方法是什么？我找不到通过 PK 建立 1:1 关系的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:59:31.343

您可以使用 Join 因为主键匹配。它甚至不需要自己的 Id，因为它依赖于 Project

```
public class ProjectProperties
{
    public int Markup { get; set; }
}

// in ProjectMapping
Join("ProjectProperties", join =>
{
    join.Key("Id");
    join.Component(x => x.ProjectProperties, c =>
    {
        c.Property(x => x.Markup);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:08:24.397

我认为您应该使用此代码。

```
OneToOne(x => x.Properties,
           x => x.PropertyReference(typeof(ProjectProperties).GetProperty("Properties"))); 
```

# android - WebView 的大小正在扩大，但没有按照其中的文本收缩

> ID：10845701
> 
> 赞同：3
> 
> 时间：2012-06-01T06:52:59.687
> 
> 标签：android, webview

我正在使用 WebView 来显示解析的 XML 和 HTML 内容。我已将 webview 的 layout_height 设置为 wrap_content。当物质很大时它工作得很好，但是当物质很小时它不会包裹到它下面的空间仍然是白色的。请告诉我每次更改 webView 中的内容时如何包装它。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background = "#ffffff"
>

<LinearLayout  android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background = "#ffffff" >

 <WebView android:layout_height = "wrap_content"
  android:layout_width = "wrap_content" 
  android:id = "@+id/webcontent"    
   />  

<LinearLayout android:layout_width = "fill_parent"
 android:layout_height = "wrap_content"
 android:orientation = "horizontal"
 android:id = "@+id/buttons"
 android:background="#ffffff">
 <Button android:layout_height = "wrap_content"
     android:layout_width = "0dp" 
     android:id = "@+id/previousdata"         
     android:text = "Back"
     android:layout_weight = "1"
      android:layout_gravity="center_vertical"/>
   <Button android:layout_height = "wrap_content"
     android:layout_width = "0dp" 
     android:id = "@+id/nextdata"
     android:layout_weight = "1"
     android:text = "Next"
     android:layout_gravity="center_vertical"/>
  </LinearLayout>
</LinearLayout> 
 </ScrollView> 
```

现在我遇到的问题是，如果我在纵向模式下运行我的应用程序，webView 会提供额外的空白空间而不是根据数据收缩，但是如果我将方向更改为横向，空白空间就会减少......请解释发生了什么在我看来，我怎样才能减少额外的空白......提前谢谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:06:06.083

**Android 属性：** `android:layout_weight = "1`在布局中应该可以工作...

# java - MySQLNonTransientConnectionException：连接关闭后不允许任何操作。连接

> ID：10845703
> 
> 赞同：16
> 
> 时间：2012-06-01T06:53:10.723
> 
> 标签：java, hibernate, tomcat, struts

我构建了一个 Web 应用程序并在本地部署，工作完美。我将它部署在远程服务器上并开始获取：异常

```
> javax.servlet.ServletException: could not execute query 
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:518) 
org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:421) 

>root cause 

>org.hibernate.exception.JDBCConnectionException: could not execute query 
org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:74) 
org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43) 
org.hibernate.loader.Loader.doList(Loader.java:2223) 
org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104) 
org.hibernate.loader.Loader.list(Loader.java:2099) 
org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:94) 
org.hibernate.impl.SessionImpl.list(SessionImpl.java:1569) 
org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:283) 
data.dao.UserDAO.findByUsername(UserDAO.java:42) 
action.registration.LoginAction.execute(LoginAction.java:24) 
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
java.lang.reflect.Method.invoke(Method.java:597) 
com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:399) 
com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:262) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:224) 
com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:213) 
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150) 
org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48) 
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.interceptor.ParametersInterceptor.intercept(ParametersInterceptor.java:161) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:105) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:83) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:207) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:74) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:127) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:107) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:206) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:115) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:143) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.interceptor.PrepareInterceptor.intercept(PrepareInterceptor.java:115) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:170) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:123) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:50) 
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:507) 
org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:421) 

>root cause 

>com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: No operations allowed after connection closed.Connection was implicitly closed due to underlying exception/error: 

** BEGIN NESTED EXCEPTION ** 
    >com.mysql.jdbc.exceptions.jdbc4.CommunicationsException 
MESSAGE: Communications link failure 

>Last packet sent to the server was 43 ms ago. 

>STACKTRACE: 

>com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure 

>Last packet sent to the server was 43 ms ago. 
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) 
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) 
at java.lang.reflect.Constructor.newInstance(Constructor.java:513) 
at com.mysql.jdbc.Util.handleNewInstance(Util.java:406) 
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1074) 
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2985) 
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2871) 
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3414) 
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1936) 
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2060) 
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2542) 
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1734) 
at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1885) 
at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:186) 
at org.hibernate.loader.Loader.getResultSet(Loader.java:1787) 
at org.hibernate.loader.Loader.doQuery(Loader.java:674) 
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236) 
at org.hibernate.loader.Loader.loadEntity(Loader.java:1860) 
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:48) 
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:42) 
at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3042) 
at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:395) 
at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:375) 
at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:139) 
at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:195) 
at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:103) 
at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:878) 
at org.hibernate.impl.SessionImpl.get(SessionImpl.java:815) 
at org.hibernate.impl.SessionImpl.get(SessionImpl.java:808) 
at data.base._BaseRootDAO.get(_BaseRootDAO.java:228) 
at data.base._BaseRootDAO.get(_BaseRootDAO.java:217) 
at data.base.BaseUserDAO.get(BaseUserDAO.java:49) 
at util.UserUtil.getUser(UserUtil.java:22) 
at action.market.ArmsDealerAction.display(ArmsDealerAction.java:62) 
at action.market.ArmsDealerAction.displayUser(ArmsDealerAction.java:54) 
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
at java.lang.reflect.Method.invoke(Method.java:597) 
at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:399) 
at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:262) 
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:224) 
at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:213) 
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150) 
at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48) 
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
at com.opensymphony.xwork2.interceptor.ParametersInterceptor.intercept(ParametersInterceptor.java:161) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:105) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:83) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:207) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:74) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:127) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
at org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:107) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
at 
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:123) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188) 
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213) 
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:174) 
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117) 
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108) 
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:151) 
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:874) 
at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665) 
at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528) 
at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81) 
at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689) 
at java.lang.Thread.run(Thread.java:619) 
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost. 
at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2431) 
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2882) 
... 141 more 

** END NESTED EXCEPTION ** 

>sun.reflect.GeneratedConstructorAccessor72.newInstance(Unknown Source) 
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) 
java.lang.reflect.Constructor.newInstance(Constructor.java:513) 
com.mysql.jdbc.Util.handleNewInstance(Util.java:406) 
com.mysql.jdbc.Util.getInstance(Util.java:381) 
com.mysql.jdbc.SQLError.createSQLException(SQLError.java:984) 
com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956) 
com.mysql.jdbc.SQLError.createSQLException(SQLError.java:926) 
com.mysql.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:1098) 
com.mysql.jdbc.ConnectionImpl.prepareStatement(ConnectionImpl.java:4076) 
com.mysql.jdbc.ConnectionImpl.prepareStatement(ConnectionImpl.java:4042) 
org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:505) 
org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:423) 
org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:139) 
org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1547) 
org.hibernate.loader.Loader.doQuery(Loader.java:673) 
org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236) 
org.hibernate.loader.Loader.doList(Loader.java:2220) 
org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104) 
org.hibernate.loader.Loader.list(Loader.java:2099) 
org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:94) 
org.hibernate.impl.SessionImpl.list(SessionImpl.java:1569) 
org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:283) 
data.dao.UserDAO.findByUsername(UserDAO.java:42) 
action.registration.LoginAction.execute(LoginAction.java:24) 
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
java.lang.reflect.Method.invoke(Method.java:597) 
com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:399) 
com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:262) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:224) 
com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:213) 
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150) 
org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48) 
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.interceptor.ParametersInterceptor.intercept(ParametersInterceptor.java:161) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:105) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:83) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:207) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:74) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219) 
com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218) 
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455) 
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216) 
com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:127) 
```

我使用 hibernate 和 struts 构建 Web 应用程序并将 Web 应用程序部署在 Linux 服务器中。它的登录功能运行了一段时间，但在登录后无法正常工作并在 Tomcat 日志文件中显示上述异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T08:50:38.430

根据错误堆栈跟踪，您与 MySQL 服务器的连接丢失。

```
>root cause 

>com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException:
  No operations allowed after connection closed.
  Connection was implicitly closed due to underlying exception/error: 

** BEGIN NESTED EXCEPTION ** 
    >com.mysql.jdbc.exceptions.jdbc4.CommunicationsException 
MESSAGE: Communications link failure 

>Last packet sent to the server was 43 ms ago. 

>STACKTRACE: 

>com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure 
```

很明显，根本原因是`Communications link failure`。

尝试 ping 您的数据库服务器，看看您是否能够连接。
否则解决网络问题，然后连接。没有其他选择。

您可以向数据库服务器发出轻量级`ping`以检查连接可用性。
请阅读以下讨论和文章：

1.  [ping MySQL 服务器](https://stackoverflow.com/questions/4569956/ping-a-mysql-server)
2.  [Ping 语法和示例](http://dev.mysql.com/doc/refman/5.0/en/connector-j-usagenotes-j2ee-concepts-connection-pooling.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-04T06:52:02.947

只需检查一次您是否在 Repository 类中添加了**@Repository**注释。因为这也可能是异常的主要原因。

# typo3 - 排版用图像替换文本

> ID：10845711
> 
> 赞同：0
> 
> 时间：2012-06-01T06:53:54.563
> 
> 标签：typo3, typoscript

我想在我的网站上做一个简单的倒计时，它使用下面的代码。

常数：

```
lib.countdown.date = 1293814800 
```

设置 ：

```
lib.countdown = COA_INT  
lib.countdown {  
  10 = TEXT  
  10.cObject = TEXT  
  10.cObject.data = date:U  
  10.cObject.wrap = ({$lib.countdown.date} -|)/86400  
  10.prioriCalc = intval  
  10.wrap = | 
} 
```

我得到的设计意味着我需要使用图像作为数字，但我不知道如何将文本转换为图像。有没有办法通过 GIFBuilder 或其他方法来完成？或者我应该以不同的方式处理这个问题？

# java - Apache Pivot TableView 列中的自定义样式

> ID：10845712
> 
> 赞同：0
> 
> 时间：2012-06-01T06:53:54.633
> 
> 标签：java, apache-pivot

我正在使用 apache-pivot 构建一个 TableView，它将包含一些包含货币值的单元格（如果值为 null，则为“-”）。对于视觉反馈，如果值为零或正，我希望文本显示为绿色，如果值为负，则显示为红色。我不太确定从哪里开始 - 任何指针？

非常感谢，

约瑟夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:42:45.647

在 Pivot 的用户邮件列表上找到了答案 - 解决方案是`TableViewCellRenderer`根据单元格的值在此处扩展和应用颜色样式。

# python - django-social-auth：没有保存推特的电子邮件

> ID：10845713
> 
> 赞同：6
> 
> 时间：2012-06-01T06:53:55.030
> 
> 标签：python, django, twitter, django-socialauth

当我访问时`127.0.0:8000/associate/twitter`，我的 django 会获取除电子邮件地址之外的所有 twitter 信息。

访问没有问题`127.0.0:8000/associate/facebook`，我只是想知道为什么我的 django 没有收到 twitter 帐户的电子邮件？

有人知道如何解决我的案子吗？提前致谢 ...

这是我的 settings.py

```
FACEBOOK_APP_ID              = '.....'
FACEBOOK_API_SECRET          = '.........'
FACEBOOK_EXTENDED_PERMISSIONS = ['email']
#twitter
TWITTER_CONSUMER_KEY = '.........'
TWITTER_CONSUMER_SECRET = '.........' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:52:12.540

twitter 不提供电子邮件。[在验证凭据](https://dev.twitter.com/docs/api/1.1/get/account/verify_credentials)时，您将可以访问所提供的数据

# jquery - jquery load() 片段 url 变量

> ID：10845715
> 
> 赞同：0
> 
> 时间：2012-06-01T06:54:01.550
> 
> 标签：jquery, ajax, load, fragment

我创建了一些 jQuery 代码来为我的网站异步加载内容，但我无法只显示要显示的片段。这是因为我使用变量来包含 URL。如何在传递 url 变量时为#page-content 加载页面片段？

jQuery代码：

```
$('.level2 a, level3 a, level4, a').click(function(e){
    e.preventDefault();
    $('#page-content').load(this.href '#page-content'); //pages finished loading
}); //clicked on nav 
```

显然，我得到的是 load() 版本，没有在选择器中指定的片段，如 jQuery API 中所述。当 + 只会让 jQuery 认为它是非片段版本时，如何将 url 添加到选择器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:56:36.457

```
$('#page-content').load(this.href '#page-content'); 
```

应该

```
$('#page-content').load(this.href + ' #page-content'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:55:22.613

```
$('#page-content').load(this.href '#page-content'); 
```

应该写成

```
$('#page-content').load(this.href +  ' #page-content');
                                      ^ -- need an space here
                                  ^ -- string join using + 
```

# xml - 区分标记名称和属性“名称”XML PowerShell

> ID：10845716
> 
> 赞同：1
> 
> 时间：2012-06-01T06:54:03.233
> 
> 标签：xml, powershell, xmlnode, xml-attribute

我有一个 XML 输入，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
 <Content>
    <section name="FileID"/>
    <FileID>109F2AEA-6D9C-4127-963A-9C71D4155C5D</FileID>
       <File Path="C:\test.config">
          <Tag TagName="configuration"/>
       </File>
 </Content> 
```

当我使用 PowerShell 中的以下代码行对每个节点进行递归搜索以识别名称为“FileID”的节点时：

```
if($ConfigChildItem.Name -eq "FileID")
{
    ...
} 
```

其中 $ConfigChildItem 以递归方式填充 XML 中的节点以进行搜索。通过这个，我期望得到名称为“FileID”的节点，例如：

```
<FileID>109F2AEA-6D9C-4127-963A-9C71D4155C5D</FileID> 
```

但它正在输出如下标签：

```
<section name="FileID"/> 
```

因为它们的属性“name”的值为“FileID”。如何仅获取名称为“FileID”的标签，而不是属性名称为“name”且这些属性的值为“FileID”的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:12:01.757

执行此操作的众多方法之一（使用 xpath）：

```
$xml = [XML] @'
<?xml version="1.0" encoding="utf-8"?>
 <Content>
    <section name="FileID"/>
    <FileID>109F2AEA-6D9C-4127-963A-9C71D4155C5D</FileID>
       <File Path="C:\test.config">
          <Tag TagName="configuration"/>
       </File>
 </Content>
'@

$expression = "Content/FileID"
$navigator = $xml.PSBase.CreateNavigator()
$node = $navigator.Evaluate($expression)
$node | Select OuterXml # or any other properties 
```

根据您的评论进行编辑：

```
$xml = [xml](Get-Content "c:\temp\test.xml")
$xml.SelectSingleNode("//FileID")  | ?{ $_.InnerText -eq "109F2AEA-6D9C-4127-963A-9C71D4155C5D" } | %{ $_.InnerText = "blah" }
$xml.Save("c:\temp\test.xml") 
```

# android - 在 android 问题中将 android .apk 下载为 .zip

> ID：10845717
> 
> 赞同：4
> 
> 时间：2012-06-01T06:54:03.940
> 
> 标签：android

我已经开发了一个应用程序，但是当我的客户尝试从使用三星 GT19003 提供的 url 下载应用程序时，它正在以 .zip 文件的形式下载，点击它说无法打开文件错误。而它以 .apk 的形式下载并且在我们的设备上运行良好。请帮助我，我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-01-05T04:36:23.207

一个简单的解决方案是在 /etc/mime.types 中添加以下行

```
application/vnd.android.package-archive     apk 
```

并重新启动你的 apache。

这将强制浏览器将文件下载为“apk”，而不是附加“zip”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-30T08:19:19.483

确保您已将 http 设置`Content-Type`为`application/vnd.android.package-archive`

这让 chrome 知道它是一个应用程序而不是一个 zip。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T07:10:13.197

如果它被下载为 .zip

1.  您或您的客户可以使用**File Expert** `application`解**压缩**此 . **zip**文件，它必须在解压缩文件夹中显示 .apk 文件

2.  为您的用户提供直接 apk 链接，他/她使用默认浏览器下载或使用其他类似 Opera 的链接，如果是 .apk 文件链接，则必须按原样下载。

3.  您可能正在使用某些内容站点，该站点以特定的下载方法压缩文件，请确保它用于直接 .apk 链接。

**编辑1：**

1.  最后但并非最不重要的一点**是 .apk 只是一个 zip 文件**，所以这不是问题，如果可以的话**，只需重命名它（从 .Zip 到 .apk） ，我希望它能解决问题**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-25T04:56:26.970

在我的情况下，这个问题也与@alireza-fattahi 提到的关于标题的问题相同。

在这里分享这个是因为在我们的例子中，该文件位于**Azure 存储**中并由**CDN**访问，以防万一有人遇到同样的问题。

## 修复 Azure Sorage 和 CDN

默认情况下，上传的 APK blob 的内容类型为 ，`application/zip`并且与 reposnse 标头中反映的内容类型相同，导致下载的文件`.zip`在下载完成后在 Android OS 上获得扩展名。

我必须在存储 CDN 中设置自定义规则以覆盖`content-type`响应头`application/vnd.android.package-archive`

> 设置新规则后记得清除 CDN 缓存

阅读有关[Azure CDN 规则引擎](https://docs.microsoft.com/en-us/azure/cdn/cdn-standard-rules-engine-actions)的更多信息。

[![在此处输入图像描述](../Images/3c8944b45c7d2bb7e728ae22dd90e224.png)](https://i.stack.imgur.com/BgdOp.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-29T11:36:46.520

这是示例：//在此处设置您的下载apk路径

> $path= public_path()。"/upload/apk/Ninja11.apk";

```
//Set header here like this
$headers =  [
            'Content-Type'=>'application/vnd.android.package-archive',
            'Content-Disposition'=> 'attachment; filename="ninja-release.apk"',
        ]; 
```

> **返回响应（）->文件（$path，$headers）；**

这是 Laravel 框架代码，但同样可以在其他框架中使用。只需设置内容类型

> 注意：这不是 Android 方面的问题

# c++ - 这个 strncpy 存在哪些安全问题？

> ID：10845718
> 
> 赞同：1
> 
> 时间：2012-06-01T06:54:16.937
> 
> 标签：c++, c, security, strncpy

> **可能重复：**
> [为什么 strncpy 不安全？](https://stackoverflow.com/questions/869883/why-is-strncpy-insecure)

有哪些安全问题`strncpy()`：

```
 function foo(char * param) {
   char local[100];
     /* do stuff */
   strncpy(local, param, strlen(param));
     /* do more stuff */
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T06:57:31.087

通常，最大长度（第 3 个）参数[`strncpy(3)`](http://netbsd.gw.com/cgi-bin/man-cgi?strcpy%203%20NetBSD-5.1)是目标的大小，而不是源的大小。将传输限制为源的大小实际上没有任何意义，因为这是使用更危险的 plain 传输的最大值`strcpy(3)`。

而且，要回答这个问题，问题在于这不是[内存安全操作](http://en.wikipedia.org/wiki/Memory_safety)，因此攻击者可以提供比缓冲区更长的字符串，这会覆盖堆栈上的代码，并且如果精心安排，可以从攻击者。

# iphone - 如何更改 CALayer 的默认动画时间？

> ID：10845720
> 
> 赞同：3
> 
> 时间：2012-06-01T06:54:33.373
> 
> 标签：iphone, core-animation, calayer

我使用这些代码来移动 CALayer：

```
CGPoint position = self.position;
position.x += 10;
position.y += 10;
self.position = position; 
```

当我在没有任何动画调用的情况下更改层的位置时，会有一个默认动画。当我在 touchesMoved:withEvent: 中使用这些代码时，这将导致层的移动滞后。

我想要做的是删除默认动画，并立即移动图层，以便它可以快速响应触摸事件，就像 UIView 的“中心”属性一样。

我应该怎么办？特别感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T14:24:14.387

另一张海报的想法是正确的，但没有提供足够的信息。

如果您想立即更改图层属性而不使用动画，则需要将这些更改放在禁用操作的 CATransaction 中：

```
[CATransaction begin];
//[CATransaction setAnimationDuration: 1.0/30.0];
[CATransaction setDisableActions: TRUE];
//Put layer changes you want to take place without animation here.
[CATransaction commit]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:06:11.497

简单设置

```
 [CATransaction setDisableActions:YES]; 
```

这将使图层移动没有延迟

# c++ - 生成独立 C++ 代码的解析器生成器

> ID：10845723
> 
> 赞同：2
> 
> 时间：2012-06-01T06:55:02.307
> 
> 标签：c++, parsing, parser-generator

是否有生成独立 C++ 代码的 LALR 解析器生成器？我希望它会生成两个名为“Parser.cpp”和“Parser.hpp”的文件，并且生成的解析器在一个可以用于解析的类中实现（我可以包装在任何命名空间中）需要。

我想用它来娱乐（即小型个人项目），并且我希望输出是独立的（没有任何标题），这样我就知道我可以在任何有 C++ 编译器的地方编译它。

**到目前为止的搜索：**

我看过 flex/bison，但是 AFAIK 它们都需要特殊的头文件和库。我也看过一点 ANTLR，但对我来说它可以生成独立的 C++ 代码并不明显。如果有人可以确认它可以，那么我可能会更多地研究它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:48:49.890

[GOLD Parser](http://goldparser.org/)（Bart Kiers 提到了 Wikipedia 上的列表）支持 C 和 C++ 语言。它不会生成完全独立的 C/C++ 源代码文件。它所做的只是生成可以被“解析引擎”使用的 Lexer/Parser 表。

为了完成你的任务（或类似的事情），我做了以下事情：

1.  以 Gold 格式准备您的 LALR 语法

2.  生成解析表（一个二进制文件）

3.  使用旧技巧将二进制文件转换为头文件，例如

    无符号字符 ParseTable[] = { ... };

4.  从“解析引擎”源修改加载器（或使用支持内存加载的 C 版本，我记得）

5.  将 GPEngine（如果它是 C++ 版本）的源代码合并到 .h/.cpp 对中。

6.  将 ParseTable 附加到 .cpp

当然，这不是那么简单，但原则上所有步骤都可以在一个“组合”脚本中完成，该脚本可以与多种语法一起使用。

我想主要的缺点是 GOLD 是封闭源代码且仅限 Windows（这意味着要生成解析表，您必须使用 Windows 机器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:14:30.853

flex+bison 的输出由两个 .c 文件和一个 .h 文件组成。这些是完全独立的，因为您只需将它们编译到您的应用程序中即可使用解析器。不需要额外的库或头文件（除了标准的 C 库）。

除非我误解了你的要求，否则你绝对可以用 flex+bison 做你想做的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T07:01:11.093

ANTLR[可以生成 C++](http://www.antlr.org/wiki/pages/viewpage.action?pageId=29130834)代码，尽管恕我直言，我发现对 C++ 的支持有点弱，它更像 C 代码。它仍然是使用 ANTLRWorks 的良好环境，为您提供语法树的图形表示。

# magento - Magento 模板设计

> ID：10845727
> 
> 赞同：1
> 
> 时间：2012-06-01T06:55:19.943
> 
> 标签：magento

在我的 magento 模板中，我在主页中使用了以下代码“getChildHtml('content')”。它在哪里使用模板文件中的 getChildHtml() 加载内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:54:54.083

您可以在 page.xml 中找到您的页面的全局结构。例如，如果您可以使用 3 列

```
<default translate="label" module="page">
    <label>All Pages</label>
    <block type="page/html" name="root" output="toHtml" template="page/3columns.phtml">
.... 
```

然后，在您的设计主题的模板 page/3columns.phtml 中，您可以看到此 phtml 并在其中看到：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php echo $this->getLang() ?>" lang="<?php echo $this->getLang() ?>">
<head>
<?php echo $this->getChildHtml('head') ?>
</head>
<body<?php echo $this->getBodyClass()?' class="'.$this->getBodyClass().'"':'' ?>>
<?php echo $this->getChildHtml('after_body_start') ?>
<div class="wrapper">
    <?php echo $this->getChildHtml('global_notices') ?>
    <div class="page">
        <?php echo $this->getChildHtml('header') ?>
        <div class="main-container col3-layout">
            <div class="main">
                <?php echo $this->getChildHtml('breadcrumbs') ?>
                <div class="col-wrapper">
                    <div class="col-main">
                        <?php echo $this->getChildHtml('global_messages') ?>
                        <?php echo $this->getChildHtml('content') ?>
                    </div>
                    <div class="col-left sidebar"><?php echo $this->getChildHtml('left') ?></div>
                </div>
                <div class="col-right sidebar"><?php echo $this->getChildHtml('right') ?></div>
            </div>
        </div>
        <?php echo $this->getChildHtml('footer') ?>
        <?php echo $this->getChildHtml('before_body_end') ?>
    </div>
</div>
<?php echo $this->getAbsoluteFooter() ?>
</body>
</html> 
```

使用 getChildHtml('content') ?>。这能解决你的问题吗？

# c# - SQL插入后禁用gridview刷新？

> ID：10845734
> 
> 赞同：1
> 
> 时间：2012-06-01T06:55:51.897
> 
> 标签：c#, asp.net

我正在使用 gridview 和 SQL 数据源。

在我在数据表中插入信息后，如果我刷新页面，查询将再次执行，如果我再次刷新它，它将再次执行。

有什么方法可以禁用刷新或使事件唯一在引发事件时仅执行一次而不在刷新时执行

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:59:40.890

如果我理解正确的话。您有一个带有按钮的 Web 表单。

您按下导致回发的按钮和按下按钮的事件处理程序来执行。

然后你点击刷新，页面让按钮事件处理程序再次执行。

原因是您刷新了发送到服务器的最后一条信息。这是__doPostback中的按钮点击信息。这就是您再次看到按钮触发事件的原因。

ASP.NET 不提供直接执行此操作的方法。

这是一篇[关于](http://www.codeproject.com/Articles/10240/Detecting-Page-Refresh)如何检测回发刷新的文章。[并且您的问题在其他线程](https://stackoverflow.com/questions/6014224/page-refresh-is-firing-the-event-again)上讨论here

# mysql - 查询返回空行之间的日期

> ID：10845737
> 
> 赞同：1
> 
> 时间：2012-06-01T06:56:05.897
> 
> 标签：mysql, datetime, between

我在 web 和 stackoverlow 上浏览了很多帖子和问题。我没有得到以下任何解决方案

我有一个`jobs`带有字段的表

## 工作

```
INT |   datetime    - Format
----------------
id  |   post_date   - Fields
-----------------
1   |   2012-05-30 09:59:58
2   |   2012-05-30 09:59:57
3   |   2012-05-25 09:59:57
4   |   2012-05-24 09:59:57
5   |   2012-05-06 09:59:57 
```

以下是我尝试过的mysql查询，但没有给出任何结果。它导致空记录

**查询 1**

```
select * from jobs
where post_date BETWEEN CAST('2012-05-01' as DATE) and CAST('2012-05-30' as DATE) 
```

**查询 2**

```
select * from jobs
where post_date BETWEEN  
STR_TO_DATE('2012-05-30 09:59:58','YYYY-MM-DD HH:MM:SS') AND STR_TO_DATE('2012-05-1 09:59:58','YYYY-MM-DD HH:MM:SS') 
```

**查询 3**

```
select * from jobs
where post_date BETWEEN  '2012-05-30 09:59:58' AND '2012-05-01 09:59:58' 
```

现在，我怎样才能得到日期之间的结果，需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:01:35.830

您的查询 3 最接近您想要的。这是已解决的问题：

```
select * from jobs
where post_date BETWEEN '2012-05-30 09:59:58' AND '2012-06-01 09:59:58' 
```

问题出在范围的末尾-您有：

```
'2012-05-01 09:59:58' -- This is the first of May 
```

但你需要

```
'2012-06-01 09:59:58' -- This is the first of June 
```

您的查询 3 不返回任何内容，因为范围的结尾在开始**之前**

# python - Django模板比较字符串

> ID：10845738
> 
> 赞同：56
> 
> 时间：2012-06-01T06:56:14.023
> 
> 标签：python, django, django-templates

我是 django 的新手。我遇到了在模板中比较字符串的问题。

我使用 ifnotequal 标签来比较字符串。但它不起作用。

我尝试输出变量：

```
{{ request.user.username }} 
{{ article.creator }} 
```

这里我比较一下：

```
{% ifnotequal request.user.username article.creator %}
    {# output something #}
{% endifnotequal %} 
```

但是当我进行硬编码时：它可以工作。

```
{% ifnotequal "justin" "mckoy" %}
    {# output something #}
{% endifnotequal %} 
```

问题是什么？来自`article.creator`数据库，`user.username`来自请求。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2014-04-16T08:45:10.417

对于模板使用中的字符串比较

```
{% if name == "someone" %}
   ............
   ............
{% endif %} 
```

并且不相等

```
{% if name != "someone" %}
   ............
   ............
{% endif %} 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-06-08T01:56:32.260

尝试这个：

```
{% ifnotequal article.creator|stringformat:"s" request.user.username %} 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-06-01T07:01:05.283

`article.creator`是一个`User`并且`request.user.username`是一个字符串。尝试比较`request.user`。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-05-17T21:25:42.347

```
{% ifequal material.unit 'U' %}
    <p>are equals!<p/>
{% endifequal %} 
```

# entity-framework - 通过反射调用泛型方法导致错误

> ID：10845742
> 
> 赞同：0
> 
> 时间：2012-06-01T06:56:45.417
> 
> 标签：entity-framework, reflection

我有一个扩展方法如下。

```
 public static class ExtensionMethod
{
    public static string GetTableName<T>(this ObjectContext context) where T : class
    {
        //Content
    }
} 
```

我调用这个方法如下。

```
static void Main(string[] args)
    {
        using (BreakAwayEntities context = new BreakAwayEntities())
        {
            Customer cus = context.Customers.First();

            ObjectStateEntry entry = context.ObjectStateManager.GetObjectStateEntry(cus);
            Type t = entry.Entity.GetType();               
            MethodInfo method = typeof(ExtensionMethod).GetMethod("GetTableName");
            MethodInfo genericMethod = method.MakeGenericMethod(t);
            genericMethod.Invoke(null, null);         
        }
    } 
```

但在代码的最后一行“genericMethod.Invoke(null,null)”抛出异常“参数计数不匹配”。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:47:29.487

GetTableName 方法有一个参数，但您调用 Invoke 时，第二个参数为 null，表示不应传递任何参数。您需要将 ObjectContext 作为第二个参数传递：

```
genericMethod.Invoke(null, new object[] { context }); 
```

# kohana - 删除相关记录，有has_many关系

> ID：10845751
> 
> 赞同：2
> 
> 时间：2012-06-01T06:57:42.270
> 
> 标签：kohana, kohana-3, kohana-orm

我在两个表之间有 has_many 关系，例如：“questions”-<“options”[一个问题有很多选项] 我的班级结构是：for question

```
class Model_Admin_sysQuestion extends ORM {

protected $_table_name = 'questions';

protected $_has_many = array(
    'options' => array(
        'model' => 'Admin_sysQuestionOption',
        'foreign_key' => 'question_id',
    ),
);... . 
```

对于选项

```
Class Model_Admin_sysQuestionOption extends ORM {

protected $_table_name = 'questions_options';
protected $_belongs_to = array(
    'question' => array(
        'model' => 'Admin_sysSection',
        'foreign_key' => 'question_id',
    ),
); .... . 
```

我试图使用以下代码删除所有选项的问题：

```
 $question = ORM::factory('Admin_sysQuestion', 30);
        $question->options->delete($question->id);
        $question->delete(); 
```

但它给出了错误

> 错误":"无法删除 admin_sysquestionoption 模型，因为它没有加载。"

任何想法？怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T07:53:13.013

加载多个关系时，您必须调用`find_all`：

```
foreach($question->options->find_all() as $option)
{
   $option->delete();
} 
```

或者使用 DB QBuilder 进行多次删除：

```
DB::delete('questions_options')
    ->where('question_id', '=', 30)
    ->execute($this->_db); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T01:25:38.857

除了@biakevoron 的帖子，您还有 MySQL 选项；只需在两个表之间添加一个对表有`on delete cascade`要求的关系`options`。就我个人而言，我还检查与当前正在处理的对象相关的对象/行，包括显式（删除关系对象）作为游戏的隐式方面。实际上，您应该能够信任 MySQL 做它的工作（它做得很好），但如果有人 ie。改变关系，或将表切换到 MyIsam，直到表变得非常非常大，您可能不会注意到。

玩弄下表。它在选项表上强制建立严格的归属关系，这意味着选项只有在其父项存在时才能存在。

```
CREATE TABLE `options` (
  `id` int(10) unsigned NOT NULL auto_increment,
  `question_id` int(10) unsigned NOT NULL,
  `option` varchar(255) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE `questions` (
  `id` int(10) unsigned NOT NULL auto_increment,
  `question` varchar(255) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

ALTER TABLE `options`
  ADD CONSTRAINT `options_belongs_to` FOREIGN KEY (`id`) REFERENCES `questions` (`id`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

注意 - 唯一的限制是您需要将表放在 InnoDB 引擎上（这与默认的 MyIsam 引擎略有不同，请在[此处查看摘要](https://tapos.wordpress.com/2008/01/10/difference-between-innodb-and-myisam/)并在此处查看[更广泛的版本](http://tag1consulting.com/MySQL_Engines_MyISAM_vs_InnoDB)。

# sockets - TCP 积压耗尽导致未向传入连接发出信号

> ID：10845759
> 
> 赞同：0
> 
> 时间：2012-06-01T06:58:03.577
> 
> 标签：sockets, tcp, connect, nonblocking, backlog

我正在做以下事情：

1.  打开一个监听 TCP 套接字。
2.  将 BACKLOG 设置为 10
3.  打开 50 个连接套接字（使用非阻塞连接）
4.  轮询侦听套接字并接受连接
5.  能够传输任何数据的连接已关闭

我看到的是所有 50 个连接都成功，但是，侦听套接字上的 POLLIN 仅发出约 30 次信号。这意味着只接受 30 个连接。

当我运行 netstat 时，我没有看到挂起的 ESTABLISHED 连接。有几个连接挂在 TIME_WAIT 状态，但这似乎无关紧要。

以上是在 Linux 上观察到的，然而，类似的行为似乎也发生在 FreeBSD 和 NetBSD 上。

有没有人有这种事情的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:39:07.813

我有带外的解释。对它感兴趣的人可以在这里阅读：

[http://www.evanjones.ca/tcp-stuck-connection-mystery.html](http://www.evanjones.ca/tcp-stuck-connection-mystery.html)

# c# - 实体框架标量属性名称更改，更改列名称？

> ID：10845763
> 
> 赞同：2
> 
> 时间：2012-06-01T06:58:15.030
> 
> 标签：c#, .net, entity-framework, c#-4.0, entity-framework-4

在 EF 中，我想了解如何在设计器中更改我的字段名称，而无需更改我在数据库中的列名？例如，代码中模型的字段名称为“UnitPrice”，数据库字段名称应保持为 UNIT_PRICE。请问有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:19:22.090

是的，只需在设计器中打开您的实体模型（.edmx）（双击它应该可以），选择您要更改的列名称并更改“属性”面板中的“名称”字段。顶部提示 -> 如果您在设计器中右键单击表或字段，则从上下文菜单中选择表映射以查看数据库列到模型属性的映射。这个答案假设 VS2010，不确定它在旧版本中是如何工作的，但应该是可行的。

# php - 我找到了一些与 if else 相关的代码，并尝试更改语法，但没有奏效

> ID：10845765
> 
> 赞同：0
> 
> 时间：2012-06-01T06:58:20.853
> 
> 标签：php, wordpress, if-statement

更新：

感谢大家的精彩输入，我现在可以在主页中正常运行代码。仍然无法弄清楚为什么相同的代码在小部件中不起作用。它正在拉下标题和永久链接，所以我知道它正在获取数据，但自定义值返回为零

我正在制作一个 wordpress 页面，其中使用该页面的小组正在接受来自观众的挑战。

挑战页面是一个特殊的模板，显示挑战完成程度的百分比条。

该栏工作正常，chrome 有一个小故障，但客户希望“等待”完成 0% 的挑战和 100% 的“完成”而不是图表。

我已经将此代码放入页面和一个结果奇怪的小部件中。在页面上，只显示百分比栏，但在小部件上，所有挑战都列为“待定”

我的页面代码如下：

```
<?php

/**
* Template Name: Challenges Page
*/

?>
<?php get_header(); ?>

<!-- content -->
<div id="content">
    <?php query_posts( array( 'post_type' => 'challenges', 'posts_per_page' => -1 ) ); ?>
    <?php while (have_posts()) : the_post(); $more = 0; ?>

    <div class="post archive">
        <div class="post-comments"><?php comments_popup_link('0', '1', '%'); ?></div>
        <h3><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h3>

        <?php       
        $target = get_post_meta($post->ID, 'target', true);             
        $complete = get_post_meta($post->ID, 'complete', true);     

        $percentage = $complete / $target;
        $percentage = round($percentage * 100);
        $whatsleft = 100-$percentage;
        if($whatsleft < 0) $whatsleft=0;

        echo "<table width='250' border='0' cellpadding='0' cellspacing='0'><tr>";
        if($complete == $target) {
            echo "<td><img src='http://www.smokeyvstheworld.com/wp-content/uploads/2012/05/completed.gif' style='width:200>px;height:24px;'></td>";
        } else if ($complete == 0) {
            echo "<td><img src='http://www.smokeyvstheworld.com/wp-content/uploads/2012/05/pending.gif' style='width:200>px;height:24px;'></td>";
        } else {
            echo "<td><img src='http://www.smokeyvstheworld.com/wp-content/themes/spectre/images/brown/grnbar.jpg' style='width:". $percentage ."px;height:12px;'></td><td><img src='http://www.smokeyvstheworld.com/wp-content/themes/spectre/images/brown/grybar.jpg' style='width:". $whatsleft ."px;height:12px;'></td>";
        }

        echo "</tr><tr><td colspan='2'><div align='right'>". $complete ." of ". $target ." completed</div></td></tr></table>";                      

?>

<div class="post-date"><?php the_time('l, F jS, Y') ?></div>

<?php if (get_post_meta($post->ID, 'post_image_value', true)) { ?><div class="post-tnail"><a href="<?php the_permalink() ?>"><?php if (get_post_meta($post->ID, 'post_image_value', true) && $mb_resize == 0) { ?><img src="<?php echo bloginfo('template_url'); ?>/thumb.php?src=<?php echo get_post_meta($post->ID, "post_image_value", $single = true); ?>&amp;w=98&amp;h=98&amp;zc=1&amp;q=95" alt="<?php the_title(); ?>" /><?php } else if (get_post_meta($post->ID, 'post_image_value', true) && $mb_resize == 1) { ?><img src="<?php bloginfo('home'); ?><?php echo get_post_meta($post->ID, "post_image_value", $single = true); ?>" alt="<?php the_title(); ?>" /><?php } ?></a></div><?php } ?>
<?php the_excerpt() ?>
<p><a href="<?php the_permalink() ?>" class="more">Continue reading...</a></p>                      
                    </div>

<?php endwhile; ?>

</div>

<div id="sidebar"><?php get_sidebar(); ?></div>    

<?php get_footer(); ?> 
```

我对自己做错了什么感到困惑，为什么相同的代码在一个实例而不是另一个实例中起作用……我尝试从括号切换到冒号再返回等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:12:28.673

尝试

```
        $target = (int) get_post_meta($post->ID, 'target', true);             
        $complete = (int) get_post_meta($post->ID, 'complete', true);     

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:27:59.220

尝试将两者都更改`==`为`===`：

```
if($complete === $target) { 
```

和

```
} else if ($complete === 0) { 
```

编辑：考虑一下， $complete 值可能是一个字符串，所以如果上面不起作用，则将该行更改为

```
} else if ($complete === "0") { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T07:04:06.593

`width:200>px;height:24px;`=>`width:200px;height:24px;`

# android - 如何在 android sqlite 数据库中创建目录？

> ID：10845771
> 
> 赞同：-1
> 
> 时间：2012-06-01T06:59:15.737
> 
> 标签：android, sqlite

我必须在数据库中创建一个目录，其中将存储一些文件。当用户需要任何类型的文件时，该文件将从该目录中获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:10:08.557

没有办法在 sqlite db 中创建目录。

使用 android 提供的 api 进行数据存储阅读本[教程](http://developer.android.com/guide/topics/data/data-storage.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:10:21.850

请先阅读数据库，然后尝试使用它！

**数据库**：

[数据库是有组织的数据集合，如今通常采用数字形式](http://en.wikipedia.org/wiki/Database)。

**目录**：

[目录或文件夹只不过是磁盘上用于存储文件信息的位置](http://filext.com/faq/directory_folder_definition.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T07:01:05.093

您不能在 sqlite 数据库中创建*目录。*

您可以使用在*文件系统*[`File.mkdir`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#mkdir%28%29)上创建一个目录。

或者您在 sqlite 数据库中创建一个*表*。这是一个[很好的教程](http://www.vogella.com/articles/AndroidSQLite/article.html)。

# python - Multiprocessing module in python2.7 causing some issue

> ID：10845782
> 
> 赞同：0
> 
> 时间：2012-06-01T07:00:10.743
> 
> 标签：python, multiprocessing

I am using multiprocessing module in python2.7 and found to have some issue with it, which is currently going out of my head, as in how to resolve it.

The sample code that I am using is as follows:-

```
from multiprocessing import Pool

def func_eachcol(col_index):
    global list_of_lists

    for row in xrange(list_of_lists):
        list_of_lists[row][col_index] = 'Update Value'

class C1:
    def func_callmultiprocess(self):

        global list_of_lists
        col_len = len(cols)
        pool = Pool(col_len)
        for col in xrange(col_len):
            pool.apply_async(func_eachcol, args=(col))
        pool.close()
        pool.join()

        print list_of_lists 
```

Basically, what i am doing, is on each col I am opening up a new process, and iterating through each row of list_of_lists, and then updating on that row,col in that very process.

The issue I am seeing here is that after multiprocessing is over, i cannot see the updated list_of_lists, infact it is the old list_of_lists.

but when i see, inside the multiprocess_function (func_eachcol), then I could see the values getting updated in that very index(row, col).

Please provide some remedy to this problem.

Added one more code, to simple what I wanted to achieve

```
from multiprocessing import Pool

def func_eachcol(col_index):
    print "Hello",
    global list

    print list,
    list[col_index] = -list[col_index]
    print list

class C1:
    def func_callmultiprocess(self):

        global list 
        list = [1,2,3]

        col_len = len(list)

        pool = Pool(col_len)
        for col in xrange(col_len):
            pool.apply_async(func_eachcol, args=(col,))

        pool.close()
        pool.join()

        print list

c = C1()
c.func_callmultiprocess()

**Ouput**
Hello [1, 2, 3] [-1, 2, 3]
Hello [1, 2, 3] [1, -2, 3]
Hello [1, 2, 3] [1, 2, -3]
[1, 2, 3] 
```

Basically what i wanted the output in the end is [-1, -2, -3]. How is it possible.?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:08:03.197

Global variables are *not* shared between multiple processes; you are manipulating a global list in a sub-process only, the parent process won't see the changes.

Review the [documentation on sharing state](http://docs.python.org/library/multiprocessing.html#sharing-state-between-processes) for options on how to pass information between processes. You probably want a `Manager` instance to share your list.

# iphone - 从一个视图控制器移动到另一个视图控制器时，在基于视图的应用程序中从左到右转换

> ID：10845785
> 
> 赞同：2
> 
> 时间：2012-06-01T07:00:16.277
> 
> 标签：iphone, objective-c, ios, xcode

```
MyView *view=[[[MyView alloc] init] autorelease];
[view setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
[self presentModalViewController:view animated:YES]; 
```

我在从一个视图控制器移动到另一个视图控制器时使用了翻转过渡。但我的要求是从左到右过渡。请帮我解决这个问题，谢谢。这是我的代码：

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T07:12:19.480

您需要添加 QuartzCore Framework 然后导入`#import <QuartzCore/QuartzCore.h>`

```
MyView *next = [[MyView alloc] init];
CATransition *animation = [CATransition animation];
[self presentModalViewController:next animated:NO];
[animation setDuration:0.40];
[animation setType:kCATransitionPush];
[animation setSubtype:kCATransitionFromLeft];
//[animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionDefault]];
[[next.view layer] addAnimation:animation forKey:@"SwitchToView1"];
[next release]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T11:21:16.333

我假设您正在从视图控制器 1 中关闭视图控制器 2。在视图控制器 2 中，您正在使用它

```
[self  dismissModalViewControlleAnimated: NO]; 
```

现在在第一个视图控制器中，导入“QuartzCore”标头并使用代码添加 viewWillAppear 方法

```
#import <QuartzCore/QuartzCore.h>

(void)viewWillAppear:(BOOL)animated {

    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];
    [animation setType:kCATransitionPush];
    [animation setSubtype:kCATransitionFromLeft];

    [animation setDuration:0.50];
    [animation setTimingFunction:
    [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];

    [self.view.layer addAnimation:animation forKey:kCATransition];

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T07:04:46.360

你为什么不使用 a`UINavigationController`和 push`UIViewController`而不是以模态方式呈现它？

编辑：

要将基于视图的应用程序更改为`UINavigationController`只需将其添加到您的 AppDelegate

```
 self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    UINavigationController *nvcontrol = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    [self.window addSubview:nvcontrol.view]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-01T07:07:09.373

```
- (void)slideView:(UIView*)view direction:(BOOL)isLeftToRight {
    CGRect frame = view.frame;
    frame.origin.x = (isLeftToRight) ? -320 : 320;
    view.frame = frame;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5];
    frame.origin.x = 0;
    view.frame = frame;
    [UIView commitAnimations];
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-01T07:12:12.793

**是的，您应该通过导航控制器执行此操作。**

如果您想通过导航控制器执行此操作，这里有一些代码可以帮助您。

在 AppDelegate.h 中：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate,UINavigationControllerDelegate>{

    UINavigationController *navController;
} 
```

在 AppDelegate.m 中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // ViewController is your FirstViewController which loads over Window.

    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    self.window.rootViewController = _viewController;
    navController =[[UINavigationController alloc] initWithRootViewController:_viewController];
    self.window.rootViewController = navController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

然后在您的 ViewController.m 中，在您的按钮点击功能中，您可以执行以下操作：

```
NextViewController *nextController = [[NextViewController alloc] initWithNibName:@"NextViewController" bundle:nil];
[self.navigationController pushViewController:nextController animated:YES]; 
```

就这样。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-01T07:06:31.813

试试这个

```
[self.navigatationController pushViewController:view animated:YES]; 
```

# perl - 解开文件句柄后 Perl 无法 Binmode STDOUT

> ID：10845787
> 
> 赞同：4
> 
> 时间：2012-06-01T07:00:20.683
> 
> 标签：perl, stdout, filehandle, tie, binmode

我需要禁用 HTTP 响应的渐进式缓冲。

我已经使用文件句柄类在 Perl 中进行了这项工作：

```
$|=1;
$TIE = tie(*STDOUT,__PACKAGE__); 
```

打印语句存储在一个数组中，并通过以下方式检索：

```
$buffer = tied *STDOUT;
$buffer = join('', @$buffer);
undef $TIE;
untie(*STDOUT); 
```

如果 HTTP 响应为`text/html`，则它会正确显示在浏览器中。

但是，对于二进制流，解开后我无法设置`binmode`，`STDOUT`并且内容已损坏。

如果我将 HTTP 响应保存到文件，或者我不使用文件句柄类，则二进制数据会被保留。

关于如何强制原始编码的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:17:02.970

像这样的工作？

```
use strict;
use warnings;
use IO::Handle;

my $io = IO::Handle->new;
my $fh = $io->fdopen(fileno(STDOUT),"w");
$fh->autoflush(1);

my $TIE = tie( $fh ,__PACKAGE__);

sub TIESCALAR { };

binmode($fh);

print $fh "Foo"; 
```

# ios - 需要在 iOS 应用程序上使用挥舞标志效果

> ID：10845789
> 
> 赞同：2
> 
> 时间：2012-06-01T07:00:29.133
> 
> 标签：ios, ipad, animation, ripple

我的应用程序需要像吹气一样挥动旗帜图像。

我发现了一种类似的效果——涟漪效应。但它是专门针对水波纹的。意思是，它给出的效果有点像吹气，但问题是，它会自动从视图的中心影响，而吹气是以从左到右的方式发生的。

任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:28:33.887

这可能不是您想要的答案，但您也可以

a）使用带有挥舞旗帜的电影作为您的视图的背景

b) 以挥动的旗帜作为视图背景的一系列图像的动画

c）你可以尝试一些 OpenGL，本教程似乎很有用：[http ://nehe.gamedev.net/tutorial/flag_effect_(waving_texture)/16002/](http://nehe.gamedev.net/tutorial/flag_effect_(waving_texture)/16002/)

# jquery - 限制 jQuery 淡入（）

> ID：10845790
> 
> 赞同：2
> 
> 时间：2012-06-01T07:00:30.700
> 
> 标签：jquery, fadein

的默认功能将`.fadeIn()`不透明度从 0 增加到 1。

我只是想知道是否有办法限制这一点。（比如说）将不透明度增加到 0.8 并且不超过该值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:04:35.153

尝试`fadeTo()`方法：

```
$('#elem').fadeTo('slow', 0.8) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:06:09.527

只需使用：`.fadeTo(time, opacity)`

```
$('#element')fadeTo(900, 0.7); 
```

[http://api.jquery.com/fadeto/](http://api.jquery.com/fadeto/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T07:01:35.267

```
$('#element').fadeTo(1000, 0.8); 
```

**[演示](http://jsfiddle.net/thecodeparadox/7MnZc/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T07:03:33.753

可能您正在寻找[动画](http://api.jquery.com/animate/)功能效果？

# php - 使用 php 创建登录页面 - 看不到错误所在

> ID：10845791
> 
> 赞同：1
> 
> 时间：2012-06-01T07:00:44.123
> 
> 标签：php, mysql, login

编辑：分配工作。请不要提及外部库或处理安全问题的复杂程序。

我想实现一个非常基本的登录页面，将用户的用户名和密码与存储在数据库中的用户名和密码（使用 MySql）进行比较，然后重定向到仅对登录用户可用的另一个网页。我看过这两个教程：

[http://frozenade.wordpress.com/2007/11/24/how-to-create-login-page-in-php-and-mysql-with-session/](http://frozenade.wordpress.com/2007/11/24/how-to-create-login-page-in-php-and-mysql-with-session/)

[http://www.phpro.org/tutorials/Basic-Login-Authentication-with-PHP-and-MySQL.html](http://www.phpro.org/tutorials/Basic-Login-Authentication-with-PHP-and-MySQL.html)

我已经尝试使用这两种技术。第二个一直给我服务器错误，第一个给我登录页面，并且没有返回任何错误，但是当按下提交按钮时，它什么也没做。我几乎逐字逐句地遵循它，只更改文件名和一些数据库列名以适应我预先存在的东西，但无济于事。这个登录页面让我非常头疼，我真的很想把它排除在外，现在就完成。

登录页面

```
<?php
// Inialize session
session_start();

// Check, if user is already login, then jump to secured page
if (isset($_SESSION['username'])) {
    header('Location: RecordEvents.php');
}
?> 
```

...跳过所有不必要的部分

```
<h1>Login</h1>
<?php
    if(!empty($errorMessage)) 
    {
        echo("<p>There was a problem with your login:</p>\n");
        echo("<ul>" . $errorMessage . "</ul>\n");
    } 
?>
<form action="loginscript.php" method="post">
Username:
<input type="text" name="username" /> </br>
Password:
<input type="password" name="password" /> </br>
<p>
    <!--the submit button with an altered value. once selected the validation script will run-->
    <input type="submit" name="login" value="Allons-y!" />
</p>

</form> 
```

CONFIG.INC （我一开始尝试将文件命名为 .php ，但这并没有什么区别。）

```
<?php

$hostname = 'localhost';
$dbname   = 'clubresults';
$username = 'newuser';
$password = 'password';

// Let's connect to host
mysql_connect($hostname, $username, $password) or DIE('Connection to host is failed,     perhaps the service is down!');
// Select the database
mysql_select_db($dbname) or DIE('Database name is not available!');

?> 
```

登录脚本.PHP

```
<?php

// Inialize session
session_start();

// Include database connection settings
include('Inlcude\config.inc');

// Retrieve username and password from database according to user's input
$login = mysql_query("SELECT * FROM admin_passwords WHERE (Username = '" .     mysql_real_escape_string($_POST['username']) . "') and (Password = '" .     mysql_real_escape_string(md5($_POST['password'])) . "')");

// Check username and password match
if (mysql_num_rows($login) == 1) {
// Set username session variable
$_SESSION['username'] = $_POST['username'];
// Jump to secured page
header('Location: RecordEvents.php');
}
else {
// Jump to login page
header('Location: Login.php');
}

?> 
```

记录.PHP

```
<?php  
// Inialize session
session_start();

// Check, if username session is NOT set then this page will jump to login page
if (!isset($_SESSION['username'])) {
    header('Location: Login.php');
}
Include ('Include\eventscript.php'); 
?> 
```

……呜呜呜

```
<?php
    if(!empty($errorMessage)) 
    {
        echo("<p>There was an error with your form:</p>\n");
        echo("<ul>" . $errorMessage . "</ul>\n");
    } 
?>
<form action="RecordEvents.php" method="post">
Name: <input type="text" name="EventName" value="<?php print $varEventname;?>" />   </br>
Date: <input type="text" name="EventDate" placeholder="yyyy-mm-dd hh:mm:ss" value="<?php print $varEventdate;?>" /> </br>
Location: <input type="text" name="Location" value="<?php print $varLocation;?>" /> </br>
<p>
    <!--the submit button with an altered value. once selected the validation script will run-->
    <input type="submit" name="formSubmit" value="Allons-y!" />
    <!--the reset button to empty the form and start again-->
    <input type="reset" name="formReset" value="Try Again" />
</p>
</form> 
```

数据库称为 clubresults，我使用的表是 admin_passwords，列名是：用户名、密码。

谁能发现我明显犯的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:01:54.240

检查你的拼写。

```
include('Inlcude\config.inc'); 
```

请看这个。

```
$login = mysql_query("SELECT * FROM admin_passwords WHERE username = '" .mysql_real_escape_string($_POST['username']) . "' and password = '" .mysql_real_escape_string($_POST['password']) . "'"); 
```

我删除了 md5() 函数。

[http://php.net/manual/en/function.md5.php](http://php.net/manual/en/function.md5.php)

这就是当您的查询中有 md5 时真正发生的情况。假设您输入了ff。

用户名=用户名密码=密码

您的查询将是这样的，在您的 $_POST['password'] 中使用 md5()。

```
SELECT * FROM admin_passwords WHERE username = 'username' and password = '5f4dcc3b5aa765d61d8327deb882cf99' 
```

请参阅上面的链接以获取更多信息！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:26:20.420

我看到的第一件事是

```
include('Inlcude\config.inc'); 
```

显然，路径是错误的。此外，清理您的代码。例如`include`，不需要括号，应该总是小写，比如

```
include 'Include\config.inc'; 
```

接下来，您确定，您的数据库中只有一个条目吗？因为它被定义为仅加载 recordevents 脚本

```
mysql_num_rows($login) == 1 
```

有时在开发过程中，您可能有两个相等的行。

# php - 为什么输出是0？？（Joomla 中的 PHP）

> ID：10845792
> 
> 赞同：-2
> 
> 时间：2012-06-01T07:00:44.943
> 
> 标签：php, joomla

我们在 Joomla 中使用 PHP 时遇到了这个问题。我们希望输出为 3。

在 HTML 中，我们声明：

```
var address;
address = '3'; 
```

并将以下代码放入表格中：

```
<td><input type="text" id ="amount1.2" name="amount" value="<?php $address = JRequest::getVar('address');?>"/> 
```

在进程/服务器页面中，我们放置以下代码：

```
$address = JRequest::getVar('address', 'default value goes here', 'post','variable type'); 
```

但是输出为0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:14:46.207

首先，您的起始代码块是 javascript，而不是 HTML。

其次，在其他代码示例中，您只是为 PHP 变量分配了一些值`$address`。如果你想让它出现在 HTML 中，你需要`print`or`echo`变量：

```
<td><input type="text" id ="amount1.2" name="amount" value="<?php echo JRequest::getVar('address'); ?>"/> 
```

# javascript - JavaScript：意外的数据错误

> ID：10845805
> 
> 赞同：0
> 
> 时间：2012-06-01T07:01:30.487
> 
> 标签：javascript, jslint

我使用 javaScript 编写了一些代码。

```
 function showPopupSettings(userName)
        { 
           var jsonData;
           setLoading("Loading User Settings");
           jsonData = new function(){
                    this.className = "User";
                    this.methodName = "showPopupSettings";
                    this.userName = userName ;
            } 
                data = JSON.stringify(jsonData);
                $.post('ajaxpage.php',{ submit: "commonAction",data:data },
                                    function(data) {
                                        removeLoading();
                                        $("#dialog")
                                            .dialog("destroy")
                                            .html(data)
                                            .show()
                                            .dialog({
                                                modal: true,
                                                title: "User Settings",
                                                buttons: {
                                                    Cancel: function() {
                                                        $(this).dialog('close');
                                                    },

                                                    Password: function() {
                                                        showChangePasswordTable();
                                                    },

                                                    Save: function() {
                                                        saveNewUserSettings();
                                                        $(this).dialog('close');
                                                    }
                                                }
                                            });
                                    });
        } 
```

通过使用 Jslint 无错误。当我使用 JsLint 检查时将显示以下错误行 10：意外数据

如何纠正这个错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:05:59.653

你在这一行得到那个错误：

```
data = JSON.stringify(jsonData); 
```

这是由上一行引起的，它应该以分号结尾，但不是：

```
jsonData = new function(){
     this.className = "User";
     this.methodName = "showPopupSettings";
     this.userName = userName ;
}; //Semi-colon here! 
```

您的代码还有许多其他问题。在上面的代码段中，您不需要`new`关键字：

```
jsonData = function() { //No 'new'!
     this.className = "User";
     this.methodName = "showPopupSettings";
     this.userName = userName ;
}; 
```

在`data = JSON.stringify(jsonData)`您使用`data`时没有先声明它，所以它会泄漏到全局范围内。在使用之前使用该`var`语句进行声明。`data`

我通过 JSLint 运行代码时遇到的大多数其他错误都与空格有关，因此可以忽略。

# jquery - 如何在 Jquery 中保留选项卡的状态？

> ID：10845813
> 
> 赞同：2
> 
> 时间：2012-06-01T07:01:59.547
> 
> 标签：jquery

我正在将此脚本用于 JQuery 中的选项卡

```
<script type="text/javascript">
$(function () {
var tabContainers = $('div.tabs > div');

$('div.tabs ul.tabNavigation a').click(function () {
    tabContainers.hide().filter(this.hash).show();

    $('div.tabs ul.tabNavigation a').removeClass('selected');
    $(this).addClass('selected');

    return false;
}).filter(':first').click();
});
</script> 
```

但我真的很想知道如何使用该代码而不使用任何其他插件来保存选项卡的状态，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:46:39.067

If you don't want to use an external code or plugin and don't mind not supporting IE 7, you could always use Local Storage. It's new to HTML 5 and allows you simply to save key value pairs to the browsers local storage using javascript. So if you wanted to save the value 'foo' under the key 'bar' you could do something as simple as:

```
localStorage.setItem("foo", "bar"); 
```

And to retrieve

```
var foo = localStorage.getItem("foo"); 
```

This website shows you what its supported on:

[http://caniuse.com/#search=localstorage](http://caniuse.com/#search=localstorage)

And this is a good page for learning a bit about it:

[https://developer.mozilla.org/en/DOM/Storage](https://developer.mozilla.org/en/DOM/Storage)

There are two options with local storage

*   Local storage - This is persisted beyond page refreshes
*   Session storage - This is persisted while the browser session is still active. When you close your browsers tab, the storage is lost.

Hope this help[s!

Andy

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:23:46.057

我建议研究类似[store.js](https://github.com/frankkohlhepp/store-js)的东西。它将允许您在给定域的客户端存储信息，并在后续页面加载时检索它。

# dojo - Dojo滑动面板的任何链接？

> ID：10845817
> 
> 赞同：1
> 
> 时间：2012-06-01T07:02:16.840
> 
> 标签：dojo

任何人都可以帮助我找到 Dojo 滑动面板的链接吗？我一直在寻找它，但仍然没有得到它。我有 jQuery 的滑动面板，我从这个链接得到它：[http ://web-kreation.com/all/implement-a-nice-clean-jquery-sliding-panel-in-wordpress-27/](http://web-kreation.com/all/implement-a-nice-clean-jquery-sliding-panel-in-wordpress-27/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T11:17:46.573

您可以使用 dojo.fx.wipeIn 功能。 [http://dojotoolkit.org/reference-guide/1.7/dojo/fx/wipeIn.html](http://dojotoolkit.org/reference-guide/1.7/dojo/fx/wipeIn.html)

因此，如果您创建两个 div，一个在另一个之上，让顶部的一个显示：无，另一个作为您单击以向下滑动面板的位。然后使用 dojo.connect 将底部面板的单击链接到顶部面板的擦除。

例如

```
// Have your main body content
var mainBody;

// Create top panel
var myPanel = document.createElement("div");

// Set visibility to none
dojo.style(myPanel, "display", "none");

// Create tab to expand your panel (or slide it down)
var expand = document.createElement("div");
expand.innerHTML = "click here to slide down";

mainBody.appendChild(myPanel);      
mainBody.appendChild(expand);

var self = this;

dojo.connect(expand, "onclick", this, slidePanel); 
```

然后你会让你的 slidePanel 函数做一些类似的事情：

```
// Get reference to your panel
var myPanel;

var wipeArgs = {
    node: myPanel
};

// Then just wipe the panel in or out respectively
if (myPanel.style.display == "none") {
    dojo.fx.wipeIn(wipeArgs).play();
} else {
    dojo.fx.wipeOut(wipeArgs).play();
} 
```

# c# - 检查整数变量的长度

> ID：10845820
> 
> 赞同：7
> 
> 时间：2012-06-01T07:02:22.693
> 
> 标签：c#

有没有办法检查整数变量的长度，如果是长的只是修剪它。我在数据库中有一个接受 3 个字符的字段，长度为 3。

那么是否可以像使用字符串变量那样做

例子：

```
cust_ref = cust_ref.Length > 20 ? cust_ref.Substring(0, 19) : cust_ref; 
```

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-12-18T12:56:28.373

最简单的答案是：

```
//The length would be 3 chars.    
public int myint = 111;
myint.ToString().Length; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-04-10T21:12:22.123

以下对我来说是一种享受！

```
public static int IntLength(int i)
{
  if (i < 0)
    throw new ArgumentOutOfRangeException();
  if (i == 0)
    return 1;
  return (int)Math.Floor(Math.Log10(i)) + 1;
} 
```

原始来源：[http ://www.java2s.com/Code/CSharp/Data-Types/Getthedigitlengthofanintvalue.htm](http://www.java2s.com/Code/CSharp/Data-Types/Getthedigitlengthofanintvalue.htm)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-01T07:14:46.693

您不必将其转换为字符串以使其更短，这可以通过数字方式完成：

```
if (num > 999) {
  num %= 1000;
} 
```

如果您想从右侧截断数字，这将从左侧截断数字：

```
while (num > 999) {
  num /= 10;
} 
```

如果该值可以为负，请检查：

```
if (num < -99) {
  num = -(-num % 100);
} 
```

或者：

```
while (num < -99) {
  num = -(-num / 10);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T07:04:17.080

```
cust_ref = cust_ref.ToString().Length > 20 ? Convert.ToInt32(cust_ref.ToString().Substring(0, 19)) : cust_ref; 
```

或简单地使用

```
cust_ref = Convert.ToInt32(Convert.ToString(cust_ref).Substring(0, 19)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T07:04:31.530

像这样使用

```
 cust_ref=   cust_ref.Tostring().Length > 20 ? Convert.ToInt32(cust_ref.ToString().Substring(0, 19)) : cust_ref; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-01T07:06:11.963

不是很清楚你要什么，但**据我所知**，你要的是：

```
int a = 1234567890; 
```

出于某种原因，你想让它更短，比如

```
 int b = MakeShorter(a); 
    //b == 1234 (say) 
```

如果是这样，最简单的解决方案可能是将其转换为字符串，制作您已经实现的内容并将其重新转换回 int。

如果这不是您要的，请澄清。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-01T07:32:07.473

转换为字符串是一种丑陋的实现方式。

它需要一个纯数学解决方案

```
int CutTheNumber(int number, int maxLen)
{
  var maxSize = (int)Math.Pow(10, maxlen);
  if(maxSize <= Math.Abs(number))
  {
    number %= maxSize;
  }

  return number;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-01T07:08:39.590

检查长度

```
 length = cust_ref.ToString().Length; 
```

删除多余的位

```
 if (length > need)
       {
           cust_ref =Convert.ToInt32( cust_ref.ToString().Remove(length -(length- need)));
       } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-01T07:13:13.687

为此，您将不得不做一些简单的事情。像

```
cust_ref = Convert.ToInt32(Convert.ToString(cust_ref).Substring(0, 19)); 
```

或者您可以手动将其存储在任何变量中，并且

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-21T01:25:19.917

你可以试试这段代码。使用 if else 语句来检查验证..

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace avaragescore
{
    class Program
    {

        static void Main(string[] args)
        {
            float quiz;
            float midterm;
            float final;
            float avrg=0;
        Start:
            Console.WriteLine("Please enter the Quize Score here");
            quiz = float.Parse(Console.ReadLine());
            if(quiz > 100)
            {
                Console.WriteLine("You have entered wrong score please re-enter");
                goto Start;
            }
            Start1:
            Console.WriteLine("Please enter the Midterm Score here");
            midterm = float.Parse(Console.ReadLine());
            if(midterm > 100)
            {
                Console.WriteLine("You have entered wrong score please re- enter");
                goto Start1;
            }
            Start3:
            Console.WriteLine("Please enter the Final Score here");
            final = float.Parse(Console.ReadLine());
            if(final > 100)
            {
                Console.WriteLine("You have entered wrong Score Please re-enter");
                goto Start3;
            }
            avrg = (quiz + midterm + final) / 3;

            if(avrg >= 90)
            {
                Console.WriteLine("Your Score is {0} , You got A grade",avrg);
            }
            else if (avrg >= 70 && avrg < 90)
            {
                Console.WriteLine("Your Score is {0} , You got B grade", avrg);
            }
            else if (avrg >= 50 && avrg < 70)
            {
                Console.WriteLine("Your Score is {0} , You got C grade", avrg);
            }
            else if (avrg < 50)
            {
                Console.WriteLine("Yor Score is {0} , You are fail", avrg);
            }
            else
            {
                Console.WriteLine("You enter invalid Score");
            }
            Console.ReadLine();
        }
    }
} 
```

# c - 如何为字符串动态分配内存？

> ID：10845822
> 
> 赞同：0
> 
> 时间：2012-06-01T07:02:39.297
> 
> 标签：c

我正在尝试从文本文件中读取数据并将其存储在具有一个字符指针和一个 int 变量的结构中。在从文件中获取数据的过程中，我知道将要获取一个字符串和一个整数值。我也知道我必须开始获取的位置表格。我不知道字符串的大小。那么，如何为该字符串分配内存。示例代码在这里：

```
struct filevalue
{
 char *string;
 int integer;
} value;    
fseek(ptr,18,SEEK_SET);//seeking from start of file to position from where I get String
fscanf(ptr,"%s",value.string);//ptr is file pointer

fseek(ptr,21,SEEK_CUR);//Now seeking from current position
fscanf(ptr,"%d",value.integer); 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:07:07.913

您的意思是在第二个 fseek() 中使用 SEEK_CUR 吗？如果是这样，那么您知道字符串的长度。使用固定大小的缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:11:30.530

如果你知道第一个结构的位置，以及第二个结构的位置，你也知道第一个结构的总长度（*第二个*位置-*第一个位置*）。您还知道结构的整数部分的大小，因此您可以轻松计算字符串的长度。

```
off_t pos1;  /* Position of first structure */
off_t pos2;  /* Position of second structure */

size_t struct_len = pos2 - pos1;
size_t string_len = struct_len - sizeof(int); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T07:15:17.253

任何一个

1.  malloc 最大可能长度
2.  将这么多读入 malloc'd 块
3.  找出字符串的真正结尾在哪里
4.  将 a`\0`写入您的 malloc'd 块中，以便它作为一个以 nul 终止的字符串正确运行（和/或保存长度以防万一您需要它）
5.  可选择将您的块重新分配到正确的大小

或者

1.  malloc长度的合理猜测*N*
2.  读了那么多
3.  如果在该缓冲区中找不到字符串的结尾：
    1.  使用 realloc 将缓冲区增加到*2N*（例如）并将接下来的*N*个字节读入末尾
    2.  转到 3
4.  写一个`\0`等如上

* * *

你在评论中说最大。字符串长度是有界的，所以第一种方法可能很好。你还没有说你如何确定字符串的结尾，但我假设有*一些*分隔符，或者它是用空格填充的，或者其他东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T07:26:25.937

我假设您使用 fseek 以二进制模式打开文件。

您可以使用从文件中读取，`fgetc()`因为您不知道大小只是分配一个初始大小为 100 的缓冲区，然后逐个字符地读取字符，将它们放入缓冲区中。监视缓冲区是否足够大以容纳字符，如果不是`realloc()`，则缓冲区更大。

# mysql - 有效使用分页和 MySQL 查询

> ID：10845825
> 
> 赞同：6
> 
> 时间：2012-06-01T07:02:55.020
> 
> 标签：mysql

目前我运行两个 MySQL 查询来处理我的分页...

查询 1 从表中选择所有行，因此我知道需要列出多少页。

查询 2 选择当前页面的行（例如：第 1 页的第 0 到 19 行（LIMIT 0, 19），第 2 页的第 20-39 行等）。

这似乎浪费了两个重复查询，唯一的区别是 LIMIT 部分。

有什么更好的方法来做到这一点？

我应该在运行一个查询后使用 PHP 过滤结果吗？

**编辑：**我应该运行一个查询并使用类似 array_slice() 的东西来只列出我想要的行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T04:42:38.893

最好和最快的方法是使用 2 个 MYSQL 查询进行分页（正如您已经在使用的那样），为了避免过度头痛，您必须通过仅选择一列（比如主键）来简化用于找出总行数的查询够了。 `SELECT * FROM sampletable WHERE condition1>1 AND condition2>2` 对于这样的查询分页，您可以使用这两个查询 `SELECT * FROM sampletable WHERE condition1>1 AND condition2>2 LIMIT 0,20 SELECT id FROM sampletable WHERE condition1>1 AND condition2>2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:22:12.693

采用[`FOUND_ROWS()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)

一个 SELECT 语句可能包含一个 LIMIT 子句来限制服务器返回给客户端的行数。在某些情况下，希望知道在没有 LIMIT 的情况下该语句将返回多少行，但无需再次运行该语句。要获取此行数，请在 SELECT 语句中包含 SQL_CALC_FOUND_ROWS 选项，然后调用 FOUND_ROWS()：

```
mysql> SELECT SQL_CALC_FOUND_ROWS * FROM tbl_name
    -> WHERE id > 100 LIMIT 10;
mysql> SELECT FOUND_ROWS(); 
```

第二个 SELECT 返回一个数字，表示如果没有 LIMIT 子句，第一个 SELECT 将返回多少行。

请注意，这会给数据库带来额外的压力，因为它每次都必须找出完整结果集的大小。`SQL_CALC_FOUND_ROWS`仅在需要时使用。

# javascript - 用 jquery 搜索

> ID：10845828
> 
> 赞同：2
> 
> 时间：2012-06-01T07:03:12.693
> 
> 标签：javascript, jquery

我通过 js 搜索我的网站。

他们的代码可能看起来像：有一个表单，当 keyup 事件发生时，它会将 post 发送到一个文件并从该文件中检索数据到一个 div 疯狂的 html 中。

但这自己有麻烦了。我发现“a”的示例大约有 3000 个结果。例如，花一秒钟发送帖子。所以我现在按“c”将帖子发送到文件是“ac”并且有100个这样的结果需要0.3秒。例如，当我按字母“a”到“c”0.2 秒时，它应该在 0.5 秒时显示结果“ac”。然后 0.5 秒后它是“a”的结果。~> 找到“ac” 找到“a” 那么现在当你按“c”然后它停止发送值为“a”的帖子时，你会如何发送值为“ac”的帖子。

```
<form method="post" onsubmit="return checkForm(this.form)">
<div class="search padding">
    <input type="text" id="searchbox" name="manga_name" class="input" value="Tìm truyện muốn đọc ..." onfocus="if (value =='Tìm truyện muốn đọc ...'){value =''}" onblur="if (value ==''){value='Tìm truyện muốn đọc ...'}" />
    <input type="submit" value=" " id="searchsubmit" class="go"/>
</div>
    </form>

<div id="result"></div> 
```

和脚本：

```
<script>
$('#searchbox').keyup(function() {
 search();
});

function search() {
var keyword = $('#searchbox').val();
if (keyword != "") {
$('#result').html(loadingText);
$('#result').css('display', 'block');
$.post('/search/',{"keyword":keyword}, function(data){
if (data != "")
{
$('#result').html(data);
}
else
{
$('#result').html('');
$('#result').css('display', 'none');
}
});
}
else {
$('#result').html('');
$('#result').css('display', 'none');
}
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:08:36.077

```
// use to delay the callback execution
// so your search will be executed only you stop typing after 0.5(500 ms for example) second
var delay = (function(){
  var timer = 0;
  return function(callback, ms){
    clearTimeout(timer);
    timer = setTimeout(function() {
      callback();
    }, ms);
  }
}());

$('#searchbox').keyup(delay(search, 500)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:22:35.773

你可以试试；

```
var timer = null;

$("#text_box").keyup(function() {
  if(timer) {
    clearTimeout(timer);
  }

  timer = setTimeout(search, 1000);
}); 
```

**[这里](https://stackoverflow.com/questions/10832237/keyupfunction-ajax-request-delay-jquery)**有一个类似的问题，我之前问过。在发布问题之前，请务必在 stackoverflow 中进行搜索。

# mysql - 在 Scrapy 中将项目写入 MySQL 数据库

> ID：10845839
> 
> 赞同：21
> 
> 时间：2012-06-01T07:03:37.207
> 
> 标签：mysql, scrapy, pipeline, web-crawler

我是 Scrapy 的新手，我有蜘蛛代码

```
class Example_spider(BaseSpider):
   name = "example"
   allowed_domains = ["www.example.com"]

   def start_requests(self):
       yield self.make_requests_from_url("http://www.example.com/bookstore/new")

   def parse(self, response):
       hxs = HtmlXPathSelector(response)
       urls = hxs.select('//div[@class="bookListingBookTitle"]/a/@href').extract()
       for i in urls:
           yield Request(urljoin("http://www.example.com/", i[1:]), callback=self.parse_url)

   def parse_url(self, response):
           hxs = HtmlXPathSelector(response)
           main =   hxs.select('//div[@id="bookshelf-bg"]')
           items = []
           for i in main:
           item = Exampleitem()
           item['book_name'] = i.select('div[@class="slickwrap full"]/div[@id="bookstore_detail"]/div[@class="book_listing clearfix"]/div[@class="bookstore_right"]/div[@class="title_and_byline"]/p[@class="book_title"]/text()')[0].extract()
           item['price'] = i.select('div[@id="book-sidebar-modules"]/div[@class="add_to_cart_wrapper slickshadow"]/div[@class="panes"]/div[@class="pane clearfix"]/div[@class="inner"]/div[@class="add_to_cart 0"]/form/div[@class="line-item"]/div[@class="line-item-price"]/text()').extract()
           items.append(item)
       return items 
```

管道代码是：

```
class examplePipeline(object):

    def __init__(self):               
        self.dbpool = adbapi.ConnectionPool('MySQLdb',
                db='blurb',
                user='root',
                passwd='redhat',
                cursorclass=MySQLdb.cursors.DictCursor,
                charset='utf8',
                use_unicode=True
            )
def process_item(self, spider, item):
    # run db query in thread pool
    assert isinstance(item, Exampleitem)
    query = self.dbpool.runInteraction(self._conditional_insert, item)
    query.addErrback(self.handle_error)
    return item
def _conditional_insert(self, tx, item):
    print "db connected-=========>"
    # create record if doesn't exist. 
    tx.execute("select * from example_book_store where book_name = %s", (item['book_name']) )
    result = tx.fetchone()
    if result:
        log.msg("Item already stored in db: %s" % item, level=log.DEBUG)
    else:
        tx.execute("""INSERT INTO example_book_store (book_name,price)
                    VALUES (%s,%s)""",   
                            (item['book_name'],item['price'])
                    )
        log.msg("Item stored in db: %s" % item, level=log.DEBUG)            

def handle_error(self, e):
    log.err(e) 
```

运行此之后，我收到以下错误

```
exceptions.NameError: global name 'Exampleitem' is not defined 
```

当我在`process_item`方法中添加以下代码时出现上述错误

```
assert isinstance(item, Exampleitem) 
```

并且没有添加这条线我得到

```
**exceptions.TypeError: 'Example_spider' object is not subscriptable 
```

任何人都可以运行此代码并确保所有项目都保存到数据库中吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-01T11:27:43.097

在您的管道中尝试以下代码

```
import sys
import MySQLdb
import hashlib
from scrapy.exceptions import DropItem
from scrapy.http import Request

class MySQLStorePipeline(object):
    def __init__(self):
        self.conn = MySQLdb.connect('host', 'user', 'passwd', 
                                    'dbname', charset="utf8",
                                    use_unicode=True)
        self.cursor = self.conn.cursor()

    def process_item(self, item, spider):    
        try:
            self.cursor.execute("""INSERT INTO example_book_store (book_name, price)  
                        VALUES (%s, %s)""", 
                       (item['book_name'].encode('utf-8'), 
                        item['price'].encode('utf-8')))            
            self.conn.commit()            
        except MySQLdb.Error, e:
            print "Error %d: %s" % (e.args[0], e.args[1])
        return item 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:27:46.933

您的 process_item 方法应声明为：`def process_item(self, item, spider):`而不是`def process_item(self, spider, item):`-> 您切换了参数。

此异常：`exceptions.NameError: global name 'Exampleitem' is not defined`表示您没有在管道中导入 Exampleitem。尝试添加：（`from myspiders.myitems import Exampleitem` *当然使用正确的名称/路径）。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-12T06:11:05.340

我认为这种方式更好更简洁：

```
#Item
class pictureItem(scrapy.Item):
    topic_id=scrapy.Field()
    url=scrapy.Field()

#SQL
self.save_picture="insert into picture(`url`,`id`) values(%(url)s,%(id)s);"

#usage
cur.execute(self.save_picture,dict(item)) 
```

就像

```
cur.execute("insert into picture(`url`,`id`) values(%(url)s,%(id)s)" % {"url":someurl,"id":1}) 
```

原因（您可以阅读有关Scrapy 中的[项目的更多信息）](https://doc.scrapy.org/en/latest/topics/items.html#field-objects)

> Field 类只是内置 dict 类的别名，不提供任何额外的功能或属性。换句话说，Field 对象是普通的 Python 字典。

# c# - “80040154 类未注册”与 C# 中的 Word 互操作

> ID：10845841
> 
> 赞同：2
> 
> 时间：2012-06-01T07:03:49.937
> 
> 标签：c#

我有一个来自客户的紧急请求，要求启用单词文件（.doc）的加载。

当前功能使用的 OpenXml 仅允许 .docx 文件，如果我们尝试上传/读取 .doc 文件，则会引发异常。

所以，我尝试使用**Microsoft.Office.Interop.Word**读取文件中的数据并计算页数。

这一切都在我的本地环境中工作。（我正在使用 VS2008）。但是当我部署在我的开发机器上时，我收到一个错误“80040154 Class not registered”。

伙计们，我已经对此进行了搜索，但我不知道该怎么做……有人说它是因为开发机器是 64 位的。如果是这样，如何配置它以接受 32 位 dll？

任何人都可以至少指导我如何解决这个错误，或者还有其他方法可以读取 word .doc 文件吗？

如果您需要任何其他信息，请询问

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:19:13.580

您尝试访问的 COM 对象未正确安装在您的部署计算机上。对象的 CLSID 需要在注册表中。

您可以检查是否安装了 MS Word 的[互操作程序集](http://msdn.microsoft.com/en-us/library/aa159923%28office.11%29.aspx)。

您也可以检查[此问题](https://stackoverflow.com/questions/1496214/how-to-solve-com-exception-class-not-registered-exception-from-hresult-0x80040)。

# java - Hibernate/JPA 注释中的多列连接

> ID：10845842
> 
> 赞同：30
> 
> 时间：2012-06-01T07:03:55.783
> 
> 标签：java, hibernate, jpa, annotations

我有两个实体，我想通过多个列加入。这些列`@Embeddable`由两个实体共享的对象共享。在下面的示例中，`Foo`可以只有一个`Bar`但`Bar`可以有多个`Foo`s（其中`AnEmbeddableObject`是 的唯一键`Bar`）。这是一个例子：

```
@Entity
@Table(name = "foo")
public class Foo {
    @Id
    @Column(name = "id")
    @GeneratedValue(generator = "seqGen")
    @SequenceGenerator(name = "seqGen", sequenceName = "FOO_ID_SEQ", allocationSize = 1)
    private Long id;
    @Embedded
    private AnEmbeddableObject anEmbeddableObject;
    @ManyToOne(targetEntity = Bar.class, fetch = FetchType.LAZY)
    @JoinColumns( {
        @JoinColumn(name = "column_1", referencedColumnName = "column_1"),
        @JoinColumn(name = "column_2", referencedColumnName = "column_2"),
        @JoinColumn(name = "column_3", referencedColumnName = "column_3"),
        @JoinColumn(name = "column_4", referencedColumnName = "column_4")
    })
    private Bar bar;

    // ... rest of class
} 
```

和酒吧类：

```
@Entity
@Table(name = "bar")
public class Bar {
    @Id
    @Column(name = "id")
    @GeneratedValue(generator = "seqGen")
    @SequenceGenerator(name = "seqGen", sequenceName = "BAR_ID_SEQ", allocationSize = 1)
    private Long id;
    @Embedded
    private AnEmbeddableObject anEmbeddableObject;

    // ... rest of class
} 
```

最后`AnEmbeddedObject`上课：

```
@Embeddable
public class AnEmbeddedObject {
    @Column(name = "column_1")
    private Long column1;
    @Column(name = "column_2")
    private Long column2;
    @Column(name = "column_3")
    private Long column3;
    @Column(name = "column_4")
    private Long column4;

    // ... rest of class
} 
```

显然，模式规范化很差，这是`AnEmbeddedObject`每个表中重复字段的限制。

我遇到的问题是当我尝试启动 Hibernate 时收到此错误：

```
org.hibernate.AnnotationException: referencedColumnNames(column_1, column_2, column_3, column_4) of Foo.bar referencing Bar not mapped to a single property 
```

我尝试将 JoinColumns 标记为不可插入和不可更新，但没有运气。有没有办法用 Hibernate/JPA 注释来表达这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-16T16:38:16.557

这对我有用。在我的情况下，必须根据 3 个不同的列连接 2 个表 foo 和 boo。请注意，在我的情况下，在 boo 中，3 个常用列不是主键

即，基于 3 个不同列的一对一映射

```
@Entity
@Table(name = "foo")
public class foo implements Serializable
{
    @Column(name="foocol1")
    private String foocol1;
    //add getter setter
    @Column(name="foocol2")
    private String foocol2;
    //add getter setter
    @Column(name="foocol3")
    private String foocol3;
    //add getter setter
    private Boo boo;
    private int id;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "brsitem_id", updatable = false)
    public int getId()
    {
        return this.id;
    }
    public void setId(int id)
    {
        this.id = id;
    }
    @OneToOne
    @JoinColumns(
    {
        @JoinColumn(updatable=false,insertable=false, name="foocol1", referencedColumnName="boocol1"),
        @JoinColumn(updatable=false,insertable=false, name="foocol2", referencedColumnName="boocol2"),
        @JoinColumn(updatable=false,insertable=false, name="foocol3", referencedColumnName="boocol3")
    }
    )
    public Boo getBoo()
    {
        return boo;
    }
    public void setBoo(Boo boo)
    {
        this.boo = boo;
    }
}

@Entity
@Table(name = "boo")
public class Boo implements Serializable
{
    private int id;
    @Column(name="boocol1")
    private String boocol1;
    //add getter setter
    @Column(name="boocol2")
    private String boocol2;
    //add getter setter
    @Column(name="boocol3")
    private String boocol3;
    //add getter setter
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "item_id", updatable = false)
    public int getId()
    {
        return id;
    }
    public void setId(int id)
    {
        this.id = id;
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-06T22:36:06.050

如果这不起作用，我就没有主意了。通过这种方式，您可以获得两个表中的 4 列（`Bar`拥有它们并`Foo`使用它们来引用`Bar`）以及两个实体中生成的 ID。4 列的集合必须是唯一的，`Bar`因此多对一关系不会变成多对多。

```
@Embeddable
public class AnEmbeddedObject
{
    @Column(name = "column_1")
    private Long column1;
    @Column(name = "column_2")
    private Long column2;
    @Column(name = "column_3")
    private Long column3;
    @Column(name = "column_4")
    private Long column4;
}

@Entity
public class Foo
{
    @Id
    @Column(name = "id")
    @GeneratedValue(generator = "seqGen")
    @SequenceGenerator(name = "seqGen", sequenceName = "FOO_ID_SEQ", allocationSize = 1)
    private Long id;
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumns({
        @JoinColumn(name = "column_1", referencedColumnName = "column_1"),
        @JoinColumn(name = "column_2", referencedColumnName = "column_2"),
        @JoinColumn(name = "column_3", referencedColumnName = "column_3"),
        @JoinColumn(name = "column_4", referencedColumnName = "column_4")
    })
    private Bar bar;
}

@Entity
@Table(uniqueConstraints = @UniqueConstraint(columnNames = {
    "column_1",
    "column_2",
    "column_3",
    "column_4"
}))
public class Bar
{
    @Id
    @Column(name = "id")
    @GeneratedValue(generator = "seqGen")
    @SequenceGenerator(name = "seqGen", sequenceName = "BAR_ID_SEQ", allocationSize = 1)
    private Long id;
    @Embedded
    private AnEmbeddedObject anEmbeddedObject;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-14T05:32:09.980

Hibernate 不会让你轻松地做你想做的事情。从[休眠文档](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e1591)：

> 请注意，将 referencedColumnName 用于非主键列时，关联的类必须是可序列化的。***另请注意，非主键列的 referencedColumnName 必须映射到具有单个列的属性（其他情况可能不起作用）。*** *（重点补充）*

因此，如果您不愿意`AnEmbeddableObject`为 Bar 创建 Identifier，那么 Hibernate 不会懒惰地自动为您检索 Bar。当然，您仍然可以使用 HQL 编写 join on 的查询`AnEmbeddableObject`，但是如果您坚持对 Bar 使用多列非主键，则会失去自动获取和生命周期维护。

# android - android - 更新 ADT

> ID：10845847
> 
> 赞同：0
> 
> 时间：2012-06-01T07:04:06.377
> 
> 标签：android, eclipse, eclipse-adt

我想在 Eclipse 中更新 ADT。为此，我转到帮助-> CheckforUpdates-> 我收到以下错误。如何解决这个问题。为什么它来了。请任何人帮助我。

**错误窗口**

![在此处输入图像描述](../Images/8eda950336dc33c87676ff690ecd3820.png)

**Eclipse 属性**

![在此处输入图像描述](../Images/874259e1004d8d07ae05f5a7588bca95.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:26:21.563

首先安装正确的 Android SDK 并安装版本（根据您的需要，如 4.0.3）。

然后继续升级 ADT。

# php - PHP/PCRE/正则表达式：剥离搜索词 appart

> ID：10845849
> 
> 赞同：2
> 
> 时间：2012-06-01T07:04:08.627
> 
> 标签：php, regex, full-text-search, pcre

我尝试将一个典型的谷歌搜索字符串剥离到它的一部分。即刺痛可能是：“如何”发动机燃料

所以我想分别了解**“如何”和发动机和燃料**。

我尝试了以下 preg_match_all，但我也分别得到**了“如何**和如何**”**，这可能会变得不必要地难以处理。

```
preg_match_all(
     '=(["]{1}[^"]{1,}["]{1})'
    .'|([-]{1}[^ ]{1,}[ ]{1})'
    .'|([^-"]{1}[^ ]{1,}[ ]{1})=si', 
  $filter, 
  $matches,
  PREG_PATTERN_ORDER); 
```

任何人都知道如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:12:18.903

尝试：

```
$q = '"how to" engine -fuel';
preg_match_all('/"[^"]*"|\S+/', $q, $matches);
print_r($matches); 
```

这将打印：

```
大批
(
    [0] => 数组
        (
            [0] =>“如何”
            [1] => 引擎
            [2] => -燃料
        )

)

```

意义：

```
"[^"]*"    # match a quoted string
|          # OR
\S+        # 1 or more non-space chars 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:10:57.897

**试试这个**

```
(?i)("[^"]+") +([a-z]+) +(\-[a-z]+)\b 
```

**代码**

```
if (preg_match('/("[^"]+") +([a-z]+) +(-[a-z]+)\b/i', $subject, $regs)) {
    $howto = $regs[1];
    $engine = $regs[2];
    $fuel = $regs[3];
} else {
    $result = "";
} 
```

**解释**

```
"
(?i)        # Match the remainder of the regex with the options: case insensitive (i)
(           # Match the regular expression below and capture its match into backreference number 1
   \"           # Match the character “\"” literally
   [^\"]        # Match any character that is NOT a “\"”
      +           # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
   \"           # Match the character “\"” literally
)
\           # Match the character “ ” literally
   +           # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
(           # Match the regular expression below and capture its match into backreference number 2
   [a-z]       # Match a single character in the range between “a” and “z”
      +           # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
)
\           # Match the character “ ” literally
   +           # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
(           # Match the regular expression below and capture its match into backreference number 3
   \-          # Match the character “-” literally
   [a-z]       # Match a single character in the range between “a” and “z”
      +           # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
)
\b          # Assert position at a word boundary
" 
```

* * *

希望这可以帮助。

# puppet - 在使用 Puppet 安装其他软件包之前运行 `apt-get update`

> ID：10845864
> 
> 赞同：51
> 
> 时间：2012-06-01T07:05:07.113
> 
> 标签：puppet, apt-get, zend-server

我正在尝试创建自动安装 zend 服务器 CE 的 puppet 模块，这在这里并不重要，但步骤如下

1.  更新 /etc/apt/source.list
2.  通过 wget 下载 repos 密钥
3.  做apt-get更新
4.  做 apt-get install zend-server-ce-5.2

我有`init.pp`档案

```
class zendserverce {

# https://github.com/puppetlabs/puppetlabs-stdlib
file_line { 'debian_package':
    path => '/etc/apt/sources.list',
    line => 'deb http://repos.zend.com/zend-server/deb server non-free'
}

exec { "wget http://repos.zend.com/zend.key -O- |apt-key add -":
    path => ["/usr/bin", "/usr/sbin"]
}

exec { "apt-get update":
    command => "/usr/bin/apt-get update",
    onlyif  => "/bin/sh -c '[ ! -f /var/cache/apt/pkgcache.bin ] || /usr/bin/find /etc/apt/* -cnewer /var/cache/apt/pkgcache.bin | /bin/grep . > /dev/null'",
}

package { "zend-server-ce-php-5.2":
    ensure => "latest"
}

} 
```

似乎 puppet 以不同的顺序运行命令，然后我需要。有什么办法可以告诉他按照我想要的顺序运行？

这种片段的输出是

```
 [0;36mnotice: /Stage[main]/Mc/Package[mc]/ensure: ensure changed 'purged' to 'latest'[0m
  [1;35merr: /Stage[main]/Zendserverce/Package[zend-server-ce-php-5.2]/ensure: change from purged to latest failed: Could not update: Execution of '/usr/bin/apt-get -q -y -o DPkg::Options::=--force-confold install zend-server-ce-php-5.2' returned 100: Reading package lists...
  Building dependency tree...
  Reading state information...
  E: Couldn't find package zend-server-ce-php-5.2 at /tmp/vagrant-puppet/modules 0/zendserverce/manifests/init.pp:28[0m
  [0;36mnotice: /Stage[main]/Zendserverce/Exec[wget http://repos.zend.com/zend.key -O- |apt-key add -]/returns: executed successfully[0m
  [0;36mnotice: /Stage[main]/Zendserverce/File_line[debian_package]/ensure: created[0m
  [0;36mnotice: Finished catalog run in 6.75 seconds[0m 
```

所以它说：找不到包zend-server-ce-php-5.2

谁能指导我出了什么问题？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-12-01T00:43:57.423

[从 Puppet 2.6.0 开始，引入](http://docs.puppetlabs.com/puppet/3/reference/lang_relationships.html)了一个新特性“关系语法” 。

Puppet 2.6.0 及更高版本中的示例如下所示：

```
exec { "apt-update":
    command => "/usr/bin/apt-get update"
}

Exec["apt-update"] -> Package <| |> 
```

每次执行 package 命令时，依赖项（在我们的例子中是 'apt-update'）都会被触发。您甚至可以定义更长的链。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-06-01T19:06:08.413

您需要指定依赖关系。最简单/最干净的方法是使用可用于所有资源类型的 require 参数。

```
package { "zend-server-ce-php-5.2":
  ensure  => latest,
  require  => Exec['apt-get update'],
} 
```

ETC..

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-07T14:59:15.393

我尝试了以前的变体，但它在 Ubuntu 10.04 上对我不起作用

最后，我准备了以下脚本，每次存储库超过一周时都会运行更新：

```
exec { 'apt-get update':
    command => "/usr/bin/apt-get update",
    onlyif => "/bin/bash -c 'exit $(( $(( $(date +%s) - $(stat -c %Y /var/lib/apt/lists/$( ls /var/lib/apt/lists/ -tr1|tail -1 )) )) <= 604800 ))'"
} 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-09-03T03:34:08.263

我更喜欢将 apt-upgrade 放在主阶段之前运行的单独阶段，因此我不必硬连线任何依赖项。在这里查看：http: [//docs.puppetlabs.com/puppet/2.7/reference/lang_run_stages.html](http://docs.puppetlabs.com/puppet/2.7/reference/lang_run_stages.html)。

一个简单的例子如下所示。这意味着您有一个单独的类来执行实际的 apt-update：

```
stage { "init": before  => Stage["main"] }

class {"apt-update": 
  stage => init, 
  apt_mirror => $apt_mirror 
} 
```

检查我在 github 上的示例 LAMPP-box，看看这些部分是如何组合在一起的：[https ://github.com/joerx/vagrant-lampp](https://github.com/joerx/vagrant-lampp)

注意：使用 apt-upgrade 时要小心，因为一些基础盒会因内核升级等原因而损坏。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-05-19T23:00:02.083

在 Puppet 3 中，这可以通过[使用资源收集器实现虚拟资源来完成](http://docs.puppetlabs.com/puppet/3/reference/lang_virtual.html#realizing-with-a-collector)

```
# so you don't have to fully qualify paths to binaries
Exec { path => ['/usr/bin'] }    

# virtual resource
@exec { 'sudo apt-get update':
   tag => foo_update
}

# realize resource. filter by arbitrary "foo_update"
# tag and relate it to all Package resources
Exec <| tag == foo_update |> -> Package <| |> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-07-16T16:23:08.343

添加这段巫毒教对我们有用：

```
 Apt::Pin <| |> -> Package <| |>
  Apt::Source <| |> -> Package <| |> 
```

这迫使更新。YMMV。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-29T23:49:44.447

需要更新 APT 列表的软件包应该需要`Class['apt::update']`

```
package { "zend-server-ce-php-5.2":
   ensure => "latest",
   require => Class['apt::update']
} 
```

如果您使用自定义 APT 源，请确保正确排序：

```
Apt::Source['my_source'] 
-> Class['apt::update'] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-03T15:51:06.740

你真的应该使用 apt 模块来创建源和添加密钥：[https ://forge.puppet.com/puppetlabs/apt](https://forge.puppet.com/puppetlabs/apt)

如果您使用的是 hiera：

```
apt::sources:
  'artifactory-pro-debs':
    location: 'http://repos.zend.com/zend-server/deb'
    release: 'server
    repos: 'non-free'
    key:
      source: 'http://repos.zend.com/zend.key' 
```

# c# - 以编程方式更改共享点列表的名称

> ID：10845868
> 
> 赞同：0
> 
> 时间：2012-06-01T07:05:26.177
> 
> 标签：c#, sharepoint-2010

我正在尝试更改共享点文档库的“名称”（而不是标题）。我从共享点设计器那里找到了一种方法：[http](http://www.thesharepointblog.net/Lists/Posts/Post.aspx?List=815f255a-d0ef-4258-be2a-28487dc9975c&ID=52) ://www.thesharepointblog.net/Lists/Posts/Post.aspx?List=815f255a-d0ef-4258-be2a-28487dc9975c&ID=52我需要的是这样做以编程方式。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:50:50.637

“名称”是列表的实际根文件夹。所以你需要重命名它

```
 using (SPSite mySite = new SPSite("http://server"))
            {
                //open the relevant site
                using (SPWeb myWeb = mySite.OpenWeb("TestSite"))
                {
                    //loop through the lists
                    foreach (SPList list in myWeb.Lists)
                    {
                        //when we find the correct list, change the name
                        if (list.RootFolder.Name == "OrigListName")
                        {
                            //move the root folder
                            list.RootFolder.MoveTo(list.RootFolder.Url.Replace("OrigListName", "OrigListName_New"));
                        }
                    }
                }
            } 
```

# php - 登录：如何检查用户是否登录

> ID：10845869
> 
> 赞同：0
> 
> 时间：2012-06-01T07:05:29.890
> 
> 标签：php, login

我正在使用**加载的电子商务**。我想在用户登录时显示一些内容。所以我想检查用户是否登录。我们如何检查它？请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:28:02.993

你的登录是如何设置的？当我说这就是您如何判断用户何时登录我们的不是时，也就是说，如果您将其设置在第一个位置。如果没有，您将解析用户输入并根据数据库中的记录进行检查，如果一切都已设置，那么您将用户名分配给 $_SESSION var。PHP代码：

```
$_SESSION['user_name'] = $username_they_entered; 
```

现在，如果您正在测试他们是否已登录，您只需使用 PHP 代码：

```
if(isset($_SESSION['user_name'])) 
{ 
//print something you only want the person logged in to see 
//maybe there username 
print "Welcome $_SESSION['user_name']" ; 
} 
else 
{ 
print 'Welcome Guest. Would you like to register?' ; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:08:43.550

使用会话变量跟踪此登录场景......

```
if (isset($_SESSION['username'])) {
   echo 'username';
}else{
   redirect();
} 
```

# c++ - 将简单值从 lua 文件获取到 C++ 的通用解决方案

> ID：10845870
> 
> 赞同：4
> 
> 时间：2012-06-01T07:05:32.340
> 
> 标签：c++, generics, lua, traits, function-templates

我正在尝试使用 Lua 文件作为配置或 ini。我成功了，但我的解决方案让我很恼火。具体来说，`get_double`和`get_int`函数`get_string`需要以可重用的方式完成。

我在创建没有参数的函数模板时遇到了问题。另外，我不确定如何概括`lua_is...`和`lua_to...`. 我的想法是给我们的`if(is_same<T,double>::value) return (double)lua_isnumber(L,-1);`，但它没有奏效。

这是工作代码：

主.cc：

```
#include <iostream>
#include <lua.hpp>

using namespace std;

class Lua_vm 
{
private:
  lua_State *L;
public:
  double get_double(const char *var_name) {
    lua_getglobal(L,var_name);
    if (!lua_isnumber(L,-1)) {
      cout << "error: " << var_name << " is of a wrong type\n";
    }
    return (double)lua_tonumber(L,-1);
    lua_pop(L,1);
  }
  int get_int(const char *var_name) {
    lua_getglobal(L,var_name);
    if (!lua_isnumber(L,-1)) {
      cout << "error: " << var_name << " is of a wrong type\n";
    }
    return (int)lua_tonumber(L,-1);
    lua_pop(L,1);
  }
  string get_string(const char *var_name) {
    lua_getglobal(L,var_name);
    if (!lua_isstring(L,-1)) {
      cout << "error: " << var_name << " is of a wrong type\n";
    }
    return string(lua_tostring(L,-1));
    lua_pop(L,1);
  }
  Lua_vm(const char *lua_config_filename) {
    L = lua_open();
    if (luaL_loadfile(L, lua_config_filename) || lua_pcall(L, 0,0,0)) {
      cout << "error: " << lua_tostring(L,-1) << "\n";
    }
    lua_pushnil(L);
  }
  ~Lua_vm() {
    lua_close(L);
  }
};
int main(int argc, char** argv)
{
  Lua_vm lvm("config.lua");

  cout << "vol is " << lvm.get_double("vol") << "\n";
  cout << "rho is " << lvm.get_int("rho") << "\n";
  cout << "method is " << lvm.get_string("method") << "\n";

  return 0;
} 
```

配置.lua：

```
method = "cube"
len = 3.21
rho = 13
vol = len*len*len
mass = vol*rho 
```

它编译为`g++ main.C -I/usr/include/lua5.1/ -llua5.1 ; ./a.out`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T07:45:58.763

这是我为此目的使用的代码（更多：[http](http://tom.rethaller.net/wiki/projects/prologue/lua) ://tom.rethaller.net/wiki/projects/prologue/lua ）

```
class LuaState
{
private:
    lua_State *L;
    // [...]    

public:
    // get function
    template<typename T>
    T get(const char * varname) {
      char temp[64];
      memset(temp, 0, sizeof(temp));
      int i=0;
      int j=0;
      int n=0;
      while (varname[i] != '\0') {
        char c = varname[i];
        if (c == '.') {
          if (n == 0)
            lua_getglobal(L, temp);
          else
            lua_getfield(L, -1, temp);
          ++n;
          memset(temp, 0, sizeof(temp));
          j = 0;

          if (lua_isnil(L, -1))
            return 0;
        }
        else {
          temp[j] = c;
          ++j;
        }
        ++i;
      }
      if (n == 0)
        lua_getglobal(L, temp);
      else
        lua_getfield(L, -1, temp);
      return lua_get<T>();
    }

    // Generic get
    template<typename T>
    T lua_get() {
      return 0;
    }

    // Specializations
    template <> float lua_get<float>() {
      return lua_tonumber(L, -1);
    }
    template <> double lua_get<double>() {
      return lua_tonumber(L, -1);
    }
    template <> bool lua_get<bool>() {
      return lua_toboolean(L, -1);
    }
    template <> int lua_get<int>() {
      return lua_tointeger(L, -1);
    }
    template <> unsigned int lua_get<unsigned int>() {
      return (unsigned int)lua_tonumber(L, -1);
    }
    template <> const char * lua_get<const char *>() {
      return lua_tostring(L, -1);
    }
}; 
```

-- 编辑 - 为了说明如何使用它，您只需调用：

```
bool use_blur = lua_state.get<bool>("config.render.effects.blur"); 
```

获得以下值：

```
config = {
    render = {
        effects = {
            blur = false,
        }
    }
} 
```

# c# - DataValidation Model / ViewModel / Entity Framework Code First

> ID：10845876
> 
> 赞同：4
> 
> 时间：2012-06-01T07:06:01.877
> 
> 标签：c#, entity-framework, code-first, asp.net-mvc-4

我正在使用 ASP.NET MVC 4 (Beta)、VS 11 (Beta)、EF 5 (Beta) 设计一个新网站，但这个问题也适用于 ASP.NET MVC 3、VS 2010、EF 4 的已发布版本.

第一步：我使用实体框架代码优先方法，例如，我有以下用户模型：

```
public class User
{
  [Key]
  public int UserId {get;set;}

  public String LoginName { get; set; }

  public String Password { get; set; }
} 
```

现在，为了注册，我需要另一个模型，注册模型：

```
public class Registration
{
  public String LoginName { get; set; }

  public String Password { get; set; }

  public String PasswordConfirm { get; set; }
} 
```

这就是我的问题开始的地方：我应该把我的 DataValidation Annotations 放在哪里？例如，密码至少应包含 10 个字符，并且 PasswordConfirmed 必须与 Password 匹配，依此类推。我是否必须在每个可以用密码做某事的模型上写这个（我也在考虑有一个 ChangePassword 模型）

另一件事是如何处理控制器。当我显示我的注册视图模型并且一切正常时，我是否创建一个用户模型并将变量从注册视图模型分配给它？

有时我有很多属性进入数据库，但没有向用户显示（外键、计算值等）。

作为对 DRY 的思考，我不想重复我自己。

这个的最佳实践是什么？

*需要明确的是：注释不是必需的。如果有更好的方法来验证，我会很高兴，如果你告诉他们。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:24:42.620

我不能客观地说哪个是“最佳实践”，但这就是我的看法。如果您要绑定到视图模型，请验证视图模型，因此：

```
public class Registration
{

    public String LoginName { get; set; }

    [Required]
    [StringLength(50, MinimumLength=10)]
    public String Password { get; set; }

    [Required]
    [StringLength(50, MinimumLength=10)]
    public String PasswordConfirm { get; set; }
} 
```

您可以在控制器中“手动”进行验证，检查`POST`密码和确认是否匹配，如果不向 ModelState 添加条目（但这可能会导致代码重复并且有点麻烦），或者`IValidatableObject`在该模型：

```
public class Registration : IValidatableObject
{

    public String LoginName { get; set; }

    [Required]
    [StringLength(50, MinimumLength=10)]
    public String Password { get; set; }

    [Required]
    [StringLength(50, MinimumLength=10)]
    public String PasswordConfirm { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext context)
    {
        if(Password != PasswordConfirm)
            yield return new ValidationResult("Confirmation doesn't match", new[] {"PasswordConfirm"})
        //etc.
    }
} 
```

现在，当您在 之后绑定模型时`POST`，只需调用即可完成验证`ModelState.IsValid`，如果它无效，则返回错误列表 - 包括您的自定义错误。

现在，当然，您也可以将 DataAnnotations 放在 DB 模型上作为一项附加措施，以“以防万一”以避免字符串截断异常等，如果您以某种方式忘记并尝试将更长的字符串推送到数据库

As for the mapping, yes, after you have your model validated, at the end of the `POST` action you usually you map the properties from the model to either a new `User` instance (when adding to the DB) or to the existing one for update. You can use [AutoMapper](http://automapper.org/) or write a naive mapper yourself using reflection - it's a relatively easy task, but it might be better to leave that as a stand-alone exercise, there is no point in reinventing the wheel.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:21:10.907

您应该只在域层中创建实体。但是当您的实体需要一些 DataValidation Annotations 时，您可以为此使用[MvcExtensions](http://mvcextensions.github.com/)。如果您有一些复合或嵌套实体，并且希望将它们作为扁平对象获取，则应该使用[automapper](http://automapper.org/)。这将是您的最佳实践！

# java - Sencha、Touc4J、Codenameone 和 Phonegap？

> ID：10845881
> 
> 赞同：3
> 
> 时间：2012-06-01T07:06:16.207
> 
> 标签：java, cordova, mobile, sencha-touch, codenameone

我来自大量 Java 编程，在 JavaScript 方面很弱。我一直使用基于组件的 Web 框架进行 Web 应用程序开发（ZK、GWT、Wicket.etc）现在我们正在计划一个 Web+移动应用程序。我发现它更好使用 Spring MVC/REST/Jason 组合将业务逻辑与 UI 分离。

下一个问题是移动框架。我看了一下以下框架

1\. **Sencha** - 必须用 JS 编程，它会生成基于 HTML5 的应用程序。

2\. **Touch4J** - Sencha 周围的 Java Wrapper？但是与 GWT 有什么联系？

3\. **Phonegap** - 必须用 JS 编写，它会生成在 web 视图中运行的“混合”应用程序？我可以在 Web 服务器中托管这些应用程序吗？

4\. **codenameone** - 用Java编写，它会生成本地应用程序。（这些不是PhoneGap中的混合应用程序吗？）

对此有何建议，或者是否有其他针对浏览器和移动应用程序开发的框架？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T11:52:39.777

[Codename One](http://www.codenameone.com/)创建“真正的原生应用程序”而不是 phonegap Web 应用程序，Codename One 呈现整个屏幕并允许您将原生组件嵌入到位，从而为您提供比通常使用 Web 应用程序获得的更深入的控制。

基本上，选择归结为您是 Java 开发人员还是 Web 开发人员。

仅供参考，我是 Codename One 的作者之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:25:04.440

@Ashika 使用 Sencha 框架，您可以为 iOS、Android 或 BlackBerry 或 WEB 应用程序构建 MVC 应用程序和原生外观。Phonegap IDE 可以让你用 JS 或 Sencha 或 JQuery 移动融合构建原生应用程序。我希望论文有所帮助。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T19:28:17.357

Touch4j 框架是与 Sencha 和 PhoneGap API 的 Java 绑定。该框架依赖于 GWT 编译器来获取您的 Java 代码并将其翻译/编译为 Javascript，就像任何普通的 GWT 应用程序一样。

Touch4j 目前包含在您的类路径中的 1 个 Jar 文件中，您基本上可以像使用任何其他 Java 3rd-party API 一样使用它。由于您身处 GWT 的世界，因此您将获得与此相关的所有好处：GWT-RPC、调试、Java 的类型安全等。

编写应用程序后，您可以将其作为 Web 应用程序运行（尽管没有设备支持），也可以将其部署到设备上。如果您需要对设备执行任何特定操作，可以使用 Touch4j 中包含的 Cordova 绑定。我们有两个教程可以做到这一点：

[http://emitrom.com/touch4j/tutorials/hello-android](http://emitrom.com/touch4j/tutorials/hello-android)

[http://emitrom.com/touch4j/tutorials/hello-ios](http://emitrom.com/touch4j/tutorials/hello-ios)

例如，如果您想与在 OpenShift 中运行的后端 Java 服务交谈，也有一个教程：

[http://emitrom.com/touch4j/tutorials/meet-openshift](http://emitrom.com/touch4j/tutorials/meet-openshift)

如果您是 Java 开发人员，那么您会对 Touch4j 感到宾至如归。昨天发布了 2.1 版，它包括对 ST 2.0.1 和 Cordova 1.7 的支持。

同样为了充分披露，我是 Touch4j @ Emitrom 背后的人之一。

# javascript - Javascript代码片段在drupal中不起作用

> ID：10845888
> 
> 赞同：0
> 
> 时间：2012-06-01T07:06:35.320
> 
> 标签：javascript

我正在使用下面的 javascript 代码来显示垂直选项卡。在第一行中，我从[https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js)加载了 jquery 库。然后按照下面的代码。到目前为止一切顺利，但管理员告诉我从内容中删除第一行，因为库将由 drupal 自动加载。现在 1.5.2 版本已嵌入到 drupal 中，我删除了我在外部加载库的行，但我的垂直选项卡悬停效果将不再起作用。知道为什么会这样吗？

```
$(文档).ready(函数() {

    $(".tabsnew .tab[id^=tab_menu]").hover(function() {
        var curMenu=$(这个);
        $(".tabsnew .tab[id^=tab_menu]").removeClass("selected");
        curMenu.addClass("选中");

        var index=curMenu.attr("id").split("tab_menu_")[1];
        $(".curvedContainer .tabcontent").css("display","none");
        $(".curvedContainer #tab_content_"+index).css("display","block");
    });
});

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:11:08.360

在 Drupal 7 中，您不能再使用该`$`功能（嗯，不是开箱即用的）。原因是 Drupal 允许您一次运行多个 js 库，并且`$`还用于原型中。

相反，替换`$(document)`为`jQuery(document)`等等。

# jenkins - Jenkins - 资源管理

> ID：10845889
> 
> 赞同：2
> 
> 时间：2012-06-01T07:06:46.987
> 
> 标签：jenkins, jenkins-plugins

是否可以在 Jenkins 中管理一些资源？我的意思是只有一定数量的作业应该并行运行。例如，我的许可证服务器只能提供 4 个许可证，因此使用此类许可证的每个作业应首先检查某个计数器是否大于零，在不再需要许可证后下一次递减和递增。有排除插件，但我认为它只能创建互斥锁（计数器等于 1）而不是信号量（计数器等于 1 或更多）。脚本中的简单变量不是解决方案，因为相同的计数器必须对 master 和所有 slave 可见。任何想法如何处理？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:51:03.293

您可以使用[Throttle Concurrent Builds Plugins](https://wiki.jenkins-ci.org/display/JENKINS/Throttle+Concurrent+Builds+Plugin)。你可以通过两种方式做到这一点：

*   如果限制仅适用于一项作业，您可以编辑作业本身。有一个*Throttle Concurrent Builds*设置，您可以在其中配置允许同一作业的并发构建数量。
*   如果有多个作业需要限制，那么您可以在全局配置中定义*多项目节流类别。*您定义一个具有限制的类别，然后使用该类别标记必须限制的每个作业。

# ruby-on-rails - 将语句从“translate”重命名为“I18n.t”以及从“localize”重命名为“I18n.l”后翻译视图出现问题

> ID：10845890
> 
> 赞同：1
> 
> 时间：2012-06-01T07:06:48.663
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, internationalization, i18n-gem

我正在使用 Ruby on Rails 3.2.2，但我遇到了一个奇怪的问题。在我的视图文件中，我使用以下代码：

```
# app/views/articles/show.html.erb
I18n.t('.page_title') 
```

当我在浏览器中呈现上述视图代码时，我收到了`translation missing: en.page_title`消息。但是，正如您从“缺失”消息中看到的那样，翻译并未引用`articles.show.page_title`YML 语句……但它应该这样做！[“惰性”查找](http://guides.rubyonrails.org/i18n.html#looking-up-translations)似乎没有按预期工作。

*为什么会这样？您对这个问题以及如何解决它有一些想法吗？*

注意：我刚刚做了一个代码重构重命名语句 from `translate`to`I18n.t`和 from `localize`to `I18n.l`...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:20:34.880

简单地尝试：`t('.page_title')`然后你应该看到另一个语句。但实际上，I18n 在几个地方进行搜索。您可以添加翻译并自己查看：

```
en:
  page-title: 
```

或者：

```
en:
  articles:
    show:
      page-title: 
```

# javascript - 如何滚动到一个元素，使其位于滚动 div 的底部？

> ID：10845891
> 
> 赞同：0
> 
> 时间：2012-06-01T07:06:49.797
> 
> 标签：javascript, jquery

我想自动滚动到一个元素，但我无法让它滚动，因此#elem 位于#crm_corp_scroll div 的底部。我尝试使用

```
$j('#crm_corp_scroll').animate({scrollTop: $j('#'+elem).offset().top},'fast'); 
```

但它会滚动 div 以使元素位于顶部且不在视野范围内。

我尝试了本机 scrollIntoView ，但它使我滚动到元素的中间。我希望看到完整的元素。

[jsFiddle 现在是如何工作的](http://jsfiddle.net/HLxGM/)。我希望它滚动，所以第 6 行位于#crm_corp_scroll 的底部。

想出了一个解决方案：

```
$j('#crm_corp_scroll').animate({scrollTop: ($j('#'+elem).offset().top - $j('#crm_corp_scroll').height() + $j('#'+elem).height() * 2) },'fast'); 
```

此滚动元素进入 #crm_corp_scroll div 底部的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:38:58.633

**编辑：**

尝试了不同的方法，可以更好地满足您的需求：

[http://jsfiddle.net/HLxGM/5/](http://jsfiddle.net/HLxGM/5/)

* * *

[我在这里](http://jsfiddle.net/HLxGM/2/)改变了你的 jsfiddle

看看它是否按预期工作。

我拿了 row.offset().top - box.height() + (row.height() * 2) ，它似乎按预期工作。

[这里](http://jsfiddle.net/HLxGM/3/)有一个更可靠的解决方案

以 row.offset().top - box.offset().top - box.height() + (row.height() * 2) 为例，它在其他地方也可以工作，然后是文档的开头。

# iphone - iPhone从设置中检索应用程序中的gmail帐户详细信息

> ID：10845894
> 
> 赞同：0
> 
> 时间：2012-06-01T07:07:00.020
> 
> 标签：iphone, objective-c, ios, ios5, xcode4.2

我正在制作一个我想使用 smtp 服务器发送电子邮件的应用程序。

它工作正常，但如果用户没有提供正确的 gmail 帐户详细信息，例如（电子邮件 ID 和密码），则不会发送电子邮件。

我想要做的是我想从 iPhone 的设置选项卡访问用户 gmail 帐户详细信息到我的应用程序中？

是否可以将 gmail 帐户详细信息检索到应用程序中？

这个你能帮我吗。

以下是我的代码：

```
-(IBAction)sendemail
{
    SKPSMTPMessage *testMsg = [[SKPSMTPMessage alloc] init];
    //testMsg.fromEmail = @"Lexi mobile";//nimit51parekh@gmail.com
    testMsg.fromEmail = soundOn;
    NSLog(@"str_Uname=%@",testMsg.fromEmail);
    //str_info = [str_info stringByReplacingOccurrencesOfString:@"," withString:@""];
    testMsg.toEmail = [string_emailinfo objectAtIndex:0];
    NSLog(@"autoemail=%@",testMsg.toEmail);
    testMsg.relayHost = @"smtp.gmail.com";
    testMsg.requiresAuth = YES;
    testMsg.login = soundOn;
    NSLog(@"autoelogin=%@",testMsg.login);
    testMsg.pass = vibrateOn;
    NSLog(@"autopass=%@",testMsg.pass);
    testMsg.subject = @"Photo Sharing";
    testMsg.wantsSecure = YES; 

    NSURL *url = [[NSURL alloc]initWithString:@"http://itunes.apple.com/us/app/umix-radio/id467041430?mt=8"];
    NSString *msg2 = [NSString stringWithFormat:@"<html><b><a href=\"%@\">DOWNLOAD NOW</a></b>&nbsp&nbsp<a href=\"http://itunes.apple.com/us/app/umix-radio/id467041430?mt=8\"></a></html>",url];
    NSString *sendmsg=[[NSString alloc]initWithFormat:@"%@",msg2];
    NSLog(@"automsg=%@",sendmsg);

    testMsg.delegate = self;

    NSDictionary *plainPart = [NSDictionary dictionaryWithObjectsAndKeys:@"text/plain",kSKPSMTPPartContentTypeKey,
                                                            sendmsg,kSKPSMTPPartMessageKey,@"8bit",kSKPSMTPPartContentTransferEncodingKey,nil];

    testMsg.parts = [NSArray arrayWithObjects:plainPart,nil];
    [testMsg send];

    // [self DeleteRowAfterSending];
    //[self performSelector:@selector(DeleteRowAfterSending) withObject:nil afterDelay:5.0];
}

-(void)messageSent:(SKPSMTPMessage *)message
{
    [message release];

    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Success" message:@"Your email is sent successfully" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alert show];
    [alert release];

    NSLog(@"delegate - message sent");
}

-(void)messageFailed:(SKPSMTPMessage *)message error:(NSError *)error
{
    [message release];

    // open an alert with just an OK button
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Fail" message:@"Message sending failure" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alert show];
    [alert release];

    NSLog(@"delegate - error(%d): %@", [error code], [error localizedDescription]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:10:48.623

> 我想要做的是我想从 iPhone 的设置选项卡访问用户 gamil 帐户详细信息到我的应用程序中？是否可以将 gamil 帐户详细信息检索到应用程序中？

不，并且有充分的理由：*该功能将允许任何开发人员访问任何人的电子邮件帐户*。

那将是一个**巨大的**安全漏洞。

就像位置服务一样，您只需要要求用户输入他们的电子邮件地址和密码。并希望他们希望使用此类个人信息来信任您的应用程序。（假设 Apple 完全批准了您的应用程序。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:50:10.700

让用户从 Google 向您的应用授权。在他们的开发者网站上使用 google api 检查 oauth 授权？ [https://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)

像往常一样，用户通过 google api 使用他的帐户登录并返回给你一个 access_token 以从他的帐户中获取信息，包括你需要的他的电子邮件。

# java - java使用关系

> ID：10845896
> 
> 赞同：0
> 
> 时间：2012-06-01T07:07:06.530
> 
> 标签：java, extends, bluej

我正在用 bluej 编写一个程序，它由几个类组成，这些类获取用户输入并将它们保存为字符串数据。这些类相互覆盖其他方法，并旨在显示在名为 CollegeList 的最终类中。但是，对于 CollegeList 类，我不允许在我的作业中扩展这些子类。相反，我打算使用 bluej '使用关系'并在每个循环中输出这些类的输入和输出。如何才能做到这一点？这是我的一些代码：

```
// College List
import java.util.*;
import java.io.*;
import java.util.ArrayList;
import java.util.Scanner;

public class CollegeList 
{
    //Input Reader
    Scanner scanner = new  Scanner(System.in);
    private ArrayList<Person> people;

    //Main Public Method 
    public CollegeList()
    {
        people=new ArrayList<Person>();
    }    

    public void main()//not allowed to extend
    {
        dataEntry();    
    }

    public void getPeople(Person persons)
    {
        people.add(persons);
        System.out.println(people);;
    }

    //*** Attempting to output preceding class Person in loop - Must be done this way 
    public void dataEntry()
    {
        for(Person persons: people)
        {
            persons.dataEntry();
        }
    }
} 
```

`Person`班级：

```
import java.util.*;
import java.io.*;
import java.util.ArrayList;
import java.util.Scanner;

public class Person extends Student
{
    // instance variables for data types
    public ArrayList<String> firstName;
    public ArrayList<String> lastName;
    public ArrayList<String> streetAdress;
    public ArrayList<String> postCode;
    public ArrayList<String> phoneNumber;
    Scanner scanner = new Scanner(System.in); 

    /**
    * Constructor for objects personal details.
    */
    public Person()
    {
        firstName = new ArrayList<String>();
        lastName = new ArrayList <String>();
        streetAdress = new ArrayList<String>();
        postCode = new ArrayList<String>();
        phoneNumber = new ArrayList<String>();
    }    

    /**
    * Allows User to Enter Details into class Person and Displays it.
    */
    public void dataEntry ()
    {
        System.out.print("Enter First Name: ");
        firstName.add(scanner.nextLine()); 
        System.out.print("Enter Last Name: ");
        lastName.add(scanner.nextLine()); 
        System.out.print("Enter Street Adress: ");
        streetAdress.add(scanner.nextLine()); 
        System.out.print("Enter Post Code: ");
        postCode.add(scanner.nextLine()); 
        System.out.print("Enter Phone Number: ");
        phoneNumber.add(scanner.nextLine()); 
        //display persons information on single line
        System.out.println("The details are - " +
                            "Name: " +
                            firstName + "," +
                            "Surname: " +
                            lastName + "," +
                            "Street Adress: " +
                            streetAdress + "," +
                            "Post Code: " +
                            postCode + "," +
                            "Phone Number: " +
                            phoneNumber + "." );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:40:42.150

从我从您的问题中了解到的是，您被要求**使用组合而不是继承**。

此外，您应该更正一些基本的事情：

*   `Person`类不应该有`List`等`firstName, lastName`。它应该让它们简单`String`，然后你可以根据需要创建一个`List`。`Person`然后，您可以根据需要使用*for 循环*遍历此列表。

*   `Person`不应扩展`Student`，因为从逻辑上讲，每个人都不是学生。

# c# - 关于 Windows 8 应用程序的页面

> ID：10845898
> 
> 赞同：3
> 
> 时间：2012-06-01T07:07:07.453
> 
> 标签：c#, windows-8, windows-runtime

我正在尝试在魅力（右栏）的设置下创建一个名为“关于页面”的选项卡。我想要设置中的关于选项卡，单击时，它将在快照视图本身中加载信息。我正在用 C# 编码，有人对此有任何想法吗？

问候，二进制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:42:06.540

是的，您必须将“关于”“页面”注册为 SettingsCommand 才能使其显示在“设置”魅力中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:48:29.927

我认为您希望在用户打开设置窗格时显示一个关于链接 - 并且在单击时 - 这应该在设置窗格本身中显示一个关于页面 - 对吗？

如果是这样，请查看[github 上的 Callisto 项目](https://github.com/timheuer/Callisto)：它有一个 SettingsFlyout，您可以按如下方式使用它：

```
var settingsFlyout = new SettingsFlyout();
settingsFlyout.Content = new YourSettingsControl(); //this is just a regular XAML UserControl
settingsFlyout.IsOpen = true; 
```

现在，您需要做的就是在用户单击您的设置链接时执行上面的代码。至于链接本身如何在设置窗格中显示，请参阅[MSDN 上的应用程序设置示例](http://code.msdn.microsoft.com/windowsapps/App-settings-sample-1f762f49)。

# linq - 给定日期数据范围的 LINQ 总和

> ID：10845903
> 
> 赞同：1
> 
> 时间：2012-06-01T07:07:17.080
> 
> 标签：linq, c#-4.0

给定一个包含一个月数据列表的数据，我需要计算过去 2 周的总和。我可以通过在 14 天和 7 天内打破列表并计算每个的总和来做到这一点。

有没有一种优雅的方式来实现上述目标？

数据列表示例如下所示：

```
startDate 2012-05-01
value 1

startDate 2012-05-02
value 1
........

startDate 2012-05-31
value 1 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:10:21.340

你的意思是你想要过去两周*每一周的总和，还是过去两周**的*一个值？后者比前者更容易：

```
DateTime end = DateTime.Today;
// Note: inclusive at both ends, so this gives us 14 days in total
DateTime start = end.AddDays(-13);
var sum = data.Where(x => x.StartDate >= start && x.StartDate <= end)
              .Sum(x => x.Value); 
```

请注意，在这里进行`DateTime.Today` *一次*评估很重要，否则如果查询在“午夜”左右执行，您最终可能会得到一组不一致的比较。

如果您的数据不包含任何未来值，您`end`当然可以删除该部分。您还应该仔细考虑您是真的要减去 13 天还是 14 天。

编辑：好的，现在您已经阐明了要求，听起来*最简单*的方法实际上是执行两个查询 - 一个针对过去 7 天，一个针对之前的 7 天。或者，您可以通过分组使用它：

```
DateTime end = DateTime.Today;
// Note: inclusive at both ends, so this gives us 14 days in total
DateTime start = end.AddDays(-13);
var sum = data.OrderBy(x => x.StartDate)
              .Where(x => x.StartDate >= start && x.StartDate <= end)
              .GroupBy(x => ((int) (end - x.StartDate).TotalDays) / 7)
              .Select(g => new { Start = g.First().StartDate,
                                 Sum = g.Sum(x => x.Value) }); 
```

# c - sscanf - 从空字符串读取

> ID：10845904
> 
> 赞同：0
> 
> 时间：2012-06-01T07:07:22.890
> 
> 标签：c, io, scanf, string

当我将一个空字符串传递给 时`sscanf`，它返回零并且它不会更改给定的变量。

```
char* ptr = "";
abc = sscanf(ptr, "%s", output);
// abc == 0 
```

你能告诉我解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T07:21:19.623

[`sscanf`](http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/)等待第一个参数是*函数处理的 C 字符串，作为检索数据的源*。将空字符串传递给此函数不能产生要初始化的变量，因为此函数不会使用任何内容对其进行初始化。

另请注意，*成功时，该函数返回填充的变量数。如果发生匹配失败，此计数可以匹配预期的读数数量或更少，甚至为零。如果在成功读取任何数据之前输入失败，则返回 EOF。*

以下代码，使用 MinGW (gcc-core 4.5.0-1) 编译

```
char str[10];
int ret = sscanf("", "%9s", str);
printf("%d\n", ret); 
```

输出`-1`（EOF）

检查是否成功的好方法是`sscanf`检查它的返回值是否真的等于提供的变量的数量。在这种情况下，它会是`if (ret == 1)`。尽管很多人只是检查是否返回了大于 0 的值，以确保已读取某些内容并且没有发生错误。

# .net - 本地组装不完全信任

> ID：10845905
> 
> 赞同：1
> 
> 时间：2012-06-01T07:07:51.883
> 
> 标签：.net, .net-assembly, code-access-security, full-trust

如何找出本地程序集未完全信任运行的原因？

问题源于 WCF 和代理[请参阅此问题](https://stackoverflow.com/q/10797945/157224)，但似乎是 CAS 问题。

我有一个异常的本地程序集（即 C:\Whatever\xxx.exe）

> 设置配置部分“defaultProxy”的权限不足。请求“System.Net.WebPermission, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”类型的权限失败。

我的解释是程序集没有完全信任地运行。

是否有工具可以告诉我什么策略限制了程序集的信任级别？

我试过`caspol.exe`了，但它只是说：

> 1.  所有代码：无
>     1.1。区域 - 我的电脑：FullTrust
>     ...

# flash - 如何阻止 SWF 文件在本地缓存？

> ID：10845909
> 
> 赞同：1
> 
> 时间：2012-06-01T07:08:10.257
> 
> 标签：flash, actionscript-2, copy-protection

我不想缓存我的 swf 闪存文件 有没有办法可以从我的 swf 文件中执行代码来执行缓存清理？例如，我将我的 swf 文件发布在：www.newgrounds.com- 我希望在加载时从我的 swf 文件部署 actionscript 2.0 中的代码。并且该代码应该从用户缓存或 Internet 临时文件夹中清除加载的 SWF 文件，不留下任何被黑客入侵或复制到 NTFS 硬盘系统的痕迹，涉及非法或虚假分发我的业务文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-13T09:57:56.693

就我而言，我通过使用加载主 SWF 的自定义 SWF 加载程序解决了这个问题。自定义 SWF 加载器使用自定义协议从服务器加载主 SWF。这使得复制 SWF 变得更加困难。可以改为使用 HTTP/HTTPS，但不应使用内置的 actionscript HTTP 类（例如，URLRequest、URLLoader），因为它们会在本地缓存 SWF 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:32:17.743

我之前回答过这个问题，但是找不到我的帖子，所以我会重新回答。

为了*控制*缓存，您需要随文件发送正确的 HTTP 标头。可以将每个 Web 服务器配置为发送带有静态或动态内容的适当标头，过滤文件扩展名等。我说“控制”是因为您不希望用户重新下载文件，即使它没有更改 - 您都会滥用用户的连接和您的服务器。

您需要做的是决定您希望多久检查一次 SWF 文件的更改，并设置适当存储缓存的时间。

或者，您可以修改要在 HTML 包装器中使用的文件名。理想情况下，拥有 SWF 版本，并且每当必须更新文件时，替换它并重命名。显然，这需要您处理包含 SWF 的 HTML 文件的标头，而不是 SWF 自己的标头。

[http://www.mnot.net/cache_docs/](http://www.mnot.net/cache_docs/)这是一个很好的文档，它解释了如何处理标题、含义和后果。*必须阅读*:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T07:43:05.023

在您的嵌入代码中，在 SWF 文件名之后添加一个随机参数。例如，如果您使用 PHP：

```
http://example.com/yourfile.swf?random=<?php echo rand(); ?> 
```

# android - 如何设置 GridView 或 GridLayout 填充屏幕高度并强制所有行高度相等

> ID：10845910
> 
> 赞同：0
> 
> 时间：2012-06-01T07:08:11.603
> 
> 标签：android, android-layout, android-gridview

我有一些视图必须放在 4 x 6 网格中。每个视图应具有相同的宽度 w 和相同的高度 h 并填满屏幕。我想要的是使用 GridLayout 或 GridView 来绘制这些。

我知道我可以在 GridView 中使用 stretchMode = "columnWidth" ，它为其每个子级设置相等的宽度。我还希望它设置相等的高度并垂直填充屏幕。

我可以通过使用任何 GridView 或如果不可能，然后使用 GridLayout 来实现这一点吗？在切换到 LinearLayouts 并使用权重之前，我正在寻找 GridView，因为我有自定义视图作为网格项，我喜欢使用适配器而不是为每个元素编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:43:32.260

您仍然可以使用`Adapters`with `LinearLayouts`or `TableLayout`，您只需以编程方式添加视图并自己调用 getView() 方法。 `GridView`更适用于动态数量的项目并处理自己的滚动。

这可以在你的 onCreateView() 或其他任何东西中使用类似的东西来完成：

```
mAdapter = new FooAdapter();
mList = (LinearLayout) v.findViewById(R.id.list);
for(int i = 0; i< mAdapter.getCount(); i++){
    View child = mAdapter.getView(i, null, mList);
    mList.addView(child);
} 
```

如果您可能只是更改数据，则将旧视图作为 convertViews 传递可能会加快速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T22:21:09.083

我做了一个扩展线性布局的自定义布局。我发现对于我的情况，这是一种更好的方法，并且我可以更好地控制布局上的所有触摸事件和孩子本身。

# php - 如何在 eclipse helios 中配置 codeigniter 2.1.0 框架？

> ID：10845920
> 
> 赞同：1
> 
> 时间：2012-06-01T07:09:12.950
> 
> 标签：php, eclipse, codeigniter, eclipse-3.6, helios

如何在 eclipse helios 中配置 codeigniter 2.1.0 框架？

任何人都可以为我提供执行此操作的步骤链接。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:12:55.410

按照[此处](http://codeigniter.com/user_guide/installation/index.html)找到的安装手册，他们只需创建新的 PHP 项目并将包含 CI 实例的文件夹添加到其中（单击[此处](https://stackoverflow.com/questions/8504720/create-new-php-project-in-eclipse-existing-sources)了解详细信息）。就那么简单 ！祝你好运

PS。Eclipse 并没有为您设置框架，它只是为您提供了一个 PHP IDE，您就是在这里施展魔法的人。

# iphone - 如何在按钮操作中传递单元格选择值

> ID：10845925
> 
> 赞同：0
> 
> 时间：2012-06-01T07:09:37.347
> 
> 标签：iphone, objective-c

我有一个带有 1 节和两行的 tableview，向下我有一个按钮操作。

在按钮操作中，我必须检查单击了哪个单元格，因为根据该单元格，我必须打开电子邮件视图以发送邮件。

我为两个布尔值创建了，但它不能正常工作，仍然选择了我的 emailview 没有单元格的调用这个代码我在做什么

```
@implementation View
@synthesize Mytableview,selectedIndexPaths,value1,value2,cellselected;
BOOL values[1];

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [Mytableview dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] autorelease];
    }

    if ([indexPath row] == 0 && [indexPath section] == 0)
    {

        cell.textLabel.text= @"test";

        if (values[indexPath.row]) { 
            cell.accessoryType = UITableViewCellAccessoryCheckmark;

        } else {
            cell.accessoryType = UITableViewCellAccessoryNone;
        }
        value1=TRUE;
    }

    else if ([indexPath row] == 1 && [indexPath section] == 0)
    {
        cell.textLabel.text= @"test";
        value2=TRUE;
    }

        return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{

    //[Mytableview deselectRowAtIndexPath:indexPath animated:YES];
    //self.cellselected = indexPath.row;

    UITableViewCell *cell = [Mytableview cellForRowAtIndexPath:indexPath];
    //here values is i give as array on top as BOOL values[1];i give size for it 
    values[indexPath.row] = !values[indexPath.row];

    if (values[indexPath.row]) { 
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    } else {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
}

-(IBAction)ExportEmail
{

    if (value1==FALSE) {
        return;
    }
    else {

    Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));
    if (mailClass != nil)
{
// We must always check whether the current device is configured for sending emails
        if ([mailClass canSendMail])
        {
            [self displayComposerSheet];
        }

    }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:18:46.413

声明类可验证的 NSIndexPath；

```
NSIndexPath *myIndexPath; 
```

将您的 didSelectRowAtIndexPath 修改为以下

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{

    UITableViewCell *cell = [Mytableview cellForRowAtIndexPath:indexPath];
    //here values is i give as array on top as BOOL values[1];i give size for it 

    myIndexPath = indexPath;

    if (values[indexPath.row]) { 
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    } else {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
} 
```

您可以在 Button 的 IBAction 中使用该 NSIndexPath，并根据索引打开电子邮件。

```
-(IBAction)ExportEmail
{
    if(myIndexPath.row==0){
    // send mail    
    }else if(myIndexPath.row==1){
    // send mail 
    }
} 
```

# android - 如果调用 setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION) 将不会触发 onTouchEvent()

> ID：10845928
> 
> 赞同：30
> 
> 时间：2012-06-01T07:09:59.640
> 
> 标签：android

我打电话

```
getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION) 
```

当我的应用程序开始使我的应用程序能够显示全屏时。

我希望我的应用程序的用户界面在触摸屏幕时弹出，但`Activity.onTouchEvent()`在第二次触摸屏幕之前不会触发。第一次触摸时，仅显示虚拟键。

所以，我必须触发我的应用程序的 UI 才能弹出

```
public void onSystemUiVisibilityChange(int visibility) {
    if (visibility == View.SYSTEM_UI_FLAG_VISIBLE) {
         // show my APP UI
    }
} 
```

但`onSystemUiVisibilityChange`with`View.SYSTEM_UI_FLAG_VISIBLE`不会被系统每次触摸调用一次（在我的 Galaxy Nexus 上 3 次），尤其是当用户非常快速/经常触摸屏幕时。

项目库 4.0 或 4.03。三星galaxy(9250) 4.03。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-07-30T13:51:02.367

Android 4.4（API 级别 19）引入了一个新`SYSTEM_UI_FLAG_IMMERSIVE`标志`setSystemUiVisibility()`，可让您的应用真正实现“全屏”。此标志与`SYSTEM_UI_FLAG_HIDE_NAVIGATION`和`SYSTEM_UI_FLAG_FULLSCREEN`标志结合使用时，隐藏导航栏和状态栏，并让您的应用程序捕获屏幕上的所有触摸事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-25T14:52:00.800

This did work for me:

```
 setOnSystemUiVisibilityChangeListener(new OnSystemUiVisibilityChangeListener() {
        @Override
        public void onSystemUiVisibilityChange(int visibility) {
            if ((visibility & SYSTEM_UI_FLAG_HIDE_NAVIGATION) == 0) {
                // show my app UI
            }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-12T08:01:15.327

我所做的是首先导入`android.view.GestureDetector`，所以我可以用它来检测手势。Android 有许多在[GestureDector 类](https://developer.android.com/reference/android/view/GestureDetector.html)中自动检测的默认手势。大部分信息都可以[在这里](https://developer.android.com/training/gestures/detector.html)找到，但下面是我在实际项目中使用的代码形式。

首先，我在我的活动中创建了一个匿名类（它可以嵌套在任何地方，但我倾向于将匿名类放在底部，就在右括号之前）。注意：您也可以`OnGestureListener`将其作为类的一部分来实现。

下面的代码用于使用手势检测来提供简单的隐藏/显示。

我已将我的操作栏（我的 UI，最初是隐藏的）声明并定义为实例变量，因此我可以在此处以及其他任何地方访问它，但您可以将其替换为 a`getActionBar().show()`和`getActionBar().hide()`在您不想要的情况下将其声明为实例变量。用你的 UI 代替`actionBar`这里：

```
public class Example extends ActionBarActivity {

    // declared in onCreate() method
    private android.support.v7.app.ActionBar actionBar; 
    private GestureDetectorCompat mDetector;
    private YourView view1;
    private YourView view2;
    private YourView view3;
    private YourView view4;

    // some other code

    class GestureListener extends GestureDetector.SimpleOnGestureListener {

    private static final String DEBUG_TAG = "Gestures in Example Class";

        @Override
        public boolean onDoubleTap(MotionEvent event) {

            Log.d(DEBUG_TAG, "onDoubleTap: " + event.toString());
            // if there is a double tap, show the action bar
            actionBar.show();

            return true;
       }

       @Override
       public boolean onSingleTapConfirmed(MotionEvent event) {

            Log.d(DEBUG_TAG, "onSingleTapConfirmed: " + event.toString());

            // if the tap is below the action bar, hide the action bar
            if (event.getRawY() > getResources().getDimension(R.dimen.abc_action_bar_default_height)) {
                actionBar.hide();
                return true;
            }

            return false;
        }

        @Override
        public boolean onDown(MotionEvent event) {

             return true;

        }

} // end-of-Example Class 
```

然后在我`onCreate()`的声明中，我`GestureDetector`还（可选）设置了我的`GestureListeners`：

```
private GestureDetectorCompat mDetector;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // some code here
    mDetector = new GestureDetectorCompat(this, new GestureListener());

    // this code is for more advanced view logic not needed for a basic set-up
    //setGestureListeners();

} // end-of-method onCreate() 
```

然后，为了实际发送要处理的手势，我们提供了执行此操作的说明，我知道有两种方法，首先是最简单的：

```
/**
* This method recognizes a touchEvent and passes it to your custom GestureListener 
* class.
*/
@Override 
public boolean onTouchEvent(MotionEvent event){

     this.mDetector.onTouchEvent(event);

     return super.onTouchEvent(event);
} 
```

第二种方法更复杂，但是如果您只想识别`View`布局中某些 s 上的触摸事件，例如在您有重叠视图并且只能访问 top 的情况下`View`，您可以创建一个自定义类来传递事件或向上：

```
class MyOnTouchListener implements View.OnTouchListener {

    public boolean onTouch(View v, MotionEvent event) {

        if (v.equals(view4)) {
            return mDetector.onTouchEvent(event);   
        } else return false;
    }
} // end-of-class MyOnTouchListener 
```

然后在这里使用它：

```
public void setGestureListeners() {

    /* when we return false for any of these onTouch methods
    * it means that the the touchEvent is passed onto the next View.
    * The order in which touchEvents are sent to are in the order they
    * are declared.
    */
    view1.setOnTouchListener(new MyOnTouchListener());

    view2.setOnTouchListener(new MyOnTouchListener());

    view3.setOnTouchListener(new MyOnTouchListener());

    view4.setOnTouchListener(new MyOnTouchListener());

} // end-of-method setGestureListeners() 
```

在我的`setGestureListeners`方法中，我给了他们所有相同的命令集，基本上只识别 touchEvents on `view4`。否则，它只是将 touchEvent 传递给下一个视图。

这是使用 的代码`AppCompat`，但如果您不是为旧版本构建，您可以使用常规的`GestureDetector`and `ActionBar`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T21:25:24.570

尝试使用：

getWindow().getDecorView().setSystemUiVisibility(View.GONE);

反而：

getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION)

之后，您可以在全屏模式下使用正常活动，如果您需要导航键，则需要从下向上滑动。使用 android 4.1.2 在 Galaxy Tab 2 为我工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T20:13:18.883

该方法在响应者链的***末尾***`Activity.onTouchEvent()`被调用（意味着在所有其他视图都有机会消费事件之后）。如果您点击对触摸感兴趣的视图（即 a或），您的 Activity 很有可能永远不会看到该事件。*`Button``EditText`*

 *如果您想在触摸被分派到您的视图之前访问它们，请改为覆盖，这是在事件链***开头***`Activity.dispatchTouchEvent()`调用的方法：

 *```
@Override
public boolean dispatchTouchEvent(MotionEvent event) {
    //Check the event and do magic here, such as...
    if (event.getAction() == MotionEvent.ACTION_DOWN) {

    }

    //Be careful not to override the return unless necessary
    return super.dispatchTouchEvent(event);
} 
```

请注意不要覆盖此方法的返回值，除非您有意从其余视图中窃取触摸，否则此处不必要`return true;`的操作会破坏其他触摸处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T13:16:49.650

我也遇到了这个问题，我发现了这个[http://developer.android.com/reference/android/view/View.html#SYSTEM_UI_FLAG_HIDE_NAVIGATION](http://developer.android.com/reference/android/view/View.html#SYSTEM_UI_FLAG_HIDE_NAVIGATION)

所以，没办法帮忙。甚至 android 系统打包的 Gallery 应用程序在照片页面视图中使用 SYSTEM_UI_FLAG_LOW_PROFILE 而不是 SYSTEM_UI_FLAG_HIDE_NAVIGATION。这至少是我们能做的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-08T01:26:04.717

您是否尝试过添加代码以仅在状态更改时显示您的 UI？您必须保持最后已知的可见性，并且仅在您第一次可见时才显示您的 UI：

```
int mLastSystemUiVis;

@Override 
public void onSystemUiVisibilityChange(int visibility) {
    int diff = mLastSystemUiVis ^ visibility;
    mLastSystemUiVis = visibility;
    if ((diff&SYSTEM_UI_FLAG_VISIBLE) != 0
            && (visibility&SYSTEM_UI_FLAG_VISIBLE) == 0) {
        // DISPLAY YOUR UI
    }
} 
```

[从Android 文档](http://developer.android.com/reference/android/view/View.html#setSystemUiVisibility%28int%29)采用的代码示例

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-16T03:10:38.700

我有一个非常相似的问题，试图从`onTouchEvent()`需要两次触摸才能工作来更新 UI，我尝试了一堆精心制作的东西，然后终于让它在第一次点击时工作。

在我的例子中，我展示了一个以前隐藏的项目，然后获取它的高度，然后将一个按钮向下移动该高度。我遇到的问题是高度显示为 0 直到第一次触摸事件完成之后。我能够通过在`ACTION_UP`for the期间调用 show()`onTouchEvent()`而不是它来解决这个问题`ACTION_DOWN`。如果你做类似的事情，也许它会起作用？**

# mysql - mysql：查询以显示前一天的数据在新月份时不起作用

> ID：10845932
> 
> 赞同：1
> 
> 时间：2012-06-01T07:10:19.823
> 
> 标签：mysql

当我在一个月的第一天运行以下查询时，它不返回任何数据。它应该显示前一天。查询正常工作，除非它是当月的第一个，我做错了什么，不允许它看到前一天的数据，因为它是上个月的数据？

```
select COUNT(*) from osticket.ost_ticket where  DATE(created) = DATE(NOW())-1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:12:32.373

您需要使用[DATE_SUB](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)：

```
 select COUNT(*)
   from osticket.ost_ticket
  where  DATE(created) = DATE(DATE_SUB(NOW(), INTERVAL 1 DAY)); 
```

# java - 在 JPA Criteria API 中正确使用聚合语句

> ID：10845936
> 
> 赞同：4
> 
> 时间：2012-06-01T07:10:27.110
> 
> 标签：java, jpa-2.0, java-ee-6, criteria-api

我正在努力正确使用聚合语句，例如`countDistinct`. 我找到了一些聚合查询的例子，但没有一个是使用`countDistinct`.

我试过这个：

```
 final CriteriaBuilder criteriaBuilder = em.getCriteriaBuilder();
    final CriteriaQuery<MyClass> query = criteriaBuilder.createQuery(MyClass.class);

    final Root<MyClass> root = query.from(MyClass.class);

    final Predicate yearPredicate = criteriaBuilder.equal(root.get("year"), currentYear);
    query.select(root);
    query.where(yearPredicate);

    final Expression<Long> count = criteriaBuilder.countDistinct(root); 
```

这是我卡住的地方。`countDistinct`在root上运行是否正确？我如何得到结果？ `query.select(count);`并且`criteriaBuilder.countDistinct(query)`都是非法的。如果有人能指出我正确的方向，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T07:31:41.280

希望，这应该可以帮助你：

```
CriteriaBuilder builder = entityManager.getCriteriaBuilder();

CriteriaQuery<Long> countCriteriaQuery = builder.createQuery( Long.class );
countCriteriaQuery.select( builder.countDistinct( countQuery.from( MyClass.class ) ) );

TypedQuery<Long> countQuery = entityManager.createQuery( countCriteriaQuery );
int totalObjectsNumber = countQuery.getSingleResult().longValue(); 
```

# android - 如何在android中进行junit测试

> ID：10845937
> 
> 赞同：0
> 
> 时间：2012-06-01T07:10:37.120
> 
> 标签：android

我是 android 新手，我想在 android 中进行 junit 测试，然后我[从 android 网站遵循了这段代码](http://developer.android.com/resources/tutorials/testing/helloandroid_test.html)

我收到很多错误，因为**HelloAndroid 无法解析为一种类型**

**此行有多个标记 - HelloAndroid 无法解析为类型 - 构造函数 ActivityInstrumentationTestCase2(Class) 指的是缺少的类型 HelloAndroid**

**此行有多个标记 - ActivityInstrumentationTestCase2 类型的方法 getActivity() 指的是缺少的类型 HelloAndroid - HelloAndroid 无法解析为类型**

**此行有多个标记 - HelloAndroid 无法解析为类型 - com.example.helloandroid.R 无法解析为变量**

```
 package  com.example.helloandroid.test;

import android.test.ActivityInstrumentationTestCase2;
import android.widget.TextView;

public class HelloAndroidTest extends ActivityInstrumentationTestCase2<HelloAndroid> {
    private HelloAndroid mActivity;  // the activity under test
    private TextView mView;          // the activity's TextView (the only view)
    private String resourceString;

    public HelloAndroidTest() {
      super("com.example.helloandroid", HelloAndroid.class);
    }
    @Override
    protected void setUp() throws Exception {
        super.setUp();
        mActivity = this.getActivity();
        mView = (TextView) mActivity.findViewById(com.example.helloandroid.R.id.textview);
        resourceString = mActivity.getString(com.example.helloandroid.R.string.hello);
    }
    public void testPreconditions() {
      assertNotNull(mView);
    }
    public void testText() {
      assertEquals(resourceString,(String)mView.getText());
    }
} 
```

谁能帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:30:32.657

评论中的空间太小，无法向您展示我的观点...

您缺少的一件事（查看您的代码）是导入部分：

您的导入部分：

```
import android.test.ActivityInstrumentationTestCase2;
import android.widget.TextView; 
```

教程导入部分：

```
import com.example.helloandroid.HelloAndroid;
import android.test.ActivityInstrumentationTestCase2;
import android.widget.TextView; 
```

教程还说：

> 本教程及其代码依赖于 Hello World 教程。如果您尚未完成该教程，请立即完成。您将学习 Android 应用程序开发的基础知识，并且您将拥有一个可供测试的 Android 应用程序。本教程将指导您使用 ADT Plugin for Eclipse 和其他 SDK 工具设置 Android 测试项目。您将需要一个版本为 1.5（API 级别 3）或更高版本的 SDK 开发平台。

确保您首先完成[了本教程](http://developer.android.com/resources/tutorials/hello-world.html)。将您的 HelloAndroid 类与HelloWorld 教程中的*最终版本进行比较。*快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T06:34:27.550

我尝试了对我有用的相同示例

我猜在代码中

```
 public HelloAndroidTest() {
    super("com.example.helloandroid", HelloAndroid.class);
    } 
```

而不是`HelloAndroid.class` 你应该把类名放在我的例子中，而是`MainActivity` 我把它改成了它`MainActivity.class`并且它有效

检查您正在测试的类并将 更改`<HelloAndroid>`为类名`i.i MainActivity`

# java - 多线程环境下的连接池超时问题

> ID：10845940
> 
> 赞同：1
> 
> 时间：2012-06-01T07:10:53.590
> 
> 标签：java, multithreading, connection-pooling

我的团队必须进行一些更改并更新旧的 Web 应用程序。该应用程序有一个主线程和 5 到 15 个守护线程，用作工作线程，用于在数据库中检索和插入数据。

所有这些线程都具有这种设计（为方便起见，此处进行了简化）：

```
public MyDaemon implements Runnable {

     // initialization and some other stuffs

     public void run() {
         ...
         while(isEnabled) {
              Engine.doTask1();
              Engine.doTask2();
              ...
              Thread.sleep(someTime);
         }
     }
} 
```

Engine 类提供了一系列静态方法，用于处理 DataAccessor 类的其他方法，其中一些方法是静态的：

```
public Engine {

    public static doTask1() {
        ThisDataAccessor.retrieve(DataType data);
        // some complicated operations
        ThisDataAccessor.insertOrUpdate(DataType data);
    }

    public static doTask2() {
        ThatDataAccessor da = new ThatDataAccessor();
        da.retrieve(DataType data);
        // etc.
    }
    ...
} 
```

DataAccessor 类通常使用包含在同步方法中的简单 JDBC 语句与 DB 交互（对于某些类是静态的）。DataSource 在服务器中配置。

```
public ThatDataAccessor {

    public synchronized void retrieve(DataType data) {
         Connection conn = DataSource.getConnection();
         // JDBC stuff
         conn.close();
    }
    ...
} 
```

**问题**是主线程需要连接到数据库，当这些守护线程工作时，我们很容易用完池中的可用连接，出现“等待连接超时”异常。此外，有时甚至那些守护线程也会得到相同的异常。

我们必须摆脱这个问题。

我们有一个配置了 20 个连接的连接池，不能再添加了，因为“20”是我们的生产环境标准。一些代码块需要同步，即使我们计划只在真正需要的地方移动“同步”关键字。但我不认为这会带来真正的不同。

我们在多线程编程方面没有经验，我们以前从未遇到过这个连接池问题，这就是为什么我要问：*问题是由于这些线程的设计造成的吗？*有没有我们没有注意到的缺陷？

我已经一一分析了线程类，只要它们没有并行运行，似乎就没有瓶颈可以证明那些“等待连接超时”的合理性。该应用程序使用 Oracle 11g 在 WebSphere 7 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:20:07.627

您可能会在某处丢失 finally 块以将连接返回到池中。对于休眠，我认为这可能在您调用 close() 时完成，或者在您调用 rollback() 时可能用于事务。但无论如何我都会打电话给close。

例如，我自己编写了一个快速而肮脏的池来扩展一个旧应用程序以使其成为多线程，这里是一些处理代码（除了 finnally 块之外，这些代码对你来说应该没有意义）：

```
try {
    connection = pool.getInstance();
    connection.beginTransaction();
    processFile(connection, ...);
    connection.endTransaction();
    logger_multiThreaded.info("Done processing file: " + ... );
} catch (IOException e) {
    logger_multiThreaded.severe("Failed to process file: " + ... );
    e.printStackTrace();
} finally {
    if (connection != null) {
        pool.releaseInstance(connection);
    }
} 
```

人们无法正确使用 finally 块是很常见的……例如，查看[这个](http://www.laliluna.de/articles/java-persistence-hibernate/first-hibernate-example-tutorial.html)hibernate 教程，然后跳到最底部的示例。你会看到在 try{} 中他使用了 tx.commit()，在 catch{} 中他使用了 tx.rollback()，但是他没有 session.close()，也没有 finally。因此，即使他在 try 和 catch 中添加了“session.close()”，如果他的 try 块抛出了 RuntimeException 以外的东西，或者他的 catch 在 try 之前导致了额外的异常，或者在 rollback() 之前导致了非 HibernateException ，他的连接不会关闭。如果没有 session.close()，我认为这实际上不是很好的代码。但是，即使代码看起来可以正常工作，a finally 也可以确保您免受此类问题的影响。

所以我会重写他的方法，使用 Session 来匹配[这个](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html)hibernate文档页面上显示的习语。（而且我也不建议他抛出 RuntimeException，但这是一个不同的话题）。

因此，如果您使用的是 Hibernate，我认为以上内容已经足够了。但除此之外，如果您需要特定的代码帮助，则需要更具体，否则您应该使用 finally 来确保连接关闭的简单想法就足够了。

# java - 无法停止 oracle 10g 中的侦听器

> ID：10845942
> 
> 赞同：0
> 
> 时间：2012-06-01T07:11:02.103
> 
> 标签：java, linux

当我停止侦听器时，收到以下错误消息...

**适用于 Linux 的 LSNRCTL：版本 10.2.0.4.0 - 生产日期为 2012 年 6 月 1 日 12:21:31 版权所有 (c) 1991, 2007, Oracle。版权所有。NL-00857：“停止”的参数数量错误（需要 0 - 1 个）**

我正在使用以下命令来停止监听器..

**$ORACLE_HOME/bin/lsnrctl 停止监听器**

当我通过命令提示符执行命令时，它可以工作，但通过 java 失败。

请帮我解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:32:48.297

I think your java cmdStr is not correct; you can't just put a space between commands (setting the env variable then calling lsnrctl). You need to use a semicolon:

```
String cmdStr="env ORACLE_HOME=/u01/app/oracle/product/10.2.0/db_1;/u01/app/oracle/product/10.2.0/db_1/bin/lsnrctl stop LISTENER"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T02:18:53.840

`env`是一个bash命令，所以你不能从java中执行它。您可以将其制作成一个简短的 shell 脚本并从 java 执行，或者您可以执行以下操作

```
String cmd = "/u01/app/oracle/product/10.2.0/db_1/bin/lsnrctl stop LISTENER";
String[] envp = "ORACLE_HOME=/u01/app/oracle/product/10.2.0/db_1";
Process proc = Runtime.getRuntime().exec(cmd, envp);
if (proc.waitFor() != 0) {
    throw new RuntimeException("exit value was nonzero");
} 
```

# iphone - NSMutableArray 在日志中显示正确的值，但在表格单元格中不显示

> ID：10845943
> 
> 赞同：1
> 
> 时间：2012-06-01T07:11:04.517
> 
> 标签：iphone, objective-c, ios, nsmutablearray

我有这个可变数组 ---> `delegate.addItem_Discount`。我第一次将这个可变数组打印到日志中`NSLog(@"%@",delegate.addItem_Discount);`

```
2012-06-01 11:56:16.941 TableView with Navigation[4220:f803]
(
    10,
    20,
    30
) 
```

我得到了高于打印值。并成功显示到表格单元格中。

在这个成功的过程之后，我从这个数组中删除了一个内容`[delegate.addItem_Discount removeObjectAtIndex:1];`并再次打印到日志中

`NSLog(@"%@",delegate.addItem_Discount);`

```
2012-06-01 11:56:16.941 TableView with Navigation[4220:f803]
(

    10,

    30
) 
```

我把这个打印到日志中，显示了完美的结果。但是当我使用此代码将此值打印到表格单元格中时 sideLbl_DisAmt.text = [delegate.addItem_Discount objectAtIndex:indexPath.row]; 我得到正确的值

`10`和`20`。

虽然`20`已从我的数组中删除，但应该只有 print `10 30`。我有什么问题请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:16:44.143

用这个

```
 [delegate.addItem_Discount removeObjectAtIndex:1];
  [yourTableObject reloadData]; 
```

并且不要忘记挂钩 tableview 委托和数据源

# ajax - 重新渲染单个数据表行

> ID：10845945
> 
> 赞同：1
> 
> 时间：2012-06-01T07:11:15.443
> 
> 标签：ajax, jsf-2

我有一个基于的动态表单`dataTable`，嵌套在另一个表单中`dataTable`。

在从嵌套中选择一行时，`dataTable`我想`dataTable`使用父级更新相应的行`<p:ajax>`

```
<h:form id="form">

    <h:dataTable var="field" value="#{testBean.propertyList}" varStatus="status">

        <h:column>
            <h:outputLabel value="#{field.label}"/>
        </h:column>

        <h:column>
            <h:panelGrid columns="2" styleClass="app-grid" rendered="#{field.toOne}">
                <h:panelGroup id="value">
                    <h:outputText value="#{testBean.entity[field.name]}"/>
                </h:panelGroup>

                <h:panelGroup>
                    <p:commandButton id="button" type="button" icon="ui-icon ui-icon-search"/>
                    <p:overlayPanel for="button" my="left bottom" at="left bottom" widgetVar="panel_#{field.name}">
                        <p:dataTable
                            id="table" 
                            value="#{field.selectableModel}" 
                            selection="#{testBean.entity[field.name]}" 
                            selectionMode="single" 
                            var="item" 
                            rows="10"
                            paginator="true" 
                            paginatorAlwaysVisible="true"
                            paginatorPosition="bottom"
                            paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                            currentPageReportTemplate="{totalRecords} records found"
                            rowsPerPageTemplate="5,10,15">

                            <p:ajax event="rowSelect" update=":???:value" oncomplete="panel_#{field.name}.hide()"/>
                            <p:column headerText="entity">#{item}</p:column>
                        </p:dataTable>
                    </p:overlayPanel>
                </h:panelGroup>
            </h:panelGrid>
        </h:column>

    </h:dataTable>

</h:form> 
```

问题是生成的组件树没有重复的显式子组件`dataTable`：

```
<HtmlForm enctype="application/x-www-form-urlencoded" id="form" inView="true" prependId="true" rendered="true" submitted="false" transient="false">
    <HtmlDataTable border="-2147483648" first="0" id="j_idt101" inView="true" rendered="true" rowIndex="-1" rowStatePreserved="false" rows="0" transient="false" var="field">
        <UIColumn id="j_idt103" inView="true" rendered="true" transient="false">
            <HtmlOutputLabel escape="true" id="j_idt120" inView="true" rendered="true" style="" transient="false"/>
        </UIColumn>
        <UIColumn id="j_idt121" inView="true" rendered="true" transient="false">
            <HtmlPanelGrid border="-2147483648" columns="2" id="j_idt122" inView="true" rendered="false" styleClass="app-grid" transient="false">
                <HtmlPanelGroup id="value" inView="true" rendered="true" transient="false">
                    <HtmlOutputText escape="true" id="j_idt227" inView="true" rendered="true" transient="false"/>
                </HtmlPanelGroup>
                <HtmlPanelGroup id="j_idt117" inView="true" rendered="true" transient="false">
                    <CommandButton ajax="true" async="false" disabled="false" escape="true" global="true" icon="ui-icon ui-icon-search" iconPos="left" id="button" immediate="false" inView="true" inline="false" partialSubmit="true" readonly="false" rendered="true" transient="false" type="button"/>
                    <OverlayPanel appendToBody="false" at="left bottom" dynamic="false" for="button" id="j_idt228" inView="true" my="left bottom" rendered="true" transient="false" widgetVar="panel_">
                        <DataTable currentPageReportTemplate="{totalRecords} records found" draggableColumns="false" editable="false" emptyMessage="No records found." filterEvent="keyup" first="0" id="table" inView="true" lazy="false" liveScroll="false" pageLinks="10" paginator="true" paginatorAlwaysVisible="true" paginatorPosition="bottom" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rendered="true" resizableColumns="false" rowIndex="-1" rowStatePreserved="false" rows="10" rowsPerPageTemplate="5,10,15" scrollHeight="-2147483648" scrollRows="0" scrollWidth="-2147483648" scrollable="false" selectionMode="single" sortOrder="ascending" transient="false" var="item">
                            <Column colspan="1" disabledSelection="false" filterBy="false" filterMatchMode="startsWith" filterMaxLength="2147483647" filterPosition="bottom" headerText="entity" id="j_idt229" inView="true" rendered="true" resizable="true" rowspan="1" transient="false" width="-1">
                                #{item}
                            </Column>
                        </DataTable>
                    </OverlayPanel>
                </HtmlPanelGroup>
            </HtmlPanelGrid>
        </UIColumn>
    </HtmlDataTable>
</HtmlForm> 
```

出于这个原因，我正在考虑使用`<c:forEach>`而不是 parent`dataTable`来使组件树中的每一行都显式。

但第一个问题`testBean`是`@ViewScoped`...

第二个是使用`<c:forEach>`导致`Java Heap Space`错误......

一些提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:41:40.730

给外部表一个固定的`id`.

```
<h:dataTable id="table" ...> 
```

然后你就可以使用

```
<p:ajax ... update=":form:table:value" /> 
```

# javascript - 如何使用 jQuery 或 Javascript 将整个网页捕获为任何格式的图像？

> ID：10845946
> 
> 赞同：0
> 
> 时间：2012-06-01T07:11:28.197
> 
> 标签：javascript, jquery, html, canvas

我想捕获整个网页的 HTML 以及该 html 和图像中的输入字段的值。我尝试搜索并得到它可以通过画布完成，但它不适用于IE6、7、8。

谁能告诉我该怎么做？

谢谢

# memcached - 使用哪个数据存储来存储与 memcache 中的键对应的元数据？

> ID：10845950
> 
> 赞同：1
> 
> 时间：2012-06-01T07:11:31.307
> 
> 标签：memcached, redis, datastore

我有一个 memcache 后端，我想添加 redis 来添加 memcache 键的元数据。元数据如下： Miss_count：数据不在内存缓存中的次数。Hash_value：memcache中key对应的数据的hash值。

`Data in memcache : key1 ::: Data`
`Meta data (miss count) : key1_miss ::: 10`
`Meta data (hash value) : key1_hash ::: hash(Data)`

请提供帮助，因为当我将元数据存储在内存缓存本身中时，元数据在其到期时间之前就被删除了，因为元数据的大小很小并且slab分配正在分配一个小内存抓住它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:14:59.690

随着元数据会随着时间的推移而增加，redis 的哈希概念会失效。因此，应用客户端逻辑来查看是否满足 max_zipped。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:12:09.550

如果我正确理解了您的用例，我怀疑 Redis 可能是一个不错的选择。假设您将随着时间的推移定期更新与各种散列相关的元数据未命中计数，您可能希望使用 Redis 排序集。例如，如果您希望将未命中计数存储在名为“misscounts”的排序集中，则添加/更新这些计数的 Redis 命令将是一个并且相同：

zadd misscounts misscount key1

...因为 zadd 如果条目不存在则添加该条目，或者如果存在则覆盖现有条目。如果您在每次发生未命中时触发的进程中有一个挂钩，您可以改为使用：

zincrby miscounts 1 key1

类似于 zadd 命令的行为，如果一个条目不存在，zincrement 将创建一个新条目（使用增量值作为计数），或者如果一个条目存在，则将现有计数增加您传递的增量值。

Redis 命令的完整文档可以在[这里](http://redis.io/commands)找到。[此处](http://redis.io/topics/data-types)详细介绍了 Redis 中不同类型的存储选项。

哦，还有最后一点。以我的经验，Redis 很糟糕。很抱歉诅咒（大写），但根本没有其他方法可以做到 Redis 正义。我们称我们的 Redis 服务器为“honey badger”，因为当负载开始增加并且我们的其他服务器开始自动缩放时，honey badger 根本不在乎。

# blackberry - 黑莓推送实现并等待确认

> ID：10845957
> 
> 赞同：20
> 
> 时间：2012-06-01T07:12:02.237
> 
> 标签：blackberry, java-me, push-notification

我已经为黑莓实现了推送启动器的前 4 个步骤

1.  发送推送请求
2.  BlackBerry 服务返回响应
3.  BlackBerry 服务将数据推送到设备上分配的特定端口
4.  设备返回对 BlackBerry 服务的响应

现在我正在执行以下两个步骤，但还没有发生任何事情：

**5\. 黑莓服务将确认转发给内容提供商**

**6\. 读取通知返回到黑莓服务**

有谁知道如何实施？我在填写请求时提供了一个域，但是如何实现我和黑莓服务器之间的连接，我需要等待多长时间才能等待他们的响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T18:37:52.370

1.  实际上，您的内容提供商向黑莓服务器发送消息，并且还指定了内容提供商要向其发送消息的设备的 pin 号。
2.  如果您有 bb 数据服务，您的设备会自动注册到 bb 服务器。
3.  您的应用程序正在后台侦听特定端口，并且您的应用程序还具有由 rim 提供的特定应用程序 ID。

因此，当内容提供者向 bb 服务器发送消息时，它还指定了应用程序 ID，并且 bb 服务器具有有关与此应用程序 ID 对应的端口的信息。并将消息发送到其引脚由内容提供者指定的设备的端口。

# javascript - JavaScript：使用正则表达式提取其他字符之间的字符

> ID：10845960
> 
> 赞同：2
> 
> 时间：2012-06-01T07:12:12.710
> 
> 标签：javascript, jquery, regex, string

考虑这个字符串，

```
var string = "sometext/#a=some_text/#b=25/moretext"; 
```

我想做的是提取“a”和“b”的值（“some_text”和25）

所以基本上我想要做的是`"#a="`在下面找到并抓取所有内容`/`，然后对 b 做同样的事情。如何实现？此外，我会使用相同的表达式来更改字符串中的值吗？

我用 PHP 做了这件事，但现在我无法为 JavaScript 弄明白。

## 编辑

这是提取的PHP版本：

```
$string = "sometext/#a=some_text/#b=25/moretext";

$expr = '@#([a-z]+)=(.+?)/@';
$count = preg_match_all($expr, $string, $matches);

$result = array();
for ($i = 0; $i < $count; $i++) {
    $result[$matches[1][$i]] = $matches[2][$i];
}

print_r($result[b]); 
```

（输出将是“some_text”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T07:16:29.557

```
var x = "sometext/#a=some_text/#b=25/moretext".match(/#a=(.+)\/.*#b=(.*).*\//)
var matches = [x[1], x[2]]; 
```

[**现场演示**](http://jsfiddle.net/qNc4z/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T07:28:00.313

如果您希望提取所有值并将它们作为名称/值对存储在字典中，您可以使用以下命令：

```
var regexp = /#(.*?)=(.*?)\//g;
var string = "sometext/#a=some_text/#b=25/moretext";
var match;

var result = {};

while ((match = regexp.exec(string)) != null) {
  result[match[1]] = match[2];
}

alert(JSON.stringify(result)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T07:26:14.800

根据有限的信息（您没有指定`#`和之间可以出现哪些字符`=`），这就是我认为您正在寻找的内容：

```
var string = "sometext/#a=some_text/#b=25/moretext",
    regex = /#([^=]+)=([^\/]+)/g,
    matches = [],
    match;
while (match = regex.exec(string)) {
    matches.push(match[2]);
}
// matches -> ["some_text", "25"] 
```

如果要更改字符串中的值，可以使用与以前相同的正则表达式来执行此操作：

```
string = string.replace(regex, "#$1=new_value");
// -> "sometext/#a=new_value/#b=new_value/moretext" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T07:23:34.537

更改字符串的值

```
var string = "sometext/#a=some_text/#b=25/moretext"; 

Regex.Replace(string,"(#a=).(/)",,"$1New Text$2"); 
```

# css - ipad viewport css 忽略绝对元素

> ID：10845968
> 
> 赞同：0
> 
> 时间：2012-06-01T07:12:29.323
> 
> 标签：css, ipad, viewport

有一个网站，我试图在 iPad 上显示全宽，忽略树，如屏幕截图所示，以便页面居中显示

[http://dl.getdropbox.com/u/5709910/screenshots/Screen%20Shot%202012-05-30%20at%205.50.45%20PM.png](http://dl.getdropbox.com/u/5709910/screenshots/Screen%20Shot%202012-05-30%20at%205.50.45%20PM.png)

树是一个绝对定位的元素。

如何在 iPad 上设置视口以使其忽略某些元素。当页面在 iPad 中打开时，我希望将屏幕放大到仅页脚栏的宽度。

请注意，我不能将树作为背景图像的一部分，因为树需要在前面。

如果有人有任何想法来实现这一目标，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:42:41.113

您是否尝试过在 body 之前设置视口宽度？

```
<meta name="viewport" content="width=768"> 
```

# php - Facebook php sdk 停止返回 api 值

> ID：10845971
> 
> 赞同：1
> 
> 时间：2012-06-01T07:12:47.327
> 
> 标签：php, facebook, facebook-graph-api

自 2011 年 8 月以来，我们一直在使用 Facebook php sdk 进行 oauth 注册和验证。上个月的某个时候它坏了。打破我的意思是 $me = $facebook->api('/me'); 调用突然开始返回一个空白数组 - 没有抛出任何错误。几个月来没有对系统的这一部分进行任何更改。

我借此机会迁移到 v3.1.1，但没有任何效果。

我们在 jsp/Tomcat 安装中运行一个 php 页面，所以我们使用的是 quercus。我把它作为普通的 php 运行并得到相同的结果。

由于我没有看到发出一般警报，我认为它一定是我们站点中的某些东西，但我无法隔离任何东西。任何想法？这是 php 代码（我们有一个用户，所以我们在 AUTHENTICATED 代码块中 - $me 数组不包含任何内容）

```
<?php
$request = quercus_servlet_request();
$page = $request->getAttribute("page");

include_once 'facebook.php';

$facebook = new Facebook(array(
'appId'  => $request->getAttribute("appId"),
'secret' => $request->getAttribute("secretKey"),
'cookie' => true
));

if(is_null($facebook->getUser())) {
    $url = $facebook->getLoginUrl(array('next' => $request-  >getAttribute("canvasUrl"),'req_perms' => 'publish_stream'));
    $page->Log("LOGIN URL",$url);
    echo "<script type='text/javascript'>window.top.location.href = '$url';</script>";
    exit;
} else {
    try {
        $page->Log("AUTH","AUTHENTICATED");
    $uid = $facebook->getUser();
        $me = $facebook->api('/me');
        $page->Log("UID",$uid);
        $page->Log("ME array",print_r($me, true));

        $request->getSession()->setAttribute("authenticated","T");
        $request->getSession()->setAttribute("fbuid",strval($uid) );
        $request->getSession()->setAttribute("fname",$me['first_name']);
        $request->getSession()->setAttribute("lname",$me['last_name']);
        $request->getSession()->setAttribute("accesstoken",$facebook- >getAccessToken());
    //$page->Log("fbuid",$request->getSession()->getAttribute("fbuid")); 
```

…………

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:29:28.467

现在，facebook 在世界各地都有一些停机时间。您可能会看到一些奇怪的问题。

[但是您应该考虑在这里](https://developers.facebook.com/tools/explorer?method=GET&path=1274834235)使用图形 API 资源管理器测试您的应用程序并确认问题在您身边或 Facebook ![在此处输入图像描述](../Images/d426020950dbaee60277628a09a79da8.png)

在右上角选择您的应用并查询 API。

对我来说它工作正常（印度）。

# php - 如何与加载的 php 文件进行交互？

> ID：10845972
> 
> 赞同：0
> 
> 时间：2012-06-01T07:12:51.607
> 
> 标签：php, jquery, click, load

```
$('#offer').click(function() {
    $("<br><br><strong>Please wait...</strong>").appendTo($("#results"));
    $('#results').load("fulfill.php");

});

$("#employees tr").live("click", function() {
    var id = $(this).find('id').attr('id');
    alert(id); 
```

我有一个在fulfill.php 文件中的动态表。加载时，我希望能够单击任何行并获取 id 值。它加载得很好，我可以点击回复。我无法获得 id 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:14:54.410

更改此行

```
 var id = $(this).find('id').attr('id'); 
```

至

```
var id = $(this).attr('id'); 
```

如果你想要`tr`.

你应该考虑使用[$.on](http://api.jquery.com/on)因为 $.live 现在已经贬值了。

# iphone - 编译器错误为 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用），应用程序已完成

> ID：10845973
> 
> 赞同：1
> 
> 时间：2012-06-01T07:12:52.273
> 
> 标签：iphone, ios4, ios5, xcode4

我已经创建了一个应用程序并成功完成了我只想在 Fcebook 中分享，我通过参考一些教程进行了尝试。这是我在 viewcontroller.m 文件中的代码。

```
//
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize btnLogin;
@synthesize btnPublish;
@synthesize lblUser;
@synthesize actView;
@synthesize facebook;
@synthesize permissions;
@synthesize isConnected;

-(void)checkForPreviouslySavedAccessTokenInfo
{
// Initially set the isConnected value to NO.
isConnected = NO;

// Check if there is a previous access token key in the user defaults file.
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] &&
    [defaults objectForKey:@"FBExpirationDateKey"]) {
    facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];

    // Check if the facebook session is valid.
    // If it’s not valid clear any authorization and mark the status as not connected.
    if (![facebook isSessionValid]) {
        [facebook authorize:nil];
        isConnected = NO;
    }
    else {
        isConnected = YES;
    }
}
}

-(void)setLoginButtonImage{
UIImage *imgNormal;
UIImage *imgHighlighted;
UIImageView *tempImage;

// Check if the user is connected or not.
if (!isConnected) {
    // In case the user is not connected (logged in) show the appropriate
    // images for both normal and highlighted states.
    imgNormal = [UIImage imageNamed:@"LoginNormal.png"];
    imgHighlighted = [UIImage imageNamed:@"LoginPressed.png"];
}
else {
    imgNormal = [UIImage imageNamed:@"LogoutNormal.png"];
    imgHighlighted = [UIImage imageNamed:@"LogoutPressed.png"];
}

// Get the screen width to use it to center the login/logout button.
// We’ll use a temporary image view to get the appopriate width and height.
float screenWidth = [UIScreen mainScreen].bounds.size.width;    
tempImage = [[UIImageView alloc] initWithImage:imgNormal];
[btnLogin setFrame:CGRectMake(screenWidth / 2 - tempImage.frame.size.width / 2, btnLogin.frame.origin.y, tempImage.frame.size.width, tempImage.frame.size.height)];

// Set the button’s images.
[btnLogin setBackgroundImage:imgNormal forState:UIControlStateNormal];
[btnLogin setBackgroundImage:imgHighlighted forState:UIControlStateHighlighted];

// Release the temporary image view.
[tempImage  release];
}

-(void)showActivityView{
// Show an alert with a message without the buttons.
UIAlertView *msgAlert = [[UIAlertView alloc] initWithTitle:@"My test app" message:@"Please wait..." delegate:self cancelButtonTitle:nil otherButtonTitles:nil];
[msgAlert show];

// Show the activity view indicator.
actView = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(0.0, 0.0, 40.0, 40.0)];
[actView setCenter:CGPointMake(160.0, 350.0)];
[actView setActivityIndicatorViewStyle:UIActivityIndicatorViewStyleGray];
[self.view addSubview:actView];
[actView startAnimating];
}

-(void)stopShowingActivity{
[actView stopAnimating];
UIAlertView *msgAlert = nil;
[UIAlertView:msgAlert dismissWithClickedButtonIndex:0 animated:YES];
}

-(void)saveAccessTokenKeyInfo{
// Save the access token key info into the user defaults.
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
[defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
[defaults synchronize];
}

-(void)request:(FBRequest *)request didReceiveResponse:(NSURLResponse *)response {
// Keep this just for testing purposes.
NSLog(@"received response");
}

-(void)request:(FBRequest *)request didLoad:(id)result{
// With this method we’ll get any Facebook response in the form of an array.
// In this example the method will be used twice. Once to get the user’s name to
// when showing the welcome message and next to get the ID of the published post.
// Inside the result array there the data is stored as a NSDictionary.    
if ([result isKindOfClass:[NSArray class]]) {
    // The first object in the result is the data dictionary.
    result = [result objectAtIndex:0];
}

// Check it the “first_name” is contained into the returned data.
if ([result objectForKey:@"first_name"]) {
    // If the current result contains the "first_name" key then it's the user's data that have been returned.
    // Change the lblUser label's text.
    [lblUser setText:[NSString stringWithFormat:@"Welcome %@!", [result objectForKey:@"first_name"]]];
    // Show the publish button.
    [btnPublish setHidden:NO];
}
else if ([result objectForKey:@"id"]) {
    // Stop showing the activity view.
    [self stopShowingActivity];

    // If the result contains the "id" key then the data have been posted and the id of the published post have been returned.
    UIAlertView *al = [[UIAlertView alloc] initWithTitle:@"My test app" message:@"Your message has been posted on your wall!" delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
    [al show];
    [al release];
}
}

-(void)request:(FBRequest *)request didFailWithError:(NSError *)error{
NSLog(@"%@", [error localizedDescription]);

// Stop the activity just in case there is a failure and the activity view is animating.
if ([actView isAnimating]) {
    [self stopShowingActivity];
}
}

-(void)fbDidLogin{
// Save the access token key info.
[self saveAccessTokenKeyInfo];

// Get the user's info.
[facebook requestWithGraphPath:@"me" andDelegate:self];
}

-(void)fbDidNotLogin:(BOOL)cancelled{
// Keep this for testing purposes.
//NSLog(@"Did not login");

UIAlertView *al = [[UIAlertView alloc] initWithTitle:@"My test app" message:@"Login cancelled." delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
[al show];
}

-(void)fbDidLogout{
// Keep this for testing purposes.
//NSLog(@"Logged out");

// Hide the publish button.
[btnPublish setHidden:YES];
}

- (IBAction)LoginOrLogout {
// If the user is not connected (logged in) then connect.
// Otherwise logout.
if (!isConnected) {
    [facebook authorize:permissions];

    // Change the lblUser label's message.
    [lblUser setText:@"Please wait..."];
}
else {
    [facebook logout:self];
    [lblUser setText:@"Tap on the Login to connect to Facebook"];
}

isConnected = !isConnected;
[self setLoginButtonImage];
}

- (IBAction)Publish {
// Show the activity indicator.
[self showActivityView];

// Create the parameters dictionary that will keep the data that will be posted.
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"My test app", @"name",
                               @"http://www.google.com", @"link",
                               @"FBTestApp app for iPhone!", @"caption",
                               @"This is a description of my app", @"description",
                               @"Hello!\n\nThis is a test message\nfrom my test iPhone app!", @"message",              
                               nil];

// Publish.
// This is the most important method that you call. It does the actual job, the message posting.
[facebook requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self];
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
// Set the permissions.
// Without specifying permissions the access to Facebook is imposibble.
permissions = [[NSArray arrayWithObjects:@"read_stream", @"publish_stream", nil] retain];

// Set the Facebook object we declared. We’ll use the declared object from the application
// delegate.
facebook = [[Facebook alloc] initWithAppId:@"236058923xxxxxx" andDelegate:self];

// Check if there is a stored access token.
[self checkForPreviouslySavedAccessTokenInfo];

// Depending on the access token existence set the appropriate image to the login button.
[self setLoginButtonImage];

// Specify the lblUser label's message depending on the isConnected value.
// If the access token not found and the user is not connected then prompt him/her to login.
if (!isConnected) {
    [lblUser setText:@"Tap on the Login to connect to Facebook"];
}
else {
    // Get the user's name from the Facebook account. The message will be set later.
    [facebook requestWithGraphPath:@"me" andDelegate:self];
}

// Initially hide the publish button.
[btnPublish setHidden:YES];

}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)dealloc {
[btnLogin release];
[lblUser release];
[btnPublish release];
[actView release];
[facebook release];
[permissions release];
[super dealloc];
}

@end 
```

viewcontroller.h 文件中的代码是

```
#import <UIKit/UIKit.h>
#import "FBConnect.h"
#import "Facebook.h"

@interface ViewController : UIViewController <FBSessionDelegate, FBRequestDelegate,        FBDialogDelegate>{
UIButton *btnLogin;
UIButton *btnPublish;
UILabel *lblUser;
UIActivityIndicatorView *actView;

Facebook *facebook;

NSArray *permissions; 
BOOL isConnected; 
```

}

```
@property (retain, nonatomic) IBOutlet UIButton *btnLogin;
@property (retain, nonatomic) IBOutlet UIButton *btnPublish;
@property (retain, nonatomic) IBOutlet UILabel *lblUser;
@property (retain, nonatomic) UIActivityIndicatorView *actView;
@property (retain, nonatomic) Facebook *facebook;
@property (retain, nonatomic) NSArray *permissions;
@property (nonatomic) BOOL isConnected; 
```

*   (IBAction)登录或注销；
*   (IBAction)发布；

    @结尾

谁能说我收到这些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:17:36.473

编辑：

从您的评论来看，您似乎还将`main.c`Facebook SDK 示例附带的文件复制到了您的项目中（或者您可能会删除您的文件；main.c 仅包含样板代码）。删除它（或者更好的是，删除与示例相关的所有文件），它应该可以工作。

我的猜测是您没有正确地将您的应用程序与 Facebook 框架链接，但您应该真正查看从编译器获得的确切错误消息。

至于第一点，请检查：[创建您的 iOS 项目](https://developers.facebook.com/docs/mobile/ios/build/#sdk)。

至于第二个，在 Xcode 4 中，单击“警报”图标，如附图所示。

![在此处输入图像描述](../Images/b59d6d1cd9128c686c181b8eae8032b6.png)

如果您需要更多帮助，请报告您从链接器获得的确切错误。

# sqlite - 如何在sqlite中更改数据库名称？

> ID：10845974
> 
> 赞同：5
> 
> 时间：2012-06-01T07:12:58.830
> 
> 标签：sqlite

我必须简单地更改数据库的名称，但似乎该`ALTER DATABASE`命令在 SQLite 中无效。

我的场景是我有一个 SQLite 加密数据库，现在我想重命名它。手动重命名 db 文件后，加密不起作用。所以我尝试使用命令更改数据库的名称。看起来问题是由于加密造成的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-01T07:15:59.323

每个 sqlite 文件包含一个且只有一个数据库。这个数据库没有名字。据我所知，第一个打开的数据库有一个“虚拟”名称`main`，当你想引用它时，说当你附加补充数据库时。您可以选择附加的数据库的“虚拟”名称。

```
[someone@somewhere tmp]$ sqlite3 bla.db
SQLite version 3.7.11 2012-03-20 11:35:50
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> .databases
seq  name             file                                                      
---  ---------------  ----------------------------------------------------------
0    main             /tmp/bla.db                                  
sqlite> attach database 'example.db' as another_db;
sqlite> .databases
seq  name             file                                                      
---  ---------------  ----------------------------------------------------------
0    main             /tmp/bla.db                                  
2    another_db       /tmp/example.db 
```

否则 Laurent 是正确的，如果这是您在此处尝试执行的操作，您可以重命名数据库文件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-01T07:15:04.347

SQLite 中没有数据库名称，因为每个文件只有一个数据库。也许您想要做的是重命名 SQLite 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T20:06:53.637

在最新版本的 Sqlite3 中有**.backup**命令。

如果数据库不大，这可能是一个解决方案：

```
S:\>sqlite3 encrypted.db
SQLite version 3.7.9 2011-11-01 00:52:41
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> .backup new.db
sqlite> .q 
```

然后

```
S:\>sqlite3 new.db
SQLite version 3.7.9 2011-11-01 00:52:41
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> 
```

# database-design - 什么是规范覆盖、封闭和无关属性？

> ID：10845987
> 
> 赞同：2
> 
> 时间：2012-06-01T07:14:14.030
> 
> 标签：database-design, relational-database, database-schema, functional-dependencies, canonical-form

我正在研究数据库概念，但有 3 个概念我不明白：规范覆盖、无关属性和闭包。我阅读了有关规范封面的定义，但我不了解它与 3NF 和 BCNF 的关系。规范覆盖的定义似乎是没有多余的属性，而多余的属性是不改变函数依赖集的闭包的属性，而闭包是 F 隐含的所有函数依赖的集合，一组函数依赖.

但这一切都有些模糊，我想知道一个直观的定义和如何计算

*   规范封面
*   关闭
*   无关属性

功能依赖性我相信我理解 - 如果我们在表中拥有这些属性，这就像表中的 PK 一样。

在数据库细化中有一个相当广泛的答案[- F（无关属性）的最小覆盖，](https://stackoverflow.com/questions/6008354/database-refinement-minimal-cover-of-f-extraneous-attributes)但我发现很难阅读所有集合定义和代数，我宁愿用简单的英语定义。

例如，具有模式 U={A,B,C,D,E,F,G} 和函数依赖

```
AB → C
B → E
CF → D
C → A
B → F
CE → F
CD → B
B → C 
```

闭包 A+,B+,C+,D+,E+,F+ 是这样计算的吗？

```
A+ = A
B+ = BCDEF
C+ = A
D+ = D
E+ = E
F+ = F 
```

如果我没记错的话，那么 BCDEFG 是 1NF/2NF 中的超级键（“整个键”），但它是最小的（3NF）吗？

在闭包和规范覆盖的帮助下，还应该做些什么来将此示例规范化为 1NF、2NF 和 3NF？规范覆盖与最小覆盖相同吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-31T19:57:39.643

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:36:02.423

> 闭包 A+,B+,C+,D+,E+,F+ 是这样计算的吗？

“G”怎么了？它在这里的缺席意义重大。你知道为什么吗？

> 如果我没记错的话，那么 BCDEFG 是 1NF/2NF 中的超级键（“整个键”），但它是最小的（3NF）吗？

*Superkey*（一个单词，没有空格）并不意味着*整个 key*；它只是意味着*一把钥匙*。所有属性的集合是一个平凡的超键，所以 {ABCDEFG} 是一个平凡的超键。

由于 B->C 和 C->A（传递依赖），您可以将平凡的超键简化为 {BCDEFG}。更多的减少是可能的，所以 {BCDEFG} 不是一个最小的超键。*{ BCDEFG* } 是一个可约化的超键。

*最小的超级键之一*是 {BG}。（我可以说，“{BG} 是不可约的超键。”）还有其他最小超键。

> 在闭包和规范覆盖的帮助下，还应该做些什么来将此示例规范化为 1NF、2NF 和 3NF？

以防万一您对此有一个常见的误解，通常不可能标准化为 2NF*且不更高*，或标准化为 3NF*且不更高*。消除部分键依赖（“规范化为 2NF”）可以将所有关系保留在 5NF 中。

下一步是确定所有候选键（所有不可约的超键）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-29T09:47:50.147

My answer is derived from the Algorithm given in Database System Concepts by Korth.

Are the closures A+,B+,C+,D+,E+,F+ calculated this way? Steps to calculate the closure of (A,B,C,D,E,F) under F let say take for B

1.  result = {B}
2.  repeat
3.  for each functional dependency(e.g `B -> E`) in `F` do
4.  begin
5.  if `B` is subset of result
6.  then `result(i.e B) = result(i.e B) U {E}`
7.  end
8.  until(result stops changing)

In this way the closures of the following will be: A+ = A

B+ = ABCDEF

C+ = AC

D+ = D

E+ = E

F+ = F

How to check an attribute is extraneous: An attribute **A** is extraneous in a dependency alpha(AB) -> beta(C) if

1) **A** belongs to beta(which is not in the current case) then create new FD `F' = (F-{alpha -> beta}) U {alpha -> (beta - alpha)}` and check if `alpha+ under F'(**not F**) includes A`, then `A` is extraneous in `beta`.

2) **A** belongs to alpha(which is correct), then create a new `gamma{B} = alpha({AB}) - {A}` and check if `gamma+(i.e B+)` under `**F** i.e ABCDEF` includes all attributes in `beta({C})` and which is true. So **A** is extraneous in `AB->C`.

similarly check if `C` is extraneous in `AB->C`. So by above suggested algo

1.  `F' : AB -> NULL; B →E; CF →D; C →A; B →F; CE →F; CD →B; B →C`
2.  Compute `AB+` under `F'` i.e `ABCDEF` which includes `C` . So `C`is extraneous in `AB-> C`.

How to compute canonical cover?

Algo:

1.  `F' = F`
2.  If there is any FD like `A->B and A->C` then replace by `A->BC`(by union rule) Here the F' become : `AB -> C; B-> CEF; C -> A; CD-> B; CE-> F; CF-> D`
3.  Find the extraneous(left/right) in F' i.e `A is extraneous in AB->C` so remove `A from AB->C` , so that it becomes `B->C` and update `F'`.
4.  Now check if the F' is changed as previous. If changed goto step 2 and repeat until find the F' no longer changes.

(Explaining further iterations as below: itr2: `F' : B -> C; B-> CEF; C -> A; CD-> B; CE-> F; CF-> D` `F' : B-> CEF; C -> A; CD-> B; CE-> F; CF-> D` Now check `C in B-> CEF`, which is not extraneous Check E , which is also not extraneous. check F ,which is extraneous. So new `F' : B-> CE; C -> A; CD-> B; CE-> F; CF-> D`

itr3: `F' : B-> CE; C -> A; CD-> B; CE-> F; CF-> D` after this there is no further extraneous attribute found.

So the canonical cover of F are :

`B-> CE`

`C -> A`

`CD-> B`

`CE-> F`

`CF-> D`

Let me know if have some error in logic suggested above.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T13:12:23.177

是的，规范封面与最小封面相同。并且所有的关闭都是正确的

以 3NF 为例..

1.  只需找到规范的封面
2.  建立每个单独的 fd 的关系。即.. 如果 Fc={AB->C,C->D} 然后制作 R1(ABC) & R2(CD)。
3.  现在检查候选键是否包含在任何一个关系中。如果是，那么它在 3NF 中，如果不是，则再添加一个仅包含该候选键的关系。它完成了..!!

# python - 我怎样才能使这个程序更有效率

> ID：10845988
> 
> 赞同：0
> 
> 时间：2012-06-01T07:14:14.663
> 
> 标签：python

该程序是python中的基本编码器，我想看看是否可以在不更改已定义变量名称的情况下使其更高效。有人可以给我一些建议吗？

```
def encode(pattern, filename): 
  f = open(filename, "rt")
  contents = f.read()
  f.close()
  printNow(contents)

  changes = pattern.split("|")
  for str in changes: 
    printNow("Change "+ str[0] + " to " + str[1])

  newMsg = ""
  for char in contents:
     for change in changes:
       if char == change [0]:
         char = change[1]
     newMsg += char 

  f = open(filename + "encoded", "wt")
  f.write(newMsg)
  f.close()

  f = open(filename + "encoded", "rt")
  printNow(f.read())
  f.close()

encode("ae|ga|s3", "C:\\Users\\Shaun\\Desktop\\Test.txt") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T07:19:09.127

```
import string

def encode(pattern, filename):
    with open(filename) as f:
        contents = f.read()
    s = string.maketrans(*[''.join(a) for a in zip(*pattern.split('|'))])
    newMsg = contents.translate(s)
    with open(filename + 'encoded', 'rt') as f:
        f.write(newMsg) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:17:48.940

使用[`str.translate()`](http://docs.python.org/library/stdtypes.html#str.translate)而不是艰难地进行所有替换，并逐行进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:43:25.953

str.translate() 方法适用于字符替换，但这是我使用的另一种快速方法，它也适用于多字符替换：

```
import re

def encode(pattern, filename): 
  f = open(filename, "rt")
  contents = f.read()
  f.close()
  printNow(contents)

  change_dict = {}
  matches = []
  changes = pattern.split("|")
  for str in changes: 
    printNow("Change "+ str[0] + " to " + str[1])
    change_dict[str[0]] = str[1]
    matches.append(str[0])

  change_re = re.compile("|".join(re.escape(x) for x in matches))

  newMsg = change_re.sub(lambda m: change_dict[m.group(0)], contents)

  f = open(filename + "encoded", "wt")
  f.write(newMsg)
  f.close()

  f = open(filename + "encoded", "rt")
  printNow(f.read())
  f.close()

encode("ae|ga|s3", "C:\\Users\\Shaun\\Desktop\\Test.txt") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T07:34:22.683

首先，您需要考虑您的算法已经足够好的选项。即使它可以被优化，如果你的代码是一个更大的程序的一部分并且它只在 0.1% 的时间内执行，那么优化代码很可能是无用的，因为程序的其余部分将主导总执行时间。

如果您的代码确实有问题，那么我将从分析您的算法的[复杂性开始。](http://en.wikipedia.org/wiki/Big_O_notation)

最后，您可以尝试在代码中找到一些瓶颈。为此，我会用 python 的[timeit](http://docs.python.org/library/timeit.html)之类的东西来分析代码。

# mysql - Excel转mysql？

> ID：10845993
> 
> 赞同：-3
> 
> 时间：2012-06-01T07:14:41.293
> 
> 标签：mysql, sql, excel

我在这里看到了很多关于如何将 sql 数据库导出到 excel 的问题，但是我有大量来自 excel 文件的信息，我想导出到 sql 数据库。该文件内容广泛，手动传输信息可能需要数年时间……数年！有没有更快更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:19:58.687

您实际上不需要编写代码来执行此操作。

**将 Excel 文件保存为 CSV 格式**，然后查看许多相关问题之一：

*   [如何将 CSV 文件导入 MySQL 表](https://stackoverflow.com/questions/3635166/how-to-import-csv-file-to-mysql-table)
*   [如何将数据从 CSV 导入 MySQL？](https://stackoverflow.com/questions/9555370/how-i-can-import-data-from-csv-to-mysql)
*   [将 CSV 文件直接导入 MySQL](https://stackoverflow.com/questions/4143938/import-csv-file-directly-into-mysql)

最友好的方法是使用 HeidiSQL 之类的图形工具将 excel 列与数据库中的列进行匹配。

![海蒂SQL](../Images/18622b11fda0a97fb361f7eb4f269140.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:19:21.330

您可以使用 apache poi 库逐行读取 excel 文件，使用 jdbc 创建与 mysql 数据库的连接并执行插入语句。

在我的项目中，我使用 jruby 和 jruby-poi gem 的 nurettin-jruby-poi fork 来读取 excel 文件和 activerecord 以将数据插入 mysql。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T07:21:55.357

1.  编写一个 .NET 程序（控制台更简单）
2.  访问 Excel 工作表/工作簿
3.  复制属性并为 Excel 中的工作表创建适当的表格
4.  现在将内容适当地复制到 SQL 表

由于它是自动化的，它会更快

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T07:23:50.630

正如 Colin Pickard 所说，您可以使用可以直接导入的 CSV 格式。

如果你使用 PHP，你可以在[这里](http://phpexcel.codeplex.com/)使用 PHPExcel 库来完成这项工作！
顺便说一句，你应该告诉我们你是否使用某种语言..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-30T12:12:24.473

创建 CSV 更好。如果我们使用 CSV 方法，我们可以导出任何字符集（unicode），然后我们创建一个 CSV 文件，只需使用 mySql 中可用的 LOAD 方法。load方法用于直接将数据导入mysql（使用sql查询）。LOAD local 允许您从本地计算机的任何位置导入数据

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T08:12:11.227

使用 Talend Open Studio 进行可视化设计，然后自动化任何类型的数据集成工作。

[http://www.talend.com/index.php](http://www.talend.com/index.php)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T16:00:17.790

我最喜欢的将 excel 表转换为 mysql 数据库的工具......完全公开，我是作者。

*   [http://excel2mysql.net](http://excel2mysql.net)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-01T07:53:18.367

您可以使用 GUI[数据导入](http://www.devart.com/dbforge/mysql/studio/data-export-import.html)工具，它支持从 *.XLS 和 *.XLSX (Excel 2007) 文件直接导入。

# postgresql - 我忘记了在 postgres 安装过程中输入的密码

> ID：10845998
> 
> 赞同：253
> 
> 时间：2012-06-01T07:14:49.780
> 
> 标签：postgresql, postgresql-9.1, forgot-password

我忘记或输入错误（在安装过程中）Postgres 默认用户的密码。我似乎无法运行它，并且出现以下错误：

```
psql: FATAL:  password authentication failed for user "hisham"
hisham-agil: hisham$ psql 
```

无论如何要重置密码或如何创建具有超级用户权限的新用户？

我是 Postgres 的新手，并且是第一次安装它。我正在尝试将它与 Rails 一起使用，并且正在运行 Mac OS X Lion。

* * *

## 回答 #1

> 赞同：413
> 
> 时间：2012-06-01T07:42:08.513

1.  查找文件`pg_hba.conf`- 它可能位于，例如`/etc/postgresql-9.1/pg_hba.conf`.

    `cd /etc/postgresql-9.1/`

2.  把它备份

    `cp pg_hba.conf pg_hba.conf-backup`

3.  放置以下行（作为第一个未注释的行，或作为唯一的行）：

> 对于以下所有出现（本地和主机），如果您没有任何复制部分，则必须按如下方式更改它，不应该存在 MD5 或对等身份验证。

```
local  all   all   trust 
```

4.  重启你的 PostgreSQL 服务器（例如，在 Linux 上：）

    `sudo /etc/init.d/postgresql restart`

    如果服务（守护程序）没有开始在日志文件中报告：

    > 此版本不支持本地连接

    你应该改变

    `local all all trust`

    至

    `host all all 127.0.0.1/32 trust`

5.  您现在可以以任何用户身份连接。以超级用户身份连接`postgres`（注意，*超级用户名在您的安装中可能不同。在某些系统中，它称为`pgsql`，例如。*）

    `psql -U postgres`

    或者

    `psql -h 127.0.0.1 -U postgres`

    （请注意，使用第一个命令，您不会总是与本地主机连接）

6.  重置密码（'replace my_user_name 为**postgres**，因为您正在重置**postgres**用户）

    `ALTER USER my_user_name with password 'my_secure_password';`

7.  恢复旧`pg_hba.conf`的，因为保留**很危险**

    `cp pg_hba.conf-backup pg_hba.conf`

8.  重启服务器，以便安全运行`pg_hba.conf`

    `sudo /etc/init.d/postgresql restart`

*关于该 pg_hba 文件的*进一步阅读：* [http ://www.postgresql.org/docs/9.1/static/auth-pg-hba-conf.html](http://www.postgresql.org/docs/9.1/static/auth-pg-hba-conf.html)*

 ** * *

## 回答 #2

> 赞同：120
> 
> 时间：2014-02-02T10:21:31.460

从命令行连接到 postgres 时，不要忘记添加`-h localhost`为命令行参数。如果没有，postgres 将尝试使用 PEER 身份验证模式进行连接。

下面显示了密码重置、使用 PEER 身份验证登录失败和使用 TCP 连接成功登录。

```
# sudo -u postgres psql
could not change directory to "/root"
psql (9.1.11)
Type "help" for help.

postgres=# \password
Enter new password:
Enter it again:
postgres=# \q 
```

失败：

```
# psql -U postgres -W
Password for user postgres:
psql: FATAL:  Peer authentication failed for user "postgres" 
```

与`-h localhost`：

```
# psql -U postgres -W  -h localhost
Password for user postgres:
psql (9.1.11)
SSL connection (cipher: DHE-RSA-AES256-SHA, bits: 256)
Type "help" for help.

postgres=# 
```

* * *

## 回答 #3

> 赞同：79
> 
> 时间：2014-09-19T22:26:11.643

自给出这些答案以来，`pg_hba.conf`( `C:\Program Files\PostgreSQL\9.3\data`) 文件已更改。在 Windows 中对我有用的是打开文件并将`METHOD`from更改`md5`为`trust`：

```
# TYPE  DATABASE        USER            ADDRESS                 METHOD

# IPv4 local connections:
host    all             all             127.0.0.1/32            trust
# IPv6 local connections:
host    all             all             ::1/128                 trust 
```

然后，使用 pgAdmin III，我使用无密码登录并`postgres'`通过转到更改用户密码`File -> Change Password`

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2018-03-12T12:58:26.843

请注意，在 Linux 上，您可以简单地运行`sudo su - postgres`成为 postgres 用户，然后使用 psql 更改所需的内容。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2017-08-17T02:55:49.950

1.  编辑文件`/etc/postgresql/<version>/main/pg_hba.conf`并找到以下行：

    ```
    local   all             postgres                                md5 
    ```

2.  编辑该行并`md5`在末尾更改为`trust`并保存文件

3.  重新加载**postgresql**服务

    ```
    $ sudo service postgresql reload 
    ```

4.  这将加载配置文件。现在您可以`postgres`通过登录到`psql`shell来修改用户

    ```
    $ psql -U postgres 
    ```

5.  更新`postgres`用户密码

    ```
    alter user postgres with password 'secure-passwd-here'; 
    ```

6.  编辑文件`/etc/postgresql/<version>/main/pg_hba.conf`并改`trust`回`md5`并保存文件

7.  重新加载**postgresql**服务

    ```
    $ sudo service postgresql reload 
    ```

8.  验证密码更改是否有效

    ```
    $ psql -U postgres -W 
    ```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2019-06-26T21:29:30.623

我只是在 Windows 10 上遇到了这个问题，而我的问题是我只是在运行`psql`，它默认尝试使用我的 Windows 用户名（“Nathan”）登录，但没有使用该名称的 PostgreSQL 用户，它并没有告诉我。

所以解决方案是运行`psql -U postgres`而不是仅仅运行`psql`，然后我在安装时输入的密码就起作用了。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2020-11-15T22:14:14.267

对于 WINDOWS：（对我有什么帮助）

这是我指的链接：[https ://qsartoolbox.org/content/documents/ResettingPostgreSQLPassword.pdf](https://qsartoolbox.org/content/documents/ResettingPostgreSQLPassword.pdf)

1.  打开你的 cmd 并转到`C:\Program Files\PostgreSQL\12\data` 这通常是正确的路径。您可能将其存储在其他地方。注意，如果你有不同的 postgresql 版本，会有不同的数字。那没关系。

2.  找到一个**pg_hba.conf**文件并将其复制到其他地方（这样您将拥有该文件的未修改版本，因此在我们进行一些更改后您将能够查看它）

3.  打开**pg_hba.conf**文件（不是备份，而是原始文件）

4.  在文件底部附近找到以 host 开头的多行：

    托管所有 127.0.0.1/32 md5

    托管所有::1/128 md5

    主机复制全部 127.0.0.1/32 md5

    主机复制全部 ::1/128 md5

5.  将**md5**替换为**trust**：

    托管所有所有 127.0.0.1/32 信任

    托管所有::1/128 信任

    主机复制所有 127.0.0.1/32 信任

    主机复制所有 ::1/128 信任

6.  关闭此文件

7.  转到 Windows 上的搜索栏并打开**服务**应用程序。找到 postgres 并重新启动它。 [服务应用程序的图片](https://i.stack.imgur.com/jByFn.png)

8.  在 cmd 中写入 cd..，然后在 cd bin 中写入。你的路径应该是`C:\Program Files\PostgreSQL\12\bin`

9.  进入：`psql -U postgres -h localhost`

10.  输入：`ALTER USER postgres with password '<your new password>';`**确保包含 ; 最后** 应显示“ALTER ROLE”以指示上一行已成功执行

11.  打开原始 pg_hba.conf 文件并从 trust 改回 md5

12.  像以前一样使用服务应用程序重新启动服务器

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2019-02-03T13:40:40.790

为 Windows 用户添加最新 postgres 版本 (>10) 的答案，

转到您的 postgres 安装位置，然后搜索`pg_hba.conf`，您将在`..\postgres\data\pg_hba.conf`

用记事本打开那个文件，找到这一行，

```
# TYPE  DATABASE        USER            ADDRESS                 METHOD

# IPv4 local connections: 
host    all             all             127.0.0.1/32            md5
# IPv6 local connections:
host    all             all             ::1/128                 md5
#.. 
```

将方法从 md5 更改为 trust，

```
# TYPE  DATABASE        USER            ADDRESS                 METHOD

# IPv4 local connections: 
host    all             all             127.0.0.1/32            trust
# IPv6 local connections:
host    all             all             ::1/128                 trust
# ... 
```

现在转到您的 SQL Shell(PSQL) 并将所有内容留空，

```
Server [localhost]:
Database [postgres]:
Port [8000]:
Username [postgres]: 
```

这次它不会要求输入密码，你会登录，

现在运行这一行， `ALTER USER yourusername WITH SUPERUSER`

现在您可以使用 \q 离开 shell

再次转到文件 pg_hba.conf 并再次将 METHOD 从 trust 更改为 md5，并保存它。

现在使用您的新用户和密码登录，您可以检查 \du 的属性。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-11-14T12:08:38.800

我为解决同样的问题所做的是：

从终端使用 gedit 编辑器打开 pg_hba.conf 文件：

```
sudo gedit /etc/postgresql/9.5/main/pg_hba.conf 
```

它会要求输入密码。输入您的管理员登录密码。这将使用该文件打开 gedit。粘贴以下行：

```
host  all   all  127.0.0.1/32  trust 
```

略低于 -

```
# Database administrative login by Unix domain socket 
```

保存并关闭它。关闭终端并再次打开它并运行以下命令：

```
psql -U postgres 
```

您现在将进入 psql 控制台。现在通过输入以下内容更改密码：

```
ALTER USER [your prefered user name] with password '[desired password]'; 
```

如果它说 user 不存在，那么而不是`ALTER`use `CREATE`。

最后，删除您在 pg_hba 中粘贴的特定行并保存。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-03-21T15:31:14.680

对于 Windows 安装，会创建一个 Windows 用户。而“psql”使用这个用户连接到端口。如果您更改 PostgreSQL 用户的密码，它不会更改 Windows 密码。仅当您有权访问命令行时，下面的命令行才有效。

相反，您可以使用 Windows GUI 应用程序“c:\Windows\system32\lusrmgr.exe”。此应用程序管理由 Windows 创建的用户。因此，您现在可以修改密码。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-06-07T16:36:11.320

如果你在 Windows 中，你可以运行

```
net user postgres postgres 
```

并使用 postgres/postgres 作为用户/密码登录 postgres

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-20T08:58:27.030

用户主目录中的 .pgpass 文件或 PGPASSFILE 引用的文件可以包含要在连接需要密码时使用的密码（否则未指定密码）。在 Microsoft Windows 上，该文件名为 %APPDATA%\postgresql\pgpass.conf（其中 %APPDATA% 指的是用户配置文件中的应用程序数据子目录）。

该文件应包含以下格式的行：

主机名：端口：数据库：用户名：密码

（您可以通过复制上面的行并在其前面加上 # 来向文件添加提醒注释。）前四个字段中的每一个都可以是文字值或 *，它可以匹配任何内容。将使用第一行中与当前连接参数匹配的密码字段。（因此，当您使用通配符时，首先放置更具体的条目。）如果条目需要包含 : 或 \，请使用 . 转义该字符。localhost 的主机名匹配来自本地计算机的 TCP（主机名 localhost）和 Unix 域套接字（pghost 为空或默认套接字目录）连接。在备用服务器中，复制的数据库名称与与主服务器建立的流复制连接相匹配。数据库字段的用处有限，因为用户对同一集群中的所有数据库具有相同的密码。

在 Unix 系统上， .pgpass 的权限必须禁止对世界或组的任何访问；通过命令 chmod 0600 ~/.pgpass 实现这一点。如果权限不那么严格，则该文件将被忽略。在 Microsoft Windows 上，假定文件存储在安全的目录中，因此不进行特殊权限检查。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-03-16T15:22:19.410

如果你在 mac os 上运行 postgresql，试试[这些](http://cli23.blogspot.com/2013/12/resetting-postgresql-postgres-user.html)：

1.  编辑 pg_hba.conf 文件

2.  sudo vi /Library/PostgreSQL/9.2/data/pg_hba.conf

3.  将所有用户的“md5”方法更改为文件底部附近的“信任”

4.  查找服务名称

5.  ls /库/LaunchDaemons

6.  寻找postgresql

7.  停止 postgresql 服务

8.  sudo launchctl stop com.edb.launchd.postgresql-9.2

9.  启动postgresql服务

10.  sudo launchctl start com.edb.launchd.postgresql-9.2

11.  以 postgres 启动 psql 会话

12.  psql -U postgres

13.  （由于“信任”设置，不应要求输入密码）

14.  通过键入在 psql 会话中重置密码

15.  使用密码“secure-new-password”更改用户 postgres；

16.  \q
17.  进入

18.  编辑 pg_hba.conf 文件

19.  将其切换回“md5”

20.  再次重启服务

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2021-02-26T10:47:58.690

将以下行添加到您的 pg_hba.conf 文件中。这将出现在 postgres 的安装目录中

```
hostnossl    all          all            0.0.0.0/0  trust 
```

它将开始工作。

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2018-11-21T08:23:58.500

这就是在 Windows 上对我有用的方法：

编辑位于 C:\Program Files\PostgreSQL\9.3\data 的 pg_hba.conf 文件。

`# IPv4 local connections: host all all 127.0.0.1/32 trust`

将方法从 trust 更改为 md5 并在 windows 上重新启动 postgres 服务。

之后，您可以使用 pgadmin 使用 postgres 用户登录，无需密码。您可以使用 File->Change password 更改密码。

如果 postgres 用户没有超级用户权限，那么您不能更改密码。在这种情况下，使用具有超级用户访问权限的另一个用户（pgsql）登录，并通过右键单击用户并选择属性-> 角色权限来为其他用户提供权限。*