# StackOverflow 问答 10100000-10100999

# css - 准备现有的 CSS 代码以用于 SCSS/Compass

> ID：10100002
> 
> 赞同：3
> 
> 时间：2012-04-11T04:54:12.737
> 
> 标签：css, compass-sass, sass

我是 SASS 和 Compass 的新手。我想知道在修改（大量）现有 CSS 模板时使用它们是否实用。如果是这样，我可以将任何标记应用于现有的 CSS 文件以使它们对 SASS/Compass 友好吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T05:09:54.540

您必须记住，可以在 .sass 文件中不加修改地使用有效的 css，这意味着您可以将现有样式转换为 sass 文件并按照自己的计划进行优化！

我建议先将重复的值转换为变量，而不是用 mixins 等替换重复的代码。

如果您正在对项目使用版本控制（我希望您这样做），我强烈建议您不要在单个事务中更改样式并重构它们的结构。理想情况下，任何繁重的重组（纯粹是在切片等方面或大规模重新格式化缩进）都将自行完成，并单独跟踪未来的变化。这将使您可以清楚地看到它们引入的各个更改和回归（如果有），从而实现更理智的工作流程。

在一个不相关的说明中 - 如果您使用 Visual Studio，无论好坏，我强烈建议您使用 WebWorkbench 插件，该插件在本地处理 sass->css 编译。

# scala - Akka future.await 超时时不返回

> ID：10100006
> 
> 赞同：1
> 
> 时间：2012-04-11T04:54:45.547
> 
> 标签：scala, akka, future

我是 Akka 的新手，在 Akka 1.2 中调用 Future.await 时遇到问题。我已经创建了一些带有 OnTimeout 和 OnException 处理程序的 Futures，然后我正在等待它们完成。代码看起来像这样：

```
val futures = ListBuffer.empty[Future[Any]]
val future = (peer ? bMsg) onResult {
      case result => result match {
          case msg:Ack => handleAck(msg)
          case msg:Nack => handleNack(msg)
        }
    } onTimeout {
      case _ => {
          // do something
      }
    } onException {
      case _ => {
          // do something
      }
    }
futures += future

futures.foreach(_.await(Duration(8000, "millis")))
log.info("Got here") 
```

当出现异常时，异常处理程序被执行，然后我进入“Got here”行。但是，当超时时，虽然超时处理程序被执行，但我永远不会到达“到达这里”行。即使设置了 AtMost 值，await 也不会返回。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:27:38.463

如果超时，await 会抛出异常，您是否已验证您在 futures.foreach 中没有收到异常？

# c - 嵌套循环比较数组中的整数

> ID：10100009
> 
> 赞同：1
> 
> 时间：2012-04-11T04:54:58.923
> 
> 标签：c, arrays, compare

这就是我所拥有的。它正在跳过零。我该如何解决？我正在尝试计算数字重复的次数。

```
void hit_rate(int a, int cmset[])
{
    int i, j, k=0;
    for(i=0;i<a;i++){
        for(j=i;j<a;j++){
            if((cmset[i] == cmset[j])){
                k++;
            }
        }
        printf("%d\n",k);
        k=0;
    }
}

cmset      k **now** prints  
  4          2       
  6          1        
  0          3       
  0          2       
  0          1       
  1          1       
  2          1       
  4          1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T05:02:20.213

应该`for(j=0;`**`j<a`**`;j++)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T05:11:20.837

在计算重复项时，例如`arr[5] = {1, 2, 2, 3, 3};` 从

```
i = 0; // first loop
j = i; //2nd loop 
```

comapre`arr[i] == arr[j]; //condition` 如果你用所有 i = 1..4 测试了 arr[0] 会发生什么；在下一次迭代中，您无需使用 arr[0] 检查 a[1]，因为它已经完成（或检查）。增加计数器（当重复匹配时）。一旦它结束阵列重置计数器的末尾。并打印出来。我希望它有所帮助。仍然感到困惑，那么我将为您提供示例代码。

# jquery - 使用 jQuery 制作一个简单的淡入淡出淡出 & 循环

> ID：10100013
> 
> 赞同：2
> 
> 时间：2012-04-11T04:55:09.320
> 
> 标签：jquery

我想用jQuery做一个简单的fadeIn fadeOut & loop。

第一次还行！但是当再次循环时，fadeIn #pic2 隐藏了。怎么解决？？

html

```
<div id="pics">
<img src="bg01.jpg" id="pic1" />
<img src="bg02.jpg" id="pic2" />
</div> 
```

css

```
#pics img{
position:absolute;
display: none;
} 
```

js

```
$(document).ready(function() {

    runslide();

    function runslide() {
    $('#pic1').fadeIn(1500).delay(3500).fadeOut(1500);
    $('#pic2').delay(5000).fadeIn(1500).delay(3500).fadeOut(1500);

    setTimeout(runslide, 10000);
    }

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T05:26:44.730

您的代码依赖于非常精确的动画时间，并且浏览器往往会不同步。您应该将 Javascript 修改为如下所示：

```
runslide();

function runslide() {
    $('#pic1').fadeIn(1500).delay(3500).fadeOut(1500, function() {
        $('#pic2').fadeIn(1500).delay(3500).fadeOut(1500, function() {
            runslide();
        });
    });
} 
```

这将通过在开始下一个动画之前等待上一个动画结束来保持动画同步。

这是一个工作示例。我用文本替换了您的图像，但除此之外它是相同的代码。 [http://jsfiddle.net/27uy8/](http://jsfiddle.net/27uy8/)

# c - ptrace 是在用户级别还是内核级别工作？

> ID：10100014
> 
> 赞同：2
> 
> 时间：2012-04-11T04:55:13.937
> 
> 标签：c, system-calls, strace, ptrace

我正在尝试使用 ptrace 实现数据流异常检测。经过一番研究，我实现了一个类似于 strace 的程序。现在，我对此感到困惑，这是 wiki 告诉我的关于系统调用的内容：

> “系统调用提供进程和操作系统之间的接口”

当我使用 ptrace 修改进程的内存时，我是在用户空间还是内核空间上工作？我真的很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T04:57:35.913

您正在一个单独进程的地址空间中操作；这需要内核的调解（和许可），因为独立的进程通常不能影响彼此的地址空间。

# pointers - 字符串比较执行缓慢

> ID：10100015
> 
> 赞同：0
> 
> 时间：2012-04-11T04:55:15.833
> 
> 标签：pointers, strcmp

我的问题为什么我的程序需要很长时间才能执行，该程序应该检查用户密码，使用的方法是将密码表单控制台放入数组并将其与以前保存的密码比较是由函数 str_cmp()-returns 完成的如果字符串相等则为零，如果不相等则非零

```
 #include<stdio.h>
  char str_cmp(char *,char *);
  int main(void)
  {
      int i=0;
      char c,cmp[10],org[10]="0123456789"; 
      printf("\nEnter your account password\ntype 0123456789\n");
      for(i=0;(c=getchar())!=EOF;i++)
      cmp[i]=c;
      if(!str_cmp(org,cmp))
      {
          printf("\nLogin Sucessful");  
      }
      else
          printf("\nIncorrect Password");
  return 0;
  }
  char str_cmp(char *porg,char *pcmp)
  {
    int i=0,l=0;
    for(i=0;*porg+i;i++) 
    {
        if(!(*porg+i==*pcmp+i))
        {
          l++;
        }        
    }
  return l;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T05:04:46.527

有一些图书馆可以更简单地做到这一点，但我认为这是一项任务，无论哪种方式，这都是一次很好的学习体验。我认为问题出在 str_cmp 函数中的 for 循环中。您使用的条件是“*porg+i”。这不是真的做比较。编译器要做的是直到表达式等于 0。一旦 i 大到 *porg+i 大于“int”可以存储的值并且它被重置为 0（这被称为溢出变量）。

相反，您应该将与字符串长度相对应的大小传递给 str_cmp 函数。在 for 循环条件中，您应该确保 i < str_size。

但是，有一个内置的 strncmp 函数 ( [http://www.elook.org/programming/c/strncmp.html](http://www.elook.org/programming/c/strncmp.html) ) 可以做到这一点。

你也有不同的问题。您正在像这样进行指针添加：

```
*porg+i 
```

这将获取数组的第一个元素的值并将 i 添加到它。相反，你想做：

```
*(porg+i) 
```

这将添加到指针，然后取消引用它以获取值。

* * *

通过比较更全面地澄清，因为这是指针的一个非常重要的概念。porg 被定义为 char*。这意味着您有一个具有“char”内存地址的变量。当您对变量使用取消引用运算符（例如 * `*porg`）时，它会返回存储在该内存中的值。但是，您可以向内存位置添加一个数字以移动到不同的内存位置。`porg + 1`将在 porg 之后返回内存位置。因此，当您执行此操作时，`*porg + 1`您将获取内存地址处的值并将其加 1。另一方面，当你这样做`*(porg + 1)`您将在 porg 指向的内存地址之后获得值。这对数组很有用，因为数组一个接一个地存储它们的值。但是，这样做更容易理解的符号是：`porg[1]`. 这表示“在数组开头之后获取值 1”，或者换句话说“获取数组的第二个元素”。

C 中的所有条件都在检查值是零还是非零。零表示假，其他所有值都表示真。当您将此表达式 ( `*porg + 1`) 用于条件时，它将进行计算（porg + 1 处的值）并检查它是否为零。

这让我想到了另一个非常重要的 C 编程概念。一个 int 只能容纳一定大小的值。如果将变量添加到大于最大值的位置，它将循环到 0。所以假设 int 的最大值是 256（实际上它要大得多）。如果您有一个值为 256 的 int 并将其加 1，它将变为 0 而不是 257。实际上，对于大多数编译器来说，最大数字是 65,536，所以这就是它需要这么长时间的原因。它一直等到 *porg + i 大于 65,536 以使其再次变为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:01:00.337

尝试包括 string.h：

```
#include <string.h> 
```

然后使用内置[`strcmp()`](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)函数。现有的字符串函数已经被编写为在大多数情况下尽可能快。

另外，我认为你的`for`陈述搞砸了：

```
for(i=0;*porg+i;i++) 
```

这将取消引用指针，然后添加`i`到它。我很惊讶 for 循环会退出。

如果您将其更改为此，它应该可以工作：

```
for(i=0;porg[i];i++) 
```

您的原始字符串也比您想象的要长。您分配了 10 个字节，但它实际上是 11 个字节长。字符串（用引号引起来）总是以空字符结尾。您需要为您的 char 数组声明 11 个字节。

另一个问题：

```
if(!(*porg+i==*pcmp+i)) 
```

应该改为

```
if(!(porg[i]==pcmp[i])) 
```

出于上述相同的原因。

# php - 从 PHP 到 MS Access 的插入语句出错

> ID：10100029
> 
> 赞同：0
> 
> 时间：2012-04-11T04:56:49.210
> 
> 标签：php, html, database, ms-access, insert

我已经使用用户帐户成功登录，现在我想插入记录。如下是插入记录没有成功的代码。

```
<?php
session_start();
echo "Welcome: ". $_SESSION['role'];
?>
<?php
error_reporting(0);
if (!$_POST['submit'])
{  
?
<html>
<body>
<br><br>
<fieldset >  
Add a new user 
<br>
<br>
<label for='username'>Username: &nbsp;</label>  
<input type='text' name='username' id='username'/>  
<label for='password'>Password:&nbsp;</label>  
<input type='password' name='password' id='password' maxlength="50" />  
<form action="<?=$_SERVER['PHP_SELF']?>" method="post">
Role: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>
<select name="role">
<option value="" selected="selected"></option>
<option VALUE="Administrator"> Administrator</option>
<option VALUE="Secretary"> Secretary</option> 
<option VALUE="Employee"> Employee</option>
</select>
<input type='submit' name='Submit' value='Submit' />  
</form>
</fieldset>  
<table width=100%>
</html>
</body>
<?php
}
else
{
$conn=odbc_connect("employee","","") or die (odbc_errormsg());
if (!$conn)  
{
exit
("Connection Failed: " . $conn);
}
$query = "INSERT INTO empTable (empID, password, Role, Days left in MC, Days left in   leave) VALUES" .
"('$_POST[username]', '$_POST[password]', '$_POST[role]', 14, 14)";
$result=odbc_exec($conn,$query) or die ("result error ".odbc_error().'-'.odbc_errormsg());
odbc_fetch_row($result);
odbc_close($conn);
} 
```

单击提交按钮后，当我刷新我的数据库时，什么也没有出现。为什么呢？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:04:17.333

Access 不喜欢带有空格的列名。你必须用`[ ]`.

像这样更改您的`INSERT`查询：

```
$query = "INSERT INTO empTable (empID, password, Role, [Days left in MC], [Days left in   leave]) VALUES ..." 
```

# air - 使用 GoDaddy 签署 Adob e AIR

> ID：10100031
> 
> 赞同：0
> 
> 时间：2012-04-11T04:57:00.077
> 
> 标签：air

[如果我用Godaddy](http://www.godaddy.com/ssl/code-signing-certificate.aspx?ci=13314)证书签署 Adob​​e Air ，它与 Adob​​e 推荐的列表有何不同（例如，[here](http://help.adobe.com/en_US/AIR/1.5/devappshtml/WS5b3ccc516d4fbf351e63e3d118666ade46-7ff0.html#WS5b3ccc516d4fbf351e63e3d118666ade46-7c6a)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:32:18.717

主要区别在于根证书中显示的颁发机构的名称。如果有人要检查您的证书，他们会看到“Go Daddy Class 2 Certification Authority Root Certificate”。我想这取决于您的用户对该名称的信任程度。安全偏执狂可能已经安装了根证书，低级用户可能甚至不知道存在这样的东西，但是没有听说过 GoDaddy 的中级“高级”用户可能会怀疑（或者至少比说例如威瑞信）。

从技术上讲，没有太大区别——它们都是标准的 X.509 证书。我通常发现，如果您可以获得 .PFX 格式的证书（嵌入了私钥），它可以跨平台运行良好。如果您只能获得另一种格式 (.cer)，则使用 Microsoft 管理控制台中的证书管理单元转换它是相当简单的。

# c# - 发送数组时从方法调用返回值时遇到问题，并且在参考排序运行时程序出错

> ID：10100034
> 
> 赞同：0
> 
> 时间：2012-04-11T04:57:26.537
> 
> 标签：c#, arrays, sorting, methods

运行此程序时，我得到以下输出：

```
Please enter the Social Security Number for taxpayer 0:  111111111
Please enter the gross income for taxpayer 0:  20000
Please enter the Social Security Number for taxpayer 1:  555555555
Please enter the gross income for taxpayer 1:  50000
Please enter the Social Security Number for taxpayer 2:  333333333
Please enter the gross income for taxpayer 2:  5464166
Please enter the Social Security Number for taxpayer 3:  222222222
Please enter the gross income for taxpayer 3:  645641
Please enter the Social Security Number for taxpayer 4:  444444444
Please enter the gross income for taxpayer 4:  29000
Taxpayer # 1 SSN: 111111111, Income is $20,000.00, Tax is $0.00
Taxpayer # 2 SSN: 555555555, Income is $50,000.00, Tax is $0.00
Taxpayer # 3 SSN: 333333333, Income is $5,464,166.00, Tax is $0.00
Taxpayer # 4 SSN: 222222222, Income is $645,641.00, Tax is $0.00
Taxpayer # 5 SSN: 444444444, Income is $29,000.00, Tax is $0.00 
```

> 未处理的异常：System.InvalidOperationException：无法比较数组中的两个元素。---> System.ArgumentException: 至少一个对象必须实现 IComparable。
> 在 System.Collections.Comparer.Compare(Object a, Object b)
> 在 System.Collections.Generic.ObjectComparer`1.Compare(T x, T y)
> 在 System.Collections.Generic.ArraySortHelper`1.SwapIfGreaterWithItems(T[]键，IComparer`1 比较器，Int32 a，Int32 b)
> 在 System.Collections.Generic.ArraySortHelper`1.QuickSort(T[] 键，Int32 左，Int32 右，IComparer`1 比较器)
> 在 System.Collections.Generic.ArraySortHelper `1.Sort(T[] keys, Int32 index, Int32 length, IComparer`1 比较器)
> --- 内部异常堆栈跟踪结束 ---
> 在 System.Collections.Generic.ArraySortHelper`1.Sort(T[] 键，Int32 索引，Int32 长度，IComparer`1 比较器)
> 在 System.Array.Sort[T](T[] 数组，Int32 索引，Int32 长度， IComparer`1 comparer) at System.Array.Sort[T](T[] array)
> at Assignment5.Taxpayer.Main(String[] args) in Program.cs:line 150

注意应该是税额的行尾的 0 吗？？？

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace taxes
{
    class Rates
    {
        // Create a class named rates that has the following data members: 
        private int incLimit;
        private double lowTaxRate;
        private double highTaxRate;

        // use read-only accessor
        public int IncomeLimit  
        { get { return incLimit; } }
        public double LowTaxRate 
        { get { return lowTaxRate; } }
        public double HighTaxRate 
        { get { return highTaxRate; } }

        //A class constructor that assigns default values 
        public Rates()
        {
            int limit = 30000;
            double lowRate = .15;
            double highRate = .28;
            incLimit = limit;
            lowTaxRate = lowRate;
            highTaxRate = highRate;
        }
        //A class constructor that takes three parameters to assign input values for limit, low rate and high rate.
        public Rates(int limit, double lowRate, double highRate)
        {
        }
        //  A CalculateTax method that takes an income parameter and computes the tax as follows:
        public int CalculateTax(int income)
        {
            int limit = 0;
            double lowRate = 0;
            double highRate = 0;
            int taxOwed = 0;
            //  If income is less than the limit then return the tax as income times low rate.
            if (income < limit)
                taxOwed = Convert.ToInt32(income * lowRate);
            //  If income is greater than or equal to the limit then return the tax as income times high rate.
            if (income >= limit)
                taxOwed = Convert.ToInt32(income * highRate);
            return taxOwed;
        }

    }  //end class Rates

        //  Create a class named Taxpayer that has the following data members:
        public class Taxpayer
        {
            //Use get and set accessors.
            string SSN
            { get; set; }
            int grossIncome 
            { get; set; }

            //  Use read-only accessor.
            public int taxOwed  
            {
                get { return taxOwed; }
            }

            //   The Taxpayer class should be set up so that its objects are comparable to each other based on tax owed.
            class taxpayer : IComparable
            {
                public int taxOwed { get; set; }
                public int income { get; set; }
                int IComparable.CompareTo(Object o)
                {
                    int returnVal;
                    taxpayer temp = (taxpayer)o;
                    if (this.taxOwed > temp.taxOwed)
                        returnVal = 1;
                    else
                        if (this.taxOwed < temp.taxOwed)
                            returnVal = -1;
                        else
                            returnVal = 0;
                    return returnVal;

                }  // End IComparable.CompareTo
            } //end taxpayer  IComparable class
                //  **The tax should be calculated whenever the income is set.
                //  The Taxpayer class should have a getRates class method that has the following.
                public static void GetRates()
                {
                    //  Local method data members for income limit, low rate and high rate.
                    int incLimit = 0;
                    double lowRate;
                    double highRate;
                    string userInput;
                    //  Prompt the user to enter a selection for either default settings or user input of settings.
                    Console.Write("Would you like the default values (D) or would you like to enter the values (E)?:  ");
                    /*   If the user selects default the default values you will instantiate a rates object using the default constructor
                    * and set the Taxpayer class data member for tax equal to the value returned from calling the rates object CalculateTax method.*/
                    userInput = Convert.ToString(Console.ReadLine());
                    if (userInput == "D" || userInput == "d")
                    {
                        Rates rates = new Rates();
                        rates.CalculateTax(incLimit);
                    } // end if
                    /*  If the user selects to enter the rates data then prompt the user to enter values for income limit, low rate and high rate, 
                     * instantiate a rates object using the three-argument constructor passing those three entries as the constructor arguments and 
                     * set the Taxpayer class data member for tax equal to the valuereturned from calling the rates object CalculateTax method. */
                    if (userInput == "E" || userInput == "e")
                    {
                        Console.Write("Please enter the income limit: ");
                        incLimit = Convert.ToInt32(Console.ReadLine());
                        Console.Write("Please enter the low rate: ");
                        lowRate = Convert.ToDouble(Console.ReadLine());
                        Console.Write("Please enter the high rate: ");
                        highRate = Convert.ToDouble(Console.ReadLine());
                        Rates rates = new Rates(incLimit, lowRate, highRate);
                        rates.CalculateTax(incLimit);
                    }  
                }  

            static void Main(string[] args)
            {

                Taxpayer[] taxArray = new Taxpayer[5];
                Rates taxRates = new Rates();
                //  Implement a for-loop that will prompt the user to enter the Social Security Number and gross income.
                for (int x = 0; x < taxArray.Length; ++x)
                {
                    taxArray[x] = new Taxpayer();
                    Console.Write("Please enter the Social Security Number for taxpayer {0}:  ", x + 1);
                    taxArray[x].SSN = Console.ReadLine();

                    Console.Write("Please enter the gross income for taxpayer {0}:  ", x + 1);
                    taxArray[x].grossIncome = Convert.ToInt32(Console.ReadLine());

                }

                Taxpayer.GetRates();

                //  Implement a for-loop that will display each object as formatted taxpayer SSN, income and calculated tax.
                for (int i = 0; i < taxArray.Length; ++i)
                {
                    Console.WriteLine("Taxpayer # {0} SSN: {1}, Income is {2:c}, Tax is {3:c}", i + 1, taxArray[i].SSN, taxArray[i].grossIncome, taxRates.CalculateTax(taxArray[i].grossIncome));

                } // end for
                //  Implement a for-loop that will sort the five objects in order by the amount of tax owed 
                Array.Sort(taxArray);
                Console.WriteLine("Sorted by tax owed");
                for (int i = 0; i < taxArray.Length; ++i)
                {
                    Console.WriteLine("Taxpayer # {0} SSN: {1}, Income is {2:c}, Tax is {3:c}", i + 1, taxArray[i].SSN, taxArray[i].grossIncome, taxRates.CalculateTax(taxArray[i].grossIncome));

                }
            }  //end main
        } //  end Taxpayer class

}  //end 
```

关于为什么美元金额为 0 以及为什么排序不起作用的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:24:45.273

*   你的第二个`Rates`构造函数什么都不做。

*   `Taxpayer.taxOwed`是无限递归的。

*   我认为没有必要调用`Convert.ToString`字符串：

    ```
    userInput = Convert.ToString(Console.ReadLine()); 
    ```

*   你永远不会使用调用的结果`Rates.CalculateTax`。

*   `GetRates`不`Rates`对它实例化的对象做任何事情；调用它似乎无济于事。

*   嵌套类`taxpayer`似乎没有用于任何事情。你在努力`Taxpayer` `IComparable`吗？您将`IComparable`在`Taxpayer`课堂上实施。你不应该定义一个单独的类。您可能还想实施`IComparable<Taxpayer>`。

*   You are using your program class for your data. You should probably split `Taxpayer` away from your program class. It should be a separate class like `Rates` is.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:35:03.590

```
Rates rates = new Rates(incLimit, lowRate, highRate);
                        rates.CalculateTax(incLimit); 
```

您正在将值传递给没有实现的构造函数

```
//A class constructor that takes three parameters to assign input values for limit, low rate and high rate.
        public Rates(int limit, double lowRate, double highRate)
        {
        } 
```

将值分配给此构造函数中的方法并尝试运行程序，尝试调试并告诉我们您面临的问题。

# android - 获取 MalformedURLException：找不到协议？

> ID：10100036
> 
> 赞同：0
> 
> 时间：2012-04-11T04:57:43.560
> 
> 标签：android

当我尝试从 URL 字符串加载图像时，我收到**MalformedURLException: Protocol not found 。**当我粘贴该 URL 时，该图像显示在浏览器中。但不在 ImageView 中显示。我用过这段代码：

```
 public static Bitmap getBitmapFromURL(String src) {

    try 
    {
        URL url = new URL(src);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setDoInput(true);
        connection.connect();
        InputStream input = connection.getInputStream();
        Bitmap myBitmap = BitmapFactory.decodeStream(input);

        return myBitmap;
        } 
        catch (IOException e) {
        e.printStackTrace();
        return null;
    }

    } 
```

请有人告诉我有什么问题吗？这对我很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T05:03:57.667

它是

```
http://74.208.68.90/webservice/images/image44.png 
```

你的代码没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T05:02:50.207

当您的网址出现问题时，会出现格式错误的异常

尝试使用 url 编码器在 url 中编码您的参数，并且找不到 protocall 显示您的 url 中缺少 http

```
String url = url +"/" + UrlEncoder.encode(param); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:12:41.607

我认为是“src”可能有问题，

# ios - 如何在没有导航控制器的情况下在导航栏中添加栏按钮。

> ID：10100038
> 
> 赞同：6
> 
> 时间：2012-04-11T04:57:45.173
> 
> 标签：ios, ipad, uinavigationbar

我是 iOS 开发的新手。我在 iPad 应用程序视图中创建了一个导航栏。我不需要导航控制器，这就是我只添加导航栏的原因。现在我想在该导航栏中添加按钮。我尝试了很多但没有成功。是否可以只添加带有按钮的导航栏？如果是，那么建议我一些示例代码。

“我没有导航控制器或不需要它。我只想在一个视图中添加导航栏。”

Bellow 是我为在 ViewDidLoad() 中添加导航栏而编写的代码

```
UINavigationBar *navBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 1026, 50)];
[navBar setTintColor:[UIColor blackColor]];
[navBar setDelegate:self];
[self.view addSubview:navBar]; 
```

提前致谢....

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T13:13:25.747

我使用 Interface Builder 在 UITableViewController 中制作了一个静态 tableView。此 UITableViewController 以模态方式显示。然后我添加了一个没有 UINavigationController 的 NavigationBar，如下所示：

```
//Creating the plain Navigation Bar
UINavigationBar *headerView = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];

//The UINavigationItem is neede as a "box" that holds the Buttons or other elements
UINavigationItem *buttonCarrier = [[UINavigationItem alloc]initWithTitle:@"Sign-In"];

//Creating some buttons:
UIBarButtonItem *barBackButton = [[UIBarButtonItem alloc] initWithTitle:@"Zurück" style:UIBarButtonItemStyleDone target:self action:@selector(signInBackPressed:)];
UIBarButtonItem *barDoneButton = [[UIBarButtonItem alloc] initWithTitle:@"Fertig" style:UIBarButtonItemStylePlain target:self action:@selector(signInDonePressed:)];

//Putting the Buttons on the Carrier
[buttonCarrier setLeftBarButtonItem:barBackButton];
[buttonCarrier setRightBarButtonItem:barDoneButton];

//The NavigationBar accepts those "Carrier" (UINavigationItem) inside an Array
NSArray *barItemArray = [[NSArray alloc]initWithObjects:buttonCarrier,nil];

// Attaching the Array to the NavigationBar
[headerView setItems:barItemArray];

// Adding the NavigationBar to the TableView 
[self.tableView setTableHeaderView:headerView]; 
```

我希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T06:24:37.027

```
UIBarButtonItem *bi1 = [[UIBarButtonItem alloc] initWithTitle:@"Edit" style:UIBarButtonItemStyleBordered target:self action:@selector(editButton)];

bi1.style = UIBarButtonItemStyleBordered;
bi1.tintColor = [UIColor colorWithWhite:0.305f alpha:0.0f];

self.navigationItem.rightBarButtonItem = bi1;

[bi1 release]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T05:10:41.057

您可以将按钮添加到导航栏，如下所示：

```
UIBarButtonItem *btnSave = [[UIBarButtonItem alloc] 
                                initWithTitle:@"Save"
                                style:UIBarButtonItemStyleBordered 
                                target:self 
                             action:@selector(save_Clicked:)];
 navBar.rightBarButtonItem = btnSave;
 [btnSave release];

 UIBarButtonItem *btnCancel = [[UIBarButtonItem alloc] 
                                initWithTitle:@"Cancel"                                    
                                style:UIBarButtonItemStyleBordered
                                target:self
                                action:@selector(cancel_Clicked:)];
 navBar.leftBarButtonItem = btnCancel;
 [btnCancel release]; 
```

# performance - Microsoft Access 相当于 MySQL 中的解释

> ID：10100049
> 
> 赞同：4
> 
> 时间：2012-04-11T04:58:57.993
> 
> 标签：performance, ms-access

我正在一个继承的应用程序中处理一个非常大的查询。这是一个大型插入查询，需要 4 个表，记录数超过 100 万条。我知道，我也希望在 SQL-server 中有这个，但是这个客户没有基础设施来做到这一点:-)

这个查询已经工作了一年多。然而，源表继续增长，上周它抛出了可怕的“系统资源不足”错误。无赖……！

我认为可以优化此查询。在 MySQL 中工作时，我会使用 explain-command 来查看可能发生优化的位置。Access 中是否有类似的功能？好像找不到啊。。。。

亲切的问候，

保罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T05:54:03.687

可能 Jet ShowPlan 最接近您想要的。您必须设置一个注册表项。然后查询计划信息被转储到一个名为 SHOWPLAN.OUT 的文本文件中。您可以在 TechRepublic 上阅读这篇文章中的详细信息：[使用 Microsoft Jet 的 ShowPlan 编写更高效的查询](http://www.techrepublic.com/article/use-microsoft-jets-showplan-to-write-more-efficient-queries/5064388)

还可以尝试性能分析器向导。您可以要求它单独检查您的查询，也可以要求它检查该查询使用的表或其他查询。

如果您最近没有压缩数据库，请查看这是否会提高性能。压缩还会更新索引统计信息，使引擎能够为查询计划做出更好的决策。

# fpga - 从 gpio 中断上下文中调用 XSpi_Transfer

> ID：10100050
> 
> 赞同：1
> 
> 时间：2012-04-11T04:59:10.937
> 
> 标签：fpga, xilinx

在 virtex 5 上的 microblaze 环境中：

我有一种情况，我需要执行 spi 事务 (XSpi_Transfer) 以从外部芯片 (mcp2515) 读取以响应中断。使用 XGpio 接口的 gpio 中断功能触发中断。

我遇到的问题是 XSpi_Transfer 在从中断上下文中调用时挂起。关于是否可以从中断中使用 XSpi 的任何提示？我认为问题在于 XSpi 的低级机制使用中断来执行低级 fifo 处理。

# jquery - 是否可以同时使用 mootools 和 jQuery

> ID：10100057
> 
> 赞同：3
> 
> 时间：2012-04-11T05:00:27.710
> 
> 标签：jquery, jquery-ui

我必须一起使用 mootools 和 jquery 文件。但是两者一起使用时会发生冲突。有什么办法可以避免这种冲突吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T05:04:28.387

是的，您必须在包含 jQuery 之后和包含 Mootools 之前包含此代码。

```
<script>
    var j$ = jQuery.noConflict();
</script> 
```

然后，您需要使用 查找/替换所有 jQuery`$`引用`j$`，最好使用大多数代码编辑器中的自动化工具。

* * *

您还有另一种选择，关闭。如果我没记错的话，它看起来像这样：

```
(function($) {
  //jQuery stuff
})(jQuery); 
```

您需要在此函数中移动所有现有代码。它限定了`$`变量的范围，因此您可以像往常一样在闭包中使用 jQuery，然后在它之外使用 Mootools。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T05:05:03.243

**它是**（可以同时使用两个库）。

从官方 jQuery 网站了解如何使其与其他库一起使用：http: [//docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

# node.js - node.js 按域计算带宽使用情况

> ID：10100060
> 
> 赞同：3
> 
> 时间：2012-04-11T05:00:59.863
> 
> 标签：node.js, limit, monitoring, bandwidth

如何使用 node.js 作为 Web 服务器监控每个域的带宽使用情况？

有谁知道我没有遇到过执行此操作的 API 调用？

或者其他人在您按带宽收费的多租户环境中使用的模块或其他方法？

**更新：**

有谁知道轻量级代理/服务器可以放在任何可以通过检查域来记录这些带宽统计信息的 Web 服务器（node.js、apache 等）前面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T01:08:34.213

在不修改 node.js 核心的情况下，最好的选择似乎是使用 bytesRead 和 bytesWritten 变量在套接字级别跟踪它。

这实际上比仅测量 http 请求/响应字符串的大小更准确，因为其他一些带宽跟踪器会计算传输的数据。

您有 2 个选项：1）记录每个请求的字节数或 2）记录 TCP 连接关闭时的字节数。

登录请求级别将提供可能有用的实时数据。但是，这可能会减慢速度，具体取决于您实现日志记录的方式。最好将其保存在内存中并每隔一段时间将其转储到磁盘/数据库中。

在请求级别记录：

```
var http = require('http');
var server = http.createServer(function (req, res) {
  // setup a counter for bytes already logged
  req.connection.bytesLogged = (req.connection.bytesLogged || 0);

  // output the bytes read by the socket
  console.log('Socket [' + req.connection.remoteAddress + '] [' + req.headers.host + '] - Bytes Read: ' + req.connection.bytesRead);

  // calculate the bytes of the request (includes headers and other tcp overhead - more realistic)
  req.bytes = req.connection.bytesRead - req.connection.bytesLogged;
  // output the bytes size of the request (note this is calculated after the TCP packets have been collected from the network and parsed by the HTTP parser
  console.log('Request [' + req.connection.remoteAddress + '] [' + req.headers.host + '] - Bytes: ' + req.bytes);

  // log the bytes to a memory array, DB or disk (implementation not shown)
  // [code here]

  // add the request bytes to the counter
  req.connection.bytesLogged = req.connection.bytesLogged + req.bytes;

  // normal http server processing like return document or file
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('ok');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.1.1:1337/'); 
```

在套接字级别记录：

```
var http = require('http');
var server = http.createServer(function (req, res) {

  // create some variables for data we want to log
  //
  // due to the way node.js works the remoteAddress and remotePort will not
  // be available in the connection close event
  // we also need to store the domain/host from the http header because the http
  // request also won't exist when the connection close event runs
  var remoteAddress = req.connection.remoteAddress;
  var remotePort = req.connection.remotePort;
  var host = req.headers.host;
  var connection = req.connection;

  // output bytes read by socket on each request
  console.log('HTTP Request [' + remoteAddress + ':' + remotePort + '] [' + host + '] - connection Bytes Read: ' + connection.bytesRead);

  // setup handle for connection close event
  //
  // to avoid the handle being added multiple times we add the handle onto
  // the connection object which will persist between http requests
  //
  // we store the handler so we can check whether it has already been added
  // to the connection listeners array - a less robust alternative would be to
  // add a flag like connection.closeHandleAdded = true
  connection.handle = connection.handle || {};
  if (!connection.handle.onconnectionClose) {
    connection.handle.onconnectionClose = function() {
      onconnectionClose(remoteAddress, remotePort, host, connection.bytesRead);
    }
  }

  // check whether the close handle has already been added to the connection
  // if not add it
  if(connection.listeners('close').indexOf(connection.handle.onconnectionClose) == -1)
  {
    // attach handler to connection close event
    connection.on('close', connection.handle.onconnectionClose);
    // set connection idle timeout to 5 secs for testing purposes (default is 2min)
    connection._idleTimeout = 5000;
  }

  // process http request as required
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('ok');

}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.1.1:1337/');

function onconnectionClose (remoteAddress, remotePort, host, bytesRead) {
   console.log('connection Closed [' + remoteAddress + ':' + remotePort + '] [' + host + '] - connection Bytes Read: ' + bytesRead);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:30:29.717

你应该看看[Http Trace](https://github.com/mranney/http_trace)。

它是一个 node.js 模块，用于捕获、解码和分析 HTTP 和 WebSocket 流量。它可以找到每个请求的大小和域，因此通过一些调整，您应该能够在这里完成您想要完成的事情。

它在我的带有节点 v0.6.15 的 Ubuntu 服务器上运行良好，我所要做的就是“apt-get install libpcap0.8-dev”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-11T05:31:36.390

尝试使用此模块来测量 HTTP 响应/请求：[https ://github.com/hex7c0/transfer-rate](https://github.com/hex7c0/transfer-rate)

数据通过套接字在客户端和服务器之间发送。每个 HTTP 响应/请求都有自己的套接字。模块在套接字中获取发送字节（**socket.bytesWritten**用于响应，**socket.bytesRead**用于请求）。发送数据的时间由命令（**process.hrtime(start)**）计算。然后，我们将结果除以得到实际的传输速率。

# ios - iOS OAuth 1.0 requestToken 用户授权：如何检测 UIWebView 何时完成授权？

> ID：10100069
> 
> 赞同：2
> 
> 时间：2012-04-11T05:01:49.643
> 
> 标签：ios, oauth, uiwebview

我正在通过 iPhone 应用程序上的 OAuth 1.0 流程工作。

我有请求令牌。我使用正确的 URL 选择 UIWebView 来执行 requestToken 的用户授权，该操作成功执行。但是，完成此步骤后，用户必须手动点击“返回”才能返回应用程序。然后用户点击一个单独的按钮来执行 getAccessToken。（这显然是正在进行的工作）。

执行 requestToken 的用户授权后如何自动返回？在 UIWebView 上，当用户成功登录时，他们会获得一个验证权限的页面，并且用户单击“确定”，我希望应用程序自动返回并在完成后继续获取 accessToken。

我是新手，所以可能解释得不太好。FWIW，我正在使用自鸣得意的 API。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:05:26.577

我不是 iOS 编码员，但一旦请求令牌被最终用户授权，服务提供商应该重定向到您的回调。必须有一种方法可以让您在 UIWebView 中“聆听”这一点。通过接收看起来像这样的重定向 HTTP 响应：

```
301 Moved Permanently
Location: URI?oauth_token=BLAHBLAH&oauth_verifier=BLAHBLAH 
```

如果您可以拦截该重定向，您可能会阻碍 UIWebView 实际完成它，而只是抓取 Location 标头。

或者，您至少应该能够在重定向完成并且您实际上在您的回调页面上时进行接听。那么这将是一个从不可见地址栏中抓取包含令牌和验证器的 URL 的简单案例。如果一切都失败了，您可以让您的回调实际在页面上打印令牌和秘密并刮掉它。

拥有验证者后，您应该能够在完全不涉及最终用户的情况下获得访问令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:01:03.883

我通过查找特定的 URL 解决了这个问题，然后在正确的 URL 完成加载时手动弹出 navigationController 堆栈。我的代码看起来像：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    NSRange range = [webView.request.URL.absoluteString rangeOfString:@"http://thecallbackurl.com/"];
    if (range.location != NSNotFound) {
        [self.navigationController popViewControllerAnimated:YES];
    }
} 
```

我正在写信给 smugmug.com API。令牌授权成功后，他们将浏览器重定向到回调 URL，这就是我想要的。

# c - 无法理解混淆的 C 代码

> ID：10100070
> 
> 赞同：3
> 
> 时间：2012-04-11T05:01:58.783
> 
> 标签：c, obfuscation

我在[http://www.cise.ufl.edu/~manuel/obfuscate/obfuscate.html](http://www.cise.ufl.edu/~manuel/obfuscate/obfuscate.html) (http://www.cise.ufl.edu/~manuel/obfuscate/savastio) 网站上看到了这段代码。但是这段代码非常非常疯狂。当它发生时，我无法理解正在发生的事情。请帮我。让我知道每行执行时发生了什么。例如`printf`函数在那里，如果我们将看到没有称为“ `Enter the number`”的语句。但仍然在执行时询问“ `Enter the number`”。它从哪里来。以及为什么代码是这样写的。它看起来像“ `n!`”（虽然它意味着阶乘）。请帮我。

```
#include <stdio.h>

#define l11l 0xFFFF
#define ll1 for
#define ll111 if
#define l1l1 unsigned
#define l111 struct
#define lll11 short
#define ll11l long
#define ll1ll putchar
#define l1l1l(l) l=malloc(sizeof(l111 llll1));l->lll1l=1-1;l->ll1l1=1-1;
#define l1ll1 *lllll++=l1ll%10000;l1ll/=10000;
#define l1lll ll111(!l1->lll1l){l1l1l(l1->lll1l);l1->lll1l->ll1l1=l1;}\
lllll=(l1=l1->lll1l)->lll;ll=1-1;
#define llll 1000

                                                     l111 llll1 {
                                                     l111 llll1 *
      lll1l,*ll1l1        ;l1l1                      lll11 lll [
      llll];};main      (){l111 llll1                *ll11,*l1l,*
      l1, *ll1l, *    malloc ( ) ; l1l1              ll11l l1ll ;
      ll11l l11,ll  ,l;l1l1 lll11 *lll1,*            lllll; ll1(l
      =1-1 ;l< 14; ll1ll("\t\"8)>l\"9!.)>vl"         [l]^'L'),++l
      );scanf("%d",&l);l1l1l(l1l) l1l1l(ll11         ) (l1=l1l)->
      lll[l1l->lll[1-1]     =1]=l11l;ll1(l11         =1+1;l11<=l;
      ++l11){l1=ll11;         lll1 = (ll1l=(         ll11=l1l))->
      lll; lllll =(            l1l=l1)->lll;         ll=(l1ll=1-1
      );ll1(;ll1l->             lll1l||l11l!=        *lll1;){l1ll
      +=l11**lll1++             ;l1ll1 ll111         (++ll>llll){
      l1lll lll1=(              ll1l =ll1l->         lll1l)->lll;
      }}ll1(;l1ll;              ){l1ll1 ll111        (++ll>=llll)
      { l1lll} } *              lllll=l11l;}
      ll1(l=(ll=1-              1);(l<llll)&&
      (l1->lll[ l]              !=l11l);++l);        ll1 (;l1;l1=
      l1->ll1l1,l=              llll){ll1(--l        ;l>=1-1;--l,
      ++ll)printf(              (ll)?((ll%19)        ?"%04d":(ll=
      19,"\n%04d")              ):"%4d",l1->         lll[l] ) ; }
                                                     ll1ll(10); } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T05:36:00.373

首先，您可以使代码正确缩进并消除由`#define`s 引起的间接性。缩进可以由[GNU`indent`](http://www.gnu.org/software/indent/)完成，`gcc -E`并将进行预处理。假设代码在`factorial.c`（这需要使用命令行）：

```
> gcc -E factorial.c | indent > clean_factorial.c 
```

需要注意的是预处理步骤会将所有内容转储`stdio.h`到`clean_factorial.c`; `#include<stdio.h>`但那是无关紧要的信息，所以我们应该在运行之前注释掉/删除`gcc -E`。这基本上给出了：

```
struct llll1
{
  struct llll1 *lll1l, *ll1l1;
  unsigned short lll[1000];
};
main ()
{
  struct llll1 *ll11, *l1l, *l1, *ll1l, *malloc ();
  unsigned long l1ll;
  long l11, ll, l;
  unsigned short *lll1, *lllll;
  for (l = 1 - 1; l < 14; putchar ("\t\"8)>l\"9!.)>vl"[l] ^ 'L'), ++l);
  scanf ("%d", &l);
  l1l = malloc (sizeof (struct llll1));
  l1l->lll1l = 1 - 1;
  l1l->ll1l1 = 1 - 1;
  ll11 = malloc (sizeof (struct llll1));
  ll11->lll1l = 1 - 1;
  ll11->ll1l1 = 1 - 1;
  (l1 = l1l)->lll[l1l->lll[1 - 1] = 1] = 0xFFFF;
  for (l11 = 1 + 1; l11 <= l; ++l11)
    {
      l1 = ll11;
      lll1 = (ll1l = (ll11 = l1l))->lll;
      lllll = (l1l = l1)->lll;
      ll = (l1ll = 1 - 1);
      for (; ll1l->lll1l || 0xFFFF != *lll1;)
        {
          l1ll += l11 ** lll1++;
          *lllll++ = l1ll % 10000;
          l1ll /= 10000;
          if (++ll > 1000)
            {
              if (!l1->lll1l)
                {
                  l1->lll1l = malloc (sizeof (struct llll1));
                  l1->lll1l->lll1l = 1 - 1;
                  l1->lll1l->ll1l1 = 1 - 1;;
                  l1->lll1l->ll1l1 = l1;
                }
              lllll = (l1 = l1->lll1l)->lll;
              ll = 1 - 1;
              lll1 = (ll1l = ll1l->lll1l)->lll;
            }
        }
      for (; l1ll;)
        {
          *lllll++ = l1ll % 10000;
          l1ll /= 10000;
          if (++ll >= 1000)
            {
              if (!l1->lll1l)
                {
                  l1->lll1l = malloc (sizeof (struct llll1));
                  l1->lll1l->lll1l = 1 - 1;
                  l1->lll1l->ll1l1 = 1 - 1;;
                  l1->lll1l->ll1l1 = l1;
                }
              lllll = (l1 = l1->lll1l)->lll;
              ll = 1 - 1;
            }
        }
      *lllll = 0xFFFF;
    }
  for (l = (ll = 1 - 1); (l < 1000) && (l1->lll[l] != 0xFFFF); ++l);
  for (; l1; l1 = l1->ll1l1, l = 1000)
    {
      for (--l; l >= 1 - 1; --l, ++ll)
        printf ((ll) ? ((ll % 19) ? "%04d" : (ll =
                                              19, "\n%04d")) : "%4d",
                l1->lll[l]);
    }
  putchar (10);
} 
```

这有点可读性，我们可以做一些事情，比如重命名变量，这样我们就可以很容易地把它们区分开来，即使我们还不知道它们做了什么。例如，这会将结构重命名为`structure`，并调用其中的指针`left`和`right`（您也可以使用编辑器中的查找替换工具来执行此操作）：

```
> sed -i 's/llll1/structure/g; s/lll1l/left/g; s/ll1l1/right/g;' clean_factorial.c 
```

（例如，您必须注意订单，否则替换`lll`可能与 冲突`lllll`）。

还有一些其他简单的事情可以做：

*   `1 - 1`经常发生：将其替换为`0`（以及`1 + 1`，除了将其替换为`2`而不是`0`）。
*   with 的`"\t\"8)>l\"9!.)>vl"[l] ^ 'L'`行在 xor 之后沿着字符串打印每个字符`'L'`（找出原因！这可能有助于将 放在`putchar`for 循环的主体中，而不是放在逗号语句中）。
*   `putchar(10)`只是打印一个新行。
*   了解[逗号运算符](https://en.wikipedia.org/wiki/Comma_operator)。

除此之外，这只是很多艰苦的工作。您可以并且应该使用调试器之类的工具来跟踪执行流程并找出发生的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T05:42:21.533

这是我打开它的尝试，有点卡在提示逻辑上，所以我只是初始化`longC`为零，并手动打印出对数字的请求：

```
#include <stdio.h>

struct StructName
{
    struct StructName *structA, *structB;

    unsigned short unsignedShortArrayA[1000];
};

main ()
{
    struct StructName *structC, *structD, *structE, *structF, *malloc();

    unsigned long unsignedLongA;

    long longA, longB, longC = 0;

    unsigned short *unsignedShortA, *unsignedShortB;

    //for(longC=0; longC< 14; putchar("\t\"8)>longC\"9!.)>vl" [longC]^'longC'),++longC )
    //;

    printf("%s", "Enter a number: " );

    scanf("%d", &longC);

    structD = malloc(sizeof(struct StructName));
    structD->structA=0;
    structD->structB=0;

    structC=malloc(sizeof(struct StructName));
    structC->structA=0;
    structC->structB=0;

    (structE=structD)->unsignedShortArrayA[structD->unsignedShortArrayA[0] =1] = 0xFFFF;

    for( longA=1+1;longA<=longC;++longA)
    {
        structE=structC;
        unsignedShortA = (structF=( structC=structD))->unsignedShortArrayA;
        unsignedShortB =( structD=structE)->unsignedShortArrayA;
        longB=(unsignedLongA=0);

        for( ; structF->structA || 0xFFFF != *unsignedShortA; )
        {
            unsignedLongA+=longA**unsignedShortA++;
            *unsignedShortB++=unsignedLongA%10000;
            unsignedLongA/=10000;

            if( ++longB>1000 )
            {
                if( !structE->structA )
                {
                    structE->structA=malloc(sizeof(struct StructName));
                    structE->structA->structA=0;
                    structE->structA->structB=0;

                    structE->structA->structB=structE;
                }

                unsignedShortB=(structE=structE->structA)->unsignedShortArrayA;
                longB=0;
                unsignedShortA=( structF =structF-> structA)->unsignedShortArrayA;
            }
        }

        for( ; unsignedLongA; )
        {
            *unsignedShortB++=unsignedLongA%10000;
            unsignedLongA/=10000;

            if( ++longB>=1000 )
            {
                if( !structE->structA )
                {
                    structE->structA=malloc(sizeof(struct StructName));
                    structE->structA->structA=0;
                    structE->structA->structB=0;

                    structE->structA->structB=structE;
                }

                unsignedShortB=(structE=structE->structA)->unsignedShortArrayA;
                longB=0;
            }
        }

        * unsignedShortB=0xFFFF;
    }

    for( longC=(longB=1- 1); (longC<1000) && (structE->unsignedShortArrayA[ longC] !=0xFFFF); ++longC )
    {
        ;
    }

    for( ; structE; structE=structE->structB, longC=1000 )
    {
        for( --longC; longC>=0; --longC, ++longB)
        {
            printf( (longB)?((longB%19) ? "%04d" : (longB=19,"\n%04d") ):"%4d",structE-> unsignedShortArrayA[longC] );
        }
    }

    putchar(10);
} 
```

**编辑：**清理了一下。

# perl - 我可以使用 nginx/FCGI 调用的 perl 脚本中的期望生成子进程吗

> ID：10100073
> 
> 赞同：0
> 
> 时间：2012-04-11T05:02:16.030
> 
> 标签：perl, nginx, expect, fastcgi

在 nginix/FCGI 调用的 perl 脚本中，如果我这样做`ssh user@ip <command>`，它可以工作，即 ti 连接到远程机器但是，如果我这样做，expect->spawn(ssh user@ip)，FCGI 在打开时返回错误（即代码非常通用，我不希望其中有错误）。如果我使用 expect 作为独立运行脚本，它可以工作。这让我相信 FCGI 可能不允许进程由期望产生。虽然我不确定。到目前为止，谷歌搜索没有帮助。任何输入表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:07:10.867

它失败的原因是因为 Expect.pm 试图复制 STDIN 而 FCGI.pm 不支持该操作，FCGI.pm 的下一个版本将有一个比： 更清晰的错误消息`Not a GLOB reference at /path/to/perl/lib/...`。

解决方案是在进行进程间通信时避免使用全局变量：STDIN、STDOUT、STDERR 和 %ENV。

```
my ($stdin, $stdout, $stderr, $env) =
  (IO::Handle->new, IO::Handle->new, IO::Handle->new, {});

my $r = FCGI::Request($stdin, $stdout, $stderr, $env)
  or die "Couldn't create FCGI request: '$!'";

while ($r->Accept >= 0) {
    my $exp = Expect->spawn('ssh', 'user@ip')
        or die "Cannot spawn command: $!\n";
    print $stdout "OK\n";
} 
```

# android - 如何在Android中将xml文件读取为文本

> ID：10100076
> 
> 赞同：1
> 
> 时间：2012-04-11T05:02:20.357
> 
> 标签：android, xml

首先，我在 res/xml 中有一个 xml 文件

```
 <?xml version="1.0" encoding="utf-8"?>
 <rootelement1>
 <subelement>
 Hello XML Sub-Element 1
 </subelement>
 <subelement>
  Hello XML Sub-Element 2
  <subsubelement>Sub Sub Element</subsubelement>
  </subelement>
 </rootelement1> 
```

我需要将此文件的所有内容读入字符串值（如将文本文件读到末尾并放入字符串）
我使用 XmlResourceParser 但它没有帮助。

```
 StringBuffer stringBuffer = new StringBuffer();
       Resources res = context.getResources();
       XmlResourceParser xpp = res.getXml(R.xml.myxmlfile);

       xpp.next();
       int eventType = xpp.getEventType();
       while (eventType != XmlPullParser.END_DOCUMENT)
       { 
           //add all text line by line, especially "<,>", attribute...
       } 
```

我该如何解决？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T05:51:09.963

当您必须将 XMLResourceParser 作为文本文件读取时，为什么还要使用它？为什么不简单地将 BufferedReader 与 StringBuilder 一起使用？但是，要从 xml 资源文件夹中读取文件，请先尝试将其移至原始文件夹，或者（如果可能的话）移至资产文件夹。

*编辑：* 要复制相应的文件，您可以使用此链接：[将 XML 从 XML 资源复制到设备存储](https://stackoverflow.com/questions/7388373/copying-xml-file-from-res-xml-folder-to-device-storage)

# css - 在物理文本上使用背景图像/纹理？

> ID：10100077
> 
> 赞同：2
> 
> 时间：2012-04-11T05:02:29.620
> 
> 标签：css, background, background-image

我已经看到它在 SVG 中完成：文本填充是图像而不是颜色；我一直想知道使用 CSS3 是否可以实现这样的事情。

我环顾了网络，到目前为止只找到了基本上将图像覆盖在文本上的解决方法（请参阅[this](http://www.jankoatwarpspeed.com/post/2008/08/09/Add-grunge-effect-to-text-using-simple-CSS.aspx)，这对我来说不是一个可行的选择）。除了实际上有文本的背景图像之外，是否可以有背景渐变？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T09:05:28.840

CSS3 添加了[background-clip](http://www.css3.info/preview/background-origin-and-background-clip/)属性。您实际上可以这样做，[`-webkit-background-clip: text`](http://www.webkit.org/blog/164/background-clip-text/)但该`text`值是专有的，目前**仅在基于 Webkit**的浏览器（Safari 和 Chrome）中实现。

```
h1 {
  font-size: 3em;
  background: url('someimage.png');
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
} 
```

一些使用的文章`-webkit-background-clip: text;`：

*   [渐变文字](http://css-tricks.com/snippets/css/gradient-text/)
*   [动画背景剪辑文本](http://trentwalton.com/2010/03/24/css3-background-clip-text/)
*   [-webkit-background-clip 和 @font-face 的乐趣](http://www.cssreset.com/2010/css-tutorials/fun-with-webkit-background-clip-and-font-face/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T05:10:00.887

如果我明白你在说什么，不。您只能将文本设置为纯色，即使是 CSS3 的神奇奇迹。

# jquery - 根据实时结果将固定数量的 div 元素附加到主 div 并将下一组元素附加到另一个

> ID：10100080
> 
> 赞同：0
> 
> 时间：2012-04-11T05:02:48.597
> 
> 标签：jquery, html, css

我正在为我的网页创建一个基于方面的搜索，并且我在前端部分使用 jquery。每次搜索都会返回不同的方面。内容因搜索词而异。内容的数量也不稳定。因此，例如，我的方面将看起来像这样。![刻面.jpg](../Images/e8f65298aeebbf88d10d570279377395.png)

一组包含在 div 元素中的单个术语。所以我看到的 div 的数量是 7，我想以这样的方式显示 div，即在一个页面中只显示 4 个 div，而在另一个页面中显示接下来的三个。所以我使用了名为 bxslider 的 jquery 插件。顺便说一句，我要把这组 7 个 div 分成两页吗？我使用的代码是

```
 noOfCol=Math.ceil(count4/8);
    noOfSlides=Math.ceil(noOfCol/4);
    //alert("Total number of slides " +noOfSlides);
    count4=0;
    var num=0;
    var num1=8;

    for(var count5=0;count5<noOfCol;++count5){
        var $newDiv = $('<div style="width:200px; height:160px; background-color:#000000; float:left; margin-left:10px; margin-top:10px; color:#ffffff;"></div>') ; 
        var $newDiv1 =$('<div style="float:left; width:900px; height:20px;"></div>') ;
        $("#test1").append($newDiv);

        for(count4=num; count4<num1; ++count4) {                        
            if(prsnArray[count4]==undefined) {
            } else {
                $newDiv.append('<input type="checkbox">&nbsp;&nbsp;&nbsp;&nbsp;' +prsnArray[count4].term + "&nbsp;&nbsp;(" + prsnArray[count4].count + ")" +'<br>');
            }
        }
        num=num+8
        num1=num1+8
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:30:02.367

[http://jsfiddle.net/bMmLE/](http://jsfiddle.net/bMmLE/)。查看 if-else 语句是如何在 for 循环中使用的。如果迭代“i”超过 4，则将内容放在不同的 div 中。

如果我正确理解您的问题，我认为这可以满足您的要求。希望它能为您指明一个好的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:13:47.810

我对你想要什么有点困惑，但我在这里创建了一个例子：http: [//jsfiddle.net/bMmLE/2/](http://jsfiddle.net/bMmLE/2/)

它使滑块的 div 自动从一组最大数字开始，并将其相加。

```
count = 15; //random count
countPrDiv = 6; ///number of elements pr div
$parent = $('#sliderDiv'); //parent to add the divs too

for(var i = 0; count > i++;){
    if(i === 1) {
        $('<div></div>').appendTo($parent).addClass('max'+countPrDiv);
    } else if (i === countPrDiv) {
        countPrDiv = countPrDiv  + countPrDiv ;
        $('<div></div>').appendTo($parent).addClass('max'+countPrDiv);
    }

    $('.max'+countPrDiv).append('<p>'+i+'</p>');
}

$('#sliderDiv').bxSlider(); 
```

# linux - 与 I/O 地址端口相比，设备 mmap 是如何工作的？

> ID：10100082
> 
> 赞同：1
> 
> 时间：2012-04-11T05:03:00.217
> 
> 标签：linux, memory-management, assembly, linux-kernel, kernel

我想知道与通过 I/O 端口读取/写入设备相比，Linux 是否看到了与外围设备内存的 mmap 之间的差异。根据我在汇编课上学到的知识，我们几乎以与内存寻址相同的方式看待 I/O 端口寻址。所以我想我想知道我是否要写入我的设备所连接的端口的 I/O，这与映射到该设备的内存是一样的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:21:03.720

I/O 端口不是内存。一些硬件（例如图形卡）通过内存总线连接，而不仅仅是通过 I/O 端口总线。

对于具有内存接口的硬件（即，被视为 CPU 的内存范围），您可以使用`mmap`.

X11 服务器`Xorg`经常映射图形卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:24:15.817

我认为OP混淆了三件事：

*   mmap() 是应用程序对页寄存器和/或 MMU 执行某些操作的一种方式。

*   内存映射 I/O 是一个硬件架构概念：不是为 I/O 提供单独的总线和操作，而是地址空间的某些区域专用于 I/O 操作。（68K 处理器系列使用内存映射 I/O，以及 IBM 的 AIX，IIRC）。

*   DMA 意味着不仅 CPU，而且 I/O 设备都可以读取和写入（部分）*物理*内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:06:13.720

`vm_area_struct`包含`vm_flags`字段。在特殊映射的情况下，它包含`VM_PFNMAP`或`VM_IO`标志。请参阅 LXR 中的 struct [vm_area_struct](http://lxr.linux.no/linux+v3.3.1/include/linux/mm_types.h#L194)、[VM_PFNMAP](http://lxr.linux.no/linux+v3.3.1/include/linux/mm.h#L90)和[VM_IO](http://lxr.linux.no/linux+v3.3.1/include/linux/mm.h#L95)定义。

# c# - 在 C# 中是否有一个简单的函数可以将 DateTime 向下舍入到最接近的 30 分钟？

> ID：10100088
> 
> 赞同：9
> 
> 时间：2012-04-11T05:03:57.643
> 
> 标签：c#, datetime

例如：

2011-08-11 16:59 变为 2011-08-11 16:30

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-11T05:23:05.857

```
DateTime RoundDown(DateTime dt, TimeSpan d)
{
    return new DateTime((dt.Ticks / d.Ticks) * d.Ticks);
} 
```

*例子：*

```
var dt1 = RoundDown(DateTime.Parse("2011-08-11 16:59"), TimeSpan.FromMinutes(30));
// dt1 == {11/08/2011 16:30:00}

var dt2 = RoundDown(DateTime.Parse("2011-08-11 17:00"), TimeSpan.FromMinutes(30));
// dt2 == {11/08/2011 17:00:00}

var dt3 = RoundDown(DateTime.Parse("2011-08-11 17:01"), TimeSpan.FromMinutes(30));
// dt3 == {11/08/2011 17:00:00} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-11T05:08:40.920

我会说这样的话

```
var time = DateTime.Now;
var rounded = time.AddMinutes(
        time.Minute>30 ? -(time.Minute-30) : -time.Minute) 
```

你甚至可以做你自己的扩展

```
public static class TimeHelper {
   public static DateTime RoundDown (this DateTime time)
   {
       return time.AddMinutes(
         time.Minute>30 ? -(time.Minute-30) : -time.Minute);
   }
} 
```

**编辑**

如有必要，此功能还可切割秒/毫秒。感谢您的提示。

```
public static DateTime RoundDown(this DateTime time)
{
    return time.Subtract(
        new TimeSpan(0, 0, time.Minute > 30 ? (time.Minute - 30) : time.Minute, 
            time.Second, time.Millisecond));
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-18T15:07:27.860

一个更通用的解决方案四舍五入到最近的时间跨度：

```
 public static DateTime RoundUp(this DateTime dt, TimeSpan d)
{
    var delta = (d.Ticks - (dt.Ticks % d.Ticks)) % d.Ticks;
    return new DateTime(dt.Ticks + delta);
}

public static DateTime RoundDown(this DateTime dt, TimeSpan d)
{
    var delta = dt.Ticks % d.Ticks;
    return new DateTime(dt.Ticks - delta);
}

public static DateTime RoundToNearest(this DateTime dt, TimeSpan d)
{
    var delta = dt.Ticks % d.Ticks;
    bool roundUp = delta > d.Ticks / 2;

    return roundUp ? dt.RoundUp(d) : dt.RoundDown(d);
}
```

它将以这种方式使用：

```
var date = new DateTime(2010, 02, 05, 10, 35, 25, 450); // 2010/02/05 10:35:25
var rounded = date.RoundToNearest(TimeSpan.FromMinutes(30)); // 2010/02/05 10:30:00
```

更多在[此回应](https://stackoverflow.com/a/20046261/469218)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-11T05:09:10.063

```
DateTime newDateTime = new DateTime(oldDateTime.Year, oldDateTime.Month, oldDateTime.Day
  ,oldDateTime.Hour, (oldDateTime.Minute / 30) * 30, 0); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T06:04:43.403

利用一些数学

```
var input = DateTime.Now; // or however you get DateTime
var rounded = input.AddMinutes(-input.TimeOfDay.TotalMinutes % 30d); 
```

请注意，它的属性是 a `TimeOfDay`，并且模运算符对双精度数的作用如下：`TimeSpan``TotalMinutes``double`

> 47.51 % 30 天 == 17.51
> 
> 16.2 % 30 天 == 16.2
> 
> 768.7 % 30 天 == 18.7

您可以将 30d 更改为您喜欢的任何值，而不是零。例如，更改为 15 轮到 15 分钟间隔。从 30d 更改为 -30d，并没有改变我运行的测试的结果。

您可以创建一个舍入扩展方法（为所有 DateTime 值提供此舍入方法）：

```
public static class DateTimeExtensions
{
    public static DateTime Round(this DateTime self, double minutesInInterval)
    {
        if (minutesInInterval == 0d) throw new ArgumentOutOfRangeException("minutesInInterval");
        return self.AddMinutes(-self.TimeOfDay.TotalMinutes % minutesInInterval);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T05:10:34.817

没有这样的功能可用

您可以参考：[如何将时间四舍五入到最接近的 X 分钟？](https://stackoverflow.com/questions/7029353/c-sharp-round-up-time-to-nearest-x-minutes)

如果需要，您可以自己创建一个

```
DateTime RoundUp(DateTime dt, TimeSpan d)
{
   return new DateTime(((dt.Ticks - d.Ticks + 1) / d.Ticks) * d.Ticks + d.Ticks);
} 
```

例如：

```
var dt1 = RoundUp(DateTime.Parse("2011-08-11 16:59"), TimeSpan.FromMinutes(30));
// dt1 == {11/08/2011 16:30:00} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-01T20:50:35.997

以下是我的处理方式。以下是四舍五入到最近 30 分钟的基本方法和重载：

```
public static DateTime RoundMinutes(this DateTime value)
{
    return RoundMinutes(value, 30);
}

public static DateTime RoundMinutes(this DateTime value, int roundMinutes)
{
    DateTime result = new DateTime(value.Ticks);

    int minutes = value.Minute;
    int hour = value.Hour;
    int minuteMod = minutes % roundMinutes;

    if (minuteMod <= (roundMinutes / 2))
    {
        result = result.AddMinutes(-minuteMod);
    }
    else
    {
        result = result.AddMinutes(roundMinutes - minuteMod);
    }

    return result;
} 
```

# android - 如何在 Android 上唯一标识用户？

> ID：10100104
> 
> 赞同：1
> 
> 时间：2012-04-11T05:06:04.087
> 
> 标签：android, google-play

我的应用对**订阅**使用许可和**应用内计费**。我能够使用

 **```
 AccountManager manager = AccountManager.get(context); 
    Account[] accounts = manager.getAccountsByType("com.google"); 
```

但这得到了许多帐户。目前我只使用第一个。我不知道哪个是用来购买/下载应用程序的。我自己有多达 3 个 Google 帐户（GMail 是一个愚蠢的旧 Google 迫使您注册以激活您的手机、我的真实 Google 帐户和我的工作帐户）。

我真的不需要电子邮件地址，只是某种方式来确认一个用户是相同的，即使他们在不同的设备上。如果他们从不同的设备访问该应用程序，那没关系。

该应用程序在后台访问服务器，因此将发送用户ID进行记录。

类似的问题都没有答案，或者更确切地说，答案是“不可能”。

有一个菜单项让用户选择帐户是最合适的解决方案吗？或者最好将所有用户 ID 保存在服务器上，如果用户匹配一个，让他们进入？许可证服务器 API 不提供某种唯一的用户哈希吗？（我找不到，但对我来说有点模糊。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:15:58.033

因此，我将重复其他人所说的话：如果您担心的唯一原因是出于许可目的识别用户，请立即停止，因为许可库不需要您阅读电子邮件地址才能使其工作. Play 应用程序将成为您的中间人。

您购买的应用程序可以在其他设备上正常使用。

其他问题回答“不可能”是有原因的。

编辑：但是，如果您担心“非托管”产品而不仅仅是出于许可目的（您没有说清楚，只是现在我才看到），那么您可以将信息与给定的用户帐户配对。您应该使用客户经理并要求用户选择他/她认为合适的帐户。千万不要随意为用户选择账号。像其他应用一样做。用户更了解自己的个人信息。请安全地进行。

我的合理意见。**

# mysql - mysql中的自然连接和左连接

> ID：10100106
> 
> 赞同：0
> 
> 时间：2012-04-11T05:06:21.343
> 
> 标签：mysql, left-join, natural-join

我有以下表格

1.  问题 -> id、question_data、user_id
2.  用户 -> id、fname、lname
3.  question_connect-> id、question_id、user_id

我最初的查询如下

```
select questions.id, questions.question_data, users.id, users.fname from questions, users where questions.user_id = users.id limit 30 
```

但是在这里，我想统计该问题的用户数，所以我尝试了以下查询

```
select questions.id, questions.question_data, users.id, users.fname, count(questions_connect.id) from questions, users LEFT JOIN questions_connect ON `questions`.`id` = `questions_connect`.`question_id` where questions.user_id = users.id group by `questions_connect`.`id` limit 30 
```

这显示错误

```
Unknown column 'questions.id' in 'on clause' 
```

所以我们可以用自然加入和左加入打1个电话，如果是的话，我哪里出错了..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:21:42.240

使用显式连接应该可以解决您的问题：

```
select questions.id, questions.question_data, users.id, users.fname, count(questions_connect.id)
from questions
join users on questions.user_id = users.id
left join questions_connect on `questions`.`id` = `questions_connect`.`question_id`
group by `questions_connect`.`id`
limit 30 
```

您最好明确指定所有连接，尝试忘记存在隐式连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:14:22.193

我相信您不需要在联接上加上引号

```
ON questions.id = questions_connect.question_id 
```

# actionscript-3 - 如何响应在视图堆栈中选择的 NavigatorContent

> ID：10100109
> 
> 赞同：2
> 
> 时间：2012-04-11T05:06:44.507
> 
> 标签：actionscript-3, apache-flex, flex-spark

我在这样的应用程序中有视图堆栈：

```
<mx:ViewStack id="viewStack" left="0" right="0" top="0" bottom="0">
    <views:LoginView top="0" bottom="0" right="0" left="0" id="loginView"/>
    <views:MainHomeView top="0" bottom="0" right="0" left="0" id="childSelectionView"/>
    <views:MainHomeView top="0" bottom="0" right="0" left="0" id="mainEvalView"/>
</mx:ViewStack> 
```

当一个事件被触发时，我打电话`viewStack.selectedChild = childSelectionView`

我的问题是如何为被选中的 NavigatorConent 编写一个监听器？

这是我尝试做的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<s:NavigatorContent xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:local="*" xmlns:mx="library://ns.adobe.com/flex/mx" 
    creationComplete="init()">

    <fx:Script>
        <![CDATA[
        private function init():void
        {
            // Do something here
            advanceButton.visablitiy = false;
        }
    ]]>
</fx:Script>
<s:VGroup>

    <s:HGroup>
        <s:Button label="Advance" id="advanceButton" />
    </s:HGroup>
</s:VGroup> 
```

我知道所有 NavigatorConent 在应用程序启动时调度了一个 creationComplete 事件，但它们的子级尚未创建。我是如何响应 on selectedChild 更改为 self 的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:31:11.953

有时花一点时间是值得的，从字面上看，你之前的问题正好在同一个问题域中。使用 FlexEvent.CONTENT_CREATION_COMPLETE 事件。

请参阅[Flex 错误 #1009：无法访问空对象引用的属性或方法](https://stackoverflow.com/questions/10098642/flex-error-1009-cannot-access-a-property-or-method-of-a-null-object-reference)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:04:31.293

```
<fx:Script><![CDATA[
    import mx.controls.Alert;
    import mx.events.IndexChangedEvent;

    protected function viewStack_childIndexChangeHandler(event:IndexChangedEvent):void {
        Alert.show('Selected Child: ' + viewStack.selectedChild.label);
    }

    ]]></fx:Script>

<s:layout>
    <s:VerticalLayout/>
</s:layout>

<s:ButtonBar dataProvider="{viewStack}"/>
<mx:ViewStack id="viewStack" change="viewStack_childIndexChangeHandler(event)">
    <s:NavigatorContent id="navigator1" label="Navigator 1">
        <s:Group>
            <s:Button label="N1"/>
        </s:Group>
    </s:NavigatorContent>
    <s:NavigatorContent id="navigator2" label="Navigator 2">
        <s:Group>
            <s:Button label="N2"/>
        </s:Group>
    </s:NavigatorContent>
</mx:ViewStack> 
```

# ios - 如何从 JSON 输出数据中解码路径点？

> ID：10100110
> 
> 赞同：2
> 
> 时间：2012-04-11T05:06:53.583
> 
> 标签：ios, xcode, json, google-maps, mkmapview

我是该`ios`领域的新手，现在我正在尝试实现`MKMapView`基于 iPhone 的应用程序。从 Google Map Web 网络服务中，我以`JSON`输出格式获取数据。

```
- (void)update {

    self.responseData=[NSMutableData data];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://maps.googleapis.com/maps/api/directions/json?origin=Ernakulam&destination=Kanyakumari&mode=driving&sensor=false"]];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];    
}
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
    [self.responseData setLength:0];
}
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
    [self.responseData appendData:data];
}
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{
    [connection release];
    self.responseData =nil;
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection{
    NSLog(@"connection established");
    [connection release];
    NSString *responseString=[[NSString alloc]initWithData:self.responseData encoding:NSUTF8StringEncoding];
    self.responseData=nil;
    NSLog(@" OUTPUT JSON DATA^^^^^^^^^^^^^^^^%@",responseString);

} 
```

我得到了`JSON`格式中的输出。现在我想在这两个位置之间绘制路线。播种如何从`JSON`输出数据中分离所有纬度和经度点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:12:08.847

查看此代码。我正在使用 JSONkit 进行解析

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection{
    NSLog(@"connection established");
    [connection release];
    NSString *responseString=[[NSString alloc]initWithData:responseData encoding:NSUTF8StringEncoding];
    NSMutableDictionary *data1 = [responseData objectFromJSONData];
    NSMutableArray *ad = [data1 objectForKey:@"routes"];
    NSMutableArray *data2 = [[ad objectAtIndex:0] objectForKey:@"legs"];
    NSMutableArray *data3 = [[data2 objectAtIndex:0] objectForKey:@"steps"];
//    NSLog(@"Data3 %@", data3);
    for(int i = 0; i<data3.count;i++){
        NSLog(@"Start %@", [[data3 objectAtIndex:i] objectForKey:@"start_location"]);
        NSLog(@"End %@", [[data3 objectAtIndex:i] objectForKey:@"end_location"]);

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:10:58.847

我正在使用 SBJson 来解析 json 数据。通常，调用`[responseString JSONValue]`以获取解析的数据。您可以谷歌它以获取详细参考。

# java - Java ImageIO - JPEG 黑色变为灰色

> ID：10100111
> 
> 赞同：0
> 
> 时间：2012-04-11T05:06:57.483
> 
> 标签：java, javax.imageio

我正在使用以下代码加载灰度 JPG 图像，并从中查询单个像素的值：

```
Raster data;
data = ImageIO.read (file).getData();
int [] buf = new int[1];
data.getPixel(0, 0, buf); 
```

我用于测试目的的图像是这个：

![测试梯度.jpg](../Images/e95b425aaae0b2c02caecc8d3951880a.png)

当我在 Photoshop 中打开此图像并从左上角像素提取颜色信息时，它告诉我它是纯黑色 (RGB 0,0,0)。据我所见，图像没有附加颜色配置文件，因此它应该由 ImageIO 以相同方式加载。但是，上面代码的结果是 buf[0] 包含 1。由于我的预期应用程序对这种变化很敏感（我正在处理地图高程数据，其中 0 表示海平面或更低）我想知道是否

1.  我可以依靠它总是发生，并且可以依靠 RGB 1,1,1 也不会被解码为值 1（测试这个，我得到“3”），或者
2.  有什么方法可以防止这种变化？

阻止更改显然是可取的——如果黑色显示为 1，并且测试了白色并看到它显示为 250，这一定意味着中间的一些值将被压缩，因此多个源值出现相同的输出值，所以我显然在这里丢失了信息。理想情况下，我希望避免信息丢失（并且，是的，我知道在将地图数据转换为 JPG 时信息丢失了，但这是原始数据提供者提供给我的方式，所以它是我不可能恢复这些数据......不过，我想避免丢失更多数据）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T06:30:07.330

可能发生的情况是 JPEG 没有嵌入的色彩空间，并且 Photoshop 的默认色彩空间与 Java 的默认不同，导致像素值略有不同。例如，Java 可能使用 sRGB，而 Photoshop 可能使用 Adob​​eRGB。您应该确认您在 Photoshop 和 Java 中使用相同的色彩空间。

编辑：

我用 Photoshop 检查了您在帖子中包含的图像，发现了以下有趣的信息：

1.  颜色空间“未校准”`<exif:ColorSpace>65535</exif:ColorSpace>`
2.  图像是 CMYK TIFF 文件，每个像素有 4 个样本，而不是 3

左上角 (0,0,0) 和右下角 (255,255,255) 的任何内容都是对原始数据应用一些转换函数，在这个文件中绝对不是纯黑色和纯白色。

这是整个 XMP 原始数据集：

```
<?xpacket begin="" id="W5M0MpCehiHzreSzNTczkc9d"?>
<x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.0-c060 61.134777, 2010/02/12-17:32:00        ">
   <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
      <rdf:Description rdf:about=""
            xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/">
         <xmpMM:DocumentID>45A47BED0B7E76061DB20B529F19C17E</xmpMM:DocumentID>
         <xmpMM:InstanceID>45A47BED0B7E76061DB20B529F19C17E</xmpMM:InstanceID>
      </rdf:Description>
      <rdf:Description rdf:about=""
            xmlns:dc="http://purl.org/dc/elements/1.1/">
         <dc:format>image/jpeg</dc:format>
      </rdf:Description>
      <rdf:Description rdf:about=""
            xmlns:photoshop="http://ns.adobe.com/photoshop/1.0/">
         <photoshop:ColorMode>1</photoshop:ColorMode>
      </rdf:Description>
      <rdf:Description rdf:about=""
            xmlns:tiff="http://ns.adobe.com/tiff/1.0/">
         <tiff:ImageWidth>16</tiff:ImageWidth>
         <tiff:ImageLength>16</tiff:ImageLength>
         <tiff:BitsPerSample>
            <rdf:Seq>
               <rdf:li>8</rdf:li>
               <rdf:li>8</rdf:li>
               <rdf:li>8</rdf:li>
               <rdf:li>8</rdf:li>
            </rdf:Seq>
         </tiff:BitsPerSample>
         <tiff:PhotometricInterpretation>1</tiff:PhotometricInterpretation>
         <tiff:SamplesPerPixel>4</tiff:SamplesPerPixel>
         <tiff:XResolution>72/1</tiff:XResolution>
         <tiff:YResolution>72/1</tiff:YResolution>
         <tiff:ResolutionUnit>2</tiff:ResolutionUnit>
      </rdf:Description>
      <rdf:Description rdf:about=""
            xmlns:exif="http://ns.adobe.com/exif/1.0/">
         <exif:ExifVersion>0221</exif:ExifVersion>
         <exif:ColorSpace>65535</exif:ColorSpace>
         <exif:PixelXDimension>16</exif:PixelXDimension>
         <exif:PixelYDimension>16</exif:PixelYDimension>
      </rdf:Description>
      <rdf:Description rdf:about=""
            xmlns:xmp="http://ns.adobe.com/xap/1.0/">
         <xmp:CreateDate>2012-04-11T12:26:47-07:00</xmp:CreateDate>
         <xmp:ModifyDate>2012-04-11T12:26:48-07:00</xmp:ModifyDate>
         <xmp:MetadataDate>2012-04-11T12:26:48-07:00</xmp:MetadataDate>
      </rdf:Description>
   </rdf:RDF>
</x:xmpmeta> 
```

# java - 收到错误未知主机：www.google.com

> ID：10100116
> 
> 赞同：1
> 
> 时间：2012-04-11T05:07:46.770
> 
> 标签：java, html-parsing, htmlunit

我想解析网页，我使用 htmlunit ，当我运行代码时，我得到以下错误。

```
import java.net.URL;
import java.util.List;

import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlImage;
import com.gargoylesoftware.htmlunit.html.HtmlPage;

public class scrapImage {

      public static void main(String[] args) throws Exception      { 
          URL url = new URL("http://www.google.com");
          //WebClient webClient = new WebClient(Opera);     
          WebClient webClient = new WebClient();    
          HtmlPage currentPage = (HtmlPage) webClient.getPage(url);    
          //get list of all divs      
          final List<?> images = currentPage.getByXPath("//img");      
          for (Object imageObject : images) {           
              HtmlImage image = (HtmlImage) imageObject;            
              System.out.println(image.getSrcAttribute());       
              }         //webClient.closeAllWindows();           } } 
          }
      } 
```

***错误信息：***

```
Exception in thread "main" java.net.UnknownHostException: www.google.com
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:196)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:377)
    at java.net.Socket.connect(Socket.java:530)
    at java.net.Socket.connect(Socket.java:480)
    at java.net.Socket.<init>(Socket.java:377)
    at java.net.Socket.<init>(Socket.java:251)
    at org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:80)
    at org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:122)
    at org.apache.commons.httpclient.HttpConnection.open(HttpConnection.java:707)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.open(MultiThreadedHttpConnectionManager.java:1361)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:387)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:346)
    at com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:97)
    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1430)
    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponse(WebClient.java:1388)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:325)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:386)
    at htmlunit.scrapImage.main(scrapImage.java:16) 
```

谁能让我知道上述异常的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:17:50.107

我认为您的网络连接或防火墙的问题可能会阻止 java 程序访问互联网。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:20:37.307

我认为你在代理或防火墙后面。检查您当前系统中的防火墙状态。另外，如果它与代理有关，您可以像这样修改代码。

```
System.getProperties().put( "proxySet", "true" );
System.getProperties().put( "proxyHost", "your proxy host name" );
System.getProperties().put( "proxyPort", "85" ); 
```

可能这会对你有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T05:23:04.123

似乎 Internet 连接有问题，或者您使用了代理，

如果是这种情况，请设置代理设置（主机/端口/用户名/密码）。

# sql-server - 在事务表中复制主表映射

> ID：10100117
> 
> 赞同：0
> 
> 时间：2012-04-11T05:07:47.040
> 
> 标签：sql-server, database, oracle, database-design

我有三个用于位置信息的主表

1.  国家 {ID, 名称}
2.  状态 {ID, Name, CountryID}
3.  城市 {ID, Name, StateID}

现在我有一个名为 Person 的事务表，其中包含人名和他的位置信息。

我的问题是我应该在 Person 表中只有 CityID，如下所示：

> 人 {ID, 姓名, CityID}'

并查看连接查询，该查询为我提供详细信息，例如“Person{ID,Name,City,State,Country}”

或者我应该复制映射吗

> 人 {ID, 姓名, CityID, StateID, CountryID}

请提出您认为应该选择哪一个，为什么？如果有任何其他可用的选项，请提出建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:25:12.407

我只是使用一个参考表，这将使您在未来拥有更多的可扩展性：

```
Person {ID, Name}
PersonLocation {PersonID, CityID} 
```

只需注意您在 PERSON 表上使用的主键，这样您就可以将一条记录与另一条记录区分开来

# c++ - 将所有对象信号连接到单个插槽

> ID：10100119
> 
> 赞同：0
> 
> 时间：2012-04-11T05:08:16.600
> 
> 标签：c++, qt, signals-slots

环顾四周，人们似乎也有类似的问题，但有来自不同来源的多个信号等。我的情况是，我有一个对象可以发出信号，表明它是否成功、失败或被取消。这些信号被传递给另一个类并且没有连接到一个插槽，只是一个信号。现在我想解决这个问题，无论对象发送什么信号（失败、成功、取消），都会调用一个槽来删除对象。简而言之，我想要一种将对象的每个信号连接到插槽的方法。

想做这样的事情：

```
connect(myObject, allSignals, this, handleObjectDone());

void handleObjectDone() {
    myObject->deleteLater();
} 
```

有没有办法做到这一点？或者我应该每次它做某事时只传递两个信号，例如`emit readyToBeDeleted()`和`emit succeded()`？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T05:14:01.047

抛开关于将一个对象中的所有信号连接到另一个对象中的单个插槽是否实际上是明智之举的任何疑虑，下面是一个可以做到这一点的函数，以及一个单元测试来验证它是否有效。

如果您在运行此程序时观看 stdout，您将看到它打印出它正在建立的所有连接。当它运行时，点击 QLineEdit 将导致 QLineEdit 发出一个信号，这将（当然）导致 QApplication::quit() 槽被调用，因此应用程序将退出。

```
#include <stdio.h>
#include <QApplication>
#include <QLineEdit>
#include <QMetaMethod>
#include <QMetaObject>

void ConnectAllSignalsToSlot(QObject * sourceObject, QObject * targetObject, const char * slotName)
{
   const QMetaObject * mo = sourceObject->metaObject();
   if (mo)
   {
      int numMethods = mo->methodCount();
      int firstMethod = mo->methodOffset();  // set to 0 instead if you want to connect signals from superclasses too
      for (int i=firstMethod; i<numMethods; i++)
      {
         QMetaMethod mm = mo->method(i);
         if (mm.methodType() == QMetaMethod::Signal)
         {
            QString signalString = QString("2") + mm.signature();
            printf("Connecting up signal [%s] on object %p to slot [%s] on object %p\n", signalString.toUtf8().constData(), sourceObject, slotName, targetObject);  // just so we can see what it's doing
            QObject::connect(sourceObject, signalString.toUtf8().constData(), targetObject, slotName);
         }
      }
   }
   else printf("Error, sourceObject has no QMetaObject????\n");
}

int main(int argc, char ** argv)
{
   QApplication app(argc, argv);

   QWidget * testSource = new QLineEdit;
   testSource->show();

   ConnectAllSignalsToSlot(testSource, &app, SLOT(quit()));

   return app.exec();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:22:57.903

您可以将任意数量的信号连接到任意数量的插槽（以及其他信号）。为此，将信号连接到两个插槽是非常有意义的。插槽按照它们连接的顺序被调用。连续发射两个信号也是完全合理的。当然 readyToBeDeleted() 应该在 succeeded() 之后发出，以便在发出结果信号之前不会删除对象。

除非我误会你，否则就这么简单。

# asp.net - 数据绑定时gridview中按钮的可见错误？在 Asp.net 中？

> ID：10100120
> 
> 赞同：1
> 
> 时间：2012-04-11T05:08:27.173
> 
> 标签：asp.net

在 Web 应用程序中，我将在绑定数据时禁用按钮，是否有可能像这样显示错误？

```
 <asp:Button ID ="btn" runat ="server"  CommandArgument='<%# Eval("id").ToString() == "1"? visble false: Visible true %>' /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:28:57.697

Either do that in the data bound event or do it like this...

```
<asp:Button ID ="btn" runat ="server" Visible='<%# Eval("id").ToString() == "1"? "false" : "true" %>' /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T05:19:46.563

在 DataGrid RowDataBound 事件中执行此操作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T06:09:42.197

尝试这个：

```
 <asp:Button ID="Button1" runat="server" Text="Button" Visible='<%#getVisibility()%>' OnClick="btn_Click" /> 
```

代码背后：

```
public Boolean getVisibility()
{
   Boolean b = false;
   //get the boolean value based on your field condition
   b = Convert.ToBoolean(Eval("FieldValue").ToString() != "MatchCondition" ? "true" :     "false");
   return b;
} 
```

# php - 使用 PHP 存储图像

> ID：10100121
> 
> 赞同：0
> 
> 时间：2012-04-11T05:08:28.343
> 
> 标签：php, mysql

我想让用户上传图片。该文件被重新命名（通过将 time() 添加到当前名称），然后移动到我的 Images/ 文件夹。然后我在我的 html/php 代码中引用上传到数据库表中的名称。图像不会出现，因为表中的名称与实际文件名不同。如果两个用户上传了同名文件，则需要更改图像名称。如何将 time() 名称更改应用于表中的文件名和实际文件名，以便显示图像。这是我的代码：

```
if (!empty($_FILES['picture'])) 
    {
    $pic= $_FILES['picture']['name'];
    $target= GW_UPLOADPATH . time() . $pic;
        if (move_uploaded_file($_FILES['picture']['tmp_name'], $target))
            {
            $query= "INSERT INTO posts (user_id, story, picture) VALUES     
('$user_id', '$story', '$pic')";
            mysqli_query($connect, $query);
            header( 'Location: profile.php' );
            }
    } 
```

表中图片名称为ball.jpg，实际文件可能为18292018ball.jpg。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:19:25.053

注意：如果您添加`time()`为前缀，那么两个图像将永远不会相同

当您更改文件名时，为什么不将该新名称存储在数据库中

```
$changed_name = time().$pic;

$query= "INSERT INTO posts (user_id, story, picture) VALUES     
($user_id, '".$story."', '".$changed_name ."')"; 
```

### 更改文件名的提示

*   首先取出扩展名和名称
*   通过单个空格删除多个空格
*   然后用`_`
*   转换图像名称的大小写（我更喜欢小写）
*   然后添加带有图像名称的 time()
*   最后添加该扩展名并存储到图像文件夹中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:11:23.773

尝试这个

```
$query= "INSERT INTO posts (user_id, story, picture)
         VALUES ('$user_id', '$story', '$target')"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T05:12:28.470

您不应该在 MySql 查询中使用 '$target' 而不是 '$pic' 吗？

```
$query= "INSERT INTO posts (user_id, story, picture) VALUES ('$user_id', '$story', '$target')"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T05:20:05.163

如果所有路径都相同（例如图像/文件夹），您可以使用：

```
if (!empty($_FILES['picture'])) {
    $pic= time() . $_FILES['picture']['name'];
    $target= GW_UPLOADPATH . $pic;

        if (move_uploaded_file($_FILES['picture']['tmp_name'], $target)) {
            $query= "INSERT INTO posts (user_id, story, picture) VALUES ('$user_id', '$story', '$pic')";
            mysqli_query($connect, $query);
            header( 'Location: profile.php' );
        }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T05:21:24.203

尝试这个：

```
if (!empty($_FILES['picture'])) 
{
$pic= $_FILES['picture']['name'];
$picname = time() . $pic;
$target= GW_UPLOADPATH . $picname;
    if (move_uploaded_file($_FILES['picture']['tmp_name'], $target))
        {
        $query= "INSERT INTO posts (user_id, story, picture) VALUES('$user_id', '$story', '$picname')";
        mysqli_query($connect, $query);
        header( 'Location: profile.php' );
        }
} 
```

$picname 将包含时间+图片名称。如果多个用户同时上传，则相同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T05:47:28.933

用这个 ：

```
$query= "INSERT INTO posts (user_id, story, picture) VALUES ('$user_id', '$story', '$target')"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-11T05:13:54.647

不需要每次都存储上传路径，除非它在不同的时间点可能不同。

```
$name = time() . $pic;
$target= GW_UPLOADPATH .$name;

$query= "INSERT INTO posts (user_id, story, picture) VALUES
('$user_id', '$story', '$name')"; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-11T05:15:01.367

为了完全确定没有任何欺骗：

1.  服务器获取图像（用户以某种方式上传图像）
2.  服务器为图像生成唯一 ID
3.  服务器使用该 ID 写入数据库（在唯一字段上）
    *   成功后将文件移动到磁盘上的正确位置
    *   在第二步失败重新启动时生成不同的 ID

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-11T05:15:15.020

您在数据库中存储的文件名与您保存的文件名不同。如果您只想使用文件名，请将文件名存储在变量中，然后再将其附加到路径中，即，而不是

```
$target= GW_UPLOADPATH . time() . $pic; 
```

做

```
$fileName = time() . $pic;
$target = GW_UPLOADPATH . $fileName; 
```

并在 SQL 查询中使用 $fileName 代替 $pic：

```
 $query= "INSERT INTO posts (user_id, story, picture) VALUES ('$user_id', '$story', '$fileName')"; 
```

# activemq - 在 ActiveMQ 代理中设置消息的超时时间？

> ID：10100122
> 
> 赞同：6
> 
> 时间：2012-04-11T05:08:36.673
> 
> 标签：activemq, broker

我想为确认设置超时期限，即如果代理在一段时间内没有收到来自消费者的特定消息的确认，那么代理应该将消息重新发送给消费者。是否可以在代理中设置这样的设置？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-27T14:22:51.690

这里有几个链接解释了如何使用 ActiveMQ 5.9 解决这个问题：

*   [https://issues.apache.org/jira/browse/AMQ-3394](https://issues.apache.org/jira/browse/AMQ-3394)
*   [https://planet.jboss.org/post/coming_in_activemq_5_9_a_new_way_to_abort_slow_consumers](https://planet.jboss.org/post/coming_in_activemq_5_9_a_new_way_to_abort_slow_consumers)

总结一下：

*   如果消费者 JVM 死了，代理和消费者之间的 JMS 连接将超时，并且任何未确认的消息都将被重新调度以进行传递
*   如果 JMS 连接没有死，但是消费者在处理消息时卡住了，[`AbortSlowAckConsumerStrategy`](http://activemq.apache.org/maven/5.9.0/apidocs/org/apache/activemq/broker/region/policy/AbortSlowAckConsumerStrategy.html)当他们达到配置的慢速阈值时将中止慢消费者，默认是 30 秒没有确认消息的消费者是慢的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:13:12.770

见[http://activemq.2283324.n4.nabble.com/Acknowledgement-Timeout-td4531016.html](http://activemq.2283324.n4.nabble.com/Acknowledgement-Timeout-td4531016.html)

> 重新投递政策不支持这一点。jms 是面向连接的，所以假设如果连接是活动的并且没有确认，那么消费者有充分的理由不确认。

# javascript - 将javascript函数的参数传递给java代码

> ID：10100126
> 
> 赞同：0
> 
> 时间：2012-04-11T05:08:56.523
> 
> 标签：javascript, dojo, slider

我正在使用 dojo 滑块创建一个 GUI。在滑块旁边有一个文本框，用于显示滑块的当前值。

我想要的是每次滑动滑块时，滑块的当前值都会出现在文本框上。接下来，该值将用于进一步计算，结果将显示在另一个文本框中。

我一直在做的是：在 dojo 滑块内，我调用了一个 javascript 函数，该函数传递滑块的当前值。

在javascript函数内部，我想将函数的参数传递给函数内部的java代码。java代码将使用该参数进行计算。

我的问题是我无法将参数传递给 java 代码。我的问题是我该怎么做？

下面是我写的代码：

```
<head>
<script type="text/javascript">
dojo.require("dijit.form.Slider");
dojo.require("dijit.form.TextBox");

dojo.ready(function(){
var slider = new dijit.form.HorizontalSlider({
 name: "slider",
 value: dojo.byId("walluvalueinit").value,  
 minimum: 0,     
 maximum: 1,    
 discreteValues:11, 
 intermediateChanges: true,
 style: "width:300px;",
 onChange: function(value){
   dojo.byId("walluvalue").value = value;
   changewalluvalue(value);  //CALLING FUNCTION changewalluvalue()
 }
}, "slider");
});

</script>
</head>

<body class="claro">
<jsp:useBean id="beanAnalysis" class="bean.Analysis" scope="application"/>

<script>
function changewalluvalue(value){
<%
ExteriorUnheatedGroundLossCalculation eug = new ExteriorUnheatedGroundLossCalculation();

    //MORE CALCULATIONS
    //SET U VALUES PROPERTY IN ExteriorUnheatedGroundLossCalculation
    eug.setWallUValue(value); //THE ARGUMENT "value" SHOULD BE PASSED HERE

====more java code=====
%>
}
</script>

<form id="form1" name="form1" method="post" action="">
<tr>
  <td width="150">Wall U Value</td>
  <td width="411" align="center" valign="middle"><div id="slider"></div></td>
  <td width="154" align="center" valign="middle"><label for="walluvalueinit"></label>
      <input type="text" name="walluvalueinit" id="walluvalueinit" value="${beanAnalysis.wallUValue}"/></td>
  <td width="152" align="center" valign="middle"><label for="walluvalue"></label>
      <input type="text" name="walluvalue" id="walluvalue" /></td>
</tr>

<td colspan="2" align="center">Transmission Loss</td>
  <td align="center" valign="middle"><label for="transmissionlossinit"></label>
      <input type="text" name="transmissionlossinit" id="transmissionlossinit" value="${beanAnalysis.transmissionLoss}"/></td>
  <td align="center" valign="middle"><label for="transmissionloss"></label>
      <%--CALCULATION RESULT WILL BE DISPLAYED HERE--%>
      <input type="text" name="transmissionloss" id="transmissionloss" /></td> 
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:43:17.113

您的计算代码应该是一个常规的 servlet，专门设计用于执行您需要的逻辑/计算。JSP 页面最适合提供 HTML 和/或直接可呈现的内容。

请记住，一旦页面被提供，页面上的任何 javascript 都会在客户端/浏览器上执行。您不再可以直接访问 Java 结构。您必须使用 AJAX 与服务器进行通信。让您调用的 servlet 返回一个包含计算结果的 JSON 对象。

在客户端，使用 dojo.xhr（Get 或 Post 版本）并将 handleAs 属性设置为“json”。例如：

```
dojo.xhrGet({
  // URL to servlet that will do computation for us on the server
  url: url_to_calc_servlet,

  // Tell Dojo to handle return value as a JSON string, so dojo will
  // auto-convert it into an Object.
  handleAs: 'json',

  // Specify request parameters to servlet as an object of
  // name/value pairs.
  content: {
sliderValue: XXX
  },

  // Define callback function for dojo to call when servlet returns
  load: function(response) {
    // response will be the object your servlet returned
    // ... access response data and update page accordingly...
  }
}); 
```

查看 Dojo 文档以获取有关 dojo.xhr 的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:41:11.823

您可能需要使用 AJAX 将值传递给 Java 代码。我猜 Dojo 有一些实用程序。您还需要检测 Java 代码以处理请求并执行实际逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T05:42:03.833

它不起作用，因为 JSP 中的客户端 JavaScript 不能调用服务器端 Java 方法。您有两个选择：(1) 改为用 JavaScript 实现计算，或者 (2) 对执行计算的服务器端服务进行 Ajax 调用。

# amazon-ec2 - Amazon EC2 与 Amazon EMR

> ID：10100127
> 
> 赞同：24
> 
> 时间：2012-04-11T05:09:00.620
> 
> 标签：amazon-ec2, amazon-web-services, hive, amazon-emr

我在 Hive 中实施了一项任务。目前它在我的单节点集群上运行良好。现在我计划在 AWS 上部署它。

我对AWS一无所知。如果我打算部署它，那么我应该选择 Amazon EC2 还是 Amazon EMR？

我想提高我的任务的性能。哪一个对我来说更好更可靠？如何接近他们？我听说我们也可以像在 AWS 上一样注册我们的 VM 设置。是否可以？

请尽快给我建议。

非常感谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-25T01:54:55.490

EMR 是安装和配置了 Hadoop（以及可选的 Hive 和/或 Pig）的 EC2 实例的集合。如果您使用集群来运行 Hadoop/Hive/Pig 作业，那么 EMR 是您的最佳选择。与 EC2 实例相比，EMR 实例的成本要高一些。今天对亚马逊价格的快速检查显示，小型 EC2 实例的成本为 0.08 美元/小时，而小型 EMR 实例的成本为 0.015 美元/小时。在我看来，为自己省去安装和设置 Hadoop（以及 Hive 和 Pig）、创建和维护以及 AMI 和使用它的麻烦，完全值得支付额外的钱。此外，EMR 的 Hadoop 和 Hive 版本有一些补丁在 Apache Hive 上不可用（至少目前还没有）。如果您使用 EC2，您可能会使用 Apache Hadoop 和 Hive（或者可能是 cloudera 发行版）并且不会`ALTER TABLE my_table RECOVER PARTITIONS`

参考：

*   [http://aws.amazon.com/ec2/pricing/](http://aws.amazon.com/ec2/pricing/)
*   [http://aws.amazon.com/elasticmapreduce/pricing/](http://aws.amazon.com/elasticmapreduce/pricing/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T19:27:58.393

我建议您不要尝试部署自己的 Hadoop 集群，除非您有 2-3 个月的空闲时间，并且您身边有一位 hadoop 专家。

Elastic MapReduce 将允许您通过提供预配置的 hadoop 环境快速入门。看你只有一份工作，应该没问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-03T15:57:47.743

一般来说，从历史上看，EMR 远远落后于最新版本的 Hadoop 组件，而且有些组件完全丢失了。这是使用另一个发行版的主要原因。例如，如果您想要 HBase，它不在 EMR 中，但不是。今天，EMR 中没有 Spark。EMR 通常会滞后。

也就是说，如果您不使用最新最好的功能，请使用 EMR。

# c++ - 返回对类静态数据成员的引用的正确方法是什么？（我正在使用 Qt，以防它有所作为）

> ID：10100131
> 
> 赞同：2
> 
> 时间：2012-04-11T05:09:23.087
> 
> 标签：c++, windows, qt, winapi, dll

我正在尝试从 DLL 中获取类静态数据成员的地址并将其保存在主机代码中。但是，当我退出打开所有（Windows typedef）**HINSTANCE**的 dll 管理器中的方法时，我丢失了对成员的指针/引用，即使我让它们保持打开状态。

我的设置是：

一个 Qt GUI 应用程序，它包括一个从 dll 加载插件的类。这个 dll-manager 类不使用 Qt 的东西，而是用于 Qdir 和 Qstrings 这里和那里......

dll 管理器应该发出一堆 LoadLibrary() 调用来打开 DLL，并为每个调用调用一个导出函数，该函数返回 DLL 导出的类中的静态“信息”结构的地址。

例如，DLL 类如下所示：

**BlackNWhite.h**

```
#ifdef BLACKNWHITE_EXPORTS
#define BLACKNWHITE_API __declspec(dllexport)
#else
#define BLACKNWHITE_API __declspec(dllimport)
#endif

// This class is exported from the BlackNWhite.dll
class BLACKNWHITE_API CBlackNWhite : PCOperatorBase 
{
public:

    CBlackNWhite(void);
    virtual ~CBlackNWhite(void);

    virtual int process(int* inBuffer, int* outBuffer, int bufferSize);
    void getParametersInfo(const std::vector<ParameterDescriptor>*& outParameters);

    static const OperatorInfo& info();

protected:

    static OperatorInfo operatorInfo;
};

 extern "C" __declspec(dllexport) PCOperatorBase* getOperatorInstance();
 extern "C" __declspec(dllexport) const PCOperatorBase::OperatorInfo& getOperatorInfo(); 
```

**BlackNWhite.cpp**

```
#include "stdafx.h"
#include "BlackNWhite.h"

PCOperatorBase::OperatorInfo CBlackNWhite::operatorInfo = {L"Black N White", L"modifier", L"color"};

const PCOperatorBase::OperatorInfo& CBlackNWhite::info()
{
    return CBlackNWhite::operatorInfo;
}

extern "C" __declspec(dllexport) PCOperatorBase* getOperatorInstance()
{
    return (PCOperatorBase*)(new CBlackNWhite());
}

extern "C"  __declspec(dllexport) const PCOperatorBase::OperatorInfo& getOperatorInfo()
{
    return CBlackNWhite::info();
}

CBlackNWhite::CBlackNWhite()
    : PCOperatorBase()
{
    ParameterDescriptor newParameter;
    newParameter.label = L"Parameter 1";
    parameters.push_back(newParameter);
}

CBlackNWhite::~CBlackNWhite()
{
}

int CBlackNWhite::process(int* inBuffer, int* outBuffer, int bufferSize)
{
    while(bufferSize--)
        *outBuffer++ = *inBuffer++;

    return 0;
}

void CBlackNWhite::getParametersInfo(const std::vector<ParameterDescriptor>*& outParameters)
{
    outParameters = &parameters;
} 
```

这个类继承自一个基类：

**PCOperatorBase.h**

```
#pragma once

#include "PCOperatorParameters.h"
#include <vector>

class PCOperatorBase
{
public:

    typedef struct OperatorInfo
    {
        wchar_t* name;
        wchar_t* type;
        wchar_t* subtype;

    } OperatorInfo;

    PCOperatorBase(void){};
    virtual ~PCOperatorBase(void){};

    virtual void getParametersInfo(const std::vector<ParameterDescriptor>*& outParameters) = 0;
    virtual int process(int* inBuffer, int* outBuffer, int bufferSize) = 0;

protected:

    std::vector<ParameterDescriptor>parameters;
}; 
```

并且 DLL-manager 有两个相关的方法。一个构建可用插件的列表，另一个只返回插件的字符串名称。

```
void PCOperatorManager::buildOperatorList(const QString path)
{
    QDir operatorDirectory(QDir::currentPath() + path);

    if(operatorList.size())
        operatorList.clear();

    QStringList operatorNameList = operatorDirectory.entryList(QStringList("*.dll"));

    typedef PCOperatorBase::OperatorInfo*(*PCOClassInfoFunction)();

    for(QStringList::iterator PCOClassName = operatorNameList.begin();
        PCOClassName != operatorNameList.end();
        PCOClassName++)
    {
        HINSTANCE PCOClassHandle;
        if((PCOClassHandle = LoadLibrary((operatorDirectory.absolutePath() + "/"+ *PCOClassName).toStdWString().c_str())))
        {
            OperatorDescriptor newPCOClassDescriptor;
            newPCOClassDescriptor.handle = PCOClassHandle;
            newPCOClassDescriptor.info = (*((PCOClassInfoFunction)GetProcAddress(PCOClassHandle, "getOperatorInfo")))();
            operatorList.push_back(newPCOClassDescriptor);

            printf("\n we have: %ls", operatorList[0].info->name);

        }
    }
}

QStringList PCOperatorManager::getOperatorNameList()
{
    QStringList operatorNameList;

    printf("\n the list length is: %i", operatorList.size());
    for(int i = 0; i < operatorList.size(); i++)
        printf("\n we have again: %ls", operatorList[0].info->name);

//operatorNameList << QString::fromWCharArray((*PCOClass).info.name);

    return operatorNameList;
} 
```

发生的事情是：在 buildOperatorList() 中，我可以访问 DLL 类的静态成员并将其分配给 OperatorDescriptor 结构中的 info 成员。也就是说，读取“我们拥有”的“测试”printf 语句确实打印出该字段的正确值。

但是，在`getOperatorNameList()`info 成员内部不再有效。

我的思路是，我正在做的是：

1.  我有一个指向 OperatorInfo 结构的指针，称为 info。
2.  我得到了 DLL 类中的静态 OperatorInfo 结构的地址，称为 operatorInfo。
3.  我将类的 operatorInfo 的地址分配给名为 info 的指针。那是`info = &CBlackNWhite::operatorInfo;`

此时，只要我不在 DLL **HINSTANCE上发出 FreeLibrary()，指针就应该保持有效**

发生什么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:36:33.370

我看到这里`operatorList`不是一个成员变量，`PCOperatorManager`一旦它被添加和构造，就像`buildOperatorList`我认为你应该访问`getOperatorNameList()`

# haskell - yesod 中的 id 属性

> ID：10100134
> 
> 赞同：2
> 
> 时间：2012-04-11T05:09:45.353
> 
> 标签：haskell, yesod, hamlet

在 yesod 中，我们可以像这样指定类属性：

```
<div .myclass> ==> <div class="myclass"> 
```

有没有 id 的类比？例如，类似：

```
<div #id> ==> <div id="id"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T05:13:46.800

是的; 它具有您猜到的确切语法。

来自[Yesod 书](http://www.yesodweb.com/book/shakespearean-templates)：

> 有两个方便的属性：对于 id，您可以使用散列，对于类，可以使用句点。换句话说，<p #paragraphid .class1 .class2>。

# iphone - 有没有办法改变 UIBarButtonItem 的文本颜色？

> ID：10100144
> 
> 赞同：1
> 
> 时间：2012-04-11T05:11:14.487
> 
> 标签：iphone, objective-c, uibarbuttonitem, uinavigationitem

我想更改 UIBarButtonItem 的文本颜色，例如 Pinterest 应用程序（navigationItem.backBarButtonItem）。但这里几乎是同样的问题。 [有没有一种简单的方法可以在不使用图像的情况下更改 UIBarButtonItem 的文本颜色？](https://stackoverflow.com/questions/5652165/is-there-an-easy-way-to-change-the-text-color-of-a-uibarbuttonitem-without-using#_=_)

那么，为什么 UIBarButtonItem 的文本颜色在 Pinterest 应用程序中会发生变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T05:52:16.623

尝试`setTitleTextAttributes:forState:`

[您可以从这里](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIBarItem_Class/Reference/Reference.html#//apple_ref/occ/cl/UIBarItem)了解更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:16:54.027

您可以使用 UISegmentedControl 来模拟 UIBarButtonItem。确保您有一个带有单段的段控件。

```
- (void) viewDidLoad {
  [YOUR_SEGMENTED_CONTROL removeAllSegments];
  [YOUR_SEGMENTED_CONTROL insertSegmentWithTitle:@"MyButton" atIndex:0 animated:NO];   
} 
```

检索 UISegmentedControl 的标签并将 textColor 设置为您喜欢的颜色

```
UILabel* lblText = [[[[YOUR_SEGMENTED_CONTROL subviews] objectAtIndex:0] subviews] objectAtIndex:0];
lblText.textColor = [UIColor blackColor]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T05:49:25.827

```
 @interface MyViewCOontroller : UIViewController {
  UILabel *lblTotCaratteri;
  } 
```

在实施中

```
 UIBarButtonItem *barItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];  
 lblTotCaratteri = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 25, 15)];
 lblTotCaratteri.textAlignment = UITextAlignmentCenter;

 lblTotCaratteri.textColor =[UIColor greyColor]; 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T06:07:14.960

我不是这样做的直接方法，但您可以通过将 UIBUtton 添加到 UIBarButtonItem 的 customview 来实现。

```
UIButton *backButton    =   [UIButton buttonWithType:UIButtonTypeCustom];
backButton.frame        =   CGRectMake(0, 0, 80, 40);
[backButton setBackgroundImage:[UIImage imageNamed:@"back-button.png"] forState:UIControlStateNormal];// Setting the background Image
[backButton setTitle:@"Back" forState:UIControlStateNormal];//Setting the title of the button
[backButton setTitleColor:[UIColor redColor] forState:UIControlStateNormal];// Setting the text color.
[backButton addTarget:self action:@selector(backButtonTaped) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *backButtonItem =   [[UIBarButtonItem alloc]initWithCustomView:backButton];

self.navigationItem.leftBarButtonItem   =   backButtonItem; 
```

这将为您提供一个 UIBarButtonItem，其中包含红色文本“Back”。

# iphone - 可访问性焦点

> ID：10100148
> 
> 赞同：12
> 
> 时间：2012-04-11T05:12:05.337
> 
> 标签：iphone, ios, focus, accessibility, voiceover

使用辅助功能

当 VoiceOver 按顺序读取应用程序中的元素时，有没有办法在元素之间转移焦点？我尝试使用“nextResponder”，但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T21:41:06.207

从 iOS 6 开始，您可以使用 a 将焦点设置到特定元素`UIAccessibilityLayoutChangedNotification`，传递元素

```
UIAccessibilityPostNotification(UIAccessibilityLayoutChangedNotification, firstBottom); 
```

但如果你想完全改变“标签顺序”，我不知道有什么办法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T17:25:56.200

查看[这篇文章](https://stackoverflow.com/questions/13279498/change-order-of-read-items-with-voiceover)，了解如何处理用于配音的元素的特殊排序。我刚刚在我正在开发的应用程序中使用了这种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:43:12.483

这是在黑暗中拍摄的，但是当您希望更改订单时，您是否尝试过更改accessibilityLabel 或accessibilityHint？如果您可以欺骗 VoiceOver 相信文本已更改，我希望它会适当地更改焦点。

时间安排将是困难的部分，因为当 VoiceOver 爬取您的视图时，似乎没有任何委托回调，因此您可能必须在尝试更新可访问性提示/值之前估计要经过的时间。

我最后的想法是用可访问性特征标记您想要引起注意的 UIView `UIAccessibilityTraitUpdatesFrequently`。这可能是您在不利用隐藏的 Apple 库的情况下可以获得的最接近的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-14T19:38:21.143

我试过**UIAccessibilityPostNotification(UIAccessibilityScreenChangedNotification, elementName);** 改变对不同元素的关注。行为是焦点转移到了新元素，但 Voice Over 会首先宣布页面标题，然后是新元素的可访问标签值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-07T08:53:42.000

**自定义视图的辅助功能：**

`accessibilityElements`您可以通过以下方式覆盖父视图的属性来自定义顺序（画外音应该遍历屏幕元素） 。

```
self.accessibilityElements = [childView1, childView2, childView3] 
```

随着那个画外音将遵循像这样的序列`childView1 -> childView2 -> childView3`。

**以编程方式将辅助功能焦点更改为其他元素：**

您可以随时使用以下代码将焦点转移到另一个元素。

```
UIAccessibility.post(notification: .layoutChanged, argument: childView2) 
```

使用上面的代码，语音焦点将转移到`childView2`，然后将遵循`accessibilityElements`ie定义的相同顺序`childView2 -> childView3 -> childView1... and so on`

**自定义复杂视图的辅助功能顺序：**

您可以进一步自定义它，如果一个视图有多个子视图和更大的子视图，那么您可以通过使用所有子视图定义`accessibilityElements`主父视图来实现可访问性顺序。`accessibilityElements`

例如，对于下面的视图层次结构，我们有
[视图控制器示例](https://i.stack.imgur.com/oAcxX.png)

要为此类视图定义可访问性元素的自定义顺序，我们可以按以下方式定义。

```
var customElements = childView1.accessibilityElements
customElements.append(contentsOf: childView2.accessibilityElements)
customElements.append(contentsOf: childView3.accessibilityElements)

parentView.accessibilityElements = customElements 
```

# android - 如何在 Android 中打开所有 sdcard 文件？

> ID：10100152
> 
> 赞同：2
> 
> 时间：2012-04-11T05:12:38.860
> 
> 标签：android, file

在我的应用程序中，我想将文件从 SD 卡上传到我的服务器。为此，我想打开文件选择器对话框，其中包含 SD 卡中包含的所有文件。请任何人帮助我如何做到这一点，我试过了

```
Intent intent = new Intent();
// intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent,"Select Picture"), SELECT_PICTURE); 
```

它只打开图像文件，但我想要所有文件

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T05:31:25.163

**实际上 Android 没有内置的文件资源管理器支持**。因此，为此，您必须使用任何第三方文件资源管理器，例如**Astro**、**ES**等，并**使用 Intent**您可以在应用程序中获取所需的文件。

此外，您尝试的方式仅适用于图库中的特定图像。所以它对其他文件格式没有帮助。

但我建议您只通过[**Android-File-Explorer**](https://github.com/mburman/Android-File-Explore)一个**GitHub**项目并使用它，它只是一个文件，您必须包含您的项目及其作为文件资源管理器的工作，您不必使用任何第三方应用程序为了这。

# ruby-on-rails - 如何对外包程序员隐藏 Rails 应用程序的一部分

> ID：10100153
> 
> 赞同：0
> 
> 时间：2012-04-11T05:12:46.507
> 
> 标签：ruby-on-rails

有没有办法向某些开发人员隐藏 Rails 应用程序的一部分？如果没有，我应该怎么做？

（背景：我们正在考虑将应用程序的某些部分外包给承包商，但担心他们可能会复制我们开发的代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:59:11.803

这在外包应用程序时总是存在的问题。
这是我的想法

> 您可以将安全业务逻辑提取到新应用程序并将其托管在某个安全的地方，
> 另一个团队可以进行 REST 调用以使用该功能
> 
> 您也可以创建一个 gem，但这并不安全，其他团队仍然可以看到您的代码。

我希望这可以帮助你！

# android - 在android中将录制的声音调制成不同的效果？

> ID：10100156
> 
> 赞同：3
> 
> 时间：2012-04-11T05:12:55.690
> 
> 标签：android, audio-recording, audio

我将制作一个与声音调制相关的应用程序，我需要在其中录制声音，录制完声音后，我需要在按下播放时以不同的调制或声音效果播放它，例如**反转，重采样，音调移位，Robatization** 效果按钮。现在我有录制声音的代码，但不知道如何调制录音机声音作为上述效果。

我搜索了整个网络，但没有找到任何解决方案。我该如何实现这种效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-31T06:10:33.000

有许多 API 可以帮助实现这一点。例如-

打开 SLES。音轨。

请看一下[这个](http://www.wiseandroid.com/post/2010/07/13/Intro-to-the-three-Android-Audio-APIs.aspx)页面。

我想它可能会对你有所帮助。

# android - Android：无法将滚动设置为此视图？

> ID：10100161
> 
> 赞同：1
> 
> 时间：2012-04-11T05:13:41.340
> 
> 标签：android, android-layout, layout, android-linearlayout

在我的应用程序中，视图显示为 googleBtn。如果我按下它，则会发生动画并且菜单视图会转到上方。如果我再次按下该按钮，则菜单将打开。请参阅下图。

**菜单打开时：**

![在此处输入图像描述](../Images/d507c361db27f0061246a80e84d82a0d.png)

**菜单关闭后：**

![在此处输入图像描述](../Images/360f7b14ddecbd5af5909a57e83f7dfc.png)

现在的问题是动画出现在隐藏菜单的正确位置。但是在完成动画后，我想将菜单布局固定到那个位置（就像第二张图片一样），但它并没有像那样发生。

现在，如果菜单打开并且我按下谷歌按钮，那么菜单就会关闭。但在完成动画后，它会回到正常位置。

我尝试修复布局的滚动 y 位置，但仍未成功。

按钮单击的代码如下：

```
case R.id.googleBtn:
        if(menu){   
            menuLayout.startAnimation(hideMenu);
            menu = false;
        }
        else{
            menuLayout.startAnimation(showMenu);
            menu = true;
        }
        break; 
```

菜单的布局如下：

```
 <LinearLayout android:id="@+id/menuLayout" 
    android:layout_height="wrap_content" android:layout_width="fill_parent"
    android:gravity="center_horizontal" 
    android:background="@drawable/slide">
    <View android:layout_height="80dp" android:layout_width="80dp"
        android:layout_marginBottom="25dp" android:id="@+id/googleBtn"
        android:background="#00000000" android:layout_gravity="bottom"/>    

</LinearLayout> 
```

那么为什么我无法修复滚动值？?

在这方面需要帮助。

**更新**

这是我的动画代码：

对于菜单隐藏：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<translate 
    android:fromYDelta="0" 
    android:toYDelta="-70%" 
    android:duration="1000"
    android:fillEnabled="true"
    android:fillAfter="true"
    /> 
```

对于 MenuShow：

```
 <?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate 
        android:fromYDelta="-70%" 
        android:toYDelta="0" 
        android:duration="1000"/>
</set> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:17:25.283

我想你正在寻找这个[安卓：滑动抽屉](https://stackoverflow.com/questions/10017008/android-sliding-drawer)

这里的 Panel 是一个容器，其中包含您的视图，它还支持动画、投掷等。

您可以在这里找到其他小部件源[http://code.google.com/p/android-misc-widgets/source/browse/#svn%2Ftrunk%2Fandroid-misc-widgets%2Fsrc%2Forg%2Fmiscwidgets%2Fwidget](http://code.google.com/p/android-misc-widgets/source/browse/#svn%2Ftrunk%2Fandroid-misc-widgets%2Fsrc%2Forg%2Fmiscwidgets%2Fwidget)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:21:17.770

您可能需要设置[`android:fillEnabled="true"`](http://developer.android.com/reference/android/view/animation/Animation.html#attr_android%3afillEnabled)和/或[`android:fillAfter="true"`](http://developer.android.com/reference/android/view/animation/Animation.html#attr_android%3afillAfter).

如果这不起作用，您可以将更改应用于[`AnimationListener#onAnimationEnd`](http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html#onAnimationEnd%28android.view.animation.Animation%29).

# c# - 如何知道从 C++ dll 传递到 C# 的数组的大小

> ID：10100162
> 
> 赞同：0
> 
> 时间：2012-04-11T05:13:46.670
> 
> 标签：c#, c++, interop, marshalling

实际上我在 C# 中使用了一个 C++ dll，如下所示

**我的 C++ 代码**

```
extern "C" __declspec(dllexport)
    char**  __stdcall hh()
{
 static char* myArray[3] = {"A1", "BB2", "CC3",};
    return myArray;
} 
```

**我的 C# 代码**

```
[DllImport(@"ourdll.dll",CharSet = CharSet.Ansi,CallingConvention = CallingConvention.StdCall)]     
      public static extern IntPtr hh();
       static void Main(string[] args)
        {
            IntPtr a = hh();
            int j = 0;
            string[] s=new string[100]; //I want this to be dynamic
           do
           {
               s[j] = Marshal.PtrToStringAnsi(Marshal.ReadIntPtr(a,4*j));
               j++;
           }
           while(s[j-1] != null);
        } 
```

我无法获得 hh() 返回的数组的大小；如何获得数组的大小，以便我的代码行

**字符串[] s=新字符串[100]；更改为 string[] s=new string[ACtual Length of array];**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T05:16:47.767

您要么必须返回数组的大小（可能是引用变量），要么可以将 NULL 终止符添加到列表中。如果使用 NULL 终止符，则可以循环遍历数组，直到找到 NULL 以确定大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:34:27.680

如果你想在 PInvoke 中找到数组的长度，你可以使用`Marshal.SizeOf(object)`方法

[MSDN 链接](http://msdn.microsoft.com/en-us/library/y3ybkfb3.aspx)

它适用于结构

# c# - 以编程方式检查 WSDL 文件支持的 SOAP 版本（1.1 或 1.2 或两者）

> ID：10100166
> 
> 赞同：3
> 
> 时间：2012-04-11T05:14:06.050
> 
> 标签：c#, .net, wcf, soap, wsdl

我正在使用 C#，我想检查 WSDL 支持哪个版本的 SOAP。我怎样才能找到它？

WSDL 1.1 文件中包含以下命名空间

```
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
```

WSDL 1.2 文件中包含以下命名空间

```
 xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" 
```

如果一个文件同时支持这两个版本，它可以包含以下类型的内容

```
<wsdl:binding name="CustServiceSoap" type="tns:CustServiceSoap">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="GetAllCustomers">
      <soap:operation soapAction="http://tempuri.org/GetAllCustomers" style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetNCustomers">
      <soap:operation soapAction="http://tempuri.org/GetNCustomers" style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetRangeOfCustomers">
      <soap:operation soapAction="http://tempuri.org/GetRangeOfCustomers" style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>

<wsdl:binding name="CustServiceSoap12" type="tns:CustServiceSoap">
    <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="GetAllCustomers">
      <soap12:operation soapAction="http://tempuri.org/GetAllCustomers" style="document" />
      <wsdl:input>
        <soap12:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetNCustomers">
      <soap12:operation soapAction="http://tempuri.org/GetNCustomers" style="document" />
      <wsdl:input>
        <soap12:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetRangeOfCustomers">
      <soap12:operation soapAction="http://tempuri.org/GetRangeOfCustomers" style="document" />
      <wsdl:input>
        <soap12:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal" />
      </wsdl:output>
    </wsdl:operation> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:19:03.440

```
public void Foo()
{
    //var uri = new Uri("http://kozhevnikov.com/foo.asmx?WSDL");
    //var uri = new Uri("http://kozhevnikov.com/bar.svc?WSDL");

    var importer = new WsdlImporter(new MetadataExchangeClient(uri, MetadataExchangeClientMode.HttpGet).GetMetadata());
    var version = importer.ImportAllEndpoints().Aggregate(Soap.None, (v, e) => v | Parse(e.Binding.MessageVersion.Envelope));

    if (version == Soap.None)
        Console.WriteLine("Is None.");
    if (version.HasFlag(Soap.Both))
        Console.WriteLine("Has Both.");

    Console.WriteLine(version);
}

private static Soap Parse(EnvelopeVersion version)
{
    if (version == EnvelopeVersion.None)
        return Soap.None;
    if (version == EnvelopeVersion.Soap11)
        return Soap.Soap11;
    if (version == EnvelopeVersion.Soap12)
        return Soap.Soap12;
    throw new NotImplementedException(version.ToString());
}

public enum Soap
{
    None,
    Soap11,
    Soap12,
    Both = Soap11 | Soap12
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-15T11:04:11.717

尽管这个问题已经过去了将近十年，而且肥皂服务也成为了遗产，但仍然可能需要像我一样处理它们！

```
using System.Web.Services.Description;
using System.Net.Http;
using System.Collections.Generic;
using System.Linq;

private static async Task<string[]> GetSoapVersions()
{
    var client = new HttpClient();
    var stream = await client.GetStreamAsync(WSDL_URL);

    var serviceDescription = ServiceDescription.Read(stream);

    var allVersionsCollection = new List<string>();

    foreach (Binding binding in serviceDescription.Bindings)
    {
        foreach (var extension in binding.Extensions)
        {
            if (extension is Soap12Binding)
                allVersionsCollection.Add("Soap12");
            else if (extension is SoapBinding)
                allVersionsCollection.Add("Soap11");
        }
    }

    return allVersionsCollection.Distinct().ToArray();
} 
```

# java - 创建 JAR 文件并执行时出错

> ID：10100167
> 
> 赞同：0
> 
> 时间：2012-04-11T05:14:13.957
> 
> 标签：java, jar

我在创建和执行 JAR 文件时遇到问题。我已经制作了一个 JAR 文件，但是当我使用 执行它时`java -jar`，我收到一个错误，`Error: could not find and load main class ...`我使用 制作了一个 JAR 文件`jar cvfm`，但我从 C:\Program Files\Java\jdk1.70\ 执行它

这有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:22:28.690

要创建可执行的 jar 文件，您必须指定 jar 的入口点。像这样：

jar -cvfe "jar 文件名" "主类名(Ex com.test.MainTest)" "要包含在 jar 中的文件"

如果您已经有一个 jar 文件，您可以通过创建一个“additions”文件并运行命令以包含主类来更新清单文件：

主类：类名

并运行命令：jar ufm "jarfilename" "additions manifest"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:19:22.127

也许您的清单中缺少一个条目？您必须将 MainClass 添加到 MANIFEST.MF - 所需的条目是`Main-Class: classname`

有关更多信息，请参见[此处](http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T05:19:45.357

每当我们创建 jar 文件时，我们都会传递嵌入在 jar 中的 Manifest.mf 中的 main-class 参数。

你错过了那部分，现在当你执行它时无法识别要执行的主类

[http://www.skylit.com/javamethods/faqs/createjar.html](http://www.skylit.com/javamethods/faqs/createjar.html)可能会有所帮助

# html - 表格中每一行的边框半径

> ID：10100169
> 
> 赞同：1
> 
> 时间：2012-04-11T05:14:31.977
> 
> 标签：html, css

我有这样的表格，我想将样式应用于圆角的每一行。

```
<table>
  <tr>
    <td>Month</td>
    <td>Savings</td>
  </tr>
  <tr>
    <td>January</td>
    <td>$100</td>
  </tr>
  <tr>
    <td>February</td>
    <td>$80</td>
  </tr>
</table> 
```

我已经写了这样的CSS。

```
td
{
border-radius:5px;
border:2px solid red;
} 
```

我有多个列，我想在圆角显示行。当我为单个单元格尝试此操作时，我可以实现。任何人都可以帮助我。

在此先感谢，卡西克

实际上我想要这样的输出，但是在一行中的每个单元格之间有一个间隙。我尝试使用单元格间距，但我无法获得。

```
td { border: solid 1px #000; }
tr td:first-child
{ 
  border-top-left-radius: 10px; 
  border-bottom-left-radius: 10px;
  border-right:none;
}
tr td:last-child 
{ 
border-top-right-radius: 10px; 
border-bottom-right-radius: 10px;
border-left:none;
}

/````````````````````\
\..................../
/````````````````````\
\..................../
/````````````````````\
\..................../ 
```

我的行希望以实线边框显示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T05:27:02.580

你可以这样写：

```
td:first-child{
    -moz-border-radius:10px 0 0 10px;
    -webkit-border-radius:10px 0 0 10px;
}
td:last-child{
    -moz-border-radius:0 10px 10px 0;
    -webkit-border-radius:0 10px 10px 0;
}
td{background:red;} 
```

检查这个[http://jsfiddle.net/RNWwu/1/](http://jsfiddle.net/RNWwu/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:15:56.440

```
tr {
    border-radius:5px;
    border:2px solid red;
} 
```

将一个字母 , 更改`d`为`r`( `td`to `tr`)。

编辑：抱歉，您不能将边框应用于 tr。试试这个'hack'，从[这里](https://stackoverflow.com/questions/4094126/border-radius-on-tr)借来的：

```
table { border-collapse: separate; }
td { border: solid 1px #000; }
tr:first-child td:first-child { border-top-left-radius: 10px; }
tr:first-child td:last-child { border-top-left-radius: 10px; }
tr:last-child td:first-child { border-top-left-radius: 10px; }
tr:last-child td:last-child { border-top-left-radius: 10px; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T05:26:38.600

你可以尝试这样的事情......但是，你应该只使用`<div>`而不是`<table>`

```
<style>

table
{
border-collapse:separate;
border-spacing:1px;
}

td
{
background-color:red;
}

td:first-child
{
border-top-left-radius:5px;
border-bottom-left-radius:5px;
border:2px solid red;
}

td:last-child
{
border-top-right-radius:5px;
border-bottom-right-radius:5px;
border:2px solid red;
}

</style>

<table>
  <tr>
    <td>Month</td>
    <td>Savings</td>
  </tr>
  <tr>
    <td>January</td>
    <td>$100</td>
  </tr>
  <tr>
    <td>February</td>
    <td>$80</td>
  </tr>
</table> 
```

# javascript - 遇到负值时返回 0

> ID：10100172
> 
> 赞同：0
> 
> 时间：2012-04-11T05:15:07.657
> 
> 标签：javascript, jquery

我有一个函数，如果某个值为负，我想返回 0。我知道我可以通过使用该`max($value, 0)`函数在 PHP 中实现这一点；是否有提供类似功能的 JavaScript 或 jQuery 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T05:16:53.167

您可以使用`Math.max(value, 0)`.

# mysql - 将默认字符集更改为拉丁语

> ID：10100192
> 
> 赞同：0
> 
> 时间：2012-04-11T05:17:12.870
> 
> 标签：mysql

当我将默认字符集从 UTF-8 更改为 latin1 时，它会将文本、varchar 列更改为 utf8 所以新表看起来像这样......

```
...
  `include_zoneclass` varchar(255) CHARACTER SET utf8 DEFAULT NULL,
...
  PRIMARY KEY (`campaignid`)
) ENGINE=InnoDB AUTO_INCREMENT=2082 DEFAULT CHARSET=latin1 
```

如何使表格完全是 latin1 并且不应该有 utf8 的痕迹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:21:52.053

尝试使用 ALTER TABLE 命令和 CONVERT TO CHARACTER SET

请参阅此处了解更多信息： http: [//dev.mysql.com/doc/refman/5.1/en/alter-table.html](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

# java - 使用预签名 URL 将文件 PUT 到 S3

> ID：10100193
> 
> 赞同：17
> 
> 时间：2012-04-11T05:17:23.867
> 
> 标签：java, curl, amazon-s3

我整晚都在使用 Amazon S3 预签名 URL 来尝试 PUT 文件。我在 java 代码中生成预签名的 URL。

```
 AWSCredentials credentials = new BasicAWSCredentials( accessKey, secretKey );
    client = new AmazonS3Client( credentials );
    GeneratePresignedUrlRequest request = new GeneratePresignedUrlRequest( bucketName, "myfilename", HttpMethod.PUT);
    request.setExpiration( new Date( System.currentTimeMillis() + (120 * 60 * 1000) ));
    return client.generatePresignedUrl( request ).toString(); 
```

然后，我想使用生成的预签名 URL 来使用 curl 放置文件。

```
curl -v -H "content-type:image/jpg" -T mypicture.jpg https://mybucket.s3.amazonaws.com/myfilename?Expires=1334126943&AWSAccessKeyId=<accessKey>&Signature=<generatedSignature> 
```

我假设，就像 GET 一样，这将在一个不公开的存储桶上工作（这是预先签名的点，对吗？）好吧，我每次尝试都被拒绝访问。最后出于沮丧，我更改了存储桶的权限以允许每个人都写入。当然，然后预签名的 URL 起作用了。我迅速从存储桶中删除了 EVERYONE 权限。现在，我无权删除通过我自己的自预签名 URL 上传到我的存储桶中的项目。我[现在](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectPUT.html)看到我可能应该在我上传的内容上放置一个 x-amz-acl 标头。我怀疑在我做对之前我会创建更多不可删除的对象。

这导致了几个问题：

*   如何使用 PUT 和生成的预签名 URL 使用 curl 上传？
*   如何删除上传的文件和我创建的用于测试它的存储桶？

最终目标是手机将使用这个预签名的 URL 来放置图像。我试图让它卷曲作为概念证明。

**更新：我在**[亚马逊论坛](https://forums.aws.amazon.com/thread.jspa?threadID=91800)上问了一个问题。如果那里提供了答案，我会将其作为答案放在这里。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-22T16:47:25.917

这确实有点令人费解，我认为这是[AWS SDK for Java](http://aws.amazon.com/sdkforjava/)中的一个错误（见下文） - 但首先，以下[curl](http://curl.haxx.se/)命令将上传您的文件（当然假设更新的预签名 URL ):

```
curl -v -T mypicture.jpg https://mybucket.s3.amazonaws.com/myfilename?Expires=1334126943&AWSAccessKeyId=<accessKey>&Signature=<generatedSignature> 
```

也就是说，我已经排除了`Content type`标题，结果产生`application/octet-stream`（或`binary/octet-stream`），这显然是不希望的；因此，需要进一步挖掘。

## 背景/分析

[对Amazon S3](http://aws.amazon.com/s3/)的 PUT（和 DELETE 以及 HEAD）请求的预签名 URL原则上是已知的，在本网站上的相关问题中至少可以证明这一点（例如，请参阅我对[使用预签名的 curl 上传到 s3 的回答） URL（得到 403）](https://stackoverflow.com/a/9085141/45773)）。

便利的[查询字符串请求身份验证替代方案](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth)被记录为使用以下*伪语法来说明查询字符串请求身份验证方法*：

```
StringToSign = HTTP-VERB + "\n" +
    Content-MD5 + "\n" +
    Content-Type + "\n" +
    Expires + "\n" +
    CanonicalizedAmzHeaders +
    CanonicalizedResource; 
```

它确实包含`Content-Type`标头，并且（正如您已经发现的那样）这是某些记录案例中缺少的部分，例如，请参见 AWS 团队对[GetPreSignedURL 的响应 PUT request](https://forums.aws.amazon.com/message.jspa?messageID=244858#244858)，一旦添加就会产生一个有效的预签名 URL。

这很容易通过[适用于 .NET 的 AWS 开发工具包](http://aws.amazon.com/sdkfornet/)实现，它提供了便捷的方法[GetPreSignedUrlRequest.WithContentType](http://docs.amazonwebservices.com/sdkfornet/latest/apidocs/html/M_Amazon_S3_Model_GetPreSignedUrlRequest_WithContentType.htm)来做到这一点：

> 设置此请求的 ContentType 属性。此属性默认为“binary/octet-stream”，但如果您需要其他内容，您可以设置此属性。

因此，扩展相应的示例[Upload an Object Using Pre-Signed URL - AWS SDK for .NET](http://docs.amazonwebservices.com/AmazonS3/latest/dev/UploadObjectPreSignedURLDotNetSDK.html)如下生成具有内容类型的工作预签名 URL，可以按预期通过*curl*上传（即完全按照您的尝试）：

```
 // ...
    GetPreSignedUrlRequest request = new GetPreSignedUrlRequest();
    // ...
    request.WithContentType("image/jpg");
    // ... 
```

现在，有人想以类似的方式扩展语义相同的示例[Upload an Object Using Pre-Signed URL - AWS SDK for Java](http://docs.amazonwebservices.com/AmazonS3/latest/dev/PresignedUrlUploadObjectDotNetSDK.html)，但是（正如您已经发现的那样），没有专用的方法来实现这一点。这可能只是一种缺乏便利的方法，最终可以通过[addRequestParameter()](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/GeneratePresignedUrlRequest.html#addRequestParameter%28java.lang.String,%20java.lang.String%29)或[setResponseHeaders()](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/GeneratePresignedUrlRequest.html#setResponseHeaders%28com.amazonaws.services.s3.model.ResponseHeaderOverrides%29)实现，例如：

```
 // ...
  request.setExpiration( new Date( System.currentTimeMillis() + (120 * 60 * 1000) ));
  request.addRequestParameter("content-type", "image/jpg");
  return client.generatePresignedUrl( request ).toString();
  // ... 
```

但是，这两种方法的文档都提出了其他用途，并且它确实不起作用，即它们总是产生相同的签名，无论哪种内容类型都是这样设置的（如果有的话）。

进一步调试 SDK 可以发现，它们都提供了语义相似的核心方法来根据上面引用的伪语法计算查询字符串身份验证[，](https://github.com/amazonwebservices/aws-sdk-for-net/blob/master/Amazon.S3/AmazonS3Client.cs#L6173)*请*参阅.NET 的[buildSigningString()](https://github.com/amazonwebservices/aws-sdk-for-java/blob/master/src/main/java/com/amazonaws/services/s3/internal/RestUtils.java#L57)和 Java 的 makeS3CanonicalString()。

但是Java版本中的相应代码*将所有有趣的标题添加到列表中，然后对它们进行排序*，其中*“有趣”定义为Content-MD5，Content-Type，Date和x-amz-*实际上从未执行过，因为确实没有以某种方式提供这些标头的方法，它们仅适用于类[DefaultRequest](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/DefaultRequest.html)而不是用于初始化前者的类[GeneratePresignedUrlRequest](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/GeneratePresignedUrlRequest.html)，后者用作依次计算签名的输入，请参见受保护的方法[createRequest()](https://github.com/amazonwebservices/aws-sdk-for-java/blob/master/src/main/java/com/amazonaws/services/s3/AmazonS3Client.java#L2593)。

*有趣/值得注意的是，在 .NET 与 Java 中计算查询字符串身份验证的两种方法是从调用堆栈上的标头*与*参数*源的几乎反向组合组成它们的输入，这可能暗示 Java 错误的原因，但是显然，这也可能只是难以破译，即内部架构当然可能会有很大不同。

### 初步结论

这有两个角度：

*   适用于 Java 的 AWS 开发工具包肯定缺乏设置内容类型的便捷方法，这可能是一种比较少见，但在其他 AWS 开发工具包中也有相应的明显用例 - 鉴于它在 AWS 相关后端服务中的广泛使用，这令人惊讶.
*   *无论如何，与 .NET 版本相比，查询字符串请求身份验证*的实现方式似乎有些可疑- 这再次令人惊讶，因为它是核心功能，但是，这仍然在 S3 模型中/命名空间，因此可能只有上面的各个用例才需要。

总之，解决此问题的唯一合理方法是更新 SDK，因此需要提交错误报告 - 显然，也可以复制/扩展 SDK 功能以单独解决这种特殊情况（理想情况下以允许提交的方式[aws-sdk-for-java 项目](https://github.com/amazonwebservices/aws-sdk-for-java)的拉取请求），但是以兼容和可维护的方式实现这一点似乎有点棘手，因此最好由 SDK 维护人员自己完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:40:39.470

也遇到了这个问题。我们已经在跟踪文件何时上传到后端，因此我们的解决方法是在客户端使用 Rails 应用程序调用 copy_from 上传文件后设置内容类型。

# facebook - Facebook 登录显示错误：“发生错误。请稍后再试”

> ID：10100196
> 
> 赞同：-1
> 
> 时间：2012-04-11T05:17:32.743
> 
> 标签：facebook

我正在我的网站上工作，我刚刚添加了 Facebook 登录。我让我的朋友测试它，但当他尝试时，它给他的错误消息是“发生错误。请稍后再试”。

但是，当我尝试使用自己的 Facebook 帐户登录时，我能够成功注册。所以我不确定出了什么问题。

有人可以测试 Facebook 登录并告诉我它是否有效吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T05:41:27.500

您是否在沙盒模式下运行应用程序？
如果是这样，请确保您已为您的朋友提供所需的权限，
转到您的应用设置并检查您朋友的角色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T05:18:52.367

如果您希望我们在您的网站上进行测试，我们将需要地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T15:45:22.643

我猜你是从[http://localhost](http://localhost)调试的？这也发生在我身上。然而，facebook 只接受带有适当推荐人的登录请求，即您在 facebook 应用程序的应用程序设置中提供的。要解决此问题，一种简单的方法是将域名放入您的主机文件并将其指向 127.0.0.1，然后使用该主机进行开发。

因此，如果您将 mydomain.com 作为 facebook 中的应用程序域，请打开您的主机文件（如果您在 Windows 上，则为 C:\Windows\System32\drivers\etc\hosts）并将以下行添加到文件末尾：

```
mydomain.com 127.0.0.1 
```

然后确保您的应用程序响应该主机名并在浏览器中浏览到它。现在您可以使用 mydomain.com 在本地进行开发，并且您的 facebook 登录应该可以工作。

# php - 在zend框架中包含js文件的最佳方法

> ID：10100197
> 
> 赞同：7
> 
> 时间：2012-04-11T05:17:37.480
> 
> 标签：php, javascript, zend-framework

我想在我的 php 脚本中包含外部 js 文件。我正在关注 zend 框架。现在我正在像这样在控制器的 init 函数中添加 js 文件。

```
public function init() {
    $this->doUserAuthorisation();
    parent::init();
    $this->view->headScript()->appendFile($this->view->baseUrl().'/js/front_cal/jquery-1.3.2.min.js');  
    $this->view->headLink()->setStylesheet($this->view->baseUrl().'/styles/front_cal/calendar.css');
} 
```

我面临的问题是，js 文件不包含。这是包含 js 文件的正确方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-11T05:31:16.027

JavaScript（以及图像、CSS、flash 电影等）属于视图层，因此在此处配置它们。

对于全局包含的文件，将它们添加到您的布局中，例如

```
<!-- layout.phtml -->
<head>
    <?php echo $this->headScript()->prependFile(
        $this->baseUrl('path/to/file.js')) ?>
    <?php echo $this->headLink()->prependStylesheet(
        $this->baseUrl('path/to/file.css')) ?>

<!-- snip -->

    <?php echo $this->inlineScript()->prependFile(
        'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js') ?>
</body> 
```

然后，您的视图脚本可以将资产添加到布局中回显的助手中。由于布局使用`prepend*()`方法，全局文件将首先显示，例如

```
<?php // views/scripts/index/index.phtml
$this->inlineScript()->appendFile($this->baseUrl('path/to/script.js')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-20T12:33:39.507

在上述解决方案中，'path/to/file.js' 脚本将包含在标题中两次。`echo`调用之前不需要`prependFile`。这种行为可能导致重复的 javascript 控件。

`<!-- layout.phtml --> <head> <?php echo $this->headScript()->prependFile( $this->baseUrl('path/to/file.js')) // this will echo out the whole prependFile queue`

# android-layout - com.android.internal.R.id.content 无法解析为闹钟代码中的变量

> ID：10100200
> 
> 赞同：5
> 
> 时间：2012-04-11T05:17:53.003
> 
> 标签：android-layout

我正在使用我找到的闹钟代码并尝试对其进行自定义。

但我收到此错误：“com.android.internal.R 无法解析为变量”代码：

```
 getListView().setItemsCanFocus(true);

    // Grab the content view so we can modify it.
    FrameLayout content = (FrameLayout) getWindow().getDecorView()
            .findViewById(com.android.internal.R.id.content); 
```

我不确定这段代码在做什么（以便我可以更改它）你能帮我通过一些替代代码解决这个问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T08:41:04.410

解决方案很简单。

* * *

只需替换：`com.android.internal.R.id.content`与`android.R.id.content`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:31:31.377

您可以直接使用 R.id.content，您需要在布局中具有该名称的视图。

在您的 gen->R.java 文件中应该有一个名为 content 的 int 对应于应该在 res->layout 文件夹中声明的视图。这个 int 将由 Android 自动创建。

# objective-c - 仅具有横向的 UIView 正在转向纵向

> ID：10100202
> 
> 赞同：0
> 
> 时间：2012-04-11T05:18:17.187
> 
> 标签：objective-c, xcode, ipad, orientation, storyboard

所以我让我的应用程序运行 iPad 的主从项目。

我添加了一个`UIBarButtonItem`显示推送视图“关于应用程序”的详细信息。

当我将第三个视图推送到详细信息（从`UITable`）并点击后退按钮时，它会返回到 navigationControl 堆栈上的第二个视图，并且视图变为纵向！

我所有的 viewControllers 都有以下代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
        return UIInterfaceOrientationIsPortrait(interfaceOrientation);
    else
        return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

这是出现的错误：

> 对于所有界面方向，视图控制器从 -shouldAutorotateToInterfaceOrientation: 返回 NO。它应该支持至少一个方向。

我还尝试`UIView`直接从情节提要中将横向设置为方向，但也不起作用。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:27:10.880

我会尝试删除 if 语句以进一步检查问题的原因并只留下 isLandscape 签入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:22:23.560

过了一会儿，我意识到我的第三个视图的代码略有不同。

我只是从其他视图中复制代码并粘贴到第三个视图中，现在它正在工作......

# google-docs-api - .Net 的 Google 数据 API 允许在 Google 应用帐户中共享外部组织

> ID：10100203
> 
> 赞同：2
> 
> 时间：2012-04-11T05:18:20.773
> 
> 标签：google-docs-api

我在我的应用程序中使用 Google Data API for .Net（1.9 版）。我创建了一个 Google Apps 帐户，并且在 Google Docs 下设置了“用户不能在此组织之外共享文档”设置。

当我尝试从 Google docs web 共享域（组织）之外的文件时，我收到一条错误消息，指出该文件无法在我的域之外共享。

但是当我从 API 尝试同样的事情时，它成功了。我从 API 获得了 200 次成功。当我尝试从共享链接访问文件时，它显示“您需要访问此资源的权限”。我的问题是 API 不应该返回错误吗？我该如何处理这种情况？

* * *

这是我正在使用的代码：

```
DocumentsRequest request = null;   

/* request  initialization */

string csBatchReqBody = "<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom" xmlns:gAcl="http://schemas.google.com/acl/2007" xmlns:batch="http://schemas.google.com/gdata/batch"><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/acl/2007#accessRule"/><entry><id>https://docs.google.com/feeds/default/private/full/document:1DsELtiNwq-ogOrp8cAONdMpGR4gBF79PjijTae-vVNg/acl/user:myusername@mydomain.com</id><batch:operation type="query"/></entry><entry><batch:id>1</batch:id><batch:operation type="insert"/><gAcl:role value="reader"/><gAcl:scope type="user" value="myusername@gmail.com"/></entry>"

string Url = "https://docs.google.com/feeds/default/private/full/document:1DsELtiNwq-ogOrp8cAONdMpGR4gBF79PjijTae-vVNg/acl/batch";

byte[] byteArray = Encoding.ASCII.GetBytes(csBatchReqBody);
MemoryStream inputStream = new MemoryStream(byteArray);
AtomEntry reply = request.Service.Insert(new Uri(Url), inputStream, "application/atom+xml", "");

MemoryStream stream = new MemoryStream();
reply.SaveToXml(stream); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:51:15.893

如果您尝试在域外共享文件并且管理员设置了“用户不能在此组织之外共享文档”标志，API 实际上会返回 400。

您的代码发送批处理请求（即使对于单个元素），您必须检查批处理响应以注意到错误。

相反，使用以下代码将文档共享给单个用户，它假定这`entry`是`DocumentEntry`您要共享的：

```
AclEntry acl = new AclEntry();
acl.Scope = new AclScope("username@gmail.com", "user");
acl.Role = new AclRole("reader");
acl = service.Insert(new Uri(entry.AccessControlList), acl); 
```

# .net - 使用 .Net 4.5 的功能区功能

> ID：10100204
> 
> 赞同：5
> 
> 时间：2012-04-11T05:18:26.470
> 
> 标签：.net, wpf, .net-4.5

所以我一直在寻找 .Net 4.5 中的新功能，我发现功能区现在是它的原生 API。我通过包含“System.Windows.Controls.Ribbon.dll”在WPF中尝试了一个程序，并按照msdn上给出的示例添加

```
 "xmlns:ribbon="clr-namespace:Microsoft.Windows.Controls.Ribbon;assembly=RibbonControlsLibrary" 
```

但收到错误错误 1 ​​命名空间“Microsoft.Windows”中不存在类型或命名空间名称“Controls”（您是否缺少程序集引用？） c:\users\ABC\documents\visual studio 11\Projects\WpfApplication1 \WpfApplication1\obj\Debug\MainWindow.g.cs 12 25 WpfApplication1"

我没有找到要添加的任何“Microsoft.Windows.Controls.Ribbon”，我通过互联网搜索但找不到 .Net 4.5 的功能区，尽管 .Net4 作为一些外部 API 有很多。即使在 MSDN 论坛上也没有得到任何答案。在 .net 4.5 上工作的任何人都知道我在示例中缺少什么吗？“http://msdn.microsoft.com/en-us/library/system.windows.controls.ribbon.ribbon(v=vs.110).aspx”上述示例在本网站上。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T07:20:03.963

添加对的引用

```
System.Windows.Controls.Ribbon 
```

然后，您可以在 XAML 中使用 <Ribbon>，而不会造成额外的混乱。

```
<Window x:Class="Test"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Ribbon>
            <!-- controls -->
        </Ribbon>
    </Grid>
</Window> 
```

但是当我查看您的代码时，命名空间是 System.Windows。...，而不是 Microsoft.Windows。...

# twitter - 为什么 Twitter API 返回 > rpp 值？

> ID：10100205
> 
> 赞同：2
> 
> 时间：2012-04-11T05:18:51.757
> 
> 标签：twitter

我有一个简单的脚本可以每页提取 100 个结果。它实际上返回了 100 多个。我错过了什么吗？

这是完整的代码：

```
<?php 
    $request = 'http://search.twitter.com/search.json?q=obama&rpp=100&result_type=mixed';
    $handle = fopen($request, "r");
    $twt = stream_get_contents($handle);
    fclose($handle);
?>

<html>
<head>
    <title>tweets</title>
    <script type="text/javascript" src="js/jquery-1.7.2.min.js" ></script>
</head>
<body>
    <div id='tweets'></div>
</body>
<script>
$(document).ready(function() {
    var tweets = <?php echo json_encode($twt); ?>;
    var obj = jQuery.parseJSON(tweets);
    function getTweets() {
        for (var i = obj.results.length - 1; i >= 0; i--) {
            $('#tweets').append((i+1) + '<br />' + obj.results[i].text+'<br /><br />');
        };
    }
    getTweets();
});
</script>
</html> 
```

# iphone - 无法使用 UITabBarController 将一个视图控制器发送到另一个视图控制器

> ID：10100208
> 
> 赞同：0
> 
> 时间：2012-04-11T05:19:03.783
> 
> 标签：iphone, nsstring, uitabbarcontroller

我正在使用`UITabBarController`，它有三个`TabBarItem`。所有都是从拖放`XIB`。每个选项卡都有一个视图。现在如何将`NSString`值从第一个`TabBarItem`视图发送到第二个`TabBarItem`视图。我无法发送价值。这是我的代码：

```
tableViewIns = [[TableViewController alloc]init];

    tableViewIns.yearInputValue  = yearTextField.text; 

    tableViewIns.principalInputValue = principalTextField.text;

    tableViewIns.interestInputValue = interestTextField.text; 
```

第一个选项卡是`HomeViewController`，第二个选项卡是`TableViewController`。如何将值从一个选项卡发送到另一个选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:33:33.840

我对这些东西也很陌生，但是我已经使用属性将值传递给了不同的类。目标类应该在其 .h 文件中包含它，然后您可以在第一个 .m 文件中分配它的值。我相信您还需要在第一个中导入目标头文件。抱歉，如果这没有多大意义，但它肯定对我有用，尽管不在 tabview 中:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:43:22.683

如果您已正确合成所有变量但仍然没有得到结果，请尝试另一种方法....也就是说，在 AppDelegate 中定义变量（在您的情况下，有 3 个）......`property`然后`synthesize`它们......

`NSString *year,*principal,*interest;`

现在，在 Firstview 中，声明并初始化 AppDelegate 变量....就像

```
AppDelegate *app = (AppDelegate *)[[UIApplication sharedApplication]delegate]; 
```

然后，`app.year = yearTextField.text;`并以同样的方式定义其余部分.....

现在在 TableViewController 中，同样，定义 AppDelegate 并使用对象...获取这些值...。

```
yearInputValue = [app.year intValue]; //If it is int value, otherwise remove 'intValue'. 
```

其余利息和本金也是一样的.....

这是从一种观点到另一种观点的最佳方式.... :)

# android - 如何在android的应用小部件中找到点击了哪个按钮？

> ID：10100217
> 
> 赞同：3
> 
> 时间：2012-04-11T05:19:46.233
> 
> 标签：android

我想设计一个简单的应用程序小部件，它有两个文本视图和两个按钮用于上一个/下一个。我越来越难以处理应用小部件中的按钮点击。实际上我的愿望是，如果用户单击上一个按钮，我想显示上一个值，如果用户单击下一个按钮，我想显示数据库中的下一个值。如何知道点击了哪个按钮？在这里我像这样注册按钮点击监听器

```
 public static class UpdateWidgetService extends IntentService {

    public UpdateWidgetService() {
        super("UpdateWidgetService");

    }

    @Override
    protected void onHandleIntent(Intent intent) {
        AppWidgetManager appWidgetManager = AppWidgetManager
                .getInstance(this);

        int incomingAppWidgetId = intent.getIntExtra(EXTRA_APPWIDGET_ID,
                INVALID_APPWIDGET_ID);
        if (incomingAppWidgetId != INVALID_APPWIDGET_ID) {
            updateOneAppWidget(appWidgetManager, incomingAppWidgetId);

        }

    }

    private void updateOneAppWidget(AppWidgetManager appWidgetManager,
            int appWidgetId) {
        DatabaseManager dbManager = new DatabaseManager(this);

        dbManager.open();
        String contactNumber, date, status, message;
        ArrayList<QueuedMessage> listOfQuedMessage =        (ArrayList<QueuedMessage>) dbManager
                .fetchContactNumber();
        if (listOfQuedMessage.size() == 0)
            Log.i("Db", "null");
        else{
        date = dbManager.fetchDate();
        message = dbManager.fetchMessage();
        status = dbManager.fetchStatus();

        dbManager.closeDatabase();

        RemoteViews views = new RemoteViews(this.getPackageName(),
                R.layout.schdulesms_appwidget_layout);
        views.setTextViewText(R.id.to_appwidget_saved_data,
                listOfQuedMessage.get(count).contacNumber);
        views.setTextViewText(R.id.date_appwidget_saved_data, date);
        views.setTextViewText(R.id.status_appwidget_saved, status);
        views.setTextViewText(R.id.message_appwidgset_saved_data, message);

                    **//here i want do**
                   if(button1){
               btnNxtClick(views, appWidgetId,listOfQuedMessage.size());
                    }else{
                 btPrevClick(views, appWidgetId, listOfQuedMessage.size());
                    }

        appWidgetManager.updateAppWidget(appWidgetId, views);
        }

    }

    private void btnNxtClick(RemoteViews views, int appWidgetId,int sizeOfList) {
        Intent btnNextIntent = new Intent(this, this.getClass());
        btnNextIntent.putExtra(EXTRA_APPWIDGET_ID, appWidgetId);
        PendingIntent btnNextPendingIntent = PendingIntent.getService(this,
                0, btnNextIntent,    PendingIntent.FLAG_UPDATE_CURRENT);
        views.setOnClickPendingIntent(R.id.btnNext, btnNextPendingIntent);

    }
    private void btPrevClick(RemoteViews views, int appWidgetId,int sizeOfList) {
        Intent btnNextIntent = new Intent(this, this.getClass());
        btnNextIntent.putExtra(EXTRA_APPWIDGET_ID, appWidgetId);
        PendingIntent btnNextPendingIntent = PendingIntent.getService(this,
                0, btnNextIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        views.setOnClickPendingIntent(R.id.btnPrev, btnNextPendingIntent);

    }

} 
```

谁能帮我解决这个问题？？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T06:08:56.050

知道单击了哪个按钮，请按照以下步骤操作：

**第 1 步：** 为 btnNext 和 btnPrev 注册两个接收器

```
 <intent-filter >
 <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
 <action android:name="com.app.example.MyWidget.ACTION_WIDGET_CLICK_NEXT"/>
 <action android:name="com.app.example.MyWidget.ACTION_WIDGET_CLICK_PREV"/>
 </intent-filter> 
```

**第 2 步：** 对于 btnNext 和 btnPrev 操作字符串：

```
public class MyWidget extends AppWidgetProvider {
public static String ACTION_WIDGET_CLICK_NEXT = "Action_nextbtn";
public static String ACTION_WIDGET_CLICK_PREV = "Action_prevbtn";
} 
```

**第 3 步：** 在 onReceive 中

```
@Override
        public void onReceive(Context paramContext, Intent paramIntent)
        {
          String str = paramIntent.getAction();
            if (paramIntent.getAction().equals(ACTION_WIDGET_CLICK_NEXT)) {
                updateWidgetState(paramContext, str);   
            }
            if (paramIntent.getAction().equals(ACTION_WIDGET_CLICK_PREV)) {
                updateWidgetState(paramContext, str);   
            }
        } 
```

**第 4 步：** 创建一个更新小部件状态的方法：

```
static void updateWidgetState(Context paramContext, String paramString)
          {
            RemoteViews localRemoteViews = buildUpdate(paramContext, paramString);
            ComponentName localComponentName = new ComponentName(paramContext, MyWidget.class);
            AppWidgetManager.getInstance(paramContext).updateAppWidget(localComponentName, localRemoteViews);
          } 
```

**第 5 步：**

```
private static RemoteViews buildUpdate(Context paramContext, String paramString)
          {

            rview = new RemoteViews(paramContext.getPackageName(), R.layout.widget_layout);
            Intent activebtnnext = new Intent(paramContext, MyWidget.class);
            active.setAction(ACTION_WIDGET_CLICK_NEXT);
            PendingIntent configPendingIntentnext = PendingIntent.getBroadcast(paramContext, 0, activebtnnext , 0);
            rmViews.setOnClickPendingIntent(R.id.btnNext, configPendingIntentnext);

            Intent activeprevbtn = new Intent(paramContext, MyWidget.class);
            active.setAction(ACTION_WIDGET_CLICK_PREV);
            PendingIntent configPendingIntentprev = PendingIntent.getBroadcast(paramContext, 0, activeprevbtn , 0);
            rmViews.setOnClickPendingIntent(R.id.btnprev, configPendingIntentprev);
            if(parmString.equals(ACTION_WIDGET_CLICK_NEXT))
            {

             //

            }  
            if(parmString.equals(ACTION_WIDGET_CLICK_PREV))
            {

             //

            }           
             return rview; 
          } 
```

# iphone - 如何使用 UIImagePickerControllerCropRect

> ID：10100220
> 
> 赞同：8
> 
> 时间：2012-04-11T05:19:55.283
> 
> 标签：iphone, ios, camera, uiimagepickercontroller

我刚刚想出了一种方法来更改从`UIImagePickerViewController`. 这可以在 的帮助下完成`UIImagePickerControllerCropRect`。但我不知道如何使用它。最初裁剪框是方形的。我希望它是矩形的。

有人可以和我分享一个例子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T05:22:31.953

是的，我们可以做到。

像这样创建用户定义的函数：

```
- (UIImage *)imageByCropping:(UIImage *)imageToCrop toRect:(CGRect)rect
{
   CGImageRef imageRef = CGImageCreateWithImageInRect([imageToCrop CGImage], rect);

    UIImage *cropped = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);

    return cropped;

} 
```

并调用此代码：

```
UIImage *img1=[self imageByCropping:img toRect:CGRectMake(0,0, 106.6, 106.6)];
UIImageView *image_view=[[UIImageView alloc] initWithImage:img1]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T01:58:51.480

您无法使用内置的 UIImagePickerController 功能执行此操作。不幸的是，您无法控制裁剪框的大小。

[这是 github 上的一个项目](https://github.com/yogev77/UIImagePickerWithEditor)，可以帮助您完成您想做的事情（结帐`YSImageCrop.h`）。

基本上，底线是您必须自己实现 UIImagePickerController 功能。我相信[UIImagePickerWithEditor](https://github.com/yogev77/UIImagePickerWithEditor)项目是一个很好的起点。

# grails - Grails - 可搜索插件：无法以一对多关系搜索数据

> ID：10100221
> 
> 赞同：2
> 
> 时间：2012-04-11T05:19:56.670
> 
> 标签：grails, searchable

对不起，如果标题不是那么具体，但我不知道如何陈述我的问题。我正在使用可搜索插件，一切都很好，直到我需要搜索与 hasMany - BelongsTo 关联的域上的信息。
示例：
我有两个课程：

```
class Author {
  String name
  static hasMany = [books: Book]
  static searchable = true
} 
```

和

```
class Book {
  String name
  static belongTo = [author: Author]
  static searchable = true
} 
```

我需要能够根据书名或作者搜索一本书。
但是当调用时`Book.search(query, [properties:['name', author]])`只搜索书名，而不是作者。
我试过`author component: true`（在书课上），`root:false`（在作者课上）没有运气。

这个问题已经花费了我几个小时，而且我确信它必须是易于实现的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:43:51.320

您是否尝试将 name 替换为 author.name，应该可以，请参阅有关连接域的文档以便可搜索，luke 也是测试您的查询的好工具，如果没有这个工具，我无法正确[http:/ /code.google.com/p/luke/downloads/detail?name=lukeall-3.5.0.jar&can=2&q=](http://code.google.com/p/luke/downloads/detail?name=lukeall-3.5.0.jar&can=2&q=)

# selenium - 如何验证硒中存在的文本框

> ID：10100224
> 
> 赞同：0
> 
> 时间：2012-04-11T05:20:03.087
> 
> 标签：selenium

我正在尝试自动化手动脚本来检查 selenium 中是否存在文本框字段。你能帮我找到同样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:21:08.413

您可以使用

`assertElementPresent`以及元素的路径。`xpath=(//input[@type='text'])`要不就`//input[@type='text']`

它将检查页面上是否存在带有文本类型的元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:55:17.773

assertEditable|//input[@name='name-of-this-field' and @type='text']

而不是 assertElementPresent

如果该字段不是文本框或文本区域，这将失败...

# android - 如何在android中正确下载带有java代码的zip文件？

> ID：10100227
> 
> 赞同：2
> 
> 时间：2012-04-11T05:20:28.003
> 
> 标签：android, download, zip

我尝试将 zip 文件下载到 android，然后提取 zip 文件。我调试了我的代码，有一个有趣的问题：下载的 zip 文件比原始文件大一点。而且下载的zip文件不能被winrar解压。据说下载的文件以错误结束。（我网站上的 zip 文件没问题。我尝试用 IE 下载。它工作正常。）以下是我的代码：

```
public void download(final String url, final String savePath, final String saveName) {
    new Thread(new Runnable() {
        public void run() {
            try {
                sendMessage(FILE_DOWNLOAD_CONNECT);
                URL sourceUrl = new URL(url);
                URLConnection conn = sourceUrl.openConnection();
                conn.connect();
                InputStream inputStream = conn.getInputStream();

                int fileSize = conn.getContentLength();

                File savefilepath = new File(savePath);
                if (!savefilepath.exists()) {
                    savefilepath.mkdirs();
                }
                File savefile = new File(savePath+saveName);
                if (savefile.exists()) {
                    savefile.delete();
                }
                savefile.createNewFile();

                FileOutputStream outputStream = new FileOutputStream(
                    savePath+saveName, true);

                byte[] buffer = new byte[1024];
                int readCount = 0;
                int readNum = 0;
                int prevPercent = 0;
                while (readCount < fileSize && readNum != -1) {
                    readNum = inputStream.read(buffer);
                    if (readNum > -1) {
                        outputStream.write(buffer);

                        readCount = readCount + readNum;

                        int percent = (int) (readCount * 100 / fileSize);
                        if (percent > prevPercent) {
                            sendMessage(FILE_DOWNLOAD_UPDATE, percent,
                                readCount);

                            prevPercent = percent;
                        }
                    }
                }
                outputStream.flush();
                outputStream.close();
                inputStream.close();
                //Thread.sleep(50);
                sendMessage(FILE_DOWNLOAD_COMPLETE, savePath);

            } catch (Exception e) {
                sendMessage(FILE_DOWNLOAD_ERROR, e);
            }
        }
    }).start();
} 
```

有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T05:27:00.407

当您读入缓冲区时，您正在将整个缓冲区写入输出流：

```
outputStream.write(buffer); 
```

您应该只写入已填充的缓冲区部分：

```
outputStream.write(buffer, 0, readNum); 
```

特别是对于网络下载，不能保证调用`inputStream.read(buffer)`会填满缓冲区（即使文件中有超过 1024 个字节）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T12:27:40.707

```
public class Download extends Activity {
public static final int DIALOG_DOWNLOAD_PROGRESS = 0;

private ProgressDialog mProgressDialog;
    public String app_name ;
    public String urlpath ;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

app_name="test.rar";        
    urlpath = "https://www.abc.com/download/"+ app_name;
    if (android.os.Environment.getExternalStorageState().equals
            (android.os.Environment.MEDIA_MOUNTED))
    {        
        startDownload();
    }

    else
    {
         Toast.makeText(getApplicationContext(), "SD Card not found,Insert SD card and try again", Toast.LENGTH_SHORT).show();
    }

}

private void startDownload() {

    new DownloadFileAsync().execute(urlpath);
}
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
        case DIALOG_DOWNLOAD_PROGRESS:
            mProgressDialog = new ProgressDialog(this);
            mProgressDialog.setMessage("Downloading Updates..");
            mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            mProgressDialog.setCancelable(false);
            mProgressDialog.setIndeterminate(false);
            mProgressDialog.setMax(100);
            mProgressDialog.show();
            return mProgressDialog;
        default:
            return null;
    }
}
class DownloadFileAsync extends AsyncTask<String, String, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(DIALOG_DOWNLOAD_PROGRESS);
    }

    @Override
    protected String doInBackground(String... aurl) {

        try {

            URL url = new URL(urlpath.toString()); // Your given URL.

            HttpURLConnection c = (HttpURLConnection) url.openConnection();
            c.setRequestMethod("GET");
            c.setDoOutput(true);
            c.connect(); // Connection Complete here.!

            int lenghtOfFile = c.getContentLength();

            Log.d("Downloading Updates", "Lenght of file: " + lenghtOfFile);

            String PATH = Environment.getExternalStorageDirectory() + "/download/";

            File file = new File(PATH); // PATH = /mnt/sdcard/download/

            if (!file.exists()) {
                file.mkdirs();
            }
            File outputFile = new File(file, app_name);           
            FileOutputStream fos = new FileOutputStream(outputFile);

            InputStream is = c.getInputStream(); /

            byte[] buffer = new byte[1024];
            int len1 = 0;
            long total = 0;
            while ((len1 = is.read(buffer)) != -1) {
                total += len1;
                publishProgress(""+(int)((total*100)/lenghtOfFile));

                fos.write(buffer, 0, len1); // Write In FileOutputStream.
            }
            fos.flush();
            fos.close();
            is.close();
        } catch (Exception e) {}
        return null;

    }
    protected void onProgressUpdate(String... progress) {
         Log.d("Downloading Updates",progress[0]);
         mProgressDialog.setProgress(Integer.parseInt(progress[0]));
    }

    @Override
    protected void onPostExecute(String unused) {
        dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
        finish();
    }
}
} 
```

# facebook - 使用 oAuth 登录，我应该存储/使用什么来识别用户？

> ID：10100231
> 
> 赞同：14
> 
> 时间：2012-04-11T05:21:08.793
> 
> 标签：facebook, api, authentication, twitter, oauth

我试图在我的应用程序中使用 facebook/twitter 功能实现登录，我阅读了一些关于 oAuth 的指南，我想我理解了一些基本概念，这就是我所理解的（如果我错了，请纠正我）：

1.  myApp 向 oAuth 提供者发送请求，获取 (A) 请求令牌。
2.  发送用户对 (A) 进行身份验证，返回 (B) 已验证的请求令牌（这就是所谓的 oAuth 令牌吗？）
3.  使用 (B) 获取 (C) 访问令牌。
4.  使用 C 访问用户信息。

这是我无法理解的，我应该使用/存储哪一个来识别用户？我考虑过使用其中每一个的可能性，但我总是坚持如何检查用户之前是否登录过......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-11T05:22:26.527

如果您只需要身份验证，那么仅存储`user_id`就足够了。

所以创建另一个表，如：

```
id | service_name | user_id | my_user_id 
```

其中`service_name`是`twitter`或`facebook`, `user_id`- 是来自 twitter/facebook 的用户 ID，并且`my_user_id`是`user_id`您的身份验证系统中的 a。

所以：

```
SELECT my_user_id FROM oauths WHERE service_name = 'twitter' AND user_id = 42 
```

将返回您的系统 user_id 或什么都没有

PS：`service_name`可以（并且应该）被规范化，我将其保留为字符串只是为了简化示例

PPS：正如您在评论中所说，您可能想要“发布/推特”。

在这种情况下，您需要为 twitter 存储用户的访问令牌，并为 facebook 存储任何其他内容，但`publish_stream`在验证用户时请求权限。

# java - 将共享代码与 GWT 一起使用的最佳方式是什么？

> ID：10100239
> 
> 赞同：2
> 
> 时间：2012-04-11T05:21:20.750
> 
> 标签：java, gwt, jar, gwt-rpc

我正在处理一个使用 GWT 的项目。它没有问题，但现在我需要我的代码在别处。事实上，我需要将我的 GWT-RPC 方法复制到另一个（非 GWT）项目。

我想我有两个选择：

1）创建包含共享代码的jar，并从GWT（和其他）项目中引用它。问题是共享代码包含一些 GWT 客户端所需的类。据我所知，GWT 不支持（来自 jar 的客户端类）。

2) 保持 GWT 项目原样并使用 Eclipse 的导出工具制作包含共享类的 jar 文件。问题是 GWT 客户端类实现了 com.google.gwt.user.client.rpc.IsSerializable，但这可以通过使用该名称制作虚拟接口来解决。

任何意见？

当我写这篇文章时，我想到了从非 GWT 项目以某种方式直接调用 GWT-RPC ......这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T05:42:55.410

GWT 确实支持来自 jar 文件的客户端类。唯一的要求是 jar 文件也应该包含 java 源文件。例如，标准 gwt 类位于 jar gwt-user.jar 中。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:43:38.357

您只需创建另一个项目并像这样调用 GWT RPC 对象。相信我，它会起作用。我已经做到了。

# delphi - 如何为 TcxScheduler 计划事件创建（拦截）编辑器？

> ID：10100242
> 
> 赞同：1
> 
> 时间：2012-04-11T05:21:26.333
> 
> 标签：delphi, devexpress, scheduler

当我`TcxScheduler`dblclick 事件时，我希望能够在其中获取自定义字段的值。捕获 dblclick 事件非常简单，但我无法获取被点击的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:41:28.833

为什么不使用 SchedulerBeforeEditing

```
procedure TFrmScheduler.SchedulerBeforeEditing(Sender: TcxCustomScheduler;
         AEvent: TcxSchedulerControlEvent; AInplace: Boolean; var Allow: Boolean);
var
  MyValue: Variant;  
begin
  inherited;
  if not AInplace  then
  begin
    try
      if  AEvent.Index = -1 then
      begin
        // do something like Add new event
      end
      else
      begin
        MyValue:=AEvent.GetCustomFieldValueByName('SomeField');
        // do something 
      end;
    finally
      // ingore the edit
      Allow:= False;
    end;
  end;
end; 
```

# multithreading - 由于线程阻塞导致的性能问题

> ID：10100243
> 
> 赞同：0
> 
> 时间：2012-04-11T05:21:27.993
> 
> 标签：multithreading, jms, threadpool, glassfish-3, netty

一段时间以来，我们在 Glassfish 3.1 上运行的 Web 应用程序存在严重问题。应用程序通过 jms 进行异步通信。我们的本地服务通过 JBossNetty 进行通信。

问题是对我们的 Web 应用程序的每个请求都会打开一个新线程。没关系，但线程永远不会关闭。几个小时后，系统由于线程阻塞而挂起。

一些提示为什么线程被阻塞？我已经附上了下面的线程转储。

```
Full Java Thread Dump Java HotSpot(TM) 64-Bit Server VM 21.0-b17 Oracle Corporation

Number of threads: 878

Number of daemon threads: 765

Peak live thread count since the Java virtual machine started or peak was reset: 932

Is support for thread contention monitoring available on this JVM? [true]

Is thread contention monitoring enabled? [false]. If false, some thread synchronization statistics are not be available.

Is support for CPU time measurement for any thread available on this JVM? [true]

Is thread CPU time measurement enabled? [true]. If false, thread execution times are not available for any thread.

--------------------------------------------------------------------------------

Thread Execution Information:

-----------------------

Thread "pool-34-thread-851" thread-id: 47.019 thread-state: TIMED_WAITING Waiting on lock: java.util.concurrent.SynchronousQueue$TransferStack@39e45b53

     at: sun.misc.Unsafe.park(Native Method)

     at: java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)

     at: java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)

     at: java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)

     at: java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)

     at: java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)

     at: java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)

     at: java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)

     at: java.lang.Thread.run(Thread.java:722)

Thread Synchronization Statistics:

-----------------------

Number of times this thread was blocked (to enter/reenter a Monitor): 0

Number of times this thread waited for a notification (i.e. it was in WAITING or TIMED_WAITING state): 2

Total CPU time for this thread: 0 seconds 0 nanoseconds.

User-level CPU time for this thread: 0 seconds 0 nanoseconds.

Object Monitors currently held or requested by this thread: []

Ownable Synchronizers (e.g. ReentrantLock and ReentrantReadWriteLock) held by this thread: []

--------------------------------------------------------------------------------

Thread Execution Information:

-----------------------

Thread "pool-34-thread-850" thread-id: 47.018 thread-state: TIMED_WAITING Waiting on lock: java.util.concurrent.SynchronousQueue$TransferStack@39e45b53

     at: sun.misc.Unsafe.park(Native Method)

     at: java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)

     at: java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)

     at: java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)

     at: java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)

     at: java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)

     at: java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)

     at: java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)

     at: java.lang.Thread.run(Thread.java:722)

Thread Synchronization Statistics:

-----------------------

Number of times this thread was blocked (to enter/reenter a Monitor): 0

Number of times this thread waited for a notification (i.e. it was in WAITING or TIMED_WAITING state): 1

Total CPU time for this thread: 0 seconds 0 nanoseconds.

User-level CPU time for this thread: 0 seconds 0 nanoseconds.

Object Monitors currently held or requested by this thread: []

Ownable Synchronizers (e.g. ReentrantLock and ReentrantReadWriteLock) held by this thread: []

--------------------------------------------------------------------------------

Thread Execution Information:

-----------------------

Thread "hz._hzInstance_1_dev.cached.thread-618" thread-id: 47.014 thread-state: TIMED_WAITING Waiting on lock: java.util.concurrent.SynchronousQueue$TransferStack@3f27c3d6

     at: sun.misc.Unsafe.park(Native Method)

     at: java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)

     at: java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)

     at: java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)

     at: java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)

     at: java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)

     at: java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)

     at: java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)

     at: java.lang.Thread.run(Thread.java:722)

Thread Synchronization Statistics:

-----------------------

Number of times this thread was blocked (to enter/reenter a Monitor): 0

Number of times this thread waited for a notification (i.e. it was in WAITING or TIMED_WAITING state): 3

Total CPU time for this thread: 0 seconds 0 nanoseconds.

User-level CPU time for this thread: 0 seconds 0 nanoseconds.

Object Monitors currently held or requested by this thread: []

Ownable Synchronizers (e.g. ReentrantLock and ReentrantReadWriteLock) held by this thread: []

--------------------------------------------------------------------------------

Thread Execution Information:

-----------------------

Thread "New I/O server worker #1-13" thread-id: 47.004 thread-state: BLOCKED Waiting on lock: java.util.Collections$SynchronizedMap@41310d05

     at: com.mycompany.library.transmission.jbossNetty.JBossNettyServer.removeClient(JBossNettyServer.java:412)

     at: com.mycompany.library.transmission.jbossNetty.ServerChannelHandler.doDisconnect(ServerChannelHandler.java:459)

     at: com.mycompany.library.transmission.jbossNetty.ServerChannelHandler.channelDisconnected(ServerChannelHandler.java:196)

     at: org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:132)

     at: org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:545)

     at: org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:754)

     at: org.jboss.netty.handler.codec.replay.ReplayingDecoder.cleanup(ReplayingDecoder.java:555)

     at: org.jboss.netty.handler.codec.replay.ReplayingDecoder.channelDisconnected(ReplayingDecoder.java:450)

     at: org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:112)

     at: org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:545)

     at: org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:540)

     at: org.jboss.netty.channel.Channels.fireChannelDisconnected(Channels.java:360)

     at: org.jboss.netty.channel.socket.nio.NioWorker.close(NioWorker.java:587)

     at: org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:356)

     at: org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys(NioWorker.java:281)

     at: org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:201)

     at: org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)

     at: org.jboss.netty.util.internal.IoWorkerRunnable.run(IoWorkerRunnable.java:46)

     at: java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)

     at: java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)

     at: java.lang.Thread.run(Thread.java:722)

Thread Synchronization Statistics:

-----------------------

This thread is blocked waiting on lock owned currently by thread named: pool-66-thread-1, id: 41.339

Number of times this thread was blocked (to enter/reenter a Monitor): 5

Number of times this thread waited for a notification (i.e. it was in WAITING or TIMED_WAITING state): 3

Total CPU time for this thread: 0 seconds 31.200.200 nanoseconds.

User-level CPU time for this thread: 0 seconds 31.200.200 nanoseconds.

Object Monitors currently held or requested by this thread: []

Ownable Synchronizers (e.g. ReentrantLock and ReentrantReadWriteLock) held by this thread: []

--------------------------------------------------------------------------------

Thread Execution Information:

-----------------------

Thread "New I/O server worker #1-15" thread-id: 46.997 thread-state: BLOCKED Waiting on lock: java.util.Collections$SynchronizedMap@41310d05

     at: com.mycompany.library.transmission.jbossNetty.JBossNettyServer.removeClient(JBossNettyServer.java:412)

     at: com.mycompany.library.transmission.jbossNetty.ServerChannelHandler.doDisconnect(ServerChannelHandler.java:459)

     at: com.mycompany.library.transmission.jbossNetty.ServerChannelHandler.channelDisconnected(ServerChannelHandler.java:196)

     at: org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:132)

     at: org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:545)

     at: org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:754)

     at: org.jboss.netty.handler.codec.replay.ReplayingDecoder.cleanup(ReplayingDecoder.java:555)

     at: org.jboss.netty.handler.codec.replay.ReplayingDecoder.channelDisconnected(ReplayingDecoder.java:450)

     at: org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:112)

     at: org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:545)

     at: org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:540)

     at: org.jboss.netty.channel.Channels.fireChannelDisconnected(Channels.java:360)

     at: org.jboss.netty.channel.socket.nio.NioWorker.close(NioWorker.java:587)

     at: org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:356)

     at: org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys(NioWorker.java:281)

     at: org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:201)

     at: org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)

     at: org.jboss.netty.util.internal.IoWorkerRunnable.run(IoWorkerRunnable.java:46)

     at: java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)

     at: java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)

     at: java.lang.Thread.run(Thread.java:722)

Thread Synchronization Statistics:

-----------------------

This thread is blocked waiting on lock owned currently by thread named: pool-66-thread-1, id: 41.339

Number of times this thread was blocked (to enter/reenter a Monitor): 9

Number of times this thread waited for a notification (i.e. it was in WAITING or TIMED_WAITING state): 2

Total CPU time for this thread: 0 seconds 124.800.800 nanoseconds.

User-level CPU time for this thread: 0 seconds 124.800.800 nanoseconds.

Object Monitors currently held or requested by this thread: []

Ownable Synchronizers (e.g. ReentrantLock and ReentrantReadWriteLock) held by this thread: []

--------------------------------------------------------------------------------

Thread Execution Information:

-----------------------

Thread "New I/O server worker #1-22" thread-id: 46.985 thread-state: BLOCKED Waiting on lock: java.util.Collections$SynchronizedMap@41310d05

     at: com.mycompany.library.transmission.jbossNetty.JBossNettyServer.addClient(JBossNettyServer.java:395)

     at: com.mycompany.library.transmission.jbossNetty.ServerChannelHandler.doIdentify(ServerChannelHandler.java:397)

     at: com.mycompany.library.transmission.jbossNetty.ServerChannelHandler.messageReceived(ServerChannelHandler.java:283)

     at: org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:100)

     at: org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:545)

     at: org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:754)

     at: org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:302)

     at: org.jboss.netty.handler.codec.replay.ReplayingDecoder.unfoldAndfireMessageReceived(ReplayingDecoder.java:526)

     at: org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:507)

     at: org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:444)

     at: org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:80)

     at: org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:545)

     at: org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:540)

     at: org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:274)

     at: org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:261)

     at: org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:350)

     at: org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys(NioWorker.java:281)

     at: org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:201)

     at: org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)

     at: org.jboss.netty.util.internal.IoWorkerRunnable.run(IoWorkerRunnable.java:46)

     at: java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)

     at: java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)

     at: java.lang.Thread.run(Thread.java:722)

Thread Synchronization Statistics:

-----------------------

This thread is blocked waiting on lock owned currently by thread named: pool-66-thread-1, id: 41.339

Number of times this thread was blocked (to enter/reenter a Monitor): 304

Number of times this thread waited for a notification (i.e. it was in WAITING or TIMED_WAITING state): 4

Total CPU time for this thread: 0 seconds 156.001.000 nanoseconds.

User-level CPU time for this thread: 0 seconds 156.001.000 nanoseconds.

Object Monitors currently held or requested by this thread: []

Ownable Synchronizers (e.g. ReentrantLock and ReentrantReadWriteLock) held by this thread: []

--------------------------------------------------------------------------------

Thread Execution Information:

-----------------------

Thread "New I/O server worker #1-9" thread-id: 46.938 thread-state: RUNNABLE Running in native

     at: sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)

     at: sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(WindowsSelectorImpl.java:295)

     at: sun.nio.ch.WindowsSelectorImpl$SubSelector.access$400(WindowsSelectorImpl.java:277)

     at: sun.nio.ch.WindowsSelectorImpl.doSelect(WindowsSelectorImpl.java:158)

     at: sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)

     at: sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)

     at: org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:38)

     at: org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:164)

     at: org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)

     at: org.jboss.netty.util.internal.IoWorkerRunnable.run(IoWorkerRunnable.java:46)

     at: java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)

     at: java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)

     at: java.lang.Thread.run(Thread.java:722)

Thread Synchronization Statistics:

-----------------------

Number of times this thread was blocked (to enter/reenter a Monitor): 308

Number of times this thread waited for a notification (i.e. it was in WAITING or TIMED_WAITING state): 3

Total CPU time for this thread: 0 seconds 202.801.300 nanoseconds.

User-level CPU time for this thread: 0 seconds 202.801.300 nanoseconds.

Object Monitors currently held or requested by this thread: []

Ownable Synchronizers (e.g. ReentrantLock and ReentrantReadWriteLock) held by this thread: []

--------------------------------------------------------------------------------

Thread Execution Information:

-----------------------

Thread "New I/O server worker #1-12" thread-id: 46.937 thread-state: BLOCKED Waiting on lock: java.util.Collections$SynchronizedMap@41310d05

     at: com.mycompany.library.transmission.jbossNetty.JBossNettyServer.removeClient(JBossNettyServer.java:412)

     at: com.mycompany.library.transmission.jbossNetty.ServerChannelHandler.doDisconnect(ServerChannelHandler.java:459)

     at: com.mycompany.library.transmission.jbossNetty.ServerChannelHandler.channelDisconnected(ServerChannelHandler.java:196)

     at: org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:132)

     at: org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:545)

     at: org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:754)

     at: org.jboss.netty.handler.codec.replay.ReplayingDecoder.cleanup(ReplayingDecoder.java:555)

     at: org.jboss.netty.handler.codec.replay.ReplayingDecoder.channelDisconnected(ReplayingDecoder.java:450)

     at: org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:112)

     at: org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:545)

     at: org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:540)

     at: org.jboss.netty.channel.Channels.fireChannelDisconnected(Channels.java:360)

     at: org.jboss.netty.channel.socket.nio.NioWorker.close(NioWorker.java:587)

     at: org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:356)

     at: org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys(NioWorker.java:281)

     at: org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:201)

     at: org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)

     at: org.jboss.netty.util.internal.IoWorkerRunnable.run(IoWorkerRunnable.java:46)

     at: java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)

     at: java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)

     at: java.lang.Thread.run(Thread.java:722)

Thread Synchronization Statistics:

-----------------------

This thread is blocked waiting on lock owned currently by thread named: pool-66-thread-1, id: 41.339

Number of times this thread was blocked (to enter/reenter a Monitor): 311

Number of times this thread waited for a notification (i.e. it was in WAITING or TIMED_WAITING state): 7

Total CPU time for this thread: 0 seconds 156.001.000 nanoseconds.

User-level CPU time for this thread: 0 seconds 156.001.000 nanoseconds.

Object Monitors currently held or requested by this thread: []

Ownable Synchronizers (e.g. ReentrantLock and ReentrantReadWriteLock) held by this thread: []

--------------------------------------------------------------------------------

Thread Execution Information:

-----------------------

Thread "pool-65-thread-267" thread-id: 46.936 thread-state: TIMED_WAITING Waiting on lock: java.util.concurrent.SynchronousQueue$TransferStack@7b4de4b2

     at: sun.misc.Unsafe.park(Native Method)

     at: java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)

     at: java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)

     at: java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)

     at: java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)

     at: java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)

     at: java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)

     at: java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)

     at: java.lang.Thread.run(Thread.java:722)

Thread Synchronization Statistics:

-----------------------

Number of times this thread was blocked (to enter/reenter a Monitor): 3

Number of times this thread waited for a notification (i.e. it was in WAITING or TIMED_WAITING state): 2

Total CPU time for this thread: 0 seconds 0 nanoseconds.

User-level CPU time for this thread: 0 seconds 0 nanoseconds.

Object Monitors currently held or requested by this thread: []

Ownable Synchronizers (e.g. ReentrantLock and ReentrantReadWriteLock) held by this thread: []

--------------------------------------------------------------------------------

Thread Execution Information:

-----------------------

Thread "pool-65-thread-266" thread-id: 46.926 thread-state: TIMED_WAITING Waiting on lock: java.util.concurrent.SynchronousQueue$TransferStack@7b4de4b2

     at: sun.misc.Unsafe.park(Native Method)

     at: java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)

     at: java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)

     at: java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)

     at: java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)

     at: java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)

     at: java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)

     at: java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)

     at: java.lang.Thread.run(Thread.java:722)

Thread Synchronization Statistics:

-----------------------

Number of times this thread was blocked (to enter/reenter a Monitor): 3

Number of times this thread waited for a notification (i.e. it was in WAITING or TIMED_WAITING state): 3

Total CPU time for this thread: 0 seconds 0 nanoseconds.

User-level CPU time for this thread: 0 seconds 0 nanoseconds.

Object Monitors currently held or requested by this thread: []

Ownable Synchronizers (e.g. ReentrantLock and ReentrantReadWriteLock) held by this thread: []

--------------------------------------------------------------------------------

Thread Execution Information:

-----------------------

Thread "pool-65-thread-265" thread-id: 46.920 thread-state: TIMED_WAITING Waiting on lock: java.util.concurrent.SynchronousQueue$TransferStack@7b4de4b2

     at: sun.misc.Unsafe.park(Native Method)

     at: java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)

     at: java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)

     at: java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)

     at: java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)

     at: java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)

     at: java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)

     at: java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)

     at: java.lang.Thread.run(Thread.java:722)

Thread Synchronization Statistics:

----------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:50:55.510

Sven Moschel，我不是 100% 确定这是你的问题，但是有一些已知的负载很重的 bug 和 glassfish 3.1.2 [http://java.net/jira/browse/GLASSFISH-18351](http://java.net/jira/browse/GLASSFISH-18351)

# iphone - 简单的报警应用 iPhone sdk？

> ID：10100246
> 
> 赞同：1
> 
> 时间：2012-04-11T05:21:47.973
> 
> 标签：iphone, objective-c, alarm

用我的 iPhone 应用程序实现警报的最佳方法是什么？NSTimer 还是 DatePicker？帮我写一些代码！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T05:30:51.207

我认为您将需要使用 DatePicker。

您也可以使用 UILocalNotifications，这可能会很有帮助。

您可以从 DatePicker 中选择警报日期，然后将其设置`fireDate`为您的 UILocalNotification。

有关更多信息，您可能需要参考[UIDatePicker 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDatePicker_Class/Reference/UIDatePicker.html)和[UILocalNotification 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)

**编辑：**

参考**Ole Begemann**的这篇帖子和答案：

[如何使用 iPhone SDK 4.0 实现警报](https://stackoverflow.com/questions/3219905/how-to-implement-an-alarm-with-iphone-sdk-4-0)

另请参阅此示例代码，我没有亲自检查过，但可能对您有帮助：

[佛法时钟](http://code.google.com/p/idharmaclock/)

**EDIT-2：关于在本地通知中播放自定义声音的解决方案**

在您的 iPhone 应用程序的资源中添加任何文件，然后使用以下代码：

让我们假设这`notification`是一个类型的对象`UILocalNotification`。

```
notification.soundName = @"sound.caf"; 
```

如果这最初不起作用，那么您可以参考这篇文章并参考**Noah Witherspoon**的答案。这告诉我们使用正确格式的声音文件（即线性 PCM 或 IMA4）。

[为本地通知选择自定义声音](https://stackoverflow.com/questions/7170475/choose-custom-sound-for-local-notifications)

希望这可以帮助。

如果您需要更多帮助，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:27:09.753

您应该在立即询问之前进行一些调查，[避免对我投反对票；）]

[构建 iOS 警报的](http://vimeo.com/29824336)视频 教程

所以你基本上需要一个计时功能= NSTimer

*任何时候你正在实施一个计时器，最好的选择总是记录你的开始时间。然后，每当您更新界面时，只需获取当前时间和开始时间的差值。

日期选择器用于使用选择器设置时间......所以

当实际系统时间==您的选择器选择时间时::声音警报！

# clickonce - 是否可以预先生成 NGen 图像以便客户不必这样做？

> ID：10100248
> 
> 赞同：9
> 
> 时间：2012-04-11T05:21:52.567
> 
> 标签：clickonce, ngen

我们的应用程序通过 ClickOnce 分发，平均需要**10.8 秒**才能启动。在`ngen`.exe（在 ClickOnce 安装到的目录中）上运行后，它平均在**6.4 秒内启动。**这显然是一个巨大的加速（**40%**），如果可能的话，我想使用 ngen-ification。

[Ron 对Is it possible to use NGen with ClickOnce deployment](https://stackoverflow.com/questions/443955)的回答？展示了如何在客户的机器上完成它，假设我猜他运行的是*Windows XP*，因为它需要我的*Windows 7机器上的***管理员权限**，所以这似乎不是一个通用的解决方案。

 *此外，在我的机器上，ngen 需要**40 秒**来编译属于该应用程序的所有程序集。

所以理想情况下，我想**为所有（主要）架构预先生成我们的应用程序，作为构建过程的一部分**，这样它就可以交付给客户，而无需用户接受“可以以管理员身份执行？” 弹出，然后等待 40 秒。

那可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T06:04:03.163

如果没有 Windows 7 上的管理访问权限，您将无法执行此操作。

问题不在于本机映像的实际 ngen 生成，而是安装到需要管理权限的本机映像缓存 (C:\windows\assembly\nativeImages_v#xxxxxxxxx)。因此，即使您找到了一种为所有目标架构预生成本机映像的方法，您也无法将它们放到运行时考虑使用它们的适当位置。

您不能将它们与常规二进制文件并排放置，因为那样它们将无法正确管理 - 当进行某些安全策略更改、应用 .net 框架更新或其他更改时，您会遇到麻烦被引用的程序集使本机映像无效，并且需要运行“ngen update”命令。微软目前似乎不支持使用 ClickOnce 部署的 ngen 用例。*

# objective-c - 下标需要接口 NSMutableArray 的大小，这在非易碎 ABI 中不是常量

> ID：10100249
> 
> 赞同：0
> 
> 时间：2012-04-11T05:21:59.367
> 
> 标签：objective-c, ios

下面是我收到错误的片段：

```
 -(IBAction)rateButtonClick:(id)sender{

    NSMutableArray *starImage = [[NSMutableArray alloc]initWithObjects:starImage1, starImage2, starImage3, starImage4, starImage5, nil];

    NSArray *halfRateButton = [[NSArray alloc]initWithObjects:halfRateButton1, halfRateButton2, halfRateButton3, halfRateButton4, halfRateButton5, nil];

    int buttonClicked = (((UIButton *)sender).tag);
    int i;

    for (i = 0; i < buttonClicked; i++) {
        **starImage[buttonClicked].image = [UIImage imageNamed:@"rate.png"];** 
    }

    if (lastButtonClicked != buttonClicked) {
        **starImage[buttonClicked].image = [UIImage imageNamed:@"star-half-full.png"];**
    }else
        **starImage[buttonClicked].image = [UIImage imageNamed:@"rate.png"];**
        lastButtonClicked = buttonClicked;

    for (i = 0; i <= buttonClicked; i++) {
        **halfRateButton[i].hidden = YES;**
    }
} 
```

错误出现在标记的行中。将它们更改为

```
 **[starImage objectAtIndex:i].image = [UIImage imageNamed:@"rate.png"];** 
```

行不通。我收到一个错误：

> 在类型 (id) 的对象上找不到图像属性。

在这里， satrImage1 到 starImage5 是`UIImageViews`. halfRateButton1 到 halfRateButton5 是按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:01:15.123

我不知道你到底想要什么，但我认为下面的答案可以帮助你摆脱错误。试试这个

```
[[starImage objectAtIndex:i] setImage:[UIImage imageNamed:@"rate.png"]]; 
```

或者

```
UIImageView *temp = [starImage objectAtIndex:i];
tmp.image = [UIImage imageNamed:@"rate.png"]; 
```

# c# - 无法使用 HQL 通过外键从表中获取数据

> ID：10100251
> 
> 赞同：0
> 
> 时间：2012-04-11T05:22:14.767
> 
> 标签：c#, nhibernate, hql

我有课

```
public class HobbyHome:Establishment 
```

{

```
public virtual ICollection<HobbyHomeAddress> HobbyHomeAddressList { set; get; }
public virtual ICollection<HobbyDeveloper> HobbyDeveloperList { set; get; }
public virtual ICollection<HobbyDetail> HobbyDetailList { set; get; } 
```

}

里面的爱好详情：

```
 [Key]
    public virtual int HobbyDetailID { get; set; }

   // public virtual int HobbyId { get; set; }     
    public virtual HobbyMasters Hobbymaster { get; set; }
    public virtual Course course { get; set; }
    public virtual StudyMedium StudyMedium { get; set; }
    public virtual decimal Fees { get; set; } 
```

}

我可以将我的数据保存在两个表中...但是在通过 HobbyHomeId 获取 hobbydetail 时...我收到错误，因为找不到字段

Hobbyhome 的映射文件：

```
<?xml version="1.0" encoding="utf-8" ?>

 <hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly ="HobbyHomes"  namespace="HobbyHomes.Model" >
  <class name ="HobbyHome" table="HobbyHome">
   <id name="EstablishmentId" column="HobbyHomeId">
        <generator class="native"/>
   </id>
  <property name="Name"/>

  <set name="HobbyHomeAddressList">
        <key column="HobbyHomeId" foreign-key="fk_HobbyHomeAddress_HobbyHomeId"/>
      <one-to-many class ="HobbyHomes.Model.HobbyHomeAddress"/>
      </set>
      <set name="HobbyDeveloperList">
           <key column="HobbyHomeId" foreign-key="fk_HobbyDeveloper_HobbyHomeId"/>
           <one-to-many class ="HobbyHomes.Model.HobbyDeveloper"/>
   </set>
   <set name="HobbyDetailList">
       <key column="HobbyHomeId" foreign-key="fk_HobbyDetail_HobbyHomeId"/>
       <one-to-many class ="HobbyHomes.Model.HobbyDetail"/>
  </set>
 </class>
</hibernate-mapping> 
```

这是我获取数据的函数：

```
 public HobbyDetail FetchbyHobbyId(int id)
    {
        log.Debug("Start");
        ISession session = DataAccessLayerHelper.OpenWriterSession();
        ITransaction transaction = session.BeginTransaction();
        HobbyDetail hobbydetail = null;
        try
        {

            ICriteria criteria = session.CreateCriteria(typeof(HobbyDetail))
               .Add(Restrictions.Eq("HobbyHomeId", id));

            hobbydetail = criteria.UniqueResult<HobbyDetail>();

            transaction.Commit();
        }
        catch (SessionException ex)
        {
            if (transaction != null && transaction.IsActive)
                transaction.Rollback();

            log.Error(ex);
            hobbydetail = null;
        }

        finally
        {
            if (transaction != null)
                transaction.Dispose();

            if (session != null && session.IsConnected)
                session.Close();

            log.Debug("End");
        }
        return hobbydetail;
    } 
```

sumbody 可以帮我解决这个问题....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:35:32.200

HQL 是一种面向对象的查询语言。您只能使用存在于您的类模型中的标识符。

您可以将 HobbyDetail 中的反向引用添加到 HobbyHome，从而使引用成为双向的。

您还可以使用子查询来获取 HobbyHome 列表中的所有详细信息。使用 HQL 比使用标准更容易。

另一方面，仅加载 HobbyHome 就容易得多。

```
 ICriteria criteria = session.CreateCriteria(typeof(HobbyHome))
           .Add(Restrictions.IdEq(id));

        var home = criteria.UniqueResult<HobbyHome>();
        var details = home.HobbyDetailList; 
```

# silverlight - 在 SIlverlight MEF 中动态下载 .xap 文件

> ID：10100258
> 
> 赞同：1
> 
> 时间：2012-04-11T05:23:04.697
> 
> 标签：silverlight

我有三个 silverlight 项目 P1、P2 和 P3。我在所有项目中都使用包目录。

例如，在 P1 中，我使用 MEF 下载 P2 和 P3，我在其他两个项目中做了同样的事情。当我运行 P1 时，会下载 P2 和 P3，当我使用 P2 时，会按照包目录中的指定下载 P1 和 P3。

我想避免项目的重复下载。是否可以防止每次下载 P1、P2 和 P3？我可以为此项目/目录设置任何属性吗？

# php - php邮件无法与Outlook完美配合

> ID：10100263
> 
> 赞同：4
> 
> 时间：2012-04-11T05:23:13.177
> 
> 标签：php, outlook

我在使用 PHP 发送邮件时遇到问题。Outlook 可以正确接收邮件，但在电子邮件中未显示“发件人”地址。

```
$subject = $_POST['message_subject'];
$message = $_POST['speaker_description'];
$email   = $_POST['email'];
$option  = $_POST['sel_reg_options'];
$email   = substr_replace($email ,"",-1);

$headers .= "Content-type: text/html; charset=iso-8859-1\r\n";
$headers .= "From:My Name<myifno@mysite.com>\r\n";
$headers .= "Reply-To: Registration of Interest<info@mysite.com>\r\n";          
$headers .= "MIME-Version: 1.0"."\r\n";
$mail_sent = @mail($email,$subject,$message,$headers); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:34:41.030

您应该用双引号将名称括起来（这也适用于回复地址名称）：

```
$headers .= "From: \"My Name\" <myifno@mysite.com>\r\n"; 
```

此外，如果在 Unix 上运行 PHP，请将 FROM 信封添加到`$additional_parameters`参数中：

```
$mail_sent = @mail($email,$subject,$message,$headers,'-f myifno@mysite.com'); 
```

相反，如果在 Windows 上运行，请在或使用以下方法设置`sendmail_from`INI 指令：`php.ini`

```
ini_set('sendmail_from', 'myifno@mysite.com'); 
```

**来源：** [RFC2822](http://www.faqs.org/rfcs/rfc2822.html)、[php.net 用户评论](http://php.net/manual/en/function.mail.php#72715)、[IBM sendmail 命令参考](http://pic.dhe.ibm.com/infocenter/aix/v6r1/index.jsp?topic=/com.ibm.aix.cmds/doc/aixcmds5/sendmail.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T20:13:26.620

我最近刚刚将我的电子邮件脚本切换到[PHPMailer](https://github.com/PHPMailer/PHPMailer)。它使创建和发送电子邮件变得更加容易。我不再担心不正确的标题以及 PHP 和电子邮件的复杂性。我在格式化电子邮件方面没有任何问题，因此它们也可以在几个电子邮件客户端中正确接收。

# android - 自定义 Sipdroid

> ID：10100265
> 
> 赞同：4
> 
> 时间：2012-04-11T05:23:25.000
> 
> 标签：android, sip, sipdroid

我有一个基于 Voip 的应用程序。所以我想到了定制 SipDroid 开源项目。作为开始阶段，我已经更改了所有的包名、类名等。它在我的三星 Galaxy Y 上完美运行。但我尝试了许多其他手机，语音是听不到的。呼叫正在初始化，但听不到声音。在 Samsung Galaxy Young 中，无论是来电还是去电，都可以清楚地听到语音。但在我测试过的所有其他手机中，我只能听到哔声。可能是什么问题呢？

编辑：我尝试用我的三星 Galaxy Young（定制应用程序）呼叫另一部手机（有 Sip Droid），我可以在我的应用程序中听到声音，但在 Sipdroid 中听不到。但是当我尝试将 Sipdroid 调用到 Sipdroid 时，它在所有手机上都可以正常工作。

编辑：

```
Btw, There is no difference between SipDroid call and the call in my app. 
```

编辑：我注意到即使是 SipDroid 项目也无法正常工作。只有 Sipdroid 应用程序（在市场上）在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T07:47:08.617

我终于找到了解决方案。我使用[CSipSimple](http://code.google.com/p/csipsimple/)而不是 Sipdroid。它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:16:19.633

如果你想从源代码中使用 CSipSimple，首先你必须使用 linux 工作站编译 pjsip 源库。请参阅此链接：[HowToBuild CSipSimple 使用 Linux 工作站](http://code.google.com/p/csipsimple/wiki/HowToBuild#For_Linux)

# zend-framework - 如何同时使用 Zend Framework 和 Amazon DynamoDB？

> ID：10100269
> 
> 赞同：1
> 
> 时间：2012-04-11T05:24:03.400
> 
> 标签：zend-framework, zend-db, amazon-dynamodb

我正在使用 Zend Framework，也想使用 Amazon DynamoDB。我下载了适用于 PHP 的 AWS 开发工具包，并使用它来保存数据。但我不知道如何将这两者联系起来。

如何从 Zend 调用 AWS 开发工具包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:58:09.810

我已经下载了当前的 php SDK 并将其放在库目录中。结构：/library/DynamoDb/sdk-1.5.3

在您的应用程序中：

控制器（在类声明之上）：

```
require_once('DynamoDb/sdk-1.5.3/sdk.class.php');
class SomeController extends Zend_Controller_Action {

 function indexAction() {
  $MyTable = new AmazonDynamoDb();
  $all_items = $MyTable->scan();
 }
} 
```

我建议创建一个简单的 ORM 以便于处理。

也有不使用 SDK 的方法，但是，必须弄清楚如何进行临时身份验证和所有签名。SDK 至少是最新的，并使用 V2 和 V3 身份验证。

我希望这会有所帮助。

# vb6 - 无法保存获取系统的 vb6 应用程序...未指定的错误

> ID：10100271
> 
> 赞同：0
> 
> 时间：2012-04-11T05:24:05.087
> 
> 标签：vb6

我在 vb6 应用程序上运行良好，但是当我倾向于保存应用程序时抛出错误：

```
System Error &H80004005(-2147467259). Unspecified Error 
```

此应用程序正在消耗 picturbox 控件，并且在保存项目时发现`.frx`文件正在删除。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:39:26.790

用谷歌搜索错误后，这个建议出现了：

[http://support.microsoft.com/default.aspx?scid=http://support.microsoft.com:80/support/kb/articles/Q236/2/86.asp&NoWebContent=1](http://support.microsoft.com/default.aspx?scid=http://support.microsoft.com:80/support/kb/articles/Q236/2/86.asp&NoWebContent=1)

[http://www.datadynamics.com/forums/15296/PrintPost.aspx](http://www.datadynamics.com/forums/15296/PrintPost.aspx)

# matlab - Matlab 代码适用于一个版本，但不适用于另一个版本

> ID：10100272
> 
> 赞同：-2
> 
> 时间：2012-04-11T05:24:14.750
> 
> 标签：matlab

我有一个在 Matlab R2010a 版本中工作的代码，但在 matlab R2008a 中显示错误。我正在尝试使用扩展卡尔曼滤波器实现自组织模糊神经网络。我的代码正在运行，但它仅适用于 matlab 版本 R2010a。它不适用于其他版本。有什么帮助吗？

我收到的错误消息是“Parse error at ']' at line 49, 130 188 & 189”

代码附加

```
function [ c, sigma , W_output ] = SOFNN( X, d, Kd )
%SOFNN Self-Organizing Fuzzy Neural Networks
%Input Parameters
% X(r,n) - rth traning data from nth observation
% d(n) - the desired output of the network (must be a row vector)
% Kd(r) - predefined distance threshold for the rth input

%Output Parameters
% c(IndexInputVariable,IndexNeuron)
% sigma(IndexInputVariable,IndexNeuron)
% W_output is a vector

%Setting up Parameters for SOFNN
SigmaZero=4;
delta=0.12;
threshold=0.1354;
k_sigma=1.12;

%For more accurate results uncomment the following
%format long;

%Implementation of a SOFNN model
[size_R,size_N]=size(X);
%size_R - the number of input variables
c=[]; 
sigma=[]; 
W_output=[];
u=0; % the number of neurons in the structure
Q=[];
O=[];
Psi=[];
for n=1:size_N
    x=X(:,n);    
    if u==0 % No neuron in the structure?
        c=x;
        sigma=SigmaZero*ones(size_R,1);
        u=1;
        Psi=GetMePsi(X,c,sigma);
        [Q,O] = UpdateStructure(X,Psi,d);
        pT_n=GetMeGreatPsi(x,Psi(n,:))';        
    else
        [Q,O,pT_n] = UpdateStructureRecursively(X,Psi,Q,O,d,n);
    end;

    KeepSpinning=true;
    while KeepSpinning
        %Calculate the error and if-part criteria
        ae=abs(d(n)-pT_n*O); %approximation error
        [phi,~]=GetMePhi(x,c,sigma);
        [maxphi,maxindex]=max(phi); % maxindex refers to the neuron's index

        if ae>delta
            if maxphi<threshold
                %enlarge width
                [minsigma,minindex]=min(sigma(:,maxindex));
                sigma(minindex,maxindex)=k_sigma*minsigma;
                Psi=GetMePsi(X,c,sigma);
                [Q,O] = UpdateStructure(X,Psi,d);
                pT_n=GetMeGreatPsi(x,Psi(n,:))';                               
            else
                %Add a new neuron and update structure
                ctemp=[];
                sigmatemp=[];
                dist=0;
                for r=1:size_R
                    dist=abs(x(r)-c(r,1));
                    distIndex=1;
                    for j=2:u
                        if abs(x(r)-c(r,j))<dist
                            distIndex=j;
                            dist=abs(x(r)-c(r,j));
                        end;
                    end;
                    if dist<=Kd(r)
                        ctemp=[ctemp; c(r,distIndex)];
                        sigmatemp=[sigmatemp ; sigma(r,distIndex)];
                    else
                        ctemp=[ctemp; x(r)];
                        sigmatemp=[sigmatemp ; dist];
                    end;
                end;
                c=[c ctemp];
                sigma=[sigma sigmatemp];
                Psi=GetMePsi(X,c,sigma);
                [Q,O] = UpdateStructure(X,Psi,d);
                KeepSpinning=false;
                u=u+1;
            end;
        else
            if maxphi<threshold
                %enlarge width
                [minsigma,minindex]=min(sigma(:,maxindex));
                sigma(minindex,maxindex)=k_sigma*minsigma;
                Psi=GetMePsi(X,c,sigma);
                [Q,O] = UpdateStructure(X,Psi,d);
                pT_n=GetMeGreatPsi(x,Psi(n,:))';                
            else
                %Do nothing and exit the while
                KeepSpinning=false;                
            end;
        end;        
    end;
end;
W_output=O;
end

function [Q_next, O_next,pT_n] = UpdateStructureRecursively(X,Psi,Q,O,d,n)
%O=O(t-1) O_next=O(t)
p_n=GetMeGreatPsi(X(:,n),Psi(n,:));
pT_n=p_n';
ee=abs(d(n)-pT_n*O); %|e(t)|
temp=1+pT_n*Q*p_n;
ae=abs(ee/temp);

if ee>=ae
    L=Q*p_n*(temp)^(-1);
    Q_next=(eye(length(Q))-L*pT_n)*Q;
    O_next=O + L*ee;
else
    Q_next=eye(length(Q))*Q;
    O_next=O;
end;
end

function [ Q , O ] = UpdateStructure(X,Psi,d)
GreatPsiBig = GetMeGreatPsi(X,Psi);

%M=u*(r+1)
%n - the number of observations
[M,~]=size(GreatPsiBig);

%Others Ways of getting Q=[P^T(t)*P(t)]^-1
%**************************************************************************
%opts.SYM = true;
%Q = linsolve(GreatPsiBig*GreatPsiBig',eye(M),opts);
%
%Q = inv(GreatPsiBig*GreatPsiBig');
%Q = pinv(GreatPsiBig*GreatPsiBig');
%**************************************************************************
Y=GreatPsiBig\eye(M);
Q=GreatPsiBig'\Y;

O=Q*GreatPsiBig*d';
end

%This function works too with x
% (X=X and Psi is a Matrix) - Gets you the whole GreatPsi
% (X=x and Psi is the row related to x) - Gets you just the column related with the observation
function [GreatPsi] = GetMeGreatPsi(X,Psi)
%Psi - In a row you go through the neurons and in a column you go through number of
%observations **** Psi(#obs,IndexNeuron) ****
GreatPsi=[];
[N,U]=size(Psi);
for n=1:N
    x=X(:,n);
    GreatPsiCol=[];
    for u=1:U
        GreatPsiCol=[ GreatPsiCol ; Psi(n,u)*[1; x] ];
    end;
    GreatPsi=[GreatPsi GreatPsiCol];
end;
end

function [phi, SumPhi]=GetMePhi(x,c,sigma)
[r,u]=size(c);
%u - the number of neurons in the structure
%r - the number of input variables

phi=[];
SumPhi=0;

for j=1:u % moving through the neurons
    S=0;
    for i=1:r % moving through the input variables
        S = S + ((x(i) - c(i,j))^2) / (2*sigma(i,j)^2);
    end;    
    phi = [phi exp(-S)];        
    SumPhi = SumPhi + phi(j);   %phi(u)=exp(-S)
end;
end

%This function works too with x, it will give you the row related to x
function [Psi] = GetMePsi(X,c,sigma)
[~,u]=size(c);
[~,size_N]=size(X);
%u - the number of neurons in the structure
%size_N - the number of observations
Psi=[];
for n=1:size_N        
    [phi, SumPhi]=GetMePhi(X(:,n),c,sigma);    
    PsiTemp=[];
    for j=1:u
        %PsiTemp is a row vector ex: [1 2 3]
        PsiTemp(j)=phi(j)/SumPhi;
    end;

    Psi=[Psi; PsiTemp];    
    %Psi - In a row you go through the neurons and in a column you go through number of
    %observations **** Psi(#obs,IndexNeuron) ****
end;

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T05:47:04.673

第 49、130、188 和 190 行粘贴在下面。注意到趋势了吗？

```
[phi,~]=GetMePhi(x,c,sigma);
[M,~]=size(GreatPsiBig);
[~,u]=size(c);
[~,size_N]=size(X) 
```

基本上，从 MATLAB 2009b 开始，设置了波浪号运算符，以便您以后不用的变量不必存储在内存中。这也意味着任何带有波浪线的代码在该版本之前都不会向后兼容。

# python - 如何在 python setup.py 测试中使用 unittest2

> ID：10100276
> 
> 赞同：4
> 
> 时间：2012-04-11T05:24:42.840
> 
> 标签：python, testing, setuptools, setup.py, unittest2

如何强制`python setup.py test`使用`unittest2`包进行测试而不是内置`unittest`包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:33:27.647

假设您有一个名为的目录`tests`，其中包含一个`__init__.py`文件，该文件定义了一个`suite`返回测试套件的函数。

`python setup.py test`我的解决方案是用我自己的命令替换默认命令，`test`该命令使用`unittest2`：

```
from setuptools import Command
from setuptools import setup

class run_tests(Command):
    """Runs the test suite using the ``unittest2`` package instead of the     
    built-in ``unittest`` package.                                            

    This is necessary to override the default behavior of ``python setup.py   
    test``.                                                                   

    """
    #: A brief description of the command.                                    
    description = "Run the test suite (using unittest2)."

    #: Options which can be provided by the user.                             
    user_options = []

    def initialize_options(self):
        """Intentionally unimplemented."""
        pass

    def finalize_options(self):
        """Intentionally unimplemented."""
        pass

    def run(self):
        """Runs :func:`unittest2.main`, which runs the full test suite using  
        ``unittest2`` instead of the built-in :mod:`unittest` module.         

        """
        from unittest2 import main
        # I don't know why this works. These arguments are undocumented.      
        return main(module='tests', defaultTest='suite',
                    argv=['tests.__init__'])

setup(
  name='myproject',
  ...,
  cmd_class={'test': run_tests}
) 
```

现在运行`python setup.py test`运行我的自定义`test`命令。

# c++ - 在 C++ 中模拟鼠标和键盘输入

> ID：10100283
> 
> 赞同：3
> 
> 时间：2012-04-11T05:25:22.247
> 
> 标签：c++, cross-platform

我正在寻找一种在 C++ 中模拟鼠标和键盘输入的方法。我正在寻找一个可以帮助我实现这一目标的跨平台库。有什么建议么？

目标平台是桌面平台……仅限 Linux、Mac 和 Windows。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T05:43:09.513

不，输入设备模拟非常特定于平台，即使在单个平台上也很挑剔。对于任何目的，它都不是一种强大的技术，因此您将找不到好的库来实现它。

一旦你拥有了基本的 API，最困难的部分就是让设备看起来对操作系统来说是真实的。您希望以适度高的频率发送逐渐的鼠标移动更新，就像鼠标一样，并且在点击和按键之间有合理的延迟。执行事件时间线和制作基本几何图形可能会得到 SDL 等游戏库的帮助。

如果您忽略时间，操作系统可能会减少鼠标运动、去抖动按钮、重新排列运动和点击的顺序、在使用触控板时忽略按键等。我差不多 10 年前就编写了这样一个工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T12:22:58.997

我开了这样一个图书馆，也许你想看一眼。 [https://github.com/pythoneer/XInputSimulator](https://github.com/pythoneer/XInputSimulator)

它处于早期状态，并且在编写时有点错误。但我希望它越来越好:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-23T01:24:51.413

尽管输入库是特定于平台的，GUI 也是特定的，但是有一些抽象库可用于 wxWdigets 和 Qt，它们隐藏了复杂性，对于输入，我发现这个非常有趣

[https://github.com/jkuhlmann/gainput](https://github.com/jkuhlmann/gainput)

# android - 如何将我的 Android 应用程序与网站同步？

> ID：10100284
> 
> 赞同：1
> 
> 时间：2012-04-11T05:25:27.883
> 
> 标签：android, sqlite, synchronization

在这里，我启动了我的[闪存卡应用程序的第一个版本](https://play.google.com/store/apps/details?id=in.co.discoverit.my_FlashCards)

我正在开发闪存卡应用程序。在这里，我使用了一个 sqlite 数据库来存储我的卡片和数据。

现在我想将我的数据库与网站数据库同步。

那么我将如何为我的应用程序执行此操作？另外，请告诉我在设备端和网站端执行此操作的可能方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:34:23.267

制作一个 Web 服务，它将为您提供数据库中 xml 或 json 格式的必要表字段。您需要解析获得的 xml 响应并在您已解析的 DB 中的移动应用程序存储值中创建一个数据库。

[http://p-xr.com/android-tutorial-how-to-parseread-xml-data-into-android-listview/](http://p-xr.com/android-tutorial-how-to-parseread-xml-data-into-android-listview/)

通过此链接，您将了解您需要从 WS 获得什么以及如何解析 WS 响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T15:59:40.157

想知道您是否考虑过使用同步框架来管理同步。如果您对此感兴趣，可以查看开源项目 OpenMobster 的 Sync 服务。您可以执行以下同步操作

*   双向
*   单向客户端
*   单向装置
*   开机

除此之外，所有修改都会自动跟踪并与云同步。当网络连接中断时，您可以让您的应用程序离线。它将跟踪任何更改，并在连接返回时自动在后台将其与云同步。它还提供跨多个设备的同步，如 iCloud

在云/网站方面，有一个 Java 通道框架可将您的数据公开给同步引擎。您编写了一个简单的基于 CRUD 的同步通道，您的所有数据都将与设备上的数据保持同步。

这是开源项目的链接：http: [//openmobster.googlecode.com](http://openmobster.googlecode.com)

下面是一些示例代码，看看它们是如何结合在一起的：http: [//openmobster.googlecode.com/svn/samples/offlineapp.zip](http://openmobster.googlecode.com/svn/samples/offlineapp.zip)

全面披露：我是 OpenMobster 项目的总工程师

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T05:54:55.987

我强烈建议您看看[Google App Engine](https://developers.google.com/appengine/)。这是一个很好的解决方案，最好的部分是它在一定数量的使用下是免费的。

# w3c - w3c 的 colgroup 示例无效？

> ID：10100285
> 
> 赞同：1
> 
> 时间：2012-04-11T05:25:30.020
> 
> 标签：w3c, html4, colgroup

我知道您不能在 colgroup 上的 CSS 中使用 text-align，但是，在 HTML 4.01 规范中，使用 align="center"[给出了一个示例表。](http://www.w3.org/TR/html4/struct/tables.html#sample)但是，我似乎无法让他们的确切代码工作（在 moz 和 webkit 中检查）！？我应该请求更正吗？看起来我只需要继续使用[CSS 选择器](https://stackoverflow.com/a/1238248)！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T00:25:30.910

一定要继续前进。`align`on`colgroup`是那些从未被广泛实施的 HTML 4 规范特性之一。我注意到 HTML5 甚至没有提到它。它既不是有效的，也不是被标记为过时的，这表明，对于浏览器制造商来说，它根本就没有真正存在过。

# mysql - 使用mysql中的字符串函数检索复杂数据

> ID：10100286
> 
> 赞同：0
> 
> 时间：2012-04-11T05:25:54.887
> 
> 标签：mysql

我花了整个上午都在这上面，我完全被难住了。

我有一个 mysql 表，其中的一列填充如下：

```
arrOpt['']={price:564.3,msrp:'779', d:'Width: 25"" |Height: 54"" |Weight: 33lbs',sku:6886939,ac:'260.00',ship:'221.95',cShip:'0.00',img:'503-13-35.jpg',imgT:'',oImg:'',shipW:'0',leadL:'7',leadU:'10',partNo:'503-13-35',invChk:'33rd',mfrStk:'',stkShip:'1',bo:'',desc:'',osum:'',upc:'702404269082',packQty:1,ship_via:'FreeTrk',freightUpgradeLvl1:'25.00',site:'home',clearancePrice:'0.00',shipTimeCutOff:'', shipTime:'Mar 12th - Mar 15th'} " 
```

它也有可能是这样的：

```
arrOpt['264596']={price:30.25,msrp:'46.1519', d:'Length: 126"" |Height: 8.5""',sku:7356623,ac:'12.75',ship:'6.00',cShip:'0.00',img:'151_celery.jpg',imgT:'',oImg:'',shipW:'3',leadL:'7',leadU:'14',partNo:'151 Blue',invChk:'31st',mfrStk:'20',stkShip:'1',bo:'',desc:'',osum:'Blue',upc:'',packQty:1,ship_via:'Ground',freightUpgradeLvl1:'0.00',site:'baby',clearancePrice:'0.00',shipTimeCutOff:'', shipTime:'Mar 12th - Mar 19th'};arrOpt['264583']={price:30.25,msrp:'46.1519', d:'Length: 126"" |Height: 8.5""',sku:7356624,ac:'12.75',ship:'6.00',cShip:'0.00',img:'151_celery.jpg',imgT:'',oImg:'',shipW:'4',leadL:'7',leadU:'14',partNo:'151 Celery',invChk:'31st',mfrStk:'20',stkShip:'1',bo:'',desc:'',osum:'Celery',upc:'',packQty:1,ship_via:'Ground',freightUpgradeLvl1:'0.00',site:'baby',clearancePrice:'0.00',shipTimeCutOff:'', shipTime:'Mar 12th - Mar 19th'};arrOpt['264590']={price:30.25,msrp:'46.1519', d:'Length: 126"" |Height: 8.5""',sku:7356625,ac:'12.75',ship:'6.00',cShip:'0.00',img:'151_celery.jpg',imgT:'',oImg:'',shipW:'4',leadL:'7',leadU:'14',partNo:'151 Chambray',invChk:'31st',mfrStk:'7',stkShip:'1',bo:'',desc:'',osum:'Chambray',upc:'',packQty:1,ship_via:'Ground',freightUpgradeLvl1:'0.00',site:'baby',clearancePrice:'0.00',shipTimeCutOff:'', shipTime:'Mar 12th - Mar 19th'};arrOpt['264597']={price:30.25,msrp:'46.1519', d:'Length: 126"" |Height: 8.5""',sku:7356626,ac:'12.75',ship:'6.00',cShip:'0.00',img:'151_celery.jpg',imgT:'',oImg:'',shipW:'4',leadL:'7',leadU:'14',partNo:'151 Ecru',invChk:'31st',mfrStk:'30',stkShip:'1',bo:'',desc:'',osum:'Ecru',upc:'',packQty:1,ship_via:'Ground',freightUpgradeLvl1:'0.00',site:'baby',clearancePrice:'0.00',shipTimeCutOff:'', shipTime:'Mar 12th - Mar 19th'};arrOpt['264601']={price:30.25,msrp:'46.1519', d:'Length: 126"" |Height: 8.5""',sku:7356627,ac:'12.75',ship:'6.00',cShip:'0.00',img:'151_celery.jpg',imgT:'',oImg:'',shipW:'4',leadL:'7',leadU:'14',partNo:'151 Lavender',invChk:'31st',mfrStk:'25',stkShip:'1',bo:'',desc:'',osum:'Lavender',upc:'',packQty:1,ship_via:'Ground',freightUpgradeLvl1:'0.00',site:'baby',clearancePrice:'0.00',shipTimeCutOff:'', shipTime:'Mar 12th - Mar 19th'};arrOpt['264603']={price:30.25,msrp:'46.1519', d:'Length: 126"" |Height: 8.5""',sku:7356628,ac:'12.75',ship:'6.00',cShip:'0.00',img:'151_celery.jpg',imgT:'',oImg:'',shipW:'4',leadL:'7',leadU:'14',partNo:'151 Maize',invChk:'31st',mfrStk:'20',stkShip:'1',bo:'',desc:'',osum:'Maize',upc:'',packQty:1,ship_via:'Ground',freightUpgradeLvl1:'0.00',site:'baby',clearancePrice:'0.00',shipTimeCutOff:'', shipTime:'Mar 12th - Mar 19th'};arrOpt['264608']={price:30.25,msrp:'46.1519', d:'Length: 126"" |Height: 8.5""',sku:7356629,ac:'12.75',ship:'6.00',cShip:'0.00',img:'151_celery.jpg',imgT:'',oImg:'',shipW:'4',leadL:'7',leadU:'14',partNo:'151 Pink',invChk:'31st',mfrStk:'20',stkShip:'1',bo:'',desc:'',osum:'Pink',upc:'',packQty:1,ship_via:'Ground',freightUpgradeLvl1:'0.00',site:'baby',clearancePrice:'0.00',shipTimeCutOff:'', shipTime:'Mar 12th - Mar 19th'};arrOpt['264616']={price:30.25,msrp:'46.1519', d:'Length: 126"" |Height: 8.5""',sku:7356630,ac:'12.75',ship:'6.00',cShip:'0.00',img:'151_celery.jpg',imgT:'',oImg:'',shipW:'4',leadL:'7',leadU:'14',partNo:'151 White',invChk:'31st',mfrStk:'50',stkShip:'1',bo:'',desc:'',osum:'White',upc:'',packQty:1,ship_via:'Ground',freightUpgradeLvl1:'0.00',site:'baby',clearancePrice:'0.00',shipTimeCutOff:'', shipTime:'Mar 12th - Mar 19th'} 
```

正如您所看到的，有些字段 arrOpt 可以为空白，也可以包含多个 arrOpt，其中包含一个数字。

我将如何构造 sql 语句以获取括号内的数字？例如，我希望能够从第二个示例中获取“264596,264583,264590”等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:33:18.567

我没有时间编写代码，但您想使用这些链接作为指南创建一个函数：

*   [创建函数](https://dev.mysql.com/doc/refman/8.0/en/create-function-udf.html)
*   [While 语句](https://web.archive.org/web/20120614022645/http://dev.mysql.com:80/doc/refman/5.5/en/while-statement.html)
*   [选择位置子字符串](https://electrictoolbox.com/mysql-select-locate-substring/)

伪代码：

```
Pos = 0;
OutString = "";
Length = Len(InString);
WHILE LocationOf "arrOpt['" in right(InString,Length - Pos) > 0
    Start = Location + 8;
    End = Locationof "'" in right(InString,Length - Start + 1);
    OutString = concatenate(OutString,",",Mid(InString,Start,End);
    Pos = End + 1;
EndWhile
OutString = right(OutString,Len(OutString) - 1;
return OutString; 
```

# java - 有没有办法仅在 JVM 中将 GC 限制为特定百分比的 CPU？

> ID：10100289
> 
> 赞同：0
> 
> 时间：2012-04-11T05:26:36.933
> 
> 标签：java, garbage-collection, jvm

问题：比该特定任务具有更高优先级的任务占用 CPU 时间并导致一些超时问题。我们在 GC 完整周期中经常看到这个超时问题。那么，有没有办法仅在 JVM 中将 GC 限制为特定百分比的 CPU？

使用的JVM参数：

wrapper.java.additional.3=-XX:+UseConcMarkSweepGC

wrapper.java.additional.4=-XX:+ExplicitGCInvokesConcurrent

wrapper.java.additional.5=-XX:+CMSIncrementalMode

wrapper.java.additional.6=-XX:CMSIncrementalDutyCycle=50

wrapper.java.additional.7=-XX:CMSIncrementalDutyCycleMin=50

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T05:55:22.847

不，但你也不想。问题是，即使您使用的是 CMS，也有一些部分必须阻止这个世界，这可能会导致您的超时。

更好的解决方案是对您的应用程序进行内存分析，以减少垃圾的产生。这将通过大小和频率减少您的 GC 时间。如果您可以将 GC 减少到每天一次以下，您将不再遇到此问题。

# c# - 在光标位置拆分文本区域的文本。(asp.net c#)

> ID：10100294
> 
> 赞同：1
> 
> 时间：2012-04-11T05:27:04.220
> 
> 标签：c#, javascript, jquery, asp.net

我想要做的是在光标位置拆分 textarea 的文本。例如，如果当用户在 hello 末尾单击并按下某个按钮时文本是“hello my world”，那么文本应该分成两个 a="hello" 和 b="my world"。无论如何我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:58:33.203

请参阅此[https://stackoverflow.com/a/1891567/409110](https://stackoverflow.com/a/1891567/409110)以获取光标的当前位置。然后您可以简单地拆分字符串并存储它。

# git - git commit 删除 repo 中的所有文件

> ID：10100296
> 
> 赞同：6
> 
> 时间：2012-04-11T05:27:08.443
> 
> 标签：git

今天第二次`git commit -m "don't quit me now"`删除我的整个回购。就这样：

```
$ git add .
$ git commit -m "please, be gentle"

[master 7af0e9c] please, be gentle
140 files changed, 0 insertions(+), 3186 deletions(-)
delete mode 100644 .DS_Store
delete mode 100644 .gitignore
delete mode 100644 .rspec
delete mode 100644 Gemfile
... 
```

我一直在命令行旁边使用 Github for Mac，想知道这是否会以某种方式使事情变得更好。

```
$ git checkout
$ git status
# On branch master
# Your branch is ahead of 'origin/master' by 1 commit.
#
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   deleted:    .DS_Store
#   deleted:    .gitignore
#   deleted:    .rspec
#   deleted:    Gemfile
#   deleted:    Gemfile.lock 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T10:45:11.470

由于`git status`告诉您所有内容都已准备好删除，因此在执行其他任何操作之前，请将索引重置为`HEAD`：

```
git reset HEAD 
```

这样做之后，`git status`应该回显

```
no changes added to commit (use "git add" and/or "git commit -a") 
```

然后，再试一次：

```
git add .
git commit -m "new try" 
```

# c# - 比较 XNA 和 WPF

> ID：10100299
> 
> 赞同：0
> 
> 时间：2012-04-11T05:27:16.137
> 
> 标签：c#, wpf, xna

我为 Windows 设计了一个界面。我想开发它。

我没有为 Windows 编写一个 shell，这需要我学习很多很多很多新东西，我正在考虑制作一个在 Windows 上运行的全屏应用程序，用户只能通过这个应用程序进行交互。我认为 Microsoft Surface 也是如此。

所以我正在考虑我的选择，我决定在托管代码中执行此操作，C# 因为那是我的专长所在，并且开发将很容易。

之后我需要从**WPF**或**XNA**中进行选择，等等让我解释一下 XNA。我还不知道 WPF，所以我不知道它的功能，但我在想如果我要为我的界面添加一些“密集图形”，使用 XNA 会很容易，因为我可以使用“粒子系统”之类的东西. 如果您使用过 XNA，您就会明白我的意思，在使用 XNA 的强大功能的同时创建 2D 界面等等。

另一个选项是 WPF，我不知道，因此，我自己无法做出决定。

因此，了解 WPF 和更喜欢 XNA 的人也是如此。

为什么我不应该使用“C# + XNA”，会有什么缺点以及这种组合会在哪里失败。

为什么我应该使用 WPF 或者 WPF 会足够好图形方面我的意思是像动画任何东西，我的字面意思是任何东西等等。

ps

我知道我将不得不选择一个答案，但所有答案对我来说都是非常有益的讨论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:46:58.797

XNA 和 WPF 是根本不同的技术，因此您需要选择适合您情况的技术。XNA 面向游戏开发者，而 WPF 面向应用程序开发。

你需要使用显卡吗？需要为 Xbox 360 编写游戏吗？选择 XNA。

您是否需要制作一个允许用户查看和编辑数据的桌面应用程序？这包括 Web 浏览器、媒体播放器、文字处理器等。选择 WPF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:40:31.010

作为一名游戏程序员，我发现过渡到 WPF 非常具有挑战性。尽管如此，它在 GUI 设计方面还是领先于 XNA。如果你的应用程序（你真的应该告诉我们更多）依赖于 GUI 进行用户交互，你将不得不在 XNA 中从头开始创建一个完整的 GUI 系统。这对我来说听起来并不有趣。

WPF 有一些富媒体访问。您可以对控件执行渲染转换。还有一个 Viewport3D 对象，它允许您渲染 3d 对象。一个快速的谷歌搜索也出现了一个[粒子引擎](http://www.codeproject.com/Articles/21010/Particle-Effects-in-WPF)，虽然我无法验证它的有效性。

基本上，如果您正在编写 GUI 应用程序，请使用 WPF 并学习如何根据您的目的调整它。不要强迫自己在 XNA 中编写整个 GUI/页面系统。这不是 XNA 的本意，而且我从为我的游戏编写 GUI 函数的最少经验知道这只是一个主要的痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T05:34:18.583

我认为对于您的情况，XNA 可能是一种更好的方式（尽管 WPF 应该提供类似的支持），因为 XNA 比 WPF 更适用于更多平台。

通过 MonoGame (http://monogame.codeplex.com)，基于 XNA 的应用程序可以在 iOS、Android、OS X、Linux 等平台上运行。

# android - 由于地理编码器，小部件没有响应

> ID：10100302
> 
> 赞同：4
> 
> 时间：2012-04-11T05:27:33.480
> 
> 标签：android, geocoding

我开发了一个小部件来查找天气。它运行良好，但在一定的更新间隔后，它会在几分钟/小时后自动崩溃并停止响应（点击事件不起作用）。它在 logcat 中引发以下错误。

```
04-11 10:40:17.004: D/androidNetworkLocationListeners(24325): Still have listener com.google.android.location.internal.client.NetworkLocationClient$1@413d9070
04-11 10:40:17.007: D/androidNetworkLocationListeners(24325): Still have listener com.google.android.location.internal.client.NetworkLocationClient$1@413d9070
04-11 10:40:17.011: D/WifiLocator(24325): Too many no-location APs. Will not compute a location nor go to the server. hasLocation=0 noLocation=0 cacheMiss=0
04-11 10:40:17.019: E/GPS(135): [gps_inject_location][line = 721] : Failed with GPS driver is not initialized
04-11 10:40:17.027: D/WifiLocator(24325): Too many no-location APs. Will not compute a location nor go to the server. hasLocation=0 noLocation=0 cacheMiss=0
04-11 10:40:17.043: E/GPS(135): [gps_inject_location][line = 721] : Failed with GPS driver is not initialized
04-11 10:40:17.125: I/System.out(24325): [INFO:3211479]: LogSource: Running flush
04-11 10:40:20.812: I/System.out(24325): [INFO:3215167]: LogSource: Running delayed flush
04-11 10:40:20.824: I/System.out(24325): [INFO:3215181]: LogSource: Running flush
04-11 10:40:22.113: W/System.err(1524): java.io.IOException: Unable to parse response from server
04-11 10:40:22.117: W/System.err(1524):     at android.location.Geocoder.getFromLocation(Geocoder.java:136)
04-11 10:40:22.117: W/System.err(1524):     at net.mobile.android.weather.WeatherUpdater$1.onLocationChanged(WeatherUpdater.java:120)
04-11 10:40:22.117: W/System.err(1524):     at android.location.LocationManager$ListenerTransport._handleMessage(LocationManager.java:234)
04-11 10:40:22.117: W/System.err(1524):     at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:167)
04-11 10:40:22.117: W/System.err(1524):     at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:183)
04-11 10:40:22.117: W/System.err(1524):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 10:40:22.117: W/System.err(1524):     at android.os.Looper.loop(Looper.java:137)
04-11 10:40:22.117: W/System.err(1524):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-11 10:40:22.117: W/System.err(1524):     at java.lang.reflect.Method.invokeNative(Native Method)
04-11 10:40:22.117: W/System.err(1524):     at java.lang.reflect.Method.invoke(Method.java:511)
04-11 10:40:22.117: W/System.err(1524):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-11 10:40:22.117: W/System.err(1524):     at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:167)
04-11 10:40:22.117: W/System.err(1524):     at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:183)
04-11 10:40:22.117: W/System.err(1524):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 10:40:22.117: W/System.err(1524):     at android.os.Looper.loop(Looper.java:137)
04-11 10:40:22.117: W/System.err(1524):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-11 10:40:22.117: W/System.err(1524):     at java.lang.reflect.Method.invokeNative(Native Method)
04-11 10:40:22.117: W/System.err(1524):     at java.lang.reflect.Method.invoke(Method.java:511)
04-11 10:40:22.117: W/System.err(1524):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-11 10:40:22.117: W/System.err(1524):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-11 10:40:22.117: W/System.err(1524):     at dalvik.system.NativeStart.main(Native Method)
04-11 10:40:22.117: W/System.err(1524):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 10:40:22.117: W/System.err(1524):     at android.os.Looper.loop(Looper.java:137)
04-11 10:40:22.117: W/System.err(1524):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-11 10:40:22.117: W/System.err(1524):     at java.lang.reflect.Method.invokeNative(Native Method)
04-11 10:40:22.117: W/System.err(1524):     at java.lang.reflect.Method.invoke(Method.java:511)
04-11 10:40:22.117: W/System.err(1524):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-11 10:40:22.117: W/System.err(1524):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-11 10:40:22.117: W/System.err(1524):     at dalvik.system.NativeStart.main(Native Method)
04-11 10:40:22.132: I/System.out(24325): [INFO:3216487]: LogSource: Running flush
04-11 10:40:22.285: I/System.out(24325): [INFO:3216642]: LogSource: Response [http=200,length=224]
04-11 10:40:22.312: I/System.out(24325): [INFO:3216667]: LogSource: Sending payload [bytes=264] 
```

# python - 通过数据线连接在 Python 2.6 中发送 SMS

> ID：10100305
> 
> 赞同：1
> 
> 时间：2012-04-11T05:27:48.910
> 
> 标签：python, sms, serial-port

我在 Python 2.6 中工作，我想在我的手机（即诺基亚 E-72）通过数据线连接到 PC 时向手机发送短信。

手机通过串口连接，代码也提示正确的端口，代码没有错误，但仍然没有发送消息。

我的代码如下：

```
import serial
import time
phone = serial.Serial()
phone.baudrate = 38400
phone.bytesize = 8
phone.stopbits = 1
phone.xonxoff = 0
phone.rtscts = 0
phone.timeout = 0
phone.port = 4 #try different ports here, if this doesn't work.
phone.parity=serial.PARITY_NONE
phone.open()
print phone.portstr
recipient = "+923219409998"
message = "We did it!"
try:
    time.sleep(0.5)
    phone.write(b'ATZ\r')
    time.sleep(0.5)
    phone.write(b'AT+CMGF=1\r')
    time.sleep(0.5)
    phone.write(b'AT+CMGS="' + recipient.encode() + b'"\r')
    time.sleep(0.5)
    phone.write(message.encode() + b"\r")
    time.sleep(0.5)
    phone.write(bytes([26]))
    time.sleep(0.5)
    phone.readall()
finally:
    phone.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:12:42.450

您是否尝试将连接参数作为参数`Serial()`而不是稍后添加？通常，连接会立即打开，我不确定延迟`open()`是否有效......

所以

1.  尝试类似的东西

    ```
    phone = serial.Serial(
        baudrate=38400,
        bytesize=8,
        stopbits=1,
        xonxoff=0,
        rtscts=0,
        timeout=0,
        port=4, #try different ports here, if this doesn't work.
        parity=serial.PARITY_NONE,
    )
    print phone.portstr 
    ```

    否则将使用默认参数建立连接，这可能不是您想要的。

    如果还是不行，

2.  尝试使用真实端口设备字符串 ( `"COM5"`, `"/dev/ttyS5"`) 更改端口号，也许

3.  甚至解析电话的答案。为此，您应该在连接参数中定义超时和/或将读取限制为`phone.inWaiting()`.

* * *

此外（但这只是风格问题），取决于您使用的 Python 版本，使用起来可能会更整洁

```
import contextlib
with contextlib.closing(phone):
    <do stuff with phone> 
```

代替

```
try:
    <do stuff with phone>
finally:
    phone.close() 
```

它在语义上完全一样，但看起来更好（恕我直言）。

# embedded - RTOS：一个任务是否可以有两个消息队列？

> ID：10100309
> 
> 赞同：0
> 
> 时间：2012-04-11T05:27:58.223
> 
> 标签：embedded, message-queue, rtos

我创建了一个任务 A 和两个消息队列 Q1、Q2。任务 A 是否可以等待两个消息队列？

我知道这是不可能的，因为在阻塞消息 Q 调用的情况下，当没有任何消息要处理时，任务将阻塞自身（阻塞状态）。

例如，如果 Q1 有 msgs 而 Q2 没有 msgs，那么在 Q1 的情况下，任务将处于就绪状态，而在 Q2 的情况下，任务必须处于阻塞状态。

一个任务不能同时处于两种状态。

我的理解正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T20:59:15.660

精确的方法取决于您的 RTOS，但本质上您需要等待事件或信号量，然后轮询队列（非阻塞/零超时读取）。发送任务必须将消息放在适当的队列中，然后设置事件或信号量——这应该在单个任务接口函数中完成——发送任务不必知道接收任务通信的机制。

如果您使用事件标志，则可以为每个队列使用单独的标志，因此您知道要从哪个队列读取（一个或另一个或两者），但由于事件标志不计算对象，您需要轮询队列迭代直到它耗尽，以防队列上的消息多于消息。

计数信号量有一些用处，但只告诉您消息的总数，而不是它们所在的队列，因此每次获取信号量时您都必须检查它们。这可能导致为一个信号量计数（每个队列一个）读取两条消息，然后是没有相应消息的 sem-take。您可以使用共享数据增加信号量，或者您的 RTOS 可能能够报告队列中的消息数量。

二进制信号量将像事件标志一样工作，只是无法判断哪个队列有消息，因此您必须轮询两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:40:16.013

我认为这取决于 RTOS 的实现。您当然可以编写一个能够在两个队列上挂起调用的 RTOS。这只是一个带有两个参数的 RTOS 调用。然后 RTOS 管理这两个队列并知道任务在它们上都处于挂起状态。但是，我从未见过实现此功能的 RTOS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T00:36:10.543

大多数 RTOS 不提供此功能，但您可以实现。

以 RTOS 为例；GHS-INTEGRITY 内置此功能，您可以等待一个或多个；消息队列接收事件、定时器过期事件、设备 rx 缓冲区获取事件、设备 tx 缓冲区发送事件在同一行（时间）。

# prolog - Prolog中的树前序遍历

> ID：10100310
> 
> 赞同：0
> 
> 时间：2012-04-11T05:28:04.713
> 
> 标签：prolog

树遍历是指系统地访问树数据结构中的每个节点的过程。下图中的前序遍历

[排序二进制树](http://en.wikipedia.org/wiki/File%3aSorted_binary_tree.svg)

返回 F、B、A、D、C、E、G、I、H（根、左、右）。这是序言代码：

```
preorder(tree(X,L,R),Xs) :-
    preorder(L,Ls),
    preorder(R,Rs),
    append([X|Ls],Rs,Xs).
preorder(void,[]). 
```

我会写一个序言程序返回

F，B，A，F，B，D，C，F，B，D，E，F，G，I，H

也就是树的路径。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:38:10.077

在将当前节点传递给左/右访问者之前，在当前节点*的*`PathToRoot`位置添加一个参数。

 *叶谓词将在返回之前将接收到的*累加器*与其相反的累加器统一起来。

根调用将有一个空的累加器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:10:26.553

试试这个尺寸：

```
dfs_paths(tree(X, void, void), [X]) :- !.
dfs_paths(tree(X, L, _R), [X|Xs]) :-
    dfs_paths(L, Xs).
dfs_paths(tree(X, _L, R), [X|Xs]) :-
    dfs_paths(R, Xs). 
```

[从这里](http://en.wikipedia.org/wiki/File%3aSorted_binary_tree.svg)用代表树的事实对其进行测试：

```
tree(T) :- T = tree(f, tree(b, tree(a,void,void), tree(d,tree(c,void,void),tree(e,void,void))), tree(g, void, tree(i, tree(h,void,void),void))). 
```

尝试一下（不显示绑定`T`）：

```
?- tree(T), dfs_paths(T, L).
L = [f, b, a] ;
L = [f, b, d, c] ;
L = [f, b, d, e] ;
L = [f, g, i, h] 
```

请注意，`dfs_paths/2`为您提供备用路径的回溯。如果您想预先列出所有这些，您可以尝试：

```
?- tree(T), findall(P, dfs_paths(T, P), Ps).
Ps = [[f, b, a], [f, b, d, c], [f, b, d, e], [f, g, i, h]]. 
```

如果您想要上面写的术语的平面列表，您可以[`flatten/2`](http://www.swi-prolog.org/pldoc/man?predicate=flatten/2)得到结果。*

# eclipse - eclipse控制台总是最大化

> ID：10100314
> 
> 赞同：2
> 
> 时间：2012-04-11T05:28:24.047
> 
> 标签：eclipse, console, editor

单击以在底部（南）打开时，我想要 Eclipse 控制台。相反，它总是以最大化打开。发生错误时，我想在一个视图中查看包资源管理器/编辑器和控制台。但是，当控制台被最小化并单击它时，控制台会打开并占据整个屏幕。

我需要做什么才能将其打开到较小的区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:35:08.750

只需双击它（在名称上），它将与底部的其他视图一起取代它。
如果它最小化但比其他视图更高：只需抓住它（从名称中）并移动到其他视图的级别。

# javascript - How to sum and display total in a label using javascript

> ID：10100317
> 
> 赞同：1
> 
> 时间：2012-04-11T05:28:39.660
> 
> 标签：javascript, asp.net, gridview

I am having a `grid view` as follows

```
 Quantity    Description    Rate    Total
   1             ---         10      10
   2             ---         20      40

                             Label outside the `gridview` 
```

I have written a javascript to display total now I would like to display the total like `10+40` and should display as `50` like that I will have some other ways what I need is I would like to display the total sum `on Blur` event of `quantity` textbox.

![enter image description here](../Images/344abd9c92301e4cd238ba97c26e06ec.png)

My code for displaying amount `onblur` event is as follows

```
<script type="text/javascript">
    function multiplication(txtQuantity, txtRate, txtAmount) {
        var weight = document.getElementById(txtQuantity).value;
        var rate = document.getElementById(txtRate).value;
        document.getElementById(txtAmount).value = weight * rate;
    }
</script> 
```

In this script I would like to include the total

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:40:49.407

给数量文本框起一个名字，比如“数量”，然后你可以得到它们：

```
document.getElementsByName("quantity"); 
```

给你的标签一个 id，比如“total”，这样你就可以得到它：

```
document.getElementById("total") 
```

使用正文 onload 事件将事件侦听器附加到数量文本框的 onblur 事件。当您使用它时，请使用命名空间、单例，这样您就不会弄乱全局命名空间，如下所示：

```
<script>
    var p = {
        onload: function() {
            var els_qty = document.getElementsByName("quantity");
            for(var i = 0, ceiling = qty_els.length; i < ceiling; i++) {
                qty_els[i].onblur = function() {
                    var total = 0;
                    for(var j = 0; j < ceiling; j++) {
                        total += Number(qty_els[j].value);
                    }
                    document.geTElementById("total").innerHTML = total;
                }
            }
        }
    };
</script> 
```

要附加 onload 事件侦听器，请使用以下命令：

```
<body onload="p.onload()">

</body> 
```

您可能想对数量文本框进行一些验证，但我将其留给您。

# android - 从列表视图中选择多个项目并仅更改所选项目的颜色

> ID：10100324
> 
> 赞同：6
> 
> 时间：2012-04-11T05:29:08.037
> 
> 标签：android, android-listview

我想创建一个视图，我可以从列表视图中选择多个项目，并且并排更改所选列表项的颜色并将该项目保存到我的数组列表中。我的列表如下所示：

![在此处输入图像描述](../Images/98e4f050c9ed238621c3d334e38bdcac.png)

但是当我用来滚动它时..它显示我选择了另外 1 个项目，即使我没有像这样选择它：

![在此处输入图像描述](../Images/1fbe5751e6abf3f30adcb16424a706f8.png)

但我希望只有那个列表项颜色应该改变我将点击的位置......

我将代码用作：

```
 private class ItemsAdapter extends ArrayAdapter<String> {
 List<String> items;
  Context context;
  private LayoutInflater inflater;
  public ItemsAdapter(Context context, List<String> part_array_list) {
     super( context, R.layout.part_list, R.id.label,part_array_list );

     inflater = LayoutInflater.from(context) ;
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent) {
      TextView textView ; 
    String item = (String) this.getItem( position ); 

      if ( convertView == null ) {
        convertView = inflater.inflate(R.layout.part_list, null);

        // Find the child views.
        textView = (TextView) convertView.findViewById( R.id.label );

        // Optimization: Tag the row with it's child views, so we don't have to 
        // call findViewById() later when we reuse the row.
        convertView.setTag( new ListViewHolder(textView) );

      }
      // Reuse existing row view
      else {
        // Because we use a ViewHolder, we avoid having to call findViewById().
        ListViewHolder viewHolder = (ListViewHolder) convertView.getTag();

        textView = viewHolder.getTextView() ;

      }

      textView.setText( part_array_list.get(position) );      

      return convertView;

      }
      }
        /** Holds child views for one row. */
           private class ListViewHolder {

 private TextView textView ;
 public ListViewHolder() {}
 public ListViewHolder( TextView textView ) {

   this.textView = textView ;
 }

 public TextView getTextView() {
   return textView;
 }
 public void setTextView(TextView textView) {
   this.textView = textView;
 } 
```

}

在 OnCreate() 方法中，

```
 final ArrayAdapter<String> part_list_adapter=new ItemsAdapter(AssetSearch.this, part_array_list);
        //PartNumber_List.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    PartNumber_List.setAdapter(part_list_adapter);

    PartNumber_List.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position,
            long id) {
         ListViewHolder viewHolder = (ListViewHolder) v.getTag();
         viewHolder.getTextView().setBackgroundColor(R.color.result_image_border);

        String item=(String) part_list_adapter.getItem((int) id);
        }); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T05:47:35.513

这里的问题是您正在为视图设置背景颜色，然后当您滚动时，由于使用`convertView`. 这正是你应该做的，所以做得很好。

但是，当然，这意味着列表项在不应该被选中时被选中。为了解决这个问题，您的`getView()`方法需要将背景颜色重置为其默认值。我不知道最初的颜色是什么，但我会假设它是透明的。所以你会说：

```
textView.setBackgroundColor(android.R.color.transparent); 
```

因此，现在您将背景颜色设置为其默认值，但如果您从所选项目滚动离开，然后返回它，它将具有透明背景而不是所选背景。要解决此问题，请在您的适配器类中放置一个值`ArrayList`。`Integer`当一个项目被点击并被`onItemClick()`触发时，将项目位置添加到该`ArrayList`. 例如，假设您有：

```
public ArrayList<Integer> selectedIds = new ArrayList<Integer>(); 
```

在您的适配器类中。然后，您的`onItemClick`方法将如下所示：

```
@Override
public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

     ArrayList<Integer> selectedIds = ((ItemsAdapter) parent).selectedIds;
     Integer pos = new Integer(position);
     if(selectedIds.contains(pos) {
         selectedIds.remove(pos);
     }
     else {
         selectedIds.add(pos);
     }

     parent.notifyDataChanged();
} 
```

所以，最后，在你的`getView()`方法中，添加这一行：

```
textView.setBackground(selectedIds.contains(position) ? R.color.result_image_border : androi.R.color.transparent); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T05:39:58.203

我也遇到过这个问题，发现是因为回收views。如果我记得正确设置，这将消除回收并解决问题，但这不是这里的最佳选择。

```
@Override
public int getItemViewType(int position) {
    return IGNORE_ITEM_VIEW_TYPE;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T05:36:37.833

跟踪 Activity 中 listView 中选择的项目。在适配器的 getView 中，检查位置是否等于列表视图中的选定位置和那里的视图的 setBackgroundColor。这将起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T07:53:07.767

无论您尝试在 itemClick 侦听器中使用 ConvertView 做什么，它都会反映在其他一些类中，以避免您需要为相应的视图持有者设置背景，我展示了一些对我来说很好的示例，

```
public View getView(final int position, View convertView, ViewGroup parent) {
         System.gc();
         final ViewHolder holder;

         if (convertView == null) {
             convertView = mInflater.inflate(R.layout.albumlist, null);
             holder = new ViewHolder();
             holder.albumName = (TextView) convertView.findViewById(R.id.albumDetails);

             convertView.setTag(holder);
         }
         else {
             holder = (ViewHolder) convertView.getTag();
         }

         holder.albumName.setText(albumData[position][0]);

         holder.albumName.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {
                 holder.albumName.setBackgroundColor(R.color.black);

             }});

         return convertView;
 }

     class ViewHolder {

         TextView albumName;

     } 
```

样品 o/p ![在此处输入图像描述](../Images/8bc93f740e33d52109836bfd770ceb23.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T05:44:37.797

当您单击列表中的任何列表项时，您必须设置标志并检查此标志以确定是否在适配器的 getView() 方法中单击了该项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T14:41:20.970

关于@JasonRobinson 给出的答案的更正：

```
if(selectedIds.contains(pos) {
         selectedIds.remove(pos); -> **selectedIds.remove(selectedIds.indexOf(pos));**
     }
     else {
         selectedIds.add(pos);
     } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-17T13:02:37.763

**Jason Robinson**的解决方案（想法）很好，但是有一个错误！您不能通过它的值从 ArrayList 中删除项目！！！
方法 ArrayList.remove(int) 将项目的索引作为参数！
如果要使用，则需要找到要删除的索引项。例如：`ArrayList<`Integer`>`

```
private int getIndex(int value) {
    int index = -1;

    for(int i=0; i<selectedIds.size(); i++) {
        if(selectedIds.get(i)==value) {
            index = i;
            break;
        }
    }

    return index;
} 
```

或者使用方法`ArrayList.indexOf(Object)`获取索引。

现在，如何从 FragmenList 或 ListActivity 获取对适配器的引用。只需使用类变量：

```
public class SimpleFragment extends ListFragment {
    private MyCustomAdapter mAdapter;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        mAdapter = new MyCustomAdapter(getActivity(), R.layout.row_layout);
        setListAdapter(mAdapter);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        // now you have an access to your adapter through class variable mAdapter
    }
} 
```

# asp.net-mvc - MvcScaffolding one-many relationship

> ID：10100332
> 
> 赞同：3
> 
> 时间：2012-04-11T05:30:34.260
> 
> 标签：asp.net-mvc, asp.net-mvc-scaffolding

I'm using MVC 4, EF 4.3 and the MVCScaffolding package.

I have following simple model classes

```
 public class Product
{
    [Key]
    public int ID { get; set; }
    [Required]
    public string Name { get; set; }
    public virtual Category Category { get; set; }
}
public class Category
{
    [Key]
    public int ID { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Product> Products { get; set; }
} 
```

I scaffolded out the controllers like so:

```
Scaffold Controller Category -Force 
Scaffold Controller Product -Force 
```

This generated the controllers/views etc.

Per [Steve sanderson's post](http://blog.stevensanderson.com/2011/01/28/mvcscaffolding-one-to-many-relationships/) I would think that the _CreateOrEdit.cshtml for the Product would contain a dropdown for the Category but it does not.

Followng are the contents of the _CreateOrEdit.cshtml and it does not contain any html template for the Category

```
<div class="editor-label">
@Html.LabelFor(model => model.Name)
</div>
<div class="editor-field">
   @Html.EditorFor(model => model.Name)
   @Html.ValidationMessageFor(model => model.Name)
</div> 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T11:19:30.037

我认为您还需要在 Product 类上有一个属性 CategoryID 。它不会是虚拟的，因为您希望 EntityFramework 将其作为外键保存在数据库中。

尝试添加它并再次为它们搭建脚手架，看看它是否为您提供了下拉菜单。你认为它应该是正确的。

另外约定是 ID 字段将是键，所以我认为您不需要 [Key] 属性。

# php - not working when send by PHP mail()

> ID：10100333
> 
> 赞同：0
> 
> 时间：2012-04-11T05:30:36.867
> 
> 标签：php, image, debugging, html-email

I am sending a simple mail with mail() with an IMG tag, the recived email shows IMG tag but it doesnt display src="" attribute.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T01:49:43.583

> 明白了，这是一个愚蠢的错误，Gmail 的选项“显示图像”。

# php - How do I put this code into a library for codeigniter?

> ID：10100336
> 
> 赞同：0
> 
> 时间：2012-04-11T05:30:48.223
> 
> 标签：php, codeigniter

I have the code below that access my table called `settings` in my database and then creates an array called data. Currently I have it MY_Controller but I want to move it to a library so I can access the settings from models etc. The only problem is every time I try I get an undefined index error.

```
public function _settings()
{
    // select all settings from database
    $query = $this->db->query('SELECT * FROM settings');

    // get result from database
    $this->data = $query->result_array();

    foreach($this->data as $setting)
    {
        // create data variable from database variables
        $this->data[$setting['name']] = $setting['value'];
    }

    // simplify access to urls
    $this->data['base_url'] = base_url();
    $this->data['site_url'] = site_url();
    $this->data['template_url'] = base_url('assets/templates/' . $this->data['template']);

    // return array of data
    return $this->data;
} 
```

Please help...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:49:07.357

在库文件夹中创建设置类后，您的代码必须使用`&get_instance()`来访问`codeigniter`实例（类似这样）

```
class settings
{
  public function get_settings()
   {
     $CI = &get_instance();
     $CI->load->model('settings_model','sm');
     return $CI->sm->settings();
   }

} 
```

我的建议是将函数的名称从`_settings`to`settings`或类似的名称更改为用于私有函数而不是公共函数`CI 1.7.X`的地方..`_settings`

在您的控制器中，您必须使用`$this->load->library('settings');`来访问您的库代码..

我希望这个能帮上忙

# c# - 我如何在类型安全的枚举模式上使用 switch 语句

> ID：10100350
> 
> 赞同：18
> 
> 时间：2012-04-11T05:32:34.277
> 
> 标签：c#, design-patterns, switch-statement

我以不同的方式找到了一个关于实现枚举的漂亮示例。我认为这就是所谓**的类型安全枚举模式**。我开始使用它，但我意识到我不能在 switch 语句中使用它。
我的实现如下所示：

```
public sealed class MyState
{
    private readonly string m_Name;
    private readonly int m_Value;

    public static readonly MyState PASSED= new MyState(1, "OK");
    public static readonly MyState FAILED= new MyState(2, "ERROR");

    private MyState(int value, string name)
    {
        m_Name = name;
        m_Value = value;
    }

    public override string ToString()
    {
        return m_Name;
    }

    public int GetIntValue()
    {
        return m_Value;
    }
} 
```

为了能够在 C#的**switch语句中使用此模式，我可以添加什么到我的类中？**
谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T17:26:08.447

你可以尝试这样的事情：

```
class Program
{
    static void Main(string[] args)
    {
        Gender gender = Gender.Unknown;

        switch (gender)
        {
            case Gender.Enum.Male:
                break;
            case Gender.Enum.Female:
                break;
            case Gender.Enum.Unknown:
                break;
        }
    }
}

public class Gender : NameValue
{
    private Gender(int value, string name)
        : base(value, name)
    {
    }

    public static readonly Gender Unknown = new Gender(Enum.Unknown, "Unknown");
    public static readonly Gender Male = new Gender(Enum.Male, "Male");
    public static readonly Gender Female = new Gender(Enum.Female, "Female");
    public class Enum
    {
        public const int Unknown = -1;
        public const int Male = 1;
        public const int Female = 2;
    }

}

public abstract class NameValue
{
    private readonly int _value;
    private readonly string _name;

    protected NameValue(int value, string name)
    {
        _value = value;
        _name = name;
    }

    public int Value
    {
        get { return _value; }
    }

    public string Name
    {
        get { return _name; }
    }

    public override string ToString()
    {
        return Name;
    }
    public override int GetHashCode()
    {
        return Value.GetHashCode();
    }

    public override bool Equals(object obj)
    {
        NameValue other = obj as NameValue;
        if (ReferenceEquals(other, null)) return false;
        return this.Value == other.Value;
    }

    public static implicit operator int(NameValue nameValue)
    {
        return nameValue.Value;
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-11T16:25:55.563

类型安全的枚举模式很有趣，因为您可以向单个枚举成员（即实例）添加*行为。*因此，如果您想要打开的行为可能是类的一部分，只需使用多态性。请注意，您可能需要为覆盖行为的每个成员创建子类：

```
public class MyState {

  public static readonly MyState Passed = new MyStatePassed();
  public static readonly MyState Failed = new MyStateFailed();

  public virtual void SomeLogic() {
    // default logic, or make it abstract
  }

  class MyStatePassed : MyState {
    public MyStatePassed() : base(1, "OK") { }
  }
  class MyStateFailed : MyState {
    public MyStateFailed() : base(2, "Error") { }
    public override void SomeLogic() { 
      // Error specific logic!
    }
  }

  ...
} 
```

用法：

```
MyState state = ...
state.someLogic(); 
```

现在，如果逻辑显然不属于并且您真的想切换，我的建议是创建一个兄弟枚举：

```
public enum MyStateValue { 
  Passed = 1, Failed = 2
}
public sealed class MyState {
  public static readonly MyState Passed = new MyState(MyStateValue.Passed, "OK");
  public static readonly MyState Failed = new MyState(MyStateValue.Failed, "Error");

  public MyStateValue Value { get; private set; }

  private MyState(MyStateValue value, string name) {
    ...
  }
} 
```

并打开它：

```
switch (state.Value) {
  case MyStateValue.Passed: ...
  case MyStateValue.Failed: ...
} 
```

在这种情况下，如果类型安全的枚举类没有任何行为，则没有太多理由让它代替枚举本身存在。但当然，您可以同时拥有逻辑和兄弟枚举。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T19:01:06.093

Jordão 有正确的想法，但是有更好的方法来实现多态性，使用*委托*。

委托的使用比 switch 语句更快。（事实上​​，我坚信 switch 语句在面向对象开发中的唯一位置是工厂方法。我总是在寻找某种多态性来替换我处理的任何代码中的任何 switch 语句。）

例如，如果您想要基于类型安全枚举的特定行为，我使用以下模式：

```
public sealed class EnumExample
{
    #region Delegate definitions
    /// <summary>
    /// This is an example of adding a method to the enum. 
    /// This delegate provides the signature of the method.
    /// </summary>
    /// <param name="input">A parameter for the delegate</param>
    /// <returns>Specifies the return value, in this case a (possibly 
    /// different) EnumExample</returns>
    private delegate EnumExample DoAction(string input);
    #endregion

    #region Enum instances
    /// <summary>
    /// Description of the element
    /// The static readonly makes sure that there is only one immutable 
    /// instance of each.
    /// </summary>
    public static readonly EnumExample FIRST = new EnumExample(1,
        "Name of first value",    
        delegate(string input)
           {
               // do something with input to figure out what state comes next
               return result;
           }
    );
    ...
    #endregion

    #region Private members
    /// <summary>
    /// The string name of the enum
    /// </summary>
    private readonly string name;
    /// <summary>
    /// The integer ID of the enum
    /// </summary>
    private readonly int value;
    /// <summary>
    /// The method that is used to execute Act for this instance
    /// </summary>
    private readonly DoAction action;
    #endregion

    #region Constructors
    /// <summary>
    /// This constructor uses the default value for the action method
    /// 
    /// Note all constructors are private to prevent creation of instances 
    /// by any other code
    /// </summary>
    /// <param name="value">integer id for the enum</param>
    /// <param name="name">string value for the enum</param>
    private EnumExample(int value, string name) 
            : this (value, name, defaultAction)
    {
    }

    /// <summary>
    /// This constructor sets all the values for a single instance.
    /// All constructors should end up calling this one.
    /// </summary>
    /// <param name="value">the integer ID for the enum</param>
    /// <param name="name">the string value of the enum</param>
    /// <param name="action">the method used to Act</param>
    private EnumExample(int value, string name, DoAction action)
    {
        this.name = name;
        this.value = value;
        this.action = action;
    }
    #endregion

    #region Default actions
    /// <summary>
    /// This is the default action for the DoAction delegate
    /// </summary>
    /// <param name="input">The inpute for the action</param>
    /// <returns>The next Enum after the action</returns>
    static private EnumExample defaultAction(string input)
    {
        return FIRST;
    }
    #endregion

    ...
} 
```

# android - Android 无法连接到相机服务

> ID：10100351
> 
> 赞同：11
> 
> 时间：2012-04-11T05:32:43.983
> 
> 标签：android

当用户点击相机时，它会在几秒钟后打开下一个屏幕`Fail to connect to camera service`

它说 `cannot connect to camera`

这是我的代码：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    View viewLoad = LayoutInflater.from(CameraActivity.this).inflate(R.layout.camera, null);
    setContentView(viewLoad);

    Bundle bundle = this.getIntent().getExtras();
    seletctedRetailer = bundle.getString("RetailerName");
    retailerCode = bundle.getString("RetailerCode");

    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
    Bundle b = new Bundle();
    b.putString("Activity", "RetailerOrderSActivity");
    b.putString("RetailerName", seletctedRetailer);
    b.putString("RetailerCode", retailerCode);

    cameraIntent.putExtras(b);
    getParent().getParent().setTitle("Image Capture");
    startActivityForResult(cameraIntent,CAMERA_PIC_REQUEST);  

    vale +=1;

    Button imgMCancel =(Button)findViewById(R.id.imgMCancel);
    imgMCancel.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent i = new Intent(getBaseContext(), CameraMainActivity.class);
            Bundle bundle = new Bundle(); 
            bundle.putString("Activity", "CameraMainActivity");
            bundle.putString("RetailerName", seletctedRetailer);
            bundle.putString("RetailerCode", retailerCode);
            i.putExtras(bundle);
            View vi = SalesActivityGroup.group.getLocalActivityManager().startActivity("CameraMainActivity", i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)).getDecorView();
            SalesActivityGroup.group.replaceView(vi);
        }
    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    super.onActivityResult(requestCode, resultCode, data);
        if (resultCode == CAMERA_PIC_REQUEST) {
            System.out.println("====YES======");
             Bitmap thumbnail = (Bitmap) data.getExtras().get("data");  
                ImageView image = (ImageView) findViewById(R.id.imageView1);  
                image.setImageBitmap(thumbnail);  
        }
} 
```

这是我的布局：

```
 <?xml version="1.0" encoding="utf-8"?> 
```

```
 <LinearLayout android:id="@+id/header"
                android:layout_height="wrap_content"
                android:layout_marginBottom="10dp"
                android:layout_marginTop="75dp"
                android:layout_width="fill_parent">

        <Button android:layout_width="wrap_content" 
                android:text="Cancel" 
                android:textColor="#FFFFFF"
                android:background="@drawable/btn_red"
                android:layout_height="wrap_content" 
                android:layout_marginLeft="5dp"
                android:layout_marginRight="150dp"
                android:id="@+id/imgMCancel" 
                >
       </Button>

       <Button android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:id="@+id/buttonClick"
                android:text="Make Photo" 
                android:textColor="#FFFFFF"
                android:background="@drawable/btn_red"
                android:layout_gravity="center">
        </Button>

    </LinearLayout> 
```

这是我的 AndroidManifest.xml 文件

```
 <activity android:name=".sales.CameraActivity"              android:screenOrientation="landscape"  android:configChanges="orientation|keyboardHidden"  android:clearTaskOnLaunch="false">
        <intent-filter>
            <action android:name="android.media.action.IMAGE_CAPTURE" />
            <category android:name="android.intent.category.DEFAULT" />
      </intent-filter>
  </activity> 
```

我是根据这个链接[http://mobile.tutsplus.com/tutorials/android/android-sdk-quick-tip-launching-the-camera/](http://mobile.tutsplus.com/tutorials/android/android-sdk-quick-tip-launching-the-camera/)

请帮我解决问题。我的应用程序包含 Tab ActivityGroup。

提前致谢..

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-11T05:47:25.727

您在清单中忘记了某些内容，请看这里的[相机类](http://developer.android.com/reference/android/hardware/Camera.html)

将此添加到您的清单中：

```
 <uses-permission android:name="android.permission.CAMERA" />
 <uses-feature android:name="android.hardware.camera" />
 <uses-feature android:name="android.hardware.camera.autofocus" /> 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T06:02:55.653

这是我的应用程序代码——希望对您有所帮助：

```
public class CameraActivity extends Activity {
    ImageView img_logo;
    public static Bitmap bitmap;
    public static  String selectedImagePath="";
    protected boolean _taken;   
    protected static final String PHOTO_TAKEN   = "photo_taken";
    int count = 0;
    static String image1 = "";
    /*static String _path="";
    Bitmap bita;
    ParsingForCabDetails obj_ParsingForCabDetails;
    InputStream is;
    protected boolean _taken;   
    protected static final String PHOTO_TAKEN = "photo_taken";*/
    ProgressDialog pd;
    //ImageView iv;
    Button cancel,Ok;
    String alert="";
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.camera);

        img_logo = (ImageView) findViewById(R.id.camera_image);
        cancel = (Button) findViewById(R.id.camera_taken);
        upload = (Button) findViewById(R.id.camerabtnupload);

        if(image1.length()<= 0)
        startCameraActivity();

        upload.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                finish();
                if(image1.length() > 0){
                pd = ProgressDialog.show(SmallyTaxiTabbar.tabContext, "", "Loading....");
                new Thread(new Runnable() {

                        public void run() {

                            LoardServer();
                            handler.sendEmptyMessage(0);

                        }
                    }).start();

            }
                else
                    Toast.makeText(getApplicationContext(),"No Capture Image",2000).show();
            }

        });
        img_logo.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                startCameraActivity();  
            }
        });

        cancel.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                finish();
                selectedImagePath= "";
                image1="";
                }
        });

    }

    public void LoardServer() {
    // this is use for upload image or save image   

    }

    private Handler handler = new Handler(){
        public void handleMessage(android.os.Message msg) {
            pd.dismiss();
            finish();
            if(alert.length() >0 ){
                Log.d("hello","alert"+alert);
                Toast.makeText(getApplicationContext(),alert, 2000).show();
            }
            else
                FindCabDetails.iv_camera.setImageBitmap(bitmap);

            selectedImagePath= "";
            image1="";

        };
    };
    protected void startCameraActivity() {
        selectedImagePath = Environment.getExternalStorageDirectory() + "/default"+count+".jpg";
        count++;
        File file = new File(selectedImagePath);
        Uri outputFileUri = Uri.fromFile(file);
        Intent intent = new Intent (android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
        startActivityForResult(intent, 0);
        }
        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch (resultCode) {
        case -1:
        onPhotoTaken();
        break;
        }
        }
        protected void onPhotoTaken() {
        _taken = true;
        bitmap = BitmapFactory.decodeFile(selectedImagePath);
        bitmap = decodeFile();
        image1 = selectedImagePath;
        img_logo.setImageBitmap(bitmap);

        }
        @Override
        protected void onRestoreInstanceState(Bundle savedInstanceState) {
        if (savedInstanceState.getBoolean(PHOTO_TAKEN)) {
        onPhotoTaken();
        }
        }
        @Override
        protected void onSaveInstanceState(Bundle outState) {
        outState.putBoolean(PHOTO_TAKEN, _taken);
        }
        private Bitmap decodeFile() {
        try {
        // decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream( selectedImagePath), null, o);
        final int REQUIRED_SIZE = 70;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
        if (width_tmp / 2 < REQUIRED_SIZE
        || height_tmp / 2 < REQUIRED_SIZE)
        break;
        width_tmp /= 2;
        height_tmp /= 2;
        scale++;
        }
        // decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        return BitmapFactory.decodeStream(new FileInputStream(selectedImagePath), null, o2);
        } catch (FileNotFoundException e) {
        }
        return null;
        }
        public boolean onKeyDown(int keyCode, KeyEvent event) {
            if(keyCode==KeyEvent.KEYCODE_BACK)
            {
                finish();
            }
            return super.onKeyDown(keyCode, event);
        }

} 
```

**使用这个 camera.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical" android:background="#FFFFFF" android:layout_height="fill_parent" android:layout_width="fill_parent">
        <RelativeLayout android:id="@+id/relativeLayout1"
            android:layout_width="fill_parent"
            android:background="@drawable/bottoombg" android:layout_height="wrap_content">
            <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_centerVertical="true"
                android:layout_centerHorizontal="true" android:textColor="#FBB917"
                android:textStyle="bold" android:textSize="20dip" android:id="@+id/txtCabNametitle" android:text="Camera"></TextView>
            <Button android:layout_alignParentRight="true" android:layout_centerVertical="true"
                android:background="@drawable/filter_btn1"
                android:layout_marginRight="5dip"
                android:layout_height="30dip" android:textColor="#FFFFFF" android:text="Upload" android:layout_width="70dip" android:id="@+id/camerabtnupload"></Button>
            <Button android:layout_centerVertical="true" android:background="@drawable/btn_press_effect" android:layout_height="30dip" android:textColor="#FFFFFF" android:paddingLeft="10dip" android:id="@+id/camera_taken" android:text="Cancel" android:layout_width="70dip"></Button>
        </RelativeLayout>
        <ImageView android:id="@+id/camera_image" android:layout_centerVertical="true" android:layout_centerHorizontal="true" android:layout_height="200dip" android:layout_width="200dip"></ImageView>
    </RelativeLayout> 
```

AndroidManifest.xml

```
 <uses-permission android:name="android.permission.CAMERA" />
 <uses-feature android:name="android.hardware.camera" />
 <uses-feature android:name="android.hardware.camera.autofocus" /> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-11T06:03:10.673

您必须在获得预览显示之前解锁相机并在关闭您的应用程序之前正确锁定相机。如果相机没有正确锁定，下次您的应用程序可能会抛出异常。因此，您必须重新启动设备...

# javascript - 更改日期字符串并通过 onclick 更改 DIV 背景颜色

> ID：10100355
> 
> 赞同：-1
> 
> 时间：2012-04-11T05:33:12.560
> 
> 标签：javascript, onclick

我有这个有效的脚本，但我需要更改日期字符串的格式以使其看起来不同。我目前得到：*2012 年 4 月 10 日星期二 22:27:13 GMT-0700 (PDT)*

我需要日期字符串如下所示： **2012 年 4 月 10 日晚上 10:28**

当单击按钮时，我还需要更改保存日期字符串输入的 DIV 背景。

```
<form>

<input name="theDate" size="50">

<input type="button" value="Insert date" 
  onclick="this.form.theDate.value = new Date();">

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:37:02.233

查看[moment.js](http://momentjs.com/)！

> 用于解析、操作和格式化日期的轻量级 (3.7k) javascript 日期库。

使用 moment.js...

```
var today = moment(new Date());
today.format("MMMM D, YYYY h:m A"); // outputs "April 11, 2012 12:44 AM" 
```

您甚至可以在一行中完成：)

```
moment().format("MMMM D, YYYY h:m A"); // outputs "April 11, 2012 12:49 AM" 
```

所以对于你的输入元素......

```
<input type="button" value="Insert date" onclick="this.form.theDate.value = moment().format('MMMM D, YYYY h:m A');"> 
```

此外，值得一提的是 checkout [date.js](http://www.datejs.com/)。我认为这两个库是相辅相成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:39:28.107

您可以使用以下内容来获得不同的“时间” - 事物：

```
For Year: date..getFullYear();
For Month: date.getMonth();
For Date: date.getDate();
For Hour: date.getHours();
For Minute: date.getMinutes();
     .
     .
     .
   etc. (date = new Date()) 
```

**解决方案**：：D

```
var d = new Date(),
    y = d.getFullYear(),
    mo = d.getMonth(),
    da = d.getDate(),
    h = d.getHours(),
    m = d.getMinutes();

var time = m + " " + da + ", " + y + " " + h + ":" + m + ((h<12)?"AM":"PM"); 
```

**现场演示**：http: [//jsfiddle.net/DerekL/GZ7sB/](http://jsfiddle.net/DerekL/GZ7sB/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T05:42:19.390

您可以根据自己的喜好使用 的`format`方法`Date object`来格式化日期（在`formatter`我附上链接的情况下提供）...

**例子：**

```
var d = new Date();
d.format('m/dd/yy'); 
```

有关其他信息，请参阅[此链接](http://blog.stevenlevithan.com/archives/date-time-format)...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T06:03:07.317

你可以剪掉你想要的部分-

**alert(new Date().dayString('y','T'));**

> > 返回值：（字符串）**2012 年 4 月 11 日上午 1:58**

```
String.prototype.padZero= function(len, c){
    var s= "", c= c || "0", len= (len || 2)- this.length;
    while(s.length<len) s += c;
    return s + this;
}

Date.daynames= ['Sunday', 'Monday', 'Tuesday',
'Wednesday','Thursday', 'Friday', 'Saturday'];

Date.ddmm= (function(){
    return Date.parse('2/6/2009')>Date.parse('6/2/2009');
})();

Date.monthnames= ['January', 'February', 'March', 'April', 'May',
'June', 'July', 'August', 'September', 'October', 'November', 'December'];

Date.prototype.dayString= function(wch, wch2){
    var D= this, A, day, M, W;
    wch= wch? wch.toLowerCase():'y';
    M= Date.monthnames;
    W= Date.daynames;
    var A= [W[D.getDay()], ' ', M[D.getMonth()], ' ',
    D.getDate(), ', ', D.getFullYear()];
    if(wch.indexOf('s')!= -1){
        A[0]= A[0].substring(0, 3);
        A[2]= A[2].substring(0, 3);
    }
    if(Date.ddmm ||  /b/i.test(wch)){
        A.splice(2, 3, A[4], A[3], A[2]);
    }
    if(wch.indexOf('y')== -1) A.length= 5;
    if(wch.indexOf('d')== -1) A.splice(0, 2);
    day= A.join('');
    if(wch2) day+= ' '+D.timeString(wch2);
    return day;
}
Date.prototype.timeString= function(sec){
    var D= this, A;
    sec= sec || '';
    var h= D.getHours();
    var w= h<12? ' am':' pm';
    if(sec===sec.toUpperCase())w=w.toUpperCase();
    if(h>12) h-= 12;
    else if(h== 0) h= 12;
    A= [h, String(D.getMinutes()).padZero(2)];
    if(/s/i.test(sec)) A[2]= String(D.getSeconds()).padZero(2);
    if(/ms/i.test(sec)) A[3]= String(D.getMilliseconds()).padZero(3);
    return A.join(':')+w;
} 
```

# ios - 如何正确弃用 Xcode 4 中的方法

> ID：10100356
> 
> 赞同：6
> 
> 时间：2012-04-11T05:33:14.090
> 
> 标签：ios, xcode, xcode4, methods, deprecated

我刚刚在[这里](https://stackoverflow.com/questions/4924285/how-to-deprecate-a-method-in-xcode)查看了答案，但没有帮助。当我只在方法声明中添加不推荐使用的属性时，编译器会说`Attributes on method implementation and its declaration must match`。我需要在方法实现中添加 smth 吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-11T07:01:00.363

只需将属性添加到声明中：

```
@interface Blah
- (void)method __attribute__((deprecated));
@end 
```

如果您的包含对于翻译是正确的，这应该可以正常工作。也许您已将属性添加到*定义*中，而不是*声明*中？否则，演示（代码示例）会有所帮助。

**更新**

尽管上述方法适用于典型消息，但似乎 clang 与`IBAction`s 混淆了。

使用 clang，`ibaction`属性被隐式插入（对于以前的 a `typedef`）。

当仅在声明中指定属性时，预处理器输出如下：

```
// preprocessed declaration
- (void)__attribute__((ibaction))setSomething:(id)sender __attribute__((noreturn));
// preprocessed implementation
- (void)__attribute__((ibaction))setSomething:(id)sender
... 
```

因此，编译器似乎只是被这种隐藏的装饰弄糊涂了，您还必须将属性添加到实现/定义中以在方法为`IBAction`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:45:09.173

您必须将 deprecated 属性放在方法的声明和实现上，至少在带有 clang 的 Xcode 4.3.2 中。

# c# - EF 中多对多连接的最佳实践

> ID：10100362
> 
> 赞同：1
> 
> 时间：2012-04-11T05:34:19.317
> 
> 标签：c#, entity-framework-4, many-to-many

实体框架中多对多连接的最佳解决方案是什么。看起来在我们在将表添加到 edmx 文件后使用 EF 的一个项目中，它忽略了添加交集实体，即：

有了这些表

```
Customer(CustomerId,...)
CustomerOrder(CustomerId,OrderId)
Order(OrderId,...) 
```

CustomerOrder 表未添加到 edmx，因此无法使用常规（常规意思是我们过去在 LINQ to SQL 中执行此操作的方式）内部连接查询连接这些表，例如

```
var q = from c in db.Customers
        join co in db.CustomerOrders on c.CustomerId equals co.CustomerId
        join o in db.Orders on co.OrderId equals o.OrderId
        select a; 
```

据我了解，通过查看先前提出的问题，您可以通过在 where 子句中指定条件或使用 intersects 关键字来进行多项选择和“加入”。但我想知道在这种情况下的最佳做法是什么。

假设我想知道客户有哪些订单，我将如何编写该查询。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T05:43:09.030

只是为了澄清，当添加两个表时，连接表不是 edmx 的一部分，除非它包含的不仅仅是连接表 ID。在 EF*决定*不将连接表用作实体的情况下，其他每个表*都应*具有导航属性（`Orders`将具有`ICollection<Customer> Customers`和`Customers`将具有`ICollection<Orders>`），允许访问连接表而无需手动连接它们。在这种情况下，您将能够执行以下操作：

```
var customer = dbContext.Customers.Include("Orders")
                                  .Where(o => o.Orders.OrderID == 2); 
```

通常，导航属性是延迟加载的，其中对象在被代码访问之前不在实体的属性中。如果您知道要使用[Include](http://msdn.microsoft.com/en-us/library/bb896272.aspx)方法来使用它们，则可以手动告诉框架立即加载它们。此示例中的此方法不是访问`Orders.OrderID`值所必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:11:03.077

对于有类似问题的任何人的未来参考，我只需要查看 EF 实际生成的内容，并且显然 EF 足够聪明，可以在隐藏交叉实体时在必要时添加连接，例如：

```
var query = from c in db.Clients
from o in db.Orders
where c.Id == 1 
select o.Id; 
```

生成以下 sql ：

```
SELECT
[Extent2].[Id] AS [Id]
FROM  [dbo].[Client] AS [Extent1]
CROSS JOIN [dbo].[Order] AS [Extent2]
WHERE 1 = [Extent1].[Id] 
```

# java - 禁用 HTTP GET 方法

> ID：10100364
> 
> 赞同：0
> 
> 时间：2012-04-11T05:34:32.170
> 
> 标签：java, web-services, http, getmethod

我们的服务器中托管了一个网络服务。最近我们的客户做了渗透测试。所以有一个发现。

我们正在使用axis2 API。

所以他们要求我们禁用 HTTP GET 方法。

谁能告诉我我们需要在哪里以及如何。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-09-16T13:47:04.327

您可以使用 Apache 的 mod_allowmethod 将方法列入白名单

安装 mod_allowmwthod 如果未安装，假设您只需要允许 POST 和 PUT ，您使用以下配置

```
<Location "/">
   AllowMethods POST PUT
</Location> 
```

你可以检查这个[https://httpd.apache.org/docs/2.4/mod/mod_allowmethods.html](https://httpd.apache.org/docs/2.4/mod/mod_allowmethods.html)

# logging - C# 从代码后面访问侦听器 TextWriterTraceListener 对象并更改 initializeData 值

> ID：10100366
> 
> 赞同：3
> 
> 时间：2012-04-11T05:34:46.837
> 
> 标签：logging, trace, system.diagnostics

我在 app.config 中有以下监听器：

```
<system.diagnostics>
    <trace autoflush="true" indentsize="4">
        <listeners>
            <add name="myListener" 
                 type="System.Diagnostics.TextWriterTraceListener"
                 initializeData="myAppLog.log"/>
            <remove name="Default"/>
        </listeners>
    </trace>
</system.diagnostics> 
```

我的要求是，从后面的代码访问侦听器对象并动态更改日志文件名称（initializeData），以便我每天可以拥有单独的日志文件。

我已经尝试了一些类似下面的示例代码来从后面的代码中更改日志文件名称，但它不起作用。

```
foreach (TraceListener listener in System.Diagnostics.Trace.Listeners)
{
    listener.Attributes.Remove("initializeData");    
    listener.Attributes.Add("initializeData", "mylog.log");
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T23:28:47.617

所有配置的跟踪侦听器都是在启动时创建的，您不能在运行时更改文件名。相反，您必须删除它们，在运行时创建和添加它们，如下所示。

```
//Remove all existing trace listeners
while (System.Diagnostics.Trace.Listeners.Count > 0)
    System.Diagnostics.Trace.Listeners.RemoveAt(0);

//Add the new one with new file
System.Diagnostics.Trace.Listeners.Add(new TextWriterTraceListener(@"mylog.log")); 
```

我希望这有帮助。

# iphone - 自定义 UITextView PlaceHolder 未在键盘输入时擦除

> ID：10100367
> 
> 赞同：0
> 
> 时间：2012-04-11T05:34:57.050
> 
> 标签：iphone, objective-c, ios, uitextview

我研究了如何在 UITextView 中手动包含 PlaceHolder Text（因为 StackOverflow 上有很多），但是，每当我单击 TextView 并开始输入时，它都不会删除占位符，我不知道为什么。任何帮助表示赞赏！谢谢！

```
#import "HusbandryAddRecord.h"
#import <QuartzCore/QuartzCore.h>

@interface HusbandryAddRecord()

@end

@implementation HusbandryAddRecord

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [scroller setScrollEnabled:YES];
    [scroller setContentSize:CGSizeMake(320, 601)];

    // Round The Corners of the Notes TextView
    notesTV.clipsToBounds = YES;
    notesTV.layer.cornerRadius = 10.0f;

    placeholderLabel = [[UILabel alloc] initWithFrame:CGRectMake(10.0, 0.0, notesTV.frame.size.width - 20.0, 34.0)];
    [placeholderLabel setText:@"Notes"];
    [placeholderLabel setBackgroundColor:[UIColor clearColor]];
    [placeholderLabel setFont:[UIFont fontWithName:@"System" size:14.0]];
    [placeholderLabel setTextColor:[UIColor lightGrayColor]];

    [notesTV addSubview:placeholderLabel];
}

- (void)viewDidUnload
{
    [notesTV release];
    notesTV = nil;
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)dealloc {
    [notesTV release];
    [super dealloc];
}

- (void) textViewDidChange:(UITextView *)theTextView {
    if(![theTextView hasText]) {
        [theTextView addSubview:placeholderLabel];
        [placeholderLabel setText:@"Notes"];
    }

     else if ([[theTextView subviews] containsObject:placeholderLabel]) {
        [placeholderLabel removeFromSuperview];
    }
}

- (void)textViewDidEndEditing:(UITextView *)theTextView {
    if (![theTextView hasText]) {
        [theTextView addSubview:placeholderLabel];
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:49:17.623

真正发生的是您正在为每个输入字符添加标签到您的文本视图中。因此，如果您键入字符，并且在满足条件时仅删除一个标签并且下面的标签可见，则会在上面创建尽可能多的标签。

确保您正确设置了委托，然后使用隐藏属性而不是添加和删除子视图。

```
- (void)textViewDidChange:(UITextView *)textView
{
    placeholderLabel.hidden = textView.hasText;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:41:00.950

使用线条。它有效

**textviewname.editable=YES；textviewname.clearsContextBeforeDrawing=YES；**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T15:08:22.170

简单的方法：[https ://stackoverflow.com/a/17451491/1442541](https://stackoverflow.com/a/17451491/1442541)

将标签添加到 textView 并在文本不为空时隐藏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T05:43:00.790

使用下面的代码它会帮助你..

```
-(void)textViewDidChange:(UITextView *)textView
{
    if([textView.text length]>0){
        placeholderLabel.hidden = YES;
    }else {
        placeholderLabel.hidden = NO;
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T10:59:15.083

您在 textView 上添加 placeHolderLabel 以输入每个字符。查看此代码：-

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)textView
{
[placeholderLabel removeFromSuperview];
return YES; 
} 
```

在此之后为您在 TextView 中完成文本编写时编写代码。

```
-(IBAction)keyBoard:(id)sender
{
if ([textView.text length]==0) 
{
    [textView addSubview:placeholderLabel];
}
[textView resignFirstResponder];
} 
```

此功能适用于我在 textview 之外使用的按钮。单击此键盘时将被取消，它将检查 textView 是否有 0 文本长度，然后 placeHolderLabel 将再次添加它。希望它有所帮助。谢谢 :)

# javascript - 我们如何使用 document.querySelectorAll 来获取 html 页面中的所有标签

> ID：10100376
> 
> 赞同：3
> 
> 时间：2012-04-11T05:35:47.367
> 
> 标签：javascript, dom

有人建议我用来`document.querySelectorAll("#tagContainingWrittenEls > *")`获取所有书面标签的参考。然后你可以遍历它们，并在列表中的每个元素上执行并获取信息`.tagName`。`.attributes`

但这只有在有一个名为#tagContainingWrittenEls 的类时才能完成。我以为这是一些方法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T05:58:21.457

该`querySelectorAll`函数接受一个[选择器字符串](http://www.w3.org/TR/selectors/#selectors)，返回一个`NodeList`可以像数组一样迭代的字符串。

```
// get a NodeList of all child elements of the element with the given id
var list = document.querySelectorAll("#tagContainingWrittenEls > *");

for(var i = 0; i < list.length; ++i) {
    // print the tag name of the node (DIV, SPAN, etc.)
    var curr_node = list[i];
    console.log(curr_node.tagName);

    // show all the attributes of the node (id, class, etc.)
    for(var j = 0; j < curr_node.attributes.length; ++j) {
        var curr_attr = curr_node.attributes[j];
        console.log(curr_attr.name, curr_attr.value);
    }
} 
```

选择器字符串的细分如下：

*   `#nodeid`语法引用具有给定 id 的节点。在这里，使用了假设的 id `tagContainingWrittenEls`—— 你的 id 可能会不同（并且更短）。
*   语法表示“该`>`节点的子节点”。
*   这`*`是一个简单的“全部”选择​​器。

综上所述，选择器字符串表示“*选择 id 为“tagContainingWrittenEls* ”的节点的所有子节点。

有关 CSS3 选择器的列表，请参见[http://www.w3.org/TR/selectors/#selectors](http://www.w3.org/TR/selectors/#selectors)；它们对于高级 Web 开发非常重要（并且方便）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T06:09:55.710

根据 MDN，[.querySelectorAll](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)

> 返回文档中与指定选择器组匹配的元素列表（使用文档节点的深度优先前序遍历）。返回的对象是一个 NodeList。

* * *

[.querySelectorAll](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)返回与提供的选择器匹配的元素列表。

这就像你在 CSS 中的样式：你创建一个选择器，放入你想要应用到这些目标元素的属性，然后这些元素得到样式。

`<a>`比如说在 CSS中，你想用color`<li>`来设置下面的所有样式。你会有这个：`<ul>``id``list``red`

```
ul#list li a{
    color:red;
} 
```

实际上，所有`<a>`在 a`<li>`下，并且 a变为`<ul>`红色。`id``list`

现在使用相同的选择器通过 JavaScript 获取这些相同的`<a>`元素

```
var anchors = document.querySelectorAll('ul#list li a'); 
```

现在`anchors`将包含一个`NodeList`（类似数组的结构），其中包含对 a under a和 an of 的all`<a>`的引用。由于 a类似于 and ，因此您可以循环遍历它，并且每个项目都是a under a with an of 。`<li>``<ul>``id``list``NodeList``Array``<a>``<li>``<ul>``id``list`

* * *

当然，它只获取代码执行时 DOM 中的元素。

# arrays - 访问 JSON 数组的内部元素

> ID：10100377
> 
> 赞同：1
> 
> 时间：2012-04-11T05:35:50.750
> 
> 标签：arrays, json, element

如何访问 JSON 数组的内部元素。我的 Json 对象如下：

```
"numRecommenders": 0,
    "publicProfileUrl": "http://www.linkedin.com/pub/heena-vyas/16/786/826",
    "positions": {
        "total": 1,
        "positionList": [
            {
                "id": "91286566",
                "title": "senior executive",
                "company": {
                    "name": "Reliance",
                    "industry": "Oil & Energy",
                    "type": "Public Company",
                    "size": "10,001+ employees"
                },
                "isCurrent": true
            }
        ]
    }, 
```

我想访问`positions.positionList.company.name`. 我的要求是运行`GroupCommand`如下：

```
GroupCommand cmd = new GroupCommand(collection,
        null,
        new BasicDBObject("positions.positionList.company.name", "Reliance"),
        new BasicDBObject("count", 0),
        "function(obj,prev) {prev.count++;}",
        null); 
```

使用上述代码访问“名称”不起作用。有人可以给我一个答案，为什么不呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:06:59.857

```
var name = jsonObject.positions.positionlist[0].company.name; 
```

请注意，您`positionlist`是一个长度数组`jsonObject.positions.total`。

# python - 数组比较

> ID：10100380
> 
> 赞同：2
> 
> 时间：2012-04-11T05:36:03.903
> 
> 标签：python, numpy

如果我比较两个 float64 类型的 ndarray，其中一个是空的，我会得到一个空的 bool 数组：

```
x = np.array([1.0,2.1]) #dtype is float64
y = np.array([])        #dtype is float64 
```

`x==y`返回一个 dtype 为 的空 ndarray `bool`。

但是，如果我比较两个类型的 ndarray `int32`，其中一个为空，我会得到 False：

```
a = np.array([1,2])
b = np.array([], dtype='int32') 
```

`a==b`返回 False

是什么赋予了？为什么返回的类型不同？我想要做的是比较两个类型的 ndarrays `float64`。

这是在 python 2.6.4、numpy 1.6.1、Windows XP 上完成的

编辑：“试图做的是比较'float5'类型的两个ndarrays”->“试图比较'float64'类型的两个ndarrays”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:25:03.230

所以首先，

```
a = np.array([1,2])
b = np.array([], dtype='int32') 
```

`a`不一定是 int32 数组；这将取决于您机器的本机整数类型。我无法解释您的空布尔数组行为，因为我无法重现它。

现在，“比较两个类型的 ndarray”是什么意思`float64`？比较它们以查看它们是否具有相同的形状以及每个元素是否相同？这是一个坏主意`==`，有几个原因。

一方面，当两者形状相同时，结果将不是布尔值，而是布尔值数组。至少你会想要调用`np.all()`结果数组。

此外，如果一个或另一个数组是某些浮点计算的结果，由于浮点舍入误差，它们可能实际上相等但不完全相等。该`np.allclose(a1, a2)`函数是针对这种情况设计的（您可以指定关键字参数来更改容差级别）；`False`如果两个数组具有不同的形状，它也会优雅地返回。

# javascript - 我 appendChild(form input) 那么我将如何从最后一个删除新输入？

> ID：10100381
> 
> 赞同：0
> 
> 时间：2012-04-11T05:36:04.660
> 
> 标签：javascript

我已经做了一个函数来添加新的上传和描述输入 onClick。我将如何创建一个函数来从下到上删除创建的元素？

```
var i = 1;

function add()
{
    var element = document.createElement('input')
    var element1 = document.createElement('input')
    var space = document.createElement('br')
    var des = document.createElement('span')

    var td = document.getElementById('upload')

    des.innerHTML = "Description: "
    element.setAttribute("type", "text")
    element.setAttribute("name", "desciption"+ i)
    element.setAttribute("value", " ")
    element1.setAttribute("type", "file")
    element1.setAttribute("name", "uploadFile"+ i)
    element1.setAttribute("id", "uploadFile"+ i)

    td.appendChild(des)
    td.appendChild(element)
    td.appendChild(element1)
    td.appendChild(space)

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:42:28.747

在您的代码中：

```
> element.setAttribute("type", "text") 
```

直接为标准属性设置值更可靠：

```
 element.type = "text"; 
```

无论如何，您可以使用以下方法删除元素：

```
 td.removeChild(space);      
   td.removeChild(element1);
   td.removeChild(element);
   td.removeChild(des); 
```

或者你可以这样做：

```
 var nodes = td.childNodes;
  var i = nodes.length;
  while (i--) {
    td.removeChild(nodes[i]);
  } 
```

或更简单地说：

```
 td.innerHTML = ''; 
```

# android - 使用 SyncAdapter 时如何通知有关同步错误的活动

> ID：10100389
> 
> 赞同：1
> 
> 时间：2012-04-11T05:36:44.757
> 
> 标签：android, android-syncadapter

我有一个名为 student 的表，我想从服务器中填充它。在我的活动中，我显示一个进度条并调用`ContentProvder.requestSync(Content URI of student..)`. 现在，如果我按照 Virgil 的谈话正确理解，我应该`ContentURI`在学生的 上添加一个观察者，以便稍后`ContentProvider`在同步完成时收到通知。但是如果说有网络错误会发生什么。学生表永远不会被填充，我的进度对话框永远不会被删除。我明白

> “广播接收机方法”

在另一个线程中提到，但这偏离了我认为理想的 Virgil 的方法。同样在这些行中，为什么`requestSync`不允许将 a`ResultReceiver`作为附加内容的一部分传递。这通常不是与一个`Service`对话`Activity`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T18:42:32.310

SyncAdapter 不适用于这种情况。`SyncAdapter`用于数据的后台同步，对用户不可见。

您的案例听起来非常适合[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。当您的网络任务发生在另一个线程中时，您可以使用它`publishProgress()`来更新进度条。`AsyncTask`你可以在网上找到很多信息和例子。

来自上面链接的示例：

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
     protected Long doInBackground(URL... urls) {
         int count = urls.length;
         long totalSize = 0;
         for (int i = 0; i < count; i++) {
             totalSize += Downloader.downloadFile(urls[i]);
             publishProgress((int) ((i / (float) count) * 100));
             // Escape early if cancel() is called
             if (isCancelled()) break;
         }
         return totalSize;
     }

     protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
     }

     protected void onPostExecute(Long result) {
         showDialog("Downloaded " + result + " bytes");
     }
 } 
```

通过像这样执行它来运行它：

```
new DownloadFilesTask().execute(url1, url2, url3); 
```

这是另一个示例，带有教程（由 google 找到）：

[http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/](http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)

# c# - 文件被复制到 SysWOW64 而不是 System32

> ID：10100390
> 
> 赞同：20
> 
> 时间：2012-04-11T05:36:44.930
> 
> 标签：c#, .net, windows, 64-bit, 32bit-64bit

当我的应用程序运行时，我必须将 psTool 实用程序复制到 System32 文件夹。
我在 64 位 Windows 7 上，每当我尝试通过 将 exe 复制到 system32 位文件夹时`File.Copy`，exe 总是被复制到 SysWow64。

当我在 destFile 上放置断点时，路径显示为`C:\Windows\System32`但文件没有进入那里（进入 sysWow64）。我已经尝试过`Special Folder` `SystemX86`，但文件再次转到 sysWOW64。

```
string sourceFile = "C:\bin\Debug\somexe.exe"
string destFile = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.System), utilityName);
File.Copy(sourceFile, destFile, true); 
```

有什么建议我在这里缺少吗？

**编辑**

正如下面答案中所指出的，发生了文件系统重定向。我正在使用 Visual Studio 的默认设置为 64 位操作系统上的控制台应用程序开发应用程序。我不确定在编译时必须保留哪些设置/开关，以便应用程序可以在 32 位和 64 位操作系统上运行。基本上，无论它是什么位操作系统
，它都应该只将文件复制设置为。 稍后在程序中，我必须通过命令行访问 psTools 实用程序，如果我将它放在 SysWOW64 中，则无法使用该实用程序。如果我进行更改，使用 SysWOW64 的 32 位 cmd.exe，这将再次成为 64 位平台特定的东西，我不想选择。`System32`

任何可以让应用程序在 32 位和 64 位上运行而没有问题的解决方案？我是否必须修改代码（如何？）还是必须修改此控制台应用程序项目的某些属性（哪些属性）？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-11T05:42:04.493

您与[文件系统重定向](http://msdn.microsoft.com/en-us/library/aa384187.aspx)发生冲突。

因为`%windir%\System32`专为 64 位应用程序保留，所以在 64 位版本的 Windows 上，尝试访问该`%windir%\System32`目录的 32 位应用程序会自动且透明地重定向到 32 位`%windir%\SysWOW64`目录。

首先，确保您的程序*确实属于 64 位系统文件夹*。Windows 执行此自动重定向是有原因的。**32 位的东西不在`%windir%\System32`64 位版本的 Windows 上的文件夹中**。

如果您确定要将内容复制到 64 位系统目录中，您有几个选择。最简单的可能是将您的实用程序编译为 64 位应用程序。或者，您可以告诉 WOW64 重定向器您知道自己在做什么，而不是使用`%windir%\Sysnative`而不是执行重定向`%windir%\System32`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-27T18:59:22.343

我有同样的问题。解决方案是在 Visual Studio 的项目属性中将“平台目标”设置为 x64 或 AnyCPU 而不是 x86。在这种情况下，路径将`"C:\Windows\system32"`不会重定向到`"C:\Windows\SysWOW64"`您可以通过将任何文件放在“C:\Windows\SysWOW64”文件夹中来检查这一点，然后使用`File.Exists`命令检查是否在该文件夹中找到文件：

```
File.Exists(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.System), sFileName)); 
```

或者

```
File.Exists(Path.Combine(Environment.SystemDirectory, sFileName)); 
```

![在此处输入图像描述](../Images/ba22231e36b7ba49c29b809ac71ed4a0.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-24T19:11:40.283

我在始终返回本机 system32 文件夹的 32 位应用程序中使用辅助属性。辅助属性是：

```
public static string NativeSystemPath
{
    get
    {
        if (Environment.Is64BitOperatingSystem)
        {
            return System.IO.Path.Combine(
                Environment.GetFolderPath(Environment.SpecialFolder.Windows),
                "Sysnative");
        }
        return Environment.GetFolderPath(Environment.SpecialFolder.System);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T09:42:30.473

由于路径环境变量包含`c:\windows`在两个 Windows x86/x64 版本上，为什么不将您的工具放入`c:\windows`: `%windir%`？

就我而言，这解决了我的问题。

# git - 我应该如何使用单片机？

> ID：10100394
> 
> 赞同：1
> 
> 时间：2012-04-11T05:37:10.817
> 
> 标签：git, version-control

在阅读 Getting Good With Git 之后，我学会了如何使用 Git，但不知道在开发时应该如何实现它。例如。我什么时候应该分支/合并，什么是标签，我应该如何处理它们？

-- 目前我是这个项目的独立开发者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:41:09.000

如果您是唯一的开发人员并且您只是在进行开发，那么只需在`master`分支上工作即可。

如果您要定期发布，请使用`git tag -a`. 使用标签，如果您需要在生产中修复某些内容，很容易从该点返回并创建一个分支。

如果您正在开发可能需要一段时间才能完成的实验性新功能，请考虑为您的工作创建分支。使用单独的分支，您可以轻松地同时在开发中拥有多个想法。

有关复杂开发环境的示例，请查看[成功的 Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)。如果您有纪律，那么即使对于单一开发人员项目，该模型也是可行的。但这根本不是必需的。

# html - 同一空间中大小可变的元素

> ID：10100397
> 
> 赞同：1
> 
> 时间：2012-04-11T05:37:26.117
> 
> 标签：html, css

我有两个具有可变宽度的元素，并且必须在 div 中共享相同的空间

我在此链接中创建了一个示例：http: [//jsfiddle.net/zWVVN/](http://jsfiddle.net/zWVVN/)

*   #test-1：应该看起来像。
*   #test-2：问题情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:45:30.420

嗨，您定义了 hr float left 条件，您必须定义所有 hr 的宽度，这些 hr 赋予浮动，如下所示

**CSS**

```
#teste1, #teste2 {
    width: 300px; }
hr {
    border: 1px solid green;
    background: red;
    height: 25px;
    float: left;
    width:200px;
}
h2 {
    float: right;}

#teste1 hr{
    width: 230px;} 
```

**HTML**

```
<div id="teste1">
    <hr>
    <h2>conteudo</h2>
</div>

    <div id="teste2">
        <hr>
        <h2>conteudo</h2>
    </div>
​ 
```

现场演示[http://jsfiddle.net/rohitazad/3e6bd/2/](http://jsfiddle.net/rohitazad/3e6bd/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:57:04.363

如果您希望两个 div 占据整个空间并且不想将文本向下换行，那么为什么要将两个 div 的宽度都设置为 300 像素。删除分配给两个 div 的宽度，并使两个 HR 都向左浮动。

```
#teste1, #teste2 {
    //this class not needed
}
hr {
    border: 0;
    background: red;
    height: 5px;
    float: left;
}
h2 {
    float: left;
} 
```

演示：http: [//jsfiddle.net/3e6bd/3/](http://jsfiddle.net/3e6bd/3/)

# c# - 无法将 T-SQL INNER JOIN 转换为 LINQ-Entities 查询

> ID：10100398
> 
> 赞同：2
> 
> 时间：2012-04-11T05:37:27.270
> 
> 标签：c#, tsql, c#-4.0, linq-to-entities, inner-join

T-SQL：

```
declare @postlocations table (locationid int)
insert into @postlocations
select locationid
from dbo.PostLocations
where PostId = 162172

select t.*
from dbo.Themes t
inner join dbo.ThemeLocations tl on t.ThemeId = tl.ThemeId
inner join @postlocations pl on tl.LocationId = pl.locationid 
```

到目前为止，我拥有的 LINQ 实体：

```
var postLocations = e.SomePost.Locations; // pre-fetched, e.g materialized ICollection<Post>
var themes = (from t in db.Themes
             join q in postLocations on t.Locations.Select(l => l.LocationId) equals q.LocationId
             select t).ToList(); 
```

但是编译器抱怨`join`无法推断类型参数的关键字。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:17:38.287

您加入的问题是您暗示`LocationId`( `t.Locations.Select(l => l.LocationId`) 的集合可以等于单个`LocationId`. 您正在尝试将具有一组位置的主题加入到单个位置。

您应该可以通过使用来解决此问题`Contains`

```
var themes = (from t in db.Themes
             join q in postLocations 
             on t.Locations.Select(l => l.LocationId).Contains(q.LocationId)
             select t).ToList(); 
```

或者如果 EF 抱怨将 a`postLocations`作为参数传递，您可以尝试

```
// I'd materialize this but you may not have to
var postLocationIds = postLocations.Select(p => p.LocationId).ToList();

var themes = db.Themes.Where(t => t.Locations.Any(l => 
                 postLocationIds.Contains(l.LocationId))).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:36:50.223

我认为您不能将 SQL 表与内存中的对象列表连接起来，即使这些对象最初来自数据库。

将内存中的对象列表转换为 id 列表（整数），并在连接或包含/子选择中使用它。EF 可以在生成 SQL 时将 id 列表转换为参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T05:47:44.237

**编辑**

这个怎么样

```
 ///your sql query
select t.* from dbo.Themes t
 inner join dbo.ThemeLocations tl on t.ThemeId = tl.ThemeId
 inner join @postlocations pl on tl.LocationId = pl.locationid 

//linq query for that
from t in teams
join from tl in teamlocation on t.themid = tl.ThemeID
join from pl in postlocation on tl.temeid = pl.temeid
select t; 
```

**组织**

不确定，但您可以尝试使用 let 关键字

```
var themes = (from t in db.Themes
              let location = t.Locations

            join q in postLocations on location.LocationId equals q.LocationId 
            select t).ToList(); 
```

# python - 如何将驻留在内存中的数据结构从模块传递到模块

> ID：10100399
> 
> 赞同：1
> 
> 时间：2012-04-11T05:37:32.330
> 
> 标签：python, performance, algorithm, memory-management

我正在编写一个代码，其中我将几个文件存储到内存中的数据结构中，然后将在所有模块中使用该数据结构以访问该数据结构。（节省时间）

由于代码是用 python 编写的，并且非常大，因此很难将数据结构从函数传递到函数。

是否有任何可能的方法可以在代码开头存储文件到数据结构，然后我可以在任何模块中使用该数据结构，因为该数据结构在程序执行期间驻留在内存中。

请帮忙。非常重要..!!

让我举个例子吧。

> > main.py .....这是项目的开始，这里我存储了完整的文件到数据结构。other_module.py .....这是其他一些模块，我想在其中访问必须驻留在内存中的数据结构，因为 main.py 正在执行中并且它已调用 other_module.py。

请注意，我不能在 other_module 中存储文件到数据结构的东西，因为那样会非常耗时，因为这里我给出了一个非常小的例子，但我实际上正在处理一个更大的问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:39:44.857

> 并且非常大，因此很难将该数据结构从一个函数传递到另一个函数。

不，不是。Python 变量不是这样工作的。你隐含地得到一个指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:02:52.553

Python 变量和函数参数始终只是对对象的引用，因此不必担心将大型数据结构作为函数参数传递：数据不会被复制，只会创建新的引用。

但是，如果您知道您的代码将始终只处理数据结构的单个实例，则可以将其存储在全局变量中。您可以创建一个单独的模块，将数据加载到模块级变量中，然后将该模块导入 main.py 和 other_module.py。

# php - php 与 jquery html 弹出

> ID：10100401
> 
> 赞同：0
> 
> 时间：2012-04-11T05:38:03.867
> 
> 标签：php, jquery, html, css

这实际上是大型项目的一部分，所以我没有包含 css，但如果真的有必要，我愿意在这里发布。

好的，我有这个代码

```
<html>
<head>
<script src="js/jquery.js"></script>
<script type="text/javascript">
var q = "0";
function rr()
{
var q = "1";
var ddxz = document.getElementById('inputbox').value;
if (ddxz === "")
{
alert ('Search box is empty, please fill before you hit the go button.');
}
else
{
$.post('search.php', { name : $('#inputbox').val()}, function(output) {
    $('#searchpage').html(output).show();
});
var t=setTimeout("alertMsg()",500);
}

}

function alertMsg()
{
$('#de').hide();
$('#searchpage').show();
}

  // searchbox functions ( clear & unclear )
function clickclear(thisfield, defaulttext) {
    if (thisfield.value == defaulttext) {
        thisfield.value = "";
    }
}

function clickrecall(thisfield, defaulttext) {
    if (q === "0"){

    if (thisfield.value == "") {
        thisfield.value = defaulttext;
    }}
    else
    {

    }
}

//When you click on a link with class of poplight and the href starts with a # 

$('a.poplight[href^=#]').click(function() {

var q = "0";

$.post('tt.php', { name : $(this).attr('id') }, function(output) {
    $('#pxpxx').html(output).show();
});

    var popID = $(this).attr('rel'); //Get Popup Name

    var popURL = $(this).attr('href'); //Get Popup href to define size

    //Pull Query & Variables from href URL

    var query= popURL.split('?');

    var dim= query[1].split('&');

    var popWidth = dim[0].split('=')[1]; //Gets the first query string value

    //Fade in the Popup and add close button

    $('#' + popID).fadeIn().css({ 'width': Number( popWidth ) }).prepend('<a     href="#" class="close"><img src="images/close_pop.png" class="btn_close" title="Close Window" alt="Close" /></a>');

    //Define margin for center alignment (vertical + horizontal) - we add 80 to the height/width to accomodate for the padding + border width defined in the css

    var popMargTop = ($('#' + popID).height() + 80) / 2;

    var popMargLeft = ($('#' + popID).width() + 80) / 2;

    //Apply Margin to Popup

    $('#' + popID).css({ 

        'margin-top' : -popMargTop,

        'margin-left' : -popMargLeft

    });
    //Fade in Background

    $('body').append('<div id="fade"></div>'); //Add the fade layer to bottom of the body tag.

    $('#fade').css({'filter' : 'alpha(opacity=80)'}).fadeIn(); //Fade in the fade layer 

    return false;

});

//Close Popups and Fade Layer

$('a.close, #fade').live('click', function() { //When clicking on the close or fade     layer...

    $('#fade , .popup_block').fadeOut(function() {

        $('#fade, a.close').remove();  

}); //fade them both out

    return false;

});

    }); 
</script>
</head>
<body>
<input name="searchinput" value="search item here..." type="text" id="inputbox"     onclick="clickclear(this, 'search item here...')" onblur="clickrecall(this,'search item here...')"/><button id="submit" onclick="rr()"></button>

<div id="searchpage"></div>
<div id="backgroundPopup"></div>
<div id="popup" class="popup_block">
<div id="pxpxx"></div>              
</div>
</body>
</html> 
```

好的，这里是 php 文件（search.php），一旦用户单击按钮（#submit），然后 php 文件（搜索.php）将处理数据并检查mysql上是否有与jquery传递的数据匹配的记录，因此如果存在则search.php会将数据传递回jquery函数，然后是jquery函数将数据输出到指定的 div(#searchpage)。

```
<?
if(isset($_POST['name']))
{
$name = mysql_real_escape_string($_POST['name']);

$con=mysql_connect("localhost", "root", "");
if(!$con)
{
die ('could not connect' . mysql_error());
}
mysql_select_db("juliver", $con);

$result = mysql_query("SELECT * FROM items WHERE title='$name' OR description='$name'     OR type='$name'"); 
$vv = "";
while($row = mysql_fetch_array($result))
{
$vv .= "<div id='itemdiv2' class='gradient'>";
$vv .= "<div id='imgc'>".'<img src="Images/media/'.$row['name'].'" />'."<br/>";
$vv .= "<a href='#?w=700' id='".$row['id']."' rel='popup' class='poplight'>View     full</a>"."</div>";
$vv .= "<div id='pdiva'>"."<p id='ittitle'>".$row['title']."</p>";
$vv .= "<p id='itdes'>".$row['description']."</p>";
$vv .= "<a href='http://".$row['link']."'>".$row['link']."</a>";
$vv .= "</div>"."</div>";
}
echo $vv;
mysql_close($con);
}
else
{
echo "Yay! There's an error occured upon checking your request";
}
?> 
```

这是 php 文件（tt.php），jquery a.poplight click 函数将在其中传递数据，然后就像第一个 php 文件（search.php）的函数一样，它将在 mysql 上查找数据匹配，然后将它传回jquery，然后jquery会将文件输出到指定的div（#popup），一旦输出到指定的div（#popup），那么div（#popup）就会像弹出框一样显示（这实际上是一个弹出框）。

```
<? 
//session_start(); start up your PHP session!//
if(isset($_POST['name']))
{
   $name = mysql_real_escape_string($_POST['name']);

$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("juliver", $con);

$result = mysql_query("SELECT * FROM items WHERE id='$name'");

while($row = mysql_fetch_array($result))
{   
    $ss = "<table border='0' align='left' cellpadding='3' cellspacing='1'><tr><td>";    
$ss .= '<img class="ddx" src="Images/media/'.$row['name'].'" />'."</td>";
    $ss .= "<td>"."<table><tr><td style='color:#666; padding-right:15px;'>Name</td><td     style='color:#0068AE'>".$row['title']."</td></tr>";
    $ss .= "<tr><td style='color:#666; padding-right:15px;'>Description</td>    <td>".$row['description']."</td></tr>";
    $ss .= "<tr><td style='color:#666; padding-right:15px;'>Link</td><td><a href='".$row['link']."'>".$row['link']."</a></td></tr>";
    $ss .= "</td></tr></table>";

}
echo $ss;
mysql_close($con);
}
?> 
```

这是问题所在，弹出框（.popup_block）未显示，因此jquery已输出到该div（.popup_block）的php文件（tt.php）中的数据（如果成功传递的话）将php文件放入jquery并由jquery输出）。

我的一些依赖于此的代码实际上正在工作，并且弹出框实际上正在显示，只是这部分，它没有显示并且没有来自 php 文件的数据，它是 jquery 函数应该将它输出到那个 div(.popup_block)

希望有人可以提供帮助，在此先感谢，无论如何我愿意接受任何建议和建议。

朱利弗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:00:51.310

首先想到的是，在页面加载之前调用脚本。要解决此问题，请使用：

```
 $(document).ready(function()
 {
      $(window).load(function()
      {
           //type here your jQuery
      });
 }); 
```

这将导致脚本等待整个页面加载，包括所有内容和图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T14:16:17.620

如果您使用 ajax 将数据交换到 php 文件中。然后检查您的 ajax 函数是否实际从您的 php 文件接收返回数据。

# .net - 我们是否需要始终在机器上安装根证书？

> ID：10100403
> 
> 赞同：3
> 
> 时间：2012-04-11T05:38:12.467
> 
> 标签：.net, certificate, smartcard, x509certificate2

我正在使用智能卡对用户进行身份验证。我有一个身份验证服务 (SecurityTokenService)，它处理服务器上的身份验证逻辑。

我正在使用[X509Certificate2.Verify()](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.verify.aspx)来验证证书。由于此 API 可以通过上网和联系证书颁发机构 (CA) 来检查证书是否有效/撤销，我是否需要服务器上的根证书？

**我们可以避免在本地计算机上拥有根证书吗？或者根证书总是强制性的？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T09:00:13.900

我尝试了一些事情，以下是观察结果：

1.  首先`X509Certificate2.Verify()`不检查链中的所有证书是否都被吊销。从 [这篇](http://social.msdn.microsoft.com/Forums/en-US/windowssecurity/thread/0bdea687-7b5a-493b-b46a-87f8df5049a4)文章中我了解到，Verify 方法在内部使用[Crypt32 CertVerifyCertificateChainPolicy](http://msdn.microsoft.com/en-us/library/windows/desktop/aa377163%28v=vs.85%29.aspx)函数。它的文档说它不执行证书吊销检查。简而言之，Verify 方法只检查调用它的证书是否被撤销。

2.  关于根证书：

    *   如果您正在使用`X509Certificate2.Verify()`并且没有根证书，那么该方法将直接返回`false`. 因此，使用这种方法，根证书是绝对需要的。
    *   如果您使用[X509Chain](http://msdn.microsoft.com/en-us/library/9bys9et1.aspx)构建信任链，那么您可以决定[是否排除根证书吊销](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509revocationflag.aspx)或是否[在线/离线验证](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509revocationmode.aspx)证书的吊销状态。
    *   但是，无论您是否上线，或者是否排除根证书，如果根证书缺失，您会在[ChainStatus中获取](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509chainstatus.status%28v=vs.90%29.aspx)[PartialChain](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509chainstatusflags%28v=vs.100%29.aspx)值。因此，要构建完整的信任链，您的机器上需要一个根证书。

希望这对想了解更多关于 C# 中的证书验证的人有所帮助。

# mongodb - Mongodb 在特定的 db 命令上使用 db.help()

> ID：10100404
> 
> 赞同：2
> 
> 时间：2012-04-11T05:38:23.930
> 
> 标签：mongodb

当我输入 db.help() 它返回

```
DB methods:
        db.addUser(username, password[, readOnly=false])
        db.auth(username, password)
...
...
        db.printShardingStatus()
...
...
        db.fsyncLock() flush data to disk and lock server for backups
        db.fsyncUnock() unlocks server following a db.fsyncLock() 
```

我想了解如何获得特定命令的更详细帮助。问题出在 printShardingStatus 上，因为它返回“要打印的块太多，如果要打印，请使用详细”

```
mongos> db.printShardingStatus()
--- Sharding Status ---
  sharding version: { "_id" : 1, "version" : 3 }
  shards:
        {  "_id" : "shard0000",  "host" : "localhost:10001" }
        {  "_id" : "shard0001",  "host" : "localhost:10002" }
  databases:
        {  "_id" : "admin",  "partitioned" : false,  "primary" : "config" }
        {  "_id" : "dbTest",  "partitioned" : true,  "primary" : "shard0000" }
                dbTest.things chunks:
                                shard0001       12
                                shard0000       19
                        too many chunks to print, use verbose if you want to for
ce print 
```

我发现对于那个特定的命令，我可以指定布尔参数

```
db.printShardingStatus(true) 
```

未使用 db.help() 显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:38:42.970

找到我们更多关于命令的一种方法是在不带括号的情况下调用它以查看 javascript :)

```
rs:PRIMARY> db.printShardingStatus
function (verbose) {
    printShardingStatus(this.getSiblingDB("config"), verbose);
}
rs:PRIMARY 
```

# tfs - 将团队项目从一个集合移动到另一个集合

> ID：10100406
> 
> 赞同：22
> 
> 时间：2012-04-11T05:38:32.270
> 
> 标签：tfs, team-project

在 TFS 2010 中，是否有一种（简单）方法可以将单个 TeamProject 从一个集合移动到另一个集合（在一个服务器中）？包括源代码、工作项、文档、项目站点...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T04:54:03.240

不是很简单，您可以拆分集合并使用您在其中移动的团队项目创建一个新集合，但您不能开箱即用地将团队项目合并到现有集合中。

您可以做的是使用 TFS 集成平台[http://visualstudiogallery.msdn.microsoft.com/eb77e739-c98c-4e36-9ead-fa115b27fefe](http://visualstudiogallery.msdn.microsoft.com/eb77e739-c98c-4e36-9ead-fa115b27fefe)或[http://tfsintegration.codeplex.com](http://tfsintegration.codeplex.com)将您的团队项目迁移到新系列。然而，这是一个 DataMigration，它不会保留甚至移动所有数据，但它会移动源代码和工作项。可以使用 STSADM 导出和导入命令移动团队项目站点（如果需要），包括文档，请参阅[http://technet.microsoft.com/en-us/library/cc288191%28v=office.12 %29.aspx](http://technet.microsoft.com/en-us/library/cc288191%28v=office.12%29.aspx)了解有关移动 SharePoint 网站的详细信息

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T07:29:38.977

不，没有。

但这是一个要求的功能：http: [//visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2037613-make-it-possible-to-move-a-team-project-between-te](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2037613-make-it-possible-to-move-a-team-project-between-te)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T17:57:13.203

这并不容易，但它是可行[的：拆分团队项目集合](http://msdn.microsoft.com/en-us/library/dd936158.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T08:52:02.823

是的，有一个功能请求，但我不认为它会在包装盒中发货，所以使用[TFS 集成平台的另一个选项](http://tfsintegration.codeplex.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-22T10:11:53.233

有一种方法可以使用 git-tfs 和 git-tf 工具从一个集合移动到另一个集合，这是一种解决方法，但如果确实需要这样做，则可以使用。

这是在此处逐步发布的： [https ://fabiostawinski.wordpress.com/2017/03/22/tfvc-to-git-to-tfvc-is-it-possible/](https://fabiostawinski.wordpress.com/2017/03/22/tfvc-to-git-to-tfvc-is-it-possible/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-11-06T09:35:55.570

在 VS 2013 中 - 将两个集合映射到某些文件夹，然后“移动”命令将可用：

[![在此处输入图像描述](../Images/2575c1f90d63c5da562aa79a29402f87.png)](https://i.stack.imgur.com/T6qLQ.jpg)

# java - 根据数据库中的可用性插入/更新行

> ID：10100408
> 
> 赞同：6
> 
> 时间：2012-04-11T05:38:44.060
> 
> 标签：java, mysql, hibernate, jpa, jdbc

这是一种常见的情况，但我想找出哪种方式是**性能优化方式和最佳实践**。

我有一个有 4 列的表：id、name 和其他两个字段。Id 是 PK，name 是唯一键。我正在从 excel 文件中读取数据，在 Domain 对象中填充每一行的值，然后保存它。保存时，我想查看是否已经存在同名的记录，如果存在，我想更新它。否则将其另存为新记录。

我可以通过对名称的正常选择查询并检查是否为空，并基于该插入或更新来做到这一点，但我有数千行要从 excel 文件中读取，并且请求的非功能性**要求是性能**。

所以请告诉我处理这种情况的最佳方法是什么？我还没有开始编写我的持久层部分，所以我可以根据你的建议切换到 ORM 或纯 jdbc。

编辑：如果我使用名称作为主键，那么我想我可以使用 saveOrUpdate 或从 ORM 合并，来满足我的需要。这是不是一个好主意？？？谢谢和问候，普拉萨特。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:08:46.747

我认为最快的方法是在数据库本身中执行所有插入/更新，而不是连接到它并使用大量语句。

请注意，这是特定于 Oracle 的，但其他数据库可能有类似的概念。

我将使用以下方法：首先将 Excel 数据保存为数据库服务器 ( `/mydatadir/mydata.csv`) 上的 CSV 文件，然后在 Oracle 中我将使用[外部表](http://docs.oracle.com/cd/B28359_01/server.111/b28319/et_concepts.htm)：

```
create or replace directory data_dir as '/mydatadir/';
create table external_table (
  id number(18),
  name varchar2(30),
  otherfield1 varchar2(40),
  otherfield2 varchar2(40))
organization external (
  type oracle_loader
  default directory data_dir
  access parameters
  ( fields terminated by ',' )
  location ('mydata.csv')
) 
```

（注意，不必每次都设置外部表）

然后您可以使用以下命令将数据[合并](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm)到您的表中：

```
merge into yourtable t
using external_table e
on t.name = e.name
when matched then
   update set t.id = e.id, 
              t.otherfield1 = e.otherfield1, 
              t.otherfield2 = t.otherfield2
when not matched then
   insert (t.id, t.name, t.otherfield1, t.otherfield2)
   values (e.id, e.name, e.otherfield1, e.otherfield2) 
```

这将在一个 Oracle 命令中更新行`yourtable`，因此所有工作都将由数据库执行。

编辑：

此`merge`命令可以通过普通 JDBC 发出（尽管我更喜欢使用 Spring 的[SimpleJdbcTemplate](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html)）

编辑2：

在 MySQL 中，您可以使用以下构造来执行合并：

```
insert into yourtable (id, name, otherfield1, otherfield2)
values (?, ?, ?, ?), 
       (?, ?, ?, ?), 
       (?, ?, ?, ?) --repeat for each row in the Excel sheet...
on duplicate Key update
set otherfield1 = values(otherfield1),
    otherfield2 = values(otherfield2) 
```

这可以作为一个普通的 JDBC 语句发出，并且比单独的更新和插入要好，您可以从电子表格中分批（比如说）一百行调用这些语句。这意味着您的 Excel 工作表中每 100 行有 1 次 JDBC 调用，并且应该表现良好。这将允许您在没有外部表的情况下执行此操作（您需要 name 列上的唯一索引才能工作，我不会更改主键，因为如果您需要更改，这可能会导致外键出现问题某人的名字）。

MySQL 也有[external tables](http://dev.mysql.com/doc/refman/5.1/en/csv-storage-engine.html)的概念，我认为这比按照上面的批量插入数据要快。只要将 csv 文件上传到正确的位置，导入应该会很快进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:36:04.093

读取 Set 中的所有名称并减去从 Excel 文件中读取的名称 Set 的使用组合可能是合理的。

```
Set dbSet=//fill it from SQl query;
Set newSet//fill it from the file;

newSet.removeAll(dbSet); //left non existing ones to be inserted. 
```

originalNewSet（可以是初始的克隆）

```
originalNewSet.removeAll(insertingSet); //left records to be updated. 
```

# c# - 我们如何在 C# .net 中单击一页内的按钮上打开弹出框或阴影框

> ID：10100411
> 
> 赞同：-1
> 
> 时间：2012-04-11T05:39:06.043
> 
> 标签：c#, .net

我在打开弹出框或阴影框时遇到问题。我希望当我们运行 xyz 页面时，在该页面上，当我们单击添加按钮时，弹出框或阴影框将打开。请建议我。

“谢谢”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:45:20.680

如果使用 ajaxcontroltoolkit 你可以使用 ModalPopup.show 。如果不是你可以使用 jquery modal

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:48:19.607

如果您希望弹出窗口显示 onbutton 点击​​事件？如果您使用的是 jquery 或 javascript，则使用按钮控件的“onClientClick”属性调用该函数。在 AJAX 的情况下使用 modappopup 的 show() 函数 例如：modalpopupname.Show()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T05:44:47.233

弹出窗口是通过切换 dom 元素的可见性来完成的。这个任务不能用c#直接完成。我建议使用谷歌搜索“如何制作弹出窗口”并查看非常简单的 html + javascript 示例。Jquery 也将成为使这项任务更容易的库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T05:56:46.370

使用 Jquery Modals 可以最好地实现这一点。参考[JQuery 模态](http://jqueryui.com/demos/dialog/#modal)

如果您打算从 Jquery UI 对话框用户回发一个问题，您会遇到 jquery 将对话框移到 Form 标签之外。要解决此问题，您需要将其移回表单标签内：

```
 jQuery(function() {
    var dlg = jQuery("#dialog").dialog({ 
                    draggable: true, 
                    resizable: true, 
                    show: 'Transfer', 
                    hide: 'Transfer', 
                    width: 320, 
                    autoOpen: false, 
                    minHeight: 10, 
                    minwidth: 10 
     });
      dlg.parent().appendTo(jQuery("form:first"));
}); 
```

有关上述问题的更多信息，请参阅[此SO Post。](https://stackoverflow.com/questions/757232/jquery-ui-dialog-with-asp-net-button-postback)

# object - 如何确定骆驼交换对象的类型

> ID：10100413
> 
> 赞同：1
> 
> 时间：2012-04-11T05:39:10.210
> 
> 标签：object, casting, apache-camel

我在 Web 服务器上运行了两种不同的服务。这两个服务都有一个名为“xyz”的操作，带有以下参数。

服务一：

`Public String xyx(Student object) {}`

服务二：

`public String xyz(Employee object){}`

现在我有一个客户端，它将根据收到的消息调用其中一项服务的操作。该消息将作为骆驼交换接收。所以我需要识别消息的类型，然后调用适当的服务。

我如何识别作为骆驼交换接收到的消息的原始类型。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-31T18:25:56.370

或者你可以这样做：

```
from("foo:incommingroute")
    .choice()
        .when(simple("${body} is 'java.lang.String'"))
            .to("webservice:Student")
        .when(simple("${body} is 'foo.bar.Employee'"))
            .to("webservice:Employee")
        .otherwise()
            .to("jms:Deadletter")
        .end(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T05:47:00.673

尝试 exchange.getIn().getBody() instanceof Student

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-11T13:46:07.657

我会在标头中设置一个值来指示它是哪个服务，然后在骆驼路线上发送它。这种方法只是这样做的一种方法。Christian Schneider 有另一个出色的解决方案，由于我对 Camel 的了解比以往任何时候都多，因此我可能会更多地使用它。但是，两者都将实现相同的目标，并且取决于您问谁，一个可能比另一个更清楚。

例如，您可以这样做：

```
public void foo(Exchange exchange){

 exchange.getIn().setHeader("MsgType", "Student");

} 
```

然后，您可以过滤 Java DSL 甚至 spring DSL 中的标头。

在 Java DSL 中你会做这样的事情（伪代码）

```
from("foo:incommingroute")
.choice()
.when(header("MsgType").equals("Student"))
    .to("webservice:Student")
.when(header("MsgType").equals("Employee"))
    .to("webservice:Employee")
.otherwise()
    .to("jms:Deadletter")
.end(); 
```

在 Spring DSL 中，你会做这样的事情（伪代码）

```
<route>
 <from uri="foo:incommingroute"/>
   <choice>
     <when>
       <simple>${header.MsgType} equals 'Student'</simple>
       <to uri="webservice:Student"/>
    </when>
    <when>
      <simple>${header.MsgType} equals 'Employee'</simple>
      <to uri="webservice:Employee"/>
   </when>
   <otherwise>
      <to uri="jms:badOrders"/>
   <stop/>
 </otherwise>
 </choice>
 <to uri="jms:Deadletter"/>
</route> 
```

您还可以在此链接[http://camel.apache.org/content-enricher.html](http://camel.apache.org/content-enricher.html)查看丰富器模式。基本上我的建议是遵循浓缩模式。如果你能告诉我你是如何向 Camel 发送消息的，那么我可能会提供更多帮助。

希望这能给您一些想法，如果代码中存在语法错误等，对不起，我在公共汽车站，没有时间检查它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-25T22:18:37.197

我更喜欢直接在路由定义中而不是在`Processor`. 这是使用 a`Predicate`来确定主体类类型的 Camel DSL 方法。它假定您已经将`Exchange`主体反序列化为一个`Student`或`Employee`对象。

```
choice()
  .when(body().isInstanceOf(Student::class))
    .to(...)
  .when(body().isInstanceOf(Employee::class))
    .to(...)
.end() 
```

如果您要在整个路由中对主体执行各种转换，从而在各个阶段产生各种`Student`或`Employee`对象类型（例如 a`Student`然后 a`StudentEntity`等），那么将类型保存在标题或属性中作为某个字符串常量在路线的开始可能是更清洁的方法。

```
// Note that this labelling could be bundled into a processor
choice()
  .when(body().isInstanceOf(Student::class))
    .setProperty("TYPE", "STUDENT")
  .when(body().isInstanceOf(Employee::class))
    .setProperty("TYPE", "EMPLOYEE")
.end()

// later after some body transformations
.choice()
  .when(exchangeProperty("TYPE").isEqualTo("STUDENT"))
    // process student 
```

最后，您可能可以在处理器中完成所有操作，但我认为这种与服务调用相结合的分支逻辑是 Camel 反模式。

```
class MyProcessor implements Processor {
  @Override
  public void process(Exchange exchange) {
    Object body = exchange.getIn().getBody()
    if (body instanceOf Student) {
      // invoke StudentService
    } else if (body instanceOf Employee) {
      // invoke EmployeeService
    }
  }
}

// Route definition
from(...)
  .process(myProcessor) 
```

# java - 在超类/子类框架中使用 ArrayList

> ID：10100416
> 
> 赞同：1
> 
> 时间：2012-04-11T05:39:34.973
> 
> 标签：java, inheritance, arraylist

我有一个关于在简单继承结构中使用 ArrayLists 等数据结构的问题。我很难措辞：希望你能理解我想问的问题。

我有一个超类`Parrot`和一个`PirateParrot`扩展的子类`Parrot`。在`Parrot`中，我有以下方法：

```
 public String speak() {
     int rand = (int)(Math.random() * sounds.size());
     return sounds.get(rand);
    } 
```

它在类`sounds`中创建的 ArrayList 中返回一个随机字符串。`Parrot`

如果我创建一个`PirateParrot`被调用的单独实例`polly`，它也有自己的 ArrayList，并尝试在`polly.speak();`没有任何隐式实现的情况下调用类中的 speak 方法，我会*在线程“main”java.lang.IndexOutOfBoundsException: Index 中*`PirateParrot`抛出一个“异常” *：0，尺寸：0"*

`Parrot`如果我专门从into复制/粘贴 speak() 方法`PirateParrot`，则代码可以正常编译并正常运行。之前的问题到底是什么？有没有办法让它正确运行，而不必将 speak() 方法复制/粘贴到 中`PirateParrot`？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T05:45:16.717

如果我正确理解了这个问题，那么最简单的解决方法是不在`sounds`. `PirateParrot`相反，请确保在`sounds`中声明，然后在构造函数中使用您想要的任何声音填充继承的变量。`protected``Parrot``PirateParrot``sounds``PirateParrot`

另一种选择可能是有一个`getSounds()`方法来返回列表并`getSounds()`从内部调用`speak()`而不是`sounds`直接引用。然后`PirateParrot`只需要覆盖`getSounds()`以返回其版本`sounds`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:52:24.720

```
public class Parrot {
  private final ArrayList<String> sounds;

  private static ArrayList<String> REGULAR_PARROT_SOUNDS = new ArrayList<String>();
  static {
    REGULAR_PARROT_SOUNDS.add(...);
    ...
  }

  protected Parrot(ArrayList<String> sounds) {
    this.sounds = sounds;
  }

  public Parrot() {
    this(REGULAR_PARROT_SOUNDS);
  }
}

public class PirateParrot {
  private static ArrayList<String> PIRATE_PARROT_SOUNDS = ...;

  public PirateParrot() {
    super(PIRATE_PARROT_SOUNDS);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T05:52:28.133

在调用它之前，您没有初始化和填充`sounds`它，请执行以下操作：在of中
初始化和填充，然后调用*superclass* '方法。`sounds``constructor``PirateParrot`*`speak`*

# asp.net-mvc-3 - 获取缓存的过期时间

> ID：10100426
> 
> 赞同：1
> 
> 时间：2012-04-11T05:40:42.690
> 
> 标签：asp.net-mvc-3, caching

是否可以获取特定缓存的过期时间？我希望能找到这样的东西：

```
HttpRuntime.Cache(key).ExpireTime 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-14T19:05:56.047

只是为了方便人们点击这篇文章，这很好用：

```
 private DateTime GetCacheUtcExpiryDateTime(string cacheKey)
    {
        object cacheEntry = Cache.GetType().GetMethod("Get", BindingFlags.Instance | BindingFlags.NonPublic).Invoke(Cache, new object[] { cacheKey, 1 });
        PropertyInfo utcExpiresProperty = cacheEntry.GetType().GetProperty("UtcExpires", BindingFlags.NonPublic | BindingFlags.Instance);
        DateTime utcExpiresValue = (DateTime)utcExpiresProperty.GetValue(cacheEntry, null);

        return utcExpiresValue;
    } 
```

此处找到的原始答案[如何获取 HttpRuntime.Cache 对象的到期日期时间？](https://stackoverflow.com/questions/344479/how-can-i-get-the-expiry-datetime-of-an-httpruntime-cache-object)

请注意，这使用反射。不过效果很好，并以`DD/MM/YYYY HH:MM:SS`格式为您提供了一个不错的 UTC 日期。

# amazon-s3 - Redis、AOF 文件和 Amazon S3

> ID：10100427
> 
> 赞同：0
> 
> 时间：2012-04-11T05:40:43.020
> 
> 标签：amazon-s3, persistence, redis

有没有办法将 AOF 文件保存在 Amazon S3 上而不是本地存储？

这将避免大型数据集的磁盘空间不足。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T07:12:44.703

您可以将 S3 挂载为驱动器号（例如：[TntDrive](http://tntdrive.com/)）并将 Redis 设置为写入该驱动器，**但这是非常错误的**；延迟会杀死你。请参阅“*由于 AOF 和磁盘 I/O 导致的延迟*”下的[http://redis.io/topics/latency](http://redis.io/topics/latency)。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:11:52.857

不，你不能这样做，只需`BGREWRITEAOF`定期压缩 AOF 的大小。或者使用转储文件而不是 AOF 文件。*

# jquery - 如何在不刷新页面的情况下在 jquery 选项卡中显示来自 mysql 的数据？

> ID：10100437
> 
> 赞同：0
> 
> 时间：2012-04-11T05:41:36.050
> 
> 标签：jquery, ajax, jquery-ui, tabs, jquery-tabs

我有一个页面，其中将有许多选项卡，我想在从 mysql 数据库中提取的每个选项卡中显示数据。我需要在 jquery 中使用此功能，而无需刷新页面，只需单击要显示的数据与人员 ID 相关的选项卡。

谁能告诉我如何在jquery中做到这一点

提前致谢，

拉姆赛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:56:04.830

在 JQuery 演示网站上有一个示例，几乎实现了这个确切的场景：http: [//jqueryui.com/demos/tabs/#ajax](http://jqueryui.com/demos/tabs/#ajax)。JQuery UI 库允许您将选项卡源编写为普通的 href，并将它们转换为启用 AJAX 的选项卡。因此，您所要做的就是将每个选项卡实现为单独的 URL/查询字符串，并根据需要从 MySql 源中提取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:51:10.253

这很简单。您需要做的就是具有以下属性的 ajax 方法：

客户端：

带有ajax方法的jquery代码

1.) php 代码将迭代您的 mysql 数据库的 url 2.) 要发送的数据。将在 json 形式的内部数据属性中。3.）在收到响应后编写方法，即json。

带有 php/mysql 的服务器端

1.) 使用 $_GET 方法获取数据。在你的情况下，人 id 2.）查看 db。3.) 使用 echo json_encode(->data<-) 进行编码；

了解更多信息。请参考：

[这描述了 jquery .ajax 方法。我假设你知道 php 和 mysql](http://api.jquery.com/jQuery.ajax/)

# java - 如何验证硒中某个字段的粗体外观

> ID：10100438
> 
> 赞同：5
> 
> 时间：2012-04-11T05:41:36.090
> 
> 标签：java, selenium

我正在尝试自动化手动脚本（在 java 中使用 selenium）来检查网页上某个字段（标签：代表必填字段）的粗体外观。什么是可能的 selenium java 函数来验证某些元素的粗体外观（在类中没有关于外观的信息）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T14:55:14.063

使用 WebDriver（在 Java 中），您可以使用[getCssValue()](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html#getCssValue%28java.lang.String%29)。

```
import static org.junit.Assert.assertTrue;
(...)

// assuming elem is a healthy WebElement instance, your found element
String fontWeight = elem.getCssValue("font-weight");
assertTrue(fontWeight.equals("bold") || fontWeight.equals("700")); 
```

[（因为`700`与 相同`bold`）](http://www.w3.org/TR/1998/REC-CSS2-19980512/fonts.html#propdef-font-weight)

* * *

使用 Selenium RC，请参阅[此技术](https://stackoverflow.com/questions/8135080/get-color-attribute-from-the-styles-table)，只需使用`font-weight`（或`fontWeight`取决于使用情况）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T14:37:17.097

您可以使用该方法检查[字体粗细](http://www.w3schools.com/cssref/pr_font_weight.asp)`style()`（假设您实际上使用的是 Selenium-Webdriver）。

所以说你有像这样的HTML：

```
<body>
  <div id='1' style='font-weight:normal'>
    <div id='2' style='font-weight:bold'>Field Label</div>
    <div id='3'>Field</div>
  </div>
</body> 
```

您可以执行以下操作来检查字段标签 div 的字体粗细（以下是 Ruby 中的，尽管在其他语言中应该可能类似）。

```
el = driver.find_element(:id, "2")
if el.style('font-weight') >= 700
  puts 'text is bold'
else
  puts 'text is not bold'
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T15:26:36.457

我真的很喜欢 Justin Ko 建议使用该`style("font-weight")`方法，但是在 python 绑定中，等效项似乎是`value_of_css_property("font-weight")`

```
>>> element = self.wd.find_element_by_id("some-id")
>>> element.value_of_css_property('font-weight')
u'700'
>>> element.style('font-weight')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'WebElement' object has no attribute 'style' 
```

[http://code.google.com/p/selenium/source/browse/py/selenium/webdriver/remote/webelement.py#132](http://code.google.com/p/selenium/source/browse/py/selenium/webdriver/remote/webelement.py#132)

很抱歉，这是一个单独的答案而不是对该答案的评论，但我显然有太低的业力门槛来评论那里

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T02:28:58.787

我看到你提到的元素有一个复合类，为什么不尝试用label_required类定位所有元素，python示例

```
els = driver.find_elements_by_css_selector(div[class*=label_required])
self.assertTrue(len(els) == [known value of required fields on page]) 
```

java（注意：我不写java代码，所以语法可能有误）：

```
import static org.junit.Assert.assertTrue;
WebDriver driver = new FirefoxDriver();
WebElement els=driver.findElements(By.cssSelector("div[class*=label_required]"));
assertTrue(els.length == [known value of required fields on page]); 
```

# jsf-2 - JSR 303 bean 验证，扩展的 ConstraintValidator 不能使用 CDI

> ID：10100439
> 
> 赞同：2
> 
> 时间：2012-04-11T05:41:38.153
> 
> 标签：jsf-2, cdi, bean-validation

我尝试在类级别学习带有 bean 验证的 JSF 2.0，如下所示： -

实用程序

```
@Singleton
public class MyUtility {
    public boolean isValid(final String input) {
       return (input != null) || (!input.trim().equals(""));
    }
} 
```

约束注解

```
@Retention(RetentionPolicy.RUNTIME)
@Target({
    ElementType.TYPE,
    ElementType.ANNOTATION_TYPE,
    ElementType.FIELD
    })
@Constraint(validatedBy = Validator.class)
@Documented
public @interface Validatable {
    String  message() default "Validation is failure";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};
} 
```

约束验证器

```
public class Validator extends ConstraintValidator<Validatable, MyBean> {
    //
    //----> Try to inject the utility, but it cannot as null.
    //
    @Inject
    private MyUtility myUtil;

    public void initialize(ValidatableconstraintAnnotation) {
        //nothing
    }

    public boolean isValid(final MyBean myBean, 
                           final ConstraintValidatorContext constraintContext) {

        if (myBean == null) {
            return true;
        }
        //
        //----> Null pointer exception here.
        //
        return this.myUtil.isValid(myBean.getName());
    }
} 
```

数据 bean

```
@Validatable
public class MyBean {
    private String name;
    //Getter and Setter here
} 
```

JSF 支持 bean

```
@Named
@SessionScoped
public class Page1 {
    //javax.validation.Validator
    @Inject
    private Validator validator;

    @Inject
    private MyBean myBean;

    //Submit method
    public void submit() {
        Set<ConstraintViolation<Object>> violations = 
                         this.validator.validate(this.myBean);
        if (violations.size() > 0) {
            //Handle error here.
        }
    }
} 
```

运行后，我遇到了`java.lang.NullPointerException`该行中名为“Validator”的类的异常`return this.myUtil.isValid(myBean.getName());`。我了解 CDI 不会注入我的实用程序实例。如果我错了，请纠正我。

我不确定我做错了什么还是 bean 验证限制。你能帮忙解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T08:19:27.380

您的权利，Hibernate Constraint Validator 默认情况下未注册为 CDI-Bean（尽管无法接收依赖项）。

只需将[Seam-Validation 模块](http://seamframework.org/Seam3/ValidationModule)放在您的类路径中，一切都应该运行良好。

顺便说一句：研究模块的[源代码](https://github.com/seam/validation/blob/develop/impl/src/main/java/org/jboss/seam/validation/ValidationExtension.java)是 CDI 扩展的优雅和简单的一个很好的例子。从 CDI 桥接到休眠验证只需要几十行代码...

# java - 需要 Android 固定页脚的帮助以实现线性布局

> ID：10100440
> 
> 赞同：2
> 
> 时间：2012-04-11T05:41:44.990
> 
> 标签：java, android, android-linearlayout

我的 android 布局 xml 文件中有 <.ImageView> `enter code here`s(icons) ，它们包含在`<ScrollView>`.

例如。

```
<.ScrollView><br>
<.LinearLayout><br>
<.ImageView> ...<./ImageView><br>
<./LinearLayout><br>
<./ScrollView> 
```

对于这种布局，我想附加一个固定的页脚。基本上屏幕底部有一个小标签，即使我一直向下滚动或一直滚动到顶部，它也会保持不变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T07:50:21.653

我倾向于使用`LinearLayout`作为根元素和子元素的权重来编写这样的布局，以动态分配屏幕空间。它使布局定义紧凑，不需要定义额外的 id。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="vertical" >

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="0dp" 
        android:layout_weight="1" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <ImageView ... />
            <ImageView ... />
            ...
            <ImageView ... />

        </LinearLayout>
    </ScrollView>

    <!-- footer here -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
        ...
    </LinearLayout>
</LinearLayout> 
```

然而，使用 a`RelativeLayout`作为根元素，`ScrollView`定位在底部对齐的页脚“上方”，在性能方面可能会稍好一些，尽管我怀疑在像这样的简单视图层次结构的情况下它会产生明显的不同。RelativeLayout 方法确实需要分配一些 id（至少要分配到页脚，我会说）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:45:31.610

像这样的东西..

```
<.ScrollView>
<.LinearLayout>
<.ImageView> ...<./ImageView>
<./LinearLayout>
<./ScrollView>
<LinearLayout>
<-- your footer here -->
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T05:58:43.953

你也可以这样试试..

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/linearLayout1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

            <ImageView
                android:id="@+id/imageView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

            <ImageView
                android:id="@+id/imageView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

            <ImageView
                android:id="@+id/imageView4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

            <ImageView
                android:id="@+id/imageView5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

            <ImageView
                android:id="@+id/imageView6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

            <ImageView
                android:id="@+id/imageView7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

            <ImageView
                android:id="@+id/imageView14"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />
            <ImageView
                android:id="@+id/imageView11"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

            <ImageView
                android:id="@+id/imageView8"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />
            <ImageView
                android:id="@+id/imageView12"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

            <ImageView
                android:id="@+id/imageView9"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

        </LinearLayout>
    </ScrollView>

    <RelativeLayout
        android:id="@+id/relativeLayout2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/blackbg"
        android:layout_alignParentBottom="true" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:text="Button" />

    </RelativeLayout>

</RelativeLayout> 
```

# asp.net - Application_OnError 并不总是有效

> ID：10100441
> 
> 赞同：1
> 
> 时间：2012-04-11T05:41:49.163
> 
> 标签：asp.net, exception, redirect, global-asax, application-onerror

我遇到奇怪的问题。我们在 global.asax 中有错误处理，如果发生错误，它将在特殊页面上重定向用户：

```
void Application_Error(object sender, EventArgs e) 
{
    .......
    string pageError = "~/LastError.aspx?AfterNextClick=" + afterNextClick.ToString();
    if (Request["guid"] != null)
        pageError += "&guid=" + Request["guid"];
    Server.Transfer(pageError);
} 
```

自定义错误已关闭。

```
<customErrors mode="Off"/> 
```

大多数情况下，Application_OnError 可以完美运行并将用户重定向到特定页面，但有时，用户不会被重定向到任何地方，并且会显示 ASP.NET 异常页面。
那么是否有任何情况下 global.asax 中的 Application_OnError 不会触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:45:50.263

方法内部可能发生异常`Apllication_Error`。仔细查看您在此方法中放置的代码（您放置的位置......）。

尝试在此方法中放置一个`try/catch`块来调试正在发生的事情......

# sql - 如何解决sql server远程exe连接问题？

> ID：10100449
> 
> 赞同：1
> 
> 时间：2012-04-11T05:42:45.560
> 
> 标签：sql, sql-server, sql-server-2005

Sql server 安装在远程机器上。当我通过代码连接远程 sql sever 2005 或从我的系统运行 exe 时，它​​的工作正常。Exe 被放置在远程机器中，并且 sql sever 也存在于该机器中。当我尝试从该远程系统打开该 exe 时，我收到 sql server 连接错误。

该 exe 在 windows xp 中运行没有任何问题，仅在 windows 7 中遇到此问题。

阅读微软的一篇文章，它要求在windows firefall，inbounds和outbounds下添加新规则。如前所述，添加了 TPC、UDP 端口。

尝试了以下2个链接。我还是有麻烦。

[http://www.sevenforums.com/system-security/58817-remote-access-sql-server-express-2008-windows-7-a.html](http://www.sevenforums.com/system-security/58817-remote-access-sql-server-express-2008-windows-7-a.html)

[http://msdn.microsoft.com/en-us/library/ms190181.aspx](http://msdn.microsoft.com/en-us/library/ms190181.aspx)

任何人都可以在这方面指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:50:23.877

这是默认的 SQL Server 实例还是您给它起了名字？如果您已命名它，则应以 ServerName\InstanceName 的形式访问它

它使用端口 1433 吗？如果是这样，您必须在防火墙中打开 TCP 端口 1433。如果它不是默认实例，它可能正在使用可能未在防火墙中打开的动态端口。此外，您可能需要打开 UDP 端口 1434，以便可以访问浏览器服务（如果您使用的是动态端口，则必不可少）。

是否启用了 TCP 或者您是否使用默认的共享内存（您说这在 XP 客户端上运行良好，所以我想这没问题）。

# build - 摇篮。如何为子项目列表指定共享配置？

> ID：10100451
> 
> 赞同：2
> 
> 时间：2012-04-11T05:42:54.693
> 
> 标签：build, share, gradle, subproject

有`subprojects`和`allprojects`属性，但我怎样才能从字面上列出已知的项目子集？我尝试以下方法：

```
[project(':child1'), project(':child2')] {
    ...
} 
```

这受到以下输出的启发`println allprojects`：

```
[project ':stripper', project ':webui', project ':wikidigest'] 
```

但它不起作用。日志输出：

```
* What went wrong:
A problem occurred evaluating root project 'projects'.
> No signature of method: java.util.ArrayList.call() is applicable for argument types: (build_1ngb77rivv12hrhe33snq4jat0$_run_closure4) values: [build_1ngb77rivv12hrhe33snq4jat0$_run_closure4@38a3f968]
  Possible solutions: tail(), wait(), last(), any(), max(), wait(long) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:59:44.267

解决方案是通过调用来包装列表`configure()`：

```
configure([project(':child1'), project(':child2')]) {
    ...
} 
```

# xml - XML 模式唯一键

> ID：10100452
> 
> 赞同：4
> 
> 时间：2012-04-11T05:42:55.303
> 
> 标签：xml, schema, unique

诚然，我是 Schema 的新手，我试图让特定属性在一组中是唯一的。我还需要将此值作为键，因为它将在其他地方引用。

这是我当前的架构：

```
 <xs:element name="subroutines" type="guisubroutines_Type" minOccurs="1">

    <xs:key name="Subroutine_Key">
      <xs:selector xpath="subroutine"/>
      <xs:field xpath="@name"/>
    </xs:key>

    <xs:unique name="Subroutine_Unique">
      <xs:selector xpath="subroutine"/>
      <xs:field xpath="@name"/>
    </xs:unique>

  </xs:element>

  <xs:complexType name="guisubroutines_Type" >
    <xs:sequence>
      <xs:element name="subroutine" type="subroutine_Type" minOccurs="0" maxOccurs="unbounded"/>        
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="subroutine_Type">
    <xs:attribute name="name" type="xs:string" use="required"/>
  </xs:complexType> 
```

这是我的xml：

```
 <subroutines>
    <subroutine name="one"></subroutine>
    <subroutine name="one"></subroutine>
  </subroutines> 
```

我目前正在使用 Visual Studio 2010，它说这个 xml 是有效的，但如果名称不存在，它会发出警告。如果两个名称相同，我希望它发出警告。

有人可以指出我正确的方向吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T05:57:51.537

所以我在看了这里之后想通了：

[http://social.msdn.microsoft.com/Forums/en-US/xmlandnetfx/thread/25603e1c-d7dd-48d2-a9f6-8d4177845441/](http://social.msdn.microsoft.com/Forums/en-US/xmlandnetfx/thread/25603e1c-d7dd-48d2-a9f6-8d4177845441/)

快速回答是您需要将命名空间添加到 xpath 表达式。不确定这是VS的事情还是一般来说，但是......

```
<xs:key name="Subroutine_Key">
   <xs:selector xpath="mstns:subroutine"/>
   <xs:field xpath="@name"/>
</xs:key> 
```

修复了我遇到的问题。

再次感谢您的时间，我为浪费它而道歉。

# c++ - 为什么编译器试图传递一个指向引用的指针而不是这个代码片段中的指针？

> ID：10100455
> 
> 赞同：0
> 
> 时间：2012-04-11T05:43:02.273
> 
> 标签：c++, inheritance, pointers, virtual, pass-by-reference

我有 5 个文件：

*   `ExecutionStrategyInterface.h`
*   `ExecutorInterface.h`
*   `TaskCollectionInterface.h`
*   `TaskExecutor.h`
*   `TaskExecutor.cpp`.

`TaskExecutor`实现以下成员方法：

```
void TaskExecutor::execute(TaskCollectionInterface* tci, const ExecutionStrategyInterface& es) {
    es.execute(tci);
} 
```

在编译时，编译器调用一个成员方法，其参数类型为指向引用的指针
（即：）`mylib::core::TaskCollectionInterface*&`。

```
TaskExecutor.cpp: In member function ‘virtual void mylib::core::TaskExecutor::execute(mylib::core::TaskCollectionInterface*, const mylib::core::ExecutionStrategyInterface&)’:
TaskExecutor.cpp:16: error: no matching function for call to ‘mylib::core::ExecutionStrategyInterface::execute(mylib::core::TaskCollectionInterface*&) const’
./././ExecutionStrategyInterface.h:24: note: candidates are: virtual void mylib::core::ExecutionStrategyInterface::execute(TaskCollectionInterface*) const
make: *** [TaskExecutor.o] Error 1 
```

**谁能解释一下这里发生了什么？**

* * *

**课程：**

**执行策略接口.h**

```
#ifndef _EXECUTIONSTRATEGYINTERFACE_H_
#define _EXECUTIONSTRATEGYINTERFACE_H_

class TaskCollectionInterface;

namespace mylib { namespace core {

/**
 *  Interface for executing a strategy.
 */
class ExecutionStrategyInterface {
 public:
    /**
     * Executes a strategy
     */
    virtual void execute(TaskCollectionInterface* tci) const = 0;
};

}} // namespaces

#endif // _EXECUTIONSTRATEGYINTERFACE_H_ 
```

**任务集合接口.h**

```
#ifndef _TASKCOLLECTIONINTERFACE_H_
#define _TASKCOLLECTIONINTERFACE_H_

#include "./ExecutionStrategyInterface.h"

namespace mylib { namespace core {

/**
 *  Interface for a collection of tasks.
 */
class TaskCollectionInterface {
 public:
    ~TaskCollectionInterface();
};

}} // namespaces

#endif // _TASKCOLLECTIONINTERFACE_H_ 
```

**执行器接口.h**

```
#ifndef _EXECUTORINTERFACE_H_
#define _EXECUTORINTERFACE_H_

class ExecutionStrategyInterface;
class TaskCollectionInterface;

#include "./ExecutionStrategyInterface.h"
#include "./TaskCollectionInterface.h"

namespace mylib { namespace core {

/**
 *  Interface for an executor.
 */
class ExecutorInterface {
 public:
    virtual void execute(TaskCollectionInterface* tci, const ExecutionStrategyInterface& es) = 0;
    ~ExecutorInterface();
};

}} // namespaces

#endif // _EXECUTORINTERFACE_H_ 
```

**任务执行器.h**

```
#ifndef _TASKEXECUTOR_H_
#define _TASKEXECUTOR_H_

#include "./ExecutorInterface.h"

class TaskCollectionInterface;
class ExecutionStrategyInterface;

namespace mylib { namespace core {

/**
 *  Task Runner.
 */
class TaskExecutor: public ExecutorInterface {
 public:
    virtual void execute(TaskCollectionInterface* tci, const ExecutionStrategyInterface& es) = 0;
};

}} // namespaces

#endif // _TASKEXECUTOR_H_ 
```

**任务执行器.cpp**

```
#include "./TaskExecutor.h"
#include "./ExecutionStrategyInterface.h"
#include "./TaskCollectionInterface.h"

namespace mylib { namespace core {

void TaskExecutor::execute(TaskCollectionInterface* tci, const ExecutionStrategyInterface& es) {
    es.execute(tci);
}

}} // namespaces 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:46:23.587

这很令人困惑，因为您在命名空间之外前向声明该类，因此您最终会得到两个具有相同名称的不同类。你会想要这样的东西：

```
namespace mylib {
  namespace core {
    class TaskCollectionInterface;
    class ExecutionStrategyInterface {
      .
      .
      .
    };
  }
} 
```

您现在拥有的方式是，您的执行方法采用指向 ::TaskCollectionInterface 而不是 mylib::core::TaskCollectionInterface 的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:59:27.147

当 gcc 说`type&`时，它只是表示您正在传递一个左值的简写，以便您知道采用非常量引用的函数是可行的候选者。

您遇到的问题是您已将该方法声明为采用 a `::TaskCollectionInterface`，但错误消息表明您正在尝试传递 a `::mylib::core::TaskCollectionInterface`。

您有一个 in 的声明，`::mylib::core::TaskCollectionInterface`它`TaskCollectionInterface.h`掩盖`::TaskCollectionInterface`了 namespace 中的声明`mylib::core`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T05:51:28.040

这是因为您正在传递一个指向`TaskCollectionInterface* tci`该`ExecutionStrategyInterface::execute`方法的指针，而它需要一个引用。因此，在将指针传递给该函数时，您必须取消引用该指针：

```
void TaskExecutor::execute(TaskCollectionInterface* tci, const ExecutionStrategyInterface& es) {
    es.execute(*tci);
} 
```

# ruby-on-rails-3 - 使用 DateTime.strptime 时不考虑 Rails 夏令时

> ID：10100456
> 
> 赞同：4
> 
> 时间：2012-04-11T05:43:03.660
> 
> 标签：ruby-on-rails-3, date, timezone

我一直在解析字符串，我有一个测试用例给我带来了问题。使用 strptime 解析日期/时间字符串时，不考虑夏令时。据我所知，这是一个错误。我找不到有关此错误的任何文档。这是 Rails 控制台中的一个测试用例。这是 ruby​​ 1.9.3-p215 和 Rails 3.2.2。

```
1.9.3-p125 :049 >   dt = DateTime.strptime("2012-04-15 10:00 Central Time (US & Canada)", "%Y-%m-%d %H:%M %Z")  
=> Sun, 15 Apr 2012 10:00:00 -0600  
1.9.3-p125 :050 > dt = DateTime.strptime("2012-04-15 10:00 Central Time (US & Canada)", "%Y-%m-%d %H:%M %Z").utc  
=> Sun, 15 Apr 2012 16:00:00 +0000  
1.9.3-p125 :051 > dt = DateTime.strptime("2012-04-15 10:00 Central Time (US & Canada)", "%Y-%m-%d %H:%M %Z").utc.in_time_zone("Central Time (US & Canada)")  
=> Sun, 15 Apr 2012 11:00:00 CDT -05:00 
```

如您所见，我必须转换为 utc，然后返回时区才能正确解释 DST，但是时间也会偏移一小时，所以这不是我从字符串中解析出来的。是否有人有解决此错误的方法或更可靠的方法将日期 + 时间 + 时区可靠地解析为正确表示夏令时的 DateTime 对象？谢谢你。

编辑：好的，我找到了一种解决方法，虽然我不确定它有多强大。

这是一个例子：

```
ActiveSupport::TimeZone["Central Time (US & Canada)"].parse "2012-04-15 10:00" 
```

这会将日期/时间字符串解析为正确的时区。我不确定 parse 方法在处理这个问题时有多健壮，所以我想看看是否有更好的解决方法，但这是我目前的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T18:11:36.613

这是一个令人沮丧的问题。您正在寻找的 Rails 方法是`Time.zone.parse`. 首先用于`DateTime.strptime`解析字符串，然后运行它`Time.zone.parse`来设置区域。查看以下控制台输出：

```
> Time.zone
 => (GMT-06:00) Central Time (US & Canada) 
> input_string = "10/12/12 00:00"
> input_format = "%m/%d/%y %H:%M"
> date_with_wrong_zone = DateTime.strptime(input_string, input_format)
 => Fri, 12 Oct 2012 00:00:00 +0000 
> correct_date = Time.zone.parse(date_with_wrong_zone.strftime('%Y-%m-%d %H:%M:%S'))
 => Fri, 12 Oct 2012 00:00:00 CDT -05:00 
```

请注意，即使`Time.zone`' 的偏移量是 -6 (CST)，最终结果的偏移量也是 -5 (CDT)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:24:37.923

好的，这是迄今为止我发现处理此问题的最佳方法。我在 lib 文件中创建了一个实用程序方法。

```
# Returns a DateTime object in the specified timezone
def self.parse_to_date(date_string, num_hours, timezone)
  if timezone.is_a? String
    timezone = ActiveSupport::TimeZone[timezone]
  end

  result = nil
  #Chronic.time_class = timezone # Trying out chronic time zone support - so far it doesn't work
  the_date = Chronic.parse date_string
  if the_date
    # Format the date into something that TimeZone can definitely parse
    date_string = the_date.strftime("%Y-%m-%d")
    result = timezone.parse(date_string) + num_hours.to_f.hours
  end

  result
end 
```

请注意，我手动将小时数添加到时间上，因为 Chronic.parse 在解析时间方面不如我喜欢的那样健壮 - 例如，当没有在时间中添加尾随零时，它会失败，例如 8:0 而不是 8:00 .
我希望这对某人有用。将日期/时间/时区字符串解析为有效日期似乎是一件很常见的事情，但我无法找到任何将这三者结合在一起的解析代码。

# c# - C# - OracleCommandBuilder 从存储的 proc 返回 refcursor 生成插入命令

> ID：10100461
> 
> 赞同：0
> 
> 时间：2012-04-11T05:43:17.143
> 
> 标签：c#, stored-procedures, command, builder, sys-refcursor

CommandBuilder 是一个非常方便的类，它可以帮助我们避免编写 INSERT、UPDATE 和 DELETE 命令。当 CommandType 是 Text 时，它很容易做到。但是，当 CommandType 是 StoredProcedure 并且程序返回 SYS_REFCUSOR 时，它无法生成 SQL。我尝试使用 sotred 程序从 Oracle 数据库中检索数据。选择很容易。（我将输出参数 - 在本例中为光标返回 - 分配给 IDataReader）。CommandBuild 是否仍然可以使用存储的 procs 返回游标来生成更新 SQL？还是我必须手动编写所有这些 SQL。（我多么想念 MS SQL Server，因为它能够使用存储过程返回结果。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:47:45.290

经过长时间无望的搜索，我从最权威的来源找到了我的问题的答案：**ORACLE**

这是 ODP.NET 文档说明的内容：

*REF CURSOR 类型无法更新。但是，可以更新检索到 DataSet 中的数据。**因此，OracleDataAdapter 类需要自定义 SQL 语句将任何 REF CURSOR 数据更新刷新到数据库。** **OracleCommandBuilder 对象不能用于为 REF CURSOR 更新生成 SQL 语句***

我认为最后一句话正是我问题的正确答案。希望这会对某人有所帮助。

# iphone - 从模态视图中隐藏另一个视图中的按钮

> ID：10100462
> 
> 赞同：1
> 
> 时间：2012-04-11T05:43:18.990
> 
> 标签：iphone, objective-c, uibutton, presentmodalviewcontroller

在我的 iPhone 应用程序中，我有两个 UIViewcontroler 类 firstView 和 secondView。

从 firstView 开始，我正在使用`presentModalViewController:animated:`方法展示 secondView。

问题是当我关闭 secondView 时，我想在 firstView 中隐藏按钮。

虽然它确实执行了 firstView 中的代码`[button setHidden:YES];`，但它仍然没有隐藏按钮。

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:19:07.703

希望您已经声明了属性并合成了 IBOutlet `button`。

在 SecondViewController.h 中创建 FirstViewController 的对象和属性并合成它。

**SecondViewController.h**

```
@interface SecondViewController {
.
.
FirstViewController *firstView;
.
.
}
@property (nonatomic,strong) FirstViewController *firstView;

@end 
```

**第二视图控制器.m**

```
@implementation SecondViewController 
.
.
@synthesize firstView;
.
.
@end 
```

现在，当您从 firstView 呈现模态视图时

**第一视图控制器.m**

```
-(IBAction)presentModalView {
    SecondViewController *secondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    secondView.firstView = self;
    [self presentModalViewController:secondView animated:YES];
} 
```

现在在您关闭 SecondViewController 的 SecondViewController 中，只需添加此代码。

**第二视图控制器.m**

```
-(IBAction)dismissModalView {
    [self.firstView.button setHidden:YES];
    [self dismissModalViewControllerAnimated:YES];
} 
```

**编辑：**

参考这个链接：

[Objective-C 中@interface 中的@protocol 实现](https://stackoverflow.com/questions/2242101/protocol-implementation-in-interface-in-objective-c)

**EDIT-2：使用协议实现**

**SecondViewController.h**

```
@protocol SecondViewControllerDelegate <NSObject>
@required
    - (void)hideButton;
@end

@interface SecondViewController {
.
.
id <SecondViewControllerDelegate> delegate;
.
.
}
@property (retain) id delegate;

@end 
```

**第二视图控制器.m**

```
@implementation SecondViewController 
.
.
@synthesize delegate;
.
.
@end 
```

现在，当您从 firstView 呈现模态视图时

**第一视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface FirstViewController : UIViewController<SecondViewControllerDelegate>
{
.
.
.
.
}
.
.
@end 
```

**第一视图控制器.m**

```
-(IBAction)presentModalView {
    SecondViewController *secondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    secondView.delegate = self;
    [self presentModalViewController:secondView animated:YES];
}

#pragma mark - SecondViewController Delegate

- (void)hideButton
  {
      [self.button setHidden:YES]; //Here button is UIButton you want to hide when second view is dismissed.
  } 
```

现在在您关闭 SecondViewController 的 SecondViewController 中，只需添加此代码。

**第二视图控制器.m**

```
-(IBAction)dismissModalView {
    [delegate hideButton];
    [self dismissModalViewControllerAnimated:YES];
} 
```

如果您需要更多帮助，请告诉我。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:45:57.613

我会隐藏 viewDidDissapear 方法上的按钮，所以当用户调用模型时，按钮会隐藏。但这仅在您无法从 firstViewController 显示其他 viewController 时才有效。

我希望它有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:53:56.317

我创建了两个控制器，FirstViewController 和 SecondViewController。每个控制器中都有一个按钮。

**第一视图控制器.h**

```
#import <UIKit/UIKit.h>
@interface FirstViewController : UIViewController{
   BOOL firstTime;// to hide button 
}
@property (retain, nonatomic) IBOutlet UIButton *myButton;
- (IBAction)buttonClicked:(id)sender;
@end 
```

**第一视图控制器.m**

```
-(void)viewWillAppear:(BOOL)animated{
   if (firstTime) {
     [myButton setHidden:TRUE];
   }
}
- (IBAction)buttonClicked:(id)sender {
   firstTime   =   TRUE;
   SecondViewController *secondController  =   [[SecondViewController alloc]init];
   [self presentModalViewController:secondController animated:TRUE];
   [secondController release];
} 
```

**SecondViewController.h**

```
@interface SecondViewController : UIViewController
@property (retain, nonatomic) IBOutlet UIButton *secondButton;
- (IBAction)secondButtonClicked:(id)sender;
- (IBAction)secondButtonClicked:(id)sender;
@end 
```

**第二视图控制器.m**

```
- (IBAction)secondButtonClicked:(id)sender {
   [self dismissModalViewControllerAnimated:TRUE];
} 
```

这对我有用。请试一试。

# android - Android应用如何支持GESTURE、左右滑动、多种转场效果

> ID：10100463
> 
> 赞同：11
> 
> 时间：2012-04-11T05:43:21.730
> 
> 标签：android

在我的应用程序中，我想翻转视图。我在 Android 的 Go SMS pro 中看到过这样的动画。我想在我的 android 应用程序中做同样的事情。

我想翻转整个活动视图。可能吗 ？我在android中看到了一些翻转的例子。但在所有示例中，视图都在同一个活动中。是否可以为不同的活动设置这样的视图。还是在从一项活动到另一项活动时产生这种效果？

请参阅 Android 中翻转效果的快照![在此处输入图像描述](../Images/712f7804a8f375ad0062e18668a9b214.png)：

如果是，请参考任何演示示例或代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T10:17:47.823

我有一个问题，是否可以在两个活动之间创建 3D 过渡效果。在 API Demos 中有一个示例程序可以做到这一点，但是这个程序在同一个 Activity 的两个视图之间播放过渡效果。在两个活动之间进行相同的调整并不是很复杂，但有一些技巧......

查看 Rotate3dAnimation.java，它实际上是从 API Demos 示例中复制的。它使用相机（不是硬件相机，而是 2D 图形工具包的对象）从不同角度获取布局视图。它现在所做的是翻转。使用相同的机制，您也可以实现多维数据集。唯一的问题是，对于立方体动画，您需要传出和传入布局，这使得很难将独立活动很好地分离（动画必须同时在传入和传出布局上工作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:40:47.603

Cyanogenmod 中的 Launcher 有很多这样的特效，你可以访问他们的 github 页面，查看他们的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T06:40:38.930

尝试使用此代码[Diff 动画效果](https://github.com/jfeinstein10/JazzyViewPager)

这里 MainActivity.class

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Set window fullscreen and remove title bar, and force landscape orientation
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_main);
    setupJazziness(TransitionEffect.CubeOut);// change diff effect

} 
```

# python - 如何在python中使用数组值写入文件？

> ID：10100465
> 
> 赞同：4
> 
> 时间：2012-04-11T05:43:23.567
> 
> 标签：python, string

```
>>> w
['Parts-of-speech', 'disambiguation', 'techniques', '(', 'taggers', ')',
 'are', 'often', 'used', 'to', 'eliminate', '(', 'or', 'substantially',
 'reduce', ')', 'the', 'parts-of-speech', 'ambiguitiy', 'prior', 'to',
 'parsing.', 'The', 'taggers', 'are', 'all', 'local', 'in', 'the', 'sense',
 'that', 'they', 'use', 'information', 'from', 'a', 'limited', 'context',
 'in', 'deciding', 'which', 'tag', '(', 's', ')', 'to', 'choose', 'for',
 'each', 'word.', 'As', 'is', 'well', 'known', ',', 'these', 'taggers',
 'are', 'quite', 'successful', '.']
>>> q=open("D:\unieng.txt","w")
>>> q.write(w)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: argument 1 must be string or read-only character buffer, not list 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T05:47:39.247

使用[`writelines()`](http://docs.python.org/library/stdtypes.html#file.writelines)方法来编写您的内容。

```
>>> f   = open("test.txt",'w')
>>> mylist = ['a','b','c']
>>> f.writelines(mylist) 
```

**file.writelines（序列）**

> 将一系列字符串写入文件。序列可以是任何产生字符串的可迭代对象，通常是字符串列表。没有返回值

**注意：** `writelines()`不添加行分隔符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T05:45:23.307

`w`是一个列表，文件对象的 write 方法不接受列表，如错误所解释的。

您可以将 w 转换为字符串并像这样编写：

```
' '.join(w) #Joins elements with spaces in between 
```

然后你可以调用：

```
q.write(str) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T05:50:33.063

这是 Stackoverflow 中的两个类似的帖子：-

[使用 Python 将列表写入文件](https://stackoverflow.com/questions/899103/python-write-a-list-to-a-file)

[Python：将元组列表写入文件](https://stackoverflow.com/questions/3820312/python-write-a-list-of-tuples-to-a-file)

您将在那里获得更多选择和替代方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T05:45:02.073

您需要使用[join](http://docs.python.org/library/stdtypes.html#str.join)将列表加入字符串。将写入从

```
q.write(w) 
```

至

```
q.write(''.join(w)) 
```

# php - 获取远程文件大小（不使用 Content-Length 字段）

> ID：10100471
> 
> 赞同：3
> 
> 时间：2012-04-11T05:44:09.013
> 
> 标签：php, curl

我需要在不下载的情况下获取远程文件的大小。我使用此代码，但某些站点的标头不包含**Content-Length:**字段。在这种情况下如何获取文件大小？

```
$ch = curl_init("http://wordpress.org/latest.zip");
curl_setopt($ch, CURLOPT_NOBODY, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$data = curl_exec($ch);
curl_close($ch);

$contentLength = 'unknown';
if (preg_match('/Content-Length: (\d+)/', $data, $matches)) {
  $contentLength = (int)$matches[1];
}
echo $contentLength; 
```

这是 echo $data 的结果；

```
HTTP/1.1 200 OK
Server: nginx
Date: Tue, 10 Apr 2012 11:32:20 GMT
Content-Type: application/zip
Connection: close
Pragma: no-cache
Cache-control: private
Content-Description: File Transfer
Content-Disposition: attachment; filename=wordpress-3.3.1.zip
Content-MD5: d6332c76ec09fdc13db412ca0b024df9
X-nc: EXPIRED luv 139 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:57:02.787

如果 Content-Length 标头不存在，则意味着文件大小未知。在您的情况下，您有 Content-Disposition 标头，这意味着可下载文件是服务器响应的附件（与电子邮件附件相同）。因此，如果您没有 Content-Length 标头，则无法获取大小。

# spring - Spring 批处理管理员：无法读取 663 MB 平面文件，OutOfMemoryError

> ID：10100480
> 
> 赞同：2
> 
> 时间：2012-04-11T05:45:07.643
> 
> 标签：spring, tomcat7, spring-batch, spring-batch-admin

我在 Tomcat 7 中使用 Spring Batch Admin 1.2.1。我正在尝试读取 663 MB 文件并出现以下错误。我还增加了 Tomcat 的堆大小，但没有白费。这项工作非常简单。它读取平面文件并将其保存到数据库中，只需很少的处理。**请帮忙。**

```
15:05:10,535  INFO http-apr-8181-exec-4 SimpleStepHandler:133 - Executing step: [load]
    15:05:10,981 ERROR http-apr-8181-exec-4 AbstractStep:212 - Encountered an error executing the step
java.lang.OutOfMemoryError: Java heap space
    at org.apache.catalina.loader.WebappClassLoader.findResourceInternal(WebappClassLoader.java:3098)
    at org.apache.catalina.loader.WebappClassLoader.findResource(WebappClassLoader.java:1244)
    at org.apache.catalina.loader.WebappClassLoader.getResource(WebappClassLoader.java:1407)
    at org.springframework.core.io.ClassPathResource.exists(ClassPathResource.java:139)
    at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:248)
    at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:134)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:131)
    at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:119)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy30.open(Unknown Source)
    at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:93)
    at org.springframework.batch.core.step.item.ChunkMonitor.open(ChunkMonitor.java:105)
    at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:93)
    at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:301)
    at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:192)
    at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:135)
    at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:61)
    at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:60)
    at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:144)
    at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:124)
    at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:135)
    at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:281)
    at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:120)
    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:48) 
```

以下是我在 TOMCAT_HOME\BIN 位置的 setEnv.bat 文件条目

```
 set JAVA_OPTS=-DENVIRONMENT=dev -Dlog4j.debug -Xms1024m -Xmx1024m -XX:MaxPermSize=128m  %JAVA_OPTS% 
```

以下是我的工作配置：

```
<batch:job id="ex_Job" parent="baseJob">
    <batch:step id="load" parent="baseStep" next="Recon">
    <batch:tasklet>
            <batch:chunk reader="Reader" writer="Writer" processor="Processor">
                <batch:skippable-exception-classes merge="true" />
            </batch:chunk>
        <batch:listeners merge="true" />
        </batch:tasklet>
   </batch:step>    
        <batch:listeners merge="true" />
    </batch:job>
    <bean id="Reader" class="org.springframework.batch.item.file.FlatFileItemReader" scope="step">
        <property name="linesToSkip" value="1" />
        <property name="skippedLinesCallback" ref="headerLineCallbackHandler" />
        <property name="resource" value="${extract.input.data.dir}/#{jobParameters['input.file']}" />
        <property name="lineMapper">
            <bean
                class="org.springframework.batch.item.file.mapping.PatternMatchingCompositeLineMapper">
                <property name="tokenizers">
                    <map>
                        <entry key="*" value-ref="LineTokenizer" />
                        <entry key="T*" value-ref="TrailerTokenizer" />
                    </map>
                </property>
                <property name="fieldSetMappers">
                    <map>
                        <entry key="*" value-ref="fieldSetMapper" />
                    </map>
                </property>
            </bean>
        </property>
    </bean>

    <beans:bean id="fieldSetMapper" class="org.springframework.batch.item.file.mapping.PassThroughFieldSetMapper" />
    <job id="baseJob" abstract="true">
        <listeners>
            <listener ref="skipCheckingJobListener"></listener>
        </listeners>
    </job>

    <step id="baseStep" abstract="true">
        <tasklet>
            <chunk commit-interval="100" skip-limit="10000">
                <skippable-exception-classes>
                    <include class="org.springframework.batch.item.file.FlatFileParseException" />
                    <include class="org.springframework.batch.item.file.transform.IncorrectLineLengthException" />
                    <include class="org.springframework.dao.DataAccessException"/>
                    <include class="org.springframework.batch.item.file.transform.ConversionException"/>
                </skippable-exception-classes>
            </chunk>
            <listeners>
                <listener ref="stepExecutionListener" />
                <listener ref="genericSkipListener" />
            </listeners>
        </tasklet>
    </step> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T19:00:31.993

我认为这是正在发生的事情，但无法验证自己。

因为您的资源是作为 ClasspathResource 注入的，所以该`exists`方法会尝试将整个资源加载到内存中。相反，请尝试在资源属性前面加上`file:`，因此您的 inputReader 看起来像这样。

```
<property name="resource" value="file:${extract.input.data.dir}/#{jobParameters['input.file']}" /> 
```

我以前使用这种方法使用 Spring Batch 处理多 GB 文件，完全没有内存问题。我遇到内存不足错误的唯一一次是文件没有正确的行结尾，它试图读取整个文件的初始行。

祝你好运。

# php - 如何在 Wordpress 中自定义日期格式

> ID：10100483
> 
> 赞同：0
> 
> 时间：2012-04-11T05:45:23.197
> 
> 标签：php, css, wordpress, html, wordpress-theming

我需要在 Wordpress 中自定义日期格式。我知道可以从仪表板 << 设置 << 常规 << 日期进行小的日期更改。但我的需求并没有因此得到满足。

我需要在帖子页面上，月应该有不同的字体样式，而日应该有不同的字体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:32:44.137

如果我正确理解您的问题，一种解决方案是将日期的每个部分包装在不同的跨度类中。因此，每当您想插入日期时，您都会使用以下内容：

```
<?php the_time('F', '<span class="month">', '</span>'); ?>
&nbsp;
<?php the_time('d', '<span class="day">', '</span>'); ?> 
```

然后你可以在你的 css 中分别定位这些不同的 span 类。

```
.month {
    font-family:serif;
}
.day {
    font-family:sans-serif;
} 
```

这将输出如下格式：**4 月 11**日，可以根据需要单独设置月份和日期的样式。您可以通过更改传递给`the_time()`函数的内容来显示不同的月/日格式。例如，将月份代码更改为`<?php the_time('m', '<span class="month">', '</span>'); ?>`将输出**Apr 11**。

有很多不同的配置，这里有更多信息[http://codex.wordpress.org/Formatting_Date_and_Time](http://codex.wordpress.org/Formatting_Date_and_Time)

# network-programming - 如何设置 SNMP 管理器和代理

> ID：10100488
> 
> 赞同：-1
> 
> 时间：2012-04-11T05:45:33.867
> 
> 标签：network-programming, snmp, net-snmp

我是网络编程的新手。我已经学习了 SNMP 的基础知识，现在我想测试一下这些命令。

我需要知道有哪些软件工具可用于设置 SNMP 管理器以及模拟 SNMP 代理。我更喜欢 linux 中的开源工具。

还建议开始使用 C/C++ 编写 SNMP 的先决条件，如库、编译器、IDE 等。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T07:59:32.057

如果您在 Linux [Net-SNMP](http://www.net-snmp.org/)上，您正在寻找。

# ios - UIWebView 在不同设备上的奇怪行为

> ID：10100490
> 
> 赞同：0
> 
> 时间：2012-04-11T05:45:42.673
> 
> 标签：ios, memory, uiwebview

我开发了一个示例 iPad 应用程序，在其中我在 UIWebView 中打开了一个 ppt 类型的文件。当我在操作系统版本为 5.0(iPad2) 和 4.3.1(iPad1) 的 iPad 上运行此应用程序时，应用程序崩溃并出现以下错误（内存警告）：

```
Apr 11 11:01:23 unknown WebViewTest[345] <Warning>: Received memory warning.
Apr 11 11:01:24 unknown UserEventAgent[12] <Notice>: jetsam: kernel termination snapshot being created
Apr 11 11:01:24 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.apple.Preferences[0x3072]) Exited: Killed: 9
Apr 11 11:01:24 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.extentia.DMG[0x6ba7]) Exited: Killed: 9
Apr 11 11:01:24 unknown SpringBoard[15] <Warning>: Application 'Settings' exited abnormally with signal 9: Killed: 9
Apr 11 11:01:24 unknown SpringBoard[15] <Warning>: Application 'DMG' exited abnormally with signal 9: Killed: 9
Apr 11 11:01:25 unknown ReportCrash[347] <Error>: Saved crashreport to /Library/Logs/CrashReporter/LowMemory-2012-04-11-110125.plist using uid: 0 gid: 0, synthetic_euid: 0 egid: 0
Apr 11 11:01:25 unknown WebViewTest[345] <Warning>: Received memory warning.
Apr 11 11:01:26 unknown SpringBoard[15] <Warning>: Received memory warning.
Apr 11 11:01:26 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.extentia.WebViewTest[0x99f4]) Exited: Killed: 9
Apr 11 11:01:26 unknown UserEventAgent[12] <Notice>: jetsam: kernel termination snapshot being created
Apr 11 11:01:26 unknown SpringBoard[15] <Warning>: Application 'WebViewTest' exited abnormally with signal 9: Killed: 9
Apr 11 11:01:35 unknown ReportCrash[348] <Error>: Saved crashreport to /Library/Logs/CrashReporter/LowMemory-2012-04-11-110135.plist using uid: 0 gid: 0, synthetic_euid: 0 egid: 0 
```

但是，当我在操作系统版本为 4.3.3（iPad2）的 iPad 上运行相同的应用程序时，它运行良好。这种奇怪行为背后的原因是什么以及解决此问题的任何解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-11T07:48:54.267

您的应用程序因内存不足而崩溃。尝试使用 PDF 格式或 PPS（power point slide show）格式。这可能需要一些较小的空间。

# javascript - 如何将 ID 传递给 ASP.NET 中的 java 脚本函数

> ID：10100494
> 
> 赞同：0
> 
> 时间：2012-04-11T05:46:11.917
> 
> 标签：javascript, asp.net

嗨，我有以下 java 脚本函数：

```
function EnableDisableTextBox(chkBoxId, txtBoxId) {
    var isChk = document.getElementById(chkBoxId);
    document.getElementById(txtBoxId).disabled = !(isChk.checked);
} 
```

当我试图调用上述函数时，通过单击复选框它无法按预期工作

```
<asp:CheckBox ID="chkBachelors"
      onclick="javascript:EnableDisableTextBox('chkBachelors','txtFirstDegree');"
      runat="server" Text='<%$Resources:Resource, FirstDegree %>' TextAlign="Left"/>

<asp:TextBox ID="txtFirstDegree" CssClass="form-text" runat="server" 
      MaxLength="250">&lt;/asp:TextBox> 
```

预期结果（当用户单击`chkBachelors`复选框时）：

```
if "chkBachelors" check box is checked 
    then enable "txtFirstDegree" text box
else 
    disable "txtFirstDegree" text box 
```

**问题是什么以及如何解决？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:03:16.167

```
 <asp:CheckBox ID="chkBachelors"
              onclick="EnableDisableTextBox(this);"
              runat="server" Text='' TextAlign="Left"/>

        <asp:TextBox ID="txtFirstDegree" CssClass="form-text" runat="server" 
              MaxLength="250"></asp:TextBox>

<script language ="javascript" type="text/javascript">
       function EnableDisableTextBox(checkbox)
       {
           var txtBoxId= "<%=txtFirstDegree.ClientID%>";
           document.getElementById(txtBoxId).disabled = !(checkbox.checked);
       }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:56:56.963

<%=chkBachelors.ClientID%> 和 <%=txtFirstDegree.ClientID%> 将给出 Asp.Net 控件的客户端 ID。您不需要显式传递它们

```
function EnableDisableTextBox() {
            var isChk = document.getElementById(<%=chkBachelors.ClientID%> );
            document.getElementById(<%=txtFirstDegree.ClientID%>).disabled = !(isChk.checked);
        } 
```

# python - 不确定用 Scrapy 迭代什么

> ID：10100495
> 
> 赞同：1
> 
> 时间：2012-04-11T05:46:12.337
> 
> 标签：python, web-scraping, scrapy

我在使用 scrapy 迭代爬网时遇到问题。我正在提取一个标题字段和一个内容字段。问题是我得到了一个 JSON 文件，其中列出了所有标题，然后是所有内容。我想得到 {title}、{content}、{title}、{content}，这意味着我可能必须遍历 parse 函数。问题是我无法弄清楚我在循环什么元素（即，`for x in [???]`）这是代码：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.contrib.spiders import SitemapSpider

from Foo.items import FooItem

class FooSpider(SitemapSpider):
    name = "foo"
    sitemap_urls = ['http://www.foo.com/sitemap.xml']
    #sitemap_rules = [

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        items = [
        item = FooItem()
        item['title'] = hxs.select('//span[@class="headline"]/text()').extract()
        item['content'] = hxs.select('//div[@class="articletext"]/text()').extract()
        items.append(item)
        return items 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:08:32.667

您的 xpath 查询返回页面上的所有标题和所有内容。我想你可以这样做：

```
titles = hxs.select('//span[@class="headline"]/text()').extract()
contents = hxs.select('//div[@class="articletext"]/text()').extract()

for title, context in zip(titles, contents):
    item = FooItem()
    item['title'] = title
    item['content'] = context
    yield item 
```

但这并不可靠。尝试执行返回块的 xpath 查询`title`和`content`内部。如果您向我展示 xml 源代码，我会帮助您。

```
blocks = hxs.select('//div[@class="some_filter"]')
for block in blocks:
    item = FooItem()
    item['title'] = block.select('span[@class="headline"]/text()').extract()
    item['content'] = block.select('div[@class="articletext"]/text()').extract()
    yield item 
```

我不确定 xpath 查询，但我认为想法很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-23T02:25:56.033

你不需要`HtmlXPathSelector`。Scrapy 已经内置了 XPATH 选择器。尝试这个：

```
blocks = response.xpath('//div[@class="some_filter"]')
for block in blocks:
    item = FooItem()
    item['title'] = block.xpath('span[@class="headline"]/text()').extract()[0]
    item['content'] = block.xpath('div[@class="articletext"]/text()').extract()[0]
    yield item 
```

# android - Android NDK - 内存分配测试

> ID：10100497
> 
> 赞同：2
> 
> 时间：2012-04-11T05:46:21.320
> 
> 标签：android, memory-management, android-ndk

有什么简单的方法可以以编程方式测试，可以本地分配多少内存？请不要建议一些现成的功能，我要求可编程的简单解决方案，如果有的话（我还没有找到任何东西）

谢谢

# android - 用于锁定 android 设备的活动

> ID：10100499
> 
> 赞同：1
> 
> 时间：2012-04-11T05:46:33.503
> 
> 标签：android, android-activity

是否可以进行一项活动，以锁定 android 设备？

* * *

*   该设备只有在输入正确的 PIN 码后才能解锁。
*   锁定期间，用户不能打电话、发消息，也不能查看通知、联系人、通话记录、存储数据、...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:13:05.563

为此，您可以利用Android 2.2 中引入的[设备管理 API 。](http://developer.android.com/guide/topics/admin/device-admin.html)这确实要求用户接受您的应用程序想要控制设备，但显然您无论如何都需要披露该信息。另外应该注意的是，在电话上（至少在美国），您必须**始终**可以拨打紧急电话。

除了许多其他管理功能外，您还可以使用 API 强制设置密码锁定并随意调用锁定屏幕。

# php - 在 php 中的 Javascript 函数中获取单选按钮字段值

> ID：10100500
> 
> 赞同：0
> 
> 时间：2012-04-11T05:46:35.467
> 
> 标签：php, javascript, ajax, radio-button

我试图通过 Ajax 获取单选按钮字段的值，但它只返回**'undefined'**。

我在用着：

```
function  fetch_data(id,type)
{
    $.ajax({
            type: "POST",
            async: false,
            url: "fetch_data.php",
            data: "id="+id+"&type="+type,
            success: function(msg){
                         $("#div1").html(msg);  
                     }
    });
}

<select name="data1" id="data1"
onchange="fetch_data(this.value,document.getElementsById('radio1').value"
style=" width:150px;"> 

<div id="div1"></div> 
```

将替换为“fetch_data.php”页面 div

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:51:38.933

检查您是否有`radio1`作为单选框的 ID 并替换`document.getElementsById`为`document.getElementById`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:59:09.613

codef0rmer 是对的，您在编写 getElement* *S* *ById 的语法中有错误，但它在没有 S 的情况下称为 getElementById。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T06:01:06.523

您可以尝试以下方法：

```
<select name="data1" id="data1" 
        onchange="fetch_data(this.value,"+document.getElementsById('radio1').value+""          
        style=" width:150px;"> 
```

# objective-c - 关于类别的客观 C 解释？

> ID：10100504
> 
> 赞同：2
> 
> 时间：2012-04-11T05:47:04.543
> 
> 标签：objective-c, categories, private-methods, class-extensions, objc-category

在我的菜鸟头脑和程序中，当我为一个类创建一个类别时，我在一个新文件中创建它

像`NSArray+Shuffle.h and .m`

但我注意到，当我创建例如一个 ViewController 时，

我在实施中有：

```
@interface PingusViewController ()

@end

@implementation PingusViewController
...
@end 
```

所以我的问题是：

是什么

```
@interface PingusViewController ()

@end 
```

部分？，这是用于类别吗？或者有什么用？，如果是用于类别，为什么在这里使用它而不是在一些新文件中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:52:00.973

它被称为*类扩展*。

将其视为类的私有声明的常规位置。

它通常在实现文件而不是头文件中声明，因为声明被认为是私有的，并且`@implementation`只对类可见。

OTOH 类别是作者通常用来扩展类的公共接口的接口。声明是相似的——毕竟，类扩展只是一个未命名的类别，但应用程序是不同的（按照惯例）。

# vb.net - 只更改文本文件中的一行？

> ID：10100505
> 
> 赞同：1
> 
> 时间：2012-04-11T05:47:04.610
> 
> 标签：vb.net, file-io

我有一个格式如下的文本文件：

```
(title,price,id#)

CD1,11.00,111111
CD2,12.00,222222
CD3,13.00,333333
CD4,14.00,444444
CD5,15.00,555555
CD6,16.00,666666 
```

如果给我 id# 和新价格，那么更改相应 CD 价格的最佳方法是什么？

我确定它与获取行和拆分它有关，但我不确定我如何只编辑一行而不弄乱整个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:28:28.760

好的，现在我们知道它是一个短文件，生活变得容易多了：

*   使用将文件加载到行数组中`File.ReadAllLines`
*   找到正确的行`string.Split`用于将每行拆分为组成部分，并检查 ID。
*   找到正确的行后，将其替换为完整的新行
*   将文件写回`File.WriteAllLines`

这应该足以让你继续前进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T07:35:44.157

你不能在不重写整个文件的情况下重写一行（除非这些行恰好是相同的长度）。对于这么小的文件，最简单的方法可能是更改内存中的行，然后将所有内容重写到文件中：

```
Dim idToFind = "444444"
Dim newPrice = "100"
Dim lines = IO.File.ReadAllLines(path)
For i = 0 To lines.Length - 1
    Dim line = lines(i)
    Dim fields = line.Split(","c)
    If fields.Length > 2 Then
        Dim id = fields(2)
        If id = idToFind Then
            Dim title = fields(0)
            lines(i) = String.Format("{0},{1},{2}", title, newPrice, id)
            Exit For
        End If
    End If
Next
IO.File.WriteAllLInes(path, lines) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T07:37:46.913

如果它只是一个包含 25 行的文件，您可以执行一个简单的输入-转换-输出例程并更新每行的价格。

像这样的东西（使用 Streamreader / writer ）。

```
Sub UpdatePrice(ByVal pricesToUpdate As Dictionary(Of Integer, String), ByVal inputPath As String)
    If Not IO.File.Exists(inputPath) Then Return
    Try
        Using inputStream = New IO.StreamReader(inputPath, System.Text.Encoding.UTF8, True)
            Using outputStream = New IO.StreamWriter(inputPath + ".tmp", False, System.Text.Encoding.UTF8)
                While Not inputStream.EndOfStream
                    Dim inputLine = inputStream.ReadLine
                    Dim content = inputLine.Split(","c)
                    If Not content.Length >= 3 Then
                        outputStream.WriteLine(inputLine)
                        Continue While
                    End If
                    Dim id As Integer
                    If Not Integer.TryParse(content(2), id) Then
                        outputStream.WriteLine(inputLine)
                        Continue While
                    End If
                    If Not pricesToUpdate.ContainsKey(id) Then
                        outputStream.WriteLine(inputLine)
                        Continue While
                    End If
                    content(1) = pricesToUpdate(id)
                    outputStream.WriteLine(String.Join(",", {content(0), content(1), content(2)}))
                End While
            End Using
        End Using
        If IO.File.Exists(inputPath + ".tmp") Then
            IO.File.Delete(inputPath)
            IO.File.Move(inputPath + ".tmp", inputPath)
        End If
    Catch ex As IO.IOException
        If IO.File.Exists(inputPath + ".tmp") Then IO.File.Delete(inputPath + ".tmp")
    End Try
End Sub 
```

# .net - 如何将滚动条连接到 VC++ 中的面板？

> ID：10100508
> 
> 赞同：0
> 
> 时间：2012-04-11T05:47:14.330
> 
> 标签：.net, winforms, c++-cli

我需要在 VC++ 中创建一个面板来显示一个带有滚动条的长单选按钮表单（如下图所示）。由于我有数百个单选按钮，我无法一次全部显示。我需要使用滚动条来控制单选按钮表单的当前位置。如何使滚动条连接到面板以执行此任务？

![图片](../Images/15a12315452159a13ad39a2ebb9a5497.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:51:18.577

编写代码以将单独的滚动条控件与`Panel`控件同步是可能的，但这绝对是一种困难的做法。

相反，请考虑将控件的属性设置[`AutoScroll`为](http://msdn.microsoft.com/en-us/library/system.windows.forms.scrollablecontrol.autoscroll.aspx). 当启用此属性并且控件的虚拟大小大于其可见边界时，将自动出现滚动条。容易得多。`Panel``true`

您可以在设计器中设置此属性，也可以通过表单构造函数中的代码设置：

```
myPanel.AutoScroll = true; 
```

# c# - 使用 GmailD 发送电子邮件时出错

> ID：10100509
> 
> 赞同：0
> 
> 时间：2012-04-11T05:47:17.917
> 
> 标签：c#, asp.net, visual-studio-2010, email

使用 gmailD 发送电子邮件时收到以下错误消息。

SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为：5.5.1 需要身份验证。

```
MailMessage objMailMessage = new MailMessage();
        objMailMessage.From = new MailAddress("suraj.podval@in.vsolutions.com");
        objMailMessage.To.Add(new MailAddress("itslaxman@gmail.com"));
        objMailMessage.Subject = "Test";
        objMailMessage.Body = "Test Test";
        objMailMessage.IsBodyHtml = true;

        SmtpClient smtpClient = new SmtpClient();
        smtpClient.Host = "smtp.gmail.com";
        smtpClient.Port = 587;           
        smtpClient.EnableSsl = true;
        smtpClient.UseDefaultCredentials = false;         
        smtpClient.Credentials = new System.Net.NetworkCredential("user@gmail.com", "password");
        smtpClient.Send(objMailMessage); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:52:28.900

尝试将端口更改为 465

```
 SmtpMail oMail = new SmtpMail("TryIt");
            SmtpClient oSmtp = new SmtpClient();

            // Your gmail email address
            oMail.From = "gmailid@gmail.com";

            // Set recipient email address
            oMail.To = "support@emailarchitect.net";

            // Set email subject
            oMail.Subject = "test email from gmail account";

            // Set email body
            oMail.TextBody = "this is a test email sent from c# project with gmail.";

            // Gmail SMTP server address
            SmtpServer oServer = new SmtpServer("smtp.gmail.com");

            // If you want to use direct SSL 465 port, 
            // please add this line, otherwise TLS will be used.
            // oServer.Port = 465;

            // detect SSL/TLS automatically
            oServer.ConnectType = SmtpConnectType.ConnectSSLAuto;

            // Gmail user authentication
            // For example: your email is "gmailid@gmail.com", then the user should be the same
            oServer.User = "gmailid@gmail.com";
            oServer.Password = "yourpassword"; 
```

检查以下链接：[http ://www.emailarchitect.net/easeendmail/kb/csharp.aspx?cat=2](http://www.emailarchitect.net/easendmail/kb/csharp.aspx?cat=2)

# python - 在 Python NLP 中搜索整个系列的同义词集（来自 NLTK）

> ID：10100516
> 
> 赞同：0
> 
> 时间：2012-04-11T05:48:01.240
> 
> 标签：python, nlp, nltk, wordnet

*原始问题：*

*一个词的多义词是它所具有的意义的数量。使用 WordNet，我们可以通过 len(wn.synsets('dog', 'n')) 确定名词 dog 有七种含义。根据 WordNet 计算名词、动词、形容词和副词的平均多义词。*

根据我从问题中收集到的信息，我将在 NLTK 中使用内置的多义方法和 WordNet 来找出某物具有的感官数量。

更重要的是，我正在尝试使用所有可用的同义词集并循环它们，并将所有返回的值放入一个集合中。在此之后，我打算添加新创建的集合（用整数填充）中所有同义词集的总数以接收总和。在我得到这个总和后，我会将条目总数除以得到平均值。

我最大的问题是……我将如何遍历**所有**可用的同义词以及名词、动词、形容词和副词？

*   在通过各种网站进行研究后，我发现 for "wn.all_synsets('n')" 将返回所有可能的名词同义词集。

但是它返回的类型是“生成器”，我将如何使用循环来迭代“生成器”类型？

.>>>allsynsets = wn.all_synsets('n')

.>>> 所有同义词集

<.generator object all_synsets at 0x04359F30>

.>>> 类型（allsynsets）

<.type '生成器'>

我希望我已经提供了足够的信息，让任何人都能找到这个问题的答案。我没有源代码，除了导入和测试来理解这个问题的生成器类型。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:55:52.537

这些方法中的任何一种都应该有效

```
list = [x for x in wx.all_synsets('n')] 
```

或者

```
for x in wx.all_synsets('n'):
    print x 
```

[编辑] 这更多地讨论了生成器（在网络上的许多其他来源中） [http://www.dalkescientific.com/writings/NBN/generators.html](http://www.dalkescientific.com/writings/NBN/generators.html)

# java - SharedPreferences.getBoolean 抛出荒谬的异常

> ID：10100517
> 
> 赞同：0
> 
> 时间：2012-04-11T05:48:01.927
> 
> 标签：java, android, sharedpreferences

我在 android 中对 SharedPreference.getBoolean 有一个非常令人沮丧的问题。请参阅以下代码段：

```
Map<String, ?> all = preferences.getAll();

Object x = all.get("EnableMedia");

boolean v = preferences.getBoolean("EnableMedia", (Boolean) null); 
```

我可以在调试器中看到“x”是一个布尔值，这是真的。

然而，如果我执行下一行，preferences.getBoolean，它会抛出一个异常。是什么赋予了？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T05:52:11.587

看看这个调用：

```
preferences.getBoolean("EnableMedia", (Boolean) null); 
```

现在看看 的签名`getBoolean`：

```
public abstract boolean getBoolean (String key, boolean defValue) 
```

请注意，它是一个`boolean`值，而不是一个`Boolean`值。所以实际发生的是你的代码是这样的：

```
Boolean tmp = null;
preferences.getBoolean("EnableMedia", tmp.booleanValue()); 
```

`NullPointerException`当您在空引用上调用方法时，这将抛出一个。

您需要传入一个有效值`boolean`，例如

```
preferences.getBoolean("EnableMedia", true); 
```

# objective-c - 无法在 Objective-C 中检查变量的值

> ID：10100518
> 
> 赞同：0
> 
> 时间：2012-04-11T05:48:04.990
> 
> 标签：objective-c, boolean

我需要检查一个变量`vi_theIndex`的值。在给定时刻，它的值为 65。

我想检查是否`vi_theIndex`大于或等于零并且小于 32。现在我这样做：

```
long long vi_theIndex = 65;
if ((vi_theIndex >= 0) && (vi_theIndex < 32) )
 {
   //Case true
 }
else
{
   //Case false
} 
```

我意识到 65 的结果是错误的。第二种情况应该出现，但第一种情况是正确的。为什么是这样？

我试过这个：

```
long long vi_theIndex = 65;

bool limitFlag1, limitFlag2;

limitFlag1 = (vi_theIndex <= 0);
limitFlag2 = (vi_theIndex = 65); 
```

`limitFlag2`变为真并`limitFlag1`变为未定义，调试器甚至不会在我的断点处停止。看起来 C 不理解 '<'、'<=' 或 '>' 符号。当我像这里一样单独使用“<”或“>”符号时也会发生这种情况：

```
limitFlag1 = (vi_theIndex < 0); 
```

`limitFlag1`没有定义。

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:57:14.173

您不能为您的第一个示例显示您的真实代码 - 正如您所说，应该执行“case false”。

你的第二个例子有一个问题 - 你有`vi_theIndex = 65`，而不是`vi_theIndex == 65`你可能的意思。你所拥有的陈述总是正确的。 `limitFlag1`将是`0`-我不确定您所说的“变得未定义”是什么意思-您也没有在这里显示您的真实代码吗？

# java - 如何检查图像是8位还是16位？

> ID：10100521
> 
> 赞同：3
> 
> 时间：2012-04-11T05:48:22.040
> 
> 标签：java

我正在制作使用 java SE 进行图像处理的 APP。我想在运行时以编程方式检查图像是 8 位还是 16 位？然后根据我对that.so进行图像处理，我如何在java中检查它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:55:24.750

如果您在图像中读取为`BufferedImage`，则可以使用该[`getType()`](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html#getType%28%29)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:20:51.537

这里有一篇文章试图读取 8 位和 24 位 bmp 文件。 [http://www.javaworld.com/javaworld/javatips/jw-javatip43.html?page=2](http://www.javaworld.com/javaworld/javatips/jw-javatip43.html?page=2)

在这里，它试图获得这样的位数：

```
int nbitcount = (((int)bi[15]&0xff)<<8) | (int)bi[14]&0xff 
```

一旦你得到这个计数，你就可以根据这个位数来验证它是什么类型的图像。

# python - 如何查看队列中的消息

> ID：10100522
> 
> 赞同：37
> 
> 时间：2012-04-11T05:48:31.163
> 
> 标签：python, amazon-web-services, boto, amazon-sqs

我不希望消息算作“已读”，但我想知道队列中有什么。文档：

[http://boto.s3.amazonaws.com/ref/sqs.html#module-boto.sqs](http://boto.s3.amazonaws.com/ref/sqs.html#module-boto.sqs)

关于什么吸收信息和什么不吸收信息不是很直截了当。转储消息似乎很接近，但我宁愿在内存中而不是在文件中执行此操作。

常见问题解答：

[http://aws.amazon.com/articles/1343#12](http://aws.amazon.com/articles/1343#12)

有一些粗略的解决方案：

> 如何查看消息？
> 
> 在版本 2008-01-01 中，PeekMessage 操作已从 Amazon SQS 中删除。此功能主要用于调试小型系统——特别是确认消息已成功发送到队列或从队列中删除。要使用版本 2008-01-01 执行此操作，您可以记录消息 ID 和消息的接收句柄，并将它们关联起来以确认消息何时被接收和删除。

有没有人有这方面的运气？这似乎是非常基本的队列功能，如果没有一种干净的方法来做到这一点，我会感到震惊。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2020-10-20T10:49:30.017

右键单击在新的 SQS 控制台中不再起作用。

要在控制台中查看队列消息，`SQS`您现在需要单击队列 > `Send and receive messages`>`Poll for messages`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-11T12:07:08.873

SQS 中不再提供真正的 peek 功能，但您可以通过简单地使用[get_messages](http://docs.pythonboto.org/en/latest/ref/sqs.html#boto.sqs.queue.Queue.get_messages)并将 visibility_timeout 设置得非常低来完成您想要的。只要您不删除已阅读的消息，它们就会在 visibility_timeout 到期后重新出现在队列中并且可供阅读。唯一棘手的部分是试图弄清楚超时应该多长时间。如果队列中有大量消息，您将不得不多次调用 get_messages 来检索所有消息，并且您可能不希望之前阅读的消息在您仍在查看消息时再次出现。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-12-27T18:19:58.107

**2020 年 11 月 11 日更新**

右键单击不再适用于新的 SQS 控制台。

见[@marmor的回答](https://stackoverflow.com/a/64443596/4364074)

* * *

**原始答案（旧仪表板）**

如果您有权访问 Amazon 的 AWS 控制台，则可以在队列列表页面上**右键单击**队列。

然后从弹出菜单中选择**查看/删除消息。**

这将弹出一个窗口，您可以在其中开始轮询队列中的消息。

请参考以下图片：

[![amazon sqs 消息投票](../Images/185a5ff0b13dad50c470bdffaedfd58f.png)](https://i.stack.imgur.com/m3AMb.png)

[![轮询消息弹窗](../Images/f03fb9bc68cc6c98fe98c42d4afc61c4.png)](https://i.stack.imgur.com/jEaoQ.png)

# java - Android：我无法从通话记录历史中获取正确的日期？

> ID：10100523
> 
> 赞同：1
> 
> 时间：2012-04-11T05:48:33.067
> 
> 标签：java, android

我的代码是这样的

```
int dateColumn =  c.getColumnIndex(android.provider.CallLog.Calls.DATE);
long callDate = c.getInt(dateColumn);
SimpleDateFormat datePattern = new SimpleDateFormat ("dd-MM-yyyy:h:m:s:a");
datePattern.setTimeZone(TimeZone.getTimeZone("GMT"));
String date_str = datePattern.format(new Date(callDate));
serializer.text(date_str);
Log.v("",""+date_str); 
```

它给出的输出为：23-08-1969:4:34:05:PM 而不是正确的日期，它给了我很长的年龄日期。任何人都可以告诉我如何获得正确的日期.... String date_str = datePattern.format(new Date(callDate)); 序列化器.text(date_str); Log.v("",""+date_str);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:57:12.457

我强烈怀疑问题出在这里：

```
long callDate = c.getInt(dateColumn); 
```

鉴于您想要一个`long`值，我希望这是：

```
long callDate = c.getLong(dateColumn); 
```

# iphone - 根据数组分配正确的行数

> ID：10100524
> 
> 赞同：1
> 
> 时间：2012-04-11T05:48:34.813
> 
> 标签：iphone, objective-c, cocoa-touch

我有一个充满 NSMutableArray 的 NSMutableArray。我想根据特定索引数组的大小用适当数量的行填充我的表视图。

我目前有数组设置来获取数组中的第一个元素，然后表格将行数设置为该特定数组的大小。理想情况下，我想将行设置为每个元素的计数，其中大多数（数组）具有不同的大小。

这是我目前拥有的：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

        // Return the number of rows in the section.

        WorkoutManager *workoutManager = [WorkoutManager sharedInstance];
        NSMutableArray *blah = [[workoutManager workouts] objectAtIndex:0];

        return [blah count];
    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:43:33.167

请按以下方式进行：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
WorkoutManager *workoutManager = [WorkoutManager sharedInstance];
        return [[workoutManager workouts] count];
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
WorkoutManager *workoutManager = [WorkoutManager sharedInstance];
        NSMutableArray *blah = [[workoutManager workouts] objectAtIndex:indexPath.section];

        return [blah count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
WorkoutManager *workoutManager = [WorkoutManager sharedInstance];
        NSMutableArray *blah = [[workoutManager workouts] objectAtIndex:indexPath.section];
YourObj *obj = [blah objectAtIndex:indexPath.row];
        //Do further...
} 
```

# ruby-on-rails - railscarrierwave default_url 不工作

> ID：10100529
> 
> 赞同：5
> 
> 时间：2012-04-11T05:48:55.437
> 
> 标签：ruby-on-rails, default, carrierwave

我认为我没有正确理解这一点，但是我如何为用户提供默认图像？

```
 def default_url
      "/images/fallback/" + [version_name, "default.png"].compact.join('_')
   end 
```

我的图像/备用目录中有一个名为“default.png”的图像。我在网上也看到人们将 version_name 更改为“tiny”之类的东西，但这似乎对我也不起作用。这是怎么回事？版本名称到底是什么？

我试过类似的东西

```
 def default_url
      "/images/fallback/default.png"
   end 
```

但这也不起作用。我有什么误解？谢谢！

编辑：

```
class ImageUploader < CarrierWave::Uploader::Base

  # Include RMagick or MiniMagick support:
  include CarrierWave::RMagick

  storage :file

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  # Provide a default URL as a default if there hasn't been a file uploaded:
   def default_url
      ???????
   end

  # Create different versions of your uploaded files:
   version :thumb do
     process :resize_to_fill => [80, 80]
   end

end

class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :name, :email, :password, :password_confirmation,
     :remember_me, :image, :remote_image_url, :image_cache

  mount_uploader :image, ImageUploader
end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T15:33:26.710

如果您使用的是资产管道，那么您不需要在文件路径中包含“图像”，因为它`image_tag`会自动路由到`assets/images`文件夹，然后在那里查找文件名。因此，您在方法中需要的路径`default_url`是 images 文件夹之后的任何内容。就我而言，它只是 default.png，因为我在 images 文件夹中没有子文件夹。

```
 def default_url
       'default.png'
    end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T05:57:20.210

例如，您有这样的上传器：

```
class MyUploader < CarrierWave::Uploader::Base

  version :thumb do
    process resize_to_fill: [280, 280]
  end

  version :small_thumb, :from_version => :thumb do
    process resize_to_fill: [20, 20]
  end

   def default_url
      "/images/fallback/" + [version_name, "default.png"].compact.join('_')
   end
end 
```

`/images/fallback/default.png`代表原始图像，`small_thumb`版本路径是`/images/fallback/small_thumb_default.png`，等等。

如果你想要处理后图像实际保存的路径，你需要`store_dir`

```
 def store_dir
    'public/my/upload/directory'
  end 
```

# c# - 如何选择尝试在互联网上登录超过 10 次的唯一用户

> ID：10100530
> 
> 赞同：0
> 
> 时间：2012-04-11T05:48:57.967
> 
> 标签：c#, asp.net, security, c#-4.0

我目前开发了一个网站，我的用户必须登录该网站。当用户来时，我`Session`为他/她创建了一个，并为他节省了登录失败的时间 + 时间。当用户尝试 5 次登录时，我向他展示一个`CAPTCHA`并强制他输入`CAPTCHA`代码。现在我想要当用户尝试超过 10 次时次，将他重定向到一个简单的`HTML`文件中，向他展示*`You are ban for 2 hours`*。问题是我如何在互联网上选择唯一用户？关于用户的哪些信息可以选择一个唯一的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:12:49.340

您要求用户登录，所以听起来您已经为每个用户拥有了一个唯一的登录 ID，而您潜在的担忧是防止恶意用户破坏您的系统以锁定不同的有效用户，同时仍然阻止他们从密码破解。那是对的吗？

您不能绝对肯定地阻止恶意用户使用您的入侵保护方案来干扰其他用户。如果您看到有人试图暴力破解另一个用户的密码，那么您可以锁定该 IP 地址一段时间......或者可能只是该帐户的那个 IP 地址......但是您冒着被NAT 网关共享 IP 后面的恶意用户导致同一网关后面的所有其他用户被锁定。发送到您的服务器的任何信息都可能被欺骗，因此这是一种平衡行为。用户 ID 和 IP 地址的组合就代表一个独特的个人而言并非万无一失，但足以防止最常见的滥用行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:58:00.397

考虑到站点中的用户名是唯一的，您可以使用用户名和会话的组合来阻止特定用户。如果用户在不同的机器上使用相同的用户名 10 次，它可以被阻止。

# javascript - onchange 函数

> ID：10100535
> 
> 赞同：0
> 
> 时间：2012-04-11T05:49:20.370
> 
> 标签：javascript, jquery, html, dom

我正在尝试创建一个在更改选择选项时运行的函数。在我的选择菜单中，我有；

```
 <form id="frame">
       <select id="frame_color" onchange="fChange()">
           <option value="0">Polished Black</option>
           <option value="1">Grey</option>
       </select>
     </form> 
```

我希望 fChange() 函数做的唯一一件事就是用 onchange 值更新保存选项值的变量。因此，函数 fChange 中的变量从保持值“0”开始，当我将其更改为“灰色”时，我希望变量更新为“1”。我很难弄清楚如何正确编码函数。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:52:32.193

以下获取选定的选项值...

```
function fChange()
{
  var val = $("#frame_color").val();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:56:24.997

```
fChange = function(){
    var value = document.getElementById("frame_color").value;
    alert(value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T05:52:47.093

在 jQuery 上：

```
$(function(){
    $('#frame_color').on('change',function(){
        your_variable = $(this).val()
    });
}); 
```

对于非 jQuery，一个快速的方法是：

```
document.getElementById('frame_color').onchange = function(e){
    your_variable = e.target.value;
}​ 
```

此外，您可能希望查看[`addEventListener`](https://developer.mozilla.org/en/DOM/element.addEventListener)符合标准的浏览器和[`attachEvent`](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx)IE6-8

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T05:54:40.897

试试这个，这是 jQuery

```
<script type="text/javascript">

    $(document).ready(function () {
               $('#frame_color').change(function(){
                     // your code should be here
               });
        });

</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T06:00:06.590

```
var variable = 0;
function fChange()
{
var val = document.getElementById("frame_color").value;
variable = val;
}

<form id="frame">
       <select id="frame_color" onchange="fChange()">
           <option value="0">Polished Black</option>
           <option value="1">Grey</option>
       </select>
     </form> 
```

# php - PHP：使用“header（）”重定向不起作用

> ID：10100538
> 
> 赞同：0
> 
> 时间：2012-04-11T05:49:32.727
> 
> 标签：php, http

代码：sql.php

```
<?php
$uid = trim($_POST['uid']);
$pass= trim($_POST['pass']);
$type= trim($_POST['type']);
$link = mysql_connect("localhost","root","akash");
if (!$link) 
                 die('Could not connect: '.mysql_error());
if(!mysql_select_db("fsproj",$link))        
die("Can't Select database");
if ($type == 0 ) 
$query = "select uid from admin where uid = \"$uid\" AND password = \"$pass\"";
else
$query = "select username from user where uid = $uid AND pass = $pass";
$result = mysql_query("$query",$link);                        
$num_r=mysql_num_rows($result); 
        header("Location : codepage.php");
exit();
?> 
```

代码：login.html

```
<html>
<form action="sql.php" method="post" name="form1" id="form1" target=result>
Enter UID

<textarea name="uid" id="uid" rows="1" cols="40"> 

</textarea><br>
Password

<textarea name="pass" id="pass" rows="1" cols="40"> 

</textarea><br>
Type

<textarea name="type" id="type" rows="1" cols="40"> 

</textarea>
<br>
<input type="submit" value="Submit" />
</form>
</html> 
```

所有文件都在同一个根目录下，通过login.html向sql.php提交用户名和密码应该重定向到文件codepage.php（我还没有添加登录检查，所以对于任何用户名作为密码的值都应该成功)

但是当我尝试这样做时，我得到的只是一个空白页。

如果我在标头调用之后添加一个输出语句，我会看到该语句的输出

基本上`header("Location : codepage.php")`没有影响

标头功能在同一站点上的某些其他页面中确实有效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:54:11.713

应该包含整个`header('Location: address')`url，而不仅仅是文件。

这意味着协议、域以及文件夹和文件。

```
header('Location: http://wwww.google.com'); 
```

文件：

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

以下是第 14.30 点 Location 标头上的 w3 规范（搜索“14.30 Location”）

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

要引用 w3：

> 字段值由单个绝对 URI 组成。

如评论中所述，冒号 (:) 之前或之后可能没有任何空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T05:55:03.440

~~使用大括号。你的代码被破坏了。~~此外，它是`header('Location: codepage.php')`，不是`header('Location : codepage.php')`。请注意您添加的额外空间。

**已移除**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T05:57:17.607

您的代码容易受到`Sql Injection`. 使用[mysql_real_escape_string()](http://php.net/manual/en/function.mysql-real-escape-string.php)进行过滤。像：

```
 $pass= mysql_real_escape_string(trim($_POST['pass'])); 
```

并确保您拥有 codepage.php 的正确地址。尝试

```
header('Location: /codepage.php'); //OR
header('Location: http://site.com/to/codepage.php'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T06:02:58.820

请使用 header("Location: codepage.php");

问题是位置和之间的空间：它对我有用，希望它对你有用

# javascript - Chrome扩展将侧边栏注入页面

> ID：10100540
> 
> 赞同：20
> 
> 时间：2012-04-11T05:49:38.970
> 
> 标签：javascript, css, google-chrome, google-chrome-extension

我希望我的 chrome 扩展能够在激活时在任何页面的右侧注入 300px 侧边栏。我正在寻找将整个页面限制为 document.body.clientWidth - 300 的最佳方法，从而将 300px 留在我的侧边栏的右侧。我当前注入的侧边栏附加到 document.body 并具有如下样式：

```
width:300px
position: fixed
top: 0px
right: 0px
height:500px 
```

我需要一种方法来防止现有页面元素渗入我的侧边栏。我希望有一种方法可以欺骗现有元素，使其认为它们正在渲染到比实际窗口窄 300 像素的浏览器客户端，从而为我的侧边栏留出空间，但我还没有找到任何简单的方法来做到这一点。 .

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T00:47:19.800

我相信这更容易。首先在 body 上添加 padding，为侧边栏腾出空间。然后，创建一个包含侧边栏的 div。使用带有固定定位的 CSS 将 div 相对于页面的右侧和顶部定位。同时设置侧边栏 div 的高度和宽度。

代码（使用 JQuery）：

```
 var sidebar;
  $('body').css({
    'padding-right': '350px'
  });
  sidebar = $("<div id='sidebar'></div>");
  sidebar.css({
    'position': 'fixed',
    'right': '0px',
    'top': '0px',
    'z-index': 9999,
    'width': '290px',
    'height': '100%',
    'background-color': 'blue'  // Confirm it shows up
  });
  $('body').append(sidebar); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-11T06:52:35.907

### 更新

对于任何使用谷歌搜索的人，对其进行大修以反映我在应用程序中实际使用的内容，使用 jQuery，有更多的保护措施，并且更加尊重当前页面的 css。

```
//height of top bar, or width in your case
var height = '30px';

//resolve html tag, which is more dominant than <body>
  var html;
  if (document.documentElement) {
    html = $(document.documentElement); //just drop $ wrapper if no jQuery
  } else if (document.getElementsByTagName('html') && document.getElementsByTagName('html')[0]) {
    html = $(document.getElementsByTagName('html')[0]);
  } else if ($('html').length > -1) {//drop this branch if no jQuery
    html = $('html');
  } else {
    alert('no html tag retrieved...!');
    throw 'no html tag retrieved son.';
  }

//position
if (html.css('position') === 'static') { //or //or getComputedStyle(html).position
  html.css('position', 'relative');//or use .style or setAttribute
}

//top (or right, left, or bottom) offset
var currentTop = html.css('top');//or getComputedStyle(html).top
if (currentTop === 'auto') {
  currentTop = 0;
} else {
  currentTop = parseFloat($('html').css('top')); //parseFloat removes any 'px' and returns a number type
}
html.css(
  'top',     //make sure we're -adding- to any existing values
  currentTop + parseFloat(height) + 'px'
); 
```

你几乎已经完成。您已经设置了页面 html 的样式。您可能已经注意到页面中的 css 会影响您的内容。您可以通过将其包含在 iframe 中来解决此问题：

```
var iframeId = 'someSidebar';
if (document.getElementById(iframeId)) {
  alert('id:' + iframeId + 'taken please dont use this id!');
  throw 'id:' + iframeId + 'taken please dont use this id!';
}
html.append(
  '<iframe id="'+iframeId+'" scrolling="no" frameborder="0" allowtransparency="false" '+
    'style="position: fixed; width: 100%;border:none;z-index: 2147483647; top: 0px;'+
           'height: '+height+';right: 0px;left: 0px;">'+
  '</iframe>'
);
document.getElementById(iframeId).contentDocument.body.innerHTML =
  '<style type="text/css">\
    html, body {          \
      height: '+height+'; \
      width: 100%;        \
      z-index: 2147483647;\
    }                     \
  </style>                \
  <p>UNSTYLED HTML!</p>'; 
```

是的，您必须在设置 innerHTML 之前附加 iframe

您应该能够复制/粘贴和编辑它，并成为您的一员！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-05T13:53:12.987

感谢 Devin 提供的示例代码。与其他答案不同，这似乎有效。我实际上使用这段代码[编写了一个扩展](https://dl.dropboxusercontent.com/u/799306/chrome-sidebar.crx)，旨在自己解决这个问题。[但是，在某些 Gmail 标签中使用它时](https://stackoverflow.com/questions/27773816/strange-chrome-extension-issue-injecting-iframes-into-gmail)遇到了困难。

您可以查看我的 hacked-together 代码，了解 iframe 侧边栏的工作示例，该侧边栏不只是覆盖在页面上。但是，我还没有能够克服前面提到的 Gmail 错误，尽管这对您来说可能不是问题。我只是通过 iframe src 引入内容，而不是使用`document.getElementById(iframeId).contentDocument.body.innerHTML`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T06:09:21.760

好吧，您应该只将**z-index**属性添加到您的 css 中，将**width**设置为 300px 并删除**right**。

*但我希望你能改变主意:)*

# obfuscation - 如何进行混淆+报错？

> ID：10100541
> 
> 赞同：1
> 
> 时间：2012-04-11T05:49:41.820
> 
> 标签：obfuscation, error-reporting

再会！

我想分发 c# 应用程序并希望保护它。我需要：

1.  混淆 - 保护源代码 + 文本资源文件。
2.  错误报告 - 关于未处理错误的报告。
3.  清除视图混淆的堆栈跟踪
4.  确保源代码没有变化。

由于混淆（例如序列化/反序列化/反射/全球化）可以解决哪些问题？体会到解决这个问题的复杂性吗？

你推荐什么方法/工具/方法？

感谢帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T11:41:45.850

免责声明：我为红门工作。

[SmartAssembly 可以满足](http://www.red-gate.com/products/dotnet-development/smartassembly)您的需求。反过来为您的积分：

1) 它控制流混淆、方法/字段重命名、资源和嵌入字符串的压缩/加密，以及方法与其包含的类的分离。

2) 自动错误报告自动检测并报告未处理的异常（它还抓取并发送堆栈跟踪、所有局部变量的值以及一些一般系统信息）。

3) 混淆的堆栈跟踪在您的机器上再次被解码，因此您可以清楚地看到它。

4）我不是 100% 知道你的意思，但是如果对它进行任何修改，篡改保护会阻止应用程序运行。如果您的意思是您不想更改自己的源代码，它会作为构建后过程运行，因此不需要对源代码进行任何更改。

关于混淆可能会遇到的问题，到目前为止，最常见的是由于反射（因此 WPF 经常会导致问题），并且数据绑定也会导致很多问题。大多数混淆器应该让您排除存在反射问题的单个类型和方法，尽管显然这会使这些类型和方法不受保护。

还有其他混淆器——我知道有几个人使用 PreEmptive 中的一个叫做 dotfuscator。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:10:22.737

[Crypto Obfuscator](http://www.ssware.com/cryptoobfuscator/obfuscator-net.htm)支持您正在寻找的所有功能，包括混淆、代码保护以及[异常报告](http://www.ssware.com/cryptoobfuscator/exception-reporting.htm)（具有自动去混淆以及所有方法参数和局部变量的完整值）。

Crypto Obfuscator 的另一个独特功能是混淆后显示的警告选项卡。这列出了程序集中可能导致混淆程序集失败的所有代码行。因此，您不必在黑暗中拍摄试图找出混淆程序集不起作用的原因。

免责声明：我为 Crypto Obfuscator 的开发商 LogicNP Software 工作。

# xml - XML XCode 属性

> ID：10100542
> 
> 赞同：1
> 
> 时间：2012-04-11T05:49:46.310
> 
> 标签：xml, xcode

我正在使用 Google 的 API 来检索当前天气。

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName
namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName
attributes:(NSDictionary *)attributeDict 
{
   if([elementName isEqualToString:@"condition"]) 
    {    
      NSString* string = [attributeDict objectForKey:@"data"];  
      NSLog(@"The weather is now %@", string);
    }
[self setUIState:ACTIVE_STATE];
} 
```

有了以上内容，我得到了 3 个条件。我只需要电流，我该如何解决？这是 [xml 代码](http://www.google.com/ig/api?weather=singapore)。

我试图只检索嵌套在“current_conditions”中的“条件”。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:29:12.003

使用 BOOL 变量检查您是否处于 current_conditions 中。例子：

BOOL 检索当前条件；

在初始化程序中将其设置为 NO，然后

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict 
{   
    if([elementName isEqualToString:@"current_conditions"])
    {
        retrieveCurrentCondition= YES;
    }   
} 
```

然后`didEndElement`回到NO。

同时你可以实现方法来得到你想要的任何东西`if(retrieveCurrentCondition)`

# android - 运行时在Windows上编译FFmpeg错误./configure

> ID：10100544
> 
> 赞同：1
> 
> 时间：2012-04-11T05:50:05.000
> 
> 标签：android, ffmpeg

我想使用 FFmpeg 在 android 上解码 mp3 和 acc，我使用 android-ndk-r7 和最新的 cygwin。

我写了一个shell config.sh，内容是：

* * *

```
TMPDIR=/cygdrive/c/temp

PREBUILT=/cygdrive/c/android-ndk-r7/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows
PLATFORM=/cygdrive/c/android-ndk-r7/platforms/android-8/arch-arm

./configure --target-os=linux --arch=arm --enable-version3 --enable-gpl --enable-nonfree --disable-stripping --disable-ffmpeg --disable-ffplay --disable-ffserver --disable-ffprobe --disable-encoders --disable-muxers --disable-devices --disable-protocols --enable-protocol=file --enable-avfilter --disable-network --disable-mpegaudio-hp --disable-avdevice --enable-cross-compile --cc=$PREBUILT/bin/arm-linux-androideabi-gcc --cross-prefix=$PREBUILT/bin/arm-linux-androideabi- --nm=$PREBUILT/bin/arm-linux-androideabi-nm --extra-cflags="-fPIC -DANDROID" --disable-asm --enable-neon --enable-armv5te --extra-ldflags="-Wl,-T,$PREBUILT/arm-eabi/lib/ldscripts/armelf_linux_eabi.x -Wl,-rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib -nostdlib $PREBUILT/lib/gcc/arm-linux-androideabi/4.4.3/crtbegin.o $PREBUILT/lib/gcc/arm-linux-androideabi/4.4.3/crtend.o -lc -lm -ldl" 
```

* * *

我打开cmd，做bash打开cygwin shell，然后做./config，出现问题：“/cygdrive/c/android-ndk-r7/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/ bin/arm-linux-androideabi-gcc 无法创建可执行文件..."

config.log 是：

```
check_ld
check_cc
BEGIN /cygdrive/c/temp/ffconf.SFJc3t92.c
    1   int main(void){ return 0; }
END /cygdrive/c/temp/ffconf.SFJc3t92.c
gcc -fPIC -DANDROID -std=c99 -c -o /cygdrive/c/temp/ffconf.YKRv5TSp.o /cygdrive/c/temp/ffconf.SFJc3t92.c
/cygdrive/c/temp/ffconf.SFJc3t92.c:1:0: warning: -fPIC ignored for target (all code is position independent)
gcc -Wl,-rpath-link=/cygdrive/c/android-ndk-r7/platforms/android-4/arch-arm/usr/lib -L/cygdrive/c/android-ndk-r7/platforms/android-4/arch-arm/usr/lib -nostdlib /cygdrive/c/android-ndk-r7/platforms/android-4/arch-arm/usr/lib/crtbegin_static.o /cygdrive/c/android-ndk-r7/platforms/android-4/arch-arm/usr/lib/crtend_android.o -lc -lm -ldl -o /cygdrive/c/temp/ffconf.Yf1Ftjmo /cygdrive/c/temp/ffconf.YKRv5TSp.o
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: /cygdrive/c/android-ndk-r7/platforms/android-4/arch-arm/usr/lib/crtbegin_static.o: Relocations in generic ELF (EM: 40)
/cygdrive/c/android-ndk-r7/platforms/android-4/arch-arm/usr/lib/crtbegin_static.o: could not read symbols: File in wrong format
collect2: ld returned 1 exit status
C compiler test failed. 
```

不知道是怎么回事，有大神知道是怎么回事，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T09:57:38.033

在这里您可以找到解决问题的方法：http: [//thompsonng.blogspot.co.il/2010/06/ffmpeg-compiling-with-cygwin-window.html](http://thompsonng.blogspot.co.il/2010/06/ffmpeg-compiling-with-cygwin-window.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:15:05.103

确保在 cygwin 中正确设置了 gcc 的路径。您是否尝试交叉编译ffmpeg。在这种情况下，请确保您的路径中没有定义 gcc 的交叉编译版本。ffmpeg 的许多模块不能在 cygwin 中编译。检查 cygwin 架构是否兼容。检查下可用的选项`--arch and --os.`

# rest - 保护 REST 服务的最佳方式是什么？它应该是网站的一部分吗？

> ID：10100545
> 
> 赞同：1
> 
> 时间：2012-04-11T05:50:09.383
> 
> 标签：rest, architecture, model, system, subdomain

我已经开始在一家新公司工作。我们有休息服务（与外部系统进行 XML 交换）并有网站。REST 服务在子域上工作，例如`rest.mycompany.com`. 公司网站是`mycompany.com`。站点和休息就像 REST -> DB <-SITE 一样工作。这意味着 REST 不是站点的一部分。这是一个独立的系统。REST 和站点使用一个数据库并使用 90% 相同的代码（模型、映射器等）。我的问题是双重编码，我想知道为什么它不能成为站点的一部分（导入导出控制器、XML 解析器和一个记录器系统）？另一方面，在每个子域的安全性和高负载方面拥有不同的系统可能会更好......每个子域的分离流量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:51:15.380

> 站点和休息就像 REST -> DB <-SITE 一样工作。这意味着 REST 不是站点的一部分。这是一个独立的系统。REST 和站点使用一个数据库并使用 90% 相同的代码（模型、映射器等）。

这是个大问题。特别是因为一个系统可能会产生一个只在另一个系统中显示的错误（不一致的数据）。很难调试。

> 我的问题是双重编码，我想知道为什么它不能成为站点的一部分（导入导出控制器、XML 解析器和一个记录器系统）？

REST 服务和网站只是 UI 层。实际的业务逻辑应该移动到 UI 层都使用的第三个项目（类库/模块/库）。

> 另一方面，在每个子域的安全性和高负载方面拥有不同的系统可能会更好......每个子域的分离流量？

我会坚持使用不同的网站。不是为了表现，而是因为他们有不同的责任。

# html - CSS淡入淡出动画计时关闭

> ID：10100549
> 
> 赞同：1
> 
> 时间：2012-04-11T05:50:49.060
> 
> 标签：html, css, animation, css-animations

所以我正在尝试淡化 3 张图像，其中一张慢慢叠放在一起，这样您就可以在几秒钟内看到每张图像，然后再下一张淡入淡出。我在[这里学习本教程。](http://css3.bradshawenterprises.com/cfimg/)但是由于某种原因，我的图像似乎彼此褪色太快，我无法很好地控制时间。

**[这是我的预览页面。](http://leongaban.com/_stack/css_animation/cssbanner.html)**你应该看到一只鸟，然后是西红柿，然后是一艘船，但现在它只是相互重叠并最终落在船上。

我正在关注 Demo 1 和 Demo 3，任何想法为什么我的动画关闭了？提前致谢！:)

**我的 jsfiddle：http:** [//jsfiddle.net/leongaban/TPjWG/](http://jsfiddle.net/leongaban/TPjWG/)

**代码：**

```
<style>

@-webkit-keyframes cf4FadeInOut {
 0% {
   opacity:0;
 }
 25% {
   opacity:1;
 }  
 50% {
   opacity:1;
 }
 100% {
   opacity:1;
 }
}

@-moz-keyframes cf4FadeInOut {
 0% {
   opacity:0;
 }
 25% {
   opacity:1;
 }  
 50% {
   opacity:1;
 }
 100% {
   opacity:1;
 }
}

@-ms-keyframes cf4FadeInOut {
 0% {
   opacity:0;
 }
 25% {
   opacity:1;
 }  
 50% {
   opacity:1;
 }
 100% {
   opacity:1;
 }
}       

#cf4a {
    position:relative;
    height:250px;
    width:300px;
    margin:0 auto;
}
#cf4a img {
    position:absolute;
    left:0;
}

#cf4a img {
    -webkit-animation-name: cf4FadeInOut;
    -webkit-animation-timing-function: ease-in-out;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-duration: 30s;

    -moz-animation-name: cf4FadeInOut;
    -moz-animation-timing-function: ease-in-out;
    -moz-animation-iteration-count: 1;
    -moz-animation-duration: 30s;

    -ms-animation-name: cf4FadeInOut;
    -ms-animation-timing-function: ease-in-out;
    -ms-animation-iteration-count: 1;
    -ms-animation-duration: 30s;                
}
#cf4a img:nth-of-type(1) {
    -webkit-animation-delay: 0;     
    -moz-animation-delay: 0;    
    -ms-animation-delay: 0; 
}
#cf4a img:nth-of-type(2) {
    -webkit-animation-delay: 30s;       
    -moz-animation-delay: 30s;  
    -ms-animation-delay: 30s;
}
#cf4a img:nth-of-type(3) {
    -webkit-animation-delay: 60s;       
    -moz-animation-delay: 60s;      
    -ms-animation-delay: 60s;       
}

</style>

<div id="cf4a">

    <a href="http://http://stackoverflow.com/" target="_blank"><img src="img/bird1.jpg" /></a>
    <a href="http://http://stackoverflow.com/" target="_blank"><img src="img/tomato2.jpg" /></a>
    <a href="http://http://stackoverflow.com/" target="_blank"><img src="img/boat3.jpg" /></a>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:38:51.573

我相信您的部分问题是`z-index`在动画期间排序以及动画时间没有重叠（与此相关`z-index`）。

使用仅淡出技术（因为您似乎正在对图像进行一次性动画）。我有一个在 Firefox 和 Chrome 中测试过[**的工作演示**](http://jsfiddle.net/TPjWG/20/)的解决方案（IE9 不支持动画，所以你必须在最初使用扩展时为 IE10 做准备`-ms-`）。由于我只淡出一次，因此最终标签上不需要动画`a`，因为它最后显示并保留（并且是非 CSS3 动画浏览器的默认设置）。

该演示使用以下 CSS 代码（与原始 HTML 相同）：

**CSS**

```
@-webkit-keyframes cf4FadeOut1 {
 0% {
   opacity:1;
   z-index: 100;
 }  
 80% { /* 6 sec trans on 30s animation */
   opacity:1;
   z-index: 100;
 }
 100% {
   opacity:0;
   z-index: 100;
 }
}

@-moz-keyframes cf4FadeOut1 {
 0% {
   opacity:1;
   z-index: 100;
 }  
 80% { /* 6 sec trans on 30s animation */
   opacity:1;
   z-index: 100;
 }
 100% {
   opacity:0;
   z-index: 100;
 }
}

@-ms-keyframes cf4FadeOut1 {
 0% {
   opacity:1;
   z-index: 100;
 }  
 80% { /* 6 sec trans on 30s animation */
   opacity:1;
   z-index: 100;
 }
 100% {
   opacity:0;
   z-index: 100;
 }
}

@-webkit-keyframes cf4FadeOut2 {
 0% {
   opacity:1;
   z-index: 2;
 }   
 90% { /* 6 sec trans on 60s animation */
   opacity:1;
   z-index: 2;
 }
 100% {
   opacity:0;
   z-index: 2;
 }
}

@-moz-keyframes cf4FadeOut2 {
 0% {
   opacity:1;
   z-index: 2;
 }   
 90% { /* 6 sec trans on 60s animation */
   opacity:1;
   z-index: 2;
 }
 100% {
   opacity:0;
   z-index: 2;
 }
}

@-ms-keyframes cf4FadeOut2 {
 0% {
   opacity:1;
   z-index: 2;
 }   
 90% { /* 6 sec trans on 60s animation */
   opacity:1;
   z-index: 2;
 }
 100% {
   opacity:0;
   z-index: 2;
 }
}

#cf4a {
    position:relative;
    height:250px;
    width:300px;
    margin:0 auto;
}
#cf4a a {
    position:absolute;
    left:0;
    z-index: 0;
}

#cf4a a {
    -webkit-animation-timing-function: ease-in-out;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-delay: 0;

    -moz-animation-timing-function: ease-in-out;
    -moz-animation-iteration-count: 1;
    -moz-animation-delay: 0;

    -ms-animation-timing-function: ease-in-out;
    -ms-animation-iteration-count: 1;
    -ms-animation-delay: 0;   
}

#cf4a a:nth-of-type(1) {
     -webkit-animation-name: cf4FadeOut1;
     -moz-animation-name: cf4FadeOut1;
     -ms-animation-name: cf4FadeOut1;

     -webkit-animation-duration: 30s;
     -moz-animation-duration: 30s;
     -ms-animation-duration: 30s;           
}

#cf4a a:nth-of-type(2) {
     -webkit-animation-name: cf4FadeOut2;
     -moz-animation-name: cf4FadeOut2;
     -ms-animation-name: cf4FadeOut2;

     -webkit-animation-duration: 60s;
     -moz-animation-duration: 60s;
     -ms-animation-duration: 60s;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:57:00.680

在您的小提琴和演示页面中，您将图像包裹在`<a>`标签中。这会导致错误出现在您使用 :nth-of-type() 的过程中。

您的所有图像都受到 :nth-of-type(1) 声明的影响，因为它们都是`<a>`标签中的“第一个孩子”元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T06:41:30.170

我做了一些改变，让它比以前工作得更好。但是，我仍然无法解释为什么当图像从最后一个变为第一个时动画无法正常工作。

```
<head>
    <title> CSS alpha animation test </title>
    <meta charset="utf-8" />

</head>

<body>

    <style>

    @-webkit-keyframes cf4FadeInOut {
     0% {
       opacity:0;
     }
     45% {
       opacity:0;
     }    
     55% {
       opacity:1;
     }
     100% {
       opacity:1;
     }
    }       

    #cf4a {
        position:relative;
        height:250px;
        width:300px;
        margin:0 auto;
    }
    #cf4a img {
        position:absolute;
        left:0;
    }

    #cf4a img {
        -webkit-animation-name: cf4FadeInOut;
        -webkit-animation-timing-function: ease-in-out;
        -webkit-animation-iteration-count: infinite;
        -webkit-animation-duration: 30s;     
    }
    #cf4a img:nth-of-type(1) {
         -webkit-animation-delay: 0s;   
    }
    #cf4a img:nth-of-type(2) {
         -webkit-animation-delay: 10s;
    }
    #cf4a img:nth-of-type(3) {
         -webkit-animation-delay: 20s;       
    }

    </style>

    <div id="cf4a">

        <img src="http://leongaban.com/_stack/css_animation/img/bird1.jpg" />
        <img src="http://leongaban.com/_stack/css_animation/img/tomato2.jpg" />
        <img src="http://leongaban.com/_stack/css_animation/img/boat3.jpg" />

    </div>

</body>

</html>​​​​​​​​​​​​​​​ 
```

请注意，我已经删除了不同浏览器的所有其他代码，只留下了 webkit 代码，因为我正在 chrome 上测试它。我还按照他们的示例更改了完成百分比，这产生了一些不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T09:24:47.477

你为什么不尝试使用jquery。

```
function slideSwitch() {
var $active = $('#slideshow IMG.active');

if ( $active.length == 0 ) $active = $('#slideshow IMG:last');
var $next =  $active.next().length ? $active.next()
    : $('#slideshow IMG:first');
//var $sibs  = $active.siblings();
//var rndNum = Math.floor(Math.random() * $sibs.length );
//var $next  = $( $sibs[ rndNum ] );
$active.addClass('last-active');
$next.css({opacity: 0.0})
    .addClass('active')
    .animate({opacity: 1.0}, 1000, function() {
        $active.removeClass('active last-active');
    });
}

$(function() {
setInterval( "slideSwitch()", 5000 );
}); 
```

# javascript - 单击图像时如何交换图像？

> ID：10100553
> 
> 赞同：0
> 
> 时间：2012-04-11T05:51:20.663
> 
> 标签：javascript

这里我使用两张图片。当我单击 Sort_down.png 图像时，它会变为 Sort_up.png。当我再次单击此图像时，它不会变回 Sort_down.png，我该如何实现？

```
 <script type="text/javascript">
function clkimg() {
        var img = document.getElementById('stCodeDSC');
                img.src = '../Images/sort_up.png';

        }
  </script>

    <td width="11%" bgcolor="#C5DEFF" class="menu_header">
    <div align="center" onclick="clkimg();" > 
    <img name="stCodeDSC"  class="img" src="../Images/Sort_down.png"  id="stCodeDSC">
  </div>
 </td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:36:01.830

根据您使用的浏览器，当图像的来源设置为相对 URL 时，读取它会为您提供绝对 URL。如果要使用切换，可以检查源中的字符串，例如：

```
function clkimg() {
  var img = document.getElementById('stCodeDSC'),
      nextImg = img.src.indexOf('up.png')>0 ? 'down':'up';
  img.src = '../Images/sort_' + nextImg + '.png';
} 
```

如果 sort_up 和 sort_down 图像实际上只是标识当前排序的向上或向下状态的图标，则可以将这两个图像合并为一个，并将它们用作使用 CSS 显示的精灵。更多详细信息将在[https://stackoverflow.com/search?q=css+sprite上提供](https://stackoverflow.com/search?q=css+sprite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:54:21.147

你不是在告诉它排序。在您的点击代码中，您需要测试图像是向上还是向下显示并相应地进行更改。就像是：

```
if(img.src === '../Images/sort_up.png')
    img.src = '../Images/sort_down.png';
else
    img.src = '../Images/sort_up.png'; 
```

但是，通常，通过在单击时添加或删除类并使用 css 设置类的样式会更好地处理此问题。

# python - 从提要内容中获取网站图标

> ID：10100557
> 
> 赞同：3
> 
> 时间：2012-04-11T05:51:30.787
> 
> 标签：python, django

我正在解析提要 url 并获取内容。我想知道，如何获取给定提要的 favicon 并在 django 模板中呈现。

我是 django 和 python 的新手。我不知道该怎么做。

我正在使用 feedparser 来解析 feed url。

我正在使用以下代码从文章内容中获取 url 列表。现在，我应该如何获取 favicon url，因为某些内容中的 favicon 呈现为 .png 格式并且有几个 .png 链接。如何区分哪一个是favicon？

```
import feedparser
import lxml.html as lh
import urllib2

#Import Feed for Parsing
d = feedparser.parse("http://www.popgadget.net/atom.xml")

# Print feed name
print d['feed']['title']

# Determine number of posts and set range maximum
posts = len(d['entries'])

# Collect Post URLs
for post in d['entries']:
    link=post['link']
    print('Parsing {0}'.format(link))
    doc=lh.parse(urllib2.urlopen(link))
    imgs=doc.xpath('//img[@class="bpImage"]')
    for img in imgs:
        print(img.attrib['src']) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:05:05.650

您可以从 HTML 文档中获取 favicon 或在服务器上查找 /favicon.ico。这是代码：

```
import lxml.html as lh
import urllib2

link = 'http://www.popgadget.net/'
doc = lh.parse(urllib2.urlopen(link))
favicons = doc.xpath('//link[@rel="shortcut icon"]/@href')
if len(favicons) > 0:
    favicon = favicons[0]
else:
    favicon = "%sfavicon.ico" % link
try:
    urllib2.urlopen(favicon)
except urllib2.HTTPError:
    favicon = None 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T05:54:56.313

你应该去网站的索引页面，读取并解析 HTML，然后查看`link`带有`rel`of的标签`"shortcut icon"`。如果做不到这一点，请在`/favicon.ico`服务器上查看。

# asp.net - 如何在没有登录控制的情况下使用表单身份验证？

> ID：10100559
> 
> 赞同：2
> 
> 时间：2012-04-11T05:51:38.183
> 
> 标签：asp.net, asp.net-membership, forms-authentication, custom-membershipprovider, asp.net-authentication

如何在没有登录控制的情况下使用表单身份验证。我不想在我的站点中使用 asp.net 登录控制。但我必须实现表单身份验证并验证数据库中的用户。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T06:08:46.337

我假设您不使用登录控件，而是使用一些文本框（例如用户名/密码）和登录按钮。代码可能如下所示：

在你的 aspx 文件中

```
<asp:Textbox runat="server" ID="Username"/>
<asp:Textbox runat="server" ID="Password"/>
<asp:Button runat="server" ID="Login" OnClick="Login_OnClick"/>

<asp:Label runat="server" ID="Msg" > 
```

在服务器端：

```
public void Login_OnClick(object sender, EventArgs args)
{
if (Membership.ValidateUser(Username.Text,Password.Text))
{
     FormsAuthentication.RedirectFromLoginPage(Username.Text,
     NotPublicCheckBox.Checked);
}
else
Msg.Text = "Login failed.";
} 
```

表单身份验证通常由两部分组成：

*   调用会员 API 来验证/验证用户
*   使用 FormsAuthentication API 登录用户（创建身份验证 cookie 等）

有关更多信息，请查看这些文章：

*   [http://msdn.microsoft.com/en-us/library/aa480476.aspx](http://msdn.microsoft.com/en-us/library/aa480476.aspx)
*   [http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.redirectfromloginpage.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.redirectfromloginpage.aspx)
*   [http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.authenticate.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.authenticate.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:56:58.527

```
 <forms

  loginUrl ="~/Login.aspx"
  cookieless= "AutoDetect" 
  slidingExpiration="true"
  timeout="10"
   protection ="All"
  />

</authentication>
<authorization>
  <deny users ="?" />
  <allow users="*" />
</authorization> 
```

loginUrl-->在此处使用您的登录页面，默认为 Login.aspx 单击您的登录按钮或登录按钮后，在从数据库验证凭据后使用它

```
 HttpCookie authCookie = FormsAuthentication.GetAuthCookie(txtUsername.Text, false);
        FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(authCookie.Value);
        FormsAuthenticationTicket newTicket = new FormsAuthenticationTicket(ticket.Version, ticket.Name, ticket.IssueDate, ticket.Expiration, ticket.IsPersistent,"");
        authCookie.Value = FormsAuthentication.Encrypt(newTicket);
        Response.Cookies.Add(authCookie);
        string redirUrl = FormsAuthentication.GetRedirectUrl(txtUsername.Text, false);
        Response.Redirect(redirUrl); 
```

在这里您可以找到有关配置 web.config 以满足您的需求的更多信息 [表单身份验证](http://www.asp.net/web-forms/tutorials/security/introduction/forms-authentication-configuration-and-advanced-topics-cs)

# android - 在 Android 4.0 中添加日历和事件

> ID：10100563
> 
> 赞同：2
> 
> 时间：2012-04-11T05:51:59.680
> 
> 标签：android, calendar, uri

我想在 android 4.0 及以上版本的设备中添加日历事件。目前我正在使用以下代码添加事件，

```
if (android.os.Build.VERSION.SDK_INT <= 7 )
                    {
                        Uri calendars = Uri.parse("content://calendar/calendars");
                        Cursor managedCursor = managedQuery(calendars, projection, null, null, null);
                        if (managedCursor.moveToFirst()) 
                        {
                            String calName; 
                            String calId; 
                            int nameColumn = managedCursor.getColumnIndex("name"); 
                            int idColumn = managedCursor.getColumnIndex("_id");
                            do 
                            {
                                calName = managedCursor.getString(nameColumn);
                                calId = managedCursor.getString(idColumn);
                                Log.e("Calendar Id : ",""+calId+" : "+calName);
                            }
                            while (managedCursor.moveToNext());

                            if(calId != null)
                            {
                                try 
                                {
                                    Log.e("Calendar Id : ",""+calId+" : "+calName);
                                    ContentValues event = new ContentValues();
                                    event.put("calendar_id", calId);
                                    event.put("title", summary);
                                    event.put("description", summary);
                                    event.put("eventLocation", "");

                                    event.put("dtstart", startTime);
                                    event.put("dtend", endTime);
                                    event.put("allDay", allDayFlag);  
                                    event.put("eventStatus", 1);
                                    event.put("visibility", 0);
                                    event.put("hasAlarm", 1); 
                                    Uri eventsUri = Uri.parse("content://calendar/events");
                                    Uri url = getContentResolver().insert(eventsUri, event);
                                    Log.e("Event Res : ",""+url);
                                    if(!url.equals(""))
                                    Main.showErrorDialog(this, "Event Successfully Added ");
                                }
                                catch (Exception kwse) 
                                {
                                    Log.e("Exception 1 kwse ",""+kwse.toString());
                                }
                            }
                        }
                    }
                    else
                    {
                        Uri calendars= Uri.parse("content://com.android.calendar/calendars");
                        Cursor managedCursor = managedQuery(calendars, projection, null, null, null);
                        if (managedCursor.moveToFirst()) 
                        {
                            String calName; 
                            String calId; 
                            int nameColumn = managedCursor.getColumnIndex("name"); 
                            int idColumn = managedCursor.getColumnIndex("_id");
                            do 
                            {
                                calName = managedCursor.getString(nameColumn);
                                calId = managedCursor.getString(idColumn);
                                Log.e("Calendar Id : ",""+calId+" : "+calName);
                            }
                            while (managedCursor.moveToNext());

                            if(calId != null)
                            {
                                try 
                                {
                                    Log.e("Calendar Id : ",""+calId+" : "+calName);
                                    ContentValues event = new ContentValues();
                                    event.put("calendar_id", calId);
                                    event.put("title", summary);
                                    event.put("description", summary);
                                    event.put("eventLocation", "");

                                    event.put("dtstart", startTime);
                                    event.put("dtend", endTime);
                                    event.put("allDay", allDayFlag);  
                                    event.put("eventStatus", 1);
                                    event.put("visibility", 0);
                                    event.put("hasAlarm", 1); 
                                    Uri eventsUri = Uri.parse("content://com.android.calendar/events");
                                    Uri url = getContentResolver().insert(eventsUri, event);
                                    Log.e("Event Res : ",""+url);
                                    if(!url.equals(""))
                                    Main.showErrorDialog(this, "Event Successfully Added ");
                                }
                                catch (Exception kwse) 
                                {
                                    Log.e("Exception 2 kwse ",""+kwse.toString());
                                }
                            }
                        }
                    } 
```

上面的代码在 android 3.0 之前运行良好，但是在 android 4.0 中没有添加事件，这是我从我的客户那里得到的投诉。我没有android 4.0的设备，所以我无法检查它。

对于它的 android 设备，`sdk version 7 and below`我们用作

```
Uri calendars = Uri.parse("content://calendar/calendars"); 
```

至于`sdk version above 7`我们在哪里使用

```
Uri calendars= Uri.parse("content://com.android.calendar/calendars"); 
```

这对于 android 4.0 是否也一样，有什么要改变的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T12:37:18.163

我认为 Android 4.0 中不存在“可见性”

和

`int nameColumn = managedCursor.getColumnIndex("calendar_displayName");`

可能比

`int nameColumn = managedCursor.getColumnIndex("name");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:46:23.950

我也遇到了同样的问题及其解决方案。我的事件没有添加到 ICS 和 JellyBean 设备中，而是适用于所有其他设备。
试试这个 -

```
ContentValues event = new ContentValues();
int apiLevel = android.os.Build.VERSION.SDK_INT;
            if(apiLevel<14)
            event.put("visibility", 0); 
```

**仅当设备版本低于 14(ICS) 时才使用可见性**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:30:03.893

在 ICS 中，您必须使用公共日历 API。请检查以下链接：

1.  [如何使用新的 Android 4.0 Ice Cream Sandwich API 读取和编辑 Android 日历事件？](https://stackoverflow.com/questions/7859005/how-to-read-and-edit-android-calendar-events-using-the-new-android-4-0-ice-cream)

2.  [http://www.techrepublic.com/blog/app-builder/programming-with-the-android-40-calendar-api-the-good-the-bad-and-the-ugly/825](http://www.techrepublic.com/blog/app-builder/programming-with-the-android-40-calendar-api-the-good-the-bad-and-the-ugly/825)

3.  [http://android10.org/index.php/articlestrickssecrets/353-android-ics-adding-events-to-the-calendar](http://android10.org/index.php/articlestrickssecrets/353-android-ics-adding-events-to-the-calendar)

4.  [http://www.vogella.com/articles/AndroidCalendar/article.html](http://www.vogella.com/articles/AndroidCalendar/article.html)

# twitter-bootstrap - 如何获取 Jekyll Bootstrap 页面的绝对路径

> ID：10100565
> 
> 赞同：6
> 
> 时间：2012-04-11T05:52:10.693
> 
> 标签：twitter-bootstrap, jekyll, liquid

我尝试将 facebook 共享链接添加到 jekyll 引导页面，但是当添加 FB 将在我使用的共享中使用的 href 时`{{ HOME_PATH }}`。然而，这原来是 / 的相对路径（FB 不理解）。有谁知道如何获得绝对路径而无需对其进行硬编码？

给出 / 的代码

```
<a name="fb_share" type="button"
           share_url="{{ HOME_PATH }}">Share this event on Facebook</a> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T06:11:25.100

不幸的是，不是通过 Jekyll。Jekyll 是一个静态站点生成器，当它运行时，它将整个站点生成为 HTML/CSS/etc 页面，没有服务器端的动态内容。

但是，有一些解决方案：将 url 硬编码，但只在一个地方，因此很容易更改；或者，使用 javascript 在客户端适当地设置它。

## 纯 Jekyll/液体

添加一行

```
host: example.com 
```

to `_config.yml`，然后像这样引用它

```
<a name="fb_share" type="button"
           share_url="http://{{ site.host }}/blah">Share this event on Facebook</a> 
```

## Javascript

如果您使用 jQuery，请将其放在您的启动脚本中的某个位置（显然您可以不使用 jQuery 来执行此操作，但这说明了该技术）：

```
$('[name=fb_share]').each(function() {
    var $this = $(this);
    $this.attr('share_url', 
               $this.attr('share_url').replace('HOME_PATH', 
                                               document.location.host));
} 
```

并有这样的页面

```
<a name="fb_share" type="button"
           share_url="http://HOME_PATH/blah">Share this event on Facebook</a> 
```

（JS 解决方案可能需要一些技巧（例如延迟加载 Facebook JS），具体取决于 Facebook 提供的脚本何时/如何运行。）

# ruby-on-rails-3 - 连接相同模型的两个活动记录并在 Ruby on Rails 中为结果对象应用分页

> ID：10100568
> 
> 赞同：0
> 
> 时间：2012-04-11T05:52:20.120
> 
> 标签：ruby-on-rails-3, activerecord

我正在尝试做过滤部分。过滤是指，当用户根据该产品的详细信息选择一些选项时，将被显示出来。如果用户选择女性（部门）和男性部门，它应该显示属于女性和男性的所有产品。为此，我连接了两个对象。它工作正常。但是，当我尝试进行分页时，它会抛出如下错误：

> 数组的未定义方法“current_page”

我想连接两个 ActiveRecord 对象，结果应该只在同一活动记录的对象中。请告诉我如何做到这一点。

现在正在尝试的是：

```
@products += @prods 
```

**编辑**

```
deptids=["1" "2"]
deptids.each do |did|
    @prods=ProductDetail.where("department_id=?",did)
    if !(@products.nil?)
        @products += @prods
    else
        @products=@prods
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:28:04.517

谷歌搜索后，我知道问题出在分页上，因为我正在为数组获取未定义的方法 current_page。因此我使用 kaminari paginate 数组进行分页，我的问题得到了解决。对于 Kaminari 分页数组，我参考[了这个 stackoverflow 链接](https://stackoverflow.com/questions/6545990/rails-3-kaminari-pagination-for-an-simple-array)。

我已经像这样更改了我的代码：

```
def index
    count=ProductDetail.count
    deptids=["1" "2"]
    deptids.each do |did|
        @search_res=ProductDetail.search do
            with :department_id, did    
            paginate :page=>1, :per_page=>count
        end
    end
    if !(@products.nil?)
        unless @products.kind_of?(Array)
          @products = @products.page(params[:page]).per(30)
        else
          @products = Kaminari.paginate_array(@products).page(params[:page]).per(30)
        end
    end
end 
```

# java - android从对话框中删除视图？

> ID：10100577
> 
> 赞同：1
> 
> 时间：2012-04-11T05:52:52.290
> 
> 标签：java, android, android-2.2-froyo, android-dialog

如何从此对话框中删除视图？我知道我可以从~~LinearLayout.removeView(id)~~ (LinearLayout.removeView(View)) 中删除视图，所以如果有人能告诉我如何获取 (LinearLayout) R.layout.database_creation_form，那也很好。我正在使用 Android-SDK V7

Java 代码：

```
@Override
protected DialogInterface onCreateDialog(int id){
    LayoutInflater factory = LayoutInflater.from(getBaseContext());
    final View textEntryView = factory.inflate(R.layout.database_creation_form, null);
    setDialogViewAttributes(textEntryView);
    final EditText editText = (EditText)textEntryView.findViewById(R.id.create_form_db_name_et2);
    final Spinner spinner = (Spinner)textEntryView.findViewById(R.id.create_form_type_sp);
    return new AlertDialog.Builder(FileBase.this)
        .setTitle(R.string.create_database_string)
        .setView(textEntryView)
        .show();
} 
```

database_creation_form 的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:paddingTop="25px">

<TextView
    android:id="@+id/create_form_db_name_tv"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="@string/create_form_db_name"
    android:textAppearance="?android:attr/textAppearanceLarge" android:paddingBottom="25px"/>

<EditText
    android:id="@+id/create_form_db_name_et2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:inputType="text">

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/create_form_type_tv"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/create_form_type"
    android:textAppearance="?android:attr/textAppearanceLarge"        android:gravity="center"/>

<Spinner
    android:id="@+id/create_form_type_sp"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:57:10.673

试试这个 ：

```
 final LinearLayout textEntryView = (LinearLayout) factory.inflate(R.layout.database_creation_form, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:57:47.230

我会假设 database_creation_form 包含某种线性布局，让我们假设它的 id = linearLayout。然后下面的代码将允许您访问它。

```
LinearLayout mainLinear = (LinearLayout)textEntryView.findViewById(R.id.linearLayout); 
```

# meteor - 流星收藏更新中的狩猎错误

> ID：10100579
> 
> 赞同：7
> 
> 时间：2012-04-11T05:53:22.897
> 
> 标签：meteor

我正在尝试 Meteor 的排行榜示例，并且在尝试随机化玩家分数时遇到了错误。

我遇到的例外是`Exception while simulating the effect of invoking '/players/update' undefined`

相关代码如下所示：

```
'click input.randomize_scores': function () {
  Players.find().forEach(function (player) {
    random_score = Math.floor(Math.random()*10)*5;
    Players.update(player, {$set: {score: random_score}})
  });
} 
```

[完整的 leaderboard.js 内容在这里](https://gist.github.com/2357254)

我觉得我在这里做了一些非常愚蠢的事情。我真的很感激一个指针。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-11T06:12:37.033

update() 的第一个参数需要是文档 ID 或完整的 Mongo 选择器。您正在传递完整的播放器文档。试试这个：

```
Players.update(player._id, {$set: {score: random_score}}); 
```

这是以下的简写：

```
Players.update({_id: player._id}, {$set: {score: random_score}}); 
```

# objective-c - 如何在 Objective-C 的实现文件中调用全局变量

> ID：10100583
> 
> 赞同：2
> 
> 时间：2012-04-11T05:53:46.920
> 
> 标签：objective-c

假设我想要一个 BOOL 来指示某物的状态。然后我调用一个使用递归函数构造某个字符串的类方法。无论如何要将此 BOOL 保留在类方法之外，以便它的状态可以在递归之外更改？我很难清楚地问这个问题，但我希望你们知道我想问什么：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:37:22.340

有两种原始方法：

* * *

1）对多个文件可见：

**MONGlobalBOOL.h**

```
extern BOOL MONGlobalBOOL; 
```

**MONGlobalBOOL.m**

```
BOOL MONGlobalBOOL = NO; 
```

* * *

2）对一个文件可见：

**MONGlobalBOOL.m**

```
static BOOL MONGlobalBOOL = NO; 
```

您不希望在标题中使用它，因为这只会为每次翻译发出变量的副本。

* * *

正在使用：

```
+ (void)method
{
  if (MONGlobalBOOL) {
    ...
  }
} 
```

* * *

谨慎的全局可变数据经常衰减为邪恶的东西。您可以通过在堆栈上创建局部变量来解决您的确切问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:18:43.547

就语言支持而言，可以在 C 中完成的任何事情都可以在 Objective C 中完成。所以您可能只想使用静态变量：

```
static BOOL globalFlag 
```

当然，如果您只想在递归方法中引用变量，例如您想从方法的更深层次递归中向调用方法发送标志，那么您可能会更好地通过引用传递变量：

```
- (void)someMethodWithRecursionFlag:(BOOL *)recursionFlag; 
```

然后在需要时通过引用进行设置：

```
*recursionFlag = YES; 
```

并在您感兴趣时阅读它：

```
[self someMethodWithRecursionFlag:recursionFlag];
if (*recursionFlag)
    [self doSomethingInteresting]; 
```

# database - 如果没有 order by 子句，Oracle 中的 FIRST_VALUE() 函数如何处理行？

> ID：10100584
> 
> 赞同：3
> 
> 时间：2012-04-11T05:53:47.653
> 
> 标签：database, oracle, plsql, data-warehouse, analytic-functions

First_value() 定义声明它返回有序数据集中的第一个值。它的语法是

First_Value(ColumnName) over ( [Partition By Colum] [Order by Column] )

Partition By 和 Order By 是可选的。如果删除了 partition by，我们将得到整个集合的第一个值。

**我的问题是，如果 Order By 被删除，我们会得到什么？oracle 是否隐含地对集合进行排序，或者只是给出一个随机的第一个值，或者给出第一个值以便插入数据？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T06:22:09.947

实际上，如果您不指定`ORDER BY`，您将按照 Oracle 返回结果集的顺序获取数据。这将是任意的，并且随着查询计划的变化而变化。

# php - 如何使用自由职业者帐户登录我的 php 网站？

> ID：10100590
> 
> 赞同：1
> 
> 时间：2012-04-11T05:54:19.823
> 
> 标签：php, api

我有一个带有登录表单的 php 网站，我希望每个访问者都可以使用他们的自由职业者帐户登录我的网站....

有没有人可以帮助我或发送一些相同的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:20:59.417

此类系统的标准方法是[OAuth](http://en.wikipedia.org/wiki/OAuth)。您要用于身份验证的站点将需要支持它或提供一些等价物。您不能使用任意第三方登录凭据。

（好吧，您*可以*使用任意凭据，但这需要您访问第三方网站的用户名和密码（在大多数情况下违反他们的 T&C），然后自己登录以查看它们是否正确。技术上可行，实际上和合法疯狂的）。

# c++ - 缺少 SDL_WINDOWEVENT

> ID：10100611
> 
> 赞同：0
> 
> 时间：2012-04-11T05:55:33.893
> 
> 标签：c++, sdl

我正在使用最新版本的 SDL，枚举 SDL_WINDOWEVENT 似乎丢失了

在 SDL_Events.h 中，SDL_Events 的定义是：

```
/** General event structure */
typedef union SDL_Event {
    Uint8 type;
    SDL_ActiveEvent active;
    SDL_KeyboardEvent key;
    SDL_MouseMotionEvent motion;
    SDL_MouseButtonEvent button;
    SDL_JoyAxisEvent jaxis;
    SDL_JoyBallEvent jball;
    SDL_JoyHatEvent jhat;
    SDL_JoyButtonEvent jbutton;
    SDL_ResizeEvent resize;
    SDL_ExposeEvent expose;
    SDL_QuitEvent quit;
    SDL_UserEvent user;
    SDL_SysWMEvent syswm;
} SDL_Event; 
```

我知道维基上有一个 SDL_WINDOWEVENT

[http://wiki.libsdl.org/moin.cgi/SDL_WindowEvent?highlight=%28%5CbCategoryStruct%5Cb%29%7C%28CategoryEvents%29%7C%28SGStructures%29](http://wiki.libsdl.org/moin.cgi/SDL_WindowEvent?highlight=%28%5CbCategoryStruct%5Cb%29%7C%28CategoryEvents%29%7C%28SGStructures%29)

//------------------------------------------------ --------------------------------

编辑以澄清问题

如果您查看提供的链接，示例代码给出

```
void PrintEvent(const SDL_Event * event)
{
    if (event->type == SDL_WINDOWEVENT) {
        switch (event->window.event) {
        case SDL_WINDOWEVENT_SHOWN:
            fprintf(stderr, "Window %d shown", event->window.windowID);
            break;
// snip
} 
```

我的代码

```
 SDL_Event sdlEvent = {0};

    while(SDL_PollEvent(&sdlEvent))
    {
        if(sdlEvent.type == SDL_QUIT)// || isTriggered(SDLK_ESCAPE))
            System::getEventManagerGlobal().broadcastEvent( Event("QUIT") );
        if(sdlEvent.type == SDL_WINDOWEVENT)
        {
            if(sdlEvent.window.event == SDL_WINDOWEVENT_MOVED)
            {
                // snip
            }
        }
    } 
```

错误 C2065：'SDL_WINDOWEVENT'：未声明的标识符错误 C2039：'window'：不是'SDL_Event'的成员结构/联合错误 C2065：“SDL_WINDOWEVENT_MOVED”：未声明的标识符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:49:19.580

我发现了我遇到的问题 - Joachim 和 user1202136 提示了我

我在使用的 SDL 版本上弄错了，这解释了为什么这些方法不存在..

# javascript - 是否可以简化此 javascript？

> ID：10100613
> 
> 赞同：1
> 
> 时间：2012-04-11T05:55:44.470
> 
> 标签：javascript, jquery

我是javascript新手，很抱歉我不太了解。我有以下内容，我想让它更简单。任何建议将不胜感激。

```
if (entity == "house") {
    primaryKey = store.getItem('accountID') + "02" + "00";
    table = "Content";
}
if (entity == "street") {
    primaryKey = store.getItem('accountID') + "0000";
    table = "Content";
}
if (entity == "city") {
    var primaryKey = store.getItem('categoryID');
    table = "Reference";
}
if (entity == "location") {
    primaryKey = "0001" + store.getItem('examID');
    table = "Content";
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T06:09:08.720

您可以使用表格驱动的方法来做到这一点，并且没有像这样的重复代码（DRY）：

```
var lookupInfo = {
    house: {id: "accountID", prefix, "", suffix: "0200", table: "Content"},
    street: {id: "accountID", prefix: "", suffix: "0000", table: "Content"},
    city: {id: "categoryID", prefix: "", suffix: "", table: "Reference"},
    location: {id: "examID", prefix: "0001", suffix: "", table: "Content"}
};

var primaryKey, data = lookupInfo[entity];
if (data) {
    primaryKey = data.prefix + store.getItem(data.id) + data.suffix;
    table = data.table;
} 
```

除了最小化代码和不重复任何代码之外，还可以轻松地向表中添加更多选项，而无需编写任何额外代码。

* * *

或者，数据表可以变得更紧凑，虽然不是很优雅（从纯编程的角度来看，因为硬编码的常量）：

```
var lookupInfo = {
    house: ["accountID", "", "0200", "Content"],
    street: ["accountID", "", "0000", "Content"],
    city: ["categoryID", "", "", "Reference"],
    location: ["examID", "0001", "", "Content"]
};

var primaryKey, data = lookupInfo[entity];
if (data) {
    primaryKey = data[1] + store.getItem(data[0]) + data[2];
    table = data[3];
} 
```

无论哪种方式，您都会想到为实体使用查找表，然后为每个实体的不同值使用表驱动方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T05:58:13.450

您可以使用 switch 语句。 [https://developer.mozilla.org/en/JavaScript/Reference/Statements/switch](https://developer.mozilla.org/en/JavaScript/Reference/Statements/switch)

```
var primaryKey;
var table = "Content";
switch (entity) {
    case "house":
        primaryKey = store.getItem('accountID') + "0200";
        break;
    case "street":
        primaryKey = store.getItem('accountID') + "0000";
        break;
    case "city":
        primaryKey = store.getItem('categoryID');
        table = "Reference";
        break;
    case "location":
        primaryKey = "0001" + store.getItem('examID');
        break;
    default:
        // do nothing
} 
```

这仍然很冗长，但更容易阅读。

# php - 如何使用 php 将文本转换为 unicode 代码点，如 \u0054\u0068\u0069\u0073？

> ID：10100617
> 
> 赞同：2
> 
> 时间：2012-04-11T05:56:14.893
> 
> 标签：php, regex, text, unicode

**编辑 2：**我想使用 php5 将英文单词转换为 unicode 数字，然后生成为 \u* * * * 其中 * * * * 是 unicode 数字。

在我最初的问题中，我错误地认为 \u 是编码 unicode 的标准，而实际上它只是在 JavaScript 中被转义（感谢 Jukka K. Korpela 指出这一点）。即使我想在 PHP 中进行转换，转换后的 unicode 也将在 JavaScript 中使用。

我尝试了以下选项，但没有运气。deceze的回答虽然成功了，但非常感谢！

**我尝试过的事情**

我读过我可以使用 iconv 来做到这一点，但我没有运气，也找不到任何关于如何做的例子。

我也在这里尝试了 Scott Reynen 的代码[How to get code point number for a given character in a utf-8 string?](https://stackoverflow.com/questions/395832/how-to-get-code-point-number-for-a-given-character-in-a-utf-8-string) 但我似乎无法让它工作。当我尝试它时，我将脚本与

```
$str='test';
echo utf8_to_unicode($str); 
```

它刚刚回响`test`。

我也读过我可以使用

```
echo json_encode("test"); 
```

但我再次只`test`打印到屏幕上。

任何帮助将非常感激。

~~**EDIT1：**实际上我认为它们被称为代码单元而不是代码点。~~

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T09:18:29.653

`json_encode`几乎可以为您完成，但仅适用于非 ASCII 字符。因此，您需要做的就是手动转换 ASCII 字符。这是一个逐个字符执行此操作的函数：

```
function utf8ToUnicodeCodePoints($str) {
    if (!mb_check_encoding($str, 'UTF-8')) {
        trigger_error('$str is not encoded in UTF-8, I cannot work like this');
        return false;
    }
    return preg_replace_callback('/./u', function ($m) {
        $ord = ord($m[0]);
        if ($ord <= 127) {
            return sprintf('\u%04x', $ord);
        } else {
            return trim(json_encode($m[0]), '"');
        }
    }, $str);
} 
```

# java - GWT 错误：无法反序列化响应

> ID：10100619
> 
> 赞同：0
> 
> 时间：2012-04-11T05:56:20.443
> 
> 标签：java, hibernate, gwt, dto

我已经开发了几个 GWT Web 应用程序。最新的一个是对另一个的小修改。除了最新的，它们都运行良好。例外是：

```
The response could not be deserialized 
```

我在 Hibernate 和 GWT 之间使用 Hibernate 和数据传输对象。每个 DTO 都实现 java.io.Serializable 接口。正如我之前所说，在其他应用程序中运行良好。有人可以帮我解决这个错误吗？我不知道是什么原因。

我的休眠对象代码是：

```
public List<AttributeDTO> getAttributes(){
    String sql = "from Attribute where (select max(tDate) from Attribute)-tDate < '0 days 00:05'";
    List<Attribute> attributes = new ArrayList<Attribute>(DatabaseManager.createQuery(sql));
    List<AttributeDTO> attributeDTOs = new ArrayList<AttributeDTO>(attributes != null ? attributes.size() : 0);
    if (attributes != null) {
        for (Attribute attribute : attributes) {
            String date = format.format(attribute.gettDate());
            attributeDTOs.add(new AttributeDTO(attribute.getiAttrId(),attribute.getsName(),attribute.getsValue(),date,attribute.getiDeviceId(),attribute.getsUnits(),new ApplicationFieldDTO()));
        }
    }
    return attributeDTOs;
} 
```

而 AttributeDTO 是：

```
public class AttributeDTO implements Serializable {
    private static final long serialVersionUID = 1L;
    private int iAttrId;
    private String name;
    private String value;
    private String date;
    private String units;
    private int iDeviceId;
    private ApplicationFieldDTO appField;

    public AttributeDTO() {}

    public AttributeDTO(int attrId, String name, String value, String date, int deviceId, String units, ApplicationFieldDTO appField) {
        this.iAttrId = attrId;
        this.name = name;
        this.value = value;
        this.date = date;
        this.iDeviceId = deviceId;
        this.units = units;
        this.appField = appField;
    }
} 
```

从 GWT 调用 getAttributes() 方法，该方法返回一个 AttributeDTO 列表。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:57:09.580

如果您的类中只有一个成员不可序列化，也会出现该错误 - 因此该错误也可能在 ApplicationFieldDTO 的定义中。

顺便说一句，您也可以使用[Gilead](http://noon.gilead.free.fr/gilead/index.php?page=gwt) ，而不是使用数据传输对象，然后甚至延迟加载也可以工作。（但对于您现有的应用程序，引入 Gilead 可能需要做很多工作。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:14:25.423

使用`ArrayList`而不是 List 并重试

看看这个[帖子](https://stackoverflow.com/questions/5553593/gwt-jpa-the-response-could-not-be-deserialized)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T06:28:04.297

我有同样的麻烦。尝试使用 com.google.gwt.user.client.rpc.IsSerializable 而不是 Serializable。它对我有用，我希望对你有帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-10T07:41:37.093

我也遇到了类似的问题。在我从 UI 提交值的情况下，异常

> “GWT 错误：无法反序列化响应”

显示。我发现整个代码库没有正确打包以转换为 .war 文件。我正在使用 Ant Build 方法来创建**.war**文件。

后来我在eclipse中安装了一个插件，对我来说效果很好。[我使用此链接](http://dl.google.com/eclipse/inst/d2gwt/latest/4.3)从 eclipse 市场安装了插件

# extjs - 在 extjs 中添加与组合框相邻的按钮

> ID：10100625
> 
> 赞同：3
> 
> 时间：2012-04-11T05:56:50.477
> 
> 标签：extjs

我有一个面板，其中有 2 个组合框。我需要在其中一个组合框旁边添加一个按钮。组合框和按钮都应该在同一行。下面是我的面板

```
filterPanel = new Ext.Panel({
        renderTo: document.body,
          bodyStyle: 'padding-top: 6px;',
    title: 'Filters',
        collapsible: true,
        collapsed: true,
        shadow: 'sides',
        width: 400,
        frame: true,
        floating: true,
        layout: 'form',
        labelWidth: 150,
        buttonAlign: 'center',
        items: [
            {
                xtype: 'combo',
                id: 'xFilter',
                width: 200,
                listWidth: 200,
                fieldLabel: 'Filter',
                store: filterStore,
                displayField:'filterDisp',
                valueField:'filterVal',
                typeAhead: true,
                editable: true,
                mode: 'local',
                forceSelection: true,
                triggerAction: 'all',
                selectOnFocus:false
            },{
                xtype: 'combo',
                id: 'xStatus',
                width: 200,
                listWidth: 200,
                fieldLabel: 'Status',
                store: statusStore,
                displayField:'statusDisp',
                valueField:'statusVal',
                typeAhead: true,
                editable: false,
                mode: 'local',
                forceSelection: true,
                triggerAction: 'all',
                selectOnFocus:false
            }
        ]
    }); 
```

我需要按钮与第一个组合框相邻，这样第一个组合和按钮都应该是同一行。有人可以帮我吗？

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:23:25.427

在 ExtJS 4 中，由于 'compositefield' 不再可用，您可以使用 'fieldcontainer' 代替。

```
var config = {
    xtype:'fieldcontainer',
    layout:'hbox',
    fieldLabel: 'Combobox',
    items:[{
        xtype: 'combo',
        flex:1
        //rest of combo config,
    },{
        xtype:'button',
        text: 'Add New',
        handler: function(){
            //add new record
        }
    }]
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:40:20.790

尝试使用复合字段

```
{
    xtype: 'compositefield',
    labelWidth: 120
    items: [
        {
            xtype     : 'textfield',
            fieldLabel: 'Title',
            width     : 20
        },
        {
            xtype     : 'textfield',
            fieldLabel: 'First',
            flex      : 1
        },
        {
            xtype     : 'textfield',
            fieldLabel: 'Last',
            flex      : 1
        }
    ]
} 
```

或使用[hbox](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.layout.HBoxLayout)或[列](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.layout.ColumnLayout)布局。

# android - 使用代理时，Android Emulator 无法与本地 Asp.net Web 应用程序一起使用

> ID：10100628
> 
> 赞同：0
> 
> 时间：2012-04-11T05:56:59.083
> 
> 标签：android, asp.net, asp.net-mvc

大家
好，我有一个带有 Android 客户端的 asp.net mvc Web 应用程序。我想在真实设备上测试应用程序，但问题是 Web 应用程序尚未发布。该应用程序在我使用 10.0.2.2 ip 作为 localhost 的模拟器上运行良好。android 应用程序需要互联网才能使用谷歌地图。当我在需要的模拟器上使用代理时，无法访问网络应用程序，即 10.0.2.2 不起作用。
**关于如何将 android 模拟器与 Web 应用程序和互联网连接的任何想法。另外，如果是真实设备，我该怎么办？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:50:22.740

问题是代理无法访问您的本地服务器，所以如果您想通过代理进行测试（除非是本地代理），您必须在互联网上发布 webapp

# c# - 导出 CSV 不显示特殊字符，如 α、β 等

> ID：10100629
> 
> 赞同：0
> 
> 时间：2012-04-11T05:57:00.710
> 
> 标签：c#, csv

我的网站具有导出 csv 功能，可以以 csv 格式导出网站的详细信息。我的代码处理特殊字符，如 Å ,ĉ 但不处理希腊字符。我正在使用以下代码生成 csv。

```
Response.ContentEncoding = System.Text.Encoding.Default;
Response.Charset = "iso-8859-1"; 
```

我已经尝试了 charset 以及 contentEncoding 的所有选项，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:14:48.767

您需要使用一种可以对您需要的所有字符进行编码的编码，并且该编码可以被加载文件的任何程序识别。

您当前使用的是固定长度的 8 位编码，并且没有固定长度的 8 位编码可以编码您需要的所有字符。因此，您需要使用 UTF-8 或 UTF-16 之类的东西对您的内容进行编码。

另一方面，许多常见的 .csv 文件阅读器不支持固定长度的 8 位编码以外的任何内容。

我认为您的下一步是找到足够多的 .csv 文件阅读器能够理解的 Unicode 编码来满足您的需求。如果你能找到合适的编码，那么你就完成了。如果没有编码满足您的需求，那么我怀疑您需要使用 .csv 以外的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:58:13.993

阿米特，如果您的问题涉及 Microsoft Excel，请查看以下问题：

[Microsoft Excel 破坏 .csv 文件中的变音符号？](https://stackoverflow.com/questions/155097/microsoft-excel-mangles-diacritics-in-csv-files)

> 有一个已知错误，即 Excel 在通过文件关联打开 UTF8 csv 文件时假定它们是 ASCII，而忽略 UTF8 BOM 的存在。

使用 UTF-16 的旧 Excel 似乎也有一个修复程序，但这意味着包括 CSV 和 Excel 的下载链接。

另一种方法是指示用户将文件保存并导入为 UTF-8，这似乎会强制 Excel 正确处理文本。

我不认为这个有灵丹妙药。

# javascript - 在哪里以及如何显示 ajax 加载图片

> ID：10100637
> 
> 赞同：0
> 
> 时间：2012-04-11T05:57:25.653
> 
> 标签：javascript, ajax, jsp, struts2

在左侧菜单栏中，我有两个关于和消息的链接，同时单击消息它正在从服务器获取用户消息页面，它工作正常。我想向用户显示一些图片作为加载符号，该代码放在哪里我没有得到它。我正在使用以下 ajax 代码从服务器获取消息页面

```
 function getMessages(id)
    {
        var xmlhttp;
        if (window.XMLHttpRequest)
        {
            xmlhttp=new XMLHttpRequest();
        }
        else
        {
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        if (typeof xmlhttp == "undefined")
        {
            ContentDiv.innerHTML="<h1>XMLHttp cannot be created!</h1>";
        }
        else{

            var query='message?id='+id;
            xmlhttp.open("GET",query,true);
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    document.getElementById("profile-detail").innerHTML=xmlhttp.responseText;
                }
            }
            xmlhttp.send();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:17:56.577

1 假设你在你的页面

```
<img id="ajaxImageCtrl" src="path/ajax.gif" /> 
```

2 将此行放在后面`var xmlhttp;`

```
document.getElementById("ajaxImageCtrl").style.display = 'block' 
```

3 把这条线

```
document.getElementById("ajaxImageCtrl").style.display = 'none'; 
```

后

```
 document.getElementById("profile-detail").innerHTML=xmlhttp.responseText; 
```

我希望这能完成这项工作

# php - Joomla 管理员的印地语语言包

> ID：10100638
> 
> 赞同：1
> 
> 时间：2012-04-11T05:57:28.057
> 
> 标签：php, joomla

任何人都可以帮助我。我需要 Joomla 的印地语语言包。我需要一个管理员可以通过在 Joomla 中输入文章管理器来创建印地语页面。我尝试了很多包，但没有一个可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:38:32.093

Joomla 1.5 有一个印地语语言包，可以从[这里](http://joomlacode.org/gf/project/jtranslation/frs/?action=FrsReleaseBrowse&frs_package_id=5155)下载。如果您在 Joomla 2.5 中需要它，那么转换它非常容易。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T05:56:06.407

[您可以从这里](http://www.bhavyasoft.com/download/file/2-joomla-2-5-hindi-translation-language-pack-download.html)下载官方 Joomla 2.5 语言页面

# ruby-on-rails-3 - CarrierWave 和 RMagick：使用进程 :resize_and_pad 抛出 nil 不是符号错误

> ID：10100640
> 
> 赞同：0
> 
> 时间：2012-04-11T05:57:41.287
> 
> 标签：ruby-on-rails-3, imagemagick, carrierwave, rmagick

我创建了一个图像上传器并在其中定义了以下版本

```
version :profile do
  process :resize_and_pad [100, 100]
end 
```

当我上传文件时，我收到以下错误消息：

```
nil is not a symbol 
```

查看完整的堆栈跟踪，它来自 processing.rb

```
carrierwave (0.6.1) lib/carrierwave/uploader/processing.rb:85:in `block in process!'
carrierwave (0.6.1) lib/carrierwave/uploader/processing.rb:81:in `each'
carrierwave (0.6.1) lib/carrierwave/uploader/processing.rb:81:in `process!'
carrierwave (0.6.1) lib/carrierwave/uploader/callbacks.rb:18:in `block in with_callbacks'
carrierwave (0.6.1) lib/carrierwave/uploader/callbacks.rb:18:in `each'
carrierwave (0.6.1) lib/carrierwave/uploader/callbacks.rb:18:in `with_callbacks'
carrierwave (0.6.1) lib/carrierwave/uploader/cache.rb:112:in `cache!'
carrierwave (0.6.1) lib/carrierwave/uploader/versions.rb:230:in `block in cache_versions!'
carrierwave (0.6.1) lib/carrierwave/uploader/versions.rb:216:in `each'
carrierwave (0.6.1) lib/carrierwave/uploader/versions.rb:216:in `cache_versions!'
carrierwave (0.6.1) lib/carrierwave/uploader/callbacks.rb:18:in `block in with_callbacks'
carrierwave (0.6.1) lib/carrierwave/uploader/callbacks.rb:18:in `each'
carrierwave (0.6.1) lib/carrierwave/uploader/callbacks.rb:18:in `with_callbacks'
carrierwave (0.6.1) lib/carrierwave/uploader/cache.rb:112:in `cache!'
carrierwave (0.6.1) lib/carrierwave/uploader/versions.rb:230:in `block in cache_versions!'
carrierwave (0.6.1) lib/carrierwave/uploader/versions.rb:216:in `each'
carrierwave (0.6.1) lib/carrierwave/uploader/versions.rb:216:in `cache_versions!'
carrierwave (0.6.1) lib/carrierwave/uploader/callbacks.rb:18:in `block in with_callbacks'
carrierwave (0.6.1) lib/carrierwave/uploader/callbacks.rb:18:in `each'
carrierwave (0.6.1) lib/carrierwave/uploader/callbacks.rb:18:in `with_callbacks'
carrierwave (0.6.1) lib/carrierwave/uploader/cache.rb:112:in `cache!'
carrierwave (0.6.1) lib/carrierwave/mount.rb:315:in `cache'
carrierwave (0.6.1) lib/carrierwave/mount.rb:173:in `profile_image='
carrierwave (0.6.1) lib/carrierwave/orm/activerecord.rb:37:in `profile_image='
activerecord (3.2.2) lib/active_record/attribute_assignment.rb:85:in `block in assign_attributes'
activerecord (3.2.2) lib/active_record/attribute_assignment.rb:78:in `each'
activerecord (3.2.2) lib/active_record/attribute_assignment.rb:78:in `assign_attributes'
activerecord (3.2.2) lib/active_record/persistence.rb:212:in `block in update_attributes'
activerecord (3.2.2) lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
activerecord (3.2.2) lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
activerecord (3.2.2) lib/active_record/transactions.rb:208:in `transaction'
activerecord (3.2.2) lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
activerecord (3.2.2) lib/active_record/persistence.rb:211:in `update_attributes'
app/controllers/users_controller.rb:24:in `update_profile' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:45:38.003

我认为这是因为缺少论据，请尝试

`process :resize_and_pad => [120, 120, "blue", "Center"]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T19:51:25.380

我不能为重力类型使用简单的字符串，试试这个：

```
process :resize_and_pad => [100, 100, "white", Magick::CenterGravity] 
```

[http://rmagick.rubyforge.org/src_over.html](http://rmagick.rubyforge.org/src_over.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T03:03:38.797

您也可以使用十六进制代码，但您需要 octothorp。

```
process :resize_and_pad => [1000,1000,"#222222", Magick::CenterGravity] 
```

# java - Eclipse的blackberry java插件编译问题

> ID：10100643
> 
> 赞同：1
> 
> 时间：2012-04-11T05:57:56.790
> 
> 标签：java, eclipse, blackberry, compilation

我正在使用 Eclipse 3.5 和 Windows 7 x64 上的 Blackberry Java Plug-in 1.1.1 为 blackberry OS 5 编写应用程序。我的应用程序由五个项目、2 个库和 3 个应用程序组成。当我编译库时一切顺利，但是当我尝试打包三个应用程序中的任何一个时，会发生以下情况：

1 - 第一次生成的 cod 文件是无用的。当我在模拟器或设备上安装任何这些代码时，什么都没有发生。

2 - 此时我意识到，如果我对导致重新编译以提供新 cods 的三个包之一进行更改，则新 cods 的大小更大，它们可以正常工作。如果我重复这个，我会回到第一步，所以我每次都必须编译这三个项目两次。

这种情况非常奇怪且耗时。关于可能是什么问题的任何想法？在此先感谢，我很抱歉我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:13:24.050

首先，我建议升级到最新版本的 Eclipse（目前是 Indigo 3.7）和 BlackBerry 插件（目前是 1.5），过去一年有很多错误修复可能会解决您的问题。

其次，您是否考虑过通过将库源代码添加到项目构建路径中来将它们直接包含到您的应用程序中？我发现这是将库代码包含到 BlackBerry 项目中的一种更可靠的方法，并且可以避免使用多个库代码。

# c++ - 为什么类的静态成员函数没有“常量正确性”的概念？

> ID：10100649
> 
> 赞同：11
> 
> 时间：2012-04-11T05:58:39.273
> 
> 标签：c++, static-members, const-correctness

用例：

```
class A {
  static int s_common;
public:
  static int getCommon () const { s_common; };
}; 
```

通常这会导致错误：

> 错误：静态成员函数 'static int A::getCommon()' 不能有 cv 限定符

这是因为`const`ness 仅适用于 所指向的对象`this`，该对象不存在于`static`成员函数中。

但是，如果允许，`static`成员函数的“常量”可能很容易与`static`数据成员相关联。
为什么这个特性在 C++ 中不存在；这背后有什么合乎逻辑的原因吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T06:07:08.880

`cv-qualifiers`影响函数的签名。所以你可以有：

```
class A {
  static int s_common;
public:
  static void getCommon () const {  };
  static void getCommon () {  };
}; 
```

现在......你会怎么称呼那个`const`？没有`const`对象可以调用它（好吧，您可以在`const`对象上调用它，但这不是重点）。

我只是在这里猜测，可能还有其他原因。:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-11T06:14:43.583

> 但是，如果允许，静态成员函数的“常量”可能很容易与静态数据成员相关联。

这就是您的问题变得混乱的地方。声明为的非静态成员函数`const`仍然`const`无法访问*静态*数据成员。`const`仅适用于（即：`this`非静态数据成员）。

静态成员函数在语法上以相同的方式使用是没有意义的`const`，但结果却完全不同（即：访问静态数据成员`const`）。

此外，静态数据成员只不过是类范围的全局变量，它们具有类访问控制（公共/私有/等）。因此，某些函数对它们具有不同的访问权限是没有意义的`const`，尤其是基于它们的签名。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-11T06:06:25.630

`const`在成员函数上使用 cv-qualifier的基本原理是：
表明`this`传递给成员函数的隐藏指针是不可变的，并且不能被修改。`static`成员函数没有隐藏`this`参数，因此对于成员函数来说是没有意义的`const`。`static`

**但是，如果允许，静态成员函数的“常量”可能很容易与静态数据成员相关联。**

这不是一开始就有限定符的理由`const`，这从你不能将 cv 限定符应用于自由函数的事实中显而易见。`cv-qualifiers`were 和 are 仅用于`this`，其函数被调用的对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-11T06:19:37.777

不改变*任何*全局状态的函数是纯函数。C++11 引入了可能包含`[[pure]]`在特定平台上的属性。

一个问题`const`是它是函数*类型的一部分。*将该`static const`函数分配给“正常”函数指针将需要特殊的转换、强制转换或衰减规则。正如 Luchian 所提到的，它将允许完全模棱两可的重载。

本质上，您描述的是从`static`成员中形成一个单例对象，共享一个公共的、合格的间接访问路径。要使非 const 对象出现 const，必须通过某些东西访问它，但没有`this`. 它会`decltype`改变吗？没有好的答案。如果你想要所有这些，那么将它们明确地放在一个`class`对象中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T06:05:12.853

我的猜测是，在成员函数上使用`static`and`const`来引用静态成员变量的 constness 从未被视为一种选择。IMO 您的建议是混合这两个关键字的一种奇怪（但可能是明智的）方式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-11T06:09:30.237

好问题。

我相信概念上的 const-ness 适用于定义明确的对象或数据结构。不要全局/静态等。

同样，我可能会问为什么全局（或特定于命名空间）的函数可能不是`const`，即它可能承诺不修改任何全局（或特定于命名空间）的变量。

恕我直言，这没有太大意义。但是，是的，属于特定类的静态成员的 const-ness - 这在某些情况下*可能*很有用，恕我直言。

# asp.net - Asp.net GridView 导出到 excel 问题

> ID：10100652
> 
> 赞同：0
> 
> 时间：2012-04-11T05:58:47.840
> 
> 标签：asp.net, .net, ajax

我正在尝试将我的导出`GridView`到 excel，但我遇到了一些问题。

起初我遇到了一些其他错误，所以我添加`EnableEventValidation ="false"`到我的页面，并添加`public override void VerifyRenderingInServerForm(Control control)`到我的源代码中。现在我从 javascript 得到这个错误：

**`Microsoft JScript runtime error: Sys.WebForms.PageRequestManagerParserErrorException: The message received from the server could not be parsed.`**

我猜这是因为我的网格在`ajax`更新面板中，但我不确定。

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:05:45.530

这是因为您的更新面板，如果您删除更新面板，它将起作用，或者您可以设置 PostBackTrigger 以了解详细信息，请参阅此博客文章

[http://nice-tutorials.blogspot.com/2009/06/export-gridview-to-excel-within-update.html](http://nice-tutorials.blogspot.com/2009/06/export-gridview-to-excel-within-update.html)

# jquery - 缺少文本中的 RenderSection

> ID：10100654
> 
> 赞同：2
> 
> 时间：2012-04-11T05:58:54.887
> 
> 标签：jquery, razor, asp.net-mvc-4

**更新：**一位同事告诉我这是 MVC4 beta 中的一个已知错误。该问题是由 javascript 中的 } 括号引起的，导致 RenderSection 认为该部分已结束。

我的页面特定 jquery 的布局中有一个渲染部分。它没有正确地将代码从我的视图复制到渲染部分。

我的 _Layout.cshtml 中有以下内容（模板 _Layout.cshtml + 我的新部分）

```
<script src="@Url.Content("~/Scripts/AjaxLogin.js")" type="text/javascript"></script>
        @RenderSection("jqueryheader", false)

        <meta name="viewport" content="width=device-width">
    </head> 
```

我的 Index.cshtml 中有以下代码

```
@section jqueryheader {
<script type="text/javascript">
    $(document).ready(function () {
        var listid = '@(Model.ID)';
        $("#additem").load("~/Item/AddItem/" + listid);
    });
</script>
} 
```

我在 IE 中得到以下输出：

```
<script src="/Scripts/AjaxLogin.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        var listid = '9f3348ef-f713-48c6-a267-3777182cf39e';
        $("#additem").load("~/Item/AddItem/" + listid);

        <meta name="viewport" content="width=device-width">
    </head> 
```

任何人都知道为什么 RenderSection 错过了`});</script>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T06:01:54.777

可能的原因可能是您的`<meta>`标签未正确关闭，从而导致 IE 出现此类结果。

尝试关闭您的`<meta>`标签`/>`

```
<meta name="viewport" content="width=device-width" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T08:29:33.770

您是否有理由将 JavaScript 放在标头中？

我不是 100% 确定这里的问题是什么，但这里有一个最佳实践建议。我建议您将此脚本放在视图/页面的底部。这是最佳实践。因此，在您的布局视图/母版页中，就在您关闭正文标记之前，请执行以下操作：

```
<body>

     <!-- Other HTML code -->

     <script src="@Url.Content("~/Assets/JavaScripts/jquery-1.7.2.min.js")"></script>
     @RenderSection("JavaScriptBodySection", false)

</body> 
```

然后在您看来，您只需这样做：

```
@section JavaScriptBodySection
{
     <script>

          $(document).ready(function () {
               var listid = '@(Model.ID)';
               $("#additem").load("~/Item/AddItem/" + listid);
          });

     </script>
} 
```

我也有像你一样的元标记，因为我的文档类型是 HTML 4.01 严格的。我从来没有遇到过这个问题。我只是将我所有的 JavaScript 放在页面底部。

# android - Android 操作栏中的分隔符不可见

> ID：10100656
> 
> 赞同：0
> 
> 时间：2012-04-11T05:59:18.083
> 
> 标签：android, android-layout, styles, android-actionbar

我已经成功地在 android 中实现了 Actionbar，但我遇到了一个问题。我在其中使用了分隔符，但不知何故我的分隔符不可见。

这是布局文件和样式：-

XML 文件：-

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF" >

    <RelativeLayout style="@style/TitleBar" >

        <ImageButton
            android:id="@+id/homebtn"
            style="@style/TitleBarAction"
            android:contentDescription="Home"
            android:onClick="onClickHome"
            android:src="@drawable/title_home" />

        <ImageView
            android:id="@+id/separator"
            style="@style/TitleBarSeparator"
            android:layout_toRightOf="@id/homebtn"
            android:visibility="visible" />

        <ImageView
            android:id="@+id/logos"
            style="@style/TitleBarLogo"
            android:layout_toRightOf="@id/separator"
            android:contentDescription="Logo"
            android:src="@drawable/logo" />
    </RelativeLayout>
</RelativeLayout> 
```

**风格：-**

```
 <style name="TitleBar">
        <item name="android:id">@id/titlebar</item>
        <item name="android:layout_width">fill_parent</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:orientation">horizontal</item>
        <item name="android:background">@color/title_background</item>
    </style>

    <style name="TitleBarLogo">
        <item name="android:id">@id/title_logo</item>
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:clickable">true</item>
    </style>

    <style name="TitleBarAction">
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:background">@drawable/title_button</item>
    </style>

<style name="TitleBarSeparator">
        <item name="android:layout_width">1px</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:background">@color/title_separator</item>
    </style> 
```

这是快照。

![在此处输入图像描述](../Images/a2c73df96316e41aaf4ef336838a6ab7.png)

&我想要的是这样的......![在此处输入图像描述](../Images/aee0148d2e46126bb5637f3579332289.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:44:37.553

也许是因为您将 layout_height 设置为 wrap_content 而不是 fill_parent ？

# jquery - 如何从 json url 获取数据

> ID：10100660
> 
> 赞同：5
> 
> 时间：2012-04-11T05:59:31.490
> 
> 标签：jquery, json

我想在我的网页上显示来自[https://raw.github.com/currencybot/open-exchange-rates/master/latest.json的数据（国家名称和货币价值）。](https://raw.github.com/currencybot/open-exchange-rates/master/latest.json)请建议我这样做的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T06:15:27.973

您可以使用 JSONP 发出此类请求，但我认为您尝试访问的 url 没有 JSONP 功能。由于您想要汇率（我想根据您尝试使用的网址），您可以使用：

```
 $(document).ready(function(){
    $.ajax({
        url: 'http://openexchangerates.org/latest.json',
        dataType: 'jsonp',
        success: function(json) {
            // Rates are in `json.rates`
            // Base currency (USD) is `json.base`
            // UNIX Timestamp when rates were collected is in `json.timestamp`        

            rates = json.rates;
            base = json.base;
            console.log(rates);
        }
    });
}); 
```

参考：[见这里](http://josscrowcroft.github.com/open-exchange-rates/#javascript-ajax-jquery)

希望能帮助到你

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T06:17:45.047

这应该适用于[jQuery](http://jquery.com)：

```
$.ajax({
  url: 'https://raw.github.com/currencybot/open-exchange-rates/master/latest.json',
  dataType: 'jsonp',
  success: function (data, textStatus, jqXHR) {
    //the variable 'data' will have the JSON object
    // In your example, the following will work:
    alert(data.disclaimer);
   error: function(jqXHR, textStatus, errorThrown) {
     //Error handling code
     alert('Oops there was an error');
   }
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T06:03:04.530

使用 jQuery.getJSON() 函数

浏览本教程[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# c++ - 使用 const char* 时出现内存错误？

> ID：10100670
> 
> 赞同：0
> 
> 时间：2012-04-11T06:00:20.023
> 
> 标签：c++, linux, environment-variables

嗨，我在 Linux 平台上使用 C++，我必须获取环境变量（用户定义）的值并进一步使用它。以下是我正在使用的代码，

```
const char *show_line = getenv ("MY_SHOW_LINES");

bool myFlag = (strcmp(show_line, "1") == 0) ? false : true; 
```

当我将环境变量（MY_SHOW_LINES）的值设置为 1 但我取消设置它的值（即取消设置 MY_SHOW_LINES）时，上面的代码可以正确执行。上面的代码给出了内存故障。关于上述联合国预期行为的任何建议？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T06:02:52.187

如果将 NULL 指针传递给`strcmp`，则会出现未定义的行为，在这种情况下很可能会崩溃。

您是否知道指针可以`NULL`，即故意无效？

你应该警惕这种可能性：

```
bool myFlag = false; // set default value
if ( show_line != NULL ) {
    myFlag = ( strcmp(show_line, "1") != 0 ); // "? false : true" same as NOT…
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:03:06.287

根据手册页，

> getenv() 函数返回一个指向环境中值的指针，如果不匹配，则返回 NULL。

因此，如果它不存在，它会返回`NULL`，这会导致`strcmp()`.

# android - 具有 java 活动和本机引擎的 Android 应用程序

> ID：10100672
> 
> 赞同：0
> 
> 时间：2012-04-11T06:00:24.687
> 
> 标签：android, native

用 c++ 编写应用程序引擎和使用 java 的用户界面是个好主意吗？

## 更新

应用程序将在后台显示 maps.engine 将下载和缓存地图。我对系统稳定性感到害怕，因为本机部分不会在 dalvik mashina 中受到保护，并且本机部分的异常可能会使我的设备崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:19:27.830

一般来说，不会。规则是除非绝对必要，否则不要在 Android 应用程序中使用任何 C++ 代码。如果您从头开始编写所有内容，请尽可能考虑仅使用 Java。但是，如果您已经拥有一些 C++ 引擎，您将需要考虑将其作为代码的 C++ 本机部分移植到 Android。在 Android 中调试本机代码也更加复杂，并且需要更多设置。

# forms - 使用从 Codeigniter 到 Wordpress 的表单验证类

> ID：10100673
> 
> 赞同：1
> 
> 时间：2012-04-11T06:00:27.340
> 
> 标签：forms, wordpress, validation, codeigniter

有没有办法使用codeigniter的表单验证类并将其应用于wordpress（创建插件）。

或者有人已经试过了吗？

谢谢

# android - 使自定义偏好看起来像标准偏好

> ID：10100674
> 
> 赞同：3
> 
> 时间：2012-04-11T06:00:30.130
> 
> 标签：android, android-layout, android-preferences

我已经根据这里的文章编写了一个自定义的 android seekbar 首选项对象：[http ://robobunny.com/wp/2011/08/13/android-seekbar-preference/](http://robobunny.com/wp/2011/08/13/android-seekbar-preference/)

对于我的版本，我在我正在使用的项目中完全以编程方式创建首选项（即我有 seek_bar_preference.xml，但不是示例中的示例preferences.xml）

我遇到的一件事是试图让它与默认的通知布局相匹配。例如，我希望“标题”具有相同的填充、字体大小、比“摘要”更亮的颜色，并且能够禁用首选项，并且它看起来与主要的 android 相同。

我应该使用特定的主题或样式来继承所有默认设置吗？如果可能的话，我不想为不同版本的 android 设置多个布局。

# php - PLATFORM 应用程序错误 应用程序身份验证失败。API 凭据不正确。在贝宝自适应支付

> ID：10100675
> 
> 赞同：0
> 
> 时间：2012-04-11T06:01:00.520
> 
> 标签：php, paypal, paypal-adaptive-payments

在 Paypal 自适应支付中返回错误“平台应用程序错误应用程序身份验证失败。API 凭据不正确。” 更换服务器后。

如果有人知道解决方案，请回复。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T12:28:42.920

只是为了扩展上面的答案。

您可以检查您是否使用了正确的凭据。如果您使用沙箱进行开发，请检查这些人的回答：[我应该为 PayPal 沙箱使用什么用户名/密码/签名？](https://stackoverflow.com/questions/10033940/what-username-password-signature-should-i-be-using-for-the-paypal-sandbox)

否则，您应该使用您的生产贝宝帐户的凭据。您需要从 paypal 请求那些（不是 developer.paypal 只是普通的 paypal.com）这应该会有所帮助：[https ://developer.paypal.com/webapps/developer/docs/classic/express-checkout/integration-guide/ECAPICredentials/](https://developer.paypal.com/webapps/developer/docs/classic/express-checkout/integration-guide/ECAPICredentials/)

我转了一圈，直到在我的 xxxfacilitator@xxx 沙盒测试帐户上找到了应用程序凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T02:10:29.547

您的 API 凭据错误。或者您指向具有实时凭据的沙盒端点，反之亦然。
没有其他原因。

# viewport - RSSetViewports 在 Direct3D 11 中是异步调用还是同步调用？

> ID：10100676
> 
> 赞同：1
> 
> 时间：2012-04-11T06:01:04.000
> 
> 标签：viewport, direct3d11

我的应用程序必须处理超过 20 个视口，而只允许 16 个。值得庆幸的是，整个场景可以分成几个部分，这些部分不会从一个顶点“泄漏”到另一个顶点，每个部分的视口少于 10 个。

现在的问题是在渲染过程中更改视口数组是否好（尽管允许）。我的猜测是，只要它被称为 * *RS* *SetViewports 它应该是异步的，并且可以在渲染过程中安全地调用。但我找不到任何证据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T01:09:43.440

是的 RSSetViewports 是一个普通的图形状态命令，它被写入 GPU 命令缓冲区以异步执行，因此每帧设置多次是没有问题的，它不会阻塞 CPU 等待 GPU 执行完成。

没有状态这样做，只有诸如 Map 调用（没有 D3D11_MAP_FLAG_DO_NOT_WAIT）之类的显式操作会阻塞并等待 GPU。

# asp.net-mvc-3 - MVC 3 Telerik Grid 不会将时间戳返回到视图模型

> ID：10100696
> 
> 赞同：1
> 
> 时间：2012-04-11T06:03:06.433
> 
> 标签：asp.net-mvc-3, timestamp, telerik-grid, asp.net-mvc-ajax

更新：我还没有弄清楚任何事情。看起来它确实应该按原样工作。

我有一个绑定到视图模型的 Telerik 网格。网格基本上显示车辆对象的名称和类型。在 Datakeys 中，我添加了 VehicleID 和 Timestamp 字段。当网格发布 ajax 更新时，Timestamp 字段为空。

我已经验证了视图模型中的时间戳字段在传递给视图时有一个值。

以下是相关代码：

**看法：**

```
...
@(Html.Telerik().Grid(Model)
.Name("Grid")
.Columns(columns =>
{
    columns.Bound(o => o.VehicleID).Visible(false);        
    columns.Bound(o => o.VehicleName);
    columns.Bound(o => o.VehicleType);
})
.DataBinding(dataBinding =>
    {
        dataBinding.Server().Select("Index", "Vehicle");
        dataBinding.Ajax().Select("_Index", "Vehicle").Enabled(true);
        dataBinding.Ajax().Update("_SaveVehicle", "Vehicle");
        dataBinding.Ajax().Delete("_DeleteVehicle", "Vehicle");
    })
    .Scrollable(scrolling => scrolling.Enabled(true))
    .Sortable(sorting => sorting.Enabled(true))
    .Pageable(paging => 
        paging.Enabled(true)
        .PageSize(20)
        .Position(GridPagerPosition.Bottom))
    .Filterable(filtering => filtering.Enabled(true))
    .Groupable(grouping => grouping.Enabled(true))
    .Footer(true)
    .ToolBar(toolbar => toolbar.Template(
        @<text>
            @using (Html.BeginForm("ExportCsv", "Vehicle", FormMethod.Post, new {id = "export"}))
            {
                <text>
                    <input type="submit" value="Export to CSV" id="export" />
                </text>
            }

            <label class="error">@ViewBag.AjaxErrorMessage</label>

        </text>
        ))            

    .Columns(columns =>
        {
            columns.Command(command =>
                {
                    command.Custom("details").Text("Details").Action("Edit", "Vehicle").HtmlAttributes(new { style = "text-align: center" }) ;
                    command.Edit().ButtonType(GridButtonType.Image);
                    command.Delete().ButtonType(GridButtonType.Image);
                }).Width(165);
        })
    .DataKeys(dataKeys => 
        {
            dataKeys.Add(key => key.Timestamp).RouteKey("Timestamp");
            dataKeys.Add(key => key.VehicleID).RouteKey("VehicleID"); 

        })
    .ClientEvents(events => events.OnEdit("onEdit"))
    .ColumnContextMenu()
    .Resizable(config =>
        {
            config.Columns(true);
        })
    .Reorderable(config =>
        {
            config.Columns(true);
        })

)

<script type = "text/javascript">
function onEdit(e) {
    $(e.form).find('#VehicleType').data('tDropDownList').select(function (dataItem) {
        return dataItem.Text == e.dataItem['vehicleType'];
    });
}
</script> 
```

**查看型号：**

```
using System;
using System.ComponentModel.DataAnnotations;

namespace ShopLog.ViewModels
{
    public class VehicleIndexViewModel
    {

    //public IEnumerable<Vehicle> Vehicles { get; set; }
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid VehicleID { get; set; }

    [Timestamp]
    public Byte[] Timestamp { get; set; }

    [Required]
    [Display(Name = "Vehicle Name")]
    [MaxLength(30, ErrorMessage = "The {0} must be no more than {2} characters long.")]
    public string VehicleName { get; set; }

    [Display(Name = "Fuel Type")]
    [StringLength(30, ErrorMessage = "\"{0}\" must be no more than {1} characters long.")]
    public string FuelType { get; set; }

    [Display(Name = "Notes")]
    [DataType(DataType.MultilineText)]
    public string Notes { get; set; }

    [UIHint("VehicleType")]
    [Display(Name = "Type")]
    public string VehicleType { get; set; }

    [Display(Name = "Transmission Type")]
    public String TransmissionType { get; set; }
    }
} 
```

**Controller Post Code for Update** 在第一行放置一个断点表明vehicleIndexViewModel 的timestamp 属性为空。我试图从表单集合中获取时间戳，但它在那里也是空的。

```
[AcceptVerbs(HttpVerbs.Post)]
    [GridAction]
    public ActionResult _SaveVehicle(VehicleIndexViewModel vehicleIndexViewModel, FormCollection formcollection)
    {          

        if (TryUpdateModel(vehicle))
        {
            try
            {
                //Delete the record
                db.Entry(vehicle).State = EntityState.Modified;
                db.SaveChanges();
            }
            catch (DbUpdateConcurrencyException)
            {
                ViewBag.AjaxErrorMessage = "That record has been edited by someone else since you started editing it.";
            }
            catch (DataException)
            {
                ViewBag.AjaxErrorMessage = "Error saving data, please try again.";
            }
        }
        //Rebind the grid
        PopulateVehicleTypes();
        return View(new GridModel(GetIndexViewData()));
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:15:25.440

这是我发现的：

byte[] 不能很好地从 ViewModel 传回。为什么？我不知道。

我最终将 ViewModel 中的“时间戳”字段设为字符串而不是字节 []。当我将数据从模型传递到视图模型时，我调用“Convert.ToBase64String( *value* )”。当我将数据从 ViewModel 传递回 Model 时，调用“Convert.FromBase64String( *value* )”。

模型：

```
[Timestamp]
public Byte[] Timestamp { get; set; } 
```

视图模型：

```
[Timestamp]
public string Timestamp {get; set;} 
```

控制器：

```
 [AcceptVerbs(HttpVerbs.Post)]
    [GridAction]
    public ActionResult _SaveVehicle(VehicleIndexViewModel vehicleIndexViewModel)
    {
        Vehicle vehicle = Mapper.Map<VehicleIndexViewModel, Vehicle>(vehicleIndexViewModel);

        if (TryUpdateModel(vehicle))
        {
            try
            {
                //Delete the record
                db.Entry(vehicle).State = EntityState.Modified;
                db.SaveChanges();
            }
            catch (DbUpdateConcurrencyException)
            {
                ViewBag.AjaxErrorMessage = "That record has been edited by someone else since you started editing it.";
            }
            catch (DataException)
            {
                ViewBag.AjaxErrorMessage = "Error saving data, please try again.";
            }
        }
        //Rebind the grid
        PopulateVehicleTypes();
        return View(new GridModel(GetIndexViewData()));
    } 
```

Global.ascx 中的自动映射器映射

```
AutoMapper.Mapper.CreateMap<ShopLog.Models.Vehicle, ShopLog.ViewModels.VehicleIndexViewModel>().ForMember(m => m.Timestamp, opt => opt.ResolveUsing<VehicleTimestampResolver>());
AutoMapper.Mapper.CreateMap<ShopLog.ViewModels.VehicleIndexViewModel, ShopLog.Models.Vehicle>().ForMember(m => m.Timestamp, opt => opt.ResolveUsing<VehicleIndexViewModelTimestampResolver>());

    public class VehicleTimestampResolver : AutoMapper.ValueResolver<Vehicle, string>
    {
        protected override string ResolveCore(Vehicle source)
        {
            return Convert.ToBase64String(source.Timestamp);
        }
    }

    public class VehicleIndexViewModelTimestampResolver : AutoMapper.ValueResolver<ShopLog.ViewModels.VehicleIndexViewModel, byte[]>
    {
        protected override byte[] ResolveCore(ShopLog.ViewModels.VehicleIndexViewModel source)
        {
            return Convert.FromBase64String(source.Timestamp);
        }
    } 
```

查看：（注意数据键）

```
@(Html.Telerik().Grid(Model)
.Name("Grid")
.Columns(columns =>
{
    columns.Bound(o => o.VehicleID).Visible(false);        
    columns.Bound(o => o.VehicleName);
    columns.Bound(o => o.VehicleType);
})    
.DataBinding(dataBinding =>
    {
        dataBinding.Server().Select("Index", "Vehicle");
        dataBinding.Ajax().Select("_Index", "Vehicle").Enabled(true);
        dataBinding.Ajax().Update("_SaveVehicle", "Vehicle");
        dataBinding.Ajax().Delete("_DeleteVehicle", "Vehicle");
    })
    .Scrollable(scrolling => scrolling.Enabled(true))
    .Sortable(sorting => sorting 
        .Enabled(true)
        .OrderBy(sortOrder => sortOrder.Add(o => o.VehicleName).Ascending())
        .SortMode(GridSortMode.MultipleColumn))
    .Pageable(paging => 
        paging.Enabled(true)
        .PageSize(20)
        .Position(GridPagerPosition.Bottom))
    .Filterable(filtering => filtering.Enabled(true))
    .Groupable(grouping => grouping.Enabled(true))
    .Footer(true)
    .ToolBar(commands => commands
        .Custom()
            .HtmlAttributes(new {id = "export"})
            .Text("Export to CSV")
                .Action("ExportCsv", "Vehicle", new { page = 1, orderBy = "~", filter = "~" }))                                                     
    .Columns(columns =>
        {
            columns.Command(command =>
                {
                    command.Custom("details").Text("Details").Action("Edit", "Vehicle").HtmlAttributes(new { style = "text-align: center" }) ;
                    command.Edit().ButtonType(GridButtonType.Image);
                    command.Delete().ButtonType(GridButtonType.Image);
                }).Width(165);
        })
    .DataKeys(dataKeys => 
        {
            dataKeys.Add(key => key.Timestamp).RouteKey("Timestamp");
            dataKeys.Add(key => key.VehicleID).RouteKey("VehicleID"); 

        })
    .ClientEvents(events => events 
        .OnEdit("onEdit")
        .OnDataBound("onDataBound"))
    .ColumnContextMenu()
    .Resizable(config =>
        {
            config.Columns(true);
        })
    .Reorderable(config =>
        {
            config.Columns(true);
        })        
) 
```

剩下的唯一事情就是弄清楚当“ViewBag.AjaxErrorMessage”返回到视图时在哪里显示它，但这不应该太难。:)

# asp.net - 如何解决我的 Webconfig 错误

> ID：10100704
> 
> 赞同：1
> 
> 时间：2012-04-11T06:04:09.403
> 
> 标签：asp.net, web-config

我开发了一个 asp.net 应用程序然后复制这个应用程序并放在另一台机器上并执行这个应用程序

引发以下 Web 配置错误，我已经更改了 Web 配置中的数据源名称、用户 ID、密码

任何人都可以指导我如何解决这个问题。

在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

ASP.NET 来识别传入用户。

```
Line 83: -->
Line 84: <sessionState mode="InProc" cookieless="false" timeout="600"/>
Line 85: <authentication mode="Forms">
Line 86: <forms loginUrl="Login.aspx" protection="All" timeout="600" path="/"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:07:34.913

当您从其他位置复制应用程序并尝试执行或尝试在系统中构建时，这是常见的错误。

此错误的主要原因是每当您复制该应用程序时，它的解决方案已经在某个文件夹中构建。现在，由于位置更改，该文件夹已更改。由于它的根现在和同时不同，它应该在根级别的 web.config 不是按照解决方案构建的。要解决它，您可以尝试以下列出的选项之一：

1.  直接双击打开解决方案。如果它无法加载您的项目并显示消息“解决方案已被删除或位于其他位置”，请转到解决方案资源管理器并右键单击 --> 加载解决方案。它会提示一条消息，说解决方案在路径“....路径名...”中不可用现在您可以将项目放置在具有相同目录的此路径中，然后右键单击解决方案资源管理器尝试项目 --> 加载 应该是加载。

2.  如果您已经复制了项目并将其保存在文件夹中。检查包含 web.config 文件的文件夹。取出该文件夹，然后打开解决方案。在这种情况下，您的应用程序应该能够在根级别获取 web.config 文件并且应该加载它。希望它会给您解决问题的想法。如果您仍然无法打开您的项目，请告诉我们。

# java - Android getSerializable()

> ID：10100705
> 
> 赞同：2
> 
> 时间：2012-04-11T06:04:11.067
> 
> 标签：java, android, serialization

我正在使用捆绑包将项目的 ArrayList 从一个活动传递到另一个活动。我没有收到任何错误，但项目没有显示在我的第二个活动中。我是否正确实现了 getSerializable() 和 putSerializable() ？

这是我的第一个活动的片段

ListArray 已声明

```
ArrayList<Item> items = new ArrayList<Item>(); 
```

将物品放入捆绑包中的位置

```
 Intent ListIntent = new Intent(home.this, SectionListExampleActivity.class);
 Bundle loadInfo = new Bundle();
 loadInfo.putSerializable("items", items);
 ListIntent.putExtras(loadInfo); 
```

第二次活动

```
Bundle loadInfo = getIntent().getExtras();
    items = (ArrayList<Item>) loadInfo.getSerializable("items"); 
```

我在这两个活动中都实现了 Serializable 。我确保 ArrayList 确实在第一个活动中填充

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:37:26.217

只是一个猜测：您是否尝试过序列化 Item (Item[]) 的数组而不是 ArrayList。我不确定 ArrayList 是否可序列化。

```
loadInfo.putSerializable("items", items.toArray());

Bundle loadInfo = getIntent().getExtras();
items = (Item[]) loadInfo.getSerializable("items"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:17:05.547

什么是`Item`..？它是可序列化的......如果不是`Serializable`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T08:08:19.803

物品类别：

```
public class Item implements Serializable 
```

在第一个活动中：

```
Intent intent = new Intent(this, Activity2.class);
        intent.putExtra("items", items);
        startActivity(intent); 
```

在第二个活动（Activity2）中：

```
ArrayList<Item> items = (ArrayList<Item>) getIntent().getExtras()
                .getSerializable("items"); 
```

# sql - 来自 www.db-class.com 的 SQL 查询

> ID：10100709
> 
> 赞同：3
> 
> 时间：2012-04-11T06:04:27.113
> 
> 标签：sql, greatest-n-per-group

我正在解决 www.db-class.com 练习。即使已经很晚了，问题仍然很有趣。我偶然发现了额外的最后一项任务，但无法找出解决方案。

SQL方案如下：

```
create table Movie(mID int, title text, year int, director text);
create table Reviewer(rID int, name text); 
create table Rating(rID int, mID int, stars int, ratingDate date); 
```

整个数据库可以在[这里获取](http://s3.amazonaws.com/dbclass-resources/docs/rating.sql)

问题如下：

> Q12 对于每位导演，返回导演的姓名以及他们执导的在所有电影中获得最高评分的电影的名称，以及该评分的值。忽略导演为 NULL 的电影。

要提供更具体的细节，这里有什么问题：

一问

```
select m.mid, m.title, max(r.stars) as stars 
from rating r natural join movie m 
where m.director is NOT NULL group by m.mid 
```

返回评分最高的电影的 ID：

```
101 Gone with the Wind       4
103 The Sound of Music       3
104 E.T.                     3
107 Avatar                   5
108 Raiders of the Lost Ark  4 
```

另一个查询

```
select m.director, max(r.stars) as stars 
from rating r natural join movie m 
where m.director is NOT NULL group by m.director 
```

返回电影评分最高的导演姓名：

```
James Cameron       5
Robert Wise         3
Steven Spielberg    4
Victor Fleming      4 
```

如何加入查询并获取导演评分最高的电影的名称和明星：

```
James Cameron      Avatar                   5
Robert Wise        The Sound of Music       3
Steven Spielberg   Raiders of the Lost Ark  4
Victor Fleming     Gone with the Wind       4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:26:57.993

在我看来，这只是一个 gretest-n-per-group 问题。甚至还有一个[标签](https://stackoverflow.com/questions/tagged/greatest-n-per-group):)

与典型情况的唯一区别是分组数据（主管）在一个表中，而用于进行比较的数据在另一个表中（星号）。因此，如果您查看标记为此类的问题，您应该会找到类似的示例。

我建议您首先解决它，假设您的所有数据都在一个表中（糟糕，但更容易解决......至少对我来说）。然后切换到拆分后的数据。

**剧透：**

我认为这是解决此问题的方法，因此只有在您已经提出解决方案时才查看它。

```
select distinct m1.director, m1.title, r1.stars from movie m1
join rating r1 on m1.mID = r1.mID
left join (
    select m2.director, r2.stars from movie m2
    join rating r2 on m2.mID = r2.mID
) s on m1.director = s.director and r1.stars < s.stars
where s.stars is null and m1.director is not null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:10:51.840

建议：

1.  创建一个列出所有董事的简单查询（简单）

2.  做一个“加入”，将每部电影——连同它的导演——链接到相应的评级

3.  从第 2 步中选择“加入”，然后进行“分组”导演和“最大（评级）”

# google-app-engine - 如何在 Jinja2 模板中循环子实体时显示父实体

> ID：10100711
> 
> 赞同：0
> 
> 时间：2012-04-11T06:04:40.863
> 
> 标签：google-app-engine, jinja2, app-engine-ndb

如何在 jinja 2 模板中使用此解决方案[https://stackoverflow.com/a/10067749/604240 ？](https://stackoverflow.com/a/10067749/604240)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:42:40.397

我同意我的问题是由于缺乏知识而不是问题。最终我想出了如何实现它。基本上我不知道如何将循环从 python 代码链接到查询，因此它可用于 Jinja2 模板。

虽然正确的解决方案可能是使用带有回调函数的 map() [https://developers.google.com/appengine/docs/python/ndb/queryclass#Query_map](https://developers.google.com/appengine/docs/python/ndb/queryclass#Query_map)，但我正在使用目前对我有用的临时解决方案。

```
query = Image.query()
query2 = query.filter(Image.is_slider == 'yes')
for item in query2:
    item.parent = item.key.parent().get() 
```

并在模板中

```
{% for item in query2 %}
    <img src="{{ item.url }}=s1000" alt="{{ item.title }}" title="{{ item.title }}" />
    <h2>{{ item.title }}</h2>
    <h3>{{ item.gallery }}</h3>
    <a href="/gallery/{{ item.parent.slug }}">Go to gallery</a>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T20:45:26.303

为什么不尝试`{{ item.key.parent().get().slug }}`使用 jinja2 模板（假设 slug 是 Gallery 实体的属性）。

# iphone - 如何确定我们的设备中是否存在 iphone 应用程序（上一个/下一个版本）？

> ID：10100713
> 
> 赞同：1
> 
> 时间：2012-04-11T06:05:09.013
> 
> 标签：iphone, objective-c, ios5, iphone-sdk-3.0, app-store

*   我有一个有 2 个版本的应用程序.... **iPaint1** ( *`FreeVersion`*) & **iPaint2** ( *`Paid Version`*)

iPaint 2 与 iPaint1 的功能一起具有额外的功能。

*   如果用户有 iPaint1 并且如果他安装了 Paint2。

现在我们需要在用户启动/使用paint2时显示警报。警报将弹出为

**`"You already have all features of paint1 in this 2nd version, Delete Paint1 to free space"`**

只有iPain1存在于我们的设备中，否则不需要alert怎么可能。

（我想我们可以使用 AppStore ID 和 Bundle Identifier 来实现这一点，但不确定也不知道过程）

提前致谢

* * *

***但它适用于模拟器但不适用于 iPod***

* * *

回答 ：

最后我在@MDT 的回答中得到了解决方案。感谢@MDT 和其他人。

感谢您的快速回复。此链接对这个问题很有用。

[是否可以获得有关 iPhone 上安装的所有应用程序的信息？](https://stackoverflow.com/questions/3878197/is-it-possible-to-get-information-about-all-apps-installed-on-iphone/3878220#3878220)

并且在

[http://www.iphonedevsdk.com/forum/iphone-sdk-development/22289-possible-retrieve-these-information.html#post101753](http://www.iphonedevsdk.com/forum/iphone-sdk-development/22289-possible-retrieve-these-information.html#post101753)

***但它适用于模拟器，但不适用于 iPod，***请提供任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T06:14:55.377

> 如果没有越狱，应用程序就无法直接获取 iOS 设备上所有已安装应用程序的列表。

[http://www.quora.com/An-iOS-App-how-to-find-all-other-application-on-the-iPhone](http://www.quora.com/An-iOS-App-how-to-find-all-other-application-on-the-iPhone)

您最好的选择可能是使用自定义 URL 方案。有了这些，您可以在免费应用程序中实现一个链接，如果安装了付费应用程序，该链接将打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:30:13.273

您应该使用自定义 URL 方案。为免费应用程序提供一些自定义 URL。现在在付费应用启动时，检查它是否可以响应您的免费应用的自定义 URL。如果可以，则设备上存在免费版本并显示消息以将其删除。

# opencv - OpenCV 从一个三角形扭曲到另一个三角形

> ID：10100715
> 
> 赞同：2
> 
> 时间：2012-04-11T06:05:13.693
> 
> 标签：opencv, image-processing, affinetransform

我想将 OpenCV Mat 中的一个三角形映射到另一个三角形，就像 warpAffine 所做的一样（[在此处查看](http://opencv.itseez.com/doc/tutorials/imgproc/imgtrans/warp_affine/warp_affine.html)），但对于三角形而不是四边形，以便在 Delaunay 三角剖分中使用它。

我知道可以使用口罩，但我想知道是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-05-19T13:51:25.337

[![在此处输入图像描述](../Images/cedd4ad8e2768621480dbb8e26985ec3.png)](https://i.stack.imgur.com/meV08.jpg)[我已经使用 OpenCV (C++ / Python)](http://www.learnopencv.com/warp-one-triangle-to-another-using-opencv-c-python/) 从我的帖子 Warp one triangle to another 中复制了上面的图像和以下 C++ 代码。下面代码中的注释应该可以很好地了解发生了什么。有关更多详细信息和 python 代码，您可以访问上面的链接。img1中三角形tri1内的所有像素都转换为img2中的三角形tri2。希望这可以帮助。

```
void warpTriangle(Mat &img1, Mat &img2, vector<Point2f> tri1, vector<Point2f> tri2)
{
    // Find bounding rectangle for each triangle
    Rect r1 = boundingRect(tri1);
    Rect r2 = boundingRect(tri2);

   // Offset points by left top corner of the respective rectangles
   vector<Point2f> tri1Cropped, tri2Cropped;
   vector<Point> tri2CroppedInt;
   for(int i = 0; i < 3; i++)
   {
      tri1Cropped.push_back( Point2f( tri1[i].x - r1.x, tri1[i].y -  r1.y) );
      tri2Cropped.push_back( Point2f( tri2[i].x - r2.x, tri2[i].y - r2.y) );

      // fillConvexPoly needs a vector of Point and not Point2f
      tri2CroppedInt.push_back( Point((int)(tri2[i].x - r2.x), (int)(tri2[i].y - r2.y)) );

   }

   // Apply warpImage to small rectangular patches
   Mat img1Cropped;
   img1(r1).copyTo(img1Cropped);

   // Given a pair of triangles, find the affine transform.
   Mat warpMat = getAffineTransform( tri1Cropped, tri2Cropped );

   // Apply the Affine Transform just found to the src image
   Mat img2Cropped = Mat::zeros(r2.height, r2.width, img1Cropped.type());
   warpAffine( img1Cropped, img2Cropped, warpMat, img2Cropped.size(), INTER_LINEAR, BORDER_REFLECT_101);

   // Get mask by filling triangle
   Mat mask = Mat::zeros(r2.height, r2.width, CV_32FC3);
   fillConvexPoly(mask, tri2CroppedInt, Scalar(1.0, 1.0, 1.0), 16, 0);

  // Copy triangular region of the rectangular patch to the output image
  multiply(img2Cropped,mask, img2Cropped);
  multiply(img2(r2), Scalar(1.0,1.0,1.0) - mask, img2(r2));
  img2(r2) = img2(r2) + img2Cropped;

} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-11T06:23:21.110

您应该使用[getAffineTransform](http://opencv.itseez.com/modules/imgproc/doc/geometric_transformations.html?highlight=getaffine#getaffinetransform)找到变换，并使用 warpAffine 应用它

# eclipse - Eclipse PHP IDE

> ID：10100717
> 
> 赞同：0
> 
> 时间：2012-04-11T06:05:33.960
> 
> 标签：eclipse, ide, eclipse-plugin

> **[与Eclipse PHP IDE](https://stackoverflow.com/questions/2130023/eclipse-php-ide-custom-auto-complete-tags)**类似的标题但不同的问题- 自定义自动完成标签**
>      **

 **> **[Eclipse IDE 中 PHP 入门](https://stackoverflow.com/questions/6020519/getting-started-with-php-in-eclipse-ide)**的可能副本**
>      **

 **有人知道 Eclipse 中用于 PHP 开发的工具/IDE/插件吗？

我已经尝试过[ZEND PDT](http://www.zend.com/en/community/pdt)，但它似乎有一个错误并且它没有安装在我的 Eclipse 中。我什至按照[这个解决方法安装它，](http://recursivecall.com/2011/coding/projects/installing-eclipse-for-php-troubleshooting-zend-and-pdt)但它仍然不起作用。

我的 Eclipse 版本是 4.1.2，操作系统是 Windows XP SP3。

前面的问题似乎没有一个可靠的答案。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T07:34:16.170

在 PHP 中开发的另一个非常好的 IDE 是 NetBeans：

[http://netbeans.org/](http://netbeans.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T06:10:31.073

我知道您特别要求 Eclipse 插件，但让我冒昧地推荐一个非 Eclipse PHP IDE，因为它非常好，值得在这里提及：来自 JetBrains的[PhpStorm 。](http://www.jetbrains.com/phpstorm/)

如果您非常热衷于 Eclipse，[Aptana Studio](http://aptana.com/)是一个基于 Eclipse 代码库的优秀 IDE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T21:52:16.703

请原谅一个可能很愚蠢的问题，但您为什么要使用 Eclipse 4.1.2？我怀疑问题出在该版本中的 3.x 兼容层中的错误。

除非你真的需要使用 4.1.2（而且因为它是一个测试版，我不确定那会是什么......），否则可能会再试一次 3.7.2，这是当前列出的版本Eclipse 下载页面[1]。

希望有帮助！

[1] [http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)****

# android - 如何通过触摸监听器将图像从一个地方移动到另一个地方？

> ID：10100722
> 
> 赞同：-2
> 
> 时间：2012-04-11T06:06:49.130
> 
> 标签：android, android-widget

LinearLayout 上有一张图片。我必须通过触摸向任何方向移动该图像。请帮我怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:20:37.060

使用示例为[http://www.edumobile.org/android/android-beginner-tutorials/drag-and-drop-ui-element/](http://www.edumobile.org/android/android-beginner-tutorials/drag-and-drop-ui-element/) 或[http://techdroid.kbeanie.com/2010/04/simple-drag- n-drop-on-android.html](http://techdroid.kbeanie.com/2010/04/simple-drag-n-drop-on-android.html)

如果您使用的 3.0 版本高于它，请使用[http://www.vogella.de/articles/AndroidDragAndDrop/article.html中给出的示例](http://www.vogella.de/articles/AndroidDragAndDrop/article.html)

# sql - 在 Sql 查询中使用单元格中的日期或命名范围

> ID：10100724
> 
> 赞同：1
> 
> 时间：2012-04-11T06:06:54.510
> 
> 标签：sql, sql-server, excel, vba

我创建了一张表来从 Microsoft SQL 数据库中提取数据，以在 2 日期`StartDate`和`EndDate`.

我一直在玩一些东西，但无论如何都没有成功。我已经搜索过，但找不到任何我想要或能够理解的东西。

我认为的问题是我在 Excel 中使用的日期的数据类型，并试图将其传递给 SQL 查询。我知道我需要以某种方式对其进行转换以使其成为可能且正确。

如果我在查询中手动输入日期，它工作正常。但对客户使用不实用我没有这方面的经验，只是！用我的方式通过它。如果有人对我这么好，将不胜感激。

下面是我尝试使用的代码

```
Sub DataExtract()
'
DataExtract Macro
'

' Create a connection object.
 Dim cni96X As ADODB.Connection
 Set cni96X = New ADODB.Connection

' Set Database  Range

' Provide the connection string.
Dim strConn As String
Dim Lan As Integer
Dim OS As Integer
Dim PointID As String

' Set Variables
Lan = Range("Lan").Value
OS = Range("OS").Value
PointID = Range("PointID").Value
StartDate = Range("StartDate").Value
EndDate = Range("EndDate").Value

'Use the SQL Server OLE DB Provider.
 strConn = "PROVIDER=SQLOLEDB;"

'Connect to 963 database on the local server.
strConn = strConn & "DATA SOURCE=(local);INITIAL CATALOG=i96X;"

'Use an integrated login.
strConn = strConn & " INTEGRATED SECURITY=sspi;"

 'Now open the connection.
cni96X.Open strConn

' Create a recordset object.
Dim rsi96X As ADODB.Recordset
Dim rsi96X1 As ADODB.Recordset
Set rsi96X = New ADODB.Recordset
Set rsi96X1 = New ADODB.Recordset

With rsi96X
    ' Assign the Connection object.
     .ActiveConnection = cni96X
    ' Extract the required records1.
    .Open "SELECT ModuleLabel, originalAlarmTime FROM LastAlarmDetailsByTime WHERE (os = " & OS & " And theModule = N'" & PointID & "'AND AlarmCode = N'DI=1' And lan = " & Lan & " And originalAlarmTime BETWEEN N'" & StartDate & "' AND N'" & EndDate & "') ORDER BY originalAlarmTime DESC"
    ' Copy the records into sheet.
    Range("PointLabel, TimeCallInitiated").CopyFromRecordset rsi96X

With rsi96X1
    .ActiveConnection = cni96X
    ' Assign the Connection object.
    .Open "SELECT originalAlarmTime FROM LastAlarmDetailsByTime WHERE (os = " & OS & " And theModule = N'" & PointID & "'AND AlarmCode = N'CDI1' And lan = " & Lan & " And originalAlarmTime BETWEEN N'" & StartDate & "' AND N'" & EndDate & "')ORDER BY originalAlarmTime DESC"
     ' Copy the records into sheet.
    Sheet1.Range("TimeCallEnded").CopyFromRecordset rsi96X1
    ' Tidy up
    .Close 
```

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:34:52.147

您不能指定数据类型，Access 数据库引擎（以前称为 Jet）必须猜测。您可以通过更改某些注册表设置（例如`MaxScanRows`）并包括`IMEX=1`在连接字符串中来影响其猜测。有关更多详细信息，请参阅[此知识库文章](http://support.microsoft.com/kb/257819)。

* * *

这是我多年前就这个主题写的一些东西（如果你用谷歌搜索“ONEDAYWHEN=0”，你会发现它已被广泛阅读，尽管可能不够仔细！）：

相关的注册表项（用于 Jet 4.0）位于：

Hkey_Local_Machine/Software/Microsoft/Jet/4.0/Engines/Excel/

注册表项总是被`ImportMixedTypes`读取（是否兑现将在后面讨论）。您可以通过将密钥更改为 `ImportMixedTypes=OneDayWhen`并尝试使用 ISAM 来对此进行测试：您会收到错误消息“Windows 注册表引擎部分的 Excel 密钥中的设置无效”。唯一有效的值为：

*   `ImportMixedTypes=Text`
*   `ImportMixedTypes=Majority Type`

数据类型是逐列确定的。“多数类型”是指扫描每列中一定数量的行（稍后会详细介绍）并计算数据类型。单元格的值和格式都用于确定数据类型。多数数据类型（即行数最多的数据类型）决定了整个列的整体数据类型。如果出现平局，则存在偏向于 os numeric 的偏见。发现的任何少数数据类型中无法转换为多数数据类型的行将返回空值。

对于`ImportMixedTypes=Text`，整列的数据类型将是：

```
Jet (MS Access UI): 'Text' data type 
DDL: VARCHAR(255) 
ADO: adWChar ('a null-terminated Unicode character string') 
```

请注意，这不同于：

```
Jet (MS Access UI): 'Memo' data type 
DDL: MEMO 
ADO: adLongVarWChar ('a long null-terminated Unicode string value') 
```

`ImportMixedTypes=Text`将在 255 个字符处减少文本，因为`Memo`它被转换为`Text`. 对于要识别为 的列`Memo`，必须检测多数类型，这意味着检测到的大多数行必须包含 256 个或更多字符。

但是在确定混合和/或多数类型是什么之前，每列扫描了多少行？还有第二个注册表项`TypeGuessRows`. 这可以是 0-16（十进制）之间的值。从 1 到 16 的值是要扫描的行数。零值表示将扫描所有行。

最后有一个转折。`IMEX=1`连接字符串的扩展属性中的设置确定是否接受该`ImportMixedTypes` 值。`IMEX`指“导入导出模式”。有三个可能的值。`IMEX=0`并`IMEX=2`导致`ImportMixedTypes`被忽略并使用“多数类型”的默认值。`IMEX=1`只有这样才能确保`ImportMixedTypes=Text`得到尊重。生成的连接字符串可能如下所示：

```
Provider=Microsoft.Jet.OLEDB.4.0; 
Data Source=C:\ db.xls; 
Extended Properties='Excel 8.0;HDR=Yes;IMEX=1' 
```

最后，虽然在 MSDN 文章中提到`MAXSCANROWS` 可以在连接字符串的扩展属性中使用来覆盖 TypeGuessRows 注册表项，但这似乎是一个谬论。以这种方式使用`MAXSCANROWS=0`在任何情况下都不会做任何事情。换句话说，与放入 `ONEDAYWHEN=0`扩展属性的效果相同，没有（甚至不是错误！）同样适用于`ImportMixedTypes`ie 不能在连接字符串中使用来覆盖注册表设置。

总之，用于`TypeGuessRows`让 Jet 检测是否存在“混合类型”情况，或使用它来“欺骗”Jet 将某个数据类型检测为多数类型。在检测到“混合类型”的情况下，用于`ImportMixedTypes`告诉 Jet 使用多数类型或将所有值强制为`Text` （最多 255 个字符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:13:32.670

尝试将 SQL 语句的日期部分更改为：

```
"[...] originalAlarmTime BETWEEN '" & Format$(StartDate, "yyyy-mm-dd") & "' AND '" & Format$(EndDate, "yyyy-mm-dd") & "' [...]" 
```

您也可以尝试使用[参数化查询](https://stackoverflow.com/a/2317225/587880)。

# mysql - 将数据从一个数据库导出到一组标准数据库供应商的策略

> ID：10100727
> 
> 赞同：0
> 
> 时间：2012-04-11T06:07:08.533
> 
> 标签：mysql, integration, database

我有一个使用 MySQl 作为 DBMS 的应用程序。但许多客户希望在不同 DBMS 上的现有数据库上更新数据。因此，我们必须按计划将数据从我们的 DBMS 导出到他们的。但是，每个客户都有自己的 DBMS。

设计一个框架以使我们的 DBMS 中可用的数据可以导出到客户的 DBMS 的最佳策略是什么？每个客户端都有不同的 DBMS。

PS：抱歉没有详细说明。例如，客户只需要我们 DBMS 中的几列，并更新到他的 DBMS 中，这对于每个客户来说都是不同的。因此，它们可能不一定具有相同的体系结构，但我们可以设计一个框架，大多数 DBMS 都可以使用，而其他 DBMS 可能会以最少的更改工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:38:32.517

如果您可以在客户端的服务器上编写一些代码，然后在他们的服务器上编写一个脚本，该脚本将从您的数据库中读取并插入到客户端的数据库中。确保您可以从您的服务器调用此脚本。

# php - Facebook 的用户区域设置是否与他们的语言设置相同？

> ID：10100741
> 
> 赞同：0
> 
> 时间：2012-04-11T06:09:09.593
> 
> 标签：php, facebook

对于我为 Facebook 开发的应用程序，当用户首次登录时，我希望我的界面使用他们为 Facebook 界面选择的语言。

*（更准确地说，由于 Facebook 的语言选项比我多，我会看看他们的语言是否在我的语言列表中，如果是，则使用该语言。如果不是，则默认为英语。）*

我知道我可以`locale`从[他们保留的用户数据列列表中](http://developers.facebook.com/docs/reference/fql/user/)获取用户的。

但是，我不清楚语言环境是否等于他们的语言。如果一个美国人住在北京，并且将他们的界面设置为使用英语，那么他们的语言环境不就是中国吗？如果我照此去做，我的界面可能是中文的，这取决于美国人，可能与他们的 Facebook 界面不同。

我注意到在同一个列表中，如果用户使用多语言，则可以设置一系列语言，但我不确定这是否是一个很好的指标。人们倾向于列出他们只能部分说的语言，因此尝试浏览该列表可能没有帮助。

最重要的是，我应该怎么做才能从我的画布目录中的 PHP 脚本中获取 Facebook 用户的界面语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:41:52.680

在这种情况下，**区域**设置是用户当前选择的用户界面语言。[在Graph API Explorer](http://developers.facebook.com/tools/explorer/)
中亲自查看。（在页面底部更改您自己的语言）

请记住，即使在用户授权您的应用程序之前，您也可以从*签名请求中访问语言环境信息。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:47:17.453

除了语言环境之外别无他法，你甚至不需要`access_token`获取`locale`.

# javascript - 用节点和边建模一个简单的图。

> ID：10100742
> 
> 赞同：2
> 
> 时间：2012-04-11T06:09:15.070
> 
> 标签：javascript, d3.js

我试图使用 d3.js 可视化图表。我尝试了两种布局，bundle-radial 和 force。

Bundle-radial 不起作用，因为每个节点都需要一个父节点，它不适合图形可视化。

对于强制布局，脚本挂起。可能是因为这个图中有很多节点和边。我也不需要力布局附带的模拟。

我可以尝试使用 d3.js 中的任何其他布局吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T15:59:33.003

如果不需要仿真，可以静态使用力布局。调用[force.start](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-start)后，调用[force.tick](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-tick)几次，然后调用[force.stop](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-start)以停止模拟：

```
// Run the layout a fixed number of times.
// The ideal number of times scales with graph complexity.
// Of course, don't run too long—you'll hang the page!
force.start();
for (var i = n; i > 0; --i) force.tick();
force.stop(); 
```

在某些情况下，它可能有助于确定性地初始化节点位置，以鼓励模拟快速收敛到一个好的解决方案。如果您不初始化位置，则力布局将随机初始化它们，因此可能有点不可预测。例如，这里我沿对角线初始化节点：

```
// Initialize the positions deterministically, for better results.
var n = nodes.length;
nodes.forEach(function(d, i) { d.x = d.y = width / n * i; }); 
```

最后，如果您使用的是静态布局，请考虑使用[鱼眼失真](http://bost.ocks.org/mike/fisheye/)以仍然允许交互式探索。

# c - 从 C 中的命令行输入获取文件大小

> ID：10100744
> 
> 赞同：0
> 
> 时间：2012-04-11T06:09:18.267
> 
> 标签：c, file, command-line, size

我正在尝试使用 argv 从 C 中的命令行获取文件的大小。我对 C 中的文件 i/o 不太熟悉，所以任何指针都将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T06:19:32.930

您没有说明平台，但是您的 C 程序在启动时会给出一个参数列表，并且文件名是字符串。您可能使用的 POSIX 函数是[`stat()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/stat.html); 它需要一个指向 a 的指针，`struct stat`并将文件的大小放入`st_size`结构的成员中。

答案可能在 Windows 上有所不同；POSIX 子系统将提供一个`stat()`类似工作的（可能命名为`_stat()`），但也会有一个本地接口。

# gtk - Gtk小部件指针比较

> ID：10100747
> 
> 赞同：1
> 
> 时间：2012-04-11T06:09:36.660
> 
> 标签：gtk, widget

我想比较两个 Gtk 小部件指针值是否相等。我该怎么做？无法处理正常的相等（==）或将其类型转换为 int ...

```
GtkWidget *a;
GtkWidget *b;

if((int)a == (int)b)
{
    /* ... */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:37:58.223

指针是指针。如果`a`指向一个小部件，并且`b`指向同一个小部件，那么您可以使用`if (a == b)`.

# android - 按钮上的文本在某些设备上被修剪

> ID：10100752
> 
> 赞同：0
> 
> 时间：2012-04-11T06:09:52.557
> 
> 标签：android

按钮有一个文本 "Cancel" ，在某些 Android 设备上，如 HTC Evo (OS 2.2) ，而不是 "Cancel" ，只显示 "Ca"。

以下是放置在布局 xml 上的按钮

```
<Button
            android:id="@+id/btn_upload"
            android:layout_width="150dp"
            android:layout_height="50dp"
            android:layout_alignParentTop="true"
            android:background="@drawable/btngray"
            android:shadowColor="@color/black"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:text="Cancel"
            android:textColor="@color/white"
            android:textSize="16sp"
            android:textStyle="bold" >
</Button> 
```

正在使用的可绘制对象是九个补丁图像，以便按钮图像根据文本调整大小。布局：宽度和布局：高度是否会造成问题？

目前，无法在模拟器或我测试的设备（HTC WildFire S、LG Optimus、Samsung Galaxy 等）上复制该问题。

欢迎任何帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:16:14.783

修改并向按钮的 xml 添加一些属性：

```
android:layout_width="wrap_content"
android:singleLine="true"
android:ellipsize="none" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:25:29.480

这是因为您在密度像素中给出了宽度您需要将大小指定为 wrap_content 以便按钮将采用所需的确切大小更改按钮代码如下

```
<Button
            android:id="@+id/btn_upload"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:layout_alignParentTop="true"
            android:background="@drawable/btngray"
            android:shadowColor="@color/black"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="1"
            android:text="Cancel"
            android:textColor="@color/white"
            android:textSize="16sp"
            android:textStyle="bold" >
</Button> 
```

# c# - 我可以覆盖 Convert.ToDateTime() 吗？

> ID：10100754
> 
> 赞同：3
> 
> 时间：2012-04-11T06:10:01.017
> 
> 标签：c#, datetime

我可以覆盖`Convert.ToDateTime()`吗？我不希望 100 次或更多检查字符串是否为 nul，如果不是则将其转换为 DateTime。我可以重写此函数以检查是否为 null 然后将返回 null 否则将其转换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T06:13:10.843

不，您不能覆盖静态方法。但是您可以编写*自己的*静态方法：

```
// TODO: Think of a better class name - this one sucks :)
public static class MoreConvert
{
    public static DateTime? ToDateTimeOrNull(string text)
    {
        return text == null ? (DateTime?) null : Convert.ToDateTime(text);
    }
} 
```

请注意，返回类型必须是，`DateTime?`因为`DateTime`它本身是不可为空的值类型。

您可能还想考虑使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)而不是`Convert.ToDateTime`- 我从来没有非常喜欢它的宽大，当前文化特定的行为。不过，这取决于数据的来源。你知道格式吗？是在用户的文化中，还是在不变的文化中？（基本上，是用户输入的文本，还是某种机器生成的格式？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T06:14:46.833

`ToDateTime`不能被覆盖，但你可以使用`TryParse`：

```
bool valid = DateTime.TryParse("date string", out d); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T06:12:48.827

`DateTime.Parse`如果您确定您的字符串格式正确，则可以改用。

# java - 使用 jdbc 从远程机器执行 csv 复制命令

> ID：10100757
> 
> 赞同：0
> 
> 时间：2012-04-11T06:10:25.240
> 
> 标签：java, postgresql, jdbc

如何创建标准输入对象以作为参数传递以将用于 csv 上传的命令复制到 db 表中并使用 jdbc api 执行

我试过的例子

```
DataInputStream in = new DataInputStream(new BufferedInputStream(
                new FileInputStream("C:/Documents and Settings/517037/Desktop/new.csv")));

copy temp123 from "+in.read()+" using delimiters '|' 
```

但在这里我得到了错误。

org.postgresql.util.PSQLException：错误：“48”或附近的语法错误位置：19

谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:55:25.490

您是否尝试过`copy`使用完整文件名调用命令，例如：

```
copy temp123 from 'C:/Documents and Settings/517037/Desktop/new.csv' using delimiters '|' 
```

如果它不起作用，那么您可以尝试代码：

```
copy temp123 from stdin using delimiters '|' 
```

然后通过 stdin 的重定向调用您的 Java 程序：

```
c:\tmp>java my_import < "C:\Documents and Settings\517037\Desktop\new.csv" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:34:07.277

请通过以下链接了解如何存储 BLOB 或 CLOB（二进制大对象）。它包含用于存储这些类型的完整示例列表。除此之外，请确保检查特定的数据库文档。

[将 CLOB 或 BLOB 存储到 DB](http://www.java2s.com/Tutorial/Java/0340__Database/StoreCLOBsdataintodatabase.htm)

# c++ - 在 Windows 上使用 boost 1_48 和 Apache qpid

> ID：10100760
> 
> 赞同：0
> 
> 时间：2012-04-11T06:10:35.177
> 
> 标签：c++, boost, message-queue, qpid

我在尝试使用**Visual Studio 2010用****boost 1_47_0编译****qpid** c++ 时卡住了。这是我制作的步骤顺序：

 ****1.  内置*升压 1.48.0*
2.  在 %PATH% 环境中添加了 BOOST_ROOT、BOOST_INCLUDEDIR、BOOST_LIBRARYDIR 等。多变的
3.  安装了*cmake*、*Python*、*Ruby*并将它们的路径添加到 %PATH% env。多变的
4.  解压 qpid *-cpp-0.14.tar.gz*
5.  *由于boost*文件层次结构的最后更改，应用了来自[https://bugzilla.redhat.com/attachment.cgi?id=542165&action=diff](https://bugzilla.redhat.com/attachment.cgi?id=542165&action=diff)的补丁
**   重命名了一些 qpid 所需的 boost 库，从**libbost_LIBRARY-vc100-mt-1_48.lib**到**boost_LIBRARY.lib**格式*   在'qpidc-0.14'目录下启动*“cmake -i -G 'Visual Studio 2010'” ，成功接收到*.vcxproj文件**

 *现在，问题出现了。

我加载了在步骤 7 中创建的 'ALL_BUILD.vcxproj' 文件，并尝试构建一个项目 - **qpidcommon**。但由于“缺少库”错误，我不能。我再次将*boost*库从**libbost_LIBRARY-vc100-mt-1_48.lib 重命名**为**boost_LIBRARY-vc100-mt-1_48.lib**文件格式并尝试编译。

而且，至少，我收到了下一个：

```
...
...
...
(__imp_??0variables_map@program_options@boost@@QAE@XZ) referenced in function 
"public: void __thiscall qpid::Options::parse(int,char const * const *,class 
std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,bool)" 
(?parse@Options@qpid@@QAEXHPBQBDABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@_N@Z)

3>D:\wc-gather\tplibs\qpidc-0.14\src\Release\qpidcommon.dll : fatal error LNK1120: 
33 unresolved externals
========== Build: 2 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我不知道如何处理这个问题，而不是直接向项目添加库。你？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:26:03.960

boost_LIBRARY-vc100-mt-1_48.lib 应该是一个导入库（对于 boost_LIBRARY-vc100-mt-1_48.dll），而不是静态的。将其重命名为其原始名称（带有 lib 前缀）。接下来，建立一个*完整*的提升，有任何可能的变化

```
bjam -j8 toolset=msvc --build-type=complete 
```

如果您有 8 核（如 intel i7），请使用 -j8 以实现大幅加速（完整构建需要 8 分钟），然后安装 boost (bjam toolset=msvc --build-type=complete install)

然后尝试再次重建您的应用程序。*****

# iphone - CDBStore 作为 iOS 中 CoreData 的持久存储

> ID：10100762
> 
> 赞同：2
> 
> 时间：2012-04-11T06:10:42.807
> 
> 标签：iphone, objective-c, ios, xcode, core-data

在 [Apple 的示例代码](https://developer.apple.com/library/ios/#samplecode/CoreDataBooks/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008405-Intro-DontLinkElementID_2/)中，我发现了这种类型的持久性存储。

谁能告诉我什么是 CDBStore 以及使用 CDBStore 作为持久存储相对于 sqlite、plist 等其他存储类型的优势是什么？

在哪些情况下它不使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T07:04:26.427

CDBStore 是任意文件扩展名。实际上，它是一个 SQLite 数据库，当使用参数读取它时，可以进一步证明几行`NSSQLiteStoreType`。相对于 sqlite 的优势是没有的，相对于 plist 的优势是 sqlite 相对于 plist 的优势。

# c++ - 在 MFC 中捕获鼠标指针形状更改事件

> ID：10100769
> 
> 赞同：1
> 
> 时间：2012-04-11T06:11:18.157
> 
> 标签：c++, visual-c++, mfc

我正在编写一个需要鼠标指针形状更改通知的 Windows 应用程序。我已经彻底搜索，但找不到令人满意的解决方案。我想收到关于光标形状更改以及光标类型更改的通知。

从搜索中我知道我必须在每个进程中安装一个钩子并捕获 WM_SETCURSOR 事件，但捕获此消息并没有给我完整的信息。所以请指导我是否有人可以提供帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:28:39.243

`GetCursor`您可以使用或获取当前光标的句柄`GetCursorInfo`。

问题是要知道句柄指的是哪个游标。我认为没有“反向查找”功能，因此您必须通过将句柄与`LoadCursor`不同可能值返回的句柄进行比较来实现它。

幸运的是，文档是这样说的：

> LoadCursor 函数仅在游标资源未加载时才加载它；否则，它将检索现有资源的句柄。

# ajax - 在 $.ajaxt 的完整功能中重建 Div 标记的内容

> ID：10100773
> 
> 赞同：1
> 
> 时间：2012-04-11T06:11:40.280
> 
> 标签：ajax, django, jquery

我在模板中有一个 4 列的产品表，表中的每个项目都有一个锚点，`onclick`如下所示：

```
<div id="tablepro">
    <table>
        <tr>
        {% for product in cat.products.all %}
            {% if forloop.counter|divisibleby:4 %}
                </tr>
                <tr>
                    <td><center><a href="#" onclick="remove({{product.pk}});">delete</a></br><img style="width:200px;height:200px;" class="magnify" src="{{product.image.url}}" /></center></td>
            {% else %}
                    <td><center><a href="#" onclick="remove({{product.pk}});">delete</a></br><img style="width:200px;height:200px;" class="magnify" src="{{product.image.url}}" /></center></td>
            {% endif %}
        {% endfor %}
    </table>
</div> 
```

在`remove function`我有：

```
function remove(id)
{
    var URL='{% url CompanyHub.views.catDetails company.webSite,cat.id %}';
    URL+='delpro/'+id+'/';
    $.ajax({
        url:URL,
        type:'POST',
        complete:function(){
            var str='<table><tr>';
            {% for product in cat.products.all %}
                {% if forloop.counter|divisibleby:4 %}
                    str+='</tr><tr>';
                    str+='<td><center><a href="#" onclick="remove({{product.pk}});">delete</a></br><img style="width:200px;height:200px;" class="magnify" src="{{product.image.url}}" /></center></td>';
                {% else %}
                    str+='<td><center><a href="#" onclick="remove({{product.pk}});">delete</a></br><img style="width:200px;height:200px;" class="magnify" src="{{product.image.url}}" /></center></td>';
                {% endif %}
            {% endfor %}
            str+='</table>';
            $('#tablepro').html(str);
        },
        error:function(){
            alert('Error');
        }
    });
} 
```

在`views.py`：

```
def deleteProduct(request,key,cat_id,pro_id):
    try:
        company=Company.objects.get(webSite__iexact=key)
    except Company.DoesNotExist:
        Http404
    cat=Category.objects.get(pk=cat_id)
    if pro_id:
        try:
            product=Product.objects.get(pk=pro_id)
            product.delete()
        except Product.DoesNotExist:
            Http404
    return render_to_response('CompanyHub/Company/%s/cat_details.html'%(company.theme),{'company':company,'cat':cat}, context_instance=RequestContext(request)) 
```

正如你所见，我已经返回`cat object`，现在 a`product object`已从其列表中删除，但我无法在模板中更新我的 Div！听起来`cat object`模板标签中没有更新。

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:20:58.903

请记住，模板是在服务器端编译的，然后将生成的 HTML 传递给客户端。这意味着您在`complete`函数中（在 ajax 调用中）拥有的模板代码将始终相同 - 换句话说，每次您删除一个元素（并被`remove`调用）时，您都会再次重新显示所有原始类别，因为在循环中生成的 HTML 在`for`服务器端创建一次 - 不是异步的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:30:14.717

模板在服务器端编译，浏览器呈现 HTML。

要在 ajax 调用后更新您的 div，您需要在`complete`方法中使用 javascript 代码更新它。您的服务器端视图可以返回 JSON、XML、HTML 或任何其他数据类型，您的`complete`方法必须呈现该数据。这是一个示例，`complete`如果您的服务器端返回部分 h​​tml（即仅表），您的方法应该如何：

```
complete:function(data) {
        $('#tablepro').html(data);
}, 
```

# php - MySQL查询以显示当前日期在顶部的记录，其他按降序显示

> ID：10100775
> 
> 赞同：4
> 
> 时间：2012-04-11T06:11:45.633
> 
> 标签：php, mysql, date, sql-order-by

我在我的数据库中使用以下查询，

```
SELECT b.sales_id,b.category_id,b.sale_starts,b.sale_ends 
FROM tbl_sales b WHERE b.active=1 
UNION
SELECT b.sales_id,b.category_id,b.sale_starts,b.sale_ends 
FROM tbl_sales b INNER JOIN tb_category c ON  b.category_id=c.cat_id 
WHERE c.cat_keyword LIKE 'a' ORDER BY sale_ends  DESC 
```

并得到如下结果，

```
sales_id  | category_id         |sale_starts | sale_ends 
----------|---------------------|------------|--------------
 1        |   10                | 2012-03-31 | 2012-04-30     
 2        |   11                | 2012-03-22 | 2012-04-27
 3        |   25                | 2012-03-31 | 2012-04-25
 4        |   12                | 2012-04-05 | 2012-04-11 
```

现在我需要得到如下结果，即具有`today's date/current date as`sale_ends 的行必须显示在订单的顶部（假设今天的日期/当前日期是`2012-04-11`），如下所示 -

```
sales_id      | category_id         |sale_starts | sale_ends 
    ----------|---------------------|------------|--------------
     4        |   12                | 2012-04-05 | 2012-04-11 (today's date)
     1        |   10                | 2012-03-31 | 2012-04-30     
     2        |   11                | 2012-03-22 | 2012-04-27
     3        |   25                | 2012-03-31 | 2012-04-25 
```

在这方面需要帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T06:17:10.170

试试这个带有条件的 ORDER BY 子句 -

```
ORDER BY IF(sale_ends = DATE(NOW()), 0, 1), sale_ends DESC 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T06:16:38.883

您可以将整个内容包装在另一个 SELECT 中并使用 ORDER BY

```
SELECT * FROM (     
     SELECT b.sales_id,b.category_id,b.sale_starts,b.sale_ends 
     FROM tbl_sales b WHERE b.active=1 
     UNION
     SELECT b.sales_id,b.category_id,b.sale_starts,b.sale_ends 
     FROM tbl_sales b INNER JOIN tb_category c ON  b.category_id=c.cat_id 
     WHERE c.cat_keyword LIKE 'a' ORDER BY sale_ends  DESC
) AS all_sales
ORDER BY (sale_ends=CURDATE()) DESC, sale_ends DESC 
```

# c++ - 是否“int a = int();” 一定要给我一个零？

> ID：10100776
> 
> 赞同：7
> 
> 时间：2012-04-11T06:11:55.803
> 
> 标签：c++

`int a = int();`一定会给我零分吗？

if`int`替换为`char`, `double`,`bool`或指针类型怎么样？

请问这是在语言标准中的哪里指定的？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-11T06:12:50.107

> **`int a = int();`一定会给我零分吗？**

是的，标准保证它给你零。
这称为**值初始化**。对于该类型`int`，**值初始化**基本上是**零初始化**。

> **请问这是在语言标准中的哪里指定的？**

**这些规则在第 8.5 节**的标准中明确规定。我将在此处引用 Q 的相关内容：

**C++03：8.5 初始化器**
**第 7 段：**

> **初始值设定项为空括号集的对象，即 ()，应进行值初始化。**

值初始化和零初始化在**8.5 第 5**段中定义为：

> 对T 类型的对象进行**值初始化**意味着：
> 
> — 如果 T 是具有用户声明的构造函数 (12.1) 的类类型（第 9 条），则调用 T 的默认构造函数（如果 T 没有可访问的默认构造函数，则初始化是错误的）；
> — 如果 T 是没有用户声明的构造函数的非联合类类型，则 T 的每个非静态数据成员和基类组件都是值初始化的；
> — 如果 T 是一个数组类型，那么每个元素都是值初始化的；
> —**否则，对象被零初始化**
> 
> 对T 类型的对象进行**零初始化**意味着：
> 
> —**如果 T 是标量类型（3.9），则将对象设置为转换为 T 的值 0（零）**；
> — 如果 T 是非联合类类型，则每个非静态数据成员和每个基类子对象
> 都初始化为零；
> — 如果 T 是联合类型，则对象的第一个命名数据成员为零初始化；
> — 如果 T 是数组类型，则每个元素都初始化为零；
> — 如果 T 是引用类型，则不执行初始化。

注意：粗体文字是我强调的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:13:38.593

是的，任何内置类型在默认初始化时总是初始化为零。请记住，在大多数情况下，内置类型**未**默认初始化，因此不一定会打印出来`0`：

```
int i;
std::cout << i << "\n"; 
```

# android - 在 App 小部件中显示不同控件之间的更改

> ID：10100777
> 
> 赞同：0
> 
> 时间：2012-04-11T06:12:05.413
> 
> 标签：android, android-widget, android-appwidget

我正在开发一个 App 小部件。我希望小部件在显示图像和显示一些文本之间交替显示。

布局是使用这样的 RelativeLayout 设计的......

```
<RelativeLayout ....>

<Textview.... />
bla bla....

<TextView...... />   <!-- First I want to display these textviews -->
<TextView...... />   <!-- First I want to display these textviews -->
<TextView...... />   <!-- First I want to display these textviews -->

<ImageView...... />   <!-- After nest update I want to show this image instead -->

</RelativeLayout> 
```

我可以对这些控件进行分组并隐藏/显示这些组，还是我必须处理所有这些？也许有更好的方法来做到这一点？不同的布局文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:19:57.163

在我看来，您想使用 ViewFlipper。你可以在这里查看文档：[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)

# c++ - 如何从 python 程序调用 C++ 对象中定义的函数？

> ID：10100781
> 
> 赞同：0
> 
> 时间：2012-04-11T06:12:40.993
> 
> 标签：c++, python, ctypes

我有一个 C++ 程序：

```
class X
{
    private:
        int a;
    public:
        int func(char *str);
}; 
```

现在我想在我的 Python 程序中调用函数 func 。我该怎么做？

我已经使用 ctypes 从我的 Python 程序中成功调用了 C 函数。但是我似乎无法弄清楚如何调用在 C++ 对象中定义的函数。

我已经使用过 ctypes，所以我想弄清楚如何以这种方式完成它。但是我对其他技术持开放态度。我的项目也提出了一个约束，即我不应该在我的 C++ 程序中使用包装函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:19:58.823

退房[`Boost::Python`](http://www.boost.org/doc/libs/1_49_0/libs/python/doc/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:26:43.300

您标记了问题 ctypes，但不能直接从 ctypes 实例化 C++ 对象。您可以将 C++ 对象包装在 C 接口中，然后使用 ctypes。或者你可以编写一个 Python 扩展模块，它可以包含 C++ 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T06:20:59.470

Boost.Python 的替代品是[SWIG](http://www.swig.org/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T06:24:18.323

尝试[http://swig.org/](http://swig.org/) 几年前，我包装了一些 c/c++ 代码，以便在 wxPython 中与 swig 一起使用它们。我不记得太多细节，但我认为 swig 很容易使用。

希望有帮助。

# windows-phone-7 - 表现不佳的上下文菜单

> ID：10100792
> 
> 赞同：0
> 
> 时间：2012-04-11T06:13:15.600
> 
> 标签：windows-phone-7, xaml, silverlight-3.0, contextmenu

我在我的应用程序中显示了一个简单的 twitter 提要，并且我在上下文菜单中实现了一个刷新方法。问题是显示上下文菜单的效果很差（这与项目的数量无关，只有少数几个）。似乎我需要长时间点击/按住，然后出现上下文菜单 - 不是流畅的动画，而是有点震动。理想情况下，最好让它表现得更像人员中心，在其中有您点击该项目的即时反馈，然后上下文菜单出现在流畅的动画中。

让我感到困惑的另一部分是当上下文菜单确实出现时，屏幕的其余部分会“缩小到背景”以引起对所选项目的注意。这似乎与性能问题有关。再次，在这个问题上寻找人们的理想行为。

关于如何更好地实现这一点的任何提示？

这是我的xml：

```
 <!-- twitter feed-->
        <controls:PivotItem Header="feed">
            <ScrollViewer>

                <StackPanel>
                    <ItemsControl ItemsSource="{Binding Tweets}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Padding="12">

                                    <toolkit:ContextMenuService.ContextMenu>
                                        <toolkit:ContextMenu >
                                            <toolkit:MenuItem Header="refresh" Command="{Binding Main.RefreshTweetsCommand, Source={StaticResource Locator}}" />
                                        </toolkit:ContextMenu>
                                    </toolkit:ContextMenuService.ContextMenu>

                                    <StackPanel Orientation="Horizontal">
                                        <Image Source="{Binding user.profile_image_url}" Margin="0,12,0,0" Height="80" Width="80" Stretch="UniformToFill" VerticalAlignment="Top"/>
                                        <Border Padding="12,0,0,0">
                                            <StackPanel>
                                                <TextBlock Text="{Binding user.name}" Foreground="Blue" FontSize="30" />
                                                <TextBlock Text="{Binding date_created}" FontSize="16"/>
                                                <TextBlock Text="{Binding text}" FontSize="20" TextWrapping="Wrap" Width="320" />
                                            </StackPanel>
                                        </Border>
                                    </StackPanel>                                       

                               </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    <TextBlock Text="more . . ." FontSize="32" Padding="20">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Tap">
                                <cmd:EventToCommand Command="{Binding MoreTweetsCommand, Mode=OneWay}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </TextBlock>
                </StackPanel>
            </ScrollViewer>
        </controls:PivotItem> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:31:54.370

“缩小到背景”问题也在人员中心完成，只是不那么明显。您可以使用 IsZoomEnabled 属性更改此设置，请参阅[http://www.windowsphonegeek.com/articles/WP7-ContextMenu-in-depth--Part1-key-concepts-and-API](http://www.windowsphonegeek.com/articles/WP7-ContextMenu-in-depth--Part1-key-concepts-and-API)。

我注意到与 Microsoft 的实现相比，动画也很生涩。

# html - Html & Css：为什么我的 javascript 菜单在 IE 9 中不起作用？

> ID：10100793
> 
> 赞同：1
> 
> 时间：2012-04-11T06:13:20.713
> 
> 标签：html, css, html-lists

我的网站上有一个`JavaScript`菜单，其`ul`结构`li`如下：

```
<ul id="...">
<li class="..."><a></a></li>
...
</ul> 
```

[JsFiddle：组织结构图测试](http://jsfiddle.net/SxunS/)

在我网站的一页中，我有一个组织结构图，其结构与我的菜单相同。问题出在 IE8 和 IE9 中，并且仅在我的组织结构图页面中，菜单不显示其子菜单。
当我删除一些`li`和`ul`我的组织结构图时，问题将得到解决。这意味着当我使用超过 5 个`ul`并`li`嵌套时，菜单停止工作。

我的组织结构图结构非常简单，不`Javascript`用于显示或隐藏子级别。
所以请检查这个链接并告诉我为什么会这样？
[JsFiddle：组织结构图测试](http://jsfiddle.net/SxunS/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:04:55.023

只需在“<> "

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T10:58:39.047

![Ie9 的快照](../Images/f06ad8d40981de93fa9a43f74e4859d5.png)

正如您可以检查它在 IE9 中是否正常工作

# javascript - 复制 ArrayBuffer 对象最直接的方法是什么？

> ID：10100798
> 
> 赞同：31
> 
> 时间：2012-04-11T06:13:54.660
> 
> 标签：javascript, typed-arrays

我正在处理`ArrayBuffer`对象，我想复制它们。虽然这对于实际的指针和 来说相当容易`memcpy`，但我在 Javascript 中找不到任何直接的方法来做到这一点。

现在，这就是我复制我的方式`ArrayBuffers`：

```
function copy(buffer)
{
    var bytes = new Uint8Array(buffer);
    var output = new ArrayBuffer(buffer.byteLength);
    var outputBytes = new Uint8Array(output);
    for (var i = 0; i < bytes.length; i++)
        outputBytes[i] = bytes[i];
    return output;
} 
```

有没有更漂亮的方法？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-03-01T12:57:49.943

我更喜欢下面的方法

```
function copy(src)  {
    var dst = new ArrayBuffer(src.byteLength);
    new Uint8Array(dst).set(new Uint8Array(src));
    return dst;
} 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-08-12T03:35:24.443

看来，只需传入源数据视图即可执行副本：

```
var a = new Uint8Array([2,3,4,5]);
var b = new Uint8Array(a);
a[0] = 6;
console.log(a); // [6, 3, 4, 5]
console.log(b); // [2, 3, 4, 5] 
```

在 FF 33 和 Chrome 36 中测试。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-04-11T06:49:27.843

`ArrayBuffer`应该支持`slice`（http://www.khronos.org/registry/typedarray/specs/latest/）所以你可以试试，

```
buffer.slice(0); 
```

它适用于 Chrome 18，但不适用于 Firefox 10 或 11。至于 Firefox，您需要手动复制它。`slice()`您可以在 Firefox中进行猴子补丁，因为 Chrome 的`slice()`性能会优于手动副本。这看起来像，

```
if (!ArrayBuffer.prototype.slice)
    ArrayBuffer.prototype.slice = function (start, end) {
        var that = new Uint8Array(this);
        if (end == undefined) end = that.length;
        var result = new ArrayBuffer(end - start);
        var resultArray = new Uint8Array(result);
        for (var i = 0; i < resultArray.length; i++)
           resultArray[i] = that[i + start];
        return result;
    } 
```

然后你可以打电话，

```
buffer.slice(0); 
```

在 Chrome 和 Firefox 中复制数组。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-06T10:41:16.850

嗯...如果它是您要切片的 Uint8Array（从逻辑上讲，它应该是），这可能会起作用。

```
 if (!Uint8Array.prototype.slice && 'subarray' in Uint8Array.prototype)
     Uint8Array.prototype.slice = Uint8Array.prototype.subarray; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-30T20:03:40.370

更快且稍微复杂的chuckj答案版本。应该在大型类型化数组上使用少约 8 倍的复制操作。基本上我们复制尽可能多的 8 字节块，然后复制剩余的 0-7 字节。这在当前版本的 IE 中特别有用，因为它没有为 ArrayBuffer 实现切片方法。

```
if (!ArrayBuffer.prototype.slice)
    ArrayBuffer.prototype.slice = function (start, end) {
    if (end == undefined) end = that.length;
    var length = end - start;
    var lengthDouble = Math.floor(length / Float64Array.BYTES_PER_ELEMENT); 
    // ArrayBuffer that will be returned
    var result = new ArrayBuffer(length);

    var that = new Float64Array(this, start, lengthDouble)
    var resultArray = new Float64Array(result, 0, lengthDouble);

    for (var i = 0; i < resultArray.length; i++)
       resultArray[i] = that[i];

    // copying over the remaining bytes
    that = new Uint8Array(this, start + lengthDouble * Float64Array.BYTES_PER_ELEMENT)
    resultArray = new Uint8Array(result, lengthDouble * Float64Array.BYTES_PER_ELEMENT);

    for (var i = 0; i < resultArray.length; i++)
       resultArray[i] = that[i];

    return result;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-02-15T12:08:06.363

围绕. `Buffer`_ `ArrayBuffer`这是共享内存，不会复制。然后从 wrapping 创建一个新的 Buffer `Buffer`。这将复制数据。最后得到一个新的`Buffer`参考`ArrayBuffer`。

这是我能找到的最直接的方法。最有效率？也许。

```
const wrappingBuffer = Buffer.from(arrayBuffer)
const copiedBuffer = Buffer.from(wrappingBuffer)
const copiedArrayBuffer = copiedBuffer.buffer 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-06T16:56:52.207

在某些情况下（例如 webaudio Audiobuffers），您只有对 2 个数组的引用。
因此，如果您将 array1 作为 float32Array 并将 array2 作为 float32Array，
则必须逐个元素地进行复制。

为此，您可以使用不同的方法。

```
 var ib=z.inputBuffer.getChannelData(0);
            var ob=z.outputBuffer.getChannelData(0); 
```

这

```
 ib.forEach((chd,i)=>ob[i]=chd); 
```

或者这个更好，可能**更快**

```
 ob.set(ib); 
```

这是因为 Array.set 用多个数据填充现有数组（甚至来自另一个数组）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-04T07:11:53.273

上面的一些操作只做“浅”的拷贝。在使用工人和可转移数组时，您需要进行深度复制。

```
function copyTypedArray(original, deep){
    var copy;
    var kon = original.constructor;
    if(deep){
        var len = original.length;
        copy = new kon(len);
        for (var k=len; --k;) {
            copy[k] = original[k];
        }
    } else {
        var sBuf = original.buffer;
        copy = new kon(sBuf);
        copy.set(original);
    }
    return copy;
} 
```

提示（对于困惑的人）：类型化数组包含一个 ArrayBuffer，可以通过“buffer”属性获得。

```
var arr = new Float32Array(8);
arr.buffer <-- this is an ArrayBuffer 
```

# windows-phone-7 - 如何在 WP7 中解析 Json webService 响应

> ID：10100799
> 
> 赞同：-1
> 
> 时间：2012-04-11T06:14:07.687
> 
> 标签：windows-phone-7, datacontractserializer

我想在不使用任何 DLL 的情况下在列表框中显示数据。并且我的 web 服务以 json 格式响应。

我的 Web 服务响应如下。它有 800 多条记录

```
[
    {
    "st_id":"1",
        "st_name":"name xyz"
    },
{

  "st_id":"2",
   "st_name":"name ABC"
},
{

  "st_id":"3",
   "st_name":"name HIJK"
},
{
  "st_id":"4",
   "st_name":"name OPQ"
},
] 
```

我的数据类如下

```
[DataContract]
public class Student
{
    [DataMember=("st_id")]
    public bool st_id { get; set; }
    [DataMember=("st_name")]
    public string st_name { get; set; }

} 
```

我正在尝试使用 DataContractJsonSerializer 序列化对象 & m 在 Stream 中获取 WS 响应。但我无法序列化。建议链接或基本教程用于 json 的 Serilize 和 Deserilize

```
DataContractJsonSerializer stdserialize = 
    new DataContractJsonSerializer(typeof(Student));
Student stuser = (Student)stdserialize.ReadObject(responseStream); 
```

因此，请帮助进行 json 响应解析并建议 datacontract 的链接以及所有提供基础知识的链接。
谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:43:32.047

您将 st_id 声明为 a `bool`，但您尝试反序列化的数据类型是字符串（可以转换为数字 - 而不是布尔值）。尝试将其声明为`string`它应该可以工作。

此外，响应是一个对象*数组*，因此您应该使用的类型是`Student[]`：

```
DataContractJsonSerializer stdserialize = 
    new DataContractJsonSerializer(typeof(Student[]));
Student stuser = (Student[])stdserialize.ReadObject(responseStream); 
```

# jakarta-ee - 如何在项目目录中创建文件

> ID：10100800
> 
> 赞同：0
> 
> 时间：2012-04-11T06:14:20.543
> 
> 标签：jakarta-ee, servlets, tomcat6, filewriter

在 tomcat6 服务器中，我有一个包含 servlet 的项目，

我调用了一个 servlet：

```
BufferedWriter out = new BufferedWriter(new FileWriter("file.txt"));
out.write("text text text");
out.close(); 
```

它在 eclipse.exe 的目录中创建文件，我希望它们在项目目录中创建。

怎么办

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:38:42.420

在 Servlet 中：

```
String path = getServletContext().getRealPath("/filename.txt");
BufferedWriter out = new BufferedWriter(new FileWriter(path)); 
```

注意：当您将它部署在 tomcat 中并从外部 eclipse 运行时，它将起作用。由于eclipse在部署Web应用程序时有自己的内部结构。

检查差异放

`System.out.println("File Path: " + path);`在你的 servlet 中。

# ruby - rvm -bash: cat -v: 找不到命令

> ID：10100802
> 
> 赞同：1
> 
> 时间：2012-04-11T06:14:31.090
> 
> 标签：ruby, macos, osx-lion, rvm

当我运行时`rvm`：

```
$ rvm
-bash: cat -v: command not found 
```

但是，如果我运行`rvm -v`：

```
$ rvm -v

rvm 1.11.5 (master) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io] 
```

怎么了？

```
$ which rvm
/Users/me/.rvm/bin/rvm 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:47:50.130

这是 RVM 中的一个错误：

```
"${PAGER:-"cat -v"}" ... 
```

已在 RVM 稳定版中修复。

# php - 算法需要一点帮助

> ID：10100806
> 
> 赞同：0
> 
> 时间：2012-04-11T06:14:45.830
> 
> 标签：php, algorithm, function

现在我有一组**if**和**elseif**来设置 div 的高度

```
<?php
if($num == 0){echo 'height:0px;';} 
elseif($num > 0 && $num < 10) {echo 'height:3px;';} 
elseif($num >= 10 && $num < 22) {echo 'height:7px;';}
elseif($num >= 22 && $num < 45) {echo 'height:16px;';}
elseif($num >= 45 && $num < 50) {echo 'height:33px;';}
elseif($num >= 50 && $num < 67) {echo 'height:36px;';}
elseif($num >= 67 && $num < 79) {echo 'height:48px;';}
elseif($num >= 79 && $num < 88) {echo 'height:56px;';}
elseif($num >= 88) {echo 'height:72px;';}
?> 
```

问题是这对于 5 个不同的 div 被复制了 5 次，并且认为有更好的方法来做到这一点

像这样：

```
<?php
      function divHeight($maxNum,$number)
{

    if($number == 0)
    {
      echo 'height:0px;' ;
    }

    elseif($number >= $maxNum)
    {
      echo 'height:72px;' ;
    }

    else
    {
       //here were the algorithm have to be
    }

} 
```

?>

我会这样称呼它`<?php divHeight(88,$number);?>`

div的最大高度是72，现在如何计算高度？

// 编辑：这很简单 :X :X 但为时已晚，我还没睡

```
$newHeight = floor($number * 72 / 100);

echo $newHeight; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:34:31.537

```
function mapNumToHeight($num) {
    // Max $num => height for that num
    $heightMap = array(
        0 => 0,
        9 => 3,
        21 => 7,
        44 => 16,
        49 => 33,
        66 => 36,
        78 => 48,
        87 => 56,
        88 => 72
    );

    // Store the keys into an array that we can search
    $keys = array_keys($heightMap);
    rsort($keys);

    // We want to find the smallest key that is greater than or equal to $num.
    $best_match = $keys[0];
    foreach($keys as $key) {
        if($key >= $num) {
            $best_match = $key;
        }
    }

    return 'height:' . $heightMap[$best_match] . 'px;';
}

mapNumToHeight(3); // height:3px;
mapNumToHeight(33); // height:16px;
mapNumToHeight(87); // height:56px;
mapNumToHeight(88); // height:72px;
mapNumToHeight(1000); // height:72px; 
```

# java - Swing：带箭头的弹出框

> ID：10100815
> 
> 赞同：5
> 
> 时间：2012-04-11T06:15:19.563
> 
> 标签：java, swing, popover, rounded-corners

我想创建一个带有箭头、圆角和阴影效果的 Google Chrome 收藏夹式弹出框。在 Java Swing 中。最好的方法是什么？[闪屏](http://docs.oracle.com/javase/7/docs/api/java/awt/SplashScreen.html)？或者只是一个普通的[AWT Window](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Window.html)？其他想法？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T06:32:28.790

有几个选项，每个选项都有自己的优点和缺点......

1.  创建一个自定义形状的窗口 - 使用这种方法，一些系统将能够在形状窗口后面创建额外的阴影，这也适用于大多数系统（甚至应该适用于 linux JDK）。这种方法的坏处（实际上使它无法使用）是无锯齿的形状边界线 - 如果您创建一些椭圆形窗口，它的侧面会显得粗糙。

2.  创建具有绘制形状的非透明未装饰窗口 - 这种方法将解决 (1) 方法的主要问题。您可以在完全透明的窗口上绘制您正在绘制的形状。这个的坏处是它只适用于 Win 和 Mac 系统。在（大多数情况下）任何 linux 系统上，您都会得到一个矩形窗口和大量关于不受支持的操作的错误。

3.  在 java-window 内创建一个自定义形状的弹出窗口，并将其放置在窗口分层或玻璃窗格上。这将使您完全避免任何兼容性问题并获得 (2) 方法的好处。不过，这种方法有一个不好的地方——您只能在窗口根窗格边界中显示这样的弹出窗口。在大多数情况下，这仍然比其他两种方式好得多，因为它使用的资源更少，不会创建额外的窗口，并且您可以控制弹出窗口的每个部分。

关于第三种方法 - 您可以查看我在自己的项目[WebLookAndFeel 中创建的 TooltipManager](http://weblookandfeel.com) - 它使用窗口玻璃窗格显示具有阴影效果的自定义形状的半透明工具提示。很快我将添加窗口 PopupManager，它将允许快速创建“内部”窗口弹出窗口。

以下是这些方法的一些示例：

**在所有示例中都使用了一些代码**

创建形状的方法：

```
private static Area createShape ()
{
    Area shape = new Area ( new RoundRectangle2D.Double ( 0, 20, 500, 200, 20, 20 ) );

    GeneralPath gp = new GeneralPath ( GeneralPath.WIND_EVEN_ODD );
    gp.moveTo ( 230, 20 );
    gp.lineTo ( 250, 0 );
    gp.lineTo ( 270, 20 );
    gp.closePath ();
    shape.add ( new Area ( gp ) );

    return shape;
} 
```

允许通过拖动组件来移动窗口的鼠标适配器：

```
public static class WindowMoveAdapter extends MouseAdapter
{
    private boolean dragging = false;
    private int prevX = -1;
    private int prevY = -1;

    public WindowMoveAdapter ()
    {
        super ();
    }

    public void mousePressed ( MouseEvent e )
    {
        if ( SwingUtilities.isLeftMouseButton ( e ) )
        {
            dragging = true;
        }
        prevX = e.getXOnScreen ();
        prevY = e.getYOnScreen ();
    }

    public void mouseDragged ( MouseEvent e )
    {
        if ( prevX != -1 && prevY != -1 && dragging )
        {
            Window w = SwingUtilities.getWindowAncestor ( e.getComponent () );
            if ( w != null && w.isShowing () )
            {
                Rectangle rect = w.getBounds ();
                w.setBounds ( rect.x + ( e.getXOnScreen () - prevX ),
                        rect.y + ( e.getYOnScreen () - prevY ), rect.width, rect.height );
            }
        }
        prevX = e.getXOnScreen ();
        prevY = e.getYOnScreen ();
    }

    public void mouseReleased ( MouseEvent e )
    {
        dragging = false;
    }
} 
```

**第一种方法示例：**

```
public static void main ( String[] args )
{
    JFrame frame = new JFrame ();
    frame.setUndecorated ( true );

    JPanel panel = new JPanel ();
    panel.setBackground ( Color.BLACK );
    WindowMoveAdapter wma = new WindowMoveAdapter ();
    panel.addMouseListener ( wma );
    panel.addMouseMotionListener ( wma );
    frame.getContentPane ().add ( panel );

    Area shape = createShape ();
    AWTUtilities.setWindowShape ( frame, shape );
    frame.setSize ( shape.getBounds ().getSize () );
    frame.setLocationRelativeTo ( null );

    frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
    frame.setVisible ( true );
} 
```

如您所见 - 圆形的边角非常粗糙且不好看

**第二种方法：**

```
public static void main ( String[] args )
{
    JFrame frame = new JFrame ();
    frame.setUndecorated ( true );

    final Area shape = createShape ();
    JPanel panel = new JPanel ()
    {
        protected void paintComponent ( Graphics g )
        {
            super.paintComponent ( g );

            Graphics2D g2d = ( Graphics2D ) g;
            g2d.setRenderingHint ( RenderingHints.KEY_ANTIALIASING,
                    RenderingHints.VALUE_ANTIALIAS_ON );

            g2d.setPaint ( Color.BLACK );
            g2d.fill ( shape );
        }
    };
    panel.setOpaque ( false );
    WindowMoveAdapter wma = new WindowMoveAdapter ();
    panel.addMouseListener ( wma );
    panel.addMouseMotionListener ( wma );
    frame.getContentPane ().add ( panel );

    AWTUtilities.setWindowOpaque ( frame, false );
    frame.setSize ( shape.getBounds ().getSize () );
    frame.setLocationRelativeTo ( null );

    frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
    frame.setVisible ( true );
} 
```

现在它应该看起来很完美——唯一的问题是它只能在 Windows 和 Mac 上正常工作（至少在 1.6.x JDK 中）。至少大约一个月前，当我上次在各种操作系统上检查它时。

**第三种方法**

```
public static void main ( String[] args )
{
    JFrame frame = new JFrame ();

    JPanel panel = new JPanel ( new BorderLayout () );
    panel.setOpaque ( false );
    WindowMoveAdapter wma = new WindowMoveAdapter ();
    panel.addMouseListener ( wma );
    panel.addMouseMotionListener ( wma );
    frame.getContentPane ().add ( panel );

    panel.add ( new JButton ( "Test" ) );

    final Area shape = createShape ();

    JPanel glassPane = new JPanel ( null )
    {
        public boolean contains ( int x, int y )
        {
            // This is to avoid cursor and mouse-events troubles
            return shape.contains ( x, y );
        }
    };
    glassPane.setOpaque ( false );
    frame.setGlassPane ( glassPane );
    glassPane.setVisible ( true );

    JComponent popup = new JComponent ()
    {
        protected void paintComponent ( Graphics g )
        {
            super.paintComponent ( g );

            Graphics2D g2d = ( Graphics2D ) g;
            g2d.setRenderingHint ( RenderingHints.KEY_ANTIALIASING,
                    RenderingHints.VALUE_ANTIALIAS_ON );

            g2d.setPaint ( Color.BLACK );
            g2d.fill ( shape );
        }
    };
    popup.addMouseListener ( new MouseAdapter ()
    {
        // To block events on the popup
    });
    glassPane.add ( popup );
    popup.setBounds ( shape.getBounds () );
    popup.setVisible ( true );

    frame.setSize ( 800, 500 );
    frame.setLocationRelativeTo ( null );

    frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
    frame.setVisible ( true );
} 
```

这是放置在玻璃板上的弹出窗口的简单示例。如您所见，它仅存在于 JFrame 内部，但有别名，并且可以在任何类型的操作系统上正常工作。

# javascript - 将 Javascript 应用于 XSL

> ID：10100816
> 
> 赞同：4
> 
> 时间：2012-04-11T06:15:19.903
> 
> 标签：javascript, html, xslt

我注意到如果我尝试通过 java 脚本将更改应用到 XSL 文件，它只会影响 XSL 创建的最顶层节点。

示例：我想隐藏多个博客条目的所有评论。结果只有顶部的博客条目会隐藏评论。

我想更改超链接的文本。超链接文本只会在最顶部的节点中更改。

如何让 java 脚本影响由 XSL 文件创建的所有节点？

HTML 代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 

<html>
    <head>
        <link rel="stylesheet" type="text/css" href="style.css" >
        <title>My Blog</title>

        <script> 

        function loadXMLDoc(fname)  
        {   

                var xmlDoc; 

                // code for IE
                if (window.ActiveXObject)
                {  
                    xmlDoc = new ActiveXObject("MSXML2.FreeThreadedDOMDocument");  
                }
                // code for Mozilla, Firefox, Opera, etc. 
                else if (document.implementation.createDocument) 
                { 
                    xmlDoc = document.implementation.createDocument("", "", null);  
                } 
                else 
                { 
                    alert('Your browser cannot handle this script'); 
                } 
                xmlDoc.async=false; 
                xmlDoc.load(fname); 
                return(xmlDoc); 
            }

            function loadEntries() 
            { 
                xmlDoc = loadXMLDoc("blogData.xml"); 
                xslDoc = loadXMLDoc("blogData.xsl"); 

                // for Firefox, Safari, etc.
                if (document.implementation.createDocument) 
                {
                    var xsltProcessor = new XSLTProcessor();
                    xsltProcessor.importStylesheet(xslDoc); 
                    xsltProcessor.setParameter(null, "id", 11);
                    var resultDocument = xsltProcessor.transformToFragment(xmlDoc,document);
                    document.getElementById("entries").appendChild(resultDocument);

                }
                // Internet Explorer
                else if (window.ActiveXObject) 
                {
                    var xslTemplate=new ActiveXObject("MSXML2.XSLTemplate");
                    xslTemplate.stylesheet=xslDoc;
                    var xslProc = xslTemplate.createProcessor();
                    xslProc.input = xmlDoc;
                    xslProc.addParameter("id", 11);
                    xslProc.transform();
                    document.getElementById("entries").innerHTML = xslProc.output;                  
                }

            }

            function displayResult()
            {
                var xml=loadXMLDoc("blogData.xml");
                var xsl=loadXMLDoc("blogData.xsl");
                // code for IE
                if (window.ActiveXObject)
                {
                    var ex = xml.transformNode(xsl);
                    document.getElementById("entries").innerHTML = ex;
                    document.getElementById("comments").style.display = 'none';
                    document.getElementById("hideShowLink").innerHTML = 'Show Comments';
                }
                // code for Mozilla, Firefox, Opera, etc.
                else if (document.implementation.createDocument)
                {
                    var xsltProcessor = new XSLTProcessor(); 
                    xsltProcessor.importStylesheet(xsl);
                    var resultDocument = xsltProcessor.transformToFragment(xml,document);
                    document.getElementById("entries").appendChild(resultDocument);
                    document.getElementById("comments").style.display = 'none';
                    document.getElementById("hideShowLink").innerHTML = 'Show Comments';
                }
            }

            function hideShow(){
                if(document.getElementById("comments").style.display == 'none'){
                    document.getElementById("comments").style.display = 'block';
                    document.getElementById("hideShowLink").innerHTML = 'Hide Comments';
                } else {
                    document.getElementById("comments").style.display = 'none';
                    document.getElementById("hideShowLink").innerHTML = 'Show Comments';
                }
            }

        </script>

    </head>

    <body onLoad="displayResult()">
        <table width="100%" border="0">
            <tr>
                <td colspan="2">
                    <div class="imgcentered">
                        <img src="banner.gif" alt="banner" />
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div id="entries">
                    </div>
                </td>
                <td class="rightside">
                    <div class="rightbody">
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li>Archives</li>
                        <li>Profile
                        <br/>
                        <img src="pokemon.gif" alt="pokemin" width="40%"/><br/>
                        <br/>

                        <dl>
                            <dt><b>Name:</b></dt>
                                <dd>Ash Catchem</dd>
                            <dt><b>Age:</b></dt>
                                <dd>Old Enough</dd>
                            <dt><b>Birth Place:</b></dt>
                                <dd>Pallet Town</dd>
                            <dt><b>Current Residence:</b></dt>
                                <dd>Kanto</dd>
                            <dt><b>Occupation:</b></dt>
                                <dd>Pokemon Catcher</dd>
                        </dl>
                        </li>
                    </ul>
                    </div>
                </td>
            </tr>
        </table>
    </body>
</html> 
```

XSL 代码：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"> 
    <xsl:template match="/">
        <html>

            <body>
                <div class="leftbody">
                    <!-- Loops Through all of the entries node in the XML and displays then in order by date descending order --> 
                    <xsl:for-each select="//entries">
                        <xsl:sort select="creationTime/@sort" order="descending" />
                        <p><xsl:value-of select="creationTime"/>[<a href="javascript:hideShow()"> <xsl:value-of select="count(comments)"/> Comments</a>]</p>
                        <h1><xsl:value-of select="title"/></h1>
                        <p><xsl:value-of select="description"/></p>
                        <br/>
                        <p><a href="javascript:hideShow()" id="hideShowLink" class="comments"></a></p>
                        <br/><hr/><br/>

                        <div id="comments" class="comments">
                        <h2>Comments:</h2>
                            <xsl:for-each select="//comments">
                                <p class="comments"><h3><xsl:value-of select="title"/></h3></p>
                                <p class="comments"><xsl:value-of select="description"/></p>
                                <p class="comments">-- <xsl:value-of select="creator"/></p>
                            </xsl:for-each>
                            <hr/>
                        </div>

                    </xsl:for-each>

                </div>

            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

我正在玩的网页：http: [//dl.dropbox.com/u/12914798/Project%202/index.html](http://dl.dropbox.com/u/12914798/Project%202/index.html)

第一篇博客文章中的更改是完美的。创建一个链接来显示和隐藏评论。但它在其他地方没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:03:46.147

尝试使用 generate-id() 函数为 A 和 DIV 标签使用唯一 ID。

XSLT 的一些变化：

```
 <xsl:for-each select="//entries">
                    <xsl:sort select="creationTime/@sort" order="descending" />

                    <!-- define variables -->
                    <xsl:variable name="unique-id">
                        <xsl:choose>
                            <xsl:when test="position() = 1">
                                <xsl:value-of select="''"/>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:value-of select="generate-id(.)"/>
                            </xsl:otherwise>
                        </xsl:choose>
                    </xsl:variable>
                    <xsl:variable name="comments-id" select="concat('comments',$unique-id)"/>
                    <xsl:variable name="hideShowLink-id" select="concat('hideShowLink',$unique-id)"/>
                    <xsl:variable name="a-href" select="concat('javascript:hideShow(&#34;',$unique-id,'&#34;)')"/>

                    <!-- title and description -->
                    <p><xsl:value-of select="creationTime"/>[<xsl:element name="a"><xsl:attribute name="href"><xsl:value-of select="$a-href"/></xsl:attribute> <xsl:value-of select="count(comments)"/> Comments</xsl:element>]</p>
                    <h1><xsl:value-of select="title"/></h1>
                    <p><xsl:value-of select="description"/></p>
                    <br/>
                    <p>
                        <xsl:element name="a">
                            <xsl:attribute name="id"><xsl:value-of select="$hideShowLink-id"/></xsl:attribute>
                            <xsl:attribute name="href"><xsl:value-of select="$a-href"/></xsl:attribute>
                            <xsl:attribute name="class"><xsl:value-of select="'comments'"/></xsl:attribute>
                            Show Comments
                        </xsl:element>
                    </p>
                    <br/><hr/><br/>

                    <!-- comments -->
                    <xsl:element name="div">
                        <xsl:attribute name="id"><xsl:value-of select="$comments-id"/></xsl:attribute>
                        <xsl:attribute name="class"><xsl:value-of select="'comments'"/></xsl:attribute>
                        <xsl:attribute name="style"><xsl:value-of select="'display:none'"/></xsl:attribute>
                        <h2>Comments:</h2>
                        <xsl:for-each select="//comments">
                            <p class="comments"><h3><xsl:value-of select="title"/></h3></p>
                            <p class="comments"><xsl:value-of select="description"/></p>
                            <p class="comments">-- <xsl:value-of select="creator"/></p>
                        </xsl:for-each>
                        <hr/>
                    </xsl:element>

                </xsl:for-each> 
```

您还需要更改 JS 函数：

```
 function displayResult()
        {
            var xml=loadXMLDoc("p100993_IR1.2_output_without_header_1.csv.xml");
            var xsl=loadXMLDoc("LoadVendorAnalytic.xsl");
            // code for IE
            if (window.ActiveXObject)
            {
                var ex = xml.transformNode(xsl);
                document.getElementById("entries").innerHTML = ex;
            }
            // code for Mozilla, Firefox, Opera, etc.
            else if (document.implementation.createDocument)
            {
                var xsltProcessor = new XSLTProcessor(); 
                xsltProcessor.importStylesheet(xsl);
                var resultDocument = xsltProcessor.transformToFragment(xml,document);
                document.getElementById("entries").appendChild(resultDocument);
            }
        }

        function hideShow(id){
            if(document.getElementById("comments"+id).style.display == 'none'){
                document.getElementById("comments"+id).style.display = 'block';
                document.getElementById("hideShowLink"+id).innerHTML = 'Hide Comments';
            } else {
                document.getElementById("comments"+id).style.display = 'none';
                document.getElementById("hideShowLink"+id).innerHTML = 'Show Comments';
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:28:15.363

我编写了自己的示例 blogData.xml 并发现了问题：您希望为处理的每个条目元素展开/折叠，但这需要单独的 id 并将 id 传递给 hideShow 函数。试试这个：

```
function hideShow(commentsId){
    if(document.getElementById(commentsId).style.display == 'none'){
        document.getElementById(commentsId).style.display = 'block';
        document.getElementById("hideShowLink_" + commentsId).innerHTML = 'Hide Comments';
    } else {
        document.getElementById(commentsId).style.display = 'none';
        document.getElementById("hideShowLink_" + commentsId).innerHTML = 'Show Comments';
    }
} 
```

和

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"> 
    <xsl:template match="/">
        <html>

            <body>
                <div class="leftbody">
                    <!-- Loops Through all of the entries node in the XML and displays then in order by date descending order --> 
                    <xsl:for-each select="//entries">
                        <xsl:sort select="creationTime/@sort" order="descending" />
                        <xsl:variable name="commentsId">comments_<xsl:value-of select="creationTime/@sort"/></xsl:variable>

                        <p><xsl:value-of select="creationTime"/>
                            [
                            <xsl:element name="a">
                                <xsl:attribute name="href">javascript:hideShow('<xsl:value-of select="$commentsId"/>')</xsl:attribute>
                                <xsl:value-of select="count(comments)"/> Comments
                            </xsl:element>
                            ]
                        </p>
                        <h1><xsl:value-of select="title"/></h1>
                        <p><xsl:value-of select="description"/></p>
                        <br/>
                        <p>
                            <xsl:element name="a">
                                <xsl:attribute name="href">javascript:hideShow('<xsl:value-of select="$commentsId"/>')</xsl:attribute>
                                <xsl:attribute name="id">hideShowLink_<xsl:value-of select="$commentsId"/></xsl:attribute>
                                <xsl:attribute name="class">comments</xsl:attribute>
                            Hide Comments
                            </xsl:element>
                        </p>
                        <br/><hr/><br/>

                        <xsl:element name="div">
                        <xsl:attribute name="id"><xsl:value-of select="$commentsId"/></xsl:attribute>
                        <xsl:attribute name="class">comments</xsl:attribute>
                        <h2>Comments:</h2>
                            <xsl:for-each select="comments">
                                <p class="comments"><h3><xsl:value-of select="title"/></h3></p>
                                <p class="comments"><xsl:value-of select="description"/></p>
                                <p class="comments">-- <xsl:value-of select="creator"/></p>
                            </xsl:for-each>
                            <hr/>
                        </xsl:element>

                    </xsl:for-each>

                </div>

            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

请注意，我给了所有元素`div`和`a`一个唯一的 id。请注意，我添加了“隐藏评论”作为按钮的起始值。如果您仍希望在加载时添加值，则必须遍历所有 id="hideShow_*" 元素。

# android - 如何在android 2.3的视图组中双击缩放和缩放

> ID：10100819
> 
> 赞同：1
> 
> 时间：2012-04-11T06:15:45.680
> 
> 标签：android, drag-and-drop, viewgroup, pinchzoom

在我的 android 应用程序中，我想在视图（不是图像视图）上执行捏缩放功能。我还想在双击事件上缩放视图组。我使用画布做到了，但我认为这不是确切的解决方案。请提出我的问题的解决方案。提前致谢.....

# asp.net - MVC3 ActionName 属性，它的行为和效果

> ID：10100822
> 
> 赞同：13
> 
> 时间：2012-04-11T06:16:03.353
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

在阅读 mcv3 时，我遇到了一个名为`[ActionName]`. 它实际上为操作方法提供了一个新名称。我测试了一个让我思考的场景；内部是如何工作的。当我的控制器类中有以下两种操作方法时

```
[ActionName("Test")]
public ActionResult Index()
{
      return View();
}
[ActionName("Index")]
public ActionResult Test()
{
      return View();
} 
```

我认为这会以某种无限循环结束，或者会给出一些模棱两可的异常。但是同样的工作正常，当我给这个网址时调用第二种方法`http://mysite:1234/mycontroller`

是什么让 MVC 引擎选择第二种方法而不是第一种？

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-11T06:58:03.517

Phil Haack 有一篇关于这个问题的帖子：[方法如何变成行动](http://haacked.com/archive/2008/08/29/how-a-method-becomes-an-action.aspx)

简而言之：ControllerActionInvoker 使用反射来查找与操作名称匹配的方法。

ActionNameAttribute 重新定义方法的名称。

另请注意，您的视图名称与 ActionName 匹配，而不是 MethodName：方法 Index 将搜索名称为“Test”的视图

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-11T06:32:54.120

这就是[路由引擎](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs)的神奇之处。在 global.asax.cs 文件中的某个地方会定义路由模式，大部分默认为

```
 routes.MapRoute(
          "Default",                                              // Route name
          "{controller}/{action}/{id}",                           // URL with parameters
          new { controller = "Home", action = "Index", id = "" }  // Parameter defaults
          ); 
```

这是为您的应用程序定义的路由模式。动作名称属性映射到参数集合中的“动作”参数（MapRoute 的第三个参数）。

在您的情况下，如果您将操作“索引”映射到方法“测试”。它应该调用 Test() 方法。我不确定它是否仍在为您调用 Index()。事实上，如果路由引擎在你的公共方法上找到 ActionName 属性，它并不关心方法名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-03T12:14:45.160

ActionNameAttribute 它表示用于操作名称的属性。如果它不存在，则使用方法的名称。

# http - 在 HTTP Post 方法中使用“application/x-www-form-urlencoded”

> ID：10100828
> 
> 赞同：0
> 
> 时间：2012-04-11T06:16:16.830
> 
> 标签：http, windows-phone-7, c#-4.0, httpwebrequest

是什么意思

HTTP Post 方法中的 ContentType = "application/x-www-form-urlencoded"..??

我的代码是

```
 Uri url = new Uri(" http://blah/blah/blah...json");

         HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);

         webRequest.Method = "POST";

         webRequest.ContentType = "application/x-www-form-urlencoded"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T06:49:41.667

我一直在使用 ContentType = "application/x-www-form-urlencoded" 在特定项目中。我所知道的是，它是使用的方案，因此您发送到服务器的 POST 参数采用 form-urlencoded 格式。例如，如果您发送参数键值，如下所示： `name=Agung id=121`

然后，当您发送请求时，POST 正文将像这样编码： `name=Agung&id=121`

当您设置 ContentType = "application/x-www-form-urlencoded" 时，服务器将知道如何解析您发送的 Body 参数。

希望它会有所帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-11T06:20:31.680

这用于安全目的。

[你可以在这里](http://en.wikipedia.org/wiki/Percent-encoding)获得更多帮助。

# apache - Apache 将请求转发到另一台服务器

> ID：10100830
> 
> 赞同：16
> 
> 时间：2012-04-11T06:16:28.987
> 
> 标签：apache, port, forward

我希望 apache 将来自一台服务器的请求转发到另一台服务器。这是完整的场景：

有3台服务器：

1.  机器 A - IP：AAAA - 想要在机器 C 上调用 API 的客户端机器。
2.  机器 B - IP：BBBB - 中间机器
3.  机器 C - IP：CCCC - 托管 API 的机器。

API URL: http:// 机器 c: **8000** /v1/customer/....

连接状态：

1.  机器 A -> 机器 B：端口 80 上的 Telnet - 好
2.  机器 B -> 机器 C：端口 8000 上的 Telnet - 好
3.  机器 A -> 机器 C：端口 8000 上的 Telnet - 错误

理想情况下，机器 AI 想调用机器 C 上的 API，但由于我在 A 和 C 之间没有直接的 n/w 连接，我必须走这条路。

所以我想在机器 B 上设置 apache 服务器，这样：从机器 A，进行 API 调用 - http:// **Machine B:80** /v1/customer/.... 然后将其转发到端口 8000 上的机器 C . C 处理请求并将响应发送回 A。

任务可能很简单，但我是这个 apache 的新手，如果有人能告诉我解决方案，这对我明天的截止日期会很好:)

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-12T20:21:10.693

经过一些研究和谷歌搜索进一步能够做到这一点。这是我所做的 - 可能对那些面临同样问题的人有所帮助：

在机器 B 的 httpd.conf 文件中添加以下内容：

ProxyPass /v1/customer CCCC:8000/v1/customer

ProxyPassReverse /v1/customer CCCC:8000/v1/customer

因此，如果来自客户端（机器 A）的呼叫是 BBBB/v1/customer，那么它将被转发到 CCCC:8000/v1/customer

ProxyPass 需要 mod_proxy 模块。

# facebook - Facebook 连接 - 如何

> ID：10100841
> 
> 赞同：-2
> 
> 时间：2012-04-11T06:17:30.683
> 
> 标签：facebook, connect

我有一个网站，我希望用户通过 Facebook 连接注册和登录。我不知道如何在登录前强制注册。我需要我的数据库中的所有用户，但是可以在不注册的情况下单击 Facebook 登录按钮......我只是不明白，我该如何强制注册？这有什么好的例子吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:41:28.253

当您说您需要数据库中的所有用户时，您究竟是什么意思？

使用 facebook 登录按钮，您仍然可以在他们第一次进行身份验证后提供重定向 url，然后您可以捕获他们的 user_id，或者可能将他们转发到具有您自己的注册表单的另一个页面。然后，您可以在您的数据库中有一个标志，表明他们是否是已确认的用户（就像您发送电子邮件确认时一样），只有在他们提交您的额外表单后才会设置为 true。

如果他们没有输入这些详细信息，请在页面加载时检查此标志并将它们转发到您的表单。然后根据该标志控制对您网站的访问。

或者您是说您正在尝试使用注册插件[https://developers.facebook.com/docs/plugins/registration/](https://developers.facebook.com/docs/plugins/registration/)但这不能正常工作？

# android - 布局展开动画

> ID：10100844
> 
> 赞同：6
> 
> 时间：2012-04-11T06:18:02.273
> 
> 标签：android, android-layout, android-animation

我已经使用以下代码完成了布局展开动画。当我们通过单击文本视图调用动画时，它工作正常，但当我尝试通过单击布局来执行此操作时，情况并非如此。谁能帮我解决这个问题？

```
LinearLayout hello= (LinearLayout)findViewById(R.id.lin_hello);
final RelativeLayout rel=(RelativeLayout)findViewById(R.id.rel_nah_hide);
hello.setOnClickListener(new OnClickListener() {        
    @Override
    public void onClick(View v) {
        expand=!expand;
        Animation a=expand(rel, expand);
        rel.setAnimation(a);
        a.start();
    }
});

public static Animation expand(final View v, final boolean expand) {
    try {
        Method m = v.getClass().getDeclaredMethod("onMeasure", int.class, int.class);
        m.setAccessible(true);
        m.invoke(v,
                 MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),
                 MeasureSpec.makeMeasureSpec(((View)v.getParent()).getMeasuredWidth(), MeasureSpec.AT_MOST)
        );
    } catch (Exception e) {
        e.printStackTrace();
    }

    final int initialHeight = v.getMeasuredHeight();

    if (expand) {
        v.getLayoutParams().height = 0;
    } else {
        v.getLayoutParams().height = initialHeight;
    }
    v.setVisibility(View.VISIBLE);

    Animation a = new Animation() {
        @Override
        protected void applyTransformation(float interpolatedTime, Transformation t) {
            int newHeight = 0;
            if (expand) {
                newHeight = (int) (initialHeight * interpolatedTime);
            } else {
                newHeight = (int) (initialHeight * (1 - interpolatedTime));
            }
            v.getLayoutParams().height = newHeight;
            v.requestLayout();

            if (interpolatedTime == 1 && !expand)
                v.setVisibility(View.GONE);
        }

        @Override
        public boolean willChangeBounds() {
            return true;
        }
    };

    a.setDuration(SPEED_ANIMATION_TRANSITION);
    a.setAnimationListener(new AnimationListener(){
        @Override
        public void onAnimationEnd(Animation arg0) {
            animWorkingFlag=false;
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onAnimationStart(Animation animation) {
            animWorkingFlag=true;
        }
    });

    return a;
} 
```

以下是xml布局，

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <LinearLayout 
        android:id="@+id/lin_hello"
        android:layout_height="50dp"
        android:layout_width="fill_parent"
        android:orientation="vertical">
        <TextView 
            android:id="@+id/hello"
            android:layout_height="50dp"
            android:layout_width="fill_parent"
            android:text="Nah"
            android:gravity="center"
            android:background="#F03535"/>
    </LinearLayout>

    <RelativeLayout 
        android:id="@+id/rel_nah_hide"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent">
        <TextView 
            android:id="@+id/txt_nah_hide1"
            android:layout_height="50dp"
            android:layout_width="fill_parent"
            android:text="Incorrect Name/Address"
            android:gravity="center"
            android:textColor="@color/white"/>
        <TextView 
            android:id="@+id/txt_nah_hide2"
            android:layout_height="50dp"
            android:layout_width="fill_parent"
            android:text="Venue is closed"
            android:gravity="center"
            android:textColor="@color/white"
            android:layout_below="@id/txt_nah_hide1"/>
        <TextView 
            android:id="@+id/txt_nah_hide3"
            android:layout_height="50dp"
            android:layout_width="fill_parent"
            android:text="Venue is duplicate"
            android:gravity="center"
            android:textColor="@color/white"
            android:layout_below="@id/txt_nah_hide2"/>
    </RelativeLayout>

    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="28dp"
        android:text="heelo2222"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:26:18.837

使用下一部分代码：->

```
View hello= findViewById(R.id.lin_hello);
final RelativeLayout rel=(RelativeLayout)findViewById(R.id.rel_nah_hide);
hello.setOnClickListener(new OnClickListener() {        
    @Override
    public void onClick(View v) {
        expand=!expand;
        Animation a=expand(rel, expand);
        rel.setAnimation(a);
        a.start();
    }
}); 
```

# haskell - 在 Haskell 中解析 HTTP 请求

> ID：10100846
> 
> 赞同：3
> 
> 时间：2012-04-11T06:18:11.370
> 
> 标签：haskell

我应该使用哪个库来解析来自套接字流的 HTTP 请求？我想要一个可以包含部分或多个 HTTP 请求的惰性 ByteString 的东西。

我也对响应 HTTP 请求的类似内容感兴趣（将其传递给响应对象并获取惰性 ByteString 以写入套接字）

**编辑添加更多信息**：这个界面是理想的，但当然不是必需的：

```
ByteString {- the initial buffer -} -> (Maybe Request, ByteString {- remaining buffer -}) 
```

在部分请求的情况下，*Maybe Request*是*Nothing*并且 ByteString 与输入相同。

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:15:29.380

为了处理这种类型的流数据，当前的解决方案是使用 iteratee 或 iteratee 之类的库之一。Conduit、Pipes（可能被重命名为代理，因为它可以处理双向数据以及其他独特的好处）、Iteratee、枚举器、iterIO 等。管道库似乎对依赖它的数字库有显着的领先优势。

您应该查看[hackage.haskell.org 上的 Conduit 部分，](http://hackage.haskell.org/packages/archive/pkg-list.html#cat%3aconduit)尤其是[http-conduit](http://hackage.haskell.org/package/http-conduit)。第一个示例获得一个 http 响应，然后将其写入恒定空间中的文件。

```
import Data.Conduit.Binary (sinkFile)
import Network.HTTP.Conduit
import qualified Data.Conduit as C

main :: IO ()
main = do
     request <- parseUrl "http://google.com/"
     withManager $ \manager -> do
         Response _ _ _ src <- http request manager
         src C.$$+- sinkFile "google.html" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:10:14.083

我认为您可以仅[`Network.HTTP`](http://hackage.haskell.org/package/HTTP)针对基本实现，但我认为它本身不支持[`ByteStrings`](http://hackage.haskell.org/package/bytestring-0.10.4.0/docs/Data-ByteString.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T21:43:46.627

管道在特征方面具有与导管不同的策略。Conduit 将其所有功能打包在一起，而 Pipes 更喜欢将它们分开打包。

[管道字节串](https://github.com/Gabriel439/Haskell-Pipes-ByteString-Library)是我相信你正在寻找的包。

它可以通过运行安装：

```
cabal install pipes-bytestring 
```

要查找其他管道包，您可以运行：

```
cabal list pipes 
```

或者你也可以搜索[hackage](http://hackage.haskell.org/packages/search?terms=pipes)

# c# - C# Activex 跨平台

> ID：10100850
> 
> 赞同：0
> 
> 时间：2012-04-11T06:18:39.180
> 
> 标签：c#, browser, activex

我创建了一个简单的 .NET COM activex，如果它可以在 Chrome、Mozilla 等不同的浏览器上运行，而不仅仅是在 IE 上运行，那就太好了。

是否可以？是否有一些解决方法可以在其他浏览器上执行 activex？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:30:00.897

不，它不可能在其他浏览器上运行 ActiveX。另一种可能性是使用小程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:30:35.373

简而言之，没有。Chrome、FireFox 等原生不支持 activex。FireFox 有一些扩展允许它。如果你强迫人们安装这些扩展程序来运行你的软件，你可能会打开一个蠕虫维护罐。简而言之，activex 非常适合您可以强制使用 IE 的企业网络。

# c# - 与 Fileupload 控件的最大文件大小相关的问题

> ID：10100852
> 
> 赞同：1
> 
> 时间：2012-04-11T06:18:56.233
> 
> 标签：c#, asp.net, .net, vb.net

我已将我的网站部署`Windows Server 2007.`在`IIS`

我添加了 asp:FileUpload 控件

我已经`<httpRuntime maxRequestLength="60000"/>`在 `<system.web>`我的 Web.Config 文件中设置了

但网站不允许保存文件中指定的最大长度`web.config`文件。

我怎样才能做到这一点？

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T06:31:41.303

我认为您需要在 web.config 文件中使用以下内容。

```
<configuration>
    <system.webServer>
        <security>
            <requestFiltering>
                <requestLimits maxAllowedContentLength="60000" />
            </requestFiltering>
        </security>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T06:47:40.640

除了@Maarten 答案是正确的。

问题是 IIS 7 或更高版本默认允许的 maxAllowedContentLength 值为 30000000 字节，因此如果您尝试上传大于此限制的文件，则会显示**请求过滤模块配置为拒绝超过请求内容长度的请求发出**错误。

对于[此](http://frazsundal.blogspot.com/2011/02/request-filtering-module-is-configured.html)链接的此错误的演示

# maven - docbkx-maven-plugin：插件运行期间没有输出

> ID：10100854
> 
> 赞同：0
> 
> 时间：2012-04-11T06:18:57.190
> 
> 标签：maven, maven-2, maven-3, docbook, docbook-5

我设置了 docbkx-maven-plugin 来为源项目生成 PDF 文档。在父 pom 中，我指定了要使用的版本以及对要使用的 docbook 版本的引用：

```
<build>
<pluginManagement>
    <plugins>
        <plugin>
            <groupId>com.agilejava.docbkx</groupId>
            <artifactId>docbkx-maven-plugin</artifactId>
            <version>2.0.14</version>
            <dependencies>
                <dependency>
                    <groupId>net.sf.docbook</groupId>
                    <artifactId>docbook-xml</artifactId>
                    <version>5.0-all</version>
                    <type>zip</type>
                    <classifier>resources</classifier>
                    <scope>runtime</scope>
                </dependency>
            </dependencies>
        </plugin>
    </plugins>
</build>
</pluginManagement> 
```

在实际项目中我使用的配置：

```
<build>
<plugins>
<plugin>
    <groupId>com.agilejava.docbkx</groupId>
    <artifactId>docbkx-maven-plugin</artifactId>
    <executions>
        <execution> 
            <id>usersmanual</id>
            <phase>generate-resources</phase>
            <goals>
                <goal>generate-pdf</goal>
            </goals>
            <configuration>
                <includes>${basedir}/UserManual/*.xml</includes>
                <includes>${basedir}/UserManual/src/*.xml</includes>
                                <targetDirectory>${project.build.directory}/UserManual</targetDirectory>
                <chunkedOutput>true</chunkedOutput>
            </configuration>
        </execution>
    </executions>
</plugin>
</plugins>
</build> 
```

无论我指定什么目标或提供什么内容，插件都会执行 no(!) 操作。没有创建目标目录，我在命令行上看不到任何有意义的输出。结果如下所示：

```
[INFO] --- docbkx-maven-plugin:2.0.14:generate-pdf (usersmanual) @ documentation ---
[INFO] 
```

我使用 Maven 3.0.3。

我在这里想念什么？是否有任何配置尚未提供，它将启动插件做一些工作？

**更新：** 这就是我现在拥有的：

```
<plugin>
    <groupId>com.agilejava.docbkx</groupId>
    <artifactId>docbkx-maven-plugin</artifactId>
    <version>2.0.14</version>
    <dependencies>
        <dependency>
            <groupId>net.sf.docbook</groupId>
            <artifactId>docbook-xml</artifactId>
            <version>5.0-all</version>
            <type>zip</type>
            <classifier>resources</classifier>
        </dependency>
    </dependencies>
    <executions>
        <execution>
            <goals>
                <goal>generate-pdf</goal>
            </goals>
            <phase>prepare-package</phase>
            <configuration>
                <sourceDirectory>${project.basedir}/UserManual</sourceDirectory>
                <xincludeSupported>true</xincludeSupported>
                <includes>${project.basedir}/UserManual/UserManual.xml</includes>
                <includes>${project.basedir}/UserManual/**/*.xml</includes>
                <targetDirectory>${project.build.directory}/UserManual</targetDirectory>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

至少目录 target/Usermanual 是伟大的，但它仍然是空的。为什么还是没有输出？我有机会从 docbkx 获得有意义的日志文件吗？mvn ... -X 并没有说明太多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:22:09.473

您的最新示例包含两个包含配置选项，它们不是有效的 Maven 配置。

我的建议是停止尝试覆盖所有这些默认值并接受 docbook 源 xml 的默认位置，至少在最初您对插件感到满意并且可以根据更改诊断出哪些问题时。

无论如何，您`<includes>`应该只是您尝试生成的文档的根 xml 文件，因为它存在于`<sourceDirectory>`. 您不需要包含*所有*xml 文件，而是需要遵循 xincludes 方法，因为您要声明它的用法。有许多项目使用这种机制，您可以查看和复制其用法。

我们的是：[https ://github.com/jetty-project/jetty-documentation](https://github.com/jetty-project/jetty-documentation)

由于我们使用 maven 过滤插件来避免与实体等混淆，因此我们的用法有点复杂。回到您的包含用法，如果您的顶级 docbook 文件是 index.xml，那么您的包含将只是：

```
<includes>index.xml</includes> 
```

不需要表达式或 glob，您可以在需要的地方引入带有`<xi:include>`标签的其他 xml 文档。

# apache-flex - 如何在 Flex 中更新根视图标题

> ID：10100856
> 
> 赞同：0
> 
> 时间：2012-04-11T06:19:13.087
> 
> 标签：apache-flex, flex4, flex4.5, mxml, flexbuilder

有没有办法在运行时更新 Flex 中的根视图标题？

我尝试了一些类似的东西：

`<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" title="{title}" activate="populateTitle()">`

和

`function populateTitle () { title = "updated!"; }`

...但标题没有更新！

# javascript - 在 phonegap 中以编程方式更改页面

> ID：10100859
> 
> 赞同：2
> 
> 时间：2012-04-11T06:19:26.570
> 
> 标签：javascript, iphone, cordova

我正在尝试在 PhoneGap (iPhone) 中以编程方式更改当前的 HTML 页面。目前我正在使用`window.location.href`，但它没有做它的工作。什么是替代解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-29T05:23:42.047

要在使用[PhoneGap](http://phonegap.com/)时动态更改您的 url，您确实应该（甚至可能必须）使用[jQuery mobile](http://jquerymobile.com/)；例如 -

```
$.mobile.changePage('index.html', { 
  dataUrl : "index.html?page=events", data : { 
    'page' : 'events' 
  }, reloadPage : false, changeHash : true 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:36:25.230

我认为您需要使用 ajax 来更改 html 页面。如果您使用的是phoneGap api，那么如果您从一个页面移动到另一个页面，那么我将需要更多时间来加载phoneGap api。所有的 javascript 函数都会再次加载，所以我更喜欢你需要使用 ajax 来加载不同的 HTML 页面。

您需要将 JQuery MObile 与 PhoneGap 一起使用。JQuery Mobile 使用 ajax 加载每个 html 页面

[阅读本文了解更多信息](http://jquerymobile.com/test/docs/pages/page-scripting.html)

[PhoneGap 和 JQuery Mobile](http://jquerymobile.com/test/docs/pages/phonegap.html)

# python - Python中的变量和异常处理——它们混合了吗？

> ID：10100861
> 
> 赞同：-1
> 
> 时间：2012-04-11T06:19:28.120
> 
> 标签：python, exception-handling, beautifulsoup

我正在做一个需要我扫描大量 HTML 文件 (8000+) 的项目。其中一些文件已损坏，但这是文件来源的必然结果，无法修复。

我选择使用 BeautifulSoup4 来查找和提取数据。代码如下：

```
from bs4 import BeautifulSoup

data = open('data\file.html', encoding='utf-8')
soup = BeautifulSoup(data)

tag = soup.find('strong', text="Heading:")

split_tag = str(tag.next_sibling.next_element.next_element).split(", ") 
```

它的作用是打开一个文件，搜索包含文本“标题：”的强标签。然后它用逗号分割这个标签的内容。

但是，如果源文件损坏，则它没有包含文本“标题：”的强标签。因此，在 split_tag 处引发 AttributeError，因为它返回“None”，因此没有任何 next_sibling。

我尝试使用以下方法解决此问题：

```
try:
    split_tag = str(tag.next_sibling.next_element.next_element).split(", ")
except AttributeError:
    pass
else:
    split_tag = str(tag.next_sibling.next_element.next_element).split(", ") 
```

这没有用。我也尝试将其表达为一个函数，但没有运气。

所以我转向你。如果有任何内容，我想要做的是用逗号分割内容。如果没有，脚本应该只是通过。

我非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:59:00.223

这是我将如何重写您的异常处理程序。如果没有这样的标题，那么我们应该期望得到一个零长度的标签列表。

```
from bs4 import BeautifulSoup

data = open('data\file.html', encoding='utf-8')
soup = BeautifulSoup(data)

tag = soup.find('strong', text="Heading:")

try:
    split_tag = str(tag.next_sibling.next_element.next_element).split(", ")
except AttributeError:
    split_tag = []  # zero-length list of tags 
```

但在这种情况下，一个简单的`if`语句应该可以很好地工作，因为在没有找到任何内容时`soup.find()`返回`None`。

```
from bs4 import BeautifulSoup

data = open('data\file.html', encoding='utf-8')
soup = BeautifulSoup(data)

tag = soup.find('strong', text="Heading:")

if tag is None:
    split_tag = []
else:
    split_tag = str(tag.next_sibling.next_element.next_element).split(", ") 
```

在检查 时`None`，最好使用`is`对象身份测试，如上所示。

# iphone - 查找正在使用的 ios 设备

> ID：10100862
> 
> 赞同：1
> 
> 时间：2012-04-11T06:19:30.340
> 
> 标签：iphone, version, device, ios5.1

在我的应用程序中，我需要找到正在使用的 ios 设备。现在我正在使用 ios sdk 5.1

```
struct utsname systemInfo;
uname(&systemInfo);
NSString *platform=[NSString stringWithCString:systemInfo.machine
                                      encoding:NSUTF8StringEncoding]; 
```

上面的代码在 ios SDK 5.0 中完美运行，但在 ios 5.1 中无法运行。我如何在 ios 5.1 中找到设备版本，例如 iphone 3/3G/4/4s 或 ipad/ipad2 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T06:22:41.993

```
NSString *device = [[UIDevice currentDevice]model ] ;
NSLog(@"%@",device); 
```

它为您提供设备名称（iPhone、iPad）

```
float version = [[[UIDevice currentDevice] systemVersion] floatValue];
NSLog(@"%f",version); 
```

它为您提供 ios 版本。不是设备名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:56:09.823

该类[`UIDevice`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)可以告诉您很多关于当前设备及其操作系统的信息，并且可能比 POSIX API`uname`和`sysctl`.

但是，您**不应**使用设备名称来确定是否激活应用中的功能。这将导致您的应用程序在较新的设备上失败，并且您的客户会不高兴。例如，不久前，一些应用程序正在测试名为“iPhone 4”的设备，以启用 Retina 显示图形……当第四代 iPod touch 和 iPhone 4S 出现类似显示器时，这些应用程序并不能很好地适应.

相反，**测试您需要的功能**。`UIDevice`了解屏幕尺寸和外形尺寸（又名“用户界面习语”，iPhone/iPod 与 iPad）。定位服务可以告诉您设备可以提供什么样的定位精度。AVFoundation 可以告诉您是否拥有仅静态或摄像机以及它可以提供的分辨率。一般来说，您可以查看您正在使用的 API 来确定设备是否支持该功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T07:04:34.920

```
// To decide whether device is iPhone-4 or 3
#include <sys/types.h>
#include <sys/sysctl.h>

@interface UIDevice(Hardware)

- (NSString *) platform;

- (BOOL)hasRetinaDisplay;

- (BOOL)hasCamera;

@end

@implementation UIDevice(Hardware)

- (NSString *) platform{
        int mib[2];
        size_t len;
        char *machine;

        mib[0] = CTL_HW;
        mib[1] = HW_MACHINE;
        sysctl(mib, 2, NULL, &len, NULL, 0);
        machine = malloc(len);
        sysctl(mib, 2, machine, &len, NULL, 0);

        NSString *platform = [NSString stringWithCString:machine encoding:NSASCIIStringEncoding];
        free(machine);
        return platform;
}

- (BOOL)hasRetinaDisplay {
          NSString *platform = [self platform];
          BOOL ret = YES;
          if ([platform isEqualToString:@"iPhone1,1"]) {
               ret = NO;
          }
          else
               if ([platform isEqualToString:@"iPhone1,2"])    ret = NO;
          else 
               if ([platform isEqualToString:@"iPhone2,1"])    ret = NO;
          else 
               if ([platform isEqualToString:@"iPod1,1"])      ret = NO;
          else
               if ([platform isEqualToString:@"iPod2,1"])      ret = NO;
          else
               if ([platform isEqualToString:@"iPod3,1"])      ret = NO;
       return ret;
}

- (BOOL)hasMultitasking {
       if ([self respondsToSelector:@selector(isMultitaskingSupported)]) {
            return [self isMultitaskingSupported];
      }
      return NO;

}

- (BOOL)hasCamera {
       BOOL ret = NO;
      // check camera availability
      return ret;
}

@end 
```

# javascript - 如何使用javascript获取Select的显示值

> ID：10100870
> 
> 赞同：11
> 
> 时间：2012-04-11T06:20:00.390
> 
> 标签：javascript

```
<Select>
    <option value="1">One</option>
    <option value="2">Two</option>
    <option value="3">Three</option>
</Select> 
```

我`document.getElementById("Example").value;`用来获取价值。

我想显示文本而不是值。例如。`value=1 --> One`. 我怎样才能得到`One`文本？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-11T06:22:22.193

在纯 JavaScript 中，您可以这样做：

```
const show = () => {
  const sel = document.getElementById("Example"); // or this if only called onchange
  let value = sel.options[sel.selectedIndex].value; // or just sel.value
  let text = sel.options[sel.selectedIndex].text;
  console.log(value, text);
}

window.addEventListener("load", () => { // on load 
  document.getElementById("Example").addEventListener("change",show); // show on change
  show(); // show onload
});
```

```
<select id="Example">
  <option value="1">One</option>
  <option value="2">Two</option>
  <option value="3">Three</option>
</select>
```

jQuery：

```
$(function() { // on load
  var $sel = $("#Example");
  $sel.on("change",function() {
    var value = $(this).val();
    var text = $("option:selected", this).text();
    console.log(value,text)
  }).trigger("change"); // initial call
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<select id="Example">
  <option value="1">One</option>
  <option value="2">Two</option>
  <option value="3">Three</option>
</select>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T06:28:33.903

此处选择的文本和值在页面加载时使用 jquery

```
$(document).ready(function () {
var ddlText = $("#ddlChar option:selected").text();
var ddlValue = $("#ddlChar option:selected").val();
}); 
```

参考这个

[http://csharpektroncmssql.blogspot.in/2012/03/jquery-how-to-select-dropdown-selected.html](http://csharpektroncmssql.blogspot.in/2012/03/jquery-how-to-select-dropdown-selected.html)

[http://praveenbattula.blogspot.in/2009/08/jquery-how-to-set-value-in-drop-down-as.html](http://praveenbattula.blogspot.in/2009/08/jquery-how-to-set-value-in-drop-down-as.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-02T06:04:21.207

这很好用

```
jQuery('#Example').change(function(){ 
    var value = jQuery('#Example').val(); //it gets you the value of selected option 
    console.log(value); // you can see your sected values in console, Eg 1,2,3
}); 
```

# testing - 如何计算错误率？

> ID：10100872
> 
> 赞同：2
> 
> 时间：2012-04-11T06:20:20.027
> 
> 标签：testing, qa, testcase

我们可以根据测试用例的数量计算错误率吗？如果是，那么如何计算错误率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T12:18:40.563

## 错误率：

*   失败的测试用例数/执行的测试用例数。
*   计算您从测试用例中发现的错误数量。测试用例 = 100；发现的错误 = 10；错误率 = 10%

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:36:00.937

假设您有*n 个*测试用例，*x*是真实场景，*y*是错误（错误）场景，所以：

```
n = x + y 
```

在测试和误报期间，如果*n中的**x*为真而*y*为假，则错误计数为*y/n*。例如，您开发了 10 个测试用例，在测试过程中，报告了 4 个错误。那么您可以认为这种情况下的错误率是：

 ***```
Bug rate =  4/10 * 100 = 40% 
```

但是，这不是一个准确的解决方案，因为您可能还需要包含一些其他参数。但这只是一个开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T11:12:34.753

简而言之，N 是测试用例的总数，x 是遇到的测试用例失败的总数（不是错误的总数，因为一个测试用例可能会出现两个或更多错误）。那么错误率 = x/N * 100 = y%...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-10T06:40:52.527

每个案例的错误数量：

错误编号/案例编号***

# model-view-controller - yii - 基于 mongodb 的表单/模态

> ID：10100878
> 
> 赞同：0
> 
> 时间：2012-04-11T06:20:52.643
> 
> 标签：model-view-controller, mongodb, yii

我在我的 yii 项目中使用 mongo db。

我是 yii 和 mvc 的新手。我需要向用户显示数据库中的一些字段。并且还允许他们在单击 时编辑这些字段`edit`。据我所知，我需要一个模态来创建表单。模态应该扩展`CActiveRecord`（因为我允许编辑）。

但我不知道这将如何与 mongodb 一起工作？它与 mysql 非常不同（结构和字段在 mongodb 中不明确）。有些用户有字段（列）`abc`，而有些用户没有。

我正在查看 yii 的 mongodbsuite。但在这个层面上，我很难理解这一点。

如果有人可以给我一个方向，我愿意编写自己的自定义代码。（或者我必须编写自己的代码来破坏 yii/mvc 的感觉。获取所有内容并插入文本框，然后允许用户编辑这些内容）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:51:19.940

我认为这个扩展会对你有所帮助。请检查 - [YIIMongoDBSuite](http://canni.github.com/YiiMongoDbSuite/xhtml_single/index.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-11T07:35:08.683

我建议不要编写自己的代码并进行测试以使其正常工作，最好转向 mysql、oracle 或 Yii 支持的任何东西。它会挽救生命

Yii 支持

1.  SQLite
2.  mysql
3.  PostgreSQL
4.  SQL 服务器
5.  甲骨文

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T07:43:38.600

[在 yiiframework 论坛http://www.yiiframework.com/forum/](http://www.yiiframework.com/forum/)上提出这个问题可能是值得的 ，那里似乎有人在积极使用 yii 和 mongodb。

# iphone - 非视网膜 iPad 应用程序在视网膜显示屏 iPad 上运行良好

> ID：10100883
> 
> 赞同：1
> 
> 时间：2012-04-11T06:21:08.100
> 
> 标签：iphone, ipad, retina-display

我有一个 iPad 应用程序，它没有针对带有视网膜显示屏的新 iPad 进行修改。但是，令我惊讶（令人愉快）的是，该应用程序运行良好，在视网膜显示屏 iPad 上没有任何问题。图形是一样的。我什至没有看到任何像素化问题。有人可以解释一下这背后的原因吗？为了让非视网膜应用程序在视网膜显示 iPad 上以同样的方式工作，苹果是否从头到尾做了一些事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:30:31.033

文本和框架图像是高分辨率的，应用程序不需要做任何事情。

看起来不同的是您随应用程序提供的图像，因此如果您的应用程序具有未准备好视网膜的自定义 UI，它看起来会很糟糕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T06:25:31.663

这同样适用于视网膜 iPhone。文本以双倍密度字体显示，任何嵌入的图像也显示为 x2。在大多数情况下，您对 Retina 显示器所做的唯一更改是添加双倍密度图像，但这是可选的。

编辑：这也适用于在 iPad 上运行的 iPhone 应用程序，有一个巨大的陷阱。如果只有 iPhone 的应用程序在 iPad 上运行，它会以纵向模式显示双倍密度。但是，开发人员实际上可以将他的应用程序放到 iPad 上的唯一方法是将其标记为通用，这意味着它失去了这种支持。

# php - 如何使用 PHP 计算两个日期时间之间的差异？

> ID：10100885
> 
> 赞同：-2
> 
> 时间：2012-04-11T06:21:38.577
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)

我有两个日期的表格：

```
Start Date: 2012-02-10 11:26:00
End Date: 2012-04-25 01:50:00 
```

现在我需要以下面的形式找到这两者之间的区别：

```
 years,  months, days, hours, minutes, seconds 
```

我怎样才能在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:40:07.097

您可以使用[DateTime::diff](http://www.php.net/manual/en/datetime.diff.php)

```
$start_date = new DateTime("2012-02-10 11:26:00");
$end_date = new DateTime("2012-04-25 01:50:00");
$interval = $start_date->diff($end_date);
echo "Result " . $interval->y . " years, " . $interval->m." months, ".$interval->d." days "; 
```

# r - 拆分一列连接的以逗号分隔的数据并将输出重新编码为因子

> ID：10100887
> 
> 赞同：11
> 
> 时间：2012-04-11T06:21:54.950
> 
> 标签：r, split

我正在尝试清理一些输入错误的数据。变量的问题允许从五个选项中选择多个响应，编号为 1 到 5。数据已按以下方式输入（这只是一个示例——实际数据中有更多变量和更多观察值框架）：

```
data
          V1
1    1, 2, 3
2    1, 2, 4
3 2, 3, 4, 5
4    1, 3, 4
5    1, 3, 5
6 2, 3, 4, 5 
```

下面是一些重新创建示例数据的代码：

```
data = data.frame(V1 = c("1, 2, 3", "1, 2, 4", "2, 3, 4, 5", 
                         "1, 3, 4", "1, 3, 5", "2, 3, 4, 5")) 
```

我真正需要的是要更多处理的数据......二进制 - 就像一组“是/否”问题 - 输入一个看起来更像的数据框中：

```
data
    V1.1  V1.2  V1.3  V1.4  V1.5
1      1     1     1    NA    NA
2      1     1    NA     1    NA
3     NA     1     1     1     1
4      1    NA     1     1    NA
5      1    NA     1    NA     1
6     NA     1     1     1     1 
```

实际的变量名目前并不重要——我可以很容易地解决这个问题。此外，缺少的元素是“O”、“NA”还是空白并不重要——这也是我以后可以修复的问题。

我已经尝试使用包中的`transform`函数`reshape`以及使用不同的东西`strsplit`，但我无法做我正在寻找的东西。我还查看了有关 Stackoverflow 的许多其他相关问题，但它们似乎并不是完全相同的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T06:33:12.627

您只需要编写一个函数并使用`apply`. 首先是一些虚拟数据：

```
##Make sure you're not using factors
dd = data.frame(V1 = c("1, 2, 3", "1, 2, 4", "2, 3, 4, 5", 
                         "1, 3, 4", "1, 3, 5", "2, 3, 4, 5"), 
                     stringsAsFactors=FALSE) 
```

接下来，创建一个接收一行并根据需要进行转换的函数

```
make_row = function(i, ncol=5) {
  ##Could make the default NA if needed
  m = numeric(ncol)
  v = as.numeric(strsplit(i, ",")[[1]])
  m[v] = 1
  return(m)
} 
```

然后使用`apply`并转置结果

```
t(apply(dd, 1, make_row)) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-03T16:14:52.110

很长一段时间后，我终于开始创建一个包（[“splitstackshape”](http://cran.r-project.org/web/packages/splitstackshape/index.html)），以有效的方式处理这种数据。因此，为了方便其他人（当然还有一些自我推销），这里有一个紧凑的解决方案。

这个问题的相关函数是`cSplit_e`。

首先，默认设置，保留原始列并`NA`用作填充：

```
library(splitstackshape)
cSplit_e(data, "V1")
#           V1 V1_1 V1_2 V1_3 V1_4 V1_5
# 1    1, 2, 3    1    1    1   NA   NA
# 2    1, 2, 4    1    1   NA    1   NA
# 3 2, 3, 4, 5   NA    1    1    1    1
# 4    1, 3, 4    1   NA    1    1   NA
# 5    1, 3, 5    1   NA    1   NA    1
# 6 2, 3, 4, 5   NA    1    1    1    1 
```

其次，删除原始列并`0`用作填充。

```
cSplit_e(data, "V1", drop = TRUE, fill = 0)
#   V1_1 V1_2 V1_3 V1_4 V1_5
# 1    1    1    1    0    0
# 2    1    1    0    1    0
# 3    0    1    1    1    1
# 4    1    0    1    1    0
# 5    1    0    1    0    1
# 6    0    1    1    1    1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-07T18:21:55.847

这是我第一次回答关于stackoverflow的问题。请让我知道这是否有意义。

我在处理一些 qualtrics 数据时遇到了这个问题。我用 grepl 来解决这个问题。我已经包含了一个指向 r 文档的链接。
[https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/grep](https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/grep)

据我了解，Grepl 在一组数据中查找模式，如果模式存在或不存在，将分别指示 TRUE 或 FALSE。我创建了一个新变量。如果模式存在，那么我将新变量编码为 1。如果模式不存在，那么我将其编码为 0。这是一个问题的样子。

```
data$V1.1<- NULL
data$V1.1<- 0
data$V1.1[grepl (1, data$V1)] <- 1
table (data$V1.1, exclude = FALSE) 
```

然后可以为剩余的问题重复此代码。如果只有几个响应选项，那么此代码应该可以正常工作。但是如果有很多响应选项，那么您可能需要设置一个循环。

# android - 如何获取与按下的按钮相关的数据？

> ID：10100888
> 
> 赞同：1
> 
> 时间：2012-04-11T06:21:55.073
> 
> 标签：android, android-alertdialog, android-button

当用户选择要删除的项目时，我会打开一个 alertDialog 以确保他想要删除它。当我获得 BUTTON_POSITIVE 的 onClick 时，我需要获取要删除的文件名。这在打开 alertDialog 之前是已知的。我尝试使用 setButton(BUTTON_POSITIVE, "Yes", msg) 并在消息中设置文件名，但我不清楚从哪里得到消息？有人可以澄清或提出更好的实施吗？

这是单击删除按钮后运行的代码：

```
public void OnClick(View v)
{
    Button b = (Button)v;
    CharSequence cs = b.getText();
    int id = Integer.parseInt(cs.toString());

    AlertDialog alertDialog;
    Message msg = new Message();
    msg.arg1 = id;

    AlertDialog deleteAlert = new AlertDialog.Builder(this).create();
    deleteAlert.setTitle("Trigger Remove Alert");
    deleteAlert.setMessage("Are you sure you want to remove this trigger?");
    deleteAlert.setButton(AlertDialog.BUTTON_POSITIVE, "Yes", msg);
    deleteAlert.setButton(AlertDialog.BUTTON_POSITIVE, "Yes", new OnClickListener(){

    @Override
    public void onClick(DialogInterface dialog, int which) {               
    //remove Trigger
        //boolean b = RemoveTriggerPOI(aid, id);
    }
    });
    deleteAlert.setButton2("No", new OnClickListener(){

    @Override
    public void onClick(DialogInterface dialog, int which) {
    //...
    }
    });
    deleteAlert.show();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:09:33.143

首先，将您的`id`or定义`cs`为：

```
final int id = Integer.parseInt(cs.toString());
final CharSequence cs = b.getText(); 
```

现在只需在对话框按钮的*onClick*侦听器中使用`cs`and ：`id`

 *```
 deleteAlert.setButton(AlertDialog.BUTTON_POSITIVE, "Yes", new OnClickListener(){

    @Override
    public void onClick(DialogInterface dialog, int which) {               
       //remove Trigger
       //boolean b = RemoveTriggerPOI(aid, id);

       //SIMPLY USE id OR cs HERE. IT SHOULD WORK
    }
    }); 
```*

# java - 使用 ASM 插入字节码

> ID：10100899
> 
> 赞同：3
> 
> 时间：2012-04-11T06:22:29.627
> 
> 标签：java, runtime, bytecode

例如，在 MethodApdaptor 的子类中

```
this.visitLdcInsn(className);
this.visitLdcInsn(methodName);
this.visitMethodInsn(INVOKESTATIC,
            "trace/profiler/Profile",
        "myMethod",
        "(Ljava/lang/String;Ljava/lang/String;)V"); 
```

这段代码在用`visitCode()`and编写时工作正常`visitInsn(int inst)`，但在`isitLocalVariable(name, desc, signature, start, end, index`)中不工作

它不调用 myMethod()。

有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:24:56.610

此方法`visitLocalVariable(String name, String desc, String signature, Label start, Label end, int index)` 仅用于局部变量声明，不能包含任何代码。

# c# - 在 C# 中使用字符串作为输入创建简单的 Excel 工作表

> ID：10100901
> 
> 赞同：21
> 
> 时间：2012-04-11T06:22:51.423
> 
> 标签：c#, c#-4.0, datatable

我正在用 C# 创建 EXcel 工作表。

```
No Of columns:4
Name of columns: SNO, Name, ID, Address 
```

行数没有限制。

```
 SNO   Name      ID   Address
          1     A         1122  XXXX
          2     B         2211  YYYY

         --- ---        ----    --- 
```

我有字符串作为输入

```
 string sno, string name, string Id, string address 
```

我实际上是 C# 背景的新手。

任何人都可以分享他们对它的看法，比如需要的dll等。

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-11T06:27:26.473

如果您包含对[Excel Interop](http://msdn.microsoft.com/en-us/library/ms173186%28v=vs.80%29.aspx)的引用，您可以在系统上安装 Office 进行任何操作。

一个小例子：

```
using Excel = Microsoft.Office.Interop.Excel;

Excel.Application excel = new Excel.Application();
excel.Visible = true;
Excel.Workbook wb = excel.Workbooks.Open(excel_filename);
Excel.Worksheet sh = wb.Sheets.Add();
sh.Name = "TestSheet";
sh.Cells[1, "A"].Value2 = "SNO";
sh.Cells[2, "B"].Value2 = "A";
sh.Cells[2, "C"].Value2 = "1122";
wb.Close(true);
excel.Quit(); 
```

# wpf - 刚刚加载应用程序时调用 WPF Webbrowser invokescript()

> ID：10100903
> 
> 赞同：3
> 
> 时间：2012-04-11T06:22:52.157
> 
> 标签：wpf, browser, loaded

当应用程序刚刚加载时，我一直在尝试在 WPF 上调用调用脚本。在加载 WPF 后，我将从数据库获取的参数传递给调用脚本。但是，我不断收到未知名称。（来自 HRESULT 的异常：0x80020006 (DISP_E_UNKNOWNNAME)）错误。我加载了 webbrowser 控件并添加了导航事件控件。

```
 Uri uri = new Uri(@"pack://application:,,,/Navigator.htm");
        Stream source = Application.GetContentStream(uri).Stream;
        wbNavigator.NavigateToStream(source);

        wbNavigator.Navigated +=new NavigatedEventHandler(wbNavigator_Navigated); 
```

我还尝试了 Loaded() 事件 LoadCompleted() 但它们都不起作用。我做了一些研究，其中大多数人说是因为 webbrowser 控件尚未初始化。我什至尝试使用单独的线程调用调用脚本并使用 sleep() 几秒钟，但它仍然不起作用。

应该有一种方法可以在 WPF 刚加载时调用 invokescript() 。如果 WPF 应用程序已经加载，如果我单击调用调用脚本的按钮，我可以让它工作。

# javascript - 如何从每个兄弟姐妹中检索重复的名称值还是错误的？

> ID：10100906
> 
> 赞同：0
> 
> 时间：2012-04-11T06:23:06.187
> 
> 标签：javascript

这是我的对象：

```
var obj = {
a:{ x:1 y:function(){return this.x //works fine},
b:{x:2,y:function(){return this.x // instead of returning 2, it's not returning anything}
} 
```

给这样的名字有什么限制吗？因为每个人都属于它自己的父母，对吧？不过，为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:28:30.567

一旦你删除了几个语法错误，它似乎工作正常：

[http://jsfiddle.net/SBpAF/](http://jsfiddle.net/SBpAF/)

```
var obj = {
     a:{
         x:1,
         y:function(){
             return this.x //works fine
         }},
     b:{
         x:2,
         y:function(){
             return this.x // instead to return 2, not returning anything is it wrong?
         }}
}
console.log(obj.a.y());
console.log(obj.b.y()); 
```

# c# - 通过 Nunit 确定当前正在执行的测试用例

> ID：10100907
> 
> 赞同：5
> 
> 时间：2012-04-11T06:23:06.310
> 
> 标签：c#, nunit, continuous-integration, cruisecontrol.net

我正在使用 Cruisecontrol 构建代码并执行约 200 个测试用例。

有时，由于某些测试用例，构建会挂起，我无法确定它是哪个测试用例。

是否可以在不修改当前测试用例代码的情况下打印当前正在执行的测试用例的名称？

如果是，如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T16:18:34.257

我假设您正在使用 NUnit 进行测试。如果是这样，不要使用`<nunit>`CruiseControl 配置中的块，而是使用`<exec>`任务。在`<buildArgs>`元素中，包括 /labels 命令行参数。这会将信息打印到服务器日志。

而不是使用：

```
<nunit>
    <path>C:\Program Files (x86)\NUnit 2.5.10\bin\net-2.0\nunit-console.exe</path>
    <assemblies>
        <assembly>C:\Projects\Personal\MyTestApp\MyTestApp.Tests\bin\Debug\MyTestApp.Tests.dll</assembly>
    </assemblies>
</nunit> 
```

采用：

```
<exec>
    <executable>C:\Program Files (x86)\NUnit 2.5.10\bin\net-2.0\nunit-console.exe</executable>
    <buildArgs>/labels C:\Projects\Personal\MyTestApp\MyTestApp.Tests\bin\Debug\MyTestApp.Tests.dll</buildArgs>
</exec> 
```

我知道这并不理想，但它会在运行到日志时打印每个测试。然后，您可以使用合并任务将 nunit 输出的 xml 文件合并到您的构建日志中。

首先尝试使用 ccnet 控制台应用程序执行此操作，以便您可以实时查看输出。它应该可以帮助您查看要查找的内容。

向 CruiseControl 提交补丁以将以下行添加到“project\core\tasks\NUnitArgument.cs”文件中也可能会很好：

```
line: 53            argsBuilder.AddArgument("/labels"); 
```

或者您可以添加该行，构建 CruiseControl 并使用您自己的版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T12:19:27.987

TestContext.CurrentContext.Test.Name 将有助于识别当前正在执行的测试用例。推杆

```
Console.WriteLine("Currently Executing Test Case : " + TestContext.CurrentContext.Test.Name); 
```

带有 SetUp 属性的 in 方法将打印当前正在执行的 UT。

# ios - iOS 4.0 - 4.1 设备调试支持安装目录在哪里？

> ID：10100911
> 
> 赞同：1
> 
> 时间：2012-04-11T06:23:31.583
> 
> 标签：ios, xcode, debugging, xcode4, installation

我在中国，`iOS 4.0 - 4.1 Device Debugging Support`下载`old version simulator`大约需要2~3天，因为在中国没有任何苹果的主机，网络非常非常糟糕。

我通常在更新 xcode 之前备份模拟器 SDK，它位于 `/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs`目录中。更新xcode后，我会快速恢复安装旧SDK的目录。

现在，我想知道有`iOS 4.0 - 4.1 Device Debugging Support`目录。我将尝试备份它。我知道这可能行不通，但我想试一试。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:00:57.283

我认为它位于@

> 开发者/平台/iPhoneSimulator.platform/Developer/Applications

# php - 类设计继承/组合

> ID：10100912
> 
> 赞同：0
> 
> 时间：2012-04-11T06:23:31.797
> 
> 标签：php, oop, design-patterns

我必须为一个条件生成一个类图，条件类似于：

> 水果是有颜色的，水果是可以生长的。苹果是水果。他们有种子。种子可以结出新苹果。

在我实施任何设计之前，我想听听一些专家的建议。

我在想这样的事情，但我不是专家，所以请在这里帮助我

```
abstract class Fruit
{
    protected $_color;

    abstract function grow();

    protected function seed(Fruit $fruit)
    {
        return $fruit;
    }
}

class Apple extends Fruit
{

} 
```

如何使用组合或继承来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:28:09.803

有些水果有种子。苹果就是其中一种水果。所以我会使用一个简单的普通继承设计：

```
abstract class Fruit
{
     private $color;

     public function getColor(){/* */};
     public function setColor($color){/* */}

     abstract public function grow();
}

abstract class SeedableFruit extends Fruit
{
    public function seed()
    {
        //Do something
    }
}

class Apple extends SeedableFruit
{
    public function grow()
    {
        //Do something
    }
} 
```

通过这种方式，您无法重用非`SeedableFruit`in a`Fruit`与种子的增长方法的实现，但如果您认为自然进化是如何工作的，那是有道理的......因为在这种情况下，这两种水果有一个共同的祖先，它生长在以同样的方式，因此可以在类层次结构中插入该共同祖先来解决问题。

另一种设计是使用[DecoratorPattern](http://en.wikipedia.org/wiki/Decorator_pattern)来描述可以有种子的水果，然后创建一个带有种子的 Apple，调用类似`new SeedableFruitDecorator(new Apple());`. 但我认为这不是正确的方法，因为**Apple 总是有种子**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:53:29.870

如果我尝试为此创建一个对象，我会想出这个：

```
abstract class Fruit{
protected $color;
protected $age;
public $isSeedless;

public function getColor(){
return $this->color;
}

public function getAge(){
return $this->age;
}

public function setColor($color){\
$this->color = $color;
}

public function setAge($age){
$this->age = $age;
}

abstract function getFruit();
}

class Apple extends Fruit{
protected $appleCount;

public function __construct(){
$this->isSeedless = false;
}

public function getFruit(){
$fruit = new Apple();
return $fruit;
}
} 
```

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:20:29.137

```
 // This is what i would do: 
    using System;
    using System.Collections.Generic;

    namespace ApplesAndFruitsDesign
    {
        class Program
        {
            static void Main(string[] args)
            {
                List<string> colors = new List<string>() { "red" };

                Fruit apple = new Fruit(colors, true, true, 3, "Apple");
                Console.Write("MyFruit Details: Fruit.Name = {0}", apple.FruitName);
                Console.ReadKey();
            }
        }

        public class Fruit
        {
            public List<string> Colors { get; set; }
            public bool CanGrow { get; set; }
            public bool HasSeeds { get; set; }
            public int SeedsCount { get; set; }
            public string FruitName { get; set; }

            public Fruit(List<string> colors, bool canGrow, bool hasSeeds, int seedsCount, string name)
            {
                this.Colors = colors;
                this.CanGrow = canGrow;
                this.HasSeeds = hasSeeds;
                this.SeedsCount = seedsCount;
                this.FruitName = name;
            }

            public List<Fruit> MakeFruitFromSeeds()
            {
                List<Fruit> fruits = new List<Fruit>();
                for (int i = 0; i < this.SeedsCount; i++)
                {
                    Fruit fruit = new Fruit(this.Colors, this.CanGrow, this.HasSeeds, this.SeedsCount, this.FruitName);

                    fruits.Add(fruit);
                }

                return fruits;
            }
        }
    } 
```

# javascript - functionCallOnClose 在 JQuery DOMWindow 插件中不起作用

> ID：10100915
> 
> 赞同：1
> 
> 时间：2012-04-11T06:23:50.610
> 
> 标签：javascript, jquery

[http://jsfiddle.net/VtNaU/](http://jsfiddle.net/VtNaU/)

'functionCallOnOpen' 似乎工作正常，但 'functionCallOnClose'（我真正想使用的那个）似乎不起作用。我也尝试过 .closeDOMWindow click() 但只有在单击关闭按钮时才会调用它——而不是在单击外部区域时（这也会关闭窗口）。这是插件的源代码： [http ://swip.codylindley.com/jquery.DOMWindow.js](http://swip.codylindley.com/jquery.DOMWindow.js)

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
<script src="http://swip.codylindley.com/jquery.DOMWindow.js"></script>
<script type="text/javascript">
$(document).ready(function() {
$('#test1').click(function(event) {
    $.openDOMWindow({ 
        functionCallOnOpen: function () { 
            alert("opening");
        },      
        functionCallOnClose: function () { 
            alert("closing");
        },
        height:100, 
        width:200,
        windowSourceID:'#theWindow'
    }); 
});
});
</script>
<button id="test1">Open Window</button>

<div style="display:none;" id="theWindow"> 
<h1>Test</h1>
<button class="closeDOMWindow">Close</button>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:44:29.870

此脚本有一些问题，但您可以通过使用 jQuery 找到按钮的关闭函数来避免脚本中的这些路径：

[http://jsfiddle.net/cybermonk/Zd78c/](http://jsfiddle.net/cybermonk/Zd78c/)

祝你好运！

# cocoa - Cocoa - 具有大量项目的 NSScrollView

> ID：10100917
> 
> 赞同：2
> 
> 时间：2012-04-11T06:23:53.247
> 
> 标签：cocoa, memory, nsimage, nsscrollview

我有一个`NSScrollView`我要添加一堆的`NSViews`有一个`NSImage`子视图。基本上它是包含在滚动视图中的一长排缩略图。

一切都很好......直到滚动视图中有数千张图像（因为没有创建单独的缩略图图像，图像很大但缩小到缩略图大小）。

似乎最好的办法是释放当前未在滚动视图中显示的图像，并在它们进入视图时将它们加载回内存。支持`NSView`这种类型的通知（类似于iOS 上） `viewWillAppear:`。`viewWillDisappear:`

此外，在 ARC 模式下，如何明确告诉操作系统卸载图像？将设置`NSImage*`为 nil 可以解决问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:53:57.677

我认为最好的方法是创建一个`NSView`拥有图像子视图的自定义子类：

*   对您的方法进行编码`drawRect:`，以便仅绘制与*dirtyRect*相交的那些图像。
*   将您的自定义视图嵌入为`NSScrollView`.
*   随着图像的添加/删除（如果可能的话），您需要重新计算视图大小并调用`[super setFrameSize:]`，以便滚动视图知道更改滚动条长度等。
*   `setFrameSize`如果您在调整视图大小时更改布局（如果您的视图中有布局的概念），则覆盖以重新布局并修改大小。

你没有在你的问题中说你面临什么问题；它们是内存还是性能（或两者兼而有之）？我不认为不断释放和重新分配子图像会帮助你。

# php - 在页面上对齐这些元素的最佳方法是什么？

> ID：10100918
> 
> 赞同：2
> 
> 时间：2012-04-11T06:24:08.697
> 
> 标签：php, javascript, wordpress, css

对齐此处看到的框的最佳方法是什么：

[http://property.begbies-traynor.com](http://property.begbies-traynor.com)

有问题的框是“更多详细信息”框。无论描述长度如何，我都希望它们都能在页面上完美排列。

最好使用 CSS 吗？JS？还是硬编码的php？

该网站基于 wordpress，使用自定义主题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T06:35:05.967

设置每个容器，例如：

`<div class="post-3283 sale type-sale status-publish hentry ts-box box-4 clear">`

要有一个额外的类，并在其中设置：

`height:370px;` `position:relative;`

然后，给每个`<p>`持有绿色按钮的人一个类，并给出规则：

`position:absolute;` `bottom:0;`

您可以通过设置这些添加的规则来测试这一点`ts-box`，并给出一个`p`后一个定位规则。

**编辑：**这是一个说明这个概念的小提琴。忽略`float`、`width`和`border`属性，它们仅用于概念化：http: [//jsfiddle.net/aTtAW/](http://jsfiddle.net/aTtAW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:38:50.567

我会为此选择 CSS`min-height`属性`<p>`并将其设置为`100-200`. 这将使特别长的文本提高框，但通常你会有很好的对齐按钮。

不要用 隐藏文本`overflow`。它很丑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T06:31:13.890

CSS 将是我最好的选择。您可以为隐藏溢出的描述框设置一个固定高度（以便隐藏任何额外的描述文本），并且在描述框的正下方有另一个 div 来保存“更多详细信息”框。这样，所有“更多详细信息”框都将位于一条直线上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T06:31:37.260

给描述容器一个类并在css中为其设置一个高度

# database - 插入一对多关系，来自同一个表的两个外键。实体框架 3.5

> ID：10100922
> 
> 赞同：0
> 
> 时间：2012-04-11T06:24:25.803
> 
> 标签：database, linq, entity-framework, linq-to-entities

![在此处输入图像描述](../Images/13b80d4fb8cdb26e3779232e68136531.png)
在我的场景中，我与单个表有多对多的关系。所以在 Player_VsMode 我有两个 Player 表的外键。一个是给玩家的，第二个是给对手的。当我试图在表 Player_VsMode 中插入时。在 Player_vsMode 中插入数据一切正常***，但在 Player 中它添加了一行新的对手 Object***。这对我来说没有意义，为什么地狱实体框架会添加这一新的对手行！我的代码是

```
 public Void performVsMode(Player_VsMode vsMode)
    {
        Player playerFromDB = legendWarsEntities.Player.First(v => v.email == vsMode.Player.email);
        Player enemyFromDB = legendWarsEntities.Player.First(v => v.email == vsMode.Opponent.email);
        vsMode.PlayerReference.Value = playerFromDB;
        vsMode.OpponentReference.Value = enemyFromDB;
        legendWarsEntities.AddToPlayer_VsMode(vsMode);
        legendWarsEntities.SaveChanges();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:30:54.253

**我不推荐这个** 只是做了一个工作来告诉项目经理它正在工作:)。

```
 Player playerFromDB = legendWarsEntities.Player.First(v => v.email == vsMode.Player.email);
        Player enemyFromDB = legendWarsEntities.Player.First(v => v.email == vsMode.Opponent.email);
        vsMode.PlayerReference.Value = playerFromDB;
        vsMode.OpponentReference.Value = enemyFromDB;
        //adding records
        legendWarsEntities.SaveChanges();
        //deleting extra Opponent Object!!!
        Player[] playerToDel = legendWarsEntities.Player.Where(v => v.email == vsMode.Opponent.email).ToArray();
        legendWarsEntities.DeleteObject(playerToDel[1]);
        legendWarsEntities.SaveChanges(); 
```

# concurrency - 互斥和同步的区别？

> ID：10100923
> 
> 赞同：22
> 
> 时间：2012-04-11T06:24:27.163
> 
> 标签：concurrency, synchronization, mutual-exclusion

以上两者有什么区别？

我想到了这个问题，因为我发现

1.  **监视器和锁提供互斥**

2.  **信号量和条件变量提供同步**

这是真的？

在搜索时我也发现了这篇[文章](http://www.geekinterview.com/question_details/31515)

请进行任何澄清。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-11T06:52:12.863

**互斥**意味着在任何给定时间点只有一个线程应该能够访问共享资源。这避免了获取资源的线程之间的竞争条件。监视器和锁提供了这样做的功能。

**同步**意味着您同步/排序多个线程对共享资源的访问。
考虑这个例子：
如果你有两个线程，`Thread 1`& `Thread 2`。
`Thread 1`并`Thread 2`并行执行，但在`Thread 1`可以`A`按其顺序执行语句之前，必须按其顺序`Thread 2`执行语句`B`。您需要的是同步。信号量提供了这一点。`A`您在 in语句之前放置一个信号量等待，然后在 .in 语句`Thread 1`之后发布到信号`B`量`Thread 2`。
这确保了您需要的同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T07:55:19.903

理解差异的最好方法是借助一个示例。下面是通过信号量解决经典生产者消费者问题的程序。为了提供互斥，我们通常使用二进制信号量或互斥体，为了提供同步，我们使用计数信号量。

```
BufferSize = 3;

semaphore mutex = 1;              // used for mutual exclusion
semaphore empty = BufferSize;     // used for synchronization
semaphore full = 0;               // used for synchronization

Producer()
 {
  int widget;

   while (TRUE) {                  // loop forever
     make_new(widget);             // create a new widget to put in the buffer
     down(&empty);                 // decrement the empty semaphore
     down(&mutex);                 // enter critical section
     put_item(widget);             // put widget in buffer
     up(&mutex);                   // leave critical section
     up(&full);                    // increment the full semaphore
   }
 }

Consumer()
{
  int widget;

   while (TRUE) {                  // loop forever
     down(&full);                  // decrement the full semaphore
     down(&mutex);                 // enter critical section
     remove_item(widget);          // take a widget from the buffer
     up(&mutex);                   // leave critical section
     consume_item(widget);         // consume the item
  }
} 
```

在上面的代码中，mutex 变量提供了互斥（只允许一个线程访问临界区），而 full 和 empty 变量用于同步（在各个线程之间分配共享资源的访问）。

# javascript - Sencha Touch 大型html渲染很慢

> ID：10100925
> 
> 赞同：0
> 
> 时间：2012-04-11T06:24:37.323
> 
> 标签：javascript, performance, optimization, sencha-touch

我们构建了一个 Sencha Touch 应用程序，它允许搜索和显示 html 文档。没什么特别的，简单的 html 文档，用户可以上下滚动。

一些文档非常大~ 5mb 的纯 html。这些文档会减慢应用程序的速度，有时甚至会崩溃。

你有任何想法如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:34:31.863

5mb 大小的 HTML 文件非常大，即使对于笔记本电脑浏览器也是如此。如果您在移动设备浏览器上运行它，那么它们很可能会崩溃。（黑莓浏览器几乎 100%。）

强烈建议您保持每个 HTML 文件的大小不超过数百 KB（比如说 500 KB）。然后在您的每个 HTML 文件中，为用户提供“阅读更多”按钮以导航到您的 HTML 内容的下一章。

请记住，DOM 越复杂，Sencha Touch 应用程序就会变得越慢，因为它总是必须完全管理您的 DOM 结构。

# javascript - 一张 Ovi 地图上有 2 条或更多路线

> ID：10100926
> 
> 赞同：0
> 
> 时间：2012-04-11T06:24:45.167
> 
> 标签：javascript, ovi

我需要使用 Ovi 映射显示 2 条不同的未连接路线。但我无法让它发挥作用。在谷歌地图中，​​我只需要为每条路线定义一个路由对象，但这似乎在 Ovi 中不起作用。有谁知道怎么做？

作为参考，这里是一条路线的代码：

```
 router = new ovi.mapsapi.routing.Manager();

    var onRouteCalculated = function(observedRouter, key, value)
    {
        if (value == "finished") 
        {
            var routes = observedRouter.getRoutes();
            var mapRoute = new ovi.mapsapi.routing.component.RouteResultSet(routes[0]).container;
            map.objects.add(mapRoute);
            map.zoomTo(mapRoute.getBoundingBox(), false, "default");
        } 
        else if(value == "failed") 
        {
            alert("The routing request failed.");
        }
    };

    router.addObserver("state", onRouteCalculated);

    var waypoints = new ovi.mapsapi.routing.WaypointParameterList();
    waypoints.addCoordinate(new ovi.mapsapi.geo.Coordinate(x, y))
    // coords are ommited, but just a line for every stop point in Lat/Lng format

    var modes =
    [{
        type: "shortest",
        transportModes: ["car"],
        options: "avoidTollroad",
        trafficMode: "default"
    }];

    router.calculateRoute(waypoints, modes); 
```

制作另一个 ovi.mapsapi.routing.Manager() 对象并将其用于另一个路由不起作用。让现有的处理第二条路线也不起作用

此外，我需要在每个标记上显示一个信息气泡，但我无法找到它们所在的容器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:46:14.157

您最好使用诺基亚地图而不是 Ovi 地图，因为诺基亚地图是 Ovi 地图 API 的 2.0 版本。可以通过创建多个管理器来检索多个路由，然后使用相同的回调 - 下面的示例就是这样做的：

在示例中，A 和 B 标记保存在名为“mapRoute”的容器中，单独的路线保存在名为 routesArr[] 的数组中

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html> 
<head>
        <script type="text/javascript" charset="UTF-8" src="http://api.maps.nokia.com/2.2.0/jsl.js?routing=auto"></script>
    <title>Concurrent Routing example</title>
</head>
<body>

<div id="mapContainer" style="top:30%; width:100%; height:70%; position: absolute;"></div>

<script type="text/javascript">
/////////////////////////////////////////////////////////////////////////////////////
// Don't forget to set your API credentials
//
// Replace with your appId and token which you can obtain when you 
// register on http://api.developer.nokia.com/ 
//
            nokia.Settings.set( "appId", "YOUR APP ID GOES HERE"); 
            nokia.Settings.set( "authenticationToken", "YOUR AUTHENTICATION TOKEN GOES HERE");

//          
/////////////////////////////////////////////////////////////////////////////////////

//initialize a new map 
var display = new nokia.maps.map.Display(document.getElementById("mapContainer"), 
                     {     "components": [  
                                     new nokia.maps.map.component.ZoomBar(),                 
                                     new nokia.maps.map.component.Behavior(),                 
                                     new nokia.maps.map.component.TypeSelector()],     
                                     "zoomLevel": 13,
                                     "center" : [52.500556, 13.398889] }); 

var onAllManagersFinished = function() {     
    for (i = 0; i <routesArr.length; i++){

            console.log(routesArr[i]);

        var mapRoute = new nokia.maps.routing.component.RouteResultSet(routesArr[i]).container;
        display.objects.add(mapRoute);
        display.zoomTo(mapRoute.getBoundingBox(), true);
      }  
};

// we will use the same state observer function for all managers     

var onRouteCalculated = function (observedRouter, key, value) {
  if (value == "finished") {
        routesArr[observedRouter.$index] = observedRouter.getRoutes()[0];
        managersFinished++;
     } else if (value == "failed") {
      // Something has gone horribly wrong  e.g. route too long.
      alert("The routing request failed.");
      managersFinished++;
  }

  if(managersFinished === waypointsArr.length) {
             onAllManagersFinished(); 
        }   

};                 

var  routesArr = new Array();
var  waypointsArr = new Array();
var  MunichBerlin = new nokia.maps.routing.WaypointParameterList();
MunichBerlin.addCoordinate (new nokia.maps.geo.Coordinate(48.133333, 11.566667));
MunichBerlin.addCoordinate (new nokia.maps.geo.Coordinate(52.500556, 13.398889));

var  BerlinHamburg = new nokia.maps.routing.WaypointParameterList();
BerlinHamburg.addCoordinate(new nokia.maps.geo.Coordinate(52.500556, 13.398889));
BerlinHamburg.addCoordinate(new nokia.maps.geo.Coordinate(53.565278, 10.001389));

waypointsArr.push(MunichBerlin);
waypointsArr.push(BerlinHamburg);

var  i = waypointsArr.length;  
var  managersFinished = 0; 

// iterate over all route requests, create a manager for each of them, 
// add the observer and call the claculateRoute method 

while(i--) {    
    var router = new nokia.maps.routing.Manager(); 
     router.$index = i;
     router.calculateRoute(waypointsArr[i],  [{ 
                          type: "shortest", 
                          transportModes: ["car"],
                          options: "",
                          trafficMode: "default"
                          }]);
     router.addObserver("state", onRouteCalculated);
} 

</script> 
</body> 
</html> 
```

# django - Django - 用于多个进程的强尼缓存

> ID：10100928
> 
> 赞同：3
> 
> 时间：2012-04-11T06:25:04.107
> 
> 标签：django, django-cache

我已经使用托管在 apache 上的应用程序之一配置了 johnny 缓存。它配置了 memcached 作为后端，在默认端口上运行在同一台机器上。

当多个 Web 客户端通过 apache 时，缓存工作正常。它们都从缓存中读取，任何更新都会使缓存失效。但是，当 python 程序/脚本使用 django（具有 johnny 配置的相同 settings.py）从数据库读取时，它不会从缓存中读取，因此该程序所做的任何更新都不会影响缓存。这让我不得不让 Web 客户端从缓存中读取陈旧的数据。

我在 johnny cache 的文档中没有找到与此相关的任何内容。对这种情况有什么想法吗？

我正在使用 johnny 缓存 0.3.3、django 1.2.5 和 python 2.7。

**编辑：** 要回答评论中的一个问题，我以这种方式从脚本中的数据库中读取-

```
>>> cmp = MyModelClass.objects.get(id=1)
>>> cmp.cust_field_2
u'aaaa' 
```

我知道它不会从缓存中读取，因为我通过触发更新 sql 语句直接更新表，并且更新的值不会反映在我的 Web 客户端中，因为它仍然从缓存中读取。而当我使用 MyModelClass.objects.get(id=1) 重新获取对象时，我的脚本会显示更新的值

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T18:15:53.973

当您运行脚本/管理命令时，似乎没有调用中间件，这就是您看到差异的原因。这在阅读有关中间件的文档时是有道理的，因为它处理请求和视图等自定义脚本中不存在的内容。

我找到了解决这个问题的方法，并且在 Johnny Cache bitbucket repo 中有一个关于它的问题。在您对数据库执行任何操作之前，在您的脚本中放置以下内容：

```
from johnny.middleware import QueryCacheMiddleware
qcm = QueryCacheMiddleware()

# put the code for you script here

qcm.unpatch() 
```

你可以在这里看到更多：

[https://bitbucket.org/jmoiron/johnny-cache/issue/49/offline-caching](https://bitbucket.org/jmoiron/johnny-cache/issue/49/offline-caching)

和这里：

[https://bitbucket.org/jmoiron/johnny-cache/issue/50/johhny-cache-not-active-in-management](https://bitbucket.org/jmoiron/johnny-cache/issue/50/johhny-cache-not-active-in-management)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T20:25:41.217

这是[文档](http://pythonhosted.org/johnny-cache/queryset_cache.html#using-with-scripts-management-commands-asynchronous-workers-and-the-shell)中推荐的方法：

```
from johnny.cache import enable
enable() 
```

**更新：**

我观察到，好像你的 tasks.py 文件一开始就有这个，你不能再使用 settings.py 禁用 johnny 缓存。

我已经报告了这个问题：[https ://github.com/jmoiron/johnny-cache/issues/27](https://github.com/jmoiron/johnny-cache/issues/27)

# git - 如何在不同的 git 克隆安装中忽略对 github 的拉取请求的文件和文件夹？

> ID：10100933
> 
> 赞同：3
> 
> 时间：2012-04-11T06:25:18.810
> 
> 标签：git, github

我对 GitHub 有疑问。

我使用 GitHub 上的远程存储库将副本下载到服务器以安装软件，但每个服务器都需要对名为`/www/inc/config.inc.php`其他文件夹的文件进行一些更改，`www/images/`因为每个安装都是个性化的。

当我调用命令“ `git pull`”以将不同的服务器安装与 GitHub 同步以获取新的更改或版本时，问题就出现了，因为文件`www/inc/config.inc.php`将其内容更改为原始文件或位于 GitHub 上的文件。
我想说 GitHub 不同步我最初运行的每台服务器上的`www/inc/config.inc.php`文件和文件夹进行新安装的命令。`/www/images``git clone`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:26:24.120

我首先想重申您的问题，以确保我理解正确。

您有需要执行或更新的服务器（如果存在）。您在 github 上有安装文件。

对于新安装，您从 github 克隆，然后修改 /www/inc/config.inc.php 文件和 /www/images 文件夹。

当您执行更新时，您将这些更新推送到 github，然后您希望将这些更新从 github 拉到您的各种服务器，但不想合并或覆盖本地更改。

如果我的场景不正确，请发表评论。

假设以上是正确的，这里有一个方法来完成这个：

当您第一次将 repo 克隆到本地服务器时，请在进行本地更改之前创建一个分支。始终将本地存储库保留在您创建的分支上。

```
#clone the repo
git clone git://github.com/you/yourproject.git

#create and checkout a local working branch
git checkout -b workingBranch

#make your changes to configs and other directories freely
...
#when you're done, add and commit those changes
git add .
git commit 
```

当您有更新时要拉到本地计算机

```
#checkout the master branch
git checkout master

#pull to get the latest code
git pull origin master

#checkout the workingBranch again
git checkout workingBranch

#rebase to get the new changes on that branch
git rebase master 
```

这将暂时回滚您在分支上所做的更改，从主分支获取最新提交，然后在新更改之上“重播”您的提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:35:05.090

除非您打算直接在实时服务器树 ( `/www`) 中进行修改，提交它们并将它们推回，否则您不需要直接从`/www`.
即你不需要`/www`成为一个 Git 仓库。

您可以在您的服务器上拉入该 repo 的克隆，然后在您的实时环境中同步您需要的内容（仍在您的服务器上）。
换句话说，你在 git repo 和 live tree 之间保持严格的分离。
这样，您就可以*准确*控制需要更新的内容。

# java - RESTful Web 服务中的文件下载

> ID：10100936
> 
> 赞同：24
> 
> 时间：2012-04-11T06:25:32.110
> 
> 标签：java, rest

我的要求是，我应该向客户端发送一个 10MB 的 zip 文件，并提供一个安静的服务。我在论坛中发现发送`StreamingOutput`对象是更好的方法的代码，但是如何`StreamingOutput`在以下代码中创建对象：

```
@Path("PDF-file.pdf/")
@GET
@Produces({"application/pdf"})
public StreamingOutput getPDF() throws Exception {
  return new StreamingOutput() {
     public void write(OutputStream output) throws IOException, WebApplicationException      
     {
        try {
            //------
        } catch (Exception e) {
            throw new WebApplicationException(e);
        }
     }
  };
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-13T07:53:34.613

它是文件下载的更好方法和简单方法。

```
private static final String FILE_PATH = "d:\\Test2.zip";
@GET
@Path("/get")
@Produces(MediaType.APPLICATION_OCTET_STREAM)
public Response getFile() {
    File file = new File(FILE_PATH);
    ResponseBuilder response = Response.ok((Object) file);
    response.header("Content-Disposition", "attachment; filename=newfile.zip");
    return response.build();

} 
```

对于您要求的代码：

```
@GET
@Path("/helloWorldZip") 
@Produces(MediaType.APPLICATION_OCTET_STREAM)
public StreamingOutput helloWorldZip() throws Exception {
    return new StreamingOutput(){
    @Override
        public void write(OutputStream arg0) throws IOException, WebApplicationException {
            // TODO Auto-generated method stub
            BufferedOutputStream bus = new BufferedOutputStream(arg0);
            try {
                //ByteArrayInputStream reader = (ByteArrayInputStream) Thread.currentThread().getContextClassLoader().getResourceAsStream();     
                //byte[] input = new byte[2048];  
                java.net.URL uri = Thread.currentThread().getContextClassLoader().getResource("");
                File file = new File("D:\\Test1.zip");
                FileInputStream fizip = new FileInputStream(file);
                byte[] buffer2 = IOUtils.toByteArray(fizip);
                bus.write(buffer2);
            } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            }
        }
    };
} 
```

# javascript - 如何识别 cookie 是来自客户端还是服务器端？

> ID：10100940
> 
> 赞同：2
> 
> 时间：2012-04-11T06:25:56.083
> 
> 标签：javascript, asp.net, .net, cookies

浏览器如何区分 cookie 是客户端创建的 (JavaScript) 还是服务器端创建的 (ASP.NET)。是否可以在客户端删除从服务器端创建的 cookie，反之亦然，我正在努力删除使用 ASP.NET 代码隐藏中的 javascript 从客户端创建的 cookie。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T19:32:58.280

> 浏览器如何区分 cookie 是来自客户端（创建的 JavaScript）还是创建的服务器端（Asp.net）。

它没有。饼干就是饼干。

最接近的是*HTTP Only*标志，它允许对 JavaScript 隐藏 cookie。（这为 XSS cookie 盗窃提供了一点防御）。

> 可以在客户端删除从服务器端创建的 cookie，反之亦然

是的。饼干就是饼干。（同样，客户端代码不能触及仅 HTTP 的 cookie）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T19:30:37.720

据我所知，如果没有属性**HttpOnly** [^(owasp)](https://www.owasp.org/index.php/HttpOnly) [^(wikipedia)](http://en.wikipedia.org/wiki/HTTP_cookie#HttpOnly_cookie)是可能的。

在 chrome 中，对于 cookie，有一个字段 - **Accessible by script**，它指示是否设置了 HttpOnly。

# php - PHP：将 Restful 服务代码放在正确位置的位置？

> ID：10100943
> 
> 赞同：4
> 
> 时间：2012-04-11T06:26:10.973
> 
> 标签：php, web-services, rest

我是 PHP 新手，正在尝试在 PHP 中为我的移动应用程序构建 RestFull 服务。我用谷歌搜索，发现根据 Stackoverflow 和其他地方的许多人的建议，最好[使用 PHP 文章创建 REST API 。](http://www.gen-x-design.com/archives/create-a-rest-api-with-php/)

但是在阅读这篇文章时，我像下面这样安排了这段代码，但无法弄清楚给定的最后两个函数，它们应该放在哪里？

PHP对我来说是新语言..所以请帮助我。

```
class RestUtils
{
    public static function processRequest()
    {
        // get our verb
        $request_method = strtolower($_SERVER['REQUEST_METHOD']);
        $return_obj     = new RestRequest();
        // we'll store our data here
        $data           = array();

        switch ($request_method)
        {
            // gets are easy...
            case 'get':
                $data = $_GET;
                break;
            // so are posts
            case 'post':
                $data = $_POST;
                break;
            // here's the tricky bit...
            case 'put':
                // basically, we read a string from PHP's special input location,
                // and then parse it out into an array via parse_str... per the PHP docs:
                // Parses str  as if it were the query string passed via a URL and sets
                // variables in the current scope.
                parse_str(file_get_contents('php://input'), $put_vars);
                $data = $put_vars;
                break;
        }

        // store the method
        $return_obj->setMethod($request_method);

        // set the raw data, so we can access it if needed (there may be
        // other pieces to your requests)
        $return_obj->setRequestVars($data);

        if(isset($data['data']))
        {
            // translate the JSON to an Object for use however you want
            $return_obj->setData(json_decode($data['data']));
        }
        return $return_obj;
    }

    public static function sendResponse($status = 200, $body = '', $content_type = 'text/html')
    {
        $status_header = 'HTTP/1.1 ' . $status . ' ' . RestUtils::getStatusCodeMessage($status);
        // set the status
        header($status_header);
        // set the content type
        header('Content-type: ' . $content_type);

        // pages with body are easy
        if($body != '')
        {
            // send the body
            echo $body;
            exit;
        }
        // we need to create the body if none is passed
        else
        {
            // create some body messages
            $message = '';

            // this is purely optional, but makes the pages a little nicer to read
            // for your users.  Since you won't likely send a lot of different status codes,
            // this also shouldn't be too ponderous to maintain
            switch($status)
            {
                case 401:
                    $message = 'You must be authorized to view this page.';
                    break;
                case 404:
                    $message = 'The requested URL ' . $_SERVER['REQUEST_URI'] . ' was not found.';
                    break;
                case 500:
                    $message = 'The server encountered an error processing your request.';
                    break;
                case 501:
                    $message = 'The requested method is not implemented.';
                    break;
            }

            // servers don't always have a signature turned on (this is an apache directive "ServerSignature On")
            $signature = ($_SERVER['SERVER_SIGNATURE'] == '') ? $_SERVER['SERVER_SOFTWARE'] . ' Server at ' . $_SERVER['SERVER_NAME'] . ' Port ' . $_SERVER['SERVER_PORT'] : $_SERVER['SERVER_SIGNATURE'];

            // this should be templatized in a real-world solution
            $body = '<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
                        <html>
                            <head>
                                <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
                                <title>' . $status . ' ' . RestUtils::getStatusCodeMessage($status) . '</title>
                            </head>
                            <body>
                                <h1>' . RestUtils::getStatusCodeMessage($status) . '</h1>
                                <p>' . $message . '</p>
                                <hr />
                                <address>' . $signature . '</address>
                            </body>
                        </html>';

            echo $body;
            exit;
        }
    }

    public static function getStatusCodeMessage($status)
    {
        // these could be stored in a .ini file and loaded
        // via parse_ini_file()... however, this will suffice
        // for an example
        $codes = Array(
            100 => 'Continue',
            101 => 'Switching Protocols',
            200 => 'OK',
            201 => 'Created',
            202 => 'Accepted',
            203 => 'Non-Authoritative Information',
            204 => 'No Content',
            205 => 'Reset Content',
            206 => 'Partial Content',
            300 => 'Multiple Choices',
            301 => 'Moved Permanently',
            302 => 'Found',
            303 => 'See Other',
            304 => 'Not Modified',
            305 => 'Use Proxy',
            306 => '(Unused)',
            307 => 'Temporary Redirect',
            400 => 'Bad Request',
            401 => 'Unauthorized',
            402 => 'Payment Required',
            403 => 'Forbidden',
            404 => 'Not Found',
            405 => 'Method Not Allowed',
            406 => 'Not Acceptable',
            407 => 'Proxy Authentication Required',
            408 => 'Request Timeout',
            409 => 'Conflict',
            410 => 'Gone',
            411 => 'Length Required',
            412 => 'Precondition Failed',
            413 => 'Request Entity Too Large',
            414 => 'Request-URI Too Long',
            415 => 'Unsupported Media Type',
            416 => 'Requested Range Not Satisfiable',
            417 => 'Expectation Failed',
            500 => 'Internal Server Error',
            501 => 'Not Implemented',
            502 => 'Bad Gateway',
            503 => 'Service Unavailable',
            504 => 'Gateway Timeout',
            505 => 'HTTP Version Not Supported'
        );

        return (isset($codes[$status])) ? $codes[$status] : '';
    }
}

class RestRequest
{
    private $request_vars;
    private $data;
    private $http_accept;
    private $method;

    public function __construct()
    {
        $this->request_vars     = array();
        $this->data             = '';
        $this->http_accept      = (strpos($_SERVER['HTTP_ACCEPT'], 'json')) ? 'json' : 'xml';
        $this->method           = 'get';
    }

    public function setData($data)
    {
        $this->data = $data;
    }

    public function setMethod($method)
    {
        $this->method = $method;
    }

    public function setRequestVars($request_vars)
    {
        $this->request_vars = $request_vars;
    }

    public function getData()
    {
        return $this->data;
    }

    public function getMethod()
    {
        return $this->method;
    }

    public function getHttpAccept()
    {
        return $this->http_accept;
    }

    public function getRequestVars()
    {
        return $this->request_vars;
    }
} 
```

/////**我无法放置在正确位置的代码段**////////////////////

///////////////////////////////////////// ///////////////////////////////////////// ////

```
 $data = RestUtils::processRequest();

    switch($data->getMethod)
    {
        case 'get':
            // retrieve a list of users
            break;
        case 'post':
            $user = new User();
            $user->setFirstName($data->getData()->first_name);  // just for example, this should be done cleaner
            // and so on...
            $user->save();
            break;
        // etc, etc, etc...
    }
    /////////////////////////////////
    switch($data->getMethod)
    {
        // this is a request for all users, not one in particular
        case 'get':
            $user_list = getUserList(); // assume this returns an array

            if($data->getHttpAccept == 'json')
            {
                RestUtils::sendResponse(200, json_encode($user_list), 'application/json');
            }
            else if ($data->getHttpAccept == 'xml')
            {
                // using the XML_SERIALIZER Pear Package
                $options = array
                (
                    'indent' => '     ',
                    'addDecl' => false,
                    'rootName' => $fc->getAction(),
                    XML_SERIALIZER_OPTION_RETURN_RESULT => true
                );
                $serializer = new XML_Serializer($options);

                RestUtils::sendResponse(200, $serializer->serialize($user_list), 'application/xml');
            }

            break;
        // new user create
        case 'post':
            $user = new User();
            $user->setFirstName($data->getData()->first_name);  // just for example, this should be done cleaner
            // and so on...
            $user->save();

            // just send the new ID as the body
            RestUtils::sendResponse(201, $user->getId());
            break;
    }
    ///////////////////////////////////////////////////////////////////////////////////// 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:49:01.107

看看这个链接，

我们可以使用 CodeIgniter 为您现有的 Web 应用程序创建一个 RESTful API，并演示如何与您自己的 API 或其他 RESTful Web 服务（例如 Facebook 和 Twitter）进行交互。

[在 CodeIgniter 中使用 Restful 服务](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/)

愿这对您有所帮助。

# vba - VB MS Word：将 XML 绑定到有序列表中？

> ID：10100944
> 
> 赞同：0
> 
> 时间：2012-04-11T06:26:27.653
> 
> 标签：vba, ms-word, ms-office

有没有办法将有序列表绑定到 MS Word 中的 XML 文档？

目前我有xml，例如：

```
<?xml version="1.0"?>
<myvars>
  <name>foo</name>
</myvars> 
```

然后我加载并将其映射到内容控件：

```
ActiveDocument.CustomXMLParts.Add
ActiveDocument.CustomXMLParts(5).Load ("c:\test.xml") 

Dim strXPath1 As String
strXPath1 = "/myvars/name"
ActiveDocument.ContentControls(1).XMLMapping.SetMapping strXPath1 
```

但是，这仅对单个文本有用。无论如何将xml输入映射到有序列表？例如：

```
 <?xml version="1.0"?>
    <myvars>
      <person>
         <name>foo</name>
         <alias>bar</alias>
         <alias>chew</alias>
      </person>             
      <person>
         <name>alpha</name>
         <alias>bravo</alias>
         <alias>charlie</alias>
      </person>             
    </myvars> 
```

映射到 word 文档中，使其显示为有序列表：

```
1\.   foo
     a. bar
     b. chew
2\.   alpha
     a. bravo
     b. charlie 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T01:46:45.387

基本上，答案是你不能。您只能将简单文本和组合框类型的内容控件映射到 XML。

# vb.net - 是否可以使用 VB.Net BinaryWriter 从文件中存储/检索位数据？

> ID：10100946
> 
> 赞同：0
> 
> 时间：2012-04-11T06:26:40.827
> 
> 标签：vb.net, binary, data-storage

好的，我需要从 3.268.760 位长的数据表中存储/检索一点。

```
Using w As New BinaryWriter(File.Open("test.bin", FileMode.Create))
    for x = 1 to 3268760
        For i = 1 To 3268760
            w.Write(countBits(bitLikeness(u(i), u(x))) > 10)
        Next
     Next
End Using 
```

存储一个布尔值，`w.write(?)`对于 false/true 值表示 0/1，但 Vb.net 似乎使用整个字节来存储这些数据，这对我的表来说太贵了（3.268.760^2）

有没有一种实用的方法可以使用 vb.net 从文件中存储/检索单个位？（意味着尽可能少地转换为其他类型）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:59:03.167

包装 BinaryReader/Writer 可能是您最好的选择。

```
Public Class BitWriter

    Private ReadOnly mBinaryWriter As BinaryWriter

    Private mBuffer As Integer
    Private mBufferCount As Integer

    Public Sub New(binaryWriter As BinaryWriter)
        mBinaryWriter = binaryWriter
    End Sub

    Public Sub WriteBit(bit As Boolean)

        If mBufferCount = 32 Then

            mBinaryWriter.Write(mBuffer)

            mBuffer = 0
            mBufferCount = 0

        End If

        If bit Then mBuffer = mBuffer Or (1 << mBufferCount)

        mBufferCount += 1

    End Sub

    Public Sub Flush()

        mBinaryWriter.Write(mBuffer)

        mBuffer = 0
        mBufferCount = 0

    End Sub

End Class 
```

并读回这些位

```
Public Class BitReader

    Private ReadOnly mBinaryReader As BinaryReader

    Private mBuffer As Integer
    Private mBufferCount As Integer

    Public Sub New(binaryReader As BinaryReader)
        mBinaryReader = binaryReader
        mBuffer = -1
    End Sub

    Public Function ReadBit() As Boolean

        If mBuffer = -1 OrElse mBufferCount = 8 Then

            mBuffer = mBinaryReader.ReadInt32()
            mBufferCount = 0

        End If

        Dim toReturn As Boolean = ((mBuffer >> mBufferCount) And 1) = 1

        mBufferCount += 1

        Return toReturn

    End Function

End Class 
```

# c# - C# - 将数据表值存储在数组中

> ID：10100948
> 
> 赞同：0
> 
> 时间：2012-04-11T06:26:44.573
> 
> 标签：c#, asp.net, sql, datatable

我想将选择查询的结果存储在 C# 中的数组中。请告诉我如何获取数据表值并存储在数组中。我的选择查询结果包含 n 行，只有一列。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T06:31:21.613

替换`type`为单列的数据类型（例如`int`，、`string`...）和`myField`单列的名称。

```
var myArray = (from row in myDataTable.AsEnumerable()
               select row.Field<type>("myField")).ToArray(); 
```

使用 C# 的泛型和类型推断的魔力，您的数组将自动具有正确的数据类型（例如`int[]`, `string[]`, ...）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T06:30:49.163

尝试这样的事情

```
 private void getData()
        {
            SqlCeConnection conn = new SqlCeConnection("data source='c:\\northwind.sdf'; mode=Exclusive;");
            SqlCeDataAdapter da = new SqlCeDataAdapter("Select [Unit Price] from Products", conn);
            DataTable dtSource = new DataTable();
            da.Fill(dtSource);
            DataRow[] dr = new DataRow[dtSource.Rows.Count];
            dtSource.Rows.CopyTo(dr, 0);
            double[] dblPrice= Array.ConvertAll(dr, new Converter<DataRow , Double>(DataRowToDouble));

        }

        public static double DataRowToDouble(DataRow dr)
        {
            return Convert.ToDouble(dr["Unit Price"].ToString());
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T06:38:43.310

```
DataTable mydt = new DataTable();
ArrayList aLrows = new ArrayList();

foreach (DataRow dataRow in mydt.Rows)
{
  aLrows.Add(string.Join(";", dataRow.ItemArray.Select(item => item.ToString)));
} 
```

# c# - 如何从非托管 C++ dll char** 转换为 C# 字符串并返回

> ID：10100956
> 
> 赞同：0
> 
> 时间：2012-04-11T06:27:39.383
> 
> 标签：c#, c++, pinvoke

我试图在非托管 C++ DLL 上调用一个函数，搜索我接近但我无法让它完全工作的 stackoverflow 帖子。

在 .h 文件中声明如下：

```
extern int SomeDLLMethod(const char **data, int *count); 
```

数据是一个字符串

我在 C# 中声明如下：

```
[DllImport("mydll.dll", CallingConvention = CallingConvention.Cdecl)]
static extern int SomeDLLMethod(IntPtr data, ref int count); 
```

然后我可以从 C# 调用它，如下所示：

```
unsafe
{
    fixed (byte* buffer = new byte[MAX_LENGTH])
    {
        IntPtr ptr = new IntPtr(buffer);
        int count = 0;
        var retVal = SomeDLLMethod(ptr, ref count);
        var dataString = Marshal.PtrToStringAuto(ptr);
        Console.WriteLine(dataString);
     }
 } 
```

调用成功，缓冲区中有计数和数据，但是如何将这个值读回 C# 字符串？

元帅的方法给了我垃圾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:37:37.680

问题中没有足够的信息可以 100% 确定，但我猜你需要这个：

```
[DllImport("mydll.dll", CallingConvention = CallingConvention.Cdecl)]
static extern int SomeDLLMethod(ref IntPtr data, ref int count);
.....
IntPtr data;
int count;
int retval = SomeDLLMethod(ref data, ref count);
string str = Marshal.PtrToStringAnsi(data, count); 
```

理想情况下，当提出这样的问题时，您应该包含本机函数的完整文档。我这样说是因为 char** 可能意味着许多不同的东西。

我的假设是这里的 char** 是指向由 DLL 分配的以 null 结尾的 C 字符串的指针。您的代码假定调用者分配了缓冲区，但如果是这样，那么我希望看到 char* 而不是 char**。

# javascript - 使用 javascript 的标签样式

> ID：10100958
> 
> 赞同：0
> 
> 时间：2012-04-11T06:27:44.310
> 
> 标签：javascript, jquery, html, tabs

**我已经使用 css 和 javascript 创建了选项卡样式界面，只有两个选项卡工作正常。但是我想向它添加更多选项卡，但我不知道如何为它编写 javascript 代码以显示当前活动选项卡及其内容和隐藏所有其他选项卡及其内容**

* * *

以下是我的 html 代码：

```
<div id="container">

    <div id="tabbox">
        <a href="#" id="signup" class="tab signup">Signup</a>
        <a href="#" id="login" class="tab select">Login</a&gt;
    </div>

    <div id="panel">
        <div id="loginbox">Login Form</div>
        <div id="signupbox"&gt;Signup Form</div>
    </div>

</div> 
```

* * *

这是我的 javascript 代码：

```
$(document).ready(function()
{

    $(".tab").click(function()
    {
        var X=$(this).attr('id');

        if(X=='signup')
        {
            $("#login").removeClass('select');
            $("#signup").addClass('select');
            $("#loginbox").slideUp();
            $("#signupbox").slideDown();
        }
        else
        {
            $("#signup").removeClass('select');
            $("#login").addClass('select');
            $("#signupbox").slideUp();
            $("#loginbox").slideDown();
        }

    });

}); 
```

这对于两个选项卡都可以正常工作，但是如果我向其中添加更多选项卡，请说：

```
<div id="container">

      <div id="tabbox">
          <a href="#" id="signup" class="tab signup">Signup</a>
          <a href="#" id="login" class="tab select">Login</a&gt;
          <a href="#" id="basic" class="tab basicinfo">Basicinfo</a>
          <a href="#" id="contact" class="tab contact info">contactinfo</a>
      </div>

      <div id="panel">
          <div id="loginbox">Login Form</div>
          <div id="signupbox"&gt;Signup Form</div>
          <div id="basicbox">Basic information</div>
          <div id="contactbox">Contact information</div>
      </div>

</div> 
```

**然后，如果我使用以前的 javascript 函数，我将不得不向它添加更多行，并且我不知道如何以简洁的方式做到这一点。我必须在我的 javascript 函数中进行哪些更改..**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:38:04.587

我建议如下：

```
$(".tab").click(function()
    {
        var x = this.id, // equivalent to $(this).attr('id'), but slightly faster/more-simple
            show = $('#' + x + 'box');
        if (show.length){
            $('.contentBox').slideUp(500);
            show.slideDown(500);
        }

    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Kn5vm/)。

或以下（等同于上述，但使用回调）：

```
$(".tab").click(function()
    {
        var x = this.id,
            show = $('#' + x + 'box');
        if (show.length){
            $('.contentBox')
                .slideUp(500,
                         function(){
                             show.slideDown(500);
                         });
        }

    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Kn5vm/1/)。

这假设如下：

1.  您要显示的所有“盒子”都具有`contentBox`,
2.  您要显示的“框”的 id 采用`id`单击链接的形式，后跟“框”一词，因此单击`#signup`链接会显示`#signupbox`。

* * *

**编辑**以包含仅 CSS 选项：

使用以下 HTML：

```
<div id="container">

    <div id="tabbox">
        <a href="#signupbox" id="signup" class="tab signup">Signup</a> <!-- note the href -->
        <a href="#loginbox" id="login" class="tab select">Login</a>
    </div>

    <div id="panel">
        <div id="loginbox" class="contentBox">Login Form</div>
        <div id="signupbox" class="contentBox">Signup Form</div>
    </div>

</div>​ 
```

和CSS：

```
.contentBox {
    height: 0;
    -webkit-transition: height 1s linear;
    -moz-transition: height 1s linear;
    -o-transition: height 1s linear;
    -ms-transition: height 1s linear;
    transition: height 1s linear;
    overflow: hidden;
}

.contentBox:target {
    height: 2em;
    -webkit-transition: height 1s linear;
    -moz-transition: height 1s linear;
    -o-transition: height 1s linear;
    -ms-transition: height 1s linear;
    transition: height 1s linear;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Kn5vm/3/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:44:17.017

您正在混合`id`s （必须是唯一的 - 您多次使用它们）并且`classes`以一种奇怪的方式（您在编辑之前做了......）。

对于基本设置，例如：

```
<div id="container">

      <div id="tabbox">
          <a href="#A" class="tab">A</a> <!-- note the URL fragments pointing to actual ids -->
          <a href="#B" class="tab">B</a>
          <a href="#C" class="tab">C</a>
          <a href="#D" class="tab">D</a>
      </div>

      <div id="panel">
          <div id="A" class="tab">A Content</div> <!-- ID attributes are only used once -->
          <div id="B" class="tab">B Content</div>
          <div id="C" class="tab">C Content</div>
          <div id="D" class="tab">D Content</div>
      </div>

</div>​​​​​​​​​​​​​​​​ 
```

你可以只使用几行 jQuery 来让事情正常工作：

```
$('div.tab').hide().first().slideDown(); //show first

$('a.tab').click(function(){
    var targetID = $(this).attr('href'); //store element that triggered the click event
    $('div.tab:visible').slideUp(function(){ //hide visible tab
        $(targetID).slideDown(); //slide down newly selected tab
    });
});​ 
```

看到**[一个工作小提琴](http://jsfiddle.net/BkATJ/2/)**

还可以阅读MDN 上的**[ids](https://developer.mozilla.org/en/DOM/element.id)**和**[classes](https://developer.mozilla.org/En/CSS/Class_selectors)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T06:38:11.893

如果您在打开一个选项卡之前给内容 div 上课，您可以关闭所有其他选项卡，例如

```
$(".tab-content").slideUp();
$("#loginbox").slideDown(); 
```

您还需要知道您单击了哪个选项卡，例如

```
$(".tab").click(function(){
   var id = this.id;
   var current_tab_content = '#'+id+'box';

   $(".tab-content").slideUp();
   $(current_tab_content).slideDown();

  }); 
```

我没有对此进行测试，但希望你能明白这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T06:47:23.507

未经测试，但可能有效：

**Javascript：**

```
$(document).ready(function(event) {

    $("#tabbox a:not(.selected)").click(function() {
        $($("#tabbox a.selected").attr('href')).slideUp();
        $("#tabbox a.selected").removeClass('select');
        $(this).addClass('select');
        $($(this).attr('href')).slideDown();
        event.stopPropagation();
    });

}); 
```

**HTML：**

```
<div id="container">

    <div id="tabbox">
        <a href="#signupbox" id="signup" class="tab signup">Signup</a>
        <a href="#loginbox" id="login" class="tab select">Login</a>
    </div>

    <div id="panel">
        <div id="loginbox">Login Form</div>
        <div id="signupbox">Signup Form</div>
    </div>

</div> 
```

# java - 如何在两个jframe之间设置进度条？

> ID：10100963
> 
> 赞同：2
> 
> 时间：2012-04-11T06:28:36.393
> 
> 标签：java, swing, jframe, jprogressbar

我需要两个 jframe 之间的进度条；即在从一个 jframe 导航到另一个 jframe 时，加载该框架的进度必须显示在进度条中。它还应该显示一条消息，如“请稍候......”。请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T06:36:20.737

1）不要使用两个[JFrames](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)，使用[JDialog](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)而不是......，

2) 最好使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)而不是一堆`JFrames`或`JDialogs`

3）你必须看看[JProgressBar](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)（教程中的例子）

`JProgresBar`4)从[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html)中调用有关进程的代码（教程中的示例）

5)[更多示例](http://www.java2s.com/Code/Java/Swing-JFC/CatalogSwing-JFC.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:31:19.560

使用两个框架的父容器居中？

# asp.net-mvc - html.beginform v old skool 表单标签

> ID：10100965
> 
> 赞同：6
> 
> 时间：2012-04-11T06:28:53.843
> 
> 标签：asp.net-mvc, html-helper, forms

使用 Html.BeginForm 有什么好处？

我们遇到了一些与 html 助手和 razor 生成器视图测试相关的问题，我正在努力寻找阻止我们回到旧 skool 表单标签的好处。

有没有人支持或反对任何一个？

我的意思是：

```
<form action="@Url.Action('Blah')"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:35:17.587

这`Html.BeginForm`很有用，因为它使用 Global.asax 中定义的路由生成 url。（或者您可以使用自己的代码对其进行扩展）

在我看来，使用旧标签既不是最坏的也不是最好的。您只需手动或使用 Url 助手生成您的 url。最后页面中的html将是相同的

```
<form ....>

   html

</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T06:52:42.630

`Html.BeginForm`也 implements `IDisposable`，这意味着表单必须正确关闭。也许这是一件小事，但不关闭`Html.BeginForm`会产生运行时错误，而未关闭的`<form>`标签则不会。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T09:13:38.563

没有没有区别，form标签只是使用路由来生成url，所以如果你使用`@Url.Action`你就可以了

甚至有书籍使用这种方式使用普通的旧标签和 url 助手来生成路线

`ASP.NET MVC Website Programming`是一个例子

* * *

## **编辑**

** 从 Mvc 4 开始没有区别，在 Mvc 4 之前，例如 Mvc 3 要求`Html.BeginForm`使 javascript 不显眼的验证工作

# database - 如何使用带有起始值的自动生成生成休眠 ID

> ID：10100970
> 
> 赞同：6
> 
> 时间：2012-04-11T06:29:05.467
> 
> 标签：database, hibernate, annotations, setter, auto-generate

嗨，我写过这样的代码

> ```
> @Id
> @Column(nullable=false)
> @GeneratedValue(strategy=GenerationType.AUTO)
> public int getUserID() {
>     return UserID; 
> } 
> ```

但我从 DAO 手动设置它，如“e.setUserID(01);” 插入。否则行不插入是否有任何过程可以将值获取到 id 并检索自动生成的值。我想我会得到一些帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T12:47:36.967

使用 IDENTITY 生成类型而不是 auto。使用 Long 作为 id。我还建议将名称从***UserID***更改为***userId***。不要忘记类名的@Entity。

```
@Entity
public class MyClass{

private Long userId;

    @Id 
    @GeneratedValue(strategy=GenerationType.IDENTITY) 
    @Column
    public Long getUserID(){
        return userId;
    }

    //.. rest of class

} 
```

对命名约定要非常小心，并确保您的字段名称和类型与数据库中的字段名称和类型相匹配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T11:48:34.987

利用

```
@GenericGenerator(name="generator", strategy="increment")
@GeneratedValue(generator="generator") 
```

# android - “手动”启动 Android 活动

> ID：10100971
> 
> 赞同：0
> 
> 时间：2012-04-11T06:29:07.997
> 
> 标签：android, android-activity

是否可以使用我的代码维护应用程序生命周期。我的意思是创建和控制活动创建。也许我的 Windows 编程经验搞砸了我的 Android 编程尝试。例如，我想列出已启动的活动并使用我的应用程序类中的代码开始新的活动。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:14:35.210

```
 Intent intent = new Intent(context, RequiredActivity.class);
 startActivityForResult(intent, 0); 
```

希望这会有所帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:34:42.473

> “我想列出已开始的活动”

**=**它由 Android 作为[Activity Stack进行管理](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)

> “使用我的应用程序类中的代码开始新活动”

**=**可以使用[Intent](http://developer.android.com/reference/android/content/Intent.html)

# php - 在 iframe 中使用灯箱

> ID：10100972
> 
> 赞同：0
> 
> 时间：2012-04-11T06:29:08.710
> 
> 标签：php, jquery, iframe, lightbox

我遇到了一些问题。我有一个页面，它通过父页面上的 iframe 调用，并且该页面包含灯箱。当灯箱被调用时，即在 iframe 中打开。

是否有任何过程可以使灯箱出现在整个屏幕上，而不是覆盖 iframe？

我正在使用 php、jquery。希望我能让你理解我的问题。

提前致谢。

# php - 如何从数据库中获取值并将修改后的值更新到cakephp中的数据库？

> ID：10100980
> 
> 赞同：0
> 
> 时间：2012-04-11T06:30:20.567
> 
> 标签：php, database, cakephp, cakephp-1.3

我必须做一个博客作业。当有人添加帖子时，我必须在其中更新一个字段。该字段位于 users 表中，其名称为 no_of_posts。当有人发布内容时，应该检索与登录用户相关的 no_of_posts 值，然后将其递增 1 并更新回数据库。

我正在尝试以下代码，但它没有解决问题。$userid 保存当前用户 ID。

`$userid = $this->Auth->user('id');`

`$userpost = $this->User->query("SELECT no_of_posts FROM users WHERE id = '$userid'");`

`$userpost++;`

`$this->User->query("UPDATE users SET no_of_posts = '$userpost' WHERE id = '$userid'");`

我也尝试使用 find 但它没有用。

`$userpost = $this->User->find('count', array('conditions'=>array('User.id'=>$userid)));`

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:11:52.153

您需要查看 counterCache。只要您正确设置了 Post 模型和 User 模型之间的关系（无论如何您都应该这样做），如果您只需添加几行代码，Cake 就会自动为您跟踪帖子计数。

在 CakePHP Cookbook 中查看此页面：http: [//book.cakephp.org/1.3/en/view/1033/counterCache-Cache-your-count](http://book.cakephp.org/1.3/en/view/1033/counterCache-Cache-your-count)

* * *

至于您在示例中做错了什么：您执行的查询调用返回一个数组，因此您的更新查询失败是合乎逻辑的。

除此之外，使用该`query()`方法确实不是 CakePHP 的做事方式。您真的应该阅读有关模型的 Cookbook 页面，因为现在您没有使用 CakePHP 的全部功能。在这里找到食谱页面：http: [//book.cakephp.org/1.3/en/view/1000/Models](http://book.cakephp.org/1.3/en/view/1000/Models)

# android - 带箭头按钮的动态列表视图适配器

> ID：10100984
> 
> 赞同：1
> 
> 时间：2012-04-11T06:30:36.403
> 
> 标签：android

我有一个`JSON`包含标题和图像的 URL。我想检索所有标题和图像并将它们放入`ListView`带有箭头按钮的动态适配器中，如下面的`Google TV`播放商店。关于如何做到这一点的任何想法？

![在此处输入图像描述](../Images/27af6d4794e9f4857d96d4d05db817eb.png)

<<< 标题1 >>>

```
 image1 - image 2 - image 3 - image 4 - image 5  arrow <<button>> 
```

<<< 标题2 >>>

```
 image1 - image 2 - image 3 - image 4 - image 5  arrow <<button>> 
```

# c - C语言中的聊天客户端？（C网络编程）

> ID：10100986
> 
> 赞同：-1
> 
> 时间：2012-04-11T06:30:45.263
> 
> 标签：c, network-programming

有人可以向我解释这段代码的粗体部分在做什么吗？

```
 while ( 1 )
  {

    **FD_ZERO( &readfds );
    FD_SET( 0, &readfds );   /* add stdin */
    FD_SET( sock, &readfds );**

/* BLOCK on select() */
**select( FD_SETSIZE, &readfds, NULL, NULL, NULL );**

**if ( FD_ISSET( 0, &readfds ) )**
{
  char msg[1024];
  scanf( "%[^\n]", msg );  /* read everything up to the '\n' */
  getchar();  /* read (skip) the '\n' character */

  /* write the message to the socket connection */
  int n = write( sock, msg, strlen( msg ) );
  if ( n < strlen( msg ) )
  {
    perror( "write() failed" );
    return EXIT_FAILURE;
  }
}

**if ( FD_ISSET( sock, &readfds ) )**
{
  char buffer[1024];
  int n = read( sock, buffer, 1024 );
  if ( n < 1 )
  {
    perror( "read() failed" );
  }
  else
  {
    buffer[n] = '\0';
    printf( "Rcvd msg from server: %s", buffer );
  }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:47:29.890

FD_ stuffs 用于保存一组文件描述符，以并行处理不同“*事件”的“等待”。*第一个“粗体”块用两个 fd、标准输入和一个套接字（可能）初始化集合；然后“选择”功能使程序等待这些“文件”，当它们准备好被读取时。当其中一个准备好时，select 函数将控制权交还给您，但现在您无法知道哪个“fd”已准备好；因此 FD_ISSET 允许知道它并处理 if 主体中的情况并做某事（一个或两个都可以准备好）。当 stdin 准备好被读取时，程序从它读取然后写入 sock；当 sock 准备好被读取时，程序会读取它并将读取的内容写入 stdout。

换一种说法，FD_ stuffs 用于 I/O 多路复用。

# python - 如何定位可见面板的元素名称（如果存在其他同名的不可见面板）

> ID：10100990
> 
> 赞同：0
> 
> 时间：2012-04-11T06:30:50.743
> 
> 标签：python, selenium

为了按名称定位元素，我做了：

```
text_field = driver.find_element_by_name('panelHeader') 
```

问题是......有 3 个面板具有相同的名称“panelHeader”，并且根据对特定网页的操作，所需的面板（共 3 个）变得可见。因此，每当我尝试按名称定位元素时，它总是会尝试找到第一个 panelHeader。所以我不能做类似按名称查找元素的操作，这样我表示的名称就是可见面板。

我清楚了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:31:14.097

尝试使用 jQuery 找到它。这就是它在 JAVA 中的实现方式：[使用 JQuery 选择和识别元素以在 Selenium 2 Java API 中使用它](https://stackoverflow.com/questions/5490523/selecting-and-identifying-element-with-jquery-to-use-it-in-selenium-2-java-api)。你的 jQuerySelector 看起来像这样：

```
String jQuerySelector = "'$("*[name='panelHeader'].filter(':visible')")'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:05:33.620

我使用 C#，但我想这在 python 中也是可能的。您可以按名称获取所有元素，然后检查每个元素的“显示”值。例如。（在 C# 中，对不起！：P）

```
ReadOnlyCollection<IWebElement> things = driver.FindElements(By.Name("panelHeader"));
foreach(IWebElement thing in things)
{
    if (thing.displayed)
    {
        //use thing here! :)
    }
} 
```

# jquery - 无法使用手机间隙中的jquery将html页面的高度设置为屏幕大小

> ID：10100991
> 
> 赞同：0
> 
> 时间：2012-04-11T06:30:51.360
> 
> 标签：jquery, cordova

确切的问题是页面超出了屏幕的高度，我想禁用页面中的滚动并希望将页面的高度设置为等于屏幕的高度，我的代码是

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, height=device-height,  initial-scale=1, maximum-scale=1" />
        <title>
        </title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />

        <style>
            /* App custom styles */

            .ui-page { background:#E3D5D4;}
            margin-bottom:40px;

        </style>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js">
        </script>
        <script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js">
        </script>
            <script type="text/javascript">
            $( function() {
                $('#submit').click(function() {
                    window.location.href = "home.html"
                });

            });

         </script>
    </head>
    <body style="margin: 0px; height:50%;width:100%;padding:0px;" scroll="no" onload='sizeContent()'>

        <div  data-role="page" id="page1" style="width:90%;
-webkit-border-radius: 5px 5px 5px 5px;-moz-border-radius: 5px 5px 5px 5px;border-radius: 5px 5px 5px 5px;
        background-color:#E3D9D9;border:20px solid #E71C15;   position: absolute; ">

            <div data-role="content" id="content">
                <div style="width:250px; height:100px; position: relative;  border: 1px solid #b8b8b8;">
                    <img src="images/new_logo.png" alt="image" style="position: absolute;" />
                </div>
                 <br />

                    <div>
                    <font color="#C32E29">
                        <b>
                          <FONT SIZE="4"> Welcome to Tune Talk</FONT>
                            <br />
                            Mobile Self Care
                        </b>
                    </div>
                    <br />
                    <div>
                            <label for="textinput1">
                                User Name/NRIC
                            </label>
                            <input id="textinput1" placeholder="" value="" type="text" />
                   </div>

                <br />
                <div>
                        <label for="textinput2">
                            Password
                        </label>
                        <input id="textinput2" placeholder="" value="" type="password" />

                </div>
                <br />
                <br />

                <div class="ui-grid-a">
                    <div class="ui-block-a">
                       <Input type="image" id="registerbtn" src="images/registerbtn.png" 
                        style="width:97px; padding:5px;  border:1px solid #E3D5D4;" 
                         value="Input type=image" data-role="none"/>
                       <br />
                       <br />
                    </div>
                    <div class="ui-block-b">
                       <Input type="image" id="loginbtn" src="images/loginbtn.png" 
                    style="width:97px; padding:5px;  border:1px solid #E3D5D4;" 
                         value="Input type=image" data-role="none"/>
                    </div>
                </div>

            </div>
        </div>
        <script>
            //App custom javascript
        </script>
    </body>
</html> 
```

任何人都可以帮助我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:58:14.910

添加此元标记。应该为你工作

```
 <meta name="viewport" content="width=device-width; initial-scale=1; user-scalable=no;"> 
```

# android - 使用图库视图将图像放置在底部

> ID：10100993
> 
> 赞同：0
> 
> 时间：2012-04-11T06:30:52.930
> 
> 标签：android, galleryview

我正在阅读图库视图教程：http: [//developer.android.com/resources/tutorials/views/hello-gallery.html](http://developer.android.com/resources/tutorials/views/hello-gallery.html)。无论如何我可以将图像放置在底部而不是顶部？换句话说，我想在图像上方显示 toast 消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:35:58.180

修改你的 res/layout/main.xml 之类的

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
<Gallery
    android:id="@+id/gallery"
    android:layout_alignParentBottom="true"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
</RelativeLayout> 
```

此外，您还可以设置`Toast`位置`toast.setGravity(Gravity.TOP|Gravity.LEFT, 0, 0);`

# c# - 在wpf中单击鼠标时如何使用较低的zindex进行控制？

> ID：10100994
> 
> 赞同：4
> 
> 时间：2012-04-11T06:30:54.630
> 
> 标签：c#, wpf, controls, mouseevent, z-index

我在同一个画布中有几个控件，可能一个被另一个覆盖。它们都具有相同的 zIndex，但是对于加载的顺序，一些向上，另一些向下。如果 Acontrol 超过 Bcontrol，我的问题是，我点击它们，但只有 A 获得点击事件。我怎样才能让 B 也得到这个事件？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T15:57:39.933

如果您只希望后面的那个来获取事件，那么对于第一个前面的所有控件，您必须设置`IsHitTestVisible = False`后面的那个来获取事件 - 但这不是您想要的。

如果您希望他们都获得事件，请将整个 UI 视为元素树。您所说的所有这些控件都是同级控件。当单击某些内容时，父级是第一个得到通知的，如果它不处理单击，它将被传递到该父级在该鼠标位置的可见子元素，依此类推，直到它被处理。阻止被点击的孩子处理鼠标点击的唯一方法是让所有兄弟姐妹的共同父母首先处理该事件。

然后，您必须在父处理程序中执行一些巧妙的操作，以调用鼠标下方所有子元素的单击事件 - 问题在于，虽然框架过去常常努力确定哪个控件在鼠标下方，你现在将不得不做这项艰苦的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:35:26.890

没有机会。即使您将 MouseClick 标记为未处理，它也会路由到父元素（画布）而不是兄弟元素。唯一的方法是命中测试。当用户单击 Acontrol 时，您应该[进行命中测试](http://msdn.microsoft.com/en-us/library/ms608753.aspx)以确定其下是否有另一个控件。

您必须使用带有回调的命中测试。这允许您跳过 Acontrol 以找到 Bcontrol。如果你找到它，你可以将 Bcontrol 视为点击。

# iphone - 当点击 epub 文件的页面时如何更改 iPhone 应用程序的 epub 文件的文本字体大小？

> ID：10100996
> 
> 赞同：3
> 
> 时间：2012-04-11T06:31:01.723
> 
> 标签：iphone, uiwebview, epub

我正在尝试将 epub 文件解析为 UIWebView。我解析成功。但我无法设置字体大小。意味着当点击 epub 文件页面时需要增加字体。我添加了 UISearchBar 但如果我输入了文本，它就无法找到。所以请给我任何建议，如果有人有相关的代码，你可以提供给我。
提前致谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T11:21:04.810

使用此代码它将起作用。

```
-(void)addbtnClicked:(id)sender{

if([sender tag] == 1 && textFontSize < 160){
    //textFontSize = (textFontSize < 160) ? textFontSize +5 : textFontSize;
    textFontSize = textFontSize+5;

    NSLog(@"+ btn");}
else if(textFontSize > 10){
    NSLog(@"- btn");
   // textFontSize = (textFontSize > 50) ? textFontSize -5 : textFontSize;
    textFontSize = textFontSize-5;

}
NSString *jsString = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('body')[0].style.webkitTextSizeAdjust= '%d%%'", 
                      textFontSize];
[webview stringByEvaluatingJavaScriptFromString:jsString];
[jsString release];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T06:06:24.597

您可以使用`NSUserDefaults`增加和减少字体大小。使用两个按钮来增加字体和减少字体。在增加字体大小按钮中添加此代码。请检查此代码。

```
NSUserDefaults *userDefaults1 = [NSUserDefaults standardUserDefaults];
[userDefaults1 setBool:YES forKey:@"btnM1"];
[userDefaults1 synchronize];
textFontSize = (textFontSize < 140) ? textFontSize +5 : textFontSize;
NSString *jsString = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('body')[0].style.webkitTextSizeAdjust= '%d%%'", textFontSize];
[_webview stringByEvaluatingJavaScriptFromString:jsString]; 
```

然后在你`webviewDidFininshLoading:`添加这个

```
NSUserDefaults *menuUserDefaults = [NSUserDefaults standardUserDefaults] if([menuUserDefaults boolForKey:@"btnM1"]){
[_webview setOpaque:NO];
[_webview setBackgroundColor:[UIColor whiteColor]];
NSString *jsString2 = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('body')[0].style.webkitTextFillColor= 'black'"];
[_webview stringByEvaluatingJavaScriptFromString:jsString2]; 
```

同样，您可以通过在减少字体按钮操作中将 +5 替换为 -5 来减少字体，当然也可以更改键值。希望这会有所帮助。

# android - eclipse中的android项目

> ID：10100998
> 
> 赞同：0
> 
> 时间：2012-04-11T06:31:21.330
> 
> 标签：android, eclipse

我正在尝试使用 Eclipse IDE 创建一个 android 项目，它已成功创建，但问题出在错误日志中。创建名为 android_test 的项目后，显示的错误无法加载项目“android_test”的属性文件。

谁能让我知道如何解决这个问题。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:34:07.723

重新开始并确保

*   在您的项目文件夹中具有写/读权限
*   命名事物时避免使用特殊字符（项目/类/文件/等）