# StackOverflow 问答 12275000-12275999

# java - 在 Red Hat Linux 上的 jre 密钥库中安装 ValiCert Class 3 PKI (X.509) 证书

> ID：12275006
> 
> 赞同：0
> 
> 时间：2012-09-05T05:31:31.417
> 
> 标签：java, linux, x509certificate, sslhandshakeexception

我在 Linux 机器上部署了一个 Web 应用程序。现在，在 Web 应用程序中生成 pdf 时，出现以下错误：

```
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target 
```

jre 的密钥库中似乎缺少 ValiCert Class 3 PKI (X.509) 证书。有谁知道如何在 Linux 上下载它？请提供我可以获得所需信息的步骤或链接？

提前感谢！

# java - Java 获取 JTable 值（每行）

> ID：12275011
> 
> 赞同：2
> 
> 时间：2012-09-05T05:31:47.030
> 
> 标签：java, swing, jtable

我想从 Jtable 中获取值，我使用 getvalueat 进行了尝试，但是每当我尝试从 JTable 中获取值时，它只从所选行的第一列中获取值，我需要获取所有值从我选择的 Jtable 中。你能帮我解决这个问题吗

```
here is my code:
class GetTableValue implements ActionListener{
    public void actionPerformed(ActionEvent e){
        AbstractButton button = (AbstractButton)e.getSource();
        if(e.getActionCommand().equals(button.getActionCommand)){
            int row = table.getSelectedRow();
            int col = table.getSelectedColumn();

            Object data = (Object)table.getValueAt(row, col);
            JOptionPane.showMessageDialog(null, data);
        }
    }
} 
```

这是我的操作事件，其中所选表的值显示在 JOptionPane 中，不幸的是它只显示一个值（这是您已经选择的值）而不是整行。

此代码用于我的 Jbutton 调用操作事件（我已经从 JTable 中排除了我的代码，因为它从我的数据库中获取了 Jtable 值）

```
ActionListener tableAction = new GetTableValue();

buttonEdit = new JButton("EDIT");

buttonEdit.addActionListener(tableAction); 
```

代码简单明了，我还搜索 G(google) 先生关于获取行的好教程，不幸的是没有获取 Jtable 值（每行）的好教程。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T06:11:21.130

如果您想要所选行中的所有值，请尝试此[代码](http://www.tutorialdata.com/examples/java/swing/jtable)。

```
int row = jTable1.getSelectedRow();
int column = jTable1.getColumnCount();
for(int i = 0; i < column; i++) {
    System.out.println(jTable1.getValueAt(row, i));
} 
```

[无论jtable](http://www.tutorialdata.com/examples/java/swing/jtable)中有多少列，您都会获得所选行的所有值

如果您想要 jtable 中的所有值，请尝试：

```
int row = jTable1.getRowCount();
int column = jTable1.getColumnCount();
for (int j = 0; j  < row; j++) {
    for (int i = 0; i  < column; i++) {
        System.out.println(jTable1.getValueAt(j, i));
    }
} 
```

是的，您可以使用它`Object[]`来存储值。例如：

```
Object[] val = new Object[column];
for (int k = 0; k  < val.length - 1; k++) {
    for (int j = 0; j  < row; j++) {
        for (int i = 0; i  < column; i++) {
            val[k] = jTable1.getValueAt(j, i);
            System.out.println(val[k]);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T05:37:16.037

`getValueAt`将返回单元格的值（在行/列）。除非您的表模型支持它，否则没有方便的方法（除了您正在做的事情）在单个请求中获取整行。

另外，请记住，如果表格被排序或过滤，模型索引将与视图不匹配，您需要先转换它们，使用[`convertRowIndexToModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#convertRowIndexToModel(int))和[`convertColumnIndexToModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#convertColumnIndexToModel(int))

**更新**

解决它的唯一方法是您使用的表模型是否具有`getRow`（或等效）方法。在不知道如何将数据存储在表模型中的情况下，几乎不可能给出准确的答案，但一般的想法是......

```
public class MyAwesomeTableModel extends AbstractTableModel {
    // All the usual stuff...

    public MyRowData getRowAt(int index) { ... }
} 
```

现在，`MyRowData`是您创建的表数据的任何实现。它可以（最好）是单个对象`Object`，也可以`DefaultTableModel`是对象数组。

```
class GetTableValue implements ActionListener{
    public void actionPerformed(ActionEvent e){
        AbstractButton button = (AbstractButton)e.getSource();
        if(e.getActionCommand().equals(button.getActionCommand)){

            int row = table.convertRowIndexToModel(table.getSelectedRow());
            MyAwesomeTableModel model = (MyAwesomeTableModel)table.getModel();

            MyRowData data = model.getRowAt(row);
            JOptionPane.showMessageDialog(null, data);
        }
    }
} 
```

这完全取决于您如何实现您的`TableModel`以及如何实现您的行数据，但这是一般的 jist

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-18T11:07:42.837

```
private void jTable1MousePressed(java.awt.event.MouseEvent evt) {                                     

int selectedRow;

ListSelectionModel rowSM = jTable1.getSelectionModel();

  rowSM.addListSelectionListener(new ListSelectionListener()
  {
    @Override
    public void valueChanged(ListSelectionEvent e) 
    {
        ListSelectionModel lsm = (ListSelectionModel) e.getSource();

        selectedRow = lsm.getMinSelectionIndex();

        int numCols = jTable1.getColumnCount();

        model = (DefaultTableModel) jTable1.getModel();

        System.out.print(" \n row " + selectedRow + ":");

        for (int j = 0; j < numCols; j++) 
        {
            System.out.print(" " + model.getValueAt(selectedRow, j));
        }

    }
});
} 
```

使用它，您可以获得整行的值，您单击特定行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T05:57:16.777

您可以尝试以下代码来获取选定的行值：

```
int selectedRow = jTableName.getSelectedRow();
selectedRow = jTableName.convertRowIndexToModel(selectedRow);
String val1 = (String)jTableName.getModel().getValueAt(selectedRow, 0);
String val2 = (String)jTableName.getModel().getValueAt(selectedRow, 1); 
```

# php - 如何在按钮单击时切换外部 CSS

> ID：12275012
> 
> 赞同：0
> 
> 时间：2012-09-05T05:32:16.687
> 
> 标签：php, jquery, css, magento, buttonclick

我面临一个问题，我想做这样的事情：

当用户单击切换按钮时，我想切换外部 CSS。

有5个不同的页面；有：

1.  标题
2.  页脚
3.  主页
4.  联系我们
5.  关于我们

我有 2 个外部样式表：

1.  样式.css
2.  样式1.css

默认加载 style.css。

现在，当我单击切换按钮`style1.css`时，必须加载，再次单击切换按钮时`style.css`，必须加载和签证诗句。我想做这样的事情。

有没有人对此有想法。请帮帮我！

CSS 加载在标题上，因此当我单击切换按钮时，我想应用新的`style.css`.

我面临的问题是，当我当时点击任何其他页面时，默认css已设置，但在我的情况下，我不希望当用户点击按钮时，默认 style.css 现在加载 style1.css 是现在加载当用户再次单击按钮 style.css 再次单击加载 style1.css 并再次加载 style.css 我想做这样的事情，这个更改应该存在于整个主要网站！感谢您的宝贵回复，等待更准确的回复-</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:42:17.617

通过做这样的事情：

```
$("a").click(function () {
    $('head').append('<link rel="stylesheet" href="style2.css" type="text/css" />');
}); 
```

请参阅[使用 jQuery 动态应用样式表](http://www.rickardnilsson.net/post/2008/08/02/Applying-stylesheets-dynamically-with-jQuery.aspx)

[**演示**](http://www.rickardnilsson.net/demo/dynamiccss/dynamicCss.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:26:23.447

请参阅[样式表切换器 jQuery](http://lesson8.blogspot.in/2012/07/stylesheet-switcher-jquery.html)

```
<script src="script/jquery-1.6.2.min.js" type="text/javascript"></script>
    <script src="jquery.cookie.js" type="text/javascript"></script>
    <script type="text/javascript">
        if ($.cookie("css")) {
            $("link").attr("href", $.cookie("css"));
        }
        $(document).ready(function () {
            $("#nav li a").click(function () {
                $("link").attr("href", $(this).attr('rel'));
                $.cookie("css", $(this).attr('rel'), { expires: 365, path: '/' });
                return false;
            });
        });
    </script>
    <ul id="nav">
        <li><a href="#" rel="css/metro.blue.css">Original CSS</a></li>
        <li><a href="#" rel="css/metro.green.css">Larger Text</a></li>
        <li><a href="#" rel="css/metro.red.css">Something Different</a></li>
    </ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:01:20.160

```
$url = Mage::helper("core/url")->getCurrentUrl(); // $url contain your current url 

if(!isset($_SESSION['cssfile']) and !isset($_GET['l']))
{
    /*$urlArr = explode("?",$url);
    $tmpUrl = $urlArr[0];
    $tmpUrl .= "?";
    $andP = '';
    $i=1;
    for(;$i<count($urlArr);$i++)
    {
        $tmpUrl .= $andP.$urlArr[$i];
        $andP = '&';
    }
    if($i>1)
        $tmpUrl .= '&l=1';
    else
        $tmpUrl .= 'l=1';*/
    //$urlGet = $tmpUrl;//$url."?l=0";
    $_SESSION['cssfile'] = '1';
}

if(isset($_GET['l']) and $_GET['l']==0)
{
//      $urlGet = $url."?l=1";
    $_SESSION['cssfile'] = '0';
}
else if(isset($_GET['l']) and $_GET['l']==1)
{   
//      $urlGet = $url."?l=1";
    $_SESSION['cssfile'] = '1';
}

if(isset($_SESSION['cssfile']))
{
    $urlArr = explode("?",$url);
    $tmpUrl = $urlArr[0];
    $tmpUrl .= "?";
    $andP = '';
    $found = 0;
    //for($i=1;$i<count($urlArr);$i++)
    foreach($_GET as $key => $val)
    {
        if($key == 'l')
        {
            $found = 1;
            if($val == 1)
                $val = 0;
            else
                $val = 1;
        }
        $tmpUrl .= $andP.$key.'='.$val;
        $andP = '&';
    }
    if($found == 0 && count($_GET)>0)
        if($_SESSION['cssfile'] ==1)
            $tmpUrl .= '&l=0';
        else
            $tmpUrl .= '&l=1';
    else if($found == 0 && count($_GET)==0)
        if($_SESSION['cssfile'] ==1)
            $tmpUrl .= 'l=0';
        else
            $tmpUrl .= 'l=1';
    $urlGet = $tmpUrl;
}

/*if(isset($_SESSION['cssfile']) and $_SESSION['cssfile'] == 'styles1.css' )
{
    $_SESSION['cssfile'] = 'styles.css';
    $_SESSION['cssfile']

}
else
{
    $_SESSION['cssfile'] = 'styles1.css';
}*/
//echo '--'.$_SESSION['cssfile'];
if($_SESSION['cssfile'] ==1){
?>
 <link href="<?php echo  $this->getSkinUrl()?>css/styles1.css" rel="stylesheet" type="text/css"  id="style" />
<?php }else{ ?>
    <link href="<?php echo  $this->getSkinUrl()?>css/styles.css" rel="stylesheet" type="text/css"  id="style"     />
    <?php } ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T05:57:35.450

尝试这个

```
$("#btntoggle").click(function(){
          if($("LINK[href*='style.css']").lenght() > 0){
              $("LINK[href*='style.css']").remove();
              addCss(path + "style1.css");
          }else{
              $("LINK[href*='style1.css']").remove();
              addCss(path + "style.css");
         }
});

function addCss(path){
    var headID = $("head").get(0);       
    var newCss = document.createElement('LINK');
    newCss.rel = 'StyleSheet';
    newCss.type = 'text/css';
    newCss.href= path;
    newCss.media = 'screen';
    headID.appendChild(newCss);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T06:04:22.077

请注意，我在标记中添加了默认样式表，以防用户禁用 JS。所以你会得到某种回退。

```
<!DOCTYPE html>
<html>
    <head>      
        <link rel="stylesheet" href="style1.css">
        <script type="text/javascript" src="../jquery-1.8.0.min.js"></script>
        <script>
            $(function(){   
                $("#change").click(function(){                      
                        $('head link').each(function(){
                            if($(this).attr('rel') == "stylesheet"){
                                if($(this).attr('href') == "style1.css"){
                                    $(this).attr("href","style2.css");
                                } else {
                                    $(this).attr("href","style1.css");
                                }
                            }
                        });
                });
            });
        </script>
    </head>
    <body> 
        <button id="change">Change</button>
    </body>
</html> 
```

# html - 在jquery中上传之前如何获取文件名？

> ID：12275014
> 
> 赞同：2
> 
> 时间：2012-09-05T05:32:28.593
> 
> 标签：html, forms, jquery

我让它工作，所以它可以显示图像，但我也想显示文件名，但以 html 形式作为值。有可能这样做吗？

```
<script>
     $(function () {
            $(".stickybox").stickySidebar({
                speed: 200
            });
          });
          function readURL(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $('#blah')
                            .attr('src', e.target.result)
                            .width(100)
                            .height(100);
                    };

                    reader.readAsDataURL(input.files[0]);
                }
            }
</script>
            <form action="" enctype="multipart/form-data" method="post">
     <center>
    <table>
    <img id="blah" src="#" alt="your image" />
    <tr><td>image</td><td><input type="file" onchange="readURL(this)"  name="image" /></td></tr>
    <tr><td>Name:</td><td><input name="name" value="" type="text"/></td></tr>
    <tr><td><input type="submit" value="upload"/></td></tr>
    </table></center>
    </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T05:38:42.073

您可以通过`name`File 对象的属性访问文件名

```
$('input[name=name]').val(input.files[0].name) 
```

[https://developer.mozilla.org/en-US/docs/DOM/File](https://developer.mozilla.org/en-US/docs/DOM/File)

# c++ - “在所有控制路径上递归，函数将导致运行时堆栈溢出”重载 << 运算符

> ID：12275016
> 
> 赞同：0
> 
> 时间：2012-09-05T05:32:36.897
> 
> 标签：c++, operator-overloading

我有一段代码在编译时似乎有递归警告，有什么想法吗？

```
ostream& operator << (ostream& out, const node& rhs)
    {
        out << rhs.get_data();
        return out;
    } 
```

它正在调用这个函数：

```
node::value_type node::get_data() const
    {
        return data;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:49:44.997

这只是一个猜测，因为您还没有发布一个独立的示例。特别是， 的定义`node`将非常有用。

我认为，出于某种原因，编译器选择转换`rhs.get_data()`为 a `node`，可能使用隐式转换构造函数，而不是选择需要的`operator<<`重载`node::value_type`。你应该：

*   确保`operator << (ostream&, node::value_type)`在定义之前已声明`operator<<`
*   如果`node`有一个构造函数`value_type`，那么最好`explicit`避免意外的隐式转换。

# sql - 在sql server中根据某些条件查找行的总和

> ID：12275020
> 
> 赞同：1
> 
> 时间：2012-09-05T05:32:48.567
> 
> 标签：sql, sql-server, sql-server-2008-r2

嗨，我无法在此查询中找到行总和 -

表格如下：

Master_Choicecode

```
ChoiceCode      MainCourseId    CourseLevelId    InstituteId 
```

Master_MainCourse

```
MainCourseId     MainCourseName   CourseLevelId   CourseProgram
  11                x                1             abc
  12                y                2             xyz 
```

Master_CourseLevel

```
CourseLevelId    CourseLevelName     
   1                deg
   2                Dip 
```

硕士_研究所

```
Instituteid     InstituteName    Statusid
  1001           Insti1          100
  1002           Insti2          200 
```

Master_InstituteStatus

```
StatusId   StatusName
 100            Status1
 200            Status2 
```

现在使用所有这些表我想展示这个：

```
CourseProgram   CourseLevelName  Status1(from Master_InstituteStatus)  Status2(from Master_InstituteStatus) TotalInstitutes
abc             Deg          Count(status1institute)  Count(status2institute)             Total(status1+status2) 
```

现在这是我尝试过的：

```
SELECT B.CourseProgram,C.CourseLevelName,
sum(case when E.InstituteStatusName =' Status1' then 1 else 0 end )as     Status1,
sum(case when E.InstituteStatusName =' Status2' then 1 else 0  end ) as  Status2,
FROM Master_ChoiceCode A 
inner join Master_MainCourse B on A.MainCourseID=B.MainCourseID
inner join Master_CourseLevel C on A.CourseLevelID=C.CourseLevelID  
inner join  Master_Institute D on A.InstituteID=D.InstituteID
inner join Master_InstituteStatus1 E on D.InstituteStatusID1=E.InstituteStatusID
where B.CourseLevelID IN(1,2)
GROUP BY B.CourseProgram,A.CourseLevelID,C.CourseLevelName,E.InstituteStatusName
order by B.CourseProgram,C.CourseLevelName; 
```

有了这个，我得到这样的输出：

```
CourseProgram   CourseLevelName  Status1(from Master_InstituteStatus)     Status2(from Master_InstituteStatus)    
  abc              deg                10(count of status1)                 20(count of status2) 
```

请告诉我应该如何找到 Status1 列和 Status2 列的总和，以便我可以将最后一列作为 Total_No_ of_institutes

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:39:03.353

```
SELECT B.CourseProgram,C.CourseLevelName,
sum(case when E.InstituteStatusName =' Status1' then 1 else 0 end )as     Status1,
sum(case when E.InstituteStatusName =' Status2' then 1 else 0  end ) as  Status2,
sum(case when E.InstituteStatusName IN (' Status1', ' Status2') then 1 else 0  end ) as  Total_No_of_institutes,

FROM Master_ChoiceCode A 
inner join Master_MainCourse B on A.MainCourseID=B.MainCourseID
inner join Master_CourseLevel C on A.CourseLevelID=C.CourseLevelID  
inner join  Master_Institute D on A.InstituteID=D.InstituteID
inner join Master_InstituteStatus1 E on D.InstituteStatusID1=E.InstituteStatusID
where B.CourseLevelID IN(1,2)
GROUP BY B.CourseProgram,A.CourseLevelID,C.CourseLevelName,E.InstituteStatusName
order by B.CourseProgram,C.CourseLevelName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:36:39.993

```
SELECT B.CourseProgram,C.CourseLevelName,
sum(case when E.StatusName=' Status1' then 1 else 0 end )as Status1,
sum(case when E.StatusName=' Status2' then 1 else 0  end ) as  Status2,
FROM Master_ChoiceCode A 
inner join Master_MainCourse B on A.MainCourseID=B.MainCourseID
inner join Master_CourseLevel C on A.CourseLevelID=C.CourseLevelID  
inner join  Master_Institute D on A.InstituteID=D.InstituteID
inner join Master_InstituteStatus1 E on D.InstituteStatusID1=E.InstituteStatusID
where B.CourseLevelID IN(1,2)
GROUP BY B.CourseProgram,A.CourseLevelID,C.CourseLevelName,E.InstituteStatusName
order by B.CourseProgram,C.CourseLevelName; 
```

# java - 在 Spring 中正确使用 Log4jConfigurer

> ID：12275025
> 
> 赞同：3
> 
> 时间：2012-09-05T05:33:20.607
> 
> 标签：java, spring, log4j

在我们的应用程序中，我们决定将 log4j 配置文件命名为自定义名称，以避免无意中从另一个 jar 加载默认文件。要配置它，我们使用`org.springframework.util.Log4jConfigurer`指定 log4j 位置。

```
<bean
    class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetClass">
        <value>org.springframework.util.Log4jConfigurer</value>
    </property>
    <property name="targetMethod">
        <value>initLogging</value>
    </property>
    <property name="arguments">
        <list>
            <value>classpath:com/kilo/custom-log4j.xml</value>
        </list>
    </property>
</bean> 
```

这也有助于将所有配置保留在代码中，让新开发人员开始运行（而不是将其保留在某些`setenv.sh`容器中并单独用于测试用例）。到目前为止，我们非常高兴，直到我们发现 Spring 容器本身的一些有价值的日志记录因此被遗漏了。

```
[ 2012-09-05 00:16:43,188 [main] support.DefaultListableBeanFactory.registerBeanDefinition():618  INFO ]: Overriding bean definition for bean 'beanA': replacing [Generic bean: class [com.kilo.spring.context.log.ClassA]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [com/kilo/spring/context/log/spring-application-context-2.xml]] with [Generic bean: class [com.kilo.spring.context.log.ClassA]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [com/kilo/spring/context/log/spring-application-context-1.xml]]
[ 2012-09-05 00:16:43,235 [main] support.DefaultListableBeanFactory.preInstantiateSingletons():555  INFO ]: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@8453227: defining beans [org.springframework.beans.factory.config.MethodInvokingFactoryBean#0,beanB,beanA]; root of factory hierarchy 
```

如果我通过系统属性配置名称，`log4j.configuration`我可以看到日志。我想如果我们将配置作为静态块放在其中一个类中，这可能会消失 - 但在 Web 应用程序中，这样做似乎很奇怪。我可以使用任何其他技巧吗？随意指出我在这里遵循的任何/所有不正确的范例。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:52:40.750

在Tomcat中，您可以在tomcats中配置这样的字符串`context.xml`

```
<Parameter name="log4j.configuration" value="whereEver"/> 
```

另一种方式是通过 JNDI 进行配置。

*顺便说一句，阅读这个问题[Initializing Log4J with Spring?](https://stackoverflow.com/q/4400583/280244) ，它包含一个链接（在已接受答案的注释中）到通过 jndi 在 servlet 侦听器中配置 log4j 的实现。*

# php - 我的 PHP Implode 函数不起作用

> ID：12275028
> 
> 赞同：0
> 
> 时间：2012-09-05T05:33:55.273
> 
> 标签：php

我正在尝试使这个内爆功能起作用。

这是表单部分，假设所有项目都已被选中。

```
<form method="post">
<select name="test1" multiple="multiple" id="test1">
   <option value="1">item1</option>
   <option value="2">item2</option>
   <option value="3">item3</option>
   <option value="4">item4</option>
   <option value="5">item5</option>
</select>
</form> 
```

PHP部分

```
<?php
$var1 = array();
$joinedString = array();
$var1 = $_POST['test1'];
$joinedString = implode(',', $var1);
?> 
```

但是回显部分不起作用，它给了我错误，并且只显示第一个数组值。

```
<?php
$echo $joinedString[0];
$echo $joinedString[1];
$echo $joinedString[2];
$echo $joinedString[3];
$echo $joinedString[4];
?> 
```

谢谢大家，我是编程新手。我总是忘记逐行执行的代码，总是与变量和值混淆，是的，在现实世界中，我也是一个笨拙和无足轻重的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T05:39:01.313

```
<form method="post" action="sear.php">
 <select name="test1[]" multiple="multiple" id="test1">
   <option value="1">item1</option>
   <option value="2">item2</option>
   <option value="3">item3</option>
   <option value="4">item4</option>
   <option value="5">item5</option>
   <input type="submit" name="submit" value="submit" />
  </select>
</form>
<?php
   $var1 = array();
   $joinedString = array();
   $var1 = $_POST['test1'];
   $joinedString = implode(',', $var1);
   echo $joinedString;
?> 
```

获得帖子值后，它肯定会起作用....尝试一下...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T05:41:18.647

改变

```
<select name="test1" multiple="multiple" id="test1"> 
```

到

```
<select name="test1[]" multiple="multiple" id="test1"> 
```

它已经是一个数组

```
$var1 = $_POST['test1'];
    $imploded = implode(",", $var1);
    echo $imploded;
    //FOR GETTING INDIVIDUAL ITEMS FROM array
    echo $var1[0]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T05:45:24.797

采用

```
<select name="test1[]" multiple="multiple" id="test1"> 
```

在 .php 文件中。

```
$var1 = isset($_POST['test1']) ? $_POST['test1']: 0 ;
print_r($var1); //gives array
foreach($var1 as $var) {
    echo $var;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T05:36:44.773

Implode 没有得到任何数组。它适用于数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T05:37:36.710

您传递的是字符串而不是数组。`implode()`将数组转换为字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T05:39:08.500

在您的脚本中， $_POST['test1'] 将仅包含选择框的提交值，而不是整个值集。由于 $var1 仅包含一个字符串，因此 implode() 将出错。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-05T05:39:38.487

看看这个：

[http://www.tizag.com/phpT/php-string-implode.php](http://www.tizag.com/phpT/php-string-implode.php)

并`$`与变量一起使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-05T05:47:06.587

您正在尝试使用 (,) 对数组进行内**[爆](http://php.net/manual/en/function.implode.php)**，但后数组值不包含用逗号分隔的值，因此您必须使用**[foreach](http://php.net/manual/en/control-structures.foreach.php)**。

```
<?php
$var1 = array();
$joinedString = array();
$var1 = $_POST['test1'];
foreach($var1 as $values)
echo $values."<br/>";
?>

<form method="post">
<select name="test1[]" multiple="multiple" id="test1">
   <option value="1">item1</option>
   <option value="2">item2</option>
   <option value="3">item3</option>
   <option value="4">item4</option>
   <option value="5">item5</option>
</select>
<input type="submit" >
</form> 
```

# java - 如何在java中将汉字转换为十六进制

> ID：12275031
> 
> 赞同：2
> 
> 时间：2012-09-05T05:34:17.747
> 
> 标签：java

我想将代码值在 2 字节、3 字节范围内的 unicode 字符转换为十六进制。

我知道如何将字符转换为十六进制。为此，我首先通过使用 int 进行转换将字符转换为 ascii。然后我使用 Integer.tohexString 转换为十六进制。

但是，我不确定如何处理中文等Unicode字符。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:41:34.617

您不应该将字符串作为 Java 中的字节数组处理...但是如果您愿意，可以使用`getBytes()`

```
byte[] bs = "中文".getBytes("utf-8");
for(byte b : bs)
    System.out.print(Integer.toHexString(b) + " "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:53:50.003

见[我的评论](https://stackoverflow.com/questions/12275031/how-to-convert-chinese-characters-to-hexadecimal-in-java/12275230#comment16461788_12275031)。

> 不要“转换为 ASCII”；Java`char`足够大，可以支持整个[Basic Multilingual Plane](http://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane)，其中应该包含 CJK Han 脚本。

```
/* 七 -> 4e03 */
assert "4e03".equals(Integer.toHexString('七')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:47:16.027

我想你可能想重新考虑你的方法。

一般来说，听起来您想要对这些数据进行某种 I/O。通常，您可以使用字符编码和 java.io Reader/Writer API 来做到这一点。

请参阅 InputStreamReader 和 OutputStreamWriter。

您始终可以将编写器的输出发送到 FileOutputStream（或 ByteArrayOutputStream），以将字符作为二进制数据输出。

```
out = new PrintWriter(new OutputStreamWriter(new FileOutputStream("file"), "utf-8"));
out.println("..."); 
```

如果您想对该数据进行base64编码或仅将其表示为ascii hex，那是一件非常简单的事情。

# sql-server-2008 - 获取sql server 2008中的时间总和

> ID：12275035
> 
> 赞同：0
> 
> 时间：2012-09-05T05:34:46.847
> 
> 标签：sql-server-2008

我有一个表 tblTimesheet，我在其中存储用户计时 hr。像这样

```
Hours
4.01
3.44
0.05
0.04
2.40 
```

我想要的是我正在使用的这些时间段中的一些

```
select sum(hours) from tbltimesheets where workDate='2012-08-30 00:00:00.000' and taskid in (86,3,34) 
```

但它给了我 9.94，我想像 10.34 一样得到它，数据类型是这个字段的**十进制**。

请帮帮我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:54:09.943

像这样的东西怎么样

```
DECLARE @Table TABLE(
        Hrs FLOAT
)
INSERT INTO @Table SELECT 4.01 
INSERT INTO @Table SELECT 3.44 
INSERT INTO @Table SELECT 0.05 
INSERT INTO @Table SELECT 0.04 
INSERT INTO @Table SELECT 2.40

;WITH Vals AS (
        SELECT  SUM(FLOOR(Hrs)) NumHrs,
                SUM((Hrs - FLOOR(Hrs)) * 100) NumMins 
        FROM    @Table
)
SELECT  NumHrs + FLOOR(NumMins / 60) + ((NumMins / 60 - FLOOR(NumMins / 60)) * 60 / 100)
FROM    Vals 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:40:21.073

```
 first hours conet to minute and last step divide by 60.
select (sum(hours*60)/60) from tbltimesheets where workDate='2012-08-30 00:00:00.000' and taskid in (86,3,34) 
```

# jquery - 表单提交时多次调用 ajax

> ID：12275040
> 
> 赞同：3
> 
> 时间：2012-09-05T05:35:01.657
> 
> 标签：jquery, html, ajax

我有一个带有 jQ​​uery 捕获表单提交的 HTML 表单，但由于某种原因，浏览器将 Ajax 调用发送到后端两次。没有 javascript 错误，一切都按预期工作，包括后端返回预期的 json。

我找到了其他具有相同问题的帖子，但没有任何回复对我有帮助。我在下面包含了我的代码。有人对为什么会发生这种情况有任何建议吗？

HTML：

```
<form action="/rating/create/<?php echo $jobId ?>" method="post" id="rating-form">
    <input type="hidden" id="Rating_jobId" name="Rating[jobId]" value="<?php echo $jobId ?>" />
    <input id="Rating_quality" type="slider" name="Rating[quality]" value="0" />
    <input id="Rating_service" type="slider" name="Rating[service]" value="0" />
    <input type="submit" name="submit" value="Submit">
</form> 
```

javascript/jQuery:

```
 $('#rating-form').live('submit', function() {

        var action = $(this).attr('action');

        var dataset = {'Rating':{
                        'jobId':$('#Rating_jobId').val(),
                        'quality':$('#Rating_quality').val(),
                        'service':$('#Rating_service').val(),
                        },'ajax':'true'}

        d = new Date;
        dateCache = d.getTime();
        $.ajax({
            type: "POST",
            url: action +"?"+ dateCache,
            data: dataset,
            datatype: "application/json",
            cache: false
        }).done(function( response ) {

            if(response.success == 'true'){

                $('a.rating-'+ response.jobId).parent().remove();
                $.fancybox.close()

            } else {
                alert( response.error );
            }
         });

        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:38:29.890

您可以通过禁用按钮来避免这种情况，当您单击并完成 ajax 调用时，启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:41:01.573

而不是制作`rating-form').live('submit', function() {}`, 你为什么不做

```
$("form").submit(function () {
  $(this).ajaxSubmit();
  return false;
}) 
```

并包括[jquery.form.js](http://jquery.malsup.com/form/)。对于成功回调，请查看链接！

# layout - Sencha Touch 2 中的布局需要帮助

> ID：12275043
> 
> 赞同：0
> 
> 时间：2012-09-05T05:35:36.397
> 
> 标签：layout, sencha-touch-2

每个人！

我在 Sencha Touch 2 中的应用程序需要这个布局位置。

![需要的布局位置](../Images/b1fee78f140e92a886b7d4f33a150b7e.png)

带有 xtype: 'panel' 的代码正常工作

```
items: [
            {
                xtype:        'panel',
                docked:        'left',
                items:    [
                    {
                        xtype:    'panel',
                        docked:    'top',
                        html:    '1'
                    },
                    {
                        xtype:    'panel',
                        docked:    'top',
                        html:    '2'
                    }
                ]
            },
            {
                xtype:        'panel',
                docked:        'top',
                html:        '3'
            }
        ] 
```

但是，如果我将一个面板替换为 xtype: 'list'

```
items: [
            {
                xtype:        'panel',
                docked:        'left',
                items:    [
                    {
                        xtype:    'panel',
                        docked:    'top',
                        html:    '1'
                    },
                    {
                        xtype:    'list',
                        docked:    'top',
                        store:    'mystore',
                        itemTpl:'<div>{Caption}</div>'
                    }
                ]
            },
            {
                xtype:        'panel',
                docked:        'top',
                html:        '3'
            }
        ] 
```

它不显示在浏览器中，只显示带有 xtype: 'panel' 的面板。我究竟做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:47:28.567

试试绝对位置

```
 {
                    xtype:    'list',
                    docked:    'top',
                    top:    0,
                    bottom:    0,
                    left:    0,
                    right:    0,
                    store:    'mystore',
                    itemTpl:'<div>{Caption}</div>'
                } 
```

同意，这是 Touch 2 令人不快的怪癖之一。

干杯，奥列格

# c++ - 没有可行的重载'='

> ID：12275044
> 
> 赞同：4
> 
> 时间：2012-09-05T05:35:47.893
> 
> 标签：c++, syntax

我现在正在学习 C++ 模拟课程，并且得到标题中引用的 clang++ 错误。我希望有人能告诉我原因，因为我似乎无法在任何地方找到类似情况的类似错误（尽可能搜索）。

每个`Office*`变量定义都会发生错误（第 187 到 190 行）。

```
175 class EventHandler {
176 
177     private:
178     double simulation_time;    // current simulation time
179     Office* aid, bursar, registrar, parking;
180     Event* current_event;
181     MinHeap* time_heap;
182 
183     public:
184 
185     void initialize_simulation() {  // initializes simulation time, offices, and event handler (time_heap)
186         simulation_time = 0;
187         aid = new Office(8, Tf);    // initializes financial aid office with Tf tellers, with serve time exponentially distributed with mean of 8 minutes
188         bursar = new Office(15, Tb);     // initializes bursar office w/ Tb tellers, exp distro, mean 15 min
189         registrar = new Office(5, Tr);    // registrar w/ Tr tellers, exp distro, mean 5 min
190         parking = new Office(10,Tp);       // parking office w/ Tp tellers, exp distro, mean 10
192         MinHeap* time_heap = new MinHeap();
193     } 
```

如果我替换`Office* aid`声明（例如），并更改`aid = new Office(15, Tf)`为`Office* aid = new Office(15, Tf)`，错误就会消失。我不知道为什么，并且非常想这样做，因为我希望所有这些类指针都是`private`.

有趣的是（令人恼火？），`MinHeap* time_heap; time_heap = new MinHeap();`不会引起任何问题。我认为这可能与声明一个指针 var`private` 然后在类的一部分中定义它有关`public`，但它看起来不像。

帮助？=|

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T05:36:41.173

```
Office* aid, bursar, registrar, parking; 
```

声明一个指针和 3 个对象。你可能*认为*你想要：

```
Office *aid, *bursar, *registrar, *parking; 
```

你*实际上*想要：

```
std::unique_ptr<Office> aid;
std::unique_ptr<Office> busar;
std::unique_ptr<Office> parking;
std::unique_ptr<Office> registrar; 
```

并在构造函数初始化列表中初始化它们。如果该类不是资源所有者，请使用`std::shared_ptr`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T05:37:21.107

这里：

```
Office* aid, bursar, registrar, parking; 
```

只有`aid`一个`Office*`，其余的都是`Office`。查看您的代码，看起来您可以通过不使用指针轻松避免问题：

```
Office aid, bursar, registrar, parking; 
```

然后

```
 aid = Office(8, Tf); 
     bursar = Office(15, Tb); 
     registrar = Office(5, Tr);
     parking = Office(10,Tp); 
```

此外，您`initialize_simulation()`似乎设计为只调用一次。您可能最好在构造函数中进行初始化。

```
EventHandler::EventHandler() 
 : aid(8,Tf), bursar(15, Tb), registrar(5, Tr), parking(10, Tp) {} 
```

# android - 在android中的grid-view的行中排列xml数据

> ID：12275047
> 
> 赞同：-1
> 
> 时间：2012-09-05T05:36:32.123
> 
> 标签：android, gridview, xml-parsing

```
<NewDataSet>
<Table>
<Cust_Name>Dev</Cust_Name>
<Order_No>OR00000009</Order_No>
<Freight_Rate>68000</Freight_Rate>
<Station_Name>Chennai</Station_Name>
<Station_Name1>Kolkatta</Station_Name1>
</Table>
<Table>
<Cust_Name>FSL</Cust_Name>
<Order_No>OR00000010</Order_No>
<Freight_Rate>6000</Freight_Rate>
<Station_Name>Mumbai</Station_Name>
<Station_Name1>Pune</Station_Name1>
</Table>
<Table>
<Cust_Name>FSL</Cust_Name>
<Order_No>OR00000011</Order_No>
<Freight_Rate>7000</Freight_Rate>
<Station_Name>Mumbai</Station_Name>
<Station_Name1>Pune</Station_Name1>
</Table>
<Table>
<Cust_Name>FSL</Cust_Name>
<Order_No>OR00000012</Order_No>
<Freight_Rate>7000</Freight_Rate>
<Station_Name>Chennai</Station_Name>
<Station_Name1>Bangalore</Station_Name1>
</Table>
</NewDataSet> 
```

如何在android中的gridview的一行中安排Cust_Name、Order_No、Freight_Rate等？

这是上述 XML 文件的确切链接

“http://54.251.60.177/StudentWebService/StudentDetail.asmx/GetTMSOrders”

*参考来源*

```
 public class GridSample extends Activity 
 {

// All static variables
static final String URL = "http://54.251.60.177/StudentWebService/StudentDetail.asmx/GetTMSOrders";
// XML node keys
static final String KEY_TABLE = "Table"; // parent node
static final String KEY_CUST = "Cust_Name";
static final String KEY_ORDER = "Order_No";
static final String KEY_FREIGHT = "Freight_Rate";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();

    String xml = parser.getXmlFromUrl(URL); // getting XML

    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_TABLE);

    // looping through all item nodes <item>

    for (int i = 0; i < nl.getLength(); i++) 
    {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_CUST, parser.getValue(e, KEY_CUST));
        map.put(KEY_ORDER, parser.getValue(e, KEY_ORDER));
        map.put(KEY_FREIGHT,parser.getValue(e, KEY_FREIGHT));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView

    ListAdapter adapter = new SimpleAdapter(this, menuItems,
    R.layout.grid_item,new String[] { KEY_CUST, KEY_ORDER, KEY_FREIGHT }, 
    new int[] { R.id.name, R.id.desciption, R.id.cost });

    GridView gv = (GridView)findViewById(R.id.gridVi);
    gv.setAdapter(adapter);

    gv.setOnItemClickListener(new OnItemClickListener() 
    {

    public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) 
    {
        // getting values from selected ListItem
        String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
        String cost = ((TextView) view.findViewById(R.id.cost)).getText().toString();
        String description = ((TextView) view.findViewById(R.id.desciption)).getText().toString();

        // Starting new intent
        Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
        in.putExtra(KEY_CUST, name);
        in.putExtra(KEY_ORDER, cost);
        in.putExtra(KEY_FREIGHT, description);
        startActivity(in);
        }
    });
}} 
```

**SingleMenuItemActivity.java**

```
 public class SingleMenuItemActivity  extends Activity {

// XML node keys
static final String KEY_CUST = "Cust_Name";
static final String KEY_ORDER = "Order_No";
static final String KEY_FREIGHT = "Freight_Rate";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_grid_item);

    // getting intent data
    Intent in = getIntent();

    // Get XML values from previous intent
    String cust = in.getStringExtra(KEY_CUST);
    String order = in.getStringExtra(KEY_ORDER);
    String freight = in.getStringExtra(KEY_FREIGHT);

    // Displaying all values on the screen
    TextView lblcust = (TextView) findViewById(R.id.cust_label);
    TextView lblorder = (TextView) findViewById(R.id.Order_label);
    TextView lblfreight = (TextView) findViewById(R.id.freight_label);

    lblcust.setText(cust);
    lblorder.setText(order);
    lblfreight.setText(freight);
}} 
```

**XMLParser.java**

```
public class XMLParser 
{

// constructor
public XMLParser() 
{

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */

public String getXmlFromUrl(String url) 
{
    String xml = null;

    try 
    {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    }

    catch (UnsupportedEncodingException e) 
    {
        e.printStackTrace();
        }

    catch (ClientProtocolException e) 
    {
        e.printStackTrace();
        }

    catch (IOException e) 
    {
        e.printStackTrace();
        }

    // return XML

    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */

public Document getDomElement(String xml)
{
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

    try 
    {

        DocumentBuilder db = dbf.newDocumentBuilder();
        InputSource is = new InputSource();

        is.setCharacterStream(new StringReader(xml));
        doc = db.parse(is); 

        } catch (ParserConfigurationException e) 
        {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) 
        {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) 
        {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */

 public final String getElementValue( Node elem ) 
 {

 Node child;
 if( elem != null)
 {
  if (elem.hasChildNodes())
   {
     for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() )
      {
        if( child.getNodeType() == Node.TEXT_NODE  )
          {
            return child.getNodeValue();
             }
           }
        }
    }
    return "";
}

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) 
 {      
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    }} 
```

非常感谢！..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-05T06:01:35.640

您可以以水平方式设置您的 xml 文件布局，并尝试在该 gridview 中解析 xml

# mysql - 获取查询以列出相同 Id 的特定列的开始值和结束值之间的记录

> ID：12275048
> 
> 赞同：1
> 
> 时间：2012-09-05T05:36:36.150
> 
> 标签：mysql

有一个包含列的表：

```
USE 'table';  
insert into person values   
('11','xxx','1976-05-10','p1'),  
('11','xxx ','1976-06-11','p1'),  
('11','xxx ','1976-07-21','p2'),  
('11','xxx ','1976-08-31','p2'), 
```

任何人都可以向我建议一个查询，以获取该人的开始和结束日期相对于他按时间顺序更改的位置。

我写的查询

```
SELECT PId,Name,min(Start_Date) as sdt, max(Start_Date) as edt, place 
from ** 
group by Place; 
```

只给了我答案的前两行。任何人都可以建议查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:27:23.840

这不漂亮，性能可能很糟糕，但至少它[有效](http://sqlfiddle.com/#!2/c1a86/24)：

```
select min(sdt), edt, place
from (
  select A.Start_Date sdt, max(B.Start_Date) edt, A.place
  from person A
       inner join person B on A.place = B.place
                          and A.Start_Date <= B.Start_Date
       left join person C on A.place != C.place
                         and A.Start_Date < C.Start_Date
                         and C.Start_Date < B.Start_Date
  where C.place is null
  group by A.Start_Date, A.place
) X
group by edt, place 
```

这个想法是，`A`并`B`代表所有的行*对*。`C`将是这两者之间具有不同`place`. 因此，在`C.place is null`限制之后，我们知道`A`并且`B`属于同一范围，即按时间顺序排列一个位置的一组行，它们之间没有其他位置。从所有这些对中，我们想要识别具有最大范围的那些，那些包含所有其他的。我们使用两个嵌套`group by`查询来做到这一点。内部的将为每个可能的开始日期选择最大的结束日期，而外部的将为每个可能的结束日期选择最小的开始日期。结果是描述同一地点的时间顺序后续行的最大范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:37:28.410

这可以通过以下方式实现：

```
SELECT Id, PId,
       MIN(Start_Date) AS sdt,
       MAX(Start_Date) as edt,
       IF(`place` <> @var_place_prev, (@var_rank:= @var_rank + 1), @var_rank) AS rank,
       (@var_place_prev := `place`) AS `place`
FROM person, (SELECT @var_rank := 0, @var_place_prev := "") dummy
GROUP BY rank, Place; 
```

# 示例：[SQLFiddle](http://sqlfiddle.com/#!2/c1a86/23)

如果您想在`ID`那时订购记录：

```
SELECT Id, PId,
       MIN(Start_Date) AS sdt,
       MAX(Start_Date) as edt,
       `place`
FROM(
     SELECT Id, PId,
            Start_Date
            IF(`place` <> @var_place_prev,(@var_rank:= @var_rank + 1),@var_rank) AS rank,
            (@var_place_prev := `place`) AS `place`
     FROM person, (SELECT @var_rank := 0, @var_place_prev := "") dummy
     ORDER BY ID ASC
    ) a
GROUP BY rank, Place; 
```

# trigger.io - Triggerio：设备测试失败率为 49%

> ID：12275052
> 
> 赞同：0
> 
> 时间：2012-09-05T05:36:41.333
> 
> 标签：trigger.io

我已经正确设置了我的证书，但事实并非如此。虽然触发器正在将所有内容复制到设备上（我尝试了一部带有 5.1.1 的 iPhone 4 和一部带有 iOS6 beta 4 的 iPhone 4），但它以 49% 的速度失败。

控制台日志中的行：`[ 49%] Copying PATH/development/ios/device-ios.app//tabs_modalWebViewController.nib to device`

回到控制台日志，如果有帮助，我会找到以下信息： `[ERROR] Failed when running /Users/joshmbrown/forge-workspace/fi-monuments/.lib/fruitstrap` `ShellError: Failed when running PATH/.lib/fruitstrap`

有什么建议么？

我已经重新安装了 Xcode 和正确的命令行实用程序。我还在`xcode-select`终端中执行了一个。还有什么？

# android - 使用任何 android 库绘制曲线

> ID：12275055
> 
> 赞同：3
> 
> 时间：2012-09-05T05:36:47.347
> 
> 标签：android, graph, curve

我找到了几个非常适合我学校项目的 android 图形库，例如[**GraphView**](https://github.com/jjoe64/GraphView) 我的任务是在一张图上显示 3 条生物节律曲线。我查看了许多示例并提供了帮助，但我无法理解如何更改代码以便显示我的生物节律曲线。

```
 // sin curve
    int num = 150;
    GraphViewData[] data = new GraphViewData[num];
    double v = 0;
    for (int i = 0; i < num; i++) {
        v += 0.2;
        data[i] = new GraphViewData(i, Math.sin(v));
    } 
```

三个生物节律循环方程是：

*   物理：sin(2\pi t/23)，
*   情绪化：罪（2\pi t/28），
*   智力：罪（2\pi t/33），

t = 出生后的天数，这个数字是根据用户输入计算得出的，并存储在定义为 differenceInDays 的共享偏好中

如果有人能给我一个例子，那就太棒了，请询问我是否需要更具体（这是我第一次在这个网站上发帖），如果你对 android 中完美的图形库有建议，请告诉我知道 :D

# c - 数组静态分配

> ID：12275056
> 
> 赞同：2
> 
> 时间：2012-09-05T05:36:48.877
> 
> 标签：c, arrays

```
int num = atoi(argv[1]);
unsigned long times[num]; 
```

我有这段代码，我认为它不会编译，因为我试图使用命令行参数中的值分配数组，编译器在编译时不知道该值。但我编译了这段代码，它工作了。有人可以解释这里发生了什么吗？我误解了静态分配的基本概念吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T05:39:45.650

C99 允许使用 var 分配数组。这称为**可变长度数组**，即**VLA**

我手上没有C99，C99的部分是6.7.5.2，以下链接来自网络。

[vla - 维基百科](http://en.wikipedia.org/wiki/Variable-length_array)

[c99 - 维基百科](http://en.wikipedia.org/wiki/C99)

请注意，c++ 不支持 vla，更多信息请[点击此处](https://stackoverflow.com/questions/1887097/variable-length-arrays-in-c)

# jquery - For循环给出了意想不到的结果

> ID：12275060
> 
> 赞同：0
> 
> 时间：2012-09-05T05:37:04.353
> 
> 标签：jquery, html

我无法理解 for 循环的行为。jQuery：

```
 $('#btnTest').on("click", function () {

            var thumbUrl = "http:localhost/File/Modules/FileManager/Library/1041323042_12.jpg";
            var arrurl = thumbUrl.split("/");
            var i;
            var result;
            for (i = 0; i < arrurl.length - 1; i++) {
                result += arrurl[i] + '/';
            }
            alert(result);
 }); 
```

和html：

```
<input type="button" class="ThumbLink" value="Test" id="btnTest"/> 
```

但是`alert`给出了一个结果：

`undefinedhttp:localhost/File/Modules/FileManager/Library/`

这`undefined`是从哪里来的。我在 for 循环中的错误是什么？谢谢。

我的jsfiddle：

[jsfiddle](http://jsfiddle.net/shree/xXFSe/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:38:58.627

你还没有初始化`result`任何东西，所以它将是`undefined`.

因为您正试图将一个字符串连接到`undefined`，所以它将`toString()` `undefined`得到字符串`"undefined"`，并将开始连接到该字符串。

`result`您可以通过初始化为空字符串 ( `""`)来停止此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:39:08.640

也许，由于您只是在每次循环中*附加，您可能希望最初将**其*设置为.`result`*`undefined`*

 *```
:
var result = "";
for (i = 0; i < arrurl.length - 1; i++) {
    result += arrurl[i] + '/';
}
alert(result);
: 
```

对您的 jsfiddle 链接进行更改会产生正确的输出：

```
http:localhost/File/Modules/FileManager/Library/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T05:39:32.403

你必须给结果一个初始值：

```
var result = ''; 
```

否则，在将 url 连接到它之前，结果是未定义的：

```
var x;
x += 'foo';  // x === 'undefinedfoo'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T06:11:49.370

宣布

```
var result = ""; 
```

然后它会正常工作:)*

# google-apps-script - Google Apps脚本中的文档“发布到网络”？

> ID：12275062
> 
> 赞同：2
> 
> 时间：2012-09-05T05:37:15.593
> 
> 标签：google-apps-script

是否有计划为 Google 文档中的“文件 | 发布到网络...”菜单项提供 Google Apps 脚本功能？

以前有人问过这个问题，但是如果我能找到答案。需要明确的是，我并不是指设置文档本身的共享或可查看性，而是指生成带有自己链接的文档的网页表示。

谢谢，

布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:46:26.447

直接使用 GAS 是不可能的。但是，使用带有 oAuth 的文档列表 API 和 URLFetch，理论上您可以在网络上公开文档。不过，发布到网络选项本身不可用。

请参阅以下链接以获取信息和帮助

*   [如何使用带有 GAS 的 UrlFetchApp 获取访问令牌](https://stackoverflow.com/questions/11063749/how-do-i-get-an-access-token-using-urlfetchapp-with-gas)

*   [https://developers.google.com/google-apps/documents-list/#sharing_resources_with_the_public_the_rest_of_the_internet](https://developers.google.com/google-apps/documents-list/#sharing_resources_with_the_public_the_rest_of_the_internet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-09T22:16:49.033

现在有一种方法，[在此处](https://stackoverflow.com/questions/56469509/publish-a-google-spreadsheet-through-google-apps-scripts)提供。

一、添加服务Drive API [![Apps 脚本添加 Drive API 服务](../Images/8c534e7aac51ac8ab0ae9815eca4dc08.png)](https://i.stack.imgur.com/dNKAy.png)

```
var docId = "###"; // Please set this.
Drive.Revisions.update({published: true, publishedOutsideDomain: true, publishAuto: true}, docId, 1); 
```

# jquery - 使用 Kendo Grid 时如何为单行设置行模板？

> ID：12275068
> 
> 赞同：1
> 
> 时间：2012-09-05T05:37:44.750
> 
> 标签：jquery, asp.net, grid, kendo-ui

使用 Kendo Grid 时如何为单行设置行模板？我需要获取最后一行中其余行的列中的值的总和。就像最后一行网格的摘要一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:48:22.557

**编辑以反映已编辑的问题**

您可以通过在数据源中使用聚合来创建所需的值，然后可以使用 Grid 中列的 footerTemplate 选项在页脚中显示值

我在这里准备了一个例子：

[http://jsfiddle.net/rTrzc/](http://jsfiddle.net/rTrzc/)

# iphone - 在 sqlite3_step 线上崩溃？

> ID：12275070
> 
> 赞同：1
> 
> 时间：2012-09-05T05:38:07.923
> 
> 标签：iphone, ios, xcode, crash, exc-bad-access

在 sqlite3_step 线上崩溃？

我只是从数据库中删除该行。它有时并不总是抛出 EXC_BAD_ACCESS。

下面是代码截图。

大家有什么建议。

![在此处输入图像描述](../Images/8fb82b4684e36d1bc3270cce75436107.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T06:26:40.473

上述问题是由于对 DB 的多个写入过程造成的。我同步了数据库操作。感谢您的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:56:40.630

您还没有使用打开数据库

```
if(sqlite3_open([databaseName UTF8String], &database) == SQLITE_OK)
{
      // perform your operations here e.g. delete, insert, update
}
else
{
      NSString *databaseName = [self.GetDocumentDirectory stringByAppendingPathComponent: @"yourDatabaseName.sqlite"];
      sqlite3_open([databaseName UTF8String], &db);

      // perform your operations here e.g. delete, insert, update
} 
```

[请参阅此处](http://klanguedoc.hubpages.com/hub/IOS-5-SDK-Database-Insert-Update-Delete-with-SQLite-and-Objective-C-C-How-To)的删除记录

# ajax - $.ajax() 与 $.getJSON() 与 YQL 和跨域请求

> ID：12275072
> 
> 赞同：0
> 
> 时间：2012-09-05T05:38:29.377
> 
> 标签：ajax, getjson, yql

我正在尝试使用 YQL 对来自 wordpress 博客的数据执行跨域请求。这是我第一次尝试的代码：

```
var g = {data:""}

function getWP() {

    var targeturl = "http://www.mysite.com";
    var url = "http://query.yahooapis.com/v1/public/yql?"+
        "q=select%20*%20from%20html%20where%20url%3D%22"+
        encodeURIComponent(targeturl)+
        "%22&format=xml'&callback=?";

     var successfunc = function(data) {
        if(data.results[0]){
            g.data = data.results[o];
        } else {
            var errormsg = '<p>Error: could not load the page.</p>';
            alert(errormsg);
        }
    }

    $.ajax({
      url: url,
      success: successfunc
    });

} 
```

当我尝试这个 ajax 调用时，`data`返回的对象是一个空字符串。但是，当我这样做时：

```
$.getJSON(url, successfunc); 
```

返回了正确的 JSON 对象。这两个调用有什么区别？更重要的是，为什么只有第二个有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:43:31.540

不同之处在于您没有指定数据类型或内容类型

添加

```
$.ajax({
  url: url,
  dataType: "json",
  contentType: "application/json; charset=utf-8",
  success: successfunc
}); 
```

到你的 ajax 调用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T05:48:21.057

**$.getJSON()**使用数据类型**json**而**$.ajax()**没有。如果你想使用标准的**$.ajax()**你必须明确指定**数据类型**。对于跨域呼叫，使用数据类型**jsonp**而不是**json**。但我认为 YQL 也适用于 json。

# objective-c - uiwebview 加载本地 html 文件 - 奇怪的 Webkit 错误

> ID：12275085
> 
> 赞同：0
> 
> 时间：2012-09-05T05:39:08.023
> 
> 标签：objective-c, uiwebview, webkit

我正在尝试在我的应用程序中运行以下代码（参考：[iPhone Dev: UIWebView baseUrl to resources in Documents folder not App bundle](https://stackoverflow.com/questions/1926117/iphone-dev-uiwebview-baseurl-to-resources-in-documents-folder-not-app-bundle)）

```
NSString *imagePath = [[NSBundle mainBundle] resourcePath];
imagePath = [imagePath stringByReplacingOccurrencesOfString:@"/" withString:@"//"];
imagePath = [imagePath stringByReplacingOccurrencesOfString:@" " withString:@"%20"];

NSString *HTMLData = @"<h1>Hello this is a test</h1><img src="sample.jpg" alt="" width="100" height="100" />";
[webView loadHTMLString:HTMLData baseURL:
[NSURL URLWithString: 
[NSString stringWithFormat:@"file:/%@//",imagePath]
]]; 
```

它在单独的项目中运行良好。但是当我在我现有的项目中尝试它时，我在控制台上得到以下内容，然后是空白 webView ：

```
 *** WebKit discarded an uncaught exception in the webView:decidePolicyForNavigationAction:request:frame:decisionListener: delegate: <NSRangeException> *** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0] 
```

关于我应该在哪里寻找的任何想法。在我的代码中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:02:40.500

做这个：

```
 NSString *path = [[NSBundle mainBundle] bundlePath];
 NSURL *baseURL = [NSURL fileURLWithPath:path];
 NSString *strHTML = @"<html><h1>Hello this is a test</h1><img src="sample.jpg" alt="" width="100" height="100" /></html>";
 [webView loadHTMLString:strHTML baseURL:baseURL]; 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-05T05:46:05.193

很抱歉……出现了问题`- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType`

我的错，被奇怪的 webkit 消息冲昏了头脑

# html - 启用同一类的最后一个 div

> ID：12275089
> 
> 赞同：0
> 
> 时间：2012-09-05T05:39:20.217
> 
> 标签：html, ajax, jquery

我正在进行 ajax 调用以获得更多结果并将它们附加到同一页面中的现有结果中。获取内容时，每次发送请求时我都需要显示一个滚动微调器。为了实现这一点，我继续在获取的结果底部添加一个 div，如下所示：

```
<div class="loader" style="display:block"></div> 
```

我正在尝试使用以下代码显示微调器：

```
beforeSend: function() 
{
      $('#loader:last-child').html('<img src="/graphics/loading.gif" alt="Wait" />');
}
complete: function()
{
      $('#loader:last-child').html('');
} 
```

但我无法获得微调器效果，它根本没有显示在页面上（虽然已获取结果）。

请帮助我纠正它。任何其他具有微调效果的想法也值得赞赏。

编辑：我已经删除了我的 perl 代码中的引号。对此感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:42:38.460

放一个空间`<imgsrc`，使其`<img src`

你的选择器应该是`$('.loader:last-child')`因为 loader 是一个类而不是一个 id。（使用`.`代替`#`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:10:13.557

无需添加任何新元素或图像，您只需在结果容器加载时添加一个类，然后使用该类添加填充和微调器图形作为容器的背景图像。加载完成后，删除类：

```
beforeSend: function(){
    $('#resultsContainer').addClass('loading');
}
complete: function(){
    $('#resultsContainer').removeClass('loading');
} 
```

然后你的 CSS 可能看起来像：

```
#resultsContainer.loading {
    background: url(graphics/loading.gif) no-repeat center bottom;
    padding-bottom: 2em;
} 
```

要获得额外的样式，请在 resultContainer 上的 padding-bottom 添加过渡，以便加载图形平滑地滑入和滑出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:44:11.513

你为什么用`\`斜杠

试试这个

```
beforeSend: function() 
{
      $('.loader:last-child').html('<img src="/graphics/loading.gif" alt="Wait" />');
}
complete: function()
{
      $('.loader:last-child').html('');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T05:45:49.500

试试这个

```
beforeSend: function() 
{
      $("#loader").last().html('<img src="/graphics/loading.gif" alt="Wait" />');
}
complete: function()
{
      $("#loader").last().html('');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T05:51:49.003

你不需要转义引号，也可以在like`space`之间放一个`imgsrc``img src`

正如**rob**在他的[回答](https://stackoverflow.com/a/12275121/1516616)中提到的那样

> 您的选择器应该是**$('.loader:last-child')**因为 loader 是一个类而不是一个 id。使用句点**(.)**而不是**(#)**

`,`后面还要加逗号`beforeSend: function(){},`试试；

**使用以下代码：**

```
beforeSend: function() {
    $('.loader:last-child').html('<img src="/graphics/loading.gif" alt="Wait" />');
},

complete: function() {
      $('.loader:last-child').html('');
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T05:58:09.633

尝试将加载器图像附加到 e #loader 的 HTML 中，然后将其删除。（请注意，我在图像中添加了一个 id）

```
beforeSend: function() 
{
      $('.loader').append('<img src="/graphics/loading.gif" id="waitSpinner" alt="Wait" />');
}
complete: function()
{
      $('#waitSpinner').remove();
} 
```

编辑：将#loader 更改为.loader，因为那是类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-05T06:03:49.487

您必须`.`用于选择类而不是`#`用于 id，并且`,`在 beforeComplete 和 Complete 之间也缺少。

# android - MediaPlayer 的准备和启动可以同时进行吗？

> ID：12275093
> 
> 赞同：0
> 
> 时间：2012-09-05T05:39:43.117
> 
> 标签：android, media-player, android-mediaplayer

根据android中的状态图，MediaPLayer会在prepare后启动。我计划实现一个应用程序，它必须接收最少的内容和播放器才能开始。但是播放器正在等待，直到在准备阶段收到完整的内容。

例如：总内容长度：10kb，计划在缓冲区达到2kb时启动播放器。即播放器等待2kb缓冲区准备好并必须启动播放器。

算法： 1.开始从服务器下载内容 2.如果准备好缓冲区 2kb，则启动播放器，否则向用户显示旋转进度（n/w 延迟） 3.重复 2 直到完整内容 10kb 到达。

我可以用 MediaPLayer 实现上述算法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:28:31.720

您不能使用 MediaPlayer 执行此操作，因为它在指示它“准备好”之前完全控制它的缓冲量。

如果您有可用的 PCM 数据，则可以按照您的指示使用[AudioRecord](http://developer.android.com/reference/android/media/AudioRecord.html)类进行播放。否则，如果您可以以 Jelly Bean 为目标（谁已经可以做到了！），您可以使用新的[MediaCodec](http://developer.android.com/reference/android/media/MediaCodec.html) API。

# asp.net-mvc-4 - 从 .net 4 升级到 4.5 会中断 Javascript 中的 Html.Raw 调用

> ID：12275095
> 
> 赞同：4
> 
> 时间：2012-09-05T05:39:46.863
> 
> 标签：asp.net-mvc-4

我在 ac#MVC 3 razor 页面中有以下代码，我将序列化数据传递到 KnockoutJs 的 javascript 变量中：

```
 @{   
        var listData = new JavaScriptSerializer().Serialize(Model.ListItems);
        var pagerData = new JavaScriptSerializer().Serialize(Model.Pager);
    }

// additional code

    <script type="text/javascript" >

        var ListData = @(Html.Raw(listData));  // <-- Syntax Error here
        var PagerData = @(Html.Raw(pagerData));  // <-- Syntax Error here

     // additional js code

    </script> 
```

升级到 VS 2012 后，我在上面 Html.Raw 行末尾的 javascript 分号后收到错误曲线。该项目符合但 VS 2012 在每行的错误列表中显示“语法错误”。如果没有分号，javascript 也会显示“语法错误”。

此代码在以前的版本中没有问题。这是 VS 2012 解析器中的错误吗？有没有办法避免生成的错误？

**编辑** 还有其他人看到这个问题吗？下面是一个简化版本，在新页面中隔离了相同的问题。如果在 ListData 行的末尾添加分号，则会出现 javascript 语法错误，如果没有，则在下一行。这是 VS2010 和 VS2012 之间的 javascript 编译器中的错误吗？

```
@{   
    var listData = "test";
    var pagerData = "test2";
}
    <script type="text/javascript" >
        var ListData =  @(Html.Raw(listData))
        var PagerData =  @(Html.Raw(pagerData))
    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T21:40:52.620

[请对此连接问题](http://connect.microsoft.com/VisualStudio/feedback/details/760339/valid-javascript-razor-syntax-marked-as-syntax-error)添加投票。我们将在下一个版本的 VS 中解决这个问题。我已将您的复制代码附加到此错误中，并添加了指向此帖子的链接作为该问题的另一种表现形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T17:25:40.163

此问题在 Visual Studio 2013 SP 2 中仍然存在

要修复此警告消息，请先初始化 javascript 变量。如果任何 var 后跟 @，IMO Visual Studio 认为 var 是隐式类型的。

```
 var ListData;
        var PagerData;
        ListData =  @(Html.Raw(listData));
        PagerData =  @(Html.Raw(pagerData)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-28T11:33:54.397

我正在使用 MVC5 并发现相同的问题，所以我以这种方式解决了它，它应该适用于所有版本

```
@Html.Raw("var myData = " +  Json.Encode(this.Model.MyData) + ";" ) 
```

但是，我只会在最简单的情况下使用它，因为您会丢失任何关于 VAR 类型的智能感知（尽管它确实将其视为全局实例并且编译器不会抛出 wobbler），所以现在我认为一个初始的、空的定义可能是最好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:01:57.763

我也发生过同样的事情，但它是随机发生的。我试图解决的问题如下：

确保您可以在调试模式下编译/构建/调试，切换到发布模式并尝试从该模式进行调试/发布。切换回调试模式并重新尝试发布。

切换模式的一些组合可以解决问题，我只是无法确定它到底是什么。一旦你让它工作，不要关闭 VS ;-)

让我们希望 MS 在 SP1 中解决这个问题。

# actionscript-3 - 事件侦听器未分离

> ID：12275098
> 
> 赞同：0
> 
> 时间：2012-09-05T05:40:15.247
> 
> 标签：actionscript-3, apache-flex, event-handling, flex3

我正在使用 Mate:Listener 注册一个事件监听器

```
<mate:Listener method="getSettingListner" type="{SettingEvent.GET_VIDEO_SETTING}" useWeakReference="true"/> 
```

并在完成我的工作后尝试将其分离

```
this.removeEventListener(SettingEvent.GET_VIDEO_SETTING,getSettingListner); 
```

但是，在调试时我仍然可以看到该方法仍在监听事件。为什么？

如何分离使用 mate 附加的事件侦听器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:40:27.367

你不能，根据Mate 论坛上的[这篇文章。](http://mate.asfusion.com/page/documentation/tags/listener)它建议您将“type”属性设置为 null，或使用 ListenerInjector，因为 Listener 已弃用。

# oauth - 有没有办法在不重新授权的情况下使用 DropBox 进行身份验证？

> ID：12275100
> 
> 赞同：2
> 
> 时间：2012-09-05T05:40:40.600
> 
> 标签：oauth, dropbox, dropbox-api

我正在开发一个 DropBox 应用程序 - 如果用户未通过 DropBox 身份验证，则该应用程序将毫无用处。因此，在我的应用程序中进行单独的帐户管理是没有用的（使用 DropBox 会计就足够了）。

DropBox 建议的 oauth 序列同时进行身份验证（让用户使用她的 DropBox 凭据登录）和授权（让她批准我的应用程序访问她的数据库帐户）。这对于用户第一次登录我的应用程序很有用。但是一旦我的应用程序被批准并“安装”到用户的帐户上，我不希望她每次登录时都被提示是否允许我的应用程序访问。有没有办法跳过授权页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-13T16:33:53.157

一段时间过去了，但现在有一种方法可以允许永久访问 Dropbox API。您需要从应用程序设置中生成访问令牌并使用它。这是 Dropbox 所说的：

> 通过生成访问令牌，您将能够为您自己的帐户进行 API 调用，而无需通过授权流程。要获取其他用户的访问令牌，请使用标准 OAuth 流程。

# c# - ?wsdl php web service show no discovery information 无法添加引用

> ID：12275102
> 
> 赞同：1
> 
> 时间：2012-09-05T05:40:55.507
> 
> 标签：c#, php, web-services

我得到了这个错误。这就是为什么我不能添加对我的项目的引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T08:17:06.667

您需要为您的 WebService 提供有效的 WSDL。（[WSDL 文档](http://www.tutorialspoint.com/wsdl/index.htm)）

最后尝试使用 ?wsdl 访问 WebService 的 url。例子：

`http://my.url.com/webServiceFile.aspx`变成`http://my.url.com/webServiceFile.aspx?wsdl`

您应该看到类似[这样](http://www.tutorialspoint.com/wsdl/wsdl_example.htm)的内容。如果您收到错误消息，则您尝试访问的 WebService 无效。

**编辑：**我刚刚意识到您的屏幕截图中的 URL 字段是空白的，因为您没有在其中输入任何内容。您需要知道您的 WebService 的 URL，然后将其插入该字段，确保您`?wsdl`在最后。

它需要是这样的：

```
http://<your domain>.com/<WebService file>.aspx?wsdl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:58:40.340

尝试添加：

```
header("Content-Type: text/xml"); 
```

在打印 wsdl 之前。

# c# - 运行 .Exe 后出错（但调试器没有错误）

> ID：12275103
> 
> 赞同：0
> 
> 时间：2012-09-05T05:40:59.987
> 
> 标签：c#, .net

我有一个代码，它基本上从 BaseFolder 获取 QC 并部署补丁。

问题是：

当我使用 VS 2010 的“调试”或“发布”模式运行代码时，它运行良好并给出了结果。但是，当我直接从 \bin\release\ 或 \bin\debug\ 文件夹运行 .exe 时，它​​会出现连接错误并且应用程序会停止。

在研究中我发现，如果我在注释掉以下 2 个“retval”语句并将硬编码为 1 之后构建我的 .exe，那么该 exe 工作正常：

```
//retVal = Olf.NetToolkit.Util.ScriptImport(avsFilename.ToString(), avsFormatedName.ToString(), (int)fileType); 
```

retval = 1;

```
//retVal = olfTKAttach.Attach(); 
```

retval = 1;

让我知道是否有任何解决问题的指示？（（简而言之：代码和 UI 在调试器中完美运行，但在我运行 exe 时却没有。:()）

# iphone - 从 Google Places API 获取数据后获取状态“REQUEST_DENIED”

> ID：12275108
> 
> 赞同：6
> 
> 时间：2012-09-05T05:41:25.853
> 
> 标签：iphone, objective-c, ios, google-maps, google-maps-api-3

我已经这样做了

```
 NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"https://maps.googleapis.com/maps/api/place/search/json?location=30.722322,76.76126&radius=500&types=food&sensor=true&key=any_apiKey"]];

    NSURLResponse *response;
    NSError *error;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    NSString *strResponse = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    NSLog(@"%@",strResponse);

    SBJSON *sbJason = [[SBJSON alloc] init];
    NSMutableDictionary *getPlaceList = [sbJason objectWithString:strResponse]; 
```

//但我得到了这个-

```
 {
 "html_attributions" : [],
  "results" : [],
 "status" : "REQUEST_DENIED"
 } 
```

**API 密钥有什么问题吗？我已经写了谷歌地图给出的 API 密钥。api密钥有什么问题吗或者请告诉我这里是[google api的链接](https://developers.google.com/places/documentation/search)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-12-27T07:41:29.707

尽管已经回答了这个问题，但我认为社区可以更好地解释实际需要做什么才能使其正常工作。

我为此烦恼不已，这对我来说没有意义..我正在制作一个iOS / Android应用程序，所以我制作了一个iOS / Android密钥...... **错了。**

使用 Google 的 Places API，甚至不会考虑您的捆绑标识符。

你真正想做的是：（我正在使用新的用户界面）

**1\. 登录[https://cloud.google.com/console#/project](https://cloud.google.com/console#/project)**

选择您的项目名称，然后进入**API's & Auth > APIs**

确保您已打开 Places API。这是唯一需要打开 Places-API 才能工作的东西。 ![在此处输入图像描述](../Images/91614087d6fc5dba5e853bef73c21242.png)

**2.进入凭证**

单击公共 API 访问下的创建新密钥 ![在此处输入图像描述](../Images/4767e4f4f6355217eddd7ea8f9633760.png)

**3\. 选择浏览器密钥** ![在此处输入图像描述](../Images/604c1813532b168270424ef0047a7d84.png)

**4.点击创建，没有别的**

将 HTTP 引用框留空。

![在此处输入图像描述](../Images/1b78d83e7364d6a06c179378609cfdbd.png)

**5.使用这里生成的密钥**

此密钥将允许来自任何设备的任何用户通过您的开发人员登录访问 API。您可以在这里尝试一下：（请务必将**YOUR_KEY_HERE**替换为您生成的密钥）

```
https://maps.googleapis.com/maps/api/place/autocomplete/json?input=Food%20Sh&sensor=false&radius=500&location=0,0&key=YOUR_KEY_HERE 
```

**6.享受**

现在您可以在您的 Android/iOS 设备中使用上面的 URL。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T20:24:19.507

尝试使用 BROWSER 应用程序密钥，而不是 iOS 密钥。你可以在这里找到它：

[https://code.google.com/apis/console/](https://code.google.com/apis/console/)

然后按左侧的“API Access”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T10:45:36.813

Static Maps API 和 Places API 都需要在 API 控制台中为该密钥启用。打开 API 控制台并启用对 Places API 的访问。有一个礼貌限制：每天 1,000 个请求，之后您可能需要启用计费。

[https://code.google.com/apis/console/](https://code.google.com/apis/console/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T17:23:45.290

只想支持乔希的解决方案。我花了几个小时弄清楚 IOS 密钥，几乎放弃了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T07:00:51.910

试试这个：-

[https://developers.google.com/places/documentation/](https://developers.google.com/places/documentation/)

阅读以下部分并继续执行获取密钥的步骤。

验证

Google Places API 使用 API 密钥来识别您的应用程序。API 密钥通过 Google API 控制台进行管理。在开始使用 API 之前，您需要自己的 API 密钥。要激活 Places API 并创建您的密钥：

```
Visit the APIs console at https://code.google.com/apis/console and log in with your Google Account.
A default project called API Project is created for you when you first log in to the console. You can use the project, or create a new one by clicking the API Project button at the top of the window and selecting Create. Maps API for Business customers must use the API project created for them as part of their Places for Business purchase.
Click the Services link from the left-hand menu.
Click the Status switch next to the Places API entry. The switch slides to On.
Click API access from the left navigation. Your key is listed in the Simple API Access section. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-06T06:23:56.467

我最终得到了这段代码。

```
UIActivityIndicatorView *activity=[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
activity.center=self.view.center;
[activity startAnimating];
[self.view addSubview:activity];

NSString *str=[[NSString alloc] init];
str=[NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/textsearch/json?query=%@&sensor=true&key=YOUR_BROWSER_KEY",searchQuery];
NSMutableURLRequest *request1=[[NSMutableURLRequest alloc] init];
NSURL *url= [[NSURL alloc] initWithString:[str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
[request1 setURL:url];
[request1 setHTTPMethod:@"GET"];

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    NSError *requestError = nil;
    NSURLResponse *urlResponse = nil;
    NSData *response1 =
    [NSURLConnection sendSynchronousRequest:request1
                          returningResponse:&urlResponse error:&requestError];

    dispatch_async(dispatch_get_main_queue(), ^{

        if ([activity isAnimating]) {
            [activity startAnimating];
            [activity removeFromSuperview];
        }
        NSError* error;
        NSDictionary* json = [NSJSONSerialization JSONObjectWithData:response1
                                                             options:kNilOptions
                                                               error:&error];

        NSLog(@"%@",json);

        self.searchArray=[json objectForKey:@"results"];
        [self.tableView setDataSource:self];
        [self.tableView setDelegate:self];
        [self.tableView reloadData];

        [self showPins:self.searchArray];

    });
}); 
```

# java - 从网站获取超链接

> ID：12275109
> 
> 赞同：0
> 
> 时间：2012-09-05T05:41:31.297
> 
> 标签：java, jsoup

我正在使用 Jsoup。我做了一个获取`document= connect.get();` 并获取 html 页面。

现在我将其写入文本（字符串）。

我有填充这些页面的用户。我知道每个用户名。这些页面有用户名。我可以执行 string.contains("username") 来检查用户是否存在。

现在我的问题是：我的用户中有名字

表

有序列表

无序列表

在身体

但在所有这些情况下，它们的格式为：示例

```
<li><a href="http://university.xxx.students.com/grade9/john/117429">2012 academic record</a></li> 
```

有些在桌子上和所有..

在示例中，我知道学生姓名 = john. 我怎样才能得到所有的网址？

==

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:43:49.183

您可以为此使用正则表达式：

`Elements elements = document.select("[href~=(?is)http://university\\.xxx\\.students\\.com/grade9/(.+?)/[0-9]+?]")`

更抽象：`document.select("a[href~=regex]")`

如果您已经知道可以替换的名称`(.+?)`，例如：

`Elements elements = document.select("[href~=(?is)http://university\\.xxx\\.students\\.com/grade9/" + name + "/[0-9]+?]")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:37:43.293

这个怎么样：

```
 Document doc = Jsoup.connect(url).get();
    Elements links = doc.select("a[href]");

    for (Element link : links) {
        if(link.attr("abs:href").contains(studentName) || link.text().contains(studentName)){
            studentLinkList.add(link.attr("abs:href"));
        }
    } 
```

# javascript - 从 chrome 打印对话框禁用打印选项

> ID：12275111
> 
> 赞同：0
> 
> 时间：2012-09-05T05:41:41.313
> 
> 标签：javascript, css, printing, google-chrome-frame

我正在发出从 chrome 打印的命令。我只是想禁用没有复制选项。我想限制用户从对话框中更改复制选项的数量。如图所示，我希望将其禁用或从中删除。 ![在此处输入图像描述](../Images/8a45300def87e408f3bbe27c5a643d19.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:06:08.760

在 Windows 上，只需找到您的 Chrome 快捷方式，然后在启动命令中添加“--args --disable-print-preview”。

例如，如果您已将 Chrome 固定到任务栏，请右键单击该图标，然后右键单击“Google Chrome”（靠近列表底部），然后单击属性。在目标窗口中，将上面的字符串添加到末尾。它现在应该如下所示：

```
C:\Users\<user>\AppData\Local\Google\Chrome\Application\chrome.exe --args --disable-print-preview 
```

你的用户名在哪里`<user>`。点击应用/确定并使用此快捷方式重新启动浏览器（如有必要，对其他快捷方式进行相同的调整）。

# php - include_once 被忽略

> ID：12275116
> 
> 赞同：0
> 
> 时间：2012-09-05T05:42:03.967
> 
> 标签：php

好的。

所以在这个脚本[http://ideone.com/grapQ](http://ideone.com/grapQ)的第 37 行，include_once 命令基本上只是被忽略了，我试图显示的内容根本没有显示，甚至没有错误消息。

我尝试启用错误报告，但没有显示一个错误。

我也尝试使用 Echo，但同样的问题仍然存在。

有没有人知道为什么它被忽略甚至没有显示错误消息？不仅仅是运气，它只是一些基本的东西！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T05:45:20.143

您在该 include 语句的末尾缺少一个分号：

```
include_once('http://outside-resources.ultimatesphider.com/us-resources/2.0.1/2.0.1announce.php'); 
```

此外，当我在本地机器上测试它（只是那一行）时，我收到以下错误：

```
Warning: include_once(): http:// wrapper is disabled in the server configuration by allow_url_include=0 in /var/www/test.php on line 5 
Warning: include_once(http://outside-resources.ultimatesphider.com/us-resources/2.0.1/2.0.1announce.php): failed to open stream: no suitable wrapper could be found in /var/www/test.php on line 5 
Warning: include_once(): Failed opening 'http://outside-resources.ultimatesphider.com/us-resources/2.0.1/2.0.1announce.php' for inclusion (include_path='.:/usr/share/php:/usr/share/pear') in /var/www/test.php on line 5 
```

Deepak 的答案有更多关于允许可能适用于您的问题的外部文件的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T05:47:38.203

您不能包含远程文件，因为它在`PHP 5.2.0`和更高版本中。如果你想使用远程`URL` **allow_url_include**必须为这些启用。参考[链接](http://php.net/manual/en/features.remote-files.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:47:28.070

按照链接

[http://php.net/manual/en/function.include-once.php](http://php.net/manual/en/function.include-once.php)

# winforms - WinForms 覆盖控制框

> ID：12275117
> 
> 赞同：0
> 
> 时间：2012-09-05T05:42:04.100
> 
> 标签：winforms, controlbox

有谁知道覆盖 WinForms 控件框的外观和感觉需要什么？我不想更改按钮的功能，我只想更改颜色和图像。类似于[Instagrille](https://www.pokki.com/app/Instagrille)对他们的 Windows 版 Instagram 应用所做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:56:19.773

控制箱由系统创建。AFAIK，您无法自定义它。尽管您可以摆脱它并创建自己的。这将需要一些努力。

您将不得不 P/Invoke User32.dll 并覆盖 WndProc 以拦截 Windows 消息。

看看这些文章开始。[这个](http://www.codeproject.com/Articles/11510/Add-Transparent-Menus-and-XP-Titlebar-Buttons-to-y)和[这个](http://www.codeproject.com/Articles/10171/Adding-a-Minimize-to-tray-button-to-a-Form-s-capti)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:06:11.950

将应用程序移植到 WPF 可能会更好。您正在寻找的控制级别随框架“免费”提供，并且在 Windows 平台上更具前瞻性。[这个答案](https://stackoverflow.com/questions/111817/what-is-the-easiest-way-to-upgrade-a-large-c-sharp-winforms-app-to-wpf)是一个很好的起点，这里有更多好的[链接](http://blogs.msdn.com/b/llobo/archive/2009/09/30/migrating-winforms-to-wpf-links-to-info.aspx)。

如果这不是一个选择，我认为[丹麦语](https://stackoverflow.com/users/73568/danish)让你开始了。我会警惕尝试将 WinForms 扩展得太远超出它的意图，根据我的经验，它可能会在未来引起头痛。祝你好运。

# android - 页面显示前如何在phonegap中加载css？

> ID：12275123
> 
> 赞同：2
> 
> 时间：2012-09-05T05:42:44.793
> 
> 标签：android, cordova

我正在创建一个 Phonegap 应用程序。在我的应用程序中，我为“Android”和“ios”使用不同的 css，所以只有当它是 android 时我才必须加载 css。以下代码完美运行，但最初页面在没有 css 的情况下加载，然后在 phonegap 加载后，我的 css 被加载，每次我显示该页面时都会显示一个跳舞页面（即页面显示后 css 加载）。任何人都可以帮助加载页面显示之前的 css，但前提是它是 android 平台。

```
 <script type="text/javascript" >
     var string;
     // Wait for PhoneGap to load 
     document.addEventListener("deviceready", onDeviceReady, false);

     // PhoneGap is loaded and it is now safe to make calls PhoneGap methods
     function onDeviceReady() 
     {
       check_img();
    }

   function check_img() 
   {
     string = device.platform;
    if(string=="Android")
    {
      var head  = document.getElementsByTagName('head')[0];
      var link  = document.createElement('link');
      //link.id   = cssId;
      link.rel  = 'stylesheet';
      link.type = 'text/css';
      link.href = 'css/style.css';
      //link.media = 'all';
      head.appendChild(link);
    }
    } 
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:52:13.250

我在这里找到了答案。 [http://simonmacdonald.blogspot.in/2012/04/phonegap-android-splashscreen-just-got.html](http://simonmacdonald.blogspot.in/2012/04/phonegap-android-splashscreen-just-got.html)

当您设置启动画面时，您在 mainactivity.java 文件中执行以下操作

```
 super.setIntegerProperty("splashscreen", R.drawable.splash);
    super.loadUrl("file:///android_asset/www/index.html", 10000); 
```

这将显示您的启动屏幕 10 秒，然后您的 index.html 页面将被加载。注意我当时说的。是的，这是正确的，显示启动画面是一个阻塞调用。在显示初始屏幕时，您的 .html/.js/.css 不会在后台加载。好吧，这一切都在改变，因此您的启动屏幕显示在一个线程上，而您的应用程序在另一个线程的启动屏幕下方加载。最好的事情是您不需要对代码进行任何更改。像往常一样继续调用启动画面。

# javascript - jQuery $.ajax 扩展 XDomainRequest onprogress

> ID：12275128
> 
> 赞同：3
> 
> 时间：2012-09-05T05:43:27.473
> 
> 标签：javascript, jquery, xdomainrequest

**简短版本：**

我想让[这个和](https://github.com/kpozin/jquery-ajaxprogress#readme)[这个](https://github.com/Ovea/cors/blob/master/src/main/resources/com/ovea/cors/jquery.ie.cors.js)一起工作：

**长版：**

我想创建一个 jQuery 扩展，为 $.ajax 对象添加一个进度方法，并与 IE8 和 IE9 的 XDomainRequest 对象一起使用。

目前，使用上述插件，我只能为 XMLHttpRequest 对象定义进度事件回调处理程序。

但是，XDomainRequest 也提供了一个 onprogress 事件。我基本上需要 XDomainRequest 的包装器。例如。progressEvent.length 将对应于 xdr.responseText.length。

我很感激任何关于从哪里开始的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T00:36:15.397

好吧，我解决了这个问题。我最终派生了通过 ajax 传输器实现 XDomainRequest 的 ajaxHooks [。](https://github.com/jaubourg/ajaxHooks "ajaxHooks")

我添加了对名为“progress”的 onprogress 事件回调的支持，该回调可以用原始 ajax 对象定义。

根据 W3C 标准，progressEvent.lengthComputable = false 因为我们无法获取内容长度，因此 progressEvent.total = 0;

请参见下面的示例：

```
$(document).ready(function(){

    var download_url = YOUR_URL;

    $.ajax({

        url: download_url,
        cache: false,
        progress: function(jqXHR, progressEvent) {

            console.log(progressEvent.loaded);

        }
    })
}); 
```

在这里查看我的[ajaxHooks fork](https://github.com/rowandh/ajaxHooks/blob/master/src/ajax/xdr.js)。

# java - H2数据库列大小

> ID：12275132
> 
> 赞同：0
> 
> 时间：2012-09-05T05:43:42.833
> 
> 标签：java, schema, h2

[这是对此](https://stackoverflow.com/questions/12274119/column-data-type/12274611)的后续问题。

表中给定文本列的大小，例如 varchar(32) 是否存储在`INFORMATION_SCHEMA.COLUMNS`表 column中`CHARACTER_MAXIMUM_LENGTH`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:49:17.730

是的，但是你为什么不直接使用 java.sql.DatabaseMetaData 呢？

# php - php不获取数组的结尾

> ID：12275140
> 
> 赞同：0
> 
> 时间：2012-09-05T05:44:50.810
> 
> 标签：php

`foreach`不获取数组的结尾。我想在另一种方法中使用它的结尾：

```
$array = array(
"Language programings"=>array("php" => 100,"js" => 200),'html'=>12);
 foreach ($array as $kk=>$val1)
   {
     echo $kk.'<br/>';
     foreach ($val1 as $key=>$val2)
      {  
         if (! end(array_keys($array)))
             echo $val2;
      }
      echo end(array_value);//must be show 12
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:56:54.280

如果我理解正确，在您的 if() 语句中，您正在尝试查看指针是否位于数组的末尾。不幸的是，在这种情况下， end() 永远不会为假，因此 echo $val2; 行 永远不会执行。

尝试更换

```
if (! end(array_keys($array))) 
```

和

```
if ($key <> end(array_keys($array)) 
```

你的最后一行也应该是：

```
echo end(array_values($array)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:00:55.410

**尝试使用以下代码：**

```
$array = array("Language programings"=>array("php" => 100,"js" => 200),'html'=>12);

foreach($array as $key1 => $val1){
    if(is_array($val1)){
        echo $key1.'<br/>';
        foreach($val1 as $key2 => $val2){
            if(is_array($val2)){
                foreach($val2 as $k => $v){
                    echo $v.'<br/>';
                }
            } else {
                echo $val2.'<br/>';
            }
        }
    }
}
echo end(array_values($array)); 
```

结果将是：

```
Language programings  
100  
200  
12 
```

# gwt - GWT：运行开发模式代码服务器（来自 Eclipse）

> ID：12275142
> 
> 赞同：0
> 
> 时间：2012-09-05T05:44:58.213
> 
> 标签：gwt

我只是按照他们在[https://developers.google.com/web-toolkit/doc/2.1/tutorial/create上的教程开始学习 GWT](https://developers.google.com/web-toolkit/doc/2.1/tutorial/create)

在该页面上，当我到达标题**Running the development mode code server (from Eclipse)**时，我将生成的 url **http://127.0.0.1:8888/StockWatcher.html?gwt.codesvr=127.0.0.1:9997**复制到我的浏览器。

它最终超时，说页面未加载...插件页面最初没有显示，所以我手动安装了插件...但它仍然超时...

在屏幕上，它说...

==================================================== ==============================

## 连接被重置

```
 The site could be temporarily unavailable or too busy. Try again in a few moments.
 If you are unable to load any pages, check your computer's network connection.
 If your computer or network is protected by a firewall or proxy, make sure that Firefox is permitted to access the Web 
```

==================================================== ==============================

我是否缺少任何配置等？

首先十分感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:27:52.100

看起来您的浏览器仍然缺少 GWT 开发者插件。尝试不同的浏览器（最好是 Chrome）。您还可以在 Eclipse 中检查 GWT 的安装情况。查看 Windows/Preferences 并在 Google/WebToolkit 下，您应该会看到选中的 GWT SDK。`netstat -na`当您在命令行上键入“”时，您还可以检查码头服务器是否在端口 8888 上运行。

# .net - DataContractSerializer：在流中找不到引用 id 'xyz' 的反序列化对象。如何恢复数据？

> ID：12275144
> 
> 赞同：11
> 
> 时间：2012-09-05T05:45:12.920
> 
> 标签：.net, datacontract

我已经使用 DataContractSerializer 将一组对象保存到一个文件中。直到最近我开始收到以下消息时，它一直运行良好。

```
Deserialized object with reference id '15' not found in stream
   bei System.Runtime.Serialization.XmlObjectSerializerReadContext.GetExistingObject(String id, Type type, String name, String ns)
   bei ReadAbgleichSettingsFromXml(XmlReaderDelegator , XmlObjectSerializerReadContext , XmlDictionaryString[] , XmlDictionaryString[] )
   bei System.Runtime.Serialization.ClassDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)
   bei System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)
   bei System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator reader, String name, String ns, Type declaredType, DataContract& dataContract)
   bei System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserialize(XmlReaderDelegator xmlReader, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, String name, String ns)
   bei ReadUnitOfTestFromXml(XmlReaderDelegator , XmlObjectSerializerReadContext , XmlDictionaryString[] , XmlDictionaryString[] )
   bei System.Runtime.Serialization.ClassDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)
   bei System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)
   bei System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator reader, String name, String ns, Type declaredType, DataContract& dataContract)
   bei System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserialize(XmlReaderDelegator xmlReader, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, String name, String ns)
   bei ReadArrayOfBaseModuleFromXml(XmlReaderDelegator , XmlObjectSerializerReadContext , XmlDictionaryString , XmlDictionaryString , CollectionDataContract )
   bei System.Runtime.Serialization.CollectionDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)
   bei System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)
   bei System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator reader, String name, String ns, Type declaredType, DataContract& dataContract)
   bei System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserialize(XmlReaderDelegator xmlReader, Type declaredType, DataContract dataContract, String name, String ns)
   bei System.Runtime.Serialization.DataContractSerializer.InternalReadObject(XmlReaderDelegator xmlReader, Boolean verifyObjectName, DataContractResolver dataContractResolver)
   bei System.Runtime.Serialization.XmlObjectSerializer.ReadObjectHandleExceptions(XmlReaderDelegator reader, Boolean verifyObjectName, DataContractResolver dataContractResolver)
   bei System.Runtime.Serialization.DataContractSerializer.ReadObject(XmlReader reader)
   bei Pruef.Net.Model.ModuleManager.LoadModules() in D:\\my_workspaces\\visualstudioprojects\\Pruef.Net\\Pruef.Net\\PruefMvvm\\Model\\ModuleManager.cs:Zeile 626. 
```

该问题似乎与 AbgleichSettings 类有关。

```
 [DataContract(Name = "AbgleichSettings")]
public class AbgleichSettings
{
    #region PROPERTIES
    /// <summary>
    /// Enable feature
    /// </summary>
    [DataMember(Name = "IsEnabled")]
    public bool IsEnabled { get; set; }

    /// <summary>
    /// Display units after value
    /// </summary>
    [DataMember(Name="Units", IsRequired=false)]
    public string Units { get; set; }

    /// <summary>
    /// Multiply value by factor
    /// </summary>
    [DataMember(Name = "Factor")]
    public double Factor { get; set; }

    /// <summary>
    /// Show decimal places 0-3
    /// </summary>
    [DataMember(Name = "DecimalPlaces")]
    public int DecimalPlaces { get; set; }
    #endregion

    [OnDeserializing]
    void OnDeserializing(StreamingContext context)
    {
        IsEnabled = false;
        Units = "";
        Factor = 1;
        DecimalPlaces = 0;
    }

    public AbgleichSettings()
    {
        IsEnabled = false;
        Units = "";
        Factor = 1;
        DecimalPlaces = 0;
    } 
```

}

**请注意**，稍后在我尝试解决问题时添加了 DataMember.Name 属性。

我查看了 XML，发现 Id="15" 的对象是一个 {Comment} 元素，它是另一个类中的字符串属性。

```
<Header>
  <ChangeInfo z:Id="14">
    <Author i:nil="true" />
    <Comment z:Id="15"></Comment>
    <Date>0001-01-01T00:00:00</Date>
  </ChangeInfo>
</Header>
....
<Abgleich z:Id="34">
  <DecimalPlaces>0</DecimalPlaces>
  <Factor>1</Factor>
  <IsEnabled>false</IsEnabled>
  <Units z:Ref="15" i:nil="true" />
</Abgleich> 
```

** 序列化器 **

```
return new DataContractSerializer(Modules.GetType(), null,
                int.MaxValue /*maxItemsInObjectGraph*/,
                true /*ignoreExtensionDataObject*/,
                true /*preserveObjectReferences : this is where the magic happens */,
                null /*dataContractSurrogate*/); 
```

这里可能出了什么问题？我该怎么做才能从这个错误中恢复？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:13:53.257

经过一些实验，我已经能够让它再次工作，但我不明白到底是什么问题。

'ModuleHeader' 类最初只有属性 [Serializable]，它的属性有属性 [DataMember]。最近，我将 [DataContract] 添加到课程中（似乎合适），这就是导致问题的原因。在 OnSerialized 事件中，我注意到该实例尚未初始化，因此未创建缺少 Id 的对象。一旦我删除了 [DataContract] 属性，反序列化就会再次开始工作。

我将发布一个新问题...

# php - 在加载文件jquery中获取值

> ID：12275145
> 
> 赞同：0
> 
> 时间：2012-09-05T05:45:18.573
> 
> 标签：php, jquery, ajax, send

我有一个 jquery 函数，通过它我作为灯箱加载并向加载的文件发送一个值，代码如下

```
$(document).ready(function() {
    $(".jq_btn_preview").click(function() {
        gl_popup_id = "#popup_content";
        show_loader();
        $(gl_popup_id).load("<?php echo plugins_url(); ?>/<?php echo basename(dirname(__FILE__));?>/preview1.php",{url:'<?php echo plugins_url(); ?>/<?php echo basename(dirname(__FILE__));?>'}, function() {
            //centering with css
            centerPopup();
            //load popup
            loadPopup();
        });
    });
}); 
```

在 preview1.php 文件中我想获取 url 写入的值

```
$url = $_GET('url'); 
```

它的显示

```
Fatal error: Function name must be a string 
```

我不明白我将如何获得 url 的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:47:43.843

[$_GET](http://php.net/manual/en/reserved.variables.get.php)是一个数组而不是一个函数，使用`$_GET['url']`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:48:37.030

应该`$url = $_GET['url'];`代替`$url = $_GET('url');`

# sublimetext2 - Sublime Text 2 中的 SpecFlow/Gherkin 高亮显示

> ID：12275147
> 
> 赞同：15
> 
> 时间：2012-09-05T05:45:20.553
> 
> 标签：sublimetext2, sublimetext, specflow, gherkin

有谁知道是否有任何 Sublime Text 2 包可用于启用 SpecFlow / Gherkin 规范文件的语法突出显示？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-11T16:00:43.243

有一些解决方案可以将 Sublime Text 与 Gherkin 集成，（在这种情况下是 Cucumber 而不是 SpecFlow）：[https ://makandracards.com/ninjaconcept/9233-how-to-use-cucumber-together-with-sublime-text- 2-编辑器](https://makandracards.com/ninjaconcept/9233-how-to-use-cucumber-together-with-sublime-text-2-editor)

或作为 Sublime 捆绑包：[https ://github.com/npverni/cucumber-sublime2-bundle](https://github.com/npverni/cucumber-sublime2-bundle)

并且特别与您的问题相关，那么这个要点（上面的 Blender 提到）会将小黄瓜语法添加到 Sublime Text 2：[https ://gist.github.com/864839](https://gist.github.com/864839)

请注意，这个要点似乎有一些小问题，这是由以下评论修复的：[http](http://expertbeginner.com/2011/04/18/sublime-cucumbe/) ://expertbeginner.com/2011/04/18/sublime-cucumbe/ （编辑：Gone，[archive.org](https://web.archive.org/web/20130905054204/http://expertbeginner.com/2011/04/18/sublime-cucumbe/)副本）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-09T09:26:31.003

**这是崇高的文本包**

黄瓜的多合一包：[https ://github.com/drewda/cucumber-sublime-bundle](https://github.com/drewda/cucumber-sublime-bundle)

对于功能文件自动完成：[https ://github.com/AndyHitchman/sublime-gherkin-auto-complete](https://github.com/AndyHitchman/sublime-gherkin-auto-complete)

从 sublimetext (ctrl+B) 构建黄瓜：[https ://github.com/Aravin/Cucumber-Build-SublimeText](https://github.com/Aravin/Cucumber-Build-SublimeText)

# jquery - 在选择选项上绑定点击事件

> ID：12275153
> 
> 赞同：8
> 
> 时间：2012-09-05T05:45:54.597
> 
> 标签：jquery

我在制作HTML元素`click`上的事件时遇到问题。`option`

即使是简单的`console.log('hello!');`也行不通。

我正在尝试这个：

```
$('#mySelect option').bind('click', function(){
  console.log('hi!');
}); 
```

它工作了一段时间，但后来停止了。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-19T13:55:13.417

在我的情况下，以下代码有效

```
$('#myItem').change(function(){
            //do somthing
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T05:57:35.530

`.on()`您可以通过提供`<select>`id来绑定使用。一般而言，`change`是调用的事件`<select>`。

`option`因此，绑定事件时无需提及。

```
$(document).on('change','#mySelect', function(){<br>
    console.log('hi!');
}); 
```

**或者**

```
$('#mySelect').bind('change',function(){<br>
    console.log('hi!');
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-16T14:39:08.803

示例示例将显示如何在单击或更改选择时更改 OPTION 的下拉值和颜色

HTML：

```
<select name="options">
      <option value="1">Red</option>
      <option value="2" selected="1">Green</option>
      <option value="3">Blue</option>
</select> 
```

jQuery：

```
$("select").on("click", function () {
    debugger;
    var sVal = $(this).val();
    $(this).css("background-color", "red");
    $(this).find("option").css("background", "white");
    $(this).find('option:selected').css("background-color", "red");
    $("input").val($(this).val());
}); 
```

[演示](http://jsfiddle.net/n3nFB/1492/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-08T18:30:47.753

这解决了这个问题 - 满足我的需要（当我的页面上的某些选择元素被点击时捕获事件）。虽然尚未验证触摸行为，但 Firefox、Chrome 似乎没问题

```
$('.class_for_select').focus(function() {
    // do something here
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T05:53:56.247

检查这个 js 小提琴——

[http://jsfiddle.net/4W826/](http://jsfiddle.net/4W826/)

**HTML**

```
<select id="mySelect">
               <option value="volvo">Volvo</option>
               <option value="saab">Saab</option>
               <option value="mercedes">Mercedes</option>
               <option value="audi">Audi</option>
       </select> 
```

**查询**

```
$('#mySelect').bind('click', function(){
alert('hi!');
}); 
```

从 更改`Click`为`Change`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T06:15:45.387

我建议您使用 .on() 而不是 .bind()。

```
$('#mySelect').on('change', function(){
  var $this = $(this),
      $value = $this.val();

  alert($value);

}); 
```

[jsFiddle](http://jsfiddle.net/KHDWL/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-03T16:18:43.193

因为改变对我来说不够好而且我没有找到触发选项的方法点击我所做的是

```
 $('#mySelect').click(function () {
        if ($(this).attr('optionclick') == '1') {
             $(this).attr('optionclick', '0');
        }
        else {
             $(this).attr('optionclick', '1');
        }
  }); 
```

# vba - 在一个函数或子例程中定义多个 VBA 对象？

> ID：12275155
> 
> 赞同：1
> 
> 时间：2012-09-05T05:46:18.683
> 
> 标签：vba, excel

我有以下 VBA 代码：

```
Option Explicit

Private a(2) as Double
Private b(2) as Double

Public Function Hello(X1 As Double, X2 As Double) As Double

    a(1) = X1 + X2
    a(2) = X1/X2
    b(1) = X1
    b(2) = X2^2

Hello = a(1)+a(2)+b(1)+b(2)

End Function 
```

在`Hello`我定义的函数内`a(1)`, `a(2)`, `b(1)`, `b(2)`.

但是，我想创建一些函数或子例程，接受`X1`和`X2`作为参数并吐出`a(1)`, `a(2)`, `b(1)`,的值`b(2)`。`a(1)`这是因为我在模块中的大约 20 个函数中使用了, `a(2)`, `b(1)`,的上述定义，`b(2)`并且希望避免在我使用论文的每个函数中执行以下操作：

```
 a(1) = X1 + X2
    a(2) = X1/X2
    b(1) = X1
    b(2) = X2^2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:08:01.810

我会用一个类对象和属性/方法来构造它。试试这个`Class1`

```
Option Explicit

Private a(2) As Double, b(2) As Double

Public Sub Initialize(ByVal x1 As Double, ByVal x2 As Double)
    a(1) = x1 + x2
    a(2) = x1 / x2
    b(1) = x1
    b(2) = x2 ^ 2
End Sub

Public Property Get Hello() As Double
    Hello = a(1) + a(2) + b(1) + b(2)
End Property

Public Property Get Goodbye() As Double
    Goodbye = a(1) - a(2) + b(1) - b(2)
End Property

Public Function BusyWork(ByVal t As Double) As Double
    Dim i As Integer, x As Double
    x = 0#
    For i = 1 To 2
        x = x + (a(i) - t) * (b(i) - t)
    Next i
    BusyWork = Sqr(x)
End Function 
```

然后在模块中使用它

```
Public Sub UseClass()
    Dim c As New Class1

    c.Initialize 10.6, -4#

    Debug.Print c.Hello
    Debug.Print c.Goodbye
    Debug.Print c.BusyWork(-1#)
End Sub 
```

您可以在此处阅读有关 VBA 类的更多信息：

*   [http://www.cpearson.com/excel/classes.aspx](http://www.cpearson.com/excel/classes.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:56:58.237

如果只是从不同的函数为数组分配值，那么您可以创建一个通用过程并从所有函数中调用它们。看这个例子

```
Option Explicit

Dim a(2) As Double, b(2) As Double
Dim Hello As Double

Function FOne()
    '
    '~~> Rest of the code
    '      
    Sample 1,2
End Function

Function FTwo()
    '
    '~~> Rest of the code
    '      
    Sample 2,3
End Function   
'
'~~> Rest of the functions
'   
Function FTwenty()
    '
    '~~> Rest of the code
    '     
    Sample 3.2 ,4.2
End Function

Sub Sample(X1 As Double, X2 As Double)
    a(1) = X1 + X2: a(2) = X1 / X2
    b(1) = X1: b(2) = X2 ^ 2

    Hello = a(1) + a(2) + b(1) + b(2)
End Sub 
```

# visual-studio - Visual Studio 2012 中的测试菜单

> ID：12275159
> 
> 赞同：1
> 
> 时间：2012-09-05T05:47:04.573
> 
> 标签：visual-studio, testing, visual-studio-2012

我使用`Visual Studio 2012`并想知道如何使用`Test`菜单。我想在调查尊重表格测试参数时为每个表格打勾检查列表项目。

# c++ - Qt OpenCv“VIDIOC_QUERYCTRL：输入/输出错误”导致应用程序关闭

> ID：12275162
> 
> 赞同：2
> 
> 时间：2012-09-05T05:47:23.000
> 
> 标签：c++, linux, qt, opencv

我正在使用 Qt 中的 OpenCv 在 USB WebCamera 上工作。该代码适用于拍摄图像、保存图像等。但它随机生成错误“VIDIOC_QUERYCTRL：输入/输出错误”，导致我的整个 qt 应用程序关闭。

实际上我的应用程序的场景如下：

在 MainWindow.c 中，我有一个按钮，按下时会启动相机：

```
void MainWindow::on_pushButton_continue_pressed()
{
    camcapture = new CamCapture( imgResolution, defaultPath, this);
    connect(camcapture, SIGNAL(imgChange(QString)), this, SLOT(changeImg(QString)));
    camcapture->show();
} 
```

这是我的 CamCapture 类的一部分：

```
CamCapture::CamCapture( int Resolution, QString path, QWidget *parent) :
    QFrame(parent),
    ui(new Ui::CamCapture), timer_(this), counter_(0)
{
    ui->setupUi(this);

    /*----some variable initialization---*/

    camInit();

    timer_.start(100);
    connect(&timer_,SIGNAL(timeout()), this,SLOT(captureLoop()));
}

void CamCapture::camInit()
{
    capture_ = cvCaptureFromCAM(0); 
    if (!capture_)
    {
        qDebug()<<"cannot get webcam...";
        ui->label_image->setText("No webcam!");
        ui->label_image->setAlignment(Qt::AlignCenter);
        buttonActiveStatus( false, false, false );
        return;
    }

    cvGrabFrame(capture_); // Grabs frame from camera or file

    image_ = cvRetrieveFrame(capture_); // Gets the image grabbed with cvGrabFrame

    qDebug() << "image size : " << image_->width << "x" << image_->height;

    qDebug() << "\n" <<  ui->label_image->x();
    qDebug() << "\n" <<  ui->label_image->y();
}

QImage CamCapture::Ipl2QImage(const IplImage *newImage)
{
    QImage qtemp;
    if (newImage && cvGetSize(newImage).width > 0)
    {
        int x;
        int y;
        char* data = newImage->imageData;

        qtemp= QImage(newImage->width, newImage->height,QImage::Format_RGB32 );
        for( y = 0; y < newImage->height; y++, data +=newImage->widthStep )
            for( x = 0; x < newImage->width; x++)
            {
                uint *p = (uint*)qtemp.scanLine (y) + x;
                *p = qRgb(data[x * newImage->nChannels+2],
                          data[x * newImage->nChannels+1],data[x * newImage-  >nChannels]);
            }
    }
    return qtemp;
}

void CamCapture::captureLoop()
{
    if ( !capture_ )
    {
        return;
    }

    cvGrabFrame(capture_);
    image_ = cvRetrieveFrame(capture_);
    if (image_)
    {
        counter_ ++;
        qImage_ = Ipl2QImage(image_);
        ui->label_image-    >setPixmap(QPixmap::fromImage(qImage_.scaled(width(),height()),Qt::AutoColor));
    }
}

void CamCapture::on_pushButton_cancel_pressed()
{

      cvReleaseCapture( &capture_ );
      cvDestroyAllWindows();
      delay(100);
      qDebug() << "nb frames :" << counter_;
      CamCapture::close();
}

void CamCapture::on_pushButton_capture_pressed()
{
    savePath = _imgPath;
    timer_.stop();

    frame = cvQueryFrame(capture_); // Gets the image grabbed with cvGrabFrame
}

void CamCapture::on_pushButton_retake_pressed()
{
    timer_.start(100);
    captureLoop();
}

void CamCapture::on_pushButton_save_pressed()
{
    int iwidth  = _imgWidth  * _imgResolution * scaledFactor;
    int iheight = _imgHeight * _imgResolution * scaledFactor;

    QString str = savePath;

    IplImage *small;

    small = cvCreateImage(cvSize(iwidth,iheight), 8, 3);
    cvResize(frame, small);
    cvSaveImage(savePath.toUtf8().constData(),small);

    delay(100);
    _imgNum++;
    emit imgChange(savePath);
    on_pushButton_cancel_pressed(); 
} 
```

上面的代码随机生成错误（导致我的应用程序关闭）如下：

```
 Debugging starts
   &"warning: GDB: Failed to set controlling terminal: Invalid argument\n"
   Corrupt JPEG data: bad Huffman code
   image size :  640 x 480 

   5 

   10 
   nb frames : 11 
   VIDIOC_QUERYCTRL: Input/output error
   Debugging has finished 
```

通常，在按下 MainWindow.c 中的 pushButton_continue 或按下 CamCapture.c 中的 pushButton_Save 时会生成错误

在谷歌上找不到任何解决方案。

需要一些建议/帮助/链接来解决这个问题。

提前致谢。

# generator - 从噪声发生器中确定稀有值？（也就是我的世界如何放置矿石）

> ID：12275170
> 
> 赞同：3
> 
> 时间：2012-09-05T05:47:44.850
> 
> 标签：generator, minecraft, perlin-noise

我目前正在使用 Perlin Noise 开发 2d 世界生成器（侧卷轴），我希望能够让稀有矿石散布在地形中 - 但我不完全确定如何去做。

我正在考虑做的是，在循环二维数组并生成世界时，收集所有数字（或数字范围）的列表并将它们添加到数组中 - 然后确定每个数字/数字范围的稀有性，然而，像这样放置矿石......

这似乎很慢，必须*有*更快、更好的方法。在那儿？

**编辑：**表达我的问题的另一种方式是，Minecraft 究竟是如何放置矿石的，以及在 2d（从侧面）游戏中使用 Perlin 噪声的最佳方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T18:56:25.697

您可以根据随机概率放置块。但是，由于数量稀少，这意味着大片区域将没有块状物，而其他一些地方的稀有矿石相对丰富。更好的算法可能是：建立一个基础区域，确定一个可接受的密度（例如：每个区域从一到三个稀有块），然后计算每个区域稀有块的随机位置。

一个例子：您确定在每 1000x1000 区域内有 1-3 个稀有肿块是可以接受的。然后，对于这些区域中的每一个，您计算稀有块的数量为`1+floor(random*3)`(where `0<random<1`)，并计算生成的稀有块的随机坐标。例如，您还可以将约束添加为稀有块之间的最小距离，这对于随机噪声生成器是不可能的：如果一个稀有块放置得太靠近另一个稀有块，只需重新计算其位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:56:33.950

正如 Notch 在[这篇](http://notch.tumblr.com/post/3746989361/terrain-generation-part-1)博文中所述，Minecraft 用于生成地形的确切公式是一个秘密。

我认为在 2d Minecraft-ish 游戏中做到这一点的最佳方法是逐块生成世界，并带有 perlin 噪声（看看[这个](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series4/Perlin_noise.php)教程）。然后在创建每个块时，将 X 和 Y 发送到另一个函数，该函数将计算块中存在矿石的可能性，如果存在，它将是什么矿石。如果该函数返回一个矿石，那么您可以将该块重新创建为该矿石。

希望这有帮助。如果您想要更具体的编码示例，请告诉我！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T20:47:45.007

我相信 Minecraft 的地形是基于 Perlin 噪声生成的几个八度音阶，然后通过拉伸使其平滑。我假设某些特征会在进一步的通道中添加，例如洞穴、悬垂等。您很可能必须尝试使用​​ Perlin 或其他噪声函数才能为您的景观提供令人愉悦的输出。这种噪声函数的好处是，对于给定的种子，它们将为一组输入提供可预测的、可重复的输出，即您可以像 Minecraft 那样以块的形式生成景观，而不会出现任何不连续性。这里还有更多：[https ://gamedev.stackexchange.com/questions/28970/c-perlin-noise-generating-endless-terrain-chunks](https://gamedev.stackexchange.com/questions/28970/c-perlin-noise-generating-endless-terrain-chunks)

在矿石生成方面，以随机加权分布分布的单个矿石块不会给您带来非常愉快的输出。您很可能更喜欢以看起来自然的块状生产矿石。您可以通过再次使用 Perlin 来生成局部口袋或垂直拉伸的可开采材料脉来做到这一点。您可以按原样使用该功能并将您的景观高度图用作截止点（这样您就不会在半空中得到矿石！），或者您可以输入您的一维景观生成功能作为另一个输入，这意味着您可以生产其分布针对不同深度进行缩放的矿石。至于矿石的稀有度，您可以使用与 2D 噪声输出不同的截止值进行放置，还可以试验频率和持久性输入值。

我喜欢这里给出的洞穴生成函数：[http](http://www.gamedev.net/blog/33/entry-2227887-more-on-minecraft-type-world-gen/) ://www.gamedev.net/blog/33/entry-2227887-more-on-minecraft-type-world-gen/ 脊形多重分形当然可以适应生成矿石模式或其他地下特征，但如果采用这种方法，则会增加复杂性。

**编辑：**

第一个链接可能是您自己在 gamedev 上发布的问题！你是同一个乔恩吗？:)

# spring - 从日志记录附加程序类访问spring bean

> ID：12275171
> 
> 赞同：5
> 
> 时间：2012-09-05T05:47:52.017
> 
> 标签：spring, log4j

我有 log4j DailyRollingFileAppender 类，其中 setFile() 方法我需要检查数据库值以决定使用哪个文件进行日志记录。

```
DailyRollingFileAppender class 

public void setFileName()
{
    isLoginEnabled = authenticationManager.checkLoginLogging();
} 
```

这里'authenticationManager'是用于使用spring依赖注入功能进行数据库调用的类的对象。

```
spring-beans.xml
<bean id="dailyRollingFileAppender" class="com.common.util.DailyRollingFileAppender">
 <property name="authenticationManager">
     <ref bean="authenticationManager"/>
 </property>
</bean>

<bean id="authenticationManager" class="com.security.impl.AuthenticationManagerImpl">
    <property name="userService">
        <ref bean="userService"/>
</property>
</bean> 
```

现在，当我启动我的应用程序时，log4j 首先被启动，并且由于 spring-beans 尚未被调用，它在方法 setFileName() 中抛出 NullPointerException。那么有没有办法可以调用'authenticationManager.checkLoginLogging();' 来自 DailyFileAppender 类，以便在加载 log4j 时它应该能够获取数据库值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-06-01T23:58:29.490

晚了几年，但我希望这对某人有所帮助。

我追求类似的功能——我有一个自定义附加程序，我想使用一个自动装配的 bean 来使用我们构建的服务执行一些日志记录。通过使附加程序实现 ApplicationContextAware 接口，并使我通常自动装配的字段为静态，我能够将弹簧控制的 bean 注入到 log4j 已实例化的附加程序的实例中。

```
@Component
public class SslErrorSecurityAppender extends AppenderSkeleton implements ApplicationContextAware {

    private static SecurityLogger securityLogger;

    @Override
    protected void append(LoggingEvent event) {
        securityLogger.log(new SslExceptionSecurityEvent(SecurityEventType.AUTHENTICATION_FAILED, event.getThrowableInformation().getThrowable(), "Unexpected SSL error"));
    }

    @Override
    public boolean requiresLayout() {
        return false;
    }

    @Override
    public synchronized void close() {
        this.closed = true;
    }

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) {
        if (applicationContext.getAutowireCapableBeanFactory().getBean("securityLogger") != null) {
            securityLogger = (SecurityLogger) applicationContext.getAutowireCapableBeanFactory().getBean("securityLogger");
        }
    }
} 
```

# php - 输入和上传的不匹配方法？

> ID：12275174
> 
> 赞同：1
> 
> 时间：2012-09-05T05:48:16.720
> 
> 标签：php, jquery, ajax, post, get

我用 php 和 ajax 开发网站，我有问题，当我输入数据时，我在 Ajax 上使用 Get 方法，但是当我想上传图像时，我必须使用 POST 方法，因为我们可以只用 POST 方法上传，soz 如何获取文件输入数据库的名称，但输入和上传的方法不同？我需要逻辑

或任何输入和上传的想法？soz 已经使用 get 方法制作了整个网络，如果更改为 post 方法，这可能是

感谢您的帮助，最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:59:23.110

你可以使用第三方上传器吗？

[http://fineuploader.com/](http://fineuploader.com/)

该插件在 MIT 许可、GNU GPL 2 或更高版本以及 GNU LGPL 2 或更高版本下开源。

使用这个 AJAX 文件上传器，它具有高度迁移的功能。

希望这会有所帮助。随时问任何问题。

# knockout.js - 带有 HTML 到 PDF 转换器的 Knockout JS

> ID：12275177
> 
> 赞同：4
> 
> 时间：2012-09-05T05:48:21.830
> 
> 标签：knockout.js, knockout-2.0

我到处寻找答案，也许答案就是——它不存在，但希望有人有一些魔力。

我正在使用 Knockout 在一个页面上绑定多个表单。这一切都非常有效。然而，尝试将这些表单发送到 PDF 转换器已被证明是一项挑战。

呈现的 HTML 仍然显示为 Knockout-y。我尝试使用 $('body').html() 获取呈现的 DOM，但我仍然获得具有数据绑定属性的 HTML 标记。有没有办法让最终呈现的纯 HTML 传递给 PDF 转换器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:29:30.853

您可以在 afterRender 事件中将渲染的元素添加到 DOM 之前获取它们。有关更多信息，请参阅[http://knockoutjs.com/documentation/template-binding.html#note_3_using_afterrender_afteradd_and_beforeremove](http://knockoutjs.com/documentation/template-binding.html#note_3_using_afterrender_afteradd_and_beforeremove)。

如果您需要访问最终呈现的元素，请创建自定义绑定 ( [http://jsfiddle.net/nE7kK/](http://jsfiddle.net/nE7kK/) )：

```
<body data-bind="getRenderedElements: viewModel">
    <ul data-bind="foreach: viewModel">
        <li data-bind="text: name"></li>
    </ul>
</body>

viewModel = ko.observableArray([
    { name: "Bungle", type: "Bear" },
    { name: "George", type: "Hippo" },
    { name: "Zippy", type: "Unknown" }
]);

ko.bindingHandlers.getRenderedElements = {
   update: function (element, valueAccessor) {
       // use timeout so browser has time to render the elements
       setTimeout(function() {
            var html = $(element).html();
            alert(html);
       }, 1000);
   }
};

ko.applyBindings(viewModel); 
```

注意：如果您使用虚拟元素，您应该告诉敲除允许 getRenderedElements 绑定访问这些元素，请参阅：http: [//knockoutjs.com/documentation/custom-bindings-for-virtual-elements.html](http://knockoutjs.com/documentation/custom-bindings-for-virtual-elements.html)

# javascript - 如何自动刷新jqgrid？

> ID：12275178
> 
> 赞同：1
> 
> 时间：2012-09-05T05:48:21.057
> 
> 标签：javascript, jquery, jqgrid

我使用以下脚本**将 sql 数据库中的详细信息绑定到 jqgrid** 。添加、编辑、删除工作正常，我的问题是，如果我尝试在 jqgrid 中添加、编辑、删除数据，它已在数据库中更新但未显示在我**刷新页面**后的jqgrid然后数据显示在jqgrid中。**单击提交按钮后如何自动刷新jqgrid？**

```
 <script type="text/javascript">

          $(document).ready(function(){
          var mydata=new Array();

                $.extend({
                getValues: function(url) {
                var result = null;

                $.ajax({

                    url: url,
                    type: 'POST',
                    data:'Param=value',
                    async:false,
                    success: function(data) {
                            result=JSON.parse(data);
                             }
                        });
                  return result;
                }

                });

                mydata = $.getValues(Some url);//get the data from the url

           $("#datagrid").jqGrid({

                datatype: "local",
                data: mydata,
                colNames:['companyid','company', 'price', 'Change','perchange','LastUpdated'],
                colModel:[
                    {name:'companyid',index:'companyid', width:100,editable:true,editoptions:{size:10}},
                    {name:'company',index:'company', width:100,editable:true},
                    {name:'price',index:'price', width:100,editable:true,editoptions:{size:10}},
                    {name:'Change',index:'Change', width:100,editable:true,editoptions:{size:25}},
                    {name:'perchange',index:'perchange', width:100, align:"right",editable:true,editoptions:{size:10}},
                    {name:'LastUpdated',index:'LastUpdated', width:200, align:"right",editable:true,editoptions:{size:10}}
            ],
            rowNum:10,
            rowList:[10,20],
            loadonce: true,
            pager: '#navGrid',
            sortname: 'companyid',
            sortorder: "asc", 
            height: 210,
            width:600,
            onSelectRow: function(id){
                   getID = jQuery("#datagrid").jqGrid('getCell', id, 'companyid')
                },
            viewrecords: true,
            caption:"JQ GRID"
            });

             jQuery("#datagrid").jqGrid('navGrid','#navGrid',{edit:true,add:true,del:true, addtext: 'Add', edittext: 'Edit', deltext: 'Delete'},

            //For Edit
                 {
                  closeOnEscape: true,
                  closeAfterEdit: true,
                  reloadAfterSubmit:true, 
                  closeOnEscape: true,
                  url:'Some url'

                 },
            // For Add
                 {

                 closeOnEscape: true,
                 closeAfterAdd: true,
                 reloadAfterSubmit: true, 
                 closeOnEscape: true,
                 url: 'Some url'
                 },       
            // For Delete
               {
                    url:'Some url',
                    closeAfterDelete: true,
                    reloadAfterSubmit: true, 
                    closeOnEscape: true,
                    onclickSubmit: function(e, postdata)
                    {
                     e.url = 'Some url'
                    }
               }

             );

          });

          </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T05:59:29.597

您需要触发`reloadGrid`：-

```
 $("#datagrid").trigger("reloadGrid"); 
```

# php - 在我的页面中打印 HTML 关闭标记

> ID：12275182
> 
> 赞同：0
> 
> 时间：2012-09-05T05:48:43.030
> 
> 标签：php, html

`$description`来自数据库的数据或值是

```
<div><a href="www.google.com">Henry</a></div> 
```

我的 HTML 代码

```
<input type="textbox" id="textbox" value=""/>
<input type="hidden" id="hidden" value="<?php echo $description; ?>"/> 
```

输出 ：
![我的输出](../Images/21a6ae53b45c8ad8c04ff789cd3f0a23.png)

如果代码是

```
<input type="hidden" id="hidden" value='<?php echo $description; ?>'/> 
```

它工作正常！..有人请告诉我这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:54:21.390

您试图在表单中隐藏输入的值中包含 HTML 代码？这听起来不对。

如果您需要保持原样，您至少应该使用[htmlentities](http://www.php.net/manual/en/function.htmlentities.php)将其设为字符串：

```
<input type="hidden" id="hidden" value="<?php echo htmlentities($description); ?>"/> 
```

一个例子：

```
<?php
$str = "A 'quote' is <b>bold</b>";

// Outputs: A 'quote' is &lt;b&gt;bold&lt;/b&gt;
echo htmlentities($str);

// Outputs: A &#039;quote&#039; is &lt;b&gt;bold&lt;/b&gt;
echo htmlentities($str, ENT_QUOTES);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:57:21.923

看看 " 和 ' 之间的区别：

如果您的代码是：

```
 $description = <div><a href="www.google.com">Henry</a></div> 
```

和

```
 <input type="hidden" id="hidden" value="<?php echo $description; ?>"/> 
```

所以这实际上意味着

```
 <input type="hidden" id="hidden" value="<div><a href="www.google.com">Henry</a></div>"/> 
```

和 url 关闭“值”之前的“，所以值实际上是 -

```
 value="<div><a href=" 
```

因此，请尝试在 url (google) 或值中使用 ' 而不是 " （不能同时使用两者）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T06:01:12.847

你的代码变成了这样...

```
<input type="hidden" id="hidden" value = "<div><a href="www.google.com" > Henry </a></div> "/> 
```

您可以将其划分为...

`<input type="hidden" id="hidden" value = "<div><a href="www.google.com" >`

`Henry`

`</a></div>`

`"/>`

你就是这样得到的`Henry"/>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T06:05:57.487

这里有2个问题，

1.  首先使用[htmlentities](http://www.php.net/manual/en/function.htmlentities.php)将所有适用的字符转换为 HTML 实体。

    ```
    htmlentities($description); 
    ```

2.  并且使用单引号而不是双引号是公平的。参考[链接](http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.2.2)

    > 默认情况下，SGML 要求使用双引号（ASCII 十进制 34）或单引号（ASCII 十进制 39）分隔所有属性值。当值由双引号分隔时，可以在属性值中包含单引号，反之亦然

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T06:28:08.917

这是您的浏览器看到代码的方式：

```
<input type="textbox" id="textbox" value="<div><a href="www.google.com">Henry</a></div>
"/> 
```

看看双引号如何没有意义？

如果要保留双引号，则需要使用[htmlentities](http://www.php.net/manual/en/function.htmlentities.php)。

```
$description = htmlentities($description);

<input type="hidden" id="hidden" value="<?php echo $description; ?>"/> 
```

此外，您的链接“www.google.com”将指向与您的目录相关的名为 www.google.com 的页面。请务必使用绝对路径：[http ://www.google.com](http://www.google.com)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T05:54:28.457

像这样的简单替换

```
<div><a href='www.google.com'>Henry</a></div> 
```

或者像这样

```
<input type="textbox" id="textbox" value=""/>
<input type="hidden" id="hidden" value='<?php echo $description; ?>'/> 
```

但**并非**两者都应该做到这一点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-05T05:58:54.810

[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

试试这个：

```
div><a href='www.google.com'>Henry</a></div>

<input type="textbox" id="textbox" value=""/>
<input type="hidden" id="hidden" value='<?php echo strip_tags($description); ?>'/> 
```

# php - PHP、DOM、XML 解析

> ID：12275186
> 
> 赞同：2
> 
> 时间：2012-09-05T05:49:00.563
> 
> 标签：php, xml, dom, removechild

我是 PHP 新手以及 DOM 和 XML 解析的整个世界，但在这里我偶然发现了这个。如果删除一个子节点然后调用`hasChildNodes()`父节点，它将返回一个非零数。但是，如果我们将 设置`preserveWhiteSpace`为`FALSE`，则不会出现此问题。所以我的问题是我们如何`hasChildNodes()`在调用后返回 0 `removeChild`（假设只有一个孩子），同时保留空格和格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:51:59.783

你真的不能，你必须遍历子节点并过滤掉你不关心的那些（在这种情况下是文本节点）。

在伪代码中：

```
children = node->getChildren();

array_filter(children, function (element) {
    return element->isTextNode() && empty(trim(element->getText()));
}); 
```

# perl - 比较perl中的两个非ASCII字符串

> ID：12275188
> 
> 赞同：1
> 
> 时间：2012-09-05T05:49:12.093
> 
> 标签：perl

我无法比较两个非 ascii 字符串，尽管两个字符串在控制台上显示相同。以下是我尝试过的。请让我知道这里缺少什么代码，以便两个变量相等。

```
if($lineContent[7] ne $name) {
  /*Control coming to here*/
  print "###### Values MIS-MATCHED\n";
} else {
  print "###### Values MATCHED\n";
} 
```

`$lineContent[7]`来自 CSV 文件

`$name` 来自 XML 文件

**当 Putty 的控制台在默认字符集中时**

```
CSV Val: ENB69-åºå°å±
XML Val: ENB69-åºå°å± 
```

**当 Putty 的控制台设置为 UTF-8 时**

```
CSV Val: ENB69-基地局
XML Val: ENB69-基地局 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T08:35:32.323

```
#!/usr/bin/perl

use warnings;
use strict;
use Encode;

binmode STDOUT, ":encoding(utf8)";
open F1, "<:utf8", "$ARGV[0]" or die "$!";
open F2, "<", "$ARGV[0]" or die "$!";

my $a1 = <F1>;
chomp $a1;
my $a2 = <F2>;
chomp $a2;

if ($a1 eq $a2) {
    print "$a1=$a2 is true\n";
} else {
    print "$a1=$a2 is false\n";
}

my $b = decode("utf-8", $a2);
if ($a1 eq $b) {
    print "$a1=$b is true\n";
} else { 
    print "$a1=$b is false\n";
} 
```

我编写了上面列出的测试程序。并用一行创建一个文本文件：基地局。当你用这个文本文件运行程序时，你可以得到一个假和一个真。我不知道你的程序中有什么，但我猜 csv 文件是作为纯文本读取的，没有任何解析器或编码/解码过程，而 xml 文件必须由某个库解析，因此内部编码机制不同对于两个字符串变量，包括一些编码符号的前导字节。简而言之，您可以尝试对两个字符串变量之一进行编码或解码，并查看它们是否匹配。

顺便说一句，这是我在这里的第一个答案，希望对您有所帮助;-)

从您的转储结果来看，很明显。第一个变量存储9个字符，在其内部结构中以utf-8编码构造基地局。第二个变量在其内部结构中代表 3 个字符。它们具有相同的字节流，并且在字节流视图中相等，但在基于字符的比较中不相等。

使用解码/编码可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:11:56.680

如果您知道您正在比较 unicode 字符串，就个人而言，我会更加小心。[`Unicode::Collate`](http://p3rl.org/Unicode::Collate)是作业的模块。

当然，您还应该阅读 tchrist 现在著名的关于在 Perl 中启用 unicode 的 SO 帖子，[https:](https://stackoverflow.com/a/6163129/468327) //stackoverflow.com/a/6163129/468327 ，但[`utf8::all`](http://p3rl.org/utf8::all)在打开适当的 unicode 支持方面做得非常出色。请注意，更好的 unicode 处理被添加到版本中的 Perl 核心中，`5.14`所以我在这里也需要它。

最后，这是一个进行比较的快速脚本，当然您可以根据需要通过读取文件来填充变量：

```
#!/usr/bin/env perl

use v5.14;
use strict;
use warnings;

use utf8::all;
use Unicode::Collate;

my $collator = Unicode::Collate->new;

my $csv = "ENB69-基地局";
my $xml = "ENB69-基地局";

say $collator->eq($csv, $xml) ? "equal" : "unequal"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T15:31:25.747

您的输入：

```
"ENB13-\345\237\272\345\234\260\345\261\200"
"ENB13-\x{57fa}\x{5730}\x{5c40}" 
```

如您所见，这些显然不一样。具体来说，第一个是另一个的UTF-8编码。始终解码输入。始终对输出进行编码。

```
use strict;
use warnings;

use utf8;                             # Source code is saved as UTF-8
use open ':std', ':encoding(UTF-8)';  # Terminal expects UTF-8

my $name = "ENB69-基地局";

while ($line = <STDIN>) {
   chomp;
   my @lineContent = split /\t/, $line;
   print($lineContent[7] eq $name ?1:0, "\n");  # 1
} 
```

# apache-flex - Flex 应用程序的许可系统

> ID：12275189
> 
> 赞同：3
> 
> 时间：2012-09-05T05:49:25.090
> 
> 标签：apache-flex, licensing

有没有人有为 Flex 应用程序创建许可系统的经验。我的 Flex 应用程序是嵌入在 aspx 页面中的 swf。对于数据检索，它访问 Web 服务。

我的目的是在许可证基础上将其出售给我的客户。（例如：使用序列号）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:18:04.740

我想我已经回答了很多；但我找不到它。这里有两个服务：

1.  [硝基LM](http://nitrolm.com)
2.  [共享](http://www.sharify.it/)

我想曾经还有一个，但我不记得名字了，我的 Google-Fu 让我失望了。

您没有详细说明您希望您的许可计划如何运作；所以很难给你细节。算法并不复杂，但细节可以变得非常复杂。

我在早期为 Flextras 构建了一些东西，可以为非授权的 Flex 组件添加水印。要点是：

1.  加载序列号。
2.  执行一些秘方算法！在 Flextras 模型中，这是在运行时根据编译时指定的序列号完成的。它根据域、组件和组件的版本对序列号数据进行了一些检查。对于一个应用程序，您可能想要检查其他数据（例如用户名），并且可能需要针对某个中央存储库服务器。

3.  如果用户被允许访问？如果是这样，那就让他们去做吧。

4.  如果不; 然后向他们显示“无效”消息/屏幕/等。

# java - 泛型中类型参数中的常量

> ID：12275190
> 
> 赞同：1
> 
> 时间：2012-09-05T05:49:32.520
> 
> 标签：java, generics, constants, wildcard, extends

我正在阅读 Thinking in java 4th edition，我遇到了这段代码

```
class SuperHero<POWER extends SuperPower> {
    POWER power;

    SuperHero(POWER power) {
        this.power = power;
    }

    POWER getPower() {
        return power;
    }
} 
```

我正在查看这段代码的整个类定义，但似乎找不到关键字 POWER，所以我假设它是一个常量？在这种情况下，“POWER”实际上是什么？

这是整个类的定义

```
package tij4.generics;

//: generics/EpicBattle.java
//Demonstrating bounds in Java generics.
import java.util.*;

//Marker Interface
interface SuperPower {
}

interface XRayVision extends SuperPower {
    void seeThroughWalls();
}

interface SuperHearing extends SuperPower {
    void hearSubtleNoises();
}

interface SuperSmell extends SuperPower {
    void trackBySmell();
}

class SuperHero<POWER extends SuperPower> {
    POWER power;

    SuperHero(POWER power) {
        this.power = power;
    }

    POWER getPower() {
        return power;
    }
}

class SuperSleuth<POWER extends XRayVision> extends SuperHero<POWER> {
    SuperSleuth(POWER power) {
        super(power);
    }

    void see() {
        power.seeThroughWalls();
    }
}

class CanineHero<POWER extends SuperHearing & SuperSmell> extends
        SuperHero<POWER> {
    CanineHero(POWER power) {
        super(power);
    }

    void hear() {
        power.hearSubtleNoises();
    }

    void smell() {
        power.trackBySmell();
    }
}

class SuperHearSmell implements SuperHearing, SuperSmell {
    public void hearSubtleNoises() {
    }

    public void trackBySmell() {
    }
}

class DogBoy extends CanineHero<SuperHearSmell> {
    DogBoy() {
        super(new SuperHearSmell());
    }
}

public class EpicBattle {
    // Bounds in generic methods:
    static <POWER extends SuperHearing> void useSuperHearing(
            SuperHero<POWER> hero) {
        hero.getPower().hearSubtleNoises();
    }

    static <POWER extends SuperHearing & SuperSmell> void superFind(
            SuperHero<POWER> hero) {
        hero.getPower().hearSubtleNoises();
        hero.getPower().trackBySmell();
    }

    public static void main(String[] args) {
        DogBoy dogBoy = new DogBoy();
        useSuperHearing(dogBoy);
        superFind(dogBoy);
        // You can do this:
        List<? extends SuperHearing> audioBoys;
        // But you can't do this:
        // List<? extends SuperHearing & SuperSmell> dogBoys;
    }
} // /:~ 
```

**附加信息：** 我还查看了这个包中包含的不同类。他们都没有定义枚举“POWER”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T05:53:40.497

它只是一个泛型类型名称，就像`T`在`java.util.List<T>`. 作者只是为这种类型选择了一个更大的名称。

# jquery - 当元素是唯一的内容时，使用 jQuery 定位元素

> ID：12275195
> 
> 赞同：2
> 
> 时间：2012-09-05T05:49:42.687
> 
> 标签：jquery, jquery-selectors, tags, children, targeting

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:56:54.467

您可以使用[filter()](http://api.jquery.com/filter/)和[contents()](http://api.jquery.com/contents/)来验证该`<p>`元素只有一个子节点并且该节点是一个`<b>`元素：

```
$("#selector p").filter(function() {
    var $contents = $(this).contents();
    return $contents.length == 1 && $contents.eq(0).is("b"); 
}).replaceWith(function() {
    return "<p class='h_replace'>" + $(this).text() + "</p>";
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:00:00.080

试试这个：

```
var els = $('p').filter(function() {
    return /^<(b)>.+<\/\1>$/.test($.trim($(this).html()));
}); 
```

它会让你拥有一个没有任何文本节点`p`的独生子女。`b`您可以`(b)`使用上面代码中的任何标签进行更改。

**编辑：**不知道为什么投反对票，但这很好用：

*   `<p><b>Something</b></p> // true`
*   `<p> <b>Something</b> </p> // true`
*   `<p><b>Something</b> lorem</p> // false`
*   `<p>lorem <b>Something</b></p> // false`
*   `<p><span><b>Something</b></span></p> // false`

**演示：http:** [//jsfiddle.net/elclanrs/LFt8x/](http://jsfiddle.net/elclanrs/LFt8x/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:17:49.147

[elclanrs](https://stackoverflow.com/users/670396/elclanrs) answer 可以正确选择文本。同样，演示页面在[这里](http://bit.ly/UqWtH9)。

最终代码：

```
$(document).ready(function() {

    var pbs = $('#selector p').filter(function() {
        return /^<(b)>.+<\/\1>$/.test($.trim($(this).html()));
    });

    pbs.replaceWith(function() {
        return '<p class="h_replace">' + $(this).text() + '</p>';
    }).addClass('h_replace2').css('width', '100%');

}); 
```

StackOverflow 是最伟大的。感谢所有参与进来的人！节省了我几个小时（我的意思是几天！！）谢谢！

# java - 如何解析 Java servlet 中的响应 SOAP 消息？

> ID：12275197
> 
> 赞同：0
> 
> 时间：2012-09-05T05:49:59.997
> 
> 标签：java, web-services, jsp, servlets, soap

我正在开发一个 SOAP 网络服务。我已完成发送 SOAP 请求以获取 XML 响应。

我不知道在 servlet 或 JSP 中解析响应 SOAP 消息。
任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:00:02.690

我强烈建议您使用[JAXB](http://www.oracle.com/technetwork/articles/javase/index-140168.html)之类的东西将响应 XML 解析为更易于使用的普通 Java 对象。

简而言之，您只需要将 Web 服务的 WSDL 文件输入 JAXB，它将生成一组适合服务响应的类和一个用于处理响应 XML 的解析器。

如果您使用的是 NetBeans，这里有一个简短的教程：http: [//netbeans.org/kb/docs/websvc/jaxb.html](http://netbeans.org/kb/docs/websvc/jaxb.html)

或者，如果您使用的是 Maven： [http ://blog.dawouds.com/2008/09/maven-2-wsdl-to-java-using-jaxb.html](http://blog.dawouds.com/2008/09/maven-2-wsdl-to-java-using-jaxb.html)

# drools - 规则对象模型：声明式 vs POJO

> ID：12275202
> 
> 赞同：0
> 
> 时间：2012-09-05T05:50:38.797
> 
> 标签：drools, drools-guvnor

我已经读过将规则对象模型与业务层对象模型分开是明智的。drools-guvnor 支持两种模型：声明式和 POJO。哪个更适合在大型企业应用程序中使用？

设想的架构由一个应用程序服务器上的 Presentation+Business Layer 和另一个具有包装 Web 服务的 guvnor 组成，其中 Rules WS 为业务逻辑公开 SOAP Web API 以验证规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:15:13.917

我更喜欢 POJO。如果一个模型中有太多的模型和许多属性，那么在 guvnor 中使用声明性将是一项艰巨的工作。POJO 在您的 IDE 中会更加灵活和容易。当模型需要更改时，您应该再次上传 POJO jar。

# c++ - C++11：原子变量：lock_free 属性：这是什么意思？

> ID：12275214
> 
> 赞同：2
> 
> 时间：2012-09-05T05:52:33.857
> 
> 标签：c++, c++11, atomic

我想了解 c++11 中原子变量的 lock_free 属性是什么意思。我确实用谷歌搜索并看到了这个论坛上的其他相关问题，但仍然有部分理解。欣赏是否有人可以以简单的方式端到端地解释它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T06:21:54.703

从谈论如果它*不是无*锁的会发生什么开始可能是最容易的。

处理大多数原子任务的最明显方法是锁定。例如，要确保一次只有一个线程写入变量，您可以使用互斥锁来保护它。任何要写入变量的代码都需要在写入之前获取互斥锁（然后释放它）。一次只有一个线程可以拥有互斥锁，因此只要所有线程都遵循协议，在任何给定时间最多只能有一个线程可以写入。

但是，如果您不小心，这可能会陷入僵局。例如，假设您需要将*两个*不同的变量（每个都受互斥锁保护）作为原子操作写入——即，您需要确保在写入一个变量时，您也写入另一个变量）。在这种情况下，如果不小心，可能会导致死锁。比如我们调用两个互斥量A和B。线程1获取互斥量A，然后尝试获取互斥量B。同时，线程2获取互斥量B，然后尝试获取互斥量A。由于每个人都持有一个互斥量，谁都不能兼得，也不能朝着自己的目标前进。

有多种策略来避免它们（例如，所有线程总是尝试以相同的顺序获取互斥锁，或者在合理的时间内未能获得互斥锁时，每个线程释放它持有的互斥锁，等待一些随机数量的时间，然后再试一次）。

然而，对于无锁编程，我们（显然）不使用锁。这意味着像上面这样的死锁根本不会发生。正确完成后，您可以保证所有线程不断朝着它们的目标前进。与流行的看法相反，这并不*意味着*代码一定会比使用锁的编写良好的代码运行得更快。然而，这确实意味着消除了上述死锁（以及一些其他类型的问题，如活锁和某些类型的竞争条件）。

现在，至于你是如何做到这一点的：答案很简短：它变化很大——范围很广。在很多情况下，您正在查看特定的硬件支持以原子地执行某些特定操作。您的代码要么直接使用它们，要么扩展它们以提供仍然是原子且无锁的更高级别的操作。在没有硬件支持的情况下实现无锁原子操作甚至是可能的（尽管很少实用）（但鉴于其不切实际，我将继续尝试更详细地介绍它，至少现在是这样）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T07:02:32.380

Jerry 已经提到了锁的常见*正确性*问题，即它们很难理解和正确编程。

锁的另一个危险是您失去了关于执行时间的确定性：如果获得锁的线程被延迟（例如，被操作系统取消调度，或“换出”），那么*整个程序*可能会被延迟，因为它正在等待锁。相比之下，无锁算法*总是*可以保证取得一些进展，即使任何数量的线程在其他地方被阻塞。

总的来说，无锁编程通常比使用非原子操作的锁定编程*要慢（有时明显慢），因为原子操作会对缓存和流水线造成重大影响；*但是，它提供了延迟的*确定性*和上限（至少是您进程的整体延迟；正如@J99 所观察到的，只要有足够多的*其他*线程正在取得进展，单个线程可能仍然处于饥饿状态）。您的程序可能会变得慢很多，但它永远不会完全锁定并且总是会取得一些进展。

硬件架构的本质允许某些小操作本质上是原子的。事实上，这对于任何支持多任务和多线程的硬件来说都是非常必要*的*。在*任何*同步原语（例如互斥锁）的核心，您都需要*某种*原子指令来保证正确的锁定行为。

因此，考虑到这一点，我们现在知道某些类型（如布尔值和机器大小的整数）可以原子地加载、存储和交换。因此，当我们将这样的类型包装到`std::atomic`模板中时，我们可以预期生成的数据类型确实会提供不使用锁的加载、存储和交换操作。相比之下，您的库实现始终允许将原子实现为由锁保护`Foo`的普通。`Foo`

要测试一个原子*对象*是否是无锁的，可以使用`is_lock_free`成员函数。此外，还有一些`ATOMIC_*_LOCK_FREE`宏可以告诉您原子原始*类型*是否可能具有无锁实例化。如果您正在编写想要无锁的并发算法，那么您应该包含一个断言您的原子对象确实是无锁的，或者对宏进行静态断言以使其具有价值`2`（意味着相应类型的每个对象总是无锁的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T15:25:13.953

无锁是非阻塞技术之一。对于算法，它涉及全局进度属性：每当程序的线程处于活动状态时，它可以在其动作中向前迈出一步，为自己或最终为另一个。

无锁算法应该在激烈的争用下具有更好的行为，其中线程在共享资源上可能花费大量时间等待它们的下一个活动时间片。在您无法锁定的上下文中，它们也几乎是强制性的，例如中断处理程序。

无锁算法的实现几乎总是依赖于比较和交换（有些可能使用诸如 ll/sc 之类的东西）和策略，其中可见的修改可以简化为一个值（主要是指针）更改，使其成为线性化点，然后循环如果值发生变化，则超过此修改。大多数时候，这些算法会尽可能地尝试完成其他线程的工作。一个很好的例子是 Micheal&Scott ( [http://www.cs.rochester.edu/research/synchronization/pseudocode/queues.html](http://www.cs.rochester.edu/research/synchronization/pseudocode/queues.html) ) 的无锁队列。

对于比较和交换这样的低级指令，这意味着实现（可能是相应指令的微代码）是免等待的（参见[http://www.diku.dk/OLD/undervisning/2005f/ dat-os/skrifter/lockfree.pdf](http://www.diku.dk/OLD/undervisning/2005f/dat-os/skrifter/lockfree.pdf) )

为了完整起见，无等待算法对每个线程强制执行进程：每个操作都保证在有限数量的步骤中终止。

# php - 搜索与 MySQL 中的数据匹配的关键字

> ID：12275215
> 
> 赞同：0
> 
> 时间：2012-09-05T05:52:36.173
> 
> 标签：php, mysql, search

我正在整理图书馆系统并修复凌乱的书名。我想编写一个 SQL 查询或 PHP 代码来搜索与 MySQL 表中的数据匹配的关键字。

[tbl_keywords]

```
id | keyword             | title
====================================================================
 1 | Harry Potter        | Harry Potter
 2 | Philosopher's Stone | [Harry Potter] Harry Potter and the Philosopher's Stone
 3 | Chamber of Secrets  | [Harry Potter] Harry Potter and the Chamber of Secrets
 4 | Dr. Seuss           | Dr. Seuss
 5 | Green Eggs and Ham  | [Dr. Seuss] Green Eggs and Ham
 6 | The Cat in the Hat  | [Dr. Seuss] The Cat in the Hat 
```

例如，

```
"Harry Potter(1)" => matches 1
"[Harry Potter] Harry Potter and the Philosopher's Stone(1)" => matches 1 and 2
"(HARRY POTTER2) THE CHAMBER OF SECRETS" => matches 1 and 3
"Dr. Seuss - Green Back Book" => matches 4
"Green eggs and ham" => matches 5
"the cat in the hat(Dr. Seuss)" => matches 4 and 6 
```

这也可能（易于实施）吗？如果要做的太多，我只需将变量值添加到表中..

```
"HarryPotter" => matches 1
"Dr.Seuss" => matches 4
"Dr Seuss" => matches 4 
```

任何有关如何执行此操作的帮助或想法将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:51:01.263

Jst是这样写的

```
$element_to_search='//get here the input to search';
$sql2 = 'Select * from `tbl_keywords` where keyword LIKE "%'.$element_to_search.'%" OR title LIKE "%'.$element_to_search.'%"'; 
```

在您的情况下，始终将要搜索的 key_element 放在两个“%HERE%”之间，因为

"HERE%" 将产生键以 and 开头的结果

"%HERE" 将得到其键以结尾的结果，

但是如果你输入“%HERE%”，它将导致所有包含“key_element”作为子字符串的元素。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:10:47.653

在 SQL where 条件中使用 LIKE。

例子：

```
$input_search //your search input
$sql1 = 'Select * from `tbl_keywords` where keyword ="'.$input_search.'"';
//...the rest of code
$sql2 = 'Select * from `tbl_keywords` where keyword LIKE "%'.$input_search.'%" OR title LIKE "%'.$input_search.'%"';
//... the rest of code
//here is IF condition to get the desire result from the sql result you got 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:52:56.470

PHP stristr 用于查找数组中的每个关键字，而不是 SQL。

[在文本中搜索，并通过 php 选择关键字](https://stackoverflow.com/questions/10871590/search-in-text-and-select-keywords-by-php)

然后，在 MySQL 表中查找 ID 以获取其他信息/字段；标题、类别等

```
$keywords = array(NULL, 'Harry Potter', 'Philosopher\'s Stone', 'Chamber of Secrets');
$input_title = "[Harry Potter] Harry Potter and the Philosopher\'s Stone(1)"

$keyword_found = array();
foreach ($keywords as $key => $val) {
    if (stristr($input_title, $val)) $keyword_found[] = $key;
}

if ($keyword_found) {
    foreach ($keyword_found as $val) {
        $sql = "SELECT * FROM `tbl_keywords` WHERE `id` = '" . $val . "'";
        ...
    }
} 
```

它不整洁，必须有更好的方法，但是..至少它有效！再次感谢那些试图帮助我的人:)

# ruby - Ruby 按列对 .dat 文件进行排序

> ID：12275223
> 
> 赞同：3
> 
> 时间：2012-09-05T05:53:33.660
> 
> 标签：ruby, file, sorting

我对红宝石很陌生。我正在尝试打开一个文件 .dat 并按第二列降序排序。到目前为止，我能够打开文件并阅读所有内容。请问有什么建议吗？非常感谢。

文件：

```
 1 88 59 74 53.8 0.00 280 9.6 270 17 1.6 93 23 1004.5
 2 79 63 71 46.5 0.00 330 8.7 340 23 3.3 70 28 1004.5
 3 77 55 66 39.6 0.00 350 5.0 350 9 2.8 59 24 1016.8
 4 77 59 68 51.1 0.00 110 9.1 130 12 8.6 62 40 1021.1

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T06:54:19.870

```
output_lines = open("in.dat").lines.sort_by { |line| -line.split[1].to_i }
open("out.dat", "w") { |f| f.write(output_lines.join) } 
```

这是一个非常基本的实现，要用于大型输入数据，应该稍微调整一下（使用正则表达式而不是`String#split`，而不是创建一个全新的字符串来写入文件，等等）。

# javascript - 光标出现在移动 Safari 上的字段加载之前

> ID：12275225
> 
> 赞同：1
> 
> 时间：2012-09-05T05:53:40.410
> 
> 标签：javascript, html, focus

我的 Web 应用程序包含一个登录按钮，该按钮动态地将表单添加到 DOM 树（带有用户名和密码字段）并将焦点设置到用户名字段。一切正常，但是在我不喜欢的字段出现在屏幕上之前，光标会出现一小部分。这是移动 Safari，我不能在焦点命令上设置 setTimeOut（焦点命令必须在用户单击调用的函数中，从另一个函数调用它会导致 Safari 忽略它）。我不能使用讨厌的延迟，因为这也会延迟表单的加载，并且在字段加载之前光标仍然会弹出。

有人有任何（最好是简单的）想法吗？

# ruby-on-rails-3 - 如何在 Rails 应用程序中安装 OpenLayers？

> ID：12275226
> 
> 赞同：3
> 
> 时间：2012-09-05T05:53:41.993
> 
> 标签：ruby-on-rails-3, asset-pipeline, openlayers

我很接近，但似乎缺少一些东西。我已`OpenLayers.js`放入`app/assets/javascripts`中的`theme`文件夹`app/assets/stylesheets`和 中的`img`文件夹`app/assets`。

我有`*= require theme/default/style.css`我的`application.css`文件和`//= require OpenLayers`我的`application.js`文件。

我正在尝试在我的`locations.js.coffee`文件中加载 OpenLayers 地图，但 img 文件夹失败。OpenLayers 尝试从`/locations/img/...`vs.加载图像文件，`/img/...`这似乎也不起作用。

我对 Rails 中的资产管道仍然很模糊，我确信我做错了。我似乎找不到在 Rails 应用程序中安装 OpenLayers 的最佳方式的具体示例。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:20:42.777

将完整的 openlayers 目录放入`vendor/assets/javascripts`（为了节省一些空间，我做了一个符号链接）：

```
vendor/assests/javascripts/openlayers 
```

添加`//= openlayers/OpenLayers`到`app/assets/javascripts/application.js`：

```
//= require openlayers/OpenLayers
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:13:38.680

首先将您的图像放入`assets/images`文件夹中。这将使它们可以通过`http://localhost/assets/yourimage.png`

`img`OpenLayers 中的默认行为是从应与 OpenLayers.js 在树结构中位于同一级别的文件夹中获取图像，这在 Rails 应用程序中不是这种情况。

要覆盖此行为并使 OpenLayers 从 Rails 图像目录中读取图像，您应该设置全局变量`OpenLayers.ImgPath = "/assets"`

# asp.net - 设置网格视图的单元格宽度？

> ID：12275228
> 
> 赞同：0
> 
> 时间：2012-09-05T05:53:49.027
> 
> 标签：asp.net, c#-4.0, gridview

我有网格视图，现在我想为每个单元格设置特定的宽度，我尽力设置每个单元格的宽度，但没有这样做......

这是我应用于模板字段的代码。

```
<ItemTemplate>
<asp:Label ID="lblempid" runat="server" Text='<%#Eval("EmployeeId") %>'></asp:Label>
<ControlStyle Height="10px" Width="20px" />
</ItemTemplate> 
```

我是 c# 和 ASP.Net 的新手，所以请指导我。

提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:56:27.997

你可以这样设置

```
 <asp:GridView ID="GridView1" runat="server">
        <HeaderStyle Width="10%" />
        <RowStyle Width="10%" />
        <FooterStyle Width="10%" />
        <Columns>
            <asp:BoundField HeaderText="Name" DataField="LastName" 
               ItemStyle-Width="10%"
                 />
        </Columns>
    </asp:GridView> 
```

或者

```
 int colWidth = 100;
  if (colWidth > 0)
  {
    for (int i = 0; i < GridView1.Columns.Count; i++)
    {
      GridView1.Columns[i].ItemStyle.Width = colWidth;
    }
  }
} 
```

# c# - 一次性处理所有未处理的对象

> ID：12275237
> 
> 赞同：1
> 
> 时间：2012-09-05T05:54:25.180
> 
> 标签：c#, wpf, memory-leaks

我正在对一个巨大的 WPF 应用程序进行维护。应用程序存在一个问题，它会消耗大量内存，并且消耗会随着时间的推移而增加。我在网上搜索了很多，但我没有找到最好的解决方案。我尝试过很多程序，它们只让我知道发生泄漏的类，但没有人提供防止它的解决方案。

我有以下问题请教专家：

1.  我们可以一次性处理所有未处理的对象吗？
2.  解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:06:13.720

您使用的任何软件都将帮助您识别问题类别，而**不是提供预防或解决问题的解决方案。**

好吧，要一次处理所有对象，您需要在该特定时间引用对象。*我认为这不切实际。*

更好的解决方案是确定没有得到妥善处理的问题类别和资源，然后，正如丹麦人所说，**`IDisposable interface`**为它们实施。然后，您可以在使用结束后显式处置这些对象。

此外，您可以考虑对**`'using'`**这些对象使用该语句来反对处置它们，因为这会减少您显式处置这些对象的痛苦，并且还会导致及时处置。

`using statement` [您可以在此处](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)和[此处](http://www.codeproject.com/Articles/6564/Understanding-the-using-statement-in-C)阅读有关使用的更多信息

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-05T06:02:04.823

您将需要检查那些对象内存不足的类的代码。然后，在这些类中实现 IDisposable 接口。接下来，确保为这些类创建的对象在使用后被丢弃。

恕我直言，简单但不正确，对您的第一个问题的回答将是使用 GC 类中的静态方法。但请注意，GC 会在所有 .Net 应用程序中产生，而不仅仅是您的。

# mysql - MySQL查询：连接表并将记录显示为单行中的逗号分隔字符串

> ID：12275239
> 
> 赞同：5
> 
> 时间：2012-09-05T05:54:32.580
> 
> 标签：mysql, sql, join

假设我的 MySQL 数据库中有以下两个表：

```
Table 1:: EMP: EmpID, EmpName
eg. (1, 'John'), (2,'Alex'),(3,'Tom')

Table 2:: Team: TeamID, ManagerID, MemberID
eg. record1: (Team1, 1, 2), record2: (Team1, 1, 3) 
```

所以有一个 ID 为 team1 的团队，John 是经理，Alex 和 Tom 是它的成员。

我想通过以下方式在屏幕上显示 Team 表的记录

```
| Team  | Manager | Members   |
| team1 | John    | Alex, Tom | 
```

什么应该是 SQL 查询，它将加入上述两个表并在基于 memberID 时返回成员的名称。

此外，结果将显示为 1 行，其中包含用逗号分隔的所有团队成员。

如果有更好的方法来设计这两个表，那么也请提出建议。将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T05:59:53.157

我认为你需要使用**[`GROUP_CONCAT`](http://mahmudahsan.wordpress.com/2008/08/27/mysql-the-group_concat-function/)**. `GROUP_CONCAT()`函数用于将列值连接成单个字符串。如果您要执行多行查找然后在客户端将它们连接起来，这将非常有用。

```
SELECT  b.TeamID as TeamName, 
        a.EmpName as Manager,
        GROUP_CONCAT(c.EmpName) Members
FROM    Emp a
            INNER JOIN Team b
                ON a.EmpID = b.ManagerID
            INNER JOIN  Emp c
                ON b.MemberID = c.EmpID
GROUP BY b.TeamID, a.EmpName 
```

您还可以更改分隔符和排序

```
GROUP_CONCAT( c.EmpName SEPARATOR '-' ),...
GROUP_CONCAT( c.EmpName ORDER BY c.EmpName DESC ),... 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/61107/4 "点击重定向")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:59:04.920

使用[GROUP_CONCAT(expr)](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)你可以尝试类似

> 此函数返回一个字符串结果，其中包含来自组的串联非 NULL 值。如果没有非 NULL 值，则返回 NULL。组中值之间的默认分隔符是逗号 (“,”)。

```
SELECT  t.TeamID Team,
        m.EmpName manager,
        GROUP_CONCAT(mem.EmpName) Members
FROM    Team t INNER JOIN
        Emp m   ON  t.ManagerID = m.EmpID INNER JOIN
        Emp mem ON  t.MemberID = mem.EmpID
GROUP BY    t.TeamID Team,
            m.EmpName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:00:01.800

您需要加入`EMP`表两次并使用`group_concat`分别列出成员。

```
select TeamID as Team, 
       e2.EmpName as Manager,
       group_concat(e1.EmpName) as Members
from Team t
left outer join EMP e1 on t.MemberID = e1.EmpID
left outer join EMP e2 on t.ManagerID = e2.EmpID
group by TeamID 
```

如果您使用 a `left outer join`then，即使团队没有经理或成员，您也会得到结果。如果您只想要有成员和经理的团队，您可以使用`inner join`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-05T06:23:05.147

*使用以下定义定义一个名为 vTeam 的视图：*

> SELECT dbo.Team.TeamID, dbo.EMP.EmpName AS Manager, EMP_1.EmpName AS Member, EMP_1.EmpID AS MemberID, dbo.EMP.EmpID AS ManagerID FROM
> dbo.EMP AS EMP_1 RIGHT OUTER JOIN dbo.Team ON EMP_1.EmpID = dbo.Team.MemberID 左外连接 dbo.EMP ON dbo.Team.ManagerID = dbo.EMP.EmpID

*此查询将为您提供结果：*

> SELECT TeamID, Manager, MemberList = STUFF(( SELECT ',' + Member FROM vTeam as xx WHERE xx.TeamID = x.TeamID and x.Manager = xx.Manager FOR XML PATH(''), TYPE).value(' .[1]', 'nvarchar(max)'), 1, 1, '') FROM dbo.vTeam AS x GROUP BY TeamID,Manager;

Team1 约翰·亚历克斯、汤姆
Team2 亚历克斯·约翰、亚历克斯、汤姆

# php - PHP Cron 作业 - 未指定输入文件“SOMETIME”

> ID：12275240
> 
> 赞同：0
> 
> 时间：2012-09-05T05:54:33.350
> 
> 标签：php

我有 PHP cron 作业，每 30 分钟运行一次。PHP cron 作业在 Godaddy 托管环境中运行，Godaddy 告诉他们这不是他们的问题。我像这样运行PHP

/web/cgi-bin/php5 "$HOME/html/wp-content/themes/twentyten/totalview.php"

totalview.php 中的代码是

```
<?php
include_once("../../../wp-config.php");
include_once("tplinclude/functions.php");
session_start();

    $res=mysql_query("select sum(`total_num`) from `some_table`");
    $row = mysql_fetch_row($res);
    echo $row[0] ;
?> 
```

但是偶尔这会给出错误信息，

* * *

状态：404 Not Found 内容类型：text/html

未指定输入文件。

* * *

问题是我有时会收到此错误。例如，在 48 次执行 8-10 次中，它会显示此错误。休息它会正常工作的。我从数据库中提取了一些数据，所以我知道它大部分时间都有效。

但是为什么它有时会出错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:58:51.327

godady的客户面临的类似问题..

检查这个..

[http://support.godaddy.com/groups/web-hosting/forum/topic/404-not-found-error-using-cron-job/](http://support.godaddy.com/groups/web-hosting/forum/topic/404-not-found-error-using-cron-job/)

# javascript - javascript 日期验证 - 检查两个日期

> ID：12275243
> 
> 赞同：1
> 
> 时间：2012-09-05T05:55:01.020
> 
> 标签：javascript, datetime

我有两个输入框，用于获取格式为“dd/mm/yyyy”的日期值。

我必须为商店创建优惠券，所以我必须检查第一个日期应该是从明天开始。例如。如果今天是 9 月 5 日，那么第一个日期不应早于 9 月 6 日。

第二个日期应该至少比第一个日期大 1 天。如果用户输入第一个日期为 9 月 10 日，则第二个日期不应相同或早于 9 月 10 日。

因此，如果用户输入 2013 年 1 月 31 日（2013 年 1 月 31 日）作为第一个日期，那么第二个日期可以是 2 月 1 日或 2 月 1 日之后的任何日期。所以我也检查日期验证。对于日期验证，我使用以下代码 -

```
 function chkdate(y,m,d)
    {
        var date = new Date(y,m-1,d);
        month1 = date.getMonth()+1;
        date1  =date.getDate();
        if(month1 <10)
              { 
               month1 = "0"+month1;
              }
        if(date1 <10)
              { 
               date1 = "0"+date1;
              }
        var convertedDate =""+date.getFullYear() + (month1) + date1;
        var givenDate = "" + y + m + d;
        return ((givenDate==convertedDate)?true:false); 
     } 
```

我在函数内部调用上面的函数-

```
 function generate_coupon()
  {
         var f_arr = from_date.split("/"); //from_date is from 1st input date value.
     var f_day = f_arr[0];
     var f_month =f_arr[1];
     var f_year =f_arr[2]; 

         var t_arr = to_date.split("/"); //to_date is from 2nd input date value.
     var t_day = t_arr[0];
     var t_month =t_arr[1];
     var t_year =t_arr[2]; 

         if (chkdate(f_year,f_month,f_day)== true && chkdate(t_year,t_month,t_day)== true)
         {

         }
        else
         {
          alert('Enter Valid Date - dd/mm/yyyy');
         }
    } 
```

在那种情况下，我必须检查两个日期值 - 第一个日期值是否来自明天，第二个日期值应该与第一个日期相差至少 1 天。如果两个条件都为真，那么我将生成优惠券，否则我将提醒无效日期。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:59:42.177

```
function checkDates(d1, d2) {
    if (d1 instanceof Date && d2 instanceof Date) {
        var today = new Date();
        today.setHours(0, 0, 0, 0);
        if (date1.getTime() < (today.getTime() + 86400000)) {
            return "First date should be after today";
        }
        if (date2.getTime() < (date1.getTime() + 86400000)) {
            return "Second date should be after First date";
        }
        return "Dates are valid";
    }
    return "One or more invalid date";
}

var date1Str = "6/9/2012";
var date2Str = "7/9/2012";

var date1Arr = date1Str.split("/");
var date2Arr = date2Str.split("/");

var date1 = new Date(date1Arr[2], date1Arr[1] - 1, date1Arr[0]);
var date2 = new Date(date2Arr[2], date2Arr[1] - 1, date2Arr[0]);

alert(checkDates(date1, date2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:59:58.787

而不是进行这种类型的验证，我认为您使用一些定义的代码填写您自己的其他日期字段会更容易。并使这些字段不可编辑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:10:51.167

尝试这个

```
function generate_coupon() {
    var from_date = document.getElementById("fromDate");
    var to_date = document.getElementById("toDate");

    var from = new Date(from_date.value);
    var to = new Date(to_date.value);    
    var today = new Date();
    var tomorrow = new Date(new Date().getTime() + 24 * 60 * 60 * 1000);
    if (from >= tomorrow && to > from) {

    } else {
        alert('Enter Valid Date - dd/mm/yyyy');
    }
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T06:23:02.837

Farid 提出了一个很好的观点，但是如果你的基准日期是动态的，那么这样的事情应该可以工作：

```
function isValidInput(date1, date2) {
    return date2 >= getNextDate(date1);
}

function getNextDate(date) {
    // The number of milliseconds in one day
    var ONE_DAY = 1000 * 60 * 60 * 24;

    var date_ms = date.getTime();
    var nextDate_ms = date_ms + ONE_DAY;

    var nextDate = new Date(nextDate_ms);

    // Make sure to get rid of time, so that it's always at 00:00:00 hour.
    return new Date(nextDate.getYear(), nextDate.getMonth(), nextDate.getYear());
} 
```

# java - 使用线程同时创建一个类的十个实例

> ID：12275244
> 
> 赞同：1
> 
> 时间：2012-09-05T05:55:01.193
> 
> 标签：java, multithreading

我正在尝试理解 Java 中的线程。作为练习，我创建了一个 Ice Cream 类，如下所示。

```
public class ThreadIceCream {

private String flavor = "";
private String[] specialFlavors = { "Vanilla", "Chocolate", "Butter Pecan", "Strawberry", "Chocolate Chip", "Cherry", "Coffee" };
    // Constructor for ThreadIceCream class
public ThreadIceCream() {       
    int randInt = (int) (Math.random() * specialFlavors.length);
    flavor = specialFlavors[randInt];
    System.out.println("Enjoy your " + flavor + " IceCream!");
} } 
```

ThreadIceCream 类是一个简单的类，它在每次初始化类时创建一个具有随机风格的 IceCream 对象。这是我正在使用的 TestStub。

```
public class TestStub {

public static void main(String[] args) {

    ThreadIceCream Th1 = new ThreadIceCream();
    ThreadIceCream Th2 = new ThreadIceCream();

} } 
```

现在我想创建 10 个冰淇淋（即同时创建 10 个 ThreadIceCream 类的实例）并且我想使用 Java 中的线程来执行此操作。我尝试了一些东西，但它们并不接近。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:08:04.787

好吧，这并不难：

```
Thread[] threads = new Thread[10];
for(int i = 0; i < 10; i++) {
    threads[i] = new Thread(new Runnable() {
                    public void run() {
                        ThreadIceCream tic = new ThreadIceCream();
                    }
                 });
    threads[i].start();
}

for(int i = 0; i < 10; i++) {
    threads[i].join();
} 
```

当然，这不会有太大作用，因为每个线程执行的工作非常小，以至于启动线程的开销实际上更高，但无论如何。

您还应该学习使用[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)以获得更高的效率。纯线程是重量级的，很少能解决任何问题，尤其是在组中。这是`ExecutorService`上面的一个版本：

```
ExecutorService exec = Executors.newFixedThreadPool(10);
for(int i = 0; i < 10; i++) {
    exec.submit(new Runnable() {
                    public void run() {
                        ThreadIceCream tic = new ThreadIceCream();
                    }
                });        
}

exec.shutdown();
exec.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS); 
```

在这里，我们正在创建一个包含 10 个线程的池并提交 10 个任务。线程在任务执行之间被回收，因此无论您提交多少任务，都只会创建 10 个线程。由于任务非常小，甚至可以在同一个线程上执行多个任务，但这实际上是一件好事。

# javascript - 在localStorage中按键获取ID

> ID：12275247
> 
> 赞同：0
> 
> 时间：2012-09-05T05:55:45.200
> 
> 标签：javascript, jquery, local-storage

在 JS localStorage 我可以使用

```
localStorage.getItem(key); 
```

获取与`key`变量中的键对应的条目的值。

如何使用密钥获取条目的 ID（而不是值）？

编辑：对不起，我一定让人们感到困惑。我所说的“键”是数字键 - 0、1、2、3 等，具体取决于已保存的项目数量。然后我想从数字键中找出它存储为的 ID，例如下例中的 foo。

`localStorage.setItem('foo', 'bar');`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:04:36.690

LocalStorage 被实现为键值对（例如参见：[https](https://developers.google.com/web-toolkit/doc/latest/DevGuideHtml5Storage) ://developers.google.com/web-toolkit/doc/latest/DevGuideHtml5Storage ） - 所以你没有像唯一的自动递增 id 这样的 id在数据库表中。

但是，您可以使用索引访问元素 - 要获取 localStorage 中键的索引，我能找到的唯一方法是遍历每个键，直到找到要搜索的键，如下所示：

```
var findIndexOfKey = function(searchKey) {
    for (var i = 0; i < localStorage.length; i++){
        var key = localStorage.key(i);
        if(key === searchKey)
            return i;
    }
    return -1;
} 
```

然后，要使用索引检索密钥，您可以执行以下操作：

```
localStorage.key(myIndex); 
```

要检索该值，您可以这样做：

```
localStorage.getItem(localStorage.key(myIndex)); 
```

...或者这个（相当于`localStorage.getItem("myKey")`）：

```
localStorage.getItem(localStorage.key(findIndexOfKey("myKey"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:02:50.830

设置项目时，您应该将其 ID 作为值提供，而当您调用 getItem(key) 时，它应该将其 ID 作为返回值提供：

```
localStorage.setItem('foo', 'bar');
localStorage.getItem('foo');  // it should return the bar 
```

看看这个例子可能会有所帮助： http: [//mathiasbynens.be/notes/localstorage-pattern](http://mathiasbynens.be/notes/localstorage-pattern)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:14:58.483

答案：

```
localStorage.key(key); 
```

抱歉，我意识到我对所谓的密钥（我称之为 ID）和我称之为密钥的数字 ID 之间存在混淆......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T06:19:35.827

我不认为这是可能的。你不能做`localStorage.setItem(yourkey,value)`吗？我是说

```
localStorage.setItem(0,value)  
localStorage.setItem(1,value) 
```

例如，这在循环中可能很有用。

# c++ - 当 i++ 导致整数溢出时会发生什么？

> ID：12275248
> 
> 赞同：3
> 
> 时间：2012-09-05T05:55:49.413
> 
> 标签：c++

> **可能重复：**
> [C++ 下溢和上溢](https://stackoverflow.com/questions/10011372/c-underflow-and-overflow)

我在 C++ 中有以下代码：

```
int temp = std::numeric_limits<int>::max();
temp++; 
```

我确定递增后结果将始终为<0吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T06:00:04.060

不，不能保证。C++03 中有这样的说法`5 Expressions, paragraph 5`：

> 如果在计算表达式期间，结果未在数学上定义或不在其类型的可表示值范围内，则行为未定义，除非此类表达式是常量表达式，在这种情况下程序格式错误。[注意：大多数现有的 C++ 实现忽略整数溢出]。

此外，没有任何东西`5.7 Additive operators`可以修改这种行为。这在 C++11 中没有改变。

那是针对签名类型的，这是您在问题中所问的。

* * *

如果您也对无符号类型感兴趣，请参阅部分`3.9.1 Fundamental types, paragraph 4`说明：

> 声明为无符号的无符号整数应遵守算术模 2 ^n的定律，其中 n 是该特定大小整数的值表示中的位数（见脚注 41）。
> 
> 脚注 41：这意味着无符号算术不会溢出，因为无法由所得无符号整数类型表示的结果会以比所得无符号整数类型可表示的最大值大一的数字为模减少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T05:57:15.703

不，有符号整数类型的溢出会导致未定义的行为。

编辑：除了 paxdiablo 的报价：

3.9.1。

> 注 46）这意味着无符号算术不会溢出，因为不能由得到的无符号整数类型表示的结果以比得到的无符号整数类型可以表示的最大值大 1 的数字为模减少。

# hibernate - EntityManager refresh() 是否会导致通过实体多级关系进行级联同步？

> ID：12275250
> 
> 赞同：0
> 
> 时间：2012-09-05T05:55:56.543
> 
> 标签：hibernate, jpa-2.0, entitymanager

我有三个实体'A'，'B'，'C'：

* * *

```
@Entity
public class A implements Serializable {
    ... 

    private B b;  

    @OneToOne(mappedBy = "a", fetch = FetchType.LAZY)
    @Cascade({CascadeType.ALL})
    public B getB() {
        return b;
    }

    public void setB(B b) {
        this.b = b;
    } 

    ...
} 
```

* * *

```
@Entity
public class B implements Serializable {
    ...

    private A a;

    @OneToOne(fetch = FetchType.LAZY)
    public A getA() {
         return a;
    }

    public void setA(A a) {
         this.a = a;
    }

    ...

    private Collection<C> cCollection;

    @OneToMany(mappedBy = "b", fetch = FetchType.LAZY)
    public Collection<C> getCCollection() {
        return cCollection;
    }

    public void setCCollection(Collection<C> cCollection) {
        this.cCollection = cCollection;
    }
    ...
} 
```

* * *

```
@Entity
public class C implements Serializable {
    ...

    private B b;
    @ManyToOne(optional = false, fetch = FetchType.LAZY )
    public B getB() {
        return b;
    }

    public void setB(B b) {
        this.b= b;
    }
} 
```

* * *

当我更新 B.cCollection - 添加或删除 C 对象 - 然后刷新对象 a 时，我预计这些更改会影响 a.getB().getCCollection() 的结果，但它永远不会发生并且 cCollection 列表不会被更新. 我对 refresh() 操作有误吗？

```
//Adding or removal C objects to/from a.getB().getCCollection()
//Persisting changes
myEM.refresh(a); 
```

（注意：我使用的是hibernate和JPA 2.0。在数据库中持久化数据没有问题，并且确实有效）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:45:05.177

您应该改用合并方法：http: [//docs.oracle.com/javaee/5/api/javax/persistence/EntityManager.html](http://docs.oracle.com/javaee/5/api/javax/persistence/EntityManager.html)

```
myEM.merge(a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T11:14:09.480

“可以使用 refresh() 方法随时重新加载对象及其所有集合。这在使用数据库触发器初始化对象的某些属性时很有用。”

“Hibernate 从数据库加载多少以及它将使用多少 SQL SELECT？这取决于获取策略。”

访问[第 10 章了解更多详细信息：使用对象](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/objectstate.html)

# java - Java 条件语句

> ID：12275251
> 
> 赞同：0
> 
> 时间：2012-09-05T05:56:00.640
> 
> 标签：java

> **可能重复：**
> [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

我正在使用 jcreator 来练习 java 语言。我想出了一个条件语句，如果用户输入是 = "test"，它将打印一个 "okay!" 信息。这是我的代码：

```
class conditional {

    public static void main (String[] args) {

        Scanner user_input = new Scanner(System.in);

        String username;
        System.out.print("username: ");
        username = user_input.next();
            if (username == "test") {
                System.out.println("okay");
                    }
                    else {
                                    System.out.println("not okay");
    }
} 
```

上面的代码没有显示任何错误，也没有显示“okay”&&“not OK”消息。我不确定我的逻辑有什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T05:57:08.333

应该使用`.equals`而不是比较字符串`==`。这是所有非原始比较的情况。例如，您会将两个`int`字段与进行比较`==`，但由于字符串不是原始的，`.equals`因此是正确的选择。

```
if (username.equals("test")) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:57:03.917

你应该[`String.equals`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)在这里使用。

```
if (username.equals("test")) { 
```

否则，您将比较对象的身份而不是它们的语义。实际上，你`String`这里有两个独立的 s，它们满足语义相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:03:54.527

或者如果你想使用`==`do`username.intern();`那么你可以使用`==`.

**注意：不推荐仅供参考。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T06:27:46.793

如果您这样做，它将起作用：

导入 java.util.Scanner；

```
class Conditional {
    public static void main(String[] args) {
        Scanner user_input = new Scanner(System.in);
        String username;

        System.out.print("username: ");
        username = user_input.next();

        if (username.equals("test")) {
            System.out.println("okay");
        } else {
            System.out.println("not okay");
        }

        user_input.close();
    }
} 
```

几点说明：

*   类名应以大写字母开头。
*   用于`equals`比较`String`s。
*   您声明根本没有打印任何结果。您必须在控制台中单击以输入您的答案并以 结束输入`Enter`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T06:10:35.007

正如@veer 所说，您可以使用[`equalsIgnoreCase`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)/[`equals`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#equals%28java.lang.Object%29)

`if (username.equals("test")) { ... }`

或者

您可以使用[`compareToIgnoreCase`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#compareToIgnoreCase%28java.lang.String%29)/[`compareTo`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#compareTo%28java.lang.String%29)

```
if (username.compareTo("test")==0) { ... } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T06:13:53.430

要比较字符串，您需要使用`.equals()`方法，并且如果您需要忽略字符串中字母的大小写，您可以使用`.equalsIgnoreCase()`

```
 if (username.equals("test")){

 }
 else{

 } 
```

# c# - Entity Framework 如何管理数据库连接？

> ID：12275252
> 
> 赞同：2
> 
> 时间：2012-09-05T05:56:06.553
> 
> 标签：c#, asp.net-mvc, entity-framework

假设，以下是我们的 BusinessLayer ：

```
public class DatabaseInteract
{
    //`NewsEntities` is our ObjectContext
    public List<News> GetAllNews()
    {
         return new NewsEntities().News.OrderByDescending(q => q.RegidtrationDate).ToList();
    }

    public News GetNewsById(int newsId)
    {
         return new NewsEntities().News.FirstOrDefault(q => q.Id== newsId);
    }

    public bool IsNewsExist(int newsId)
    {
         var news = new NewsEntities().News.FirstOrDefault(q => q.Id== newsId);
         return news != null;
     }
} 
```

以下是我们在 ASP.NET MVC 项目中的控制器：

```
public ActionResult Index(int? id)
{
    DatabaseInteract databaseInteract = new DatabaseInteract();
    ViewBag.AllNews = databaseInteract.GetAllNews(id.Value);
    ViewBag.News = databaseInteract.GetNewsById(id.Value);
    ViewBag.IsExist = databaseInteract.IsNewsExist(id.Value);
    return View(model);
} 
```

现在，我的问题是：
在调用每个业务层的方法期间，我们是否有与数据库的新连接？

**编辑 ：**

下面的代码是否有助于确信我们在`DatabaseInteract`Class 的每个实例中只有一个与数据库的连接：

```
public class DatabaseInteract 
{
    readonly NewsEntities _entities = new NewsEntities();

    //`NewsEntities` is our ObjectContext
    public List<News> GetAllNews()
    {
         return _entities.News.OrderByDescending(q => q.RegidtrationDate).ToList();
    }

    public News GetNewsById(int newsId)
    {
         return _entities.News.FirstOrDefault(q => q.Id== newsId);
    }

    public bool IsNewsExist(int newsId)
    {
         var news = _entities.News.FirstOrDefault(q => q.Id== newsId);
         return news != null;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T06:04:55.460

Entity Framework 管理一个连接池，这意味着 EF 将尽可能重用连接，并且仅在需要时创建新连接。每个呼叫是否创建新连接取决于许多因素。所以很难说任何给定的调用集是否会创建新的连接。

一般来说，EF 在管理连接方面做得非常好，除非您知道这是一个问题，否则您不应该担心它。

# java - 从给定的字符进行独特的组合

> ID：12275253
> 
> 赞同：2
> 
> 时间：2012-09-05T05:56:15.730
> 
> 标签：java, algorithm

是否有任何可用的算法：

来自一组字符，例如：

```
a,@,n,M,O,f,D,),`,~,;,N,*,8,2,],2........ goes one . There are about 92 characters 
```

现在我必须从这 92 个特定长度的字符*（可能是 5、3、2、10）*中进行独特的组合，直到满足特定条件。

就像来自 92 的 3 个字符的组合可能像：

```
abc
@82
)~N
...... 
```

有没有可用的算法或者我有自己的算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:27:41.123

首先请注意，可能的排列数量在`O(n^k)`（`Choose(n,k) = n!/(k!*(n-k)!)`准确地说）其中`n`是字符数并且`k`是所需长度。由于它是指数级的，因此很容易变得遥不可及。

实现这些组合的一般算法是使用递归并探索直到这个长度的所有可能性。在每个级别，您“猜测”下一个将使用哪个字符，放置它，将其从可用字符列表中删除并递归解决较小的问题（查找排列到`length-1`）。

```
private static void printPermutations(char[] chars, int idx, List<Character> candidate, int length) {
    if (length == candidate.size()) { 
        System.out.println(candidate);
        return;
    }
    for (int i = idx; i < chars.length; i++) {
        candidate.add(chars[i]);
        //set the selected element out of reach:
        char temp = chars[idx];
        chars[idx] = chars[i];
        chars[i] = temp;
        //recurse:
        printPermutations(chars, idx+1, candidate, length);
        //clean up environment:
        temp = chars[i];
        chars[i] = chars[idx];
        chars[idx]  = temp;
        candidate.remove(candidate.size()-1);
    }
}
public static void printPermutations(char[] chars, int length) { 
    printPermutations(chars, 0, new LinkedList<Character>(), length);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:57:54.983

更新：这是一个没有重复的组合的工作python版本：

```
def ncombs(n,k):
    if n < 0 or k < 0 or k > n: return 0
    b = 1
    for i in xrange(k): b = b*(n-i)/(i+1)
    return b

def nthresh(k, idx):
    """Finds the largest value m such that C(m, k) <= idx."""
    mk = k
    while ncombs(mk, k) <= idx:
        mk += 1
    return mk - 1

def rank_to_comb(k, rank):
    ret = []
    for i in range(k, 0, -1):
        element = nthresh(i, rank)
        ret.insert(0, element)
        rank -= ncombs(element, i)
    return ret

def random_combination(choices, n):
    num_combinations = ncombs(len(choices), n)
    desired_rank = random.randint(0, num_combinations-1)
    indices = idx_to_set(n, desired_rank)
    return [choices[i] for i in indices] 
```

示例用法：

```
>>> random_combination("abcdefghijkl", 3)
['b', 'd', 'h']
>>> random_combination("abcdefghijkl", 3)
['b', 'd', 'g']
>>> random_combination("abcdefghijkl", 3)
['d', 'f', 'i']
>>> random_combination("abcdefghijkl", 3)
['d', 'f', 'h']
>>> random_combination("abcdefghijkl", 3)
['b', 'c', 'e']
>>> random_combination("abcdefghijkl", 3)
['c', 'i', 'l']
>>> random_combination("abcdefghijkl", 3)
['c', 'g', 'j']
>>> random_combination("abcdefghijkl", 3)
['b', 'j', 'l'] 
```

它的工作原理是生成所需组合的排名，然后从排名生成组合，然后使用它来索引选择列表。通过这样做，您可以保证索引的均匀分布（因此您不会比其他组合更频繁地生成任何一种组合）。

例如，如果您想从 10 个列表中选择 5 个元素，则有`10 C 5`=`252`可能的组合。第一个组合是`(0, 1, 2, 3, 4)`，第二个是`(0, 1, 2, 3, 5)`，第三个是`(0, 1, 2, 4, 5)`，等等……`rank_to_comb`函数完成翻译：

```
>>> rank_to_comb(5, 0)
[0, 1, 2, 3, 4]
>>> rank_to_comb(5, 1)
[0, 1, 2, 3, 5]
>>> rank_to_comb(5, 2)
[0, 1, 2, 4, 5]
>>> rank_to_comb(5, 250)
[4, 6, 7, 8, 9]
>>> rank_to_comb(5, 251)
[5, 6, 7, 8, 9] 
```

所以我们只是统一地从 0 到 251 中选择一个数字，得到组合，索引到选择列表中，我们就完成了！

* * *

这是生成排列而不是组合的旧版本：

以下是如何生成一种组合：

```
public static String comboFrom(String possibleChars, int charsToTake) {
    //randomly shuffle the chars using Collections.shuffle
    List<Character> chars = new ArrayList<Character>(possibleChars.length());
    for (char c : possibleChars.toCharArray()) {
        chars.add(new Character(c));
    }

    Collections.shuffle(chars);

    //Take the first 'charsToTake' characters - these will be totally random
    //thanks to the shuffle
    String result = ""; 
    int taken=0;
    for (Character c : chars) {
        result += c.charValue();
        if (taken >= charsToTake) break;
        taken += 1;
    }
    return result;
} 
```

示例用法：

```
for (int i=0; i < 30; i++) {
    System.out.println(comboFrom("abcdefghijkl@#%", 5));
} 
```

结果：

```
ecjlaf
bi@hfj
ia@#e%
icfad@
kb#gei
ik%@de
ib%jkf
flgb@#
gd@ekc
jedhi#
f@%ckj
lig%#j
l%fki#
ajgdlc
adkbe@
gb@cid
#efcag
@lihkc
k@j%#c
cgkaji
ecb@hj
k@lf%a
gd%fbh
c%lajf
e@#cid
%gfeb#
#%ahcf
be@flj
albjk@
calh%g 
```

您可以重复调用此函数并在获得满足您需求的结果时停止。这是[我使用的完整代码](http://ideone.com/42ahh)。

编辑：对这个插件感到抱歉，但这比我想象的要烦人得多，我很高兴我在工作中使用了 Python：

```
import random
def comboFrom(possibleChars, charsToTake):
    chars = list(possibleChars)
    random.shuffle(chars)
    return "".join(chars[:charsToTake]) 
```

# python - 如果文件不存在，则使用 python 在文件中添加一行

> ID：12275255
> 
> 赞同：-2
> 
> 时间：2012-09-05T05:56:20.257
> 
> 标签：python, xml

我有一个xml文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
  <Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Build" ToolsVersion="4.0">
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />
  <ImportGroup Label="ExtensionTargets">
  </ImportGroup>
</Project> 
```

我想在和`<Import Project="$(ProjectName).targets" />`之间 添加一条线如下`</ImportGroup>``</Project>`

```
<?xml version="1.0" encoding="utf-8"?>
  <Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Build" ToolsVersion="4.0">
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />
  <ImportGroup Label="ExtensionTargets">
  </ImportGroup>
  <Import Project="$(ProjectName).targets" />
</Project> 
```

如果`<Import Project="$(ProjectName).targets" />`文件中已经存在该行，则无需添加。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:11:26.993

您的问题基于文本文件中的行，但输入文件显然是 XML，因此假设您实际上想要添加一个 Import（如果它不存在），试试这个：

```
import xml.dom.minidom

importstring = "$(Projectname).targets"
filename = "test.xml"

tree = xml.dom.minidom.parse(filename)
Project = tree.getElementsByTagName("Project")[0]

for Import in Project.getElementsByTagName("Import"):
    if Import.getAttribute("Project") == importstring:
        break
else: # note this is else belongs to the for, not the if
    newImport = xml.dom.minidom.Element("Import")
    newImport.setAttribute("Project", importstring)
    Project.appendChild(newImport)

tree.writexml(open(filename, 'w')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T06:05:59.327

使用您选择的 XML 解析器，解析文件，使用相关 API 操作文件，然后将其写回。

# iphone - iPhone应用程序中的tesseract OCR

> ID：12275259
> 
> 赞同：2
> 
> 时间：2012-09-05T05:56:46.497
> 
> 标签：iphone, ios, uiimageview, ocr, tesseract

我正在使用用于 OCR 的 tesseract 开源引擎从图像中读取文本。但我一次没有得到 100% 的结果。请就使用 tesseract 的 OCR 质量改进提出您的建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:15:20.103

这是从 tesseract 获得最佳结果的方法 请确保您已经对图像进行了预处理。OVR 将为具有以下属性的图像产生最佳结果：

1.  修复 DPI（如果需要） 300 DPI 最低
2.  修复文本大小（例如 12 pt 应该没问题）
3.  尝试修复文本行（去歪斜和去扭曲文本）
4.  尝试修复图像的照明（例如，图像没有暗部
5.  二值化和去噪图像

[https://groups.google.com/forum/?fromgroups=#!topic/tesseract-ocr/g5aE_OvgyTU](https://groups.google.com/forum/?fromgroups=#!topic/tesseract-ocr/g5aE_OvgyTU)

# php - 在php中自动调用类内的所有方法

> ID：12275264
> 
> 赞同：2
> 
> 时间：2012-09-05T05:56:59.970
> 
> 标签：php, oop, class, methods

一旦类被初始化，有没有办法从一个类中调用所有方法？例如，假设我有一个名为的类`todo`，一旦我创建了一个`todo`类的实例，它里面的所有方法/函数都将被执行，而不是在构造函数中调用它？

```
<?php 
    class todo 
    {
        function a()
        {
        }
        function b()
        {
        }
        function c()
        {
        }
        function d()
        {
        }
    }

    $todo = new todo();
?> 
```

在这里，我创建了一个类的实例，以便`todo`执行方法`a`, `b`, 。这可能吗？`c``d`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T06:22:01.060

这输出'abc'。

```
class Testing
{
    public function __construct()
    {
        $methods = get_class_methods($this);

        forEach($methods as $method)
        {
            if($method != '__construct')
            {
                echo $this->{$method}();
            }
        }
    }

    public function a()
    {
        return 'a';
    }

    public function b()
    {
        return 'b';
    }

    public function c()
    {
        return 'c';
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T06:10:27.310

我认为您可以使用迭代器。所有方法都将在 foreach [PHP Iterator中调用](http://php.net/manual/en/class.iterator.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T06:51:49.130

我从 php.net 复制并粘贴到下面的类...

我认为这会很有用，因为不使用对象调用方法，而是使用 get_class_methods()：

```
class myclass {
    function myclass()
    {
        return(truenter code heree);
    }

    function myfunc1()
    {
        return(true);
    }

    function myfunc2()
    {
        return(true);
    }
}

$class_methods = get_class_methods('myclass');
foreach ($class_methods as $method_name) {
    echo "$method_name\n";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T05:59:50.037

使用`__construct()`在对象实例化时调用的方法（如您所述）。其他任何事情都是不熟悉和出乎意料的（让随机方法立即执行而不是由构造函数）。

您的类代码看起来像是在使用 PHP4，如果是这种情况，请将您的构造函数命名为与类名相同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T05:59:57.770

像这样？我有时使用这种模式来注册有关类的元数据。

```
<?php
class todo {
    public static function init() {
        self::a();
        self::b();
        self::c();
        self::d();
    }
    function a()
    {
    }
    function b()
    {
    }
    function c()
    {
    }
    function d()
    {
    }
}

todo::init(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-05T06:00:12.247

除了按照您在问题中建议的那样将其放入构造函数中之外，我想不出任何方法：

```
<?php 
    class todo 
    {
        public function __construct()
        {
            $this->a();
            $this->b();
            $this->c();
            $this->d();
        }
        function a()
        {
        }
        function b()
        {
        }
        function c()
        {
        }
        function d()
        {
        }
    }

    $todo = new todo();
?> 
```

# magento - Magento 中的多维会话

> ID：12275271
> 
> 赞同：1
> 
> 时间：2012-09-05T05:57:17.710
> 
> 标签：magento

是否有可能以某种方式在 magento 中构建多维会话？我们有

```
Mage::getSingleton('core/session')->getCounter()
Mage::getSingleton('core/session')->setCounter()
Mage::getSingleton('core/session')->unsCounter() 
```

那里...但是如何建立会话，例如：

```
counter['fb67c36d-03bf-4e89-85e7-077921560b97'] 
```

感谢您的任何回复！

# haskell - 将 UTCTime 与 Hamlet 一起使用

> ID：12275273
> 
> 赞同：4
> 
> 时间：2012-09-05T05:57:24.857
> 
> 标签：haskell, yesod, hamlet

我在我的第一个网站上使用 Yesod，我有一个新闻列表：

```
NewsItem
    date    UTCTime default=CURRENT_TIME
    title   String
    content String
    author  String 
```

在我的处理程序中检索到：

```
newsitems <- runDB $ selectList [] [Desc NewsItemDate] 
```

并最终在我的模板中使用：

```
$if null newsitems
    <p>No news.
$else
    $forall Entity id entry <- newsitems
        <article>
            <h4>#{newsItemDate entry}
            <p>#{newsItemContent entry} 
```

但我收到有关数据类型的错误：

```
Handler/Home.hs:20:11:
    No instance for (Text.Blaze.ToMarkup
                       time-1.4:Data.Time.Clock.UTC.UTCTime)
      arising from a use of `toHtml'
    Possible fix:
      add an instance declaration for
      (Text.Blaze.ToMarkup time-1.4:Data.Time.Clock.UTC.UTCTime)
    In the first argument of `toWidget', namely
      `toHtml (newsItemDate entry_a6ev)'
    In a stmt of a 'do' block:
      toWidget (toHtml (newsItemDate entry_a6ev))
    In the expression:
      do { toWidget
             ((Text.Blaze.Internal.preEscapedText . Data.Text.pack)
                "<article><h4>");
           toWidget (toHtml (newsItemDate entry_a6ev));
           toWidget
             ((Text.Blaze.Internal.preEscapedText . Data.Text.pack)
                "</h4>\
                \<p>");
           toWidget (toHtml (newsItemContent entry_a6ev));
           .... } 
```

所以我想我会继续添加到我的 Import.hs 中：

```
import Data.Time (UTCTime)
import Data.Time.Format (formatTime)
import Text.Blaze (ToMarkup, toMarkup)
import Text.Blaze.Internal (string)
import System.Locale (defaultTimeLocale)

-- format date as     26 July 2012
instance ToMarkup UTCTime where
   toMarkup a = string (formatTime defaultTimeLocale "%e %B %Y" a) 
```

哪个可以编译，但在浏览器运行时给我一个错误：

```
Internal Server Error
PersistMarshalError "Expected UTCTime, received PersistText \"2012-08-30\"" 
```

所以我不确定如何解决这个问题，有什么想法吗？

编辑：网站的源代码，以防需要或好奇：[https ://github.com/iaefai/socrsite](https://github.com/iaefai/socrsite)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T07:18:55.777

在不调查实际错误的情况下，我认为您的方法不是很好。你很可能最终会想要几种格式化 a 的方法`UTCTime`，毕竟类型是用来存储时间的，而不仅仅是日期。通过提供一个`ToMarkup UTCTime`实例，您可以全局解决此问题。

我建议编写函数`renderAsDate :: UTCDate -> HTML`等`renderAsTime :: UTCDate -> HTML`并在您的模板中使用它们，例如`#{renderAsDate (newsItemDate entry)}`.

但这不会解决运行时错误，它来自序列化层并且可能与您的模板无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T22:08:59.107

我很确定你可以在小村庄里使用表演吗？这至少是我所做的......

```
#{show $ newsItemDate entry} 
```

我以前遇到过这个实例，正如这个人在这里描述的那样：

> 作为这种节俭表达哲学的一部分，Haskell 不需要类型签名——尽管有经验的 Haskeller 提供它们是为了清楚起见——所以这种强类型语言中的类型错误对于外行来说通常是神秘的。例如，如果你定义一个函数 f 将两个数字相加，然后用两个字符串调用它，编译器不会抱怨错误的参数，它会抱怨字符串不支持 operator plus。它会以一种非常不明显的方式来表达这种抱怨。[1] 在“1\. Haskell 很简洁”下...

[1] [http://fpcomplete.com/ten-things-you-should-know-about-haskell-syntax/](http://fpcomplete.com/ten-things-you-should-know-about-haskell-syntax/)

# parsing - 如何使用 scala 组合器解析器解析这个结构：“name[arg,arg]”？

> ID：12275274
> 
> 赞同：1
> 
> 时间：2012-09-05T05:57:28.490
> 
> 标签：parsing, scala, parser-combinators

我有几个这样的字符串：

```
name[arg,arg,arg]
name[arg,arg]
name[arg]
name 
```

我想用 scala 组合器解析器解析它，这是我设法得到的最好的：

```
object TaskDepParser extends JavaTokenParsers {
  def name: Parser[String] = "[^\\[\\],]+".r
  def expr: Parser[(String, Option[List[String]])] = 
    name ^^ { a => (a, None) } |
    name ~ "[" ~ repsep(name, ",") ~ "]" ^^ { case name~_~args~_ => (name, Some(args)) }
} 
```

它可以工作`name`，但无法工作`name[arg]`- 说`string matching regex`\z' 预期但是`[' found`。有可能修复它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T08:38:17.823

@TonyK 已经在他的评论中给出了答案。但我想建议 Scala 解析器组合器已经可以解析可选值：

```
object TaskDepParser extends JavaTokenParsers {
  def name: Parser[String] = """[^\[\],]+""".r
  def expr: Parser[(String, Option[List[String]])] =
    name ~ opt("[" ~> repsep(name, ",") <~ "]") ^^ { case name ~ args => (name, args) }
} 
```

`~>`并且可以只保留左或右结果以`<~`避免不必要的模式匹配`^^`。此外，我会为字符串使用三引号以避免大量转义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T15:17:48.700

我认为如果你翻转它可能会起作用......名称被第一条规则所吸引，然后你输入失败。

# javascript - 预加载图像 image.onload 脚本 MVC

> ID：12275285
> 
> 赞同：0
> 
> 时间：2012-09-05T05:58:39.587
> 
> 标签：javascript, asp.net-mvc, preload

我的应用程序是一个 MVC，使用 MS SQL 来获取图像文件名。我正在使用以下脚本预加载图像；想知道如何在等待完成预加载时显示沙漏光标。

```
 function preload_images() {
            var i, count = 0;
            $('#selector').css('cursor', 'wait');
            for (i = 1; i < sl; i++) {
                images[i] = new Image();

                images[i].onload = images[i].onerror = function () {
                    count++;
                    if (count == sl) {
                        $('#selector').css('cursor', 'default');
                    }
                }
                 images[i].src = impath.toString() + im.toString() + i + ".jpg";

            }
        } 
```

第一次效果很好，但是，当我从下拉列表中更改文件名时，即使加载了所有图像，沙漏也不会停止。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:15:34.667

从上面的代码中，您正在加载`sl-1`图像，但停止等待光标的条件是`sl`images( `if (count == sl)`)，因此将其更改为`if (count == (sl-1))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T14:45:06.903

感谢 Musa 提供了最初的解决方案，这是我让它工作的方式，以防万一有人在寻找它：

```
 var images = [];
        function preload_images() {
            showLoadingImage();
            $('#selector').css('cursor', 'wait');
            for (i = tochar; i < sl; i++) {
                images[i] = new Image();
                var name = impath.toString() + imStart.toString() + i + ext;
                images[i].src = 'ImageHandler.ashx?img=' + name + '&window=50&level=50 &slice=0';
                if (i == sl - 1) {
                    images[i].onload = images[i].onerror = function () {
                        $('#selector').css('cursor', 'Default');
                        hideLoadingImage(this);
                    };
                }
            }
        }
        function showLoadingImage() {
            $('#imagediv').append('<div id="imagediv1"><img src="../Content/images/ajax-loader2.gif" alt="Loading..." /></div>');
            $('#imagediv1').show();
        }

        function hideLoadingImage(img) {
            $('#imagediv1').hide();
            img.onload = img.onerror = null;
       } 
```

# java - 当我使用收音机、选择等时，Struts2 验证失败

> ID：12275287
> 
> 赞同：0
> 
> 时间：2012-09-05T05:58:44.963
> 
> 标签：java, struts2

我是 struts2 的新手，在提交表单和使用验证时出现错误。

查看我的 struts.xml

```
<action name="alltagpage" class="com.ksh.tags.Initialization">
            <result name="success">/alltagspage.jsp</result>
        </action>
        <action name="submittags" class="com.ksh.tags.TagActionClass">
            <result name="input">/alltagspage.jsp</result>
            <result name="success">/tagsresult.jsp</result>
        </action> 
```

当我传递这个 alltagpage 请求时，它正在初始化“初始化”类并初始化单选按钮的内容。

```
public class Initialization {

    private List<String> languages;
    private List<KeyValue> genders;

    public Initialization()
    {
        System.out.println("Model COnstructor is called");

        languages = new ArrayList<String>();
        languages.add("English");
        languages.add("Hindi");
        languages.add("Gujarati");

        KeyValue keyValue0 = new KeyValue();
        keyValue0.setKey(0);
        keyValue0.setValue("Male");

        KeyValue keyValue1 = new KeyValue();
        keyValue1.setKey(1);
        keyValue1.setValue("Female");

        KeyValue keyValue2 = new KeyValue();
        keyValue2.setKey(2);
        keyValue2.setValue("Unknown");

        genders = new ArrayList<KeyValue>();
        genders.add(keyValue0);
        genders.add(keyValue1);
        genders.add(keyValue2);
    }
    getters and setters..

    public String execute()
    {
        return "success";
    }
} 
```

以下是我提交表格时将调用的课程。

```
public class TagActionClass extends ActionSupport implements ModelDriven<Model> {

    Initialization initialization = new Initialization();
    Model model = new Model();

    public String execute()
    {
        return "success";
    }

    @Override
    public Model getModel() 
    {
        return model;
    } 

    public void validate()
    {
        System.out.println("Kshitij :"+ getModel().getTextfield());

        System.out.println("Kshitij :"+ getModel().getSelectedlanguage());

        System.out.println("Kshitij :"+ getModel().getSelectedgender());

        if(getModel().getTextfield() == null || getModel().getTextfield().isEmpty())
        {
            addActionError("Text Field is empty");
        }
    }
} 
```

当我提交带有空用户名的表单时，它会触发以下错误。我知道为什么会这样。我需要解决方案。

```
org.apache.jasper.JasperException: tag 'radio', field 'list', name 'selectedlanguage': The requested list key 'languages' could not be resolved as a collection/array/map/enumeration/iterator type. Example: people or people.{name} - [unknown location]
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:534)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:457)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.struts2.dispatcher.ServletDispatcherResult.doExecute(ServletDispatcherResult.java:159)
    org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:186)
    com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:373)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:277)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:133)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:20:20.497

在我看来，这是 struts2 验证的第一个也是最常见的问题。

当验证失败时，struts2 重定向到您的“输入”结果（在您的“struts.xml”中定义）并且它不会执行您的任何操作方法。如果输入是 JSP，它将尝试呈现该 JSP...您没有包含您的 JSP，但它可能包含无线电、选择或其他希望从您的操作中接收集合以初始化它们的标签，但是当验证失败时，它们不会得到任何东西，所以这就是错误。

解决方案：您需要在您的操作中创建一些方法来创建您在 jsp 中始终需要的所需集合或其他参数。您可以在您的操作构造函数中执行此操作，即使验证失败，也会调用该构造函数，但这是一个肮脏的解决方案。好的解决方案是使用 Preparable 拦截器（包含在 Struts2 拦截器的 DefaultStack 中）。然后，您将拥有一个 prepare() 方法，即使验证失败，该方法也将始终被调用。

[http://struts.apache.org/release/2.0.x/docs/prepare-interceptor.html](http://struts.apache.org/release/2.0.x/docs/prepare-interceptor.html)

# apache - Mamp 或 Lamp apache 重定向传出电子邮件测试强制地址

> ID：12275289
> 
> 赞同：2
> 
> 时间：2012-09-05T05:59:00.223
> 
> 标签：apache, email, mamp, lamp, staging

有没有办法在 Lamp 或 Mamp 上重定向我本地测试环境的所有传出电子邮件，以将电子邮件发送给我，覆盖 PHP 代码所说的内容。这样它就可以从配置级别捕获所有内容并将它们发送给我，这样就不会漏掉任何东西。

提前致谢。

# javascript - javascript - 如果不是鼠标悬停，如何检测？

> ID：12275290
> 
> 赞同：3
> 
> 时间：2012-09-05T05:59:01.457
> 
> 标签：javascript, html, events, dom, onmouseover

我有一个脚本，使用 onmouseover 使元素显示 = 块

```
<script language="JavaScript">
function aaa() 
{
    document.getElementById('cat').style.display = "block";
}
</script>

<a href='#' onmouseover='aaa()'>hover on me</a>

<div  id='cat' style='display:none;'>this will show</div> 
```

当鼠标不在

```
"<a href='#' onmouseover='aaa()'>hover on me</a>" 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T06:01:12.313

有`onmouseout`活动

```
function bbb() 
{
    document.getElementById('cat').style.display = "none";
} 
```

...

```
<a href='#' onmouseover='aaa()' onmouseout='bbb()'>hover on me</a> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T06:03:20.860

演示：http: [//jsfiddle.net/TRxRV/1/](http://jsfiddle.net/TRxRV/1/)

HTML：

```
<a href='#' onmouseover='show();' onmouseout='hide();'>hover</a>
<div  id='cat' style='display:none;'>cat</div>​ 
```

JavaScript：

```
window.show = function () {
    document.getElementById('cat').style.display = "block";
}

window.hide = function () {
    document.getElementById('cat').style.display = "none";
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T06:05:03.230

***这应该可以帮助你...***

```
 function aaa()
                {
                    document.getElementById('cat').style.display = "block";
                }
                function bbb()
                {
                    document.getElementById('cat').style.display = "none";
                }

        <a href='#' onmouseover='aaa()' onmouseout="bbb();">hover on me</a>
        <div id='cat' style='display: none;'>this will show</div> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-05T06:06:18.900

我正在考虑您提供的相同代码作为示例。如果您在 onMouseout() 函数中包含原始显示属性，则当鼠标未悬停时，您将返回原始属性。

```
<script language="JavaScript">
function aaa() 
{
    document.getElementById('cat').style.display = "block";
}
function bbb()
{
//include the code TO CHAGE THE PROPERTY HERE
document.getElementById('cat').style.display = "      ";
}
</script>

<a href='#' onmouseover='aaa();' onmouseout="bbb();">hover on me</a>

<div  id='cat' style='display:none;'>this will show</div> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-05T06:02:42.047

你应该`onMouseOut`为此使用事件，代码看起来像

```
<a href='#' onmouseover='show();' onmouseout='dontShow();'>hover</a>
<div  id='cat' style='display:none;'>this will show</div>​

function show() {
    document.getElementById('cat').style.display = "block";
}

function dontShow() {
    document.getElementById('cat').style.display = "none";
} 
```

# c# - 是否有任何与 C# 兼容的 SDK 可以从 EP300 等网络指纹读取器获取实时数据？

> ID：12275292
> 
> 赞同：1
> 
> 时间：2012-09-05T05:59:15.373
> 
> 标签：c#, network-protocols, fingerprint

是否有任何与 C# 兼容的 SDK 可以从 EP300 等网络指纹读取器获取实时数据？

我在 C#/SQL Server 上制作了一个仅与 USB 指纹读取器（使用 Griaule SDK）兼容的应用程序，但现在我需要使其与网络指纹读取器兼容，从机器获取实时数据

我刚找到这个，但它不完整

[http://www.codeproject.com/Questions/125530/FingerPrint-machine.aspx](http://www.codeproject.com/Questions/125530/FingerPrint-machine.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-10T03:37:23.207

是的，从以下[链接下载 C# sdk 版本](http://www.files.com/set/5205aeeb584ce)

# forms - 页面刷新时停止表单提交？

> ID：12275299
> 
> 赞同：0
> 
> 时间：2012-09-05T05:59:44.293
> 
> 标签：forms, asp-classic

我有一个简单的 asp 表单，用于将数据插入数据库。单击提交按钮时工作正常。但它再次在按下刷新时提交自身。如何阻止表单这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:05:56.673

以下可能有效：

*   在 cookie 或会话变量中存储唯一的表单数据值（时间戳？）并检查它以防止重新处理..
*   使用 GET 将您的页面重定向到自身（另请参见[snipplr.com/view/35515/](http://snipplr.com/view/35515/)）并检查（POST 与 GET）处理页面。

# wordpress - 如何为页面和帖子创建服装模板结构，但针对酒店、产品等不同的实体

> ID：12275302
> 
> 赞同：2
> 
> 时间：2012-09-05T05:59:52.437
> 
> 标签：wordpress, wordpress-theming

大家好，我正在创建一个 wordpress 主题和一个与酒店预订相关的自定义插件，并在 wordpress 的管理面板中显示在后端输入的前端信息。所以朋友们，每当显示帖子时，网址就像`http://localhost/wordpress/uncategorized/post10/`帖子的名称或帖子的 ID 在网址中更改，但在后端只有 single.php 模板会被 wordpress 一次又一次地使用，所以我的问题是可以创建类似的东西对于不同的事情，例如在我的例子中显示酒店只有hotel.php文件被一次又一次地使用，并且在url中只有酒店的id发生变化。

我在互联网上没有对此进行太多搜索，但我在 wp-e-commerce 插件中看到了类似的内容，其中有一个单独的模板文件来显示产品类别以及产品类别，这些文件位于插件目录中.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:24:45.593

您应该首先创建自定义帖子类型（您会找到相应的插件），例如`hotel`帖子类型。

然后，您可以轻松地为此帖子类型创建特定模板，例如`single-hotel.php`.

更多关于法典：

[http://codex.wordpress.org/Post_Types#Custom_Types](http://codex.wordpress.org/Post_Types#Custom_Types)

[http://codex.wordpress.org/Post_Types#Template_Files](http://codex.wordpress.org/Post_Types#Template_Files)

# html - 在 Internet Explorer 中呈现白色的透明背景

> ID：12275313
> 
> 赞同：0
> 
> 时间：2012-09-05T06:00:26.040
> 
> 标签：html, css, internet-explorer, internet-explorer-8, jquery-cycle

在我的页面布局中，我有两个`<div>`标签。一个，带有 id `#image-panel`，另一个带有`#image-content-panel`. 两个`<div>`s 使用 相互堆叠`position: absolute`。`#image-content-panel`（具有更高的`z-index`）位于 之上`#image-panel`。两者`<div>`都有`background: transparent`。

该页面在 Chrome、Safari 和 Firefox 中呈现良好，即我可以通过文本（标题和段落等）看到图像。但在 IE（第 8 版）`#image-content-panel`中，正在重新渲染为白色背景。

你可以看到下面的截图：

[在 Crome、Safari、Mozilla 中渲染](http://tinypic.com/r/3465ief/6)

[在 IE 8 中渲染](http://tinypic.com/r/333buy8/6)

相关的 CSS 和 HTML 代码：

[HTML 代码](http://pastebin.ca/2201291)

[CSS 代码](http://pastebin.ca/2201294)

我也希望页面在 IE 中呈现相同的内容。任何帮助表示赞赏。如果无法解决，请也提出替代解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T08:00:49.433

**更新**[Jquery Cycle 插件](http://jquery.malsup.com/cycle/)将为旧版本的 IE 中的元素添加背景颜色 。

您需要在循环初始化中将`cleartypeNoBg`选项设置为。`true`

```
$("#image-content-panel").cycle({
    fx : 'scrollRight',
    speed : 2700,
    cleartypeNoBg: true 
}); 
```

**编辑**以下内容无关紧要

IE8 不支持 rgba 值，将退回到纯色。如果您没有定义后备，它将默认为您所看到的白色。

有几种方法可以处理这个问题。

**1.接受IE8的限制。**

```
 #header {
        z-index: 100 !important;
        width: 100%;
        height: 50px;
        background: rgb(0,0,0);
        background: rgba(0,0,0,0.6);
        margin: 10px 0 0 0;
    } 
```

`#header`在不支持 rgba 的浏览器中会有纯黑色背景。在浏览器中是半不透明的。

**2.使用过滤器**

```
 #header {
        z-index: 100 !important;
        width: 100%;
        height: 50px;
        background: rgba(0,0,0,0.6);
        -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)"
        margin: 10px 0 0 0;
    } 
```

`#header`在 IE8 和适当的浏览器中将有 60% 的透明黑色背景。就个人而言，我讨厌使用过滤器。它们使您的标记变得丑陋并且难以维护，除非您非常擅长将 rgb 转换为您的头脑中的十六进制代码（我不是）。此外，这个特殊的过滤器是 IE8+。它在 IE7 中不起作用，但在 IE6-7 中也有其他过滤器。您还应该将其分离到特定于 IE8 的样式表中，或者使用其他方法来防止 IE9 使用过滤器，因为 IE9 支持 rgba。

**3.使用 1px x 1px 黑色、半透明的 .png**

```
 #header {
        z-index: 100 !important;
        width: 100%;
        height: 50px;
        background: url(background.png) repeat;
        margin: 10px 0 0 0;
    } 
```

这是我通常走的路线，因为它很简单。如果您需要更改 alpha 并且无需担心浏览器不一致，则创建 .png 需要几秒钟的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T08:04:57.523

正如其他人所说，IE8 不支持 RGBA 颜色值。

不过，你可以使用一个 hack 来解决这个问题：我建议在你的网站上试用[CSS3Pie](http://css3pie.com/)；它在旧版本的 IE 中实现了许多现代 CSS 功能，包括背景中的 RGBA 颜色。

希望有帮助。

# android - 在android中单击按钮时更新微调器值

> ID：12275316
> 
> 赞同：1
> 
> 时间：2012-09-05T06:00:41.000
> 
> 标签：android, dynamic, android-spinner, insert-update

在我的应用程序中有 2 个字段..它们是 1 个微调器和 1 个按钮......在这里我必须选择微调器值并单击提交按钮意味着微调器值是动态更新的..该怎么做......我必须开发了静态更新微调器值..我希望需要动态更新微调器值...我该怎么做..请给我一些想法。

我使用了以下代码：

```
public class InsertionExample extends Activity {
private final String NAMESPACE = "http://xcart.com";
private final String URL = "http://192.168.1.168:8089/XcartLogin/services/update?wsdl";
private final String SOAP_ACTION = "http://xcart.com/insertData";
private final String METHOD_NAME = "insertData";
Button btninsert;
String selectedItem;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.change_status);

  //  TextView tv = (TextView) findViewById(R.id.textView1);    
  // tv.setText("Welcome ,"+getIntent().getExtras().getString("orderid"));
    //get reference to the spinner from the XML layout
    Spinner spinner = (Spinner) findViewById(R.id.spinner1);
    btninsert = (Button)findViewById(R.id.btn_insert1);
    btninsert.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            PropertyInfo unameProp =new PropertyInfo();
            unameProp.setName("Status");//Define the variable name in the web service method
            unameProp.setValue(selectedItem);//Define value for fname variable
            unameProp.setType(String.class);//Define the type of the variable
            request.addProperty(unameProp);

              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
              envelope.setOutputSoapObject(request);
              HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

              try{
               androidHttpTransport.call(SOAP_ACTION, envelope);
                  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

                 TextView result = (TextView) findViewById(R.id.textView2);
                  result.setText(response.toString());
             }
           catch(Exception e){

           }
              }
    });

    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());
    //Dynamically generate a spinner data 
    createSpinnerDropDown();

}

//Add animals into spinner dynamically
private void createSpinnerDropDown() {

    //get reference to the spinner from the XML layout
    Spinner spinner = (Spinner) findViewById(R.id.spinner1);

    //Array list of animals to display in the spinner
    List<String> list = new ArrayList<String>();

    list.add("Q");
    list.add("P");
    list.add("F");
    list.add("I");
    list.add("C");

    //create an ArrayAdaptar from the String Array
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, list);
    //set the view for the Drop down list
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    //set the ArrayAdapter to the spinner
    spinner.setAdapter(dataAdapter);
    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

}

public class MyOnItemSelectedListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

         selectedItem = parent.getItemAtPosition(pos).toString();

 }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Do nothing.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:26:56.127

您可以`notifyDataSetChanged()`在适配器上使用。它将能够在 Spinner 中动态更改数据。

```
adapter.notifyDataSetChanged(); 
```

# c# - 强制 web 应用程序从 web.config 以 32 位运行？

> ID：12275317
> 
> 赞同：0
> 
> 时间：2012-09-05T06:00:58.630
> 
> 标签：c#, asp.net, iis, web-config, oledb

我试图从 ASP.NET aspx 页面 (C#) 连接到访问数据库，但收到错误消息：

> 'Microsoft.Jet.OLEDB.4.0' 提供程序未在本地计算机上注册。

经过一番研究，我怀疑这是因为服务器是 64 位的，并且与访问数据库交互的 Jet 驱动程序不支持 64 位。以前的解决方案建议要么强制 web 应用程序以 32 位模式运行，而不是“任何 cpu”，要么升级到服务器上的驱动程序的 64 位版本。问题是我没有对服务器的直接管理员访问权限，只有文件夹访问权限来编辑文件（包括 web.config）。所以我的问题是.. 是否可以仅通过 web.config / aspx 文件中的设置强制脚本以 32 位模式运行？（即，没有服务器/IIS 更改）否则将不得不与官僚机构作斗争才能对服务器进行更改；-)

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:09:15.087

您可以尝试在 applicationPoolDefaults 上设置[enable32BitAppOnWin64](http://www.iis.net/configreference/system.applicationhost/applicationpools/applicationpooldefaults)属性：

> 可选的布尔属性。
> 
> 如果为 true，则允许 32 位应用程序在运行 64 位版本 Windows 的计算机上运行。
> 
> 默认值为假。

```
<applicationPools>
   <add name="DefaultAppPool" />
   <applicationPoolDefaults enable32BitAppOnWin64="True">
   </applicationPoolDefaults>
</applicationPools> 
```

我承认我自己从未尝试过，但它应该可以工作。

# c++ - 转换为 void* 并返回 Original_Data_Type*

> ID：12275321
> 
> 赞同：4
> 
> 时间：2012-09-05T06:01:07.070
> 
> 标签：c++, casting, void-pointers

我已经多次看到并使用过这个是 C++，特别是在各种线程实现中。我想知道这样做是否有任何陷阱/问题？当我们强制转换为 void* 并再次返回时，有什么方法可以让我们遇到错误或未定义的情况？如果有这些问题，我们应该如何解决？

谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-21T05:31:57.620

这是完全有效的。以下是标准对它的评价：

> §4.10 指针转换
> 
> > 2 “指向*cv* `T`的指针”类型的右值，其中`T`是对象类型，可以转换为“指向*cv* `void`的指针”类型的右值。*将“指向cv*的指针”转换为“指向*cv* 的指针”的结果指向类型对象所在的存储位置的开始，就好像该对象是最派生的类型对象 (1.8) （即不是基类子对象）。`T` *`void``T``T`*

 *这意味着您可以将指向类的指针转换为 void 指针。和 ...

> §5.2.9 静态演员表
> 
> > 10 “指向*cv* `void`的指针”类型的右值可以显式转换为指向对象类型的指针。指向对象的指针类型的值转换为“指向*cv* `void`的指针”并返回到原始指针类型将具有其原始值。

这意味着您可以使用`static_cast`将 void 指针转换回原始类指针。

希望能帮助到你。祝你好运！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-11T13:00:02.367

在 C++ 中，您不需要静态强制转换**即可** `void*`：

```
int main()
{
    CFoo* foo = new CFoo;
    void* dt = foo;
    tfunc(dt); // or tfunc(foo);

    return 0;
} 
```

注意：您的实现`tfunc()`是非常正确的，因为它**确实**需要演员表。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-05T06:12:30.990

我在 C++ 中**没有**看到太多的转换。`void*`这是 C 中的一种实践，在 C++ 中被积极避免。

*转换为`void*`删除所有类型的安全性。*

如果您使用`reinterpret_cast`or`static_cast`将指针类型转换为相同的`void*`指针类型并返回到相同的指针类型，**则标准实际上保证了结果将是明确定义的**。

危险在于您可能将 a`void*`转换为错误的类型，因为您不再确定正确的类型是什么。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-05T06:06:47.763

> **我想知道这样做是否有任何陷阱/问题？**

在将 back 转换为特定类型时，您需要绝对确定`void*`，如果不这样做，您最终会遇到**未定义的行为**和潜在的灾难。一旦你使用`void *`你就会失去***类型安全性***。很难跟踪 a`void *`实际指向的类型，没有办法保证或确定它确实指向你要将它类型转换回的类型。

> **当我们强制转换为 void* 并再次返回时，有什么方法可以让我们遇到错误或未定义的情况？**

是的，中提到的场景`#1`。

> **如果有这些问题，我们应该如何解决？**

完全避免`void *`在 C++ 中使用，而是使用模板和继承。
在 C 语言中，您可能在某些情况下绝对需要它，但尽量将其使用降至最低。
归根结底，
C/C++ 允许您用脚射击自己，这取决于您是否这样做。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-05T07:26:14.540

标准授予的唯一一件事是，给定`A* pa`, `(A*)(void*)pA == pA`。一个后果

```
void* pv = pA;
A* pA2 = (A*)pv;
pA2->anything ... 
```

将与`pA->anything ...`

其他一切都是“未定义的”，广告 - 事实上 - 在某种程度上依赖于实现。

根据我的经验，这里有一些已知的陷阱：

*   考虑`A`派生形式`B`，`pA`并且`pB`是`A*`和`B*`。 `pB=pA`使`pB`指向 的基数`A`。那并不意味着`pB`并且`pA`是相同的地址。因此`pB = (B*)(void*)pA`实际上可以将其他任何地方指向 A （尽管通常实现单继承对象共享相同的起源，所以它显然工作正常）
*   反之亦然：假设`pB`实际上指向 a `A`，`pA = (A*)(void*)pB`不一定正确指向 A 对象。正确的方法是`pA = static_cast<A*>(pB);`
*   如果以上几点可以与大多数单继承实现一起使用，那么除了第一个以外的基数永远不会使用多个继承：考虑`class A: public Z, public B { ... };`如果`Z`不为空，给定 an `A`，`B`子组件将不会具有相同的 A 地址。（并且 C++ 中的多重继承无处不在 iostream 是）
*   有时事情还取决于平台：（`(char*)(void*)pI`指向`pI`整数的地方）与“ `*pI`if `*pI`in(-128..+127)”不同（仅在小端机器上）

一般来说**，不要假设类型之间的转换只是改变解释地址的方式**。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-05T06:10:34.897

我知道驱动程序等中的很多函数使用 void 指针将数据返回给调用者，架构大致相同：

```
int requestSomeData(int kindOfData, void * buffer, int bufferSize); 
```

该函数可以将不同的数据类型作为参数。他们所做的是使用 bufferSize 作为参数来避免写入他们不应该写入的内存位置。如果 bufferSize 不匹配或小于应返回的数据，则该函数将返回错误代码。

无论如何：避免使用它们或在编写任何代码之前三思而后行。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-21T05:30:38.260

> 这是有效的吗？

是的，根据标准 § 5.2.9.7 它是有效的

> “指向 cv1 void 的指针”类型的纯右值可以转换为“指向 cv2 T 的指针”类型的纯右值，其中 T 是对象类型，而 cv2 与 cv1 具有相同的 cv 限定或大于 cv1 的 cv 限定。空指针值转换为目标类型的空指针值。**指向对象的指针类型的值转换为“指向 cv void 的指针”并返回，可能具有不同的 cv 限定，应具有其原始值。**[ 例子：

```
T* p1 = new T;
const T* p2 = static_cast<const T*>(static_cast<void*>(p1));
bool b = p1 == p2; // b will have the value true. 
```*

# java - 如何在eclipse中运行应用程序时设置默认网页打开

> ID：12275325
> 
> 赞同：0
> 
> 时间：2012-09-05T06:01:35.183
> 
> 标签：java, eclipse

在运行 Web 应用程序项目时，是否可以在 Eclipse 中将默认文件设置为打开（运行）？每次单击运行按钮时，Eclipse 都会在焦点上运行当前文件。无论我正在编辑什么文件，如何让它打开一个特定的文件（即 index.jsp）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:16:53.383

为您的项目配置`Run Configurations`..并始终运行您`Configuration`配置的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:30:50.090

您可以在首选项中禁用启动所选资源的行为。

窗口 -> 首选项 -> 运行/调试 -> 启动 -> 启动操作

# ruby - 如何在正则表达式中使用双括号？

> ID：12275332
> 
> 赞同：8
> 
> 时间：2012-09-05T06:02:04.993
> 
> 标签：ruby, regex, syntax, brackets

正则表达式中的双方括号是什么意思？我对以下示例感到困惑：

```
/[[^abc]]/

/[^abc]/ 
```

我正在使用[Rubular](http://rubular.com/)进行测试，但我没有发现双括号和单括号之间有任何区别。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T07:16:51.970

[Posix 字符类](http://www.ruby-doc.org/core-1.9.3/Regexp.html)使用`[:alpha:]`符号，它在正则表达式中使用，例如：

```
/[[:alpha:][:digit:]]/ 
```

您需要向下滚动以获取上述链接中的 Posix 信息。从文档：

> POSIX 括号表达式也类似于字符类。它们为上述内容提供了一种可移植的替代方案，另外还有一个好处是它们包含非 ASCII 字符。例如，/\d/ 仅匹配 ASCII 十进制数字 (0-9)；而 /[[:digit:]]/ 匹配 Unicode Nd 类别中的任何字符。

```
/[[:alnum:]]/ - Alphabetic and numeric character
/[[:alpha:]]/ - Alphabetic character
/[[:blank:]]/ - Space or tab
/[[:cntrl:]]/ - Control character
/[[:digit:]]/ - Digit
/[[:graph:]]/ - Non-blank character (excludes spaces, control characters, and similar)
/[[:lower:]]/ - Lowercase alphabetical character
/[[:print:]]/ - Like [:graph:], but includes the space character
/[[:punct:]]/ - Punctuation character
/[[:space:]]/ - Whitespace character ([:blank:], newline,
carriage return, etc.)
/[[:upper:]]/ - Uppercase alphabetical
/[[:xdigit:]]/ - Digit allowed in a hexadecimal number (i.e., 0-9a-fA-F) 
```

> Ruby 还支持以下非 POSIX 字符类：

```
/[[:word:]]/ - A character in one of the following Unicode general categories Letter, Mark, Number, Connector_Punctuation
/[[:ascii:]]/ - A character in the ASCII character set
# U+06F2 is "EXTENDED ARABIC-INDIC DIGIT TWO"

/[[:digit:]]/.match("\u06F2")    #=> #<MatchData "\u{06F2}">
/[[:upper:]][[:lower:]]/.match("Hello") #=> #<MatchData "He">
/[[:xdigit:]][[:xdigit:]]/.match("A6")  #=> #<MatchData "A6"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T06:19:17.037

'[[' 没有任何特殊含义。 `[xyz]`是一个字符类，将匹配单个`x`,`y`或`z`. 克拉`^`取所有不在括号中的字符。

为简单起见`^`，您可以看到第一个左括号与第一个右括号匹配，第二个右括号被用作字符类的一部分。最后的右括号被视为要匹配的另一个字符。

```
irb(main):032:0> /[[abc]]/ =~ "[a]"
=> 1
irb(main):033:0> /[[abc]]/ =~ "a]"
=> 0 
```

在某些情况下，这似乎与您的原始结果相同

```
irb(main):034:0> /[abc]/ =~ "a]"
=> 0
irb(main):034:0> /[abc]/ =~ "a"
=> 0 
```

但这只是因为您的正则表达式不是在寻找完全匹配的。

```
irb(main):036:0> /^[abc]$/ =~ "a]"
=> nil 
```

# iphone - 选择多个电话号码和电子邮件地址的方法

> ID：12275339
> 
> 赞同：4
> 
> 时间：2012-09-05T06:02:56.200
> 
> 标签：iphone, user-interface, abaddressbook, multipleselection

在一个 iPhone 应用程序中，我想添加从 iPhone 的通讯录中邀请朋友的功能。我已经成功地从通讯录中获取联系人并将它们显示在 UITableView 中（使用带有姓名、号码和电子邮件的自定义 UITableViewCell）。

现在，对于**单个**电话号码和**单个**电子邮件地址，一切都很好。当一个联系人有**多个**电话号码和**多个**电子邮件地址（大部分时间都在那里）时，问题就来了。

我找到的解决方案是在 DetailViewContoller 中提供所有详细信息（另一个仅用于选择的 ViewController，这使得该过程对用户不友好），并让用户可以根据需要选择数字和电子邮件。

我想知道，是否有人遇到过同样的问题并尝试过**不同的方法？**

**注意：**在同一个 UITableViewCell 中显示多个电子邮件和号码根本不是问题。问题是找到最简单的方法来为单个用户选择多个值来发送邀请。希望，我对你有意义。让我知道，如果您有任何疑问。

任何人？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:20:04.307

希望您可以有一个分组的 uitableview，其中每个部分在不同的行中显示用户联系详细信息..还带有 UITableViewCellAccessoryCheckmark 并处理 didSelectRowAtIndexPath 委托中的选择。类似于部分的内容显示用户详细信息。由于每个信息（如号码、邮件等）都位于不同的行中，因此您也可以轻松处理选择。

# ruby-on-rails - Rails 3 应用程序中的团队

> ID：12275340
> 
> 赞同：1
> 
> 时间：2012-09-05T06:02:59.993
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在另外 1 次发布过，但它仍然无法正常工作，尽管尝试了 3 个小时，但我无法弄清楚原因。我对这一切都很陌生，这对我来说非常复杂。我真的很感激这方面的一些帮助。谢谢！

我需要创建一个用户团队。一个用户`belongs_to`一个团队，一个团队`has_many`用户。

用户应该能够创建团队、加入现有团队、退出当前团队（如果你能告诉我如何让创建团队的人成为团队领导者，那也很棒！）

我有这样设置的数据库表：

*   用户表：`id, name, email, timestamps, team_id`
*   团队表：`id, team_name, timestamps, user_id`

我得到的错误：

```
undefined method `team_build' for #<User:0x3a14a80>

1: <%= button_to "Join", join_teams_path(current_user.team.build(team_id: @team_id)),    class: "btn btn-large btn-primary" %> 
```

用户型号：

```
class User < ActiveRecord::Base
attr_accessible :company, :name, :email, :password, :password_confirmation, :image
    belongs_to :team, dependent: :destroy

    validates :user_id, presence: true

    def team_member?
       team.present?
    end

    def join!(team)
     return false if team_member?
     team.create!(team_id: team.id)
    end  

   def unjoin!(team)
    return if team_member?
    team.destroy
   end 
```

团队模型：

```
class Team < ActiveRecord::Base
has_many :users

attr_accessible :team_name

before_save { |team| team.team_name = team_name.downcase }

validates :team_name, 
        presence: true, 
        length: { maximum: 140 }, 
        uniqueness: { case_sensitive: false }

default_scope order: 'teams.created_at DESC'

end 
```

团队控制器：

```
class TeamsController < ApplicationController
 before_filter :signed_in_user

def join
 @team = Team.find params[:id]
  if current_user.join!(@team.id)
   redirect_to @user #NOTE dont use redirect when you perform actions with ajax.
  else
   #render some error
 end
 end

def show
 @team =  Team.find(params[:id])
end

def leave
 if current_user.unjoin!
  redirect_to @user #NOTE dont use redirect when you perform actions with ajax.
 else
   #render some error
 end
end

def new
  @team = Team.new
end

def create
   @team = Team.new(params[:team])
  if @team.save
    flash[:success] = "Team Created!"  
    redirect_to @team
  else
    render 'new'
  end
end

 def teams
  @title = "Teams"
  @team = Teams.find(params[:id])
  render 'show_teams'
 end

 def index
Team.all
 end 
```

加入按钮：

```
<%= button_to "Join", join_teams_path(current_user.team.build(team_id: @team_id)),        class: "btn btn-large btn-primary" %> 
```

取消加入按钮：

```
<%= button_to "Leave Team", leave_teams_path(current_user.team) , class: "btn btn-large btn-primary" , remote: true  %> 
```

路线：

```
resources :teams

match '/teams',          to: 'teams#index'
match '/new_team',       to: 'teams#new' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:35:56.440

```
current_user.teams.build(whatever) 
```

如果你有一个 has_many 关系，你会这样做。但是如果你有一个 belongs_to 关联，你需要：

```
current_user.build_team(whatever) 
```

[有关更多信息，请参阅此处的 belongs_to](http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/belongs_to)文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T15:05:49.563

我想到了。构建方法不起作用。团队已经建立，用户也已经建立。我只需要建立连接。这是我所拥有的：

团队控制器：

```
def show
  @team =  Team.find(params[:id])
  @team_members = @team.users
  @user = User.find(params[:id]) if signed_in?
end 
```

加入按钮部分：

```
<%= form_for(@user) do |f| %>
  <%= f.hidden_field :team_id, :value => @team.id %>
  <%= f.submit "Join Team", class: "btn btn-large btn-primary" %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T06:52:29.707

“（如果你能告诉我如何让创建团队的人成为团队领导者，那也很棒！）”

对于团队负责人，您可以通过几种方式做到这一点。这是一个简单的方法。

```
$ rails generate migration AddTeamLeaderUserIdToTeams team_leader_user_id:integer
$ rake db:migrate 
```

这样做是在您的团队表中添加一个新列，以便每个团队可以存储其团队负责人的用户 ID（注意：这意味着每个团队只能有一个团队负责人。我可以解释如果您想要如何拥有多个团队领导者。）

从那里，当您创建一个新团队时，您可以执行以下操作：

```
team = Team.create({:team_name => "Stanford Cardinal", :team_leader_user_id => current_user.id}). 
```

那么在未来你可以得到这样的团队负责人：

```
team_leader = User.find_by_id(Team.find_by_team_name("Stanford Cardinal").team_leader_user_id)) 
```

希望这会有所帮助。如果有不清楚的地方，请随时提出更多问题。

# java - 出乎意料的 Java 性能

> ID：12275347
> 
> 赞同：5
> 
> 时间：2012-09-05T06:03:29.940
> 
> 标签：java, performance

我刚刚把我所知道的关于 Java 优化的一切都抛到了窗外。我有以下任务：

给定一个表示比赛场地和场地位置的 2D 数组，用玩家到达场地中其他每个位置所需的步数填充另一个数组。玩家可以上下左右移动。例如，第一个邻居全为 1，对角线全为 2。

第一次尝试，我尝试了一个简单的 4-way floodfill 算法。它慢得可怕。

其次，我决定摆脱递归并使用简单的队列。它工作得很好，并提供了巨大的加速（非常大约 20 倍）。这是代码：

```
private void fillCounterArray(int[] counters, int position) {
    Queue<Integer> queue = new ArrayDeque<Integer>(900);

    // Obtain the possible destinations from position, check the valid ones
    // and add it the stack.
    int[] destination = board.getPossibleDestinations(position);
    for (int i = 0; i < destination.length; i++) {
        if (board.getBoard()[destination[i]] == Board.CLEAR) {
            counters[destination[i]] = 1;
            queue.add(destination[i]);
        }
    }

    // Now fill up the space.
    while (!queue.isEmpty()) {
        int pos = queue.remove();
        int steps = counters[pos];            
        destination = board.getPossibleDestinations(pos);
        for (int i = 0; i < destination.length; i++) {
            int dest = destination[i];
            if (board.getBoard()[dest] == Board.CLEAR && (counters[dest] > steps + 1 || counters[dest] == 0)) {
                counters[dest] = steps + 1;
                queue.add(dest);
            }
        }
    }
} 
```

现在，“常识”告诉我，使用静态数组和 int 指针的队列操作会更快。所以我删除了队列并使用标准的 int[] 数组。代码是相同的，除了类似队列的操作。现在看起来像这样（如您所见，我曾经住在 C 端 :)）：

```
private void fillCounterArray(int[] counters, int position) {

    // Array and its pointer.
    int[] queue = new int[900]; // max size of field
    int head = 0;

    // Obtain the possible destinations from position, check the valid ones
    // and add it the stack.
    int[] destination = board.getPossibleDestinations(position);
    for (int i = 0; i < destination.length; i++) {
        if (board.getBoard()[destination[i]] == Board.CLEAR) {
            counters[destination[i]] = 1;
            queue[head++] = dest[i];
        }
    }

    // Now fill up the space.
    while (head > 0) {
        int pos = queue[--head];
        int steps = counters[pos];

        destination = board.getPossibleDestinations(pos);
        for (int i = 0; i < destination.length; i++) {
            int dest = destination[i];
            if (board.getBoard()[dest] == Board.CLEAR && (counters[dest] > steps + 1 || counters[dest] == 0)) {
                counters[dest] = steps + 1;
                queue[head++] = dest;
            }
        }
    }
} 
```

当我运行这个“优化代码”时，它比使用队列慢得多，并且只比递归技术快两倍。当我将数组声明为实例变量时也几乎没有任何区别。这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:30:00.193

我认为您在优化时颠倒了顺序；

```
The queue is fifo, first in first out
The array is lifo, last in first out, as you walk it downwards 
```

这通常会给你不同的表现;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:08:58.793

在每个循环中插入两个计数器，一个在 for 循环中，一个在 while 循环中，在两个版本中，比较你最后得到的数字，你在每个版本中做了多少轮，如果你有另一个循环`getPossibleDestination`然后记录`pos`变量也。我想这将是一个很好的起点。

另一种方法是在程序的不同行上打印时间差，比如说在第一个循环之前，在两个和最后之间，一旦你比较结果并知道在第二个版本中需要很长时间的地方，你可以打印时间戳在不同行的循环中。

# linker - ARM DCD 从 RAM 工作和执行

> ID：12275354
> 
> 赞同：2
> 
> 时间：2012-09-05T06:03:54.860
> 
> 标签：linker, embedded, arm, greenhills

我正在使用 MBD9F126（ARM Cortex R4）微控制器。在那里我将代码闪存到 ROM 中，然后在 RAM 复制后从 RAM 执行代码。我正在使用 Green hills 编译器。在 RAM 复制之前，我正在执行基本的板初始化代码。

```
 LDR r12, ADDRESS_START_PREINIT
    BLX r12
    ADDRESS_START_PREINIT:DCD Start_PreInit 
```

Start_PreInit 是板卡初始化函数。如果我在 BLX 之后这样给出，它将分支到 RAM 位置。由于 RAM 复制尚未完成，因此它会进入未知区域。

而不是这个如果我在写

```
 bl Start_PreInit 
```

它工作正常，将进入代码的 ROM 位置。我不明白为什么编译器会有这样的行为？
还有 ADDRESS_START_PREINIT:DCD Start_PreInit 。它是在链接期间完成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:47:10.467

该`bl Start_PreInit`指令有效，因为分支目标在指令操作码中编码为相对于当前`PC`( `r15`) 的偏移量。由于`r15`是指向ROM，所以目标是另一个ROM地址。

`blx r12`指令跳转到加载到`r12`寄存器中的绝对地址。

当您将 的内容加载`ADDRESS_START_PREINIT`到寄存器中时，您得到的是链接器为该地址计算的绝对`Start_PreInit`地址。显然，链接器已将其修复为 RAM 绝对地址。

您可能能够通过链接器配置或通过在分支之前`r12`使用 RAM 地址（类似于 ）加载它时执行一些转换来解决问题。`(r12 - RAM_START) + ROM_START`或者，如果目标地址在范围内，则对分支指令使用 pc 相对编码而不是寄存器绝对编码。

# android - Android - 如何直接打开电子邮件客户端

> ID：12275365
> 
> 赞同：7
> 
> 时间：2012-09-05T06:04:59.987
> 
> 标签：android, email-client

我想打开默认电子邮件客户端而不是显示选项。我试过了，但我没有得到请任何人都可以帮助我。

我使用了以下代码：

```
 final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

        emailIntent.setType("text/html");
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "My Allergy Journal");       
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml("<small>"+sb.toString()+"</small>"));                                 
        startActivity(Intent.createChooser(emailIntent, "Email:")); 
```

**它显示选项**

![在此处输入图像描述](../Images/57fabd846626791cb6f1a051ed423f6d.png)

**但我想直接打开默认电子邮件客户端。**

![在此处输入图像描述](../Images/da9033cdbba89aff3a503754d51e104f.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-05T06:11:59.403

以格式框出一个字符串`String URI="mailto:?subject=" + subject + "&body=" + body;`

和

```
Intent intent = new Intent(Intent.ACTION_VIEW);
Uri data = Uri.parse(URI);
intent.setData(data);
startActivity(intent); 
```

这将打开用户选择的默认电子邮件程序。

`Linkify`这样做。如果您愿意，请查看[它的源代码。](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/text/util/Linkify.java)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-05T06:17:04.397

您可以使用以下代码打开您想要的任何意图，例如 gmail、facebook、电子邮件等。在我的代码中使用的类型很简单，如果您想打开 gmail，请通过“gmail”，如果您想打开，请通过“face” Facebook

```
Intent intent = new Intent(android.content.Intent.ACTION_SEND); 
intent.setType("text/html");
List<ResolveInfo> resInfo = getPackageManager().queryIntentActivities(intent, 0);

if (!resInfo.isEmpty())
{
    for (ResolveInfo info : resInfo) 
    {
    if (info.activityInfo.packageName.toLowerCase().contains(type) || info.activityInfo.name.toLowerCase().contains(type)) 
    {
            intent.putExtra(android.content.Intent.EXTRA_TEXT, htmlBody);
            intent.setPackage(info.activityInfo.packageName);   
            startActivity(Intent.createChooser(intent, getResources().getString(R.string.share_send_text)));
        }
} 
```

# java - Java中的快速TCP交换率

> ID：12275367
> 
> 赞同：1
> 
> 时间：2012-09-05T06:05:03.980
> 
> 标签：java, tcp, lag

我正在用 Java 制作多人游戏，并且正在使用 tcp 连接进行客户端/服务器通信。我试图优化传输，使其仅在游戏发生变化时发送数据包，搜索问题，在每次传输后刷新对象流和套接字，并将 setTcpNoDelay 设置为 true。但是我仍然可以看到延迟，有时传入的数据包会停顿几秒钟（有时永远（或者我没有尝试等待的很长一段时间）），直到发送另一个数据包（听起来像缓冲给我）。我没有在局域网上测试它，只是在我的本地主机上。我知道 Minecraft 是用 Java 编写的，它运行良好，延迟最小，所以必须有办法解决这个问题......

我可以实施任何其他技巧来加快 tcp 客户端/服务器通信吗？

编辑：玩家实例包括玩家速度，因此在两个传入数据包之间，游戏以最后已知速度从最后一个已知位置运行其他玩家。

# magento-1.7 - Magento - 获取具有产品数量的所有制造商的列表

> ID：12275371
> 
> 赞同：1
> 
> 时间：2012-09-05T06:05:52.130
> 
> 标签：magento-1.7

我正在使用以下代码列出所有制造商，它就像一个魅力：

```
$attribute = Mage::getModel('eav/entity_attribute')
                ->loadByCode('catalog_product', 'manufacturer');

$valuesCollection = Mage::getResourceModel('eav/entity_attribute_option_collection')
            ->setAttributeFilter($attribute->getData('attribute_id'))
            ->setStoreFilter(0, false);

$preparedManufacturers = array();            
foreach($valuesCollection as $value) {
    $preparedManufacturers[$value->getOptionId()] = $value->getValue();
}   

if (count($preparedManufacturers)) {
    echo "<h2>Manufacturers</h2><ul>";
    foreach($preparedManufacturers as $optionId => $value) {
        echo "<li>" . $value . " - (" . $optionId . ")</li>";
    }
    echo "</ul>";
} 
```

我正在寻找的是一种显示与每个制造商相关的产品数量的方法。有人可以告诉我这样做的方法吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-22T22:37:06.173

不全是我的，但在 1.6+ 中对我有用吗？

```
<?php
    include_once 'app/Mage.php';
    Mage::app();

    $attribute = Mage::getModel('eav/entity_attribute')
            ->loadByCode('catalog_product', 'manufacturer');

    $valuesCollection = Mage::getResourceModel('eav/entity_attribute_option_collection')
            ->setAttributeFilter($attribute->getData('attribute_id'))
            ->setStoreFilter(0, false);

    $preparedManufacturers = array();
    foreach ($valuesCollection as $value) {
        $preparedManufacturers[$value->getOptionId()] = $value->getValue();
    }

    if (count($preparedManufacturers)) {
        echo "<h2>Manufacturers</h2><ul>";
        foreach ($preparedManufacturers as $optionId => $value) {
            $collection = Mage::getModel('catalog/product')->getCollection();
            $collection->addFieldToFilter(array(array('attribute' => 'manufacturer', 'eq' => $optionId)));
            $mumberOfProducrt = count($collection);
            echo "<li>" . $value . " - (" . $mumberOfProducrt . ")</li>";
        }
        echo "</ul>";
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:53:15.073

这会起作用，但不会是最有效的：

```
foreach($valuesCollection as $value) {
    $preparedManufacturers[$value->getOptionId()] = $value->getValue();
    $collection = Mage::getModel('catalog/product')->getCollection();
    $collection
        ->addAttributeToSelect('*') // '*' not efficient though
        ->addAttributeToFilter('manufacturer', array('eq' => $value->getOptionId()))
        //->addAttributeToFilter('manufacturer', $value->getOptionId())
     ;
    $count = $collection->->getSize();
} 
```

这是每个制造商的额外查询，所以它不是很好，如果你有一些缓存等它不会太糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-19T08:50:53.977

工作代码应该这样做

```
$collection = Mage::getModel('catalog/product')->getCollection()->groupByAttribute('manufacturer')
                ->addFieldToFilter('status',Mage_Catalog_Model_Product_Status::STATUS_ENABLED)
                ->addExpressionAttributeToSelect("count",'COUNT({{entity_id}})', 'entity_id');
Mage::getSingleton('cataloginventory/stock')->addInStockFilterToCollection($collection); 
```

# cakephp - 分页数组（不是来自数据库） cakePHP

> ID：12275372
> 
> 赞同：1
> 
> 时间：2012-09-05T06:05:53.603
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, pagination, cakephp-2.2

在控制器中，我从网络服务中获取了一系列新闻 `$news = json_decode(@file_get_contents($submenu), true);`，我需要将此数组分页为每页 6 条新闻。我的数组结构：

```
array(
    (int) 0 => array(
        'id' => '716',
        'city_id' => null,
        'language' => 'lit',
        'header' => 'Lorem ipsum dolor sit amet.',
        'description' => '<p>Sed  diam  nonummy nibh euismod tincidunt ut laoreet dolore magna.',
        'short_description_img' => '',
        'autor' => 'Avio',
        'friendly_link' => 'Lorem_ipsum_dolor_sit_amet_1346393036',
        'created' => '2012-08-31 09:03:56',
        'general_tag' => array(
            'id' => null,
            'agency_id' => null,
            'project_id' => null,
            'active' => null,
            'language' => null,
            'title' => null,
            'friendly_link' => null,
            'healthcare_trip_tag' => null,
            'created' => null
        ),
        'tags' => array()
    )
        (int) 1 => array(
        'id' => '717',
        'city_id' => null,
        'language' => 'lit',
        'header' => 'Lorem ipsum dolor sit amet.',
        'description' => '<p>Sed  diam  nonummy nibh euismod tincidunt ut laoreet dolore magna.',
        'short_description_img' => '',
        'autor' => 'Avio',
        'friendly_link' => 'Lorem_ipsum_dolor_sit_amet_1346393036',
        'created' => '2012-08-31 09:03:56',
        'general_tag' => array(
            'id' => null,
            'agency_id' => null,
            'project_id' => null,
            'active' => null,
            'language' => null,
            'title' => null,
            'friendly_link' => null,
            'healthcare_trip_tag' => null,
            'created' => null
        ),
        'tags' => array()
    )
         .................
) 
```

尝试了 CakePHP 文档中显示的默认分页方法，但没有运气。感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:07:29.807

您可以`copy cake/Controller/Component/PaginatorComponent.php`，`app/Controller/Component/PaginatorComponent.php`然后覆盖其中的分页功能。通过简单的更改，您拥有数组分页器。

# c - “strncpy”与“sprintf”

> ID：12275381
> 
> 赞同：18
> 
> 时间：2012-09-05T06:06:47.500
> 
> 标签：c, printf, strncpy

我可以在我的应用程序中看到许多`sprintf`'s 用于复制字符串。

我有一个字符数组：

```
char myarray[10];
const char *str = "mystring"; 
```

现在，如果我想将字符串复制`str`到`myarray`，最好使用：

```
sprintf(myarray, "%s", str); 
```

或者

```
strncpy(myarray, str, 8); 
```

?

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-05T06:55:53.567

根本不应该使用。

1.  `sprintf`是危险的，已弃用并被`snprintf`. 安全地使用 old 字符串输入的唯一方法`sprintf`是在调用之前测量它们的长度`sprintf`，这是丑陋且容易出错的，或者通过添加字段精度说明符（例如`%.8s`，或`%.*s`为大小限制使用额外的整数参数）。`%s`这也是丑陋且容易出错的，尤其是在涉及多个说明符的情况下。

2.  `strncpy`也是危险的。它**不是**`strcpy`. _ 它是一个用于将字符复制到固定长度、*填充*空（与空*终止*）数组中的函数，其中源可以是 C 字符串或至少与目标大小相同的固定长度字符数组。它的预期用途是用于与固定大小的文本字段一起使用的遗留 unix 目录表、数据库条目等，并且不希望在磁盘或内存中浪费一个字节来终止空值。它*可能*被误用作缓冲区大小限制`strcpy`，但这样做是有害的，原因有两个。首先，如果整个缓冲区用于字符串数据（即如果源字符串长度至少与目标缓冲区一样长），则它无法空终止。您可以自己添加终止，但这很丑陋且容易出错。其次，`strncpy`当源字符串比输出缓冲区短时，总是用空字节填充整个目标缓冲区。这简直是​​浪费时间。

那么你应该改用什么？

有些人喜欢 BSD`strlcpy`功能。从语义上讲，它与 相同，`snprintf(dest, destsize, "%s", source)`只是返回值 is`size_t`并且不对`INT_MAX`字符串长度施加人为限制。但是，大多数流行的非 BSD 系统都缺少`strlcpy`.，而且编写自己的代码很容易出错，因此如果您想使用它，您应该从可信赖的来源获取安全、已知工作的版本。

我的偏好是简单地`snprintf`用于任何非平凡的字符串构造，而`strlen`+`memcpy`用于一些被测量为对性能至关重要的平凡案例。如果您养成正确使用此习惯用法的习惯，几乎不可能意外编写带有与字符串相关的漏洞的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T06:28:03.397

不同版本的 printf/scanf 是非常慢的函数，原因如下：

*   他们使用可变参数列表，这使得参数传递更加复杂。这是通过各种晦涩难懂的宏和指针来完成的。所有参数都必须在运行时解析以确定它们的类型，这增加了额外的开销代码。（VA 列表也是该语言的一个相当多余的特性，而且也很危险，因为它的类型比普通的参数传递要弱得多。）

*   他们必须处理许多复杂的格式和支持的所有不同类型。这也增加了函数的大量开销。由于所有类型评估都是在运行时完成的，因此编译器无法优化掉函数中从未使用过的部分。因此，如果您只想使用 printf() 打印整数，您将获得与程序相关联的浮点数、复数算术、字符串处理等的支持，这完全是浪费空间。

*   另一方面，诸如 strcpy() 和特别是 memcpy() 之类的函数由编译器进行了大量优化，通常在内联汇编中实现以获得最大性能。

下面包括我曾经在准系统 16 位低端微控制器上进行的一些测量。

根据经验，您不应该在任何形式的生产代码中使用 stdio.h。它被认为是一个调试/测试库。MISRA-C:2004 在生产代码中禁止 stdio.h。

**编辑**

用事实代替主观数字：

在目标 Freescale HCS12、编译器 Freescale Codewarrior 5.1 上测量 strcpy 与 sprintf。使用 sprintf 的 C90 实现，C99 会更加无效。启用所有优化。测试了以下代码：

```
 const char str[] = "Hello, world";
  char buf[100];

  strcpy(buf, str);
  sprintf(buf, "%s", str); 
```

执行时间，包括参数改组开/关调用堆栈：

```
strcpy   43 instructions
sprintf  467 instructions 
```

分配的程序/ROM空间：

```
strcpy   56 bytes
sprintf  1488 bytes 
```

分配的 RAM/堆栈空间：

```
strcpy   0 bytes
sprintf  15 bytes 
```

内部函数调用次数：

```
strcpy   0
sprintf  9 
```

函数调用堆栈深度：

```
strcpy   0 (inlined)
sprintf  3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T06:27:50.423

我不会使用 sprintf 来复制字符串。这太过分了，阅读该代码的人肯定会停下来想知道我为什么这样做，以及他们（或我）是否遗漏了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-10T09:18:18.303

有一种方法可以使用 sprintf() （或者如果是偏执狂， snprintf() ）来执行“安全”字符串复制，它会截断而不是溢出字段或将其保留为非 NUL 终止。

即使用“*”格式字符作为“字符串精度”如下：

所以：

```
char dest_buff[32];
....
sprintf(dest_buff, "%.*s", sizeof(dest_buff) - 1, unknown_string); 
```

这会将 unknown_string 的内容放入 dest_buff 中，为终止的 NUL 留出空间。

# selenium - 如何使用 Webdriver Selenium 从菜单中选择元素？菜单下拉菜单显示在鼠标悬停？

> ID：12275383
> 
> 赞同：6
> 
> 时间：2012-09-05T06:06:48.550
> 
> 标签：selenium, selenium-rc, selenium-webdriver

如何使用**Webdriver Selenium**从菜单中选择元素？**菜单下拉菜单**显示在鼠标**悬停**？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T15:49:32.940

您可以通过两种方式检查它：1）第一种方法是使用操作生成器

```
WebElement mnuElement;
WebElement submnuElement;
mnEle = driver.findElement(By.Id("mnEle")).Click();
sbEle = driver.findElement(By.Id("sbEle")).Click();

Actions builder = new Actions(driver);
// Move cursor to the Main Menu Element
builder.MoveToElement(mnEle).Perform();
// Giving 5 Secs for submenu to be displayed
Thread.sleep(5000L);
// Clicking on the Hidden SubMenu
driver.findElement(By.Id("sbEle")).Click(); 
```

看[这里](http://www.anitpatel.net/2012/02/25/selenium-webdriver-how-to-click-on-a-hidden-link-or-menu/)

2）另一种方法是使用jscript直接点击需要的元素而不模拟鼠标悬停事件：

```
String cssLocatorOfTheElement=....//locator of the element to click on    
JavascriptExecutor js = (JavascriptExecutor) driver;
            StringBuilder stringBuilder = new StringBuilder();
            stringBuilder.append("var x = $(\'"+cssLocatorOfTheElement+"\');");
            stringBuilder.append("x.click();");
            js.executeScript(stringBuilder.toString()); 
```

希望这对你有用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:31:45.057

模拟 mouseOver 事件，然后选择你喜欢的元素：

```
var elementToShowMenu = Driver.FindElement(Byl.Id("some id")); 
new Actions(Driver).MoveToElement(elementToShowMenu).Release(elementToShowMenu).Build().Perform();
var menuElement = Driver.FindElement(Byl.Id("your menu id")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:47:11.057

以下是我如何单击标签上的不可见锚链接：由 Javascript 动态生成的链接：

```
public static void mouseClickByLocator( String cssLocator ) {
     String locator = cssLocator;
     WebElement el = driver.findElement( By.cssSelector( locator ) );
     Actions builder = new Actions(driver);
     builder.moveToElement( el ).click( el );
     builder.perform();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-13T13:53:28.120

```
WebElement mnuElement;
WebElement submnuElement;
mnuElement = driver.findElement(By.cssSelector("insert selector here"));
submnuElement = driver.findElement(By.cssSelector("insert selector here"));

Actions builder = new Actions(driver);
// Move cursor to the Main Menu Element
builder.moveToElement(mnuElement).perform();
// Pause 2 Seconds for submenu to be displayed
TimeUnit.SECONDS.sleep(2); //Pause 2 seconds
// Clicking on the Hidden submnuElement
submnuElement.click(); 
```

# android - 安装错误：INSTALL_FAILED_INSUFFICIENT_STORAGE Android phonegap

> ID：12275385
> 
> 赞同：2
> 
> 时间：2012-09-05T06:06:59.763
> 
> 标签：android, cordova

`Phonegap`应用程序未安装在真实设备上`LG500`。

错误是：`Installation error: INSTALL_FAILED_INSUFFICIENT_STORAGE`

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-02T12:36:57.950

```
You need to do two things after which this error will be resolved.

1\. In your AndroidManifest.xml file add android:installLocation="preferExternal" within your manifest tag.

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.packagename.appname"
android:versionCode="1"
android:versionName="1.0" 
android:installLocation="preferExternal">

2\. More importantly, clear the cache data in your device. Goto settings -> storage -> click on cached data. This will clear the cache and free the space.

3\. Reconnect your device, clean your project and again run it on the device. The project will now run on your device. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T06:10:44.993

如果已安装，请从您计划安装的设备中删除该应用程序，然后重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T13:01:14.590

这太愚蠢了，但在我的情况下，问题如下：有足够的可用磁盘空间来存储应用程序，但我的主屏幕上没有可用的“空间”来容纳图标 - 网格中的所有地方都已满. 我通过在主屏幕上添加一个新的“页面”来解决这个问题，以便有空间容纳应用程序图标。

花了我几个小时来解决 - 使用带有 Android 4.1.2 的三星 Galaxy S2

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-28T21:33:55.233

在您的 Android Manifest 中，只需`<manifest ... android:installLocation="preferExternal"...>`添加`<manifest>`标签

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-16T06:24:56.047

从 temp 目录中删除 Cordova android 包有助于：

*   `adb shell rm /data/local/tmp/android-debug.apk`

或者，您可以查看目录中还有哪些其他包并尝试删除发布版本，例如：

*   `adb shell ls /data/local/tmp/`

*   `adb shell rm /data/local/tmp/android-release-unsigned.apk`

# ibm-midrange - 打开查询文件时如何收到 CPF417A 消息？

> ID：12275391
> 
> 赞同：0
> 
> 时间：2012-09-05T06:07:35.850
> 
> 标签：ibm-midrange

我目前正在开发 3 个程序。程序 A 是一个 CL，它将用 SHARE(*YES) 覆盖物理文件 ECIFCTP 并调用 RPG 程序 B 来处理它。处理后程序B会调用程序C，另外一个CL在这个物理文件上打开查询文件，过滤掉记录。当我实际运行程序时，程序 C 中的 OPNQRYF 语句将导致错误消息 CPF417A“处理可空字段对打开成员 ECIFCTP 无效”。为什么会这样？如何避免？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:17:37.603

您正在与 共享开放数据路径`SHARE(*YES)`。在访问共享开放数据路径的所有程序中，开放参数必须相同。

在这种情况下，程序 B 和程序 C 没有相同的[ALWNULL](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzasd/sc092508358.htm)设置。

CL 中的设置位于[DCLF](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/cl/dclf.htm)语句中。例如：`DCLF ... ALWNULL(*YES)`

# php - 尝试使用 ftp_put 函数上传 .zip 文件，但无法上传大文件（超过 1 MB）

> ID：12275392
> 
> 赞同：4
> 
> 时间：2012-09-05T06:07:38.543
> 
> 标签：php

我正在使用以下代码上传`.zip`文件，但无法上传大小超过 1MB 的文件：

```
$upload = ftp_put($conn_id, $target_path.'/'.$filename, $source, FTP_BINARY); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:48:04.677

你检查过 error_log 吗？如果不检查，找出问题到底是什么，如果使用 apache，您可以在 .htaccess 中设置 php.ini 设置。像这样

```
php_value  upload_max_filesize  20M 
```

粘贴此 .htaccess 文件，您将能够上传该文件。此外，请检查 error_log 以了解导致问题的确切原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:11:24.823

您是否将 php.ini max_file_uploads 中的配置设置更改为更大的值，这些值被视为 MB，因此请给出最大为 5 的值

我相信它应该工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T06:35:19.887

1.  更改 php.ini 将导致 php 应用程序正在运行。

2.  更改 htaccess 文件将导致项目

3.  更改 php 文件将导致 php 文件及其包含的文件

根据您的需求选择哪一个。

使用，**upload_max_filesize**这将控制要上传的文件的大小。

**post_max_size**是边表单元素中发布的数据的大小。

它可以是文件、输入、复选框......等等。所以这也必须根据文件大小进行更改。

您应该同时调整**upload_max_filesize**和**post_max_size**以执行文件操作和其他...

# xamarin.ios - Monotouch 支持的架构组合被禁用

> ID：12275394
> 
> 赞同：0
> 
> 时间：2012-09-05T06:07:42.850
> 
> 标签：xamarin.ios, app-store, application-loader

我使用 monotouch 并尝试使用 app loader 2.7 将我的应用程序发送到 iTunes

需要改变单触式的架构，但是

支持的架构组合在 Iphone 构建选项/高级中被禁用。

我不能选择 ARM7+ ARM6

我需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T08:49:53.410

将部署目标（在项目选项的 iPhone 应用程序选项卡中）设置为运行 ARMv6 设备（例如 3.1）的对象。

例如，如果您将部署目标设置为 5.0，则不需要包含 ARMv6（因为所有支持 iOS 5.0 的设备也支持 ARMv7）。

# php - 将 Wordpress 与现有的 PhP 站点集成

> ID：12275399
> 
> 赞同：-1
> 
> 时间：2012-09-05T06:08:10.017
> 
> 标签：php, wordpress

我有一个现有的 php 站点，我尝试使用 wordpress 的 wpinclude 插件来集成它们，但徒劳无功。我想将网站的所有功能集成到 wordpress 中，除了演示文稿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:23:40.823

您可以通过包含 wp-load 文件来使用现有站点中的 Wordpress 功能：

```
<?php require( '../my_wordpress_install_root/wp-load.php' ); ?> 
```

但是，如果您以另一种方式工作，则可以通过 Wordpress 进行操作。您可以创建一个与现有站点中的功能对话的插件。

# extjs - 如何在 Ext Js 小部件中重用项目集合数组？

> ID：12275402
> 
> 赞同：0
> 
> 时间：2012-09-05T06:08:43.317
> 
> 标签：extjs, collections, extjs4, reusability, items

我正在使用 Ext Js 4.1.1。

在我使用的许多 Ext JS 小部件中，我需要重用数据。例如，顶部工具栏中的`items`集合`buttongroup`可以在左侧的菜单栏中重复。为了便于管理，我应该能够**在单独的文件中定义**`items`集合数组（这可能会遵循自动加载的类命名约定）。

 **我尝试的方法是创建一个具有静态的类。每个静态函数都返回一个数组，该数组可以分配给小部件的项目集合。这行得通，但我相信如果我只能使用一个数组，那么使用一个类是一种过大的杀伤力。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:27:49.720

不确定为存储工具栏、按钮组等的配置创建单独的对象是否有用。在几乎所有情况下，在 extjs 的上下文中，您不仅需要管理配置，还需要管理组件的行为。

对我来说最好的方法 - 创建通用/基本预定义类，您不仅可以声明配置，还可以解决行为，添加自定义事件并处理任何意外结果。在它之后，您可以轻松地重用和扩展它。

例如，您有一个菜单或工具栏，其中包含 3 个项目 A、B、C。当然，您需要知道在哪里使用它（例如）单击了 A、B 或 C。创建一个类并管理所需的事件，您可以触发您自己的事件，该事件将告诉您单击了什么，并且在将使用此组件的任何上下文中都更容易使用。添加后期和预处理，模板方法等...

仅使用配置创建一个大文件是不可读且不可扩展的，这将是您需要向所有此类通用组件添加功能和行为的情况，并且仅使用数组或简单配置并不容易。即使只是简单的通用组件（在开始时）仅具有简单的配置，也会在代码结构和可读性方面带来更多的表现力，并且在以后的时间里，您可以管理它。

纯配置只能保持代码的准确性和可重用性，但在几乎需要控制的情况下，行为呢？

在每个大型 Web 应用程序和 extjs 4 的上下文中，设计、可维护性和可扩展性都是非常重要的点。**

# perl - Perl 中的 <> 有什么用？

> ID：12275408
> 
> 赞同：38
> 
> 时间：2012-09-05T06:09:12.777
> 
> 标签：perl

Perl 中的 <> 有什么用。如何使用它 ？如果我们简单地写

```
<>; 
```

和

```
while(<>) 
```

该程序在这两种情况下都在做什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-05T06:41:36.617

上面的答案都是正确的，但是如果您了解一般的 UNIX 命令行用法，它可能会更清楚。希望一个命令处理多个文件是*很常见的。*例如

```
ls -l *.c 
```

命令行 shell (bash et al) 把它变成：

```
ls -l a.c b.c c.c ... 
```

换句话说，除非模式不匹配，否则 ls 永远不会看到 '*.c'。在命令提示符下（不是 perl）试试这个：

```
echo * 
```

你会注意到你没有得到 *.

所以，如果 shell 给你一堆文件名，而你想依次浏览每个文件的数据，perl 的 <> 运算符为你提供了一个很好的方法......它将下一行放在下一个文件（如果没有命名文件，则为标准输入）到 $_ （默认标量）。

这是一个穷人的 grep：

```
while(<>) {
   print if m/pattern/;
} 
```

运行此脚本：

```
./t.pl * 
```

将打印出与给定模式匹配的所有文件的所有行。

```
cat /etc/passwd | ./t.pl 
```

将使用 cat 生成一些文本行，然后通过 perl 中的循环检查模式。

所以你看，while(<>) 为你提供了一个非常标准的 UNIX 命令行行为……处理我给你的所有文件，或者处理我通过管道传送给你的东西。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-05T06:17:35.090

```
 <>; 
```

是一种简短的写作方式

```
 readline(); 
```

或者，如果您添加默认参数，

```
 readline(*ARGV); 
```

[`readline`](http://perldoc.perl.org/functions/readline.html)是从指定文件句柄中读取一行的运算符。从特殊文件句柄[`ARGV`](http://perldoc.perl.org/perlvar.html#ARGV)中读取将从`STDIN`if为空或从if 它不是`@ARGV`命名的文件的串联中读取。`@ARGV`

* * *

至于

```
while (<>) 
```

这是一个语法错误。如果你有

```
while (<>) { ... } 
```

它被重写为

```
while (defined($_ = <>)) { ... } 
```

如前所述，这意味着与

```
while (defined($_ = readline(*ARGV))) { ... } 
```

这意味着它将读取（之前解释过的）行，`ARGV`直到没有更多行要读取。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-05T06:18:24.027

它被称为菱形运算符，如果 ARGV 为空，则从标准输入或 ARGV 中命名的文件中的每一行提供数据。这个网页[http://docstore.mik.ua/orelly/perl/learn/ch06_02.htm](http://docstore.mik.ua/orelly/perl/learn/ch06_02.htm)解释得很好。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-05T06:11:36.213

报价[`perldoc perlop`](http://perldoc.perl.org/perlop.html#I%2fO-Operators)：

> 空文件句柄 <> 是特殊的：它可以用来模拟 sed 和 awk 的行为，以及任何其他接受文件名列表的 Unix 过滤程序，对来自所有文件名的每一行输入执行相同的操作。<> 的输入要么来自标准输入，要么来自命令行中列出的每个文件。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-05T09:51:00.590

在许多使用这样的语法糖进行编程的情况下，`Deparse`O[有助于](http://p3rl.org/O)找出正在发生的事情：

```
$ perl -MO=Deparse -e 'while(<>){print 42}'
while (defined($_ = <ARGV>)) {
    print 42;
}
-e syntax OK 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-05T06:15:16.630

它采用 STDIN 标准输入：

```
> cat temp.pl
#!/usr/bin/perl

use strict;

use warnings;
my $count=<>;
print "$count"."\n";
> 
```

下面是执行：

```
> temp.pl
3
3

> 
```

因此，一旦您执行脚本，它就会等到用户提供一些输入。在`3`作为输入给出之后，它将该值存储在`$count`其中并在下一条语句中打印该值。

# bash - 将匹配字符串附加到特定行（sed/bash）

> ID：12275411
> 
> 赞同：1
> 
> 时间：2012-09-05T06:09:21.637
> 
> 标签：bash, shell, sed, awk

使用 bash/sed，我正在尝试搜索匹配的字符串，当找到匹配项时，它会将该变量附加到适用行的末尾。

两个列表：

```
[linuxbox tmp]$ cat lista
a 23
c 4
e 55
b 2
f 44
d 74
[linuxbox tmp]$ cat listb
a 3
e 34
c 84
b 1
f 500
d 666666

#!/bin/bash
rm -rf listc

cat listb |while read rec
do
    var1="$(echo $rec | awk '{ print $1 }')"
    var2="$(echo $rec | awk '{ print $2 }')"
    if egrep "^$var1" lista; then
            sed "/^$var1/ s/$/ $var2/1" lista >> listc
    fi
done 
```

当我运行它时，我得到：

```
[linuxbox tmp]$ ./blah.sh
a 23
e 55
c 4
b 2
f 44
d 74

[linuxbox tmp]$ cat listc
a 23 3
c 4
e 55
b 2
f 44
d 74
a 23
c 4
e 55 34
b 2
f 44
d 74
a 23
c 4 84
e 55
b 2
f 44
d 74
a 23
c 4
e 55
b 2  1
f 44
d 74
a 23
c 4
e 55
b 2
f 44 500
d 74
a 23
c 4
e 55
b 2
f 44
d 74 666666 
```

我试图得到的输出是：

```
a 23 3
e 55 34
c 4 84
b 2  1
f 44 500
d 74 666666 
```

我在这里做错了什么？有没有更好的方法来实现这一点？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:24:19.340

如果您不介意获得排序输出：

```
join <(sort lista) <(sort listb) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:23:53.073

一种使用方式`awk`：

```
awk 'FNR==NR { array[$1]=$2; next } { if ($1 in array) print $1, array[$1], $2 }' lista listb 
```

结果：

```
a 23 3
e 55 34
c 4 84
b 2 1
f 44 500
d 74 666666 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:26:30.863

根据您的输入文件（单个文件中没有重复的键），以下操作可以解决问题：

```
>> for key in $(awk '{print $1}' lista) ; do
+>    echo $key $(awk -vK=$key '$1==K{$1="";print}' lista listb)
+> done

a 23 3
c 4 84
e 55 34
b 2 1
f 44 500
d 74 666666 
```

# facebook - 登录后的 Facebook 重定向

> ID：12275416
> 
> 赞同：3
> 
> 时间：2012-09-05T06:09:41.433
> 
> 标签：facebook, login

我用谷歌搜索了近 4 个小时，然后发布了这个。我正在尝试在我的网站中实现 facebook 登录。问题是登录工作正常，登录后它必须重定向到另一个自定义页面，它不是重定向而是停留在同一页面中。这是我正在使用的代码。

```
 <head>
       <title>My Facebook Login Page</title>
       <script src="//connect.facebook.net/en_US/all.js"></script>
    </head>
    <body>

      <div id="fb-root"></div>
      <fb:login-button perms="email"></fb:login-button>

    <script>
        window.fbAsyncInit = function() {
            FB.init({
                appId  : 'XXXXXXXXXX',
                status : true,
                cookie : true,
                xfbml  : true
            });

            FB.Event.subscribe('auth.login', function() {
                window.location = "about_us.html";
            });
        };

        (function() {
            var e = document.createElement('script');
            e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
            e.async = true;
            document.getElementById('fb-root').appendChild(e);
        }());
    </script>

      <!-- <div class="fb-login-button" >Login with Facebook</div> --> 
```

如果可能的话，请指导我哪里错了，我从下面的链接中获取了正确的代码。 [点击 Facebook 登录按钮后重定向，即使已经登录 Facebook](https://stackoverflow.com/questions/5835843/redirect-after-clicking-on-the-facebook-login-button-even-if-already-logged-in)

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T14:49:14.117

你可以在某处添加这个

```
FB.login(function(response) {
     if (response.authResponse) {
        window.top.location = "http://www.foo.com";
     }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T01:23:31.847

当我把

```
window.top.location = "http://www.foo.com"; 
```

在下面

```
FB.getLoginStatus(function(response) {
statusChangeCallback(response);
window.top.location = "";
}); 
```

有效。

# apache - 如何更改文件系统上jackrabbit存储库的位置并迁移现有内容？

> ID：12275418
> 
> 赞同：2
> 
> 时间：2012-09-05T06:10:01.023
> 
> 标签：apache, tomcat, repository, jackrabbit, jcr

我遇到了一些问题。我在 C 盘（空间 40 GB）上安装了 Apache，并安装了 jackrabbit 作为我的文档管理系统。由于使用率很高，驱动器几乎已满，我现在需要将内容移动到另一个驱动器，然后才能用完 C 驱动器上的空间。这可能吗？如果有怎么办？我需要能够更改设置，以便我以前上传的所有文档都可用，以及新上传的文档都可以上传到新位置。

# iphone - 在 iPhone 应用程序中分配 NSInteger 属性

> ID：12275423
> 
> 赞同：9
> 
> 时间：2012-09-05T06:10:21.943
> 
> 标签：iphone, objective-c, ios, xcode, sqlite

我在 SQLite 中有一个表，我想在该表中插入数据。该表有responses_id、participant_id、answer_text、answer_option_update_date_time。response_id 和participant_id 是整数。当我将任何东西分配给参与者 ID 时，它会给出一个错误，对象不能设置为属性。

```
@interface Coffee : NSObject {

NSInteger coffeeID;
NSInteger participant_Id;

NSString*question_Id;
NSString*answer_option;
NSString*answer_text;
NSString*update_date_time;

//Intrnal variables to keep track of the state of the object.
}

@property (nonatomic, readonly) NSInteger coffeeID;
@property (nonatomic, retain) NSInteger participant_Id;

@property (nonatomic, copy) NSString *question_Id;
@property (nonatomic, copy) NSString *answer_option;
@property (nonatomic, copy) NSString *answer_text;
@property (nonatomic, copy) NSString *update_date_time;

- (void)save_Local {
    CereniaAppDelegate *appDelegate = (CereniaAppDelegate *)[[UIApplication sharedApplication] delegate];

    Coffee *coffeeObj = [[Coffee alloc] initWithPrimaryKey:0];

    coffeeObj.participant_Id=mynumber;

    NSString*question="1";
    coffeeObj.question_Id=question;
    coffeeObj.answer_option=selectionAnswerOption;
    coffeeObj.answer_text=professionTextField.text;

    NSDate* date = [NSDate date];
    NSDateFormatter* formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"yyyy-MM-dd HH:MM:SS"];
    NSString* str = [formatter stringFromDate:date];

    UPDATE_DATE_TIME=str;

    coffeeObj.update_date_time=UPDATE_DATE_TIME;

    //Add the object
    [appDelegate addCoffee:coffeeObj];  
} 
```

当我为参与者 ID 分配一个值时，它会给出一个错误。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-05T06:13:27.180

`NSInteger`不是一个类，它是一个类似`int`or的基本类型`long`。在 iOS`NSInteger`上被`typedef`编辑为`int`，在 OS X 上被`typedef`编辑为`long`. 因此，您不应该尝试`retain`使用`NSInteger`. 您应该将您的财产声明更改为：

```
@property (nonatomic, assign) NSInteger participant_Id; 
```

您的`coffeeID`财产也是如此。

# android - HTML5 Element 无法在 Android 上运行

> ID：12275426
> 
> 赞同：0
> 
> 时间：2012-09-05T06:10:27.973
> 
> 标签：android, html, mobile, video, html5-video

我正在构建一个移动网站，但无法让 HTML5 视频元素在装有 Android 2.2 的三星 Galaxy S 上运行。

[http://mediaelementjs.com/](http://mediaelementjs.com/)上的嵌入视频元素确实有效。

但是，我在[http://mattjennings.net/zzz/video-test/test.php](http://mattjennings.net/zzz/video-test/test.php)创建的视频元素 不起作用。如您所见，我还使用了上面列出的 Media Element JS 中的代码。

我花了几个小时试图解决这个问题，包括使用 Videora Android Converter 将上面示例链接中的 test.mp4 文件转换为“Android 就绪格式”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:18:37.833

您是要在模拟器或设备中播放视频吗？如果它没有在模拟器中播放，那就是视频分辨率的问题。最好尝试低分辨率的视频。我遇到了同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:33:32.630

请浏览以下网址，它可能对您有所帮助

Android 浏览器（2.3 之前）需要[特定的处理](http://www.broken-links.com/2010/07/08/making-html5-video-work-on-android-phones/)才能运行视频元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-14T18:10:05.457

我最终使用免费和开源软件HandBrake ( [https://handbrake.fr/ ) 为可以在运行 Android 2.2 的三星 Galaxy S3 手机上播放的网站创建 MP4 文件。](https://handbrake.fr/)

我还使用了来自[http://www.mediaelementjs.com/](http://www.mediaelementjs.com/)的代码来完成这项工作。

# tomcat - tomcat无法建立ssl连接

> ID：12275436
> 
> 赞同：3
> 
> 时间：2012-09-05T06:10:53.083
> 
> 标签：tomcat, ssl

我无法与 tomcat 建立 ssl 连接。铬写道`"107 (net::ERR_SSL_PROTOCOL_ERROR"`。我已经通过 keytool.( `>keytool -genkey -alias tomcat -keyalg RSA -keystore mystore -validity 999 -keysize 512`) 生成了 mystore 文件并将其放到 D:\mystore 中。

也在我的 server.xml 中：

```
<Connector connectionTimeout="20000" port="8080" protocol="HTTP/1.1" redirectPort="443"/>

<Connector port="443" SSLEnabled="true" maxHttpHeaderSize="8192" 
    maxThreads="150" minSpareThreads="25" maxSpareThreads="200"
    enableLookups="false" disableUploadTimeout="true"         
    acceptCount="100" scheme="https" secure="true"
    clientAuth="false" sslProtocol="TLS"
    keystoreFile="d:\mystore" keystorePass="123123" keystoreType="JKS"
    keyAlias="tomcat"/> 
```

当我在日志中启动tomcat时存在这些字符串：

```
INFO: Starting ProtocolHandler ["http-bio-443"]
сен 05, 2012 9:00:29 AM org.apache.coyote.AbstractProtocol start 
```

当我尝试 `https://localhost/lib`（或`https://localhost:443/lib`）时，没有任何效果。

有人可以帮助我吗？

PS：-apache-tomcat-7.0.29

-jdk1.7.0_5

**固定的！**

迁移到 apache-tomcat-7.0.28 ((((

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T08:22:58.397

首先，您应该使用 8443（或另一个 8000+ 端口），443 是系统使用的默认端口之一（如 21 上的 FTP 等）。然后：你应该像这样修改你的 server.xml：

```
<Connector port=”8443” protocol=”org.apache.coyote.http11.Http11Protocol” SSLEnabled=”true”
       maxThreads=”200” scheme=”https” secure=”true”  keystoreFile=”D:/mystore/.keystore” keystorePass=”123123”
       clientAuth=”false” sslProtocol=”TLS” /> 
```

在 keystoreFile 选项中，您应该验证您的文件实际上命名为“.keystore”（当然不带括号）。如果您想尝试创建另一个：您应该这样做：

```
keytool –genkey –alias tomcat –keyalg RSA 
```

您应该在 keystoreFile 中使用“反斜杠”、“\”而不是“/”。然后在您的应用程序服务器重新启动时，您应该尝试去

```
https://localhost:8443/ 
```

让我知道是否有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-16T06:44:18.817

我也遇到了同样的问题，但是升级tomcat后问题依然存在。我通过清除缓存和 cookie 解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-12T13:35:04.740

固定的！

迁移到 apache-tomcat-7.0.28 ((((

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-20T19:34:31.443

在您的连接器配置中包括“sslEnabledProtocols”这是一个示例

```
<Connector port="8443" protocol="org.apache.coyote.http11.Http11Protocol" maxHttpHeaderSize="8192" minSpareThreads="25" maxSpareThreads="75" enableLookups="false" disableUploadTimeout="true" acceptCount="100" maxThreads="150" SSLEnabled="true" scheme="https" secure="true" clientAuth="false" sslProtocol="TLS" sslEnabledProtocols="TLSv1,TLSv1.1,TLSv1.2" keystoreFile="" keystorePass="password" /> 
```

# c++ - 如何在 C++ 的 DLL API 中使用 logog 获取日志

> ID：12275437
> 
> 赞同：0
> 
> 时间：2012-09-05T06:10:58.300
> 
> 标签：c++, error-logging

如何在 DLL API 中写入日志？

在我的程序中，我使用两个线程和一个主线程。我正在初始化：

```
LOGOG_INITIALIZE();

logog::LogFile errFile("log.txt"); 
```

进入我的主线程并在主线程中使用`INFO`其他`ERR`两个线程。我的主线程正在使用 C++ DLL API。我完美地从主线程和另外两个正在运行的线程中获取日志，但我的问题是我无法从 DLL API 的流中获取日志。如何在 DLL API 中使用 logog 获取日志。如果我`INFO`在 DLL API 中使用，我想在这里清除。它正在崩溃，但如果我`LOGOG_INITIALIZE();`在 DLL API 内执行，`INFO`则执行但不记录任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:53:58.713

如果我理解正确，您的情况如下：例如，您有一个使用共享库 (DLL) 的应用程序 (EXE)。从 EXE 和 DLL，您希望能够登录。

上次我检查了[logog](http://johnwbyrd.github.com/logog/)库时，我遇到了上述情况的问题。也许现在它被纠正了？

在 windows 下（仅限！），[logog](http://johnwbyrd.github.com/logog/)库不导出任何符号 - 它根本不准备用作 DLL。这会迫使您构建和使用[logog](http://johnwbyrd.github.com/logog/)作为静态库 - 这会导致[logog](http://johnwbyrd.github.com/logog/)库中的静态变量出现问题，这些静态变量应该只存在一次，但实际上存在的次数与静态库链接到模块（EXE 或 DLL）的次数一样多）。

解决方案是构建和使用[logog](http://johnwbyrd.github.com/logog/)库作为 DLL。

也许这涵盖了您的问题，您可能会努力导出[logog](http://johnwbyrd.github.com/logog/)库的符号。或者你可以联系图书馆作者。

# cocos2d-iphone - 我可以在空气中增加摩擦力吗？

> ID：12275441
> 
> 赞同：0
> 
> 时间：2012-09-05T06:11:31.917
> 
> 标签：cocos2d-iphone, box2d-iphone

我有关于空中速度的问题。

当我同时跳跃和移动时，玩家的时间速度会增加。我使用冲动进行跳跃，我使用力量进行移动。我想知道当玩家在空中时如何减慢速度。

这是我左右移动的代码

```
-(void)update:(ccTime)dt :(b2Body *)ballBody :(CCSprite *)player1 :(b2World *)world
{

    if (moveRight.active==YES) 
    {   
  //      maxSpeed=10.0f;
            ballBody->SetActive(true);
    //    b2Vec2 locationworld=b2Vec2(maxSpeed,0);
        double mass=ballBody->GetMass();
        ballBody->ApplyForce(mass*locationworld, ballBody->GetWorldCenter());
        ballBody->SetLinearDamping(1.2f);
    }
    else if(moveLeft.active==YES)
    {
            ballBody->SetActive(true);
        b2Vec2 locationworld=b2Vec2(-10,0);
        double mass=ballBody->GetMass();
        ballBody->ApplyForce(mass*locationworld, ballBody->GetWorldCenter());
    //    ballBody->SetLinearDamping(1.2f);

    }
} 
```

以下是跳跃玩家

```
-(void)jump:(b2Body*)ballBody:(ccTime)dt:(BOOL)touch
{
    if (touch) 
    {

        if (jumpSprte.active==YES) 
        {
            ballBody->SetActive(true);
            b2Vec2 locationWorld;
            locationWorld=b2Vec2(0,25);
            ballBody->ApplyLinearImpulse(locationWorld, ballBody->GetWorldCenter());

        }
    }
} 
```

那么我在哪里使用逻辑？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:30:13.657

您需要模拟空气阻力以减慢玩家在空中的速度。有几种方法可以做到这一点，具体取决于您希望模拟的真实程度。对于一个简单的模型`linearDampening`会减慢它的速度。

真正的空气阻力不是线性的。要以更现实的方式对此进行建模，您需要使用以下内容：

```
F = - C * v * |v| 
```

*   `F`是空气阻力的总力
*   `C`是一个取决于物体形状的阻力常数
*   `v`是速度矢量（`|v|`如果您愿意，是速度的大小或长度）

听起来你的玩家也可以在空中使用移动来*提高*他们的速度。这是因为你允许玩家在他的腿不接触地面时施加力量。如果这是您的目标，为了避免这种情况，请确保当角色接触地面时是唯一可以施加更大力使他移动的时间。

请注意，这在很大程度上取决于您希望这是哪种游戏。如果它在为游戏制作物理时看起来和感觉都很好，那就*太好了*。如果您无法对现实进行完全准确的模拟，请不要紧张，只要最终结果表现良好即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:50:43.083

这是我左右移动的代码

```
-(void)update:(ccTime)dt :(b2Body *)ballBody :(CCSprite *)player1 :(b2World *)world
{

    if (moveRight.active==YES) 
    {   
  //      maxSpeed=10.0f;
            ballBody->SetActive(true);
    //    b2Vec2 locationworld=b2Vec2(maxSpeed,0);
        double mass=ballBody->GetMass();
        ballBody->ApplyForce(mass*locationworld, ballBody->GetWorldCenter());
        ballBody->SetLinearDamping(1.2f);
    }
    else if(moveLeft.active==YES)
    {
            ballBody->SetActive(true);
        b2Vec2 locationworld=b2Vec2(-10,0);
        double mass=ballBody->GetMass();
        ballBody->ApplyForce(mass*locationworld, ballBody->GetWorldCenter());
    //    ballBody->SetLinearDamping(1.2f);

    }
} 
```

以下是跳跃玩家

```
-(void)jump:(b2Body*)ballBody:(ccTime)dt:(BOOL)touch
{
    if (touch) 
    {

        if (jumpSprte.active==YES) 
        {
            ballBody->SetActive(true);
            b2Vec2 locationWorld;
            locationWorld=b2Vec2(0,25);
            ballBody->ApplyLinearImpulse(locationWorld, ballBody->GetWorldCenter());

        }
    }
} 
```

那么我在哪里使用逻辑？

# ruby-on-rails-3 - 设计 - 无法通过欢迎屏幕

> ID：12275447
> 
> 赞同：0
> 
> 时间：2012-09-05T06:12:10.307
> 
> 标签：ruby-on-rails-3, devise

我想将设计集成到我的应用程序中。我安装了它，它工作正常。我已经注册并添加到数据库中工作。我有工作的标志。我的问题是无论我做什么，我似乎都无法让登录或注册页面进入 Rails 默认欢迎屏幕以外的任何地方。

我知道他们有很多关于类似问题的帖子。但我很困惑，因为概述的所有解决方案似乎都没有任何效果。即使在启动和停止服务器之后（更改路由时）每次都会返回到欢迎页面。如果有人愿意向我展示一个已知工作 route.rb 的样本，我将不胜感激。

目前这是在我的：

devise_for :users root :to => "home#index"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:18:59.450

您应该做的第一件事是删除`public/index.html`。

# java - Webservices：理解分配的任务

> ID：12275448
> 
> 赞同：0
> 
> 时间：2012-09-05T06:12:16.597
> 
> 标签：java, web-services, wsdl

我是 Web 服务的完全新手，我一个人工作。我的领导给我邮寄了一个要完成的任务。我认为他已经对信息进行了硬编码，他希望我替换来自 Web 服务的硬编码数据。

他给我邮寄了一个 WSDL 文件并说

> 从 wsdl 制作 jar 文件。

这是什么意思 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:20:29.283

有一些工具可以生成 Java 代码以与 Web 服务对话，有效地执行序列化和反序列化，以便您的客户端代码可以根据 Java 对象而不是原始 SOAP 进行对话。

您应该找出在您的项目中使用了哪些工具，并将其应用到提供的 WSDL。

（另外，当你不理解任务时，习惯于询问更多信息是个好主意。一个好的团队领导 - 或者任何人，真的 - 应该非常乐意帮助你。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:20:48.080

从 wsdl 生成 Java 存根。 [wsdl2Java](http://axis.apache.org/axis2/java/core/docs/userguide-creatingclients.html)

[wsdl2Java](http://axis.apache.org/axis2/java/core/docs/userguide-creatingclients-xmlbeans.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:22:53.783

如果你熟悉eclipse，那么这个任务就可以轻松完成了。我认为他正在要求可以从 wsdl 生成的客户端存根罐。

**在这种情况下，请执行以下操作：**在 eclipse 中，确保您有 webservices 插件。[之后按照这个](https://stackoverflow.com/questions/7020755/how-to-convert-wsdl-to-java/7020874#7020874)

您将导出几个 .java 文件。尝试编译它们并生成 .class 文件。现在使用命令提示符中的命令 jar .class 文件

```
jar -cvf <Name of the jar>.jar * 
```

# jsp - 在 servlet 中定义配置文件或库文件

> ID：12275450
> 
> 赞同：0
> 
> 时间：2012-09-05T06:12:21.663
> 
> 标签：jsp, servlets

首先，我是 Servlet 和 JSP 的新手。我正在学习这些我自己的。我有个疑问。**如何在 Servlet 中创建配置文件或库文件？**这意味着我需要在一个 Servlet 中保持数据库连接，并希望在整个项目中使用这些变量。我还需要在一个 Servlet 中创建一些常用函数，并希望在需要的任何地方调用这些函数。

我可以在 Servlet 中实现这些东西吗？在 PHP 等其他环境中是可能的。但我不知道如何在 Servlet 中执行这些操作？我花了最后几天来弄清楚。但我做不到。

请帮我解决这些问题..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:22:06.433

[查看Oracle](http://docs.oracle.com/cd/E15051_01/wls/docs103/webapp/configurejsp.html)撰写的这篇简单文章

关于如何使用 Servlet 和配置 Servlets ！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T07:11:31.313

是的，您可以做到这一点，但不能使用 servlet。您需要定义一个 Common 类，该类将包含您的所有常用方法和变量，如下所示

```
public class Common {
  public static final String DEFAULT_LANGUAGE = "en"; //better to have private variables with public setters and getters
  ....
  public static String getDateFormatted(.....) {...}
  ....

} 
```

最好创建一个单独的数据库类来控制您的数据库交互。让我们说：

```
public class DBConnection { 
  private Connection dbCon;
  //its more convenient to implement the connect on the no ArgumentCostructor
  ....
  public boolean connect() throws ClassNotFoundException, SQLException {...}
  public ResultSet execSQL(...)throws ClassNotFoundException,SQLException {...}
} 
```

如果您想在 java 类中使用全局参数，您只需调用

```
String formatedDate = Common.getDateFormatted(date); 
```

或者对于数据库连接的东西，你可以打电话

```
DBConnection con = new new DBConnection ();
rs = con.execSQL(sql); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T15:07:40.837

您可以像这样在 web .xml 初始化参数中配置数据库连接参数

```
<init-param>
    <param-name>dburl</param-name>
    <param-value>jdbc:mysql:///MY_DB</param-value>
</init-param> 
```

并使用 String myDbUrl = getServletConfig().getInitParameter("dburl"); 获取 servlet 中的值

您还可以使用 tomcat Server.xml 文件进行数据库连接。

# c# - 如何在c#中分割图像并合并分割的图像？

> ID：12275454
> 
> 赞同：5
> 
> 时间：2012-09-05T06:12:44.967
> 
> 标签：c#, .net, vb.net, c#-4.0

在我的应用程序中，我想拆分图像并以不同的顺序合并拆分的图像，然后重新排列图像。如何在 c# 中实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T07:14:10.860

你可以在网上找到很多关于这个和类似过程的教程。参见例如：

*   [如何在 CSharp 中裁剪图像](http://www.webkeet.com/webtutorials/tabid/78/id/73/how-to-crop-image-in-aspnet-csharp.aspx)
*   [用 C# 组合图像](http://www.switchonthecode.com/tutorials/combining-images-with-csharp)
*   [在 .Net 中合并图像](http://www.codeproject.com/Articles/12789/Merging-Images-in-NET)
*   [使用 C# 组合多个图像以形成单个图像](http://www.niteshluharuka.com/2012/08/combine-several-images-to-form-a-single-image-using-c/)

# xamarin.android - Monodroid 应用程序终止而没有错误

> ID：12275455
> 
> 赞同：1
> 
> 时间：2012-09-05T06:12:46.343
> 
> 标签：xamarin.android, xamarin

我有一个 monodroid 应用程序，它在没有任何通知的情况下终止。当它遇到异常时，应用程序就会终止。它使用 Visual Studio 中的“不调试就开始”部署到设备。当我在 Visual Studio 中使用调试器运行它时，我确实会遇到异常中断。这是应用程序终止的正常行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:04:17.583

是的，这听起来很正常。如果您的应用程序遇到未处理的异常，它将崩溃，完全终止。您可以查看[Android 调试日志](http://docs.xamarin.com/android/advanced_topics/android_debug_log)以查看发生的日志，包括应用程序崩溃产生的堆栈跟踪。

# iphone - 无法在 iphone 的 nsmutablearray 中获取对象的索引值

> ID：12275456
> 
> 赞同：1
> 
> 时间：2012-09-05T06:12:46.037
> 
> 标签：iphone, nsarray

在我的应用程序中，我必须获取特定对象的索引值。为此，我以这种方式编码，如下所示。

```
NSString *a=[NSString stringWithFormat:@"%d",[imagesdmobject.proofID intValue]];
NSLog(@"a value is %@",a); 
```

这里的值为 56 现在我必须从中获取 56 的索引`appdelegate.projectTitlesProofIDArray`。

```
int value=[appdelegate.projectTitlesProofIDArray indexOfObjectIdenticalTo:a]; 
```

中的数据`appdelegate.projectTitlesProofIDArray`是：

41, 34, 35, 64, 45, 1, 67, 75, 76, 77, 78, 79, 80, 81, 82, 83, 85, 68, 86, 87, 88, 89, 90, 92, 69, 95, 97, 98, 100, 101, 70, 71, 72, 73, 74, 39, 37, 109, 108, 110, 38, 91, 93, 94, 36, 96, 99, 102, 103, 104, 105, 106, 107, 65, 66, 40, 46, 47, 48, 49, 50, 52, 53, 54, 60, 61, 62, 32, 55, 56, 57, 58, 59, 42, 43, 44, 63, 47, 48, 41, 34, 35, 64, 1, 91, 93, 94, 36, 96, 99, 102, 103, 104, 105, 106, 107, 65, 66, 40, 60, 61, 62, 32, 55, 56, 57,58, 59, 54, 34, 35, 41, 34, 35, 64, 67, 75, 76, 77, 78, 79, 80, 81, 82, 83, 85, 68, 86, 87, 88, 89, 90, 92, 69, 95, 97, 98, 100, 101, 70, 71, 72, 73, 74, 39, 37, 109, 108, 110, 38, 91, 93, 94, 36, 96, 99, 102, 103, 104, 105, 106, 107, 65, 66, 40, 46, 47, 48, 49, 50, 52, 53, 54, 41, 34, 35, 64, 45, 1, 67, 75, 76, 77, 78, 79, 80, 81, 82, 83, 85, 68, 86, 87, 88, 89, 90, 92, 69, 95, 97, 98, 100, 101, 70, 71, 72, 73、74、39、37、109、108, 110, 38, 91, 93, 94, 36, 96, 99, 102, 103, 104, 105, 106, 107, 65, 66, 40, 46, 47, 48, 49, 50, 52, 53, 54, 60, 61, 62, 32, 55, 56, 57, 58, 59, 42, 43, 44, 47, 34, 35, 39, 37, 109, 108, 110, 38, 46, 47, 48, 49, 50, 52, 53, 54, 42, 43, 44, 41, 34, 35, 64, 45, 1, 67, 75, 76, 77, 78, 79, 80, 81, 83, 85, 68, 86, 87, 88, 89, 90, 92, 69, 95, 97, 98, 100, 70, 71, 73, 74, 39, 37, 109, 108, 110, 38, 91, 94, 36, 96, 99, 102, 103, 104, 105,106, 107, 65, 66, 40, 46, 47, 48, 49, 50, 52, 54, 60, 61, 62, 32, 55, 56, 57, 58, 59, 42, 43, 63, 41, 34, 35, 64, 45, 1, 67, 75, 76, 77, 78, 79, 80, 81, 82, 83, 85, 68, 86, 87, 88, 89, 90, 92, 69, 95, 97、98、100、101、70、71、72、73、74、39、37、109、108、110、38、91、93、94、36、96、99、102、103、104、105、 106, 107, 65, 66, 40, 46, 47, 48, 49, 50, 52, 53, 54, 60, 61, 62, 32, 55, 56, 57, 58, 59, 42, 43, 44, 63, 41, 34, 35, 64, 45,1, 67, 75, 76, 77, 78, 79, 80, 81, 82, 83, 85, 68, 86, 87, 88, 89, 90, 92, 69, 95, 97, 98, 100, 101, 70, 71, 72, 73, 74, 39, 37, 109, 108, 110, 38, 91, 93, 94, 36, 96, 99, 102, 103, 104, 105, 106, 107, 65, 66, 40, 46, 47, 48, 49, 50, 52, 53, 54, 60, 61, 62, 32, 55, 56, 57, 58, 59, 42, 43, 44, 63, 46108, 110, 38, 91, 93, 94, 36, 96, 99, 102, 103, 104, 105, 106, 107, 65, 66, 40, 46, 47, 48, 49, 50, 52, 53, 54, 60, 61, 62, 32, 55, 56, 57, 58, 59, 42, 43, 44, 63, 46108, 110, 38, 91, 93, 94, 36, 96, 99, 102, 103, 104, 105, 106, 107, 65, 66, 40, 46, 47, 48, 49, 50, 52, 53, 54, 60, 61, 62, 32, 55, 56, 57, 58, 59, 42, 43, 44, 63, 46

56 在那里，但我得到的值不正确，为 2147483647。

请在这个问题上帮助我。我被困在这个地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:29:34.170

你需要这样做：-

假设您的数组包含：-

```
[array addObject:@"1"];
[array addObject:@"2"];
[array addObject:@"3"];
[array addObject:@"4"];
[array addObject:@"5"];
[array addObject:@"6"]; 
```

现在你需要找到对象 5 的索引

```
if([array containsObject:@"5"])
{
int index=[array indexOfObject:@"5"];
} 
```

# java - 解析嵌套在其他 XML 值中的 XML 标记

> ID：12275464
> 
> 赞同：1
> 
> 时间：2012-09-05T06:13:56.363
> 
> 标签：java, xml, xpath, xml-parsing, jaxp

我一直在开发一个特定的 XML 解析器来解析大量的 XML 。

我的问题是我很困惑如何解析嵌套在其他 XML 值中的 XML 标记。我的输入文件看起来像这样。

```
<main>
<step>
    <para>Calculate the values from the pool</para>
</step>
<step>
        <para>Use these(<internalRef id ="003" xlink:actuate="onRequest" xlink:show="replace" xlink:href="max003"/>) values finally</para>
</step>
</main> 
```

我能够使用 xpath 获取第一步标记的值。我的问题是如何使用 xpath 获取第二步值，或者更确切地说如何识别新标签何时在值标签中开始。

例如，我的第二步 xpath 正在返回这个结果 -**最后使用这些 () 值**

我的目标是 最终**使用这些（*max003*）值**

max003值**必须**取自***xlink:href***

***另外***- 我可以通过编写单独的 xpath 来获得 id 、actuate、show 的各个值。我的问题是我需要 在获得**xlink:href**值（即***max003*** **）之后将max003值填充到****这些****值**之后和值之前的括号内发送以进行显示。 ***所以我正在寻找一种方法来识别子节点 ID 的开始位置和时间？***以及**将其填充在括号内的机制。**

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T08:07:43.817

仅使用 XPath 将无法做到这一点。您所拥有的是混合内容 XML，这意味着一个元素可能同时包含文本值和子元素。您一次只能使用 XPath 引用其中一个，并且您也不能仅仅连接从多个 XPath 表达式中获得的内容，因为文本值可能会围绕您在示例中声明的子元素。

我建议您使用 XSLT 转换文档，然后像现在一样使用 XPath 查询转换后的文档。另一种方法是编写自己的解析器，它能够正确处理嵌套元素。

这个 XSLT 可能会为您工作（尚未彻底测试）：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet 
  version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xlink="http://www.w3.org/1999/xlink">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="internalRef">
        <xsl:value-of select="@xlink:href"/>
    </xsl:template>
</xsl:stylesheet> 
```

当然，您随后需要使用 XSLT 处理器来转换您的原始文档。

解析器可能看起来像这样（请注意，这只是 StAX 解析器的框架代码）：

```
import java.io.StringReader;
import java.util.Iterator;
import javax.xml.stream.XMLEventReader;
import javax.xml.stream.XMLInputFactory;
import javax.xml.stream.XMLStreamException;
import javax.xml.stream.XMLStreamReader;
import javax.xml.stream.events.Attribute;
import javax.xml.stream.events.Characters;
import javax.xml.stream.events.EndElement;
import javax.xml.stream.events.StartElement;
import javax.xml.stream.events.XMLEvent;

public class ExampleStAXParser {

    private static final int STATE_UNDEFINED = 1;
    private static final int STATE_MAIN = 2;
    private static final int STATE_STEP = 3;
    private static final int STATE_PARA = 4;

    private static final String EL_MAIN = "main";
    private static final String EL_STEP = "step";
    private static final String EL_PARA = "para";
    private static final String EL_INTERNAL_REF = "internalRef";
    private static final String ATT_HREF = "href";

    private int state = STATE_UNDEFINED;
    private String characters;

    public void parse(String xmlString) throws XMLStreamException, Exception {

        XMLEventReader reader = null;
        try {
            if (xmlString == null || xmlString.isEmpty()) {
                throw new IllegalArgumentException("Illegal initializiation (xmlString is null or empty)");
            }
            StringReader stringReader = new StringReader(xmlString);
            XMLInputFactory inputFact = XMLInputFactory.newInstance();
            XMLStreamReader streamReader = inputFact.createXMLStreamReader(stringReader);
            reader = inputFact.createXMLEventReader(streamReader);

            while (reader.hasNext()) {
                XMLEvent event = reader.nextEvent();

                if (event.isCharacters()) {
                    characters(event);
                }
                if (event.isStartElement()) {
                    startElement(event);
                    // handle attributes
                    Iterator<Attribute> attributes = event.asStartElement().getAttributes();
                    while(attributes.hasNext()) {
                        attribute(attributes.next());
                    }
                }
                if (event.isEndElement()) {
                    endElement(event);
                }
                if (event.isStartDocument()) {
                    startDocument(event);
                }
                if (event.isEndDocument()) {
                    endDocument(event);
                }

            }            
        } catch (XMLStreamException ex) {
            throw ex;
        } finally {
            try {
                if (reader != null) {
                    reader.close();
                }
            } catch (XMLStreamException ex) {
            }
        }
    }

    private void attribute(XMLEvent event) throws Exception {
        if (state == STATE_PARA) {
            Attribute attr = (Attribute) event;
            String name = attr.getName().getLocalPart();
            if (ATT_HREF.equals(name)) {
                if (characters == null) {
                    characters = attr.getValue();
                } else {
                     characters += attr.getValue();
                }
            }
        } else
            throw new Exception("unexpected attribute");
    }

    private void characters(XMLEvent event) throws Exception {
        Characters asCharacters = event.asCharacters();
        if (asCharacters.isWhiteSpace())
            return;
        if (state == STATE_PARA) {            
            if (characters == null) {
                characters = asCharacters.getData();
            } else {
                 characters += asCharacters.getData();
            }
        } else
            throw new Exception("unexpected attribute");
    }

    private void startElement(XMLEvent event) throws Exception {
        StartElement startElement = event.asStartElement();
        String name = startElement.getName().getLocalPart();
        switch (state) {
            case STATE_UNDEFINED:
                if (name.equals(EL_MAIN)) {
                    state = STATE_MAIN;
                    System.out.println("Element: " + name);
                } else
                    throw new Exception("unexpected element");
                break;
            case STATE_MAIN:
                if (name.equals(EL_STEP)) {
                    state = STATE_STEP;
                    System.out.println("Element: " + name);
                } else
                    throw new Exception("unexpected element");
                break;
            case STATE_STEP:
                if (name.equals(EL_PARA)) {
                    state = STATE_PARA;
                    System.out.println("Element: " + name);
                } else
                    throw new Exception("unexpected element");
                break;
            case STATE_PARA:
                if (name.equals(EL_INTERNAL_REF)) {
                    System.out.println("Element: " + name);
                } else
                    throw new Exception("unexpected element");
                break;
            default:
                throw new Exception("unexpected element");
        }
    }

    private void endElement(XMLEvent event) throws Exception {
        EndElement endElement = event.asEndElement();
        String name = endElement.getName().getLocalPart();
        switch (state) {
            case STATE_MAIN:
                if (name.equals(EL_MAIN)) {
                    state = STATE_UNDEFINED;
                } else
                    throw new Exception("unexpected element");
                break;
            case STATE_STEP:
                if (name.equals(EL_STEP)) {
                    state = STATE_MAIN;
                } else
                    throw new Exception("unexpected element");
                break;
            case STATE_PARA:
                if (name.equals(EL_INTERNAL_REF)) {
                    // do nothing
                } else if (name.equals(EL_PARA)) {
                    System.out.println("Value: " + String.valueOf(characters));
                    characters = null;
                    state = STATE_STEP;
                } else
                    throw new Exception("unexpected element");
                break;
            default:
                throw new Exception("unexpected element");
        }
    }

    private void startDocument(XMLEvent event) {
        System.out.println("Parsing started");
    }

    private void endDocument(XMLEvent event) {
        System.out.println("Parsing ended");
    }

    public static void main(String[] argv) throws XMLStreamException, Exception {
        String xml = "";
        xml += "<main>";
        xml += "<step>";
        xml += "    <para>Calculate the values from the pool</para>";
        xml += "</step>";
        xml += "<step>";
        xml += "        <para>Use these(<internalRef id =\"003\" actuate=\"onRequest\" show=\"replace\" href=\"max003\"/>) values finally</para>";
        xml += "</step>";
        xml += "</main>";

        ExampleStAXParser parser = new ExampleStAXParser();
        parser.parse(xml);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:35:48.700

**此 Xpath 表达式的评估：**

```
 concat(/*/step[2]/para/text()[1],
        /*/step[2]/para/internalRef/@xlink:href,
        /*/step[2]/para/text()[2]) 
```

在提供的 XML 文档上（更正为命名空间格式）：

```
<main xmlns:xlink="Undefined namespace">
    <step>
        <para>Calculate the values from the pool</para>
    </step>
    <step>
        <para>Use these(<internalRef id ="003" xlink:actuate="onRequest" xlink:show="replace" xlink:href="max003"/>) values finally</para>
    </step>
</main> 
```

**产生想要的结果**：

```
Use these(max003) values finally 
```

**请注意**：您需要在 XPath API 中“注册 xlink 命名空间”，以便在没有错误的情况下评估此 XPath 表达式。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xlink="Undefined namespace">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "concat(/*/step[2]/para/text()[1],
           /*/step[2]/para/internalRef/@xlink:href,
           /*/step[2]/para/text()[2])
     "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档（上图）时，将评估 Xpath 表达式并将此评估的结果复制到输出**：

```
Use these(max003) values finally 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T07:39:42.313

据我所知，我认为您的解析器看起来有点像

```
step
 +- para
     +-id 
```

然后将“文本”内容包装在一起以提取该 id 节点......

（纯属猜测）

**更新**

如果我只是简单地遍历节点树（列出每个孩子），这就是我得到的

```
 main
  step
    para
      #text - Calculate the values from the pool
  step
    para
      #text - Use these(
      id
      #text - ) values finally 
```

这意味着“id”是“para”的孩子******

# c# - 列表的行为 在 c# 中使用 in return 语句时

> ID：12275468
> 
> 赞同：0
> 
> 时间：2012-09-05T06:14:11.723
> 
> 标签：c#, .net, visual-studio-2010

```
class A
{
    public static List<String> a = new List<string>();

    public static List<String> test()
    {
        A.a.Add("20");
        A.a.Add("30");
        A.a.Add("40");
        return a.Sort();

    }
} 
```

抛出编译错误：

> 无法将 void 隐式转换为 System.Collections.Generic.List。

但是，如果我编写一个方法来获取`List<String>`值（因为它是静态成员变量），一切都应该可以正常工作。但是，我不知道为什么尽管我的方法返回了一个`List<String>`值，为什么编译器会抛出这个错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T06:16:09.257

> 但是，我不知道为什么尽管我的方法返回一个 List 值，为什么编译器会抛出这个错误？

该[`List<T>.Sort()`](http://msdn.microsoft.com/en-us/library/b0zbh7b6.aspx)方法*不*返回`List<T>`. 这是一种`void`方法 - 它对列表进行适当的排序。你需要：

```
a.Sort();
return a; 
```

基本上，具有`void`返回类型的方法*只能*用作独立语句。您不能将其用作要返回的表达式或方法参数等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T06:16:35.833

问题是它`a.Sort()`没有返回值 - 它返回 void。请参阅[http://msdn.microsoft.com/en-us/library/b0zbh7b6.aspx](http://msdn.microsoft.com/en-us/library/b0zbh7b6.aspx)。在底部添加一行`return a;`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-05T06:36:44.633

sort 是 void 函数，它只对您的列表进行排序并且不返回列表 <> 使用下面的代码

```
 class A
    {
    public static List<String> a = new List<string>();

    public static List<String> test()
    {
        A.a.Add("20");
        A.a.Add("30");
        A.a.Add("40");
       A.a.Sort();
         return a;
    }

} 
```

# jpa - 基于@MapKey的JPA插入

> ID：12275469
> 
> 赞同：0
> 
> 时间：2012-09-05T06:14:27.230
> 
> 标签：jpa, map, eclipselink

我的实体（MyEntity）中有以下字段：

```
@OneToMany(fetch=FetchType.EAGER, cascade=CascadeType.ALL)
@JoinColumn(name="ID", referencedColumnName="ID")
@MapKey(name="localeForDB")
private Map<String, MyEntityTranslations> translations; 
```

MyEntityTranslations 看起来像这样：

```
@Entity
@Table(name="MY_ENTITY_TRANSLATIONS")
public class MyEntityTranslations extends CustomTranslations
{
    private String prop1;
    private String prop2;

    //..getters and setters
} 
```

最后 CustomTranslations 看起来像这样：

```
@MappedSuperclass
@Access(AccessType.FIELD)
public abstract class CustomTranslations
{
    @Id
    protected Long id;
    @Transient
    protected Locale locale;

    @Column(name="LOCALE", nullable=false)
    @Access(AccessType.PROPERTY)
    @Id
    protected String getLocaleForDB()
    {
        return locale.toString();
    }

    protected void setLocaleForDB(String localeFromDB)
    {
        //logic for creating a Locale object from a String
    }
} 
```

当我从数据库中提取数据时，一切都很好。我得到一个 MyEntity 并且地图已按预期填充。但是，当我尝试插入数据（保存 MyEntity）时，我会出错。这是日志中的内容：

```
[EL Fine]: 2012-09-04 23:40:19.989--ClientSession(101408113)--Connection(1411623120)--Thread(Thread[http-8080-1,5,main])--select nextval(MY_ENTITY_SEQ_GEN)
[EL Fine]: 2012-09-04 23:40:20.048--ClientSession(101408113)--Connection(1411623120)--Thread(Thread[http-8080-1,5,main])--INSERT INTO MY_ENTITY (ID, STUFF, FOR, MY_ENTITY,) VALUES (?, ?, ?, ?)
    bind => [1, foo1, foo2, foo3]
[EL Fine]: 2012-09-04 23:40:20.13--ClientSession(101408113)--Connection(1411623120)--Thread(Thread[http-8080-1,5,main])--INSERT INTO MY_ENTITY_TRANSLATIONS (ID, LOCALE, PROP1, PROP2) VALUES (?, ?, ?, ?)
    bind => [null, en_US, My Prop1, My Prop2]
[EL Fine]: 2012-09-04 23:40:20.135--ClientSession(101408113)--Thread(Thread[http-8080-1,5,main])--SELECT 1
[EL Warning]: 2012-09-04 23:40:20.139--UnitOfWork(1394902291)--Thread(Thread[http-8080-1,5,main])--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: ERROR: null value in column "id" violates not-null constraint
Error Code: 0
Call: INSERT INTO MY_ENTITY_TRANSLATIONS (ID, LOCALE, PROP1, PROP2) VALUES (?, ?, ?, ?)
    bind => [null, en_US, My Prop1, My Prop2]
Query: InsertObjectQuery(com.foo.MyEntityTranslations@53fd3a3b)
Sep 4, 2012 11:40:54 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet appServlet threw exception
org.postgresql.util.PSQLException: ERROR: null value in column "id" violates not-null constraint
    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2103) 
```

现在，在我尝试保存`MyEntity`对象之前，我在地图中看到`MyEntityTranslations`条目的 id 字段为空。我理解这一点，因为`MyEntity`它本身还没有 id。中的 id 字段`MyEntity`具有以下注释：

```
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator="MY_ENTITY_SEQ_GEN") 
```

因此，它在插入时从序列中获取其 id。我的问题是我需要如何注释地图以便该 id 也被`MyEntityTranslations`记录在案？我在 上尝试了不同的属性`@JoinColumn`，但似乎没有任何效果。我是一个 JPA 新手，所以我可能遗漏了一些明显的东西。我想保持所有 JPA 实现独立，但如果重要的话，我使用的是 EclipseLink 2.3.2。

根据以下建议，我将 CustomTranslations 更改为如下所示：

```
@MappedSuperclass
@Access(AccessType.FIELD)
public abstract class CustomTranslations<T>
{
    @Id
    @ManyToOne
    @JoinColumn(name="ID")
    protected T translationsFor;
    @Transient
    protected Locale locale;

    @Column(name="LOCALE", nullable=false)
    @Access(AccessType.PROPERTY)
    @Id
    protected String getLocaleForDB()
    {
        return locale.toString();
    }

    protected void setLocaleForDB(String localeFromDB)
    {
        //logic for creating a Locale object from a String
    }
} 
```

然后我的地图`MyEntity`看起来像这样：

```
@OneToMany(mappedBy="translationsFor", fetch=FetchType.EAGER, cascade=CascadeType.ALL)
@MapKey(name="localeForDB")
private Map<String, MyEntityTranslations> translations; 
```

我确定我只是误解了某些东西，但是在尝试保存 MyEntity 实例时，我仍然遇到与以前完全相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:49:28.457

You need a @ManyToOne back in your MyEntityTranslations. Your @OneToMany should use a mappedBy not a @JoinColumn.

Remove the id from CustomTranslations and instead add a @ManyToOne to MyEntity with the @JoinColumn and @Id on it.

See, [http://en.wikibooks.org/wiki/Java_Persistence/OneToMany](http://en.wikibooks.org/wiki/Java_Persistence/OneToMany)

and, [http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#JPA_2.0](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#JPA_2.0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:50:20.767

This should result in an error, because you have 2 mappings that control the "ID" field in the "MY_ENTITY_TRANSLATIONS" table. The first being the ID mapping in the CustomTranslations class, the second being the OneToMany mapping in MyEntity. You can only have 1 writable, and I suggest you make it one accessible from within the class mapped to the table to avoid other problems.

The easiest way to do what you want is to make your OneToMany a bidirectional OneToMany. That means add a ManyToOne mapping in CustomTranslations back to MyEntity that uses the "ID" field as the join column, and then mark the OneToMany as mapped by this new mapping. JPA allows you making this new ManyToOne as the ID for the CustomTranslations, so you can remove the Long id, or you can keep it and use the @MapsId annotation so that JPA knows that the value from the referenced MyEntity is to be used in the Long id field as well. Something like:

```
 @Id protected Long id;  
   @MapsId(value="id")
   @ManyToOne
   MyEntity myEntityBackReference; 
```

You will need to maintain the bidirectional relationship instead of just the collection, but this will be implementation independent.

# git - 如何处理 Git 不连续性？

> ID：12275472
> 
> 赞同：7
> 
> 时间：2012-09-05T06:14:46.533
> 
> 标签：git

假设在我们的 Git 存储库中，我们在分支上工作`master`了一段时间。然后，我们大多数人开始在`coolfeature`分支上工作，而少数开发人员继续在`master`.

现在，从事这项工作的开发人员`master`已经失去了兴趣，他们在我们分叉后开发的内容并不是很重要。但我们希望`master`再次调用主开发分支。从概念上讲，我们基本上希望树看起来像这样：

```
*--master--X      ----master
 \               /
  --coolfeature-- 
```

实现这一目标的最简单方法是什么？我们真的不想尝试合并coolfeature，我们很高兴标记为X 的提交完全没有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:18:51.117

使用新的 master 分支执行强制推送。

```
git push -f origin master 
```

其他人获取代码并执行重置

```
git fetch origin master
git reset --hard origin/master 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T09:08:02.197

我会这样做并避免强制推送的方式：

1.  为您不关心的提交 X 创建一个标签。（你马上就会明白为什么。
2.  `git revert`自从您分支出coolfeature 以来，在master 分支上执行所有提交。这会将存储库恢复到您分叉时的状态，但它不会重写历史记录，因此如果没有收到备忘录，没有人的存储库会被破坏。
3.  将coolfeature合并到master上。

标记 X 的要点是在您进行所有更改之前标记该点。标签很便宜，在某些时候您可能想知道您退出提交并进行此类更改的时间点。

# php - 重定向到一个页面并将帖子信息发送到另一个页面

> ID：12275477
> 
> 赞同：0
> 
> 时间：2012-09-05T06:15:14.653
> 
> 标签：php, curl

我想在提交后将人发送到感谢页面的页面上有一个表单，但我想将表单中的数据发送到远程服务器上的另一个 .php 文件。我已经使用该操作将信息作为帖子直接发送到远程服务器，它工作得很好，但为了安全起见，我不希望在任何代码中看到远程位置。我正在处理的解决方案是在提交之后，表单操作会将您发送到 .php，该 .php 将通过 cURL 将发布信息发送到远程。这是它下山的地方。我不打算使用 cURL，只是我读到的唯一一个听起来可以工作的东西。因此，回顾一下这是否令人困惑；人点击提交，他们会转到一个 .php，上面写着“你是一个很棒的人”

我的 html 上面有表格：

```
<form action="landing.php" method="post">
Client:<input name="client" type="text" size="20" maxlength="30">
    <br />
Test1:<input name="test1" type="text" size="20" maxlength="30">
    <br />
Test2:<input name="test2" type="text" size="20" maxlength="30">
    <br />
<input type="submit" name="submit" value="Submit" />
</form> 
```

转到此页面：

```
<?php
$ch = curl_init();
$data = array('client' => 'Foo', 'test1' => '123', 'test2' => '987');
curl_setopt($ch, CURLOPT_URL, 'http://MyServer/test.php');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_exec($ch);
?>
Thank You etc. 
```

而且它不起作用......我是 cURL 的新手，所以这对于我正在尝试做的事情来说可能非常糟糕。我的主要工作是隐藏遥控器的位置。

我在正确的轨道上吗？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:29:02.700

我认为还有另一种选择：-

1.  使用可以将您的数据存储在会话中。
2.  然后重定向到页面。

希望这些信息对您有所帮助。

或者还有另一种解决方案，您可以使用以下代码重定向到新页面：

```
<?php
    header("Status: 301 Moved Permanently");
    header("Location:http://MyServer/test.php?". $_SERVER['QUERY_STRING']);
    exit;
?> 
```

感谢和问候普什卡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:24:17.040

检查 Curl 是否启用

发布后，尝试从 Curl 抓取输出

```
<?php

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://www.example.com/path/to/form");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, true);

$data = array(
    'foo' => 'foo foo foo',
    'bar' => 'bar bar bar',
    'baz' => 'baz baz baz'
);

curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch);

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:31:24.863

首先通过[curl](http://php.net/manual/en/book.curl.php)。请参阅此[链接](http://davidwalsh.name/curl-post)以发布数据。正如您所说“我的主要工作是隐藏遥控器的位置”，您可以在这种情况下使用数据库。将您的远程位置保存在一张表中，并随时检索它。

试试这个来解决你当前的问题。

```
<?php
//set POST variables
$url = 'http://MyServer/test.php';
$data = array('client' => 'Foo', 'test1' => '123', 'test2' => '987');

//url-ify the data for the POST
foreach($data as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($data));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T06:34:36.587

我想你需要`POSTFIELDS`像这样的字符串

```
$data = 'client=Foo&test1=123&test2=987' 
```

获取返回数据添加

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$returnText = curl_exec($ch);
$data= curl_getinfo($ch); 
```

如果您想将其用作数组，请阅读[此内容](http://php.net/manual/en/function.curl-setopt.php)

> 在 HTTP“POST”操作中发布的完整数据。要发布文件，请在文件名前加上 @ 并使用完整路径。文件类型可以通过使用格式为“;type=mimetype”的文件名来明确指定。此参数可以作为 urlencoded 字符串（如 'para1=val1¶2=val2&...'）或作为字段名称作为键和字段数据作为值的数组传递。如果 value 是一个数组，则 Content-Type 标头将设置为 multipart/form-data。从 PHP 5.2.0 开始，如果文件以 @ 前缀传递给此选项，则 value 必须是数组。

# java - GWT-AI 集成

> ID：12275480
> 
> 赞同：3
> 
> 时间：2012-09-05T06:15:42.810
> 
> 标签：java, gwt, applet

我正在使用`GwtAI`（Gwt Applet Integration）开发一个演示应用程序。我已经包含了所有的`GwtAI-client.jar,GwtAI-core.jar`。我指的是[http://code.google.com/p/gwtai/wiki/GettingStarted](http://code.google.com/p/gwtai/wiki/GettingStarted)以下是代码。

**FileUploadingApplet.class**

```
@ImplementingClass(com.nextenders.appletImpl.FileUploadingAppletImpl.class)
@Height("60")
@Width("350")
@Archive("GwtAI-Client.jar,FileUploadingAppletImpl.jar")
@Codebase("applet")
public interface FileUploadingApplet extends Applet{

     public void increment();

     public void decrement();

     public Object getCurrentValue();

} 
```

**FileUploadingAppletImpl.class**

```
public class FileUploadingAppletImpl extends JApplet implements FileUploadingApplet {
    JTextField m_fileNameTF = new JTextField(15);
    String controlTransactionId = "";
    JFileChooser m_fileChooser = new JFileChooser();
    JPanel content = new JPanel();
    FileWriter fstream = null;
    long fileLength = 0l;

    @Override
    public void init() { 

        JPanel panelMain = new JPanel();

        m_fileNameTF = new JTextField(20);
        m_fileNameTF.setHorizontalAlignment(JTextField.CENTER);
        m_fileNameTF.setText("0");
        m_fileNameTF.setEditable(false);

        panelMain.add(new JLabel("Current count : "));
        panelMain.add(m_fileNameTF);

        panelMain.setBorder(BorderFactory.createTitledBorder("CounterApplet"));
        panelMain.setBackground(Color.WHITE);

        getContentPane().add(panelMain);

    }

     public void increment() {
         int currentCount = Integer.parseInt(m_fileNameTF.getText());
         currentCount++;

         m_fileNameTF.setText(currentCount + "");
 }

 public void decrement() {
         int currentCount = Integer.parseInt(m_fileNameTF.getText());
         currentCount--;

         m_fileNameTF.setText(currentCount + "");
 }

 public Object getCurrentValue() {
         return m_fileNameTF.getText();
 }
} 
```

**NTFileUpload.java**

```
private void createPanel(){
        PopupPanel panel = new PopupPanel();
        panel.setPopupPosition(500, 500);
        panel.setHeight("600px");
        panel.setHeight("900px");

        final FileUploadingApplet fileUploadApplet = (FileUploadingApplet) GWT.create(FileUploadingApplet.class);
        VerticalPanel panelMain = new VerticalPanel();
        Button buttonInc = new Button("Increment");
        buttonInc.addClickListener(new ClickListener() {
          public void onClick(Widget sender) {
              fileUploadApplet.increment();
          }
        });
        Widget widgetApplet = AppletJSUtil.createAppletWidget(fileUploadApplet);
        panelMain.add(widgetApplet);
        panelMain.add(buttonInc);
        panel.add(panelMain);
        panel.show();
    } 
```

我按照链接遵循了包结构。但我正在关注异常。

```
java.lang.IncompatibleClassChangeError: Found interface com.google.gwt.core.ext.typeinfo.JClassType, but class was expected
    at com.google.gwt.gwtai.applet.generator.AppletProxyGenerator.generate(AppletProxyGenerator.java:71)
    at com.google.gwt.core.ext.GeneratorExtWrapper.generate(GeneratorExtWrapper.java:48)
    at com.google.gwt.core.ext.GeneratorExtWrapper.generateIncrementally(GeneratorExtWrapper.java:60)
    at com.google.gwt.dev.javac.StandardGeneratorContext.runGeneratorIncrementally(StandardGeneratorContext.java:647)
    at com.google.gwt.dev.cfg.RuleGenerateWith.realize(RuleGenerateWith.java:41)
    at com.google.gwt.dev.shell.StandardRebindOracle$Rebinder.rebind(StandardRebindOracle.java:78)
    at com.google.gwt.dev.shell.StandardRebindOracle.rebind(StandardRebindOracle.java:268)
    at com.google.gwt.dev.shell.StandardRebindOracle.rebind(StandardRebindOracle.java:257)
    at com.google.gwt.dev.DistillerRebindPermutationOracle.getAllPossibleRebindAnswers(DistillerRebindPermutationOracle.java:91)
    at com.google.gwt.dev.jdt.WebModeCompilerFrontEnd.doFindAdditionalTypesUsingRebinds(WebModeCompilerFrontEnd.java:96)
    at com.google.gwt.dev.jdt.AbstractCompiler$Sandbox$CompilerImpl.process(AbstractCompiler.java:254)
    at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:444)
    at com.google.gwt.dev.jdt.AbstractCompiler$Sandbox$CompilerImpl.compile(AbstractCompiler.java:173)
    at com.google.gwt.dev.jdt.AbstractCompiler$Sandbox$CompilerImpl.compile(AbstractCompiler.java:288)
    at com.google.gwt.dev.jdt.AbstractCompiler$Sandbox$CompilerImpl.access$400(AbstractCompiler.java:139)
    at com.google.gwt.dev.jdt.AbstractCompiler.compile(AbstractCompiler.java:588)
    at com.google.gwt.dev.jdt.BasicWebModeCompiler.getCompilationUnitDeclarations(BasicWebModeCompiler.java:97)
    at com.google.gwt.dev.jdt.WebModeCompilerFrontEnd.getCompilationUnitDeclarations(WebModeCompilerFrontEnd.java:52)
    at com.google.gwt.dev.jjs.JavaToJavaScriptCompiler.precompile(JavaToJavaScriptCompiler.java:569)
    at com.google.gwt.dev.jjs.JavaScriptCompiler.precompile(JavaScriptCompiler.java:33)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:284)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:233)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:145)
    at com.google.gwt.dev.Compiler.run(Compiler.java:232)
    at com.google.gwt.dev.Compiler.run(Compiler.java:198)
    at com.google.gwt.dev.Compiler$1.run(Compiler.java:170)
    at com.google.gwt.dev.CompileTaskRunner.doRun(CompileTaskRunner.java:88)
    at com.google.gwt.dev.CompileTaskRunner.runWithAppropriateLogger(CompileTaskRunner.java:82)
    at com.google.gwt.dev.Compiler.main(Compiler.java:177) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T10:46:37.877

您需要使用您用于编译项目的相同 GWT SDK 版本构建您正在使用的依赖项（jar/war），即如果是 2.4，则使用 2.4 来 jar 依赖项，然后编译您的项目。此错误是由于使用的 SDK 版本不匹配造成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:45:11.930

在 1.7 和 2.0 版本之间，GWT 代码生成器功能发生了重大变化。因此，如果您使用 GWT 2.0 或更高版本，请确保您拥有当前版本的 GwtAI。如果您使用 2.0 之前的 GWT 版本，请转到[GwtAI 下载页面](http://code.google.com/p/gwtai/downloads/list)，选择*所有下载*并单击*搜索*，您应该会看到 GwtAI 0.2 文件。这些应该适用于较旧的 GWT 版本。

# spring - Spring Data Neo4j - 跨存储持久化

> ID：12275486
> 
> 赞同：1
> 
> 时间：2012-09-05T06:16:14.247
> 
> 标签：spring, neo4j, spring-data-neo4j, spring-data-graph

我是 SDN 新手，我正在尝试使用休眠进行跨存储持久性。网站上给出的[教程有相同的例子，我也检查了 github 的。](http://static.springsource.org/spring-data/data-graph/snapshot-site/reference/html/#d5e1163)我有两个问题

1.  我无法进行文档或示例中提到的 xml 配置。`<neo4j:config/>`不支持`entityManagerFactory`。我的假设是它创建了默认的[Neo4jConfiguration](http://static.springsource.org/spring-data/data-neo4j/docs/2.0.0.RC1/api/org/springframework/data/neo4j/config/Neo4jConfiguration.html)，它没有用于`entityManagerFactory`. 我发现的解决方法是定义一个[CrossStoreNeo4jConfiguration](http://static.springsource.org/spring-data/data-neo4j/docs/2.0.0.RC1/api/org/springframework/data/neo4j/cross_store/config/CrossStoreNeo4jConfiguration.html) bean。

    ```
    @Bean
    public CrossStoreNeo4jConfiguration crossStoreNeo4jConfiguration(){
    CrossStoreNeo4jConfiguration configuration = new CrossStoreNeo4jConfiguration();
    configuration.setEntityManagerFactory(entityManagerFactory);
    configuration.setGraphDatabaseService(graphDatabaseService);
    return configuration;
    } 
    ```

    如何在里面做到这一点`<neo4j:config/>`

2.  `neo4j-template-ref`当您使用定义存储库时将 Neo4jTemplate 引用到您的存储库时会发生什么`neo4j:repositories`？什么目的？

**UDPATE**

它无法创建的原因是`CrossStoreNeo4jConfiguration`我`<neo4j:config/> was`缺少依赖 spring-data-neo4j-cross-store 。但是现在我在应用程序启动时遇到异常。

```
Caused by: java.lang.IllegalStateException: Singleton 'nodeEntityStateFactory' isn't currently in creation
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.afterSingletonCreation(DefaultSingletonBeanRegistry.java:312)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:239)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:292)
at org.springframework.data.neo4j.cross_store.config.CrossStoreNeo4jConfiguration$$EnhancerByCGLIB$$779c5955.nodeEntityStateFactory(<generated>)
at org.springframework.data.neo4j.config.Neo4jConfiguration.mappingContext(Neo4jConfiguration.java:199)
at org.springframework.data.neo4j.cross_store.config.CrossStoreNeo4jConfiguration$$EnhancerByCGLIB$$779c5955.CGLIB$mappingContext$11(<generated>)
at org.springframework.data.neo4j.cross_store.config.CrossStoreNeo4jConfiguration$$EnhancerByCGLIB$$779c5955$$FastClassByCGLIB$$3134c8a8.invoke(<generated>)
at net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)
at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:280)
at org.springframework.data.neo4j.cross_store.config.CrossStoreNeo4jConfiguration$$EnhancerByCGLIB$$779c5955.mappingContext(<generated>)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:149) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:00:02.767

这应该有效：

```
<neo4j:config entityManagerFactory="entityManagerFactory"/> 
```

无需创建您的自定义实现。

传递给存储库配置的模板是其基础架构使用的模板。在大多数情况下，不需要配置不同的东西。

# sql - storeProcecdure 可以插入触发触发器吗？

> ID：12275487
> 
> 赞同：1
> 
> 时间：2012-09-05T06:16:16.563
> 
> 标签：sql, sql-server-2008

SQL Server 2008

我已经定义了触发器

TABLE_A 用于“INSTEAD OF INSERT”，TABLE_B 用于“INSTEAD OF INSERT”。

两个触发器都与插入的表执行合并。

TABLE_A 插入由用户/代码完成并且运行良好，触发插入的触发器。

我在 TABLE_A TRIGGER 中有存储过程 SP_1。

SP_1 根据某些条件将 TABLE_A 中的数据插入 TABLE_B。

但问题是当存储过程 (SP_1) 插入数据时，不会触发 TABLE_B 上的触发器，而是按原样插入数据。

那么存储过程可以插入触发触发器吗？

**伪代码**

```
ALTER TRIGGER [dbo].[trgtable_AInsert] ON [dbo].[TABLE_A]
Instead of INSERT
AS
BEGIN
SET NOCOUNT ON;     

    IF exists(SELECT * FROM INSERTED)
    BEGIN

        MERGE
             .......
             ...........
             ..............

    end

       EXEC SP_1 @employee_id
end 
```

* * *

```
ALTER TRIGGER [dbo].[trgtableB_Insert] ON [dbo].[TABLE_B]
     Instead of INSERT
     AS
     BEGIN
       SET NOCOUNT ON;      
           IF exists(SELECT * FROM INSERTED)
           BEGIN
              MERGE
                 .......
                 ...........
                 ..............
           end
     end 
```

* * *

```
 ALTER PROCEDURE [dbo].[SP_1] @employeeid int
    AS
    BEGIN   
        BEGIN TRANSACTION           

            insert into TABLE_B
                 .......
                 ...........
                 ..............
                from TABLE_A
        where employee_ID is @employeeid
        COMMIT TRANSACTION
   END 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:54:24.260

这对于评论来说太大了，需要格式化，因此作为“答案”发布。

是的，在这种情况下触发器会触发。以您的示例并稍作修改（请注意警告）：

```
create table Table_A (ID int not null)
go
create table Table_B (ID int not null)
GO
    CREATE PROCEDURE [dbo].[SP_1] @employeeid int
    AS
    BEGIN   
        BEGIN TRANSACTION           

            insert into TABLE_B (ID)
            SELECT ID from TABLE_A
        where ID = @employeeid
        COMMIT TRANSACTION
   END
GO 
```

创建触发器：

```
CREATE TRIGGER [dbo].[trgtable_AInsert] ON [dbo].[TABLE_A]
Instead of INSERT
AS
BEGIN
SET NOCOUNT ON;     

    IF exists(SELECT * FROM INSERTED)
    BEGIN

        MERGE
            into Table_A a
            using inserted i on a.id = i.id
            when not matched then insert (ID) values (i.id);

    end
    --Wrong code, just for example
    declare @employee_id int
    select @employee_id = ID from inserted --BAD CODE, Ignores multiple rows
       EXEC SP_1 @employee_id
end
GO
CREATE TRIGGER [dbo].[trgtableB_Insert] ON [dbo].[TABLE_B]
     Instead of INSERT
     AS
     BEGIN
       SET NOCOUNT ON;      
           IF exists(SELECT * FROM INSERTED)
           BEGIN
              MERGE
                 into Table_B b
                 using inserted i on b.id = i.id
                 when not matched then insert (ID) values (i.id+5);
           end
     end
GO 
```

并执行一个试验插入`Table_A`：

```
insert into Table_A (ID) values (1),(2)
select * from Table_B 
```

目前，在我的机器上，我得到了值为“7”的单行的最终结果。其他人可能会运行此示例并得到结果“6”，因为触发器仅在每个语句中运行一次，而不是在每行中运行一次。但正如您所见，两个触发器都已触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:21:31.600

**是**的，触发器可以由存储过程插入触发！

但我认为问题在于在这种情况下您应该尝试使用**AFTER**而不是**INSTEAD OF**触发器。因为我看不到你的所有代码，但有可能插入没有完成，因为你在而不是触发器中覆盖了它。使用 AFTER 触发器，触发第二个触发器应该没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T07:06:28.380

正如我之前在评论中提到的@András Ottó

```
Merge
using(... = "column with possible null values" AND 
      ... = ... AND 
      ... = ...
     ) 
```

合并无法正常工作，并且总是插入记录。

```
1 = 1 and E=E and NULL=NULL is not true. (of-course sql 101) 
```

我忽略了这一列，并且没有正确放置 where 子句来删除`null`值，因此最终一直插入。修复一切最终正常工作。

感谢每个 1 的帮助。干杯

道歉。我不会将其标记为已回答，因为这纯粹是我的错误，问题中没有完全提到。

# android - 如何在 Android 中知道麦克风是否在使用中

> ID：12275491
> 
> 赞同：0
> 
> 时间：2012-09-05T06:16:42.940
> 
> 标签：android, linux, android-ndk, microphone

我想知道我手机的麦克风是否在使用中？如何通过Android NDK完成......我是新手，所以对此没有太多想法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:31:14.830

无法确定其他应用程序当前是否正在使用麦克风。

# android - Java服务器代码将通知推送到Android中的特定设备

> ID：12275500
> 
> 赞同：-3
> 
> 时间：2012-09-05T06:17:31.307
> 
> 标签：android

我正在创建一个需要推送通知的 Android 应用程序。我已经完成了客​​户端应用程序，但我想要使用 java 的服务器端应用程序。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:20:04.707

然后你会想看看**Google Cloud Messaging for Android Libary**。从 SDK 管理器安装它，您将获得客户端和服务器示例源代码。

请参考以下链接：

GCM：入门：http:
[//developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)

教程：
[http ://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/](http://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/)

# javascript - 如何使用 JavaScript Lib 将字符串（所见即所得）转换为原始 html？

> ID：12275508
> 
> 赞同：2
> 
> 时间：2012-09-05T06:18:07.687
> 
> 标签：javascript, jquery, edit-in-place

我在我的 Rails 应用程序项目中使用[http://www.appelsiini.net/projects/jeditable](http://www.appelsiini.net/projects/jeditable)（jEditable JS Lib），然后我发现问题，然后尝试使用“与 Textile 一起使用，Markdown”。问题是我无法在 Rails 项目中使用 .php 文件。有解决此案的解决方案吗？

=> 为了更多地了解我是什么

*   [http://www.textism.com/tools/textile/](http://www.textism.com/tools/textile/)
*   [http://www.appelsiini.net/projects/jeditable/default.html](http://www.appelsiini.net/projects/jeditable/default.html)（在'Textile renderer'上并尝试输入字段并按回车键或写html标签，如<hr>或<b>或等，和然后提交你会看到像（所见即所得）。

如何将带有新行的字符串（所见即所得）转换为原始 html？

例子 ：

```
one
two
three
four 
```

输出 ：

```
one<br>
two<br>
three<br>
four<br> 
```

是否有任何 JavaScript 库可以解决这个问题？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:24:28.907

如果我理解正确您的问题是，在您存储动态上传的 html 代码后，rails 会将其作为转义数据发回给您。您可以使用该`raw`方法显示一些来源（您信任 100%）。

```
<%= raw some_variable %> 
```

# c# - 如何从多个流畅的 NHibernate 会话工厂获取结果？

> ID：12275509
> 
> 赞同：3
> 
> 时间：2012-09-05T06:18:08.403
> 
> 标签：c#, nhibernate, fluent-nhibernate

我将 FluentNhibernate 与 Asp.net MVC 一起使用。出于某些原因，我有单独的数据库，这些数据库具有跨数据库的关系。我的所有数据库都有多个会话工厂。

**我可以一次使用两个会话工厂获取结果吗？**

例如：[FirstDB].[FirstTable].[UID] 与 [SecondDB].[UserTable].[ID] 相关，如果用一些关于如何这样做的示例进行解释，将不胜感激！

我遵循了这种方法：

*   提取的 [FirstDB].[FirstTable] 生成一个列表。
*   获取的 [SecondDB].[UserTable] 导致另一个列表。
*   然后使用 linq 或 lamda 表达式得到最终结果。

这是一个好方法吗？

但是，我想知道我是否可以为多个会话工厂编写一个带有连接的查询？还有它的优缺点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:10:34.447

不幸的是，不可能在多个 sessionfactories 上编写一个 linq 查询 (IQueryable)。您发布的方法是我看到的唯一方法。但是，您可以在使用 Linq to 对象形成最终结果之前优化每个查询以过滤不需要的记录。

# lotus-notes - 自动扩展视图中的最后一列 - Lotus Notes

> ID：12275513
> 
> 赞同：0
> 
> 时间：2012-09-05T06:18:51.010
> 
> 标签：lotus-notes

我有一个包含 5 列的视图。当应用程序运行时，在第 5 列（最后一列）之后，视图末尾有一个很大的空间。

我希望视图的最后一列能够自动扩展并尽可能远地到达视图。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:13:00.330

您只需要在视图属性的样式选项卡上选中“将最后一列扩展到窗口宽度”： ![在此处输入图像描述](../Images/e4019314d95dc36c3dad4735e55a2ac6.png)

# android - 如何在android中使用transferTo和使用进度条

> ID：12275514
> 
> 赞同：1
> 
> 时间：2012-09-05T06:18:53.560
> 
> 标签：android, progressdialog, fileinputstream, fileoutputstream

当我在 Android 中将*文件 A*复制到*文件夹 B*时，我想使用`ProgressDialog(ProgressDialog.STYLE_HORIZONTAL)`.

示例 1：

```
String mStart = "/sdcard/aaaa/";    
FileInputStream fis = new FileInputStream(mStart);    
FileOutputStream fos = new FileOutputStream(path);  

FileChannel fin = fis.getChannel();
FileChannel fout = fos.getChannel();    
File f = new File(mStart);

fin.transferTo(0, f.length(), fout); 
```

示例 2：

```
byte[] buffer = new byte[1024];    
while ((readcount = bin.read(buffer, 0, 1024)) != -1) {    
    bout.write(buffer, 0, readcount);    
    publishProgress(readcount);    
} 
```

如果我使用第二个示例，我可以使用`ProgressDialog()`，但在第一个示例中我不能。`ProgressDialog`使用方法时如何更新`transferTo()`？

# python - 逐行阅读后不需要的 \n

> ID：12275516
> 
> 赞同：0
> 
> 时间：2012-09-05T06:19:05.380
> 
> 标签：python, newline

我正在尝试通过 python 更改目录，但文件夹名称是可变的（从列表中选择）：

```
f=open('folderlist.txt')
for line in f:

    pname = line

    os.chdir('./P574/%s' % (pname)) 
```

这不太有效，因为我收到错误消息：“没有这样的文件或目录：'./folders/folder_name2\n'”

我想要的文件夹名称在一个名为“folderlist.txt”的列表中，但是如何停止 python 在末尾添加 '\n'？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:22:53.830

你必须使用[rstrip](http://docs.python.org/library/stdtypes.html#str.rstrip)。将行更改`pname = line`为

```
pname = line.rstrip('\n') 
```

# c# - 使用静态资源键 ( CollectionViewSource ) 填充 DataGribCombobox 列

> ID：12275519
> 
> 赞同：1
> 
> 时间：2012-09-05T06:19:18.857
> 
> 标签：c#, wpf, wpfdatagrid

我是 WPF 的新手。我有两个组合框列的数据网格。我想用员工姓名填充一列，用产品名称填充另一列。注意：员工姓名是从实体框架对象员工中检索的，类似的产品名称是从实体框架对象产品中检索的。

下面是不起作用的代码。我不确定如何设置 Datagrid itemsource，因为每个组合框列都从不同的静态资源获取数据？帮助将不胜感激。

```
<Window.Resources>
    <CollectionViewSource x:Key="EmployeeLookup" Source="{Binding Path=EmpList}"/>
    <CollectionViewSource x:Key="ProdutsLookup" Source="{Binding Path=ProdList}"/>
</Window.Resources>
<DataGrid AutoGenerateColumns="False" Height="203" HorizontalAlignment="Left"     Margin="22,92,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="416">
        <DataGrid.Columns>
            <DataGridComboBoxColumn Header="Employee"  ItemsSource="{Binding Source=   {StaticResource EmployeeLookup}}" DisplayMemberPath="FirstName"/>
            <DataGridComboBoxColumn Header="Products"  ItemsSource="{Binding Source={StaticResource ProdutsLookup}}" DisplayMemberPath="ProductName"/>

        </DataGrid.Columns>
    </DataGrid> 
```

# php - 如何使用用户友好的 URL 在 php 中获取项目根目录

> ID：12275520
> 
> 赞同：0
> 
> 时间：2012-09-05T06:19:20.047
> 
> 标签：php, include, directory-structure, include-path, server-side-includes

我创建了 initialize.php 来定义我的项目的根目录。

```
defined('DS') ? null : define('DS', DIRECTORY_SEPARATOR);
defined('SITE_ROOT') ? null : define('SITE_ROOT', DS.'works'.DS.'myproject'); 
```

我将它包含在任何目录中的类似内容中。

```
require_once("../includes/initialize.php"); 
```

我更容易包含其他文件。我要将文件上传到服务器，然后我应该只更改 initialize.php 文件。

有用。但是，当我使用用户友好的 URL 并从中调用 ajax 文件时，我不知道要包含 initialize.php 的目录层次结构。

我不想这样做：

```
require_once("/works/myproject/includes/initialize.php"); 
```

对于每个文件。因为每次上传时它都会改变。

我不想为每个用户使用会话或 cookie。

应该有一个技巧，但我找不到。有没有办法在使用用户友好的 URL 和 ajax 调用时从任何地方获取项目根目录？

* * *

我修好了它。

当我用ajax调用它时没关系。但在某些情况下，我也将它作为 php 包含在内。

由于当前和 ajax 文件位于不同的文件夹中，它崩溃了。

因此，当我将其更改为仅在使用 ajax 调用时需要 initialize.php 时，问题就解决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:30:06.590

如果您使用的是 Apache，您可以尝试将您的包含目录添加到您的 include_path 指令中。

通过执行 phpinfo() 查找当前值并查找**include_path**，然后尝试在您的顶级 Web 目录中重新声明它并将绝对路径添加到您的包含目录。

因此，如果默认值为：

```
include_path = ".:/usr/bin/php:/some/other/directory" 
```

只需在 .htaccess 文件中复制粘贴相同的内容，但在最后添加包含目录，用冒号分隔。

```
include_path = ".:/usr/bin/php:/some/other/directory:/works/myproject/includes" 
```

这样您就不必每次都引用绝对路径。

这一切都取决于您的虚拟主机为您提供的权限。还有其他（更简单的）方法可以做到这一点，但我发现它们中的大多数通常受到托管服务提供商的限制，通过 .htaccess 手动设置通常是完成此操作的最可靠方法。

这是一个列出几种不同方法的页面：[为 PHP 创建包含路径的五种方法](http://www.geeksengine.com/article/php-include-path.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:27:32.717

只需这样做：

```
require_once("../includes/initialize.php"); 
```

就足够了，因为`PHP`不查看您的友好 URL。它包括你给他的任何东西，包括相对于你的脚本。

还有`$_SERVER['DOCUMENT_ROOT']`一个会为您提供根目录的绝对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:33:57.263

在添加 initialize.php 时，将所有目录定义在一个公共文件中是一种很好的方法。您必须在项目的每个文件中包含此公用文件。用户友好的 url 对文件包含没有影响。

# java - ByteBuffer 与 ChannelBuffer

> ID：12275523
> 
> 赞同：3
> 
> 时间：2012-09-05T06:19:37.500
> 
> 标签：java, asynchronous, netty, bytebuffer

我正在使用一些在 netty 之上实现的框架。我使用以下两个选项从客户端向服务器发送消息。我想这两个片段应该将相同的字节写入套接字，它在服务器端的行为是不同的。它有什么不同？

选项1：好的

```
ChannelBuffer buf = ChannelBuffers.buffer(1);
buf.writeByte(0x1c);
e.getChannel().write(buf); 
```

选项2：失败

```
ByteBuffer buf = ByteBuffer.allocate(1);
buf.put(0x1c);
e.getChannel().write(ChannelBuffers.wrappedBuffer(buf)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T06:24:56.880

在将 ByteBuffer 写入 Channel 之前，您必须调用

```
buf.flip(); 
```

这使字节对写入可见。

# javascript - 通过 AJAX 加载页面并执行 javascript 和 CSS

> ID：12275529
> 
> 赞同：2
> 
> 时间：2012-09-05T06:20:10.777
> 
> 标签：javascript, jquery, html, css, ajax

我已经搜索了一段时间，但我不知道如何通过 AJAX 加载整个页面并仍然执行所有 javascript 和 css。

大多数情况下，我只是得到没有任何 CSS 的纯文本。有没有办法做到这一点？我尝试了 jQuery.get、jQuery.load 和 jQuery.ajax，但没有一个真正像那样工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:13:24.277

我有一个不同的解决方案。您可以尝试使用`iframe`. 使用 jQuery 将包含所有相关代码的 iframe 脚本附加到页面的某些部分（例如 some `div`）。这可能对你有用，包括 CSS，比如；

```
$('<iframe src="your_page.html"/>').appendTo('#your_div'); 
```

或者你可以尝试类似的东西；

```
$('<iframe src="your_page.html"/>').load(function(){
      alert('the iframe is done loading');
}).appendTo('#your_div'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T06:37:33.307

我已经解决了以下类似的问题。

1.  通过ajax下载网页
2.  迭代它并找到任何`<script>`和`</script>`标签
3.  从这些标签中获取内容作为文本
4.  创建新`<script>`元素并在那里插入代码
5.  将标签附加到您的网页

另一件事是你需要以某种方式调用脚本。我是这样做的：

我设置了标准化的函数名称`initAddedScript`，例如在将脚本附加到页面后调用的回调。与我`deinitScript`不再需要代码（及其变量，..）时所调用的相同。

我必须说这是一个糟糕的解决方案，这可能意味着你的应用程序架构很糟糕，就像我一样:)

与 css 相同，但您不需要任何处理程序。只需将标签附加`style`到您的文档头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T07:35:33.757

如果您加载的页面没有任何样式数据，则外部样式表必须具有相**对于调用文档不正确的相对路径。**请记住，这不是 iFrame - 您不是在文档中构建外部文档，而是将一个文档组合到另一个文档中。

另一个问题是，加载完整的页面还会加载`doctype`、`html`、`head`和`body`标签——现代浏览器在大多数情况下都会处理这些标签，但结果是不确定的，因为将一个文档塞入另一个文档不是有效的 HTML。这让我想到了它不起作用的第三个原因：**该部分之外的 CSS 链接** `head` **无效，**`head`以及由您随意的文档中文档拼贴造成的错位部分。

我会为合规性（和正确渲染）做的是，这将在 Success 回调中实现：

1.  将所有`link`元素复制到一个新的 jQuery 元素。
2.  复制该部分中所有`script`的内容`head`
3.  `.html()`从加载的文档的`body`标签中复制内容
4.  将元素（在步骤 1 中复制）附加`link`到主文档的`head`
5.  使用您复制的脚本内容创建一个新`script`标签并将其粘贴`head`到
6.  完毕！

复杂？有点，我猜，但如果你真的想使用 AJAX 加载整个页面，这是你唯一的选择。无论您做什么，它都会导致页面的 JavaScript 出现问题，尤其是应该在初始加载期间运行的代码。你对此无能为力。如果这是一个问题，您需要重写源页面以使其更易于加载，或者您可以弄清楚如何使 iFrame 满足您的需求。

还值得考虑的是，首先将外部 CSS 加载到宿主文档中是否可行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T08:03:46.230

我想你正在寻找这样的东西：

```
your page div --> load --> www.some-site.com 
```

经过快速搜索，最接近的解决方案似乎是“*和*”的解决方案：将[网站加载到 DIV](https://stackoverflow.com/questions/1237707/load-website-into-div)

您必须运行一个**Web 服务器**并创建一个`proxy.php`包含以下内容的页面：

那么你的 JQuery load() 函数应该是这样的：

```
$("#your_div_id").load("proxy.php?url=http://some-site.com"); 
```

注意。我已经测试了这个解决方案，它不应该从目标页面加载所有 CSS，可能你必须重新创建它们。例如存储在远程服务器上的图像文件将不会加载，我想是由于身份验证策略。
您还可以仅查看目标页面，而无法浏览目标站点。

无论如何，我希望这可能是您解决方案的一步。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-07T14:01:40.463

1.  使用 ajax 将整个网页作为文本获取

2.  `document.open(); document.write(this.responseText); document.close();`

    或者

    `document.documentElement.outerHTML = this.responseText;`

但是如果生成的网页在另一个目录中，则需要更改原始网页中 css 和 js 页面的路径。

# android - 如何在 Android 中将 AsyncTask 与 TabActivity 一起使用

> ID：12275530
> 
> 赞同：0
> 
> 时间：2012-09-05T06:20:15.590
> 
> 标签：android, json, android-asynctask, android-tabactivity

我正在尝试创建一个虚拟项目来使用 TabActivty 测试 AsyncTask。首先，我创建了一个登录屏幕，登录后出现 tabview 屏幕.. 在 tab view 屏幕中有五个标签。我想做的是，当我单击特定选项卡时，首先 AsyncTask 应该运行，然后在加载所有数据后，将显示其内容......

对不起，我的英语不好。简而言之，我想要实现的是：

单击选项卡转到 AsycTask，然后加载数据，然后显示该活动的内容。

以下是我的代码：

TabView 类的代码：

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabview);
    tabHost = getTabHost();
    tabHost.addTab(tabHost.newTabSpec("home").setIndicator("Home").setContent(new Intent(this, TabGroup1.class)));
    tabHost.addTab(tabHost.newTabSpec("top5").setIndicator("My Top5").setContent(new Intent(this, TabGroup2.class)));
    tabHost.addTab(tabHost.newTabSpec("resv").setIndicator("My Reservation").setContent(new Intent(this, TabGroup3.class)));
    tabHost.addTab(tabHost.newTabSpec("srch").setIndicator("Search").setContent(new Intent(this, TabGroup4.class)));
    tabHost.addTab(tabHost.newTabSpec("prfl").setIndicator("Profile").setContent(new Intent(this, TabGroup5.class)));
    tabHost.setCurrentTab(0);
    tabHost.setOnTabChangedListener(this);
}
public void onTabChanged(String tabId) {
    // TODO Auto-generated method stub
    if(tabId.equals("top5"))
    {
        new LoadingScreen(this).execute("top5");
        Log.v("tag", String.valueOf(tabId));
    }
} 
```

LoadingScreen 的代码：

```
public class LoadingScreen extends AsyncTask <String, String, String> {

private ProgressDialog progress;
private Context context;
private static String rqst = null;

public LoadingScreen(Context context)
{
    this.context = context;
    progress = new ProgressDialog(context);
    progress.setMessage("Loading...");
    progress.setIndeterminate(false);
    progress.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    progress.setCancelable(true);
}

@Override
protected void onPreExecute() {
    // TODO Auto-generated method stub
    super.onPreExecute();
    progress.show();
}

@Override
protected String doInBackground(String... data) {
    // TODO Auto-generated method stub
    if(rqst.equals("top5"))
    {
        Log.v("tag", "Loading Screen");
    }
    return null;
}

@Override
protected void onPostExecute(String result) {
    // TODO Auto-generated method stub
    progress.dismiss();
    super.onPostExecute(result);
}

} 
```

TabGroups 类的代码：

```
public class TabGroups extends ActivityGroup {

ArrayList<String> list;
Window window;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    if(list == null)
        list = new ArrayList<String>();
}

@Override
public void finishFromChild(Activity child)
{
    LocalActivityManager manager = getLocalActivityManager();
    int index = list.size() -1;
    if(index < 1)
    {
        finish();
        return;
    }
    manager.destroyActivity(list.get(index), true);
    list.remove(index);
    index--;
    String lastId = list.get(index);
    Intent in = manager.getActivity(lastId).getIntent();
    window = manager.startActivity(lastId, in);
    setContentView(window.getDecorView());
}

public void startChildActivity(String Id, Intent intent)
{
    window = getLocalActivityManager().startActivity(Id, intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    if(window != null)
    {
        list.add(Id);
        setContentView(window.getDecorView());
    }
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if(keyCode == KeyEvent.KEYCODE_BACK)
        return true;
    return super.onKeyDown(keyCode, event);
}

@Override
public boolean onKeyUp(int keyCode, KeyEvent event)
{
    if(keyCode == KeyEvent.KEYCODE_BACK)
    {
        onBackPressed();
        return true;
    }
    return super.onKeyUp(keyCode, event);
}

@Override
public void onBackPressed()
{
    int length = list.size();
    if(length > 1)
    {
        Activity current = getLocalActivityManager().getActivity(list.get(length - 1));
        current.finish();
    }
}
} 
```

TabGroup2 类的代码：

```
public class TabGroup2 extends TabGroups {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    startChildActivity("MyTop5", new Intent(this, MyTop5.class));
} 
```

}

`All the TabGroup 1-5 have same code...`

我得到的错误是：

```
08-29 06:38:51.802: E/AndroidRuntime(3485): FATAL EXCEPTION: AsyncTask #1
08-29 06:38:51.802: E/AndroidRuntime(3485): java.lang.RuntimeException: An error occured while executing doInBackground()
08-29 06:38:51.802: E/AndroidRuntime(3485):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
08-29 06:38:51.802: E/AndroidRuntime(3485):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-29 06:38:51.802: E/AndroidRuntime(3485):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-29 06:38:51.802: E/AndroidRuntime(3485):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-29 06:38:51.802: E/AndroidRuntime(3485):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-29 06:38:51.802: E/AndroidRuntime(3485):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
08-29 06:38:51.802: E/AndroidRuntime(3485):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
08-29 06:38:51.802: E/AndroidRuntime(3485):     at java.lang.Thread.run(Thread.java:1096)
08-29 06:38:51.802: E/AndroidRuntime(3485): Caused by: java.lang.NullPointerException
08-29 06:38:51.802: E/AndroidRuntime(3485):     at com.pnf.gogolf.LoadingScreen.doInBackground(LoadingScreen.java:34)
08-29 06:38:51.802: E/AndroidRuntime(3485):     at com.pnf.gogolf.LoadingScreen.doInBackground(LoadingScreen.java:1)
08-29 06:38:51.802: E/AndroidRuntime(3485):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-29 06:38:51.802: E/AndroidRuntime(3485):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-29 06:38:51.802: E/AndroidRuntime(3485):     ... 4 more
08-29 06:38:53.253: E/WindowManager(3485): Activity com.pnf.gogolf.TabView has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44eb9d18 that was originally added here
08-29 06:38:53.253: E/WindowManager(3485): android.view.WindowLeaked: Activity com.pnf.gogolf.TabView has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44eb9d18 that was originally added here
08-29 06:38:53.253: E/WindowManager(3485):  at android.view.ViewRoot.<init>(ViewRoot.java:247)
08-29 06:38:53.253: E/WindowManager(3485):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
08-29 06:38:53.253: E/WindowManager(3485):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
08-29 06:38:53.253: E/WindowManager(3485):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
08-29 06:38:53.253: E/WindowManager(3485):  at android.app.Dialog.show(Dialog.java:241)
08-29 06:38:53.253: E/WindowManager(3485):  at com.pnf.gogolf.LoadingScreen.onPreExecute(LoadingScreen.java:28)
08-29 06:38:53.253: E/WindowManager(3485):  at android.os.AsyncTask.execute(AsyncTask.java:391)
08-29 06:38:53.253: E/WindowManager(3485):  at com.pnf.gogolf.TabView.onTabChanged(TabView.java:31)
08-29 06:38:53.253: E/WindowManager(3485):  at android.widget.TabHost.invokeOnTabChangeListener(TabHost.java:356)
08-29 06:38:53.253: E/WindowManager(3485):  at android.widget.TabHost.setCurrentTab(TabHost.java:341)
08-29 06:38:53.253: E/WindowManager(3485):  at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:129)
08-29 06:38:53.253: E/WindowManager(3485):  at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:453)
08-29 06:38:53.253: E/WindowManager(3485):  at android.view.View.performClick(View.java:2408)
08-29 06:38:53.253: E/WindowManager(3485):  at android.view.View$PerformClick.run(View.java:8816)
08-29 06:38:53.253: E/WindowManager(3485):  at android.os.Handler.handleCallback(Handler.java:587)
08-29 06:38:53.253: E/WindowManager(3485):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-29 06:38:53.253: E/WindowManager(3485):  at android.os.Looper.loop(Looper.java:123)
08-29 06:38:53.253: E/WindowManager(3485):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-29 06:38:53.253: E/WindowManager(3485):  at java.lang.reflect.Method.invokeNative(Native Method)
08-29 06:38:53.253: E/WindowManager(3485):  at java.lang.reflect.Method.invoke(Method.java:521)
08-29 06:38:53.253: E/WindowManager(3485):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-29 06:38:53.253: E/WindowManager(3485):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-29 06:38:53.253: E/WindowManager(3485):  at dalvik.system.NativeStart.main(Native Method) 
```

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T08:04:37.273

错误消息清楚地说明了，您的 AsyncTask 类中有一个 NPE：

```
Caused by: java.lang.NullPointerException
at com.pnf.gogolf.LoadingScreen.doInBackground(LoadingScreen.java:34) 
```

这必须`rqst`是初始化为 null 且永不更改的变量。

# jquery - jquery-从表 td 添加到输入值

> ID：12275532
> 
> 赞同：0
> 
> 时间：2012-09-05T06:20:27.937
> 
> 标签：jquery, jquery-ui, jquery-plugins

每次用户单击表格的单元格时，我都想将单元格的文本添加到输入框。这是我的代码

搜索是我的输入 ID。

示例是我的表 ID。

```
$('#example td').click(function(evt) {
    var name = $('#search').val()+$(this).text();
    $('#search').val(name);  
}); 
```

每次我单击一个单元格时，我只会在输入中得到它的文本，并且输入的先前值会消失。我该如何解决？

我还有另一个问题，例如，如果单元格的文本是`"david"`我将得到`" david "`带空格的字符串。反正有`td`没有空格的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:25:16.663

试试这种方式：

```
$('#example td').click(function() {
    $('#search').val( $.trim($('#search').val()) + $.trim($(this).text()) )
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:30:40.457

你的代码错了，代码有更多`}`

正确的：

```
$('#example td').click(function(evt) {

var name = $('#search').val()+$(this).text();

   $('#search').val(name);  
}); 
```

该代码对我来说效果很好：[jsFiddle](http://jsfiddle.net/EQ47Q/1/)

# java - Android gson 无效 ClassCastException

> ID：12275533
> 
> 赞同：2
> 
> 时间：2012-09-05T06:20:28.657
> 
> 标签：java, android, gson

**嗨，我有一个 Json 字符串**

```
 {"lines":[{"line":"COLOMBO - BADULLA"},{"line":"COLOMBO - MATALE"},{"line":"COLOMBO - PUTTLAM"},{"line":"COLOMBO - THANDIKULAM"},{"line":"COLOMBO - TALAIMANNAR"},{"line":"COLOMBO - BATTICALOA"},{"line":"COLOMBO - TRINCOMALEE"},{"line":"COLOMBO - MATARA"},{"line":"COLOMBO - AVISSAWELLA"},{"line":"COLOMBO - MIHINTALE"}]} 
```

及其域**类**为 This

```
public class Line{
    private String line;

    public String getLine(){
        return this.line;
    }
    public void setLine(String line){
        this.line = line;
    }
}

public class Lines{
    private List lines;

    public List getLines(){
        return this.lines;
    }
    public void setLines(List lines){
        this.lines = lines;
    }
} 
```

**并将gson**映射到对象，如下所示

*仅供参考：对于 jsonString，我传递的是字符串而不是 JSON URL*（使用 HttpGet）

```
 Line ln =null;
    Gson gson = new Gson();
    ln = gson.fromJson(jsonString, Line.class); not the URL
    return ln; 
```

抛出的异常是：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.sab.loc/com.sab.loc.MainActivity}: java.lang.ClassCastException: com.sab.loc.Line cannot be cast to java.util.List 
```

我不确定出了什么问题，我认为我使用[http://jsongen.byingtondesign.com/生成的类定义是正确的](http://jsongen.byingtondesign.com/)

知道它在哪里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:17:33.253

您`jsonString`包含分配给 的一个`array`或`list`多个对象`lines`。

`{"lines":[{"line":"COLOMBO - BADULLA"},...]}`

因此，您尝试将此`jsonString`数据映射到的类必须有一个`lines`变量。

`Line.java`类没有`lines`变量。

尝试这个：

```
public class Lines {
    private List<Line> lines;

    public List<Line> getLines(){
        return this.lines;
    }
    public void setLines(List<Line> lines){
        this.lines = lines;
    }
}

public class Line {
    private String line;

    public String getLine(){
        return this.line;
    }
    public void setLine(String line){
        this.line = line;
    }
} 
```

和这个：

```
Lines ln = new Gson().fromJson(jsonString, Lines.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:45:38.897

你的 json 没有直接返回`Line class.`它正在返回`Lines class.` ，你正在尝试`cast it into Line`which 不是`List`那种方式的类型`throwing class cast exception`。

您可以`private List lines;`在`Line.java class`.

最好`generic type private List<Lines> lines;`在你的`Line.java`班级和`generate the setter getter stubs of lines`.

# android - 滚动地图时自动在地图上放置图钉

> ID：12275535
> 
> 赞同：2
> 
> 时间：2012-09-05T06:20:31.260
> 
> 标签：android, google-maps

我想开发如下链接的地图

[https://developers.google.com/maps/location-based-apps](https://developers.google.com/maps/location-based-apps)

目前我正在使用地图上的计算来捕获滚动，我正在使用谷歌 api，但它需要很长时间才能获取响应数据和放置 pin

有什么本地方法可以做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:25:44.423

在 android 中，您需要在地图更改时触发事件。看看：[如何捕捉地图平移和缩放真的完成了？](https://stackoverflow.com/questions/3567420/how-to-catch-that-map-panning-and-zoom-are-really-finished)

和[http://mpcabd.igeex.biz/android-map-view-with-pan-zoom-events/](http://mpcabd.igeex.biz/android-map-view-with-pan-zoom-events/)

# asp.net-mvc-3 - 如何修复字符编码 MVC3？

> ID：12275536
> 
> 赞同：0
> 
> 时间：2012-09-05T06:20:33.637
> 
> 标签：asp.net-mvc-3

大家好，我已经在我的项目中添加了一个搜索引擎，但是当我点击搜索按钮时，一些字符会变得疯狂，就像 ş 似乎 ÅŸ。之后，我添加了代码，如下所示 Shared cshtml ；

```
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
```

最后我把它添加到 webconfig 文件中

```
<system.web>
    <globalization culture="tr-TR" uiCulture="tr-TR" fileEncoding="utf-8" 
                   responseEncoding="utf-8" requestEncoding="utf-8" /> 
```

但什么都没有改变。请问你能帮帮我吗 ？

这是我的搜索代码

```
<form method="get" action="http://www.google.com.tr/custom" target="google_window">

    <input type="hidden" name="domains" value="www.maltepe.bel.tr"></input>
    <label for="sbi" style="display: none"></label>
    <input type="text" name="q" style="height:14px;width:167px" value="" id="sbi"></input>
    <button type="submit" name="sa" value="Arama" id="sbb"></button>
    <input type="hidden" name="sitesearch" value="www.maltepe.bel.tr" id="ss1"></input>
    <input type="hidden" name="client" value="pub-2231511596197409"></input>
    <input type="hidden" name="forid" value="1"></input>
    <input type="hidden" name="channel" value="1809328852"></input>
    <input type="hidden" name="ie" value="ISO-8859-9"></input>
    <input type="hidden" name="oe" value="ISO-8859-9"></input>
    <input type="hidden" name="cof" value="GALT:#E9382F;GL:1;DIV:#CCCCCC;VLC:7E3939;AH:center;BGC:FFFFFF;LBGC:FF3333;ALC:E9382F;LC:E9382F;T:000000;GFNT:7E3939;GIMP:7E3939;FORID:1"></input>
    <input type="hidden" name="hl" value="tr"></input>

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:24:52.707

尝试将ie和oe的值改为“UTF-8”看看是否可以。

# php - 如何在php中以表格格式显示mysql中的数据

> ID：12275539
> 
> 赞同：0
> 
> 时间：2012-09-05T06:20:50.837
> 
> 标签：php, mysql, html-table

我无法理解它。

我有这个数据库表：

```
category_id
category_name
steps_description 
```

现在我想以这样的格式显示

```
Catgeory 1
Then all steps under it

Catgory2
then all steps under it 
```

我可以用一个 mysql 查询来做到这一点吗？

请告诉我如何使用 PHP 循环。

编辑：
我有对象格式的数据，即对象集合

我想要这样的结果：

```
for all categories {

<table><tr><th>Catgory Name </th></tr>
<tr> <td>Step1 </td> </tr>
<tr> <td>Step2 </td> </tr>
<tr> <td>Step3 </td> </tr>
</table>
} 
```

类似的东西，但有一个查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:50:10.837

我不确定我是否完全明白你的意思，但无论如何我都会尝试...... 我假设，您在表中有许多不是唯一的类别名称。每个步骤都有很多步骤。现在您想为每个类别制作一个表格。如果这是正确的，你可以尝试这样的事情：

```
 $db = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 'username', 'password', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
    $stmt = $db->query("SELECT * FROM `table`");

    $arr_data = array();
    while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
        $arr_data[$row['category_name']][] = $row['steps_description'];
    }
    foreach ($arr_data as $cat) {
        foreach ($cat as $step) {
            $str_steps .= '<tr><td>'.$step.'</td></tr>';
        }
        echo '<table>'.$str_steps.'</table>';
        $str_steps = '';
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:24:22.843

使用 PDO 连接和获取行：

```
$db = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 'username', 'password', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
$stmt = $db->query("SELECT * FROM `table`");

while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
    echo "<table><tr><td>".$row['category_name']." ".$row['category_id']."</td></tr>";
    echo "<tr><td>".$row['steps_description']."</td></tr></table>";
    echo "<br /><br />"
} 
```

如果您需要了解有关 PDO 的更多信息，请阅读这个不错的[教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

# git - 删除远程分支

> ID：12275542
> 
> 赞同：5
> 
> 时间：2012-09-05T06:21:18.503
> 
> 标签：git, branch

当我执行`branch -a`：

```
$ git branch -a
* master
 remotes/origin/HEAD -> origin/master
 remotes/origin/hello
 remotes/origin/master 
```

然后我删除分支：

```
$ git branch -r -D origin/hello
Deleted remote branch origin/hello (was c0cbfd0). 
```

现在我明白了：

```
$ git branch -a
* master
 remotes/origin/HEAD -> origin/master
 remotes/origin/master 
```

分支“hello”已被删除。但是当我获取时：

```
$ git fetch
From localhost:project
 * [new hello]      hello     -> origin/hello

$ git branch -a
* master
 remotes/origin/HEAD -> origin/master
 remotes/origin/hello
 remotes/origin/master 
```

我很混乱。
我认为它已被删除，但它仍然存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T06:27:50.310

您需要使用以下命令将其从遥控器中删除：

```
git push origin --delete hello 
```

当您运行时`git branch -rd origin/hello`，您只会删除本地分支。上面的代码将其从原始存储库中删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T06:32:56.793

要[删除远程分支](http://gitready.com/beginner/2009/02/02/push-and-delete-branches.html)，请使用

```
git push origin :remotebranch 
```

其他一切仅在本地存储库上运行。在最新版本的 git 中，您还可以

```
git push origin --delete remotebranch 
```

根据[文档](http://www.kernel.org/pub/software/scm/git/docs/git-push.html)，`--delete`这意味着“与在所有引用前加一个冒号的前缀”相同。

如果您想知道 的含义`:`，它遵循 . 的标准语法`push`。通常，你会写

```
git push origin localbranch:remotebranch 
```

但是在这里，你`localbranch`用“nothing”替换，有效地删除了远程分支。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T07:32:25.460

请注意， git branch 只允许删除*本地*引用。

```
 git branch -r -D origin/hello 
```

这只删除了指向**[远程跟踪分支](https://stackoverflow.com/questions/4693588/git-what-is-a-tracking-branch/4697054#4697054)**的本地指针，但对远程 repo 内容本身没有影响。
正如其他答案中提到的那样，只有 才`git push origin :hello`会这样做。

另外，这不会改变配置`branch.hello.fetch`：它仍然引用 origin/hello，这就是为什么下一次 fetch 将在本地 repo 中重新创建远程跟踪分支的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T06:47:12.797

```
git push origin --delete somebranch 
```

是您删除远程分支的方式。如果您仍在使用旧版本的 Git，则可能需要使用旧语法：

```
git push origin :somebranch 
```

翻译为“将任何内容推入原点指向的遥控器上的某个分支”。该命令的格式为“git push (which remote repo) (what local reference):(which remote reference)。省略 (what reference) 被解释为“什么都不放”到 (which remote reference) 中，有效地删除它。较新的语法更直观。

# python - 如果文本文件不存在，则使用 python 在文本文件中添加一行

> ID：12275546
> 
> 赞同：-2
> 
> 时间：2012-09-05T06:21:37.840
> 
> 标签：python

> **可能重复：**
> [如果文件不存在，则使用 python 在文件中添加一行](https://stackoverflow.com/questions/12275255/add-a-line-to-a-file-if-it-not-exist-using-python)

我有一个文本文件如下：

```
 <Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Build" ToolsVersion="4.0">
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />
  <ImportGroup Label="ExtensionTargets">
  </ImportGroup>
</Project> 
```

我想在和`<Import Project="$(ProjectName).targets" />`之间 添加一条线如下`</ImportGroup>``</Project>`

```
 <Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Build" ToolsVersion="4.0">
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />
  <ImportGroup Label="ExtensionTargets">
  </ImportGroup>
  <Import Project="$(ProjectName).targets" />
</Project> 
```

我使用 fileinput 模块插入该行，但 `<Import Project="$(ProjectName).targets" />`如果它已存在于文件中，我不想添加我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:09:02.163

使用文本作为文件的文本：

```
import re

match = = re.search( '\<ImportGroup Label="ExtensionTargets"\>', text )
text = text[:match.end()] +'<Import Project="$(ProjectName).targets" />\n'+ text[match.end():] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T06:33:34.293

您应该阅读整个文件或足够的行并检查子字符串是否在内容中：

```
'<Import Project="$(ProjectName).targets" />' in file_content 
```

或者您可以使用正则表达式使搜索更加健壮：

```
import re
regex = re.compile(r'<Import Project="\$\(ProjectName\)\.targets\s*/>')
if not regex.search(file_content):
    insert_line_into_file()
else:
    #the line already exists 
```

# sql - 使用 FOR XML 的 Sql 查询

> ID：12275548
> 
> 赞同：0
> 
> 时间：2012-09-05T06:21:50.447
> 
> 标签：sql

我有一个查询

```
SELECT Brand,
        UEI_ID,
        Concat_Prd_Id = Stuff((
                        SELECT ',' + CAST(Second_ID AS VARCHAR(max))
                        FROM Temp1 t2
                        WHERE t1.Brand = t2.Brand
                                AND t1.UEI_ID = t2.UEI_ID
                        FOR XML Path('')
                        ), 1, 1, '')
FROM Temp1 t1
GROUP BY Brand,
        UEI_ID 
```

执行 26,000 条记录需要 8.48 分钟。

请让我知道如何减少时间...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:30:13.890

首先添加一个索引，（取决于您使用的引用该表的其他查询）类似下面的内容应该这样做：

```
CREATE NONCLUSTERED INDEX IX_Temp1 ON Temp1 (Brand, UEI_ID) INCLUDE Second_ID 
```

虽然我不认为它适用于您的情况，因为`Second_ID`它可能是一个整数，并且不会提高执行时间，但使用 XML`value`来说明连接带有特殊字符的字符串是一个好习惯。

例如

```
SELECT Brand,
        UEI_ID,
        Concat_Prd_Id = STUFF((
                        SELECT ',' + CAST(Second_ID AS VARCHAR(MAX))
                        FROM Temp1 t2
                        WHERE t1.Brand = t2.Brand
                                AND t1.UEI_ID = t2.UEI_ID
                        FOR XML PATH(''), TYPE
                        ).value('.', 'NVARCHAR(MAX)', 1, 1, '')
FROM Temp1 t1
GROUP BY Brand,
        UEI_ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:31:15.473

如果您尚未添加`Index`on `BRAND`and `UEI_ID`，则可以使用此语法更改表。

```
ALTER TABLE tablename ADD INDEX indexName (columnName); 
```

所以在你的情况下，你可以这样做

```
ALTER TABLE Temp1 ADD INDEX IDX_Brand (Brand);
ALTER TABLE Temp1 ADD INDEX IDX_UEI_ID (UEI_IDd); 
```

# flash - 使用 computeSpectrum 的 Flash 音频可视化工具已停止工作

> ID：12275556
> 
> 赞同：1
> 
> 时间：2012-09-05T06:22:20.530
> 
> 标签：flash

Flash 中是否发生了一些变化？不久前，我为我正在开发的一个网站制作了一个音乐可视化工具。它使用 SoundMixer.computeSpectrum 来获取音频中所有频率的电平。它对我来说非常有用，它甚至可以播放页面上其他 Flash 对象的音频，这对我来说效果很好，并且省去了我试图以某种方式将音频从各种播放器对象传输到可视化器的麻烦。

好吧，现在它不再起作用了。自从我上次测试以来，我已经对网站进行了更改，但我认为这不是问题。即使在同一个 Flash 实例中，可视化器也不再对任何音频做出任何响应。但是当我在可视化器中播放音频时，在任何浏览器中，帧率都会明显下降。如果我从使用 Flash Player 9 的 Flash Professional CS3 预览 swf，它可以正常工作，但对于浏览器中的 Flash 11.3 则不能。有人可以解释发生了什么变化以及我需要做什么才能使事情正常进行吗？

更新：

以下是一些相关的代码。

```
var ba:ByteArray = new ByteArray();

addEventListener(Event.ENTER_FRAME,timerHandler);

function timerHandler(event:Event):void {   
   SoundMixer.computeSpectrum(ba, true);

} 
```

我还将 readFloat 和 writeFloat 与字节数组一起使用。当然还有很多其他代码，但它们在 Flash 9 中都可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:12:00.987

我遇到了同样的问题，正在努力解决它。

我有参考资料，你介意看看那些吗？

Adobe 论坛：SoundMixer.computeSpectrum () 无法工作[http://forums.adobe.com/thread/67089](http://forums.adobe.com/thread/67089)

Kirupa 论坛：时间线上的声音：SoundMixer.computeSpectrum [http://www.kirupa.com/forum/showthread.php?329632-Sound-on-timeline-SoundMixer-computeSpectrum](http://www.kirupa.com/forum/showthread.php?329632-Sound-on-timeline-SoundMixer-computeSpectrum)

**编辑于 2012 年 9 月 30 日**

当您声明`Sound`实例化时，如果您已将其编码为：

`var sound:Sound = new Sound(new URLRequest("url"));`

其中 sound 是`Sound`实例的名称，而 url 是您正在加载的声音的 URL，将其更改为：

`var sound:Sound = new Sound(new URLRequest("url"), new SoundLoaderContext(0, true));`

那应该行得通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:42:03.533

从 flash v11.3 开始存在一个缺陷，导致 computeSpectrum() 返回不完整的空数据。它尚未在最新的 Flash Player 版本中得到修复（在撰写本文时为 v11.5）。

如果您将 Flash Player 降级到 v11.2，您将看到您的可视化效果与以前一样。

[https://bugbase.adobe.com/index.cfm?event=bug&id=3222042](https://bugbase.adobe.com/index.cfm?event=bug&id=3222042)

请对此错误投票，以便 adobe 修复它！！！

---编辑--- 现在从 Flash 播放器 11.7 开始修复！

# ruby-on-rails - 让我清楚桌面和移动查看网站

> ID：12275557
> 
> 赞同：0
> 
> 时间：2012-09-05T06:22:21.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2, responsive-design

当我们开发一个网站时，它也适合**移动视图吗？** 如果不是，那么如果我想同时为**桌面视图和移动视图进行开发，需要进行哪些更改？** 请给我建议...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T06:51:40.417

响应式网页设计是您正在寻找的：

维基百科：[http ://en.wikipedia.org/wiki/Responsive_Web_Design](http://en.wikipedia.org/wiki/Responsive_Web_Design)

谷歌搜索：[http ://www.google.com/search?q=responsive+web+design](http://www.google.com/search?q=responsive+web+design)

一些有助于响应式网页设计的框架：

*   引导：http: [//twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)
*   整洁：[http ://thoughtbot.com/neat/](http://thoughtbot.com/neat/)
*   [少框架： http](http://lessframework.com/) ://lessframework.com/
*   骨架：[http ://www.getskeleton.com/](http://www.getskeleton.com/)

还有很多其他的。希望这应该使您走上正确的道路。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T07:17:31.367

大多数桌面/小型设备浏览器（客户端）以`request header`.

服务器应该认识到这一点。如果它可以识别，它可以将请求作为正常流程处理并委托给`proper/expected view`.

一个示例流程可以是这样的：

客户端 - Deice：Android - 分辨率：AxY - URL：`URL`要获取的资源

服务器： - 我可以识别设备 - 我正在为该设备准备相关 UI（html/jsp/php 等） - 我有给定的资源`URL` - 我正在准备请求并发送它

* * *

**另外** 参考`Sterlok`答案。那东西可以指导你准备`view`。

然而，最重要的部分是识别`device (actually client)`并做出相应的反应。

例如，`Java EE`基于 Web 应用程序可以使用`Request Filter`.

# android - 定制微调器

> ID：12275558
> 
> 赞同：0
> 
> 时间：2012-09-05T06:22:27.670
> 
> 标签：android

我正在制作一个项目，我需要制作一个自定义微调器，其中每个选项都包含一个图像视图和一个文本框。我是安卓新手。任何想法？示例代码将有很大帮助。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:28:40.157

是的，您可以使用`Custom Adapter`

**测试.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:orientation="horizontal">

    <ImageView
     android:id="@+id/icon"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:src="@drawable/icon"
     android:layout_marginLeft="15dip" />

    <TextView 
     android:id="@+id/weekofday"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_marginLeft="5dip" 
     android:layout_marginTop="10dip"
     android:text="Sunday"
     android:textColor="#000000"/>

</LinearLayout> 
```

**CustomSpinner.java**

```
public class CustomSpinner extends Activity {

    String[] DayOfWeek = {"Sunday", "Monday", "Tuesday", 
            "Wednesday", "Thursday", "Friday", "Saturday"};

    Integer[] image = {
                R.drawable.image1,
                R.drawable.image2,
                R.drawable.image3,
                R.drawable.image4,
                R.drawable.image5,
                R.drawable.image6,
                R.drawable.image7 };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main1);

        Spinner mySpinner = (Spinner)findViewById(R.id.spinner);
        mySpinner.setAdapter(new MyCustomAdapter(CustomSpinner.this, R.layout.test, DayOfWeek,image)); 
    }

    public class MyCustomAdapter extends ArrayAdapter<String>{

        public MyCustomAdapter(Context context, int textViewResourceId,
                String[] objects, Integer[] image) {
            super(context, textViewResourceId, objects);
            // TODO Auto-generated constructor stub
        }

        @Override
        public View getDropDownView(int position, View convertView,
                ViewGroup parent) {
            // TODO Auto-generated method stub
            return getCustomView(position, convertView, parent);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            return getCustomView(position, convertView, parent);
        }

        public View getCustomView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            //return super.getView(position, convertView, parent);

            LayoutInflater inflater=getLayoutInflater();
            View row=inflater.inflate(R.layout.test, parent, false);
            TextView label=(TextView)row.findViewById(R.id.weekofday);
            label.setText(DayOfWeek[position]);

            ImageView icon=(ImageView)row.findViewById(R.id.icon);
            icon.setImageResource(image[position]);
            return row;
        }    
    }
} 
```

将一些图像放在您的可绘制文件夹中。看看[这里](http://venkateshsblog-android.blogspot.in/2011/04/custom-spinner-with-text-and-icons.html)还有[这个](http://www.google.co.in/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#hl=en&sclient=psy-ab&q=android%20text%20with%20image%20in%20spinner&oq=android%20text%20with%20image%20in%20spinner&gs_l=hp.3..33i29.54.84410.0.84764.52.44.0.1.1.3.801.14076.2-20j6j6j4j2.38.0...0.0...1c.JrhSLCZ_HwA&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=9b3ab69b02d40f6&ion=1&biw=1440&bih=785)

# html - 100％高度/宽度网页上的神秘右边距

> ID：12275559
> 
> 赞同：3
> 
> 时间：2012-09-05T06:22:27.797
> 
> 标签：html, css, margin

我正在制作离线 SPA。尽管我已经设置了两者，`html`但页面右侧有一个神秘的边距，导致水平滚动条出现。我试图调试但实际上没有得到任何有用的信息，除了 FF 调试器在标记中突出显示此边距。我已经在[这里](http://preahkumpii.com/test-site/index.html)上传了网站。请记住，加载需要一段时间，b/c 它旨在打包以供离线使用。任何帮助表示赞赏。谢谢。`body``100%``<html>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:25:22.810

水平滚动条是由右上角输入框上的`width:100%`和/或引起的。`padding: 0 20px`

大约在 CSS 文件中的第 94 行。

# wif - Azure 网站中的 WIF

> ID：12275560
> 
> 赞同：0
> 
> 时间：2012-09-05T06:22:28.387
> 
> 标签：wif, azure-web-app-service

我想在 Azure 网站中使用 Windows 身份基础。我注意到 Azure 网站支持 .Net 4.0 而不是 .Net 4.5。有谁知道是否有办法在 Azure 网站中使用 WIF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:19:40.040

Vittorio Bertocci（WIF 先生本人）刚刚就这个话题发表了一篇博文：

[http://blogs.msdn.com/b/vbertocci/archive/2013/01/28/running-wif-based-apps-in-windows-azure-web-sites.aspx](http://blogs.msdn.com/b/vbertocci/archive/2013/01/28/running-wif-based-apps-in-windows-azure-web-sites.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:50:53.027

这将在本月底左右推出。请参阅[http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/3fab0f32-23c9-4122-9ece-8c3edbadde47](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/3fab0f32-23c9-4122-9ece-8c3edbadde47)了解更多详细信息，或在几周后查看。

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T19:05:17.293

WIF 1.0 在 Azure 中运行良好 - 请参阅[如何使用 Windows Azure Active Directory - ASP.NET 应用程序实现单点登录](http://www.windowsazure.com/en-us/develop/net/how-to-guides/web-sso/)。

或者你去 Azure ACS 路线 - Facebook 等。

您是在问 - “有人知道是否有办法在 Azure 网站中使用 WIF **4.5 ”吗？**

# android - 在 itemselectedListener 上不使用自定义列表适配器

> ID：12275561
> 
> 赞同：0
> 
> 时间：2012-09-05T06:22:44.267
> 
> 标签：android, android-listview

当我单击列表视图项目时没有任何反应这里是代码

```
@SuppressLint("ParserError")
public class DinerList extends Activity implements Comparator<CanteenTagEntry>,
        OnItemSelectedListener {
    List<CanteenTagEntry> dinerlist;
    int size;
    int[] arr;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.diner_list);
        ListView listView1 = (ListView) findViewById(R.id.list);
        Context con = getApplicationContext();
        DatabaseHelper dbHelper = new DatabaseHelper(con);
        ICanteenLogRepository repository = dbHelper.getCanteenLogRepository();

        try {
            dinerlist = repository.total();
            Collections.sort(dinerlist, new DinerList());
            Collections.sort(dinerlist, new sortbyuser());
            Collections.sort(dinerlist, new sortbycompany());

            size = dinerlist.size();
            arr = new int[size];
            for (int i = 0; i < size; i++) {
                CanteenTagEntry tagentry = dinerlist.get(i);
                int b = tagentry.getId();
                System.out.print(b);
                arr[i] = tagentry.getId();
                System.out.print(arr[i]);
            }

        } catch (SQLException e) {
            Log.d("DinerList", "Unable to retrieve diner list", e);
        }
        CanteenAdapter adapter = new CanteenAdapter(this,
                R.layout.listview_item_row,
                (ArrayList<CanteenTagEntry>) dinerlist);
        listView1.setAdapter(adapter);
    }

    public class CanteenAdapter extends ArrayAdapter<CanteenTagEntry> {

        Context context;
        int layoutResourceId;
        ArrayList<CanteenTagEntry> data = (ArrayList<CanteenTagEntry>) dinerlist;

        public CanteenAdapter(Context context, int layoutResourceId,
                ArrayList<CanteenTagEntry> data) {
            super(context, layoutResourceId, dinerlist);
            this.layoutResourceId = layoutResourceId;
            this.context = context;
            this.data = (ArrayList<CanteenTagEntry>) dinerlist;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View row = convertView;
            RouteHolder holder = null;
            if (row == null) {
                LayoutInflater inflater = ((Activity) context)
                        .getLayoutInflater();
                row = inflater.inflate(layoutResourceId, parent, false);
                holder = new RouteHolder();
                holder.txtName1 = (TextView) row.findViewById(R.id.Title1);
                holder.txtName2 = (TextView) row.findViewById(R.id.Title2);
                holder.txtName3 = (TextView) row.findViewById(R.id.Title3);

                row.setTag(holder);
            } else {
                holder = (RouteHolder) row.getTag();
            }
            CanteenTagEntry tagentry = data.get(position);
            String idcolor = tagentry.getUser().getIdcolor().toString();

            try {
                holder.txtName1.setTextColor(Color.parseColor(idcolor));
                holder.txtName2.setTextColor(Color.parseColor(idcolor));
                holder.txtName3.setTextColor(Color.parseColor(idcolor));
            } catch (Exception e) {
                holder.txtName1.setTextColor(Color.GRAY);
                holder.txtName2.setTextColor(Color.GRAY);
                holder.txtName3.setTextColor(Color.GRAY);
            }

            holder.txtName1.setText(tagentry.getUser().getUserType().getName());
            holder.txtName2.setText(tagentry.getUser().getCompany().getName());
            holder.txtName3.setText(tagentry.getUser().getFirstName());

            return row;
        }

        class RouteHolder {
            TextView txtName1;
            TextView txtName2;
            TextView txtName3;
            TextView txtName4;

        }

    }

    @Override
    public int compare(CanteenTagEntry o1, CanteenTagEntry o2) {
        return o1.getUser().getFirstName()
                .compareTo(o2.getUser().getFirstName());

    }

    public class sortbyuser implements Comparator<CanteenTagEntry> {

        @Override
        public int compare(CanteenTagEntry lhs, CanteenTagEntry rhs) {
            return lhs.getUser().getUserType().getName()
                    .compareTo(rhs.getUser().getUserType().getName());

        }

    }

    public class sortbycompany implements Comparator<CanteenTagEntry> {

        @Override
        public int compare(CanteenTagEntry lhs, CanteenTagEntry rhs) {
            return lhs.getUser().getCompany().getName()
                    .compareTo(rhs.getUser().getCompany().getName());

        }

    }

    @Override
    public void onItemSelected(AdapterView<?> l, View v, int position,
            long ide) {
        super.onListItemClick(l, v, position, ide);
        CanteenTagEntry tagentry = null;
        int pos = position;
        int id = arr[pos];
        int userid = 0;
        Context con = getApplicationContext();
        DatabaseHelper dbHelper = new DatabaseHelper(con);
        ICanteenLogRepository repository = dbHelper.getCanteenLogRepository();
        try {
            tagentry = repository.Retrieve(id);
            userid = tagentry.getUser().getId();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            StartFood food = new StartFood(id, userid);

        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:37:22.623

我觉得你需要用

```
listview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub

               // do your work here 

        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:35:39.483

尝试按照以下方式[`OnItemClickListener`](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)为您设置`listView1`并尝试运行。

```
listView1.setOnItemClickListener(new OnItemClickListener() 
{
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id)
    {
        CanteenTagEntry tagentry = null;
        int pos = position;
        int id = arr[pos];
        int userid = 0;
        Context con = getApplicationContext();
        DatabaseHelper dbHelper = new DatabaseHelper(con);
        ICanteenLogRepository repository = dbHelper.getCanteenLogRepository();

        try 
        {
            tagentry = repository.Retrieve(id);
            userid = tagentry.getUser().getId();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try 
        {
            StartFood food = new StartFood(id, userid);
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:40:58.423

在返回**行**之前将侦听器设置为这样的行。

```
row.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                                      // your code  
                }
            }); 
```

# c# - FxCop 无法解析引用

> ID：12275570
> 
> 赞同：5
> 
> 时间：2012-09-05T06:23:03.633
> 
> 标签：c#, hudson, fxcop, fxcopcmd

我正在使用 C# 开发项目。现在我已经设置了一个 Hudson 服务器，并在服务器上安装了 .Net 4 Framework 和 Windows SDK 7.1。

该项目成功构建，但是当我启动 FxCop 时：

```
"C:\Program Files (x86)\Microsoft FxCop 1.35\fxcopcmd.exe" /file:CommonServiceTool\bin\Release /out:fxcop-result.xml 
```

它加载所有 .dll 规则文件，然后发生以下异常：

```
Using system files at: C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319.
Could not resolve reference to PresentationFramework.
Could not resolve reference to PresentationCore.
Could not resolve reference to WindowsBase.
12 exceptions occurred while loading Project1.
   00) Could not resolve type reference: [PresentationFramework]System.Windows.StartupEventArgs.
   01) Could not resolve type reference: [PresentationFramework]System.Windows.Window.
   02) Could not resolve type reference: [PresentationFramework]System.Windows.Controls.HeaderedContentControl.
   03) Could not resolve type reference: [PresentationCore]System.Windows.Input.ICommand.
   04) Could not resolve member reference: System.Windows.ThemeInfoAttribute::.ctor.

... and so on... 
```

我在项目中使用 WPF，我认为 FxCop 找不到 WPF 库。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T19:11:45.683

您是直接运行 fxcopcmd.exe 还是通过插件运行？如果是前者，请尝试添加`/gac`命令行开关。如果您使用的是中间跑步者，那是什么？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T06:50:39.160

确保项目 -> 选项... - 拼写和分析 -> “搜索全局程序集缓存以查找缺失的引用”（根据[FxCop 和 GAC Madness](https://stackoverflow.com/questions/848617/fxcop-and-gac-madness)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-21T07:34:25.473

我对 fxcopcmd V12 也有类似的问题。我能够通过明确添加来解决它

```
/reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\WindowsBase.dll" 
```

请参阅：[WPF 程序集上的 FxCop 引擎异常](http://social.msdn.microsoft.com/Forums/vstudio/en-US/502db2e4-ad76-4bd7-8103-2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T11:11:56.783

好，我知道了！

FxCop 1.35 不适用于 WPF。现在我已经安装了 FxCop 10.0。现在它起作用了。但是谢谢大家的帮助！

# javascript - 如何在 html5 画布中绘制圆圈作为单独的画布？

> ID：12275572
> 
> 赞同：1
> 
> 时间：2012-09-05T06:23:05.087
> 
> 标签：javascript, html, html5-canvas

我正在开发一个 HTML5 项目。在那，我在画圈时遇到了问题。我有加载图像的画布。当我要画一个圆圈时，我正在创建一个新的画布（动态），我想在里面画一个圆圈。但是 Circle 没有正确绘制。我怎样才能摆脱这个问题？

**编辑：-**

绘图代码如下：-

```
getMouse(e);
x2=mx; y2=my;
var width=x2-x1;
var height=y2-y1;
annCanvas.style.position = "absolute";

annCanvas.style.left=""+x1+"px";
annCanvas.style.top=""+y1+"px";
annCanvas.width=width+4;
annCanvas.height=height+4;
annCanvas.style.zIndex="100000";

document.getElementById("canvas").appendChild(annCanvas);

var kappa = .5522848;
 ox = ((width) / 2) * kappa, // control point offset horizontal
 oy = ((height) / 2) * kappa, // control point offset vertical
 xe =(width),           // x-end
 ye =(height),           // y-end
 xm = (width)/ 2,       // x-middle
 ym =  (height) / 2;       // y-middle
 annCanvasContext=annCanvas.getContext('2d');
 annCanvasContext.beginPath();
 annCanvasContext.lineWidth=4;
 annCanvasContext.moveTo(2, ym);
 annCanvasContext.bezierCurveTo(2, ym - oy, xm - ox, 2, xm, 2);
 annCanvasContext.bezierCurveTo(xm + ox, 2, xe, ym - oy, xe, ym);
 annCanvasContext.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);
 annCanvasContext.bezierCurveTo(xm - ox, ye, 2, ym + oy, 2, ym);
 annCanvasContext.closePath();
 annCanvasContext.stroke(); 
```

如果我将 lineWidth 更改为 10 或 15，它会得到不同的形状而不是圆形。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:16:38.977

你可以试试这段代码：

```
var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");
ctx.beginPath();
ctx.arc(95,50,40,0,2*Math.PI);
ctx.stroke();
```

```
<canvas id="myCanvas" width="200" height="100" style="border:1px solid #d3d3d3;">
  Your browser does not support the HTML5 canvas tag.
</canvas>
```

# java - XA 事务示例 Weblogic

> ID：12275573
> 
> 赞同：2
> 
> 时间：2012-09-05T06:23:24.403
> 
> 标签：java, jakarta-ee, transactions, xa, transactionmanager

我正在使用 Weblogic 11g。

在某些时候，我的 Java EE 应用程序必须在不同的服务器上调用三个远程 EJB 方法。

我的代码片段：

```
 Hashtable<String, Object> firstServerEnv = new Hashtable<String, Object>();
    firstServerEnv.put(Context.INITIAL_CONTEXT_FACTORY, "weblogic.jndi.WLInitialContextFactory");
    firstServerEnv.put(Context.PROVIDER_URL, "t3://myFirstServer:7101");
    final Context firstServerContext = new InitialContext(firstServerEnv);
    UserTransaction firstServerTransaction = (UserTransaction)firstServerContext.lookup("javax.transaction.UserTransaction");
    // lookup for first EJB

    Hashtable<String, Object> secondServerEnv = new Hashtable<String, Object>();
    secondServerEnv.put(Context.INITIAL_CONTEXT_FACTORY, "weblogic.jndi.WLInitialContextFactory");
    secondServerEnv.put(Context.PROVIDER_URL, "t3://mySecondServer:7101");
    final Context secondServerContext = new InitialContext(secondServerEnv);
    UserTransaction secondServerTransaction = (UserTransaction)secondServerContext.lookup("javax.transaction.UserTransaction");
    // lookup for second EJB

    Hashtable<String, Object> thirdServerEnv = new Hashtable<String, Object>();
    thirdServerEnv.put(Context.INITIAL_CONTEXT_FACTORY, "weblogic.jndi.WLInitialContextFactory");
    thirdServerEnv.put(Context.PROVIDER_URL, "t3://myThirdServer:7101");
    final Context thirdServerContext = new InitialContext(thirdServerEnv);
    UserTransaction thirdServerTransaction = (UserTransaction)thirdServerContext.lookup("javax.transaction.UserTransaction");
    // lookup for third EJB

    // Start global transaction
    // join firstServerTransaction, secondServerTransaction and thirdServerTransaction into one and begin transaction
    // execute methods from first EJB
    // execute methods from second EJB
    // execute methods from third EJB
    // Commit or rollback previously joined global transaction 
```

如何执行全局事务开始和提交/回滚。

我尝试过类似`TransactionManager tm = (TransactionManager)new InitialContext().lookup("javax.transaction.TransactionManager")`但不知道如何判断`tm`哪些交易参与其中？

有任何想法吗？

# performance - 可用的 Windows Azure 内部带宽是多少？

> ID：12275574
> 
> 赞同：0
> 
> 时间：2012-09-05T06:23:37.330
> 
> 标签：performance, azure, azure-sql-database

如果我有一个运行 ASP.NET 应用程序的 Web 角色访问同一可用区（例如美国东部）中的 Azure SQL 数据库，那么两者之间的连接带宽是多少？100MB？1Gbs？我找不到任何关于此的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:51:47.287

服务器实例的 I/O 容量取决于实例的大小。1 个核心 / 100Mbps 的 IO。

# jquery - jqgrid自定义列行

> ID：12275576
> 
> 赞同：0
> 
> 时间：2012-09-05T06:23:42.870
> 
> 标签：jquery, jqgrid, jqgrid-formatter

我正在使用 Jqgrid，并且我有一个自定义列，它在每一行中显示按钮。下面是我使用格式化程序选项的代码，

```
{ label: 'Custom Button', name: 'customBtn', width: 50, editable:true,
              formatter:actionButtonFormatter
}, 
```

按钮在网格行中显示正常（仅对某些行显示），但是在单击底部导航工具栏上的添加和编辑按钮时，使用添加和编辑表单进行编辑，这个自定义字段甚至显示为文本框尽管我已将可编辑视为真实。有什么方法可以在添加和编辑表单中显示自定义列的按钮吗？提前致谢。

# serialization - asp.net web api中特定类型的自定义Xml序列化器

> ID：12275582
> 
> 赞同：1
> 
> 时间：2012-09-05T06:24:03.783
> 
> 标签：serialization, xml-serialization, asp.net-web-api, .net-4.5

我在 asp.net web api 中。在 API 方法中，我正在调用一个返回 XML 响应的外部 Web 服务。我不想反序列化它。我宁愿将它按原样发送给客户。最初，我将响应存储在`XDocument`对象中，但是当我的客户端指定`application/xml`为接受标头时，我看到以下异常

```
Type 'System.Xml.Linq.XDeclaration' cannot be serialized. Consider marking it with the DataContractAttribute attribute, and marking all of its members you want serialized with the DataMemberAttribute attribute. If the type is a collection, consider marking it with the CollectionDataContractAttribute. See the Microsoft .NET Framework documentation for other supported types. 
```

我该如何解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T07:02:41.477

伟大的 Q，我简单地在 api 成员中写下你的问题使用：

```
 [HttpGet]
 [ActionName("Books")]
 public HttpResponseMessage MyBook()
    {
        var request = new HttpResponseMessage(HttpStatusCode.OK);
        var doc = XDocument.Parse(@"<books><book><author>MS</author><name>ASP.NET</name></book></books>");
        request.Content = new StringContent(doc.ToString(), Encoding.UTF8, "application/xml");

        return request;
    } 
```

试试这个会员来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:09:32.860

您应该能够使用一些控制器特定的设置。有关示例，请参见[此处](http://blogs.msdn.com/b/jmstall/archive/2012/05/11/per-controller-configuration-in-webapi.aspx)

# c++ - 如何将整数值传递给 (const char *str) 函数参数？

> ID：12275589
> 
> 赞同：0
> 
> 时间：2012-09-05T06:24:33.740
> 
> 标签：c++

> **可能重复：**
> [如何在 C++ 中将数字转换为字符串，反之亦然](https://stackoverflow.com/questions/5290089/how-to-convert-a-number-to-string-and-vice-versa-in-c)
> [如何从 int 转换为 char*？](https://stackoverflow.com/questions/10847237/how-to-convert-from-int-to-char)

我得到一个整数的用户输入，我需要将它们传递给一个参数 - Output(char const* str); 这是一个类构造函数。你能告诉我我该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T06:27:38.773

在 C++11 中：

```
dodgy_function(std::to_string(value).c_str()); 
```

在旧语言版本中：

```
std::ostringstream ss;
ss << value;
dodgy_function(ss.str().c_str());

// or
dodgy_function(boost::lexical_cast<std::string>(value).c_str());

// or in special circumstances
char buffer[i_hope_this_is_big_enough];
if (std::snprintf(buffer, sizeof buffer, "%d", value) < sizeof buffer) {
    dodgy_function(buffer);
} else {
    // The buffer was too small - deal with it
} 
```

# c# - 如何将我自己的参数添加到由生成的 http get 请求中 在 ASP .NET MVC 中？

> ID：12275590
> 
> 赞同：1
> 
> 时间：2012-09-05T06:24:35.903
> 
> 标签：c#, asp.net-mvc, forms, razor, http-get

我认为有一个表格：

```
@using(Html.BeginForm("Details", "Category", FormMethod.Get))
{
    <input type="text" name="param1" />
    <input type="submit" value="OK" />
} 
```

此表单在带有参数的页面上，`~/category/details?view=list`我从路由查询字符串中获取视图参数的值，并希望将其传递给我的表单生成的请求。我想要请求查询字符串`?param1=inputedText&view=list`而不是`?param1=inputedText`. 如果不向我的表单添加隐藏输入并为其设置`view`值，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:18:12.887

```
public ActionResult Details(string view )
{
    ViewBag.view = view ;
       return View();
}

public ActionResult Details(string view ,string param1)
{
    ViewBag.view = view ;
       return View();
} 
```

> 这个方法可以帮助你

```
@using(Html.BeginForm("Details", "Category", FormMethod.Get))
{ 
    <input type="Hidden" name="view" value=ViewBag.view >
    <input type="text" name="param1" />
    <input type="submit" value="OK" />
} 
```

# android - Android 1.5 上的 FragmentActivity

> ID：12275592
> 
> 赞同：0
> 
> 时间：2012-09-05T06:24:47.580
> 
> 标签：android, compatibility, fragment

我在我的库中包含了 android.support.v4.jar，但仍然与 1.5 不兼容。我怎样才能实现它？

日志：E/AndroidRuntime(800)：java.lang.VerifyError：android.support.v4.app.FragmentActivity

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:27:32.847

其支持的**最低 API 级别：4**。**安卓 1.6**

[在此处](http://developer.android.com/tools/extras/support-library.html)查看更多详细信息。

在此处查看 Android 版本的市场份额。

```
Android SDK version table for Septmber 4 2012.

Android SDK version      Current market share   
1.5 (Cupcake)               0.1 %       
1.6 (Donut)                 0.1 %       
2.1 (Eclair)                4.0 %   
2.2 (Froyo)                 13.1 %      
2.3 (Gingerbread)           49.7 %      
3.0-3.2 (Honeycomb)         1.8 %       
4.0.x (ICS)                 28.5 %      
4.1 (Jelly Bean)            2.6 % 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T06:33:37.353

[该文档](http://developer.android.com/tools/extras/support-library.html)指出：

> *支持的最低 API 级别*：**4**

API 4 当然是 Android 1.6 Donut。还有一个仅与 v13 (Honeycomb 3.2) 及更高版本兼容的支持库。

在这个时候几乎没有必要支持 Android 1.5，这绝对是一文不值。截至撰写本文时，[只有 0.2%的设备运行它（即每 1,000 次下载中有 2 台）。](http://developer.android.com/about/dashboards/index.html)这 0.2% 的人口可能主要是 A) 开发人员和 B) 不使用大量应用程序的人，因为他们更有可能坚持使用旧技术。

所以，你有三个选择：

1.  将您的支持提高`minSdkVersion`到 4，并取消对 3 (1.5) 的支持。
2.  使用[版本检查](https://stackoverflow.com/questions/3093365/android-get-version-of-system)来查看版本是否为 4+。（我不推荐这个。它变得非常难以维护。）
3.  不要使用支持库中的任何内容。（再一次，这似乎很愚蠢，因为失去 2/1,000 用户而放弃功能。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T06:35:49.377

Android 1.5 不支持片段。使用 Fragments 的最低 API 级别为 4。

# iphone - 如何使用 Core Plot 创建正弦波？

> ID：12275600
> 
> 赞同：0
> 
> 时间：2012-09-05T06:25:22.837
> 
> 标签：iphone, ios, core-plot, waveform, trigonometry

我可以在我的 iPhone 应用程序中使用 Core Plot 创建波形，但它不像 Sine Wave。 [这](https://www.dropbox.com/s/u9qztmaq6mzmhkn/Screen%20Shot%202012-09-05%20at%2011.28.20%20AM.png)是您可以看到如何生成波的链接，但我想以正弦波形式显示这些波。我应该遵循哪种算法？请建议！

（因为我只有 1 个声望，所以我不能添加照片，所以分享了一个链接）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:14:59.157

您将需要获得正确的 x 和 y 坐标。想想，那应该给你正弦波。

如果我们尝试实现简单的正弦公式 -

y(t) = A*sin(w*t + 相位)

> ```
> float y; for(float x=rect.origin.x; x < rect.size.width; x++) {
> y = ((rect.size.height/4) * sin(0.3 * x + 0));
> NSLog(@"x = %f \t y = %f \n",x,y); } 
> ```

尝试使用这些值，并告诉我它是如何产生的。

# ibatis - 映射器接口是否必要

> ID：12275601
> 
> 赞同：0
> 
> 时间：2012-09-05T06:25:24.980
> 
> 标签：ibatis, mybatis

我是 mybatis 的新手，并且遵循 mybatis3-user-guide.pdf。

我设置了我的第一个应用程序。

但是我发现我并不完全了解映射器接口。

到目前为止，这是我的应用程序的所有配置（以模型用户为例）：

mybatis config.xml：

```
<configuration>
    <typeAliases>
        <typeAlias alias="User" type="com.king.mapper.User" />
    </typeAliases>
    <mappers>
        <mapper resource="com/king/mapper/UserMapper.xml" />
    </mappers>
</configuration> 
```

用户映射器.xml：

```
<mapper namespace="com.king.mapper.UserMapper">
    <select id="selectById" parameterType="int" resultMap="userMap">
        select * from users where id = #{id}
    </select>
    <select id="selectAll" resultType="hashmap">
        select * from users order by created_at desc
    </select>

    <insert id="insert" parameterType="User" useGeneratedKeys="true" keyProperty="id">
        insert into users (name,created_at,updated_at) values (#{name},current_timestamp,current_timestamp)
    </insert>
    <update id="update" parameterType="User">
        update users set name = #{name},updated_at=current_timestamp where id = #{id}
    </update>
    <delete id="delete" parameterType="int">
        delete from users where id = #{id}
    </delete>

    <resultMap id="userMap" type="User">
        <result property="createDate" column="created_at" />
        <result property="updateDate" column="updated_at" />
    </resultMap>
</mapper> 
```

道：

```
public abstract class AbstractSimpleDaoImpl<T> extends SqlSessionDaoSupport implements IDao<T> {
    @Override
    public T query(int id) {
        return getSqlSession().selectOne(getMapperNamespace() + ".selectById", id);
    }
    @Override
    public List<T> list() {
        return getSqlSession().selectList(getMapperNamespace() + ".selectAll");
    }
    @Override
    public int add(T entity) {
        return getSqlSession().insert(getMapperNamespace() + ".insert", entity);
    }
    @Override
    public int update(T entity) {
        return getSqlSession().update(getMapperNamespace() + ".update", entity);
    }
    @Override
    public void delete(T entity) {
        getSqlSession().delete(getMapperNamespace() + ".delete", entity);
    }
    protected abstract String getMapperNamespace();
} 
```

用户道：

```
public class UserDao extends AbstractSimpleDaoImpl<User> {
    private static String pack = "com.king.mapper.UserMapper"; 
    @Override
    protected String getMapperNamespace() {
        return pack;
    }
} 
```

有效。但是我发现我的mybatis示例会引用mapper接口。

看来我必须在上面的示例中创建一个名为 UserMapper 的接口。

但我想知道是否有必要？我什么时候必须使用它？

顺便说一句，在我看来，我发现映射器接口所做的就像 dao 所做的一样。由于 dao 和 interface 可能有这么多同名的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:59:51.500

您可以创建映射器接口 UserMapper 并避免在您的 Dao 对象上调用方法 getSqlSession()...。因此，使用映射器接口，您的 xml 配置保持不变，但您可以完全避免 Dao 对象。只需像这样定义接口：

```
 public interface UserMapper {

    public List<User> selectAll();

    public User selectById(@Param("id") int id);

    // rest is ommited
  } 
```

方法的名称必须与映射器文件中的 select/update/insert/detele 的 id 匹配。就是这样。

# postgresql - Postgresql COPY 命令给出权限被拒绝错误

> ID：12275602
> 
> 赞同：3
> 
> 时间：2012-09-05T06:25:36.523
> 
> 标签：postgresql, copy, permission-denied

我正在尝试将`COPY`文件放入 PostgreSQL 中的表中。表所有者是`postgres`，文件所有者是`postgres`.

该文件位于`/tmp`.

我仍然收到错误消息：

> 无法打开文件“/tmp/file”进行阅读：权限被拒绝

我不明白我做错了什么，因为我发现的所有帖子都说如果我有文件`/tmp`并且所有者是，`postgres`那么`COPY`命令应该可以工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T09:05:46.540

猜测：您使用的是 Fedora、Red Hat Enterprise Linux、CentOS、Scientific Linux 或其他默认启用[SELinux的发行版之一。](http://selinuxproject.org/page/Main_Page)

在您的特定操作系统/版本上，PostgreSQL 的 SELinux 策略不允许服务器读取 PostgreSQL 数据目录之外的文件，或者该文件是由目标策略涵盖的服务创建的，因此它具有 PostgreSQL 不是的标签允许读取。

您可以通过以 root 身份运行来确认这是否是问题所在：

```
setenforce 0 
```

然后重新测试。跑：

```
setenforce 1 
```

测试后重新启用 SELinux。[`setenforce`](http://linux.die.net/man/8/setenforce)不是永久性的；无论如何，SELinux 将在重新启动时自动重新启用。永久禁用 SELinux 通常不是解决此类问题的好方法；如果您确认问题是 SELinux，则可以进一步探索。

* * *

由于您没有指定您正在使用的操作系统或版本、PostgreSQL 版本、您正在运行的确切命令、`ls -al`文件、`\d+`表格等，因此很难提供更多细节，或者知道这是否更多比猜测。尝试更新您的答案以包括所有这些和`ls --lcontext`文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-18T22:31:12.903

> `COPY`使用文件名指示 PostgreSQL 服务器直接读取或写入文件。该文件必须可由 PostgreSQL 用户（服务器运行的用户 ID）访问，并且必须从服务器的角度指定名称。（来源：[postgresql 文档](http://www.postgresql.org/docs/9.4/static/sql-copy.html)）

因此，运行 postgresql 服务器的 unix 用户（即不是您的用户！）应该可以读取（或写入）该文件。可以肯定的是，你可以尝试运行 `sudo -u postgres head /tmp/test.csv`（假设你被允许使用`sudo`并且假设数据库用户是postgres）。

如果失败，则可能是与 SELinux 相关的问题（如 Craig Ringer 所述）。在 Red Hat/Fedora/CentOS、Scientific Linux、Debian 和其他人使用的最常见的 SELinux 策略（“目标”参考策略）下...... postgresql 服务器进程受到限制：它只能读取/写入几种文件类型.

`/var/log/audit/audit.log`由于 donaudit 规则，拒绝可能不会记录在 auditd 的日志文件 ( ) 中。所以通常的 SELinux 快速测试适用，例如：通过运行阻止 SELinux 限制任何进程`getenforce;setengorce 0;getenforce`，然后测试 postgresql 的`COPY`. 然后通过运行重新激活SELinux `setenforce 1`（这个命令修改的是运行状态，不是配置文件，所以SELinux在重启后会激活（Enforcing）。

解决此问题的正确方法是更改​​要加载的文件的 SELinux 上下文。快速破解是运行：

```
chcon -t postgresql_tmp_t /tmp/a.csv 
```

但是，如果重新标记 hte 文件系统或创建新文件，则此文件标记将无法保留。您需要创建一个带有 SELinux 文件上下文映射的目录：

```
which semanage || yum install policycoreutils-python
semanage fcontext -a -t postgresql_tmp_t '/srv/psql_copydir(/.*)?'
mkdir /srv/psql_copydir
chmod 750 /srv/psql_copydir
chgrp postgres /srv/psql_copydir
restorecon -Rv /srv/psql_copydir
ls -Zd /srv/psql_copydir 
```

在该目录中创建的任何文件都应自动具有正确的文件上下文，以便 postgresql 服务器可以读取/写入它。

（要检查 postgres 正在运行的 SELinux 上下文，请运行`ps xaZ | grep "postmaste[r]" | grep -o "[a-z_]*_t"`，它应该打印`postgresql_t`。要列出`postgresql_t`可以写入的上下文类型，请使用`sesearch -s postgresql_t -A | grep ': file.*write'`. 该命令`sesearch`属于`setools-console`RPM 包）。

# jquery - 我需要为这个 jquery 制作动画

> ID：12275603
> 
> 赞同：0
> 
> 时间：2012-09-05T06:26:02.520
> 
> 标签：jquery, animation, onmouseover

我将如何为以下 javascript 代码设置动画？

```
$('img').bind('mouseenter mouseleave', function () {
    $(this).attr({
        src: $(this).attr('data-other-src'), 'data-other-src': $(this).attr('src'),
        'style': $(this).attr('data-other-style'), 'data-other-style': $(this).attr('style')
    });
}); 
```

它的作用是将一个图像切换为另一个图像并改变样式，我需要让它在 mouseenter/mouseleave 上淡入/淡出

谢谢你的帮助。

路易斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:05:26.617

似乎你做错了，相反你可以有两个元素并相应地隐藏和显示它们，并且 $.toggle() 方法本身带有动画属性。

# iphone - 另一个视图控制器 iPhone 上的登录窗口

> ID：12275609
> 
> 赞同：0
> 
> 时间：2012-09-05T06:26:35.297
> 
> 标签：iphone, ios, facebook, oauth, fbconnect

在 FBDialoge.m 文件中的 Facebook API 中，

我希望该登录窗口在另一个 VC 上打开，所以在 FBDialoge.m 文件中，

我正在更改此代码..

```
UIWindow* window = [[UIApplication sharedApplication].windows objectAtIndex:0];
[window addSubview:self];
[window addSubview:_modalBackgroundView]; 
```

到

```
 SettingsPopover *svp = [[SettingsPopover alloc] init];
[svp.view addSubview:self];
[svp.view addSubview:_modalBackgroundView]; 
```

但是那个登录窗口没有出现在 SettingsPopover 上，谁能告诉我我应该在这里做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:33:19.383

这里的 SettingsPopover *svp 实例是新实例，它将添加子视图，但在使用此新实例之前不会生效。你在哪里添加了参考我正在谈论的视图控制器中的 SettingsPopover。

我的意思是你需要 SettingsPopover 的原始参考才能通过添加子视图生效。

# c# - 无法在 ASP.NET 中动态地在 TableCell 中添加表格

> ID：12275614
> 
> 赞同：0
> 
> 时间：2012-09-05T06:26:57.533
> 
> 标签：c#, asp.net, html

我有一个在后端动态创建的表对象。

```
 Table tblNewHeaderModule = new Table();
 TableRow trModuleTitleRow = new TableRow();
 TableCell tcModuleTitleCell = new TableCell();

 trModuleTitleRow.Cells.Add(tcModuleTitleCell);            
 tblNewHeaderModule.Rows.Add(trModuleTitleRow); 
```

我正在尝试在 tcModuleTitleCell 表格单元格中添加一个新表格。

```
 Table tblContent = new Table();
 TableRow trContentHeader = new TableRow();

 TableCell tcContentTitle = new TableCell();           
 tcContentTitle.Text = "some text";

 trContentHeader.Cells.Add(tcContentTitle);
 tblContent.Rows.Add(trContentHeader);

 tcModuleTitleCell.Controls.Add(tblContent); 
```

代码运行时，我看不到子表。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T08:17:20.603

您创建了所有控件并忘记将主表添加到页面或页面中的任何其他容器：

```
Page.Controls.Add(tblNewHeaderModule); 
```

# javascript - 使用ajax加载页面的一部分

> ID：12275619
> 
> 赞同：0
> 
> 时间：2012-09-05T06:27:12.893
> 
> 标签：javascript, jquery, ajax

我想要使​​用 Ajax 加载的另一个页面的一部分。当您单击一个按钮时。我有一个页面。但是，我只想加载页面中的 .section div。当我点击按钮时。必须加载其他页面中的 .section 页面。

但是，我如何使用 ajax / jquery 加载。只有来自其他页面的 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:56:25.073

`load`您可以使用 jQuery 的方法在没有 ajax 的情况下执行此操作。这样，您可以将返回的内容加载到您的`#div_id`or`body`中。这是将内容加载到页面的示例`body`；

```
$("#your_button_id").click(function() {
  var myUrl = "yourpage.html #div_id_having_data";
  $("body").load(myUrl);
  return false;
}); 
```

查看[jQuery Ajax/load 文档](http://docs.jquery.com/Ajax/load)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:36:29.763

如果我正确理解了您的问题，那么这将是解决方案，

在按钮上单击加载整个页面（.section 应该被隐藏）。然后单击另一个按钮只需切换 .section div。

# php - 使用 xampp 服务器在 php 中发送电子邮件？

> ID：12275622
> 
> 赞同：2
> 
> 时间：2012-09-05T06:27:23.917
> 
> 标签：php, email, smtp

我想通过 xampp 服务器使用 php 发送电子邮件。这是我的代码

```
<?php
$to = 'atchibabu@solbaacken.com';
$subject = 'My Email';
$msg = "please find details";
// Make sure to escape quotes
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: My Site Name <atchibabu516@gmail.com.com>' . "\r\n";
if(mail($to, $subject, $msg, $headers))
{
echo "success";
}
else
{
echo "fail";
}
?> 
```

当我执行时，我收到“成功”消息，但我没有收到任何邮件，我还在等待一个小时，我不知道为什么会这样。一些建议使用 smtp 发送电子邮件，所以任何人都可以指导我如何使用 smtp。我正在使用 mac xampp，所以任何人都可以指导我，我可以在 mac xammp 中安装 smtp。

感谢提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:33:56.070

有几点需要注意：

你的发件人有 2 个`.com`，所以你的邮件进入[垃圾邮件](http://en.wikipedia.org/wiki/Email_spam)的概率几乎是 90%。

检查你的[phpinfo();](http://php.net/manual/en/function.phpinfo.php) 输出。sendmail_path 显示什么？你有安装那个软件吗？理想情况下，`/usr/sbin/sendmail -t -i`软件`sendmail`在 ubuntu 机器中。此外，在您的 phpinfo() 中，检查 SMTP 端口。也很有可能被防火墙或类似软件阻止，已经检查了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:38:51.543

您应该在 localhost 上配置您的电子邮件，
这是配置 smtp 的分步方法

1.  打开“php.ini”。您应该知道它的位置，因为它取决于您正在运行的特定服务器。
2.  在 php.ini 文件中搜索名为“SMTP”的属性。一般可以找到“SMTP=localhost”这一行。将 localhost 更改为 ISP 的 smtp 服务器名称。而且，还有另一个名为“smtp_port”的属性应该设置为 25。我在我的 php.ini 文件中设置了以下值。

    > ```
    >  SMTP = smtp.wlink.com.np  
    >     smtp_port = 25 
    > ```

3.  重新启动 apache 服务器，以便重新加载 PHP 模块和属性。

4.  现在尝试发送邮件

[参考链接在这里](http://roshanbh.com.np/2007/12/sending-e-mail-from-localhost-in-php-in-windows-environment.html)

**有用的链接**
[http://expertester.wordpress.com/2010/07/07/how-to-send-email-from-xampp-php/](http://expertester.wordpress.com/2010/07/07/how-to-send-email-from-xampp-php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:43:55.033

编辑您的 SMTP。如果您想在您的本地主机中测试它，请尝试为本地主机电子邮件安装 Mozilla Thunderbird 并使用来自 Xampp 的 Mercury 创建新帐户。

# iphone - Xcode 4.3 中的 SVN 问题

> ID：12275626
> 
> 赞同：0
> 
> 时间：2012-09-05T06:27:33.453
> 
> 标签：iphone, ios, xcode, ipad, svn

我已经在我的 xcode 中创建了一个 repo，我想要做的是导入我的项目。并承诺。我对这件事有点陌生，所以我不知道我做错了什么。

当我尝试导入我的项目时，出现了这个错误：

![在此处输入图像描述](../Images/99b27ea6f392a4625e34d484b0821da6.png)

希望可以有人帮帮我。

编辑：

![在此处输入图像描述](../Images/df9915c088c2f1b24f62d3ffc2a17c80.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:31:27.333

[手动导入](http://svnbook.red-bean.com/en/1.0/re12.html)并回答问题“(R)eject, accept (t)temporarily or accept (p)permanently？” 与“p”。

之后，您应该可以毫无问题地使用 XCode 前端来 svn（除了 XCode 带有一个相当旧的 svn 版本，它不能与较新的存储库一起使用）。

**编辑**

手动，我的意思是在终端内进行：

*   启动 Teriminal.app
*   切换到您的项目所在的目录：`cd [yourDir]`
*   将项目导入svn：`svn -m 'initial import' import [yourURL]`
*   用“p”回答“(R)eject, accept...”问题

**第二次编辑**

如果`svn`命令不在您的路径中（您将得到`command not found`），则必须使用完整路径，例如，`/Applications/Xcode.app/Contents/Developer/usr/bin/svn`而不是`svn`仅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T05:13:19.600

打开终端应用程序并输入以下命令

svn co '输入你的 svn 网址'

我在提示中看到了与 xcode 中相同的错误：

验证“ [https://mysvnserver.com:443](https://mysvnserver.com:443) ”的服务器证书时出错：
- 证书不是由受信任的机构颁发的。使用指纹手动验证证书！
证书信息：
- 主机名：*.svn.mysvnserver.com
....
....
....
R) 弹出、临时接受 (t) 或永久接受 (p)？现在在这里点击 p 永久接受（p），我可以通过提示访问存储库。接下来，我打开了 xcode 并打开了存储库——一切都完美无缺。

# python - App Engine 中实体的最佳大小是多少

> ID：12275628
> 
> 赞同：3
> 
> 时间：2012-09-05T06:27:39.463
> 
> 标签：python, google-app-engine, app-engine-ndb

在这里寻找内幕消息。

我有一个大的 MD5 哈希列表，我想存储在数据存储中。该列表足够大，我必须使用多个实体来存储它。这意味着我必须将我的列表分解成更小的列表并单独存储它们。

为此，我有一个简单的模型，它可以存储和检索任意长的哈希列表：

```
class HashList(nbd.Model):
  MAX_LENGTH = 100

  zlist = ndb.BlobProperty()
  keyword = ndb.StringProperty()
  index = ndb.IntegerProperty()

  @classproperty
  def StoreList(cls, keyword, long_list):
    entities = []
    index = 0
    for i in range(0, len(long_list), cls.MAX_LENGTH):
      zlist = zlib.compress('\n'.join(long_list[i:i+cls.MAX_LENGTH]))
      entities.append(cls(keyword=keyword, index=index, zlist=zlist))
      index += 1
    ndb.put_multi(entities)

  @classproperty
  def GetList(cls, keyword):
    unpack = lambda e: zlib.decompress(e.zlist).split()
    q = cls.query(cls.keyword == keyword).order(cls.index)
    return list(itertools.chain(*q.map(unpack))) 
```

假设我知道该列表有 1,000,000 个 MD5 哈希值。上面的代码将生成 10,000 个实体，每个实体的 zlist 属性的大小都小于 2k（基于我自己的简单测试）。

基本上，我想知道 MAX_LENGTH 的最佳值是多少。如果 MAX_LENGTH 变大，则实体大小会变大。我应该向每个实体推进 1MB（约 40,000 个 MD5 哈希）吗？100太小了吗？1000更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:35:50.907

你应该尽可能大 - 1Mb。我认为没有理由不这样做：这样可以最大限度地降低成本。

OTOH，由于您将 MD5 存储为 blob，也许您应该查看[blobstore](https://developers.google.com/appengine/docs/python/blobstore/overview#Writing_Files_to_the_Blobstore)。

**编辑：**

正如@Guido 隐含地指出的那样，GAE 是一个分布式系统，因此多个写入可以并行发生，因此可能会更快。

# c# - C# 如何从网络摄像头和麦克风录制视频或音频并上传到网络服务器

> ID：12275641
> 
> 赞同：0
> 
> 时间：2012-09-05T06:28:05.533
> 
> 标签：c#, silverlight, web-applications, audio, video

我正在寻找解决方案，从客户端的网络摄像头和麦克风录制视频或音频，并将它们上传到网络服务器或 Youtube 服务器。

不允许使用 Flash。那么还有其他解决方案吗？

我已经搜索了一段时间的类似主题，但发现它们没有帮助。

SilverLight 是一个可能的选择吗？如果是，如何使用 SL 做到这一点？

谢谢，

更新：有没有可以跨平台的解决方案，比如在 iPhone 和 iPad 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:47:07.497

我研究了这个问题，还有更多文章：

1)[在 dotnetcurry 文章](http://www.dotnetcurry.com/ShowArticle.aspx?ID=685)

2）[在codeproject文章](http://www.codeproject.com/Articles/44216/Silverlight-4-Capturing-Video-from-Default-Webcam)

或者这篇很棒的帖子，[来自 Silverlight 博客](http://blogs.msdn.com/b/innov8showcase/archive/2010/01/11/silverlight-4-how-to-capture-audio-and-video-from-a-web-cam.aspx)，尝试热门文章。

# php - 在php中使用正则表达式将每个前导和尾随空格替换为下划线

> ID：12275643
> 
> 赞同：3
> 
> 时间：2012-09-05T06:28:28.097
> 
> 标签：php, regex, preg-replace, whitespace

```
$string = "   Some string  ";
//the output should look like this
$output = "___Some string__"; 
```

所以每个前导和尾随空格都被下划线替换。

我在这里找到了 C 中的正[则表达式：在 c# 中使用正则表达式替换前导和尾随空格与下划线，](https://stackoverflow.com/questions/4545468/replace-only-leading-and-trailing-whitespace-with-underscore-using-regex-in-c-sh) 但我无法使其在 php 中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:33:00.337

您可以使用如下替换：

```
$output = preg_replace('/\G\s|\s(?=\s*$)/', '_', $string); 
```

`\G`在字符串的开头或上一个匹配的结尾匹配，`(?=\s*$)`如果以下仅是字符串末尾的空格，则匹配。所以这个表达式匹配每个空格并将它们替换为`_`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:29:33.673

您可以按照 Qtax 的建议将正则表达式与前瞻一起使用。使用 preg_replace_callback 的替代解决方案是： [http ://codepad.org/M5BpyU6k](http://codepad.org/M5BpyU6k)

```
<?php
$string = " Some string       ";
$output = preg_replace_callback("/^\s+|\s+$/","uScores",$string); /* Match leading
                                                                     or trailing whitespace */
echo $output;

function uScores($matches)
{
  return str_repeat("_",strlen($matches[0]));  /* replace matches with underscore string of same length */
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:45:03.507

这段代码应该可以工作。如果没有，请告诉我。

```
<?php 
$testString ="    Some test   ";

echo $testString.'<br/>';
for($i=0; $i < strlen($testString); ++$i){
  if($testString[$i]!=" ")
    break;
  else
    $testString[$i]="_";
}
$j=strlen($testString)-1;
for(; $j >=0; $j--){
  if($testString[$j]!=" ")
    break;
  else
    $testString[$j]="_";
}

echo $testString;

?> 
```

# java - EJB 事务相对于 Spring 事务的优势

> ID：12275644
> 
> 赞同：0
> 
> 时间：2012-09-05T06:28:30.593
> 
> 标签：java, jakarta-ee, ejb, ejb-3.0, ejb-3.1

EJB 事务管理相对于 Spring 事务管理的真正好处是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:31:49.337

最大的优点之一是在 Spring 中您需要自己配置事务管理，而在 EJB 中您只需放置注释即可。有关 EJB 与 Spring 事务的更多信息：

*   [Java 示例](http://www.java-samples.com/showtutorial.php?tutorialid=812)
*   [Java DZone](http://java.dzone.com/articles/transaction-management-ejb3-vs)

# neo4j - 如何在 neo4j 中创建插件？

> ID：12275645
> 
> 赞同：0
> 
> 时间：2012-09-05T06:28:36.997
> 
> 标签：neo4j

我通过以下步骤在 neo4j 中创建了插件：

1) 从 *.java 创建 *.class (用 Eclipse 编译)

2) 将 *.class 放入 .../org/neo4j/server/plugins/

3）创建*.jar（使用jar）

4) 将文本“org.neo4j.server.plugins.TransportRouter”放入 *.jar/META-INF/services/ 文件“org.neo4j.server.plugins.ServerPlugin”。

5) 将 *.jar 放入 .../neo4j/plugins/

6) 重启服务器

但是我的插件在“扩展”（“curl localhost:7474/db/data/”）中看不到。

为什么？

TIA，尤金妮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T23:38:13.990

为了他人的利益而添加此答案。我有类似的问题，但这不是代码的问题。在将 jar 复制到 plugins 目录之前，您需要确保 neo4j 服务器已停止。如果你在它停止之前复制它，然后重新启动它。不起作用。我在 1.8.2 和 1.9.2 上都试过了

为安装插件添加的简单步骤

1.  停止 neo4j 服务器
2.  将插件 jar 文件复制到 plugins 目录中。
3.  启动 neo4j 服务器

应该检测到您的插件。示例插件 GetAll 也可以重现此问题。希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:32:42.423

问题解决了。

这是我的班级初始化错误：

```
public TransportRouter( EmbeddedReadOnlyGraphDatabase graphdb ) { 
```

它被替换为：

```
public TransportRouter() { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T19:51:49.117

Eugeny你能列出jar的内容`jar tf your-jar.jar`和你的类的源代码吗？

您是否依赖任何其他库？

有关所需步骤，请参阅[Neo4j 手册。](http://docs.neo4j.org/chunked/snapshot/server-plugins.html)

# java - JavaDoc 不生成带句号的语句

> ID：12275647
> 
> 赞同：1
> 
> 时间：2012-09-05T06:28:56.407
> 
> 标签：java, javadoc

```
/**
 * for database operation.
 * main execute class is {@link org.test.toolkit.database.DefaultDbClient}
 *
 * @author  
 *
 */ 
```

不生成语句：主执行类是....

![生成的 JavaDoc 的屏幕截图](../Images/b4124c36011d8c3ee0a97663d1a5fea5.png)

```
/**
 * for database operation,
 * main execute class is {@link org.test.toolkit.database.DefaultDbClient}
 *
 * @author  
 *
 */ 
```

这会生成语句：main execute class is ....,

![重新解决JavaDoc的屏幕截图](../Images/6cd8e80d5a9417a4cc5ad2e4ffffffb4.png)

为什么？是 JavaDoc 错误还是 IDE 错误还是我的问题？唯一的区别是以`.`or结尾`,`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T06:41:38.080

JavaDoc 使用注释[的第一句](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html#firstsentence)作为摘要。一个句子以句号结尾`.`。

> 这句话在第一个句点后跟一个空格、制表符或行终止符结束，或者在第一个标签 [...] 处结束。

# android - 如何在webview中获取edittext的点击事件

> ID：12275653
> 
> 赞同：2
> 
> 时间：2012-09-05T06:29:33.923
> 
> 标签：android, webview, touch, android-edittext

我在我的应用程序的 web 视图中显示网页。我只想在用户单击/触摸 webview 内的编辑文本时启用屏幕方向。我尝试了下面的代码。

```
 mWebView.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            WebView.HitTestResult hr = ((WebView)v).getHitTestResult();
            if(hr!=null){
            if(hr.getType()==HitTestResult.EDIT_TEXT_TYPE)
                ((Activity) context).setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);

            else
                ((Activity) context).setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
            }
            return false;  
            }     
        }); 
```

但它不适用于 2.3 以下的操作系统版本。我怎么能在这些版本中做到这一点。请帮助我。我坚持这个..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-03T11:00:32.327

**下面的代码适用于edittext点击webview内：**

```
WebView web_view = (WebView) subview
                    .findViewById(R.id.webview_mytagdetail_text);

web_view.setWebViewClient(new WebViewClient() {
                public boolean shouldOverrideUrlLoading(WebView view, String url) {

                    Intent in = new Intent(getActivity(), URL_SCREEN.class);
                    in.putExtra("URL", url);
                    startActivity(in);

                    return true;

                }
            });

            web_view.getSettings().setJavaScriptEnabled(true);
            web_view.getSettings().setLoadWithOverviewMode(true);
            web_view.getSettings().setBuiltInZoomControls(true);
            web_view.getSettings().setDisplayZoomControls(false);

            web_view.loadDataWithBaseURL("", campaignClass.getCampaignDesc(),
                    "text/html", "UTF-8", ""); 
```

# java - Android：在 Facebook 上发布图片时出现 NullPointerException

> ID：12275655
> 
> 赞同：0
> 
> 时间：2012-09-05T06:29:56.843
> 
> 标签：java, android, facebook

我正在尝试使用以下代码在 facebook 上发布图像。我`NullPointerException`在这一行遇到错误：`bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);`

这是我的代码。怎么了？

```
import java.io.ByteArrayOutputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.net.MalformedURLException;

import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.text.method.BaseKeyListener;
import android.util.Log;
import android.view.View;
import android.view.Window;
import android.widget.Toast;

import com.facebook.android.AsyncFacebookRunner;
import com.facebook.android.AsyncFacebookRunner.RequestListener;
import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.Facebook.DialogListener;
import com.facebook.android.FacebookError;
import com.facebook.android.Util;

/**
 * The Class PublishOnFacebook posts the events on facebook profile using
 * Facebook SDK
 */
public class PublishOnFacebook extends Activity {

    /** The Constant APP_ID. */
    private static final String APP_ID = "369797849756493";

    /** The Constant PERMISSIONS. */
    private static final String[] PERMISSIONS = new String[] { "publish_stream" };

    /** The Constant TOKEN. */
    private static final String TOKEN = "access_token";

    /** The Constant EXPIRES. */
    private static final String EXPIRES = "expires_in";

    /** The Constant KEY. */
    private static final String KEY = "facebook-credentials";

    /** The facebook. */
    private Facebook facebook;

    /** The msg to post. */
    private String msgToPost;

    /** The post image. */
    private String postImage;

    /*
     * (non-Javadoc)
     * 
     * @see android.app.Activity#onCreate(android.os.Bundle)
     */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.fb_layout);

        facebook = new Facebook(APP_ID);
        restoreCrediential(facebook);
        String facebookMessage = getIntent().getStringExtra("facebookMessage");
        String imageToUpload = getIntent().getStringExtra("uploadphoto");
        Log.d("ImageURL=: ", imageToUpload);
        if (facebookMessage == null) {
            facebookMessage = "Hello friends... Enjoy the rainy season.";
        }
        msgToPost = facebookMessage;
        postImage = imageToUpload;

    }

    /**
     * Do not share.
     * 
     * @param button
     *            the button
     */
    public void doNotShare(View button) {
        finish();
    }

    /**
     * Share the event on facebook .
     * 
     * @param button
     *            the button
     * @throws MalformedURLException
     *             the malformed url exception
     * @throws IOException
     *             Signals that an I/O exception has occurred.
     */
    public void share(final View button) throws MalformedURLException,
            IOException {

        if (!facebook.isSessionValid()) {
            loginAndPostToWall();
        } else {
            postToWall(msgToPost);
            postImageToWall(postImage);
        }
    }

    /**
     * Post image to wall.
     * 
     * @param imageUrl
     *            the image url
     */
    private void postImageToWall(String imageUrl) {
        byte[] data = null;

        Bitmap bi = BitmapFactory.decodeFile(imageUrl);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
        data = baos.toByteArray();

        Bundle params = new Bundle();
        params.putString(Facebook.TOKEN, facebook.getAccessToken());
        params.putString("method", "photos.upload");
        params.putByteArray("picture", data);

        AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
        mAsyncRunner.request(null, params, "POST", new SampleUploadListener(),
                null);

    }

    /**
     * Login and post to wall.
     */
    private void loginAndPostToWall() {
        facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH,
                new LoginDialogListener());

    }

    /**
     * Post to wall.
     * 
     * @param message
     *            the message
     */
    private void postToWall(String message) {
        Bundle parameters = new Bundle();
        parameters.putString("message", message);
        parameters.putString("description", "topic to share");
        try {
            facebook.request("me");
            String response = facebook.request("me/feed", parameters, "POST");
            Log.d("response: ", response);
            if (response == null || response.equals("")) {
                response.equals("");
                showToast("No Response.");

            } else {
                showToast("Message has been posted to your walll!.");
            }
            finish();
        } catch (Exception e) {
            showToast("Message failed to posdt on wall.");
            e.printStackTrace();
            finish();
        }

    }

    /**
     * Show toast.
     * 
     * @param message
     *            the message
     */
    private void showToast(String message) {
        Toast.makeText(this, message, Toast.LENGTH_SHORT).show();
    }

    /**
     * Restore crediential.
     * 
     * @param facebook
     *            the facebook
     * @return true, if successful
     */
    public boolean restoreCrediential(Facebook facebook) {
        SharedPreferences sPreferences = getApplicationContext()
                .getSharedPreferences(KEY, Context.MODE_PRIVATE);
        facebook.setAccessToken(sPreferences.getString(TOKEN, null));
        facebook.setAccessExpires(sPreferences.getLong(EXPIRES, 0));

        return facebook.isSessionValid();

    }

    /**
     * Save credientails.
     * 
     * @param facebook
     *            the facebook
     * @return true, if successful
     */
    public boolean saveCredientails(Facebook facebook) {
        Editor editor = getApplicationContext().getSharedPreferences(KEY,
                Context.MODE_PRIVATE).edit();
        editor.putString(TOKEN, facebook.getAccessToken());
        editor.putLong(EXPIRES, facebook.getAccessExpires());

        return editor.commit();
    }

    /**
     * The listener interface for receiving loginDialog events. The class that
     * is interested in processing a loginDialog event implements this
     * interface, and the object created with that class is registered with a
     * component using the component's
     * <code>addLoginDialogListener<code> method. When
     * the loginDialog event occurs, that object's appropriate
     * method is invoked.
     * 
     * @see LoginDialogEvent
     */
    public class LoginDialogListener implements DialogListener {

        /*
         * (non-Javadoc)
         * 
         * @see
         * com.facebook.android.Facebook.DialogListener#onComplete(android.os
         * .Bundle)
         */
        public void onComplete(Bundle values) {
            saveCredientails(facebook);
            if (msgToPost != null) {
                postToWall(msgToPost);
            }
            postImageToWall(values.getString(Facebook.TOKEN));
        }

        /*
         * (non-Javadoc)
         * 
         * @see
         * com.facebook.android.Facebook.DialogListener#onFacebookError(com.
         * facebook.android.FacebookError)
         */
        public void onFacebookError(FacebookError e) {
            showToast("Auntication with facebook failed");
            finish();

        }

        /*
         * (non-Javadoc)
         * 
         * @see
         * com.facebook.android.Facebook.DialogListener#onError(com.facebook
         * .android.DialogError)
         */
        public void onError(DialogError e) {
            showToast("Auntication with facebbok failed");
            finish();
        }

        /*
         * (non-Javadoc)
         * 
         * @see com.facebook.android.Facebook.DialogListener#onCancel()
         */
        public void onCancel() {
            showToast("Aunticaton with facebbok failed");
            finish();
        }

    }

    /**
     * The listener interface for receiving sampleUpload events. The class that
     * is interested in processing a sampleUpload event implements this
     * interface, and the object created with that class is registered with a
     * component using the component's
     * <code>addSampleUploadListener<code> method. When
     * the sampleUpload event occurs, that object's appropriate
     * method is invoked.
     * 
     * @see SampleUploadEvent
     */
    public class SampleUploadListener extends BaseKeyListener implements
            RequestListener {

        /*
         * (non-Javadoc)
         * 
         * @see
         * com.facebook.android.AsyncFacebookRunner.RequestListener#onComplete
         * (java.lang.String, java.lang.Object)
         */
        public void onComplete(final String response, final Object state) {
            try {
                // process the response here: (executed in background thread)
                Log.d("Facebook-Example", "Response: " + response.toString());
                JSONObject json = Util.parseJson(response);
                final String src = json.getString("src");

                // then post the processed result back to the UI thread
                // if we do not do this, an runtime exception will be generated
                // e.g. "CalledFromWrongThreadException: Only the original
                // thread that created a view hierarchy can touch its views."

            } catch (JSONException e) {
                Log.w("Facebook-Example", "JSON Error in response");
            } catch (FacebookError e) {
                Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
            }
        }

        /*
         * (non-Javadoc)
         * 
         * @see
         * com.facebook.android.AsyncFacebookRunner.RequestListener#onFacebookError
         * (com.facebook.android.FacebookError, java.lang.Object)
         */
        public void onFacebookError(FacebookError e, Object state) {

        }

        /**
         * Gets the input type.
         * 
         * @param img
         *            the img
         * @return the input type
         */
        public Bitmap getInputType(Bitmap img) {
            return img;
        }

        /*
         * (non-Javadoc)
         * 
         * @see android.text.method.KeyListener#getInputType()
         */
        public int getInputType() {
            return 0;
        }

        /*
         * (non-Javadoc)
         * 
         * @see
         * com.facebook.android.AsyncFacebookRunner.RequestListener#onIOException
         * (java.io.IOException, java.lang.Object)
         */
        public void onIOException(IOException e, Object state) {

        }

        /*
         * (non-Javadoc)
         * 
         * @see com.facebook.android.AsyncFacebookRunner.RequestListener#
         * onFileNotFoundException(java.io.FileNotFoundException,
         * java.lang.Object)
         */
        public void onFileNotFoundException(FileNotFoundException e,
                Object state) {

        }

        /*
         * (non-Javadoc)
         * 
         * @see com.facebook.android.AsyncFacebookRunner.RequestListener#
         * onMalformedURLException(java.net.MalformedURLException,
         * java.lang.Object)
         */
        public void onMalformedURLException(MalformedURLException e,
                Object state) {

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:42:48.190

如果您查看 BitmapFactory.decodeFile(String pathName) 的文档，您会看到：

> 将文件路径解码为位图。如果指定的文件名为空，或者无法解码为位图，则该函数返回空。

我建议您检查您尝试从中获取位图的 URL。

/ 托福

# facebook-graph-api - Facebook 图形 API 从 Pages 获取帖子

> ID：12275656
> 
> 赞同：12
> 
> 时间：2012-09-05T06:29:59.353
> 
> 标签：facebook-graph-api

我正在努力从 Facebook 的公共页面获取帖子。例如

> [https://graph.facebook.com/cocacola](https://graph.facebook.com/cocacola) （这是一个公共页面，在facebook上喜欢它的人会得到更新。）

这仅返回页面详细信息。我怎样才能让用户“cocacola”完成墙贴。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T07:02:12.040

它很简单。照做

[https://developers.facebook.com/docs/graph-api/reference/v2.2/page/f‌​eed](https://developers.facebook.com/docs/graph-api/reference/v2.2/page/feed)

它会起作用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-12T12:27:20.327

我在聚会上有点晚了，但为了完整起见，我想补充一下：

使用最新版本 2.2，您可以通过页面 id 访问提要，例如：

[https://graph.facebook.com/v2.2/PAGE_ID/feed?access_tkoen=YOUR_ACCESS_TOKEN](https://graph.facebook.com/v2.2/PAGE_ID/feed?access_tkoen=YOUR_ACCESS_TOKEN)

个别帖子也可以通过他们自己的 ID 或通过提要检索。

[https://graph.facebook.com/v2.2/POST_ID?access_token=YOUR_ACCESS_TOKEN](https://graph.facebook.com/v2.2/POST_ID?access_token=YOUR_ACCESS_TOKEN)

也许旧版本也可以做到这一点？不知道，我才刚开始。

# php - 如何使用 PHP-MySQL 动态更改网站的语言？

> ID：12275657
> 
> 赞同：2
> 
> 时间：2012-09-05T06:29:59.370
> 
> 标签：php, mysql

我有带有管理面板的 PHP-MySQL 网站。我可以从管理面板输入数据，它们会显示在用户端网页上。现在，我希望我应该能够从管理面板插入英文文本数据，并且它们应该在用户端以 3 种不同的语言显示。

在用户端，我想为访问者提供选择语言偏好的选项，并且用户端页面应该以该选择的语言显示。现在我完全不知道我需要在用户端页面上进行哪些与编程相关的更改才能实现这一点。

我在互联网上搜索并阅读了一些文章，但坦率地说找不到适合我的情况的解决方案。所以请帮助我。

在我的工作环境中使用/设置了以下内容。

*   视窗服务器 2003
*   PHP 5.2.17
*   MySQL 5.0.51a (UTF-8 Unicode (utf8))
*   XHTML 1.0 过渡
*   元字符集=iso-8859-1

提前谢谢你，KRA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:48:07.430

假设您希望在服务器端 (PHP) 执行翻译，您可以使用`file_get_contents`它从 Google Translate API 获取数据。然后您需要解析响应并获取翻译文本。您需要获取[API KEY](https://code.google.com/apis/console/)才能访问翻译服务。

```
<?php
$string = 'Hello World';
$source_lang = 'en';
$target_lang = 'zh-CN'

header ( "Content-Type: text/html;charset=utf-8" );
$data = file_get_contents ( 'https://www.googleapis.com/language/translate/v2?key=INSERT-YOUR-KEY&q='.urlencode($string).'&source='.$source_lang.'&target='.$target_lang ); 
$data = json_decode ( $data );  
$translated = $data->data->translations->[0]->translatedText;
echo $translated;

?> 
```

服务器响应是具有该结构的 JSON 对象：

```
{
    "data": {
        "translations": [
            {
                "translatedText": "Hallo Welt",
                "detectedSourceLanguage": "en"
            }
        ]
    }
} 
```

有关基本概念的更多信息，请访问：http: [//baris.aydinoglu.info/coding/google-translate-api-in-php](http://baris.aydinoglu.info/coding/google-translate-api-in-php)。

谷歌翻译 API 查询文档： [http ://code.google.com/apis/language/translate/v2/using_rest.html](http://code.google.com/apis/language/translate/v2/using_rest.html)

您可以使用它并将相关数据保存到您的数据库中。您的数据库表中的每种语言可能都有单独的列。管理员输入文本/数据后，您必须使用解决方案对其进行转换并将它们保存到同一行的相关列中。用户可能会根据他们的语言选择从相关列中获得数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:33:18.163

假设您将所有语言变量和/或 html 视图分离成某种结构，您总是可以只使用 cookie。

让您的站点检查是否存在所述 cookie，如果不存在，则让站点恢复为默认语言，否则相应地调整语言。

前任：

有一个包含每种语言下拉值的表单，并在提交时设置语言 cookie 变量：

```
setcookie('userLanguage',$language_value,strtotime("+1 year")); 
```

第一个参数是 cookie 变量的名称，第二个是值（在本例中是用户的语言选择，第三个是 cookie 的到期日期（我做了一年，但你可以设置为任何你喜欢）。

下一步实际上取决于您的站点的设置方式，但我假设您将语言文本保存在数据库中或以某种智能方式处理。无论哪种方式，您都需要检索 cookie：

```
if ($_COOKIE['userLanguage'] <> '')
  // Do some language stuff here based on the value of $_COOKIE['userLanguage']
else
  // Do some stuff here for default language 
```

就是这样。有很多不同的方法可以处理实际的语言转换，但获取用户偏好并记住它的行为几乎就是这样基本的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:38:19.457

在您的网站中使用语言文件。

例如，对于英语 -en.php 对于法语 -fr.php

该文件将具有将在前端用户端使用的变量。用户可以选择任何语言，并且在选择时，您的代码将加载以下语言

在你的情况下，你正在使用数据库，所以你可以在你的表中而不是数据库中拥有这个东西

因此，您的 Front 文件将由变量而不是 Text 组成，并且当用户选择一种语言时，此变量将被语言变量替换（来自数据库或来自文件，由您选择）

是的，您需要输入默认语言。

使用以下链接来实施：-

```
http://scriptdigital.com/divers/phplocalization.html
http://www.mind-it.info/2010/02/22/a-simple-approach-to-localization-in-php/
http://code.google.com/p/slsphp/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T06:42:26.953

使用此方法。

它为我工作。

[使用 PHP 在网站上切换语言](https://stackoverflow.com/questions/2878875/switching-languages-on-a-website-with-php)

我在 oyutrade.com 上做过

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T06:35:41.330

这在很大程度上取决于您如何存储文本数据。如果你有它在一个数据库（mysql）中，那么我建议你有一个代表语言的列。然后你可以有一个会话变量或一个特定的 url 或其他东西，可以让你知道用户正在请求哪种语言。

你需要的是某种方法来确定你的用户想要什么样的语言，然后就很容易了。

你有没有尝试过什么？

# asp.net - 将 Sql 查询转换为 LINQ

> ID：12275664
> 
> 赞同：-1
> 
> 时间：2012-09-05T06:30:33.080
> 
> 标签：asp.net, .net, sql, linq

我正在尝试将下面提到的 SQL 查询转换为 LINQ 查询

```
Qry = "select Announcement, StartDate, Enddate,Annkey from
Announcements ";   Qry = Qry & " where Startdate <= #" & Today & "# " 
Qry = Qry & " and Enddate >= #" & Today & "# "  Qry = Qry + " order by
StartDate, Enddate"; 
```

到目前为止我所做的 -

```
public bool Selectdatafromannouncements()
        {

            List<Announcement> lstAnnounce = new List<Announcement>(
                from l in objVaccinationContext.Announcements
                where
                    l.StartDate.Value < DateTime.Today
                    && l.EndDate.Value < DateTime.Today
                orderby l.StartDate, l.EndDate
                select new (l.Announcement1, l.StartDate, l.EndDate, l.AnnouncementID)
                );

            return true;
        } 
```

> 在 select new 附近出现错误（如预期的那样，请帮助我，我是 LINQ 的初学者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:49:26.370

您在这里不需要构造函数来创建列表。花括号用于创建匿名对象，因此不要声明 lstAnnounce`List<Announcement>`类型，最好使用 var 关键字。

所以你可以有这个：

```
var query = from l in objVaccinationContext.Announcements
                  where
                    l.StartDate.Value < DateTime.Today
                    && l.EndDate.Value < DateTime.Today
                orderby l.StartDate, l.EndDate
                select new {l.Announcement1, l.StartDate, l.EndDate, l.AnnouncementID };
var lstAnnounce = query.ToList(); 
```

如果您需要 Annoucement 对象列表：

```
var query = 
                from l in objVaccinationContext.Announcements
                where
                    l.StartDate.Value < DateTime.Today
                    && l.EndDate.Value < DateTime.Today
                orderby l.StartDate, l.EndDate
                select l;
List<Announcement> lstAnnounce = query.ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:44:29.677

如果`objVaccinationContext.Announcements`是`Announcement`对象的集合，则不需要匿名类型或使用 List 的构造，您可以这样做：

```
List<Announcement> lstAnnounce = (
    from l in objVaccinationContext.Announcements
    where
        l.StartDate.Value < DateTime.Today && 
        l.EndDate.Value < DateTime.Today
    orderby l.StartDate, l.EndDate
    select l)
    .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:34:02.547

`select new (l.Announcement1, l.StartDate, l.EndDate, l.AnnouncementID)`

是错的

尝试匿名类型：

```
select new {var1 = l.Announcement1, var2 = l.StartDate, vr3 = l.EndDate, var4 = l.AnnouncementID} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T06:44:08.810

问题是您将一个类型的项目插入到执行时`anonymous`的列表中。您需要做的是显式创建类型的实例：`Announcement``select new (l.Announcement1, l.StartDate, l.EndDate, l.AnnouncementID)``Announcement`

```
List<Announcement> lstAnnounce = 
objVaccinationContext.Announcements
                     .OrderBy(l => l.StartDate)
                     .ThenBy(l => l.EndDate)
                     .Where(l => l.StartDate.Value < DateTime.Today &&
                                 l.EndDate.Value < DateTime.Today)
                     .Select(l => new Announcement
                     {
                         Announcement1 = l.Announcement1,
                         AnnouncementId = l.AnnouncementId,
                         EndDate = l.EndDate,
                         StartDate = l.StartDate
                     })
                     .ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T10:52:13.250

在您使用的原始查询中

```
Startdate <= Today  and Enddate >= Today 
```

而你的 Linq 有

```
l.StartDate.Value < DateTime.Today
&& l.EndDate.Value < DateTime.Today 
```

假设您的首要查询是您所追求的，这对您有用吗：

```
 List<Announcement> lstAnnounce = 
            (from l in objVaccinationContext.Announcements
            where
                l.StartDate.Value <= DateTime.Today
                && l.EndDate.Value >= DateTime.Today
            orderby l.StartDate, l.EndDate
            select new Announcement
                 {
                     Announcement1 = l.Announcement1,
                     StartDate = l.StartDate,
                     EndDate = l.EndDate,
                     AnnouncementId = l.AnnouncementId
                 }).ToList(); 
```

# php - CakePHP API Blackhole - validatePost 禁用不起作用？

> ID：12275666
> 
> 赞同：3
> 
> 时间：2012-09-05T06:30:42.727
> 
> 标签：php, api, cakephp, rest, ssl

由于通过 API 进行纯密码登录，我们最近将应用程序从 http 转移到了 https。

然而，既然这样做了，我们就遇到了黑洞的真正问题。Cake 似乎在我们的控制器中对 API 函数的任何“POST”进行了黑洞处理，尽管

```
$this->Security->validatePost = false; 
```

在 AppController.php 中设置

我们使用的是 CakePHP 2.1.3 版

代码示例如下：

应用控制器.php：

```
function beforeFilter() 
{
    $this->Security->validatePost = false;  
    $this->Security->requireSecure(); 
} 
```

SaleOrderController.php：

```
function beforeFilter()
{
    parent::beforeFilter();
    $this->Auth->allow('addApi');   // Allow access to the API without logging in.
} 
```

发布到此 URL 会返回以下消息：“请求已被黑洞”

一旦我们可以让它工作（没有被黑洞），我们将对其进行调整，以便仅可以使用 validatePost = false 执行某些操作。但是，现在我们只想让系统正常工作。

注意：对操作的“GET”请求工作正常（不是黑洞）。

我在这里遗漏了一些简单的配置还是在工作中存在一些更深层次的问题？文档中的安全模块似乎有点少，从我的谷歌搜索来看，大多数人似乎通过执行与我相同的步骤来避免黑洞。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T18:40:12.110

事实证明，以下内容在 CakePHP 2.X 中无效：

$this->Security->enabled = false;

要禁用组件，您需要遵循此文档： [http ://book.cakephp.org/2.0/en/core-libraries/components/security-component.html](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html)

我的问题与 CSRF 保护有关，我认为这在 CakePHP 2.X 中可能是新的？无论如何，我需要做的就是在我的 SaleOrderController beforeFilter 函数中添加以下行：

$this->Security->csrfCheck = false;

我的整个 BeforeFilter 功能现在是：

```
function beforeFilter()
{
    parent::beforeFilter();
    $this->Auth->allow('addApi');   // Allow access to the API without logging in.
    if (isset($this->Security) && $this->action == 'addApi') {
        $this->Security->csrfCheck = false;
        $this->Security->validatePost = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:39:58.333

见以下网址

[CakePHP：在站点范围内禁用安全组件](https://stackoverflow.com/questions/9171227/cakephp-disable-security-component-site-wide)

[在使用 Security 组件和 jQuery 的 CakePHP 表单中禁用输入元素](https://stackoverflow.com/questions/6670900/disabling-input-elements-in-a-cakephp-form-that-uses-security-component-and-jque)

[http://life.mysiteonline.org/archives/175-Disable-the-Security-Component-in-CakePHP-only-for-Certain-Actions.html](http://life.mysiteonline.org/archives/175-Disable-the-Security-Component-in-CakePHP-only-for-Certain-Actions.html)

[http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html)

[http://api.cakephp.org/class/security-component](http://api.cakephp.org/class/security-component)

**或者试试看：-**

即使您在 app_controller 中禁用它，您的个人控制器也可能启用了该安全性。正如我的疯狂猜测所说，这就是您想要做的。如果不让我了解更多信息

```
function beforeFilter(){
    parent::beforeFilter();

    if(isset($this->Security) && $this->RequestHandler->isAjax() && $this->action = 'add'){

        $this->Security->enabled = false;

    }

} 
```

# c - 检查文件是否是 C 中的特定类型

> ID：12275667
> 
> 赞同：2
> 
> 时间：2012-09-05T06:30:42.837
> 
> 标签：c, linux, directory, iteration, header-files

我正在编写我的第一个 C 程序，尽管我来自 C++ 背景。

我需要遍历文件目录并检查文件是否为头文件，然后返回计数。

我的代码如下，我认为它非常初级：

```
static int CountHeaders( const char* dirname ) {

    int header_count = 0;
    DIR* dir_ptr;
    struct dirent* entry;

    dir_ptr = opendir( dirname );

    while( ( entry = readdir( dir_ptr ) ) )
    {
        if ( entry->d_type == DT_REG )
        {
            //second if statement to verify the file is a header file should be???
            ++header_count;
        }
    }

    closedir( dir_ptr );

    return header_count;
} 
```

什么是一个好的 if 语句来检查文件是否是标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:36:03.200

只需检查文件扩展名是否为`.h`，例如：

```
const char *ext = strrchr (entry->d_name, '.');     
if ((ext != NULL) && (!strcmp (ext+1, "h"))) {
     // header file
} 
```

当然，请注意，这假设您的所有头文件都有`.h`扩展名，这可能是也可能不是，C 标准不要求头文件必须具有`.h`扩展名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T06:58:53.907

有一些比检查文件扩展名更好的方法。

[维基百科在这里](http://en.wikipedia.org/wiki/File_format#Identifying_file_type)和[这里](http://en.wikipedia.org/wiki/Magic_number_(programming))有一篇很好的文章。后一种想法被称为幻数数据库，这实质上意味着如果一个文件包含 blah 序列，那么它就是数据库中列出的匹配类型。有时数字对位置有限制，有时则没有。这种方法 IMO 更准确，尽管比文件扩展名检测慢。

但是话又说回来，对于像检查它是否是标题这样简单的事情，这可能有点矫枉过正 XD

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T06:34:52.623

每个`dirent`结构都有一个`d_name`包含文件名的文件，所以我想看看它是否遵循某种模式，比如以`.h`or结尾`.hpp`。

那将是以下代码：

```
int len = strlen (entry->d_name);
if ((len >= 2) && strcmp (&(entry->d_name[len - 2]), ".h") == 0))
    header_count++;
if ((len >= 4) && strcmp (&(entry->d_name[len - 4]), ".hpp") == 0))
    header_count++; 
```

当然，这不会阻止真正邪恶的人调用他们的可执行文件`ha_ha_fooled_you.hpp`，但幸运的是他们是少数。

你甚至可能想考虑一个`endsWith()`让你的生活更轻松的函数：

```
int endsWith (char *str, char *end) {
    size_t slen = strlen (str);
    size_t elen = strlen (end);
    if (slen < elen)
        return 0;
    return (strcmp (&(str[slen-elen]), end) == 0);
}
:
if (endsWith (entry->d_name, ".h"))   header_count++;
if (endsWith (entry->d_name, ".hpp")) header_count++; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T06:33:52.813

您可以检查最后几个字符是否是头文件扩展名之一，.h、.hpp 等。使用`dirent`结构`d_name`作为文件名。

或者，您可以运行“文件”命令并解析其结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T06:35:12.920

您可能只想检查文件扩展名。使用[dirent](http://pubs.opengroup.org/onlinepubs/7908799/xsh/dirent.h.html)，你会想看看`d_name`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T06:35:29.800

这取决于你。

最简单的方法是只查看文件名 (d_name)，然后检查它是否以“.h”或“.hpp”之类的结尾。

另一方面，打开文件并实际读取它以查看它是否是有效的 c/c++ 会复杂得多...您可以通过编译器运行它，但并非每个标头都可以独立运行，因此测试会给你很多假阴性。

# c# - 为存储过程输出创建 XML 的最佳方法是什么

> ID：12275674
> 
> 赞同：1
> 
> 时间：2012-09-05T06:31:40.703
> 
> 标签：c#, sql, xml, xslt, stored-procedures

我有一个返回几千条记录的存储过程。我需要将 XSL 应用于此 SP 的输出。最好的方法是什么

1.  读取数据集中的数据，使用 XmlDataDocument 并应用 XSL
2.  从 SP 输出 XML 并在其上应用 XSL

对于 2，我担心 XML 大小会太大，C# 代码读取它会超时。请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:44:24.393

您可以使用`SqlXmlCommand`命名空间中的类型`Microsoft.Data.SqlXml`。

[从这里的](http://msdn.microsoft.com/en-us/library/ms171950.aspx)msdn ：

```
SqlXmlCommand cmd = new SqlXmlCommand(ConnString);
cmd.CommandText = "SELECT TOP 20 FirstName, LastName FROM Person.Contact FOR XML AUTO";
cmd.XslPath = "MyXSL.xsl";
cmd.RootTag = "root";
...etc 
```

如果您担心超时，只需在连接字符串上设置更大的超时时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:40:37.023

我们在我们的平台上使用类似的方法。但是我们不直接在存储过程上应用 XSL，因为我们使用 MS SQL Server Express，它不允许应用 XSL。至少这是我在寻找这个特定主题时发现的，这种转换需要一个高级版本的 MSSQL Server。

输出 XML 的存储过程又大又脏（但运行平稳），我们在读回结果时没有问题。每个请求最多需要几秒钟，通常大约几千行作为结果并连接几个表。将 VS2010 和 VB.Net 与 Telerik 组件一起使用。

# java - 将 Java 泛型与 Gson 和 ArrayList 一起使用

> ID：12275676
> 
> 赞同：2
> 
> 时间：2012-09-05T06:32:16.193
> 
> 标签：java, android, generics, gson

我正在构建一个 Android 应用程序，它使用 Gson 从 API 序列化和反序列化对象。这些对象是 POJO，我有一个 APIProvider 类，它由各个提供者为每种类型的对象扩展（例如 ProfileProvider 扩展 APIProvider）。我创建了 APIProvider 泛型类以抽象缓存。

我遇到的问题是泛型类 APIProvider 中的泛型。

如果我使用以下行：

```
List<T> objects = gson.fromJson(cachedObjects, new TypeToken<List<Profile>>(){}.getType()); 
```

然后一切正常。一旦我尝试抽象 Profile 并执行以下操作：

```
List<T> objects = gson.fromJson(cachedObjects, new TypeToken<List<T>>(){}.getType()); 
```

我收到以下错误：

```
java.lang.ClassCastException: com.google.gson.internal.StringMap cannot be cast to org.buffer.android.core.Profile 
```

任何帮助都是极好的。

# java - String.intern() 是否更改原始字符串 JDK7 的引用

> ID：12275677
> 
> 赞同：5
> 
> 时间：2012-09-05T06:32:20.643
> 
> 标签：java, string

> **可能重复：**
> [intern() 在 Java 6 和 Java 7 中的行为不同](https://stackoverflow.com/questions/7065337/intern-behaving-differently-in-java-6-and-java-7)

[在为这个问题](https://stackoverflow.com/questions/12275251/java-conditional-statement/12275353#12275353)做例子时

`intern()`当我调用`intern()`方法时，我注意到方法的一种奇怪行为，`String`此后我可以将`==`运算符用于*Original String*。

方法的JavaDoc `intern()`：

> 返回字符串对象的规范表示。一个字符串池，最初是空的，由 String 类私下维护。
> 
> 当调用 intern 方法时，如果池中已经包含一个与该方法确定的该 String 对象相等`equals(Object)`的字符串，则返回池中的字符串。否则，将此 String 对象添加到池中并返回对该 String 对象的引用。
> 
> 由此可见，对于任何两个字符串`s`和`t`，`s.intern() == t.intern()`当且仅当`s.equals(t)`为真时为真。

上面的 Javadoc 并没有说*原始字符串*被更改。那么为什么这个程序在输入`okay`时打印。`test`

```
import java.util.Scanner;

public class Test {
    public static void main(String[] args) {
        Scanner user_input = new Scanner(System.in);
        String username;
        System.out.print("username: ");
        username = user_input.next();
        // Even if I do not assign returned string for comparison still it compares
        // okay else it does not compare
        username.intern();
        if (username == "test") {
            System.out.println("okay");
        }
        else {
            System.out.println("not okay");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T07:21:55.963

String.intern() 返回 intern()ed 字符串。这是因为方法不能更改传递给它的引用。

> 那么为什么当 test 是输入时这个程序打印正常。

它可以打印，因为 intern()ed 字符串是第一次看到此字符串，因此它成为“测试”的一个字符串文字。改变的不是字符串，而是用于“测试”的对象被改变。

试试吧。

```
String te = "te", st = "st";
// "test".length();
String username = te + st;
username.intern();
System.out.println("String object the same is: "+ (username == "test")); 
```

在这种情况下，Java 7 update 7 中的输出是

```
String object the same is: test 
```

但是在 Java 6 update 32 上运行它或取消注释该行，以便首先看到“测试”并且你得到。

```
String object the same is: false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T06:37:06.010

str.intern() 检查字符串池中是否已经存在相同的对象，如果是，则重用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:57:11.983

下面的行为您提供输入表单用户。

```
 username = user_input.next(); 
```

之后，您将调用它 在条件语句 `username.intern();`中返回 Now 的字符串文字`username`

```
if (username == "test") 
```

您的变量`username`包含来自字符串池的字符串文字对象，并且`"test"`也是字符串文字，因此 jvm 将为您提供相同的字符串引用，`test`该引用已经为此创建`username` 并且`username`是`"test"`相同的对象。并且在 java 中`==`操作了对象的检查引用，所以在这种情况下，它会返回`true` 这就是它打印的原因 `okay`

# android - 如何在 Fragment 中为微调器设置 ArrayAdapter

> ID：12275678
> 
> 赞同：4
> 
> 时间：2012-09-05T06:32:24.960
> 
> 标签：android, android-fragments, android-fragmentactivity

我正在尝试将项目添加到片段中的微调器。但我对上下文有疑问。因为在片段中没有上下文。我在这里怎么样

```
public class DetailFrag extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View scrollView = inflater.inflate(R.layout.myscrollview , container, false);       
        LinearLayout linearLayout = (LinearLayout) scrollView.findViewById(R.id.mylayout1);

        for (int i=0; i<questionList.size(); i++) {

            View verticalLinearLayout = inflater.inflate(R.layout.mylistrow,  null);
            View horizontalLInearLaoyout = verticalLinearLayout.findViewById(R.id.questionRow);
            TextView tv = (TextView) horizontalLInearLaoyout.findViewById(R.id.question);
            Spinner spinner = (Spinner) horizontalLInearLaoyout.findViewById(R.id.spinner);

            //Problem: how to define this in fragment createFromResource(this,...)
            ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                    this, R.array.options_array, android.R.layout.simple_spinner_item);

            EditText editText = (EditText) verticalLinearLayout.findViewById(R.id.txtMultiLine);

            String question = questionList.get(i).question;

            tv.setId(i);
            tv.setText(i + question);
            spinner.setId(i);
            editText.setId(i);

            linearLayout.addView(verticalLinearLayout);          
        }       
        return scrollView;  
    } //end of onCreateView()
} //end of class DetailFrag 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-07-10T14:06:19.270

在片段中，上下文不可用您在代码中所期望的方式。而不是`this`，请使用以下内容：

```
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
    getActivity().getBaseContext(),
    R.array.options_array,
    android.R.layout.simple_spinner_item); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-26T23:51:17.323

由于我们在一个片段中，因此'this'将不起作用：使用 getActivity().getBaseContext() 应该用于替换'this'；

```
 ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String> 
   (getActivity().getBaseContext(),
                android.R.layout.simple_spinner_dropdown_item,
                listItems); 
```

请注意，在旧版本的 Android 上，getContext() 也会返回片段的上下文，但对于新版本，它可能不会返回上下文。因此，使用 getActivity() 你变成了一个 Activity，它是一个上下文。

我们使用 getActivity() 获取您所在的当前活动，然后是 getBaseContext()，因为在 Activity 中可以启动多个上下文。我们希望得到 Activity 本身使用的那个。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-05T06:48:03.550

做类似的事情：

```
private Context myContext = null;

public DetailFrag(Context ctx){
    myContext = ctx;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

//...
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                myContext, R.array.options_array, android.R.layout.simple_spinner_item);

//  
} 
```

# php - 使用android第二次调用时找不到会话

> ID：12275681
> 
> 赞同：-1
> 
> 时间：2012-09-05T06:32:39.087
> 
> 标签：php, android, facebook, session

在我的应用程序中，我试图使用 api 从服务器中检索数据。因为我试图获取 facebook 数据，所以当我第一次调用 url 时，我正在传递 facebookid。代码是这样的，它应该从服务器获取数据，而另一个url 被调用。

我的问题是，当我第二次调用 url 时，我得到了一个空值。这就是会话被删除的地方。我的代码如下。

```
public void getdetails(){
    JSONObject json = JSONfunctions.getJSONfromURL(unielement+"UserLogin.php?faceid="+facebookID);
    System.out.println(unielement+"UserLogin.php?faceid="+facebookID+"   "+json);

    try{
        JSONArray  data = json.getJSONArray("data");
        //Loop the Array
        for(int i=0;i < data.length();i++){                      

            ArrayList<String> list = new ArrayList<String>();

            list.add(data.getJSONObject(0).getString("CreditBySelf"));
            list.add(data.getJSONObject(0).getString("CreditThroughFriend"));
            list.add(data.getJSONObject(0).getString("ForUser"));
            list.add(data.getJSONObject(0).getString("LDrawTicket"));
            list.add(data.getJSONObject(0).getString("Buy-In"));
            list.add(data.getJSONObject(0).getString("RemVote"));
            list.add(data.getJSONObject(0).getString("Voted"));
            StringBuilder sb = new StringBuilder();
            for (String s : list)
            {
                sb.append(s);
                sb.append("\t");
            }
            uid = list.get(0);
            name = list.get(1).toString();
            System.out.println(list);
            textView_name1.setText(name);

        }
    }
    catch(JSONException e1){
        Toast.makeText(getBaseContext(), "No name Found"+e1 ,Toast.LENGTH_LONG).show();
    } catch (ParseException e1) {
        e1.printStackTrace();
    }

} 
```

当我调用上面的函数时，会创建一个会话，当我调用下面的代码时它应该在那里。

```
public void getdataforsharing(){

    JSONObject json = JSONfunctions.getJSONfromURL(unielement+"userfbaction.php");
    System.out.println(unielement+"userfbaction.php    "+json);

    try{
        JSONArray  wholedata = json.getJSONArray("data");
        System.out.println(wholedata);
        JSONObject  data = wholedata.getJSONObject(0);
        System.out.println(data);
        //Loop the Array
        for(int i=0;i < data.length();i++){                      

            list1 = new ArrayList<String>();
            /*list1.add(data.getJSONObject(0).getString("wall_image"));
            list1.add(data.getJSONObject(0).getString("wall_title"));
            list1.add(data.getJSONObject(0).getString("wall_Description"));*/
            list1.add(data.getString("wall_image"));
            list1.add(data.getString("wall_title"));
            list1.add(data.getString("wall_Description"));

            StringBuilder sb = new StringBuilder();
            for (String s : list1)
            {
                sb.append(s);
                sb.append("\t");
            }
            System.out.println("Share on facebook"+list1.get(0));
        }
    }
    catch(JSONException e1){
        Toast.makeText(getBaseContext(), "No name Found"+e1 ,Toast.LENGTH_LONG).show();
    } catch (ParseException e1) {
        e1.printStackTrace();
    }
} 
```

当我调用这个函数时，我没有得到第一个函数创建的会话，我得到的是一个空数据。

这有什么问题？请任何人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:00:05.743

会话在“UserLogin.php”中创建。

会话在 PHP 中通过使用 SessionID 来控制，它可以是：

1.  作为查询参数传递；您需要接收会话 ID，然后在下次调用时添加到 URL，或者
2.  传入一个cookie；您需要接收 cookie，然后在您下次调用时将 cookie 发送到 URL。

您的代码没有做任何事情：您只接受了 JSON，您没有读取 cookie 并下次发送，也没有接收数据中的 SessionID 并将其用于下一次调用。

* * *

在您的情况下最简单的解决方案：

1.  在第一次调用中，将“session_id()”的内容作为 json 的一部分返回。记住它以备后用，存储在内存或文件中 - 无论你需要它。
2.  在对 userfbaction.php 的第二次调用中，将 session_id 作为参数发送
3.  在 userfbaction.php 中，读取参数并在 session_start() 之前调用传入 session_id 的“session_id()”。这将继续上一个会话

# java - 将日文字符输出到文件

> ID：12275683
> 
> 赞同：2
> 
> 时间：2012-09-05T06:32:46.303
> 
> 标签：java, encoding, io, filewriter

如何打印文件中的日文字符`fileWriter`，使其不显示为“？？？” 问号。

每当我执行程序时，它都会打印问号，当我将字体和语言分别更改为 MS Gothic 和日语时，它不会做任何更改。

我有另一个带有日文字符的文件，但是当我打开它时，它包含一些看起来像垃圾的字符而不是问号。当我像以前一样更改字体和语言时，它会很好地显示日文字符。

所以我的问题是如何在我的文件中获取“垃圾字符”，而不是`???`这样，当我更改字体/语言设置时，我会得到想要的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T06:34:22.687

> 如何使用 fileWriter 在文件中打印日文字符，使其不显示为“？？？” 问号。

不要`FileWriter`用来开始。那*总是*使用默认编码，这可能不是你想要的。

相反，使用`FileOutputStream`包装在一个`OutputStreamWriter`中，这将让您指定编码 - “UTF-8”通常是一个不错的选择，只要要读取数据的任何东西都会接受它。（从您的问题中不清楚什么*是*读取文件 - 理解编写代码和读取代码都需要就编码达成一致非常重要*。*）

# javascript - Flash 和外部 Javascript

> ID：12275689
> 
> 赞同：0
> 
> 时间：2012-09-05T06:33:06.853
> 
> 标签：javascript, actionscript-3, flash

> **可能重复：**
> [使用 JavaScript 调用 Flash ExternalInterface](https://stackoverflow.com/questions/690730/calling-a-flash-externalinterface-with-javascript)

我有一个带有 AS 代码的 flash 文件。我想运行将运行 AS 函数的 Javascript。例如：在 AS 我有一个名为“loadXML”的函数。保存名为“pawel”的 SWF 文件的对象（对象的 ID）。如何运行将在“pawel”函数“loadXML”上运行的 Javascript 代码？我正在使用带有 AS 3 的 Flash 6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T08:44:44.107

我建议你检查这个[http://www.redcodelabs.com/2012/04/calling-actionscript-method-from-javascript/](http://www.redcodelabs.com/2012/04/calling-actionscript-method-from-javascript/)它有运行示例和 as3/js 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:59:15.007

你应该使用`ExternalInterface.addCallback()`方法。有关详细信息，请参阅[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#addCallback](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#addCallback) ()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:07:55.293

我相信这里的目标是向 swf（已编译外部 .as 文件）发送 xml 文件在服务器上某处的位置，以便 swf 可以编译、解析和创建某些内容。

我已经做过很多次了，使用闪存变量，这对你也可能有用。在您的网页中嵌入 .swf 时，您可以通过 js 或 html 向其发送 flash 变量，或使用 php 动态发送。一旦我的 fla 与硬编码的变量（如 xml）完美配合，我就会将 flash 变量代码添加到头部并对 fla 进行一些小的调整——这通常会破坏 fla 在 flash 中“正确”运行（因为它是现在取决于这些外部变量）

无论如何，这就是我如何做我的闪存变量（还有其他方法，值得一个好的谷歌搜索）

```
import flash.net.*;

var flashVars:Object = new Object();
flashVars = this.loaderInfo.parameters;
var xmlVal;

for (var item:String in flashVars)
{
    switch (item)
    {
        case "xmlLocation" :
            xmlVal = String(flashVars[item]);
            break;

    }

} 
```

这是发送值的javascript：

```
<script type="text/javascript">

            //flashObj
            var flashvars = {};
                flashvars.xmlLocation = "http://google.com/myXML.xml";
            var params = {wmode:"transparent"};
            var attributes = {};
                swfobject.embedSWF("images/banner.swf", "yourSliderId", "175", "300", "9.0.0", false, flashvars, params, attributes);

        </script> 
```

这是使用 SWFObject（一个开放的 API flash 嵌入 js 库）来处理 swf 嵌入。我更喜欢它，因为如果您查看上面的代码，您可以阅读并理解它，默认方式真的很难阅读、编辑和理解。

如果您只需要 XML，然后就完成了，那么这对您有用。如果您仍然需要使用 javascript 说点击“下一个”或“上一个”按钮，请参阅此网站文章，我相信这可能会进一步帮助您：http: [//arrixlive.wordpress.com/2005/03/25 /javascript-in-love-with-flash-control-swf-from-javascript/](http://arrixlive.wordpress.com/2005/03/25/javascript-in-love-with-flash-control-swf-from-javascript/)

# android - 在 ScrollView 中输入带有 MapView 的表单不显示任何内容

> ID：12275691
> 
> 赞同：0
> 
> 时间：2012-09-05T06:33:08.180
> 
> 标签：android, android-mapview, android-scrollview

> **可能重复：**
> [android MapView 总是在嵌套元素中导致 OutOfMemoryError](https://stackoverflow.com/questions/5460650/android-mapview-always-causes-an-outofmemoryerror-in-nested-elements)

抱歉问，但从昨天开始我没有找到解决方案：我是初学者，我想制作一个带有一些输入、一些按钮和一个 mapView 的表单。有很多东西然后我放了一个ScrollView。但它不再起作用了，我不知道为什么..

这是我的文件.java

```
public class Application extends MapActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;}
} 
```

这是我的长 layout.xml

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<RelativeLayout     
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/dateEvenementTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="5dp"
        android:layout_marginLeft="5dp"
        android:text="Date Evenement" />

    <TextView
        android:id="@+id/typeEvenementTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="56dp"
        android:text="Type Evenement" />

    <EditText
        android:id="@+id/dateEntree"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_below="@+id/dateEvenementTextView"
        android:text="05/09/2012"
        android:inputType="date"
        android:maxLength="10" />

    <Spinner
        android:id="@+id/listeDeChoix"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_alignLeft="@+id/typeEvenementTextView"
        android:layout_below="@+id/typeEvenementTextView" />

    <TextView
        android:id="@+id/adresseTextView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/dateEntree"
        android:text="Adresse" />

    <EditText
        android:id="@+id/adresse_entree"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_below="@+id/adresseTextView"
        android:text="10 rue de rivoli" />

    <TextView
        android:id="@+id/codePostalTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/adresse_entree"
        android:text="Code postal" />

    <EditText
        android:id="@+id/codePostal_entree"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_below="@+id/codePostalTextView"
        android:layout_gravity="left"
        android:text="75001"
        android:inputType="number"
        android:maxLength="5" />

    <TextView
        android:id="@+id/villeTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/codePostal_entree"
        android:layout_centerHorizontal="true"
        android:text="Ville" />

    <EditText
        android:id="@+id/ville_entree"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_alignLeft="@+id/villeTextView"
        android:layout_below="@+id/villeTextView"
        android:text="Paris"/>

    <com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="300dip"
        android:layout_height="300dip"
        android:clickable="false"
        android:enabled="true"
        android:layout_below="@+id/codePostal_entree"
        android:layout_centerHorizontal="true"
        android:apiKey="MapKey"
    />

    <TextView
        android:id="@+id/imageTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/mapview"
        android:text="Image" />

    <Button
        android:id="@+id/bouton_choisir_image"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_below="@+id/imageTextView"
        android:text="Selectionner une image" />

    <TextView
        android:id="@+id/image_choisie"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/bouton_choisir_image" />

    <TextView
        android:id="@+id/descriptionTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/image_choisie"
        android:text="Description" />

    <EditText
        android:id="@+id/description_multilignes"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/descriptionTextView"
        android:text="Texte prétapé pour éviter de le retapé à chaque fois"
        android:inputType="textMultiLine"
        android:minLines="3" />

    <Button
        android:id="@+id/bouton_valider_formulaire"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/description_multilignes"
        android:text="Valider" />

</RelativeLayout> 
```

提前谢谢您的回答

**编辑**：这是我的图形布局（由 Eclipse 在选项卡图形布局中显示。如您所见，一切都存在，尽管有警告（因为我没有设置 android:text="@string/str"）它在什么时候工作我不设置`ScrollView`

作为垃圾邮件预防，我不允许在 StackoverFlow 中发布图像，那么这是指向另一个站点的链接（postimage dot org） [http://postimage.org/image/dm9rlnnc1/](http://postimage.org/image/dm9rlnnc1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:37:44.540

尝试使用`android:layout_weight="1"`.

# jquery - 如何为水平 bxSlider 中的元素添加右边距

> ID：12275695
> 
> 赞同：1
> 
> 时间：2012-09-05T06:33:23.220
> 
> 标签：jquery, bxslider

我很清楚文档说我应该“*确保 ul 和 li 元素上没有填充或边距*”但是如果我真的需要幻灯片 (li) 之间的右边距怎么办？

我愿意切换到另一个插件，但它应该能够显示 html 内容（不仅是图像）并且应该能够由外部调用控制。

谷歌在这方面不是我的朋友。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:16:34.310

[很简单，你应该在 BX Slider 网站上](http://www.bxslider.com/examples/display-move-multiple-slides-once-example-one)看到这个例子

诀窍是

```
 $('#slider1').bxSlider({
     displaySlideQty: 3,
     moveSlideQty: 1
 }); 
```

并给列表元素一个固定宽度（您可以使用 text-align:center 将内部内容居中）

例如，它看起来像：

```
.demo-wrap .multiple li {
     width: 190px;
} 
```

如果它不适合你，请告诉我。对我来说它有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T08:45:40.283

好的，所以我不得不放弃 bxSlider 并改用 jcarousel。该插件处理 html 内容和外部控件。然后我能够在*.jcarousel-item-horizo​​ntal*上定义我需要的右边距。

现在一切都在顺利进行。

不确定礼仪，但由于我对自己的回答非常满意，我会将其标记为已接受...

编辑：伊姆兰的答案看起来是最好的方法，所以我取消标记我的答案并标记他的。

# javascript - 给定 for...in 构造，库提供的函数（如 jQuery.map() 或 _.each()）有什么用？

> ID：12275696
> 
> 赞同：1
> 
> 时间：2012-09-05T06:33:25.903
> 
> 标签：javascript, jquery, loops, foreach, underscore.js

似乎它正在重新发明本地提供的轮子，不是吗？真的值得额外的框架重量吗？为什么这些框架觉得有必要将其定义为附加功能，而`for...in`似乎可以很好地满足该功能的目的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T06:39:45.350

有一些[很好的理由](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)可以避免使用`for..in`迭代数组。

`$.each`并在 Javascript 1.6`_.each`中引入之前。[`Array.forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T06:37:06.973

例如，如果您执行以下操作：

```
for (var i = 0; i < 5; i += 1) {
  document.getElementById('el' + i).onclick = function () {
    alert(i);
  };
} 
```

然后，如果您单击将获得的每个元素，`5`因为它会捕获上下文，并且`i`变量在每种情况下都是相同的。

可以这样修复：

```
for (var i = 0; i < 5; i += 1) {
  (function (i) {
    document.getElementById('el' + i).onclick = function () {
      alert(i);
    };
  })(i);
} 
```

但有了`each`它会更好，所以当你这样做时（不是很好的例子，只是为了演示）：

```
$('.el').each(function (i) {
  $(this).click(function () { alert(i); });
}); 
```

然后它工作正常，因为当你在函数中传递一个变量时，上下文就会丢失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T06:43:41.383

`for ... in`还捕获原型链中的属性。您必须使用该`.hasOwnProperty()`方法来过滤掉事物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:37:13.507

# 继承问题

可以解决：

```
for (key in obj) {
  if(obj.hasOwnProprty(key)) continue;
  console.log("Property "+key+" has value "+obj[key].toString());
} 
```

我见过一些关于管子的使用：

```
if (Object.prototype.hasOwnProperty(key)) continue; 
```

...对于`hasOwnProperty`过滤器，但我认为它本质上并不安全，如果您在`hasOwnProperty`页面上包含修改对象属性的代码，那么 IDK 无论如何要告诉您什么，除了代码就在那里^^ 如果你想要它，并找到一个新的库开始使用。我的意思是，如果有人可以修改*您*对象的`hasOwnProperty`属性，那么还有什么可以阻止他们修改`Object.prototype.hasOwnProperty`呢？

无论如何，继承财产问题的一些相关链接：

[http://sugarjs.com/native](http://sugarjs.com/native)

[http://javascript.info/tutorial/native-prototypes](http://javascript.info/tutorial/native-prototypes)

[http://javascript.info/tutorial/inheritance](http://javascript.info/tutorial/inheritance)

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty#Example:_Itarate_over_properties_not_considering_inherited_properties](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty#Example:_Itarate_over_properties_not_considering_inherited_properties)

我真的希望有人`javascript.info`能帮他维护他的英文版教程，因为它真的很棒。

* * *

# for...in 的另一个问题

...是你理论上不能保证迭代顺序。如果你在处理一个数组，它不一定是索引的升序甚至降序。规范留给供应商来决定。在实践中，我读到它或多或少是统一的和可预测的，但这并不能保证就是全部。

# ios - 如何使精灵在 Cocos2D 的更新循环中跳转

> ID：12275707
> 
> 赞同：2
> 
> 时间：2012-09-05T06:34:14.800
> 
> 标签：ios, cocos2d-iphone

我有一个从顶部落下的球精灵和一个男孩在它下面。当球击中男孩的头部时，我希望它遵循抛物线路径。我尝试使用 CCJumpTo 如下，但我无法让它工作。我在更新循环中调用动作。我不允许这样做吗？我不能在更新循环中调用 CCJumpTo 吗？

```
- (void) jump
{
if(!method_called)
{ 
    method_called=TRUE; 
    CCActionInterval *jump1 = [CCJumpTo actionWithDuration:3 position:CGPointMake(400, 400) height:150 jumps:1];
    [_ball runAction:jump1];
    NSLog(@"something");
}
else 
{ 
    NSLog(@"do nothing"); 
}
}

- (void)update:(ccTime)dt
{
time ++;

if ( dpad.leftJoystick.velocity.x >  0 && x < 2000 ) {
    x = x + 10;
} else if ( dpad.leftJoystick.velocity.x < 0 && x > 0 ) {
    x = x - 10;
}
if (x > 10 && x < 2000)
    _boy.position = ccp(x, 100);

_ball.position = ccp(ball_x, ball_y);
ball_y = _ball.position.y - (speed * rebound);

_boy.anchorPoint = ccp(0, 0);    
CGRect boyBox = CGRectMake(_boy.position.x, _boy.position.y, [_boy boundingBox].size.width, [_boy boundingBox].size.height);
_ball.anchorPoint = ccp(0, 0);
CGRect ballBox = CGRectMake(_ball.position.x, _ball.position.y, [_ball boundingBox].size.width, [_ball boundingBox].size.height);

if (CGRectIntersectsRect(boyBox, ballBox) && flag == 0)
{
    rebound = -rebound;

    flag = 1;
    topFlag = 0;
    [_ball stopAllActions];
    [self jump];

}
if (_ball.position.y > 700 && topFlag == 0)
{
    rebound = -rebound;
    flag = 0;
    topFlag = 1;
}
} 
```

提前致谢。

编辑：

这是我的初始化方法

```
-(id) init
{
// always call "super" init
// Apple recommends to re-assign "self" with the "super's" return value
if( (self=[super init]) ) {
    CGSize winSize = [[CCDirector sharedDirector] winSize];
    self.ball = [CCSprite spriteWithFile:@"ball.png" 
                                           rect:CGRectMake(0, 0, 50, 50)];
    self.ball.position = ccp(275, 999);
    [self addChild:self.ball];  

    x = 0;
    ball_y = 650;
    ball_x = 300;
    rebound = 1;
    flag = 0;
    topFlag = 0;
    speed = 5;
    time = 0;
    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:
     @"boy.plist"];
    CCSpriteBatchNode *spriteSheet = [CCSpriteBatchNode batchNodeWithFile:@"boy.png"];
    //spriteSheet.scaleX = 0.5;
    //spriteSheet.scaleY = 0.5;
    NSMutableArray *walkAnimFrames = [NSMutableArray array];
    for(int i = 1; i <= 8; ++i) {
        [walkAnimFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"boy%d.png", i]]];

        CCAnimation *walkAnim = [CCAnimation animationWithFrames:walkAnimFrames delay:.1f];
        self.boy = [CCSprite spriteWithSpriteFrameName:@"boy1.png"];    
        _boy.position = ccp(100000, 100000);
        self.walkAction = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:walkAnim]];
        [CCAnimate actionWithAnimation:walkAnim restoreOriginalFrame:NO];
        [_boy runAction:_walkAction];
        _boy.flipX = YES;
        [spriteSheet addChild:_boy];

        dpad = [[MyJoystick alloc] init];
        [self addChild:dpad z:10];
        [self schedule:@selector(update:)];
    }

    [self addChild:spriteSheet];

}
return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:09:27.783

将您的操作代码保存在方法中，并使用布尔变量从更新方法中调用它，这样它只会被调用一次。像这样的东西：

在 .h 文件中取一个布尔变量 method_call：

```
-(void)update:(ccTime)dt
{
    _boy.anchorPoint = ccp(0, 0); 
    CGRect boyBox = CGRectMake(_boy.position.x, _boy.position.y, [_boy boundingBox].size.width, [_boy boundingBox].size.height);
    _ball.anchorPoint = ccp(0, 0);
    CGRect ballBox = CGRectMake(_ball.position.x, _ball.position.y, [_ball boundingBox].size.width, [_ball boundingBox].size.height);

    if (CGRectIntersectsRect(boyBox, ballBox) && flag == 0) 
    { 
        flag = 1; topFlag = 0; 
        [self callJumpAction];
    } 
}

-(void)callJumpAction 
{
    if(!method_called)
    { 
        method_called=true; 
        CCActionInterval *jump1 = [CCJumpTo actionWithDuration:3 position:CGPointMake(400, 400) height:150 jumps:1];
        [_ball runAction:jump1];
    }
    else 
    { 
        NSLog(@"do nothing"); 
    }
} 
```

希望这会有所帮助。

# css - 透明缩略图列表视图背景

> ID：12275709
> 
> 赞同：1
> 
> 时间：2012-09-05T06:34:23.463
> 
> 标签：css, cordova, jquery-mobile

我想知道如何为我的列表视图的背景设置透明度。我在我的应用背景中添加了一张静态图片，我希望它可见。我尝试了几种适用于 chrome 的背景 css 技巧，但不适用于我的 android 设备。但是，我什至无法将透明度设置为 chrome 上的列表视图背景。我唯一成功的是设置不透明度，但这也会影响文本。影响css中的子元素也不是问题。

我跟着这个：
[http](http://www.w3schools.com/css/css_background.asp)
://www.w3schools.com/css/css_background.asp 和这个
[http://www.w3schools.com/css/css_image_transparency.asp](http://www.w3schools.com/css/css_image_transparency.asp)
我还尝试添加透明图片作为背景列表视图背景和列表元素背景。

我梦想着至少与此类似的东西：http: [//www.santyago.pl/media/zoom/publish/2011/09/bzwbk04.png](http://www.santyago.pl/media/zoom/publish/2011/09/bzwbk04.png)

我使用 jQuery-Mobile 和 PhoneGap。

我试图找到类似的问题，但我只找到了与“plain Android”相关的问题： [透明/暗淡的 ListView 背景 - 我想在点击背景时破坏 ListView 活动](https://stackoverflow.com/questions/11488198/transparent-dim-listview-background-i-want-to-destroy-listview-activity-when-c)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:09:36.003

这个答案与你有关：[CSS background-image-opacity?](https://stackoverflow.com/questions/6890218/css-background-opacity)

修改父元素的不透明度总是会影响子元素。您可以尝试这种方法： [http ://robertnyman.com/2010/01/11/css-background-transparency-without-affecting-child-elements-through-rgba-and-filters/](http://robertnyman.com/2010/01/11/css-background-transparency-without-affecting-child-elements-through-rgba-and-filters/)

...但仍然 - 如果您想要一个简单的解决方案 - 只需在 gimp/photoshop 或其他编辑器中更改图像的不透明度，然后将其用作容器的背景。

# python - Python-Tkinter 文本插入不影响框

> ID：12275712
> 
> 赞同：1
> 
> 时间：2012-09-05T06:34:52.297
> 
> 标签：python, class, text, tkinter

第一次发帖，虽然在注册之前发现该网站非常有用。我在 Python 2.7 (Windows7) 上使用 Tkinter 时遇到问题：代码（我已经截断了它，因为整个事情很大）看起来像这样：

```
-------------------------------------------------------
CODE:

    #set up stuff, importing variables, etc, then we have:
class App:
     global RXSerial
     RXSerial=''
#The following lines define the topFrame, lays out the widgets.
    def __init__(self, master):
        topFrame = Frame(master)
        topFrame.pack()

        middleFrame = Frame(master)
        middleFrame.pack()

#--------------defining state variables------------
        self.inputConsole = Text(middleFrame)
        self.inputConsole.insert(INSERT,"Data recieved from Serial:")
        self.inputConsole.config(width=100,height=20)
        self.inputConsole.pack(side=LEFT,padx=20,pady=20)

#blah blah blah, insert a bunch of stuff (buttons etc.) here:

#The following lines define the functions to be called when the buttons are pressed.
    def engineFire(self,engineUse,pwm): 
       RXSerial='this should pop up in the text called inputConsole'
       print RXSerial
       self.inputConsole.insert(INSERT, RXSerial)
--------------------------------------------------- 
```

所以是的，基本上 RXSerial 是一个字符串（我已经检查过它正在工作，当按钮调用时打印 RXSerial 行成功打印。问题是 self.inputConsole.insert(INSERT,RXSerial) 行不工作。可以有人请帮忙吗？我尝试了一堆东西的组合，但似乎无法让它工作。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:15:21.783

如果您尝试从另一个线程插入文本，它可能无法正常工作。此外，如果在某些时候您将文本小部件配置为处于禁用状态，则插入将失败。如果是这种情况（小部件被禁用），暂时将状态设置为“正常”将解决问题。

如果没有更多信息，就不可能肯定地说。

# c++ - CPP_TEST.exe 中 0x7604c128 处的未处理异常：0xC00000FD：堆栈溢出

> ID：12275717
> 
> 赞同：0
> 
> 时间：2012-09-05T06:35:20.760
> 
> 标签：c++, c, malloc, free

为什么`stackover flow`在我使用的地方`fflush`和`free`代码中会发生这种情况。请帮我。

```
using namespace std;

    struct abc{
        int x;int y;
        }abc;

int _tmain(int argc, _TCHAR* argv[])
{
    struct abc *xyz = (struct abc *) malloc(sizeof(struct abc));
    xyz->x = 5;
    printf("%d\n", xyz->x);
    //system("pause");
        free(xyz);
     // xyz = NULL;
        fflush(stdout);
        _tmain(NULL, NULL);

    return 0;
} 
```

编辑代码：

```
xyz:
    struct abc *xyz = (struct abc *) malloc(sizeof(struct abc));
    xyz->x = 5;
    printf("%d\n", xyz->x);
    //system("pause");

    free(xyz);
    xyz = NULL;
    fflush(stdout);
    goto xyz; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T06:37:39.577

`_tmain()`您从函数中无条件地调用该函数`_tmain()`，导致无限递归。每个调用都需要在堆栈上分配空间（永远不会释放），从而导致您的 StackOverflow 异常。看看例如[维基百科](http://en.wikipedia.org/wiki/Stack_overflow)太完全理解这个问题。

除此之外，从您自己的代码中调用该`main()`函数通常不是一个好主意，因为它被标准禁止。

> §3.6.1.3：函数 main 不得在程序中使用。

为什么你需要这样做？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:37:39.173

系统需要内存来存储堆栈上的变量，分配堆栈变量，每次递归调用都会占用内存。此外，它还需要内存来存储每个递归调用的返回指针。

# httplistener - 消息代理的 Http 侦听器

> ID：12275720
> 
> 赞同：1
> 
> 时间：2012-09-05T06:35:34.960
> 
> 标签：httplistener, messagebroker

消息代理中 biphttplisetner 的作用是什么？它只是用于 HTTP 节点吗？（HTTPInput、HTTPReply 等）还是消息代理的某些其他功能需要它。

如果 tnsnames.ora 中指定的数据库连接 url 不正确，我看到 biphttplistener 不会出现。这个httplistener和数据库有什么联系？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:01:28.680

您对该案例的信息很少（版本、日志等），但简而言之：biphttplistener 是提供 SOAP 输入和 HTTP 输入节点的 http 侦听器。通常，它设置为在给定端口（例如 7080）上侦听代理服务器的公共网络接口。

至于db的关系，请提供版本和日志帮助排查

# android - 需要 setdropdownview 资源标识符

> ID：12275724
> 
> 赞同：2
> 
> 时间：2012-09-05T06:35:41.750
> 
> 标签：android, spinner

试图在android中制作一个微调器：

 `````
package com.example.test; 
import android.app.Activity;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.BaseAdapter;

public class SpinnerBuilding extends Activity {
Spinner spinner = (Spinner) findViewById(R.id.building);

// Create an ArrayAdapter using the string array and a default spinner layout
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
        R.array.buildings_array, android.R.layout.simple_spinner_item);

// Specify the layout to use when the list of choices appears
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

// Apply the adapter to the spinner
spinner.setAdapter(adapter);
} 
````  `它抛出一个错误，说`"Syntax error on token "setDropDownViewResource", identifier expected after this token.`此外，`spinner.setAdapter(adapter);`也不起作用。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:42:37.383

您需要将整个代码移动到某个方法中，您不能从类中的方法之外执行代码。

最好将整个代码移动到 Oncreate 中。

```
public class SpinnerBuilding extends Activity {
public void onCreate(Bundle b){

super.onCreate(b);
setContentView(R.id.layout);
Spinner spinner = (Spinner) findViewById(R.id.building);

// Create an ArrayAdapter using the string array and a default spinner layout
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
        R.array.buildings_array, android.R.layout.simple_spinner_item);

// Specify the layout to use when the list of choices appears
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

// Apply the adapter to the spinner
spinner.setAdapter(adapter);
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:44:43.443

你不能只在课堂上的某个地方这样做。我建议将您拥有的几乎所有内容都放入 onCreate() 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:45:38.273

您应该在 Oncreate() 中设置适配器。并且还使用 setContentView(R.layout.yourlayout)。``

# php - Mongodb 和 PHP APC

> ID：12275727
> 
> 赞同：2
> 
> 时间：2012-09-05T06:35:52.690
> 
> 标签：php, mongodb, apc

我刚刚运行了一个测试，通过 nginx/php fastcgi 创建了 1000 个到 mongodb 的非持久连接，这在我的开发机器上花费了大约 2.1 秒。然后我尝试使用持久连接进行相同的测试，结果相同。我想我在某处读到过，现在始终启用 php 驱动程序中的持久性。接下来，我尝试将连接存储到 APC，这导致第一次请求后的响应时间为 7-9 毫秒。现在我想知道一些事情：

1.  我几乎从来没有想过我想在我的应用程序中一次创建多个连接，并且根据我的理解，通过持久连接，mongo 驱动程序会根据需要创建新连接。

2.  创建单个连接似乎与从 APC 中提取存储的连接对象所花费的时间大致相同。缓存连接对象真的会带来好处吗？

3.  缓存我当然知道的连接仍然需要某种检查以查看它是否仍然是有效连接..在每次执行此检查时，我想知道它是否会否定从缓存中提取它的性能增益（如果有的话） .

我似乎无法真正找到任何真正涵盖其中任何内容的材料，所以我假设这是因为我对自己的理解感到困惑。你们有没有人尝试过这个？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:52:05.700

首先，据我所知，APC 在存储数据时会对其进行序列化。因此在 APC 中存储任何连接都没有任何意义。

然后，php 进程将针对各种请求重用persistend 连接。因此，将为 php 进程将收到的每个请求重新建立非持久连接。

# ios - iOS : 向 facebook 好友发送邀请

> ID：12275728
> 
> 赞同：2
> 
> 时间：2012-09-05T06:35:53.340
> 
> 标签：ios, facebook, invitation

我正在使用 Facebook SDK 连接`Facebook`我的应用程序。用户将登录一次，`MyApp`并向他们的朋友发出邀请。我成功地获得`ids`了`name`所有 Facebook 朋友。但我无法访问 Facebook 朋友的电子邮件 ID。**有没有办法访问 Facebook 朋友的电子邮件 ID？**这样我就可以向他们发送邀请电子邮件。

**有没有其他方法可以在应用程序中完成邀请功能。** 我每小时搜索一次`google`，`so`但没有结果指向我的解决方案。

**编辑：** 我已经接受了一个答案，也就是说，没有办法访问朋友的电子邮件 ID。所以我正在寻找其他解决方案。应该有一些解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:20:32.170

您无法获取 Facebook 好友的所有电子邮件 ID。但是，如果您的应用中有“好友”或“朋友”之类的概念，您可以向您的应用注册用户的邮件 ID 发送请求，这些用户已经是您的 Facebook 好友。这就是 Instagram 等许多社交网络应用程序的做法。

**Instagram 中的“通过 Facebook 查找好友”功能**列出了用户在 Instagram 上的 Facebook 好友。

例如：A 和 B 是在 Instagram 上注册的 2 个用户。A 和 B 是 Facebook 好友。但是 A 和 B 不是 Instagram 上的好友。

在使用“通过 Facebook 查找朋友”功能时，Instagram 会获取用户的 Facebook-email-ID、Facebook-ID 等。Facebook 以这样一种方式提供 API，用户可以列出他的朋友 ID。现在，进行配对以检查是否有朋友的 Facebook-ID 已在 Instagram 注册。因此，它列出了已经在 Instagram 注册的用户的所有 Facebook 朋友，以便用户可以将他/她添加到用户的好友列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T12:51:55.523

也许这就是你要找的？

[http://developers.facebook.com/docs/tutorials/ios-sdk-games/requests/](http://developers.facebook.com/docs/tutorials/ios-sdk-games/requests/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:47:00.710

你不能。除非他们公开他们的电子邮件

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

# iphone - 事件不能拖到新的一天。这应该可以通过，比如说，将它放在屏幕的一侧几秒钟

> ID：12275729
> 
> 赞同：7
> 
> 时间：2012-09-05T06:36:01.390
> 
> 标签：iphone, events, ios5, ios4, calendar

我正在开发日历中的事件功能，但我被困在一件事上。

这是我所做的：我有一个页面/界面，其中日视图是可见的。用户可以滚动到下一天/前一天，并使用特定日期信息重新加载相同的视图。所有这些事情都是动态完成的。日视图上显示特定日期的事件。

问题：我想为显示的事件实现移动/拖放功能。用户可以选择事件块并将其移至另一天。但是我无法实现相同的功能。我已在日历中附加了日视图的屏幕截图，其中事件可见。

请帮我将带有事件对象的事件移动到不同的日期（如 Iphone4 日历）。我怎样才能做到这一点？

![在此处输入图像描述](../Images/f45aca6183a2bb08801458b921c910f5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T22:59:08.050

我假设您无法达到预期的效果，因为您在事件视图或日视图上跟踪移动。然后，当您加载新的日视图时，您的手势识别器将失去其上下文。如果这是您的问题，那么以下步骤可能会有所帮助：

1.  识别一个视图，它是日视图的超级视图，并且在加载另一个日视图时不会卸载。
2.  将跟踪事件视图移动的 UITapGestureRecognizer 添加到该视图的控制器。
3.  跟踪识别器在状态识别器UIGestureRecognizerStateChanged 中发送事件时的手势位置，并像以前一样移动事件视图。
4.  当手势的位置在您想要更改日视图的目标区域时，将事件视图放入日视图的父视图的新子视图中，加载另一个日视图并将事件视图保持在前台（并将您的事件数据对象到新一天的上下文中）。
5.  当新的日视图加载后，恢复到您用来移动事件视图的任何方法，现在在新日视图的上下文中。

根据您的粗略问题和我的假设，这是我能给出的最佳答案。希望这可以帮助。

最好的，彼得

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:26:46.653

一种解决方法是

1.  长按现有事件
2.  创建一个与“现有事件”完全匹配的 UIButton 并添加到子视图
3.  使该 UIButton*可拖动*并具有*目标操作*
4.  用户在背景日历上滚动或滑动（在同一视图中更改日期，即：您现有的设计）
5.  用户点击 UIButton，使用按钮的位置来查找 x,y 偏移量以及当前日期。

祝你好运！

# extjs - ext js 4 在 MVC 中重用网格，行消失

> ID：12275736
> 
> 赞同：0
> 
> 时间：2012-09-05T06:36:32.670
> 
> 标签：extjs, grid, store

我的 ext JS 应用程序有问题。使用 MVC 架构：

```
 Ext.define('ME.controller.Stocks', {
    extend:'Ext.app.Controller',
    models:[
        'Logs'
    ],
    stores:[

        'Logs'

    ],
    views:[
        'portal.portalItems.logGridPanel.LogGridPanel',
        'portal.portalItems.logGridPanel.LogGrid',
        'portal.PortalPanel',
        'portal.PortalDropZone',
        'portal.PortalColumn',
        'portal.Portlet',
        'portal.portalItems.base.Panel',  
    ]
}); 
```

名为“LogGrid”的组件动态添加到视口。它的 initcomponent 函数如下所示：

```
initComponent: function()
    {
        var me=this;
var store=  Ext.create('ME.store.Logs', {
            storeId:Utils.formUID(LOGS_GRID.LOGS_STORE_ID, me[FIELDS_MAPPER.BASE_PANEL.CLIENTSIDE_GUID]),
            sorters:[
                {
                    property:FIELDS_MAPPER.LOGS_GRID.LOG_DATE,
                    direction:'DESC'
                }
            ]
        });
        this.store=store;
        this.columns=[
        {
            text:Message.get('console.portal.logGrid.DateHeaderText'),
            dataIndex:FIELDS_MAPPER.LOGS_MODEL.LOG_DATE,
            renderer:Ext.util.Format.dateRenderer('H:i:s<br>d.m.Y')
        },
        {
            text:Message.get('console.portal.logGrid.DepartmentHeaderText'),
            dataIndex:FIELDS_MAPPER.LOGS_MODEL.DEPARTMENT_NAME

        },
        {
            text:Message.get('console.portal.logGrid.ProtectionSystemsHeaderText'),
            dataIndex:FIELDS_MAPPER.LOGS_MODEL.PROTECTION_SYSTEM_NAME
        },
        {
            text:Message.get('console.portal.logGrid.PlanHeaderText'),
            dataIndex:FIELDS_MAPPER.LOGS_MODEL.PLAN_NAME
        },
        {
            text:Message.get('console.portal.logGrid.SourceHeaderText'),
            dataIndex:FIELDS_MAPPER.LOGS_MODEL.SECTION_NAME
        },
        {
            text:Message.get('console.portal.logGrid.MessageTextHeaderText'),
            dataIndex:FIELDS_MAPPER.LOGS_MODEL.EVENT_TYPE_NAME,
            minWidth:200
        },
        {
            dataIndex:FIELDS_MAPPER.LOGS_MODEL.EVENT_STATE_NAME,
            text:Message.get('console.portal.logGrid.StateHeaderText')
            //  renderer:changeStateColor
        }
    ];

        me.callParent(arguments);
    } 
```

日志存储是：

```
Ext.define('ME.store.Logs', {
    extend:'Ext.data.Store',
    model:'ME.model.Logs',
    proxy:{
        type:'ajax',
        url:URLS.JOURNAL_CONTROLLER,
        extraParams:{action:'getEvents'},
        actionMethods:{
            read:'POST'
        },
        reader:{
            type:'json',
            idProperty:FIELDS_MAPPER.LOGS_GRID.LOG_ID
        },
        autoLoad:false
    },
    pageSize:LOGS_GRID.ITEMS_PER_PAGE
}); 
```

问题是：

当我有一个网格实例时，一切正常，但是当我添加新的网格实例时，行（选择模型）从两个网格中消失。当我折叠网格时也会出现这样的错误。如果有用，网格组件位于不同的面板中。

而且我还看到了这样的事情：当我在一个使用不同存储的网格的容器中创建 LogsGrid 时，也会出现这样的错误，但是现在来自 logGrid 的行移动到另一个网格..我不知道该怎么办..第二天可以找不到答案

# java - Java 文件管理器

> ID：12275739
> 
> 赞同：0
> 
> 时间：2012-09-05T06:36:49.577
> 
> 标签：java, php

我计划在我的浏览器中实现**Java 文件管理**器。我从 **Java File Upload**获取文件并安装到我的服务器中。但它显示**jfileupload.upload.client.MApppletclass 缺失**。请帮助解决这个问题。

提前致谢。

# shell - 了解 shell 脚本中条件语句的语法

> ID：12275741
> 
> 赞同：0
> 
> 时间：2012-09-05T06:37:05.620
> 
> 标签：shell, makefile

我确实在预先编写的 Makefile 目标中看到了某些语句，它们正在调用 shell 来执行某些命令。以下是我感到困惑的语法。

```
[ -z "$(ENV_VAR)" ] || \
echo Building $(ENV_VAR); \ 
```

所以我在上述陈述中的问题是：

(1) 这是检查环境变量是否存在的条件语句吗？

(2) -z 选项是什么意思。

(3) 据我所知**“||”** 是一个逻辑运算符，它在这种用例中的表现如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:49:27.210

1.  是的。
2.  `-z`: 表达式为真，如果后面的字符串长度为零
3.  `cmd1 || cmd2`：执行`cmd2`if`cmd1`返回状态不等于零（即`cmd1`失败）

# python - 随机生成前 N 个选择

> ID：12275744
> 
> 赞同：0
> 
> 时间：2012-09-05T06:37:07.760
> 
> 标签：python, random

给定照片列表：

```
set 1 : 14 photos
set 2 : 4 photos
set 3 : 2 photos

[{'set' : 1,'photos' : ['photo1','photo2'....'photo14']}, {'set' : 2,.....] 
```

我想向用户显示 10 张图像。我希望它使第 1 组**最有可能在列表中占主导地位**（例如，10 张图像中有 6 张），而其他组不会因为数量少而受到不**公平的惩罚。**

什么是一种简单的鲁棒算法，可以产生如此美观的随机选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T06:44:57.257

```
import random
photos = [{'set' : 1,'photos' : ['photo1','photo2'....'photo14']}, {'set' : 2,.....]
weight = {1: 6, 2: 3, 3: 1} # set : number of shown photos
show = []
for d in photos:
    show.extend(random.sample(d['photos'], weight[d['set']]))
random.shuffle(show)
# show now contains a shuffled list of 6 photos from set 1, 3 from set 2 and 1 from set 3 
```

# vb.net - Visual Studio 2010 (Visual Basic) 中的发布错误

> ID：12275745
> 
> 赞同：1
> 
> 时间：2012-09-05T06:37:19.923
> 
> 标签：vb.net, visual-studio-2010

我试图使用 Visual Studio 2010 在 Visual Basic 中创建一个简单的数据库驱动应用程序。当我在 Visual Studio 环境中进行测试时，它工作正常。但是，当我发布它时，安装并在同一台计算机上运行。它没有打开。当我看到错误详细信息时，它是这样的：

```
Description:
  Stopped working

Problem signature:
  Problem Event Name:   CLR20r3
  Problem Signature 01: billingsystem.exe
  Problem Signature 02: 1.0.0.0
  Problem Signature 03: 5046c06e
  Problem Signature 04: System.Data
  Problem Signature 05: 2.0.0.0
  Problem Signature 06: 4a275e65
  Problem Signature 07: 1e65
  Problem Signature 08: 85
  Problem Signature 09: System.Data.OleDb.OleDbException
  OS Version:   6.1.7600.2.0.0.256.48
  Locale ID:    1033 
```

PS：我运行的是 Windows 7 Pro。我为我的应用程序使用了 MSACCESS 2007 数据库。并使用我正在开发的同一 Visual Studio 构建可执行文件（或发布）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:42:11.433

您的应用程序未打开的可能原因是（*可能*）在`System.Data.dll`系统上未找到（*或在发布期间未包含*）。

当我部署我的应用程序时，我总是为`SETUP`. 因为`Publish`真的被称为`Click Once`，这很有用，但**它当然不能处理**复杂的东西，比如驱动程序、注册表项、安装位置和其他东西。

这是一个很好的创建教程**[`SETUP for deployment on your Application`](http://vijirajkumar.blogspot.com/2010/03/create-setup-and-deployment-project.html)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T07:38:16.223

可能您已经修复了它，但是以防万一我找到解决问题的方法并且可能与您的问题有关，其中一个数据适配器的连接字符串是硬编码的，并且当我使用 vs 运行它时它可以工作，因为数据库已复制到temp 文件，但是当我运行已发布的版本时它不起作用。因此，我需要做的就是正确配置数据适配器。

# visual-studio - 当我在 Visual Studio 中卸载项目时，VS 将这个设置保存在哪里？

> ID：12275753
> 
> 赞同：32
> 
> 时间：2012-09-05T06:37:49.750
> 
> 标签：visual-studio, project, solution

我检查了解决方案文件和项目文件，找不到与此设置相关的任何内容。当人们从 TFS 源代码管理中获得最新版本时，他们总是看到“已加载”状态，这并不是我真正想要的。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-06T12:50:27.300

此信息存储在解决方案用户选项文件 (.suo) 中，您可以在与解决方案文件相同的目录中找到该文件。顾名思义，这是用户特定的信息，这意味着在整个团队中共享这些信息将很困难，因为每个人都需要使用相同的选项并将文件存储在确切的位置，因为 .suo 文件包含完整路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-31T20:59:42.223

对于使用 Visual Studio 2019 来到这里的其他人，项目的卸载不再保存在 SUO 中（至少根据我的经验）。要保存已卸载的项目设置，您需要创建一个与解决方案文件 (.sln) 相同的解决方案过滤器文件 (.slnf)，只是它存储了在打开解决方案时要加载或不加载的项目。创建后，您将双击 .snlf 文件而不是 .sln 文件以加载过滤的项目。

要创建解决方案过滤器文件，您可以[按照此链接上的说明](https://docs.microsoft.com/en-us/visualstudio/ide/filtered-solutions?view=vs-2019)或按照以下摘要进行操作：

1.  打开您的解决方案 (.sln)
2.  卸载要过滤掉的项目
3.  在解决方案资源管理器中右键单击解决方案
4.  选择**另存为解决方案过滤器**
5.  选择一个位置来保存文件（我把它保存在我的 .sln 文件旁边）

这会将 .slnf 添加到您最近打开的解决方案列表中，以便您可以从那里继续打开或导航到 .slnf 文件并双击它。

如果您在打开 .slnf 后仍想查看已卸载的项目，请在解决方案资源管理器中突出显示该解决方案，然后单击“**显示所有文件”**图标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-24T11:09:39.553

基于[此](https://docs.microsoft.com/en-us/visualstudio/ide/filtered-solutions?view=vs-2019#solution-filter-files)，如果您想通过源代码管理共享您的加载/卸载设置，您可以使用扩展名为*.slnf*的解决方案过滤器文件。因此，当您打开*.slnf*文件而不是*.sln*文件时，您将看到已加载过滤的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-22T22:19:06.060

在带有 Visual Studio 2022 for Mac（即 v17.0 预览版，“Visual Studio Community 2022 for Mac 预览版”）的 MacOS 上，我既看不到文件`.sln`也看不到`.slnf`文件。

我观察到卸载的项目保存在文件夹中`/.vs/[SolutionName]/xs/UserPrefs.xml`。当我关闭 Visual Studio 2022 for Mac 时，我看到它`UserPrefs.xml`已保存。

**UserPrefs.xml 片段：**

```
<DisabledProjects>
  <String>...</String>
</DisabledProjects> 
```

# java - 仅当用户从不同视图导航到视图时才执行某些代码

> ID：12275757
> 
> 赞同：0
> 
> 时间：2012-09-05T06:38:29.267
> 
> 标签：java, jsf, el, spring-webflow, spring-el

我有一个使用 Spring Web Flow 进行导航的 JSF 应用程序。每次用户从另一个视图导航到帐户视图时，都应该执行一段代码。对于帐户视图，我有一个名为 accountsBean 的托管 bean。我想在流入口处从 bean 调用一个 initView 方法。它会抛出一个 PropertyNotFoundException，因为 Spring 无法识别 accountBean。

`WEB-INF/flows/accounts-flow/flow.xml`

```
<flow xmlns="http://www.springframework.org/schema/webflow"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/webflow http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">  

    <view-state id="accounts" view="accounts.xhtml">
        <on-entry>  
            <evaluate expression="accountsBean.initView()"></evaluate>  
        </on-entry>
    </view-state>

</flow> 
```

**EDIT1**：
我的应用程序的一部分管理帐户和组。用户使用菜单在应用程序的不同部分之间导航。Spring Web Flow 用于将导航从菜单项链接到某个视图。帐户视图包含一个数据表、一些用于 CRUD 操作的按钮和一个用于选择帐户类型的选择框。根据其类型显示不同的帐户。数据表列是动态的。用户可以激活或停用某种类型。现在用户必须注销才能看到帐户类型的修改。我需要让它工作而不需要注销。

**EDIT2**：我已将流定义更改为：

```
<flow xmlns="http://www.springframework.org/schema/webflow"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/webflow http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">  

    <var name="accountsFlow" class="com.acme.accounts.AccountsFlow" /> 

    <view-state id="accounts" view="accounts.xhtml">
        <on-entry>  
            <evaluate expression="accountsFlow.initView()"></evaluate>  
        </on-entry>
    </view-state>

</flow> 
```

AccountsFlow 用 注释`org.springframework.stereotype.Component`。在 initView 方法`accountsBean`中执行了一些代码。这适用于`SessionScoped`bean，但 BalusC 提出的解决方案更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:44:53.287

BalusC 的第一条评论是正确的，但是 Spring 不支持开箱即用的 ViewScope。您必须实现自己的自定义 ViewScope 并通过 Spring applicationContext.xml 文件声明它。网上有很多这样的例子：

[http://cagataycivici.wordpress.com/2010/02/17/port-jsf-2-0s-viewscope-to-spring-3-0/](http://cagataycivici.wordpress.com/2010/02/17/port-jsf-2-0s-viewscope-to-spring-3-0/)

# javascript - 在JavaScript中将字符串中的第一个字母更改为大写

> ID：12275758
> 
> 赞同：-1
> 
> 时间：2012-09-05T06:38:31.640
> 
> 标签：javascript

我有一个字符串数组，

```
["item1", "item2"] 
```

我想将我的数组更改为

```
["showItem1", "showItem2"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T07:01:50.153

完全按照您的要求做的最容易理解的方法可能是这样的：

```
var items = ["item1", "item2"];

​for (var i=0;i<items.length;i+=1) {
   items[i] = "show" + items[i].charAt(0).toUpperCase() + items[i].substring(1);
}

console.log(items); // prints ["showItem1", "showItem2"] 
```

解释：构建一个新字符串，由字符串“show”+转换为大写的第一个字符+字符串的其余部分（第一个字符之后的所有内容，索引为0）组成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T07:01:37.937

字符串类似于数组。你可以这样做：

```
var arr = ['item1', 'item2'];
for (var i=0, l=arr.length; i<l; i++) {
  var letters = arr[i].split('');
  arr[i] = 'show' + letters.shift().toUpperCase() + letters.join('');
} 
```

**演示：http:** [//jsbin.com/asivec/1/edit](http://jsbin.com/asivec/1/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-28T10:50:27.287

```
arr.map(function(i) {
  return 'show' + i.charAt(0).toUpperCase() + i.slice(1);
}); 
```

Chrome、Firefox、IE9 等支持[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map 。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-09T04:17:37.143

这是`firstCharLowerToUpper()`我为该任务编写的可重用函数。

[现场演示](https://codverter.com/src/webeditor?query=c03764ea-28ed-425b-9d0d-67e4fdfa2a8c)

```
<!DOCTYPE html>
<html>
  <head>
    <style>
      span{
        color:red;
      }
    </style>
  </head>
  <body>
    <div>this is the text: 
      <span id="spn">
        javascript can be very fun
      </span>
    </div>
    <br/>
    <input type="button" value="Click Here" onClick="change()"/>
    <script> 
      function firstCharLowerToUpper(x)
      {
        var ar = x;
        for (var i = 0; i < ar.length; i++)
        {
          ar[i] = ar[i].charAt(0).toUpperCase() + ar[i].substr(1);
        }
        // join to string just to show the result
        return ar.join('\n');
      }
      function change()
      {
        var ar =  ["javascript ", "can ","be ","very ","fun" ];
        var newtxt = firstCharLowerToUpper(ar);
        document.getElementById("spn").innerHTML = newtxt;
      }
    </script>
  </body>
</html> 
```

# javascript - 我应该如何将响应数据保存在对象（json）中以获得更好的操作和性能？

> ID：12275761
> 
> 赞同：0
> 
> 时间：2012-09-05T06:38:47.237
> 
> 标签：javascript, json, optimization

我正在做的是：

**1.**从 ajax 响应（json 格式）中获取值，用于列出数据行

```
response = {"categories":[{"name":"General","id":"6305","pop":"show when clicked"},{"name":"Navigation","id":"6043","pop":"show when clicked"},{"name":"New","id":"6051","pop":"show when clicked"},{"name":"Time","id":"6117","pop":"show when clicked"},{"name":"Reesh","id":"6207","pop":"show when clicked"}]} 
```

**2** . 我将解析 json 并存储在这样的对象中

前任：

```
object= {6305:{"name":"General","id":"6305","pop":"show when clicked"},
6043:{"name":"Navigation","id":"6043","pop":"show when clicked"},
6051:{"name":"New","id":"6051","pop":"show when clicked"},
6117:{"name":"Time","id":"6117","pop":"show when clicked"},
6207:{"name":"Reesh","id":"6207","pop":"show when clicked"}}; 
```

为什么我这样做是因为我可以使用 id 获取数据

例如：object[6305] 会给我数据。

**3** . 这样我就可以检索数据并在数据库中发生更改时使用 id 更改对象中的值。

例如：对象[6350].pop="changed";

**请告诉我：**

-->这是否是**正确的方法**，或者我可以**以更简单或有效的方式**做到这一点？

-->我是否可以按原样存储 json 响应并按原样解析数据？如果是这样，**请举例说明。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:20:20.903

是的，当然您不需要构建`object`：

```
function getObject(id) {
    for (var i=0; i<response.categories.length; i++)
        if (response.categories[i].id == id)
            return response.categories[i];
    return null;
} 
```

但是，如果您经常需要通过对象的 id 访问对象，则此函数会很慢。像您一样创建查找表不会产生太多的内存开销，但可以更快地检索数据。

顺便说一句：您的标题问题“*将数据另存为对象或 json* ”令人困惑。将操作对象序列化回 JSON 是没有意义的，因为您总是会使用已解析的对象。当然，如果您只需要操作 JSON 字符串，并且确切地知道要做什么，那么（简单的）字符串操作*可能*比解析、操作和字符串化更快。

# mysql - MySQL 瓶颈

> ID：12275765
> 
> 赞同：2
> 
> 时间：2012-09-05T06:39:01.357
> 
> 标签：mysql, mongodb, database

我有一个具有以下结构的表：

```
ID, SourceID, EventId, Starttime, Stoptime 
```

所有 ID 列都是 char(36)，时间是日期。

问题是查询表真的很慢。我有 7 百万行，我有大约 60-70 个线程一直在向表写入（插入或更新）。

另一方面，我有需要从这个表中读取的 GUI，它在这里变得很慢。如果我想选择所有已完成的事件，`where SourceID = something`则需要将近 300 秒。SourceID 有一个索引。我采用相同的查询并首先输入解释关键字，我得到了这个。

```
select type = simple
type = ref
possible_keys = sourceidnevent,sourceid
key = soruceid
key_len = 109
ref = const
rows = 84148 
```

和查询

```
SELECT * FROM tabel where sourceid='28B791C7-D519-4F0C-BC03-EFB1D4AC9CEB' 
```

然而，我开始思考我真正需要的是什么。我想知道哪个事件发生在哪个服务器上，以及哪个事件发生在服务器上，按日期排序。我为使用*where*和*order by*的所有组合添加了索引。

我需要所有的行，因为我想对它们进行一些计算，一些分组，平均等等。但我是在 .NET 环境中做的，而不是问很多问题。

但是，如果我为选择添加限制，它会更快。那么瓶颈是传输的数据量而不是实际的*查找/选择部分*吗？如果是这样，我可以重建我的应用程序以仅在一天内进行计算并将结果保存到另一个表中，然后汇总所有数据。

我怎样才能加快进程？切换到MongoDB会更好吗？我目前使用 MySQL 和 InnoDB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T08:23:30.863

你在这里没有提供很多信息——我在其他地方的评论中提到了其中一些。

NoSQL 在单个节点上不太可能比 MySQL 快得多。如果它比在 MySQL 上使用[处理程序 API](http://dev.mysql.com/doc/refman/5.0/en/handler.html)和适当的索引更快，我会感到非常惊讶。

您已经提供了解释计划的一部分（但没有提供正在解释的查询） - 但您没有提供对此的任何解释：

> 行 = 84148

它真的需要处理那么多行来提供您需要的结果吗？如果是这样并且结果没有聚合，那么也许您需要考虑为什么需要将 80k 行数据发送到前端。如果它只需要返回一些非聚合行，那么你真的需要分析你的索引。

> 我为所有组合添加了索引

太多的索引对性能的影响与太少一样。

# php - 如何从 mysql_fetch_rows 合并多个行数

> ID：12275767
> 
> 赞同：0
> 
> 时间：2012-09-05T06:39:26.150
> 
> 标签：php, mysql, arrays

我试图获得每个类别的产品销售总数，尽管所使用的数据库结构似乎并不适合这一点。

我已经达到了这样的程度，即我在一个类别（另一个表）中拥有产品 ID（它是自己的表），而这些类别（另一个表）只被购买过（仍然是另一个表）。因此，遍历类别，我选择订单表中的 ID 并尝试计算行数。我最终得到了每个项目的项目数，但是我尝试合并并计算它们的任何方式都行不通。

```
$SQL = "SELECT * from PRODUCTS WHERE CATEGORY LIKE '%-$thiscat-%' AND STATUS = 'Active' AND STOREITEM = 'Yes' AND ID IN ($item_ids)";
$result = mysql_query( $SQL ); 
while( $row = mysql_fetch_array( $result ) ) {
   $sql_active_accounts = "SELECT count(ID) FROM ORDERS WHERE ITEM_NUMBER ='$row[ID]'";
   $res_active_accounts = mysql_query($sql_active_accounts);
   while($row_active_accounts = mysql_fetch_row($res_active_accounts)){  
       print_r($row_active_accounts); 
   }
}; 
```

print_r 给出了一个特定类别的示例，该类别仅售出 3 件商品，但有些商品售出不止一次：

```
Array ( [0] => 2 ) Array ( [0] => 3 ) Array ( [0] => 1 ) 
```

这是正确的，因为出售了三件商品，出售了这些次数。而 array_sum 对此不起作用。我似乎无法做任何事情来让这些数字相加。我试图只计算特定的行，并且真的不关心它们中的数据以获得最终结果。

我知道循环中的 SQL 调用是一个坏主意，但这是一个不会经常运行的管理区域脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:43:53.843

```
$SQL = "SELECT * from PRODUCTS WHERE CATEGORY LIKE '%-$thiscat-%' AND STATUS =  'Active' AND STOREITEM = 'Yes' AND ID IN ($item_ids)";
$result = mysql_query( $SQL ); while( $row = mysql_fetch_array( $result ) ) {
$sql_active_accounts = "SELECT count(ID) FROM ORDERS WHERE ITEM_NUMBER ='$row[ID]'";
$res_active_accounts = mysql_query($sql_active_accounts);

$int_total = 0;
while($row_active_accounts = mysql_fetch_row($res_active_accounts) {

    foreach($row_active_accounts as $i)
        $int_total += $i;

}

// Use $int_total for total value 
```

如果我理解正确的话，这样的一些应该为你解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:09:16.503

尝试这个

```
$query = mysql_query("select distinct(pgroup) from test") or die(mysql_error());

while($row = mysql_fetch_array($query)) {
    echo $row['pgroup']."=>";       
    $query1="SELECT count(*),pname FROM `test` where pgroup='$row[pgroup]' group by pname ";
    $result1=mysql_query($query1) or die(mysql_error());
    $rows1=mysql_num_rows($result1);
    while($row_sub=mysql_fetch_array($result1)) {
        $query2 = "select * from test where pname = '".$row_sub['pname']."'";
        $res2=mysql_query($query2) or die(mysql_error().'errror here');
        $row2 = mysql_num_rows($res2);
        echo $row_sub['pname']."=".$row2."<br/>";       
    }
} 
```

# javascript - 如何防止客户端/服务器两侧文本框的sql注入

> ID：12275771
> 
> 赞同：1
> 
> 时间：2012-09-05T06:39:29.597
> 
> 标签：javascript, asp.net, visual-studio-2010, c#-4.0

我的文本框有问题。

1.  当用户在文本框中写东西时，它会保存它但是sql查询或错误的文本或自动注入数据库的东西，我不知道它发生了什么；它在数据库中保存虚假数据。

2.  我在想sql是由文本格式自动注入的。

谁能为此提供解决方案？

我不能将我的文本框限制为特殊字符，这就是我面临这么多问题的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T07:56:18.233

如果无法过滤 Textbox，则必须过滤 Postback 中的数据。

*   使用**Server.HtmlEncode(your text here)**转义通常用于 SQL 注入的字符：

> 字符串 userInput = @"' 或 1=1; -- ";
> 
> 字符串编码字符串 = Server.HtmlEncode(userInput);

结果将是：

```
&#39; or 1=1; -- &lt;html&gt; 
```

*   使用 Regex 将无效字符替换为空格或任何指示字符已被替换的内容（使用 *）：

> ```
> Regex myRegex = new Regex("[\\\'\\\"\\<\\>=]", RegexOptions.Compiled | RegexOptions.IgnoreCase);
> string userInput = @"' or 1=1; -- <html>";
> string encodedString = myRegex.Replace(userInput, ""); 
> ```

结果将是：

> 或 11；-- html

*   在 SQL 查询中使用参数并在添加之前验证值

> 使用 (SqlConnection cn = new SqlConnection("Your Connection string here")) {
> 
> ```
>  using (SqlCommand cmd = new SqlCommand())
>             {
>                 cmd.Connection = cn;
>                 cmd.CommandType = CommandType.Text;
>                 cmd.CommandText = "Select * From [User] Where (UserName = @UserName AND Password = @Password)";
>                 cmd.Parameters.Add("@UserName", SqlDbType.NVarChar).Value = Server.HtmlEncode(txtUserName.Text);
>                 cmd.Parameters.Add("@Password", SqlDbType.NVarChar).Value = Server.HtmlEncode(txtPassword.Text);
>                 cn.Open();
>                 IDataReader reader = cmd.ExecuteReader();
>                 if (reader.Read())
>                 {
>                     // Your code here
>                 }
>             }
>         } 
> ```

*   有准备使用的自定义控件和选项来控制用户可以在指定文本框中输入的内容。
*   Web 编程中的最后一条建议是，您必须仔细检查（1- 客户端使用 JavaScript）和（2- 服务器端使用您自己的怀疑和关注规则）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:48:00.773

可能的解决方案：

1.  加密敏感数据。

2.  使用具有最低必要权限的帐户访问数据库。

3.  使用具有最低必要权限的帐户安装数据库。

4.  确保数据有效。

5.  进行代码审查以检查二阶攻击的可能性。

6.  使用参数化查询。

7.  使用存储过程。

8.  重新验证存储过程中的数据。

9.  确保错误消息不会泄露应用程序或数据库的内部架构。

有关详细信息，请参阅参考：[Injection-Attacks-and-Some-Tips-on-How-to-Prev](http://www.codeproject.com/Articles/9378/SQL-Injection-Attacks-and-Some-Tips-on-How-to-Prev)

# asp.net-mvc-3 - 如何将引用变量传递给 RenderPartial？

> ID：12275777
> 
> 赞同：0
> 
> 时间：2012-09-05T06:39:53.730
> 
> 标签：asp.net-mvc-3, c#-4.0, razor

我正在尝试将模型类存储传递给 RenderPartial。renderpartial 的目标是更改/设置此（存储）模型的值。我一直在尝试这样：

```
@{ Html.RenderPartial("test", new store(){Output=""}); }
@{ Html.RenderPartial("test", new store(){Output2=""}); }

public class store
    {
        public string Output { get; set; }
        public string Output2 { get; set; }
    } 
```

部分“测试”必须更改输出属性。uberhaupt 可能吗？如果可以，该怎么做？renderpartial 包含一个 javascript 来计算属性的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:11:56.087

RenderPartial 旨在不从父级或模型的一部分获取任何数据。重载位于： http: [//msdn.microsoft.com/en-us/library/system.web.mvc.html.renderpartialextensions.renderpartial](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.renderpartialextensions.renderpartial(v=vs.108).aspx) (v=vs.108).aspx 告诉你对象不是自定义对象，而是意味着成为模型的一部分，例如 Model.Customers

将所需的值从您的模型传递给部分，并让部分创建它自己的对象。

如果你真的想将它传递给局部视图，那么为你的父视图创建一个新的视图模型，并在你的视图模型中设置输出属性并将其传递给局部视图。

另请注意，部分获取它自己的数据副本并且无法更新父副本，因此可能会破坏您在此处实际想要的内容。

如果您需要一些其他计算数据，请尽可能在将其传递给视图之前在控制器中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:49:17.530

```
@store st = new store(){Output="", Output2=""};
@{ Html.RenderPartial("test", new RouteValueDictionary {{"output", st.Output}, {"output2", st.Output2}}); } 
```

# nutch - 如何爬取英文网站，避免爬取其他语言？

> ID：12275779
> 
> 赞同：0
> 
> 时间：2012-09-05T06:40:02.857
> 
> 标签：nutch, language-detection

嗨，我只需要抓取他们的语言是英语的网站。我知道 nutch 可以通过语言检测器之类的插件检测网站的语言，但我需要防止 nutch 抓取非英语网站。虽然我知道我们需要抓取一个页面来理解我想在我们可以检测到语言的第一时间离开网站的语言。你能告诉我是否可能吗？例如，如果一个站点的两个或三个页面被获取并且它们不是英语 nutch 应该离开该站点并放弃这些页面和它们的所有 url。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:58:34.507

如果您快速查看 HTTP 请求参数 (http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)，您可以询问内容语言，您会得到如下答案：“Content-Language: en”。

您不需要执行 GET 请求（并下载整个页面），您可以在 HEAD 请求中请求此参数（以便仅下载标头）。

关于“例如，如果一个网站的两个或三个页面被提取并且它们不是英语 nutch 应该离开该站点并放弃这些页面和它们的所有 url。” 一个站点可以是多语言的。因此，您可以获得西班牙语（或其他）的前 3 页，然后您将离开该站点，尽管有些页面是英语的。

# java - 哪个是使用 Java 使用 Selenium WebDriver 检查元素是否存在或显示在页面上的正确方法？

> ID：12275781
> 
> 赞同：3
> 
> 时间：2012-09-05T06:40:06.397
> 
> 标签：java, selenium-webdriver, junit4

我正在使用 Selenium WebDriver 测试一个 Web 应用程序，我想知道哪种方法是检查元素是否存在或显示的正确方法。我通常断言页面上存在所有元素，但它也会检查隐藏元素，在这种情况下，还需要检查元素是否仅在完成某些操作时才显示。例如，我单击一个链接并显示其他字段和标签，而它们之前是隐藏的。在这种情况下，我应该检查元素是否存在，以及在单击其他元素之前和之后是否显示它们。

我想知道这是正确的方法。检查页面上的所有元素是否太多（假设我在页面中有一些按钮、文本字段、标签、链接等）？

出于讨论的目的，我想包含一些代码片段。要检查页面上是否存在元素，我使用以下代码段：

```
public boolean isElementPresent(By by) {
    try {
        driver.findElement(by);
        return true;
    } catch (NoSuchElementException e) {
        return false;
    }
} 
```

要检查是否显示元素，我使用以下代码段：

```
public boolean isElementDisplay(By by) {
    if (driver.findElement(by).isDisplayed()) {
        return true;
    } else
        return false;
} 
```

测试此应用程序的一个目的是检查元素是否存在并正确显示。我在这里做正确的事吗？请给我你的观点。我最近开始使用 Selenium WebDriver，并且是我公司中唯一这样做的人......我没有人可以求助。任何答案表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T08:48:40.720

它没有问题，除非你在一个最初不存在的元素上调用你的“checkIfDisplayed”方法，它会抛出一个异常。我会将其修改为：

```
public boolean checkIfDisplayed(By by) {
    if (isElementPresent(by) {
    if (driver.findElement(by).isDisplayed()) {
        return true;
    } else
        return false;
    } else
        return false;
} 
```

（这可能不是编译的代码，我是 C# 人，但你应该明白我的意思）

它可能会对性能产生轻微的影响，但总的来说你所做的一切都很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T14:49:49.240

要检查元素的存在，我宁愿使用

```
public boolean isElementPresent(By by)
{
   return driver.findElements(by).size() > 0
} 
```

我真的不明白你的 checkIfDisplayed 函数背后的想法。它返回 WebElemet 的 isDisplayed() 方法返回的结果，而不添加任何新功能......

**编辑**

到目前为止，Arran 提供了最好的答案。只是稍微修改一下：

```
public boolean checkIfDisplayed(By by)
{
   List<WebElemet> elements = driver.findElements(by);
   return ((elements.size() > 0) && (elements[0].isDisplayed()));
} 
```

但是，我相信最好分别调用 isElementPresent 和 isDisplayed 。这样你就会知道测试失败的原因（如果它是由元素的存在或可见性引起的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:37:20.673

我使用相同的方法（我的意思是相同的方法）。但重要的是要了解两件事。某些元素可以存在但不可见。因此，为了验证元素是否存在，我们可以调用该方法

```
 public boolean isElementPresent(By locatorKey) {
        try {
            driver.findElement(locatorKey);
            return true;
        } catch (NoSuchElementException e) {
            return false;
        } 
```

但是 isElementPresent 方法的缺点是它可以指出 DOM 模型中在页面上不可见的元素，因此无法通过 webDriver 访问。所以在这种情况下，额外的检查可以帮助我们：

```
 driver.findElement(By.xpath(....)).isDisplayed() 
```

希望事情现在清楚了）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T09:14:18.760

我会说你的第一种方法看起来很好。

如果 findElement-call 不会给您任何结果，那么第二个会给您带来麻烦。

您应该添加一个检查是否找到一个元素，然后检查它是否显示：

```
try {
      final WebElement elem = driver.findElement(by);
      elem.isDisplayed();
      return true;
    } catch (NoSuchElementException nse) {
      return false;
    } 
```

另请注意：您忽略了多个元素与 by 实例给出的标准匹配的可能性。请参阅[findElemts() 方法](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html#findElements%28org.openqa.selenium.By%29)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-19T12:42:36.370

您还可以根据您的要求**组合这两种方法**，如下所示，

```
if(driver.findElements(By.LOCATOR).size()>0)
{
    if(driver.findElement(By.LOCATOR).isDisplayed())
    { print "Element is present and displayed"; }
    else
    { print "Element is present but not displayed"; }
} 
else
{ print "Element is not present"; } 
```

# django - Django postgresql 删除所有表和同步数据库

> ID：12275782
> 
> 赞同：0
> 
> 时间：2012-09-05T06:40:15.833
> 
> 标签：django, postgresql, sh, postgresql-9.1

我在 PostgreSql 中有一个名为“tests”的数据库。我想用 django 编写 sh 脚本来同步它，运行测试然后删除所有表。任何人都可以提出适当的解决方案吗？一点脚本：

```
DJANGO_DATABASE='tests' bin/django-admin.py syncdb  
bin/django-admin.py test MyApplication #tests will use "tests" db
sudo su postgres
psql tests
drop schema public; #i think i can drop schema and then syncdb.. or i'm wrong.
exit 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:45:17.217

据我所知，[django 可以为你做到这一点](https://docs.djangoproject.com/en/dev/topics/testing/#the-test-database)。<--**过时了**

实际上，它改变了一点:)。但这仍然是可能的：

```
#!/usr/bin/env sh
./manage.py sqlclear | ./manage.py dbshell
./manage.py syncdb 
```

这会将管理命令的输出通过管道`sqlclear`传输到`dbshell`. 这将依次执行它。

`sqlclear`将输出`DROP TABLE ...`sql 语句。

# c# - SQL Server 连接使用 GPConnNet.dll 为非 sa 用户在 Microsoft 动态 gp 中

> ID：12275787
> 
> 赞同：0
> 
> 时间：2012-09-05T06:40:58.687
> 
> 标签：c#, dynamic, econnect

我看到[这个链接](https://stackoverflow.com/questions/11865354/sql-server-connection-using-gpconnnet-dll)非 sa 用户 sql 连接字符串。

这是给出数据源名称和用户 ID 以及密码和数据库名称。但我对数据源名称有疑问：`Dynamic GP 2010`。使用这个连接字符串我有点困惑：

```
 string connection = "data source=Dynamic GP 2010;initial catalog=TWO;integrated security=False;User ID=client;Password=123"; 
```

这是给出错误：`A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)`

让我知道我必须使用哪个数据源。是`GP datasource`名称（或）`sql datasource`名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T22:44:11.873

Econnect 必须使用受信任的连接。您不能将用户名和密码传递到连接字符串中。要添加没有 sa 访问权限的用户，请将域用户添加到具有适当权限的 sql server。您还需要配置 econnect 设置以允许用户通过 econnect 访问 sql。其次，如果您在尚未设置为允许通过非 Windows 连接传入连接的 SQL 服务器上进行设置，则也需要进行设置。这可能是由于没有打开混合身份验证模式。[请参阅本文以尝试修复](https://stackoverflow.com/questions/1719399/sql-server-2008-cant-login-with-newly-created-user)

```
string connectionString = @"Data Source=localhost; Integrated Security=SSPI;Persist Security Info=False; Initial Catalog=TWO;"; 
```

# jquery - 来自 Jquery 的奇怪错误

> ID：12275790
> 
> 赞同：3
> 
> 时间：2012-09-05T06:41:10.013
> 
> 标签：jquery

```
if($("#target").html().trim().length>0){do sth} 
```

奇怪的是，我收到错误说 Uncaught TypeError: Cannot read property 'length' of undefined and in the html I have

```
<div id="target"><table><tr><td>ABC</td></tr></table></div> 
```

奇怪的问题是，如果我这样做`console.info($("#target").html().trim().length)`，它会告诉我一些数字。

我发现最奇怪的事情是避免该错误的唯一方法是更改​​ html 内容

```
<div id="target">ABC</div> 
```

没有 html 表，它不会抛出那个错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T06:47:25.200

改变你的`$("#target").html().trim().length`

到

```
$("#target").text().trim().length 
```

检查这个[jsfiddle](http://jsfiddle.net/LMNGQ/2/)，你得到的长度为51，因为它给出了***`<div>`***标签之间的html长度

[.html()](http://api.jquery.com/html/)

> 获取匹配元素集中第一个元素的 HTML 内容。

[。文本（）](http://api.jquery.com/text/)

> 获取匹配元素集中每个元素的组合文本内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T07:08:37.057

尝试直接使用innerHTML 或innerText 而不是Jquery

# jquery - jQuery 旋钮显示

> ID：12275795
> 
> 赞同：0
> 
> 时间：2012-09-05T06:41:37.693
> 
> 标签：jquery, jquery-ui, jquery-knob

我正在使用这个 jQuery 旋钮。

```
http://anthonyterrien.com/knob/ 
```

我正在使用半圆形 & 我需要显示分钟。& 旋钮下方的最大限制。默认情况下，它不显示限制。是否可以在表盘表面显示当前旋钮值（显示在旋钮中间）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:55:43.817

您是否从 github 阅读文档？

```
<script>
$('.dial')
    .trigger(
        'configure',
        {
        "min":10,
        "max":40,
        "fgColor":"#FF0000",
        "skin":"tron",
        "cursor":true
        }
    );
</script> 
```

[github](https://github.com/aterrien/jQuery-Knob)

# android - TimeUnit 中的致命异常

> ID：12275798
> 
> 赞同：0
> 
> 时间：2012-09-05T06:41:39.700
> 
> 标签：android, timeunit

我正在使用 Android 2.2 和 API 级别 8 的模拟器上运行我的应用程序。

我在我的代码中测试了以下两行：

```
 long diffInDays = TimeUnit.MILLISECONDS.toDays(diffInMs); // API Level 9
 long diffInDays = TimeUnit.DAYS.convert(diffInMs,TimeUnit.MILLISECONDS); // API Level 1 
```

我正在使用上面的行将时间以毫秒为单位转换为以天为单位的时间，但我得到以下异常。为什么？

```
09-05 06:34:43.183: W/dalvikvm(12995): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
09-05 06:34:43.222: E/AndroidRuntime(12995): FATAL EXCEPTION: main
09-05 06:34:43.222: E/AndroidRuntime(12995): java.lang.NoSuchFieldError: java.util.concurrent.TimeUnit.DAYS
09-05 06:34:43.222: E/AndroidRuntime(12995):    at org.mabna.order.businessLayer.db.BoSaleDocuments.getEntAcc002Collection(BoSaleDocuments.java:161)
09-05 06:34:43.222: E/AndroidRuntime(12995):    at org.mabna.order.ui.ActReportAcc002.onCreate(ActReportAcc002.java:178)
09-05 06:34:43.222: E/AndroidRuntime(12995):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-05 06:34:43.222: E/AndroidRuntime(12995):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
09-05 06:34:43.222: E/AndroidRuntime(12995):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
09-05 06:34:43.222: E/AndroidRuntime(12995):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
09-05 06:34:43.222: E/AndroidRuntime(12995):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
09-05 06:34:43.222: E/AndroidRuntime(12995):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-05 06:34:43.222: E/AndroidRuntime(12995):    at android.os.Looper.loop(Looper.java:123)
09-05 06:34:43.222: E/AndroidRuntime(12995):    at android.app.ActivityThread.main(ActivityThread.java:4627)
09-05 06:34:43.222: E/AndroidRuntime(12995):    at java.lang.reflect.Method.invokeNative(Native Method)
09-05 06:34:43.222: E/AndroidRuntime(12995):    at java.lang.reflect.Method.invoke(Method.java:521)
09-05 06:34:43.222: E/AndroidRuntime(12995):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-05 06:34:43.222: E/AndroidRuntime(12995):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-05 06:34:43.222: E/AndroidRuntime(12995):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T06:44:45.753

`toDays(long duration)`需要 API 级别 9。

见[http://developer.android.com/reference/java/util/concurrent/TimeUnit.html](http://developer.android.com/reference/java/util/concurrent/TimeUnit.html)

# perl - 数组中的 Perl LWP::Simple File.txt 不是空格

> ID：12275804
> 
> 赞同：0
> 
> 时间：2012-09-05T06:41:57.487
> 
> 标签：perl

该文件没有空格，我是否需要将每个单词保留在相应的数组中，内容在 var 中，文件更大，但这没关系。

```
my $file = "http://www.ausa.com.ar/autopista/carteleria/plano/mime.txt"; 

&VPM4362=008000&VPM4381=FFFFFF&VPM4372=FFFFFF&VPM4391=008000&VPM4382=FFFF00&VPM4392=FF0000&VPM4182=FFFFFF&VPM4181=FFFF00&VPM4402=FFFFFF&VPM4401=FFFF00&VPM4412=008000&VPM4411=FF0000&VPM4422=FFFFFF&VPM4421=FFFFFF&VPM4322=FFFF00&CPMV001_1_Ico=112&CPMV001_1_1=AHORRE 15%&CPMV001_1_2=ADHIERASE AUPASS&CPMV001_1_3=AUPASS.COM.AR&CPMV002_1_Ico=0&CPMV002_1_1=ATENCION&CPMV002_1_2=RADARES&CPMV002_1_3=OPERANDO&CPMV003_1_Ico=0&CPMV003_1_1=ATENCION&CPMV003_1_2=RADARES&CPMV003_1_3=OPERANDO&CPMV004_1_Ico=255&CPMV004_1_1= &CPMV004_1_2=&CPMV004_1_3=&CPMV05 _1_Ico=0&CPMV05 _1_1=ATENCION&CPMV05 _1_2=RADARES&CPMV05 _1_3=OPERANDO&CPMV006_1_Ico=0&CPMV006_1_1=ATENCION&CPMV006_1_2=RADARES&CPMV006_1_3=OPERANDO&CPMV007_1_Ico=0&CPMV007_1_1=ATENCION&CPMV007_1_2=RADARES&CPMV007_1_3=OPERANDO&CPMV08 _1_Ico=0&CPMV08 _1_1=ATENCION&CPMV08 
```

编码。

```
#!/bash/perl .T
use strict;
use warnings;
use LWP::Simple;

my $file = "http://www.ausa.com.ar/autopista/carteleria/plano/mime.txt";
my $mime = get($file);

my @new;

foreach my $line ($mime) {
    $line =~ s/&/ /g;
    push(@new, $line);
}
print "$new[0]\n"; 
```

尝试这种方式，但是当我启动数组时等于（全部一起）

我需要的输出

```
print "$new[1]\n";
VPM4381=FFFFFF 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T06:58:20.693

你不想替换 on `&`，你想[`split`](http://search.cpan.org/perldoc?perlfunc#split)on `&`。

```
@new = split /&/, $line; 
```

# cakephp - 带有hasmany的cakephp模型

> ID：12275806
> 
> 赞同：1
> 
> 时间：2012-09-05T06:42:06.940
> 
> 标签：cakephp, activerecord, has-many, cakephp-model

我对 cakephp 模型有疑问，

我想在 var $hasMany 关键字中添加动态条件

我想添加当前 user_id 之类的条件，我在登录后获得了用户 ID。

```
var $hasMany = array(
    "AskComment"=>array('limit'=>3),
    'AskStatistic',
    'AskContactsLink',
    'AskStatistic',
    'AskObject',
    'AskLikes'
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T08:09:51.840

如果要在模型中添加动态条件，则可能必须将模型关联船动态绑定到控制器的代码中。将以下代码写入您想要在现有/新关联模型上施加一些新条件的控制器方法中。

```
$this->PrimaryModel->bindModel(array('hasMany' => array(
    'AskComment' => array(
        'className' => 'AskComment',
             'foreignKey' => 'primary_id',
              'conditions' => array('AskComment.user_id' => $user_id)
         )
    )
)); 
```

看看这个链接：[动态创建和销毁关联](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#creating-and-destroying-associations-on-the-fly)。这肯定会帮助您实现同样的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:32:11.993

我认为最好将您的关联放在**Model的****构造函数**中。像这样：

 **```
/**
 * @see Model::__construct
 */
public function __construct($id = false, $table = null, $ds = null) {
    public $hasMany = array(
        'AskComment' => array(
            'className' => 'AskComment',
            'foreignKey' => 'primary_id',
            'conditions' => array(
                'AskComment.user_id' => $user_id,
            ),
        ),
    );
} 
```**

# javascript - onchange this.form.submit() 不适用于网络表单

> ID：12275810
> 
> 赞同：1
> 
> 时间：2012-09-05T06:42:11.107
> 
> 标签：javascript, submit, form-submit, onchange

以这种方式工作太久了……但似乎无法确定问题所在。已经阅读了数十篇关于 stackoverflow 和其他地方的文章。

当我单击并更改值时，它不会自动提交：

```
 <form id="orderbyfrm" name="orderbyfrm" action="http://staging.whiterabbitexpress.com/" method="post" class="orderbyfrm">
            <input name="s" value="<?php echo $wre_search_txt?>" type="hidden">
            <label for="orderby" class="sortByLabel">Sort by&nbsp;</label>
            <select class="sortByDropdown" name="orderby" id="orderby" onchange="this.form.submit();">
                <option value="Relevance">Relevance</option>
                <option value="likes" selected="selected">Likes</option>
            <option value="comments" selected="comments">Comments</option>
            </select>
</form> 
```

在 Chrome 检查器中，我看到一个错误“Uncaught TypeError: Cannot call method 'submit' of null” onchange

我也试过 onchange="javascript:document.orderbyfrm.submit" 但这也没有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T06:48:36.387

可能你在某个地方调用了元素或 JS 对象`form`，`submit`与真实形式相冲突。

最安全的方法是使用 document.getElementById：

```
<select onchange="SubmitForm('orderbyfrm');"> 
```

和 JavaScript：

```
function SubmitForm(formId) {
    var oForm = document.getElementById(formId);
    if (oForm) {
        oForm.submit(); 
    }
    else {
        alert("DEBUG - could not find element " + formId);
    }
} 
```

使用良好的旧警报进一步调试..而不是`alert("DEBUG ...`有这个：

```
var sDebugInfo = "found " + document.forms.length + " forms: \n";
for (var i = 0; i < document.forms.length; i++) {
    var curForm = document.forms[i];
    sDebugInfo += "name: " + curForm.name + ", id: " + curForm.id;
    sDebugInfo += "\n";
}
alert(sDebugInfo); 
```

根据你得到的，调试应该继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:20:08.140

对不起大家！我发现了问题。我在这个表单周围有一个损坏的 div

```
<div id="orderby" class="orderby
<form id="xxx" name="xxx" action="#" method="post" class="orderbyfrm"> 
```

固定的：

真的很感谢大家的帮助！

# java - 在 Java 中更改日期对象的时区？

> ID：12275811
> 
> 赞同：-1
> 
> 时间：2012-09-05T06:42:16.360
> 
> 标签：java, date, timezone

土耳其有两个 TimeZone GMT+2 和 GMT+3。我想将 GMT+2 日期更改为 GMT+3，但我想保护 GMT+2 时区中的小时和分钟。

我想花几小时和几分钟，然后将这些值设置为 GMT+3 TimeZone 日期。结果，小时和分钟不得更改，但时区必须仅更改。at function `toconvert`date 必须是 GMT+2 格式，但返回值必须是 GMT+3 格式。怎么做清楚？

```
public static Date convertTimezone(Date toConvert) {
    Date date = new Date();
    date.setYear(toConvert.getYear());
    date.setMonth(toConvert.getMonth());
    date.setHours(toConvert.getHours());
    date.setMinutes(toConvert.getMinutes());
    return date;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T06:49:55.950

在 Java 中，a`Date`代表一个时间点，仅此而已。这意味着`Date`它对它的打印方式、时区等一无所知......

因此，时区是您在*打印*`Date`. [DateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html)类通常用于打印，时区是您可以设置的属性的一部分`DateFormat`。通常，人们使用子类[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:49:45.403

java.util.Date 无法跟踪您的时区详细信息。改用日历

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:50:41.457

在这种情况下，您不应该使用 Date 对象。请改用日历。

```
public static Calendar convertTimezone(Calendar toConvert) {
    Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("GMT+3"));
    calendar.set(Calendar.YEAR, toConvert.get(Calendar.YEAR));
    calendar.set(Calendar.MONTH, toConvert.get(Calendar.MONTH));
    calendar.set(Calendar.DATE, toConvert.get(Calendar.DATE));
    calendar.set(Calendar.HOUR_OF_DAY, toConvert.get(Calendar.HOUR_OF_DAY));
    calendar.set(Calendar.MINUTE, toConvert.get(Calendar.MINUTE));
    return calendar;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-05T06:54:37.770

您可以使用`Calender`API 将一个时区转换为另一个时区

```
public static Date convertTimezone(Date toConvert) {
    Calender calendar = Calendar.getInstance();
    calender.setTime(toConvert);
    int hour = calender.get(Calender.HOUR_OF_DAY);
    int minutes = calender.get(Calender.MINUTE);
    Calendar ret  = new GregorianCalender(timeZone); //timeZone is destination TimeZone
    ret.setTimeInMillis(calendar.getTimeInMillis() +
            timeZone.getOffset(calendar.getTimeInMillis()) -
            TimeZone.getDefault().getOffset(calendar.getTimeInMillis()));
    ret.set(Calender.HOUR_OD_DAY, hour);
    ret.set(Calender.MINUTE, minutes);

    return ret.getTime();
} 
```

# http - HAR 解析器和报告工具

> ID：12275822
> 
> 赞同：3
> 
> 时间：2012-09-05T06:42:59.987
> 
> 标签：http, har

是否有任何用于生成页面加载时间的 csv 或 excel 输出的 HAR（Http 存档）解析器工具？我知道有 HAR 查看器，但我需要将输出作为 csv 进行绘图。

注意：编写解析器并生成 csv 输出（我已经完成）更容易，但在重新发明轮子之前，我只想检查现有工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-26T17:24:41.107

是的，您在此处获得了**har2csv**（命令行工具），您可以[在此处](https://github.com/danstuken/har2csv/downloads)[提取](https://github.com/danstuken/har2csv)zip 文件。

# android - 更改背景后手指画变慢

> ID：12275824
> 
> 赞同：3
> 
> 时间：2012-09-05T06:43:15.113
> 
> 标签：android, android-canvas

在我的 Paint App 中，我使用了自定义视图，该视图位于 Finger Paint API 演示中。像这里给出的代码：

```
public class MyView extends View {

private static final float MINP = 0.25f;
private static final float MAXP = 0.75f;
Paint mPaint;
Bitmap mBitmap;
Canvas mCanvas;
Path mPath;
private Paint mBitmapPaint;
int w, h;

public MyView(Context c) {
    super(c);
    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(0xFFFF0000);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(1);
    DisplayMetrics metrics = getContext().getResources()
            .getDisplayMetrics();
    w = metrics.widthPixels;
    h = metrics.heightPixels;
    mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
    mCanvas = new Canvas(mBitmap);
    mPath = new Path();
    mBitmapPaint = new Paint(Paint.DITHER_FLAG);
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
}

@Override
protected void onDraw(Canvas canvas) {
    // canvas.drawColor(0xFFAAAAAA);

    canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

    canvas.drawPath(mPath, mPaint);
}

private float mX, mY;
private static final float TOUCH_TOLERANCE = 4;

private void touch_start(float x, float y) {
    mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
    mY = y;
}

private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mX = x;
        mY = y;
    }
}

private void touch_up() {
    mPath.lineTo(mX, mY);
    // commit the path to our offscreen
    mCanvas.drawPath(mPath, mPaint);
    // kill this so we don't double draw
    mPath.reset();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        touch_start(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up();
        invalidate();
        break;
    }
    return true;
    }
} 
```

它工作正常，但在我的应用程序中，我放了一个按钮来更改自定义视图的背景，例如......

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == SELECT_PICTURE) {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);
            System.out.println("Image Path===========> : "
                    + selectedImagePath);
            img = (ImageView) findViewById(R.id.imageBackGround);
            // img.setImageURI(selectedImageUri);
            try {

                Bitmap bmp = BitmapFactory
                .decodeStream(getContentResolver().openInputStream(
                        selectedImageUri));
        Bitmap resizedBitmap = Bitmap.createBitmap(bmp, 0, 0,
                bmp.getWidth(), bmp.getHeight());
        Drawable drawBackground = Drawable.createFromPath(selectedImagePath);
        myView.setBackgroundDrawable(drawBackground);
        myView.invalidate();
        //img.setImageBitmap(resizedBitmap);
        //img.setScaleType(ImageView.ScaleType.FIT_XY);

            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
}

private String getPath(Uri uri) {
    // TODO Auto-generated method stub
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    if (cursor != null) {
        // HERE YOU WILL GET A NULLPOINTER IF CURSOR IS NULL
        // THIS CAN BE, IF YOU USED OI FILE MANAGER FOR PICKING THE MEDIA
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    } else {
        return null;
    }
} 
```

使用此代码，我从 SD 卡获取图像并用该图像替换自定义视图背景，在替换背景图像绘制后，手指和绘图路径之间存在一些延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:55:20.780

您也可以尝试使用禁用硬件加速

```
<application android:hardwareAccelerated="false"> 
```

# iphone - 在 ios 中无法正常工作的图像视图缩放

> ID：12275828
> 
> 赞同：1
> 
> 时间：2012-09-05T06:43:25.403
> 
> 标签：iphone, objective-c

这是我过去一周卡住的地方。我在`UIImageView`. 用户可以选择缩放图像。正在从服务器获取图像。

当用户缩放图像时，我们将 x1,x2,y1,y2（imageview）点发送到服务器，并从服务器获取相应的缩放图像并显示。

变焦仅在第一次工作。当用户一次又一次地尝试缩放时，它不起作用。

为此，我设置了一个名为 windowPanZoomOccured 的布尔值。

```
- (void)pinchGestureHandler:(UIPinchGestureRecognizer *)sender
{
            windowPanZoomOccured = TRUE;

                [self handleGestureEventWebserviceForGesture:@"zoom-out" withGestureObject:gesture_ andframeId:currentFrame_];

}//gesture_ object contains the points and velocity.

//Code for checking whether zoom event fired or not.
if (windowPanZoomOccured) 
        {
            NSLog(@"The value of the bool here in unpackdata %@\n", (windowPanZoomOccured ? @"YES" : @"NO"));
            NSLog(@"enter here");
            imageView.image = Nil;

            imageView.image = image;
           // [self.imageView setNeedsDisplay];

            windowPanZoomOccured = FALSE;
        } 
```

我试过 // [self.imageView setNeedsDisplay]; 但它不起作用。有任何想法吗 ？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:03:30.773

您可以将 imageview 放入 scrollView 并在其中进行缩放回调

> *   (void)scrollViewDidZoom:(UIScrollView *)scrollView

# database - LINQ 查询从两个数据库中获取数据

> ID：12275829
> 
> 赞同：0
> 
> 时间：2012-09-05T06:43:33.370
> 
> 标签：database, linq, entity-framework

我有两个数据库：

1.  `MasterDB`
2.  `ChildDB`

在`MasterDB`我有以下表格：

*   `Customer_Table`
*   `Tenant_Table`
*   `Customer-Tenant_Table`

在`Customer_Table`我有：

*   `CustomerId`
*   `CustomerName`

在`Tenant_Table`我有：

*   `TenantId`
*   `TenantName`

在`Customer-Tenant_Table`：

*   `Customer-Tenant_Id`
*   `CustomerId`
*   `TenantID`

现在`ChildDB`我有一张桌子`FacilityGroup_Table` ，里面有：

*   `TenantID`
*   `FacilityGroupId`
*   等等……</li>

我在这里尝试做的是以下内容。在我看来，我有一个`Customer_Table`从`MasterDB`. 在此基础上，正在捕获`CustomerName`相应的内容。`CustomerID`现在，问题是我不知道如何使用它`CustomerId`来获取相应的内容`TenantId`并将其保存`TenantId`在`FacilityGroup_Table`我的`ChildDB`. 我是 LINQ 的新手，所以我可以使用一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:00:26.737

在主数据库中编写一个视图，以连接来自不同数据库的表，这将返回您想要的结果，然后查询该视图。

# c - 为什么 struct stat 中的 st_size 字段是签名的？

> ID：12275831
> 
> 赞同：21
> 
> 时间：2012-09-05T06:43:39.067
> 
> 标签：c, linux, unix, posix

`st_size`被[定义](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_stat.h.html)为一个`off_t`.

`off_t`被[定义](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_types.h.html)为有**符号整数类型**。

为什么`st_size`定义为有符号类型？可以是负数吗？如果是负数是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T07:07:47.710

我能想到的最好的理由是避免引入无符号版本的`off_t`作为额外类型；POSIX 已经拥有大量具有相似用途的整数类型。

除此之外，能够在`st_size`大小不是一个有意义的概念时存储 -1 可能很有用；`st_size`我不确定是否有任何实现这样做，并且除了常规文件和符号链接之外，我找不到 POSIX 对内容的任何要求......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-28T17:13:50.120

在 C 的提升规则下，如果没有任何中间计算溢出，则组合不同大小的有符号类型的表达式将表现出相同的算术正确方式，而不管涉及的大小如何。然而，添加无符号类型将使代码的行为更加依赖于整数大小。

鉴于：

```
int test_size(off_t x, long y, long long z)
{
  return x-y > z;
} 
```

如果`off_t`是无符号的，则根据其大小，它可能会导致`y`提升为`unsigned long`，并在该类型上执行计算，然后将其提升为`signed long long`并与`z`使用有符号比较进行比较，或者可能导致`z`提升为`unsigned long long`，在这种情况下整体比较将以无符号方式进行。也有可能（尽管不一定可能）`off_t`足够小（和/或`long`足够大），`y`可以使用有符号算术减去。

可能大到需要至少与 一样大的量`int`，即使它们永远不会是负数，通常也应该由无符号类型表示，只有当有理由相信它们不适合特定的有符号类型但肯定适合时在其未签名的对应物中。这种情况并不常见，但在 16 位系统上存在 size_t（在架构上单个对象不可能超过 64K，但超过 32K 的对象很常见）。这种情况在文件系统接口中似乎不太引人注目（如果 32 位有符号还不够，那么 32 位无符号也可能在很长时间内也不够用）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T06:56:01.380

`off_t`定义文件中的偏移量，它可以等于文件的大小，但也可以是负数，例如向后搜索。

从偏移量和大小之间的这种关系来看，文件的大小与文件偏移量具有相同的类型。无论如何，文件大小不得为负数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T08:40:59.243

我认为 POSIX 中的某些 fseek 函数需要接受负数作为偏移量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T06:59:37.160

`off_t`用于处理许多函数中的文件偏移量。一些函数使用特殊值 -1（例如`lseek`，这样做是为了告诉您发生了错误）。许多其他数据类型在 UNIX 中被签名以适应 -1 值（例如`time_t`）。

# c# - 如何在asp.net的同一页面中将值从一个函数传递到另一个函数？

> ID：12275833
> 
> 赞同：-1
> 
> 时间：2012-09-05T06:43:43.430
> 
> 标签：c#, asp.net, .net

我创建了一个列表视图。每当我选择一个项目时，我想将该值传递给另一个事件以编辑和删除所选记录。

我怎样才能做到这一点？

**这是代码：**

```
protected void userList_SelectedIndexChanging(object sender, ListViewSelectEventArgs e) 
{ 
    userList.SelectedIndex = e.NewSelectedIndex; 
    uid = userList.DataKeys[e.NewSelectedIndex].Value.ToString(); 
    Label1.Text = "Selected username: " + uid; 

    BindGenerics(); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T08:15:10.253

尝试这个：

```
protected void userList_SelectedIndexChanging(object sender, ListViewSelectEventArgs e) 
{ 
    userList.SelectedIndex = e.NewSelectedIndex; 
    string uid = userList.DataKeys[e.NewSelectedIndex].Value.ToString(); 
    Label1.Text = "Selected username: " + uid; 

    BindGenerics(); 

    Session["SelectedUserId"] = uid;
}

protectec void edit_Click(Object sender, EventArgs e)
{
    string uid = Session["SelectedUserId"].ToString();
    // Do whatever with uid
}

protectec void delete_Click(Object sender, EventArgs e)
{
    string uid = Session["SelectedUserId"].ToString();
    // Do whatever with uid
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:05:01.483

这里有很多场景
第一个：-通过java脚本在客户端进行选择更改附加onclick按钮编辑和删除功能，并使用onselection更改事件选择的值

第二：- 在会话中设置值并进一步使用它

# android - 如何验证编辑文本以允许用户在 android 中为价格字段输入整数和浮点数

> ID：12275838
> 
> 赞同：3
> 
> 时间：2012-09-05T06:43:54.177
> 
> 标签：android

如何验证编辑文本以允许用户在 android 中输入价格的整数和浮点值

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T06:47:42.473

在 XML 中向 editText 添加属性：`android:inputType="number|numberSigned|numberDecimal"`用于有符号浮点数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-04T05:46:48.797

使用 EditText 的 inputtype：

```
android:inputType="number|numberDecimal" 
```

# android - 在 android 上使用 com.android.camera.action.CROP 裁剪保存的图像

> ID：12275842
> 
> 赞同：5
> 
> 时间：2012-09-05T06:44:13.490
> 
> 标签：android, image, android-intent, crop, android-image

我已经阅读了很多关于此的问题，但我仍然无法使用此代码......也许任何人都可以修改我的代码......我想从我知道使用 com.android.camera.action.CROP 位置的文件中裁剪图像像这样...

```
 mImageCaptureUri = Uri.fromFile(f);
    Intent intent = new Intent("com.android.camera.action.CROP");
    intent.setType("image/*");

    intent.setData(mImageCaptureUri); 
    intent.putExtra("crop", true);
    intent.putExtra("outputX", 200);
    intent.putExtra("outputY", 200);
    intent.putExtra("aspectX", 1);
    intent.putExtra("aspectY", 1);
    intent.putExtra("scale", true);
    intent.putExtra("return-data", true);

    Bundle extras = intent.getExtras();

    if (extras != null) {               
        Bitmap photo = extras.getParcelable("intent");

        tampilan.setImageBitmap(photo);
    }

    File f = new File(mImageCaptureUri.getPath());            

    if (f.exists()) f.delete(); 
```

但是当我运行代码时，什么都没有发生...... TT 谁能帮助我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T08:21:18.917

我已经成功修改了我的代码及其工作，这是我的代码..

```
Intent intent = new Intent("com.android.camera.action.CROP");
    intent.setType("image/*");
    List<ResolveInfo> list = getPackageManager().queryIntentActivities( intent, 0 );
    int size = list.size();
    if (size == 0) {            
        Toast.makeText(this, "Can not find image crop app", Toast.LENGTH_SHORT).show();

        return;
    } else {
        intent.setData(selectImageUri);        
        intent.putExtra("outputX", 300);
        intent.putExtra("outputY", 300);
        intent.putExtra("aspectX", 1);
        intent.putExtra("aspectY", 1);
        intent.putExtra("scale", true);
        intent.putExtra("return-data", true);
        if (size == 1) {
            Intent i        = new Intent(intent);
            ResolveInfo res = list.get(0);

            i.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));

            startActivityForResult(i, CROP_RESULT);
        } else {

        }

    } 
```

和这样的activityResult

```
if (resultCode == RESULT_OK){
        switch (requestCode){
        case SELECT_PICTURE :
            selectImageUri = data.getData();
            doCrop();
        break;
        case CROP_RESULT :
            Bundle extras = data.getExtras();

            if (extras != null) {               
                bmp = extras.getParcelable("data");
                temporary.setBitmap(bmp);

            }
            File f = new File(selectImageUri.getPath());            

            if (f.exists()) f.delete();
            Intent inten3 = new Intent(this, tabActivity.class);
            startActivity(inten3);
        break;
        case CAMERA_IMAGE :
            doCrop();
        break;
        }
    } 
```

也许它有用：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-21T00:01:03.013

使用这种意图是非常危险的。它甚至不是文档的一部分。[**这里**](http://commonsware.com/blog/2013/01/23/no-android-does-not-have-crop-intent.html)有一些关于为什么这是一件危险的事情的更多解释。我建议使用第三方库进行裁剪，比如[**这个**](https://github.com/lvillani/android-cropimage)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:52:02.937

然后开始活动，使用这个

```
startActivityForResult(intent, 1); 
```

然后使用以下内容获取裁剪图像

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode != RESULT_OK)return;

        switch (requestCode) {

            case 1:         
                Bundle extras = data.getExtras();
                if (extras != null) {               
                    photo = extras.getParcelable("data");               

                        tampilan.setBitmap(photo);
break;
}
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-14T10:55:05.987

```
 try {
        Intent intent = new Intent("com.android.camera.action.CROP");
        intent.setDataAndType(mPhotoUri, "image/*");
        intent.putExtra("crop", "true");
        Integer altura = documento.getAltura();
        Integer largura = documento.getLargura();
        if (altura != null && largura != null) {
            intent.putExtra("aspectY", altura);
            intent.putExtra("aspectX", largura);
        }
        File file = imagemProcessor.getNewFile();
        mCropUri = Uri.fromFile(file);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, mCropUri);
        intent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString());
        startActivityForResult(intent, REQUEST_IMAGE_CROP);
    } catch (ActivityNotFoundException e) {
        Context context = getBaseContext();
        Toast toast = Toast.makeText(context, "Your device doesn't support the crop action!", Toast.LENGTH_SHORT);
        toast.show();
    } catch (IOException e) {
        Context context = getBaseContext();
        Toast toast = Toast.makeText(context, "Fail to create file!", Toast.LENGTH_SHORT);
        toast.show();
    } 
```

# android - 相机应用程序不工作

> ID：12275843
> 
> 赞同：0
> 
> 时间：2012-09-05T06:44:20.743
> 
> 标签：android, android-camera

![](../Images/602f3d239be90577c69796bcc20582f7.png)

我的相机应用程序不工作。我尝试了一些现有的教程示例。但他们清楚地给出了编写安卓相机应用程序的代码。我使用了该代码，并且总是收到以下图像错误。

我的代码：

```
public class MainActivity extends Activity {
    private static int  PICK_FROM_CAMERA =1;
    ImageView iv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        iv=(ImageView)findViewById(R.id.imageView);

    Button button=(Button)findViewById(R.id.button1);

    button.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View view)
        {
             Intent intent = new Intent();
             intent.putExtra("aspectX", 730);
             intent.putExtra("aspectY", 1115);
             intent.putExtra("outputX", 730);
             intent.putExtra("outputY", 1115);
             intent.setAction("android.media.action.IMAGE_CAPTURE");
        startActivityForResult(intent, PICK_FROM_CAMERA);       
    }
         public void onActivityResult(int requestCode, int resultCode, Intent data) 
            {

            // switch(PICK_FROM_CAMERA)
               // {
             //   case PICK_FROM_CAMERA : if (resultCode == RESULT_OK)
              //  { 

             if(requestCode==PICK_FROM_CAMERA&&resultCode==RESULT_OK){
                    ContentValues values = new ContentValues(); 
                    values.put(Images.Media.TITLE, "title");
                    values.put(Images.Media.BUCKET_ID, "test");
                    values.put(Images.Media.DESCRIPTION, "test Image taken");
                    values.put(Images.Media.MIME_TYPE, "image/jpeg");
                    Uri uri = getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, values);
                    Bitmap photo = (Bitmap) data.getExtras().get("data");

                    //((ImageView)findViewById(R.id.selectedimage)).setImageBitmap(photo);

                    Bitmap theImage=(Bitmap)data.getExtras().get("data");
                    iv.setImageBitmap(theImage);
                    OutputStream outstream;
                    try {
                        outstream = getContentResolver().openOutputStream(uri);
                        photo.compress(Bitmap.CompressFormat.JPEG,100, outstream);
                        outstream.close();
                } catch (FileNotFoundException e) {}
                catch (IOException e){}
            }
           // break;
                }

    });
    } 
```

日志猫：

```
09-05 12:23:49.307: E/ActivityManager(58): ANR in com.android.camera (com.android.camera/.Camera)
09-05 12:23:49.307: E/ActivityManager(58): Reason: keyDispatchingTimedOut
09-05 12:23:49.307: E/ActivityManager(58): Load: 2.54 / 1.24 / 0.48
09-05 12:23:49.307: E/ActivityManager(58): CPU usage from 39468ms to 30ms ago:
09-05 12:23:49.307: E/ActivityManager(58):   qemud: 54% = 10% user + 43% kernel
09-05 12:23:49.307: E/ActivityManager(58):   system_server: 28% = 24% user + 4% kernel / faults: 1253 minor
09-05 12:23:49.307: E/ActivityManager(58):   mediaserver: 14% = 13% user + 0% kernel / faults: 238 minor 1 major
09-05 12:23:49.307: E/ActivityManager(58):   com.example.kkk: 0% = 0% user + 0% kernel / faults: 443 minor
09-05 12:23:49.307: E/ActivityManager(58):   adbd: 0% = 0% user + 0% kernel
09-05 12:23:49.307: E/ActivityManager(58):   m.android.phone: 0% = 0% user + 0% kernel / faults: 37 minor
09-05 12:23:49.307: E/ActivityManager(58):   ronsoft.openwnn: 0% = 0% user + 0% kernel / faults: 27 minor
09-05 12:23:49.307: E/ActivityManager(58):   d.process.acore: 0% = 0% user + 0% kernel / faults: 12 minor
09-05 12:23:49.307: E/ActivityManager(58):   rild: 0% = 0% user + 0% kernel
09-05 12:23:49.307: E/ActivityManager(58):   id.defcontainer: 0% = 0% user + 0% kernel / faults: 19 minor
09-05 12:23:49.307: E/ActivityManager(58):   logcat: 0% = 0% user + 0% kernel
09-05 12:23:49.307: E/ActivityManager(58):   pdflush: 0% = 0% user + 0% kernel
09-05 12:23:49.307: E/ActivityManager(58):   zygote: 0% = 0% user + 0% kernel / faults: 33 minor
09-05 12:23:49.307: E/ActivityManager(58):   ndroid.settings: 0% = 0% user + 0% kernel / faults: 27 minor
09-05 12:23:49.307: E/ActivityManager(58):   roid.alarmclock: 0% = 0% user + 0% kernel / faults: 8 minor
09-05 12:23:49.307: E/ActivityManager(58):   m.android.music: 0% = 0% user + 0% kernel / faults: 25 minor
09-05 12:23:49.307: E/ActivityManager(58):   com.svox.pico: 0% = 0% user + 0% kernel / faults: 29 minor
09-05 12:23:49.307: E/ActivityManager(58):  +.android.camera: 0% = 0% user + 0% kernel
09-05 12:23:49.307: E/ActivityManager(58): TOTAL: 99% = 49% user + 50% kernel + 0% irq + 0% softirq
09-05 12:23:49.727: D/dalvikvm(58): GC_FOR_MALLOC freed 1794 objects / 145104 bytes in 370ms
09-05 12:23:49.757: W/WindowManager(58): No window to dispatch pointer action 1
09-05 12:23:49.847: I/dalvikvm(217): threadid=3: reacting to signal 3
09-05 12:23:50.207: D/dalvikvm(58): GC_FOR_MALLOC freed 164 objects / 148312 bytes in 421ms
09-05 12:23:50.447: I/dalvikvm(162): Wrote stack traces to '/data/anr/traces.txt'
09-05 12:23:50.657: D/dalvikvm(58): GC_FOR_MALLOC freed 52 objects / 108088 bytes in 395ms
09-05 12:23:50.757: W/WindowManager(58): No window to dispatch pointer action 1
09-05 12:23:50.757: W/WindowManager(58): No window to dispatch pointer action 0
09-05 12:23:50.757: W/WindowManager(58): No window to dispatch pointer action 1
09-05 12:23:50.767: W/WindowManager(58): No window to dispatch pointer action 0
09-05 12:23:50.767: W/WindowManager(58): No window to dispatch pointer action 1
09-05 12:23:50.767: W/WindowManager(58): No window to dispatch pointer action 0
09-05 12:23:50.777: W/WindowManager(58): No window to dispatch pointer action 1
09-05 12:23:50.777: W/WindowManager(58): No window to dispatch pointer action 0
09-05 12:23:50.777: W/WindowManager(58): No window to dispatch pointer action 1
09-05 12:23:51.307: I/ARMAssembler(58): generated scanline__00000077:03515104_00000000_00000000 [ 33 ipp] (47 ins) at [0x323c90:0x323d4c] in 580143 ns
09-05 12:23:52.127: I/dalvikvm(168): Wrote stack traces to '/data/anr/traces.txt'
09-05 12:23:52.718: I/dalvikvm(243): Wrote stack traces to '/data/anr/traces.txt'
09-05 12:23:55.188: I/dalvikvm(183): Wrote stack traces to '/data/anr/traces.txt'
09-05 12:23:55.308: I/dalvikvm(191): Wrote stack traces to '/data/anr/traces.txt'
09-05 12:23:55.398: I/dalvikvm(130): Wrote stack traces to '/data/anr/traces.txt'
09-05 12:23:55.538: I/dalvikvm(228): Wrote stack traces to '/data/anr/traces.txt'
09-05 12:23:55.608: I/dalvikvm(125): Wrote stack traces to '/data/anr/traces.txt'
09-05 12:23:55.898: I/dalvikvm(217): Wrote stack traces to '/data/anr/traces.txt'
09-05 12:23:55.980: I/dalvikvm(198): Wrote stack traces to '/data/anr/traces.txt'
09-05 12:23:58.777: W/ActivityManager(58):   Force finishing activity com.android.camera/.Camera
09-05 12:23:58.777: I/ActivityManager(58): Killing com.android.camera (pid=283): user's request
09-05 12:23:58.817: I/Process(58): Sending signal. PID: 283 SIG: 9
09-05 12:23:58.848: I/WindowManager(58): WIN DEATH: Window{43ffffb0 com.android.camera/com.android.camera.Camera paused=true}
09-05 12:23:58.848: I/WindowManager(58): WIN DEATH: Window{43fad698 SurfaceView paused=false}
09-05 12:23:58.887: I/ActivityManager(58): Process com.android.camera (pid 283) has died.
09-05 12:23:58.957: I/WindowManager(58): Setting rotation to 0, animFlags=1
09-05 12:23:58.977: E/CameraService(33): getClientFromCookie: client appears to have died
09-05 12:23:59.007: I/ActivityManager(58): Config changed: { scale=1.0 imsi=310/260 loc=en_US touch=3 keys=2/1/2 nav=1/1 orien=1 layout=18 uiMode=17 seq=5}
09-05 12:23:59.447: W/InputManagerService(58): Got RemoteException sending setActive(false) notification to pid 283 uid 10006
09-05 12:24:01.827: D/dalvikvm(58): GC_EXPLICIT freed 1171 objects / 270992 bytes in 138ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:52:58.380

更改 setAction 如下；松开“”

```
 Intent intent = new Intent();
     intent.putExtra("aspectX", 730);
     intent.putExtra("aspectY", 1115);
     intent.putExtra("outputX", 730);
     intent.putExtra("outputY", 1115);
     intent.setAction(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(intent, PICK_FROM_CAMERA); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:57:24.693

清单文件中需要相机权限。您是否在清单文件中获得了权限，在 android 清单文件中添加此代码，

```
<uses-permission android:name="android.permission.CAMERA" ></uses-permission> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T07:00:53.617

尝试在您的意图（）中传递它。

```
Intent intent =  new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
```

把它放在你的清单中

```
<uses-permission android:name="android.permission.CAMERA" />

    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" /> 
```

# version-control - 如何从 TFS 中删除从工作副本中删除的所有文件？

> ID：12275846
> 
> 赞同：8
> 
> 时间：2012-09-05T06:44:28.233
> 
> 标签：version-control, tfs

我已经手动删除了工作区中的一些文件/文件夹。我如何为我的 TFS 工作区中的这些项目挂起删除并让这些删除反映在存储库中（通过命令行或编程 API）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T11:17:44.210

您应该能够使用[Team Foundation Server Power Tools](http://aka.ms/tfpt)`tfpt online /deletes`中的命令。它将提示您“提升”任何不在服务器工作区中的未跟踪本地更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T14:48:36.463

删除工作文件夹中的项目不会反映源代码管理中的删除。要从源代码管理中删除项目，请执行以下操作：

1.  从源代码管理 ui 中删除它，通过右键单击该项目并删除然后提交更改来执行此操作。

2.  打开 VS 命令行并运行 tf properties 命令，例如：`tf properties /s:TFSServerCollection "$/FilePath/Filename.jpg"` 这将让您检索删除 ID，对于此示例，假设删除 ID 12345

3.  在同一个 VS 命令行窗口中，运行 tf destroy 命令，例如：`tf destroy /s:TFSServerCollection "$/FilePath/Filename.jpg";x12345`

不要忘记在删除 ID 之前添加“x”。按回车，它会提示您是否要删除该项目。说是，然后按 Enter。请小心，因为 tf destroy complete 从源代码管理中删除了项目和/或文件夹，包括它的历史记录。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-20T22:32:38.967

在 Visual Studio 2012 中：将检测到这些删除，但会在“排除的更改”部分中列出。打开此列表并单击以“促进”更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T07:12:06.143

已删除的文件可以像常规更改一样签入，但是 - 如果您使用解决方案资源管理器签入，则不包括已删除的文件（因为只有在解决方案中仍然存在的文件才会包含在更改集中）。

我总是通过 source-control-explorer 进行签入 - 然后已删除的文件也包含在签入中（如果这些已删除的文件位于您签入的源代码控制文件夹下方）

问候约翰内斯

PS：如果您通过 Windows 文件资源管理器删除文件，它们不会在您的工作副本中标记为“已删除”。始终使用 VS2010 删除文件（或者 TFS Server-Powertools 中包含的 shell 扩展）

# postgresql - 如何在 postgresql 中创建长时间运行的 select 语句以进行测试？

> ID：12275847
> 
> 赞同：0
> 
> 时间：2012-09-05T06:44:29.020
> 
> 标签：postgresql

> **可能重复：**
> [Postgresql 查询在 10 秒内](https://stackoverflow.com/questions/4791578/postgresql-query-in-10-seconds)

我需要创建运行时间很长的 select 语句来测试我的应用程序中的作业终止。就像是

```
SELECT * FROM delay(10000); 
```

# wordpress - 短代码的属性在 wordpress 主题中不起作用

> ID：12275852
> 
> 赞同：1
> 
> 时间：2012-09-05T06:44:45.137
> 
> 标签：wordpress, parsing, attributes, themes, shortcode

我正在使用[范围](http://themeforest.net/item/scope-agency-business-wordpress-theme/952938)主题。短代码的属性在实时站点中不起作用。虽然它在本地和另一台 linux 服务器中工作。我尝试上传插件，但效果不佳。例如，如果我有一个简码 [toggle title="This is the title"]This is the description[/toggle]，则简码已正确解析，但属性标题未解析。

任何人都可以建议我，可能是什么问题。我已禁用所有插件并尝试使用简码，但它不起作用。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T00:13:02.043

也许尝试访问短代码指向的函数并将变量直接传递给该函数：

```
the_shortcode_function("This is the title"); 
```

只需在需要短代码输出的地方调用此函数。

# blackberry - 黑莓 - 没有得到肥皂响应 xml

> ID：12275856
> 
> 赞同：0
> 
> 时间：2012-09-05T06:44:56.627
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin, mobile-application

我正在尝试通过使用 Eclipse 的 BlackBerry Java 插件在字符串中传递请求 xml 来使用 SOAP 响应 xml。在过去的两天里，我一直在寻找解决它的方法。

我附上了下面的示例代码。

```
public String CheckXml()
{
     final String requestXml="<SOAP:Envelope xmlns:SOAP=\"http://schemas.xmlsoap.org/soap/envelope/\"><header xmlns=\"http://schemas.cordys.com/General/1.0/\"></header><SOAP:Body><authenticateAgainstOID xmlns=\"http://schemas.cordys.com/OIDAuthentication\"><stringParam>HEMANTS_MUM013</stringParam><stringParam1>TATA2012</stringParam1></authenticateAgainstOID></SOAP:Body></SOAP:Envelope>";

     final String HOST_ADDRESS = "http://xyz.com/cordys/com.eibus.web.soap.Gateway.wcp?organization=o=B2C,cn=cordys,cn=cbop,o=tatamotors.com&SAMLart=MDFn+8e5dRDaRMRIwMY7nI84eEccbx+lIiV0VhsOQ7u+SKG6n5+WNB58"; 
     String result="";
     try {
         HttpConnection url=(HttpConnection)Connector.open(HOST_ADDRESS);
         url.setRequestProperty("Content-Type", "text/xml");
         url.setRequestMethod(HttpConnection.GET);
         OutputStreamWriter writer=new OutputStreamWriter(url.openOutputStream());

         writer.write(requestXml);
         writer.flush();
         writer.close();
         StringBuffer buffer1=new StringBuffer();

         InputStreamReader reader=new InputStreamReader(url.openInputStream());
         StringBuffer buffer=new StringBuffer();
         char[] cbuf=new char[2048];
         int num;

         while (-1 != (num = reader.read(cbuf))) {
            buffer.append(cbuf, 0, num);
         }

         String result1 = buffer.toString();
    } catch (Exception e) {
        System.out.println(e);
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:28:36.180

我注意到您没有在请求中包含 SoapAction 标头。

SOAP Web 服务通常有一个固定的 URL，并且使用 SoapAction 标头选择不同的方法。您可以通过在浏览器中打开 WSDL 并检查要调用的方法的格式来检查标头。

一旦您知道要选择哪个操作，请将其设置为常规 http 标头：

```
url.setRequestProperty("SOAPAction", <your action here>); 
```

代码中的另一个问题来源是您使用的旧`HttpConnection`类需要根据传输类型（MDS、BIS、Wi-Fi 等）向 URL 附加后缀。除非您的目标是 OS 4.5 和更低版本，否则您不需要使用这个遗留类。所以看看`ConnectionFactory`类，它更容易使用。它从 OS 5.0 开始可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:57:32.817

我认为你没有问的主要问题`http. getResponseCode()`。我认为 BB 在您调用它之前不会进行任何交互。

我也会在真实设备上小心使用此代码。在 BlackBerries 上搜索正确的打开连接。

# mysql - 如何从drupal 7中的自定义表中获取行？

> ID：12275862
> 
> 赞同：3
> 
> 时间：2012-09-05T06:45:11.477
> 
> 标签：mysql, drupal, drupal-7

我用过

```
 $member_id = 12;

 $results = db_query("select * from {customorders} where id = :fid", array(':fid' => $member_id));
 foreach($results as $result) {
       $name = $result['name'];
 } 
```

但我得到错误`Fatal error: Cannot use object of type stdClass as array`

那么可能是什么解决方案，如果我为 select 写了错误的查询，请纠正我

我想要“从 id = 12 的 customorders 中选择 *”，而 customorders 是我在 Drupal 数据库中创建的自定义表

请帮我..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:50:41.503

该`$result`变量作为对象数组返回。所以你应该使用`$result->name`而不是`$result['name']`.

您的代码可以固定为：

```
 $member_id = 12;

 $results = db_query("select * from {customorders} where id = :fid", array(':fid' => $member_id));
 foreach($results as $result) {
       $name = $result->name; // THE EDITED LINE.
 } 
```

希望这行得通……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-04T08:09:20.863

这对我有用：

```
$member_id = 12;

 $results = db_query("select * from {customorders} where id = :fid", array(':fid' => $member_id))->fetchAll();
 foreach($results as $result) {
       $name = $result->name; // THE EDITED LINE.
 } 
```

注意`fetchAll()`导致实际数据的结果，没有这个我只得到数据库对象。

# asp.net-mvc - 在 mvc3 中显示图表的正确方法？

> ID：12275869
> 
> 赞同：1
> 
> 时间：2012-09-05T06:45:37.797
> 
> 标签：asp.net-mvc, charts, c#-3.0

尝试了几种在asp.net mvc中呈现图表的方法，但每种都有自己的缺点，仍然不知道呈现图表的最佳方法

第一种方法是下面的

```
 public ActionResult Chart1()
  {
      Chart chart = new Chart();

      chart.ChartAreas.Add(new ChartArea());

      chart.Series.Add(new Series("Data"));

      chart.Legends.Add(new Legend("Stores"));
      chart.Series["Data"].ChartType =           SeriesChartType.Pie;
      chart.Series["Data"].Points.AddXY(1.0, 5.0);
      chart.Series["Data"].Points.AddXY(2.0, 9.0);

      var returnStream = new MemoryStream();
      chart.ImageType = ChartImageType.Png;
      chart.SaveImage(returnStream);
      returnStream.Position = 0;
      return new FileStreamResult(returnStream,           "image/png");
  }

  view

  <img src="/MyHome/Chart1" alt="" /> 
```

通过使用上述方法我可以呈现图表，因为动作方法是直接返回图像，我无法在图表的同一页面上呈现任何控件，如文本框，按钮

还有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:00:40.580

我正在使用剃刀。

首先制作一个仅用于像这样渲染图表控件的视图。

图表.cshtml：

```
 @{
        Layout = null;
        var mychart = new Chart(width: 300, height: 300)
          .AddTitle("Employee Chart")
          .AddSeries(
              chartType: "Bubble",
              name: "Employee",
              xValue: new[] { "Peter", "Andrew", "Julie", "Dave" },
              yValues: new[] { "2", "7", "5", "3" });              

    }
    <!DOCTYPE html>
    <html>
    <head>
        <title>Charts</title>
    </head>
    <body>
        <div>
            @mychart.Write();
        </div>
    </body>
    </html> 
```

然后在要放置图表控件的位置创建一个视图。

主视图：

```
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <title>MainView</title>
</head>
<body>
    <div>
        <img src="Charts"/> //Here src value must be the URL of your chart view.
    </div>
    <div>
    <input type="button" name="Button"/>
    </div>
</body>
</html> 
```

现在，您从图表视图返回的图像以`img`您在视图中指定的方式呈现`main`。

您还为此进行了局部视图以获得一些优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T08:40:43.223

为您希望图表出现的视图创建一个强类型模型：

```
public class SomeViewWithAChartModel {
    // Other model data goes here

    public Chart Chart { get; set; } // <---- Add this
} 
```

每当您想显示图表时，让您的控制器操作填充并将其返回到您的视图：

```
public ActionResult SomeViewWithAChart()
  {
      var chart = new Chart()
      // Set chart specifics...

      var model = new SomeViewWithAChartModel { Chart = chart };

      return View(model);
  } 
```

制作一个局部视图以呈现图表以及您想要在其旁边显示的任何 HTML 元素。

Chart.cshtml 部分视图：

```
@model Chart

<div>
    @Model.Write();
</div>
<div>
    <input type="button" value="Tada! />
</div> 
```

在您希望图表出现的视图中渲染部分图表视图，以及“Tada！” 按钮，例如我们的 SomeViewWithAChart 视图：

SomeViewWithAChart.cshtml：

```
<!DOCTYPE html>

<html>
<head>
    <title>Some View with a chart and a button</title>
</head>
<body>
     @Html.Partial("Chart", Model.Chart)
</body>
</html> 
```

# linux - 将 SQLite 数据库复制到另一个路径

> ID：12275872
> 
> 赞同：1
> 
> 时间：2012-09-05T06:45:50.860
> 
> 标签：linux, sqlite

我正在临时文件夹中创建一个 sqlite 数据库。现在我想将该文件复制到另一个文件夹。是否有任何 sqlite 命令来重命名 sqlite 数据库文件？

我尝试在 C++ 中使用重命名函数，但它返回错误 18。错误 18 的意思是：“包含名称 newname 的目录必须与文件位于同一文件系统上（如名称 oldname 所示）”。

有人可以建议一个更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T06:48:32.377

在正确的文件系统上使用临时目录！

首先，sqlite 数据库只是一个文件。可以随意移动或复制它，前提是：

*   上次是正确关闭的，所以日志里没有东西可以回滚
*   如果它使用预写日志类型的日志，则它是完全检查点的。

因此将其作为文件移动是正确的。现在有两种方法可以移动文件：

*   使用`rename`系统调用。
*   通过复制文件并删除旧文件。

前者有很多优点：它不能留下部分写入的文件，它不能留下两个文件，速度非常快，如果你用它来重命名旧文件，没有目标名称不会的句号t 存在（最后是 POSIX 语义，Windows 可以在 NTFS 上做到这一点，但不是 FAT 文件系统）。它还有一个重要的缺点：它只能在文件系统中工作。所以你必须：

*   如果要重命名它以确保在进程失败的情况下不会留下部分写入的文件，则需要使用重命名，因此必须使用同一文件系统上的临时位置。通常这是通过在同一目录中使用不同的名称而不是使用临时目录来完成的。
*   如果你重命名它是因为目的地可能很慢，例如因为你想把它放在网络共享上，你显然想在不同的文件系统上使用临时目录。这意味着您必须读取文件并以新名称写入。标准 C 或 C++ 库中没有此功能，但许多库都会有一个（而像 python 这样的高级语言也会有一个，你可以随时执行`/bin/mv`来为你做这件事）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-10T13:01:28.243

> 现在我想将该文件复制到另一个文件夹。是否有任何 sqlite 命令来重命名 sqlite 数据库文件？

关闭数据库。使用 shell 将数据库复制到新路径。

另请参阅[SQLite 的独特功能](https://www.sqlite.org/different.html)：

> **稳定的跨平台数据库文件**
> 
> SQLite 文件格式是跨平台的。在一台机器上编写的数据库文件可以复制到具有不同架构的不同机器上并在其上使用。大端或小端，32 位或 64 位无关紧要。所有机器都使用相同的文件格式。此外，开发人员承诺保持文件格式稳定和向后兼容，因此新版本的 SQLite 可以读取和写入旧数据库文件。
> 
> 大多数其他 SQL 数据库引擎要求您在从一个平台移动到另一个平台时转储和恢复数据库，并且通常在升级到较新版本的软件时。

# asp.net - 使用 asp.net Visual Studio 2008 远程调试实时服务器

> ID：12275873
> 
> 赞同：1
> 
> 时间：2012-09-05T06:45:55.283
> 
> 标签：asp.net, visual-studio-2008, remote-debugging, remote-server, static-ip-address

我正在使用 Visual Studio 2008 远程调试 asp.net 应用程序

服务器即时调试是一个专用服务器，具有一些静态 IP，例如 123.456.7.8 和 iis 6.0

我有一个远程桌面连接的用户帐户，使用一些用户名（如 **abc ）并作为****abc**传递

 **我在本地机器上创建了一个用户帐户，使用相同的用户名和密码。

我这样做是为了使用**Windows 身份验证进行远程调试连接**

在远程机器上启动远程调试器时，它说：

```
Msvsmon started a new server named 'user@xy1245'. Waiting for new connections.] 
```

其中**xy1245**是它带有用户名的电脑名称，如下所示：user\xy1245

要连接到这台机器，我尝试了以下步骤：

在 vs 2008 中，调试 -> 附加到进程：

运输：默认。

限定符：user@xy1245

我也试过 user@123.456.7.8 , 123.456.7.8\user@xy1245

但说不存在或防火墙阻止

但是当我尝试使用远程无身份验证（**仅限本机代码**）时。

Msvsmon 启动了一个名为“xy1245:4015”的新服务器。等待新的连接。]

然后在本地 vs 2008 中，我说 123.456.7.8:4015，它连接完美。

有没有我遗漏的步骤，或者我做错了什么？**

# android - Android自动创建活动？

> ID：12275874
> 
> 赞同：-2
> 
> 时间：2012-09-05T06:45:56.560
> 
> 标签：android

我想开发一个**电子购买**应用程序。我有类别和子产品，数据保存在外部服务器中。如果我在服务器上添加一个新类别，我想自动添加类别和产品活动。可能吗？如何自动创建新活动以及如何在 android 清单中自动添加活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:50:08.353

这是一个设计问题，活动不应与您的数据绑定。您应该为类别数据设计一个活动，为产品数据设计一个活动。如果它们有不同的外观，只需构建根活动的不同子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:48:46.857

不，你不能这样做。[`Activity`](http://developer.android.com/reference/android/app/Activity.html)对象**必须**在编译时声明，以后不能更改。您必须调整您的代码以在不同的情况下工作。

例如，假设您正在获取人力资源条目的姓名、出生日期和描述。您将创建一个`Activity`包含您的布局和[文本字段](http://developer.android.com/reference/android/widget/TextView.html)，然后`Activity`让它从您的服务器获取姓名、出生日期和描述。然后它将用数据填充文本字段，或者如果没有数据，则显示/隐藏字段。

# java - 使用什么算法/方法来采用蛮力方法？

> ID：12275880
> 
> 赞同：3
> 
> 时间：2012-09-05T06:46:21.027
> 
> 标签：java, algorithm

在阅读SO 上[给定字符的独特组合时](https://stackoverflow.com/questions/12275253/making-unique-combinations-from-the-given-characters)，我想知道这是否是使用*Brute-Force*方法的程序应用的技术？我的意思是进行 92 种组合来破解用户 ID 或密码。典型的 Windows 键盘有大约 92 个字符可用于密码。

我不是在问如何通过这种方法破解密码，而是想知道一些复杂的程序对*暴力*破解方法使用什么方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:55:46.643

使用蛮力解决问题的朴素方法确实是一种简单的[**回溯**](http://en.wikipedia.org/wiki/Backtracking)，它探索所有可能性，评估它们，然后选择最好的。

但是，对于某些问题 - 您可能有更多信息，然后是“它解决了它”或“它没有解决它”。例如，对于[SAT](http://en.wikipedia.org/wiki/Boolean_satisfiability_problem)问题（查找布尔公式是否有解） - 您可以了解“您究竟是如何得到矛盾的”（哪些变量不能满足分配）。通常我们将此问题称为**约束传播**。[**它在DPLL**](http://en.wikipedia.org/wiki/DPLL_algorithm)算法下应用于 SAT，该算法经常用于 SAT 求解器（以变化形式）。
如果您有兴趣 - 使用 SAT 求解器的现实生活中的程序多种多样，

 *另一个常见的优化是[**分支定界**](http://en.wikipedia.org/wiki/Branch_and_bound)- 意思是，你可以在到达叶子之前修剪你的“搜索树”。[旅行推销员问题](http://en.wikipedia.org/wiki/Travelling_salesman_problem)就是一个例子。如果你已经找到了一条长度为 100 的路径，并且你正在探索一条新的路径，并且达到了 101，则无需继续探索这种可能性。*

# ios - 为什么我的 UINavigationBar 不会动画？

> ID：12275887
> 
> 赞同：2
> 
> 时间：2012-09-05T06:46:39.057
> 
> 标签：ios, uinavigationcontroller, uinavigationbar

我试图让我的应用程序正常工作，以便在根视图控制器中，没有导航栏可见，并且当我将另一个视图控制器推送到我的堆栈上（使用 Storyboard segues）时，导航栏动画进入视图（淡入视图作为视图滑入视图）。

正如其他 SO 文章中所推荐的，我的根控制器中有以下内容：

```
- (void)viewWillAppear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:YES animated:animated];
    [super viewWillAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:NO animated:YES];
    [super viewWillDisappear:animated];
} 
```

导航栏确实出现/消失了，只是没有动画（淡入/淡出）。

我使用的是黑色半透明条，但我尝试了所有类型的条，没有区别。这是在 iPhone 应用程序上。我也尝试过模拟器和非模拟器。有任何想法吗？

我现在创建了一个视频，展示了我的应用程序正在做什么：

[http://youtu.be/B9fuCc2Jqtg](http://youtu.be/B9fuCc2Jqtg)

所以要明确一点，它正在正确地出现和消失，但它是突然发生的。我试图让它在这个过渡期间淡入/淡出。

我现在在 Xcode 4 / iOS 5.1 中添加了一个指向我的演示项目的链接：

[https://www.dropbox.com/sh/mwsgjyup4iumy2r/QNN7xkHXSt](https://www.dropbox.com/sh/mwsgjyup4iumy2r/QNN7xkHXSt)

**更新/回答：**最终结果证明我的代码正在“工作”，因为它正在按照 Apple 的意图进行操作，动画导航栏滑入视图。我的错误印象是它也应该同时将导航栏从不可见淡化为可见，但这不是它的工作原理。

感谢@E。Lüders 的动画代码，展示了如何按照我的意图进行操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T07:28:46.740

我刚刚实现了这个测试代码，它工作正常。在我的故事板中，导航栏是可见的。

```
//  ViewController.h
#import <UIKit/UIKit.h>
@interface ViewController : UIViewController
@end

//  ViewController.m
#import "ViewController.h"

@implementation ViewController

- (void)viewWillAppear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:YES animated:animated];
    [super viewWillAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:NO animated:animated];
    [super viewWillDisappear:animated];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Hide navigationbar on view load
    [self.navigationController setNavigationBarHidden:YES];
    // Do any additional setup after loading the view, typically from a nib.
}

@end

//////////////////////////////////////////////////////////////
// This controller gets pushed                              //
//////////////////////////////////////////////////////////////

//  ViewController2.h
#import <UIKit/UIKit.h>
@interface ViewController2 : UIViewController
@end

//  ViewController2.m
#import "ViewController2.h"
@implementation ViewController2
@end 
```

希望这可以帮助。

* * *

**编辑：**

如果您想在导航栏上显示淡入/淡出效果，请将上面的代码更改为：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.navigationController setNavigationBarHidden:YES animated:animated];

    [UIView animateWithDuration:0.5f animations:^{
        self.navigationController.navigationBar.alpha = 0.0f;
    } completion:^(BOOL finished) {}];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    self.navigationController.navigationBar.alpha = 0.0f;
    [self.navigationController setNavigationBarHidden:NO animated:animated];

    [UIView animateWithDuration:0.5f animations:^{
        self.navigationController.navigationBar.alpha = 1.0f;
    } completion:^(BOOL finished) {}];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T07:00:58.243

您可以在隐藏动画块之前将 Alpha 设置为 0，而不是设置隐藏。

像这样的东西：

```
- (void)viewWillAppear:(BOOL)animated
{
    //fade Animation
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0];
    self.navigationController.view.alpha = 0.0;
    [UIView commitAnimations];

    [self.navigationController setNavigationBarHidden:YES animated:animated];
    [super viewWillAppear:animated];
} 
```

# c# - 如何在 xml 中使用 getelementid 进行搜索

> ID：12275888
> 
> 赞同：3
> 
> 时间：2012-09-05T06:46:54.627
> 
> 标签：c#, xml

我想使用 GetElementId 搜索 XML。

我有一个 XML 文件，其中包含与每个元素关联的属性。元素名称可能有所不同，但每个元素都有唯一的 ID。

例如：

```
<root>
<secondRoot>
  <Person UniqueID='A112' Name='Fred'><FeMale>I am Female</FeMale></Person>

  <Person UniqueID='A111'><Male>I am male</Male></Person>
  <Person SSN='A222' Name='Tom'/>
  <Customer id='A111'/>
  <Customer id='A222334444'/>
  <Team members='A222334444 A333445555'/>
  <Random/>
</secondRoot>
</root> 
```

在上面的 XML 中，我有与多个元素关联的 UniqueID 属性。我想搜索具有 UniqueID 属性的元素。尽管我尝试使用以下 DTD，但它还不够。

```
<!DOCTYPE root [
  <!ELEMENT root ANY> 

  <!ATTLIST Person UniqueID ID #REQUIRED>
  ]> 
```

问题是 UniqueID 可能出现在几个元素的属性列表中。我需要避免一种情况，即我必须在 DTD 中声明每次出现具有 UniqueID 属性的元素。

任何人都可以为此提出任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:41:21.847

尝试使用 LINQ to XML，不需要 DTD。

```
// XML data
var xml = "<root><secondRoot><Person UniqueID='A112' Name='Fred'><FeMale>I am Female</FeMale></Person><Person UniqueID='A111'><Male>I am male</Male></Person>  <Person SSN='A222' Name='Tom'/>  <Customer id='A111'/>  <Customer id='A222334444'/>  <Team members='A222334444 A333445555'/>  <Random/></secondRoot></root>";

var doc = XDocument.Parse(xml);

// Get all nodes that have UniqueID
var nodes = 
    from element in doc.Descendants()
    where element.Attribute("UniqueID") != null
    select element; 
```

该`nodes` 列表将包含所有具有 UniqueID 属性的节点。

# ios - 关于 Game Center 的 [以编程方式查找比赛]

> ID：12275889
> 
> 赞同：2
> 
> 时间：2012-09-05T06:46:57.907
> 
> 标签：ios, game-center

我的项目需要在线播放。

```
 GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease]; 
    request.minPlayers = 2;     
    request.maxPlayers = 2;        

    GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
    mmvc.matchmakerDelegate = self;        
    [presentingViewController presentModalViewController:mmvc animated:YES]; 
```

上面的代码创建了一个 GameCenter 视图，如果我按下名为“Play now”的按钮，它将调用“GKMatchDelegate 的 [- (void)match:(GKMatch *)theMatch player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state]” ，它的工作正常。

但是现在，我需要使用“以编程方式查找匹配项”，直接查找匹配项而无需官方视图。

```
[[GKMatchmaker sharedMatchmaker]findMatchForRequest:request withCompletionHandler:^(GKMatch *hasmatch, NSError *error) {
        if(error)
        {
            NSLog(@"has error match!!!");
        }
        else if(hasmatch)
        {
            NSLog(@"has match!!!");//in test we really find the match.
            [presentingViewController dismissModalViewControllerAnimated:YES];
            self.match = hasmatch;
            self.match.delegate = self;
        }
    }]; 
```

现在“GKMatchDelegate 的 [- (void)match:(GKMatch *)theMatch player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state]”不起作用。

我应该怎么做，开始在线比赛？

```
- (void)match:(GKMatch *)theMatch player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state {

if (self.match != theMatch) return;

switch (state) {
    case GKPlayerStateConnected: 
        // handle a new player connection.
        NSLog(@"Player connected!");

        if (!matchStarted && theMatch.expectedPlayerCount == 0) {
            NSLog(@"Ready to start match!");
            [self lookupPlayers];//i start game here
        }

        break; 
    case GKPlayerStateDisconnected:
        // a player just disconnected. 
        NSLog(@"Player disconnected!");
        matchStarted = NO;
        [delegate matchEnded];
        break;
} 
```

}

# android - 服务分配大量内存？

> ID：12275892
> 
> 赞同：5
> 
> 时间：2012-09-05T06:47:05.013
> 
> 标签：android, memory, memory-management, service, notifications

我一直在使用 Android 开源服务示例。我只需要使用它来向用户发送通知，但奇怪的是，它分配了大量内存。我检查了正在运行的服务，它几乎是 20MB（如果我设置`ACTION_BACKGROUND`）或 30MB（如果我设置`ACTION_FOREGROUND`）......

我应该怎么做才能减少这种内存使用？

我已经阅读[了这个讨论](https://groups.google.com/forum/?fromgroups#!topic/android-developers/cBiqoeFBPr0)我没有位图或 web 视图。

这是我的服务：

```
/**
* This is an example of implementing an application service that can
* run in the "foreground".  It shows how to code this to work well by using
* the improved Android 2.0 APIs when available and otherwise falling back
* to the original APIs.  Yes: you can take this exact code, compile it
* against the Android 2.0 SDK, and it will against everything down to
* Android 1.0.
*/

public class NotificationService extends Service {

static final String ACTION_FOREGROUND = "com.example.android.apis.FOREGROUND";
static final String ACTION_BACKGROUND = "com.example.android.apis.BACKGROUND";

private static final Class<?>[] mSetForegroundSignature = new Class[] {
    boolean.class};
private static final Class<?>[] mStartForegroundSignature = new Class[] {
    int.class, Notification.class};
private static final Class<?>[] mStopForegroundSignature = new Class[] {
    boolean.class};

//    protected NotificationManager mNM;

private Method mSetForeground;
private Method mStartForeground;
private Method mStopForeground;
private Object[] mSetForegroundArgs = new Object[1];
private Object[] mStartForegroundArgs = new Object[2];
private Object[] mStopForegroundArgs = new Object[1];

void invokeMethod(Method method, Object[] args) {
    try {
        method.invoke(this, args);
    } catch (InvocationTargetException e) {
        // Should not happen.
        Log.w("ApiDemos", "Unable to invoke method", e);
    } catch (IllegalAccessException e) {
        // Should not happen.
        Log.w("ApiDemos", "Unable to invoke method", e);
    }
}

/**
 * This is a wrapper around the new startForeground method, using the older
 * APIs if it is not available.
 */
void startForegroundCompat(int id, Notification notification) {
    // If we have the new startForeground API, then use it.
    if (mStartForeground != null) {
        mStartForegroundArgs[0] = Integer.valueOf(id);
        mStartForegroundArgs[1] = notification;
        invokeMethod(mStartForeground, mStartForegroundArgs);
        return;
    }

    // Fall back on the old API.
    mSetForegroundArgs[0] = Boolean.TRUE;
    invokeMethod(mSetForeground, mSetForegroundArgs);
    // mNM.notify(id, notification);
}

/**
 * This is a wrapper around the new stopForeground method, using the older
 * APIs if it is not available.
 */
void stopForegroundCompat(int id) {
    // If we have the new stopForeground API, then use it.
    if (mStopForeground != null) {
        mStopForegroundArgs[0] = Boolean.TRUE;
        invokeMethod(mStopForeground, mStopForegroundArgs);
        return;
    }

    // Fall back on the old API.  Note to cancel BEFORE changing the
    // foreground state, since we could be killed at that point.
    // mNM.cancel(id);
    mSetForegroundArgs[0] = Boolean.FALSE;
    invokeMethod(mSetForeground, mSetForegroundArgs);
}

@Override
public void onCreate() {
    // mNM = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    try {
        mStartForeground = getClass().getMethod("startForeground",
                mStartForegroundSignature);
        mStopForeground = getClass().getMethod("stopForeground",
                mStopForegroundSignature);
        return;
    } catch (NoSuchMethodException e) {
        // Running on an older platform.
        mStartForeground = mStopForeground = null;
    }
    try {
        mSetForeground = getClass().getMethod("setForeground",
                mSetForegroundSignature);
    } catch (NoSuchMethodException e) {
        throw new IllegalStateException(
                "OS doesn't have Service.startForeground OR Service.setForeground!");
    }
}

@Override
public void onDestroy() {
    // Make sure our notification is gone.
    stopForegroundCompat(1);
}

// This is the old onStart method that will be called on the pre-2.0
// platform.  On 2.0 or later we override onStartCommand() so this
// method will not be called.
@Override
public void onStart(Intent intent, int startId) {
    handleCommand(intent);
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    handleCommand(intent);
    // We want this service to continue running until it is explicitly
    // stopped, so return sticky.
    return  START_STICKY;
}

@Override
public void onRebind(Intent intent) {
    super.onRebind(intent);
    handleCommand(intent);
}

void handleCommand(Intent intent) {
    if (intent == null)
        return;

    if (ACTION_FOREGROUND.equals(intent.getAction())) {

        DBHelper db = new DBHelper(this);

        String lastTime = db.getLastVisitTime();
        if(!lastTime.equals("-1")) {
            new Notifications(this).InviteUser();
        }

        String target = db.getTargetValue();
        if(target.equals("")) {
            new Notifications(this).TargetlessNotification();
        }

        db.close();

        /*
        // In this sample, we'll use the same text for the ticker and the expanded notification 
        CharSequence text = getString(R.string.app_name); 
        CharSequence description = getString(R.string.recall_user);

        // Set the icon, scrolling text and timestamp
        Notification notification = new Notification(R.drawable.icon, text, System.currentTimeMillis());

        // The PendingIntent to launch our activity if the user selects this notification PendingIntent
        contentIntent = PendingIntent.getActivity(this, 1, new Intent(this, YKEYarinaSaklaActivity.class), 0);

        // Set the info for the views that show in the notification panel.
        notification.setLatestEventInfo(this, text, description, contentIntent);

        // Set properties of notification 
        notification.flags = Notification.FLAG_INSISTENT | Notification.FLAG_AUTO_CANCEL; 
        notification.defaults |= Notification.DEFAULT_ALL;

        startForegroundCompat(1, notification);
        */

    } else if (ACTION_BACKGROUND.equals(intent.getAction())) {
        stopForegroundCompat(1);
    }
}

@Override
public IBinder onBind(Intent intent) {
    return null;
}
} 
```

PS：我不知道它是否相关，但我正在启动此服务 onDestroy 我的应用程序，因此它会在特定时间使用 AlarmManager 向用户发送通知。（因此不应将其杀死以避免 AlarmManager 删除我的通知。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:03:03.347

我试图尽可能简化我的服务，但情况仍然一样......然后我意识到不知何故，内存的使用量会自行减少......所以，如果我别无选择，我可以除了那。

```
public class NotificationService2 extends Service{

private String target, lastTime, notifCheck, notifCheck2;

@Override
public void onStart(Intent intent, int startId) {

    Bundle extras = intent.getExtras();
    if(extras != null) {
        this.lastTime = extras.getString("lastTime");
        this.target = extras.getString("target");
        this.notifCheck = extras.getString("notifCheck");
        this.notifCheck2 = extras.getString("notifCheck2");
    }

    handleCommand(intent);

    super.onStart(intent, startId);
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    Bundle extras = intent.getExtras();
    if(extras != null) {
        this.lastTime = extras.getString("lastTime");
        this.target = extras.getString("target");
        this.notifCheck = extras.getString("notifCheck");
        this.notifCheck2 = extras.getString("notifCheck2");
    }

    handleCommand(intent);

    // We want this service to continue running until it is explicitly
    // stopped, so return sticky.
    return START_STICKY;
}

@Override
public IBinder onBind(Intent intent) {
    handleCommand(intent);
    return null;
}

@Override
public void onRebind(Intent intent) {
    super.onRebind(intent);
    handleCommand(intent);
}

void handleCommand(Intent intent) {
    if (intent == null)
        return;

    String lastTime = this.lastTime;
    String notifCheck = this.notifCheck;
    String target = this.target;
    String notifCheck2 = this.notifCheck2;

    if(lastTime != null && notifCheck != null) {
        if(!lastTime.equals("-1") && !notifCheck.equals("1")) 
            new Notifications(this).InviteUser();
    } else this.stopSelf();

    if(target != null && notifCheck2 != null) {
        if(target.equals("") && !notifCheck2.equals("1")) 
            new Notifications(this).TargetlessNotification();
    } else this.stopSelf();

}

} 
```

# ruby-on-rails - 安装 pg gem 0.14.1 时的架构不匹配

> ID：12275896
> 
> 赞同：2
> 
> 时间：2012-09-05T06:47:15.437
> 
> 标签：ruby-on-rails, postgresql, osx-mountain-lion, pg

当这个奇怪的错误跳出来时，我试图在 Mountain Lion 中进行捆绑更新：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Volumes/MacintoshHD/Users/wlicpsc/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
checking for pg_config... yes
Using config values from /Library/PostgreSQL/9.1/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... yes
checking for PQconnectionUsedPassword()... yes
checking for PQisthreadsafe()... yes
checking for PQprepare()... yes
checking for PQexecParams()... yes
checking for PQescapeString()... yes
checking for PQescapeStringConn()... yes
checking for PQescapeLiteral()... yes
checking for PQescapeIdentifier()... yes
checking for PQgetCancel()... yes
checking for lo_create()... yes
checking for pg_encoding_to_char()... yes
checking for pg_char_to_encoding()... yes
checking for PQsetClientEncoding()... yes
checking for PQlibVersion()... yes
checking for PQping()... yes
checking for rb_encdb_alias()... yes
checking for rb_enc_alias()... no
checking for PGRES_COPY_BOTH in libpq-fe.h... yes
checking for PGRES_SINGLE_TUPLE in libpq-fe.h... no
checking for struct pgNotify.extra in libpq-fe.h... yes
checking for unistd.h... yes
checking for ruby/st.h... yes
creating extconf.h
creating Makefile

make
compiling pg.c
compiling pg_connection.c
pg_connection.c: In function ‘pgconn_wait_for_notify’:
pg_connection.c:2064: warning: ‘rb_thread_select’ is deprecated (declared at /Volumes/MacintoshHD/Users/wlicpsc/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/intern.h:379)
pg_connection.c: In function ‘pgconn_block’:
pg_connection.c:2594: warning: ‘rb_thread_select’ is deprecated (declared at /Volumes/MacintoshHD/Users/wlicpsc/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/intern.h:379)
compiling pg_result.c
linking shared-object pg_ext.bundle
ld: in /opt/local/lib/libsasl2.2.dylib, file was built for unsupported file format ( 0xce 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 0 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (x86_64): /opt/local/lib/libsasl2.2.dylib for architecture x86_64
collect2: ld returned 1 exit status
make: *** [pg_ext.bundle] Error 1 
```

...好吧，有点长，但关键在这里：/opt/local/lib/libsasl2.2.dylib 似乎与架构不匹配。我检查了关于 libssl 的类似问题，但这个问题更加罕见。我没有使用 Brew。有什么建议么？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:21:29.570

首先使用 OS X 安装程序安装 postgresSQL： [http ://www.enterprisedb.com/products-services-training/pgdownload](http://www.enterprisedb.com/products-services-training/pgdownload)

然后使用该命令安装 postgres gem（只需记住将版本（9.1）更改为您的：

```
PATH=$PATH:/Library/PostgreSQL/9.1/bin/ gem install pg 
```

# c# - 如何将注册表中的 reg_binary 值转换为 c#.net 中的日期时间？

> ID：12275900
> 
> 赞同：1
> 
> 时间：2012-09-05T06:47:29.927
> 
> 标签：c#, registry

我有一个从注册表中读取`PatternFileDate`Symantec 的应用程序，它的类型为`REG_Binary`. 我`PatternFileDate`从注册表中获得了字节数组的值。如何获取日期或字符串格式的数据？

*   主键：`HKEY_LOCAL_MACHINE`
*   子键：`SOFTWARE\Symantec\Symantec Endpoint Protection\AV`
*   价值：`PatternFileDate`

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:13:12.900

这就是您可以解码该值的方式。

示例注册表值：

> **28030a**

前两个字符代表年份，接下来的两个字符是月份，最后两个字符是月份的日期。每个数字都表示为一个十六进制值。

因此，从我们的示例中：

*   **年**：`28`十进制是`40`。该值被添加到 的起始年份`1970`。所以`1970 + 40 = 2010`。年份是**2010 年**。
*   **月**：`03`以十进制表示`3`。这个月是从零开始的，所以这是第四个月，也就是**April**。例如，十二月是`0B`.
*   **月份中的天数**：`0a`以十进制表示`10`。月份中的日期是从 1 开始的，因此月份中的日期是实际的十进制值。在我们的例子中，月份的日期是**10th**。

因此示例值导致：

> **2010 年 4 月 10 日**

# php - 获取两个模式快照的差异以更新 CakePHP 应用程序

> ID：12275901
> 
> 赞同：2
> 
> 时间：2012-09-05T06:47:31.173
> 
> 标签：php, cakephp

使用 CakePHP，我有两个快照。我正在寻找两者的差异，然后使用该差异生成一个非破坏性的 MySQL 更新命令。

这是我到目前为止所拥有的，它返回一个 alter table MySQL 命令，但是，这将不起作用，因为我需要先创建所述表。

```
 $this->Schema = new CakeSchema();
    $db = ConnectionManager::getDataSource($this->Schema->connection);
    $options = array();
    $Old = $this->Schema->read($options);
    $Schema = $this->Schema->load();
    $compare = $this->Schema->compare($Old, $Schema);
    $contents = array();

    if (empty($table)) {
        foreach ($compare as $table => $changes) {
            $update = $db->alterSchema(array($table => $changes), $table);
        }
    }
    $this->Installer->query($update); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:25:43.163

架构外壳将为您管理所有差异。你真的不需要跳过任何不必要的障碍。你只需要担心两件事：

1-您始终需要保留生成的模式。

```
cake schema generate 
```

这不仅用于保存您的基本架构，还用于保存您的快照。然后，您可以从中创建数据库。

```
cake schema create 
```

这用于设置新安装或在数据库中创建不存在的表。这是破坏性的，将删除所有表并重新创建它们。如果你想创建一个缺失的表，你可以这样调用它：

```
cake schema create app {table_name} 
```

2- 始终为您的架构制作快照。这将允许对现有数据库进行非破坏性升级。您可以像这样升级架构：

```
cake schema update {#} 
```

**更新：** 如果你想让它成为一个可以由 UI 运行的进程，你可以从控制器调用 shell。我会这样构造它：

*   在代码中保留版本号（引导程序）使用户保持最新状态
*   数据库中的版本比较版本以了解它们是否需要
*   upgrade 为每个需要升级的版本调用升级 shell
*   对升级shell调用的每个升级版本都有一个任务

这样，如果有人需要通过多个版本进行升级，它们都将在同一个升级过程中运行。

# java - 将值插入 sql 表 - 选定列。使用 c# 之类的参数

> ID：12275909
> 
> 赞同：0
> 
> 时间：2012-09-05T06:48:01.923
> 
> 标签：java, jdbc, prepared-statement

您好，现在我正在使用 Java 进行编程，并希望在选择的特定列中插入一些值。另外，我想将它添加到与 C# 类似的参数中：示例：

```
SqlCommand cmdb = new SqlCommand("insert into Assignment1(textname,person,date,text)
    values (@textName,@person,@date,@text)", con);
cmdb.Parameters.AddWithValue("@textname", textPathLabel.Text);
cmdb.Parameters.AddWithValue("@person", personNameTB.Text);
cmdb.Parameters.AddWithValue("@date", DateTime.Now);
cmdb.Parameters.AddWithValue("@text", theBytes); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T07:03:00.813

您需要的是在 Java中使用[PreparedStatement 。](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)对于您的示例，相应的 PreparedStatement 将如下所示：

```
PreparedStatement ps = connection.prepareStatement("insert into Assignment1(textname,person,date,text) values(?,?,?,?)"); 
```

然后，您将使用适当的`ps.setXX()`方法为您定义的参数设置适当的值，然后调用`ps.executeUpdate()`以执行对数据库的调用。

“ [JDBC(TM) 数据库访问”](http://docs.oracle.com/javase/tutorial/jdbc/index.html)将是开始学习如何使用或执行常见 SQL 语句以及执行数据库应用程序常见的其他目标的好地方。

# file-upload - 仅给定相对本地路径上传多个文件

> ID：12275912
> 
> 赞同：-1
> 
> 时间：2012-09-05T06:48:05.703
> 
> 标签：file-upload, webserver

假设我有一个用户，该用户有一个 XML 文件，其中包括存储在其本地计算机上的一个或多个图像的相对（到 XML 文件）路径。我希望他们能够将此 XML 文件上传到 Web 服务器，并自动上传图像。

所以我的 XML 文件可能包含：

```
<tag>Images\img_20120905_015463548.jpg</tag> 
```

我想同时上传 XML 文件和`img_20120905_015463548.jpg`一次操作。

问题是，据我所知，由于讨厌的网络浏览器安全模型不允许我从本地计算机上传任意文件，我无法使用 JS/jQuery 自动获取本地网页来获取图像，甚至知道XML文件的真实路径。在将我的头撞在砖墙上几个小时后，我想出了两种可能的解决方案：

*   上传 XML 文件，服务器将图像文件地址剥离出来，并要求用户定位。虽然它可以完成工作，但它很丑陋且容易出错。
*   使用批处理文件（或类似文件）将 XML 文件和图像复制到用户可以在本地网络上访问的面向公众的 Web 服务器，然后将 XML 文件的公共地址提供给我的 Web 服务器。然后它可以从本地公共服务器上抓取图像。问题：我的 IT 部门能力太强，无法允许用户对面向公众的服务器进行文件访问。:)

有没有我可能错过的解决方案，允许用户上传多个文件给定的文件名仅指定为相对路径？

提前致谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:49:22.593

如果您不限于仅使用 Web 的解决方案，则可以使用插件或桌面应用程序来实现。例如，桌面 .NET 或 Java WebStart 应用程序或已[签名](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)且因此[受信任的 Java 小程序](http://www.developer.com/java/other/article.php/3303561/Creating-a-Trusted-Applet-with-Local-File-System-Access-Rights.htm)将能够访问本地 XML 文件和任何相关的图像文件，然后使用 POST、Web 服务或 WebDAV 将它们上传到 Web 服务器。

# iphone - UIImage 使用 dispatch_async 在模拟器上工作（iOS 5.1）但不在设备上（iOS 4.2）

> ID：12275915
> 
> 赞同：-2
> 
> 时间：2012-09-05T06:48:32.003
> 
> 标签：iphone, ios, xcode, multitasking

> **可能重复：**
> [应用程序在 4.0 上崩溃，但在 5.0 上没有](https://stackoverflow.com/questions/11257006/app-crash-on-4-0-but-not-on-5-0)

在我的 iPhone 应用程序中需要下载图像表单服务器，因此使用此代码，但这在模拟器（iOS 5.1）上运行良好，但在真实设备（iOS 4.2）上运行良好。请看一下。

```
 UIImageView *imageView = [[UIImageView alloc]initWithFrame:CGRectMake(5, 5, 260, 160)];
 NSURL *imageURL = [NSURL URLWithString:@"http://myImageURL.com/image.png"];

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
            NSData *imageData = [NSData dataWithContentsOfURL:imageURL];

            dispatch_async(dispatch_get_main_queue(), ^{
                imageView.image = [UIImage imageWithData:imageData];
            });
        });
        [self.view addSubview:imageView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:52:31.720

这是我第三次回答同样的问题...`DISPATCH_QUEUE_PRIORITY_BACKGROUND`仅适用于 iOS 5.0+

[应用程序在 4.0 上崩溃，但在 5.0 上没有](https://stackoverflow.com/questions/11257006/app-crash-on-4-0-but-not-on-5-0)

# html - 为什么图片会被 CSS 覆盖？

> ID：12275916
> 
> 赞同：1
> 
> 时间：2012-09-05T06:48:33.563
> 
> 标签：html, css, image

我将图像放入以下 ​​wordpress 网站：

[http://sofrahomemadefood.com/menu/](http://sofrahomemadefood.com/menu/)

图很大。因此，它在其容器上运行。它被下一个区域覆盖，如下图所示：

![图像被周围区域覆盖](../Images/3e6c14f109d38172706b0bfeb6fe5ed8.png)

我想了解这是什么原因以及如何防止图像被掩盖？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:52:39.940

原因是这段 html：

```
<img class="alignnone" title="Menu" src="http://i.imgur.com/OKRf1h.jpg" alt="" width="1024" height="663"> 
```

（这是嵌入的图像，注意宽度和高度属性）

您可以使用以下方法修复它：

```
img.alignnone{
    width: auto; /*You may want to flag this !important for some browsers*/
    height: auto; /*You may want to flag this !important for some browsers*/
    max-width: 100%;
    max-height: 100%;
} 
```

这是做什么的：

*   图像的自然纵横比通过使用`width:auto`和`height:auto`
*   `max-height:100%`通过和防止图像超出其父元素的边界`max-width:100%`

附带说明：

对于总是希望图像缩放到父级的宽度/高度的人，保留纵横比：您可以使用`min-width:100%`(for width) 或`min-height:100%`for height，`width:auto`并`height:auto`保留比例。

如果您希望将图像保持在一定大小并让它流出内容区域，您可以`overflow:hidden`从`div.maincontent`style.css 的第 202 行的选择器中删除。

# sql-server - 左连接存在

> ID：12275918
> 
> 赞同：0
> 
> 时间：2012-09-05T06:48:38.257
> 
> 标签：sql-server

我有两个表，`Main`并且`Details`- 它们具有一对多的关系，其中一行`Main`可能在`Details`.

我正在尝试创建一个查询，该查询返回来自 的所有信息`Main`，以及其中的关联行是否`Details`包含一组代码中的一个。当然，由于它是一对多的，因此其中可能存在几个这样的代码`Details`- 我不想重复计算行数。我也需要重复几次。

我想要的是这样的：

```
SELECT m.*, CASE WHEN x.ID IS NOT NULL THEN 1 ELSE 0 END AS Codes1, CASE WHEN y.ID IS NOT NULL THEN 1 ELSE 0 END AS Codes2
FROM [Main] m
LEFT JOIN EXISTS(SELECT d.ID FROM [Details] d WHERE m.ID = d.ID AND d.Code IN (<<Codes1>>)) x
LEFT JOIN EXISTS(SELECT d.ID FROM [Details] d WHERE m.ID = d.ID AND d.Code IN (<<Codes2>>)) y 
```

有没有办法做到这一点？（这似乎应该是显而易见的，我过于复杂到第 n 级，但我真的是在画一个空白......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T08:10:22.773

从查询中删除`EXISTS`并添加`DISTINCT`

```
SELECT DISTINCT
   m.*, 
   CASE WHEN x.ID IS NOT NULL THEN 1 ELSE 0 END AS Codes1, 
   CASE WHEN y.ID IS NOT NULL THEN 1 ELSE 0 END AS Codes2 
FROM [Main] m 
LEFT JOIN (SELECT d.ID FROM [Details] d WHERE m.ID = d.ID AND d.Code IN (<<Codes1>>)) x 
LEFT JOIN (SELECT d.ID FROM [Details] d WHERE m.ID = d.ID AND d.Code IN (<<Codes2>>)) y 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:11:35.283

我认为这会起作用：

```
SELECT  M.*, 
        CASE WHEN C1.Codes IS NULL THEN 0 ELSE 1 END as Codes1,
        CASE WHEN C2.Codes IS NULL THEN 0 ELSE 1 END as Codes2
FROM    Main M
LEFT
JOIN    
(
    SELECT  d.Id,
            COUNT(d.Code) as Codes
    FROM    Details d
    WHERE   d.Code in (<<Codes1>>)
    GROUP 
    BY      d.Id
) C1
    ON C1.Id = M.Id
LEFT
JOIN    
(
    SELECT  d.Id,
            COUNT(d.Code) as Codes
    FROM    Details d
    WHERE   d.Code in (<<Codes2>>)
    GROUP 
    BY      d.Id
) C2
    ON C2.Id = M.Id 
```

如果您不需要 M.* 那么这可能会更好：

```
SELECT  M.Id, 
        SUM(CASE WHEN D1.Id IS NULL THEN 0 ELSE 1 END) AS Codes1Count,
        SUM(CASE WHEN D2.Id IS NULL THEN 0 ELSE 1 END) AS Codes2Count
FROM    Main M
LEFT
JOIN    Details D1
        ON  D1.Id = M.Id 
        AND D1.Code in (<<Codes1>>)
LEFT
JOIN    Details D2
        ON  D2.Id = M.Id 
        AND D2.Code in (<<Codes2>>)
GROUP 
BY      M.Id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:10:20.327

这是一个精简版的代码，可以让你得到你想要的

```
SELECT abb1.*, abb2.mycount 
FROM Main AS abb1
    JOIN (SELECT Main.ID, COUNT(Details.ID) AS mycount
         FROM Main 
            JOIN Details on Details.ID = Main.ID
         GROUP BY Main.ID) AS abb2 
```

# android - 使用 OSM 地图 API

> ID：12275919
> 
> 赞同：0
> 
> 时间：2012-09-05T06:48:42.733
> 
> 标签：android, maps

我是 OSM 地图 API 的新手，但我已经使用 Google API 进行地图。我想渲染一个 OSM 地图视图并将指针固定到当前位置。我怎样才能做到这一点。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:36:24.237

此外，如果您想重用 Google Maps 中的代码，您可以使用 OSM 的 Google Maps Wrapper

[http://code.google.com/p/osmdroid/wiki/HowToUseGoogleWrapper](http://code.google.com/p/osmdroid/wiki/HowToUseGoogleWrapper)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:52:01.587

OSMDROID 提供了与 OpenStreetMap-Data 交互的工具/视图。

OpenStreetMapView 是 Androids MapView 类的（几乎）完全/免费替代品。

[下载源代码](http://code.google.com/p/osmdroid/)。

# python - Django分页

> ID：12275926
> 
> 赞同：9
> 
> 时间：2012-09-05T06:48:54.203
> 
> 标签：python, django, mongodb, django-pagination

我需要进行真正的分页，而不是对所有检索到的数据进行分页。Django 文档站点中的示例是这样的；

```
def listing(request):
    contact_list = Contacts.objects.all()
    paginator = Paginator(contact_list, 25) # Show 25 contacts per page

    page = request.GET.get('page')
    try:
        contacts = paginator.page(page)
    except PageNotAnInteger:
        # If page is not an integer, deliver first page.
        contacts = paginator.page(1)
    except EmptyPage:
        # If page is out of range (e.g. 9999), deliver last page of results.
        contacts = paginator.page(paginator.num_pages)

    return render_to_response('list.html', {"contacts": contacts}) 
```

此代码正在对所有检索到的记录进行分页记录。但是有一个麻烦。如果有这么多记录，尝试检索所有记录需要很长时间。我需要一个解决方案来从数据库中逐页检索记录。

在 Django 中有另一种解决方案吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-05T07:03:53.287

你做了一个错误的假设。分页时 Django 不会检索所有对象：它对查询集进行适当的切片，在 SQL 上使用 LIMIT 和 COUNT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:02:35.860

查看 Paginator 类（django/core/paginator.py），它只获取所需的页面。大表只有一个问题：如果要显示总页码，则必须对整个表进行计数（*），这在某些数据库（即 postgresql、mysql 和 innodb）中可能需要很长时间。

顺便说一句，尝试在 django 中使用通用视图，[ListView](https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-display/#listview)在这里会很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T05:25:50.153

A`QuerySet`是一个惰性对象。当您分配时`contact_list = Contacts.objects.all()`，Django 不会访问数据库。直到您调用诸如`count()`, `filter()`, `first()`,..., 或之类的方法`contact_list[1:5]`，Django 才会真正从数据库中检索数据。Django 生成的 SQL 语句将与每个方法相关联，这些 SQL 语句将被发送到数据库。

eg：`contact_list[1:5]`生成一个SQL语句有`LIMIT`和`OFFSET`子句。

在`Paginator`类中，`QuerySet`将传递给其构造函数

```
paginator = Paginator(contact_list, 25) 
```

当您调用 时`paginator.page(page)`，将调用该语句：

```
return self._get_page(self.object_list[bottom:top], number, self) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-23T03:45:51.363

在这里，我们`get_page()`用来获取分页数据（1 页包含 25 个数据）。我建议这样：

```
def listing(request):
    contact_list = Contacts.objects.all()
    paginator = Paginator(contact_list, 25) # Show 25 contacts per page
    page = request.GET.get('page')
    contacts = paginator.get_page(page)

    return render_to_response('list.html', {"contacts": contacts}) 
```

# javascript - 自定义函数不显示 JQuery 插件

> ID：12275927
> 
> 赞同：0
> 
> 时间：2012-09-05T06:49:02.563
> 
> 标签：javascript, html, jquery-plugins, prettyphoto

我是 Jquery 的新手。我正在尝试在文档上动态打印文本。我有一个 JavaScript 函数，它应该使用 jQuery prettyphoto 插件显示图像。我的函数不显示图像，但是当我将代码粘贴到 html 文件上时，它可以正常工作。请帮忙。我的代码示例在这里。

```
 <!doctype html>
    <html>
    <head>
    <link rel="stylesheet" href="./index.css" type="text/css">
    <script type="text/javascript" charset="utf-8" src="jquery-1.6.4.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="spin.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="custom-functions.js"></script>
    <link rel="stylesheet" href="./prettyPhoto/css/prettyPhoto.css" type="text/css">
    <script type="text/javascript" src="./prettyPhoto/js/jquery.prettyPhoto.js"></script>

    <script type="text/javascript">
    $(document).ready(function()
    {
    $("a[rel^='prettyPhoto_related-content-images']").prettyPhoto({theme:'facebook'});
    });

 function showImages()
    {
    var stringData = '';

    stringData = stringData + '<div id="related-content-images" >Related to this: <br/>'+
    '<a href="images/sample-album-2.jpg" target="" rel="prettyPhoto_related-content-images[related-content-images]" title=""><img id="not-hidden" src="images/sample-album-2.jpg" alt="" title=""></a>'+
    '<a href="images/sample-album-3.jpg" target="" rel="prettyPhoto_related-content-images[related-content-images]" title=""><img id="related-images" src="images/sample-album-3.jpg" alt="" title=""></a>'+
    '<a href="images/sample-album-4.jpg" target="" rel="prettyPhoto_related-content-images[related-content-images]" title=""><img id="related-images" src="images/sample-album-4.jpg" alt="" title=""></a></div>';
    document.getElementById("content").innerHTML=''+stringData+'';
    }
    </script>

    </head>
    <body>
    <div id="header"><div id="app-logo-image">
    <img src="images/app-logo.png" id="app-logo"/></div>
    <div id="header-form">
    <input type="search" id="search-text-box" name="search-text-box" placeholder="Search">
    <input type="submit" id="search-button" name="" value="Search">
    </div>
    </div>
    <div id="container">
    <div id="sub-header-menu">
    <div id="music-albums">
    <img src="images/music-albums-icon.png" id="music-albums-image"; onclick="fetch('music-albums');"/></div>
    <div id="genres-icon">
    <img src="images/genres-icon.png" id="genres-icon-image"onclick="fetch('music-genres');"/></div>
    <div id="artist-icon">
    <img src="images/artists-icon.png" id="artist-icon-image"onclick="fetch('music-artists');"/></div>
    <div id="home-icon">
    <img src="images/home-button.png" id="home-icon-image"/></div>
    </div>
    <div id="content" style="left:0%;">
    <a href="#" onclick="showImages();">click me</a>
    </div>
    </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:41:27.327

在单击链接之前不会执行您的`showImages`函数，但是`prettyPhoto`初始化仅在文档完成加载时运行一次，并且由于`showImages`尚未运行，`prettyPhotos`因此无法找到和增强这些图像。

如果将其添加到`showImages`所有内容的末尾，则应该可以：

```
$('#content a').prettyPhoto({theme:'facebook'}); 
```

# vba - VBA的长度> 1的双对象类型

> ID：12275928
> 
> 赞同：0
> 
> 时间：2012-09-05T06:49:08.700
> 
> 标签：vba, double

我在哪里可以找到`doubles`包含超过 1 个数字的信息？

例如

```
Option Explicit

Private d(2) as Double 
```

然后`d(1)`和`d(2)`现在显然是两个不同的双打。

我在 Google 上找不到这方面的任何信息？我想阅读有关此对象类型的信息...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:52:34.083

这是一个双打*数组*，所以我会寻找`vba array`一个开始。

它不限于双精度数，您拥有大量数据类型的数组。

# c# - 如何从后面的代码绑定一个 GridView 并更新它

> ID：12275940
> 
> 赞同：0
> 
> 时间：2012-09-05T06:50:08.660
> 
> 标签：c#, asp.net, gridview

在我可以在这里发布问题之前，我检查了许多网站并参考了许多代码。看到他们，我面临很多困惑。这是我的问题。

我有一个`GridView`并且我已经将它从后面的代码中绑定为：

```
public void BindData()
{
    SqlCommand comd = new SqlCommand("SELECT * FROM " + Label2.Text + "", con);
    SqlDataAdapter da = new SqlDataAdapter(comd);
    DataTable dt = new DataTable();
    da.Fill(dt);
    GridView2.DataSource = dt;
    GridView2.DataBind();
} 
```

我的 asp.net 看起来像：

```
<asp:GridView ID="GridView1" runat="server" ForeColor="#333333" 
                AutoGenerateEditButton="True" DataKeyNames="Locations" 
                onrowcancelingedit="GridView1_RowCancelingEdit" 
                onrowdatabound="GridView1_RowDataBound" 
                onrowediting="GridView1_RowEditing" onrowupdating="GridView1_RowUpdating">
    <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />

    <Columns>
        <asp:TemplateField HeaderText="Locations">
            <ItemTemplate>
                <asp:Label ID="LblLocations" runat="server" Text='<%#Eval("Locations") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Lamp_Profile1">
            <ItemTemplate>
                <asp:Label ID="LblLamp_Profile1" runat="server" Text='<%#Eval("Lamp_Profile1") %>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:Label ID="LblEditLamp_Profile1" runat="server" Text='<%#Eval("Lamp_Profile1") %>'></asp:Label>
            </EditItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Fan_Profile1">
            <ItemTemplate>
                <asp:Label ID="LblFan_Profile1" runat="server" Text='<%#Eval("Fan_Profile1") %>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:Label ID="LblEditFan_Profile1" runat="server" Text='<%#Eval("Fan_Profile1") %>'></asp:Label>
            </EditItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="AC_Profile1">
            <ItemTemplate>
                <asp:Label ID="LblAC_Profile1" runat="server" Text='<%#Eval("AC_Profile1") %>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:Label ID="LblEditAC_Profile1" runat="server" Text='<%#Eval("AC_Profile1") %>'></asp:Label>
            </EditItemTemplate>
        </asp:TemplateField>
    </Columns>

    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
    <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <EditRowStyle BackColor="#999999" />
    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
</asp:GridView> 
```

我写了我的`GridView1_RowCancelingEdit`喜欢：

```
protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
{
    e.Cancel = true;
    GridView1.EditIndex = -1;
} 
```

我的`GridView1_RowEditing`样子：

```
protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
    GridView1.EditIndex = e.NewEditIndex;
    BindData();
} 
```

我的`GridView1_RowUpdating`样子：

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    GridView1.EditIndex = e.RowIndex;

    Label Locations = GridView1.Rows[e.RowIndex].FindControl("LblLocations") as Label;
    //ViewState["Locations_Instance"] = Locations.Text;

    Label Lamp_Profile1 = GridView1.Rows[e.RowIndex].FindControl("LblLamp_Profile1") as Label;
    Label Fan_Profile1 = GridView1.Rows[e.RowIndex].FindControl("LblFan_Profile1") as Label;
    Label AC_Profile1 = GridView1.Rows[e.RowIndex].FindControl("LblAC_Profile1") as Label;

    string query = "UPDATE " + Label3.Text + " SET Lamp_Profile1 ='" + Lamp_Profile1 + "', Fan_Profile1 ='" + Fan_Profile1 + "', AC_Profile1 ='" + AC_Profile1 + "' WHERE Locations = '" + Locations + "'";
    com = new SqlCommand(query, con);
    con.Open();
    com.ExecuteNonQuery();
    con.Close();
    GridView1.EditIndex = -1;

    BindData();
    //lbldisplay.Text = "Updated Successfully";
} 
```

**从这里我得到我使用模板字段以及我的数据库列绑定的任何行`GridView`，一旦我单击 中的编辑`GridView`，整个`GridView`消失。**

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:20:46.260

**您可以在下面的RowUpdating**事件中找到编辑事件时生成的文本框，并将其分配给字符串变量。

然后有一个单独的函数来更新输入的值，最后调用您的 BindGrid() 函数，该函数再次绑定 gridview..

注意：我正在使用存储过程来更新我的数据库表。

```
protected void grdKeywords_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
       GridViewRow row = (GridViewRow)grdKeywords.Rows[e.RowIndex];
       TextBox txtKeyword = row.FindControl("txtGridKeyword") as TextBox;
       string keyword = string.Empty;
       keyword = txtKeyword.Text;
       UpdateKeyword(keyword.ToLower());

    }

public int UpdateKeyword(string strKeyword)
    {
        SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["DBConnection"].ToString());
        SqlCommand cmdUpdateKeyword = BuildCommand(conn, "proc_UpdateKeyword");
        cmdUpdateKeyword.Parameters.AddWithValue("@Keyword", strKeyword);
        conn.Open();
        int i = Convert.ToInt32(cmdUpdateKeyword.ExecuteScalar());
        conn.Close();
        BindGrid();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T08:02:45.823

如果您在页面加载中调用 BindData，则执行以下操作：

```
if (!IsPostBack)
    BindData(); 
```

这可能会解决你的问题...

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-24T10:38:06.893

确保在 GridView 中设置了 EnableViewState="true"。它解决了我的情况下的消失问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-01T13:19:57.343

```
public int UpdateKeyword(string strKeyword)
{
    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["DBConnection"].ToString());
    SqlCommand cmdUpdateKeyword = BuildCommand(conn, "proc_UpdateKeyword");
    cmdUpdateKeyword.Parameters.AddWithValue("@Keyword", strKeyword);
    conn.Open();
    int i = Convert.ToInt32(cmdUpdateKeyword.ExecuteScalar());
    conn.Close();
    BindGrid();

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T07:36:31.453

要手动指定 gridview 的列，您必须设置 **AutoGenerateColumns="false"**。现在您可以在 GridView 中指定所需的列。您现在可以同时使用“BoundFields”和“TemplateFields”。如下所示。

```
<asp:GridView ID="GridView1" AutoGenerateColumns="false" runat="server">
        <Columns>
            <asp:BoundField DataField="column1" HeaderText="Column1" SortExpression="" />
          <asp:BoundField DataField="column2" HeaderText="Column2" SortExpression="" />
            <asp:TemplateField SortExpression="points">
            <HeaderTemplate>HELLO</HeaderTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("hello") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

现在您可以使用：

**GridView.RowDataBound 事件**将数据绑定到数据行。

```
 void GridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
  {

    if(e.Row.RowType == DataControlRowType.DataRow)
    {

      Label Label1= ((Label)e.Row.FindControl("Label1"));
      Label1.Text = "YOURDATA";

    }

  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-15T10:25:38.827

尝试这个 ..

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{

    GridView1.EditIndex = e.RowIndex;
    GridViewRow row = (GridViewRow)GridView1.Rows[e.RowIndex];

    TextBox PrStyle = (TextBox)row.FindControl("PrStyle");
    TextBox PrID = (TextBox)row.FindControl("PrID");

    GridView1.EditIndex = -1;

    SqlCommand cmd = new SqlCommand("Update dt Set PrStyle='" + PrStyle + "',PrID='" + PrID + "'");
} 
```

# javascript - 在javascript中返回

> ID：12275943
> 
> 赞同：0
> 
> 时间：2012-09-05T06:50:10.907
> 
> 标签：javascript, html, function, return

我有一个本身有参数的函数，它工作正常

javascript//

```
<script type="text/javascript">
function $(id){
    document.getElementById(id).style.color="#ff0000"
}
</script> 
```

HTML//

```
<a href="#" onclick="$('me')">click me</a>
<div id="me">color</div> 
```

现在我稍微改变了这个函数，它不起作用 javascript//

```
<script type="text/javascript">
function $(id){

    document.getElementById(id)
}

function aaa(){

    $('me').style.color="#ff0000"

}
</script> 
```

HTML//

```
<a href="#" onclick="aaa()">click me</a>
<div id="me">color</div> 
```

为什么这个函数在没有返回语句的情况下工作

```
<script type="text/javascript">
function $(id){

    alert(id)
}

function aaa(){

    $('me')

}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:52:05.667

```
function $(id) {
  return document.getElementById(id)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:54:05.913

您没有在`$`函数中返回任何内容，因为`aaa`要获取元素，您必须返回它

```
function $(id){
    return document.getElementById(id);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T06:56:16.560

你`function $(id)`不返回任何东西。它应该返回您正在查找的元素：

```
<script type="text/javascript">

function $(id){
    return document.getElementById(id);
}

function aaa(){    
    $('me').style.color="#ff0000";
}
</script> 
```

PS。您可能应该避免命名您的函数`$`。

# wpf - wpf objectdataprovider组合

> ID：12275946
> 
> 赞同：1
> 
> 时间：2012-09-05T06:50:16.937
> 
> 标签：wpf, binding, properties, composition, objectdataprovider

假设我有这个类：

```
public class Foo
{
   public Bar aBar {get; private set;}

   public Foo(String name)
   {
      aBar = new Bar()
      {
         Name = name
      }
   }
}

public class Bar
{
       public String Name {get; private set;}
} 
```

如何从 Foo 类访问属性名称？到目前为止，这就是我拥有的 XAML：

```
<Window.Resources>
        <ObjectDataProvider x:Key="myFoo" ObjectType="{x:Type local:Foo}">
            <ObjectDataProvider.ConstructorParameters>
                <system:String>HelloWorld</system:String>
            </ObjectDataProvider.ConstructorParameters>
        </ObjectDataProvider>
</Window.Resources> 
```

我是否必须编写一个方法，用 Foo.aBar.Name 调用，.. ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T18:53:58.377

您可以使用`StaticResource`来访问`myFoo`您在窗口资源中创建的对象，那么这只是正常指定绑定路径的一种情况：

```
<TextBlock Text="{Binding Source={StaticResource myFoo}, Path=aBar.Name }" /> 
```

# java - 使用批处理脚本运行带有嵌入式 JRE 的 Jar 文件。

> ID：12275947
> 
> 赞同：0
> 
> 时间：2012-09-05T06:50:28.290
> 
> 标签：java

如果我想在我的应用程序中嵌入 JRE，我有这个目录结构。

```
+---jre
|   +---bin
RunMyApp.bat
myApp.jar 
```

我在 RunMyApp.bat 中添加了这个语句来访问 java.exe

```
jre\bin\java.exe -help 
```

那么如何使用 RunMyApp.bat 脚本运行 myApp.jar 呢？

我试过这个，但没有成功

```
jre\bin\java.exe  -jar "%cd%\..\..\myApp.jar" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:55:28.703

`Main-Class`为属性添加一个条目到您的 MANIFEST.MF（在 META-INF 目录下）并说`jre\bin\java.exe -jar <your-jar-filename>`

# asp.net - 如何从 json 数组（或字符串）中获取元素？

> ID：12275954
> 
> 赞同：2
> 
> 时间：2012-09-05T06:51:07.993
> 
> 标签：asp.net, json

```
{"status":1,"msg":"Success","details":{"123456789":{"id":"4029292","name":"ram"}}} 
```

这是我的字符串（我认为 json 数组不确定）。我得到了这个作为来自网络服务的响应。

我如何从中获取元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T07:10:35.013

如果您尝试在 C# 中解析它，请尝试使用[newtonsoft json.net](https://www.newtonsoft.com/json)解析 json 响应。

> 简单易行

以下是一些参考资料

[链接1](https://stackoverflow.com/questions/2546138/deserializing-json-data-to-c-sharp-using-json-net)

[链接2](https://stackoverflow.com/questions/4749639/deserializing-json-to-net-object-using-newtonsoft-or-linq-to-json-maybe)

[链接3](http://james.newtonking.com/pages/json-net.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T07:11:32.950

看看[Json.Net](http://james.newtonking.com/projects/json-net.aspx)库。
您可以使用它在 c# 和 javascript 中反序列化 json。

```
Message deserializedProduct = JsonConvert.DeserializeObject<Message>(json); 
```

Message 类必须映射到您得到的响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T06:56:11.420

下面是我将 json 响应附加到列表视图的代码。它可能是一个很好的例子。也试试这个（Javascript）：

> data.msg[key] 或
> data.msg.123456789.id

```
$.each(data.response, function(key, value) {
            html += '<li><a class=contact href="#" id="' + data.response[key].id + '" ><h1>' + data.response[key].label + '</h1><p>'+ data.response[key].customerName + '</p><p>' + data.response[key].phone + ', ' + data.response[key].email + '</p></a></li>';
            $('#ul_id').append($(html));
            html='';
            console.log('conatct');
            }); 
```

# datatable - QTP 锁定的单元格无法修改

> ID：12275964
> 
> 赞同：2
> 
> 时间：2012-09-05T06:51:54.473
> 
> 标签：datatable, automated-tests, qtp

对于使用 QTP（快速测试专业）的人来说，你们中的任何人都在 QC（质量中心）的 savin 脚本上遇到这个问题。

当您尝试编辑“DataTable”消息框时显示“锁定的单元格无法修改”。请查看随附的快照。![在此处输入图像描述](../Images/68b6794ab8b2aa6ac058ef0d69ba360b.png)

非常感谢您的帮助和支持。

谢谢， 马奈萨

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:26:28.373

如果您使用 QC 10.0 来存储/保存您的 QTP 10.0 脚本，那么您可以尝试以下操作。

*   如果您使用的是补丁 28，请验证您的 QC 10.o 的补丁级别，然后您必须在 QC 上应用补丁 29。
*   缺陷编号：QCCR1J 24598
*   问题：每十五分钟运行一次自动作业，清除数据库中的陈旧会话和锁定。
*   如果突然终止 Quality Center 客户端，则回归可防止删除锁。
*   这会导致实体即使在 LOCK_TIMEOUT 之后仍保持锁定，并且无法编辑实体。
*   存在一种解决方法，可以从数据库中物理删除锁定的行

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T16:10:12.600

我发现以下过程可以解决此问题：

1.  在 QTP 中打开测试
2.  看看这个
3.  右键单击数据表
4.  选择文件 > 导出...</li>
5.  浏览到要保存导出文件的位置
6.  输入导出文件的文件名
7.  点击保存
8.  右键单击数据表
9.  选择文件 > 导入
10.  浏览到保存导出文件的位置
11.  选择导出文件
12.  点击确定

数据表现在应该已解锁。

# iphone - 如何从 iphone sqlite 数据库中获取 int 数据

> ID：12275965
> 
> 赞同：1
> 
> 时间：2012-09-05T06:51:53.657
> 
> 标签：iphone, xcode, sqlite

我正在像这样从 iphone sqlite 获取数据。我在表中有 6 条记录。

我的表有字段responses_Id、participant_Id、answer_option、answer_text、update_date_time，只有responses_Id和participant_Id之外的都是varchar字段）

```
 + (void) getInitialDataToDisplay:(NSString *)dbPath {

CereniaAppDelegate *appDelegate = (CereniaAppDelegate *)[[UIApplication sharedApplication] delegate];

if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

    const char *sql = "select * from survey_question_responses";
    sqlite3_stmt *selectstmt;
    if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {

        while(sqlite3_step(selectstmt) == SQLITE_ROW) {

            NSInteger primaryKey = sqlite3_column_int(selectstmt, 0);
            Coffee *coffeeObj = [[Coffee alloc] initWithPrimaryKey:primaryKey];
                            coffeeObj.participant_Id=(This is integerin table)
            coffeeObj.answer_option = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 2)];
            coffeeObj.answer_option = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 3)];
            coffeeObj.answer_option = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 4)];
            coffeeObj.answer_option = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 5)];

            NSString*test=coffeeObj.answer_option;

            [appDelegate.coffeeArray addObject:coffeeObj];

            int count=[appDelegate.coffeeArray count];

            NSLog(test);
            NSLog(@"count is %d",count);

            [coffeeObj release];
        }
    }
    }
else
    sqlite3_close(database); //Even though the open call failed, close the database connection to release all the memory.
  } 
```

当我 NSlog 数据时，它不显示任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:58:30.173

查看[SQLite 文档](http://www.sqlite.org/c3ref/column_blob.html)。查询的所有结果值都在此处定义。您可以使用`sqlite3_column_int`类似于`sqlite3_column_text`文本的整数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T07:01:55.250

```
NSNumber *primaryKey = [NSNumber numberWithInt:(int)sqlite3_column_int(selectstmt, 0)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T07:38:19.807

```
while(sqlite3_step(selectAllStmt) == SQLITE_ROW)
        {
            NSLog(@"record found");
            char *temp = (char *)sqlite3_column_text(selectAllStmt, 0);
            if (temp!=nil) {
                intId=[[NSString stringWithUTF8String:temp] intValue];
            }
            temp =NULL;
            // [pool release];
        }

+ (void) getInitialDataToDisplay:(NSString *)dbPath {

CereniaAppDelegate *appDelegate = (CereniaAppDelegate *)[[UIApplication sharedApplication] delegate];

if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

    const char *sql = "select * from survey_question_responses";
    sqlite3_stmt *selectstmt;
    if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {

        while(sqlite3_step(selectstmt) == SQLITE_ROW) {
    NSInteger primaryKey;
NSInteger intparticipant_Id;

            char *temp = (char *)sqlite3_column_text(selectstmt, 0);
            if (temp!=nil) {
                primaryKey=[[NSString stringWithUTF8String:temp] intValue];
            }
            temp =NULL;
            Coffee *coffeeObj = [[Coffee alloc] initWithPrimaryKey:primaryKey];

temp = (char *)sqlite3_column_text(selectstmt, 1);
            if (temp!=nil) {
                intparticipant_Id=[[NSString stringWithUTF8String:temp] intValue];
            }
            temp =NULL;
                            coffeeObj.participant_Id=intparticipant_Id;

            coffeeObj.answer_option = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 2)];
            coffeeObj.answer_option = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 3)];
            coffeeObj.answer_option = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 4)];
            coffeeObj.answer_option = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 5)];

            NSString*test=coffeeObj.answer_option;

            [appDelegate.coffeeArray addObject:coffeeObj];

            int count=[appDelegate.coffeeArray count];

            NSLog(test);
            NSLog(@"count is %d",count);

            [coffeeObj release];
        }
    }
    }
else
    sqlite3_close(database); //Even though the open call failed, close the database connection to release all the memory.
  }

Note:- char *temp = (char *)sqlite3_column_text(selectAllStmt, 0);
            if(temp != NULL)
                str = [NSString stringWithUTF8String:temp];
            else
                str = @"";
            temp =NULL;

If you want to take integer then you can do type casting "str = [NSString stringWithUTF8String:temp];" here...... 
```

# batch-file - 如何在一个设置 exe 中运行多个设置

> ID：12275978
> 
> 赞同：2
> 
> 时间：2012-09-05T06:52:32.180
> 
> 标签：batch-file, installation

我有两个需要按正确顺序安装的安装程序 exe 文件；首先是 setup1.exe，然后是 setup2.exe。此外，我还必须在 setup2.exe 完成后运行一个批处理脚本。

我怎样才能做到这一点最简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:18:13.180

我不确定你的专业水平，所以我的目标很低。

在记事本中键入以下内容：

```
@echo off
setup1.exe
setup2.exe
call "batch script.bat" 
```

然后`Click File`->`Save As`
键入`%userprofile%\Desktop\MainSetup.bat`
单击->`OK`

下一步单击->`Start`
键入`CMD.EXE`-> 按`[ENTER]`
等待黑色命令提示符出现。
类型`CD %userprofile%\Desktop`-> 按`[ENTER]`
类型`DIR MainSetup.*`-> 按`[ENTER]`

如果您看到一个名为`MainSetup.bat.txt`:
Type `REN MainSetup.bat.txt MainSetup.bat`-> Press`[ENTER]`

现在`MainSetup.bat`已准备好移动到您想要的任何地方。如果`setup1.exe` `setup2.exe`和`batch script.bat`在 中`PATH`，那么您可以在任何地方使用它，包括您的桌面（现在在哪里）。如果不是，那么您要么希望`MainSetup.bat`与其他三个放在同一目录中，要么更改`MainSetup.bat`以反映它们的位置。（在示例中，更改`setup1.exe`为这样的内容`"C:\Program Files\Program\setup1.exe"`）

# wpf - 有条件地将样式应用于控件

> ID：12275984
> 
> 赞同：1
> 
> 时间：2012-09-05T06:52:49.847
> 
> 标签：wpf, xaml, mvvm, triggers, styles

在 MVVM 项目中，只有当视图模型公开的属性设置为 true 时，我才想将样式“ReadOnlyTextBox”应用于控件。我以为我可以使用触发器，但不幸的是我从这里学到了

[样式触发器以应用另一种样式](https://stackoverflow.com/questions/7519792/style-trigger-to-apply-another-style?rq=1)

和这里

[如何使 Style.Triggers 触发要应用的不同命名样式](https://stackoverflow.com/questions/1183982/wpf-how-to-make-style-triggers-trigger-a-different-named-style-to-be-applied)

我无法更改样式定义中的样式属性。我正在寻找一种简单的替代方法，否则我将使用触发器来应用样式“ReadOnlyTextBox”中包含的所有属性。我不喜欢这种方法，因为它违反了 DRY 原则，所以我希望你能提出其他建议。

谢谢菲利波

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:59:45.250

如果您不是真的被迫使用触发器，一种实用的方法可能是使用 IValueConverter，它将您的 ViewModel-Value 作为输入并返回所需的样式（类似于 DataTemplateSelectors），然后执行类似的操作

```
<UserControl.Resources>
<prefix:StyleConverter x:Key="styleConverter"/>
</UserControl.Resources>
<!-- blabla -->
<TextBox Style="{Binding SomeCondition, Converter={StaticResource styleConverter}}"/>
<!-- blabla --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:03:49.517

您可以使用样式选择器根据自定义条件应用样式。

[样式选择器](http://msdn.microsoft.com/en-us/library/system.windows.controls.styleselector.aspx)

# php - 使用 PHP 创建 AWS 签名

> ID：12275987
> 
> 赞同：6
> 
> 时间：2012-09-05T06:52:53.310
> 
> 标签：php, api, amazon-web-services, amazon-cloudformation

我正在尝试使用 AWS API 在 AWS CloudFormation 中创建堆栈，但他们返回错误消息“**我们计算的签名与您提供的签名不匹配**”

以下是我用来生成签名的代码

```
$private_key = "xxxxxxxxxxxxx";
$params = array();
$method = "POST";
$host = "cloudformation.eu-west-1.amazonaws.com";
$uri = "/onca/xml";

// additional parameters
$params["Service"] = "AWSCloudFormation";
$params["Operation"] = "DeleteStack";
$params["AWSAccessKeyId"] = "xxxxxxxxxxxxxx";
// GMT timestamp
$params["Timestamp"] = gmdate("Y-m-d\TH:i:s\Z");
// API version
$params["Version"] = "2010-05-15";

// sort the parameters
// create the canonicalized query
$canonicalized_query = array();
foreach ($params as $param => $value) {
    $param = str_replace("%7E", "~", rawurlencode($param));
    $value = str_replace("%7E", "~", rawurlencode($value));
    $canonicalized_query[] = $param . "=" . $value;
}
$canonicalized_query = implode("&", $canonicalized_query);

// create the string to sign
$string_to_sign = $method . "\n" . $host . "\n" . $uri . "\n" . $canonicalized_query;

// calculate HMAC with SHA256 and base64-encoding
$signature = base64_encode(hash_hmac("sha256", $string_to_sign, $private_key, True));

// encode the signature for the request
$signature = str_replace("%7E", "~", rawurlencode($signature));

the url I am using is 

'https://cloudformation.us-east-1.amazonaws.com/
?Action=DeleteStack
&StackName=MyStack
&Version=2010-05-15
&SignatureVersion=2
&Timestamp=2012-09-05T06:32:19Z
&AWSAccessKeyId=[AccessKeyId]
&Signature=[Signature]
&SignatureMethod=HmacSHA256' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-25T07:32:20.370

这是您的代码，稍微整理了一下，其中包含一个示例函数，展示了如何将此方法扩展到其他 AWS API。

```
function aws_query($extraparams) {
    $private_key = ACCESS_SECRET_KEY;

    $method = "GET";
    $host = "webservices.amazon.com";
    $uri = "/onca/xml";

    $params = array(
        "AssociateTag" => ASSOCIATE_TAG,
        "Service" => "AWSECommerceService",
        "AWSAccessKeyId" => ACCESS_KEY_ID,
        "Timestamp" => gmdate("Y-m-d\TH:i:s\Z"),
        "SignatureMethod" => "HmacSHA256",
        "SignatureVersion" => "2",
        "Version" => "2013-08-01"
    );

    foreach ($extraparams as $param => $value) {
        $params[$param] = $value;
    }

    ksort($params);

    // sort the parameters
    // create the canonicalized query
    $canonicalized_query = array();
    foreach ($params as $param => $value) {
        $param = str_replace("%7E", "~", rawurlencode($param));
        $value = str_replace("%7E", "~", rawurlencode($value));
        $canonicalized_query[] = $param . "=" . $value;
    }
    $canonicalized_query = implode("&", $canonicalized_query);

    // create the string to sign
    $string_to_sign =
        $method . "\n" .
        $host . "\n" .
        $uri . "\n" .
        $canonicalized_query;

    // calculate HMAC with SHA256 and base64-encoding
    $signature = base64_encode(
        hash_hmac("sha256", $string_to_sign, $private_key, True));

    // encode the signature for the equest
    $signature = str_replace("%7E", "~", rawurlencode($signature));

    // Put the signature into the parameters
    $params["Signature"] = $signature;
    uksort($params, "strnatcasecmp");

    // TODO: the timestamp colons get urlencoded by http_build_query
    //       and then need to be urldecoded to keep AWS happy. Spaces
    //       get reencoded as %20, as the + encoding doesn't work with 
    //       AWS
    $query = urldecode(http_build_query($params));
    $query = str_replace(' ', '%20', $query);

    $string_to_send = "https://" . $host . $uri . "?" . $query;

    return $string_to_send;
}

function aws_itemlookup($itemId) {
    return aws_query(array (
        "Operation" => "ItemLookup",
        "IdType" => "ASIN",
        "ItemId" => $itemId
    ));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-08T10:08:58.837

这对我有用。

```
$str = "Service=AWSECommerceService&Operation=ItemSearch&AWSAccessKeyId={Access Key}&Keywords=Harry%20Potter&ResponseGroup=Images%2CItemAttributes%2COffers&SearchIndex=Books&Timestamp=2019-08-11T17%3A51%3A56.000Z";

$ar = explode("&", $str);

natsort($ar);

$str = "GET
webservices.amazon.com
/onca/xml
";

$str .= implode("&", $ar); 

$str = urlencode(base64_encode(hash_hmac("sha256",$str,'{Secret Key Here}',true)));

http://webservices.amazon.com/onca/xml?Service=AWSECommerceService&Operation=ItemSearch&AWSAccessKeyId={Access Key}&Keywords=Harry%20Potter&ResponseGroup=Images%2CItemAttributes%2COffers&SearchIndex=Books&Timestamp=2019-08-11T17%3A51%3A56.000Z&Signature=$str 
```

请记住：如果您收到此错误，您的 AccessKey Id 未注册产品广告 API。请使用在[https://affiliate-program.amazon.com/assoc_credentials/home注册后获得的 AccessKey Id](https://affiliate-program.amazon.com/assoc_credentials/home)

转到[https://affiliate-program.amazon.com/assoc_credentials/home](https://affiliate-program.amazon.com/assoc_credentials/home)

您还可以在以下位置模拟您的查询：

[https://webservices.amazon.com/scratchpad/index.html](https://webservices.amazon.com/scratchpad/index.html)并点击商品搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T02:57:37.767

我确认了弗雷德里克的回答。您必须在散列之前对数组进行 ksort 排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T08:58:34.380

为什么您不只是使用[适用于 PHP 的 AWS 开发工具包](http://aws.amazon.com/sdkforphp)是有原因的吗？它为您处理所有这些。

# qt - 如何用 OpenGL 场景覆盖 Qt Phonon 视频？

> ID：12275989
> 
> 赞同：2
> 
> 时间：2012-09-05T06:52:58.287
> 
> 标签：qt, opengl, overlay, phonon

我想用 Qt Phonon Player 播放视频并用 OpenGL 场景覆盖它，以便半透明的 OpenGL 对象位于视频上方。我搜索了几个小时，但没有发现如何实现这一点的提示。英特尔的这个概念证明描述了我正在寻找的东西。

[http://download.intel.com/embedded/software/IEGD/324707.pdf](http://download.intel.com/embedded/software/IEGD/324707.pdf)

这怎么可能实现？为此需要哪些组件？

一些与我类似的帖子：

为了澄清我的意图，我找到了一张完美描述我正在寻找的东西的图片。这张图片来自英特尔嵌入式图形设备的硬件特性的英特尔文章 (http://download.intel.com/embedded/software/IEGD/324707.pdf)

这是一张图片[http://www.img-host.de/bild.php/33352,bildschirmfotoGURGI.png](http://www.img-host.de/bild.php/33352,bildschirmfotoGURGI.png)

能否或更好地在 LinuxOS 上实现这种效果？用 compiz+opengl+qt 吗？

* * *

为了澄清我的意图，我找到了一张完美描述我正在寻找的东西的图片。这张图片来自英特尔嵌入式图形设备的硬件特性的英特尔文章 (http://download.intel.com/embedded/software/IEGD/324707.pdf)

这是一张图片[http://www.img-host.de/bild.php/33352,bildschirmfotoGURGI.png](http://www.img-host.de/bild.php/33352,bildschirmfotoGURGI.png)

能否或更好地在 LinuxOS 上实现这种效果？用 compiz+opengl+qt 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:24:31.933

参考帖子[播放带有自定义叠加图形的视频](https://stackoverflow.com/questions/4473709/play-a-video-with-custom-overlay-graphics)应该是可能的。但是那里的解决方案描述得非常肤浅。

# android - 如何使用Transition，android对图像使用淡入淡出效果

> ID：12275993
> 
> 赞同：3
> 
> 时间：2012-09-05T06:53:13.560
> 
> 标签：android, image, fadein, transition, fadeout

我在安卓手机上见过。当我单击照片库时，会打开一个图像（淡入），然后单击消失（淡出）。

同样，我已经在我的应用程序中完成了。我在 Drawable 中粘贴了一张图片。并应用了淡入淡出条件。但我没有看到比天蓝色背景的任何图像。那就是看法。

我如何在 Android 中以编程方式执行此操作？

我可以通过什么方式解决这个问题？我在这里犯了什么错误？

我的代码是：

```
btn=(Button)findViewById(R.id.Click);
   viewToAnimate=(View)findViewById(R.id.view1);
   btn.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {

        if(viewToAnimate.getVisibility()==View.VISIBLE)
        {
            boolean toRight = false;
            Context c = null;
            //Animation out=AnimationUtils.makeOutAnimation(this,true);
            Animation out=AnimationUtils.makeOutAnimation(c, toRight);
            viewToAnimate.startAnimation(out);
             viewToAnimate.setVisibility(View.INVISIBLE);

        } else {
          int id = 0;
        Context c = null;
        //  Animation in = AnimationUtils.loadAnimation(this, android.R.anim.fade_in);
           Animation in=AnimationUtils.loadAnimation(c, id);

            viewToAnimate.startAnimation(in);
            viewToAnimate.setVisibility(View.VISIBLE);
        }
    }
} );

} } 
```

然后在 Main.xml ：

```
 <Button
    android:id="@+id/Click"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/fade" />

<View
    android:id="@+id/view1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#AAA" 
    android:src="@drawable/fade"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:02:34.877

对于淡入淡出.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
       <set xmlns:android="http://schemas.android.com/apk/res/android">
         <alpha android:fromAlpha="0.0" android:toAlpha="1.0" 
          android:interpolator="@android:anim/accelerate_interpolator" 
          android:duration="2000"/>
     </set> 
```

对于淡出.xml

```
 <set xmlns:android="http://schemas.android.com/apk/res/android">
         <alpha android:fromAlpha="1.0" android:toAlpha="0.0" 
          android:interpolator="@android:anim/accelerate_interpolator" 
          android:duration="2000"/>
     </set> 
```

尝试在您的图像视图中使用此动画..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T09:55:04.273

这对我有用：

淡入-

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
<alpha android:fromAlpha="0.0" android:toAlpha="1.0"
        android:duration="1000" />
</set> 
```

消退-

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
<alpha android:fromAlpha="1.0" android:toAlpha="0.0"
        android:duration="1000" />
</set> 
```

# php - 使用html表单上传文件失败

> ID：12275996
> 
> 赞同：0
> 
> 时间：2012-09-05T06:53:27.943
> 
> 标签：php, html

使用 HTML 表单上传文件失败：

单击提交按钮后，我可以打印出`$_FILES["file"]["name"]`and `$_FILES["file"]["type"] and ["size"]`and `["tmp_name"]`and and `["error"]`等。但是我在 tmp 文件夹中找不到该文件（默认情况下它应该在那里）！我不知道为什么。

html代码是这样的：

```
<form action="manage.php?act=getback.questionOpt" target="fileUp" method="post" id="f1" enctype="multipart/form-data">
   <p id="file_u">
      <input type="file" name="file">
        <iframe width="0px" height="0px" name="fileUp" style="display:none">
        </iframe>
   </p>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:41:54.680

上传的文件将从临时目录中删除，除非它们被移动或重命名！

[在http://de2.php.net/manual/en/features.file-upload.post-method.php](http://de2.php.net/manual/en/features.file-upload.post-method.php)的 PHP 文档的第三个示例上方有一个小注释

因此，请求完成后您将无法看到该文件。

只需重命名文件就可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:59:19.710

你的文件有多大？如果它太大并且超出您的服务器限制，它将不会上传。如果您的服务器默认禁用上传，则需要在`php.ini`. 这是如何：

在编辑器中打开 php.ini 文件。

搜索文本字符串`file_uploads`。你会发现一些东西说`file_uploads = Off | On`。如果它说`Off`是值，问题就解决了。否则，可以对其进行注释（检查行首的分号）。否则：

更改 tmp 文件夹的文件权限。

除非您向我们展示完整的代码，否则我无法帮助您。

# php - 将给定日期的月份名称转换为月份编号

> ID：12275997
> 
> 赞同：-4
> 
> 时间：2012-09-05T06:53:33.653
> 
> 标签：php

> **可能重复：**
> [PHP 日期格式转换](https://stackoverflow.com/questions/2332740/php-date-format-converting)

我有一个像**2012-september-09**这样的日期。如何使用 PHP将其转换为**2012-09-09 ？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:06:43.930

你可以试试`strptime`

```
$date = '2012-september-09';
$strp = strptime($date, '%Y-%B-%d');
$ymd = sprintf('%04d-%02d-%02d', $strp['tm_year'] + 1900, $strp['tm_mon'] + 1, $strp['tm_mday']);
$new_date = new DateTime($ymd);
echo $new_date->format('Y-m-d'); 
```

这是一个[键盘](http://codepad.org/tZhouv2x)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:57:16.933

尝试这个

```
Change 

<?php echo date('Y-m-d',strtotime('2012-september-09'));?>

 To

<?php echo date('Y-m-d',strtotime('09-september-2012'));?> 
```

# javascript - Chrome 扩展程序无法通过清单加载外部 JavaScript

> ID：12275998
> 
> 赞同：0
> 
> 时间：2012-09-05T06:53:33.597
> 
> 标签：javascript, google-chrome

我正在开发与 Aviary API 一起使用的 Chrome 扩展程序。我需要将 Aviary Javascript 添加到扩展中。这是我的清单的样子：

```
"content_scripts": [ {
  "js": ["http://feather.aviary.com/js/feather.js", "jquery-1.7.2.min.js", "chosen/chosen.jquery.js", "main.js" ],
  "css": [ "assets/css/style.css" ],
}],
"permissions": [
  "http://feather.aviary.com*",
  "tabs",
  "cookies"
] 
```

但它不断抛出错误“无法为内容脚本加载 javascript 'http://feather.aviary.com/js/feather.js'”。. 我做错什么了吗？我一直在寻找，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:57:06.060

您应该设置权限示例

```
 "permissions": [
    "http://*feather.aviary.com*", "webRequest",

    "tabs"
  ] 
```

# sql - 如何组合两个表以获得结果

> ID：12275999
> 
> 赞同：0
> 
> 时间：2012-09-05T06:53:33.280
> 
> 标签：sql

以下是我的主表：

```
 tablename       columnname         size  order
    employee        name               25    1
    employee        sex                25    2
    employee        contactNumber      50    3
    employee        salary             25    4
    address         street             25    5
    address         country            25    6 
```

以下是我的子表：

```
 childid  userid  masterid  isactive  size   order
    1        1       1         Y         25     1
    2        1       2         Y         25     2
    3        1       3         N         0      0
    4        1       4         Y         50     3 
```

我想从主表和大小中获取表名列名，`isactive is Y`在子表中针对用户 ID 订购子表。

有时，如果特定用户的值不存在，则获取所有值，例如表名、列名、大小、顺序`where isactive is`Y

我真的很抱歉问这个问题，但我不擅长 SQL。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:09:05.513

使用`INNER JOIN`代替`LEFT JOIN`

```
SELECT rcm.tablename, rcm.columnname, rcc.size, rcc.order 
from report_customise_master rcm 
        INNER JOIN report_customise_child rcc 
            ON rcm.id = rcc.masterid 
WHERE rcm.isactive = 'Y' and rcc.isactive = 'Y' 
```

**更新 1**

```
..., COALESCE(rcc.size, rcm.size) as Size, 
     COALESCE(rcc.`Order`, rcc.`order`) as `Order` 
```