# StackOverflow 问答 12181000-12181999

# php - 获取源代码后无法为图片创建句柄

> ID：12181001
> 
> 赞同：0
> 
> 时间：2012-08-29T15:04:20.347
> 
> 标签：php

我正在尝试创建一个小型实验脚本，用于使用 php 从网络漫画网站获取漫画。我正在玩的网站是[Fredo 和 Pidjin](http://www.pidjin.net/)。这是我到目前为止编写的代码：

```
<?php

        require_once "../shdp/simple_html_dom.php";

        $next = "http://www.pidjin.net/2012/08/28/of-my-own/";
        $html = file_get_html($next);

        $imageList = $html->find('div[class=episode] p img');

        for($iii=0; $iii<count($imageList); $iii++){
            $storage[$iii] = $imageList[$iii]->src;

        }

        $img = file_get_contents($storage[0]);
        $img = imagecreatefromstring($img);

        header("Content-type: image/png");
        $something = imagepng($img);
?> 
```

为了抓取 html，我使用的是 Simple HTML DOM 解析器。

**这就是我想要做的：**获取图像的 src 并将其分配给句柄。随后为页面上的所有漫画面板找到它，并使用 imagecopy 制作一个可以保存到计算机的条带。然而，代码处于初步阶段，我还没有进入 imagecopy 部分。

**问题**：虽然 imagepng(...) 在浏览器上输出文件，但我无法获得要在 imagecopy 中使用的图像的 $src 句柄（可以这么说）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:09:46.540

您如何尝试处理图像？

```
$src = imagecreatefrompng($storage[0]);
$dest = imagecreatetruecolor(80, 40);
imagecopy($dest, $src, 0, 0, 20, 13, 80, 40);

header('Content-Type: image/png'); 
imagepng($dest); 
```

如果您需要显示多个图像，请尝试使用输出缓冲：

```
ob_start();
header('Content-Type: image/png'); 
imagepng($img1);

header('Content-Type: image/png'); 
imagepng($img2);
ob_end_flush(); 
```

# javascript - 将天数添加到日期javascript

> ID：12181002
> 
> 赞同：0
> 
> 时间：2012-08-29T15:04:21.713
> 
> 标签：javascript, date

我有 2 个输入类型按钮和一个输入类型文本字段。这两个按钮用于激活添加或减去某些天数的功能。

其实都是由 ma 数据库从 mysql 生成的。

问题是我有很多日期，因为 php 脚本确实管理一些日历，其中一些操作与日期相关联。

有时我们需要管理日历以便在会议结束后留出几天时间。

所以我完成了这个功能：

在 JavaScript 中：

```
​&lt;script type="text/javascript">
    function addday() {
        var items = new Array();
        var itemCount = document.getElementsByClassName("date");

        for (var i = 0; i < itemCount.length; i++) {
            items[i] = document.getElementById("date" + (i + 1)).value;
        }

        for (var i = 0; i < itemCount.length; i++) {
            items[i] = document.getElementById("date" + (i + 1)).value;
            var itemDtParts = items[i].split("-");
            var itemDt = new Date(itemDtParts[2], itemDtParts[1] - 1, itemDtParts[0]);
            nb=document.getElementById('nb').value;

                itemCount[i].value = setDate(itemDt + nb) ;

        }

       return items;
           }

</script> 
```

担心的是这个脚本不起作用。

自 2 小时以来，我无法纠正我正在尝试的错误，并且我已经阅读了很多关于日期的内容，但我不知道如何去做。

首先它告诉我 setDate 没有定义。

页面冻结。

接受我最崇高的敬意。

SP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:14:15.773

[http://jsfiddle.net/eeG5u/](http://jsfiddle.net/eeG5u/)

```
var today = new Date();
var yesterday = new Date();
yesterday.setDate(today.getDate() - 1);
var tomorrow = new Date();
tomorrow.setDate(today.getDate() + 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:09:08.467

您必须在 javascript Date 对象上调用 setDate 方法。像这样使用

```
<script type="text/javascript">
    function addday() {
        var items = new Array();
        var itemCount = document.getElementsByClassName("date");

        for (var i = 0; i < itemCount.length; i++) {
            items[i] = document.getElementById("date" + (i + 1)).value;
        }

        for (var i = 0; i < itemCount.length; i++) {
            items[i] = document.getElementById("date" + (i + 1)).value;
            var itemDtParts = items[i].split("-");
            var itemDt = new Date(itemDtParts[2], itemDtParts[1] - 1, itemDtParts[0]);
            nb=document.getElementById('nb').value;

    var newDate = itemDt.getDate() + nb;
        itemDt.setDate(newDate ) ;
                itemCount[i].value = itemDt;

        }

       return items;
           }

</script> 
```

# javascript - 我不能在 Joomla 中使用 jquery

> ID：12181003
> 
> 赞同：-1
> 
> 时间：2012-08-29T15:04:24.983
> 
> 标签：javascript, jquery, joomla, mootools

在 Joomla 中安装我的 jquery 插件[http://farukat.es/journal/2011/02/514-new-creation-jquery-runloop-plugin](http://farukat.es/journal/2011/02/514-new-creation-jquery-runloop-plugin)后，我仍然无法在其中调用任何函数。好像什么都没有

在我的 Joomla 模板文件 index.php 中，我已经为 noConflicts() 包含了对 GetDocument 和 AddScriptFunc 的调用。我是否必须在插件中打开 javascript 文件，然后用 jQuery 查找 + 替换所有 $ 才能使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:32:55.493

1.  您必须添加 $.noConflict(); 从 jquery 函数开始。
2.  有时 jquery 不起作用，因此您必须将所有 jquery 重命名为 $。
3.  在该页面中包含无冲突文档。

尝试这些方法希望它会奏效...

# c# - 这真的是 JIT 优化中的错误还是我遗漏了什么？

> ID：12181005
> 
> 赞同：5
> 
> 时间：2012-08-29T15:04:28.067
> 
> 标签：c#, jit

```
[TestFixture]
public class Tests
{
    private class Relay
    {
        public Action Do { get; set; }
    }

    [Test]
    public void OptimizerStrangeness()
    {
        var relay = new Relay();
        var indicator = 0;
        relay.Do = () => indicator++;
        var weak = new WeakReference(relay);

        GC.Collect();

        var relayNew = weak.Target as Relay;
        if (relayNew == null) Assert.Fail();
        relayNew.Do();
        Assert.AreEqual(1, indicator);
    }
} 
```

`Assert.Fail()`尽管事实`relay`变量仍在范围内，但该代码仅在 Release 模式下失败，因此我们仍然对实例有强引用，因此 WeakReference 一定还没有死。

UPD：澄清一下：我意识到它可以“优化掉”。但是取决于这个优化`indicator`变量将具有`0`或`1`值，即我们有实际可见的行为变化。

UPD2：来自 C# 语言规范，[第 3.9 节](http://msdn.microsoft.com/en-us/library/aa691138%28v=vs.71%29.aspx)

> 如果除了运行析构函数之外，任何可能的继续执行都无法访问该对象或其任何部分，则该对象被视为不再使用，并且它有资格进行销毁。C# 编译器和垃圾收集器可能会选择分析代码以确定将来可能使用对对象的哪些引用。例如，如果作用域内的局部变量是对对象的唯一现有引用，但在从过程中的当前执行点开始的任何可能的继续执行中从未引用该局部变量，则垃圾收集器可能（但不需要）将对象视为不再使用。

从技术上讲，这个对象可以并且将通过继续执行来访问，因此不能被视为“不再使用”（实际上 C# 规范没有提到弱引用，因为它是 CLR 的方面而不是编译器 - 编译器输出很好）。将尝试搜索有关 CLR/JIT 的内存管理信息。

UPD3：以下是有关 CLR 内存管理的[一些信息](http://msdn.microsoft.com/en-us/library/f144e03t.aspx)- “释放内存”部分：

> ...每个应用程序都有一组根。每个根要么引用托管堆上的一个对象，要么设置为空。应用程序的根包括全局和静态对象指针、线程堆栈上的局部变量和引用对象参数，以及 CPU 寄存器。垃圾收集器可以访问即时 (JIT) 编译器和运行时维护的活动根列表。使用此列表，它检查应用程序的根，并在此过程中创建一个包含从根可到达的所有对象的图。

有问题的变量肯定是局部变量，因此它是可访问的。如此说来，这个提及非常快速/模糊，所以我很高兴看到更具体的信息。

UPD4：来自 .NET Framework 的来源：

```
 // This method DOES NOT DO ANYTHING in and of itself.  It's used to
    // prevent a finalizable object from losing any outstanding references 
    // a touch too early.  The JIT is very aggressive about keeping an 
    // object's lifetime to as small a window as possible, to the point
    // where a 'this' pointer isn't considered live in an instance method 
    // unless you read a value from the instance.  So for finalizable
    // objects that store a handle or pointer and provide a finalizer that
    // cleans them up, this can cause subtle ----s with the finalizer
    // thread.  This isn't just about handles - it can happen with just 
    // about any finalizable resource.
    // 
    // Users should insert a call to this method near the end of a 
    // method where they must keep an object alive for the duration of that
    // method, up until this method is called.  Here is an example: 
    //
    // "...all you really need is one object with a Finalize method, and a
    // second object with a Close/Dispose/Done method.  Such as the following
    // contrived example: 
    //
    // class Foo { 
    //    Stream stream = ...; 
    //    protected void Finalize() { stream.Close(); }
    //    void Problem() { stream.MethodThatSpansGCs(); } 
    //    static void Main() { new Foo().Problem(); }
    // }
    //
    // 
    // In this code, Foo will be finalized in the middle of
    // stream.MethodThatSpansGCs, thus closing a stream still in use." 
    // 
    // If we insert a call to GC.KeepAlive(this) at the end of Problem(), then
    // Foo doesn't get finalized and the stream says open. 
    [System.Security.SecuritySafeCritical]  // auto-generated
    [ResourceExposure(ResourceScope.None)]
    [MethodImplAttribute(MethodImplOptions.InternalCall)]
    [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)] 
    public static extern void KeepAlive(Object obj); 
```

如果您有兴趣，请参阅[此处了解更多详细信息。](http://sparethought.wordpress.com/2012/08/29/bug-in-cil-optimizations-logic-o_o/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T15:07:40.523

即使变量在范围内，如果在以后的任何代码路径中不再访问它，运行时也可以自由地收集它。这就是为什么当调试一个带有 JIT 优化的程序集时，即使它当前在范围内，它也会给你一条关于变量值被优化掉的消息。

请参阅[3.9 自动内存管理](http://msdn.microsoft.com/en-us/library/aa691138%28v=vs.71%29.aspx)中的第 2 项。

再具体一点，

> 例如，如果作用域内的局部变量是对对象的唯一现有引用，但在从过程中的当前执行点开始的任何可能的继续执行中从未引用该局部变量，则垃圾收集器可能（但不需要）将对象视为不再使用。

这是关键点；该对象被*认为*是不可访问的，因为对该对象的所有强引用（只有一个）都是不可访问的。请记住，C# 规范将包含有关语言*的信息以及有关编译代码应如何执行的信息*。还要记住，可达性不是由范围定义的。正如规范所述，如果编译器和运行时可以确定变量不存在于任何未来的代码路径中（这意味着它们根本不会被引用或仅在被确定为无法访问的路径中被引用，例如`if(false)`），那么变量是被认为是不可访问的，不能算作强参考。

虽然规范的特定部分没有`WeakReference`明确说明，但它不需要。就编译器而言，您只有一个指向该值的局部变量。

`WeakReference`只是另一个将对象作为参数的类；从编译器的角度来看；它没有理由相信（或以一种或另一种方式做出假设）该类是否保留它已通过的引用。考虑一下我是否有一个这样的类被使用：

```
public class MyClass
{
    public MyClass(object foo)
    {
        Console.WriteLine(foo);
    }
} 
```

在我的代码中，我这样做了：

```
var relay = new Relay();
...
var myClass = new MyClass(relay); 
```

我没有对我分配给 的值引入任何新的强引用`relay`，因为`MyClass`没有保留该引用。就编译器而言`WeakReference`，旨在为您提供对*不*计为强引用的对象的引用的“特殊”类的事实是无关紧要的。

可达性不是由范围定义的；它由所讨论的变量（不是值）是否位于任何可能的未来代码路径中来定义。由于`relay`在函数后面没有以任何形式出现，因此变量（以及它对对象的引用）被认为是不可访问的并且有资格收集。这就是`DisableOptimizations`标志存在于程序集级别的原因，以便运行时知道（除其他外）要等到变量超出范围后才符合收集条件，以便调试器可以访问它。

# php - Wordpress 已弃用，评论问题

> ID：12181010
> 
> 赞同：1
> 
> 时间：2012-08-29T15:04:37.690
> 
> 标签：php, wordpress, comments, deprecated

基本上，这是我的 index.php 代码：

```
<?php 
    get_header();
?>      
        <!-- WRAPPER START -->
        <section id="wrapper">
            <!--  START DYNAMIC PART -->
            <?php 
                if(have_posts()):
                    while(have_posts()):
                        the_post();
            ?>
            <!-- MAIN CONTENT START-->
            <section id="main-content">

                <!-- SIDEBAR START -->
                <aside id="tab-lists">
                    <?php if(!dynamic_sidebar('telerik-sidebar')): ?>

                    <?php endif; ?>
                    <?php if(!dynamic_sidebar('telerik-sidebar2')): ?>
                    <?php endif; ?>
                </aside>    
                <!-- SIDEBAR END -->

                <!-- BIG POST START -->
                <div id="big-post">
                    <article>
                        <header>
                            <h2>
                                <?php the_title(); ?>
                            </h2>
                            <p class="post-info">
                                Posted by <?php the_author(); ?> in on <?php the_date('d-m-Y'); ?> | <a href="<?php the_permalink();?>"><?php comments_number( 'no comment', 'one comment', '% comments' ); ?></a>
                            </p>
                        </header>
                        <?php the_post_thumbnail(); ?>
                        <div class="post-text">
                            <?php the_content(); ?>     
                        </div>
                    </article>
                </div>
                <!-- BIG POST END -->
                <div id="com">
                    <?php 
                        comments_template('',true); 
                    ?>
                </div>
            </section>
            <!-- MAIN CONTENT END -->
            <?php 
                endwhile;
                endif;
            ?>
            <!-- END DYNAMIC PART -->
        </section>
        <!-- WRAPPER END -->
<?php 
    get_footer();
?> 
```

它在我的本地主机上运行完美，但是当我将它上传到 wordpress 时，我得到了`Notice: Theme without comments.php is deprecated since version 3.0 with no alternative available. Please include a comments.php template in your theme. in /f5/funkz/public/wp-includes/functions.php on line 2670`- 错误，所以我做了一个 comments.php，并将只是我`comments_template('',true);`的放在那里（在 php 标签中）和他在 index.php 中的位置我放置`comments_template();`调用该文件，但后来我得到内存问题错误...我在一些地方可以通过增加它来解决`php.ini`，但我没有在我的服务器的文件夹中找到它:(。如果你有解决方案谢谢你提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-23T09:05:56.340

只需使用

```
<?php comments_template( '/templates/comments.php', true );     ?> 
```

并将comments.php 移入目录模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T23:43:58.637

如果您使用 2012`comments.php`模板，请确保它不是从行中查看：

```
@package Wordpress, @subpackage TwentyTwelve @since v1.0\. 
```

# wicked-pdf - wicked_pdf 页脚不起作用

> ID：12181019
> 
> 赞同：4
> 
> 时间：2012-08-29T15:05:14.453
> 
> 标签：wicked-pdf

我对 wicked_pdf 页脚渲染没什么问题。

**这是我的渲染方法：**

```
def invoice
    render pdf: "#{@order.number}.pdf",
           footer: { html: { template: "admin/orders/invoice_footer.html" } },
           margin: { bottom: 25 }
end 
```

PDF 渲染工作正常，但没有页脚模板。我在邪恶的环境中尝试了不同的边距，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T20:28:52.357

刚遇到同样的问题，问题似乎是我的 wkhtmltopdf 安装没有按要求生成页脚。

我的版本是通过 Ubuntu 存储库安装的，我卸载了它并下载了一个预先构建的版本，如此处所述，现在它工作正常：

[https://github.com/mileszs/wicked_pdf/wiki/Getting-Started-Installing-wkhtmltopdf](https://github.com/mileszs/wicked_pdf/wiki/Getting-Started-Installing-wkhtmltopdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-27T10:02:59.870

我确实遇到了同样的问题，这是部分未渲染的问题。

所以这个答案[https://stackoverflow.com/a/19323701/784318](https://stackoverflow.com/a/19323701/784318)确实对我有用：

所以我改变了我的代码：

```
options = {
    header: {html: {template: 'shared/_header', layout: nil}},
} 
```

对此：

```
options = {
    header: {content: render_to_string('shared/_header', layout: nil)},
} 
```

# c# - 格式化带有公制前缀的数字？

> ID：12181024
> 
> 赞同：14
> 
> 时间：2012-08-29T15:05:26.007
> 
> 标签：c#, .net, string, formatting, numbers

> **可能重复：**
> [C# 中的工程符号？](https://stackoverflow.com/questions/808104/engineering-notation-in-c)

[公制前缀](http://en.wikipedia.org/wiki/Metric_prefix)是否比[科学记数法](http://en.wikipedia.org/wiki/Scientific_notation)更可取可能有争议，但我认为它有物理单位的用例。

我环顾四周，但似乎 .NET 没有内置类似的东西，还是我弄错了？任何实现这一目标的方法都可以。

澄清一下：目标是将任何给定数字显示为浮点数或整数字符串，其值介于 1 和 999 之间，并带有相应的度量前缀。

例如

1000 -> 1k
0.05 -> 50m

进行一些舍入：

1,436,963 -> 144 万

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T15:41:52.933

试试这个。我没有测试它，但它应该或多或少是正确的。

```
public string ToSI(double d, string format = null)
{
    char[] incPrefixes = new[] { 'k', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y' };
    char[] decPrefixes = new[] { 'm', '\u03bc', 'n', 'p', 'f', 'a', 'z', 'y' };

    int degree = (int)Math.Floor(Math.Log10(Math.Abs(d)) / 3);
    double scaled = d * Math.Pow(1000, -degree);

    char? prefix = null;
    switch (Math.Sign(degree))
    {
        case 1:  prefix = incPrefixes[degree - 1]; break;
        case -1: prefix = decPrefixes[-degree - 1]; break;
    }

    return scaled.ToString(format) + prefix;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:19:37.460

根据这些[SO](https://stackoverflow.com/questions/1527682/has-c-net-builtin-conversion-routines-for-length-units) [文章](https://stackoverflow.com/questions/1629490/accessing-measurement-system-unit-names-kg-lb-m-in-etc-in-c-sharp)和我自己的研究，没有以公制单位格式化数字的本地方法。您将需要编写自己的方法来解析单位并附加相关的度量度量，例如MSDN上此[接口教程的扩展示例。](http://msdn.microsoft.com/en-us/library/4taxa8t2.aspx)您还可以尝试查找用于开发的[公制单位编码库。](https://stackoverflow.com/questions/1118341/measurement-unit-conversion)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T15:44:39.620

为每个数字类型创建一个扩展方法。您将为自定义格式调用 ToStringMetric()。

```
public static class Int32Extensions
{
        public static string ToStringMetric(this Int32 x) { return (x / 1000).ToString() + " K"; }
} 
```

# c# - “Microsoft.SqlServer.Dts.Runtime.Wrapper.ApplicationClass”类型没有定义构造函数

> ID：12181026
> 
> 赞同：2
> 
> 时间：2012-08-29T15:05:29.153
> 
> 标签：c#, sql, .net-4.0

我最近需要将我的项目从 .net 3.5 升级到 .net 4 并连接到新的 SQL Server 2008 R2。在我升级和编译后，它会抛出这两个错误：

无法嵌入互操作类型“Microsoft.SqlServer.Dts.Runtime.Wrapper.ApplicationClass”。请改用适用的接口。

“Microsoft.SqlServer.Dts.Runtime.Wrapper.ApplicationClass”类型没有定义构造函数

抛出此错误的代码在 ApplicationClass 上：IDTSApplication90 app = new ApplicationClass();

我在 bin 文件夹中有这个 dll：Microsoft.SqlServer.DTSRuntimeWrap.dll 这个 dll 的版本是 9.0.242.0

我认为.NET 4 不喜欢它。所以我让我们的DBA在服务器中搜索这个文件以查找版本10。她告诉我这个文件在sql server中不存在。

我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:40:03.057

对于 2008 R2，此 dll 的正确版本是 10.50.1600.1，我在 C:\Program Files (x86)\Microsoft SQL Server\100\SDK\Assemblies 中找到了它。尝试在那里搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T16:43:50.243

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms198536)：

> Microsoft.SqlServer.Dts.Runtime.Wrapper 命名空间提供用于在运行时创建控制流组件的类和接口。此程序集是命名空间 Microsoft.SqlServer.Dts.Runtime 的主互操作程序集 (PIA)，它是 Microsoft.SqlServer.ManagedDTS 程序集（在 microsoft.sqlserver.manageddts.dll 中）。**不应实例化此命名空间中的类。相反，请使用 Microsoft.SqlServer.Dts.Runtime 中的类**。

我认为您应该重写代码以使用[Microsoft.SqlServer.Dts.Runtime](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime)命名空间中的类。[来自这个命名空间的应用程序](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.application)可以被实例化——我已经使用过了。您可以在[此处](http://msdn.microsoft.com/en-us/library/ms403355.aspx)找到加载和执行包的示例。

# jquery - jQuery 下拉菜单 ie9 兼容模式

> ID：12181031
> 
> 赞同：1
> 
> 时间：2012-08-29T15:05:41.667
> 
> 标签：jquery, internet-explorer, drop-down-menu, ie-compatibility-mode

我创建了一个简单的 jQuery 下拉菜单。在 FF、Chrome、ie9 中工作。但是，它在 ie 兼容模式下不起作用。

HTML：

```
<div class="navBarCont">
<ul class="navBar gradient shadow" id="navBar">
    <li><a href="index.html">Home</a></li>
    <li class="selected"><a href="about_us.html">About Us</a></li>
    <li><a href="faq.html">FAQs</a></li>
    <li>Upcoming Events / News</li>                    
    <li>Educational
        <ul class="subnav">
            <li><a href="osteooftheknee.html">Osteoarthritis of the Knee</a></li>
            <li><a href="benefitsofexercise.html">Benefits of Exercise</a></li>
            <li><a href="didyouknow.html">Did You Know?</a></li>
        </ul>
    </li>
    <li><a href="contact.html">Contact Us</a></li>
</ul>
</div> 
```

JS：

```
$(document).ready(function(){
    $('.navBar li').hover(function () {
        $('ul', this).stop().slideDown(100);
    }, function () {
        $('ul', this).stop().slideUp(100);
    }); 
}); 
```

CSS：

```
    .navBarCont {
        位置：相对；
        顶部：-15px；
        z-index：自动；
        宽度：714px；
        边距：0 自动；
        背景：#fff;
    }
    .navBar {
        光标：指针；
        z 指数：95；
        位置：相对；
        高度：28px；
        向左飘浮;
        颜色：#ffffff；
        字体系列：arial；
        字体大小：0.97em；
        -webkit-border-radius：5px；
        -moz-边界半径：5px；
        边框半径：5px；
        背景：#fff;
    }
    .navBar>li {
        向左飘浮;
        显示：块；
        高度：23px；
        右边框：细实线#ffffff；
        填充：5px 18px 0；
        位置：相对；
        背景：RGB（109,179,242）；/* 旧浏览器 */
        /* IE9 SVG，需要有条件地覆盖 'filter' 到 'none' */
        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzZkYjNmMiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzU0YTNlZSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUxJSIgc3RvcC1jb2xvcj0iIzM2OTBmMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMxZTY5ZGUiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
        背景：-moz-linear-gradient（顶部，rgba（109,179,242,1）0％，rgba（84,163,238,1）50％，rgba（54,144,240,1）51％，rgba（30,105,222,1）100％）；/* FF3.6+ */
        背景：-webkit-渐变（线性，左上，左下，颜色停止（0％，rgba（109,179,242,1）），颜色停止（50％，rgba（84,163,238,1）），颜色停止（51 %, rgba(54,144,240,1)), color-stop(100%, rgba(30,105,222,1))); /* Chrome,Safari4+ */
        背景：-webkit-linear-gradient（顶部，rgba（109,179,242,1）0％，rgba（84,163,238,1）50％，rgba（54,144,240,1）51％，rgba（30,105,222,1）100％）；/* Chrome10+,Safari5.1+ */
        背景：-o-linear-gradient（顶部，rgba（109,179,242,1）0％，rgba（84,163,238,1）50％，rgba（54,144,240,1）51％，rgba（30,105,222,1）100％）；/* 歌剧 11.10+ */
        背景：-ms-线性梯度（顶部，rgba（109,179,242,1）0％，rgba（84,163,238,1）50％，rgba（54,144,240,1）51％，rgba（30,105,222,1）100％）；/* IE10+ */
        背景：线性梯度（顶部，rgba（109,179,242,1）0％，rgba（84,163,238,1）50％，rgba（54,144,240,1）51％，rgba（30,105,222,1）100％）；/* W3C */
        过滤器：progid:DXImageTransform.Microsoft.gradient(startColorstr='#6db3f2', endColorstr='#1e69de', GradientType=0); /* IE6-8 */
        文本对齐：居中；
    }
    .navBar li:hover, .arthritis .title a:hover {
        背景：#a5cdef；/* 旧浏览器 */
        背景：-moz-linear-gradient（顶部，#a5cdef 0%，#4e8edb 50%，#337add 51%，#163a9e 100%）；/* FF3.6+ */
        背景：-webkit-渐变（线性，左上角，左下角，颜色停止（0%，#a5cdef），颜色停止（50%，#4e8edb），颜色停止（51%，#337add），颜色-停止（100%，#163a9e））；/* Chrome,Safari4+ */
        背景：-webkit-linear-gradient（顶部，#a5cdef 0%，#4e8edb 50%，#337add 51%，#163a9e 100%）；/* Chrome10+,Safari5.1+ */
        背景：-o-linear-gradient（顶部，#a5cdef 0%，#4e8edb 50%，#337add 51%，#163a9e 100%）；/* 歌剧 11.10+ */
        背景：-ms-linear-gradient（顶部，#a5cdef 0%，#4e8edb 50%，#337add 51%，#163a9e 100%）；/* IE10+ */
        背景：线性渐变（到底部，#a5cdef 0%，#4e8edb 50%，#337add 51%，#163a9e 100%）；/* W3C */
        过滤器：progid:DXImageTransform.Microsoft.gradient(startColorstr='#a5cdef', endColorstr='#163a9e',GradientType=0); /* IE6-9 */
    }
    .navBar li.selected>a,
    .navBar li.selected{
        颜色：#ffffb9；
    }
    .navBar li.selected {
        背景：#a5cdef；/* 旧浏览器 */
        背景：-moz-linear-gradient（顶部，#a5cdef 0%，#4e8edb 50%，#337add 51%，#163a9e 100%）；/* FF3.6+ */
        背景：-webkit-渐变（线性，左上角，左下角，颜色停止（0%，#a5cdef），颜色停止（50%，#4e8edb），颜色停止（51%，#337add），颜色-停止（100%，#163a9e））；/* Chrome,Safari4+ */
        背景：-webkit-linear-gradient（顶部，#a5cdef 0%，#4e8edb 50%，#337add 51%，#163a9e 100%）；/* Chrome10+,Safari5.1+ */
        背景：-o-linear-gradient（顶部，#a5cdef 0%，#4e8edb 50%，#337add 51%，#163a9e 100%）；/* 歌剧 11.10+ */
        背景：-ms-linear-gradient（顶部，#a5cdef 0%，#4e8edb 50%，#337add 51%，#163a9e 100%）；/* IE10+ */
        背景：线性渐变（到底部，#a5cdef 0%，#4e8edb 50%，#337add 51%，#163a9e 100%）；/* W3C */
        过滤器：progid:DXImageTransform.Microsoft.gradient(startColorstr='#a5cdef', endColorstr='#163a9e',GradientType=0); /* IE6-9 */
    }
    .navBar>li:last-child {
        右边界：无；
        -webkit-border-radius: 0 5px 5px 0;
        -moz-border-radius: 0 5px 5px 0;
        边框半径：0 5px 5px 0；
    }
    .navBar>li:first-child {
        -webkit-border-radius：5px 0 0 5px；
        -moz-边界半径：5px 0 0 5px；
        边框半径：5px 0 0 5px；
    }
    .navBar ul {
        位置：绝对；
        左：0；
        文字装饰：无；
        列表样式：无；
        显示：无；
        填充：10px；
        文本对齐：左；
        边框顶部：无；
        z 指数：90；
        顶部：28px；
        颜色：#fff;
        -moz-border-radius-topleft：0px；
        -moz-border-radius-topright：0px；
        -moz-border-radius-bottomright：5px；
        -moz-border-radius-bottomleft: 5px;
        -webkit-border-radius：0px 0px 5px 5px；
        边框半径：0px 0px 5px 5px；
        背景：#6db3f2；/* 旧浏览器 */
        背景：-moz-linear-gradient（顶部，#6db3f2 0%，#1e69de 100%）；/* FF3.6+ */
        背景：-webkit-渐变（线性，左上，左下，颜色停止（0％，#6db3f2），颜色停止（100％，#1e69de））；/* Chrome,Safari4+ */
        背景：-webkit-linear-gradient（顶部，#6db3f2 0%，#1e69de 100%）；/* Chrome10+,Safari5.1+ */
        背景：-o-linear-gradient（顶部，#6db3f2 0%，#1e69de 100%）；/* 歌剧 11.10+ */
        背景：-ms-线性梯度（顶部，#6db3f2 0%，#1e69de 100%）；/* IE10+ */
        背景：线性渐变（到底部，#6db3f2 0%，#1e69de 100%）；/* W3C */
        过滤器：progid:DXImageTransform.Microsoft.gradient(startColorstr='#6db3f2', endColorstr='#1e69de',GradientType=0); /* IE6-9 */
    }
    .navBar 一个 {
        颜色：#fff;
        文字装饰：无；
    }
    .navBar ul li {
        明确：两者；
        向左飘浮;
        填充：5px；
        右边界：无；
    }
    .navBar ul li a {
        颜色：#fff;
        文字装饰：无；
    }

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:18:00.770

尝试这个

```
$(document).ready(function(){
    $('.navBar li').hover(function () {
           $('ul', this).stop(true,true).slideDown(100);
}, function () {
    $('ul', this).stop(true,true).slideUp(100);
});​
   }); 
```

# android - 通过自定义键盘在 EditText 中输入文本

> ID：12181033
> 
> 赞同：3
> 
> 时间：2012-08-29T15:05:43.540
> 
> 标签：android, input, android-edittext, keypad

嗨，我使用 gridview 在我的应用程序中创建了 6x6 编辑文本（覆盖了 70% 的屏幕）。所以我使用 Adapter 类将这 36 个编辑文本放在 gridview 中。下面我安排了 10 个按钮（覆盖剩余 30% 的屏幕），命名为 1-9 位和 C，以创建自定义键盘。这样我就可以在编辑文本中输入 1-9 位数字（我还禁用了软键盘）。但我的疑问是如何获取光标所在的edittext的rowid，并且在该edittext中，我的数字（我按下的（按钮1-9））应该作为输入。最后，我必须检索所有值。所以，我的问题是关于editexts 的ID 和号码放置。任何帮助将不胜感激。提前致谢。下面是我的代码。

```
public class TextAdapter extends BaseAdapter {

    private Context mContext;
    int count=36;
    int k=0;

    public TextAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return count;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        final EditText editText;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            editText = new EditText(mContext);
            editText.setLayoutParams(new GridView.LayoutParams(54, 53));
            editText.setBackgroundResource(R.drawable.edittextshape);
            editText.setGravity(Gravity.CENTER);
            editText.setId(k);
            k++;

            editText.setFilters( new InputFilter[] { new InputFilter.LengthFilter(1)});

            editText.setOnTouchListener(new OnTouchListener(){ 
                @Override 
                public boolean onTouch(View v, MotionEvent event) { 
                    int inType = editText.getInputType(); // backup the input type 
                    editText.setInputType(InputType.TYPE_NULL); // disable soft 

                    editText.onTouchEvent(event); // call native handler 
                    editText.setInputType(inType); // restore input type 
                    return true; // consume touch even 
                } 
            });

           // editText.setScaleType(EditText.ScaleType.CENTER_CROP);
            editText.setPadding(0, 0, 0, 0);
        } else {
            editText = (EditText) convertView;
        }

        editText.setText(" ");
        return editText;
    }

} 
```

活动计划：

```
public class MainActivity extends Activity implements OnClickListener{

    GridView gridView;
    Button b1;
    Button b2;
    Button b3;
    Button b4;
    Button b5;
    Button b6;
    Button b7;
    Button b8;
    Button b9;
    Button b10;

    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.my_two_frame_layout);
            FrameLayout fL1 = (FrameLayout) findViewById(R.id.fLayout1);

            gridView = (GridView) findViewById(R.id.gridview);

            gridView.setVerticalScrollBarEnabled(false);

            gridView.setAdapter(new TextAdapter(this));

            Display display = ((WindowManager) getSystemService(WINDOW_SERVICE)).getDefaultDisplay();

            int gridSize = display.getWidth();

            int colWidth = (gridSize / 9);

            gridView.setColumnWidth(colWidth);
            gridView.setNumColumns(9);

            b1=(Button)findViewById(R.id.keypad_1);
            b2=(Button)findViewById(R.id.keypad_2);
            b3=(Button)findViewById(R.id.keypad_3);
            b4=(Button)findViewById(R.id.keypad_4);
            b5=(Button)findViewById(R.id.keypad_5);
            b6=(Button)findViewById(R.id.keypad_6);
            b7=(Button)findViewById(R.id.keypad_7);
            b8=(Button)findViewById(R.id.keypad_8);
            b9=(Button)findViewById(R.id.keypad_9);
            b10=(Button)findViewById(R.id.keypad_10);

            b1.setOnClickListener(this);
            b2.setOnClickListener(this);
            b3.setOnClickListener(this);
            b4.setOnClickListener(this);
            b5.setOnClickListener(this);
            b6.setOnClickListener(this);
            b7.setOnClickListener(this);
            b8.setOnClickListener(this);
            b9.setOnClickListener(this);
            b10.setOnClickListener(this);

    }

    TextAdapter textadapter=new TextAdapter(this);

    public void onClick(View v)
    {

        EditText current = textadapter.getCurrentEditText();

            System.out.println(textadapter);
        System.out.println(current);

        switch (v.getId())
        {

        case R.id.keypad_1:  

                current.setText("1");
        break;

        case R.id.keypad_2:

                current.setText(current.getText().toString()+'2');
            break;

        case R.id.keypad_3:
            if(current != null) 
                current.setText(current.getText().toString()+'3');
            break;

        case R.id.keypad_4:
            if(current != null) 
                current.setText(current.getText().toString()+'4');
            break;

        case R.id.keypad_5:
            if(current != null) 
                current.setText(current.getText().toString()+'5');
            break;

        case R.id.keypad_6:
            if(current != null) 
                current.setText(current.getText().toString()+'6');
            break;

        case R.id.keypad_7:
            if(current != null) 
                current.setText(current.getText().toString()+'7');
            break;

        case R.id.keypad_8:
            if(current != null) 
                current.setText(current.getText().toString()+'8');
            break;

        case R.id.keypad_9:
            if(current != null) 
                current.setText(current.getText().toString()+'9');
            break;

        case R.id.keypad_10:
            if(current != null) 
                current.setText("");
            break;

        }

    }

} 
```

下面是 logcat 截图。

![在此处输入图像描述](../Images/b4adc027fe49f4d0bee83d795bfd4881.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T16:03:35.173

我会这样做：

**1.)**将当前编辑的 EditText 存储在您的适配器类中，并`View.OnFocusChangeListener`为您的`EditTexts`. 这可以检测是否进入/退出编辑模式。

将此添加到您的适配器类：

```
private EditText current = null;

public EditText getCurrentEditText() {return current;} 
```

并将此 OnFocusChangeListener 设置为您的所有编辑文本：

```
View.OnFocusChangeListener listener = new View.OnFocusChangeListener()
{
    @Override
    public void onFocusChange(View view, boolean hasFocus)
    {
        if(hasFocus)
            current = (EditText) view;
    }
}; 
```

`getView()`然后在适配器类的方法中将其添加到您的 TextViews 中，例如：

```
editText.setOnFocusChangeListener(listener); 
```

**2.)**现在在您的 Buttons 中`OnClickListener`，您可以访问当前编辑的`EditText`. 例如按钮“5”：

```
private View.OnClickListener click = new View.OnClickListener()
{
    public void onClick(View v)
    {
        Integer value = (Integer) v.getTag();    

        EditText current = adapter.getCurrentEditText();
        if(current != null) 
            current.setText(current.getText().toString()+value);
    }
} 
```

**编辑：**

这可能有点令人困惑，这些东西是如何结合在一起的。

在您的 Activity 中，您可能会从 Adapter 类创建一个实例。我们刚刚创建的适配器现在有一个名为`getCurrentEditText()`what 的方法，它将返回对当前编辑的 EditText 的引用。因此，您不需要在活动类中拥有所有 EditText 的引用，您可以通过适配器访问它们。

因此，在您的 Activity 中，您可以执行以下操作：

创建适配器的实例。

```
adapter = new TextAdapter(this); 
```

设置按钮：

```
button1 = (Button) findViewById(...);
button2 = (Button) findViewById(...);
button3 = (Button) findViewById(...);
... 
```

要区分您的按钮，您可以执行以下操作：

```
button1.setTag(1);
button2.setTag(2);
button3.setTag(3);
... 
```

然后您可以简单地将我们刚刚创建的 OnClickListener 添加到您的所有按钮中。

```
button1.setOnClickListener(click);
button2.setOnClickListener(click);
button3.setOnClickListener(click);
... 
```

**注意按钮可以看到适配器，因为它们都是你的Activity的成员，而Adapter可以返回当前的EditText。**

# extjs - 如何在 extJs 网格中排序之后（之前）转到第一页

> ID：12181035
> 
> 赞同：1
> 
> 时间：2012-08-29T15:05:47.867
> 
> 标签：extjs

我有带有分页的 extJs 4.1 网格。对于这个网格应用了远程排序（也许远程排序方式无关紧要）行为。排序后点击（点击标题）我想去第一页。我怎样才能做到这一点？也许存在预排序回调，我可以取消加载数据并使用 store.loadPage(1) 将加载转发到第一页？

PS对不起英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:30:47.137

此代码是 FiltersFeature.js 文件的一部分。看看如何指定（本地：false）它自动进入第一页；）

```
reload : function () {
    var me = this,
        store = me.view.getStore();

    if (me.local) {
        store.clearFilter(true);
        store.filterBy(me.getRecordFilter());
        store.sort();
    } else {
        me.deferredUpdate.cancel();
        if (store.buffered) {
            store.pageMap.clear();
        }
        store.loadPage(1);
    }
} 
```

您需要做的是使用 local: false 配置该功能。

# android - 新的“原生”Android FireFox 是使用 NDK 还是 Dalvik 引擎？

> ID：12181038
> 
> 赞同：1
> 
> 时间：2012-08-29T15:05:58.683
> 
> 标签：android, firefox

FireFox 是否使用标准的 Android API 或 NDK 来“原生”？

这个页面[http://www.webmonkey.com/2012/08/firefox-for-android-goes-tablet-native/](http://www.webmonkey.com/2012/08/firefox-for-android-goes-tablet-native/)说

> “Android 平板电脑的新原生界面意味着更快的启动时间和更快的 Awesome Bar 搜索速度，但这也意味着浏览器更接近 Android 风格，而不是 Firefox 风格。

所有其他平台的 FireFox 都使用 XUL / JavaScript，这意味着它受到 JavaScript 引擎的限制——这里的原生意味着它使用“Dalvik”虚拟机还是更低级别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:00:34.260

我相信用户界面使用 Dalvik。

渲染引擎一直使用 NDK。

# mysql - Yii 查询生成器中的 IN 问题

> ID：12181041
> 
> 赞同：0
> 
> 时间：2012-08-29T15:06:11.853
> 
> 标签：mysql, yii, query-builder

我使用 Yii 框架，我需要构建具有许多条件的困难查询。我正在填充 2 个数组 $conditions 和 $values。我有一个问题。下面是示例当我使用

```
$usersId = '1,2';
$conditions[] = 'e.user_id IN(:usersId)';
$values[':usersId'] = $usersId; 
```

我只从 user_id = 1 获得价值

当我不使用选项并手动编写时

```
$usersId = '1,2';
$conditions[] = 'e.user_id IN(' . $usersId . ')'; 
```

没问题。

当然我可以使用第二个构造，但它似乎不是很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:46:46.343

你应该`addInCondition`

```
$criteria->addInCondition('e.user_id',array(1,2)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:47:34.003

Yii 方法是使用[CDbCriteria](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#addInCondition-detail) `addInCondition`函数

```
$usersId = array(1,2); //must be array
$criteria=new CDbCriteria();
$criteria->addInCondition('user_id',$usersId);

$result = MyModel::model()->findAll($criteria); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T15:38:07.100

$values[':usersId'] = $usersId;

如果我正确理解您的问题，您可以在 yii 中使用 BindParam 函数吗？

而不是这个 - $values[':usersId'] = $usersId;

写这个 - $command->BindParam(':usersId', $usersId, PDO::PARAM_STR);

很简单，您将参数绑定到命令语句。

希望它有效！

# sql - 在 blob 上选择不同的

> ID：12181045
> 
> 赞同：3
> 
> 时间：2012-08-29T15:06:30.107
> 
> 标签：sql, database, oracle, blob

有没有办法验证 Oracle 数据库中更多行中 blob 中的值是否相同？blob 是同一列。

我将 blob 的大小存储在另一列中，但我需要知道该值是否也相等。

存储的值是一个序列化的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:26:41.527

我建议添加另一列，其中包含 blob 值的[哈希](http://en.wikipedia.org/wiki/Hash_function)值。当您存储 blob 时，您还计算哈希值，`SHA256`例如，并存储它。当您以后想要不同的值时，您只需使用这个新列。

# objective-c - 如何获得本地化的 Cancel、Done 等？

> ID：12181046
> 
> 赞同：48
> 
> 时间：2012-08-29T15:06:32.550
> 
> 标签：objective-c, ios, localization

UIBarButtonItem 有 Cancel、Done 等标识符。它们以文本形式显示给用户。如果用户更改语言，例如取消按钮将被自动翻译。作为开发人员，您不需要为此按钮提供本地化字符串。这意味着 Cancel、Done 和其他字符串已经本地化并与 OS 一起提供。

这是一种以编程方式获取此字符串的方法吗？

我不想在本地化文件中添加额外的字符串。如果可以访问，那将是非常好的。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-04-25T20:03:21.013

这是我为获取系统 UIKit 字符串而创建的一个小宏：

```
#define UIKitLocalizedString(key) [[NSBundle bundleWithIdentifier:@"com.apple.UIKit"] localizedStringForKey:key value:@"" table:nil] 
```

像这样使用它：

```
UIKitLocalizedString(@"Search");
UIKitLocalizedString(@"Done");
UIKitLocalizedString(@"Cancel");
... 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-09-04T17:24:39.170

轻松完成此任务的一种（诚然值得怀疑的）方法是直接使用 Apple 的框架包本地化：

要查看他们提供的内容，请通过 Finder 打开以下目录：

`/Applications/Xcode/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk/System/Library/Frameworks`

在您的情况下，您随后将打开`./UIKit.framework/English.lproj/Localizable.strings`（在 TextMate 中）。在这里，您可以看到 Apple 用于“打印”、“确定”、“开启”、“关闭”等内容的各种翻译。真正的魔力在于，您可以将大约 35 种不同的语言翻译复制到您的免费拥有自己的 Localizable.strings 文件。

如果您**非常厚颜无耻**并且不介意将应用程序的未来稳定性置于问题之中，您可以跳过整个“复制到您自己的 Localizable.strings”过程并以编程方式直接访问源代码：

```
NSBundle *uiKitBundle = [NSBundle bundleWithIdentifier:@"com.apple.UIKit"];
NSString *onText = uiKitBundle ? [uiKitBundle localizedStringForKey:@"Yes" value:nil table:nil] : @"YES";
NSString *offText = uiKitBundle ? [uiKitBundle localizedStringForKey:@"No" value:nil table:nil] : @"NO"; 
```

* * *

*警告：*我绝不建议您在打算提交到 App Store 的应用程序中以编程方式实际访问这些本地化资源。我只是在说明我看到的一个特定实现，它解决了你原来的问题。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-03-15T14:45:39.903

受到[对这个问题的回答](https://stackoverflow.com/a/23302008/6528403)（由[Stephan Heilner 提供](https://stackoverflow.com/users/498780/stephan-heilner)）和针对iPhone/iOS 的[回答](https://stackoverflow.com/a/6468992/6528403)（由[bdunagan 提供）的鼓舞](https://stackoverflow.com/users/70984/bdunagan)[：如何获取我的应用程序本地化的所有语言的本地化字符串列表？](https://stackoverflow.com/questions/6310487/iphone-ios-how-can-i-get-a-list-of-localized-strings-in-all-the-languages-my-ap)

Objective-C

```
NSString * LocalizedString(NSString *key) {
    return [[NSBundle mainBundle] localizedStringForKey:key];
}

@interface NSBundle(Localization)
- (NSString *)localizedStringForKey:(NSString *)key;
- (NSDictionary<NSString *, NSString *> *)localizationTable;
@end

@implementation NSBundle(Localization)
- (NSDictionary<NSString *, NSString *> *)localizationTable {
    NSString *path = [self pathForResource:@"Localizable" ofType:@"strings"];
    NSData *data = [NSData dataWithContentsOfFile:path];
    NSError *error = nil;
    id obj = [NSPropertyListSerialization propertyListWithData:data options:NSPropertyListImmutable format:NULL error:&error];
    if (error && obj == nil) {
        @throw error;
        return nil;
    }
    if ([obj isKindOfClass:NSDictionary.class]) {
        return obj;
    }    
    @throw NSInternalInconsistencyException;
    return nil;
}

- (NSString *)localizedStringForKey:(NSString *)key {
    return [self localizedStringForKey:key value:nil table:nil];
}
@end 
```

斯威夫特 5

```
public extension String {
    func localized(_ bundle: Bundle = .main) -> String {
        bundle.localize(self)
    }        
    var localized: String {
        return localized()
    }
}

extension Bundle {
    static var UIKit: Bundle {
        Self(for: UIApplication.self)
    }
    func localize(_ key: String, table: String? = nil) -> String {
        self.localizedString(forKey: key, value: nil, table: nil)
    }
    var localizableStrings: [String: String]? {
        guard let fileURL = url(forResource: "Localizable", withExtension: "strings") else {
            return nil
        }
        do {
            let data = try Data(contentsOf: fileURL)
            let plist = try PropertyListSerialization.propertyList(from: data, format: .none)
            return plist as? [String: String]
        } catch {
            print(error)
        }
        return nil
    }
} 
```

用法：

```
"Photo Library".localized(.UIKit) 
```

获取 UIKit 本地化字符串的所有键：

```
Bundle.UIKit.localizableStrings?.keys//.map { $0 } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-18T05:21:39.470

虽然可能并不完全符合您的要求，但 Mac App Store 中有一个名为“System Strings”的商业应用程序声称它提供了超过 53000 个标准本地化字符串的集合。它于 2012 年 11 月 2 日发布。我与此应用程序或作者无关。URL 是[https://itunes.apple.com/us/app/systemstrings/id570467776](https://itunes.apple.com/us/app/systemstrings/id570467776)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T17:19:03.260

听起来您要问的是Apple是否提供了一种访问预翻译字符串字典的方法。我认为 Apple 为此类提供的任何内容都将位于他们的文档中：[国际化编程主题](http://developer.apple.com/library/ios/#documentation/MacOSX/Conceptual/BPInternational/BPInternational.html#//apple_ref/doc/uid/10000171-SW1)

要回答您的问题，我认为他们不提供已知翻译的字典/列表。您要么必须在[`Localizable.strings`](http://developer.apple.com/library/ios/#documentation/MacOSX/Conceptual/BPInternational/Articles/StringsFiles.html#//apple_ref/doc/uid/20000005-SW1)资源文件中定义它们，要么按照其他人在评论中的说明进行操作，然后从 UIBarButtonItem 中提取标题（我会亲自使用资源文件）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-01T15:07:03.703

为什么不在情节提要中使用基本本地化？它将为您本地化。

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2014-04-03T09:26:41.917

你可以使用

```
NSLocalizedString(@"Cancel", @"Cancel") 
```

# javascript - HTML 中的 OLE 自动化（不使用 IE）

> ID：12181049
> 
> 赞同：1
> 
> 时间：2012-08-29T15:06:53.030
> 
> 标签：javascript, html, com, ole

我有问题，我真的需要你的支持！这就是问题所在：我有一个公开 COM 接口的应用程序 (.NET 4.0)。我们的大多数客户都能够简单地使用 HTML 中的标签并启动我们的应用程序；他们也能够与之互动。

今天，一位拥有大量 Javascript 渲染的客户告诉我们，使用 IE 是不可能的；在 IE 中页面非常慢，但在 Google Chrome 中非常快。因此，他们询问我们如何使用 Google Chrome 与我们的应用程序进行交互。

我在 Google 中进行了一些搜索，但似乎 OLE 仅在 IE 中可用。任何人都可以解决我的问题？

基本上要求是：

*   使用 GUID 或名称将我们的应用程序作为本地服务器启动；
*   能够在我们的 COM 接口中调用方法；
*   能够从我们的 COM 接口接收事件；

非常感谢。

# git - TortoiseGit：如何查看即将推送的提交列表

> ID：12181054
> 
> 赞同：38
> 
> 时间：2012-08-29T15:07:02.957
> 
> 标签：git, version-control, tortoisegit

我已经将来自不同分支的一些提交合并到我的“开发”分支中，现在我准备将它们推送到远程分支。

在 TortoiseGit 中，是否可以查看即将推送的项目列表？

`"Check for Modifications"`没有向我展示任何内容，因为更改来自分支。

`"Show Log"`还向我展示了所有更改的时间顺序列表。我宁愿只看到排队等待推送的项目的简单列表。

我希望我说得通。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-06T02:03:01.370

使用“同步对话框”右键单击存储库文件夹，选择“同步”

在“Out commits”选项卡中，您将看到要推送到远程的提交列表。

切换到“Out ChangeList”选项卡，您将看到相对于远程版本的更改文件列表。

如果“Out commits”为空或“Out ChangeList”选项卡未出现，请在组合框中明确指定“remote branch”。然后将加载“Out commits”列表并出现“Out ChangeList”选项卡。如果当前分支没有“远程跟踪分支”，则可能会发生这种情况。

“Pull Dialog”没有这样的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:40:34.847

我不知道你是否有办法在 TortoiseGit 中指定这个，但我认为你想要一个类似的命令：

```
$ git log origin/master..master 
```

# android - 通过链接打开 Android 应用

> ID：12181055
> 
> 赞同：3
> 
> 时间：2012-08-29T15:07:05.117
> 
> 标签：android

我正在尝试创建一个可以通过电子邮件发送的链接，当在 android 设备上打开我的应用程序时。如果该应用不在设备上，它会去 Google 商店搜索该应用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:12:07.093

你可以这样做：

在您的清单中创建一个过滤器来处理某些 URL，例如：

```
<intent-filter>
  <action android:name="android.intent.action.VIEW"/>
  <category android:name="android.intent.category.DEFAULT"/>
  <category android:name="android.intent.category.BROWSABLE"/>
  <data android:scheme="http" android:host="your-domain.com" android:path="/your-app"/>
</intent-filter> 
```

因此，如果用户安装了您的应用并打开[http://your-domain.com/your-app](http://your-domain.com/your-app)，您的应用将被打开并能够处理它。

然后，将[http://your-domain.com/your-app](http://your-domain.com/your-app)重定向到 Google Play (https://play.google.com/store/apps/details?id=com.your.app) 如果没有您直接打开应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:10:20.707

我会建议不同的，更安全的方法。将您的链接放在表格中

```
market://details?id=<PACKAGE> 
```

如果将始终将用户重定向到 Google Play，但如果应用程序已安装，用户将在那里看到“打开”。如果没有，“安装”将可见，因此用户可以继续。

# java - 如何查找两个顶点是否与 Jung 框架相连？

> ID：12181056
> 
> 赞同：0
> 
> 时间：2012-08-29T15:07:09.023
> 
> 标签：java, jung

我想知道如何使用 Jung 框架检查两个顶点是否在图中连接。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:30:11.753

如果图是无向的（你没有指定）或者你不关心边的方向，使用 Wea​​kComponentClusterer 将图分割成它的（弱）连通分量，然后检查顶点是否在同一个分量中. （如果我正确理解了您的问题，则 BicomponentClusterer 对于这种情况是不正确的。）

# objective-c - 如何将生成的视图发送到另一个类

> ID：12181061
> 
> 赞同：0
> 
> 时间：2012-08-29T15:07:24.877
> 
> 标签：objective-c, xcode

大家好，我遇到了一个问题，我有 Class1，我在其中调用请求并接收到数据（JSON），而不是我将此数据作为参数发送到 Class 2 并解析它并生成视图（我正在放置程序标签，文本字段，按钮等）在所有这些操作之后，我必须将此视图发送到另一个 Class3 我应该如何组织这种方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:33:22.780

一种方法是在 Class3 初始化时执行此操作：

```
Class3 * pClass3= [[Class3 alloc] initWithView:pClass2View]; 
```

或者通过在创建 Class3 之后简单地设置 Class3 实例变量：

```
pClass3.class2View= pClass2View; 
```

这能回答你的问题还是我错过了什么？

# php - 在 CakePHP 中渲染任何东西之前的三个新行会破坏 ajax

> ID：12181065
> 
> 赞同：1
> 
> 时间：2012-08-29T15:07:41.603
> 
> 标签：php, jquery, ajax, cakephp, http-headers

我需要 CakePHP **1.3**中的一个函数来呈现 jquery 函数使用的值，但它总是在破坏 jquery 的值之前呈现三个新行。设置任何这些都`headers`没有帮助

```
header("Pragma: no-cache");
header("Cache-Control: no-store, no-cache, max-age=0, must-revalidate");
header('Content-Type: text/x-json');
header("X-JSON: ".$content);
echo $content; 
```

jquery 使用：

```
var content = $.ajax({ url: /link/to/cakephp/function ,async: false }).responseText; 
```

我可以修复这三行或 jquery 函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:30:23.933

带有标题的文件。是否呈现为 HMTL？如果有，文档类型是什么？依稀记得以前有过类似的问题。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:09:27.417

您可以使用[trim()](http://php.net/manual/en/function.trim.php)删除额外的空格和换行符：

```
echo trim( $content ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-17T07:37:58.503

我发现了问题.. 它的 ?> 在配置文件的末尾，后面有换行符。删除 ?> 和换行符，您将丢失“\n\n\n”...

# android - Gridview OnScrollListener 无法正常工作

> ID：12181071
> 
> 赞同：0
> 
> 时间：2012-08-29T15:08:05.103
> 
> 标签：android, gridview

我需要帮助才能使我的 Gridview OnscrollListener 正常工作。我的结果没有按预期运行。它只是加载我所有的 gridview 项目，然后当我将 gridview 滚动到底部时，它会显示一个进度对话框并刷新。

我承认我不理解 OnScrollListener() 中的逻辑。我指的是这里给出的这个例子[Endless Scrolling ListView in Android](http://benjii.me/2010/08/endless-scrolling-listview-in-android/)。希望有人可以为我编辑代码？

我想限制每个滚动 20 个图像，直到它完成从我的 xml 加载我的所有图像。我正在从 xml 解析 url，然后将其加载到我的 Gridview 中。

GridViewActivity.class

```
public class GridViewActivity extends Activity {
        static final String URL = "http://api.androidhive.info/music/music.xml";
        private ProgressDialog pDialog;
        ArrayList<HashMap<String, String>> songsList;
        static final String KEY_SONG = "song"; 
        static final String KEY_ID = "id";
        static final String KEY_CAT_ARTIST = "artistcat";
        static final String KEY_THUMB_URL = "thumb_url";
        static final String KEY_BIG_URL = "big_url";
        static final String KEY_CAT_URL = "cat_url";
        GridView grid;
        GridViewActivityLazyAdapter adapter;
        String cat_url;
        String artist_url;
        private int visibleThreshold = 5;
        private int currentPage = 0;
        private int previousTotal = 0;
        private boolean loading = true;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.gridview_main);

            new loadGridView().execute();

            grid = (GridView) findViewById(R.id.grid_view);

        grid.setOnScrollListener(new OnScrollListener() {

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
            // TODO Auto-generated method stub
            if (loading) {
                if (totalItemCount > previousTotal) {
                    loading = false;
                    previousTotal = totalItemCount;
                    currentPage++;
                }
            }
            if (!loading && (totalItemCount - visibleItemCount) <= (firstVisibleItem + visibleThreshold)) {
                // I load the next page of gigs using a background task,
                // but you can call any function here.
                new loadGridView().execute(currentPage + 20);
                loading = true;
            }
        }

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            // TODO Auto-generated method stub
            }
        });

    }

        public class loadGridView extends AsyncTask<Integer, String, String> {

            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                pDialog = new ProgressDialog(GridViewActivity.this);
                pDialog.setTitle("Connect to Server");
                pDialog.setIndeterminate(false);
                pDialog.setCancelable(false);
                pDialog.show();
            }
            @Override
            protected String doInBackground(Integer... args) {
                // updating UI from Background Thread
                        Intent in = getIntent();
                        songsList = new ArrayList<HashMap<String, String>>();
                        cat_url = in.getStringExtra(KEY_CAT_URL);
                        artist_url = in.getStringExtra(KEY_CAT_ARTIST);

                        XMLParser parser = new XMLParser();
                        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
                        Document doc = parser.getDomElement(xml); // getting DOM element

                        NodeList nl = doc.getElementsByTagName(KEY_SONG);
                        // looping through all song nodes <song>
                        int page = args[0];
                int limit = 20; // items per page
                int istart = page * limit; // what item to start on (onCreate() calls it with 0 and 0 * 20 = 0)
                int iend = istart + limit; // how far to go
                for (int i = istart; (i < nl.getLength()) && (i < iend); i++) {
                            // creating new HashMap
                            HashMap<String, String> map = new HashMap<String, String>();
                            Element e = (Element) nl.item(i);
                            // adding each child node to HashMap key => value
                            map.put(KEY_ID, parser.getValue(e, KEY_ID));
                            map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
                            map.put(KEY_BIG_URL, parser.getValue(e, KEY_BIG_URL));
                            // adding HashList to ArrayList
                            songsList.add(map);

                        }
                        return null;
                    }   

            @Override
            protected void onPostExecute(String args) {
                adapter=new GridViewActivityLazyAdapter(GridViewActivity.this, songsList);   
                grid.setAdapter(adapter);
                pDialog.dismiss();
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T22:12:02.417

更改此行

```
for (int i = 0; i < nl.getLength(); i++) { 
```

对此

```
int page = args[0];
int limit = 20; // items per page
int istart = page * limit; // what item to start on (onCreate() calls it with 0 and 0 * 20 = 0)
int iend = istart + limit; // how far to go
for (int i = istart; (i < nl.getLength()) && (i < iend); i++) { 
```

并在**onCreate()**更改

```
new loadGridView().execute(); 
```

到

```
new loadGridView().execute(0); 
```

或者你会在页面*限制线上得到一个空指针异常；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:58:40.840

您正在发送到 loadGridView “currentPage + 20”，然后将其乘以 limit，即 20，所以这是一个巨大的数字。你这么说

```
for (int i = istart; (i < nl.getLength()) && (i < iend); i++)
// for (int i = hugeNumber; (i<probablyLessNumber) && (i < iend); i++) 
```

所以它甚至可能不会进入这个语句......我假设你应该这样：

```
if (!loading && (totalItemCount - visibleItemCount) <= (firstVisibleItem + visibleThreshold)) {
            // I load the next page of gigs using a background task,
            // but you can call any function here.
            new loadGridView().execute(currentPage + 1);
            loading = true;
        } 
```

# c# - 从字符串中删除一些字符

> ID：12181074
> 
> 赞同：-4
> 
> 时间：2012-08-29T15:08:09.273
> 
> 标签：c#, regex, string

我有一个字符串，像这样：`rgb (255, 0, 0)`。我想删除其中的每个字符，除了数字和`,`（逗号）字符。

基于此，我有两个问题：

1.  如何用正则表达式做到这一点？（我找到[了这个答案](https://stackoverflow.com/a/3210410/942659)，但我不知道如何在其中包含`,`（逗号）符号......）

2.  正则表达式是为此目的的最佳方法吗？还是有其他（更好的）方法？

*（最好 = 有最好的表现）*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T15:12:26.017

正则表达式当然是最简单的：

```
Regex.Replace(s, "[^\d,]+", "") 
```

将替换不是数字或逗号的所有内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T15:13:32.287

使用与您引用的[问题](https://stackoverflow.com/questions/3210393/how-to-remove-all-non-alphanumeric-characters-from-a-string-except-dash/3210410#3210410)相同的方法：

```
Regex rgx = new Regex("[^\d,]");

str = rgx.Replace(str, string.Empty); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T15:24:21.667

正则表达式是一个非常可行的解决方案。

我会将我的模式设置`(?<colour>(\d*), ?(\d*), ?(\d*))`为在每个颜色数字之前允许可选空格，但不限于每个数字最多 3 个数字（进一步的调整可以纠正这一点）。

然后，您将作为一个组访问颜色。

```
Regex pattern = new Regex(@"(?<colour>(\d*), ?(\d*), ?(\d*))");
Match m = pattern.Match(color);
Console.WriteLine(m.Groups["colour"].ToString()); 
```

返回：255、0、0

# c# - 如何使用 XmlInclude 序列化 IEnumerable

> ID：12181079
> 
> 赞同：0
> 
> 时间：2012-08-29T15:08:28.277
> 
> 标签：c#, .net, serialization, xml-serialization, ienumerable

我遇到了`IEnumerable`用`XmlSerializer`. 由于`IEnumerable`表示 的列表`object`，`XmlSerializer`因此无法提前知道需要序列化的类型。但是因为它需要知道，所以`InvalidOperationException`当它遇到除 之外的类型时会抛出`object`。

> Foo.Bar 类型不是预期的。使用 XmlInclude 或 SoapInclude 属性指定静态未知的类型。

`XmlIncludeAttribute`旨在应用于方法以指示返回值可以是某种类型。但是，`IEnumerable`没有可以将属性放在上面的方法。

我尝试将它们应用于`GetEnumerator`：

```
public class Bar : IEnumerable
{
    private List<object> list;

    public Bar()
    {
    }

    [XmlInclude(typeof(Bar))]
    [XmlInclude(typeof(ChildBar))]
    public IEnumerator GetEnumerator()
    {
        return list.GetEnumerator();
    }

    public void Add(Bar bar)
    {
        list.Add(bar);
    }

    public void Add(ChildBar childBar)
    {
        list.Add(childBar);
    }

    // used for deserialization
    public void Add(object o)
    {
        if (o is Bar || o is ChildBar)
        {
            list.Add(o);
        }
    }

    // more irrelevant stuff
}

public class ChildBar
{
    public ChildBar()
    {
    }

    // more irrelevant stuff
} 
```

那并没有解决它，我不知道在哪里可以使用这些属性。

我应该把它们放在哪里？我可以在没有他们的情况下解决它吗？我可以避免编写自己的枚举器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:34:41.243

编辑：由于它们是我之前回答的几个缺陷 - 没有包含更多条的 bar 并且没有使用 xmlAttributes 这里是我的新解决方案：但是这没有实现......

编辑：嗯，我已经回去回顾了一些事情，这是我通过实现 ICollection 的最终解决方案，希望这可以帮助任何试图找到序列化集合的解决方案的人。

```
public class Program
{
    static void Main(string[] args)
    {
        var program = new Program();

        program.SerializeObject();
    }

    private int tierIndex = 1;

    public void SerializeObject()
    {
        var barCollection = new BarCollection();
            var bar1 = new Bar() { Name = "bar1" };
            barCollection.Add(bar1);
            var bar2 = new Bar() { Name = "bar2" };
            barCollection.Add(bar2);
                var bar3 = new Bar() { Name = "bar3" };
                bar2.BarCollection.Add(bar3);
                var bar4 = new Bar() { Name = "bar4" };
                bar2.BarCollection.Add(bar4);
            var bar5 = new Bar() { Name = "bar 5" };
            barCollection.Add(bar5);
            var bar6 = new Bar() { Name = "bar 6" };
            barCollection.Add(bar6);
                var bar7 = new Bar() { Name = "bar 7" };
                bar6.BarCollection.Add(bar7);
                    var bar8 = new Bar() { Name = "bar 8" };
                    bar7.BarCollection.Add(bar8);

        var x = new XmlSerializer(typeof(BarCollection));
        x.Serialize(Console.Out, barCollection);

        Console.WriteLine("\n");

        WriteCollection(barCollection);

        Console.ReadLine();
    }

    public void WriteCollection(BarCollection barCollection)
    {
        tierIndex++;

        foreach (Bar bar in barCollection)
        {
            Console.Write(new StringBuilder().Insert(0, "--", tierIndex) + "> ");
            Console.Write(bar.Name + "\n");

            WriteCollection(bar.BarCollection);
        }

        tierIndex--;
    }
}

public class BarCollection : ICollection
{
    private readonly ArrayList barNodes = new ArrayList();

    public Bar this[int index]
    {
        get { return (Bar) barNodes[index]; }
    }

    public void CopyTo(Array a, int index)
    {
        barNodes.CopyTo(a, index);
    }

    public int Count
    {
        get { return barNodes.Count; }
    }

    public object SyncRoot
    {
        get { return this; }
    }

    public bool IsSynchronized
    {
        get { return false; }
    }

    public IEnumerator GetEnumerator()
    {
        return barNodes.GetEnumerator();
    }

    public void Add(Bar bar)
    {
        barNodes.Add(bar);
    }

    public void Add(Object bar)
    {
        barNodes.Add((Bar) bar);
    }
}

public class Bar
{
    [XmlAttribute(AttributeName = "Name")]
    public string Name;

    [XmlArray(ElementName = "BarNodes", IsNullable = true)]
    public BarCollection BarCollection = new BarCollection();
} 
```

这是输出：

```
<?xml version="1.0" encoding="IBM437"?>
<ArrayOfBar xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">

  <Bar Name="bar1">
    <BarNodes />
  </Bar>

  <Bar Name="bar2">
    <BarNodes>
      <Bar Name="bar3">
        <BarNodes />
      </Bar>

      <Bar Name="bar4">
        <BarNodes />
      </Bar>

    </BarNodes>
  </Bar>

  <Bar Name="bar 5">
    <BarNodes />
  </Bar>

  <Bar Name="bar 6">
    <BarNodes>
      <Bar Name="bar 7">
        <BarNodes>
          <Bar Name="bar 8">
            <BarNodes />
          </Bar>

        </BarNodes>
      </Bar>

    </BarNodes>
  </Bar>

</ArrayOfBar>

----> bar1
----> bar2
------> bar3
------> bar4
----> bar 5
----> bar 6
------> bar 7
--------> bar 8 
```

另一个堆栈参考：[XmlSerializer 不会序列化 IEnumerable](https://stackoverflow.com/questions/9102234/xmlserializer-in-c-sharp-wont-serialize-ienumerable)

# c++ - 在 initializer_list 后面存储“隐藏数组”

> ID：12181080
> 
> 赞同：7
> 
> 时间：2012-08-29T15:08:30.320
> 
> 标签：c++, visual-c++, gcc, c++11, clang

在 C++11 标准中，有一条关于支持统一初始化的数组的说明：

> 如果可以分配具有相同初始值设定项的显式数组，则该实现可以在只读内存中自由分配数组。

GCC/Clang/VS 是否利用了这一点？还是每次使用此功能的初始化都受堆栈上的其他数据以及此隐藏数组的额外初始化时间的影响？

例如，给定以下示例：

```
void function()
{
    std::vector<std::string> values = { "First", "Second" };
... 
```

上面提到的每个编译器是否会将支持数组存储到与声明的变量相同的内存中的统一初始化中`static const`？并且每个编译器会在调用函数时或在应用程序初始化时初始化支持数组吗？（我不是在谈论`std::initializer_list<std::string>`将要创建的那个，而是它所指的“隐藏数组”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:23:47.607

这是我至少为 GCC 回答我自己的问题的尝试。我对 gcc 的汇编程序输出的理解不是很好，所以请根据需要更正。

使用`initializer_test.cpp`：

```
#include <vector>

int main()
{
    std::vector<long> values = { 123456, 123457, 123458 };
    return 0;
} 
```

并使用以下命令行使用 gcc v4.6.3 进行编译：

```
g++ -Wa,-adhln -g initializer_test.cpp -masm=intel -std=c++0x -fverbose-asm | c++filt | view - 
```

我得到以下输出（减少到希望相关的位）：

```
 5:initializer_test.cpp ****     std::vector<long> values = { 123456, 123457, 123458 };
 100                    .loc 2 5 0
 101 0009 488D45EF      lea rax, [rbp-17]   # tmp62,
 102 000d 4889C7        mov rdi, rax    #, tmp62
 103                    .cfi_offset 3, -24
 104 0010 E8000000      call    std::allocator<long>::allocator()   #
 104      00
 105 0015 488D45D0      lea rax, [rbp-48]   # tmp63,
 106 0019 BA030000      mov edx, 3  #,                      <-- Parameter 3
 106      00
 107 001e BE000000      mov esi, OFFSET FLAT:._42   #,      <-- Parameter 2
 107      00
 108 0023 4889C7        mov rdi, rax    #, tmp63            <-- Parameter 1
 109 0026 E8000000      call    std::initializer_list<long>::initializer_list(long const*, unsigned long)   #
 109      00
 110 002b 488D4DEF      lea rcx, [rbp-17]   # tmp64,
 111 002f 488B75D0      mov rsi, QWORD PTR [rbp-48] # tmp65, D.10602
 112 0033 488B55D8      mov rdx, QWORD PTR [rbp-40] # tmp66, D.10602
 113 0037 488D45B0      lea rax, [rbp-80]   # tmp67,
 114 003b 4889C7        mov rdi, rax    #, tmp67
 115                .LEHB0:
 116 003e E8000000      call    std::vector<long, std::allocator<long> >::vector(std::initializer_list<long>, std::allocator<long> const&)  #
 116      00
 117                .LEHE0:
 118                    .loc 2 5 0 is_stmt 0 discriminator 1
 119 0043 488D45EF      lea rax, [rbp-17]   # tmp68,
 120 0047 4889C7        mov rdi, rax    #, tmp68
 121 004a E8000000      call    std::allocator<long>::~allocator()  # 
```

和

```
 1678                   .section    .rodata
 1679 0002 00000000         .align 16
 1679      00000000 
 1679      00000000 
 1679      0000
 1682               ._42:
 1683 0010 40E20100         .quad   123456
 1683      00000000 
 1684 0018 41E20100         .quad   123457
 1684      00000000 
 1685 0020 42E20100         .quad   123458
 1685      00000000 
```

现在，如果我在 x86-64 System V AMD64 ABI 调用约定（我已在代码清单中注释的参数）的上下文中正确理解第 109 行的调用，则*表明支持数组存储在`.rodata`,我将其视为与静态 const 数据相同的内存。*无论如何，至少对于 gcc 4.6。

执行类似的测试，但打开了优化 ( `-O2`) 似乎`initializer_list`已优化：

```
 70                    .file 2 "/usr/include/c++/4.6/ext/new_allocator.h"
  71                    .loc 2 92 0
  72 0004 BF180000      mov edi, 24 #,
  72      00
  73 0009 E8000000      call    operator new(unsigned long) #
  73      00
  74                .LVL1:
  75                    .file 3 "/usr/include/c++/4.6/bits/stl_algobase.h"
  76                    .loc 3 366 0
  77 000e 488B1500      mov rdx, QWORD PTR ._42[rip]    # ._42, ._42
  77      000000
  90                    .file 4 "/usr/include/c++/4.6/bits/stl_vector.h"
  91                    .loc 4 155 0
  92 0015 4885C0        test    rax, rax    # D.11805
 105                    .loc 3 366 0
 106 0018 488910        mov QWORD PTR [rax], rdx    #* D.11805, ._42
 107 001b 488B1500      mov rdx, QWORD PTR ._42[rip+8]  # ._42, ._42
 107      000000
 108 0022 48895008      mov QWORD PTR [rax+8], rdx  #, ._42
 109 0026 488B1500      mov rdx, QWORD PTR ._42[rip+16] # ._42, ._42
 109      000000
 110 002d 48895010      mov QWORD PTR [rax+16], rdx #, ._42
 124                    .loc 4 155 0
 125 0031 7408          je  .L8 #,
 126                .LVL3:
 127                .LBB342:
 128                .LBB343:
 129                    .loc 2 98 0
 130 0033 4889C7        mov rdi, rax    #, D.11805
 131 0036 E8000000      call    operator delete(void*)  # 
```

总而言之，`std::initializer_list`在 gcc 中看起来非常理想。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-23T17:19:40.063

First of all: VC++, as of version VS11=VS2012 in its initial release *does not support initializer lists*, so the question is a bit moot for VS atm., but as I'm sure they'll patch this up, it should become relevant in a few months (or years).

As additional info, I'll add what VS 2012 does with local array initialization, everybody may draw it's own conclusion as for what that means for when they'll implement initializer lists:

Here's initialization of built-in arrays what VC++2012 spits out in the default `release mode` of the compiler:

```
int _tmain(int argc, _TCHAR* argv[])
{
00B91002  in          al,dx  
00B91003  sub         esp,28h  
00B91006  mov         eax,dword ptr ds:[00B94018h]  
00B9100B  xor         eax,ebp  
00B9100D  mov         dword ptr [ebp-4],eax  
00B91010  push        esi  
    int numbers[] = {1,2,3,4,5,6,7,8,9};
00B91011  mov         dword ptr [numbers],1  
00B91018  mov         dword ptr [ebp-24h],2  
00B9101F  mov         dword ptr [ebp-20h],3  
00B91026  mov         dword ptr [ebp-1Ch],4  
00B9102D  mov         dword ptr [ebp-18h],5  
00B91034  mov         dword ptr [ebp-14h],6  
00B9103B  mov         dword ptr [ebp-10h],7  
00B91042  mov         dword ptr [ebp-0Ch],8  
00B91049  mov         dword ptr [ebp-8],9  

... 
```

So this array is created/filled at function execution, no "static" storage involved as such.

# mysql - MySQL 相当于 MSSQL CONVERT()

> ID：12181082
> 
> 赞同：5
> 
> 时间：2012-08-29T15:08:38.640
> 
> 标签：mysql, sql-server

我有这个 MSSQL 片段 -

```
CONVERT(INT, HASHBYTES('MD5', {some_field})) 
```

...而且我真的很想要一个 MySQL 等价物。我很确定这`HASHBYTES('MD5', ...)`和 MySQL 的一样`MD5(...)`——这`CONVERT(INT, ...)`让我很困惑。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T15:26:15.140

从该[`MD5()`](http://dev.mysql.com/doc/en/encryption-functions.html#function_md5)函数的 MySQL 手册条目中：

> 该值作为 32 个十六进制数字的字符串返回，或者`NULL`如果参数是`NULL`.

[`CONVERT()`](http://msdn.microsoft.com/en-us/library/ms187928.aspx)您在上面引用的 MSSQL函数`varbinary`通过截断到 4 个最低位字节将其参数转换为有符号的 32 位整数。这有点令人讨厌，因为 MySQL 算法的工作精度为 64 位。

因此，我们必须取 MySQL 十六进制表示的最右边的 8 位数字（表示 4 个最低位字节）并使用 MySQL 的[`CONV()`](http://dev.mysql.com/doc/en/mathematical-functions.html#function_conv)函数转换为十进制，然后对结果进行符号扩展：

```
CONV(RIGHT(MD5('foo'),8), 16, 10) ^ 0x80000000 - 0x80000000 
```

# c# - 无法引用我从 Visual Studio 以编程方式设置的用户环境变量

> ID：12181085
> 
> 赞同：0
> 
> 时间：2012-08-29T15:08:46.063
> 
> 标签：c#, .net, visual-studio-2010, environment-variables

使用 C#，我使用以下代码设置了以下环境变量：

```
RegistryKey key;
key = Registry.CurrentUser.CreateSubKey("Environment");
key.SetValue("MyDefaultBin", path); 
```

注册表在正确的位置更新，变量显示在“系统”>“高级”>“环境变量”下，但我无法在 Visual Studio 中访问我的项目文件中的路径，如下所示：$(MyDefaultBin)。我做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:10:37.463

新配置的环境变量不会添加到现有进程中。它们可用于更改后启动的新流程。

尝试重新启动 Visual Studio。

此外，如果您正在为“当前用户”创建变量，请确保您知道该用户是谁。有时代码以不同于登录用户的用户身份运行，这取决于代码在做什么。

# visual-studio - HTML 文件中的 Visual Studio 2012 自动完成功能不起作用

> ID：12181094
> 
> 赞同：0
> 
> 时间：2012-08-29T15:09:22.523
> 
> 标签：visual-studio, visual-studio-2012

其他人可以确认自动完成 HTML 标记在 Visual Studio 2012 中不起作用吗？要知道，键入`<a>`和 VS2010 会自动插入`</a>`. 这似乎在 VS2012 中根本不起作用 - 我在 3 台不同的机器（Windows 7、Windows 8 和 Windows Server 2008）上尝试了这个，其中两台以前安装了 VS2010，但一台完全干净（在 Windows 8 上安装了新的 VS2012专业的）。

如果有人可以确认，您是否有解决方案？这太痛苦了，它让我的 VS2012 坏了。

如果您想投票，我在这里打开了一个 Connect 案例： [http ://connect.microsoft.com/VisualStudio/feedback/details/758970/auto-insert-closing-tag-in-html-files-razor-plain- html5-web-forms-does-not-work-in-vs2012-rtm](http://connect.microsoft.com/VisualStudio/feedback/details/758970/auto-insert-closing-tag-in-html-files-razor-plain-html5-web-forms-does-not-work-in-vs2012-rtm) 和其他人的另一个： [http ://connect.microsoft.com/VisualStudio/feedback/details/759416/auto-insert-close-tag-失败](http://connect.microsoft.com/VisualStudio/feedback/details/759416/auto-insert-close-tag-fails)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:11:28.007

为我工作。

您可以检查文本编辑器 > HTML > 格式 > 自动插入关闭标记的 VS 选项。

如果是，请`a`通过单击“标签特定选项”按钮并选择“客户端 HTML 标记”> 一个选项来检查标记的特定设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:27:06.973

我与 MS 的 Visual Studio 2012 团队合作，弄清楚发生了什么，这恰好是一个与语言环境相关的问题。这实际上是一个已确认的错误。

有关更多信息，请参阅此博客文章：

[http://blogs.msdn.com/b/webdev/archive/2012/09/26/workaround-for-html-closing-tag-problem.aspx](http://blogs.msdn.com/b/webdev/archive/2012/09/26/workaround-for-html-closing-tag-problem.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T18:58:15.637

我在 Visual Studio 2008 方面遇到了同样令人不安的行为；只是它不是编辑。

问题只是 HTML 源代码中的一个现有关闭**p**标记。每当我打开一个新的**p**标签时，HTML 编辑器都会“看到”现有的结束标签，因此不会生成一个。

我通过使用 W3C 标记验证服务 ( [http://validator.w3.org/](http://validator.w3.org/) ) 发现了问题。

希望有帮助。

# java - TabHost 无法将自定义标题与其他标题功能结合使用

> ID：12181097
> 
> 赞同：2
> 
> 时间：2012-08-29T15:09:31.660
> 
> 标签：java, android

我正在尝试在我的一个选项卡上添加一个标题并得到一个 java 异常： `android.util.AndroidRuntimeException: You cannot combine custom titles with other title features`

**相同的代码在 Android v4.x 上运行良好，但在 v2.2x 上不运行**

*   有人可以帮我解决这个问题吗？

注意：我也使用`ActionBarCompat`包提供的`Google`

咆哮我的Java代码：

```
public class MyNotepadActivity extends TabActivity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.GINGERBREAD){
           requestWindowFeature(Window.FEATURE_NO_TITLE); 
           this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        }
        setContentView(R.layout.main);
        Resources res = getResources();
        TabHost tabHost = getTabHost();
        TabHost.TabSpec spec;

        Intent intent;
        intent = new Intent().setClass(this.getApplicationContext(),
        NotationActivity.class);
        spec = tabHost.newTabSpec("Notation").setIndicator("detail Note").setContent(intent);
        tabHost.addTab(spec);
    }
} 
```

堆栈跟踪：

```
08-29 08:39:39.329: W/dalvikvm(3063): threadid=1: thread exiting with uncaught exception (group=0x400259f8)
08-29 08:39:39.349: E/AndroidRuntime(3063): FATAL EXCEPTION: main
08-29 08:39:39.349: E/AndroidRuntime(3063): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.biblio/org.biblio.MyNotepadActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{org.biblio/org.biblio.MyNotepadActivity}: android.util.AndroidRuntimeException: You cannot combine custom titles with other title features
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2787)
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2803)
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.app.ActivityThread.access$2300(ActivityThread.java:135)
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2136)
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.os.Handler.dispatchMessage(Handler.java:99)
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.os.Looper.loop(Looper.java:144)
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.app.ActivityThread.main(ActivityThread.java:4937)
08-29 08:39:39.349: E/AndroidRuntime(3063): at java.lang.reflect.Method.invokeNative(Native Method)
08-29 08:39:39.349: E/AndroidRuntime(3063): at java.lang.reflect.Method.invoke(Method.java:521)
08-29 08:39:39.349: E/AndroidRuntime(3063): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
08-29 08:39:39.349: E/AndroidRuntime(3063): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
08-29 08:39:39.349: E/AndroidRuntime(3063): at dalvik.system.NativeStart.main(Native Method)
08-29 08:39:39.349: E/AndroidRuntime(3063): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{org.biblio/org.biblio.NotationActivity}: android.util.AndroidRuntimeException: You cannot combine custom titles with other title features
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2787)
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.app.ActivityThread.startActivityNow(ActivityThread.java:2627)
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:651)
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.widget.TabHost.setCurrentTab(TabHost.java:323)
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.widget.TabHost.addTab(TabHost.java:213)
08-29 08:39:39.349: E/AndroidRuntime(3063): at org.biblio.MyBookActivity.onCreate(MyBookActivity.java:70)
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1069)
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2751)
08-29 08:39:39.349: E/AndroidRuntime(3063): ... 11 more
08-29 08:39:39.349: E/AndroidRuntime(3063): Caused by: android.util.AndroidRuntimeException: You cannot combine custom titles with other title features 
08-29 08:39:39.349: E/AndroidRuntime(3063): at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:187)
 08-29 08:39:39.349: E/AndroidRuntime(3063): at android.app.Activity.requestWindowFeature(Activity.java:2760)
08-29 08:39:39.349: E/AndroidRuntime(3063): at org.biblio.ui.actionbarcompat.ActionBarHelperBase.onCreate(ActionBarHelperBase.java:64)
08-29 08:39:39.349: E/AndroidRuntime(3063): at org.biblio.ui.actionbarcompat.ActionBarActivity.onCreate(ActionBarActivity.java:53)
08-29 08:39:39.349: E/AndroidRuntime(3063): at org.biblio.SearchSudocActivity.onCreate(SearchSudocActivity.java:90)
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1069)
08-29 08:39:39.349: E/AndroidRuntime(3063): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2751)
08-29 08:39:39.349: E/AndroidRuntime(3063): ... 20 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T04:42:36.677

如果已`Window.FEATURE_CUSTOM_TITLE`设置，`setFeatureInt()`则无法再次调用。对它的调用将归结为 Window 实现中的[requestFeature()](https://github.com/android/platform_frameworks_policies_base/blob/master/phone/com/android/internal/policy/impl/PhoneWindow.java#L170)调用，该方法测试`FEATURE_CUSTOM_TITLE`并在设置时抛出异常。

问题是：框架可能会代表您请求功能。我搜索了 android 代码库，发现只有一种情况，[generateLayout()](https://github.com/android/platform_frameworks_policies_base/blob/master/phone/com/android/internal/policy/impl/PhoneWindow.java#L2043)方法，在我的情况下，它请求了`Window.FEATURE_ACTION_BAR`因为我启用了 Holo 主题......要弄清楚的讨厌的事情，解决方法很简单，[禁用全息主题](http://developer.android.com/guide/topics/ui/themes.html#SelectATheme)

# python - 写入文件不起作用（Windows 7）

> ID：12181102
> 
> 赞同：0
> 
> 时间：2012-08-29T15:09:46.313
> 
> 标签：python, file, file-io

我正在尝试将我的一些数据输出到 HTML 文件。Python 创建新文件没有问题，但它似乎与 write 命令有问题。程序运行时没有错误或警告，但文件大小仍为 0kb（空）。

我对python有点新手，所以我希望有人能指出我的错误。

这是代码：

```
#OUTPUT
calcfile = open('calculation.html','w');

CALCOUT = """<!DOCTYPE html>
<html>
    <head>
        <title>Quick Calculation</title>
    </head>
    <body>
        <h1>Estimate</h1>
        <table>
"""

#Some code which appends to CALCOUT -- long but it works perfectly via STDOUT. 

calcfile.write("%s" % CALCOUT);
#also tried calcfile.write(CALCOUT); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:16:55.407

您必须记住在打开文件后将其关闭。或者更好的是，使用`with`构造，一旦`with`退出块的范围，它就会自动关闭文件。

```
with open('calculation.html','w') as calcfile:
    CALCOUT = """<!DOCTYPE html>
    <html>
        <head>
            <title>Quick Calculation</title>
            </head>
        <body>
            <h1>Estimate</h1>
            <table>
    """
    calcfile.write(CALCOUT) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:15:54.607

尝试这个：

```
calcfile.write(str(CALCOUT)) 
```

此外，Python 中不需要分号。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-29T15:14:43.377

当然，您必须 calcfile.close() 文件。

# php - PHPExcel最后添加一个空的电子表格

> ID：12181105
> 
> 赞同：2
> 
> 时间：2012-08-29T15:09:59.603
> 
> 标签：php, phpexcel

我正在使用 phpexcel 创建一些工作表，一切正常，但是在我创建的所有工作表之后创建了一个额外的空工作表，我不知道它为什么会发生，也不知道如何阻止它。你知道为什么会这样吗？

为了生成我的电子表格，我有两个静态数组来存储工作表索引和名称，如下所示：

```
//List of Enter Data sheets.
const IRRIGATION_SHEET_INDEX = 0;
const CANOPY_SHEET_INDEX = 1;
const CLUSTER_SHEET_INDEX = 2;
const OBSERVATIONS_SHEET_INDEX = 3;
const WATERPOTENTIAL_SHEET_INDEX = 4;
const FRUITMATURITY_SHEET_INDEX = 5;

//list of hidden sheets created only to fill data validation lists in the bulk_upload_sheet
const BLOCKS_LIST_SHEET_INDEX = 6;
const RANCHES_LIST_SHEET_INDEX = 7;
const SUB_BLOCKS_LIST_SHEET_INDEX = 8;

/**
 * This is a static array to store the indexes and titles of each usable sheet (by usable sheet, it means that these are the sheets the user can see)
 * @var array
 */
public static $usableSheetTitles = array(
        //SELF::BULK_UPLOAD_SHEET_INDEX => 'BulkUploadTemplate',
        SELF::IRRIGATION_SHEET_INDEX => 'Irrigation',
        SELF::CANOPY_SHEET_INDEX => 'Canopy',
        SELF::CLUSTER_SHEET_INDEX => 'Cluster',
        SELF::OBSERVATIONS_SHEET_INDEX => 'Observations',
        SELF::WATERPOTENTIAL_SHEET_INDEX => 'WaterPotential',
        SELF::FRUITMATURITY_SHEET_INDEX => 'FruitMaturity'
);

public static $auxiliarSheets = array (
        SELF::BLOCKS_LIST_SHEET_INDEX => 'BlocksList',
        SELF::RANCHES_LIST_SHEET_INDEX => 'RanchesList',
        SELF::SUB_BLOCKS_LIST_SHEET_INDEX => 'SubBlocksList'
); 
```

然后我调用`createSheets()`读取这些数组并生成我需要的工作表的方法：

```
public static function createSheets($objPHPExcel, $ranches, $subBlocks) {
    count($ranches) <= 1 ? $hasSeveralRanches = false : $hasSeveralRanches = true;
    count($subBlocks) <= 0 ? $hasSubBlocks = false : $hasSubBlocks = true;
    foreach (self::$usableSheetTitles as $sheetIndex => $sheetTitle) {
        $objPHPExcel->createSheet($sheetIndex);
        $objPHPExcel->setActiveSheetIndex($sheetIndex);
        $objPHPExcel->getActiveSheet()->setTitle($sheetTitle);
        self::insertTitleAndLegend($objPHPExcel, $sheetTitle, $hasSeveralRanches, $hasSubBlocks);
    }
    foreach (self::$auxiliarSheets as $sheetIndex => $sheetTitle) {
        $objPHPExcel->createSheet($sheetIndex);
        $objPHPExcel->setActiveSheetIndex($sheetIndex);
        $objPHPExcel->getActiveSheet()->setTitle($sheetTitle);
    }
    return $objPHPExcel;
} 
```

你知道我在 xls 生成的模板中可能会生成这张最后一张空纸吗？这是正常行为还是我的代码中缺少我没有看到的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:26:30.027

这是正常行为。当您实例化一个新的 PHPExcel 对象时，它会自动使用单个工作表（“工作表”）创建它，因为这是大多数用户可能需要的。您正在创建的工作表被插入到它的“前面”，因为您正在指定它们的索引位置，这会将其“向下”推到一系列工作表中。

如果您不需要自动创建的工作表，因为您正在创建自己的所有工作表，请使用 PHPExcel 对象的 removeSheetByIndex() 方法。

# ruby-on-rails - 如何在 Rails 3 中初始化记录器？

> ID：12181107
> 
> 赞同：0
> 
> 时间：2012-08-29T15:10:07.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3, logging

我已阅读有关本[指南](http://guides.rubyonrails.org/debugging_rails_applications.html)和[课程](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html)的文档。**我希望创建一个记录器，它每天记录记录信息，假设一周后，每次自动删除最旧的记录信息。**

```
logfile = File.open(RAILS_ROOT + '/log/'+ (Date.today << 1).to_s + '_custom.log', 'a')  #create log file
logfile.sync = true  #automatically flushes data to file
CUSTOM_LOGGER = CustomLogger.new(logfile, 'daily')  #constant accessible anywhere 
```

另外，我希望创建一个自定义日志记录，例如看起来像这样的东西（格式）：

```
class MyLogger < Logger
  def format_message(severity, timestamp, progname, msg)
    "#{timestamp} : #{msg}\n"
  end
end 
```

所以基本上，我想更好地了解将所有内容正确放置在哪个目录下。例如，MyLogger 应该在逻辑上放置在哪里......（任何地方？一个助手？或在 app/config/ 下？

这是实现这[一点](http://ianma.wordpress.com/2009/04/08/custom-logging-in-ruby-on-rails/)的有效方法吗？

**我通过将所有内容放入 config/initializers 并创建一个名为 my_logger.rb 的文件来实现它。我仍然坚持删除/管理日志文件。**

服务器是否通过日志轮换来处理该部分（我知道 linux 操作系统中的日志轮换有问题）？还是 Rails 可以在内部处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:10:48.987

1.  MyLogger 应该放在哪里？

    可能放在/lib下。然后，您可以从设置自定义记录器的初始化程序中要求它。

2.  如何定期删除最旧的日志记录信息？

    有无数种方法可以做到这一点，并且选择将基于您的限制。你没有过多地谈论你的限制，所以很难给你一个恰到好处的答案。例如，您可以在每次添加新日志条目时清理旧日志，可以运行 cron 作业，可以安装一些非 Rails 软件来进行日志轮换和其他日志维护，可以使用 Papertrail，如果您使用 Heroku，您可以可以查找[https://devcenter.heroku.com/articles/scheduled-jobs-custom-clock-processes](https://devcenter.heroku.com/articles/scheduled-jobs-custom-clock-processes)。

    请记住，Rails 的设计目的更多是为了处理请求并在该请求的上下文中响应它们，而不是在接收请求的上下文之外运行维护。您可以将维护作为对 MyLogger 的每个 format_message 请求的副作用，检查最旧的日志记录条目，如果发现一个超过一周的条目，则将其删除。你没有给出一个限制，为什么你不能在过程中做这个，如果你在早期和可移植的东西上做原型，那么这会让你走得更快。

# html - 将 XSL 元素与页面右侧对齐

> ID：12181109
> 
> 赞同：0
> 
> 时间：2012-08-29T15:10:09.943
> 
> 标签：html, css

在页面生成和 XSLT 之后，XSL 有没有办法将以下元素对齐到页面的右侧？

```
<RadioButton>               
    <Name>myRadio</Name>
</RadioButton> 
```

模板在哪里`RadioButton`定义为`<input radio...etc>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:13:12.043

生成页面后，您将需要使用级联样式表或其他方式进行修饰对齐。

所以在你的 xsl 中你可能有模板让它像

```
<input type="radio" name="blah" class="moo" value="blah" /> 
```

并且在 .css 中有

```
.moo{
float:right;
} 
```

或者您可以使用内联样式，例如

```
<input type="radio" name="blah" style="float:left;" value="blah" /> 
```

# django - Django 和骨干模板

> ID：12181110
> 
> 赞同：0
> 
> 时间：2012-08-29T15:10:10.537
> 
> 标签：django, backbone.js

我有一个工作的主干应用程序。后端是 Django。

我有一个帖子的详细视图，它使用带有一点逻辑的 underscore.js 模板：

例如：

```
{[ _.each(model.images, function(i){ ]} <img src="{{i.image}}"> {[ }); ]} 
```

我现在想创建服务器端视图，以便提供 url`example.com/details/10`

重用 underscore.js 模板的最佳方式是什么？或者我应该将其复制/粘贴到另一个文件中并将其更改为 django 模板语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:05:44.590

看看[这里](https://github.com/thikonom/django-backbone-blog)，了解如何有效地构建这样的应用程序。

django 应用在 blog 目录中（查看 static/app.js）

# django - 如何在声明时指定小部件的 input_type？

> ID：12181112
> 
> 赞同：0
> 
> 时间：2012-08-29T15:10:17.663
> 
> 标签：django

通常在表单中定义 DateInput 小部件时，生成的 html 如下所示：

```
<input type="text" name="from_date" id="id_from_date"> 
```

类型是`text`代替`date`or `datetime`。

解决此问题的一种方法是，将类型设置为`__init__`：

```
class FilterCallsForm(Form):
    def __init__(self, *args, **kwargs):
        super(FilterCallsForm, self).__init__(*args, **kwargs)
        self.fields['from_date'].widget.input_type = 'date'

    from_date   = forms.DateField(localize=True, widget=forms.DateInput()) 
```

这有效，我得到了一个`<input type="date" name="from_date" id="id_from_date">`所需的。

但是，当我声明小部件时，有没有办法正确定义它？除了通过`__init__`这似乎有点奇怪之外，我没有找到其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:29:41.030

您可以子类`DateInput`化，并在定义表单时使用自定义小部件：

```
class MyDateInput(DateInput):
    input_type = 'date'

class FilterCallsForm(Form):
    from_date = forms.DateField(localize=True, widget=MyDateInput()) 
```

# c - 返回相同的结构但名称不同

> ID：12181114
> 
> 赞同：0
> 
> 时间：2012-08-29T15:10:32.943
> 
> 标签：c, c99

```
struct s1 { int a; int b; };
struct s2 { int a; int b; };

struct s2 test(void) {
    struct s1 s = { 1, 2 };
    return s; // incompatible types
} 
```

在上面的代码中，我可以在`s`不创建新变量并用's 值`struct s2`填充它的情况下返回吗？`s`保证`struct s1`总是与 相同`struct s2`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T15:14:42.817

您不能直接返回结构，但可以避免在源代码中创建单独的变量，方法是使用[复合文字](http://www.drdobbs.com/the-new-c-compound-literals/184401404)，这是 C99 的一个特性。

```
struct s2 test(void) {
  struct s1 s = { 1, 2 };
  return (struct s2){s.a, s.b};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:22:21.127

**除了[没有](https://stackoverflow.com/users/126769/nos)答案**..**注意：[仅供演示，它不是答案]**

这是一种非常糟糕的方法（不建议），但它可以欺骗编译器：-

```
struct s1 { int a; int b; };
struct s2 { int a; int b; };
struct s2 test(void) 
{
     struct s1 s = { 1, 2 };
     return *((struct s2*)(void*)&s);  
} 
```

它的行为完全取决于编译器。如果 s1 和 s2 的排列方式相同，那么这是可行的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-29T15:14:24.983

我想，正如您的评论所暗示的，您遇到了编译器错误。我建议您使用 return 声明：

```
return (struct s2) s; 
```

它应该工作，本能地。如果不是这样，您可以调整编译器以通过将错误设为警告来跳过检查。只是出于好奇，你为什么需要这个？

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-29T15:11:49.463

您可以通过投射返回，但不应该。

转换将在这里起作用，因为您确信字节将完全相同，因此在内存级别上，s2 可以忠实地解释为 s1。

但是，如果有人在 s2 中添加了一个新字段，这将非常糟糕，等等。从编程或软件工程的角度来看，您应该转换，如果您确实希望 s1 和 s2 保持兼容，您应该编写一个副本 ctor 或翻译器或从一个到另一个的任何东西。

# ruby-on-rails - Rails - 如何在回调中添加验证

> ID：12181117
> 
> 赞同：1
> 
> 时间：2012-08-29T15:10:40.947
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我需要在 before_validation 模型过滤器上添加验证。我怎样才能做到这一点？

提前致谢

- 编辑我没有正确表达自己。我需要在这样的回调上添加验证：

```
validate :check_length

def check_length
 if my_conditional
     validates_length_of   :name, :minimum => 5
 else
     validates_length_of   :name, :minimum => 7
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T15:12:40.907

您将必须创建一个方法并从回调中调用它

```
 before_validation :run_this_check

    def run_this_check
    ##run your validation
       errors.add(:key, "This is your error message")
    end 
```

或者如果验证不处理属性（或字段）

```
 def run_this_check
     errors.add_to_base('error message')
   end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:56:46.010

尝试使用

```
class X < ActiveRecord

  validates_length_of   :name, :minimum => 5 if my_condition
  validates_length_of   :name, :minimum => 7 unless my_condition

end 
```

什么条件？

# c++ - 假设所有 Windows 平台都在 UCS-2 LE 中是否安全

> ID：12181123
> 
> 赞同：4
> 
> 时间：2012-08-29T15:11:14.487
> 
> 标签：c++, windows, unicode, character-encoding

我通过将文本文件添加到资源然后加载它来将其链接到我的项目中。

我使用`LockResource`and a`static_cast`将其转换为`std::wstring`
`std::wstring sData(static_cast<wchar_t*>(pData));`

我的项目使用 UNICODE (windows)，这就是我使用`std::wstring`and的原因`wchar_t`。

我发现我必须将文件中的编码设置为 UCS-2 LE，否则它只会读取乱码。我猜这是因为这是 Windows 使用的编码。

我的问题是，假设所有 Windows 操作系统当前都使用 UCS-2 LE 是否安全？我不想遇到使用 UCS-2 BE（或其他东西）的系统。我的程序会严重崩溃。

我可以将文件保存在 ANSI 中，然后将其转换为操作系统使用的任何编码`MultiByteToWideChar`，但如果它肯定是 UCS-2 LE，那将是浪费时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T15:51:48.330

所有最新和当前版本的 Windows（不包括 XBox）都使用 UTF-16 LE。

请注意，您如何初始化字符串变量存在一个错误：

```
std::wstring sData(static_cast<wchar_t*>(pData)); 
```

这假设资源以终止（两字节）0 结尾，如果您只是在资源中引用文件，我认为不能保证这一点。您应该获取资源的大小，并使用 sData 的两指针构造函数。

如果您担心时间（正如您对 using 的评论所建议的那样`MultiByteToWideChar`），您应该知道您正在将数据从资源复制到动态内存中，并且此复制可能几乎与进行转换一样慢。如果你只做一次，我不会担心速度。我会将文本保存为 UTF-8 并使用`MultiByteToWideChar`，特别是如果 UTF-8 编码对您的文本更有效，因为这会使您的二进制文件更小。

如果速度是一个问题（并且如果您不需要在运行时修改字符串），那么我根本不会使用 a `std::wstring`。我会创建一个提供类似接口的类，但让它直接指向资源内存，而不是将整个文本复制到动态内存中。这样可以节省加载时间和内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:14:52.077

所有版本的 Windows 都是 LE，我认为微软没有计划将其操作系统更改为 BE。和 windows NT 5(Win2K) 及更高版本都基于 UTF-16，所以是的，假设 windows 是 UCS-2 LE 总是安全的

# j - 如何列出J中动词的代码

> ID：12181127
> 
> 赞同：5
> 
> 时间：2012-08-29T15:11:35.487
> 
> 标签：j

在控制台中，键入一个不带参数的动词将打印其内容：

```
 tolower

3 : 0
x=. I. 26 > n=. ((65+i.26){a.) i. t=. ,y
($y) $ ((x{n) { (97+i.26){a.) x}t
) 
```

这对开发来说很好，但在执行期间无法利用。有没有办法动态地做到这一点？有没有一个动词可以返回另一个动词的内容？

例如：

```
showverb 'tolower' 
```

或者

```
showverb tolower 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T15:36:48.787

你可以使用它的[表示](http://jsoftware.com/help/dictionary/dx005.htm)。例如，盒装表示 ( `5!:2`)`tolower`是：

```
 (5!:2) <'tolower'
┌─┬─┬────────────────────────────────────────┐
│3│:│x=. I. 26 > n=. ((65+i.26){a.) i. t=. ,y│
│ │ │($y) $ ((x{n) { (97+i.26){a.) x}t       │
└─┴─┴────────────────────────────────────────┘ 
```

其线性 ( `5!:5`) 为：

```
 (5!:5) <'tolower'
3 : 0
x=. I. 26 > n=. ((65+i.26){a.) i. t=. ,y
($y) $ ((x{n) { (97+i.26){a.) x}t
) 
```

# python - Python , XML 索引错误

> ID：12181129
> 
> 赞同：0
> 
> 时间：2012-08-29T15:11:42.423
> 
> 标签：python, xml, xml-parsing

您好，我正在使用的 xml 文件遇到问题。现在发生的事情是在一个简短的 xml 文件上，该程序可以正常工作，但是由于某种原因，一旦它达到一定大小（我认为是 1 MB），它就会给我一个“IndexError：list index out of range”

这是我目前正在编写的代码。

```
from xml.dom import minidom

import smtplib
from email.mime.text import MIMEText
from datetime import datetime

def xml_data():
    f = open('C:\opidea_2.xml', 'r')
    data = f.read()
    f.close()

    dom = minidom.parseString(data)
    ic = (dom.getElementsByTagName('logentry'))
    dom = None      
    content = ''  

    for num in ic:
        name = num.getElementsByTagName('author')[0].firstChild.nodeValue
        if name:
            content += "***Changes by:"  + str(name) + "*** " +  '\n\n     Date: '
        else:
            content += "***Changes are made Anonymously *** " +  '\n\n     Date: '
        print content

if __name__ == "__main__":
    xml_data () 
```

如果有帮助，这是xml的一部分。

```
 <log>
 <logentry
  revision="33185">
 <author>glv</author>
 <date>2012-08-06T21:01:52.494219Z</date>
 <paths>

 <path
  kind="file"
  action="M">/branches/Patch_4_2_0_Branch/text.xml</path>   

 <path
  kind="dir"
  action="M">/branches/Patch_4_2_0_Branch</path>

</paths>
<msg>PATCH_BRANCH:N/A
 BUG_NUMBER:N/A
 FEATURE_AFFECTED:N/A
 OVERVIEW:N/A
  Adding the SVN log size requirement to the branch 
 </msg>
  </logentry>
    </log> 
```

实际的 xml 文件要大得多，但这是一般格式。如果它很小，它实际上会起作用，但是一旦它变大，我就会遇到问题。

这是回溯

```
Traceback (most recent call last):
  File "C:\python\src\SVN_Email_copy.py", line 141, in <module>
    xml_data ()
  File "C:\python\src\SVN_Email_copy.py", line 50, in xml_data
    name = num.getElementsByTagName('author')[0].firstChild.nodeValue
IndexError: list index out of range 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:18:53.970

根据提供的代码，您的错误将出现在这一行：

```
name = num.getElementsByTagName('author')[0].firstChild.nodeValue
#xml node-^
#function call -------------------------^
#list indexing ----------------------------^
#attribute access -------------------------------------^ 
```

这是演示代码中您要索引到列表中的唯一位置。这意味着在您较大的 XML 示例中您缺少一个`<author>`标记。您必须纠正它，或添加某种级别的错误处理/数据验证。

请参阅代码详细说明以获取更多说明。通过利用连续命令的返回行为，您可以在一行中做很多事情。所以，`num`定义了，没关系。然后你调用一个函数（方法）。它返回一个列表。您尝试从该列表中检索并引发异常，因此您永远不会进入属性访问以获得 to `firstChild`，这绝对意味着您没有获得`nodeValue`。

错误检查可能如下所示：

```
authors = num.getElementsByTagName('author')
if len(authors) > 0:
  name = authors[0].firstChild.nodeValue 
```

尽管有很多很多方法可以实现这一目标。

# java - 如何使用注解获取 hornetq connetionfactory 对象

> ID：12181131
> 
> 赞同：0
> 
> 时间：2012-08-29T15:11:46.017
> 
> 标签：java, jms, jboss7.x, hornetq

我的 hornetq 在独立模式下运行。我需要使用注释的连接工厂对象。

没有注释我的代码是这样的。

```
 public static void main(String args[]) {
        Connection connection = null;
        InitialContext initialContext = null;
        ConnectionFactory connectionFactory = null;

        Hashtable<String, String> env = new Hashtable<String, String>();
        env.put(Context.PROVIDER_URL, "jnp://localhost:1099");
        env.put(Context.INITIAL_CONTEXT_FACTORY,
            "org.jnp.interfaces.NamingContextFactory");
        env.put(Context.URL_PKG_PREFIXES,
            "org.jboss.naming:org.jnp.interfaces");
        initialContext = new InitialContext(env);

        connectionFactory = (ConnectionFactory) initialContext
                .lookup("ConnectionFactory");

        connection = connectionFactory.createConnection();
                          } 
```

在这里，我可以获得连接对象。

使用注释我的代码是这样的。

```
 public class Test {

        @Resource(mappedName = "ConnectionFactory")
        private static  ConnectionFactory connectionFactory;

        public static void main(String args[]) {
            Connection connection = null;
            connection = connectionFactory.createConnection();
            }
            } 
```

在这里，我将 connectionfactory 对象设为空。

（注解查找connectionfactory失败）

任何人都告诉我获取连接工厂对象所需的配置。它对我有很大帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:38:00.513

您应该有一个 Spring bean 配置，其中包含具有适当传输配置的连接工厂 bean。

[看到这个](http://www.javacodegeeks.com/2010/06/spring-3-hornetq-21-integration.html)

# ruby-on-rails - Heroku 上奇怪的 TTFB（到第一个字节的时间）问题

> ID：12181133
> 
> 赞同：22
> 
> 时间：2012-08-29T15:11:49.410
> 
> 标签：ruby-on-rails, performance, heroku, newrelic

我们正在改进托管在 Heroku 上的 rails 应用程序的性能（rails 3.2.8 和 ruby​​ 1.9.3）。在此期间，我们遇到了一个令人担忧的问题，其来源似乎极难追踪。让我快速解释一下我们是如何遇到这个问题的，以及我们是如何尝试隔离它的。

--

自 6 月左右以来，我们在整个网站上都经历了 Time to First Byte 的奇怪滞后行为。使用该站点时问题很明显（有时应用程序在 10-20 秒内没有响应），并且它也存在于通过webpagetest.org 进行的瀑布分析中。我们位于丹麦，但可以从任何主机获得此结果。

为了确认这个问题，我们执行了一个基准测试，我们将 300 个相同的请求发送到一个简单的页面并测量响应时间。如果我们向首页发送 300 个请求，则中位响应时间低于 1 秒，这是相当不错的。让我们害怕的是，60 个请求花费的时间是原来的两倍多，其中 40 个请求花费的时间超过 4 秒。有些请求需要长达 16 秒。

这些缓慢的请求都没有出现在我们用于性能监控的 New Relic 中。无论我们扩展 Web 流程的规模有多高，都不会出现请求队列，并且结果是相同的。尽管如此，我们还是不能拒绝这个问题是由应用程序代码引起的，所以我们尝试了另一个实验，我们通过机架中间件响应请求。

通过将这个中间件（TestMiddleware）放在机架堆栈的开头，我们甚至在它到达应用程序之前就返回了一个请求，确保以下中间件或 rails 应用程序都不会导致延迟。

```
Middleware setup:
$ heroku run rake middleware
use Rack::Cache
use ActionDispatch::Static
use TestMiddleware
use Rack::Rewrite
use Rack::Lock
use Rack::Runtime
use Rack::MethodOverride
use ActionDispatch::RequestId
use Rails::Rack::Logger
use ActionDispatch::ShowExceptions
use ActionDispatch::DebugExceptions
use ActionDispatch::RemoteIp
use Rack::Sendfile
use ActionDispatch::Callbacks
use ActiveRecord::ConnectionAdapters::ConnectionManagement
use ActiveRecord::QueryCache
use ActionDispatch::Cookies
use ActionDispatch::Session::DalliStore
use ActionDispatch::Flash
use ActionDispatch::ParamsParser
use ActionDispatch::Head
use Rack::ConditionalGet
use Rack::ETag
use ActionDispatch::BestStandardsSupport
use NewRelic::Rack::BrowserMonitoring
use Rack::RailsExceptional
use OmniAuth::Builder
run AU::Application.routes 
```

然后我们运行相同的脚本来记录响应时间并得到几乎相同的结果。中位响应时间约为 130 毫秒（显然更快，因为它不会影响应用程序。但仍然有 60 个请求花费了 400 毫秒以上，25 个请求花费了 1 秒以上。同样，有些请求慢到 16 秒。

一种解释可能与网络上的慢跳或 DNS 设置有关，但 traceroute 的结果看起来完全没问题。

这个结果通过在 Heroku 上托管的另一个 rails 3.2 和 ruby​​ 1.9.3 应用程序上运行响应脚本得到证实——根本没有奇怪的行为。

DNS 设置遵循 Heroku 的建议。

--

至少可以说我们很困惑。Heroku 的路由网络会不会有问题？为什么我们会看到这种奇怪的行为？我们如何摆脱它？为什么我们不能在 New Relic 中看到它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-31T09:09:11.190

原来这是一种请求排队。有时，该 Web 服务器很忙，并且由于 heroku 只是将随机传入的请求随机路由到任何测功机，所以我最终可能会排在测功机后面的队列中，这由于例如数据库问题而完全卡住了。奇怪的是，这在新文物中几乎不明显（在他们的图表中查看薄的时候取消选中所有其他资源是个好主意，然后排队突然出现）

**2013 年 2 月 21 日编辑：**事实证明，它在 Newrelic 中几乎不引人注目的原因是，它没有被测量！[http://rapgenius.com/Lemon-money-trees-rap-genius-response-to-heroku-lyrics](http://rapgenius.com/Lemon-money-trees-rap-genius-response-to-heroku-lyrics)

我们觉得这非常令人沮丧，最终我们放弃了 Heroku，转而使用专用服务器。这以 1/10 的成本为我们带来了 20 倍的性能提升。此外，我必须说，我们对 Heroku 感到失望，当时 Heroku 否认了缓慢是由于他们的基础设施造成的，尽管我们怀疑并多次强调了这一点。我们甚至得到了这样的答案：

> Heroku 28/8 2012：*“如果您没有看到 New Relic 中报告的请求排队或其他缓慢，那么这可能不是服务器端问题。Heroku 的内部路由应该小于 1 毫秒。我们的监控系统都没有显示任何当前路由问题。”*

此外，我们采访了 Newrelic，他似乎也没有意识到这个问题，尽管他们自称与 Heroku 有着非常密切的工作关系。

> Newrelic 2012 年 8 月 29 日：*“看起来在 Ruby 代理的可见性开始之前导致这种情况发生的任何原因。代理记录的排队时间是从请求进入测功机的时间开始的，因此在此之前发生了减速。”*

底线是，我们最终花费数小时优化并非真正瓶颈的代码。此外，为了提高我们的性能，我们使用过高的测功机规模运行，但我们真正从中得到的唯一好处是 Heroku 和 Newrelic 的收益更大——这并不酷。我很高兴我们改变了。

PS。当时甚至有一个错误导致 newrelic pro 对所有测功机收费，尽管我们（根据 Newrelics 自己的建议）已经禁用了对我们后台工作进程的监控。在双方承认错误之前花了很多时间和许多电子邮件。

聚苯乙烯。如果您不知道当前正在进行的讨论，那么这里是链接[http://rapgenius.com/James-somers-herokus-ugly-secret-lyrics](http://rapgenius.com/James-somers-herokus-ugly-secret-lyrics)

**编辑 2013 年 2 月 26 日** Heroku 刚刚在他们的时事通讯中[宣布](https://blog.heroku.com/archives/2013/2/21/better_queuing_metrics_with_updated_new_relic_add_on)，Newrelic 发布了一个[更新](http://blog.newrelic.com/2013/02/21/using-new-relic-on-heroku-read-how-our-new-ruby-agent-measures-queue-time/)，显然应该对 Heroku 的情况有所了解。

**编辑 2013 年 8 月**4 日 Heroku 刚刚发布了关于该主题的[常见问题解答](https://blog.heroku.com/archives/2013/4/3/routing_and_web_performance_on_heroku_a_faq)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T23:15:49.237

traceroute 不是衡量网络问题的好方法，它是一个可以发现网络故障的工具，但它不会向您展示最佳视图。

尝试只放置一个静态网页，然后使用网页测试仪的 IP 地址点击它。如果还是慢，那就怪网络了。

如果由于某种原因它很快，那么你有一个不同的问题。

# javascript - jQuery .change() 事件没有被触发？

> ID：12181134
> 
> 赞同：2
> 
> 时间：2012-08-29T15:11:54.753
> 
> 标签：javascript, jquery, forms, onchange

示例位于[http://jsfiddle.net/4RAPH/](http://jsfiddle.net/4RAPH/)或见下文：

```
<select class="businessTypePullDown">
    <option value="" disabled selected>Business Type</option>
    <option value="1">General</option>
    <option value="2">Lawyer</option>
    <option value="3">Software Development</option>
    <option value="4">Auto-repair</option>
</select>

function filterPullDown () {
    alert('hello');
}

$("businessTypePullDown").change(filterPullDown); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T15:12:27.717

只是一个错字，你错过了一个点：

```
 $(".businessTypePullDown") 
```

你的小提琴更新了：http: [//jsfiddle.net/4RAPH/1/](http://jsfiddle.net/4RAPH/1/)

# jquery - Twitter bootstrap 更改词缀偏移

> ID：12181136
> 
> 赞同：9
> 
> 时间：2012-08-29T15:12:05.060
> 
> 标签：jquery, twitter-bootstrap

我有我想要“子导航”的网站。因此，当您滚动到部分时，其工具栏将贴在主工具栏下方。我有这个工作，但我无法在初始化后更改顶部偏移量。文档说：

> 词缀（'刷新'）
> 
> 当使用 affix 与从 DOM 中添加或删除元素一起使用时，您需要调用 refresh 方法：

但是当我尝试这个时，我得到：

> 未捕获的类型错误：对象 # 没有“刷新”方法

这是我的代码：

```
$(function () {
    $('.sec-nav').addClass("affix-top");
    var adjustNavs = function (first) {
        $('.sec-nav').each(function (){
            var $p = $(this).closest('.sec');
            var $$ = $p.prevAll('.sec');
            console.log($$);
            var h = 0;
            $$.each(function () { h+=$(this).outerHeight();});
            console.log(h);

            if (first) {
                $(this).affix({offset: {top: h}});
            } else {
                $(this).data('affix', {b: {options: {offset:{top: h}}}});
                console.log(this);
                $(this).affix('refresh')
            }

        });
    }
    adjustNavs(true);
    $('.sec').bind('DOMSubtreeModified', function () {
        adjustNavs();
    });
}); 
```

我尝试了不同的变体

```
 $(this).data('affix', {b: {options: {offset:{top: h}}}}); 
```

包含：

```
 $(this).affix({offset: {top: h}}); 
```

我无法改变偏移量。如何更改词缀插件的偏移量？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-29T15:46:03.283

我想到了。我没有动态更新偏移量，而是将偏移量值更改为一个函数：

```
$(function () {
    $('.sec-nav').addClass("affix-top").each(function (){
        var $self = $(this);
        var offsetFn = function () {
            var $p = $self.closest('.sec');
            var $$ = $p.prevAll('.sec');
            var h = 0;
            $$.each(function () { h+=$(this).outerHeight();});
            return h;
        }
        $self.affix({offset: {top: offsetFn}});
    });
}); 
```

现在，当一个部分由于 dom 操作或窗口重新大小而发生变化时，由于函数返回值的变化，偏移量会自动改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-09T00:42:29.240

对于更基本的情况，我稍微简化了 Fatmuemoo 的回答：我的主页导航栏（默认引导程序 #masthead）位于 ID 为 #bg 的大背景滑块下方。滑块的高度随 3 个 css 断点而变化。我们只是将#masthead 的偏移量设置为等于滑块的高度。简单的！

```
 $('header#masthead').affix({ //sticky header at bottom of bg
        offset: {
          top: function(){return $("#bg").outerHeight();}
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-27T15:20:47.933

怎么样：

```
 $(window).off('.affix');
            $("#ID_NAME")
                .removeClass("affix affix-top affix-bottom")
                .removeData("bs.affix");
            $('#ID_NAME').affix({ 
              offset: {
                top: OTHER_VALUE
              }
            }); 
```

# c# - 带取消的 IAsyncResult 开始/结束模式

> ID：12181139
> 
> 赞同：0
> 
> 时间：2012-08-29T15:12:08.433
> 
> 标签：c#, .net

我有一个使用`TcpClient`'s`BeginAcceptTcpClient()`方法的线程。它类似于：

```
// this gets set elsewhere
ManualResetEvent _doneListening = new ManualResetEvent(false); 
```

..并在线程程序中

```
while (true)
{
    var result = BeginAcceptTcpClient(null, null);

    var index = WaitHandle.WaitAny(new [] { _doneListening, result.AsyncWaitHandle });
    if (0 == index)
    {
        break;
    }

    // do something with EndAcceptTcpClient(result)
} 
```

现在，根据 MSDN 的文档：

> 异步 BeginAcceptTcpClient 操作必须通过调用 EndAcceptTcpClient 方法来完成。

我的问题与我的线程的*取消/停止*情况有关——也就是说，之后`_doneListening.Set()`——我真的不想要更多的 TcpClients。同时，我不想泄漏内存。

是否需要调用 EndAcceptTcpClient()？这会阻塞，我当然不希望它（我想要一个快速线程退出）。但否则它会泄漏内存吗？MSDN 提示 Begin 必须与 End 配对。我应该遵循不同的模式来有效地取消可能正在进行的异步操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T16:54:29.057

建议在 Begin/End 模式中调用 End* 方法。如果你不这样做，就会有一些资源会“泄漏”。您应该调用`TcpListener.Stop`以关闭侦听器，然后调用`EndAcceptTcpClient`.

如果侦听器再次绑定，Stop 可能会抛出异常。因此，您可能需要检查或检查`IsBound`（但在检查之间`IsBound`，`Stop`您仍然可以获得新的绑定）......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:16:33.397

`EndAcceptTcpClient`如果您关闭/处置了 TcpClient，则不会阻止。所以当你听完后关闭它。它将抛出异常以响应 EndAcceptTcpClient，但没关系。您可以安全地忽略/丢弃异常。

# css - 为什么我的 :hover 不起作用？

> ID：12181148
> 
> 赞同：1
> 
> 时间：2012-08-29T15:12:39.143
> 
> 标签：css

我有一个导航。当我悬停某些元素时，子菜单应该显示为“块”，但这不起作用。看：

```
<!doctype html>
<html lang="pt-br">
<head>
    <meta charset="utf-8" />
    <meta name="robots" content="noindex, nofollow" />
    <meta name="generator" content="Notepad++" />
    <meta name="author" content="Erick Ribeiro" />
    <meta http-equiv="refresh" content="60" />
    <title>Mozilla Firefox</title>
    <style type="text/css">
        *{
            font-family: calibri;
        }
        #menu
        {
            float: left;
        }
        .submenu
        {
            margin-top: 26px;
            padding: 10px;
            border: solid 1px rgb(224, 224, 224);
            background: rgb(254, 254, 254);
            color: rgb(0, 128, 224);
            border-radius: 0 0 4px 4px;
        }
        #menuHome:hover ~ #submenuControle
        {
            display: block;
            opacity: 0;
            color: red;
        }
        #submenuHome
        {
            display: none;
            opacity: 0;
        }
        #submenuControle
        {
            display: block;
            opacity: 1;
        }
        #submenuGestão
        {
            display: none;
            opacity: 0;
        }
        #submenuRL
        {
            display: none;
            opacity: 0;
        }
        #submenuSI
        {
            display: none;
            opacity: 0;
        }
        ul
        {
            float: left;
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        li
        {
            display: inline;
            float:left;
        }

        .primeiroItem
        {
            border: solid rgb(224, 224, 224);
            border-top-width: 1px;
            border-right-width: 1px;
            border-bottom-width: 1px;
            border-left-width: 1px;
            border-radius: 4px 0 0 4px;
        }
        .naoPrimeiroItem
        {
            border: solid rgb(224, 224, 224);
            border-top-width: 1px;
            border-right-width: 1px;
            border-bottom-width: 1px;
            border-left-width: 0;
        }
        .ultimoItem
        {
            border: solid rgb(224, 224, 224);
            border-top-width: 1px;
            border-right-width: 1px;
            border-bottom-width: 1px;
            border-left-width: 0;
            border-radius: 0 4px 4px 0;
        }
        a
        {
            text-decoration:none;
            padding: 8px;
            border: solid 1px;
            color: rgb(0, 0, 0);
            background: rgb(240,240, 240);
        }
        a:visited
        {
            color: rgb(0, 0, 0);
        }
    </style>
    <script type="text/javascript">

    </script>
</head>
<body>
    <nav id="menu">
        <ul>
            <li><a id="menuHome" class="primeiroItem" href="#">Home</a></li>
            <li><a id="menuControle" class="naoPrimeiroItem" href="#">Controle</a></li>
            <li><a id="menuGestao" class="naoPrimeiroItem" href="#">Gestão</a></li>
            <li><a id="menuRL" class="naoPrimeiroItem" href="#">Relatórios e Listas</a></li>
            <li><a id="menuSI" class="ultimoItem" href="#">Sistema Informação</a></li>
        </ul>
        <div id="submenuHome" class="submenu">
        </div>
        <div id="submenuControle" class="submenu">
            BSC
            Comunicação
            Treinamento
            Documentos
            Controle de Acesso
        </div>
        <div id="submenuGestão" class="submenu">
            ASV
            Treinamento
            Suprimentos
            Chamados</div>
        <div id="submenuRL" class="submenu">
            Listas
            Relatórios
        </div>
        <div id="submenuSI" class="submenu">
        </div>
    </nav>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:35:45.833

问题是，您正在使用同级选择器来选择不是同级的项目。您的代码`#menuHome:hover ~ #submenuControle`表示“当我悬停#menuHome 时，选择 ID 为 submenuControle 的兄弟姐妹”

但是在您的代码中 #menuHome 没有任何兄弟姐妹。

CSS 不允许您向后遍历，因此如果您需要子菜单在悬停 menuHome 时应用样式，您有 2 个选项。

1.  更改布局
2.  使用 JavaScript。

如果我理解您的代码，您正在尝试制作悬停菜单，所以我建议更改布局。

编辑：对您的代码进行了一些快速更改，添加了悬停菜单（我相信这就是您所追求的）。您可以更改样式和其他内容以满足您的需求。[http://jsfiddle.net/xHKKQ](http://jsfiddle.net/xHKKQ)

# css - 在内容 div(image) 上显示一些文本

> ID：12181150
> 
> 赞同：0
> 
> 时间：2012-08-29T15:12:40.727
> 
> 标签：css, html

我创建了三个 div

```
Header  
content  
Footer 
```

现在我需要在内容 div(image) 上显示一些文本

[小提琴](http://jsfiddle.net/J9bjm/507/)

我尝试使用左/上，但如果笔记本电脑屏幕尺寸发生变化，它总是会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:36:20.210

是的，我认为 sowmya 是对的，图片 url 有问题。我也试过检查这个[http://jsfiddle.net/zajy4/](http://jsfiddle.net/zajy4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:28:50.277

我认为这是您的图片网址问题。我使用了另一个图像，检查这个小提琴 [http://jsfiddle.net/J9bjm/514/](http://jsfiddle.net/J9bjm/514/)

# css - 是否有任何浏览器支持 CSS4 语言/方向选择器？RTL TTB

> ID：12181157
> 
> 赞同：12
> 
> 时间：2012-08-29T15:13:05.563
> 
> 标签：css, css-selectors, right-to-left

我知道[W3C 的工作草案尚未最终确定](http://dev.w3.org/csswg/selectors4/#linguistic-pseudos)（在撰写本文时），但许多非标准化的 CSS 通常在正式化之前由供应商实施。

我发现很难找到这方面的资源，想知道是否有人知道哪些（如果有浏览器）支持基于语言或文本方向的选择器？

例如：

```
p:dir(rtl){
   /* some rules for right-to-left languages */
}

p:lang(somelanguage){
   /* some rules for specific language */
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T15:23:43.930

:lang() 有很好的支持（现在已经有一段时间了）[https://developer.mozilla.org/en-US/docs/CSS/:lang](https://developer.mozilla.org/en-US/docs/CSS/:lang)

:dir() （我第一次看到它）似乎只在 Gecko [https://developer.mozilla.org/en-US/docs/CSS/:dir中受支持](https://developer.mozilla.org/en-US/docs/CSS/:dir)

# javascript - JSON：循环发票项目：如果 InvoiceNo 不存在则添加，如果存在则更新值，包括示例

> ID：12181160
> 
> 赞同：1
> 
> 时间：2012-08-29T15:13:30.127
> 
> 标签：javascript, json, loops, items

我正在尝试遍历发票列表及其各个 LineItem 值，最后有一个 [object Arrays] 的 Ojbect 带有发票编号和每个发票的所有行项目的总值。

```
var objInvoiceLineItem = function (strInvoiceNo,strValue) {
    this.InvoiceNo= strInvoiceNo;
    this.Value = strValue;
} 
```

//

```
var objAllInvoices = []; 
```

//

```
function AddValueTo_objAllInvoices(myInvoice){
    //don't know how to look and see if the Invoice exists? 
     //jQuery.inArray? 
     //for (var i = 0; i < objAllInvoices.length - 1; i++)?

    if exists (myInvoice.InvoiceNo) = false{
     var newObjInvoiceItem= 
          new objInvoiceLineItem(myInvoice.InvoiceNo, myInvoice.Value);
         objAllInvoices.push(newObjInvoiceItem)
    }
    else{
          //need help here please
         var obj = getobject;
         objAllInvoices.obj.Value += myInvoice.Value;
    }  
} 
```

//

```
var Invoice1A = new objInvoiceLineItem("Invoice1",20);
var Invoice1B = new objInvoiceLineItem("Invoice1",50);
var Invoice2A = new objInvoiceLineItem("Invoice2",30);

AddValueTo_objAllInvoices(Invoice1A);
AddValueTo_objAllInvoices(Invoice1B);
AddValueTo_objAllInvoices(Invoice2A); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:23:40.157

我认为这样的事情会做你想要的：

```
function AddValueTo_objAllInvoices(myInvoice)
{
    for (var i = 0; i < objAllInvoices.length; i++)
    {
        if (objAllInvoices[i].InvoiceNo == myInvoice.InvoiceNo)
        {
            // invoice exists, update it and return
            objAllInvoices[i].Value += myInvoice.Value;
            return;
        }
    }

    // if the invoice already existed, we would have returned in the loop
    // so we wouldn't have ever gotten here, so the invoice must not exist.
    // create it now:
    var newObjInvoiceItem = new objInvoiceLineItem(myInvoice.Container, myInvoice.Value);
    objAllInvoices.push(newObjInvoiceItem);
} 
```

# jquery - 网站的图表和图形组件

> ID：12181162
> 
> 赞同：-5
> 
> 时间：2012-08-29T15:13:37.357
> 
> 标签：jquery, asp.net, ajax, jsp, graph

我正在一个需要显示大量图表/图形（动态饼图、折线图、条形图等）的网站上工作

我愿意

*   技术 - ASP.NET 或 JSP
*   数据库 - MSSQL
*   前端 - HTML/CSS/AJAX/JQuery

我知道有像**Google Charts API**这样的组件可以做到这一点。我想知道是否还有其他我可以研究的好的图形组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:49:07.783

High chart 拥有大量用于 JavaScript 的图表工具： [http](http://www.highcharts.com) ://www.highcharts.com 。

要获取与服务器相关的数据，您可以使用 Ajax。这是jQuery使用Ajax拉取服务器数据的方式：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c++ - strstream 的 pcount 和冻结在 stringstream 中的替代品是什么？

> ID：12181165
> 
> 赞同：1
> 
> 时间：2012-08-29T15:13:50.557
> 
> 标签：c++, stringstream, strstream

我有使用 strstream 并使用 pcount 和 freeze 方法的旧 c++ 代码。我想改用 stringstream 类。strstream 的 pcount 和 freeze 方法有什么替代品？代码是这样的：

```
strstream log; // this will change to: stringstream log;

if (log.pcount()) //????
{
    log << ends;
    *myLog << log.str() << logmsg;
}

log.freeze(0); //???? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:24:00.533

`freeze()`是有并且不需要替换的东西，它的目的是处理内存。

`log.pcount()``log.str().size()`如果您的字符串流仅输出，则可以替换为。如果没有，我认为没有好的替代品。顺便说一句，也不需要结束。

# xaml - GridView 控件具有彼此没有关系的不同子类别

> ID：12181166
> 
> 赞同：1
> 
> 时间：2012-08-29T15:13:50.550
> 
> 标签：xaml, gridview, windows-8, windows-runtime, winrt-xaml

我可能在这里遗漏了一些东西，所以如果这个问题很明显，我深表歉意。在 XAML WinRT 应用程序中，我可以有一个 GridView 控件，我可以在其中抛出一组东西，然后使用 DataTemplates 等我可以在屏幕上呈现这些东西。

我怎样才能更进一步，拥有一个“主”GridView 控件，其中包含几个部分，这些部分从不同的地方获取数据并作为不同的东西集合存在于应用程序中？

例如，以内置的游戏应用程序为例。在这里，我们有不同的部分——聚光灯、朋友、游戏活动等，它们彼此非常不同，具有不同的数据并以不同的方式显示，但它们都存在于同一个 GridView 控件中。

如何才能做到这一点？

我确实希望这是有道理的

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:53:23.703

如果我正确理解您的要求，您希望拥有一组组，并使用不同的模板显示每个子组。

我这样做的方式是从一个公共基类派生所有子项（或者您可以构建一组对象组，我想）。然后我们使用 DataTemplateSelector 为主 GridView 中的每个项目选择适当的模板。

在实践中，我们必须比这更进一步，但这就是我实现类似目标的理论依据。

# javascript - 未捕获的错误：Google Fusion 表上的列索引无效

> ID：12181169
> 
> 赞同：0
> 
> 时间：2012-08-29T15:14:09.243
> 
> 标签：javascript, google-maps, google-fusion-tables

我正在处理 Google 地图项目，但在访问 Google Fusion Table 时遇到问题。它使用的代码与我在另一个项目中使用的代码相同，而且效果很好，所以我不确定我做错了什么。

它还没有完全完成，但它所在的页面是：[http](http://www.tameside.gov.uk/admin/preview?rid=30360&v=draft) ://www.tameside.gov.uk/admin/preview?rid=30360&v=draft ，一旦我打开幼儿园 div（使用小加号在角）并单击任何托儿所，它会抛出错误：“未捕获的错误：无效的列索引4。应该是[0-3]范围内的整数。” 但是我的表有 7 列，所以我不知道为什么它只数 4。

导致错误的代码部分在这里：

```
var schoolname = responsetable.getDataTable().getValue(row,0);
var type = responsetable.getDataTable().getValue(row,1);
var address = responsetable.getDataTable().getValue(row,2);
var latitude = responsetable.getDataTable().getValue(row,3);
var longitude = responsetable.getDataTable().getValue(row,4);
var website = responsetable.getDataTable().getValue(row,5);
var position = new google.maps.LatLng(latitude, longitude); 
```

当我将第 4 行和第 5 行（经度和网站）更改为 3 时（所以它只能引用 4 行），它跳过这部分并给我一个未定义的错误，所以这绝对是问题所在。我希望未定义的错误与此有关，或者我可能会再次回到这里。

如果有人可以提供帮助，将不胜感激。如果您想查看我的表格（及其所有列），请访问：[https](https://www.google.com/fusiontables/DataSource?snapid=S643803i3hF) ://www.google.com/fusiontables/DataSource?snapid=S643803i3hF 。此外，如果您在代码中发现任何其他问题，请随时告诉我，我假设还会有更多问题，因为我还没有完全完成它。

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:00:49.047

您的查询：

```
 var queryText = encodeURIComponent("SELECT 'name', 'type', 'address', 'website' FROM 4925161"); 
```

只要求 4 列。如果要在响应中使用它们，则需要请求纬度和经度。

# programming-languages - 语言流程图

> ID：12181174
> 
> 赞同：0
> 
> 时间：2012-08-29T15:14:25.297
> 
> 标签：programming-languages, flowchart

我正在查看一些 SQLite 的语法图，想知道它们是否可以用来描述所有语言（如 Python、C++ 等）？

[http://www.sqlite.org/lang_createtable.html](http://www.sqlite.org/lang_createtable.html)

从几年前我参加的一些 CS 课程中，我记得可以由 DFA 描述的语言组以及其他不能描述的语言，但不记得很多细节，并且认为无论如何这可能有所不同。

任何清晰度将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:38:04.570

您通常不会将它们称为“流程图”，而是称为“语法图”（就像您所做的那样）或“铁路图”。有关详细信息，请参阅[Wikipedia 文章](http://en.wikipedia.org/wiki/Syntax_diagram)，并随时使用我的[铁路图生成器](http://railroad.my28msec.com/)从 EBNF 语法生成它们。

DFA 对应于常规文法，而 EBNF 和句法图描述上下文无关文法。这些是乔姆斯基层次结构的不同层次，这是对形式语法进行分类的基本框架。

# java - 使用 Java Web App 在浏览器中打开文件

> ID：12181176
> 
> 赞同：0
> 
> 时间：2012-08-29T15:14:27.637
> 
> 标签：java, jsp, servlets

我有一个带有 servlet 和 jsp 的独立简单 java web 应用程序，比如说名称是 FileDisplay 我通过 url - 访问它的主页`http://localhost:8080/FileDisplay/index.jsp`。

应用程序本质上是检索具有完整路径的文件名列表（.xml 和 .pdf）。这些文件存储在各种外部目录中，例如 D:\ABCD、D:\XYZ、D:\PP\2012\08 等，但与 Web 应用程序位于同一台机器上，只是在不同的驱动器上。所以返回列表是这样的——

```
D:\ABCD\filename1.xml  
D:\ABCD\filename2.xml  
D:\ABCD\pdf1.pdf 
```

如果我在 jsp 中使用简单`<a href="">`的，那么它不起作用。在视图源中它看起来像 -

```
<a href="D:\ABCD\pdf1.pdf">file1</a> 
```

我认为这是因为这些文件不是 webapp 的一部分，所以容器不认为它是本地的，因此无法打开它们。当我将鼠标指针放在链接上时，状态栏显示为`file:///D:\ABCD\pdf1.pdf`. `file:///`我也尝试在中添加前缀`href`，即使那样它也不起作用。所以我尝试了其他一些事情。
我尝试过的一件事是`Context`在 Tomcat中设置，`server.xml`但即使这样似乎也不起作用。我正在使用 eclipse 来构建、部署和运行 tomcat，所以`server.xml`我为此上下文修改的是 eclipse 工作区中的一个。
我使用的设置是 -

```
<Context docBase="D:/ABCD" path="/File-Display/NB" reloadable="true"/> 
```

我为主应用程序设置了另一个上下文，即 -

```
<Context docBase="FileDisplay" path="/FileDisplay" reloadable="true" source="org.eclipse.jst.j2ee.server:FileDisplay"/> 
```

我在这里做错了什么？

它现在解释得更多了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:20:07.210

我认为你走错路了。

如果您想提供对分布在文件系统中的不同文件的访问，请创建接受 URL、读取适当文件并将其写入响应输出流的控制器 (servlet)。

通过这种方式，您可以控制对资源的访问，使它们安全等。您将能够轻松地修改您的应用程序（例如，如果您更改文件位置）。等等等等。

# android - 有蜂窝式自定义通知的模板吗？

> ID：12181178
> 
> 赞同：1
> 
> 时间：2012-08-29T15:14:30.697
> 
> 标签：android, android-notifications

我正在尝试创建一个看起来就像 3.0 通知的自定义通知布局，其中添加了一些额外的东西。更重要的是，我还想在此之上派生一个 Jelly Bean 扩展通知。

我希望通知具有与股票通知相同的布局，因此它非常适合，即像这样（下图）：

![在此处输入图像描述](../Images/f9a7e87bb67eea0612af483642aaaa89.png)

但是，我找不到有关正确尺寸和样式的任何信息 - 我需要为左侧的图像使用什么尺寸？每个文本的样式是什么？什么填充？

理想情况下，我喜欢使用 android.R.listPreferredItemHeight 之类的东西作为布局的高度和图像的尺寸，但我找不到任何与通知有关的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:18:25.147

您可以使用`Notification.Builder`该类提供了一种方便的方法来设置通知的各个字段并使用平台的通知布局模板生成内容视图。

请参阅：http: [//developer.android.com/reference/android/app/Notification.Builder.html](http://developer.android.com/reference/android/app/Notification.Builder.html)

如果您需要与 API 级别 11 之前的版本兼容，请查看支持库中的 NotificationCompat.Builder。

# c++ - 为什么我们将“this”指针传递给 setupUi 函数？

> ID：12181183
> 
> 赞同：2
> 
> 时间：2012-08-29T15:14:53.543
> 
> 标签：c++, qt

我是QT的新手。从 qt docs 相当简单地解释以下内容：

```
class CalculatorForm : public QWidget
 {
     Q_OBJECT
 public:
     CalculatorForm(QWidget *parent = 0);
 private slots:
     void on_inputSpinBox1_valueChanged(int value); //why is that slots are private?
 private:
     Ui::CalculatorForm ui;
 }; 
```

和构造函数的实现

```
 CalculatorForm::CalculatorForm(QWidget *parent)
     : QWidget(parent) {
     ui.setupUi(this); // <-- Question below
 } 
```

问：我想知道为什么我们将`this`指针传递给 setupUi 函数？它有什么作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:23:44.573

这样对话框就会将调用者作为父级，例如当父级关闭时，对话框可以自动关闭。通常，所有 gui 元素都有一个指向其父元素的指针。

```
 private slots:
     void on_inputSpinBox1_valueChanged(int value); //why is that slots are private? 
```

这些是自动生成的插槽，与 QtDesigner 中的 gui 元素的命名完全匹配。它们只是用来直接连接到那些 gui 元素，因此应该在这个类中处理。如果将这些信号扩展到其他类，那么 gui 中的任何更改都需要更改许多不需要知道 gui 细节的其他代码。

在特定 gui 元素的处理程序插槽中，您可以向应用程序的其余部分发出另一个更通用的信号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T16:09:57.327

唯一`setupUi`不创建的小部件是 ui 文件中层次结构顶部的小部件，并且由于`Ui::CalculatorForm`类实例不知道它必须填充的小部件，它 ( `this`) 必须显式传递给位于一点。

`this`或您将传递给它的任何其他小部件，用作所有其他子小部件的父级。例如，您可以像这样填充没有继承的小部件：

```
QWidget *widget = new QWidget;
Ui::CalculatorForm *ui = new Ui::CalculatorForm;
ui->setupUi(widget);
widget->show(); 
```

但实际上，如果你阅读[uic](http://qt-project.org/doc/qt-4.8/uic.html)生成的文件（可能命名为`ui_calculatorform.h`）的内容会更容易理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T15:28:40.740

setupUi 创建小部件的实例（QLabel、QTextEdit 等）。[用户界面编译器] (http://qt-project.org/doc/qt-4.8/uic.html) 从 .UI 表单中为您获取信息，并在生成的 moc 源文件中生成小部件创建代码。

在不使用 Qt Designer 或 UI 文件的情况下手动创建小部件的方法如下：

`QWidget* pWidget = new QWidget(this);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T15:27:49.310

我认为是将调用者小部件添加到此 UI 的布局中。此小部件将是顶级小部件。

Martin Beckett 的回答也可能是正确的，因为他描述的是 Qt 中的常见行为（参见大多数小部件派生类构造函数中的“父”参数）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T15:38:42.027

请注意，您可以通过其他方式设计器自动生成代码。在这种情况下，此代码有一个单独的“UI”类，它不是 QObject，因此它也不是 QWidget。自动生成的代码需要有关父窗口小部件的信息并自动连接插槽和信号，因此这就是您必须通过`this`.
这个pater比其他pater更少侵入（这就是为什么它是默认的）。您也可以尝试其他模式（检查 Qt Creator Designer 选项），但我建议您查看默认设置下设计器工具生成的内容。

# css - CSS Top 和 Left 百分比值是否取决于屏幕分辨率？

> ID：12181184
> 
> 赞同：1
> 
> 时间：2012-08-29T15:14:55.427
> 
> 标签：css

我试图使用 top 和 left 属性将 jquery 弹出 div 对齐到我的屏幕中心。我认为最好为这两个属性提供 % 值，这样即使调整了浏览器窗口的大小，弹出窗口也会居中。

但是当我实际调整浏览器窗口的大小时，它并没有达到预期的效果。

所以我的疑问是，我们为顶部、左侧属性指定的 % 值是否取决于屏幕分辨率？还是它们取决于父容器的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:15:43.330

% 取决于下一个相对父容器的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:19:37.183

他们可能。百分比与包含它的任何元素相关。如果该元素恰好是窗口本身，那么是的，它与分辨率有关。事实上，只要它的父级依赖于屏幕分辨率，它就会一直依赖。父母的父母也是如此，依此类推。有点难把握。

基本上，如果事物层次结构中“高于”您的元素的任何元素*不*依赖于分辨率，那么您的元素也不依赖于分辨率。但是为了查看它的父元素是否取决于分辨率，您必须查看*该*元素的父元素。以及之后的父母。以此类推一直到顶部。或者你可以测试一下看看:)

如果在“层次结构”中某处上方有一个绝对定位/大小的元素，那么它很可能*不*依赖于屏幕分辨率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:19:12.733

百分比取决于他们父母的体型。请参见此处： http: [//jsfiddle.net/tqWhL/4/](http://jsfiddle.net/tqWhL/4/)红色 div 与 #a 一样宽。

由于`body`是*浏览器窗口*宽度的 100%，您可以让您的 div 成为其子级`body`并将其设置为 100% 宽度。

# python - wxpython 和闪屏

> ID：12181185
> 
> 赞同：0
> 
> 时间：2012-08-29T15:14:56.523
> 
> 标签：python, wxpython, splash-screen

我正在尝试使用 wxpython 为我的 gui 可执行文件设置启动画面。基本上我正在做的是首先加载一堆数据库。然后我设置了我的 wx GUI 窗口。这两个过程大约需要 35 秒。

当我启动代码时，我希望显示一个启动屏幕并一直保持到 GUI 启动并运行（35 秒后）。

我看过这个： [如何调整我当前的启动画面以允许我的其他代码在后台运行？](https://stackoverflow.com/questions/3892327/how-to-adapt-my-current-splash-screen-to-allow-other-pieces-of-my-code-to-run-in)

这并没有多大帮助，因为我在我的 wx 代码之外加载了我的数据库。

例如：

```
Imports
Database loading
class (my wx) 
```

我在 wx 之外加载数据库，因为我有多个引用数据库的类。我对python相当陌生——所以请放轻松:)

设置启动画面以在我的数据库加载之前启动并在我的 wx 中的 GUI 加载时停止有任何帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T18:56:05.317

我认为你在这方面有点倒退。将数据库的加载放入框架或 wx.App 的 init 中。但在加载之前，请显示启动画面。然后进行加载。然后在加载完成后，进行 GUI 加载，并在到达 Frame 的 Show() 方法之前关闭启动屏幕。

# forms-authentication - MVC4 ExtendedMembershipProvider 和实体框架

> ID：12181186
> 
> 赞同：9
> 
> 时间：2012-08-29T15:15:01.380
> 
> 标签：forms-authentication, asp.net-mvc-4

我希望能够为应用程序使用与表单身份验证的 asp 成员详细信息相同的数据库。我目前正在使用 MVC4。当我开始并将 system.web.providers 添加到我的项目中时，我得到了一个单独的默认连接。我已修改字符串以指向与我的应用程序（实体框架）中使用的数据库相同的数据库。

我是否应该期望提供者在这个数据库中自动创建表，即

*   网页_会员
*   用户资料
*   网页_角色
*   网页_OAuthMembership

目前我正在...

> 要调用此方法，“Membership.Provider”属性必须是“ExtendedMembershipProvider”的实例

当我尝试通过默认的 mvc4 应用程序模板注册新用户时。并且没有桌子。

问候蒂姆

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T14:16:40.880

这里的问题是默认的 mvc4 互联网模板使用 simplemembership 来管理成员/角色信息。模板中的代码假设了这一点，并且只能与简单成员一起使用。当您安装通用提供程序时，帐户控制器代码会爆炸，因为它无法理解通用提供程序。看看这篇文章，它进一步解释了这种情况 [http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net- 4-5-web-forms-and-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T06:54:01.933

我有同样的问题，

但是我的没有解决，但是很多人说将它添加到您的 web.config

```
<add key="enableSimpleMembership" value="false"/>
<add key="autoFormsAuthentication" value="false"/> 
```

如果这不起作用，请尝试使顶部为真。

# php - PHP preg_split 并仅保留整个正则表达式作为分隔符，忽略括号内

> ID：12181187
> 
> 赞同：1
> 
> 时间：2012-08-29T15:15:07.913
> 
> 标签：php, regex, preg-split

我正在尝试在字符串上使用更复杂的正则表达式和 preg_split 来获取所有匹配项的数组并保留分隔符。通常这很简单，但尝试使用 PREG_SPLIT_DELIM_CAPTURE 并在我的正则表达式中使用多组括号被证明是困难的。我会详细说明：

我想在一行中解析一个 IP 地址并将整行分成一个数组，这样我就可以只使用 IP 做一些事情，但我想最终显示整行（我正在对 IP 应用格式，然后重新-组装和显示字符串）。我的正则表达式是这样的（它检查看起来像 IP 的东西，但它不检查有效性，我现在不在乎）：

```
(((\d{1,3})\.){3}(\d{1,3})) 
```

现在，我的代码暂时是这样的： $ipv4regex = "/(((\d{1,3}).){3}(\d{1,3}))/";

```
if (contains_ipv4($line)){
    $pieces = preg_split($ipv4regex, $line, 0, PREG_SPLIT_DELIM_CAPTURE);
    print "<pre>";
    print_r($pieces);
    print "</pre>";
}

function contains_ipv4($val){
    return (preg_match($ipv4regex, $val));
} 
```

这是我的输出示例（IP 地址已更改，但仍然相关）：

```
Array
(
    [0] => show arp results from 
    [1] => 10.10.15.120
    [2] => 15.
    [3] => 15
    [4] => 120
    [5] => 
) 
```

我怎样才能改变它，使输出如下：

```
(
    [0] => show arp results from 
    [1] => 10.10.15.120
    [2] => 
) 
```

本质上，我只想捕获 PREG_SPLIT_DELIM_CAPTURE 正则表达式中最外层的括号，而不是内部的括号。我知道我可以针对这种特殊情况更改我的正则表达式，但是我有一个带有很多括号的“正确”IPv6 正则表达式，我担心只用一组括号重写几乎是不可能的外部。谁能帮帮我？我将不胜感激。或者，如果我错过了一种完全不同的方式来达到我的目的，请随时指出我的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:18:16.077

您可以通过在开括号后添加来停用括号捕获`?:`，例如：

```
((?:(?:\d{1,3})\.){3}(?:\d{1,3})) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:05:21.217

我设法减少了该方法的整体混乱并对其进行了改进以仅使用几行代码：

```
if (preg_match($ipv4regex, $line)){
    $line = preg_replace_callback($ipv4regex, 'add_ipv4_p', $line);
} 
```

然后我稍后打印该行，但是这个简单的位就是我所需要的正则表达式检查方法 add_ipv4_p 是我用来将格式应用于传递给它的数组的第一个元素的方法。简单的。通过重新使用此代码段并更改正则表达式和格式化方法，我能够为代码添加更多格式化选项。

# iphone - 在“Plist”文件中保存/编辑变量？

> ID：12181191
> 
> 赞同：-1
> 
> 时间：2012-08-29T15:15:27.267
> 
> 标签：iphone, string, variables, plist

> **可能重复：**
> [iPhone Dev - 从 Plist 编辑数组中的对象](https://stackoverflow.com/questions/12476968/iphone-dev-edit-objects-in-array-from-plist)

我有许多不同的变量，如字符串和整数，我想将它们保存到我已经设置的“Plist”中。我已经在阅读“Plist”，但是我不确定如何更改变量并将其保存回“Plist”。

*更新*

我已经在使用以下代码加载 plist 文件并读取“viewDidLoad”方法中的键。

```
NSString* filePath = [[NSBundle mainBundle] pathForResource:@"questions" ofType:@"plist"];
categories = [NSArray arrayWithContentsOfFile:filePath]; 
```

在我的“Plist”中，我为每个项目都有一个数组，然后我阅读了它。

```
pair = [categories objectAtIndex:questionCounter]; 

plistQuestion = [pair objectAtIndex:0];
plistAnswer = [pair objectAtIndex:1];
plistAnswer2 = [pair objectAtIndex:2];
completed = [pair objectAtIndex:3]; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:33:31.030

```
NSMutableDictionary *foo = [NSMutableDictionary dictionaryWithContentsOfFile:@"file.plist"];
[foo setObject:@"bar" forKey:@"baz"];
[foo writeToFile:@"file.plist" atomically:YES]; 
```

# matlab - 在matlab中提取区域

> ID：12181194
> 
> 赞同：3
> 
> 时间：2012-08-29T15:15:37.933
> 
> 标签：matlab, image-processing, graph

假设现在我有一个图像分割图 S，其索引范围为 1 到 k。具有相同编号的索引属于同一段。例如：

```
S = [1 1 1 2 2 2;
     1 1 1 2 2 2;
     2 2 2 2 1 1;
     2 2 2 2 1 1;
     2 2 2 2 1 1] 
```

对于这个分割图 S，我想得到区域。例如，S中的'1'有两个独立的部分，所以我想得到三个区域——两个带有标签1，一个带有标签2，为了区分两个'1'，我想将其中一个更改为是另一个标签，比如 3。所以最终的地图是：

```
S = [1 1 1 2 2 2;
     1 1 1 2 2 2;
     2 2 2 2 3 3;
     2 2 2 2 3 3;
     2 2 2 2 3 3] 
```

我正在考虑使用连接组件来解决这个问题，但它需要制定亲和矩阵。有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:12:22.333

简单地得到一个所有的逻辑矩阵，然后得到所有连接的元素`bwlabel`。您可以将它们合并在一起。为了避免混合两个区域的问题，只需添加原始矩阵的最大值例如：

```
mask           = (S == 1);
labeled        = bwlabel (mask);
labeled(mask)  = labeled(mask) + max (S(:)) - 1;
labeled         = S + labeled; 
```

唯一的区别是，以前值为“1”的区域现在都没有该值，但至少它们被标记为不同。如果您希望其中一个保留其编号，只需为最高值制作另一个掩码，并使用它将它们全部变回“1”。

```
labeled(S == max(S(:))) = 1; 
```

# php - 为什么返回 bool(false)？

> ID：12181197
> 
> 赞同：2
> 
> 时间：2012-08-29T15:15:43.440
> 
> 标签：php, mysql, boolean

我有这个查询来检查运动是否存在并且应该返回真或假。这个查询

```
function movement_performed_today($class_id, $client_id){
$class_id = (int)$class_id;
$client_id = (int)$client_id;

$query = mysql_query("SELECT COUNT(`movement`) FROM `completed_movements` WHERE `class_id` = '$class_id' AND `client_id` = '$client_id' AND `date` = CURDATE()");

$movement_performed = mysql_fetch_assoc($query);

$return = (mysql_result($movement_performed, 0) == 1) ? true : false;   
    var_dump ($return);
} 
```

回报：

```
bool(false) 
bool(false) 
```

如果我替换此代码：

```
$return = result(mysql_result($movement_performed, 0) == 1) ? true : false; 
    var_dump ($return); 
```

有了这个：

```
print_r ($movement_perfomed); 
```

回报：

```
Array ( [COUNT(`movement`)] => 2 ) 
Array ( [COUNT(`movement`)] => 3 ) 
```

我是否完全错误地认为，因为这些数字不是零，它应该返回真实？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T15:28:53.730

要回答您的问题：

`mysql_result`错误返回`FALSE`。您正在传递数组`mysql_fetch_assoc`而不是 mysql`mysql_result`函数签名所要求的资源：

```
string mysql_result ( resource $result , int $row [, mixed $field = 0 ] ) 
```

因此它返回`FALSE`，因为它有一个错误。

* * *

更好的方法：

```
// Change
$movement_performed = mysql_fetch_assoc($query);
$return = result(mysql_result($movement_performed, 0) == 1) ? true : false;

// to
$movement_performed = mysql_fetch_row($query);
return $movement_performed[0] > 0; 
```

这会获取 count 语句的结果并`> 0`对其进行检查。检查并不是真正需要的`> 0`，但有助于显示意图而不是依赖真实值。

* * *

*旁注：这些`mysql_*`功能已被弃用。您应该迁移您的代码以使用`MySQLi`或`PDO`. `mysql_*`不幸的是，您正在使用许多功能不需要`mysql`资源的事实。迁移代码会很痛苦，因为您必须更改一堆函数或声明全局变量。我推荐前一个选项，但要修复它需要付出很多努力。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:21:03.217

我认为应该是

```
(count(mysql_fetch_assoc ) >0 ) ? true : false; 
```

而不是

```
result(mysql_result($movement_performed, 0) == 1) ? true : false; 
```

# android - 阻止 android Native TimePicker 阻止一天中的几个小时的问题

> ID：12181198
> 
> 赞同：-1
> 
> 时间：2012-08-29T15:15:43.487
> 
> 标签：android, timepicker

我打算将时间选择器阻止到特定的开始时间和结束时间。为此，我正在设置 TimeChangedListener 并覆盖 onTimeChanged 方法。下面是 onTimeChanged() 的实现。

```
@Override
public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {
// TODO Auto-generated method stub
//;super.onTimeChanged(view, hourOfDay, minute);
 try{
   boolean flag = true;

   if (hourOfDay <= maxHour && hourOfDay >= minHour) {
     if (hourOfDay == maxHour && hourOfDay == minHour) {
       if (minute > maxMin)
          flag = false;
       else if (minute < minMin)
        flag = false;
       else if (minute == maxMin && minute == minMin) {
        flag = false;
       } else if (minute == maxMin) {
          flag = false;
       } else if (minute == minMin) {
          flag = false;
       }
    } else if (hourOfDay == maxHour) {
       if (minute > maxMin)
       {
        flag = false;
       }
    } else if (hourOfDay == minHour) {
       if (minute < minMin)
         flag = false;
    }

   if (flag) {
      curHour = hourOfDay;
      curMin = minute;    
   } else {
      updateTime(curHour, curMin);

   }
 //(curYear, curMonth);
 } else {
    updateTime(curHour, curMin);
 }
//view.updateDate(curYear, curMonth, curDay);
 } catch (Exception e) {
     Log.e("CustomTimePicker","error");
   }
} 
```

但是当我达到最短时间并尝试再次减少分钟时间时，使用此代码片段，它会从第一个开始继续循环

```
 updateTime(curHour, curMin); 
```

方法调用并获取堆栈溢出异常。机器人工作正常（如预期）数小时更新。因此，如果有人查看代码片段并发现问题，请告诉我。任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:39:50.223

我认为这是 updateTime(curHour, curMin); 的问题。或 onTimeChanged(TimePicker view, int hourOfDay, int minute); android OS-v2.3.6 及更低版本中的方法。因为当我在具有 android OS-v3.1 及更高版本的设备上进行测试时，它工作正常。但是在 OS-v2.3.6 及更低版本中，当我调用 updateTime(curHour, curMin); 大约 10 分钟后，onTimeChanged 仅在 9 分钟内被调用。因此，当我在该最少分钟后达到最少小时时，它将继续循环。

所以它是一个但带有 updateTime(curHour, curMin); 或 onTimeChanged(TimePicker view, int hourOfDay, int minute); android OS-v2.3.6 及更低版本中的方法。

# vba - Body.Replace 去除 html 格式

> ID：12181201
> 
> 赞同：2
> 
> 时间：2012-08-29T15:15:51.723
> 
> 标签：vba, outlook

我有一个电子邮件模板，它具有 html 格式和占位符，可以用实际值换出。

在 Excel 中，我通过 Outlook CreateItemFromTemplate 方法加载电子邮件。如果此时我保存电子邮件格式将被保留。

如果我在正文上执行替换，则大部分格式都会被删除：

```
Set OutApp = CreateObject("Outlook.Application")
Set OutMail = OutApp.CreateItemFromTemplate("template.oft") ' <- has lots of html formatting

With OutMail
    .Body = Replace(.Body, "#recipient#", "Some other value") ' <- Strips out most formatting!!
    .Save ' <- this works fine without the line above.
End With 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T15:25:12.853

感谢这篇文章：[https ://stackoverflow.com/a/8473313/569662](https://stackoverflow.com/a/8473313/569662)

我的问题是你必须使用`.HTMLBody`而不是`.Body`：

```
.HTMLBody = Replace(.HTMLBody, "#recipient#", "Some other value") 
```

# performance - PowerBuilder 12.1 生产性能问题导致异步？

> ID：12181202
> 
> 赞同：1
> 
> 时间：2012-08-29T15:15:52.243
> 
> 标签：performance, oracle11g, powerbuilder

我们有一个带有 Oracle 11g 后端的旧版 PowerBuilder 12.1 Classic 应用程序，并且在生产中遇到了我们无法在测试环境中重现的性能问题。

有问题的窗口具有共享网格/自由格式 DataWindows 和用于打开其他响应窗口的按钮，这些响应窗口在关闭时会导致网格重新检索。

网格背后有一个非常昂贵的查询，几列从函数调用中接收它们的值，其中包含一些非常密集的 SQL，但它仍然在几秒钟内运行，即使在生产中也是如此。

错误发生时间的唯一一致性是，如果他们试图快速导航到其他窗口，似乎更有可能发生。打开所述窗口的按钮假定使用网格中焦点行中的适当值设置某个实例变量。但是，在这种情况下，尚未设置实例变量，即使看起来行焦点发生了变化。这导致了不应出现的空引用异常。

最终用户的网络连接通常很慢，他们的硬件能力也不比我们差。我想责怪网络，但我试图通过故意减慢 SQL 来在开发中重现这一点，以便我可以尝试单击一个按钮，但是一切都按我的预期发生：直到检索和所有其他事件都完成了。

我的直觉告诉我，由于某种原因，事情并没有在它们应该同步运行的时候同步运行，我能想象的唯一因素是 SQL 的速度，无论是查询速度慢还是网络速度慢，但是当我尝试复制时那个效果的事情仍然以正确的顺序发生。唯一可疑的代码是数据窗口祖先发布了一个名为`ue_post_rfc`from的用户事件`rowfocuschanged`，而该事件执行了一个`Yield()`. `ue_post_rfc`是代码而不是`rowfocuschanged`.

有没有什么方法`Yield()`会导致这些问题，而不在测试环境中表现出来，即使 SQL 被人为减慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:13:03.313

虽然您的消息可能没有提供足够的信息来为您提供解决问题的方法，但它确实给了我一个提示，即我在 PowerBuilder 系统中经常看到的难以诊断的故障的共同点。

开发事件的顺序是这样的

*   开发人员开发的代码依赖于一个事件在另一个事件之前触发，通常依赖于实例或全局变量
    *   此事件序列是开发人员*观察到*的，但未记录为保证序列（如 AcceptText() 序列或 Update() 序列已记录）
    *   我在发布的事件中发现了很多，而且我不是在谈论从event 发布 post *- event 的**event*和*post-* *event*，而是在*post-ItemChanged*和*post-GetFocus之间*

****   有些东西改变了事件的顺序，破坏了代码。我看到的改变非保证事件序列的事情包括：
    *   PowerBuilder 版本变更
    *   操作系统变化
    *   硬件变更
    *   与其他应用程序一起运行的应用程序会占用系统资源*   现在负责解决这个问题的人不知道发生了什么或如何处理它，所以他们开始在代码中添加 Yield() 语句（我确实看到 Yield() 旁边的注释说“我不知道为什么会这样，但它解决了*问题 X* ")
    *   请注意，Yield() 允许处理消息队列中的任何和所有事件，而该开发人员实际上只希望一个特定事件通过
    *   另请注意，在我的职业生涯中常见的 DO ... LOOP UNTIL (NOT Yield()) 可能会在重负载系统上无限循环*   发生了一些事情再次改变了事件顺序*   现在当 Yield() 发生时，队列中有不同的消息序列要处理，而不是开发人员想要处理的消息*   事情又开始失败了***

 **我摆脱这个问题的建议（如果这是你的问题）是：

*   摆脱跨事件依赖
*   摆脱事件顺序假设
*   自己管理事件序列

祝你好运，

特里

* * *

PS这是你问题中的几句话，让我想起了 Yield() （并不是说我不喜欢跳到 Yield()*咧嘴一笑*的机会）

> 错误发生时间的唯一一致性是，如果他们试图快速导航到其他窗口，似乎更有可能发生。

当用户尝试非常快速地启动（例如）两个动作时看到这一点。如果第一个动作的脚本包含 Yield()，则第二个动作的脚本将在第一个动作完成之前开始和结束。对于用户操作的任何组合（例如，按钮单击、菜单单击、选项卡、窗口关闭......您编写的代码可能在 Yield() 完成后窗口不再存在，对吧？如果没有，加入 99% 的代码 Yield()，不要，并且生活危险）和系统事件（例如 GetFocus、Deactivate、Timer）

> 我的直觉告诉我，由于某种原因，事情没有在应该同步的时候同步运行

你是对的。PowerBuilder（除非你强制它）同步运行。但是，如果一个事件在另一个事件完成之前开始（见上文），那么您将获得*看起来*像异步行为的行为。

您所说的没有确定的内容，但是您*确实*询问了 Yield()。确定这一点的真正关键是您是否可以使用 PBDEBUG 跟踪重现它；你会看到哪些事件让你感到惊讶。但是，PBDEBUG 减慢速度的数量会影响事件序列和排队，这可能有帮助，也可能没有帮助。**

# variables - 默认值的最短同义词

> ID：12181204
> 
> 赞同：8
> 
> 时间：2012-08-29T15:15:55.563
> 
> 标签：variables, coding-style, default, synonym

寻求最短的同义词用作变量名，即“默认值”。

有一个选项：“想要”（来自 dict.org） 但它看起来很奇怪。也许有人知道更好的解决方案，或者只是想知道其他人的意见。

[http://thesaurus.com/browse/default](http://thesaurus.com/browse/default)也提供了一些变体，但它不是编程主题。

我疯狂地选择可以理解的短变量名称，ID :) 但有时它需要比预期更多的时间......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:19:57.317

如果您坚持使用简短版本，请使用`DEF`or `DFLT`。我已经看到在许多语言中都用作前缀和后缀。

# android - Sherlock 操作栏：findViewById(android.R.id.home) 在 android 2.3 中返回 null

> ID：12181205
> 
> 赞同：5
> 
> 时间：2012-08-29T15:15:57.700
> 
> 标签：android, android-layout

我正在为我的项目使用 Sherlock 操作栏。但我面临的问题。我在 OnCreate 方法中使用此代码。

```
 ActionBar actionBar = getSupportActionBar();
    actionBar.setHomeButtonEnabled(true);
    actionBar.setDisplayHomeAsUpEnabled(true);
    View iconImage = findViewById(android.R.id.home);
    iconImage.setPadding(100, 0, 0, 0); 
```

在 android 4.1 中，“iconImage”不为空。但是在安卓 2.3 上。iconImage 始终为空。你知道为什么吗？你知道我怎样才能在 android 2.3 中获得主页按钮。注意：我检查过，我可以通过实现 onOptionsItemSelected 方法来检测主页按钮的点击动作。

请帮我 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:24:49.997

“您无法访问主视图，因为它存在于内容视图上方和窗口装饰中”

ActionBarSherlock 的作者[在这里](https://stackoverflow.com/questions/10187523/actionbarsherlock-how-to-access-home-button-view)查看更多信息

P / s：VNese：D

# python - 我在 python 脚本中使用你的 ftputil

> ID：12181207
> 
> 赞同：-4
> 
> 时间：2012-08-29T15:16:08.150
> 
> 标签：python, ftputil

我在 python 脚本中使用你的 ftputil 来获取目录中文件的最后修改/创建日期，我遇到了一些问题，想知道你是否可以提供帮助。

```
 host.stat_cache.resize(200000)
 recursive = host.walk(directory, topdown=True, onerror=None)
  for root,dirs,files in recursive:
       for name in files:
            #mctime = host.stat(name).mtime
            print name 
```

以上输出目录中所有文件的列表

```
 host.stat_cache.resize(200000)
 recursive = host.walk(directory, topdown=True, onerror=None)
 for root,dirs,files in recursive:
       for name in files:
          if host.path.isfile("name"):
             mtime1 = host.stat("name")
             mtime2 = host.stat("name").mtime
             #if crtime < now -30 * 86400:
             #print name + " Was Created " + " " + crtime + " " + mtime
             print name + " Was Created " + " " + " " + mtime1 + " " + mtime2 
```

上面没有输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:26:45.150

你已经加`name`了引号。因此 Python 将始终检查文字文件名“name”，它可能不存在。你的意思是：

```
 if host.path.isfile(name):
         mtime1 = host.stat(name)
         mtime2 = host.stat(name).mtime 
```

# jquery - 无法使用 jquery 更改图像中的 src

> ID：12181213
> 
> 赞同：0
> 
> 时间：2012-08-29T15:16:45.613
> 
> 标签：jquery

我无法用 jquery 更改图像：发生了什么？

```
<!DOCTYPE HTML>
<HTML>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script text="text/javascript">
$('#caccia').attr('src', '2.png');
</script>

<img id="caccia" src="1.jpg" />

</HTML> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T15:18:09.707

这是因为你没有告诉你的脚本等到 DOM 准备好，而是写它。

```
$(function() {
    $('#caccia').attr('src', '2.png');
}); 
```

这与（这样更容易理解）相同。

```
$(document).ready(function() {
    $('#caccia').attr('src', '2.png');
}); 
```

另外，最好在`</body>` [http://developer.yahoo.com/performance/rules.html#js_bottom之前有你的 JavaScript](http://developer.yahoo.com/performance/rules.html#js_bottom)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:18:24.577

您需要将代码放入

```
$(function(){
    // your code here
}); 
```

这样，脚本只会在 DOM 的所有元素都被渲染后执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T15:20:42.097

如果您只想更改图像，请在页面加载后立即：

您可以在 jquery 中执行以下操作：

```
$(document).ready(function(){
    $('#caccia').attr('src','2.jpg');
}); 
```

演示：http: [//jsfiddle.net/QJKWK/1/](http://jsfiddle.net/QJKWK/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T15:19:18.000

试试这个代码

```
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

    <script text="text/javascript">
        $(document).ready(function() {
            $('#caccia').attr('src', '2.png');
        });
    </script>
    </head>
    <body>
    <img id="caccia" src="1.jpg" />
</body> 
```

# web-services - 是否可以在 Amazon EC2 中编译代码？

> ID：12181218
> 
> 赞同：1
> 
> 时间：2012-08-29T15:17:01.513
> 
> 标签：web-services, amazon-ec2, amazon

我正在写一个像 spoj.pl 这样的在线法官。我想在 EC2 中编译源代码。是否可以在 Ec2 中编译和执行 C、C++、Java 代码？我们是否有权运行 shell 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:41:02.183

是的 - EC2 实例具有与您的 PC 一样的操作系统。
如果您选择了 Windows 实例，您可以[远程桌面](http://en.wikipedia.org/wiki/Remote_Desktop_Protocol)到它并安装 Eclipse 或其他任何东西。

如果您选择 Linux，则有点棘手，因为您将不得不在终端上做更多的工作，
尽管您可以安装 NX 客户端和“远程桌面”到您的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:27:43.443

是的，有可能。由于 EC2 实例运行标准操作系统，您几乎可以在非 EC2 服务器上执行任何操作。

在 Linux 上，运行命令的常用方法是通过 SSH。创建 EC2 实例时，系统会要求您创建或提供密钥对。您必须将 SSH 客户端配置为使用私有密钥连接到 EC2 实例。

# java - JSON 多态性

> ID：12181219
> 
> 赞同：6
> 
> 时间：2012-08-29T15:17:08.130
> 
> 标签：java, json, polymorphism

我的客户端有一个 javascript 对象列表，它是用户已执行的“事件”列表。当用户准备好时，我想将其发送到服务器。事件的顺序很重要，因此保留列表顺序是必要的。

我想做的是有一个 JSON 库（不介意哪个）将 JSON 绑定到我的 Java 代码中的一些 Event 对象，其中 Event 是一个抽象类，我有 3 个具体类都扩展 Event （让我们说 EventA、EventB 和 EventC）。

理想的情况是这样的

```
List<Event> events = jsonlibrary.deserialise(jsonString); 
```

其中可能包含项目列表，例如

```
[eventA, eventC, eventA, eventA, eventB] 
```

这是可能的，还是我必须手动检查 JSON 树，并反序列化 json 数组的各个元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T15:30:05.087

JSON 对象只是键/值对，不包含类型信息。这意味着无法自动识别 JSON 对象的类型。你必须在服务器端实现一些逻辑来找出你正在处理什么样的事件。

我建议使用一个工厂方法，它接受一个 json 字符串，解析它以找出它是什么类型的 Event，构建正确子类的 Event 对象并返回它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T16:50:56.140

您可以使用 Genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)。如果 json 是使用 Genson 生成的，它可以反序列化为具体类型。否则你只需要添加类似 [{"@class":"my.java.class", "the rest of the properties"}...]

```
// an example
abstract class Event {
 String id;
}

class Click extends Event {
 double x, y;
}

// you can define aliases instead of plain class name with package (its a bit nicer and more secure)
Genson genson = new Genson.Builder().setWithClassMetadata(true).addAlias("click",
            Click.class).create();
String json = "[{\"@class\":\"click\", \"id\":\"here\", \"x\":1,\"y\":2}]";

// deserialize to an unknown type with a cast warning
List<Event> events =  genson.deserialize(json, List.class);

// or better define to which generic type
GenericType<List<Event>> eventListType = new GenericType<List<Event>>() {};
events = genson.deserialize(json, eventListType); 
```

**编辑** 这里是 wiki 示例[http://code.google.com/p/genson/wiki/GettingStarted#Interface/Abstract_classes_support](http://code.google.com/p/genson/wiki/GettingStarted#Interface/Abstract_classes_support)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T16:59:03.270

为什么不使用[杰克逊 json 库](http://jackson.codehaus.org)？

它是一个具有数据绑定功能的完整对象/JSON 映射器。

它速度快、占用空间小、有文档记录、过度使用，还有许多其他你会喜欢的东西！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-16T20:51:31.277

如果 json 由同一个库编码，我开始了一个实现所需功能（用于 json 和 xml）的库：

[https://github.com/giraudsa/serialisation](https://github.com/giraudsa/serialisation)

使用它， `MyObject myObject = new SpecialisedObject();`

```
String json = JsonMarshaller.ToJson(myObject);
MyObject myClonedObject = JsonUnMarshaller(json); 
```

# dojo - 在 Dojo 1.7+ 中，FilteringSelect 似乎不再与 ItemFileReadStore 一起使用

> ID：12181220
> 
> 赞同：1
> 
> 时间：2012-08-29T15:17:10.657
> 
> 标签：dojo

我正在将应用程序从 dojo 1.5 升级到 1.7。这个应用程序有几个由 ItemFileReadStores 支持的 FilteringSelects。例如，

```
 this.docTypeSel = this.adopt(dijit.form.FilteringSelect, {
       name: "docType",
       autoComplete: true
  }, document.createElement("select"));
  this.docTypeSel.placeAt(this.formNode);
  var url = dojo.moduleUrl("imed", "DocumentTypes.txt");
  this.documentTypeStore = new dojo.data.ItemFileReadStore({ url: url, urlPreventCache: "true" });
  this.docTypeSel.store = this.documentTypeStore; 
```

在 1.7 中，在`this.docTypeSel.set('value',foo)`尝试调用时调用失败`this.store.get(value)`。我的理解是这是新的 dojo/store API。在旧的 dojo.data API 和新的 dojo/store API 之间是否有某种适配器？如果不是，推荐的 ItemFileReadStore 替代品是什么。dojo/store/Memory 似乎很接近，但似乎没有办法从 url 中提取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:22:40.097

你看过使用[dojo/store/DataStore](http://dojotoolkit.org/reference-guide/1.7/dojo/store/DataStore.html#dojo-store-datastore)吗？我没有亲自使用过它，但它似乎是您想要使用的，因为它使用API`dijit/form/FilteringSelect`查找商店。`dojo/store`

另一方面，dijit/form/Select 需要一个`dojo/data`实现。如果你有一个`dojo/store`你想使用的实现，`dijit/form/Select`你会使用[dojo/data/ObjectStore](http://dojotoolkit.org/reference-guide/1.7/dojo/data/ObjectStore.html#dojo-data-objectstore)。

# android - iOS：类似 Android 布局的相对定位

> ID：12181221
> 
> 赞同：2
> 
> 时间：2012-08-29T15:17:10.557
> 
> 标签：android, iphone, ios, android-layout, interface-builder

有什么方法可以像使用 Android 布局一样相对于彼此定位视图？

示例：您有两个 UILabel 被动态设置为可变长度的字符串，一个在另一个之上，并且您希望底部标签直接出现在顶部标签的最后一行下方，而不管顶部标签最终有多少行.

另一个例子：与上述情况相同，但有时会隐藏其中一个标签。您希望生成的标签在父标签中垂直居中，无论它是一个标签还是两个标签。

Android 的 Linear Layout 和 Relative Layout 让这很容易做到，但我不知道如何做到这一点是 iOS。可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:04:15.133

您将能够使用 iOS6 中的 AutoLayout 来执行此操作。对于一个应该在iOS 6.0之前运行的应用程序，你必须自己做，但这并不是很复杂。

**实际上我已经实现[了一个类来做到这一点](https://github.com/AliSoftware/OHStackView)**（那是很久以前的事了，我希望它仍然有效，但没有理由不这样做）。此类**`OHStackView`**是`UIView`自动水平或垂直布局其子视图以堆叠或对齐它们的子类。

您可以要求`OHStackView`水平或垂直堆叠其子视图（一个在另一个之上等），或对齐它们的上/下/左/右边框或它们的中心，甚至指定每个子视图之间的填充。每次其中一个子视图更改其框架或大小时，`OHStackView`都会自动重新布局所有相关视图以重新对齐所有内容。 *（例如，使用您的两个 UILabel，对您的标签进行简单调用以`sizeToFit`使它们根据内容调整其大小将自动重新布局周围的所有内容）*

提供了一个示例项目，因此请随时对其进行测试。

*注意：IIRC，我的子类没有考虑子视图的“隐藏”属性。`if (v.hidden) continue;`但是您可以通过在其实现的`for`循环中添加一个条件来轻松添加对此行为的支持，以便`layoutSubview`在布局算法中仅考虑非隐藏视图。*

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:33:52.153

我一直在寻找是否有可能。据我所知，目前是不可能的。我不记得我在哪里读到的，但在 ios6 上是可能的。而不是使用Android的线性布局，你可以使用`sizeWithFont`方法来检测你的大小`UILabel`，然后你可以设置它们的框架来定位它们。首先，你需要设置它们的文本，当然要根据它们的字体系列找到它们的大小。您可以使用的另一件事是`sizeToFit`方法。不幸的是，我不知道如何使用它。不过，你可以试一试。当时，我发现了这个。也许，你可以使用它[https://github.com/scalessec/CSLinearLayoutView](https://github.com/scalessec/CSLinearLayoutView)

# iphone - 用另一种方式在 Windows 上构建 iphone 应用程序，无需 Flash

> ID：12181222
> 
> 赞同：0
> 
> 时间：2012-08-29T15:17:25.377
> 
> 标签：iphone, ios

我想要另一种在没有 flash cs5 的情况下在 windows 上构建 iphone 应用程序的方法

不使用 Flash 的原因（尽管我是 Actionscript 的专家）：

Flash 仅适用于：

```
iPod touch (3rd generation) 32 GB and 64 GB model, iPod touch 4, iPhone 3GS, iPhone 4, iPad, iPad 2, iPad3
iOS 4.2 or later 
```

**编辑 1**

HTML5 应用程序：我想知道这是否可以作为一个应用程序发布，而没有地址栏中的浏览器内容等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:44:38.340

由于您要求 Flash 的替代品，我希望您从事游戏开发。

Irrlicht 是一个免费的开源游戏引擎.. 你可以试试看

适用于 Microsoft VisualStudio、Metrowerks Codewarrior、Bloodshed Dev-C++、Code::Blocks、XCode 和 gcc 3.x-4.x。

[http://irrlicht.sourceforge.net/](http://irrlicht.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:19:41.787

如果您不需要原生 API 的任何功能，那么您可以使用 HTML5 和 JavaScript 构建应用程序吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-29T15:47:11.580

你可以试试phonegap。它是 html/css/javascript，但您正在为应用商店构建一个实际的应用程序，而不仅仅是一个供 iphone 浏览器使用的网站。

[http://phonegap.com](http://phonegap.com)

再次编辑：我知道我在想另一个 - 我找到了它 [http://www.genuitec.com/mobile/index.html](http://www.genuitec.com/mobile/index.html) 这个确实让你只能在 Windows 上构建并提交到应用商店等

编辑：对不起，我想这实际上无济于事，因为它可以替代使用objective-c或flash，但它仍然需要mac并且不能仅与windows一起使用

# javascript - Backbone.js 和 PhoneGap，单页还是多页？

> ID：12181223
> 
> 赞同：7
> 
> 时间：2012-08-29T15:17:42.613
> 
> 标签：javascript, cordova, backbone.js

我想做的是在 PhoneGap 和 Backbone.js 中构建一个简单的应用程序。该应用程序有一个登录页面，成功登录后，将用户发送到一个带有几个选项的简单菜单。用户可以选择查看他们保存的列表、查看项目列表或查看信息页面。我知道我想如何构建所有视图和模型，所以我的问题是，与使用多个页面相比，在一个页面上完成所有这些是否有任何缺点。

把它分解成更小的部分：

1.  在一页中加载所有 javascript 是否会对性能产生严重影响？
2.  如果路由器关闭，.remove() 和 .unbind()，所有当前视图在切换到新视图时，我仍然面临内存问题的风险吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T06:59:33.800

Backbone 专为 SPA 应用程序而设计。我并不是说您不能将 Backbone 跨越多个页面，但在我看来，这会增加更多的复杂性。根据您的描述，我会将您的应用程序保留为 SPA。

其次，使用模块构建您的应用程序。使用诸如 require.js 之类的库。我不能推荐它。我不会详细说明为什么要使用它，因为您可以[在这里](http://addyosmani.github.com/backbone-fundamentals/#advanced)阅读更多信息（我建议阅读整本书）。一旦您的应用程序准备好部署，您就可以使用 r.js，require.js 的构建脚本。这会将所有或部分模块连接到一个文件中。这将大大提高您的应用程序的性能，特别是如果您有一堆模块。

最后，关于内存优化，我使用了 Derick Bailey 开发的方法，您可以在[此处](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)阅读。

希望这可以帮助。

# uml - 如何在高级别的应用程序中绘制调用图？

> ID：12181238
> 
> 赞同：0
> 
> 时间：2012-08-29T15:18:21.023
> 
> 标签：uml, diagram

我不是 UML 的忠实粉丝。我相信 UML 在极少数情况下非常有用，但是我不想使用 UML 图来显示通过我的应用程序的高级调用流。问题是 - 大多数工具（visio、lucidchart、websequencediagrams）迫使用户要么绘制非常详细的 UML 图，要么绘制序列图。没有什么能比得上 UML 图的高级版本。或者有吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:38:53.853

没有“更高级别”的 UML 图这样的东西。UML 有 12 个（或者是 12 个？我不记得了），您必须从中选择最适合您需要的一个。

对于高级别的调用流程，我喜欢活动图，即使拥有函数的对象更难看到。序列图是浪费时间和空间恕我直言。

# java - Jersey Rest 可以服务器向客户端发送请求

> ID：12181244
> 
> 赞同：0
> 
> 时间：2012-08-29T15:18:36.687
> 
> 标签：java, rest, jersey

我正在研究使用带有球衣的 Rest 架构的服务器-客户端系统。我的客户端应用程序可以连接到服务器并获取资源，但我还有两个问题，首先是：客户端应该向方法发送参数，并且该方法应该将结果返回给客户端。第二个问题是，服务器可以在客户端不知道的情况下连接到客户端吗？

# java - 使用 LargeHeap 的应用程序的垃圾收集器速度太慢

> ID：12181246
> 
> 赞同：0
> 
> 时间：2012-08-29T15:18:41.137
> 
> 标签：java, android, memory, garbage-collection

当我开始从事我的项目时，我不知道如何编程，我只是边学边学。我的程序需要大量位图图形，我很早就遇到了内存问题。我在我的应用清单中启用了 LargeHeap 以允许我为图形使用更多内存，但从那以后我了解了更多关于 android 如何使用垃圾收集器处理内存的信息。我制作了小型演示应用程序来测试 GC 可以跟上我更改位图的速度并且一切正常。

但是当我尝试在我的大项目中使用 GC 时，该项目现在有一个荒谬的 170mb 堆（该程序不用于一般用途，所以堆并不是真正的问题......我只是很挑剔），内存消耗不断增加。过去我在我的应用程序中注意到 android 的一些奇怪行为，我最终将其归结为“该程序可能对系统来说太大了”，所以我想知道是否有必要相信我的程序太大了还是密集的垃圾收集器足够快地完成它的事情？我的意思是，一个应用程序的 170mb 堆已经够荒谬了，对吧？

编辑 - 我认为问题的可能解决方案，我的问题的答案将来自重写整个程序以利用 GC。但是，正如我所说，这将涉及重写整个事情！- 所以我宁愿不打扰：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:46:10.070

首先，您必须担心 GC。通常发生的情况是（就像在画廊的情况下），加载了多个图像。基于 BMP 的图像被加载并因此被存储。因此，它们的大小实际上取决于像素数。

[这](https://stackoverflow.com/questions/14890351/high-memory-consumption-by-an-image)是一个非常相似的问题。所以调整`Image`大小和纵横比，一切都应该很好。

# drupal - drupal 7自定义模板不显示

> ID：12181248
> 
> 赞同：0
> 
> 时间：2012-08-29T15:18:46.060
> 
> 标签：drupal, drupal-7, drupal-theming

我有个问题。

1 我创建了一个名为 Contacts 的新页面，机器名称是联系人 2 确保正确分配了路径 (/contacts) 3 将我的 page.tpl.php 保存为 page--contacts.tpl.php 4 甚至添加了一些 php 代码在我的模板 php 中（见下文）

```
function mytheme_preprocess_page(&$vars){
    //some syntax bla bla
    $alias = drupal_get_path_alias(current_path());
    $vars["theme_hook_suggestions"][] = "page--" . $alias;
} 
```

我的自定义模板仍然没有出现！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:22:00.537

嗯，我相信你必须在你的 theme_preprocess_page 钩子中用下划线替换破折号；

```
function mytheme_preprocess_page(&$vars){
    //some syntax bla bla
    $alias = drupal_get_path_alias(current_path());
    $vars["theme_hook_suggestions"][] = "page__" . $alias;
} 
```

# linux - 在 Linux 上作为后台进程运行时，Nutch 抓取失败

> ID：12181249
> 
> 赞同：0
> 
> 时间：2012-08-29T15:18:46.090
> 
> 标签：linux, ubuntu, ssh, nutch

当我以本地模式在 Ubuntu 上将 Nutch 抓取作为后台进程运行时，Fetcher 因挂起线程而中止。消息类似于：

WARN fetcher.Fetcher - 使用“X”挂起线程中止。

我使用 nohup 和 & 启动脚本，因为我想从会话中注销并让爬虫仍然在服务器上运行。否则，当爬网在某个深度完成并且正在更新 crawldb 时，SSH 会话会超时。我试过在没有太多帮助的情况下配置“保持活力”消息。该命令类似于：

```
nohup ./bin/nutch crawl ....... & 
```

以前有人经历过吗？似乎只有当我使用 nohup 或 & 时才会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:37:01.363

当某些请求似乎挂起时，Fetcher 类会记录挂起的线程消息，尽管有所有意图。在[Fetcher.java](http://www.docjar.com/html/api/org/apache/nutch/fetcher/Fetcher.java.html)中，第 926-930 行 ::

```
 if ((System.currentTimeMillis() - lastRequestStart.get()) > timeout) {
    if (LOG.isWarnEnabled()) {
      LOG.warn("Aborting with "+activeThreads+" hung threads.");
    }
    return;
  } 
```

请求的超时时间由 mapred.task.timeout 定义，默认值为 10 分钟。你可能会增加它..不确定它是否会是 100% 干净的修复。

当我观察到这种现象时，我在代码中添加了记录器以查找请求挂起超过 10 分钟的 url，并得出结论，对于大文件，当服务器花费更多时间进行数据传输时也会出现此问题。

# sql-server - RabbitMQ、ZeroMQ、Service Broker 或类似的东西是创建高可用性数据库 Web 服务的合适解决方案吗？

> ID：12181250
> 
> 赞同：7
> 
> 时间：2012-08-29T15:18:50.960
> 
> 标签：sql-server, rabbitmq, message-queue, zeromq, high-availability

我有一个 CRUD 网络服务，我的任务是试图找出一种方法来确保在数据库出现故障时我们不会丢失数据。每个人都知道，如果数据库出现故障，我们将无法获得“读取”，但对于特定的操作子集，我们希望确保我们不会丢失数据。

我的印象是，0MQ、RabbitMQ 或 Microsoft MQ 服务之一等服务涵盖了这一点。虽然经过几天的阅读和研究，我什至不确定我们所说的MQ服务中的消息是否包括数据库操作。然而，我 100% 确信我可以排队尽可能多的 hello world。

如果我可以使用消息队列为数据库添加一层保护，我会倾向于 Rabbit（因为它似乎会在崩溃中持续存在）但由于目标是 Microsoft SQL 服务器数据库，可能是他们的解决方案之一（例如SQL Service Broker 或 MSMQ）更合适。

我还不确定的真正基本问题是我是否在玩正确的纸牌（可以这么说）。

随着对高可用性 web 服务的渴望，如果数据库出现故障，它仍然可以运行，将 Rabbit MQ 实例放在 web 服务和数据库“之间”是否有意义？也许链中的正确链接是让 RabbitMQ 向网络服务器发送消息？

还是有其他解决方案可以实现这一目标？目前有很多关于在数据库中断或其他情况下找到卷起博客的方法的想法......但我们仍处于足够早的阶段，（至少我）不知道我是什么'我要做。

消息队列是正确的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T09:05:30.740

在服务和它的数据库操作之间引入消息队列无疑是提高服务可用性的一种方法。[在存储转发](https://en.wikipedia.org/wiki/Store_and_forward)场景中，写入本地临时队列总是比写入远程数据库服务器更可用，只需作为本地操作即可。

此外，通过使用队列，您可以更好地控制数据库在高峰时必须处理的数据库流量的数量和性质。数据库写入可以排队、路由，甚至以不同的顺序提交。

但是，为了做到这一点，您需要注意，当执行数据库写入时，它是离线处理的。即使在这种情况几乎是瞬间发生的情况下，您也会失去当前服务的同步特性给您带来的好处，即您的服务使用者始终可以知道数据库写入操作是否成功。

[我在这里](https://stackoverflow.com/a/10161240/569662)之前已经写过这个主题。发布问题的用户对您有类似的担忧。您是否这样做是您必须根据您的消费者是否关心的事情做出的决定。

至于您正在考虑的技术堆栈，这个离线模型几乎可以用它们中的任何一个来实现，除了服务代理可能的例外，它不能*很好地*与代码集成（请参阅我的答案：[https://stackoverflow .com/a/45690344/569662](https://stackoverflow.com/a/45690344/569662)）。

如果您使用的是 Windows 并且不太可能需要迁移，我会选择 MSMQ（它支持通过事务队列的持久消息传递），因为它是轻量级的并且是 Windows 的一部分。

# node.js - 更改 Node.js 监听端口

> ID：12181253
> 
> 赞同：30
> 
> 时间：2012-08-29T15:18:58.200
> 
> 标签：node.js

我刚刚在 Windows 上安装了 node.js。我有这个不运行的简单代码：

我得到：错误：听 EADDRINUSE

是否有一个**配置文件**告诉 node.js 监听特定端口？

问题是我已经让 Apache 监听端口 80。

编辑：

```
var http = require('http'); 
var url = require('url'); 

http.createServer(function (req, res) { 
 console.log("Request: " + req.method + " to " + req.url); 
 res.writeHead(200, "OK"); 
 res.write("<h1>Hello</h1>Node.js is working"); 
 res.end(); 
}).listen(5454); 
console.log("Ready on port 5454"); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-29T15:23:31.937

[除非您自己创建](https://stackoverflow.com/questions/5869216/how-to-store-node-js-deployment-settings-configuration-files)配置文件，否则没有配置文件。但是，端口是`listen()`函数的参数。例如，监听 8124 端口：

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(8124, "127.0.0.1");
console.log('Server running at http://127.0.0.1:8124/'); 
```

如果您在查找打开的端口时遇到问题，可以转到命令行并键入：

```
netstat -ano 
```

查看每个适配器正在使用的所有端口的列表。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-14T13:25:41.583

我通常在文件中手动设置我正在监听的端口`app.js`（假设你正在使用`express.js`

```
var server = app.listen(8080, function() {
    console.log('Ready on port %d', server.address().port);
}); 
```

这将登录`Ready on port 8080`到您的控制台。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-13T06:17:23.083

您可以从[http://nodejs.org/](http://nodejs.org/)
获取 nodejs 配置。 您需要记住的重要一点是它在文件 app.js 中的配置，其中包括端口号主机和其他设置，这些设置对我有用

```
后端设置 = {
“方案”：“https / http”，
"host":"您的网站网址",
"port":49165, //端口号
'sslKeyPath': '密钥路径',
'sslCertPath': 'SSL 证书路径',
'sslCAPath': '',
"资源":"/socket.io",
"baseAuthPath": '/nodejs/',
"publishUrl":"发布",
"服务密钥":"",
“后端”：{
“端口”：443，
"scheme": 'https / http', //无论你的网站方案是什么
"主机":"主机名",
"messagePath":"/nodejs/message/"},
“clientsCanWriteToChannels”：假，
“clientsCanWriteToClients”：假，
“扩展”：“”，
“调试”：假，
"addUserToChannelUrl": 'user/channel/add/:channel/:uid',
"publishMessageToContentChannelUrl": '内容/令牌/消息',
“运输”：[“网络套接字”，
“闪光灯插座”，
"html文件",
“xhr 轮询”，
“jsonp 轮询”],
“jsMinification”：真，
“jsEtag”：真，
“日志级别”：1}；
```

在此，如果您收到“错误：侦听 EADDRINUSE”，请更改端口号，即这里我使用的是“49165”，因此您可以使用其他端口，例如 49170 或其他端口。为此，您可以参考以下文章
[http://www.a2hosting.com/kb/installable-applications/manual-installations/installing-node-js-on-shared-hosting-accounts](http://www.a2hosting.com/kb/installable-applications/manual-installations/installing-node-js-on-shared-hosting-accounts)

# jquery - 如何重叠列中的div？

> ID：12181254
> 
> 赞同：0
> 
> 时间：2012-08-29T15:18:58.310
> 
> 标签：jquery, html, jquery-isotope

我有一个表格列，并在其中动态放置了一些 div。div 是 container-div 的子级，因此它们可以绝对定位在其中。

这是一个例子：

```
<div class="container" style="width: 100px">
  <div id="div1" style="position:absolute;top:50px;height:100px;width:100px"></div>
  <div id="div2" style="position:absolute;top:50px;height:100px;width:100px"></div>
</div> 
```

这里的第一个问题是，div2 覆盖了 div1。所以div1需要50px的宽度，div2也是。div2 必须向左：50px。有没有办法检查一个div是否覆盖另一个div？或者是否有任何适合列中所有 div 的 jQuery 插件？

这是我需要的一个例子。它来自谷歌日历：

![例子](../Images/ed86eb91ca8d06735a61b0b639778470.png)

编辑：好的，现在我可以用一些 JavaScript 来做这些：

![在此处输入图像描述](../Images/13c61f57e8d8120ba9b27ee198428892.png)

但我需要这些： ![在此处输入图像描述](../Images/84d064c6fd91bcd9da9b218b61b08121.png)

预约 7 和 6 必须切换。所以它们适合空白空间。我可以用同位素做这些吗？

编辑：可以使用同位素按日期时间排序并手动设置 css top 属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:22:32.460

您可以尝试以下插件：

[http://masonry.desandro.com/](http://masonry.desandro.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:57:12.103

使用名为 Z-index 的 CSS 属性。Z-index 将它们作为一个层进行管理。这将允许您将 div 相互重叠。

# c++ - 如何编写c++ dll函数来获取com端口阅读

> ID：12181259
> 
> 赞同：2
> 
> 时间：2012-08-29T15:19:12.827
> 
> 标签：c++, function, dll

我是 C++ 新手，我试图从 C++ 中的函数读取 COM 端口 下面是代码说明，谁能帮我完成这个？该功能应获取评论的值，请帮助我，谢谢

```
int ComPortReading( short, wchar_t * Data[], wchar_t **Output, SIZE_T *OutputSize )
{
int result = 1;
if( Data[0] )
{
    *OutputSize = 50;
    *Output = (wchar_t *) CoTaskMemAlloc(*OutputSize);

    if( *Output )
    {
        wchar_t *EndPtr;

        double v11 = wcstod(Data[0], &EndPtr);  // Port Name
        double v12 = wcstod(Data[1], &EndPtr);  // Baud Rate
        double v13 = wcstod(Data[2], &EndPtr);  // Data Bits
        double v14 = wcstod(Data[3], &EndPtr);  // Stop Bits
        double v15 = wcstod(Data[4], &EndPtr);  // Parity

 // Need to write code here to read COM port
       // Com port settings can be taken from the above v11 - v15 values

        swprintf(*Output, L"%.10lf", v11);
        result = 0;
    }
}

return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:39:24.880

我建议使用一个库，它封装了困难的东西。例如[CodeProject 上的这个库](http://www.codeproject.com/Articles/992/Serial-library-for-C)或来自[Boost.Asio](http://www.boost.org/libs/boost_asio)的实现。

# javascript - requirejs优化器错误：未定义窗口

> ID：12181270
> 
> 赞同：1
> 
> 时间：2012-08-29T15:19:54.613
> 
> 标签：javascript, jquery, requirejs

我正在尝试使用 requirejs 优化器，但出现以下错误：

从节点运行：

```
$ node r.js js/main.js -o build.js
Error: Evaluating js/app/main.js as module "app/main" failed with error: 
Error: Evaluating js/lib/jquery-1.8.0.js as module "jquery" failed 
with error: ReferenceError: window is not defined 
```

从java运行

```
$ java -classpath js/lib/dist/js.jar:js/lib/dist/compiler.jar org.mozilla.javascript.tools.shell.Main r.js js/main.js
js: uncaught JavaScript runtime exception: ReferenceError: "window" is not defined.

js: uncaught JavaScript runtime exception: ReferenceError: "window" is not defined.

js: uncaught JavaScript runtime exception: ReferenceError: "window" is not defined. 
```

我想我应该以某种方式告诉编译器源应该从网络浏览器运行（只是猜测）......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T10:00:04.950

我的配置文件设置如下：

```
require.config({

    paths: {
        jquery: 'lib/jquery',
        backbone: 'lib/backbone',
        backboneLocalStorage: 'lib/backbone.localStorage',
        underscore: 'lib/underscore',
        util: 'lib/util',
        config: 'config',
        lang: 'lang',
        hammer: 'lib/hammer',
        moment: 'lib/jquery_plugins/moment',
        slider: 'lib/jquery_plugins/slider'
    },
    shim: {
        jquery: {
            exports: 'jquery'
        },
        underscore: {
            exports: '_'
        },
        backbone: {
            deps: ['underscore'],
            exports: 'Backbone'
        },
        hammer: {
            deps: ['jquery'],
            exports: 'Hammer'
        },
        slider: {
            deps: ['jquery']
        },
        moment: {
            deps: ['jquery']
        }
    }
}); 
```

我不得不改变

```
jquery: {
            exports: 'jquery'
        }, 
```

至

```
jquery: ['jquery'], 
```

这似乎对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-20T23:58:52.857

我遇到了同样的问题。只需删除组件中的 jquery 依赖项，它应该可以解决它。

就像是 `define(['jquery'], function GoogleMapsLoader($) {`

应该替换为

`define(function GoogleMapsLoader() {`

阅读[本文](https://wiki.mozilla.org/Pancake/RequireJS_Build_Step)应该对您有所帮助。

# c# - 将 URL 添加到 .NET XML 注释

> ID：12181273
> 
> 赞同：4
> 
> 时间：2012-08-29T15:20:12.780
> 
> 标签：c#, xml, visual-studio-2010

是否可以将 XML 注释添加到方法中，从而允许其他程序员通过单击工具提示中的 URL 来跟踪它？

我尝试使用以下格式将 URL 添加到方法中（我也尝试使用 see 和 see also 标签）：

```
/// <summary>
/// Loads some data.
/// <a href="http://stackoverflow.com/">click me</a>
/// </summary>
/// <param name="id">The id.</param>
/// <returns>Some Data</returns>
private string LoadData(int id) 
```

这会生成一个指向 URL 的可点击超链接，但这仅在查看原始源代码时才有效。如果可能的话，我希望能够在将鼠标悬停在对方法的调用而不是方法本身时单击并遵循工具提示中显示的超链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:31:30.827

> 如果可能的话，我希望能够在将鼠标悬停在对方法的调用而不是方法本身时单击并遵循工具提示中显示的超链接。

如果我正确理解您的问题，您希望得到如下图所示的内容 ![在此处输入图像描述](../Images/b221070390eae294955e1f9752861b8f.png)

如果是，那么您的 Xml 注释是正确的，为了得到这个，请将您的光标放在方法上，然后 Ctrl+Q 这是 Resharper 获得该方法的文档帮助的缩写

**更新：下图是确认 Ctrl+Q 是 ReSharper 快捷方式** ![在此处输入图像描述](../Images/22794ec9b2c13bc1adc2c2c9ee302317.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:33:02.247

如果没有像 Resharper 这样的花哨工具，工具提示是不可点击的，所以没有办法做到这一点。

但是，如果引用您的库的程序员要为您的代码单击“转到定义”，他们可以在那里展开注释并能够单击 URL。

# c++ - 从 std::vector 中的数据填充结构

> ID：12181274
> 
> 赞同：2
> 
> 时间：2012-08-29T15:20:19.153
> 
> 标签：c++

我有以下结构定义从 HID 设备报告集合返回的数据：

```
struct DevInfo {
    char unknown[0x40];
    string name;
    char unknown2[0x240];
}; 
```

它目前不完整，但这与我的问题无关。以前，我正在填充此结构的一个实例，`memcpy`用于从 char 数组中复制数据，如下所示：

```
// get data from HID device
unsigned char *response = sendCommand(DEV_REPORT);

// Copy to struct
DevInfo *info;
memcpy(&info, &response[0], sizeof(response));

// Output name
cout << "Name: " << info->name << "\n"; 
```

这行得通，除了我显然做了一些我不应该做的事情（从函数返回对 char 数组的引用）。所以，经过研究，我改用了一种更安全的`std::vector<unsigned char>`方法，但现在我不能用它`memcpy`来填充结构中的数据。

有人建议我使用`std::vector<DevInfo>`而不是`std::vector<unsigned char>`，但问题是可以从 HID 设备检索到几种不同的报告，因此我需要能够使用相同的函数 ( `sendCommand`) 填充不同的结构。

将二进制数据从我的结构获取`std::vector<unsigned char>`到我的`DevInfo`结构的合适方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T15:25:16.860

没有什么能阻止您使用`std::memcpy`或`std::copy`从存储在 a 中的二进制数据填充对象`vector`，只要它是可简单复制的标准布局类型：

```
DevInfo info;
std::vector<char> response = get_response();

assert(response.size() == sizeof info);
std::copy(response.begin(), response.end(), reinterpret_cast<char*>(&info));
std::memcpy(&info, &response[0], sizeof info); // C++11 allows response.data() 
```

但是，在您的情况下，您似乎有一个重要的数据成员（假设`string`指的是`std::string`），因此您不能做任何这些事情。

# php - 插入一个字段另一个字段的 a_i 值

> ID：12181275
> 
> 赞同：0
> 
> 时间：2012-08-29T15:20:26.057
> 
> 标签：php, mysql

我有一个包含以下字段的表：`gallery(picID, picTimeStamp, location)`.

我想要的是，当有人将新图片上传到图库时，该位置将获得与获取相同的值`picID`（并`picID`通过自动增量获取其值）。

我试过了：

```
"INSERT INTO gallery(picID, picTimeStamp, location) VALUES (null,'.time().',picID)" 
```

但它不工作。我没有收到任何错误，该位置总是有一个零。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:07:59.203

您可能应该像这样使用触发器

```
CREATE TRIGGER trigger_name BEFORE INSERT ON gallery FOR EACH ROW 
BEGIN 
   DECLARE next_id INT; 
   SET next_id = (SELECT AUTO_INCREMENT FROM gallery WHERE TABLE_NAME='gallery'); 
   SET NEW.location=next_id; 
END 
```

编辑：应该在插入触发器之后而不是之前，因为 auto_increment 数字仅在插入记录后设置。对不起！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-29T16:08:06.077

你的表应该是这样的：

```
id               |  int        |  primary key/autoincrement
order            |  int        |  index
picTimeStamp     |  timestamp 
```

然后如果您想在下面创建一个新条目，请通过 GET 传递订单号：

```
function createBelow(){
if(isset($_GET["orders"])){  
    $orders = $_GET["orders"];
    $query = "UPDATE links SET orders=orders+1 WHERE orders>$orders ORDER BY     orders DESC"; 
    mysql_query($query);
    $query = "INSERT INTO `mydb`.`mytable` (`orders`) VALUES ($orders+1);";
    mysql_query($query);
}

} 
```

默认值会处理 id 和 timestamp，你不需要输入这些。

# .net - 实现自定义 LINQ-to-X 提供程序

> ID：12181276
> 
> 赞同：6
> 
> 时间：2012-08-29T15:20:26.860
> 
> 标签：.net, linq

我有一个搜索工具，它采用复杂的搜索字符串（实际上是 JSON 中的 n 级对象图）并返回一些结果。我想通过类似 LINQ 的机制向其他（内部）开发人员公开该功能。

假设每个结果都由一个类定义`Result`

我可以创建看起来像这样的方法：

```
Function Search(Expression As Linq.Expression(Of System.Func(Of Result, Boolean))) As IEnumerable(Of Result) 
```

我不清楚的是如何遍历该`Expression`参数并提取实际标准，然后我可以将其形成对象图以运行我的查询。

有人可以指出如何实现这一点的教程/示例吗？

对于一些背景知识，我已经设法深入研究表达式以获得递归结构并能够检查`.Body`lambda 表达式，但是当我想要处理具有例如 type 的节点的`Left`和属性时，我有问题。调试器正在使用 Friend 范围的类 ( ) 来检查我无法使用的表达式，所以我显然走错了路。`Right``ExpressionType.Or``BinaryExpressionProxy`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T15:41:25.627

您可能希望查看[ExpressionVisitor](https://docs.microsoft.com/en-us/dotnet/api/system.linq.expressions.expressionvisitor?redirectedfrom=MSDN&view=net-5.0)类的子类化。这提供了遍历表达式树的机制，您所拥有的所有方法都覆盖了处理每种类型节点的方法。

以下是您可能会发现有用的其他一些链接：

*   表达式树文档：

    *   [VB](https://docs.microsoft.com/en-us/dotnet/visual-basic/programming-guide/concepts/expression-trees/)
    *   [C＃](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/expression-trees/)
*   [表达式树基础（博客文章）](https://docs.microsoft.com/en-us/archive/blogs/charlie/expression-tree-basics)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-31T10:53:12.020

您可以尝试使用我编写的名为[LinqToAnything](https://github.com/mcintyre321/LinqToAnything)的项目，您可以使用它来包装数据源以公开 IQueryable，具体取决于您的需要。

# javascript - 如何在表单提交事件之后运行一些 JavaScript？

> ID：12181277
> 
> 赞同：14
> 
> 时间：2012-08-29T15:20:28.503
> 
> 标签：javascript, html, forms

我正在处理一个可能需要几秒钟才能提交的 HTML 表单。我想在提交*后*禁用表单中的某些字段。

我可以在表单`submit`事件的处理程序中执行此操作，但这会在表单提交*之前触发。*如果我禁用这些控件，它们的值不会包含在发送到服务器的发布数据中。

我尝试在我的处理程序中取消提交事件，`submit`从表单中删除我的事件处理程序，通过 JavaScript 自己提交表单，*然后*禁用控件，但问题是我需要知道用户点击了哪个按钮提交表格。此信息在原始表单提交中，但显然不在我手动触发的那个中（因为没有单击任何按钮）。

我可以尝试将此信息复制到我的手动表单提交中，但是有没有办法在表单提交后运行我的禁用代码？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-04T11:19:15.077

不要通过禁用提交按钮来允许进一步提交，您无需执行任何其他操作。或者，隐藏表单并用旋转的东西替换它，这样用户就会被迷住，以为正在发生重要的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T16:04:24.833

提交表单后，您可以触发此功能：

```
function name() {
    $("#target :input").attr("disabled", true);
    return true;
} 
```

此代码将禁用从以“target”为 id 的元素继承的所有 from 字段。

此版本仅匹配所有输入元素：

```
function name() {
    $("#target input").attr("disabled", true);
    return true;
} 
```

您必须包含 jQuery 库才能使此代码正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-14T07:34:06.787

这与 sp00m 的答案几乎相同，只是它使用 Javascripts 本机提交来防止递归调用。

```
$('#myForm').submit(function() {
    this.submit();
    disableFields(); // your own function
    return false;
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-29T15:22:22.013

您可以使用 jQuery`.post()`提交，并`.button().click()`检测点击了哪个按钮

`.post()`提交完成*后*执行一个函数

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2019-11-12T11:47:42.453

您可以延迟操作的执行，以便仅在提交完成后调用它们：

```
$('#myForm').submit(function() {
    setTimeout(function() {
        // Run disabling code here
    }, 1);
    return true;
} 
```

`setTimeout(fn, 1)`将函数放在执行队列的末尾，以便在函数运行之前开始提交表单。

`setTimeout`可用于队列操作，有点像线程索引或 z-index：

[StackOverflow：为什么 setTimeout(fn, 0) 有时有用？](https://stackoverflow.com/questions/779379/why-is-settimeoutfn-0-sometimes-useful)

# php - 在 HTML 标签之间获取文本并替换它们

> ID：12181279
> 
> 赞同：0
> 
> 时间：2012-08-29T15:20:30.713
> 
> 标签：php, regex, domdocument

我想在 HTML 标签之间获取文本并动态替换它们。考虑到 HTML 标记可能包含任何内容（嵌套的 HTML 标记、注释等），我认为[DOM Document](http://www.php.net/manual/en/class.domdocument.php)类是可行的方法。但是，我无法找到任何满足我需求的示例。我只能获取特定选择的 html 标记之间的文本。我也找不到替换所选文本的示例。

```
<?php 
// HTML OUTPUT
$html= "<p>Subject,</p>
<h1>H1 title</h1>
<h2>H2 title</h2>
<h3>H2 title</h3>";

// DESIRED OUTPUT
$newHTML "<p>My Fav. Colors;</p>
<h1>Blue</h1>
<h2>Orange</h2>
<h3>Yellow</h3>";
?> 
```

基本上我想动态地从 HTML 输出中获取文本（可能包含嵌套的 HTML 标记、注释、javascripts 脚本等）并替换它们（替换的值将从数据库中选择）以创建新的 HTML 输出。

最好和优雅的方式是什么？[**DOM Document**](http://www.php.net/manual/en/class.domdocument.php)类是我需要的工具还是Regex**是**要走的路？

如果您能向我展示一小段代码以清楚地理解它，我将非常高兴。

**有问题的PS** HTML 文档可能是另一个域上的页面。比如[http://anotherdomain.com/page.html](http://anotherdomain.com/page.html)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:07:40.210

这是一个DOM的例子。

```
$html= "<p>Subject,</p>
<h1>H1 title</h1>
<h2>H2 title</h2>
<h3>H2 title</h3>";

$doc = new DOMDocument;
$doc->loadHTML( '<div>' . $html . '</div>');

foreach($doc->getElementsByTagName('div')->item(0)->childNodes as $node) {
    switch ($node->nodeName) {
        case "p":
            $node->nodeValue = "My Fav. Colors";
            break;
        case "h1":
            $node->nodeValue = "Blue";
            break;
        case "h2":
            $node->nodeValue = "Orange";
            break;
        case "h3":
            $node->nodeValue = "Yellow";
            break;          
    }
}
echo $doc->saveXML($doc); 
```

# php - 如何在 php.ini 中运行 extension=mongo.so

> ID：12181280
> 
> 赞同：4
> 
> 时间：2012-08-29T15:20:31.297
> 
> 标签：php, mongodb, centos

我正在使用 centos 6。我已经使用`yum install mongo-10gen mongo-10gen-server`. 我使用`/etc/init.d/mongod start`. 然后我添加`extension=mongo.so`到我的 php.ini 中。然后我用 重新启动了我的 apache 服务器`/etc/init.d/httpd restart`，一切正常。但 mongo php-driver 无法正常工作。当我检查我的 php 版本时`php version`，我得到了一个错误：

```
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib64/php/modules/mongo.so' - /usr/lib64/php/modules/mongo.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  Directive 'safe_mode' is deprecated in PHP 5.3 and greater in Unknown on line 0
Could not open input file: version 
```

我该如何解决这个问题？

# sql - 选择具有重复值分组的行

> ID：12181281
> 
> 赞同：0
> 
> 时间：2012-08-29T15:20:32.987
> 
> 标签：sql, oracle10g

我有两张看起来像这样的桌子

餐桌狗：

```
PK, color
1,  red
2,  yellow
3,  red
4,  red
5,  yellow 
```

狗有玩具。

桌上玩具

```
PK, FK, name
1,  2,  bowser
2,  2,  oscar
3,  3,  greg
4,  4,  alp
5,  4,  hanson
6,  5,  omar
7,  5,  herm 
```

我需要一个查询来选择拥有多个玩具的所有黄狗的数量。

我在想类似的东西：

```
Select count(*)
from toys t, dogs d
where t.fk = d.pk
and d.color = 'yellow'
group by t.fk    
having count(t.fk) > 1; 
```

它应该返回 2。但它返回多行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:30:56.723

```
select count(*)
from (
    select FK
    from Toys t
    inner join Dogs d on t.FK = d.PK
    where d."color" = 'yellow'
    group by FK
    having count(*) > 1
) 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!4/f6784/10)

# php - 如何使用 javascript/jquery 将变量从一个 PHP 文件传递 到另一个 PHP 文件

> ID：12181284
> 
> 赞同：-3
> 
> 时间：2012-08-29T15:20:41.680
> 
> 标签：php, javascript

我有两个 PHP 文件 a.php 和 b.php。我在 a.php 中有一些链接，如下所示：

```
echo "<ul>";    
 foreach($x->channel->item as $entry) {
 echo "<li><a href='NEED SOME CODE HERE TO OPEN b.php' title='$entry->title'>" . $entry->link . "</a></li>";
    }
echo "</ul>"; 
```

当用户单击该链接时，应该打开第二个页面 b.php 并且 b.php 应该知道变量的内容，`$entry->link`以便基于`$entry->link`我可以进行一些条件检查，如下所示：

在 b.php 中，我想做这个检查：

```
if($entry->link=="http://www.google.com") {
 //Some code here
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:24:07.690

你可以链接到

```
echo "<li><a href='b.php?link=".urlencode(entry->link)."' title='$entry->title'>" . $entry->link . "</a></li>"; 
```

而在 b.php

```
if(isset($_GET['link']) && ($_GET['link']=="http://www.google.com")) {
    //Some code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:24:45.557

如果 a.php 将数据保存到会话中，那么当调用 b.php 时数据已经可用呢？

alt 方法：从 $entry->title 查询字符串或 POST 变量？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:33:00.033

有多种方法可以实现您想要做的事情，您可以使用以下两种方法：

1）在服务器端使用PHP会话使数据持久化；

或者

2）使用Web存储在本地保存数据：

> 下面是一个使用 DOM 存储的示例：
> //存储数据
> window.sessionStorage.setItem("key", "my data");
> //检索它
> window.sessionStorage.getItem("key");

# javascript - 来自复选框选择的表单填充

> ID：12181285
> 
> 赞同：1
> 
> 时间：2012-08-29T15:20:48.123
> 
> 标签：javascript, jquery

这是问题的简化版本，以便更容易解释和更简短的问题。

我有 X 复选框：

```
<input type="checkbox" class="checker" value="1" />
<input type="checkbox" class="checker" value="2" />
<input type="checkbox" class="checker" value="3" />
... 
```

我有 Y 个输入字段（X > Y）的 2 列，证书和成本，然后是底部的总数：

```
<input type="text" class="cert" /><input type="text" class="cost">
<input type="text" class="cert" /><input type="text" class="cost">
<input type="text" class="cert" /><input type="text" class="cost">
...

<input type="text" id="total" /> 
```

用户可以选择复选框的任意组合（最多为 Y）。当一个复选框被选中时，它的值被输入到第一个空证书输入中。根据证书值，然后将相应的成本放入相邻的成本输入中（例如，证书 1 = 成本 50，证书 2 = 成本 100，等等）。

如果未选中复选框，则会清除相应的证书以及成本。

底部的总数保持对任何事物的更改的运行总数。

一些附加说明：

*   复选框在整个表单中是间隔的，而不是一个连续的顺序。
*   同样，证书和成本输入实际上并没有在 html 中并排（尽管确实出现在屏幕上），它们之间还有其他代码。

非常感谢任何帮助/输入，因为我主要是在制造一团糟！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:47:42.780

这里有一些东西可以让你开始。我不确定你`cert 1` `cert 2`是在文本框内还是有标签或其他东西。和你的成本一样。但这就是我在示例中所做的方式。这是假设您具有与输入集相同数量的复选框（证书和成本）；

```
$('input.checker').change(function(){
    // store the current index so we can pick which text input to change
    var $i = $(this).index('input.checker');
    // put val in corresponding cert text input
    $('input.cert').eq($i).val(this.checked ? 'cert ' + ($i+1) : '');
    // put val in corresponding .cost text input
    $('input.cost').eq($i).val(this.checked ? 'cost ' + (50 * ($i+1)) : '');

    var total = 0;
    // loop through the cost inputs and add up total
    $('input.cost').each(function(i,v){
        total += (+$(v).val().replace('cost ',''));
    });
    // insert total
    $('#total').val(total);
});​ 
```

**[示例小提琴](http://jsfiddle.net/vqdps/1/)**

# asp.net-mvc - MVC 将数据从 View 发送到 Controller

> ID：12181287
> 
> 赞同：6
> 
> 时间：2012-08-29T15:20:49.347
> 
> 标签：asp.net-mvc

我对 MVC 3 很陌生。

我知道如何将强类型对象从控制器发送到视图。我现在拥有的是一个视图，其中包含一个由该数据组成的表/表单。

用户可以在该视图（html 页面）中更改该数据。

当他们单击“保存”时，我如何将数据从视图发送回控制器，以便我可以更新我的数据库。

我是否重载了 Controller 方法以使其接受模型类型的参数？能否请您提供一些源代码。

（请不要显示将数据持久化到数据库的代码，我知道该怎么做）。

非常感谢你帮助我。

我也更喜欢使用`@Html.BeginForm()`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T15:30:16.383

我喜欢为我的帖子数据创建一个操作方法。因此，假设您有一个 UserViewModel：

```
public class UserViewModel
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

然后是一个用户控制器：

```
public class UserController
{
    [HttpGet]
    public ActionResult Edit(int id)
    {
        // Create your UserViewModel with the passed in Id.  Get stuff from the db, etc...
        var userViewModel = new UserViewModel();
        // ...

        return View(userViewModel);
    }

    [HttpPost]
    public ActionResult Edit(UserViewModel userViewModel)
    {
        // This is the post method.  MVC will bind the data from your
        // view's form and put that data in the UserViewModel that is sent
        // to this method.

        // Validate the data and save to the database.

        // Redirect to where the user needs to be.
    }
} 
```

我假设您的视图中已经有一个表单。您需要确保表单将数据发布到正确的操作方法。在我的示例中，您将像这样创建表单：

```
@model UserViewModel

@using (Html.BeginForm("Edit", "User", FormMethod.Post))
{
    @Html.TextBoxFor(m => m.Name)
    @Html.HiddenFor(m => m.Id)
} 
```

这一切的关键是 MVC 所做的模型绑定。使用 HTML 助手，例如我使用的 Html.TextBoxFor。此外，您会注意到我添加的视图代码的第一行。@model 告诉视图您将向其发送 UserViewModel。让引擎为您工作。

编辑：好电话，在记事本中完成了所有操作，忘记了 ID 的 HiddenFor！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:26:18.410

在 MVC 中，从 POST 或 GET HttpRequests 中提取数据的行为被称为模型绑定——有很多与此相关的[SO 问题](https://stackoverflow.com/questions/5692964/asp-net-mvc-3-model-binding-resources)。

开箱即用，MVC 将根据约定绑定您的 Get 和 Post 变量，例如，名称为“FormName”的表单字段将绑定回控制器上具有相同名称的参数。

模型绑定也适用于对象 - MVC 将为您的控制器实例化一个对象，并设置与您的表单同名的属性。

# mongodb - 需要使用php查询MongoDB

> ID：12181288
> 
> 赞同：0
> 
> 时间：2012-08-29T15:20:58.820
> 
> 标签：mongodb, mongodb-php

我需要用这样的东西查询 mongodb：

`("something" < X OR "something" = "nll") AND ("someother">X OR "someother"= "nll") AND z=$z AND s=1`

我已经尝试了一些东西，但无法让它工作，这就是我尝试过的：

`find( array( '$or'=>array(array("something"=>array("$le",$X)),array("something"=>"nll")), '$or'=>array(array("someother"=>array("$ge",$X)),array("someother"=>"nll")) ))`

但这让我的 OR 被覆盖，所以我迷失了......

在深入挖掘之后，我组装了这个似乎是我需要的代码，但也不起作用：

`find( array('$and'=>array( array( '$or' => array( array("something"=>array('$gte'=>$X)),array("something"=>"nll"))), array('$or' => array( array("someother"=>array('$lte'=>$X)),array("someother"=>"nll")))),"Z"=>$z, "s"=>"1");`

但这不起作用，因为它返回零结果，并且我确定在 db 上匹配的项目超过 2 个。（100% 确定）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:22:28.773

```
$range = array('$and' => array(  
     array('$or' => array(
         array("something" => array( "$lte" => $X)),
         array("something" => "null")),
     array('$or' => array(
          array("someother" => array("$gte" => $X)),
          array("someother" => "null"))   
)); 
```

# c - 可选功能参数 C

> ID：12181291
> 
> 赞同：3
> 
> 时间：2012-08-29T15:21:08.123
> 
> 标签：c, macros, variadic-functions, optional-parameters

我目前正在开发一个`function`in`C`来查找`char`给定字符串的最后一次出现。如果没有给出字符串的长度，我希望它使用某种方法（我自己的），否则它只会使用`strrchr`. 因此，经过一番研究后，我决定 a`macro`将是要走的路。这就是我所拥有的：

```
 size_t strlchr(const char *str, const char ch, const int strln)
 {
    //function code if strlen == -1 (no parameter)
    //function code if strlen != -1 (parameter given)
 }

#define strlchr_arg2(str, ch) strlchr(str, ch, -1)
#define strlchr_arg3(str, ch, strlen) strlchr(str, ch, strln)
#define getarg4(arg2, arg3, arg4...) arg4
#define strlchr_macro(...) \ getarg4(__VA_ARGS__, strlchr(arg3, \ arg2, )
#define strlchr(...) strlchr_macro(__VA_ARGS__)(__VA_ARGS__) 
```

这是实现我的目标的正确方法吗？或者有没有更有效的方法？我还必须在源文件中的宏之前有功能代码吗？我通常将我的函数写在底部，并有我的声明，在这种情况下`size_t strlchr(const char*, const char, const int)`朝向我的源文件的顶部，最后是我的宏等在我的源文件的顶部。所以理想情况下我的布局是：

```
macros/defines
function declaration
function code 
```

这个问题完全基于我在网上看到的其他示例。这是使用可选函数参数的方式吗？还是我走远了？我还没有实现它，因为我首先想在做一些可怕的错误之前得到一些输入（我以前从未制作过宏，这个宏大部分来自一个例子，我对它到底是什么知之甚少做）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T18:00:35.677

看起来这样做会更简单：

```
size_t strlchr(const char *str, const char ch, const int strln)
{
    //function code if strlen == -1 (no parameter)
    //function code if strlen != -1 (parameter given)
}

#define strlchr_macro(STR, CH, STRLN, ...) strlchr(STR, CH, STRLN)
#define strlchr(...) strlchr_macro(__VA_ARGS__, -1, -1) 
```

这使得 the`ch`和`strln`arguments 都是可选的，如果未提供，则默认为 -1。它还允许您提供 3 个以上的参数（额外的参数将被忽略），这可能是不可取的，但可能不是阻碍。

# android - Android UI 设计模式 - 选项菜单

> ID：12181292
> 
> 赞同：1
> 
> 时间：2012-08-29T15:21:18.547
> 
> 标签：android, oop, android-layout

我想在我的项目中的每个活动上使用我的选项菜单。

所以我创建了一个继承自 Activity 的 OptionsMenuActivity。

我创建的每个活动都继承自它。

问题是在创建从 PreferenceActivity 继承的 MyPreferenceActivity 时，我无法使用它。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:38:00.453

如果您要做的只是找到一个放置 onCreateOptionsMenu() 和 onOptionsItemSelected() 方法的地方，您可以使用这两个方法创建一个单独的类，使该类的一个实例成为您所有活动的成员，并使这两个方法“通过”您的活动中的方法，推迟到现在处理请求的成员对象。

您的新类不必从 Activity 继承即可完成其工作。但是，onOptionsItemSelected() 方法可能必须返回一些关于它是否实际处理请求的指示，以便您的 Activity 的方法可以根据需要调用“super.onOptionsItemSelected()”。

# javascript - 如果只有谷歌广告，则显示一个 div

> ID：12181293
> 
> 赞同：3
> 
> 时间：2012-08-29T15:21:26.517
> 
> 标签：javascript, html, google-dfp

使用 javascript，我需要显示一个 DIV，但前提是它包含一个 Google 广告。这是我通过 Google 使用的代码：

```
<div id='div-gpt-ad-1346196436229-0'>
    <script type='text/javascript'>
        googletag.cmd.push(function() { googletag.display('div-gpt-ad-1346196436229-0'); });
    </script>
</div> 
```

上述代码中的 DIV ID 是由 Google 为广告位生成的。

我能得到任何想法或方向吗？诚然，我在 javascripting 世界中很弱，所以请保持温柔。:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T16:02:16.377

只需像这样在标题代码中包含这个标签。

```
<script type='text/javascript'>
googletag.defineSlot('AdSlot-name', [AdSize], 
'div-gpt-ad-1346196436229-0').addService(googletag.pubads());
googletag.pubads().collapseEmptyDivs();
</script> 
```

您添加的标签是：

```
googletag.pubads().collapseEmptyDivs(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T10:47:44.493

有两种方法可以解决这个问题...如果没有使用DFP API 中的[collapseEmptyDivs](http://support.google.com/dfp_premium/bin/answer.py?hl=en&answer=1650154&expand=pubservice_details#collapseemptydivs)设置的广告，您可以改变思考方式并隐藏 div 。

如果你绝对必须从一个隐藏的 div 开始，然后只在它包含广告时才显示它，那就有点复杂了……如果你在页面上使用 jQuery，请查看我编写的[插件。](https://github.com/coop182/jquery.dfp.js)

其他答案几乎是正确的，但它不像检查 iframe 那样简单......根据我的经验，无论广告是否真的在那里显示，都会出现 iframe。在页面加载时检查 iframe 也不起作用，因为广告通常会在页面加载后呈现。

您需要连接到 DFP 脚本并在触发 renderEnded 后检查广告的状态...使用上面的链接插件，您有两个回调可以轻松做到这一点...插件还为广告添加了一个类display-block 或 display-none 的单元 div 取决于是否找到了广告......然后这些可以很容易地用于隐藏或显示带有 CSS 的 div。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-28T16:55:18.243

如果没有广告，DoubleClick 只会输出一个空字符串。我正在计算包​​含广告并基于此隐藏的 div 中的儿童数量。

```
<script type="text/javascript">
    if($('#ad-id').children().length < 5)
    {
        $('#ad-id').hide();
    }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T17:32:54.810

使用另一个响应，您可以使用 jQuery 检查 iframe 的元素内容

```
if($('#div-gpt-ad-1346196436229-0').has('iframe'))
  $('#div-gpt-ad-1346196436229-0').show 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-29T22:50:53.313

老问题，但我在 IE 中遇到了一个问题，即在未能获得广告时，广告会加载空白的白色背景 iframe。以下代码处理 op 问题 + IE 修复，您必须将 collapseEmtpyDivs 设置为 true 并从最初显示的 adunit 元素开始：

```
if( $(adUnit).css("display") == "none"  || $(adUnit).hasClass("display-none") )
    $(adUnit).remove(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-02T06:32:19.183

这可能是一种除隐藏或显示广告服务容器 div 之外的方法。我知道这是题外话，但如果广告的存在决定了页面上的其他内容，比如项目是否应该绝对定位，还是浮动等等......在我的情况下，我在顶部有一个视频播放器只有当广告存在时，我才想更改其背景的广告投放槽。... 很老套的方法，似乎*应该*有一个回调或响应请求来确定这个在 display() 完成后...成功 / fali 等。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-29T15:41:16.920

基本上很简单

通过他们的广告，谷歌正在使用一个完整的 html 文档和一个 iframe，因此页面已完成，您只需检查 div 是否包含“html”或“iframe”标签，如果是则显示它

希望能帮助到你

*并且我建议将广告放在具有预定义 id-s 的持有人 diws

# facebook - flash 对象必须具有 'source' 和 'picture' 属性

> ID：12181294
> 
> 赞同：4
> 
> 时间：2012-08-29T15:21:28.040
> 
> 标签：facebook, flash, post, publishing

这开始发生在今天。昨天一切正常，一周前我们没有发布新代码。

转到：[http ://www.facebook.com/dialog/feed?app_id=151774588251426&redirect_uri=https%3a%2f%2fwidget.nextwidgets.com%2fnewsfeed%2flanding%2fshared%2f4070&link=https%3a%2f%2fwidget.nextwidgets .com%2ftrack%2fredirect%2fpromote%3finvid%3d0%26wid%3d4070%26lc%3den&display=page](http://www.facebook.com/dialog/feed?app_id=151774588251426&redirect_uri=https%3a%2f%2fwidget.nextwidgets.com%2fnewsfeed%2flanding%2fshared%2f4070&link=https%3a%2f%2fwidget.nextwidgets.com%2ftrack%2fredirect%2fpromote%3finvid%3d0%26wid%3d4070%26lc%3den&display=page)

通常我们会看到标准的共享对话框。但现在我们得到：

**发布错误**

**flash 对象必须具有 'source' 和 'picture' 属性**

我们如何解决这个问题？

# ssh - 通过 OpenSSH 传递的 Windows 环境变量

> ID：12181299
> 
> 赞同：7
> 
> 时间：2012-08-29T15:21:36.727
> 
> 标签：ssh, environment-variables, openssh

我正在为 Windows 使用 OpenSSH，以便能够将 Linux 机器连接到 Windows 机器。
为此，我为 Windows v5.6p1-2 安装了 SSH 服务器。
我还声明了允许的用户。

在我的 Linux 机器上，我使用“ssh user@machine”命令连接到 Windows 机器。

我的问题是，一旦连接，我只得到一些 Windows 环境变量，而不是所有系统和用户定义的变量。
是否可以获得所有 Windows 环境变量？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T21:00:59.413

“这是为了限制安全漏洞。”

检查一下，它有一些解决方案。

[http://cygwin.com/ml/cygwin/2006-11/msg00394.html](http://cygwin.com/ml/cygwin/2006-11/msg00394.html)

# php - 解析数据库以创建 RSS 提要

> ID：12181300
> 
> 赞同：0
> 
> 时间：2012-08-29T15:21:39.433
> 
> 标签：php, mysql, wordpress

您好我正在尝试从成功的 php 创建 rss，但我无法获取所有信息。

该数据库是一个 Wordpress 安装。

我有一个包含 2 张图片的帖子。在数据库中，这 2 张图像和帖子都作为三个单独的行存储在同一个表中，但由 'post_type' 字段区分。

然后，我在每个帖子上附加了额外的信息，但这包含在一个单独的表格中。

我应该使用什么样的选择语句来执行这样的事情？任何帮助将不胜感激。

谢谢并恭祝安康，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:29:05.700

据我所知，wordpress 有几个可定制的 rss 提要插件，您不必在其中执行任何选择语句，只需单击所需的结果即可。

为了在 worldpress db 上进行选择查询，并从中手动生成 rss，从长远来看，您可能会遇到一些问题，例如 wordpress 更新带来的潜在结构变化。

强烈建议使用官方插件页面中的这些功能，通常是那些有适应 wordpress 到目前为止所经历的各种版本更改历史的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:27:53.240

谢谢大家的所有信息。我找不到可以用来让它工作的 WordPress 插件（尽管我确信可能有一个）。但我设法让这个工作。这就是我最终的结果：

```
'Select
 mwpwpecbd.*,
 mwpposts.*,
 imageposts.guid As guid1,
 imageposts.post_type As post_type1,
 imageposts.ID As ID1,
 imageposts.post_title As post_title1,
 mwpposts.post_parent,
 imageposts.post_parent As post_parent1
 From
 mwpwpecbd Inner Join
 mwpposts On mwpposts.ID = mwpwpecbd.post_id Inner Join
 mwpposts imageposts On imageposts.post_parent = mwpposts.ID' 
```

我使用[FlySpeed SQL Query](http://www.activedbsoft.com/overview-querytool.html)并像魔术一样创建它。我认为我可能还需要做一些调整，但我知道这已经接近目标了。

# ado.net - 为什么这段代码无法持久化数据？

> ID：12181303
> 
> 赞同：-1
> 
> 时间：2012-08-29T15:21:54.903
> 
> 标签：ado.net, c#-2.0

```
public class Customer : BaseClass<Customer>
{   
    public string Name { get; set; }
    public DateTime? DateOfBirth { get; set; }
    public string TelephoneNumber { get; set; }
    public string InsuranceProvider { get; set; }
    public int? PolicyNumber { get; set; }
    public byte [] Photo { get; set; }
} 
```

此消息显示：

![在此处输入图像描述](../Images/7931400b36c28b225050095cd0c6631f.png)

或这个：

![在此处输入图像描述](../Images/06d3d779015e8340f171003a986745dd.png)

如何修改此代码以能够持久化数据？

**CustomerDAO.cs**

```
class CustomerDAO
{
    .....
    public int Save(ITransactionManager tm, Customer item)
    {
        int count = -1;

        try
        {
            ISqlQueryExecutor<Customer> queryExecutor = new SqlQueryExecutor<Customer>(tm);

            count = 
                queryExecutor.
                ExecuteNonQuery(@"INSERT INTO Customer(
                                       ID
                                      ,Name
                                      ,TelephoneNumber
                                      ,DateOfBirth,
                                       InsuranceProvider,
                                       PolicyNumber)
                                  VALUES(
                                       @ID
                                      ,@Name
                                      ,@TelephoneNumber
                                      ,@DateOfBirth,
                                       @InsuranceProvider,
                                       @PolicyNumber)",
                                      item.ID,
                                      item.Name,
                                      item.TelephoneNumber,
                                      item.DateOfBirth,
                                      item.InsuranceProvider,
                                      item.PolicyNumber,item.Photo
                                      );
                                  //new DbParameter(item.ID, DbType.Int32),
                                  //new DbParameter(item.Name, DbType.String),
                                  //new DbParameter(item.TelephoneNumber, DbType.String),
                                  //new DbParameter(item.DateOfBirth, DbType.DateTime),
                                  //new DbParameter(item.InsuranceProvider, DbType.String),
                                  //new DbParameter(item.PolicyNumber, DbType.Int32)
                                  //new DbParameter(item.Photo, DbType.Binary)
                                  //);

            string str = string.Empty;
        }
        catch (Exception ex)
        {
            throw ex;
        }

        return count;
    }
    .... ....
} 
```

**客户BLL.cs**

```
class CustomerBLL
{
... ... ...
    public int Save(Customer item)
    {
        int newId = 0;

        ITransactionManager tm = ApplicationContext.Get(DBNameConst.ActiveConnStringName);

        try
        {
            tm.BeginTransaction();

            item.ID = newId = PivotTable.GetNextID(tm, "Customer").Value;

            customerDao.Save(tm, item);

            PivotTable.UpdateNextIdField(tm, "Customer", newId);

            tm.CommitTransaction();
        }
        catch (Exception ex)
        {
            tm.RollbackTransaction();

            throw ex;
        }

        return newId;
    }
    ... ... ...
 } 
```

**ASqlQueryExecutor.cs**

```
public abstract class ASqlQueryExecutor<T> : ISqlQueryExecutor<T>
{
 public virtual int ExecuteNonQuery(string queryString, params object[] parameters)
    {
        int count = -1;

        try
        {
            Command = ParameterAttacher.AttachSaveParameters(TransactionManager, queryString, parameters);
            Command.CommandText = queryString;
            count = Command.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            throw ex;
        }

        return count;
    } 
```

**参数附件.cs**

```
class ParameterAttacher
{
    public static IDbCommand AttachSaveParameters(ITransactionManager tm, string queryString, params object [] argumentsList)
    {
        IDbCommand command = new DbObjectInstantiator(tm.ProviderName).CreateCommand();
        command.Connection = tm.Connection;
        command.Transaction = tm.Transaction;

        IList<string> parameterNamesList = new List<string>(ParameterParser.Parse(queryString));

        if (parameterNamesList.Count > 0 && argumentsList.Length == argumentsList.Length)
        {
            int i = 0;

            foreach (string paramName in parameterNamesList)
            {
                Attach(command, paramName, argumentsList[i]);

                ++i;
            }
        }

        return command;
    }

    public static void Attach(IDbCommand command, string paramName, object dbParam)
    {
        IDbDataParameter param = command.CreateParameter();

        param.ParameterName = paramName;
        param.Value = (dbParam==null) ? ((object)DBNull.Value) : dbParam;
        //param.DbType = dbParam.DbType;

        command.Parameters.Add(param);
    }
} 
```

![在此处输入图像描述](../Images/35e68b0a678ee09b28b167788182e862.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:59:29.340

> 字符串或二进制数据将被截断。该语句已终止

这可能是因为您试图将太多数据存储到列中。例如，如果您在数据库中有一个 nvarchar(5) 列，并且您尝试在其中存储“这是一个字符串”，您可能会收到该错误，因为 5 个字符不能包含所有“这是一个字符串”。

您可以通过将 UI 中的字段限制为与数据库中的字段相同的长度来避免此问题。或者，您可以在验证方法中执行检查。

> 不允许从数据类型 nvarchar 到二进制的隐式转换。

这似乎相当明显：您正在尝试将字符值存储在二进制列中。你还没有提供你的数据库模式，所以我不能确定这可能在哪里；但是，如果您在数据库中设置了列或 sproc 参数，`binary`但您的 C# 详细说明了它，因为`DbType.String`您可能会收到此错误。

### 更新：

你从来没有设置你`DbType`的`ParameterAttacher.Attach`。这意味着`Parameter`将默认`DbType.AnsiString`为参数类型。如果您将它传递给它，`byte[]`它*可能*会将其转换为 ansi 字符串，但是当将参数提供给 ADO 时，它会看到*DbType.AnsiString*并将其与`varbinary(50)`(or `money`, or `datetime`, or`int`等​​) 进行比较并抛出一个详细说明它的异常不知道如何转换为`binary`（例如隐式转换）。

另外，帮自己一个忙，摆脱：

```
catch(Exception ex)
{
  throw ex;
} 
```

这只会迫使您放弃异常的真实位置，并导致您浪费时间试图找出真正的问题在哪里。

当你必须捕获时（例如当你想回滚事务时，只是`throw`，不要`throw ex`。只是`throw`不会丢失堆栈信息，你可以追踪异常的位置。例如：

```
 catch (Exception ex)
    {
        tm.RollbackTransaction();

        throw;
    } 
```

# mongodb - mongo odm 中的多位置文档

> ID：12181320
> 
> 赞同：1
> 
> 时间：2012-08-29T15:22:44.647
> 
> 标签：mongodb, location, geospatial, doctrine-odm

从 1.9 开始，mongo 支持多位置文档[http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-MultilocationDocuments](http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-MultilocationDocuments)

我们正在使用学说 mongo odm，此功能对我们的项目至关重要。

有人知道如何在 mongo odm 中创建多位置文档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:58:20.523

[与您在mongodb-odm issue](https://github.com/doctrine/mongodb-odm/issues/400)中提出的相同问题交叉引用此问题。

我认为 ODM 不需要为此提供任何特殊支持，就像它不需要数组字段的[多键索引一样。](http://www.mongodb.org/display/DOCS/Multikeys)尝试在包含点数组的字段上定义地理索引。另外，我注意到[ODM 的地理文档](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/geospatial-queries.html)建议使用嵌入式对象来保存坐标。`[x, y]`MongoDB 将支持这一点，但首选数组（即）。

# java - Java：新手“javac：无效标志”编译错误

> ID：12181329
> 
> 赞同：0
> 
> 时间：2012-08-29T15:23:13.997
> 
> 标签：java

我正在尝试编译 Java 1.6 程序。以下编译没有错误：

```
# javac -cp /path/to/ojdbc6.jar:. MyJavaProgram.java 
```

但是添加标志会导致此错误：

```
# javac -cp /path/to/ojdbc6.jar:. -Doracle.jdbc.SetFloatAndDoubleUseBinary=true MyJavaProgram.java -help
javac: invalid flag: -Doracle.jdbc.SetFloatAndDoubleUseBinary=true
Usage: javac <options> <source files>
use -help for a list of possible options 
```

不支持标志吗？我添加了，`-help`但它没有提供更多信息（我是否在上面的正确位置添加了它？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:25:09.893

~~选项必须在源文件之前（如您的问题所示）：删除`-help`.~~

`-D`选项指定属性并传递给 JVM ( `java`) 并且不是编译时标志。来自`java -help`：

```
-D<名称>=<值>
       设置系统属性

```

要查看可用编译器选项的列表，请执行：

> javac -帮助

# haskell - Monads - 定义、法则和例子

> ID：12181330
> 
> 赞同：-1
> 
> 时间：2012-08-29T15:23:19.223
> 
> 标签：haskell

> **可能重复：**
> [什么是单子？](https://stackoverflow.com/questions/44965/what-is-a-monad)

我正在学习使用 Haskell 的函数式语言进行编程，并且在学习解析器时遇到了**Monads 。**我以前从未听说过它们，所以我做了一些额外的研究来找出它们是什么。

为了学习这个主题，我到处寻找都让我感到困惑。我真的找不到关于 Monad 是什么以及如何使用它们的简单定义。“单子是一种根据值和使用这些值的计算序列来构造计算的方法” - 嗯？？？

有人可以提供一个简单的定义，什么是 Haskell 中的 Monad，与它们相关的法律并举个例子吗？

*   注意：我知道如何使用 do 语法，因为我已经了解了 I/O 操作和具有副作用的函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T15:28:31.283

# 直觉

一个粗略的直觉是 Monad 是一种特殊的容器 ( `Functor`)，你有两个可用的操作。`return`将单个元素放入容器的包装操作。`join`将容器的容器合并为单个容器的操作。

```
return :: Monad m => a -> m a     
join   :: Monad m => m (m a) -> m a 
```

所以对于 Monad 也许你有：

```
return :: a -> Maybe a     
return x = Just x

join :: Maybe (Maybe a) -> Maybe a
join (Just (Just x) = Just x
join (Just Nothing) = Nothing 
join Nothing        = Nothing 
```

同样对于 Monad [ ] 这些操作被定义为：

```
return :: a -> [a]     
return x = [x]

join :: [[a]] -> [a]
join xs = concat xs 
```

Monad 的标准数学定义是基于这些返回和连接运算符。然而在 Haskell 中 Monad 类的定义用一个绑定操作符代替了连接。

# Haskell 中的单子

在函数式编程语言中，这些特殊容器通常用于表示有效的计算。类型`Maybe a`将表示可能成功或可能不成功的计算，而类型表示不确定`[a]`的计算。特别是我们对具有效果的函数感兴趣，例如`a->m b`一些具有类型的函数`Monad m`。我们需要能够组合它们。这可以使用一元组合或绑定运算符来完成。

```
(>=>) :: Monad m => (a -> m b) -> (b -> m c) -> a -> m c
(>>=) :: Monad m => m a -> (a -> m b) -> m b 
```

在 Haskell 中，后者是标准的。请注意，它的类型与应用程序运算符的类型非常相似（但带有翻转的参数）：

```
(>>=)    :: Monad m => m a -> (a -> m b) -> m b
flip ($) ::              a -> (a ->   b) -> b 
```

它接受一个有效的函数`f :: a -> m b`和一个返回类型的计算`mx :: m a`值`a`，并执行应用程序`mx >>= f`。那么我们如何用 Monads 做到这一点呢？容器 ( `Functors`) 可以被映射，在这种情况下，结果是计算中的计算，然后可以展平：

```
fmap f mx        :: m (m b)
join (fmap f mx) :: m b 
```

所以我们有：

```
(mx >>= f) = join (fmap f mx) :: m b 
```

要在实践中看到这一点，请考虑一个带有列表（非确定性函数）的简单示例。假设您有一个可能的结果列表`mx = [1,2,3]`和一个非确定性函数`f x = [x-1, x*2]`。要计算`mx >>= f`，首先将 mx 与 f 映射，然后合并结果::

```
fmap f mx                = [[0,2],[1,4],[2,6]]    
join [[0,2],[1,4],[2,6]] = [0,2,1,4,2,6] 
```

由于在 Haskell 中绑定运算符`(>>=)`比 更重要`join`，因此出于效率原因，后者是从前者定义的，而不是相反。

```
join mx = mx >>= id 
```

此外，使用 join 和 fmap 定义的绑定运算符也可用于定义映射操作。由于这个原因，Monad 不需要是类 Functor 的实例。`liftM`在 Monad 库中调用 fmap 的等效操作。

```
liftM f mx = mx >>= \x-> return (f x) 
```

所以 Monads Maybe 的实际定义变成：

```
return :: a -> Maybe a     
return x = Just x

(>>=)    :: Maybe a -> (a -> Maybe b) -> Maybe b
Nothing >>= f = Nothing 
Just x  >>= f = f x 
```

对于 Monad [ ]：

```
return :: a -> [a]     
return x = [x]

(>>=)    :: [a] -> (a -> [b]) -> [b]
xs >>= f = concat (map f xs)
         = concatMap f xs    -- same as above but more efficient 
```

在设计自己的 Monad 时，您可能会发现更容易，而不是尝试直接定义`(>>=)`，将问题分成几部分并弄清楚如何映射和连接您的结构。拥有 map 和 join 也可以用于验证您的 Monad 是否定义良好，即它是否满足所需的法律。

# 单子定律

你的 Monad 应该是一个 Functor，所以映射操作应该满足：

```
fmap id = id
fmap g . fmap f = fmap (g . f) 
```

返回和加入的规律是：

```
join . return      = id
join . fmap return = id  
join . join = join . fmap join 
```

前两个定律指定合并撤消换行。如果您将一个容器包装在另一个容器中，则 join 会返回原始容器。如果您使用包装操作映射容器的内容，则再次加入会返回您最初拥有的内容。最后一条定律是连接的结合性。如果您有三层容器，则通过从内部或外部合并可以获得相同的结果。

同样，您可以使用 bind 而不是 join 和 fmap。你得到更少但（可以说）更复杂的法律：

```
return a >>= f  = f a
m >>= return    = m
(m >>= f) >>= g = m >>= (\x -> f x >>= g) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T17:10:54.463

Haskell 中的 monad 定义了两个操作：

```
(>>=)  :: Monad m => m a -> (a -> m b) -> m b -- also called bind
return :: Monad m => a -> m a 
```

如果您没有数学思想的诀窍，这两个操作需要满足某些在这一点上可能会让您感到困惑的定律。从概念上讲，您使用 bind 在单子级别上操作值并返回以从“微不足道”的值创建单子值。例如，

`getLine :: IO String`,

所以你不能修改`putStrLn`这个`String`——因为它不是一个`String`，而是一个`IO String`！

好吧，我们有一个方便的 IO Monad，所以不用担心。我们所要做的就是使用 bind 来做我们想做的事。让我们看看 IO Monad 中的 bind 是什么样子的：

```
(>>=) :: IO a -> (a -> IO b) -> IO b 
```

如果我们把`getLine`它放在 bind 的左边，我们可以让它更具体。

```
(>>=) :: IO String -> (String -> IO b) -> IO b 
```

好的，因此`getLine >>= putStrLn . (++ ". No problem after all!")`将打印输入的行并添加额外的内容。右手边是一个函数，它接受 a`String`并产生一个`IO ()`- 这一点都不难！我们只是按类型。

为许多不同的类型定义了 Monad，例如`Maybe`and `[a]`，它们在概念上的行为方式相同。

`Just 2 >>= return . (+2)``Just 4`如您所料，会产生。请注意，我们必须在`return`这里使用，否则右侧的函数将**不**匹配返回类型`m b`，而只是匹配`b`，这将是类型错误。它在 putStrLn 的情况下工作，因为它已经产生了一个`IO`东西，这正是我们的类型需要匹配的东西。（剧透：形状的表达`foo >>= return . bar`很愚蠢，因为每个`Monad`都是一个`Functor`。你能弄清楚那是什么意思吗？）

我个人认为，就直觉而言，这只是让您了解单子的主题，如果您想更深入地研究，您确实需要深入研究该理论。我喜欢先使用它们。您可以查找各种 Monad 实例的源代码，例如 List ( `[]`) Monad 或`Maybe`Hoogle 上的 Monad，并在具体实现上更加智能。一旦您对此感到满意，请尝试实际的单子定律并尝试对它们进行更理论的理解！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T08:48:34.513

Typeclassopedia有一个部分 about （但请先阅读前面的部分 about[和](http://www.haskell.org/haskellwiki/Typeclassopedia)first ）。[`Monad`](http://www.haskell.org/haskellwiki/Typeclassopedia#Monad)[`Functor`](http://www.haskell.org/haskellwiki/Typeclassopedia#Functor)[`Applicative`](http://www.haskell.org/haskellwiki/Typeclassopedia#Applicative)

# excel - 如果单元格中有 1 或 3，是否选择了单选按钮？

> ID：12181332
> 
> 赞同：0
> 
> 时间：2012-08-29T15:23:28.217
> 
> 标签：excel, excel-formula

好的，我遇到了一个问题。我有一个数据库，在这里进行了简化，但基本上如果提取了一个问题，并且以另一种形式给出了答案，我需要拥有它，以便当从存档中提取问题时，它会通过单选按钮显示答案.

第一张照片是真的，第二张是假的。这可以使用直接的excel公式吗？

![在此处输入图像描述](../Images/637fc04105c56bef510dce3515fd6228.png)

![在此处输入图像描述](../Images/29912714f0ca26d2158fc66cc46ebd74.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:54:40.103

在此示例中将选项按钮 TRUE 和 FALSE 链接到 D2 并在该单元格中具有此公式 =IF(VLOOKUP(D1,$F$3:$G$12,2,FALSE)=3,2,1) 这将更改 3到 2 表示结果为假，其他任何东西都是 1 或（真）。如果您有其他值，您也可以调整它们的公式。

问题之一是有人更改真或假的选择会将公式更改为该固定值，因此锁定单元格。

希望这能说明什么意思。您甚至可以隐藏 D2 以免混淆，因为选项按钮是您想要代表结果的按钮

![在此处输入图像描述](../Images/bc1c5d03dd217d863c69a6baff28896d.png) ![在此处输入图像描述](../Images/def215fe6adbcf0cd84e769ccb713dac.png)

# java - 没有选择子句的 Hadoop 插入

> ID：12181333
> 
> 赞同：4
> 
> 时间：2012-08-29T15:23:29.177
> 
> 标签：java, hadoop, hive

我是 Hadoop 新手，我需要在表中插入一条记录，当我搜索语法时，插入语句的每个位置都有来自 select 语句的值。

有没有办法在没有 Select 语句的情况下插入简单的值？

问候，萨西什。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:48:41.370

首先，我猜测我们正在谈论 HIVE 的标签。

当您真正使用 hive 时，您永远没有理由一次添加一个条目。

我认为最简单的方法是首先使用您的数据创建一个 CSV 文件。

```
sample.csv
Dan,50
Dave,20
Sam,30 
```

然后我们把文件放到hdfs

```
hadoop fs -copyFromLocal ./sample.csv /user/me/sample.csv 
```

现在我们进入 hive 并使用我们的数据创建表。

```
$ hive
hive> Create EXTERNAL TABLE IF NOT EXISTS sample(NAME STRING, Grade int)
hive> ROW FORMATED DELIMITED FILED TERMINATED BY ','
hive> STORED AS TEXTFILE location '/user/me/sample.csv'; 
```

# wcf - ServiceSecurityContext.Current.WindowsIdentity.Name 为空

> ID：12181339
> 
> 赞同：1
> 
> 时间：2012-08-29T15:23:55.777
> 
> 标签：wcf

我正在使用带有证书身份验证的消息安全性

```
 <basicHttpBinding>
            <binding name ="customBinding">
                <security mode="Message">
                    <message clientCredentialType="Certificate"/>
                </security>
            </binding>
        </basicHttpBinding> 
```

我正在尝试记录客户端用户名，当我这样做时：

ServiceSecurityContext.Current.WindowsIdentity.Name

我得到空值。如何在使用此安全模式时检索客户端的用户名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:42:48.937

```
 <basicHttpBinding>
        <binding name="BasicHttpEndpointBinding">
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows" />
          </security>
        </binding>
      </basicHttpBinding> 
```

ServiceSecurityContext 类使用 windows 身份验证

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-05T10:02:23.840

我没有什么要测试的，但是您可以尝试将传输窗口与消息证书混合。我真的不确定，如果这是可能的。

```
<basicHttpBinding>
  <binding name ="customBinding">
     <security mode="Message">  
             <message clientCredentialType="Certificate" />  
             <transport clientCredentialType="Windows"/>
      </security>    
   </binding>
</basicHttpBinding> 
```

并为您的**web.config**：

```
<system.web><authentication mode="Windows"/></system.web> 
```

供参考：message-Windows [https://docs.microsoft.com/en-us/dotnet/framework/wcf/feature-details/message-security-with-a-windows-client](https://docs.microsoft.com/en-us/dotnet/framework/wcf/feature-details/message-security-with-a-windows-client)

消息证书[https://docs.microsoft.com/en-us/dotnet/framework/wcf/feature-details/message-security-with-a-certificate-client](https://docs.microsoft.com/en-us/dotnet/framework/wcf/feature-details/message-security-with-a-certificate-client)

我将客户端的用户名与带有传输安全性（ssl）的basicHttpBinding绑定：

```
<security mode="Transport">
     <transport clientCredentialType="Windows"/>
</security> 
```

并且没有 ssl：

```
<security mode="TransportCredentialOnly">
     <transport clientCredentialType="Windows"/>
</security> 
```

确保**IIS**配置了 Authentication - **WindowsAuthentication Enabled**。

希望这对正在处理这个问题的人有所帮助。

# objective-c - 条件看起来是假的......为什么它是真的？

> ID：12181342
> 
> 赞同：1
> 
> 时间：2012-08-29T15:24:02.437
> 
> 标签：objective-c

这是几行代码... currentPage 是一个 NSInteger，imageViewHolder 是一个 NSMutableArray。

```
 NSLog(@"currentPage: %d, imageViewHolderCount: %d", currentPage, [imageViewHolder count]);
    if(currentPage < [imageViewHolder count] - 1)       
    {
        NSLog(@"%d < %d - 1", currentPage, [imageViewHolder count]);
        tempView = [imageViewHolder objectAtIndex:currentPage + 1];
        NSLog(@"doesn't get here, crashed.");   //this doesn't get logged because of crash.

        //do other stuff here
    } 
```

由于索引超出范围，我在“tempView = ...”行崩溃。这是我得到的输出：

```
currentPage: 0, imageViewHolderCount: 0
0 < 0 - 1
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 1 beyond bounds for empty array'
*** First throw call stack:
(0x339bd88f 0x324af259 0x339069db 0x48f1b 0x48c1b 0x35603a85 0x35603409 0x35602c57 0x35716b0f 0x3560424d 0x4abfb 0x324ab175 0x43f77 0x45b91 0x479a7 0x36bff 0x285ed 0x35604ecb 0x32935933 0x33991a33 0x33991699 0x3399026f 0x339134a5 0x3391336d 0x32e91439 0x35608e7d 0xfa01 0xf9c0) 
```

我确定我遗漏了一些明显的东西......为什么我的 if 语句被评估为真的？我相当肯定 0 实际上大于 -1 :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T15:29:25.120

问题是这`count`是一个**无符号**类型。当您从无`1`符号零中减去时，您最终会得到一个非常大的正数¹而不是`-1`.

将条件替换为使用加法的等效表达式来避免该问题：

```
if((currentPage+1) < [imageViewHolder count]) ... 
```

* * *

¹大多数现代计算机中用于表示负数的`-1`2 [-s 补码](http://en.wikipedia.org/wiki/Two%27s_complement)表示的值是完全由 1 组成的二进制数。当这个数字被重新解释为一个无符号的 32 位值时，它变成`2^32-1`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:30:53.457

是的，但 0 远小于 MAX_INT。您正在使用无符号整数（我必须仔细检查标准是否将其定义为 MAX_INT 或恰好是 MAX_INT 的未定义行为，但无论哪种情况，它都不是您的意思）。我怀疑如果你查看你的编译器输出，会有一个关于这种效果的警告（永远不允许在 ObjC 代码中出现任何警告）。

另请参见[unsigned long 0 < -1?](https://stackoverflow.com/questions/1415525/unsigned-long-0-1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:28:23.653

这是一个很长的镜头......但试着像这样写你的条件：

```
(currentPage < ([imageViewHolder count] - 1)) 
```

也许问题是编译器像这样对它进行分组

```
((currentPage < [imageViewHolder count]) - 1) 
```

(0 < 0) 返回false(0)，然后减1，一直停留在-1，和0不同，所以返回true

# android - 在 Android 的 Twitter 上发布后应用程序退出？

> ID：12181343
> 
> 赞同：0
> 
> 时间：2012-08-29T15:24:02.543
> 
> 标签：android, twitter

我正在开发一个基本的 android 应用程序，其中我在我的个人资料上的 twitter 上发布了一个小文本字符串。问题是，在 twitter 上发布后我的应用程序退出了。我在早期的应用程序中使用了相同的代码，但现在它不起作用。请让我知道我在做什么错误。

下面的代码是 PrepareRequestTokenActivity.java

```
/**
 * Prepares a OAuthConsumer and OAuthProvider 
 * 
 * OAuthConsumer is configured with the consumer key & consumer secret.
 * OAuthProvider is configured with the 3 OAuth endpoints.
 * 
 * Execute the OAuthRequestTokenTask to retrieve the request, and authorize the request.
 * 
 * After the request is authorized, a callback is made here.
 * 
 */
public class PrepareRequestTokenActivity extends Activity {

    public static boolean isTweetCompleted = false;
    public static int  checkvalue=0;
    final String TAG = getClass().getName();

    private OAuthConsumer consumer; 
    private OAuthProvider provider;
    private boolean _isProcessCompleted;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.twitter_dialog);
        checkvalue=this.getIntent().getIntExtra("check",0);
        @SuppressWarnings("unused")
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
        try {
            this.consumer = new CommonsHttpOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
            this.provider = new CommonsHttpOAuthProvider(Constants.REQUEST_URL,Constants.ACCESS_URL,Constants.AUTHORIZE_URL);
        } catch (Exception e) {
        }
        new OAuthRequestTokenTask(this,consumer,provider).execute();
        _isProcessCompleted = true;
    }

    /**
     * Called when the OAuthRequestTokenTask finishes (user has authorized the request token).
     * The callback URL will be intercepted here.
     */
    @Override
    public void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        _isProcessCompleted = true;
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
        final Uri uri = intent.getData();
        if (uri != null && uri.getScheme().equals(Constants.OAUTH_CALLBACK_SCHEME)) {
            new RetrieveAccessTokenTask(this,consumer,provider,prefs).execute(uri);
        }
    }

    @Override
    protected void onResume() {
        if(!_isProcessCompleted)
            finish();
        else 
            _isProcessCompleted = false;
        super.onResume();
    }

    public class RetrieveAccessTokenTask extends AsyncTask<Uri, Void, Void> {

        private Context context;
        private OAuthProvider provider;
        private OAuthConsumer consumer;
        private SharedPreferences prefs;

        public RetrieveAccessTokenTask(Context context, OAuthConsumer consumer,OAuthProvider provider, SharedPreferences prefs) {
            this.context = context;
            this.consumer = consumer;
            this.provider = provider;
            this.prefs=prefs;
        }

        /**
         * Retrieve the oauth_verifier, and store the oauth and oauth_token_secret 
         * for future API calls.
         */
        @Override
        protected Void doInBackground(Uri...params) {
            final Uri uri = params[0];
            final String oauth_verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER);

            try {
                provider.retrieveAccessToken(consumer, oauth_verifier);
                final Editor edit = prefs.edit();
                edit.putString(OAuth.OAUTH_TOKEN, consumer.getToken());
                edit.putString(OAuth.OAUTH_TOKEN_SECRET, consumer.getTokenSecret());
                edit.commit();              
                String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
                String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

                consumer.setTokenWithSecret(token, secret);
                //------------------------------------------------------------------------
                //  context.startActivity(new Intent(context,WeddingRituals.class));            
                //------------------------------------------------------------------------
                executeAfterAccessTokenRetrieval(prefs);

            } catch (Exception e) {
            }

            **PrepareRequestTokenActivity.this.finish();**
            return null;
        }
    }   

    private void executeAfterAccessTokenRetrieval(SharedPreferences prefs) {
        String msg = getIntent().getExtras().getString("tweet_msg");
        try {
            TwitterUtils.sendTweet(prefs, msg);
            Message message = new Message();
            message.arg1 = 0;
            saveHandler.sendMessage(message);
        } catch (Exception e) {
        }
    }

    private Handler saveHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            if(msg.arg1 == 0){
                Toast.makeText(PrepareRequestTokenActivity.this, "Message posted successfully", Toast.LENGTH_LONG).show();
            }
        }
    };

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:51:50.390

我解决了这个问题，但这只是这一次，我取消注释调用我要来推特的返回活动的代码

```
context.startActivity(new Intent(context,WeddingRituals.class)); 
```

# jquery - 用于 3 级可折叠 jQuery 菜单的 Cookie

> ID：12181346
> 
> 赞同：0
> 
> 时间：2012-08-29T15:24:10.810
> 
> 标签：jquery, cookies

我正在使用此脚本来存储有关展开和折叠菜单级别的信息：

```
 $('#menu li:has(ul) a').click(function() {
$(this).next().toggle();
if ($(this).next().is(':visible')) {
    $.cookie($(this).text(), 'expanded');
}

if ($(this).next().is(':hidden')) {
    $.cookie($(this).text(), 'collapsed');
}
});

$('.item').each(function() {
    var verticalNav = $.cookie( $(this).children('a').text() );
    if (verticalNav == 'expanded') {
        $(this).find('ul').show();
    }
}); 
```

适用于 2 级菜单。例如：

```
<ul>
<li>item 1
    <li>item 1.1</li>
</li> 
```

但是当我把第三层：

```
<ul>
<li>item 1
    <li>item 1.1
        <li>item 1.1.1</li>
    </li>
</li> 
```

如果我只在第 2 级单击，当页面刷新时，会显示第 3 级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:06:02.460

请注意，您当前的解决方案仅存储最后单击的项目，而不是完整列表。

我建议在每个项目上放置 id，然后为展开的项目存储一个 id 数组。然后，在页面加载时，折叠所有内容，然后展开数组中的项目。或者存储折叠的项目并从展开的所有内容开始，以适合您的设计。当您获得更多项目时，遍历所有项目并每次比较文本会变得更慢。

我在[jsfiddle](http://jsfiddle.net/geSZz/13/)上放了一个小样本。

我有点过火了，并创建了一个对象来跟踪哪些项目被展开。我也在使用[store.js](https://github.com/marcuswestin/store.js)而不是 cookie；这是个人喜好。要将其更改为使用 cookie，只需将“store.get”或“store.set”替换为“$.cookie”即可。

# java - 自定义 JMeter 监听器

> ID：12181347
> 
> 赞同：0
> 
> 时间：2012-08-29T15:24:16.227
> 
> 标签：java, jmeter, qa, performance-testing

我想自定义 JMeter 侦听器“摘要报告”。
它给出平均、最小和最大经过时间。
我需要从每个请求经过的时间中减去一些常数值。
我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:26:39.730

最简单和最好的方法是编辑原始结果文件。就我个人而言，我喜欢使用 awk 来处理这类事情，但我想你也可以使用电子表格。

修改文件后，您可以将其重新加载到侦听器中。这不是超级直观，但是`Write results to file / Read from file`您可以在其中输入修改文件的路径，然后这将更新摘要（或任何其他侦听器）报告。

请记住在加载新文件之前使用 CTRL-E 从内存中清除现有数据，否则它将合并两个集合。

您还*可以*通过更改其源来自定义侦听器插件，但这对于此类用例来说是个坏主意。

# plugins - 如果 wordpress 小部件未激活，则显示消息

> ID：12181350
> 
> 赞同：0
> 
> 时间：2012-08-29T15:24:25.120
> 
> 标签：plugins, widget, wordpress

我正在编写插件，在那里我需要检查一个小部件是否在使用中。如果小部件正在使用中，那就太好了，但如果不是，我想显示错误消息。

我尝试的代码是这样的，但它不起作用。我没有收到任何消息。

```
function my_widgie_detect()  {
  if ( false === is_active_widget( 'testimonial' )) {
    // do something here if the widget isn't active;
    echo '<div id="message" class="updated fade"><p>No active</p></div>';
  } else {
    echo '<div id="message" class="updated fade"><p>Active</p></div>';
   }
}
add_action( 'wp_head', 'my_widgie_detect' ); 
```

那么如何识别小部件是否打开，如果没有，wordpress 会显示一条消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T23:16:03.323

我的一个客户想检查是否有搜索小部件从模板文件中激活到侧边栏中，所以这里是代码，我猜这就是你需要的！我希望它也能帮助其他人！

```
<?php if(is_active_widget(false,false,'search')){
echo "Search Widget is activated"; //We don't need to place the search box here, since we have already into the sidebar.
}else{
get_search_form();
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:59:52.357

让它像这样工作：

```
function check_widget() {
    if( is_active_widget( '', '', 'testimonial' ) ) { // check if search widget is used
        //yay! active
    } else { echo '<div id="message" class="updated fade"><p><strong>Widget is not active! Remembet to activate it here!</p></div>'; }
}

add_action( 'init', 'check_widget' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:53:34.950

您正在使用`wp_head`操作，因此您的消息 div 将位于 head 部分并且不会显示...查看[http://codex.wordpress.org/Plugin_API/Action_Reference](http://codex.wordpress.org/Plugin_API/Action_Reference)以使用其他操作，或者只是修改您的模板。

# c++ - 高阶位 - 使用它们并将 uint64_t 转换为 uint8_t

> ID：12181352
> 
> 赞同：9
> 
> 时间：2012-08-29T15:24:26.990
> 
> 标签：c++, c, assembly, bit-manipulation

假设您有一个 uint64_t，并且只关心 uint64_t 中每个字节的高位。像这样：

uint32_t：0000 ... 1000 0000 1000 0000 1000 0000 1000 0000 ---> 0000 1111

有没有比以下更快的方法：

```
 return
   (
     ((x >> 56) & 128)+
     ((x >> 49) &  64)+
     ((x >> 42) &  32)+
     ((x >> 35) &  16)+
     ((x >> 28) &   8)+
     ((x >> 21) &   4)+
     ((x >> 14) &   2)+
     ((x >>  7) &   1)
   ) 
```

又名移动 x，屏蔽，并为每个字节添加正确的位？这将编译成很多程序集，我正在寻找一种更快的方法……我使用的机器最多只有 SSE2 指令，我找不到有用的 SIMD 操作。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-29T15:43:39.570

正如我在评论中提到的，`pmovmskb`做你想做的事。以下是您可以使用它的方法：

MMX + SSE1：

```
movq mm0, input ; input can be r/m
pmovmskb output, mm0 ; output must be r 
```

上交所2：

```
movq xmm0, input
pmovmskb output, xmm0 
```

我寻找了新的方式

体重指数2：

```
mov rax, 0x8080808080808080
pext output, input, rax ; input must be r 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-29T18:55:39.380

```
return ((x & 0x8080808080808080) * 0x2040810204081) >> 56; 
```

作品。& 选择要保留的位。将所有位相乘到最高有效字节，然后移位将它们移动到最低有效字节。由于大多数现代 CPU 上的乘法运算速度很快，因此应该不会比使用汇编慢很多。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-29T15:56:43.443

以下是使用 SSE 内在函数的方法：

```
#include <xmmintrin.h>
#include <inttypes.h>
#include <stdio.h>

int main (void)
{
  uint64_t x
  = 0b0000000010000000000000001000000000000000100000000000000010000000;

  printf ("%x\n", _mm_movemask_pi8 ((__m64) x));
  return 0;
} 
```

适用于：

```
gcc -msse 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-29T15:34:03.733

您不需要所有单独的逻辑与，您可以将其简化为：

```
x &= 0x8080808080808080;
return (x >>  7) | (x >> 14) | (x >> 21) | (x >> 28) |
       (x >> 35) | (x >> 42) | (x >> 49) | (x >> 56); 
```

（假设函数返回类型是`uint8_t`）。

您还可以将其转换为展开的循环：

```
uint8_t r = 0;

x &= 0x8080808080808080;

x >>= 7; r |= x;
x >>= 7; r |= x;
x >>= 7; r |= x;
x >>= 7; r |= x;
x >>= 7; r |= x;
x >>= 7; r |= x;
x >>= 7; r |= x;
x >>= 7; r |= x;
return r; 
```

我不确定哪个在实践中会表现更好，尽管我倾向于打赌第一个 - 第二个可能会产生更短的代码但具有很长的依赖链。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-29T16:18:22.710

首先，您实际上并不需要这么多操作。您一次可以对多个位进行操作：

```
x = (x >> 7) & 0x0101010101010101; // 0x0101010101010101
x |= x >> 28;                      // 0x????????11111111
x |= x >> 14;                      // 0x????????????5555
x |= x >>  7;                      // 0x??????????????FF
return x & 0xFF; 
```

另一种方法是使用模数进行横向加法。首先要注意的`x % n`是 base 中的数字之和`n+1`，所以如果`n+1`是`2^k`，则添加 k 位组。如果你从 `t = (x >> 7) & 0x0101010101010101`上面开始，你想对 7 位的组求和，这`t % 127`就是解决方案。但`t%127`仅适用于高达 126\. 0x8080808080808080 的结果，以上任何内容都会给出不正确的结果。我已经尝试了一些更正，没有一个容易的。

尝试使用模数使我们处于可能只有前一个算法的最后一步的情况。我们想要的是保留两个不太重要的位，然后得到另一个的总和，按 14 分组。所以

```
ull t = (x & 0x8080808080808080) >> 7;
ull u = (t & 3) | (((t>>2) % 0x3FFF) << 2);
return (u | (u>>7)) & 0xFF; 
```

但是 t>>2 是 t/4 并且 << 2 是乘以 4。如果我们有`(a % b)*c == (a*c % b*c)`，那么`(((t>>2) % 0x3FFF) << 2)`就是`(t & ~3) % 0xFFFC`。但我们也有一个事实，即 a + b%c = (a+b)%c 如果它小于 c。所以我们有简单`u = t % FFFC`的 . 给予：

```
ull t = ((x & 0x8080808080808080) >> 7) % 0xFFFC;
return (t | (t>>7)) & 0xFF; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T16:17:40.280

这似乎有效：

```
return (x & 0x8080808080808080) % 127; 
```

# java - 光标定位

> ID：12181354
> 
> 赞同：2
> 
> 时间：2012-08-29T15:24:39.200
> 
> 标签：java, cursor, placement

我现在正在学习 Java 入门课程，对于我们的第一个程序之一，我们创建了一个程序来计算特许经营权内不同商店的总销售额和销售额百分比。现在，当我输入变量的值时，我的光标从 ex 行的开头开始。

```
_Profits for shackA:(instead of here) 
```

这是构成控制台界面的特定行：

```
double shackA, shackB, shackC;
System.out.print("Profits for Shack A: ");
shackA = scan.nextDouble();
System.out.print("Profits for Shack B: ");
shackB = scan.nextDouble();
System.out.print("Profits for Shack C: ");
shackC = scan.nextDouble(); 
```

有没有办法修改开始位置以获得更清晰的输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:28:56.430

尝试更换

```
System.out.print("Profits for Shack A: "); 
```

和

```
System.out.println("Profits for Shack A: "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:31:53.810

如果您可以切换到[`java.util.Console`](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)，则可以执行以下操作：

```
Console cons = System.console();
String inputA = cons.readLine("Profits for Shack A: ");
shackA = Double.parseDouble(inputA); 
```

当然，你需要做一些错误处理来处理用户输入“ABCD!!!”的情况。而不是双倍。

# javascript - 防止输入字段上的点击事件

> ID：12181359
> 
> 赞同：2
> 
> 时间：2012-08-29T15:24:54.947
> 
> 标签：javascript, jquery, cordova, dom-events

我正在为 iPad 开发一个 PhoneGap-App。在一个屏幕上，您必须填写一个包含大约 20 个文本字段的表格。由于输入字段仅对点击事件做出反应（延迟时间不长但令人讨厌），我尝试了以下操作：

```
$('input[type="text"], input[type=number], input[type=date], input[type="tel"], input[type=password], input[type="email"], input[type="url"], textarea, select').live("touchend", function(e) {
    if(!swipe) {
        $(this).focus();
    }
    swipe = false;
    return false;
}); 
```

（我检查`touchmove`事件中的滑动）

这可行，但现在我想阻止输入上的原始点击事件。问题是，当我使用该方法激活输入字段时`.focus()`，键盘会弹出并将页面向上滑动一点，然后`click`触发事件并激活比我想要的输入略低的另一个输入字段。

为了防止点击我已经尝试过：

```
$('input[type="text"], input[type=number], input[type=date], input[type="tel"], input[type=password], input[type="email"], input[type="url"], textarea, select').live("click", function(e) {
    return false;
}); 
```

但这也不起作用:(

在我毫不拖延地触摸它后，是否有另一个技巧可以立即激活输入字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:27:53.647

你可以试试这个

```
 $('input, textarea, select').click(function(event) {
    event.preventDefault();
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:26:13.247

您需要使用 preventDefault 来阻止默认操作：

```
 $('input[type="text"], input[type=number], input[type=date], input[type="tel"], input[type=password], input[type="email"], input[type="url"], textarea, select').live("click", function(e) {
        e.preventDefault();
    }); 
```

文档：[http ://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-09T13:45:08.803

它是停止传播。

```
$('input[type="text"], input[type=number], input[type=date], input[type="tel"], input[type=password], input[type="email"], input[type="url"], textarea, select').live("click", function(event) {
        event.stopPropagation();
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-07T21:42:25.033

我和你有同样的问题，并尝试实施所有其他发布的解决方案，发现它们都没有完全适合我。相反，我从所有先前的解决方案中借鉴了一些想法，发现这段代码解决了我的问题。

```
 $('input, textarea, select').click(function (event) {
        event.stopPropagation();
    }); 
```

# broadband - 如果使用多台机器，宽带帐户将被锁定

> ID：12181360
> 
> 赞同：0
> 
> 时间：2012-08-29T15:24:57.317
> 
> 标签：broadband

我已订阅当地有线电视提供商提供的宽带互联网连接。

通常，我使用装有 Windows 7 的笔记本电脑进行轻冲浪。我已经按照提供商的说明设置了宽带连接 (PPPoE)。

当我从笔记本电脑上拔下电缆并将其插入桌面并尝试通过在那里建立连接来使用它时，就会出现问题。我的帐户要么立即被锁定，要么即使它连接，当我将电缆连接回我的笔记本电脑时，它似乎肯定被锁定了。然后我必须打电话给提供者来解锁它:(

我确信提供商在每台机器上都存储了一些东西，并且不允许使用多台机器。这是一个真正的缺点，因为我不能使用我的桌面在一夜之间下载。

请指导我必须如何摆脱这种不便。

谢谢并恭祝安康 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T08:34:09.027

这可能是因为连接绑定到网卡的[MAC 地址](https://en.wikipedia.org/wiki/Mac_address)。如果电缆调制解调器有 USB 端口，您可以尝试使用该选项连接到 PC 和笔记本电脑上的 USB 端口 - 您可能必须在笔记本电脑和 PC 上安装驱动程序。

您可以尝试的另一个选项（如果任何系统有两个网卡）是设置[ICS（Internet 连接共享）](http://windows.microsoft.com/en-us/windows-vista/Using-ICS-Internet-Connection-Sharing)。ICS也可以设置在USB连接的cable modem+单网卡的场景中。

# android - 重命名内部存储中的文件

> ID：12181372
> 
> 赞同：9
> 
> 时间：2012-08-29T15:25:51.490
> 
> 标签：android, android-context, file-rename

在应用程序的内部存储中重命名文件的最佳/最简单方法是什么？我觉得有点奇怪，有一个`Context.deleteFile()`方法，但没有“移动”或“重命名”功能。我是否必须一直保存文件的内容，删除它，创建一个新文件，然后将内容复制到那个文件中？或者有没有办法在现有文件上复制文件？

更新（2012 年 8 月 30 日）：

根据以下建议的解决方案，我无法开始工作：

*   我有一个名为 shoppinglists.csv 的文件
*   然后我创建一个名为 shoppinglists.tmp 的新文件，并将 shoppinglists.csv 中的内容和一些新条目复制到其中。shoppinglist.tmp 文件是 shoppinglists.csv 文件的新版本
*   然后我删除旧的 shoppinglists.csv 文件
*   然后我需要将 shoppinglists.tmp 文件重命名为 shoppinglists.csv

我试过这个：

```
ctx.deleteFile("shoppinglists.csv");           <--- delete the old file
File oldfile = new File("shoppinglists.tmp");
File newfile = new File("shoppinglists.csv");
oldfile.renameTo(newfile); 
```

但是，这不起作用。在 deleteFile() 之后，什么都没有发生，剩下的就是新的 shoppinglists.tmp 文件。

我错过了什么？

注意：LogCat 中没有错误或任何内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T13:38:20.810

不要使用原始`File`构造函数，而是`getFileStreamPath`使用`Context`. 也就是说，做：

```
File oldfile = ctx.getFileStreamPath("shoppinglists.tmp");
File newfile = ctx.getFileStreamPath("shoppinglists.csv");
oldfile.renameTo(newfile); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:34:48.423

您需要使用`renameTo()`文件类的方法。

```
File testFile = new File ( "test.txt" ); // Assuming it is in Internal Storage
testFile.renameTo ( "newTest.txt" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:17:27.710

renameTO() 在我的环境中不起作用（Eclipse Indigo，带有 android 版本 2.3 的 AVD）。解决方案是全部跳过临时文件方法，因为在任何合理的时间范围内似乎都无法解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-24T02:53:30.833

我认为我们不能在内部存储环境中使用 File.renameTo() 方法。在此环境中重命名文件，可以执行以下操作： - 将旧文件的内容复制到新文件。- 删除旧文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-18T16:18:39.610

```
File file = new File("your old file/folder name");
File file2 = new File("your new file/folder name");
boolean success = file.renameTo(file2); 
```

# javascript - 匹配某个字符后的所有文本的正则表达式是什么？

> ID：12181373
> 
> 赞同：0
> 
> 时间：2012-08-29T15:25:52.650
> 
> 标签：javascript, regex

我知道这个问题已经被问过很多次了，但这些例子对我不起作用。

我试图在一个正则表达式中获得一小部分时间。我所拥有的是：

```
minute = new RegExp(":[0-9]{1,2}").exec(time).toString().replace(":", ""); 
```

如果不使用 .replace，我怎样才能完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:29:48.503

假设时间是格式，`NN:NN`那么可以像这样提取分钟：

```
minute = time.match(/\d{2}$/)[0]; 
```

或简单的拆分：

```
minute = time.split(':')[1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:29:07.130

使用捕获组仅获取您想要的内容。

```
var time = '12:29',
    minute = /:([0-9]{1,2})/.exec(time)[1];

// minute is "29" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T15:34:03.197

如果您还没有这样做，请将“时间”存储为[Date对象。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)然后您可以使用[getMinutes()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getMinutes)将分钟组件拉出。

```
minute = time.getMinutes(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T15:34:51.800

假设这`time`是一个像“10:15 AM”这样的时间字符串，您可以（并且应该）使用 Date 对象。这是适合这项工作的工具，它更灵活，因为它是用来处理日期/时间数据的。

```
var time = '10:15 AM';
// handle either a full date string OR a time string
var d = new Date(time);
if (isNaN(d.getTime()))
    var d = new Date('1/1/2012 '+time); 
```

试试看：http: [//jsfiddle.net/gsg8X/](http://jsfiddle.net/gsg8X/)

可能比尝试确定秒数是否存在要好，这可能会破坏正则表达式，或者使其变得比需要的更复杂。我认为您最好使用与日期/时间相关的工具来解析与日期/时间相关的数据。

**文档**

*   `Date`在 MDN - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T15:31:03.177

您需要某种位置锚来抓住字符串的最后一部分

```
(/:([0-9]{1,2}$)/) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T15:31:53.887

尝试这个：

```
minute = new RegExp(":([0-9]{1,2})").exec(time)[1]; 
```

这将匹配整个内容，但存储括号中匹配的任何部分以供您以后使用。因此`[1]`.

* * *

* * *

将以下内容留在此处，以防有人来寻找非 JavaScript 答案。

**这在javascript中不起作用，因为它不支持lookbehinds。**谢谢@999。

尝试使用积极的向后看。这样你甚至不需要更换:)

```
minute = new RegExp("(?<=:)[0:9]{1,2}").exec(time).toString(); 
```

`[0:9]{1,2}`是您实际要匹配的模式。`(?<=:)`只是确保它后面有一个冒号，而不实际消耗任何东西。

# php - 如何从 google 获取referer 搜索查询？

> ID：12181375
> 
> 赞同：11
> 
> 时间：2012-08-29T15:26:01.137
> 
> 标签：php, search-engine, google-search

就在两天前，以下代码用于从 google 获取搜索查询：

```
$refer = parse_url($_SERVER['HTTP_REFERER']);
$host = parse_url($_SERVER['HTTP_REFERER'], PHP_URL_HOST);
$query = parse_url($_SERVER['HTTP_REFERER'], PHP_URL_QUERY);

if(strstr($host,'www.google.com'))
{
    //do google stuff
    $qstart = strpos($query, 'q=') +2;
    $qend = strpos($query, '&', $qstart);
    $qlength = $qend - $qstart;
    $querystring = substr($query, $qstart, $qlength);
    $querystring = str_replace('q=','',$querystring);
    $keywords = explode('%20',$querystring);
    $keywords = implode(' ', $keywords);
    return $keywords;                      
    } 
```

但是，现在没有了。我使用 echo($query) 对其进行了测试，看来谷歌处理引荐来源网址查询请求的方式已经改变。以前包含 $query

`"q=term1%20term2%20term3%20...`

但是，现在，当回显 $query 时，我得到以下输出：

```
sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CCsQFjAB&url=http%3A%2F%2Fexample.com%2F&ei=vDA-UNnxHuOjyAHlloGYCA&usg=AFQjCNEvzNXHULR0OvoPMPSWxIlB9-fmpg&sig2=iPinsBaCFuhCLGFf0JHAsQ 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T04:52:42.570

很抱歉，这是全球 Google 政治的变化。

见网页链接

[http://googlewebmastercentral.blogspot.ru/2012/03/upcoming-changes-in-googles-http.html](http://googlewebmastercentral.blogspot.ru/2012/03/upcoming-changes-in-googles-http.html)

这意味着如果用户登录 Google 帐户。您可以自己尝试一下：如果您的 Google 搜索 url 以 https:// 开头，这意味着 Google 将隐藏一些临时参数以保护隐私。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T05:19:25.093

```
 // take the referer
$thereferer = strtolower($_SERVER['HTTP_REFERER']);
// see if it comes from google
if (strpos($thereferer,"google")) {
    // delete all before q=
    $a = substr($thereferer, strpos($thereferer,"q="));     
    // delete q=
    $a = substr($a,2);
    // delete all FROM the next & onwards
    if (strpos($a,"&")) {
        $a = substr($a, 0,strpos($a,"&"));
    }   
    // we have the results.
    $mygooglekeyword = urldecode($a);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T19:52:13.693

本周我也遇到了同样的问题。我不确定这是否仍然与您相关，但我发现 Google 为大约一年前登录的用户启动了 SSL（安全套接字层）搜索，看起来 SSL 搜索现在可能适用于所有谷歌搜索查询。当我对此进行测试时，我没有登录 Google 并且使用的是 Firefox，但仍然获得了加密的引用查询。

本文有一些有用的背景和一些在没有特定搜索词数据的情况下工作的想法：[http ://searchenginewatch.com/article/2227114/5-Tips-for-Handling-Not-Provided-Data](http://searchenginewatch.com/article/2227114/5-Tips-for-Handling-Not-Provided-Data)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-04T19:17:57.860

谷歌为所有搜索启动了 SSL，信息只能通过谷歌分析获得。但是，对于付费活动搜索引擎（如 Google、Bing 和 Yahoo）使用查询字符串参数（如[utm_parameters）](https://support.google.com/analytics/answer/1033863)，您可以从参数**utm_term**访问搜索查询。

# eclipse - nsight eclipse for linux 调试错误

> ID：12181382
> 
> 赞同：0
> 
> 时间：2012-08-29T15:26:33.357
> 
> 标签：eclipse, cuda, nsight, cuda-gdb

我正在使用 RHEL 6.2 和 nsight eclipse 版本来调试我的 cuda 程序。调试模式存在问题，即定制Eclipse 上的cuda-gdb。当 PC 进入第一个 Cuda API 调用时，调试终止并出现以下警告：

```
warning: Can not parse XML OS data; XML support was disabled at compile time 
warning: Error removing breakpoint 0 
```

我还在 eclipse bugs 中找到了相关的 bug 报告，但似乎它已被转发到 gdb： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=350426](https://bugs.eclipse.org/bugs/show_bug.cgi?id=350426)

经过一番观察，似乎 libexpat.so 应该在编译时链接到 cuda-gdb。您是否能够解决此问题？

我系统上的 cuda-gdb 有这样的输出：

```
[cbekar@ergo Research]$ ldd /usr/local/cuda/bin/cuda-gdb
    linux-vdso.so.1 =>  (0x00007fff8e1ff000)
    libncurses.so.5 => /lib64/libncurses.so.5 (0x0000003498600000)
    libz.so.1 => /lib64/libz.so.1 (0x000000348e600000)
    libm.so.6 => /lib64/libm.so.6 (0x000000348da00000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x000000348e200000)
    libdl.so.2 => /lib64/libdl.so.2 (0x000000348de00000)
    libutil.so.1 => /lib64/libutil.so.1 (0x000000349da00000)
    libpython2.6.so.1.0 => /usr/lib64/libpython2.6.so.1.0 (0x0000003499200000)
    libc.so.6 => /lib64/libc.so.6 (0x000000348d600000)
    libtinfo.so.5 => /lib64/libtinfo.so.5 (0x000000349e600000)
    /lib64/ld-linux-x86-64.so.2 (0x000000348d200000) 
```

但是，这里暗示了 ldd 应该是什么样的： [https ://bugs.archlinux.org/task/27841](https://bugs.archlinux.org/task/27841)

附言。我也知道 Cuda SDK 5.0 RC 与我的 RHEL 6.2 不兼容；Nsight 被记录为仅与 RHEL 6.0 和 6.1 兼容，而下载链接显示为 RHEL 6.x。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:52:50.333

（重新发布我的评论作为答案，以防其他人偶然发现此线程）。

不幸的是，由于一些技术限制，CUDA 调试器需要 Linux 和 Mac 平台上的专用 GPU。根本问题是在断点处暂停 GPU 可能会在桌面环境尝试在暂停的 GPU 上进行渲染时挂起。

“警告：无法解析...”不是错误，它只是关于 GDB 风格的消息，用作 cuda-gdb 的基础。它绝不会限制 cuda-gdb 和 Nsight Visual Debugger 中可用的功能。

# azure - Windows Azure 虚拟机上的被动 FTP

> ID：12181384
> 
> 赞同：7
> 
> 时间：2012-08-29T15:26:39.123
> 
> 标签：azure, ftp, cloud, virtual-machine

我在 Windows 2008 虚拟机上的 IIS7 中设置了 FTP。我在端点中启用了端口 21，并且 Active FTP 工作得很好。但我不确定如何通过被动连接。我遵循了 Microsoft 文档（在 IIS 中启用了一系列端口，并在本地防火墙上允许相同的端口）我还在 Azure 管理的端点中允许了这些端口。这没有用。

我在一个非官方的 MS 论坛上读到，MS 不允许在 Azure 中使用被动 FTP。这是真的？如果没有，有人可以指导我找到正确的文档吗？

谢谢

**解决方案 我按照[本文中的说明进行操作。](http://www.itq.nl/blogs/post/Walkthrough-Hosting-FTP-on-IIS-75-in-Windows-Azure-VM.aspx) 我遇到的问题是在执行此操作后我没有停止并启动 FTP 服务。否则它不会工作。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T17:10:41.287

被动 FTP 在 Windows Azure 虚拟机中应该可以正常工作。但是，您可能无法选择较大的端口范围，因为您在 Azure 中最多只能有 25 个终结点，这可能是被动 FTP 的限制。这个[论坛讨论](http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforWindows/thread/22ebe7d3-6e12-4b44-8364-8a3c482e740c)更多地谈论它。

你可以找到[这个博客](http://www.itq.nl/blogs/post/Walkthrough-Hosting-FTP-on-IIS-75-in-Windows-Azure-VM.aspx)，它解释了他们如何在 Windows 虚拟机上使用 IIS 配置被动 FTP。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T16:58:48.503

关于上面引用的帖子的附加信息（[http://www.itq.nl/blogs/post/Walkthrough-Hosting-FTP-on-IIS-75-in-Windows-Azure-VM.aspx](http://www.itq.nl/blogs/post/Walkthrough-Hosting-FTP-on-IIS-75-in-Windows-Azure-VM.aspx)） - 在最后它说您需要使用以下命令在 IIS 中添加端口范围：

```
appcmd set config /section:system.ftpServer/firewallSupport \
    /lowDataChannelPort:7000 /highDataChannelPort:7014 
```

这对我来说失败了，因为端口范围被锁定，所以它只能在根 IIS 节点上设置。错误是：

```
Support (Your site name) /lowDataChannelPort:5000 /highDataChannelPort:6000
ERROR ( message:Can not set attribute "lowDataChannelPort" to value "5000".. Rea
son: This configuration section cannot be used at this path. This happens when t
he section is locked at a parent level. Locking is either by default (overrideMo
deDefault="Deny"), or set explicitly by a location tag with overrideMode="Deny"
or the legacy allowOverride="false".
. ) 
```

如果您遍历 IIS 节点到根服务器节点，选择功能视图，然后选择 FTP 防火墙支持，您可以使用文本框在此处设置数据通道端口范围，无需编写脚本，并避免此错误。完成此操作后，您需要重新启动 ftp 服务（如上所述），被动 FTP 运行良好。

我在这里添加了这个额外的答案，因为无法运行 appcmd 命令来设置端口范围让我在圈子里转了几个小时，这可能有助于其他人避免同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T21:32:18.483

我认为其他人可能会遇到这种情况。如果您收到指示父级已锁定的安全消息，只需返回您的 FTP 并关闭“需要 SSL 连接”。然后重新运行命令。设置您的端点，打开防火墙等。然后进入并重新打开需要 SSL 连接！

# php - 未定义索引（Laravel）

> ID：12181386
> 
> 赞同：6
> 
> 时间：2012-08-29T15:26:42.683
> 
> 标签：php, function, foreach, laravel

我把头撞在桌子上，试图弄清楚为什么这个 PHP 代码会导致这个错误：`Undefined index: arr`. 我正在使用 Laravel，这段代码在它之外就像黄金一样工作，但在 Laravel 内部，它返回未定义的索引错误。

这是代码：

```
function set_pilots_array($line_array)
{
    $airports = $this->airports;
    $pilots = $this->pilots;
    foreach($airports as $airport)
    {
        if($airport == $line_array[11] || $airport == $line_array[13])
        {
            if($airport == $line_array[11])
            {
                $deparr = "dep";
            }
            if($airport == $line_array[13])
            {
                $deparr = "arr";
            }
            $this->pilots[$deparr][] = array($line_array[0], $line_array[11], $line_array[13], $line_array[7], $line_array[5], $line_array[6], $line_array[8]);
        }
    }
}

function get_pilots_count()
{
    $count = count($this->pilots['dep']) + count($this->pilots['arr']);
    return $count;
} 
```

这与我的另一个问题有关：[抓取和分解数据](https://stackoverflow.com/questions/12168543/grab-and-explode-data) 它使用以下代码从数据文件中提取数据：

```
elseif($data_record[3] == "PILOT")
{
    $code_obj->set_pilots_array($data_record);
} 
```

稍后会这样做：

```
$code_count = $code_obj->get_pilots_count(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T15:31:08.413

你没有`$this->pilots['arr']`设置。换句话说，如果您查看 的输出`var_dump($this->pilots);`，您将看到没有`arr`键值对。我建议你这个修复：

```
$count = count((isset($this->pilots['dep']) ? $this->pilots['dep'] : array())) + count((isset($this->pilots['arr']) ? $this->pilots['arr'] : array())); 
```

实际上，这不是一个修复 - 这更像是一个 hack。为了使您的代码**正确**，我建议您为这些`$pilots['arr']`和值设置默认`$pilots['dep']`值：

```
function set_pilots_array($line_array)
{
    $airports = $this->airports;
    $pilots = $this->pilots;

    foreach (array('dep', 'arr') as $key) 
    {
        if (!is_array($pilots[$key]) || empty($pilots[$key])) 
        {
            $pilots[$key] = array();
        }
    }

    // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:29:19.577

好吧，代码太少，无法真正弄清楚发生了什么，但根据我所看到的：

```
if($airport == $line_array[13]) 
```

这个条件永远不会被满足，所以`$deparr = "arr";`永远不会发生，因此

```
count($this->pilots['arr']); 
```

给出未定义的索引错误

您可以通过以下方式轻松抑制这种情况：

```
$count = count(@$this->pilots['dep']) + count(@$this->pilots['arr']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:39:50.267

您的问题是您直接访问所有索引而没有先检查它们是否存在。

假设在 laravel 中某些东西导致数组没有被填充。

为了解决这个问题，您应该使用 a 遍历数组`foreach`，或者`if(!empty($line_array[13])) {}`在访问它之前执行 a 。

# javascript - 使用 ajax 更新数组表（只是更改了值）

> ID：12181392
> 
> 赞同：0
> 
> 时间：2012-08-29T15:27:01.277
> 
> 标签：javascript, ajax, jquery, dynamic

我只想用ajax更新数据变化，我每5秒加载一次数据

我有两页，第一页包含数据（数组表），第二页显示结果，如代码所示。我希望此页面仅更改更改的值

对于第一页中的代码，我从服务器（xml 文件）加载数据并将其存储在数组表中。

请帮帮我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:35:25.493

```
$.ajax({
    url: "gettable.php",
    success: function(data) {
        $("#data").text(data); // this is assuming #data is a td or div like element
    }
}); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:58:29.907

可以使用 仅更新新数据`$.ajax`。但是没有任何神奇的方法可以做到这一点。您必须跟踪服务器上请求之间更改的项目，并仅返回 JSON 格式的项目。比，在`success`回调中 - 遍历所有接收到的元素（例如，这可能是一个数组，其中包含要更新的项作为键和值作为该项的新值）并更新它们。

# database - oracle查询检查其他表中不存在

> ID：12181393
> 
> 赞同：0
> 
> 时间：2012-08-29T15:27:08.707
> 
> 标签：database, oracle

我有以下查询：

```
select vw.CONFERENCEID, alert.ALERTID, del.CHANNELID, del.DOCUMENTTEMPLATEID,
       vw.starttime, vw.CONFERENCEID, alert.ALERTATTRIBUTEID,
       alert.ALERTCATEGORYID, alert.ATTACHMENT, alert.ATTACHMENTLOCATION,
       alert.ATTACHMENTNAME
  from TBLMCONFERENCE vw,
       TBLMSYSTEMALERTS alert,
       TBLMALERTDELIVERYREL del,
       tblmstandardmaster sm 
 WHERE alert.Alertid = del.alertid
   and sm.masterid = del.CHANNELID
   and alert.SYSTEMGENERATED = 'N'
   and alert.alertid not in (
       select sent.ALERTID
         from TBLMSENTALERTHISTORY sent
        where sent.REFACCOUNTID = vw.conferenceid
          and sent.ALERTID = alert.ALERTID
          and sent.CHANNELID = del.CHANNELID
          and sent.RESETFLAG = 'N') 
```

`TBLMSENTALERTHISTORY`即使表中存在匹配记录，我也会获取记录。

这个查询有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:11:23.787

我不确定你为什么要获取数据，也许你可以用几个表和插入来构建一个小例子。

但是，我可以指出您对运算符的使用不是标准的：在大多数情况下，您不应该使用and运算符`NOT IN`将子查询连接到主查询（这是多余的）。相反，你会写：`IN``NOT IN`

```
SELECT *
  FROM TBLMCONFERENCE vw,
       TBLMSYSTEMALERTS alert,
       TBLMALERTDELIVERYREL del,
       tblmstandardmaster sm
 WHERE alert.Alertid = del.alertid
   AND sm.masterid = del.CHANNELID
   AND alert.SYSTEMGENERATED = 'N'
   AND (alert.alertid, del.CHANNELID, vw.conferenceid)
       NOT IN (SELECT sent.ALERTID, sent.CHANNELID, sent.conferenceid
                 FROM TBLMSENTALERTHISTORY sent
                WHERE sent.RESETFLAG = 'N') 
```

在您的情况下，您可以直接使用您的子查询`NOT EXISTS`：

```
SELECT *
  FROM TBLMCONFERENCE vw,
       TBLMSYSTEMALERTS alert,
       TBLMALERTDELIVERYREL del,
       tblmstandardmaster sm
 WHERE alert.Alertid = del.alertid
   AND sm.masterid = del.CHANNELID
   AND alert.SYSTEMGENERATED = 'N'
   AND NOT EXISTS
          (SELECT sent.ALERTID
             FROM TBLMSENTALERTHISTORY sent
            WHERE sent.REFACCOUNTID = vw.conferenceid
              AND sent.ALERTID = alert.ALERTID
              AND sent.CHANNELID = del.CHANNELID
              AND sent.RESETFLAG = 'N') 
```

请注意，[由于 NULL](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3aNO%3a%3aP11_QUESTION_ID:442029737684)`NOT IN` ，通常和`NOT EXISTS`不等效。

# php - 用户同时登录网站和谷歌应用

> ID：12181395
> 
> 赞同：1
> 
> 时间：2012-08-29T15:27:14.893
> 
> 标签：php, web, single-sign-on

我需要实现的目标如下：我有一个可以通过 mycompany.org 访问的网站。我还有一个通过 google.com/a/mycompany.org 访问的 google 应用程序帐户。我需要的是用户使用他们的谷歌应用程序身份和密码（即用户名@mycompany.org）登录网站。之后，他们只需单击一个链接即可访问他们的谷歌应用程序帐户，而无需再次登录。

所以基本上他们需要同时登录网站和谷歌应用程序。这可能与一些谷歌应用程序 API 吗？

我正在使用 PHP。

# asp.net - Safari 的元刷新

> ID：12181399
> 
> 赞同：1
> 
> 时间：2012-08-29T15:27:25.007
> 
> 标签：asp.net, safari, refresh, meta-tags, page-refresh

我使用了元刷新，但它不适用于“Safari”。我能做些什么？

```
<meta http-equiv="refresh" content="5;URL='http://example.com/'"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:42:51.537

根据我在谷歌上找到的；这可能是过去 Safari 中的一个错误，但许多人声称它已得到解决。

还有[人](http://hintsforums.macworld.com/archive/index.php/t-43535.html)提到可能是 Safari 中禁用了此特定标头。

如果以上都不起作用，您可以随时使用 javascript 进行重定向：

```
function redirect()
{
    setTimeout(function(){window.location='otherpage.html'},5000);//5 secs
}

window.onload=redirect; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:32:43.673

Safari 不支持它。而且你不是唯一一个这样问的人。有两种可能性：

1.  制作一个按钮让用户刷新页面
2.  使用 Ajax 能够更新您网站的部分内容

希望这可以帮助！

# php - 如何使用自己的 SMTP 服务器 PHP 邮件

> ID：12181410
> 
> 赞同：4
> 
> 时间：2012-08-29T15:28:32.747
> 
> 标签：php, email, smtp

我正在使用默认的 PHP[`mail()`](http://php.net/manual/en/function.mail.php)函数来发送电子邮件，如下所示。我有两个电子邮件服务器。如何设置我的代码以使用这两个邮件服务器？我在 Linux 上运行我的 PHP 代码。

```
mail($currEmail, $HOT_EMAIL_SUBJECT, $body, 'From: '.$pollsConfig_senderEmail); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:32:31.030

使用[PEAR::Mail](http://pear.php.net/manual/en/package.mail.mail.intro.php)，您可以使用它指定一个 SMTP 服务器。

```
$headers = array ('From'    => $from,
                  'To'      => $to,
                  'Subject' => $subject);

$obj = Mail::factory ('smtp',
                       array ('host' => $host,
                              'port' => $port));

$obj->send ($to, $headers, $body); 
```

# php - PHP / MySQL忽略小数点右侧的数字

> ID：12181414
> 
> 赞同：2
> 
> 时间：2012-08-29T15:28:45.760
> 
> 标签：php, mysql, floating-point

我编写了一个代码，让用户对两个选项中的一个进行投票，并使用修改后的 Elo 评分系统计算分数。但是，当我投票支持任一选项时，小数点右侧的数字将被忽略。我添加了 floatval 函数，但没有帮助。

```
$query = "SELECT pic,score,id FROM nfl
    JOIN (SELECT r1.random_id
         FROM nfl_map AS r1
         JOIN (SELECT (RAND() *
                      (SELECT MAX(row_id)
                         FROM nfl_map)) AS row_id)
               AS r2
        WHERE r1.row_id >= r2.row_id
        ORDER BY r1.row_id ASC
        LIMIT 1) as rows ON (id = random_id)";

    $query_2 = "SELECT pic,score,id FROM nfl
    JOIN (SELECT r1.random_id
         FROM nfl_map AS r1
         JOIN (SELECT (RAND() *
                      (SELECT MAX(row_id)
                         FROM nfl_map)) AS row_id)
               AS r2
        WHERE r1.row_id >= r2.row_id
        ORDER BY r1.row_id ASC
        LIMIT 1) as rows ON (id = random_id)";
    $res_2 = $mysqli->query($query_2);
    if (!$res_2) die ("Result display failed: " . $mysqli->errno . " - " . $mysqli->error);
    $pic_2 = $res_2->fetch_assoc();
    $id_2 = $res_2->fetch_assoc();
    $score_2 = $res_2->fetch_assoc();

    $res_1 = $mysqli->query($query);
    if (!$res_1) die ("Result display failed: " . $mysqli->errno . " - " . $mysqli->error);
    $pic_1 = $res_1->fetch_assoc();
    $id_1 = $res_1->fetch_assoc();
    $score_1 = $res_1->fetch_assoc();
    $Ra = $score_1;
    $Rb = $score_2;
    $calc_pow_1 = (($Rb - $Ra) / 400);
    $calc_pow_2 = (($Ra - $Rb) / 400);
    $float_calc_pow_1 = floatval($calc_pow_1);
    $float_calc_pow_2 = floatval($calc_pow_2);
    $Ea = 1 / (1 + pow(10,$float_calc_pow_1));
    $Eb = 1 / (1 + pow(10,$float_calc_pow_2));
    $float_Ea = floatval($Ea);
    $float_Eb = floatval($Eb);

    // if user votes for picture no. 1
    if (isset($_POST['vote_1']) && isset($_POST['id']) && isset($_POST['score']))
    {
    $id = $_POST['id'];
    /* $score = $_POST['score'];
    $pic = $_POST['pic']; */
    //$mod = 2 * $Eb;
    $K = 4;
    $float_mod_1 = floatval($K * (1 - $float_Ea));

    $query = "UPDATE nfl SET score=?+$float_mod_1 WHERE id=?";
    // $score_new = $_POST['score'] + $mod;
    $score_new = $_POST['score'] + $float_mod_1;

    $stmt = $mysqli->prepare($query);
    $stmt->bind_param('di', $_POST['score'], $_POST['id']);
    $stmt->execute();
    if ($stmt->errno) {
        echo "Vote failed: " . $stmt->error();
    }
    else echo "Vote succeeded! New score of $id_1 is $score_new!

";
    $stmt->close();
    }

    // fetch picture no. 2
    // 
    // query to the database
    /* $query_2 = "SELECT pic,score,id FROM nfl
    JOIN (SELECT r1.random_id
         FROM nfl_map AS r1
         JOIN (SELECT (RAND() *
                      (SELECT MAX(row_id)
                         FROM nfl_map)) AS row_id)
               AS r2
        WHERE r1.row_id >= r2.row_id
        ORDER BY r1.row_id ASC
        LIMIT 1) as rows ON (id = random_id)";
    $res_2 = $mysqli->query($query_2);
    if (!$res_2) die ("Result display failed: " . $mysqli->errno . " - " . $mysqli->error);
    $pic_2 = $res_2->fetch_assoc();
    $id_2 = $res_2->fetch_assoc();
    $score_2 = $res_2->fetch_assoc(); */

    // if user votes for picture no. 2
    if (isset($_POST['vote_2']) && isset($_POST['id']) && isset($_POST['score']))
    {
    $id = $_POST['id'];
    /* $score = $_POST['score'];
    $pic = $_POST['pic']; */
    //$mod = 2 * $Ea;
    $K = 4;
    $float_mod_2 = floatval($K * (1 - $float_Eb));

    $query = "UPDATE nfl SET score=?+$float_mod_2 WHERE id=?";
    // $score_new = $_POST['score'] + $mod;
    $score_new = $_POST['score'] + $float_mod_2;

    /*  $query = "UPDATE nfl SET score=?+1 WHERE id=?";
    $score_new = $_POST['score'] + $mod; */

    $stmt = $mysqli->prepare($query);
    $stmt->bind_param('di', $_POST['score'], $_POST['id']);
    $stmt->execute();
    if ($stmt->errno) {
        echo "Vote failed: " . $stmt->error();
    }
    else echo "Vote succeeded! New score of $id_2 is $score_new!

";
    $stmt->close();
    } 
```

这是完整的代码，如果您需要查看它：[http ://snipt.org/vDhj2](http://snipt.org/vDhj2)

处理用户投票给第二个选项时的情况的代码几乎相同（除了 $Ea 更改为 $Eb 等）。MySQL中'score'行的属性如下：

```
float(8,3) not null 
```

谢谢。

编辑：我不再收到通知了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:33:28.613

> 既然只是通知，那有关系吗？如果是这样，我应该在我的代码中进行哪些更改？

需要修复错误编写的引发错误的代码。

您不能`$Rb = $score_2`在创建`$score_2`变量之前进行分配——这是一个错误。将它们按正确的顺序排列以解决该问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:34:30.470

我认为您只是错过了代码中的声明：

```
$res_1 = $mysqli->query($query);
if (!$res_1) die ("Result display failed: " . $mysqli->errno . " - " . $mysqli->error);
$pic_1 = $res_1->fetch_assoc();
$id_1 = $res_1->fetch_assoc();
$score_1 = $res_1->fetch_assoc();
$Ra = $score_1;
$Rb = $score_2; 
```

我在上面的代码中看不到`$score_2`任何定义，您尝试将其值分配给另一个变量。

出现警告是有原因的——忽略它们是个坏主意，因为它不可避免地会导致代码出错。在这种情况下，您只需在分配变量之前声明您的变量（即使它是 si,ply`$score_2=0;`如果这是默认值，但仍然要分配它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T15:35:19.100

在 PHP 中获得通知显然不是错误，它只是丑陋并且会加重您的负担......

您收到的通知意味着您正在使用未设置的变量，执行 a`var_dump(isset($score_2))`将导致 bool(false)，这意味着它未设置。

PHP 是一种动态类型的语言，这意味着您不必在使用它们之前声明变量，但是 - 如果您这样做，这是一个很好的做法，以避免此类可能导致错误的通知，您只需在之前声明变量使用它。

你期待一个数字吗？初始化它

```
$score_2 = 0; 
```

或者

```
$score_2 = null; 
```

取决于你的需要，如果你用 null 填充它，不要忘记在 mysql 中允许 NULL 值......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T13:23:46.770

好的，我找到了。fetch_assoc() 等是一个愚蠢的错误。这是修改后的代码：[http ://snipt.org/vEaj7](http://snipt.org/vEaj7)

# c - C - 使用像多维数组这样的字符指针数组会修改存储的数据吗？

> ID：12181421
> 
> 赞同：0
> 
> 时间：2012-08-29T15:29:08.393
> 
> 标签：c, string, pointers

我有一个代码，我从文本文件中读取并搜索特定单词（更具体地说是物种名称，例如“CH3”），然后读取下面列出的数据。我声明了一个函数`void read_data(char *fargs[], double *data)`，其中`fargs`是一个字符串数组，其中包含文件名和在 main 中声明的物种名称。然后为了确保我找到正确的物种名称`strstr`（例如“CH3”而不是“CH3ONO2”），我写了一个短循环在物种名称的两侧放置空格。

```
char *spec;
int x;
spec[0] = ' ';
while (fargs[1][x]) {
    spec[x+1] = fargs[1][x];
    x++;
}
spec[x+1] = ' ';
spec[x+2] = '\0'; 
```

所以问题是，当我这样做时，程序稍后会给出一个分段错误（不是 strstr 它在有或没有循环的情况下都可以正常工作）。虽然当我不包括这个循环并且只`fargs[1]`对程序进行所有操作时，但它有时会发现错误的物种名称，就像上面给出的假设一样。即使我只是包含循环但以后再也不使用`spec`它也不起作用，这表明我正在以某种方式`fargs[1]`在循环中进行修改。另外，为了澄清我稍后会使用`strcmp`，`fargs[1]`所以即使我只是在声明中包含空格，我也必须操作`fargs[1]`以类似的方式删除空格。我完全可以发布更多代码、程序输出、我正在读取的文本文件的示例等它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:41:05.067

实际上，您已经创建了一个 char 类型的指针，其中包含其他字符或字符串的地址。

但是您直接将字符放入该指针中，并将其视为数组。由于数组的行为类似于指针，但这并不意味着您所做的事情是正确的。

您必须使用 malloc(N*sizeof(char)) 来保存整个字符串。

所以在你的程序中可能正在访问那些它没有的地址，这就是它给出段错误的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:43:45.327

在查看此代码时，在我看来（除非我遗漏了什么）您没有为 分配任何空间`*spec`，也`x`从未定义过一个值，因此它完全是随机的，试试这个：

```
char *spec = NULL, *tmp;
int bff = 256, x = 0;

if(!(spec = malloc(bff)))
{
    //memory allocation failed
}
while (fargs[1][x])   
{
    if(bff <= x + 3)
    {
        bff *= 2;
        if(!(tmp = realloc(spec, bff)))
        {
            free(spec);
            //memory allocation failed
        }
        spec = tmp;
    } 
    spec[x + 1] = fargs[1][x];
    x++;
}
if(!(tmp = realloc(spec, x + 2)))
{
    free(spec);
    //memory allocation failed
}
spec = tmp;
spec[x + 1] = ' ';
spec[x + 2] = '\0';
//do what you need to do with spec
free(spec); 
```

}

这应该可以解决问题，虽然我在文本框中徒手输入了这个，但它可能需要一些调整，但这应该是一个好的开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:35:05.023

`spec`从未初始化，因此当您从 spec in 中读取时`spec[0]`，这会导致未定义的行为。

您的代码的另一个问题是它`x`从未被初始化。

# mysql - 带有 MySQL 的 ASP.NET MVC 4 EF5

> ID：12181428
> 
> 赞同：16
> 
> 时间：2012-08-29T15:29:25.943
> 
> 标签：mysql, asp.net-mvc, entity-framework

所以我刚刚拿起了 VS2012，我想用 EF5 启动一个 ASP.NET MVC 4 应用程序。

我的主机没有 MSSQL，所以我必须使用 MySQL。

如何告诉我的应用应该使用 MySQL？（我要么想使用 devart MySQL 连接器，要么想使用来自 mysql.com 的连接器）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-07T15:14:48.603

您需要使用连接字符串、DbProviderFactory 和 MySql 连接器 6.5.4 的自定义 DatabaseInitializer 设置配置。我已经详细介绍了[让 EF5 和 MySql 运行的完整步骤，包括我博客上的初始化程序代码](http://www.nsilverbullet.net/2012/11/07/6-steps-to-get-entity-framework-5-working-with-mysql-5-5/)。如果您需要 ASP.Net Membership Provider 解决方案，之前有人问过：[ASP.NET Membership/Role providers for MySQL？](https://stackoverflow.com/questions/2038993/asp-net-membership-role-providers-for-mysql/13247593#13247593)我还将在此处发布完整的 EF5 MySql 解决方案的解决方案。

MySql 连接器当前不支持 EF 5 迁移，并且 ASP.NET 仅支持 MS SQL 而不是 MySql 上的 SimpleMembership（MVC4 默认值）。以下解决方案适用于 Code First。

步骤是：

1.  从 NuGet 获取 EF 5
2.  从 NuGet (6.5.4) 或 MySql (6.6.4) 获取 MySql.Data 和 MySql.Data.Entity
3.  配置 MySql 数据提供者
4.  配置 MySql 连接字符串
5.  创建自定义 MySql 数据库初始化程序
6.  配置自定义 MySql 数据库初始化程序
7.  如果需要，配置 ASP.NET 成员资格

## 数据库提供者

```
<system.data>
 <DbProviderFactories>
  <remove invariant="MySql.Data.MySqlClient"/>
  <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient"
    description=".Net Framework Data Provider for MySQL" 
    type="MySql.Data.MySqlClient.MySqlClientFactory,MySql.Data" />
 </DbProviderFactories>
</system.data> 
```

## 连接字符串

```
<connectionStrings>
  <add name="ConnectionStringName" 
    connectionString="Datasource=hostname;Database=schema_name;uid=username;pwd=Pa$$w0rd;" 
    providerName="MySql.Data.MySqlClient" />
</connectionStrings> 
```

## 数据库初始化器

如果您使用来自 NuGet (6.5.4) 的 MySql 连接器，则需要自定义初始化程序。代码可在[http://brice-lambson.blogspot.se/2012/05/using-entity-framework-code-first-with.html](http://brice-lambson.blogspot.se/2012/05/using-entity-framework-code-first-with.html) 或[http://www.nsilverbullet.net/2012/11/07/获得6-steps-to-get-entity-framework-5-working-with-mysql-5-5/](http://www.nsilverbullet.net/2012/11/07/6-steps-to-get-entity-framework-5-working-with-mysql-5-5/)

然后将其添加到配置中

```
<configSections>
  <section name="entityFramework" 
    type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, 
    EntityFramework, Version=5.0.0.0, Culture=neutral, 
    PublicKeyToken=b77a5c561934e089" />
</configSections>
<entityFramework>
  <contexts>
      <context type="Namespace.YourContextName, AssemblyName">
         <databaseInitializer 
           type="Namespace.YourChosenInitializer, AssemblyName">
         </databaseInitializer>
      </context>
    </contexts>
    <defaultConnectionFactory 
      type="MySql.Data.MySqlClient.MySqlClientFactory,MySql.Data" />
</entityFramework> 
```

## ASP.NET 成员资格

```
<membership defaultProvider="MySqlMembershipProvider">
  <providers>
    <clear />
    <add name="MySqlMembershipProvider"
         type="MySql.Web.Security.MySQLMembershipProvider,
         MySql.Web, Version=6.5.4.0, PublicKeyToken=c5687fc88969c44d"
     autogenerateschema="true"
     connectionStringName="*NAME_OF_YOUR_CONN_STRING*"
     enablePasswordRetrieval="false"
     enablePasswordReset="true"
     requiresQuestionAndAnswer="false"
     requiresUniqueEmail="false"
     passwordFormat="Hashed"
     maxInvalidPasswordAttempts="5"
     minRequiredPasswordLength="6"
     minRequiredNonalphanumericCharacters="0"
     passwordAttemptWindow="10"
     passwordStrengthRegularExpression=""
     applicationName="/" />
  </providers>
</membership> 
```

让 AccountController 和 Views 工作：

1.  删除 MVC 4 AccountController、AccountModels、Account 视图文件夹和 _LoginPartial 共享视图
2.  创建一个新的 MVC 3 Web 应用程序
3.  将 MVC 3 AccountController、AccountModels、Account 视图文件夹和 _LogOnPartial 共享视图复制到您的 MVC 4 应用程序中
4.  `@Html.Partial(“_LoginPartial”)`在共享的 _Layout 视图中替换为`@Html.Partial(“_LogOnPartial”)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-04T20:03:57.817

```
<add name="ConnectionString" providerName="MySql.Data.MySqlClient" connectionString="Data Source=127.0.0.1; port=3306; Initial Catalog=DbName; uid=root; pwd=*Password*;" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-19T07:06:14.303

> 安装包：

```
PM> Install-Package EntityFramework
PM> Update-Package EntityFramework
PM> Install-Package MySql.Data.Entity 
```

> 网页配置

```
<connectionStrings>
 <add name="DefaultConnection"
   providerName="MySql.Data.MySqlClient"
   connectionString="Data Source=localhost;port=3306;Initial Catalog=api_db;User Id=root;password=''"/>
</connectionStrings> 
```

> 创建模型类

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;
using System.Linq;
using System.Web;

namespace LiteRemit.Models
{
    [Table("customers")]
    public class CustomerModel
    {
        [Key]
        public int CustomerId { get; set; }
        public string Name { get; set; }
        public string Country { get; set; }
    }
} 
```

> 创建模型上下文：

```
using System;
using System.Collections.Generic;
using System.Data.Entity;
using System.Linq;
using System.Web;

namespace LiteRemit.Models
{
    public class MySqlCon : DbContext
    {
        //MySql Database connection String
        public MySqlCon() : base(nameOrConnectionString: "DefaultConnection") { }
        public virtual DbSet<CustomerModel> Customers { get; set; }
    }
} 
```

> 创建控制器类

```
using LiteRemit.Models;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace LiteRemit.Controllers
{
    public class HomeController : Controller
    {
        MySqlCon _con;
        public HomeController()
        {
            _con = new MySqlCon();
        }

        public ActionResult Index()
        {
            return View(_con.Customers.ToList());
        }
 }
} 
```

> 代码添加查看页面：

```
@using LiteRemit.Models
@model IEnumerable<CustomerModel>

<table border="1">
 @foreach (var item in Model)
 {
  <tr>
   <td>@Html.DisplayFor(modelItem => item.CustomerId)</td>
   <td>
    @Html.DisplayFor(modelItem => item.Name)
   </td>
   <td>@Html.DisplayFor(modelItem => item.Country)</td>
  </tr>
 }
</table> 
```

# java - 从tomcat服务器中的webapp调用java程序-java程序在tomcat服务器之外

> ID：12181432
> 
> 赞同：3
> 
> 时间：2012-08-29T15:29:42.377
> 
> 标签：java, linux, tomcat, web-applications, jvm

我在 tomcat 服务器中有一个 webapp。我也在tomcat服务器之外有一个java程序 - 在linux机器根目录中。我需要在外面调用 java 程序并获得对 webapp 的响应。这可能吗？

请给我一个答案？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:35:24.030

您可以在运行时对象上使用 exec 方法：

```
Runtime rt = Runtime.getRuntime(); 
Process proc = rt.exec("whatever_you_want_to_run"); 
int exitVal = proc.exitValue(); 
```

# php - 选择未选择的记录mysql php

> ID：12181437
> 
> 赞同：1
> 
> 时间：2012-08-29T15:29:54.670
> 
> 标签：php, mysql

我在 mysql 表中有一些数据。我希望每条记录只使用一次。所以我有“is_used”列。

但是如果有人在更新查询之前选择数据，他将不知道该记录已被使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:34:06.380

如果这是一个巨大的问题，您应该研究[锁定的各种选项](http://dev.mysql.com/doc/refman/5.1/en/innodb-locking-reads.html)。这是一个并发问题。

# git - 仅提交格式更改的文件，如何删除？

> ID：12181439
> 
> 赞同：1
> 
> 时间：2012-08-29T15:30:00.047
> 
> 标签：git

我正在处理一些文件并提交了所有文件，但由于我的 IDE 愚蠢的格式化规则，其中一个文件格式发生了一些变化，它也与其他文件一起提交并推送到我的远程分支。现在我想从我的分支中单独删除该文件（不要从我的存储库中删除它，而只是从我的提交中删除它，因为它不会为我的提交增加价值），因为文件中没有真正的更改。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:02:08.613

我通过以下方式完成了这项工作：

```
1\. git checkout <masterBranch>
2\. git pull <localRepo> <masterBranch>
3\. git checkout <localRepo>
4\. git checkout <masterBranch> -- <location of file.filename> 
```

然后只需添加并提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:15:46.410

如果有问题的提交位于该分支的顶端，并且您已签出该分支：

```
git checkout HEAD^ -- reformattedFile
git commit --amend reformattedFile
git push -fn 
```

假设最后一条命令显示 Git 正在执行您期望的操作，请删除该`n`标志以使其实际运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-23T06:19:25.207

这对我有用：

1-转到具有不必要/错误文件提交的分支：

```
git checkout <yourBranchName> 
```

2-从具有正确文件的分支签出文件：

```
git checkout <mainBranchName> -- <fileName with complete path> 
```

3-提交您的更改：

```
git add <fileName with complete path>
git commit -m <your message> 
```

4-将更改推送到远程分支：

```
git push <yourBranchName> 
```

# java - 同步块中List的数据重叠

> ID：12181441
> 
> 赞同：1
> 
> 时间：2012-08-29T15:30:08.270
> 
> 标签：java, synchronization, thread-safety, locking

我有一个方法：

```
private List<String> userCns = Collections.synchronizedList(new ArrayList<String>());
private List<String> recipients = Collections.synchronizedList(new ArrayList<String>());

public void sendEmailToLegalUsers() {
    try {
        synchronized (lock) {
            searchGroup();

            if(userCns.size() > 0) {
                for(String userCn : userCns) {
                    String mail = getUserMail(userCn);
                    if(mail != null) {
                        recipients.add(mail);
                    }
                }                   
            }

            String docName = m_binder.getLocal("docname");
            String docId = m_binder.getLocal("docid");
            String url = m_binder.getLocal("serverURL");

            if(recipients.size() > 0) {
                m_binder.addResultSet("LOI_EVIN_MAIL", getLoiEvinMailResultSet(docName, docId, url));

                for(String recipient : recipients) {
                    Log.info("Sending mail to: " + recipient);
                    InternetFunctions.sendMailToEx(recipient, "MH_LOI_EVIN_SEND_EMAIL", "Update Evin Law Compliance for the item: " + docName, m_service, true);
                }
            }
        }           
    } catch (Exception e) { 
        Log.info("Error occurred in LDAPSendMail: "+ e.getMessage());
    }   
} 
```

现在可以从不同的线程调用这个 sendEmailToLegalUsers 方法。我想知道这是锁定代码块的正确方法，以便列表中没有数据混淆的机会吗？

* * *

编辑：全班：

```
package com.edifixio.ldapsendmail.handlers;

import intradoc.common.Log;
import intradoc.data.DataResultSet;
import intradoc.server.InternetFunctions;
import intradoc.server.ServiceHandler;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Hashtable;
import java.util.List;
import java.util.Vector;

import javax.naming.Context;
import javax.naming.NamingEnumeration;
import javax.naming.NamingException;
import javax.naming.directory.Attribute;
import javax.naming.directory.Attributes;
import javax.naming.directory.DirContext;
import javax.naming.directory.InitialDirContext;
import javax.naming.directory.SearchControls;
import javax.naming.directory.SearchResult;

public class LDAPSendMail extends ServiceHandler {

    private final Object lock = new Object();

    private String ldapURL;
    private String baseDN;
    private String groupDN;
    private String username;
    private String password;
    private DirContext context;

    private List<String> userCns = Collections.synchronizedList(new ArrayList<String>());
    private List<String> recipients = Collections.synchronizedList(new ArrayList<String>());

    public void sendEmailToLegalUsers() {
        try {
            synchronized (lock) {
                searchGroup();

                if(userCns.size() > 0) {
                    for(String userCn : userCns) {
                        String mail = getUserMail(userCn);
                        if(mail != null) {
                            recipients.add(mail);
                        }
                    }                   
                }

                String docName = m_binder.getLocal("docname");
                String docId = m_binder.getLocal("docid");
                String url = m_binder.getLocal("serverURL");

                if(recipients.size() > 0) {
                    m_binder.addResultSet("LOI_EVIN_MAIL", getLoiEvinMailResultSet(docName, docId, url));

                    for(String recipient : recipients) {
                        Log.info("Sending mail to: " + recipient);
                        InternetFunctions.sendMailToEx(recipient, "MH_LOI_EVIN_SEND_EMAIL", "Update Evin Law Compliance for the item: " + docName, m_service, true);
                    }
                }

                userCns.clear();
                recipients.clear();
            }           
        } catch (Exception e) { 
            Log.info("Error occurred in LDAPSendMail: "+ e.getMessage());
        }   
    }

    private String getUserMail(String userCn) throws NamingException {
        NamingEnumeration<SearchResult> searchResults = getLdapDirContext().search(userCn, "(objectclass=person)", getSearchControls());
        while (searchResults.hasMore()){
            SearchResult searchResult = searchResults.next();
            Attributes attributes = searchResult.getAttributes();
            Attribute mail = null;

            try {
                mail = attributes.get("mail");
            } catch (Exception e) {
                mail = null;
            }

            if(mail != null) {
                return (String)mail.get();
            }
        }
        return null;
    }

    private void searchGroup() throws NamingException {
        NamingEnumeration<SearchResult> searchResults = getLdapDirContext().search(groupDN, "(objectclass=groupOfUniqueNames)", getSearchControls());
        String searchGroupCn = getCNForBrand(m_binder.getLocal("brandId"), m_binder.getLocal("brandName"));

        while (searchResults.hasMore()) {
            SearchResult searchResult = searchResults.next();
            Attributes attributes = searchResult.getAttributes();
            Attribute groupCn = null;

            try {
                groupCn = attributes.get("cn");
            } catch (Exception e) {
                groupCn = null;
            }

            if(groupCn != null) {
                if(searchGroupCn.equals((String)groupCn.get())) {
                    Attribute uniqueMembers = attributes.get("uniqueMember");
                    for(int i = 0; i < uniqueMembers.size(); i++){
                        String uniqueMemberCN = (String) uniqueMembers.get(i);
                        userCns.add(uniqueMemberCN);
                    }
                    break;
                }
            }
        }
    }

    private DirContext getLdapDirContext() throws NamingException {
        if(context != null) {
            return context;
        }

        ldapURL = m_binder.getLocal("ldapUrl");
        baseDN = m_binder.getLocal("baseDN");
        groupDN = new StringBuilder().append("ou=").append(getAccountGroup(m_binder.getLocal("account"))).append(",").append("ou=groups,").append(baseDN).toString();
        username = m_binder.getLocal("username");
        password = m_binder.getLocal("password");

        Hashtable<String, String> environment = new Hashtable<String, String>();
        environment.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
        environment.put(Context.PROVIDER_URL, ldapURL);
        environment.put(Context.SECURITY_PRINCIPAL, username);
        environment.put(Context.SECURITY_CREDENTIALS, password);

        context = new InitialDirContext(environment);

        return context;
    }

    private SearchControls getSearchControls() {
        SearchControls searchControls = new SearchControls();       
        searchControls.setSearchScope(SearchControls.SUBTREE_SCOPE);
        return searchControls;
    }

    private String getCNForBrand(String brandId, String brandName) {        
        String[] brandIdSplittedArray = brandId.split("/");
        return new StringBuilder().append(brandIdSplittedArray[0]).append("-").append(brandIdSplittedArray[1]).append("-").
                append(brandIdSplittedArray[2]).append("-").append(brandName.replaceAll("\\s","")).append("-LU").toString();
    }

    private String getAccountGroup(String account) {        
        return account.split("/")[1];
    }

    private DataResultSet getLoiEvinMailResultSet(String docName, String docId, String url) {
        DataResultSet resultSet = new DataResultSet(new String[]{"DOCNAME", "DOCID", "URL"});
        Vector<String> vector = new Vector<String>();
        vector.add(docName);
        vector.add(docId);              
        vector.add(url);
        resultSet.addRow(vector);
        return resultSet;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:46:19.137

是什么`lock`？你在其他地方使用它吗？通常，您希望同步块非常小。如果您将`lock`任何地方用作通用锁，那么您可能会阻止线程在完全不相关的区域（即，没有争用共享资源的区域）做一些有用的工作。

其次，`recipients`真的需要是实例变量吗？`recipients`您会继续添加电子邮件而不检查该电子邮件是否已存在于列表中，这似乎很奇怪。我看不到您正在清除我们的任何代码`recipients`。所以这是一个潜在的问题。如果您`recipients`每次都从头开始构建，那么只需将其设为方法中的局部变量即可。如果您确实需要访问该数据，您可以随时将其从`userCns`.

一旦你创建`recipients`了一个局部变量，那么你只需要使用`userCns`锁来同步：

```
synchronized(userCns) {
   ...
} 
```

**编辑：**您的代码显示您只使用`recipients`一次，并且在`sendEmailToLegalUsers`方法内部。正如我所指出的，另一件事是您永远不会清除`recipients`，因此这是您的代码中的错误。由于您不在`recipients`任何地方使用，请将其设为`sendEmailToLEgalUsers`. 此外，只需同步`userCns`. 您不需要同步`recipients`；您可以在同步块中创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T16:07:44.087

我会做

```
private final List<String> userCns = new ArrayList<String>();
private final List<String> recipients = new ArrayList<String>(); 
```

和

```
synchronized(userCns) {
   // as Vivin suggests.
} 
```

你不需要额外的锁。

# ruby - Ruby：将日期和时间对象组合成一个日期时间

> ID：12181444
> 
> 赞同：49
> 
> 时间：2012-08-29T15:30:12.063
> 
> 标签：ruby

简单的问题，但我找不到一个好的或明确的答案。**将 Ruby 日期和时间对象（对象**，而不是字符串）组合成单个 DateTime 对象的最佳和最有效的方法是什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-29T15:55:26.307

我找到了这个，但它并不像你希望的那样优雅：

```
d = Date.new(2012, 8, 29)
t = Time.now
dt = DateTime.new(d.year, d.month, d.day, t.hour, t.min, t.sec, t.zone) 
```

顺便说一句，ruby Time 对象还存储年、月和日，因此在创建 DateTime 时会丢弃它。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-11-06T15:22:17.270

使用 时`seconds_since_midnight`，夏令时的变化可能会导致意想不到的结果。

```
Time.zone = 'America/Chicago'
t  = Time.zone.parse('07:00').seconds_since_midnight.seconds
d1 = Time.zone.parse('2016-11-06').to_date # Fall back
d2 = Time.zone.parse('2016-11-07').to_date # Normal day
d3 = Time.zone.parse('2017-03-12').to_date # Spring forward

d1 + t
#=> Sun, 06 Nov 2016 06:00:00 CST -06:00
d2 + t
#=> Mon, 07 Nov 2016 07:00:00 CST -06:00
d3 + t
#=> Sun, 12 Mar 2017 08:00:00 CDT -05:00 
```

这是一个替代方案，类似于上面@selva-raj 的答案，使用字符串插值`strftime`、 和`parse`。`%F`等于`%Y-%m-%d`和`%T`等于`%H:%M:%S`。

```
Time.zone = 'America/Chicago'
t = Time.zone.parse('07:00')
d1 = Time.zone.parse('2016-11-06').to_date # Fall back
d2 = Time.zone.parse('2016-11-07').to_date # Normal day
d3 = Time.zone.parse('2017-03-12').to_date # Spring forward

Time.zone.parse("#{d1.strftime('%F')} #{t.strftime('%T')}")
#=> Sun, 06 Nov 2016 07:00:00 CST -06:00
Time.zone.parse("#{d2.strftime('%F')} #{t.strftime('%T')}")
#=> Sun, 07 Nov 2016 07:00:00 CST -06:00
Time.zone.parse("#{d3.strftime('%F')} #{t.strftime('%T')}")
#=> Sun, 12 Mar 2017 07:00:00 CDT -05:00 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2015-02-10T12:20:34.627

简单的：

```
Date.new(2015, 2, 10).to_datetime + Time.parse("16:30").seconds_since_midnight.seconds

# => Object: Tue, 10 Feb 2015 16:30:00 +0000 
```

你必须爱鲁比！

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-03-09T23:06:40.030

如果使用 Rails，请尝试以下任何一种：

```
d = Date.new(2014, 3, 1) 
t = Time.parse("16:30")

dt = d + t.seconds_since_midnight.seconds   
# => ActiveSupport::TimeWithZone

dt = (d + t.seconds_since_midnight.seconds).to_datetime   
# => DateTime

dt = DateTime.new(d.year, d.month, d.day, t.hour, t.min, t.sec)   
# => DateTime 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-01-13T16:44:40.527

如果您使用的是 Ruby on Rails，这非常有用。

我构建了一个方法来扩展 DateTime 类以组合日期和时间。**它从日期中获取区域，以便它不会在夏令时结束一个小时**。

另外，为了方便起见，我也喜欢能够传入字符串。

```
class DateTime
  def self.combine(d, t)
    # pass in a date and time or strings
    d = Date.parse(d) if d.is_a? String 
    t = Time.zone.parse(t) if t.is_a? String
    # + 12 hours to make sure we are in the right zone
    # (eg. PST and PDT switch at 2am)
    zone = (Time.zone.parse(d.strftime("%Y-%m-%d")) + 12.hours ).zone
    new(d.year, d.month, d.day, t.hour, t.min, t.sec, zone)
  end
end 
```

所以你可以这样做：

```
DateTime.combine(3.weeks.ago, "9am") 
```

或者

```
DateTime.combine("2015-3-26", Time.current) 
```

ETC...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-27T17:32:44.477

我找到了另一种方法，我希望这是正确的。

```
 datetojoin=Time.parse(datetime).strftime("%Y-%m-%d")
       timetojoin=Time.parse(time).strftime("%T")          
       joined_datetime = Time.parse(datetojoin +" "+ timetojoin).strftime("%F %T") 
```

有什么想法吗？请分享。

# java - Android 告诉用户玩了多长时间

> ID：12181446
> 
> 赞同：-3
> 
> 时间：2012-08-29T15:30:15.060
> 
> 标签：java, android

我有一个游戏活动，我想测量用户一直在玩的时间。

在游戏活动中，我有两个长变量，

```
static long stopTime = 0;
static long startTime = -99; 
```

我试图这样设置开始时间`onResume()`和结束时间`onPause()`：

暂停：

```
@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    stopTime = SystemClock.currentThreadTimeMillis();
    Log.d("OnPause","stopTime: "+stopTime);
} 
```

简历：

```
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    if (startTime == -99)
    {
        startTime = SystemClock.currentThreadTimeMillis();
        Log.d("OnPause","THIS IS RESUME : startTime: "+startTime);
    }
} 
```

当我`startTime`首先启动时，我给它一个值-99，所以只有当这是它的值时，`onResume`我才会将它的值更新为 currentmillis。

然后将一个 long 传递`stopTime - startTime`给
`putExtra("totalTime", this.stopTime - this.startTime);`另一个获取该值并将其呈现给用户的活动。我这样做是使用一个名为 moveToEndScreen() 的方法，该方法在游戏结束时调用：

```
private void moveToEndScreen() {
    // TODO Auto-generated method stub
    Intent i = new Intent(con, EndScreen.class);
    i.putExtra("err", errTimes);
    i.putExtra("timeScore", stopTime - startTime);
    startActivity(i);
} 
```

这就是下一个活动发生的情况：

```
public class EndScreen extends Activity{
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    Intent i = getIntent();
    long timeScore = i.getLongExtra("timeScore",15);
    Log.d("END SCREEN timeScore THAT I GOT IS",timeScore+"");
    float timeResult = timeScore / 1000;
    int errors = i.getIntExtra("err", -1);
    setContentView(R.layout.endscreen);
    TextView stat = (TextView) findViewById(R.id.errMsg);
    stat.setText("You have completed the puzzle in "+errors+" false matches total, and it took you "+timeResult+ " seconds. Can you do better? :)");

} 
```

}

将 Log.d`onResume`和`onPause`具有停止和开始时间值的方法导入后，我发现这些方法运行的次数超出了我的预期，并且给了我不合理的值（负数或零）。另外，我现在看到游戏结束时，布局上的数字在 1 秒后从 0 变为 3。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:44:18.143

我认为您想要做的是让 startTime 和 stopTime 是静态的，这样您就知道每个变量只有一个实例。我认为当 Activity 经历它的周期时，你正在失去状态。

您可能遇到的另一个问题是您正在调用`SystemClock.currentThreadTimeMillis()`这可能不是您想要的。您可能只想`System.currentTimeMillis()`获取挂钟毫秒数。

让我知道这是否能让您走上正轨或发布一些代码，以便我们提供更多帮助。

# c# - Winforms WebBrowser：如何删除 cookie

> ID：12181451
> 
> 赞同：1
> 
> 时间：2012-08-29T15:30:33.793
> 
> 标签：c#, .net, cookies, webbrowser-control, environment-variables

我正在尝试删除 webbrowser 控件中的 cookie。此代码删除了cookies文件，但在重新启动程序之前，cookies仍在内存中。

```
private void deleteCookies(string domain)
    {
        string cookiesPath =
            Environment.GetFolderPath(Environment.SpecialFolder.Cookies);
        string[] unWantedCookies = 
            Directory.GetFiles(cookiesPath, "*" + domain + "*");
        foreach (string cookie in unWantedCookies)
        {
            File.Delete(cookie);
        }
    } 
```

我试过这段代码：

```
webBrowser1 = new WebBrowser(); 
```

但它没有用。我猜它在环境变量中的某个地方，但是在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:54:30.040

你真的不应该使用 File IO 来删除 cookie，因为 cookie 实际上不是文件，而是 index.dat 文件中的数据，有一个虚拟文件但它不是真实的，删除它不会从内存中删除 cookie (这是你的问题） - 也不建议使用 javascript hack 来执行此操作。

您最好查看 DeleteUrlCacheEntry 以删除 cookie，并使用 FindFirst/NextUrlCacheEntry 遍历所有缓存项，一旦开始循环，查找以“cookie：”开头的缓存项，然后您可以进一步查看 cookie 名称，创建时间（修改、同步、上次访问、到期等）来决定您要删除哪些 cookie。

互联网上有很多很好的预写代码示例，它们可以让您循环和删除 IE 中的缓存项，因此请使用其中任何一个，您需要做的就是在 DeleteUrlCacheEntry 调用之前添加一个过滤器决定是否要为该项目调用 DeleteUrlCacheEntry，当然，如果你这样做，它不仅会从内部数据库中删除缓存条目，还会将其从活动内存中删除，你也不会得到“文件正在使用”错误，因为它会在删除之前从内存和使用中释放它。

如果您需要更多信息或帮助，请告诉我。再一次，为您想要的特定语言搜索 DeleteUrlCacheEntry 代码，嘿，它甚至存在于 VB6 中，所以我相信您可以轻松找到 c# 的副本:)。

让我知道你是怎么相处的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:31:54.413

使用`WebBrowser.InvokeScript`( [http://msdn.microsoft.com/en-us/library/cc491132.aspx](http://msdn.microsoft.com/en-us/library/cc491132.aspx) ) 执行一些 Javascript 来清除当前页面的 cookie。

# mysql - 具有更改字符串值的mysql日期格式

> ID：12181455
> 
> 赞同：0
> 
> 时间：2012-08-29T15:30:45.613
> 
> 标签：mysql

我有一个名为 Timestamp 的字段，它将其值存储为文本，而不是实际的 Timestamp。不幸的是，日志记录应用程序是不可更改的。

所以

```
table.Timestamp -> text field with format -> "Wed Mar 02 13:28:59 CDT 2011" 
```

我一直在开发一个查询来清除除最近行之外的所有行，使用它作为我的时间戳选择器，它也将字符串转换为日期->

```
MAX( STR_To_DATE( table.Timestamp , '%a %b %d %H:%i:%s CDT %Y' ) 
```

我的查询完美运行...

但是，我发现字符串值 -> 'CDT' -> 在 'CDT' 和 'CST' 之间变化，具体取决于当前时间是否为夏令时。在夏令时期间，它记录为“CDT”，反之亦然。

因此，当我运行它时，所有包含“CST”的行都会被忽略 ->

```
 MAX( STR_To_DATE( table.Timestamp , '%a %b %d %H:%i:%s CDT %Y' ) 
```

当我运行它时，所有包含“CDT”的行都会被忽略->

```
 MAX( STR_To_DATE( table.Timestamp , '%a %b %d %H:%i:%s CST %Y' ) 
```

有没有办法让它针对两种字符串格式运行？

编辑 -

所以给定以下数据（仅由“CDT”和“CST”不同：

```
"Wed Mar 02 13:28:59 CDT 2011" and "Tue Mar 08 09:42:07 CST 2011" 
```

目前它将返回如下：

```
 MAX( STR_To_DATE( table.Timestamp , '%a %b %d %H:%i:%s CDT %Y' ) Returns - Wed Mar 02 13:28:59 CDT 2011

MAX( STR_To_DATE( table.Timestamp , '%a %b %d %H:%i:%s CST %Y' ) Returns - Tue Mar 08 09:42:07 CST 2011 
```

无论如何，我希望它返回“Tue Mar 08 09:42:07 CST 2011”。

编辑2：

这是我的主要查询：

```
DELETE 
FROM `table` main
WHERE STR_To_DATE( main.Timestamp , '%a %b %d %H:%i:%s CST %Y' ) <
  (SELECT  COALESCE(STR_To_DATE( sub.Timestamp , '%a %b %d %H:%i:%s CDT %Y' ), STR_To_DATE( sub.Timestamp , '%a %b %d %H:%i:%s CST %Y' )) 
   FROM `table` sub
   WHERE sub.Retrieving_User = main.Retrieving_User ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:37:31.947

将两者结合起来。[`COALESCE`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)表示返回集合中的第一个非空值。

在这种情况下，它将首先尝试使用“CDT”对其进行解析。如果失败，返回 NULL，它将尝试使用“CST”进行解析。（如果失败，它将到达合并列表的末尾并返回 NULL，但在您的情况下，它不会走那么远）。

```
select MAX( COALESCE(STR_To_DATE( test.Timestamp , '%a %b %d %H:%i:%s CDT %Y' ), STR_To_DATE( test.Timestamp , '%a %b %d %H:%i:%s CST %Y' )))
from test 
```

[SQL Fiddle](http://sqlfiddle.com/#!2/810c5/2)尝试更改表中的数据并查看它是否有效。

# php - 谁能告诉我这是什么日期格式？

> ID：12181457
> 
> 赞同：0
> 
> 时间：2012-08-29T15:30:47.240
> 
> 标签：php, date, timestamp

我正在阅读 API 的文档，它使用这种时间戳格式：

2012-08-29T15:31:23Z

我从来没有见过这样定位的 T 和 Z，所以我必须创建一个自定义函数来生成这种格式。

是否有内置的 PHP 方法以这种格式或标准生成时间戳？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:31:59.097

这是世界时间......它是日期，然后是时间分隔符，时间被放入与 UTC 相同的祖鲁时间

您可以简单`print strtotime('2012-08-29T15:31:23Z');`地将其更改为 unix 时间戳

**[从 W3](http://www.w3.org/TR/NOTE-datetime)**

> 例子
> 
> 1994-11-05T08:15:30-05:00 对应于美国东部标准时间 1994 年 11 月 5 日上午 8:15:30。
> 
> 1994-11-05T13:15:30Z 对应于同一时刻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:34:01.513

ISO 8601 日期时间格式规范

[http://www.w3.org/TR/NOTE-datetime](http://www.w3.org/TR/NOTE-datetime)

“... 例子

1994-11-05T08:15:30-05:00 对应于美国东部标准时间 1994 年 11 月 5 日上午 8:15:30。

1994-11-05T13:15:30Z 对应于同一时刻。

……”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:32:50.127

[它采用ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)标准化的格式。这`Z`是 UTC 时区。

您可以使用[strtotime解析它并使用](http://php.net/strtotime)[date](http://php.net/date)创建自己的（ DATE_ 常量来自[DateTime 常量](http://php.net/manual/en/class.datetime.php#datetime.constants.types)列表，该列表链接自*日期*手册页）：

```
$timestamp = strtotime('2012-08-29T15:31:23Z');
$datetime = date(DATE_ISO8601, $timestamp); 
```

# javascript - 在 gwt HTMLPanel 中使用 JavaScript 运行 Google 图表

> ID：12181458
> 
> 赞同：0
> 
> 时间：2012-08-29T15:30:51.203
> 
> 标签：javascript, gwt, google-visualization

我正在尝试在位于我网页中间的 HTML 面板中运行来自谷歌图表示例的测试图表。我想对图表进行很多自定义，这就是为什么我不想使用从谷歌图表派生的任何类型的 api。我想在 HTMLPanel 中简单地运行 javascript。这是我尝试过的。

```
public class TwitterTimeSeries implements EntryPoint 
{

public void onModuleLoad() {

Element script2 = DOM.createElement("script");
DOM.setElementAttribute(script2,"language","text/javascript");
DOM.setElementAttribute(script2,"src","https://www.google.com/jsapi");
    Element script = DOM.createElement("script");
    DOM.setElementAttribute(script,"language","text/javascript");
    script.setInnerText("google.load('visualization', '1.0', {'packages' ['corechart']});" 
+ "google.setOnLoadCallback(drawChart);" 
+ "function drawChart() {" 
+ "var data = google.visualization.arrayToDataTable([['Year', 'Sales', 'Expenses'], ['2004',  1000,      400], ['2005',  1170,      460], ['2006',  660,       1120], ['2007',  1030,      540]]);" 
+ "var options = {title: 'Company Performance'};" 
+ "var chart = new google.visualization.LineChart(document.getElementById('chart_div'));" 
+ "chart.draw(data, options); }" 

            );
    HTMLPanel html = new HTMLPanel("<div id=\"chart_div\"></div>");
    RootPanel.get().add(html);  
    DOM.appendChild(DOM.getElementById("chart_div"),script);

  }
}; 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:09:57.410

抱歉，您不应该直接这样做。您应该使用[gwt-google-apis](http://code.google.com/p/gwt-google-apis/wiki/VisualizationGettingStarted?tm=6)。

他们为大多数图表提供了包装器，如果您错过了一个包装器，您可以轻松编写自己的包装器。

除此之外，编写包装器/小部件是一种很好的做法，因为它们可以很容易地在其他项目中重用。
如果包装器中缺少某些内容（例如图表外观的某些自定义），您仍然可以依靠纯 Javascript (JSNI) 来实现它。

代码看起来像这样：

```
public class TwitterTimeSeries implements EntryPoint 
{
    public void onModuleLoad() {
        VisualizationUtils.loadVisualizationApi(new Runnable() {
            @Override
            public void run() {
                DataTable dataTable = DataTable.create();
                            dataTable.addColumns(ColumnType.String,"Year");
                            dataTable.addColumns(ColumnType.Number,"Sales");
                            dataTable.addColumns(ColumnType.Number,"Expenses");
                            dataTable.addRows(1)
                            dataTable.setValues(0,0,"2004");
                            dataTable.setValues(0,1,1000);
                            dataTable.setValues(0,2,400);
                            Options options = Options.create();
                            options.set("title","Company Performance");
                            LineChart chart = new LineChart(dataTable,options);
                            panel.add(chart);
                            RootPanel.get().add(panel);
            }
        }, CoreChart.PACKAGE, MotionChart.PACKAGE);
    }
} 
```

# solr - Rails3 太阳黑子：reindex - rake 中止！未定义的方法

> ID：12181465
> 
> 赞同：2
> 
> 时间：2012-08-29T15:31:17.940
> 
> 标签：solr, ruby-on-rails-3.2, sunspot-rails, reindex

我有一个具有多个“has_many through”关系的 rails 模型。我在活动记录和可搜索块中定义了这些。当我在一个单词模型名称（例如：Contributor）上定义关系并重新索引时，它工作正常。当我在 2 字模型名称（例如：LuSubject）上定义关系并重新索引时，它不起作用。我收到错误“未定义的方法'subject_ids'。我尝试了其他具有相同结果的模型。“奖”有效。“LuGrade”没有。

这是我的“工作”模型中的代码：

```
class Work < ActiveRecord::Base

  self.table_name = 'work'
  self.primary_keys = :WORK_ID  

  alias_attribute :work_id, :WORK_ID
  alias_attribute :title, :TITLE
  alias_attribute :series_id, :SERIES_ID 

  has_many :work_contributors, :foreign_key => :WORK_ID
  has_many :contributors, :through => :work_contributors
  has_many :work_grades, :foreign_key => :WORK_ID
  has_many :lu_grades, :through => :work_grades  
  has_many :work_primary_subjects, :foreign_key => :WORK_ID
  has_many :lu_subjects, :through => :work_primary_subjects  
  has_many :work_awards, :foreign_key => :WORK_ID
  has_many :awards, :through => :work_awards
  belongs_to :series, :foreign_key => :SERIES_ID

  searchable do
    text :title 

    integer :work_id 
    string :title
    integer :series_id 
    integer :contributor_ids, :references => Contributor, :multiple => true
    integer :subject_ids, :references => LuSubject, :multiple => true
  end 
```

这是重新索引命令的输出

```
$ bundle exec rake sunspot:reindex 
rake aborted!
undefined method `subject_ids' for #<Work:0x00000003bee760>

Tasks: TOP => sunspot:reindex
(See full trace by running task with --trace) 
```

这是完整的跟踪

```
$ bundle exec rake sunspot:reindex --trace
** Invoke sunspot:reindex (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute sunspot:reindex
rake aborted!
undefined method `subject_ids' for #<Work:0x00000004001690>
/var/lib/gems/1.9.1/gems/activemodel-3.2.6/lib/active_model/attribute_methods.rb:407:in     `method_missing'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/attribute_methods.rb:149:in `method_missing'
/var/lib/gems/1.9.1/gems/sunspot-1.3.3/lib/sunspot/data_extractor.rb:17:in `value_for'
/var/lib/gems/1.9.1/gems/sunspot-1.3.3/lib/sunspot/field_factory.rb:58:in  `populate_document'
/var/lib/gems/1.9.1/gems/sunspot-1.3.3/lib/sunspot/indexer.rb:95:in `block in prepare '
/var/lib/gems/1.9.1/gems/sunspot-1.3.3/lib/sunspot/indexer.rb:94:in `each'
/var/lib/gems/1.9.1/gems/sunspot-1.3.3/lib/sunspot/indexer.rb:94:in `prepare'
/var/lib/gems/1.9.1/gems/sunspot-1.3.3/lib/sunspot/indexer.rb:24:in `block in add'
/var/lib/gems/1.9.1/gems/sunspot-1.3.3/lib/sunspot/indexer.rb:24:in `map'
/var/lib/gems/1.9.1/gems/sunspot-1.3.3/lib/sunspot/indexer.rb:24:in `add'
/var/lib/gems/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session.rb:91:in `index'
/var/lib/gems/1.9.1/gems/sunspot- 1.3.3/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/var/lib/gems/1.9.1/gems/sunspot- 1.3.3/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/var/lib/gems/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/var/lib/gems/1.9.1/gems/sunspot-1.3.3/lib/sunspot.rb:184:in `index'
/var/lib/gems/1.9.1/gems/sunspot_rails-1.3.3/lib/sunspot/rails/searchable.rb:256:in  `block (2 levels) in solr_index'
/var/lib/gems/1.9.1/gems/sunspot_rails-1.3.3/lib/sunspot/rails/searchable.rb:345:in  `solr_benchmark'
/var/lib/gems/1.9.1/gems/sunspot_rails-1.3.3/lib/sunspot/rails/searchable.rb:255:in  `block in solr_index'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/relation/batches.rb:72:in `find_in_batches'
/var/lib/gems/1.9.1/gems/activerecord-3.2.6/lib/active_record/querying.rb:8:in `find_in_batches'
/var/lib/gems/1.9.1/gems/sunspot_rails-1.3.3/lib/sunspot/rails/searchable.rb:254:in `solr_index'
/var/lib/gems/1.9.1/gems/sunspot_rails-1.3.3/lib/sunspot/rails/searchable.rb:198:in `solr_reindex'
/var/lib/gems/1.9.1/gems/sunspot_rails-1.3.3/lib/sunspot/rails/tasks.rb:58:in `block (3 levels) in <top (required)>'
/var/lib/gems/1.9.1/gems/sunspot-1.3.3/lib/sunspot/class_set.rb:16:in `each'
/var/lib/gems/1.9.1/gems/sunspot-1.3.3/lib/sunspot/class_set.rb:16:in `each'
/var/lib/gems/1.9.1/gems/sunspot_rails-1.3.3/lib/sunspot/rails/tasks.rb:57:in `block (2 levels) in <top (required)>'
/usr/lib/ruby/vendor_ruby/rake/task.rb:205:in `call'
/usr/lib/ruby/vendor_ruby/rake/task.rb:205:in `block in execute'
/usr/lib/ruby/vendor_ruby/rake/task.rb:200:in `each'
/usr/lib/ruby/vendor_ruby/rake/task.rb:200:in `execute'
/usr/lib/ruby/vendor_ruby/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/usr/lib/ruby/vendor_ruby/rake/task.rb:151:in `invoke_with_call_chain'
/usr/lib/ruby/vendor_ruby/rake/task.rb:144:in `invoke'
/usr/lib/ruby/vendor_ruby/rake/application.rb:116:in `invoke_task'
/usr/lib/ruby/vendor_ruby/rake/application.rb:94:in `block (2 levels) in top_level'
/usr/lib/ruby/vendor_ruby/rake/application.rb:94:in `each'
/usr/lib/ruby/vendor_ruby/rake/application.rb:94:in `block in top_level'
/usr/lib/ruby/vendor_ruby/rake/application.rb:133:in `standard_exception_handling'
/usr/lib/ruby/vendor_ruby/rake/application.rb:88:in `top_level'
/usr/lib/ruby/vendor_ruby/rake/application.rb:66:in `block in run'
/usr/lib/ruby/vendor_ruby/rake/application.rb:133:in `standard_exception_handling'
/usr/lib/ruby/vendor_ruby/rake/application.rb:63:in `run'
/usr/bin/rake:27:in `<main>'
Tasks: TOP => sunspot:reindex 
```

这是我当前的版本信息

```
$ gem list|grep sunspot
sunspot (1.3.3)
sunspot_rails (1.3.3)
sunspot_solr (1.3.3) 
```

注意：我正在使用生产表，所以我没有重命名这些表的选项。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:22:21.317

您的设置将导致 Sunspot在您的对象上`integer :subject_ids, ...`调用方法。`subject_ids`一些 ActiveRecord 关联将基于关联定义类似的方法`has_many`，但我看不到`has_many :subjects`哪个会定义它。

你的意思是`integer :lu_subject_ids`？

# magento - 在分类页面添加搜索模块

> ID：12181467
> 
> 赞同：0
> 
> 时间：2012-08-29T15:31:33.260
> 
> 标签：magento

我会在类别页面中添加搜索表单。该模块将在同一类别中进行研究。这是可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:45:35.687

将类别添加到高级搜索。这里有一些指示：

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/search_and_advanced_search/how_to_add_search_by_category_to_advanced_search](http://www.magentocommerce.com/wiki/5_-_modules_and_development/search_and_advanced_search/how_to_add_search_by_category_to_advanced_search)

您可能希望在模块中而不是在核心 hack 中执行此操作...

现在将一些简单的表单放在一个 phtml 文件中，将布局 xml 放在一起以将其加载到类别页面上。设置搜索以将当前类别添加到发送到您修改的“高级搜索”的搜索字符串。

至于获取该类别，请尝试 $this->getCurrentCategory();

# python - 如何在python的子进程中添加附加符号

> ID：12181470
> 
> 赞同：0
> 
> 时间：2012-08-29T15:31:35.763
> 
> 标签：python, scheduled-tasks, subprocess

我有以下代码，它运行带有参数的命令

```
subprocess.call(["schtasks.exe", "/Query","/V","/FO","csv",">>", r"D:/temp/fo3.csv"]) 
```

但是我`>>`对参数的一部分有问题，该命令似乎不喜欢它，它给出了以下消息

```
ERROR Invalid argument /option - >> 
```

所以我的问题是我如何让`>>`论点起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:34:35.537

当您将参数作为这样的列表传递时，子进程将每个参数传递给程序。可能发生的情况是您的程序 ( `schtasks.exe`) 正在查看该参数`>>`，但它不知道如何处理它。当您在 shell 中运行它时，`>>`shell 会将其解释为重定向，因此您的程序永远不会看到它。

您有 2 个选项，将参数作为字符串传递并使用`shell = True`. 如果您接受可以修改您传递给子进程的字符串的用户输入，则不建议这样做，因为这会导致程序中的安全风险。

您的第二个选择是将打开的文件对象传递给`stdout`，例如

```
f = open(r"D:/temp/fo3.csv",'a')
subprocess.call(["schtasks.exe", "/Query","/V","/FO","csv"], stdout = f) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:35:00.717

输出重定向 (the `>>`) 是一个 shell 功能，如果您直接调用该程序将不起作用。`shell=True`在通话中使用。

# android - 在带坐标的 RelativeLayout 中添加 ImageView

> ID：12181472
> 
> 赞同：2
> 
> 时间：2012-08-29T15:31:40.253
> 
> 标签：android, android-imageview

如何添加一些大于Size`ImageView`的坐标？`RelativeLayout``RelativeLayout`

麻烦的是，当我添加比`ImageView`布局宽度更大的填充并在该布局中使用时`scrollTo(-100,0)`（例如），我什么也看不到，我`ImageView`消失了，或者更小（当填充比布局宽度小一点时）。

如何关闭 ImageView 自动缩放或其他东西？

# c# - 如何在 Visual Studio 中为索引器“this []”“转到定义”

> ID：12181473
> 
> 赞同：11
> 
> 时间：2012-08-29T15:31:41.147
> 
> 标签：c#, visual-studio, visual-studio-2008, indexer

我使用一个代码库，其中几个类实现了一个[索引器](http://msdn.microsoft.com/en-us/library/6x16t2tx.aspx)：

```
public double this[int i, int j]
{
    get { return ...; }
    set { ...; }
} 
```

当我偶然发现`foo[1,2] = 3`Visual Studio 2008 中的代码时，我经常想
*右键单击/“转到定义”*，即在 Visual Studio 编辑器窗口中显示上述定义。

对于普通属性或方法，这没有问题：
`foo.bar = 3`，*右键单击/“转到定义”*将我带到 foo.bar 的源代码。
对于重载`+`或`==`这也有效。
但是，对于索引器，这似乎不起作用。有没有办法做到这一点？

（我什至无法在适当的源文件中搜索字符串“this[”，因为可以在整个类中使用相同的语法来访问索引器。我总是必须滚动浏览下拉列表中的所有方法和属性文件）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T16:44:36.290

当然，这对 2008 年并没有真正的帮助，但在 2010 年及更高版本中，他们已经使用 Navigate To 命令（C# 键盘布局中的`ctrl`+ ）“修复”了这个问题。`,`您可以在其中输入`this`以显示当前解决方案中的索引器列表，您可以在其中双击要导航到的索引器。

+1 用于 Resharper，当插入符号在索引器使用范围内时，按 F12 似乎可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:39:54.380

你可以安装`Resharper`谁给你这个功能，工具箱生产力不给这个功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:55:02.350

您最好的选择可能是去定义`foo`并查看该类的索引。

# ocaml - 参数为无符号 32 位整数的函数

> ID：12181474
> 
> 赞同：5
> 
> 时间：2012-08-29T15:31:43.870
> 
> 标签：ocaml

在 ocaml 中，我正在尝试编写一个函数，该函数将 32 位无符号整数作为参数。但是，我在确定要在函数的类型声明中使用的正确标识符时遇到问题。通过谷歌搜索，我只能找到 int32。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T16:01:29.250

添加到gasche的答案有一个库，它提供了一个具有 uint32 类型和相应操作（包括除法）的模块 - [ocaml-uint](https://github.com/andrenth/ocaml-uint)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T15:41:54.240

[Int32](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Int32.html)模型有*符号*的 32 位算术。如果您只打算传递这些值（例如将它们传递给 C API），或者使用不依赖于签名的操作，例如`add`, `mul`, `sub`，您可以使用`Int32`就好了。除法和模数在有符号和无符号数上的实现方式不同，因此您不应使用 Int32 模块的那些。

（之前有关于这个主题的[caml-list 讨论。）](http://caml.inria.fr/pub/ml-archives/caml-list/2004/07/f1c483068cc62075c916f7ad7d640ce0.fr.html)

# forms - 激活时不会触发我的模态/弹出表单以重新查询

> ID：12181476
> 
> 赞同：3
> 
> 时间：2012-08-29T15:31:45.400
> 
> 标签：forms, ms-access, combobox, modal-dialog

`frmEditContact`我打开了一个模态/弹出式表单

在这个表单上有一个完整的地址组合框`cmbAddressList`，由查询填充。当用户想要添加一个不存在的地址时，有一个按钮可以打开`frmAddress`他们可以添加地址的位置。

frmAddress 允许他们在列表中输入地址并提供保存或取消选项（这两个操作都在之后关闭表单）。关闭此表单后，焦点现在再次位于 frmEditContact

我想`docmd.Requery cmbAddressList`在他们关闭另一个表单后重新填充组合框

我不确定在哪里处理这个问题，我尝试过 On Avtivate、On Load、On Update、On Open、On Focus ......但是当他们使用其他表单时我保持 frmEditContact 打开时，它们都没有触发

有没有办法让 frmEditContact 一直保持打开状态，但仍然会触发一个动作事件，以便我可以重新查询？On Activate 是否不适用于模态表单？

 ``* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:48:29.490

`frmEditContact`在你的代码中试试这个。

```
DoCmd.OpenForm "frmAddress", acNormal, WindowMode:=acDialog
Me.cmbAddressList.Requery 
```

由于`frmAddress`是以对话模式打开的，因此下一行 ( `Requery`) 将在 after`frmAddress`关闭之前运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:37:45.413

您可以从 frmAddress 重新查询组合：

```
Forms!frmEditContact.cmbAddressList.Requery 
```

我建议您使用保存按钮来运行重新查询。``

# javascript - d3.js 包含类别和数字的数组

> ID：12181477
> 
> 赞同：2
> 
> 时间：2012-08-29T15:31:45.853
> 
> 标签：javascript, charts, d3.js

d3js 专家

我有这些数组

```
var dados = [
["Brasil", 20], 
["Canada", 31],
["Japao", 29],
["USA", 26],
["Inglaterra", 21],
["Nova Zelandia", 25],
["Turquia", 34]
]; 
```

我喜欢将数组**dados**绑定到我的图表。**国家名称**到**文本**和**值**到**条**。

可以直接做吗？怎么做？

```
chart.selectAll("rect")
     .data(function(d, i) { return d[i][1];})
     .enter().append("rect")
     .attr("y", function(d) {return d[0];})
     .attr("width", x)
     .attr("height", y.rangeBand()-6)
     .attr("transform", "translate(4,0)");

chart.selectAll("text")
     .data(function(d, i) {return d[i][0];})
     .enter().append("text")
     ... 
```

太感谢了

* * *

我用下面的代码得到了值 - 粗体

```
 var x = d3.scale.linear()
     .domain([0, **d3.max(dados)[1]** ])
     .range([0, 500]);

 chart.selectAll("rect")
  .data(**dados**)
  .enter().append("rect")
  .attr("y", function(d) {return d[0];})
  .attr("width", **function(d) { return x(d[1]);}** )
  .attr("height", y.rangeBand()-6)
   .attr("transform", "translate(4,0)"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:32:35.527

校正内** **

```
 var x = d3.scale.linear()
    .domain([0, **d3.max(dados)[1]** ])
    .range([0, 500]);

 chart.selectAll("rect")
    .data(**dados**)
    .enter().append("rect")
    .attr("y", function(d) {return d[0];})
    .attr("width", **function(d) { return x(d[1]);}** )
    .attr("height", y.rangeBand()-6)
    .attr("transform", "translate(4,0)"); 
```

# coldfusion - CFFTP 将用户名添加到我要获取的文件中

> ID：12181482
> 
> 赞同：0
> 
> 时间：2012-08-29T15:31:55.513
> 
> 标签：coldfusion, ftp

我正在使用 CFFTP 进入远程服务器并尝试获取文件。我知道该文件存在，因为我可以使用本机 Windows FTP 命令行来获取它。原来的命令行是这样的：

```
get 'ur.urpyt005.series23.extract' C:\downloads\remote.txt 
```

我将其转换为 ColdFusion 任务并使用以下内容获取文件：

```
<cfftp action="getfile" 
    server="ftp.remote.com" 
    username="remoteuser" 
    password="*******" 
    remotefile="ur.urpyt005.series23.extract"
    localfile="C:\downloads\remote.txt" 
    stoponerror="true" /> 
```

当我运行脚本时，FTP 服务器将用户名添加到我要求的文件中。我收到以下错误：

```
Error: 550 Data set REMOTEUSER.UR.URPYT005.SERIES23.EXTRACT not found . 
```

我怎么能告诉它不要附加用户名？

# c# - 如何在 C# 中为 Windows 窗体应用程序添加连接字符串

> ID：12181483
> 
> 赞同：-2
> 
> 时间：2012-08-29T15:31:56.647
> 
> 标签：c#, .net, winforms, database-connection

我正在开发一个 Windows 窗体应用程序，我想添加数据库的连接字符串。虽然我可以访问数据库，但我不知道它背后的正确原因。我创建了一个数据库并将其添加到“数据库”文件夹中。它的代码如下所示。我还想知道如何创建一个可以在不同 PC 上工作而不更改它的连接字符串（我说的是连接字符串中“AttachDbFilename”属性中给出的相对路径）。

```
Conn = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename="+ Application.StartupPath + "\\Database\\Database.mdf;Integrated Security=True;User Instance=True"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:23:06.143

尝试使用：

```
AppDomain.CurrentDomain.SetData(“DataDirectory”,”c:\anypath”);

SqlConnection c = new SqlConnection (“Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database.mdf;Initial Catalog=Master"); 
```

如此处所述：

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)

# php - 将单个字符串转换为单独链接的列表

> ID：12181486
> 
> 赞同：2
> 
> 时间：2012-08-29T15:32:04.087
> 
> 标签：php, sql

我有一个名为 links 的字段，它接受以逗号分隔的 URL 列表，例如“www.bbc.co.uk, www.itv.co.uk”

然后，当我输出该字段的内容时，我将其包装在如下代码中：

```
<li><a href='http://<?php echo htmlout($name['links']); ?>'><?php echo htmlout($name['links']); ?></a></li> 
```

当添加单个链接时，这可以正常工作，但是当添加多个链接时，就会导致问题。

例如，如果我有两个链接，一个是 www.bbc.co.uk，一个是 www.itv.co.uk，然后我将鼠标悬停在链接上（它是一个链接而不是两个），它显示为：

```
http://www.ts.co.uk%2C%20www.bbc.co.uk/ 
```

现在我在想，因为它们是用逗号分隔的，所以可能有某种方法可以将其用作挂钩来拆分 URL，但我不确定这是否可能。

任何帮助表示赞赏。谢谢

在下面编辑

在下面添加了一些代码，因为我已经有一个数组。我可以在数组中有一个数组吗？我应该在这种情况下吗？我应该把建议的代码放在哪里？

INDEX.PHP（控制器）

```
include $_SERVER['DOCUMENT_ROOT'] .  '/includes/db.inc.php';

try
{
$sql = "SELECT player.id, player.name AS name, age, position, height, weight, GROUP_CONCAT(distinct previousclubs.name) previousclubs, 
        satscore, gpa, GROUP_CONCAT(distinct link) link, email
        FROM player INNER JOIN playerpreviousclubs
            ON player.id = playerid
        INNER JOIN previousclubs
            ON previousclubid = previousclubs.id
        INNER JOIN links
            ON links.playerid = player.id
        WHERE email = '$username'";

$result = $pdo->query($sql);
}
catch (PDOException $e)
{
$error = 'Error fetching details: ' . $e->getMessage();
include 'error.html.php';
exit();
}

foreach ($result as $row)
{
$names[] = array(
                'id' => $row['id'], 
                'name' => $row['name'],
                'age' => $row['age'],
                'position' => $row['position'],
                'height' => $row['height'],
                'weight' => $row['weight'],
                'previousclubs' => $row['previousclubs'],
                'satscore' => $row['satscore'],
                'gpa' => $row['gpa'],
                'links' => $row['link'],
                'email' => $row['email']
                );
}

include 'profiles.html.php'; 
```

我的模板目前看起来像这样：

配置文件.HTML.PHP

```
<p>Welcome <?php echo $row['name'] ?> . Below are your profile details:</p>

<?php foreach ($names as $name): ?>

<form action="" method="post">

<ol>

<li class="listleft">Name:</li>
<li><?php echo htmlout($name['name']); ?></li>
<li class="listleft">Age:</li>
<li><?php echo htmlout($name['age']); ?></li>
<li class="listleft">Position:</li>
<li><?php echo htmlout($name['position']); ?></li>
<li class="listleft">Height:</li>
<li><?php echo htmlout($name['height']); ?></li>
<li class="listleft">Weight:</li>
<li><?php echo htmlout($name['weight']); ?></li>
<li class="listleft">Previous Clubs:</li>
<li><?php echo htmlout($name['previousclubs']); ?></li>
<li class="listleft">GPA:</li>
<li><?php echo htmlout($name['satscore']); ?></li>
<li class="listleft">SAT Score:</li>
<li><?php echo htmlout($name['gpa']); ?></li>
<li class="listleft">Links:</li>
<li><a href='http://<?php echo htmlout($name['links']); ?>'><?php echo   htmlout($name['links']); ?></a></li>

</ol>

</form>

<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:35:23.933

```
$links = explode(',', $links);

foreach($links as $link) {
    echo '<li><a href="'.$link.'">'.$link.'</a></li>';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:36:05.430

你需要[爆炸](http://php.net/manual/en/function.explode.php)它们，然后循环它们。

```
$links = explode(',', $name['links']); 
```

那么在你看来：

```
foreach ($links as $link) {
    echo '<li><a href="http://'.$link.'">'.$link.'</a></li>';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T15:33:30.233

[`explode`](http://php.net/manual/en/function.explode.php)您可以使用函数轻松拆分字符串：

```
// split string by comma, returns array
$linksArray = explode(',', $links);

foreach($linksArray as $link) {
    echo $link; // print each link etc
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T15:38:23.120

您最好将[字符串](http://php.net/manual/en/function.explode.php)分解为数组，然后循环数组以输出数据。就个人而言，我发现数组比字符串更容易使用。例如：

```
$links = explode(',', $links);

foreach($links as $link) {
    ?>
    <li><a href="http://<?php echo htmlout($link); ?>"><?php echo htmlout($link); ?></a></li>
    <?php
} 
```

# java - 嵌套异常是 java.sql.SQLException: Invalid parameter index 1

> ID：12181490
> 
> 赞同：2
> 
> 时间：2012-08-29T15:32:17.817
> 
> 标签：java

我收到以下错误，但我不明白为什么：

> org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; 错误的 SQL 语法 [UPDATE da_tracking SET ins_name= xyz, ins_dev_scripted = False WHERE ins_ID = 12]; 嵌套异常是 java.sql.SQLException: Invalid parameter index 1。

```
------------------------ dao class-----
public int save(DboBean record) {
        // TODO Auto-generated method stub
        String sql = "UPDATE da_tracking"
                    + " SET ins_name= " + record.getDboDevName()+ "," 
                    + " ins_dev_scripted = " + record.getDevScripted()
                    + " WHERE ins_ID = " + record.getDboId();
        Object[] params = new Object[] {record.getDboDevName(), record.getDevScripted()};
        int[] types = new int[]{Types.VARCHAR, Types.BIT};
        return jdbcTemplate.update(sql, params, types);
    }
----------------------------Junit-----
bean.setDboDevName("xyz");
bean.setDboId(12);
int rowsAffected =  objDao.save(bean);

    System.out.println("Object is updated [" + bean.getDboId() + ", " + bean.getDboDevName() + 
            ", " + bean.getDevScripted() + "]"); 
```

你知道为什么吗？？我的删除和读取方法有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:42:06.500

您看到的错误是因为您将变量传递给`params`and`types`数组，但您没有在查询中为这些绑定变量放置占位符：

```
String sql = "UPDATE da_tracking"
            + " SET ins_name= ?," 
            + " ins_dev_scripted = ?"
            + " WHERE ins_ID = ?"
Object[] params = new Object[] {record.getDboDevName(), record.getDevScripted(), record.getDboId()};
int[] types = new int[]{Types.VARCHAR, Types.BIT, Types.INTEGER};
return jdbcTemplate.update(sql, params, types); 
```

在内部，Spring 正在做这样的事情：

```
PreparedStatement stmt = conn.prepareStatement("...your sql...");
stmt.setString(1, dboDevName); // this will fail, since there is no bind variable
                               // with index 1
... 
```

您永远不应该通过连接外部数据来构建 SQL 查询。在最好的情况下，如果有人在数据中加入奇怪的引号或转义字符，它会导致查询随机失败，在最坏的情况下，会导致一个重大的安全漏洞，从而危及您的系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:36:21.370

```
public int save(DboBean record) {

        String sql = "UPDATE da_tracking"
                    + " SET ins_name= ?"+"," 
                    + " ins_dev_scripted = ?" 
                    + " WHERE ins_ID = ?";
        Object[] params = new Object[] {record.getDboDevName(), record.getDevScripted(), record.getDboId()};
        int[] types = new int[]{Types.VARCHAR, Types.BIT, Types.INTEGER}; // Change 3rd parameter type here
        return jdbcTemplate.update(sql, params, types);
    }

----------------------------Junit-----
bean.setDboDevName("xyz");
bean.setDboId(12);
int rowsAffected =  objDao.save(bean);

    System.out.println("Object is updated [" + bean.getDboId() + ", " + bean.getDboDevName() + 
            ", " + bean.getDevScripted() + "]"); 
```

这行得通吗？

# git - Git add，git commit，git push 不向 GitHub 发送文件？

> ID：12181491
> 
> 赞同：0
> 
> 时间：2012-08-29T15:32:28.073
> 
> 标签：git

我正在对代码进行更改，然后执行以下操作，看起来它通过了，但 GitHub 没有显示提交？

```
git add .
git commit -m "Did something"
git push origin master

Response
=================================================
 * branch            master     -> FETCH_HEAD
 Already up-to-date. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:59:28.867

我运行了以下 git config --global credential.helper osxkeychain ，现在它可以工作了。在运行它之前，我会手动输入用户名和密码，它会说我已提交，但什么也没出现。

感谢您提供有关拉动的提示！

# installation - 触发工具包 - 安装在非系统驱动器中

> ID：12181503
> 
> 赞同：1
> 
> 时间：2012-08-29T15:33:11.457
> 
> 标签：installation, trigger.io

我是 Trigger.io 的新手。我注意到没有选项可以选择安装触发器工具包的位置（Windows 7 32 位）。它始终安装在 C: 驱动器（系统驱动器）上。我的 android SDK、AVD 位于 D: 驱动器上。当我转到本地配置时，我只能在 C: 驱动器内浏览。我不想将 Android 文件夹，甚至我的应用程序代码保留在系统驱动器上（可能必须在不备份的情况下对其进行格式化）。

所以我的问题是：触发器工具包可以安装在任何地方，还是我必须将我的 Android 文件夹复制到 C：驱动器？另外，Toolkit 是否只能在安装它的驱动器中浏览？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:31:03.667

我们的待办事项中有一个故事来支持工具包中的驱动器之间的切换——这绝对是我们的关注焦点。

同时，您可以手动编辑 local_config.json 文件（位于 src 目录旁边）以将驱动器包含在相关路径中吗？

# intersystems-cache - 系统间缓存 log4 等效项

> ID：12181509
> 
> 赞同：2
> 
> 时间：2012-08-29T15:33:33.013
> 
> 标签：intersystems-cache

有谁知道是否有类似于 log4 的东西可用于缓存？

我在许多 .Net 项目中使用了 log4net，并希望拥有具有相同功能的东西。特别是本地、dev、qa 和 prod 环境之间的日志记录级别和配置能力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:50:25.903

很难明确地回答某些东西不存在，但我很确定它不存在。我能找到的缓存库的唯一来源是 Intersystems，当然，或者 [M/Gateway 网站](http://www.mgateway.com/php/utility/utility.php)（我不隶属于 M/Gateway 产品或网站，我也不认可它，它只是唯一的我已经找到了缓存代码库。它需要注册，并且有不到 50 个文件，其中许多是教程）。

在 GitHub 上搜索“Intersystems”确实找到了一些东西，但是“Intersystems logging”虽然在搜索中有一些结果，但似乎没有一个类似于 log4net。

基本的 Intersystems 库包括 ^%ETN 之类的东西，它捕获并记录错误数据，但它只是将一些特定的东西放在全局变量中，它与 log4net 完全不同。

所以，总而言之，我不会屏住呼吸。

您可以考虑使用 log4net 作为滚动您自己的简化版本的基础。实现它的 Cache 方法可能是从日志记录类继承以获取 Log 方法。您可以通过运行时反射或通过让 Log 基类包含生成器方法来获取类特定数据（更有效）来获取特定于类的数据。在缓存中，配置文件可能没那么有用，所以我建议使用持久配置类。我会设计它以允许一次将多个配置保存到磁盘，以及一些将一个指定为活动的方法。

# javascript - 关于Javascript提示框

> ID：12181511
> 
> 赞同：-1
> 
> 时间：2012-08-29T15:33:41.437
> 
> 标签：javascript, html, jsp

我目前正在使用 JSP 为我的 mozilla 插件开发一个简单的 GUI。在那个 Gui 中，我想创建一个带有两个带有下拉列表选项的输入字段的提示框。是否可以使用 javascript 提示框选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:35:24.420

使用默认功能是不可能的，`window.prompt();`但您可以滚动自己的叠加层或使用[jQuery UI 对话框](http://jqueryui.com/demos/dialog/)之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:36:14.570

使用纯 JS 提示框无法做到这一点，但您可以使用[jQuery UI](http://jqueryui.com/)或[Bootstrap](http://twitter.github.com/bootstrap/javascript.html#modals)之类的库。

# javascript - BackboneJS 删除背面的旧视图？

> ID：12181512
> 
> 赞同：3
> 
> 时间：2012-08-29T15:33:44.353
> 
> 标签：javascript, html, backbone.js, pushstate

我有一个 BackboneJS 应用程序，它有一个用于两个不同视图的路由器。问题是，如果我从一个视图转到另一个视图，它工作正常，但如果我单击浏览器上的后退按钮，它只会在另一个视图之上添加一个视图。（所以我最终显示了两个视图）。

如何删除视图或强制刷新？

```
 var Schedule = Parse.Object.extend({
    className: "schedule"
  });

  var Movie = Parse.Object.extend({
    className: "movie"
  });

  var ScheduleList = Parse.Collection.extend({
    model: Schedule
  });

  var schedule = new ScheduleList();
  var movie = new Movie();

  var ScheduleView = Parse.View.extend({
    initialize: function() {
          schedule.query = new Parse.Query(Schedule);
          schedule.query.ascending("date");
          schedule.query.limit('500');

          var render = this.render;

      schedule.fetch({
        success: function() {
          render(schedule.toJSON());
        }
      });
    },

    render: function(schedule) {
      console.log(schedule);
      var template = Handlebars.compile($("#schedule-item").html());
      $("#schedule-holder").html(template({shows: schedule}));
      return this;
    }
  });

  var MovieView = Parse.View.extend({
    initialize: function() {
      var query = new Parse.Query(Movie);
      query.equalTo("mId", parseInt(this.id));
      query.limit('1');

      var render = this.render;

      query.first({
        success: function(details) {
          render(details.toJSON());
        }
      });
    },

    render: function(movie) {
      var template = Handlebars.compile($("#movie-item").html());
      $("#movie-holder").html(template(movie));
      return this;
    }
  });

  var AppRouter = Parse.Router.extend({
        routes: {
            "movie/:id": "movieDetails",
            "*actions": "schedule" // Backbone will try match the route above first
        },
        movieDetails: function( id ) {
            // Note the variable in the route definition being passed in here
            var App = new MovieView({ id: id });
        },
        schedule: function( actions ){
            var App = new ScheduleView();
        }
    });

  // Instantiate the router
  var app_router = new AppRouter;

  // Start Backbone history a neccesary step for bookmarkable URL's
  Parse.history.start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T17:09:44.550

您的路由器应该跟踪当前视图（如果有）并[`remove`](http://backbonejs.org/#View-remove)在添加新视图之前调用旧视图。默认`remove`非常简单：

> **消除** `view.remove()`
> 
> 用于从 DOM 中删除视图的便利功能。相当于调用`$(view.el).remove();`。

这将清除 HTML，并且由于[`delegateEvents`](http://backbonejs.org/#View-delegateEvents)将 a 绑定[`delegate`](http://api.jquery.com/delegate/)到视图`el`以进行事件处理，因此调用`remove`还将防止僵尸 UI 事件。您可能还想取消绑定已绑定到模型或集合的任何事件处理程序`remove`，否则您可能会在数据事件处理程序中隐藏僵尸视图。

您可能不想`remove`从 DOM 中删除任何内容，您可能只想要以下内容：

```
remove: function() {
    this.$el.empty();
    this.undelegateEvents();
    return this;
} 
```

那么视图`el`将保留在 DOM 中，但不会引起任何问题。

因此，`remove`根据需要将实现添加到您的视图并调整您的路由器以调用`remove`：

```
var AppRouter = Parse.Router.extend({
    //...
    initialize: function() {
        this.view = null;
    },
    movieDetails: function( id ) {
        this._cleanUp();
        this.view = new MovieView({ id: id });
        //...
    },
    schedule: function( actions ){
        this._cleanUp();
        this.view = new ScheduleView();
        //...
    },
    _cleanUp: function() {
        if(this.view)
            this.view.remove();
        this.view = null;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:05:12.703

我建议创建一个控制器（或使用路由器作为控制器）或主视图来控制此功能。

然后当每个路由被触发时，将新创建的路由传递给所述控制器或主视图。

```
var Controller = Backbone.View.extend({
      el: '#masterdiv'
      showView: function ( view ) {
         this.$el.empty().append( view.el );
      } 
});
var controller = new Controller();
var AppRouter = Parse.Router.extend({
        routes: {
            "movie/:id": "movieDetails",
            "*actions": "schedule" // Backbone will try match the route above first
        },
        movieDetails: function( id ) {
            // Note the variable in the route definition being passed in here
            var view = new MovieView({ id: id });
            controller.showView( view );
        },
        schedule: function( actions ){
            var view = new ScheduleView();
            controller.showView( view );
        }
    }); 
```

# c# - WPF 未处理异常 - 寻找比 DispatcherUnhandledException 更好的解决方案

> ID：12181518
> 
> 赞同：1
> 
> 时间：2012-08-29T15:33:58.003
> 
> 标签：c#, wpf, unhandled-exception

我正在使用第 3 方图表控件。可以在 XAML 中配置控件，以在鼠标移到数据点上方时显示数据点的值。如果图表中没有数据，则会引发异常。我可以在 Application.Current.DispatcherUnhandledException 事件中捕获异常。我更愿意在承载 Chart 控件的用户控件中捕获异常。我没有看到拦截异常的方法，因为图表控件直接获取鼠标事件。

我的问题是：有没有更好的方法来捕获异常？如果不是，这是 WPF 架构的弱点吗？

# android - 创建类似系统服务的android服务

> ID：12181523
> 
> 赞同：0
> 
> 时间：2012-08-29T15:34:10.373
> 
> 标签：android, android-service

我想实现一个在启动时应该像标准系统服务一样运行的服务，这个服务不应该被杀死，并且应该能够在接收来自另一个进程的通知时执行操作。

谁能帮助我创建此类服务的最佳方法（AIDL），如果有任何参考示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:36:02.837

除非您正在创建自己的系统 ROM，否则您不能这样做。

如果创建自己的 ROM，您可以从修改包含您的服务的 apk 的 AndroidManifest 开始。您需要为您的`manifest`节点添加一个属性：`android:sharedUserId="android.uid.system"`. 这将导致您的 APK 保存系统 ID（这需要使用您的平台签名密钥对 APK 进行签名——这就是您需要创建自己的系统 ROM 的原因。

这将使您的应用程序被系统认为是特殊的，并且（至少在 4.x 上，我还没有在较旧的 Android 版本上测试过）您的应用程序将自动启动。但是，自动启动的应用程序本身并没有多大意义。您需要按照@febinkk 的建议实现一个 BOOT_COMPLETED 接收器，或者您可以提供自定义应用程序覆盖（通过在 AndroidManifest.xml 中将属性添加`android:name="your.package.ApplicationSuperClass"`到您的`application`节点）。在您的应用程序超类中，您可以重载`onCreate()`并让它启动您的服务或其他任何需要的东西。

另外，作为一个系统应用，我相信（虽然还没有完全测试过）你将无法通过正常的方式被杀死。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:36:30.097

如果不创建自己的 ROM，您将无法创建不可杀死的免疫服务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:45:35.467

您可以为您的服务注册一个带有过滤器的 BroadcastReciever android.intent.action.BOOT_COMPLETED 并在开始调用 startForeground() 之后。这可能不是您真正想要的，但如果您不想创建 ROM，这可能是唯一可以接近的东西。

# asp.net - 在 aspx 页面上更改母版页中的 div 内容

> ID：12181524
> 
> 赞同：0
> 
> 时间：2012-08-29T15:34:12.777
> 
> 标签：asp.net, master-pages

这是一个简单的问题，或者不是。我有一个包含三个部分的母版页，其中一个部分是徽标库。网站中的某些页面我想在该区域中注入文本并删除图片库，这可以用 jquery 在母版页的一个部分中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:41:42.980

一种选择是在您的代码隐藏中以编程方式访问母版页。

像这样：

[http://msdn.microsoft.com/en-us/library/c8y19k6h(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/c8y19k6h(v=vs.100).aspx)

在您不想看到图片库的页面上，您可以将该控件的可见性设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:47:20.533

如果您真的想在页面加载后（例如单击按钮后）使用 jQuery 更改内容，您可以很容易地做到这一点。请参阅[此小提琴](http://jsfiddle.net/2fq8A/)以获取工作示例。

```
$("#button1").click(function() {
    $("#section1").html("new content");
});​ 
```

# c++ - (cin >> int).get() 在 Xcode(4.3.3) 中不能正常工作

> ID：12181525
> 
> 赞同：4
> 
> 时间：2012-08-29T15:34:18.570
> 
> 标签：c++, xcode

我目前正在编写“C++ Primer Plus”一书并进行一些编程练习。看来，我在使用 Xcode(4.3.3) 时遇到问题，因为以下代码无法正常工作：

```
 #include <iostream>
    #include <string>

    struct car 
    {
        std::string maker;
        int year;
    };

int main() 
{
    using namespace std;

    cout << "How many cars do you wish to catalog? ";
    int nCars;
    (cin >> nCars).get();

    car* aCars = new car[nCars];

    for (int i = 0; i < nCars; i++) 
    {
        cout << "\nCar #" << (i + 1) << endl;
        cout << "Please enter the make: ";
        getline (cin, (aCars + i)->maker);
        cout << "\nPlease enter the year made: ";
        (cin >> (aCars + i)->year).get();
    }
    cout << "Here is your collection: \n";

    for (int i = 0; i < nCars; i++)
    {
        cout << (aCars + i)->year << " " << (aCars + i)->maker << endl;
    }

    delete [] aCars;
    return 0;
} 
```

问题是，我没有机会进入任何制造商。程序直接进入我必须输入年份的地方，即使我使用的是“（cin >> nCars）.get（）;” 摆脱换行符。

我忽略了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:59:00.660

我怀疑您可能正在 Windows 上运行，并且两字节换行符正在打击您。您可以通过忽略来改进（对于不太长的行）：

```
cin >> nCars;
cin.ignore(1024, '\n'); 
```

请注意，由于您依赖流数字处理，因此输入非数字年份`QQ`将导致编程刚刚完成而不要求任何更多输入。

您不需要对年份进行数学运算，因此将它们视为字符串而不是整数。然后，如果您需要，您可以在获得输入后每年进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:52:36.257

好的，伙计们..我发现了问题。使用 cin.get() 时，Xcode 中的控制台无法按预期工作。我在终端以及 Visual Studio (Win 7) 中尝试了相同的代码，并且程序运行良好。

无论如何，谢谢大家的建议。下次我会尝试考虑它们。:)

干杯!

# ruby-on-rails - 有没有办法在 Windows 中安装 therubyracer？

> ID：12181526
> 
> 赞同：3
> 
> 时间：2012-08-29T15:34:28.040
> 
> 标签：ruby-on-rails, ruby, cygwin, therubyracer

有没有一种安装rubyracer gem 的方法，即在windows 中运行RoR 项目所需的？

我已经尝试过正常的方式，但它不会然后我尝试安装cygwin然后尝试安装gem，但仍然没有运气，

有人在windows中成功安装过这个吗？我什至可以尝试困难的方法（如果有任何可能的解决方案）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T20:08:35.633

我使用[了 therubyracer_for_windows](https://github.com/hiranpeiris/therubyracer_for_windows)。这个对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:59:36.793

如果您需要一个 JS 运行时来进行资产编译（和其他任务），在 Windows 上，只需在 Gemfile 中省略 gem 是完全安全的。

Windows 已经有一个 JS 运行时，据我所知，Rails 在检测到它时会使用它。

看看这里的描述，我想你会发现它的信息。

[https://github.com/sstephenson/execjs](https://github.com/sstephenson/execjs)

# json - 由于 AOP 配置，Spring3 MVC DispatcherServlet 没有 JSON 结果

> ID：12181531
> 
> 赞同：0
> 
> 时间：2012-08-29T15:34:38.663
> 
> 标签：json, rest, spring-mvc, spring-aop

当我们配置 Spring AOP 时，JSON 结果消失：AOPExression1

```
<aop:pointcut id="dmhMethodExecution"
            expression="within(com.aditya.dmh..*)" /> 
```

所以我添加了一个排除项：AOPExpression1 as AOPExpression2

```
<aop:pointcut id="dmhMethodExecution"
   expression="within(com.aditya.dmh..*) 
        and !within(com.aditya.dmh.controller..*)" /> 
```

在 ASPECTJ 表达式中，我仍然看不到来自控制器的 JSON 结果，这是一个安静的实现。

```
package com.aditya.dmh.controller;

@Controller
public class EmployeeController {

private EmployeeServiceInterface employeeService;

@Autowired
public void setEmployeeService(EmployeeServiceInterface employeeService) {
    this.employeeService = employeeService;
}

@RequestMapping("/employeeservices/1/allemployees.view")
public @ResponseBody Result<EmployeeModel> getEmployees(){
    return employeeService.getEmployees(0, 10);

}
} 
```

当我将 log4j 用于调试消息时，我看到以下内容：

```
15:37:04.214 [http-8090-1] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView  returned to DispatcherServlet with name 'dmhServiceDispatcher': assuming HandlerAdapter completed request handling

15:37:04.214 [http-8090-1] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request 
```

当我删除 AOP 时，JSON 结果开始出现，我看到附加的调试消息。

```
17:11:36.270 [http-8090-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [com.aditya.Result@8a85268] as "application/json;charset=UTF-8" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@62ba2e48] 
```

查看 Spring 论坛，我了解转换器是自动配置的，当

```
<mvc:annotation-driven/> 
```

用来。

我配置 AOP 的问题是否与未调用 RequestResponseBodymethodProcessor 有任何关系。

这与我使用 AOPExpression1 时在我的控制器周围创建的代理有什么关系吗？为什么 AOPExpression2 中的排除仍然存在问题。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T06:49:36.690

在这种情况下我们的问题的解决方案

我们发现整个事情都与我们所拥有的 AOP 配置中的环绕建议有关。

修复前

```
public void logAround(ProceedingJoinPoint joinPoint) throws Throwable {
    long startTime = System.currentTimeMillis();
    joinPoint.proceed();
    long totalTime = System.currentTimeMillis() - startTime;

    log.debug(buildLogMessage(new StringBuilder().append(METHOD_AROUND_ID)
            .append("[").append(totalTime).append("] ").toString(),
            joinPoint));
    return returnValue;
} 
```

修复后

```
public Object logAround(ProceedingJoinPoint joinPoint) throws Throwable {
    long startTime = System.currentTimeMillis();
    Object returnValue = joinPoint.proceed();
    long totalTime = System.currentTimeMillis() - startTime;

    log.debug(buildLogMessage(new StringBuilder().append(METHOD_AROUND_ID)
            .append("[").append(totalTime).append("] ").toString(),
            joinPoint));
    return returnValue;
} 
```

void 有效地确保 logAround 发送的响应对象没有传递回 RequestResponseBodyMethodProcessor

一旦我们将其捕获并返回，cglib 代理就会将响应发送回处理器并将响应发送回客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:02:24.907

我相信要拦截对控制器的请求，您应该使用 MVC 拦截器而不是方面。我所做的是将以下内容放入 applicationContext.xml：

```
<mvc:interceptors>
    <mvc:interceptor>
        <mvc:mapping path="/employeeservices/1/allemployees.view"/>
        <bean class="com.aditya.dmh.interceptor.ResultInterceptor" />
    </mvc:interceptor>
</mvc:interceptors> 
```

现在，类 ResultInterceptor 是您放置要完成的代码的地方，例如：

```
@Override
public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {

    log.info("--- preHandle --- ");

    return true;
} 
```

至少我是这样做的。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:25:36.537

这是一个小小的猜测：

我认为正在发生的事情是为您的控制器创建了一个基于 CGLIB 的动态代理（尽管您已经在新的切入点表达式中明确排除了它），如果发生这种情况，则`@RequestMapping`无法正确检测到注释（通过 `），因此控制器不是在那里处理您的 REST 请求。

你可以尝试一些事情：

1.  为控制器提供一个与控制器处理的方法完全相同的接口，并将`@RequestMapping`注释放在那里，这将处理创建动态代理的情况，即使创建了动态代理也应该按预期工作。

2.  多玩一点你的切入点表达式，看看为什么会为你的控制器创建一个代理。

# wcf - 如何获取 WCF 服务的具体 WSDL？

> ID：12181543
> 
> 赞同：1
> 
> 时间：2012-08-29T15:35:31.077
> 
> 标签：wcf, wsdl

有人可以告诉我如何从 WCF 服务中获取具体的 WSDL 吗？

我知道 ?wsdl 给了我一个抽象的 WSDL，但不知道如何具体化。

* * *

感谢您的回答，但这无济于事。我找到了解决方案。我需要这个具体的 wsdl 到具体的 wsdl 来开发 ESB 解决方案并连接到后端。我为此使用了 Tibco AMX 服务网格，并使用它自己的机制构建了具体的 wsdl。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T02:45:01.833

您似乎在询问发布元数据。

为您的服务添加具有属性的`ServiceMetadata`行为：`httpGetEnabled`

```
<behaviors>
  <serviceBehaviors>
    <behavior httpGetEnabled="true" >
      <serviceMetadata/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

# php - SWFUpload 文件选择后会发生什么？

> ID：12181545
> 
> 赞同：2
> 
> 时间：2012-08-29T15:35:35.447
> 
> 标签：php, javascript, swfupload

我在这里迷路了。我正在尝试设置由 SWFUpload 处理的简单文件上传。文件选择后没有任何反应。我没有看到正在发送的请求，我的控制台中也没有任何内容。swf 对象是否应该立即调用我的 upload_url 页面？

```
 var swfu,jobForm;
        var j = jQuery.noConflict();
        j(window).load(function() {
            jobForm = j('.admin-atomic-form form');
            swfu = new SWFUpload({
                upload_url : "URL/upload.php",
                flash_url : "URL/swfupload.swf",
                file_size_limit : "20 MB",
                file_types : "*.doc;*.pdf;*.rtf;*docx;*.jpg;",
                //file_types_description : "All Files",
                file_upload_limit : "1",
                button_placeholder_id : "swfuploader",
                button_image_url : "URL/file-browse.png",
                button_width: 100,
                button_height: 30,
                upload_start_handler : uploadStart,
                upload_success_handler : uploadSuccess
            }); 
            //jobForm.form.submit(function(ev){ev.preventDefault()})
        });

        function uploadStart(){
            //.submit()
            console.log(this,'start');
        };
        function uploadSuccess(){
            //form.submit()
            console.log('success');
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:42:38.050

开始上传文件是一个两步过程：1.您选择一个文件（然后在输入框中填充路径），2.您必须提交表单才能开始实际上传。

我假设您没有执行第 2 步，因为在您的代码中，您已注释掉`form.submit()`

请取消注释此行：`//jobForm.form.submit(function(ev){ev.preventDefault()})`

然后在您选择文件后，提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T22:38:40.997

`SWFUploadObj.startUpload();`需要被触发，这就是向指定的上传 URL 发起 POST 请求的原因。如果这个方法是由一些默认设置触发的，它肯定不是为我做的。

这是我的一些功能的示例：

```
// Bound to file_queued_handler : sets a flag that there is a file waiting to upload 
function swfuFileQueued(file){
    resumeQueued = true;
    $j('#browseFile').val(file.name);
}

//Bound to form submit event:
//a successful upload will submit this form again once the success response with the server-moved and renamed filename comes back from the file upload handling script

function swfuFormSubmit(ev){
    if(uploadSuccess){
        return true;
    } else {
        if(resumeQueued == true){
            ev.preventDefault();
            swfuUploadStart(); // see next function
        } else {
            return true;
        }
    }
}

function swfuUploadStart(){
    try {
        swfu.startUpload(); // <-- The actual method that begins the file upload request
    } catch (e) {
    }
    return false;
}

function swfuProgress(){ ...
function swfuError(){ ...
function swfuSuccess(){ 
    //update input element containing filename or id to send with form
    //update a status box with "Success"
    //uploadSuccess = true 
    //form.submit() once more, this time uploadSuccess will tell the function to continue on and actually submit itself 
```

了解 SWFUpload 过程的有用 URL：[http ://www.dconstructing.com/2010/07/08/making-swfupload-work](http://www.dconstructing.com/2010/07/08/making-swfupload-work)

# less - vs2012的少vstemplate

> ID：12181546
> 
> 赞同：1
> 
> 时间：2012-08-29T15:35:39.093
> 
> 标签：less, visual-studio-2012

如何为 vs2012 创建一个新的 less 文件模板？

就像[Web Workbench](http://www.mindscapehq.com/products/web-workbench/getting-started)所做的一样。

当你安装这个扩展时，你会看到 3 个额外的 LESS SASS coffeeJS 文件模板。

但是，我不想安装此扩展程序。

因为我更喜欢使用另一个扩展，但它错过了我喜欢拥有的这个功能。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:33:17.580

1）创建一个less文件。2) 文件-> 导出模板 3) 选择项目模板 4) 从列表中检查您的较少文件。5）接下来再做几对就完成了。

# android - 从状态栏中选择正在运行的 android 应用程序

> ID：12181547
> 
> 赞同：-2
> 
> 时间：2012-08-29T15:35:43.527
> 
> 标签：android

我的应用程序正在运行，并且在应用程序运行时显示我的图标。当我从下拉列表中选择应用程序时，没有任何反应。

我必须再次单击该程序的图标才能启动它。我确定我在某处遗漏了一些简单的代码。我不是专家，所以任何建议都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:38:25.473

我假设您正在谈论您在通知栏中创建的条目。创建通知时，其中一个参数是`PendingIntent`. 这描述了`Intent`当用户选择您的条目时要调用的。设置它以开始您的活动，它会发生。

# ruby-on-rails - 媒体查询中的 sass 变量 - sass-rails-3.2.3

> ID：12181550
> 
> 赞同：0
> 
> 时间：2012-08-29T15:35:47.193
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sass

我正在尝试在媒体查询中使用变量-

```
$break-small: 320px;
$break-large: 1200px;

.profile-pic {
  float: left;
  width: 250px;
  @media screen and (max-width: $break-small) {
    width: 100px;
    float: none;
  }
  @media screen and (min-width: $break-large) {
    float: right;
  }
} 
```

它说现在可以[在这篇文章中](http://thesassway.com/intermediate/responsive-web-design-in-sass-using-media-queries-in-sass-32)

它抛出一个错误 -

```
Invalid CSS after "...nd (max-width: ": expected expression (e.g. 1px, bold), was "$break-small) 
```

我的宝石文件 -

```
gem 'sass-rails',   '~> 3.2.3' 
```

sass-rails gem v 3.2.3 在 sass gem 后面吗？还是我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:41:35.660

回答我自己的问题-

我查看了我的 Gemfile.lock，其中包含以下内容 -

```
sass (3.1.20)
sass-rails (3.2.5) 
```

After that I simply ran 'bundle update sass' which updated sass to the correct version.

Variables in media queries now working as expected.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:32:48.607

我刚刚在一个新的 Rails 项目中尝试了这种完全相同的风格，使用的宝石与您使用的相同，它就像一个魅力。所以我的猜测是你正在使用`'sass'`文件的扩展名，你应该使用`'scss'`.

两者之间的语法不兼容，因此只需将文件名从（例如）`'mystyle.css.sass'`更改为`'mystyle.css.scss'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T18:10:28.873

试试这个：

```
@mixin breakpoint($point) {
  @if $point == break-small {
    @media only screen and (max-width: 320px) { @content; }
  }
  @else if $point == break-large {
    @media only screen and (min-width: 1200px) { @content; }
  }
} 
```

并像这样引用：

```
.profile-pic {
  float: left;
  width: 250px;
  @include breakpoint(break-small) {
    width: 100px;
    float: none;
  }
  @include breakpoint(break-large) {
    float: right;
  }
} 
```

# javascript - 从 localstorage 加载和解析 xml

> ID：12181554
> 
> 赞同：2
> 
> 时间：2012-08-29T15:36:04.103
> 
> 标签：javascript, xml, local-storage

我有以下内容，它从网站加载 XML 并对其进行解析：

```
function load() {
  xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = parse;
  xhttp.open('GET', 'http://...XML.xml', false);
  xhttp.send();
}

function parse() {
  xmlDoc = xhttp.responseXML.documentElement.childNodes;
  for (var i = 0; i < xmlDoc.length; i++) {
    nodeName = xmlDoc[i].nodeName;
    ...
} 
```

加载后，我将其存储在 localStorage 中，我可以将其作为字符串检索。我需要能够将其转换回 xml 文档，就像：

xmlDoc = xhttp.responseXML.documentElement.childNodes;

确实如此，所以我可以解析它。我一直在寻找一段时间，无法弄清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:02:52.520

基于这里的答案[XML parsing of a variable string in JavaScript](https://stackoverflow.com/questions/649614/xml-parsing-of-a-variable-string-in-javascript) Credit to @tim-down

您需要创建一个 XML 解析器。然后将字符串传递到您的解析实例中。然后你应该能够像以前一样查询它。

```
var parseXml;

if (typeof window.DOMParser != "undefined") {
    parseXml = function(xmlStr) {
        return ( new window.DOMParser() ).parseFromString(xmlStr, "text/xml");
    };
} else if (typeof window.ActiveXObject != "undefined" &&
       new window.ActiveXObject("Microsoft.XMLDOM")) {
    parseXml = function(xmlStr) {
        var xmlDoc = new window.ActiveXObject("Microsoft.XMLDOM");
        xmlDoc.async = "false";
        xmlDoc.loadXML(xmlStr);
        return xmlDoc;
    };
} else {
    throw new Error("No XML parser found");
} 
```

示例用法：

```
var xml = parseXml("[Your XML string here]"); 
```

# c# - 隐藏 ZedGraph 控件的灰色边框

> ID：12181556
> 
> 赞同：3
> 
> 时间：2012-08-29T15:36:09.487
> 
> 标签：c#, controls, border, zedgraph

如何删除 ZedGraph 控件的灰色边框？

只有图形应该是表格，没有灰色边框、标签和标题。

我试图解决这个问题

```
_zgc.MasterPane.Border.Width = 0;
_zgc.MasterPane.Border.IsVisible = false; 
```

但目前没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T18:21:27.570

解决方案是：

```
GraphPane _gp = _zgc.GraphPane;
_gp.Margin.All = 0;
_gp.Legend.IsVisible = false;
_gp.Title.IsVisible = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-11T03:28:12.753

问题是您使用的是 Masterpane 而不是 Graphpane。

```
_zgc.GraphPane.Border.IsVisible = false;
_zgc.GraphPane.Legend.IsVisible = false;
_zgp.GraphPane.Title.IsVisible = false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-05T13:21:26.660

如果您想隐藏除图表内容之外的所有内容：

```
zedGraph.GraphPane.Title.IsVisible = false;
zedGraph.GraphPane.XAxis.IsVisible = false;
zedGraph.GraphPane.YAxis.IsVisible = false;
zedGraph.GraphPane.Border.IsVisible = false;
zedGraph.GraphPane.Chart.Border.IsVisible = false; 
```

您还可以删除图表窗格和控件边框之间的间隙：

```
zedGraph.GraphPane.Margin.All = -1; 
```

# javascript - Ember.js 文本突出显示的粉红色

> ID：12181562
> 
> 赞同：0
> 
> 时间：2012-08-29T15:36:37.193
> 
> 标签：javascript, ember.js

我注意到 ember 应用程序总是有文本突出显示颜色或粉红色。对我来说，这似乎发生在浏览器和操作系统上。是否有任何充分的理由可以轻松更改此设置或任何设置？

例如

![粉红色的文字](../Images/65cf854b988e7b87cc0cb3ae4d54281a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:40:46.470

HTML5 样板默认情况下会这样做......也许你正在使用它？

无论如何，在 css 中进行更改是微不足道的：

```
::-moz-selection {
    background: #anycolour;
}

::selection {
    background: #anycolour;
} 
```

# ruby - Ruby 没有常量值？

> ID：12181568
> 
> 赞同：5
> 
> 时间：2012-08-29T15:36:59.470
> 
> 标签：ruby, constants

可以这样写

```
class Foo
 MY_CONST = 100
end 
```

也可以改变它`Foo::MY_CONST = 123`

Ruby 编译器会发出警告，但无论如何都会更改常量。

所以Ruby没有常量值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:41:21.513

这取决于您想对常量执行哪种操作。

如果你有一个

```
ARRAY = [1,2,3]
#and then 
ARRAY << 4 
```

鲁比不会抱怨。

但是，如果你

```
ARRAY = [1,2,3].freeze
#and
ARRAY << 4
#RuntimeError: can't modify frozen Array 
```

你还可以

```
ARRAY = [1,2,3,4]
#warning: already initialized constant ARRAY 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T23:31:07.283

如果您`freeze` `FOO`, 则尝试重新分配`FOO::MY_CONST`将创建一个 RuntimeError。

```
class FOO
  MY_CONST = 100
end

FOO.freeze
FOO::MY_CONST = 123 
```

给

```
RuntimeError: can't modify frozen Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T16:11:03.523

它们在语义上是常量，因此您可以期望人们不会更改它们。我称它们为自由常量，见[http://pastie.org/4608297](http://pastie.org/4608297)

# sql - 强制使用索引可以提高性能吗？

> ID：12181571
> 
> 赞同：0
> 
> 时间：2012-08-29T15:37:07.817
> 
> 标签：sql, tsql

假设我们有这样的查询：

```
select a.col1, b.col2
from t1 a
inner join t2 b on a.col1 = b.col2
where a.col1 = 'abc' 
```

两者`col1`都`col2`没有任何索引。

* * *

如果我在 where 子句上添加另一个限制，一个始终正确但带有索引的列：

```
select a.col1, b.col2
from t1 a
inner join t2 b on a.col1 = b.col2
where a.col1 = 'abc'
and a.id >= 0  -- column always true and with index 
```

**由于它可能使用`id`列上的索引，查询是否可以更快地执行？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:42:26.660

使用索引`id`来做什么？

这里最昂贵的一点是连接列上的连接，与`id`此无关。

最有可能的情况，它没有任何区别。

可能的结果：它需要更多，因为它`id`总是大于零，所以它进行索引扫描以找到正确的行，然后从中获得与从表中获得的相同的行-scan（如果有`INCLUDE`问题的列覆盖可能会有所不同）。

奇怪的结果：好吧，在数据库优化的世界里发生了奇怪的事情，所以如果有帮助的话我不会吃我的帽子，但我仍然会感到非常惊讶。

但实际上，用不相关的索引强迫不相关的工作对你的事业没有帮助。

编辑：实际上我想到了一个可以提供帮助的案例。在没有直接相关的索引的情况下，SQLServer 通常会使用一些索引来查找，因为即使在这种情况下，查找通常也比扫描做得更好。如果由于某种原因该搜索更好并且由于某种原因它选择了一个不同的索引来搜索，则强制搜索不同的索引可能会*改善*事情。不过我还是会很惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:40:39.077

可能（但不太可能）。这完全取决于查询优化器评估您查询的方式。更好的选择是使用提示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T15:42:35.913

我认为实际上会更糟。因为如果它在这里使用索引来检索所有行，那么与简单地检索所有行相比，这是额外的工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T15:45:45.177

问题的答案是肯定的，如果过滤掉表a的足够多的行，它可以提高性能。

# php - PHP GD imagecreatefromstring 丢弃透明度

> ID：12181573
> 
> 赞同：12
> 
> 时间：2012-08-29T15:37:09.223
> 
> 标签：php, php-gd

我一直在尝试让透明度与我的应用程序一起工作（在存储图像之前动态调整图像大小），我认为在对`imagealphablending`and进行了很多误导之后，我终于缩小了问题的范围`imagesavealpha`。源图像永远不会以适当的透明度加载！

```
// With this line, the output image has no transparency (where it should be
// transparent, colors bleed out randomly or it's completely black, depending
// on the image)
$img = imagecreatefromstring($fileData);
// With this line, it works as expected.
$img = imagecreatefrompng($fileName);

// Blah blah blah, lots of image resize code into $img2 goes here; I finally
// tried just outputting $img instead.

header('Content-Type: image/png');
imagealphablending($img, FALSE);
imagesavealpha($img, TRUE);
imagepng($img);

imagedestroy($img); 
```

从文件加载图像将是一些严重的架构困难；此代码与从 iPhone 应用程序查询的 JSON API 一起使用，在这种情况下更容易（并且更一致）将图像作为 POST 数据中的 base64 编码字符串上传。我是否绝对***需要***以某种方式将图像存储为文件（以便 PHP 可以再次将其加载到内存中）？有没有办法创建一个`$fileData`可以传递给Stream 的方法`imagecreatefrompng`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-09T04:05:30.177

您可以使用此代码：

```
$new = imagecreatetruecolor($width, $height);

// preserve transparency

imagecolortransparent($new, imagecolorallocatealpha($new, 0, 0, 0, 127));

imagealphablending($new, false);

imagesavealpha($new, true);

imagecopyresampled($new, $img, 0, 0, $x, 0, $width, $height, $w, $h);

imagepng($new);

imagedestroy($new); 
```

它将为您制作透明图像。祝你好运 ！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T16:41:01.920

Blech，这最终证明是由于一个完全独立的 GD 调用正在验证图像上传。我忘了在那个代码中添加`imagealphablending`和`imagesavealpha`，它正在创建一个新图像，然后传递给调整大小的代码。无论如何，这可能应该改变。非常感谢 Goldenparrot 将字符串转换为文件名的出色方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T15:43:00.693

> 我是否绝对需要以某种方式将图像存储为文件（以便 PHP 可以再次将其加载到内存中）？

不。

[文档](http://php.net/manual/en/wrappers.data.php)说：

您可以使用`data://`php v5.2.0 中的协议

例子：

```
// prints "I love PHP"
echo file_get_contents('data://text/plain;base64,SSBsb3ZlIFBIUAo='); 
```

# ubuntu - 安装ruby1.8失败（无法访问dpkg）

> ID：12181577
> 
> 赞同：1
> 
> 时间：2012-08-29T15:37:25.713
> 
> 标签：ubuntu, apt-get

我试图在我的远程服务器上安装 ruby​​（这是 esxi 服务器中的 vm 机器（debian）。）我收到了这个错误：

命令：

```
sudo apt-get install ruby1.8 
```

错误 ：

```
W: Not using locking for read only lock file /var/lib/dpkg/lock
E: Unable to write to /var/cache/apt/
E: The package lists or status file could not be parsed or opened. 
```

然后我尝试了：

```
sudo dpkg -- configure -a 
```

输出：

```
dpkg: need an action option

Type dpkg --help for help about installing and deinstalling packages [*];
Use `dselect' or `aptitude' for user-friendly package management;
Type dpkg -Dhelp for a list of dpkg debug flag values;
Type dpkg --force-help for a list of forcing options;
Type dpkg-deb --help for help about manipulating *.deb files;

Options marked [*] produce a lot of output - pipe it through `less' or `more' ! 
```

**更新：**

的输出`mount`

```
/dev/sda3 on / type ext4 (rw,errors=remount-ro)
tmpfs on /lib/init/rw type tmpfs (rw,nosuid,mode=0755)
proc on /proc type proc (rw,noexec,nosuid,nodev)
sysfs on /sys type sysfs (rw,noexec,nosuid,nodev)
udev on /dev type tmpfs (rw,mode=0755)
tmpfs on /dev/shm type tmpfs (rw,nosuid,nodev)
devpts on /dev/pts type devpts (rw,noexec,nosuid,gid=5,mode=620)
/dev/sda1 on /boot type ext4 (rw)
/dev/sdb1 on /home type ext4 (rw)

mount: warning: /etc/mtab is not writable (e.g. read-only filesystem).
       It's possible that information reported by mount(8) is not
       up to date. For actual information about system mount points
       check the /proc/mounts file. 
```

我应该怎么办 ？

# visual-studio-2010 - Visual Studio 2010 无法识别单元测试

> ID：12181578
> 
> 赞同：6
> 
> 时间：2012-08-29T15:37:26.443
> 
> 标签：visual-studio-2010, unit-testing

在现有解决方案中，我添加了一个新的测试项目。在我的测试项目 .cs 文件中，我有一个用 [TestClass] 属性修饰的类和一个用 [TestMethod] 属性修饰的方法。我已经验证了在配置管理器中为测试项目选中了构建复选框（正如我的谷歌搜索显示的那样，其他人遇到了这个问题）。我已将测试项目设置为解决方案的启动项目。当我尝试开始测试时，我得到“无法启动测试项目，因为该项目不包含任何测试”。我对单元测试真的很陌生。我错过了什么？

```
[TestClass]
public class UnitTest1
{
    [TestMethod]
    public void TestMethod1()
    {
       Whole bunch of stuff
       Assert.Inconclusive("Done");
    }
 } 
```

更新：所以我打开了一个新的 VS 实例，转到 File => New => Project => Test Project。没有触摸或编辑任何东西。直接进入cs文件，这里是它的全部内容：

```
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace TestProject2
{
 public class Inspection
 {
    public bool SubmitInsp()
    {
        return true;
    }
 }

 [TestClass]
 public class UnitTest1
 {
    [TestMethod]
    public void TestMethod1()
    {
        Inspection insp = new Inspection();
        bool result = insp.SubmitInsp();

        Assert.IsTrue(result);
    }
 }
} 
```

当我尝试启动它时，关于该项目的相同错误不包含任何测试。还在构建输出“无法加载文件或程序集 '~\my documents\visual studio 2010\Projects\TestProject2\bin\Debug\TestProject2.dll' 或其依赖项之一。不支持操作。（来自异常HRESULT: 0x80131515)"

我不知道单元测试比这简单得多。有没有搞错？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:23:44.330

当一个工作测试项目中的测试突然不再被识别时，我遇到了同样的问题。

将项目文件与另一个工作测试项目中的文件进行比较，我发现主 <PropertyGroup> 节点中缺少 <ProjectTypeGuids> 节点。

在 <PropertyGroup> 节点中添加这一行解决了我的问题：

C＃：

```
<ProjectTypeGuids>{3AC096D0-A1C2-E12C-1390-A8335801FDAB};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids> 
```

VB：

```
<ProjectTypeGuids>{3AC096D0-A1C2-E12C-1390-A8335801FDAB};{F184B08F-C81C-45F6-A57F-5ABD9991F28F}</ProjectTypeGuids> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T15:25:29.637

我可以通过修改此处找到的*devenv.exe*配置文件来使其工作：

`C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe.config`.

将以下行添加到该`<runtime>`部分，然后重新启动 Visual Studio：

```
<loadFromRemoteSources enabled = "true" /> 
```

（这是帮助我的[链接）](http://connect.microsoft.com/VisualStudio/feedback/details/650267/unit-test-adapter-threw-exception-uri-formats-are-not-suppo)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-11T22:00:48.673

The [FrstCBC's anwser](https://stackoverflow.com/a/12977500/244916) did not worked for me. I am on a VirtualBox machine with Windows 7 64 bits and Visual Studio 2012.

I had to **move the output to a local folder** : open the unit tests project properties and in the **Build** tab, browse the **Output path** to a local folder. The tests are now detected and can be run.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-10T23:34:30.193

对我来说，只是我的课程和方法没有`public`（我意识到海报确实有`public`，但我通过谷歌搜索找到了这篇文章“testclass testmethod margin icons missing”）。我的愚蠢错误，但也许它会帮助其他人。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T16:01:03.663

保存到网络文件夹或我计算机本地任何位置的测试项目存在此问题。创建了另一个测试项目并将其保存到我的闪存驱动器中，工作正常。我不知道是因为我的机器是 64 位还是因为它是虚拟机或什么，但我想我只需要在外部存储设备上测试所有内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-21T00:13:25.233

确认所有 .cs 文件在“属性”窗口中都标记为“编译”。如果它被标记为内容，那么你会遇到这个问题。

# mysql - MySQL - 返回匹配查询数据的行数？

> ID：12181583
> 
> 赞同：0
> 
> 时间：2012-08-29T15:37:41.183
> 
> 标签：mysql, group-by, mysql-num-rows

我有一个查询如下：

```
SELECT 1 FROM shop_inventory a JOIN shop_items b ON b.id=a.iid AND b.szbid=3362169 AND b.cid=a.cid WHERE a.cid=1 GROUP BY a.bought 
```

我需要对这些数据做的唯一事情就是计算返回的行数（我可以用`mysqli -> num_rows;`. 但是，我想知道是否有一种方法可以返回与查询匹配的行数，而无需跑`num_rows`？

例如，查询应该返回一行，一个结果，`number_of_rows`。

我希望这是有道理的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:38:49.450

```
select count(*) as `number_of_rows`
from (
    select 1
    from shop_inventory a
    join shop_items b on b.id = a.iid
        and b.szbid = 3362169
        and b.cid = a.cid
    where a.cid = 1
    group by a.bought
) a 
```

在这种情况下，由于您没有使用任何聚合函数并且`GROUP BY`仅仅是为了消除重复，您还可以执行以下操作：

```
select count(distinct a.bought) as `number_of_rows`
from shop_inventory a
join shop_items b on b.id = a.iid
    and b.szbid = 3362169
    and b.cid = a.cid 
```

# javascript - jQuery 移动标签和锚点

> ID：12181586
> 
> 赞同：0
> 
> 时间：2012-08-29T15:37:53.150
> 
> 标签：javascript, jquery, jquery-mobile, tabs, anchor

我想使用 jQuery Mobile 创建一个选项卡式移动页面。我已经掌握了创建选项卡（例如 Tab1、Tab2、Tab3、Tab4）和让每个选项卡加载新的内容页面的基础知识。**我将如何在特定选项卡中使用锚点？**例如，如果有人想为一个链接添加书签，该链接将他们直接带到 Tab4 Anchor1。

我对 JavaScript 和 jQuery 很陌生。

下面的代码：

```
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>test</title>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0b3/jquery.mobile-1.0b3.min.css">
<!-- JavaScript HTML requirements -->
<script src="http://code.jquery.com/jquery-1.6.3.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0b3/jquery.mobile-1.0b3.min.js"></script>
</head>

<body>
<div data-role="page" data-theme="d" id="home" data-id="nav">
  <header data-role="header" >
    <h1>TEST</h1>
    <div data-role="navbar" data-id="nav">
      <ul>
        <li><a href="#home" data-icon="home" data-theme="d" class="ui-btn-active ui-state-persist" >Home</a></li>
        <li><a href="#speakers" data-icon="star" data-theme="d">Speakers</a></li>
        <li><a href="#" data-icon="grid" data-theme="d">News</a></li>
      </ul>
    </div>
  </header>
  <section data-role="content"> Home </section>
  <footer data-role="footer" class="ui-bar"> <a href="" data-icon="gear" class="ui-btn-right">Buy Tickets</a> </footer>
</div>
<div data-role="page" data-theme="d" id="speakers">
  <header data-role="header" data-id="nav" >
    <h1>TEST</h1>
    <div data-role="navbar" >
      <ul>
        <li><a href="#home" data-icon="home" data-theme="d">Home</a></li>
        <li><a href="#speakers" data-icon="star" data-theme="d"
        class="ui-btn-active ui-state-persist">Speakers</a></li>
        <li><a href="#" data-icon="grid" data-theme="d">News</a></li>
      </ul>
    </div>
  </header>
  <section data-role="content">The name attribute specifies the name of an anchor.

The name <a href="#jib">attribute</a> is used to create a bookmark inside an HTML document.

Note: The upcoming HTML5 standard suggests using the id attribute instead of the name attribute for specifying the name of an anchor. Using the id attribute actually works also for HTML4 in all modern browsers.

Bookmarks are not displayed in any special way. They are invisible to the reader. <a name="jib"></a> Speakers </section>
  <footer data-role="footer" class="ui-bar"> <a href="" data-icon="gear" class="ui-btn-right">Buy Tickets</a> </footer>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T16:53:13.837

我想我理解，但如果我误解了你的问题，请随时发表评论。

我相信您误解了内部 JQuery 链接的工作原理。首先是看一下 JQuery Mobile 页面结构，尤其是在您的情况下的“多页模板结构”：http: [//jquerymobile.com/test/docs/pages/page-anatomy.html](http://jquerymobile.com/test/docs/pages/page-anatomy.html)

基本上，页面的每个“嵌入页面中间”部分都需要是一个标有`data-role="page"`标签的独立 div。它的 ID 将是您将锚点指向的内容。

因此，为了让您的内部`<a href="#jib">`工作，您必须有一个 ID = "jib" 的内置 div

**评论后更新的答案**

您正在寻找的是`$.mobile.silentScroll`. 您想要获取锚链接的 Y 位置，然后让页面滚动到它。不过有一个小问题。由于页面转换时会发生 JQuery Mobile 动画，您需要在滚动发生之前添加一点暂停。

```
function loadJib()
{
  $.mobile.changePage('#jib',{transition:"slide"});

  var yPos = $('#mylink').get(0).offsetTop;

  setTimeout(function(){
    $.mobile.silentScroll(yPos);
  },800); 
```

看看我是怎么做到的（延迟 0.8 秒）。：

[http://jsbin.com/ahevav/3/edit](http://jsbin.com/ahevav/3/edit)

# jdbc - Clojure JDBC 事务未在 HSQL 中回滚 BatchUpdateException

> ID：12181593
> 
> 赞同：2
> 
> 时间：2012-08-29T15:38:11.573
> 
> 标签：jdbc, clojure, hsqldb, apache-commons-dbcp

我正在使用 clojure.java.jdbc 编写一个 Clojure 程序。我正在使用 DBCP 来汇集与 HSQL 2.2.8 的连接。我有一个（事务）块，我在其中测试模式是否存在，如果不存在，则创建它和一堆表。架构创建后的语句之一（我相信是 MERGE 语句）会引发 BatchUpdateException。

问题是架构创建不会在 BatchUpdateException 上回滚，即使它们是同一（事务）块的一部分。

Clojure JDBC 与 DBCP 或 HSQL 交互是否存在已知问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:52:15.337

没关系。

显然，事务不适用于架构更改。怎么回事？

# php - php 没有编码破折号（除其他外正确）；

> ID：12181606
> 
> 赞同：0
> 
> 时间：2012-08-29T15:39:00.750
> 
> 标签：php, html-entities, html-encode

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:19:24.347

Because the data is coming from JSON, it should be encoded in a Unicode character set, the default being UTF-8 ^([Sources: [Douglas Crockford](http://www.json.org/), [RFC4627](http://www.ietf.org/rfc/rfc4627.txt)]).

This means that in order to store a non-ASCII character in your database, you will either need to convert the encoding of the incoming data to the character set of you database, or (preferably) use a Unicode character set for your database. The most common Unicode character set - and the one I'd recommend you use for this purpose - is UTF-8.

It is likely that your database is set up with one of the latin character sets ([ISO-8859-*](http://en.wikipedia.org/wiki/ISO/IEC_8859)), in which case you will most likely simply need to change the character set used for your table and it won't break any of your existing data - assuming that you currently have no records that use any characters outside the lower 128\. Based on you comments above, you should be able to make this change using phpMyAdmin - you will need to ensure that you change each existing column you wish to alter explicitly, changing the character set of a table/database will only affect new columns/tables that are created without specifying a character set.

When you are outputting data to the client, you will also need to tell it that you are outputting UTF-8 so it knows how to display the characters correctly. You do this by ensuring you append `; charset=utf-8` to the `Content-Type:` header you send along with text-based content.

For example, at the top of a PHP script that produces HTML that is encoded with UTF-8, you would add this line:

```
header('Content-Type: text/html; charset=utf-8'); 
```

It is also recommended that you declare the character set of the document within the document itself. This declaration must appear *before* any non-ascii characters that exist within the document - as a result, it is recommended that you place the following `<meta>` tag as the first child of the `<head>`:

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

If you are producing XHTML with an XML declaration at the top, the character set may be declared there, instead of using a `<meta>` tag:

```
<?xml version="1.0" encoding="UTF-8" ?> 
```

Remember, the use of a character set definition in the `Content-Type:` header is not limited to `text/html` - it makes sense in the context of any `text/*` family MIME type.

Further reading: [What Every Programmer Absolutely, Positively Needs To Know About Encodings And Character Sets To Work With Text](http://kunststube.net/encoding/)

Also, make sure you [validate your markup](http://validator.w3.org/).

# javascript - 为什么我不能让我的正则表达式工作？

> ID：12181608
> 
> 赞同：2
> 
> 时间：2012-08-29T15:39:06.803
> 
> 标签：javascript, regex

我做错了什么，因为下面的两个字符串在下面`false`测试时都返回了？

```
 var pattern = "^[\s\da-zA-ZåäöÅÄÖ_]+$"
    var reg = new RegExp(pattern);

    console.log(reg.test("This should be invalid as it is full with invalid chars. #!¤%&/()=?"));
    console.log(reg.test("This is an valid string, despite that Swedish chars such as ÅÄÖ are used")); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T15:40:16.893

您需要在模式中的反斜杠上加倍。

```
var pattern = "^[\\s\\da-zA-ZåäöÅÄÖ_]+$" 
```

问题在于，当您以这种方式构建正则表达式对象时，会对字符串进行*两次*传递：一次将其解释为字符串，然后将其解释为正则表达式。这两种微语法都`\`用来表示某些东西，因此通过将它们加倍，您可以从字符串常量解析中得到一个反斜杠。

如果您的模式确实是一个常量，而不是您从单独的部分动态构造的东西，那么您可以只使用正则表达式的本机语法：

```
var pattern = /^[\s\da-zA-ZåäöÅÄÖ_]+$/; 
```

只需要一个反斜杠，因为模式只解析一次，作为正则表达式。

# windows-runtime - 在 WinRT 中，默认 .Ctor 的可见性是什么？

> ID：12181611
> 
> 赞同：0
> 
> 时间：2012-08-29T15:39:10.907
> 
> 标签：windows-runtime, default-constructor, class-visibility

作为一个例子（以及我提出问题的原因），据我从 ILDASM 显示的 WinMD 信息中可以看出，类 Windows.XAML.Media.Transform 没有定义的构造函数。

但是，如果我尝试从该类派生，在我的 C# 项目中，编译器会抱怨找不到非构造函数。

在我看来，这可能是构造函数隐藏可见性的结果。

在C#中声明私有（或内部）构造函数也可以达到同样的效果，但必须声明，否则编译器会创建公有构造函数，而该类确实是可派生的。

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T16:03:31.457

我认为这里发生的事情是，该类已明确声明了一个内部（默认）构造函数，没有公共构造函数，因此开发人员可以从定义程序集中的类继承。程序集之外的其他所有人都无法从该类继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:09:56.133

WinRT 是 COM 概念的演变，是一个完全不同的故事，因为我们谈论的是二进制组件而不是源继承。这个 ABI 故事中最重要的一点是，组件中唯一可以使用的就是那些通过接口公开的东西。构造函数不能在接口中定义，静态也不能，这意味着 WinRT 也需要这些接口。

WinRT 组件的 C# 视图是语言投影的产物，而不是组件的真实布局。要完全了解其中的内容，您应该查看 C++ 中的组件，使用本机库 WRL，该库是用于构建 WinRT API 的库。

Constructor 是 WinRT 组件的工厂接口的投影（和静态，WinRT 新，因为它们在 COM 中不存在，有类似的处理）。

当您从 C# 中“新建”一个对象时，首先会创建一个与该组件关联的 Factory 组件。在此之后，工厂创建对象。出于这个原因，构造函数问题应该从工厂组件的角度来看，而不是从构造函数的角度来看（存在于底层实现中，但并不重要，因为你看到的组件只是它的二进制合约，ABI） .

因此有不同的选择： 1\. 工厂不存在，您无法创建组件。如果 Factory 接口是内部的，则您不能使用它，也不能创建对象。2\. 存在工厂并暴露默认构造函数。在 C# 中，您可以新建对象 3\. 存在自定义工厂并公开自定义构造函数（whit 参数）。

ITransformFactory 是私有的，我相信这可以解释您所看到的行为。

关于这个主题还有更多内容，因为 WinRT 聚合是它们提供二进制继承和版本控制的方式，但这是另一个（非常长的）故事。

仍在挖掘，永远不会停止，这是我们工作中有趣的部分 :)

# javascript - 如何将水平平滑滚动应用于（包括示例）JQuery 网站？

> ID：12181616
> 
> 赞同：0
> 
> 时间：2012-08-29T15:39:15.320
> 
> 标签：javascript, jquery, navigation, scroll, smooth

一个非常慷慨的 Stack Overflow 用户帮助我进行了以下拖动水平导航（见此处：http: [//jsfiddle.net/eT5MM/2/](http://jsfiddle.net/eT5MM/2/)），我现在正在尝试实现 JQuery 平滑水平滚动作为导航的另一种形式，如果用户在移动设备上：[http ://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizo​​ntal-page-scrolling-with-jquery/](http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizontal-page-scrolling-with-jquery/)

不幸的是，我的参考链接不能正常工作，我不确定是否存在冲突的 JavaScript 或其他不同的东西。该网站目前没有上线，所以很遗憾我无法分享该代码，但它与上面的 JSFiddle 代码几乎完全相同，我正在使用

```
<a name="Name"> 
```

和

```
<a href="#Name"> 
```

导航页面。

谢谢！一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:34:18.673

使用与上一个问题相同的代码，这里是可点击的滚动菜单

[提琴手](http://jsfiddle.net/TguXM/)

# delphi - 在 Delphi 中使用 `in` 关键字会导致“E1012 常量表达式违反子范围界限”

> ID：12181617
> 
> 赞同：14
> 
> 时间：2012-08-29T15:39:21.790
> 
> 标签：delphi, compiler-errors, delphi-2009

我在一些 Delphi 代码中遇到了一些相当不寻常的行为。使用`in`关键字检查项目是否在常量数组中时，出现以下编译错误：

> E1012 常量表达式违反子范围界限

常量定义如下：

```
type TSomeEnum = (seFoo = 1000,
                  seBar = 2000,
                  seBoo = 3000,
                  seFar = 4000,
                  seFooBar = 5000,
                  seBooFar = 6000,
                  seLow = 1000,
                  seHigh = 6000,
                  seCount = 6); 
```

失败的行如下：

```
if someObj.someProperty in [seFoo, seFar, seFooBar] then
... 
```

[虽然我理解此处发布的另一个问题中](https://stackoverflow.com/questions/10599685/e1012-constant-expression-violates-subrange-bounds-why-does-it-work-with-varia)显示的错误背后的原因，其中使用变量时未在编译时对整数数组进行边界检查，但我遇到与常量数组相同的问题似乎很奇怪肯定在范围内。

`or`现在，我已经用包含子句的（更大的）语句替换了该行。然而，这显然并不理想。谁能解释我为什么会遇到这个问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-29T16:30:45.100

关于文档[`Sets`](http://docwiki.embarcadero.com/RADStudio/en/Structured_Types)说：

> 基本类型最多可以有 256 个可能的值，它们的序数必须在 0 到 255 之间。

因此，即使您可以拥有任何值的枚举，该`if xx in [a,b,c]`语句也会在此处失败，因为集合不能包含大于 255 的值。

请改用 case 语句：

```
case xx of
  a,b,c : // Make something 

end; 
```

# image - RGB 图像转二值图像

> ID：12181620
> 
> 赞同：4
> 
> 时间：2012-08-29T15:39:32.867
> 
> 标签：image, matlab, image-processing, rgb

我想在 MATLAB 中加载 RGB 图像并将其转换为二进制图像，在这里我可以选择二进制图像有多少像素。例如，我将 300x300 png/jpg 图像加载到 MATLAB 中，我最终会得到一个可能是 10x10 像素的二进制图像（像素只能是 #000 或 #FFF）。

这是我迄今为止尝试过的：

```
load trees % from MATLAB
gray=rgb2gray(map); % 'map' is loaded from 'trees'. Convert to grayscale.
threshold=128;
lbw=double(gray>threshold);
BW=im2bw(X,lbw); % 'X' is loaded from 'trees'.
imshow(X,map), figure, imshow(BW) 
```

（我从互联网搜索中获得了上述一些内容。）

我在做`imshow(BW)`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T15:50:29.690

您的第一个问题是您混淆了[索引图像](https://www.mathworks.com/help/matlab/creating_plots/image-types.html#f2-155)（具有颜色图`map`）和[RGB 图像](https://www.mathworks.com/help/matlab/creating_plots/image-types.html#f2-12468)（没有）。您在示例中加载的示例内置图像`trees.mat`是索引图像，因此您应该使用该函数[`ind2gray`](https://www.mathworks.com/help/images/ref/ind2gray.html)首先将其转换为[灰度强度图像](https://www.mathworks.com/help/matlab/creating_plots/image-types.html#f2-175)。对于 RGB 图像，该函数[`rgb2gray`](https://www.mathworks.com/help/matlab/ref/rgb2gray.html)会执行相同的操作。

接下来，您需要确定用于将灰度图像转换为二值图像的阈值。我建议使用该函数[`graythresh`](https://www.mathworks.com/help/images/ref/graythresh.html)，它将计算要插入[`im2bw`](https://www.mathworks.com/help/images/ref/im2bw.html)（或更新[`imbinarize`](https://www.mathworks.com/help/images/ref/imbinarize.html)）的阈值。以下是我将如何完成您在示例中所做的事情：

```
load trees;             % Load the image data
I = ind2gray(X, map);   % Convert indexed to grayscale
level = graythresh(I);  % Compute an appropriate threshold
BW = im2bw(I, level);   % Convert grayscale to binary 
```

这是原始图像和结果的`BW`样子：

![在此处输入图像描述](../Images/61b1ebd800e75af3ec4b6e8ff53b9426.png)

![在此处输入图像描述](../Images/86ec3327c2789844e7d778b228982772.png)

对于 RGB 图像输入，只需在上面的代码中`ind2gray`替换为。`rgb2gray`

关于调整图像大小，可以使用图像处理工具箱功能轻松完成[`imresize`](https://www.mathworks.com/help/images/ref/imresize.html)，如下所示：

```
smallBW = imresize(BW, [10 10]);  % Resize the image to 10-by-10 pixels 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:50:08.693

这是因为`gray`是 的规模`[0,1]`，而`threshold`是`[0,256]`。这会导致`lbw`一大堆`false`. 这是解决问题的修改代码：

```
load trees % from MATLAB
gray=rgb2gray(map); % 'map' is loaded from 'trees'. Convert to grayscale.
threshold=128/256;
lbw=double(gray>threshold);
BW=im2bw(X,lbw); % 'X' is loaded from 'trees'.
imshow(X,map), figure, imshow(BW) 
```

结果是：

![在此处输入图像描述](../Images/f25d6d10981da06798618f0b87d1d8c4.png)

# internet-explorer-9 - 在 IE9 中强制兼容模式

> ID：12181622
> 
> 赞同：1
> 
> 时间：2012-08-29T15:39:46.350
> 
> 标签：internet-explorer-9, compatibility

我已经经历了几次迭代，但是在正确地在 IE9 中渲染我的 wordpress 网站时遇到了严重的麻烦。

该网站是[点击这里](http://www.dasilvamotorsport.com)。当然，在 chrome/FF 中完美运行。

IE9 本机模式偶尔会抛出一个硬 js 脚本错误（我正在查看的单独问题）但强制兼容模式似乎可以正确呈现它。

所以现在的问题是，试图在 IE9 中自动强制 IE8 兼容。从我读到的应该这样做：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" charset="UTF-8" /> 
```

但它什么也没做。

我尝试了各种变化，包括：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8, chrome=1">
<meta http-equiv="X-UA-Compatible" content="IE=IE8"> 
```

而且没有喜悦。

现在我在标题中有以下内容：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8, chrome=1"> 
```

如果您实际查看 IE8/9 中的调试，它会显示：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8, chrome=1" charset="UTF-8" <meta=""/> 
```

我不知道它为什么/在哪里注入字符集和杂散元标记。在 chrome 中它显示正确。

元数据应该有一个尾随/吗？我已经尝试过两种方式，IE 仍然将元数据添加到末尾。

有什么建议么？

感谢您对此的帮助。

尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:56:36.370

这对我来说很好：

```
<meta http-equiv="X-UA-Compatible" content="IE=8"/> 
```

您缺少网站上的关闭 / ，这导致它在页面源中显示为无效标记。

# facebook-graph-api - 如何在 Facebook 的新闻行情上发布“X 正在玩 MyGame”？

> ID：12181625
> 
> 赞同：0
> 
> 时间：2012-08-29T15:39:56.630
> 
> 标签：facebook-graph-api, facebook-opengraph, news-ticker

当我的朋友在玩基于 Facebook 的游戏时，我在新闻代码中看到“朋友的名字正在玩游戏的名字”。如何为 iOS 游戏实现相同的功能？有没有一种特殊的方法可以做到这一点，还是只是使用 Open Graph 动作和对象来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:31:24.433

这些是自动的“发现故事”——你不能手动发布它们

# live - 以不同的分辨率和比特率将视频从 XSplit 重新流式传输到多个 JustinTV/TwitchTV 频道

> ID：12181626
> 
> 赞同：0
> 
> 时间：2012-08-29T15:39:57.007
> 
> 标签：live, rtmp, flash-media-server, transcoding

我有一个非常简单的问题，但我猜答案可能更复杂一些。

好的。我们走吧。我有一个名为 Xsplit Broadcaster ( [http://www.xsplit.com/)](http://www.xsplit.com/)的应用程序。它支持通过 RTMP 流式传输视频。现在我想做的是：

```
 +--(720p)--> TwitchTV FirstChannel
XSplit --(720p RTMP)-->[MyTranscodingServer]--+
                                              +--(360p)--> TwitchTV SecondChannel 
```

有没有一种简单的方法可以做到这一点？

附加信息：两个频道都使用用户名/密码或流密钥在其 RTMP 端点上接受标准 RTMP 流。服务器操作系统是 GNU/Linux

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:26:45.753

是的答案有点复杂。最简单的方法是使用 Gstreamer www.gstreamer.net 进行上述操作。它将接收 rtmp，然后您可以将其转码为其他两种格式。但是，如果您不了解 gstreamer，则必须稍微学习一下。

另一种选择是 ffmpeg，您在其中读取源复制它（比如进入命名管道）并为两个输出运行两个 ffmpeg。

两种方法都可以。gstreamer 将允许您编写自己的应用程序，这可以让您在未来获得更多控制权。ffmpeg 同样强大（gstreamer 使用 ffmpeg 进行大量操作），但正如我之前所说，gst 应用程序将来会提供更大的灵活性（如果你需要的话）。但是，您可以从命令行运行第一个版本。

像这样的东西应该适用于 gstreamer：[你必须找到你需要的确切管道。这只是一个指导]

```
 gst-launch rtmpsrc <options> ! decodebin2 name=d ! tee name=vt ! queue ! x264enc <options> ! flvmux name=m1 ! rtmpsink d. ! tee name=at ! faac <options> ! m1\. vt. ! queue ! x264enc <otheroptions> ! flvmux name=m2 ! rtmpsink at. ! queue ! faac <otheroptions> m2\. 
```

FFmpeg cmd 行应该类似于：

```
 ffmpeg -i rtmp://src -acodec aac <audio options> -vcodec libx264 <video options> -f flv rtmp://output 
```

但我不是 100% 确定它是否会像那样直接提供 rtmp 输出。如果没有，您可能必须使用 ffserver。

# asp.net-mvc - 如何在 Razor MVC 4 中使用 Ajax 控件工具包？

> ID：12181630
> 
> 赞同：4
> 
> 时间：2012-08-29T15:40:09.470
> 
> 标签：asp.net-mvc, c#-4.0, ajaxcontroltoolkit

如何在 ASP.net MVC4 Razor 模板应用程序中使用来自 Ajax Control 工具包的[Ajax Slider ？](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Slider/Slider.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:50:45.923

Ajax toolkit doesn't work with MVC because it was built for WebForms. So You have to use alternates for that purpose like "JQUERY".

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T10:22:35.043

您无法使用 MVC 4 的 AJAX 控件工具包，因为它是在 Web 窗体中构建的一组用户控件，并且仅与 ASP.NET Web 窗体兼容。jQuery、DevExpress、Infragistics 和其他工具包可用于 MVC。

检查此处的链接：[Asp.Net MVC 4 的 Dev Express 工具包](http://mvc.devexpress.com/)

# javascript - 在javascript中动态创建类

> ID：12181633
> 
> 赞同：2
> 
> 时间：2012-08-29T15:40:21.793
> 
> 标签：javascript, google-chrome

如果我动态定义和创建类的实例，如下所示：

```
var type = 'Animal';
window[type] = function() {};
var animal1 = new window[type]();
var animal2 = new Animal(); 
```

然后`animal1`将在 Chrome 调试器中显示为`Object`（但具有正确属性）的实例，而`animal2`将具有 type `window.Animal`。

何时`Animal`静态定义：

```
function Animal() {} 
```

这两个对象都被视为`Animal`.

如何在动态定义函数（不使用 eval）时实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:21:49.513

Chrome 控制台向您显示的外观似乎由以下因素决定：

1.  构造函数的`name`属性，或
2.  构造函数*最初分配*给的变量名称（如果`name`未设置）。

**情况1：**

```
var ClassA = function ClassB() {};
new ClassA();
// reports a `ClassB` object 
```

构造函数的`name`属性设置为`ClassB`，这就是 Chrome 报告的内容。函数的`name`只能在定义时设置，因此`function funcName(){}`设置`name`，而`func=function(){}; f.name='funcName';`不能。

**案例二：**

```
var ClassA = function() {};
ClassB = ClassA;
new ClassB();
// reports a `ClassA` object 
```

构造函数最初分配给`ClassA`，因此该名称似乎被烧入构造函数中，即使它在另一个变量别名下使用也是如此。事实上，doing`delete window.ClassA`并不会阻止新构造的对象将自己报告为 ClassA 对象：

```
var ClassA = function() {};
ClassB = ClassA;
delete window.ClassA;
new ClassB();
// still reports a `ClassA` object
// even though `ClassA` is no longer a defined variable name 
```

这就是您的“动态定义”案例中发生的事情。第一`window[type] = function() {};`行将构造函数的结果对象永久标记为类型“ `anonymous function that's a property of window`”。

请注意，这些控制台装饰不会影响程序的功能，因为所有对象/原型功能仍按预期工作。

# c# - 未找到可执行文件中包含的合同程序集

> ID：12181634
> 
> 赞同：1
> 
> 时间：2012-08-29T15:40:24.413
> 
> 标签：c#, mef, .net-assembly, contract

我正在使用 MEF 开发插件系统。基本插件与可执行文件合并（使用`ilmerge`）以获得一个可执行文件。这些插件是使用`AssemblyCatalog`. 但是也应该可以使用`DirectoryCatalog`.

我的类库项目引用合同库并使用 MEF 导出一个类。当可执行文件尝试加载 dll 时，它声称它无法解析对合同库的依赖关系 - 合同库包含在 exe 中。如果我将 Contract.dll 复制到同一目录，它就可以工作。但它无论如何都包含在exe中？

我怎样才能避免复制合同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:57:04.757

尝试使用此代码以确保您在主机中公开您的库

```
AssemblyCatalog assemblyCatalog = new AssemblyCatalog(Assembly.GetExecutingAssembly());
DirectoryCatalog directoryCatalog = new DirectoryCatalog(@"...");//Replace with your path

AggregateCatalog catalog =
    new AggregateCatalog(new ComposablePartCatalog[] { assemblyCatalog, directoryCatalog  }); 

CompositionContainer container = new CompositionContainer(catalog); 
```

# windows - 在窗口中的列分隔符上拆分

> ID：12181635
> 
> 赞同：0
> 
> 时间：2012-08-29T15:40:29.013
> 
> 标签：windows, perl, cmd

```
06/24/2012  09:58 AM                 0 Backup of deleted Report 20120622.xlk
08/20/2012  06:51 PM            28,160 deleted 9 2 Foundation Installs on March 7th.xls
08/20/2012  06:51 PM            31,232 deleted-Installations March 10.xls
08/20/2012  06:51 PM            37,821 deleted Support Process 1.0.pdf
08/20/2012  06:51 PM            57,344 deleted_Support_Process_3_18_2010 V2.vsd 
```

嘿家伙。我正在为一些文件系统分析编写一个 Perl 实用程序。我在 Windows 中使用 DIR 列出某些文件。我想获取访问日期（第一列）和文件名（最后一列）。许多文件名都有空格，所以我不能轻易地用空格分割。理想情况下，我应该在列分隔符上拆分。

*   有谁知道我应该为这样的 Windows (XP) 输出添加什么字符来获取每个单独的列？
*   或者，如果没有一个好的角色可以拆分，是否有以 Perl 为中心的策略来获取我需要的两列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:45:19.930

存在一个纯 Perl 解决方案。该[`stat`](http://perldoc.perl.org/functions/stat.html)函数可用于获取访问时间。

否则，您可以在空格上拆分：

```
#!/usr/bin/env perl

use strict;
use warnings;

while (<DATA>) {
    chomp;
    my ( $date, undef, undef, undef, $name ) = split " ", $_, 5;
    print "$date: $name\n";
}

__DATA__
06/24/2012  09:58 AM                 0 Backup of deleted Report 20120622.xlk
08/20/2012  06:51 PM            28,160 deleted 9 2 Foundation Installs on March 7th.xls
08/20/2012  06:51 PM            31,232 deleted-Installations March 10.xls
08/20/2012  06:51 PM            37,821 deleted Support Process 1.0.pdf
08/20/2012  06:51 PM            57,344 deleted_Support_Process_3_18_2010 V2.vsd 
```

您可以使用按*列*`unpack`使用数据。

 *```
while (<DATA>) {
    chomp;
    my ( $date, $filename ) = unpack 'A10 x29 A*';
    print "$date: $filename\n";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T15:49:02.763

该`split`函数有一个可选的第三个参数来定义您拆分的最大字符串数：

```
my ($date, $time, $ampm, $size, $name) = split /\s+/, $input, 5; 
```

解析的输出`dir`是不明智的。您可以使用该函数在 Perl 中打开一个目录`opendir`并遍历条目：

```
open my $directory, $dirname or die;
while(defined(my $file = readdir $directory)) {
   next if -d "$dirname/$file"; # skip directories
   my $mtime = (stat "$dirname/$file")[9]; # we use the mtime (last modified)
   printf "%10d %s", $mtime, $string;
} 
```

您可以查阅文档以获取该`stat`函数的更多选项，包括访问时间或文件大小的数组索引。时间以 Unix 时间（自 1970 年 1 月 1 日 00:00 起的秒数）给出，但可以转换`localtime`为更易读的格式。*

# php - 带有 PHP 的 Jira 肥皂

> ID：12181637
> 
> 赞同：1
> 
> 时间：2012-08-29T15:40:35.540
> 
> 标签：php, jsp, soap, jira, jira-plugin

我很少看到有关使用 php 开发客户端网站以远程调用 JiRA 的说明。

目前我正在尝试使用 JSP/Java 制作一个肥皂客户端来连接到本地 jira 实例。我想创建和搜索问题。我们目前在使用 Maven2 并从存储库获取我们需要的所有文件时遇到了一些问题，因为我们位于主要防火墙后面（是的，我使用了代理）。

我有丰富的 PHP 经验，想知道使用 PHP soapclient 调用是否可以完成工作。

[http://php.net/manual/en/soapclient.soapclient.php](http://php.net/manual/en/soapclient.soapclient.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:15:06.163

是的，可以使用[SOAP](https://developer.atlassian.com/display/JIRADEV/Creating+a+JIRA+SOAP+Client)或[XML-RPC](https://developer.atlassian.com/display/JIRADEV/JIRA+XML-RPC+Overview)来完成。

使用 API 非常简单——查看[API 文档](http://docs.atlassian.com/rpc-jira-plugin/4.4/com/atlassian/jira/rpc/soap/JiraSoapService.html)以找到适合您的功能。您的代码应类似于：

```
<?
$soapClient = new SoapClient("https://your.jira/rpc/soap/jirasoapservice-v2?wsdl");
$token = $soapClient->login('user', 'password');
...  
... # get/create/modify issues
... 
?> 
```

添加新评论的示例：

```
$issueKey = "key-123";
$myComment = "your comment";

$soapClient = new SoapClient("https://your.jira/rpc/soap/jirasoapservice-v2?wsdl");
$token = $soapClient->login('user', 'password');
$soapClient->addComment($token, $issueKey, array('body' => $myComment)); 
```

创建问题的示例：

```
$issue = array(
    'type'=>'1',
    'project'=>'TEST',
    'description'=>'my description',
    'summary'=>'my summary',
    'priority'=>'1',
    'assignee'=>'user',
    'reporter'=>'user',
);
$soapClient = new SoapClient("https://your.jira/rpc/soap/jirasoapservice-v2?wsdl");
$token = $soapClient->login('user', 'password');
$soapClient->createIssue($token, $issue); 
```

请注意，您需要`php-soap`在 linux 中安装（或在 windows 中等效）才能使用 SOAP 库。

# android - 使用jsoup解析xml

> ID：12181638
> 
> 赞同：0
> 
> 时间：2012-08-29T15:40:37.267
> 
> 标签：android, xml, parsing, jsoup

我需要使用 Jsoup、[XML](http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=4500)解析这个 xml，但我不知道 Jsoup 是如何工作的。我阅读了网页[jsoup 站点](http://jsoup.org/)，但我不明白如何解析。需要帮助，我需要学习如何使用它。

我尝试使用简单的 XML 解析器进行解析，但显示此错误：第 3 行第 10 列错误：格式不正确（无效令牌）。

```
public class xml4500 extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_xml4500);

 TextView tv = (TextView) findViewById(R.id.tv);

    try {
        URL url = new URL("http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=4500");
        ExampleHandler4500 myExampleHandler = new ExampleHandler4500();
        Xml.parse(url.openStream(), Xml.Encoding.UTF_8, myExampleHandler);

        List<ParsedExampleDataSet4500> parsedExampleDataSetList = 
                myExampleHandler.getParsedData();

    for(ParsedExampleDataSet4500 parsedExampleDataSet : parsedExampleDataSetList){
            tv.append(parsedExampleDataSet.toString());

    }

    } catch(Exception e){
        tv.setText("Error:" + e.getMessage());
    }

} 
```

}

处理程序

```
public class ExampleHandler4500 extends DefaultHandler{

private boolean in_indices = false;
private boolean in_fecha = false;
private boolean in_indice = false;
private boolean in_encabezado = false;
private boolean in_columna = false;
private boolean in_titulo = false;
private boolean in_datos = false;
private boolean in_fila = false;

private StringBuilder mStringBuilder = new StringBuilder();

private ParsedExampleDataSet4500 mParsedExampleDataSet = new ParsedExampleDataSet4500();
private List<ParsedExampleDataSet4500> mParsedDataSetList = new ArrayList<ParsedExampleDataSet4500>();

public List<ParsedExampleDataSet4500> getParsedData(){
    return this.mParsedDataSetList;
}

@Override
public void startDocument() throws SAXException {
    this.mParsedExampleDataSet = new ParsedExampleDataSet4500();
}

@Override
public void endDocument() throws SAXException {

}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    if (localName.equals("indices")){
        this.in_indices = true;

    }else if(localName.equals("fecha")){
        this.in_fecha = true;
    }else if(localName.equals("indice")){
        this.in_indice = true;
        String attrValue1 = attributes.getValue("nombre");
        String nombre = String.valueOf(attrValue1);
        mParsedExampleDataSet.setNombre(nombre);

    }else if(localName.equals("encabezado")){
        this.in_encabezado = true;
    }else if(localName.equals("columna")){
        this.in_columna = true;
    }else if(localName.equals("titulo")){
        this.in_titulo = true;
    }else if(localName.equals("datos")){
        this.in_datos = true;
    }else if(localName.equals("fila")){
        this.in_fila = true;

        this.mParsedExampleDataSet = new ParsedExampleDataSet4500();

    }
    mStringBuilder.setLength(0);

}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    if(localName.equals("indices")){
        this.mParsedDataSetList.add(mParsedExampleDataSet);
    }else if(localName.equals("fecha")){
        this.in_fecha = false ;  
    }else if(localName.equals("indice")){
        this.in_indice = false;
    }else if(localName.equals("encabezado")){
        this.in_encabezado = false;
    }else if(localName.equals("columna")){
        this.in_columna = false;
    }else if(localName.equals("titulo")){
        this.in_titulo = false;
    }else if(localName.equals("datos")){
        this.in_datos = false;
    }else if(localName.equals("fila")){
        this.in_fila = false;

    }
    mStringBuilder.setLength(0);
}

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {
    mStringBuilder.append(ch, start, length);
    if(this.in_indices){
        mParsedExampleDataSet.setIndices(new String(ch, start, length));    
    }else if(this.in_fecha){
        mParsedExampleDataSet.setFecha(new String(ch, start, length));  
    }else if(this.in_indice){

        mParsedExampleDataSet.setIndice(new String(ch, start, length));
    }else if(this.in_encabezado){
        mParsedExampleDataSet.setEncabezado(new String(ch, start, length));
    }else if(this.in_columna){
        mParsedExampleDataSet.setColumna(new String(ch, start, length));
    }else if(this.in_titulo){
        mParsedExampleDataSet.setTitulo(new String(ch, start, length));
    }else if(this.in_datos){
        mParsedExampleDataSet.setDatos(new String(ch, start, length));
    }else if(this.in_fila){
        mParsedExampleDataSet.setFila(new String(ch, start, length));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:24:26.947

不确定你想用 XML 做什么，但是用 Jsoup 解析它不是一个大问题：

```
// Parse the the website - further connection settings possible here
Document doc = Jsoup.connect("http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=4500").get();

// Example - select the (first) 'fecha' tag
Element fecha = doc.select("fecha").first();

// Example - select all 'columna' tags and insert an attribute 'an' with value 'example'
Elements columna = doc.select("columna");
columna.attr("an", "example"); 
```

如果您将 xml 本地文件作为文件，则可以使用`Document doc = Jsoup.parse(file, "utf-8");`而不是`Jsoup.connect(...)`（让您设置正确的编码）。

**注意：** Jsoup `Document`!= DOM `Document`- 但是它能够做任何你想做的 XML / HTML

# android - MIPS 上的 Android 版免费 Pascal

> ID：12181640
> 
> 赞同：6
> 
> 时间：2012-08-29T15:40:39.593
> 
> 标签：android, android-ndk, cross-compiling, freepascal, fpc

试图将 Delphi 库移植到 Android。Free Pascal 支持 Android/ARM - 提供适用于 Windows 的预构建编译器。但是，Android NDK 现在也支持 MIPS 和 x86。FPC 的支持情况如何？目前，我的项目或多或少与 CPU 无关 - 本机位是为所有四种支持的架构构建的。不想放手。

我不是在 Pascal 中完成整个 Android 开发周期——只是一个没有 I/O 的算法库。我尝试使用 p2c 将其翻译成 C，但翻译器对源代码感到窒息。

我是否应该尝试使用 Linux 为相关 CPU 构建交叉编译器，然后链接到 NDK 库？

编辑：我已经从 Android 分支的源代码为 Intel/Linux 构建了交叉编译器。它可以工作，除非您必须调用`ppcross386`才能编译，而不是`fpc`. 后者似乎忽略了 -Tlinux 选项并调用了 Intel/Win32 编译器。

EDIT2：对 makefile 和源代码稍作改动，即可构建 MIPS 交叉编译器。然而，随着构建移动到跨 CPU RTL，它几乎立即出错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:07:46.943

最后编辑：FPC 主干中提供了对 Android/MIPSEL 编译目标的支持。导出最新版本，构建交叉编译器，远离代码。

* * *

虽然可以在 FP 源代码中到处找到对 MIPS ISA 的支持，但它还没有正式完成。等待2.7版本。

同时，在主干中[支持编译成 Java 字节码](http://wiki.freepascal.org/FPC_JVM)，它记录在 FP wiki 中。也许我可以利用它作为权宜之计......

编辑：Free Pascal over JVM 一般适用于 Android，但[其规则与常规 Pascal 略有不同](http://bugs.freepascal.org/view.php?id=22892)。否则，当编译到 JVM 时，正确的 Pascal 会失败。因此，它不适合移植一开始就没有考虑到 JVM 编写的大量遗留 Pascal 代码。

编辑：我的 FPC 项目在 MIPS/Android 上运行，但我的配方不适合一般消费，因为我项目中 Pascal RTL 的使用范围非常有限。它涉及从 Pascal 到 MIPS 程序集的交叉编译（针对 MIPSEL/Linux，在 FPC 主干中可用），然后将生成的程序集源提供给 NDK 构建系统，提供 Pascal RTL 有限子集的 C/程序集重新实现。

Pascal RTL 的整个身体又大又吓人。我的解决方案涉及从头开始在 C 中重新实现 Pascal RTL，这与普遍适用的相反。

# objective-c - 关于objective-c的代码片段是什么意思

> ID：12181644
> 
> 赞同：-2
> 
> 时间：2012-08-29T15:41:02.697
> 
> 标签：objective-c

```
NSAutoreleasePool *pool=[[NSAutoreleasePool alloc] init]; 
```

我想知道这句话的意思以及如何使用它。

我的编程环境是win7下的GNU Gcc搭建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:47:48.897

它创建并初始化一个 NSAutoreleasePool 对象。[NSAutoreleasePool alloc] 为其分配内存并清零；调用 init 会调用其 init 方法，该方法通常会执行类在启动时需要执行的任何操作。小“=”符号表示赋值，将刚刚创建和初始化的对象存储到一个名为“pool”的局部变量中，它是一个 NSAutoreleasePool 指针。

此行一般出现在 iOS 应用的主程序中，为整个应用创建一个默认的自动释放池。但它有时会在其他地方使用，为某些特定目的创建一个临时池。谷歌搜索 NSAutoreleasePool 肯定会引导你找到它的文档。

# javascript - 删除 history.back() 函数是否安全？

> ID：12181647
> 
> 赞同：0
> 
> 时间：2012-08-29T15:41:09.903
> 
> 标签：javascript, jquery, blackberry, jquery-mobile

在黑莓浏览器上 history.back(); 函数将浏览器重定向到前一页（在本例中为#firstpage）的两步（在运行 OS5.0 的黑莓浏览器上）。所以我只是删除了对 history.back(); 的调用。它有效。通过作品，我的意思是浏览器转到上一页 - #firstpage。我想知道这是否正确，并且我不会无意中在我没有测试过的浏览器上造成意外行为。，在所有浏览器中执行此操作是否安全？

```
<div data-role="page" id="firstpage">
        <div id="headerItem" data-role="header" data-theme="b">
                <h4>Header</h4>
                <a data-rel='external' data-ajax="false" href='' class='ui-btn-right' data-icon='home'>Home</a>
        </div>
        <div data-role="content"  data-theme="b" id="links"></div>

        <div class="footerDate" data-role="footer" data-theme="b"></div> 
</div>

<div id="secondpage" data-role="page" >
        <div id="headerDiv" data-role="header" data-theme="b">
              <a href='#' class='ui-btn-left' data-icon='arrow-l' onclick="history.back();  $('#pagecontent').empty(); $('#headerDiv h1').text(''); return false">Back</a>
              <a data-rel='external' data-ajax="false" href='' class='ui-btn-right' data-icon='home'>Home</a>
              <h1></h1>
        </div>
        <div data-role="content" id="pagecontent" ></div>
        <div class="footerDate" data-role="footer" data-theme="b"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:10:23.803

我解决了这个问题，而不是在用户单击后退按钮时进行重定向，而是使用 jQuery 更新页面本身 - 设置每个单独的 div 项目数据。这对我来说很好，因为页面上显示的内容不多，但是对于具有大量 div 和不同内容的页面，它可能无法使用。

# php - 用 php 和 jquery 解决一个简单任务的想法

> ID：12181650
> 
> 赞同：1
> 
> 时间：2012-08-29T15:41:21.313
> 
> 标签：php, javascript, jquery, html

我有一个 php 脚本，用于从数据库中检索员工姓名并将它们放入一个数组（$array）中。

我还有一个 javascript 代码来做一些动画，它需要获得的员工总数作为参数。在我的情况下，`parameter={0,1,2,...,array_count($array)-1}` 我希望将这些数字用作我在循环中创建的`class/id name`每个数字`div`

例如

`<div class=<?php echo "employee_".parameter[i]; ?>`

我不知道这应该如何解决。因此，在我的 javascript 代码中，我只能将数组参数直接指定为

`var parameter = [1,2,3,4,5,6,7,8];`

因为现在我知道有 8 个项目，但将来我不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:45:34.727

你的 php 应该`print json_encode($array)`

然后在 javascript 中，您应该使用 for 循环来创建 div 列表。那么您将可以访问他们的 ID。

```
html = '';
for(var i = 0; i<someArray.length; i++) {
   html += '<div class="employee_'+i+'">...</div>';
} 
```

# php - 代码没有响应通过浏览器传递的参数

> ID：12181651
> 
> 赞同：-3
> 
> 时间：2012-08-29T15:41:23.870
> 
> 标签：php

我将以下代码放入浏览器中`?phase=1&step=0&fot=false`，我得到一个黑页。与PHP错误

> 未定义变量：第 219 行 C:\Program Files (x86)\Zend\Apache2\htdocs\Proj11\1.php 中的 fOT

这是`$this->createTablePages ($fOT);`行。如果我将其更改为`$this->createTablePages ($this->fOT)`我收到以下错误

> 未定义的属性：第 219 行 C:\Program Files (x86)\Zend\Apache2\htdocs\Proj11\1.php 中的 phase2::$fOT

我知道`$this->IDB3 = $this->handleDatabase()->$IDB3;`在 __constructor 中是正确的。我怎么做？

```
class phase2 {
        function __construct () {

        $dbFile = 'dbconfig.php';
        $this->dbFile = $dbFile;
        include_once ("$this->dbFile"); 

        $step = $_GET["step"];

        $username = $DB_USER;
        $password = $DB_PASS;
        $server = $DB_SERVER;
        $dbName = $DB_NAME;

        $this->step = $step;
        $this->dbFile = $dbFile;
        $this->username = $username;
        $this->password = $password;
        $this->server = $server;
        $this->dbName = $dbName;

        $db = new PDO ('mysql:host=' .$server.';dbname='.$this->dbName,$this->username,$this->password);

        $this->db = $db;

        if (empty ($_GET['fot']) ) { 
        $fOT = 'false'; 
        } elseif ($_GET['true']) { $fOT = 'true'; }

        $this->IDB = $this->handleDatabase()->$IDB;
        $this->IDB2 = $this->handleDatabase()->$IDB2;
        $this->IDB3 = $this->handleDatabase()->$IDB3;
        }

public function handleDatabase (){
// Prepare SQL Statements
    $IDB = $this->db->prepare( 
         "CREATE TABLE pages (
          id int(11) NOT NULL auto_increment,
         subject_id int(11) NOT NULL,
          menu_name varchar(30) NOT NULL,
          position int(3) NOT NULL,
          visible tinyint(1) NOT NULL,
          content text NOT NULL,
          PRIMARY KEY  (id)
    )ENGINE=MyISAM AUTO_INCREMENT=7 DEFAULT CHARSET=utf8");

    $IDB2 = $this->db->prepare("
        CREATE TABLE subjects (
          id int(11) NOT NULL auto_increment,
          menu_name varchar(30) NOT NULL,
          position int(3) NOT NULL,
          visible tinyint(1) NOT NULL,
          PRIMARY KEY  (id)
    )ENGINE=MyISAM AUTO_INCREMENT=6 DEFAULT CHARSET=utf8");

    $IDB3 = $this->db->prepare("
        CREATE TABLE users (
          id int(11) NOT NULL auto_increment,
          username varchar(50) NOT NULL,
          hashed_password varchar(40) NOT NULL,
          PRIMARY KEY  (id)
    )ENGINE=MyISAM AUTO_INCREMENT=2 DEFAULT CHARSET=utf8");
}
//Set Option to True or False

function createTablePages ($fOT){

    $r1 = $this->db->query('SHOW TABLES LIKE \'page\'');
    if (count($r1->fetchAll()) > 0 && $fOT === 'false') {
        echo "The table PAGE exists";

    } elseif ($fOT === 'true') {
        $this->IDB->execute;
                $this->stepFunction (1,false);
    }
}
function createTableSubjects ($fOT){

    $r2 = $this->db->query('SHOW TABLES LIKE \'subjects\'');
    if (count($r2->fetchAll()) > 0  && $fOT === 'false') {
        echo "The table SUBJECTS exists ";

    } elseif ($fOT === 'true') {

        $this->IDB2->execute;
        $this->stepFunction (2,false);

    }
}

function createTableUsers ($fOT){

    $r3 = $this->db->query('SHOW TABLES LIKE \'users\'');   
    if (count($r3->fetchAll()) > 0  && $fOT === 'false') {
        echo "The table USERS exists";
    } elseif ($fOT === 'true') {
        $this->IDB3->execute;
        echo "Would you like to populate all the tables?";
    }   
}

public function stepFunction ($step, $fOT){

switch ($step) {
    case 0: 
            $this->createTablePages ($fOT);
            break;
    case 1: 
            $this->createTableSubjects($fOT);
            break;
    case 2: $this->createTableUsers ($fOT);
            break;
    }

}

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:44:56.860

```
} elseif ($fOT = 'true') { 
```

`=`是一个**任务**。您需要*比较运算符* `==`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:46:14.983

```
if (count($r1->fetchAll()) > 0 && $fOT = 'false') { 
```

您在赋值运算符和比较运算符之间感到困惑。您需要将其更改为：

```
if (count($r1->fetchAll()) > 0 && $fOT === 'false') { 
```

赋值操作返回分配的值，因此它可能不会给您预期的结果，并且会弄乱其余的逻辑。

# xcode - 使用 UIScrollView Xcode 连续滚动

> ID：12181654
> 
> 赞同：0
> 
> 时间：2012-08-29T15:41:28.590
> 
> 标签：xcode, view, uiscrollview, scrollview

如何让滚动视图重新开始？

IE：我`UIScrollView`的很`1000px`宽。用户将在视图中滑动以查找主题。当用户到达最后一个主题（比如主题 10）时，我如何`UIScrollView`在不向后滚动的情况下从头开始（主题 1）？

因此，如果用户愿意，视图将永远继续循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:46:46.057

这是您将要使用的方法：

```
- (void)setContentOffset:(CGPoint)contentOffset animated:(BOOL)animated 
```

在您检测到该用户到达最后一个主题之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T01:53:31.837

我假设您正在使用`UIScrollView`以主题为页面的分页。诀窍是复制结束页面，然后当用户滑动到滚动视图中的最后一页（这是第一页的副本）并且减速停止时，您想要将内容偏移更改回第一页。

当我需要这样做时，我发现[了这篇文章](http://mobiledevelopertips.com/user-interface/creating-circular-and-infinite-uiscrollviews.html)。我使用`setContentOffset`in`scrollViewDidEndDecelerating`而不是`scrollRectToVisible`，但任何一种方法都可以。

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)sender 
{
    if (scrollView.contentOffset.x == 0) {
        [scrollView setContentOffset:contentOffsetOfLastTopic animated:NO];
    }
    else if (scrollView.contentOffset.x == contentOffsetOfLastPage) {
        [scrollView setContentOffset:contentOffsetOfFirstTopic animated:NO];
    }
} 
```

# ruby-on-rails - RSpec：强制 Net::SFTP::StatusException 并验证救援

> ID：12181655
> 
> 赞同：0
> 
> 时间：2012-08-29T15:41:40.140
> 
> 标签：ruby-on-rails, exception, rspec, net-sftp, expectations

我试图在我的规范中强制 Net::SFTP::StatusException 错误，然后验证我的代码是否捕获了它。

代码：

```
def process_SFTP(username, password, csvfile)
  begin
      mySftpWrapper.new
      mySftpWrapper.process_CSV_file(csvfile)
  rescue RuntimeError => other_problem
      logger.info(other_problem.message)
  rescue Net::SFTP::StatusException => sftp_problem
      logger.info(sftp_problem.message)
  end
end 
```

规格：

```
let(:wrapper) { mySftpWrapper.new }
before(:all) do
    @wrapper_mock = double('mySftpWrapper')
    mySftpWrapper.stub(:new).and_return(@wrapper_mock)
    @logger_mock = double('ActiveSupport::BufferedLogger')
end

it "should trap a Net::SFTP::StatusException" do
     sftp_response = Object.new
      def sftp_response.code; code = 2 end
      def sftp_response.message; message = "no such file" end
      # Force exception here
      @wrapper_mock.stub(:process_SFTP).with("username", "password", "nonexistentfile").and_raise(Net::SFTP::StatusException.new(sftp_response))
      # Verify that logger.info received the forced error
      @logger_mock.stub(:info).should_receive(/no such file/)
      wrapper.process_SFTP("date", "username", "password", "nonexistentfile")
end 
```

但是，我用来生成 Net::SFTP::StatusException 的语句没有抛出正确的异常 ( `"Net::SFTP::StatusException"`)。相反，它抛出`#<Net::SFTP::StatusException: Net::SFTP::StatusException>`

如何强制正确的 StatusException？

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:00:39.930

事实证明，规范示例正在抛出正确的异常。问题是 Net::SFTP::StatusException 是 RuntimeError 的子类：

net-sftp-2.0.5/lib/net/sftp/errors.rb：

```
module Net; module SFTP

  # The base exception class for the SFTP system.
  class Exception < RuntimeError; end

  # A exception class for reporting a non-success result of an operation.
  class StatusException < Net::SFTP::Exception 
```

并且 Net::SFTP::StatusException 被抛出，但在到达 StatusException 子句之前被 RuntimeError 子句捕获。究竟是什么规格！

# dart - 如何以同步方式在 Dart 中打印到 stderr？

> ID：12181658
> 
> 赞同：8
> 
> 时间：2012-08-29T15:41:47.257
> 
> 标签：dart, dart-io

我正在尝试向 stderr 打印一条消息。有没有办法通过 stderr 文件句柄进行打印？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T15:41:47.257

找到了：

```
stderr.write("Message"); 
```

# sql - 如何在sql中加入表而不从table1中删除数据

> ID：12181663
> 
> 赞同：1
> 
> 时间：2012-08-29T15:41:59.317
> 
> 标签：sql, oracle, crystal-reports, oracle10g

对于 D 列中带有数字的每个人。

我需要从第二张桌子上找到人的姓氏。

```
select
    a.TIME_STAMP,
    a.RDATE,
    a.TYPE,
    a.PERSON
from table1 a 
```

[![一张照片](../Images/ac8c268ae32b6d581d3fff9b5143f007.png)](https://i.stack.imgur.com/LMGRU.jpg) table2 具有人的姓氏，并且字段被称为最后一个

我试过

```
select
    a.TIME_STAMP,
    a.RDATE,
    a.TYPE,
    a.PERSON,
    b.last,
from table1 a, table b 
where a.PERSON = b.PERSON 
```

它通过从结果中删除 ABC_CHANGE 来输出

[![图片](../Images/c487fe36007477e0774f6136cb68f83b.png)](https://i.stack.imgur.com/iBJR5.jpg)

如何修复查询，使其不会删除 ABC_CHANGE。

我在水晶报告中这样做只是为了获得更多信息，但在 SQLPlus 中也是如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T15:43:51.903

如果您想要表 A 中的所有行，即使表 B 中没有匹配项，您也需要使用 LEFT OUTER JOIN：

```
select
    a.TIME_STAMP,
    a.RDATE,
    a.TYPE,
    a.PERSON,
    b.last,
from table1 a
LEFT OUTER JOIN table b ON a.PERSON = b.PERSON 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:45:13.167

问题是 table1 中包含 ABC_CHANGE 的所有行都没有任何 PERSON 值。因此，当您使用交叉连接时，会跳过这些行。所以它不是“删除”ABC_CHANGE。它给你正确的结果。如果您希望这些行仍然显示（即使它们与第二个表中的任何内容都不匹配），您需要使用左连接；这将显示第二个表中任何不匹配列的空值。

```
select
    a.TIME_STAMP,
    a.RDATE,
    a.TYPE,
    a.PERSON,
    b.last,
from table1 a left join table b 
on a.PERSON = b.PERSON 
```

但是，这与我对您的需求/要求的理解并不相符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T20:46:13.273

或者完全跳过外连接，将姓氏的翻译放在选择列表中，如下所示：

```
SELECT     a.TIME_STAMP
,     a.RDATE
,     a.TYPE
,     a.PERSON
,     (Select b.last from b where b.person = a.person) last
FROM a
; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T15:48:08.647

试试这个：

```
SELECT
    a.TIME_STAMP,
    a.RDATE,
    a.TYPE,
    a.PERSON,
    b.last,
FROM a
LEFT JOIN b ON a.PERSON=b.PERSON
WHERE a.PERSON IS NOT NULL 
```

# c# - 有条件地禁用复选框 XtratTreeList

> ID：12181668
> 
> 赞同：0
> 
> 时间：2012-08-29T15:42:07.437
> 
> 标签：c#, devexpress, xtratreelist

如何在我的 XtratTreeList 有条件地禁用复选框？我有[NodeChanged](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraTreeListTreeList_NodeChangedtopic)和[CustomDrawNodeCheckBox](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraTreeListTreeList_CustomDrawNodeCheckBoxtopic)事件。

如果我使用`treeList1_CustomDrawNodeCell`只给我一个节点的事件。IE

```
using DevExpress.XtraTreeList;
using DevExpress.Utils.Drawing;
using DevExpress.XtraEditors.ViewInfo;
//...
void treeList1_CustomDrawNodeCell(object sender, CustomDrawNodeCellEventArgs e) {
    CheckEditViewInfo editViewInfo = e.EditViewInfo as CheckEditViewInfo;
    if (editViewInfo == null) 
        return;
    editViewInfo.CheckInfo.State = ObjectState.Disabled;
} 
```

我在节点之间有关系。如果用户检查一个节点，则只有与该节点相关的节点才应允许检查/启用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:56:30.643

Devexpress 没有直接的方法，因此，您需要执行以下操作：

要相应地改变它们的外观，处理`CustomDrawNodeCheckBox event`

```
private void treeList1_CustomDrawNodeCheckBox(object sender, CustomDrawNodeCheckBoxEventArgs e)
{
    //Your condition
    e.ObjectArgs.State = ObjectState.Disabled;
} 
```

要防止选中特定的复选框，请处理`BeforeCheckNode event`

```
private void treeList1_BeforeCheckNode(object sender, CheckNodeEventArgs e)
{
    //Your condition
    e.CanCheck = false;
} 
```

希望这有帮助；）

# coffeescript - 为什么 CasperJS 表单提交不重定向到下一页？

> ID：12181669
> 
> 赞同：5
> 
> 时间：2012-08-29T15:42:10.073
> 
> 标签：coffeescript, casperjs

这是我的第一次 casper 测试，所以我仍在努力学习基础知识。我想在我的登录表单上填写用户名和密码，然后提交。**然后确认是否在下一页**呈现“注销”链接（确认用户已登录）。

但据我所知，当调用*then*时，url 仍然是相同的。看起来没有帖子或重定向到下一页正在发生。我究竟做错了什么？

```
casper.start "http://test.local.mycompany.local/", ->
    @echo 'at ' + @getCurrentUrl()
    @fill 'form', { UserAlias : 'joe', Password : 'password' }, true

casper.then ->
    @echo 'at ' + @getCurrentUrl()
    @test.assertExists '#log-off-link', 'log-off link exists'

casper.run ->
    @test.done() 
```

所以@getCurrentUrl 的回显都返回相同的URL，这是错误的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T14:35:01.070

您可以尝试使用[chrome 扩展 ressurectio](https://github.com/ebrehault/resurrectio)在浏览器中为 casperjs 生成自动化测试。它使用起来非常简单且有用。可能在几行（-生成代码的一部分）中，您应该进行一些修复，但无论如何它非常有用和方便。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T09:19:20.647

我有同样的问题。有一天，我的 casper 测试停止工作。更准确地说，casperjs 停止了重定向。问题实际上是我的服务器返回了无效的 HTTP set-cookie 标头（日期无效）。这是由于到期日期的配置问题。无论如何，似乎如果某些标头值中存在不正确的值，则某些东西会使 casperjs 忽略其他标头值，例如重定向的“位置”http标头。

一旦我解决了 cookie 中的过期日期问题，HTTP set-cookie 标头就可以了，casperjs 开始再次跟踪重定向。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-26T13:11:19.440

casper 可能无法按名称找到字段。你可以试试

```
casper.start "http://test.local.mycompany.local/", ->
    @echo 'at ' + @getCurrentUrl()
    @fillSelectors 'form', { 'input[name=UserAlias]' : 'joe', 'input[name=Password]' : 'password' }, true 
```

它应该与您的代码相同，但有时并非如此。

# ruby - Ruby：如何将数组拼接成 Lisp 样式的列表？

> ID：12181676
> 
> 赞同：5
> 
> 时间：2012-08-29T15:42:37.543
> 
> 标签：ruby, lisp

这是我发现自己偶尔想做的事情。假设我有一个参数列表。在 Lisp 中，我可以像

```
`(imaginary-function ,@args) 
```

为了调用函数并将数组从一个元素转换为正确数量的参数。

Ruby 中是否有类似的功能？或者我只是在这里使用了一个完全错误的习语？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T15:48:07.060

是的！它被称为 splat 运算符。

```
a = [1, 44]
p(*a) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T15:47:12.343

这是 splat 运算符：`function(*list)`

# ios - 以编程方式从模态视图控制器切换父选项卡

> ID：12181677
> 
> 赞同：0
> 
> 时间：2012-08-29T15:42:42.847
> 
> 标签：ios, iphone, uitabbarcontroller

在我的应用程序中，您可以使用模态视图添加照片。当模式视图被关闭时，我想自动将标签栏控制器切换到第二个标签（照片查看器屏幕）。

我找到了有关如何以编程方式切换选项卡的[答案](https://stackoverflow.com/questions/1795407/programmatically-pressing-a-uitabbar-button-in-xcode)，但我不确定将此代码放在模态视图控制器中的哪个位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:46:26.297

您可以创建一个委托协议并将委托属性分配给模态呈现的视图控制器，并使其在拍照后即将调用dismissModalViewControllerAnimated时通知其委托。

编辑：添加了有关实施的更多信息

在您以模态方式呈现的视图控制器类上，您将声明一个协议：

```
@protocol YourUIViewControllerSubclassDelegate; 
```

然后，您将向您的类添加一个属性：

```
@property (nonatomic, unsafe_unretained)id <YourUIViewControllerSubclassDelegate>delegate; 
```

最后，在类接口声明上调用 @end 之后，您将完成协议：

```
@protocol YourUIViewControllerSubclassDelegate <NSObject>
- (void)viewController:(YourViewControllerSubclass *)viewController isBeingDismissedWithImage:(BOOL)imageTaken;
@end 
```

因此，在 YourUIViewControllerSubclass 中，在调用dismissModalViewControllerAnimated 之前，您将执行以下操作：

```
[self.delegate viewController:self isBeingDismissedWithImage:YES or NO]; 
```

因此，当您创建 YourUIViewControllerSubclass 时，您需要分配委托属性。谁是 YourUIViewControllerSubclass 的委托人，需要遵守 YourUIViewControllerSubclassDelegate 协议，并实现协议方法。在协议方法的这个实现中，您可以切换到您想要切换到的任何选项卡。

# javascript - Javascript变量返回空白

> ID：12181684
> 
> 赞同：-3
> 
> 时间：2012-08-29T15:43:14.943
> 
> 标签：javascript

我正在测试这段代码：

```
var thecol = '';

// Note: I know that value.cat = '3'

if (value.cat === '1') {
        thecol = 'cat1';
    } else if (value.cat === '2') {
        thecol = 'cat2';
    } else if (value.cat === '3') {
        thecol = 'cat3';
    } else if (value.cat === '4') {
        thecol = 'cat4';
    } else if (value.cat === '5') {
        thecol = 'cat5';
    };

alert(thecol); 
```

由于某种原因，警报为空白。

任何想法为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:45:07.323

你确定那`value.cat`是`'3'`不是`3`？您可以通过登录轻松找到`typeof value.cat`。由于您使用的是深度相等，因此只有在两者的值和类型相同时才会返回 true：

```
'3' === 3 // -> false
'3' == 3 // -> true 
```

# google-app-engine - 是否有任何技术代替命名空间

> ID：12181686
> 
> 赞同：0
> 
> 时间：2012-08-29T15:43:30.777
> 
> 标签：google-app-engine, google-cloud-datastore

除了命名空间之外，还有什么技术可以对数据进行分区吗？我需要为每组用户拆分数据，但一些管理员用户应该看到每个人的所有数据和命名空间块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:02:41.037

我有一个多租户应用程序，其中每个命名空间都有自己的管理员。但是，像你一样，我希望有一个超级管理员可以访问任何命名空间并执行命名空间管理员可以执行的所有过程。

所以我为每个命名空间创建了一个管理实体，但我在空命名空间上创建了一个超级管理实体。所以我使用默认（空）命名空间来存储全局实体。通过这样做，您只需在查找超级管理员之前将命名空间设置为空，并且必须小心设置原始命名空间。

```
YourHandler(RequestHandler):
    original_ns=namespace_manager.get_namespace()
    namespace_manager.set_namespace("")

    #Look for Super Admin Here
    ...
    # Return to original ns
    namespace_manager.set_namespace(original_ns) 
```

当然我把这种安全代码放在装饰器中以便在所有应用程序中重用它，但是上面的代码更容易理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T18:25:52.380

你试过祖先路径吗？出于完全相同的原因，我们使用它来代替命名空间。我们还添加实体，作为您需要分组的任何数据的文件夹。例如：我们有一个订阅者实体，并且我们添加了一个名为用户的标签，它是订阅者的子实体。属于订阅者特定实例的所有用户实体，我们添加到该用户标签。订阅者上的祖先查询可用于返回所有实体，包括订阅者、标签和用户实体。

[https://developers.google.com/appengine/docs/python/datastore/entities#Ancestor_Paths](https://developers.google.com/appengine/docs/python/datastore/entities#Ancestor_Paths)

# jasper-reports - 计划的 Jasper 报告第一次运行 & 后来它给出空报告

> ID：12181688
> 
> 赞同：0
> 
> 时间：2012-08-29T15:43:38.420
> 
> 标签：jasper-reports, ireport

我收到了一份计划每天在 jasper 中运行的报告，它在第一天运行，后来它给了我空的报告。我正在传递一个参数，我测试了它是否被传递给 ireport，是的。我在数据库后端运行了查询，我得到了一些记录，所以第二天的输出（空页）不正确。

在我从代码中剪切并粘贴相同的文本之后，同样的碧玉报告工作正常，基本上我没有改变任何东西，想知道第一次编译是否使它工作正常&以后我需要重新编译？

但是我仍然无法破解此问题，您的任何意见都会对此有所帮助。

# java - 在另一个线程中创建阶段时出现 IllegalStateException

> ID：12181689
> 
> 赞同：3
> 
> 时间：2012-08-29T15:43:38.853
> 
> 标签：java, user-interface, javafx-2

我在另一个线程中再打开一个阶段时遇到问题。如果我在同一个线程中打开此阶段，则不会出现异常。

```
void hashMapDeclaration(){
    actions2methods.put("NEW", new Runnable() {@Override public void run() { newNetCreation(); }});
    actions2methods.put("LOAD", new Runnable() {@Override public void run() { loadNetState(); }});
    ......  //other hashes
}

HBox buttonBuilder(double spacing,double layoutX,String... bNames){
    HBox lBar = new HBox(10);
    .... //some code
    for(final String text : bNames){ //in my case text variable value is "NEW" so it should run method newNetCreation
        Button newButton = new Button();
        newButton.setText(text);
        .... //code
        newButton.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent paramT) {
                Thread t;
                EventQueue.isDispatchThread();
                t = new Thread(actions2methods.get(text));
                t.start(); // Start the thread 
                System.out.println("button pressed");
            }
        });
        lBar.getChildren().add(newButton);
    }
    return lBar;
}

void newNetCreation(){
    final Stage dialogStage = new Stage();
    final TextField textField;
    dialogStage.initOwner(stage);
    dialogStage.initModality(Modality.WINDOW_MODAL);   
    dialogStage.setFullScreen(false);
    dialogStage.setResizable(false);
    dialogStage.setScene(SceneBuilder
        .create()
        .fill(Color.web("#dddddd"))
        .root(textField = TextFieldBuilder
                            .create()
                            .promptText("Enter user name")
                            .prefColumnCount(16)
                            .build()
        )
        .build()
    );
    textField.textProperty().addListener(new ChangeListener() {
        public void changed(ObservableValue ov, Object oldValue, Object newValue) {
            System.out.println("TextField text is: " + textField.getText());
        }
    });
    dialogStage.show();
    System.out.println("new net");
} 
```

方法 newNetCreation 是导致问题的方法。我程序中的所有操作都存储在 HashMap 中。方法 buttonBuilder 创建新线程并应根据变量值启动方法，在我的情况下，他必须调用 newNetCreation 方法，但是当他尝试时，会发生以下异常：

```
Exception in thread "Thread-3" java.lang.IllegalStateException: Not on FX application thread; currentThread = Thread-3
at com.sun.javafx.tk.Toolkit.checkFxUserThread(Unknown Source)
at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(Unknown Source)
at javafx.stage.Stage.<init>(Unknown Source)
at javafx.stage.Stage.<init>(Unknown Source)
at projavafx.starterapp.ui.StarterAppMain.newNetCreation(StarterAppMain.java:400)
at projavafx.starterapp.ui.StarterAppMain$7.run(StarterAppMain.java:354)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T15:52:35.740

JavaFX 的所有 UI 操作都应在 FX 应用程序线程上执行。

这是您的代码：

```
 Thread t; 
  t = new Thread(actions2methods.get(text));
  t.start(); // Start the thread 
```

`t`是您在其上运行您的方法的线程。如您提供的日志中所述，这显然不是 FX 线程：`java.lang.IllegalStateException: Not on FX application thread; currentThread = Thread-3`

如果要`Runnable`在 FX 线程上运行，请使用以下代码：

```
 Platform.runLater(actions2methods.get(text)); 
```

# c++ - 自定义向导 (C/C++) VS10

> ID：12181694
> 
> 赞同：0
> 
> 时间：2012-08-29T15:43:50.340
> 
> 标签：c++, c, visual-studio-2010, wizard

我正在尝试为项目（GTK+）创建一个模板，我不想总是包含标题路径。据我了解，在 C 中这样做的唯一可能性是创建一个自定义向导。

我已经创建了一个，并添加了“附加库”（在函数 AddConfig() 中）。但我似乎找不到如何添加 VC++ 目录。我想我可以尝试直接在项目中添加头文件，但我宁愿只是“链接”到它们。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:30:40.250

通过自定义属性表可以更轻松地解决此类任务。属性表在配置和保存后，可以通过在属性管理器中单击两次鼠标添加到任何 C++ 项目中。

# java - 如何将 JSON 对象（从 google Places API 返回）转换为 Java 对象

> ID：12181699
> 
> 赞同：0
> 
> 时间：2012-08-29T15:44:14.350
> 
> 标签：java, json, gson, google-places-api, unmarshalling

当 Google 地点 API 请求食物类别下的地点时，它会返回一个 JSON，其中包括多个地点的详细信息。

我想创建一个对象数组，其中每个对象都包含特定位置的详细信息。

我在实现中使用了 GSON 库，它适用于虚拟 JSON 对象，但不适用于 Google place API 给出的 JSON 结果，并且抛出了“JsonSyntaxException”。

我正在寻找以下问题的解决方案.. 1 我如何继续使用 GSON 并给定 JSON 对象来创建我的对象数组或 2 是否有任何其他方式来完成我的任务（仍然使用 JSON 结果）

谢谢。

**更新**
**类 PlaceObject**

```
import java.util.List;

public class PlaceObject {
    private List<String> results;
} 
```

**JSON转换器类**

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import com.google.gson.Gson;

public class JSONconverter {
    public static void main(String[] args) {

Gson gson = new Gson();

try {

    BufferedReader br = new BufferedReader(
        new FileReader("c:\\placeAPI.json"));

    //convert the json string back to object
    PlaceObject obj = gson.fromJson(br, PlaceObject.class);
    //obj.results = null ,when debugged thats the problem
    System.out.println("Result: " + obj);

    } catch (IOException e) {
    e.printStackTrace();
    }

    }
} 
```

**JSON的链接**

[http://www.mediafire.com/?8mmnuxuopimhdnz](http://www.mediafire.com/?8mmnuxuopimhdnz)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T16:14:48.067

我喜欢和[gson一起工作](http://code.google.com/p/google-gson/)

顺便提一句。还有另一个相关的[线程](https://stackoverflow.com/questions/338586/a-better-java-json-library)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T16:02:38.470

Jersey 客户的文档建议使用 Jackson 库（[参见 wiki](http://wiki.fasterxml.com/JacksonDataBinding)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T17:17:42.210

您还可以查看 Genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)。它提供了与球衣的开箱即用集成。你只需要在你的类路径中有 jar。

# jquery - 为什么 .prepend() 只工作一次？

> ID：12181701
> 
> 赞同：0
> 
> 时间：2012-08-29T15:44:26.587
> 
> 标签：jquery, events, dom, prepend

我正在制作一个待办事项列表应用程序，我在其中使用 jQuery，当用户点击`Add`按钮时，一个新任务会附加到`tasksWrapper`div 中，但问题是，它只发生一次。当我再次按下 `Add`按钮时，没有任何反应。我检查了 DOM 树，还是一样，只有一个`mainTaskFrag`. 这是我的代码：

```
$(function(){
    var mainTaskFrag = $("<div class='wholeTask'>"),
    mainTaskContents = $('<div class="mainTaskWrapper clearfix">\
                            <div class="mainMarker"></div>\
                            <label for="task1">This is task1</label>\
                            <div class="holder"></div>\
                            <div class="subTrigger"></div>\
                            <div class="checkButton"></div>\
                            <div class="optTrigger"></div>\
                            <div class="mainOptions">\
                                <ul>\
                                    <li id="mainInfo">Details</li>\
                                    <li id="mainDivide">Divide</li>\
                                    <li id="mainEdit">Edit</li>\
                                    <li id="mainDelete">Delete</li>\
                                </ul>\
                            </div>\
                        </div>');    

  mainTaskFrag.prepend(mainTaskContents);

  $("#addMain").on("click", function(){                
      $("#tasksWrapper").prepend(mainTaskFrag);
  });    
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:46:25.540

您可以使用`clone`方法：

```
$("#addMain").on("click", function(){             
      $("#tasksWrapper").prepend(mainTaskFrag.clone());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:46:19.317

因为绑定到`$("#addMain")`不再存在。如果您再次进行绑定，它应该可以工作，尽管我相信有人会想出一个更好的方法来做到这一点，而不涉及再次绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:47:48.600

该`.prepend()`方法将指定的内容作为 jQuery 集合对象中每个元素的第一个子元素插入（要将其作为最后一个子元素插入，请使用`.append()`）。

# raphael - 拉斐尔文字发光

> ID：12181705
> 
> 赞同：3
> 
> 时间：2012-08-29T15:44:34.237
> 
> 标签：raphael

有没有人知道如何让发光显示在文本上？我认为这样做很容易，但小提琴上没有任何渲染。

[小提琴](http://jsfiddle.net/7ZPtq/3/)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T18:23:16.860

在我看来，Raphael 根本不支持文本发光。查看发光功能的第一行：

```
if (this.type == "text") {
    return null;
} 
```

`print`研究一下[Cufonized](http://cufon.shoqolate.com/generate/)字体的使用可能是值得的——它会返回一个代表你给它的文本的路径而不是 tspan，并且`glow` *可以*应用于路径。

或者你可以满足于创建一个简单的阴影。

[我在这里](http://voidblossom.com/tests/textGlow.php)演示了这两种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:31:17.210

您可以在文本后面创建一个矩形并使其发光。我认为这看起来应该很好。使用 getBBox() 找出您需要的矩形的大小。

像这样的东西：http: [//jsfiddle.net/7ZPtq/51/](http://jsfiddle.net/7ZPtq/51/)

或者也许使用其他一些原语，例如线。

# javascript - 我如何让 setInterval 暂停它所在的 for 循环？

> ID：12181706
> 
> 赞同：4
> 
> 时间：2012-08-29T15:44:34.167
> 
> 标签：javascript

[http://jsfiddle.net/xDWLQ/](http://jsfiddle.net/xDWLQ/)

JavaScript：

```
var quotes = new Array();
quotes[0] = "message 0";
quotes[1] = "message 1";

var qText = document.getElementById('qText');
for (i = 0; i < quotes.length; i++) {
    setInterval(function() { qText.innerHTML = quotes[i]; }, 2000);
}​ 
```

HTML：

```
<p class="qText" id="qText">Predefined text</p>​ 
```

`innerHTML`of`qText`更改为 undefined，而不是更改为，`quotes[0]`后跟`quotes1`. 现在我尝试通过`alert()`在 setInterval 函数中使用它来调试它，给我 for 循环的索引，两次都说“2”。那么，我将如何暂停 for 循环而不是 setInterval 创建新线程并增加索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:48:30.050

我认为这是您想要的，而不是循环。

```
var quotes = ["message 0", "message 1"];
var qText = document.getElementById('qText');
var i = 0;
var len = quotes.length;

setInterval(function() {
   qText.innerHTML = quotes[i++];
   if (i === len) i = 0; 
}, 2000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:46:00.010

您将需要一种完全不同的方法：

```
var quotes = ["message 0", "message 1"];
var qText = document.getElementById('qText');
var i = 0;

var update = function() {
    qText.innerHTML = quotes[i++ % quotes.length];
};

update();
setInterval(update, 2000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:51:16.917

您可以通过使用可传递给函数的参数列表调用 setInterval 来强制将正确的变量传递给函数（在您的 jsfiddle 上测试）

```
setInterval(function(q) { qText.innerHTML = q; }, 2000, quotes[i]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T16:04:01.427

setInterval 已经在创建一个循环，它的所有迭代将在每 n 毫秒后运行，在你的情况下是 2000。如果你在循环中调用 setInterval，那么它的内容将在每 n 毫秒运行一次。你只需要调用一次。请注意，Javascript 在浏览器中不是多线程的。

# django - 使用表单提交将注册用户保存到我的数据库模型

> ID：12181710
> 
> 赞同：-1
> 
> 时间：2012-08-29T15:44:39.807
> 
> 标签：django, django-models, django-forms, django-templates, django-views

我正在使用 django-registration，但在用户点击提交后，我无法弄清楚如何将用户保存到我的数据库模型中。表单中的信息需要用户使用。

我如何访问用户模型，是否使用 requestcontext？在我的views.py 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:54:16.330

那么用户已经注册并登录了吗？request.user 应该包含当前用户，如果我没记错的话。

# javascript - RSS 提要阅读器脚本

> ID：12181719
> 
> 赞同：1
> 
> 时间：2012-08-29T15:45:34.040
> 
> 标签：javascript, jquery, rss-reader

是否有任何 rss 阅读器脚本可以组合多个提要并在每 5 分钟或更短的时间内不断更新提要？我的网站需要这个脚本 [http://www.dynamicdrive.com/dynamicindex18/gajaxrssdisplayer.htm](http://www.dynamicdrive.com/dynamicindex18/gajaxrssdisplayer.htm)

```
{
  <script type="text/javascript" src="http://www.google.com/jsapi">
} 
```

其中包括上述 google api，因此更新提要需要 1 小时

帮助将不胜感激

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:38:41.727

You can load multiple feeds like that

```
function someHandler(){
// some init code before this
    var feed1 = new google.feeds.Feed("http://example.com/feed1");
    var feed2 = new google.feeds.Feed("http://example.com/feed2");
// some load/after process after this
} 
```

And if you want to update every 5 seconds you can use

```
var updateInterval = window.setInterval(someHandler, 5000); 
```

# asp.net-mvc - 使用方法签名中未指定的参数进行路由

> ID：12181725
> 
> 赞同：0
> 
> 时间：2012-08-29T15:45:53.220
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我不积极，但我认为这是一个 MVC 路由问题。我仍然不完全理解路由在 MVC 中是如何工作的。

假设我有几个操作方法，我已将自定义过滤器属性应用于：

```
[MyAttribute]
public ActionResult Method1()
{
    ...
}    

[MyAttribute]
public ActionResult Method2()
{
    ...
} 
```

这些方法通常不接受任何参数。不幸的是，要求已经改变，现在所有这些方法都可能接收一个名为“MyParameter”的可选参数。如果传入参数，则将设置 ViewBag 中的属性。

在实际项目中，这些方法大约有 70 种。我希望通过“MyAttribute”过滤器来做到这一点，因为它已经存在。所以我会在“MyAttribute”过滤器中添加这样的东西：

```
public class MyAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        base.OnActionExecuting(filterContext);

            ... // other existing code

        // If a certain parameter was passed, I want to set a ViewBag property.
        if( filterContext.ActionParamenters.ContainsKey("MyParameter") )
            filterContext.Controller.ViewBag.MyProperty = filterContext.ActionParamenters["MyParameter"];
    }
} 
```

但除非方法的定义中有“MyParameter”作为参数，否则它不会在 ActionParameters 集合中看到它。这就是让我认为这是一个路由问题的原因。

我真的希望不需要将参数添加到所有方法，但如果没有其他方法，那么我可以。任何建议或想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:22:52.207

这在动作过滤器中不起作用吗？

```
ViewBag.MyProperty = 
  filterContext.Controller.ValueProvider.GetValue("MyParameter").AttemptedValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:53:35.490

我发现并使用了这个：

```
ViewBag.MyProperty = filterContext.HttpContext.Request.Prams["MyParameter"]; 
```

# android - 从 CursorAdapter.get() 返回对象

> ID：12181730
> 
> 赞同：9
> 
> 时间：2012-08-29T15:46:06.110
> 
> 标签：android, android-cursoradapter

我正在覆盖 CursorAdapter 并且我需要获取最后一项，问题是 CursorAdapter 实际上有一个 get() 方法......但是 source 是一个数据库，它返回一个普通对象！（我什至不知道它是什么，我希望它返回一个 Cursor 对象......）

尽管如此，我怎样才能让它返回我的 Wrapper db 行类的实例？

示例：假设我的数据库有这样的行：

**身份证|名字| 姓**

我会从中创建一个类**Person**。

现在我想要一个来自光标适配器的 Person get(int i) 方法......

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-25T02:44:28.873

好吧，只需使用 adapter.getItem() 并将其转换为 Cursor，无需像在接受的答案中那样手动移动光标

```
Cursor cursor = (Cursor) myCursorAdapter.getItem(position);
String myColumnValue = cursor.getString(cursor.getColumnIndex("YOUR_COLUMN_NAME")); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-29T16:42:01.237

> 现在我想要一个来自光标适配器的 Person get(int i) 方法......

这似乎是一个奇怪的要求。我会将光标本身（或从 CursorAdapter 返回的光标`getItem()`）传递给我的 Activity 中的常规方法。*但*这里是创建`Person get()`方法的基本步骤。

创建您的 Person 类：

```
public class Person {
    long id;
    String firstName;
    String surname;
} 
```

在您的自定义 CursorAdapter 中，只需使用如下方法：

```
public Person get(int position) {
    Cursor cursor = getCursor();
    Person person;
    if(cursor.moveToPosition(position)) {
        person = new Person();
        person.id = cursor.getLong(cursor.getColumnIndex("_id"));
        person.firstName = cursor.getString(cursor.getColumnIndex("firstName"));
        person.surname = cursor.getString(cursor.getColumnIndex("surname"));
        results.add(person);
    }

    return person;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-19T10:26:17.020

好吧，我不得不调试才能找到答案。假设你有这样的东西

> 简单光标适配器

```
themesAdapter = new SimpleCursorAdapter(getContext(), R.layout.spinner_with_count, null,
                new String[]{ThemeData.COLUMN_ID, ThemeData.COLUMN_SET_COUNT}, new int[] { R.id.spinnerTxLabel, R.id.spinnerTxCount }, 0);
        inputTheme.setAdapter(themesAdapter); 
```

然后你必须像这样检索。

```
inputTheme.setOnItemSelectedListener(new OnItemSelectedListener() {
                @Override
                public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
                    // if not all themes, get subthemes items
                    if(position > 0){

                            // load subtheme
                            Cursor currentCursor = (Cursor)inputTheme.getAdapter().getItem(position);
                            if(currentCursor != null) {
                                String value = currentCursor.getString(currentCursor.getColumnIndexOrThrow(Data.COLUMN_ID));
                            }
                        }
                    } 
```

};

# .net - 正则表达式匹配任何非字母数字字符，但减号

> ID：12181733
> 
> 赞同：17
> 
> 时间：2012-08-29T15:46:08.283
> 
> 标签：.net, regex

我需要清理文件名。所以我有这个代码：

```
//\W_ is any non-word character (not [^a-zA-Z0-9_]).
Regex regex = new Regex(@"[\W_]+");
return regex.Replace(source, replacement); 
```

这很好用，但现在我不想删除减号 (-)，所以我将正则表达式更改为：

```
[\W_^-]+ 
```

但这不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-29T15:48:27.230

~~尝试使用这个正则表达式：~~

 ~~```
[^\w-]+ 
```~~  ~~**编辑 ：**

似乎正确的正则表达式是：

```
[^a-zA-Z0-9-]+ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T15:58:43.830

只是颠倒你想要的和你不想要的：

```
[^a-zA-Z0-9-]+ 
```

[用于此的 RegexPal 链接。](http://regexpal.com/?flags=g&regex=%5B%5Ea-zA-Z0-9-%5D%2b&input=256%2akl3vsd-vw_eew/dvc%2bvwecv%7Cvw%5Cah%2544e%24)~~

# image-processing - 有没有办法强制 PMULHRSW 将 0x8000 视为 1.0 而不是 -1.0？

> ID：12181740
> 
> 赞同：5
> 
> 时间：2012-08-29T15:14:17.053
> 
> 标签：image-processing, assembly, sse, fixed-point

为了处理 8 位像素，在不丢失信息的情况下进行伽马校正等操作，我们通常对值进行上采样，以 16 位或其他方式工作，然后将它们下采样到 8 位。

现在，这对我来说是一个新领域，所以请原谅不正确的术语等。

出于我的需要，我选择在“非标准”Q15 中工作，我只使用范围的上半部分 (0.0-1.0)，并且 0x8000 代表 1.0 而不是 -1.0。这使得在 C 中计算事物变得更加容易。

但是我遇到了SSSE3的问题。它具有将 Q15 数字相乘的 PMULHRSW 指令，但它使用 Q15 的“标准”范围是 [-1,1-2⁻¹⁵]，因此将（我的）0x8000（1.0）乘以 0x4000（0.5）得到 0xC000（- 0.5)，因为它认为 0x8000 是 -1。这很烦人。

我究竟做错了什么？我应该将像素值保持在 0000-7FFF 范围内吗？这不是违背了它作为定点格式的目的吗？有没有解决的办法？也许有什么技巧？

Q15 是否有某种明确的论文来讨论这一切？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:25:12.103

就个人而言，我会采用将最大值限制为 0x7FFF (~0.99something) 的解决方案。

*   您不必费力地让处理器按照您想要的方式工作
*   您不必花很长时间记录“怪异”代码的来龙去脉，因为在 0-0x7FFF 上操作将立即为您的代码读者所识别 - [Q 格式](http://en.wikipedia.org/wiki/Q_%28number_format%29)被理解（根据我的经验）从`-1.0`到`+1.0-one lsb`。否则算术不会很好，因为 1 lsb 的值在 0 的每一侧都不同！

除非你能想象自己成功地向一群争论不休的代码审查者争辩说，那额外的一点对算法的运行至关重要，而不仅仅是“最后 0.01% 的性能”，坚持每个人都能理解的代码，以及哪些映射到您可用的硬件。

* * *

或者，重新安排您之前的操作，以便所有像素都与您最初拥有的像素相反。或者下面的操作来接受你之前发送的否定。然后以Q15 格式使用从`-1.0`到的值。`0.0`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-16T21:04:09.563

如果您确定不会使用任何“大于”的数字`$8000`，那么唯一的问题是至少有一个乘数是`$8000`(–1，尽管您希望它是 1)。

在这种情况下，解决方案相当简单：

```
pmulhrsw xmm0, xmm1
psignw xmm0, xmm0 
```

或者，在我们的例子中绝对等价（谢谢，Peter Cordes！）：

```
pmulhrsw xmm0, xmm1
pabsw xmm0, xmm0 
```

这会将负值从乘以恢复为`–1`正值。

# string - 在delphi中如何创建一个带有空分隔符的字符串

> ID：12181744
> 
> 赞同：2
> 
> 时间：2012-08-29T15:46:37.657
> 
> 标签：string, delphi, null, shfileoperation

我正在使用 SHFileOperation ，源可以是 pwidechar ，文件名由 null 分隔，整个内容以双 null 结尾。

我可以创建一个widechar 数组，它包含我需要的信息，但是当我尝试将函数转换为pwidechar 时，它只复制到第一个null。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-29T15:49:17.910

像这样：

```
const
  null = #0;

var
  FileNames: string;
...
FileNames := FileName1 + null + FileName2 + null; 
```

然后`PWideChar(FileNames)`传给`SHFileOperation`.

因为 Delphi 字符串自动以 null 结尾，`PWideChar(FileNames)`所以是双 null 结尾的。我们把一个空终止符放在最后，然后自动添加一个。

请注意，我假设您使用的是 Unicode Delphi，因为您谈论的是宽字符。如果您使用的是较旧的 Delphi，并且正在调用`SHFileOperationW`，则声明`FileNames`为`WideString`.

更有可能你有一个文件列表，比如一个字符串列表。像这样对待他们：

```
var
  FileNames: string;
...
if FileList.Count=0 then
  FileNames := null
else
begin
  FileNames := '';
  for i := 0 to FileList.Count-1 do
    FileNames := FileNames + FileList[i] + null;
end; 
```

# jquery - 如何在控制器中获取 json 发布的数据

> ID：12181745
> 
> 赞同：1
> 
> 时间：2012-08-29T15:46:40.627
> 
> 标签：jquery, ajax, json

我正在开发一个 CodeIgniter 项目，我是 ajax/jquery 的新手。我正在使用全日历。在我看来，我想发布事件的日期，然后将其发布到控制器。这是我的 CalendarView.php

```
$(document).ready(function() {
    $('#calendar').fullCalendar({
        dayClick: function(date, allDay, jsEvent, view) {  
               add_event(date);
        },
        events: 'https://www.google.com/calendar/feeds/myLogin%40gmail.com/public/basic'
    });
});

//Ajax call
function add_event(date) { 
    $.ajax({
            type: 'POST',
            url: '<?php echo site_url()."/welcome/add_event/"; ?>',
                        data:{ eventsJson: JSON.stringify(date) },
                        dataType : "json",
            success: function (response) {
                alert(response);
            }
    });
}​ 
```

在我的控制器中，这是我所做的：

```
$date= $this->input->post('data'); 
```

谁能帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:52:08.663

我对codelgnitor不太了解，但是数据以对象形式到达，您可以将日期字符串检索为 $_POST['data']['eventsJson']

虽然我不认为“eventsJson”是一个非常直观的名称，但可能应该改为“date”;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:54:34.577

在控制器中接收`eventsJSON`你会做的：

```
$eventsJSON = json_decode($this->input->post('eventsJSON'), TRUE); 
```

现在`$eventsJSON`包含一个包含您的 json 数据的数组。但是，如果您只发回不需要将其作为 JSON 传回的日期，那么 plus`eventsJSON`是一个坏名字。在这种情况下，您可以简单地更改 ajax 调用的数据部分，例如：

```
data: 'date='+date, 
```

在你的控制器中：

```
$date = $this->input->post('date'); 
```

# facebook - 使用标签将照片上传到 Facebook

> ID：12181746
> 
> 赞同：0
> 
> 时间：2012-08-29T15:46:43.003
> 
> 标签：facebook, actionscript-3, facebook-graph-api, tags

我正在创建 Facebook Flash 应用程序，但在将带有我自己或朋友标签的照片上传到 Facebook 时遇到问题。我一直被困在这个问题上并且找不到解决方案首先这里是我希望应用程序拥有的权限。

```
ExternalInterface.call("redirect","appId","user_birthday,read_stream,publish_stream,user_photos,friends_photos","http://apps.facebook.com/appName"); 
```

这是我在没有标签的情况下将照片上传到 Facebook 的方法（可行）：

```
var params:Object = {name: 'My Card', image:card, message: 'Greetings from Barcelona' , fileName:'Card'};
Facebook.api('me/photos', onSaveToPhotoAlbumComplete, params); 
```

但是当我想添加朋友或我自己的标签时它不起作用，这就是我所做的（在这种情况下我只想在图片中标记自己）：

```
var params:Object = {name: 'Rosada Face-It', image:card, message:message, fileName:'Face It!', tags:[{"id":myId,"x":50,"y":50}]};
Facebook.api('me/photos', onSaveToPhotoAlbumComplete, params); 
```

我还用引号和“tag_uid”而不是“id”尝试了它，但这不是我认为的问题：

```
tags:'[{"tag_uid":"'+ editorModel.tag1 +'","x":"50","y":"50"}]' 
```

如果有人可以帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:45:30.570

查看 API，我认为可能需要单独调用来添加标签

[http://developers.facebook.com/docs/reference/api/photo/](http://developers.facebook.com/docs/reference/api/photo/)

我认为要创建一个标签，您需要拥有 PHOTO_ID 然后进行 POST 到`PHOTO_ID/tags`

```
var params:Object = {{"to":myId, "x":50, "y":50}]};
Facebook.api(photoId +"/tags", onPhotoTagged, params); 
```

# c# - 创建二维数组

> ID：12181750
> 
> 赞同：1
> 
> 时间：2012-08-29T15:46:45.093
> 
> 标签：c#, asp.net-mvc-3, linq-to-sql, multidimensional-array

我正在尝试创建一个二维数组，但我很困惑。一位同事告诉我，我需要在字典中为数组列表创建一个字典，但他无法留下来帮助我。

我已经能够创建列出这样的程序的第一个数组

```
+ project 1
+ project 2
+ project 3
+ project 4 
```

完成此任务的代码如下 -

```
var PGList = from x in db.month_mapping
             where x.PG_SUB_PROGRAM == SP 
             select x;
             //select x.PG.Distinct().ToArray();

var PGRow = PGList.Select(x => new { x.PG }).Distinct().ToArray(); 
```

这样就可以处理我的垂直数组，现在我需要添加我的水平数组，以便我可以看到每个会计期间花费的总金额。所以最终的输出看起来像这样，但当然没有破折号。

```
+ program 1-------100---200---300---400---500---600---700---800---900---1000---1100---1200
+ program 2-------100---200---300---400---500---600---700---800---900---1000---1100---1200
+ program 3-------100---200---300---400---500---600---700---800---900---1000---1100---1200
+ program 4-------100---200---300---400---500---600---700---800---900---1000---1100---1200 
```

我曾尝试使用 foreach 在会计期间循环，但它不起作用。我想我可能走在正确的轨道上，我希望 SO 可以提供一些指导，或者至少是一个教程供我学习。我已经在下面的第二个数组上发布了到目前为止我编写的代码。我正在使用 C# 和 MVC 3。您可能会注意到它们不是字典中的字典。[如果我的同事是正确的，我将如何做这样的事情，我使用字典作为其他字典中的键来](https://stackoverflow.com/questions/433372/c-using-dictionary-as-a-key-in-other-dictionary)查看这个问题，但我不明白在这种情况下我将如何使用它。

```
Dictionary<string, double[]> MonthRow = new Dictionary<string, double[]>();

double[] PGContent = new double[12];

string lastPG = null;

foreach (var item in PGRow)
{
    if (lastPG != item.PG)
    {
        PGContent = new double[12];
    }

    var MonthList = from x in db.Month_Web
                    where x.PG == PG
                    group x by new { x.ACCOUNTING_PERIOD, x.PG, x.Amount } into pggroup
                    select new { accounting_period = pggroup.Key.ACCOUNTING_PERIOD, amount = pggroup.Sum(x => x.Amount) };

    foreach (var P in MonthList)
    {
        int accounting_period = int.Parse(P.accounting_period) - 1;
        PAContent[accounting_period] = (double)P.amount;
        MonthRow[item.PG] = PGContent;
        lastPG = item.PG;
    } 
```

我希望我已经清楚地解释了我的问题，请随时要求任何需要的澄清，因为我需要解决这个问题，并且会经常回来查看。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:51:23.610

不要尝试使用匿名类型或 LINQ 投影来创建新的数据类型，尤其是如果您是初学者，您只会感到困惑。如果你想要一个专门的数据类型，定义一个；例如：

```
public class Account
{
    public string Name { get; private set; }
    public decimal[] MonthAmount { get; private set; }

    readonly int maxMonths = 12;

    public Account(string name, ICollection<decimal> monthAmounts)
    {
        if (name == null)
            throw new ArgumentNullException("name");

        if (monthAmounts == null)
            throw new ArgumentNullException("monthAmounts");

        if (monthAmounts.Count > maxMonths)
            throw new ArgumentOutOfRangeException(string.Format(" monthAmounts must be <= {0}", maxMonths));

        this.Name = name;

        this.MonthAmount = new decimal[maxMonths];
        int i = 0;
        foreach (decimal d in monthAmounts)
        {
            this.MonthAmount[i] = d;
            i++;
        }
    }
} 
```

直接使用这种类型的实例，您不必将它们转换为数组、字典、列表或其他任何东西：

```
var accountPeriods = new List<Account>();
accountPeriods.Add(new Account("program-1", new decimal[] { 1, 2, 3, 4 })); 
```

您可以使用 LINQ 或其他方式来查询或更改新类型的实例：

```
foreach (Account a in accountPeriods)
    foreach (decimal d in a.MonthAmount)
        DoSomethingWith(d); 
```

这应该足以让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:45:51.340

希望这可以帮助。

```
// sample data
var data = new Dictionary<string, List<int>>();
data.Add("program-1", new List<int>() { 100, 110, 130 });
data.Add("program-2", new List<int>() { 200, 210, 230 });
data.Add("brogram-3", new List<int>() { 300, 310, 330 });

// query data
var newData = (from x in data
               where x.Key.Contains("pro")
               select x).ToDictionary(v => v.Key, v=>v.Value);

// display selected data
foreach (var kv in newData)
{
    Console.Write(kv.Key);
    foreach (var val in kv.Value)
    {
        Console.Write(" ");
        Console.Write(val.ToString());
    }
    Console.WriteLine();
} 
```

输出是：

```
program-1 100 110 130
program-2 200 210 230 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T16:55:46.570

我要感谢 @Ray Cheng 和 @Dour High Arch 的帮助，但我想出了另一种方法来完成这项任务，我想发布我的代码，以便下一个遇到同样问题的人可以更快地解决他们的问题.

上面我将我的代码分成更易于管理的部分，以尽可能清楚地解释我的问题，下面的代码将所有这些部分组合在一起，因此您可以看到全局。此代码返回一个数组，其中包含每个月的程序和金额。

```
public virtual ActionResult getAjaxPGs(string SP = null)
        {

            if (SP != null)
            {

                var PGList = from x in db.month_mapping
                             where x.PG_SUB_PROGRAM == SP 
                             select x;

                var PGRow = PGList.Select(x => new { x.PG }).Distinct().ToArray();

                float[] PGContent = new float[12];

                Dictionary<string,float[]> MonthRow = new Dictionary<string, float[]>();

                foreach (var item in PGRow)
                {

                        PGContent = new float[12];

                    var MonthList = from x in db.month_Web
                                    where x.PG == item.PG
                                    group x by new { x.ACCOUNTING_PERIOD, x.PG, x.Amount } into pggroup
                                    select new { accounting_period = pggroup.Key.ACCOUNTING_PERIOD, amount = pggroup.Sum(x => x.Amount) };

                    foreach (var mon in MonthList)
                    {
                        int accounting_period = int.Parse(mon.accounting_period) - 1;
                        PGContent[accounting_period] = (float)mon.amount/1000000;
                    }

                    MonthRow[item.PG] = PGContent;

                    }

                return Json(MonthRow, JsonRequestBehavior.AllowGet);

            }

            return View();
        } 
```

这段代码对我很有用，因为我是从 Linq 到 SQL 查询而不是直接将数据添加到代码中。我的问题主要源于将数据拉到 foreach 循环之外，因此它只从 SQL 中提取了 1 条数据，而不是全部 12 个月。我希望这可以帮助其他试图将数据从 SQL 数据源提取到多维数组中的人。

# oracle - 插入目标表，然后更新oracle中的源表字段

> ID：12181757
> 
> 赞同：0
> 
> 时间：2012-08-29T15:47:28.193
> 
> 标签：oracle

在 Oracle 中，我需要将记录从源插入到目标，然后在更新目标后更新源的 PROCESSED_DATE 字段。

一种方法是使用游标和逐行循环来实现相同的目的。

有没有其他方法可以有效地做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:04:50.500

不需要光标。假设您要传输那些尚未传输的行（由 processes_date 中的 NULL 值标识）。

```
insert into target_table (col1, col2, col3)
select col1, col2, col3
from source_table
where processed_date is null;

update source_table
   set processed_date = current_timestamp
where processed_date is null;

commit; 
```

为避免更新在 INSERT 运行时或在 INSERT 和更新之间插入的行，请以可序列化模式启动事务。

**在**运行 INSERT 之前，使用以下语句启动事务：

```
set transaction isolation level SERIALIZABLE; 
```

更多详细信息请参见手册：

*   [http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10005.htm#i2067247](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10005.htm#i2067247)
*   [http://docs.oracle.com/cd/E11882_01/server.112/e25789/consist.htm#BABCJIDI](http://docs.oracle.com/cd/E11882_01/server.112/e25789/consist.htm#BABCJIDI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:15:14.670

触发器应该起作用。目标表可以有一个触发器，在更新时，用处理日期更新源表的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:57:23.467

从别人那里得到另一个答案。认为该解决方案似乎比启用隔离级别更合理，因为我所有的新记录都将 PROCESSED_DATE 设为空（在目标表中插入记录时插入的 30 行）此外 PROCESSED_DATE = NULL 行只能通过以下方式更新使用我的工作。没有其他用户可以随时更新这些记录。

```
declare
date_stamp date;
begin
select sysdate
into date_stamp
from dual;

update source set processed_date = date_stamp
where procedded_date is null;
Insert into target 
select * from source
where processed_date = date_stamp;
commit;
end; 
```

/

让我知道对此有任何进一步的想法。非常感谢您在这方面的所有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T02:42:44.987

在这种情况下，我首选的解决方案是使用 PL/SQL 数组和批处理 DML，例如：

```
DECLARE
  CURSOR c IS SELECT * FROM tSource;
  TYPE tarrt IS TABLE OF c%ROWTYPE INDEX BY BINARY_INTEGER;
  tarr tarrt;
BEGIN
  OPEN c;
  FETCH c BULK COLLECT INTO tarr;
  CLOSE c;
  FORALL i IN 1..tarr.COUNT
    INSERT INTO tTarget VALUES tarr(i);
  FORALL i IN 1..tarr.COUNT
    UPDATE tSource SET processed_date = SYSDATE
    WHERE tSource.id = tarr(i).id;
END; 
```

上面的代码只是一个示例，并对表的结构做了一些假设。

它首先查询源表，并且只会插入和更新这些记录——这意味着您无需担心其他会话在运行时同时将更多记录插入源表。

它也可以很容易地更改为批量处理行（使用 fetch LIMIT 子句和循环），而不是像我在这里那样一次性处理。

# javascript - Twitter Bootstrap：打印模态窗口的内容

> ID：12181760
> 
> 赞同：57
> 
> 时间：2012-08-29T15:47:35.543
> 
> 标签：javascript, printing, twitter-bootstrap, modal-dialog

我正在使用 Bootstrap 开发一个站点，该站点有 28 个模式窗口，其中包含有关不同产品的信息。我希望能够在打开的模式窗口中打印信息。每个窗口都有一个`id`.

```
<!-- firecell panel & radio hub -->
           <div class="modal hide fade" id="fcpanelhub">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">X</button>
                <h3>5000 Control Panel & Radio Hub</h3>
              </div>
              <div class="modal-body">
                <img src="../site/img/firecell/firecell-panel-info-1.png" alt=""/><hr/>
                <img src="../site/img/firecell/firecell-panel-info-2.png" alt=""/><hr/>
                <img src="../site/img/firecell/firecell-radio-hub-info-1.png" alt=""/><hr/>
                <img src="../site/img/firecell/firecell-radio-hub-info-2.png" alt=""/>
              </div>
              <div class="modal-footer">
                <a href="#" class="btn" data-dismiss="modal">Close</a>
              </div>    
           </div> 
```

因此，如果我在“打印”中添加一个新按钮`modal-footer`，并且单击它，我希望打印该模式。我说会使用javascript是对的吗？如果是这样，我如何告诉 javascript 只打印打开的模式，而不是其他模式？

所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-29T15:51:12.730

## 另一种解决方案

这是基于[Bennett McElwee](https://stackoverflow.com/a/2618980/603003)对下面提到的[同一问题的回答的新解决方案。](https://stackoverflow.com/users/24181/greg)

使用 IE 9 & 10、Opera 12.01、Google Chrome 22 和 Firefox 15.0 测试。
[jsFiddle 示例](http://jsfiddle.net/95ezN/3/)

### 1.) 将此 CSS 添加到您的网站：

```
@media screen {
  #printSection {
      display: none;
  }
}

@media print {
  body * {
    visibility:hidden;
  }
  #printSection, #printSection * {
    visibility:visible;
  }
  #printSection {
    position:absolute;
    left:0;
    top:0;
  }
} 
```

### 2.) 添加我的 JavaScript 函数

```
function printElement(elem, append, delimiter) {
    var domClone = elem.cloneNode(true);

    var $printSection = document.getElementById("printSection");

    if (!$printSection) {
        $printSection = document.createElement("div");
        $printSection.id = "printSection";
        document.body.appendChild($printSection);
    }

    if (append !== true) {
        $printSection.innerHTML = "";
    }

    else if (append === true) {
        if (typeof (delimiter) === "string") {
            $printSection.innerHTML += delimiter;
        }
        else if (typeof (delimiter) === "object") {
            $printSection.appendChild(delimiter);
        }
    }

    $printSection.appendChild(domClone);
}​ 
```

您已准备好在您的网站上打印任何元素！
只需调用`printElement()`您的元素并`window.print()`在完成后执行。

**注意：** 如果您想在打印之前修改内容（并且仅在打印版本中），请查看此示例（由评论中的 waspina 提供）：http: [//jsfiddle.net/95ezN/121/](http://jsfiddle.net/95ezN/121/)

也可以使用 CSS 来显示打印版本中的附加内容（并且仅在那里）。

* * *

## 以前的解决方案

我认为，您必须通过 CSS 隐藏网站的所有其他部分。

最好将所有不可打印的内容移动到单独的`DIV`：

```
<body>
  <div class="non-printable">
    <!-- ... -->
  </div>

  <div class="printable">
    <!-- Modal dialog comes here -->
  </div>
</body> 
```

然后在你的 CSS 中：

```
.printable { display: none; }

@media print
{
    .non-printable { display: none; }
    .printable { display: block; }
} 
```

感谢[Greg](https://stackoverflow.com/users/24181/greg)，他已经回答了一个类似的问题：[仅打印 <div id="printarea"></div>？](https://stackoverflow.com/questions/468881/print-div-id-printarea-div-only)

**使用 JavaScript**有一个问题：用户看不到预览 - 至少在 Internet Explorer 中！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-10-10T10:27:51.833

这是一个使用 JQuery 扩展的选项，我根据接受答案的评论中的 waspinator 代码制作：

```
jQuery.fn.extend({
    printElem: function() {
        var cloned = this.clone();
        var printSection = $('#printSection');
        if (printSection.length == 0) {
            printSection = $('<div id="printSection"></div>')
            $('body').append(printSection);
        }
        printSection.append(cloned);
        var toggleBody = $('body *:visible');
        toggleBody.hide();
        $('#printSection, #printSection *').show();
        window.print();
        printSection.remove();
        toggleBody.show();
    }
});

$(document).ready(function(){
    $(document).on('click', '#btnPrint', function(){
        $('.printMe').printElem();
    });
}); 
```

JSFiddle：http: [//jsfiddle.net/95ezN/1227/](http://jsfiddle.net/95ezN/1227/)

如果您不想将其应用于每一个打印件，而只是在您的自定义打印按钮上执行此操作（这是我的情况），这将很有用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-29T15:50:54.233

我建议你试试这个 jQuery 插件[打印元素](http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/)

它可以让您只打印您选择的元素。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-05-23T11:11:45.887

使用当前接受的解决方案，您无法再打印包含对话框本身的页面。这是一个更加动态的解决方案：

JavaScript：

```
$().ready(function () {
    $('.modal.printable').on('shown.bs.modal', function () {
        $('.modal-dialog', this).addClass('focused');
        $('body').addClass('modalprinter');

        if ($(this).hasClass('autoprint')) {
            window.print();
        }
    }).on('hidden.bs.modal', function () {
        $('.modal-dialog', this).removeClass('focused');
        $('body').removeClass('modalprinter');
    });
}); 
```

CSS：

```
@media print {
    body.modalprinter * {
        visibility: hidden;
    }

    body.modalprinter .modal-dialog.focused {
        position: absolute;
        padding: 0;
        margin: 0;
        left: 0;
        top: 0;
    }

    body.modalprinter .modal-dialog.focused .modal-content {
        border-width: 0;
    }

    body.modalprinter .modal-dialog.focused .modal-content .modal-header .modal-title,
    body.modalprinter .modal-dialog.focused .modal-content .modal-body,
    body.modalprinter .modal-dialog.focused .modal-content .modal-body * {
        visibility: visible;
    }

    body.modalprinter .modal-dialog.focused .modal-content .modal-header,
    body.modalprinter .modal-dialog.focused .modal-content .modal-body {
        padding: 0;
    }

    body.modalprinter .modal-dialog.focused .modal-content .modal-header .modal-title {
        margin-bottom: 20px;
    }
} 
```

例子：

```
<div class="modal fade printable autoprint">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Modal title</h4>
      </div>
      <div class="modal-body">
        <p>One fine body&hellip;</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" onclick="window.print();">Print</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal --> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-06-16T21:20:08.497

这是一个修改后的解决方案，也适用于使用 Grails 模板呈现的模态窗口，您可以在同一正文中多次调用相同的模态模板（使用不同的值）。这个线程对我帮助很大，所以我想我会分享它，以防其他 Grails 用户在这里找到他们的方式。

对于那些好奇的人，接受的解决方案对我不起作用，因为我正在渲染表格；每行都有一个按钮，可以打开一个模式窗口，其中包含有关记录的更多详细信息。这导致多个 printSection div 被创建并打印在彼此之上。因此，我不得不在打印完成后修改 js 以清理 div。

## CSS

我将此 CSS 直接添加到我的模态 gsp 中，但将其添加到父级具有相同的效果。

```
<style type="text/css">
   @media screen {
        #printSection {
           display: none;
        }
   }

   @media print {
        body > *:not(#printSection) {
           display: none;
        }
        #printSection, #printSection * {
            visibility: visible;
        }
        #printSection {
            position:absolute;
            left:0;
            top:0;
        }
   }
</style> 
```

将它添加到站点范围的 CSS 会终止站点其他部分的打印功能。我从[ComFreak](https://stackoverflow.com/users/603003/comfreek)接受的答案（基于[Bennett McElwee 答案](https://stackoverflow.com/a/2618980/603003)）中得到了这个，但它是使用 fanfavorite 对 Print <div id=printarea></div> 的答案中的 ':not' 功能进行[修改](https://stackoverflow.com/users/751465/fanfavorite)的[？](https://stackoverflow.com/questions/468881/print-div-id-printarea-div-only). 我选择了“显示”而不是“可见性”，因为我不可见的正文内容正在创建额外的空白页面，这对我的用户来说是不可接受的。

## js

这是我的javascript，从[ComFreak](https://stackoverflow.com/users/603003/comfreek)对这个问题的接受答案修改而来。

```
function printDiv(div) {    
    // Create and insert new print section
    var elem = document.getElementById(div);
    var domClone = elem.cloneNode(true);
    var $printSection = document.createElement("div");
    $printSection.id = "printSection";
    $printSection.appendChild(domClone);
    document.body.insertBefore($printSection, document.body.firstChild);

    window.print(); 

    // Clean up print section for future use
    var oldElem = document.getElementById("printSection");
    if (oldElem != null) { oldElem.parentNode.removeChild(oldElem); } 
                          //oldElem.remove() not supported by IE

    return true;
} 
```

我不需要附加元素，因此我删除了该方面并将函数更改为专门打印一个 div。

## HTML (gsp)

和模态模板。这将打印模态页眉和正文，并排除按钮所在的页脚。

```
<div class="modal-content">
    <div id="print-me"> <!-- This is the div that is cloned and printed -->
        <div class="modal-header">
            <!-- HEADER CONTENT -->
        </div>
        <div class="modal-body">
             <!-- BODY CONTENT -->
        </div>
    </div>
    <div class="modal-footer">
                                 <!-- This is where I specify the div to print -->
        <button type="button" class="btn btn-default" onclick="printDiv('print-me')">Print</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
    </div>
</div> 
```

我希望对某人有所帮助！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-11-04T20:15:24.117

我只是使用了一点 jQuery/javascript：

html:

```
<h1>Don't Print</h1>

<a data-target="#myModal" role="button" class="btn" data-toggle="modal">Launch modal</a>

<div class="modal fade hide" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"      aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
     <h3 id="myModalLabel">Modal to print</h3>
  </div>
  <div class="modal-body">
    <p>Print Me</p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary" id="printButton">Print</button>
  </div>
</div> 
```

js：

```
$('#printButton').on('click', function () {
    if ($('.modal').is(':visible')) {
        var modalId = $(event.target).closest('.modal').attr('id');
        $('body').css('visibility', 'hidden');
        $("#" + modalId).css('visibility', 'visible');
        $('#' + modalId).removeClass('modal');
        window.print();
        $('body').css('visibility', 'visible');
        $('#' + modalId).addClass('modal');
    } else {
        window.print();
    }
}); 
```

这是[小提琴](http://jsfiddle.net/alexoviedo999/hmjefdhL/2/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-01T14:20:58.473

这是一个没有 Javascript 或插件的解决方案 - 只是一些 css 和标记中的一个额外类。此解决方案使用 BootStrap 在打开对话框时将类添加到正文的事实。我们使用这个类来隐藏正文，只打印对话框。

为了确保我们可以确定页面的主体，我们需要在 div 中包含主页内容中的所有内容 - 我使用了 id="mainContent"。下面的示例页面布局 - 带有一个主页和两个对话框

```
<body>
 <div class="container body-content">

  <div id="mainContent">
       main page stuff     
  </div>
  <!-- Dialog One -->
  <div class="modal fade in">
   <div class="modal-dialog">
    <div class="modal-content">
          ...
    </div>
   </div>
  </div>

  <!-- Dialog Two -->
  <div class="modal fade in">
   <div class="modal-dialog">
    <div class="modal-content">
          ...
    </div>
   </div>
  </div>

 </div>
</body> 
```

然后在我们的 CSS 打印媒体查询中，我使用 display: none 来隐藏我不想显示的所有内容 - 即打开对话框时的 mainContent。我还使用了一个特定的类 noPrint 用于页面的任何不应该显示的部分——比如操作按钮。在这里，我还隐藏了页眉和页脚。您可能需要对其进行调整以获得您想要的。

```
@media print {
    header, .footer, footer {
        display: none;
    }

    /* hide main content when dialog open */
    body.modal-open div.container.body-content div#mainContent {
        display: none;
    }

    .noPrint {
        display: none;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-07T09:45:08.617

我遇到了两个问题问题 1：所有字段一个接一个地出现，问题 2 用于从弹出窗口打印时页面底部的空白。

我解决了这个问题

使所有身体**都不显示*** 元素中的大多数都用于隐藏可见性，从而创造空间，因此避免隐藏可见性

```
 @media print {
        body * {
           display:none;
        width:auto;
        height:auto;
        margin:0px;padding:0px; 
        }
        #printSection, #printSection * {
            display:inline-block!important;
        }
        #printSection {
            position:absolute;
            left:0;
            top:0;  
            margin:0px; 
            page-break-before: none;
            page-break-after: none;
            page-break-inside: avoid;      
        }
#printSection .form-group{

      width:100%!important;
      float:left!important;
      page-break-after: avoid;
    }
#printSection label{
        float:left!important;
        width:200px!important;
        display:inline-block!important;
      }

#printSection .form-control.search-input{
        float:left!important;
        width:200px!important;
        display: inline-block!important;
      }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-06-21T15:41:20.897

```
@media print{
	body{
		visibility: hidden; /* no print*/
	}
	.print{

		visibility:visible; /*print*/
	}
}
```

```
<body>
  <div class="noprint"> <!---no print--->
  <div class="noprint"> <!---no print--->
  <div class="print">   <!---print--->
  <div class="print">   <!---print--->

</body>
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-12T20:33:20.677

您可以从此来源下载 printThis lib [https://github.com/jasonday/printThis/blob/0a7f799693af8a8303bf0b8df0efc80c2694af81/printThis.js](https://github.com/jasonday/printThis/blob/0a7f799693af8a8303bf0b8df0efc80c2694af81/printThis.js) 并将其包含到您的 html 页面中

调用以下 jquery 打印所有内容，包括不可见的内容。如果您有多个 css 文件，您可以将 css 文件包含在一个数组中。

```
$("#modalDiv").printThis({ 
    debug: false,              
    importCSS: true,             
    importStyle: true,         
    printContainer: true,       
    loadCSS: "../css/style.css", 
    pageTitle: "My Modal",             
    removeInline: false,        
    printDelay: 333,            
    header: null,             
    formValues: true          
}); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-06-24T15:34:14.863

所以我有一个反应应用程序，它作为一个 web 组件存在于多个旧网站上。这些解决方案都不是我想要的。接受的答案有缺点。假设我们有这个 CSS：

```
@media print {
  body * {
    visibility:hidden;
  }
  #printSection, #printSection * {
    visibility:visible;
  }
  #printSection {
    position:absolute;
    left:0;
    top:0;
  }
} 
```

`body * {visibility : hidden}`如果用户按 CTRL+P，将阻止用户打印页面。

这也不考虑多个打印 UX 工作流程，以防用户可能需要从同一页面上的模态和抽屉打印页面。这是一个罕见的情况，但同样没有考虑到

## 解决方案

我选择的解决方案是在 body 上应用顶级 CSS 类。在我的 React Modal 组件中，我使用了 useEffect 调用

```
import React, { useEffect } from 'react'

export const ModalPane = (props) => {
  useEffect(() => {
    const body = document.querySelector('body')
    if (body) {
      body.classList.add('hide-on-print')
    }
    return () => {
      if (body) {
        body.classList.remove('hide-on-print')
      }
    }
  }, [])

  const handlePrint = () => {
    // add any prework or analytics tracking here etc
    window.print()
  }

  return (
    <div className="print-me">
      <h1>Modal content stuff here</h1>
      <button type="button" onClick={handlePrint}>Print</button>
    </div>
  )
} 
```

一旦呈现此模态（也就是用户正在查看预期的模态），将仅打印模态的内容。不管他们是点击打印按钮还是按 CTRL+P

这应用了一个`hide-on-print`在 body 元素上调用的类。然后应用此媒体样式，其范围专门针对此打印 UX 实例（您可以为其他特定打印查询向正文添加更多类）

```
@media print {
  body.hide-for-print {
    visibility: hidden !important;
  }
  body.hide-for-print .print-me {
    visibility: visible;
  }
} 
```

## TLDR

`hide-for-print`使用仅在渲染时应用类的 react useEffect 组件。将 @print 媒体查询包装在此类后面。这可以处理所有预期的 UX 打印用例，并且可以扩展到任何其他特定的打印 UX 用例

# javascript - jQuery如何获取最后点击元素的类或ID？

> ID：12181770
> 
> 赞同：3
> 
> 时间：2012-08-29T15:48:08.053
> 
> 标签：javascript, jquery

我正在尝试获取最后一次单击元素的类或 id。这是我根据我在[这里](https://stackoverflow.com/questions/5905014/determine-last-item-clicked)找到的...

**HTML**

```
<a href="" class="button">Button</a> 
```

**查询**

```
$('.button').click(function () {
          myFuntion();
});

function myFunction (e) {
 e = e || event;
 $.lastClicked = e.target || e.srcElement;

 var lastClickedElement = $.lastClicked;
 console.log(lastClickedElement);

} 
```

这种做我想要的，但我不知道如何去修改它，所以我可以得到这个类。

我也尝试过使用[这个](https://stackoverflow.com/questions/9486936/get-the-id-of-the-last-clicked-jquery)解决方案，但无法让它与我的代码一起使用。

```
$('.button').click(function () {
  myFuntion();
});

function myFunction(){
    var lastID;
    lastID = $(this).attr("id");

    console.log(lastID);
} 
```

当我这样做时，我的控制台日志返回为未定义。我可能遗漏了一些明显的东西。任何帮助深表感谢。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:50:47.613

我想到了几种方法：

```
$(".button").click(myFunction); 
```

应该与上述一起工作`myFunction`。

* * *

```
$(".button").click(function () { myFunction($(this)); });
function myFunction($elem) {
   var lastID;
   lastID = $elem.attr('id');
   $.data('lastID', lastID);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:50:52.573

您可以将单击的元素作为参数传递给您的函数：

```
$('.button').click(function () {
    myFunction(this);
});

function myFunction(element) {
    console.log(element);
    console.log(element.id);
    console.log($(element).attr("class"));
} 
```

**更新**添加了[jsfiddle](http://jsfiddle.net/Xgrcn/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T15:51:07.550

为了获取元素的类名，假设您对要从中检索数据的元素有准确的引用：

```
var lastClickedElement = $.lastClicked,
    lastClickedElementClassNames = lastClickedElement.className; 
```

不过，这确实会返回元素所有类的完整列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T15:51:12.340

```
$('.button').click(function () {
  myFuntion(this);
});

function myFunction(ele){
    var lastID;
    lastID = $(ele).attr("id");

    console.log(lastID);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T16:37:23.123

首先选择所有可能的 DOM 元素

```
 var lastSelectedElement = null

    $(document).ready(function(){
       $("*").live("click",function(){
       lastSelectedElement = $(this);
       myFunction($(this));
      });
    });

   function myFunction(element) {
console.log(element);
console.log(element.id);
console.log($(element).attr("class"));
 } 
```

比你可以`lastSelectedElement`用 jQuery 抓取它的 ID 或 Class来玩`.attr("ID OR CLASS");`

# python - 如何在nose.plugins.base.Plugin.addFailure 中获取异常？

> ID：12181771
> 
> 赞同：2
> 
> 时间：2012-08-29T15:48:11.710
> 
> 标签：python, nose

我正在尝试为鼻子编写一个插件，该插件会在 GUI 中为某些类型的异常生成和显示额外的调试信息。我想在插件中执行此操作的原因是因为我希望仅在`--enable-gui`给出选项时启动 GUI，并且插件是向鼻子运行器添加命令行选项的唯一方法。

根据文档，我需要覆盖`addFailure(step, err)`and `addError(step, err)`，他们说那`err`是`sys.exc_info()`元组：

[http://nose.readthedocs.org/en/latest/plugins/interface.html](http://nose.readthedocs.org/en/latest/plugins/interface.html)

不幸的是，我得到了完全不同的东西：异常被代表它的字符串值替换。这是我的代码：

```
def addError(self, test, err):
    info = ', '.join((type(x).__name__) for x in err)
    open('/tmp/xxxxx', 'a').write(info + '\n')

def addFailure(self, test, err):
    info = ', '.join((type(x).__name__) for x in err)
    open('/tmp/xxxxx', 'a').write(info + '\n') 
```

这是输出：

```
type, str, traceback
type, str, traceback 
```

所以，`exc_type, exc_value, exc_tb`我得到的是 ，而不是`exc_type, str(exc_value), exc_tb`。

这是对我的重写方法的调用堆栈：

```
Traceback (most recent call last):
  File "runtests.py", line 6, in <module>
    nose.main(module=tests, addplugins=tests.plugins.get_all_plugins())
  File "/usr/lib/python2.7/dist-packages/nose/core.py", line 118, in __init__
    **extra_args)
  File "/usr/lib/python2.7/unittest/main.py", line 95, in __init__
    self.runTests()
  File "/usr/lib/python2.7/dist-packages/nose/core.py", line 197, in runTests
    result = self.testRunner.run(self.test)
  File "/usr/lib/python2.7/dist-packages/nose/core.py", line 61, in run
    test(result)
  File "/usr/lib/python2.7/dist-packages/nose/suite.py", line 176, in __call__
    return self.run(*arg, **kw)
  File "/usr/lib/python2.7/dist-packages/nose/suite.py", line 223, in run
    test(orig)
  File "/usr/lib/python2.7/dist-packages/nose/suite.py", line 176, in __call__
    return self.run(*arg, **kw)
  File "/usr/lib/python2.7/dist-packages/nose/suite.py", line 223, in run
    test(orig)
  File "/usr/lib/python2.7/dist-packages/nose/suite.py", line 176, in __call__
    return self.run(*arg, **kw)
  File "/usr/lib/python2.7/dist-packages/nose/suite.py", line 223, in run
    test(orig)
  File "/usr/lib/python2.7/dist-packages/nose/case.py", line 45, in __call__
    return self.run(*arg, **kwarg)
  File "/usr/lib/python2.7/dist-packages/nose/case.py", line 138, in run
    result.addError(self, err)
  File "/usr/lib/python2.7/dist-packages/nose/proxy.py", line 134, in addError
    plugins.addError(self.test, err)
  File "/usr/lib/python2.7/dist-packages/nose/plugins/manager.py", line 94, in __call__
    return self.call(*arg, **kw)
  File "/usr/lib/python2.7/dist-packages/nose/plugins/manager.py", line 162, in simple
    result = meth(*arg, **kw)
  File "<snip>/plugins.py", line 31, in addError
    open('/tmp/xxxxx', 'a').write(info + '\n') 
```

我无法从中提取异常`sys.exc_info()`，因为它已经被另一个替换（特别是在引发异常的`UnicodeEncodeError`期间被捕获）。`__str__`

有什么方法可以`exc_value`从某个地方提取，比如回溯？

一个潜在的解决方法：我知道我可以让我的插件成为一个全局变量，而不是在其中处理异常，我可以直接将信息发送到插件本身。不幸的是，这不是一个非常干净的解决方案，所以我想避免它。

为什么我需要一个 GUI：我得到的错误是由 twisted 创建的彩色 HTML 回溯，无论我是打印 HTML 还是使用`html2text`表示，这在控制台中都是不可读的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:06:59.427

**err**元组实际上是：（异常类型，实际异常，回溯）。您应该能够从异常或回溯中访问所需的信息。

请注意，在您的代码中，您将所有内容都写入字符串：

```
info = ', '.join((type(x).__name__) for x in err) 
```

这意味着它确实会被转换为一个字符串，如果我理解正确的话，这就是你所抱怨的......

# plone - 如何为 allI DexterityContent 类型的显示菜单添加附加视图

> ID：12181772
> 
> 赞同：0
> 
> 时间：2012-08-29T15:48:24.423
> 
> 标签：plone

我通过@@myview 创建了一个可用于所有 IDExterityContent 类型的视图。但我也想将它添加到 IDExterityContent 类型的显示菜单中。

更新：更准确地说，我希望 TTW 创建灵巧类型以在显示菜单中提供此视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:35:03.403

支持动态视图选项的内容的可用视图存储在站点数据库中，portal_factory

[https://docs.plone.org/develop/plone/content/dynamic_views.html](https://docs.plone.org/develop/plone/content/dynamic_views.html)

如果您想添加对多个视图的支持，我建议您创建一个安装程序 Python 片段，它将迭代 portal_factory 以获取可用类型并修改它们的 view_methods 属性。

[https://docs.plone.org/develop/plone/content/types.html#type-in​​formation-registry](https://docs.plone.org/develop/plone/content/types.html#type-information-registry)

[https://docs.plone.org/develop/addons/components/genericsetup.html#custom-installer-code-setuphandlers-py](https://docs.plone.org/develop/addons/components/genericsetup.html#custom-installer-code-setuphandlers-py)

# javascript - 用第二个原型扩展一个对象

> ID：12181779
> 
> 赞同：0
> 
> 时间：2012-08-29T15:48:43.373
> 
> 标签：javascript, prototype, mixins

我有一个原型`Node`，我创建了几个对象。

在这些对象的生命周期中，我*可能*需要它们成为`ValueNode`or `PropertyNode`。我目前通过为每个“子类”使用一个助手来处理这个问题，并在两个助手上共享一个 commong 接口。想想像状态模式这样的东西。

但是，我想改进这个设计，通过使用附加功能实际扩展现有对象，而不是使用帮助程序。

IE：

```
n = new Node();

...

// n needs to become a ValueNode
// ???

n.methodDefinedForValueNodesOnly(); 
```

这在javascript中可能吗？这是“好习惯”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:27:29.160

在阅读[了这篇](http://javascriptweblog.wordpress.com/2011/05/31/a-fresh-look-at-javascript-mixins/)关于 mixins 的文章后，我最终使用了以下解决方案（基本上很好地使用了 mixins）。

```
Node = function() {};
Node.prototype.one = function() {alert(1)};

asValueNode = (function() {
  function two() {
    alert(2)
  };
  return function() {
    this.two = two;
    return this;
  }
})();

u = new Node();
// u is a usable Node.
// ...

// Make u a ValueNode
asValueNode.call(u);

u.one();
u.two(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:02:24.833

在 JavaScript 中，您可以只执行一次原型继承。您可以使用一些提供丰富类子系统的框架，例如[ExtJS](http://www.sencha.com)、[Ember.js](http://www.emberjs.com)等。另一种方法可能是迭代所需对象的属性，然后将其应用于目标对象。像这样的东西：

```
function Node( desc ) {
    this.desc = desc;
    this.doNodeThing = function() {
        console.log( "noding for " + this.desc );
    }
}

function FooNode( desc ) {
    this.desc = desc;
    this.doFooNodeThing = function() {
        console.log( "foo noding for " + this.desc );
    }
}

function BarNode( desc ) {
    this.desc = desc;
    this.doBarNodeThing = function() {
        console.log( "bar noding for " + this.desc );
    }
}

function inherit( obj, superObj ) {

    for ( var x in superObj ) {
        if ( typeof superObj[x] == "function" ) {
            obj[x] = superObj[x];
        }
    }
}

var n1 = new Node( "tree node" );
n1.doNodeThing();

var n2 = new Node( "folder node" );
n2.doNodeThing();

inherit( n1, new BarNode() );
n1.doBarNodeThing();
//n2.doBarNodeThing();    <= TypeError: n2.doBarNodeThing is not a function

inherit( n1, new FooNode() );
n1.doBarNodeThing();
n1.doFooNodeThing();
//n2.doFooNodeThing();    <= TypeError: n2.doFooNodeThing is not a function 
```

上面的代码会将函数添加到对象本身，而不是原型。

jsFiddle：http: [//jsfiddle.net/davidbuzatto/3cCGC/](http://jsfiddle.net/davidbuzatto/3cCGC/)

# asp.net-mvc - 如何从 Asp.net mvc 中的 DropDownList 中检索文本和值

> ID：12181781
> 
> 赞同：0
> 
> 时间：2012-08-29T15:48:43.310
> 
> 标签：asp.net-mvc, drop-down-menu

我在 asp.net mvc 中有一个下拉列表，它使用普通绑定语法绑定，我可以在控制器中检索“值”。但我还需要显示与该值关联的文本。我可以走硬路线并在数据库中查询此关联值。但我想知道是否有一种简单的方法可以检索控制器中的文本和值。

我使用的示例代码

```
<%= Html.DropDownList("State","Pick a State")%> 
```

显示

```
"NJ", "New Jersey" etc. 
```

在控制器中

```
 public ActionResult  SelectState(string State)
{
  // I have value of State (NJ) ...I also need the Text for this

} 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:52:09.023

作为表单提交的一部分的值是下拉项的值。要同时获得两者，您可以将值更改为“值分隔符文本”之类的东西，例如“NJ|New Jersey”之类的东西。然后你可以在控制器中解析它。

# assembly - 在 x86 汇编器中找到一个用于教育目的的最小自修改代码示例？

> ID：12181789
> 
> 赞同：3
> 
> 时间：2012-08-29T15:49:26.140
> 
> 标签：assembly, x86, self-modifying

我正在寻找几行长的示例，演示 x86 汇编程序中的自修改代码，用于教育目的（不需要做一些有意义的事情，但需要清楚地编写自己的代码，然后在阅读代码本身时执行它）。

我确实浏览了一点网络，但所有的例子要么太复杂，要么就是不言自明。我可能错过了正确的去处，所以请随意建议链接或代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T17:56:28.167

许多处理器在更改代码后无法立即看到对代码的修改，而是执行旧字节。例如，下面的代码仍然（大多数时候）增加 eax，即使在 'inc' 指令被 'nop'-s 覆盖之后。您应该几乎总是看到 eax=1，如果在“mov”之后发生异常，则得到 eax=0。

```
; Intel syntax

.arch   i386
.text
start:
        xor     %eax, %eax
        mov     word ptr change, 0x9090
change: inc     %eax
        nop
        ret 
```

如果 EFLAGS.TF=1 eax 将始终为 0。这是否有用是另一回事。很久以前，一位朋友使用自修改代码进行混淆，并且有几个上述陷阱，依赖于处理器实际上忽略了更改。

# php - php iis7如何用不同的查询字符串参数重写相同的url？

> ID：12181791
> 
> 赞同：1
> 
> 时间：2012-08-29T15:49:26.853
> 
> 标签：php, .net, iis-7

我没有使用 IIS7 和 php 的经验。

```
http://example.demo.com/demo.php?action=user&userid=xx
http://example.demo.com/demo.php?action=admin&adminid=xx 
```

我想重写这个网址，如下所示。

```
http://example.demo.com/demo/user/xx
http://example.demo.com/demo/admin/xx 
```

我的问题是，由于相同的 url 模式，重写规则是冲突的。

```
 <rule name="demorule1">
                    <match url="^demo/([a-z]+)+/([0-9]+)" />
                    <action type="Rewrite" url="demo.php?action={R:1}&amp;userid={R:2}" />
                </rule> 
```

这对任何用户或管理员都适用。我如何重写规则以便两者都可以使用。

# c# - 如何将 youtube 网址转换为 .wav 文件？

> ID：12181795
> 
> 赞同：0
> 
> 时间：2012-08-29T15:49:34.907
> 
> 标签：c#, url, youtube, converter, wav

我想知道是否可以将 youtube 视频的 url 转换为 .wav 文件。如果有可能，那么我该怎么做？谢谢，我感谢所有的回复。

PS：我在winforms中做这个应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:52:42.807

转到[KeepVid.com](http://www.keepvid.com)，输入您的 YouTube 视频的 URL，然后保存您想要的文件。

# visual-c++ - Xinput 不适用于带有 Visual Studio 2012 的 Windows 7

> ID：12181796
> 
> 赞同：2
> 
> 时间：2012-08-29T15:49:39.290
> 
> 标签：visual-c++, windows-7, sdl, visual-studio-2012

从 VS2010 迁移到 VS2012 后，Xinput 已停止在 Windows 7 上运行。

我得到以下缺少的 dll：

*   XINPUT1_4.DLL
*   api-ms-win-eventing-classicprovider-l1-1-0.dll

请注意，在 Windows 8 上一切正常。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-14T11:12:04.673

我在 Windows 8 上使用 VS 2012，但是当我的一位团队成员尝试在 Win7 PC 上运行我的程序时，我遇到了同样的问题。设法通过更改 xinput.lib 来解决它；至 XINPUT9_1_0.LIB；在项目属性->链接器->输入->附加依赖项中

有关 Xinput 版本的更多信息，请查看[http://msdn.microsoft.com/en-us/library/windows/desktop/hh405051(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh405051(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T05:13:41.677

我得到了同样的结果`XInput`，在 Windows 7 上将项目从 VS2010 移动到 2012。似乎 VS2012 带有一个新的“XInput.h”，它需要 XInput1_4.dll。

我所要做的就是将我的依赖项从 XInput.lib 更改为 XInput9_1_0.lib（这是旧版本）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T15:59:38.397

我设法通过以下方式解决了这个问题：

在 VS2012 中，directx 库包含在磁盘上。这是一个新版本的库，似乎只能在 Windows 8 上运行，目前似乎还没有可再发行版。

作为一种解决方法，您可以链接到旧的 sdk

1) 安装旧的direct x sdk 2) Additional Library Dependencies 下：$(DXSDK_DIR)Lib\x86; 3）在附加依赖项下：xinput.lib；

# javascript - jquery中的live和trigger

> ID：12181800
> 
> 赞同：0
> 
> 时间：2012-08-29T15:49:55.297
> 
> 标签：javascript, jquery

我有一个功能：

```
$('#def_video_settings .add_rem:contains(-)').live('click', function(){
        // do something
    }); 
```

我想在另一个地方执行代码“//做某事”。像这样的东西

```
$('#def_video_settings .add_rem:contains(-)').trigger('click'); 
```

但它不起作用。

有可能的？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:57:59.230

[http://jsfiddle.net/tjUk5/](http://jsfiddle.net/tjUk5/)

HTML

```
<div id="def_video_settings">
    <a class="add_rem">123-abc</a>
</div>​ 
```

脚本

```
$('#def_video_settings .add_rem:contains(-)').on('click', function(){
    alert('do something');
});

$('#def_video_settings .add_rem:contains(-)').trigger('click');
​ 
```

这是正常工作的。

如果您要动态添加内容，这可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:53:06.160

```
$('#def_video_settings .add_rem:contains(-)').click(); 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T07:25:08.377

我不确定这是否算作预期答案，但我的第一个猜测是

`$('#def_video_settings .add_rem:contains(-)').live('click', fnDoSomething);`

将其保留为适当的功能而不是匿名功能，您可以从其他地方调用它吗？

`function fnDoSomething(){ // Do Something }`

当然，我可能是错的。

# python - 在 apache 服务器上运行的 Cherrypy 应用程序出现套接字错误

> ID：12181803
> 
> 赞同：3
> 
> 时间：2012-08-29T15:50:00.147
> 
> 标签：python, apache, cherrypy

当尝试在 Apache 服务器上启动一个cherrypy 网站时，无论我选择什么端口，我总是会收到一条错误消息：“无法创建套接字”。

我使用 netstat 来验证我尝试连接的端口是否正在侦听。是否需要某种配置才能让应用程序在 Apache 服务器上运行？我对cherrypy或Apache的经验很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:08:23.613

Cherrypy 是一个处理 http 请求的框架——它实际上被设计为作为一个独立的网络服务器运行。因此它与 apache 有重叠的功能，你必须做出选择：

1.  跳过cherrypy，让apache使用[mod_python](http://www.modpython.org/live/current/doc-html/)加载你的python脚本。这将允许 apache 非常快速地运行您的 python 代码，而没有 cgi 的开销。Apache 将`handler(req)`在您的代码中调用该函数，并通过`req`. Django 使用这种方法。
2.  两者都保留，但让 apache 处理监听，并在 apache 配置文件（即 httpd.conf）中定义您的端口。然后[阅读更多关于apache背后的cherrypy](http://tools.cherrypy.org/wiki/BehindApache)
3.  跳过 apache 并使用 cherrypy 作为独立的 Web 服务器

我对 1 有很好的经验，但所有这些都应该没问题。

# api - 谷歌搜索 api 唯一链接

> ID：12181805
> 
> 赞同：1
> 
> 时间：2012-08-29T15:50:08.710
> 
> 标签：api, search, hyperlink, unique

我一直在使用 Google 搜索 API 来查找在表单中输入的网站有多少链接。我现在遇到的问题是我的客户想知道有多少独特的网站链接到他们。

我曾想过记录所有检索到的 url，但谷歌限制为 48 个结果，所以它不起作用。

有没有办法只提取唯一的 url 结果？

# php - 无法在 PHP 表单帖子中检索选定的单选按钮值

> ID：12181808
> 
> 赞同：0
> 
> 时间：2012-08-29T15:50:29.487
> 
> 标签：php, wordpress

我无法在表单帖子中获取选定的单选按钮值。无论我选择哪个选项，我都会得到“开启”的值。请注意，这是在 Wordpress 插件选项页面中。

表格代码如下：

```
?>
<div class="wrap">
    <?php screen_icon(); ?>
    <h2>Title</h2>
    <br />
    <form action="options-general.php?page=page" method="post">
    <table class="widefat">
    <thead>
        <tr>
            <th></th>
            <th>Site Name</th>
            <th>Site URL</th>
            <th>Username</th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <th></th>
            <th>Site Name</th>
            <th>Site URL</th>
            <th>Username</th>
        </tr>
    </tfoot>
    <tbody>
    <?php 

    $size = count($sites);

    for ( $i = 0; $i < $size; $i++) {

        echo '<tr>';

        for ($j = 0; $j < 4; $j++) {
            if ($j == 0) {

            echo '<td><input type="radio" id="cta_siteID_'.$i.'" name="cta_siteID",value="'.$i.'"/></td>';

            }
            else
            {

                echo '<td>'.$sites[$i][$j-1].'</td>';
            }
        }
        echo '</tr>';
    } 
    ?>
    </tbody>
   </table>
   <br />

   <input type="hidden" name="formType" value="main" />
   <select name="selectedItem">
        <option value="" selected="true">Select an Option</option>
        <option value="add">Add Site</option>
        <option value="edit">Edit Site</option>
        <option value="delete">Delete Site</option>
   </select>
   <input type="submit" name="Apply" value="Apply" class="button-primary" />
   </form>
</div> 
```

当我在单选组中选择一个项目后执行 var_dump($_POST) 时，我得到以下信息：

> onarray(4) { ["cta_siteID"]=> string(2) "on" ["formType"]=> string(4) "main" ["selectedItem"]=> string(4) "edit" ["Apply "]=> 字符串(5) "应用" }

在发布表单之前，这些值在 HTML 中正确呈现，不确定发生了什么。

无论我选择哪个单选选项，“on”值都会显示，如果没有选择（如我所料），则根本不会显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:52:19.313

您的输入标签内不应有逗号：

```
name="cta_siteID",value= 
```

这很可能会导致您的浏览器阻止传递的值。

# jquery - 为什么跨度在 mouseenter 上消失？

> ID：12181811
> 
> 赞同：0
> 
> 时间：2012-08-29T15:50:36.247
> 
> 标签：jquery

```
<DIV id=gallery2>
  <DIV class=center_content>
    <A id=example2 class=photo-link title=567 href="http://www.hdwallpapersarena.com/wp-content/uploads/2012/06/Desktop-wallpaper-Free-honey-bee1.jpg" rel=group1 smoothbox?>
      <IMG id=mygal class=mygalclass src="http://www.hdwallpapersarena.com/wp-content/uploads/2012/06/Desktop-wallpaper-Free-honey-bee1.jpg" width=132 height=137>
    </A>
  </DIV>
</DIV> 
```

悬停在蜜蜂图像上向我显示了一个`span`带有链接的链接，但是当我去选择它时`span`它消失了，我想这是因为`mouseleave`图像的事件。

这是一个演示[http://jsfiddle.net/sbYG4/13/](http://jsfiddle.net/sbYG4/13/)

我怎样才能将`Div`,`Image`和绑定`Span`到相同的`onmouseenter`and `mouseleave`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:53:17.103

回答您的第一个问题：我们无法确定，因为我们没有事件的代码。

在回答您的第二个问题时，给所有 3 个相同的类，并将`onmouseenter`和`onmouseleave`处理程序附加到该类。

如果你使用 jQuery，它看起来像这样：

```
$('.theClassYouGaveThem').bind("mouseenter", function(){/*Code here */ }); 
```

和

```
$('.theClassYouGaveThem').bind("mouseleave", function(){/*Code here */ }); 
```

或者如果你想两者都做，

```
$('.theClassYouGaveThem').bind("mouseenter mouseleave", function(){/*Code here */ }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:56:10.660

只需使用 div id 将所有内容绑定在一起，这样每当它进入该 div 时，所有 span img 等都会受到影响，并且由于您使用的是标签并且在 css`anchor`中没有它的规范并将其设置为plus，您可以将标签用作这样它就可以占据一个空间，并且可以在何时发生时采取行动`text-decoration``none``anchor``display:inline-block``onmouseenter``onmouseleave`

使用它可以工作（再次更新多个图像）

```
$(".photo-link").on({

    mouseenter: function () {

 $(this).find('span').fadeIn('slow');
    },
    mouseleave: function () {
 $(this).find('span').fadeOut('slow');
    }
}); 
```

加上已经删除`display:none`了它`A.delete``span`

# mysql - 删除 MySQL 中最旧的 10 行

> ID：12181812
> 
> 赞同：0
> 
> 时间：2012-08-29T15:50:42.873
> 
> 标签：mysql

我需要一个 MySQL 语句来从我的表中删除最旧的 10 个条目，但是我能得到的最接近的是：

```
 DECLARE ID INT;
   SET ID = (SELECT CallbackID FROM callbacks ORDER BY CallbackID LIMIT 1 OFFSET 9);

   DELETE FROM callbacks WHERE callbackID <= ID; 
```

如果总是至少有 10 个条目，这很好，但当条目较少时，ID 未设置，因此删除语句失败。

有任何想法吗？谢谢

编辑：也试过这个：

```
 DECLARE ID INT;
   SET ID = (SELECT CallbackID FROM callbacks ORDER BY CallbackID LIMIT 1 OFFSET 9);

   if ID IS NOT NULL THEN

   DELETE FROM callbacks WHERE callbackID <= ID;
   END IF; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:54:01.043

```
DELETE FROM callbacks ORDER BY callbackID DESC LIMIT 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:54:05.320

在 之后`SET`，您只需要一个 if 语句来检查是否`ID`设置了，如果是则进行查询，否则执行其他操作或不执行任何操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T15:52:39.147

```
DELETE FROM callbacks 
WHERE callbackID in (
    SELECT CallbackID 
    FROM callbacks 
    ORDER BY CallbackID LIMIT 10
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T15:52:43.733

怎么样：

```
DELETE FROM callbacks ORDER BY CallbackID LIMIT 10; 
```

[是的，它有效`:)`](http://dev.mysql.com/doc/refman/4.1/en/delete.html)

# c - 获取前台控制台/找到活动的 X 服务器

> ID：12181820
> 
> 赞同：1
> 
> 时间：2012-08-29T15:51:04.057
> 
> 标签：c, linux, console, xorg, xserver

我想以编程方式找到连接到控制台的 X 服务器，这意味着当前由鼠标/键盘/屏幕控制。我假设有一种干净的方法可以获取当前的 vt（使用`/dev/console`？）。`fgconsole` [代码](http://archive.ubuntu.com/ubuntu/pool/main/k/kbd/kbd_1.15.2.orig.tar.gz "代码")（fgconsole.c， getfd.c ）让我有点怀疑。尽管

```
struct vt_stat vtInfo;
ioctl(fdConsole, VT_GETSTATE, &vtInfo); 
```

似乎是我想要的，检索有效控制台 fd 的代码似乎有些不可靠 - 尽管测试了 5 个文件（每个文件 rw/w/r），但如果在终端仿真（xterm）中调用它仍然会失败。我可能可以忍受，但感觉并不好......（注意：当然 xterm 不能是控制台 - 我们正在谈论在 xterm 中查询 fgconsole）。

接下来，我必须将 vt（例如 vt7）映射到 X 显示器。但是，我宁愿不依赖

```
ps aux | grep X 
```

做到这一点......有没有更可靠的方法？我可以连接到列出的所有 X 服务器`/tmp/.X11-unix/`并询问他们的 vt 吗？或者甚至直接获取他们的附加到控制台（“活动”）状态？我找不到使用 Xlib 的明显方法，可能是因为 X 服务器 API 与 vts 无关，但也许有一个扩展？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:40:54.233

我喜欢**/proc** fs :) 它似乎提供了我需要的一切。我还没有把它转换成 C 代码，但这应该工作得很好：

*   **在/tmp/.X11-unix/**中查找打开的 X 显示（及其名称，例如**:0**）
***   **在/proc/net/unix**中查找这些套接字，获取它们的 inode*   **在/proc/[PID]/**中查找打开 vt的进程： `ls -la /proc/*/fd/ | grep /dev/tty`- 如果它们的打开文件描述符中还有一个套接字 inode，它们应该是 X 服务器，否则是 tty。当然，**/proc/[PID]/exe**有帮助，但可能不太可靠。**

 **的输出`cat /proc/net/unix | grep -a '/tmp/.X11-unix/X'`表明，总是有一个表单的套接字`/tmp/.X11-unix/X0`和许多表单`@/tmp/.X11-unix/X0`（注意@）。我想知道是否总是有一个进程（X 服务器）在监听前者是否是一种节省的假设。**

# sparql - SPARQL：获取“最具体的属性”

> ID：12181822
> 
> 赞同：6
> 
> 时间：2012-08-29T15:51:07.440
> 
> 标签：sparql, semantic-web

我正在尝试获取一个类的最具体的属性，但我被卡住了。我想提取所有适用于给定类的属性（包括从超类继承的属性），但结果集中具有子属性的属性**除外。**

例如，如果我有一个类*Population*，其属性之一是*atLocation*，以及一个名为*Refugees的**Population*子类。*Refugees*有一个属性*currentLocation*，它是*atLocation*的一个子属性。

 ***所以我想要的是一个通用查询，如果我输入*Population***只会给我** *atLocation*，如果我输入Refugees*只会***给我***currentLocation*。我所拥有的是：

 *****```
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> 
prefix ex: <http://example.org/vocabulary#>

SELECT DISTINCT ?prop WHERE {
  ex:Refugee rdfs:subClassOf* ?domain  .
  ?prop rdfs:domain ?domain .
  ?subprop rdfs:domain ?domain .
  FILTER NOT EXISTS { ?subprop rdfs:subPropertyOf ?prop . }  
} ORDER BY ?prop 
```

不过，这给了我*atLocation* **和** *currentLocation*。

这可能在一个查询中吗？任何有关如何解决此问题的想法表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T23:33:10.447

当我自己尝试时，这比我预期的要棘手。但是，您需要做的是稍微扩展您的 NOT EXISTS 子句。

```
SELECT ?prop WHERE {
  ?prop rdfs:domain ?domain .
  ?class rdfs:subClassOf* ?domain .
  FILTER NOT EXISTS {
        ?sub rdfs:subPropertyOf ?prop.
        ?sub rdfs:domain ?d.
        ?class rdfs:subClassOf* ?d .
  }
  FILTER (?class = ex:Refugee)
} 
```

我们选择域为 ex:Refugee 或 ex:Refugee 的超类（前两个 BGP）的所有属性。但是随后我们想要过滤掉那些存在子属性的属性，这些属性也有一个域是 ex:Refugee 的（超类）。请注意，我们为子属性 (?d) 的域使用了不同的变量，毕竟它不一定必须与我们选择的属性具有完全相同的域。

以上适用于简单的（非蕴含或 RDF(S) 蕴含）三元组，前提是每个子属性仅定义了其最具体的域类，即您具有三元组 'ex:currentLocation rdfs:domain ex:Refugee ' 但没有明确地 'ex:currentLocation rdfs:domain ex:Population'。********

# magento - 如何将我的 Magento 迷你搜索表单移动到模板标题中的另一个位置？

> ID：12181827
> 
> 赞同：3
> 
> 时间：2012-08-29T15:51:21.673
> 
> 标签：magento, search, themes, magento-1.7

我正在构建我的第一个自定义 Magento 主题。它进展缓慢，但它*正在*发生。我摆脱了最初在主页上保存迷你搜索表单的栏，而是想将搜索表单放在我的新标题中。

这是我的标题的代码`header.phtml`：

```
<div id="header">
<a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a>
    <div id="header-top">
    <?php echo $this->getChildHtml('topSearch') ?>
    <?php echo $this->getChildHtml('topLinks') ?>
    </div>
    <?php echo $this->getChildHtml('topMenu') ?>
</div> 
```

但搜索表单未呈现。这是有问题的网站：

[http://s1.mynewsitereview.com/](http://s1.mynewsitereview.com/)

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-28T23:47:52.537

首先，您需要创建或更新您的 local.xml 文件，如果您没有 local.xml 文件，您可以在其中创建一个

app->frontend->[包名]->[主题名]->layout->local.xml

创建完成后，您可以将我在这篇文章中的内容准确地复制到该文件中，以开始使用它。

通过 LOCAL.XML 文件而不是通过 catalog.xml 进行所有更新！这将使以后的升级变得更加容易。此外，您将能够在一个文件中快速查看您对站点所做的所有更改。

下面的示例将它添加到根引用名称，该名称将在所有页面上可用，但在 template->page->1column.phtml 或 2column-left.phtml 3column.phtml 等中很容易调用。

```
<?xml version="1.0" encoding="UTF-8"?>
<layout>
    <default>
        <reference name="root">
            <block type="core/template" name="top.search" as="topSearch" template="catalogsearch/form.mini.phtml"/>
        </reference>
   </default>
</layout> 
```

然后使用您当前使用的方式调用它。

```
<?php echo $this->getChildHtml(‘topSearch’) ?> 
```

现在您可以像上面部分一样使用“参考名称”和“as”名称。例如，您可以使用下面的类似设置来引用页脚块以添加搜索功能。对于教育，“as”名称是 .phtml 文件中使用的名称。“名称”是在 xml 文件中引用块的方式。所以在上面的例子中。我将搜索字段添加到根内容区域，然后在我的 .phtml 文件中使用“topSearch”的“as”名称调用它

```
<?xml version="1.0" encoding="UTF-8"?>
<layout>
    <default>
        <reference name="footer">
            <block type="core/template" name="footer.search" as="footerSearch" template="catalogsearch/form.mini.phtml"/>
        </reference>
    </default>
</layout> 
```

然后在footer.phtml中调用它

```
<?php echo $this->getChildHtml('footerSearch') ?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-20T00:59:19.000

我知道这个问题很老了，但我会发布我的答案，希望它可以帮助其他人解决同样的问题

就我而言，我的页脚需要另一个搜索表单，所以我打开了

app/desing/frontend/base/default/layout/catalogsearch.xml

并复制：

```
<reference name="header">
        <block type="core/template" name="top.search" as="topSearch" template="catalogsearch/form.mini.phtml"/>
    </reference> 
```

to：默认标签内的 app/desing/frontend/my-theme/my-theme/layout/local.xml

```
<reference name="header">
        <block type="core/template" name="top.search" as="topSearch" template="catalogsearch/form.mini.phtml"/>
    </reference>
</default><!-- just to give a idea of the position of where you should paste this code --> 
```

然后我将其更改为：

```
<reference name="footer">
        <block type="core/template" name="footer.search" as="footerSearch" template="catalogsearch/form.mini.phtml"/>
    </reference>
</default> 
```

然后在我的页脚文件中，我调用了：

```
<?php echo $this->getChildHtml('footerSearch') ?> 
```

基本上你必须告诉你的主题需要使用本地xml在哪里获取'footerSearch'，然后你可以称之为php。

# mongodb - 我如何在 Centos 6 中安装 php5-dev

> ID：12181838
> 
> 赞同：3
> 
> 时间：2012-08-29T15:51:50.780
> 
> 标签：mongodb, centos, centos6

我正在使用 centos 6。我想在我的云服务器上安装 php5-dev。因为在我的服务器中我得到了 phpize 错误。

这在我的服务器上不起作用。我的 PHP 版本是 5.3.3。我需要`pecl install mongo`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T15:54:00.420

以root身份执行以下命令

```
yum install php-devel 
```

# jquery - 使用 qTips2 定位标题属性的可点击工具提示。jQuery 工具提示问题

> ID：12181839
> 
> 赞同：1
> 
> 时间：2012-08-29T15:51:51.527
> 
> 标签：jquery, tooltip, qtip

我无法使用 qTips2 获得工具提示： - [http://craigsworks.com/projects/qtip2/demos/#tips](http://craigsworks.com/projects/qtip2/demos/#tips)

我需要在标签旁边放一张图片，点击它会打开一个工具提示。工具提示将使用标题，例如 title="tooltip here" 但仅在某个 div #toolTipArea 内。

打开工具提示后，它将有一个关闭按钮，就像上面的演示链接一样。

希望有人可以帮助我获得类似上述链接的工具提示。

干杯

# google-analytics - 在另一个网站上查看 Google Analytics

> ID：12181840
> 
> 赞同：0
> 
> 时间：2012-08-29T15:51:52.283
> 
> 标签：google-analytics, google-analytics-api

*只是检查这是正确的，我不会对我的统计数据进行哈希处理....*

我有一个网站 www.mydomain.com，并且我已经在 www.notmydomain.com/mypage 上注册了第三方服务

我已经在 www.mydomain.com 上设置了 Google Analytics，并希望在同一帐户中查看来自 /mypage 的统计信息。

阅读[跟踪多个域](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#multipleDomains)后，我认为我需要在 /mypage 上的 HEAD 中添加以下代码

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-650003-1']);
  _gaq.push(['_setDomainName', 'mydomain.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

这使用与 www.mydomain.com 上相同的 UA* 代码，我显然也在这里指定了相同的域。

**问题**：

1）以上是正确的方法吗？

2) 我是否必须更改 mydomain.com 上的 GA 代码段以匹配上述代码段？（它已经做了除了 _setDomainName 和 _setAllowLinker 之外的所有事情）

3）对于我自己网站上的子域是否同样有效，例如 mysubdomain.mydomain.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:53:50.310

关于 3，以下内容足以跨多个子域进行跟踪：

```
_gaq.push(['_setDomainName', 'mydomain.com']); 
```

但是，严格来说，您应该在域名中添加一个前导句点，如下所示：

```
_gaq.push(['_setDomainName', '.mydomain.com']); 
```

没有它它仍然可以工作，但这应该确保更好的跨浏览器合规性。

该行：

```
 _gaq.push(['_setAllowLinker', true]); 
```

只有跨域跟踪才需要。它还需要出现在 www.notmydomain.com/mypage 上。

不要忘记，您还需要为从 mydomain.com 到 notmydomain.com 的所有链接添加链接器功能（反之亦然，如果您认为访问者可能会从 notmydomain.com 开始访问）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:53:40.007

至于1），我相信你的代码确实是这样做的正确方法。我目前正在使用这种方法跟踪多个子域。

如果你想要 3)，你需要做 2)。

# java - 在 JTabbedPane 中设置特定选项卡的可见性

> ID：12181841
> 
> 赞同：3
> 
> 时间：2012-08-29T15:51:55.827
> 
> 标签：java, swing, nullpointerexception, visibility, jtabbedpane

如何将某些选项卡设置为`JTabbedPane`不可见？我尝试使用`JTabbedPane#getTabComponentAt(index).setVisible(false);`，但它抛出了一个`NullPointerException`. 我可以禁用选项卡，但不能使它们不可见。

SSCCE：

```
import java.awt.Dimension;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTabbedPane;

public class Main {
    public static void main(String[] args) {
        JTabbedPane tabbedPane = new JTabbedPane();
        tabbedPane.setPreferredSize(new Dimension(400, 100));
        for (int i = 0; i < 7; i++)
            tabbedPane.add("tab " + i, new JLabel("content " + i));

        // this throws a NullPointerException
        tabbedPane.getTabComponentAt(1).setVisible(false);
        // this works
        tabbedPane.setEnabledAt(1, false);

        JFrame frame = new JFrame();
        frame.setContentPane(tabbedPane);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

我无法找出我做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T15:58:27.940

查看对应setter的javadoc：

> 设置负责呈现指定选项卡标题的组件。空值意味着 JTabbedPane 将呈现指定选项卡的标题和/或图标。非空值意味着组件将呈现标题，而 JTabbedPane 将不呈现标题和/或图标。

因此，如果您设置了任何方法，则该`JTabbedPane#getTabComponentAt(index)`方法返回`Component`用于呈现选项卡的选项卡，否则它使用标签和/或图标。

不确定是否可以使选项卡不可见，但可以肯定的是，您可以[删除](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html#removeTabAt%28int%29)它们并[插入](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html#insertTab%28java.lang.String,%20javax.swing.Icon,%20java.awt.Component,%20java.lang.String,%20int%29)它们。这可能是一个可以接受的解决方案

# java - 使用 Java 从 HTTPS URL 下载文件

> ID：12181843
> 
> 赞同：5
> 
> 时间：2012-08-29T15:52:02.467
> 
> 标签：java, url, https, download, connect

我已经编写了一些代码来从网站下载文件。该代码适用于测试 http url。一旦我将 URL 更改为 https，就会出现连接超时。

```
System.setProperty("http.proxyHost","trproxy.rwe.com") ;
System.setProperty("http.proxyPort", "80") ;
Authenticator.setDefault (new MyAuthenticator("USER","PW"));
//URL url = new URL("http","www.treasury.gov",80,"/ofac/downloads/sdn.csv",new    sun.net.www.protocol.http.Handler());  THIS WORKS
URL url = new URL("https", "downloads.elexonportal.co.uk",443,"/bmradataarchive/download?key=MYKEY&filename="+filename,new sun.net.www.protocol.https.Handler());
url.openConnection();
InputStream reader = url.openStream();
FileOutputStream writer = new FileOutputStream("C:/downloads/"+filename); 
```

如果我将 https url 复制到浏览器中，系统会询问我希望将文件保存在哪里，并且工作正常。非常感谢任何帮助。我试过[这个](https://stackoverflow.com/questions/10135074/download-file-from-https-server-using-java) 但没有用

谢谢克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T18:16:36.707

您可能遇到证书问题。这通常是我过去在 Java 中使用 HTTPS 连接时遇到的问题。

首先，您应该检查并查看您尝试连接的 URL 是否具有知名可信根 CA 的签名证书，并且有效（未过期）。

我建议在浏览器中打开 URL 并检查证书信息。

仅供参考，您的浏览器识别的可信根 CA 与 Java 识别的可信根 CA 之间可能存在脱节。这是另一个关于如何让 Java 识别的 Stackoverflow 问题：[如何在 Java 中获取受信任的根证书列表？](https://stackoverflow.com/questions/3508050/how-can-i-get-a-list-of-trusted-root-certificates-in-java)

如果这是一个自签名证书，那么您将需要跳过有关将其导入和使用本地 Keystore 的麻烦。有许多站点和博客可以指导您完成此操作，这是一个这样的博客（不是我的）：[将自签名 https 证书添加到 java 密钥库](http://www.chrissearle.org/node/260)

此外，当您使用浏览器进行测试时，这将帮助您验证没有代理问题。您绝对应该检查浏览器的设置，以确定您是否通过代理服务器。

您绝对应该考虑使用 HttpClient 而不是 java.net.URL。这是[HttpClient 4.2.1 的 Apache 页面](http://hc.apache.org/httpcomponents-client-ga/index.html)。

最后，如果您希望通过 HTTP 或 HTTPS 进行文件传输，您可能需要考虑使用 WebDAV。

我过去曾为此使用过 Jakarta Slide WebDAV 客户端。不幸的是，Slide 目前似乎[已退役](http://jakarta.apache.org/slide/)，但您可以通过一些搜索找到替代方案。

**添加**

我复制了您的源代码示例并更仔细地查看了它。看起来您为 http 设置了属性，但没有为 https 设置属性。

HTTPS 具有单独的属性：

*   https.proxyHost
*   https.proxyPort

尝试设置：

```
System.setProperty("https.proxyHost","trproxy.rwe.com") ; 
System.setProperty("https.proxyPort", "443") ; 
```

查看关于[Oracle 的 Java 网络和代理的](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html)第 2.2 节。

[http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T16:22:46.063

看起来您的问题可能与代理有关。它还应该支持https。此外，您应该使用 HttpClient 4 来下载文件，它是一个用于建立 http 连接的成熟库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T18:49:24.683

`System.setProperty("http.proxyPort", "80")`应该`System.setProperty("http.proxyPort", "443")`

# objective-c - 将 UINavigationController 添加到基于视图的应用程序

> ID：12181849
> 
> 赞同：2
> 
> 时间：2012-08-29T15:52:29.647
> 
> 标签：objective-c, xcode, uiviewcontroller, uinavigationcontroller

因此，我开始在 Xcode 3.2.5 中以完全基于视图的方式开发应用程序，然后升级到 Xcode 4.4。我有一个 NIB 文件（两个，MainWindow.xib 和我的默认视图控制器的 .xib）。我有一堆视图控制器，直到现在我一直在通过`presentModalViewController`.

问题是现在我希望其中一个视图是基于导航的，也就是说，当用户进入它时，他们会获得顶部导航栏，并且从那时起他们所获得的一切都是通过导航控制器完成的。当他们完成并完全退出时，他们会回到常规的非导航控制器使用视图。

似乎这是一个没有人完全描述答案的常见问题。或者看起来很有帮助的响应，例如[如何将导航控制器添加到基于视图的应用程序？](https://stackoverflow.com/questions/3751235/how-to-add-a-navigationcontroller-to-a-view-based-application/3752749#3752749)对我来说太模糊了。`UINavigationController`我基本上是在寻找有关如何将 a 添加到项目中以仅显示其中一些视图的分步说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:01:30.840

如果您的视图已经按预期工作，那么将导航控制器添加到模态视图非常简单。

```
NewViewController *newView = [[NewViewController alloc] initWithNibName:@"NewViewController" bundle:nil];
UINavigationController *navView = [[UINavigationController alloc] initWithrootViewController:newView];
[self presentModalViewController:navView animated:YES]; 
```

您的模态视图将继承导航栏和用于在该模态中呈现更多视图的所有属性。完成模式后，只需将其关闭。

在导航控制器上加载更多视图非常容易。

```
AnotherViewController *anotherView = [[AnotherViewController alloc] initWithNibName:@"AnotherViewController" bundle:nil];
[self.navigationController pushViewController:anotherView animated:YES]; 
```

要从堆栈中手动弹出视图控制器：

```
// note, you won't need to call this for the auto created back button, that is handled for you
// this would only be if you wanted manual control over going back outside the back button
[self.navigationController popViewControllerAnimated:YES]; 
```

一旦你完成了模态视图，你可以从任何地方调用它来让它消失，返回到你原来的视图。方便多个详细信息屏幕、注册过程等。

```
[self.navigationController dismissModalViewControllerAnimated:YES]; 
```

# c# - 使用 MSBuild 构建解决方案时出现错误 CS0006

> ID：12181850
> 
> 赞同：1
> 
> 时间：2012-08-29T15:52:29.943
> 
> 标签：c#, .net, msbuild, teamcity

我正在尝试使用 MSBuild 构建我的解决方案，但出现 CS0006 错误：

> CSC：错误 CS0006：找不到元数据文件 'd:\TeamCity\buildAgent\work\f489de29c28874 9e\ProjectB\ExpressionLexer.cs' [d:\TeamCi ty\buildAgent\work\f489de29c288749e\ProjectB\ProjectB.csproj] CSC : 错误 CS0006: 找不到元数据文件 'd:\TeamCity\buildAgent\work\f489de29c28874 9e\ProjectB\ExpressionParser.cs' [d:\TeamCity\buildAgent\work\f489de29c288749e\ProjectB\ProjectB.csproj

问题是ExpressionParser.cs在ProjectB中不存在，但在ProjectB引用的ProjectA中存在。我认为这不是构建顺序问题，因为 ProjectA 在 ProjectB 之前成功构建...

我没头绪...

# php - jQuery 选项卡式小部件 - 交换选项卡式内容

> ID：12181851
> 
> 赞同：0
> 
> 时间：2012-08-29T15:52:32.277
> 
> 标签：php, jquery, ajax, jquery-ui

我已经使用 PHP 构建了一个应用程序，并使用 HTML 为它提供了一个不同的基本界面，但我现在希望通过使用 jQuery UI 小部件来改善外观。我已经加载了选项卡式小部件以用作主菜单，并将我的应用程序的主要部分链接到这些 - 所以我有一个有效的主菜单。当我单击一个选项卡时，窗口中会加载一个页面，但问题是如果我随后单击此页面上的链接，它将带我到另一个地方。让我在该选项卡中加载新页面的最简单方法是什么？

这是我正在谈论的小部件的链接：http: [//jqueryui.com/demos/tabs/#default](http://jqueryui.com/demos/tabs/#default)

编辑：在该链接下面有一个教程代码片段，上面写着

**“...在当前选项卡中打开链接而不是离开页面”**

**加载选项卡内容后的“Hijax”链接：**

```
$('#example').tabs({
    load: function(event, ui) {
        $(ui.panel).delegate('a', 'click', function(event) {
            $(ui.panel).load(this.href);
            event.preventDefault();
        });
    }
}); 
```

这听起来很有希望，但我不确定如何使用它。在我的选项卡式界面页面（tabbedhome_v.php）中，我有一个 id="tabs" 的容器，其中包含选项卡式内容。所以我只是将代码中的单词 example 更改为“tabs”，它似乎可以工作更多现在的页面，但由于某种原因并非全部。有人介意向我解释这是如何工作的吗？

我在上面的代码中观察到的情况：图像超链接引导下一页在面板中加载，但我在这些页面上加载的任何 javascript 链接或 jquery 现在都不起作用。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:56:45.697

由于您已经在使用 jQuery，您可能需要查看`.load()`：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

您可以使用它来将页面加载到页面中的元素中

```
$('#tab-1').load('content.html'); 
```

# c++ - 为什么 C 和 C++ 之间的未命名参数警告差异？

> ID：12181852
> 
> 赞同：3
> 
> 时间：2012-08-29T15:52:32.980
> 
> 标签：c++, c

我有以下 C/C++ 程序，我编译它时显示所有警告。

`int foo(int x) { return 5; }`

C++ 编译器给我一个关于未引用形式参数的警告。当我删除“x”以便签名读取“int foo(int)”时，编译器很高兴。

另一方面，C 编译器喜欢命名参数，并在未命名时发出警告。

**编辑**：它发出错误，而不是警告。

为什么有区别？理由是什么？

PS 我正在使用 GNU 编译器工具链。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T16:09:12.833

它们是不同的语言，具有不同的规则。

在 C 中，函数参数必须有名称；我很惊讶您收到的是警告而不是错误。我想理由是没有充分的理由使用未使用的参数。如果你不需要它，那它为什么要存在呢？（当然，在某些情况下忽略参数是有效的，例如使用指定一组特定参数的函数指针时；大概是认为这些权力不够普遍，不值得放宽规则。如果你需要忽略它，然后`(void)unused;`应该禁止您可能会收到的任何“未使用参数”警告。）

在 C++ 中，函数通常必须具有特定的签名，以便覆盖基类中声明的虚函数，或匹配模板参数的特定用法。很可能并非所有覆盖都需要该签名的所有参数，在这种情况下忽略该参数是非常合理的。我猜这就是允许您不命名它的理由。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T16:40:28.340

C 的一个原因可能是它仍然具有仅包含标识符的旧式参数列表：

```
int f(to)
double to; {
  return to;
} 
```

所以基本上当它只看到一个标识符时，它必须假设这是一个变量名而不是一个类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T17:10:20.620

C 和 C++ 是具有不同规则的不同语言，这是它们的行为与其他语言不太相似的众多领域之一。

[C 2011 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)：

> ### 6.9.1 函数定义
> 
> ...
> 5 如果声明符包含参数类型列表，**则每个参数的声明都应包含一个标识符**，但参数列表由一个类型的单个参数组成的特殊情况除外`void`，在这种情况下不应有标识符。不得附有申报清单。

强调我的。

[C++ 2011 标准草案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)

> ### 8.4 函数定义 [dcl.fct.def]
> 
> ### 8.4.1 一般 [dcl.fct.def.general]
> 
> ...
> 6 [ 注意：未使用的参数无需命名。例如，
> 
> ```
>  void print(int a, int) {
> std::printf("a = %d\n",a);
> } 
> ```
> 
> ——尾注]

*现在，关于为什么*C 需要所有参数的标识符（无论它们是否被使用而 C++ 不需要）这个更大的哲学问题，请记住以下几点：

1.  C 比 C++ 早了十年左右；
2.  C 的设计使其编译器易于编写；
3.  C 不支持函数重载

简而言之，没有充分的理由说明 C 应该允许未命名未使用的参数，并且至少有一个充分的理由（简化解析）为什么它*不应该*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T16:07:10.157

我也一直想知道这一点，但无论如何，您可以通过实际命名参数来使其在两者中起作用`x`，并在正文中的某处说：

```
(void)x; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T16:08:31.183

正如您所说，您可以通过删除参数名称来修复 C++ 中的警告。在 C 中，不允许省略参数名称。因此，如果您的 C 编译器产生相同的警告，您将无法删除它。所以你的 C 编译器不会产生这样的警告。

# c# - 在电子商务结帐过程中显示特定于上下文的错误？

> ID：12181862
> 
> 赞同：1
> 
> 时间：2012-08-29T15:52:53.173
> 
> 标签：c#, javascript, asp.net-mvc, e-commerce

运行使用 C# 和 SQL db 的 MVC 架构开发的电子商务网站。如果用户输入了错误的帐单地址或错误的信用卡信息，我们会向用户显示一条通用消息 - “无法处理订单。请检查帐单和信用详细信息，然后重试”。

是否可以显示实际错误。例如：“无法识别的 CVV 号码”或“输入的姓名与输入的信用卡信息不匹配”。

如果可能的话，实现这一点需要什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:01:56.287

如果你遵循这样的事情，[我](http://www.asp.net/mvc/tutorials/older-versions/javascript/creating-a-mvc-3-application-with-razor-and-unobtrusive-javascript)认为你会得到你想要的结果。使用`DataAnnotations`您应该能够使您的大部分验证工作。如果您需要任何服务器端验证，则可以`ModelState.AddModelError`在控制器内部添加模型错误。`@Html.ValidationMessageFor`如果您使用验证助手 ( ) ，这些错误将随后显示在您的 UI 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T16:03:23.853

不要这样做。这是一个严重的安全漏洞，允许人们尝试使用被盗信息并猜测他们不知道的部分，CVV 编号只有 3 个数字，如果你告诉他们那是不正确的部分，那么他们很容易猜到它是正确的.

准确告诉他们您现在拥有什么，这是执行此操作的安全方法，以确保人们不会使用您的电子商务系统进行盗窃。

# cuda - pycuda only block(N,1,1) 有效

> ID：12181864
> 
> 赞同：0
> 
> 时间：2012-08-29T15:53:05.413
> 
> 标签：cuda, pycuda

我不明白为什么下面的程序对于 block=N,1,1 运行正常，但对于 1,1,N （结果是无效值）或 1,N,1 （结果是 0,1,0... ..0) 或 10,50,1（结果为 0,1,0..0）（N=500）。

```
import pycuda.gpuarray as gpuarray
import pycuda.driver as cuda
import pycuda.autoinit
from pycuda.compiler import SourceModule
import numpy as np
import random
from pycuda.curandom import rand
import cmath
import pycuda.driver as drv

N=500
a_gpu=gpuarray.to_gpu(np.zeros(N).astype(np.int32))

mod =SourceModule("""
#include <cmath>

extern "C" {      

__global__  void myfunc(int *a,int N)
    {

    int idx=threadIdx.x;   //+blockIdx.x*blockDim.x;

    if (idx<N) 
            a[idx]=idx;

}
}

""",no_extern_c=1)

#call the function(kernel)
func = mod.get_function("myfunc")

func(a_gpu,np.int32(N), block=(N,1,1),grid=(1,1))

a=a_gpu.get()
print("a = ",a) 
```

**- - - - - - - 编辑 - - - - - - - - - - - - - - - - - - -----**

好的，我忘了如果我使用 int idx=threadIdx.y ，那么我可以使用 block(1,N,1) 。

但是，那么，我总是必须使用这个排列块（N,1,1）吗？

我必须明白这一点！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:19:28.540

第一个维度对应 threadIdx.x，第二个维度对应 threadIdx.y，第三个维度对应 threadIdx.z

当您启动 block(N,1,1) threadIdx.x 从 0 变为 N，而 threadIdx.y 和 threadIdx.z 始终为零。

当您启动 block(1, N, 1) threadIdx.x 始终为零时，threadIdx.y 从 0 变为 N。

所以而不是拥有

```
idx = threadIdx.x; 
```

将其更改为

```
idx = blockDim.x * threadIdx.y + threadIdx.x; 
```

或更准确地说（仅当使用 Z > 1 的 block(X, Y, Z) 时）

```
idx = (blockDim.y * threadIdx.z +  threadIdx.y) * blockDim.x + threadIdx.x; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-29T16:19:43.423

如果我记得的话，第三个值仅限于像 2 或 3 这样的小数字！

你应该能够使用（1，N，1）。

# dns - 如何更改域名注册记录中的创建日期？

> ID：12181867
> 
> 赞同：4
> 
> 时间：2012-08-29T15:53:11.933
> 
> 标签：dns, web, whois

我有兴趣在域 .com 区域上做这件事。有谁知道能够做到这一点的注册商？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T16:21:09.917

您无法更改域的创建日期。我假设您出于 SEO 原因希望使您的网站看起来更旧。这将违反 ICANN 政策。但是，您可以使用元标记来尝试告诉搜索引擎您的网站有多旧。

`<meta name="creation_Date" content="04/29/2010"/>`

对您来说不幸的是，许多搜索引擎（如果有的话）都没有使用它。如果您想查看 Google 使用了哪些元标记，可以[在此处查看列表](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=79812)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-05T03:37:01.330

根据 ICANN 关于此主题的政策，无法更改域注册的原始创建日期。所有注册商都必须遵守[ICANN WHOIS 准确性条款](https://whois.icann.org/en/accuracy)，该条款要求跟踪原始域创建日期，只要该域仍在其系统内。曾经有一个漏洞，如果域名被转让给威瑞信，威瑞信会重置创建日期，但自从 ICANN 开始要求在域名转让时将原始创建日期发送给接受注册服务商后，这种情况就消失了。[您可以在此处](https://www.icann.org/resources/pages/approved-with-specs-2013-09-17-en#whois-accuracy)阅读有关这些政策的更多信息。

更改域注册记录中的创建日期的唯一方法是[让域过期，然后被删除](https://www.expireddomains.net/faq/)。然后可以重新注册域，从而将创建日期重置为以后的日期。但是，这是假设在域名被删除后没有人抢走域名，并且您有丢失域名的风险。虽然这是一种将创建日期向前移动的方法，但无法将创建日期及时向后移动。

[由域名注册商强制执行](https://www.icann.org/public-comments/2013-whois-accuracy-spec-review-2015-05-14-en)的原因之一是它正在迅速成为判例法的一部分。域名创建日期可作为[选定案件](http://www.bitlaw.com/internet/domain.html "精选案例")商标抗辩的证据。

[您可以在此处](https://whois.icann.org/en/domain-name-registration-process)了解有关域名注册流程的更多信息。

# c# - 如何使用 SharpSvn 从 SVN 外部的相对 URI 中正确检索 SVN 信息

> ID：12181868
> 
> 赞同：11
> 
> 时间：2012-08-29T15:53:13.303
> 
> 标签：c#, svn, powershell, external, sharpsvn

我有一个 Powershell Cmdlet，它通过 SharpSvn 从主干创建 SVN 分支。存储库包含有和没有显式设置的修订/ pegRevision 的外部。在分支中，所有没有修订集的外部都应该在创建分支时对其 HEAD 修订，未来的更改不会影响分支。

因此，我将外部信息提取到`SharpSvn.SvnExternalItem`存储库中并查询存储库以查找使用找到的每个外部的当前 HEAD 修订版`SharpSvn.SvnClient.GetInfo(SvnTarget externalTarget, out SvnInfoEventArgs info)`

因此，我需要一种可靠的方法来从 ExternalInfo 到 SvnTarget（或直接到修订信息）。我不想限制外部 URI 的格式，即[这里](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-externals.html)显示的所有可能性都应该有效。SharpSvn 中是否有一个干净的解决方案来将所有这些类型的 URI 解析为绝对 URI 或检索其最新版本的替代方法？

例如，这样的事情会很棒（我知道我的外部 uri 和定义外部的目录的绝对 URI，相对 URI 肯定需要）：

```
public SvnTarget ResolveExternalUri(SvnUriTarget aOwningDirectory, string aExternalReferenceUri) {
  // yeah, I know this does not exist (yet?)
  return SvnUri.Combine(aOwningDirectory.Uri, aExternalRefferenceUri);
} 
```

目前我只是自己解析外部 URI 字符串，检查它是相对的还是绝对的，并处理那些 '^' 和 '//' 前缀，但我不确定我是否支持所有变体，我认为这应该是一个很常见的任务，这可以通过 SvnClient-lib 中的一些隐藏的 gem 来解决。

# c# - ASP.Net MVC 视图更新

> ID：12181871
> 
> 赞同：1
> 
> 时间：2012-08-29T15:53:19.250
> 
> 标签：c#, razor, asp.net-mvc-4

我是 MVC 的新手，想要一些高级别的指导。

我有以下课程，一个包含问题列表的文档。Question 有一个 order 属性来安排每个文档的问题的顺序。

```
public class Question
{
     public int QuestionId {get; set;}
     public string Text {get; set;}
     public int Order {get; set;}
}

public class Document
{
    public int DocumentId {get; set;}
    public string DocumentName {get; set;}
    public List<Question> Questions {get; set;}
} 
```

我想显示一个带有问题列表的文档，并允许用户单击问题旁边的控件，将其在列表中向上或向下移动。

我应该使用哪些组件来更新 Order 属性并在进行更改时将其反映在屏幕上？我猜在用户进行所有更改之前我不需要发布，但是立即更新视图的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:55:29.203

Javascript 和/或 jQuery 将为您工作。当您发布时，模型绑定器将返回具有更新值的对象。

# java - 为什么 java TreeMap.entrySet 返回一组 SimpleImmutableEntry？

> ID：12181872
> 
> 赞同：0
> 
> 时间：2012-08-29T15:53:20.077
> 
> 标签：java, immutability, treemap

我在运行 java 1.6.0_22-b04 sun 和 tomcat 6.0.32 的 2 个不同服务器上安装了一个 java 应用程序

登台服务器让我头疼，出现以下错误：

```
java.lang.UnsupportedOperationException : null
   java.util.AbstractMap$SimpleImmutableEntry.setValue (AbstractMap.java:726) 
```

这是引发此异常的代码

```
for (Entry<Integer, BigDecimal> entry : map.entrySet()) {
  entry.setValue(new BigDecimal("999"));
} 
```

我只是在这台服务器上遇到这个问题。本地和其他服务器上的一切都很好，代码相同。

我在谷歌上发现了很多关于这个异常的结果，但它们都与哈德森有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-06T14:17:20.480

[正如在引发异常的评论](https://stackoverflow.com/questions/12181872/why-java-treemap-entryset-returns-a-set-of-simpleimmutableentry#comment16336232_12182952)服务器中提到的那样，已使用`-XX:+AggressiveOpts`选项启动。
[JDK-7006877](https://bugs.openjdk.java.net/browse/JDK-7006877)解释了为什么`-XX:+AggressiveOpts`会改变`TreeMap`行为。

> 在 1.6.0_14 中添加了 TreeMap 的实验性实现：
> [http](http://www.oracle.com/technetwork/java/javase/6u14-137039.html#performance-6u14)
> 
> ://www.oracle.com/technetwork/java/javase/6u14-137039.html#performance-6u14这个新实现通过命令行选项 -XX 启用： +积极的选择。
> 
> 使用标准的 TreeMap 实现，可以通过调用 Map.Entry.setValue() 来修改 TreeMap 的 Iterator 返回的 Map.Entry 键/值对的值。
> 
> 启用实验实现后，无法以这种方式修改值。调用 Map.Entry.setValue() 会导致 UnsupportedOperationException。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:56:00.830

你能提供一个失败的简单例子吗？

```
TreeMap<Integer, BigDecimal> map = new TreeMap<>();
map.put(0, BigDecimal.ZERO);
map.put(1, BigDecimal.ONE);

for (Map.Entry<Integer, BigDecimal> entry : map.entrySet()) {
    entry.setValue(new BigDecimal("999"));
}
System.out.println(map); 
```

印刷

```
{0=999, 1=999} 
```

Java 6 中的 TreeMap 将为单独的条目提供异常

```
map.floorEntry(1).setValue(BigDecimal.TEN); // fails. 
```

根据消息来源，只有 ConcurrentSkipListMap 使用这个类。

```
Map<Integer, BigDecimal> map = new ConcurrentSkipListMap<>(); 
```

总是给我

```
Exception in thread "main" java.lang.UnsupportedOperationException
at java.util.AbstractMap$SimpleImmutableEntry.setValue(AbstractMap.java:759) 
```

顺便说一句：我在 Java 6 和 7 中得到了相同的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T16:58:58.183

来自Java 6 中的[`TreeMap`Javadoc ：](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)

> `Map.Entry`此类中的方法及其视图返回的所有对表示映射在它们生成时的快照。他们*不*支持该`Entry.setValue`方法。（但请注意，可以使用 put 更改关联映射中的映射。）

那么——你为什么会感到惊讶呢？

# objective-c - 通过 XPC 或 MACH 在 OSX 上启动服务

> ID：12181874
> 
> 赞同：1
> 
> 时间：2012-08-29T15:53:25.873
> 
> 标签：objective-c, c, macos, mach, xpc

我想知道第三方开发人员是否有办法通过 XPC 或 Mach 与启动代理和守护进程进行交互。我的理解是第三方必须知道 XPC 的字典格式或有权访问 Mach 的 .defs 文件。这些是否可用于预安装的启动服务？如果没有，那么还有其他方式可以通过代码与服务交互吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T22:50:23.157

你的理解是正确的。对于 Mach，.defs 文件用作 Mach 接口生成器 (MIG) 的输入，它创建用于序列化 mach 消息中的参数、调用 mach_msg、等待回复和反序列化回复的 C 代码。XPC 也在幕后使用马赫消息，顺便说一句（尽管苹果真的没有告诉你）。

对于预装的启动服务，Apple 没有显示任何内容。他们确实提供了 launchd 本身的源代码（尽管由于未提供 libxpc.dylib，最新版本无法编译，这不足为奇）。

您*可以*做的是挂钩 mach_msg （或覆盖的 xpc_* 消息函数 - 这可能有点困难，因为大多数是异步的，并且实际消息是由 GCD 线程提供的）。

# r - 返回所有输出而不是最后一个输出的R函数

> ID：12181878
> 
> 赞同：0
> 
> 时间：2012-08-29T15:53:41.363
> 
> 标签：r, function, dataframe

我有一个函数定义为：

```
foo<-function(data){
    for (i in 2:10)
    run.model<-mark(data[sample(nrow(data), i),], model="Occupancy")
    results<-data.frame(mean(summary(run.model)$real$p), summary(run.model)$real$Psi, i)
    return(results)
    } 
```

“mark”是运行我感兴趣的模型的功能。但是，结果仅包含 i=10 的最后一个模型

```
 mean.summary.run.model..real.p.        X1  i
1                       0.1403083 0.6414447 10 
```

如何更正我的函数以便将结果从 i=2 编译为 i=10？

* * *

（无法回答我自己的问题，所以我编辑了我的问题以显示我如何修改您的代码：

谢谢你们俩。

我修改了@David Robinson 的代码

```
foo<-function(data){
    do.call(rbind, lapply(2:6, function(i){
        run.model<-mark(data[sample(nrow(data), i),], model="Occupancy")
        cbind(p=mean(summary(run.model)$real$p), Psi=summary(run.model)$real$Psi, stations=i)
        }))
    } 
```

并得到这些输出：

```
 p            1 stations
 0.4895234 1.388066e-10        2
 0.2902716 3.445050e-01        3
 0.0942734 7.955582e-01        4
 0.1683427 2.376106e-01        5
 0.1683427 1.980088e-01        6 
```

我想知道为什么我命名了第二列但它没有出现在输出中？

对于@zzk 的代码，我将它们修改如下：

```
foo<-function(data){
results.frame <- data.frame()
for (i in 2:6) {
    run.model<-mark(data[sample(nrow(data), i),], model="Occupancy")
    results<-data.frame(p=mean(summary(run.model)$real$p), Psi=summary(run.model)$real$Psi, stations=i)          
    results.frame <- rbind(results.frame, results)
    }
return(results.frame)
} 
```

和输出：

```
 p           X1 stations
1 0.1683427 5.940264e-01        2
2 0.5533567 7.292506e-12        3
3 0.0500000 1.000000e+00        4
4 0.1683427 7.128317e-01        5
5 0.2321999 3.588861e-01        6 
```

几乎相同的。

其他问题是： 1\. 如果我想重复这个循环 n 次，我想使用函数“replicate”。但我不知道该怎么说。2\. 是否可以将输出设置为 data.frame 以便我稍后对其进行操作？（例如，计算均值、制作图表、分组...等）

* * *

我使用了复制（10，foo（数据））

这是我得到的。看起来输出变得有问题并且行和列被反转了。与“replicate(100, foo(data), simple="data.frame")” 的结果相同。

```
 [,1]      [,2]      [,3]      [,4]      [,5]      [,6]      [,7]      [,8]      [,9]      [,10]    
p        Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3
X1       Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3
se.p     Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3
se.Psi   Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3 Numeric,3
stations Integer,3 Integer,3 Integer,3 Integer,3 Integer,3 Integer,3 Integer,3 Integer,3 Integer,3 Integer,3 
```

但是，如果我使用此代码（输出中还有 1 列）

```
foo<-function(data){
do.call(rbind, lapply(2:4, function(i){
    run.model<-mark(data[sample(nrow(data), i),], model="Occupancy")
    cbind(mean(summary(run.model)$real$p), Psi=summary(run.model)$real$Psi, se.p=mean(summary(run.model, se=T)$real$p$se), stations=i)
    }))
} 
```

和

```
replicate(5, foo(data)) 
```

我有

```
, , 1

                  1      se.p stations
 0.4895234 1.388066e-10 0.0000000        2
 0.0333333 1.000000e+00 0.0327731        3
 0.2117159 8.265795e-01 0.0833965        4

, , 2
.....
.....
, , 5

                   1      se.p stations
 0.2902716 0.5167575 0.1519857        2
 0.2000000 1.0000000 0.0730297        3
 0.2902716 0.2583787 0.1519857        4 
```

使用复制（5，foo（数据），简化=“data.frame”）

我得到了这些。

```
 [,1]         [,2]         [,3]         [,4]      [,5]
 [1,] 4.895234e-01 1.683427e-01 4.895234e-01 1.683427e-01 0.1683427
 [2,] 1.683427e-01 5.533567e-01 2.902716e-01 5.533567e-01 0.0666667
 [3,] 2.500000e-02 2.117159e-01 2.321999e-01 3.974777e-01 0.0250000
 [4,] 1.388066e-10 5.940264e-01 1.388066e-10 5.940264e-01 0.5940264
 [5,] 3.960176e-01 7.292506e-12 3.445050e-01 7.292506e-12 1.0000000
 [6,] 1.000000e+00 8.265795e-01 5.383291e-01 2.515864e-01 1.0000000
 [7,] 0.000000e+00 1.379382e-01 0.000000e+00 1.379382e-01 0.1379382
 [8,] 1.379382e-01 0.000000e+00 1.519857e-01 0.000000e+00 0.0455420
 [9,] 2.468550e-02 8.339650e-02 1.038181e-01 1.575997e-01 0.0246855
[10,] 2.000000e+00 2.000000e+00 2.000000e+00 2.000000e+00 2.0000000
[11,] 3.000000e+00 3.000000e+00 3.000000e+00 3.000000e+00 3.0000000
[12,] 4.000000e+00 4.000000e+00 4.000000e+00 4.000000e+00 4.0000000 
```

我需要的是，如果每次我重复 3 次：

```
 p           X1 stations
1 0.1683427 5.940264e-01        2
2 0.4687956 0.9876516334        2
3 xxxxxxxx  xxxxxxxxxxxx        2
4 xxxxxxxxx xxxxxxxxxxxx        3
5 0.5533567 7.292506e-12        3
6 xxxxxxxxx xxxxxxxxxxxx        3
.................................
13 0.0500000 1.000000e+00       6
14 0.1683427 7.128317e-01       6
15 0.2321999 3.588861e-01       6 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T16:08:24.283

您不能多次返回一个值 - 只有第一个 return 语句会发生，而函数的其余部分将永远不会运行。此外，您的 for 循环后没有括号，因此 for 循环中包含的唯一行是：

```
for (i in 2:10)
    run.model<-mark(data[sample(nrow(data), i),], model="Occupancy") 
```

因此，这条线运行了 9 次，`run.model`每次都设置为不同的值。然后是一行：

```
results<-data.frame(mean(summary(run.model)$real$p), summary(run.model)$real$Psi, i)
return(results) 
```

只发生一次。如果您想返回一个包含单独 9 个数据框的列表，您可以执行以下操作：

```
foo<-function(data){
    lapply(2:10, function(i) {
        run.model<-mark(data[sample(nrow(data), i),], model="Occupancy")
        data.frame(mean(summary(run.model)$real$p), summary(run.model)$real$Psi)
    }
} 
```

您还可以将该列表组合成一个数据框（取决于您希望如何组合和返回数据）。您可以使用`do.call`and来做到这一点`cbind`，尽管还有其他解决方案：

```
foo<-function(data){
    do.call(cbind, lapply(2:10, function(i) {
        run.model<-mark(data[sample(nrow(data), i),], model="Occupancy")
        cbind(mean(summary(run.model)$real$p), summary(run.model)$real$Psi)
    })
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T16:24:18.203

大卫罗宾逊的解释是完全正确的，但如果你想保持明确的 for 循环而不是 lapply 函数，这应该工作：

```
foo<-function(data){
    results.frame <- data.frame()
    for (i in 2:10) {
        run.model<-mark(data[sample(nrow(data), i),], model="Occupancy")
        results<-data.frame(mean(summary(run.model)$real$p), summary(run.model)$real$Psi, i)          
        results.frame <- rbind(results.frame, results)
    }
    return(results.frame)
} 
```

要回答关于复制的第二个问题：以下应该有效，假设您想复制函数 100 次，以下代码会将每个 data.frame 放入长度为 100 的列表中：

```
replicate(100, foo(data)) 
```

如果您想要数据框中的结果：

```
replicate(100, foo(data), simplify="data.frame") 
```

不太确定行/列是否会被保留。

# .net - 如何使用 Visual Studio 在项目中编译/链接 IL 代码

> ID：12181879
> 
> 赞同：3
> 
> 时间：2012-08-29T15:53:49.240
> 
> 标签：.net, visual-studio-2010, visual-studio, debugging, il

我有一个独特的问题。基本上，我在 .Net 混淆器上工作。混淆的程序集会导致崩溃的错误 IL。我需要调试这个混淆的 IL 并找出它崩溃的原因。

我目前的做法是：

1.  用 ildasm 拆卸组件
2.  将 IL 代码导入 Visual Studio 并尝试在那里编译、调试和重现它。

我的问题是 Visual Studio 似乎不喜欢`.il`文件。我如何让它像他们应该的那样处理 IL 文件？

另外，不要推荐[这种方法](https://stackoverflow.com/a/9210/69742)。我试过了，这个错误在重新编译后神奇地消失了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:33:49.697

当我遇到类似问题时，我使用了带有 Deblector 插件的 .NET Reflector（可能是 3-4 年前）。现在Reflector不是免费的，但是我觉得你可以使用试用版进行简单的调试。看起来 .NET Reflector Pro 包含与旧的 Reflector + Deblector 相同的功能，因此您可以调试纯 IL 代码。顺便说一句，您仍然可以使用 Deblector，因为新版本支持 Reflector 7 - [http://deblector.codeplex.com/releases/view/93326](http://deblector.codeplex.com/releases/view/93326)

# c++ - 如何测试B类是否派生自类的模板族

> ID：12181885
> 
> 赞同：6
> 
> 时间：2012-08-29T15:54:00.810
> 
> 标签：c++, templates, sfinae, typetraits, c++03

如何在编译时测试 B 类是否派生自 std::vector？

```
template<class A>
struct is_derived_from_vector {
  static const bool value = ????;
}; 
```

如何在编译时测试 B 类是否来自模板族？

```
template<class A, template< class > class Family>
struct is_derived_from_template {
  static const bool value = ????;
}; 
```

使用：

```
template<class T> struct X {};

struct A : X<int> {}
struct B : std::vector<char> {}
struct D : X<D> {}

int main() {
   std::cout << is_derived_from_template<A, X>::value << std::endl; // true
   std::cout << is_derived_from_template<D, X>::value << std::endl; // true
   std::cout << is_derived_from_vector<A>::value << std::endl; // false
   std::cout << is_derived_from_vector<B>::value << std::endl; // true
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T16:12:38.637

尝试这个：

```
#include <type_traits>

template <typename T, template <typename> class Tmpl>  // #1 see note
struct is_derived
{
    typedef char yes[1];
    typedef char no[2];

    static no & test(...);

    template <typename U>
    static yes & test(Tmpl<U> const &);

    static bool const value = sizeof(test(std::declval<T>())) == sizeof(yes);
}; 
```

用法：

```
#include <iostream>

template<class T> struct X {};

struct A : X<int> {};

int main()
{
    std::cout << is_derived<A, X>::value << std::endl;
    std::cout << is_derived<int, X>::value << std::endl;
} 
```

*注意：*在标记的行中`#1`，您还可以让您的 trait 接受*任何*具有至少一个，但可能有更多类型参数的模板：

```
template <typename, typename...> class Tmpl 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T13:14:57.763

我有同样的情况，我需要知道一个类是否派生自一个向量（类似）类。不幸的是，我的项目中不允许使用 C++-11 或可变参数宏。所以我的解决方案是[Kerrek的答案](https://stackoverflow.com/a/12182195/2056545)和这篇[文章](http://www.gotw.ca/publications/mxc++-item-4.htm)最后加上一些googletest代码的混合：

```
#include <vector>

template <typename T>
class is_derived_from_vector
{
    typedef char Yes_t[1];
    typedef char No_t[2];

    static No_t& test(const void* const);

    template <typename U>
    static Yes_t& test(const std::vector<U>* const);

public:
    static const bool value = ((sizeof(test(static_cast<T*>(0)))) == (sizeof(Yes_t)));
};

template<class T> struct X {};
struct A : X<int> {};
struct B : std::vector<char> {};

TEST(Example, IsDerivedFrom)
{
   EXPECT_FALSE(is_derived_from_vector<A>::value);
   EXPECT_TRUE(is_derived_from_vector<B>::value);
} 
```

我认为如果不使用 C++-11 或更高版本就无法定义任何模板的通用解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-21T10:21:41.493

不久前，我在与

> 现代 C++ 设计：应用通用编程和设计模式

我能够构建以下内容，或多或少类似于评论中提供的内容。

```
#include <iostream>
#include <type_traits>
#include <utility>

template <typename T, template <typename...> class U>
struct is_derived
{
private:
    template <typename...Ts>
    static constexpr std::true_type check(const U<Ts...>&);
    static constexpr std::false_type check(...);

    template <typename>
    struct is_same
    {
        static constexpr bool value = false;
    };

    template <typename...Ts>
    struct is_same <U<Ts...>>
    {
        static constexpr bool value = true;
    };

  public:
    static constexpr bool value =
        std::is_same<decltype(check(std::declval<T>())),
                     std::true_type>::value &&
        !is_same<T>::value;
};

template <typename, typename>
struct X
{
};

template <typename T>
struct Y : X <T, int>
{
};

int main(int argc, char **argv) {

    std::cout << std::boolalpha << is_derived<Y<int>, X>::value << std::endl;
    std::cout << std::boolalpha << is_derived<X<int,int>, X>::value << std::endl;
    std::cout << std::boolalpha << is_derived<int, X>::value << std::endl;

  return 0;
} 
```

# arrays - Fortran | 将函数作为参数传递给其他函数

> ID：12181888
> 
> 赞同：6
> 
> 时间：2012-08-29T15:54:08.563
> 
> 标签：arrays, function, matlab, fortran

我有一个简单的一阶微分方程系统要在 Matlab 中求解。它如下所示：

```
function passing
y0 = [0; 0];
t = 0:0.05:1;
y = myprocedure(@myfunc,0.05,t,y0);
myans = y'
end

function f = myfunc(t,y)
f = [-y(1) + y(2);
     -0.8*t + y(2)];
end

function y=myprocedure(f,h,t,y0)
n = length(t);
y = zeros(length(y0),n);
y(:,1) = y0;
for i=1:n-1
    k1 = f(t(i),y(:,i));
    k2 = f(t(i)+h/2, y(:,i)+h/2*k1);
    k3 = f(t(i)+h/2, y(:,i)+h/2*k2);
    k4 = f(t(i)+h, y(:,i)+h*k3);
    y(:,i+1) = y(:,i)+h/6*(k1+2*k2+2*k3+k4);
end
end 
```

所以，在运行 passing.m 文件后，我得到了结果：

```
>> passing

myans =

     0         0
-0.0000   -0.0010
-0.0001   -0.0041
-0.0005   -0.0095
-0.0011   -0.0171
-0.0021   -0.0272
-0.0036   -0.0399
-0.0058   -0.0553
-0.0086   -0.0735
-0.0123   -0.0946
-0.0169   -0.1190
-0.0225   -0.1466
-0.0293   -0.1777
-0.0374   -0.2124
-0.0469   -0.2510
-0.0579   -0.2936
-0.0705   -0.3404
-0.0849   -0.3917
-0.1012   -0.4477
-0.1196   -0.5086
-0.1402   -0.5746 
```

现在，我正在尝试将passing.m 代码转换为Fortran 90。我确实尝试了很多东西，但我仍然迷失方向——尤其是在进行数组初始化和将函数传递给其他函数时。

任何帮助表示赞赏。谢谢！

== 编辑：

我成功地在 Fortran 90 中复制了上述 Matlab 代码。我仍然不知道如何构造指针，但“接口”语句似乎有效。如果您查看代码并提供一些输入，我将不胜感激。谢谢。

```
module odemodule
implicit none
contains
function odef(a,b)
 implicit none
 real::a
 real::b(2)
 real::odef(2)
 odef(1) = -b(1) + b(2)
 odef(2) = -0.8*a + b(2)
end function odef
subroutine rk4(f,h,t,y0,y)
 implicit none
 real,dimension(2,21)::y
 real,dimension(2)::k1,k2,k3,k4
 real::h
 real::t(21)
 real::y0(2)
 integer::i
 interface
  function f(a,b)
   real::a
   real::b(2), f(2)
  end function f
 end interface
 y(1,1)=y0(1)
 y(2,1)=y0(2)
 do i=1,20     
 k1 = f(t(i),y(:,i))
 k2 = f(t(i)+h/2, y(:,i)+h/2*k1)
 k3 = f(t(i)+h/2, y(:,i)+h/2*k2)
 k4 = f(t(i)+h, y(:,i)+h*k3)
 y(:,i+1) = y(:,i)+h/6*(k1+2*k2+2*k3+k4)
 end do
end subroutine rk4
end module odemodule

program passing
  use odemodule
implicit none
real,parameter::dt=0.05
real::yinit(2)
real::y(2,21)
integer::i
real::t(21)
t(1)=0.0
do i=2,21
t(i)=t(i-1)+dt
end do
yinit(1)=0
yinit(2)=0
call rk4(odef,dt,t,yinit,y)
do i=1,21
  write(*,100) y(1,i), y(2,i)
enddo
100 format(f7.4,3x,f7.4)
end program passing 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T16:26:14.293

Fortran 中选择函数以传递给其他过程（子例程或函数）的最佳方法是使用过程指针。这样，您可以以一般方式编写过程并使用特定函数调用它。以下是一些示例：[如何在 Fortran 中为函数名取别名](https://stackoverflow.com/questions/8612466/how-to-alias-a-function-name-in-fortran/8612679)和Fortran 中的[函数指针数组](https://stackoverflow.com/questions/2521072/function-pointer-arrays-in-fortran)

有很多方法可以初始化数组。例如，您可以将所有元素初始化为相同的值，例如，

```
array = 0.0 
```

请参阅[http://en.wikipedia.org/wiki/Fortran_95_language_features](http://en.wikipedia.org/wiki/Fortran_95_language_features)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-23T11:44:31.170

还有另一种方法，我想把它放在一个文件中。

```
program main
    implicit none
    integer      , parameter       :: wp = 8
    integer      , parameter       ::  n = 2       ! number of equation
    real(kind=wp), parameter       ::  h = 0.05_wp ! time step
    integer      , parameter       ::  m = ceiling(1.0/h) + 1 ! total number of time step
    real(kind=wp), dimension(m)    ::  t
    real(kind=wp), dimension(n)    ::  y0
    real(kind=wp), dimension(n, m) ::  y
    integer :: i

    t(1:m) = [ (i*h ,i = 0,m-1) ] ! if h=0.05 m=21 ( t = 0:0.05:1 )
    y0(:)  = [  0.0_wp,  0.0_wp ]
    y = ode_rk4(f, h, t, y0)

    write(*,'(a,10x,a4,20x,a,30x,a)' ) '#', 'time', 'x', 'v'
    do i = 1, m
       write(*,*) t(i), y(:,i)
    end do

contains
    function ode_rk4(f, h, t, y0) result(y)
        implicit none
        real(kind=wp), intent(in), dimension(:)     :: y0
        real(kind=wp), intent(in), dimension(:)     :: t
        real(kind=wp), intent(in)                   :: h
        real(kind=wp), dimension(size(y0), size(t)) :: y

        interface
            pure function f(t, x) result(y)
                implicit none
                real(kind=8)              , intent(in) :: t
                real(kind=8), dimension(2), intent(in) :: x
                real(kind=8), dimension(2)             :: y
            end function f
        end interface

        real(kind=wp), dimension( size(y0) ) :: k1, k2, k3, k4

        y(:, :) = 0.0_wp
        y(:, 1) = y0

        do i = 1, size(t) - 1
            k1(:) = f( t(i), y(:,i) )
            k2(:) = f( t(i) + h*0.5, y(:,i) + h*k1(:)*0.5 )
            k3(:) = f( t(i) + h*0.5, y(:,i) + h*k2(:)*0.5 )
            k4(:) = f( t(i) + h, y(:,i) + h*k2(:) )

            y(:, i+1) = y(:, i) + h/6.0 * ( k1 + 2.0*k2 + 2.0*k3 + k4 )

        end do
    end function ode_rk4

    pure function f(t, x) result(y)
        implicit none
        real(kind=wp)              , intent(in) :: t
        real(kind=wp), dimension(2), intent(in) :: x
        real(kind=wp), dimension(2)             :: y

        y(1:2) = [ -x(1) + x(2), &
                  -0.8*t + x(2) ]

    end function f

end program main 
```

但是`interface`功能块的问题`f(t,x)`。

```
interface
    pure function f(t, x) result(y)
        implicit none
        real(kind=8)              , intent(in) :: t
        real(kind=8), dimension(2), intent(in) :: x
        real(kind=8), dimension(2)             :: y
    end function f
end interface 
```

我希望它的所有声明变量取决于精度变量`wp`而不是硬编码值，我可以使用模块，例如创建文件`kind_mod.f90`

```
module kind
    implicit none
    integer, private, parameter :: sp = 4
    integer, private, parameter :: dp = 8
    integer, private, parameter :: qp = 16
    integer, public , parameter :: wp = dp
end module kind 
```

接着

```
interface
    pure function f(t, x) result(y)
        use kind, only: wp
        implicit none
        real(kind=wp)              , intent(in) :: t
        real(kind=wp), dimension(2), intent(in) :: x
        real(kind=wp), dimension(2)             :: y
    end function f
end interface 
```

代码可以进一步改进，但我希望这足以证明你如何通过 using 将函数作为另一个函数的参数`interface`，你也可以以任何你想要的精度执行它。

```
#          time                    x                              v
   0.0000000000000000        0.0000000000000000        0.0000000000000000     
   5.0000000000000003E-002  -1.6666666915019357E-005  -1.0166666818161806E-003
  0.10000000000000001       -1.3337500198744241E-004  -4.1362920755244432E-003
  0.15000000000000002       -4.5043763692761095E-004  -9.4666966267490885E-003
  0.20000000000000001       -1.0686681413439925E-003  -1.7121228825211946E-002
  0.25000000000000000       -2.0896331089569026E-003  -2.7219048632159955E-002
  0.30000000000000004       -3.6159061266336280E-003  -3.9885425439353160E-002
  0.35000000000000003       -5.7513242612989464E-003  -5.5252051304658302E-002
  0.40000000000000002       -8.6012477060707013E-003  -7.3457370247492326E-002
  0.45000000000000001       -1.2272823234869468E-002  -9.4646924427517695E-002
  0.50000000000000000       -1.6875252124274188E-002 -0.11897371807220791     
  0.55000000000000004       -2.2520063212565732E-002 -0.14659860006328257     
  0.60000000000000009       -2.9321391778745664E-002 -0.17769066613866774     
  0.65000000000000002       -3.7396264938870084E-002 -0.21242768171568613     
  0.70000000000000007       -4.6864894273334769E-002 -0.25099652639274433     
  0.75000000000000000       -5.7850976416828570E-002 -0.29359366124099234     
  0.80000000000000004       -7.0482002362582521E-002 -0.34042562005441557     
  0.85000000000000009       -8.4889576254331925E-002 -0.39170952578672846     
  0.90000000000000002      -0.10120974446313261      -0.44767363346641825     
  0.95000000000000007      -0.11958333577188944      -0.50855790094749531     
   1.0000000000000000      -0.14015631351823021      -0.57461458892310990 
```

# javascript - 提示 jquery 密码值错误

> ID：12181891
> 
> 赞同：-4
> 
> 时间：2012-08-29T15:54:14.600
> 
> 标签：javascript, jquery

为什么以下脚本会产生错误的 JavaScript 警报？

```
<script type="text/javascript">   
        $('#cpassword').change(function() {
     var pass=$('#password').val;
     alert(pass);
      var cpass=$('#cpassword').val;
      alert(cpass);
    });

    </script> 
```

我有两种密码类型，在那里我得到了值并比较以通知文本框右侧的用户，但存在错误。帮帮我！如何获得价值！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:56:08.767

jQuery 使用该`.val()` **函数**获取 jQuery 对象中（第一个）元素的值。您正在尝试访问该对象的`val` **属性**。尝试以下操作（注意`()`表示您正在调用函数，而不是访问属性）：

```
$('#cpassword').change(function() {
    var pass = $('#password').val();
    alert(pass);
    var cpass = $('#cpassword').val();
    alert(cpass);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:56:24.043

您应该调用该`.val()`函数来检索输入值。`.val`without`()`是函数声明。

```
<script type="text/javascript">   
    $('#cpassword').change(function() {
        var pass=$('#password').val();
        alert(pass);
        var cpass=$('#cpassword').val();
        alert(cpass);
    });
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T15:56:30.590

`val()`是一个函数，所以它必须被称为`element.val()`.

使用 jQuery[文档](http://api.jquery.com/val/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T15:57:48.483

如果您在 javascript 控制台中运行该代码，您将看到这`$('#cpassword').val`是函数实例本身。虽然`$('#cpassword').val()`是该函数运行的结果/

所以，解决方案 - 只需在`.val()`函数调用附近添加大括号：

```
alert($('#cpassword').val()); 
```

# javascript - 如何在母版页的弹出窗口中的向导中从用户控件获取 ControlToValidate ID - javascript asp.net 验证

> ID：12181896
> 
> 赞同：1
> 
> 时间：2012-08-29T15:54:27.600
> 
> 标签：javascript, asp.net, validation, user-controls, webforms

我想让我的自定义 javascript 验证器客户端函数具有通用性，但我无法在我的函数中为用户控件获取 ControlToValidate ID。

用户控件位于页面中的模式弹出窗口中的 asp:wizard 控件中，并且整个 she-bang 使用母版页。我不知道这些信息是否重要。

以下 js 代码用于验证用户控件，该控件基本上是一个下拉列表。获取单个特定控件的 ID 根本不是通用的。

```
function checkCombo(sender, args) {
    var cb = document.getElementById('<%= cmbList.ClientID %>_cmbList');
    args.IsValid = (cb.options[cb.selectedIndex].text != '-- Select --');
} 
```

什么应该工作，不（sender.ControlToValidate）。我需要能够在大约 20 个不同的下拉列表用户控件上使用一项功能。

```
var cb = document.getElementById(sender.controltovalidate); 
```

如何以通用方式获取此控件 ID，以便我的自定义 javascript 验证功能适用于所有这些用户控件下拉列表？

谢谢！

——鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:05:50.700

您可以在不知道控件本身的情况下从 args 获取控件值：

```
function checkCombo(sender, args) {
    args.IsValid = (args.Value != -1);
} 
```

如果您将选项“-- Select --”的值设置为-1，这将起作用。无论如何，我认为你可以`RangeValidator`在这里[https://stackoverflow.com/a/5116098/1495902](https://stackoverflow.com/a/5116098/1495902)

# c - $ 后跟 C 中命令行参数中的字符

> ID：12181900
> 
> 赞同：2
> 
> 时间：2012-08-29T15:54:50.933
> 
> 标签：c, command-line

我刚刚用 C 语言编写了一个使用命令行参数的程序，我试图打印第一个参数。当我使用以下命令执行程序时

```
./a.out $23 
```

并尝试使用以下代码打印第一个参数

```
printf("%s", argv[1]); 
```

输出只是

```
3 
```

我在这里遗漏了什么吗，如果存在某些特殊字符，命令行参数的处理方式会有所不同。有人可以解释这种行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T15:55:46.477

您需要转义`$`角色。

试试这个：

```
./a.out \$23 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T15:56:22.280

大概`$2`是被视为一个shell变量。尝试转义美元符号：

```
./a.out \$23 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T16:23:48.747

你必须像这样“抑制”你的论点：

```
./a.out \$23 
```

某些字符由 shell 解释。这些字符包括：

*   `\`这会抑制（转义）它后面的字符（对于空格、制表符或您的情况很有用）
*   `*`代表任何单个字符或字符串
*   `$`它代表一个变量（在您的情况下，shell 理解变量 $23，而不是字符串“$23”）
*   `||`或`|`允许在您的命令中解决或通过管道传输您的命令
*   `&&`或`&`允许组合命令或允许使用作业控制
*   `"`它允许shell分隔字符串
*   `'`这允许 shell 不解释带有特殊字符的字符串
*   `;`哪个分隔命令
*   ``` 它解释其中两个包含的命令并返回命令的输出

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T16:15:51.963

shell 将其视为后跟文字字符 3`$23`的位置参数。要传递字符串“$23”，请执行以下任一操作`$2`

```
./a.out \$23 
```

或者

```
./a.out '$23' 
```

要传递 shell 的第 23 个位置参数（不太可能，但可能），您可以编写

```
./a.out ${23} 
```

# html-agility-pack - 如何使用 htmlagilitypack 删除 html 中的注释文本

> ID：12181901
> 
> 赞同：1
> 
> 时间：2012-08-29T15:54:50.373
> 
> 标签：html-agility-pack

是否可以使用**htmlagilitypack**库删除 html 中的注释文本？目前我正在做一些从 ASP 到 ASP.NET MVC 的迁移工作，它使用**Regex**来处理这些事情，只是想知道在开始尝试之前我可以使用**htmlagilitypack实现它。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:57:03.467

您可以找到所有类型的节点`HtmlCommentNode`（代表 HTML 注释）并将其从文档中删除。但请注意，AgilityPack 也将 eg`<!DOCTYPE html>`视为注释节点。所以应该跳过这样的节点进行删除：

```
var doc = new HtmlDocument();
doc.LoadHtml(html);
var comments = doc.DocumentNode.DescendantNodes()
    .OfType<HtmlCommentNode>()
    .Where(c=> 
        !c.Comment.StartsWith("<!DOCTYPE", StringComparison.OrdinalIgnoreCase)
    ).ToList();

foreach (var comment in comments)
    comment.Remove();

var result = doc.DocumentNode.InnerHtml; 
```

# macos - 如何使 NSWindow 看起来被禁用并且不响应用户输入？

> ID：12181902
> 
> 赞同：5
> 
> 时间：2012-08-29T15:54:54.227
> 
> 标签：macos, cocoa

我不确定是否有类似的系统级功能。无论如何，有没有办法让 NSWindow 看起来被禁用并且不响应用户输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T11:13:36.087

我不认为 mdominick 的回答是正确的。因为我只想禁用 NSTextFields 和 NSButtons，所以我想出了这个：

```
for (NSView *item in [self.window.contentView subviews])
{
    if ([item isKindOfClass:[NSTextField class]] || [item isKindOfClass:[NSButton class]])
    {
        [(id)item setEnabled:NO];
    }
} 
```

编辑

在开发新应用程序时，NSWindow 子类中的此方法非常方便

```
- (void)setEnabled:(BOOL)enabled
{
    [self setEnabled:enabled view:self.window.contentView];
}

- (void)setEnabled:(BOOL)enabled view:(id)view
{
    if ([view isHidden]) return;

    for (NSView *item in [view subviews])
    {
        if ([item isKindOfClass:[NSProgressIndicator class]])
        {
            NSProgressIndicator *pI = (NSProgressIndicator *)item;
            [pI setHidden:enabled];
            if (!enabled) [pI startAnimation:nil];
            if (enabled) [pI stopAnimation:nil];
        }
        if ([item isKindOfClass:[NSTextField class]] || [item isKindOfClass:[NSButton class]] || [item isKindOfClass:[NSTextView class]])
        {
            [(id)item setEnabled:enabled];
            continue;
        }
        if (item.subviews.count)
        {
            [self setEnabled:enabled view:item];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:50:27.757

您可以尝试以下方法：

```
[someWindow setAlpha:0.5]; // you can change this number to you visual taste.
[someWindow setIgnoresMouseEvents:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-12T06:15:47.307

作为另一种选择，可以有一个 NSMakeRect(0,0,10,0) 高度为 0 的隐藏窗口，并在 windowController 或窗口子类中编写一个 disableWindow 方法，该方法会抛出一个带有上述隐藏窗口的面板。打开面板时，屏幕将被禁用。enableWindow 将或者 orderOut 上述 hiddenWindow 重新启用主窗口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T11:57:12.683

**由于第一个答案仍然允许键盘输入，**因此我会将其**清理干净**并**循环遍历每个 UI 元素，并将其设置为禁用**，同时使窗口半可见。（编辑：mmackh 的答案有执行此操作的代码。）

或者您使用简单的方法，只需`NSView`在窗口顶部添加一个不可见的 firstResponder 并“捕获”所有输入。

# c# - 如何从 C# 中的 Google 地图地理编码 API 获取 XML 返回？

> ID：12181909
> 
> 赞同：2
> 
> 时间：2012-08-29T15:55:06.337
> 
> 标签：c#, asp.net, xml, web-services

我正在用 C# 编写一个 asp.net 程序，它应该获取一个地址，使用谷歌地理编码 Web 服务返回一个 XML 页面，然后在 XML 页面上找到该地址的经度和纬度。如果我已经构建了查询字符串（例如[http://maps.googleapis.com/maps/api/geocode/xml?address=1000+Fifth+Avenue,+New+York,+NY&sensor=false](http://maps.googleapis.com/maps/api/geocode/xml?address=1000+Fifth+Avenue,+New+York,+NY&sensor=false)），我将如何继续发送该查询并返回 C# 中的返回 XML 页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T15:58:47.363

做这个;

```
XmlDocument xDoc = new XmlDocument();
xDoc.Load("http://maps.googleapis.com/maps/api/geocode/xml?address=1000+Fifth+Avenue,+New+York,+NY&sensor=false"); 
```

这将为您提供您的 XmlDocument，然后您可以根据需要进行处理。

所以如果你想获得经纬度，你可以使用`XPath`

```
var lat = xDoc.SelectSingleNode("/GeocodeResponse/result/geometry/location/lat").InnerText;
var longitude  = xDoc.SelectSingleNode("/GeocodeResponse/result/geometry/location/lng").InnerText; 
```

# bash - 使用 sed 解析列表

> ID：12181910
> 
> 赞同：-1
> 
> 时间：2012-08-29T15:55:07.533
> 
> 标签：bash, sed

我将以这种方式详细说明一个包含一些文本和电子邮件地址的文件：

```
TEXT\n
Cc: mail1,\n
    mail2,\n
    mail3\n
EMPTY LINE\n
TEXT 
```

我必须将抄送列表加载到 bash 变量中：FOO="mail1, mail2, mail3"。如何使用 sed （或其他命令）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:19:44.063

`sed`通常一次只评估一行。你可以让它匹配多行，但这很丑陋。我建议`Perl`改用。

```
FOO=`perl -e 'local $/=undef; open FILE, "input.txt"; $text=<FILE>; close FILE; print "$1, $2, $3" if $text =~ /Cc: (.*?),\n (.*?),\n (.*?)\n/s;'` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:31:35.720

如果您已经`Procmail`安装并且输入文件被格式化为单个 RFC822 电子邮件，如示例中所示，

```
FOO=$(formail -c -xCc: <file) 
```

# java - 创建 Java 代理与调用 Notes API - Louts Notes

> ID：12181911
> 
> 赞同：0
> 
> 时间：2012-08-29T15:55:11.603
> 
> 标签：java, lotus-notes, lotus-domino, javaagents

我的任务是阅读 Lotus Dominos 邮箱中的电子邮件。为了执行相同的操作，我有以下两个选项（可能还有其他选项）：

1.  在邮箱中创建一个 Java 代理并安排它。它将处理邮件并采取行动。\
2.  使用使用过的 Notes API 编写单独的 Java 代码并调用 dominos 服务器来获取邮件并进行处理。

两者有什么区别？能力还是其他？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T16:00:28.817

编写一个 Java 代理以在电子邮件服务器中运行

***优点***

1.  让您利用电子邮件服务器本身的所有弹性
2.  可以合理保证随邮件服务器启动和停止
3.  更少的代码来管理
4.  更容易使用电子邮件服务器记录错误

***缺点***

1.  特定于供应商，因此便携性较差

***个人观点的原因***

我编写了一个客户端，它使用 IMAP 定期阅读收件箱中的电子邮件，并设置了一个[James Mail 服务器](http://james.apache.org/)使用您正在谈论的代理程序以编程方式回复通过电子邮件地址收到的电子邮件。我倾向于喜欢您的选项 1（在电子邮件服务器中运行的 Java 代理），因为它可以让您利用电子邮件服务器本身的所有弹性。可以合理地保证代码与电子邮件服务器一起启动和停止，并且它的日志记录连接到服务器的日志记录。制作独立代理的好处是可以使用初始配置以外的服务器（尤其是在使用标准协议的情况下）。但是您必须做更多工作以确保它可以运行，并且您必须更加努力地进行调试（根据我自己的经验）。此外，Java 代理方法往往更小，因此需要管理的代码更少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:58:44.360

如果您只监视一个邮箱，那么 Java 代理具有明显的优势，因为它不需要任何配置数据。您只需将代理放入实际的邮箱数据库中，它就会在运行时调用 AgentContext.getCurrentDatabase。如果您只监控几个邮箱，您可以复制代理，然后每个实例再次读取 AgentContext.getCurrentDatabase。但是，如果您有很多邮箱，那么您可能不想到处复制它。您可能只需要一个代理或一个独立程序——在这两种情况下，您都需要一些配置数据来控制它。在这种情况下，我可能会考虑独立运行它而不是作为代理运行。

但这会引发一个问题：您想如何管理配置数据？另一个问题由此而来：谁来管理配置数据？如果答案是 Domino 服务器的管理员也会管理读取邮箱数据的进程的配置，那么我建议您应该使用所有 Domino 管理员都熟悉的配置工具。这可能是 Domino 目录中列出邮箱名称的组，也可能是包含您正在监视的每个邮箱的配置文档的 Notes 数据库。如果您决定采用这种方式，那么我的偏好仍然是使用读取 Domino 服务器上的配置信息并从配置的邮箱中读取数据的 Domino 代理。但这里的优势是' t一样强。您可以在 Domino 中配置它，但仍然可以独立运行。只需要配置独立代码，以便它知道在哪里查找其配置数据，这可能只是一个命令行，如“java myprog dominoServerName configDatabaseName”。

# scala - 为什么我在这里得到“java.lang.OutOfMemoryError：GC 开销限制超出”？

> ID：12181912
> 
> 赞同：0
> 
> 时间：2012-08-29T15:55:15.537
> 
> 标签：scala, garbage-collection, out-of-memory

我想破解一个快速脚本，它简单地将一个核苷酸序列（一个像“ATGAAGAAC...”这样的字符串）拆分成一个三元组列表，也就是密码子（字符串：“ATG”、“AAG”、“AAC”......）做其他事情。

这个单线有什么问题，为什么我会收到“java.lang.OutOfMemoryError: GC overhead limit exceeded”？

```
def tripletize(s:String, accu:List[String] = List.empty[String]):List[String] = tripletize(s.drop(3), s.take(3) :: accu) 
```

我不是在问那是什么，而是我为什么得到它以及如何避免。顺便说一句，我知道这会给我相反的顺序，但我不知道如何避免 scala 将 String 视为一个集合本身。即：

```
scala> List.empty ++ "hello"
res6: List[Char] = List(h, e, l, l, o) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:59:43.170

你什么时候停下来？ `drop`不会仅仅因为没有什么可以放弃就终止递归。还有，你回什么？你从来不说。你需要做类似的事情

```
= if (s.length==0) accu else tripletize(s.drop(3), s.take(3) :: accu) 
```

# javascript - UserInformation.getFirstNameAsync Promise 永远不会实现

> ID：12181914
> 
> 赞同：0
> 
> 时间：2012-08-29T15:55:20.903
> 
> 标签：javascript, windows-8

任何人都知道为什么我永远不会在这里打调试器？当我第一次运行时，我点击了错误方法，它说我需要启用企业身份验证，但现在我没有点击任何一个调试器。我确实从 getFirstNameAsync 得到了一个承诺，但我猜它永远不会实现。

```
Windows.System.UserProfile.UserInformation.getFirstNameAsync().done(
    function (name) {
        debugger; //document.getElementById("myDiv").innerText = name;
    },
    function (error) {
        debugger; //document.getElementById("myDiv").innerText = error.message;
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:09:23.013

您需要在任何可能导致异常的代码周围使用 try {} catch() {} 块。

如果发生异常，异步方法将停止在创建它们的线程上执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:24:26.570

一个简单的系统重启修复了它。

# php - PDO 执行的结果与 phpmyadmin 不同

> ID：12181916
> 
> 赞同：-3
> 
> 时间：2012-08-29T15:55:26.433
> 
> 标签：php, pdo, prepared-statement

php 用 var_dump 完成的结果：29

phpmyadmin 完成的结果：3

我在 phpmyadmin 中这样做：

> SELECT * FROM tmp_foire_aux_vins_2012 WHERE 1 and prix_foire < 5 ORDER BY enseigne ASC , prix_foire DESC

为什么返回结果与实际不同，好的结果是 3

这里的代码：

```
$query = "SELECT * FROM tmp_foire_aux_vins_2012 WHERE 1 $whereClause ORDER BY enseigne ASC $order";
$aRecordsListResultTab = $_SESSION["PDO"]->query($query, $param)->fetchALL(PDO::FETCH_OBJ);
        $countResult = count($aRecordsListResultTab); 
```

> var_dump $param
> 数组
> 0 => int 5

* * *

> var_dump $whereClause
> string ' and prix_foire < ?' （长度=19）

```
$query = "SELECT * FROM tmp_foire_aux_vins_2012 WHERE 1 and prix_foire < ? ORDER BY enseigne ASC , prix_foire DESC " 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:33:56.617

我解决了这个问题，在数据库中，字段的类型是错误的......我将它更改为“十进制”，它就像一个魅力

# mysql - 选择两个具有相同类型的随机条目

> ID：12181918
> 
> 赞同：0
> 
> 时间：2012-08-29T15:55:29.803
> 
> 标签：mysql, sql, random, row-number

我想运行一个 SQL 语句，从我的表中选择两个具有相同类型的**随机**条目（对于每种类型）。我有一个“id”、“question”和“type”字段。我从上一篇关于堆栈溢出的帖子中找到了以下代码：

```
SET @type = '';
SET @num  = 1;
SELECT id, type, question
FROM (
SELECT id, type, question,
       @num := IF(@type = type, @num + 1, 1) AS row_number,
       @type := type AS dummy
FROM Q
) AS x
WHERE row_number <3; 
```

这几乎解决了我的问题，唯一的问题是两个输出条目需要是随机的，而不仅仅是两个顶部 id，或者默认情况下排序的任何内容。

# php - Setting the value of an HTML textbox using Javascript inside of a PHP block (using echo)

> ID：12181923
> 
> 赞同：0
> 
> 时间：2012-08-29T15:55:43.717
> 
> 标签：php, javascript, html

I'm trying to run a MySQL query depending on what HTML selectbox option is selected and then take the query result and output it to an HTML textbox but to no avail. I'm using the switch statement with the superglobal $_GET. I'm trying to set the value of an HTML textbox using Javascript inside of a PHP block (using echo), but it's not working. The textbox is not being populated (still blank). Could this be because the PHP is running before the textbox is getting initialized or is there something else I'm missing? I know for sure that the DB login info is correct, and the query actually works. The code is below.

```
<?php
---db login info here---

switch($_GET['string'])
{
    case "another string":
        $query = mysql_query("SELECT field1 FROM table1 WHERE id = '1'");
        $row = mysql_fetch_row($query);
        break;
}

echo "<script type='text/javascript'>";
echo "document.getElementById('textbox').value = '$row[0]'";
echo "</script>";   
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T16:00:39.890

Couple things:

1.  you can verify that the PHP part is working by checking the "source" of the site when you visit it in the browser (does the `<script>` part look like you expect?)

2.  Note that the "textbox" must occur earlier in the document than this script, as written

3.  If the element in question is a `<textarea>`, it does not have a `value` attribute, and you need to use `innerHTML` or similar.

4.  There may be bigger-picture issues with how this is being accomplished (is this ajax? all one request? why not simply author the text box with php?)

# edit, do it with PHP

If it is your code which authors the `<input>`, just do it with php in the first place (then you get the added benefit of no js dependency:

```
switch($_GET['string'])
{
    case "another string":
        $query = mysql_query("SELECT field1 FROM table1 WHERE id = '1'");
        $row = mysql_fetch_row($query);
        $textboxValue = $row[0];
        break;
}
?>
// ...
<input type="text" name="foo" id="textbox" value="<?php echo $textboxValue;?>" /> 
```

# java - Wicket - 如何使用 ListView 项目调用另一个页面

> ID：12181925
> 
> 赞同：1
> 
> 时间：2012-08-29T15:55:45.293
> 
> 标签：java, html, wicket

当用户单击我的 ListView 的一个项目时，我希望它加载另一个页面，其中包含单击行的信息。我尝试将 onClick 事件添加到项目中，如下所示：

```
item.add(new AjaxFormValidatingBehavior(ClientSearchForm.this, "onclick") {

    @Override
    protected void onSubmit(AjaxRequestTarget target) {

        ClientPage.this.setResponsePage(new EditClientPage());
    }
}); 
```

但我不确定如何加载我的其他页面。我应该只需要实例化它吗？

编辑：使用上面的代码有效，但它仅在单击第一项时加载。

按要求提供 HTML。

```
<table border="1" wicket:id="clientTable" id="client-table">
                    <tr wicket:id="clientRow" id="client-row">
                        <td>
                            <span wicket:id="row1"></span>
                        </td>

                        <td>
                            <span wicket:id="row2"></span>  
                        </td>
                    </tr>
                </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:49:07.900

我做了一些测试，你的解决方案对我来说很好。

所以我怀疑问题出在你的标记中，它可能不支持 onclick 事件。

这是我的工作示例：

```
public class HomePage extends WebPage {

    public HomePage(final PageParameters parameters) {

        add( new Label( "label", parameters.getString( "param")));

        add( new ListView( "list", Arrays.asList( "foo", "bar") ) {
            @Override
            protected void populateItem(final ListItem item) {
                item.add( new Label( "label", "item model is "+item.getModelObject() ) );
                item.add( new AjaxEventBehavior( "onclick") {

                    @Override
                    protected void onEvent(AjaxRequestTarget target) {
                        PageParameters pp = new PageParameters( "param="+item.getModelObject() );
                        setResponsePage( new HomePage( pp ) );
                    }
                });

            }
        });
    }
} 
```

和html：

```
<html>
    <head>
        <title>Wicket Quickstart Archetype Homepage</title>
    </head>
    <body>
        <span wicket:id="label">message will be here</span>
        <div wicket:id="list">Static stuff and <span wicket:id="label">dynamic stuff</span></div>
    </body>
</html> 
```

# java - RXTX在windows 7 64位下无法列出或查找端口

> ID：12181926
> 
> 赞同：7
> 
> 时间：2012-08-29T15:55:52.280
> 
> 标签：java, windows-7, 64-bit, 32bit-64bit, rxtx

早上好，

我在 Windows 7 64 位上使用/或安装 rxtx 时遇到问题。我以前在 x86 win XP 系统上使用过它，没有任何问题。由于出于某种原因重新安装到这个新系统，rxtx 无法找到任何端口。我已经尝试了 rxtx 安装，Cloud Hopper 的 64 位本机库并删除所有 rxtx 文件并从头开始。找到了 RXTXcomm.jar，我可以浏览 NetBeans 中的包，但实现似乎已损坏或找不到。

每次执行时，此行都会失败：

```
comPort = "COM1";
portId = CommPortIdentifier.getPortIdentifier(comPort); 
```

并抛出 NoSuchPortException。

使用它列出串行端口不会产生任何结果。

```
Enumeration ports = CommPortIdentifier.getPortIdentifiers();
String portArray[] = null;
while (ports.hasMoreElements()) {
    CommPortIdentifier port = (CommPortIdentifier) ports.nextElement();
    System.out.println(port.getName());
} 
```

我已经检查了串行端口是否可用，所以此时我想知道本机库是否只是为 Windows 7 64 位而损坏。

有人在windows 7 64位下成功使用RXTX 2.2pre2吗？

构造函数中的违规代码部分：

```
public SerialControl(String name, String comPort, int baudrate, int databits, String     parity, double stopbits) throws Exception {
    int stop = 0;
    int data = 0;
    int par = 0;

    this.name=name;

    // Sanity checks and interpretation
    if (baudrate > 115200 || baudrate < 300) {
        System.err.println(name+": constructor(): Invalid baudrate "+baudrate);
        throw new Exception("Invalid baudrate, " + baudrate);
    }

    if (databits >= 5 && databits <= 8) {
        switch (databits) {
            case 5:
                data = SerialPort.DATABITS_5;
                break;
            case 6:
                data = SerialPort.DATABITS_6;
                break;
            case 7:
                data = SerialPort.DATABITS_7;
                break;
            case 8:
                data = SerialPort.DATABITS_8;
                break;
            default:
                System.err.println(name+": constructor(): Invalid data bits, switched " + databits);
                throw new Exception("Invalid data bits, switched " + databits);
        }
    } else {
        throw new Exception("Invalid data bits=" + databits);
    }

    if (stopbits >= 1.0 && stopbits <= 2.0) {

        if (stopbits == 1.0) {
            stop = SerialPort.STOPBITS_1;
        } else if (stopbits == 1.5) {
            stop = SerialPort.STOPBITS_1_5;
        } else if (stopbits == 2.0) {
            stop = SerialPort.STOPBITS_2;
        } else {
            System.err.println(name+": constructor(): Invalid stop bits, switched " + stopbits);
            throw new Exception("Invalid stop bits, switched " + stopbits);
        }
    } else {
        System.err.println(name+": constructor(): Invalid stop bits, switched " + stopbits);
        throw new Exception("Invalid stop bits " + stopbits);
    }

    switch (parity) {
        case "S":
            par = SerialPort.PARITY_SPACE;
            break;
        case "E":
            par = SerialPort.PARITY_EVEN;
            break;
        case "M":
            par = SerialPort.PARITY_MARK;
            break;
        case "O":
            par = SerialPort.PARITY_ODD;
            break;
        case "N":
            par = SerialPort.PARITY_NONE;
            break;
        default:
            System.err.println(name+": constructor(): Invalid parity, switched " + parity);
            throw new Exception("Invalid parity, switched " + parity);
    }

    // Inits
    // Try to find the port specified
    try {
        portId = CommPortIdentifier.getPortIdentifier(comPort);
    } catch (Exception e) {
        System.err.println(name+": constructor(): No such port \"" + comPort+"\"");
        e.printStackTrace();
        throw e;
    }

    // Open the port
    try {
        serialPort = (SerialPort) portId.open("User Port", 2000);
    } catch (PortInUseException e) {
        System.err.println(name+": constructor(): Could not open port " + comPort);
        throw e;
    }

    // Grab the input stream
    try {
        inputStream = serialPort.getInputStream();
    } catch (IOException e) {
        System.err.println(name+": constructor(): Could not get input stream for " + comPort);
        throw e;
    }

    // Set the serial port parameters, no flow control
    try {
        serialPort.setSerialPortParams(baudrate, data, stop, par);
        serialPort.setDTR(false);
        serialPort.setRTS(false);
    } catch (UnsupportedCommOperationException e) {
        System.err.println(name+": constructor(): Error initializing " + comPort);
        throw e;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T16:49:43.500

我遇到了同样的问题。我使用 Eclipse 作为 IDE 进行编程，我在官方 wiki 中找到了这个替代配置：

1.  将 RXTXcomm.jar 复制到项目的 lib 目录
2.  将您的包资源管理器导航到 lib 文件夹，右键单击 RXTXcomm.jar | 构建路径 | 添加到构建路径
3.  将 rxtxSerial.dll 和 rxtxParallel.dll 文件复制到项目的根目录
4.  在运行 | 运行配置 | 类路径选项卡 | 用户条目 | 高级 | 添加文件夹，选择项目的根文件夹
5.  这应该足以在 Eclipse 下运行它，在部署可运行的 jar 时，只需确保 dll 与 jar 位于同一文件夹中（JVM 假定它用于类路径）

（这是我的第一个答案，我不知道我是否可以发布外部链接，但五个步骤来自[http://rxtx.qbang.org/wiki/index.php/Using_RXTX_In_Eclipse](http://rxtx.qbang.org/wiki/index.php/Using_RXTX_In_Eclipse)）

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T16:38:42.710

它适用于我使用 Windows 7 和 64 位版本的 Java 和 RXTX（[cloudhopper](http://www.cloudhopper.com/opensource/rxtx/)版本）

![在此处输入图像描述](../Images/ae2f79b894cac41fad6b47c369601ae5.png)

你确定你有一个COM1？

# iphone - 横向隐藏UITabBar

> ID：12181935
> 
> 赞同：0
> 
> 时间：2012-08-29T15:56:18.887
> 
> 标签：iphone, ios, uitabbarcontroller, uitabbar

如何以编程方式隐藏 UITabBar？在 SO 上已多次询问和回答，但答案似乎大致有两种：

1）使用导航控制器，可以使用 hidesBottomBarWhenPushed 属性在推送之前隐藏下一个 vc 的标签栏。 [这里的典型答案](https://stackoverflow.com/questions/815690/hide-uitabbar)。

2）遍历标签栏控制器的视图层次结构并修改标签栏的框架和/或可见性。 [这里的典型答案](http://www.developers-life.com/hide-uitabbarcontrolleruitabbar-with-animation.html)。

但是这两种答案都不足，imo。1）如果我们需要在我们所在的视图上隐藏标签栏怎么办，比如当旋转到横向时。2）通过Apple库的私有视图层次结构唤醒的半页代码是a。笨重的湾 容易发生不可预见的断裂，c。可能是应用程序批准的阻止程序。

那么要做什么应用呢？答案是不允许吗？是否有苹果文档参考支持这一点？这将是一个悲伤的答案。Imo，旋转案例是隐藏标签栏的正当理由。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:38:50.087

抱歉响应延迟，但我已经提取了我的代码，您可以看到我如何旋转我的设备以仅在横向中全屏显示“地图视图”。

```
-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
if(toInterfaceOrientation == UIInterfaceOrientationLandscapeRight || toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft) {
    [self hideTabBar:self.tabBarController];
    [self.view bringSubviewToFront:self.eventsMapView];
    self.eventsMapView.bounds = self.view.bounds;
    self.eventsMapView.frame = CGRectMake(0, -208, self.view.frame.size.width, 300);
} else if(toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown || toInterfaceOrientation == UIInterfaceOrientationPortrait) {
    [self showTabBar:self.tabBarController];
    [self.view sendSubviewToBack:self.eventsMapView];
} 
```

}

由于我们调用其中的方法来实际隐藏和显示选项卡栏，因此我们还需要在 .m 文件中定义这些方法：

```
#pragma mark - Tab Bar Methods -

-(void)hideTabBar:(UITabBarController *)tabbarcontroller {
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];

    for(UIView *view in tabbarcontroller.view.subviews) {
        if([view isKindOfClass:[UITabBar class]]) {
            [view setFrame:CGRectMake(view.frame.origin.x, 480, view.frame.size.width, view.frame.size.height)];
        } else {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480)];
        }
    }

    [UIView commitAnimations];   
}

-(void)showTabBar:(UITabBarController *)tabbarcontroller {       
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];

    for(UIView *view in tabbarcontroller.view.subviews) {
        if([view isKindOfClass:[UITabBar class]]) {
            [view setFrame:CGRectMake(view.frame.origin.x, 431, view.frame.size.width, view.frame.size.height)];
        } else {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 431)];
        }
    }

    [UIView commitAnimations]; 
} 
```

如果您已经在选项卡栏控制器中，那么您需要确保每个子项（或单个选项卡 ViewController）都返回 TRUE，如下所示。

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
return TRUE; 
```

}

希望这会有所帮助 - 如果您有任何问题，请发表评论，我会更新我的答案以更好地展示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:42:58.133

[你可以在这里](http://www.developers-life.com/hide-uitabbarcontrolleruitabbar-with-animation.html)找到一些有用的代码。您可以从您的 shouldrotate: 方法中调用 hideTabbar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-02T13:01:47.773

2021年的答案。Xcode 12\. 在横向模式下创建新布局。在下图中，我创建了 wAny hCompact (hC) 属性，然后将其设置为隐藏。

[![在此处输入图像描述](../Images/e22702192546a089d2a746399f92b33a.png)](https://i.stack.imgur.com/j68oU.png)

# python - 如果重命名临时文件，如何保留默认 umask

> ID：12181938
> 
> 赞同：2
> 
> 时间：2012-08-29T15:56:23.517
> 
> 标签：python, django

在 Django 应用程序上，我创建了一个临时文件。此临时文件是使用“0700”权限创建的。但是，我需要重命名该临时文件而不保留临时文件（0700）的权限，但希望该文件获得用户的权限（umask）。我不想更改文件的权限。

这可能吗？

示例代码：

```
import tempfile, os
content = "hello"
temp_fd, filename = tempfile.mkstemp(suffix=".tmp", prefix="test1", dir="/tmp")
with os.fdopen(temp_fd, "wb") as f:
        f.write(content)
os.rename(filename,"/home/user/testfile") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-13T21:25:45.963

```
 # query current umask by replacing it
    old_umask = os.umask(0)

    # immediately restore the umask
    os.umask(old_umask)

    fd, tmp_file_path = tempfile.mkstemp(prefix='.%s.' % os.path.basename(self._file_path), dir=directory)

    # calculate the octal chmod and chmod the temp file
    octal_file_chmod = int('666', 8) & ~old_umask
    os.chmod(tmp_file_path, octal_file_chmod) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:10:45.397

[`shutil.move`](http://docs.python.org/library/shutil.html#shutil.move)应该保留权限，但我不确定它是如何实现的，也许你必须使用[`shutil.copy2`](http://docs.python.org/library/shutil.html#shutil.copy)和的组合[`os.remove`](http://docs.python.org/library/os.html#os.remove)。

# jquery - 在 jQuery 中使用 Web API Web 服务

> ID：12181939
> 
> 赞同：2
> 
> 时间：2012-08-29T15:56:25.687
> 
> 标签：jquery, ajax, api, web

是的...随意用 27 种不同的语言称我为白痴，但是：

我已经开始使用 .NET 4 Web API 开发 Web 服务。我编写了一个名为 GetTransaction 的方法，它只返回一个字符串。我已将其发布到外部 URL。我在连接到 Internet 的 PC 上，并且正在使用 Firefox。

如果我浏览到

```
https://url/service/api/transaction/1 
```

在 Firefox 中，浏览器显示

```
<string>Hello World</string> 
```

但是如果我使用以下 jQuery 创建一个简单的 .htm 文件：

```
$.ajax({
    url: 'https://url/service/api/transaction/1',
    type: 'GET',
    dataType: 'xml',
    success: function(response)
    {
        alert(response);
    }
}); 
```

我收到 Status = 200 OK 的响应，但 Response 选项卡（在 Firebug 中）为空白。没有 XML。

我到底做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:51:30.987

您很可能确实遇到了跨域限制。我不使用 .Net，并且不确定使用 JSONP 代替 XML 是否适合您，但如果是，那将解决您的跨域限制并允许您从本地测试脚本运行它。

# android - 导入android.os.storage.StorageVolume 无法解析

> ID：12181940
> 
> 赞同：3
> 
> 时间：2012-08-29T15:56:27.970
> 
> 标签：android

StorageVolume 是否可作为公共 API 使用？我发现它在一个项目中使用，但我在文档中找不到它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T11:35:14.123

我在尝试更新 cyanogenmod 10 中的 CMUpdater 应用程序时遇到了这个问题。

在 Eclipse 中，右键单击项目名称并选择新建 -> 文件夹，将其命名为 android-source（或其他）并单击高级按钮并选择“链接到备用位置（链接文件夹）”并浏览目录

/your-drive/android/system/frameworks/base/core/java

（首先检查 android/os/storage/StorageVolume.java 是否存在）

单击完成。

该文件夹将被添加到左侧的文件和文件夹列表中。

右键单击您的项目并转到 Properties -> Java Build Path -> Source 选项卡

单击添加文件夹... 并选择您刚刚创建的新文件夹。

现在导入线不应该是红色的了。另一方面，您刚刚创建的文件夹中的源代码中会有大量错误。您将无法从 Eclipse 构建应用程序。在命令行上，转到 /andriod/system 并键入

(Only the first time) . build/envsetup.sh

breakfast your-device-codename

(Every time to build) mmm path/to/your/app

Also, read this: [http://source.android.com/source/using-eclipse.html](http://source.android.com/source/using-eclipse.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:06:09.000

您需要创建一个完整的 android 项目，而不仅仅是将 jar 文件添加到一些 Java 代码中。使用 Eclipse 这将是最简单的，但即使您使用的是命令行，您也需要在添加代码之前先创建一个项目。

请参阅此处的说明： [https ://developer.android.com/training/basics/firstapp/creating-project.html](https://developer.android.com/training/basics/firstapp/creating-project.html)

# ios - 将 JSON 解析为核心数据

> ID：12181942
> 
> 赞同：2
> 
> 时间：2012-08-29T15:56:30.740
> 
> 标签：ios, json, parsing, rest, core-data

我正在尝试将 JSON 从 drupal 页面解析到 iOS 设备。这是 JSON 格式：

```
[{"nid":"20","name":"job 234"},{"nid":"21","name":"job 3534"}] 
```

这是两个对象。如何使用 coredata 和自定义实体保存它们？我想我需要匹配的属性名称？任何链接或提示都会有所帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T16:37:05.240

小马乐园，

你的问题很笼统，但我会尽量给你一些提示。为了实现您的目标，您可以遵循两个步骤：

1.  解析 JSON 数据并检索对象
2.  在 Core Data 中保存对象

要解析您的 JSON 数据，您可以遵循[working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)。本教程适用于 iOS 5。如果 iOS 5 不是唯一的目标，您可以查看[iPhone/iOS JSON 解析教程](https://stackoverflow.com/questions/5813077/iphone-ios-json-parsing-tutorial)资源。

一旦你解析了 JSON 数据，你需要使用 Core Data 来保存它们。您可以在以下教程中找到如何使用 Core Data：[core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)。[此外，您可以在Mapping Business Objects with Core Data in iOS](https://stackoverflow.com/questions/10619613/mapping-business-objects-with-core-data-in-ios)中找到关于 Core Data 的简单解释（由我制作）。如果您需要使用表格，请查看[core-data-tutorial-how-to-use-nsfetchedresultscontroller](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller)

关于您的核心数据模型，您可以创建一个名为`Job`（例如）的具有两个属性的实体：

*   `nid`类型`NSString`（或`NSNumber`）
*   `name`类型`NSString`

如果你想知道别的，请告诉我。

您也可以尝试使用[RestKit](http://restkit.org)（支持 Core Data），但我认为遵循我编写的两个步骤过程可能更容易。

最后，[Core Data 编程指南](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)是你的朋友。

希望有帮助。

# css - 父 div 用子 div 展开

> ID：12181943
> 
> 赞同：1
> 
> 时间：2012-08-29T15:56:32.840
> 
> 标签：css, html, height, parent

我需要保持盒子的高度与图像的高度相同。当小猫（示例）图像的高度为 398px 时，div 应具有相同的高度。
问题是，.item div 内的其他子 div 将父 div 扩展为大约。150 像素。

我怎样才能阻止这种行为？
我尝试了其他几种方法，例如溢出：隐藏/自动等，但没有任何效果。
请需要帮助！:)

**HTML**：

```
<div id="container">
    <div class="item">
        <img src="http://placekitten.com/g/398/398" />
        <div class="box">
            <span id="header-content">
                Lorem ipsum dolor sit amet, consetetur sadipscing elitr
            </span>
        </div>
        <div class="headlineblog"><h1>Headline</h1></div>
        <div class="cat"><h2>Category</h2></div>
    </div>
</div>​ 
```

**CSS**：

```
#container {}
.item {width: 398px;float:left;margin: 10px;overflow: hidden !important;}
.item > img {width: 398px !important}
.item .box {background-color: white;
margin: 10px;
height: 65px;
position: relative;
top: -110px;
font-size: 14px;
color: #BBBDBE;
min-height: 65px;
padding: 10px;
width: 358px;

}
.cat {position: relative;left: 280px;bottom: 230px;}
.cat h2 a{font-size: 14px;text-transform: uppercase;font-weight: 300;color: #FF6400}
.headlineblog {position: relative;left: 20px;bottom: 195px;}
.headlineblog h1 a{font-size: 18px; color: black; font-weight: 700}
.item .box #header-content { position: absolute; bottom: 10px;font-size: 14px;font-weight: 300;color: grey;width: 310px;text-overflow: ellipsis;overflow: hidden;-o-text-overflow: ellipsis;white-space: nowrap; }​ 
```

[现场演示](http://jsfiddle.net/Df73h/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:07:29.327

您可以设置`.item`have`position: relative`和必要的 children to have `position: absolute`，稍微调整他们的顶部/底部位置。

*   [http://jsfiddle.net/aK4vy/](http://jsfiddle.net/aK4vy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:02:23.610

不知道我是否错过了什么，但我会这样做：

给在这种情况下`div.item`是位置属性的父容器`position: relative;`

现在，您可以将“白盒”放置在父容器中，其位置属性`position: absolute;`为将其放置在父容器的底部，使用`bottom: 5px;`（或其他适合您的数字）如果您希望白盒位于顶部，您会使用类似的东西`top: 5px;`

我认为没有理由以绝对的方式将元素放置在“白盒”中。在我看来，使用浮点数要清楚得多。无论如何，这是代码：

标记：

```
<div id="container">
    <div class="item">
        <img src="http://placekitten.com/g/398/398">
        <div class="box">
            <div class="top">
                <span class="headlineblog"><h1>Headline</h1></span>
                <span class="cat"><h2>Category</h2></span>                
            </div>
            <span class="header-content">Lorem ipsum dolor sit amet, consetetur sadipscing elitr</span>
        </div>
    </div>
</div>​ 
```

款式：

```
#container {}

.item {
    position: relative;
    margin: 10px;
}
.item img { 
    width: 398px;
}

.item .box {
    position: absolute;
    bottom: 10px;    
    height: 65px;
    width: 358px;
    margin: 10px;
    padding: 10px;
    background-color: white;    
}

.item .box .top {
    /* clear the floating elements */
    overflow: hidden;
    margin: 0 0 5px 0;
}

.item .box .headlineblog {
    float: left;
}

.item .box .cat {
    float: right;
}

​.​item .box .header-content {
    color: grey;
}​ 
```

jsfiddle：[演示](http://jsfiddle.net/7fJ6e/1/)

如果这不适合您，请说明原因。

# forms - Symfony 2 将数据从表单绑定到没有表单组件的实体

> ID：12181950
> 
> 赞同：0
> 
> 时间：2012-08-29T15:57:05.943
> 
> 标签：forms, validation, symfony

我想使用 Symfony 2 验证组件来验证我的表单而不使用表单组件，因为我更喜欢手动创建自己的 HTML 表单。如何将手动表单中的数据绑定到实体，以便在控制器中验证该实体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T18:56:02.413

只需通过`$request->request`参数包并使用模型的设置器来设置数据。然后您可以使用该`validator`服务来验证实体：

```
$constraintViolationList = $this->get('validator')->validate($entity); 
```

如果`$constraintViolationList`不为空，则实体无效。

顺便说一句，我相信 Symfony 表单组件可以说是框架中最重要的部分。我建议你重新考虑你的立场。

# .net - 更改已编译可执行文件的 .NET Framework 目标

> ID：12181953
> 
> 赞同：4
> 
> 时间：2012-08-29T15:57:12.347
> 
> 标签：.net, visual-studio-2012, .net-4.5

由于默认情况下 Windows 8 不包含 .NET 2/3.5，我想将一些 .NET 2.0 编译的可执行文件转换为 .NET 4.5 而无需使用 VS 2012 重新编译它们。是否有此任务的实用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T15:59:43.810

您可以只创建或修改 app.config 文件，并将[supportedRuntime](http://msdn.microsoft.com/en-us/library/w4atty68.aspx)元素设置为4.5。这将导致 4.0 CLR（它将使用 4.5 框架）加载程序集，并且不需要对可执行文件本身进行任何更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T14:54:25.813

作为附加信息（Reed Copsey 提供的解决方案有效），您可以拥有多个 supportedRuntime 元素以支持未安装 4.x 的系统：

```
<configuration>
    <startup>
        <supportedRuntime version="v4.0" />
        <supportedRuntime version="v2.0.50727" />
    </startup>
... 
```

这将使它在 Windows 8 或未安装 .Net 4.x 的早期版本中运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T16:21:03.953

我相信你不能这样做，因为这个属性是在程序集本身（TargetFramework）中支持的，如果你没有源代码，你可以做的是反编译程序集并使用所需的 .NET Framework 版本重新编译它。

# php - 如何使用 PHP 解码使用 RFC2231 编码的字符串

> ID：12181955
> 
> 赞同：2
> 
> 时间：2012-08-29T15:57:20.367
> 
> 标签：php, mime, rfc2231

我正在解析带有附件的 MIME 格式的电子邮件。附件的文件名使用 RFC2231 编码，因此例如其中一个附件的“内容处置”是：

```
attachment;  filename*=utf-8''Bill%20Sixteen.pdf 
```

我该如何解码该文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:58:35.513

akelos 框架似乎确实具有解码功能，您可能会对其进行研究：

[阿克洛斯](http://www.akelos.org/api/elementindex_AkelosFramework.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:57:52.717

这是 Dukeatcoding 提到的 akelos 框架之外的具体方法。

```
/**
 * RFC 2231 Implementation
 */
public function _decodeHeaderAttribute($header_attribute, $charset = '')
{
    if(preg_match("/^([A-Z0-9\-]+)(\'[A-Z\-]{2,5}\')?/i",$header_attribute,$match)){
        $charset = $match[1];
        $header_attribute = urldecode(str_replace(array('_','='),array('%20','%'), substr($header_attribute,strlen($match[0]))));
    }
    return Ak::recode($header_attribute, 'UTF-8', $charset);
} 
```

看看他们是如何做到的，并使用它创建你自己的解码函数；）

PS 我相信 akelos 框架使用 LGLP 许可证 - 所以如果你在自己的项目中使用该方法，请注意。

# magento - magento 更新属性 1 = 属性 2

> ID：12181957
> 
> 赞同：1
> 
> 时间：2012-08-29T15:57:25.887
> 
> 标签：magento

我的 magento 商店中有 800 种产品，我试图更改所有 SKU，但将旧的保留到另一个文本字段。我找到了一个可以一次更改所有 SKU 的脚本，但问题是首先，我必须将属性字段 SKU 的文本插入到新的属性字段“old_sku”中。

我如何更新 old_sku = sku？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T16:08:10.160

如果您确实有一些 PHP 知识，则可以使用它来创建一个运行一次并替换所有属性值的 PHP 脚本。例如，我会这样做：

```
<?php
// Magento initialization code; taken from here: http://www.ecomdev.org/2010/06/01/application-bootstrap-in-magento.html
require 'app/Mage.php';

if (!Mage::isInstalled()) {
    echo "Application is not installed yet, please complete install wizard first.";
    exit;
}

$initializationCode = 'admin';
$initializationType = 'store';
$scope = 'frontend';
Mage::app($initializationCode, $initializationType);
Mage::getConfig()->init();
Mage::getConfig()->loadEventObservers($scope);
Mage::app()->addEventArea($scope);

// Update products
try
{
    $products = Mage::getModel('catalog/product')->getCollection();

    foreach ($products as $product) {
        $product->setOldSku($product->getSku())->save();
    }
} catch (Exception $e)
{
    echo "Something bad happened: {$e->getMessage()}. Shutting down...";
    exit;
}
?> 
```

`update_skus.php`比方说，只需在 Magento 设置的根目录中创建一个文件（在`index.php`文件附近），用我提供的代码填充它，然后将浏览器导航到该文件（例如`http://magento.local/update_skus.php`）。您应该让所有产品的`old_sku`属性完全设置为它们的`sku`属性值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:48:01.743

如果你想让它变得非常简单，那么解决方案是

a) 添加属性“old_sku” b) 导出所有产品 b) 更改 CSV - 复制并粘贴“old_sku”中的“sku”列值，d) 导入所有产品

就是这样

希望这可以帮助！！！

# reference - 我应该如何在 D 中的函数参数中使用存储类说明符，如 ref、in、out 等？

> ID：12181959
> 
> 赞同：4
> 
> 时间：2012-08-29T15:57:44.847
> 
> 标签：reference, arguments, d, storage-class-specifier

D中函数参数的存储类说明符比较多，分别是：

*   *没有任何*
*   `in`（相当于`const scope`）
*   `out`
*   `ref`
*   `scope`
*   `lazy`
*   `const`
*   `immutable`
*   `shared`
*   `inout`

他们背后的理性是什么？他们的名字已经提出了明显的用途。但是，有一些悬而未决的问题：

1.  我应该默认使用`ref`与类型函数参数结合`in`使用吗？`struct`
2.  是否`out`隐含`ref`暗示？
3.  我什么时候应该使用*none*？
4.  类和/或接口是否`ref`有意义？（类类型默认为引用。）
5.  `ref`在数组切片上怎么样？
6.  我应该`const`尽可能使用内置算术类型吗？

更笼统地说：在内置类型、数组、结构、类和接口的情况下，何时以及为什么应该对函数参数类型使用哪个存储类说明符？（为了稍微隔离问题的范围，请不要讨论`shared`，因为它有自己的孤立含义。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T17:36:30.550

1.  我不会默认使用任何一个。`ref`参数只接受左值，这意味着您将更改传入的参数。如果您想避免复制，请使用`const ref`or `auto ref`。但`const ref` *仍然*需要一个左值，所以除非你想复制你的函数，否则它通常比它的价值更烦人。虽然`auto ref`会避免复制左值（它基本上使得它有一个版本的函数，它接受一个`ref`左值，一个接受右值而不接受`ref`），它只适用于模板，限制了它的有用性。由于 D是可传递的，并且丢弃是未定义的行为，因此使用`const`可能会产生深远的影响`const``const`从变量中修改它。因此，虽然它通常很有用，但默认使用它可能会给您带来麻烦。

    Using`in`给你`scope`除了`const`，我通常不建议这样做。`scope`on function parameters 应该做到这一点，这样对该数据的引用就不会逃脱该函数，但是对它的检查尚未正确实现，因此您实际上可以在比应该合法的更多情况下使用它。在某些情况下`scope`是无价的（例如，使用委托，因为它使编译器不必为其分配闭包），但对于其他类型，它可能很烦人（例如，如果您传递一个数组 be `scope`，那么你不能从函数返回一个切片到该数组）。并且任何具有任何数组或引用类型的结构都会受到影响。虽然您不会收到很多关于错误使用的投诉`scope`现在，如果你一直在使用它，一旦它被修复，你肯定会遇到很多错误。此外，它对值类型完全没有意义，因为它们没有转义的引用。因此，在值类型（包括作为值类型的结构）上使用`const`和实际上是相同的。`in`

2.  `out`与它相同，`ref`只是它将参数重置为其`init`值，以便无论传入的变量的先前状态是什么，您总是得到相同的传入值。

3.  几乎总是就函数参数而言。当您有特定需要时，您可以使用`const`or `scope`or whatnot，但我不建议默认使用它们中的任何一个。

4.  当然可以。`ref`与类引用的概念是分开的。这是对传入变量的引用。如果我这样做

    ```
    void func(ref MyClass obj)
    {
        obj = new MyClass(7);
    }

    auto var = new MyClass(5);
    func(var); 
    ```

    `new MyClass(7)`然后 var 将在调用后引用新构造的`func`而不是`new MyClass(5)`. 您通过`ref`. 这就像获取引用的地址（如`var`）如何为您提供指向引用的指针而*不是*指向类对象的指针。

    ```
    MyClass* p = &var; //points to var, _not_ to the object that var refers to. 
    ```

5.  与类的处理相同。`ref`使参数引用传入的变量。例如

    ```
    void func(ref int[] arr)
    {
        arr ~= 5;
    }

    auto var = [1, 2, 3];
    func(var);
    assert(var == [1, 2, 3, 5]); 
    ```

    如果`func`不接受它的论点`ref`，则将`var`被切片，并且附加到`arr`不会影响`var`. 但是由于参数是`ref`，所以对 所做的任何事情`arr`都是对`var`。

6.  这完全取决于你。制作它`const`使您无法对其进行变异，这意味着如果您不打算对其进行变异，您可以避免意外变异它。它*也可能会*启用一些优化，但是如果您从不写入变量，并且它是一个内置的算术类型，那么编译器就知道它永远不会被更改，并且优化器应该能够进行这些优化（尽管它是否或不取决于编译器的实现）。

    `immutable`并且`const`在几乎所有情况下对于内置算术类型实际上都是相同的，所以就个人而言，`immutable`如果我想保证这样的变量不会改变，我只会使用它。一般来说，使用`immutable`而不是`const`if you can 可以为您提供更好的优化和更好的保证，因为它允许变量在线程之间隐式共享（如果适用）并且它*始终*保证变量不能被变异（而对于引用类型，`const`只是意味着该引用不能改变对象，而不是不能改变）。

    当然，如果你尽可能多地标记你的变量，那么它至少在某些时候确实有助于编译器进行优化，并且它可以更容易地捕获你无意中改变某些东西的错误`const`。`immutable`它还可以使您的代码更易于理解，因为您知道该变量不会发生变异。因此，自由地使用它们可能很有价值。但同样，根据类型使用`const`or`immutable`可能会受到过度限制（尽管这不是内置整数类型的问题），因此只需自动将所有内容标记为`const`or`immutable`可能会导致问题。

# ibm-mq - 使用 pub/sub WMQ 的简单队列分发场景

> ID：12181963
> 
> 赞同：2
> 
> 时间：2012-08-29T15:58:01.660
> 
> 标签：ibm-mq, publish-subscribe

使用 WebSphere MQ 我想设置一个使用队列的主题，以便当应用程序或入站集群连接尝试将消息放入“队列”时，它实际上使用了一个主题，并将其发布到 2 个订阅，它们本身2个单独的队列。本质上，我想按名称从入站队列中取出，但将其映射到 2 个单独的队列，例如

AF_TO_DAAS 是入站主题/今天是实际的集群队列别名

=> 转到 AF_TO_APP1 和
=> 转到 AF_TO_APP2

有点像我想这些是分发列表上的队列。

这两件事是本地队列。

我迷失在 /topic/node 业务中，将其映射到订阅和模型队列等等……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T16:18:01.900

WebSphere MQ 允许别名指向队列或主题。它还提供了一种以管理方式创建持久订阅的方法。要完成此设置，您可以通过将现有别名替换为指向某个主题的别名来连接这些点。然后使用两个管理订阅将发布路由到两个（或更多）队列。

```
* First, define the topic
DEFINE TOPIC('AF_TO_DAAS.TOPIC') +
   TOPICSTR('AF_TO_DAAS') +
   REPLACE

* Now, create an alias over the topic.
* Sending apps think this is a queue.
DEFINE QALIAS('AF_TO_DAAS') +
   TARGET('AF_TO_DAAS.TOPIC') +
   TARGTYPE(TOPIC) +
   REPLACE

* Queues for the two recvr apps
DEFINE QLOCAL('AF_TO_APP1') +
   REPLACE

DEFINE QLOCAL('AF_TO_APP2') +
   REPLACE

* Now set up adminsitrative subs to route
* messages to the two app queues.
DEFINE SUB('AF_TO_DAAS.SUB') +
   TOPICSTR('') +
   TOPICOBJ('AF_TO_DAAS.TOPIC') +
   DEST('AF_TO_APP1') +
   PSPROP(NONE) +
   REPLACE

DEFINE SUB('AF_TO_APP2.SUB') +
   TOPICSTR('') +
   TOPICOBJ('AF_TO_DAAS.TOPIC') +
   DEST('AF_TO_APP2') +
   PSPROP(NONE) +
   REPLACE 
```

因为这是一个发布，消息将包含一个`Top`包含主题字符串的属性。订阅条目中的`PSPROP(NONE)`导致它被抑制，因此消息看起来像原始发布。

另请注意，`MQMD.MsgID`出版物上的 与原始消息上的*不同。*

# php - 单个查询将从多个表中收集信息并根据不同表中的数据显示它

> ID：12181964
> 
> 赞同：2
> 
> 时间：2012-08-29T15:58:07.363
> 
> 标签：php, mysql

我有一个图像网站，用户可以在其中将图像上传到具有基本功能的公共组，例如喜欢等。我目前正在为所述组构建一个统计页面，理想情况下需要一个可以从所有图像中获取所有喜欢的单一查询在一组。

**表格**（下面有示例数据）

```
Group_images: ID | GROUP_ID | IMAGE_ID | TIMESTAMP
               1 |    1     |    10    | 1346256053

Likes: ID | USER_ID | IMAGE_ID | TIMESTAMP
        1 |    1    |   10     | 1346256090

Images : ID | HEADING | UPLOADER | FILENAME | EXT | TIMESTAMP
         10 | Cats    |    4     | 82375dss | .png| 134625400 
```

所以理论上它应该做这样的事情，

`group_images`在where = '$id'中搜索任何图像`group_id`--> 收集链接到该组的所有图像 -->通过搜索与第一个查询`likes`匹配的任何图像来搜索与该组关联的所有喜欢`image_id`.

我希望我已经说清楚了，如果没有，请随时提出更多问题，我会用您需要的更多详细信息更新问题。谢谢你。

**编辑** 我在表格下方添加了示例数据，我想要实现的是能够从组 id = 1 的所有喜欢中查看所有 user_id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:05:36.783

您想使用一个非常基本的 SQL 概念，称为 `JOIN`聚合（`COUNT`, `GROUP BY`，以及您现在不需要的大量其他概念）。

```
SELECT
   HEADING, UPLOADER, FILENAME, EXT, COUNT(Likes.*)
FROM
   Group_Images gi
   JOIN Images i ON (gi.IMAGE_ID = i.ID)
   JOIN Likes l ON (i.ID = l.IMAGE_ID)
WHERE
   gi.ID = ?
GROUP BY
   i.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:02:48.100

设法通过一个简单的子查询来做到这一点。感谢您的所有回答。

# ruby-on-rails - 未定义的方法 table_alias

> ID：12181969
> 
> 赞同：0
> 
> 时间：2012-08-29T15:58:20.093
> 
> 标签：ruby-on-rails, activerecord, gem, gemfile

启动我的 Rails 应用程序时，出现以下错误。有人可以提示我在哪里搜索错误吗？

```
undefined method `table_alias' for #<ActiveRecord::Relation:0x0000000339df20> 
```

这是我的 gemfile.lock

```
GEM
  remote: http://rubygems.org/
  specs:
    abstract (1.0.0)
    actionmailer (3.0.12)
      actionpack (= 3.0.12)
      mail (~> 2.2.19)
    actionpack (3.0.12)
      activemodel (= 3.0.12)
      activesupport (= 3.0.12)
      builder (~> 2.1.2)
      erubis (~> 2.6.6)
      i18n (~> 0.5.0)
      rack (~> 1.2.5)
      rack-mount (~> 0.6.14)
      rack-test (~> 0.5.7)
      tzinfo (~> 0.3.23)
    activemodel (3.0.12)
      activesupport (= 3.0.12)
      builder (~> 2.1.2)
      i18n (~> 0.5.0)
    activerecord (3.0.12)
      activemodel (= 3.0.12)
      activesupport (= 3.0.12)
      arel (~> 2.0.10)
      tzinfo (~> 0.3.23)
    activerecord-mysql2-adapter (0.0.3)
      mysql2
    activeresource (3.0.12)
      activemodel (= 3.0.12)
      activesupport (= 3.0.12)
    activesupport (3.0.12)
    antlr3 (1.8.12)
    arel (2.0.10)
    builder (2.1.2)
    composite_primary_keys (3.0.0.b3)
      activerecord (>= 3.0.1)
    erubis (2.6.6)
      abstract (>= 1.0.0)
    fast_xs (0.8.0)
    i18n (0.5.0)
    in_place_editing (1.2.0)
    jquery-rails (1.0.19)
      railties (~> 3.0)
      thor (~> 0.14)
    json (1.7.5)
    libxml-ruby (2.3.3)
    mail (2.2.19)
      activesupport (>= 2.3.6)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.19)
    mysql (2.8.1)
    mysql2 (0.3.11)
    net-sftp (2.0.5)
      net-ssh (>= 2.0.9)
    net-ssh (2.5.2)
    newrelic_rpm (3.4.1)
    nokogiri (1.5.5)
    polyglot (0.3.3)
    rack (1.2.5)
    rack-mount (0.6.14)
      rack (>= 1.0.0)
    rack-test (0.5.7)
      rack (>= 1.0)
    rails (3.0.12)
      actionmailer (= 3.0.12)
      actionpack (= 3.0.12)
      activerecord (= 3.0.12)
      activeresource (= 3.0.12)
      activesupport (= 3.0.12)
      bundler (~> 1.0)
      railties (= 3.0.12)
    railties (3.0.12)
      actionpack (= 3.0.12)
      activesupport (= 3.0.12)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (~> 0.14.4)
    rake (0.9.2.2)
    rdoc (3.12)
      json (~> 1.4)
    ruby-ole (1.2.11.4)
    rubyzip (0.9.9)
    simple_xlsx_writer (0.5.3)
      fast_xs (>= 0.7.3)
      rubyzip (>= 0.9.4)
    spreadsheet (0.7.3)
      ruby-ole (>= 1.0)
    surpass (0.1.0)
    thor (0.14.6)
    treetop (1.4.10)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.33)
    will_paginate (3.0.3)
    xsd_xml_parser (0.0.4)
      nokogiri (>= 1.5.0)

PLATFORMS
  ruby

DEPENDENCIES
  activerecord-mysql2-adapter
  antlr3
  composite_primary_keys (= 3.0.0.b3)
  in_place_editing
  jquery-rails
  json
  libxml-ruby
  mysql
  mysql2
  net-sftp
  net-ssh
  newrelic_rpm
  nokogiri
  rails (= 3.0.12)
  rubyzip
  simple_xlsx_writer
  spreadsheet
  surpass
  will_paginate
  xsd_xml_parser (= 0.0.4) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:59:40.830

首先要检查的是-您是否`table_alias`在任何地方调用该方法？也许你忘了定义那个函数......在项目目录上试试这个：

```
find . -type f | xargs grep "table_alias" 
```

这将在您的项目结构中的任何文件中找到该方法 - 如果它存在。

想到的另一种可能性是，由于这是 ActiveRecord，因此您还没有初始化数据库……您是否运行了`rake db`命令？例如，我们将 ActiveRecord 用于会话存储，所以初始化看起来像这样：

```
bundle exec rake db:create:sessions
bundle exec rake db:migrate 
```

还有一个`rake db:setup`命令。

# ckeditor - CKEditor中的CKFinder，当你点击链接时，只显示目标类型的文件夹

> ID：12181974
> 
> 赞同：0
> 
> 时间：2012-08-29T15:58:30.367
> 
> 标签：ckeditor, ckfinder

当您单击图像图标，然后单击“浏览服务器”按钮时，我只得到一个文件夹（图像文件夹）。但是当我点击“链接”按钮时，我得到了所有的文件夹。

当我单击链接按钮时，我希望仅查看特定文件夹

正如您将在下面的图片中看到的那样，我仅获得图像文件夹的时间是在 url 中有一个 type=Images 时。

因此，我通过尝试添加 type=*文件夹名称*或在 kcfinder 文件夹中的 config.php 中定义的某种类型，看到了可能的解决方案。

但话又说回来，我似乎无法找到生成链接的位置。我查看了 ckeditor/plugins/image/dialogs/images.js 和 ckeditor/plugins/link/dialogs/link.js

我得到的唯一线索就是这个

```
{
    type : 'button',
    id : 'browse',
    hidden : 'true',
    filebrowser : 'info:url',
    label : commonLang.browseServer
} 
```

但无论我改变了什么，它都没有工作。（我试图将 'info:url' 更改为某个 url 但没有成功）

这是图片，也许我回家后会更新我的问题（15-20 分钟内）。很抱歉图片中的大写字母，试图使文本更易于阅读。问任何问题，我知道我的问题可能听起来令人困惑，我会在回来时回答。现在的图片

![希望这可以帮助](../Images/be382436726493c9176bd2a15770f4b8.png)

编辑：谢谢 AlfonsoML。您的回答使我朝着正确的方向前进，我有一个名为 Link2 的自定义插件，它应该指向文件夹“文件”

我是这样做的

```
$ckeditor->config['filebrowserLink2BrowseUrl'] = '/ckfinder/ckfinder.html?type=Files'; 
```

起初我认为这不适用于自定义插件，但事实证明确实如此！再次感谢您，希望我的编辑可以帮助其他有同样问题的人:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:01:06.123

您可以使用 CKFinder 的手动集成来更改发送的类型，而不是使用辅助函数。只需查看此[文档](http://docs.cksource.com/CKFinder_2.x/Developers_Guide/PHP/CKEditor_Integration#Manual_Integration)并根据您的需要进行调整：

```
$ckeditor = new CKEditor();
$ckeditor->basePath = '/ckeditor/';
$ckeditor->config['filebrowserBrowseUrl'] = '/ckfinder/ckfinder.html';
$ckeditor->config['filebrowserImageBrowseUrl'] = '/ckfinder/ckfinder.html?type=Images';
$ckeditor->config['filebrowserFlashBrowseUrl'] = '/ckfinder/ckfinder.html?type=Flash';
$ckeditor->config['filebrowserUploadUrl'] = '/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files';
$ckeditor->config['filebrowserImageUploadUrl'] = '/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images';
$ckeditor->config['filebrowserFlashUploadUrl'] = '/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Flash';
$ckeditor->editor('CKEditor1'); 
```

# linux - 使用 rsync 仅复制文件引用

> ID：12181979
> 
> 赞同：1
> 
> 时间：2012-08-29T15:58:50.150
> 
> 标签：linux, rsync

我正在尝试同步两个目录，但有一个问题：如果源中存在相应的完整文件，我希望我的目标文件夹具有零字节文件。这可能使用 rsync 还是有任何其他 linux 替代方案？

# c# - 检索 C# 文件中使用的变量名称列表

> ID：12181987
> 
> 赞同：1
> 
> 时间：2012-08-29T15:59:20.703
> 
> 标签：c#

我想知道是否有一种方法可以编写一个方法来返回 C# 文件中使用的所有变量名。甚至可能吗？有人做过这样的事吗？我想要一个变量名列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T16:01:09.583

是的。

您必须使用[Roslyn](http://www.microsoft.com/en-us/download/details.aspx?id=27746)将`C#`代码文件解析为语法树，并在语义分析后检索您需要的变量。

在这里可以找到更多关于如何做到这一点的例子：

[入门：语义分析 - C#](http://msdn.microsoft.com/en-us/vstudio/hh543918.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T16:00:56.633

如果您尝试从已编译的 DLL 或 EXE 执行此操作，那么不，这是不可能的。

虽然您可以使用[反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.110%29.aspx)来检索类型的成员名称以及类型的字段或属性，但局部变量名称不会编译到 IL 中。没有办法找回它们，因为它们不再存在。

[正如Tigran](https://stackoverflow.com/a/12182016/65358)所解释的，可以通过 Rosyln 从 .CS 文件执行此操作。

# mysql - 单个大数据文件与每个表多个数据文件的 Innodb 的 MySql 性能

> ID：12181988
> 
> 赞同：0
> 
> 时间：2012-08-29T15:59:21.227
> 
> 标签：mysql, innodb

通过在文件中设置以下内容，InnoDB 允许选择对所有内容使用单个数据文件或每个表使用一个数据`my.cnf`文件：

```
 [mysqld]
 innodb_file_per_table 
```

比较 8 个数据库和 20 个表，一个 60G 的 ibdata 文件与一个相当均匀分布的 60G 的 160 个单独的数据文件在一个表设置中，一个设置通常比另一个设置具有更好的性能吗？是否有任何考虑会支持一种方法而不是另一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:21:46.490

对其进行基准测试！我们不知道您的典型使用模式或查询类型（完整扫描？基于索引的狭窄查找？大量更新或几乎只读？）。

`innodb_file_per_table`更易于维护——例如，您可以在清理和优化单个表后恢复磁盘空间；默认的一个大文件只会增长。

# javascript - 如何使用 javascript 调试换行问题

> ID：12181992
> 
> 赞同：0
> 
> 时间：2012-08-29T15:59:30.950
> 
> 标签：javascript, json

我正在维护这个网站，它接受来自用户的多行输入并通过 JSON 发送数据。换行符 \n 被正确解码和编码，但不知何故 \r 字符在服务器端不被接受，我觉得我需要在发送它们之前将它们转义。在进行修复之前，我想尝试重现该问题，但我找不到解决方法！！！！

你有什么建议？

**经过更多调查后编辑**，事实证明问题仅存在于 IE 中（因为在复制/粘贴到文本输入时添加了 \r 字符）。劫持文本区域并没有改变 FF 或 chrome 中的任何内容，并且执行 data.description.replace("\r","") 也没有解决问题。还在兜兜转转。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T16:06:43.083

如果你只是想重现错误，只需添加一些js来填充textarea：

`document.getElementById('textarea-id').value = 'test\r\ntest';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:22:30.057

[Chrome 的开发者工具的 Javascript](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC4QFjAA&url=https://developers.google.com/chrome-developer-tools/docs/overview&ei=kUE-ULKmEKzM6QHRy4CYDg&usg=AFQjCNGeyBcJRaZkKlI2mtA1ROibAEsV2Q&sig2=rYbkhg_umR1rste2SeQrKw)控制台允许您使用友好的 jQuery/MooTools/Protoype 语法将 JSON 发送到您的服务器

# android - 操作栏主页后退按钮可绘制选择器

> ID：12181994
> 
> 赞同：2
> 
> 时间：2012-08-29T15:59:41.917
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在尝试通过

```
<item name="homeAsUpIndicator">@drawable/action_bar_home_as_up_indicator</item> 
```

在样式中。其中 action_bar_home_as_up_indicator 是一个可绘制的 xml，选择器状态为按下并默认，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T00:45:05.627

你可能想添加 android 命名空间试试

```
<item name="android:homeAsUpIndicator">@drawable/action_bar_home_as_up_indicator</item> 
```

# html - Firefox 将 HTML 页面显示为代码

> ID：12181999
> 
> 赞同：0
> 
> 时间：2012-08-29T15:59:55.863
> 
> 标签：html, firefox

我正在学习开发一个简单的 Facebook 应用程序的教程，但示例代码在 Firefox 中无法运行（在 IE 中运行良好）——它实际上只是在一行中显示代码。

完整的代码在这里，如果它有帮助 - [http://pastebin.com/YggfCQEH](http://pastebin.com/YggfCQEH)

谁能告诉我为什么这不起作用？我毫不怀疑这是非常简单的事情，但我无法发现问题所在。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:02:02.290

您的服务器很可能返回 mime/type `text/plain`。文件名是什么？很有可能，如果不是，`.html`或者`.htm`这就是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:06:22.807

这里的问题是编码是 UTF-8，显然 Firefox 不喜欢这样。将编码更改为 ANSI 可以解决问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-29T16:12:39.873

也许您可以尝试在该服务器上找到其他一些工作页面，并检查正确生成的文件扩展名是什么，然后使用与该扩展名相同的扩展名重命名您的文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-29T16:26:44.767

Firefox 在查看菜单中有一个选项，您可以检查。查看>页面样式，如果没有选择样式，FF 将禁用所有 CSS，只留下 html，这是我的第一个猜测。（我只建议这样做，因为你说它是唯一的 FF，而这在前几天解决了一个朋友的问题......）

你的代码看起来不错，但是 js 文件中可能有一些东西把它搞砸了......我会仔细检查 functions.js 是否有任何奇怪的东西。