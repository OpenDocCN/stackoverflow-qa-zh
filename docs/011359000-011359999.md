# StackOverflow 问答 11359000-11359999

# pusher - 当所有的工作都是绑定时，在 Pusher 中实现监听器？

> ID：11359000
> 
> 赞同：0
> 
> 时间：2012-07-06T08:55:34.443
> 
> 标签：pusher

我正在尝试使用 pusher 在 javascript 中创建模块化应用程序。不同的模块需要绑定到同一个推送事件，有时该事件嵌套在另一个事件中。此外，这些模块会根据用户触发的 DOM 事件在不同时间加载。

所以，如果一个模块有一些代码，比如

```
env.pusher.connection.bind('connected', function() { 
    env.my_channel.bind('private_message',function(data){ ... }
} 
```

另一个模块出现并想要收听相同的`private_message`事件。如果我编写相同的代码会发生什么情况是第一个绑定被覆盖。

我正在寻找的是一种实现某种侦听器的方法，可能带有从通道事件中删除侦听器的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:31:17.813

我自己想了一个解决办法。它包括以下步骤：

*   保留推送事件的字典
*   每个想要使用推送事件的模块都应该首先搜索字典以查看该事件是否存在，如果不存在，则编写第一次创建绑定的代码并将其添加到字典中

*   当一个模块第一次创建绑定时，它还应该触发一个自定义事件并将推送器在推送器事件完成时发送的数据传递给它

*   每个想要使用 pusher 事件的模块都应该为触发 pusher 事件时触发的自定义事件添加一个处理程序

如果这看起来很难理解，这是模块中的一些代码，它是我问题中代码的重写（我使用了 jQuery，因为 jQuery 很简洁并且已经实现了自定义事件）：

```
if (typeof(env.pusher_events['my_channel']['private_message']) == 'undefined'){
    env.pusher_events['my_channel']['private_message'] = true;

    // 'pusher-connected' is defined in another module
    // this module depends on that event but for brevity
    // I'm not defining the 'connected' event here

    $(document).on('pusher-connected', 'body', function(){
        env.my_channel.bind('private_message', function(data){
            $('body').trigger('pusher-my_channel-private_message', data);
        })
    })
}

$(document).on('pusher-my_channel-private_message', 'body', function(data){
    // do something useful with the data
} 
```

希望得到一些反馈（缺点等）

# ios - 新的 iOS 团队成员：没有有效的签名身份

> ID：11359001
> 
> 赞同：13
> 
> 时间：2012-07-06T08:55:46.413
> 
> 标签：ios, xcode, distribution, provisioning

这越来越令人沮丧。我有两个身份，一个旧的，一个新的，后者应该用于将iOS应用部署到App Store。

我创建了新用户，授予他管理员访问权限，然后我创建了应用程序名称和配置文件。但是，在 Organizer 中，我看到**Dev**条款完美无缺，而**Deploy**配置文件向我显示了可怕的错误：

*未找到有效的签名身份*。

怎么会这样？

好吧，我看到在 iOS Provisioning Portal 的*Certificates*部分中，只有一个分发证书，属于我公司的那个。

有没有办法让新用户在**不**访问 uberadmin 的 Xcode 的情况下创建应用程序？

谢谢和干杯！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-06T09:09:14.753

您需要用于为您的公司创建分发证书的密钥。

还记得您创建开发人员证书的时间吗？然后你去钥匙串->证书助手->从...请求证书

当您执行此操作时，您的 Mac 将您的证书请求与钥匙串中的密钥配对。处理完您的开发人员证书并将其下载到您的计算机后，您的计算机就可以通过该密钥访问它。

但是，如果您没有创建公司拥有的分发证书，则您的计算机上没有密钥。

**查看钥匙串中的证书：**

*   转到“证书”并展开您的开发者证书——它会有一个带有您名字的小钥匙。
*   现在尝试扩展您的分发证书 - 它*不会*有密钥，对吗？

如果是这种情况，您有两种选择：

1.  请创建分发证书的人从他的钥匙串中导出它。这将创建一个包含证书和密钥的文件。

2.  删除当前的分发证书，并从您的计算机创建一个新的证书签名请求，这会将其连接到您拥有的密钥。

第一种方法需要访问“Uberadmins”计算机。第二个需要管理员访问您的团队 Apple 帐户。使用方法 2 通常没有缺点，因为无论如何都需要不时创建新证书。它不会影响已经发布的应用程序，只是即将发布的版本和更新需要使用最新的证书。

完成所有这些后，您需要为 App Store 创建分发配置文件并连接到您要使用的分发证书。（如果您选择选项 1，您可能已经这样做了）。

将配置文件下载到您的计算机，安装它，然后在您的应用程序中，选择使用此配置文件进行构建以进行分发构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:31:43.757

根据苹果的文档：

> 团队的分发证书允许开发人员构建用于分发的应用程序。如果您的团队想要使用另一台 Mac 来创建分发版本，您需要按照 iOS 工具工作流程指南中的“保护和传输您的签名和配置资产”中的说明传输分发证书的副本。（来自[管理分发证书](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/ManaginganiOSDistributionCertificate/ManaginganiOSDistributionCertificate.html#//apple_ref/doc/uid/TP40011159-CH26-SW1)）

因此，为了让多个用户能够创建和提交 App Store 构建，您必须在他们之间共享一个私钥。

为团队创建一个新的私钥，然后将该私钥发送给需要它的每个人。按照[使用钥匙串访问生成证书签名请求](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/ManaginganiOSDistributionCertificate/ManaginganiOSDistributionCertificate.html#//apple_ref/doc/uid/TP40011159-CH26-SW1)下的说明进行操作。

另请参阅：[在 itune 配置门户中的团队帐户下的不同组之间共享用于分发证书的私钥的任何问题](https://stackoverflow.com/questions/10305616/any-concern-to-share-private-key-for-distribution-certificate-among-different-gr)

# c++ - 为什么这段代码不能编译？

> ID：11359002
> 
> 赞同：0
> 
> 时间：2012-07-06T08:55:46.420
> 
> 标签：c++, constructor, constants, move-semantics

使用`const`，如注释所示，msvc 11 和 g++ 4.7.0 拒绝编译：

```
#include <memory>       // std::unique_ptr
#include <utility>      // std::move
using namespace std;

struct CommandLineArgs
{
    typedef unique_ptr<
        wchar_t const* const [],
        void(*)( wchar_t const* const* )
        > PointerArray;

    //PointerArray const  args;         // Oops
    PointerArray        args;
    int const           count;

    static wchar_t const* const* parsed(
        wchar_t const       commandLine[],
        int&                count
        )
    {
        return 0;
    }

    static void deallocate( wchar_t const* const* const p )
    {
    }

    CommandLineArgs(
        wchar_t const   commandLine[]   = L"",
        int             _               = 0
        )
        : args( parsed( commandLine, _ ), &deallocate )
        , count( _ )
    {}

    CommandLineArgs( CommandLineArgs&& other )
        : args( move( other.args ) )
        , count( move( other.count ) )
    {}
};

int main()
{} 
```

错误消息似乎不是特别有用，但这里是 g++ 的输出：

```
main.cpp：在构造函数“CommandLineArgs::CommandLineArgs(CommandLineArgs&&)”中：
main.cpp:38:38：错误：使用已删除的函数 'std::unique_ptr::unique_ptr(const std::unique_ptr&) [w
i _Tp = 常量 wchar_t* 常量；_Dp = void (*)(const wchar_t* const*); std::unique_ptr = std::unique_ptr]'
在 c:\program files (x86)\mingw\bin\../lib/gcc/mingw32/4.7.0/include/c++/memory:86:0 包含的文件中，
                 来自 main.cpp:1：
c:\program files (x86)\mingw\bin\../lib/gcc/mingw32/4.7.0/include/c++/bits/unique_ptr.h:402:7：错误：在此声明

```

为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T09:17:47.387

你不能移动 const 对象。该错误是因为您的移动构造函数。

unique_ptr 已删除声明为的复制构造函数和移动构造函数：

```
unique_ptr( const unique_ptr & other );
unique_ptr( unique_ptr && other ); 
```

由于您的 unique_ptr 已声明为 const，因此它选择复制构造函数，而不是移动构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:00:47.153

没有具有签名的副本 c-tor unique_ptr(const unique_ptr&);

# sql - SQL Server 存储过程参数分配

> ID：11359003
> 
> 赞同：0
> 
> 时间：2012-07-06T08:55:47.493
> 
> 标签：sql, sql-server-2008, stored-procedures

为什么不能使用函数直接分配存储过程参数？

例如

```
exec myStoredProc @firstParam = aFunctionThatReturnsAnAppropriateValue() 
```

但我发现我必须标记一个变量才能保存该值

```
declare @temp type = aFunctionThatReturnsAnAppropriateValue()

exec myStoredProc @firstParam = @temp 
```

这似乎是多余的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:43:33.563

引用[EXECUTE (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms188332%28v=sql.105%29.aspx)：

```
Execute a stored procedure or function
[ { EXEC | EXECUTE } ]
    { 
      [ @return_status = ]
      { module_name [ ;number ] | @module_name_var } 
        [ [ @parameter = ] { value 
                           | @variable [ OUTPUT ] 
                           | [ DEFAULT ] 
                           }
        ]
      [ ,...n ]
      [ WITH RECOMPILE ]
    }
[;] 
```

您可以看到它明确表示`@variable`or `value`。我想这是一种语言限制，因为您既不能将函数调用写为变量也不能写为值；它是可执行代码（一个*表达式*），变量声明期间的简写赋值只是一种误导性的奖励。

编辑：比较 和 的描述`DECLARE`差异`EXECUTE`：

为了`DECLARE`

> *=value*
> 为内联变量赋值。该值可以是常量**或表达式**，但它必须与变量声明类型匹配，或者可以隐式转换为该类型。

浏览页面时`EXECUTE`，我没有看到提及表达式。在我看来，这会很*方便*，正如我认为您试图指出的那样。

# ant - 如何在ant中取消定义环境变量

> ID：11359009
> 
> 赞同：0
> 
> 时间：2012-07-06T08:55:57.493
> 
> 标签：ant, environment-variables

我正在运行 Ant 来执行另一个进程。这个其他进程存在一些环境变量的问题。我希望在执行其他进程时未定义这些环境变量。

当然，我可以在运行 Ant 之前取消定义环境变量。但是，我有兴趣在执行其他进程之前取消定义 Ant 中的变量。

所以我在调用 Ant 时有一个环境：

```
SOME_VAR=a-value 
```

我在我的 build.xml 中有：

```
..<exec exacutable="program.exe>... 
```

`SOME_VAR`而我的 program.exe 对已定义的事实感到窒息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:04:35.093

exec 任务有一个`newenvironment`属性，当设置为`true`清除当前环境时。与嵌套`env`元素一起使用。

# c# - 多线程委托问题，需要方法名称吗？

> ID：11359013
> 
> 赞同：0
> 
> 时间：2012-07-06T08:56:09.103
> 
> 标签：c#, winforms, multithreading, delegates, threadpool

是的，这是我第一次尝试多线程，所以可能是我想念的非常简单的事情，但是这里......

我正在使用线程池同时启动一堆短时间运行的进程，每个进程都将传递一个 URL 以处理/抓取 fb-tweets-google-plusones 并`ReportProgress`通过调用委托将结果返回给我的方法，`ThreadDone`但是当线程完成处理后传入已处理的对象时，我不断收到错误`Method name expected`但我正在传入方法`ReportProgress`？我愿意打赌（希望）这是一件非常简单的事情，更有经验的人可以立即发现。这是我到目前为止所拥有的：

委托定义：

```
public delegate void ThreadDone(object sender, ScrapeResult scrapedResult); 
```

做工作：

```
public void DoWork(object sender)
{
      while (true)
      {
          //lock the thread to prevent other threads from processing same job
          lock (_threadLock)
          {   
              string url = (string)sender;
              result.URL = url;

              if (chkFb.Checked)
              {
                  result.Shares = grabber.GetFacebookShares(url);
              }
              if (chkTwitt.Checked)
              {
                  result.Tweets = grabber.GetTweetCount(url);
              }
              if (chkPlusOne.Checked)
              {
                  result.PlusOnes = grabber.GetPlusOnes(url);
              }

              this.Invoke(new ThreadDone(ReportProgress(sender, result))); //ERROR is on this line
           }
           Thread.Sleep(100);
        }
} 
```

报告进度：

```
private void ReportProgress(object sender, ScrapeResult scrapedResult)//<-- might not need?
{
     progressBar.Value++;
     ScrapeResult result = (ScrapeResult)sender;//ScrapedResult result = scrapedResult;
     outputGrid.Rows.Add(result.URL, result.Shares, result.Tweets, result.PlusOnes);
     outputGrid.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill;
     outputGrid.AutoResizeColumns(DataGridViewAutoSizeColumnsMode.DisplayedCells);
} 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:59:06.467

改变这个：

```
this.Invoke(new ThreadDone(ReportProgress(sender, result))); 
```

至：

```
this.Invoke(new ThreadDone(ReportProgress), sender, result); 
```

的第一个参数`Invoke()`是委托，要构建委托，您不需要提供其参数，而只需提供要调用的方法（这就是编译器说“预期方法名称”的原因）随着`new ThreadDone(ReportProgress)`您创建新委托并使用第二个和第三个参数`Invoke()`您指定将传递给您的委托的参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T09:01:48.193

我会认真考虑使用[TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)。更清洁地处理任务的完成。

# c# - 我无法从 github 构建 AwesomiumSharp 版本

> ID：11359018
> 
> 赞同：1
> 
> 时间：2012-07-06T08:56:16.993
> 
> 标签：c#, .net, visual-studio-2010

有人使用[https://github.com/khrona/AwesomiumSharp](https://github.com/khrona/AwesomiumSharp)吗？我正在尝试构建 AwesomiumSharp，但出现以下错误：

`Error 2 The command "XCOPY ..........\build\bin\release\icudt42.dll "C:\Users\demo\Desktop\July2012\khrona-AwesomiumSharp-423f277\AwesomiumSharp\bin\x86\Debug\" /i /y XCOPY ..........\build\bin\release\avcodec-52.dll "C:\Users\demo\Desktop\July2012\khrona-AwesomiumSharp-423f277\AwesomiumSharp\bin\x86\Debug\" /i /y XCOPY ..........\build\bin\release\avformat-52.dll "C:\Users\demo\Desktop\July2012\khrona-AwesomiumSharp-423f277\AwesomiumSharp\bin\x86\Debug\" /i /y XCOPY ..........\build\bin\release\avutil-50.dll "C:\Users\demo\Desktop\July2012\khrona-AwesomiumSharp-423f277\AwesomiumSharp\bin\x86\Debug\" /i /y XCOPY ..........\build\bin\release\Awesomium.dll "C:\Users\demo\Desktop\July2012\khrona-AwesomiumSharp-423f277\AwesomiumSharp\bin\x86\Debug\" /i /y XCOPY ..........\build\bin\release\AwesomiumProcess.exe "C:\Users\demo\Desktop\July2012\khrona-AwesomiumSharp-423f277\AwesomiumSharp\bin\x86\Debug\" /i /y XCOPY ..........\build\bin\Release\locales\en-US.dll "C:\Users\demo\Desktop\July2012\khrona-AwesomiumSharp-423f277\AwesomiumSharp\bin\x86\Debug\locales\" /i /y`

`XCOPY ..........\build\bin\debug\Awesomium_d.dll "C:\Users\demo\Desktop\July2012\khrona-AwesomiumSharp-423f277\AwesomiumSharp\bin\x86\Debug\" /i /y XCOPY ..........\build\bin\debug\AwesomiumProcess_d.exe "C:\Users\demo\Desktop\July2012\khrona-AwesomiumSharp-423f277\AwesomiumSharp\bin\x86\Debug\" /i /y " exited with code 4\. AwesomiumSharp`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:06:28.110

XCOPY 命令位于构建事件选项卡上的启动项目属性中，您需要修改磁盘或删除它们（取决于它们在做什么，我不确定。）

我猜的 Mono 项目也是如此.....

![在此处输入图像描述](../Images/41a8749246c0db76c96210234faca6e8.png)

- - - - - - - - - - 编辑 - - - - - - - - - - -

我设法让它编译代码，我按照自述文件并将 SDK 安装在我的 D:\

然后，我将自述文件所在文件夹中的源代码复制到以下文件夹中：

```
D:\Awesomium\1.6.6\wrappers\Awesomium.NET\AwesomiumSharp 
```

然后我进入属性并在 xcopy 源路径前面添加了一个额外的 ..\ 以便它进入正确的文件夹，现在它可以编译了。

![在此处输入图像描述](../Images/70e73d0419d9f1ae21bedfedd6ecc3c3.png)

然后应该从这里复制它：

![在此处输入图像描述](../Images/bf1a117b1280aed9870ddb1de424d0c3.png)

祝你好运！

# c# - 正则表达式在标签之间多次出现文本

> ID：11359020
> 
> 赞同：1
> 
> 时间：2012-07-06T08:56:24.320
> 
> 标签：c#, regex

我需要得到一个只包含一对已定义标签***之间的文本的字符串，以及一个由******包含***标签的文本组成的字符串。由于文本位于 HTML**`<p>`**标记中，因此**<**和**>**被解释为`&lt;`和`&gt;`（据我所知，这使得无法使用像 HTML Agility Pack 这样的解析器）

所以输入字符串看起来像这样：

```
Text outside of tags
&lt;internal&gt;    First occurance of text inside of tags    &lt;/internal&gt;
More text outside of tags
&lt;internal&gt;    Second occurance     &lt;/internal&gt; 
```

我现在正在使用以下代码，但它只出现第一次而不是第二次：

```
Regex regex = new Regex(@"(&lt;internal&gt;(.*?)&lt;/internal&gt;)", RegexOptions.Singleline);
MatchCollection matches = regex.Matches(inputString);

foreach (Match match in matches)
{
    string outerMatch = match.Groups[1].Value;
    string innerMatch = match.Groups[2].Value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:59:17.703

又是这样的问题。

不要使用正则表达式来识别标签。正则表达式是无状态的，不能与 HTML 或 XML*正确操作。*为此，您需要使用解析器。

使用[敏捷包](http://htmlagilitypack.codeplex.com/)进行 HTML 解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:54:02.987

哦，代码确实有效。它没有选择第二次出现的原因是在某些情况下，创建插入的文档和标签内文本的标签的编辑器，这使得正则表达式无法匹配它。我将正则表达式更改为：

```
Regex regex = new Regex(@"(&lt;.*?internal.*?&gt;(.*?)&lt;.*?/.*?internal.*?&gt;)", RegexOptions.Singleline); 
```

不管怎么说，还是要谢谢你！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T09:05:04.677

使用`\<`and`\>`代替`&lt;`and`&gt;`

像这样：

```
(\<internal\>(.*?)\</internal\>) 
```

# c - 我应该如何读取或写入 APIC 寄存器“APIC_ICR”？

> ID：11359021
> 
> 赞同：1
> 
> 时间：2012-07-06T08:56:25.070
> 
> 标签：c, linux, linux-kernel, hardware, driver

这是代码：

```
static int __init test3_init(void)
{
   uint64_t v,i;
   for (i=0;i<10;i++)
   {
       v= native_x2apic_icr_read();
       printk("v=%llx\n",v);
   }
   return 0;
} 
```

结果如下：

```
[ 6658.458919] v=9a557fd8
[ 6658.458925] v=1d
[ 6658.458928] v=17
[ 6658.458930] v=17
[ 6658.458932] v=17
[ 6658.458935] v=17
[ 6658.458937] v=17
[ 6658.458939] v=17
[ 6658.458942] v=17
[ 6658.458944] v=17 
```

为什么连续读取这个寄存器的值是这样的。前两个是不同的，但其余的是相同的。

我的最终目标是重置此寄存器中的 APIC_DM_NMI(0x00400)，但如果值不一致，那么重置位的意义何在？有人告诉我重置这个位 APIC_DM_NMI 可以从 APIC 启用 NMI，我不知道，我完全是新手。如果有人可以提供有关此 MSR 的任何信息，以及如何正确操作它，我们将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:26:29.363

不知何故，我觉得稳定值（即 0x17）似乎是一个更“正常”的值。这些输出可以重复吗？我的意思是，前两个总是不同的，并且从 3 开始稳定？

这是[Pentium Processor System Architecture (page 395)](http://books.google.com.hk/books?id=TVzjEZg1--YC&pg=PA370&lpg=PA370&dq=APIC+interrupt+command+register&source=bl&ots=iA4yONC0H5&sig=kkf8GULA30AALQfo34NO2zSbwCs&hl=en&sa=X&ei=9bj2T531FIfeigfukq30Bg&redir_esc=y#v=onepage&q=%20interrupt%20command%20register&f=false)中对 ICR 寄存器的描述，我没有看到任何关于阅读此寄存器的注意事项。 ![在此处输入图像描述](../Images/d97af5f83dbc7d16521a27bfa35952c1.png)

仅供参考，这是我从[讲义中](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFIQFjAA&url=http%3A%2F%2Fwww.cs.usfca.edu%2F~cruse%2Fcs630f06%2Flesson24.ppt&ei=nbf2T6WcB4uyiQeU45iBBw&usg=AFQjCNEyP2BWdEM0vJpBxFsdk4f4DMS39g&sig2=thlervRxQGOiLOz3ej6VoQ)找到的 ICR 寄存器位规范： ![ICR 高 32 位](../Images/3bb2cfb5c14072c91a61273c6fd3e03b.png) ![ICR 低 32 位](../Images/4bfb494e81049201f11f7e6bc361b01b.png)

# foreach - foreach中的输入框在淘汰赛中无法正确绑定，仅在IE中

> ID：11359026
> 
> 赞同：0
> 
> 时间：2012-07-06T08:56:56.660
> 
> 标签：foreach, knockout.js

我见过一些人遇到类似的问题，但没有解决方案。我有一个看起来像的视图模型

```
var House = function() {
    this.houseName = ko.observable("");
    this.reports = ko.observableArray([]);

    this.addReport = function() { this.reports.push(new Report) }.bind(this);
} 
```

并且“报告”被填充 - 在 House.addReport() - 与

```
var Report = function() {
     this.reportname = ko.observable("");
     this.sensor_id = ko.observable(0);
} 
```

HTML看起来像（简化）

```
<input type="text" data-bind="value: houseName">
<div data-bind="foreach: reports">
    <input type="text" data-bind="value: reportname"><select data-bind="value: sensor_id" />
</div> 
```

所以，对于问题。当我在 foreach 之外填写 houseName 时，模型更改正常（我在调试 DIV 中不断看到它）。当我触发 addReport 方法时，UI 会按照它的指示执行并添加一个文本框和一个选择。但是只有选择的更改实际上会更改模型 - 而不是文本框的更改！最奇怪的是，它似乎在 IE 中有效，但在 Chrome 中无效。

很可能是我错过了 IE 的幕后处理 - 但错误是什么？

**编辑** 这个[jsfiddle](http://jsfiddle.net/rniemeyer/gZC5k/)似乎瞄准了几乎完全相同的目标 - 没有我的问题。

**重新加载编辑**它在 Firefox 中也不起作用。但是，它似乎在 JSFiddle 中工作正常！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:50:00.573

我很抱歉 - Jeff 对没有复制足够代码的分析是正确的（在这里复制太多了！）无论如何，我的错误是在我的代码深处（甚至在 Knockout 进入图片之前），我处理了“更改”事件以了解表单何时变脏 - 从而劫持了对 Knockout 业务很重要的事件！请注意，其他可能会想到相同解决方案的人！我看到 RP Niemeyer 在[这里](http://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html)解决了这个问题。

# arm - ARM上的wvdial错误

> ID：11359027
> 
> 赞同：1
> 
> 时间：2012-07-06T08:56:57.440
> 
> 标签：arm, debian, 3g

我在 ARM9 板上安装了 debian 6.0 和 3.3.3 内核，昨天我重新编译了很多次以查看我的华为 E353 3G USB 调制解调器。

现在，当我运行 wvdialconf 时，在 /dev/ttyUSB0 上检测到调制解调器

在我配置 /etc/wvdial.conf 后，我运行 wvdial 并得到这样的错误：

```
--> WvDial: Internet dialer version 1.60
--> Initializing modem.
--> Sending: ATZ
ATZ
OK
--> Sending: ATQ0 V1 E1 S0=0 &C1 &D2 +FCLASS=0
    ATQ0 V1 E1 S0=0 &C1 &D2 +FCLASS=0
OK
--> Sending: AT+CGDCONT=1, "IP","internet"
    AT+CGDCONT=1, "IP","internet"
OK
--> Modem initialized.
wvdial: utils/wvtask.cc:202: WvTaskMan::WvTaskMan(): Assertion `getcontext(&get_stack_return) == 0' failed.
Aborted 
```

我不知道接下来要做什么...

是否有任何其他拨号器可以在命令行 ARM 上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:37:50.477

你可以使用`chat`.

在`/etc/ppp/chatscripts`中，您会发现几个处理调制解调器初始化和拨号的脚本；`ATZ`只需初始化 ( )、设置 APN 信息 ( `AT+CDGCONT=1,"IP","internet"`) 然后使用 PPP 仿真 ( ) 切换到数据模式的最小脚本应该没问题`AT+CGDATA="PPP"`。除了最后一个命令之外的所有命令都应该返回`OK`，数据连接应该给出`CONNECT`。Wavecom 有一些[很好的](http://www.wireless-products.dk/PDF-filer/RF-Solution-PDF/GPRS%20AT%20Command%20List.pdf)在线文档。

聊天脚本应该在您使用的 PPP 配置中被引用，这可以在`/etc/ppp/peers`; 在那里进行配置后，您可以启用链接，`pon`后跟配置名称。

# android - 手机关机时如何启动闹钟

> ID：11359028
> 
> 赞同：2
> 
> 时间：2012-07-06T08:57:01.830
> 
> 标签：android

在我的应用程序中，我使用`AlarmManager`类来设置闹钟。为了在手机重启后触发警报，我使用了`BroadcastReceiver`. 一切正常，我的警报会定期触发。现在问题出现在这种情况下：

假设我现在的时间是**2:30 pm**并且我将闹钟设置在**2:35 pm**。之后，我关掉了手机。当我打开手机一个小时后，没有弹出闹钟作为设置闹钟的时间。发生这种情况是因为当前时间超过了我设置闹钟的时间。要解决这个问题我应该怎么做。我已经在`AlarmManager`课堂上发布了设置警报的代码。请帮我解决这个问题

```
public class AlarmReceiver extends BroadcastReceiver {
    @SuppressWarnings("static-access")
    @Override
    public void onReceive(Context context, Intent intent) {
        if(intent.getAction().equals("android.intent.action.BOOT_COMPLETED")) {
            Intent myIntent = new Intent(context, MyAlarmService.class); 
            PendingIntent pendingIntent = PendingIntent.getService(context, i, myIntent, i);                            
            AlarmManager alarmManager = (AlarmManager)context.getSystemService(context.ALARM_SERVICE);
            Calendar calendar = Calendar.getInstance(); 
            calendar.setTimeInMillis(System.currentTimeMillis()); 
            calendar.add(Calendar.MILLISECOND, (int) Utilities.diff(NoteManager.getSingletonObject().getAlarmTime(i)));                 
            alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);
        }
    }
}

public static long diff(Date date) {
    long difference = 0;
    try {
        // set current time
        Calendar c = Calendar.getInstance();
        difference = date.getTime() - c.getTimeInMillis();
        if (difference < 0) {
            // if difference is -1 - means alarm time is of previous time then current
            // then firstly change it to +positive and subtract form 86400000 to get exact new time to play alarm
            // 86400000-Total no of milliseconds of 24hr Day
            difference = difference * -1;
            difference = 86400000 - difference; 
        }
    } 
    catch (Exception e) {
        e.printStackTrace();
    }
    return difference;
} 
```

**在清单文件中**

```
<receiver android:name=".AlarmReciever">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver>
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:15:13.430

更好的方法是将警报详细信息存储在数据库中，并在启动时通过广播接收器检索它，就像你说你实现了一个一样。一旦通知从数据库中删除详细信息。这样你就可以跟踪你所有的警报。即使您可以在启动时启动服务并执行此操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:15:59.950

Android中的闹钟应用程序也是如此，如果您的手机关机并且有闹钟响起，它会使您的手机开机，响起闹钟并再次进入睡眠状态。

这是警报应用程序[Git_Alarm 应用程序](https://github.com/android/platform_packages_apps_alarmclock)的源链接，您可以下载它并查看它是如何执行此操作的。

如果您在闹钟接收器中执行其他操作，请拨打闹钟。您基本上可以在手机启动时再次设置警报接收器，这是一个可以帮助您的答案，[如果手机关闭，警报问题](https://stackoverflow.com/a/8774690/519718)

编辑：- 一个链接被破坏，替换它

# c# - LinqDataSource 在 DotnetNuke 模块中显示错误

> ID：11359036
> 
> 赞同：1
> 
> 时间：2012-07-06T08:57:22.703
> 
> 标签：c#, .net, dotnetnuke-module

当我在 DNN 中选择页面设置选项时，会显示以下错误。

**错误：** 发生严重错误。无法确定 MetaTable。无法为数据源“LinqDataSource1”确定 MetaTable，并且无法从请求 URL 中推断出 MetaTable。确保表映射到数据源，或者数据源配置了有效的上下文类型和表名，或者请求是注册的 DynamicDataRoute 的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:25:49.137

看这里[http://dnnlinqtosqladapter.codeplex.com/](http://dnnlinqtosqladapter.codeplex.com/)并下载 sql 模型适配器并按照步骤操作，它可以解决您的问题。

试试看，让我知道。

# asp.net - ASP 对数据库服务器的多次查询

> ID：11359040
> 
> 赞同：0
> 
> 时间：2012-07-06T08:57:39.307
> 
> 标签：asp.net, database, performance

我们有一个 ASP.Net Web 应用程序，我们将在其中非常频繁地访问数据库服务器。

由于我们需要对数据库进行多次查询，我们目前采用的方法是在连接时一次性获取数据并将其存储为数据集。这种方法只会让我们免于对数据库进行多次查询。

但是，我们将无法对数据集/数据视图使用索引或不区分大小写的搜索等数据库功能。这导致现在表现不佳。

所以，我想知道有什么方法可以提高性能。我个人不喜欢将整个数据存储在 Web 应用程序上的想法。但是作为asp.net的新手，我想不出任何具体的解决方案。

因此，非常感谢任何解决此问题的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:01:32.107

通常，与数据库服务器通信不会给您带来性能问题。可能是您使用的脚本很慢，这是您的问题。您是否有一个需要很长时间才能运行的脚本，或者一个庞大的数据集（数百万行）？

应用程序通常每页进行 5-10 次 DB 调用并且性能非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:08:40.933

DataReader 可以让您以非常有效的方式访问数据，并且在大多数情况下它实际上比 DataSet 更快。

# iphone - 大纹理尺寸的性能问题

> ID：11359041
> 
> 赞同：1
> 
> 时间：2012-07-06T08:57:40.363
> 
> 标签：iphone, ios, opengl-es

在我的项目中，我使用了 5 层非常宽的图像，它们相互重叠并覆盖整个屏幕。这些图像总共由 20 个纹理（每层 4 个）组成，大小为 512x512 像素。

我使用 PVRTC 格式来加载和压缩这些纹理以节省内存。由于压缩，我检查了仪器和设备上的内部存储器不是问题，但如果我启用并绘制所有图层，我只能得到大约 10-15fps。例如，如果我只绘制一层（4 个纹理），我会得到大约 55fps 的正常帧率。

我强烈怀疑我的纹理太大而导致渲染时出现瓶颈。但是我不确定如何应对和解决这个瓶颈。

对于如何正确处理如此大的图像/纹理以获得良好性能的任何建议和技巧，我将不胜感激。

# testing - EasyB 测试多个输入/输出值

> ID：11359045
> 
> 赞同：1
> 
> 时间：2012-07-06T08:57:59.567
> 
> 标签：testing, groovy, bdd, easyb

如何测试具有多个输入/预期输出的功能？

这是一个非常简单的例子：

```
scenario "Can add two numbers", {
    given "Two numbers", {
        num1 = 2
        num2 = 3
    }

    when "I trigger add.", {
        result = add(num1,num2)
    }

    then "The result should be correct.", {
        result.shouldBe 5
    }
} 
```

我想用多个值来测试这个，比如说`add(4,8).shouldBe 12, ....`

这样做的最佳做法是什么？在其他 BDD 框架中，我看到了类似表的结构来实现这一点，但在 EasyB 中找不到类似的东西。我应该创建多个场景来涵盖这个（将 (1)、(2) 附加到场景名称），还是应该将输入和预期输出放入一个数组中，并检查它是否相等？如果我使用后一种方法，我如何获得有意义的失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:44:04.680

使用 where/example 子句 [http://code.google.com/p/easyb/wiki/ChangesInEasyb098](http://code.google.com/p/easyb/wiki/ChangesInEasyb098)

```
package org.easyb.where

/*
Example tests a map at the story level
 */

numberArray = [12, 8, 20, 199]

where "we are using sample data at a global level", [number:numberArray]

before "Before we start running the examples", {
  given "an initial value for counters", {
    println "initial"
    whenCount = 0
    thenCount = 0
    numberTotal = 0
  }
}

scenario "Number is #number and multiplier is #multiplier and total is #{number * multiplier}", {
  when "we multiply #number by #multiplier", {
    whenCount ++
    num = number * multiplier
  }
  then "our calculation (#num) should equal #{number * multiplier}", {
    num.shouldBeGreaterThan 0
    numberTotal += num
    thenCount ++
  }
  where "Multipliers should be", {
    multiplier = [1,2,3]
  }
}

after "should be true after running example data", {
  then "we should have set totals", {
    whenCount.shouldBe 12
    thenCount.shouldBe 12
    num = 0
    numberArray.each { n ->
      num = num + (n + (2*n) + (3*n))
    }

    num.shouldBe numberTotal
  }
} 
```

# jquery - jQuery Waypoints 不会在 UIWebView 上触发

> ID：11359047
> 
> 赞同：1
> 
> 时间：2012-07-06T08:58:03.200
> 
> 标签：jquery, uiwebview

我正在开发一个移动网络应用程序，并且UIWebView 中的[jQuery Waypoints有问题。](http://imakewebthings.com/jquery-waypoints/#about)如果用户平滑向下滚动，它会完美运行，但一旦反弹效果太大，航点就不会触发。

```
$listfooter = $('#listfooter');
opts = {
  offset: function () {
    return $(window).height() * 5;
  }
};
$listfooter.waypoint(function(event, direction)
{
  console.log('foobar');
}, opts);

<body>
 <div class="header">
  <span>Title</span>
 </div>
 <div id="container">
   <div id="listview">
    ....
   </div>
   <div id="listfooter">
     <div id="spinner"></div>
   </div><!-- /listfooter -->
 </div>
</body>

#listfooter {
  float:left;
  height:34px;
  width:100%;
} 
```

# magento-1.4 - 使用 Magento添加 CMS 块时连接重置

> ID：11359049
> 
> 赞同：0
> 
> 时间：2012-07-06T08:58:13.970
> 
> 标签：magento-1.4, magento

在 Magento 1.4.1 中保存 CMS 块时，我收到一个错误，我的网络浏览器**重新初始化了连接。**添加标签时，我只收到此错误`<script></script>`。我可以保存的任何其他更改，只要我不使用，我就可以添加新块`<script></script>`

我看到的唯一错误是在 /var/www/website/var/log/exception 中，并且只有当我在收到连接重新初始化错误后按 F5 时才出现此错误。Apache 和其他系统日志没有报告任何其他错误。

```
2012-07-06T08:47:22+00:00 DEBUG (7): HEADERS ALREADY SENT: <pre>[0] 
/var/www/vhosts/site/app/code/core/Mage/Core/Controller/Response/Http.php:44
    [1] /var/www/vhosts/site/lib/Zend/Controller/Response/Abstract.php:727
    [2] /var/www/vhosts/site/app/code/core/Mage/Core/Controller/Response/Http.php:75
    [3] /var/www/vhosts/site/app/code/core/Mage/Core/Controller/Varien/Front.php:188
    [4] /var/www/vhosts/site/app/code/core/Mage/Core/Model/App.php:304
    [5] /var/www/vhosts/site/app/Mage.php:596
    [6] /var/www/vhosts/site/index.php:78 
```

该网站在带有 PHP 5.2.13 的 Centos 5.4 上运行良好。所有相同的 Apache 和 PHP 模块都安装在新的 Debian 服务器上。任何帮助将不胜感激。

**版本信息**

Magento 1.4.1

Debian 6.0 i386

PHP 5.3.3-7+squeeze13 和 Suhosin-Patch (cli)（构建时间：2012 年 6 月 10 日 09:35:18）版权所有 (c) 1997-2009 PHP Group Zend Engine v2.3.0，版权所有 (c) 1998-2010 Zend Technologies 与 ionCube PHP Loader v4.0.7，版权所有 (c) 2002-2011，ionCube Ltd.

服务器版本：Apache/2.2.16 (Debian) 服务器构建：2012 年 4 月 1 日 06:40:08

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T05:30:03.187

我们的 Netasq 防火墙中的一条规则阻止了该`<SCRIPT>`标记。一旦我们禁用该规则，客户端就可以再次使用该标签。然而，我们确实警告过他，netasq 可能有充分的理由将这条规则放在他们的位置上。

# sql-server - 在更新语句中获取最新的行版本/时间戳值 - Sql Server

> ID：11359050
> 
> 赞同：6
> 
> 时间：2012-07-06T08:58:14.333
> 
> 标签：sql-server, tsql, concurrency, optimistic-concurrency

我正在使用 rowversion 列来处理乐观并发，并希望在完成更新后取回新的 rowversion 值，以便我的数据层具有最新值并且可以执行另一个更新并获得并发异常（除非记录有已被其他人更新）。

我只是在更新后进入数据层，但这不是非常有效或完全可靠。

对于下表：

```
CREATE TABLE PurchaseType
(
    PurchaseTypeCode nvarchar(20) NOT NULL PRIMARY KEY CLUSTERED (PurchaseTypeCode),
    Name nvarchar(50) NOT NULL,
    TS rowversion NOT NULL
) 
```

我试过了：

```
CREATE PROCEDURE PurchaseType_UpdateWithGet
@PurchaseTypeCode nvarchar(20),
@Name nvarchar(50),
@TS rowversion OUTPUT    
AS

UPDATE PurchaseType
SET Name = @Name
WHERE PurchaseTypeCode = @PurchaseTypeCode
 AND TS = @TS

SELECT @TS = TS FROM PurchaseType WHERE PurchaseTypeCode = @PurchaseTypeCode
GO 
```

但并不完全高兴，因为可能无法从其他人的更新中获取 rowverion 值。然后我在rowversion文档中遇到了OUTPUT语句（[http://msdn.microsoft.com/en-us/library/ms182776.aspx/http://msdn.microsoft.com/en-us/library/ms177564.aspx](http://msdn.microsoft.com/en-us/library/ms177564.aspx) ) 并尝试了这个：

```
CREATE PROCEDURE PurchaseType_UpdateWithOutput
@PurchaseTypeCode nvarchar(20),
@Name nvarchar(50),
@TS rowversion OUTPUT    
AS

DECLARE @Output TABLE (TS BINARY(8))

UPDATE PurchaseType
SET Name = @Name
    OUTPUT inserted.TS into @Output
WHERE PurchaseTypeCode = @PurchaseTypeCode
    AND TS = @TS

SELECT TOP 1 @TS = TS FROM @Output
GO 
```

这很好用。在我非常基本的测试中（仅运行 10000 次调用并对其进行计时），OUTPUT 选项需要大约 40% 的时间，但仍不到半毫秒。在 SET STATISTICS TIME ON 的情况下，两者都没有花费任何可测量的时间。

我的问题是，有人知道更好/更简单的方法吗？

我曾希望有一个类似于 SCOPE_IDENTITY() 的函数用于标识列，但找不到类似的东西。有人知道我是否遗漏了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T15:04:00.557

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms187366.aspx)：

> @@DBTS 返回当前数据库最后使用的时间戳值。当插入或更新具有时间戳列的行时，会生成一个新的时间戳值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T18:45:25.760

您的问题是在更新和选择其他人之间更新行。因此，当您在更新语句之后进行选择时，您不会得到相同的值。这是一个不可重复读取的问题。您应该在更新语句中使用锁定提示 (UPDLOCK)。此锁将允许读取器（即共享锁）但会阻止写入器。所以你会在更新后得到相同的行。所以你的存储过程应该是 -

```
CREATE PROCEDURE PurchaseType_UpdateWithGet
@PurchaseTypeCode nvarchar(20),
@Name nvarchar(50),
@TS rowversion OUTPUT    
AS

UPDATE PurchaseType with (updlock)
SET Name = @Name
WHERE PurchaseTypeCode = @PurchaseTypeCode
 AND TS = @TS

SELECT @TS = TS FROM PurchaseType WHERE PurchaseTypeCode = @PurchaseTypeCode
GO 
```

# c# - 局部变量和 Try/Catch

> ID：11359053
> 
> 赞同：0
> 
> 时间：2012-07-06T08:58:27.227
> 
> 标签：c#

我收到一个错误，代码中 if 语句中的变量 intAge 下方有一条红线。它说变量是本地的，但是当它在代码开头声明时，它怎么可能是本地的呢？它与 Try/Catch 部分有关吗？我的代码看起来像这样的原因只是因为我必须在代码中使用 Try/Catch 来完成此任务。Preciate一些建议以类似和正确的方式解决这个问题？谢谢！

```
int intAge;

        try
        {
            intAge = int.Parse(age);
        }
        catch (Exception)
        {
            MessageBox.Show("Enter an age in numbers!","Error!");
        }
        finally
        {

        }
        // Check input
        if (intAge < 1)
        {
            inputOk = false;
            errorMessage = "Please enter 1 or higher!";
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:00:26.607

只需初始化intAge：

```
int intAge = 0; 
```

您正在错误**使用未分配的局部变量**。

由于您在 try 块中分配值，因此编译器无法确定分配是否会发生（以防`int.Parse(age)`引发异常），然后在您的检查中 `if(intAge<1)`您收到错误，因为您使用的是变量之前没有分配。

[确定分配 - MSDN](http://msdn.microsoft.com/en-us/library/aa691172%28VS.71%29.aspx)

> 在函数成员的可执行代码中的给定位置，如果编译器可以通过静态流分析证明该变量已自动初始化或已成为至少一次赋值的目标，则称该变量已被确定赋值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T09:01:15.337

如果 int.Parse 失败，则不会初始化 intAge 变量。您可以在 dedecration 时对其进行初始化

```
int intAge = 0; 
```

您可以避免双重错误：

```
 int intAge;

    if (!int.TryParse(age, out intAge))
    {
        inputOk = false;  
        errorMessage = "Enter an age in numbers!";  
    }
    else
    {
        // Check input  
        if (intAge < 1)  
        {  
            inputOk = false;  
            errorMessage = "Please enter 1 or higher!";  
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T09:01:02.710

它是本地的，因为它是在本地范围内声明的。您的代码可能结构更好，例如：

```
int intAge;

if (!int.TryParse(age, out intAge))
{
    MessageBox.Show(...
}
else
{
    if (intAge < 1)
        {
            inputOk = false;
            errorMessage = "Please enter 1 or higher!";
        }
} 
```

使用上面的代码，您将显示两个错误，一个是非数字错误，一个是小于 1 的错误。编译器最初的抱怨是因为不能保证您的整数被初始化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T09:03:35.823

编译器抱怨`intAge`第一次使用时局部变量可能没有被初始化。`int.Parse(age)`抛出异常时可能会发生这种情况。要纠正这个问题，只需初始化`intAge`为一些适当的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T09:16:45.670

问题是年龄没有初始化初始化为0，试试看。它必须工作

# javascript - JavaScript 库开发

> ID：11359056
> 
> 赞同：2
> 
> 时间：2012-07-06T08:58:38.003
> 
> 标签：javascript

我是一名 java 程序员，几个月前我发现使用 javascript 和 html 进行前端编程，这非常酷。所以这是一个js新手的问题。

是否有任何 IDE、默认工作流程或 JavaScript 库开发的最佳实践？我不是指覆盖率和单元测试或类似的东西。我的意思是，例如，在使用一些 js 逻辑开发 html 控件时，我应该使用任何工具或技术吗？我是否应该在文本编辑器中编写小测试页面并在十几个浏览器中打开它，每分钟按 F5 并在浏览器的控制台上观看，或者也许有一些神奇的 IDE 将在按钮按下时重新加载所有浏览器实例并从浏览器收集报告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T09:22:51.977

## JavaScript 基础

确保您了解该语言。JavaScript 在这方面有点棘手：您可以很容易地*认为*您理解该语言，但有些奇怪的东西可能会偷偷摸摸。我强烈推荐Douglas Crockford*的 JavaScript：The Good Parts*。他还在 Youtube 上进行了一些同名的谈话，绝对值得一看。

## JSLint

在您的工作流程中集成*JSLint*或类似工具。它是 Javascript 的样式检查器和静态分析工具，有助于捕捉细微的错误。

## 避免 F5

查看[live.js](http://livejs.com/)：

> 只需包含 Live.js，它就会通过向服务器发送连续的 HEAD 请求来监控当前页面，包括本地 CSS 和 Javascript。对 CSS 的更改将被动态应用，HTML 或 Javascript 更改将重新加载页面。尝试一下！

## 浏览器开发者工具

熟悉他们。与 Firefox/Firebug 相比，我个人更喜欢 Chrome 的开发人员工具，但无论您选择哪一种，都要学习如何使用调试器。

## 节点.js

您还应该知道，您不必在浏览器中测试 Javascript 逻辑：您可以使用*node.js*将其用作任何其他脚本语言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T09:49:26.473

作为一名经验丰富的程序员，这里是您应该遵循的 JS lib 生产步骤。

1.  **将 UI 与应用程序逻辑分开。** 在这种情况下，为应用程序逻辑创建一个与所有 API 访问完全分离的组件。API 访问，这意味着 DOM 和 WSH 和 Node.js，应该分开。我什至使用不同的文件来强制和确保分离。
2.  **创建 UI 环境以访问您的逻辑。** 拥有一个供您的观众访问的生产 UI 控件，以及一个用于沙盒开发的单独的内部 UI 控件。例如，我在[http://prettydiff.com/](http://prettydiff.com/)上编写了我的应用程序，以便在命令行和浏览器中工作。我还编写了应用程序访问的访问方法，类似于已发布的 HTML，但对于我自己的开发来说不同，以实现更快速的单元测试。在沙盒 UI 中，可以使用递归 setTimeout 以间隔刷新页面，以便在编写和保存代码时进行自动化测试计划验证。
3.  **关注可用性和分发。** 人们可以直接从我的网站、Github 和 NPM for Node 获取我的库。我有一个严格的流程，在产品发布期间我将代码上传到站点，然后在浏览器中执行快速验证。如果发布没有破坏应用程序，则推送到 Github，然后将这个完全相同的位置推送到 NPM。
4.  **分布式访问代码操作就更好了。** 在线快速甚至自动访问库非常好，但能够通过请求访问单元测试更好。我可以通过 URI 告诉我的应用程序请求代码示例，直接在线访问代码示例，从而远程对我的应用程序的代码进行单元测试。这意味着不仅我的静态代码可用于分发和测试，而且它的操作也是如此。
5.  **好的文档就是一切。** 如果文档薄弱，我什至不会费心检查一个库。我不是在谈论代码注释，尽管这些很重要。我说的是最终用户文档。我希望能够阅读文档并了解有关该主题的所有信息。Node.js 之所以流行，是因为即使在代码库稳定之前，它的文档就已经很糟糕了。让其他人在对您的代码进行 QA 之前对您的文档进行 QA。如果没有令人惊叹的文档，您的库对我来说就毫无价值了。
6.  **了解你的使命。** 每个库都应该有一个清晰、简单和明确的目的。如果这没有建立，那么 lib 还没有准备好发布。如果增强功能混淆了库的用途，那么可能是时候将一个库划分为多个较小的库了。专注于精确、清晰、直接，并且只关注 lib 的唯一声明使命。
7.  **独立对于收养至关重要。** 我不喜欢依赖于其他库或框架的库。你的 jQuery 库可能是自切片面包以来最好的东西，这很好，但我不会看它。独立性意味着更大的可移植性和自由度，它将它与您不知道的其他库混合和匹配。
8.  **风格很重要。** 这是一个敏感的话题，但风格很重要。使您的库中的逻辑尽可能简单和声明性。如果您的代码本质上是绝对声明性的，那么您的算法模式就很棒。避免使用*new*关键字，除非您是经验丰富的 JavaScript 坏蛋并且严格限制使用*this*关键字，因为它会使您在以后的维护操作中失败。不要在算法上用连接构建大字符串，并不断观察代码的执行速度。因为即使是对样式的微不足道的更改或对逻辑的看似微小的改进也会破坏执行效率，所以我在我的所有 UI 控件上都设置了一个计时器。在您的开发中使用分析器，例如 Chrome 的 web 工具来跟踪 JS 执行中的长时间操作。
9.  **Be open about your failures.** Software is never perfect and other developers will always respect this. If you encounter a bug before anybody else then be open about the existence of the bug. If it will take more than a week to get the solution out then don't delay notification. Notify your users immediately so that they are aware. I recently rolled back a major enhancement to the logic of my diff algorithm because additional unit testing showed heavy slippage. I rolled back the same day I made a decision the prior release or two was flawed and was open about the rollback. If you want people to contribute to your code base or provide bug reports then openness is critical.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T09:33:41.380

我知道您可能已经明确表示您不是指单元测试，但这正是我建议您编写 javascript 库的方式。

如果您是 Java 开发人员，您可能熟悉 jUnit。如果是这样，[qUnit](http://docs.jquery.com/QUnit)对您来说可能更自然。否则，我建议你看看[Jasmine](http://pivotal.github.com/jasmine/)或[Mocha](http://visionmedia.github.com/mocha/)。[虽然我更喜欢 Mocha，但由于很棒的Jasmine-Jquery 插件](https://github.com/velesin/jasmine-jquery/)，我对 Jasmine 的体验通常更适合浏览器内开发。

如果您正在编写 qUnit 测试，请查看[IntelliJ IDE](http://www.jetbrains.com/idea/features/index.html)，它允许您执行测试以及提供代码覆盖率。

如果您在浏览器上进行开发，请查看[LiveReload](http://livereload.com/)。它会为您观看文件并自动刷新您的浏览器 - 非常适合即时反馈。

为了浏览器的兼容性，我建议您先合理地让它在一个上工作，然后再担心其他的。不时检查一下，看看您是否发现问题。看看 jQuery 是否可以为您抽象出一些混乱。否则，请查看[Adob​​es BrowserLab](https://browserlab.adobe.com/en-us/index.html)。

# java - 用 Java 编写 BASIC 解释器 - 循环和 ifs

> ID：11359060
> 
> 赞同：1
> 
> 时间：2012-07-06T08:58:41.203
> 
> 标签：java, interpreter, basic

这篇论文：[http](http://www.codeproject.com/Articles/345888/How-to-write-a-simple-interpreter-in-JavaScript) ://www.codeproject.com/Articles/345888/How-to-write-a-simple-interpreter-in-JavaScript在工程解析和编写指令方面帮助了我很大，但是它没有解释如何编写循环和 ifs。你能给我指一些关于这方面的论文吗？虽然添加预定义函数等很容易，特别是因为我的 BASIC 方言将是非常老派的一种，带有强制行号、使用 LET 设置变量等的要求以及非常固定的语法（即没有'：'来分隔指令，只有每行一条指令，参数分隔不允许空格，所以 10 LET 变量，值是有效的，但 10 LET 变量，值不是）？

再想一想，ifs 可能会很容易，但是如何执行 for..next 循环仍然存在问题（我的解释器不会使用 whiles/do..whiles，只有 oldschool gotos/gosubs）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:26:31.517

要实现`GOTO`，您需要一种方法来修改. 中的`i`变量（通常称为*程序计数器*）`evaluate()`。一种方法是修改`parseNode`为返回一个对象而不是简单的值：

```
// ...evaluate()...
var result = parseNode(parseTree[i]);
if (typeof result.newI !== undefined) {
    i = result.newI;
}
if (typeof result.value !== "undefined") {
    output += value + "\n";
}
// ...parseNode....
else if (node.type === "goto") {
    return {newI : node.value};
} 
```

实现`IF`会更简单，如下所示（如果条件为 in `node.args`）：

```
else if (node.type === "if") {
    if (parseNode(node.args).value != 0) {
        return parseNode(node.value);
    }
} 
```

我不确定这是否每`IF`口井都实现了多个语句，但您的方言也没有。

# facebook - FQL application_active_users_gender

> ID：11359062
> 
> 赞同：-1
> 
> 时间：2012-07-06T08:58:49.020
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在尝试编写一个应用程序来读取一些应用程序指标。

我无法获得任何指标：只有 application_active_users。

事件与 FB 提供的示例，如果我更改指标，则不会显示任何内容。这是一个错误，还是我错过了什么？

示例 1（工作）：[https://api.facebook.com/method/fql.query?query=SELECT%20metric%2C%20value%20FROM%20insights%20WHERE%20object_id%3D2439131959%20AND%20metric%3D](https://api.facebook.com/method/fql.query?query=SELECT%20metric%2C%20value%20FROM%20insights%20WHERE%20object_id%3D2439131959%20AND%20metric%3D) 'application_active_users' %20AND%20end_time%3Dend_time_date('2011-06-26')%20AND%20period%3Dperiod('month')&access_token=AAAAAAITEghMBAA6pD9aSW4MSM5rjt8ditDsdZAYVbpG4A7DDEohNUsp4oug3zwVewyqCUwBdBjs71skLZAbBuvm16vZuDZDi

示例 2（不工作）：[https://api.facebook.com/method/fql.query?query=SELECT%20metric%2C%20value%20FROM%20insights%20WHERE%20object_id%3D2439131959%20AND%20metric%3D](https://api.facebook.com/method/fql.query?query=SELECT%20metric%2C%20value%20FROM%20insights%20WHERE%20object_id%3D2439131959%20AND%20metric%3D) 'application_active_users_gender '%20AND%20end_time%3Dend_time_date('2011-06-26')%20AND%20period%3Dperiod('month')&access_token=AAAAAAITEghMBAA6pD9aSW4MSM5rjt8ditDsdZAYVbpG4A7DDEohNUsp4oug3zwVewyqCUwBdBjs71skLZAbBuvm16vZDZNa

第一个示例由 facebook 提供，第二个示例相同，但度量标准有所不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:23:53.697

Application_active_users_gender 只能与“天”期间一起使用。请参阅以下文档：

[https://developers.facebook.com/docs/reference/fql/insights/#application_users](https://developers.facebook.com/docs/reference/fql/insights/#application_users)

我已经尝试过了，但仍然没有返回结果。这可能是一个错误。

# ruby - 检测捆绑器安装的组

> ID：11359063
> 
> 赞同：1
> 
> 时间：2012-07-06T08:58:56.227
> 
> 标签：ruby, bundler, rakefile

我们正在使用捆绑器，并且在部署服务器应用程序时安装了一些 gem

```
bundler install --without test 
```

在这种情况下，应该停用一些代码（例如将 rspec && cucumber 任务加载到 Rakefile 中）

有没有一些简单的方法，比如`Bundler.installed?(:test)`то 检测这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:34:32.847

您基本上要做的是将您的`production`环境与您的`development`（或`test`）环境区分开来。您不应该为此依赖已安装的 gem，但 Bundler 组仍然很有用。

我建议使用环境变量，例如在 Rails 中。然后你可以在你的服务器配置中设置这个变量

```
$ export MYAPP_ENV='production' 
```

并使用默认值将其加载到您的应用程序中`:test`：

```
MYAPP_ENV = ENV['MYAPP_ENV'].to_sym || :test 
```

这样，您始终可以判断您是否在生产服务器上。假设您的 Gemfile 看起来像这样：

```
source :rubygems

gem "sinatra"

group :test do
  gem "rspec"
  gem "faker"
end 
```

然后，您可以只需要相关的宝石

```
Bundler.require(MYAPP_ENV) 
```

回到你原来的问题：现在很容易检查你是否在生产机器上，只需`MYAPP_ENV`再次使用：

```
if MYAPP_ENV == :test
  # do some test specific stuff
end 
```

我希望这有帮助。

# c# - 如何提交派生自同一基类的不同模型

> ID：11359066
> 
> 赞同：0
> 
> 时间：2012-07-06T08:59:06.780
> 
> 标签：c#, asp.net-mvc-3, inheritance, form-submit, model-binding

我试图在控制器中使用一个单一`@Html.BeginForm()`的`Create`动作。但是在视图和控制器操作中，我的模型都是抽象类。所以我需要根据用户的选择以某种方式在视图的表单中创建派生类，并通过基类将其发送到控制器，以便稍后通过检查基模型的类型在控制器操作中捕获它，例如

```
if(baseModel is derived1)
{}
else if(baseModel is derived2)
{} 
```

我尝试在编辑器中投射模型，比如

```
 <div class="editor-label">
        @Html.LabelFor(model => ((YagliBoya)model).En) (cm)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => ((YagliBoya)model).En)
        @Html.ValidationMessageFor(model => ((YagliBoya)model).En)
    </div> 
```

但它不起作用，更糟糕的是，表单尝试提交基类，然后抛出“无法创建抽象类”异常。我该如何扩展这些？

# php - 如何在 Facebook 页面共享中指定缩略图大小？

> ID：11359068
> 
> 赞同：0
> 
> 时间：2012-07-06T08:59:31.517
> 
> 标签：php, facebook

我正在用 PHP 开发一个网站，并且正在实现 facebook 共享。我可以使用如下链接标签选择正确的图像（链接前的开始标签）

链接 rel="image_src" href="http://www.code-digital.co.uk/preview.jpg" />

但是有没有办法自定义图像缩略图大小？我想展示更大的图像。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T01:44:16.733

由于您使用的是 php，您可以为您选择合适大小的正确图像，使用 php 将其保存到服务器上的文件中，然后将其用作缩略图。

# android - 如何一项活动胜过另一项活动..？

> ID：11359069
> 
> 赞同：-1
> 
> 时间：2012-07-06T08:59:40.373
> 
> 标签：android

我不想从当前活动开始新活动，而是想在另一个活动上显示新活动，以便活动应该可见并且新活动将显示在旧活动上（不占据屏幕的所有区域）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T09:05:24.903

在 style.xml 中使用

```
<style name="Theme.Transparent" parent="android:Theme">
        <item name="android:windowIsTranslucent">true</item>
        <item name="android:windowBackground">@android:color/transparent</item>
        <item name="android:windowContentOverlay">@null</item>
        <item name="android:windowNoTitle">true</item>
        <item name="android:windowIsFloating">true</item>
        <item name="android:backgroundDimEnabled">false</item>

    </style> 
```

在清单文件中使用

```
<activity
            android:name=".YourActivityName"

            android:theme="@style/Theme.Transparent"
             /> 
```

现在制作一个比全屏更小的布局..

你在评论中问了什么

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
   >

    <ImageView
        android:id="@+id/StatusImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:src="@drawable/icon"
        android:visibility="visible" />

</RelativeLayout> 
```

图像将在上部活动中看到..就像一个对话，你可以做任何你想要的布局，像这样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T09:17:57.387

您想将活动设置为另一个说您想设置`activity2`的`activity1`方式不是进行这种布局的一种方法是在清单文件中您可以像这样定义活动

```
<activity android:name=".Activity2" android:theme="@android:style/Theme.Dialog"></activity> 
```

所以这里的代码`android:theme="@android:style/Theme.Dialog"`会让你的活动2作为一个对话框来活动1。

而且我建议你将Activity 2布局的背景图片设为透明，这样你就可以实现你的目标

我不确定这是否会 100% 解决您的问题，但我认为这是您实现目标的方式。

# mysql - 从选择中创建转储文件

> ID：11359080
> 
> 赞同：1
> 
> 时间：2012-07-06T09:00:17.270
> 
> 标签：mysql, node.js

我想从 nodeJS 中的以下选择创建一个转储文件：

```
SELECT o1.* FROM objects_pool o1 inner join objects_pool o2 on o1.op_id = o2.op_id_object_corpse where o2.op_id_zone_pool = 41 
```

我试过了：

执行（`'mysql -e "SELECT o1.* FROM objects_pool o1 inner join objects_pool o2 on o1.op_id = o2.op_id_object_corpse where o2.op_id_zone_pool = 41" -u root -pxxxxx dbNAME > FILE_PATH'`

但我唯一得到的是结果列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:13:55.950

您不能从内部使用管道或重定向`child_process.exec`。如果您想为`child_process.exec`stdout 指定不同的输出，则必须通过在选项中指定它来执行此操作（另请参阅[文档](http://nodejs.org/api/all.html#all_child_process_exec_command_options_callback)）：

```
var fileOut = fs.createWriteStream('FILE_PATH');
child_process.exec('mysql -e "SELECT o1.* FROM objects_pool o1 inner join objects_pool o2 on o1.op_id = o2.op_id_object_corpse where o2.op_id_zone_pool = 41" -u root -pxxxxx dbNAME', {stdio: [undefined, fileOut, undefined]}, function (err) {
  // called when done
  fileOut.end();
}); 
```

# python - 文件访问预览

> ID：11359081
> 
> 赞同：6
> 
> 时间：2012-07-06T09:00:20.770
> 
> 标签：python

我需要逐行读取文件，并且需要查看“下一行”，因此首先我将文件读入列表，然后循环浏览列表...不知何故，这似乎很粗鲁，构建列表可能是变得昂贵。

```
for line in open(filename, 'r'):
    lines.append(line[:-1])

for cn in range(0, len(lines)):
    line = lines[cn]
    nextline = lines[cn+1] # actual code checks for this eof overflow 
```

必须有更好的方法来迭代线路，但我不知道如何向前看

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T09:07:05.610

您可能正在寻找类似 itertools 的[pairwise](http://docs.python.org/library/itertools.html#recipes) recipe 的东西。

```
from itertools import tee, izip
def pairwise(iterable):
    "s -> (s0,s1), (s1,s2), (s2, s3), ..."
    a, b = tee(iterable)
    next(b, None)
    return izip(a, b)

with open(filename) as f: # Remember to use a with block so the file is safely closed after
    for line, next_line in pairwise(f):
        # do stuff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:05:40.230

你可以这样做

```
last_line = None

for line in open(filename):                                                                  
    if last_line is not None:
        do_stuff(last_line, line) 
    last_line = line 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:39:59.653

您可以创建一个`iterator`并这样做：

```
f = open(filename, 'r')
g = open(filename, 'r')

y = iter(g.readlines())
y.__next__()

for line in f:
    print(line)
    try:
        print(y.__next__())
    except StopIteration:
        f.close()
        g.close() 
```

# node.js - 无法在 HTML 中获取 window.location.search 值 - jQueryMobile

> ID：11359082
> 
> 赞同：0
> 
> 时间：2012-07-06T09:00:24.057
> 
> 标签：node.js, ejs

我的 javascript 代码看起来像这样

```
var query = window.location.search.replace('?','');
fetchContent(apiUrl + 'service/' + query + '?callback=?', function(data) {
    $('.content').append(data).trigger('create');
}); 
```

我正在为服务和视图使用 jQueryMobile、nodeJS。此外，使用 EJS 模板显示数据。

问题是我无法在上面的代码中获取变量*查询*的值，因此接下来的几行形成了一个参数*'apiUrl/service/?callback=?'* 对于 fetchContent 方法，这是我的服务的错误 URL。我的 fetchContent 方法的正确参数应该是*'apiUrl/service/1234?callback=?'* .

有趣的是，当我在新选项卡中打开链接时，这段代码可以正常工作。我的代码中上述 HTML 页面的 URL 是**some.html?1234**。根据this JS代码中的值应该是1234但它是空的。

# java - 如何向清单文件添加权限（Java Applet）

> ID：11359084
> 
> 赞同：1
> 
> 时间：2012-07-06T09:00:27.370
> 
> 标签：java, applet

你好我写了一个java小程序，它要求权限，例如：

```
javax.smartcardio.CardPermission

java.lang.RuntimePermission 
```

那么这个清单文件在哪里，我该如何添加这些权限呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:28:33.010

> ..这个清单文件在哪里..

这与既定目标无关，因为..

> ..我怎样才能添加这些权限呢？

..一个小程序要么是数字签名的，要么是没有数字签名的。如果它是数字签名的，它可以请求放宽安全沙箱。还有其他两个安全级别，其中一个仅适用于应用程序。使用 JWS 部署，另一个是`all-permissions`.

这个小程序将需要`all-permissions`- 所以小程序需要进行数字签名，并且最终用户需要在提示时接受代码。

清单中所需的任何更改都将由 SDK 工具自动完成。手动编辑它没有任何意义或好处。

# php - 如何对这个数组进行排序

> ID：11359085
> 
> 赞同：1
> 
> 时间：2012-07-06T09:00:28.650
> 
> 标签：php, arrays, sorting

我使用以下脚本对数组进行了分组

```
$grouped_array = array();       
foreach($ungrouped_array as $item) {
    //group them by id
    $grouped_array[$item['id']][] = $item;
} 
```

现在这个分组数组看起来像这样

```
array(3) {
  [1]=>
  array(2) {
    [0]=>
    array(1) {
      ["id"]=>
      string(1) "1"
    }
    [1]=>
    array(1) {
      ["id"]=>
      string(1) "1"
    }
  }

  [6]=>
  array(1) {
    [0]=>
    array(1) {
      ["id"]=>
      string(1) "6"
    }
  }

  [2]=>
  array(4) {
    [0]=>
    array(1) {
      ["id"]=>
      string(1) "2"
    }
    [1]=>
    array(2) {
      ["id"]=>
      string(1) "2"
      ["sub"]=>
      string(1) "1"
    }
    [2]=>
    array(2) {
      ["id"]=>
      string(1) "2"
      ["sub"]=>
      string(1) "2"
    }
    [3]=>
    array(1) {
      ["id"]=>
      string(1) "2"
    }
  }
} 
```

我已经删除了数组的大部分以使其更短，但是`[0]`这个分组数组中没有字段所有数组字段都被赋予了`[id]`'s 值的名称。我对此没有任何问题，我只需要再次将其缩短`[ID]`

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:17:46.397

这应该可以得到 1、2、6：

```
<?php
$grouped_array = array();       
foreach($ungrouped_array as $item) {
    $grouped_array[$item['id']][] = $item;
}

// sort by key.
ksort( $grouped_array, SORT_NUMERIC );

print_r( $grouped_array ); 
```

# mysql - mysql 6个表在一个查询中连接在一起

> ID：11359089
> 
> 赞同：0
> 
> 时间：2012-07-06T09:00:55.423
> 
> 标签：mysql, sql, join

我有 6 个表：用户、日志、文件、标志、flag_details

```
users (id, avatar, fullname)
journals (id, container, container_id, user_id, title)
files (id, container, container_id, user_id, title)
flags (id, container, container_id, total)
flag_details (id, container, container_id, reason, comment, user_id)
trend_item (id, container, container_id, user_id) 
```

关系是：

```
if(flags.container='look') then flags.container_id = journals.id 
```

所以我从 journals 表中取出所有记录

```
if(flags.container='photo') then flags.container_id = files.id 
```

所以我从文件表中获取所有记录

```
if(flags.container='trend') then flags.container_id = trend_item.id 
```

所以我从trend_item 表中获取所有记录

所以我的观点是这样的：

```
id | container | things      | total flag
1  | look      | 123 - guy   | 2
2  | photo     | 321 - budi  | 4
3  | trend     | 345 - elvis | 3
4  | look      | 876 - cans  | 6 
```

所以我得到了这样的查询：

```
SELECT DISTINCT (id), created_at, container, IF( container =  'look', (

SELECT a.container_id
FROM flags a, journals b
WHERE a.container_id = b.id
), IF( container =  'photo', (

SELECT a.container_id
FROM flags a, files b
WHERE a.container_id = b.id
), (

SELECT a.container_id
FROM flags a, trend_items b
WHERE a.container_id = b.id
) ) ) , total, 
`status`
FROM flags
ORDER BY created_at DESC 
```

但答案是子查询返回超过 1 行。

如果所有这些都放在一个查询中，有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:02:06.947

我想您可以使用单个查询安全地连接所有这些表，如下所示：

```
 SELECT fl.*
      FROM flags fl
 LEFT JOIN journals jo
        ON fl.container_id = jo.id AND fl.container = 'look'
 LEFT JOIN files fi
        ON fl.container_id = fi.id AND fl.container = 'photo'
       ... 
```

这是[一个演示](http://sqlfiddle.com/#!2/8a1ae/5)来说明这个概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-02T11:46:10.497

```
SELECT t6.username AS username, MAX( t1.earn_status ) AS genx, MAX( t2.earn_status ) AS grnplus, MAX( t3.earn_status ) AS genpower, MAX( t4.earn_status ) AS genpro, MAX( t5.earn_status ) AS geextra 
FROM genx_commission t1 
    LEFT JOIN gen_plus_commission t2 ON ( t1.user_id = t2.user_id ) 
    LEFT JOIN gen_power_commission t3 ON ( t1.user_id = t3.user_id ) 
    LEFT JOIN gen_pro_commission t4 ON ( t1.user_id = t4.user_id ) 
    LEFT JOIN gen_extra_commission t5 ON ( t1.user_id = t5.user_id ) 
    LEFT JOIN users t6 ON ( t1.user_id = t6.id ) 
WHERE t1.user_id =1654 
```

# php - 为什么我的 AJAX .post 在 Codeigniter 中不起作用？

> ID：11359091
> 
> 赞同：1
> 
> 时间：2012-07-06T09:01:00.287
> 
> 标签：php, ajax, codeigniter

所以这是我的第一个 Codeigniter 项目，我即将提交 seppuku。

情况如下：

我有一个图片库。当用户将鼠标悬停在其中一个上时，侧 div 会填充 AJAX 调用的更多信息。

我只是无法让它工作。我一直在 Dev Tools>Network>XHR 中得到这个：

```
Not Found

The requested URL /ajax/getMoreInfo was not found on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

我究竟做错了什么？如果有人想放弃一些“最佳实践”，我会全力以赴。具体来说.. 我看到了其他例子，其中 ajax 参数是通过使用 $.post (ajax/getMoreInfo/ID) 发送的 URL 传递的，而不是像我在这里做的那样作为变量。我完全错了吗？（即使我认为这不是我的 404 的原因）。

这是我在悬停时调用的 JS 函数

```
function showDataWindow(){

    var thisClass = $(this).attr('class');
    var thisIDpos = thisClass.indexOf("id-")+3;
    var thisID = thisClass.substr(thisIDpos, 3);
    /// alert(thisID) <- alerts correctly
    $.post('ajax/getMoreInfo', 
        { ID: thisID },
        function(data) {
            .. do stuff with data 
```

我在 /controllers 中有一个名为 ajax.php 的控制器

```
<?php

class Ajax extends CI_Controller {

  function __construct() {
      parent::__construct(); 
  }

  public function getMoreInfo()
 {
      $ID = $this->input->post('ID');
      $this->load->model('Artist_model','',TRUE);
      $more_info = $this->Artist_model->get_more_info($ID);
      echo json_encode($more_info);
  }
} 
```

我在 /models 中的模型...

```
<?php 
class Artist_model extends CI_Model {

function __construct()
{
    parent::__construct();
}

public function get_more_info($ID)
{        
        $query = $this->db->query('SELECT * FROM `NOIRusers` WHERE `UID` = `$ID`');
        if ($query->num_rows() > 0)
        {
           foreach ($query->result() as $result)
           {

                $moreInfo['memberID'] =$result->UID;
                $moreInfo['firstName'] =$result->UFname;
                $moreInfo['lastName'] =$result->ULname;
                $moreInfo['large_image_location'] =$result->large_image_location;

                ..more of these..
           }
        }  
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:07:57.103

我认为这是一个 htaccess 问题。尝试在您的 .htaccess 文件中使用以下内容。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?$1 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:04:02.330

您是否已将其添加到 routes.php 中？

[http://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

您需要在此处添加它，以便 CI 知道如何处理“ajax”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:19:06.127

如果您可以正确传递 id，请尝试以下查询。

```
SELECT * FROM NOIRusers WHERE UID = '".$ID."'"; 
```

通常codeigniter使用像

```
$this->db->select('*');
$this->db->from('NOIRusers');
$this->db->where('UID',$ID); 
```

# sql - SQL Server 2008 中的树结构

> ID：11359095
> 
> 赞同：0
> 
> 时间：2012-07-06T09:01:16.480
> 
> 标签：sql, sql-server

在 SQL Server 2008 中；

我有一棵树。我需要获取节点 n 的所有子节点（见图）以及这些子节点的所有子节点等，直到叶节点相当琐碎。我还需要能够说'以节点 o，上树直到我们到达 m，因为 m 是节点 n 的子节点，所以将节点 o 的某些属性设置为节点 m 的某些属性。节点 o 可以是 3 层深（如图所示）或 45 层深，x 层深。

这将获取给定节点（或区域）的所有子节点

```
 --Return all sub-area structure of an area:

      WITH temp_areas (ParentAreaID, AreaID, [Name], [Level]) AS
      (
            SELECT ParentAreaID, AreaID, [Name], 0
            FROM lib_areas WHERE AreaID = @AreaID
            UNION ALL
            SELECT B.ParentAreaID, B.AreaID, B.[Name], A.Level + 1
            FROM temp_areas AS A, lib_areas AS B
            WHERE A.AreaID = B.ParentAreaID
      )

INSERT INTO @files (id) SELECT fileid FROM lib_filesareasxref where areaid in (select  areaid from temp_areas)

while exists (select * from @files)
begin
select top 1
@ID = id
from
@files ORDER BY id DESC

delete from @files where id = @id 
```

![树](../Images/6e408ddf03909cd181bc2856ba1b91c1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:11:00.813

这将追溯`@node_o`直到它到达`@node_m`或到达树的顶部*（如果`@node_m`不在上面`@node_o`）*。

```
 WITH
    parents
  AS
  (
    SELECT
      A.ParentAreaID, A.AreaID, A.[Name], 0
    FROM
      lib_areas  AS A
    WHERE
      A.AreaID = @node_o

    UNION ALL

    SELECT
      A.ParentAreaID, A.AreaID, A.[Name], B.Level + 1
    FROM
      lib_areas  AS A
    INNER JOIN
      parents    AS B
        ON A.AreaID = B.ParentAreaID
    WHERE
      B.AreaID <> @node_m
  )
  SELECT
    *
  FROM
    parents 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:18:11.443

我建议`HierarchyID`在您的表中使用数据类型，并使用该`GetAncestor`方法

# rest - SugarCRM REST API 错误

> ID：11359097
> 
> 赞同：3
> 
> 时间：2012-07-06T09:01:17.500
> 
> 标签：rest, sugarcrm

我正在尝试通过 Sugarcrm REST api 检索自定义模块数据，但我无法这样做，因为我什至无法使用文档代码登录，我尝试了与文档中给出的相同的操作

```
 <?php

// specify the REST web service to interact with
$url = 'localhost/~jmertic/sugarcrm/service/v4_1/rest.php';

// Open a curl session for making the call
$curl = curl_init($url);

// Tell curl to use HTTP POST
curl_setopt($curl, CURLOPT_POST, true);

// Tell curl not to return headers, but do return the response
curl_setopt($curl, CURLOPT_HEADER, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);

// Set the POST arguments to pass to the Sugar server
$parameters = array(
    'user_auth' => array(
        'user_name' => 'username',
        'password' => md5('password'),
        ),
    );
$json = json_encode($parameters);
$postArgs = array(
    'method' => 'login',
    'input_type' => 'JSON',
    'response_type' => 'JSON',
    'rest_data' => $json,
    );
curl_setopt($curl, CURLOPT_POSTFIELDS, $postArgs);

// Make the REST call, returning the result
$response = curl_exec($curl);

// Convert the result from JSON format to a PHP array
$result = json_decode($response);
if ( !is_object($result) ) {
    die("Error handling result.\n");
}
if ( !isset($result->id) ) {
    die("Error: {$result->name} - {$result->description}\n.");
}

// Get the session id
$sessionId = $result->id; 
```

更改了用户名、密码和网址以匹配我的设置，但我收到一条错误消息

```
No direct script access allowed 
```

我试图在网上搜索，但找不到任何相关的解决方案。我使用的是sugarCRM 6.5.0RC2 版本

问候， 阿南德·乔希

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:16:35.010

线不应该是这样吗...

```
$url = 'http://yoursugarinstance/service/v4_1/rest.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T23:53:14.203

您可能在您的 WEB 服务器上配置了一些防御措施，只允许您访问 index.php。

要验证它，请尝试从浏览器转到您的 API URL：`http://YOUR_DOMAIN_NAME/service/v4_1/rest.php`

或/并从终端运行：`wget http://YOUR_DOMAIN_NAME/service/v4_1/rest.php`

如果它显示相同的消息，请检查此文件夹上的 .httaccess 或/和您的 Web 服务器配置文件。

如果不是，您如何运行 API 测试脚本？通过 CLI 还是从浏览器？

另外我建议你使用一些开源 SugarCRM REST API Wrapper。我用这个：[https ://github.com/asakusuma/SugarCRM-REST-API-Wrapper-Class](https://github.com/asakusuma/SugarCRM-REST-API-Wrapper-Class)

# jquery - 使用 jquery 后备嵌入 swf

> ID：11359101
> 
> 赞同：0
> 
> 时间：2012-07-06T09:01:26.047
> 
> 标签：jquery, flash, html, fallback

我对 HTML5 或 Jquery 不太了解，因此我需要以下帮助：

我想在我的 html 中嵌入一个 swf，但如果用户在 iOS 上查看该网站，我需要它回退到 Jquery。我似乎在网上找不到任何东西，因为大多数人只用视频解释如何做到这一点。我需要一个完整的 Jquery 画廊，而不仅仅是一个视频。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:51:36.910

在 navigator.userAgent 或 navigator.platform 的帮助下检测 iphone 或 ipad 设备，然后如果不是 iphone/ipad 则嵌入 flash，否则嵌入您的画廊。

```
var iOS = ( navigator.userAgent.match(/(iPad|iPhone|iPod)/i) ? true : false );

if(!iOS){
     //render the flash
}
else {
     //render the gallery.
} 
```

# javascript - 基于用户输入验证数学公式

> ID：11359102
> 
> 赞同：3
> 
> 时间：2012-07-06T09:01:28.223
> 
> 标签：javascript, jquery, regex, math

我知道 SO 不是一个代码生成器，但我打破了我的脑袋，我会对这个 RegExp 感到生气。

我`<input />`在 HTML 中输入了文本`<form />`。当用户双击特定列表中的元素时，输入会自动填充。此事件将生成类似or的
字符串，并将其放置在我的字段中的光标位置。 这个过程的第一个目标是构建一个数学公式结构。我的意思是，括号之间生成的字符串将插入元素，然后我想让用户**只**输入数字和运算符。`"[text:number]"``"[text:number:text]"``<input />`

 **我尝试绑定`keydown`事件，并使用`String.fromCharCode(e.which);`键“+”或“-”（和其他运算符）测试字符，但此函数返回字母字符。没有成功。
然后，我终于决定使用`keyup`事件，然后使用 RegExp 替换`<input />`值。

```
 $("#inputID").keyup(function(){
            var formule = $(this).val();
            var valid_formule = formule.replace(CRAZY_REGEXP,'');
            $(this).val(valid_formule);
        }); 
```

所以，我的问题如下：
如何构造一个 javascript RegExp，以删除所有**不在**括号之间的字符，以及与 and 不同的`()+-*/,.`字符`numbers`。
一个例子：
`"a[dse:1]a+a[dse:5]a+a[cat:5:sum]a+(a10a/5,5)!"`
将成为
`"[dse:1]+[dse:5]-[cat:5:sum]+(10/5,5)"`

如果您有一些想法，我愿意以另一种方式实现我的目标。谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T09:15:14.937

你可以尝试这样的事情：

```
var re = /[^\]\d\(\)+\-*\/,.]+(?=[^\[\]\(\)]*(?:\[|\(|$))/g;
$("#inputID").keyup(function(){
    this.value = this.value.replace(re, "");
}); 
```

但请记住，您必须确保括号结构与您的语法一致。

建议：使用[RegExr](http://gskinner.com/RegExr/)测试您的正则表达式，但请记住它比 Javascript 正则表达式支持*更强大。***

# hashtable - hashexp 指定的 SAS HashTable 中的表大小到底是多少？

> ID：11359103
> 
> 赞同：5
> 
> 时间：2012-07-06T09:01:29.937
> 
> 标签：hashtable, sas

我想对 SAS 哈希表中存储桶的定义做一点澄清。问题正是关于*hashexp*参数。

根据 SAS DOCs，*hashexp*是：

*哈希对象的内部表大小，其中哈希表的大小为 2n。*

*HASHEXP 的值用作创建哈希表大小的二次幂指数。例如，HASHEXP 的值为 4 等于哈希表大小为 24 或 16。HASHEXP 的最大值为 20。*

*哈希表大小不等于可以存储的项目数。将哈希表想象成一个“桶”数组。大小为 16 的哈希表将有 16 个“桶”。每个桶可以容纳无限数量的项目。哈希表的效率在于哈希函数将项目映射到桶并从桶中检索项目的能力。*

*您应该根据散列对象中的数据量设置散列表大小，以最大限度地提高散列对象查找例程的效率。尝试不同的 HASHEXP 值，直到获得最佳结果。例如，如果哈希对象包含一百万个项目，那么大小为 16 (HASHEXP = 4) 的哈希表可以工作，但效率不高。大小为 512 或 1024（HASHEXP = 9 或 10）的哈希表会产生最佳性能。*

**问题是***哈希表大小*到底是什么，而不是哈希对象中的数据量？

是否应该将其理解为好像我们想分配尽可能多的内存，但不能少，不能更多。让事情快速运转是二的力量。但它并没有限制可能使用的数据量，它只是表明将要使用多少，对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T14:01:08.477

Paul Dorfman（散列大师）在本白皮书的第 10 页详细介绍了一些细节：

[http://www2.sas.com/proceedings/forum2008/037-2008.pdf](http://www2.sas.com/proceedings/forum2008/037-2008.pdf)

据我了解，哈希表将其数据存储在二叉树中。hashexp 创建的每个桶代表将用于存储数据的二叉树的数量。hashexp 为 0 将使用单个树，而 hashexp 为 8 将使用 256 棵树。当对散列对象执行查找时，内部算法会确定键应该存在于哪棵树中（基于散列值）。然后它检查该树的值。通过自动知道要查看 256 棵树中的哪棵（例如），与单个二叉树相比，它可以节省 8 次比较 (2^8)。

整个事情似乎比这复杂得多，但这就是我对为什么它运行得更快的解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T23:13:49.270

正如 Rob Penridge 所指出的，Paul Dorfman 确实是 SAS 哈希对象大师。Hashexp 与哈希表的大小无关，正如 Rob 的回答中提到的那样。

如果您有一个包含 100obs 和 10 个数字变量的表被加载到哈希表中，那么哈希表的大小就是 100obs*10vars*8bytes（假设所有数字变量都存储为 8byte 字段） 7.8KB 给或取 10 %。

请记住，SAS 在将记录添加到内存中的哈希表时动态分配 RAM 空间，因此您无需提前指定它应该是什么大小。[我一直在定期使用哈希表，但想不出任何地方可以预先指定尺寸]。

一般提示：如果您想知道哈希表的大小，请在要加载到哈希表中的数据集上运行 PROC CONTENTS 并乘以“观察长度”和“数据集中的 obs 数量”，这将以字节为单位给出所需的内存大小。如果你有那么多内存，那么你可以将它加载到内存中。

# jquery - jquery不显眼的验证不适用于表单中动态加载的内容

> ID：11359106
> 
> 赞同：0
> 
> 时间：2012-07-06T09:01:41.857
> 
> 标签：jquery, validation, unobtrusive-validation

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<Microinvest.net.Models.ViewModels.SupportRusViewModel>" %>
<% Html.EnableClientValidation(); %>
<% using (Html.BeginForm("HelpRequest", "Form", FormMethod.Post, new {id ="formTrim" }))
   { %>
    <tr>
        <td>
            <label for="suggestion_suggestionMessage">
                <%= Resources.Dict.strSuggestionDescription%></label>
        </td>
        <td>
            <%= Html.TextAreaFor(x => x.suggestion.suggestionMessage, new { @class = "technicalQuestionTextArea" })%><span
                class="required">
                <br />
                <%= Html.ValidationMessageFor(m => m.suggestion.suggestionMessage)%></span>
        </td>
    </tr>
    <tr>
        <td>
            <label for="suggestion_systemDescription">
                <%= Resources.Dict.strSuggestionSystemDescription%></label>
        </td>
        <td>
            <%= Html.TextAreaFor(x => x.suggestion.systemDescription, new { @class = "technicalQuestionTextArea" })%><span
                class="required">
                <br />
                <%= Html.ValidationMessageFor(m => m.suggestion.systemDescription)%></span>
        </td>
    </tr>
    <% } %> 
```

我正在该视图中加载该部分视图：

```
<% Html.EnableClientValidation(); %>
            <% using (Html.BeginForm("HelpRequest", "Form"))
               { %>
            <%= Html.ValidationSummary(true) %>
            <center>
                <fieldset>
                    <table cellpadding="3">
                        <tr>
                            <td valign="middle" align="right">
                                <label for="names">
                                    <%= Resources.Dict.strNames%></label>:<span class="required"></span>
                            </td>
                            <td align="left" style="width: 300px;">
                                <%= Html.TextBoxFor(m => m.names)%><span class="required"><br />
                                    <%= Html.ValidationMessageFor(m => m.names)%></span>
                            </td>
                        </tr>
                        <tr>
                            <td valign="middle" align="right">
                                <label for="city">
                                    <%= Resources.Dict.strOrganisation%></label>:<span class="required"></span>
                            </td>
                            <td align="left" style="width: 300px;">
                                <%= Html.TextBoxFor(m => m.city)%>
                            </td>
                        </tr>
                        <tr>
                            <td valign="middle" align="right">
                                <label for="telephone">
                                    <%= Resources.Dict.phoneNumber%></label>:<span class="required"></span>
                            </td>
                            <td align="left" style="width: 300px;">
                                <%= Html.TextBoxFor(m => m.telephone)%><span class="required"><br />
                                    <%= Html.ValidationMessageFor(m => m.telephone) %></span>
                            </td>
                        </tr>
                        <tr>
                            <td valign="middle" align="right">
                                <label for="email">
                                    <%= Resources.Dict.strEnterYourEmail%></label>:<span class="required"></span>
                            </td>
                            <td align="left" style="width: 300px;">
                                <%= Html.TextBoxFor(m => m.email)%><span class="required"><br />
                                    <%= Html.ValidationMessageFor(m => m.email) %></span>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <%= Resources.Dict.strQuestionType %>:
                            </td>
                            <td>
                                <%=Html.RadioButtonFor(m => m.questionType, "techinicalQuestion", new {@checked = "checked", @class = "questionType" })%>
                                <%= Resources.Dict.strTechnicalQuestion%>
                                <%=Html.RadioButtonFor(m => m.questionType, "suggestion", new { @class = "questionType" })%>
                                <%= Resources.Dict.strSuggestion %>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <div id="typeOfQuestion">
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td align="center" colspan="2">
                                <input id="register_button" type="submit" value="<%= Resources.Dict.strSend %>" />
                            </td>
                        </tr>
                    </table>
                </fieldset>
                <br />
            </center>
            <% } %> 
```

我正在使用该 javascript 来完成这项工作：

```
 function pageLoad() {
        $("#typeOfQuestion").load("/Form/TechnicalQuestionPartial");
        $(".questionType").click(function () {
            var UrlPass;
            if ($(this).val() === "techinicalQuestion") {
                UrlPass = "/Form/TechnicalQuestionPartial";
                //            $('#typeOfQuestion').load("/Form/TechnicalQuestionPartial");
            } else if ($(this).val() === "suggestion") {
                UrlPass = "/Form/SuggestionPartial";
                //            $('#typeOfQuestion').load("/Form/Suggestion");
            }
            $.ajax({
                url: UrlPass,
                success: function (data) {
                    $('#typeOfQuestion').html(data);
                    $('#typeOfQuestion').html($("#formTrim").html());
                    validateAjaxForm();
                }
            });
        });

    function validateAjaxForm() {

        $('#form0').removeData('validator');
        $('#form0').removeData('unobtrusiveValidation');
        $.validator.validate('#form0');
        $('#form0').validate().form();
//        $("form").removeData("validator");
//        $("form").removeData("unobtrusiveValidation");
//        $.validator.unobtrusive.parse("form");
//         $('#form0').validate();
    }
}; 
```

form0 是呈现的非部分视图中表单的 id 问题是

```
$('#form0').removeData('validator');
        $('#form0').removeData('unobtrusiveValidation');
        $.validator.validate('#form0');
        $('#form0').validate().form(); 
```

没有打开动态输入内容的验证

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:24:37.480

您可以尝试调用：

```
$.validator.unobtrusive.parse($("form")); 
```

这应该有望启用对动态添加的内容的验证。

# uitableview - iOS - 何时从 UITableViewCell 中删除子视图

> ID：11359108
> 
> 赞同：0
> 
> 时间：2012-07-06T09:01:44.563
> 
> 标签：uitableview, uiimage, subview

我有一个`UITableView`which a`UIImage`作为子视图添加到它的每个单元格。图片是PNG透明的。问题是当我滚动浏览时`UITableView`，图像会重叠，然后我会收到内存警告和其他东西。

这是配置单元格的当前代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    int cellNumber = indexPath.row + 1;
    NSString *cellImage1 = [NSString stringWithFormat:@"c%i.png", cellNumber];
    UIImage *theImage = [UIImage imageNamed:cellImage1];
    UIImageView *cellImage = [[UIImageView alloc] initWithImage:theImage];
    [cell.contentView addSubview:cellImage];

    return cell;
} 
```

我知道删除`UIImage`子视图的代码如下：

```
[cell.imageView removeFromSuperview]; 
```

但我不知道该放在哪里。我把它放在所有的行之间；甚至在 if 语句中添加了一个 else。似乎没有工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:15:07.920

你只是保持这个：

```
 [cell.imageview setImage:theImage]; 
```

并删除：

```
UIImageView *cellImage = [[UIImageView alloc] initWithImage:theImage];
[cell.contentView addSubview:cellImage]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:06:16.483

`UITableViewCell`已经附加了一个图像视图。消除：

```
UIImageView *cellImage = [[UIImageView alloc] initWithImage:theImage];
[cell.contentView addSubview:cellImage]; 
```

添加：

```
[cell.imageview setImage:theImage]; 
```

你可以走了！

结果代码将如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    UIImage *cellImage = [UIImage imageNamed:[NSString stringWithFormat:@"c%i.png", indexPath.row + 1]];
    [cell.imageView setImage:cellImage];

    return cell;
} 
```

# translation - 如何删除旧的翻译？

> ID：11359111
> 
> 赞同：0
> 
> 时间：2012-07-06T09:01:54.617
> 
> 标签：translation, facebook-opengraph

我注意到，当我在将新操作提交到 Facebook 之前更改一个单词时，它会生成新的翻译。我怎样才能删除旧的翻译，这样我就不需要翻译它们了？

谢谢你，佐伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:56:09.600

在您的应用程序的翻译工具视图中，转到“仪表板”。在右侧应该有一个链接，上面写着“删除并重新导入所有字符串/文字”。

# struts2 - Struts 2 ModelDriven for不同的请求参数名称和bean属性名称

> ID：11359116
> 
> 赞同：0
> 
> 时间：2012-07-06T09:02:17.777
> 
> 标签：struts2, struts-config, model-driven

是否可以通过实现 ModelDriven 接口将值分配给 bean 属性但在请求和 bean 中具有不同的名称

例如 Ajax 请求 DemoStruts.Action?param_a=649

param_a 参数的值必须设置为 bean 中的属性 paramAR。为此，是否有任何 xml 配置或注释来指定此映射

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:14:52.713

正常的机制是[别名拦截器](http://struts.apache.org/2.x/docs/alias-interceptor.html)，尽管我没有将它用于深度别名。

您可以使用这种技术玩一些非常可怕的游戏。不过，我从来没有完全确定这是否是个好主意。另一种选择是在操作本身中手动映射参数。这通常更容易理解。

# java - selenium web 驱动程序 - 切换到父窗口

> ID：11359118
> 
> 赞同：0
> 
> 时间：2012-07-06T09:02:23.230
> 
> 标签：java, selenium, window, webdriver, switch-statement

我使用硒网络驱动程序。我打开了一个父窗口。单击链接后，将打开新窗口。我从列表中选择一些值，此窗口会自动关闭。现在我需要在我的父窗口中操作。我怎样才能做到这一点？我尝试了以下代码：

```
String HandleBefore = driver.getWindowHandle();
driver.findElement(By.xpath("...")).click();
 for (String Handle : driver.getWindowHandles()) {
        driver.switchTo().window(Handle);}
 driver.findElement(By.linkText("...")).click();
 driver.switchTo().window(HandleBefore); 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:39:42.810

在单击打开新窗口的链接之前尝试此操作：

```
parent_h = browser.current_window
# click on the link that opens a new window
handles = browser.window_handles # before the pop-up window closes
handles.remove(parent_h)
browser.switch_to_window(handles.pop())
# do stuff in the popup
# popup window closes
browser.switch_to_window(parent_h)
# and you're back 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:41:33.190

公共布尔开关BackParentWindowTitle（字符串窗口标题）{

```
 boolean executedActionStatus = false;
    try {

        Thread.sleep(1000);
        WebDriver popup = null;
        Set<String> handles = null;

        handles =driver.getWindowHandles();
        Iterator<String> it = handles.iterator();
        while (it.hasNext()){

            String switchWin = it.next();
            popup = driver.switchTo().window(switchWin);

            System.out.println(popup.getTitle());
            if(popup.getTitle().equalsIgnoreCase(windowTitle)){

                log.info("Current switched window title is "+popup.getTitle());
                log.info("Time taken to switch window is "+sw.elapsedTime());
                executedActionStatus = true;
                break;
            }
            else
                log.info("WindowTitle does not found to switch over");
        }
    }
    catch (Exception er) {
        er.printStackTrace();
        log.error("Ex: "+er);
    }   
    return executedActionStatus;
} 
```

# javascript - 提供者跨浏览器 DOM 访问存在什么库？

> ID：11359129
> 
> 赞同：2
> 
> 时间：2012-07-06T09:03:37.643
> 
> 标签：javascript, html, dom, cross-browser

最近我意识到，在他们宣布 JQuery 2+ 将不再支持 IE8 及更低版本之后，JQuery 并没有承诺跨浏览器支持。仔细阅读他们的网站，我现在意识到这实际上是我的错误，JQuery 旨在简化 DOM 遍历，而不是专门为了消除支持的浏览器之间的差异。与 JQuery 一样出色，我需要寻找其他东西。

我的问题是，是否还有其他（商业）库具有扁平化各种 DOM 的明确意图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:07:31.923

如果 JQuery 和 JQuery2+ api 没有区别，您可以使用[google 的 javascript 加载器](https://developers.google.com/loader/)来获取适合给定浏览器版本的那个。我认为 GWT 将继续支持 ie < 8 但不如 Jquery 轻量级 :)

# c# - 使用 IDisposable 和没有 IDisposable 的内存释放

> ID：11359131
> 
> 赞同：3
> 
> 时间：2012-07-06T09:03:43.370
> 
> 标签：c#, memory, garbage-collection, dispose, idisposable

在我的应用程序中，我有一个每隔几秒钟创建一次的大对象。我用它做一些工作，然后我不再需要它了。

我在任务管理器中看到，即使我没有对该对象的任何引用并且需要收集它，ram 的大小也会增加。

实施后`IDisposable`，ram 立即下降。

为什么是这样？我没有这样做`GC.Collect`，我只是释放了对象并告诉 GC 它不需要为我的对象调用终结器。

**编辑：**

这是我用于`IDisposable`对象的代码：

```
public void Dispose()
{
  base.Dispose();
  Dispose(true);
  GC.SuppressFinalize();
}

private void Dispose(bool disposing)
{
  //here i release unmanaged resources
  if (disposing)
  {
    //here i release all managed resources
  }
}

~MyObject()
{
  Dispose(false);
} 
```

在我的大对象中，我`myObject.Dispose();`不再需要它之后再做。

我的问题不是关于如何实现`IDisposable`或 GC 一般如何工作。我只是想知道当我自己处理对象或让 GC 完成它的工作时会有什么不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:27:42.223

正如@Steven 在他的评论中指出的那样，IDisposable 是 CLR 不关心的。通过实现它，您只需告诉对象的使用者在不再需要对象时调用其 Dispose 方法。在内存管理方面，您可以为此编写自己的接口，例如 IDisposable2，并获得相同的技术效果。然而，这将是一件愚蠢的事情，因为.net 开发人员应该知道在不再需要对象时调用 idisposable.dispose。此外，该接口有内置语言 (c#) 支持（使用 {...}）。

你写“我试图实现 IDisposable，然后 ram 立即下降。”

重要的是你的“实施”做了什么。那里的代码应该清理非托管代码、Windows 资源等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:22:59.703

.NET 内存不像往常一样有 2 种状态（已使用和未使用），但实际上是 4：（A）由活动对象使用，（B）由死对象使用，（C）不被任何对象使用，但被框架和 (D) 未使用。

当你创建一个对象时，Framework 会首先尝试使用 C 类的内存，如果它没有足够的可用空间，它会向操作系统询问一些类型 (D) 的内存，并将其转换为(C) 然后将其用于您的对象。

当一个对象超出范围时，它将从 (A) 下降到 (B)，在下一次垃圾运行时，它将从 (B) 下降到 (C) 或 (D)。这在很大程度上取决于内部结构（想想内存碎片和朋友）、内存压力和收集的对象类型（想想 IDisposable 和朋友）

您想要实现的是，在您的大对象超出范围后，它使用的内存尽可能快地转到 (D)。这里有一些提示：

*   确保您的对象的大小是 4K 的倍数 - 这使得没有其他对象与您的对象共享内存页面的可能性更大，因此可以更轻松地将其返回给操作系统

*   尝试`AddMemoryPressure()`在对象处理周围使用支架，但要注意副作用。这类似于强制`GC.Collect()`，但侵入性较小：它会提示 GC**很快**收集，但不完全是**现在**

*   重新思考你的基本概念：大对象是单例吗（即在任何给定时间只能存在一个）？如果是，请考虑分配一次并回收它：这将使您的应用程序 RAM 需求更可预测 - 并且可能使您在运行时避免丑陋的 OOM 情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:51:39.793

使用 IDisposable 意味着您正在实现 Dispose 方法，在该方法中，您将所有清理代码用于不再需要的资源。它不会将您的对象移至托管堆，GC 仍将负责释放内存。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-06T09:15:42.497

当您实现 IDisposable 并释放该对象时，您就是将该对象标记为可用于垃圾回收。

但是，您无法准确预测何时收集它。

# wxpython - wxPython 多分割器窗口

> ID：11359144
> 
> 赞同：0
> 
> 时间：2012-07-06T09:04:34.573
> 
> 标签：wxpython, panels, splitter

我正在尝试将拆分器窗口嵌入到一组面板中，但是当我运行以下命令时，我看到一个闪光，好像顶部拆分器窗口覆盖了第二个拆分器窗口的顶部面板。我试图跟踪框架和面板的孩子，但无法弄清楚谁在上面。谁能帮我解决这个问题并解释为什么布局发生变化并且顶部面板明显被添加到拆分器的第二个面板掩盖了？谢谢大卫

```
#!/usr/bin/env python2.6
# encoding: ISO-8859-1
"""
Basic Splitter Panel Skeleton.py
"""

import sys
reload(sys) 
sys.setdefaultencoding("utf-8")
import os
import time
import wx

def timenow():
    return time.time()

########################################################################

class VSplitterPanel(wx.Panel):
    """ Constructs a Vertical splitter window with left and right panels"""
    #----------------------------------------------------------------------
    def __init__(self, parent, color):
        """Constructor"""
        wx.Panel.__init__(self, parent)
        self.SetBackgroundColour(color)
        splitter = wx.SplitterWindow(self, style = wx.SP_3D| wx.SP_LIVE_UPDATE)
        leftPanel = wx.Panel(splitter)
        rightPanel = wx.Panel(splitter)
        leftPanel.SetBackgroundColour('SEA GREEN')
        rightPanel.SetBackgroundColour('STEEL BLUE')

        splitter.SplitVertically(leftPanel, rightPanel) 
        PanelSizer=wx.BoxSizer(wx.VERTICAL)
        PanelSizer.Add(splitter, 1, wx.EXPAND | wx.ALL)
        self.SetSizer(PanelSizer)
########################################################################

class HSplitterPanel(wx.Panel):
    """ Constructs a Horizontal splitter window with top and bottom panels"""
    #----------------------------------------------------------------------
    def __init__(self, parent, color):
        """Constructor"""
        wx.Panel.__init__(self, parent)
        self.SetBackgroundColour(color)
        splitter = wx.SplitterWindow(self, style = wx.SP_3D| wx.SP_LIVE_UPDATE)
        TopPanel = wx.Panel(splitter)
        BottomPanel = wx.Panel(splitter)
        TopPanel.SetBackgroundColour('YELLOW GREEN')
        BottomPanel.SetBackgroundColour('SLATE BLUE')

        splitter.SplitHorizontally(TopPanel, BottomPanel) 
        PanelSizer=wx.BoxSizer(wx.VERTICAL)
        PanelSizer.Add(splitter, 1, wx.EXPAND | wx.ALL)
        self.SetSizer(PanelSizer)
########################################################################

class MainFrame(wx.Frame):
    """Constructor"""
    #----------------------------------------------------------------------
    def __init__(self, parent, id):
        wx.Frame.__init__(self, None, title="Basic Splitter Panel Skeleton",size=(800,600))
        t0=timenow()
        self.sb=self.CreateStatusBar()
        ################################################################
        # Define mainsplitter as child of Frame and add H and VSplitterPanel as children
        mainsplitter = wx.SplitterWindow(self, style = wx.SP_3D| wx.SP_LIVE_UPDATE)
        #splitterpanel1 = HSplitterPanel(mainsplitter,'LIGHT BLUE') 
        splitterpanel1 = HSplitterPanel(mainsplitter,'LIGHT BLUE') 
        splitterpanel2 = VSplitterPanel(mainsplitter,'LIGHT BLUE') 
        #print self.GetChildren(),'\n'
        #print splitterpanel1.leftPanel.GetChildren()
        mainsplitter.SplitHorizontally(splitterpanel2, splitterpanel1)
        MainSizer = wx.BoxSizer(wx.VERTICAL)
        MainSizer.Add(mainsplitter, 1, wx.EXPAND | wx.ALL)
        self.SetSizer(MainSizer)
        #################################################################
        self.sb.SetStatusText('Initialized in  %6.4f secs'%(timenow()-t0))
        self.Refresh()
        self.Show()

#---------------------------------------------------------------------- 

if __name__ == '__main__':
    app = wx.App()
    MainFrame(None, -1)
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:22:28.203

我在 Windows 上运行它时看到以下内容：

![在此处输入图像描述](../Images/7c378073b65145de7bfac4fe94b3ae9f.png)

哪个面板搞砸了？无论如何，判断哪个小部件在哪里的最简单方法是使用小部件检查工具。你可以在[这里](http://wiki.wxpython.org/Widget%20Inspection%20Tool)阅读。它易于使用，甚至可以使您的尺寸调整器可见，以帮助您找出布局问题。

# php - wordpress：打开 SEO URL 时无法获取类别 ID

> ID：11359146
> 
> 赞同：1
> 
> 时间：2012-07-06T09:04:37.490
> 
> 标签：php, wordpress, wordpress-theming

```
<?php
/*
Plugin Name: Members
*/

   function myFilter2($query) 
    {

        if ($query->is_category)
        {
            $currently_listing_categories = $query->query_vars['category__in'];             
            print_r($currently_listing_categories);
        }

    }

    add_filter('pre_get_posts','myFilter2');
?> 
```

当 url 对 SEO 不友好时，此插件会显示类别 ID

> [http://domain.com/wplab/wpla4/?cat=4](http://domain.com/wplab/wpla4/?cat=4)

. 但是当我打开 SEO

> [http://domain.com/wplab/wpla4/category/members/](http://domain.com/wplab/wpla4/category/members/)

数组为空

如何使用 SEO 友好的网址获取类别 ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:12:24.347

使用此函数获取 wp 中的当前类别：

```
function getCurrentCatID(){

 global $wp_query;
 if(is_category() || is_single()){
  $cat_ID = get_query_var('cat');
 }
 return $cat_ID; 
```

}

```
echo getCurrentCatID(); 
```

刚给你找的也试试这个，

```
if(isset($wp_query->get_queried_object()->cat_ID))
{
    $cur_catId = $wp_query->get_queried_object()->cat_ID;
}
if(isset($wp_query->get_queried_object()->ID))
{
    $cur_postId = $wp_query->get_queried_object()->ID;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:40:45.293

粘贴到您的插件中`functions.php`或在您的插件中使用

```
add_filter('pre_get_posts','myFilter2');
function myFilter2()
{
    global $wp_query;
    $cat_name= $wp_query->query_vars['name'];
    $cat_id=get_cat_id($cat_name);
    echo $cat_id; // the category id will be available, echo is for testing only
} 
```

当 url 像`http://example.com/category_name`

![在此处输入图像描述](../Images/9a7a4b731acb3bd3ac15d84c7a1a7189.png)

# c# - 当行具有空值时，实体框架返回空对象

> ID：11359147
> 
> 赞同：3
> 
> 时间：2012-07-06T09:04:44.500
> 
> 标签：c#, linq, entity-framework-4.3

我有一个现有的数据库（**我无法以任何方式修改**），我想使用 EF 对其进行编码。表之间没有主键、外键或实际关系——一切似乎都由使用数据库的应用程序处理。对于大多数表/实体来说，这是微不足道的。但是，我有一堂课，就像我正在努力学习的下面的一堂课（简化版）。

```
[Table("tableName")]
public class MyClass
{
    [Key]
    [Column("id")]
    public int? Id { get; set; }

    [Column("name")]
    public string CompanyName { get; set; }

    [Column("address")]
    public string Address { get; set; }
} 
```

像`_context.MyClasses.Where(x => x.Address == "something")`工作正常的事情。但是，似乎当数据库中的 id 列为 NULL 时，我得到一个空对象——即使 CompanyName 和 Address 有值。而且我需要这些值，无论 id （或其他）是否为空。有没有办法强制 EF 生成对象并忽略空列？

删除或移动 [Key] 属性会给我一个例外，例如“必须有一个键列”（如果有任何匹配，Id 列也用于将其他类的集合映射到该类中）。

**更新**不要将 Id 列视为实际标识符。它基本上只是一个带有愚蠢名称的整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:08:29.970

如果 KeyAttribute 在数据库中可为空，则不能将 KeyAttribute 置于 Id 属性之上。这就是给你带来问题的原因......

主键不能为空，但我想你知道......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T09:08:46.507

您必须有一`Key`列，并且该列必须包含值才能正常工作。将列标记为`Key`表示这是该表的主键列。

如果该`Key`列包含空值，则该行将不会返回给客户端。如果该`Id`列不是主键（因为它可以包含空值），那么您需要添加一个可以充当主键的新列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T09:14:33.790

您需要有一个 Key 列。EF要求你有一个。但是，出于您的目的，您可以使用另一种方法：

将您的 Id 的 StoreGeneratedPattern 属性设置为 Identity，并将其生成和管理留给 EF。不要将 Id 用于可为空的目的；创建另一个列，如 MyId，它是 Nullable 而不是 EntityKey，并以您想要的任何方式使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T10:59:37.877

# **解决方案**

就像 Andreas Niedermair 评论我的问题一样，我现在已将 [Key] 添加到数据库中的多个列中。我发现在这种情况下，作为复合键的四列总是唯一的。

Since I'm never inserting new content to the database, this seems like a decent solution in this edge case scenario, I guess.

# android - Google TV 模拟器和 GenericMotionEvent

> ID：11359149
> 
> 赞同：0
> 
> 时间：2012-07-06T09:05:04.327
> 
> 标签：android, emulation, google-tv

我想在我的谷歌电视应用程序中处理指针悬停事件，但没有任何成功。

正如我从文档中了解到的，我必须`OnGenericMotionListener`为我的小部件设置侦听器，但似乎`onGenericMotion()`没有调用该方法。

我的小部件的构造函数如下所示：

```
public MyWidget(Context context, AttributeSet attrs){

    super(context, attrs);
    setOnGenericMotionListener(new OnGenericMotionListener() {

       @Override
       public boolean onGenericMotion(View v, MotionEvent event) {
         Log.d("","Motion");
         return false;
       });     
    }
} 
```

不幸的是，我没有真正的设备，必须在谷歌电视模拟器中开发。是模拟器的限制还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T07:54:07.550

我尝试在 Google TV 设备上执行您的代码，它按预期工作。所以这似乎是模拟器的错误或限制。请在 Google TV 问题跟踪器中归档。

# python - 带有参数的 Django ManyToManyField 过滤器？

> ID：11359151
> 
> 赞同：2
> 
> 时间：2012-07-06T09:05:13.330
> 
> 标签：python, django, django-models, manytomanyfield

我有这样的模型：

```
class Category(Model):
    ...
    type = models.CharField(max_length=255, choices=settings.CATEGORIES)

class Product(models.Model):
    ...
    categories = models.ManyToManyField(Category) 
```

我有用户输入的类别列表（格式是任意的）：

```
c = [<Category: G, type: producer>, <Category: L, type: producer>, <Category: Teen, type: age>, <Category: Man, type: sex>] 
```

现在我想拥有所有类别中的“G”或“L”类型为“producer”、“Teen”类型为“age”和“Man”类型为“sex”的产品。例如，我正在做下一个查询集：

```
Product.objects.filter(Q(categories=c[0])|Q(categories=c[1]), Q(categories=c[2]), Q(categories=c[3]) 
```

有这样的查询：

```
SELECT "shop_product"."id", "shop_product"."title", "shop_product"."description",
"shop_product"."price", "shop_product"."code", "shop_product"."stored_count",
"shop_product"."sold_count", "shop_product"."added_date" FROM "shop_product"
INNER JOIN     "shop_product_categories" ON ("shop_product"."id" =   
"shop_product_categories"."product_id")    WHERE 
(("shop_product_categories"."category_id" = 1 OR 
"shop_product_categories"."category_id" = 2) AND    
"shop_product_categories"."category_id" = 4 AND 
"shop_product_categories"."category_id" = 6) 
```

我至少有一个符合此类要求的对象，但 queryset 什么也不返回。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:50:58.723

您需要进行级联过滤，否则当前选择将同时返回`"shop_product_categories"."category_id"`值为 1/2 和 4 和 6 的所有产品...这是一个示例查询集，它将返回您想要的内容：

```
Product.objects.filter(categories__in=c[0:2])
               .filter(categories=c[2])
               .filter(categories=c[3])
               .distinct() 
```

生成这样的SQL：

```
SELECT DISTINCT "test1_product"."id" FROM "test1_product" INNER JOIN "test1_product_categories" ON ("test1_product"."id" = "test1_product_categories"."product_id") 
    INNER JOIN "test1_product_categories" T4 
        ON ("test1_product"."id" = T4."product_id")
    INNER JOIN "test1_product_categories" T6 
        ON ("test1_product"."id" = T6."product_id") 
WHERE ("test1_product_categories"."category_id" IN (1, 2) 
    AND T4."category_id" = 3 
    AND T6."category_id" = 4 ) 
```

# webgl - 三.js ParticleSystem 创建给出 INVALID_OPERATION: not bound BUFFER_ARRAY

> ID：11359152
> 
> 赞同：0
> 
> 时间：2012-07-06T09:05:15.537
> 
> 标签：webgl, three.js, vertex-shader, particle-system

我正在尝试使用以下代码创建一个three.js ParticleSystem。在我安装在 Linux 主机上的 Chrome 上，这工作得非常好，但是当我尝试在 Windows Chrome 便携式设备上运行它时，我在第一次渲染调用时收到以下 WegGL 错误：

> WebGL：INVALID_OPERATION：vertexAttribPointer：没有绑定ARRAY_BUFFER WebGL：INVALID_OPERATION：drawArrays：属性设置不正确

...来自着色器配置的片段：...

```
 'particle' : {
        uniforms: {
            now: {
                    type: 'f',
                    value: 0
            },
            hitstart: {
                    type: 'f',
                    value: RADIUS
            },
            hitend: {
                    type: 'f',
                    value: RADIUS / 10
            },
            texture: { 
                type: "t", 
                value: 0, 
                texture: THREE.ImageUtils.loadTexture( "img/particle.png" ) 
            },
            color: {
                type: 'v4',
                value: particleColorToVector(this.particleColor,this.particleIntensity)

            }
        },
        attributes: {
            longitude: {
                    type: 'f',
                    value: []
            },
            latitude: {
                    type: 'f',
                    value: []
            },
            longitude_d: {
                    type: 'f',
                    value: []
            },
            latitude_d: {
                    type: 'f',
                    value: []
            },
            created: {
                    type: 'f',
                    value: []
            },
            lifetime: {
                    type: 'f',
                    value: []
            },
            size: {
                type: 'f',
                value: []
            }
        }, vertexShader: [
            'uniform float now;',
            'uniform float hitstart;',
            'uniform float hitend;',

            'attribute float created;',
            'attribute float lifetime;',

            'attribute float longitude;',
            'attribute float latitude;',

            'attribute float longitude_d;',
            'attribute float latitude_d;',

            'attribute float size;',

            'attribute float height;',
            'varying vec3 vNormal;',
            'varying float age;', 
```

... 创建粒子系统 ....

```
function buildParticles() {

    var shader = shaders['particle'];
    var longs = shader.attributes.longitude.value;
    var lats = shader.attributes.latitude.value;
    var destx = shader.attributes.longitude_d.value;
    var desty = shader.attributes.latitude_d.value;
    var lifetimes = shader.attributes.lifetime.value;
    var created = shader.attributes.created.value;
    var sizes = shader.attributes.size.value;

    particles = new THREE.Geometry();
    for (var i = 0; i < particle_count;i++) {

        particles.vertices.push( new THREE.Vector3(0,0,0));
        longs.push(degree_to_radius_longitude(0));
        lats.push(degree_to_radius_latitude(0));
        created.push(tic);
        destx.push(degree_to_radius_longitude(0));
        desty.push(degree_to_radius_latitude(0));
        lifetimes.push(0);
        sizes.push(0);
    }

    var material = new THREE.ShaderMaterial ( {
            uniforms: shader.uniforms,
            attributes: shader.attributes,
            vertexShader: shader.vertexShader,
            fragmentShader: shader.fragmentShader,
            transparent: true,
            blending: THREE.AdditiveBlending,
            depthTest: true
    });

    particleSystem = new THREE.ParticleSystem(
        particles,
        material
    );
    scene.add(particleSystem);
} 
```

我不知道为什么 VBO 未绑定或无法绑定。到目前为止我发现的与该主题相关的问题：

1.  [https://github.com/mrdoob/three.js/issues/1985](https://github.com/mrdoob/three.js/issues/1985)
2.  [https://github.com/mrdoob/three.js/issues/2073](https://github.com/mrdoob/three.js/issues/2073)

但两者似乎都不适用于我的情况。

任何帮助将不胜感激；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T16:35:30.987

仅作记录：

从顶点和片段着色器中删除了“变化的 vec3 vNormal”，因为它没有被使用来解决问题。但是我很好奇是什么让不同平台上的行为如此不同。

# svn - 如何找到所有需要提交的颠覆存储库？

> ID：11359153
> 
> 赞同：0
> 
> 时间：2012-07-06T09:05:21.647
> 
> 标签：svn

我对颠覆很陌生。我现在使用 TortoiseSVN 并且喜欢它，所以想坚持下去。

不过，我确实有问题。我们有许多颠覆存储库，每个存储库都包含单个产品、通用代码库内容或客户代码。我目前连接了大约 20 个存储库。

当我被要求每天对其中的许多进行更改时，很容易发现其中一个已更新且未提交，这导致我在本地进行了几天未添加到存储库中的更改。

这个问题有解决方案吗？如果有一种方法可以检查我机器上所有存储库的更改，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:11:44.377

有几个选择。使用 TortoiseSVN，您只需选择 SVN 提交选项，它将显示需要提交的任何内容（如果某些内容已更改且未提交，Explorer 还应将覆盖图标从绿色勾号更改）。

另一种选择是从解决方案的根目录下的命令行运行“svn status”。这将显示已修改和不受控制的文件，然后您可以直接从命令行提交或跳回 TortoiseSVN 并从那里提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:19:13.170

只是一个想法：

*   将所有工作副本放在一个文件夹中（或有一个列出工作副本的文件）
*   接管`svn status`并循环所有这些 WC。
*   如果`svn status`表明某些东西很脏，请去那里提交。

您可以手动启动脚本以查找文件或循环（作为计划任务）。

要在其他人更新任何存储库时获得通知，您可以使用 CommitMonitor 之类的东西：[http ://tools.tortoisesvn.net/CommitMonitor.html](http://tools.tortoisesvn.net/CommitMonitor.html)

# asp.net - 在会话期间保存浏览的页面

> ID：11359157
> 
> 赞同：1
> 
> 时间：2012-07-06T09:05:39.717
> 
> 标签：asp.net

我想将页面 url 保存到一个日志文件中，例如，用户在会话期间浏览并建议他/她下次。最好的情况是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:20:19.650

正确的方案是将用户 cookie 与他在服务器上的数据库中的数据连接起来，并保留最后访问的页面。

对于页面很少（而不是数据库）的站点，另一种方法是为您的每个页面设置一个编号，并将此编号仅保存在 cookie 中，然后根据此页码知道要显示的页面。例如，56 用于页面contact.aspx

因此，下次它会访问您的页面时，您会找到该参数并提出您的建议。

我不建议将完整的 url 页面保存在 cookie 上，因为您使 cookie 的大小太大并且可能导致其他问题（认为所有 cookie 在所有调用中都跟随用户，甚至调用查看一个图像）。

当然，您只需要为新会话提出此建议 - 并且如果用户不在同一页面上。还想一想如果用户打开了您网站的 10 个页面，并且会话在一段时间不活动后全部结束，会发生什么……再想一想用户界面，常见的方式是他在页尾。

# internet-explorer-8 - Nivo Slider 中的 IE8 透明 PNG 问题使用背景图像作为 Prev 和 Next 按钮

> ID：11359159
> 
> 赞同：0
> 
> 时间：2012-07-06T09:05:47.500
> 
> 标签：internet-explorer-8, png, transparency, nivo-slider

我在[我们的网站上使用](http://www.designlagoon.com/)[nivo 滑块](http://nivo.dev7studios.com/)

它在所有设备上都运行良好，除了 XP 上的 IE8，由于臭名昭著的 IE 透明 png 问题，我在翻转时在 prev 和 next 按钮周围出现黑色边框。上一个和下一个按钮需要是透明的 png，因为它们有一个阴影并且放置在过渡图像的顶部。

**箭** ![在此处输入图像描述](../Images/b357438bd262a1cb869d47a14b5caba8.png)

**IE8 XP 中的问题** ![在此处输入图像描述](../Images/c3b94d7635f0e0640c8f15d854743777.png)

**的HTML**

```
<div class="nivo-directionNav">
    <a class="nivo-prevNav" style="display: none;"></a>
    <a class="nivo-nextNav" style="display: none;"></a>
</div> 
```

**CSS**

```
.nivo-directionNav a {
    position:absolute;
    z-index:9;
    cursor:pointer;
    }

/* the arrows are taken from a single sprite with a standard and active image
for prev and next with the background-position changed on rollover   */

.nivo-prevNav, .nivo-nextNav {
    width: 80px;
    height: 100%;
    }

.nivo-prevNav {
    left:0px;
    background: url("images/nivo_4_arrows.png") no-repeat 0 0;
    }

.nivo-prevNav:hover {
    background: url("images/nivo_4_arrows.png") no-repeat -80px 0;
    } 
```

我试图实现这个javascript作为修复：

```
var i;
for (i in document.images) {
if (document.images[i].src) {
    var imgSrc = document.images[i].src;
    if (imgSrc.substr(imgSrc.length-4) === '.png' || imgSrc.substr(imgSrc.length-4) === '.PNG') {
        document.images[i].style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true',sizingMethod='crop',src='" + imgSrc + "')";
    }
}
} 
```

...以及在此论坛上的类似帖子中找到的[此插件，但都没有证明是成功的。](https://gist.github.com/1318344)

在这方面浪费了很多时间，所以我真的很感谢任何可以解决问题的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:07:49.157

尝试将以下行插入“ *nivo-slider.css* ”（未指定主题的样式）：

```
.nivo-slice
{
background: transparent;
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)" !important;/* IE8 */   
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF) !important;/* IE6 & 7 */      
zoom: 1;
} 
```

它适用于*切片*效果，但将其用于其他效果，但是在我的情况下，此解决方案将*淡入淡出*效果更改为简单的更改图片效果（不褪色）。也许它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:13:02.090

此 javascript 脚本不适用于背景上的图像，仅适用于“img src”...

有两种解决方法：使用“img src”并将“position:absolute”放置在背景中。

或者

使用 if IE 而不是 background-image 使用：

filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true',sizingMethod='crop',src='link-to-image');

继续为其他浏览器使用背景图像..

# java - Math.pow 难度

> ID：11359160
> 
> 赞同：1
> 
> 时间：2012-07-06T09:05:54.483
> 
> 标签：java, pow

当我输入 1000 投资金额 4.25 月利率和 1 年时，为什么我得到的结果是 4.384414858452464E11 而不是预期的 1043.34？

```
import java.util.Scanner;

public class FinancialApplicationFutureInvestment_13 {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        System.out.println("Enter investment amount: ");
        int investmentAmount = input.nextInt();
        System.out.println("Enter monthly interest rate: ");
        double monthlyInterestRate = input.nextDouble();
        System.out.println("Enter number of years");
        int numOfYears = input.nextInt();

        double futureInvestmentValue = investmentAmount *
            (Math.pow(1 + monthlyInterestRate, numOfYears * 12));
        System.out.println("Accumulated value is: " + futureInvestmentValue);

        double test = Math.pow(1 + monthlyInterestRate, numOfYears * 12);
        System.out.println(test);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T09:09:33.443

月利率可能需要输入为 0.0425

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T09:07:39.613

`1 + monthlyInterestRate`

是`monthlyInterestRate`一个原始因素，还是以百分比表示？

尝试除以一百。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T09:10:43.900

公式是

```
A = P(1+r/100)^n 
```

所以应该是

```
investmentAmount * (Math.pow(1 + (monthlyInterestRate/100), numOfYears * 12)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T09:11:16.487

好吧，您计算 1+4.25 (5.25) 作为月利率，而不是 1+(4.25/100) 。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T10:49:11.760

您应该在 System.out.println (double to int) -- (int)(futureInvestmentValue * 100) / 100.0 中使用强制转换

# robotium - 我需要 Roboium 方法的帮助

> ID：11359161
> 
> 赞同：0
> 
> 时间：2012-07-06T09:06:06.493
> 
> 标签：robotium

如何使用getAllOpenedActivities()、getActivityMonitor()、setActivityOrientation()、getButton()；getCurrentButton()，方法？我是 Robotium 的新手，即使我不知道如何使用任何 get 方法，请任何人帮我举例说明。对我会更有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:54:51.143

要使用任何方法，您需要创建一个`Solo`对象。像这样：

```
@Override
protected void setUp() throws Exception {
    solo = new Solo(getInstrumentation(), getActivity());
} 
```

然后在您的测试方法中调用该方法：

```
public void testYourTest() throws IOException{
      solo.clickOnText("Menu"); 
      solo.getButton("Button 1"); 
      etc. 
} 
```

我建议您参考 Robotium 提供的 javadoc。它包含在您作为 .jar 文件下载的文件中。您需要将扩展​​名 (.jar) 更改为 zip (.zip)。

希望这可以帮助！

# php - php函数的逻辑

> ID：11359162
> 
> 赞同：1
> 
> 时间：2012-07-06T09:06:08.807
> 
> 标签：php, mysql

我需要制作一个 php 代码来检查酒店房间的可用性，从现在开始，用户可以预订最多 90 天或更短的房间，并且酒店总共有 30 间客房可用，所以如果我为像他的预订这样的用户存储数据从一个日期到另一个下一次如果我想检查可用性我应该如何在 php 中执行它，逻辑是什么。

显然我这样的简单查询对于例如是不正确的

```
$this->db->select('*')
    ->from('default_bookings')
    ->where('booking_from <',$input['fromdate'])
    ->where('booking_till >',$input['tilldate']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:07:36.633

这看起来像[Zend_DB_Select](http://framework.zend.com/manual/fr/zend.db.select.html)

试试这个：

```
$this->db->select('*')
->form('default_bookings')
->where('booking_from < ?',$input['fromdate'])
->where('booking_till > ?',$input['tilldate']); 
```

这 ”？” 那么在哪里失踪......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:32:24.237

我假设，您想在预订日历中找到可用空间。

所以你有一个开始日期和一个结束日期。您查看每个房间并做出以下假设：

1.  开始日期和/或结束日期不应出现在确认的预订期内。
2.  开始日期和结束日期之间没有时间段。

SQL 查询可能如下所示：

```
Table bookings {
    int booking_id
    int room_id
    datetime reservation_start
    datetime reservation_end
    ...
}

SELECT
    COUNT(*)
FROM
    bookings AS test1
WHERE
    room_id={$roomId}
    AND
    {$startdate} NOT BETWEEN reservation_start AND reservation_end
    AND
    {$enddate} NOT BETWEEN reservation_start AND reservation_end
    AND
    reservation_start NOT BETWEEN {$startdate} AND {$enddate}; 
```

如果结果为 0，则与现有预留没有交集。

您还可以通过将此查询用作子查询来自动执行“查看房间”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-02T23:06:12.147

这对我有用。如果结果为 0，则区间内没有预订。抵达日期可以与出发日期相同。

```
 SELECT COUNT(*)
        FROM booking
        WHERE room_id = :room_id
        AND (
            (date_to > :start AND date_to < :end)
            OR
            (date_from > :start AND date_from < :end)
            OR
            (date_from < :start AND date_to > :end)
        ) 
```

# drupal-7 - 如何在 drupal 7 中包含/调用 profile2 注册表单

> ID：11359172
> 
> 赞同：0
> 
> 时间：2012-07-06T09:06:56.613
> 
> 标签：drupal-7

我创建了另一个档案学生，并添加了一个名为 class 的字段。我想显示这个表格，包括提交的课程。

如何显示学生注册表..请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:38:46.100

我在块中使用了以下代码

```
<?php
     print drupal_render(drupal_get_form('user_register_form'));
$profile = profile2_load_by_user($account);
print drupal_render(field_view_field('profile2', $profile['Student'], 'field_class'));
?> 
```

# mysql - 将 SELECT AS 与值进行比较

> ID：11359173
> 
> 赞同：0
> 
> 时间：2012-07-06T09:06:57.470
> 
> 标签：mysql, sql

有了这个查询

```
SELECT least(col1, col2, col3) AS fancyTitle
FROM table
ORDER BY fancyTitle 
```

例如，如何将`fancyTitle`其与一个值进行比较，以便我只输出高于 100 的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:12:01.283

`+`您必须在您想要的列之间放置运算符`SUM()`。您不能将逗号分隔的列表传递给`SUM()`

你可以做：

```
SELECT id, SUM(col1 + col2+ col3) AS fancyTitle
FROM tbl
GROUP BY id
HAVING SUM(col1 + col2 + col3) > 100 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T09:13:01.607

标准 SQL：

```
SELECT SUM(col1 + col2 + col3) AS fancyTitle
FROM table
HAVING SUM(col1 + col2 + col3) > 100 ; 
```

* * *

MySQL 也允许这样做（不推荐，但它会这样做）：

```
SELECT SUM(col1 + col2 + col3) AS fancyTitle
FROM table
HAVING fancyTitle > 100 ; 
```

* * *

或者也许你只想要这个：

```
SELECT col1 + col2 + col3 AS fancyTitle
FROM table
WHERE col1 + col2 + col3 > 100 
ORDER BY fancyTitle ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:10:03.793

试试这个 ：

```
SELECT sum(col1, col2, col3) AS fancyTitle
FROM table where sum(col1, col2, col3) > 100
GROUP BY fancyTitle; 
```

# c# - 如何在插入模式下设置 RadDataForm？

> ID：11359175
> 
> 赞同：2
> 
> 时间：2012-07-06T09:07:09.030
> 
> 标签：c#, .net, wpf, telerik

我想在启动时以插入模式显示 RadDataForm。怎么做？是否可以仅在 XAML 中执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:39:54.327

有`RadDataForm`一个`AutoEdit`属性，它应该在加载时将控件设置为编辑模式，但我一直无法让它工作。不过还有一个选择；`RadDataForm`在的事件上设置一个事件处理程序`Loaded`，然后`RadDataForm.BeginEdit()`从该处理程序调用。这将使表单在加载后进入编辑模式。

```
<telerik:RadDataForm
    x:Name="ctrlPersonForm"
    AutoEdit="True"
    AutoGenerateFields="True"
    Header="Person"
    ItemsSource="{Binding Mode=TwoWay, Path=People}"
    Loaded="OnPersonFormLoaded">
</telerik:RadDataForm>

private void OnPersonFormLoaded(object sender, RoutedEventArgs e)
{
    ctrlPersonForm.BeginEdit();
} 
```

如果您只想在控件加载时*插入*一个新项目（而不是编辑现有项目），那么您可以使用相同的处理程序来调用该`RadDataForm.AddNewItem()`方法：

```
private void OnPersonFormLoaded(object sender, RoutedEventArgs e)
{
    ctrlPersonForm.AddNewItem();
} 
```

# vb.net - Microsoft.VisualBasic.Compatibility.VB6.RadioButtonArray

> ID：11359176
> 
> 赞同：0
> 
> 时间：2012-07-06T09:07:30.903
> 
> 标签：vb.net, vb6, vb.net-2010, vb6-migration

我的老板给了我从 VB6 到 VB2005（2.0 .Net 框架）然后到 VB2010（4.0 .Net 框架）的不同转换。

当我正在转换时，我发现这个警告从 VB2005 到 VB2010，

警告“Microsoft.VisualBasic.Compatibility.VB6.RadioButtonArray”已过时：“Microsoft.VisualBasic.Compatibility.* 类已过时，仅在 32 位进程中受支持。[http://go.microsoft.com/fwlink/?linkid=160862](http://go.microsoft.com/fwlink/?linkid=160862) '。

警告类型库导入器无法转换成员“DISPPARAMS.rgdispidNamedArgs”的签名。

警告 类型库导入器无法转换成员“DISPPARAMS.rgvarg”的签名。

如果我忽略它，程序仍然可以在调试模式下成功运行，但是当我以 .exe 运行时，bin 文件夹中的 .exe 将在运行某些功能时终止。

谁能告诉我为什么以及如何详细解决它？请。如果您有任何关于将 vb 转换为 vb.net 的好网站，请与我们分享 =]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:53:33.493

VB6 允许您相当容易地制作控件数组，RadioButtonArray 是一种构造，可以将控件数组转换为可以以相同方式使用的东西。我一直发现通过创建控件类型的空数组并使用 Tag 属性作为索引然后将控件分配给新数组来更容易读取结果。

此示例假定您有 4 个 RadioButtons，它们的 Tag 属性设置为 0 到 3。

```
Public Class Form1

    Dim rbArray(3) As RadioButton

    Public Sub New()

        ' This call is required by the designer.
        InitializeComponent()

        ' Add any initialization after the InitializeComponent() call.
        For Each cntrl As Control In Me.Controls
            If TypeOf cntrl Is RadioButton Then
                Dim rb As RadioButton = CType(cntrl, RadioButton)
                rbArray(CInt(rb.Tag)) = rb
            End If
        Next
    End Sub
End Class 
```

**通用事件处理程序示例**

```
Private Sub RadioButton_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles RadioButton1.CheckedChanged, RadioButton2.CheckedChanged, RadioButton3.CheckedChanged, RadioButton4.CheckedChanged
    Dim rb As RadioButton = CType(sender, RadioButton)

    Select Case CInt(rb.Tag)  'Note use of Tag instead of Index
        Case 0

        Case 1

        Case 2

        Case 3

    End Select
End Sub 
```

# oop - 用他的方法销毁lua对象

> ID：11359180
> 
> 赞同：5
> 
> 时间：2012-07-06T09:07:37.423
> 
> 标签：oop, lua

我想通过自己的方法销毁类实例。例如：

```
obj = Object()
obj:destroy()
type(obj) == nil 
```

对象是在C上实现的。有可能吗？

如果不可能，第二种方法是：

```
_G["obj"] = nil
collectgarbage() 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T16:04:15.487

> 我想通过自己的方法销毁类实例。

您应该*不惜一切代价避免这种情况*。*仅在绝对需要*时才在 Lua 中公开显式析构函数。

处理这个问题的正确方法是给你的 Lua C 对象一个带有[metamethod`__gc`的](http://www.lua.org/manual/5.1/manual.html#2.10.1)元表。这个元方法将在 Lua 垃圾收集对象之前被调用。

如果您绝对必须使用显式析构函数（因为您希望用户能够在完成后立即释放昂贵的资源，而无需等待垃圾回收），那么您需要做两件事：

1.  不***要求***用户显式销毁对象。也就是说，对象应该能够通过析构函数或垃圾回收来销毁。

2.  当对象被显式销毁时不要*破坏*它。如果用户调用显式销毁函数，则每个接受此对象的函数（成员函数或自由函数）都需要继续工作。这些功能可能什么都不做，这很好。但程序不应该*崩溃*。

    基本上，您的对象在被明确销毁时仍需要处于“活动”状态。您需要让对象成为僵尸：活着，但不是很有用。这样，即使您的程序没有做正确的事情，您的程序仍然可以运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T12:35:45.553

在您的示例中简单`obj = nil`就足够了。请注意，您**不会破坏**对象的内容，而是删除了变量中的引用`obj`，从而使内存中某处的真实对象减少了一个引用，并且如果达到 0 个引用，则取消引用一个符合 GC 的条件。

如果您的对象在销毁时没有要执行的外部任务，那么这几乎就是您所需要的。只是通过让它们超出范围或用其他东西或覆盖包含这些引用的变量/表成员来丢失所有引用`nil`。否则，您需要先调用**特定于对象的**析构函数，然后才能删除引用。

不可能让这样的析构函数自动从各处删除所有引用，但至少它可以清除对象的内部状态并设置一些内部标志，表明对象不再可用或准备重新初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-14T15:47:51.680

在某种程度上，这是可能的。您可以在对象中创建一个子表作为私有数据存储。该子表仅由对象管理，因此只能有一个引用。如果您为对象定义析构方法，那么它将删除相应的子表，使其符合垃圾回收条件。当然，父表仍然存在，只留下不占用大量资源的方法。

这是否是“好的设计”是主观的。我只是为提出的问题提供一个解决方案。

# playframework-2.0 - 是否可以将 POST 元素与模型中的另一个名称匹配

> ID：11359181
> 
> 赞同：0
> 
> 时间：2012-07-06T09:07:37.420
> 
> 标签：playframework-2.0

使用 PlayFramework 2.0.1，我有一个模型：

```
class MyModel extends Model {
    @Constraints.Required
    public String someProperty;
}

class MyController extends Controller {
    public static Result action() {
        Form<MyModel> form = form(MyModel.class).bindFromRequest();

        if (form.hasErrors()) {
            // Return errors
        }
        else {
            // Process
        }
    }
} 
```

假设我用`mysite.com/action?some-property=value`. 如何`some-property`从请求匹配`someProperty`到模型？可能吗？

因为到目前为止，它`hasErrors()`起火`true`以来`someProperty`似乎失踪了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:28:45.517

不要向模型添加约束，而是手动验证和绑定它：

```
// ...
MyModel some = MyModel.find.byId(id);
String someFromReq = form().bindFromRequest().get("some-property");

if (someFromReq == null || someFromReq.equals("")){
    return badRequest();
}

some.someProperty
some.update();
// ... 
```

# java - 为什么不使用 java.util.logging？

> ID：11359187
> 
> 赞同：401
> 
> 时间：2012-07-06T09:07:47.553
> 
> 标签：java, logging, slf4j, logback

我有生以来第一次发现自己处于编写开源 Java API 的位置。希望被包括在许多其他项目中。

对于日志记录，我（以及与我一起工作的人）一直使用 JUL ( `java.util.logging`) 并且从未遇到任何问题。但是现在我需要更详细地了解我应该为我的 API 开发做些什么。我已经对此进行了一些研究，并且根据我获得的信息，我变得更加困惑。因此这篇文章。

因为我来自七月，所以我对此有偏见。我对其余部分的了解并不大。

根据我所做的研究，我提出了人们不喜欢 JUL 的以下原因：

1.  *“早在 Sun 发布 JUL 之前，我就开始使用 Java 进行开发，我继续使用 logging-framework-X 比学习新东西更容易”*。唔。我不是在开玩笑，这实际上是人们所说的。有了这个论点，我们都可以做 COBOL。（但我当然可以将其视为一个懒惰的家伙）

2.  *“我不喜欢 JUL 中的日志记录级别的名称”*。好吧，说真的，这还不足以成为引入新依赖项的理由。

3.  *“我不喜欢 JUL 输出的标准格式”*。唔。这只是配置。您甚至不必在代码方面做任何事情。（的确，在过去，您可能必须创建自己的 Formatter 类才能正确处理）。

4.  *“我使用其他也使用 logging-framework-X 的库，所以我认为使用它更容易”*。这是一个循环论证，不是吗？为什么“每个人”都使用 logging-framework-X 而不是 JUL？

5.  *“其他人都在使用 logging-framework-X”*。对我来说，这只是上述情况的一个特例。大多数人并不总是正确的。

所以真正的大问题是**为什么不是 JUL？**. 我错过了什么？日志记录立面（SLF4J、JCL）存在的理由是历史上已经存在多个日志记录实现，而在我看来，其原因实际上可以追溯到 7 月之前的时代。如果 JUL 是完美的，那么日志立面将不存在，还是什么？更令人困惑的是，JUL 在某种程度上本身就是一个外观，它允许交换处理程序、格式化程序甚至 LogManager。

与其采用多种方式来做同样的事情（记录），我们难道不应该首先质疑为什么它们是必要的吗？（看看这些原因是否仍然存在）

好的，到目前为止，我的研究导致了一些我可以看到可能是JUL**真正问题的事情：**

1.  **性能**。有人说 SLF4J 的性能优于其他性能。在我看来，这似乎是过早优化的情况。如果您需要每秒记录数百兆字节，那么我不确定您是否走在正确的道路上。JUL 也在不断发展，您在 Java 1.4 上所做的测试可能不再适用。[您可以在此处](http://jeremymanson.blogspot.dk/2009/04/faster-logging-with-faster-logger.html)阅读有关它的信息，并且此修复程序已将其纳入 Java 7。许多人还谈到了日志记录方法中字符串连接的开销。然而，基于模板的日志记录避免了这种成本，它也存在于 JUL 中。就我个人而言，我从来没有真正编写过基于模板的日志记录。太懒了。例如，如果我使用 JUL 执行此操作：

    ```
     log.finest("Lookup request from username=" + username 
        + ", valueX=" + valueX
        + ", valueY=" + valueY)); 
    ```

    我的 IDE 会警告我并请求允许它应该将其更改为：

    ```
     log.log(Level.FINEST, "Lookup request from username={0}, valueX={1}, valueY={2}", 
        new Object[]{username, valueX, valueY}); 
    ```

    ..我当然会接受。许可授予 ！感谢您的帮助。

    所以我自己实际上并没有编写这样的语句，这是由 IDE 完成的。

    总之，关于性能问题，我没有发现任何表明 JUL 的性能与竞争对手相比不好的东西。

2.  **来自 classpath 的配置**。开箱即用的 JUL 无法从类路径加载配置文件。只需[几行代码](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4958543)就可以做到这一点。我明白为什么这可能很烦人，但解决方案简短而简单。

3.  **输出处理程序的可用性**。JUL 带有 5 个开箱即用的输出处理程序：控制台、文件流、套接字和内存。这些可以扩展或编写新的。例如，这可能是写入 UNIX/Linux 系统日志和 Windows 事件日志。我个人从未有过这个要求，也没有见过它使用过，但我当然可以理解为什么它可能是一个有用的功能。例如，Logback 带有一个用于 Syslog 的附加程序。我仍然认为

    1.  99.5% 的输出目的地需求由 JUL 开箱即用的内容覆盖。
    2.  特殊需求可以通过 JUL 之上的自定义处理程序来满足，而不是在其他东西之上。对我来说，没有任何迹象表明为 JUL 编写 Syslog 输出处理程序比为另一个日志框架编写的时间更长。

我真的很担心我忽略了一些东西。除了 JUL 之外，日志门面和日志实现的使用如此广泛，以至于我不得不得出结论，就是我不明白。恐怕这不是第一次了。:-)

那么我应该如何处理我的 API 呢？我希望它成功。我当然可以“顺其自然”并实现 SLF4J（这似乎是当今最流行的），但为了我自己，我仍然需要确切地了解今天的 JUL 到底有什么问题，这保证了所有的模糊性？为我的图书馆选择 JUL 会破坏自己吗？

## 测试性能

*（nolan600 于 2012 年 7 月 7 日添加的部分）*

Ceki 下面有一个关于 SLF4J 的参数化比 JUL 快 10 倍或更多的参考。所以我开始做一些简单的测试。乍一看，这种说法肯定是正确的。以下是初步结果（但请继续阅读！）：

*   执行时间 SLF4J，后端 Logback：1515
*   执行时间 SLF4J，后端 JUL：12938
*   执行时间7月：16911

上面的数字是毫秒，所以越少越好。所以 10 倍的性能差异首先实际上非常接近。我的第一反应是：太多了！

这里是测试的核心。可以看出一个整数和一个字符串在一个循环中构造，然后在 log 语句中使用：

```
 for (int i = 0; i < noOfExecutions; i++) {
        for (char x=32; x<88; x++) {
            String someString = Character.toString(x);
            // here we log 
        }
    } 
```

（我希望 log 语句同时具有原始数据类型（在本例中为 int）和更复杂的数据类型（在本例中为 String）。不确定它是否重要，但你有它。）

SLF4J 的日志语句：

```
logger.info("Logging {} and {} ", i, someString); 
```

JUL 的日志语句：

```
logger.log(Level.INFO, "Logging {0} and {1}", new Object[]{i, someString}); 
```

在实际测量完成之前，JVM 已通过执行一次相同的测试“预热”。在 Windows 7 上使用了 Java 1.7.03。使用了最新版本的 SLF4J (v1.6.6) 和 Logback (v1.0.6)。标准输出和标准错误被重定向到空设备。

但是，现在小心，事实证明 JUL 大部分时间都花在了其中，`getSourceClassName()`因为 JUL 默认情况下会在输出中打印源类名称，而 Logback 不会。所以我们在比较苹果和橙子。我必须再次进行测试并以类似的方式配置日志记录实现，以便它们实际上输出相同的内容。然而，我确实怀疑 SLF4J+Logback 仍然会排在首位，但与上面给出的初始数字相去甚远。敬请关注。

顺便说一句：该测试是我第一次实际使用 SLF4J 或 Logback。一次愉快的经历。当你刚开始的时候，JUL 肯定不会那么受欢迎。

## 测试性能（第 2 部分）

*（nolan600 于 2012 年 7 月 8 日添加的部分）*

事实证明，在 JUL 中如何配置模式对性能并不重要，即它是否包含源名称。我尝试了一个非常简单的模式：

```
java.util.logging.SimpleFormatter.format="%4$s: %5$s [%1$tc]%n" 
```

这根本没有改变上述时间。`getSourceClassName()`我的分析器显示，即使这不是我的模式的一部分，记录器仍会花费大量时间来调用。图案无所谓。

因此，我在性能问题上得出结论，至少对于经过测试的基于模板的日志语句，JUL（慢）和 SLF4J+Logback（快）之间的实际性能差异似乎大约是 10 倍。就像Ceki说的那样。

我还可以看到另一件事，即 SLF4J 的`getLogger()`通话比 JUL 的同上要贵得多。（如果我的分析器准确，则为 95 毫秒对 0.3 毫秒）。这是有道理的。SLF4J 必须在底层日志实现的绑定上做一些时间。这并不吓到我。这些调用在应用程序的生命周期中应该很少见。牢度应该在实际的日志调用中。

# 定论

*（nolan600 于 2012 年 7 月 8 日添加的部分）*

感谢您的所有回答。与我最初的想法相反，我最终决定将 SLF4J 用于我的 API。这是基于许多事情和您的输入：

1.  它提供了在部署时选择日志实现的灵活性。

2.  在应用程序服务器中运行时，JUL 的配置缺乏灵活性的问题。

3.  SLF4J 肯定比上面详述的要快得多，特别是如果你将它与 Logback 结合使用。即使这只是一个粗略的测试，我有理由相信在 SLF4J+Logback 上的优化要比在 JUL 上付出更多的努力。

4.  文档。SLF4J 的文档更加全面和精确。

5.  模式灵活性。当我做测试时，我开始让 JUL 模仿 Logback 的默认模式。此模式包括线程的名称。事实证明，JUL 不能开箱即用。好的，直到现在我还没有错过它，但我认为它不应该是日志框架中缺少的东西。时期！

6.  今天大多数（或许多）Java 项目都使用 Maven，因此添加依赖项并不是什么大事，特别是如果该依赖项相当稳定，即不会不断更改其 API。这对于 SLF4J 来说似乎是正确的。SLF4J jar 和朋友的体积也很小。

所以发生的奇怪的事情是，在使用了 SLF4J 之后，我实际上对 JUL 非常不满。我仍然很遗憾 JUL 必须这样。JUL 远非完美，但可以胜任。只是不够好。可以`Properties`作为一个例子说同样的事情，但我们不考虑抽象它以便人们可以插入他们自己的配置库和你有什么。我认为原因是它`Properties`刚好在酒吧上方，而今天的 JUL 正好相反……过去它是零，因为它不存在。

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2012-07-06T10:32:52.240

**免责声明**：我是 log4j、SLF4J 和 logback 项目的创始人。

偏爱 SLF4J 有客观原因。一方面，**SLF4J 允许最终用户自由选择底层的日志框架**。此外，精明的用户往往更喜欢[logback，它提供了 log4j 之外的功能](http://logback.qos.ch/reasonsToSwitch.html)，而 jul 则远远落后。对于某些用户来说，功能方面的 jul 可能就足够了，但对于许多其他用户来说，它就不是了。简而言之，如果日志记录对您很重要，您可能希望使用带有 logback 的 SLF4J 作为底层实现。如果日志记录不重要，那么 jul 就可以了。

但是，作为 oss 开发人员，您需要考虑用户的偏好，而不仅仅是您自己的偏好。因此，您应该采用 SLF4J 并不是因为*您*确信 SLF4J 比 jul 更好，而是因为目前（2012 年 7 月）大多数 Java 开发人员更喜欢 SLF4J 作为他们的日志 API。如果您最终决定不关心民意，请考虑以下事实：

1.  喜欢 jul 的人这样做是出于方便，因为 jul 与 JDK 捆绑在一起。据我所知，没有其他客观的论据支持 jul
2.  你自己对 jul 的偏好就是这样，*一个偏好*。

因此，将“确凿的事实”置于舆论之上，虽然看似勇敢，但在这种情况下却是一个逻辑谬误。

如果仍然不相信，[JB Nizet](https://stackoverflow.com/users/571407/jb-nizet)提出了一个额外而有力的论点：

> 除了最终用户可能已经为他自己的代码或使用 log4j 或 logback 的另一个库完成了此自定义。jul 是可扩展的，但是必须扩展 logback、jul、log4j 和上帝只知道其他哪个日志框架，因为他使用四个库，使用四个不同的日志框架很麻烦。通过使用 SLF4J，您允许他配置他想要的日志框架，而不是您选择的那个。**请记住，一个典型的项目使用无数的库，而不仅仅是您**的 .

如果出于某种原因你讨厌 SLF4J API 并且使用它会扼杀你工作中的乐趣，那么一定要选择 jul 毕竟，有办法[将 jul 重定向到 SLF4J](http://www.slf4j.org/legacy.html#jul-to-slf4j)。

顺便说一句，jul 参数化至少比 SLF4J 慢 10 倍，这最终会产生明显的差异。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-07-06T09:17:24.877

1.  `java.util.logging`在 Java 1.4 中引入。在此之前有记录的用途。这就是存在许多其他日志记录 API 的原因。这些 API 在 Java 1.4 之前被大量使用，因此拥有很大的市场份额，而在 1.4 发布时不仅下降到零。

2.  七月的开始并没有那么好。你提到的许多事情在 1.4 中要糟糕得多，在 1.5 中才变得更好（我猜在 6 中也是如此，但我不太确定）。

3.  JUL 不太适合在同一个 JVM 中具有不同配置的多个应用程序（想想不应该交互的多个 Web 应用程序）。Tomcat 需要跳过一些障碍才能使其正常工作（如果我理解正确，则有效地重新实现 JUL）。

4.  你不能总是影响你的库使用的日志框架。因此，使用 SLF4J（实际上只是其他库之上的一个非常薄的 API 层）有助于保持整个日志世界的一致图景（因此您可以决定底层日志框架，同时仍然在同一系统中拥有库日志）。

5.  库不能轻易改变。如果以前版本的库曾经使用 logging-library-X，则它不能轻易切换到 logging-library-Y（例如 JUL），即使后者显然更胜一筹。该库的任何用户都需要学习新的日志记录框架并（至少）重新配置他们的日志记录。这是一个很大的禁忌，尤其是当它没有给大多数人带来明显的收益时。

说了这么多，我认为 JUL*至少*是当今其他日志记录框架的有效替代品。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-07-06T09:19:45.833

恕我直言，使用像 slf4j 这样的日志外观的主要优点是您可以让库的最终用户选择他想要的具体日志实现，而不是将您的选择强加给最终用户。

也许他在 Log4j 或 LogBack（特殊格式化程序、附加程序等）上投入了时间和金钱，并且更喜欢继续使用 Log4j 或 LogBack，而不是配置 jul。没问题：slf4j 允许这样做。在 jul 上使用 Log4j 是一个明智的选择吗？也许，也许不是。但你不在乎。让最终用户选择他喜欢的东西。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-06T13:42:03.260

我开始，就像我怀疑的你一样，使用 JUL，因为它是最容易立即开始的。然而，多年来，我开始希望我能多花一点时间来选择。

我现在的主要问题是我们有大量用于许多应用程序的“库”代码，它们都使用 JUL。每当我在 web 服务类型的应用程序中使用这些工具时，日志记录就会消失或进入不可预测或奇怪的地方。

我们的解决方案是在库代码中添加一个外观，这意味着库日志调用不会更改，而是动态重定向到任何可用的日志记录机制。当包含在 POJO 工具中时，它们会被定向到 JUL，但当部署为 Web 应用程序时，它们会被重定向到 LogBack。

我们的遗憾 - 当然 - 是库代码不使用参数化日志记录，但现在可以在需要时对其进行改造。

我们使用 slf4j 来构建外观。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-25T13:24:59.350

我在 logback-1.1.7 上针对 slf4j-1.7.21 运行了 jul，输出到 SSD、Java 1.8、Win64

jul 运行 48449 毫秒，1M 循环的 logback 27185 毫秒。

尽管如此，对我来说，更快的速度和更好的 API 不值得 3 个库和 800K。

```
package log;

import java.util.logging.Level;
import java.util.logging.Logger;

public class LogJUL
{
    final static Logger logger = Logger.getLogger(LogJUL.class.getSimpleName());

    public static void main(String[] args) 
    {
        int N = 1024*1024;

        long l = System.currentTimeMillis();

        for (int i = 0; i < N; i++)
        {
            Long lc = System.currentTimeMillis();

            Object[] o = { lc };

            logger.log(Level.INFO,"Epoch time {0}", o);
        }

        l = System.currentTimeMillis() - l;

        System.out.printf("time (ms) %d%n", l);
    }
} 
```

和

```
package log;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class LogSLF
{
    static Logger logger = LoggerFactory.getLogger(LogSLF.class);

    public static void main(String[] args) 
    {
        int N = 1024*1024;

        long l = System.currentTimeMillis();

        for (int i = 0; i < N; i++)
        {
            Long lc = System.currentTimeMillis();

            logger.info("Epoch time {}", lc);
        }

        l = System.currentTimeMillis() - l;

        System.out.printf("time (ms) %d%n", l);
    }

} 
```

# visual-studio-2010 - Visual Studio 2010 文本在看似随机的时间变为蓝色和红色

> ID：11359191
> 
> 赞同：1
> 
> 时间：2012-07-06T09:08:07.800
> 
> 标签：visual-studio-2010

一天很多次，在一台新的工作计算机上，Visual Studio 的代码窗口突然变成红色和蓝色！只有当我重新启动 Visual Studio 实例或重新应用字体和颜色设置时，问题才会消失，关闭和打开文件/选项卡无济于事。

只有当前可见的文件在发生时才会出现故障，其他打开的选项卡通常会保留其正确的颜色，直到我重新打开它们或打开新文件 - 然后以故障颜色显示。有时，其他打开文件中的某些类型的文本会变成蓝色，例如病毒传播；）

![问题的屏幕截图](../Images/fad597aed21162855cc605063d2e0179.png)

我猜有一个插件或缺少修补程序或有故障的图形驱动程序，但我还没有弄清楚问题出在哪里，这让我发疯了。

我以前遇到过这个问题，但不记得我是如何解决的，从那时起已经有一段时间了，我有很多类似的安装，因为没有显示这个问题。

还有一个[Microsoft Connect 问题](http://connect.microsoft.com/VisualStudio/feedback/details/683042/font-colors-turn-into-blue-red)，该问题以“无法重现”状态关闭 - 我只需启动 IE9 即可轻松重现。但是，有时我没有启动 IE 就会出现问题。

*Windows 7 SP1、ReSharper 6.1 和 Reflector 7.5.4.20 上的 Visual Studio 2010 SP1。我已经在 VS 中禁用了硬件加速，没有任何区别，它是具有双屏设置的 Nvidia Geforce 210，主屏幕在右侧。此外，显示的标记不是我写的，不包含敏感信息*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-16T14:22:37.783

这似乎是 Visual Studio 中深色主题的一个小问题。当我在 VS 项目仍然打开的情况下进行系统恢复时，它发生在我身上。解决此问题的方法是重新启动 Visual Studio。奇迹般有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T18:36:19.260

我在 vs2013 上遇到了同样的问题......这解决了这个问题.. [http://madskristensen.net/post/visual-studio-update-2-and-web-essentials](http://madskristensen.net/post/visual-studio-update-2-and-web-essentials)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:44:46.423

发现这是在寻找相同问题的答案。

我修复它的方法是打开工具-> 选项，然后单击环境-> 字体和颜色以重置当前缓冲区的颜色。

锁定屏幕至少 4 分钟后，VS 似乎没有重新着色当前缓冲区。我相信这是在 VS 中处理主题的一个错误，但我这确实是我唯一能找到提到的地方。

刚刚为 VS 2010 安装了 SP1，希望它会有所帮助，但它没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T14:20:53.183

似乎它实际上有助于更新 Nvidia 的图形驱动程序，尽管它只有几个月的历史并且对于相当古老且值得信赖的图形卡来说。哦，好吧-现在我很高兴问题消失了，并且为它如此简单而感到沮丧。

# sql - SSRS 报告不显示数据

> ID：11359194
> 
> 赞同：15
> 
> 时间：2012-07-06T09:08:13.333
> 
> 标签：sql, sql-server, reporting-services, reportingservices-2005

我刚刚创建了一个 SQL Server 2005 SSRS 报告，并且数据未显示在“预览”窗格中。

数据集是根据字符串参数从存储过程中正确填充的。我可以在数据窗格中执行它。在“预览”窗格中运行报告时，会显示正确的行数，但单元格的内容不包含任何数据

![缺失数据](../Images/535c37ab6fb47b34fe26e490e47c8156.png)

源数据集基于 SQL Server 2005 中带有传入字符串参数的存储过程，该参数返回临时表的内容。然后数据集将字段映射到本地。我可以在数据视图中正确执行此操作。

存储过程

```
ALTER PROCEDURE spWebReportStage25BuildReview
    @BuildNumber as nvarchar(50) 
```

临时表架构

```
CREATE TABLE #tmpModelZones
(
    BuildID bigint NOT NULL,
    BuildNo nvarchar(50) NOT NULL,
    ModelID int NOT NULL,
    ModelName nvarchar(50) NOT NULL,
    ZoneID int NOT NULL,
    ZoneName nvarchar(50) NOT NULL,
    SortOrder int NOT NULL,
    Created bit DEFAULT 0 NOT NULL,
    Closed bit DEFAULT 0 NOT NULL,
    PRIMARY KEY (BuildID, ZoneID)
) 
```

SSRS 数据集

![在此处输入图像描述](../Images/fafe77a8b3262e38edd5cb78b5b23939.png)

SSRS 数据集映射

![在此处输入图像描述](../Images/b5cb89ca319192b6be12f9a9d790333b.png)

SSRS 数据集参数 ![在此处输入图像描述](../Images/2ad6ea54e2314f373308805f2e43996e.png)

使用参数执行数据集

![在此处输入图像描述](../Images/5bd11c43aa175c6754a97a33c6087045.png)

显示的表格上没有其他分组、过滤器或聚合。简直就是一张平桌

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T09:45:40.470

以前从未见过。但是，SSRS 有时可能会有点“关闭”，所以这里列出了一些可以尝试的方法。恐怕其中大多数都是“你试过把它关掉再打开吗？”的类型。

*   **删除`.data`**与报告关联的**文件。**
*   复制/备份报告，并尝试**将数据集添加到新的基本 tablix**中，以查看是否显示数据。
*   检查**隐藏**的属性。不要忘记（出于某种愚蠢的原因）它不是（就像在任何其他理智的产品中一样）一个*可见*的Y/N 字段，而是一个*隐藏*的Y/N 字段。
*   仔细检查**字体颜色和大小**等。
*   **在您**的报告服务器上运行报告（而不是预览）以检查它是否有效。
*   使用一些临时文本框来**显示参数的实际值**，以检查它们是否与测试运行数据集时完全相同。
*   **检查**tablix 中的意外过滤器、隐藏属性、表达式等的代码隐藏（rdl 中的 xml）。即使您不能完全“阅读” RDL，通过突出显示语法，您也应该能够略读它并从中提取大量信息。
*   检查**[ExecutionLog2](http://blogs.msdn.com/b/robertbruckner/archive/2009/01/05/executionlog2-view.aspx)**和其他日志记录以查看报告运行中返回了多少行。

此外，如果您使用更多信息更新/编辑您的问题，这将有所帮助：

*   tablix 有哪些类型的分组？
*   tablix、行组和列组上的过滤器是什么？
*   数据集的一般结构是什么，它的结果是什么？
*   参数是如何构造和使用的？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-06T11:05:41.603

使用临时表时，SSRS 无法获取元数据。所以基本上有两种方法可以让 SSRS 知道列名：

1.  添加`SET FMTONLY ON`. 这将检索元数据，但不会显示数据。

2.  转到数据选项卡并单击通用查询设计器并单击刷新字段。这将提示一个用于指定参数值的对话框。当我们在查询设计器中运行查询时，SSRS 从存储过程中获取架构和数据。现在数据将在预览窗格中可用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-05-04T08:54:08.727

我也有类似的问题。就我而言，它甚至在没有任何参数或任何东西的情况下发生，只是你能想象到的最简单的报告。它包括一个带有单个字段的表，没有使用过滤器。我确实设法查看了一些数据，但只显示了那些不适合单元格的行，因此迫使行高增加。

我对这个问题的修复：从标准更改字体或字体大小（大小 10，Segoe UI）。然后，所有数据都显示出来了。将其更改回 Segoe UI 会使数据再次消失。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-16T18:21:29.160

我有同样的问题。这是我发现的。这是我的代码：

```
 DECLARE @tblPigProblems TABLE (
    Id          INT IDENTITY, 
    PPId            INT, 
    GaugeColor      VARCHAR(25), 
    FullStartTime       VARCHAR(25), 
    PigSystem         VARCHAR(25)
    )

    IF (1 = 0)
    BEGIN
        SELECT * FROM @tblPigProblems
    END

    ...

    SELECT '@tblPigProblems'    [PigProblems],  
    @p_vchLine      [Line],         
    GaugeColor      [Product],
    FullStartTime       [Start Time],
    PigSystem       [Pig System]
FROM @tblPigProblems 
```

我所做的是使用初始的“SELECT * FROM @tblPigProblems”来确保如果在返回数据集的最终选择语句之前在代码中指定了任何错误消息，SSRS 能够确定存储过程中的字段。然后，当结果确定后，我为这些字段分配了一个别名。问题是字段的别名与声明的字段名称不匹配（即：声明的字段“GaugeColor”与我在选择中提供的别名“[Product]”不匹配以创建结果集。我的方式意识到这是当我刷新 SSRS 报告的数据部分中的字段，然后显示数据集字段时，它列出了表声明中的字段名称（即：“GaugeColor”）。当我在数据集中执行存储过程时（单击！），SSRS 中列出的结果集显示了字段别名（即：“产品”）。由于这些不匹配，因此我将字段分配给的文本框中没有显示任何内容（即：“=Fields！ColorGauge.Value”）。SSRS 没有发现这种差异并允许创建报告，但不显示任何值。修复很简单，替换：

```
 IF (1 = 0)
    BEGIN
        SELECT * FROM @tblPigProblems
    END 
```

和：

```
 IF (1 = 0)
    BEGIN
        SELECT '@tblPigProblems'    [PigProblems],  
        @p_vchLine      [Line],         
        GaugeColor      [Product],
        FullStartTime   [Start Time],
        PigSystem       [Pig System]
    FROM @tblPigProblems
    END 
```

担

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-31T22:40:02.547

我有一个工作报告停止显示数据的案例。我添加了另一个没有格式的表，链接到相同的数据集 - 验证了当 SSRS 传递参数时查询不再返回数据。经过调查，我注意到我的“锚定日期”值的测试参数被格式化为 YYYY-MM-DD，在我更新的查询中，我对日期参数中字符的顺序进行了假设（截断为 YYYY -MM 一次加入）。

我怀疑 SSRS 可能会以不同的格式传递日期（MM/DD/YY 是我当前默认日期的文化设置）。因此，凭着这种预感，我改变了我的 SQL 逻辑以使用任何传递的日期格式。- 例如 left(convert(date, @anchorDate, 20), 7)

这解决了我的问题 - 我测试过的格式假设（在开发时测试查询的硬编码值）是错误的假设。SSRS 也可以以本地格式传递数据——所以一定要注意这种假设。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-16T21:54:32.970

我有同样的问题，我试图检查我的 tablix 的优先级。我通过将`CANGROW`值更改为`FALSE`.

# java - 类型异常：内部错误（）

> ID：11359195
> 
> 赞同：-3
> 
> 时间：2012-07-06T09:08:14.530
> 
> 标签：java, jsp, servlets

我有以下代码用于将数据从 MySQL 数据库写入 excel 文件。

为此，我下载了 org.apache.poi 包并将其放在 Tomcat ROOT 目录中的 classes 文件夹中

```
<%@ page import="java.io.*"%>
<%@ page import="java.sql.*"%>
<%@ page import="java.io.*"%>
<%@ page import="java.util.ArrayList"%>
<%@ page import="java.util.Hashtable"%>
<%@ page import="javax.servlet.http.*,javax.servlet.*"%>
<%@ page import="java.lang.*"%>
<%@ page import="java.util.*"%>
<%@ page import="java.sql.ResultSet"%>
<%@ page import="java.sql.ResultSetMetaData"%>
<jsp:directive.import></jsp:directive.import>
<jsp:directive.import></jsp:directive.import>
<jsp:directive.import></jsp:directive.import>
<jsp:directive.import></jsp:directive.import>
<jsp:directive.import></jsp:directive.import>
<%
    try{
    String filename="D:/data.xls" ;
    HSSFWorkbook hwb=new HSSFWorkbook();
    HSSFSheet sheet =  hwb.createSheet("new sheet");

    HSSFRow rowhead=   sheet.createRow((short)0);
    rowhead.createCell((short) 0).setCellValue("BID");
    rowhead.createCell((short) 1).setCellValue("BELONGING_TYPE");
    rowhead.createCell((short) 2).setCellValue("BELONGING_TEXT");

    Class.forName("com.mysql.jdbc.Driver");
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/yatin", "root", "root");
    Statement st=con.createStatement();
    ResultSet rs=st.executeQuery("Select * from tm_belonging");
    int i=1;
    while(rs.next()){
    HSSFRow row=   sheet.createRow((short)i);
    row.createCell((short) 0).setCellValue(rs.getInt("BID"));
    row.createCell((short) 1).setCellValue(rs.getString("BELONGING_TYPE"));
    row.createCell((short) 2).setCellValue(rs.getString("BELONGING_TEXT"));
    i++;
    }
    FileOutputStream fileOut =  new FileOutputStream(filename);
    hwb.write(fileOut);
    fileOut.close();
    out.println("Your excel file has been generated!");

    } catch ( Exception ex ) {
        System.out.println(ex);
        ex.printStackTrace();

    }
%> 
```

但我收到以下错误

告诉我那里出了什么问题

类型异常报告消息：

> 描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

例外：

```
org.apache.jasper.JasperException: /ExcelReport.jsp(11,4) Invalid directive
    org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:40)
    org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:407)
    org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:88)
    org.apache.jasper.compiler.Parser.parseDirective(Parser.java:472)
    org.apache.jasper.compiler.Parser.parseFileDirectives(Parser.java:1748)
    org.apache.jasper.compiler.Parser.parse(Parser.java:127)
    org.apache.jasper.compiler.ParserController.doParse(ParserController.java:255)
    org.apache.jasper.compiler.ParserController.parseDirectives(ParserController.java:120)
    org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:180)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:347)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:327)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:314)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:592)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:317)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:18:25.487

我可以检测到的第一个失败是文件名必须是“D:\data.xls”。Windows 环境中的路径应使用反斜杠（而在 Linux 中不应使用 D:...）

当我将“D:/data.xls”之类的文件名放入我的（正常工作的）代码中时，我在发生的异常报告中得到了相同的描述——我猜，这可能是你的解决方案吗？

# extjs - 地理定位+距离测量

> ID：11359205
> 
> 赞同：0
> 
> 时间：2012-07-06T09:09:06.540
> 
> 标签：extjs, sencha-touch-2

```
 launch: function() {
    // The following is accomplished with the Google Map API
    var position = new google.maps.LatLng(12.9833, 77.5833),  //Sencha HQ

        infowindow = new google.maps.InfoWindow({
            content: 'bengaluru'
        }),

        //Tracking Marker Image
        image = new google.maps.MarkerImage(
            'resources/images/point.png',
            new google.maps.Size(32, 31),
            new google.maps.Point(0, 0),
            new google.maps.Point(16, 31)
        ),

        shadow = new google.maps.MarkerImage(
            'resources/images/shadow.png',
            new google.maps.Size(64, 52),
            new google.maps.Point(0, 0),
            new google.maps.Point(-5, 42)
        ),

        trackingButton = Ext.create('Ext.Button', {
            iconMask: true,
            iconCls: 'locate'
        }),

        trafficButton = Ext.create('Ext.Button', {
            iconMask: true,
            pressed: true,
            iconCls: 'maps'
        }),

        toolbar = Ext.create('Ext.Toolbar', {
            docked: 'top',
            ui: 'light',
            defaults: {
                iconMask: true
            },
            items: [
                {
                    xtype:'button',
                    id:'calculate',
                    text:'calculate',
                    handler:function(){
                        alert('hello');
                    }
                }
            ]
        });

    var mapdemo = Ext.create('Ext.Map', {
        mapOptions : {
            center : new google.maps.LatLng(37.381592, 122.135672),  //nearby San Fran
            zoom : 12,
            mapTypeId : google.maps.MapTypeId.ROADMAP,
            navigationControl: true,
            navigationControlOptions: {
                style: google.maps.NavigationControlStyle.DEFAULT
            }
        },

        plugins : [
            new Ext.plugin.google.Tracker({
                trackSuspended: true,   //suspend tracking initially
                allowHighAccuracy: false,
                marker: new google.maps.Marker({
                    position: position,
                    title: 'My Current Location',
                    shadow: shadow,
                    icon: image
                })
            }),
            new Ext.plugin.google.Traffic()
        ],

        listeners: {
            maprender: function(comp, map) {
                var marker = new google.maps.Marker({
                    position: position,
                    title : 'Sencha HQ',
                    map: map
                });

                google.maps.event.addListener(marker, 'click', function() {
                    infowindow.open(map, marker);
                });

                setTimeout(function() {
                    map.panTo(position);
                }, 1000);
            }

        }
    }); 
```

> 任何想法如何测量经纬度已知的两个目的地之间的距离........此代码取自 sencha touch2 提供的示例，几乎没有修改。它的煎茶触摸 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:15:09.223

尝试`google.maps.geometry.spherical.computeDistanceBetween(from:LatLng, to:LatLng, radius?:number)`

radius 是地球的半径 = 6371000 米（平均）

# c++ - 将巨大的 boost dynamic_bitset 向量写入文件并将其读回的有效方法

> ID：11359223
> 
> 赞同：0
> 
> 时间：2012-07-06T09:10:09.550
> 
> 标签：c++, boost, file-io, boost-dynamic-bitset

我有一个巨大的[boost dynamic_bitset](http://www.boost.org/doc/libs/1_36_0/libs/dynamic_bitset/dynamic_bitset.html)向量。我想将 dynamic_bitset 向量写入文件，然后将文件读回 dynamic_bitset 向量。是否将 dynamic_bitset 的内存分配为连续的内存块（以便我可以一次写入整个向量而无需遍历）？

位集向量的大小为数百万。所以我正在寻找一种有效的方法将它们写入文件而不是遍历元素。

我将 dynamic_bitset 转换为字符串，然后将字符串写入文件。稍后从文件中读取字符串并将其转换回 dynamic_bitset。

下面是我使用 Visual Studio 在 C++ 中编写的代码：

```
#include "stdafx.h"
#include <iostream>
#include <fstream>
#include <string>
#include <boost/dynamic_bitset.hpp>
using namespace std;

int main(int argc, char* argv[])
{
  // Initializing a bitset vector to 0s
  boost::dynamic_bitset<> bit_vector(10); 
  bit_vector[0] = 1;   bit_vector[1] = 1;  bit_vector[4] = 1;  bit_vector[7] = 1;  bit_vector[9] = 1;
  cout<<"Input :"<<bit_vector<<endl; //Prints in reverse order

  //Converting dynamic_bitset to a string
  string buffer;
  to_string(bit_vector, buffer);

  //Writing the string to a file
  ofstream out("file", ios::out | ios::binary);  
  char *c_buffer = (char*)buffer.c_str();   
  out.write(c_buffer, strlen(c_buffer));
  out.close();

  //Find length of the string and reading from the file
  int len = strlen(c_buffer);
  char* c_bit_vector = new char(len+1);
  ifstream in;
  in.open("file", ios::binary);
  in.read(c_bit_vector, len);
  c_bit_vector[len] = 0;
  in.close();

  //Converting string back to dynamic_bitset
  string str2 = c_bit_vector;
  boost::dynamic_bitset<> output_bit_vector( str2 );
  cout<<"Output:"<<output_bit_vector<<endl;

  system("PAUSE");
  return 0;
} 
```

但即使是这种将其存储为字符串的方法，也需要很长时间才能写入文件。当我尝试从文件读回字符串时，我得到一个“未处理的访问冲突异常”。有没有更有效的方法来实现相同的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:26:25.873

嗯... mb 使用运算符 << 和运算符 >>？

```
template <typename Ch, typename Tr, typename Block, typename Alloc>
std::basic_ostream<Ch, Tr>&
operator<<(std::basic_ostream<Ch, Tr>& os,
           const dynamic_bitset<Block, Alloc>& b)

template <typename Ch, typename Tr, typename Block, typename Alloc>
std::basic_istream<Ch, Tr>&
operator>>(std::basic_istream<Ch, Tr>& is, dynamic_bitset<Block, Alloc>& b) 
```

# sql-server - SSIS 性能中的存储过程与嵌入式 SQL

> ID：11359224
> 
> 赞同：9
> 
> 时间：2012-07-06T09:10:18.747
> 
> 标签：sql-server, tsql, stored-procedures, ssis

我最近完成了 SSIS 课程。

我得出的最佳实践之一是始终在 SSIS 的数据流任务中使用存储过程。

我想有一个关于安全性的争论，但是导师说，由于存储过程在 SQL Server 上执行了所有“本机”工作，因此性能得到了显着提升。

这或辩论这一点的文章有什么道理吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T09:53:06.450

请记住 - 大多数课程都是由无知的人完成的，因为有知识的人通过咨询赚钱，这比培训要好得多。大多数培训师都住在一个玻璃房子里，从不花 9 个月的时间在一个 21tb 的数据仓库上工作；）

这是错误的。观点。

仅当 SQL 语句不从数据库中提取数据时才有意义 - 例如合并表等。

否则，这是您设置 SSIS 端的智能程度的问题。SSIS 可以使用大容量复制机制而不使用 SQL 写入数据。SSIS 更加灵活，如果您从远程数据库中提取数据，那么不离开数据库（即处理本机）的论点是一个愚蠢的观点。当我将数据从 SQL Server A 复制到 SQL Server B 时，B 上的 SP 无法处理来自 A 本机的数据。

一般来说，只有当您从 A 获取数据并将其推送到 A 并且所有处理都可以在一个简单的 SP 中完成时，它才会更快——这是一种退化的边缘情况（即一个简单化的情况）。

SSIS 的优点是在为数据流设计的环境中处理数据的灵活性，在许多情况下，在项目中需要这样做，而在存储过程中这样做会变成噩梦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-23T01:25:43.223

旧线程，但相关主题。

对于数据源连接，我更喜欢 SP 而不是嵌入式查询，因为 A）逻辑足够简单，可以以两种方式处理，B）SP 的支持比使用包更容易。如果 SP 返回一个相当简单的结果集，我没有发现数据源的性能差异很大（如果有的话）。

我们的商店有一个更复杂的包部署过程，这使得 SP 成为首选来源。

除了偶尔记录 SP 调用外，我还没有发现很多将 SP 用作数据目标的应用程序。

# iphone - 从 NSArray 中选择 UIScrollView 显示的 ContentOffSet

> ID：11359226
> 
> 赞同：0
> 
> 时间：2012-07-06T09:10:30.500
> 
> 标签：iphone, objective-c, ios, xcode, ios4

我在做quotesApp。有一个最喜欢的 tableView，它在`UITableView`.
单击该行将转到 detailView，其中显示所有喜欢的引号`UIScrollView`。
从 NSArray 的第一个索引开始。我想在 UIScrollView 中显示选定的索引，然后通过滑动它显示 Array 中的所有其他对象。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:15:19.743

我建议你使用另一个 UITableView，每个单元格都是一个 NSArray 行。它会比使用滚动视图更快、更智能！

# lua - lua 表寻址

> ID：11359227
> 
> 赞同：0
> 
> 时间：2012-07-06T09:10:31.150
> 
> 标签：lua

我有一张桌子`logTable = {["cdm"] = "log text", ["data_engine"] = "log text"}`

编码：

```
for k,v in pairs(logTable) do
    print(v["cdm"]) end 
```

给出期望的结果：日志文本

然而

```
print(logTable["cdm"]) 
```

什么都不返回。我在这里做错了什么？

编辑：

所以这实际上是我制作桌子的方式：

```
table.insert(logTable, { [probeName] = file.read('export/'..robotName..'/probes/'..probeGroup..'/'..probeName..'/'..probeName..'.log')}) 
```

probeName 是一个变量，是不是我需要`["probeName"]`把它变成一个字符串？但是，这将其视为文字而不是变量？

如何使用变量作为表索引/键

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:59:49.813

您实际上在此处的表*内*有一个表，因此您的表如下所示：

```
{
    { 
      ["cdm"] = "log text",
      ["data engine"] = "log text"
    }
} 
```

这就是为什么你的`print(logTable["cdm"])`不起作用。`table.insert`也适用于数字索引表；这一次，字典语法更清晰了：

```
logTable["probeName"] = file.read('export/'..robotName..
                                  '/probes/'..probeGroup..'/'
                                  ..probeName..'/'..probeName..'.log') 
```

# python - 使用 GTK3 SourceView 突出显示语法

> ID：11359228
> 
> 赞同：4
> 
> 时间：2012-07-06T09:10:31.673
> 
> 标签：python, gtk3, gtksourceview

如何在`GtkSourceView`使用 GTK3 时启用语法高亮？我下面的代码不起作用。

```
# HTML view
self.scrolledwindow_html = builder.get_object('scrolledwindow_html')
self.sourceview_html = GtkSource.View()
self.buffer_html = self.sourceview_html.get_buffer()

lang_manager = GtkSource.LanguageManager()
self.buffer_html.set_language(lang_manager.get_language('html'))
self.scrolledwindow_html.add(self.sourceview_html) 
```

给出错误：

> AttributeError：“TextBuffer”对象没有属性“set_language”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T09:22:57.317

似乎源视图正在用 a `Gtk.TextBuffer`（不知道语法突出显示）而不是 a `GtkSource.Buffer`（它知道）来初始化自己。通过首先制作缓冲区并告诉`View`它使用该对象来强制它使用您选择的缓冲区：

```
 self.buffer_html = GtkSource.Buffer()
 self.sourceview_html = GtkSource.View.new_with_buffer(self.buffer_html) 
```

# android - Java，代理设置会影响接收到的数据吗？

> ID：11359233
> 
> 赞同：0
> 
> 时间：2012-07-06T09:10:52.077
> 
> 标签：android, proxy, response, httpresponse

我问了一个关于[如何绕过 Web 代理设置的问题？](https://stackoverflow.com/questions/11343252/java-how-to-bypass-web-proxy-setting)

然而，我没有得到我想要的回应。因此，我想改变我的问题。

我的问题是，当我为上网设置代理（这是由移动 3g 运营商自动设置的）时，我无法获得正确的数据。正确的数据采用 XML 格式，而我将其包装在 HTML 代码中。我不知道这个 HTML 来自哪里！正如服务器端程序员所提到的，“服务器返回 XML 数据而不是 HTML 代码”。

我真的很困惑这里发生了什么？

*   应用程序通过 Wifi 连接到 Internet 时工作正常（我认为它工作正常，因为代理不适用于它）
*   应用程序不仅仅适用于某些有限类型的设备（例如，它不适用于 Xperia neo 和 SG2，而应用程序适用于 SGS）。所有这些设备都连接到同一个移动运营商。

你有什么想法？你以前遇到过这个问题吗？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:54:24.073

请求有可能被正在注入广告或类似内容的代理操纵。您能否捕捉到响应并查看发生了什么变化？

您可以尝试的方法是发出安全连接请求，这样代理就不应该能够修改响应的内容。

# authentication - Spring MVC 3.1 如何在Custom Authentication Provider（实现AuthenticationProvider）中访问HttpSession

> ID：11359234
> 
> 赞同：5
> 
> 时间：2012-07-06T09:10:56.023
> 
> 标签：authentication, spring-mvc

我的应用程序在身份验证过程中调用 Web 服务（如下面的代码所示）。

在此过程中如何在 HttpSession 中保存一些信息？用户登录后，诸如客户帐号之类的信息将在应用程序的其他各个地方使用。是否可以将 HttpSession 参数传递给 MyServiceManager 的静态登录方法？

```
 public class MyAuthenticationManager implements AuthenticationProvider {

    @Override
    public boolean supports(Class<? extends Object> authentication) {
        return authentication.equals(UsernamePasswordAuthenticationToken.class);
    }

    @Override
    public Authentication authenticate(Authentication authentication) {
                    //MyServiceManager.login - makes a call to web service
        if(MyServiceManager.login(authentication.getName(),     authentication.getCredentials().toString(), XXX_HTTP_SESSION_XXX))
        {
            List<GrantedAuthority> authorities = new ArrayList<GrantedAuthority>  ();  
            authorities.add(new GrantedAuthorityImpl("ROLE_USER"));
            authorities.add(new GrantedAuthorityImpl("ROLE_SUPERVISOR"));
            return new UsernamePasswordAuthenticationToken(authentication.getName(), authentication.getCredentials(),authorities);
        }
        else
        {
            return null;
        }

    }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T06:06:50.697

在对这个问题做了很多思考之后，我能够通过以下工作来实现目标。在以下方法 public Authentication authenticate(Authentication authentication) 中获取会话确实不可行

我创建了一个类

```
import java.security.Principal;

public class UserInfo implements Principal{

private String customerId;
private String accountNumber;
private String name;
} 
```

我想存储在会话中的信息（如 customerId、accountNumber 等），我将其保存在 userInfo 对象中。并且此对象已传递给 UsernamePasswordAuthenticationToken

```
List<GrantedAuthority> authorities = new ArrayList<GrantedAuthority>();  
authorities.add(new GrantedAuthorityImpl("ROLE_USER"));
authorities.add(new GrantedAuthorityImpl("ROLE_SUPERVISOR"));
return new UsernamePasswordAuthenticationToken(**userInfo**, authentication.getCredentials(),authorities); 
```

此信息在用户会话中很容易使用

```
(UserInfo)SecurityContextHolder.getContext().getAuthentication().getPrincipal(); 
```

我家这是解决问题的好方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-09T10:55:59.350

我们可以通过以下方式做到这一点：

```
ServletRequestAttributes attr = (ServletRequestAttributes) RequestContextHolder.currentRequestAttributes();
HttpSession session= attr.getRequest().getSession(false); 
```

我建议使用 false，因为假定没有有效会话的任何人都不应该在此方法中。

# ruby-on-rails - 两个浏览器共享同一个会话？怎么会这样？

> ID：11359240
> 
> 赞同：0
> 
> 时间：2012-07-06T09:11:37.883
> 
> 标签：ruby-on-rails, ruby, session

我试图将会话存储设置为 ActiveRecordStore。我做了以下更改：

```
# application.rb
config.action_dispatch.session_store = :active_record_store

# session_store.rb
MyApp::Application.config.session_store :active_record_store
ActiveRecord::SessionStore.session_class = Session

# the session class
class Session < ActiveRecord::SessionStore::Session
  belongs_to :user
  before_save :ensure_user_is_set

  def self.find_by_session_id(session_id)
    find(:first,"session_id = ?",session_id)
  end

  private
  def ensure_user_is_set
    warden_data = self.data["warden.user.user.key"]
    if warden_data
      user_id   = warden_data[1][0]
      self.user = User.find(user_id)
    end
  end
end 
```

我打开了 2 个浏览器（一个 Firefox 和一个 Chrome）。非常奇怪的是，如果我开始 a `rails console`，然后我写：`Session.count`，我会回来`1`。

之后，我登录 Firefox，然后刷新 Chrome。现在两个浏览器都显示为已登录。我做错了什么？为什么每个浏览器都没有自己的会话？

编辑：似乎我的自定义 Session 类导致了问题。但是，我不确定为什么。

编辑2：问题出在这里：

```
 def self.find_by_session_id(session_id)
    find(:first,"session_id = ?",session_id)
  end 
```

它应该是：

```
 def self.find_by_session_id(session_id)
    find(:first,:conditions => ["session_id = ?",session_id])
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:58:30.413

问题出在这里：

```
 def self.find_by_session_id(session_id)
    find(:first,"session_id = ?",session_id)
  end 
```

它应该是：

```
 def self.find_by_session_id(session_id)
    find(:first,:conditions => ["session_id = ?",session_id])
  end 
```

# fancybox - 将 Fancybox 对齐区域居中

> ID：11359241
> 
> 赞同：0
> 
> 时间：2012-07-06T09:11:38.717
> 
> 标签：fancybox, alignment

我们有一个带有墙纸广告的左向网站。所以页面的中心被推到了左边。如果我们可以定义一个花式框对齐的区域/点，那就太好了。

喜欢：填充：100px 300px 0 0；

topRatio 对此无济于事。

谢谢你的帮助，乌利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:52:27.680

您可以使用选项“margin”推送框 - [http://jsfiddle.net/jftDF/](http://jsfiddle.net/jftDF/)

# android - 移动 c:\Users\ \.android 目录到不同的位置

> ID：11359246
> 
> 赞同：0
> 
> 时间：2012-07-06T09:11:50.770
> 
> 标签：android

我想将 c:\Users\.android 目录移动到不同的位置。这可以在 Windows 上的 Eclipse/ADT 环境中配置吗？

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-06T09:34:17.107

是的，它是可配置的

您需要做的就是相应地设置环境变量“PATH”。

# android - 在android中使用Sax xml解析来解析复杂的xml

> ID：11359247
> 
> 赞同：0
> 
> 时间：2012-07-06T09:11:59.230
> 
> 标签：android, xml-parsing

您好，我是 android 新手，我目前在 android 中使用 SAX 解析。以下是我的 xml 文件。

`<response>`
`<peoples>`
`<name>`abc `</name>`
`<age>`20`</age>`
`<info>`
`<address>`美国`</address>`
`<family>`父母`</family>`
`</info>`
`</people>`
`<people>`
`<name>`abc `</name>`
`<age>`20`</age>`
`<info>`
`<address>`美国`</address>`
`<family>`父母`</family>`
`</info>`
`</people>`
`</response>`

如何使用 SAX 解析器解析这个 xml。请帮我找到这个。提前谢谢你。

# java - 如何访问 mule 流中的 java 变量

> ID：11359253
> 
> 赞同：0
> 
> 时间：2012-07-06T09:12:29.270
> 
> 标签：java, mule

场景：
我在 Java 文件中有一个变量，我想在 mule config xml 中访问它。我怎么做。

示例 - 有一个 Web 服务可以像这样传递参数

```
localhost/apiname?name="dynamic data" 
```

因此，在访问 Web 服务时，我想将参数“名称”作为动态数据传递。我怎么做。我假设如果我能够访问 xml 文件中的 Java 变量，那将是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:19:09.390

可能的答案

我是这样做
的 1\. 创建了一个属性文件
2\. 我创建了一个变量 com.webparam.url = "http://localhost?name="
3\. 在 mule 配置中访问了属性文件
4\. 并访问了像这样的变量
`<https:outbound-endpoint exchange-pattern="request-response" connector-ref="HttpsConnector" transformer-address="${com.webparam.paramName}test>`

有了这个，骡子评价它`localhost?name=test`。

试图用参数“名称”分离出 url 部分，然后连接 2 个字符串，但似乎骡子没有这样做。我用的是骡子3.2。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T22:08:57.787

我通常将变量存储在 SESSION 中，然后我可以随时访问它

```
localhost/apiname?name=[header:session:name] 
```

# iphone - UISegmentedContol 中段的互斥切换行为

> ID：11359265
> 
> 赞同：0
> 
> 时间：2012-07-06T09:13:32.017
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uisegmentedcontrol

`UISegmentedControl`是否可以通过第二次点击来取消选择一段？我目前正在使用一个`UILongPressGestureRecognizer`对象`setSelectedSegmentIndex`to `UISegmentedControlNoSegment`。但是，我宁愿在第二次点击时取消选择选定的段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:39:53.063

另一种方法是子类化`UISegmentedControl`. 例如：

```
@interface ToggleSegmentedControl : UISegmentedControl
{
   NSUInteger selectedSegment;
}

@end

@implementation ToggleSegmentedControl

-(id)initWithFrame:(CGRect)frame 
{
   if (self = [super initWithFrame:frame])
   {
      selectedSegment = self.selectedSegmentIndex;
   }
   return self;
}

-(void)awakeFromNib 
{
  selectedSegment = self.selectedSegmentIndex;
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

   if( selectedSegment == self.selectedSegmentIndex && selectedSegment!=-1)
   {
     self.selectedSegmentIndex= UISegmentedControlNoSegment; 
     selectedSegment=-1; 
   } 
   else 
  { 
    selectedSegment=self.selectedSegmentIndex;
  }

}

@end 
```

上述代码可能需要进一步调整以适应个别规格。

# sql - SQL Server 超时计算

> ID：11359266
> 
> 赞同：0
> 
> 时间：2012-07-06T09:13:33.183
> 
> 标签：sql, sql-server-2005, datetime

## 非工作时间计算

一个非工作时间日历定义如下，这里 WeekNumber 从 1 = 星期一到 5 = 星期五开始

```
CalendarId WeekNumber   StartTime           EndTime         
600         1           1900-01-01 00:00    1900-01-01 08:00    
600         1           1900-01-01 18:00    1900-01-01 23:59    
600         2           1900-01-01 00:00    1900-01-01 08:00    
600         2           1900-01-01 18:00    1900-01-01 23:59    
600         3           1900-01-01 00:00    1900-01-01 08:00    
600         3           1900-01-01 18:00    1900-01-01 23:59    
600         4           1900-01-01 00:00    1900-01-01 08:00    
600         4           1900-01-01 18:00    1900-01-01 23:59    
600         5           1900-01-01 00:00    1900-01-01 08:00    
600         5           1900-01-01 18:00    1900-01-01 23:59 
```

我想将此日历应用于另一个名为 events 的表以查找这些日期和时间的记录？

## 编辑

事件表结构如下

```
EventID StartDateTime       TotalTimeInSec  WeekNumber  
1       2009-07-05 07:44     100                1 
2       2009-07-05 08:40     200                1
3       2009-07-05 09:35     150                1
4       2009-07-05 10:37     200                1
5       2009-07-05 19:37     200                1
6       2009-07-05 20:37     200                1 
```

所需的**输出**将在应用日历之后

```
EventID StartDateTime       TotalTimeInSec  WeekNumber  
1       2009-07-05 07:44     100                1 
5       2009-07-05 19:37     200                1
6       2009-07-05 20:37     200                1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:26:33.547

```
 Select a.WeekNumber,a.startDateTime,b.starttime,b.EndTime
 from tblEvents a,(Select WeekNumber,Starttime,EndTime  from tblMain) b
 where a.startDateTime between b.starttime and b.EndTime
 and a.WeekNumber = b.WeekNumber 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:55:31.383

我不相信完全外部联接是您所要求的。而另一个答案似乎没有处理您将时间范围存储为日期时间值的方法。唯一棘手的部分似乎是处理日期数学。您可以找到不同的方法来进行检查，但我认为这是一种解决方案。

```
SELECT e.*
FROM
    Events as e INNER JOIN Calendar as c
        ON c.WeekNumber = e.WeekNumber
WHERE
    /* CAST(CAST(e.StartDateTime AS TIME) AS DATETIME) -- later versions */
    e.StartDateTime - DATEADD(dd, DATEDIFF(dd, 0, e.StartDateTime), 0)        
        BETWEEN c.StartTime and e.EndTime 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:43:07.510

```
Select E.*
From tblEvent E
Full outer Join tblMain M on E.WeekNumber = M.WeekNumber
Where E.StartDateTime Between M.StartTime and M.EndTime 
```

# x++ - setTimeOut 和本地函数

> ID：11359271
> 
> 赞同：2
> 
> 时间：2012-07-06T09:13:56.743
> 
> 标签：x++, axapta

我正在开发 Axe 4.0

我正在尝试在具有本地函数的作业中使用 Object.setTimeOut 方法，如[msdn 文档中所述：](http://msdn.microsoft.com/en-US/library/aa857865%28v=ax.10%29)

```
static void setTimeOutJob()
{
    Object o = new Object();

    void printText()
    {
        ;
        info( "2 seconds has elapsed since the user did anything" );
    }
    ;
    // Set a Time Out with the idle flag set to false
    o.setTimeOut(identifierstr(printText), 2000, false);
} 
```

但是这个简单的工作不会产生任何东西，所以我似乎在这里遗漏了一些东西。

有人用这个工作过吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:39:36.397

该`setTimeout`方法不适用于作业中的本地函数。

对于一个工作示例，请查看表格`tutorial_Timer`。

**更新：**

该`setTimeout`方法是一个“神奇”的功能，但它不会将 AX 变成多线程环境。

它仅在 Windows[事件循环](http://en.wikipedia.org/wiki/Event_loop)运行时有效。在 AX 上下文中，这意味着表单正在运行，而其他人正在等待表单完成。该`sleep`函数不符合条件。

而且对象必须是“活的”，调用垃圾回收对象是不行的！

示例（基于类）：

```
class SetTimeoutTest extends Object //Yes, extend or it will not compile
{
    str test;
}

public void new()
{
    super();
    test = "Hello";
}

public str test()
{
    return test;
}

protected void timedOut()
{;
    test = "2 seconds has elapsed since the user did anything";
    info(test);
}

static void main(Args args)
{
    SetTimeoutTest t = new SetTimeoutTest();
    FormRun fr;
    ;
    t.setTimeOut(methodStr(SetTimeoutTest,timedOut), 2000, false);
    //sleep(4000); //Does not work
    fr = ClassFactory::formRunClassOnClient(new Args(formstr(CustGroup))); //Could be any form
    fr.init();
    fr.run();
    fr.wait(); //Otherwise the t object runs out of scope
    info(t.test());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:14:31.503

我只是不认为它适用于工作。我已经在方法在元素级别的表单上使用了它，并且已经完成了 element.setTimeout 并且它工作正常。

# objective-c - 这个锁定方案有什么问题

> ID：11359272
> 
> 赞同：1
> 
> 时间：2012-07-06T09:14:08.003
> 
> 标签：objective-c, xcode4.3

```
for (NSString * district in allLinedStrings) {
    PO1(district);
    [self.mainLock lock];
    CLGeocoder * geocode= [[CLGeocoder alloc]init];
    [geocode geocodeAddressString:district completionHandler:^(NSArray *placemarks, NSError *error )
     {
         for (CLPlacemark * thePlace in placemarks)
         {
             [self handlePlacemark:thePlace];

         }
         [self.mainLock unlock];
     }];
} 
```

我想同步运行 geocodeAddressString 并且我这样做了。不知何故，我得到了死锁的错误。但是怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:27:31.427

如果您使用 NSLock：在同一线程上调用两次 lock 方法将永久锁定您的线程。

```
for (NSString * district in allLinedStrings) {
    PO1(district);
    [self.mainLock lock];
    CLGeocoder * geocode= [[CLGeocoder alloc]init];
    [geocode geocodeAddressString:district completionHandler:^(NSArray *placemarks, NSError *error )
     {
         for (CLPlacemark * thePlace in placemarks)
         {
             [self handlePlacemark:thePlace];

         }

     }];
[self.mainLock unlock];
} 
```

# php - PHP curl_exec 返回 HTTP/1.1 100 Continue 和 HTTP/1.1 200 OK 以空格分隔

> ID：11359276
> 
> 赞同：26
> 
> 时间：2012-07-06T09:14:28.267
> 
> 标签：php, web-services, curl, http-headers

我正在使用 cURL 从 PHP 调用服务，如下所示：

```
$response = curl_exec($ch); 
```

请求/响应标头看起来像这样：

要求：

```
POST /item/save HTTP/1.1
Host: services.mydomain.com
Accept: */*
Content-Length: 429
Expect: 100-continue
Content-Type: multipart/form-data 
```

回复：

```
HTTP/1.1 100 Continue

HTTP/1.1 200 OK
Date: Fri, 06 Jul 2012 08:37:01 GMT
Server: Apache
Vary: Accept-Encoding,User-Agent
Content-Length: 256
Content-Type: application/json; charset=utf-8 
```

其次是正文（json 编码数据）。

问题是常见的事情是通过遇到的第一个空行来拆分响应中的标头和正文，除了在这种情况下，空行在之后`100 Continue`，因此其他所有内容都被推入正文 - 这不是有效的 json不再:-)

所以我的问题是：处理这个问题的常用方法是什么？我有3个选项排队：

1.  指定 curl 不应该期望`100-continue`？（如何？）
2.  指定 curl 应该只发回最后一个响应的标题？（如何？）
3.  手动检查`100 Continue`标题并忽略它们及其后面的空行？（在这种情况下，是否还有其他类似的事情可能发生，我应该手动检查？）

除非我遗漏了一些明显的东西，否则我相信人们已经偶然发现并解决了很多次！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-06T09:17:32.160

我会选择#1。您可以通过添加以下内容强制 curl 发送空的“Expect”标头：

```
curl_setopt($ch, CURLOPT_HTTPHEADER,array("Expect:")); 
```

到你的代码

如果您想手动检查它，您应该定义自己的标头回调并且可能编写回调（在[curl_setopt doc](http://www.php.net/manual/en/function.curl-setopt.php)中查找 CURLOPT_HEADERFUNCTION 和 CURLOPT_WRITEFUNCTION ），它只需忽略所有“HTTP/1.1 100 Continue”标头。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-06T14:23:48.573

这是另一种方法，它使用我在评论中描述的方法，将响应解析为 header vs. body 使用`CURLINFO_HEADER_SIZE`：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://test/curl_test.php");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLINFO_HEADER_OUT, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);
// sets multipart/form-data content-type
curl_setopt($ch, CURLOPT_POSTFIELDS, array(
  'field1' => 'foo',
  'field2' => 'bar'
));

$data = curl_exec($ch);

// if you want the headers sent by CURL
$sentHeaders = curl_getinfo($ch, CURLINFO_HEADER_OUT);
$headerSize = curl_getinfo($ch, CURLINFO_HEADER_SIZE);
curl_close($ch);

$header = substr($data, 0, $headerSize);
$body = substr($data, $headerSize);
echo "==Sent Headers==\n$sentHeaders\n==End Sent Headers==\n";
echo "==Response Headers==\n$headers\n==End Response Headers==\n";
echo "==Response Body==\n$body\n==End Body=="; 
```

我已经对此进行了测试，它会产生以下输出：

```
==发送标头==
发布 /curl_test.php HTTP/1.1
主持人：测试
接受： */*
内容长度：242
期望：100-继续
内容类型：multipart/form-data；边界=----------------------------
d86ac263ce1b

==结束发送的标头==

==响应标头==
HTTP/1.1 100 继续

HTTP/1.1 200 正常
日期：格林威治标准时间 2012 年 7 月 6 日星期五 14:21:53
服务器：Apache/2.4.2 (Win32) PHP/5.4.4
X-Powered-By: PHP/5.4.4
内容长度：112
内容类型：文本/纯文本

==结束响应头==

==响应正文==
**形成数据**
数组（2）{
  [“字段1”]=>
  字符串（3）“富”
  [“字段2”]=>
  字符串（3）“酒吧”
}
**结束表格数据**
==结束身体==
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:24:04.027

我遇到过 100 和 302 等问题，这很烦人，但有时需要（gdata 调用等），所以我会说让 curl 返回所有标题并稍微不同地提取正文。

我是这样处理的（找不到我的实际代码，但你会明白的）：

```
$response = curl_exec($ch);

$headers = array();
$body = array();

foreach(explode("\n\n", $response) as $frag){
  if(preg_match('/^HTTP\/[0-9\.]+ [0-9]+/', $frag)){
    $headers[] = $frag;
  }else{
    $body[] = $frag;
  }
}

echo implode("\n\n", $headers);
echo implode("\n\n", $body); 
```

我讨厌这种冗长的 hackish 方法（如果 curl 以某种方式标记了正文内容，我会更喜欢它），但它多年来一直运作良好。让我们知道您的身体情况如何。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-04T18:24:52.450

我有同样的问题，但这个解决方案确实对我有用，最后我找到了这个方法并且一切都很好：

我们必须在发送之前准备数据发布字段：

```
function curl_custom_postfields($curl, array $assoc = array(), array $files = array()) {
/**
* For safe multipart POST request for PHP5.3 ~ PHP 5.4.
* @param resource $ch cURL resource
* @param array $assoc "name => value"
* @param array $files "name => path"
* @return bool
*/
// invalid characters for "name" and "filename"
static $disallow = array("\0", "\"", "\r", "\n");
// build normal parameters
foreach ($assoc as $key => $value) {
    $key = str_replace($disallow, "_", $key);
    $body[] = implode("\r\n", array(
        "Content-Disposition: form-data; name=\"{$key}\"",
        "",
        filter_var($value), 
    ));
}
// build file parameters
foreach ($files as $key => $value) {
    switch (true) {
        case false === $value = realpath(filter_var($value)):
        case !is_file($value):
        case !is_readable($value):
            continue; // or return false, throw new InvalidArgumentException
    }
    $data = file_get_contents($value);
    $value = call_user_func("end", explode(DIRECTORY_SEPARATOR, $value));
    $key = str_replace($disallow, "_", $key);
    $value = str_replace($disallow, "_", $value);
    $body[] = implode("\r\n", array(
        "Content-Disposition: form-data; name=\"{$key}\"; filename=\"{$value}\"",
        "Content-Type: application/octet-stream",
        "",
        $data, 
    ));
}

// generate safe boundary 
do {
    $boundary = "---------------------" . md5(mt_rand() . microtime());
} while (preg_grep("/{$boundary}/", $body));

// add boundary for each parameters
array_walk($body, function (&$part) use ($boundary) {
    $part = "--{$boundary}\r\n{$part}";
});

// add final boundary
$body[] = "--{$boundary}--";
$body[] = "";

// set options
return @curl_setopt_array($curl, array(
    CURLOPT_POST       => true,
    CURLOPT_POSTFIELDS => implode("\r\n", $body),
    CURLOPT_HTTPHEADER => array(
        "Expect: 100-continue",
        "Content-Type: multipart/form-data; boundary={$boundary}", // change Content-Type
    ),
));} 
```

您必须准备两个数组： 1- 带有普通数据的 post 字段：(name1 = val1, name2 = val2, ...) 2- 带有文件数据的 post 字段：(name_file 1, path_file1, name_file2 = path_file2, ..)

最后在像这样执行 curl 之前调用这个函数。$r = curl_custom_postfields($curl, $post, $postfields_files);

# javascript - 在 JavaScript 中美化 JSON 数组

> ID：11359291
> 
> 赞同：20
> 
> 时间：2012-07-06T09:15:25.013
> 
> 标签：javascript, jquery, html, json

> **可能重复：**
> [使用 JavaScript 的 JSON 漂亮打印](https://stackoverflow.com/questions/4810841/json-pretty-print-using-javascript)

我正在开发一个项目，该项目将用于帮助平台的未来开发人员分析和理解 JSON 数组。我正在引用 Facebook 出色的 Graph Explorer 页面，[在此处看到](https://developers.facebook.com/tools/explorer/)，并希望将我们的数组输出为一个美化的、正确的制表符缩进和换行符数组，就像它在资源管理器上所做的那样。

数组被输出到 a `textarea`，因此我认为我遇到了换行和制表符的问题。我也尝试过使用美化库，但没有运气。

例子：

```
{"outcome" : "success", "result" : {"name" : "messaging-sockets", "default-interface" : "external", "include" : [], "socket-binding" : {"messaging" : {"name" : "messaging", "interface" : null, "port" : 5445, "fixed-port" : null, "multicast-address" : null, "multicast-port" : null}, "messaging-throughput" : {"name" : "messaging-throughput", "interface" : null, "port" : 5455, "fixed-port" : null, "multicast-address" : null, "multicast-port" : null}}}, "compensating-operation" : null} 
```

到：

```
{
   "outcome":"success",
   "result":{
      "name":"messaging-sockets",
      "default-interface":"external",
      "include":[

      ],
      "socket-binding":{
         "messaging":{
            "name":"messaging",
            "interface":null,
            "port":5445,
            "fixed-port":null,
            "multicast-address":null,
            "multicast-port":null
         },
         "messaging-throughput":{
            "name":"messaging-throughput",
            "interface":null,
            "port":5455,
            "fixed-port":null,
            "multicast-address":null,
            "multicast-port":null
         }
      }
   },
   "compensating-operation":null
} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-06T09:16:55.403

您可以使用[JSON.stringify](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)：

```
JSON.stringify(jsonobj,null,'\t') 
```

请参阅[演示](http://jsfiddle.net/wy2Uk/)。

**更新：**如果你没有`jsonobj`，但有 json 字符串，那么在使用`stringify`函数之前，通过这一行将 json 字符串转换为 json 对象：

```
jsonobj = JSON.parse(jsonstring); 
```

# algorithm - 推流重标记算法

> ID：11359293
> 
> 赞同：2
> 
> 时间：2012-07-06T09:15:27.587
> 
> 标签：algorithm, graph-algorithm, max-flow

V wrt 中顶点的有效标记。预流 x 是一个函数 d[.] : V -> Z 满足：

d[s] = n ^ d[t] = 0

对于所有 (v,w) 属于 E ： d[v] <= d[w] + 1

假设我们有 4 个顶点，包括 (s 和 t)

那么我们有 d[s] = 4

根据有效标签，我们应该有 d[v] <= d[w]+1，但是对于来自 's' 的边，它是无效的，因为 4 <= 1 是假的。难道这个逻辑不仅是来源吗？

我理解正确吗？请纠正我。

感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:26:56.523

您对有效标签的定义很接近，但并不完全正确。

您声称对于属于 E 的所有 (v,w)，d[v] <= d[w] + 1。

然而，这实际上只需要对属于 R 的所有 (v,w) 都是正确的，其中 R 是**残差**边缘。

剩余边缘是电流小于边缘容量的边缘。

[topcoder](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=maxflowPushRelabel)有一个很好的解释。

考虑这个图表：

![示例流程](../Images/179b5ae9a37b396ed789e7fdb5a25a5d.png)

在边上的标签（例如 2/3）中，第一个数字给出了当前的流量，第二个数字给出了边的容量。

节点上的数字给出了每个节点的高度函数 d。

绿色边缘是剩余边缘，因为它们具有备用容量。

所以要检查高度约束，我们只需要检查 S->A 边和 B->T 边。

# mysql - mysql中表错误的密钥文件不正确

> ID：11359295
> 
> 赞同：0
> 
> 时间：2012-07-06T09:15:29.470
> 
> 标签：mysql

我有一个包含 1400 万行以上的大表。所有 varchar 数据。我正在尝试运行此查询。我很快得到输出。限制仅对 800K 记录设置。

```
SELECT *
FROM (SELECT unique_user_id, url, count(url) as url_visit_count, categories, count(categories) as count 
FROM ph_usertrack_data GROUP BY unique_user_id LIMIT 800000) a 
ORDER BY a.url_visit_count DESC LIMIT 100; 
```

当我将限制设置为 100 万条记录时，出现此错误

`Incorrect key file for table '/tmp/#sql_6663_0.MYI'; try to repair it`

我的临时文件夹有很多空间，大约 100 GB，所以没有空间问题。为什么当我增加要处理的行数时会出现此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:36:12.770

我认为这应该有所帮助-

> 您可以使用 df -h 检查 \tmp 是否在其自己的分区中，以及为其分配了多少空间。
> 
> 如果它在自己的分区中并且空间不足，您可以：
> 
> (a) 修改 /tmp 使其分区有更多空间（通过重新分配或将其移动到主分区 - 例如，请参见此处） (b) 更改 MySql 配置，以便它在不同分区上使用不同的临时文件夹，例如 /变量/时间

请参考[这里](https://stackoverflow.com/questions/2090073/mysql-incorrect-key-file-for-tmp-table-when-making-multiple-joins?rq=1)和[这个](http://www.mysqlperformancetuning.com/a-fix-for-incorrect-key-file-for-table-mysql)。

# c++ - STL中的返回函数

> ID：11359297
> 
> 赞同：0
> 
> 时间：2012-07-06T09:15:41.967
> 
> 标签：c++, stl, back

我到处读到 back() 函数返回对最后一个元素的引用，但我有疑问。

我创建了一个包含元素 1,3,5 的向量。然后我编写了以下代码

```
int i = v.back();
i++; 
```

在上述两个语句之后，我打印了向量并得到了输出 1 3 5 而当我增加引用时它应该是 1 3 6。

但是当我做 (v.back())++ 然后打印向量的值时，我得到了结果

```
1 3 6 
```

我不明白输出的区别，在我看来应该是一样的。如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T09:18:07.910

该代码不会通过引用增加最后一个元素，它会增加最后一个元素的*副本*。改成：

```
int& i = v.back();
i++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:20:13.020

据此[，](http://www.cplusplus.com/reference/stl/vector/back/%20vector%3a%3aback%28%29) back() 返回参考。要更改您的项目，请将其分配给引用或指针，如下所示：

```
int& iref = v.back();
int* iptr = &v.back(); 
```

这些变量的所有进一步修改都会导致向量元素的变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:18:21.303

```
int i = v.back();
i++; 
```

这将增加`i`，而不是向量内的值。如果你想增加向量的最后一个元素，要么像你做的那样做（用`(v.back())++`）或使用参考：

```
int& i = v.back();
i++;
// v.back is now +1 
```

# session - C# SessionState 自定义。会话永不过期

> ID：11359299
> 
> 赞同：1
> 
> 时间：2012-07-06T09:15:55.170
> 
> 标签：session, session-state, session-cookies, session-timeout, session-state-provider

我有一个 MVC3 应用程序和 MySQL 持久数据库会话的问题。

问题是会话永不过期。

*   ResetItemTimeout 方法在 GetItemExclusive 之前是 callign
*   GetItemExclusive 方法检查过期字段是否小于现在。
*   由于此方法更新过期日期并添加了 web.config 上指定的分钟数，因此永远不会发生这种情况。

我的 web.config 是：

对于会话状态：

```
<sessionState cookieless="false" regenerateExpiredSessionId="true" mode="Custom" customProvider="MySqlSessionProvider" timeout="20">
<providers>
    <add name="MySqlSessionProvider" type="Zasy.SQLSessionState.Session.MySqlSessionStateStore" connectionStringName="MySqlConnection" writeExceptionsToEventLog="true"/>
</providers> 
```

对于表单授权：

```
<authentication mode="Forms">
<forms loginUrl="~/Home/?error=authentication" timeout="20" /> 
```

问题是会话永不过期。我正在使用以下页面（http://msdn.microsoft.com/en-us/library/ms178589%28v=vs.80%）中的以下代码（唯一的修改是我使用的是 MySql 连接） 29.aspx)

```
 using System;
    using System.Web;
    using System.Web.Configuration;
    using System.Configuration;
    using System.Configuration.Provider;
    using System.Collections.Specialized;
    using System.Web.SessionState;
    using System.Data;
    using System.Data.Odbc;
    using System.Diagnostics;
    using System.IO;

    /*
    This session state store provider supports the following schema:

      CREATE TABLE Sessions
      (
        SessionId       Text(80)  NOT NULL,
        ApplicationName Text(255) NOT NULL,
        Created         DateTime  NOT NULL,
        Expires         DateTime  NOT NULL,
        LockDate        DateTime  NOT NULL,
        LockId          Integer   NOT NULL,
        Timeout         Integer   NOT NULL,
        Locked          YesNo     NOT NULL,
        SessionItems    Memo,
        Flags           Integer   NOT NULL,
          CONSTRAINT PKSessions PRIMARY KEY (SessionId, ApplicationName)
      )

    This session state store provider does not automatically clean up 
    expired session item data. It is recommended
    that you periodically delete expired session information from the
    data store with the following code (where 'conn' is the OdbcConnection
    for the session state store provider):

      string commandString = "DELETE FROM Sessions WHERE Expires < ?";
      OdbcConnection conn = new OdbcConnection(connectionString);
      OdbcCommand cmd = new OdbcCommand(commandString, conn);
      cmd.Parameters.Add("@Expires", OdbcType.DateTime).Value = DateTime.Now;
      conn.Open();
      cmd.ExecuteNonQuery();
      conn.Close();

    */

    namespace Samples.AspNet.Session
    {

      public sealed class OdbcSessionStateStore : SessionStateStoreProviderBase
      {
        private SessionStateSection pConfig = null;
        private string connectionString;
        private ConnectionStringSettings pConnectionStringSettings;
        private string eventSource = "OdbcSessionStateStore";
        private string eventLog = "Application";
        private string exceptionMessage = 
          "An exception occurred. Please contact your administrator.";
        private string pApplicationName;

    //
    // If false, exceptions are thrown to the caller. If true,
    // exceptions are written to the event log.
    //

    private bool pWriteExceptionsToEventLog = false;

    public bool WriteExceptionsToEventLog
    {
      get { return pWriteExceptionsToEventLog; }
      set { pWriteExceptionsToEventLog = value; }
    }

    //
    // The ApplicationName property is used to differentiate sessions
    // in the data source by application.
    //

    public string ApplicationName
    {
      get { return pApplicationName; }
    }

    public override void Initialize(string name, NameValueCollection config)
    {
      //
      // Initialize values from web.config.
      //

      if (config == null)
        throw new ArgumentNullException("config");

      if (name == null || name.Length == 0)
        name = "OdbcSessionStateStore";

      if (String.IsNullOrEmpty(config["description"]))
      {
        config.Remove("description");
        config.Add("description", "Sample ODBC Session State Store provider");
      }

      // Initialize the abstract base class.
      base.Initialize(name, config);

      //
      // Initialize the ApplicationName property.
      //

      pApplicationName = 
        System.Web.Hosting.HostingEnvironment.ApplicationVirtualPath;

      //
      // Get <sessionState> configuration element.
      //

      Configuration cfg =
        WebConfigurationManager.OpenWebConfiguration(ApplicationName);
      pConfig = 
        (SessionStateSection)cfg.GetSection("system.web/sessionState");

      //
      // Initialize connection string.
      //

      pConnectionStringSettings = 
        ConfigurationManager.ConnectionStrings[config["connectionStringName"]];

      if (pConnectionStringSettings == null || 
        pConnectionStringSettings.ConnectionString.Trim() == "")
      {
        throw new ProviderException("Connection string cannot be blank.");
      }

      connectionString = pConnectionStringSettings.ConnectionString;

      //
      // Initialize WriteExceptionsToEventLog
      //

      pWriteExceptionsToEventLog = false;

      if (config["writeExceptionsToEventLog"] != null)
      {
        if (config["writeExceptionsToEventLog"].ToUpper() == "TRUE") 
          pWriteExceptionsToEventLog = true;
      }
    }

    //
    // SessionStateStoreProviderBase members
    //

    public override void Dispose()
    {
    }

    //
    // SessionStateProviderBase.SetItemExpireCallback
    //

    public override bool SetItemExpireCallback(SessionStateItemExpireCallback expireCallback)
    {
      return false;
    }

    //
    // SessionStateProviderBase.SetAndReleaseItemExclusive
    //

    public override void SetAndReleaseItemExclusive(HttpContext context,
      string id,
      SessionStateStoreData item,
      object lockId,
      bool newItem)                                           
    {
      // Serialize the SessionStateItemCollection as a string.
      string sessItems = Serialize((SessionStateItemCollection)item.Items);

      OdbcConnection conn = new OdbcConnection(connectionString);
      OdbcCommand cmd;
      OdbcCommand deleteCmd = null;

      if (newItem)
      {
        // OdbcCommand to clear an existing expired session if it exists.
        deleteCmd = new OdbcCommand("DELETE FROM Sessions " +
            "WHERE SessionId = ? AND ApplicationName = ? AND Expires < ?", conn);
        deleteCmd.Parameters.Add("@SessionId", OdbcType.VarChar, 80).Value = id;
        deleteCmd.Parameters.Add
          ("@ApplicationName", OdbcType.VarChar, 255).Value = ApplicationName;
        deleteCmd.Parameters.Add
          ("@Expires", OdbcType.DateTime).Value = DateTime.Now;

        // OdbcCommand to insert the new session item.
        cmd = new OdbcCommand("INSERT INTO Sessions " +
          " (SessionId, ApplicationName, Created, Expires, " +
          "  LockDate, LockId, Timeout, Locked, SessionItems, Flags) " +
          " Values(?, ?, ?, ?, ?, ? , ?, ?, ?, ?)", conn);
        cmd.Parameters.Add("@SessionId", OdbcType.VarChar, 80).Value = id;
        cmd.Parameters.Add
          ("@ApplicationName", OdbcType.VarChar, 255).Value = ApplicationName;
        cmd.Parameters.Add
          ("@Created", OdbcType.DateTime).Value = DateTime.Now;
        cmd.Parameters.Add
          ("@Expires", OdbcType.DateTime).Value = DateTime.Now.AddMinutes((Double)item.Timeout);
        cmd.Parameters.Add
          ("@LockDate", OdbcType.DateTime).Value = DateTime.Now;
        cmd.Parameters.Add("@LockId", OdbcType.Int).Value = 0;
        cmd.Parameters.Add
          ("@Timeout", OdbcType.Int).Value = item.Timeout;
        cmd.Parameters.Add("@Locked", OdbcType.Bit).Value = false;
        cmd.Parameters.Add
          ("@SessionItems", OdbcType.VarChar, sessItems.Length).Value = sessItems;
        cmd.Parameters.Add("@Flags", OdbcType.Int).Value = 0;
      }
      else
      {
        // OdbcCommand to update the existing session item.
        cmd = new OdbcCommand(
          "UPDATE Sessions SET Expires = ?, SessionItems = ?, Locked = ? " +
          " WHERE SessionId = ? AND ApplicationName = ? AND LockId = ?", conn);
        cmd.Parameters.Add("@Expires", OdbcType.DateTime).Value = 
          DateTime.Now.AddMinutes((Double)item.Timeout);
        cmd.Parameters.Add("@SessionItems", 
          OdbcType.VarChar, sessItems.Length).Value = sessItems;
        cmd.Parameters.Add("@Locked", OdbcType.Bit).Value = false;
        cmd.Parameters.Add("@SessionId", OdbcType.VarChar, 80).Value = id;
        cmd.Parameters.Add("@ApplicationName", OdbcType.VarChar, 
          255).Value = ApplicationName;
        cmd.Parameters.Add("@LockId", OdbcType.Int).Value = lockId;
      }

      try
      {
        conn.Open();

        if (deleteCmd != null)
          deleteCmd.ExecuteNonQuery();

        cmd.ExecuteNonQuery();
      }
      catch (OdbcException e)
      {
        if (WriteExceptionsToEventLog)
        {
          WriteToEventLog(e, "SetAndReleaseItemExclusive");
          throw new ProviderException(exceptionMessage);
        }
        else
          throw e;
      }
      finally
      {
        conn.Close();
      }
    }

    //
    // SessionStateProviderBase.GetItem
    //

    public override SessionStateStoreData GetItem(HttpContext context,
      string id,
      out bool locked,
      out TimeSpan lockAge,
      out object lockId,
      out SessionStateActions actionFlags)
    {
      return GetSessionStoreItem(false, context, id, out locked,
        out lockAge, out lockId, out actionFlags);
    }

    //
    // SessionStateProviderBase.GetItemExclusive
    //

    public override SessionStateStoreData GetItemExclusive(HttpContext context, 
      string id,
      out bool locked,
      out TimeSpan lockAge,
      out object lockId,
      out SessionStateActions actionFlags)
    {
      return GetSessionStoreItem(true, context, id, out locked, 
        out lockAge, out lockId, out actionFlags);
    }

    //
    // GetSessionStoreItem is called by both the GetItem and 
    // GetItemExclusive methods. GetSessionStoreItem retrieves the 
    // session data from the data source. If the lockRecord parameter
    // is true (in the case of GetItemExclusive), then GetSessionStoreItem
    // locks the record and sets a new LockId and LockDate.
    //

    private SessionStateStoreData GetSessionStoreItem(bool lockRecord,
      HttpContext context, 
      string id,
      out bool locked,
      out TimeSpan lockAge,
      out object lockId,
      out SessionStateActions actionFlags)
    {
      // Initial values for return value and out parameters.
      SessionStateStoreData item = null;
      lockAge = TimeSpan.Zero;
      lockId = null;
      locked = false;
      actionFlags = 0;

      // ODBC database connection.
      OdbcConnection conn = new OdbcConnection(connectionString);
      // OdbcCommand for database commands.
      OdbcCommand cmd = null;              
      // DataReader to read database record.
      OdbcDataReader reader = null;  
      // DateTime to check if current session item is expired.
      DateTime expires;              
      // String to hold serialized SessionStateItemCollection.
      string serializedItems = "";
      // True if a record is found in the database.
       bool foundRecord = false;    
      // True if the returned session item is expired and needs to be deleted.
       bool deleteData = false;             
      // Timeout value from the data store.
      int timeout = 0;               

      try
      {
        conn.Open();

        // lockRecord is true when called from GetItemExclusive and
        // false when called from GetItem.
        // Obtain a lock if possible. Ignore the record if it is expired.
        if (lockRecord)
        {
          cmd = new OdbcCommand(
            "UPDATE Sessions SET" +
            " Locked = ?, LockDate = ? " +
            " WHERE SessionId = ? AND ApplicationName = ? AND Locked = ? AND Expires > ?", conn);
          cmd.Parameters.Add("@Locked", OdbcType.Bit).Value = true;
          cmd.Parameters.Add("@LockDate", OdbcType.DateTime).Value 
            = DateTime.Now;
          cmd.Parameters.Add("@SessionId", OdbcType.VarChar, 80).Value = id;
          cmd.Parameters.Add("@ApplicationName", OdbcType.VarChar, 
            255).Value = ApplicationName;
          cmd.Parameters.Add("@Locked", OdbcType.Int).Value = false;
          cmd.Parameters.Add
            ("@Expires", OdbcType.DateTime).Value = DateTime.Now;

          if (cmd.ExecuteNonQuery() == 0)
            // No record was updated because the record was locked or not found.
            locked = true;             
          else
            // The record was updated.

            locked = false;
          }

        // Retrieve the current session item information.
        cmd = new OdbcCommand(
          "SELECT Expires, SessionItems, LockId, LockDate, Flags, Timeout " +
          "  FROM Sessions " +
          "  WHERE SessionId = ? AND ApplicationName = ?", conn);
        cmd.Parameters.Add("@SessionId", OdbcType.VarChar, 80).Value = id;
        cmd.Parameters.Add("@ApplicationName", OdbcType.VarChar, 
          255).Value = ApplicationName;

        // Retrieve session item data from the data source.
        reader = cmd.ExecuteReader(CommandBehavior.SingleRow);
        while (reader.Read())
        {
          expires = reader.GetDateTime(0);
        /* ####################################################################################################
        * ResetItemTimeout has already update the expires date to the new expires date, so expires never will be less than DateTime.now
        * #####################################################################################################
        */
          if (expires < DateTime.Now)
          {
            // The record was expired. Mark it as not locked.
            locked = false;     
            // The session was expired. Mark the data for deletion.
            deleteData = true;
            }
          else
            foundRecord = true;

          serializedItems = reader.GetString(1);
          lockId = reader.GetInt32(2);
          lockAge = DateTime.Now.Subtract(reader.GetDateTime(3));
          actionFlags = (SessionStateActions)reader.GetInt32(4);
          timeout = reader.GetInt32(5);
        }
        reader.Close();

        // If the returned session item is expired, 
        // delete the record from the data source.
        if (deleteData)   
        {
          cmd = new OdbcCommand("DELETE FROM Sessions " +
            "WHERE SessionId = ? AND ApplicationName = ?", conn);
          cmd.Parameters.Add("@SessionId", OdbcType.VarChar, 80).Value = id;
          cmd.Parameters.Add("@ApplicationName", OdbcType.VarChar, 
            255).Value = ApplicationName;

          cmd.ExecuteNonQuery();
        }

        // The record was not found. Ensure that locked is false.
        if (!foundRecord)
          locked = false;

        // If the record was found and you obtained a lock, then set 
        // the lockId, clear the actionFlags,
        // and create the SessionStateStoreItem to return.
        if (foundRecord && !locked)
        {
          lockId = (int)lockId + 1;

          cmd = new OdbcCommand("UPDATE Sessions SET" +
            " LockId = ?, Flags = 0 " +
            " WHERE SessionId = ? AND ApplicationName = ?", conn);
          cmd.Parameters.Add("@LockId", OdbcType.Int).Value = lockId;
          cmd.Parameters.Add("@SessionId", OdbcType.VarChar, 80).Value = id;
          cmd.Parameters.Add("@ApplicationName", OdbcType.VarChar, 255).Value = ApplicationName;

          cmd.ExecuteNonQuery();

          // If the actionFlags parameter is not InitializeItem, 
          // deserialize the stored SessionStateItemCollection.
          if (actionFlags == SessionStateActions.InitializeItem)
            item = CreateNewStoreData(context, pConfig.Timeout.Minutes);
          else
            item = Deserialize(context, serializedItems, timeout);
        }
      }
      catch (OdbcException e)
      {
        if (WriteExceptionsToEventLog)
        {
          WriteToEventLog(e, "GetSessionStoreItem");
          throw new ProviderException(exceptionMessage);
        }
        else
          throw e;
      }
      finally
      {
        if (reader != null) { reader.Close(); }
        conn.Close();
      } 

      return item;
    }

    //
    // Serialize is called by the SetAndReleaseItemExclusive method to 
    // convert the SessionStateItemCollection into a Base64 string to    
    // be stored in an Access Memo field.
    //

    private string Serialize(SessionStateItemCollection items)
    {
      MemoryStream ms = new MemoryStream();
      BinaryWriter writer = new BinaryWriter(ms);

      if (items != null)
        items.Serialize(writer);

      writer.Close();

      return Convert.ToBase64String(ms.ToArray());
    }

    //
    // DeSerialize is called by the GetSessionStoreItem method to 
    // convert the Base64 string stored in the Access Memo field to a 
    // SessionStateItemCollection.
    //

    private SessionStateStoreData Deserialize(HttpContext context, 
      string serializedItems, int timeout)
    {
      MemoryStream ms = 
        new MemoryStream(Convert.FromBase64String(serializedItems));

      SessionStateItemCollection sessionItems =
        new SessionStateItemCollection();

      if (ms.Length > 0)
      {
          BinaryReader reader = new BinaryReader(ms);
          sessionItems = SessionStateItemCollection.Deserialize(reader);
      }

      return new SessionStateStoreData(sessionItems,
        SessionStateUtility.GetSessionStaticObjects(context),
        timeout);
    }

    //
    // SessionStateProviderBase.ReleaseItemExclusive
    //

    public override void ReleaseItemExclusive(HttpContext context,
      string id,
      object lockId)
    {
      OdbcConnection conn = new OdbcConnection(connectionString);
      OdbcCommand cmd = 
        new OdbcCommand("UPDATE Sessions SET Locked = 0, Expires = ? " +
        "WHERE SessionId = ? AND ApplicationName = ? AND LockId = ?", conn);
      cmd.Parameters.Add("@Expires", OdbcType.DateTime).Value = 
        DateTime.Now.AddMinutes(pConfig.Timeout.Minutes);
      cmd.Parameters.Add("@SessionId", OdbcType.VarChar, 80).Value = id;
      cmd.Parameters.Add("@ApplicationName", OdbcType.VarChar, 
        255).Value = ApplicationName;
      cmd.Parameters.Add("@LockId", OdbcType.Int).Value = lockId;

      try
      {
        conn.Open();

        cmd.ExecuteNonQuery();
      }
      catch (OdbcException e)
      {
        if (WriteExceptionsToEventLog)
        {
          WriteToEventLog(e, "ReleaseItemExclusive");
          throw new ProviderException(exceptionMessage);
        }
        else
          throw e;
      }
      finally
      {
        conn.Close();
      }      
    }

    //
    // SessionStateProviderBase.RemoveItem
    //

    public override void RemoveItem(HttpContext context,
      string id,
      object lockId,
      SessionStateStoreData item)
    {
      OdbcConnection conn = new OdbcConnection(connectionString);
      OdbcCommand cmd = new OdbcCommand("DELETE * FROM Sessions " +
        "WHERE SessionId = ? AND ApplicationName = ? AND LockId = ?", conn);
      cmd.Parameters.Add("@SessionId", OdbcType.VarChar, 80).Value = id;
      cmd.Parameters.Add("@ApplicationName", OdbcType.VarChar, 
        255).Value = ApplicationName;
      cmd.Parameters.Add("@LockId", OdbcType.Int).Value = lockId;

      try
      {
        conn.Open();

        cmd.ExecuteNonQuery();
      }
      catch (OdbcException e)
      {
        if (WriteExceptionsToEventLog)
        {
          WriteToEventLog(e, "RemoveItem");
          throw new ProviderException(exceptionMessage);
        }
        else
          throw e;
      }
      finally
      {
        conn.Close();
      } 
    }

    //
    // SessionStateProviderBase.CreateUninitializedItem
    //

    public override void CreateUninitializedItem(HttpContext context,
      string id,
      int timeout)
    {
       OdbcConnection conn = new OdbcConnection(connectionString);
       OdbcCommand cmd = new OdbcCommand("INSERT INTO Sessions " +
         " (SessionId, ApplicationName, Created, Expires, " +
         "  LockDate, LockId, Timeout, Locked, SessionItems, Flags) " +
         " Values(?, ?, ?, ?, ?, ? , ?, ?, ?, ?)", conn);
      cmd.Parameters.Add("@SessionId", OdbcType.VarChar, 80).Value = id;
      cmd.Parameters.Add("@ApplicationName", OdbcType.VarChar, 
        255).Value = ApplicationName;
      cmd.Parameters.Add("@Created", OdbcType.DateTime).Value 
        = DateTime.Now;
      cmd.Parameters.Add("@Expires", OdbcType.DateTime).Value 
        = DateTime.Now.AddMinutes((Double)timeout);
      cmd.Parameters.Add("@LockDate", OdbcType.DateTime).Value 
        = DateTime.Now;
      cmd.Parameters.Add("@LockId", OdbcType.Int).Value = 0;
      cmd.Parameters.Add("@Timeout", OdbcType.Int).Value = timeout;
      cmd.Parameters.Add("@Locked", OdbcType.Bit).Value = false;
      cmd.Parameters.Add("@SessionItems", OdbcType.VarChar, 0).Value = "";
      cmd.Parameters.Add("@Flags", OdbcType.Int).Value = 1;

      try
      {
        conn.Open();

        cmd.ExecuteNonQuery();
      }
      catch (OdbcException e)
      {
        if (WriteExceptionsToEventLog)
        {
          WriteToEventLog(e, "CreateUninitializedItem");
          throw new ProviderException(exceptionMessage);
        }
        else
          throw e;
      }
      finally
      {
        conn.Close();
      }
    }

    //
    // SessionStateProviderBase.CreateNewStoreData
    //

    public override SessionStateStoreData CreateNewStoreData(
      HttpContext context,
      int timeout)
    {
      return new SessionStateStoreData(new SessionStateItemCollection(),
        SessionStateUtility.GetSessionStaticObjects(context),
        timeout);
    }

    //
    // SessionStateProviderBase.ResetItemTimeout
    //
    /* ####################################################################################################
    * ResetItemTimeout is callign before GetItemExclusive
    * GetItemExclusive checks if expire field is less than now.
    * This never occurs due to this method update the expire date adding the minutes specified on the web.config.
    * #####################################################################################################
    */
    public override void ResetItemTimeout(HttpContext context,
                                          string id)
    {
      OdbcConnection conn = new OdbcConnection(connectionString);
      OdbcCommand cmd = 
        new OdbcCommand("UPDATE Sessions SET Expires = ? " +
        "WHERE SessionId = ? AND ApplicationName = ?", conn);
      cmd.Parameters.Add("@Expires", OdbcType.DateTime).Value 
        = DateTime.Now.AddMinutes(pConfig.Timeout.Minutes);
      cmd.Parameters.Add("@SessionId", OdbcType.VarChar, 80).Value = id;
      cmd.Parameters.Add("@ApplicationName", OdbcType.VarChar, 
        255).Value = ApplicationName;

      try
      {
        conn.Open();

        cmd.ExecuteNonQuery();
      }
      catch (OdbcException e)
      {
        if (WriteExceptionsToEventLog)
        {
          WriteToEventLog(e, "ResetItemTimeout");
          throw new ProviderException(exceptionMessage);
        }
        else
          throw e;
      }
      finally
      {
        conn.Close();
      }
    }

    //
    // SessionStateProviderBase.InitializeRequest
    //

    public override void InitializeRequest(HttpContext context)
    {
    }

    //
    // SessionStateProviderBase.EndRequest
    //

    public override void EndRequest(HttpContext context)
    {
    }

    //
    // WriteToEventLog
    // This is a helper function that writes exception detail to the 
    // event log. Exceptions are written to the event log as a security
    // measure to ensure private database details are not returned to 
    // browser. If a method does not return a status or Boolean
    // indicating the action succeeded or failed, the caller also 
    // throws a generic exception.
    //

    private void WriteToEventLog(Exception e, string action)
    {
      EventLog log = new EventLog();
      log.Source = eventSource;
      log.Log = eventLog;

      string message = 
        "An exception occurred communicating with the data source.\n\n";
      message += "Action: " + action + "\n\n";
      message += "Exception: " + e.ToString();

      log.WriteEntry(message);
    }
  }
} 
```

有人能帮我吗？。

非常感谢您的回答。

胡安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T16:32:53.547

在 SQL SERVER 上，您必须运行 SQL Server 代理。当您安装 ASPState 时，作业“ASPState_Job_DeleteExpiredSessions”已安装，但如果代理已死，会话将永远存在。

如果“OdbcSessionStateStore”在网页的上下文中，则会话将始终在您的代码执行删除操作之前刷新。

所以你在mysql上运行必须有某种代理来运行这个进程。Quartz 是一个很好的调度程序，您可以使用 Windows 服务轻松实现 Quartz 并完成工作。 [http://quartz-scheduler.org/](http://quartz-scheduler.org/)

# perl - Log4perl：同一行中的新消息没有前缀

> ID：11359303
> 
> 赞同：0
> 
> 时间：2012-07-06T09:16:00.673
> 
> 标签：perl, log4perl

每条[Log4perl](http://search.cpan.org/~mschilli/Log-Log4perl/)消息都以新行开头：

```
my $log = Log::Log4perl->get_logger("log");
$log->info("start:");
$log->info("10");
$log->info("20");
$log->info("30"); 
```

结果：

```
[2012/07/06 13:12:27] INFO log - start:
[2012/07/06 13:12:27] INFO log - 10
[2012/07/06 13:12:27] INFO log - 20
[2012/07/06 13:12:27] INFO log - 30 
```

如何在同一行获取下一条消息且不带前缀：

```
[2012/07/06 13:12:27] INFO log - start: 10 20 30 
```

有任何想法吗？

**升级版：**

我试图为我的程序制作进度条。但结果我需要这个进度条只在屏幕上，而不是在日志上。

这样我就这样做了：

```
$log->info("start");
printf("progress: ");
printf("10");
printf("20");
printf("30"); 
```

谢谢您的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:26:14.493

尝试使用两个不同的类别，它们都将日志写入同一个地方，即屏幕。`PatternLayout`当您想添加日期或仅添加消息时，修改它们并使用其中一个。您还应该明确添加换行符：

内容`script.pl`：

```
use warnings;
use strict;
use Log::Log4perl;

my $conf = qq| 
    log4perl.category.Stdout_nl=INFO, Date           
    log4perl.appender.Date=Log::Log4perl::Appender::Screen
    log4perl.appender.Date.layout=PatternLayout
    log4perl.appender.Date.layout.ConversionPattern=%d %p %m

    log4perl.category.Stdout=INFO, Number
    log4perl.appender.Number=Log::Log4perl::Appender::Screen
    log4perl.appender.Number.layout=PatternLayout
    log4perl.appender.Number.layout.ConversionPattern= %-3m
|;

Log::Log4perl::init( \$conf );
my $log_date = Log::Log4perl->get_logger( "Stdout_nl" );
my $log_num = Log::Log4perl->get_logger( "Stdout" );
$log_date->info("start:");
$log_num->info("10");
$log_num->info("20");
$log_num->info("30\n"); 
```

像这样运行它：

```
perl script.pl 
```

具有以下输出：

```
2012/07/06 12:24:04 INFO start:10 20 30 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T13:57:12.407

如果您需要进度条，则cpan 中有[Term::ProgressBar](http://search.cpan.org/~szabgab/Term-ProgressBar-2.13/lib/Term/ProgressBar.pm)

# java - Android BufferedReader 实例在最终尝试关闭时无法解决

> ID：11359305
> 
> 赞同：0
> 
> 时间：2012-07-06T09:16:04.923
> 
> 标签：java, android

我省略了代码中不相关的部分：

```
[...]
    try {
        URL url = new URL(updateUrl);
        BufferedReader input = new BufferedReader(new InputStreamReader(url.openStream()));
[...]
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
    } finally {
        input.close();
    }
[...] 
```

问题是在最后的“input.close()”上，Eclipse 说“输入无法解析”。

我认为这可能是一个范围问题，但我看过其他人的代码，而且它通常具有相同的形式，所以我不知道为什么它在这里不起作用。

有什么提示吗？

非常感谢提前，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:19:49.663

这确实是一个范围错误。
您`input`在块内声明`try`，因此在块内看不到它`finally`。在外面声明它，这样它对双方都可见，你应该没问题：

```
[...]
    BufferedReader input = null;
    try {
        URL url = new URL(updateUrl);
        input = new BufferedReader(new InputStreamReader(url.openStream()));
[...]
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
    } finally {
        if (input != null)
        {
            try {
              input.close();
            }
            catch (IOException exc)
            {
              exc.printStackTrace();
            }
        }
    }
[...] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:19:35.867

`BufferedReader` **将输入**实例全局或在第一个 try/catch 块之外声明为：

```
[...]
BufferedReader input;
    try {
        URL url = new URL(updateUrl);
        input = new BufferedReader(new InputStreamReader(url.openStream()));
[...]
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
    } finally {
        input.close();
    }
[...] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T09:20:19.477

你是对的，这是一个范围问题。Java 使用块作用域，这意味着在一个作用域中声明的局部变量在任何不包含在其中的作用域中都是不可见的。 `try`块和`finally`块也不例外。

```
BufferedReader input;
try {
    URL url = new URL(updateUrl);
    input = new BufferedReader(new InputStreamReader(url.openStream()));
} catch (MalformedURLException e) {
    e.printStackTrace();
} catch (IOException e) {
} finally {
    if (input != null) {
        try {
            input.close();
        } catch (IOException e) {
            // Log or ignore this
        }
    }
} 
```

# api - 无法下载谷歌数据 python 库/谷歌网站文档页面上的链接不起作用

> ID：11359309
> 
> 赞同：0
> 
> 时间：2012-07-06T09:16:40.380
> 
> 标签：api, sites

我无法下载 java 或 python 的客户端库。python 库的链接： [http](http://code.google.com/p/gdata-python-client/downloads/list) ://code.google.com/p/gdata-python-client/downloads/list 另外，链接 [https://developers.google.com/apis/gdata/articles/python_client_lib](https://developers.google.com/apis/gdata/articles/python_client_lib)

在developers.google.com/apis/gdata/docs/2.0/reference#Queries

以及 Google 站点 API 文档页面上的许多其他链接都不起作用。他们返回“找不到页面”。

我的连接有问题吗？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:24:32.803

[我可以从http://code.google.com/p/gdata-python-client/downloads/list](http://code.google.com/p/gdata-python-client/downloads/list)下载 python 客户端库 就好了。

但是[https://developers.google.com/apis/gdata/articles/python_client_lib](https://developers.google.com/apis/gdata/articles/python_client_lib) 链接已损坏，对我来说也“找不到页面”...

...但是此链接有效：[https ://developers.google.com/gdata/docs/directory](https://developers.google.com/gdata/docs/directory)

也许谷歌的某个人刚刚做了更新？

您必须更具体地说明哪些其他链接不起作用。

# android - 调用警报框时如何禁用 BACKKEY

> ID：11359310
> 
> 赞同：0
> 
> 时间：2012-07-06T09:16:43.333
> 
> 标签：android

我正在开发一个 android 应用程序，其中单击按钮时会调用警报框。我希望当显示警报框时它不应该在不回答的情况下消失。即使按 BACK KEY 也不行。只有当警报框上的按钮被按下时，它才会起作用，否则不会。谢谢 请尽快回复 紧急。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T09:21:41.790

```
myAlertBox.setCancelable(false); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T09:26:45.360

嗨，在这个方法中写下你的代码

```
public AlertDialog.Builder setOnCancelListener (DialogInterface.OnCancelListener onCancelListener) 
```

或者

```
setCancelable(boolean) 
```

# java - 如何穿越 节点在 不考虑“ " 节点，它是它的子节点。

> ID：11359313
> 
> 赞同：0
> 
> 时间：2012-07-06T09:16:58.953
> 
> 标签：java, xml-parsing

如何在不考虑作为其子节点的“”节点的情况下遍历节点。

使用下面的示例代码，我得到 9 个循环。但我应该得到 3 个循环。

NodeList TravellerInfo=BookingresponseEle.getElementsByTagName("TravellerInfo");

元素 TravellerInfoEle=(元素)TravellerInfo.item(0);

NodeList Items=TravellerInfoEle.getElementsByTagName("Item");

XML在下面

```
<TravellerInfo>        
<Item>          
    <TicketNumber>5899553184513</TicketNumber>          
    <PaxType>ADT</PaxType>          
    <Title> MR</Title>          
    <FirstName>TEST</FirstName>          
    <LastName>TEST</LastName>          
    <DateOfBirth />          
    <SegmentInformation>            
    <Item>             
        <AirlinePNR>MWVGUH</AirlinePNR>              
        <TicketNo>5899553184513</TicketNo>              
        <FlightNumber>2777</FlightNumber>              
        <Origin>BLR</Origin>              
        <Destination>VTZ</Destination>              
        <DepartureDateTime>24/07/2012 06:50</DepartureDateTime>              
        <ArrivalDateTime>24/07/2012 08:55</ArrivalDateTime>              
        <AirCraftType>AT7</AirCraftType>              
        <CarrierCode>9W</CarrierCode>              
        <ClassCode>W</ClassCode>              
        <FareBasis>W2SA14JK</FareBasis>              
        <FrequentFlyerNumber />              
        <SpRequest />              
        <MealsPreference>VGML meals status : UN</MealsPreference>            
    </Item>            
    <Item>              
        <AirlinePNR>MWVGUH</AirlinePNR>              
        <TicketNo>5899553184513</TicketNo>              
        <FlightNumber>2704</FlightNumber>              
        <Origin>VTZ</Origin>              
        <Destination>MAA</Destination>              
        <DepartureDateTime>24/07/2012 19:15</DepartureDateTime>              
        <ArrivalDateTime>24/07/2012 21:00</ArrivalDateTime>              
        <AirCraftType>AT7</AirCraftType>              
        <CarrierCode>9W</CarrierCode>              
        <ClassCode>W</ClassCode>              
        <FareBasis>W2SA14JK</FareBasis>              
        <FrequentFlyerNumber />              
        <SpRequest />              
        <MealsPreference>VGML meals status : UN</MealsPreference>            
    </Item>  
    </SegmentInformation>        
 </Item>
 <Item>          
    <TicketNumber>5899553184512</TicketNumber>          
    <PaxType>CHD</PaxType>          
    <Title> MSTR</Title>          
    <FirstName>TESTC</FirstName>          
    <LastName>TESTC</LastName>          
    <DateOfBirth>15/07/2009</DateOfBirth>          
    <SegmentInformation>            
    <Item>              
        <AirlinePNR>MWVGUH</AirlinePNR>              
        <TicketNo>5899553184512</TicketNo>              
        <FlightNumber>2777</FlightNumber>              
        <Origin>BLR</Origin>              
        <Destination>VTZ</Destination>              
        <DepartureDateTime>24/07/2012 06:50</DepartureDateTime>              
        <ArrivalDateTime>24/07/2012 08:55</ArrivalDateTime>              
        <AirCraftType>AT7</AirCraftType>              
        <CarrierCode>9W</CarrierCode>              
        <ClassCode>W</ClassCode>              
        <FareBasis>W2SA14JK</FareBasis>              
        <FrequentFlyerNumber />              
        <SpRequest />              
        <MealsPreference>VGML meals status : UN</MealsPreference>            
    </Item>            
    <Item>              
        <AirlinePNR>MWVGUH</AirlinePNR>              
        <TicketNo>5899553184512</TicketNo>              
        <FlightNumber>2704</FlightNumber>              
        <Origin>VTZ</Origin>              
        <Destination>MAA</Destination>              
        <DepartureDateTime>24/07/2012 19:15</DepartureDateTime>              
        <ArrivalDateTime>24/07/2012 21:00</ArrivalDateTime>              
        <AirCraftType>AT7</AirCraftType>              
        <CarrierCode>9W</CarrierCode>              
        <ClassCode>W</ClassCode>              
        <FareBasis>W2SA14JK</FareBasis>              
        <FrequentFlyerNumber />              
        <SpRequest />              
        <MealsPreference>VGML meals status : UN</MealsPreference>            
    </Item>            
    </SegmentInformation>        
    </Item>
          <Item>          
    <TicketNumber>5899553184514</TicketNumber>          
    <PaxType>ADT</PaxType>          
    <Title> MR</Title>          
    <FirstName>TESTT</FirstName>          
    <LastName>TESTT</LastName>          
    <DateOfBirth />          
    <SegmentInformation>            
    <Item>             
        <AirlinePNR>MWVGUH</AirlinePNR>              
        <TicketNo>5899553184514</TicketNo>              
        <FlightNumber>2777</FlightNumber>              
        <Origin>BLR</Origin>              
        <Destination>VTZ</Destination>              
        <DepartureDateTime>24/07/2012 06:50</DepartureDateTime>              
        <ArrivalDateTime>24/07/2012 08:55</ArrivalDateTime>              
        <AirCraftType>AT7</AirCraftType>              
        <CarrierCode>9W</CarrierCode>              
        <ClassCode>W</ClassCode>              
        <FareBasis>W2SA14JK</FareBasis>              
        <FrequentFlyerNumber />              
        <SpRequest />              
        <MealsPreference>VGML meals status : UN</MealsPreference>            
    </Item>            
    <Item>              
        <AirlinePNR>MWVGUH</AirlinePNR>              
        <TicketNo>5899553184514</TicketNo>              
        <FlightNumber>2704</FlightNumber>              
        <Origin>VTZ</Origin>              
        <Destination>MAA</Destination>              
        <DepartureDateTime>24/07/2012 19:15</DepartureDateTime>              
        <ArrivalDateTime>24/07/2012 21:00</ArrivalDateTime>              
        <AirCraftType>AT7</AirCraftType>              
        <CarrierCode>9W</CarrierCode>              
        <ClassCode>W</ClassCode>              
        <FareBasis>W2SA14JK</FareBasis>              
        <FrequentFlyerNumber />              
        <SpRequest />              
        <MealsPreference>VGML meals status : UN</MealsPreference>            
    </Item>            
    </SegmentInformation>        
</Item>      
  </TravellerInfo> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:31:25.193

我认为你应该看看[getChildNodes()](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Node.html#getChildNodes%28%29)。这将为您提供调用它的节点的直接后代。

然后，您应该检查结果中的每个节点`NodeList`以确定[它](https://stackoverflow.com/a/10690544/12960)`<Item>`是

# c# - 1and1 在“/”应用程序中托管 asp.net mvc 2 服务器错误

> ID：11359314
> 
> 赞同：-1
> 
> 时间：2012-07-06T09:17:02.713
> 
> 标签：c#, visual-studio-2008, asp.net-mvc-2, web-config, server-error

我在使用 asp.net mvc 2 和托管服务器 1and1.co.uk 在 Visual Studio 2008 中创建的一个小型网站时遇到问题。我在网站内还没有数据库，因为它正在进行中，只需要网站正常运行。

问题是我即使在 1and1 上将发布的网站上传到帐户后，仍然会收到错误消息：

“'/'应用程序中的错误”

我不太确定它是否是 web.config 文件。从我在一些论坛和网站上看到的情况来看，我似乎无法解决这个问题。

有人可以帮我解决这个问题吗非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:39:18.213

然后最好找出你可以在你的主机上运行什么，首先尝试运行一个没有 mvc 的空 Web 应用程序，看看它是否运行。

# java - 来自 ServerSocket Java 的套接字验证

> ID：11359318
> 
> 赞同：0
> 
> 时间：2012-07-06T09:17:22.530
> 
> 标签：java, sockets

我正在尝试创建“多客户端-单服务器”连接。我的客户端打开连接并在服务器端创建

```
 Client clt = new Client("127.0.0.1", 9000);
        clt.openConn();

...

public Client(String serverAddress, int serverPort) {
    this.serverAddress = serverAddress;
    this.serverPort = serverPort;
}
try {
        this.clientSocket = new Socket(this.serverAddress, this.serverPort);
        this.clientSocket.setKeepAlive(true);
        this.clientSocket.setSoTimeout(0);

            oos = new DataOutputStream(this.clientSocket.getOutputStream());
            ois = new DataInputStream(this.clientSocket.getInputStream());...} 
```

...

在服务器端，我创建了 ServerSocket 的 ListArray，每一个都在我包裹在线程上。

```
 ServerSocket serverSocket = null ;
        Socket clientSocket;
        boolean listening = true;
        ArrayList threadList = new ArrayList();
        Iterator itSrvThr;
    try {
            serverSocket = new ServerSocket(port);

        } catch (IOException e) {
            System.err.println("Could not listen on port: " + port + ".");
            System.exit(-1);
        }
        while (listening) {
            clientSocket = serverSocket.accept();
            ServerThread srvThread = new ServerThread(clientSocket);
            srvThread.start();
`...`
    } 
```

在哪里

```
 ServerThread extends Thread
    {...
         public void run() {
           this.ois = new DataInputStream(socket.getInputStream());
           this.oos = new DataOutputStream(socket.getOutputStream());    
         }
    } 
```

我的程序发送和接收对象（我称它们为“Datagramm”），它们是文件和字符串的某种包装器（假设它是客户端-服务器的某种语言）

现在关于我遇到的问题。每次需要从服务器端测试“活动”套接字时，我都必须进行验证......我正试图在那一刻在 ArrayList 中出现新元素时进行此验证，但这给我带来了“Datagramm”发送的问题

```
itSrvThr = threadList.iterator();
            while (itSrvThr.hasNext()) {
                ServerThread st = (ServerThread) itSrvThr.next();
                boolean stoppedSocket = st.getStopped();

                if (stoppedSocket) {
                    st.stop();
                    itSrvThr.remove();
                }else {??? resolution???} 
```

stopSocket - 这是一个值，它表示以程序方式从客户端站点关闭套接字。

老实说，我只使用了几周的套接字和线程，这就是为什么每个帮助和批评都是可以接受的。...感谢您的回答，但我对心跳编码有疑问。首先，心跳的确切位置必须放在服务器端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:25:32.453

我建议您在一段时间（秒）未发送消息时从客户端和/或服务器发送心跳消息，当您在这段时间内没有收到任何消息时，另一端可能会超时。

如果您有像 {message length} {message} 这样的协议，我使用 message-length=0 作为心跳。

# mysql - 计算来自同一列的各种子字符串

> ID：11359319
> 
> 赞同：1
> 
> 时间：2012-07-06T09:17:23.370
> 
> 标签：mysql, sql, count

我想计算来自同一列且具有相同 WHERE 条件的多个子字符串的出现次数。对于每个子字符串，我都有一个 UNION SELECT 语句，包括重复的 WHERE 条件。最终结果是使用 appox 进行的查询。2500行sql代码，但效果不错。

查询的简化示例：

```
SELECT ‘be’ AS country, count(destination) FROM demo
WHERE destination LIKE ‘%be%’ AND field_a=xzx AND field_b=bbb

UNION SELECT ‘de’ AS country, count(destination) FROM demo
WHERE destination LIKE ‘%de%’ AND field_a=xzx AND field_b=bbb

UNION SELECT ‘fr’ AS country, count(destination) FROM demo
WHERE destination LIKE ‘%fr%’ AND field_a=xzx AND field_b=bbb

UNION SELECT ‘nl’ AS country, count(destination) FROM demo
WHERE destination LIKE ‘%nl%’ AND field_a=xzx AND field_b=bbb 
```

是否可以修改查询以使 WHERE 条件仅在查询中出现一次？

请通过此链接找到我的问题的简化示例：

[https://docs.google.com/document/d/1otjZZlBy6au5E2I7T6NdSYmLayhNGWyXGxGo3gBx_-w/edit](https://docs.google.com/document/d/1otjZZlBy6au5E2I7T6NdSYmLayhNGWyXGxGo3gBx_-w/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:26:46.850

***不要***将逗号分隔的值存储在单个字段中。相反，使用多：多关系表并每行存储一个 (id,country) 组合。您的数据结构是 SQL 反模式，违反了所有关系数据库设计原则。

```
CREATE TABLE map (
  demo_id INT,
  country VARCHAR(2),
  PRIMARY KEY (demo_id, country)
)

INSERT INTO map VALUES
  (1, 'nl'), (1, 'de'), (1, 'be'), (1, 'fr'),
  (2, 'de'), (2, 'fr'), (2, 'be'),
  (3, 'fr'), (3, 'nl'),
  (4, 'nl') 
```

然后你将有这个单一的查询......

```
SELECT
  map.country,
  COUNT(*)
FROM
  demo
INNER JOIN
  map
    ON map.demo_id = demo.id
WHERE
      demo.field_a = 'xzx'
  AND demo.field_b = 'bbb' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:36:37.810

```
select a.country,count(*) from
(
select 'be' as country
union all
select 'de' as country
union all
select 'fr' as country
union all
select 'nl' as country
)a join demo d
on d.destination like '%'+a.country+'%'
AND d.field_a=xzx AND d.field_b=bbb
group by a.country 
```

我不确定 mySQL 是否支持派生表。如果不支持，您必须创建一个包含所有不同国家/地区值的临时表，并将其替换为上述查询中的表 a

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:21:24.367

采用`COUNT CASE WHEN ... THEN ... END`

```
SELECT 
COUNT(CASE WHEN destination LIKE "%be%" THEN 1 ELSE NULL END) AS "BE",
COUNT(CASE WHEN destination LIKE "%fr%" THEN 1 ELSE NULL END) AS "FR",
COUNT(CASE WHEN destination LIKE "%de%" THEN 1 ELSE NULL END) AS "DE",
COUNT(CASE WHEN destination LIKE "%nl%" THEN 1 ELSE NULL END) AS "NL"
FROM demo
WHERE field_a = "xzx" AND field_b = "bbb" 
```

但是你真的应该考虑改变你的表的结构。并不真正推荐在单个字段中使用逗号分隔值。

相反，例如，您应该在此处为每次旅行提供一个 ID（或者无论它是什么，我说旅行是因为目的地字段）。然后，为这次旅行中的每个目的地输入一个条目。使用这种结构，您会有这样的请求：

```
SELECT destination, COUNT(id) 
FROM demo 
WHERE field_a = "xzx" AND field_b = "bbb" 
GROUP BY destination 
```

# php - “插入重复更新”仍然插入重复项

> ID：11359324
> 
> 赞同：0
> 
> 时间：2012-07-06T09:17:43.030
> 
> 标签：php, mysql

我有一个以 descriptionId 作为主键的 mysql 表，它是自动递增的。它还有一个“内容”和一个“价格”列等等。

我还有一个由多个输入框组成的表单，其中包含我的描述表中价格和内容列的当前数据库值。提交表单后，我想用新值更新表格，如果删除了任何输入框，则必须从表格中删除记录。

我还设法定义了三个数组来保存我所有表列的值。这些数组如下： $descrId,$content,$price

当我提交表单时，php 文件循环遍历这些数组并执行以下查询：（我已经验证了这些数组，所以它们工作得很好）

```
INSERT INTO     
description(descriptionId,content,price,orderNo,salesPerson,dateTime,updated)
VALUES('{$descrId[$k]}','{$content[$k]}','{$price[$k]}','{$orderId}','{$sale}',NOW(),1 ) 
ON DUPLICATE KEY UPDATE content=VALUES(content),price=VALUES(price),updated=1, dateTime=NOW() 
```

但是，只要我按下提交，这个查询就会不断重复这些值。

我很感激你的时间......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:38:17.027

正如我所读到的，您的问题`ON DUPLICATE KEY`永远不会发生，因为您的*主键* 是一个自动递增的值，每次您在表中插入某些内容时，它都会为 +1，因此它永远不会有重复的值 - 这或多或少是背后的想法`AUTO INCREMENT`。

所以答案是选择另一列，即`orderNo`or `dateTime`，创建它`UNIQUE`，然后再尝试查询。

**更新**
或者，您可以组合两个或更多列并将它们定义为（唯一）键。
如果这也不适用于您的情况，则在插入数据时使用一些散列函数/算法并将该散列与表中的其他值一起存储。

# string - 使用 Groovy 进行字符串连接

> ID：11359333
> 
> 赞同：99
> 
> 时间：2012-07-06T09:18:13.167
> 
> 标签：string, groovy, idioms, string-concatenation, gstring

在 Groovy 中连接字符串的最佳（惯用）方法是什么？

选项1：

```
calculateAccountNumber(bank, branch, checkDigit, account) {
    bank + branch + checkDigit + account
} 
```

选项 2：

```
calculateAccountNumber(bank, branch, checkDigit, account) {
    "$bank$branch$checkDigit$account"
} 
```

我在旧的 Groovy 网站上就这个话题提出了一个有趣的观点：你可以做的事情，但最好不要做。

> 与在 Java 中一样，您可以使用“+”符号连接字符串。但是Java只需要“+”表达式的两项中的一项是字符串，无论它是在第一个还是在最后一个。Java 将在“+”表达式的非字符串对象中使用 toString() 方法。但是在 Groovy 中，您应该确保“+”表达式的第一项以正确的方式实现 plus() 方法，因为 Groovy 会搜索并使用它。在 Groovy GDK 中，只有 Number 和 String/StringBuffer/Character 类实现了 plus() 方法来连接字符串。为避免意外，请始终使用 GStrings。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-07-06T09:33:02.970

我总是选择第二种方法（使用 GString 模板），尽管当有多个像你这样的参数时，我倾向于将它们包装起来，`${X}`因为我发现它更具可读性。

在这些方法上运行一些基准测试（使用[Nagai Masato](https://twitter.com/#!/nagai_masato)的优秀[GBench 模块](http://code.google.com/p/gbench/)）也表明模板比其他方法更快：

```
@Grab( 'com.googlecode.gbench:gbench:0.3.0-groovy-2.0' )
import gbench.*

def (foo,bar,baz) = [ 'foo', 'bar', 'baz' ]
new BenchmarkBuilder().run( measureCpuTime:false ) {
  // Just add the strings
  'String adder' {
    foo + bar + baz
  }
  // Templating
  'GString template' {
    "$foo$bar$baz"
  }
  // I find this more readable
  'Readable GString template' {
    "${foo}${bar}${baz}"
  }
  // StringBuilder
  'StringBuilder' {
    new StringBuilder().append( foo )
                       .append( bar )
                       .append( baz )
                       .toString()
  }
  'StringBuffer' {
    new StringBuffer().append( foo )
                      .append( bar )
                      .append( baz )
                      .toString()
  }
}.prettyPrint() 
```

这给了我机器上的以下输出：

```
Environment
===========
* Groovy: 2.0.0
* JVM: Java HotSpot(TM) 64-Bit Server VM (20.6-b01-415, Apple Inc.)
    * JRE: 1.6.0_31
    * Total Memory: 81.0625 MB
    * Maximum Memory: 123.9375 MB
* OS: Mac OS X (10.6.8, x86_64) 

Options
=======
* Warm Up: Auto 
* CPU Time Measurement: Off

String adder               539
GString template           245
Readable GString template  244
StringBuilder              318
StringBuffer               370 
```

因此，由于它具有可读性和速度，我建议使用模板 ;-)

注意：如果您添加`toString()`到 GString 方法的末尾以使输出类型与其他指标相同，并使其成为更公平的测试，`StringBuilder`并`StringBuffer`在速度上击败 GString 方法。但是，由于 GString 可以在大多数情况下代替 String （您只需要小心使用 Map 键和 SQL 语句），因此大多数情况下都可以不进行最终转换

添加这些测试（正如评论中所要求的那样）

```
 'GString template toString' {
    "$foo$bar$baz".toString()
  }
  'Readable GString template toString' {
    "${foo}${bar}${baz}".toString()
  } 
```

现在我们得到结果：

```
String adder                        514
GString template                    267
Readable GString template           269
GString template toString           478
Readable GString template toString  480
StringBuilder                       321
StringBuffer                        369 
```

所以你可以看到（正如我所说），它比 StringBuilder 或 StringBuffer 慢，但仍然比添加字符串快一点......

但仍然更具可读性。

### 在下面的农村编码员评论后编辑

更新到最新的 gbench，用于连接的更大字符串以及使用 StringBuilder 初始化为合适大小的测试：

```
@Grab( 'org.gperfutils:gbench:0.4.2-groovy-2.1' )

def (foo,bar,baz) = [ 'foo' * 50, 'bar' * 50, 'baz' * 50 ]
benchmark {
  // Just add the strings
  'String adder' {
    foo + bar + baz
  }
  // Templating
  'GString template' {
    "$foo$bar$baz"
  }
  // I find this more readable
  'Readable GString template' {
    "${foo}${bar}${baz}"
  }
  'GString template toString' {
    "$foo$bar$baz".toString()
  }
  'Readable GString template toString' {
    "${foo}${bar}${baz}".toString()
  }
  // StringBuilder
  'StringBuilder' {
    new StringBuilder().append( foo )
                       .append( bar )
                       .append( baz )
                       .toString()
  }
  'StringBuffer' {
    new StringBuffer().append( foo )
                      .append( bar )
                      .append( baz )
                      .toString()
  }
  'StringBuffer with Allocation' {
    new StringBuffer( 512 ).append( foo )
                      .append( bar )
                      .append( baz )
                      .toString()
  }
}.prettyPrint() 
```

给

```
Environment
===========
* Groovy: 2.1.6
* JVM: Java HotSpot(TM) 64-Bit Server VM (23.21-b01, Oracle Corporation)
    * JRE: 1.7.0_21
    * Total Memory: 467.375 MB
    * Maximum Memory: 1077.375 MB
* OS: Mac OS X (10.8.4, x86_64)

Options
=======
* Warm Up: Auto (- 60 sec)
* CPU Time Measurement: On

                                    user  system  cpu  real

String adder                         630       0  630   647
GString template                      29       0   29    31
Readable GString template             32       0   32    33
GString template toString            429       0  429   443
Readable GString template toString   428       1  429   441
StringBuilder                        383       1  384   396
StringBuffer                         395       1  396   409
StringBuffer with Allocation         277       0  277   286 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2019-02-12T16:01:18.407

```
def my_string = "some string"
println "here: " + my_string 
```

不太清楚为什么上面的答案需要进入基准测试、字符串缓冲区、测试等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-11T12:17:58.303

在当前硬件上重现 tim_yates 答案并添加 leftShift() 和 concat() 方法来检查结果：

```
 'String leftShift' {
    foo << bar << baz
  }
  'String concat' {
    foo.concat(bar)
       .concat(baz)
       .toString()
  } 
```

结果显示 concat() 是纯字符串的更快解决方案，但如果您可以在其他地方处理 GString，则 GString 模板仍然领先，而值得一提的是 leftShift()（按位运算符）和 StringBuffer() 初始分配：

```
Environment
===========
* Groovy: 2.4.8
* JVM: OpenJDK 64-Bit Server VM (25.191-b12, Oracle Corporation)
    * JRE: 1.8.0_191
    * Total Memory: 238 MB
    * Maximum Memory: 3504 MB
* OS: Linux (4.19.13-300.fc29.x86_64, amd64)

Options
=======
* Warm Up: Auto (- 60 sec)
* CPU Time Measurement: On

                                    user  system  cpu  real

String adder                         453       7  460   469
String leftShift                     287       2  289   295
String concat                        169       1  170   173
GString template                      24       0   24    24
Readable GString template             32       0   32    32
GString template toString            400       0  400   406
Readable GString template toString   412       0  412   419
StringBuilder                        325       3  328   334
StringBuffer                         390       1  391   398
StringBuffer with Allocation         259       1  260   265 
```

# http - J2ME：设备上的多个 HttpConnection 失败（诺基亚 C2-O3）

> ID：11359341
> 
> 赞同：3
> 
> 时间：2012-07-06T09:18:40.327
> 
> 标签：http, java-me, nokia, midp

我尝试在我的 J2me 应用程序中创建异步（非阻塞）请求。

我按照本教程编写代码：[Ajax-like Asynchronous SOA Calls with Java ME](http://developers.sun.com/mobility/midp/ttips/soacalls/)。

代码在 Netbeans 上的模拟器上成功运行。

但是，当应用程序部署和设备时，它会在多个连接上失败。

当两个连接打开时。然后第一个连接踩死并仅执行第二个。

此问题仅在设备上。它在PC上运行良好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T14:09:28.420

根据这篇文章[http://developers.sun.com/mobility/midp/articles/mmapioverview/index.html](http://developers.sun.com/mobility/midp/articles/mmapioverview/index.html) “还要注意 MIDP 将同时打开的 HTTP 连接数限制为四个。”，但您的设备似乎只允许一个连接。

在这种情况下，您应该创建一个队列并一次执行一个线程。

# android - 在 Fragments 中过滤 ListView 不起作用

> ID：11359342
> 
> 赞同：1
> 
> 时间：2012-07-06T09:18:41.460
> 
> 标签：android, android-fragments, filtering

在我的项目中，我有 4 个 ListView。2 个 ListViews 在活动中，另外 2 个 ListViews 在片段中。**在setTextFilterEnabled** (true) 之后，过滤只在第一个 Activity 中起作用。在网上搜索后，我发现其他列表没有焦点，所以过滤没有启用。现在它适用于两个 Activity，但是不在我的片段中:(..

有人有想法吗？

这是一些代码片段..

```
 NCViewPagerAdapter myAdapter = new NCViewPagerAdapter(getSupportFragmentManager(), this);
    viewPager = (ViewPager) findViewById(R.id.viewpager);
    viewPager.setAdapter(myAdapter);
    viewPager.setCurrentItem(1);
    viewPager.setOnPageChangeListener(new OnPageChangeListener()
    {

        @Override
        public void onPageSelected(int pos)
        {
            switch (pos)
            {
                case PAGE_MEKA:
                {
                    //Cause to Enable Filtering the View have to get Focus..
                    ListView lv = (ListView) ctx.findViewById(R.id.listMekaForNC);
                    lv.requestFocus();
                }
                case PAGE_SCHLAG_KOMB:
                {
                    ListView lv = (ListView) ctx.findViewById(R.id.listViewSchlag);
                    lv.requestFocus();
                }
            }
        } 
```

和

```
 ListView lw = (ListView) v.findViewById(R.id.listViewSchlag);
    List<Nutzungscode> schlaege = Data.getService().getSchlagKombinationen(nc.getID());
    lw.setAdapter(new MyListAdapter(this.getActivity(), R.layout.mylistitem, schlaege,Nutzungscode.class,new String[]{"getID","getName"}));
    lw.setTextFilterEnabled(true); 
```

# java - Java - 从两个不同数据类型的 ArrayList 中获取公共元素

> ID：11359344
> 
> 赞同：2
> 
> 时间：2012-07-06T09:19:01.053
> 
> 标签：java, object, arraylist, compare

我有两个不同大小的 ArrayList。

```
ArrayList<String> names = new ArrayList<String>();
ArrayList<User> users = new ArrayList<User>(); 
```

用户是具有名称和地址属性的对象。我想获取存储在 ArrayList users 中的 User 对象的名称与存储在 ArrayList 名称中的名称相同的地址。

这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T09:23:54.350

```
for (User u : users) {
  if (names.contains(u.getName()) {
    System.out.println("Name: " + u.getName() + ", address: " + u.getAddress());
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-16T09:02:41.997

您可以使用 Java 8。

请试试：

```
users.stream().filter(u -> names.contains(u.getName())).map(
                u -> "Name: " + u.getName() + ", address: " + u. getAddress()).forEach(System.out::println); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:23:30.960

您需要遍历用户列表并检查每个元素是否包含在名称中。如果其中有很多元素，您可能希望使用 Set 而不是名称列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T09:27:26.367

如果您确实在`names.contains(..)`内部循环用户，那么您正在执行一个 ^2 循环（大致而言）。

我会将用户地址放入地图中，按名称键入，然后遍历名称列表，将地址从地图中拉出。相反，成本为 2n（大约）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-09T13:07:29.117

在 java-8 中，您可以使用如下流和收集器，
逻辑为
1\. 在两个列表中查找命令属性
2\. 将较小的列表转换为`Map<Common_attribute, Actual_List_Object>`O(n) 复杂度
3\. 迭代较大的列表并检查地图是否包含，并将其添加到另一个列表中，O(n) 复杂度（地图查找为 ~ O(1)），空间复杂度为 O(n)，
否则为 O(n^2)（已接受答案的复杂度）

假设用户的类为

```
class User {
        private String name;

        private String getName() {
            return this.name;
        }

        @Override
        public String toString() {
            return "User{" +
                    "name='" + name + '\'' +
                    '}';
        }
    } 
```

// 达到目的的代码

```
import java.util.stream.Collectors;

ArrayList<String> names = new ArrayList<>();
ArrayList<User> users = new ArrayList<>();

//adding to name list
names.add("a");
//adding to User list
User user = new User();
user.name = "a";
User user2 = new User();
user2.name = "b";

users.add(user);
users.add(user2);
// Using user's name as key, you can specify any data type as key and create a map
Map<String, User> nameUserMap = users.stream().collect(Collectors.toMap(user1 -> user1.getName(), user1 -> user1));
System.out.println(nameUserMap);
List<User> filteredList = names
            .stream()
            .map(nameUserMap::get)
            .filter(Objects::nonNull)
            .collect(Collectors.toList());
System.out.println(filteredList); 
```

输出：

```
{a=User{name='a'}, b=User{name='b'}}
[User{name='a'}] 
```

# c - 静态库不需要头文件？

> ID：11359349
> 
> 赞同：1
> 
> 时间：2012-07-06T09:19:34.993
> 
> 标签：c, linux, gcc, linker

我是 C 的新手，尤其是编写静态库，我的库中出现了奇怪的行为。

我写了一个名为 cde 的小静态库。我用 gcc 将不同的部分编译成 .o 文件，然后我用 ar 将它们全部放在一个 .a 文件中

现在，当我想测试我的库时，我会执行以下操作：

`gcc test.c -L../bin -lcde -lelf`

libcde.a 是我位于 ../bin 的库。libelf.a 是我的图书馆需要的图书馆（我不知道如何将它直接放入我自己的图书馆......）。

问题是我可以调用我的库的每个函数，而不必包含我的库*的*头文件。这怎么可能？在编译时不应链接文件，因此编译器应该不知道我的库中有哪些函数可用...

当我按照以下方式运行它时，

`gcc -L../bin -lcde -lelf test.c`

文件 test.c 找不到我在头文件中定义的任何函数，即使我已经包含它。

我想我在这里做错了什么，但我真的不知道是什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T11:25:40.073

这里有两个问题：

1.  为什么`test.c`编译时没有提供库中例程声明的标头？
2.  为什么链接可以在命令行中`test.c`列出的第一个使用，但不能在`test.c`命令行的最后列出？

我们无法对第一个提供完整的答案，因为您没有显示源代码。正如其他人所指出的，C 有一些余地来提供隐式声明，主要是出于历史原因。这些隐式声明可能与您的例程的实际定义不匹配，这可能会导致错误，因此您应该避免隐式声明。

你的第二个问题的答案是这样的。给定您显示的两个命令行中的任何一个，编译器都会编译`test.c`然后调用链接器。（也可以让编译器做其他事情，例如在不链接的情况下进行编译，或者从先前编译的源中链接目标模块。）当编译器调用链接器时，它会按照与您的顺序相对应的顺序传递链接器参数将它们传递给链接器。特别是，如果您放在`-lcde`before `test.c`，则编译器在运行链接器时将放在`-lcde`来自`test.c`,的目标模块之前。`test.o`

这很重要，因为链接器的操作方式。除此之外，链接器有一个需要定义的符号列表。该列表最初是空的。链接器从左到右处理来自命令行的输入。当链接器在其命令行中看到一个目标模块`test.o`时，它会读取该目标模块并对其进行处理。通常，对象模块包含对它未定义的某些符号的引用，例如对库例程的调用。如果链接器已经从以前的文件中定义了这些符号，它会将引用连接到定义。如果它没有定义，它会将符号添加到链接器需要定义的符号列表中。

当链接器处理库文件时，它会检查库中的每个目标模块，以查看该目标模块是否定义了链接器所需定义列表中的符号。如果是这样，链接器会读取该对象模块并将其（及其定义）添加到链接器正在构建的可执行文件中。如果不是，链接器将忽略该目标模块。

Now we can see why `test.c -lcde` works but `-lcde test.c` does not. In the former case, the linker makes a list of everything that `test.o` needs, then it gets those things from the `cde` library. In the latter case, the linker sees the `cde` library but does not need anything from it yet, so it goes on without taking anything from the library. Then the linker reads `test.c` and adds to the list of needed symbols. Then the command line ends, and the linker has no more files but still has symbols without definitions. So it reports an error.

So, generally, libraries should be listed last on command lines.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T09:26:14.513

如果没有头文件，您将没有函数的原型。这不是错误，但是 C 编译器将假定您调用的函数的原型，编译器没有看到原型是

```
 int functionname() 
```

空 () 表示类似于“任何参数”的意思，因此您传递给该函数的任何参数都是调用该函数的方式。

根据参数的实际类型和函数的返回值，这可能会恰到好处，或者至少在某些情况下似乎可以工作。

在链接阶段，当您生成可执行文件时，链接器将仅以函数名称进行链接。如果您调用一个名为“foo”的函数，并且您的库也有一个名为“foo”的函数符号，那么这就是链接器所选择的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T09:28:16.553

在 C 中，假定没有原型调用的函数具有如下原型：

```
int function(); 
```

这意味着一个函数接受任意数量的任意参数，返回一个 int。所以，它当然可以工作，但是尝试传递一个参数，你的函数在 libcde 中并不期望它会崩溃。

您可以将 libelf.a 放入您的库中（而是将目标文件从其中复制到您的库中），这很少是一个好主意：您变得依赖于本地系统配置（您必须找到库所在的位置）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T09:22:03.337

C++ 中的标头还用于为您要调用的函数提供*原型。*编译器使用原型来帮助您在调用外部函数时不会弄错参数计数/类型。因此，到目前为止，您的静态或动态库没有任何区别。

# watin - 支持 javascript/ajax 的 Specflow 无头浏览器测试

> ID：11359350
> 
> 赞同：4
> 
> 时间：2012-07-06T09:19:35.310
> 
> 标签：watin, specflow, headless-browser

我一直在使用**WatiN**进行 BDD Specflow 测试。它可以完成工作，但速度很慢。我最近遇到了[**本文**](http://www.culbertsonexchange.com/wp/?p=249)建议的**SimpleBrowser**。SimpleBrowser 比 Watin 快得多。主要缺点是它不支持 javascript，因此不支持 ajax 调用。[](http://www.culbertsonexchange.com/wp/?p=249)

 **我正在寻找一个支持 javascript 的无头浏览器——这样的东西存在吗？是否推荐给Watin？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-14T16:52:36.310

我意识到这是一个老问题，但是当您搜索“无头浏览器规范流”时，它会出现在 Google 中。

我最近一直在使用的一个流行选项是 PhantomJS ( [http://phantomjs.org/](http://phantomjs.org/) )

有一个用于 selenium 的 webdriver 来控制 PhantomJS，并且由于我们的测试已经使用 specflow/selenium 编写，因此非常适合我们。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T15:36:26.817

我一直在使用[Coypu](https://github.com/featurist/coypu)，我发现它是浏览器自动化的一个很好的包装器。通过它，您可以使用 HtmlUnit，一个无头浏览器，据我了解，它支持一些 javascript（实际上 Coypu 中有一个驱动程序调用 HtmlUnitWithJavascript）。到目前为止，我还没有真正尝试过 HtmlUnit 驱动程序，但 Coypu 本身非常好（我相信你也可以在 Coypu 之外使用 HtmlUnit。）

有关一些想法，请参阅[https://github.com/featurist/coypu#htmlunit](https://github.com/featurist/coypu#htmlunit)。**

# ios - 电子邮件中的下拉菜单

> ID：11359353
> 
> 赞同：0
> 
> 时间：2012-07-06T09:19:36.747
> 
> 标签：ios, iphone, drop-down-menu, tabular

我想知道我们是否可以允许在 iOS/Android 设备的 HTML 邮件程序中进行下拉。我想显示一个基于下拉列表的选择，我可以使用它在电子邮件中显示数据。数据将是静态的，用户可以在从下拉列表中选择后自由选择隐藏或显示数据。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:42:02.557

为此，您需要 javascript，但出于安全原因，这在 iOS Mail 应用程序中不可用（可能在 Android 上也不可用，但我不知道）。

它绝对不会在任何网络邮件客户端中工作。这将是一个巨大的安全问题，因为编写蠕虫非常简单。

您最好的选择可能是链接到常规网站，或者只是将所有数据转储到电子邮件中。

# php - 使用 OpenTBS 将图片即时添加到 MS excel

> ID：11359354
> 
> 赞同：0
> 
> 时间：2012-07-06T09:19:38.167
> 
> 标签：php, excel, tinybutstrong, opentbs

注意到 ope=changepic 在 xlsx 模板上是不可能的。有解决方法吗？也许通过addpic？或者也许修改档案？如何？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:15:18.517

它将在下一个 OpenTBS 版本中得到支持，即 1.8.0。

测试版可以在网站下载： [http ://www.tinybutstrong.com/news.php](http://www.tinybutstrong.com/news.php)

此错误的原因是 XLSX 文档保存图像大小与 DOCX 和 PPTX 不同。

# sql - 数据库大小远大于数据库统计信息

> ID：11359356
> 
> 赞同：0
> 
> 时间：2012-07-06T09:19:41.760
> 
> 标签：sql, database

我正在尝试以SQL 格式从 PHPMyAdmin导出**数据库。**

我检查了数据库统计信息，它显示数据库的大小为**285 MB**。我开始下载它，但它已经超过**500 MB**，但没有下载完成的迹象。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:33:17.730

导出到 SQL 会将数据转换为文本，并在字段和行之间添加额外的文本。例如，a`TINYINT`占用 1 个字节的存储空间，但作为 SQL，它占用 1-4 个字节，('0' -> '-127')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:34:54.093

Whily *mysqldump*将数据导出到它不使用原始二进制内容操作的文件。它创建 SQL 请求以从拉伸中创建您的数据库并用插入填充它。因此，您的转储包含测试 SQL 请求（*CREATE*、*INSERT*等）、注释、连接设置命令等。您的所有二进制数据也都表示为字符串。

这就是为什么您的转储文件比数据库中的实际数据大小大得多的原因。

# jira - 按关闭问题的用户过滤问题

> ID：11359357
> 
> 赞同：19
> 
> 时间：2012-07-06T09:19:44.303
> 
> 标签：jira

我最近才开始使用 Jira，但在使用问题导航器时遇到了问题。我想过滤问题，以便列表仅显示由特定用户关闭的问题。我可以按问题的状态和/或解决方案来过滤问题，而不是按最后更新它们的用户（即关闭它们的用户）。

我敢肯定答案是显而易见的，但我似乎无法找到如何做到这一点！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-08T22:09:41.257

您可以使用“状态更改者”：

```
status = Closed and status changed by username 
```

从[JQL 文档](https://confluence.atlassian.com/display/JIRA/Advanced+Searching)：

> “CHANGED”运算符用于查找指定字段的值已更改的问题。
> 
> 此运算符具有以下可选谓词：
> 
> *   在“日期”之后
> *   “日期”之前
> *   通过“用户名”
> *   期间（“日期 1”，“日期 2”）
> *   时间到了”
> *   从“旧值”到“新值”
> 
> （注意：此运算符只能与受让人、修复版本、优先级、报告者、解决方案和状态字段一起使用。）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-11-17T14:14:20.417

抱歉，Daria Trainor 的回答不正确。您会发现问题，其中状态已关闭，并且由“用户名”进行的转换之一

正确的必须是：

`status was closed BY 'username'`

也可以：

`status changed to Closed BY 'username'`

然后你也会发现问题，处于不同的状态

如果您的工作流程更复杂，您也可以像这样限制：

`status changed FROM Resolved to Closed BY 'username'`

# javascript - 使用 JavaScript Regexp 将单词与数组匹配

> ID：11359360
> 
> 赞同：2
> 
> 时间：2012-07-06T09:19:48.370
> 
> 标签：javascript, regex

```
nameArray = new Array("Bob", "Ben", "Don");
for (i = 0; i < nameArray.length; i++) {
re = new RegExp("\b(" + nameArray[i] + ")\b");
checkWord = re.test("Bob");
if (checkWord) {
    alert("true");
} else {
    alert("false");
}
}​ 
```

它返回 false 3 次。它应该在循环第一次运行时返回 true。我不知道我的错误是什么。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:28:54.043

由于您正在编写字符串，因此必须使用双重转义：

```
new RegExp("\\b(" + nameArray[i] + ")\\b"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:28:10.427

您可能想查看管道 ( `|`) 在正则表达式中的含义。无需循环：

```
var nameArray = new Array("Bob", "Ben", "Don");
var nameExpression = nameArray.join('|');
var re = new RegExp('\\b(' + nameExpression + ')\\b');
var checkWord = re.test('A string containing the word Bob in it.');
if (checkWord)
  console.log('+');
else 
  console.log('-'); 
```

此外，您没有声明变量。您应该声明变量，`var`否则您将生成危险且被认为是不良风格的全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:27:28.077

我认为这样的正则表达式会起作用

```
re = new RegExp("^" + nameArray[i] + "$"); 
```

# javascript - Chrome和Firefox之间计算的高度不同？

> ID：11359363
> 
> 赞同：0
> 
> 时间：2012-07-06T09:20:08.447
> 
> 标签：javascript, css

因此，请查看Chrome 和 Firefox 下的[www.qualificationcheck.com 。](http://www.qualificationcheck.com)Alt-tab 在他们之间快速来回切换，专注于那个小小的绿色“帮助和反馈”侧选项卡。

它似乎移动位置！这是为什么？

它包含在第 3 方 Javascript 文件中。我已经研究过它以弄清楚它是如何计算其位置的。

首先，它设置`top: 50%`为在视口下方大约 50% 处。

然后它设置

`margin-top: [ "-",Math.round(tab.dimensions.height / 2), "px" ].join("")`

即减去选项卡高度的一半，因此它会稍微向上移动，因此它的“中间”实际上是视口下方的 50%（而不是“顶部”）。

使用 Chrome 开发工具，然后在 Firefox 中使用 firebug，我可以看到在 Chrome 中 margin-top 最终为 -33px，而在 Firefox 中它最终为 -87px。

为什么有区别？

这很烦人，因为我想在其上方或下方添加自己的标签，但如果我不能一直依赖第 3 方标签，我无法确定将自己的标签放在哪里！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:41:07.940

对不起，其他答案都没有帮助。

我通过基本上复制第 3 方 js 然后对其进行调整来解决这个问题，以便我可以将它和我的新标签放在一起。

所以基本上只是一个解决方法，而不是问题的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:39:51.370

尝试添加 padding-top: ?px 并且对于 Firefox 和 Chrome 应该是相同的。网上的一些人报告了一个与margin-collapse类似的问题（显然不是错误）：

[http://www.sitepoint.com/forums/showthread.php?829681-CSS-margins-displaying-differently-on-Firefox-Ie-Chrome](http://www.sitepoint.com/forums/showthread.php?829681-CSS-margins-displaying-differently-on-Firefox-Ie-Chrome)

[Firefox 和 Chrome/Safari 之间的边距差异](https://stackoverflow.com/questions/6079275/margin-discrepancies-between-firefox-and-chrome-safari)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:52:14.110

Firefox（以及最近的 Chrome）以不同的方式解释边距和填充。边距和填充值被**添加到 div 高度/宽度**。您可以通过将其添加到您的 CSS（将其放在顶部）来解决此问题（至少对于 FF）：

```
DIV {
   -moz-box-sizing:border-box;
   box-sizing:border-box;
} 
```

# c# - IoC：程序集之间的依赖注入和整体实例

> ID：11359372
> 
> 赞同：2
> 
> 时间：2012-07-06T09:20:29.133
> 
> 标签：c#, dependency-injection, ioc-container, autofac, service-locator

我听说这应该是可能的，但我无法想象这应该如何工作。

我正在为我的项目使用依赖注入（autofac）。我和别人一起开发一个项目并调用他的类的方法（我使用他的程序集）。

然后我得到一个对象的实例，其他人应该将其用于他的操作。我们希望避免在每个方法上传递此对象实例并使用 autofac。

他可以在不传递任何参数的情况下在他的装配项目中解决这个实例吗？我认为我们至少必须通过 DI-Container……但我听说依赖注入的概念应该使您可以在整个“执行上下文”中解析对象并获得相同的对象。

这是一个使用 asp.net web api 的示例：

这是一个 asp.net webapi 项目的 api 控制器：

```
public class DocumentsController : ApiController
{
    // GET /api/documents
    public HttpResponseMessage Get()
    {
        // Here I call the method of the other developer, 
        // security/authorization should be handled in 
        // his method!
        // In this context the WebAPI provides the 
        // IPrincipal of the current user in this 
        // variable => "HttpContext.Current.User" but we 
        // don't want to pass it on every method call
        ClassFromOtherAssembly.GetDocuments();

        HttpResponseMessage response = 
            Request.CreateResponse<IEnumerable<Document>>(
                HttpStatusCode.OK, documents);

        return response;
    }
} 
```

这是其他开发人员的课程。他应该交付文件并检查用户是否被授权：

```
public class ClassFromOtherAssembly
{
    public List<Documents> GetDocuments()
    {
        //Security check
        IPrincipal principal = 
            DI_Container.Resolve(IPrincipal);

        if(principal.IsInRole("Admin"))
        {
            //return the list
        }
        else
        {
            //return empty list
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:44:26.400

不，不要传递容器本身，您最终会得到一个**Service Locator**模式，如果您进行快速搜索，您会发现这种模式有一股腐烂的气味。

```
public class Foo
{
    private IContainer container;
    private IBar bar;

    public Foo( IContainer container) //no-no
    {
         this.container = container;
         this.bar = container.Resolve<IBar>();
    }
} 
```

而是使用适当的 DI，例如

```
public class Foo
{
    private IBar bar;

    public Foo(IBar bar)
    {
        this.bar = bar;
    }
} 
```

您的类型在哪个程序集中并不重要。这就是 IoC 和 DI 的全部意义——将应用程序的各个部分解耦并使您依赖于抽象，而不是具体的实现。

* * *

**编辑**
您误解了带有 DI 的服务定位器模式。“我们想要使用依赖注入而不是传递参数” - 传递参数是 DI，相反，从静态容器解析类型是服务定位器。

```
public class DocumentsController : ApiController
{
    public HttpResponseMessage Get()
    {
        ClassFromOtherAssembly.GetDocuments(); //this is Service locator
        //really bad for testability and maintenance
        ...
    }
} 
```

DI 看起来像这样

```
public class DocumentsController : ApiController
{
    private IDocumentProvider;

    public DocumentsController(IDocumentProvider provider)
    {
        this.provider = provider;
    }

    public HttpResponseMessage Get()
    {
        provider.GetDocuments(); //this is DI
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:43:59.740

您通过直接调用 Resolve 来使用 ServiceLocator（反模式）`GetDocuments()`

使用带有构造函数注入的控制反转来传递 IPrinciple，因此：

```
public class ClassFromOtherAssembly
{
    private IPrincipal principal;

    public ClassFromOtherAssembly(IPrincipal principal)
    {
        this.principal = principal;
    }

    public List<Documents> GetDocuments()
    {
        //Security check
        if (principal.IsInRole("Admin"))
        {
            //return the list
        }
        else
        {
            //return empty list
        }
    }
} 
```

# java - 无法让黑莓 json 解析代码示例正常工作

> ID：11359374
> 
> 赞同：0
> 
> 时间：2012-07-06T09:20:46.250
> 
> 标签：java, eclipse, json, blackberry

我正在开发 Blackberry Eclipse 插件，但无法让此示例正常工作： [代码示例：解析 JSON 数据结构](http://docs.blackberry.com/en/developers/deliverables/21128/Code_sample_Parse_JSON_data_structure_1319797_11.jsp)

The Simulator 在浏览器中访问 Internet后，它不会去任何地方`response = bsd.sendReceive();` ，我还检查了“使用模拟器启动移动数据系统连接服务 (MDS-CS)”。（奇怪的是提琴手中什么都没有出现，但是嘿）

URI 似乎确实经常超时，所以我将其更改为指向我的保管箱中的一个文件，但这并没有改变任何东西。

有人成功运行此示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:50:31.743

将“;deviceside=true”添加到 uri

# c# - 尝试访问用户信息时如何避免访问被拒绝异常？

> ID：11359376
> 
> 赞同：0
> 
> 时间：2012-07-06T09:20:50.793
> 
> 标签：c#, windows-8, microsoft-metro

我在 XAML/C# 中有 Metro 风格的应用程序，它显示了登录用户信息。我使用的方法“GetDisplayNameAsync（），GetPrincipalNameAsync（），GetDomainNameAsync（）”，但它只能显示我的显示名称，并且在显示主体和域名时抛出异常“访问被拒绝”。

如何在没有访问被拒绝异常的情况下调用 GetPrincipalNameAsync 和 GetDomainNameAsync？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:23:04.517

您需要声明“企业身份验证”功能。有关更多信息，请参阅[应用功能声明。](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx)

# ms-access - 从 ms 访问前端向 sql 添加新条目

> ID：11359379
> 
> 赞同：0
> 
> 时间：2012-07-06T09:21:01.783
> 
> 标签：ms-access, ms-access-2007

我有两个可以由这个查询表示的表（我已经将此查询作为表单的 Recordsource）：

```
SELECT tblrcmtask.id, tblrcmtask.rcmtask,tblrcmtaskoptions.id, 
tblrcmtaskoptions.rcm_id,
tblrcmtaskoptions.rcmtaskoptions 
FROM tblrcmtask 
INNER JOIN tblrcmtaskoptions 
ON tblrcmtask.id=tblrcmtaskoptions.rcm_id 
```

我希望用户能够通过 access 2007 中的表单将新条目添加到这些表中。列`tblrcmtask.id`和`tblrcmtaskoptions.id`分别是表的主键`tblrcmtask`和`tblrcmtaskoptions`。我不明白如何在用户添加新条目时在两个表中创建新 ID。用户只能在表单中添加 tblrcmtaskoptions.rcmtaskoptions 和 tblrcmtask.rcmtask。此外，每个 tblrcmtask 表中都有多行 tblrcmtaskoptions 。ID。我希望用户能够在表 tblrcmtaskoptions 中为现有的 tblrcmtask.id 添加新行

我尝试对这两个使用下拉菜单，但是在将新 ID 创建为 ID + 1 的最大值时遇到了问题。

```
Dim MyRecords As DAO.Recordset 
Dim Myfield As DAO.Fields 
SQL = "SELECT Max(tblRCMTASK.ID) AS MaxOf_RCMTASKID FROM tblRCMTASK;" 
Set MyRecords = dbTHIS.OpenRecordset(SQL) 
Set Myfield = MyRecords.Fields 
Me.txtRCMTASKID = Myfield("MaxOf_RCMTASKID") + 1 
Me.txtRCMTASKID.DefaultValue = Myfield("MaxOf_RCMTASKID") + 1 
MyRecords.Close 
End If 
Dim MyRecords1 As DAO.Recordset 
Dim Myfield1 As DAO.Fields 
SQL = "SELECT Max(tblRCMTASKOPTIONS.ID) AS MaxOf_RCMOPTIONSID FROM tblRCMTASK;" 
Set MyRecords = dbTHIS.OpenRecordset(SQL) 
Set Myfield1 = MyRecords1.Fields 
Me.txtRCMOPTIONSID = Myfield1("MaxOf_RCMOPTIONSID") + 1 
Me.txtRCMOPTIONSID.DefaultValue = Myfield("MaxOf_RCMOPTIONSID") + 1 
MyRecords1.Close 
```

我收到一条错误消息，提示您无法为该对象分配值并指向此行： Me.txtRCMTASKID = Myfield("MaxOf_RCMTASKID") + 1

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:17:23.207

尝试对自动编号字段执行操作时，Access 会给您带来麻烦。如果您想做这些类型的操作，您最好只使用一个常规数字作为 PK。

要获取最近插入的自动编号字段以在相关表中插入相同的数字，这是 VBA：

假设记录集和数据库被声明，rs 和 db

```
 dim id as integer
     set db = CurrentDb
     set rs = db.openrecordset("firstTable", dbOpenDynaSet)
 With rs
   .addNew
   .Fields("field1").Value = Me.control1   'adds to column1 of your table the value of control1
   .Fields("field2").Value = Me.control2
   .update                                 'updates the record. If it is an autonumber, it will be automatically assigned. I will show you how to access this for your next insert
 end with

 'To get the autoID of the entry we just inserted, do this
 id = db.OpenRecordSet("SELECT@@IDENTITY")(0)
 'Now you have the autoID of the recent insertion, so you may use it for your next one. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:26:47.933

这是一个经典的表单/子表单设置。仅基于`tblrcmtask`使用子表单创建表单`tblrcmtaskoptions`。链接子字段和主字段应设置为公共 ID。向导将为您执行此操作。不需要代码。id 将由链接字段自动添加。

您可以在[2007 版的 Northwind 示例数据库](http://office.microsoft.com/en-ie/templates/desktop-northwind-2007-sample-database-TC001228997.aspx)中看到一个示例。

# iphone - 从文档目录读取图像时内存泄漏

> ID：11359383
> 
> 赞同：2
> 
> 时间：2012-07-06T09:21:29.327
> 
> 标签：iphone

我正在循环读取文档目录中的图像。

```
for(iArrCount=0;iArrCount<[arrImages count];iArrCount++)
    {
UIButton *btnImage = [UIButton buttonWithType:UIButtonTypeCustom];
            btnImage.frame = CGRectMake(xRow, yRow, width, height);
            [btnImage addTarget:self action:@selector(imageDetails:) forControlEvents:UIControlEventTouchUpInside];
            btnImage.tag = iCount;
            if(iCount<[arrImages count])
            {

                NSString *workSpacePath=[[self applicationDocumentsDirectory] stringByAppendingPathComponent:[arrImages objectAtIndex:iCount]];
                [btnImage setBackgroundImage:[UIImage imageWithData:[NSData dataWithContentsOfFile:workSpacePath]] forState:UIControlStateNormal];
                [scrollImages addSubview:btnImage];
}
} 
```

这样做时，控制权进入`didRecieveMemoryWarning`应用程序崩溃。如果我用资源文件夹中的图像替换图像，应用程序不会崩溃。为什么这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T02:54:59.057

问题是您的按钮保持对全分辨率图像的引用。您需要做的是将图像按比例缩小到按钮尺寸，并将按比例缩小的图像设置为按钮背景。这样的事情应该可以解决问题：

在 UIImage 上创建一个类别...我们称之为 UIImage+Scaler.h

```
// UIImage+Scaler.h
#import <UIKit/UIKit.h>

@interface UIImage (Scaler)
- (UIImage*)scaleToSize:(CGSize)size;
@end 
```

和实施：

```
// UIImage+Scaler.m
#import "UIImage+Scaler.h"

#define kBitsPerComponent 8
#define kBitmapInfo       kCGImageAlphaPremultipliedLast

- (UIImage*)scaleToSize:(CGSize)size
{
    CGBitmapInfo bitmapInfo = kBitmapInfo;
    size_t bytesPerRow = size.width * 4.0;
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(NULL, size.width, 
                                   size.height, kBitsPerComponent, 
                                   bytesPerRow, colorSpace, bitmapInfo);

    CGRect rect = CGRectMake(0.0f, 0.0f, size.width, size.height);
    CGContextDrawImage(context, rect, self.CGImage);

    CGImageRef scaledImageRef = CGBitmapContextCreateImage(context);
    UIImage* scaledImage = [UIImage imageWithCGImage:scaledImageRef];

    CGImageRelease(scaledImageRef);
    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);

    return scaledImage;
} 
```

好的，现在回到你的代码。就像其他海报所说的那样，您需要一个自动释放池。

```
CGSize buttonSize = CGSizeMake(width, height);

for(iArrCount=0;iArrCount<[arrImages count];iArrCount++)
{
    NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];
    UIButton *btnImage = [UIButton buttonWithType:UIButtonTypeCustom];
    btnImage.frame = CGRectMake(xRow, yRow, width, height);
    [btnImage addTarget:self 
                 action:@selector(imageDetails:)      
       forControlEvents:UIControlEventTouchUpInside];
    btnImage.tag = iCount;
    if(iCount<[arrImages count])
    {
        NSString *workSpacePath=[[self applicationDocumentsDirectory]  
                       stringByAppendingPathComponent:
                            [arrImages objectAtIndex:iCount]];
        UIImage* bigImage = [UIImage imageWithData:[NSData   
                             dataWithContentsOfFile:workSpacePath]];
        UIImage* smallImage = [bigImage scaleToSize:buttonSize];
        [btnImage setBackgroundImage:smallImage forState:UIControlStateNormal];
        [scrollImages addSubview:btnImage];
    }
    [pool drain]; // must drain pool inside loop to release bigImage
} 
```

希望这能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:29:56.623

将您的`for`循环放入自动释放池中：

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
for(...)
{
   ....
}
[pool release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:32:29.523

使用[NSAutoreleasePool](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsautoreleasepool_Class/Reference/Reference.html)。将您的代码保存在自动释放池中。

```
for(iArrCount=0;iArrCount<[arrImages count];iArrCount++)
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    ......
    ......
    [pool drain];
} 
```

# sql - 在 Access 2007 中删除表的第一行

> ID：11359386
> 
> 赞同：1
> 
> 时间：2012-07-06T09:21:33.537
> 
> 标签：sql, ms-access, ms-access-2007

如何在 Acess 2007 上删除 SQL 中表的第一行？我尝试过 Delete Top (1)，但这会导致语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:39:27.837

你会需要：

```
DELETE t.*
FROM Table1 t
WHERE t.ID In (SELECT Top 1 ID FROM Table1 ORDER BY ID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:24:04.903

```
Delete from tableName where IDCOLUMN = 
(
 select top(1) IDCOLUMN from tableName
) 
```

# jquery - jquery的dom和“本机”dom有什么区别？

> ID：11359395
> 
> 赞同：0
> 
> 时间：2012-07-06T09:21:54.460
> 
> 标签：jquery, dom

我有一些这样的结果：

```
1\. //node, root are "native" dom object from getElementById and alike
2\. $(node)[0] == node //true
3\. $(root)[0] == root //true
4\. node.parentNode.parentNode == root //true
5\. $(node).parent().parent()[0] == $(root)[0] //true
6\. $(node).parent().parent() == $(root) //false 
```

我想写一些像第 6 行这样的代码，但它不起作用。所以我必须改用第 5 行。为什么第 6 行不起作用？

据我所知，jQuery dom 是“原生”dom 的容器/包装器。有人可以解释细节或推荐参考吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:25:22.500

只有一个 DOM。

但是，当您构建时，`$(domObject)`您正在制作一个封装 dom 对象的新 jquery 对象。

`$(domObject)`即使 domObject 相同，也没有理由让这个对象与另一个对象相等。

像这样看它：`new ProxyObject(a) == new ProxyObject(a)`会返回 false 因为`new ProxyObject`构建了一个对象。jQuery 更漂亮的语法也存在同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:25:09.757

为什么第 6 行返回 false 是因为它们是两个不同的对象。

`$(root) == $(root)`也回来`false`。

对于同一个 dom 元素`root`，每次执行都会`$(root)`生成一个新的 jQuery 对象。

# php - 获取一个数组到另一个数组 PHP

> ID：11359400
> 
> 赞同：-2
> 
> 时间：2012-07-06T09:22:34.147
> 
> 标签：php, multidimensional-array

我想在不使用 foreach 的情况下将一个数组提取到另一个数组中

```
 $data[0]['name']="name1";
   $data[0]['age']=10;
   $data[1]['name']="name2";
   $data[1]['age']=11;
   $data[2]['name']="name3";
   $data[2]['age']=12; 
```

我想将数组 $data 提取到 $user 中，以便 $user 成为..

```
 $user['name']="name1";
   $user['age']=10; 
```

不使用“foreach”语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:24:39.690

你可以使用这个：

```
$user = $data[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:27:11.867

没有 foreach 循环：

```
<?php
while( $user = array_shift( $data ) ) {
  print_r( $user );
} 
```

但是，为什么你有这么奇怪的要求？毕竟，foreaches 只是完成此类工作的工具。我们有没有机会做你的功课？;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T09:43:56.417

不用`foreach`你说...

```
reset($data);
$max = count($data);

for ($i = 0; $i < $max; $i++) {
    list($key, $user) = each($data);
    // do stuff.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T09:59:09.873

`foreach`实际上代表`for`and `each`：

```
for (reset($data); list($key, $user) = each($data);) {
###                                    ####
    // do stuff.
} 
```

# perl - 如何在 Perl 中惯用地访问单个元素哈希的第一个元素？

> ID：11359406
> 
> 赞同：4
> 
> 时间：2012-07-06T09:23:03.343
> 
> 标签：perl, hash

我有使用 DBI 的 fetchall_hashref() 获取一些数据的脚本。

通常它会返回一个哈希引用，如下所示：

```
{ 1 => { id => 1 } } 
```

但是，我只对哈希中第一项的值感兴趣，它是特定列的最大值。我知道 Perl 哈希没有排序，但幸运的是，这个特定的查询总是准确地返回 1 或 0 条记录（因为这是一个 MAX() 查询）。

但是目前用来实现这一点的代码真的很难看：

```
$results->{(keys %{$results})[0]}->{'id'}; 
```

有没有更优雅的方式来激活它？（不借助 CPAN 模块）

**澄清**

我从我们内部使用的数据访问层获取哈希值。一切都通过 fetchall_hashref() 返回。我不调用 fetchall_hashref() 本身，它只是内部实现数据访问函数的方式，所以有人告诉我。我是该返回数据的消费者，它恰好是散列的形式。我正在寻找一种更简洁的方法（如果存在）来访问单个返回值查询的结果

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T09:43:58.507

您可以取消引用`id`第一个值的键`%$results`：

```
(values %$results)[0]->{id}; 
```

通常，这不会被[很好地定义](http://en.wikipedia.org/wiki/Well-defined)，因为[返回的值的顺序`keys`或者`values`即使在使用相同的同一台机器上运行之间也可能不同`perl`](http://perldoc.perl.org/functions/keys.html)，但是由于您说`%$results`只能包含一个或零个元素，这是一种有效的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T09:29:56.030

你为什么`fetchall_hashref`要获取单个值？最好使用[`selectrow_array`](http://search.cpan.org/~timb/DBI-1.622/DBI.pm#selectrow_array)：

```
my ($max) = $dbh->selectrow_array($sql); 
```

更新：如果您不能使用其他 DBI 方法，更简洁的方法是：

```
my $val = [%$results]->[1]{id}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-06T09:28:38.177

如果您只返回 0/1 行而不是 fetchall_hashref ，为什么不执行[selectrow_array](http://search.cpan.org/~timb/DBI-1.622/DBI.pm#selectrow_array)或[selectrow_hashref](http://search.cpan.org/~timb/DBI-1.622/DBI.pm#selectall_hashref)？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T10:32:04.153

您的数据访问层是否总是返回带有顺序键的散列？如果是这样，那怎么办

```
$results->{1}{id} 
```

（当然，它可能不会......但是您的示例数据使用`1`了第一条记录的键，因此数据访问层可能使用确定性键。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T09:29:04.173

```
my @keys = sort { $a <=> $b } keys %$results;
my $first = $keys[0];
$results->{$first}->{id}; 
```

或者如果 $first = 1;

```
$results->{1}->{id}; 
```

# html - 侧边栏高度拉伸与内容高度 CSS

> ID：11359407
> 
> 赞同：0
> 
> 时间：2012-07-06T09:23:03.970
> 
> 标签：html, css

我有 2 个 DIV：

```
<div id="sidebar"></div>
<div id="content"></div> 
```

我如何使侧边栏 div 拉伸与内容相同的高度。

谢谢你的帮助。

更新：

这是我的示例代码和其他元素：

[http://tinkerbin.com/tkp2FZLZ](http://tinkerbin.com/tkp2FZLZ)

它在中间有一个内容 DIV 和 4 个使边框颜色不同的 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:32:10.867

您可以通过以下方式轻松获得您想要的结果`display:table-cell;`

**HTML**

```
<div id="sidebar">sidebar</div>

<div id="content">content</div> 
```

**CSS**

```
#sidebar {
display:table-cell;
width:100px;
background:red;

}
#content {
display:table-cell;
width:100px;
background:yellow;
height:200px;
} 
```

我认为你看起来像这样；- [http://tinkerbin.com/yqyX3mXg](http://tinkerbin.com/yqyX3mXg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:25:21.057

`display: table-cell`在两列上使用。

这将（视觉上！并且仅视觉上。它是 CSS）使它们的行为方式与`th/td`单元格相同。您可以`table-layout: fixed; display: table`在一个或两个列上添加父级和一些宽度以使用*其他*表算法，该算法不尝试适应内容但尝试尊重您想要的宽度。

HTML：

```
<div id="sidebar"></div>
<div id="content">typo in your code, an =" was removed</div> 
```

CSS：

```
#sidebar, #content {
  display: table-cell;
} 
```

编辑：与 IE8+ 兼容
您必须对 IE6/IE7 使用 inline-block ......他们不明白（哈！）。`display: inline; zoom: 1`是他们的替代品，或者您也可以浮动这些列并使用名为*faux-column*的技术（tl；博士背景在父级上，这是一个视觉假货，它似乎在每一列上，但不是）
EDIT2:`vertical-align: top`这种布局列也经常需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:28:20.740

尝试这个

```
 #sidebar { position: relative; }
     #content { position: absolute; top: 0; bottom: 0; right: 0; }

     <div id="sidebar">
     <div id="content">
     </div>
     </div> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-06T09:28:03.630

为它们设置相同的高度，你甚至可以给它们一个浮动。顺便说一句，您的 html 中有错误，请这样写：

```
<div id="sidebar"></div>
<div id="content"></div>​ 
```

和CSS：

```
#sidebar{
width: 40px;
height:350px;
float: left;
margin-left: 10px;
border: 1px solid red;
}

#content{
width: 165px;
height:350px;
float: left;
margin-left: 10px;
border: 1px solid blue;
} 
```

[​示例](http://jsfiddle.net/WpxCP/)

# c# - 无法使用 sqldatasource 使用的相同连接字符串通过自定义代码连接到数据库

> ID：11359408
> 
> 赞同：-1
> 
> 时间：2012-07-06T09:23:06.567
> 
> 标签：c#, asp.net, sql-server-2008

我在下面的代码中找不到错误。当我使用 SQLDataSource 连接我的数据库时，没有错误。但是，如果我尝试编写自定义代码来使用 SQLDataSource 使用的相同连接字符串连接数据库，我遇到了这个错误：

（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

我想我的代码没有错误，但是在 SQL 2008 Express 的配置设置中。

提前致谢...

```
 SqlConnection sqlcon = new SqlConnection();
    sqlcon.ConnectionString = "Data Source=ERHANEMREEROGLU/SQLEXPRESS;Initial Catalog=KET;Integrated Security=True";
    sqlcon.Open();

    SqlCommand sqlcmd = new SqlCommand();
    sqlcmd.Connection=sqlcon;
    sqlcmd.CommandText = "SELECT * FROM Login";
    sqlcmd.CommandType = CommandType.Text;

    sqlcmd.ExecuteNonQuery();

    sqlcon.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:25:47.227

这不应该读：

```
sqlcon.ConnectionString = "Data Source=ERHANEMREEROGLU\\SQLEXPRESS;Initial Catalog=KET;Integrated Security=True"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:25:18.760

您正在执行`ExecuteNonQuery();`插入/更新/删除语句。[您可以使用ExecuteReader](http://msdn.microsoft.com/en-us/library/9kcbe65k.aspx)填充 DataReader或使用[SQLDataAdapter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx)填充数据集/数据表。

```
SqlDataReader reader = sqlcmd.ExecuteReader();
        while (reader.Read())
        {
            Console.WriteLine(String.Format("{0}", reader[0]));
        } 
```

你可以试试：

```
using (SqlConnection sqlcon  = new SqlConnection(
        "Data Source=ERHANEMREEROGLU\\SQLEXPRESS;Initial Catalog=KET;Integrated Security=True"))
        {
        sqlcon.Open();
        using (SqlDataAdapter a = new SqlDataAdapter("SELECT * FROM Login", sqlcon ))
        {
            DataTable t = new DataTable();
            a.Fill(t);
        }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:25:48.197

有问题在声明中`sqlcmd.ExecuteNonQuery();`

```
SqlDataAdapter adapter = new SqlDataAdapter("SELECT * FROM Login", sqlcmd))            
DataTable t = new DataTable();
adapter.Fill(t); 
```

实际上你正在执行一个查询，你需要`SqlDataReader`或者`SqlDataAdapter`在这里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T09:34:18.890

如果您在 SQL 数据库上使用 Windows 身份验证，您可能需要将集成安全更改为 SSPI？虽然我不太确定。- 编辑阅读有关此的一些信息，SSPI 等效于 True，因此请参阅下面的建议。

```
sqlcon.ConnectionString = "Data Source=ERHANEMREEROGLU/SQLEXPRESS;Initial Catalog=KET;Integrated Security=SSPI"; 
```

但正如 John Blade 所说，您可能还需要在配置管理器中检查它是否接受远程连接。

还要确保您已将 Windows 用户添加到数据库中。您可以使用 SQL Mangement Studio 工具来执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T09:28:50.007

你应该改变你的线路：

```
sqlcmd.ExecuteNonQuery(); 
```

至：

```
 SqlDataReader dr = sqlcmd.ExecuteReader(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T09:29:48.777

尝试检查您的 SQL server 是否允许远程连接，您可以在 sql server 配置管理器中进行设置

然后启用远程 TCP 连接

# sql-server - 如何优化此查询？我正在使用 sql server 2008

> ID：11359411
> 
> 赞同：0
> 
> 时间：2012-07-06T09:23:25.597
> 
> 标签：sql-server

我有这个有效但总是超时的 SQL 查询。

```
CREATE PROCEDURE Sibm_getstudentdivisionattendancereport2 (
    @course_id     INT,
    --@Subject_Id int,                                        
    @academic_year INT,
    @division_id   INT,
    @semister_id   INT,
    @fromdate1 DATETIME,
    @todate1 DATETIME)
AS
  BEGIN
      DECLARE @fromdate VARCHAR(100)
      DECLARE @todate VARCHAR(100)

      SET @fromdate=CONVERT(VARCHAR(10), @fromdate1, 105)
      SET @todate=CONVERT(VARCHAR(10), @todate1, 105)

      CREATE TABLE #getstudentmarks
        (
           id                   INT NOT NULL,
           roll_no              VARCHAR(100),
           stud_id              INT,
           stud_name            VARCHAR(200),
           stud_last_name       VARCHAR(200),
           subject_name         VARCHAR(200),
           marks                INT,
           student_id           INT,
           division_id          INT,
           division             VARCHAR(50),
           attended             VARCHAR(12),
           exempted             VARCHAR(12),
           total_attendance     VARCHAR(12),
           attendancepercentage VARCHAR(30),
           subject_id           INT
        )

      CREATE TABLE #getstudentmarks1
        (
           id                   INT IDENTITY(1, 1) NOT NULL,
           roll_no              VARCHAR(100),
           stud_id              INT,
           stud_name            VARCHAR(200),
           stud_last_name       VARCHAR(200),
           subject_name         VARCHAR(200),
           marks                INT,
           student_id           INT,
           division_id          INT,
           division             VARCHAR(50),
           attended             VARCHAR(12),
           exempted             VARCHAR(12),
           total_attendance     VARCHAR(12),
           attendancepercentage VARCHAR(30),
           subject_id           INT
        )

      CREATE TABLE #divisionlist
        (
           division_id INT
        )

      CREATE TABLE #getstudent_attended
        (
           id         INT IDENTITY(1, 1) NOT NULL,
           student_id INT,
           exempted   VARCHAR(12),
           attended   VARCHAR(12)
        )

      DECLARE @Total_Lectures INT
      DECLARE @Student_Id INT
      DECLARE @TotalConductedLecture INT
      DECLARE @TotalExempted INT

      INSERT INTO #getstudentmarks1
                  (roll_no,
                   student_id,
                   stud_name,
                   stud_last_name)
      SELECT DISTINCT( SA.roll_no ),
                     SA.student_id AS id,
                     SR.first_name,
                     SR.last_name
      FROM   tblstudent_academic_record SA,
             tblstudent_record SR
      WHERE  SR.student_id = SA.student_id
             AND SR.student_id IN (SELECT SAR.student_id
                                   FROM   tblstudent_academic_record SAR
                 INNER JOIN tblcoursesemester_subject_student
                            CSS
                         ON SAR.student_id = CSS.student_id
                            AND SAR.current_record = 1
                            AND SAR.course_id = @course_id
                            AND
                 SAR.semister_id = @semister_id
                            AND
                 SAR.division_id = @division_id
                            AND
                 SAR.academic_year = @academic_year)

      CREATE TABLE #temp
        (
           id           INT,
           subject_name VARCHAR(100)
        )

      DECLARE @Master_Id INT

      SET @Master_Id = 0

      IF EXISTS(SELECT *
                FROM   tblcoursesemester_main
                WHERE  academic_year = @Academic_Year
                       AND course_id = @Course_Id
                       AND semester_id = @semister_id)
        BEGIN
            SET @Master_Id = (SELECT TOP 1 cs_id
                              FROM   tblcoursesemester_main
                              WHERE  academic_year = @Academic_Year
                                     AND course_id = @Course_Id
                                     AND semester_id = @semister_id)
        END

      INSERT INTO #temp
      SELECT id,
             subject_name
      FROM   tblsubject
      WHERE  id IN (SELECT subject_id
                    FROM   tblcoursesemester_subject
                    WHERE  is_archieve IS NULL
                           AND cs_id = @Master_Id)
             AND isarchive IS NULL
      ORDER  BY subject_name

      DECLARE @tempid INT
      DECLARE @sub VARCHAR(max)
      DECLARE c1 CURSOR FOR
        SELECT student_id
        FROM   #getstudentmarks1

      OPEN c1

      FETCH next FROM c1 INTO @Student_Id

      WHILE @@FETCH_STATUS = 0
        BEGIN
            DECLARE c2 CURSOR FOR
              SELECT id
              FROM   #temp

            OPEN c2

            FETCH next FROM c2 INTO @tempid

            WHILE @@FETCH_STATUS = 0
              BEGIN
                  UPDATE #getstudentmarks1
                  SET    subject_name = (SELECT subject_name
                                         FROM   #temp
                                         WHERE  id = @tempid),
                         subject_id = @tempid
                  WHERE  student_id = @Student_Id

                  FETCH next FROM c2 INTO @tempid
              END

            CLOSE c2

            DEALLOCATE c2

            FETCH next FROM c1 INTO @Student_Id
        END

      CLOSE c1

      DEALLOCATE c1

      --select * from #TEMP  
      --SET IDENTITY_INSERT #GetStudentMarks1 ON  
      INSERT INTO #getstudentmarks
                  (id,
                   roll_no,
                   stud_id,
                   stud_name,
                   stud_last_name,
                   subject_name,
                   marks,
                   student_id,
                   division_id,
                   division,
                   attended,
                   exempted,
                   total_attendance,
                   attendancepercentage,
                   subject_id)
      SELECT #getstudentmarks1.id,
             roll_no,
             stud_id,
             stud_name,
             stud_last_name,
             #temp.subject_name,
             marks,
             student_id,
             division_id,
             division,
             attended,
             exempted,
             total_attendance,
             attendancepercentage,
             #temp.id
      FROM   #getstudentmarks1
             CROSS JOIN #temp

      -- select * from #GetStudentMarks cross join #TEMP  
      --SET IDENTITY_INSERT #GetStudentMarks1 OFF  
      --select * from #GetStudentMarks  
      ---------calculate percentage-------------------        
      INSERT INTO #divisionlist
      SELECT divisionid
      FROM   tblschedulemaster
      WHERE  academicyear = @academic_year
             AND courseid = @Course_Id
             AND semesterid = @Semister_Id

      DECLARE @subject_id INT
      DECLARE c1 CURSOR FOR
        SELECT student_id
        FROM   #getstudentmarks

      OPEN c1

      FETCH next FROM c1 INTO @Student_Id

      WHILE @@FETCH_STATUS = 0
        BEGIN
            DECLARE c3 CURSOR FOR
              SELECT subject_id
              FROM   #getstudentmarks

            OPEN c3

            FETCH next FROM c3 INTO @subject_id

            WHILE @@FETCH_STATUS = 0
              BEGIN
                  --  GET TOTAL LECTURES OF EACH STUDENT                          
                  SELECT @Total_Lectures = Count([id])
                  FROM   tblfacultyschedule
                  WHERE  subjectid = @subject_id
                         AND sch_mas_id IN (SELECT [id]
                                            FROM   tblschedulemaster
                                            WHERE  academicyear = @academic_year
                                                   AND courseid = @Course_Id
                                                   AND semesterid = @Semister_Id
                                                   AND divisionid IN (
                                                                     -- Changed Divisions list Query Starts                  
                                                                     SELECT
                                                       divisionid
                                                                      FROM
                                                       tblschedulemaster
                                                                      WHERE
                                                       id IN (SELECT DISTINCT
                                                             sch_mas_id
                                                              FROM
                                                       tblfacultyschedule
                                                              WHERE
                                                       [date] >= @fromdate
                                                       AND [date] <= @todate
                                                       AND
                                           id IN (SELECT DISTINCT
                                                 schedule_id
                                                  FROM
                                           tblstudentattendence
                                                  WHERE
                                           student_id = @Student_Id
                                           AND schedule_id IN (SELECT
                                               id
                                                               FROM
                                               tblfacultyschedule
                                                               WHERE
                                               subjectid =
                                               @subject_id
                                               AND
                                                 sch_mas_id IN(SELECT
                                                 id
                                                               FROM
                                                 tblschedulemaster
                                                               WHERE
                                                 academicyear =
                                                 @academic_year
                                                 AND
                                                            courseid =
                                                            @Course_Id
                                                             AND
                                                            semesterid
                                                            =
                                                 @Semister_Id))
                                                 ))
                                                     -- Changed Divisions list Query Ends                  
                                                     ))
                         AND COALESCE(other_activity, '') NOT LIKE '%LUNCH%'

                  --print 'subject id'                                                   
                  --print @subject_id  
                  --print 'totol att'  
                  --print @Total_Lectures             
                  -- Total Conducted Lectures                            
                  SET @TotalConductedLecture =
                  (SELECT
                  COALESCE(Count(is_attended), 0) AS Attended
                                                FROM   tblstudentattendence
                                                WHERE  student_id = @Student_id
                                                       AND is_attended = 'YES'
                                                       AND
                  schedule_id IN (SELECT [id]
                                  FROM
                  tblfacultyschedule
                                  WHERE
                  [date] >= @fromdate
                  AND [date] <= @todate
                  AND subjectid = @subject_id
                  AND
                  sch_mas_id IN (SELECT [id]
                                 FROM
                  tblschedulemaster
                                 WHERE
                  academicyear = @academic_year
                  AND courseid = @course_id
                  AND semesterid = @semister_id
                  AND divisionid IN (SELECT
                      division_id
                                     FROM
                      #divisionlist))
                                                           AND
                  COALESCE(other_activity, '')
                  NOT
                  LIKE
                  '%LUNCH%'
                                                           AND
                  subjectid IN (SELECT DISTINCT
                               subject_id
                                FROM
                  tblcoursesemester_subject
                                WHERE
                  cs_subject_id IN (SELECT
                  cs_subject_id
                                    FROM
                  tblcoursesemester_subject_student
                                    WHERE
                  cs_subject_id IN (SELECT
                  cs_subject_id
                                    FROM
                  tblcoursesemester_subject
                                    WHERE
                  cs_id IN (SELECT cs_id
                            FROM
                  tblcoursesemester_main
                            WHERE
                  academic_year = @academic_year
                  AND course_id = @course_id
                  AND semester_id = @semister_id
                           )
                  AND is_archieve IS NULL)
                  AND student_id = @Student_id
                  AND is_archieve IS NULL)
                  AND is_archieve IS NULL)))
                  --print 'attended'        
                  -- print @TotalConductedLecture   
                  -- NOW COUNT Exempted LECTURES         
                  SET @TotalExempted=
                  (SELECT COALESCE(Count(is_attended), 0) AS
                          Attended
                   FROM   tblstudentattendence
                   WHERE  student_id = @Student_id
                          AND is_attended = 'EXEMPTED'
                          AND schedule_id IN (SELECT [id]
                                              FROM
                              tblfacultyschedule
                                              WHERE
                              [date] >= @fromdate
                              AND [date] <= @todate
                              AND subjectid =
                                  @subject_id
                              AND sch_mas_id IN (SELECT
                                  [id]
                                                 FROM
                                  tblschedulemaster
                                                 WHERE
                                  academicyear =
                                  @academic_year
                                  AND
                                             courseid =
                                             @course_id
                                              AND
                                             semesterid =
                                             @semister_id
                                                         AND
                                             divisionid IN (
                                             SELECT
                                             division_id
                                             FROM
                                             #divisionlist))
                                                     AND
                              COALESCE(other_activity, '') NOT
                              LIKE
                              '%LUNCH%'
                                                     AND
                                  subjectid IN (SELECT DISTINCT
                                               subject_id
                                                FROM
                                  tblcoursesemester_subject
                                                WHERE
                                  cs_subject_id IN (SELECT
                                  cs_subject_id
                                                    FROM
                                  tblcoursesemester_subject_student
                                                    WHERE
                                  cs_subject_id IN (SELECT
                                  cs_subject_id
                                                    FROM
                                  tblcoursesemester_subject
                                                    WHERE
                                  cs_id IN (SELECT cs_id
                                            FROM
                                  tblcoursesemester_main
                                            WHERE
                                  academic_year = @academic_year
                                  AND course_id = @course_id
                                  AND semester_id = @semister_id
                                           )
                                  AND is_archieve IS NULL)
                                  AND student_id = @Student_id
                                  AND is_archieve IS NULL)
                                  AND is_archieve IS NULL)))

                  -- print 'not attended'  
                  -- print @TotalExempted  
                  UPDATE #getstudentmarks
                  SET    #getstudentmarks.total_attendance = @Total_Lectures,
                         #getstudentmarks.attended = @TotalConductedLecture,
                         #getstudentmarks.exempted = @TotalExempted
                  WHERE  student_id = @Student_Id
                         AND subject_id = @subject_id

                  FETCH next FROM c3 INTO @subject_id
              END

            CLOSE c3

            DEALLOCATE c3

            FETCH next FROM c1 INTO @Student_Id
        END

      CLOSE c1

      DEALLOCATE c1

      -- CURSOR ENDS      
      --select * from #GetStudentMarks                   
      UPDATE #getstudentmarks
      SET    #getstudentmarks.division = tbldivision.division
      FROM   #getstudentmarks,
             tbldivision
      WHERE  #getstudentmarks.division_id = tbldivision.division_id

      UPDATE #getstudentmarks
      SET    #getstudentmarks.attended = #getstudent_attended.attended
      FROM   #getstudentmarks,
             #getstudent_attended
      WHERE  #getstudentmarks.student_id = #getstudent_attended.student_id

      UPDATE #getstudentmarks
      SET    #getstudentmarks.exempted = #getstudent_attended.exempted
      FROM   #getstudentmarks,
             #getstudent_attended
      WHERE  #getstudentmarks.student_id = #getstudent_attended.student_id

      UPDATE #getstudentmarks
      SET    attended = Isnull(attended, '0')

      UPDATE #getstudentmarks
      SET    exempted = Isnull(exempted, '0')

      UPDATE #getstudentmarks
      SET    total_attendance = Isnull(total_attendance, '0')

      --UPDATE #GetStudentMarks SET  #GetStudentMarks.AttendancePercentage=CAST(CAST((CAST(#GetStudentMarks.Attended AS NUMERIC(32,2)) * 100)/CAST(#GetStudentMarks.Total_Attendance AS NUMERIC(32,2)) AS NUMERIC(32,2)) AS VARCHAR(30))         
      --WHERE #GetStudentMarks.Total_Attendance <> '0'                                        
      UPDATE #getstudentmarks
      SET
      #getstudentmarks.attendancepercentage = Cast(
                                              Cast(
      Cast(( Cast(#getstudentmarks.attended AS NUMERIC(32, 2)) * 100 ) +
                          (
           Cast(
                                                 #getstudentmarks.exempted AS
                                                 NUMERIC(32, 2)) *
                                                   100 ) AS NUMERIC(32, 2)) /
      Cast
      (
      #getstudentmarks.total_attendance AS
      NUMERIC(
      32, 2)) AS NUMERIC(32, 2)) AS
                                              VARCHAR
                                              (30))
      WHERE  #getstudentmarks.total_attendance <> '0'

      --+ '' + '%'                      
      UPDATE #getstudentmarks
      SET    attendancepercentage = Isnull(attendancepercentage, '0.00')

      --UPDATE #GetStudentMarks SET  #GetStudentMarks.AttendancePercentage = '0 %' WHERE #GetStudentMarks.AttendancePercentage IS NULL             
      -------------end calculation---------------------        
      DECLARE @Roll_No              VARCHAR(20),
              @Stud_Id              VARCHAR(20),
              @Stud_Name            VARCHAR(200),
              @Subject_Name         VARCHAR(200),
              @Stud_Last_Name       VARCHAR(200),
              @AttendancePercentage VARCHAR(200)
      --  select * from #GetStudentMarks                 
      DECLARE @cntColm INT

      SELECT @cntColm = Count(roll_no)
      FROM   #getstudentmarks
      GROUP  BY roll_no

      CREATE TABLE #subject
        (
           sub_name VARCHAR(200)
        )

      INSERT INTO #subject
                  (sub_name)
      SELECT DISTINCT( subject_name )
      FROM   #getstudentmarks

      --print @cntColm              
      CREATE TABLE #getmarkssheet
        (
           student_id   VARCHAR(100),
           roll_no      VARCHAR(100),
           student_name VARCHAR(200)
        )

      --select * from #Subject             
      --------------- Cursor To add Columns As a Subject  Name-------------------    
      -- print'text'          
      DECLARE @Stubject VARCHAR(max)
      DECLARE curaddcol CURSOR FOR
        SELECT sub_name
        FROM   #subject

      OPEN curaddcol

      FETCH next FROM curaddcol INTO @Stubject

      WHILE @@FETCH_STATUS = 0
        BEGIN
            --print @Stubject             
            DECLARE @column VARCHAR(max)

            SELECT @column = Replace(@Stubject, '&', '')

            SELECT @column = Replace(@column, 'and', '')

            SELECT @column = Replace(@column, '.', '')

            SELECT @column = Replace(@column, ',', '')

            SELECT @column = Replace(@column, ' ', '')

            SELECT @column = Replace(@column, '-', '')

            SELECT @column = Replace(@column, '(', '')

            SELECT @column = Replace(@column, ')', '')

            SELECT @column = Replace(@column, '/', '')

            SELECT @column = Replace(@column, '//', '')

            SELECT @column = Replace(@column, '\', '')

            SELECT @column = Replace(@column, ':', '')

            --print 'columnname' + @column     
            IF( @column <> '' )
              BEGIN
                  EXEC('ALTER TABLE #GetMarksSheet ADD ' + @column +
                  ' VARCHAR(max)')
              --print @column  
              END

            SET @cntColm=@cntColm - 1

            FETCH next FROM curaddcol INTO @Stubject
        END

      ---------------------------- Cursor  Ends------------------------------------------            
      DECLARE cursubject CURSOR FOR
        SELECT roll_no,
               student_id,
               stud_name,
               stud_last_name,
               subject_name,
               attendancepercentage
        FROM   #getstudentmarks

      OPEN cursubject

      FETCH next FROM cursubject INTO @Roll_No, @Stud_Id, @Stud_Name,
      @Stud_Last_Name, @Subject_Name, @AttendancePercentage

      -- while  @cntColm >0              
      WHILE @@FETCH_STATUS = 0
        BEGIN
            DECLARE @ColName VARCHAR(max)

            SELECT @ColName = Replace(@Subject_Name, '&', '')

            SELECT @ColName = Replace(@ColName, 'and', '')

            SELECT @ColName = Replace(@ColName, ',', '')

            SELECT @ColName = Replace(@ColName, '.', '')

            SELECT @ColName = Replace(@ColName, ' ', '')

            SELECT @ColName = Replace(@ColName, '-', '')

            SELECT @ColName = Replace(@ColName, '(', '')

            SELECT @ColName = Replace(@ColName, ')', '')

            SELECT @ColName = Replace(@ColName, '/', '')

            SELECT @ColName = Replace(@ColName, '//', '')

            SELECT @ColName = Replace(@ColName, '\', '')

            SELECT @ColName = Replace(@ColName, ':', '')

            DECLARE @MarkInPer VARCHAR(max)

            SET @MarkInPer=Cast(@AttendancePercentage AS VARCHAR(max))

            IF NOT EXISTS (SELECT student_id
                           FROM   #getmarkssheet
                           WHERE  student_id = @Stud_Id)
              BEGIN
                  DECLARE @FullName VARCHAR(400)

                  --print @AttendancePercentage          
                  --print @ColName+'----'   +Cast(@MarkInPer as varchar(max))  +'----'    
                  -- select @MarkInPer=COALESCE(@MarkInPer,0)   
                  -- print @Roll_No + 'roll num'  
                  EXEC('insert into #GetMarksSheet(Student_Id,'+ @ColName +
                  ') values ('+
                  @Stud_Id +','+@MarkInPer + ')')

                  -- print @Stud_Name              
                  UPDATE #getmarkssheet
                  SET    student_name = @Stud_Name
                  WHERE  student_id = @Stud_Id
              --exec('UPDATE #GetMarksSheet SET  Student_Name='+@Stud_Name  +' where Roll_No='+@Roll_No)              
              END
            ELSE
              EXEC('UPDATE #GetMarksSheet SET '+ @ColName +' = '+@MarkInPer +
              ' where Student_Id='+@Stud_Id)

            SET @cntColm=@cntColm - 1

            FETCH next FROM cursubject INTO @Roll_No, @Stud_Id, @Stud_Name,
            @Stud_Last_Name, @Subject_Name, @AttendancePercentage
        END

      SELECT *
      FROM   #getmarkssheet
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:55:23.330

哎哟。在没有临时表的情况下执行此操作并在一个语句中尝试。看起来可行。

您的方法扼杀了查询优化器的优化能力，因为您为其提供了详细的步骤，包括一个（OUCH）光标，这意味着您需要它时的单处理器循环行为。

这不是 sql，这是一个变态 - sql 处理集合。

我相信你可以在一个语句中描述结果，而不使用临时表，结果可能会让你在性能方面感到惊讶；）

# php - php pdo错误处理难度

> ID：11359415
> 
> 赞同：0
> 
> 时间：2012-07-06T09:23:51.787
> 
> 标签：php

我正在使用 firebug 查看 JSON 返回的内容，我得到了这个数组

```
 Array
(
    [0] => 00000
) 
```

使用 Mysql 我可以简单地做到`or die(mysql_error())`。

这是我的查询，我只是将它从 mysql 更改为准备好的语句，现在它不起作用。

```
 $construct =  $connectdb->prepare("SELECT rate.voted as rvote, child.*, sub.actionid as usersub, child.position as cnid FROM `table1` child 
        LEFT JOIN vote rate on rate.userid=:userid AND child.id=rate.blockid
        LEFT JOIN subscribe sub on sub.actionid=child.id AND sub.userid=:userid
        WHERE child.sid=:id AND child.position=:clickedposition
        ORDER BY cnid DESC,cid DESC $finalquerylimit");         

        $construct->execute(array(':userid'=>$userid,':id'=>$id,':clickedposition'=>$clickedposition)); 
```

这是我用来得到错误的

```
print_r($construct->errorInfo()); 
```

我知道查询没有错，因为它在 MySql 中有效？任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:35:36.450

错误代码 with`00000`表示语句执行成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:40:30.863

执行语句在执行查询时返回 TRUE/FALSE 值。因此，如果它返回 FALSE，您可以向用户显示 db 错误（或将其记录在某处）。否则，如果为 TRUE，则查询成功执行。

供参考：[PDO 执行语句](http://php.net/manual/en/pdostatement.execute.php)

# sql - 匹配最长的航空公司代码前缀

> ID：11359421
> 
> 赞同：0
> 
> 时间：2012-07-06T09:24:06.137
> 
> 标签：sql, regex, sql-server-2008

我想分两步加入两个关于航班号的表格。

*   完整的航班号匹配 - 例如“BUD1234”匹配“BUD123”
*   航空公司代码匹配 - 例如“BUD123”匹配“BUD”，但不匹配“BU”且“BU123”不匹配“BUD”

我的想法是找到第一个数字字符的位置并匹配字母前缀，但这可能太慢了。这里有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:40:44.380

您可以使用积极的前瞻。就像是：

```
([a-zA-Z]+)(?=\d+) 
```

这将仅捕获航空公司代码，然后您可以匹配

# javascript - 如果第一个函数有返回值，则在第二个函数中检测

> ID：11359432
> 
> 赞同：1
> 
> 时间：2012-07-06T09:24:43.577
> 
> 标签：javascript, jquery

我有一个 JS 函数可以进行 ajax 调用并连续运行

```
function First(ServerId)
{
    var CallServer = jQuery.ajax({
        type: "POST",
        url: "somefile.php",
        dataType: "json",
        success: function(response)
        {
           // do something here
           First(response.ServerId);
        }
    }};
} 
```

在*somefile.php*中有一个 60 秒的睡眠计时器，因此 ajax 调用会在 60 秒后返回响应。每次返回不同的服务器 ID。

现在我有另一个功能，我想做这样的事情

```
function Second()
{
   /*
   wait for 5 seconds to see if function First() has returned server id
   if (ServerIdIsReturned)
   {
         i) abort CallServer
        ii) make another Ajax call (CallServer2)
       iii) after CallServer2 is done, call CallServer with the returned ServerId
   }
   else
   {
         i) abort CallServer
        ii) make another Ajax call (CallServer2)
       iii) after CallServer2 is done, call CallServer with the ServerId as 0
   }       
   */
} 
```

我不确定我是否已经正确解释了它，但是`Second()`如果函数`First()`返回了新的服务器 ID，我想检查函数并相应地继续进行。我想我需要使用 setTimeout 并分解 Second() 函数，但不确定。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:28:41.567

只需在第一个函数的成功块中调用第二个函数。

```
 success: function(response) {
      // do something here
      First(response.ServerId);
      // proceed further
      Second();
 } 
```

为了拨打延迟电话，只需使用`setTimeout(Second,5000);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:30:45.403

在调用之前将全局变量设置为 false 并在调用返回时将其设置为 true 然后您可以检查该变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:08:01.890

为什么不直接使用 jQuery ajax 调用的内置超时功能 - 设置 5 秒超时，然后添加错误处理程序 - 检查超时并再次调用，如果合适的话。

```
var CallServer = jQuery.ajax({
        type: "POST",
        url: "somefile.php",
        timeout:5000,
        dataType: "json",
        success: function(response)
        {
           // do something here
           First(response.ServerId);
        },
        complete(jqXHR, textStatus)
        {
            if (textStatus === "timeout")
           {
               Second();
            }
        }
    }}; 
```

# c - 表达式中带有等号“=”而不是“==”的 if 语句

> ID：11359433
> 
> 赞同：1
> 
> 时间：2012-07-06T09:24:45.310
> 
> 标签：c

我在代码中发现了一个错误（if 语句应该有“==”而不是“=”），我有几个问题。

示例代码：

```
int i = 5;
if (i = MyFunction())  // MyFunction() returns an int; this is where bug was made
{
  // call A()
}
else
{
  // call B()
} 
```

据我所知，它应该总是调用 A()。
1.我的假设是否正确（）？
2.所有/大多数编译器都是这种情况（任何例外）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T09:28:35.403

1.  不，它只会`A()`在赋值被认为是真的（即非零）时调用。
2.  是的，这是标准的。这不是编写代码的好方法，因为混淆的风险很大。

有些人翻转比较，将常数写到左边，以避免风险：

```
if( 12 == x ) 
```

但当然这对你来说是行不通的，因为它确实是一项任务。大多数编译器会在检测到此代码时向您发出警告，因为它通常是导致错误的原因。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T09:28:31.740

如果`MyFunction()`返回零 ( `0`) 它将调用 B(); 否则它将调用 A()。赋值表达式的值是赋值给左侧的值；在`if`语句中，0 被视为假，所有其他值都被视为真。

这是完全合法的代码，尽管许多编译器会发出警告。它有效的原因是在 C 和类似语言中，赋值是一个表达式（而不是一个语句）。

如果您打算分配`i`并测试返回值，您应该编写`if ((i = MyFunction()))`；额外的括号向编译器（和读者）发出赋值的信号。

相反，如果您打算针对您的值进行测试，`i`则应编写`if (MyFunction() == i)`; 通过将函数调用放在左侧，您可以确保如果您错过了双等号，代码将无法编译（`MyFunction() = i`通常不是有效的表达式）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-06T09:28:44.797

该语句是一个赋值：

```
i = MyFunction() 
```

if 语句实际上是在检查 i 的值。如果 MyFunction() 返回 0，则 i 被赋值为 0，它等效于：

```
if(0) 
```

这评估为假，在这种情况下不会调用 A()

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-06T09:27:39.600

`A`如果函数返回非零，它将采用真正的分支（即 call ）。零被视为假，因此如果`MyFunction()`返回零，它将`B`改为调用。

实际上，是的，这对于大多数/所有编译器都是正确的。我认为 0=false 只是一个约定；如果它现在在 C99 或更高版本中正式化，我不会感到惊讶，但我没有手边的副本可以让您参考正确的部分。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-06T09:28:53.170

你的假设是不正确的。

-condition 中的表达式`if`与任何其他表达式一样被评估，在您的情况下，结果`(i = MyFunction())`是 的返回值`MyFunction()`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-06T09:30:10.227

您的代码将评估

```
 (i = MyFunction()) 
```

如果`MyFunction()`返回非零值，则表达式将被评估为 true 并调用`A()`。除此以外`B()`

# html - 字段集图例自定义样式

> ID：11359434
> 
> 赞同：1
> 
> 时间：2012-07-06T09:24:45.340
> 
> 标签：html, css

我正在处理 HTML 表单。表单包括字段集和图例。

这是我的[jsfiddle](http://jsfiddle.net/umeshpatil86/PYmGG/)。

我想在图例前面显示答案选择。应该给 legend 或 fieldset 什么样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:31:17.433

小提琴示例：http: [//jsfiddle.net/PYmGG/3/](http://jsfiddle.net/PYmGG/3/)

相关CSS

```
legend, label, input { float: left }

fieldset { height: auto; overflow: hidden; 
           /* float clearing applied to fieldsets */ } 
```

您可能想给元素一些`margin-right`元素，并在对它们应用 a`legend`之间留出一些空间`fieldsets``margin-bottom`

# php - 类型提示实现接口而不是类的对象

> ID：11359436
> 
> 赞同：0
> 
> 时间：2012-07-06T09:25:03.373
> 
> 标签：php, oop

在 PHP 5.3 > 我可以键入提示带有接口的对象吗？

像这样：

```
public function AddToFavorite(Trendmed\Interfaces\Favoriteable $entity) {} 
```

还是我只限于检查函数内部的实现？我试过像上面那样输入提示，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:30:36.733

从[手册](http://php.net/manual/en/language.oop5.typehinting.php)：

> PHP 5 引入了类型提示。函数现在可以强制参数为对象（通过在函数原型中指定类的名称）、**接口**、数组（自 PHP 5.1 起）或可调用（自 PHP 5.4 起）

所以它可以使用接口。

# c - 64 位到 10 位的散列函数

> ID：11359441
> 
> 赞同：5
> 
> 时间：2012-07-06T09:25:20.573
> 
> 标签：c, linux, gcc, hash, x86-64

我想要一个哈希函数，它需要一个长数（64 位）并产生 10 位的结果。用于此目的的最佳哈希函数是什么。输入基本上是变量的地址（地址在 Linux 上是 64 位或 8 字节），所以我的哈希函数应该为此目的进行优化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T09:34:30.070

我会这样说：

```
uint32_t hash(uint64_t x)
{
    x >>= 3;
    return (x ^ (x>>10) ^ (x>>20)) & 0x3FF;
} 
```

最不重要的 3 位不是很有用，因为大多数变量都是 4 字节或 8 字节对齐的，所以我们将它们删除。然后我们取接下来的 30 位并将它们混合在一起 (XOR)，每个块有 10 位。

当然，您也可以使用，`(x>>30)^(x>>40)^(x>>50)`但我不确定它们是否会在实践中产生任何影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T14:54:53.163

**我编写了一个*玩具*程序**来*查看*堆栈、数据区和堆上的一些真实地址。基本上我声明了 4 个全局变量，4 个本地变量并做了 2 个`mallocs`。我在打印地址时丢掉了最后两位。这是其中一次运行*的*输出：

```
 20125e8
 20125e6
 20125e7
 20125e4
3fef2131
3fef2130
3fef212f
3fef212c
 25e4802
 25e4806 
```

**这告诉我什么：**

1.  此输出中的 LSB（地址的第 3 位）经常处于“开”*和*“关”状态。所以在计算哈希时我不会放弃它。删除 2 个 LSB 似乎就足够了。
2.  我们还看到低 8-10 位有更多的熵。我们必须在计算哈希时*使用它。*
3.  我们知道，在 64 位机器上，[虚拟地址永远不会超过 48 位宽](http://en.wikipedia.org/wiki/X86-64#Virtual_address_space_details)。

**我接下来会做什么**：

```
/* Drop two LSBs.  */
a >>= 2;

/* Get rid of the MSBs. Keep 46 bits. */
a &= 0x3fffffffffff;

/* Get the 14 MSBs and fold them in to get a 32 bit integer.
The MSBs are mostly 0s anyway, so we don't lose much entropy.  */
msbs = (a >> 32) << 18;
a ^= msbs; 
```

现在我们通过一个[体面的“半雪崩”哈希函数](http://burtleburtle.net/bob/hash/integer.html)传递它，*而不是滚动我们自己的*。“半雪崩”意味着输入的每一位都有机会影响相同位置或*更高*位置的位：

```
uint32_t half_avalanche( uint32_t a)
{
    a = (a+0x479ab41d) + (a<<8);
    a = (a^0xe4aa10ce) ^ (a>>5);
    a = (a+0x9942f0a6) - (a<<14);
    a = (a^0x5aedd67d) ^ (a>>3);
    a = (a+0x17bea992) + (a<<7);
    return a;
} 
```

对于 10 位散列，使用`uint32_t`返回的 10 个 MSB。如果您为位散列选择 MSB，散列函数*将继续正常工作*，每增加一个位有效地将桶计数加倍。`N``N`

***我有点无聊，所以我为此写了一个玩具基准。***没什么特别的，它在堆上分配了一堆内存并尝试了我上面描述的哈希。来源可以从**[这里](https://gist.github.com/3063407)**得到。一个示例结果：

> 1024 个桶，生成 256 个值，29 个碰撞
> 1024 个桶，生成 512 个值，103 个碰撞
> 1024 个桶，生成 1024 个值，370 个碰撞

**下一步：**我尝试了这里回答的其他两个哈希值。他们都有相似的表现。看起来像：只选择最快的;）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T11:45:43.923

最适合大多数发行版的是素数模数，1021 是最大的 10 位素数。无需剥离低位。

```
static inline int hashaddress(void *v)
{
        return (uintptr_t)v % 1021;
} 
```

如果您认为性能可能是一个问题，请准备一些替代品并*在您的实际程序中*与他们比赛。微基准是浪费；几个周期的差异几乎肯定会被缓存效应淹没，并且大小很重要。

# c# - 如何对特定日期和时间的列表进行排序

> ID：11359445
> 
> 赞同：1
> 
> 时间：2012-07-06T09:25:25.853
> 
> 标签：c#, windows-phone-7

我有一个列表，我想对其进行排序并显示特定日期和时间的条目。

```
public class Foodlist
{
    public int C_ID { get; set; }
    public string DateofFood{ get; set;}
    public string FoodTime{ get; set;}
    public string FoodDetail{ get; set;}
} 
```

目前我正在使用以下代码按日期降序显示列表。日期格式与日期选择器相同。

```
var datetime = foodItems.OrderBy(x => x.DateofFood).ToList();    
listBox1.ItemsSource = datetime; 
```

我只想显示特定日期的条目，比如今天。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:27:46.377

您可以使用`.Where`过滤数据：

```
listBox1.ItemsSource = orderedList; 
var datetime = 
    foodItems
    .Where(x => DateTime.Parse(x.DateofFood).Date == datePickerValue.Date) //Or whatever the date time is you're after.
    .OrderBy(x => x.DateofFood)
    .ToList(); 
```

尽管避免使用（或如果需要），但在您的班级中制作`DateofFood`a可能会更好。`DateTime``DateTime.Parse()``ParseExcact()`

```
.Where(x => x.DateofFood.Date == datePickerValue.Date) //Or whatever the date time is you're after. 
```

请注意使用`.Date`删除 的时间组件，`DateTime`以便您可以找到给定日期的条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:29:28.383

您可以使用[`Date`](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)DateTime 结构的属性：

```
var result = foodItems.OrderBy(x => x.DateofFood)
                      .Where(x=>x.DateofFood.Date == givenDate.Date).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:28:10.193

你需要在喜欢的地方应用谓词

```
var datetime = foodItems.Where(x=>x.DateofFood==DateTime.Today).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T09:29:07.470

```
var datetime = foodItems.Where(x => x.DateofFood == DateTime.Now).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T09:50:43.680

如果您将其存储为字符串，那么将其存储为 yyyyMMdd 可能是更好的选择。因为这将为您提供简单的排序。

虽然您总是可以`System.DateTime.UtcNow.ToString("yyyyMmMdd")`与上面的列表进行比较。

# google-chrome-extension - 在 chrome 扩展中使用沙盒页面

> ID：11359449
> 
> 赞同：3
> 
> 时间：2012-07-06T09:25:47.947
> 
> 标签：google-chrome-extension

chrome 扩展的清单版本 2 将不再支持在常规扩展页面上使用**eval**或**new Function 。**我的 chrome 扩展在使用这些机制的选项页面上使用 UI 框架（Kendo UI），因此我正在寻找解决方案。

根据IO 2012 的[这个会话](https://developers.google.com/events/io/sessions/gooio2012/208/)，想法是将相应的页面放入沙箱并通过 iframe 将其加载到扩展中。

这是我正在尝试做的一个简化示例：[https ://gist.github.com/3058943](https://gist.github.com/3058943)

清单.json：

```
{
 "name": "Sandbox test",
 "manifest_version": 2,
 "options_page": "main.html",
 "sandbox": {
    "pages": [ "index.html" ]
  }
} 
```

主.html：

```
<html>
  <head></head>
  <body>
    <iframe id="iframe" src="index.html" ></iframe>
  </body>
</html> 
```

索引.html：

```
<html>
  <head></head>
  <body>
    <h1>Inside the sandbox</h1>
  </body>
</html> 
```

在此示例中加载选项页面时，我收到错误消息：

> 拒绝加载 chrome-extension://fahdnpkbgfjkocogbjlljfbhnljcehoh/index.html。资源必须列在 web_accessible_resources 清单键中才能被网页加载。

我不认为每个沙盒页面也应该是 web_accessible_resources。但是，即使我尝试在清单文件中将沙盒页面也定义为 web_accessible_resources，沙盒页面也会被加载，但在 iframe 中使用**新功能**仍然被阻止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:59:27.927

上述错误消息出现在 Chrome 20.0.1132.47 上。

我使用开发通道版本 21.0.1180.15 进行了测试，这里沙盒 iframe 加载没有问题。

# ios - MPMoviePlayer 未从超级视图中删除

> ID：11359451
> 
> 赞同：1
> 
> 时间：2012-07-06T09:25:50.677
> 
> 标签：ios, xcode, cocoa, mpmovieplayercontroller, mpmovieplayer

我正在使用以下代码在 MPMoviePlayerController 中播放视频文件

```
 NSString* filePath = [[NSBundle mainBundle] pathForResource:@"one" ofType:@"mp4"];
    NSURL*  url = [NSURL fileURLWithPath:filePath];

    _movie = [[MPMoviePlayerController alloc] initWithContentURL:url];
    [_movie.view setFrame:self.view.bounds];
    [self.view addSubview:_movie.view];
    _movie.fullscreen=YES;
    _movie.controlStyle=MPMovieControlStyleFullscreen;
    [_movie prepareToPlay];
    [_movie play]; 
```

和

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(close:)name:MPMoviePlayerPlaybackDidFinishNotification object:_movie]; 
```

和

```
- (void) close:(NSNotification *)notification {

    int reason = [[[notification userInfo] valueForKey:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey] intValue];

    if(reason == MPMoviePlaybackStateStopped) {

        NSLog(@"Stop");

    }
    else if (reason == MPMovieFinishReasonPlaybackEnded) {
        NSLog(@"Playback Ended ");
    }
    else if (reason == MPMovieFinishReasonUserExited) {

        NSLog(@"Exited");
        [_movie.view removeFromSuperview];
    }
    else if (reason == MPMovieFinishReasonPlaybackError) {
        //error
        NSLog(@"Error");
    }    
} 
```

我能够得到 Notification ，并且 Movieplayer 没有从超级视图中删除。

可能是什么问题呢 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:38:36.050

请按照以下说明尝试：

当我听 MPMoviePlayerWillExitFullscreenNotification 时。

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(doneButtonClick:) 
                                             name:MPMoviePlayerWillExitFullscreenNotification 
                                           object:_movie]; 
```

和选择器方法：

```
-(void)doneButtonClick:(NSNotification*)aNotification{
  [_movie.view removeFromSuperview];
} 
```

（或者）

**在下面的教程中使用 mpmovieplayerviewcontroller 的更好方法**

[http://mobiledevelopertips.com/video/getting-mpmovieplayercontroller-to-cooperate-with-ios4-3-2-ipad-and-earlier-versions-of-iphone-sdk.html](http://mobiledevelopertips.com/video/getting-mpmovieplayercontroller-to-cooperate-with-ios4-3-2-ipad-and-earlier-versions-of-iphone-sdk.html)

# java - 无法以编程方式更改 webview 高度

> ID：11359452
> 
> 赞同：1
> 
> 时间：2012-07-06T09:25:55.453
> 
> 标签：java, android

我在我的主布局上设置了一个 webview，但我无法以编程方式调整它的大小。Webview 处于“主要”布局中。如果对他的内容容器“layoutA”做同样的事情，但不是解决方案，我只需要设置 webview 视图。谢谢你。

```
protected void onCreate(Bundle savedInstanceState){
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            final RelativeLayout LayoutA = (RelativeLayout)findViewById(R.id.aLayout);
            webviewA = (WebView) findViewById(R.id.webviewA);           

            Handler handler = new Handler();
            final Runnable r = new Runnable()
            {
                public void run() 
                {
                     LayoutParams params = (LayoutParams) webviewA.getLayoutParams();

                      params.height -= 150;

                }
            };

            handler.postDelayed(r, 1000); 
```

日志猫，

```
07-06 11:23:21.204: E/AndroidRuntime(13795): FATAL EXCEPTION: main
07-06 11:23:21.204: E/AndroidRuntime(13795): java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams
07-06 11:23:21.204: E/AndroidRuntime(13795):    at com.xxxx.projecte1.webPush$1.run(webPush.java:109)
07-06 11:23:21.204: E/AndroidRuntime(13795):    at android.os.Handler.handleCallback(Handler.java:587)
07-06 11:23:21.204: E/AndroidRuntime(13795):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-06 11:23:21.204: E/AndroidRuntime(13795):    at android.os.Looper.loop(Looper.java:138)
07-06 11:23:21.204: E/AndroidRuntime(13795):    at android.app.ActivityThread.main(ActivityThread.java:3701)
07-06 11:23:21.204: E/AndroidRuntime(13795):    at java.lang.reflect.Method.invokeNative(Native Method)
07-06 11:23:21.204: E/AndroidRuntime(13795):    at java.lang.reflect.Method.invoke(Method.java:507)
07-06 11:23:21.204: E/AndroidRuntime(13795):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
07-06 11:23:21.204: E/AndroidRuntime(13795):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
07-06 11:23:21.204: E/AndroidRuntime(13795):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:31:37.107

在您的 WebView 上调用 invalidate()。见[http://developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)（绘图部分）

问候弗洛

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:36:06.903

您已经在活动类中导入了 RelativeLayout.LayoutParams。

试着用

```
public void run() 
{
     ViewGroup.LayoutParams params = (ViewGroup.LayoutParams) webviewA.getLayoutParams();
     params.height -= 150;    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:52:43.953

问题出在导入的包中，请检查您的情况下的包，如果它不存在而不是添加它而不是其他 pkg，如 import android.widget.RelativeLayout 等...

```
 import android.view.ViewGroup.LayoutParams; 
```

# jquery - jQuery.crSpline 和动画回调

> ID：11359474
> 
> 赞同：0
> 
> 时间：2012-07-06T09:27:10.527
> 
> 标签：jquery, animation, jquery-plugins

我正在使用[jQuery.crSpline](https://github.com/MmmCurry/jquery.crSpline)插件构建许多动画，并且在动画上我需要添加一个回调，它似乎没有启动..

这是我的方法的一部分：

```
if(_self.okBack == 'no') {
            $(id)
                .not(':animated')
                .appendTo($(layerId))
                .addClass('mover')
                .stop(true, true)
                .animate({ crSpline: spline }, {duration: speed, queue: false }, easing, function() {
                    alert('done');
                    _self.okBack = 'yes';
                });
        } 
```

没有警报，也没有财产变化......

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:53:00.653

解决方案是：

```
.animate({ crSpline: spline }, { duration: speed, queue: false, easing: easing, complete: function() {
    _self.okBack = 1;   
}}); 
```

# iphone - 使用 GCD 执行 sudzc webservice

> ID：11359493
> 
> 赞同：0
> 
> 时间：2012-07-06T09:28:04.717
> 
> 标签：iphone, objective-c, ios, sudzc

我对GCD有点困惑

我尝试调用一个执行我的 web 服务调用的类：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [searchService doSearch:self.searchData];
}); 
```

我正在使用 Sudzc 生成的网络服务。对使用 Sudzc 生成且位于 SearchService 类中的服务的实际服务调用如下：

```
 [service doSearch:self action:@selector(doSearchHandler:) e: searchArgs]; 
```

通话结束后，我应该返回：

```
- (void) doSearchHandler: (id) value {
} 
```

如果不使用 GCD，它可以正常工作，但是当我添加它时，我永远不会返回到 doSearchHandler 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:40:49.970

我遇到了 Sudzc 操作阻塞主线程的问题。但是，Soap 请求不是问题，因为虽然 NSURLRequest 在主线程上执行，但它的数据由委托管理`didReceiveData`

阻止我的 UI 的是在 Handler 方法中对接收到的 XML 的处理。

在处理程序方法 ( `- (void) SudzcRequestHandler: (id) value { ...`) 中，我像这样处理数据：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

...processing...

[[NSNotificationCenter defaultCenter] postNotificationName:KManagerHasFinishedLoading object:self userInfo:[NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:NOTIFICATION_RESULT_OK], @"Result", nil]];

}); 
```

我在 Manager 中运行处理，它是一个单例对象，但其他实现可能会有所不同。所以通知用于让我的 ViewController 知道处理已经结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:12:57.247

您应该研究 Sync-Async 模式。[此SO](https://stackoverflow.com/questions/7001885/ios-call-soap-functions-in-thread)的答案中的两个链接将有所帮助。它不直接使用 GCD。但是你可以很容易地适应。

# authentication - Backbone.js 和用户认证

> ID：11359497
> 
> 赞同：12
> 
> 时间：2012-07-06T09:28:16.630
> 
> 标签：authentication, backbone.js

我一直想知道如何使用 Backbone 对用户进行身份验证，因为我一直在阅读一些关于它的文章，其中很多都在谈论令牌和密钥。但我只想能够登录一个用户并像你通常那样注册一个用户。

我在想，在网络应用程序启动时，会有一个对路由“/me”的请求，然后如果用户登录，服务器会向用户返回适当的信息。

就像路由与`{loggedIn: false}`骨干路由器一起返回时只会将用户发送到登录/注册页面。但是，如果它返回了用户个人资料信息，那么显然意味着他有一个会话。

在使用 Backbone 时，这是一种返回用户身份验证的好方法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-06T20:33:15.910

简短的回答：连接 $.ajax 以响应 401（未授权）状态代码。

长答案：我们正在使用来自单页网站的 RESTful api。当服务器检测到未经授权的请求时，它只返回 401。客户端将重定向到 /login?#requested/resource。

`/login`将提示授权（在我们的例子中重定向到谷歌的 oath 服务器）然后添加一个授权 cookie 并重定向到最初请求的`#requested/resource`

我们还在每个 $.ajax 请求上发送 auth cookie。

希望这会有所帮助。

```
define(
    [
        'jquery',
        'jquery.cookie'
    ],
    function ($) {
        var redirectToLogin = function () {
            var locationhref = "/login";
            if (location.hash && location.hash.length > 0) {
                locationhref += "?hash=" + location.hash.substring(1);
            }
            location.href = locationhref;
        };

        var $doc = $(document);
        $doc.ajaxSend(function (event, xhr) {
            var authToken = $.cookie('access_token');
            if (authToken) {
                xhr.setRequestHeader("Authorization", "Bearer " + authToken);
            }
        });

        $doc.ajaxError(function (event, xhr) {
            if (xhr.status == 401)
                redirectToLogin();
        });
    }); 
```

# php - PHP：正则表达式 列表

> ID：11359502
> 
> 赞同：0
> 
> 时间：2012-07-06T09:28:38.227
> 
> 标签：php, regex

我需要一个 PHP 正则表达式模式来分别`<ul></ul>`从字符串中选择所有列表。字符串是这样的：

```
Lorem ipsum dolor sit amet,...
<ul>
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
</ul>
Lorem ipsum dolor sit amet,...
<ul>
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
</ul>
.... 
```

我需要提取两个列表并将它们保存在数组中，因此结果如下所示：

```
$listsarray[0] = first list code from <ul> to </ul>.
$listsarray[1] = second list code, etc.. 
```

我已经尝试过，但这并没有按预期工作。如果有两个以上的列表，它会选择前两个作为一个（我不知道为什么，我是正则表达式的新手）：

```
$content = 'the content like above...';
$pattern = '/<ul[^.]*<\/ul>/';
preg_match_all($pattern, $content, $listsarray) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:31:02.097

不要使用正则表达式来解析 HTML，这是一个坏主意，因为 HTML 不是正则语言......您可以使用其他方法，例如[tidy](http://tidy.sourceforge.net/)或[内置的 DOMDocument](http://php.net/manual/en/domdocument.loadhtml.php)来轻松解析它而无需正则表达式

如果你坚持，你正在寻找的是不情愿的匹配（而不是贪婪）

更改`*`为`*?`

请参阅[这篇](https://stackoverflow.com/questions/5319840/greedy-vs-reluctant-vs-possessive-quantifiers)关于差异的文章和[这篇](https://stackoverflow.com/questions/6751105/why-its-not-possible-to-use-regex-to-parse-html-xml-a-formal-explanation-in-la)关于为什么尝试使用正则表达式解析 html 是一个坏主意的文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:38:10.760

用这个：

```
<ul>(?<ulContent>.*?)</ul> 
```

并获取名为*ulContent 的组*

# c# - 使用 .map 文件在 WCF 中添加 ServiceReference

> ID：11359508
> 
> 赞同：0
> 
> 时间：2012-07-06T09:28:50.047
> 
> 标签：c#, .net, wcf

我想在我的 WCF 项目中添加一个 WebServieReference。但我无法使用正常方式添加。

当使用`.map`文件添加引用时，我已经看到了一个演示。我在 ServieReference 文件夹中看到了一个 Authentication.map。我怎样才能添加类似的参考，

我在以正常方式添加时遇到的错误是，

> 服务器名称未解析

我将参考路径指定为`http://IPADDRESS/SERVICENAME/Authentication.svc?wsdl`，但 wsdl 文件中有一些内容，可能是一个模式文件，其路径类似于`http://SERVERNAME/SERVICENAME/SCHEMAFILENAME.xsd`.

`SERVERNAME`正在制造问题，任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:31:12.523

从上面的评论：

也许尝试将 ServerName 添加到您的`C:\Windows\System32\Drivers\etc\Hosts`文件中以临时将 ServerName 解析为您的 IP 并让您添加引用？

# java - Java 二进制文件 (.raw) 输出

> ID：11359516
> 
> 赞同：1
> 
> 时间：2012-07-06T09:29:16.263
> 
> 标签：java, file-io, binaryfiles, paraview

如何在 Java 中编写 .raw 文件？我必须将此输出文件用作 ParaView 的源文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:26:44.530

与其他二进制文件格式不同，`RAW`它是特定于相机的：每个数码相机都使用自己的文件格式。见[https://en.wikipedia.org/wiki/Raw_image_format](https://en.wikipedia.org/wiki/Raw_image_format)

要以这种格式读取/写入图像，您可以使用[Jrawio](http://jrawio.rawdarkroom.org/)

# c++ - 指针的 const 说明符

> ID：11359517
> 
> 赞同：1
> 
> 时间：2012-07-06T09:29:20.347
> 
> 标签：c++, pointers, constants

我可以声明`foo(const T& var)`以便我知道 var 不会被更改。

指针的等效格式是`foo(const T* var)`？

在过去，我尝试过那些与`iterator`/`const_iterator`激怒我相关的错误，我只是倾向于使用`(T* var)`而不考虑 constness。

是否有一个好的文档来声明强制指针指向的内容不会改变的函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T09:33:00.193

您所拥有的已经是一个禁止指针内容更改的指针。您可以通过使用“向后阅读”规则看到这一点：

```
const T* var     <===== left to right from this read 
```

倒着读：

> `var`是一个指向`T`常量的指针

这不同于

```
T* const var 
```

内容如下：

> `var`是一个指向 a 的常量指针`T`

这里的区别在于常数是`var`，而不是`T`; 这意味着您可以`T`通过取消引用来更改，`var`但您不能更改`var`指向的内容。

当然，您可以同时拥有以上两者：

```
const T* const var 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:10:00.833

（来自[2个简单的变量初始化问题](https://stackoverflow.com/questions/6580324/2-simple-variable-initialization-question)）

一个非常好的经验法则`const`：

> **从右到左阅读声明。**

（参见 Vandevoorde/Josutiss “C++ 模板：完整指南”）

例如：

```
int const x; // x is a constant int
const int x; // x is an int which is const

// easy. the rule becomes really useful in the following:
int const * const p; // p is const-pointer to const-int
int const &p;        // p is a reference to const-int
int * const * p;     // p is a pointer to const-pointer to int. 
```

自从我遵循这条经验法则以来，我再也没有误解过这样的声明。

(: sisab retcarahc-rep a no ton ,sisab nekot-rep a no tfel-ot-thgir naem I hguohT :tidE

同样，您可以将函数签名写入此规则：

```
void foo (int const * const p) 
```

现在，`p`是一个指向 const-int 的 const 指针。这意味着在函数体内，你不能让`p`指向别的东西，即你不能改变指针，也不能改变它所指向的东西。

p 作为一个常量指针是真正只与你的函数体相关的信息，你应该从头文件中省略这些信息：

```
// foo.h
void foo (int const *p); 
```

然后

```
// foo.cc
void foo (int const * const p) {
    // Here, the const serves you as the implementor as an additional
    // safety gear.
} 
```

# facebook - Facebook auth 总是给我长期的访问令牌。我不想要它

> ID：11359518
> 
> 赞同：0
> 
> 时间：2012-07-06T09:29:22.097
> 
> 标签：facebook, facebook-graph-api, oauth

我使用 Facebook PHP SDK 在我的网站上登录用户。

我正在尝试使用 2 个月而不是 2 小时后过期的“长期”访问令牌。现在我无法摆脱它。这对我来说是个问题，因为即使用户退出 Facebook，它也可以让我访问图形 API。我用它来确定用户是否在我的网站上登录，因此无法注销。

我尝试使用其他帐户更改应用程序 ID 和应用程序密码，以及删除我的 Facebook 和应用程序 cookie，但没有任何帮助。

如何取回 2**小时**访问令牌，以便在用户未登录时**无法使用图形 API？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:50:30.707

服务器端身份验证流程将*始终*为您提供长期访问令牌。

如果您想要一个短期的，那么您必须使用客户端流程（来自 JavaScript SDK 的 FB.login）。

# asp.net - 如何通过一个字段将文本、图像和符号放在一起

> ID：11359526
> 
> 赞同：0
> 
> 时间：2012-07-06T09:29:54.970
> 
> 标签：asp.net, html

我正在创建一个用于创建数学、物理等试卷的网站，因为它不接受特殊符号。

(1.) 如果 sin(symbol theta) 那么一般值为

(a) 2n(饼图符号) (b) 4(饼图符号) (c)
(d) 这些都不是

我已经休息了，但它只接受简单的文字问题，而不是符号。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:33:08.160

在谷歌上快速搜索将我带到这里：[http](http://barzilai.org/math_sym.htm) ://barzilai.org/math_sym.htm 。

因此，不要输入单词，或者尝试从您使用的任何文本编辑器中复制符号，只需从该网站复制一小部分字符，它应该会在网站中显示该字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:34:10.707

在这里您可以看到一个转换表[http://htmlhelp.com/reference/html40/entities/symbols.html](http://htmlhelp.com/reference/html40/entities/symbols.html)

**用法**

例如，您可以在 HTML 中使用它

```
<div>This is the capital letter phi: &#934;</div> 
```

# google-app-engine - 谷歌应用引擎上的 Apache POI（或类似）支持

> ID：11359529
> 
> 赞同：0
> 
> 时间：2012-07-06T09:29:59.487
> 
> 标签：google-app-engine

谷歌应用引擎是否支持 apache POI？

我可以使用用户可以下载的 POI 框架创建 excel 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:55:06.483

我已经在 GAE 上成功使用了 Apache POI for PowerPoint Docs .pptx。不会说话，对于 Excel 文件，但 POI 的 Java 库没有问题。有很多依赖项需要解决，但没有什么太大的挑战。

# makefile - 具有事先未知的依赖图的 Makefile

> ID：11359533
> 
> 赞同：3
> 
> 时间：2012-07-06T09:30:13.503
> 
> 标签：makefile, gnu-make

我正在尝试创建一个执行以下操作的makefile（GNU make）：

1.  脚本会生成一堆文件——文件名事先不知道。
2.  这些文件中的每一个都转换为不同的文件。
3.  全部转换后，所有这些文件都合并为一个输出文件。

**如何使用“钟形曲线”模式的依赖图创建生成文件，其中中间源文件和目标文件事先不知道？**

从概念上讲，我正在执行以下操作：

```
combined.pdf: $(filter combined.pdf, $(wildcard *.pdf))
    cat *.pdf > combined.pdf

%.pdf: %.svg
    cp $^ $@

$(wildcard *.svg):
    # recipe is for simple example
    # actually the *.svg files are not known in advance
    echo a > a.svg
    echo b > b.svg
    echo c > c.svg

.PHONY: clean
clean:
    ${RM} *.svg *.pdf *.d 
```

当然这不起作用：Make 在运行实际创建 svg 的目标之前评估目标和源。此外，无法确保所有 svg 在合并之前都已转换。

我意识到我可以创建依赖项并将它们包含到 makefile 中，但是我也很难让它工作：

```
.PHONY: clean

include deps.d

combined.pdf: deps.d
    cat *.pdf > combined.pdf

%.pdf: %.svg
    cp $^ $@

deps.d:
    @# recipe is for simple example
    @# actually the *.svg files are not known in advance
    echo a > a.svg
    echo b > b.svg
    echo c > c.svg
    @# we know what files exist now, so we can establish dependencies
    @# "a.pdf : a.svg"
    echo *.svg : > deps.d
    @# combined.pdf: a.pdf b.pdf c.pdf
    ls *.svg \
        | awk '{targetfn=$$0; sub(/\.svg$$/, ".pdf", targetfn); print targetfn, ":", $$0;}' \
        >> deps.d
    @# combined.pdf: a.pdf b.pdf c.pdf
    echo combined.pdf : $$(echo *.svg | sed -e 's/\.svg/\.pdf/g') >> deps.d

clean:
    ${RM} *.pdf *.svg *.d 
```

但是，这仍然没有正确连接依赖图。当我运行它时，退出如下：

```
Makefile:3: deps.d: No such file or directory
echo a > a.svg
echo b > b.svg
echo c > c.svg
echo *.svg : > deps.d
ls *.svg \
        | awk '{targetfn=$0; sub(/\.svg$/, ".pdf", targetfn); print targetfn, ":", $0;}' \
        >> deps.d
echo combined.pdf : $(echo *.svg | sed -e 's/\.svg/\.pdf/g') >> deps.d
make: Nothing to be done for `a.svg'. 
```

我似乎仍然有 make 不知道 deps.d 中的规则的问题。

此外，这仍然不能解决构建所有依赖项的问题。我想过使用这样的标记文件：

```
%.pdf: %.svg
    cp $^ $@
    @# if all svgs are converted, touch a target allpdfs
    if [ $(ls -1 *.svg | wc -l) -eq $(ls -1 *.pdf | grep -v combined\.pdf | wc -l) ]; touch allpdfs; fi 
```

但是没有办法告诉 make 这个规则可以创建“allpdfs”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:47:34.787

我很惊讶移动`include`指令会有所作为（您使用的是什么版本的 Make？），但有一种更简单的方法。您的使用`deps.d`实际上是对 Make 的递归使用——Make 正在安排第二次执行自身——所以我们不妨将其正式化：

```
combined.pdf: ALL_SVGS
    $(MAKE) ALL_PDFS
    rm -f $@ # just in case it exists already
    cat *.pdf > $@

.PHONY: ALL_SVGS
ALL_SVGS:
    # recipe is for simple example                                              
    # actually the *.svg files are not known in advance                         
    echo a > a.svg
    echo b > b.svg
    echo c > c.svg

# These variables will be empty in the first execution of Make
SVGS = $(wildcard *.svg)
PDFS = $(patsubst %.svg,%.pdf,$(SVGS))

.PHONY: ALL_PDFS
ALL_PDFS: $(PDFS))

%.pdf: %.svg
    cp $^ $@ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:01:29.323

这不是一个确切的*答案*，因为我不知道为什么会这样，但我发现如果我将`include`指令移到创建包含文件的目标*之后，一切正常。*

即这样做：

```
deps.d:
    ....

include deps.d 
```

因为我的 deps.d 包含足够的依赖信息，所以不需要中间目标`allpdfs`文件。一切正常，即使使用`make -j`.

但是，我不知道*为什么*会这样。[包含文档](http://www.gnu.org/savannah-checkouts/gnu/make/manual/html_node/Include.html#Include)并没有启发我。

### 更新

[我在 make 手册的最底部](http://www.gnu.org/savannah-checkouts/gnu/make/manual/html_node/Automatic-Prerequisites.html#Automatic-Prerequisites)注意到了以下注释，讨论了 Automatic Prerequisites ：

> 请注意，“.d”文件包含目标定义；您应该确保将 include 指令放在您的 makefile 中的第一个默认目标之后，或者冒着让随机目标文件成为默认目标的风险。请参阅[Make 的工作原理](http://www.gnu.org/savannah-checkouts/gnu/make/manual/html_node/How-Make-Works.html#How-Make-Works)。

所以发生的事情是*生成的 deps.d*中的第一条规则成为默认目标，导致构建的神秘提前完成。因此，解决方案只是确保`include`指令不在您的预期默认目标之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T20:43:57.667

我只是在稍微不同的环境中解决这个确切的问题。这是一个干净的解决方案 - 不需要递归等（如果你愿意，你可以调整 sed）：

```
include deps.d

combined.pdf:
    cat *.pdf > combined.pdf

%.pdf: %.svg
    cp $^ $@

deps.d:
    echo a > a.svg
    echo b > b.svg
    echo c > c.svg
    echo 'combined.pdf:' *.svg | sed 's/\.svg/\.pdf/g' > deps.d 
```

享受！

# ruby-on-rails - Rails - Javascript 中的内联 scss 文件

> ID：11359534
> 
> 赞同：4
> 
> 时间：2012-07-06T09:30:16.313
> 
> 标签：ruby-on-rails, coffeescript, asset-pipeline, sass

我在带有资产管道的 Rails 3.2 上。

我想在 javascript 字符串中内联一些缩小的 css（从我正在编写的 JS 库中动态包含它）。我的 css 是使用 scss 编写的，而我的 js 是使用 coffeescript 编写的。

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:37:00.737

我会和 @meagar 一起去拥有一个 CSS 和一个 JavaScript 文件。

但是，如果您真的想通过 javascript 获取它，您可以添加一个异步 get 调用（如 $.get）并将响应作为新字符串处理。丑陋，哼？

另一种选择是生成 CSS 输出并将其手动放入您的 javascript 中，或者更好的是，将其加载到您的咖啡脚本文件中，如下所示：

```
for filename in list
  do (filename) ->
    fs.readFile filename, (err, contents) ->
      compile filename, contents.toString() 
```

（来自[coffescript.org](http://coffeescript.org/)的示例）

# windows - 如何使用 wxPython 捕获 WM_NCLBUTTONDBLCLK 事件？

> ID：11359536
> 
> 赞同：0
> 
> 时间：2012-07-06T09:30:31.157
> 
> 标签：windows, wxpython

我正在使用 wxPython。我想检测标题栏上的鼠标事件。我注意到windows下有一个名为WM_NCMOUSEHOVER的事件。但是我在 wxPython 中找不到相应的事件。问题来了，如何使用 wxPython 捕获那些非客户端事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:43:45.430

我找不到从框架标题栏中获取鼠标事件的方法。我得到的最接近的是 EVT_MOTION。但是，您也许可以将 wx.Timer 与 wx.GetMousePosition() 结合使用。有关更多信息，请参阅[在 Python 中捕获 wx.Frame 之外的鼠标事件](https://stackoverflow.com/questions/9705201/capturing-mouse-events-outside-wx-frame-in-python)。

# coding-style - 使用属性以 Python 方式限制属性访问

> ID：11359537
> 
> 赞同：2
> 
> 时间：2012-07-06T09:30:33.130
> 
> 标签：coding-style, attributes, python

我正在尝试编写一个简短的类来表示存储在远程服务器上的对象。我希望在本地设置对象的属性而不在远程服务器上设置它们通常是一个坏主意；这意味着本地对象不再代表远程对象，甚至没有意识到这一事实。

我曾计划使用如下代码来处理这个问题。如果你想设置它，它会让你在脚下开枪`item.name`，但假设用户会明智而不这样做。

```
class Item(object):
    def __init__(self):
        self.name = get_item_name()

    def set_name(self, name):
        try:
            set_item_name(name)
        except:
            handle_error()
            raise
        else:
            self.name = name 
```

但是，我最近遇到了`@property`装饰器，它让我写了以下内容：

```
class Item(object):
    def __init__(self):
        self._name = get_item_name()

    @property
    def name(self):
        return self._name

    @name.setter
    def name(self, value):
        try:
            set_item_name(value)
        except:
            handle_error()
            raise
        else:
            self._name = value 
```

这样做的好处是仍然允许使用 访问属性`item.name`，但也可以处理`item.name = blah`赋值。

然而，虽然第二个代码块提供（在我看来是）更好的行为，但它在属性设置中隐藏了一个函数调用，并且考虑到*Zen*的“显式优于隐式”以及 Python 类应该不向他们的用户隐藏东西，这是否会使第二个代码块不那么 Pythonic？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:02:23.513

用 OO 语言编写代码就是为了隐藏东西。当您编写一个方法`doSomethingComplex()`时，您基本上是在应用程序的语言中创建一个新词，它对必须使用该方法的开发人员隐藏了一些复杂的操作。

虽然显式通常比隐式更好，但这并不意味着*总是*。在您的情况下，问题不在于将方法调用隐藏在 setter 中，而在于您隐藏了网络。一旦您尝试对方法的用户隐藏真实的物理网络，您需要确保正确处理以下情况：

1.  遥远的一方突然死亡
2.  网络丢弃数据包（本地超时）
3.  远程端抛出异常（您必须以某种方式将其获取到本地代码，但在本地可能没有意义）
4.  远程端成功处理了呼叫，但网络丢弃了答案（所以你确实成功了，但你不知道）

无论你多么努力，这种隐藏的复杂性都会泄露出去。作为一个简单的例子，使用此代码的开发人员将不得不处理网络异常和超时（与任何其他方法相反）。

所以这里的休息不是你在 setter 中调用一个方法，而是你引入了一个全新的合约。

什么是更好的解决方案？使网络调用显式。这对代码的用户来说意味着更明显的努力，但他们总是知道他们要面对什么（而不是想知道为什么这个 setter 行为如此奇怪）。

建议的实现：使用命令模式来修改这些对象的状态。该命令需要修改对象的 ID（因此您不必*保留*本地副本）、要更改的字段和新值。

当远程端回复“成功”时更新本地缓存副本。如果远程端返回错误，则删除缓存的副本，以便再次获取它。

这将创建更多代码，但此代码将非常简单明了。当您尝试隐藏远程端时，您将拥有更少的代码，但它会更加复杂和晦涩。

PS：永远不要假设人们在很长一段时间内都是明智的。

# python - 为什么步行迭代器比将其转换为列表并查询长度要慢？

> ID：11359538
> 
> 赞同：3
> 
> 时间：2012-07-06T09:30:33.550
> 
> 标签：python, optimization

我得到了一些非常令人惊讶的结果，这似乎表明将迭代器包装在列表中并获得它的长度比使用 lambda 遍历它更有效。这怎么可能？直觉会建议分配所有这些列表会更慢。

是的 - 我知道你不能总是这样做，因为迭代器可以是无限的。:)

```
from itertools import groupby
from timeit import Timer

data = "abbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccac" 

def rle_walk(gen):
    ilen = lambda gen : sum(1 for x in gen)
    return [(ch, ilen(ich)) for ch,ich in groupby(data)]

def rle_list(data):
    return [(k, len(list(g))) for k,g in groupby(data)]

# randomy data
t = Timer('rle_walk("abbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccac")', "from __main__ import rle_walk; gc.enable()")
print t.timeit(1000)

t = Timer('rle_list("abbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccac")', "from __main__ import rle_list; gc.enable()")
print t.timeit(1000)

# chunky blocks
t = Timer('rle_walk("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbccccccccccccccccccccccccccccccccccccccccccccc")', "from __main__ import rle_walk; gc.enable()")
print t.timeit(1000)

t = Timer('rle_list("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbccccccccccccccccccccccccccccccccccccccccccccc")', "from __main__ import rle_list; gc.enable()")
print t.timeit(1000)

1.42423391342
0.145968914032
1.41816806793
0.0165541172028 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T09:50:09.490

不幸的是，你`rle_walk`有一个错误；它接受参数`gen`但应该接受参数`data`，所以它在错误的输入上运行。`rle_walk`此外，使用内联工作的 lambda也是不公平的`rle_list`。像这样重写：

```
def rle_walk(data):
    return [(k, sum(1 for _ in g)) for k, g in groupby(data)]

def rle_list(data):
    return [(k, len(list(g))) for k, g in groupby(data)] 
```

和测试：

```
data_block = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbccccccccccccccccccccccccccccccccccccccccccccc"
data_random = "abbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccacabbbccac"
print [[Timer('r("{data}")'.format(data=data),
              "from __main__ import {r} as r; gc.enable()".format(r=r)).timeit(1000)
        for r in ['rle_walk', 'rle_list']]
        for data in (data_block, data_random)] 
```

给

```
[[0.02709507942199707, 0.022060155868530273],
 [0.12022995948791504, 0.16360306739807129]] 
```

所以我们看到它`walk`比`list`块状数据略慢，但在随机数据上略快。我猜原因是生成器（在 Python 中）与列表构造函数相比会产生开销；并且 30 项列表的内存开销太小，不会造成任何重大损失。

[分解](http://docs.python.org/library/dis.html)函数提供了一些见解：

```
>>> dis.dis(lambda g: (1 for _ in g))
  1           0 LOAD_CONST               0 (<code object <genexpr> at 0x2b9202a6fe40, file "<stdin>", line 1>)
              3 MAKE_FUNCTION            0
              6 LOAD_FAST                0 (g)
              9 GET_ITER            
             10 CALL_FUNCTION            1
             13 RETURN_VALUE        
>>> dis.dis((lambda g: (1 for _ in g)).func_code.co_consts[0])
  1           0 SETUP_LOOP              18 (to 21)
              3 LOAD_FAST                0 (.0)
        >>    6 FOR_ITER                11 (to 20)
              9 STORE_FAST               1 (_)
             12 LOAD_CONST               0 (1)
             15 YIELD_VALUE         
             16 POP_TOP             
             17 JUMP_ABSOLUTE            6
        >>   20 POP_BLOCK           
        >>   21 LOAD_CONST               1 (None)
             24 RETURN_VALUE        
>>> dis.dis(lambda g: len(list(g)))
  1           0 LOAD_GLOBAL              0 (len)
              3 LOAD_GLOBAL              1 (list)
              6 LOAD_FAST                0 (g)
              9 CALL_FUNCTION            1
             12 CALL_FUNCTION            1
             15 RETURN_VALUE 
```

生成器形式的更大代码量将产生一些影响；虽然列表形式具有用于构造一次性列表的 O(log n) 因子，但在循环各种迭代器时它将由 k*O(n) 因子支配。值得一提的是，内存分配*很快*，至少对于单线程环境中的小（子页面）分配（CPython 是 GIL 的必要条件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T09:46:39.793

当我重写`rle_walk`为

```
def rle_walk(gen):
    return [(ch, sum(1 for _ in ich)) for ch, ich in groupby(gen)] 
```

那么它比基于列表的版本更快。

计时（使用 IPython）：

```
>>> def rle_walk(gen):
...     ilen = lambda gen : sum(1 for x in gen)
...     return [(ch, ilen(ich)) for ch,ich in groupby(gen)]
... 
>>> %timeit rle_walk(data)
10000 loops, best of 3: 94.3 us per loop
>>> def ilen(x): return sum(1 for _ in x)
... 
>>> def rle_walk(gen):
...     return [(ch, ilen(ich)) for ch,ich in groupby(gen)]
... 
>>> %timeit rle_walk(data)
10000 loops, best of 3: 93.4 us per loop
>>> def rle_walk(gen):
...     return [(ch, sum(1 for _ in ich)) for ch,ich in groupby(gen)]
... 
>>> %timeit rle_walk(data)
10000 loops, best of 3: 83.8 us per loop
>>> def rle_list(data):
...     return [(k, len(list(g))) for k,g in groupby(data)]
... 
>>> %timeit rle_list(data)
10000 loops, best of 3: 123 us per loop 
```

（请注意，您正在喂食`data`而不是`gen`to `groupby`in `rle_walk`。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T09:49:39.863

Python（与大多数动态语言一样）中的函数调用开销非常高。

来自[Python 性能提示](http://wiki.python.org/moin/PythonSpeed/PerformanceTips#Data_Aggregation)：

> Python 中的函数调用开销相对较高，尤其是与内置函数的执行速度相比。这强烈表明，在适当的情况下，函数应该处理数据聚合。

在迭代器版本中，您可以调用函数`ilen()`，然后使用 Python 迭代来构建 1 列表。

在列表版本中，您有两个对内置函数的调用，`list()`并且`len()`. 内置作为本地代码执行，从高度优化的 C 编译。最重要的是，使用`list()`内置的将迭代器转换为列表的迭代是使用此本地代码在内部完成的。

# python - 检查cherrypy是否处于活动状态

> ID：11359541
> 
> 赞同：2
> 
> 时间：2012-07-06T09:30:48.970
> 
> 标签：python, cherrypy

我有一个启动cherrypy的进程运行一个任务，然后需要检查它是否仍在运行或已完成它的任务。我正在运行 python 2.6.7

```
 while True:
      if t1.isAlive():
           cherrypy.engine.start()
      else:
           cherrypy.engine.stop()
           print "server down" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:10:45.493

有几种方法可以做到这一点。这取决于你真正想要什么。你想检查一个进程是否仍然存在并且正在运行，或者你需要一些反馈信息吗？

还是您只需要检查输出（文件/日志/数据库）？给我们一些更多的信息。一些代码示例会澄清您的问题

我想你可以看看[PIDFile](http://docs.cherrypy.org/stable/refman/process/plugins/pidfile.html)插件。使用这个插件，你甚至可以独立于启动cherrypy实例的进程进行多进程或检查。

刚开始后，您初始化 pidfile-plugin 并检查文件是否存在之外的任何地方。唯一需要注意的是，它可能会阻止僵尸进程或者如果 pidfile 没有被删除。

# facebook - 个性化的 Facebook 图形 API

> ID：11359542
> 
> 赞同：0
> 
> 时间：2012-07-06T09:30:52.920
> 
> 标签：facebook, facebook-graph-api

我正在使用 Facebook 图形 API 进行以下查询：

[https://graph.facebook.com/search?q=term&type=post&access_token=XXXXXXXXXX](https://graph.facebook.com/search?q=term&type=post&access_token=XXXXXXXXXX)

但是当我通过图形 API 和 Facebook 网络执行查询时，我得到了不同的结果......

*   我使用的是同一个用户（我从我用来通过网络搜索的同一个用户那里获得了一个 access_token）。
*   我用 diff 测试了这个文本查询。浏览器和Java客户端，我有同样的问题......
*   我正在搜索有关此主题的信息，但找不到任何东西。

最后，我想问一下是否有人知道此查询如何自定义其结果以及是否可以对其进行参数化。

问候。

更新：

我正在测试一个查询：

[https://graph.facebook.com/search?q=mark&type=user&access_token=XXXXXXX](https://graph.facebook.com/search?q=mark&type=user&access_token=XXXXXXX) 但我没有收到结果。我不明白 Facebook 怎么可能找不到名为 Mark 的用户.....我想我必须使用一些参数（字段，fe）......但文档中没有解释...... .

# xml - 使用属性检查节点名称

> ID：11359543
> 
> 赞同：2
> 
> 时间：2012-07-06T09:30:55.250
> 
> 标签：xml, xslt, xpath

如何使用xslt查找具有属性值的节点是否存在？

假设如果我的 xml 像这样

```
<root>
 <sub>
    <p>text</p>
   <title id='id1-num-444'>text</title>
    <p>text</p>  
   <title id='id1-str-aaa'>text</title>
    <p>text</p>  
   <title id='id1-num-333'>text</title> 
    <p>text</p>  
 </sub>
</root> 
```

我使用了以下 xsl

```
<xsl:template match ="sub">

  ....some tags...

  <xsl:if test ="contains(name(), 'title[@id='id1-num']')">
  <xsl:call-template name ="title"></xsl:call-template>
</xsl:if>
</xsl:template> 
```

if条件需要检查直到num，它不应该考虑num之后的任何东西。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:53:38.303

**更短更精确的解决方案是使用标准 XPath 函数[`starts-with()`](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-starts-with)**：

```
starts-with(@id, 'id1-num') 
```

因此，您的代码片段变为：

```
<xsl:if test="starts-with(@id, 'id1-num')">
   <xsl:call-template name ="title"/>
</xsl:if> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:44:15.463

如果你想测试一个属性值的一部分，你需要使用`contains()`，但当然不是你做的那样。

假设，正如 Sean Durkin 所说，您的重点是候选标题元素，

```
<xsl:if test ="contains(self::title/@id,'id1-num')">
    <xsl:call-template name ="title"></xsl:call-template>
</xsl:if> 
```

或者稍微不那么明确的

```
<xsl:if test ="contains(@id,'id1-num')">
    <xsl:call-template name ="title"></xsl:call-template>
</xsl:if> 
```

会成功的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:41:45.860

我们需要更多的上下文来理解你想要什么，但也许你想匹配这样的模板规则？...

```
<xsl:template match="title[@id='id1-num']">
  ... contents go here ...
</xsl:template> 
```

如果它需要在序列构造函数中进行测试，并且焦点项是候选标题元素，那么可能吗？...

```
<xsl:if test ="self::title[@id='id1-num']">
  <xsl:call-template name ="title"></xsl:call-template>
</xsl:if> 
```

在上述情况下，当且仅当以下情况下，测试才会通过：

1.  焦点项目是一个名为title的元素；
2.  它有一个属性 id 值为“id1-num”

# python - 关于正则表达式案例

> ID：11359545
> 
> 赞同：1
> 
> 时间：2012-07-06T09:30:59.993
> 
> 标签：python, regex

我正在尝试使用正则表达式从 html 代码中获取 url。我对正则表达式了解不多，所以我有点困惑，因为它不起作用。情况是这样的：

```
<a href="cotizacion-valor/abengoa/" style="text-decoration:none;color:#006699;">ABG.MC</a> 
```

我正在尝试使用这个正则表达式来获得“abengoa”：

```
".*cotizacion-valor\/(/w+)\/.*" 
```

另外，我正在使用python，所以代码是：

```
regex_companies = ".*cotizacion-valor\/(/w+)\/.*"
match_companies = re.findall(regex_companies, content_web) 
```

我的正则表达式有什么问题？谢谢

编辑：还有一个问题：

我该怎么做才能只获得第一场比赛？因为这个href是在文档中重复的，内容相同（但也不同，所以我必须全部搜索）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:32:43.413

您的使用`/w`不正确。您必须使用`\w`而不是`/w`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:32:51.247

该`.*`模式匹配任意数量的任意字符（贪心）。使用非贪婪版本`.*?`，它将尽可能匹配。它`\w`也不是`/w`：

```
`.*?cotizacion-valor\/(\w+)\/.*?` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:34:13.393

试试这个

```
rex = ".*cotizacion-valor\/(?P<param_name>.*?)\/.*" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T09:34:38.350

使用这个正则表达式`(?<=.*cotizacion-valor/)(\w+)(?=\/.*)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T09:41:34.070

使用这个：

```
<a\s+href=\"(?<yourUrl>[^\"])\" 
```

并获取名为*yourUrl 的组*

# iphone - NSTimer 和 UITabBar

> ID：11359549
> 
> 赞同：0
> 
> 时间：2012-07-06T09:31:15.670
> 
> 标签：iphone, nstimer, uitabbar

我在一个视图中有三个标签栏项目。在第一个选项卡项中的开始按钮操作上有一个 NSTimer 计划。当我按下另一个选项卡项并进入最近的选项卡项（即带有 NSTimer 的选项卡项）时，它会将秒数增加 2。如果我第二次这样做它增加了 3 秒，依此类推。我希望秒数增加 1。

这是我用来安排 NSTimer 的代码

```
timer = [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(timerTick:) userInfo:nil repeats:YES];
[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode]; 
```

我尝试使用 [timer invalidate] 解决它；但这并没有给我正确的结果。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:14:33.830

在`- (void)viewWillAppear:(BOOL)animated` 方法中使计时器无效`[timer invalidate];`

并再次启动它：

`timer = [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(timerTick:) userInfo:nil repeats:YES];`

# r - 在 v1.8.3 之前，在 R {data.table} 中使用 `:=` 时如何抑制输出？

> ID：11359553
> 
> 赞同：28
> 
> 时间：2012-07-06T09:31:20.570
> 
> 标签：r, data.table

有没有办法防止`data.table`在通过引用分配新列后打印新的 data.table ？我收集的标准行为是

```
library(data.table)
example(data.table)
DT
#    x y  v
# 1: a 1 42
# 2: a 3 42
# 3: a 6 42
# 4: b 1 11
# 5: b 3 11
# 6: b 6 11
# 7: c 1  7
# 8: c 3  8
# 9: c 6  9

DT[,z:=1:nrow(DT)]

#    x y  v z
# 1: a 1 42 1
# 2: a 3 42 2
# 3: a 6 42 3
# 4: b 1 11 4
# 5: b 3 11 5
# 6: b 6 11 6
# 7: c 1  7 7
# 8: c 3  8 8
# 9: c 6  9 9 
```

即分配后表格打印到屏幕上。有没有办法在分配新列 z 后阻止 data.table 显示新表？我知道我可以通过说来阻止这种行为

```
DT <- copy(DT[,z:=1:nrow(DT)]) 
```

但这违背了`:=`（旨在避免复制）的目的。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-06T09:35:02.267

由于`<-.data.table`不制作副本，您可以使用`<-`：

创建一个 data.table 对象：

```
library(data.table)
di <- data.table(iris) 
```

创建一个新列：

```
di <- di[, z:=1:nrow(di)]
di

#       Sepal.Length Sepal.Width Petal.Length Petal.Width Species  z
#  [1,]          5.1         3.5          1.4         0.2  setosa  1
#  [2,]          4.9         3.0          1.4         0.2  setosa  2
#  [3,]          4.7         3.2          1.3         0.2  setosa  3
#  [4,]          4.6         3.1          1.5         0.2  setosa  4
#  [5,]          5.0         3.6          1.4         0.2  setosa  5
#  [6,]          5.4         3.9          1.7         0.4  setosa  6
#  [7,]          4.6         3.4          1.4         0.3  setosa  7
#  [8,]          5.0         3.4          1.5         0.2  setosa  8
#  [9,]          4.4         2.9          1.4         0.2  setosa  9
# [10,]          4.9         3.1          1.5         0.1  setosa 10
# First 10 rows of 150 printed. 
```

* * *

还值得记住的是，R 仅在交互模式下打印对象的值。

因此，在批处理模式下，您可以简单地使用：

```
di[, z:=1:nrow(di)] 
```

在批处理模式下作为脚本运行时，这不会产生任何输出。

* * *

**来自 Matthew Dowle 的更多信息：**

另请参阅常见问题解答 2.21 和 2.22：

> *2.21 为什么要`DT[i,col:=value]`返回整个的`DT`？我希望没有可见值（与 一致`<-`），或者包含更新了多少行的消息或返回值。数据确实已通过引用进行更新并不明显。*
> 
> 这样复合语法就可以工作了；例如，`DT[i,done:=TRUE][,sum(done)]`。当详细程度打开时，将返回更新的行数，无论是基于每个查询还是全局使用`options(datatable.verbose=TRUE)`.
> 
> *2.22 好的，但是不能`DT[i,col:=value]`无形地返回返回值，那么呢？*
> 
> *   我们试图但 R 在内部强制可见性 for `[`。FunTab 的 eval 列（参见 src/main/names.c）的`[`值`0`表示强制 `R_Visible`开启（参见 R-Internals 第 1.6 节）。因此，当我们尝试 `invisible()`或直接设置`R_Visible`为`0`自己时，`eval`在 src/main/eval.c 中会再次强制它打开。
> *   在习惯了这种行为之后，你可能会变得更喜欢它（我们有）。毕竟，我们使用子分配多少次`<-`，然后立即查看数据以检查它是否正常？
> *   我们可以混合`:=`成一个`j`也返回数据的；混合更新并在一个查询中选择。检测是否`j`单独更新（然后行为不同）可能会令人困惑。

* * *

**Matthew Dowle 的第二次更新：**

我们现在找到了解决方案，v1.8.3 在使用时不再打印结果`:=`。我们将更新常见问题解答 2.21 和 2.22。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-21T09:35:49.993

对于一个很长的数据表名称，似乎以下在性能上是等效的并且可以更短（我更喜欢短名称，但有时需要更长的名称来记住对象真正包含的内容）：

`invisible(Very.Long.Data.Table[i,col:=value])`

与之比较：

`Very.Long.Data.Table<-Very.Long.Data.Table[i,col:=value]`

# oracle - 包查询中的 PLSQL 函数

> ID：11359557
> 
> 赞同：-1
> 
> 时间：2012-07-06T09:31:27.573
> 
> 标签：oracle, plsql

我有一个名为employees的表..我想编写两个函数。第一个函数使用refcursor它想从employess表中获取所有行...结果将通过第二个函数显示。这两个函数应该在一包

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:05:57.993

您的问题表明很少有行业或努力制定解决方案。

从阅读[Oracle 文档](http://docs.oracle.com/cd/B25329_01/doc/appdev.102/b25108/xedev_programs.htm)开始，它将极大地帮助您。

作为您想要实现的目标的示例：

```
CREATE OR REPLACE 
PACKAGE ref_cur_package
AS
   FUNCTION get_emp
      RETURN SYS_REFCURSOR;

   PROCEDURE show_emp;
END ref_cur_package;

CREATE OR REPLACE
PACKAGE BODY ref_cur_package
AS
   FUNCTION get_emp
      RETURN SYS_REFCURSOR
   IS
      emp_rc SYS_REFCURSOR;
   BEGIN
      OPEN emp_rc
       FOR SELECT *
             FROM emp;

      RETURN emp_rc;
   END get_emp;

   PROCEDURE show_emp
   IS
      emp_rc  SYS_REFCURSOR;
      emp_row emp%ROWTYPE;
   BEGIN
      emp_rc := get_emp;

      LOOP
         FETCH emp_rc INTO emp_row;

         EXIT WHEN emp_rc%NOTFOUND;

         DBMS_OUTPUT.put_line('Employee: '||emp_row.firstname||' '||emp_row.lastname);
      END LOOP;

      CLOSE emp_rc;
   END show_emp;
END ref_cur_package;
/ 
```

要查看输出，您需要将[serveroutput 设置为](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12040.htm).

如果出现问题，您还应该添加一个异常处理程序以强制关闭 ref 游标，但我将把它留给您研究。

# c++ - 运算符重载解析如何在命名空间中工作？

> ID：11359562
> 
> 赞同：11
> 
> 时间：2012-07-06T09:31:49.490
> 
> 标签：c++, operators, overload-resolution

我发现 C++ 解析运算符重载的奇怪行为，我无法解释自己。指向一些描述它的资源的指针与答案一样好。

我有 2 个翻译单元。在一个（称为 util.cpp/h）中，我声明并定义了两个运算符（为了可读性，我省略了真正的实现，无论如何都会出现问题）：

```
// util.h
#ifndef GUARD_UTIL
#define GUARD_UTIL

#include <iostream>

std::istream& operator>>(std::istream& is, const char* str);
std::istream& operator>>(std::istream& is, char* str);
#endif 
```

和：

```
//util.cpp
#include "util.h"
#include <iostream>

std::istream& operator>>(std::istream& is, const char* str) {
  return is;  
}
std::istream& operator>>(std::istream& is, char* str) {
  return is;  
} 
```

这些运算符当然是在全局命名空间中，因为它们对标准类型和内置类型进行操作，并且应该可以在任何地方使用。它们可以从全局命名空间（例如从 main()）或显式告诉编译器它们在全局命名空间中正常工作（参见代码示例）。

在另一个翻译单元（称为 test.cpp/h）中，我在命名空间中使用这些运算符。这一直有效，直到我将类似的运算符放入此命名空间。一旦添加了此运算符，编译器（例如 gcc 或 clang）就无法再找到可行的运算符>>。

```
// test.h
#ifndef GUARD_TEST
#define GUARD_TEST

#include <iostream>

namespace Namespace {
  class SomeClass {   
    public:
      void test(std::istream& is);
  };

  // without the following line everything compiles just fine
  std::istream& operator>>(std::istream& is, SomeClass& obj) { return is; }; 
}

#endif 
```

和：

```
//test.cpp
#include "test.h"
#include "util.h"
#include <iostream>

void Namespace::SomeClass::test(std::istream& is) {
  ::operator>>(is, "c"); //works
  is >> "c" //fails
} 
```

为什么在命名空间中没有运算符>>时编译器会找到正确的运算符，但当有一个时却找不到？为什么即使它具有不同的签名，运算符也会影响编译器找到正确的能力？

解决此问题的一种尝试是

std::istream& operator>>(std::istream& is, const char* str) { ::operator>>(is, str); }

进入命名空间，但链接器抱怨以前的定义。所以附加：为什么链接器可以找到编译器找不到的东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T09:41:39.427

这是一个名称隐藏问题。标准说 (c++03, 3.3.7/1)

> 可以通过在嵌套声明区域或派生类 (10.2) 中显式声明相同名称来隐藏名称。

您的案例中的“名称”将是`operator>>`并且命名空间构成嵌套的声明性区域。

解决这个问题的最简单方法是使用`using`声明 namespace-local的声明`operator<<`：

```
namespace your_namespece {
    std::istream& operator>>(std::istream& is, SomeClass& obj) { return is; }; 
    using ::operator>>;
} 
```

请注意，此功能不会干扰 Koenig 查找（至少在您的情况下，原则上可以），因此`std::`仍然会找到 IO 运算符。

PS：解决此问题的另一种可能性是将运算符定义`SomeClass`为[inline`friend`](http://ideone.com/EplNj)。此类函数在命名空间级别（在“他们的”类之外）声明，但从那里不可见。它们只能通过 Koenig 查找找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T10:38:14.073

这里有几个问题；对于初学者，您正在重新定义全局命名空间中已经存在的函数`std::`. 但是，您描述的问题是由于名称查找的工作方式。基本上，在运算符重载的情况下，编译器会进行两次名称查找。第一个（用于所有符号，而不仅仅是运算符）从符号出现的范围开始，向外工作：首先是本地块，然后是类及其基类（如果有），最后是命名空间到全局命名空间。这种查找的一个重要特征是它会在找到名称的任何范围内停止：如果它在本地范围内找到名称，则不会查找任何类；如果它在一个类中找到一个，它不会在基类或名称空间中查找，如果它在一个名称空间中找到一个，它不会在任何封闭的名称空间中查找。就此查找而言，所有重载都必须在同一范围内。第二次查找仅影响函数和运算符重载，并且发生在用作参数的类或对象的上下文中；因此，如果其中一个操作数是标准库中的类（或从标准库中的类派生的任何东西），编译器将在`std::`，即使使用该符号的上下文不包括`std::`. *您遇到*的问题 *是*`char*`，内置类型（例如. 您的功能都不在其中。如果要找到重载运算符，则*必须*在其操作数之一的范围内定义它。*`operator>>`*`std::`**

 ***Concretely, here: you can't overload `std::istream& operator>>( std::istream&, char* )`, because it is already overloaded in the standard library. `std::istream& operator>>( std::istream&, char const* )` is possible, but I'm not sure what it's supposed to do, since it can't write to the second operand. More generally, you should only overload this operator for types that you have defined, and you should put your overload in the same namespace as the type itself, so that it will be found by the second lookup above (called Argument Dependent Lookup, or ADL—or earlier, Koenig lookup, after the person who invented it).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:40:36.963

:: 是全局作用域，因此，编译器必须扫描全局命名空间并找到该运算符。是>>“C”，试图在命名空间中找到运算符>>，因此，编译器找到它并停止搜索，然后编译器尝试选择具有所需签名的运算符，如果没有这样的运算符 - 编译器失败。我认为您应该阅读 Herb Sutter Exceptional C++。***

# json - Google Calendar API 无法处理 curl 客户端请求

> ID：11359563
> 
> 赞同：2
> 
> 时间：2012-07-06T09:32:02.260
> 
> 标签：json, curl, google-calendar-api

我正在尝试使用 curl 创建一个谷歌日历事件，这是我的请求，但它不起作用我不知道我犯了什么错误：

> curl“https://www.googleapis.com/calendar/v3/calendars/{CalID}/events?access_token={access_token}”-H“内容类型：应用程序/json”-X POST -d'{“结束": { "start": { "date": "2012-08-01", "dateTime": "2012-08-01 22:47:31.893205", "timeZone": "Asia/Calcutta" }, "end “：{“日期”：“2012-08-08”，“日期时间”：“2012-08-08 22:47:31.893205”，“时区”：“亚洲/加尔各答”}，“与会者”：[{“电子邮件”：“dosi@iitpzx.com”}，{“电子邮件”：“test@gmail.com”}]，“提醒”：{“覆盖”：[{“方法”：“电子邮件”，“分钟”： 10 } ] } }' -v

我不断收到错误请求错误。有人能告诉我这个请求有什么问题吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T10:51:32.520

终于得到了正确的请求：

> curl "https://www.googleapis.com/calendar/v3/calendars/{CalendarID}/events?access_token={Access_token}" -H "Content-Type: application/json" -d ' { "start": { “日期时间”：“2012-07-11T12:47:31+05:30”}，“结束”：{“日期时间”：“2012-07-11T22:47:31+05:30”}，“与会者” : [ { "email": "{Attendee_Email}" } ], "reminders": { "overrides":[ ] } }' -v

# java - java中将颜色映射到灰度tif图像

> ID：11359567
> 
> 赞同：0
> 
> 时间：2012-07-06T09:32:15.583
> 
> 标签：java, tiff, color-scheme, geotiff

我有一个灰度 tiff 图像。现在我想添加一些伪颜色，即 DN 从 0-140，红色；DN 从 141-255，蓝色。请告诉我如何修改栅格表。否则，如果您还有其他解决方案，请告诉我。

# python - 更改文件行 - Python

> ID：11359570
> 
> 赞同：2
> 
> 时间：2012-07-06T09:32:22.930
> 
> 标签：python, file

我有一个名为**“users.txt”**的文件，其结构如下；`username:info_about_the_user.`

像这样的东西：

**用户.txt：**

> 马克：关于他的事情 安东尼：关于他的
> 事情
> 彼得：关于他的事情 peterpeter：关于他
> 的事情 peterpeterpeter
> ：关于他的事情 peterpeterpeterpeter：关于
> 他的事情

脚本的以下部分需要更改一行（更改有关用户的信息）但是当字符串重复时我遇到问题（peter - peterpeter）并且我不知道如何修复它。

```
def test():
    fn = 'users.txt'
    f = open(fn)
    output = []
    changeuser = 'peterpeter'
    userinfo = 'HeIsTall'
    for line in f:
        if not changeuser+":" in line:
            output.append(line)
    f.close()
    f = open(fn, 'w')
    f.writelines(output)
    f.close()
    f = open("users.txt", "a")
    f.write(changeuser + ":" + userinfo+"\n")
    f = open("users.txt", "a")

test() 
```

这是我的输入：

**输入：users.txt：**

> 马克：关于他的事 安东尼：关于他的
> 事
> 彼得：关于
> **他的事 彼得彼得：他真棒 peterpeterpeter**
> ：关于他的事 peterpeterpeterpeter
> ：关于他的事

我想更改有关 peterpeter 的信息并具有以下输出：

**我想要的输出：users.txt：**

> 马克：关于他的事 安东尼：关于他的事 彼得：关于他的事**peterpeter:HeIsTall** peterpeter:
> 关于他的事 peterpeterpeterpeter:关于他的事

 **但这是我的输入。彼得彼得背后的所有台词都被删除了。

> 马克：关于他的事 安东尼：关于他的事 彼得：关于他的事 彼得彼得：
> HeIsTall

任何人都可以通过下面的代码帮助我获得所需的输出吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:55:42.017

您可以使用该[`fileinput`](http://docs.python.org/library/fileinput.html)模块轻松获得它：

```
import fileinput

def test():
    fn = 'users.txt'

    changeuser = 'peterpeter'
    newinfo = 'HeIsTall'

    for line in fileinput.input(fn, inplace=1):
        user, oldinfo = line.split(':')
        print '%s:%s' % (user, newinfo if user == changeuser else oldinfo.replace('\n', ''))

if __name__ == "__main__":
    test() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T09:36:55.377

试试这个：

```
def test():
    fn = 'users.txt.txt'
    f = open(fn)
    output = []
    changeuser = 'peterpeter'
    userinfo = 'HeIsTall'
    for line in f:
        if line.strip().split(':')[0]!=changeuser:
            output.append(line)
        else:
            output.append(changeuser + ":" + userinfo+"\n")

    f.close()
    f = open(fn, 'w')
    f.writelines(output)
    f.close()

test() 
```

**输出：**

```
mark:stuffabouthim
anthony:stuffabouthim
peter:stuffabouthim
peterpeter:HeIsTall
peterpeterpeter:stuffabouthim
peterpeterpeterpeter:stuffabouthim 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T09:56:25.120

您在 - 子句中遇到了一个逻辑错误`if`，它**删除**了所有 peter*，唯一剩下的 peter 是您附加到文件的那个。

```
for line in f:
        if not changeuser+":" in line:  #THAT MEANS ALL PETERS ARE IGNORED!
            output.append(line) 
```

一般来说，肯定从句比否定从句更容易理解：

```
for line in f:
   if changeuser+":" in line:
      output.append('%s:%s\n' %(changeuser,userinfo))
   else:
      output.append(line) 
```

好的代码很容易阅读。尝试像编写报告一样编写代码！这会自动将您的代码拆分为更小的部分，例如函数。例如：

```
lines = read_all_lines_from_file(filename)
change_user_info(lines, user, userinfo)
save_lines_to_file(lines, filename) 
```

您的代码被分成更小的部分，如果发生错误，您可以将其固定在几行代码中，而不必在几页上工作。;-)**

# c# - 打开一秒钟后如何返回窗口？

> ID：11359572
> 
> 赞同：0
> 
> 时间：2012-07-06T09:32:24.330
> 
> 标签：c#, wpf, event-handling, show

我的应用程序具有这样的性质，以至于我需要连续跳过许多窗口。从我的菜单窗口中，我需要打开另一个窗口（从选择中）并禁用或关闭菜单窗口。

我目前使用的是 window.show 然后 this.close() 方法来关闭菜单窗口。

前任：

```
 private void MainMenuControl_Link1MouseDown(object sender, RoutedEventArgs e)
    {

        // Utilities
        UtilitiesMenyWindow UtilitiesMenyWindow = new UtilitiesMenyWindow(); // Assign Variable to window
        UtilitiesMenyWindow.Show(); // Open window
        this.Close(); // close current window

    } 
```

然后在新窗口中，我只需使用相同的方法重新打开 MainMenu 窗口。

```
 private void Utilities_Link3MouseDown(object sender, RoutedEventArgs e)
    {
        // Return to Main
        MainMenuWindow MainMenu = new MainMenuWindow(); // Assign Variable to window
        MainMenu.Show(); // Open Main window
        this.Close(); // close login window
    } 
```

然后我还保留一个带有静态变量的公共变量类来存储所有窗口通用的所有变量。

所有这一切对我来说都很好，除了一个障碍。如果我要从另一个窗口（不是 MainWindow）调用 UtilitiesMenyWindow，它将返回到 MainMenu 而不是我打开它的窗口。

有没有一种更简单、更通用的方法可以返回打开辅助窗口的窗口，而不必告诉它自己关闭并打开特定窗口（在这种情况下，它是“硬编码”到 MainMenu）（显然我先打开然后关闭）

我正在查看 Unloaded 事件，但是如何让原始窗口保持隐藏状态，直到该事件发生，而不必坐在那里等待循环，这不是一个好主意。也许有人可以指导我将其设置为“触发”事件处理程序的自动事件，然后再激活前一个窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:38:19.647

您可以考虑隐藏它们，而不是关闭窗口。这样，您可以在创建新窗口时传递对调用窗口的引用。

IE

```
UtilitiesMenyWindow UtilitiesMenyWindow = new UtilitiesMenyWindow();
UtilitiesMenyWindow.CallingWindow = this;
UtilitiesMenyWindow.Show();
this.Hide(); 
```

然后，当您想关闭新窗口并返回时：

```
this.Hide();
this.CallingWindow.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:39:07.017

您可以只关闭原始窗口 - 因为您的所有窗口可能都继承自 Window 类，您只需将当前窗口存储在实用程序菜单上的“窗口”类型变量中

这样你就可以继续做你正在做的事情：

例如

```
private void MainMenuControl_Link1MouseDown(object sender, RoutedEventArgs e) 
{ 

    // Utilities 
    UtilitiesMenyWindow UtilitiesMenyWindow = new UtilitiesMenyWindow(); // Assign Variable to window 
    UtilitiesMenyWindow.ReturnWindow = this;
    UtilitiesMenyWindow.Show(); // Open window 
    this.Hide(); // hide current window 

} 
```

并添加

```
Window _returnWindow; 
```

在您的实用程序窗口类上

然后在该类中的 close 方法中，您可以调用原始窗口类型：

```
private void Utilities_Link3MouseDown(object sender, RoutedEventArgs e)
{
    // Return to original
    _returnWindow.Show();
    this.Close(); // close login window
} 
```

这当然是假设您没有杀死原始窗口

# iphone - 在 UIScrollview 中限制 uiscrollview 委托列表中的特定委托

> ID：11359578
> 
> 赞同：0
> 
> 时间：2012-07-06T09:32:43.520
> 
> 标签：iphone, ios, uiscrollview, objective-c-blocks, uiscrollviewdelegate

从可用`UIScrollview`委托列表的列表中。我想限制选择性 uiscrollview 委托功能，即：

```
(UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView; 
```

我想限制它被编译器调用。我能做到吗？任何建议和帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:25:51.917

如前所述，您可以将 a 分配给`tag`您的每个`UIScrollViews`（或只是您需要的），然后检查该特定标签，或者您可以将`UIScrollView`委托方法中的 与您感兴趣的方法进行比较。

带标签。

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
if(scrollView.tag == 100){
   //do something here
   return imgView;
}
return nil;
} 
```

比较滚动视图。

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
if([myScrollView isEqual:scrollView]){
  //do something here
   return imgView;
}
return nil;

} 
```

# php - Symfony2：如何通过 FOSUserBundle 中的 ROLE 获取用户列表？

> ID：11359580
> 
> 赞同：2
> 
> 时间：2012-07-06T09:32:51.090
> 
> 标签：php, symfony, fosuserbundle

我需要向管理员发送日志。因此，我想获取管理员列表。我可以按名称取用户，例如：

```
$users = $this->getDoctrine()->getRepository('UserBundle:User')->findByName('admin'); 
```

但是我如何通过 ROLE 获得它？

# iphone - 无法从 Iphone 生成 Json 请求正文

> ID：11359593
> 
> 赞同：0
> 
> 时间：2012-07-06T09:33:28.573
> 
> 标签：iphone, json, http-post, wcf-rest

我是一名 .Net 软件开发人员。我为用户验证创建了一个 WCF Rest API 以下是它的签名。

```
[OperationContract]
    [WebInvoke(RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare,
        UriTemplate = "/Validate", Method = "POST")]
    UserListResponse ValidateUser(Login obj); 
```

它在提琴手中运行良好，具有以下请求正文

```
{"Username":"admin",Password:"111"} 
```

我的问题是，无法从 Iphone 使用 http post 方法访问它，但它在 Android Http post 方法中运行良好。

以下是我的代码：

```
NSError *theError = nil;

NSArray *keys = [NSArray arrayWithObjects:@"Username", @"Password", nil];

NSArray *objects = [NSArray arrayWithObjects:@"admin", @"111", nil];

NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys];

NSString *myJSONString =[jsonDictionary JSONRepresentation];

NSData *myJSONData =[myJSONString dataUsingEncoding:NSUTF8StringEncoding];

NSLog(@"myJSONString :%@", myJSONString); 

NSLog(@"myJSONData :%@", myJSONData); 

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://192.168.1.192/ShopMonkeyService/ShopMonkey.svc/Validate"]];

[request setHTTPBody:myJSONData]; 

[request setHTTPMethod:@"POST"];

NSURLResponse *theResponse =[[NSURLResponse alloc]init];

NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&theResponse error:&theError];   

NSLog(@"response : %@", theResponse);

NSLog(@"error : %@", theError);

NSLog(@"data : %@", data);

NSMutableString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

NSLog(@"string: %@", string);

NSDictionary *jsonDictionaryResponse = [string JSONValue];

NSLog(@"dic: %@", jsonDictionaryResponse); 
```

以下是我的回复错误：

> 2012-07-06 11:49:04.201 ShopMonkey [524:207] -JSONRepresentation 失败。错误跟踪是：（空）
> 
> 2012-07-06 11:49:04.201 ShopMonkey[524:207] myJSONString：{“密码”：“111”，“用户名”：“管理员”}
> 
> 2012-07-06 11:49:04.201 ShopMonkey[524:207] myJSONData:<7b225061 7373776f 7264223a 22313131 222c2255 7365726e 616d6522 3a226164 6d696e22 7d>
> 
> 2012-07-06 11:51:13.312 ShopMonkey[524:207] 回复：（空）
> 
> 2012-07-06 11:51:13.312 ShopMonkey[524:207] 错误：错误域=NSURLErrorDomain 代码=-1005“网络连接丢失。” UserInfo=0x6041370 {NSErrorFailingURLStringKey=http://192.168.1.192/ShopMonkeyService/ShopMonkey.svc/Validate, NSErrorFailingURLKey=http://192.168.1.192/ShopMonkeyService/ShopMonkey.svc/Validate, NSLocalizedDescription=网络连接丢失。, NSUnderlyingError =0x6043a90 "网络连接丢失。"}
> 
> 2012-07-06 11:51:13.312 ShopMonkey[524:207] 数据：（空）
> 
> 2012-07-06 11:51:13.313 ShopMonkey[524:207] 字符串：
> 
> 2012-07-06 11:51:13.313 ShopMonkey [524:207] -JSONValue 失败。错误跟踪是：（
> 
> ```
> "Error Domain=org.brautaset.JSON.ErrorDomain Code=11 \"Unexpected end of string\" UserInfo=0x6041b90 {NSLocalizedDescription=Unexpected 
> ```
> 
> 字符串结束}"
> 
> )
> 
> 2012-07-06 11:51:13.313 ShopMonkey[524:207] dic: (null)

谁能指出我出了什么问题。

在此先感谢维杰

查看我的错误详细信息

错误详情：

2012-07-06 16:54:37.416 ShopMonkey[1895:40b]-[CJSONSerializer serializeDictionary:]：无法识别的选择器发送到实例 0x4c03740

2012-07-06 16:54:37.417 ShopMonkey[1895:40b] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[CJSONSerializer serializeDictionary:]：无法识别的选择器发送到实例 0x4c03740”

***在第一次抛出时调用堆栈：

(

0 核心基础 0x00ec2be9 __exceptionPreprocess + 185

1 libobjc.A.dylib 0x010175c2 objc_exception_throw + 47

2核心基础0x00ec46fb-[NSObject（NSObject）不识别选择器：]+187

3 CoreFoundation 0x00e34366***转发***+966

4 核心基础 0x00e33f22 _CF_forwarding_prep_0 + 50

5 ShopMonkey 0x000030c5 -[ShopMonkeyViewController signinbtnclick] + 425

6 UIKit 0x0034fa6e-[UIApplication sendAction:to:from:forEvent:] + 119

7 UIKit 0x003de1b5-[UIControl sendAction:to:forEvent:] + 67

8 UIKit 0x003e0647-[UIControl（内部）_sendActionsForEvents:withEvent:] + 527

9 UIKit 0x003df1f4-[UIControl touchesEnded:withEvent:] + 458

10 UIKit 0x003740d1-[UIWindow_sendTouchesForEvent:] + 567

11 UIKit 0x0035537a -[UIApplication 发送事件：] + 447

12 UIKit 0x0035a732 _UIApplicationHandleEvent + 7576

13 图形服务 0x0177ca36 PurpleEventCallback + 1550

14 核心基础 0x00ea4064 **CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION** + 52

15 核心基础 0x00e046f7 __CFRunLoopDoSource1 + 215

16 核心基础 0x00e01983 __CFRunLoopRun + 979

17 核心基础 0x00e01240 CFRunLoopRunSpecific + 208

18 核心基础 0x00e01161 CFRunLoopRunInMode + 97

19 图形服务 0x0177b268 GSEventRunModal + 217

20 图形服务 0x0177b32d GSEventRun + 115

21 UIKit 0x0035e42e UIApplicationMain + 1160

22 商店猴子 0x000026d8 主 + 102

23 ShopMonkey 0x00002669 开始 + 53

)

在抛出“NSException”实例后调用终止

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:00:24.857

对于在 JSON 中按值传递的键，您应该朝这个方向发展..

```
 NSArray *keys = [NSArray arrayWithObjects:@"username", @"password", @"preference", @"uid", nil];
NSArray *objects = [NSArray arrayWithObjects:@"accuser", @"accpass", @"abc_region", @"100", nil];
NSDictionary *theRequestDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys];

NSURL *theURL = [NSURL URLWithString:@"http://url.com/request.php"];
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:theURL cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:10.0f];
[theRequest setHTTPMethod:@"POST"];

[theRequest setValue:@"application/json-rpc" forHTTPHeaderField:@"Content-Type"];
NSString *theBodyString = [[CJSONSerializer serializer] serializeDictionary:theRequestDictionary];
NSLog(@"%@", theBodyString);
NSData *theBodyData = [theBodyString dataUsingEncoding:NSUTF8StringEncoding];
// NSLog(@"%@", theBodyData);
[theRequest setHTTPBody:theBodyData];

NSURLResponse *theResponse = NULL;
NSError *theError = NULL;
NSData *theResponseData = [NSURLConnection sendSynchronousRequest:theRequest returningResponse:&theResponse error:&theError];
NSString *theResponseString = [[[NSString alloc] initWithData:theResponseData encoding:NSUTF8StringEncoding] autorelease];
NSLog(theResponseString);
NSDictionary *theResponseDictionary = [[CJSONDeserializer deserializer] deserialize:theResponseString];
NSLog(@"%@", theResponseDictionary);
NSString *theGreeting = [theResponseDictionary objectForKey:@"greeting"];
[self setValue:theGreeting forKey:@"greeting"]; 
```

只是检查..还有一件事你会从这里 找到这个文件**CJSONSerializer** [CJSONSerializer 文件路径](https://github.com/TouchCode/TouchJSON)

.....................

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:54:59.847

```
 NSURL *url = [NSURL URLWithString:@"http://alkjdlkjaflkdjflakjdf"];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url
                                                       cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0];

NSString *req;

    req = [NSString stringWithFormat:@"username=%@&pass=%@",userName,Password];

[request setHTTPMethod:@"POST"];
[request setHTTPBody: [req dataUsingEncoding:NSISOLatin1StringEncoding]];
NSURLConnection *connection = [[NSURLConnection alloc]initWithRequest:request delegate:self];
[connection start];

if (connection) {
    receivedData = [[NSMutableData alloc]initWithLength:0]; // an ivar of type NSMutableData
} else {

    UIAlertView *failAlert = [[UIAlertView alloc]initWithTitle:@"" message:@"Could Not Connect" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [failAlert show];
} 
```

现在使用以下委托来处理请求

```
-(void)connection:(NSURLConnection*)connection didReceiveData:(NSData *)data
{

    [receivedData appendData:data];

}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{

receivedData = nil;

UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"" message:[NSString stringWithFormat:@"%@",error.localizedDescription] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
[alert show];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection{

    [self performSelector:@selector(getData:) withObject:receivedData afterDelay:0];

} 
```

现在您必须解析上面调用的 getData 函数中的数据

```
-(void)getData:(NSData*)response{
NSError *erro;

SBJSON *parse                               =           [[SBJSON alloc]init]; 
// have to include SBJSON lib else you can use the inbuild NSJSONSerialization

NSString *jsonString                        =           [[NSString alloc] initWithData:response
                                                                              encoding:NSUTF8StringEncoding]; 

NSDictionary *jsonData                      =           [parse objectWithString:jsonString error:&erro];
NSArray *allEvents                          =           [jsonData objectForKey:@"Your_OBJECT"];

  if(![allEvents isKindOfClass:[NSNull class]] && [allEvents count] > 0)
  {

 // now do what you want with the data   

  }
} 
```

# gwt - 具有服务器端依赖项的 GWT maven 项目

> ID：11359594
> 
> 赞同：1
> 
> 时间：2012-07-06T09:33:28.887
> 
> 标签：gwt, maven, jasper-reports, conflict

我在eclipse下有一个maven GWT项目，因为我添加了一些服务器端依赖项，所以maven插件不再编译。以下是有关上下文的更多信息：

*   行家3.0.3；
*   GWT 1.5.3；
*   GWT maven 插件 org.codehaus.mojo:gwt-maven-plugin:1.2（与 GWT 1.5.3 兼容的最新版本， http: [//mojo.codehaus.org/gwt-maven-plugin-1.2/](http://mojo.codehaus.org/gwt-maven-plugin-1.2/)）。

如果我不添加 GWT 以外的依赖项，GWT maven 插件的目标 gwt:compile 将成功完成：

```
<dependency>
    <groupId>com.google.gwt</groupId>
    <artifactId>gwt-servlet</artifactId>
    <version>${gwt.version}</version>
    <scope>compile</scope>
</dependency>
<dependency>
    <groupId>com.google.gwt</groupId>
    <artifactId>gwt-user</artifactId>
    <version>${gwt.version}</version>
    <scope>provided</scope>
</dependency> 
```

当我添加任何其他依赖项时，目标 gwt:compile 失败：

```
[INFO] establishing classpath list (scope = compile)
[ERROR] Exception in thread "main" java.lang.NoSuchMethodError: org.eclipse.jdt.internal.compiler.Compiler.<init>(Lorg/eclipse/jdt/internal/compiler/env/INameEnvironment;Lorg/eclipse/jdt/internal/compiler/IErrorHandlingPolicy;Lorg/eclipse/jdt/internal/compiler/impl/CompilerOptions;Lorg/eclipse/jdt/internal/compiler/ICompilerRequestor;Lorg/eclipse/jdt/internal/compiler/IProblemFactory;)V
[ERROR]     at com.google.gwt.dev.javac.JdtCompiler$CompilerImpl.<init>(JdtCompiler.java:93)
[ERROR]     at com.google.gwt.dev.javac.JdtCompiler.<init>(JdtCompiler.java:231)
[ERROR]     at com.google.gwt.dev.javac.JdtCompiler.compile(JdtCompiler.java:193)
[ERROR]     at com.google.gwt.dev.javac.CompilationState.compile(CompilationState.java:115)
[ERROR]     at com.google.gwt.dev.GWTCompiler.distill(GWTCompiler.java:327)
[ERROR]     at com.google.gwt.dev.GWTCompiler.run(GWTCompiler.java:564)
[ERROR]     at com.google.gwt.dev.GWTCompiler.run(GWTCompiler.java:554)
[ERROR]     at com.google.gwt.dev.GWTCompiler.main(GWTCompiler.java:214) 
```

我确实在 gwt:compile (http://mojo.codehaus.org/gwt-maven-plugin-1.2/compile-mojo.html) 中搜索了有关类路径/依赖项的配置参数，但没有成功。

我想与 GWT 一起使用服务器端依赖项，告诉 GWT 插件不要考虑非 GWT 依赖项。

* * *

工作 pom (gwt:compile 成功完成):

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>mygroupid</groupId>
    <artifactId>projectname</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>project name</name>

    <organization>
        <name>My company</name>
        <url>my company url</url>
    </organization>

    <properties>
        <gwt.version>1.5.3</gwt.version>
    </properties>

    <build>
        <finalName>final name</finalName>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                    <encoding>UTF-8</encoding>
                </configuration>
                <version>2.5.1</version>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <configuration>
                    <ajdtVersion>none</ajdtVersion>
                </configuration>
                <version>2.9</version>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>gwt-maven-plugin</artifactId>
                <version>1.2</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <runTarget>org.mycompany.myproject.Main/welcomeGWT.html</runTarget>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <warSourceDirectory>war</warSourceDirectory>
                    <webXml>src/main/webapp/WEB-INF/web.xml</webXml>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <!-- GWT -->
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-servlet</artifactId>
            <version>${gwt.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
            <version>${gwt.version}</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
</project> 
```

不工作的pom（gwt：编译抛出异常）：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>mygroupid</groupId>
    <artifactId>projectname</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>project name</name>

    <organization>
        <name>My company</name>
        <url>my company url</url>
    </organization>

    <properties>
        <gwt.version>1.5.3</gwt.version>
    </properties>

    <build>
        <finalName>final name</finalName>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                    <encoding>UTF-8</encoding>
                </configuration>
                <version>2.5.1</version>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <configuration>
                    <ajdtVersion>none</ajdtVersion>
                </configuration>
                <version>2.9</version>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>gwt-maven-plugin</artifactId>
                <version>1.2</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <runTarget>org.mycompany.myproject.Main/welcomeGWT.html</runTarget>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <warSourceDirectory>war</warSourceDirectory>
                    <webXml>src/main/webapp/WEB-INF/web.xml</webXml>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>org.apache.ibatis</groupId>
            <artifactId>ibatis-sqlmap</artifactId>
            <version>2.3.4.726</version>
        </dependency>
        <dependency>
            <groupId>net.sf.jasperreports</groupId>
            <artifactId>jasperreports</artifactId>
            <version>3.6.0</version>
        </dependency>

        <!-- GWT -->
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-servlet</artifactId>
            <version>${gwt.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
            <version>${gwt.version}</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
 </project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:19:53.003

您在我们的项目中使用 JasperReport 吗？我记得在使用 JasperReport 和 GWT 时遇到了问题。JasperReport 包含与 `org.eclipse.jdt.internal.compiler.Compiler`GWT 预期不同的版本。

我认为您可以通过简单地更改类路径的顺序来解决此问题（已在评论中建议）。如果这没有帮助，请尝试更新您的 GWT 版本。或者尝试查找 JasperReport 的版本，其中包含`org.eclipse.jdt.internal.compiler.Compile`与 GWT 一起使用的类的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-03T19:33:18.457

**在部署我们的 Web 应用程序期间，我在 QA Linux**环境中遇到了类似的错误，我们设法修复了它。当我部署到本地**Windows 10**和**Linux Ubuntu**虚拟机中时，甚至不存在这个问题。我的环境配置如下

1.  **Ubuntu 16.04 LTS**
2.  **阿帕奇 Maven 3.3.3**
3.  **Apache Tomcat/8.0.32 (Ubuntu)**
4.  **JVM 1.8.0_91-8u91-b14-0ubuntu4~16.04.1-b14**

问题是因为在两个不同的 jar 文件中发现了两个 eclipse Compiler 类，这会在 tomcat 部署期间在类路径中产生冲突。罪魁祸首是文件 ecj.jar 和 jdtcore.jar

我原来的 pom.xml 片段如下

```
 <dependency>
        <groupId>org.drools</groupId>
        <artifactId>drools-compiler</artifactId>
        <version>6.3.0.Final</version>
    </dependency>       
    <dependency>
        <groupId>net.sourceforge.dynamicreports</groupId>
        <artifactId>dynamicreports-core</artifactId>
        <version>3.1.3</version>
    </dependency> 
```

1.  drools-compiler的**Maven**依赖树引入了 ecj.jar 文件。
2.  具有 jasperreports.jar 的 dynamicreports-core.jar 文件的**Maven依赖项又引入了 jdtcore.jar 文件。**

**解决方案：**

我们升级了引入 jasperreports.jar 文件的 dynamicreports-core 版本。

**注意：我在阅读**[http://www.cnblogs.com/xiaoMzjm/p/4566672.html](http://www.cnblogs.com/xiaoMzjm/p/4566672.html) 后能够解决这个问题。归功于这位博主。

```
 <dependency>
        <groupId>net.sourceforge.dynamicreports</groupId>
        <artifactId>dynamicreports-core</artifactId>
        <version>4.1.0</version>
    </dependency> 
```

# c# - 使用 webclient (cookieaware) 登录论坛失败

> ID：11359597
> 
> 赞同：0
> 
> 时间：2012-07-06T09:33:41.393
> 
> 标签：c#, login, md5, webclient, forum

我尝试使用 c# webclient 登录论坛以获取用户相关信息我的问题是登录失败我尝试通过帖子提交所有需要的数据

我的实际代码：

```
 var url = new Uri("http://www.hardwareluxx.de/community/");
        string user = Properties.Resources.username;
        string pass = Properties.Resources.password;
        var client = new CookieAwareWebClient();
        client.BaseAddress = @"http://www.hardwareluxx.de/community/";

        var document = new HtmlDocument();
        document.Load(new MemoryStream(client.DownloadData("index.php")));

        postData = new NameValueCollection();

        postData.Add("vb_login_username", user);
        postData.Add("cookieuser", "1");
        postData.Add("vb_login_password", "");
        postData.Add("s", "");
        postData.Add("securitytoken", "guest");
        postData.Add("do", "login");
        postData.Add("vb_login_md5password", GetMd5Hash(pass));
        postData.Add("vb_login_md5password_utf", GetMd5Hash(pass));

        document.Load(new MemoryStream(client.UploadValues(url + "login.php?do=login", postData))); 
```

和一个小的帮助方法来获取登录所需的 md5 哈希：

```
public static string GetMd5Hash(string TextToHash)
    {
        //Prüfen ob Daten übergeben wurden.
        if (string.IsNullOrEmpty(TextToHash))
        {
            return string.Empty;
        }

        //MD5 Hash aus dem String berechnen. Dazu muss der string in ein Byte[]
        //zerlegt werden. Danach muss das Resultat wieder zurück in ein string.
        MD5 md5 = new MD5CryptoServiceProvider();
        byte[] textToHash = Encoding.Default.GetBytes(TextToHash);
        byte[] result = md5.ComputeHash(textToHash);

        return BitConverter.ToString(result);
    } 
```

以及存储 cookie 的网络客户端：

```
public class CookieAwareWebClient : WebClient
{
    private readonly CookieContainer _cookie = new CookieContainer();

    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest request = base.GetWebRequest(address);
        if (request is HttpWebRequest)
        {
            (request as HttpWebRequest).CookieContainer = _cookie;
        }
        return request;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:37:31.937

您应该使用 request.Credentials 将凭据传递给 HttpWebRequest 实例

```
public class CookieAwareWebClient : WebClient
{
  private readonly CookieContainer _cookie = new CookieContainer();
  private string userName;
  private string password;

  public CookieAwareWebClient(string user, string pass) 
  {
    userName = user;
    password = pass; 
  }

  protected override WebRequest GetWebRequest(Uri address)
  {
    WebRequest request = base.GetWebRequest(address);

    if (!string.IsNullOrEmpty(userName)) 
    {
      request.Credentials = new NetworkCredential(userName, password);
    }

    if (request is HttpWebRequest)
    {
      (request as HttpWebRequest).CookieContainer = _cookie;
    }

    return request;
  }
} 
```

```
string user = Properties.Resources.username;
string pass = Properties.Resources.password;

var client = new CookieAwareWebClient(user, pass);
```

# android - 加载android webview的最简单方法

> ID：11359598
> 
> 赞同：1
> 
> 时间：2012-07-06T09:33:42.790
> 
> 标签：android

加载android webview的最简单方法是什么？

我已经在活动布局中指定了 webview，如何在运行模拟器时在其上加载网站。我遇到了很多资源未识别的问题，而 main_activity.out.xml 文件一直给我带来麻烦。一个简单的 webview 来加载网页会很好。

...

```
<WebView
    android:id="@+id/webView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:13:55.857

你得到`main_activity.out.xml`是因为你试图编译 Xml 文件（main_activity.out.xml 有焦点，你点击了运行）。一般来说，如果发生此错误，您必须

1.  删除 xxx.out.xml
2.  通过双击文件打开 src/ 中的任何 .java 文件，使其具有焦点并且光标在那里
3.  运行你的项目，现在一切都应该好了

要加载 WebView，您必须在 xml 中声明您的 webview 组件

```
<WebView
    android:id="@+id/myWebView"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

然后在你的活动中 onCreate() 方法调用

```
// get reference to your view
WebView webview = (WebView)findViewById(R.id.myWebView);
// load your WebView content
webview.loadUrl("http://google.com/"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:35:53.627

最简单的方法？

通过以下方式访问 WebView

```
WebView webview = (WebView)findViewById(R.id.webView1);
webview.loadUrl("http://stackoverflow.com/"); 
```

问候弗洛

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:35:55.700

main_activity.out.xml 已创建可能是因为您在打开 main_activity.xml 时按下了 Eclipse 上的运行按钮。Eclipse 试图编译您的 xml 而不是您的应用程序。

为此，请尝试在左侧的项目资源管理器中选择应用程序的引用，然后单击“运行”按钮。

为了在你的 android 项目中管理最好的 webview，只需阅读文档：

[http://developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)

# c# - 如何使用 MongoDB 作为唯一/枚举存储

> ID：11359599
> 
> 赞同：1
> 
> 时间：2012-07-06T09:33:43.740
> 
> 标签：c#, mongodb, enumeration, bigdata

这似乎是一个常见的用例......但不知何故我无法让它工作。

我正在尝试将 MongoDB 用作具有唯一项的枚举存储。我创建了一个带有 byte[] Id（唯一 ID）和时间戳（长，用于枚举）的集合。该存储非常大（TB）并且分布在不同的服务器之间。我目前能够从头开始重建商店，因为我仍处于测试阶段。

我想做的是两件事：

1.  为我插入的每个项目创建一个唯一的 ID。这基本上意味着如果我两次插入相同的 ID，MongoDB 将检测到这一点并给出错误。这种方法似乎工作正常。
2.  通过其他进程不断枚举商店中的新商品。我采用的方法是向 InsertID 添加第二个索引，并在其上使用高精度时间戳以及服务器 id 和计数器（只是为了使其唯一和升序）。

在最好的情况下，这意味着枚举器将跟踪每个服务器的索引游标。根据我从 mongodb 查询处理中学到的知识，我期望这种行为。但是，当我尝试执行代码（如下）时，似乎需要很长时间才能得到任何东西。

```
 long lastid = 0;
        while (true)
        {
            DateTime first = DateTime.UtcNow;
            foreach (var item in collection.FindAllAs<ContentItem>().OrderBy((a)=>(a.InsertId)).Take(100))
            {
                lastid = item.InsertId;
            }
            Console.WriteLine("Took {0:0.00} for 100", (DateTime.UtcNow - first).TotalSeconds);
        } 
```

我读过游标，但不确定它们是否满足将新项目插入商店时的要求。

正如我所说，我不受任何表结构或类似结构的约束......唯一重要的是我可以随着时间的推移获得新项目而不会获得重复项目。

-斯特凡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:54:40.383

不知怎的，我想通了...或多或少...

我手动创建了查询，结果如下：

> db.documents.find({ "InsertId" : { "$gt" : NumberLong("2020374866209304106") } }).limit(10).sort({ "InsertId" : 1 });

我在问题中提出的 LINQ 查询不会生成此查询。在对代码进行一些挖掘之后，我发现它应该是这个 LINQ 查询：

> foreach (var item in collection.AsQueryable().Where((a)=>(a.InsertId > lastid)).OrderBy((a) => (a.InsertId)).Take(100))

AsQueryable() 似乎是执行 LINQ to MongoDB 查询重写的关键。

这给出了结果，但它们似乎仍然很慢（10 个结果为 4 秒，100 个结果为 30 秒）。但是，当我添加“解释（）”时，我注意到查询执行中的“0 毫秒”。

我停止了批量插入和 tada 的过程，它可以工作，而且速度很快。换句话说：我遇到的问题是由于 MongoDB 的锁定行为，以及我解释 linq 实现的方式。由于前者是初始批量填充数据存储的结果，这意味着问题已解决。

在解决方案的“负面”部分：我更喜欢涉及可序列化游标或类似内容的解决方案......这个“采取”解决方案必须一遍又一遍地迭代 b-tree。如果有人对此有答案，请告诉我。

-斯特凡。

# raphael - 拉斐尔正在添加一个“dy”属性

> ID：11359600
> 
> 赞同：7
> 
> 时间：2012-07-06T09:33:44.850
> 
> 标签：raphael

我正在用 raphael 创建一个图像，它生成的 SVG`for paper.text()`添加了一个`<tspan dy="number">` “数字”是基于 Attr(font-size:n) 的数字

有人可以告诉我这个数字是如何计算的，因为我需要知道，因为我使用什么将序列化数据发送到服务器`toJSON()`（用于 raphael 的第 3 方插件，称为 ElbertF / Raphael.JSON）并在服务器上重新创建 SVG 文本总是由此而出`dy="number"`

该`dy`值似乎也与文本的`y`属性相关联，就好像我将值四舍五入一样，`y`该`dy`值也被四舍五入到最接近的 0.5

例如：

```
textEmement = paper.text(Math.round(x_positionOfText),
                                                    Math.round(y_positionOfText));
textEmement.attr({ "font": "",
                   "fill": fontColour,
                   "font-family": "Arial",
                   "text-anchor": "middle",
                   "font-size": 17}); 
```

使->

```
<text style="text-anchor: middle; font-family: Arial; font-size: 17px;" x="161" y="48" text-anchor="middle" font="" stroke="none" fill="#ffffff" font-family="Arial" font-size="17px">
<tspan dy="5.5">Text 3</tspan>
 </text> 
```

`Math.round()`从`y_positionOfText`品牌中移除

```
 <text style="text-anchor: middle; font-family: Arial; font-size: 17px;" x="161" y="48.188976378525" text-anchor="middle" font="" stroke="none" fill="#ffffff" font-family="Arial" font-size="17px">
 <tspan dy="5.501476378524998">Text 3</tspan>
 </text> 
```

注意`y="48"`给予`dy="5.5"` 但`y="48.188976378525"`给予`dy="5.501476378524998"`

这要杀了我！拉斐尔为什么要这样做，怎么做！？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T12:49:04.527

每当我需要了解库的工作原理时，我都会阅读源代码。现在鉴于我没有写 Raphael，我无法确切告诉你为什么 tspan 会这样创建，但我当然可以告诉你如何：

```
var bb = el._getBBox(),
    dif = a.y - (bb.y + bb.height / 2);
dif && R.is(dif, "finite") && $(tspans[0], {dy: dif}); 
```

据推测，这正在解决锚定问题。它正在移动文本，以便 tspan 的中点与 y 属性对齐。

它是通过检查 y 属性和文本中间位置（边界框顶部加上一半高度）之间的差异来计算的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-13T11:49:42.843

使用 raphael + Backbone 时，我遇到了类似的问题。我[在 git hub 上发现了这个问题](https://github.com/DmitryBaranovskiy/raphael/issues/491)。就我而言，根本原因是我在使用 Paper.text 时正在对未附加到 DOM 的视图进行操作。正如问题中所解释的，这导致 Raphael 相信边界框没有高度。结合 Matt Esch 的回答，这导致将 dy 调整为等于 y。作为一种解决方法，您可以尝试将元素附加到 DOM 以进行绘图。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-18T02:44:05.490

我有类似的问题，我通过改变来解决它

```
var bb = el._getBBox(),
    dif = a.y - (bb.y + bb.height / 2);
dif && R.is(dif, "finite") && $(tspans[0], {dy: dif}); 
```

有了这个：

```
var bb = el._getBBox(),
    dif = a.y - (bb.y + bb.height / 2);
dif && R.is(dif, "finite") && $(tspans[0], {dy: [0]}); 
```

**将dy: dif**更改为**dy: [0]**

THX 给 Matt Esch 的建议

# javascript - HTML5/Canvas 闪烁动画

> ID：11359601
> 
> 赞同：2
> 
> 时间：2012-07-06T09:33:46.167
> 
> 标签：javascript, html, canvas

我读过[HTML5/Canvas 是否支持双缓冲？](https://stackoverflow.com/questions/2795269/does-html5-canvas-support-double-buffering)*和相关问题，我使用双缓冲，但有时*它没有帮助。实际上我使用另一种方式进行双缓冲，但它有同样的问题。

```
function drawLoop() {
    var scr_context = scr.getContext('2d'); // main canvas
    var units_context = units_buffer.getContext('2d'); // units buffer
    var unitcolors_context = unitcolors_buffer.getContext('2d'); // units color buffer
    var i;

    // background
    scr_context.fillStyle = "#FFFFEE";
    scr_context.fillRect(0, 0, scr.width, scr.height);

    units_context.clearRect(0, 0, units_buffer.width, units_buffer.height);
    unitcolors_context.clearRect(0, 0, unitcolors_buffer.width, unitcolors_buffer.height);

    for (i = 0; i < units_list.length; i++) {
        units_list[i].draw(units_context, camera); // flicker some times
        units_list[i].drawColor(unitcolors_context, camera); // never flicker
    }

    scr_context.drawImage(unitcolors_buffer, 0, 0);
    scr_context.drawImage(units_buffer, 0, 0);

    drawTimer = setTimeout(drawLoop, 1000 / FPS);
} 
```

绘制方法：

```
this.draw = function(context, camera) {
    var sprite;
    var drawCoordinates;
    sprite = this.sloader.getSpriteByName(this.spritePos.spriteName);
    drawCoordinates = sprite.getDrawCoordinatesByXY(this.spritePos.x, this.spritePos.y, camera);
    context.drawImage(sprite.getImage(), drawCoordinates.x, drawCoordinates.y);
    return;
}
this.drawColor = function(context, camera) {
    var sprite;
    var drawCoordinates;
    sprite = this.sloader.getSpriteByName(this.spritePos.spriteName);
    drawCoordinates = sprite.getDrawCoordinatesByXY(this.spritePos.x, this.spritePos.y, camera);
    context.putImageData(this.unitMarkBackground, drawCoordinates.x + 21, drawCoordinates.y + 17);
    return;
} 
```

不知道闪烁在几乎相同的代码中如何发生或从不发生，相同的缓冲。我已经在 Chrome 20 和 FireFox 13 中对其进行了测试，两者都有相同的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:33:30.750

你不需要双缓冲，它已经被浏览器的引擎实现了。只需在 scr_context 上绘制所有内容，并在任何其他绘图之前保持`scr_context.fillRect()`在上面。`drawLoop()`你确定`getDrawCoordinatesByXY()`总是返回屏幕值吗？

# ios - 如何在 OCUnit 上模拟 UIApplication、委托、窗口进行逻辑测试？

> ID：11359602
> 
> 赞同：3
> 
> 时间：2012-07-06T09:33:51.067
> 
> 标签：ios, mocking, uiapplication

看下面的代码，我需要在逻辑测试中做mock，难点是[UIApplication sharedApplication]总是返回nil，各位聪明人是怎么解决这个问题的呢？谢谢你。

```
 UIWindow* root = [UIApplication sharedApplication].delegate.window;
    UIWebView *aWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 0, 0)];
    [aWebView setDelegate:tracker];
    [aWebView loadRequest:request];
    [root addSubview:aWebView];
    [aWebView release], aWebView = nil; 
```

# javascript - 通过 ExtJs 添加校验列

> ID：11359603
> 
> 赞同：0
> 
> 时间：2012-07-06T09:33:51.457
> 
> 标签：javascript, extjs

我有一个标签面板，想添加`GridPanel`一个标签。
在这个 gridPanel 中，我有几个列，其中一个列将包含复选框。但我不能添加这个。我这样做。

```
 xtype: 'checkcolumn',
        header: '',
        dataIndex: 'indoor',
        width: 50 
```

在 FireBug 中得到这个

```
l is not a constructor

...ng(this.enableUrlEncode)?this.enableUrlEncode:"data"]=Ext.encode(h);k.params=l}e...

ext-al...9641744 (line 1) 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-27T13:20:45.643

是的，您需要将该文件包含在您的页面中。只需下载它并将其放置在这样的地方

```
<script src="/Libraries/Ext/ux/checkcolumn.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:40:32.987

没有命名类型`checkcolumn`，可以改成`checkboxfield`. 希望它可以帮助你:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:36:35.280

尝试这个

```
 xtype: 'checkboxfield',
    header: '',
    dataIndex: 'indoor',
    width: 50 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T01:18:44.057

在开头设置 Ext ux 路径。或者在脚本的 Ext ux 文件夹中包含“CheckColumn.js”。有用！

# android - 按下后退按钮时在 Fragments 中停止 AsyncTask

> ID：11359604
> 
> 赞同：0
> 
> 时间：2012-07-06T09:34:04.220
> 
> 标签：android

我有一个托管片段的活动。按下按钮通过 FragmentTransaction 从片段 A 到片段 B 并添加到后台堆栈。现在片段 B 有一个 AsyncTask 实现，它从 sdcard 加载图像并在加载图像时发布它。如果我按下返回按钮，我的应用程序会崩溃。. 错误报告表明异步任务是问题，因为按下后退按钮时它仍在加载，所以我的问题是，当按下后退按钮返回到上一个时，我该如何或应该在哪里停止 AsyncTask片段/活动？...谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-06T09:39:19.683

覆盖片段的 onStop() 并执行以下操作：

```
protected void onStop() {
    super.onStop();

    //check the state of the task
    if(task != null && task.getStatus() == Status.RUNNING)
        task.cancel(true);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T09:39:37.120

[只需在托管活动的onBackPressed()](http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29)方法中调用此代码- 同样适用于通过[onDestroy()](http://developer.android.com/reference/android/support/v4/app/Fragment.html#onDestroy%28%29)的片段：

```
if(myFancyAsyncTask != null && myFancyAsyncTask.getStatus() == Status.RUNNING) {
  myFancyAsyncTask.cancel(true);
} 
```

这将为您取消正在运行的 AsyncTask。如果没有使用生命周期方法取消，请务必检查 AsyncTask：

```
protected void onPostExecute(Long result) {
     if(!isCancelled()) {
       // do your work
     }
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T09:47:19.947

我强烈建议您查看片段的[这个](http://developer.android.com/reference/android/app/Fragment.html#Lifecycle)生命周期以避免将来的混淆。在你的情况下，我认为你应该重写 onPause 方法来顶部 asyncTask。

```
 @Override
protected void onPause() {
    super.onPause();
     //check the state of the task
    if(task != null && task.getStatus() == Status.RUNNING)
       task.cancel(true);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-25T17:13:26.717

在 onStop() 中取消 AsyncTask 不是一个很好的选择，因为它可以在您希望 AsyncTask 继续运行的情况下停止它。想象一下，您有一个片段/活动，其中显示了从网络下载的几张图像，并且点击图像应该将用户带到另一个特定于图像的应用程序。这将使您的片段点击 onStop() 并取消您的 AsyncTask，即使当用户返回活动时可能仍有您想要下载的图像。我认为在 onDestroy() 中这样做是一个更好的选择。

```
@Override
public void onDestroy() {
    super.onDestroy();

    if(doTask != null){
        doTask.cancel(true);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-22T07:41:48.747

```
 AsyncTaskRunner doAsynchronousTask; //Before onCreateView

//in onCreateView() 
    doAsynchronousTask = new AsyncTaskRunner();``
    doAsynchronousTask.execute();

// after  onCreateView()
    @Override
    public void onStop() {
        super.onStop();
        doAsynchronousTask.cancel(true);
    } 
```

# spring - 了解基本的 Spring Framework 和 Total Flow

> ID：11359607
> 
> 赞同：9
> 
> 时间：2012-07-06T09:34:13.990
> 
> 标签：spring, spring-3, springsource, spring2.x

我是 Spring 框架的新手。请指导我对Spring的基本了解。我知道 Java 和 JSF，但我对 Struts 或其他框架一无所知。我已经在互联网上搜索并能够下载PDF，但是我不了解Spring流程，就像我了解JSF流程一样。请为我提供了解 Spring 流程的简单方法的链接。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-23T09:43:20.993

*   过渡 1 – 用户通过提交表单/单击超链接等方式向服务器发送请求。请求最初被提供给 WEB.XML。
*   过渡 2 – WEB.XML 通过查看标记将请求路由到 DispatcherServlet。
*   过渡 3 - 在 DispatcherServlet 内部，首先“HandlerMapping”将请求移交给合适的“控制器”。
*   过渡 4 - 控制器将请求映射到适当的模型类。所有业务逻辑都在 Model 类中完成。
*   过渡 5 – 如果需要数据库操作，那么 Model 类会将请求路由到合适的 DAO。所有的数据库操作都应该在 DAO 中进行。
*   Transition6 – 如果需要，则将属性附加到请求/会话/应用程序范围并返回给模型。
*   过渡 7 - 如果需要，则将属性附加到请求/会话/应用程序范围并返回给控制器。
*   过渡 8 - 控制器简单地将其返回给任何视图（JSP/HTML 等）。
*   过渡 9 – JSP/Html 被查看回给用户。

[Spring MVC 应用程序流程：](http://www.java4s.com/spring-mvc/spring-mvc-execution-flow-diagram-spring-mvc-3-2-flow/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T09:37:30.087

我也是 Spring 框架的新手。到目前为止，下面的文档是最基本的文档。我也在读，希望对你有帮助。

[Spring框架介绍](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/overview.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T21:59:54.387

我也是 Spring 新手，前段时间也有类似的问题。首先，我想向您推荐 Craig Walls 的“Spring in Action”一书，我发现它非常有用且易于理解，而且 [http://www.tutorialspoint.com/spring/](http://www.tutorialspoint.com/spring/)帮助我解决了很多问题。如果我对您的问题的理解正确，那么我们可以将“Spring 的流程”分为 Spring IoC 容器和 Spring bean 的生命周期。这是关于 Spring bean 生命周期的示例的非常小的概述。一个 bean 在 Spring 容器中经历了创建和销毁之间的几个步骤。这些步骤是：

1.  实例化
2.  填充属性
3.  BeanNameAware 的 setBeanName()
4.  BeanFactoryAware 的 setBeanFactory
5.  ApplicationContextAware 的 setApplicationContext()
6.  预初始化 BeanPostProcessors
7.  InitializingBean 的 afterPropertiesSet()
8.  调用自定义初始化方法
9.  初始化后的 BeanPostProcessors
10.  DisponsableBean 的销毁
11.  调用自定义销毁方法

每个步骤都提供了自己的定制机会。下面是一些简单地“追踪” bean 生命的代码：

对于豆类A：

```
public class ClassA implements InitializingBean, DisposableBean, BeanNameAware, BeanFactoryAware, ApplicationContextAware{

    private String messageA;

    public ClassA() {
        System.out.println("ClassA: default constructor called.");
    }

    public void customInitMethod(){
        System.out.println("ClassA: customInitMethod() method called.");
    }

    public void customDestroyMethod(){
        System.out.println("ClassA: customDestroyMethod() method called.");

    }

    public String getMessageA() {
        System.out.println("ClassA: message get method called.");
        return messageA;
    }

    public void setMessageA(String message) {
        System.out.println("ClassA: message set method called.");
        this.messageA = message;
    }

    public void afterPropertiesSet() throws Exception {
        System.out.println("ClassA: afterPropertiesSet() called because InitializingBean interface.");
    }

    public void destroy() throws Exception {
        System.out.println("ClassA: destroy() called because DisposableBean interface.");
    }

    public void setApplicationContext(ApplicationContext arg0)
            throws BeansException {
        System.out.println("ClassA: application context set: " + arg0.getApplicationName());
    }

    public void setBeanFactory(BeanFactory arg0) throws BeansException {
        System.out.println("ClassA: beanFacrory set.");
    }

    public void setBeanName(String arg0) {
        System.out.println("ClassA: bean name set: " + arg0);
    }

}public class ClassA implements InitializingBean, DisposableBean, BeanNameAware, BeanFactoryAware, ApplicationContextAware{

    private String messageA;

    public ClassA() {
        System.out.println("ClassA: default constructor called.");
    }

    public void customInitMethod(){
        System.out.println("ClassA: customInitMethod() method called.");
    }

    public void customDestroyMethod(){
        System.out.println("ClassA: customDestroyMethod() method called.");

    }

    public String getMessageA() {
        System.out.println("ClassA: message get method called.");
        return messageA;
    }

    public void setMessageA(String message) {
        System.out.println("ClassA: message set method called.");
        this.messageA = message;
    }

    public void afterPropertiesSet() throws Exception {
        System.out.println("ClassA: afterPropertiesSet() called because InitializingBean interface.");
    }

    public void destroy() throws Exception {
        System.out.println("ClassA: destroy() called because DisposableBean interface.");
    }

    public void setApplicationContext(ApplicationContext arg0)
            throws BeansException {
        System.out.println("ClassA: application context set: " + arg0.getApplicationName());
    }

    public void setBeanFactory(BeanFactory arg0) throws BeansException {
        System.out.println("ClassA: beanFacrory set.");
    }

    public void setBeanName(String arg0) {
        System.out.println("ClassA: bean name set: " + arg0);
    }

} 
```

对于 CustomPostProcessor：

```
public class CustomPostProcessor implements BeanPostProcessor {

    public Object postProcessBeforeInitialization(Object bean, String beanName)
            throws BeansException {
        System.out.println("CustomPostProcessor: beforeInitialization on: "
                + beanName);
        return bean;
    }

    public Object postProcessAfterInitialization(Object bean, String beanName)
            throws BeansException {
        System.out.println("CustomPostProcessor: afterInitialization on: "
                + beanName);
        return bean;
    }

} 
```

在主类中，我们创建 ApplicationContext，获取 bean 并打印消息：

```
public static void main(String[] args) {
        AbstractApplicationContext context = new ClassPathXmlApplicationContext(
                "META_INF/spring/app-context.xml");

        ClassA objA = (ClassA) context.getBean("classA");

        System.out.println(objA.getMessageA());

        context.registerShutdownHook();
    } 
```

在 app-context.xml 我们有：

```
<bean id="classA" class="ClassA" init-method="customInitMethod"
        destroy-method="customDestroyMethod">
    <property name="messageA" value="messagA: Hello Spring!" />
</bean>

<bean class="CustomPostProcessor" /> 
```

据我了解，输出线以这种方式对应于生命周期阶段：

*   1.实例化

ClassA：调用的默认构造函数。

*   2.填充属性

ClassA：被调用的消息集方法。

*   3.BeanNameAware的setBeanName()

ClassA：bean名称集：classA

*   4.BeanFactoryAware的setBeanFactory

ClassA：beanFacrory 集。

*   5.ApplicationContextAware的setApplicationContext()

ClassA：应用上下文集：

*   6.预初始化BeanPostProcessors

CustomPostProcessor: beforeInitialization on: classA

*   7.InitializingBean 的 afterPropertiesSet()

ClassA：afterPropertiesSet() 调用是因为 InitializingBean 接口。

*   8.调用自定义init-method

ClassA：调用 customInitMethod() 方法。

*   9.Post-initialization BeanPostProcessors

CustomPostProcessor：在初始化后：classA

*   程序打印消息

ClassA：被调用的消息获取方法。messageA：春天你好！

*   10.DisponsableBean的销毁

ClassA：destroy() 调用是因为 DisposableBean 接口。

*   11.调用自定义销毁方法

ClassA：调用 customDestroyMethod() 方法。

# webdriver - 排除组不适用于构造函数

> ID：11359610
> 
> 赞同：0
> 
> 时间：2012-07-06T09:34:21.567
> 
> 标签：webdriver, testng, surefire

由于我的设置不断增长，我想使用 TestNG 的更多功能。所以今天我试图在我的 testng.xml 文件中排除一个 groud。

当我将整个类声明为组的一部分时，这不会阻止构造函数完成它的工作（启动 WebDriver 实例）。

```
@Test(groups = "default")
public class ABCDefaultTest extends AbstractABCTest {

    public ABCDefaultTest() {
        super();
    }

} 
```

请注意：AbstractABCTest 是“abc”组的一部分

我想在 AfterClass 方法中退出 WebDriver 并添加 (alwaysRun = true) 但这不起作用。

似乎构造函数不是组的一部分（如果您在一个类中有不同的组，这很好）但是 @AfterClass (alwaysRun = true) 注释的方法是......

但是，如果只有为课程指定的组而没有部分组，那么启动课程是没有意义的，对吧？

你能告诉我我做错了什么或者这是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:54:10.137

您的解释是正确的，组仅适用于 TestNG 注释方法。如果一个组被排除在外，你应该避免在构造函数中做你不希望发生的工作。

在属于该组的 @Before* 方法中执行这项工作怎么样？然后您只需要决定哪种配置方法适合您：@BeforeSuite、@BeforeTest、@BeforeGroup 或@BeforeClass。

# vim - 用于打开标准 Rails 文件夹的 VIM NERDTree 快捷方式

> ID：11359612
> 
> 赞同：1
> 
> 时间：2012-07-06T09:34:31.457
> 
> 标签：vim, macvim, nerdtree

我刚刚从 Textmate 切换到 MacVim，到目前为止我很喜欢它！我的工作流程变得轻而易举……我对此有点着迷。

作为从事 Rails 项目的前端开发人员，我发现我经常在项目中打开相同的文件夹（app/assets/javascripts|stylesheets & app/views & specs）。

我想知道是否有一种方法可以设置快捷方式来在 NerdTree 中打开这些文件夹？我查看了书签，但这些似乎是绝对路径——我想要我从事的所有 Rails 项目的默认相对路径。这可能吗？

谢谢，广告

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:52:00.543

NERDTree 中没有默认的方法来执行此操作。这可能是可能的，但它需要一个自定义脚本来执行您所描述的操作。我敢肯定，如果你寻找它，你可以得到帮助来开发它，但我敢打赌，很难找到已经做到这一点的东西。

但是，您可以查看[https://github.com/tpope/vim-rails/](https://github.com/tpope/vim-rails/)，据我所知，这是 Vim 中 Rails 开发的事实标准。它可能会完全减少您使用 NERDTree 导航文件的需要，因为您可以使用其他命令快速浏览相关文件。

正如罗马尼所说，书签也很方便。为 Rails 项目的顶层做一个书签，打开一些东西，使用 vim-rails 技术浏览相关文件，你会得到你需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:14:14.433

您是否尝试过[项目](http://www.vim.org/scripts/script.php?script_id=69)插件？

NERDTree 将书签存储在一个非常简单的文件中。为每个项目创建一个这样的文件并将 NERDtree 指向它可能会解决问题。

# ssis - 将单个结果集分配给ssis中的多个变量

> ID：11359613
> 
> 赞同：1
> 
> 时间：2012-07-06T09:34:32.593
> 
> 标签：ssis

我有一个执行 sql 任务，我使用了一个 sql 查询来获取数据，现在这个数据的结果必须传递给三个变量。

所以在 Execute SQL TASK 中，我通过以下方式完成了映射

ResultType ------ FullResultSet ParamterMapping
--- id
ResultSet
0 路径
1 文件
2 类型

变量路径、文件和类型是字符串类型。

当我运行包 EST 时抛出以下错误。

**[执行 SQL 任务] 错误：为 ResultSetType 返回的结果绑定数无效：“ResultSetType_Rowset”。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:43:51.160

您是否尝试在变量中保存多行？如果这样做，请不要将结果集设置为“单行”。如果不是，您的变量类型必须是对象类型。

也许也可以将其作为参考。

[http://www.networksteve.com/enterprise/topic.php?TopicId=44489](http://www.networksteve.com/enterprise/topic.php?TopicId=44489)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T09:24:10.787

拥有 rsFromSql var1,var2,var3 最快和最简单的方法是 sql task rsFromSql <- select x,y,z from mytable 并在 executesql 之后添加一个带有记录集 ado 的 foreachloop 任务

## 映射变量

如果您只将 sql 任务集结果中的 1 行返回到 sql 任务中的单行，并将列映射为 vars 以 0 x 1 y 2 z 欢呼

# cakephp - 如何绕过 CakePHP 应用程序 (jSlate) 中的登录屏幕？

> ID：11359622
> 
> 赞同：0
> 
> 时间：2012-07-06T09:35:01.300
> 
> 标签：cakephp, authentication, autologin

我在将 CakePHP 应用程序 (jSlate) 集成到定制的非 Cake Web 应用程序时遇到问题。我见过的所有替代身份验证脚本都只是更改了登录表单的行为，换句话说，登录表单仍然出现，并要求输入用户名和密码，但是这些都是针对替代源（例如 LDAP）进行身份验证的。

我真正想要的是根本不出现登录屏幕。相反，我想要一个非常简单的行为：

1.  检测用户是否已经登录到第三方应用程序。
2.  如果是，自动将它们登录到 CakePHP 应用程序（在本例中为 jSlate）。
3.  如果不是，则重定向到第三方应用程序登录屏幕。

是否有按照这些思路进行 CakePHP 身份验证的教程？或者有人知道怎么做吗？我已经想出了如何做第 3 部分，但是如果没有第 1 部分和第 2 部分，这种行为是没有用的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:51:12.673

您可以将其放入您的`AppController::beforeFilter`：

```
public function beforeFilter() {
    if (!$this->Auth->user()) {
        // if no user is currently logged in

        if ($this->Cookie->read(...)) {
        // or
        if ($_COOKIE[...]) {
        // or whatever else you want to detect

            $this->redirect('http://some.external/login/service');
        }
    }
} 
```

然后，这个外部登录服务可能会在某个时候使用某种令牌将用户重定向回您的 Cake 应用程序。您只需要定义一个可以重定向回的可公开访问的操作（无需身份验证）。在该操作中，您检查所需的所有令牌，然后可以“手动”验证用户：

```
$user = $this->User->find(/* find your Cake user by some id */);
if ($user) {
    $this->Auth->login($user['User']['id']);
} 
```

恭喜，用户现在已经登录，就像他使用登录表单并拥有有效的 Cake 会话一样。

# c# - 在c#中的表中查找span标签

> ID：11359624
> 
> 赞同：-3
> 
> 时间：2012-07-06T09:35:03.317
> 
> 标签：c#, asp.net

```
<table id="mytable" runat="server">
        <tr class="csstablelisttd">
            <td>
                08:00
            </td>
            <td>
                00
            </td>
            <td>
                <span></span>
            </td>
        </tr>

  for(int i = 0; i < mytable.Rows.Count - 1; i++)
                {
                    for(int j = 0; j < mytable.Rows[i].Cells.Count; j++)
                    {

    }
}

if(mytable.Rows[i].Cells[j].Attributes["class"] != null && mytable.Rows[i].Cells[j].Attributes["class"].Equals("csstdgreen"))
                {
                    //For finding class of td.I use above code 
                } 
```

我必须在表中找到 span 标签，并且必须在 span 标签中添加文本。这是在表的 td 中。我不想应用 runat="server" 因为我的表中有 50 个跨度。我正在像这样循环遍历表格。我在谷歌上搜索了很多，但在 c# 中没有找到任何东西。 **我必须在数据库中的 span 标签中输入值** ***注意：没有 Javascript 或 Jquery！***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:50:36.840

你必须使用`asp:Label`或穿上`runat="server"`你的`<span>`或从代码隐藏中生成你的跨度

```
 //Just an hint, can't remember the proper way to do this but you can

 myTable.Rows[i].Cells[last].InnerHtml = "<span>value</span>"; 
```

这给了你另一个选择/想法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:43:43.420

使用 jQuery 时，给所有 span 的 className 和 TD 一个 ID

```
<td id="idOfTd">
    <span class="className">Blabla</span>
</td> 
```

在 jQuery 中，您可以执行以下操作：

```
var allSpans = $('#idOfTd .className'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T10:22:42.387

如果你想在后面的代码中添加文本，因为我知道它太凝灰岩而不使用 runat="server"。但是如果你想在 javascript 中添加文本，那么它可以通过在 td 中使用 getElementusingTagName('span') 搜索 span 并添加文本来完成。为了在 javascript 中执行此操作，您无需提供 id 来跨越，也无需编写 runat ="server"。下面的javascript代码是写的 -

`<script type="text/javascript"> function getInfo() { var mygetTable = document.getElementById("<%=mytable.ClientID %>"); for (var j = 0; j < mygetTable.rows.length; j++) { var abc = mygetTable.rows[j].cells[2].getElementsByTagName('span'); abc[0].innerHTML = 'I am Span.'; } } </script>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T12:11:28.667

如果你想在后面的代码中添加文本，因为我知道它太凝灰岩而不使用 runat="server"。但是如果你想在 javascript 中添加文本，那么它可以通过在 td 中使用 getElementusingTagName('span') 搜索 span 并添加文本来完成。为了在 javascript 中执行此操作，您无需提供 id 来跨越，也无需编写 runat ="server"。下面的javascript代码是写的 -

```
<script type="text/javascript"> 
function getInfo() 
{ 
    var mygetTable = document.getElementById("<%=mytable.ClientID %>"); 
    for (var j = 0; j < mygetTable.rows.length; j++) 
    { 
        var abc = mygetTable.rows[j].cells[2].getElementsByTagName('span');
        abc[0].innerHTML = 'I am Span.'; 
    } 
 } 
 </script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T09:36:42.817

给 TD 或 span 一个 ID 并通过后面的代码在其中添加数据

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T09:40:11.190

如果您不想使用服务器控件，也许 javascript 是一个更好的主意来完成这项工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-06T09:45:36.320

首先给每个跨度一个唯一的ID，比如下面给出的...

```
<td>
<span id="span1"></span>
</td> 
```

然后使用javascript你可以找到这个跨度并添加所需的文本，比如

```
 document.getElementById('test').innerHTML = 'your required message can go here'; 
```

这是一个指向它的小小提琴链接= [http://fiddle.jshell.net/fFHbf/](http://fiddle.jshell.net/fFHbf/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-06T09:51:27.160

如果您可以为每个标签设置一个 id，您可以执行以下操作：

HTML：

```
<span id="spanTagId"></span> 
```

然后，使用 java 脚本：

```
document.getElementById('spanTagId').innerHTML = 'Your text...'; 
```

# django - Facebook 调试器无法测试本地主机

> ID：11359625
> 
> 赞同：2
> 
> 时间：2012-07-06T09:35:18.010
> 
> 标签：django, facebook, facebook-graph-api, localhost

我正在使用 Django 构建一个 Facebook 应用程序。因此，为了开发，我将应用程序连接到`localhost`. 我的应用程序正在画布上加载并且工作正常，但是当我将 localhost 地址作为输入时，Facebook[调试器](https://developers.facebook.com/tools/debug)无法正确测试它。

这些是我在[调试器中尝试过的请求](https://developers.facebook.com/tools/debug)

```
http://localhost
https://localhost/
http://127.0.0.1/
localhost

etc 
```

几乎所有可能的组合..它向我展示了

```
Error Parsing URL:  Error parsing input URL, no data was scraped. 
```

当我在 heroku 上部署相同的代码并尝试时......它正在工作！

所以，

1.  我不能在 localhost 上调试项目吗？那么，做这件事有什么意义呢？？
2.  如果我可以工作，我应该如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:49:05.310

> 我不能在 localhost 上调试项目吗？那么，做这件事有什么意义呢？？

你可以在 localhost 上调试你的代码等等——但*当然*你不能让 Facebook 的调试工具到达*你*localhost 上的站点，因为 Facebook（以及网络上的其他所有人）确实不知道*你的*localhost 实际上是什么机器。（绝对的基础，伙计！）

> 如果我可以工作，我应该如何解决它？

您必须使您的网络服务器可以通过互联网从“外部”访问。

设置您的测试服务器，使其接受来自外部 IP 的请求，并获取 DynDNS 地址（基本上可以由 Facebook 等第三方通过 DNS 解析的地址）。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-06T10:15:39.860

您可以在本地访问 Facebook 应用程序，但您需要伪造本地计算机的域。您可以通过添加来做到这一点

```
127.0.0.1 mysite.test.example.com 
```

到`/etc/hosts`. 您应该更新`mysite.test.example.com`到您的域。您的 Facebook 应用需要针对该域进行配置。然后，您可以在本地使用 Facebook 应用程序并调试您的项目。

另一种方法是设置 Web 服务器并将其域用于测试目的（但这并不理想，因为您需要提交并构建代码才能看到您的更改）。

# vba - 在 VBA Excel 的 dos 命令中运行 7Z 会导致警告警报

> ID：11359630
> 
> 赞同：3
> 
> 时间：2012-07-06T09:35:45.643
> 
> 标签：vba, warnings, alert, 7zip

我目前正在使用以下代码`dos`从`VBA`.

```
Set objShell = CreateObject("WScript.Shell")

dos_command="\\\10.xx.xx.xx\test\7z.exe  a -r " etc etc etc

result = objShell.Run(dos_command, 0, True)

Set objShell =nothing 
```

一切运行良好，唯一的问题是我收到一个烦人的警告 Windows 框，建议程序试图在我的计算机上运行，​​按 OK 或 Cancel

我必须使用`"objshell"`，因为我需要`VBA`等到`DOS`命令完成。

有没有办法避免警告框从 VBA 中出现或向 DOS 命令添加一些附加参数？

7z.exe 文件在服务器（不是本地 PC）中运行，所以我认为这就是问题所在。

我无法在每台机器上使用或安装 7z.exe。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:03:27.190

以下是三个选项，按从最快/最脏到最强大的顺序排列：

1.  **创建一个文本文件作为命令行的一部分并等待它的存在**：将您的命令行修改为类似的内容并使用`Shell`（不是您的`objShell`）运行它：

    ```
    dos_command = "\\\10.xx.xx.xx\test\7z.exe  a -r " etc etc etc
    dos_command = dos_command & " && echo > " & TempFileName 
    ```

    这将创建一个以您的 7-zip 编码完成`TempFileName` **命名的文本文件。**您只需要在运行 shell 命令之前确保`TempFileName`不存在，然后运行命令并等待`TempFileName`文件存在。

2.  **使用`OpenProcess`和`GetExitCodeProcess`API ：使用**[OpenProcess](http://allapi.mentalis.org/apilist/OpenProcess.shtml) API 调用启动命令行，该调用提供对新进程的访问（请注意，该`Shell`函数返回已启动进程的 ProcessID）。然后使用 ProcessID 进入循环并通过[GetExitCodeProcess](http://allapi.mentalis.org/apilist/GetExitCodeProcess.shtml)轮询进程。相关声明：

    ```
    Private Declare Function OpenProcess Lib "kernel32" _
            (ByVal dwDesiredAccess As Long, _
             ByVal bInheritHandle As Long, _
             ByVal dwProcessId As Long) As Long
    Private Declare Function GetExitCodeProcess Lib "kernel32" _
            (ByVal hProcess As Long, _
             lpExitCode As Long) As Long
    Private Const STILL_ACTIVE = &H103
    Private Const PROCESS_QUERY_INFORMATION = &H400

    '---------------------------------------------------------------------------------------vv
    ' Procedure : ShellWait
    ' DateTime  : 2/15/2008 10:59
    ' Author    : Mike
    ' Purpose   : Executes a shell command and waits for it to complete.
    ' Notes     : Runs the shell as a batch file, allowing the user to pass a string with
    '             line breaks to execute a multi-line command.
    '
    '           : Provides two means to break out of the loop.
    '             1) Provide a timeout in seconds.
    '                The code breaks out once it reaches the timeout.
    '             2) Provide a flag to tell the procedure to stop running.
    '                To use this option, you would need to pass the procedure a global flag
    '                that the user has the ability to change through the interface.
    ' Update (5/23/2008):
    '           - Uses a progressive sleep timer to allow fast processes to run quickly
    '               and long processes to get increasing clock cycles to work with.
    '           - Changed default window mode to hidden.
    '---------------------------------------------------------------------------------------
    '^^
    Public Function ShellWait(DosCmd As String, _
                              Optional StartIn As String = "WINDOWS TEMP FOLDER", _
                              Optional WindowStyle As VbAppWinStyle = vbHide, _
                              Optional TimeOutSeconds As Long = -1, _
                              Optional ByRef StopWaiting As Boolean = False)    'vv
        On Error GoTo Err_ShellWait

        Dim hProcess As Long, RetVal As Long, StartTime As Long
        Dim BatName As String, FileNum As Integer, SleepTime As Long

        StartTime = Timer

        BatName = TempFileName(StartIn, "bat")
        FileNum = FreeFile()
        Open BatName For Output As #FileNum
        ChDrive Left(BatName, 1)
        ChDir Left(BatName, InStrRev(BatName, "\"))
        Print #FileNum, DosCmd
        Close #FileNum

        hProcess = OpenProcess(PROCESS_QUERY_INFORMATION, False, Shell(BatName, WindowStyle))
        SleepTime = 10
        Do
            'Get the status of the process
            GetExitCodeProcess hProcess, RetVal
            DoEvents: Sleep SleepTime
            If TimeOutSeconds <> -1 Then
                If Timer - StartTime > TimeOutSeconds Then Exit Do
            End If
            If StopWaiting Then Exit Do
            'Progressively increase the SleepTime by 10%
            '  This allows a quick process to finish quickly, while providing
            '  a long process with increasingly greater clock cycles to work with
            SleepTime = SleepTime * 1.1
        Loop While RetVal = STILL_ACTIVE
        Kill BatName

    Exit_ShellWait:
        Exit Function
    Err_ShellWait:
        MsgBox Err.Description
        Resume Exit_ShellWait
    End Function

    '---------------------------------------------------------------------------------------vv
    ' Procedure : TempFileName
    ' DateTime  : 12/9/08
    ' Author    : Mike
    ' Purpose   : Returns an unused file name but does not create the file.  Path can be
    '             passed with or without the trailing '\'.
    ' Requires  : TempPath() function
    '---------------------------------------------------------------------------------------
    '^^
    Function TempFileName(Optional ByVal Path As String = "WINDOWS TEMP FOLDER", _
                          Optional Ext As String = "txt", _
                          Optional Prefix As String = "temp") As String    'vv
    Dim TempFName As String, i As Integer

        If Path = "WINDOWS TEMP FOLDER" Then Path = TempPath
        If Right(Path, 1) <> "\" Then Path = Path & "\"
        If Not (Path Like "?:\*" Or Path Like "\\*") Then
            Err.Raise 52    '"Bad file name or number."
        ElseIf Dir(Path, vbDirectory) = "" Then
            Err.Raise 76    '"Path not found."
        End If

        TempFName = Path & Prefix & "." & Ext
        For i = 1 To 500
            If Dir(TempFName) = "" Then
                TempFileName = TempFName
                GoTo Exit_TempFileName
            End If
            TempFName = Path & Prefix & "_" & Format(i, "000") & "." & Ext
        Next i
        TempFileName = ""

    End Function

    '---------------------------------------------------------------------------------------
    ' Procedure : TempPath
    ' Author    : Mike
    ' Date      : 8/12/2008
    ' Purpose   : Returns something like:
    '               C:\DOCUME~1\BGRAND~1\LOCALS~1\Temp\
    '---------------------------------------------------------------------------------------
    '^^
    Function TempPath() As String    'vv
    Const TemporaryFolder = 2
    Static TempFolderPath As String
    Dim fs As Object
        If Len(TempFolderPath) = 0 Then
            Set fs = CreateObject("Scripting.FileSystemObject")
            TempFolderPath = fs.GetSpecialFolder(TemporaryFolder) & "\"
        End If
        TempPath = TempFolderPath
    End Function 
    ```

3.  **使用 CreateProcess 和 WaitForSingleObject API ：请参阅**[CreateProcess](http://allapi.mentalis.org/apilist/CreateProcess.shtml)帮助页面上的“Super Shell”示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:12:49.870

**调用`Microsoft® Windows® Script Host`会导致窗口显示消息。而是试试这个**

```
Public Sub test()
   Dim dos_command$, lRet&
   dos_command = """\\xxx.xxx.xxx.xxx\xxx\xxx\7z.exe"" a test.zip ""\\xxx.xxx.xxx.xxx\xxx\xxx\*.log"" -r"
   lRet = Shell(dos_command, vbMaximizedFocus)
   MsgBox lRet
End Sub 
```

**更新**

*您可以执行以下操作并使用您的代码：*

*   打开开始 | 运行并输入`gpedit.msc`. 点击确定
*   用户配置 >> 管理模板 >> Windows 组件 >> 附件管理器
*   将 7z.exe 添加到中度风险文件类型设置的包含列表中。

* * *

希望这有帮助

# android - Android如何从特定范围清除片段回栈

> ID：11359631
> 
> 赞同：2
> 
> 时间：2012-07-06T09:35:50.317
> 
> 标签：android

是否可以从特定范围内清除 backstack 条目，即如果 backstack 条目大小为 10，那么是否可以从 5 到 7 删除 backstackentry

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:46:52.247

使用`popBackStack(int,int)`或`popBackStack(String,int)`与[FragmentManager.POP_BACK_STACK_INCLUSIVE](http://developer.android.com/reference/android/app/FragmentManager.html#POP_BACK_STACK_INCLUSIVE)一起使用可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:01:31.500

您可以使用[popBackStack(int,int)](http://developer.android.com/reference/android/app/FragmentManager.html#popBackStack%28int,%20int%29)弹出到某个片段，但文档中没有关于范围的内容。

可能是时候重新考虑这个问题了……听起来您的 UI 设计与操作系统的预期用途背道而驰

# c++ - C/C++ 的区别和

> ID：11359633
> 
> 赞同：0
> 
> 时间：2012-07-06T09:35:53.283
> 
> 标签：c++, c, class

我有 ADC 和其他外围设备的供应商特定代码。现在使用它我正在理解流程。

文件的扩展名为 .cpp，但其中的语句类似于 C 而不是 C++，即使用 printf() 而不是 cout；没有定义 namespace.std ......还有其他让我确信它是 c 语言代码的东西。（请原谅我，但无论我问供应商，但从那里回复很晚）

所以它是一个完整的 C 代码。但是，虽然我明白了，但我已经到了定义类的地步，我现在真的很困惑。因为我没有看到或听到任何人使用类

```
C4DSPBlast cBlast;
cBlast.GetBlastInfo(); 
```

其中 C4DSPBlast cBlast;

以下代码显示 C4DSPBlast 是一个类。现在，在调试时，我发现我在这条语句 cBlast.GetBlastInfo(); 上遇到了错误。但是因为我不知道 C 中的类，所以我把它贴在这里，因为我在调试方面没有任何进展。

```
class C4DSPBlast
{
public:

    //! empty constructor.
    C4DSPBlast(void);
    //! empty destructor.
    ~C4DSPBlast(void);

    //! Get BLAST information from the hardware(firmware). 
    /*!
     * Read the BLAST information from an the PCI memory attached to the hardware device. This function populates internal class members with this information.
     * @return  CBLAST_IO_ERROR_BLAST_INFO_RD, CBLAST_NO_DEV_TYPE or CBLAST_SUCCESS if no errors.
     */
    int GetBlastInfo(void);

    //! m_valBLASTRegister the standard BLAST information register.
    union { BLASTReg m_BLASTRegister; unsigned long m_val0; } m_valBLASTRegister;   

    //! m_valBLASTRegisterExt the extended BLAST information register.
    union { BLASTReg m_BLASTRegisterExt; unsigned long m_val1; } m_valBLASTRegisterExt;

    //! The whole BLAST information populated by GetBlastInfo() as a C data structure.
    struct BOARD m_cBoard;
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T11:09:07.413

代码是 C++。将其编译为 C++，错误将消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:16:21.677

C 和 C++ 是不同的语言。当前的常见约定是，如果您将带有扩展名的文件提供`.c`给编译器，它会将其编译为 C 文件。如果你给它一个`.cpp`or `.cxx`（确切的列表取决于编译器），它将把它作为 C++ 文件处理。即使您将 C/C++ 文件的混合放在同一命令行上，这也将起作用。

如果你选择任意 C 文件，重命名为`.cpp`，然后交给编译器，99% 的几率会被编译。C++ 标准描述了与 C 不兼容的列表，但这些都是相当罕见的事情。

您很可能会看到一个以 C 语言创建的文件，然后以 C++ 开始了它的新生命。

# visual-studio-2010 - VS 2010 - 在解决方案资源管理器中跟踪活动项目

> ID：11359637
> 
> 赞同：2
> 
> 时间：2012-07-06T09:35:56.417
> 
> 标签：visual-studio-2010

我的 Visual Studio 2010 有一个选中的 CheckBox “Track active in Solution Explorer”。还有一个 ReSharper intalles。所以有时 VS 不会在解决方案资源管理器中跟踪当前的当前项。但有时会。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T03:12:14.237

如果您将 Resharper 与 Visual Studio 映射一起使用，您可以使用它`Shift+Alt+L`来同步解决方案资源管理器中的当前文件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T02:32:00.087

我不确定你的具体问题。

Visual Studio 2012（今天刚刚推出）有一个新的快捷方式`Ctrl [, S`. 是的，您必须键入`Ctrl [`，然后释放，然后键入`S`. 它将与项目同步。

通常这比总是跟踪更有用。

# android - 在异步任务之后更新 ListFragment

> ID：11359649
> 
> 赞同：1
> 
> 时间：2012-07-06T09:36:59.247
> 
> 标签：android, android-asynctask, android-fragments, android-listfragment

我的应用程序中有两个 listfragment 和一个片段。我给你看第一个片段。

应用程序启动，Asynctask 检索数据并将它们放入 arrayNews。我认为问题在于列表片段中列表视图或适配器的更新不刷新。

如果我更改手机的方向 => listfragment (+ listview) 会正确显示。如果我转到片段 3（内存中的片段 2 和 3），然后返回片段 1 => 它可以正常工作。

对不起我的英语^^

```
public class MainActivity extends FragmentActivity implements ActionBar.TabListener
{
    private SectionsPagerAdapter mSectionsPagerAdapter;
    private ViewPager mViewPager;
    public static ArrayList<Data> arrayNews = new ArrayList<Data>();

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        List<Fragment> listeFragments = new Vector<Fragment>();
        listeFragments.add(Fragment.instantiate(this, ActualiteFragment.class.getName()));
        listeFragments.add(Fragment.instantiate(this, DossierFragment.class.getName()));
        listeFragments.add(Fragment.instantiate(this, ForumFragment.class.getName()));
        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager(), listeFragments);

        final ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener()
        {
            @Override
            public void onPageSelected(int position)
            {
                actionBar.setSelectedNavigationItem(position);
            }
        });

        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++)
        {
            actionBar.addTab(actionBar.newTab().setText(mSectionsPagerAdapter.getPageTitle(i)).setTabListener(this));
        }

        if (arrayDossier.size() == 0 && arrayDossier.size() == 0)
        {
            chargement_donnees();
        }       
    }

    public void chargement_donnees()
    {
        AsyncTaskChargement chargNews = new AsyncTaskChargement();
        chargNews.execute();
    }

    public class AsyncTaskChargement extends AsyncTask<Void, Integer, Void>
    {
        private ProgressDialog dialog = new ProgressDialog(MainActivity.this);

        @Override
        protected void onPreExecute()
        {
            super.onPreExecute();
            dialog.setMessage("Chargement des données ...");
            dialog.setIndeterminate(true);
            dialog.setCancelable(false);
            dialog.show();
        }

        @Override
        protected Void doInBackground(Void... arg0)
        {
            arrayNews = ContainerData_news.getFeeds(); 
            return null;
        }

        @Override
        protected void onPostExecute(Void result)
        {
            if (this.dialog.isShowing())
            {
                this.dialog.dismiss();
            }
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        getMenuInflater().inflate(R.menu.menu_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
        switch (item.getItemId())
        {
        case R.id.menu_refresh:
            chargement_donnees();
            return true;
        default:
            return false;
        }
    }

    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction)
    {
    }

    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction)
    {
        mViewPager.setCurrentItem(tab.getPosition());
    }

    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction)
    {
    }

    public class SectionsPagerAdapter extends FragmentPagerAdapter
    {
        List<Fragment> listeFragments;

        public SectionsPagerAdapter(FragmentManager fm, List<Fragment> listeFragments)
        {
            super(fm);
            this.listeFragments = listeFragments;
        }

        @Override
        public Fragment getItem(int position)
        {
            return listeFragments.get(position);
        }

        @Override
        public int getCount()
        {
            return listeFragments.size();
        }       

        @Override
        public CharSequence getPageTitle(int position)
        {
            switch (position)
            {
            case 0:
                return getString(R.string.title_section1).toUpperCase();
            case 1:
                return getString(R.string.title_section2).toUpperCase();
            case 2:
                return getString(R.string.title_section3).toUpperCase();
            }
            return null;
        }
    }

    public static class ActualiteFragment extends ListFragment
    {       

        public ActualiteFragment()
        {
        }

        @Override
        public void onActivityCreated(Bundle savedInstanceState)
        {
            super.onActivityCreated(savedInstanceState);
            setListAdapter(new AdapterListe(getActivity(), arrayNews));
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
        {           
            return inflater.inflate(R.layout.listfragment, container, false);
        }

        @Override
        public void onListItemClick(ListView l, View v, int position, long id)
        {
            ...
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T10:00:26.060

我找到了一种更新此类列表步骤的简单方法。： 1\. 在 ListFragment 中声明 onCreateView

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreateView(inflater, container, savedInstanceState);
        View view = inflater.inflate(R.layout.TheLayoutContainingAListView, container, false);
        return view;        
    } 
```

TheLayoutContainingAListView.xml 应该只包含一个列表视图

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
        <ListView
            android:id="@android:id/list"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >
        </ListView>
</LinearLayout> 
```

android:id 必须是 "@android:id/list" 。但是你可以尝试其他的事情.. 我没有.. 2\. 在你的 AsyncTask 的 onPostExecute 中（Asynctask 应该在 MainActivity 中），做你想做的一切.. 即声明一个适配器，然后 setAdapter

```
protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            lv = (ListView) findViewById(android.R.id.list);
            CustomAdapter adapt = new CustomAdapter(MainActivity.this,
                    android.R.id.list, fetch); //You can use ArrayAdapter.. i wanted a custom one
            lv.setAdapter(adapt);
            showFragment(YOUR Fragment, false);

            super.onPostExecute(result);
        } 
```

showFragment 只是我用来显示特定片段并隐藏所有其他片段的功能。您可以通过 FragmentTransaction show() 和 hide() 方法轻松实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:22:46.653

使用`youradapter.notifyDataSetChanged();`in `onPostExecute`强制重绘您的列表。

# android - Android bufferedReader.readLine 用于持续监听

> ID：11359650
> 
> 赞同：1
> 
> 时间：2012-07-06T09:36:59.927
> 
> 标签：android, sockets, buffer

我正在尝试编写一个连接到服务器的演示应用程序，然后简单地继续监听来自服务器的随机定时输入。发现并连接到服务器工作正常，现在我开始一个新线程，所以我不会阻止 ui。现在，在我的线程中，如果有传入数据，我需要不断地倾听并做出反应。根据我到目前为止所阅读的内容，应该这样做：

```
 while (connected) {
      while ((line = bufferedReader.readLine()) != null) {
          // do something with line and contact the ui
      }
  } 
```

我不明白的是：如果有来自服务器的传入数据，readLine() 显然只能读取一行。那么，一旦服务器停止发送，循环是否不应该中断，这意味着什么都没有发送？

谢谢你的任何想法，马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:44:00.317

readLine 是一个阻塞方法，所以如果没有收到任何内容，它将在那里等待阻塞执行。循环只会在接收到空值时停止（读取文本文件时，这通常意味着已到达文件末尾）。

尝试以不同的方式检测关闭的连接，或者如果您还对服务器进行编码，请尝试发送诸如“END”之类的内容，该内容可以在客户端读取。

# c# - 整个命名空间的“SuppressMessage”

> ID：11359652
> 
> 赞同：70
> 
> 时间：2012-07-06T09:37:03.973
> 
> 标签：c#, .net, namespaces, code-analysis, fxcop

我在测试方法中使用下划线以获得更好的可读性，并且我想抑制整个测试命名空间的 FxCop 错误/警告。

我怎样才能做到这一点？我玩过`GlobalSuppressions.cs`但没有任何效果：

```
[module: System.Diagnostics.CodeAnalysis.SuppressMessage(
    "Microsoft.Naming", "CA1707:IdentifiersShouldNotContainUnderscores",
    Scope = "namespace", Target = "Company.Product.Tests")]

[assembly: System.Diagnostics.CodeAnalysis.SuppressMessage(
    "Microsoft.Naming", "CA1707:IdentifiersShouldNotContainUnderscores",
    Scope = "namespace", Target = "Company.Product.Tests")] 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2019-05-30T10:07:59.107

自 Visual Studio 2019 起，可以抑制命名空间及其所有后代符号的代码分析警告：

```
[assembly: System.Diagnostics.CodeAnalysis.SuppressMessage(
    "Microsoft.Naming", "CA1707:IdentifiersShouldNotContainUnderscores",
    Justification = "Test methods require underscores for readability."
    Scope = "namespaceanddescendants", Target = "Company.Product.Tests")] 
```

> **范围**- 正在抑制警告的目标。如果未指定目标，则将其设置为属性的目标。支持的范围包括：
> 
> *   ...
>     
>     
> *   `namespaceanddescendants`-（Visual Studio 2019 的新增功能）此范围禁止命名空间及其所有后代符号中的警告。该`namespaceanddescendants`值仅对 Roslyn 分析器有效，并被基于 FxCop 的二进制静态分析忽略。

^([抑制代码分析警告#SuppressMessage 属性@MS Docs](https://docs.microsoft.com/en-us/visualstudio/code-quality/in-source-suppression-overview#suppressmessage-attribute))

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2020-01-10T20:27:22.317

您可以为此使用“模块”范围，与支持较新“命名空间和后代”范围的编译器相比，较旧的编译器支持该范围。模块范围会影响项目中的所有内容，并且不需要目标规范。

示例用法：

```
[assembly: System.Diagnostics.CodeAnalysis.SuppressMessage(
    "Microsoft.Naming", "CA1707:IdentifiersShouldNotContainUnderscores",
    Justification = "Test methods require underscores for readability."
    Scope = "module")] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-04-08T00:26:02.690

通过使用包含以下规则的 .editorconfig 文件，我设法忽略了专门针对测试项目的特定警告（我遵循命名约定，其中这些总是以“Tests.cs”结尾）：

```
[*Tests.cs]
dotnet_diagnostics.CA1707.severity = none 
```

有关我的答案的更多信息在[这里](https://stackoverflow.com/a/61091407/1198379)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T18:53:47.693

是的，对于 FxCop <= 10.0，这是不可能的。

您可以做的是使用自定义规则文件（可能仅针对您的测试项目）禁用 CA1707。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-19T13:12:07.750

如前所述，开箱即用是不可能的。恕我直言，这是因为压制必须统一进行。

有一种解决方法可以通过`FXCop 10`该`Copy As > Module-level SuppressMessage`功能手动执行此操作。

缺点，每次修改命名空间时都必须重复此操作，但如前所述，应该隔离全局抑制。

1.  在 FXCop 10（此处为*System.Xml*）中打开您的程序集并运行分析
2.  选择您的命名空间（此处*为 System.Xml*）
3.  选择所有违反的规则
4.  右键单击并`Copy As > Module-level SupressMessage`
5.  然后将其粘贴到`GlobalSuppressions.cs`例如

*注意：这可以在程序集、命名空间或类型级别完成。*

![模块级 SuppressMessage](../Images/8eef9d70559b76601c481d544b8602b1.png)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-13T08:06:11.153

我认为这是不可能的 harlam357 已经说过。

# sql - sql server 即使在 1 小时后也无法执行重复查询..继续加载它

> ID：11359653
> 
> 赞同：0
> 
> 时间：2012-07-06T09:37:07.043
> 
> 标签：sql, sql-server

我有一个如下查询来查找我的表中的重复项，该表包含超过 10,00,000 个数据和 10 个字段。当我尝试执行查询时，它会继续加载和加载超过一个小时，但无法完成执行。当我使用只有 100 条记录的类似表尝试相同的查询时，它工作正常。

（所有列数据类型都是 nchar）

我想知道如何将其用于超过 10,00,000 的数据。

```
select * from table1 as L
where (select count(*) from table1
where L.date + L.time + L.color + L.supplier = table1.date +
table1.time + table1.color + table.supplier and table1.variety = 'dark' 
and date between '01062012' and '30062012') > 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:48:16.850

***不要***使用`L.date + L.time + L.color + L.supplier`=`table1.date + table1.time + table1.color + table.supplier` 这样做会破坏在连接中使用索引的任何能力。

```
select * from table1 as L
where (select count(*)
         from table1
        where table1.date       = L.date
          and table1.color      = L.color
          and table1.supplier   = L.supplier
          and table1.variety    = 'dark'
          and table1.date between '01062012' and '30062012'
     )
     > 1 
```

此外，确保您的表具有涵盖所有连接字段*（品种、颜色、供应商、日期）*的索引。

还有其他查找重复项的选项，例如 using `ROW_NUMBER()`，但我们需要更多地了解您的表结构（唯一 id 字段等）以及什么构成（和不构成）重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:43:14.670

虽然不确定您的表结构。似乎在极端负载下你的桌子被锁定了。尝试一些提示，如下所述。

从此尝试删除 * 并读取执行所需的记录。

```
select * from table1 as L WITH(NOLOCK)
where (select count(1) from table1 WITH(NOLOCK)
where L.date + L.time + L.color + L.supplier = table1.date +
table1.time + table1.color + table.supplier and table1.variety = 'dark' 
and date between '01062012' and '30062012') > 1 
```

希望它能解决你的问题。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:43:38.413

我是新手，我的建议可能不合适，但如果在你的位置，我也会使用 SSIS。我会在 ssis 中使用脚本组件并执行操作

# javascript - jquery一期

> ID：11359654
> 
> 赞同：0
> 
> 时间：2012-07-06T09:37:08.340
> 
> 标签：javascript, jquery

我的标记

```
<form action="blah/foo" method="POST" id="frm1">
<input type="hidden" id="v" />
</form>
......
......
<!--after some code-->
<button id="btn1">test</button>
<input type="text" id="somevalue" /> 
```

我的目的是当我单击按钮 btn1 时，获取的值`somevalue`并将其提供给隐藏值`v`并提交表单，表单需要提交（仅一次）所以我使用了 jquery`one`方法并且工作正常

第二件事是如果`somevalue`为空我不想提交

问题场景

```
<script>
$('#btn1').one('click',function(){
    if(!$('#somevalue').val()){
    $('p#msg').html('Empty value');
     return false;
    }
    $('#frm1').submit();

});
</script> 
```

如果用户首先进行空输入并尝试提交错误消息将显示..但之后即使输入有效，点击事件也不会触发（我知道这是因为`one`功能）

我正在寻找表单将只提交一次的替代方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:40:55.690

```
var form_sent = false;
$('#btn1').click(function(){
    if(form_sent == true){ return; }
    if(!$('#somevalue').val()){
        $('p#msg').html('Empty value');
        return false;
    }
    form_sent = true;
    $('#frm1').submit(); 
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T09:50:55.490

不要使用'one'来让你的处理程序只被调用一次，而是将你的处理程序声明为一个命名函数并使用jQuery的绑定/取消绑定来删除点击处理程序，如果（且仅当）该字段在表单是有效值时提交。否则继续监听点击事件。像这样：

```
function onFormSubmitted (e) {
    if($("#somevalue").val === "") { // If the field's value is invalid...
        $('p#msg').html('Empty value'); // ... then show error message...
        return; // ...and do nothing else - just keep on listening
    }

    // Ok, we have valid input so...
    $('#btn1').unbind("click", onFormSubmitted); // ...stop listening...
    $("#frm1").submit(); // ...and submit the form
}

// Start listening for the click event
$('#btn1').bind("click", onFormSubmitted); 
```

或者，如果您仍想使用 'one'，您可以调整前面的示例，如下所示：

```
function onFormSubmitted (e) {
    if($("#somevalue").val === "") { // If the field's value is invalid...
        $('p#msg').html('Empty value'); // ... then show error message...
        $('#btn1').one("click", onFormSubmitted); // ...re-attach one-time listener...
        return; // ...and wait
    }

    // Ok, we have valid input so don't re-attach one-time listener...
    $("#frm1").submit(); // ...just submit the form
}

// Add one-time listener for the click event
$('#btn1').one("click", onFormSubmitted); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T09:40:57.353

尝试：

```
$('#btn1').one('click',function(){
    callFunc();
});

function callFunc(){
 if($('#somevalue').val() == ""){
    $('p#msg').html('Empty value');
    $('#btn1').one('click',function(){ callFunc(); });
    return false;
    }
 $('#frm1').submit();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T09:41:03.810

首先，为什么不在表格中输入您的意见？这样做有特定的理由吗？

同样要在直接的 javascript 中执行此操作，而不是使用 jquery，我将执行以下操作：

```
<form action="blah/foo" method="POST" id="frm1" onsubmit="return validateForm();"> 
```

validateForm 只是检查输入是否为空，如果是则返回 false，否则返回 true。将 false 返回到 onsubmit 将停止表单提交。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T09:40:45.730

尝试绑定事件，

```
$('#btn1').bind('click',function(){
    if(!$('#somevalue').val()){
    $('p#msg').html('Empty value');
     return false;
    }
    $('#frm1').submit();

});​ 
```

# api - 使用 Shopify API 如何获取单个订单项的税务详细信息？

> ID：11359655
> 
> 赞同：1
> 
> 时间：2012-07-06T09:37:18.087
> 
> 标签：api, shopify

在英国，有些商品会收取增值税，而有些则不会。要将订单导入我们的后台系统，我们需要知道是否对订单中的特定项目征税。理想情况下，我们还想知道每个订单项收取了多少税。

此信息未显示在在线文档中给出的任何示例响应中。是否可以通过 API 获取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:13:18.307

这目前不适用于单个订单项，所有可用的只是收取的总税款。您可以使用此字段和`taxable`字段`Product`来尝试划分收取的税款。

# jquery - 在JQuery中选择具有指定类的元素和父级

> ID：11359667
> 
> 赞同：0
> 
> 时间：2012-07-06T09:38:11.363
> 
> 标签：jquery, class, find, parent

我不知道怎么了，我的情况如下：

```
<tr>
  <td><span class="idTask">1</span></td>               
  <td><span>Another Hello</span></td>                              
  <td><img class="delete" src="img/delete.png" alt="Edit" /></td>
  <td><input type="checkbox" name="delete[]" value="" /></td>
</tr> 
```

当我单击一个按钮时，一个函数调用以遍历所有复选框以删除，我需要从 idTask 检索值，我正在尝试执行以下操作：

```
$(function(){
    $(".deleteAll").click( function(){
    var conf=confirm("Are you sure?");
    if(conf==true) {  
        $(':checkbox').each(function () {
        if(this.checked) {
            alert(($(this)).parent().find('.idTask').text());
        } 
        });
    }
    });
}); 
```

但是不起作用，使用 prev() 或 next() 工作，但对我来说不是一种优雅的方式来做到这一点，有什么建议可以在父级中找到与他的类匹配的子元素以检索他的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:40:33.640

复选框的父级是`<td>`但不是`<tr>`。你应该更好地使用[`closest()`](http://api.jquery.com/closest/)：

```
$(".deleteAll").click(function() {
    if (confirm("Are you sure?")) {
        $(":checkbox").each(function() {
            if (this.checked) {
                // --------------.-.-.-.-.-.-.
                //               v v v v v v v
                var id = $(this).closest("tr").find(".idTask").text();
                alert(id);
            }
        });
    }
}); 
```

# wordpress - 为什么 Facebook 喜欢和发送按钮没有获得正确的 url - Wordpress

> ID：11359669
> 
> 赞同：0
> 
> 时间：2012-07-06T09:38:18.980
> 
> 标签：wordpress, facebook, facebook-like, facebook-opengraph

在我的网站[http://youmark.it/](http://youmark.it/)中，我在主页帖子和所有其他单个帖子页面中都有相同数量的点赞，点击后的发送按钮也显示 Facebook 页面 url，而不是帖子 url。

我已经为开放图集成了所有东西，如果您查看源代码，它似乎没问题，但在我做了一些更改后仍然无法正常工作。同样在 Facebook 调试工具中，一切都显示正确。

Facebook 需要时间来更新还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:45:18.427

你有所有喜欢的按钮“指向”你网站的基本 URL。

如果您希望他们喜欢某篇文章，请在标签的`href`参数中包含该文章的 URL `<fb:like>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:14:02.683

尝试喜欢这个网址：`<?php the_permalink() ?>`而不是？

```
<iframe src="//www.facebook.com/plugins/like.php?href=<?php the_permalink() ?>&amp;send=... 
```

？？？

# php - 如何通过jquery和smarty上传文件php

> ID：11359676
> 
> 赞同：0
> 
> 时间：2012-07-06T09:38:44.567
> 
> 标签：php, jquery, smarty

我需要通过 jquery 和 smarty 上传文件 doc 或 pdf 或富文本

我尝试在 jquery 中传递文件如下

```
window.location.href= sitePath+'download?p='+$('#file').val(); 
```

但是 p 没有价值。如何获取文件路径或名称以及如何存储在服务器中

在我写的控制器中，只需将查询传递给模型，如下所示

```
$model=new download();
$id=$model->upload($param); 
```

而且我无法开发模型代码....

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:43:52.277

你不能发送这样的文件。

您应该使用某种 AJAX 上传器提交表单`enctype="multipart/form-data"`或使用某些 AJAX 上传器（它使用表单提交到 iframe，然后使用 PHP 脚本存储文件）。

**编辑：**一些参考资料

*   [http://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp) - 关于如何使用 PHP 上传文件的教程

*   [http://valums.com/ajax-upload/](http://valums.com/ajax-upload/) - ajax 上传器示例。

**EDIT2：**问题不在于您的模型代码，而在于您尝试提交文件的方式。

# php - 排名系统的数据库结构

> ID：11359677
> 
> 赞同：0
> 
> 时间：2012-07-06T09:38:47.930
> 
> 标签：php, database

我在做一个PHP对战系统，需要整理一下排名。

我希望它的运作方式是假设有 100 名玩家，而您的等级为 90。您可以挑战 5 等级以上的玩家，因此假设您挑战并击败等级为 85 的玩家，然后您变为 85，而他变为 86。

不过，我不确定如何使用数据库执行此操作。如何设置它，或存储排名。显然我不能用你的“排名”保存一个字段，因为如果你赢了，它必须编辑数据库中排名低于你的每一个球员，不是吗？

任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:45:13.647

我建议您**保留**一个排名字段并放松查询中的瓶颈：

在您的示例中，使用类似

```
UPDATE players 
SET rank=IF(playerid=<id-of-challengin-player>,rank-5,rank+1) 
WHERE rank>=85 AND rank<=90 
```

这将改变排名

```
old   new
85    86
86    87
87    88
88    89
89    90
90    85 
```

这看起来像您想要的，但使用单个查询，可以利用索引并且仅触及 6 行。

**编辑**

为了便于维护（修复等级编号，如果有漏洞等），运行

```
CREATE VIEW players_by_rank AS 
SELECT * FROM players ORDER BY rank 
```

一次，然后使用

```
UPDATE (SELECT @newrank:=0) AS init, players_by_rank 
SET score=(@newrank:=@newrank+1) 
```

以填补表格中的空白。请注意，这涉及所有行！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:46:18.770

您确实可以在数据库中有一个排名列并按照以下方式`update yourtable set playerRank=playerRank+1 where playerRank>85`进行更新：然后将获胜玩家更新为 playerRank 85。这可能会创下很多记录，但这不会对数据库造成沉重的成本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:44:19.673

由于您描述的“排名”不基于任何其他规则，例如积分..可以计算的东西，您必须在任何地方存储此排名。

是的，这确实意味着您每次都需要更新一大堆记录；但是既然你提到你最多只能挑战你前面的5个位置，这也意味着你每次只需要更新6条记录..（没什么大不了的）

```
90 -> 85
89 -> 90
88 -> 89
87 -> 88
86 -> 87
85 -> 86 
```

# jsf-2 - 打开 Facelets 页面时删除会话属性

> ID：11359678
> 
> 赞同：2
> 
> 时间：2012-07-06T09:38:58.043
> 
> 标签：jsf-2, session-variables, servlet-filters

我正在从 servlet 过滤器向 Facelets 页面返回一条消息。要将消息从 servlet 过滤器传输到 Facelets 页面，我使用了会话变量。显示消息后，我想删除会话变量。如何做到这一点？还有另一种将数据从 servlet 传递到 Facelets 的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T12:43:48.600

在 的后期将其删除`RENDER_RESPONSE`。你可以用`<f:view afterPhase>`这个。

```
<f:view afterPhase="#{bean.removeSessionAttributeAfterRender}"> 
```

和

```
public void removeSessionAttributeAfterRender(PhaseEvent event) {
    if (event.getPhaseId() == PhaseId.RENDER_RESPONSE) {
        FacesContext.getCurrentInstance().getExternalContext()
            .getSessionMap().remove("sessionAttributeName");
    }
} 
```

# python - 切片 NumPy 数组 - 选择与某些索引对应的值

> ID：11359689
> 
> 赞同：2
> 
> 时间：2012-07-06T09:39:30.647
> 
> 标签：python, numpy

有没有一种简单的方法可以从对应于某些索引的数组中选择元素。示例：假设我有一个索引数组 IDX = array((3,7,5)) 和一个数组 A = array((2,5,3,1,7,5,1,9,7,4, 2,5)) 我想从中选择 A 中与 IDX 中给出的索引相对应的元素。

即我正在寻找这样的东西：

```
A[IDX] = array((1,9,5)) or  
A[3,7,5] = array((1,9,5)). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:05:22.303

使用 Numpy 我会这样做：

```
>>> import numpy as np
>>> IDX = np.array([3,7,5])
>>> A = np.array([2,5,3,1,7,5,1,9,7,4,2,5])
>>> A[IDX]
array([1, 9, 5]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:44:59.190

我没有安装 numpy，但是使用标准 python 你可以使用列表理解，我猜 numpy 数组的行为应该不会有很大不同：

```
>>> IDX = (3,7,5)
>>> A = (2,5,3,1,7,5,1,9,7,4,2,5)
>>> [A[i] for i in IDX]
[1, 9, 5] 
```

# c# - Dotfuscator WP7 版和 EnumExtention：友谊不起作用

> ID：11359692
> 
> 赞同：0
> 
> 时间：2012-07-06T09:39:33.783
> 
> 标签：c#, windows-phone-7.1, dotfuscator, class-extensions

在我们的应用程序中，我们对 Enum 进行了扩展

```
namespace System
{
    /// <summary>
    /// Contains extention methods for emuns.
    /// </summary>
    public static class EnumExtention
    {
        /// <summary>
        /// Check is value has flag.
        /// </summary>
        /// <param name="value">Checked value</param>
        /// <param name="checkedFlag">Checked flag.</param>
        /// <returns>True if enum contains specified flag. Otherwise false</returns>
        public static bool HasFlag(this Enum value, Enum checkedFlag)
        {
            ulong num = Convert.ToUInt64(checkedFlag);
            ulong num2 = Convert.ToUInt64(value);
            return (num2 & num) == num;
        }
    }
} 
```

在项目的某个地方，我们有一些 Enum 和一些 Func

```
[Flags]
public enum MyEnum
{
   zero= 0,
   two = 2,
   three = 3,
   threetwo = two | three 
}

public void SomeFunc()
{
   var ThreeTwo = Myenum.threetwo;

   bool _true = ThreeTwo.HasFlag(Myenum.three);
   bool _false = ThreeTwo.HasFlag(Myenum.zero);
   System.Windows.MessageBox.Show(String.Format("_true is: {0} and _false is : {1}", _true, _false);
 }

public void СallerFunction()
{
   try
   {
      SomeFunc();
   }
   catch (Exception ex)
   {
      System.Windows.MessageBox.Show(String.Format("Oops! {0}"), ex.Message));
   }
} 
```

在发布模式下构建后，一切都很好，我们得到了这个：

> “_true 是：true 和 _false 是：false”

但是在 Dotfuscator 处理代码之后，我们得到了以下信息：

> “糟糕！MethodNotFoundException”

并且所有功能都设置为是

Dotfuscator 版本：PreEmptive ver4.9.7000 WindowsPhoneEdition

扩展有什么问题？

PS对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:19:21.607

免责声明：我的经验是使用桌面版 dotfuscator，而不是手机版。

Dotfuscator 可能决定在引用枚举的任何地方用等效的常量值替换枚举定义，从而消除对枚举类型的需要。

尝试使用 Dotfuscator 设置使枚举免于混淆，或在枚举上使用以下属性：

```
[Obfuscation(Exclude=true, ApplyToMembers=true, StripAfterObfuscation=true, Feature="renaming"]
[Obfuscation(Exclude=false, ApplyToMembers=true, StripAfterObfuscation=true, Feature="conditionalinclude")] 
```

...然后如果可行，请尝试仅使用第二个属性来允许重命名但不允许删除。

在使用 ILDASM 进行混淆检查以查看枚举类型是否仍然存在以及该 dotfuscator 是否执行预期的操作之后[。](http://msdn.microsoft.com/en-us/library/f7dy01k1%28v=vs.100%29.aspx "伊尔达斯曼")

# c# - C# isPowerOf 函数

> ID：11359694
> 
> 赞同：7
> 
> 时间：2012-07-06T09:39:37.337
> 
> 标签：c#, math, exponentiation

我有下一个功能：

```
static bool isPowerOf(int num, int power)
{
        double b = 1.0 / power;
        double a = Math.Pow(num, b);
        Console.WriteLine(a);
        return a == (int)a;
} 
```

我插入了打印功能进行分析。

如果我调用该函数：

```
isPowerOf(25, 2) 
```

它返回真，因为`5^2`等于 25。但是，如果我调用 16807，也就是`7^5`，下一个方法：

```
isPowerOf(16807, 5) 
```

在这种情况下，它会打印 '7' 但`a == (int)a`返回 false。

你能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T09:43:59.740

尝试使用小 epsilon 来计算舍入误差：

```
return Math.Abs(a - (int)a) < 0.0001; 
```

正如 harold 所建议的，如果`a`恰好比整数值略小，比如 3.99999，最好进行舍入：

```
return Math.Abs(a - Math.Round(a)) < 0.0001; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T10:04:47.933

已经提出了解决问题的比较，但实际上这里的问题是*根本不应该涉及浮点*。您想要一个涉及整数的问题的准确答案，而不是对固有的不准确测量进行的计算的近似值。

那么这还能怎么做呢？

首先想到的是作弊：

```
double guess = Math.Pow(num, 1.0 / power);
return num == exponentiateBySquaring((int)guess, power) ||
       num == exponentiateBySquaring((int)Math.Ceil(guess), power);
       // do NOT replace exponentiateBySquaring with Math.Pow 
```

只要`guess`小于 1 就可以工作。但我不能保证它总是适用于您的输入，因为并不总是满足这个条件。

So here's the next thing that comes to mind: a binary search (the variant where you search for the upper boundary first) for the `base` in `exponentiateBySquaring(base, power)` for which the result is closest to `num`. If and only if the closest answer is equal to `num` (and they are both integers, so this comparison is clean), then `num` is a `power`-th power. Unless there is overflow (there shouldn't be), that should always work.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T09:49:37.617

如果您调试代码，然后您可以在第一次比较中看到：

```
isPowerOf(25, 2) 
```

a 持有`5.0` Here 5.0 == 5 => 这就是为什么你得到 true

并在第二`isPowerOf(16807, 5)`

a 持有`7.0000000000000009`

并且因为`7.0000000000000009 != 7`=> 你是假的。和 Console.WriteLine(a) 正在截断/舍入双精度，仅显示 7

这就是为什么您需要像 Dani 的解决方案那样比较最接近的值

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T09:51:46.590

`Math.Pow`对`double`s 进行运算，因此在求根时会出现舍入误差。如果你想检查你是否找到了一个确切的力量：

*   当前执行`Math.Pow`，以提取根
*   **将结果四舍五入**到最接近的整数
*   将此整数提高到提供的功率，并检查您是否获得了提供的目标。`Math.Pow`将精确`int`到整数幂时范围内的数字

# android - 测试使用 Messenger 的远程服务

> ID：11359695
> 
> 赞同：2
> 
> 时间：2012-07-06T09:39:37.587
> 
> 标签：android, testing, service, junit

我正在开发一个 Android 远程服务，它[使用 Messenger 从/向不同的应用程序传递消息](http://developer.android.com/reference/android/app/Service.html#RemoteMessengerServiceSample)。

我在设置 JUnit 测试类时遇到了麻烦，因为`bindService()`for`ServiceTestCase<T>`类没有`bindService(Intent, ServiceConnection, int)`方法，而只有`bindService(Intent)`. 这是没有用的，因为我需要指定 a`ServiceConnection`才能监听来自服务的传入消息。

我该如何解决这种情况？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:12:37.293

我解决了这个问题

```
getContext().bindService(Intent, ServiceConnection, int) 
```

代替

```
bindService(Intent) 
```

**编辑**：我以错误的方式关注这一点。请阅读[this other question](https://stackoverflow.com/questions/11361285/android-service-not-launched-by-junit-test)以正确的方式进行。

# android - 在 android web 视图中拖放图像

> ID：11359696
> 
> 赞同：1
> 
> 时间：2012-07-06T09:39:42.177
> 
> 标签：android

我想在 android web 视图中对网页中的图像进行拖放操作。

代码是这样的。

```
WebView webView;
ImageView imageView;
ImageView shadowImageView;

private static final String IMAGEVIEW_TAG = "icon bitmap";
public static final String TAG="ResourceSharing";
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_browser);
    webView=(WebView) findViewById(R.id.webView);

    imageView=(ImageView) findViewById(R.id.downloadImage);
    webView.setWebViewClient(new WebViewController());
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadUrl("http://www.picasaweb.google.com");
    webView.clearCache(true);
    webView.setOnLongClickListener(this);
    shadowImageView=new ImageView(this);
    shadowImageView.setImageBitmap( BitmapFactory.decodeResource(getResources(), R.drawable.picasa_logo));
    shadowImageView.setTag(IMAGEVIEW_TAG);  

}
public class WebViewController extends WebViewClient {

     @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
}
@Override
public boolean onLongClick(View v) {

    HitTestResult hitTestResult=webView.getHitTestResult();
    Log.i(TAG, "Hit type"+hitTestResult.getType());
    switch (hitTestResult.getType()) {
    case HitTestResult.IMAGE_TYPE:
        Log.i(TAG, "Ïnside image type");
        imageView.setVisibility(View.VISIBLE);
        break;
    case HitTestResult.IMAGE_ANCHOR_TYPE:
        Log.i(TAG, "Ïnside image type");
        imageView.setVisibility(View.VISIBLE);
        break;
    case HitTestResult.SRC_IMAGE_ANCHOR_TYPE:
        Log.i(TAG, "Ïnside image type");
        imageView.setVisibility(View.VISIBLE);
        performDragAndDropOperation();
        break;
    default:
        break;
    }

    return true;
}
@TargetApi(11)
private void performDragAndDropOperation(){
    ClipData.Item item = new ClipData.Item((CharSequence) shadowImageView.getTag());
    ClipData dragData = new ClipData((CharSequence) shadowImageView.getTag(),new String[] { ClipDescription.MIMETYPE_TEXT_PLAIN },item);
    DragShadowBuilder shadowBuilder = new MyDragShadowBuilder(shadowImageView);
    shadowImageView.startDrag(dragData, shadowBuilder, null, 0);
}

 private static class MyDragShadowBuilder extends View.DragShadowBuilder {
        private static Drawable shadow;
            public MyDragShadowBuilder(View v) {
                super(v);
                shadow = new ColorDrawable(Color.LTGRAY);
            }
            @Override
            public void onProvideShadowMetrics (Point size, Point touch){
                int width;
                int height;
                Log.i(TAG, "calling getVIew" +getView());
                width = getView().getWidth() / 2;
                height = getView().getHeight() / 2;
                shadow.setBounds(0, 0, width, height);
                size.set(width, height);
                touch.set(width / 2, height / 2);
                Log.i(TAG, "calling getVIew" +getView());
            }
            @Override
            public void onDrawShadow(Canvas canvas) {
                Log.i(TAG, "calling getVIew" +getView());
                shadow.draw(canvas);
            }
        } 
```

但是，当我运行应用程序并在长按后尝试拖动图像时，logcat 中出现错误，无法在 Android 中启动拖动并出现空指针异常。

寻求帮助

# database - 如何在数据库中构造多个身份数据

> ID：11359702
> 
> 赞同：2
> 
> 时间：2012-07-06T09:40:03.870
> 
> 标签：database, schema

我正在为信用局设计一个数据库，并正在寻求一些指导。

他们从银行、小额信贷机构、Saccos、公用事业公司等收到的数据带有各种类型的 ID。例如，使用国民身份证和护照开立银行账户是完全合法的。让我头疼的场景是 Customer1 将使用**护照**在 bank1 中获得信贷额度（现在称为贷款） ，然后去 bank2 并使用他们的**NationalID**和 Bank3 使用他们的**MilitaryID**获得另一笔贷款。最终，当这些数据从银行传到局时，它会被视为 3 个不同的人，而我们知道它实际上是 1 个人。在这一点上，作为一个局，我们无能为力。

但是，（目前）一种出路是使用政府注册中心，它提供了一个存储护照和 IDS 的存储库。因此，一旦我们查询此信息并获得响应，我如何在数据库中显示 Passport_X 与 NationalID_Y 和 MilitaryNumber_Z 相关？

同样，可以在各种订单状态中捕获一个人的姓名。Bank1 可以做 FName、LName、OName，而 Bank3 只能做 LName、FName。我如何存储这些名称？

即使针对一种 ID 类型（例如 NationalID），您也经常会发现拼写错误的名称或缺少名称。因此，我们数据库中的一个 NationalID 最终可能有大约 6 个不同的名字，因为这个人的名字在他进行交易的各个银行中捕获的不同。

而这只是冰山一角。我们在地址、电话号码等方面存在问题。

您能否了解我将如何构建我的数据库以确保我们从所有银行获取所有数据并提供有关个人的最准确信息？更好的是，你有这种设置的经验吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:47:20.240

> 如何在数据库中显示 Passport_X 与 NationalID_Y 和 MilitaryNumber_Z 相关？

琐碎的。

您拥有一个身份表，如果身份链接到另一个身份，则该表具有 AlternateId 字段。使用您创建的第一个身份作为主身份。任何替代方案都会有 AlternateId 指向它。

您需要将身份与其中的数据分开，这样您就可以拥有它的替代版本，可能带有来源和时间戳。您需要 oto 可能完全支持版本控制并将不同的身份相互绑定作为替代方案，包括可能通过算法与您的数据的“官方”版本（即合并）生成“主身份”。

细节很复杂 - 大多数情况下，您必须在不影响性能的情况下做出很多妥协，所以最后请聘请专家。考虑到您甚至可能不知道的限制（应用程序方面），有 20 多年经验寻找最佳解决方案的资深数据库设计师或架构师是有原因的。

> 更好的是，你有这种设置的经验吗？

是的。尝试财务信息。股票代码/提要/定义不一定兼容，并且因您获得它而异。任何重要的设置都有不同的数据馈送，这些数据馈送可能会显示相同的项目略有不同，有时是错误的。不同的名称，有时不同的价格（例如：ES，CME 集团，是每点 50 美元，但在 TT Fix 上是 5 - 弥补，价格乘以 10，因此 1000.25 得到 10002.5）。这是同一条整合线，而且很臭。

大量代码，大量适当的数据库设计，重做六次以获得适当的性能。可悲的是，这很棘手。

# sql-server - 我可以在不直接指定数据库名称的情况下查询数据库属性吗？

> ID：11359703
> 
> 赞同：1
> 
> 时间：2012-07-06T09:40:08.743
> 
> 标签：sql-server, azure, azure-sql-database

我正在尝试使用[此答案](https://stackoverflow.com/a/11354923/57428)中的代码查询 SQL Azure 数据库的最大大小：

```
SELECT CONVERT(BIGINT, DATABASEPROPERTYEX('DatabaseOfInterestName', 'MaxSizeInBytes')) / 1024 
```

问题是我需要在那里传递数据库名称。由于我需要在具有不同配置的 Windows Azure 应用程序中使用此代码 - 用于生产用途、自动构建和测试 - 并且每个配置都将使用自己的数据库，我必须将数据库名称传递到该 SQL 查询中，这就是一些我的代码中的额外接线。

有没有办法告诉`DATABASEPROPERTYEX()`“从当前数据库”查询属性而不明确指定数据库名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:44:41.783

该`DB_NAME()`功能可以完成您的工作吗？

```
SELECT CONVERT(BIGINT, DATABASEPROPERTYEX(DB_NAME(), 'MaxSizeInBytes')) / 1024 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T09:49:07.977

不，是的。不，您不能让 DATABASEPROPERTYEX 使用当前数据库。

但是有 SQL 来获取当前数据库；）

[http://blog.sqlauthority.com/2008/02/12/sql-server-get-current-database-name/](http://blog.sqlauthority.com/2008/02/12/sql-server-get-current-database-name/)

答案是：

选择 DB_NAME() 作为数据库名称

;)

使用 DB_NAME() 作为 DATABASEPROPERTYEX 的输入。

# python - Windows Server 上的 Python - 让用户访问共享文件

> ID：11359713
> 
> 赞同：1
> 
> 时间：2012-07-06T09:40:36.230
> 
> 标签：python, file, windows-server-2008, shared

我需要找到哪个进程、用户或电脑打开了某个文件。我可以通过 win 服务器附带的实用程序手动执行此操作，但我想编写脚本，因为我正在处理数百个文件。

有什么想法，建议吗？

基本上是以下信息的列表： ![在此处输入图像描述](../Images/0253f2115e8949395a18809711a1a109.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:06:09.330

要获取此信息，需要一些未记录的 Win32 API。你可以`handle.exe` 从使用它们的 sysinternals 中调用类似的东西，但我建议你使用`psutil`PyPi 提供的模块。这是我碰巧拥有的一些示例代码（Py3），其中列出了所有正在使用的文件，您应该可以对其进行修改：

```
import psutil

for proc in psutil.process_iter():
    try:
        flist = proc.get_open_files()
        if flist:
            print(proc.pid,proc.name)
            for nt in flist:
                print("\t",nt.path)

    except psutil.NoSuchProcess as err:
        print("****",err) 
```

请注意，这类查询总是有可能出现竞争条件——您不知道进程在什么时候打开或关闭文件，甚至不知道开始和结束。

PS：如果您使用的是 Python 3，我在安装 psutil 时遇到了一些问题，但使用 setup.py 上的 2to3 转换实用程序解决了这些问题。

# c++ - 为什么 cv::meanStdDev 函数在调试时失败并出现异常

> ID：11359721
> 
> 赞同：4
> 
> 时间：2012-07-06T09:41:01.020
> 
> 标签：c++, ios, opencv

我正在为 ios 平台开发一个 opencv 应用程序。我自己为调试和发布方案编译了 opencv，但是当我尝试`cv::meanStdDev`使用 Debug 方案运行该函数时，应用程序失败并出现异常（使用 Release 可以正常工作）。测试功能很简单：

```
float list[] = {1.2,1.2,1.3,0.3,6.5,2.2,0.9,0.8,0.9};
cv::Mat test(1,9,CV_32F, list);
cv::Scalar mean1, stddev1;
cv::meanStdDev(test, mean1, stddev1);
printf("[%f, %f]", mean1.val[0], stddev1.val[0]); 
```

此函数在 Release 方案上正常工作，但在 Debug 上，它会引发如下异常：

```
OpenCV Error: Assertion failed (dims == 2 && ((sizes[0] == sz.height && sizes[1] == sz.width) || (allowTransposed && sizes[0] == sz.width && sizes[1] == sz.height))) in create, file /Users/jgoenetxea/libraries/OpenCV-2.4.0/trunk/opencv/modules/core/src/matrix.cpp, line 1375
terminate called throwing an exception 
```

此行是矩阵类的“创建”函数。在这一点上，该`kind()`函数在同一矩阵的调试和发布方案中给出了不同的值。When Debug scheme is selected, because of the result of this `kind()`function, the execution checks some data with a `CV_Assert`function invocation, and then fails.

有任何想法吗？有人知道我可以检查什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:40:08.697

这是你的整个程序吗？如果不是，则可能会出现堆损坏，这在 OpenCV 上很常见，因为对 Mat 元素的访问错误。

前任：

```
Mat<uchar> mat(2,2);
mat.at<float>(1,1)=0.1; 
```

如果你写的程序段之前有这样的代码，你的堆有可能损坏了，那么你必须修复它。在发布模式下，您可能正在破坏不干扰这部分代码的另一个区域，但在调试中它看起来确实如此。

但是，如果这是您的全部代码，我就帮不上什么忙了……它看起来对我来说是正确的。

# python - 如何创建 Python Pyramid 视图类而无需为每个方法指定“名称”

> ID：11359722
> 
> 赞同：2
> 
> 时间：2012-07-06T09:41:01.147
> 
> 标签：python, forms, post, views, pyramid

我的 Python Pyramid 项目中通过 add_handler 添加了几个视图类：

```
config.add_handler('export_index', '/export', handler=ExportViews, action='index')

class ExportViews(ConfigViewBase):
    @action(request_method='POST', name='index',
            request_param='ftp_export.form.submitted')
    @action(request_method='POST', name='index', xhr=True, renderer='json',
            request_param='ftp_export.form.submitted')
    def ftp_export(self):
         #process form
         return {}

    @action(request_method='GET')
    def index(self):
        return {} 
```

是否可以做同样的事情：

```
config.add_handler('export_index', '/export', handler=ExportViews)

class ExportViews(ConfigViewBase):
    @action(request_method='POST',
            request_param='ftp_export.form.submitted')
    @action(request_method='POST', xhr=True, renderer='json',
            request_param='ftp_export.form.submitted')
    def ftp_export(self):
         #process form
         return {}

    @action(request_method='GET')
    def __call__(self):
        return {} 
```

所以当浏览器获取页面时调用了 __call__ ，当我在同一页面上发布表单时应该调用 ftp_export 。现在我明白了`page not found error`

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:38:32.993

你可以通过遍历来做到这一点。穿越岩石:)

```
class Root(object):
    def  __getitem__(self, name):
        if name == "export":
            return ExportSomething(self)
        if name == "export_something_else":
            return ExportSomethingElse(self)

class ExportSomething(object):

    implements(IViewable, IExportable)

    def view(self, request):
        return "Hi"

    def export(self, request):
        return "something else"

@view_config(context=IViewable, request_method="GET")
def view_viewable(conext, request):
    return context.view(request)

@view_config(context=IExportable, request_method="POST")
def export_exportable(conext, request):
    return context.export(request) 
```

然后你可以实现一堆`ExportThis`和`ExportThat`类，让它们实现`IViewable`和`IExportable`接口，让它们返回`Root.__getitem__`，一切都神奇地工作。或者，如果您不需要多个导出器，您可以省略接口并将视图直接绑定到`ExportSomething`类。`ExportSomething`或者您可以在**getitem**中实例化不同的实例并使其...我不知道，查看/导出不同的文件/报告。

# java - 我应该包含哪些所有 jar 文件才能在我的项目中使用 stanford 解析器？

> ID：11359724
> 
> 赞同：2
> 
> 时间：2012-07-06T09:41:07.277
> 
> 标签：java, parsing, nlp, stanford-nlp

我尝试创建一个新项目来处理斯坦福解析器。

我已将 stanford-postagger.jar 和 stanford-parser-2012-05-22-models.jar 包含到项目中。还有什么我应该补充的吗？

我无法使用 LexicalizedParser。我收到一个错误：`LexicalizedParser cannot be resolved to a type" in the line ...`

```
LexicalizedParser lp = LexicalizedParser.loadModel("edu/stanford/nlp/models/lexparser/englishPCFG.ser.gz"); 
```

我正在使用 Eclipse IDE。

谢谢， 哈里什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:11:53.663

LexicalizedParser 在 stanford-corenlp.jar

# triggers - 想要在 SugarCRM 的自定义模块中显示自动生成的 id

> ID：11359725
> 
> 赞同：0
> 
> 时间：2012-07-06T09:41:11.533
> 
> 标签：triggers, sugarcrm, auto-generate

我正在使用 Sugar Enterprise 6.4.0 并希望在自定义模块编辑和详细信息视图中显示不可编辑的字段。该id需要自动生成，需要在用户点击自定义模块新建记录时显示在界面中。

因为我是 Sugar 的新手，任何人都可以帮助我完成这项任务。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:22:40.903

您可以在模块的 vardefs 中设置字段本身的只读属性...

```
$dictionary['<<module>>']['fields']['<<fieldname>>']['readonly'] = true; 
```

然后，在 custom/modules/<>/views/view.edit.php 中添加一些逻辑，它会为您自动生成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T04:33:19.250

我只是这样做了，使用带有类似代码的 after_save_hook（不准确）：

```
$bean->name = $bean->id; 
```

一旦您在 Sugar 中保存记录，就会自动生成一个 ID。然后我根本不将 ID 包含在编辑视图中，只包含详细信息和列表视图。我认为将其包含在编辑视图中没有任何意义，因为它不可编辑。

# php - PHP 延迟字符串插值

> ID：11359727
> 
> 赞同：4
> 
> 时间：2012-07-06T09:41:15.903
> 
> 标签：php, string, string-interpolation

有没有办法为以后的插值“准备”一个字符串（不使用自定义扩展函数）？
例如：

```
class Test {
    private static $STR_VAL = "the val is $v";

    public static function printVal($v) {
        echo self::$STR_VAL;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T09:44:24.697

[`sprintf()`](http://php.net/sprintf)

```
class Test {
    private static $STR_VAL = "the val is %s";

    public static function printVal($v) {
        echo sprintf(self::$STR_VAL, $v);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-10T22:02:04.390

如果要保留实际变量插值的解决方案：

```
function interpolate_string($string, $vars) {
    extract($vars);
    return eval('return "' . addslashes($string) . '";');
}

class Test {
    //Note the single quote to prevent interpolation here
    private static $STR_VAL = 'the val is $v'; 

    public static function printVal($v) {
        echo interpolate_string(self::$STR_VAL, compact('v'));
    }
} 
```

虽然我在这段特定代码中没有看到任何明显的攻击，但应该注意的是，在处理不受信任的字符串时，使用[eval()可能是代码注入的载体。](http://php.net/manual/en/function.eval.php)

# html - CSS 中的这个运算符 (::) 是什么意思？

> ID：11359728
> 
> 赞同：25
> 
> 时间：2012-07-06T09:41:25.400
> 
> 标签：html, css, google-chrome, webkit, css-selectors

我[在 WebKit 中看到了类似自定义滚动条的CSS](http://css-tricks.com/custom-scrollbars-in-webkit/)

```
body::-webkit-scrollbar {
    width: 10px;
    height: 13px;
    background-color: white;
    color: #EBEBEB;
    border:none;
} 
```

这指定了 WebKit 浏览器的 CSS。但是这个操作符 (::) 在 CSS 中是什么意思呢？

我在哪里可以找到 CSS 中的其他此类运算符？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-06T09:43:20.213

它表明后面是一个“伪元素”。从[CSS 选择器级别 3 规范](http://www.w3.org/TR/css3-selectors/#pseudo-elements)：

> 伪元素由两个冒号 (::) 后跟伪元素的名称组成。

一个伪元素创建了一个“关于文档树的抽象”：

> 伪元素创建超出文档语言指定的文档树的抽象。例如，文档语言不提供访问元素内容的第一个字母或第一行的机制。**伪元素允许作者引用这些否则无法访问的信息。**伪元素还可以为作者提供一种方法来引用源文档中不存在的内容（例如，::before 和::after 伪元素提供对生成内容的访问）。

例如，`::webkit-scrollbar`伪元素提供了一种机制来引用 webkit 滚动条，否则将无法访问。另一个例子：`::first-letter`伪元素提供了一种方法来引用元素的第一个字母（如果它前面没有任何其他内容）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-06T09:46:02.670

在 css3 中，我们使用双冒号（::) 表示**伪元素**和单冒号（:) 表示**伪类**

> 单冒号语法（例如“:before”或“:first-child”）是CSS3之前的所有CSS版本中用于伪类和伪选择器的语法。随着 CSS3 的引入，为了区分伪类和伪元素（是的，它们是不同的），在 CSS3 中所有伪元素都必须使用双冒号语法，并且所有伪类都必须使用单冒号语法。

阅读这篇文章[http://www.impressivewebs.com/before-after-css3/](http://www.impressivewebs.com/before-after-css3/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-06T09:43:48.233

它用于定义一个[伪元素](http://www.w3.org/TR/selectors/#pseudo-elements)。作为文档中的示例：

```
p::first-line { text-transform: uppercase } 
```

这会修改第一行`p`元素。没有选择真正的 DOM 元素，这就是它是伪元素的原因。

`body`在您的情况下，它会在元素内修改 WebKit 中的滚动条：

```
body::-webkit-scrollbar 
```

您的文档中没有滚动条元素，但这仍然允许您在 HTML 页面中设置滚动条样式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T09:46:26.663

这个运算符是 CSS3 中的新添加。它的意思是伪元素。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-06T09:51:38.617

我想我会添加这个，因为人们很难理解它的实际含义：

基本上，这是一种让文档以一种使用现有标记无法实现的方式格式化的方法。W3 规范中有一个很好的例子：

这是 ::first-letter 伪元素的示例

原始 HTML 片段

```
<div>
<p>The first text. 
```

应用伪元素后的虚构标记

```
<div>
<p><div::first-letter><p::first-letter>T</...></...>he first text. 
```

可以看到——原来的 HTML 指定了一个 div 和 ap，但是没有办法使用标准的 CSS 来格式化第一个字母，所以添加了伪元素，可以修改第一个字母

伪元素允许你做这样的事情..

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-06T10:10:39.533

[谷歌](https://www.google.com/webhp?q=css+double+colon+notation)是你的朋友。

## 伪元素

> 伪元素创建超出文档语言指定的文档树的抽象。例如，文档语言不提供访问元素内容的第一个字母或第一行的机制。伪元素允许作者引用这些否则无法访问的信息。伪元素还可以为作者提供一种方法来引用源文档中不存在的内容（例如，::before 和::after 伪元素提供对生成内容的访问）。
> 
> 伪元素由两个冒号 (::) 后跟伪元素的名称组成。
> 
> 这个 :: 符号是由当前文档引入的，以便在伪类和伪元素之间建立区分。为了与现有样式表兼容，用户代理还必须接受之前在 CSS 级别 1 和 2 中引入的伪元素的单冒号表示法（即 :first-line、:first-letter、:before 和 :after）。本规范中引入的新伪元素不允许这种兼容性。

可在[http://www.w3.org/TR/css3-selectors找到](http://www.w3.org/TR/css3-selectors)

# arrays - F# 可变数组和基本类在单元测试中的行为不符合预期

> ID：11359730
> 
> 赞同：0
> 
> 时间：2012-07-06T09:41:29.087
> 
> 标签：arrays, class, f#, mutable

我正在尝试学习 F# 并开始尝试一些简单的类，但这些类的行为并不像预期的那样。

我一定是误解了一些简单的基本原理。如果这个问题太基本了，我们深表歉意，但我们将不胜感激。

无论如何，我第一次应用了测试驱动的开发方法，现在我更好地体会到了它的好处。

以下源码探索：

1.  定义一个实用函数 (optionIntTo_s)。
2.  定义类 TUnitTester - 其目的是协助进行单元测试。
3.  定义实验类 TOrderItem - 它包含一个可变选项字段 fquantity（表示 SQL null else 整数值）。
4.  定义另一个实验类 TOrderItems - 它包装了一个 TOrderItem 对象数组。
5.  对 TOrderItem 类进行 4 次测试；这些都按预期工作。
6.  对 TOrderItems 类进行另外 10 次测试；其中两个失败（总共进行了 14 次测试中的第 6 次和第 8 次）！

任何帮助解释这些失败的测试将不胜感激。

这是源代码，然后是我得到的输出：

```
//-----------------------------------------------------------------------------------------------------------------
// Utility Funcions
//-----------------------------------------------------------------------------------------------------------------
let optionIntTo_s(aValue : option<int>) = 
    match aValue with
    | None    -> "null"
    | Some(_) -> sprintf "%d" (Option.get(aValue))

//-----------------------------------------------------------------------------------------------------------------
// Class TUnitTester
//-----------------------------------------------------------------------------------------------------------------
type TUnitTester = class
    //----------------------------------
    // Field Definitions
    //----------------------------------
    val mutable ftestCount : int
    val mutable fsuccessCount : int

    //----------------------------------
    // Constructors
    //----------------------------------
    new ()  =
        {ftestCount = 0;
         fsuccessCount = 0}

    //----------------------------------
    // Methods
    //----------------------------------
    member this.assertEqual(aTestValue, aExpectation, aDescription) = 
        this.ftestCount <- this.ftestCount + 1

        if (aTestValue = aExpectation) then
            this.fsuccessCount <- this.fsuccessCount + 1
            printfn "Test %d: assertEqual succeeded: expected %A: got %A; %s" this.ftestCount aExpectation aTestValue aDescription
        else
            printfn "Test %d: assertEqual failed:    expected %A: got %A; %s" this.ftestCount aExpectation aTestValue aDescription

    member this.assertFalse(aDescription, aTestValue : bool) = 
        this.ftestCount <- this.ftestCount + 1

        if (aTestValue) then
            this.fsuccessCount <- this.fsuccessCount + 1
            printfn "assertFalse succeeded: expected false: got false; %s" aDescription
        else
            printfn "assertFalse failed:    expected false: got true;  %s" aDescription

    member this.assertTrue(aDescription, aTestValue : bool) =
        this.ftestCount <- this.ftestCount + 1

        if (aTestValue) then
            this.fsuccessCount <- this.fsuccessCount + 1
            printfn "assertTrue  succeeded: expected true: got true;  %s" aDescription
        else
            printfn "assertTrue  failed:    expected true: got false; %s" aDescription

    member this.printStatistics() =
        printfn "total tests = %d; successes = %d; failures = %d"  this.ftestCount this.fsuccessCount (this.ftestCount - this.fsuccessCount)
end;;

//-----------------------------------------------------------------------------------------------------------------
// Class TOrderItem
//    Ref: "F# option cheat sheet" - http://missingfaktor.blogspot.com.au/2012/02/f-option-cheat-sheet.html
//-----------------------------------------------------------------------------------------------------------------
type TOrderItem = class
    //----------------------------------
    // Field Definitions
    //----------------------------------
    val mutable fquantity : option<int>

    //----------------------------------
    // Properties
    //----------------------------------
    member this.quantity  with get() = Option.get(this.fquantity) and 
                               set(aValue : int) = this.fquantity <- Some(aValue)

    member this.isNull    with get() = Option.isNone(this.fquantity)
    member this.isNotNull with get() = Option.isSome(this.fquantity)

    //----------------------------------
    // Constructors
    //----------------------------------
    new ()  =
        {fquantity = None;}

    new (aValue : int)  =
        {fquantity = Some(aValue);}

    //----------------------------------
    // Methods
    //----------------------------------
    member this.to_s() = optionIntTo_s(this.fquantity)
end;;

//-----------------------------------------------------------------------------------------------------------------
// Class TOrderItems
//-----------------------------------------------------------------------------------------------------------------
type TOrderItems = class
    //----------------------------------
    // Field Definitions
    //----------------------------------
    val fOrderItems : TOrderItem []

    //----------------------------------
    // Properties
    //----------------------------------
    member this.orderItems with get() = this.fOrderItems

    //----------------------------------
    // Constructors
    //----------------------------------
    new (aLength : int)  =
        { fOrderItems = Array.create aLength (TOrderItem())}

    //----------------------------------
    // Methods
    //----------------------------------
    member this.Item i = this.fOrderItems.[i]     //Translates to the operator this.[i]

    member this.setAll(aValue : int) = 
        for i = 0 to (Array.length this.fOrderItems) - 1 do
            this.fOrderItems.[i].quantity <- aValue

    member this.setFromCombination(aScale1, aScale2, (aOrderItems1 : TOrderItems), (aOrderItems2 : TOrderItems)) =
        for i = 0 to (Array.length this.fOrderItems) - 1 do
            this.fOrderItems.[i].quantity <- aScale1 * aOrderItems1.[i].quantity + aScale2 * aOrderItems2.[i].quantity

    member this.setFromDifference((aOrderItems1 : TOrderItems), (aOrderItems2 : TOrderItems)) =
        this.setFromCombination(1, -1, aOrderItems1, aOrderItems2)

    member this.setFromSum((aOrderItems1 : TOrderItems), (aOrderItems2 : TOrderItems)) =
        this.setFromCombination(1, 1, aOrderItems1, aOrderItems2)

    member this.setItem i (aValue : int) =         //TODO NUKE THIS METHOD LATER....
        this.fOrderItems.[i].quantity <- aValue

    member this.to_s() = 
        Array.fold (fun (accumulator : string) (item : TOrderItem) -> accumulator + item.to_s() + "; ") "" this.fOrderItems
        |> (fun (x) -> "[| " + x + "|]")
end;;

//-----------------------------------------------------------------------------------------------------------------
// Test Classes TOrderItem and TOrderItems
//    (A) Create unit tester instance.
//-----------------------------------------------------------------------------------------------------------------
let myTester = TUnitTester()

//-----------------------------------------------------------------------------------------------------------------
//    (B) Test Class TOrderItem
//-----------------------------------------------------------------------------------------------------------------
let myOrderItem = TOrderItem()
myTester.assertEqual(myOrderItem.to_s(), "null", "myOrderItem.to_s()")        //Test 1 - OK

myOrderItem.quantity <- 8000
myTester.assertEqual(myOrderItem.quantity, 8000, "myOrderItem.quantity")      //Test 2 - OK

myOrderItem.quantity <- 9000
myTester.assertEqual(myOrderItem.quantity, 9000, "myOrderItem.quantity")      //Test 3 - OK
myTester.assertEqual(myOrderItem.to_s(), "9000", "myOrderItem.to_s()")        //Test 4 - OK

//-----------------------------------------------------------------------------------------------------------------
//    (C) Test Class TOrderItems
//-----------------------------------------------------------------------------------------------------------------
let myOrderItems = TOrderItems(4)
myTester.assertEqual(myOrderItems.to_s(), "[| null; null; null; null; |]", "myOrderItems.to_s()")  //Test 5 - OK

myOrderItems.[2].quantity <- 1000
myTester.assertEqual(myOrderItems.to_s(), "[| null; null; 1000; null; |]", "myOrderItems.to_s()")  //Test 6 - Fails!

myOrderItems.setAll 5000
myTester.assertEqual(myOrderItems.[2].quantity, 5000, "myOrderItems.[2].quantity")                 //Test 7 - OK

myOrderItems.setItem 1 9999
myTester.assertEqual(myOrderItems.[0].quantity , 5000, "myOrderItems.[0].quantity")                //Test 8 - Fails!
myTester.assertEqual(myOrderItems.[1].quantity , 9999, "myOrderItems.[1].quantity")                //Test 9 - OK

let myOrderItems1 = TOrderItems(4)
let myOrderItems2 = TOrderItems(4)
let myOrderItems3 = TOrderItems(4)
let myOrderItems4 = TOrderItems(4)
let myOrderItems5 = TOrderItems(4)

myOrderItems1.setAll 5000
myOrderItems2.setAll 4000

myTester.assertEqual(myOrderItems1.to_s(), "[| 5000; 5000; 5000; 5000; |]", "myOrderItems1.to_s()")      //Test 10 - OK
myTester.assertEqual(myOrderItems2.to_s(), "[| 4000; 4000; 4000; 4000; |]", "myOrderItems2.to_s()")      //Test 11 - OK

myOrderItems3.setFromCombination(2, 3, myOrderItems1, myOrderItems2)
myTester.assertEqual(myOrderItems3.to_s(), "[| 22000; 22000; 22000; 22000; |]", "myOrderItems3.to_s()")  //Test 12 - OK

myOrderItems4.setFromSum(myOrderItems1, myOrderItems2)
myTester.assertEqual(myOrderItems4.to_s(), "[| 9000; 9000; 9000; 9000; |]", "myOrderItems4.to_s()")      //Test 13 - OK

myOrderItems5.setFromDifference(myOrderItems1, myOrderItems2)
myTester.assertEqual(myOrderItems5.to_s(), "[| 1000; 1000; 1000; 1000; |]", "myOrderItems5.to_s()")      //Test 14 - OK

//-----------------------------------------------------------------------------------------------------------------
//    (D) Report test statistics.
//-----------------------------------------------------------------------------------------------------------------
myTester.printStatistics() 
```

最后，这是我在 MAC OS X 上的 mono 下从 Microsoft (R) F# 2.0 Compiler build 2.0.0.0 获得的输出如下：

```
Microsoft (R) F# 2.0 Compiler build 2.0.0.0
Copyright (c) Microsoft Corporation. All Rights Reserved.
Test 1: assertEqual succeeded: expected "null": got "null"; myOrderItem.to_s()
Test 2: assertEqual succeeded: expected 8000: got 8000; myOrderItem.quantity
Test 3: assertEqual succeeded: expected 9000: got 9000; myOrderItem.quantity
Test 4: assertEqual succeeded: expected "9000": got "9000"; myOrderItem.to_s()
Test 5: assertEqual succeeded: expected "[| null; null; null; null; |]": got "[| null; null; null; null; |]"; myOrderItems.to_s()
Test 6: assertEqual failed:    expected "[| null; null; 1000; null; |]": got "[| 1000; 1000; 1000; 1000; |]"; myOrderItems.to_s()
Test 7: assertEqual succeeded: expected 5000: got 5000; myOrderItems.[2].quantity
Test 8: assertEqual failed:    expected 5000: got 9999; myOrderItems.[0].quantity
Test 9: assertEqual succeeded: expected 9999: got 9999; myOrderItems.[1].quantity
Test 10: assertEqual succeeded: expected "[| 5000; 5000; 5000; 5000; |]": got "[| 5000; 5000; 5000; 5000; |]"; myOrderItems1.to_s()
Test 11: assertEqual succeeded: expected "[| 4000; 4000; 4000; 4000; |]": got "[| 4000; 4000; 4000; 4000; |]"; myOrderItems2.to_s()
Test 12: assertEqual succeeded: expected "[| 22000; 22000; 22000; 22000; |]": got "[| 22000; 22000; 22000; 22000; |]"; myOrderItems3.to_s()
Test 13: assertEqual succeeded: expected "[| 9000; 9000; 9000; 9000; |]": got "[| 9000; 9000; 9000; 9000; |]"; myOrderItems4.to_s()
Test 14: assertEqual succeeded: expected "[| 1000; 1000; 1000; 1000; |]": got "[| 1000; 1000; 1000; 1000; |]"; myOrderItems5.to_s()
total tests = 14; successes = 12; failures = 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:27:38.253

改变

```
Array.create aLength (TOrderItem()) 
```

至

```
Array.init aLength (fun t -> TOrderItem()) 
```

第一个创建一个包含许多副本的数组 - 它真的是为使用而设计的`int`，第二个做你想要它做的事情

此外，将来它有助于发布更少的带有问题的代码以使其更简单

# apache-flex - 组合框实例不起作用

> ID：11359735
> 
> 赞同：0
> 
> 时间：2012-07-06T09:41:53.593
> 
> 标签：apache-flex, actionscript

我有一段代码从 SelectComponent.mxml 文件中的组合框中读取值，并且通过制作 SelectComponet 的对象在 Main.mxml 文件中读取该组件-请检查 Main.mxml 中的代码我只得到第一个输出SelectComponent.mxml 中 Combobox 的值，无论我从该组合框中选择什么值，我都会得到仅对应于第一个值的输出，请告诉我如何获取仅对应于该值的引用。

```
this file is Main.mxml
**<?xml version="1.0" encoding="utf-8"?>
  <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
           xmlns:views="Views.*"
           xmlns:mx="library://ns.adobe.com/flex/mx"
           minWidth="955" minHeight="600">
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<fx:Script>

    <![CDATA[

        import Model.SampleModel;

        import Views.SelectComponet;

        import flash.utils.getDefinitionByName;

        import mx.controls.*;
        import mx.core.Repeater;
        import mx.core.UIComponent;

         var mode:SampleModel = SampleModel.getInstace();   
         var model = ["Paritosh","Akhil","Chirag","Suresh"];
        private function generateComponent(e:MouseEvent):void{

         var selectedItemObject:SelectComponet = new SelectComponet();

         var name1:String  = selectedItemObject.comb.selectedItem.toString();
         mx.controls.Alert.show(name1);
         var val:String = "mx.controls."+name1;
         var cls:Class = getDefinitionByName(val) as Class;
         var instance:UIComponent = new cls(); 
         mode.selectedComponent = instance.className;

        if (instance) {
            switch (instance.className) {
                 case "ComboBox":
                     ComboBox(instance).dataProvider = model;
                     v2.removeAllChildren();
                     v2.addChild(instance);

                      break;
                 case "CheckBox":
                      v2.removeAllChildren();

                     for(var i:int=0;i<model.length;i++){
                    var instance:UIComponent = new cls();
                    CheckBox(instance).label = model[i];
                     v2.addChild(CheckBox(instance));  
                     }
                     break;
                 case "List":
                     List(instance).dataProvider = model;
                     v2.removeAllChildren();
                     v2.addChild(instance);
                     break;
                 case "DataGrid":
                     DataGrid(instance).dataProvider = model;
                     v2.removeAllChildren();
                     v2.addChild(instance);
                     break;
             }

         }
        }
    ]]>
</fx:Script>
<mx:ApplicationControlBar width="946" height="44">
    <mx:Label text="Dynamic Component Generation"/>

</mx:ApplicationControlBar>

<mx:HDividedBox x="10" y="52" width="935" height="409">
    <mx:VBox id="v1" width="350" height="447" horizontalScrollPolicy="on"
             verticalScrollPolicy="off">
        <mx:Label text="Select Output Format"/>
        <views:SelectComponet id = "comb2"/>
        <mx:ComboBox id="comb1">

            <mx:dataProvider>
                <fx:String>CheckBox</fx:String>
                <fx:String>ComboBox</fx:String>
                <fx:String>List</fx:String>
                <fx:String>DataGrid</fx:String>
            </mx:dataProvider>
        </mx:ComboBox>

    <mx:Button id="butt" label="Get Output"      click="generateComponent(event)"/> 

    </mx:VBox>
    <mx:VBox id="v2" width="350" height="447" horizontalScrollPolicy="on"
             verticalScrollPolicy="off">

    </mx:VBox>
</mx:HDividedBox>

  </s:Application>**

     and this is SelectComponent.mxml

  **<?xml version="1.0" encoding="utf-8"?>
  <s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
     xmlns:s="library://ns.adobe.com/flex/spark" 
     xmlns:mx="library://ns.adobe.com/flex/mx" width="400" height="300">
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->

  </fx:Declarations>
  <fx:Script>
    <![CDATA[
          import Model.SampleModel;
          private var model:SampleModel = SampleModel.getInstace();

    ]]>
    <mx:ComboBox id="comb">

  <mx:dataProvider>
      <fx:String>ComboBox</fx:String>
      <fx:String>CheckBox</fx:String>
      <fx:String>List</fx:String>
      <fx:String>DataGrid</fx:String>
  </mx:dataProvider>
  </mx:ComboBox>

  </s:Group>** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:53:44.210

问题似乎在这里：

```
 var selectedItemObject:SelectComponet = new SelectComponet();

     var name1:String  = selectedItemObject.comb.selectedItem.toString(); 
```

您不是从实际组合框中检索值，而是从函数中创建的另一个隐藏组合框

您应该使用“comb2.comb.selectedItem”而不是“selectedItemObject.comb.selectedItem”

祝你今天过得愉快 ！

# lua - LUA 变量作为表键

> ID：11359737
> 
> 赞同：2
> 
> 时间：2012-07-06T09:42:11.120
> 
> 标签：lua

我创建并填充一个表：

table.insert(logTable, { [probeName] = "日志文本" }

这是在 [key] 部分中使用变量的正确方法吗？

我在想 lua 将其解释为整数而不是字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T17:27:32.203

**{ [probeName] = "log text" }**将创建一个由变量 probeName 的值索引的文字表。所以这将取决于该值的类型。它可以是整数、字符串、函数或表等。

所以：

```
probeName = 'abc'
for k, v in pairs({ [probeName] = "log text" }) do print(type(k), k, v) end
probeName = 123
for k, v in pairs({ [probeName] = "log text" }) do print(type(k), k, v) end
probeName = { 'another table' }
for k, v in pairs({ [probeName] = "log text" }) do print(type(k), k, v) end 
```

产生输出：

```
string  abc log text
number  123 log text
table   table: 0xfa6050 log text 
```

现在，**table.insert(logTable, { [probeName] = "log text" }**实际上会采用该文字表并将其插入到另一个具有整数索引的表 (logTable) 中。因此 logTable 将包含一堆整数索引的表条目，每个都有一个值（日志文本），由某个值（probeName）作为键。使用**ipairs**对其进行迭代。如果您希望通过探针名称将所有日志累积到一个表中，则需要执行类似**logTable [ probeName] = "log text"这实际上更简单。用****pairs**遍历它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:50:57.107

如果`probeName`是一个数字，Lua 会这样解释它，但它*不会*将包含数字的字符串转换为数字。如果它是一个数字并且您想将其转换为字符串，您可以使用强制转换 ( `["" .. probeName]`) 或字符串格式化 ( `[string.format("%d", probeName)]`)。

# mysql - 插入时Mysql错误1064

> ID：11359743
> 
> 赞同：-1
> 
> 时间：2012-07-06T09:42:29.347
> 
> 标签：mysql, mysql-error-1064

我是 MySql 的新手。我创建了一个程序：

```
DELIMITER $$

CREATE PROCEDURE `sampledb`.`InsertSample`
(
    IN aName VARCHAR(20),
    IN aVersion VARCHAR(10),
    IN pName VARCHAR(50),
    OUT InsertStatus VARCHAR(30)
)
BEGIN
IF NOT EXISTS(SELECT st.AName FROM sampletable st WHERE st.AName = aName)
    INSERT INTO sampletable(AName, AVersion, PName) 
    VALUES(aName, aVersion, pName)
    SET InsertStatus = 'Success'
ELSE
    SET InsertStatus = 'Already exists!'
END IF
END$$

DELIMITER $$; 
```

我也尝试了其他插入方式：

```
 INSERT INTO sampletable (aName, aVersion, pName) 
```

这两次，我都收到了这个错误：

```
Error Code : 1064
You have an error in your SQL syntax; check the manual that 
corresponds to your MySQL server version for the right syntax .. 
```

我正在使用 MySql 5.0.51b-community-nt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:45:44.167

您的代码缺少分号 ( `;`)。

改变

```
BEGIN
IF NOT EXISTS(SELECT st.AName FROM sampletable st WHERE st.AName = aName) THEN
    INSERT INTO sampletable(AName, AVersion, PName) 
    VALUES(aName, aVersion, pName)
    SET InsertStatus = 'Success'
ELSE
    SET InsertStatus = 'Already exists!'
END IF
END$$

DELIMITER $$; 
```

到

```
BEGIN
IF NOT EXISTS( SELECT st.AName FROM sampletable st WHERE st.AName = aName ) THEN
    INSERT INTO sampletable( AName, AVersion, PName ) 
    VALUES( aName, aVersion, pName );
    SET InsertStatus = 'Success';
ELSE
    SET InsertStatus = 'Already exists!';
END IF;
END;
$$

DELIMITER ; 
```

它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:52:31.697

试试这个：

```
DELIMITER $$

CREATE PROCEDURE `sampledb`.`InsertSample`
(
    IN aName VARCHAR(20),
    IN aVersion VARCHAR(10),
    IN pName VARCHAR(50),
    OUT InsertStatus VARCHAR(30)
)
BEGIN

IF NOT EXISTS(SELECT st.AName FROM sampletable st WHERE st.AName = aName) THEN
    INSERT INTO sampletable(AName, AVersion, PName) VALUES(aName, aVersion, pName);
    SET InsertStatus = 'Success';
ELSE SET InsertStatus = 'Already exists!';

END IF;

END$$

DELIMITER $$; 
```

您需要确保标记每一行的结尾，并且您的语句中缺少 THEN 子句

# jvm - 监控 WebSphere JVM

> ID：11359748
> 
> 赞同：2
> 
> 时间：2012-07-06T09:43:14.543
> 
> 标签：jvm, websphere, monitor

为了监视任何正常的 Java 进程 JVM，我们可以使用 Attach API。是否有可用于监控 WebSphere JVM 的 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:19:30.113

您可以使用 PMI（性能监控基础设施）来监控 JVM 和 Java EE 相关的指标。我使用的 PMI 监控数据

*   嵌入在管理控制台中的 Tivoli Performance Viewer
*   PMI 客户端（已弃用）
*   PerfServlet（如果你不想使用 JMX，这个 servlet 通过 HTTP 提供与 XML 相同的信息）
*   PMI 的 JMX 接口

由于您打算使用 JMX，因此您可能会发现以下页面很有帮助，因为它包含用于实现 JMX 客户端以访问 PMI 数据的示例代码；

[开发您自己的监控应用程序](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.nd.doc/info/ae/ae/tprf_pmi.html)

您可以在信息中心的监控部分找到有关其他方法的信息。

# .net - 使用 Umbraco 托管 HTML5 应用程序？

> ID：11359754
> 
> 赞同：0
> 
> 时间：2012-07-06T09:43:24.327
> 
> 标签：.net, html, razor, umbraco

我还没有使用过 Umbraco，但是我在这里有一些关于它的好处 - 它的结构以及编写可以在其中托管的“应用程序”是多么容易（如果这是正确的术语）。

从我所见，.NET 用户控件似乎是托管“应用程序”的方式，因为您可以将成员资格信息或其他参数从 Umbraco 传递到您托管的用户控件。

如果我想编写一个在 Umbraco 中托管的纯 HTML5/Javascript (jQuery) 应用程序，有哪些可用选项？我听说你可以创建一个基于剃须刀的页面（cshtml）..但是只是想知道如何将参数从 Umbraco 提供给 HTML 页面本身（我也不是在 asp.net mvc 上，但我猜如果剃须刀页面，可以使用viewbag吗？）

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T11:54:43.550

Umbraco 听起来很合适。它允许您使用您喜欢的任何 HTML 标记，因此您可以自由地使用它构建您喜欢的任何内容。

Umbraco 有用于渲染整个页面的*模板*的想法。模板可以嵌套另外每个模板可以有多个可重用的*宏*，可以渲染出 HTML/XML/JSON 的片段。

如果你想做一些时髦的 JSON 调用，那么他们有一个名为 /Base 的 RESTful api（虽然不是 100% REST），它有一些好处。

关于 Umbraco 的有趣之处在于包/插件生态系统，有一个很棒的 REST 包，称为 uREST，如果您需要它，它可以为您提供一些超级功能（http://our.umbraco.org/projects/backoffice-extensions /尤里斯特）

开箱即用 4.7+ 将 Razor 用于他们的宏（或 XSLT 或 .net 用户控件），因此有很多选择。

搏一搏。如果您有特定问题，社区论坛也很有帮助（http://our.umbraco.org）。

干杯

皮特

# c++ - googleTest 继续测试

> ID：11359758
> 
> 赞同：2
> 
> 时间：2012-07-06T09:43:34.133
> 
> 标签：c++, unit-testing, googletest

我想知道我是在测试我在这个测试中列出的所有等式，还是只测试第一个。

```
class SomethingTest : public testing::Test
{
public:
    SomethingTest() { }
    virtual ~SomethingTest() { }
};

      TEST_F(SomethingTest, Score)
    {
        Computer computer;
        FourInARowStrategy* strategy = new FourInARowStrategy();

        vector<vector<int>> brd;
        for(int i=0; i<6 ;i++)
        {
            vector<int> row ;
            for(int j=0;j<7;j++)
               row.push_back(0);
            brd.push_back(row);
         }

         brd[5][5]=1;
         brd[5][4]=2;
         brd[5][3]=1;
         brd[5][2]=1;
         brd[5][1]=1;
         brd[4][5]=2;
         brd[4][4]=2;
         brd[4][3]=1;
         brd[4][2]=1;
         brd[3][2]=2;
         brd[3][1]=2;
         brd[4][1]=2;

         strategy->setGameBoard(brd);
         strategy->displayBoard();
         EXPECT_EQ(9,computer.rowScoreAPlay(2,3,3,strategy));
         EXPECT_EQ(9,computer.scoreAPlay(2,3,3,strategy));
         EXPECT_EQ(0,computer.colScoreAPlay(2,3,3,strategy));
         EXPECT_EQ(5,computer.colScoreAPlay(1,3,3,strategy));
     }

     //... 
     } 
```

您是否会参考 google 的单元测试和良好的单元测试开发？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-06T12:29:38.003

无论它们是通过还是失败，您都在测试它们。这是因为您使用的是`EXPECT_EQ`而不是`ASSERT_EQ`.

从[文档](https://github.com/google/googletest/blob/master/googletest/docs/primer.md#basic-assertions)：

> 当它们失败时，ASSERT_* 产生一个致命的失败并从当前函数返回，而 EXPECT_* 产生一个非致命的失败，允许函数继续运行。

通常，`EXPECT_*`这是更好的选择，因为测试的其余部分可以继续运行并且可以提供有用的输出。但是，`ASSERT_*`最好不要继续测试。

例如，如果您`std::vector<std::string> results`希望将“OK”作为第一个元素，您可以这样做：

```
ASSERT_FALSE(results.empty());  // No point continuing if results is empty
EXPECT_EQ("OK", results[0]);    // Check first element 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T10:07:04.807

> 我想知道我是在测试我在这个测试中列出的所有等式，还是只测试第一个。

从[他们的介绍页面](https://github.com/google/googletest/blob/master/googletest/docs/primer.md#assertions)：

> ASSERT_* 版本在失败时会产生致命失败，并中止当前功能。

这意味着第一个失败的断言将停止测试。

但这无关紧要，因为无论如何所有测试都应该通过。

# performance - 有没有办法预测（或测量）执行一行代码需要多长时间？

> ID：11359776
> 
> 赞同：2
> 
> 时间：2012-07-06T09:44:00.443
> 
> 标签：performance, optimization, language-agnostic, computer-science

我的问题是这样的：

***给定一行孤立的代码（即，不解析、读/写到 HDD 上的文件，而不是子程序等），是否有可能以任何程度的准确度和/或一致性来预测或测量代码将在给定系统上执行？***

例如，假设我有以下代码（不是任何特定语言，只是概括）：

```
1 |  If x = 1 then
2 |    x = x + 1
3 |  End If 
```

执行第 2 行需要多长时间？

我*不是*在这里寻找数字；我只是想知道这样的事情是否可行或实用。

谢谢！

更新：

现在我正在寻找一些数字......如果我要执行一个简单的`For`循环，每次迭代只需休眠 1 秒，在 60（实际）分钟后，它会有多远？换句话说，评估一行孤立代码所花费的时间是否可以忽略不计（假设没有错误或中断）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:47:43.307

如果您查看此类文档，[您](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)会发现基本操作在 CPU 上占用了多少时钟周期，以及这些时钟周期有多长。将这些数字转换为`x = x+1`在程序中执行所花费的时间是一门不精确的科学，但是通过检查编译器生成的汇编代码列表，您会得到一些线索。

当您从简单的算术语句转向大型程序时，科学变得越来越不精确，并且您开始遇到由现代 CPU 和现代操作系统和内存层次结构以及其他所有复杂性引起的各种问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:46:48.427

最简单的方法是运行十亿次，看看花了多少时间，然后除以十亿。这应该消除时钟精度的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T09:52:15.467

听起来您可能有兴趣了解[Big O Notation](http://en.wikipedia.org/wiki/Big_O_notation)。使用 Big O，您可以弄清楚如何编写最有效的算法，而不管运行它的机器的速度如何。

大多数计算机通常会在后台运行一些进程、服务或其他“作业”，并且由于各种原因在不同时间消耗资源......这往往会导致难以预测确切的执行时间。但是，如果您可以将上述代码分解为汇编语言并计算在机器级别使用的位数、寄存器和时钟滴答数，我认为可以得到准确的估计。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T09:59:27.063

答案是响亮的不。例如，考虑如果在加法期间引发中断会发生什么：下一条指令将在中断服务*后*执行，因此给人的印象是加法花费了很多时间。

如果我们谈论的是 ISR 禁用条件，那么答案是“视情况而定”。例如，考虑到对 的分支预测错误`if`可能会大大减慢执行速度。多核 CPU 也是如此（通常一些 ALU 在内核之间共享，因此一个内核上的活动可能会影响其他内核上的操作性能）。

如果我们谈论的是在具有单核和单级管道的 CPU 上禁用 ISR 的情况，那么我想您应该几乎能够预测需要多长时间。问题是，您可能正在使用微控制器（以及旧的）。:)

更新：再想一想，即使在最后一种情况下，您也可能无法准确预测它：实际上某些操作是依赖于数据的（典型示例是对非正规数的浮点操作）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-29T17:40:18.490

您可以弄清楚的一种方法是编写该行代码 1000 次，然后计算运行该代码所需的时间，然后将时间除以 1000，以获得更准确的时间，您可以运行该测试 10 次并查看你完成所有这些测试的平均时间。

# scala - 惯用的scala代码的好例子

> ID：11359784
> 
> 赞同：19
> 
> 时间：2012-07-06T09:44:25.850
> 
> 标签：scala

Scala 是一种庞大而复杂的语言。以我的经验，学习这种语言的最好方法是阅读非常好的代码。是否有此类代码的开源示例？你能推荐什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T14:26:03.703

1.  [斯卡拉兹](https://github.com/scalaz/scalaz)。请注意，它以比大多数 Scala 代码更实用的风格编写。

2.  [Twitter Util](https://github.com/twitter/util)（已经在@axel22 的回答中提到）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-06T11:49:52.547

[Scala 标准库](https://github.com/scala/scala/tree/master/src/library)在大多数地方都应该是非常惯用的。[Scala Swing 库](https://github.com/scala/scala/tree/master/src/swing/scala/swing)是另一个例子。

通常编写各种框架的人都知道自己在做什么，并且是 Scala 方面的专家。[Akka](https://github.com/akka/akka)或[Play](https://github.com/playframework/Play20)等框架就是很好的例子。[Twitter 的项目](https://github.com/twitter)是另一个。

# android - 我如何在 android 中使用 DejaVu 字体

> ID：11359786
> 
> 赞同：1
> 
> 时间：2012-07-06T09:44:36.267
> 
> 标签：android

我想通过使用 android 1.5 开发一个可以显示/支持阿拉伯字体的应用程序 android，我找到了 DejaVu 字体，但我该如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:51:11.223

要使用自定义字体，请使用此代码，

```
TextView txt = (TextView) findViewById(R.id.custom_font);  
Typeface font = Typeface.createFromAsset(getAssets(), "YourFontNamer.rtf");  
txt.setTypeface(font); 
```

如果你需要更多参考这个博客[http://mobile.tutsplus.com/tutorials/android/customize-android-fonts/](http://mobile.tutsplus.com/tutorials/android/customize-android-fonts/)

# php - 通过提供用户名 + 邮件 + codeigniter ajax 向用户添加角色

> ID：11359790
> 
> 赞同：0
> 
> 时间：2012-07-06T09:44:46.823
> 
> 标签：php, mysql, ajax, codeigniter

# 1.为用户添加角色

你好。我正在创建我的 php 系统，主要用于传播信息和管理大型用户数据库。假设我有我的主要“团队”设置，并且我希望有一个用户（管理员）可以设置团队数据的站点，如“协调员”或“经理”等。我想保持简单，所以管理员可以设置特定的通过提供用户名/可见名称，角色（它们存储在表 team_settings 下的数据库中，具有特定字段，如 team_manager 等）。

这是我的问题。**我假设我需要使用 jQuery 来做简单的“快速搜索”来选择特定的用户，但这是交易。如何将这个放在我的表单中，选择人员后，当我发布表单时，我会将 user_id 存储在特定的表字段中？**

所以主要是 - 当输入将有用户名时，如何在我的字段中设置 user_id？

# 2\. Codeigniter 邮寄/批量电子邮件

我正在寻找任何在使用 codeigniter 或纯 php 时遇到邮件问题的人。我的问题是 - 我的共享主机在 PHP 脚本上有 30 秒的执行时间，所以我需要在这段时间内发送电子邮件、移动短信和 IM 消息。当然我可以使用 cron 来完成，但问题是：**现在有没有人可以使用任何类型的外部 API 来发送我的批量电子邮件？它将相同的消息（可能带有一些变量，仅此而已）发送给最多约 150 个用户。**

# 3\. Codeigniter Ajax

我只需要从我的控制器调用相同的方法并返回不同的对象 - 当 AJAX 请求它时，它应该返回 HTML，但是当我手动调用它（或我的用户）时，它应该加载视图。我怎样才能做到这一点？

提前感谢您的所有回复。愿原力与你同在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:26:42.980

1.  搜索用户后，单击编辑用户时，您是在弹出窗口的同一页面上编辑还是导航到不同的页面进行编辑。如果您使用的是同一页面，请将用户名存储在 Javascript 全局变量中并在发布其他已编辑的详细信息时发布。如果您使用不同的页面，您可以在 url 段中传递用户名或 user_id，并可以将其用作控制器函数内的参数。

    [http://yoursite.com/controller/functionName/username](http://yoursite.com/controller/functionName/username)或 id

    function functionName($username) { //验证 $username 并使用它 //如果发布更新 ot 显示编辑表单 }

2.  您可以使用一些电子邮件队列概念。您将所有生成的电子邮件插入到队列表中，并且状态不正常。然后在优先限制的 cron 作业中处理它们，使其不会超过 30 秒的限制。我已经为使用[thephpcode.com生成的 Codeigniter 网站包含了相同的概念](http://www.thephpcode.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:07:52.857

回答问题3，因为我不明白前两个。

以两种不同方式使用函数的简单方法：

使用 ajax 请求发送附加参数，例如：（`ajax=true`发布或获取请求）。当发布正常的请求发布/获取时，它将不存在。因此，只需检查`ajax`post/get 请求中是否存在 N 命名变量并相应地处理数据。如果找到 AJAX，请不要加载视图，`echo $HTML;`否则`$this->load->view('viewname');`希望对您有所帮助。

# jquery - if size == 4,7,10,13, .... 等等...在 jQuery 中

> ID：11359792
> 
> 赞同：-1
> 
> 时间：2012-07-06T09:45:07.910
> 
> 标签：jquery, match, matching, if-statement

我知道我可以这样做...

```
if (Size == 4 | Size == 7 | Size == 10 | Size == 13 | Size == 16 | Size == 19)
{alert("Yes!")} 
```

但是有更好的编码吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T09:47:27.320

```
if(Size%3==1&&Size<20&&Size>3 )
{alert("yes");} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-06T09:47:07.207

您可以使用[jQuery.inArray](http://api.jquery.com/jQuery.inArray/)：

```
if (jQuery.inArray(Size, [4, 7, 10, 13, 16, 19])>=0) { 
```

请注意，目标只能是可读性，而不是性能。

如果您只有这 6 个值并且它们永远不会改变，那么`if`您制作的丑陋（使用`||` 而不是`|`）是一个完全正确的解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-06T09:46:59.113

```
switch (Size) {
    case 4:
    case 7:
    case 10:
    case 13:
    case 16:
    case 19:
        alert("Yes!");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T09:48:02.373

```
if((Size - 1)%3 == 0)
     alert("Yes!"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-06T09:48:07.800

您可以使用模数

```
if (((Size - 1) % 3) == 0) {
  alert ("yess!");
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-06T09:48:03.593

您可以将这些数字放在一个数组中，然后使用

```
if(JQuery.inArray(Size, [4, 7, 10, 13, 16, 19])>=0) 
```

[http://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

但这只会使代码看起来“更好”，它不会影响 scipt 的性能。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-06T09:48:16.620

像这样的东西（使用jQuery）：

```
var accepted = [4,7,10,13,16,19];

if ($.inArray(Size, accepted) != -1)
{
  ...
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-06T09:48:23.490

在jQuery中

```
var arr = [4,7,10,13,16,19];
if($.inArray(Size , arr)>-1) {
  alert("Yes!")
} 
```

香草js

```
var arr = [4,7,10,13,16,19];
if(arr.indexOf(Size)>-1)
{
 alert('yes');
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-07-06T10:06:21.203

```
if((Size - 1)%3 == 0 && Size>=4 && Size<=19) alert("Yes!"); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-15T00:51:25.827

该集合`{ 4, 7, 10, 13, ... }`也可以描述为`{ x | ∃ k ∈ ℕ⁺ : x = 3 k + 1 }`，可以重新排列为`{ x | ∃ k ∈ ℕ⁺ : k = (x - 1) / 3 }`。

所以你只需要检查是否`(Size - 1) / 3`是一个正整数。或者，换一种说法，如果`Size - 1`是正数并且是 3 的倍数：

```
(0 < Size - 1) && ((Size - 1) % 3 === 0) 
```

但同样，每个子表达式都可以在不改变其含义的情况下重新排列，方法是在两边都加 1：

```
(1 < Size) && (Size % 3 === 1) 
```

因为符合这个表达式的第一个数字是`Size === 4`，我们甚至可以用`1 < Size`代替`4 <= Size`。这使得代码更清晰、更高效。

因此，在其最终形式中，代码可以这样编写：

```
if (4 <= Size && Size % 3 === 1) {
    alert("Yes!");
} 
```

# delphi - 如何更改现有 Windows 资源管理器窗口的路径？

> ID：11359795
> 
> 赞同：7
> 
> 时间：2012-07-06T09:45:17.313
> 
> 标签：delphi, winapi, windows-shell

我有一个打开的 Windows 资源管理器窗口的句柄。

如何向它发送命令以将路径从
*example: m:\programs 更改为 d:\programs*。

![例子](../Images/b8f2857853f3403e2483d24c53b121ee.png)

直到现在我还在使用`ShellExecute()`，但它会打开一个新窗口。这不好（用户体验）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T04:49:28.630

以下函数将给定句柄（如果存在）`BrowseToFolder`的 Windows 资源管理器的现有实例导航到文件夹（如果存在）。如果您不指定第二个参数，则应采用最顶部的窗口进行导航（或者至少文档声称；现实似乎采用最旧的现有窗口）。如果导航成功，该函数返回 True，否则返回 False：`AHandle``AFolderPath`

```
uses
  ActiveX, ShlObj, ShellAPI, SHDocVw;

const
  IID_IServiceProvider: TGUID = '{6D5140C1-7436-11CE-8034-00AA006009FA}';
  SID_STopLevelBrowser: TGUID = '{4C96BE40-915C-11CF-99D3-00AA004AE837}';

function GetItemIDListFromPath(const AFolderPath: WideString): PItemIDList;
var
  Count: ULONG;
  Attributes: ULONG;
  ShellFolder: IShellFolder;
begin
  Result := nil;
  if Succeeded(SHGetDesktopFolder(ShellFolder)) then
  begin
    Count := 0;
    if Failed(ShellFolder.ParseDisplayName(0, nil, PWideChar(AFolderPath),
      Count, Result, Attributes))
    then
      Result := nil;
  end;
end;

function BrowseToFolder(const AFolderPath: WideString;
  AHandle: HWND = HWND_TOPMOST): Boolean;
var
  I: Integer;
  WndIface: IDispatch;
  ItemIDList: PItemIDList;
  ShellBrowser: IShellBrowser;
  ShellWindows: IShellWindows;
  WebBrowserApp: IWebBrowserApp;
  ServiceProvider: IServiceProvider;
begin
  Result := False;

  if Succeeded(CoCreateInstance(CLASS_ShellWindows, nil, CLSCTX_LOCAL_SERVER,
    IID_IShellWindows, ShellWindows)) then
  begin
    for I := 0 to ShellWindows.Count - 1 do
    begin
      if (AHandle <> HWND_TOPMOST) then
        WndIface := ShellWindows.Item(VarAsType(I, VT_I4))
      else
        WndIface := ShellWindows.Item(VarAsType(SWC_EXPLORER, VT_UI4));

      if Succeeded(WndIface.QueryInterface(IID_IWebBrowserApp,
        WebBrowserApp)) then
      begin
        if (AHandle = HWND_TOPMOST) or (WebBrowserApp.HWnd = AHandle) then
        begin
          if Succeeded(WebBrowserApp.QueryInterface(IID_IServiceProvider,
            ServiceProvider)) then
          begin
            if Succeeded(ServiceProvider.QueryService(SID_STopLevelBrowser,
              IID_IShellBrowser, ShellBrowser)) then
            begin
              ItemIDList := GetItemIDListFromPath(AFolderPath);
              Result := Succeeded(ShellBrowser.BrowseObject(ItemIDList,
                SBSP_SAMEBROWSER or SBSP_ABSOLUTE));
            end;
          end;
          Break;
        end;
      end;
    end;
  end;
end; 
```

这是示例用法：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  ExplorerHandle: HWND;
begin
  ExplorerHandle := 123456;

  if not BrowseToFolder('c:\Windows\System32\', ExplorerHandle) then
    ShowMessage('Navigation to a folder failed!')
  else
    ShowMessage('Navigation to a folder succeeded!');
end; 
```

这是我从中获得灵感的一个[`complete testing project`](https://code.google.com/p/projects-stackoverflow-tlama/downloads/detail?name=11359795.ZIP)和。[`the blog post`](http://blogs.msdn.com/b/oldnewthing/archive/2004/07/20/188696.aspx)

# shell - 如何使用 sed 命令在子目录中递归搜索和替换？

> ID：11359797
> 
> 赞同：0
> 
> 时间：2012-07-06T09:45:22.903
> 
> 标签：shell, command-line, replace

我想在主目录下的所有文件中搜索`var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");`并用“谷歌分析代码”替换它。

在 php eclips 编辑器中，它显示所有出现但不能一次全部替换。所以，我正在考虑使用shell脚本。

/home/project/news4u/web 是我的 rot 目录以及如何使用`sed`命令来实现它。

我试过`sed s/'var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");'/'google analytics' *`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:04:24.157

如果你有 GNU sed，它有`-i`可以就地编辑文件的选项。如果你有`bash`你需要启用 globstar：

```
shopt -s globstar 
```

因为 afair`sed`可以遍历目录树本身

```
sed -i.bak "s@'var gaJsHost = ((\"https:\" == document.location.protocol) ? \"https://ssl.\" : "http://www.");'@'google analytics'@" ** 
```

`-i.bak`将备份每个带有`.bak`扩展名的文件。如果出现问题，这很有用。

如果一切正常，我建议您首先`-i`在某些特定文件上使用不带选项的“干”运行进行检查，然后再使用`-i`.

附言。如果您没有 GNU sed 或 bash 或两者都没有，您可以做得更复杂，但 POSIX 兼容方式：

```
find . -type f -exec sed "s@'var gaJsHost = ((\"https:\" == document.location.protocol) ? \"https://ssl.\" : "http://www.");'@'google analytics'@" {} > {}.tmp \; -exec mv {}.tmp {} \; 
```

# java - 基于表单的 AJAX 更新 Wicket 中的行为

> ID：11359800
> 
> 赞同：0
> 
> 时间：2012-07-06T09:45:37.880
> 
> 标签：java, wicket, wicket-1.5

事情是这样的：我有一个扩展 AbstractAjaxBehavior 的类。它在 Page 上有一个实例，其中一个方法被覆盖，将其输出绑定到作为表单模型的对象（或其模型）。我希望在提交表单时更改该方法的输出，以反映表单新提交的值。我想根据表格更新的内容类似于以下内容：

```
final MyAjaxBehavior myBehavior = new MyAjaxBehavior(){

    @Override
    protected String getName(){
        return form.getModelObject().getName();
    }
} 
```

我可以让它在第一次提交表单时工作，但如果表单的字段被更改并再次提交，尽管页面的其余部分已更新，但行为不会。

我对模型的内部运作并不是很精通，所以我在这里不知所措。

谢谢！

编辑：澄清一下，由于通常不会像这样使用 Behaviors，所以我使用的 Behavior 实际上就是[this thing](https://cwiki.apache.org/WICKET/ajax-update-and-file-download-in-one-blow.html)。我正在覆盖 getFileName()，并且我希望它考虑到表单模型的变化。

# windows - tomcat重新加载第一次登录需要很多时间

> ID：11359802
> 
> 赞同：0
> 
> 时间：2012-07-06T09:45:43.263
> 
> 标签：windows, tomcat

每当我重新启动 tomcat 并重新加载我的网站时，都会花费很多时间。有办法吗？就像不必重新启动tomcat。我已经尝试过[`reloadable="true"`](https://stackoverflow.com/questions/4371724/having-to-restart-tomcat-whenever-you-make-a-change)，但这没有帮助。

# android - 适配器过滤上的空指针异常

> ID：11359804
> 
> 赞同：1
> 
> 时间：2012-07-06T09:46:00.567
> 
> 标签：android, nullpointerexception, android-adapter

我想简单地通过 EditText 过滤我的 listViews 的项目，我使用实现 Filterable 的 ArrayAdapter 来执行此操作，但由于某种原因，我得到了一个巨大的 NullPointerException ......我通过一些教程做到了这一点，我只是无法弄清楚我试过的问题是什么尝试捕获我的代码中的所有内容，但我无法使其正常工作。

当我尝试在我的 EditText 中输入文本时，它被冻结然后我崩溃了：

任何建议将不胜感激。谢谢。

```
07-06 11:35:15.785: E/AndroidRuntime(28779): FATAL EXCEPTION: main
07-06 11:35:15.785: E/AndroidRuntime(28779): java.lang.NullPointerException
07-06 11:35:15.785: E/AndroidRuntime(28779):    at com.KeySoft.OpenGuide.Adapter.SearchAdapter.getView(SearchAdapter.java:61)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.widget.AbsListView.obtainView(AbsListView.java:1533)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.widget.ListView.makeAndAddView(ListView.java:1793)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.widget.ListView.fillSpecific(ListView.java:1338)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.widget.ListView.layoutChildren(ListView.java:1624)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.widget.AbsListView.onLayout(AbsListView.java:1384)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.view.View.layout(View.java:7228)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.view.View.layout(View.java:7228)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.view.View.layout(View.java:7228)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.view.View.layout(View.java:7228)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.view.View.layout(View.java:7228)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1145)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.os.Looper.loop(Looper.java:123)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at android.app.ActivityThread.main(ActivityThread.java:3687)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at java.lang.reflect.Method.invokeNative(Native Method)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at java.lang.reflect.Method.invoke(Method.java:507)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
07-06 11:35:15.785: E/AndroidRuntime(28779):    at dalvik.system.NativeStart.main(Native Method) 
```

**这是我的带过滤器的适配器：**

```
public class SearchAdapter extends ArrayAdapter<KeresesBejegyzes> implements Filterable

{

private Activity context;
private List<KeresesBejegyzes> bejegyzesek;
private List<KeresesBejegyzes> eredetiBejegyzesek;

static class ViewHolder
{
    public TextView shopNameTv;
    public TextView shopTavTv;
}

public SearchAdapter(Activity context, List<KeresesBejegyzes> bejegyzesek_)
{
    super(context, R.layout.rowlayout, bejegyzesek_);
    this.context = context;
    this.bejegyzesek = bejegyzesek_;
}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    View rowView = convertView;

    if (rowView == null)
    {
        LayoutInflater inflater = context.getLayoutInflater();
        rowView = inflater.inflate(R.layout.rowlayout, null);
        ViewHolder viewHolder = new ViewHolder();
        viewHolder.shopNameTv = (TextView) rowView.findViewById(R.id.shopNameTv);
        viewHolder.shopTavTv = (TextView) rowView.findViewById(R.id.tavTv);

        rowView.setTag(viewHolder);
    }

    ViewHolder holder = (ViewHolder) rowView.getTag();

    KeresesBejegyzes bejegyzes = bejegyzesek.get(position);

    holder.shopNameTv.setText(bejegyzes.getNev());

    if (bejegyzes.getTavolsag() != 0)
    {
        holder.shopTavTv.setText(Double.toString(bejegyzes.getTavolsag()) + " km - " + bejegyzes.getTipus());
    }
    else
    {
        holder.shopTavTv.setText(bejegyzes.getTipus());
    }

    return rowView;
}

@Override
public Filter getFilter()
{

    try
    {

        Filter filter = new Filter()
        {

            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint, FilterResults results)
            {

                bejegyzesek = (List<KeresesBejegyzes>) results.values; // has
                                                                        // the
                                                                        // filtered
                                                                        // values
                notifyDataSetChanged(); // notifies the data with new
                                        // filtered values
            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint)
            {
                FilterResults results = new FilterResults(); // Holds the
                                                                // results
                                                                // of a
                                                                // filtering
                                                                // operation
                                                                // in values
                List<KeresesBejegyzes> FilteredArrList = new ArrayList<KeresesBejegyzes>();

                if (eredetiBejegyzesek == null)
                {
                    eredetiBejegyzesek = new ArrayList<KeresesBejegyzes>(bejegyzesek); // saves
                                                                                        // the
                                                                                        // original
                                                                                        // data
                                                                                        // in
                                                                                        // mOriginalValues
                }

                /********
                 * 
                 * If constraint(CharSequence that is received) is null
                 * returns the mOriginalValues(Original) values else does
                 * the Filtering and returns FilteredArrList(Filtered)
                 * 
                 ********/
                if (constraint == null || constraint.length() == 0)
                {
                    // set the Original result to return
                    results.count = eredetiBejegyzesek.size();
                    results.values = eredetiBejegyzesek;

                }
                else
                {

                    constraint = constraint.toString().toLowerCase();

                    for (int i = 0; i < eredetiBejegyzesek.size(); i++)
                    {
                        KeresesBejegyzes data = eredetiBejegyzesek.get(i);

                        if (data.getNev().toLowerCase().contains(constraint.toString()) || data.getCim().toLowerCase().contains(constraint.toString()))
                        {
                            FilteredArrList.add(data);
                        }
                    }
                    // set the Filtered result to return
                    results.count = FilteredArrList.size();
                    results.values = FilteredArrList;

                }
                return results;
            }
        };

        return filter;

    }
    catch (Exception e)
    {
        Log.e("SearchAdapterError", e.toString());
    }

    return null;

}

} 
```

**这是EditText：**

```
searchEditText.addTextChangedListener(new TextWatcher() 
            {
                @Override
                public void onTextChanged(CharSequence s, int start, int before, int count) 
                {
                    try
                    {       
                        if(searchAdapter.getFilter() != null)
                        {
                            searchAdapter.getFilter().filter(s.toString());
                        }
                        else
                        {
                            ki("Error 8: searchAdapter.getFilter() == null");
                        }
                    }
                    catch(Exception e)
                    {
                        ki("Error 7:"+e);
                    }

                }

                 @Override
                 public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                 }

                 @Override
                 public void afterTextChanged(Editable s) {
                 }
            }); 
```

编辑 dj aqeel：

当我尝试通过 EditText 搜索时，我只得到空指针 ex，我的 listView 很好地显示了我的列表，我什至可以对其进行排序，效果很好，没有任何例外。

初始化：（我刚刚意识到 bejegyzesek 不是一个列表，它是一个向量，这可能是一个问题吗？这是一个旧代码改造，所以我错误地保持不变..）

所以这是在我的活动中：

```
public class Search extends Activity 
{

    Vector<KeresesBejegyzes> bejegyzesek = new Vector<KeresesBejegyzes>();

    // (...more code here...)

db.open();
            Cursor c = db.getAllShopsFullTitles();

            if(c.moveToFirst())
            {
                do
                {
                    KeresesBejegyzes kb = new KeresesBejegyzes();

                    kb.setNev(c.getString(1));
                    kb.setTipus(c.getString(2));
                    kb.setLatitude(Double.parseDouble(c.getString(4)));
                    kb.setLonditude(Double.parseDouble(c.getString(5)));

                    bejegyzesek.add(kb);

            }while(c.moveToNext());
        }
        db.close();

listView = (ListView)findViewById(R.id.listView);
            searchAdapter = new SearchAdapter(this, bejegyzesek);
            listView.setAdapter(searchAdapter); 
```

# mysql - 如何将 H2Database 数据库文件转换为 MySQL 数据库 .sql 文件？

> ID：11359813
> 
> 赞同：9
> 
> 时间：2012-07-06T09:46:27.493
> 
> 标签：mysql, h2

[我在H2Database](http://www.h2database.com/html/main.html)文件中有一些数据，我想将其转换为 MySQL`.sql`数据库文件。我可以遵循哪些方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-05-27T08:36:03.377

在回答 Thomas Mueller 时，SquirrelSQL 对我来说工作得很好。以下是 Windows 转换 H2 数据库的过程：

1.  转到“驱动程序列表”，默认情况下所有内容都是红色的。

2.  选择“H2”驱动，在“Extra Class Path”中指定“h2-1.3.173.jar”（例如）的完整路径。H2 驱动程序应在列表中显示蓝色复选标记。

3.  选择您的目标驱动程序（PostgreSQL、MySQL）并执行相同操作，例如对于 PostgreSQL，在 Extra Class Path 中指定“postgresql-9.4-1201.jdbc41.jar”的完整路径。

4.  转到“别名”，然后单击 H2 的“+”：配置您的 JDBC 链，例如复制/粘贴您在启动 H2 时获得的 jdbc 链，并对目标数据库执行相同操作：单击“+”，配置和“测试”。

5.  当您双击您的别名时，您应该在新选项卡中看到数据库中的所有内容。转到源数据库中的表，对所有表进行多选并右键单击：“复制表”。

6.  从 Alias 转到您的目标数据库，然后执行“粘贴表”。全部复制所有表时，还会生成外键引用。

7.  检查您的主键：从 H2 到 PostgreSQL，我失去了主键约束和自动增量功能。您还可以通过右键单击重命名列和表：“重构”。通过禁用名称签入选项，我使用它在完整复制后重命名保留字列。

    这对我来说效果很好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-08T08:04:32.273

H2数据库生成的SQL脚本与MySQL支持的SQL不完全兼容。您必须手动更改 SQL 脚本。这要求您非常了解 H2 和 MySQL。

为了避免这个问题，将数据从 H2 复制到 MySQL 的另一种可能更简单的方法是使用 3rd 方工具，例如[SQuirreL SQL](http://www.squirrelsql.org/)和[SQuirreL DB Copy Plugin](http://dbcopyplugin.sourceforge.net/)插件。（首先你需要安装 SQuirreL SQL 和 SQuirreL DB Copy Plugin。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-20T12:53:42.793

我创建了一个从 h2 迁移到 mysql 的 Groovy 脚本。从那里你可以做一个mysqldump。它要求表存在于 Mysql 数据库中。它应该适用于稍作改动的其他 DBMS。

```
@Grapes(
[ 
    @Grab(group='mysql', module='mysql-connector-java', version='5.1.26'),
    @Grab(group='com.h2database', module='h2', version='1.3.166'),
    @GrabConfig(systemClassLoader = true)
])

import groovy.sql.Sql

def h2Url='jdbc:h2:C:\\Users\\xxx\\Desktop\\h2\\sonardata\\sonar'
def h2User='sonar'
def h2Passwd='sonar'

def mysqlUrl='jdbc:mysql://10.56.xxx.xxx:3306/sonar?useunicode=true&characterencoding=utf8&rewritebatchedstatements=true'
def mysqlUser='sonar'
def mysqlPasswd='xxxxxx'
def mysqlDatabase='sonar'

sql = Sql.newInstance(h2Url, h2User, h2Passwd, 'org.h2.Driver' )

def tables = [:]

sql.eachRow("select * from information_schema.columns where table_schema='PUBLIC'") {
    if(!it.TABLE_NAME.endsWith("_MY")) {
        if (tables[it.TABLE_NAME] == null) {
            tables[it.TABLE_NAME] = []
        }
        tables[it.TABLE_NAME] += it.COLUMN_NAME;
    }
}

tables.each{tab, cols ->
    println("processing $tab")
    println("droppin $tab"+"_my")

    sql.execute("DROP TABLE IF EXISTS "+tab+"_my;")
    sql.execute("create linked table "+tab+"_my ('com.mysql.jdbc.Driver', '"+mysqlUrl+"', '"+mysqlUser+"', '"+mysqlPasswd+"', '"+mysqlDatabase+"."+tab.toLowerCase()+"');")

    sql.eachRow("select count(*) as c from " + tab + "_my"){println("deleting $it.c entries from mysql table")}
    result = sql.execute("delete from "+tab+"_my")
    colString = cols.join(", ")
    sql.eachRow("select count(*) as c from " + tab){println("starting to copy $it.c entries")}
    sql.execute("insert into " + tab + "_my ("+colString+") select "+colString+" from " + tab)
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T10:24:54.040

H2 数据库允许您使用[`SCRIPT`](http://h2database.com/html/grammar.html#script)SQL 语句或[脚本命令行工具](http://h2database.com/javadoc/org/h2/tools/Script.html)创建 SQL 脚本。您可能需要先调整脚本，然后才能针对 MySQL 数据库运行它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-30T10:07:31.910

您可以使用 fullconvert 来转换数据库。它很容易使用。

按照此处显示的步骤操作

[https://www.fullconvert.com/howto/h2-to-mysql](https://www.fullconvert.com/howto/h2-to-mysql)

# php - 在复选框中反映 mySQL 布尔值

> ID：11359814
> 
> 赞同：4
> 
> 时间：2012-07-06T09:46:33.267
> 
> 标签：php, mysql, checkbox

我在 mySQL 中有一个特色字段 TINYINT，它将是 0 或 1

我也有一个表格：

```
 <input type="checkbox" name="featured" value="<?php echo $row_rs_dealItem['featured']; ?>"/><br /><br /> 
```

当我选择复选框时，我可以在 mySQL 中将值设置为“1”，但不能反过来，因为当我查看更新记录页面时，复选框始终为空白（我了解复选框状态与值无关，并且应该这样设置）。

因此，如果值为“1”，我需要检查复选框，如果我取消选中，那么我需要将 mySQL 中的值改回“0”

我知道有很多关于此的帖子，但我似乎无法做出头或尾，而且我尝试的任何方法都不起作用。

我们可以把它保存在 PHP 中吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:51:35.997

在您的 html 复选框中使用它：

```
<?php if ($row_rs_dealItem['featured'] == 1) echo "checked='checked'"; ?> 
```

并将其写入保存数据的文件中：

```
if(isset($_POST['featured'])) $featured = 1; else $featured = 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T09:57:02.430

```
$featured = (isset($_POST['featured'])) ? 1 : 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T09:55:40.160

只需使用 PHP 的`intval`函数，提交表单后，在保存数据的文件中：

```
$_POST['featured'] = intval($_POST['featured']); 
```

如果未选中复选框 $_POST['featured'] 为 NULL，并且`intval(NULL)=0`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T09:49:37.893

尝试

```
<?PHP
if(isset($_POST['featured']))
{
    $_POST['featured'] =1;
}
else
{
   $_POST['featured'] =0; 
} 
```

# node.js - 使用 MongoSkin ( Nodejs ) 重新连接 MongoDB

> ID：11359819
> 
> 赞同：0
> 
> 时间：2012-07-06T09:46:42.687
> 
> 标签：node.js, mongodb, mongoskin

我一直在使用 MongoSkin( Nodejs ) 插件来连接 Mongodb，如下所示。

```
 var db = mongo.db(dbconfig.mongo_ip+'/'+dbconfig.mongo_db_name);
    db.collection('myprofile').findOne({_id:memberid}, function(err, session){

        if(err){
            db.close();
            console.log(err.stack);
        }

    }) 
```

如果我从 node.js 得到 mongo 连接错误，那么我如何使用 mongoskin 重新连接，

```
Mongo Connect errr: Error: failed to connect to [localhost:27017]
    at [object Object].<anonymous> (/usr/local/lib/node_modules/mongoskin/node_modules/mongodb/lib/mongodb/connection/server.js:184:51)
    at [object Object].emit (events.js:45:17)
    at [object Object].<anonymous> (/usr/local/lib/node_modules/mongoskin/node_modules/mongodb/lib/mongodb/connection/connection_pool.js:110:14)
    at [object Object].emit (events.js:45:17)
    at Socket.<anonymous> (/usr/local/lib/node_modules/mongoskin/node_modules/mongodb/lib/mongodb/connection/connection.js:301:10)
    at Socket.emit (events.js:42:17)
    at Array.33 (net.js:799:27)
    at EventEmitter._tickCallback (node.js:108:26) 
```

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:54:36.590

一个好的起点是

[https://github.com/kissjs/node-mongoskin/blob/master/test/db.js](https://github.com/kissjs/node-mongoskin/blob/master/test/db.js)

但我假设您需要在 mongoskin 以及驱动程序中调用 db 上的 open 。

# iphone - 使用 SQLite3 更新表行

> ID：11359821
> 
> 赞同：0
> 
> 时间：2012-07-06T09:46:46.617
> 
> 标签：iphone, ios

我正在使用 SQLite3。并且正在使用以下代码更新已经存在的行

```
- (BOOL)updateTableData :(NSString *) num
{
    AppDelegate *appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    dbPath = [self getDBPath:@"studentslist.sqlite"];
    if(sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK)
    {
    sqlite3_stmt *updateStmt;
    const char *sql = "update studentInfo set sAge=?, sAddrs1=?, sAddrs2=?, sMobile =?, sClass =? where sRollNumber=?;";
    if(sqlite3_prepare_v2(database, sql, -1, &updateStmt, NULL) != SQLITE_OK)
    {
        NSLog(@"updateTableData: Error while creating delete statement. '%s'", sqlite3_errmsg(database));
        return;
    }
    NSLog(@"appDelegate.updateArray %@",appDelegate.updateArray);
    sqlite3_bind_int(updateStmt, 1,[[appDelegate.updateArray objectAtIndex:0] intValue]);
    sqlite3_bind_text(updateStmt, 2,[[appDelegate.updateArray objectAtIndex:1] UTF8String], -1,SQLITE_TRANSIENT);
    sqlite3_bind_text(updateStmt, 3,[[appDelegate.updateArray objectAtIndex:2] UTF8String], -1,SQLITE_TRANSIENT);
    sqlite3_bind_text(updateStmt, 4,[[appDelegate.updateArray objectAtIndex:3] UTF8String], -1,SQLITE_TRANSIENT);
    sqlite3_bind_text(updateStmt, 5,[[appDelegate.updateArray objectAtIndex:4] UTF8String], -1,SQLITE_TRANSIENT);

    if (SQLITE_DONE != sqlite3_step(updateStmt)) 
    {
        NSLog(@"updateTableData: Error while updating. '%s'", sqlite3_errmsg(database));
        sqlite3_finalize(updateStmt);
        sqlite3_reset(updateStmt);
        sqlite3_close(database);
        return NO;
    }
    else
    {
        NSLog(@"updateTableData: Updated");
        sqlite3_finalize(updateStmt);
        sqlite3_close(database);
        return  YES;
    }
}
else
{
    NSLog(@"updateTableData :Database Not Opened");
    sqlite3_close(database);
    return NO;
} 
```

在主类中调用此方法如下

```
-(IBAction)updateButtonAction:(id)sender
{
AppDelegate *appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
db = [[Database alloc]init];
if ([ageTxtFld.text length]>0 && [address1TxtFld.text length]>0 && [address2TxtFld.text length]>0 && [mobileTxtFld.text length]>0 && [classTxtFld.text length]>0) 
{
    [appDelegate.updateArray addObject:ageTxtFld.text];
    [appDelegate.updateArray addObject:address1TxtFld.text];
    [appDelegate.updateArray addObject:address2TxtFld.text];
    [appDelegate.updateArray addObject:mobileTxtFld.text];
    [appDelegate.updateArray addObject:classTxtFld.text];
    NSLog(@"appDelegate.updateArray %@",appDelegate.updateArray);
    NSString *num = rollNumberTxtFld.text;
    BOOL is = [db updateTableData:num];
    if (is == YES)
    {
        updateAlert = [[UIAlertView alloc] initWithTitle:@"Success" message:@"Updated" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [updateAlert show];
    }
    else
    {
        updateAlert = [[UIAlertView alloc] initWithTitle:@"Fail" message:@"Not Updated" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [updateAlert show];
    }
}
else
{
    UIAlertView *errorAlert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Enter all values" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
    [errorAlert show];
}
} 
```

但它总是打印**NSLog(@"updateTableData: Updated");** 但不更新

任何人都可以建议我或帮助我编写代码。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:57:36.533

```
- (void)createEditableCopyOfDatabaseIfNeeded {

    BOOL success;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error; 
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *writableDBPath = [documentsDirectory stringByAppendingPathComponent:@"studentslist.sqlite"];
    dbPath =writableDBPath;
    [databasePath retain];
    success = [fileManager fileExistsAtPath:writableDBPath];
    if (success) return;
     NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"studentslist.sqlite"];
    success = [fileManager copyItemAtPath:defaultDBPath toPath:writableDBPath error:&error];
    if (!success) {
        NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
    }
    writableDBPath = nil;
    documentsDirectory = nil;
    paths = nil;
} 
```

在您的代码中编写此方法并调用它。这肯定是您的代码中的一个问题。

# java - Java EntityManager 合并和@PrePersist

> ID：11359824
> 
> 赞同：0
> 
> 时间：2012-07-06T09:46:48.863
> 
> 标签：java, entity, entitymanager

我用这条线来合并：

```
partner = em.merge(partner); 
```

这是在我的实体中：

```
@PrePersist
public void updateModificationDate(){
    this.lastModificationDate = new Date();
} 
```

如您所见，我想跟上实体上次更改的时间，

但该方法永远不会被调用，

有人知道我能做什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:39:53.390

您可以向您的实体添加以下注释：

```
@EntityListeners(SaveOrUpdateDateListener.class) 
```

实际上听众是：

```
public class SaveOrUpdateDateListener {

    @PrePersist
    @PreUpdate
    public void setDate(final CertApplication entity) {
        final Date now = new Date();
        entity.setUpdated(now);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:03:15.083

您可以阅读[本文](http://en.wikibooks.org/wiki/Java_Persistence/Advanced_Topics#Events)并了解为什么不调用 prepersist。另外我认为您可以使用`@Version`注释来保持实体的最后修改日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-01T20:17:37.587

尝试强制 em.flush() 但我不太确定强制刷新是否是一个好习惯。

# django - Django - 尝试访问时出错

> ID：11359826
> 
> 赞同：2
> 
> 时间：2012-07-06T09:47:00.703
> 
> 标签：django, django-models, django-forms, django-settings

在 models.py 中，在行中：

```
file_pdf_fattura_proforma_solo_amministrazione = models.FileField (upload_to = "/home/alex/Desktop/project/media/proforma", max_length=20000, blank=True) 
```

但是当我上传 pdf 文件时：

尝试访问“/home/alex/Desktop/project/media/proforma/contract_hosting.pdf”被拒绝。

目录 project/media/proforma 的权限为 777。我需要更改设置吗？

任何的想法？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:50:08.697

该[`upload_to`](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.upload_to)目录应该*与*您的`MEDIA_ROOT`设置相关，因此您只需要`(upload_to = "proforma, ..."`

# .net - LINQ to DataTable 查询

> ID：11359828
> 
> 赞同：0
> 
> 时间：2012-07-06T09:47:08.730
> 
> 标签：.net, linq

我有这样的 DataTable，我正在尝试查询。

```
ID|Language
sfd2133 English
asd213d English
vgjj31j English
fvjfjf2 German
dac31e3 English
asaq213 French
dent231 French
1dedae3 German 
```

我设法获得单一语言：

```
 IEnumerable<Tuple<string, string>> ids=
            from asset in selectedItems.AsEnumerable()
            select new Tuple<string, string>(asset["ID"].ToString(), 
            asset["Language"].ToString()); 
```

我如何获得ID 和单一市场的集合`IEnumerable<List<Tuple<string, string>>`在哪里，只说法语。`List<Tuple<string,string>>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:57:21.650

我不确定你真正想要实现什么。获得 a`List`而不是的最简单方法`IEnumerable`是使用`ToList()`扩展方法：

```
List<Tuple<string, string>> ids=
            (from asset in selectedItems.AsEnumerable()
            select new Tuple<string, string>(asset["ID"].ToString(), 
            asset["Language"].ToString())).ToList(); 
```

如果要获取`IEnumerable<List<>>`每个列表仅包含单一语言的行的位置，可以使用分组语法：

```
IEnumerable<List<Tuple<string, string>>> ids=
            from asset in selectedItems.AsEnumerable()
            group asset by asset["Language"].ToString() into g
            select g.Select(i => new Tuple<string, string>(i["ID"].ToString(), 
            i["Language"].ToString())).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T10:04:10.430

所以你想按语言分组。

你为什么不使用 a`Dictionary<string, IEnumerable<String>>`代替？

```
Dictionary<String, IEnumerable<String>> DialogResult =
            selectedItems.AsEnumerable()
            .GroupBy(r => r.Field<string>("Language"))
            .ToDictionary(g => g.Key, g => g.Select(r => r.Field<string>("ID"))); 
```

键是语言，值是`IEnumerable<String>`适当的 ID。

例如，如果您想列出*English*的所有 ID ，您可以：

```
var englishIDs = DialogResult["English"];
String output = string.Join(", ", englishIDs); // sfd2133, asd213d, vgjj31j, dac31e3 
```

`Dictionaries`具有最佳的查找性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T09:55:39.677

```
Hello try with (Essaye avec ce code Wild)

(from asset in selectedItems.AsEnumerable()

select new
{
   ID= asset.Field<String>("ID"),
   Language= asset.Field<String>("Language")
})
.AsEnumerable()
.ToDictionary(k => k.ID, v => v.Language); 
```

# toolbar - 如何排除 ALV 工具栏中不必要的按钮？

> ID：11359832
> 
> 赞同：1
> 
> 时间：2012-07-06T09:47:23.967
> 
> 标签：toolbar, abap, alv

因此，在参数`TOOLBAR`事件内部有一个表，我可以访问该表来手动更改所有按钮。`CL_GUI_ALV_GRID``E_OBJECT``MT_TOOLBAR`

有没有比在工具栏事件中像自定义按钮一样简单地创建它们更好的方法来包含/排除工具栏中的标准按钮？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T14:12:27.977

类似于`REUSE_ALV_GRID_DISPLAY`在课堂`CL_GUI_ALV_GRID`上也有一种方法。

定义一个类型的表`UI_FUNCTIONS`和一个类型的工作区`UI_FUNC`：

```
data: lt_exclude type ui_functions,
      ls_exclude type ui_func. 
```

将要隐藏的函数的属性附加到表中：

```
ls_exclude = cl_gui_alv_grid=>mc_fc_sum.
append ls_exclude to lt_exclude. 
```

标准功能的属性都以前缀 开头`MC_FC_`，此外，`MC_MB_`工具栏中还有整个菜单的前缀。

`set_table_for_first_display`使用带参数的方法传递表格`it_toolbar_excluding`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T06:57:09.967

如果您`REUSE_ALV_GRID_DISPLAY`在代码中使用，这可能对您有所帮助：

```
call function 'REUSE_ALV_GRID_DISPLAY'
exporting
  i_callback_program       = 'ZPROGRAM'
  i_callback_pf_status_set = 'SET_PF_STATUS'
  it_fieldcat              = it_fieldcat
tables
  t_outtab                 = gt_itab. 
```

你`SET_PF_STATUS`应该是这样的，以便消除一些你想要的按钮。在此示例中，我将删除“SORT_UP”按钮。

```
form set_pf_status using rt_extab type slis_t_extab.

 data: lv_flag VALUE 'X'.

 if lv_flag is not INITIAL.

   append '&OUP' to rt_extab.

 endif.

 set pf-status 'STANDARD' excluding rt_extab.
endform.                    "set_pf_status 
```

希望对您有所帮助。

塔尔哈

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-31T07:13:25.503

类 lcl_event_alv 定义。公共部分。

```
methods handle_toolbar for event toolbar of cl_gui_alv_grid
  importing e_object e_interactive sender. 
```

类 lcl_event_alv 实现。

方法句柄工具栏。

```
delete e_object->mt_toolbar where function = '&LOCAL&INSERT_ROW'  or function = '&LOCAL&DELETE_ROW'
                                or function = '&LOCAL&APPEND'     or function = '&LOCAL&COPY'
                                or function = '&LOCAL&PASTE'      or function = '&LOCAL&CUT'
                                or function = '&LOCAL&COPY_ROW'   or function = '&LOCAL&CUT'. 
```

最终方法。

数据：go_event 类型参考 lcl_event_alv。

```
create object go_event .
set handler go_event->handle_toolbar for go_grid1.

call method go_grid1->set_table_for_first_display
  exporting
    is_layout       = gd_layout
    is_variant      = value disvariant( report = sy-repid handle = 'GO_GRID1' )
    i_save          = 'A'
  changing
    it_fieldcatalog = gt_fcat1
    it_outtab       = gt_items1. 
```

# java - Spring 控制器和线程

> ID：11359836
> 
> 赞同：0
> 
> 时间：2012-07-06T09:47:29.817
> 
> 标签：java, mysql, multithreading, spring-mvc, thread-safety

我有一个关于控制器的问题。

我有一个控制器，它将用于编辑数据库中的某些数据，如果多个用户在不知不觉中同时访问它..那么我希望它将错误的数据存储在数据库中，是否可以使其控制由线程..如果可能的话，任何人都可以帮助我如何做到这一点。

提前致谢，

问候，拉贾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:55:12.353

如果您想在不知不觉中同时为多个用户使用它，您必须将该服务作为交易

```
 <bean id="txManager"
class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
      <property name="dataSource" ref="dataSource"/>
    </bean>

 <tx:advice id="txAdvice" transaction-manager="txManager"> 
```

Spring 将处理您的所有事务。而且我认为错误的数据意味着不一致的数据。是的，如果您尝试插入错误的数据，此事务将回滚到以前的状态。

[http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html)

# symfony - 从实体类访问存储库

> ID：11359837
> 
> 赞同：0
> 
> 时间：2012-07-06T09:47:32.667
> 
> 标签：symfony, repository, entity

我有以下代码：

```
 /**
 * Callback transform array of checkboxes to string and store it in database
 *
 * @ORM\PrePersist()
 * @ORM\PreUpdate()
 */
public function onPreUpdate()
{
    if($this->id == 13)
    {
        $data = implode('-', $this->value);
        $this->setValue($data);
    }
}

/**
 * Callback retrieved data from database transform to string to fill our field
 *
 * @ORM\PostLoad()
 */
public function onPostLoad()
{
    if($this->id == 13)
    {
        $data = (strstr($this->value, '-') !== false) ? explode('-', $this->value) : array($this->value);
        $this->setValue($data);
    }
} 
```

当我添加/更新数据时，我必须这样做以转换字符串中的复选框数组，反之亦然，当我从数据库中检索数据以将它们放入复选框小部件中时。但现在是静态的，即 id，我需要检查我的输入类型，如果它是一个复选框，请运行上面的代码......我做不到：

```
$this->getDoctrine()->getRepository(); 
```

在我的实体类中，因为它不起作用并且对于数据映射器来说不是一个好主意......所以我该怎么做呢？

感谢所有回复，对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:57:42.933

如果您想在数据库之前或之后持久化数据时转换数据，那么这不是一种好的编程方式，那么您可以使用 symfony2 教义[Data Transformer](http://symfony.com/doc/current/cookbook/form/data_transformers.html)

# eclipse - 我的 Maven 依赖项是 ClassNotFound Exception 或 NoClassDefFoundError

> ID：11359841
> 
> 赞同：0
> 
> 时间：2012-07-06T09:47:49.880
> 
> 标签：eclipse, hibernate, maven, jar, dependencies

再次在这里（我不得不重写它以使其更全面）：

我得到了项目 X 和项目 Y。它们彼此独立。虽然项目 X 正在处理所有休眠依赖项，但我在项目 Y 上获得了具有相同依赖项的 ClassNotFound Exceptions 和 NoClassDefFoundErrors。发生错误，因为休眠 jar 似乎没有部署在项目 Y 上。我必须将它们逐个 jar 放在它们为运行时部署的 WEB-INF/lib 文件夹中，而在项目 X 中它们已经通过依赖项部署. 区别：项目 Y 有一个父项目。

这里是 pom.xml ：

工作项目 X：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

        <modelVersion>4.0.0</modelVersion>

        <groupId>org.hibernate.tutorials</groupId>
        <artifactId>hibernate-tutorial</artifactId>
        <packaging>jar</packaging>
        <version>1.0.0-SNAPSHOT</version>
        <name>First Hibernate Tutorial</name>

        <dependencies>
            <dependency>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-core</artifactId>
                <version>4.1.3.Final</version>
            </dependency>

    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>servlet-api</artifactId>
        <version>6.0.35</version>
    </dependency>

            <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-simple</artifactId>
                <version>1.6.4</version>
            </dependency>

            <dependency>
                <groupId>javassist</groupId>
                <artifactId>javassist</artifactId>
                <version>3.12.1.GA</version>
            </dependency>

        <dependency>
            <groupId>javax.transaction</groupId>
            <artifactId>jta</artifactId>
            <version>1.1</version>
        </dependency>

              <dependency>
                <groupId>org.hsqldb</groupId>
                <artifactId>hsqldb</artifactId>
                <version>2.0.0</version>
            </dependency>

        </dependencies>     
    </project> 
```

项目 Y：

```
 <?xml version="1.0"?>
    <project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <modelVersion>4.0.0</modelVersion>
      <parent>
        <artifactId>com-project</artifactId>
        <groupId>com.project</groupId>
        <version>1.0-SNAPSHOT</version>
      </parent>
      <groupId>com.project.core</groupId>
      <artifactId>com-project-core</artifactId>
      <version>1.0-SNAPSHOT</version>
      <packaging>war</packaging>
      <name>com-project-core Jersey Webapp</name>

      <dependencies>
        <dependency>
          <groupId>com.project.facade</groupId>
          <artifactId>com-project-facade</artifactId>
          <version>1.0-SNAPSHOT</version>
        </dependency>

        <dependency>
          <groupId>junit</groupId>
          <artifactId>junit</artifactId>
          <version>4.8.2</version>
          <scope>test</scope>
        </dependency>

                    <!-- Hibernate -->

            <dependency>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-core</artifactId>
                <version>4.1.3.Final</version>
            </dependency>

            <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>servlet-api</artifactId>
        <version>6.0.35</version>
    </dependency>

            <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-simple</artifactId>
                <version>1.6.4</version>
            </dependency>

            <dependency>
                <groupId>javassist</groupId>
                <artifactId>javassist</artifactId>
                <version>3.12.1.GA</version>
            </dependency>

      </dependencies>
    </project> 
```

项目Y父pom：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
      <modelVersion>4.0.0</modelVersion>

      <groupId>com.project</groupId>
      <artifactId>com-project</artifactId>
      <version>1.0-SNAPSHOT</version>
      <packaging>pom</packaging>

      <name>com-project</name>
      <url>http://maven.apache.org</url>

      <modules>
        <module>com-project-core</module>
        <module>com-project-client</module>
        <module>com-project-facade</module>
      </modules>

      <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
      </properties>

    </project> 
```

我已经尝试过[这种](https://stackoverflow.com/questions/1052978/eclipse-java-lang-classnotfoundexception/1062435#1062435)尝试，但一切就绪。

# javascript - 我想在画布上的 html5 中绘制线条和矩形，如绘画应用程序

> ID：11359842
> 
> 赞同：-1
> 
> 时间：2012-07-06T09:47:50.233
> 
> 标签：javascript, html

我想创建一个像绘画这样的应用程序。我想画一条线和矩形元素，比如油漆。但是大多数时候硬代码都可以在网上获得。请帮助我编写代码或某种解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:49:50.490

查看本教程，这是一步一步的教程，有助于理解画布上的线条、矩形和手绘。

[http://dev.opera.com/articles/view/html5-canvas-painting/](http://dev.opera.com/articles/view/html5-canvas-painting/)

# java - Jpa Entity Manager：未考虑的更改

> ID：11359843
> 
> 赞同：-2
> 
> 时间：2012-07-06T09:47:58.783
> 
> 标签：java, jpa

我有一批从另一个数据库更新实体，我使用与主应用程序中使用的相同的 entityManager，但在我重新启动 TomcatServer 之前，我看不到实体的变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:30:58.550

EntityManager 不知道批量操作。在 JPA 2.0 规范中，这是用以下词语来说明的：

> 执行批量更新或删除操作时应小心，因为它们可能导致数据库与活动持久性上下文中的实体之间的不一致。一般来说，批量更新和删除操作只能在新的持久性上下文中的事务内执行，或者在获取或访问其状态可能受此类操作影响的实体之前执行。

您可以做的是通过[EntityManager.refresh(Object entity)刷新单个实体](http://docs.oracle.com/javaee/5/api/javax/persistence/EntityManager.html#refresh%28java.lang.Object%29)

# lossless-compression - 超大数据的无损数据压缩——行星人工智能

> ID：11359850
> 
> 赞同：5
> 
> 时间：2012-07-06T09:48:17.733
> 
> 标签：lossless-compression, large-data

我想为人工智能创造一个行星大小的环境。它将模拟一个非常大的世界的地下生活。根据维基百科，地球的表面积为 510,072,000 Km^2，我想创建一个相似比例的正方形，也许更大。我将在每个位上存储一米，其中 0 表示污垢，1 表示污垢墙。

我们先计算一下如何存储这个正方形的单行。一条线是510072000000m，每个字节可以存储8米，所以一条线是59.38GB，整个世界是3.44PB。而且我想在每平方米中至少添加水和熔岩，这将使结果乘以 2。

我需要使用无损数据压缩算法压缩这些信息。我首先使用 7zip 尝试了一种非常直接的方法，然后我尝试了一个较小的世界，其中一行是 6375B。理论上世界应该是6375^2B = 38.76MB，但是当我尝试它时我得到一个155MB的文件，我不知道为什么会有这种差异。但是当我用 7Zip 压缩它时，我得到一个 40.1MB 的文件。这是一个巨大的差异，按照这个比例，我会将 3.44PB 的世界文件转换为 912.21GB 的文件。

我的第一个想法是，为什么我有这么大的文件，而数学告诉我它应该更小？也许问题是代码，也许问题是我在数学上有错误。代码如下：（C#）

```
// 510072000000m each line = 63759000000B
const long SIZE = 6375;

// Create the new, empty data file.
string fileName = tbFile.Text;

FileStream fs = new FileStream(fileName, FileMode.Create);

// Create the writer for data.
BinaryWriter w = new BinaryWriter(fs);

// Use random numbers to fill the data
Random random = new Random();
// Write data to the file.
for (int i = 0; i < SIZE; i++)
{
    for (int j = 0; j < SIZE; j++)
    {
        w.Write(random.Next(0,256));
    }
}

w.Close();

fs.Close(); 
```

数学是如此基础，以至于如果我做错了什么，我就看不到它。

你能给我什么建议吗？只关注数据压缩，人工智能不是问题，因为我有进化算法的经验，世界不需要是实时的，它可以占用它需要的所有时间。

谢谢大家的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:02:17.827

我不知道`C#`，但似乎您当前每次写入 4 个字节（6375 * 6375 * 4 字节，MB = 155 MB）。所以我猜想 Write 方法当前写入一个 32 位整数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T10:11:17.290

@Scharron 已正确回答了您问题的具体细节，但我认为还有一个更根本的问题：

理论上不可能显着压缩随机数据。事实上，当给定随机输入数据时，大多数压缩算法都会*增加*存储大小。也许您的 AI 算法的细节会引入一些无法压缩的模式，但如果您从真正随机的输入数据开始，您将不得不存储这些多个 PB。

您看到显着压缩的原因是，正如@Scharron 指出的那样，您为每个数据字节写入 3 个零字节，从而产生更容易压缩的数据。

# android - 使用密钥库签名后，Android 启动器应用程序未检测到 Home 密钥

> ID：11359853
> 
> 赞同：1
> 
> 时间：2012-07-06T09:48:35.823
> 
> 标签：android, signing, android-launcher, android-homebutton

我正在 Android Ice Cream Sandwich 中创建启动器应用程序。

我有 3 个活动。这就是它们在清单文件中的声明方式。

```
 <activity
        android:label="@string/app_name"
        android:name=".ActivityOne" 
        android:theme="@android:style/Theme.Light.NoTitleBar"
        >
        <intent-filter >
              <action android:name="android.intent.action.MAIN" />    
             <category android:name="android.intent.category.HOME"/>    
            <category android:name="android.intent.category.DEFAULT" /> 
              <category android:name="android.intent.category.LAUNCHER" />  
        </intent-filter>
    </activity>

         <activity android:name=".Activitytwo"
        android:theme="@android:style/Theme.Light.NoTitleBar">

    </activity>

    <activity android:name=".ActivityThree"
        android:theme="@android:style/Theme.Light.NoTitleBar">

    </activity> 
```

在手机中安装 apk 并按系统栏中的 Home 键后，我将转到“ActivityOne”。这工作得很好。

然后我创建了一个密钥来签署 apk。从 Eclipse 中导出项目并签署 apk。现在按 Home 键没有任何效果。

签名后，我需要应用程序以与原来相同的方式工作。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T04:32:34.820

解决了。

在活动标记下的清单中添加以下行解决了它。

```
android:launchMode="singleTask"

<activity
    android:label="@string/app_name"
    android:name=".ActivityOne"
    android:launchMode="singleTask"
    android:theme="@android:style/Theme.Light.NoTitleBar"
    >
    <intent-filter >
          <action android:name="android.intent.action.MAIN" />    
         <category android:name="android.intent.category.HOME"/>    
        <category android:name="android.intent.category.DEFAULT" /> 
          <category android:name="android.intent.category.LAUNCHER" />  
    </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:51:15.387

只需删除两行

```
<category android:name="android.intent.category.HOME"/>    
<category android:name="android.intent.category.DEFAULT" /> 
```

来自您的 ActivityOne

```
<intent-filter >
...
...
</intent-filter> 
```

# listview - 更新在选项卡栏布局 QML 中显示的列表视图

> ID：11359854
> 
> 赞同：3
> 
> 时间：2012-07-06T09:48:36.540
> 
> 标签：listview, qml, tabbar

我创建了一个普通的标签栏，并在我的 sd 卡的特定目录中的列表视图中显示音乐文件。我希望在目录中下载新文件时更新列表。但是由于我已经在标签栏中显示了列表，所以 qml 是在开始时加载的。我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T01:42:41.587

如果您可以选择，我会选择 QtQuick 2.0 实现并改用它。它将自动对文件夹中的更改做出反应。

否则，您别无选择，只能重新创建模型，例如

```
import QtQuick 1.1
import Qt.labs.folderlistmodel 1.0

ListView {
    id: view
    model: folderModel
    delegate: Text { text: fileName }

    property variant folderModel
    function updateModel() {
        var folder = ""
        if (folderModel) {
            folder = folderModel.folder
            folderModel.destroy()
        }
        folderModel = modelComponent.createObject(view, {"folder": folder})
    }

    Component {
        id: modelComponent
        FolderListModel {}
    }

    Component.onCompleted: updateModel()
} 
```

丑陋，但它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-28T08:22:31.383

一旦从路径中添加或删除新文件，FolderListModel 似乎会自动更新列表：(Qt5.7.1)

```
 ListView
    {
        id:myListViewUSB
        anchors.fill: parent

        FolderListModel
        {
            id: folderModelUSB
            folder: "file:///mnt/usb"
        }
        model: folderModelUSB

        delegate:
        Text
        {
            text:  fileName
            anchors.horizontalCenter: parent.horizontalCenter
        }
    } 
```

我通过在我的文件夹中添加和删除文件来测试它，它会自动出现在 ListView 上。

# objective-c - 自动从文件夹中为 ipad3 选择 ipad @2x 视网膜图像

> ID：11359856
> 
> 赞同：0
> 
> 时间：2012-07-06T09:48:38.300
> 
> 标签：objective-c, ipad-3

我正在开发一个 iPad3/iPad2 应用程序。在我的包中，我有 iPad2 和 @2xiPad3 图像。当我使用包时它工作正常。在 iPad2 中检测到低分辨率图像，在 iPad 3 中检测到高分辨率图像。但我的问题是当我从文件夹访问它时。我怎样才能对文件夹做同样的事情。当我使用文件夹而不是捆绑时，只加载低分辨率图像。这是我的代码。

```
NSString *docsDirectory =  [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES) objectAtIndex:0];
NSString *fileName = @"image.png";
NSString *path = [docsDirectory stringByAppendingPathComponentNSString stringWithFormat"/%@",fileName]]; 
```

我也放在`image@2x~ipad.png`了文档目录中。但它没有在 ipad3 中自动检测到。我也尝试使用不带扩展名的图像名称。但问题依然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:11:23.700

在您的文件夹中无需设置 `image@2x~ipad.png`。只要设置`image@2x.png`就足够了。

# java - Android App判断是否有连接

> ID：11359857
> 
> 赞同：0
> 
> 时间：2012-07-06T09:48:42.423
> 
> 标签：java, android

我想问一个对你们中的一些人来说可能非常简单的问题。

我如何确定我的应用程序是否有互联网连接？

我想连接到一个 MySQL 数据库，当没有 Internet 时，应该有一个 AlertDialog。

```
 new AsyncTask() {
        ProgressDialog dialog = ProgressDialog.show(AppActivity.this, "Lade", "Daten werden abgerufen...", true);
        @Override
        protected void onPostExecute(Object result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            dialog.dismiss();
            max = Name.size()-1;
            kontrolle = new boolean [max*2];

            pb.setMax(max/2);

            java.util.Arrays.fill(kontrolle, false);

            bilder();
        }

        @Override
        protected Object doInBackground(Object... arg0) 
        {
            // TODO Auto-generated method stub
               dialog.show();
               getData();
            return null;
        }
    }.execute();

 private void getData() 
{
    String result = "";
    ArrayList<NameValuePair> nameValuePair = new ArrayList<NameValuePair>();

    try
    {
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost("http://.../read.php");
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePair));
        HttpResponse response = httpClient.execute(httpPost);
        HttpEntity entity = response.getEntity();
        is=entity.getContent();
    }
    catch(Exception e)
    {
        Log.e("log-tag","Keine Verbindung"+e.toString());
        Toast.makeText(getApplicationContext(), "Keine Verbindung!", Toast.LENGTH_SHORT).show();
    }

    try
    {

        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = "";

        while((line= reader.readLine())!=null)
                {
                    sb.append(line+"n");
                }
        is.close();
        result = sb.toString();
         result.trim();
    }
    catch(Exception e)
    {
        Log.e("log-tag","Error"+e.toString());
    }
    try
    {
        JSONArray jArray = new JSONArray(result);
        for(int i=0;i<jArray.length();i++)
        {
            JSONObject json_data = jArray.getJSONObject(i);

            ID.add((String) json_data.get("id"));
            Name.add((String) json_data.get("name"));
            Pts.add((String)json_data.get("pts"));
        }
    }
    catch(Exception e)
    {
        Log.e("log-tag","Error2"+e.toString());
    }
} 
```

我怎样才能做到这一点？我不知道我是这么想的

```
catch(Exception e)
{
    Log.e("log-tag","Keine Verbindung"+e.toString());
    Toast.makeText(getApplicationContext(), "Keine Verbindung!", Toast.LENGTH_SHORT).show();
} 
```

会做这项工作，但是当我没有连接时（因为我将手机设置为飞行模式），只有一个无休止的 ProgressDialog :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:55:31.713

正如乔恩泰勒所说，这是一个[重复的问题](https://stackoverflow.com/questions/9570237/android-check-internet-connection)

您可以使用以下代码来执行此操作

此方法检查手机是否已连接到互联网，如果已连接则返回 true，如果未连接则显示警告框：

```
private boolean isNetworkConnected() {
ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo ni = cm.getActiveNetworkInfo();
if (ni == null) {
// There are no active networks.
AlertDialog.Builder altDialog= new AlertDialog.Builder(this);
altDialog.setMessage("No network connection!");
return false;
} else
return true;
} 
```

将此添加到清单文件中，

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

**编辑：要获取网络类型，您可以使用此代码段：**

```
ConnectivityManager conMan = (ConnectivityManager)  getSystemService(Context.CONNECTIVITY_SERVICE);

//mobile
State mobile = conMan.getNetworkInfo(0).getState();

//wifi
State wifi = conMan.getNetworkInfo(1).getState(); 
```

然后像这样使用它：

```
if (mobile == NetworkInfo.State.CONNECTED || mobile == NetworkInfo.State.CONNECTING) {
//mobile
} else if (wifi == NetworkInfo.State.CONNECTED || wifi == NetworkInfo.State.CONNECTING) {
//wifi
} 
```

# asp.net - 缓存在 IIS 6.0 中的指定时间后似乎没有过期

> ID：11359858
> 
> 赞同：0
> 
> 时间：2012-07-06T09:48:43.103
> 
> 标签：asp.net, caching, iis-6

我们的应用程序代码部署在环境为 windows server 2003、iis 6.0 的生产服务器上。我们的应用程序中有一些缓存代码，其绝对过期时间设置为 DateTime.Now.AddMinutes(30)。我们使用了 HttpContext.Current.Cache 对象。

```
HttpContext.Current.Cache.Add(Scope,objectCache,
                                      null,
                                      DateTime.Now.AddMinutes(30),
                                      Cache.NoSlidingExpiration,
                                      CacheItemPriority.High, LifeStyleEvicted);

private static void LifeStyleEvicted(string key, object value, CacheItemRemovedReason reason)
{
var objectCache = ((IObjectCache)value);
if (objectCache != null) objectCache.DisposeAndClear();
} 
```

所以每 30 分钟后应该重新启动缓存。第 31 分钟开始的所有请求都应该比正常时间长一点。但是在 windows server 2003 和 IIS 6.0 中还没有观察到这种行为。

最近我们已经将我们的代码部署到了windows server 2008, IIS 7.5。在这种环境中，在第 31 分钟开始时发出的所有请求都比正常情况花费的时间太长。

有人可以告诉我为什么 Windows Server 2003 和 IIS 6.0 中没有重现这种行为吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:16:42.247

造成这种情况的常见原因是应用程序刷新（缓存刷新）或 Web 池重新启动。如果网络池在 30 分钟过去之前重新启动，缓存将被刷新，因此您不会在 +31 看到任何峰值。

检查您的事件日志，看看您是否在 .NET 引擎上看到任何会导致进程回收的灾难性错误，还要检查您在 IIS 上的回收时间，以确保它们的设置没有不同。

# php - 带有接口和类型提示的 Doctrine2 实体

> ID：11359859
> 
> 赞同：1
> 
> 时间：2012-07-06T09:48:47.303
> 
> 标签：php, oop, interface, doctrine-orm

当我构建一个函数并想要输入一个参数时，它是一个实现给定接口的实体，我收到如下错误：

```
AddToFavorite::AddToFavorite() must be an instance of Trendmed\Interfaces\Favoriteable, instance of Proxy\__CG__\Trendmed\Entity\Clinic given 
```

当然，我的实体正在实现给定的接口。

我认为这是因为 Doctrine 代理类不直接实现实体类所执行的接口，因此禁止我进行正确的接口类型提示。你有解决这个问题的办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-09T16:24:49.227

我刚刚找到这个线程，并且会添加这个，因为其他人可能正在寻找。
在顶部放置一个 Use，不要在函数 def 中使用完整的命名空间。

# java - PrimeFaces 的 DataTable 即时行选择未在浏览器中正确呈现

> ID：11359861
> 
> 赞同：0
> 
> 时间：2012-07-06T09:48:59.093
> 
> 标签：java, jsf, primefaces

我有一个 DataTable，我想做实例行选择。单击一行后，将出现一个对话框，在 PanelGrid 中显示记录详细信息。我面临的问题是 Dialog 和 PanelGrid 没有呈现。当我从浏览器查看源代码时，它找不到元素。在 Apache 日志文件中，它有这个错误“javax.faces.FacesException：在视图中找不到标识符为“frmMain:strMaint”的组件。” frmMain 是 HTML 表单的 ID，strMaint 是 PanelGrid 的 ID。

下面是 XHTML 文件。

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>PROFIT V10</title>
        <h:outputStylesheet name="styles.css" library="css" />
    </h:head>
    <h:body>
        <h:form id="frmMain">
            <p:panel styleClass="layout-panel"
                     style="width: 98%; margin-left: auto; margin-right: auto; margin-top: 15px;">
                <h2>Store Search</h2>
                <p:focus context="pnlStoreSearchCriteria" />
                <h:panelGrid id="pnlStoreSearchCriteria" columns="2" styleClass="panel-search">
                    <h:outputText value="Company" />
                    <p:selectOneMenu id="coySub" value="#{storeSearchBean.coySub}" effect="">
                        <f:selectItems value="#{storeSearchBean.coysubmsts}" var="coysub"
                                        itemValue="#{coysub.coy_sub}"
                                        itemLabel="#{coysub.coy_sub} - #{coysub.coy_sub_name}" />
                    </p:selectOneMenu>
                    <h:outputText value="Business Unit" />
                    <p:selectOneMenu id="storeCat" value="#{storeSearchBean.storeCat}">
                        <f:selectItem itemLabel="" itemValue="" />
                        <f:selectItems value="#{storeSearchBean.strcatmsts}" var="strcatmst"
                                        itemValue="#{strcatmst.category}"
                                        itemLabel="#{strcatmst.category} - #{strcatmst.category_name}" />
                    </p:selectOneMenu>
                    <h:outputLabel for="store" value="Store" />
                    <p:autoComplete id="store" value="#{storeSearchBean.store}" maxResults="10" maxlength="4"
                                    completeMethod="#{storeSearchBean.populateStoreAutoComplete}" size="4" />
                    <h:outputLabel for="storeName" value="Store Name" />
                    <p:autoComplete id="storeName" maxlength="30" size="50"
                                    value="#{storeSearchBean.storeName}" maxResults="10"
                                    completeMethod="#{storeSearchBean.populateaStoreNameAutoComplete}" />
                    <f:facet name="footer">
                        <h:panelGroup id="pnlgrpButtonSearch">
                            <p:commandButton id="btnReset" type="reset" value="Reset"
                                                action="#{storeSearchBean.doReset}" />
                            <p:commandButton id="btnSearch" type="submit" value="Search"
                                                action="#{storeSearchBean.doSearch}"
                                                update="pnlStoreSearchResult" />
                        </h:panelGroup>
                    </f:facet>
                </h:panelGrid>
                <p:separator />
                <p:outputPanel id="pnlStoreSearchResult">
                    <p:dataTable id="tblStoreSearchResult" value="#{storeSearchBean.stores}" var="store"
                                    emptyMessage="No data to display" paginator="true" rows="10"
                                    paginatorPosition="bottom" draggableColumns="true" editable="true"
                                    selection="#{storeSearchBean.selectedStore}" selectionMode="single">
                        <!--
                        <p:ajax event="rowSelect" listener="#{storeSearchBean.onRowSelect}" update="frmMain:strMaint"
                                oncomplete="strmstDialog.show()" />
                        <p:ajax event="rowUnselect" listener="#{storeSearchBean.onRowUnselect}" />
                        -->
                        <p:column sortBy="#{store.store_coy_sub}" headerText="Company">
                            <h:outputText value="#{store.store_coy_sub}" />
                        </p:column>
                        <p:column sortBy="#{store.store_category}" headerText="Business Unit">
                            <h:outputText value="#{store.store_category}" />
                        </p:column>
                        <p:column sortBy="#{store.store}" headerText="Store">
                            <h:outputText value="#{store.store}" />
                        </p:column>
                        <p:column sortBy="#{store.store_name}" headerText="Store Name">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{store.store_name}" />
                                </f:facet>
                                <f:facet name="input">
                                    <h:inputText value="#{store.store_name}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column sortBy="#{store.store_type}" headerText="Type">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{store.store_type}" />
                                </f:facet>
                                <f:facet name="input">
                                    <h:selectOneMenu value="#{store.store_type}">
                                        <f:selectItem itemValue="W" itemLabel="W" />
                                        <f:selectItem itemValue="S" itemLabel="S" />
                                    </h:selectOneMenu>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column sortBy="#{store.store_del_cd}" headerText="Deleted">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{store.store_del_cd}" />
                                </f:facet>
                                <f:facet name="input">
                                    <h:selectOneMenu value="#{store.store_del_cd}">
                                        <f:selectItem itemValue="Y" itemLabel="Y" />
                                        <f:selectItem itemValue="N" itemLabel="N" />
                                    </h:selectOneMenu>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column>
                            <p:rowEditor />
                        </p:column>
                    </p:dataTable>
                    <p:dialog id="dlgMaint" header="Strmst Maintenance" widgetVar="strmstDialog" resizable="false"
                              modal="true" showEffect="fade" hideEffect="fade">
                        <h:panelGrid id="strMaint" columns="2">
                            <h:outputText value="#{storeSearchBean.selectedStore.store}" />
                            <h:outputText value="#{storeSearchBean.selectedStore.store_name}" />
                        </h:panelGrid>
                    </p:dialog>
                </p:outputPanel>
            </p:panel>
            <div id="copyright">Copyright &copy; 2012 QR Retail Automation (ASIA) Sdn. Bhd. All rights reservered.</div>
        </h:form>
    </h:body>
</html> 
```

当我评论这两个`<p:ajax /> component`时， Dialog 和 PanelGrid 在浏览器中呈现正常。

我的环境如下：

*   NetBeans 7.1.2
*   PrimeFaces 3.3.1（*我也试过 3.2 但还是一样*）
*   JDK 1.6.0.33
*   Apache Tomcat 7（*也尝试过 Glassfish3，但还是一样*）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:52:52.317

您需要使用绝对 ID 搜索组件。如果您看到 findComponent 的搜索算法：

通过在满足以下条件之一时立即停止来确定将作为搜索基础的 UIComponent：

*   如果搜索表达式以分隔符开头（称为“绝对”搜索表达式），则基将是组件树的根 UIComponent。前导分隔符将被删除，搜索表达式的其余部分将被视为“相对”搜索表达式，如下所述。

*   否则，如果此 UIComponent 是 NamingContainer，它将作为基础。

*   否则，搜索该组件的父级。如果遇到 NamingContainer，它将是基础。

*   否则（如果没有遇到 NamingContainer），根 UIComponent 将是基础。

`<p:commandButton>`里面是一个UINamingContainer `<p:dataTable>`。因此，您的搜索在第二个项目符号处停止。

您可以通过在搜索表达式前面加上分隔符来解决此问题，以便从根中搜索组件，如下所示：

`update=":frmMain:strMaint"`

[文档](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#findComponent%28java.lang.String%29)

# javascript - Javascript有一个表单提交只是更新div标签中的html

> ID：11359863
> 
> 赞同：0
> 
> 时间：2012-07-06T09:49:04.467
> 
> 标签：javascript, function, variables, arguments, form-submit

嗨，我有一个网页，可以让一些人通过单击按钮将信息添加到他们的网页，或者这就是目标。他们单击按钮，页面的显示部分变为带有 Javascript 的表单。现在，这个表单只允许他们选择他们想要更改的信息的哪一部分，并且在提交时我不想重定向，我什至不希望它向服务器发送任何内容。该表单只有一个值，我希望将其传递给一个存储第一个表单值的函数，在旧表单基于前一个表单的位置放置一个新表单，然后最终将信息提交给php 处理其余部分并更新数据库的服务器。所以到目前为止我有这个，

```
 <script type="text/javascript" src="jquery.js"></script>     
<script type="text/javascript" src="<?php echo BASE_JS_URL;?>gamearray.js"></script>      
<script type="text/javascript">
function addGameForm(){         
            var addGameForm = '<form name="game" id="game" onsubmit="displayGameForm(this.form[game])">'
                +'<select name="game" id="game">'
                +'<option value="starcraftII">Starcraft II</option>'
                +'<option value="worldofwarcraft">World of Warcraft</option>'
                +'<option value="callofduty">Call of Duty</option>'
                +'</select>'
                +'<input type="submit" value="Add">'
                +'</form>';
             $("#user_info").html(addGameForm);
     }

     function displayGameForm(gamename){
         $("#user_info").html(gamearray[gamename]);
     } 
```

addGameForm() 函数有效，但提交时其中的表单只是将我重定向到它开始的页面，其中包含 URL 中的游戏值。任何帮助将不胜感激！此外，如果有更好的方法可以将 html 分配给新行上的 javascript 变量，而没有那些烦人的 +'' 东西，我将不胜感激！

提前致谢！

*编辑*好吧，为了更清楚起见，页面上有一个按钮，单击该按钮会调用 addGameForm() 函数。这会在页面上的 div 标签中显示新表单（正在工作），然后在提交新表单时，我需要它来加载一个新表单，以便用户可以在提交之前完成他需要的所有数据的输入到服务器。一个数据库调用，加上它看起来更酷。:P

编辑：这是 gamearray.js 文件。

```
gamearray = new Array{
    starcraftII: 'Hi',
    callofduty: '<form name="callofduty" id="callofduty" action="callofduty_info_handle.php" method="get">'
            +'Username: <input type="text" name="username" id="username"/><br/>'
            +'Kill/Death Ratio: <input type="text" name="kdr" id="kdr"><br/>'
            +'Role: <select name="role" id="role">'
            +'<option value="Sniper">Sniper</option>'
            +'<option value="Explosives">Explosives</option>'
            +'<option value="Close Quarters">Close Quarters</option>'
            +'<option value="Flag Runner">Flag Runner</option>'
            +'<option value="Cover Fire">Cover Fire</option>'
            +'<option value="Assault">Assault</option>'
            +'<option value="Defender">Defender</option>'
            +'</select><br/>'
            +'Game Type: <select name="gametype" id="gametype">'
            +'<option value="Free for All">Free for All</option>'
            +'<option value="Team Deathmatch">Team Deathmatch</option>'
            +'<option value="Capture the Flag">Capture the Flag</option>'
            +'<option value="Mercenary">Mercenary</option>'
            +'<option value="Domination">Domination</option>'
            +'<option value="Ground War">Ground War</option>'
            +'<option value="Demolition">Demolition</option>'
            +'<option value="Sabotage">Sabotage</option>'
            +'<option value="Headquaters">Headquarters</option>'
            +'<option value="Search and Destroy">Search and Destroy</option>'
            +'<option value="Team Tactical">Team Tactical</option>'
            +'</select><br/>'
            +'<input type="submit" value="Add">'
        +'</form>',
    worldofwarcraft: ''
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:55:09.430

如果您对实际提交表单不感兴趣，则只需将其删除并在按钮上放置一个点击事件：

```
function addGameForm(){         
        var strGameForm = '<select name="game" id="game">'
            +'<option value="starcraftII">Starcraft II</option>'
            +'<option value="worldofwarcraft">World of Warcraft</option>'
            +'<option value="callofduty">Call of Duty</option>'
            +'</select>'
            +'<input type="button" value="Add" onclick="displayGameForm()">';
         $("#user_info").html(strGameForm);
 }

 function displayGameForm(){
     $("#user_info").html($("#game option:selected").val());
 } 
```

也许您可以使用常规的一维数组来存储游戏数组数据：

```
var gameArray = new Array():
gameArray[0] = "startcraft HTML";
gameArray[1] = "callofduty HTML";
gameArray[2] = "worldofwarcraft HTML"; 
```

然后使用选项值的相应索引，如下所示：

```
+'<option value="0">Starcraft II</option>'
+'<option value="2">World of Warcraft</option>'
+'<option value="1">Call of Duty</option>' 
```

那么你应该可以使用：

```
gameArray[$("#game option:selected").val()]; 
```

您可以考虑将每个游戏的 HTML 存储在单独的 .html 文件中，并使用 jQuery 加载它们：

```
function displayGameForm(){
    switch($("#game option:selected").val())
    {
        case 0:
            $('#user_info').load('starcraft.html');
            break;
        case 1:
            $('#user_info').load('callofduty.html');
            break;
        case 2:
            $('#user_info').load('worldofwarcraft.html');
            break;
    }
} 
```

# ruby-on-rails-3.2 - Shopify shopify_app 生成器私有应用程序结合 shopify_api gem

> ID：11359869
> 
> 赞同：1
> 
> 时间：2012-07-06T09:49:22.897
> 
> 标签：ruby-on-rails-3.2, shopify

这个问题的延续： [How to use the Rails shopify_app gem with a private API key?](https://stackoverflow.com/questions/11274135/how-to-use-the-rails-shopify-app-gem-with-a-private-api-key)

我有一个使用 shopify_app gem 生成的 Shopify 应用程序，一切正常。

我想将其“转换”为私有应用程序，主要目的是离线访问以运行计划任务。

通过 irb 使用 shopify_api gem 一切正常，我可以通过这种方式更新订单等，但是为私有应用程序初始化 shopify_api 会话是我现在正在努力解决的问题。

1.  最好重新安装应用程序以获得我需要的访问令牌，还是我可以通过其他方式访问它？
2.  最好编写另一个控制器来处理私有应用程序，还是可以使用 shopify_app gem 提供的那些？

我已经阅读了下面的说明（以及许多其他 shopify 文档），所以这不是不看的情况，我只需要一些额外的指导： [http ://wiki.shopify.com/Using_the_shopify_api_gem_with_the_credentials_of_a_private_application](http://wiki.shopify.com/Using_the_shopify_api_gem_with_the_credentials_of_a_private_application)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:45:08.917

您需要做的就是使用您提供的密码初始化 ShopifyAPI::Session。您可能在某处的前置过滤器中执行此操作？不要使用 access_token 进行初始化，而是使用您拥有的密码。

# java - 运行时NoClassDefFoundError的可能原因

> ID：11359871
> 
> 赞同：0
> 
> 时间：2012-07-06T09:49:25.957
> 
> 标签：java, weblogic

我有`Weblogic 9`,`JRockit`和应用程序在 WebLogic 的两个节点上运行。
在应用程序编译、部署并成功运行几个小时后，我收到以下错误：

```
java.lang.NoClassDefFoundError: net/sf/ehcache/concurrent/LockType
    at net.sf.ehcache.store.FrontEndCacheTier.readLock(FrontEndCacheTier.java:632)
    at net.sf.ehcache.store.FrontEndCacheTier.getKeys(FrontEndCacheTier.java:485)
    at net.sf.ehcache.Cache.getKeys(Cache.java:1913)
    at org.terracotta.modules.ehcache.store.servermap.OnlineEhcacheSMLocalStore.getKeys(OnlineEhcacheSMLocalStore.java:44)
    at org.terracotta.modules.ehcache.store.servermap.EhcacheSMLocalStore.getKeys(EhcacheSMLocalStore.java:82)
    at com.terracotta.toolkit.collections.servermap.L1ServerMapLocalCacheStoreImpl.getKeys(L1ServerMapLocalCacheStoreImpl.java:51)
    at com.tc.object.servermap.localcache.impl.ServerMapLocalCacheImpl.clear(ServerMapLocalCacheImpl.java:247)
    at com.tc.object.TCObjectServerMapImpl.clearLocalCache(TCObjectServerMapImpl.java:600)
    at com.terracotta.toolkit.collections.ConcurrentDistributedServerMapDsoApplicator.hydrate(ConcurrentDistributedServerMapDsoApplicator.java:145)
    at com.tc.object.TCClassImpl.hydrate(TCClassImpl.java:199)
    at com.tc.object.TCObjectImpl.hydrate(TCObjectImpl.java:113)
    at com.tc.object.tx.ClientTransactionManagerImpl.basicApply(ClientTransactionManagerImpl.java:350)
    at com.tc.object.tx.ClientTransactionManagerImpl.apply(ClientTransactionManagerImpl.java:378)
    at com.tc.object.handler.ReceiveTransactionHandler.handleEvent(ReceiveTransactionHandler.java:100)
    at com.tc.async.impl.StageImpl$WorkerThread.run(StageImpl.java:145)  

<04.07.2012 13:28:54 MSD> Notice WebLogicServer BEA-000388 JVM called WLS shutdown hook. The server will force shutdown now  

<04.07.2012 13:28:54 MSD> Alert WebLogicServer BEA-000396 Server shutdown has been requested by WLS Kernel
Exception in thread "Thread-42" java.lang.NoClassDefFoundError: net/sf/ehcache/concurrent/LockType
    at net.sf.ehcache.store.FrontEndCacheTier.writeLock(FrontEndCacheTier.java:644)
    at net.sf.ehcache.store.FrontEndCacheTier.removeAll(FrontEndCacheTier.java:503)
    at net.sf.ehcache.Cache.removeAll(Cache.java:2461)
    at net.sf.ehcache.Cache.removeAll(Cache.java:2446)
    at org.terracotta.modules.ehcache.store.servermap.OnlineEhcacheSMLocalStore.clear(OnlineEhcacheSMLocalStore.java:13 
```

如您所见，WebLogic 决定在收到此错误后关闭两个节点。运行时
的原因是什么？`NoClassDefFoundError`我想这个类`LockType`应该在这个错误之前使用，这意味着它必须在运行时卸载，对吧？

# environment-variables - 从工作流中的自定义活动设置新的环境变量

> ID：11359884
> 
> 赞同：0
> 
> 时间：2012-07-06T09:50:14.163
> 
> 标签：environment-variables, workflow-foundation-4, workflow-foundation, workflow-activity

有没有办法从 WF 4.0 工作流程中创建新的环境变量，或者如果它已经存在则更新现有的环境变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:16:54.270

您可以在代码活动中设置环境变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T18:40:37.863

您可以使用 System.Activities.Statements.InvokeMethod 活动来调用 System.Environment.SetEnvironmentVariable 静态方法。

在参数设置中，您需要传递 2 个“输入”参数。第一个是环境变量的名称，第二个是值。

![在此处输入图像描述](../Images/446255644ddad1d43b7f4912c83d5f30.png)

# ruby - 安装 rbenv 后，我需要添加 require 'rubygems'

> ID：11359886
> 
> 赞同：0
> 
> 时间：2012-07-06T09:50:31.450
> 
> 标签：ruby, rubygems, rbenv

我在我的 Macbook 上用 rbenv 替换了 rvm，在这样做之后，我需要添加`require 'rubygems'`一些东西来让它们工作。

有没有办法强制要求红宝石，或消除对它的需要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:43:55.937

出于理智的原因，您应该始终需要您需要的东西。由于 ruby​​gems 默认包含在 ruby​​ 1.9 中，您应该执行以下操作：

```
require 'rubygems' unless defined?(Gem) 
```

在脚本的顶部。

# javascript - IOS 网页 - 访问控制允许 Orgin 不允许

> ID：11359895
> 
> 赞同：0
> 
> 时间：2012-07-06T09:51:00.183
> 
> 标签：javascript, html, ios, ajax, cross-domain

我在做一个简单的 ajax 请求，比如：`

```
$.ajax({
type: 'POST',
url: 'http://' + serverIP + '/saveJSON.php',
crossDomain: true,
data: 'helloooooooooo',
dataType: 'text',
success: function(responseData, textStatus, jqXHR) {
    var value = responseData.someKey;
     console.log(responseData);
    console.log(textStatus);
},
error: function (responseData, textStatus, errorThrown) {
    alert('POST failed.' + responseData);
    console.log(responseData);
    console.log(textStatus);
}
});` 
```

在 IOS Safari 中运行它时，我得到了错误...

“XML HttpRequest 无法加载……Orgin……访问控制允许 Orgin 不允许

...是替换长网址

我知道我的 chrome 我可以通过加载带有 -disable-web-security 或其他标志的 chrome 来绕过它。

我怎样才能在 iOS 中解决这个问题？安全不是问题，因为设备将被锁定并且只允许某些 IP 地址之间的通信。

是否有任何其他方法可以从 JavaScript 中的服务器 php 脚本中检索信息？那会被允许吗？

此外，任何指向与 PHP 进行 AJAX 通信的良好网站的链接都会有所帮助。

补充一下，客户端使用/看到的所有页面都是 HTML (.html)，服务器端是 (.php)

此外，当按照[这个](http://enable-cors.org/)链接对这个问题进行排序时，我将标题添加到我的 IIS 6 中，因为我的 html 是托管的，而 ipad 仍然不允许这样做。

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:52:39.897

您可以通过添加[`Access-Control-Allow-Origin`](https://developer.mozilla.org/en/http_access_control)标题来做到这一点。

在 PHP 中，它可以通过在 PHP 文件中添加新标头来实现：

```
header('Access-Control-Allow-Origin: *'); 
```

# windows-8 - Windows 中 Metro 风格应用程序中磁贴的自动对齐

> ID：11359896
> 
> 赞同：0
> 
> 时间：2012-07-06T09:51:01.840
> 
> 标签：windows-8, windows-runtime, winjs

我有一个地铁风格的应用程序，它在主页中有一些随机顺序的图块。如果我删除其中一个图块，所有其他图块应重新排列以填补因删除单个图块而产生的间隙。您可以在 Windows 8 桌面视图中观察到同样的现象。是否可以使用 WinJS 或 WinRT 来实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:31:04.310

如果我正确理解了您的需求，如果您使用绑定到 IObservableCollection 的 ListView 或 GridView，则在删除/添加项目时，这些项目将自动正确适配。

使用**IObservableCollection**（或**ObservableList**）允许您添加 ChildrenTransitions（选择**AddRemoveTransitions**以自动添加“正确”动画以添加/删除项目。

我没有在 JS/Html 中测试过这个，但是在 Xaml/C# 中它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T05:11:45.347

您可以通过`ListView`直接修改数据源来做到这一点。

例如，

```
// create a reference of your data source so that it can be accessed
// when you need to modify it
var yourBindingList; 

...

// code where you bind your data to your list view
yourBindingList = WinJS.Binding.List([{id: 1, name: 'one'}, 
    {id: 2, name: 'two'}, {id: 3, name: 'three'}]);
var listViewControl = document.getElementById('yourListViewDiv').winControl;
WinJS.UI.setOptions(listViewControl, {
    selectionMode: 'single',
    itemDataSource: yourBindingList.dataSource,
    itemTemplate: yourItemTemplate, 
});

...

// code where you remove the first item in your list view
yourBindingList.splice(0, 1); 
```

希望这可以帮助。

# mysql - Zend_Db 插入查询中的预处理语句

> ID：11359908
> 
> 赞同：0
> 
> 时间：2012-07-06T09:51:37.573
> 
> 标签：mysql, prepared-statement, zend-db

我目前使用 Zend_Db 来管理我的查询

```
$stmt = $db->prepare("INSERT INTO test (ID_Test) VALUES (:ID)");
$stmt->bindParam(':ID', 4, PDO::PARAM_INT);
$stmt->execute(); 
```

但这似乎确实会引发错误“致命错误：无法通过引用传递参数 2”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:56:24.043

bindParam 希望参数二是一个变量，因此它可以引用或“链接到”该变量而不是复制它，使其更适合较大的变量但在您的情况下很烦人，请尝试：

```
$stmt = $db->prepare("INSERT INTO test (ID_Test) VALUES (:ID)");
$id = 4;
$stmt->bindParam(':ID', $id, PDO::PARAM_INT);
$stmt->execute(); 
```

# c# - 散列时字节数组的编码选项

> ID：11359909
> 
> 赞同：0
> 
> 时间：2012-07-06T09:51:38.080
> 
> 标签：c#, encoding, hash

我正在尝试编写一个基本的散列函数接受一个输入字符串和一个盐字符串。然后需要将这两个字符串都转换为字节数组，组合起来然后生成哈希。

我在 Microsoft Membership 中寻找灵感，发现他们是这样做的：

```
byte[] bytes = Encoding.Unicode.GetBytes(input);
byte[] array = Convert.FromBase64String(salt); 
```

所以我想问的是：

1.  将输入字符串转换为字节数组时，unicode 是最佳编码吗？UTF-8 呢？
2.  Base64String 是用于盐值的最佳格式吗？如果我限制为 Base64 字符串，那么基本上我总是必须使用哈希作为盐，这是推荐的方式吗？

# request - 是否可以在下一个后续请求中使用 LoadRunner Web 请求响应中的值？

> ID：11359913
> 
> 赞同：0
> 
> 时间：2012-07-06T09:51:42.300
> 
> 标签：request, response, loadrunner

**性能工程工具**：LoadRunner 11

**协议**：Silverlight

**场景：** 1\. （由 Silverlight 应用程序）调用 Web 服务器以生成唯一标识符 (UID) 2\. 服务器返回带有 UID 的响应 3\. 应用程序使用该 UID 保存患者记录（在在这种情况下，UID 是唯一的患者 ID）

**问题：** 我们想使用在第 2 步的 Web 响应中收到的 ID（例如，作为局部变量）并在 LoadRunner 发送的下一个后续请求中替换它。

**请告知是否可能。**

*同时试图弄清楚“web_reg_save_param”是否能解决我们的问题。*

------------ LoadRunner 数据 --------

**1.调用生成uid**

> 忽略，因为它太大而无法粘贴在这里并且无关紧要

**2\. 来自服务器的响应（UID 为 UNI-0000001544）**

> HTTP/1.1 200 OKCache-Control: privateContent-Type: application/msbin1Content-Encoding: gzipVary: Accept-EncodingServer: Microsoft-IIS/7.5X-AspNet-Version: 4.0.30319X-Powered-By: ASP.NETDate: Fri, 06 2012 年 7 月 05:41:27 GMTContent-Length: 188@GenerateSequenceResponsehttp://tempuri.org/@GenerateSequenceResult™<strong>UNI-0000001544

**3\. 下一个 LoadRunner 请求，其中 UID (UNI-0000001543) 必须替换为响应中收到的 UID**

> web_custom_request("SubmitChanges", "URL=http://infinityappload/ClientBin/Infinity-Web-Services-ActorDomainService.svc/binary/SubmitChanges",
> 
> . . . , "BodyBinary=@\rSubmitChanges\
> 
> . . . `\tPatientID\\x99\\x0EUNI-0000001543`\
> 
> ... 最后的）;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:35:12.387

正如詹姆斯所说，这就是相关性的概念。简化的方法如下：

```
web_reg_save_param("UID2", "LB=GenerateSequenceResult™", "Savelen=14", LAST); 
//The TM symbol will have to be replaced by whatever HTML code is used. 

web_custom_request("WebRequest1", ....);

web_custom_request("SubmitChanges", "URL=http://infinityappload/...",
         ...
         "BodyBinary=@\rSubmitChanges\",
         "\tPatientID\\x99\\x0E{UID2}\",
         LAST); 
```

要关联的值将在填充它们的请求之前确定。然后可以在任何后续请求中使用它们。只需确保在使用相关参数时，它位于带引号的字符串内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:28:36.943

你说的概念是相关变量的管理，是使用性能测试工具的核心概念，包括LoadRunner。这一特定概念是近 1/3 的标准 LoadRunner 脚本开发产品培训的主题。我会向您推荐系统文档中有关 web 和 silverlight 协议的相关性的信息。此外，将自己与强大的导师配对并参加某种形式的标准产品培训对于您的短期和长期成功至关重要。

# python - 如何在python中响应线程中的异常

> ID：11359915
> 
> 赞同：2
> 
> 时间：2012-07-06T09:51:54.140
> 
> 标签：python, multithreading, exception-handling

我有一些代码在一个线程中运行，我需要响应调用线程中的任何异常。我如何找出是否有任何异常并重新启动子线程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:06:18.427

您必须`try/except/finaly`在父线程的 -block 中终止/加入子进程，然后重新调用它。

[链接](https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread-in-python)到较旧的 SO-post，其中讨论了线程的“杀死”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T10:37:21.130

你可以像这样得到例外：

```
def run(self):
        while True:                
            try: #yourThread
            except Exception, e: print e 
```

[并且要重新启动孩子，请在此处](https://stackoverflow.com/a/2830127/430408)查看此答案。

# javascript - 取消 JS 和 CSS 中的所有动画

> ID：11359917
> 
> 赞同：1
> 
> 时间：2012-07-06T09:51:58.140
> 
> 标签：javascript, jquery, html, css, canvas

我想要一段 Javascript 代码或一些关于如何编写可以停止给定页面中所有 CSS 和 JS（画布、webgl 等）动画的指南。

有时某些动画会使用户的计算机在 Opera 和 Firefox 上运行缓慢，因此我需要一个片段来帮助用户“取消”我的网络应用程序中所有基于 css/js 的动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:59:18.397

您可以对此进行测试以停止 javascript：

```
 //event is the Event object
 if (event.stopPropagation) {
  event.stopPropagation ();
 }
 event.cancelBubble = true; 
```

对于CSS，我不知道！

# android - Android 无法在未调用 looper.prepare() 的线程内创建处理程序

> ID：11359930
> 
> 赞同：5
> 
> 时间：2012-07-06T09:53:05.623
> 
> 标签：android, timer, handler, timertask

我开始开发一个录制视频的 Android 应用程序，我需要每 1 分钟收集一次 GPS 位置

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Create an instance of Camera
    mCamera = getCameraInstance();

    // Create our Preview view and set it as the content of our activity.
    mPreview = new CameraPreview(this, mCamera);
    FrameLayout preview = (FrameLayout) findViewById(id.camera_preview);
    preview.addView(mPreview);

    private boolean isRecording = false;

    // Add a listener to the Capture button
    Button captureButton = (Button) findViewById(id.button_capture);
    captureButton.setOnClickListener(
      new View.OnClickListener() {
      @Override
      public void onClick(View v) {
        if (isRecording) {
            // stop recording and release camera
            mMediaRecorder.stop();  // stop the recording
            releaseMediaRecorder(); // release the MediaRecorder object
            mCamera.lock();         // take camera access back from MediaRecorder

            // inform the user that recording has stopped
            setCaptureButtonText("Capture");
            isRecording = false;
        } else {
            // initialize video camera
            if (prepareVideoRecorder()) {
                // Camera is available and unlocked, MediaRecorder is prepared,
                // now you can start recording
                mMediaRecorder.start();

                // get the gps data
                GpsDataFile.getOutPutDataFile(DATA_TYPE_GPS);
                mTimer = new Timer;
                mTimer.schedule(new setGpsDataToFile(),0,1000)
                // inform the user that recording has started
                setCaptureButtonText("Stop");
                isRecording = true;
            } else {
                // prepare didn't work, release the camera
                releaseMediaRecorder();
                // inform user
            }
        }
    }
 }

Private Class setGpsDataToFile extends TimerTask {
  @Override
  public void run {
   // getLocation contains another timer task
   myLocation.getLocation(getApplicationContext(), mLocationResult); // I got the error here
   // write the gps data in a file
   gpsDataCapture(GpsDataFile, mLatitude, mLongitude);
  }
} 
```

我得到了错误`FATAL EXCEPTION: Timer-1: can't create handler inside thread that has not called looper.prepare()`，我认为问题是我在另一个内部创建了一个处理程序。那么有没有其他方法可以获得相同的结果？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-06T10:03:11.993

您的错误基本上是说您正在尝试在非 UIThread 中执行某些操作。要在 UI 线程中运行它，只需使用以下命令：

```
runOnUiThread(new Runnable() {
    public void run() {
        // do your work right here
    }
}); 
```

# html - div中的动态图像尺寸

> ID：11359933
> 
> 赞同：0
> 
> 时间：2012-07-06T09:53:25.833
> 
> 标签：html, image, css

当图像丢失时，需要以百分比显示 div 宽度。由于图像是动态加载的，我无法修复图像大小。所有图像尺寸均以百分比表示。那么我们如何在没有加载图像的情况下获得适当的 div 宽度。

这是演示。 [http://jsfiddle.net/7LfMV/2/](http://jsfiddle.net/7LfMV/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:00:53.463

尝试更改`table-cell`为`inline-block`- [http://jsfiddle.net/7LfMV/4/](http://jsfiddle.net/7LfMV/4/)

```
.wraptocenter {
    display: inline-block;
    text-align: center;
    vertical-align: middle;
    width: 60% /*Div should take this width*/; 
    background-color:#999
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:02:00.043

[http://jsfiddle.net/7LfMV/5/](http://jsfiddle.net/7LfMV/5/)

删除`display: table-cell;`并添加`height`到 div

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:04:32.967

没有图像时，使用`min-height`,`min-width`设置`height`, 。`width`

由于您使用的是 display:table-cell 我猜您是在 div 内将图像居中，这将做到这一点。

```
.wraptocenter {
    display: table-cell;
    text-align: center;
    vertical-align: middle;
    border: 1px solid red;
    min-height:300px;
    min.width:300px;
} 
```

在这里[提琴 http://jsfiddle.net/7LfMV/6/](http://jsfiddle.net/7LfMV/6/)

# mysql - 如何从两个表中获取所有数据？

> ID：11359934
> 
> 赞同：-4
> 
> 时间：2012-07-06T09:53:30.417
> 
> 标签：mysql

我有两张桌子

1.产品

```
prod_id   prod_name
   1       honda
   2       hero
   3       marcedes
   4       audi 
```

2.产品分类

```
cat_id  prod_id
  1         1
  1         2
  2         3
  2         4 
```

现在我想要如下结果

```
prod_id    prod_name    cat_id
   1         honda        1
   2         hero         1
   3         marcedes     2
   4         audi         2 
```

我似乎无法弄清楚这一点。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T09:55:11.050

```
select products.*, category.cat_id 
from products, category 
where products.prod_id = category.prod_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T09:55:18.290

```
select products.prod_id ,products.prod_name, category.cat_id 
from products, category 
where category.prod_id  = products.prod_id 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T10:04:39.510

```
select p.prod_id,p.prod_name,c.cat_id 
from Products p inner join category c 
on p.prod_id = c.prod_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T09:55:32.743

只需使用连接，如果您只希望产品具有 cat_id，则更`LEFT JOIN`改为`INNER JOIN`.

```
SELECT t1.prod_id, t1.prod_name, t2.cat_id
FORM Products t1
LEFT JOIN ProductToCategory t2 ON t1.prod_id = t2.prod_id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T03:02:09.587

select p.prod_id, p.prod_name,c.catid
from products p
inner join prodtocat pc on p.prod_id = pc.prod_id

# html - 图像 src firefox 未显示，绝对路径

> ID：11359936
> 
> 赞同：0
> 
> 时间：2012-07-06T09:53:44.820
> 
> 标签：html, path, image, absolute

ASP.NET 应用程序

我对显示图像有些困惑。加载 img 时 IE 完全正常工作。Firefox 不在生产服务器上显示图像。

生成的 img url 在服务器上：

```
\chartings\charts\temp/generatedchart_img.jpg 
```

我注意到当我在 localhost publish 上运行时会翻转 src url：

```
/chartings/charts/temp\generatedchart_img.jpg 
```

非常感谢任何建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:01:33.940

我认为网址应该只有正斜杠：

```
/chartings/charts/temp/generatedchart_img.jpg 
```

# javascript - "'value' == typeof X" VS "typeof X == 'value'" 的任何区别

> ID：11359938
> 
> 赞同：2
> 
> 时间：2012-07-06T09:53:55.407
> 
> 标签：javascript

检查 typeof 运算符结果的两个版本之间是否有任何区别（编译器/解释器/juju wise 等）？

我之所以问是因为我经常看到第一个版本，就好像它遵循了一个概念，而第二个版本更具可读性并且更好地描述了我的意图：主要是我对变量的类型感兴趣，而不是字符串是否相等有东西。

更新：虽然它不是原始问题的一部分，但值得注意的是，当您要检查相等性时，x == y 绝不是一个好习惯。为此，应始终使用 === 运算符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T09:56:36.200

# 更新

在功能方面没有区别，但似乎在 JavaScript 中，无论哪种方式都会出现错误（这很好，感谢 JS）：

```
Invalid left-hand side in assignment 
```

所以这似乎只是其他编程语言的开发人员的一种习惯。例如在 PHP 中，如果你这样做了：

```
if ($var = 'foo') 
```

PHP 将默默地赋值`foo`给`$var`但有以下内容：

```
if ('foo' = $var) 
```

它会抛出一个错误。

* * *

> 我问是因为我经常看到第一个版本

他们做什么没有区别。但是，如果你碰巧写了第一个版本会抛出一个错误：

```
'value' = typeof X 
```

注意`=`代替`==`或`===`

这通常是一种很好的做法，*其他语言*的人也习惯在 JavaScript 中这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:57:18.490

没有区别，因为等价操作将返回相同的东西，无论它是哪种方式。

# ruby-on-rails-3 - Rails + foreman + worker 挂起服务器

> ID：11359940
> 
> 赞同：7
> 
> 时间：2012-07-06T09:53:58.320
> 
> 标签：ruby-on-rails-3, delayed-job, foreman

在我的本地机器上，我正在尝试使用 Foreman 启动我的 rails 应用程序和延迟工作人员。我的 Procfile 看起来像这样：

```
web: bundle exec rails server -p $PORT
worker: bundle exec rake jobs:work 
```

当我启动工头时，只有前两个 Web 请求被执行。随着第三个请求服务器挂起。第一个请求在控制台中输出，第二个不是。

如果我在我的 Procfile 中省略了工作人员，则服务器运行良好并将所有内容输出到控制台。此外，当我在没有工头的情况下启动 rails 服务器和 worker 时，一切正常。

所以看起来Foreman有问题。我猜这是 Foreman 在第一次请求后没有向控制台输出任何内容的问题，因此缓冲区没有被刷新。我搜索了其他帖子，结果将 STDOUT.sync = true 添加到我的 development.rb 但没有任何成功。

有人有线索吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T00:54:05.220

更新：在这里跟踪和解决：

[https://github.com/ddollar/foreman/issues/244](https://github.com/ddollar/foreman/issues/244)

TL;DR：安装 gem，不要使用 foreman.pkg

* * *

我面临同样的问题。

这是我在stackoverflow上提出的[问题的链接。](https://stackoverflow.com/questions/11856189/rails-server-hangs-when-started-with-foreman)@smek，如果您找到答案，请回复！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T20:12:32.563

在我的本地开发环境中尝试实现和测试 DJ + Foreman 时，我遇到了类似的问题。我打算部署到 Heroku，并使用[以下](https://devcenter.heroku.com/articles/delayed-job)文章作为指南。如果您还部署到 Heroku，我建议安装[Heroku Toolbelt](https://toolbelt.heroku.com/)，其中包括 Foreman。就我而言，我已经安装了 Heroku Toolbelt，所以我只是重新安装了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:52:41.983

大多数情况下，有人在代码中留下了调试器/撬动语句，或者您在某处放置了断点。

如果你找不到任何东西，你可以使用 lsof 或 gdb 等系统工具来找出你的 ruby​​ 进程目前正在做什么。这可能有助于发现问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T19:41:12.547

我大约一个小时前才开始使用 Foreman，我的 rake 任务和`rails server`被 Foreman 运行时挂起都遇到了一些问题。当我`pry`从我的 Gemfile 中删除 gem 时，它起作用了，但这是不可接受的，因为我在开发中使用了 pry。

然后我更新到工头版本 0.49.0（大约 10 分钟前发布），问题得到解决。太糟糕了，我一个小时后没有开始做这个任务，因为那样我就可以从 0.49.0 开始，而不必乱搞一个小时 :)

您应该尝试升级 Foreman 并查看它是否可以解决您的问题。

# css - 将 div 中的图像垂直和水平居中

> ID：11359942
> 
> 赞同：2
> 
> 时间：2012-07-06T09:54:05.590
> 
> 标签：css, html, image

我发现我的 tuts 关于水平和垂直居中图像。但它不起作用。我的代码是

```
#parent {
    position : relative;
    float : left;
    width : 700px;
    height : 400px;
    overflow : hidden;
    background-color: black;
}

#parent img {
    max-height :400px;
    max-width : 700px;
} 
```

图像的高度和宽度是动态的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T10:05:24.440

Write like this:

```
#parent {
    position : relative;
    float : left;
    width : 700px;
    height : 400px;
    overflow : hidden;
    background-color: black;
    text-align:center;
    line-height:400px;
}

#parent img {
    vertical-align:middle;
} 
```

Check this [http://tinkerbin.com/XYKUzvXu](http://tinkerbin.com/XYKUzvXu)

**UPDATED**

Check this [http://tinkerbin.com/GL4GaNfo](http://tinkerbin.com/GL4GaNfo)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T09:56:35.883

你应该有

```
text-align: center 
```

在#parent 样式上水平对齐图像，如果我没记错的话，您也可以在父样式上设置它：

```
line-height: 400px; 
```

这将垂直对齐图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T09:57:24.363

```
#parent {
    position : relative;
    display:table-cell;
    vertical-align:middle;
    text-align:center;
    width : 700px;
    height : 400px;
    overflow : hidden;
    background-color: black;
}

#parent img {
    max-height :400px;
    max-width : 700px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T09:56:10.693

`nax-width : 700px;`应该有语法错误`max-width : 700px;`。任何使用此 CSS 的方式，它都会起作用，而你的则不会。

```
#parent
{
   position : relative;
    float : left;
    display: table-cell;
    width : 700px;
    height : 400px;
    overflow : hidden;
    background-color: black;
    text-align: center;
    vertical-align: middle;
}
#parent img
{
    max-height :400px;
    max-width : 700px;
}​ 
```

前在这里[http://jsfiddle.net/ANwmv/](http://jsfiddle.net/ANwmv/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T09:57:50.857

使用`display:table-cell`和`vertical-align:middle`和`text-align:center`

**HTML**

```
<div id="parent">
  <img src="http://s3.buysellads.com/1241308/100953-1333587587.jpg
"></div> 
```

**CSS**

```
#parent {
    position : relative;
    display:table-cell;
  vertical-align:middle;
    width : 700px;
    height : 400px;
    overflow : hidden;
    background-color: black;
  text-align:center;
}

#parent img {
    max-height :400px;
    max-width : 700px;
} 
```

现场演示

[http://tinkerbin.com/RDZuJFS7](http://tinkerbin.com/RDZuJFS7)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T10:02:31.837

您好，您可以通过 以下代码获得您想要的结果：`display:table-cell;` `vertical-align:middle;`-`text-align:center;`

**HTML**

```
 <div id="parent">
      <img src="http://dummy-images.com/abstract/dummy-107x160-RedDots.jpg" />
    </div> 
```

**CSS**

```
#parent {
    display:table-cell;
    width : 700px;
    height : 400px;
    background-color: black;
    vertical-align:middle;
    text-align:center;
}

#parent img {
    width : 107px;
    height : 160px;
} 
```

see the demo :- [http://tinkerbin.com/ajsaa856](http://tinkerbin.com/ajsaa856)

# java - NetBeans“任务”窗口显示不正确和旧错误 - Java

> ID：11359943
> 
> 赞同：1
> 
> 时间：2012-07-06T09:54:07.223
> 
> 标签：java, netbeans, netbeans-7

任务窗口显示一堆编译错误，指向我已修复的旧错误。尝试重新编译文件，重建错误但没有效果......（错误）的数量没有改变。

当我双击一个错误时，它会将我带到错误的行，因为代码已被更改。

将 Netbeans 7.1.1 与 JDK 1.6 一起使用

**编辑 1：**我尝试关闭项目，然后重新启动 Netbeans 再次添加但无济于事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:55:35.580

必须卸载 Netbeans 然后重新安装，删除用户设置也很重要导出 Netbeans 配置，然后重新应用它们.. 一切恢复正常。

这是一个 Netbeans 错误，我已将其发布在他们的 Bugzilla 中

# stylesheet - 资产/样式表与公共/样式表

> ID：11359944
> 
> 赞同：2
> 
> 时间：2012-07-06T09:54:10.567
> 
> 标签：stylesheet, assets, public, blueprint

在 M. Hartl 的 Rails 3 教程中的“级联样式表”部分下，他提到将 CSS 蓝图目录复制到“public/stylesheets”文件夹中。我的样式表文件夹位于 assets 目录中。将蓝图目录复制到“资产/样式表”而不是“公共/样式表”是否合理？如果没有，您的建议是什么？如果是这样，您可能会建议我注意哪些特别的陷阱？

他明确建议使用 Rails 3.0.1，虽然我运行的是 3.2.6。我应该按照他的指示去做，但我几乎不可能在我的 Windows 机器上启动并运行环境（MySQL 冲突等），而且碰巧这个版本最终对我有用，所以我和它一起去了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:45:00.357

不要以为我知道我在说什么，因为我是 RoR 的新手，但在遇到问题后，我只是花了最后几个小时阅读资产管道。我将分享一些我学到的东西，这些东西可能有助于你概念化：

public/ 中的任何内容都保持原样，并由 Web 服务器直接作为静态文件服务器。但是，关于公共/资产，有两点值得考虑：

1）他们没有得到预编译的好处，其中包括：

1a) 指纹识别 - 将基于文件内容的 md5 散列附加到文件名，以便文件名在文件更改时更改，从而强制重新加载缓存。如果文件可能会在某天更改（在您的情况下是新版本的蓝图），这将很有用。

1b) 连接 - 预编译器可以/将把多个 CSS 或 JS 文件合并为一个，这使得下载速度更快。（究竟什么文件被编译，多少是可配置的。）

1c) 缩小 - 预编译器删除空格（和其他巧妙的优化）以缩小 CSS/JS 文件的大小。

2) 我仍在尝试解决这部分问题，但是 /app/assets 中是否有某些内容并通过预编译会影响辅助方法是否以及如何工作（您在视图中使用的资产标签、图像标签和 javascript_include 标记等东西） ）。

尽管我完全没有资格，但我正在认真考虑在某个地方的 wiki 上创建自己的 Rails Assets 最佳实践页面来开始整理我的想法。我认为它非常缺乏 - 我不得不从很多地方挖掘一些知识，而且人们建议我发现一些令人反感的东西（比如修改配置文件以预编译添加未显示的资产）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:41:14.490

我已将样式表文件复制到 app/assets 文件夹，它工作正常

# sql-server - SSRS 无法在远程服务器上运行，但在本地运行良好

> ID：11359945
> 
> 赞同：0
> 
> 时间：2012-07-06T09:54:12.480
> 
> 标签：sql-server, ssrs-2008, reporting-services

从昨天开始我就遇到了这个问题，并且尝试了不同的方法，但很难知道如何解决这个问题，我已经共享数据源并且相同的报告在我的本地计算机上工作正常但是当我在服务器上上传报告并尝试运行服务器它给了我这个错误：

报告处理过程中发生错误。(rsProcessingAborted) 数据集“DataSet2”的查询执行失败。(rsErrorExecutingCommand) 有关此错误的详细信息，请导航到本地服务器计算机上的报告服务器，或启用远程错误

我使用这个系统已经有一段时间了，以前从未遇到过这个问题，我认为没有任何改变。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:59:12.033

您是否尝试过按照错误消息中的说明进行操作？

```
For more information about this error navigate to the report server on the local server machine, or enable remote errors 
```

这可能是连接/查询中的错误

# opengl - 使用 alpha 测试渲染纹理并将其与颜色和背后的场景混合

> ID：11359947
> 
> 赞同：1
> 
> 时间：2012-07-06T09:54:35.653
> 
> 标签：opengl, textures, alpha, alphablending, blending

我想渲染这张图片（白色的 alpha = 0）

![在此处输入图像描述](../Images/e047238bb471cf1b0536eb2c8fe5e743.png)

在将其与颜色混合的正方形（实际上是四边形，但我猜这并不重要）上，应在整个表面上执行混合，这也是纹理的 alpha 等于零的地方。

然后结果应该在打开场景时混合

我怎样才能做到这一点？

我显然不想要所有代码，只是关键部分，比如混合功能（我想）

# java - 在java中将当前时间表示为double/long

> ID：11359949
> 
> 赞同：-3
> 
> 时间：2012-07-06T09:54:41.503
> 
> 标签：java

如何将当前时间和过去 24 小时时间转换为 java 中的 long 或 double？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:58:23.693

在 Java 中， System.currentTimeMillis() 表示为`long`已经。

要转换为`double`当天的分数，您可以找到当天的开始时间，从当前时间中减去它，然后除以一天中的毫秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:02:38.357

你可以这样做-

```
Calendar calendar = Calendar.getInstance();
System.out.println(calendar.getTime());
System.out.println(calendar.getTimeInMillis());//your current time in long (milliseconds)
calendar.set(Calendar.HOUR_OF_DAY, -24);
System.out.println(calendar.getTime());
System.out.println(calendar.getTimeInMillis());//time, 24 hours earleir in long (milliseconds) 
```

# windows-phone - 在 Windows Phone 7 中将图像绑定到具有相同大小的 ListBox 中的 PhotoChooserTask 的图像标记

> ID：11359951
> 
> 赞同：0
> 
> 时间：2012-07-06T09:54:48.570
> 
> 标签：windows-phone

我正在使用 Windows Phone 7。

我必须将从 PhotoChooserTask 中选择的图像绑定到一个 ListBox 中，例如 Windows Phone 7 中的 Tiles。

我有一个这样的设计文件：

```
<ListBox x:Name="lstImages" Height="530" Margin="0,10,0,0"
                     ScrollViewer.VerticalScrollBarVisibility="Hidden">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Button Style="{StaticResource PickerBoxButton}" 
                                x:Name="btnDashboardItems"
                                Tag="{Binding Name}" 
                                Padding="0" Margin="-18,0,-12,-45" Height="200"
                                Width="200">                                    
                                    <Button.Template>
                                        <ControlTemplate>
                                            <StackPanel Height="173" Width="173">
                                                <Image Height="173" Width="173"
                                                       Source="{Binding Image}" /> 
                                            </StackPanel>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <toolkit:WrapPanel Width="450" Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                    </ListBox> 
```

我有一个名为 ImageList 的类，如下所示：

```
public class ImageList
    {
        public string Name { get; set; }
        public BitmapImage Image { get; set; }
    } 
```

我像这样绑定到列表框：

```
PhotoChooserTask task = new PhotoChooserTask();
task.Completed += new EventHandler<PhotoResult>(task_Completed);
task.Show(); 
```

**在这里我可以选择任何图像数量所以我已经使用了列表框。**

```
Random _Random = new Random();
 private void task_Completed(object sender, PhotoResult e)
        {
            if (e.TaskResult == TaskResult.OK)
             {
                System.IO.Stream stream = e.ChosenPhoto;
                BitmapImage bmp = new BitmapImage();
                bmp.CreateOptions = BitmapCreateOptions.None;
                bmp.SetSource(stream);
                img.Image = bmp;
                img.Name = _Random.Next(int.MaxValue).ToString() + ".jpg";
                StateUtilities.ImageList.Add(img);  
                if (StateUtilities.ImageList != null)
               {
                   if (StateUtilities.ImageList.Count > 0)
                   {
                      lstImages.ItemsSource = StateUtilities.ImageList;
                   }
               }    
             }
        } 
```

**在这里，我可以绑定图像，但图像的尺寸不同，但我给按钮和图像标签提供了固定尺寸（高度和宽度），但我仍然得到不同尺寸（不同高度和宽度）的图像。如何使图像以相同大小绑定？**

谢谢，

阿维纳什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:31:37.440

我认为 StackPanel 会根据内容进行拉伸。

您是否也尝试过设置 MaxWidth 和 MaxHeight？

# osx-snow-leopard - 2012 年安装齿轮

> ID：11359953
> 
> 赞同：0
> 
> 时间：2012-07-06T09:55:02.983
> 
> 标签：osx-snow-leopard, gears

对于我公司的一位客户，我必须让 Gears 正常工作。简单解释一下，他们有一个使用 Gears 本地数据库的站点，现在想要真正使用 localStorage（至少对于支持它的浏览器，并且仍然使用 Gears 来处理旧版本）。

重构代码并确保 HTML5 版本像以前的 Gears 版本一样工作（并且我不破坏现有系统也是一个优点）。问题来了：不再支持 Gears 并且似乎无法安装。

我的开发机器使用的是 OSX Snow leopard。我尝试了 MailPlane (http://mailplaneapp.com/download/google_gears/) 的作者制作的 Gears 自定义安装程序来在 Safari 上启用齿轮。安装程序运行没有任何问题，我在 Safari 的菜单中有一个“Google Gears 设置”条目。但是代码不起作用，这是数据库创建代码的控制台输出：

```
> google.gears.factory.create('beta.desktop')
Error
line: 2
message: "'undefined' is not a function (evaluating 'google.gears.factory.create('beta.desktop')')"
sourceId: 419639712
__proto__: Error 
```

（这是我从客户那里得到的代码）。

在控制台中，当我尝试访问 Gears 工厂时，我只得到一个简单的 html 对象：

```
> google.gears.factory
<object style=​"display:​ none;​ " width=​"0" height=​"0" type=​"application/​x-googlegears"></object>​ 
```

在 Gears 偏好设置中，有一个站点可供我允许 Gears 运行，但我无法在其中添加 localhost（实际上我无法添加任何内容）。

由于我无法让 Safari/Gears 工作，我决定设置一个 WinXP 虚拟机，也许它可以在这里工作。我能够下载 Gears 安装程序。但是这个需要已经从谷歌服务器中删除的文件（至少我猜，但我没有安装任何防火墙，所以我看不到在获取文件时可能会阻止安装程序......）。

我还尝试了旧的 Chrome 安装程序（显然 Gears 是在 Chrome 12 中发布的），但没有一个安装程序可以工作（它们只是，好吧，什么都不做。我什至尝试从命令行启动它们以期待一些输出，但我得到了没有什么）。

另一种选择是获取 Firefox 齿轮插件，但它们似乎都消失了：/

所以，问题（最后）：这里还有人需要使用 Gears 吗？如何让它在新机器上运行？

干杯，文森特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:58:25.417

我认为 Google Gears API 不再可用。

请参阅[https://developers.google.com/gears/](https://developers.google.com/gears/)页面。

谢谢， 吉格

# asp.net-mvc - 无法在主机上加载程序集 WebPages.Deployment 版本 2？

> ID：11359957
> 
> 赞同：14
> 
> 时间：2012-07-06T09:55:12.520
> 
> 标签：asp.net-mvc, visual-studio, iis, hosting, .net-assembly

我有一个 ASP.NET MVC 2 网站（VS2010），我已升级到 ASP.NET MVC 3（VS2012），这在本地 IIS7 上运行良好，但是在发布它时，我在主机上得到了这个异常：

```
 Could not load file or assembly 'System.Web.WebPages, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified. 
```

经过一番搜索后，我发现[这](http://haacked.com/archive/2008/11/03/bin-deploy-aspnetmvc.aspx)表明我应该在某些引用（包括 System.Web.WebPages）上设置 CopyLocal 并且还使用 VS2012 中的发布工具，但这会产生以下异常？

```
Could not load file or assembly 'System.Web.WebPages.Deployment, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified. 
```

而且我找不到任何部署 dll 来设置 copyLocal？

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-06T10:14:51.470

阅读[http://joel.net/getting-asp.net-mvc-3-working-on-discountasp.net](http://joel.net/getting-asp.net-mvc-3-working-on-discountasp.net)

您需要添加对 System.Web.WebPages.Deployment 的引用并将其也设置为 CopyLocal。

# android - 如何将图像从一个活动传输到android中listview的另一个活动？

> ID：11359964
> 
> 赞同：1
> 
> 时间：2012-07-06T09:55:34.227
> 
> 标签：android, imageview

我有一个包含 groupview 和 childview 的可扩展列表视图。我从下一个活动中添加的行中获取子视图的值。但现在的问题是我想从行中传输图像（我从相同的获取文本视图值，但想要获取图像视图）在下一个活动中添加到上一个活动。谁能帮帮我吗？

# objective-c - AVPlayer 不播放视频

> ID：11359966
> 
> 赞同：1
> 
> 时间：2012-07-06T09:55:36.827
> 
> 标签：objective-c, ios

```
- (void)viewDidLoad{

    [super viewDidLoad];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"VidName" ofType:@"mov"];
    NSURL *url = [NSURL URLWithString:path];

    AVPlayer *av = [[AVPlayer alloc] initWithURL:url];
    AVPlayerLayer *layer = [AVPlayerLayer playerLayerWithPlayer:av];
    [layer setFrame:self.view.frame];
    [self.view.layer addSublayer:layer];
    [av play];

    NSLog(@"error: %@", av.error);
} 
```

记录的错误为 NULL。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T10:01:17.227

代替

`NSURL *url = [NSURL URLWithString:path];`

使用以下行。

```
NSURL *url=[[NSURL alloc]initFileURLWithPath:path]; 
```

# android - 系统关闭时如何关闭服务？

> ID：11359970
> 
> 赞同：2
> 
> 时间：2012-07-06T09:55:43.260
> 
> 标签：android, service, shutdown

我的服务中有一些方法`onDestroy`。必须调用它们来设置一些应用程序设置。也许有可能接收某种广播来设置设置值？据我了解，此服务在系统重新启动后将不会激活。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:23:07.410

> 我的服务中有一些 onDestroy 方法

`onDestroy()`不保证在服务上被调用。例如，如果用户从设置中强制阻止您，或者您因异常而崩溃，或者 Android 急需 RAM 并终止您的进程，`onDestroy()`则不会调用。

> 必须调用它们来设置一些应用程序设置。

那么您应该在 之外的某个时间给他们打电话`onDestroy()`。

> 也许有可能接收某种广播甚至设置设置值？

您可以尝试让您的服务监听`ACTION_SHUTDOWN`广播，但这不会解决您的问题，因为还有其他场景`onDestroy()`不会被调用，如上所述。

> 据我了解，系统重新启动时此服务将不可用

正确的。

# php - 将 phpdoc 转换为 Dash 可用的 docset

> ID：11359973
> 
> 赞同：5
> 
> 时间：2012-07-06T09:56:05.120
> 
> 标签：php, documentation, documentation-generation, docset

我正在尝试以可以在[Dash](http://kapeli.com/dash/)中使用的格式获取[Magento 文档](http://docs.magentocommerce.com/)。Dash 网站上的一篇[文章](http://kapeli.com/docsets/)描述了如何将多种类型的文档导入所需的格式，不幸的是 phpdoc 不是其中之一。

有人对我如何实现这一目标有任何建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T23:47:20.177

我是 Dash 背后的开发者。目前没有用于 docset 生成脚本的 phpdoc，所以恐怕你只能自己创建一个。

但是，我确实建议采用简单的方法，即使用 doxygen 基于 PHP 源代码生成 docset（请参阅您链接的[文章中](http://kapeli.com/docsets/)的“使用 Doxygen 创建 Docsets” ）。如果您需要帮助，请随时[与我联系](http://kapeli.com/contact)。

# sql - SQL 查询无法获得所需的输出

> ID：11359974
> 
> 赞同：1
> 
> 时间：2012-07-06T09:56:05.543
> 
> 标签：sql, oracle, select

当我使用这个查询时，

```
select 
   receipt_num, trx_num, 
   (case when receipt_amount > 5000 then '1' else 'null') as stamp_value,receipt_amount 
from ra_customer_all where receipt_amount > 5000; 
```

它给出这样的输出：

```
receipt_num             trx_num           stamp_value     receipt_amount
   23679                sf35fd                 1              5400
   23679                sdf2424                1              5400 
   23679                rer434                 1              5400
  987444                dgd343                 1              98432
    7610                sdf23                  1              6756
    7610                dfg242                 1              6756 
```

但我希望输出看起来像这样：

```
receipt_num        trx_num        stamp_value      receipt_amount
  23679            sf35fd             1                 5400
  23679            sdf2424            null              5400
  23679            rer434             null              5400
 987444            dgd343             1                 98432
   7610            sdf23              1                 6756
   7610            dfg242             null              6756 
```

对于每个收据编号 > 5000，邮票值应仅打印一次。

(*一张收据可能包含一个或多个 trx_num*)

请帮我解决一下这个。

```
select 
acra.attribute6 office_code,
acra.attribute5 collection_number,
acra.receipt_number instrument_number,
 acra.receipt_date collection_date,
 acra.amount collected_amount,
ac.customer_name,
rcta.trx_number ,
(case  row_number() over (partition by acra.receipt_number order by rcta.trx_number)  when acra.amount > 5000 then '1'  else 'NULL' end) stamp_value,
from
ar_cash_receipts_all acra,
ar_customers ac,
ra_customer_trx_all rcta,
ar_receivable_applications_all araa
where
acra.pay_from_customer=ac.customer_id and
acra.cash_receipt_id = araa.cash_receipt_id and
araa.applied_customer_trx_id=rcta.customer_trx_id
and acra.amount > 5000 
```

好的，我更新了我的加入查询，我在其中添加了分区，但作为缺少的关键字给出了错误。有人可以编辑它以获得所需的输出

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:26:25.240

所以你想让 stamp_value 为组中的第一行为 1 并且为所有后续行为 NULL ？使用分区方式：

```
select 
   receipt_num, trx_num, 
   (case row_number() over (partition by receipt_num order by trx_num) 
     when 1 then 1
     else NULL
     end) stamp_value,
   receipt_amount
from ra_customer_all
where receipt_amount > 5000 
```

这会将第一行的 stamp_value 设置为 1（使用 trx_num 进行排序），并将所有后续行设置为 NULL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:28:22.340

试试这个

```
 select receipt_num,trx_num, result= 
case when receipt_amount >500 then 1 else null  end,receipt_amount from ra_customer_all 
```

演示 [http://sqlfiddle.com/#!3/f29a6/1](http://sqlfiddle.com/#!3/f29a6/1)

[http://sqlfiddle.com/#!3/f29a6/2](http://sqlfiddle.com/#!3/f29a6/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:09:26.520

您可以先在您的选择语句中包含receipt_amount 以进行检查吗？可能是您对receipt_amount 的期望不正确，并且脚本行为正确。

此外，您的 null 不应在 case 语句中使用单引号，您将在结果集中获得一个字符串而不是 null 值，正如您所期望的那样。

# iphone - NSStreamEventErrorOccurred 即使网络信号相当强也会触发

> ID：11359977
> 
> 赞同：1
> 
> 时间：2012-07-06T09:56:07.173
> 
> 标签：iphone, objective-c, connection, wifi, nsstream

我已经实现了`NSStream`委托。我已经实现了与[Witap 应用程序相同的功能](http://developer.apple.com/library/ios/#samplecode/WiTap/Listings/AppController_m.html#//apple_ref/doc/uid/DTS40007321-AppController_m-DontLinkElementID_4)

在那，我已经实现了`handleEvent`委托

```
- (void) stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode{

  switch(eventCode) {

           case NSStreamEventOpenCompleted:
              {
                 [tcpServer release];
                 tcpServer = nil;               
                 break;
              }
          case NSStreamEventHasBytesAvailable:    
              {
                  //done my stuff here
              }
         case NSStreamEventErrorOccurred:    
              {

    UIAlertView *wifiLostAlert = [[UIAlertView alloc] initWithTitle:@"Wifi
 connection error" message:@"" delegate:nil cancelButtonTitle:@"Continue" otherButtonTitles:nil];
                     [wifiLostAlert show];
                     [wifiLostAlert release];
                      wifiLostAlert = nil;

              }

    } 
```

在我的客户网站中，他们报告了一个问题

> “我们多次尝试向学习者发送消息或同步设备时，她收到以下消息：“Wifi 连接错误。同样的情况发生在 2 个不同的网络上，即使网络信号非常强，它也无法快速恢复。”

不幸的是，我无法在我的站点中重现此问题，并且它在另一个客户端站点中也可以正常工作！！。

关于这个问题的任何线索。对此的任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T02:27:35.923

我建议您向客户端提供更新版本，以显示有关实际发生的错误的更多信息。

您可以使用以下方法获取有关错误的更多信息：

```
NSError* error = [stream streamError]; 
```

[您可以在NSError 类参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nserror_Class/Reference/Reference.html)中找到有关 NSError 的更多信息。

这样的事情可能适用于您的情况：

```
NSString* errorMessage = [NSString stringWithFormat:@"%@ (Code = %d")",
                                   [error localizedDescription],
                                   [error code]]; 
```

然后将您的更改`UIAlertView`为：

```
UIAlertView *wifiLostAlert = [[UIAlertView alloc] 
                     initWithTitle:@"Stream Error" 
                           message:errorMessage
                          delegate:nil         
                 cancelButtonTitle:@"Continue" 
                 otherButtonTitles:nil]; 
```

这不会解决问题，但会为您和您的客户提供有关根本原因的更多信息。

例如，您可能会发现错误是“连接被拒绝”。这表明不是 WiFi 信号强度的问题，而是服务器端软件的问题。

祝你好运！

# cmake - 仅在构建自定义目标时才在 CMake 中安装某些内容

> ID：11359980
> 
> 赞同：3
> 
> 时间：2012-07-06T09:56:14.483
> 
> 标签：cmake

我目前正在尝试设置 CMake 以自动生成我的 Doxygen 文档。我目前使用以下代码。

```
find_package(Doxygen)
if (DOXYGEN_FOUND)
    configure_file("docs/Doxyfile.in" "${PROJECT_BINARY_DIR}/Doxyfile")
    add_custom_target(docs
                      COMMAND ${DOXYGEN_EXECUTABLE}
                              "${PROJECT_BINARY_DIR}/Doxyfile"
                      SOURCES "${PROJECT_BINARY_DIR}/Doxyfile")
    install(DIRECTORY "${PROJECT_BINARY_DIR}/docs/"
            DESTINATION "docs")
endif() 
```

当您输入`make docs`它时，它可以正常工作，它会在`PROJECT_BINARY_DIR/docs`. 当您输入`make install`时，它将 docs 子目录复制到`CMAKE_INSTALL_PREFIX`. 但是，当用户不希望生成文档而只是键入`make install`时，会发生以下错误：

```
CMake Error at cmake_install.cmake:36 (FILE):
  file INSTALL cannot find "/home/lukas/workspace/TheGame/build/docs". 
```

如何指示`install`仅在`docs`构建自定义目标 ( ) 时执行命令（或者如果子目录`docs`存在于 中`PROJECT_BINARY_DIR`）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T11:11:13.200

您是否尝试过使用[OPTIONAL](https://cmake.org/cmake/help/latest/command/install.html)标志？

```
install(DIRECTORY "${PROJECT_BINARY_DIR}/docs/" DESTINATION "docs" OPTIONAL) 
```

# disqus - Disqus 2012 外观调整

> ID：11359986
> 
> 赞同：1
> 
> 时间：2012-07-06T09:56:43.343
> 
> 标签：disqus

我正在尝试改变新 Disqus (Disqus 2012) 的外观。

有没有办法通过 CSS 修改 Disqus 2012 中输入和文本区域的外观？

* * *

据我所知，所有外观选项都已被删除，现在 Disqus 巧妙地继承了您的网站颜色。问题是 Disqus 并不聪明。虽然它在白色背景上看起来很棒，但在深色背景上看起来很糟糕。

我有一个大客户希望从旧的 Disqus 升级到新的 Disqus，但我认为没有办法改变外观。

我的客户说如果我不能将她升级到最新的 Disqus，我需要完全删除 Disqus。这将涉及导出近 500,000 条评论......这不会很有趣！

我能找到的唯一信息在这里：

[http://help.disqus.com/customer/portal/articles/545277-disqus-2012-appearance-tweaks](http://help.disqus.com/customer/portal/articles/545277-disqus-2012-appearance-tweaks)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T00:12:48.497

你不会有一个黑色的正文，带有白色的文本，然后是一个白色的带有黑色文本的容器 div，然后将站点放在那个白色的 div 中吗？那可能行得通，我决定离开旧的disqus，我不敢相信他们这样做了。甚至无法更改字体或输入字段。糟透了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T08:33:24.397

Disqus 通过主要的“字体颜色”检测并适应手头的模板

如果你的主题是黑暗的，就像我的一样，你必须确保你的身体应该是这样的：

`body { font-size: 13px; color: white; background-color: #2c2c2c;}`

这只是一个例子，请注意，触发 DISQUS 使用深色主题的变量是颜色：白色，另外，请`p {color:white}`确定。

如果你这样做，disqus 2012 会从他们的服务器加载一个深色模板到你网站上的 iframe 中，看起来会好很多。

它并不完美，我对此感到非常恼火，但 iframe 实现比纯 javascript 更好，并且会因为对 SEO 友好而变得容易。

# linux - 在centOS5 / linux上的tomcat上部署Web应用程序时无法打开Hibernate Session进行事务处理

> ID：11359987
> 
> 赞同：1
> 
> 时间：2012-07-06T09:56:53.233
> 
> 标签：linux, hibernate, jndi, tomcat7

**Tomcat版本：** 7 **操作系统： CentOS-** **5 描述：**通过jenkins在Centos5上的Tomcat7上部署了一个.war文件/web应用，部署成功，可以查看web应用。但是当我访问使用数据库的功能时，下面的异常被抛出，没有进一步的堆栈跟踪

连接数据库时出现异常：`org.springframework.transaction.CannotCreateTransactionException: Could not open Hibernate Session for transaction; nested exception is org.hibernate.exception.GenericJDBCException: Cannot open connection`

在 /conf/context.xml 中指定的 DB 参数

```
<ResourceLink name="jdbc/com/gtspt/vrs"
                            global="jdbc/com/gtspt/vrs"
                            type="javax.sql.DataSource"/> 
```

在 /conf/server.xml

```
<Resource 
            name="jdbc/com/gtspt/vrs" 
            auth="Container"
type="javax.sql.DataSource" 
            driverClassName="oracle.jdbc.OracleDriver"
url="jdbc:oracle:thin:@gts-ora-rac-gns.dmz.gtspt.corp:1521/edged"
            username="XXXXX" 
            password="XXXXX" 
            maxActive="10" 
            maxIdle="10"
            maxWait="-1"/> 
```

相同的设置/配置适用于本地 Windows 上的 tomcat 7。请指导我。我是 linux 新手。从 linux 系统到数据库的 Telnet 是成功的

# amazon-ec2 - vagrant 和 ec2 之间的木偶条件检查

> ID：11359990
> 
> 赞同：4
> 
> 时间：2012-07-06T09:57:16.657
> 
> 标签：amazon-ec2, puppet, vagrant

我查看了[puppet variables](http://docs.puppetlabs.com/guides/language_guide.html#variables)的文档，似乎无法理解如何将其应用于以下情况：

```
if vagrant (local machine)

phpfpm::nginx::vhost { 'vhost_name':
    server_name => 'dev.demo.com',
    root        => '/vagrant/public',
}

else if aws ec2 (remote machine)

phpfpm::nginx::vhost { 'vhost_name':
    server_name => 'demo.com',
    root        => '/home/ubuntu/demo.com/public',
} 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T16:48:34.957

尝试在您的 vagrant 主机和 EC2 实例上运行 facter，并寻找差异。我怀疑两个主机之间的“虚拟事实”可能不同，或者 EC2 可能会返回一堆 ec2_ 事实，这些事实不会出现在流浪主机上。

然后你可以使用这个事实作为一个顶级变量，如下所示。我也切换到 case 语句，因为这更容易维护恕我直言，而且您可以使用默认块进行错误检查。

```
case $::virtual {
  'whatever vagrant returns' : {
    <vagrant specific provisionin>
   }
  'whatever the EC2 instance returns' : {
     <EC2 specific provisioning>
   }
   default : {
      fail("Unexpected virtual value of $::virtual")
   }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T07:53:01.707

注意：自发布此回复以来的三年中，Vagrant 引入了`facter`哈希选项。有关更多详细信息，请参阅下面的@thomas 答案。我相信这是正确的方法，并且使我提出的内核命令行技巧相当过时。但是，使用事实的理由并没有改变，只是得到了加强（例如，Vagrant 目前支持 AWS 提供商）。

原始回复：小心-您假设您只将virtualbox 用于vagrant，反之亦然，但Vagrant 正在努力支持其他虚拟化技术（例如kvm），您可能有一天会在没有vagrant 的情况下使用VirtualBox（例如用于生产）。

相反，我使用的技巧是在构建 basebox 时向内核传递一个“vagrant=yes”参数，然后可以通过 /proc/cmdline 访问该参数。然后您可以基于它创建一个新的事实（例如 /etc/vagrant 文件并在后续的事实运行中检查它）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-09T22:31:16.383

[Vagrant在提供 Puppet 事实](http://docs.vagrantup.com/v2/provisioning/puppet_apply.html)方面具有很大的实用性：

> facter (hash) - 在 Puppet 运行中设置为可用因子变量的数据散列。

例如，这是我的 Vagrantfile 中带有 Puppet 设置的片段：

```
config.vm.provision "puppet", :options => ["--fileserverconfig=/vagrant/fileserver.conf"]  do |puppet|
    puppet.manifests_path = "./"
    puppet.module_path = "~/projects/puppet/modules"
    puppet.manifest_file  = "./vplan-host.pp"
    puppet.facter = {
      "vagrant_puppet_run" => "true"
    }
  end 
```

然后我们利用这个事实，例如：

```
 $unbound_conf = $::vagrant_puppet_run ? {
    'true'  => 'puppet:///modules/unbound_dns/etc/unbound/unbound.conf.vagrant',
    default => 'puppet:///modules/unbound_dns/etc/unbound/unbound.conf',
  }

  file { '/etc/unbound/unbound.conf':
    owner  => root,
    group  => root,
    notify => Service['unbound'],
    source => $unbound_conf,
  } 
```

请注意，该事实仅在`puppet provision`一段时间内可用。

# asp.net - asp.net VB gridview 复选框总是在服务器端代码后面显示错误

> ID：11359994
> 
> 赞同：0
> 
> 时间：2012-07-06T09:57:23.667
> 
> 标签：asp.net, vb.net, visual-studio-2010

我正在尝试在asp.net（VB）上实现一个带有复选框列的gridview。当用户选中复选框并单击删除按钮时，它应该访问数据库并删除所有选中的项目。我已经尝试了许多谷歌搜索解决方案，但从未为我工作过。这是我的 aspx 页面上的简短场景： 1）按 id 文本框搜索，当用户输入 ID 并单击搜索按钮时，将显示下表

```
<asp:GridView ID="MyGridView" runat="server">
<Columns>
<asp:TemplateField headertext="Name">
<ItemTemplate>
<asp:Label id="namelbl" 
text='<%# Eval("name")%>' runat="server"/>
</ItemTemplate>   
</asp:TemplateField>
<asp:TemplateField HeaderText="Delete Now?">
<ItemTemplate>
 <asp:CheckBox Enabled="true"   ID="chkStatus" runat="server" />

</ItemTemplate>      
</asp:TemplateField>
 </Columns>
 </asp:GridView> 
```

显示数据后，用户选中所需的复选框并单击删除按钮，然后运行后面的代码

```
Protected Sub DelSelected(ByVal sender As Object, ByVal e As System.EventArgs)
Dim idList as ArrayList = new ArrayList()
For Each row As GridViewRow In MyGridView.Rows
    Dim selectcb As CheckBox = CType(row.FindControl("chkStatus"), CheckBox)
     If (selectcb.Checked) Then
     'put into delete list 
```

麻烦从这里开始，selectcb 复选框总是错误​​的怎么会发生这种情况，任何想法将不胜感激谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:00:43.680

您必须仅在没有 IsPostback 时才绑定您的数据，以保持选中的复选框，并且不重置

```
If(! IsPostBack)
{
  Bind();
} 
```

# spring - springs.schemas 中的 Spring 命名空间和占位符

> ID：11359996
> 
> 赞同：1
> 
> 时间：2012-07-06T09:57:28.087
> 
> 标签：spring, junit, xsd

[Spring-namespaces](http://bit.ly/LZrBXY)允许您定义自己的结构如何配置 spring bean。很酷。

我必须使用第 3 方软件（Assentis Docbase），它在其 spring.schemas 中定义了以下内容（下面的示例简化）

```
http\://com.apress.prospring2/ch07/custom.xsd=custDir:/custom.xsd 
```

含义：如果用户在其 spring-xml 中定义 schema-location: "http://com.apress.prospring2/ch07/custom.xsd" spring 将根据 custom.xsd 验证此文件。

custDir 是提供的 jar 之外的目录。有谁知道如何在junit测试期间将此custDir设置为指向有效路径？我已经尝试过 -DcustDir=/pathToXsd/ 但它不起作用。

如果我删除 custDir，一切都按预期工作，但我无法从提供的 spring.schemas 中删除它，因为它是第 3 方软件。

也许这是如何在 java 中处理属性文件的问题，但我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:47:45.007

您可以通过为您自己的自定义 spring.schemas 文件提供相同的条目但具有自定义 xsd 文件的位置来“覆盖”此条目。问题是这高度依赖于 spring.schemas 加载的顺序，但值得一试。

由于 custDir 不是占位符，因此您无法按照您的方式替换它，我很惊讶第三方模式位置位于类路径之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:48:45.913

我在问题中提供的语法`spring.schemas`是 3.rd 方软件的专有定义。他们在那里实现了自己的`EntityResolver`手动反应`"custDir:"`并启动了一些魔术算法。所以我来到了以下解决方法。

您必须创建自己的`my_spring.schemas`必须居住在`META-INF/`. 比你必须确保弹簧负载`my_spring.schemas`而不是`spring.schemas`。

我通过实现我自己的实现了它，`TestingContext`它是`ClassPathXmlApplicationContext`. 在`TestingContext`我覆盖了方法`protected void loadBeanDefinitions(DefaultListableBeanFactory beanFactory) throws IOException`并用`org.springframework.context.support.AbstractXmlApplicationContext`. 我所做的唯一更改是行`beanDefinitionReader.setEntityResolver(new ResourceEntityResolver(this))`到`beanDefinitionReader.setEntityResolver(new PluggableSchemaResolver(getClassLoader(), "META-INF/my_spring.schemas)`. 瞧，如果我使用`TestingContext`自己的`my_spring.schemas`已加载。

此解决方案的缺点是您必须在 jar 中提供所有 xsd，因为 spring 查找定义的默认名称已更改。

# android - 从android活动执行su命令

> ID：11359999
> 
> 赞同：3
> 
> 时间：2012-07-06T09:57:40.203
> 
> 标签：android

我正在尝试执行以下方法：

```
public void runAsRoot(String[] cmds) throws Exception {
        Process p = Runtime.getRuntime().exec("su");
        DataOutputStream os = new DataOutputStream(p.getOutputStream());
        InputStream is = p.getInputStream();
        for (String tmpCmd : cmds) {
            os.writeBytes(tmpCmd+"\n");
            int readed = 0;
            byte[] buff = new byte[4096];

            // if cmd requires an output
            // due to the blocking behaviour of read(...)
            boolean cmdRequiresAnOutput = true;
            if (cmdRequiresAnOutput) {
                while( is.available() <= 0) {
                    try { Thread.sleep(200); } catch(Exception ex) {}
                }

                while( is.available() > 0) {
                    readed = is.read(buff);
                    if ( readed <= 0 ) break;
                    String seg = new String(buff,0,readed);
                    Log.i("#>", seg);
                }
            }
        }        
        os.writeBytes("exit\n");
        os.flush();
    } 
```

我使用以下输入调用了此方法：

```
String[] cmds = {"/system/bin/sendevent /dev/input/event0 1 107 0 \n", "sleep 1", "/system/bin/sendevent /dev/input/event0 1 107 1 \n"};
                try {
                    runAsRoot(cmds);
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

但在 logcat 我收到以下错误：

```
07-06 15:19:27.007: E/su(6547): sudb - Opening database
07-06 15:19:27.007: E/(6547): Couldn't open database: unable to open database file
07-06 15:19:27.017: E/su(6547): sudb - Could not open database, prompt user
07-06 15:19:47.082: E/su(6547): select failed with 2: No such file or directory
07-06 15:19:47.082: W/su(6547): request rejected (10060->0 /system/bin/sh) 
```

知道什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:11:03.203

看起来 su 二进制文件存在问题，而不是您的应用程序。检查您是否可以从“adb shell”成功运行有根 shell。如果'adb shell' 从一开始就给你一个root shell，运行'su 1000' 失去root 权限，然后运行'su' 尝试再次进入root shell。如果失败，则 su 不起作用。

哦，还有一个相关的说明：确保在另一个线程中运行 su，可能通过 Handler 或 AsyncTask，这样它就不会阻塞你的 UI 线程。