# StackOverflow 问答 10622000-10622999

# android - Android服务通知和contentIntent

> ID：10622004
> 
> 赞同：0
> 
> 时间：2012-05-16T15:43:30.577
> 
> 标签：android, service, notifications

首先是上下文。我有一个应用程序将多个文件上传到服务器。我实际上有： - 使用 FTP 连接上传的服务。- 由服务更新的通知（进度条） - 一个活动，其中包含上传“ProgressActivity”的每个文件的详细信息

在当前配置中。活动启动服务，然后接收有关连接进度的信息。通信是通过 ServiceConnection 的实现来完成的。

一旦我需要用户能够在上传过程中浏览应用程序，我希望用户能够通过单击通知来访问 ProgressActivity。

我试图在 contentIntent 上添加一个调用 ProgressAvtivity 的意图，但只要它是 Acitvity 的另一个实例，绑定就不再可行。

我们还需要记住，用户应该能够同时运行多个 FTP 服务。

关于如何实现这一目标的任何猜测？

如果需要更多详细信息，请随时询问。

# java - 如何将位图从 Android 流式传输到 Google App Engine Servlet？

> ID：10622005
> 
> 赞同：0
> 
> 时间：2012-05-16T15:43:34.083
> 
> 标签：java, android, google-app-engine

我在这个问题上挣扎了几天，你是我解决它的最后机会。

**目标：**

将位图从 android 客户端上传到谷歌应用引擎并将其保存在数据存储中。

*   我正在使用序列化将对象从客户端传输到服务器，反之亦然。

**我尝试过的事情：**

*   发送位图
    *   但我得到了`java.io.NotSerializableException: android.graphics.Bitmap`
*   然后我尝试从客户端的位图 Blob 创建，如下所示：

    ```
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.PNG, 100, bos);
    Byte[] bArray = bos.toByteArray();
    Blob blob = new Blob(bArray); 
    ```

    但是在客户端我没有谷歌应用引擎类（用于 Blob），所以我试图通过提取特定的类来强制它，但它产生了新的问题。

所以我问我可以从哪个方向来解决这个问题。
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T18:14:00.523

几点注意事项：

1.  不要使用 Java 序列化在 JVM 之间传输数据。Java 序列化没有标准化，不能保证在 JVM 之间（甚至版本之间）兼容。

2.  要发送二进制数据，最好使用 HTTP POST 并进行`Content-Type`适当设置（例如`application/octet-stream`）。

因此，要使这项工作做到这一点：

1.  创建一个处理 POST 并获取二进制数据的 servlet。用于[`servletRequest.getInputStream()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getInputStream%28%29)获取二进制数据。

2.  使用 Blobstore [FileService API](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)将数据保存到 Blobstore。

3.  在 Android 端，使用[http 客户端](http://android-developers.blogspot.com/2011/09/androids-http-clients.html)发出 POST 请求并将位图的二进制数据添加到其中。如果您需要添加一些元数据，请使用 Http 标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T18:16:17.823

这是一种经过生产测试的方式：

使用 GAE appengine 将您的位图上传到，并为未来的客户服务。

在 Android 代码上，请执行以下步骤：

1.  从 GAE 获取上传 URL
2.  将您的位图上传到 GAE，然后取回 blobkey
3.  稍后，使用 blobkey 将图像提供给您的客户。

**GAE Servlet 代码：**

**获取上传网址：**

```
BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
String url = blobstoreService.createUploadUrl(path_to_your_upload_servlet); 
```

**uploadServlet - 存储在 blobstore 中，将 blobkey 返回给上传者**

```
BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
Map<String, List<BlobKey>> uploads = blobstoreService.getUploads(request);
String fileName = uploads.keySet().iterator().next();
final BlobKey blobKey = uploads.get(fileName).get(0);
response.getWriter().println(blobKey.getKeyString()); 
```

**安卓客户端代码**：

```
String uploadUrl = getUrlAsString(..your getUrl servlet path...)
// Upload to GAE (include apache-mime4j.jar and httpmime.jar in your project for this code)
File file = new File(imageFilePath);
HttpPost postRequest = new HttpPost(uploadUrl);
MultipartEntity entity = new MultipartEntity();
entity.addPart("file", new FileBody(file));
postRequest.setEntity(entity);
HttpResponse httpResponse;
HttpClient httpClient = new DefaultHttpClient();
httpClient.getParams().setBooleanParameter("http.protocol.handle-redirects",false);

httpResponse = httpClient.execute(postRequest);
int status = httpResponse.getStatusLine().getStatusCode();
String blobKey = getInputStreamAsString(httpResponse.getEntity().getContent()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T17:42:48.107

这可能有用

[如何使用谷歌应用引擎（java）上传和存储图像](https://stackoverflow.com/questions/1513603/how-to-upload-and-store-an-image-with-google-app-engine-java)

或者，您可以尝试 blobstore api

[http://code.google.com/appengine/docs/java/blobstore/overview.html](http://code.google.com/appengine/docs/java/blobstore/overview.html)

# jquery-mobile - 使用 Jquery Mobile 添加新的分组按钮

> ID：10622007
> 
> 赞同：0
> 
> 时间：2012-05-16T15:43:41.110
> 
> 标签：jquery-mobile

我正在尝试通过 ajax 在我的 jquery 移动页面中添加一些按钮。

直接注入页面根本没有样式。

尝试这个也不起作用（没有样式）

```
$('<a href="#" data-role="button" id="next_page">Next</a>').appendTo('#page_btns').trigger('create'); 
```

这是其 div 的代码

```
<div data-role="controlgroup" data-type="horizontal" id="page_btns"></div> 
```

如何使用 jquery mobile 通过 AJAX 添加/删除分组按钮？

编辑：在 controlgroup div 上调用 .trigger('create') 确实设置了按钮的样式，但它们被设置为单个按钮而不是分组样式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:25:37.423

在包含控制组的任何 div 上触发创建事件。例如：`data-role=content`div。将按钮附加到 div 后添加以下代码行

```
$('div[data-role=content]').trigger('create'); 
```

# python - Python 客户端产生和使用 JMS 消息（HornetQ）

> ID：10622009
> 
> 赞同：2
> 
> 时间：2012-05-16T15:43:45.077
> 
> 标签：python, jms, hornetq

我很惊讶到目前为止我还没有找到解决方案。我有一个 Python 程序需要使用 JMS 来生成和使用消息。JMS 提供者是 HornetQ。

我已经阅读了有关“可能”与 HornetQ 一起使用的 stomp 连接器。然而，由于各种原因，“只”使用 JMS 就好像它是一个 Java 客户端一样容易得多。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T18:32:58.777

[HornetQ REST 接口](http://docs.jboss.org/resteasy/hornetq-rest/1.0-beta-1/userguide/html_single/index.html)怎么样？

# iphone - 如何使所有视图出现

> ID：10622011
> 
> 赞同：0
> 
> 时间：2012-05-16T15:43:57.750
> 
> 标签：iphone, ipad, interface-builder

我正在使用Interface Builder制作如下的一些视图层，文件所有者的视图指向最低的视图层（第一行的“视图”），并且这个ViewController（如图所示）被添加为rootViewController 的子视图：

![,](../Images/6e7a43d79f51415afb0cfef691a16be6.png)

问题是我只能看到 Grid View ，但我看不到 pageControl 的视图：

![在此处输入图像描述](../Images/93bb45266c60cf07b7d4ff016121047a.png)

blue:rootview green:刚才说的view，看不到上图的红黄view，可以看到绿色的margin。

我只是想，在 Interface Builder 上，你放的就是你会看到的，对吧？为什么没有出现带有 pageControl 的视图？如何解决？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:56:30.207

看起来绿色视图被放置在黄色视图之上。如果我理解正确，两个视图都是“视图”的子视图？试试 viewDidLoad [view bringSubviewToFront:pageControl] 看看这是否确实是问题所在。

# ios - UITableView中的deleteObject错误，无法复制

> ID：10622014
> 
> 赞同：0
> 
> 时间：2012-05-16T15:44:05.343
> 
> 标签：ios, xcode, ipad, uitableview, core-data

我在 App Store 中有我的第一个应用程序，但我收到一个无法在我的任何设备上重现的错误。一位用户报告说，他无法在应用程序崩溃的情况下删除产品。我已经尝试了所有我能想到的重现并且没有运气。iTunes Connect 中没有崩溃报告，所以我注册了 Crittercism。现在我知道有三个用户遇到了问题。

问题是即使有崩溃日志，我仍然无法弄清楚应用程序崩溃的原因。当我删除一个项目时，它永远不会崩溃——即使是一个没有用户输入信息的新创建的项目。任何可能帮助我缩小问题范围的建议将不胜感激。该应用程序使用核心数据，并且产品实体与其他实体的所有删除规则都设置为无效或级联。

崩溃日志表明崩溃的原因是“NSInvalidArgumentException - deleteObject：需要一个非零参数”。这是回溯：

```
Reported    Name    Reason  App Version     Symbolicated
15-May-12 07:22:06 PM   NSInvalidArgumentException  
-deleteObject: requires a non-nil argument

0   CoreFoundation 0x317a888f __exceptionPreprocess + 162
1   libobjc.A.dylib 0x315f3259 objc_exception_throw + 32
2   CoreData 0x3325cf23 -[NSManagedObjectContext deleteObject:] + 386
3   OnShelf 0x000972e7 0x76000 + 135911
4   CoreFoundation 0x317023fd -[NSObject performSelector:withObject:withObject:] + 52
5   UIKit 0x319f0e07 -[UIApplication sendAction:to:from:forEvent:] + 62
6   UIKit 0x31ab65e7 -[UIBarButtonItem(UIInternal) _sendAction:withEvent:] + 118
7   CoreFoundation 0x317023fd -[NSObject performSelector:withObject:withObject:] + 52
8   UIKit 0x319f0e07 -[UIApplication sendAction:to:from:forEvent:] + 62
9   UIKit 0x319f0dc3 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 30
10  UIKit 0x319f0da1 -[UIControl sendAction:to:forEvent:] + 44
11  UIKit 0x319f0b11 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 492
12  UIKit 0x319f1449 -[UIControl touchesEnded:withEvent:] + 476
13  UIKit 0x319ef92b -[UIWindow _sendTouchesForEvent:] + 318
14  UIKit 0x319ef319 -[UIWindow sendEvent:] + 380
15  UIKit 0x319d5695 -[UIApplication sendEvent:] + 356
16  UIKit 0x319d4f3b _UIApplicationHandleEvent + 5826
17  GraphicsServices 0x32bd822b PurpleEventCallback + 882
18  CoreFoundation 0x3177c523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 38
19  CoreFoundation 0x3177c4c5 __CFRunLoopDoSource1 + 140
20  CoreFoundation 0x3177b313 __CFRunLoopRun + 1370
21  CoreFoundation 0x316fe4a5 CFRunLoopRunSpecific + 300
22  CoreFoundation 0x316fe36d CFRunLoopRunInMode + 104
23  GraphicsServices 0x32bd7439 GSEventRunModal + 136
24  UIKit 0x31a03cd5 UIApplicationMain + 1080
25  OnShelf 0x00077207 0x76000 + 4615
26  OnShelf 0x000771bc 0x76000 + 4540 
```

在 UITableView 中删除产品的代码唯一不寻常的地方是它首先检查库存数量是否为零。如果不是，则显示警告以询问用户他是否真的想删除该产品。与我联系的一位用户确实告诉我，无论库存数量是否为零，他都发生了崩溃，因此崩溃似乎与显示的警报无关。这是代码：

```
- (void)tableView:(UITableView *)tableView 
            commitEditingStyle:(UITableViewCellEditingStyle)editingStyle
             forRowAtIndexPath:(NSIndexPath *)indexPath
{
Product *product = [fetchedResultsController objectAtIndexPath:indexPath];

// Alert the user if the item is currently in stock
if ([product.details.quantity intValue] > 0) {
    [self showAlert];

    if (editingStyle == UITableViewCellEditingStyleDelete) {
        lastIndexPath = indexPath;
        toDelete = YES;
        NSLog(@"Yes delete");
    } else {
        toDelete = NO;
    }
} else {
    // Delete the managed object.
    NSManagedObjectContext *myContext = [fetchedResultsController managedObjectContext];
    [myContext deleteObject:[fetchedResultsController objectAtIndexPath:indexPath]];

    NSError *error;
    if (![myContext save:&error]) {
        // Update to handle the error appropriately.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        exit(-1);  // Fail
        }        
    }
}

#pragma mark - AlertView Delegate Methods

- (void)showAlert {
    // open a alert with an OK and cancel button
    UIAlertView *alert =[[UIAlertView alloc] initWithTitle: @"Product In Stock"
                                                   message: @"All product data will be deleted" 
                                                  delegate: nil 
                                         cancelButtonTitle: @"Cancel" 
                                         otherButtonTitles:@"OK", nil];
    [alert setDelegate: self];
    [alert show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
    if (buttonIndex == 0) {
        //do nothing
    }
    else
    {
        if( toDelete == YES)
        {
            // Delete the managed object.
            NSManagedObjectContext *myContext = [fetchedResultsController managedObjectContext];
            [myContext deleteObject:[fetchedResultsController objectAtIndexPath: lastIndexPath]];

            NSError *error;
            if (![myContext save:&error]) {
                // Update to handle the error appropriately.
                NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
                exit(-1);  // Fail
            }        
        }
    }
} 
```

我正在使用 Apple 教程中的样板 NSFetchedResultsController 委托方法：

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
// The fetch controller is about to start sending change notifications, so prepare the table view for updates.
[self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject 
                                                            atIndexPath:(NSIndexPath *)indexPath 
                                                            forChangeType:(NSFetchedResultsChangeType)type 
                                                        newIndexPath:(NSIndexPath *)newIndexPath     {

    UITableView *aTableView = self.tableView;

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [aTableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [aTableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:(DatabaseCell *)[aTableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [aTableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [aTableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
                                                            atIndex:(NSUInteger)sectionIndex 
                                                            forChangeType:(NSFetchedResultsChangeType)type {

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;

    case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
// The fetch controller has sent all current change notifications, so tell the table view to process all updates.
    [self.tableView endUpdates];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-20T08:37:05.520

..有点晚的答案，但最近有这个错误消息“NSInvalidArgumentException - deleteObject：需要一个非零参数”。当我快速删除主从表视图中的项目并双击删除按钮时，就会发生这种情况。我的问题的解决方法是在调用 deleteObject 之前检查 indexPath 是否为零：

```
 if (indexPath == nil) return;
    [context deleteObject:[self.fetchedResultsController objectAtIndexPath:indexPath]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:32:49.137

也许可以工作。

在`clickedButtonAtIndex`方法内重置布尔值

```
if(toDelete == YES)
{
   // other code here...

   toDelete = NO;
} 
```

**关于您的代码的一些注释。**

如果这不能解决错误，也许尝试明确您的问题以仅突出关键点。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T16:51:17.700

在我看来，你`-deleteObject`在两个不同的地方打电话。`NSInvalidArgumentException -deleteObject: requires a non-nil argument`因此，在第二次尝试删除您已删除的对象时，可能会引发错误 ( )。

# r - R - 将地图图层添加到地理地图

> ID：10622016
> 
> 赞同：1
> 
> 时间：2012-05-16T15:44:06.960
> 
> 标签：r, mapping, ggplot2

我正在尝试使用墨卡托地图作为背景来映射 R 中的一些数据。

这是我正在使用的，数据点很好，但我没有得到地图。

```
qplot(nt_phi_lambda$longitude, xlab='Longitude', 
    nt_phi_lambda$latitude, ylab='Latitude', 
    data=nt_phi_lambda, main='Global Indsutry Break-down', 
    colour=industry, projection='mercator()', parameters=c(0,0,0)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:50:34.980

您需要一个带有国家边界坐标的 data.frame。只是设置`projection = 'mercator()`不会在墨卡托投影中添加地图。有关如何绘制世界地图的示例，请参阅[我最近提出的问题。](https://stackoverflow.com/questions/10620862/use-different-center-than-the-prime-meridian-in-plotting-a-world-map)几行代码中的一个示例：

```
require(maps)
world_map = data.frame(map(plot=FALSE)[c("x","y")])
ggplot(aes(x = x, y = y), data = world_map) + geom_path() 
```

另请参阅[的文档`coord_map`](http://had.co.nz/ggplot2/coord_map.html)。

# postgresql - 建议像 google 一样使用 postgresql trigrams 和全文搜索

> ID：10622021
> 
> 赞同：9
> 
> 时间：2012-05-16T15:44:11.807
> 
> 标签：postgresql, full-text-search, trigraphs

我想做一个像[谷歌建议](http://support.google.com/websearch/bin/answer.py?hl=en&answer=106230)这样的文本搜索。

我使用[PostgreSQL](http://www.postgresql.org/)因为神奇的[Postgis](http://postgis.refractions.net/)。

我正在考虑使用[FTS](http://www.postgresql.org/docs/9.1/interactive/textsearch.html)，但我发现它无法搜索[部分单词](https://stackoverflow.com/questions/2908712/when-will-postgress-full-text-search-supports-phrase-match-and-proximity-match)，所以我找到[了这个问题](https://stackoverflow.com/questions/2513501/postgresql-full-text-search-how-to-search-partial-words)，并了解了[trigrams](http://www.postgresql.org/docs/9.1/static/pgtrgm.html)的工作原理。

主要问题是我正在研究的搜索引擎是西班牙语。FTS 在词干和[字典](http://www.postgresql.org/docs/9.1/interactive/textsearch-dictionaries.html)（同义词、拼写错误）、UTF 等方面表现出色。Trigrams 对部分单词很有效，但它们只适用于 ASCII，而且（显然）它们不使用字典之类的东西。

我在想是否有任何方法可以使用两者中最好的东西。

是否可以让全文搜索和三元组在 PGSQL 中一起工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-29T06:05:23.450

您可以在 Postgres 中执行此操作，并且不需要 Lucene。

`tsquery`您可以在下面引用或`tsvector`喜欢下面的短语。您可以在词`:*`后添加 a`tsquery`来进行前缀搜索：

```
select
'''new york city'''::tsvector   @@ '''new yo'':*'::tsquery, --true
'''new york times'''::tsvector  @@ '''new yo'':*'::tsquery, --true
'''new york'''::tsvector        @@ '''new yo'':*'::tsquery, --true
'''new'''::tsvector             @@ '''new yo'':*'::tsquery, --false
'new'::tsvector                 @@ '''new yo'':*'::tsquery, --false
'new york'::tsvector            @@ '''new yo'':*'::tsquery  --false 
```

主要问题是，`to_tsvector()`并且`[plain]to_tsquery()`会剥夺你的报价。您可以编写自己的不这样做的版本（这并不难），或者在它们之后进行一些后处理以构建您的术语 n-gram。

上面多余的单引号只是转义。`select $$ i heart 'new york city' $$::tsvector;`是等价的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T20:28:38.103

我建议看看[Lucene](http://lucene.apache.org/)。它可以在 Java 中本地集成，也可以在 .NET 中轻松集成，或者在 php 中使用 SOLR 和 Web 服务。

它具有强大的自由文本搜索功能、开箱即用的术语排名、使用不同[分析器](http://lucene.apache.org/core/old_versioned_docs/versions/3_3_0/api/all/org/apache/lucene/analysis/es/SpanishAnalyzer.html)支持不同语言（西班牙语链接）。

最后但同样重要的是，它也非常快（对于大容量，比如 4Gb 索引 ~ 数据库中的 5 000 000 行，它比 Postgres 数据库快得多）。

# iphone - iOS - 本地化时带有 Hash # 和 Star * 的 NSString 反转

> ID：10622022
> 
> 赞同：2
> 
> 时间：2012-05-16T15:44:12.830
> 
> 标签：iphone, ios, localization, nsstring

一个例子将说明这个问题。

考虑代码：*678*0123456789*45#。如果我*在*任何从左到右的语言中使用此代码，则代码会正确显示（在警报视图消息中）。

但是如果我*在*任何从右到左的语言中使用此代码，代码就会混乱。它没有反转，而是看起来像 #45*0123456789*678*。如您所见，由于星号和散列之间的数字是正确的，因此代码*没有反转。*然而，整个代码是相反的。有解决办法吗？

# ios - 无法构建 SSCatalog 项目

> ID：10622024
> 
> 赞同：0
> 
> 时间：2012-05-16T15:44:22.630
> 
> 标签：ios, sstoolkit

我在构建 SSCatalog 项目时遇到问题：[https ://github.com/samsoffes/sscatalog](https://github.com/samsoffes/sscatalog)

我从[http://sstoolk.it/](http://sstoolk.it/)下载了 SSToolkit， 但第 2 步显示“在 Finder 中，将位于 Vendor/SSToolkit/Resources 中的 SSToolkit.bundle 拖到 Xcode 项目的 Resources 文件夹中。” 但是资源文件夹中没有“SSToolkit.bundle”......只有 .lproj 文件夹，即使我之前构建并运行了 SSToolkit 项目。

谁能帮我？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T01:33:45.583

我通过制作一个名为 SSToolkit.bundle 的新包解决了这个问题，然后将 sstoolkit/resources/images 文件夹下的文件复制到其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:47:21.117

[安装](https://github.com/samsoffes/sscatalog)指南说

> 要获取源代码，请运行以下命令：
> 
> > $ git clone [https://github.com/samsoffes/sscatalog.git](https://github.com/samsoffes/sscatalog.git) --recursive

# javascript - 时间 JavaScript

> ID：10622026
> 
> 赞同：0
> 
> 时间：2012-05-16T15:44:30.540
> 
> 标签：javascript, jquery

我有以下问题：在客户的主页上，导航栏是由 javascript 加载的，但我需要更改一些 URL。如果我只是在 $(document).ready() 上启动我的脚本，它会在客户脚本之前运行并且没有任何效果。我只能对我的函数使用 setTimeout 来等到另一个脚本准备好，但这根本不好或不安全。我无法更改网站上的任何内容，只能添加一个 javascript - 有没有办法在另一个之后对其进行计时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:48:38.263

您可以使用重复的 setTimeout，以检查菜单是否可访问。

```
function check_menu(){
    if(document.getElementById('my_menu')==null){
        setTimeout('check_menu()',500);
    } else {
        //do some stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:57:36.357

Yes, add your script at the bottom of the `<body />` tag to ensure it does not run until all other scripts have run. This will only work however if your customer is loading the nav links synchronously.

If the nav is being loaded asynchronously, use JS's `setInterval` to repeatedly check the contents of the nav for links. When you determine the links have been added, cancel your interval check and call your script's logic entry point.

Cheers

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:55:46.300

如果您有关于菜单的信息，例如 id 或类，请`onLoad()`在元素上使用 jQuery 方法。例如，如果代码是异步加载的，并且您将 onload 添加到内容完成后应该触发的最后一个元素之一。

```
$.post('AsyncCodeLoad.php', function(data) {
    $('#lastElementToLoad').onLoad(RunMyFunction);
}); 
```

或者，如果您没有机会将代码插入异步加载，只需添加到底部`</body>`：

```
 $('#lastElementToLoad').onLoad(RunMyFunction); 
```

只是一个想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T16:01:19.900

小提琴：http: [//jsfiddle.net/iambriansreed/xSzjA/](http://jsfiddle.net/iambriansreed/xSzjA/)

JavaScript

```
var
menu_fix = function(){
    var menu = $('#menu');
    if(menu.length == 0) return;
    clearInterval(menu_fix_int);
    $('a', menu).text('Google Search').attr('href','http://google.com');        
},
menu_fix_int = setInterval(menu_fix, 100); 
```

HTML

```
<div id="menu"><a href="http://bing.com">Bing Search</a></div>​ 
```

# c++ - 如何识别分隔符以及如何将其与路径一起使用 Open Inventor

> ID：10622030
> 
> 赞同：3
> 
> 时间：2012-05-16T15:44:39.930
> 
> 标签：c++, 3d, openinventor

我的场景图中有一些分隔符，例如桌子、灯和框架。当我将它们添加到一个名为“root”的分隔符中时，它们会被制成节点吗？就像我想将它们与路径一起使用一样，是否有与 path->containsNode 等效的分隔符？

另外，有没有办法识别分隔符？假设我想在桌子上放一盏灯。我认为最好的方法是检查灯是否与特定的分隔器（如桌子）发生碰撞？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T17:21:21.523

该类[`SoSeparator`](http://doc.coin3d.org/Coin/classSoSeparator.html)继承自C++ 继承意义上的`[SoNode][2]`via `SoGroup`。换句话说，任何`SoSeparator*`（即你的灯、桌子……）都是一个节点。只需`SoSeparator*`在需要争论的任何地方使用任何地方`SoNode*`，你就应该很好。

你手头有[一本好的 C++ 书籍](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)和一本[The Inventor Mentor](http://www-evasion.imag.fr/Membres/Francois.Faure/doc/inventorMentor/sgi_html/)吗？

# python - Python，打印选择的次数

> ID：10622034
> 
> 赞同：0
> 
> 时间：2012-05-16T15:45:12.770
> 
> 标签：python, date

我是编码新手，我的程序有问题。我必须从文件中获取销售信息并以某种格式打印出来。这是代码：

```
#Looping program to read file per line
for line in lines:
    # Formatting line to read later
    line = line.strip().split(',')
    year = line[0]
    year = int(year)
    month = line[1]
    month = int(month)
    day = line[2]
    day = int(day)
    linePoint = date(year, month, day)

    cost = line[3]
    cost = float(cost)

    #Finding the lines within the start and end date
    if (linePoint >= startDate) and (linePoint <= endDate):
        printcost = (cost / 100)
        printcost = int(printcost)

        print "%s.%s.%s" % (startYear, startMonth, startDay)
        print "0%s:" % printNum,  "*" * printcost

        newcost = newcost + cost
        printNum += 1 
```

当我使用`%s.%s.%s`它在销售上方打印日期时，我希望它每月在另一个打印报表上方打印一次，并且能够在一个月结束后增加它。同样在`print "0%s:" % printNum, "*" * printcost`声明中，我希望它只在前 9 天打印零。

本质上我的问题是我如何在 Python 中运行某些东西一定次数，但次数取决于用户并与日期相关，为了做到这一点，计算机需要能够识别日期。抱歉含糊不清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:13:31.497

如果您希望输出是，`'01', '02', ..., '10', '11', ...`那么您要使用的格式是：

```
print "%02d" % printNum 
```

至于在每个新月开始时打印标题（这就是我阅读问题第一部分的方式，您可以执行以下操作：

```
old_month = 0
for line in lines:
    # do stuff
    month = whatever...
    if month != old_month:
        # print header here
        old_month = month
    #rest of loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:26:55.120

我几乎可以肯定这就是你想要的。请注意“%02d”[格式说明符](http://docs.python.org/library/string.html#format-specification-mini-language)，它为您提供前导零，并检查月份是否已通过`if month != current_month`.

```
current_month, print_num, new_cost = None, 0, 0

for line in lines:
    fields = line.strip().split(',')
    year = int(fields[0])
    month = int(fields[1])
    day = int(fields[2])
    cost = float(fields[3])

    line_date = date(year, month, day)

    #Finding the lines within the start and end date
    if startDate <= line_date <= endDate:
        if month != current_month:
            print "%s.%s.%s" % (year, month, day)
            current_month = month

        print_cost = int(cost / 100)
        print "%02d: %s" % (print_num,  "*" * print_cost)

        new_cost += cost
        print_num += 1 
```

# asp.net-mvc-3 - CS0103：当前上下文中不存在名称“ViewBag”

> ID：10622036
> 
> 赞同：0
> 
> 时间：2012-05-16T15:45:14.167
> 
> 标签：asp.net-mvc-3, c#-4.0

> **可能重复：**
> [从 db 加载 Razor 视图，但 ViewBag 已损坏](https://stackoverflow.com/questions/5159314/load-razor-view-from-db-but-viewbag-is-broken)

我有一个 MVC3 应用程序。我为它添加了许多视图。我添加了另一个视图。试图在浏览器中查看它，我得到这个错误：

CS0103：当前上下文中不存在名称“ViewBag”

我在整个应用程序中使用 ViewBag。这是剃刀视图代码：

```
 @{
       ViewBag.Title = "Index";
    }

   <h2>Index</h2> 
```

这是我的控制器代码：

```
 public ActionResult Index()
    {
        ViewBag.Title = "Order Details Page";
        return View();
    } 
```

我错过了什么非常简单的步骤？谢谢

# java - ColdFusion - java 对象方法调用

> ID：10622037
> 
> 赞同：1
> 
> 时间：2012-05-16T15:45:14.200
> 
> 标签：java, coldfusion

我正在尝试从我的服务器上获取数据源列表（是的，我是服务器所有者……这不是黑客攻击）。

我想我通过举两个例子混淆了这个问题——所以我用一个例子和堆栈跟踪来编辑帖子。

**代码**

```
// Create Data Source Object
admin = new cfide.adminapi.Administrator();
admin.login("admin","[password]");

dbserv = createobject("java","coldfusion.server.ServiceFactory").getDatasourceService();
dblist = dbserv.getDatasources(); 
writedump(dblist); 
```

**错误信息**

```
The error occurred in C:\wwwroot\[path]\[file].cfm: line 6
4 : 
5 :     dbserv = createobject("java","coldfusion.server.ServiceFactory").getDatasourceService();
6 :     dblist = dbserv.getDatasources(); 
7 :     writedump(dblist);
8 : </cfscript> 
```

**堆栈跟踪：**

```
Check the ColdFusion documentation to verify that you are using the correct syntax.
Search the Knowledge Base to find a solution to your problem.
Browser     Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0
Remote Address      127.0.0.1
Referrer    
Date/Time       17-May-12 09:08 AM
Stack Trace
 at cf[file]2ecfm302094979.runPage(C:\wwwroot\[path]\[file].cfm:6)

coldfusion.security.SecurityManager$UnauthenticatedCredentialsException
at coldfusion.security.SecurityManager.authenticateAdmin(SecurityManager.java:1958)
at coldfusion.sql.Executive.getDatasources(Executive.java:96)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at coldfusion.runtime.StructBean.invoke(StructBean.java:508)
at coldfusion.runtime.CfJspPage._invoke(CfJspPage.java:2393)
at cf[file]2ecfm302094979.runPage(C:\wwwroot\[path]\[file].cfm:6)
at coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:231)
at coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:416)
at coldfusion.filter.CfincludeFilter.invoke(CfincludeFilter.java:65)
at coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:381)
at coldfusion.filter.RequestMonitorFilter.invoke(RequestMonitorFilter.java:48)
at coldfusion.filter.MonitoringFilter.invoke(MonitoringFilter.java:40)
at coldfusion.filter.PathFilter.invoke(PathFilter.java:94)
at coldfusion.filter.LicenseFilter.invoke(LicenseFilter.java:27)
at coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:70)
at coldfusion.filter.BrowserDebugFilter.invoke(BrowserDebugFilter.java:79)
at coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28)
at coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:38)
at coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:46)
at coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38)
at coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)
at coldfusion.filter.CachingFilter.invoke(CachingFilter.java:62)
at coldfusion.CfmServlet.service(CfmServlet.java:200)
at coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89)
at jrun.servlet.FilterChain.doFilter(FilterChain.java:86)
at coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42)
at coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46)
at jrun.servlet.FilterChain.doFilter(FilterChain.java:94)
at jrun.servlet.FilterChain.service(FilterChain.java:101)
at jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:106)
at jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)
at jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:286)
at jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543)
at jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:203)
at jrunx.scheduler.ThreadPool$DownstreamMetrics.invokeRunnable(ThreadPool.java:320)
at jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)
at jrunx.scheduler.ThreadPool$UpstreamMetrics.invokeRunnable(ThreadPool.java:266)
at jrunx.scheduler.WorkerThread.run(WorkerThread.java:66)

Debugging Information
ColdFusion Server Developer     9,0,1,274733
Template    [path]/[file].cfm
Time Stamp  17-May-12 09:08 AM
Locale  English (US)
User Agent  Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0
Remote IP   127.0.0.1
Host Name   127.0.0.1

Execution Time

top level (16ms) C:\wwwroot\[path]\[file].cfm
  · arrowtop level (0ms) CFC[ C:\wwwroot\CFIDE\adminapi\administrator.cfc | login(admin, [password]) ] from C:\wwwroot\CFIDE\adminapi\administrator.cfc @ line 3

(46 ms) STARTUP, PARSING, COMPILING, LOADING, & SHUTDOWN
(62 ms) TOTAL EXECUTION TIME
red = over 250 ms execution time

Exceptions

09:08:11.011 - coldfusion.security.SecurityManager$UnauthenticatedCredentialsException - in C:\wwwroot\[path]\[file].cfm : line 6 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:17:31.127

```
dbserv = createobject("java","coldfusion.server.ServiceFactory").getDatasourceService();
dblist = dbserv.getDatasources(); 
writedump(dblist); 
```

这适用于 ColdFusion。如果您遇到安全凭证异常，那么您需要以管理员身份登录

```
admin = new cfide.adminapi.Administrator();
admin.login("password","admin"); 
```

以下代码将不起作用

```
dbserv2 = createobject("java","coldfusion.server.DataSourceService");
dblist2 = dbserv2.getDatasources(); 
```

并且没有找到正确的投掷方法。主要是因为DataSourceService是一个java接口，没有实现这个方法。它由Executive类实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-06T22:43:42.917

对于可能在这篇文章中发生的其他人，另一种不需要使用 CF 管理员密码进行身份验证的方法是使用 DataSourceService 的 getNames() 函数而不是 getDatasources。它返回在服务器上注册的所有数据源名称的数组。

```
<cfscript>
    dbserv3 = createobject("java","coldfusion.server.ServiceFactory").getDataSourceService();
    dblist3 = dbserv3.getNames();
</cfscript> 
```

这适用于 CF11

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T16:08:12.973

如果你转储你的 dbserv2 变量，你会发现它不是一个对象，它是一个 Java 接口，它不能被实例化。

要执行您想要的操作，您需要从服务工厂请求数据源服务。

```
<cfscript>
    dbserv2 = createobject("java","coldfusion.server.ServiceFactory").getDataSourceService();

    dblist2 = dbserv2.getDatasources();
</cfscript> 
```

# c# - 在模型中使用枚举时，实体框架 v5 候选版本会引发异常

> ID：10622039
> 
> 赞同：4
> 
> 时间：2012-05-16T15:45:21.343
> 
> 标签：c#, entity-framework, exception, entity-framework-5

[根据此处的公告，](http://blogs.msdn.com/b/adonet/archive/2012/05/15/ef5-release-candidate-available-on-nuget.aspx)我正在使用最新的 EF v5 候选版本。我的模型通过 EntityTypeConfiguration 使用映射文件...

当我尝试用枚举（drop+recreate db）替换模型上的字符串属性时，我得到了这个异常：

```
System.NotSupportedException was unhandled by user code
  Message=The enum or spatial property 'Category' on type 'Vehicle' cannot be mapped. Use DbModelBuilderVersion 'V5_0' or later to map enum or spatial properties.
  Source=EntityFramework
  StackTrace:
       at System.Data.Entity.ModelConfiguration.Mappers.PropertyFilter.ValidatePropertiesForModelVersion(Type type, IEnumerable`1 explicitlyMappedProperties)
       at System.Data.Entity.ModelConfiguration.Mappers.PropertyFilter.GetProperties(Type type, Boolean declaredOnly, IEnumerable`1 explicitlyMappedProperties, IEnumerable`1 knownTypes)
       at System.Data.Entity.ModelConfiguration.Mappers.TypeMapper.MapStructuralElements[TStructuralTypeConfiguration](Type type, ICollection`1 annotations, Action`2 propertyMappingAction, Boolean mapDeclaredPropertiesOnly, Func`1 structuralTypeConfiguration)
       at System.Data.Entity.ModelConfiguration.Mappers.TypeMapper.MapEntityType(Type type)
       at System.Data.Entity.DbModelBuilder.<>c__DisplayClass7.<MapTypes>b__1(Type type)
       at System.Linq.Enumerable.WhereListIterator`1.MoveNext()
       at System.Data.Entity.ModelConfiguration.Utilities.IEnumerableExtensions.Each[T](IEnumerable`1 ts, Action`1 action)
       at System.Data.Entity.DbModelBuilder.MapTypes(EdmModel model)
       at System.Data.Entity.DbModelBuilder.Build(DbProviderManifest providerManifest, DbProviderInfo providerInfo)
       at System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection)
       at System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext)
       at System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input)
       at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
       at System.Data.Entity.Internal.InternalContext.Initialize()
       at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
       at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
       at System.Data.Entity.Internal.Linq.InternalSet`1.GetEnumerator()
       at System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator()
       at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
       at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
       at WebApp.Controllers.VehiclesController.Get() in C:\WebApp\Controllers\VehiclesController.cs:line 35
       at lambda_method(Closure , Object , Object[] )
       at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
       at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.Execute(HttpControllerContext controllerContext, IDictionary`2 arguments)
       at System.Web.Http.Controllers.ApiControllerActionInvoker.<>c__DisplayClass2.<InvokeActionAsync>b__0()
       at System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
  InnerException: 
```

然后我尝试用 MyAppDbContext 装饰我的`[DbModelBuilderVersion(DbModelBuilderVersion.Latest)]`并得到同样的错误......最后我试过`[DbModelBuilderVersion(DbModelBuilderVersion.V5_0)]`了，我得到了另一个例外：

```
System.Data.MetadataException was unhandled by user code
  Message=Schema specified is not valid. Errors: 
(2,9) : warning 0005: Could not find schema information for the attribute 'Namespace'.
(2,41) : warning 0005: Could not find schema information for the attribute 'Alias'.
(2,54) : error 0005: The 'http://schemas.microsoft.com/ado/2009/02/edm/annotation:UseStrongSpatialTypes' attribute is not declared.
(2,2) : error 0010: The element Schema in namespace http://schemas.microsoft.com/ado/2009/11/edm was unexpected for the root element. The expected Schema in one of the following namespaces: http://schemas.microsoft.com/ado/2006/04/edm, http://schemas.microsoft.com/ado/2007/05/edm, http://schemas.microsoft.com/ado/2008/09/edm.
  Source=System.Data.Entity
  StackTrace:
       at System.Data.Metadata.Edm.EdmItemCollection.LoadItems(IEnumerable`1 xmlReaders, IEnumerable`1 sourceFilePaths, SchemaDataModelOption dataModelOption, DbProviderManifest providerManifest, ItemCollection itemCollection, Boolean throwOnError)
       at System.Data.Metadata.Edm.EdmItemCollection.Init(IEnumerable`1 xmlReaders, IEnumerable`1 filePaths, Boolean throwOnError)
       at System.Data.Metadata.Edm.EdmItemCollection..ctor(IEnumerable`1 xmlReaders)
       at System.Data.Entity.ModelConfiguration.Edm.EdmModelExtensions.ToEdmItemCollection(EdmModel model)
       at System.Data.Entity.ModelConfiguration.Edm.Db.Mapping.DbDatabaseMappingExtensions.ToMetadataWorkspace(DbDatabaseMapping databaseMapping)
       at System.Data.Entity.Internal.CodeFirstCachedMetadataWorkspace..ctor(DbDatabaseMapping databaseMapping)
       at System.Data.Entity.Infrastructure.DbCompiledModel..ctor(DbModel model)
       at System.Data.Entity.Infrastructure.DbModel.Compile()
       at System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext)
       at System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input)
       at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
       at System.Data.Entity.Internal.InternalContext.Initialize()
       at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
       at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
       at System.Data.Entity.Internal.Linq.InternalSet`1.GetEnumerator()
       at System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator()
       at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
       at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
       at WebApp.Controllers.VehiclesController.Get() in C:\WebApp\Controllers\VehiclesController.cs:line 35
       at lambda_method(Closure , Object , Object[] )
       at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
       at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.Execute(HttpControllerContext controllerContext, IDictionary`2 arguments)
       at System.Web.Http.Controllers.ApiControllerActionInvoker.<>c__DisplayClass2.<InvokeActionAsync>b__0()
       at System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
  InnerException: 
```

我的控制器是一个 ApiController，断线如下所示：

```
var vehicles = _db.Vehicles.ToList(); 
```

顺便说一句，我在 VS 2010 (w/.NET 4) 上使用 ASP.NET MVC 4 beta + Web API。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T16:05:41.933

枚举和所有其他新的 EF 5.0 功能都依赖于 .NET 4.5 (VS11) - 目前都处于测试阶段。如果您在 VS 2010 中运行 EF 5.0，您将获得与 EF 4.3.1 中几乎相同的功能 = 没有枚举。

# hadoop - Hadoop mapreduce 作业中的 JVM 重用

> ID：10622040
> 
> 赞同：1
> 
> 时间：2012-05-16T15:45:25.463
> 
> 标签：hadoop, jvm, mapreduce

我有一个 mapreduce 作业，它将 HDFS 上的一堆文件作为输入并生成一些统计信息。它运行良好，没有问题。但是，当我将 jvm 重用属性“mapred.job.reuse.jvm.num.tasks”设置为“-1”或小整数（例如 5）时，许多映射器失败并显示以下错误消息

*ENOENT：在 org.apache.hadoop.io.SecureIOUtils.createForWrite(SecureIOUtils.java:161) 在 org.apache.hadoop.org.apache.hadoop.io.nativeio.NativeIO.open(Native Method) 没有这样的文件或目录.mapred.TaskLog.writeToIndexFile(TaskLog.java:296) at org.apache.hadoop.mapred.TaskLog.syncLogs(TaskLog.java:369) at org.apache.hadoop.mapred.Child.main(Child.java:229 )*

谁能给我一些关于它发生的原因以及如何解决这个问题的提示。

谢谢，

# php - 带有超链接的 PHP/MySQL 表

> ID：10622046
> 
> 赞同：2
> 
> 时间：2012-05-16T15:45:59.410
> 
> 标签：php, mysql, hyperlink

我有 2 个 PHP 表单。一个显示事件列表，另一个显示每个特定事件的结果。在包含事件列表的页面上，我想要它，以便可以创建超链接来访问每个单独事件的结果。

例如，在“事件”页面上，我单击第 2 行的超链接，然后将我带到包含该特定事件结果的“结果”页面。

任何帮助将不胜感激，因为我对 PHP 非常非常陌生。如果需要任何额外的细节，请随时询问。

谢谢。

编辑：抱歉，我将向您展示到目前为止的事件表单：

```
<?php
mysql_connect('localhost','root','');
mysql_select_db('clubresults') or die( "Unable to select database");
$sql = "SELECT *, DATE_FORMAT(EventDate, '%d/%m/%y') as newdate FROM Events";
$result = mysql_query ($sql);
?>
<table border = 1>
<tr>
<th>Event ID</th>
th>Event Name</th>
<th>Event Date</th>
<th>Location</th>
</tr>
<?php
 while ($row = mysql_fetch_array($result))
{
echo "</td><td>" . $row['EventID'] . "</td><td>" . $row['EventName'] . "</td><td>" . $row['newdate'] . "</td><td>" . $row['Location'] . "</td><tr>";
}
echo "</table>";
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:56:16.447

您不需要两个脚本，而只需要一个：

```
events.php?list
events.php?event=1234 
```

在那里你只需要检查一些东西：

```
$db = new Database(); # simplified

/* show event details if requested */

if (isset($_GET['event']) {
    if ($event = $db->getEventByID($_GET['event'])) {
        printf('<h2>Event: %s</h2>', htmlspecialchars($event->title));
        # ...
    }
}

/* show the list if requested (or show it always, whatever pleases you) */

if (isset($_GET['list']) {
    echo '<table>';
    foreach($db->getEventList() as $event) {
        printf('<tr><td><a href="?event=%d">%s</a></td></tr>'
               , $event->ID, htmlspecialchars($event->title));
    }
    echo '</table>';
} 
```

* * *

**编辑：**正如我在您更新的问题中看到的那样，您应该从那些 oldskool`mysql_*`函数切换到我在示例中概述的类样式，因为它使用起来更简单。这是一个接近您的代码示例：

```
<?php
/**
 * My First PDO Databaseclass
 */
class Database extends PDO
{
    public function __construct()
    {
        $host = 'localhost';
        $name = 'clubresults';
        $user = 'root';
        $pass = NULL;

        parent::__construct("mysql:host=$host;dbname=$name", $user, $pass);
        $this->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        // $this->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    }

    public function getEvents()
    {
        $sql = "SELECT *, DATE_FORMAT(EventDate, '%d/%m/%y') as newdate FROM Events";
        return $this->query($sql, PDO::FETCH_OBJ );
    }

    public function getEventByID($id)
    {
        $sql = sprintf("SELECT * FROM Events WHERE EventID = %d;", $id);
        return $this->query($sql)->fetchObject();
    }
}

$db = new Database();

?>
<table border=1>
    <tr>
        <th>Event ID</th>
        th>Event Name</th>
        <th>Event Date</th>
        <th>Location</th>
    </tr>
<?php
foreach($db->getEvents() as $event)
{
     echo "</td><td>" . $event->EventID . "</td><td>" . $event->EventName . "</td><td>" . $event->newdate . "</td><td>" . $event->Location . "</td><tr>";
}
?>
</table> 
```

# resources - Symfony2 中的路由

> ID：10622048
> 
> 赞同：2
> 
> 时间：2012-05-16T15:46:08.917
> 
> 标签：resources, symfony, routing, requirements

在一些 symfony2 项目中，我有下一个路由定义：

```
MyBundle_Default:
    resource: "routing/default.yml"
    prefix: /{slug}-{resource_id}
    requirements:
        slug: "[a-z\-]+"
        resource_id: "\d+" 
```

但是这个要求是行不通的。例如，如果我在 slug 中有“-”（例如“test-route”），那么 url`/test-route-9`就不起作用了。

这是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:59:33.967

主要是，我认为您的问题来自破折号字符。让我解释。假设输入的 url 是`/test-route-9`. 根据您的要求，匹配的蛞蝓将是`test-route-`因为您的正则表达式指出之间的字符或可以匹配`a-z`的破折号。`-`

正则表达式将匹配它可以匹配的所有内容，因此它将“吃掉”破折号字符。通过“吃掉”它，剩下的只是`9`不正确的，因为路由在匹配该`resource_id`部分之前需要另一个破折号。因此，此 url 不会像您期望的那样匹配。

简单的解决方法是用 a`/`而不是破折号分隔组件，或者更改分隔 slug 的字符以将其与 url 组件分隔符区分开来。

通过更改 url 中的分隔符来修复：

```
prefix: /{slug}/{resource_id}
requirements:
    slug: "[a-z\-]+"
    resource_id: "\d+" 
```

或者：

```
prefix: /{slug}_{resource_id}
requirements:
    slug: "[a-z\-]+"
    resource_id: "\d+" 
```

通过直接更改 slug 的分隔符来修复：

```
prefix: /{slug}-{resource_id}
requirements:
    slug: "[a-z_]+"
    resource_id: "\d+" 
```

我很确定问题来自于此。没有测试任何东西，但值得一试，以确保问题出在破折号分隔符上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:47:44.530

这是一个错字，您将要求放在 hotel_id 上，但在 url resource_id 中定义！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T17:28:20.257

尝试

```
slug: "[a-z\-]+(?<!-)" 
```

这将确保正则表达式与最后一个破折号不匹配，这是 Matts 回答中提到的问题。

我希望这个对你有用 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-16T23:34:53.430

看起来这确实是一个错误。至少在 Symfony 3.4.36 中，一切都按预期工作。

# mongodb - MongoDB 限制集合复制和极高的 CPU 使用率

> ID：10622058
> 
> 赞同：1
> 
> 时间：2012-05-16T15:46:26.793
> 
> 标签：mongodb, replication

运行包含上限集合的副本集是否会出现问题？

出于某种原因，我的副本集上的一个辅助节点会定期以 90% 的 CPU 运行几个小时。

`gdb`几乎每次都显示以下堆栈跟踪：

```
#0  0x00000000008c3e3a in mongo::ps::Rolling::access(unsigned long, short, bool) ()
#1  0x00000000008c3bd6 in mongo::Record::accessed() ()
#2  0x000000000086eb03 in mongo::CoveredIndexMatcher::matches(mongo::BSONObj const&, mongo::DiskLoc const&, mongo::MatchDetails*, bool) ()
#3  0x000000000086ed78 in mongo::CoveredIndexMatcher::matchesCurrent(mongo::Cursor*, mongo::MatchDetails*) ()
#4  0x00000000009794dc in mongo::UpdateOp::next() ()
#5  0x00000000008c9a96 in mongo::QueryPlanSet::Runner::nextOp(mongo::QueryOp&) ()
#6  0x00000000008d9930 in mongo::QueryPlanSet::Runner::next() ()
#7  0x00000000008d9f86 in mongo::QueryPlanSet::Runner::runUntilFirstCompletes() ()
#8  0x00000000008ddc3e in mongo::QueryPlanSet::runOp(mongo::QueryOp&) ()
#9  0x00000000008df5f5 in mongo::MultiPlanScanner::runOpOnce(mongo::QueryOp&) ()
#10 0x00000000008dfaf0 in mongo::MultiCursor::nextClause() ()
#11 0x00000000008e1bcd in mongo::MultiCursor::MultiCursor(char const*, mongo::BSONObj const&, mongo::BSONObj const&, boost::shared_ptr<mongo::MultiCursor::CursorOp>, bool) ()
#12 0x000000000095f542 in mongo::_updateObjects(bool, char const*, mongo::BSONObj const&, mongo::BSONObj, bool, bool, bool, mongo::OpDebug&, mongo::RemoveSaver*) ()
#13 0x00000000009642d5 in mongo::updateObjects(char const*, mongo::BSONObj const&, mongo::BSONObj, bool, bool, bool, mongo::OpDebug&) ()
#14 0x00000000008339cf in mongo::applyOperation_inlock(mongo::BSONObj const&, bool) ()
#15 0x00000000008232cb in mongo::ReplSetImpl::syncApply(mongo::BSONObj const&) ()
#16 0x0000000000826f65 in mongo::ReplSetImpl::syncTail() ()
#17 0x00000000008283e5 in mongo::ReplSetImpl::_syncThread() ()
#18 0x0000000000828438 in mongo::ReplSetImpl::syncThread() ()
#19 0x00000000008288d0 in mongo::startSyncThread() ()
#20 0x0000000000aabd90 in thread_proxy ()
#21 0x00007effd9cd09ca in start_thread () from /lib/libpthread.so.0
#22 0x00007effd927fcdd in clone () from /lib/libc.so.6 
```

是否需要使用一些额外的魔法才能让有上限的收藏品得以复制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:56:17.817

您需要在 _id 上有一个唯一索引才能快速复制（否则它必须对集合上的每个操作进行全表扫描，这就是您在跟踪中看到的内容）。_id 索引不会在上限集合上自动创建。在您的主节点上创建索引，然后您可能想要重新同步您的辅助节点：如果您有非唯一的 _id，它可能会弄乱复制。

确保在 _id 上创建*唯一索引。*如果您创建一个非唯一索引，则很难从中恢复：mongod 通过不让您删除它并且不让您在 _id 上创建任何其他索引来“保护”该索引。

[请参阅http://www.mongodb.org/display/DOCS/Capped+Collections#CappedCollections-UsageandRestrictions](http://www.mongodb.org/display/DOCS/Capped+Collections#CappedCollections-UsageandRestrictions)上的警告。

# javascript - 使用 Javascript 访问父级中的 iframe 变量

> ID：10622061
> 
> 赞同：0
> 
> 时间：2012-05-16T15:46:33.553
> 
> 标签：javascript, variables, iframe

我知道 Stack Overflow 上已经有非常相似的问题，但我已经尝试了很多，但什么也没得到。我正在尝试从子 iframe 中获取一个变量以在父窗口中使用。

在 child.html 头标签中

```
<script type="text/javascript">
    var myVar="1";
</script> 
```

在 parent.html 中

```
<script type="text/javascript">
function load()
{
    var scroll="0"; 
    scroll = window.myIframe.myVar;
    if (scroll == "0") DO SOMETHING;
    else DO SOMETHING ELSE;
}
</script>
<iframe src="child.html" name="myIframe" onload="load()">
<p>Your browser does not support iframes.</p>
</iframe> 
```

而且无论我尝试什么，我都无法滚动以从子 iframe 中获取 myVar 变量。这几乎是 Stack Overflow 和其他论坛上人们认为效果很好的示例的逐字记录；任何想法我做错了什么？

**编辑：** 他们在同一个域上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:41:01.317

当页面在 iframe 中加载时，尝试从内部子项访问 oad()。

添加孩子：

```
<body onload="parent.load()"> 
```

此外，您可以更改代码以传递和获取变量作为 load(prm) 中的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:47:17.517

我离线尝试了您的代码，但在访问时出现“不安全访问”错误

```
window.myFrame 
```

本地页面可能很棘手，但是当我将相同的文件放到网上时，它们运行良好，域和端口匹配。我仍然认为在 iframe 上使用 name="..." 有点奇怪，我会使用 ID，但这似乎不会打扰 chrome，我可以通过父级或子级的 onload 访问该变量。

# java - 如何反序列化我创建的 2 个对象？

> ID：10622062
> 
> 赞同：0
> 
> 时间：2012-05-16T15:46:48.073
> 
> 标签：java, serialization, arraylist, inputstream, deserialization

我在反序列化 2 个对象时遇到问题。这两个对象来自同一个类，但是它们具有不同的参数。这是我编写的代码：

```
 /* Write */
        FileOutputStream out = new FileOutputStream(inventoryList);
        ObjectOutputStream writeinvL = new ObjectOutputStream(out);
        ArrayList<File> Read = new ArrayList<File>();
        for (int i = 0; i < numItems; i++) {
            System.out.print("Enter the item number: ");
            itemNum = input.next();
            System.out.print("Enter the item name: ");
            itemName = input.next();
            System.out.print("Enter the amount in stock: ");
            inStock = input.nextInt();
            writeinvL.writeObject(new Item(itemNum, itemName, inStock));
        }
        writeinvL.close(); 
```

`numitems`是用户想要制作对象的次数。问题来自阅读，我目前有：

```
 ArrayList<Item> array = new ArrayList<Item>();
        FileInputStream in = new FileInputStream(inventoryList);
        ObjectInputStream readIn = new ObjectInputStream(in);

        for (int i = 0; i < numItems; i++) {
            Item inv = (Item) readIn.readObject();
            array.add((Item) readIn.readObject());
        }
        readIn.close();
        for (Item n : array) {
            System.out.println(n);
        } 
```

但我不知道如何从那里继续前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:50:54.173

在第二个代码块中，在 for 循环中，您将 Item 反序列化两次。也就是说，您有两行具有`readIn.readObject()`. 每个对象只应执行一次。

代替：

`array.add((Item) readIn.readObject());`

和

`array.add(inv);`

# php - 无法让徽标出现在正确的位置加上跨浏览器问题

> ID：10622064
> 
> 赞同：2
> 
> 时间：2012-05-16T15:47:06.703
> 
> 标签：php, html, css, wordpress, twitter-bootstrap

我正在使用 Twitter bootstrap wordpress 主题。我希望徽标（人脸图片）出现在博客标题旁边。我已经尝试过绝对定位和相对定位以及其他 css 样式，但是如果不扩展工具栏的高度或无意中影响相邻元素，我就无法让徽标出现在正确的位置。

如何修复 css 以使徽标在所有浏览器中正确显示并且不会无意中影响任何其他元素？

这是 header.php 的源代码，工具栏在正文中生成并位于页面顶部。

```
<div class="container-fluid nav-container">
                        <nav role="navigation"><img style="z-index: 10; position:absolute; margin-left: -235px" src="http://blog.freeteacher.co.uk/wp-content/themes/wordpress-bootstrap-V2.1/images/logo_small.png">
                            <a class="brand" id="logo" title="Fun Learning for Children | Resources for Parents and Teachers" href="http://blog.freeteacher.co.uk">FreeTeacher – Blog</a>

                            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </a>

                            <div class="nav-collapse">
                                <ul id="menu-main" class="nav"><li id="menu-item-8" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://blog.freeteacher.co.uk/about/">About</a></li> 
```

```
 </nav>

                                                    <form class="navbar-search pull-right" role="search" method="get" id="searchform" action="http://blog.freeteacher.co.uk/">
                            <input name="s" id="s" type="text" class="search-query placeholder" placeholder="Search">
                        </form>

                    </div> 
```

这是 css 文件的链接，它只是 twitter 引导 css [http://blog.freeteacher.co.uk/wp-content/themes/wordpress-bootstrap-V2.1/css/bootstrap.min.css](http://blog.freeteacher.co.uk/wp-content/themes/wordpress-bootstrap-V2.1/css/bootstrap.min.css)

另外 - 这是正在呈现的页面

[http://blog.freeteacher.co.uk/news/getting-to-know-each-other/](http://blog.freeteacher.co.uk/news/getting-to-know-each-other/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:47:16.157

根据我在 Firebug 中的测试，如果您将`<img>`元素的内联样式从更改为`margin-left:-235px;`，`left:35px;`您最终会得到您正在寻找的内容。您可以从 35px 调整该值，以便将其准确地放在您想要的位置。要确定它始终在您想要的位置，也值得设置`top: 0;`，但这可能不是必需的。

作为参考，这是有效的，因为您已经`position:absolute;`设置，这意味着它将参考第一个分配了位置的容器元素定位元素，或者如果（在本例中）没有这样的父元素，则将元素定位为整个文档元素。因此，设置`top:0; left:35px;`告诉浏览器将图像从左上角向下放置 0 像素，向左放置 35 像素。

# javascript - 骨干事件未触发

> ID：10622068
> 
> 赞同：1
> 
> 时间：2012-05-16T15:47:18.853
> 
> 标签：javascript, backbone.js

试图让一个事件在视图中触发，但它似乎没有触发。此视图在另一个视图中运行，因此不确定是否未正确设置事件。

```
var ListRow = Backbone.View.extend(
{
    events:
    {
        'click .button.delete': 'destroy'
    },

    initialize: function()
    {
        _.bindAll(this, 'render', 'remove');
    },

    render: function()
    {
        this.el = _.template($('#tpl-sTableList_' + key + 'Row').html());

        return this;
    },

    destroy: function()
    {
        console.log('remove')
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:58:39.673

你正在覆盖你的`this.el`，你想要做的是

```
render: function ()
{
    var tpl = _.template($('#tpl-sTableList_' + key + 'Row').html());
    this.$el.empty().html(tpl);
    // or if you prefer the old way
    // $(this.el).empty().html(tpl);
    return this;
}, 
```

如果这导致您的 DOM 表示出现问题，其周围有一个额外的包装元素，请尝试以下方法：

```
render: function ()
{
    var tpl = _.template($('#tpl-sTableList_' + key + 'Row').html());
    this.setElement(tpl, true); // this is a Backbone helper 
    return this;
}, 
```

# c# - 单击 MessageBox 后关闭 C# 控制台应用程序

> ID：10622069
> 
> 赞同：0
> 
> 时间：2012-05-16T15:47:19.860
> 
> 标签：c#, console-application, messagebox

我仍在学习 C# 提供的所有很酷的技巧。我有一个消息框警报，在计时器到期后弹出。我想知道在用户单击消息框上的“确定”按钮后是否有可能让控制台应用程序自行终止。如果出现任何情况，控制台应用程序会自动最小化到任务栏。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T15:49:11.153

试一试：

```
// Terminates this process and gives the underlying operating system the specified exit code.
Environment.Exit() 
```

[MSDN：Environment.Exit 方法](http://msdn.microsoft.com/en-us/library/system.environment.exit.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T15:49:36.263

采用`Environment.Exit()`

[http://msdn.microsoft.com/en-us/library/system.environment.exit.aspx](http://msdn.microsoft.com/en-us/library/system.environment.exit.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:52:10.597

这就是我会做的。

将消息框代码包装到 if 语句中

```
 if (MessageBox.Show("error", "error", MessageBoxButtons.OK, MessageBoxIcon.Error) == DialogResult.OK)
    {
        System.Diagnostics.Process.GetProcessesByName("YOURPROCESSNAME.EXE")[0].Kill();
    } 
```

这里没有错误处理，我认为你的控制台作为一个进程运行。如果您在 GetprocessesbyName 中使用控制台正在运行的进程的名称，则可以使用此方法将其关闭。

要公然杀死您的应用程序（停止进程），您还可以使用 Environment.Exit(0) 而不是 Process.Kill()。

# wxpython - 缩进错误 - Python 框架

> ID：10622080
> 
> 赞同：-1
> 
> 时间：2012-05-16T15:48:08.540
> 
> 标签：wxpython

有人能看看这段代码有什么问题吗？一切对我来说都很好，但我得到了缩进错误。

下面的代码创建了一个新框架并包含一个按钮。当单击该按钮时，将触发一个事件并显示有关父项和子项的更多信息。

代码：

```
import wx
class MyApp(wx.App):
    def OnInit(self):
        self.frame = MyFrame(None, title="The Main Frame")
        self.SetTopWindow(self.frame)
        self.frame.Show()
        return True

class MyFrame(wx.Frame):
    def __init__(self, parent, id=wx.ID_ANY, title="", 
                 pos=wx.DefaultPosition, size=wx.DefaultSize,
                 style=wx.DEFAULT_FRAME_STYLE,
                 name="MyFrame"):
        super(MyFrame, self).__init__(parent, id, title,
                                      pos, size, style, name)
        # Attributes
        self.panel = wx.Panel(self)
        self.panel.SetBackgroundColour(wx.BLACK)
        self.button = wx.Button(self.panel,
                                label="Push Me",
                                pos=(50, 50))
        self.btnId = button.GetId()
        # Event Handlers
        self.Bind(wx.EVT_BUTTON, self.OnButton, button)

    def OnButton(self, event):
        """Called when the Button is clicked"""
        print "\nFrame GetChildren:"
        for child in self.GetChildren():
            print "%s" % repr(child)
        print "\nPanel FindWindowById:"
        button = self.panel.FindWindowById(self.btnId)
        print "%s" % repr(button)
        # Change the Button's label
        button.SetLabel("Changed Label")
        print "\nButton GetParent:"
        panel = button.GetParent()
        print "%s" % repr(panel)
        print "\nGet the Application Object:"
        app = wx.GetApp()
        print "%s" % repr(app)
        print "\nGet the Frame from the App:"
        frame = app.GetTopWindow()
        print "%s" % repr(frame)

if __name__ == "__main__":
    app = MyApp(False)
    app.MainLoop() 
```

这是错误：

```
C:\Python27\wx>python frame_new.py
  File "frame_new.py", line 22
    self.btnId = button.GetId()
    ^
IndentationError: unexpected indent 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:47:59.390

在某些可以显示制表符和空格的程序中打开该文件，例如 Windows 上的 Notepad++。然后你可以看看你是否有某种标签/空格组合或其他东西。

# c# - C# DateTimePicker 时间

> ID：10622081
> 
> 赞同：0
> 
> 时间：2012-05-16T15:48:10.523
> 
> 标签：c#, parameters, reportviewer, datetimepicker

我有一个项目要求用户输入（@startdate 和@enddate）

一旦他们选择了日期，他们就必须按下一个按钮。
按下按钮后，它将运行存储过程并在报表查看器中返回结果。

问题是如果我选择同一天（例如 5/14/2012）。

（@startdate 和 @enddate 都是 5/14/12）它不会显示任何信息，因为它设置为 00:00:00。

我希望 datetimepicker2 (@enddate) 的时间戳为 23:59:59。

如何添加 23:59:59 作为 datetimepicker2.value 的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:50:42.347

最简单的方法是将时间添加到 datetimepicker2 值：

```
DateTime value = datetimepicker2.Value.AddSeconds(86399); //86400 is 24 hours 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:53:08.760

你可以在 c# 中使用 DateTime.AddDays(1).AddSeconds(-1) - 但我不建议这样做 - 看起来你应该修改你的 sproc

我假设您在 SQL 过程中执行 BETWEEN ？

我通常使用

```
YourDate >= @StartDate AND YourDate < DATEADD(d, 1, @EndDate) 
```

这是因为在使用时间戳时，您需要选择一整天（例如 5/14/2012 00:00:00 到 5/14/2012 23:59:59，因此使用此语法是有效的，因为它包含所有开始日期的开始和结束日期的结束之间的时间

选择与开始日期不同的结束日期时，您的 sproc 是否有效，即如果您选择 5/14/2012 -> 5/15/2012，它是否返回 2012 年 5 月 15 日的数据？

如果没有，那么您可能会看到这个问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-25T13:39:34.250

**最小值**_ _

> '08/21/2011 00:00:00'

**最大值**_ _

> '2011 年 8 月 21 日 23:59:59'

**用法：**

```
 var firstDate = dtpFrom.Value.Date; //  0:00:00
   var secondDate =  dtpTo.Value.Date.AddSeconds(86400 - 1); //23:59:59 - 86400 is 24 hours
   var list = Services.GetListForFilter(firstDate, secondDate); 
```

# android - Android 如何将 xml 形状设置为小部件背景？

> ID：10622082
> 
> 赞同：1
> 
> 时间：2012-05-16T15:48:10.943
> 
> 标签：android, widget

如何将 xml 中定义的形状设置为小部件中图像的背景？这是我的尝试：

```
RemoteViews views = new RemoteViews(c.getPackageName(), R.layout.widget_layout);

Drawable dr = getResources().getDrawable(R.drawable.widgetshape);  //class cast exception
Bitmap bp = ((BitmapDrawable)dr).getBitmap();
views.setImageViewBitmap(R.id.ImageView01, bp); 
```

这会导致 android.graphics.drawable.GradientDrawable 类强制转换异常。

```
Bitmap icon = BitmapFactory.decodeResource(WidgetConfig.this.getResources(),  R.drawable.widgetshape);
views.setImageViewBitmap(R.id.ImageView01, icon); 
```

这会在线路上引发 NullPointerException 错误`awm.updateAppWidget(awID, views);`。

```
Bitmap bp = ((BitmapDrawable)this.getResources().getDrawable(R.drawable.widgetshape)).getBitmap(); //Class Cast Exception
views.setImageViewBitmap(R.id.ImageView01, bp); 
```

这会导致第一行出现 android.graphics.drawable.GradientDrawable 类强制转换异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:07:02.077

您可以使用`setInt`调用`RemoteViews`实例的方法来做到这一点：

```
views.setInt(R.id.layout, "setBackgroundResource", R.drawable.widgetshape); 
```

为此，您必须在小部件布局（在 xml 中）的（可能是根视图）上`@id`设置一个属性。**`"layout"`**`View`

您还可以从 xml 定义该视图的背景，例如：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout" android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:background="@drawable/widgetshape"> 
```

# c# - 启动线程，此类功能的逻辑？

> ID：10622085
> 
> 赞同：0
> 
> 时间：2012-05-16T15:48:13.037
> 
> 标签：c#, multithreading

我有一个逻辑问题，我不知道如何解决。基本上我有一个基于 numericUpDown 值启动线程的程序，如果用户在 numericUpDown 框中选择 5，则将启动 5 个线程。

问题是用户还有一个列表框，他们可以用信息填写，这将在线程中使用..

所以我希望能够在我的循环中做而不是从 numericUpDown 值循环 5 次是 if; 假设用户在 listBox 中输入 10 个项目，并选择使用 5 个线程。然后我希望所有 listBox 项目都排队，但一次只能运行 5 个。

我将如何做到这一点？

哦，如果重要的话，这就是我开始线程的方式：

```
 Thread thread = new Thread(() => doTask(numeret));
                thread.IsBackground = true;
                thread.Start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:59:08.933

我相信您希望使用 a `ThreadPool`，如此处所述：

[http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)

您需要指定要使用的线程数，然后用于`ThreadPool.QueueUserWorkItem`对任务进行排队。

或者，您可以使用 LinQ 的并行扩展来执行异步任务（与多线程不同） - 并指定 .MaxDegreesOfParalallism() 值（仅设置上限）

```
itemsToProcess.AsParallel().MaxDegreesOfParalallism(numThreads).ForAll(item =>
{
    doTask(item);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:58:28.047

通常，这样的事情是使用*工作线程*完成的。您创建一个工作项列表（= 您的列表框条目）：

```
List<WorkItem> myWorkItems = ...; // contains 10 items 
```

你创建你的线程。但是，您还没有将工作项分配给线程（就像您在示例中所做的那样）：

```
for (int i = 0; i < numberOfThreads; i++) {   // creates 5 threads
    var t = new Thread(doWork);
    t.IsBackground = true;
    t.Start();
} 
```

每个线程运行一个循环，检查新的工作项（线程安全！）并开始工作，直到不再有工作要做：

```
void doWork() {
    while (true) {
        WorkItem item;

        lock(someSharedLockObject) {
            if (myWorkItems.Count == 0)
                break; // no more work to be done
            item = myWorkItems[0];
            myWorkItems.Remove(item);
        }

        doTask(item);
    }
} 
```

* * *

这类似于 .net 框架的[ThreadPool](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)所做的。然而，ThreadPool 被设计为在可以选择线程数作为框架时工作得最好。上面的示例使您可以完全控制线程数（这似乎是您想要的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T16:08:17.080

将列表框中的信息存储在堆栈中（例如）。
然后，在 doTask() 方法中：从堆栈中弹出一个元素，执行这些操作并再次执行此操作，直到堆栈为空。

基本上 ：

```
//Stack containing the info to process
Stack<string> infos = new Stack<string>();

//Method for the thread
void doTask()
{
    while(true)
    {
        string info;
        //Threadsafe access to the stack
        lock (infos.SyncRoot)
        {
            //Exit the thread if no longer info to process
            if (infos.Count == 0) return;

            info = infos.Pop();
        }
        //Do the actual stuff on the info
        __DoStuff(info);
    }
} 
```

# google-maps - 更新 Google Maps API 空闲事件的叠加层

> ID：10622087
> 
> 赞同：1
> 
> 时间：2012-05-16T15:48:19.103
> 
> 标签：google-maps, google-maps-api-3

在地图“空闲”事件处理程序中，我从另一个 API 调用中获取了一些位置数据（坐标等），并将这些坐标放置在叠加层上。当地图首次加载时，一切看起来都很好。但是在初始加载之后，当我拖动地图时，获取更多数据，然后将新数据放在地图上，新数据是偏移的。再次拖动后，最后一次拖动后获取的数据被正确定位，但新数据不是。

似乎定位这些新数据并没有考虑到地图的新边界。我还注意到该事件执行我的代码以异步获取和绘制新数据。这可能有关系吗？

# java - Android：在文件中定位（类似于 C++ 中的 fseek）？

> ID：10622092
> 
> 赞同：2
> 
> 时间：2012-05-16T15:48:29.900
> 
> 标签：java, android, file, http

我正在尝试从使用 httpClient 从互联网打开的 html 文件中读取一些数据。我正在使用`readLine()`循环中的函数进行阅读。

我要阅读的行从第 500 行开始。有没有更快的方法来定位文件？

问题是读取所有不必要的数据需要太长时间（几乎 10 秒才能完成全部加载）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:54:46.403

在 InputStream 中，您可以使用跳过多个字符`skip(long n)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:20:20.040

您必须越过 499`getline()`个行终止字符才能到达第 500 行（如以`'\n'`,`'\r'`或终止的行`"\r\n"`）。

线的定义是基本问题。由于使用上述终止符（大多数语言中的标准定义）终止行，因此对于任何跳过`n`行的算法，该算法都需要发现`n`行终止符。这意味着需要检查输入流`byte/char`以`byte/char`发现终止符，从而得出结论，虽然您只能跳过字符，但**不能**跳过**行**。这里跳过意味着不需要检查数据（无论是在您的代码中还是在库代码中），例如。随机访问文件类型`seek()`或文件流`skip(n)`操作。

因此，您可能需要重新考虑您的数据结构，或者是否需要跳过行。

# asp.net - 在 Razor 中使用三元运算符输出包含空格的字符串

> ID：10622099
> 
> 赞同：9
> 
> 时间：2012-05-16T15:49:00.287
> 
> 标签：asp.net, razor, ternary-operator

我正在尝试在 Razor 中使用三元运算符，类似于[这个问题](https://stackoverflow.com/questions/4091831/how-to-use-ternary-operator-in-razor-specifically-on-html-attributes)，但我想要输出的内容包含空格。这段代码

```
@(selectedGoal == null ? "" : "value=" + selectedGoal.Name) 
```

应该产生

```
value="Goal 3" 
```

因为 selectedGoal.Name 的值是“目标 3”。相反，我得到

```
value="Goal" 3 
```

这不好。我尝试了一堆不同的转义引号、@ 符号和没有 @ 符号的组合，我就是无法让它工作，即

```
@(selectedGoal == null ? "" : "value=" + "selectedGoal.Name")
@(selectedGoal == null ? "" : "value=@selectedGoal.Name") 
```

然后我得到类似的东西

```
value="selectedGoal.Name" 
```

有谁知道这应该怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-16T15:52:17.623

您的 value 属性缺少自己的引号，因此它们会自动添加到空格之前。尝试移动`value`到表达式之外。

```
value="@(selectedGoal == null ? "" : selectedGoal.Name)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T21:07:52.420

关于什么

```
@(selectedGoal == null ? "" : "value=\"" + selectedGoal.Name + \") 
```

或者您可以尝试直接将它们呈现为 HTML 块，使用我 [在 Razor 三元表达式中的 Html 文字上的方法](https://stackoverflow.com/questions/6857204/html-literal-in-razor-ternary-expression/17223692#17223692)

# iphone - UITableViewCellAccessoryCheckmark 的逻辑

> ID：10622102
> 
> 赞同：1
> 
> 时间：2012-05-16T15:49:07.410
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

我想做一个典型的情况：当用户选择任何单元格时，它的附件类型会变成复选标记。只能对一个单元格的附件类型进行复选。然后我想保存在 NSUserDefaults indexPath.row 中，这样我的应用程序就能够知道选择了哪个单元格用户并对选项进行一些更改。所以我写了这个错误的代码：

**didSelectRowAtIndexPath**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // checkedIndexPath is NSIndexPath

    if(self.checkedIndexPath)
    {
        UITableViewCell* uncheckCell = [tableView
                                        cellForRowAtIndexPath:self.checkedIndexPath];
        uncheckCell.accessoryType = UITableViewCellAccessoryNone;
    }
    UITableViewCell* cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.accessoryType = UITableViewCellAccessoryCheckmark;

    self.checkedIndexPath = indexPath;

    [[NSUserDefaults standardUserDefaults]setObject:[NSNumber numberWithInt:self.checkedIndexPath.row]forKey:@"indexpathrow" ];
} 
```

**cellForRowAtIndexPath**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Part of code from cellForRowAtIndexPath

    if(indexPath.row == [[[NSUserDefaults standardUserDefaults]objectForKey:@"indexpathrow"]intValue ])
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
    else 
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }

        return cell;
} 
```

但是，此代码效果不佳。当您打开时`UITableView`，表格中有一个已选择的单元格，当您按下另一个单元格时，有两个`checkmarked`单元格......我该如何改进我的代码还是应该将其全部更改？有什么建议么 ？谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T16:00:46.040

试试这个代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // checkedIndexPath is NSIndexPath
    NSIndexPath *previousSelection = self.checkedIndexPath;
    NSArray *array = nil;
    if (nil != previousSelection) {
        array = [NSArray arrayWithObjects:previousSelection, indexPath, nil];
    } else {
        array = [NSArray arrayWithObject:indexPath];
    }

    self.checkedIndexPath = indexPath;

    [tableView reloadRowsAtIndexPaths:array withRowAnimation: UITableViewRowAnimationNone];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Part of code from cellForRowAtIndexPath
    NSString *cellID = @"CellID";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];
    if (nil == cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellID];
        [cell autorelease];
    }

// some code for initializing cell content
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    if(self.checkedIndexPath != nil && indexPath.row == self.checkedIndexPath.row)
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    } else {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }

    return cell;
} 
```

# ruby-on-rails - Rails 引擎中的身份验证和授权

> ID：10622105
> 
> 赞同：3
> 
> 时间：2012-05-16T15:49:19.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, rails-engines

我正在尝试从 Rails 应用程序中提取博客模型和控制器。我有一个名为 Rails 引擎`Blog`，我将把它安装`/blog`在主应用程序的路径上。

在我的`Blog`引擎中，我有一个`PostsController`正常的 CRUD 操作。问题是我想使用主要 rails 应用程序中的身份验证方法。

```
# app/controllers/blog/posts_controller.rb
module Blog
  class PostsController < ApplicationController
    # Basically I want to have access to the require_login method
    # from the main app.
    before_filter :require_login, only: [:new, :create]

    def new
      @post = Post.new
      authorize! :create, Post
    end
  end
end 
```

而且我需要访问 User 模型，以便我可以检查 CanCan 的授权能力。例如，只允许管理员创建博客文章。

```
# app/models/blog/ability.rb
module Blog
  class Ability
    include CanCan::Ability

    def initialize(user)
      user ||= User.new

      # The user.admin? method is defined on the User class
      # from the main rails app.
      if user.admin?
        can [:create, :update], Post
      end
    end
  end
end 
```

有没有办法完成这些事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T07:01:41.337

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

> 看看我是如何解决类似问题的 - [How get Devise's current_user method in Rails Engine](https://stackoverflow.com/questions/10668874/how-get-devises-current-user-method-in-rails-engine)

〜回答每个[wildDAlex](https://stackoverflow.com/users/834851/wilddalex)

> 或者这个 2，[如何从 rails 3.1 引擎调用父应用程序的辅助方法](https://stackoverflow.com/questions/6845747/how-to-call-a-parent-apps-helper-method-from-a-rails-3-1-engine)

〜回答每个[westonplatter](https://stackoverflow.com/users/665578/westonplatter)

# jsf-2 - 我怎样才能充分利用 JSF 2.0 框架？

> ID：10622106
> 
> 赞同：0
> 
> 时间：2012-05-16T15:49:20.313
> 
> 标签：jsf-2

目前我只有一个控制器 AppController ( *SessionScope - ManagedBean* ) 来处理我系统的所有请求和逻辑，但不知何故这似乎不正确。我想让这个项目尽可能地模块化，这样它就可以很容易维护。

我已经阅读了一些关于*Dependency Injection*的内容，但我就是无法让它发挥作用，也就是说，我不知道 bean 的“范围”有什么问题。例如，我有我的 AppController 和我的用户 bean，但我无法使用来自用户 bean 的 AppController（尽管我尝试过依赖注入）。我认为用户的逻辑（编辑名称、设置关系等）必须由 Users bean 处理，但现在这些任务由 AppController 处理，这似乎不正确。

问题是，有没有什么好的教程可以让我学习如何正确使用 JSF 2.0 框架？我的目标是使 AppController 尽可能轻。我找到了几个教程，但它们似乎更侧重于旧版本的 JSF，或者我碰巧不理解它们（也许它们太技术性了，我不知道）。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:07:53.073

至于具体问题，您不应该有一个托管 bean 作为前端控制器来处理所有请求。JSF 自己`FacesServlet`的应该这样做。`<h:form>`普遍的共识是每个你都有一个请求/视图范围的托管 bean 。以及一个或两个会话范围的 bean，用于表示登录用户及其设置，如语言环境（如果有）。您可以为应用程序范围的数据（例如下拉常量）提供应用程序范围的 bean。

至于具体问题（这是相当主观的，并且在这里根据定义偏离主题，但是 ala），实际上并没有一个简单的教程。这是一个了解您在做什么以及代码在做什么并最终使用正确的工具来完成工作的问题。为了了解这一点，您必须从头到尾阅读一本自尊的 JSF2 书籍，并在简单的项目中玩很多。JSF 不是 1 天就能学会和完全理解的。我花了几年时间。[您可以在我们的 JSF wiki 页面](https://stackoverflow.com/tags/jsf/info)中找到有用的链接/参考。

# xslt - xslt 聚合总和

> ID：10622109
> 
> 赞同：0
> 
> 时间：2012-05-16T15:49:46.217
> 
> 标签：xslt

我想做一些值的总和并将其作为数据的行或列返回。

以下面的 xml 为例：

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<root>

   <default0>

    <Group>
      <groupEntry>
        <Day>Mon</Day>
        <ID>111</ID>
        <Number>-3</Number>
      </groupEntry>
    </Group>
    <Group>
      <groupEntry>
        <Day>Tue</Day>
        <ID>222</ID>
        <Number>4</Number>
      </groupEntry>
    </Group>
    <Group>
      <groupEntry>
        <Day>Tue</Day>
        <ID>444</ID>
        <Number>5</Number>
      </groupEntry>
      <Breakdown>
        <Details>
          <Day>Tue</Day>
          <ID>444</ID>
          <Number>-3</Number>
        </Details>
        <Details>
          <Day>Tue</Day>
          <ID>444</ID>
          <Number>8</Number>
        </Details>
      </Breakdown>
    </Group>
    <Group>
      <groupEntry>
        <Day>Fri</Day>
        <ID>333</ID>
        <Number>-3</Number>
      </groupEntry>
    </Group>

  </default0>

</root> 
```

我下面的 xslt ：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="text"/>

  <xsl:template match="/">

    <xsl:text>ID,Day,Number</xsl:text>

    <xsl:apply-templates/>

  </xsl:template>

  <xsl:template match="groupEntry|Details">

      <xsl:text>&#10;</xsl:text>
      <xsl:value-of select="ID"/>
      <xsl:text>,</xsl:text>
      <xsl:value-of select="Day"/>
      <xsl:text>,</xsl:text>
    <xsl:value-of select="Number"/>

  </xsl:template>

  <xsl:template match="text()"/>

</xsl:stylesheet> 
```

返回此结果：

```
ID,Day,Number 
111,Mon,-3 
222,Tue,4 
444,Tue,5 
444,Tue,-3 
444,Tue,8 
333,Fri,-3 
```

但是我想按天获取总数并将其报告为以下两个选项之一

1.  创建 1 个摘要行，例如：

    ```
     ID,Day,Number
      Mon,Mon,-3
      111,Mon,-3
      Tue,Tue,9
      222,Tue,4
      444,Tue,5
      444,Tue,-3
      444,Tue,8
      Fri,Fri,-3
      333,Fri,-3 
    ```

2.  创建一个额外的列：

    ```
     ID,Day,Number,TotalNumber

      111,Mon,-3,-3
      222,Tue,4,9
      444,Tue,5,9
      444,Tue,-3,9
      444,Tue,8,9
      333,Fri,-3,-3 
    ```

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:56:17.917

在任一选项中，您可能需要定义一个键来按**天对元素进行分组**

```
<xsl:key name="days" match="groupEntry|Details" use="Day"/> 
```

然后你可以像这样添加你的额外列

```
<xsl:value-of select="sum(key('days', Day)/Number)"/> 
```

这是第一个选项的完整 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:key name="days" match="groupEntry|Details" use="Day"/>

   <xsl:output method="text"/>

   <xsl:template match="/">
      <xsl:text>ID,Day,Number,TotalNumber</xsl:text>
      <xsl:apply-templates/>
   </xsl:template>

   <xsl:template match="groupEntry|Details">
      <xsl:text>&#13;</xsl:text>
      <xsl:value-of select="ID"/>
      <xsl:text>,</xsl:text>
      <xsl:value-of select="Day"/>
      <xsl:text>,</xsl:text>
      <xsl:value-of select="Number"/>
      <xsl:text>,</xsl:text>
      <xsl:value-of select="sum(key('days', Day)/Number)"/>
   </xsl:template>

   <xsl:template match="text()"/>
</xsl:stylesheet> 
```

这应该输出以下结果

```
ID,Day,Number,TotalNumber
111,Mon,-3,-3
222,Tue,4,14
444,Tue,5,14
444,Tue,-3,14
444,Tue,8,14
333,Fri,-3,-3 
```

在第二个选项中，您希望为特定**Day**的第一次出现添加一个总行。您可以通过检查当前元素是否是当天键中的第一个元素来执行此操作

```
<xsl:if test="generate-id() = generate-id(key('days', Day)[1])"> 
```

这是第二种情况的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:key name="days" match="groupEntry|Details" use="Day"/>

   <xsl:output method="text"/>

   <xsl:template match="/">
      <xsl:text>ID,Day,Number</xsl:text>
      <xsl:apply-templates/>
   </xsl:template>

   <xsl:template match="groupEntry|Details">
      <xsl:if test="generate-id() = generate-id(key('days', Day)[1])">
         <xsl:text>&#13;</xsl:text>
         <xsl:value-of select="Day"/>
         <xsl:text>,</xsl:text>
         <xsl:value-of select="Day"/>
         <xsl:text>,</xsl:text>
         <xsl:value-of select="sum(key('days', Day)/Number)"/>
      </xsl:if>
      <xsl:text>&#13;</xsl:text>
      <xsl:value-of select="ID"/>
      <xsl:text>,</xsl:text>
      <xsl:value-of select="Day"/>
      <xsl:text>,</xsl:text>
      <xsl:value-of select="Number"/>
   </xsl:template>

   <xsl:template match="text()"/>
</xsl:stylesheet> 
```

这应该输出以下结果

```
ID,Day,Number
Mon,Mon,-3
111,Mon,-3
Tue,Tue,14
222,Tue,4
444,Tue,5
444,Tue,-3
444,Tue,8
Fri,Fri,-3
333,Fri,-3 
```

# java - 可以使用 jcodemodel 修改现有的类文件

> ID：10622113
> 
> 赞同：1
> 
> 时间：2012-05-16T15:49:52.427
> 
> 标签：java, code-generation, codegen

是否可以使用 jcodemodel 修改现有的类文件？

如果是这样，可以给我一些参考吗？

请回复我需要它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T13:45:13.697

我遇到了同样的问题，找不到解决方案。我现在改用[JavaParser](https://code.google.com/p/javaparser/wiki/UsingThisParser#Sample_Usage)。它可以加载文件或创建新文件。

# git - 从所有分支和标签中完全删除 git 存储库对象并将更改推送到远程

> ID：10622115
> 
> 赞同：4
> 
> 时间：2012-05-16T15:49:58.510
> 
> 标签：git, indexing, repository, history

我们做了一个客户迁移到一个网站。我们的代码在一个单独的分支上，然后合并到 master 和 release 中。从那以后，Master 也针对其他功能进行了多次分支。所有这些分支使存储库比我在网上找到的示例稍微复杂一些。

我们现在意识到客户的原始媒体——主要是图像和一个大的 CSV 文件——也被检入了 Git。虽然它只有 12MB 左右，但删除它有几个原因（尤其是客户端的文件名包含非 ASCII 字符，这与我们在 OSX 上的 Vagrant box 的共享文件夹玩得很糟糕。）这是存储库的大小细分：

```
$ du --max-depth 1 -h
12M  ./.git
13M  ./modules
2.0M ./themes
27M  . 
```

尽管二进制文件现在显然存在于多个分支上，但据我所知，我应该能够执行以下操作来删除两个二进制文件，然后删除与它们对应的存储库对象：

```
$ git filter-branch --tree-filter "git rm -rf --ignore-unmatch modules/custom/mymigration/data/photos/*" # Did this with and without "HEAD" argument
[snip lots of output]
$ git reflog expire --expire=now --all 
$ git gc --aggressive --prune=now 
```

但是，我仍然有一个大的 .git 子文件夹：

```
$ du --max-depth 1 -h
12M  ./.git
1.4M ./modules
2.0M ./themes
15M  . 
```

最大的文件是 .git/objects/pack/pack-....pack 。当我为此验证 .idx 文件时：

```
$ git verify-pack -v .git/objects/pack/pack-53c8077d0590dabcf5366589c3d6594768637f5e.idx | sort -k 3 -n | tail -n 5 
```

我得到一长串对象。如果我将它通过管道传输到 rev-list，并为我的迁移数据目录使用 grep：

```
$ for i in `git verify-pack -v .git/objects/pack/pack-53c8077d0590dabcf5366589c3d6594768637f5e.idx | sort -k 3 -n | tail -n 5 | awk '{print $1}'`;    do 
    git rev-list --objects --all | \
      grep $i | \
      grep modules/custom/mymigration/data
  done
47846536601f0bc3a31093c88768b522a5500c96 modules/custom/mymigration/data/photos/Turkey.jpg
b920e36357d855352f4fdb31c17772d21c01304d modules/custom/mymigration/data/photos/Burger_Top.JPG 
```

然后你可以看到照片仍然在包文件中。

*   如果我将此存储库推送到（完全空的）远程，然后*将该*远程克隆到其他完全不同的地方，仍然有 12MB 的包文件。
*   在本地克隆这个存储库`git clone file://path/to/old-repos new-repos`也有同样的效果：更糟糕的是，我所有的原始分支都消失了（正如你可能期望的那样），所以我只有 master。

我能做些什么来摆脱那些包装好的物品吗？它们的持续存在是否表明它们仍然与某个地方的某个 git commit 对象相关联？我试过了`repack`，`prune-packed`但没有任何改变。

此外，如果我只是“摆脱它们”，如果我没有正确完成第一点，有什么可能会破坏吗？如果删除了 git commit 仍然引用的文件对象会发生什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T10:16:02.627

以下工作可重复地将存储库减少到大约 2.5MB .git 和总共 5.8MB。它包括上面@jamessan 提出的建议。

这将从所有分支中删除对象并将这些删除推送到远程存储库。据我所知，该远程存储库完全没有这些对象（由于存储库大小急剧下降。）

```
# Configure the repository to push all existing branches & tags
# when none are explicitly specified
git config --add remote.origin.push '+refs/tags/*:refs/tags/*'
git config --add remote.origin.push '+refs/heads/*:refs/heads/*'

# Make sure all local branches exist, so they get filtered
for remote_branch in `git branch --all | grep -v HEAD | sed -e 's/\*//'`; do local_branch=`echo $remote_branch | sed -e 's!remotes/origin/!!'`; git checkout $local_branch; done

# Prevent git <1.7.7.1 from complaining about dirty working directory
git update-index -q --ignore-submodules --refresh

# Do the filtering across --all branches and rewrite tags
# Note that this will necessarily remove signatures on tags
git filter-branch -f --tree-filter "git rm -rf --ignore-unmatch modules/custom/mymigration/data/photos/*" --tag-name-filter cat -- --all

# Remove the backed-up refs
git for-each-ref --format="%(refname)" refs/original/ | xargs -n 1 git update-ref -d

# Clear out the reflog and garbage-collect
git reflog expire --expire=now --all
git gc --aggressive --prune=now

# Push all changes to origin - pushes tags and branches
git push origin 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T16:02:02.037

git-filter-branch 手册页的底部描述了缩小存储库的两种方法。

简单的方法是再次克隆存储库

```
git clone file:///path/to/repo 
```

更复杂的方法类似于您所做的（reflog expire, gc），但您省略了第一步

> 删除 git-filter-branch 备份的原始 refs： git for-each-ref --format="%(refname)" refs/original/ | xargs -n 1 git update-ref -d

# ios - Xcode 4项目模板脚本执行

> ID：10622119
> 
> 赞同：2
> 
> 时间：2012-05-16T15:50:27.997
> 
> 标签：ios, xcode, macos, cocoa, project-template

是否可以在自定义 Xcode 4 项目文件模板中执行脚本？我不是指目标构建阶段中的运行脚本，而是在选择模板并准备项目本身后执行的脚本。

我正在尝试创建一个强制添加（数量）git 子模块的模板。为此，我设想运行一个脚本，一旦用户从我的自定义模板创建项目文件，该脚本就会执行。到目前为止，我的研究并没有成功找到使用模板后运行脚本的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:22:08.240

您可以尝试将 .gitmodules 添加到项目模板中……不知道这是否会在 Xcode 的模板下运行。

如果失败了，那么，不——但您可以将 .gitmodules 文件添加到目录（或编写脚本），尽管没有 ide 的直接支持，该过程应该快速且轻松。

您甚至可以采取中间路线，其中项目包含一个脚本 (PROJECT_ROOT/config_modules.sh) 以将这些模块添加到该目录的 repo 中。一旦创建了所有这些项目，然后创建另一个脚本来搜索、执行和删除 config_modules.sh。

# css - 在 CSS 文件中使用 !Important 是个好主意吗

> ID：10622122
> 
> 赞同：1
> 
> 时间：2012-05-16T15:50:40.273
> 
> 标签：css

我当前的项目中有很多 CSS 文件，而且这些文件中的很多样式都有 !important 除了它们之外。我内心的一种感觉告诉我，这不是一件好事。有人可以阐明当我们使用 !important 时会发生什么以及它是否是一个好主意。

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T15:52:25.600

`!important`表示规则不能被覆盖。请注意，用户样式表使用`!important`将覆盖作者样式表。

[http://www.w3.org/TR/CSS21/cascade.html#important-rules](http://www.w3.org/TR/CSS21/cascade.html#important-rules)

这是好是坏真的取决于使用情况。我自己不经常使用这个关键字。一个例子是它允许我覆盖从 3rd 方小部件/插件中提取的样式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T16:03:18.953

`!important`给出样式优先级，并将确保（在可能的情况下）它是使用的样式。如果您正在使用`!important`选择器是因为您的选择器不够具体，或者没有经过深思熟虑，那么这不是他们应该使用的方式。对我来说，当你可能不得不处理你无法控制的样式时，它更有用。

为了说明，您可能想要使用 `!important，您可能有两个样式表。一个“全局”，您可以控制，一个“本地”，您可以控制。

在全局样式表中，您可能有以下内容：

```
p span {
    color: black;
} 
```

在本地，您可以通过执行以下操作来覆盖它：

```
p span {
    color: red;
} 
```

这可能有效，但是如果在全局样式之前包含本地样式，则会发生冲突并且全局样式将优先。为了克服这个问题，你可以这样做：

```
color: red!important; 
```

如果您可以更具体地使用选择器，最好这样做，而不是使用`!important`.

全局，所有跨度都是黑色的：

```
span {
    color: black;
} 
```

在本地，段落内的跨度是红色的：

```
p span {
    color: red;
} 
```

使用`!important`真的没有什么“错误”，我想这是一个案例，但希望上面解释了如何充分利用它们。

关于 CSS 技巧的“[当使用 !important 是正确的选择时](http://css-tricks.com/when-using-important-is-the-right-choice/)”的更多讨论。

# c# - 使用反射发现对象属性列表

> ID：10622123
> 
> 赞同：0
> 
> 时间：2012-05-16T15:50:40.770
> 
> 标签：c#, reflection

我已经尝试了 2 天来找到可行的方法，但我发现的所有示例都不起作用。

我需要的是能够从实例化类中获取公共属性列表。

例如：

MyClass 具有以下定义：

```
public class MyClassSample : MyDC
{
  public string ReportNumber = "";
  public string ReportDate = "";

  public MyClassSample()
  {
  }
} 
```

我需要的是一种从上面的类中简单地返回一个包含 ["ReportNumber"]["ReportDate"] 的数组的方法。

这是我最近的尝试，只是将属性名称添加到字符串中：

```
 string cMMT = "";

    Type t = atype.GetType();
    PropertyInfo[] props = t.GetProperties();
    List<string> propNames = new List<string>();
    foreach (PropertyInfo prp in props)
    {
        cMMT = cMMT + prp.Name + "\n";
    } 
```

我想我错过了一些基本而简单的东西，但由于某种原因，我现在看不到它。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T15:52:14.103

那些不是属性。那些是领域。

所以你可以这样做：

```
FieldInfo[] fields = t.GetFields(); 
```

或者您可以将它们更改为属性：

```
public string ReportNumber { get; set; }
public string ReportDate { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:00:18.143

改变这个

```
public string ReportNumber = "";
public string ReportDate = ""; 
```

对此

```
public string ReportNumber { get; set; }
public string ReportDate { get; set; } 
```

接着，

```
List<string> propNames = new List<string>();

foreach (var info in atype.GetType().GetProperties())
{
   propNames.Add(info.Name);
} 
```

结果将是一个列表（propName），其中有两个位置与您的属性名称

# c++ - 为什么模板 typedef 在 C++（不是 C++11）中是一个问题

> ID：10622127
> 
> 赞同：5
> 
> 时间：2012-05-16T15:50:54.487
> 
> 标签：c++, templates, typedef

在[这个问题](https://stackoverflow.com/q/2795023/368599)中，OP 要求提供模板 typedef 的解决方案，这在 C++ 中是不可能的。OP 自己也提出了一个解决方案，但不喜欢它：

```
template<size_t N, size_t M>
class Matrix {
    // ....
};

// Problem - will not compile
typedef Matrix<N,1> Vector<N>;

// Solution
template <int N>
class Vector: public Matrix<N,1>
{ }; 
```

我的问题是，与 OP 的解决方案相比，该`Helper::type` [解决方案](https://stackoverflow.com/a/2795024/368599)给我们带来了哪些优势（假设这些类永远不会被基指针或`new`'d 这样使用）？一个空的类在发布时不应该带来任何开销（或者是吗？）。我能看到的唯一缺点是，在调试版本中，您必须在调试时扩展基类。

**编辑：**除了选定的答案，请参阅@Dani 的答案，他建议继承的版本需要定义构造函数，这是一个额外的不便。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T15:56:04.270

这是因为构造函数不是继承的（并且在 c++11 中不是默认的）。因此，您必须复制所有非默认构造，即使您只是在实现中调用基类构造函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T15:58:38.660

的重点`typedef`是定义一个类型别名。子类不是类型别名——它是一种新类型。

例如，想象一些库函数

```
template<size_t N, size_t M>
Matrix<N, M> * createMatrix(); 
```

现在使用辅助类型

```
Vector<3>::type * var = createMatrix<3, 1>(); 
```

是合法的。
有继承

```
Vector<3> * var = createMatrix<3, 1>(); 
```

不是。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T16:04:01.370

除了每个人都喜欢语法（可能是主观的）之外，主要区别在于，通过继承，vector 实际上是另一种衰减为矩阵的类型，而使用包含 typedef 的帮助器时，vector 是矩阵的别名（至少对于什么部分专业化适用）。

差异需要向量重新定义构造函数（不是继承的），或者在模板专业化定义的操作的情况下存在一些潜在的陷阱（使用 typedef，它们永远不会被视为“不同的”）

# entity-framework - 在不同客户端之间重用代码优先模型

> ID：10622128
> 
> 赞同：0
> 
> 时间：2012-05-16T15:50:56.497
> 
> 标签：entity-framework, ef-code-first

我有一个在项目中使用的代码优先模型。但现在我有其他项目将使用相同的模型。当然，我不想在所有项目中复制模型，所以我的想法是将模型封装在单独的程序集中。到目前为止一切顺利，直到您还想“增强”某些项目的模型，例如添加具有某些特定参数的 ctor。

使用部分类不起作用，因为它需要是同一个程序集的一部分。使用继承也不起作用，因为模型的实体具有对其他实体的 ICollection，那么如何使其工作？我是否朝着正确的方向前进？

不确定我很清楚，所以请耐心等待；-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:10:53.120

如果您需要共享模型，则确实需要将其放置在单独的程序集中，并且该程序集必须包含您在所有项目中所需的一切。因此，如果您需要其他构造函数，则必须将该构造函数添加到共享程序集中。如果您不想影响依赖于该程序集的其他项目，则必须增加共享程序集的版本（并使用强名称）。

# objective-c - 仅替换运营商图标的 iOS 自定义状态栏

> ID：10622129
> 
> 赞同：2
> 
> 时间：2012-05-16T15:51:08.433
> 
> 标签：objective-c, ios, uikit, statusbar, uiapplication

我正在为 iOS 创建一个僵尸准备应用程序，我认为拥有一个类似于飞行模式的“天启模式”会很酷，因为它将状态栏载体图标替换为一个小飞机，除了可能有一个小蘑菇云还是什么？

天启模式只是我的应用程序中的一个布尔标志，它禁用所有数据连接所需的功能（仅在应用程序内，不使用任何私有 API 或任何东西......）。如果可能的话，我仍然希望有时钟、电池寿命、蓝牙图标以及在正常操作期间弹出到状态栏上的任何其他内容。

我正在查看[MTStatusBarOverlay](https://github.com/myell0w/MTStatusBarOverlay)库来实现此功能。相关（[此处为 Stackoverflow 帖子）](https://stackoverflow.com/questions/2833724/adding-view-on-statusbar-in-iphone)。我知道我的应用程序有可能因此而被拒绝样式，但我的想法是我不想偏离常态并交叉手指Apple不会因此而跳到我身上。

我的问题是

1.  如何复制时钟和电池寿命图标？我需要挂钩事件还是可以添加 UI 元素。
2.  我会以正确的方式解决这个问题吗？在普通状态栏上用蘑菇云覆盖载体图标而不是完全替换状态栏会更好吗？我担心可变长度的载体图标......

当然选项 3 是我完全忘记了这个想法，并为这种模式制作了某种不同的背景或其他东西，但这似乎很蹩脚：P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:24:28.433

不久前我尝试过类似的事情。我创建了一个接受触摸事件的状态栏覆盖，但没有阻止状态栏接收触摸，这对于应用商店的接受至关重要。
您可以查看[我的问题和答案](https://stackoverflow.com/questions/5448613/passing-touch-events-to-ios-status-bar)，但请记住，它可能不再是实际的了，它在 iOS4 中运行良好，但从未在 5 上测试过。不过值得一试。

至于覆盖层本身，我建议将所有内容都覆盖到时钟，并让其余部分保持透明，它应该可以完成这项工作。

# actionscript-3 - AS3 中的警报/对话框

> ID：10622132
> 
> 赞同：0
> 
> 时间：2012-05-16T15:51:19.680
> 
> 标签：actionscript-3, apache-flex, flash-builder

我正在使用 Adob​​e flash Builder 开发一个应用程序，一旦触发特定事件，它应该会弹出一个警报窗口。关闭警报框时需要调用另一个事件。但我在 mx.controls 库中看不到 Alert 类。似乎该类（存在于 AS2 中）已从 AS3 中删除。有没有其他方法可以完成相同的功能？

谢谢，普利特什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:39:04.120

你需要为你的警报控件定义 closeHandler 。从此处查看 ActionScript 3.0 参考 API [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Alert.html#show](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Alert.html#show) ()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:08:22.700

使用外部接口。

```
import flash.external.ExternalInterface;

// tell flash what javascript function to listen for, and what flash function to call in response
ExternalInterace.addCallback('onAlertWindowClosed', onPopupClosed);

function openPopUp():void
{
    // this conditional prevents errors when running local (yes, this needs uploaded to work)
    if(ExternalInterface.available)
    {
        // this calls a javascript function in your html
        ExternalInterface.call('myJavascriptAlertFuntion');
    }
}

// this function is called from the javascript callback **onAlertWindowClosed**
function onPopupClosed():void
{
    // do something when your popup closes
} 
```

在html中：

```
<script type="text/javscript>

// this chunk gets the flash object so you can call its methods
function getFlashMovieObject(movieName)
{
    if (window.document[movieName])
    {
        return window.document[movieName];
    }

    if (navigator.appName.indexOf("Microsoft Internet") == -1)
    {
        if (document.embeds && document.embeds[movieName])

        return document.embeds[movieName];
    }
    else
    {
        return document.getElementById(movieName);
    }
}

// function that is called from flash
function myJavascriptAlertFuntion()
{
    alert("Hey!  Yeah you there!");
}

// call this when you want to tell flash you are closing your popup
function tellFlashMyPopupWindowClosed()
{
    // **flashContainer** should be replaced by the name parameter of your flash embed object
    var flashMovie = getFlashMovieObject("flashContainer");
    flashMovie.onAlertWindowClosed();
}

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T15:17:09.650

要在使用 MXML 和 AS3 的 Mobile 项目中弹出警报，您需要基于 Sparks 组件中的 SkinnablePopUpContainer 创建一个组件。（因为方便地排除了简单的警报。）

我在这里的文档中学习了很多关于 SkinnablePopUpContainer 的阅读：

[Spark SkinnablePopUpContainer 容器](http://help.adobe.com/en_US/flex/using/WS67cd75b2532ad652-1abb110512d5bda966d-8000.html)

总结一下，我在 MXML 中创建了一个以 SkinnablePopUpContainer 作为基类的组件。在我想要添加弹出窗口的视图中，我在 Actionscript 中创建了该类的新实例。我监听组件中的按钮将在用户响应时触发的自定义事件。要显示新的弹出组件，只需调用静态方法 open();。open() 方法需要一个父容器，无论弹出窗口是否应该是模态的。模态的意思是组件下的任何东西都不能接收用户输入。

```
var alert:SkinnablePopUpContainer = new SkinnablePopUpContainer;
alert.addEventListener( "OK", onOK );
alert.open( this, true );
function onOK(e:Event):void{ trace("User said OK") }; 
```

稍后我会尽可能提供一些示例文件。

# extjs - Extjs4，甚至未选中的网格列的摘要值（选中）

> ID：10622134
> 
> 赞同：0
> 
> 时间：2012-05-16T15:51:26.853
> 
> 标签：extjs, extjs4

我需要对网格列求和。但我不知道如何获取所有行，甚至没有选择一个。

只选我做，

```
(controller)
var sum =0;
var grid = this.getMyGrid().getSelectionModel.getSelection();

Ext.each(grid,function(item)){
  sum += item.data.qty;
} 
```

但是我应该如何获取包含未选择行的网格数据呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:09:39.007

```
this.myGrid().store.each(function() {
...
}) 
```

# platform-builder - Windows CE 6.0 平台构建器将错误的 bib 文件复制到 fmerge 的 postproc 目录中

> ID：10622137
> 
> 赞同：2
> 
> 时间：2012-05-16T15:51:48.370
> 
> 标签：platform-builder

我正在尝试将 dll 添加到我的 nk.bin 文件中。

我遇到的问题是，被复制到 postproc 目录并用于 fmerge 的 platform.bib 文件与我在平台中修改的 platform.bib 文件不同。

postproc 何时/如何将 bib 文件复制到 postproc 目录中。

任何帮助都感激不尽。

谢谢，史蒂夫

# php - 将内容加载到应用程序中的最佳方式

> ID：10622139
> 
> 赞同：2
> 
> 时间：2012-05-16T15:51:56.280
> 
> 标签：php, javascript, mysql, html, database

我有一个项目，我需要将数据库中的文本写入 HTML5 画布/Javascript 应用程序。

为了选择这个内容，我指定了一个属性“reference”，我可以在其中使用内容 id 询问数据库，例如：index.php?reference=exercise1。

我使用 AJAX 是因为我需要将文本内容放入 Javascript 变量中，以便在画布上写入数据。我的解决方案正在运行，但我需要从 Javascript document.URL 而不是 PHP $_GET 获取参考属性值。

这是代码：

```
var url = decodeURIComponent(document.URL);
var attr = "reference";
var attrPos = url.lastIndexOf(attr);
var referencePos = attrPos + attr.length + 1;
var reference = url.substr(referencePos,url.length); 
```

我正在做的事情对我来说似乎不是干净的方式。

首先， ?reference= 应该与 PHP $_GET 一起使用，而不是被 Javascript 破解。

然后，如果我的应用程序位于名为“reference”的文件夹中，我必须使用 lastIndexOf() 而不是 search() 方法以获得良好的价值。

不过，如果我的项目位于名为“reference”的文件夹中，其 URI 类似于 localhost/reference/projectfolder/index.php，并且在数据库中有一个名为“projectfolder”的引用，即使我没有要求，它也会加载内容index.php?reference=项目文件夹

根据您的经验，在我的情况下最好的解决方案是什么：能够获取 PHP/MySQL 数据以与 Javascript 一起使用。Ajax 似乎是最好的方法，但你可以看到它并不干净，至少我的解决方案是这样。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:03:29.863

> 不过，如果我的项目位于名为“reference”的文件夹中，其 URI 类似于 localhost/reference/projectfolder/index.php，并且在数据库中有一个名为“projectfolder”的引用，即使我没有要求，它也会加载内容index.php?reference=项目文件夹

如果您希望仅在请求 index.php 时文档为空，请检查是否设置了 $_GET["reference"] 然后返回一个空正文。

> 根据您的经验，在我的情况下最好的解决方案是什么：能够获取 PHP/MySQL 数据以与 Javascript 一起使用。Ajax 似乎是最好的方法，但你可以看到它并不干净，至少我的解决方案是这样。

检查这个关于如何在你的身体中返回 JSON 的要点[https://gist.github.com/2627924](https://gist.github.com/2627924)

# android - Android开发：安装错误：INSTALL_FAILED_MISSING_SHARED_LIBRARY

> ID：10622144
> 
> 赞同：2
> 
> 时间：2012-05-16T15:52:11.007
> 
> 标签：android

我正在尝试为 Android 开发一个应用程序。当我尝试运行它时，我在控制台中得到了这个：

```
[2012-05-16 11:49:52 - LDAPLookUp] 
        Installation error: INSTALL_FAILED_MISSING_SHARED_LIBRARY

[2012-05-16 11:49:52 - LDAPLookUp] Please check logcat output for more details.

[2012-05-16 11:49:52 - LDAPLookUp] Launch canceled! 
```

而且，在 LogCat 中，有这样的：

```
05-16 11:49:51.169: E/PackageManager(91): 
    Package com.ericbrian.ldaplookup requires unavailable shared library 
    com.unboundid.android.ldap.*; failing!

05-16 11:49:51.169: W/PackageManager(91): 
    Package couldn't be installed in /data/app/com.ericbrian.ldaplookup-2.apk 
```

在引用的库中，我有`unboundid-ldapsdk-se.jar`.

在清单中，我有：

```
<application
    android:icon="@drawable/logo"
    android:label="@string/app_name"
    android:logo="@drawable/logo" >
    <uses-library
        android:name="com.unboundid.android.ldap.*" />

... snip ...
</application> 
```

我缺少什么让这个工作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:13:51.330

> 我缺少什么让这个工作？

您需要删除该`<uses-library>`元素。这不适用于第三方 JAR。

您还需要确保您的第三方 JAR 在您的项目`libs/`目录中，并在需要时创建该目录。这将自动将 JAR 添加到您的构建路径中，因此您可以摆脱手动将其添加到“引用库”中所做的任何事情。

# javascript - offset().top 在 IE7 中不起作用？

> ID：10622150
> 
> 赞同：2
> 
> 时间：2012-05-16T15:52:26.233
> 
> 标签：javascript, internet-explorer-7, cross-browser

在过去的几个小时里，我一直在努力解决一个 JS 问题，我想知道你们中的一位伟大的程序员是否可以找到解决方案。

这是我的一段代码：

```
var topfooter = $('footer').offset().top;
$('#skylandscape').css('height', newlandscapeheight);
console.log('New landscape height is ' + newlandscapeheight + ' (topfooter top is '+ topfooter +')'); 
```

这几乎适用于我使用的所有浏览器（最新的 chrome、safari、ff、opera）和 IE8+，但不适用于 IE7。有谁看到可能是什么问题以及如何解决它？

该代码获取页脚的总高度（100% 宽度的图像），并使用页脚未使用的任何空间设置页面第一个块的高度。

提前谢谢了。纪尧姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:00:20.933

您是否使用 ID 为“footer”的 div，如果是，请执行以下操作：

```
var topfooter = $('#footer').offset().top; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:56:24.927

尝试：

```
var topfooter = document.getElementById('footer').offsetTop; 
```

# objective-c - 无法访问 NSDictionary 值

> ID：10622154
> 
> 赞同：0
> 
> 时间：2012-05-16T15:52:29.680
> 
> 标签：objective-c, ios5

我有一个名为equiposDic 的NSDictionary，我需要使用另一个NSDictionary 中的值（值来自 ）检索它，但我无法访问它：

```
 equiposDic = [[NSDictionary alloc] initWithObjectsAndKeys:@"FC Barcelona Regal", @"49", @"Real Madrid", @"50", @"Caja Laboral", @"51", @"Banca Cívica", @"52", @"Gescrap Bizkaia",@"53", @"Valencia Basket", @"13",@"Lucentum Alicante",@"54",@"Lagun Aro GBC",@"4",@"CAI Zaragoza", @"55", @"Assignia Manresa",@"2", @"FIATC Mutua Joventut",@"8",@"Unicaja",@"56",@"Gran Canaria",@"57",@"Mad-Croc Fuenlabrada",@"9",@"Blusens Monbus",@"59",@"UCAM Murcia",@"58", @"Asefa Estudiantes",@"60", @"Blancos de Rueda Valladolid", @"11", nil];

    NSDictionary *posicion = [[NSDictionary alloc] initWithDictionary: [ligaArray objectAtIndex:indexPath.row]];

    NSString *equipo = [posicion valueForKey:@"idp"];

    NSString *idp = [posicion valueForKey:@"idp"];

    NSLog(@"equipo %@", [equiposDic objectForKey:@"49"]); 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:28:41.667

ligaArray 在上下文中可用吗？

我解释说，您的 ligaArray var 在您期望的时候可能不可用。您必须使用保留将 ligaArray 存储在您的班级中

。H ：

```
@interface MyClass {
    NSMutableArray *ligaArray;
} 
```

.m：

```
-viewDidLoad{
    [super viewDidLoad];
    ligaArray = [[NSMutableArray array] retain];
    // OR
    ligaArray = [[NSMutableArray alloc] init];
}

-dealloc{
    [ligaArray release];
} 
```

如果不是这种情况，请尝试一下。如果已经是这种情况，请检查保留/释放调用。这样，您就不会在 tableview 方法中丢失对 ligaArray 值的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:56:45.650

如果 posicion 是 NSDictionary，则必须使用 objectForKey 才能获取字符串。

```
NSString *idp = [posicion objectForKey:@"idp"]; 
```

# android - Android意图，打开下一个时关闭上一个

> ID：10622163
> 
> 赞同：1
> 
> 时间：2012-05-16T15:53:17.410
> 
> 标签：android, android-intent, android-activity

我正在为 Android 制作一个应用程序，我需要一些帮助。我有三个活动**A**，**B**和**C**。当我在**A**并开始**B**时，我不想完成（）**A**因为我希望选择返回。但是如果我从**B**开始**C**我想完成**A**和**B**。我见过一些使用 startActivityForResult 的例子，但我从来没有掌握它的窍门。任何人都有一些简单的示例可以解释，所以我可以在我的代码中使用它？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:11:13.133

对于第一部分，当您将表单 B 移动到 C 时，您想从 A 完成此 StartActivityforResult 的 A 和 B，当您想从 B 移动到 C 完成 B 时，它将自动触发 A 的 onActivityResult，您可以在那里启动活动 C

这是 StartActivityforResult 的示例

[http://saiful103a.wordpress.com/2011/03/19/android-startactivity-and-startactivityforresult/](http://saiful103a.wordpress.com/2011/03/19/android-startactivity-and-startactivityforresult/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:10:02.340

```
Intent intent = new Intent( this, C.class );
intent.setFlags( Intent.FLAG_ACTIVITY_CLEAR_TOP );
startActivity( intent ); 
```

使用该标志清除活动堆栈，因此当您按下 C 上的后退按钮时，您将移至主屏幕

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T16:18:18.853

> 我有三个意图 A、B 和 C。

为了清楚起见，我认为您的意思是`Activity`s （您不能“进入” an `Intent`）。

> 当我在 A 并开始 B 时，我不想完成（） A，因为我希望选择返回。但是如果我从 B 开始 CI 想要完成 A 和 B。

你想做的是`startActivityForResult(new Intent(this, C.class), requestCode)`从`Activity B`. 然后在 中`Activity B`，您覆盖B （因此，从 backstack 中弹出），或者您什么也不做（因此，留在 中`onActivityResult()`）。`finish()``B``B`

这是您需要做的：

1.  在你的类中定义一个`public static final`请求代码（这被认为是好的做法）。您将使用此代码来区分`startActivityForResult()`您可能进行的不同调用。

    ```
    public static final int C_START_CODE = 0; 
    ```

2.  从`Activity B`, 呼叫,

    startActivityForRequest(C.class, C_START_CODE);

    然后，通过如下`B`覆盖来捕获结果，`onActivityResult()`

    ```
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        switch(requestCode) {
            case C_START_CODE:
                if (resultCode == RESULT_OK) {
                    // Add code here as necessary before finishing B
                    //   and backing out of the Activity to A.
                    finish();
                }
            default: 
                break;
        }
    } 
    ```

3.  最后，当您决定完成时`Activity C`，请确保区分这两种情况：

    *   如果您想完成`Activity B` **AND** `Activity C`，请致电

        ```
        setResult(RESULT_OK);
        finish(); 
        ```

    *   如果您只想完成`Activity C`，请致电

        ```
        setResult(RESULT_CANCELED);
        finish(); 
        ```

# c# - 分页 SQL 查询

> ID：10622165
> 
> 赞同：0
> 
> 时间：2012-05-16T15:53:17.903
> 
> 标签：c#, winforms, sql-server-2008

在 winform 上，在数据网格中，我显示了从数据库中选择的大约 100k 行。显示所有这些记录需要很长时间。有没有办法让选择查询更快或者加载前 200 条记录。然后如果用户单击下一步按钮，将显示接下来的 200 条记录。这可能吗？我知道 mysql 有 LIMIT，但我需要为 sql-server 2008 工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:03:33.530

有一个方法，但它并不漂亮。如果您使用的是实体框架，则可以编写 LINQ 对结果进行分页，例如：

```
var books= context.Books.OrderBy(b => b.Title).Skip(300).Take(100); 
```

如果您在其上使用 SQL Profiler，生成的 SQL 将如下所示，您可以将其用作构建您自己的语句的指南：

```
SELECT TOP (200) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Title] AS [Title]
FROM
(
    SELECT 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Title] AS [Title],
        row_number() OVER (ORDER BY [Extent1].[Title] ASC) AS [row_number]
    FROM [dbo].[Books] AS [Extent1]
)  AS [Extent1]
WHERE
    [Extent1].[row_number] > 100
ORDER BY
    [Extent1].[Title] ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:05:34.683

**`Stored Proc`**

```
Alter Proc Test
@PageNumber int,
@PageSize int

as

create table #t
(
    id int
)
insert into #t(id)values(1)
insert into #t(id)values(2)
insert into #t(id)values(3)
insert into #t(id)values(4)
insert into #t(id)values(5)
insert into #t(id)values(6)
insert into #t(id)values(7)
insert into #t(id)values(8)
insert into #t(id)values(9)
insert into #t(id)values(10)

declare @StartIndex int
declare @EndIndex int
declare @PageSizeIndex int

Set @StartIndex = ((@PageNumber - 1) * @PageSize) + 1
Set @EndIndex = @PageNumber * @PageSize

Select RowID, ID From
(
    Select ROW_NUMBER() Over(Order by id) as RowID, ID From #t
)K
Where K.RowID >= @StartIndex and k.RowID <= @EndIndex

Drop table #t 
```

* * *

## 测试目的数据测试

```
Test 1, 3 
```

* * *

除了上面的Stored Proc之外，您还可以实现`Indexes`快速搜索，或者您可以使用它**`SQL Profiler`**来检查执行时间延迟的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:56:09.543

有几种方法可以做到这一点，通常使用 CTE 或嵌套查询和`row_number()`. 请参阅例如 [如何在 SQL Server 2008 中进行分页](https://stackoverflow.com/questions/2244322/how-to-do-pagination-in-sql-server-2008)

在 SQL 2012 中，现在终于可以在单个查询中执行此操作，即`OFFSET xxx ROWS FETCH NEXT XXX ROWS ONLY`- 请参阅[SQL Server 中的行偏移量](https://stackoverflow.com/questions/187998/row-offset-in-sql-server)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T06:19:08.970

您可以使用带有 Row_Number 排名函数的公用表表达式。这是一个例子：

```
CREATE PROCEDURE PagingSample
  @PageNumber int,
  @PageSize int
AS

WITH Results AS (
  SELECT 
    ROW_NUMBER() OVER(ORDER BY MR.MRN ASC) As RowNumber,
    MR.MRN
FROM 
  dbo.SomeTable MR WITH (NOLOCK)    
)

SELECT 
  R.RowNumber,
  R.MRN
FROM
  Results R
WHERE
  RowNumber > (@PageNumber * @PageSize) - @PageSize 
  AND RowNumber < (@PageNumber * @PageSize) + 1 
```

现在将页码和页面大小传递给存储过程，如下所示：

```
Exec PagingSample @PageNumber = 3, @PageSize = 100 
```

你会得到记录 201 到 300

# django - Amazon-SQS + Django-Celery 创建了数千个队列（每条消息一个队列）

> ID：10622169
> 
> 赞同：6
> 
> 时间：2012-05-16T15:53:24.983
> 
> 标签：django, rabbitmq, celery, django-celery, amazon-sqs

我正在寻找一个开始解决此问题的地方。

这是在 settings.py 中所做的更改

```
#Rabbit MQ settings
#===============================================================================
# BROKER_HOST = "localhost"
# BROKER_PORT = 5672
# BROKER_USER = "vei_0"
# BROKER_PASSWORD = "1234"
# BROKER_VHOST = "videoencoder"
#===============================================================================

DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
AWS_ACCESS_KEY_ID = "xxxx"
AWS_SECRET_ACCESS_KEY = "xxxx"
AWS_STORAGE_BUCKET_NAME = "images"
#Amazon SQS settings.
BROKER_TRANSPORT = 'sqs'
BROKER_TRANSPORT_OPTIONS = {
    'region': 'us-east-1',
}
BROKER_USER = AWS_ACCESS_KEY_ID
BROKER_PASSWORD = AWS_SECRET_ACCESS_KEY
CELERY_DEFAULT_QUEUE = 'hardwaretaskqueue'
CELERY_QUEUES = {
    CELERY_DEFAULT_QUEUE: {
        'exchange': CELERY_DEFAULT_QUEUE,
        'binding_key': CELERY_DEFAULT_QUEUE,
    }
}

CELERYD_CONCURRENCY = 2
CELERY_TASK_RESULT_EXPIRES = 120
CELERY_RESULT_BACKEND = "amqp" 
```

我今天早上醒来，收到一条来自亚马逊的消息，上面写着“你的意思是要排队吗？”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T19:23:10.513

使用时`CELERY_RESULT_BACKEND = 'amqp'`会为每个结果消息创建一个新队列。为避免这种情况，您可以简单地使用其他`CELERY_RESULT_BACKEND`数据库或 Redis。或者，如果您对结果不感兴趣，则可以设置`CELERY_IGNORE_RESULT = True`.

# php - 使用 SIMPLEPIE 获取 Facebook 粉丝页面 RSS

> ID：10622171
> 
> 赞同：1
> 
> 时间：2012-05-16T15:53:31.897
> 
> 标签：php, facebook, rss, facebook-page, simplepie

我正在使用 simplepie 来获取我的 facebook fanpage 的 rss，它工作正常，除了它通过 RSS 为我用来获取所有行为更新的页面重复插入该 facebook fanpage 上的所有帖子多次图像直接在脸书上。

不知道如何使用 simplepie API 做一个正确的 jsfiddle，所以除了我当前的代码之外，不能向您展示太多。

```
<?php

// Make sure SimplePie is included. You may need to change this to match the location of simplepie.inc.
require_once('php/simplepie.inc');

// We'll process this feed with all of the default options.
$feed = new SimplePie();

// Set which feed to process.
$feed->set_feed_url('http://www.facebook.com/feeds/page.php?format=rss20&id=242469109162998');

// Run SimplePie.
$feed->init();

// This makes sure that the content is sent to the browser as text/html and the UTF-8 character set (since we didn't change it).
$feed->handle_content_type();

// Let's begin our XHTML webpage code.  The DOCTYPE is supposed to be the very first thing, so we'll keep it on the same line as the closing-PHP tag.
?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>Sample SimplePie Page</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
</head>
<body>

<div id="getall">

<?php
/*
Here, we'll loop through all of the items in the feed, and $item represents the current item in the loop.
*/
foreach ($feed->get_items() as $item):
?>

    <div class="item">
        <h2><a href="<?php echo $item->get_permalink(); ?>"><?php echo $item->get_title(); ?></a></h2>
        <p><?php echo $item->get_description(); ?></p>
        <p><small>Posted on <?php echo $item->get_date('j F Y | g:i a'); ?></small></p>
    </div>

<?php endforeach; ?>

</div> 
```

大家有什么想说的吗？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:41:54.747

为什么不使用 php sdk 并通过 api 调用获取提要？

```
# After de facebook object instantiation
$feedArray = $facebook->api('pageID/feed'); 
```

然后，您只需将 foreach 应用于 $feedArray 并根据需要显示它。

# c# - 对象引用未设置为不存在 NULL 字段的对象实例

> ID：10622173
> 
> 赞同：0
> 
> 时间：2012-05-16T15:53:46.437
> 
> 标签：c#, sql, asp.net-mvc, linq

我的 CMS 3.0 项目中有以下代码

调查控制器.cs

```
private BuisnessSurveyEntities bsdb = new BuisnessSurveyEntities();

[HttpGet]
public ViewResult BizSurveyCDF()
{
  var bquery = from b in bsdb.form_field
               where b.ID != null        // int
               where b.DATID != null     // int
               where b.CAPTION != null   // string
               select new {b.ID, b.DATID, b.CAPTION};

  ViewData["BZQUESTIONS"] = new SelectList(bquery,"ID","DATID","CAPTION");
  return View();
} 
```

form_field.cs 模型

```
public virtual string ID {GET; SET;}
public virtual string DATID
{
  get{return _dATID;}
  set{_dATID = value;}
}
private string _dATID = "\'\'"; 
```

BizSurveyCDF.cshtml

```
@model IEnumberable<CMS.Models.form_field>

<table>
  <tr>
    <th>
      DATID
    </th>
    <th>
      CAPTION
    </th>
  </tr>
  @foreach(var item in Model)
  {
    <tr>
      <td>
        @Html.DisplayFor(modelItem => item.DATID)
      </td>
      <td>
        @Html.DisplayFor(modelItem => item.CAPTION)
      </td>
    </tr>
  }
</table> 
```

现在我的问题是当我运行它时出现以下错误：

你调用的对象是空的。

并且违规行是@foreach（模型中的变量项）

我浏览了整个表并用某些东西替换了所有 NULL 值，但仍然收到此错误。到目前为止，我读过的所有内容都说它存在 NULL 值的问题，但正如我已经说过的，我已经摆脱了所有的 null 值。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:06:19.340

尝试这样的事情，将模型传递给视图并且不要在查询中创建新对象，选择完整的 form_field 对象。

```
public ViewResult BizSurveyCDF()
{
  var bquery = from b in bsdb.form_field
               where b.ID != null        // int
               where b.DATID != null     // int
               where b.CAPTION != null   // string
               select b;

  //ViewData["BZQUESTIONS"] = new SelectList(bquery,"ID","DATID","CAPTION");
  return View(bquery);
} 
```

您没有在视图中使用 ViewData["BZQUESTIONS"]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:45:50.130

您收到异常的原因可能是您的查询实际上没有返回任何值。因此，在作为 SelectList 源传递之前，请确保查询包含至少一个元素。例如，尝试按照这些行进行操作：

```
if(bquery.Any())
 {
   ViewData["BZQUESTIONS"] = new SelectList(bquery,"ID","DATID","CAPTION");
 }
else
{
   // Add code here to address there being of no element returned by the query 
}   
return View(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T22:36:38.500

1.  确保实际代码包含 IEnumerable 而不是 IEnumberable

2.  int 是一个值类型，因此永远不会为空。这些 where 子句是不必要的。

3.  您正在创建一个匿名对象，因此模型最终不是预期的类型，这就是当您尝试 DivHenr 的解决方案时它失败的原因。不要选择匿名对象。

4.  此外，强制评估您的查询并将其传递给视图方法的模型参数（而不是视图数据）。

您的查询和操作应该是 -

```
 return View(  
       (from b in bsdb.form_field
       where b.CAPTION != null
       select b)
       .ToList() ); 
```

# windows-8 - 为分享/搜索魅力注册听众的正确时间

> ID：10622178
> 
> 赞同：3
> 
> 时间：2012-05-16T15:54:13.140
> 
> 标签：windows-8, windows-runtime

我需要为每个页面注册不同的分享魅力监听器。我有 2 页。我在每一个中添加了以下代码：

```
 DataTransferManager.GetForCurrentView().DataRequested += App_DataRequested; 
```

我在一个页面的构造函数和另一个页面的 UserControl_Loaded 事件中添加了它（第一页没有 UserControl_Loaded 所以我直接将它添加到构造函数）。在第二页尝试加载的那一刻，我得到了异常：

```
WinRT information: An event handler has already been registered
Additional information: A method was called at an unexpected time. 
```

我应该把它放在哪里，什么是“正确”的时间？同样令人困惑的是，我们为每个视图都有不同的 DataTransferManager，但当前只有一个处于活动状态。更重要的是，我注意到，如果你只为第一页添加一个监听器，其他页面无论如何都会共享这个监听器。如果我对所有页面只有一个共享侦听器，在 app.xaml.cs 中注册它是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:37:21.960

我解决此问题的方法是取消注册 onNavigatedfrom 事件中的事件，如下所示：

受保护的覆盖无效 OnNavigatedFrom(NavigationEventArgs e) { DataTransferManager.GetForCurrentView().DataRequested -= App_DataRequested; base.OnNavigatedFrom(e); }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:03:36.903

在构造函数的 BasePage.cs 中，我添加了

```
public BasePage()
{        
    if (!_isListenToDataRequested)
    {
        _isListenToDataRequested = true;

        DataTransferManager manager = DataTransferManager.GetForCurrentView();  
        manager.DataRequested += AppDataRequested;
    }
}

private async void AppDataRequested(DataTransferManager sender, DataRequestedEventArgs args)
{
    IShareable shareable = Frame.Content as IShareable;
    if (shareable != null)
    {
        DataRequestDeferral deferral = args.Request.GetDeferral();

        await Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () => shareable.AppDataRequested(sender, args));

        deferral.Complete();
    }
} 
```

我所有的页面看起来像

```
public sealed partial class ContentPage : IShareable
{
    public void AppDataRequested(DataTransferManager sender, DataRequestedEventArgs args)
    {...}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:47:59.853

我建议在导航事件中执行此操作， OnNavigatingFrom 事件将在您要访问的页面的 OnNavigatingTo 之前触发，因此您不会遇到此问题。

```
protected override Task OnNavigatingTo(WinRTXamlToolkit.Controls.AlternativeNavigationEventArgs e)
{
    DataTransferManager.GetForCurrentView().DataRequested += dataTransfer_DataRequested;
    return base.OnNavigatingTo(e);
}

protected override Task OnNavigatingFrom(WinRTXamlToolkit.Controls.AlternativeNavigatingCancelEventArgs e)
{
    DataTransferManager.GetForCurrentView().DataRequested -= dataTransfer_DataRequested;
    return base.OnNavigatingFrom(e);
}

//Note: This is the WinRT Xaml Toolkit version of the events, but the standard events will work the same way. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T08:58:21.157

**另一个解决方案如下运行**

```
private DataTransferManager dataTransferManager; 
```

**把它放在页面加载事件中**

```
 this.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, new DispatchedHandler(() =>
            {
                this.dataTransferManager = DataTransferManager.GetForCurrentView();
                this.dataTransferManager.DataRequested += new TypedEventHandler<DataTransferManager, DataRequestedEventArgs>(this.OnDataRequested);
            })); 
```

**和**

```
protected override void OnNavigatedFrom(NavigationEventArgs e)
    {
        // Unregister the current page as a share source.
        this.dataTransferManager.DataRequested -=
            new TypedEventHandler<DataTransferManager, DataRequestedEventArgs>
                (this.OnDataRequested);
    } 
```

# git - 如何在 git 历史记录中查找/识别大型提交？

> ID：10622179
> 
> 赞同：515
> 
> 时间：2012-05-16T15:54:14.280
> 
> 标签：git

我有一个 300 MB 的 git 存储库。我当前签出的文件的总大小为 2 MB，其余 git repo 的总大小为 298 MB。这基本上是一个不超过几 MB 的纯代码仓库。

我怀疑有人不小心提交了一些大文件（视频、图像等），然后将它们删除......但不是从 git 中删除，所以历史记录仍然包含无用的大文件。如何在 git 历史记录中找到大文件？有 400 多个提交，因此逐个提交是不切实际的。

**注意**：我的问题***不是关于[如何删除文件](https://stackoverflow.com/questions/2100907/how-to-purge-a-huge-file-from-commits-history-in-git)***，而是如何首先***找到***它。

* * *

## 回答 #1

> 赞同：1122
> 
> 时间：2017-03-02T00:53:13.617

# 超快的外壳单线

此 shell 脚本显示存储库中的所有 blob 对象，从小到大排序。

对于我的示例存储库，它的运行速度比此处找到的其他存储库快约**100 倍。**
在我信赖的 Athlon II X4 系统上，它*可以在一分钟内*处理包含 560 万个对象的*Linux 内核存储库*。

 *## 基本脚本

```
git rev-list --objects --all |
  git cat-file --batch-check='%(objecttype) %(objectname) %(objectsize) %(rest)' |
  sed -n 's/^blob //p' |
  sort --numeric-sort --key=2 |
  cut -c 1-12,41- |
  $(command -v gnumfmt || echo numfmt) --field=2 --to=iec-i --suffix=B --padding=7 --round=nearest 
```

当你运行上面的代码时，你会得到很好的**人类可读的输出**，如下所示：

```
...
0d99bb931299  530KiB path/to/some-image.jpg
2ba44098e28f   12MiB path/to/hires-image.png
bd1741ddce0d   63MiB path/to/some-video-1080p.mp4 
```

**macOS 用户**：由于`numfmt`在 macOS 上不可用，您可以省略最后一行并处理原始字节大小或`brew install coreutils`.

## 过滤

要实现*进一步过滤，请在该行**之前`sort`*插入以下任何*行*。

要**排除 中存在的文件`HEAD`**，请插入以下行：

```
grep -vF --file=<(git ls-tree -r HEAD | awk '{print $3}') | 
```

要**仅显示超过给定大小的文件**（例如 1 MiB = 2 ^(20)  B），请插入以下行：

```
awk '$2 >= 2^20' | 
```

## 电脑输出

要生成*更适合*计算机进一步处理的输出，请省略基本脚本的最后两行。他们做所有的格式化。这会给你留下这样的东西：

```
...
0d99bb93129939b72069df14af0d0dbda7eb6dba 542455 path/to/some-image.jpg
2ba44098e28f8f66bac5e21210c2774085d2319b 12446815 path/to/hires-image.png
bd1741ddce0d07b72ccf69ed281e09bf8a2d0b2f 65183843 path/to/some-video-1080p.mp4 
```

* * *

## 附录

### 文件删除

对于实际的文件删除，请查看[有关主题的这个 SO 问题](https://stackoverflow.com/questions/2100907/how-to-remove-delete-a-large-file-from-commit-history-in-git-repository)。

### 了解显示的文件大小的含义

该脚本显示的是每个文件在工作目录中的大小。如果您想查看一个文件在未签出的情况下占用了多少空间，您可以`%(objectsize:disk)`使用`%(objectsize)`. 但是，请注意，该指标也有其注意事项，如[文档](https://git-scm.com/docs/git-cat-file#Documentation/git-cat-file.txt-codeobjectsizediskcode)中所述。

### 更复杂的尺寸统计

有时，大文件列表不足以找出问题所在。例如，您不会发现包含大量小文件的目录或分支。

因此，如果这里的脚本没有为您剪裁（并且您有一个相当新的 git 版本），请查看[`git-filter-repo --analyze`](https://github.com/newren/git-filter-repo)或[`git rev-list --disk-usage`](https://git-scm.com/docs/git-rev-list#Documentation/git-rev-list.txt---disk-usage)（[示例](https://git-scm.com/docs/git-rev-list#_examples)）。

* * *

## 回答 #2

> 赞同：184
> 
> 时间：2013-12-16T11:23:20.410

我在[ETH Zurich Department of Physics wiki 页面](https://readme.phys.ethz.ch/documentation/git_advanced_hints/)上找到了一个单行解决方案（接近该页面的末尾）。只需做一个`git gc`删除陈旧的垃圾，然后

```
git rev-list --objects --all \
  | grep "$(git verify-pack -v .git/objects/pack/*.idx \
           | sort -k 3 -n \
           | tail -10 \
           | awk '{print$1}')" 
```

将为您提供存储库中最大的 10 个文件。

现在还有一个更懒惰的解决方案，[GitExtensions](http://gitextensions.github.io/)现在有一个插件可以在 UI 中执行此操作（并处理历史重写）。

![GitExtensions“查找大文件”对话框](../Images/0d9d69cf6df1595e8fcd2996388c1a8a.png)

* * *

## 回答 #3

> 赞同：172
> 
> 时间：2012-05-16T16:01:20.903

在过去，我发现此脚本对于在 git 存储库中查找大型（且不明显）对象非常有用：

*   [http://stubbisms.wordpress.com/2009/07/10/git-script-to-show-largest-pack-objects-and-trim-your-waist-line/](http://stubbisms.wordpress.com/2009/07/10/git-script-to-show-largest-pack-objects-and-trim-your-waist-line/)

* * *

```
#!/bin/bash
#set -x 

# Shows you the largest objects in your repo's pack file.
# Written for osx.
#
# @see https://stubbisms.wordpress.com/2009/07/10/git-script-to-show-largest-pack-objects-and-trim-your-waist-line/
# @author Antony Stubbs

# set the internal field separator to line break, so that we can iterate easily over the verify-pack output
IFS=$'\n';

# list all objects including their size, sort by size, take top 10
objects=`git verify-pack -v .git/objects/pack/pack-*.idx | grep -v chain | sort -k3nr | head`

echo "All sizes are in kB's. The pack column is the size of the object, compressed, inside the pack file."

output="size,pack,SHA,location"
allObjects=`git rev-list --all --objects`
for y in $objects
do
    # extract the size in bytes
    size=$((`echo $y | cut -f 5 -d ' '`/1024))
    # extract the compressed size in bytes
    compressedSize=$((`echo $y | cut -f 6 -d ' '`/1024))
    # extract the SHA
    sha=`echo $y | cut -f 1 -d ' '`
    # find the objects location in the repository tree
    other=`echo "${allObjects}" | grep $sha`
    #lineBreak=`echo -e "\n"`
    output="${output}\n${size},${compressedSize},${other}"
done

echo -e $output | column -t -s ', ' 
```

* * *

这将为您提供 blob 的对象名称 (SHA1sum)，然后您可以使用如下脚本：

*   [哪个提交有这个 blob？](https://stackoverflow.com/q/223678/223092)

...找到指向每个 blob 的提交。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2013-12-08T22:39:36.113

**步骤 1**将所有文件 SHA1 写入文本文件：

```
git rev-list --objects --all | sort -k 2 > allfileshas.txt 
```

**第 2 步**将 blob 从大到小排序，并将结果写入文本文件：

```
git gc && git verify-pack -v .git/objects/pack/pack-*.idx | egrep "^\w+ blob\W+[0-9]+ [0-9]+ [0-9]+$" | sort -k 3 -n -r > bigobjects.txt 
```

**步骤 3a**合并两个文本文件以获取文件名/sha1/大小信息：

```
for SHA in `cut -f 1 -d\  < bigobjects.txt`; do
echo $(grep $SHA bigobjects.txt) $(grep $SHA allfileshas.txt) | awk '{print $1,$3,$7}' >> bigtosmall.txt
done; 
```

**步骤 3b如果您有包含****空格**的文件名或路径名，请尝试步骤 3a 的这种变体。它使用`cut`而不是`awk`获取所需的列，包括。从第 7 列到行尾的空格：

```
for SHA in `cut -f 1 -d\  < bigobjects.txt`; do
echo $(grep $SHA bigobjects.txt) $(grep $SHA allfileshas.txt) | cut -d ' ' -f'1,3,7-' >> bigtosmall.txt
done; 
```

现在您可以查看文件 bigtosmall.txt 以确定要从 Git 历史记录中删除哪些文件。

**第 4 步**执行删除（注意这部分很慢，因为它会检查历史中的每个提交以获取有关您识别的文件的数据）：

```
git filter-branch --tree-filter 'rm -f myLargeFile.log' HEAD 
```

* * *

**来源**

步骤 1-3a 复制[自从 Git 历史中查找和清除大文件](http://naleid.com/blog/2012/01/17/finding-and-purging-big-files-from-git-history)

**编辑**

这篇文章在 2017 年下半年的某个时候被删除，但仍然可以使用[Wayback Machine访问](https://archive.org/web/)[它的存档副本](https://web.archive.org/web/20170621125743/http://www.naleid.com/blog/2012/01/17/finding-and-purging-big-files-from-git-history)。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2014-03-11T18:45:18.073

您应该使用[BFG Repo-Cleaner](http://rtyley.github.io/bfg-repo-cleaner/)。

根据网站：

> BFG 是 git-filter-branch 的一种更简单、更快的替代方案，用于从 Git 存储库历史记录中清除不良数据：
> 
> *   删除疯狂的大文件
> *   删除密码、凭证和其他私人数据

减小存储库大小的经典过程是：

```
git clone --mirror git://example.com/some-big-repo.git
java -jar bfg.jar --strip-biggest-blobs 500 some-big-repo.git
cd some-big-repo.git
git reflog expire --expire=now --all
git gc --prune=now --aggressive
git push 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2015-10-07T13:05:19.680

如果您只想拥有大文件的列表，那么我想为您提供以下单行：

```
join -o "1.1 1.2 2.3" <(git rev-list --objects --all | sort) <(git verify-pack -v objects/pack/*.idx | sort -k3 -n | tail -5 | sort) | sort -k3 -n 
```

谁的输出将是：

```
commit       file name                                  size in bytes

72e1e6d20... db/players.sql 818314
ea20b964a... app/assets/images/background_final2.png 6739212
f8344b9b5... data_test/pg_xlog/000000010000000000000001 1625545
1ecc2395c... data_development/pg_xlog/000000010000000000000001 16777216
bc83d216d... app/assets/images/background_1forfinal.psd 95533848 
```

列表中的最后一项指向 git 历史记录中最大的文件。

您可以使用此输出来确保您不会使用[BFG](https://rtyley.github.io/bfg-repo-cleaner/)删除历史记录中需要的内容。

请注意，您需要克隆您的存储库`--mirror`才能使其正常工作。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-05-14T23:19:04.460

如果您使用的是 Windows，这里有一个 PowerShell 脚本，它将打印存储库中的 10 个最大文件：

```
$revision_objects = git rev-list --objects --all;
$files = $revision_objects.Split() | Where-Object {$_.Length -gt 0 -and $(Test-Path -Path $_ -PathType Leaf) };
$files | Get-Item -Force | select fullname, length | sort -Descending -Property Length | select -First 10 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2020-05-22T19:52:47.680

windows git的powershell解决方案，找到最大的文件：

```
git ls-tree -r -t -l --full-name HEAD | Where-Object {
 $_ -match '(.+)\s+(.+)\s+(.+)\s+(\d+)\s+(.*)'
 } | ForEach-Object {
 New-Object -Type PSObject -Property @{
     'col1'        = $matches[1]
     'col2'      = $matches[2]
     'col3' = $matches[3]
     'Size'      = [int]$matches[4]
     'path'     = $matches[5]
 }
 } | sort -Property Size -Top 10 -Descending 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-11-15T05:23:10.083

试试`git ls-files | xargs du -hs --threshold=1M`。

我们在 CI 管道中使用以下命令，如果在 git repo 中发现任何大文件，它就会停止：

```
test $(git ls-files | xargs du -hs --threshold=1M 2>/dev/null | tee /dev/stderr | wc -l) -gt 0 && { echo; echo "Aborting due to big files in the git repository."; exit 1; } || true 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-12-10T15:51:02.550

我无法使用最流行的答案，因为`--batch-check`命令行切换到 Git 1.8.3（我必须使用）不接受任何参数。随后的步骤已在 CentOS 6.5 和 Bash 4.1.2 上尝试过

# 关键概念

在 Git 中，术语*blob*表示文件的内容。请注意，提交可能会更改文件或路径名的内容。因此，同一个文件可能会根据提交引用不同的 blob。在一个提交中，某个文件可能是目录层次结构中最大的，而在另一个提交中则不是。因此，寻找大提交而不是大文件的问题，将问题放在正确的角度。

# 对于不耐烦的人

按大小降序打印 blob 列表的命令是：

```
git cat-file --batch-check < <(git rev-list --all --objects  | \
awk '{print $1}')  | grep blob  | sort -n -r -k 3 
```

样本输出：

```
3a51a45e12d4aedcad53d3a0d4cf42079c62958e blob 305971200
7c357f2c2a7b33f939f9b7125b155adbd7890be2 blob 289163620 
```

要删除此类 blob，请使用[BFG Repo Cleaner](https://rtyley.github.io/bfg-repo-cleaner/)，如其他答案中所述。给定一个`blobs.txt`只包含 blob 哈希的文件，例如：

```
3a51a45e12d4aedcad53d3a0d4cf42079c62958e
7c357f2c2a7b33f939f9b7125b155adbd7890be2 
```

做：

```
java -jar bfg.jar -bi blobs.txt <repo_dir> 
```

问题是关于查找提交，这比查找 blob 需要更多的工作。要知道，请继续阅读。

# 进一步的工作

给定一个提交哈希，打印与其关联的所有对象（包括 blob）的哈希的命令是：

```
git ls-tree -r --full-tree <commit_hash> 
```

因此，如果我们有这样的输出可用于 repo 中的所有提交，那么给定一个 blob 哈希，这组提交就是匹配任何输出的那些。这个想法被编码在以下脚本中：

```
#!/bin/bash
DB_DIR='trees-db'

find_commit() {
    cd ${DB_DIR}
    for f in *; do
        if grep -q $1 ${f}; then
            echo ${f}
        fi
    done
    cd - > /dev/null
}

create_db() {
    local tfile='/tmp/commits.txt'
    mkdir -p ${DB_DIR} && cd ${DB_DIR}
    git rev-list --all > ${tfile}

    while read commit_hash; do
        if [[ ! -e ${commit_hash} ]]; then
            git ls-tree -r --full-tree ${commit_hash} > ${commit_hash}
        fi
    done < ${tfile}
    cd - > /dev/null
    rm -f ${tfile}
}

create_db

while read id; do
    find_commit ${id};
done 
```

如果内容保存在一个名为的文件中，`find-commits.sh`那么典型的调用将如下所示：

```
cat blobs.txt | find-commits.sh 
```

如前所述，该文件`blobs.txt`列出了 blob 哈希，每行一个。该`create_db()`函数将所有提交列表的缓存保存在当前目录的子目录中。

我在具有两个 Intel(R) Xeon(R) CPU E5-2620 2.00GHz 处理器的系统上进行的实验中的一些统计数据，由操作系统呈现为 24 个虚拟内核：

*   回购中的提交总数 = 近 11,000
*   文件创建速度 = 126 个文件/秒。该脚本每次提交都会创建一个文件。这仅在第一次创建缓存时发生。
*   缓存创建开销 = 87 秒。
*   平均搜索速度 = 522 次提交/秒。缓存优化导致运行时间减少 80%。

请注意，该脚本是单线程的。因此，任何时候都只能使用一个核心。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-03-16T10:32:50.050

对于 Windows，我写了[这个答案](https://stackoverflow.com/a/42544963/887962)的 Powershell 版本：

```
function Get-BiggestBlobs {
  param ([Parameter(Mandatory)][String]$RepoFolder, [int]$Count = 10)
  Write-Host ("{0} biggest files:" -f $Count)
  git -C $RepoFolder rev-list --objects --all | git -C $RepoFolder cat-file --batch-check='%(objecttype) %(objectname) %(objectsize) %(rest)' | ForEach-Object {
    $Element = $_.Trim() -Split '\s+'
    $ItemType = $Element[0]
    if ($ItemType -eq 'blob') {
      New-Object -TypeName PSCustomObject -Property @{
          ObjectName = $Element[1]
          Size = [int]([int]$Element[2] / 1kB)
          Path = $Element[3]
      }
    }
  } | Sort-Object Size | Select-Object -last $Count | Format-Table ObjectName, @{L='Size [kB]';E={$_.Size}}, Path -AutoSize
} 
```

您可能需要根据自己的情况微调它是显示 kB 还是 MB 或仅显示 Bytes。

可能存在性能优化的潜力，因此如果您担心，请随意尝试。

要获得所有更改，只需省略`| Select-Object -last $Count`.
要获得更机器可读的版本，只需省略`| Format-Table @{L='Size [kB]';E={$_.Size}}, Path -AutoSize`.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-05-26T11:38:06.470

> 如何追踪 git 历史记录中的大文件？

从分析、验证和选择根本原因开始。用来[`git-repo-analysis`](https://github.com/larsxschneider/git-repo-analysis)帮忙。

您还可以在[BFG Repo-Cleaner](https://github.com/rtyley/bfg-repo-cleaner)生成的*详细报告*中找到一些价值，该报告可以通过使用其 10MiB/s 网络吞吐量克隆到 Digital Ocean 液滴来非常快速地运行。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-01-25T22:03:06.983

出于与其他人相同的原因，我偶然发现了这一点。但是引用的脚本对我来说不太适用。我已经制作了一个更像是我见过的那些的混合体，它现在住在这里 - [https://gitlab.com/inorton/git-size-calc](https://gitlab.com/inorton/git-size-calc)*

# c# - 我在这里正确使用锁吗？我应该尝试用它包装更少的代码吗？

> ID：10622180
> 
> 赞同：3
> 
> 时间：2012-05-16T15:54:24.423
> 
> 标签：c#, multithreading, security, locking

我只是继承了这个由多个线程访问的代码。我刚刚介绍了两把锁——但我想知道是否还有什么我应该知道的。我没有在多线程应用程序中工作的重要经验。

```
namespace Helpers.Security
{
    public static class Encryption
    {
        #region "Random Numbers"
        static readonly int[] _randData = {
            //A gigantic list of numbers...
        };
        #endregion

        private static int _randIdx = 0;

        private static readonly object _encryptLock = new object();
        private static readonly object _decryptLock = new object();

        //HG 2009-JUN-11 - Added Reverse Methods from PF's Merge updates in [CDataServerBootStrapper]
        public static string EncryptStringReverse(string c_string)
        {
            return Encrypt(ReverseString(c_string));
        }
        public static string DecryptStringReverse(string c_string)
        {
            return Decrypt(ReverseString(c_string));
        }
        private static string ReverseString(string inputString)
        {
            string result = string.Empty;
            for (int pos = inputString.Length - 1; pos >= 0; pos--)
                result += inputString[pos];

            return result;
        }

        public static string Encrypt(string c_string)
        {
            if (c_string == null || c_string.Equals(string.Empty)) return string.Empty;
            int[] sasc = new int[224];
            char[] chash = new char[224];
            bool isExisting = false;
            string encstr = "";
            int sl = c_string.Length;

            lock (_encryptLock)
            {
                _randIdx = 0;

                for (int v = 0; v < 223; v++)
                {
                    sasc[v] = '\0';
                }
                for (int cl = 0; cl < sl; cl++)
                {
                    for (int a = 0; a < 223; a++)
                    {
                        int rnum = _randData[_randIdx++];
                        for (int y = 0; y < 223; y++)
                        {
                            if (sasc[y] == rnum)
                            {
                                isExisting = true;
                            }
                        }
                        if (isExisting == false)
                        {
                            sasc[a] = rnum;
                            chash[a] = (char) rnum;
                        }
                        else
                            a--;
                        isExisting = false;
                    }
                    chash[223] = '\0';
                    string strhash = new string(chash);
                    for (int v = 0; v < 223; v++)
                    {
                        sasc[v] = '\0';
                    }
                    encstr = encstr + strhash[c_string[cl] - 30];
                }
            }

            // Convert the wide-character string to multibyte string
            string sWholeHex = "";
            foreach (char c in encstr)
            {
                byte val = (byte) c;

                sWholeHex += val.ToString("X2");
            }

            return (sWholeHex.Trim().Replace("\0", ""));
        }

        public static string Decrypt(string c_string)
        {
            if (c_string == null || c_string.Equals(string.Empty)) return string.Empty;

            string szTemp = c_string;
            int nCtr = 0;
            byte[] byToDecrypt = new byte[1024];
            char[] chash = new char[223];
            char[] cencstr = new char[5000];
            int[] sasc = new int[223];
            bool isExisting = false;

            lock (_decryptLock)
            {
                for (int b = 0; b < 1024; b++)
                    byToDecrypt[b] = 0;

                int r;
                string sToDecrypt = string.Empty;
                for (r = 0; r < szTemp.Length - 1; r += 2)
                {
                    byte b2 = 0;
                    char c = szTemp[r];
                    if (c >= '0' && c <= '9')
                        b2 += (byte) (c - '0');
                    else if (c >= 'A' && c <= 'Z')
                        b2 += (byte) (c - 'A' + 10);

                    b2 *= 16;
                    c = szTemp[r + 1];
                    if (c >= '0' && c <= '9')
                        b2 += (byte) (c - '0');
                    else if (c >= 'A' && c <= 'Z')
                        b2 += (byte) (c - 'A' + 10);

                    byToDecrypt[nCtr++] = b2;
                    sToDecrypt += (char) b2;
                }

                _randIdx = 0;

                int sl = sToDecrypt.Length;

                for (int v = 0; v < 223; v++)
                {
                    sasc[v] = '\0';
                }
                int cl;
                for (cl = 0; cl < sl; cl++)
                {
                    for (int a = 0; a < 223; a++)
                    {
                        int rnum = _randData[_randIdx++];
                        for (int y = 0; y < 223; y++)
                        {
                            if (sasc[y] == rnum)
                            {
                                isExisting = true;
                            }
                        }
                        if (isExisting == false)
                        {
                            sasc[a] = rnum;
                            chash[a] = (char) rnum;
                        }
                        else
                        {
                            a--;
                        }
                        isExisting = false;
                    }
                    string strhash = new string(chash);
                    int v;
                    for (v = 0; v < 223; v++)
                    {
                        if (sToDecrypt[cl] == strhash[v])
                            cencstr[cl] = (char) ((byte) (v + 30));
                    }

                    for (v = 0; v < 223; v++)
                    {
                        sasc[v] = 0;
                    }
                }
                cencstr[cl] = '\0';
            }

            string encstr = new string(cencstr);

            return (encstr.Trim().Replace("\0", ""));
        }
    }
} 
```

我唯一的想法是这里有很多工作要做，所以我应该把所有的工作都锁起来，以确保我不只是把锁定问题推到别处。话虽如此——只有两个变量是全局可访问的……_randIdx 和 _randData。我不确定这是否是决定锁定什么的因素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:00:16.063

**这取决于你需要什么样的线程安全。**

`_randIdx`可以由两个不同的线程设置和获取，因为您的加密和解密方法使用不同的对象来锁定。您只`_randData`在每个锁中对数组执行读取，所以这不是问题。

似乎`lock`只需使用一个本地临时索引就可以轻松实现这一点。这是否有效取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:00:08.217

您将需要使用相同的锁来保护`_randIdx`加密和解密中的全局变量。 `_randData`没有被修改，所以不需要专门保护它。由于该类的所有方法都是`static`，您没有任何其他成员可以防止模拟访问/修改

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T16:07:18.453

Attila 是正确的，但我将用更多的词来描述这些想法：

您有两个锁定目标（_encryptLock 和 _decryptLock）。您可以在不同的线程上同时输入这些锁。这意味着 Encrypt 方法可以在 Decrypt 方法使用它时将 _randidx 设置为 0（不好）。 **每组受保护实例仅使用一个锁定目标。**

您实际上不需要锁来保护 _randData，因为您没有修改它。多个线程可以安全地从同一个数组中读取。_randData 中的实例也不需要保护，因为它们是值类型 - 访问该数组的任何人都会获得一份副本并且不会修改原始数据。

如果将 _randidx 更改为两个方法范围的变量，则不需要锁来保护它。只属于一个线程的，是安全的。

由于您没有需要锁保护的实例，因此您可能没有锁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T16:05:30.183

您应该尽量减少在一个`lock`块中执行的“工作”量。我建议将锁内的工作重构到另一个可能通过 (via `[Array.Copy(...)][1]`)的对象`_randData`。

你真的在**修改** `_randData`吗？如果没有，我认为没有理由锁定。您还使用了 2 个不同的锁 - 一个用于加密，一个用于解密。是否有意让您能够`_randData`从 2 个线程访问？拥有 2 个锁定对象将允许这种情况发生。

# iphone - XCode 存档不包括引用文件夹中的文件

> ID：10622184
> 
> 赞同：0
> 
> 时间：2012-05-16T15:54:41.097
> 
> 标签：iphone, ios, xcode, xcode4

我很难为我的项目制作档案。我可以在我的设备和模拟器上运行良好。我在作为参考添加的文件夹中引用了几个资源。该文件夹已添加到我的捆绑资源中，在我复制捆绑资源之前，我正在执行一个脚本来触摸该文件夹。

但是，当生成存档时，它实际上是空的 (2 KB)，而它应该在 14-16 MB 左右。没有错误，存档验证正常。尝试分发时出错，但除此之外我没有看到任何问题。就好像它实际上并没有打包任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:04:37.873

好吧，我想通了。我的引用文件夹中有一个文件，名为：

```
._app.properties 
```

还有一个叫：

```
._.DS_Store 
```

显然，您引用的资源中名称以 ._ 或 _ 开头的任何文件都会导致问题。

# wpf - 来自 WPC MVVM 应用程序的异步 WCF 调用超时并挂起 UI

> ID：10622188
> 
> 赞同：0
> 
> 时间：2012-05-16T15:54:49.410
> 
> 标签：wpf, wcf, mvvm, asynchronous, timeout

我正在开发 WPF 应用程序并使用 MVVM。我正在使用异步方法调用 WCF 服务，它阻塞了 UI。有时它只是完全超时。我的网站使用相同的服务（*但不使用异步调用*）没有问题。这是我的代码和客户端配置。

```
 private void ProcessLogin()
    {
        if (Username == null || Password == null)
            return;

        _working = true;
        CommandManager.InvalidateRequerySuggested();
        Status = "Authenticating User";

        _authClient.BeginLogin(Username, Password, "", false, EndLogin, null);
    }

    protected void EndLogin(IAsyncResult asyncResult)
    {
        LoggedIn = _authClient.EndLogin(asyncResult);

        if (!LoggedIn)
        {
            Status = "Authentication Failure";
        }
        else
        {
            DialogResult = true;
        }
        _working = false;
        CommandManager.InvalidateRequerySuggested();
    } 
```

```
<basicHttpBinding>
    <binding name="BasicHttpBinding_AuthenticationService" closeTimeout="00:01:00"
        openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
        allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
        maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
        messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
        useDefaultWebProxy="true">
        <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        <security mode="Transport">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
        </security>
    </binding>
</basicHttpBinding>

<endpoint address="https://path_to_service:444/Authentication.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_AuthenticationService"
            contract="AuthService.AuthenticationService" name="BasicHttpBinding_AuthenticationService" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:59:09.113

看起来您有一个无限循环，您正在从 endlogin 中调用 endlogin。

# asp.net - IIS7 Windows 身份验证（如何从域中检索用户名？）

> ID：10622191
> 
> 赞同：0
> 
> 时间：2012-05-16T15:55:05.807
> 
> 标签：asp.net, vb.net, iis-7

这是我的代码

```
 Dim username2 As System.Security.Principal.IPrincipal
    username2 = System.Web.HttpContext.Current.User
    Dim username As String
    username = username2.Identity.Name
    Response.Write(username) 
```

我在 vs 2010 中使用 asp.net 应用程序我需要在 iis7（用户和域）中使用 windows 身份验证。我在 web.config 中设置了 windows 身份验证，并在 iis 中启用了 windows 身份验证。我禁用了匿名身份验证。当我浏览到 localhost 时，它要求输入用户名和密码。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:32:41.683

你在Firefox中运行这个吗？当我的默认浏览器设置为 firefox 时，我遇到了同样的问题。它每次都会要求我提供凭据。如果你使用 IE 应该没有问题。希望能帮助到你！

# php - 带有 Javascript 警报的 PHP 下拉菜单

> ID：10622194
> 
> 赞同：0
> 
> 时间：2012-05-16T15:55:16.497
> 
> 标签：php, javascript, drop-down-menu, alert

我在 PHP 中创建了一个简单的下拉菜单：

```
<td> Privilege: </td>
<td><select name="privilege">
<?php 
    $position_list = array(
                1 => "Chair", 
                2 => "SACA",
                5 => "Faculty",
                0 => "Disable User",
                );
    foreach ($position_list as $priv_id=>$position) {
    echo "<option value= \"{$priv_id}\"";
            if ($priv_id == $sel_user['privilege']) {
                 echo " selected"; 
            }
            echo ">{$position}</option>";   
    }   
?></td></select>        
        </tr>       
        </tr> 
```

我想知道是否可以包含一些 Javascript。因此，当用户选择“禁用用户”时，会显示一条消息“您确定要禁用此用户吗？” 弹出。在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:10:24.257

这里的问题不是显示警报——这相当简单——而是跟踪选择元素曾经拥有的值。毕竟，如果用户单击“否”并且用户无论如何都被禁用，那将没有多大用处。

为了做到这一点，我建议最简单的做法是使用隐藏的输入元素来存储原始值。然后，您可以参考以正确设置选项。

像这样的东西（HTML结构在这里更正，请注意;-)）：

```
<td>Privilege:</td>
<td>
  <!-- note the onchange event -->
  <select name="privilege" onchange="checkDisable(this);">
<?php 

    // Define the options
    $position_list = array(
      1 => "Chair", 
      2 => "SACA",
      5 => "Faculty",
      0 => "Disable User",
    );

    // Create the list
    foreach ($position_list as $priv_id=>$position) {
      echo "<option value= \"{$priv_id}\"";
      if ($priv_id == $sel_user['privilege']) {
        echo " selected=\"selected\""; 
      }
      echo ">{$position}</option>";   
    }   

?></select>
  <input type="hidden" id="privilege_old_val" value="<?php echo $sel_user['privilege']; ?>" />
  <script type="text/javascript">
    function checkDisable(element) {

      // Firstly check if the user selected the disable option, then get them to confirm it
      if (element.options[element.selectedIndex].value == 0 && !confirm("Are you sure you want to disable this user?")) {
        // If they didn't confirm it, loop the options...
        for (var i = 0; i < element.options.length; i++) {
          // Find the option with the old value...
          if (element.options[i].value == document.getElementById('privilege_old_val').value) {
            // ...and set the select back to that option
            element.selectedIndex = i;
          } // if
        } // for
      } // if

      // Update the input that tracks the old value with the current value
      document.getElementById('privilege_old_val').value = element.options[element.selectedIndex].value;

    }
  </script>
</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:57:39.723

是的，您可以使用`onchange`事件：

```
<select name="privilege" onchange="if(this.options[this.selectedIndex].value === 0)confirm('Are you sure you want to disable this user?')"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T16:01:21.200

这个 JavaScript 应该为你做：

```
<select name="Select1" onchange="if(this.value==0) confirm('are you sure you want to disable this user?')">
<option value="1">Chair</option>
<option value="2">SACA</option>
<option value="5">Faculty</option>
<option value="0">Disable user</option>
</select>​​​ 
```

# django - 如何在django中找回密码

> ID：10622199
> 
> 赞同：26
> 
> 时间：2012-05-16T15:55:54.967
> 
> 标签：django

我们如何找回用户的密码？

```
u = User.objects.get(username__exact=username)
print u.password 
```

显示`sha1$f0971$441cac8f604d49869e33ca125a76253a02fef64e`

有没有从这个编码字符串中找到密码的函数？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-16T15:57:18.957

不，这是不可能的，设计使然。但无论如何都不应该这样做。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-16T15:58:06.320

Due to security restrictions the password hash method is one way. You will need to reset that users password.

Try using the `set_password(raw_password)` method to give the user a new password. Remember to call the `save()` method to ensure you save the change to the database.

```
u = User.objects.get(username__exact=username)
u.set_password(raw_password)
u.save() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-09-17T16:00:34.600

您可以通过以下方式检查密码是否正确：

`u.check_password("your password")`

这种方法`u.set_password("you password")`可以解决你所有的问题。

`sha1$f0971$441cac8f604d49869e33ca125a76253a02fef64e`是：

哈希函数算法`$`盐`$`哈希码

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-16T15:57:50.917

no. and there shouldn't be. as part of the security, passwords are passed through a one-way function before they are saved, so that they aren't reveled if the database is compromised

what you can do is *replace* the user's password with one you know. this is how (good) site's "forgot your password" functions work: they send you a new random password, not your old one, since they (shouldn't) have access to it

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-16T16:01:24.637

不，该字段包含密码的加盐哈希。从字符串我们知道它是 SHA1 函数。如果您有密码，您将能够生成与足迹相同的哈希值。出于安全原因，现在应该有办法以经济的方式恢复密码（您仍然可以暴力破解，但需要很长时间）。，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-18T14:55:20.903

您无法获取现有密码，因为该密码已转换为盐哈希。

# c# - 如何在 Excel 中以编程方式对工作表进行分组（移位选择）

> ID：10622200
> 
> 赞同：1
> 
> 时间：2012-05-16T15:56:03.830
> 
> 标签：c#, excel

本主题与：[Excel 中的多选工作表是什么对象类型？](https://stackoverflow.com/questions/10591443/what-object-type-are-multiple-selected-sheets-in-excel#comment13757157_10591443)

为了概述问题，我运行了一些代码来更改我在 Excel 中的选择，并且我想将选择恢复为原来的状态（我称之为“originalSelection”）。在大多数情况下，您可以只调用 originalSelection 上的 Select() 方法。

```
var originalSelection = ExcelApp.Selection;
originalSelection.GetType().InvokeMember("Select", System.Reflection.BindingFlags.InvokeMethod, null, originalSelection , null); 
```

选择多个工作表时，选择类型始终是一个范围（这是 Excel 默认的）。但是，如果您选择了多个工作表，则在尝试再次调用 Select 时可能会遇到错误。你需要做一些跳舞来让事情发挥作用。

如果选择了多个工作表，但不是所有工作表，您可以执行以下操作：

```
selectedSheets.Select();
activeSheet.Activate();
originalSelection.Select(); //this was casted to an Excel.Range 
```

但是，如果选择了所有工作表，则该`activeSheet.Activate()`行将取消选择所有其他选定的工作表。如果您使用 UI 本地尝试，也会发生这种情况。

我想知道是否有一种方法可以通过代码一个一个地模拟班次选择表？我发现的最接近的东西是范围分组的东西，但没有工作表。

我试图保持我的概述简短，但如果您需要更多关于我在做什么的说明，请问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T18:24:26.300

所以我想出了一种以编程方式选择工作表的方法。

您可以创建名称的字符串数组，并使用数组的顺序来获取工作表的集合。选择此集合，您应该选择了所有指定的工作表。

```
String[] sheetsToBeSelected = {"Sheet3","Sheet1","Sheet2"}; //Note, Sheet3 is the first item in this array
excel.Workbook workbook = ExcelApp.ActiveWorkbook; //get your Excel application however you want
excel.Sheets worksheets = workbook.Worksheets; //get all the sheets in this workbook

//This gets a collection of the sheets specified and ordered by the array of names passed in. 
//Just call select on this collection, and the first sheet in the collection becomes the active sheet!
((excel.Sheets)worksheets.get_Item(sheetsToBeSelected)).Select(); 
```

# javascript - 谷歌浏览器 JavaScript 逐行调试

> ID：10622207
> 
> 赞同：0
> 
> 时间：2012-05-16T15:56:24.660
> 
> 标签：javascript, jquery, debugging, google-chrome, developer-tools

我正在尝试遵循此处的指南： [https ://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints)

但它似乎不起作用，即

我做了以下事情：

*   通过点击 Control-Shift-I 快捷键打开开发者工具
*   打开脚本面板并从脚本下拉菜单中选择“script.js”
*   通过单击行间距在第 19 行设置断点（您可以使用 Control-G 快捷方式在大文件中显示一行）
*   将鼠标移到此页面上
*   您应该在断点处停止

当我将鼠标悬停在“此页面”上时没有任何反应，当我将鼠标悬停在“此页面”上时它不会在断点处停止......

到底是怎么回事？

我需要调试 javascript/jquery 代码的好方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:01:25.560

如果您将鼠标悬停在页面上的第二个屏幕截图上，它会按预期工作。

如果这不起作用，请尝试另一个页面，因为我经常使用 chrome 调试工具，而且我从来没有遇到过问题。

# macros - ScalaMacros 和 Eclipse

> ID：10622213
> 
> 赞同：7
> 
> 时间：2012-05-16T15:56:48.463
> 
> 标签：macros, scala-ide, scala-2.10

我正在尝试使用可用于 Scala 2.10.0-M3 的 Scala IDE 插件在 Eclipse 3.7.2 中编译（Scala）宏，但我遇到以下错误：

*“找不到宏实现：XXXXX（最常见的原因是您不能在定义它们的同一编译运行中使用宏实现）如果您确实需要与程序的其余部分一起定义宏实现，请考虑两阶段在第二阶段使用 -Xmacro-fallback-classpath 进行编译，指向第一阶段的输出”*

我已经知道如何使用简单的编辑器和终端来避免它（只是按照错误消息），但是是否可以在 Eclipse 中实现双阶段任务？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T08:33:07.047

如何创建宏项目以链接到现有项目：

*   创建一个名为 example 的 scala 项目`ProjectMacros`，在其中放置一个名为 example`Macros.scala`的包含宏的文件。这个项目应该编译没有问题，因为只有宏。
*   右键单击现有的 scala 项目，然后单击“属性”。“属性”窗口打开。
*   在该`Java Build Path`部分：
    *   在选项卡下`Projects`，添加`ProjectMacros`.
    *   在选项卡下`Libraries`，单击`Add Class Folder`，然后选择`ProjectMacros/bin`目录。
*   在该`Project References`部分中，检查`ProjectMacros`

现在，在现有项目中添加一个导入后，`import Macros._`您可以使用宏函数和注释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T18:09:12.033

好吧，在两个不同的项目中分离宏实现和宏调用（并使用项目引用）似乎解决了这个问题。无论如何，Scala-IDE 插件的 Scala 2.10-M4 版本（在宏支持方面）得到了显着改进，因此我建议对其进行更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T21:35:34.337

您可能可以使用 Ant 进行构建，但是由于您说您已经使用终端实现了这一点，我认为创建脚本并使用自定义构建器运行它会更容易（转到项目属性，单击 Builders -> New... -> 程序，然后将其设置为运行您的脚本。

# python - 在pysvn（python subversion）中测试文件是否受版本控制

> ID：10622214
> 
> 赞同：5
> 
> 时间：2012-05-16T15:56:55.667
> 
> 标签：python, svn, pysvn

在[pysvn](http://pysvn.tigris.org/docs/pysvn_prog_ref.html)中，如何测试文件是否受版本控制？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T10:01:01.550

使用`client.status()`并检查`text_status`返回的状态对象的属性。例子：

```
>>> import pysvn
>>> c = pysvn.Client()
>>> out = c.status("versioned.cpp")[0]  # .status() returns a list
>>> out.text_status
<wc_status_kind.normal> 
```

这表明该文件已版本化且未修改。

```
>>> c.status("added.cpp")[0].text_status  # added file
<wc_status_kind.added>
>>> c.status("unversioned.cpp")[0].text_status  # unversioned file
<wc_status_kind.unversioned> 
```

您可以使用探索其他可能的状态`dir (pysvn.wc_status_kind)`

因此，您可以将其包装为：

```
def under_version_control(filename):
    "returns true if file is unversioned"
    c = pysvn.Client()
    s = c.status(filename)[0].text_status
    return s not in (
        pysvn.wc_status_kind.added, 
        pysvn.wc_status_kind.unversioned,
        pysvn.wc_status_kind.ignored) 
```

* * *

如果您还希望处理 svn 工作目录之外的文件，则需要捕获和处理`ClientError`. 例如

```
def under_version_control(filename):
    "returns true if file is unversioned"
    c = pysvn.Client()
    try:
        s = c.status(filename)[0].text_status
    catch pysvn.ClientError:
        return False
    else:
        return s not in (
            pysvn.wc_status_kind.added, 
            pysvn.wc_status_kind.unversioned,
            pysvn.wc_status_kind.ignored) 
```

# iphone - UINavigationItem BackBarButtonItem 没有被替换

> ID：10622217
> 
> 赞同：3
> 
> 时间：2012-05-16T15:57:03.127
> 
> 标签：iphone, objective-c, ios

我有一个奇怪的问题`backBarButtonItem`。我想在整个应用程序中将其标题替换为“返回”并替换后退按钮在大多数情况下都有效，`-viewDidLoad`但在其他视图中它不起作用并显示前一个视图的名称。有人有同样的问题吗？

PS替换的方法`backBarButtonItem`是实例化an`UIBarButtonItem`并将其设置为`viewController.navigationIten.backBarButtonItem`属性的标准方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-16T16:06:58.153

`backBarButtonItem`不设置当前视图中显示的后退按钮，它设置导航*到*当前视图的后退按钮，即下一个视图中的后退按钮。

这是有道理的，因为后退按钮的标题通常是前一个视图控制器的标题。

如果要直接在导航栏中设置左键，使用`self.navigationItem.leftBarButtonItem`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T17:28:23.847

当您在分配下一个视图控制器对象后从当前视图推送视图时，只需放下面一行

```
YourViewController *objView = [[YourViewController alloc] initWithNibName:@"YourViewController" bundle:nil];
          self.navigationItem.title=@"Back";
            [self.navigationController pushViewController:objView animated:YES]; 
```

您的下一个视图将出现后退按钮.... :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T07:44:20.540

好吧，我终于找到了解决这个问题的方法。

如果您希望应用程序的任何 backBarButtonItem 具有相同的标题，一个好的方法是继承 UINavigationController 并覆盖`- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated`以替换后退按钮。

```
- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated
{
    UIBarButtonItem *_backButton = [[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@"BackButtonLabel", "")
                                                                    style:UIBarButtonItemStyleDone 
                                                                   target:nil 
                                                                   action:nil];
    viewController.navigationItem.backBarButtonItem = _backButton;
    _backButton = nil;
    [_backButton release];

    [super pushViewController:viewController animated:animated];
} 
```

通过这种方式，应用程序中的每个后退按钮都将具有相同的标题。

我希望这对其他人有帮助。

# actionscript-3 - AS3语法通过变量中的名称调用另一个类的方法？（链式回调）

> ID：10622219
> 
> 赞同：1
> 
> 时间：2012-05-16T15:57:12.483
> 
> 标签：actionscript-3, oop

Object`A`调用`M`object 的方法，`B`为两种情况传递两个回调：`cbYes`和`cbNo`.

`B`反过来，执行 Web 服务异步调用，`C`使用唯一的回调方法创建 Object (api) 实例`N`：`B`. 此回调将决定调用两个回调中的哪一个。

我存储`cbYes`并`cbNo`用作 B 类型的私有变量`Function`。

**我怎样才能调用任何一个回调？**他们不是 B 的孩子，所以语法`B[cbYes]();`不是办法。虚幻代码示例：

```
class A {
    public function Smth() {
        var instB:B = new B( cbYes, cbNo);
    }
    public function cbYes( e:Event) { doSomething(); }
    public function cbNo( e:Event) { doSomething(); }
}

class B {
    private var _cb1:Function;
    private var _cb2:Function;
    public function B( cb1, cb2) {
        _cb1 = cb1; _cb2 = cb2;
        var worker:C = new C();
        C.apiMethod123( cbAfterCall);
    }
    public function cbAfterCall( Result:*) {
        if( Result = 1) {
            // here I need to call callback from _cb1
        } else {
            // here I need to call callback from _cb2
        }
    }
}

class C {
    private var _Callback:Function;
    public function C() { }
    public function apiMethod123( cb:Function) {
        this._Callback = cb;
        // create a URLLoader or a Loader and do a web service call
    }
    public function urlCallback( e:Event) {
        // parse response
        this._Callback();
    }
} 
```

好的，当我整理这个示例代码时，我意识到我已经用 api caller worker 解决了这个问题！:-) 要多睡觉。

AfterQuestion：这种架构方法看起来真的是错误的吗？请建议一种更好的模式，或者一种适合使用并发异步 API 调用的系统的模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:14:51.827

如果您将 cbYes 和 cbNo 作为成员变量存储在 B 中。您可以像普通函数一样调用它们：

```
public function foo(cbYes:Function,cbNo:Function):void
{
    this.cbYes = cbYes;
    this.cbNo = cbNo;
}

public function bar():void
{
    cbYes();
} 
```

您可以使用事件系统来实现相同的结果，而不是使用这样的回调。您可以创建自定义事件并分派是/否事件。

# c# - socket exception "access to path is denied"

> ID：10622232
> 
> 赞同：1
> 
> 时间：2012-05-16T15:57:48.880
> 
> 标签：c#, visual-studio-2010, sockets

I am working on winform application in C# using EF 4\. I've made a client and server those can share files. I've given the choice to choose the location where file is to be saved but whether it is selected by user or I hard coded it, result is same the exception.

i done the same thing in cmd based program and it works just fine but in forms it did't work.

I've tried also :

```
string receivedpath = Environment.GetFolderPath(Environment.SpecialFolder.MyVideos); 
```

# css - CSS preprocessor with anti-FOUC support

> ID：10622236
> 
> 赞同：0
> 
> 时间：2012-05-16T15:57:52.070
> 
> 标签：css, fouc

[FOUC](http://en.wikipedia.org/wiki/Flash_of_unstyled_content) is a common user experience problem for sites with a lot of CSS (especially after you start combining your CSS files), and the common solution is to separate important layout rules in a small standalone file which is loaded first. That leads to code which is hard to read and maintain because related rules are at very distant places. I am wondering if there is any CSS preprocessor which supports separating code into different files? That is, you would write something like

```
.main-content { #FOUC
    position: absolute;
    top: 10px;
    left: 15px;
}
.main-content h1 {
    font-weight: bold;
} 
```

and `.main-content` and `.main-content h1` end up in different files. (Or maybe the same on a per-rule level.)

# ios - Twitter Follow us feature with the ShareKit in iOS

> ID：10622241
> 
> 赞同：0
> 
> 时间：2012-05-16T15:58:15.803
> 
> 标签：ios, twitter, sharekit

Now I got the Sharekit 2.0 for Facebook and twitter features.

I could share text (facebook and twitter) with the SharKit 2.0.

But I don't know how to implement the "follow us" feature in the twitter.

I found the "SHKTwitter" class's "followMe" function, but I haven't amy references about it.

Please help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:09:19.550

`- (void)followMe;` 仅当您的应用程序使用 xAuth 作为 iOS5 前 Twitter 的身份验证方法`SHKTwitter`时，才能使用类中的方法。**有关xAuth**身份验证方法的一些信息在`DefaultSHKConfigurator.m`文件中。

默认情况下，该方法不用于**OAuth**身份验证方法，这是您最可能使用的方法。

编辑：

如果您在 SHKConfigurator.m 中指定*要*遵循的 twitterUsername ，它也可能与**OAuth一起使用。**

 *该方法可以在用户验证后调用，最方便的是在发送期间 - 所以为了能够调用它，你应该继承 SHKTwitter 并覆盖发送方法来调用`[self followMe];`

我自己没有尝试过，这只是一个想法。

也许值得直接在 ShareKit 中实现它也适用于 OAuth 使用共享器特定指令......*

# javascript - Why is document.getElementById().setAttribute not working correctly in Chrome and IE?

> ID：10622242
> 
> 赞同：0
> 
> 时间：2012-05-16T15:58:23.053
> 
> 标签：javascript, function, pdf, object, setattribute

I am using the following function:

`function pdfChanger(location){ document.getElementById("pdf").setAttribute("data",location); }`

which is called here:

```
<a href="javascript:pdfChanger('documents/SecurityDocs/sample.pdf')">test1</a><br/> 
```

and is designed to change the pdf file displayed in this object:

```
<object id="pdf" data="documents/sample2.pdf#toolbar=0&navpanes=0&scrollbar=0&page=1&view=FitHtop" 
                    type="application/pdf"></object> 
```

In firefox clicking on the link which evokes this function changes the pdf object correctly. In chrome, however, you have to click on the pdf after you have clicked the link, in order to correctly display the changed pdf. In IE the pdf does not change at all. Why is this happening and what can I do to make this function work uniformly in all browsers?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:19:28.813

设置属性值并不能保证重新呈现 html 元素。

如果我们改变 img 标签的宽度或高度，我们总是会看到重新渲染的图像。

如果我们改变一个img标签的id，浏览器是否需要重新渲染图像？我不这么认为，但某些浏览器可能会。

从渲染的角度来看，对象标签的“数据”属性可能因浏览器而异。它被视为“数据”或“源 URL”。

为了保证元素的渲染，你最好重写整个元素。您可以创建/添加元素或使用 innerHTML。例如，

```
document.getElementById('object_div').innerHTML='<object id="pdf" ...></object>' 
```

# xaml - UserControl vs LayoutAwarePage (Windows 8 XAML)

> ID：10622243
> 
> 赞同：0
> 
> 时间：2012-05-16T15:58:24.620
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

What is the difference between `<common:LayoutAwarePage` and `<UserControl...` in XAML in Windows 8\. Looks like both are used as W8 pages.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:26:06.560

Page 是您需要在 Frame 内部使用的东西，以支持标准导航框架和标准 AppBar 类。LayoutAwarePage 根据布局（纵向、横向全/填充/捕捉）添加了对不同视觉状态的支持，这在您构建应用程序以提交到商店时确实是必需的。

UserControl 只是一种将一些 UI 片段和代码隐藏在一起的简单方法，特别是如果您希望有一个可重用的 UI 片段显示在不同的页面上，或者如果您的页面设计变得过于复杂（例如，如果您有一个很多用于不同页面布局的 XAML）。如果您想创建一个公共控件以在多个地方或多个项目中重用，但不关心是否能够重新设置它的样式，这也很有用——那么您将需要创建一个自定义/模板化控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T03:21:06.373

layoutawarepage 是允许支持各种视图的页面，例如填充、对齐、纵向和横向。您必须在其中处理 xaml 中的 visualstatemanager 并从代码隐藏中的各种视图进行切换。

而用户控件是您可以放置​​在其他页面中的元素。

# javascript - How do I set the value of an input field via javascript

> ID：10622244
> 
> 赞同：0
> 
> 时间：2012-05-16T15:58:26.217
> 
> 标签：javascript

Can someone tell me why this markup/script errors out and doesnt put "Waltdog" into the Hidden1 input field?

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<script>
    document.getElementById("Hidden1").value = 'Waltdog';
</script>
<body>
    <form id="form1" runat="server">
        <div>
            <input id="Hidden1" type="hidden" runat="server" /> 
            Let me know if you see this!!! You crazy Texicans are harshing my Wednesday vibe! :)
        </div>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:59:54.593

因为您的脚本在元素存在之前运行。

HTML（连同脚本标签中的 javascript）被从上到下解释，因此当脚本运行时，输入元素尚未创建。

解决方案是

*   将脚本放在页面加载时运行的函数中
*   将javascript放在元素之后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T17:01:17.173

将脚本节点放在输入下方

```
<input id="Hidden1" type="hidden" runat="server" /> 
<script>
    document.getElementById("Hidden1").value = 'Waltdog';
</script> 
```

# apache - 重写所有html页面

> ID：10622246
> 
> 赞同：0
> 
> 时间：2012-05-16T15:58:28.660
> 
> 标签：apache, url, mod-rewrite, url-rewriting

我需要干净的 url（例如 example.com/test）将所有没有文件扩展名的请求重定向到 html 页面（所以我仍然可以调用编程页面而无需重写）。我制作了一个我希望应该这样做的文件，但它没有：/有什么想法吗？

这是我当前的 .htaccess 文件：

```
RewriteEngine On    # Turn on the rewriting engine
RewriteRule  ^([^/.]+)/?$ $1.html [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:09:23.303

试试这个。你必须设置一个 RewriteCond(ition)。否则有一个无限循环......

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^([^/]+)$ $1.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:07:09.127

尝试将此行放在顶部：

```
Options +FollowSymlinks 
```

# java - 动态可拖动、可编辑和自动调整大小的 TextField

> ID：10622251
> 
> 赞同：1
> 
> 时间：2012-05-16T15:58:58.060
> 
> 标签：java, android

我正在 Eclipse 中开发一个 android 应用程序，我需要一个可以由用户在屏幕上放置、拖动和编辑的文本字段。现在我在一个绝对布局上工作，这很好，我有编辑能力，但我正在寻找更多的东西，比如 Evernote 的 Skitch 是如何做到的。有没有人对如何获得这种文本字段功能有任何想法或建议。

提前致谢。将推荐任何指向正确方向的答案。

# git - git merge：有没有办法强制--squash？

> ID：10622252
> 
> 赞同：3
> 
> 时间：2012-05-16T15:59:00.137
> 
> 标签：git, merge, squash

因此，我们项目的开发工作流程是这样的：我们创建一个任务/错误票证，然后我们从 master 分支处理任务/错误，并最终将其合并回 master。我们希望 master 上的提交有很好的消息。在任务分支上提交的人可能没有好的提交消息，这没关系，但是如果要合并分支，这些带有不干净消息的提交将进入 master。

解决此问题的一种方法是始终使用 --squash 合并到 master 。这样，您就有机会提供良好的提交消息并将整个提交范围视为一个。我想知道是否有办法*强制执行*？意思是，如果我们可以让 git 服务器拒绝未压缩的合并？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T06:22:50.193

虽然它不是直接强制，但您可以将分支设置`--squash`为默认合并选项：`master`

```
git config branch.master.mergeoptions  "--squash" 
```

这将始终压缩合并到 master 中的提交，而无需指定`--squash`选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:05:11.127

您需要一个服务器端挂钩，以确保推送的内容是您所需要的。您将拒绝任何会引入多个非合并提交的参考更改。您可以在那里进行其他检查，例如查看评论是否包含票号等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T16:10:12.540

您可以`rebase -i`在您的分支上使用，这将允许您基本上将分支上的所有提交压缩为 1 个提交，然后将该分支（1 个提交）合并到 master。

# c# - 如何让 XmlTextWriter 实际编写 &（没有 CDATA）

> ID：10622254
> 
> 赞同：0
> 
> 时间：2012-05-16T15:59:07.140
> 
> 标签：c#, html, xml

我正在使用 XMLTextWriter 将我的一堆对象序列化为 HTML（因为 HTML 基本上是 XML），并且我的所有对象都能够以 XML 形式读取/写入自己。除了一个小障碍外，该方法效果很好。HTML 包含一些无效的 XML，例如空格。TextWriter 始终将其转换为 &nbps;。我不能将它包装在 CDATA 标记中，因为浏览器会简单地忽略该标记，我确实需要 XmlTextWriter 来单独留下我的 &。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:03:29.787

您是否尝试过 XmlTextWriter.WriteRaw() 来写入这些值？

我很确定这不会被转义-不确定这与您拥有的代码有何关系...

# git - Git Extensions 有不属于我自己的未决更改？

> ID：10622259
> 
> 赞同：4
> 
> 时间：2012-05-16T15:59:17.420
> 
> 标签：git, version-control, github, msysgit, git-extensions

这个问题可能是一个很长的问题，因为我仍然无法可靠地复制这个问题，但它已经多次发生在我的几个同事身上，它仍然让我感到困惑。

有时 Git 扩展（在 Windows 7 上）会在提交和推送后在其工作目录中显示不属于他们自己的待处理更改。推送失败是因为它说他们有待处理的更改，尽管事实上他们在推送之前几乎没有提交所有待处理的更改。这就是我被召唤的时候。在检查更改后，它们是由另一个提交者所做的更改并推送到原始位置。几次更改甚至是我所做的更改。

开发者 A（我们称之为 Bob）继续对他的存储库进行了一系列更改。Bob 然后提交这些更改并将提交推送到原点。

开发人员 B（将称为 Fred）也进行了一些更改并将它们提交到他的存储库。然后 Fred 尝试将这些更改推送到原点。在这一点上，我预计 Fred 会收到一个错误，说他的存储库在 1 次提交之后落后于原点，并告诉他先进行拉取。但是，他收到的错误是推送失败，因为他的工作目录中有待处理的更改。当 Fred 查看待处理的更改时，他发现所有更改实际上都是在 Bob 的提交中所做的更改。

当 Fred 将这些更改视为自己的更改时，一切似乎都很好。没有什么可以打破它，但它发生时非常奇怪。如果我们尝试撤消挂起的更改，我还没有看到会发生什么，因为我担心如果我们这样做，这些更改基本上会被还原。

有没有其他人在使用 Git 或 Git 扩展时遇到过这种奇怪的行为？

## 更新

我在我们的项目历史中发现了一个发生这种情况的实例。两次提交都对相同数量的文件进行了完全相同的更改，但提交是由两个不同的开发人员完成的。

这是 Bob 的原始提交： [![](../Images/87b122270a86c2bf8fa8ce769ce5ae24.png)](https://i.imgur.com/f9FVs.jpg) 这是 Fred 的不稳定提交： [![](../Images/83a73b320866c8f2afe4b90f388c8233.png)](https://i.imgur.com/R2q2f.jpg) 编辑：为了澄清，Fred 的意思是输入“推送更改”作为提交消息，因为它是尝试推送（而不是拉取）的行为导致了神秘的挂起更改出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:29:40.273

您可以复制并发布错误消息，下次发生时？帮助内容 -> Git 命令日志也会有所帮助。Fred 是否检查了 Auto pull on denied 选项（FormPush -> 高级选项）？

# sql - 如何查询 int 列的任何值？

> ID：10622260
> 
> 赞同：21
> 
> 时间：2012-05-16T15:59:22.570
> 
> 标签：sql, sql-server-2008, tsql, select

如何查询该列中的任何值？（即。我如何构建一个可以过滤值的动态 where 子句。）

我希望能够查询特定值或不查询。例如，我可能希望值​​为 1，但我可能希望它是任意数字。

有没有办法使用通配符（如“*”）来匹配任何值，以便它可以动态插入到我不需要过滤器的地方？

例如：

```
select int_col from table where int_col = 1  // Query for a specific value
select int_col from table where int_col = *  // Query for any value 
```

我不想使用 2 个单独的 SQL 语句的原因是因为我将它用作 SQL 数据源，它只能有 1 个 select 语句。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-16T16:09:21.920

> 有时我会查询实际值（如 1、2...），所以我也不能没有条件。

我认为您希望您的`WHERE`条款有一些动态行为，而不必动态*构建*您的`WHERE`条款。

使用单个参数，您可以像这样使用`ISNULL`（或`COALESCE`）：

```
 SELECT * FROM Table WHERE ID = ISNULL(@id, ID) 
```

它允许一个`NULL`参数匹配所有。有些人更喜欢更长但更明确的：

```
 SELECT * FROM Table WHERE (@id IS NULL) OR (ID = @id) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T16:04:14.003

一个简单的答案是：IS NOT NULL。但是，如果您要求 123* 表示 123456 或 1234 或 1237 等数字，那么您可以将其转换为 varchar，然后使用标准通配符进行测试。

在你的 where 子句中：`cast(myIntColumn as varchar(15)) like '123%'`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-16T16:09:18.003

假设您要过滤的值是存储过程中的参数，或者包含在名为 的变量中`@Value`，您可以这样做：

```
select * from table where @Value is null or intCol = @Value 
```

如果`@Value`为 null `or`，则忽略子句的部分，因此查询不会在 intCol 上过滤。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T16:05:21.250

数字通配符的等价物是比较器。

所以，如果你想找到所有的正整数：

```
select int_col from table where int_col > 0 
```

一百到一千之间的任何数字：

```
select int_col from table where int_col BETWEEN 100 AND 1000 
```

等等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T16:06:23.627

我不太明白你在问什么。我认为您应该针对不同的情况使用两个不同的查询。

**当您不寻找特定值时：**

```
SELECT * FROM table 
```

**当您正在寻找特定值时：**

```
SELECT * FROM table WHERE intcol = 1 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-16T16:02:32.107

您可以通过为 NULL 分配特殊含义来将参数用作通配符：

```
DECLARE @q INT = 1
SELECT * FROM table WHERE IntegerColumn = @q OR @q IS NULL 
```

这样，当你传入 NULL 时；你得到所有的行。

如果 NULL 是要查询的有效值，则需要使用两个参数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-16T16:18:19.810

如果您真的想要表格上所有行的列值，您可以简单地使用

```
select int_col
  from table 
```

如果您想知道所有不同的值，但不关心它们重复了多少次，您可以使用

```
select distinct int_col
  from table 
```

如果您想知道所有不同的值以及它们各自出现的次数，请使用

```
select int_col, count(*)
  from table
  group by int_col 
```

要正确排序值，您可以添加

```
 order by int_col 
```

以上所有查询。

分享和享受。

# ruby-on-rails - 是否有更“活动记录”的正确方法来编写此查询？

> ID：10622264
> 
> 赞同：0
> 
> 时间：2012-05-16T15:59:49.823
> 
> 标签：ruby-on-rails, activerecord

以下工作正常，但似乎我可能没有在我应该使用的rails中使用某些东西。工作位是：

```
MaxOffer.joins("JOIN items ON items.id = max_offers.item_id")
        .order('amount_in_cents desc')
        .where('items.id = 20')
        .limit(5).collect do |moffer| 
```

起初我以为我不必显式使用连接，因为模型是：

```
class MaxOffer < ActiveRecord::Base
  belongs_to :item
  belongs_to :user

class User < ActiveRecord::Base
  has_many :bids
  has_many :max_offers 
```

但是当我尝试简单地`item.id`在 where 子句中使用时出现错误。有没有更合适的方法来做到这一点，或者明确包括加入是必要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:04:17.063

鉴于 MaxOffer 和 Item 之间的关系，这应该有效：

```
MaxOffer.joins(:item)
    .where('items.id = ?', 20)
    .order('amount_in_cents desc')
    .limit(5).collect do |moffer| 
```

我会同时运行它们并查看生成的 sql 以查看是否存在差异。

# c# - ContractClassFor 属性

> ID：10622267
> 
> 赞同：7
> 
> 时间：2012-05-16T16:00:04.003
> 
> 标签：c#, attributes

什么是我什么时候使用

```
[ContractClassFor(typeof())] 
```

MSDN 的解释并没有告诉我太多。谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T16:04:31.547

此属性允许您为接口定义代码协定条件。有关更多详细信息，以下站点可能有用[http://devjourney.com/blog/code-contracts-part-5-abstract-types-and-interfaces/](http://devjourney.com/blog/code-contracts-part-5-abstract-types-and-interfaces/)

更新：似乎凯文已经删除了内容。可以在此处找到内容的缓存：http: [//web.archive.org/web/20120105070912/http ://devjourney.com/blog/code-contracts-part-5-abstract-types-and-interfaces/](http://web.archive.org/web/20120105070912/http://devjourney.com/blog/code-contracts-part-5-abstract-types-and-interfaces/)

# python - 在脚本中从 IPython 交互式命名空间访问变量

> ID：10622268
> 
> 赞同：18
> 
> 时间：2012-05-16T16:00:05.127
> 
> 标签：python, ipython

是否有一种简单的方法可以访问 IPython 交互式命名空间中的变量。在实现具有慢速加载命令的项目时，我想运行一个脚本将数据加载到交互式工作空间中，然后调用第二个使用数据的脚本，就像 MATLAB 一样。

在这个简单的情况下，我想做的是

```
In [20]: a=5

In [21]: run tst 
```

tst.py 只是

```
print a 
```

这个想法是我想运行一次加载脚本，然后只在 tst.py 上工作。

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-16T16:36:46.827

尝试在 IPython 的魔法运行命令上使用 -i 选项；它使脚本使用当前的交互式命名空间运行，例如

加载.py：

```
a = 5 
```

tst.py：

```
print a 
```

从 IPython 我得到；

```
In [1]: from load import *

In [2]: run -i tst
5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T16:34:39.100

没有简单或聪明的方法可以做到这一点。一种方法是`main`在您的测试函数中有一个函数，然后`globals`从您的环境中传入以更新`globals`调用者中的。例如：

tst.py

```
def main(borrowed_globals):
    globals().update(borrowed_globals)
    print a 
```

然后在 iPython 中：

```
In [1]: a = 5

In [2]: import tst

In [3]: tst.main(globals())
5 
```

# ios - 发现 iOS 应用购买日期

> ID：10622270
> 
> 赞同：3
> 
> 时间：2012-05-16T16:00:11.310
> 
> 标签：ios

我明确不是指应用内购买。

是否可以在 iOS 上发现应用程序本身的购买日期？

我想奖励早期购买者。奖励早期用户（那些启动应用程序的用户）**不是**要走的路。我想奖励购买游戏的人，例如，在 1 月 1 日至 1 月 31 日之间，甚至是在 2 月 28 日首次发布的那部分客户。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-16T20:26:59.830

只是为了更新这个，这是可能的。看看这个问题的答案——收据中的一个字段是“原始购买日期”。还有一个来自 WWDC13 的视频/演示文稿讨论了这一点 - “使用收据保护您的数字销售”

[在 iOS 7 上本地验证应用内收据和捆绑收据的完整解决方案](https://stackoverflow.com/questions/19943183/a-complete-solution-to-locally-validate-an-in-app-receipts-and-bundle-receipts-o)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T16:01:55.867

我几乎肯定这是不可能的。

但是，您可能会存储他们第一次“启动”应用程序的日期，然后用它做任何你想做的事情。

```
if ([[[[NSUserDefaults standardUserDefaults] dictionaryRepresentation] allKeys] containsObject:@"firstLaunch"]) {
    [[NSUserDefaults standardUserDefaults] setObject:[NSDate date] forKey:@"firstLaunch"];
}

NSDate *firstLaunch = [[NSUserDefaults standardUserDefaults] objectForKey:@"firstLaunch"];

if (firstLaunch < Cutoff) {
    // Do Something
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-16T16:01:55.460

不幸的是，这是不可能的。

# sql-server-2008 - 在一个语句中获取 2 个不同列的计数

> ID：10622273
> 
> 赞同：2
> 
> 时间：2012-05-16T16:00:17.123
> 
> 标签：sql-server-2008, tsql, count

我正在尝试从 2 个工作表中计数，但我很挣扎！

我有一个包含笔记本项目的表格、一个包含联系人链接的表格、一个将联系人链接到客户的表格以及一个将客户链接到地址的表格。我要做的是找出每个邮政编码按联系人和客户分组的邮件发送次数。

```
Postcode | Count of Clients | Count of Contacts    
UB | 123 | 12345    
HA | 223 | 22345 
```

但是，显然，联系人和客户的数量相同。尝试将其放入嵌套选择语句中时，我感到非常困惑，因为我总是遇到错误，因此不胜感激！

```
select COUNT (ni.NotebookItemId) AS Clients, 
COUNT(nl.ObjectId) AS Contacts, 
Substring(ad.PostCode, 1, 2) AS Postcode
from NotebookItems ni
inner join notebooklinks nl on ni.NotebookItemId = nl.NotebookItemId
inner join ClientContacts cc on cc.ContactPersonId = nl.ObjectId
inner join address ad on ad.ObjectId = cc.ClientId
where NotebookTypeId = 75 AND ni.CreatedOn > 'mar 16 2012' 
AND (ad.postcode like 'UB%' or 
     ad.postcode like 'HA%')
GROUP BY Substring(ad.PostCode, 1, 2)
order by Contacts desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:29:57.580

Count() 将计算所有非空行，正如安德鲁所说，您可能会追求：`COUNT(DISTINCT thing)`即：

```
select COUNT (DISTINCT ni.NotebookItemId) AS Clients, 
COUNT(DISTINCT nl.ObjectId) AS Contacts, 
Substring(ad.PostCode, 1, 2) AS Postcode
... 
```

然后，您将获得每个字段中不同值的两个计数。

我不确定这是你想要的。你说：

> 我要做的是找出每个邮政编码按联系人和客户分组的邮件发送次数。

我希望像这样查询数据：

```
SELECT 
      Count(MailshotID) AS Count
    , Substring(address.PostCode, 1, 2) AS Postcode
    , ContactID
    , ClientID
FROM
    -- your joined tables here
WHERE
    -- your criteria here
GROUP BY 
      Substring(address.PostCode, 1, 2)
    , ContactID
    , ClientID 
```

要得到：

```
Count   Postcode   ContactID  ClientID
3       UB         201        301
6       HA         202        302
2       UB         203        305
18      UB         203        306 
```

这是“每个邮政编码、联系人和客户”或“按邮政编码、联系人和客户分组”的邮件数量。

# phpunit - PHPUnit Selenium2 - 无浏览器实例

> ID：10622277
> 
> 赞同：2
> 
> 时间：2012-05-16T16:00:23.200
> 
> 标签：phpunit, selenium-webdriver

当我甚至在命令行中的 Netbeans IDE 中运行示例测试时，例如：

```
class WebTest extends PHPUnit_Extensions_Selenium2TestCase
{
protected function setUp()
{
    $this->setBrowser('firefox');
    $this->setBrowserUrl('http://www.example.com/');
}

public function testTitle()
{
    $this->url('http://www.example.com/');
    $this->assertEquals('Example WWW Page', $this->title());
}

} 
```

我得到了 PHPUnit 响应，但它似乎没有与 Selenium 服务器通信，因为没有创建浏览器窗口。

```
PHPUnit 3.6.10 by Sebastian Bergmann.

Configuration read from /var/www/gcd/framework/yii/gadget/protected/tests/phpunit.xml

F

Time: 1 second, Memory: 10.50Mb

There was 1 failure:

1) WebTest::testTitle
Failed asserting that null matches expected 'Example WWW Page'. 
```

使用 PHPUnit 3.6.10 和 selenium-server-standalone-2.21.0

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:02:03.697

事实证明，如果你用 sudo 运行 PHPUnit，它就可以工作！嗬！

# c# - 动态 C# 订阅事件在回发时丢失

> ID：10622280
> 
> 赞同：1
> 
> 时间：2012-05-16T16:00:34.770
> 
> 标签：c#, asp.net, events

伙计们，我有一个简单的动态对象列表，每个对象都会订阅一个事件来触发以使您单击。

该事件的作用是从基础中删除该对象，然后再次渲染对象，其中事件应再次重新订阅。

```
private void BindTable()
    {
        PersonsManager manager = new PersonsManager();
        pnlPersons.Controls.Clear();

        foreach (var person in Persons)
        {
            PersonControl personControl = (PersonControl)Page.LoadControl("~/Widgets/PersonControl.ascx");
            personControl.Person = person;
            personControl.BeginSelect += new SelectPersonEventHandler(personControl_BeginSelect);

            pnlPersons.Controls.Add(personControl);
        }

    }

protected void personControl_BeginSelect(object sender, SelectPersonEventArgs e)
    {
        PersonsManager manager = new PersonsManager();
        manager.DeletePerson(e.Person.Id);
        Persons.Remove(e.Person);

        BindTable();
    } 
```

问题是一旦触发事件第一次回发并重新加载列表。但是，如果我想在另一个项目中再次拍摄该事件，我单击两次即可工作！

可以解决这个问题吗？知道了？

我希望我能帮上忙！问候！

# jquery - jQuery index() 的问题

> ID：10622286
> 
> 赞同：1
> 
> 时间：2012-05-16T16:00:55.843
> 
> 标签：jquery

我有一组图像用作幻灯片放映。我正在使用的 javascript 查看哪个图像上有 .active 类，以了解正在显示哪个图像。问题是，jQuery 的 .index() 函数没有像我期望的那样工作。因此对于：

```
<div id="Phase1">    
    <img src="_images/Phase1-Slide1.jpg" alt="1" class="active">
    <img src="_images/Phase1-Slide2.jpg" alt="2">
    <img src="_images/Phase1-Slide3.jpg" alt="3">
    <img src="_images/Phase1-Slide4.jpg" alt="4">
    <img src="_images/Phase1-Slide5.jpg" alt="5">
    <img src="_images/Phase1-Slide6.jpg" alt="6">
</div> 
```

相关的javascript：

```
// works fine
var i = $(".active").index("img");
alert(i);  

// does not work
var i = $(".active").index("#Phase1 img");
alert(i); 
```

我需要能够指定父 div，因为我正在使用 2 个幻灯片，它们每个都有不同的活动图像和不同的图像总数。

我尝试了所有不同的方法，但无法让它与父 div 一起使用。**这是小提琴：http: [//jsfiddle.net/mBVpc/](http://jsfiddle.net/mBVpc/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:03:51.543

试试这个：

```
$('#Phase1 img.active').index(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:05:10.590

我想你想要这个：

```
var i = $("#Phase1 .active").index("img"); 
```

原因是`index()`在基于选择器的元素集合上调用它，因此您必须在尝试获取索引之前进行所需的选择（在这种情况下，`.active`id 为 的 div 中的类元素`#Phase1`，即我们的选择器返回什么）。

# linux - ssh-add 的钥匙串

> ID：10622291
> 
> 赞同：9
> 
> 时间：2012-05-16T16:01:18.093
> 
> 标签：linux, bash, ssh, keychain, sh

我需要一直从 Github 中提取并且我有一个密码，但这很痛苦，所以我通常会运行......

```
ssh-agent bash
ssh-add ~/.ssh/id_rsa
<prompt and give passphrase> 
```

这适用于会话，但即使在我注销后，我希望它在下次我使用 PuTTY 时保存密码。所以我安装了钥匙串，但我太笨了，无法操作它。我试过这个...

```
/usr/bin/keychain ~/.ssh/id_dsa 
```

它说它添加了我的密码，但它不起作用:(

我将如何调用钥匙串以保存我的 Git 密码？

编辑：很抱歉在stackoverflow上发布这个，它在技术上*确实*与编程有一些相关性，因为它与Git有关，但我很抱歉没有在SuperUser上发布它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T19:42:46.067

您实际上需要以不同的方式调用钥匙串。将以下内容添加到您的**~/.bashrc**文件中：

```
eval `keychain --eval id_rsa` 
```

有关如何为您的特定外壳或系统正确设置它的更多信息，或者如果您有更复杂的要求，请参阅[钥匙串文档。](http://www.funtoo.org/wiki/Keychain)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-17T13:25:52.170

好吧，这是我能想到的最好的……

安装钥匙扣...

然后将以下内容添加到**~/.bashrc**文件中：

```
eval `keychain --eval id_rsa` 
```

然后将以下内容添加到**~/.bash_profile**：

```
ssh-agent bash 
```

这将启动钥匙串。它并不像将两者都放入 bash 配置文件或 bashrc 文件那么简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T16:21:56.060

可以这么说，您必须将密钥保持在“持久”状态。这可以通过让代理在本地打开一个代理来完成，并结合 - 在 openssh 的情况下 - `ssh -A`。然后，远程服务器上的 ssh-add 将导致密钥被打开并保留在本地桌面上，这样，当在远程端再次登录时，密钥已经可用。

# java - 将多行写入文件

> ID：10622298
> 
> 赞同：0
> 
> 时间：2012-05-16T16:01:32.053
> 
> 标签：java, file-io

单击 JButton 时，我正在尝试将时间戳写入文件。一旦`.close()`被调用，数据就会被写入文件，任何其他写入都会引发错误。如何在不必创建新的 FileWriter 并覆盖上一行的情况下写入数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:05:14.340

而不是关闭，它隐含地执行此操作，而是调用`flush()`对象`FileWriter`。这使它保持打开状态，但会强制将已缓冲的数据写入文件。不要忘记`close()`当你写完的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:08:40.210

您可以在单击之间保持编写器打开并在其他时间关闭它（可能在表单退出时），或者您可以为每次单击创建一个新的 FileWriter 并将其附加到文件中已有的内容。

```
FileWriter writer = new FileWriter("output.txt", true); //true here indicates append to file contents 
```

如果您选择在两次点击之间保持编写器打开，那么您可能希望在每次按下按钮时调用 .flush() 以确保文件是最新的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T18:32:03.817

尝试这个，

```
import java.io.BufferedWriter;

import java.io.File;

import java.io.FileWriter;

import java.io.IOException;

public class Wr {

    public static void main(String[] args) throws IOException {

    File f = new File("viv.txt");

    FileWriter fw = new FileWriter(f, true);

    BufferedWriter bw = new BufferedWriter(fw);

    bw.write("Helloooooooooo");

    bw.close();

    }
} 
```

# perl - 我可以在不先将对象保存到变量的情况下调用 Perl OO 函数吗？

> ID：10622299
> 
> 赞同：4
> 
> 时间：2012-05-16T16:01:35.947
> 
> 标签：perl, oop, function, methods, handle

如何将这两个语句片段转换为单个语句？

```
my $handle = &get_handle('parameter');
$handle->do_stuff; 
```

类似的东西`{&get_handle('parameter')}->do_stuff;`，但正确的语法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T16:12:17.347

不需要在`->`. 它可以是任何表达式，因此您可以简单地使用

```
get_handle('parameter')->do_stuff 
```

这实际上很常见。例如，

```
$self->log->warn("foo");          # "log" returns the Log object.
$self->response->redirect($url);  # "response" returns a Response object.
$self->config->{setting};         # "config"s return a hash. 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-16T16:07:10.203

```
get_handle('parameter')->do_stuff 
```

相关：[什么时候应该使用 & 来调用 Perl 子例程？](https://stackoverflow.com/questions/1347396/when-should-i-use-the-to-call-a-perl-subroutine)

# css - 使用 SED 和 RegEx 在数百个 CSS 文件的链接中添加下划线

> ID：10622300
> 
> 赞同：2
> 
> 时间：2012-05-16T16:01:36.880
> 
> 标签：css, regex, linux, sed

我有数百（超过 700）组网络文件夹，每组都包含离散的 CSS 样式表。（如果您好奇，它们是在线课程。）

最近做出了一个决定，链接应该有下划线。我知道 W3C 很久以前就决定了，但这是一所大学，他们喜欢重新决定事情。

我一直在尝试使用 RegEx 搜索和替换来更新所有 CSS 文件。

迄今为止的主要障碍是：

*   视窗。我不喜欢它，我没有使用它。FART 之类的命令行实用程序非常适合单行内容，但事实证明，编写更自定义和更强大的搜索对它来说太过分了。
*   多线。CSS 文件的结构通常是这样的：

    ```
    a, .surveypopup{
    text-decoration:none;
        cursor:pointer;
    } 
    ```

    这意味着选择器（“{”之前的部分）始终与好东西位于不同的行上。我想匹配所有在没有事件的情况下修改“a”的选择器（例如：hover），并确保任何带有“text-decoration：none”的内容都变为“text-decoration：underline”，而不会弄乱任何其他可能夹在中间的样式代码之间。

*   不区分大小写。对于 RegEx，这应该不是问题。这个 CSS 的作者可能会也可能不会对他们的大写进行创意。

我目前出错的命令行是这样的：

```
find . -iname "*.css" | xargs sed -i "" "s|\(\ba\(,\|\.\|\s\|\b\)\[^\{\]\*\{\[^\}\]\*\)text-decoration\:none|a.\1text-decoration:underline;|g" 
```

产生：

```
sed: 1: "s|\(\ba\(,\|\.\|\s\|\b\ ...": RE error: invalid repetition count(s) 
```

我想知道我的需求是否证明编写 bash 脚本是合理的？如果需要修改，最好为每个文件创建一个备份。像这样的多个操作在脚本中会更容易......

无论哪种方式，我认为我遇到了问题，因为我不知道 sed 应该逃避什么，什么不应该逃避。

请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T16:42:22.567

一次对整个文件进行操作，您可以使用：

```
s/(\ba(?=(?:\.|,|\s|{|#)))([^}{]*?{[^}]*?text-decoration:\s*)none(\s?!important)?;/$1$2underline;/g 
```

格式更好，这是：

```
s/                          # find and replace
    (                       # group 1
        \b                  # a word boundary
        a                   # followed by 'a'
        (?=                 # where the next character (positive lookahead)
            (?:             # (inside a non-capturing group)
              \.|,|\s|{|#   # is one of '.', ',', '{', '#' or whitespace
            ) 
        )
    )
    (                       # group 2
        [^}{]*?             # then non-greedily match anything up to a '{' or '}'
                            # if '}' is found, the next character will not match
                            # and therefore the whole regex will not match
        {                   # and find the '{'
        [^}]*?              # and then non-greedily match anything until we 
                            # find 'text-decoration', but don't keep matching
                            # when a '}' is found
        text-decoration:    # then find 'text-decoration'
        \s*                 # and optional whitespace
    )
    none                    # and 'none'
    (\s?!important)?        # and optional '!important'
    ;                       # and a ';'
/
    $1                      # replace by group 1
    $2                      # then group 2
    underline;              # then 'underline;'
/g 
```

示例文件：

```
$ cat test.css
a { text-decoration: none; }
b, a { text-decoration: none; }
b, a, u { text-decoration: none; }
b, a.cat, u { text-decoration: none; }
b, a.cat, u { text-decoration: none !important; }
b, a, u {
    text-decoration: none;
}
b, a, u {
    color: red;
    text-decoration: none;
}
b, a, u {
    color: red;
    text-decoration: none;
    padding: 10px;
} 
```

结果：

```
perl -0777 -p -e 's/(\ba(?=(?:\.|,|\s|{|#)))([^}{]*?{[^}]*?text-decoration:\s*)none(\s?!important)?;/$1$2underline;/g' test.css
a { text-decoration: underline; }
b, a { text-decoration: underline; }
b, a, u { text-decoration: underline; }
b, a.cat, u { text-decoration: underline; }
b, a.cat, u { text-decoration: underline; }
b, a, u {
    text-decoration: underline;
}
b, a, u {
    color: red;
    text-decoration: underline;
}
b, a, u {
    color: red;
    text-decoration: underline;
    padding: 10px;
} 
```

您可以使用 perl 的`-i`标志（不要忘记设置备份扩展名！）对文件进行就地操作。

显然还有很多其他可能的 CSS 规则可以包括`a`; 例如`html>a`或`div a b`；这个正则表达式不会找到第一个，会找到第二个，但在这两种情况下都是“错误的”。基本上，只有当您可以对您正在操作的文本做出强有力的假设时，您才能将正则表达式用于这些类型的任务。

**更新**添加`}`到规则的一部分以避免匹配，例如：

```
b { background-image: url('http://domain.com/this is a picture.jpg'); }
u { text-decoration: none; } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T16:59:54.130

您不应该使用 RegEx 来解析 CSS。改为使用 CSS 解析器，您将为自己省去很多麻烦。

# java - 客户端/服务器多人生存游戏应该使用什么？爪哇

> ID：10622301
> 
> 赞同：2
> 
> 时间：2012-05-16T16:01:40.300
> 
> 标签：java, sockets, data-representation

我正在用java制作游戏，进展顺利。我想尽早实现多人游戏，所以我在它的基础上进行构建，而不是将整个游戏移植到多人游戏中，因为它具有大量不同的功能。我想让它成为客户端/服务器应用程序。现在我确定如何或如何实现多人游戏。我已经阅读了有关套接字和所有内容的 java 教程，我对它们进行了测试并成功连接（在测试项目中）。我不知道从这里去哪里。我不知道我将如何转移例如地图上不同玩家的位置，或者甚至是否有任何玩家。我不知道是使用图书馆还是自己做还是什么...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T19:01:55.610

这是一个相当广泛的问题，有多种方法可以做事，但这是我的看法。免责声明：我是一家移动多人游戏公司的服务器系统架构师。我不认为自己是这方面的专家，但由于我的工作和爱好，我确实有一些经验（我在 2004 年编写了我的第一个“MMORPG”，支持了高达 255 名玩家），并且觉得我可以戳你在正确的方向。对于这里的大多数概念，我仍然建议您使用 Google、Stackoveflow 等进行进一步研究，这只是我对游戏联网所需的“10000 英尺视图”。

根据您制作的游戏类型（想想第一人称射击游戏等实时游戏与国际象棋等回合制游戏），底层传输层协议的选择很重要。就像 Matzi 建议的那样，UDP 为您提供更低的延迟（以及更低的数据包开销，因为标头小于 TCP），但不利的一面是，永远无法保证将数据包传送到目的地，即。您永远无法确定您发送的数据是否真的到达了客户端，或者，如果您连续发送多个数据包，数据是否以正确的顺序到达。您可以通过使用单独的消息确认到达的数据来实现“可靠的 UDP”协议（尽管同样，如果确认使用 UDP，它们也可能会丢失）并通过一些额外的数据处理订单，但是您（在至少部分）失去了较低的延迟和较低的开销。另一方面，TCP 保证数据的传递和顺序保持正确，但由于数据包确认和开销（TCP 数据包具有更大的标头）而具有更高的延迟。您可以说 UDP 数据包有点像“单独的实体”，而 TCP 是一个连续的、不间断的流（您需要某种方法来区分一个消息在哪里结束，另一个消息在哪里开始）。

有些游戏同时使用两者；用于绝对必须发送到客户端的重要数据的单独 TCP 连接，例如玩家死亡等，另一个用于“即发即弃”类型数据的 UDP 连接，例如玩家的当前位置（如果位置确实没有到达另一个客户端，并且玩家正在移动，再次发送数据没有多大意义，因为它可能已经过时了，很快就会有另一个更新）。

在为传输选择了 UDP 和/或 TCP 之后，您可能仍然需要一个自定义协议来编码和解码 TCP/UDP 数据包移动的数据（“有效负载”）。对于游戏，显而易见的选择是一些[二进制协议](http://en.wikipedia.org/wiki/Binary_protocol)（与 HTTP 等基于文本的协议相比）。例如，一个简单的二进制协议可以标记消息中包含的总字节数，然后是数据类型、数据字段长度和字段的实际数据（重复每个消息的字段数）。这可能有点棘手，因此至少对于初学者来说，您可以使用诸如序列化和反序列化消息对象之类的方法，然后查看现有协议或自己编写协议（实际上并不难）。当您获得基本数据类型（如字符串、整数、浮点数......）的编码和解码工作以及一些数据移动时，您需要设计自己的高级协议，这实际上是您的游戏和服务器的消息用来互相交谈。这些消息是“玩家加入游戏”、“玩家离开游戏”、“

在实时游戏中，您还面临一些其他挑战，例如预测玩家的位置（请记住，客户端发送的数据很容易在数百毫秒前到达另一个玩家客户端，因此您需要“猜测”在哪里玩家到达时）。尝试使用谷歌搜索“游戏航位推算”和“游戏网络预测”等内容，Gamasutra 也有一篇很好的文章：航位[推算：网络游戏的延迟隐藏](http://www.gamasutra.com/view/feature/3230/dead_reckoning_latency_hiding_for_.php)，可能还有很多其他内容可以找到。

您需要考虑的另一件事是服务器端代码的并发性。很多人会告诉您，您需要使用 Java NIO 来获得良好的性能，并且每个连接使用线程是不好的，但实际上至少在 Linux 上使用 Native Posix 线程库（NPTL，几乎任何现代 linux 发行版都会将其排除在外）框），情况相反，供参考，请参见此处：[Writing Java Multithreaded Servers - whats old is new](http://paultyma.blogspot.com/2008/03/writing-java-multithreaded-servers.html)。我们有服务器运行 10k+ 线程，有数千名用户并且没有阻塞（当然，在任何给定时间，这些线程中的绝大多数都将处于休眠状态，等待客户端消息或消息发送到客户端）。

最后，您需要衡量您的游戏需要多少计算能力和带宽。为此，您需要测量某个（服务器？）硬件可以为您的软件带来多少负载，以及您的游戏会带来多少流量。这对于确定您的服务器可以支持多少客户端以及您需要多快的网络连接（以及每月多少流量配额）非常重要。

希望这有助于回答您的一些问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T16:26:38.283

首先，多人游戏使用 UDP 进行数据传输。这有很多原因，例如较低的延迟等。如果您的游戏包含密集动作，并且需要快速反应，那么您应该选择基于 UDP 的东西。

可能有网络游戏的解决方案，但编写自己的实现也不是那么难。如果您对此有疑问，您可能会在游戏的其余部分遇到问题。网络上甚至 java 中都有非面向游戏的库和解决方案，但它们大多不是为像游戏一样快的东西而设计的。例如，远程过程调用可能包含昂贵的序列化并生成比您真正需要的大得多的包。它们可以是方便的解决方案，但考虑到游戏而不是常规的商业应用程序，它们的性能很差。

例如，如果您有 20 个玩家，每个玩家都有坐标、状态，当然还有移动对象。您需要每秒至少 20 次更新才能没有太多延迟，这意味着大量流量。带有用户输入的 20*20 传入消息，以及包含大量信息的 20*20 传出消息。算一算。您必须尽可能将所有播放器和尽可能多的对象数据压缩到一个包中，以获得最佳性能。这意味着您可能必须编写可以很容易地序列化为字节流的小型数据包，并且它们必须只包含可行的信息。如果您丢失了一些数据，这不是问题，但您需要注意重要信息以确保它们到达目的地。例如，您不希望玩家错过有关他们死亡的消息。

我用C#写了一个可靠可用的网络“库”，工作量不大，但建议环顾四周，把它建好。这是一篇关于这个主题的[好文章](http://gafferongames.com/networking-for-game-programmers/)，阅读它。即使您使用外部库，最好了解它在做什么以及应该如何使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T16:12:09.610

对于虚拟机之间的通信，它并没有比[RMI](http://docs.oracle.com/javase/tutorial/rmi/index.html)简单得多。使用 RMI，您可以在完全不同的计算机上调用对象的方法。您可以使用整个对象作为参数和返回值。因此，通知服务器您的移动可以像`server.sendMove(someMoveObject, somePlayerObject, someOtherObject)`.

如果您正在寻找一个起点，这可能是一个很好的起点。

# regex - 匹配n个括号的正则表达式

> ID：10622302
> 
> 赞同：3
> 
> 时间：2012-05-16T16:01:42.183
> 
> 标签：regex

我需要解析以下形式的表达式：

(S (A (B (D xyz)) (C m)))

( 的数量总是等于 ) 的数量，但是 (S ) 之间可以有任意数量的左括号和右括号对。在这种情况下，我想提取 (A (B (D xyz)) (C m))。文件中可能有任意数量的 (S ) 子句，所以我不能简单地进行 ^(S .* )$ 类型的模式匹配。

如果我知道 (S) 之间潜在的左括号和右括号对的数量，这不会那么困难，但我不确定如何编写一个知道匹配任意数量的 () 的正则表达式。

获得正则表达式模式的任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:06:01.760

使用纯正则表达式不可能匹配任意数字。换句话说，当您生成/编写正则表达式时，您无法匹配一个未知的计数是不可能的。只要您知道生成正则表达式时，匹配`n`对（无论多么高）都是可能的。`n``n`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:03:01.360

这在理论上是做不到的，只有在预先知道最大嵌套括号数的情况下才能在实践中完成。该解决方案需要一种相当不愉快的表达方式，并且通常被尝试作为一种好奇的家庭作业。这是一个[链接](http://blogs.msdn.com/b/jaredpar/archive/2008/10/15/regular-expression-limitations.aspx)，可以更好地解释为什么正则表达式语言不足以解决匹配括号问题。

你需要一个解析器来解决这个问题；一个简单的[递归下降](http://en.wikipedia.org/wiki/Recursive_descent_parser)就可以了。上面链接中的维基百科文章有一个 C 语言示例实现，您应该能够相对轻松地将其翻译成其他语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T18:53:59.920

可能记录下降解析将是最好的选择。但是，如果您只想找到 (S) 平衡，则可以使用在引擎中进行递归的正则表达式来完成。

它会找到最外在的平衡。如果您正在寻找像 (S(S)) 这样的嵌套，可能涉及递归调用实现正则表达式的函数，传递成功匹配的“核心”。并可能在此过程中创建父子结构。但如果涉及到这个，真正的解析器可能是解决方案。

如何用 Perl 正则表达式解决它 -

```
$str = '(some (stuff  (S (A (B (D xyz)) (C m))) the end ) (S extra))';

$regex = qr~
[(]
\s* S \s*
(                   # 1
    (                       # 2
      [(]
      (?:  (?> [^()]+ ) 
        |  (?2)                                         
      )*                                               
      [)]
    )
 |
    [^)]*
)
[)]
~x;

while ($str =~ /$regex/g)
{
    print "found '$1'\n";
} 
```

印刷

```
found '(A (B (D xyz)) (C m))'
found 'extra' 
```

# java - 在 JLabel 怪异中加载动画 GIF

> ID：10622303
> 
> 赞同：6
> 
> 时间：2012-05-16T16:01:44.633
> 
> 标签：java, swing, jlabel, animated-gif

我正在尝试在 JLabel 中加载动画 GIF。

虽然这有效：

```
URL urlsd;
try {
    urlsd = new URL("http://pscode.org/media/starzoom-thumb.gif");
    ImageIcon imageIcon = new ImageIcon(urlsd); 
    JLabel progress = new JLabel(imageIcon);    
    progress.setBounds(5, 20, 66, 66);
    contentPane.add(progress);
} catch (MalformedURLException e) {
    e.printStackTrace();
} 
```

另一方面，这不会，而且我不想从 URL 获取 GIF，因为我已经有了 GIF。加载结果仅显示 GIF 的第一帧：

```
try {   
    ImageIcon imageIcon = new ImageIcon(ImageIO.read(ClassLoader.getSystemResourceAsStream("res/images/progress_indicator.gif")));

    JLabel progress = new JLabel(imageIcon);
    imageIcon.setImageObserver(progress);
    progress.setBounds(5, 20, 66, 66);
    contentPane.add(progress);
} catch (MalformedURLException e) {

    e.printStackTrace();
} 
```

我想这一定是有原因的，但我找不到。

谢谢！亚历克斯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T16:35:10.337

您可以尝试像这样加载您的 GIF 文件：

```
public class Test extends JPanel {
    public Test() {
        ImageIcon imageIcon =
          new ImageIcon(Test.this.getClass().getResource("starzoom-thumb.gif"));
    }
} 
```

或者，`Test.class.getResouce()`如果您的上下文是静态的，则使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-04T18:31:31.393

所以还有一种更简单的方法。以下是我的做法。

```
this.setContentPane(new JLabel(new ImageIcon("Path To Gif File"))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-09T07:42:55.423

下面的代码对我有用，它将显示动画而不是图像的第一帧。

```
public class Test extends JPanel {
    public Test() {
        ImageIcon yyyyIcon = new ImageIcon(xxx.class.getClassLoader().getResource("yyyy.gif"));
        connectionLabel.setIcon(yyyy);   
    }
} 
```

# c# - 浏览数据库中的图像

> ID：10622304
> 
> 赞同：1
> 
> 时间：2012-05-16T16:01:52.647
> 
> 标签：c#, asp.net, .net, database

基本上我有一个页面 default.aspx，上面有一个图像控件。当页面加载时，该图像控件的 url 设置为 ShowImage.ashx。然后使用通过 ShowImage 处理程序从数据库调用的图像填充图像。

我了解会话和传递值，但是，当用户单击“下一步”或“返回”时，我们如何浏览图像？

我试图获取 ShowImage 会话 id 并减去 1 并为下一个添加一个，但它不起作用。

我将如何去做？有没有更简单的方法来做到这一点。我的目标是制作一个用户可以轻松浏览的图片网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:08:33.557

听起来您将图像 ID 存储在会话状态中并在处理程序中获取它。

在这种情况下，确实没有理由在会话状态中存储任何内容，并且绝对*不*应该使用它来将值从一个地方传递到另一个地方——你最终会创建一个非常不稳定的应用程序。您应该将 URL 中的图像 id 传递给处理程序（例如`ShowImage.ashx?imageId=1`），然后更改图像只是更改此 url 的一种情况。

# android - android.view.InflateException：在意图上

> ID：10622305
> 
> 赞同：0
> 
> 时间：2012-05-16T16:01:53.147
> 
> 标签：android, memory, layout

我收到 InflatException 的意图有问题。当我单击作为菜单的主活动的任何按钮时，就会发生这种情况。根据日志 Cat 我知道问题应该出在主 Activity 的 xml 上。

我试图压缩更多主 Activity 的图像但没有，所以我想使用 finish(); 调用意图后会释放内存来帮助我解决这个问题，但没有任何想法，任何想法将不胜感激

更新：内存错误出现在inlfating这个布局之后，我试图启动的活动现在是空的，它只有相同的背景，我还没有编程......所以我想是一个罕见的错误

update2：选择器的所有xml文件

主活动的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/basegenerica"
    android:orientation="vertical" >

    <Button
        android:id="@+id/twtbtm"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:layout_toLeftOf="@+id/facebtm"
        android:adjustViewBounds="true"
        android:background="@drawable/tww"
        android:clickable="true"
        android:scaleType="fitStart" />

    <Button
        android:id="@+id/facebtm"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_alignParentRight="true"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:adjustViewBounds="true"
        android:background="@drawable/face"
        android:clickable="true"
        android:scaleType="fitStart" />

        <Button
            android:layout_width="fill_parent"
            android:layout_height="110dp"
            android:layout_marginLeft="30dp"
            android:layout_marginRight="30dp"
            android:layout_below="@+id/facebtm"
            android:id="@+id/logobancovw"
            android:background="@drawable/logobanco" />

        <Button
            android:id="@+id/beneficiosbtm"
            android:layout_width="fill_parent"
            android:layout_height="37dp"
            android:layout_below="@+id/logobancovw"
            android:layout_marginBottom="6dp"
            android:layout_marginLeft="35dp"
            android:layout_marginRight="35dp"
            android:adjustViewBounds="true"
            android:background="@layout/btnbeneficios"
            android:clickable="true"
            android:scaleType="fitEnd" />

        <Button
            android:id="@+id/consultabtm"
            android:layout_below="@+id/beneficiosbtm"
            android:layout_width="fill_parent"
            android:layout_height="37dp"
            android:layout_marginBottom="6dp"
            android:layout_marginLeft="35dp"
            android:layout_marginRight="35dp"
            android:adjustViewBounds="true"
            android:background="@layout/btnconsulta"
            android:clickable="true"
            android:scaleType="fitEnd" />

        <Button
            android:id="@+id/cajerobtm"
            android:layout_below="@+id/consultabtm"
            android:layout_width="fill_parent"
            android:layout_height="37dp"
            android:layout_marginBottom="6dp"
            android:layout_marginLeft="35dp"
            android:layout_marginRight="35dp"
            android:adjustViewBounds="true"
            android:background="@layout/btncajeros"
            android:clickable="true"
            android:scaleType="fitEnd" />

        <Button
            android:id="@+id/promobtm"
            android:layout_below="@+id/cajerobtm"
            android:layout_width="fill_parent"
            android:layout_height="37dp"
            android:layout_marginBottom="6dp"
            android:layout_marginLeft="35dp"
            android:layout_marginRight="35dp"
            android:adjustViewBounds="true"
            android:background="@layout/btnpromo"
            android:clickable="true"
            android:scaleType="fitStart" />

        <Button
            android:id="@+id/indicadoresbtm"
            android:layout_below="@+id/promobtm"
            android:layout_width="fill_parent"
            android:layout_height="37dp"
            android:layout_marginBottom="6dp"
            android:layout_marginLeft="35dp"
            android:layout_marginRight="35dp"
            android:adjustViewBounds="true"
            android:background="@layout/btnindicadores"
            android:clickable="true"
            android:scaleType="fitEnd" />

        <Button
            android:id="@+id/faqbtm"
            android:layout_below="@+id/indicadoresbtm"
            android:layout_width="fill_parent"
            android:layout_height="37dp"
            android:layout_marginBottom="6dp"
            android:layout_marginLeft="35dp"
            android:layout_marginRight="35dp"
            android:adjustViewBounds="true"
            android:background="@layout/btnfaq"
            android:clickable="true"
            android:scaleType="fitStart" />

        <Button
            android:id="@+id/contactobtm"
            android:layout_below="@+id/faqbtm"
            android:layout_width="fill_parent"
            android:layout_height="37dp"
            android:layout_marginBottom="6dp"
            android:layout_marginLeft="35dp"
            android:layout_marginRight="35dp"
            android:adjustViewBounds="true"
            android:background="@layout/btncontacto"
            android:clickable="true"
            android:scaleType="fitEnd" />

        <Button
            android:id="@+id/soportebtm"
            android:layout_below="@+id/contactobtm"
            android:layout_width="fill_parent"
            android:layout_height="37dp"
            android:layout_marginBottom="6dp"
            android:layout_marginLeft="35dp"
            android:layout_marginRight="35dp"
            android:adjustViewBounds="true"
            android:background="@layout/btnemergencias"
            android:clickable="true"
            android:scaleType="fitEnd" />

</RelativeLayout> 
```

错误的logCat：

```
05-16 15:53:03.864: D/dalvikvm(804): GC freed 134 objects / 5968 bytes in 51ms
05-16 15:53:04.094: D/dalvikvm(804): GC freed 104 objects / 5248 bytes in 51ms
05-16 15:53:13.714: D/dalvikvm(804): GC freed 315 objects / 19056 bytes in 54ms
05-16 15:53:14.064: E/dalvikvm-heap(804): 4830936-byte external allocation too large for this process.
05-16 15:53:14.064: E/(804): VM won't let us allocate 4830936 bytes
05-16 15:53:14.064: D/AndroidRuntime(804): Shutting down VM
05-16 15:53:14.064: W/dalvikvm(804): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
05-16 15:53:14.074: E/AndroidRuntime(804): Uncaught handler: thread main exiting due to uncaught exception
05-16 15:53:14.094: E/AndroidRuntime(804): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ketanolab.banca.movil/com.ketanolab.banca.movil.soporte}: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.os.Looper.loop(Looper.java:123)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.app.ActivityThread.main(ActivityThread.java:4363)
05-16 15:53:14.094: E/AndroidRuntime(804):  at java.lang.reflect.Method.invokeNative(Native Method)
05-16 15:53:14.094: E/AndroidRuntime(804):  at java.lang.reflect.Method.invoke(Method.java:521)
05-16 15:53:14.094: E/AndroidRuntime(804):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-16 15:53:14.094: E/AndroidRuntime(804):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-16 15:53:14.094: E/AndroidRuntime(804):  at dalvik.system.NativeStart.main(Native Method)
05-16 15:53:14.094: E/AndroidRuntime(804): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.view.LayoutInflater.createView(LayoutInflater.java:513)
05-16 15:53:14.094: E/AndroidRuntime(804):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.view.LayoutInflater.inflate(LayoutInflater.java:385)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
05-16 15:53:14.094: E/AndroidRuntime(804):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.app.Activity.setContentView(Activity.java:1622)
05-16 15:53:14.094: E/AndroidRuntime(804):  at com.ketanolab.banca.movil.soporte.onCreate(soporte.java:29)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
05-16 15:53:14.094: E/AndroidRuntime(804):  ... 11 more
05-16 15:53:14.094: E/AndroidRuntime(804): Caused by: java.lang.reflect.InvocationTargetException
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.widget.LinearLayout.<init>(LinearLayout.java:92)
05-16 15:53:14.094: E/AndroidRuntime(804):  at java.lang.reflect.Constructor.constructNative(Native Method)
05-16 15:53:14.094: E/AndroidRuntime(804):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.view.LayoutInflater.createView(LayoutInflater.java:500)
05-16 15:53:14.094: E/AndroidRuntime(804):  ... 21 more
05-16 15:53:14.094: E/AndroidRuntime(804): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.graphics.Bitmap.nativeCreate(Native Method)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.graphics.Bitmap.createBitmap(Bitmap.java:468)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.graphics.Bitmap.createBitmap(Bitmap.java:435)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:340)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:488)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:462)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:323)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.content.res.Resources.loadDrawable(Resources.java:1705)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.content.res.TypedArray.getDrawable(TypedArray.java:548)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.view.View.<init>(View.java:1850)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.view.View.<init>(View.java:1799)
05-16 15:53:14.094: E/AndroidRuntime(804):  at android.view.ViewGroup.<init>(ViewGroup.java:284)
05-16 15:53:14.094: E/AndroidRuntime(804):  ... 25 more
05-16 15:53:14.124: I/dalvikvm(804): threadid=7: reacting to signal 3 
```

btncontacto xml 布局文件

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_window_focused="false" android:state_enabled="true"
    android:drawable="@drawable/contacto" />    
<item android:state_pressed="true" 
    android:drawable="@drawable/contactoapre" />
<item android:state_focused="true" android:state_enabled="true"
    android:drawable="@drawable/contacto" />
<item android:state_enabled="true"
    android:drawable="@drawable/contacto" />
</selector> 
```

btnbeneficios XML

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_window_focused="false" android:state_enabled="true"
android:drawable="@drawable/beneficios" />
<item android:state_pressed="true" 
android:drawable="@drawable/beneficiossombra" />
<item android:state_focused="true" android:state_enabled="true"
android:drawable="@drawable/beneficios" />
<item android:state_enabled="true"
android:drawable="@drawable/beneficios" />
</selector> 
```

btcajeros XML

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_window_focused="false" android:state_enabled="true"
    android:drawable="@drawable/loccajeros" />    
<item android:state_pressed="true" 
    android:drawable="@drawable/loccajerosapre" />
<item android:state_focused="true" android:state_enabled="true"
    android:drawable="@drawable/loccajeros" />
<item android:state_enabled="true"
    android:drawable="@drawable/loccajeros" />
</selector> 
```

btnconsulta XML

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_window_focused="false" android:state_enabled="true"
    android:drawable="@drawable/consulta" />    
<item android:state_pressed="true" 
    android:drawable="@drawable/consultaapre" />
<item android:state_focused="true" android:state_enabled="true"
    android:drawable="@drawable/consulta" />
<item android:state_enabled="true"
    android:drawable="@drawable/consulta" />
</selector> 
```

btnemergencias XML

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_window_focused="false" android:state_enabled="true"
    android:drawable="@drawable/emergencia" />    
<item android:state_pressed="true" 
    android:drawable="@drawable/emergenciaapre" />
<item android:state_focused="true" android:state_enabled="true"
    android:drawable="@drawable/emergencia" />
<item android:state_enabled="true"
    android:dr 
```

awable="@drawable/emergencia" />

brnfaq XML

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_window_focused="false" android:state_enabled="true"
    android:drawable="@drawable/tips" />    
<item android:state_pressed="true" 
android:drawable="@drawable/tipssombra" />
<item android:state_focused="true" android:state_enabled="true"
android:drawable="@drawable/tips" />
<item android:state_enabled="true"
android:drawable="@drawable/tips" />
</selector> 
```

btnindicadores XML

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_window_focused="false" android:state_enabled="true"
    android:drawable="@drawable/indicadores" />    
<item android:state_pressed="true" 
    android:drawable="@drawable/indicadoresapre" />
<item android:state_focused="true" android:state_enabled="true"
    android:drawable="@drawable/indicadores" />
<item android:state_enabled="true"
    android:drawable="@drawable/indicadores" />
</selector> 
```

btnpromo XML

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_window_focused="false" android:state_enabled="true"
    android:drawable="@drawable/promociones" />    
<item android:state_pressed="true" 
    android:drawable="@drawable/promocionesapre" />
<item android:state_focused="true" android:state_enabled="true"
    android:drawable="@drawable/promociones" />
<item android:state_enabled="true"
    android:drawable="@drawable/promociones" />
</selector> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:14:26.067

`android:background="@layout/btnconsulta"`！！

我假设你想说

```
android:background="@drawable/btnconsulta" 
```

我知道你不能为背景充气！

如果您希望您的按钮在多个状态下获得不同的样式，请为您的背景或选择器使用颜色或可绘制

按下，专注...

# c# - 我可以在没有远程计算机上的管理访问权限的情况下访问远程注册表项吗？

> ID：10622309
> 
> 赞同：0
> 
> 时间：2012-05-16T16:01:58.013
> 
> 标签：c#, security, windows-7, .net-4.0, remote-registry

我正在用 C# (.NET 4) 编写一个在 Windows 7 上运行的应用程序。该应用程序需要访问远程计算机（也运行 Windows 7）上的注册表并修改特定密钥。

如果应用程序在目标计算机上模拟本地管理员帐户，则它可以正常工作。但是是否可以在不以本地管理员身份运行的情况下执行此功能？我知道我可以设置键的注册表权限（用于本地访问） - 我不确定的部分是如何在没有管理员访问权限的情况下与注册表键建立远程连接。

# c# - PNG 文件 Content-Type 是来自 Response.ContentType 的文本

> ID：10622312
> 
> 赞同：0
> 
> 时间：2012-05-16T16:02:17.717
> 
> 标签：c#, asp.net, httpwebrequest, httpresponse

我在模块中有以下代码，可将 Response 的输入引导回浏览器。问题是我有几个来自 3rd 方应用程序的 PNG 文件没有正确呈现。还有其他 PNG 和 JPG 文件可以正确渲染。问题文件的 Content-Type 以文本形式返回，导致它无法运行正确的输出类型代码。有没有人见过这个？关于如何解决这个问题的任何想法？

```
byte[] responsearr = ReadFully(response.GetResponseStream());
System.Text.Encoding encoding = System.Text.Encoding.UTF8;
string responseStr = encoding.GetString(responsearr);

HttpContext.Current.Response.ContentType = response.ContentType;

if (response.ContentType.Contains("image") || response.ContentType.Contains("document"))
{
    if (response.ContentType.Contains("image"))
        Debug.WriteLine(encoding.GetString(responsearr));
    HttpContext.Current.Response.OutputStream.Write(responsearr, 0, responsearr.Length);
}
else
{
    HttpContext.Current.Response.Write(responseStr);
}

HttpContext.Current.Response.Flush();
HttpContext.Current.ApplicationInstance.CompleteRequest(); 
```

在我可以向 Apache 管理员验证 MIME 类型分配之前，我已将代码更新为以下内容。

```
void RouteRequest(ProxyMappingElement mapping)
{
    //does a whole bunch of stuff between here and there .... 

    // Important problem piece

    byte[] responsearr = ReadFully(response.GetResponseStream());
    System.Text.Encoding encoding = System.Text.Encoding.UTF8;
    string responseStr = encoding.GetString(responsearr);
    HttpContext.Current.Response.ContentType = GetContentType(response);

    if (HttpContext.Current.Response.ContentType.Contains("image") ||       HttpContext.Current.Response.ContentType.Contains("document"))
    {
        HttpContext.Current.Response.OutputStream.Write(responsearr, 0, responsearr.Length);
    }
    else
    {
        HttpContext.Current.Response.Write(responseStr);
    }

    HttpContext.Current.Response.Flush();
    HttpContext.Current.ApplicationInstance.CompleteRequest();
}

private string GetContentType(HttpWebResponse response)
{
    return HttpContext.Current.Request.Url.ToString().Substring(
        HttpContext.Current.Request.Url.ToString().Length - 3, 3).ToLower().Equals("png")
               ? (HttpContext.Current.Response.ContentType = "image/png")
               : (HttpContext.Current.Response.ContentType = response.ContentType);
} 
```

# php - 在日期范围之间提交日期 - mySQL

> ID：10622315
> 
> 赞同：1
> 
> 时间：2012-05-16T16:02:25.130
> 
> 标签：php, mysql, insert

在一两年前自学 php 和 mySQL 时，我为我工作的剧院创建了一个电影数据库，以帮助自动化需要每周完成的更平凡的网络更新。到目前为止，这仅与电影信息（标题、评级、概要、开始日期）有关——但不包括放映时间，但最近我认为看看是否可以在网站的这方面进行构建可能会很有趣。

我最初的想法是建立一个表格，通过日期组（即 5/15 - 5/20）显示放映时间，但有人建议从用户的角度来看，提交个别日期的时间可能更有用（即 5 的放映时间） /15 是...），尤其是由于特殊事件，一周内偶尔会有更改和取消。

我什至开始这个问题 - 是如何一次提交多个日期。是否有可能在表单中包含“**开始日期**”和“**结束日期**”，并让单个表单提交这两个日期的所有时间输入以及其间的所有日期？

从后端的角度来看，每天提交相同的 4 或 5 个放映时间，每周 7 天，每周 10 到 14 部电影对美国来说比仅仅在 Dreamweaver 中手动输入时间要多 - 所以我只是想弄清楚了解如何让我们在幕后更轻松地完成这个过程。如果我们可以批量插入一组放映时间，那么我们可以回过头来编辑具有特殊/取消时间的个别日子（这可能意味着建立一个“选秀、直播、隐藏”系统——但我已经至少有一个关于如何去做的基本知识。

我已经为放映时间设置了一个非常基本的表格（我在[这里](http://codysilfies.com/p9test/display.php)的目标用户端示例）：

*   **MOVIE_ID** （与电影信息数据库链接以获取电影信息 - 标题、运行时间等）
*   **sched_date**（使用 datetime 设置特定日期的特定放映时间）

我想如果有任何方法可以做到这一点，我可能不得不放弃使用日期时间？

任何帮助都会很热！非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:18:27.677

您可以在 PHP 表单中有 2 个带名称`from_date`的日期字段。`end_date`在您的 PHP 表单提交代码中，您需要使用[DateTime 类](http://www.php.net/manual/en/class.datetime.php)并从开始`from_date`并使用[DateTime::add](http://www.php.net/manual/en/datetime.add.php)方法循环直到`end_date`到达。请注意，您需要首先使用 new DateTime('YYYY-MM-DD') 或使用[DateTime::createFromFormat](http://www.php.net/manual/en/datetime.createfromformat.php)`from_date`将 2个日期转换为日期时间。`end_date`

在循环中，只需将插入命令发送到 MySQL 以将行插入到您的数据库中。

# .net - 在 Visual Studio 2010 设计器中使用自定义控件

> ID：10622318
> 
> 赞同：0
> 
> 时间：2012-05-16T16:02:41.010
> 
> 标签：.net, winforms, visual-studio, windows-forms-designer

我正在扩展控件以包含需要的各种属性。我想知道是否可以创建自定义控件但仍然在设计器中使用它，因为它们用于嵌套的各种布局；因此难以以编程方式管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:58:53.927

这是很有可能的，但是当您想要使用户控件包含具有嵌套对象的其他控件（例如：包含具有嵌套列集合的 DataGridView 控件的用户控件）时，问题就开始了。

在这种情况下，我建议您在用户控件中序列化一些简化的自定义对象（即 MyDataGridViewInitializer），从中初始化复杂的子控件（即 DataGridView），因为直接序列化这样的复杂控件是一场艰苦的战斗。

希望这可以帮助。

这应该让你开始：

[在 .NET Framework 可视化设计器中自定义代码生成](http://msdn.microsoft.com/en-us/library/ms973818.aspx)

[创建自定义控件 - 提供设计时支持](http://www.codeproject.com/Articles/9667/Creating-Custom-Controls-Providing-Design-Time-Sup)

# php - 通过数组初始化对象

> ID：10622320
> 
> 赞同：0
> 
> 时间：2012-05-16T16:02:44.917
> 
> 标签：php, arrays, object

基本上我的设置是我有很多想要创建的对象。它将变成什么类型​​的对象取决于一个变量，即类型。所以最初我必须做很多 if 语句，所以为了缩短它我创建了一个数组，但我遇到了能够通过数组创建实际对象的问题。

这是我最初的：

```
if($object->type = 'text')
{
    $object_new = new Text();
} elseif($object->type = 'image') {
    $object_new = new Image();
} .... 
```

但我想做的是：

```
$all_objects = array('text'=> new Text(), 'image' => new Image(), ...);
$object_new = $all_objects($object->type); 
```

这将大大缩短我的代码并使其更有效率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:07:26.443

如果这些对象没有进一步的依赖关系，你可以简单地做

```
$className = $object->type;
$instance = new $className; 
```

如果您需要更复杂的创建逻辑，您可以将创建代码放在 Lambdas 中然后调用它们，例如

```
$allTypes = array(
    'text' => function($string) { return new Text($string); },
    'Image' => function($path) { return new Image($path); }
);
$instance = call_user_func_array($allTypes[$object->type], array($argument1)); 
```

或者您创建一个工厂对象并将一个开关/案例放入其中：

```
class Factory
{
    public function create($type)
    {
        switch ($type)
        {
            case 'text':
                return new Text;
            case 'image':
                return Image($this->create('foo'));
            case 'foo':
                return new Foo;
            default:
                throw new Exception('No clue what to create');
        }
    }
} 
```

另外结帐[是否有一个 call_user_func() 相当于创建一个新的类实例？](https://stackoverflow.com/questions/1929108/is-there-a-call-user-func-equivalent-to-create-a-new-class-instance)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:07:26.457

制作数组`$all_objects`会导致更多问题。当你从那里得到一个元素时，它就是一个引用，所以每次你访问一个元素时，它都和你上次访问它的时候一样。（例如：[http](http://codepad.org/Z4B7glk9) ://codepad.org/Z4B7glk9 ）

而是尝试这样的事情（PHP中的类名不区分大小写）：

```
$object_new = new $object->type(); 
```

演示：[http ://codepad.org/Hq09jkHz](http://codepad.org/Hq09jkHz)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T16:07:41.100

这可能是您正在寻找的：

```
$types = array('image', 'text', 'link', 'somethingelse');
foreach ($types as $type) {
    $$type = new ucfirst($type);
} 
```

这表示：

```
$image         = new Image;
$text          = new Text;
$link          = new Link;
$somethingelse = new Somethingelse; 
```

当然，你需要有*Image*、*Text*、*Link*和*Somethingelse*类。

# python - Python子类调用父函数

> ID：10622324
> 
> 赞同：0
> 
> 时间：2012-05-16T16:03:03.273
> 
> 标签：python

```
class A():
    class B():
       def Foo(self):
           print "Hello"
    class C():
       def Bar(self):
           print "Goodbye"
    def name(self):
        print "FooBar" 
```

我想要做的是，在 Bar 函数中调用 Foo 函数。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:11:40.910

在 Python 中，内部类没有与之关联的外部类的隐式实例。如果没有这样的实例，您将无法从或调用`A`的非静态方法。`B``C`

如果您确实有这样的实例，那么只需使用点表示法：

```
class C():
   def Bar(self):
       self.a.name()
   ... 
```

（哪里`self.a`是 的一个实例`A`。）

或者，如果`A.name()`可以设为静态，则以下内容也将起作用：

```
class A(object):

    class C():
       def Bar(self):
           print "Goodbye"
           A.name()

    @staticmethod
    def name():
        print "FooBar"

A.C().Bar() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:09:21.420

您需要一个类的实例`A`来调用方法。

# c++ - 在 C++ 中对 int 的文字赋值会引发异常吗？

> ID：10622326
> 
> 赞同：5
> 
> 时间：2012-05-16T16:03:05.457
> 
> 标签：c++, exception, try-catch

给定如下代码：

```
void f()
{
   int i;
   i = 0;
} 
```

由于简单的分配，系统是否有可能引发异常？

[编辑：对于那些说“不会发生异常”的人，您能否指出 C++ 标准中说明这一点的部分的方向？我很难找到它。]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T16:08:35.467

尽管您可能很难在标准中找到它的保证，但一个简单的经验法则是，任何在 C 中合法的东西都可能无法抛出。[编辑：我所知道的最接近这种效果的直接陈述是在§15/2，它说：

> 执行*throw 表达式*的代码被称为“抛出异常”；[...]

反过来看，不执行 throw 表达式的代码不会引发异常。]

投掷基本上限于两种可能性：第一种是调用UB。第二个是做一些 C++ 独有的事情，例如分配给重载的用户定义类型`operator =`，或使用`new`表达式。

编辑：就作业而言，它可以抛出很多方法。显然，加入赋值运算符本身就可以做到这一点，但还有很多其他的。举例来说，如果源类型与目标类型不匹配，您可能会通过源中的强制转换运算符或目标中的构造函数获得转换——其中任何一个都可能抛出。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-16T16:13:25.050

有很多看起来像作业的东西可以以一种或另一种方式抛出：

```
int operator"" _t(const char *) { throw 0; } // C++11 user defined literal 

struct foo {
  foo(int) { throw 0; }
  operator int() { throw 0; }
  foo& operator=(int) { throw 0; }
};

int main() {
  int i;
  i = 0; // can't throw
  i = 0_t; // User defined literal throws
  foo f = 0; // Constructor throws
  i = f; // conversion operator throws
  f = 0; // assignment throws
  f = f; // both conversion and assignment would like to throw
} 
```

（包括来自 C++11 的新版本）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T16:33:35.153

如果您担心将`0`（具有 type `int`）分配给 `int`，则标准的第 5.17 节非常准确地指定了分配操作的语义，并且不会发生异常。如果您担心将任意表达式分配给`int`，第 5.17 节说“表达式被隐式转换为左操作数的 cv 非限定类型。”取决于右操作数的实际类型：

*   如果它是整数类型，如果实际值不能在 an 中表示`int`，则结果是实现定义的（C 标准更明确：它必须产生`int`带有实现定义值的 an，否则您将获得实现定义的信号)

*   如果它是一个浮点值，则结果是未定义的行为，如果截断为零后的值不能在 an 中表示`int`，则行为未定义（因此您可能会遇到异常）

*   如果它是用户定义的类型，则将调用用户定义的转换运算符。这可能会引发异常。

如果您担心分配其他类型：对于每组非类类型，都有一个类似上面的规则列表，但唯一可能的例外是类型转换的结果。对于类类型，`operator=`将使用 。这可能会引发异常，具体取决于其中的内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T16:07:25.890

它只能在一种情况下抛出异常：当`operator=()`这两种类型重载时抛出；类似地，当需要转换时，转换构造函数 or`operator T()`也可以抛出。这取决于确切的实现 - 要确定它是否会抛出，请在您正在使用的库的文档中查找有关它的信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T16:07:04.323

如果它只是一个`int`，那么不 - 它不会抛出。

如果它是更复杂的东西，例如向量，那么它可能会由于多种原因而抛出（例如分配失败或来自辅助线程的更改）。

# wordpress - WordPress媒体库问题

> ID：10622338
> 
> 赞同：0
> 
> 时间：2012-05-16T16:04:03.333
> 
> 标签：wordpress

我已经使用 WordPress 媒体库上传了我的图片。权限在 Uploads 目录中设置。图像显示在正确的上传目录中并正确调整大小。数据库已正确更新并具有正确的图像路径。

在媒体库中，我看到图像的缩略图，但是当我单击缩略图查看图像时，它根本不显示图像。什么都没有出现。

我也尝试在图像滑块中使用这些图像，当我浏览媒体库时，它会找到它们。我选择要在我的滑块中使用的图像，并且所选图像的缩略图显示得很好，但是当我从网页查看我的滑块时，图像也不会在那里显示。只是一个空滑块。

我根本没有激活任何插件。

我正在使用从 Themeforest 购买的 Bizniz 主题。

我已将 WordPress 更新到 3.3.2

使用 Apache 在我的本地机器上运行。

当我从数据库复制图像路径并将其粘贴到浏览器中时，图像显示正常。

除图像外，一切正常。非常感谢任何帮助！

**更新：** 好的，我尝试将我的主题切换回二十一，然后单击我的媒体库缩略图并且图像正确显示。所以看起来它与我正在使用的 Bizniz 主题有关。可能是jquery冲突还是什么？有人有想法么？

再次感谢！约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:18:03.310

好的，我找到了解决问题的“临时”解决方案。似乎问题出在 TimThumb 的版本上（安装了 Bizniz 主题的 v2.8.10）。

我最终使用旧版本（1.14）代替了这个新版本，它似乎已经解决了这个问题。

虽然这已经解决了这个问题，但我说的是“临时”，因为我不确定两个版本之间可能缺少哪些功能，并且希望新版本能够更新以纠正这个问题。

# php - 使用什么与 PHP 编码相关的代码？

> ID：10622339
> 
> 赞同：1
> 
> 时间：2012-05-16T16:04:12.337
> 
> 标签：php, encoding

如何在 PHP 中将某些字符解释为正确的形式？

例如，字符串 is `\u00c9rwin`but PHP print it as `Ã‰rwin`，正确的形式必须是`Érwin`

什么是正确的 PHP 代码？我很确定这不是 HTML 实体，是吗？

PS 没有在 PHP 文件上声明编码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:06:26.253

查看`utf8_encode`和`utf8_decode`。在整个堆栈中使用 UTF8 也很重要。这意味着您的数据库连接应该使用 UTF8（[这是 MySQL 中的方法](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html)），您的 HTTP Content-Type 应该返回 UTF8（参见下面的 mgraph 示例），您还应该在元标记中设置它，这样就没有需要编码/解码，因为您在**任何地方都使用相同的字符集**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:07:21.340

在标题中添加：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
```

或者：

```
<?php header ('Content-type: text/html; charset=utf-8'); ?> 
```

# php - 如何通过tomcat连接器mod_jk将jsp/servlet从apache服务器重定向到tomcat

> ID：10622341
> 
> 赞同：1
> 
> 时间：2012-05-16T16:04:14.927
> 
> 标签：php, apache, jsp, servlets

好吧，朋友们，我是一种新手，所以这听起来可能是一个基本或相对简单的问题。我要做的只是：我使用 JSP 开发了一个小型应用程序，Servlets 使用 tomcat5.5.35 将它部署在网络中的一台机器上。它工作得很好，我可以看到 JSP/Servlets 按预期运行。现在我想用 PHP 开发剩余的页面，并使用 Apache 和 tomcat 连接器将 PHP 和 JSP/Servlets 集成在一起。

Apache 版本 - 2.2.22 win 32 x86 无 ssl。Tomcat 连接器 - tomcat-connectors-1.2.36-windows-i386-httpd-2.2.x

```
I called a php script from PHP Directory and it got displayed as expected. 
```

**问题陈述：** Apache 没有将 JSP 和 Servlet 转发到 tomcat。

将 mod_jk.so 复制到 /modules

我创建了**worker.properties**并将其复制到 \conf 目录下，内容如下

```
worker.list=worker1
worker.worker1.type=ajp13
worker.worker1.host=localhost
worker.worker1.port=8009
worker.worker1.lbfactor=50
worker.worker1.cachesize=10
worker.worker1.cache_timeout=600
worker.worker1.socket_keepalive=1
worker.worker1.socket_timeout=300 
```

**修改 httpd.conf 为**

```
DocumentRoot "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs"
ServerName localhost:80
<ifmodule mod_jk.c>
JkWorkersFile /etc/apache2/workers.properties
JkLogFile /var/log/apache2/mod_jk.log
 JkLogLevel DEBUG
</ifmodule>

LoadModule    jk_module  "C:/Program Files/Apache Software Foundation/Apache2.2/modules/mod_jk.so"
JkWorkersFile "C:/Program Files/Apache Software Foundation/Apache2.2/conf/workers.properties"
JkShmFile "C:/Program Files/Apache Software Foundation/Apache2.2/logs/mod_jk.shm"
JkLogFile "C:/Program Files/Apache Software Foundation/Apache2.2/logs/mod_jk.log"
JkLogLevel    debug
JkLogStampFormat "[%a %b %d %H:%M:%S %Y] "
<VirtualHost *:80>
DocumentRoot "C:/Program Files/apache-tomcat-5.5.35/webapps/automationutil"
SetEnvIf Request_URI \.php no-jk
SetEnvIf Request_URI \.cgi no-jk
JkMount  /* worker1
JkMount  /*.jsp worker1
</VirtualHost> 
```

**用于 tomcat 的 server.xml**

tomcat 日志不显示任何错误，而我可以在 mod_jk.logs 中看到以下内容

```
1:06:16 2012] [5580:3828] [debug] map_uri_to_worker_ext::jk_uri_worker_map.c (1131): Attempting to map URI '/automationutil/pages/loginrelated.html' from 0 maps
[Wed May 16 21:06:16 2012] [5580:3828] [debug] jk_translate::mod_jk.c (3723): no match for /automationutil/pages/loginrelated.html found
[Wed May 16 21:06:16 2012] [5580:3828] [debug] map_uri_to_worker_ext::jk_uri_worker_map.c (1131): Attempting to map URI '/automationutil/pages/loginrelated.html' from 0 maps
[Wed May 16 21:06:16 2012] [5580:3828] [debug] jk_map_to_storage::mod_jk.c (3798): no match for /automationutil/pages/loginrelated.html found
[Wed May 16 21:06:16 2012] [5580:3828] [debug] map_uri_to_worker_ext::jk_uri_worker_map.c (1131): Attempting to map URI '/automationutil/pages/loginfooter.html' from 0 maps
[Wed May 16 21:06:16 2012] [5580:3828] [debug] jk_translate::mod_jk.c (3723): no match for /automationutil/pages/loginfooter.html found
[Wed May 16 21:06:16 2012] [5580:3828] [debug] map_uri_to_worker_ext::jk_uri_worker_map.c (1131): Attempting to map URI '/automationutil/pages/loginfooter.html' from 0 maps
[Wed May 16 21:06:16 2012] [5580:3828] [debug] jk_map_to_storage::mod_jk.c (3798): no match for /automationutil/pages/loginfooter.html found
[Wed May 16 21:06:16 2012] [5580:4996] [debug] map_uri_to_worker_ext::jk_uri_worker_map.c (1131): Attempting to map URI '/automationutil/pages/index_settings.jpg' from 0 maps
[Wed May 16 21:06:16 2012] [5580:4996] [debug] jk_translate::mod_jk.c (3723): no match for /automationutil/pages/index_settings.jpg found
[Wed May 16 21:06:16 2012] [5580:4996] [debug] map_uri_to_worker_ext::jk_uri_worker_map.c (1131): Attempting to map URI '/automationutil/pages/index_settings.jpg' from 0 maps
[Wed May 16 21:06:16 2012] [5580:4996] [debug] jk_map_to_storage::mod_jk.c (3798): no match for /automationutil/pages/index_settings.jpg found
[Wed May 16 21:06:23 2012] [5580:4996] [debug] map_uri_to_worker_ext::jk_uri_worker_map.c (1131): Attempting to map URI '/automationutil/pages/helppage.jsp' from 0 maps
[Wed May 16 21:06:23 2012] [5580:4996] [debug] jk_translate::mod_jk.c (3723): no match for /automationutil/pages/helppage.jsp found
[Wed May 16 21:06:23 2012] [5580:4996] [debug] map_uri_to_worker_ext::jk_uri_worker_map.c (1131): Attempting to map URI '/automationutil/pages/helppage.jsp' from 0 maps
[Wed May 16 21:06:23 2012] [5580:4996] [debug] jk_map_to_storage::mod_jk.c (3798): no match for /automationutil/pages/helppage.jsp found
[Wed May 16 21:06:32 2012] [5580:4996] [debug] map_uri_to_worker_ext::jk_uri_worker_map.c (1131): Attempting to map URI '/automationutil/LoginApp' from 0 maps
[Wed May 16 21:06:32 2012] [5580:4996] [debug] jk_translate::mod_jk.c (3723): no match for /automationutil/LoginApp found
[Wed May 16 21:06:32 2012] [5580:4996] [debug] map_uri_to_worker_ext::jk_uri_worker_map.c (1131): Attempting to map URI '/automationutil/LoginApp' from 0 maps
[Wed May 16 21:06:32 2012] [5580:4996] [debug] jk_map_to_storage::mod_jk.c (3798): no match for /automationutil/LoginApp found 
```

我在 web.xml 中有 servlet 的映射，它们在 tomcat 中运行良好。但不确定为什么 apache 没有正确处理它们:(。我们还需要为 JSP 映射吗？

将非常感谢并感谢任何可以让我继续前进的帮助。最近几天在网上搜索，但没有任何收获。

# php - 如何通过复选框选中或取消选中来过滤数据

> ID：10622349
> 
> 赞同：2
> 
> 时间：2012-05-16T16:04:41.487
> 
> 标签：php

我有几个复选框，如下所示。当检查一个复选框时，必须从mySQL加载结果，并且在未选中的重新选中时，必须加载结果，而无需页面刷新。

几乎与[http://www.facebook.com/find-friends/browser/相同](http://www.facebook.com/find-friends/browser/)

我能怎么做？

```
 <div class="tags">  <label><input type="checkbox" class="arts" /> Arts </label> <label><input type="checkbox" class="computers" /> Computers </label> <label><input type="checkbox" class="health" /> Health </label> <label><input type="checkbox" class="video-games" /> Video Games </label> </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T15:22:15.037

You can get the value of checked checkbox $(‘[name=”hobbies”:checked]’).val() and for unchecked box you can use $("input:checkbox:not(:checked)")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:12:04.243

您可以使用 JavaScript 执行此操作，并使用 jQuery 看这里：[http ://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T16:35:57.943

使用 jQuery（如上所述）最容易做到这一点。一般来说，你会经历一系列的“找东西”然后“做某事”的任务。我不是 javascript 专家，但我在逻辑上的微弱尝试应该能让你走上正确的道路。

jQuery 逻辑看起来像这样：

*   “监听”复选框状态的变化，请参阅[http://api.jquery.com/change/](http://api.jquery.com/change/)
*   设置一个 var = 您从 ajax 调用中获得的结果，该调用会提取您想要查看的信息[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)或[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)
*   根据复选框的状态附加（或删除）该变量，请参阅[http://api.jquery.com/append/](http://api.jquery.com/append/)和[http://api.jquery.com/remove/](http://api.jquery.com/remove/)

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T16:51:03.467

您需要使用 Ajax。

正如人们所建议的那样，jQuery 允许您轻松地做到这一点。

**例子：**

在 JavaScript 文件中：

```
$.ajax({
  url: '/get-data',
  type: 'GET',
  data: { tags: anArrayOfCheckedCheckboxes }, // get the checked checkboxes the way you want
  complete: function(response) {
    // do what do you need with the response (display results for example)
  }
}); 
```

在 PHP 方面（*/get-data* URL）：

```
$tags = $_GET['tags'];
// get the results from the database
return json_encode($results); 
```

# c++ - 将符号分配给字符或字符串不正确

> ID：10622350
> 
> 赞同：-3
> 
> 时间：2012-05-16T16:04:41.933
> 
> 标签：c++

```
A="D:\Kursa4\a1\a1\test1.txt";
B="D:\Kursa4\a1\a1\test1.txt"; 
```

```
+ A "D:Kursa411 est1.txt" std::basic_string,std::allocator >

+ B 0x0046cd0c "D:Kursa411 est1.txt" 字符 *

```

当我将它分配给 char 或 string 时，'\' 符号未更正。我需要将 '\' 替换为 '/' - 但是当我写 '\' - 表示下面的文本

我以这种格式读取文件的名称。并想将 \ 替换为 /

```
ZeroMemory(&of, sizeof(OPENFILENAME));
    of.lStructSize = sizeof( OPENFILENAME );
    of.Flags = OFN_FILEMUSTEXIST| OFN_EXPLORER | OFN_ENABLESIZING; 
    of.lCustData = (DWORD) NULL;
    //of.hwndOwner = hWnd; 
    of.lpstrFilter = L"*.*";
    of.lpstrFile = (LPWSTR)fsFile;
    of.nMaxFile = sizeof(fsFile);
    of.nFilterIndex = 1;
    of.lpstrFileTitle = NULL;
    of.nMaxFileTitle = 0;
    if(GetOpenFileName(&of) == TRUE)
    {
    //IDC_EDIT1
    //HWND hwndEdit1 = GetDlgItem(hWnd,IDC_RADIO1);
    SetWindowText(hwndEdit1, (LPCWSTR)fsFile);
    } 
```

**我想从“D:/Kursa4/a1/a1/test.txt”制作“D:\Kursa4\a1\a1\test1.txt”**

```
char B = "D:/Kursa4/a1/a1/test.txt"; 
```

自制？

```
 char B = "D:\Kursa4\a1\a1\test1.txt"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:06:48.653

尝试：

```
A="D:\\Kursa4\\a1\\a1\\test1.txt";
B="D:\\Kursa4\\a1\\a1\\test1.txt"; 
```

在 C++ 源代码中，`\`符号修改字符串中下一个符号的含义。`\t`，例如表示“水平选项卡”，而`\n`表示“换行符”。

要插入实际`\`字符，您必须键入`\\`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:06:57.237

您的问题很难理解，但据我所知，您并没有逃脱反斜杠。

采用

```
A="D:\\Kursa4\\a1\\a1\\test1.txt"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T16:16:20.373

在 C++（和 C）中，在字符串和字符文字中，反斜杠是“转义字符”；这意味着它不代表自己，而是表明后面的内容（通常是下一个字符，但有时更多）具有特殊含义。因此。从您的字符串中，字符串或字符文字中的两个字符序列`"\a"`表示产生声音警报的字符，即 BEL 字符（大多数编码中的 0x07）。当然，您几乎肯定已经看到`"\n"`了换行符和`"\""`引号字符；`"\t"`对于制表符也很常见。

这就产生了问题：如何在字符串文字中插入反斜杠。答案是：就像我们插入其他不能直接指定的字符一样：使用转义序列。在这种情况下， `"\\"`。

最后：您的文本看起来像一个 Windows 文件名。在这种情况下，您最好使用`'/'`目录分隔符；如果不出意外，输入和阅读要容易得多，因为您不需要使用转义序列。出于显示目的，如果您担心会混淆非编程用户（他们可能不知道这两者`/`并且`\` 在 Windows 下工作），快速通过`std::replace`将修复显示字符串。

# sql-server-2008 - 合并两个表，将值从一个继承到另一个

> ID：10622354
> 
> 赞同：1
> 
> 时间：2012-05-16T16:05:15.180
> 
> 标签：sql-server-2008, tsql, union

我有两个表格，我想使用`UNION`或其他技术将它们显示为单个结果。

该`ID`字段与两个表相关。

第二个表缺少一个字段，因此应该从第一个表中假设缺失值。

下面的示例代码有效，但对于大型数据集来说非常慢。

有没有更高效的解决方案？

```
T1:                       T2:
+----+-------+--------+   +----+------+
| id | name  | town   |   | id | name |
+----+-------+--------+   +----+------+
|  1 | Alice | London |   |  1 | Bob  |
|  2 | Alan  | Zurich |   +----+------+
+----+-------+--------+ 
```

期望的结果：

```
+----+-------+--------+
| id | name  | town   |
+----+-------+--------+
|  1 | Alice | London |
|  2 | Alan  | Zurich |
|  1 | Bob   | London |
+----+-------+--------+ 
```

示例代码：

```
with T1 as
(
    select * from 
    (
        values
            (1,'Alice','London') ,
            (2,'Alan','Zurich') 
    ) as t (id,name,town)
), T2 as
(
    select * from 
    (
        values
            (1,'Bob') 
    ) as t (id,name)
), T2WithTown as
(
    select t2.id,t2.name,t1.town from T2
    inner join T1 on t2.id=t1.id
)

select id,name,town from T1
union
select id,name,town from T2WithTown 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:11:35.107

像这样：

```
with T1 as
(
    select * from 
    (
        values
            (1,'Alice','London') ,
            (2,'Alan','Zurich') 
    ) as t (id,name,town)
), T2 as
(
    select * from 
    (
        values
            (1,'Bob') 
    ) as t (id,name)
), T2WithTown as
(
    select t2.id,t2.name,t1.town from T2
    inner join T1 on t2.id=t1.id
)

select id,name,town from T1
union
select T2.id, T2.name, T1.town
from T1
inner join T2 on T2.id = T1.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:16:48.093

示例数据显示两个表都有不同的值。所以我会更喜欢`UNION ALL`

```
Select ID, Name, Town From T1
UNION ALL
select T2.ID, T2.Name, T1.Town
from T1
INNER JOIN T2 on T2.id = T1.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T16:23:32.090

```
select id,name, town from t1
union 
select id,name, (select top 1 town from t1 where t1.id=t2.id) from t2 
```

# .net-4.0 - 带有 .NET 4 的 Windows AMI？

> ID：10622358
> 
> 赞同：2
> 
> 时间：2012-05-16T16:05:21.463
> 
> 标签：.net-4.0, amazon-web-services, amazon-ec2, amazon-ami, ec2-ami

是否有任何预安装了 .NET 4 框架的**Amazon 提供的Windows AMI？**除非我遗漏了什么，否则图像上似乎可以使用 3.5（例如[ami-cab91da3](https://aws.amazon.com/amis/amazon-ebs-backed-windows-server-2008-r2-english-64-bit-sql-2012-express)），但不是 .NET Framework 4。

如果没有，我们能否期望 AMI 的更新在不久的将来包括 .NET 4？在这一点上，它已经正式发布了将近两年。还是我负责安装它并构建（和维护）自定义 AMI？

[（从AWS 论坛](https://forums.aws.amazon.com/message.jspa?messageID=345680)交叉发布）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:16:47.250

用于在 Amazon EC2上运行[Windows Server 和 SQL Server](http://aws.amazon.com/windows/)的“官方” [Amazon EC2](http://aws.amazon.com/ec2/) AMI （可能微软参与了这些产品）主要反映了微软各自的官方操作系统产品（最终加上服务器版本，如 SQL Server 或 IIS）。因此，只有在提供的操作系统（加上服务包）或安装的服务器确实需要并分别将其作为默认配置提供时，才会预安装[.NET Framework 4 。](http://en.wikipedia.org/wiki/.NET_Framework_4#.NET_Framework_4)

[最近更新的 Microsoft SQL Server 产品](http://aws.typepad.com/aws/2012/05/updated-microsoft-sql-server-offerings.html)确实就是这种情况，因为[SQL Server 2012](http://en.wikipedia.org/wiki/Microsoft_SQL_Server#SQL_Server_2012)确实需要 .NET Framework 4，请参阅[安装 SQL Server 2012 的硬件和软件要求](http://msdn.microsoft.com/en-us/library/ms143506.aspx)。*Microsoft SQL Server 2012 支持*部分相应地列出了相应的 AMI 目录条目：

> SQL Server 2012 Express（[AMI 目录条目](https://aws.amazon.com/amis/amazon-ebs-backed-windows-server-2008-r2-english-64-bit-sql-2012-express)）
> SQL Server 2012 Web Edition（[AMI 目录条目](https://aws.amazon.com/amis/amazon-ebs-backed-windows-server-2008-r2-english-64-bit-sql-2012-web)）
> SQL Server 2012 Standard Edition（[AMI 目录条目](https://aws.amazon.com/amis/amazon-ebs-backed-windows-server-2008-r2-english-64-bit-sql-2012-standard)）

# jquery - 将 mouseenter / mouseleave 组合为一个函数

> ID：10622359
> 
> 赞同：1
> 
> 时间：2012-05-16T16:05:25.290
> 
> 标签：jquery

考虑这两个工作函数。有没有办法将这两者串在一起成为一个 jQuery 函数？

```
$("#help").mouseenter(function(){
    $(this).animate({bottom: '+=100',});
});

$("#help").mouseleave(function(){
    $(this).animate({bottom: '-=100',});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:05:59.793

见[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

```
$("#help").hover(function() {
    $(this).animate({
        bottom: '+=100',
    });
}, function() {
    $(this).animate({
        bottom: '-=100',
    });
});​ 
```

> .hover() 方法绑定了 mouseenter 和 mouseleave 事件的处理程序。您可以使用它在鼠标位于元素内时简单地将行为应用于元素。调用`$(selector).hover(handlerIn, > handlerOut)`是以下的简写：`$(selector).mouseenter(handlerIn).mouseleave(handlerOut);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:06:17.907

```
$("#help").on('mouseenter mouseleave', function() {

}); 
```

替代使用：

```
$('#help').hover(
  function() {
     // code for mouseenter 
     $(this).animate({bottom: '+=100',});
  },

  function() {
    // code for mouseleave
    $(this).animate({bottom: '-=100',});
  }
); 
```

# .net - 导出从 Visual Studio 2010 设计器创建的 Windows 窗体控件

> ID：10622362
> 
> 赞同：-1
> 
> 时间：2012-05-16T16:05:38.890
> 
> 标签：.net, winforms, visual-studio-2010, windows-forms-designer

如何导出在 Visual Studio 设计器中为 Windows 窗体项目创建的控件。目的是允许控件被通用地构建、打包并作为其他项目的参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:38:13.293

VS 2010 > 新类库 > 调用它`CtrlLibrary`> 添加一个名为 SuperButton 的用户控件，带有一个按钮。

将类库编译成 DLL。

要么：a）文件>关闭解决方案>新Winform项目>引用DLL
或b）文件>将新Winform项目添加到解决方案并引用类库项目。

在这两种情况下，您都将打开一个窗口窗体，打开工具箱并看到您拖到窗体上的 SuperButton 用户控件。

# asp.net - SelectedIndex 在页面加载时自动选择

> ID：10622372
> 
> 赞同：0
> 
> 时间：2012-05-16T16:06:21.463
> 
> 标签：asp.net

我有一个帐户页面，用户可以在其中查看他们的帐户信息。我希望他们能够在这里更改密码。我设法实现它的方式如下：

网络服务：

```
[WebMethod]
    public string ChangePassword(DataSet ds)
    {
        string database = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|/dvd_forum.accdb;Persist Security Info=True";
        OleDbConnection myConn = new OleDbConnection(database);
        OleDbDataAdapter myDataAdapter = new OleDbDataAdapter("Select * from Users", myConn);
        OleDbCommandBuilder builder = new OleDbCommandBuilder(myDataAdapter);
        builder.QuotePrefix = "[";
        builder.QuoteSuffix = "]";
        myConn.Open();
        myDataAdapter.Update(ds, "Users");
        myConn.Close();
        return "Password changed!";
    } 
```

前台代码：

```
<asp:Label ID="username" runat="server" Text=""></asp:Label><span>'s Account</span><br />
<asp:TextBox ID="ChangePasswordInput" runat="server"></asp:TextBox>
<asp:Button ID="Button1" runat="server" Text="Save" 
    onclick="ChangePassword_Click" />
<asp:Label ID="Label2" runat="server" Text=""></asp:Label><asp:RequiredFieldValidator id="RequiredFieldValidator3" runat="server" ErrorMessage="Required!" ControlToValidate="ChangePasswordInput"></asp:RequiredFieldValidator>
<asp:GridView ID="GridView1" runat="server">
</asp:GridView> 
```

回码：

```
public partial class Account : System.Web.UI.Page
{

public static DataSet ds;

protected void Page_Load(object sender, EventArgs e)
{
    if (User.Identity.IsAuthenticated)
    {
        username.Text = User.Identity.Name;
    }

    localhost.Service1 myws = new localhost.Service1();
    ds = myws.GetUserAcc(User.Identity.Name);
    GridView1.DataSource = ds;
    GridView1.DataBind();
}
protected void ChangePassword_Click(object sender, EventArgs e)
{
    //change password
    int i = GridView1.SelectedIndex;
    ds.Tables["Users"].Rows[i]["password"] = ChangePasswordInput.Text;
    GridView1.DataSource = ds;
    GridView1.DataBind();
    localhost.Service1 myws = new localhost.Service1();
    Label2.Text = myws.ChangePassword(ds);
}
} 
```

问题是我必须在更改密码之前选择 gridview 中的行。有什么办法可以让我自动选择行，因为只有一行。或者我如何在不先选择行的情况下以不同的方式对其进行编码？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:23:05.543

您的 GridView 和按钮是页面上的单独控件，因此如果不选择 GridView 中的行，您无法确定选择哪个用户进行密码更改。如果您可以将按钮放在 GridView 内，IMO 会更好。制作一个[可编辑的 GridView](http://www.codeproject.com/Articles/23471/Editable-GridView-in-ASP-NET-2-0)。

编辑：根据您的评论，您的网格视图中只有一行，我真的看不出将 Gridview 与数据表一起使用的原因。您可以有一个标签显示用户名和新密码的文本框。（您可能想重新确认密码）。然后在您的网络服务中，您可以传递新密码（如果加密更好），而不是传递数据表，然后使用 SQL Update 语句更新数据。但是，如果您仍然想使用 GridView，那么您可以直接在 Row 索引中传递 0 而不是获取 selectedIndex。您可以检查 dataTable 是否包含任何行。

```
if(ds.Tables.Count > 0 && ds.Tables["Users"] != null && ds.Tables["Users"].Rows.Count > 0)
{
    ds.Tables["Users"].Rows[0]["password"] = ChangePasswordInput.Text;
    GridView1.DataSource = ds;
    GridView1.DataBind();
    localhost.Service1 myws = new localhost.Service1();
    Label2.Text = myws.ChangePassword(ds);
} 
```

# delphi - 更改位图的 HUE 但保留背景颜色？

> ID：10622373
> 
> 赞同：5
> 
> 时间：2012-05-16T16:06:22.950
> 
> 标签：delphi, delphi-xe

我一直在尝试`Change HUE/Saturation`在 EFG 网站上找到的示例：[http ://www.efg2.com/Lab/Library/Delphi/Graphics/Color.htm](http://www.efg2.com/Lab/Library/Delphi/Graphics/Color.htm)

![在此处输入图像描述](../Images/3c916aae6e897662c4caa12e58904729.png)

我想使用该示例中的技术来更改某些位图的颜色值（用于 TImage）。我面临一个问题，那就是具有透明位图的 TImage；我不希望背景颜色改变它的 HUE，而只是改变实际的图像数据。

拿这个我们可以使用的示例图像（尽管可以使用任何具有透明度的图像）：

![在此处输入图像描述](../Images/09cafc52492e03cfda1d8eb286edabcf.png)

*   `Change HUE/Saturation`从顶部的链接下载演示。
*   现在将上面的按钮图像加载到 ImageOriginal 中。
*   将增量饱和度设置为 1。
*   运行项目。

一些输出结果：

![在此处输入图像描述](../Images/5ac589fbd67ebdbf4bd1857ddac45a57.png) ![在此处输入图像描述](../Images/da0f1239b97e38f21f2e272514361ef4.png)

我想在这里发生的是保持原始背景颜色（由最左下角的像素定义），并且只调整图像其余部分的色调。因此，输出结果实际上看起来像这样（在 Paint.NET 中编辑）：

![在此处输入图像描述](../Images/ad879ebc1cbd2ff013d835b5a9e4e372.png) ![在此处输入图像描述](../Images/314761d8c6936f2af811e49b60c42798.png)

请允许我使用另一个示例图像进行测试，其中包含更多图像数据：

![在此处输入图像描述](../Images/beaeca180a0417c8ae371188a239f2dc.png)

与之前的第一个图像样本一样，结果可能类似于：

![在此处输入图像描述](../Images/1c7f6e24d980508ce9a355e7ba568eda.png) ![在此处输入图像描述](../Images/6c80156601e533536eadaf4c582b6fa0.png)

当我想要的结果应该是这样的：

![在此处输入图像描述](../Images/2c288672ad7b510b8d1588b95224de6c.png) ![在此处输入图像描述](../Images/9a550ebfb84ddb96393047a9ef9f4fca.png)

我的一个想法是在更改 HUE 之后，用原始颜色替换最左下角的颜色，但我不确定这是否是正确的方法，即使是我也不确定如何替换颜色X 代表另一种颜色。（图形和数学超出了我的范围）。

例如，如果我在米奇的耳朵上画了两个蓝色圆圈（蓝色是最左下角像素的原始透明颜色）并且还给他的眼睛上色：

![在此处输入图像描述](../Images/1a36a33568898fb1953bd729dfb42f51.png)

再次更改 HUE 可能如下所示：

![在此处输入图像描述](../Images/07cb8b64867b8ae3c591f89d7d5101fe.png)

实际上它应该是这样的：

![在此处输入图像描述](../Images/08efed37eb375b1f38fe62dd7c141cb6.png)

简单地说，我想改变图像的色调，无论是通过 EFG 演示中使用的方法还是其他解决方案。当 HUE 改变时，由最左下像素定义的透明颜色不应改变，这应该与示例图像中所示的保持相同。

如何在保留背景颜色的同时更改位图的 HUE？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T16:54:30.790

您引用的代码会遍历图像上的所有像素以更改色相/饱和度。您可以修改代码，使其在像素具有特定颜色时不会干扰：

```
PROCEDURE TFormChangeHS.UpdateBitmap;
    ..
    S              :  TReal;
    V              :  TReal;

    FixColor: TRGBTriple;                            // New variable
BEGIN
  DeltaSaturation := SpinEditDeltaSaturation.Value;
  NewHue := TrackBarHue.Position;

  Bitmap := TBitmap.Create;
  TRY
    Bitmap.Width  := ImageOriginal.Width;
    Bitmap.Height := ImageOriginal.Height;
    Bitmap.PixelFormat := ImageOriginal.Picture.Bitmap.PixelFormat;
    ASSERT(Bitmap.PixelFormat = pf24bit);

    // save bottom left color
    FixColor := PRGBTripleArray(
                  ImageOriginal.Picture.Bitmap.ScanLine[Bitmap.Height - 1])^[0];
    //--

    FOR j := 0 TO Bitmap.Height-1 DO
    BEGIN
      RowIn  := ImageOriginal.Picture.Bitmap.Scanline[j];
      RowOut := Bitmap.Scanline[j];
      FOR i := 0 TO Bitmap.Width-1 DO
      BEGIN
        WITH RowIn[i] DO
        BEGIN

          // copy the color to target and continue with next iteration
          if (RowIn[i].rgbtBlue = FixColor.rgbtBlue) and
              (RowIn[i].rgbtGreen = FixColor.rgbtGreen) and
              (RowIn[i].rgbtRed = FixColor.rgbtRed) then begin
            RowOut[i] := FixColor;
            Continue;
          end;
          //--

          // convert pixel coordinates to HSV
          RGBtoHSV(rgbtRed, rgbtGreen, rgbtBlue, H, S, V);
        END;
        ..
        .. 
```

输出：  

![在这里输入代码](../Images/40bac8165e28f4c12ea16dd77c9ce2af.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T16:40:47.250

理论上，您可以例如：

首先，您必须确定背景是什么......（可能像delphi那样选择特定像素的颜色......）

然后，使用此背景颜色，您可以根据此颜色创建蒙版...

您复制图像...应用色调...

您使用蒙版合并您的 2 个位图...

# android - 如何处理 java.lang.OutOfMemoryError 位图大小超过 VM 预算页面适配器？

> ID：10622379
> 
> 赞同：0
> 
> 时间：2012-05-16T16:06:44.470
> 
> 标签：android, android-viewpager, swipe-gesture

我在我的应用程序中实现了一个使用 ViewPager 的活动，并带有一个 PagerAdapter 来显示 4 个图像。您一次只能看到一张图片，要显示下一张，您必须滑动它。图像的大小不是很大，我不知道为什么，但会发生错误“java.lang.OutOfMemoryError 位图大小超过 VM 预算 pageradapter”。

这是我的代码：

```
 public class InfoActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.information);

        MyPagerAdapter adapter = new MyPagerAdapter();
        ViewPager myPager = (ViewPager) findViewById(R.id.mypanelpager);
        myPager.setAdapter(adapter);
        myPager.setCurrentItem(0);
    }

    private class MyPagerAdapter extends PagerAdapter {

        public int getCount() {
            return 4;
        }

        public Object instantiateItem(View collection, int position) {

            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            int resId = 0;
            switch (position) {
            case 0:
                resId = R.layout.farleft;
                break;
            case 1:
                resId = R.layout.left;
                break;
            case 2:
                resId = R.layout.middle;
                break;
            case 3:
                resId = R.layout.right;
                break;
            }

            View view = inflater.inflate(resId, null);

            ((ViewPager) collection).addView(view, 0);

            return view;
        }

        @Override
        public void destroyItem(View arg0, int arg1, Object arg2) {
            ((ViewPager) arg0).removeView((View) arg2);
        }

        @Override
        public void finishUpdate(View arg0) {

        }

        @Override
        public boolean isViewFromObject(View arg0, Object arg1) {
            return arg0 == ((View) arg1);

        }

        @Override
        public void restoreState(Parcelable arg0, ClassLoader arg1) {

        }

        @Override
        public Parcelable saveState() {
            return null;
        }

        @Override
        public void startUpdate(View arg0) {
        }

    }

} 
```

R.layout.right 是：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/info4" 
        android:contentDescription="@string/fourthInfoImage">
    </ImageView>

</LinearLayout> 
```

除了源图像之外，其他都是平等的。我该如何纠正这个错误？有几篇关于该错误的帖子，但我没有找到解决我的问题的帖子。我相信没有调用“destroyItem”函数..

谢谢

PS其实我按照[http://mobile.tutsplus.com上的教程](http://mobile.tutsplus.com)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:36:53.217

希望这会有所帮助[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

# c# - BackgroundWorker 的最佳实践

> ID：10622385
> 
> 赞同：3
> 
> 时间：2012-05-16T16:06:59.047
> 
> 标签：c#, user-interface, user-controls, backgroundworker

我正在制作我的第一个 C# GUI。它使用 a`BackgroundWorker`来运行计算量大的模拟。定期地，模拟报告（通过`ProgressChanged`事件）需要在 GUI 中显示的大量信息。

GUI 分为多个控件，我希望每个控件都知道如何“更新自身”。

在我的研究中，我发现了很多方法可以做到这一点。

*   我能想到的是让方法绑定`ProgressChanged`在 GUI 的每个部分上调用更新方法。
*   我可以`Invalidate`GUI 并将每个控件更新方法绑定到`Validating`事件。
*   我可以将每个控件的更新方法绑定到`ProgressChanged`事件。
*   我可以让每个控件实现`INotifyPropertyChanged`接口（但我怀疑这是否可行）

在所有这些选项中，哪一个是在事件发生时更新整个 GUI 的最佳实践`ProgressChanged`？（或者我在左场？）

来自评论：

```
private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
  Simulation simulation = new Simulation();
  while(true)
  {
    simulation.RunIteration();
    backgroundWorker.ReportProgress(-1, simulation);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:20:11.500

你不应该做任何特别的事情。

您的 ProgressChanged 处理程序可以“解包”数据并设置控件的相关属性。失效和重绘是自动的，它在 GUI 线程上运行。

您只应该小心更新“过于频繁”。多久太频繁取决于数据量，处理程序应该在下一次更新之前完成。如果没有，请建立一些节流机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:26:52.327

ProgressBar 是我推荐的方法。如果您要发送到 GUI 的数据是文本，那么您可以有一个富文本框或只是一个常规文本框，并在进度条更改时将文本传递给它：

```
public void SomeThread_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    /* Update progress bar */
    ProgressBar.Value = (e.ProgressPercentage);
    if (e.UserState != null)
    {
        TextBox.Text += (string)e.UserState;
    }
} 
```

对于其他形式的数据，您可以包含一个 If 语句，它在进度条被赋予特定值时执行 X。

但是，如果不了解您具体要做什么，恐怕我无法提供更多帮助。

# php - 为什么 PHP 挂起，当 bash 调用分叉时

> ID：10622393
> 
> 赞同：4
> 
> 时间：2012-05-16T16:07:24.193
> 
> 标签：php, bash, fork

我正在从 php 调用一些 bash 代码，但即使我分叉了 bash（使用`&`），php 也不会在完整的 bash 完成之前完成。

这段代码：

```
<html>
<body>
HTML START<br>
<pre>
<?php
echo "PHP START\n";
echo `sleep 30 &`;
echo "PHP END\n";
?>
</pre>
HTML END<br>
</body>
</html> 
```

在 30 秒之前不会在浏览器中显示任何内容。

我真正想要的是从 php 启动一个 GUI 应用程序，它应该继续运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:17:57.803

关闭 sleep 调用中的所有文件描述符以使其分离：

```
<?php
echo "PHP START\n";
echo `sleep 30 <&- 1<&- 2<&- &`;
echo "PHP END\n";
?> 
```

否则，输出文件描述符仍处于打开状态，PHP 仍在尝试等待接收其输出，即使进程不再直接附加。

这在运行时正常工作，立即退出但留下一个睡眠过程：

```
$ time php5 test.php; ps auxw | grep sleep | grep -v grep
PHP START
PHP END

real    0m0.019s
user    0m0.008s
sys         0m0.004s
cduffy    6239  0.0  0.0  11240   576 pts/0    S    11:23   0:00 sleep 30 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:11:13.837

PHP 等待被调用的进程终止，即使符号是明确给出的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T16:13:43.057

也许通过使用对另一个 PHP 脚本的 Ajax 调用来创建另一个 HTTP 进程，该任务将`sleep 30`在服务器上异步启动您的命令或任何您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T16:24:26.407

您可能想要做的是分离分叉的进程。一种方法是`nohup`在 bash 命令中使用。

例如查看用户对 php.net > exec 的评论，尤其是这个：[http ://www.php.net/manual/en/function.exec.php#88704](http://www.php.net/manual/en/function.exec.php#88704)

但是要小心，您会失去直接反馈，并且必须通过其他方式监控您的流程/结果

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-16T16:18:34.750

```
sleep(30); 
```

桅杆...

```
<?php
echo "PHP START\n";
echo sleep(30);
echo "PHP END\n";
?> 
```

# c# - 在不同的计算机上运行应用程序需要什么样的数据库连接字符串

> ID：10622394
> 
> 赞同：0
> 
> 时间：2012-05-16T16:07:24.410
> 
> 标签：c#, database, c#-4.0

我正在学习 c# 和 sql 数据库。我有一个用 c#.net 开发的数据库管理系统。

我的数据库连接字符串是：

> string _ConnectionString = @"Data Source=.\SQLEXPRESS;AttachDbFilename=E:\Promming Codes\OOP2 (C#)Programs\C# Database\MMS\MMS\MMSdatabase.mdf;Integrated Security=True;User Instance=True";

它在我的电脑上运行得很好，但是当我尝试将安装文件安装到我朋友的电脑上时，找不到连接字符串。我怎样才能克服这种问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:29:35.870

如果您尝试从朋友的计算机访问数据库并且你们都在同一个网络上，那么您需要修改您的连接字符串。您当前的连接字符串指向本地机器，您需要它指向您的机器（就像服务器一样）。在这种情况下，您的连接字符串应该是：

> string _ConnectionString = @"DataSource=yourmachineaddress\SQLEXPRESS；AttachDbFilename=E:\Promming Codes\OOP2 (C#)Programs\C# database\MMS\MMS\MMSdatabase.mdf；集成安全性=True；用户实例=True"；

您的机器地址可能是您的机器名称。您还可以在您的 sql 服务器上启用远程访问。[如何在 SQL Server 中启用远程连接](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)

如果您和您的朋友不在同一个网络上并且您需要安装一个单独的应用程序实例，那么您必须在您朋友的计算机上安装 SQL Express。在那里恢复数据库并根据该特定机器设置创建连接字符串。对于构建连接字符串检查[SQL Server 2008 的连接字符串](http://www.connectionstrings.com/sql-server-2008)

# c# - 从 htmlagility 包中的节点中选择节点

> ID：10622396
> 
> 赞同：0
> 
> 时间：2012-05-16T16:07:26.410
> 
> 标签：c#, winforms, html-agility-pack

我有 html 正文，我使用此代码来选择特定的代码段，然后在第二行中，我尝试隔离属于该特定节点的其他元素。

```
HtmlNode node = doc.DocumentNode.SelectSingleNode("//table[@class='ts']");
HtmlNodeCollection prices = node.SelectNodes("//span[@class='nobr']"); 
```

但是，当 'node' 不包含 'nobr span' 时，会从整个 'doc' 中提取元素；如何将此搜索限制为仅选定节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:14:39.593

`.//`从当前节点开始并仅搜索其后代：

```
HtmlNodeCollection prices = node.SelectNodes(".//span[@class='nobr']"); 
```

# excel - 如何从excel中的日期中减去工作日数

> ID：10622399
> 
> 赞同：1
> 
> 时间：2012-05-16T16:07:27.543
> 
> 标签：excel, date

我目前在单元格中有一个日期编码为 mm/cc/yyyy。在另一个单元格中，我想减去某个数字（为了这个例子，假设为 5）工作日。

例如，如果日期是 2012 年 5 月 16 日，那么结果将是 2012 年 5 月 9 日。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T16:24:49.870

试试这个页面，[日期算术](http://www.cpearson.com/excel/datearith.htm "日期算术")——特别是减去日期部分。请注意最后一段中的 WORKDAY 函数。

例如，如果源日期在 A2 中，而前几天（作为非负值）在 B2 中：

```
=TEXT(WORKDAY(A2, B2 * -1), "m/d/yyyy") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:11:25.600

您应该使用分析工具库插件中提供的[NETWORKDAYS()函数。](https://support.office.com/en-gb/article/NETWORKDAYS-function-48e717bf-a7a3-495f-969e-5005e3eb18e7)

您可能会发现[WORKDAY()](https://support.office.com/en-gb/article/WORKDAY-function-f764a5b7-05fc-4494-9486-60d494efbf33)就足够了。

# implementation - 实现 Barabasi-Albert 方法以创建无标度网络

> ID：10622401
> 
> 赞同：5
> 
> 时间：2012-05-16T16:07:30.683
> 
> 标签：implementation, neural-network

我正在尝试实现一个非常简单的优先附件算法来创建无标度网络。它们具有遵循幂律的度数分布，即 P(k) ~ k^-g，其中 g 是指数。下面的算法应该产生指数等于 3 +/- 0.1 的度数分布，我的实现没有指数接近 2.5 +/- 0.1。我显然不理解某处的东西并继续出错。

很抱歉，如果这是在错误的地方，我无法决定它是否应该在 stackoverflow 或 maths.stackexchange.com 中。

```
The Algorithm:
Input: Number of Nodes N; Minimum degree d >= 1.
Output: scale-free multigraph
G = ({0,....,N-1}, E)
M: array of length 2Nd
for (v=0,...,n-1)
   for (i=0,...,d-1)
      M[2(vd+i)] = v;
      r = random number selected uniformly at random from {0,.....,2(vd+i)};
      M[2(vd+i)+1] = M[r];
   end
end

E = {};
for (i=0,...,nd-1)
   E[i] = {M[2i], M[2i+1]}
end 
```

我在 C/C++ 中的实现：

```
void SF_LCD(std::vector< std::vector<int> >& graph, int N, int d) {
    if(d < 1 || d > N - 1) {
        std::cerr << "Error: SF_LCD: k_min is out of bounds: " << d;
    }

    std::vector<int> M;
    M.resize(2 * N * d);

    int r = -1;
    //Use Batagelj's implementation of the LCD model
    for(int v = 0; v < N; v++) {
        for(int i = 0; i < d; i++) {
            M[2 * (v * d + i)] = v;
             r = mtr.randInt(2 * (v * d + i));
            M[2 * (v * d + i) + 1] = M[r];
        }
    }

    //create the adjacency list
    graph.resize(N);
    bool exists = false;
    for(int v = 0; v < M.size(); v += 2) {
        int m = M[v];
        int n = M[v + 1];

        graph[m].push_back(n);
        graph[n].push_back(m);
    }
} 
```

这是我在 N = 10,000 和 d = 1 时得到的度数分布示例：

```
1   6674
2   1657
3   623
4   350
5   199
6   131
7   79
8   53
9   57
10  27
11  17
12  20
13  15
14  12
15  5
16  8
17  5
18  10
19  7
20  6
21  5
22  6
23  4
25  4
26  2
27  1
28  6
30  2
31  1
33  1
36  2
37  2
43  1
47  1
56  1
60  1
63  1
64  1
67  1
70  1
273 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T12:06:34.017

好的，所以我不知道如何使这个特定算法正常工作，而是使用了另一个算法。

```
The Algorithm:
Input: Number of Nodes N; 
       Initial number of nodes m0; 
       Offset Exponent a; 
       Minimum degree 1 <= d <= m0.
Output: scale-free multigraph G = ({0,....,N-1}, E).

1) Add m0 nodes to G.
2) Connect every node in G to every other node in G, i.e. create a complete graph.
3) Create a new node i.
4) Pick a node j uniformly at random from the graph G. Set P = (k(j)/k_tot)^a.
5) Pick a real number R uniformly at random between 0 and 1.
6) If P > R then add j to i's adjacency list.
7) Repeat steps 4 - 6 until i has m nodes in its adjacency list.
8) Add i to the adjacency list of each node in its adjacency list.
9) Add i to to the graph.
10) Repeat steps 3 - 9 until there are N nodes in the graph. 
```

其中 k(j) 是图 G 中节点 j 的度数，k_tot 是图 G 中边数（总度数）的两倍。

通过改变参数可以控制度数分布的指数。a = 1.22 给我一个 3 +/- 0.1 的指数 g（在 P(k) ~ k^-g 中）。

# javascript - 使用模型和集合对 Backbone.js 中的非标准操作进行建模

> ID：10622404
> 
> 赞同：1
> 
> 时间：2012-05-16T16:07:41.553
> 
> 标签：javascript, backbone.js, underscore.js, frontend

我正在做一个有“阅读列表”的项目，在这个列表中是“阅读列表项”——它们是一个抽象概念，在服务器端它们可以是书籍、文章等——它们被处理整个过程中都有一个装饰器，它可以抽象出差异，效果很好。

我正在做一些看起来或多或少像这样的东西：

1.  s集合`ReadingListItem`（骨干模型）
2.  表示`#reading_list`（主干元视图）的视图
3.  代表`ReadingListItem`自己的视图，此视图上的绑定直接与模型交互。

```
window.ReadingListItem = Backbone.Model.extend
   url: ->
     @get('_links').self
   markRead: ->
     $.ajax
       method: 'put'
       url: @get('_links').read_list

   markDismissed: ->
     $.ajax
       method: 'delete'
       url: @get('_links').mark_dismissed
```

这是一个模型，视图看起来像这样：

```
window.ReadingListView = Backbone.view.extend

   el: '#reading_list'

   render: ->
     @el.empty()
     @collection.each (list_item) ->
       @el.append( new ReadingListItemView(list_item).render().el() )

window.ReadingListItemView = Backbone.View.extend

  events: {
    "click .js-mark-read" : "markRead"
    "click .js-mark-dismissed" ; "markDismissed"
  }

  markRead: ->
    @model.markRead()
    $el.fadeOut
    @resetCollection

  markDismissed: ->
    @model.markDismissed()
    $el.fadeOut
    @resetCollection

  resetCollection: ->
    // to trigger a redraw, I really do this:
    window.reading_list_collection.reset() 
```

这有效（*警告*我已经为 SO 编写了这段代码而没有实际运行它，所以它可能有点错误，但它在概念上是我现在所拥有的）

以下是我对此的疑问：

1.  感觉就像在模型上定义不是 CRUD 的动词似乎违反了主干“正常用法”，而且我没有幸运地找到有关如何处理这个问题的任何信息（以不破坏模型的方式作用于模型） )

2.  集合如何知道模型是否发生了“某些事情”（当没有创建/删除某些事情时）？

3.  有没有更好的方法可以为这个列表建模？

4.  当监视列表太空时，它应该从服务器刷新自己，它预先播种了大约 20 个 JSON 项目，实际上只显示前 10 个。（我可能会将这一切都移动为 JSON，因为它不是'为页面播种并没有太大的性能胜利）

5.  还有其他事情发生，在页面上的`markRead`/`markDismised`另一个视图上被告知从服务器重新下载列表，以显示阅读列表的摘要计数器，我希望这是否绑定到同一个集合权力`ReadingListView`

如果有任何不清楚的地方，请随时发表评论，我知道在没有具体错误消息的情况下，SO 不适合开放式问题，但我很期待

# html - 为什么这个 CSS3 动画在 Safari 和 Chrome 中不起作用？

> ID：10622408
> 
> 赞同：1
> 
> 时间：2012-05-16T16:07:56.147
> 
> 标签：html, google-chrome, animation, css

我使用了 -webkit- 东西，但由于某种原因它没有动画，即使带有 -moz- 前缀的相同代码在 Firefox 中也可以工作。

背景是要向下滑动的，然后背景会改变，新的动画应该开始。新的动画也是一样，背景滑进去，然后滑出盒子，然后新的又进来了。

[http://jsfiddle.net/6sQTJ/](http://jsfiddle.net/6sQTJ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:29:48.453

@Gerben 给出的正确答案是，您不能在 CSS3 动画中将 % 位置与像素 'px' 位置混合。即使它可以在 FireFox 中运行，它也不能在其他一些支持 CSS3 动画的浏览器中运行。

# c# - 在 ASP.NET 中的类中有一个 Response.Redirect 的坏习惯？

> ID：10622409
> 
> 赞同：1
> 
> 时间：2012-05-16T16:07:59.820
> 
> 标签：c#, asp.net, asp.net-ajax, response.redirect

在我的 ASP.NET 应用程序中，我使用一种方法来检查用户权限，以决定用户是否可以查看该页面，或者被重定向到“无效权限”页面。

由于在母版页上添加此权限重定向会导致无限循环，因此我被迫将其应用于所有页面。我不想将此方法复制到每个页面上，因此我想在我的 Web 应用程序中创建一个包含此方法的类，以便我可以在我的应用程序中全局使用它。

我没有接受过正式培训，但我的直觉告诉我，在课堂上放置 Response.Redirect 或任何“Web”功能是不好的做法？我对么？如果是这样，有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:11:17.587

您可以在重定向之前检查当前的 url 以确保它不是无效的权限页面；因此，只有当您不在那里时，您才会重定向。

```
if(!Request.RawUrl.Contains("Invalid Permissions Page"))
    Response.Redirect("Invalid Permissions Page"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:24:50.403

你可以创建一个新类，我们称之为`myPageClass`继承 from `System.Web.UI.Page`，然后，在这个类中包含你需要的所有代码，使你所有的代码都可以继承 from `myPageClass`。

```
public class myPageClass : System.Web.UI.Page
    {
        public void authorize()
        { 
            // your auth code here
            Response.Redirect("Invalid_Permissions_Page.aspx", false);
        }
    } 
```

* * *

```
public partial class _Default : myPageClass
{
    protected void Page_Load(object sender, EventArgs e)
    {
        // Your code here
    }
} 
```

在我看来，你不应该`Response.Redirect`在按钮动作的情况下使用，例如，如果它将带你到另一个页面，你不需要去服务器做那个，那只是做在客户端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T16:42:36.200

首先，您的原始问题：

> 在 ASP.NET 中的类中有一个 Response.Redirect 的坏习惯？

是的，我认为这是一种不好的做法。传递委托更安全，然后您的“AuthorizeRequest”方法可以调用委托。这是一个例子：

```
public static void AuthorizeRequest(Action<string> redirect)
{
    if( /*whatever*/ )
        redirect("/InvalidPermissions.htm");
}

protected void Page_Load(object sender, EventArgs e)
{
    AuthorizeRequest(Response.Redirect);
} 
```

**现在更大的问题......你不想这样做！**

让每个页面都断言授权是编写安全问题的快速方法。有人会忘记或意外删除断言。ASP.NET 有多种方法来拦截和过滤为此目的的请求。

最简单的做法是将其放在 Global.asax 文件中的事件挂钩中。[HttpApplication](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.aspx)对象有几个可用于此目的的事件。另一种选择是实现[IHttpModule](http://msdn.microsoft.com/en-us/library/system.web.ihttpmodule)接口。无论哪种方式，我都不会在每一页中编写代码。

# asp.net - 在客户端禁用的文本框仍然在服务器端启用

> ID：10622412
> 
> 赞同：2
> 
> 时间：2012-05-16T16:08:14.890
> 
> 标签：asp.net, validation, requiredfieldvalidator, customvalidator

在 ASP.NET 中，`RequiredFieldValidator`即使我在客户端禁用它，它仍然会验证文本框控件。我想通过使用`CustomValidator`. 在验证功能中，我检查是否启用了文本框。如果是这种情况，我将验证器设置为有效。

```
function ValidateTextBox(sender, args) {

    var $textbox = $('#txtFoo')
    args.isValid = $textbox.prop('disabled') || $textbox.val();

} 
```

这在客户端工作正常。问题是，我使用 JavaScript 在客户端更改了文本框的状态。因此，服务器不知道更改的状态（文本框控件现在已禁用）。因此，当`ServerValidate`引发自定义验证器的事件时（`Page.Validate`例如通过调用），我无法检查文本框是否被禁用。因为服务器不知道这一点`Enabled`，所以无论我在客户端做什么，该属性始终设置为 true。
如何在禁用控件时禁用控件验证或在 期间告诉服务器文本框的状态`Postback`？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:19:26.507

1.  而不是`'disabled'`尝试将文本框设置为`'ReadOnly'`模式。

2.  您可以`Enable`或`Disable`您`RequiredFieldValidator`当时正在使用`ValidatorEnable`JavaScript 方法禁用文本框（[参考](http://manjuhpt.wordpress.com/2007/12/11/how-to-enabledisable-required-field-validator-in-javascript/)）

# javascript - d3.json 有效，但 $.getJson 失败

> ID：10622414
> 
> 赞同：0
> 
> 时间：2012-05-16T16:08:17.003
> 
> 标签：javascript, jquery, getjson, d3.js

使用[d3.json](https://github.com/mbostock/d3/wiki/Requests)发出 json 请求，而 $.getJson 和 $.ajax 失败。这不是跨域问题，因为我在同一域上请求脚本。

```
d3.json('api.php?q=/user/authUser?authemail=email%26authpassword=pass', function(d) {

        console.log(d);

}); 
```

在控制台 --> 网络中，d3 请求正确地将 api.php 显示为路径，但使用 $.getJson 或 $.ajax 我将 Web 服务路由 (web.myapp.local) 作为路径。

d3.json 不只是 $.getJson 的包装器。如果是这样，为什么每个请求路径都不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T18:47:52.687

我发现了问题所在，我正在使用 mockjax，一个 javascript 库来拦截 ajax 调用，它导致了问题。通过完全删除库来解决它。

这可能不是最新版本的问题 - 但当时是

# c# - 如何获取具有特定名称的 VPN / 网络的 IP 以及是否已连接？

> ID：10622418
> 
> 赞同：0
> 
> 时间：2012-05-16T16:08:36.173
> 
> 标签：c#, .net, windows

查看 Windows Server 2008 中的“网络连接”，我有一个名为“公司”的连接。

如何确定此 VPN 当前是否已连接以及它分配了哪些内部 IP(*)？

(*) 使用内部 IP 我指的是本地计算机之一，因此我可以在“BindIPEndPointDelegate”中使用此 IP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:29:48.003

这可能会帮助您：

```
 foreach (var item in System.Net.NetworkInformation.NetworkInterface.GetAllNetworkInterfaces())
        {
            Console.Write(item.Name + " - " + item.OperationalStatus.HasFlag(System.Net.NetworkInformation.OperationalStatus.Up) + " : ");
            foreach (var item2 in item.GetIPProperties().UnicastAddresses)
            {
                if (!item2.Address.IsIPv6LinkLocal)
                    Console.Write(item2.Address.ToString());
            }
            Console.WriteLine();
        } 
```

# javascript - Jquery 在 IE 9 中不起作用

> ID：10622419
> 
> 赞同：1
> 
> 时间：2012-05-16T16:08:38.933
> 
> 标签：javascript, jquery

我正在尝试创建一个切换面板来显示和隐藏额外的 div。请在下面找到我的函数代码片段。它在 Chrome、Safari 和 Firefox 中运行良好。它不能单独在 IE 9 上运行。请帮忙。

```
 handleExpandClick : function(e){
        e.preventDefault();
        e.stopPropagation();
        $(e.currentTarget).hide("slow");
        var nextElem = e.currentTarget.parentElement.nextElementSibling;
        $(nextElem).slideDown("slow");

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T16:09:57.187

```
handleExpandClick : function(e){
        e.preventDefault();
        $(this).hide("slow"); // you may use e.target instead of this
        var nextElem = $(this).parent().next();
        nextElem.slideDown("slow");
    } 
```

# ajax - MVC App Ajax 调用控制器或 WCF

> ID：10622421
> 
> 赞同：1
> 
> 时间：2012-05-16T16:08:41.937
> 
> 标签：ajax, wcf, asp.net-mvc-2

嗨，我现在在几家公司工作过。两者都使用 MVC 来创建他们的软件。一家公司将 WCF 服务用于他们所有的 Ajax 调用，而我最近的公司正在向他们的控制器进行所有 Ajax 调用。我更喜欢 WCF 方法，因为它似乎使代码更清晰、更易读，但是，根据 MVC，所有视图调用都应该通过控制器。我只是想知道是否有人有任何好的信息、参考资料或文章来说明哪种做法更好，或者对控制器或 WCF 服务进行服务调用是否更好？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T17:10:10.057

看起来这两种方法都可以正常工作。但是，如果您想在解决方案中包含类似[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)的东西，WCF 是更合适的解决方案。但是对于从 Web 部件到 Controller 的 Ajax 调用工作正常。

# entity-framework - ADO.NET 实体数据模型设计器扩展-InvalidOperationException

> ID：10622422
> 
> 赞同：1
> 
> 时间：2012-05-16T16:08:43.040
> 
> 标签：entity-framework, entity-framework-4, visual-studio-extensions, entity-framework-designer

在互联网上搜索我找到了这个页面：

[http://connect.microsoft.com/VisualStudio/feedback/details/585738/exception-in-entity-data-model-designer-extension-a-property-extension-cannot-edit-an-item-in-an-实体框架命名空间](http://connect.microsoft.com/VisualStudio/feedback/details/585738/exception-in-entity-data-model-designer-extension-a-property-extension-cannot-edit-an-item-in-an-entity-framework-namespace)

我有一个类似的问题。我正在尝试修改 .edmx 文件的结构，添加一个 complexType 但这会导致抛出 InvalidOperationException 。我认为创建一个范围可以避免这个问题，但事实并非如此。这是我正在使用的一段代码：

```
 public void AddComplexTypeToConceptualModel(XElement document, XElement entityType)

    {

        XElement lastEntityType = document.Descendants(XName.Get("EntityType", "http://schemas.microsoft.com/ado/2008/09/edm")).LastOrDefault();

        if (lastEntityType != null)

        {

            using (EntityDesignerChangeScope scope = Context.CreateChangeScope("Create ComplexType in Conceptual Model"))

            {

                lastEntityType.AddAfterSelf(CreateComplexType(entityType));

                // Commit the changes.

                scope.Complete();

            }

        }

    } 
```

当我运行上面显示的代码时，我收到 InvalidOperationException：属性扩展无法编辑实体框架命名空间中的项目

我正在评估的另一种可能性是使用 ModelTransformExtension 类对 context.CurrentDocument 进行更改。

你知道有什么方法可以做到这一点而不会发生这种异常吗？欢迎任何帮助或建议。

提前致谢

奥克塔维奥

# c# - 在表单关闭事件中写入文本文件

> ID：10622423
> 
> 赞同：0
> 
> 时间：2012-05-16T16:08:46.427
> 
> 标签：c#, io, text-files

我正在尝试在表单关闭事件中将一些字符串写入文本文件。问题是 streamwriter 不写任何东西，它只是写了一个空白。我有 2 个不同的文本文件，第一个将记录所有图形数据，第二个文本文件将记录一些与我的应用程序相关的首选项。我的代码如下所示，用于关闭事件和单独的主力方法：

```
 private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {

        if (e.CloseReason.Equals(CloseReason.WindowsShutDown) || (e.CloseReason.Equals(CloseReason.UserClosing))) 
        {
            if (MessageBox.Show("You are closing this application.\n\nAre you sure you wish to exit ?", "Warning: Not Submitted", MessageBoxButtons.YesNoCancel, MessageBoxIcon.Stop) == DialogResult.Yes)
            {

                writeContents("Interrupted");

                return;
            }

            else
                e.Cancel = true; 
        } 

    }

    private void writeContents(string status)
    {

        //---writes the graph data-----
        TextWriter twBackupData = new StreamWriter("C://springTestBackupData.txt");

        twBackupData.WriteLine("--Cycle#-- --TorqueLower-- --TorqueUpper--");

        //writes the table of values in there, assume x and y are the same size arrays
        for(int i = 0; i < x.Count; i++)
        {               
            twBackupData.WriteLine(x[i] + "   " + y_lower[i] + "   " + y_upper[i]);
        }

        //---writes some of the preferences------
        TextWriter twBackupDataInfo = new StreamWriter("C://springTestBackupInfo.txt");

        twBackupDataInfo.WriteLine(status);
        twBackupDataInfo.WriteLine(cycleCount.ToString());
        twBackupDataInfo.WriteLine(section.ToString());
        twBackupDataInfo.WriteLine(revsPerCycle.ToString());
        twBackupDataInfo.WriteLine(preturns.ToString());
        twBackupDataInfo.WriteLine(direction.ToString());

    } 
```

如果您能提供建议或帮助我找出为什么它写空白，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:10:32.560

您需要关闭`StreamWriter`using`using`语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:11:25.350

使用起来要容易得多：

```
var linesToWrite = new list<string>();

linesToWrite.Add(status);
linesToWrite.Add(cycleCount.ToString());
...

File.WriteAllLines("C://springTestBackupData.txt", linesToWrite); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T16:12:31.997

您需要关闭/处置写入器以使其写入，否则它永远不会刷新其流（即将数据写入文件）

使用 'using' 语句会在对象超出范围时自动处理它，因此：

```
using(TextWriter twBackupData = new StreamWriter("C://springTestBackupData.txt"))
{
     // Do your stuff here - write to the tw ---

    twBackupData.WriteLine("--Cycle#-- --TorqueLower-- --TorqueUpper--");   

    //writes the table of values in there, assume x and y are the same size arrays   
    for(int i = 0; i < x.Count; i++)   
    {                  
        twBackupData.WriteLine(x[i] + "   " + y_lower[i] + "   " + y_upper[i]);   
    }   
} 
```

将确保您的文件被写入

更多信息在这里：

[http://msdn.microsoft.com/en-us/library/yh598w02.aspx](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T16:10:57.927

你需要`.Close()`在你的 StreamWriters 上做；

# jquery - clearInterval 在点击时不起作用

> ID：10622429
> 
> 赞同：1
> 
> 时间：2012-05-16T16:09:02.777
> 
> 标签：jquery

我有一个简单的幻灯片脚本，它以给定的时间间隔旋转图像。它具有用于浏览幻灯片的“上一个”和“下一个”按钮。单击这些按钮后，将调用 clearInterval 并设置一个新计时器，但问题是 clearInterval 函数似乎不起作用，并且计时器只是堆积起来。

这是脚本：

```
 $(document).ready(function() {
        var currentPosition = 0;
        var slideWidth = 570;
        var slides = $(".slide");
        var slidesNumber = slides.length;
        var slideshowInterval;
        var speed = 5000;

        slideShowInterval = setInterval(changePosition, speed);

        slides.wrapAll('<div id="slides_holder"></div>');

        $("#slides_holder").css("width", slideWidth*slidesNumber);

        $("#left_arrow").click(function() {
            if (currentPosition == 0) {
                currentPosition = slidesNumber-1;
            }
            else {
                currentPosition--;
            }

            clearInterval(slideshowInterval);
            slideShowInterval = setInterval(changePosition, speed);
            moveSlide();
        });

        $("#right_arrow").click(function() {
            if (currentPosition == slidesNumber-1) {
                currentPosition = 0;
            }
            else {
                currentPosition++;
            }

            clearInterval(slideshowInterval);
            slideShowInterval = setInterval(changePosition, speed);
            moveSlide();
        });

        function changePosition() {
            if (currentPosition == slidesNumber-1) {
                currentPosition = 0;
            } else {
                currentPosition++;
            }
            moveSlide();
        }

        function moveSlide() {
            $("#slides_holder").animate({"marginLeft": slideWidth*(-currentPosition)});
        }
    }); 
```

有人能指出我的错误吗？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T16:11:26.423

的拼写错误`slideshowInterval`。

您正在使用`slideShowInterval`的某个地方和某些地方`slideshowInterval`。使用任何一种。

# android - 更改方向时重复 ListFragment 条目

> ID：10622430
> 
> 赞同：0
> 
> 时间：2012-05-16T16:09:05.757
> 
> 标签：android, android-fragments, orientation-changes, android-listfragment

所以，我正在开发一个带有片段的应用程序，一切都很好，除了当我改变方向时，我的`ListFragment` 副本上的条目是这样的：

![普通的](../Images/9e43769b4948670ff28133d346b17390.png)![景观](../Images/84f231908dc8e0912a3e6e43ab743ef8.png)

当我回到纵向模式时，项目仍然重复；直到我终止进程并重新启动。

为了填充我正在使用的列表`AsyncTaskLoader`，但它只运行一次，当应用程序第一次启动时；然后我的适配器充满了行的信息。

我没有`<fragment>`在 main.xml 中使用标签，片段是由“父”活动中的代码添加的，如下所示：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    if (savedInstanceState == null) {
        TodoListFragment fragment = new TodoListFragment();
        FragmentTransaction trans = getFragmentManager().beginTransaction();
        trans.replace(R.id.fragment_list_container, fragment,
                LIST_FRAGMENT_TAG);
        trans.commit();
    }
} 
```

替换是和添加，但改变试图测试它是否有任何区别，它没有。我也尝试使用该`setRetainInstance(true)`方法，但无济于事。

我很难过，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:55:02.287

您说 AsyncTaskLoader 仅在应用程序启动时运行......在方向更改时应用程序正在重新启动，所以它可能第二次运行？

# php - 使用正则表达式将单词包装在 SQL 查询字符串中

> ID：10622434
> 
> 赞同：1
> 
> 时间：2012-05-16T16:09:20.087
> 
> 标签：php, mysql, regex

我有一个用 PHP 编写的数据库类，它应该处理一些我不想关心的事情。其中一项功能是处理使用 MySQL 的 AES 函数编码的列的解密。
这在正常情况下非常有效（我认为这意味着查询字符串“AS bla_bla”中没有别名）。假设有人编写了一个包含别名的查询字符串，其中包含脚本应该解密的列的名称，查询死了，因为我的正则表达式不仅包含了列，还包含了别名。这不是它应该的样子。

这是我写的正则表达式：

```
preg_replace("/(((\`|)\w+(\`|)\.|)[encrypted|column|list])/i", "AES_DECRYPT(${0},'the hash')" 
```

带有重音的部分在那里，因为有时查询确实包含表名，该表名要么在重音内，要么不在重音内。

示例输入：

```
SELECT encrypted, something AS 'a_column' FROM a_table; 
```

示例输出：

```
SELECT AES_DECRYPT(encrypted, 'the hash'), something AS 'a_AES_DECRYPT(column, 'the hash')' FROM a_table; 
```

如您所见，这行不通，所以我的想法是仅搜索单词，这些单词不在单词“as”之后，直到出现特殊字符或空格。当然，我尝试了几个小时的工作，但我没有得到正确的语法。

是否可以用纯正则表达式解决这个问题，如果可以，它会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:15:13.993

这应该让你开始：

```
$quoted_name = '(\w+|`\w+`|"\w+"|\'\w+\')';
preg_match("/^SELECT ((, )?$quoted_name( AS $quoted_name)?)* FROM $quoted_name;$/", "SELECT encrypted, something AS 'a_column' FROM a_table;", $m);
var_dump($m); 
```

研究 var_dump 后，替换部件应该很容易发现写入。

# java - Java线程序列化，为什么可以启动序列化的线程对象

> ID：10622438
> 
> 赞同：7
> 
> 时间：2012-05-16T16:09:25.107
> 
> 标签：java, serialization

java中的一个线程在java中是无法重启的，所以我实现了一个java Thread，然后在拿到Thread的序列化对象后尝试重启线程。

```
import java.io.Serializable;

public class ThreadSerialization extends Thread implements Serializable {

    int iCheck = 10;
    @Override
    public void run() {
        System.out.println("STARTING");
        for(int i=0;i<10;i++){
            iCheck+=i;
        }
    }

} 
```

和序列化算法-

```
public class CallingThreadSerializable {

    public static void main(String[] args) {
        ThreadSerialization ser = new ThreadSerialization();
        ser.start();
        FileOutputStream fos = null;
        ObjectOutputStream out = null;
        FileInputStream fis = null;
        ObjectInputStream ois = null;
        try {
            fos = new FileOutputStream("thread.ser");
            out = new ObjectOutputStream(fos);
            out.writeObject(ser);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {
            try {
                out.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        try {
            fis = new FileInputStream("thread.ser");
            ois = new ObjectInputStream(fis);
            ThreadSerialization ser1 = (ThreadSerialization) ois.readObject();
            System.out.println("---> " + ser1.iCheck);
            ser1.start();
            System.out.println("---> " + ser1.iCheck);
            ois.close();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

输出-

```
STARTING
---> 55
---> 55
STARTING 
```

为什么 ser1 对象又开始了？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-16T16:51:21.907

有两点：

首先：`Thread`不是，因此JavaDoc`Serializable`的以下摘录适用：`serializable`

> 为了允许序列化不可序列化类的子类型，子类型可以负责保存和恢复超类型的公共、受保护和（如果可访问）包字段的状态。

这意味着，您的班级`ThreadSerialization`将有责任存储和恢复`Thread`. 但是你不能这样做，`private`因为`Thread`. 因此，所有私有字段`Thread`都默认初始化。现在看看实现`Thread.start()`：

```
 //...
    if (threadStatus != 0)
        throw new IllegalThreadStateException();
    // ...
    start0();
    //... 
```

由于`threadStatus`尚未正确存储/恢复，您可以重新开始。

第二：不要混淆实际的操作系统线程和“管理器”对象`java.lang.Thread`——它们只是松散耦合的。在您的示例中，您只序列化管理器，而不是在 Java 中没有表示的操作系统线程。反序列化后，您有第二个*没有*附加操作系统线程的管理器实例。所以告诉经理开始会成功。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-16T16:13:29.650

如果您反序列化（？）一个对象，那么您实际上是在创建该类的一个新实例，该实例具有与原始对象相同的属性。

它不是同一个对象。

同样，由于 Thread 本身不实现 Serializable，因此启动性实际上是任何 Serializable 子类中瞬态状态的一部分（就像中断性一样），因为序列化不会恢复从非可序列化超类继承的字段。假设有充分的理由这样做，任何类`extends Thread implements Serializable`都应该有自己的字段来跟踪开始和中断，并调用和`Thread.start()`恢复其状态的这些元素`Thread.interrupt()`。`readObject()``readResolve()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T18:38:52.797

在序列化过程中，对象实例变量被吸出，并转换为字节并写入文件（通常是具有 .ser 扩展名的文件），然后，在反序列化过程中，从文件中读取字节，然后转换为实例变量，并使用创建与被序列化的对象相同的新对象。它们的构造函数永远不会被调用，因此它在序列化时而不是在创建时达到状态。

您可以在序列化之前检查对象的哈希码，然后在反序列化之后，它们将永远不会相同，因为哈希码由 JVM 提供，具体取决于在堆上创建对象的位置，很明显这两个对象不能在堆在同一个地址......所以它们是不同的对象，但具有相同的状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-26T07:25:31.733

要使对象可序列化，相应的类应显式实现 Serializable 接口。然而，某些由 java 定义的系统类，如“Thread”、“OutputStream”、“Socket”是不可序列化的。为什么这样？让我们退后一步 - 现在使用 System1 内存序列化在 System1 JVM 中运行的线程然后在 System2 中反序列化它并尝试在 System2 JVM 中运行有什么用。说得对！因此这些类是不可序列化的。

来到你的节目。

```
ThreadSerialization ser1 = (ThreadSerialization) ois.readObject();// Thread started in System2.
ser1.start();// Thread once again started here in System2. 
```

拥有一个实现可序列化并扩展 Thread 或实现 Runnable 的类是非常糟糕的。总结 不要在密封或流和套接字过程中使用线程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-01T20:14:28.993

**无论此“线程”中的任何其他响应如何:)**

## 由于调用了 Native Methods，Thread 类不能被序列化！！！

时期！

编辑：

如果您在**单个进程**中工作，则可以声明一个全局变量。如果您创建**多个线程**，您可以创建一个包含活动线程列表的类。

*   此类包含哈希映射。
*   哈希映射包含作为字符串的键（id）和作为对线程的弱引用的值。
*   线程由 id 标识
*   您不必担心 GC 如果您的线程完成或自己完成，则类方法返回 null。

* * *

```
import java.lang.ref.WeakReference;
import java.util.HashMap;

public class ThreadsMap {

    private HashMap<String, WeakReference<Thread>> _threadHashMap;

    public ThreadsMap() {
        _threadHashMap = new HashMap<>();
    }

    public void add(String id, Thread thread) {
        WeakReference<Thread> threadWeakReference = new WeakReference<>(thread);
        _threadHashMap.put(id, threadWeakReference);
    }

    public Thread get(String id) {
        WeakReference<Thread> threadWeakReference = _threadHashMap.get(id);
        return threadWeakReference.get();
    }

} 
```

# php - 大网站如何做维护通知页面？

> ID：10622440
> 
> 赞同：16
> 
> 时间：2012-05-16T16:09:29.680
> 
> 标签：php, maintenance, maintenance-mode

我即将升级我的整个网站。我正在寻找有关科技初创公司如何进行维护过程的建议。

我正在考虑使用htaccess。但是，这只会将访问例如 index.php 的用户重定向到 maintenance.php 对吗？如果用户访问dashboard.php，则不会有重定向。

在维护期间，我确实需要访问 index.php（仅限我）。在科技初创公司工作的任何人都愿意分享他们的解决方案吗？非常欣赏它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T17:10:56.560

我们使用 LightTPD 作为 Web 服务器，我使用“mod_magnet”来做这些事情。Mod_magnet 允许我使用简单的 lua 脚本进行请求处理。我们有一个自动任务，它将在 Web 服务器的文件系统的某处创建一个空文件。lua 脚本将在每个请求上检查该文件是否存在，如果找到该文件，则返回一个静态维护页面。脚本的重要部分如下所示：

```
--
-- maintenance page
--
local config = {
    ['maintenance'] = {
        ['allow'] = {
            '127.0.0.1'    -- just an example IP address
        }
    }
}

if lighty.stat(lighty.env['physical.doc-root'] .. 'maintenance') then
    tmp, _ = table.search(config.maintenance.allow, lighty.env['request.remote-ip'])
    if not tmp then
        -- maintenance modus
        lighty.content = {
            { filename = lighty.env['physical.doc-root'] .. 'error/maintenance.html' }
        }

        return 503
    end
end 
```

在脚本中还有一个配置仍然允许特定的 IP 地址通过，因此您仍然可以从您的公司网络查看该网站，例如，当其他人只获得维护页面时。

该解决方案运行良好，并且由于自动化，如果您需要一个或多个网络服务器上的维护页面，这并不重要。

如果您有兴趣，可以在此处找到有关“mod_magnet”的更多信息：

[http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs:ModMagnet](http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs:ModMagnet)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:32:14.533

由于您提到 .htaccess，我假设您使用 Apache 作为您的 Web 服务器。正如其他人提到的，您可以使用 .htaccess 或者您可以编辑该特定站点的 VirtualHost conf。

无论哪种方式，我都建议按照 Jonathon Sampson 的建议使用 mod_rewrite，但是，您要非常小心以确保发送正确的状态代码，因为 GoogleBot 等重要的机器人希望看到 503 告诉他们您当前在维护中。

[在这篇 AskApache 文章](http://www.askapache.com/seo/503-service-temporarily-unavailable.html)中，有一些非常明确的说明可以完全按照您的要求进行操作。

# java - 远程调试如何工作？代码需要在本地机器上编译吗？

> ID：10622448
> 
> 赞同：6
> 
> 时间：2012-05-16T16:10:21.503
> 
> 标签：java, debugging, jvm, remote-debugging

我在远程服务器上部署了一个 Java Web 应用程序。我想从 Eclipse 的本地机器上进行远程调试。它们是相同的版本。代码是否需要由我的本地机器编译才能进行远程调试，还是不需要？我的理解是代码应该由我的本地工具编译。

以下是我认为远程调试的工作原理。如果我错了，请纠正我。

当我将调试器放在 Eclipse 的第 250 行的某个源文件上时，它会在类文件中查找相应的字节码并注意该点（比如说它是类文件中的第 200 行，因为它删除了所有注释和死代码） . 它还将在远程服务器上的类文件的第 200 行放置一种断点。当执行到第 200 行时，调试器将停止，但在 Eclipse 中，为方便开发人员，它将在源代码的第 250 行停止。（它必须进行内部计算以确定源代码中与字节码相对应的确切行。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-28T22:54:44.423

**Eclipse 调试**从所谓的**代理**开始。

运行编译好的`.class`源代码的 JVM 有一个特性，允许将外部库（用 Java 或 C++ 编写）注入到 JVM 中，就在运行时。这些外部库称为**代理**，它们能够修改`.class`已运行文件的内容。这些代理可以访问 JVM 的功能，而这些功能在 JVM 中运行的常规 Java 代码中是无法访问的，它们可以用来做一些有趣的事情，比如注入和修改正在运行的源代码、分析等。（像**JRebel**这样的工具使用这块功能来实现他们的魔力。）

要将 Agent Lib 传递给 JVM，您可以通过启动参数执行此操作，使用

```
 agentlib:libname[=options] format. 
```

我们实际上是在将一个名为**jdwp**的代理库传递给运行 Tomcat 的 JVM。**jdwp**是 JDWP（Java Debug Wire Protocol）的JVM*特定的可选实现，*用于定义调试器和正在运行的 JVM 之间的通信。它的实现（如果存在）作为 JVM 的本机库提供，`jdwp.so`或者`jdwp.dll`

**那么它有什么作用呢？**
简单来说，`jdwp`我们传递的代理基本上是充当运行应用程序的 JVM 实例和调试器（可以位于远程或本地）之间的链接的功能。由于它是一个代理库，它确实具有拦截运行代码的能力，在 JVM 和调试器之间建立桥梁，并具有应用在 JVM 上的调试器的功能。
由于在**JVM**架构中，调试功能不在 JVM 本身中找到，而是被抽象到外部工具（被恰当地称为调试器）中，这些工具可以驻留在运行正在调试的 JVM 的本地机器上，也可以运行来自外部机器。**正是这种解耦、模块化的架构允许我们在远程机器上运行 JVM 并使用 JDWP，让远程调试器能够与之通信**。

# android - 无法将我的视图保存到图像，但可以保存其他视图？

> ID：10622449
> 
> 赞同：0
> 
> 时间：2012-05-16T16:10:23.983
> 
> 标签：android, view, bitmap

这是我的代码的一部分，如果我在其他代码中的另一个活动中使用该代码，例如：

```
case R.id.buttonMinus: 
```

在哪里，而不是graphView，我使用标准视图（例如，代码可能如下所示：

```
public void onClick(View v) {
v.buildDrawingCache();
Bitmap bm=v.getDrawingCache(); 
```

（其余相同））它工作得很好，它只保存该特定按钮的背景。如果我在 graphView 中使用它，它总是以“Error1”结束（它在尝试压缩位图时捕获异常）。

（Graphview 是将图形绘制到画布中的视图）

我整天都被困在这个问题上，如果有人可以提供帮助，请提前致谢！（我没有忘记添加

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

到清单）

我的代码：

```
...

buttonClick.performClick();

}

public void onClick(View v) {

    String[] verlabels = new String[] {"0m", Float.toString(-max/2) + "m", Float.toString(-max) + "m"};
    String[] horlabels = new String[] {"0 min",Float.toString((int)x[pocetBodu]/2)+" min",Float.toString((int)x[pocetBodu])+" min"};
    GraphView graphView = new GraphView(this, y, "Dive Manager",horlabels, verlabels, GraphView.LINE,x,Pspotreba,pocetBodu,pocetUseku);
    setContentView(graphView);

    if(Save)
    {
        graphView.setDrawingCacheEnabled(true);         
        graphView.buildDrawingCache();
        Bitmap bm=graphView.getDrawingCache();

        OutputStream fOut = null;
        Uri outputFileUri;
        try {
                File root = new File(Environment.getExternalStorageDirectory()+ File.separator + "DivePlanner" + File.separator);
                root.mkdirs();
                File sdImageMainDirectory = new File(root, "Dive.png");
                outputFileUri = Uri.fromFile(sdImageMainDirectory);
                fOut = new FileOutputStream(sdImageMainDirectory);
           }
        catch (Exception e) {
                Toast.makeText(this, "Error", Toast.LENGTH_SHORT).show();
           }

        try {
                bm.compress(Bitmap.CompressFormat.PNG, 100, fOut);
                fOut.flush();
                fOut.close();
                Toast.makeText(this, "Ponor uložen", Toast.LENGTH_SHORT).show();
           } 
        catch (Exception e) {
            Toast.makeText(this, "Error1", Toast.LENGTH_SHORT).show();
           }
    } 
```

我正在画布上绘制图表。最终，我希望能够通过将该视图导出为 PNG 图像来保存该图形。我正在通过其他活动加载。如果我尝试通过上面的代码保存它，它总是会捕获异常并抛出错误 1。该文件永远不会创建和保存。当我在 onClick 视图中执行此操作（作为测试）时（例如 public void onClick(View v) v.buildDrawingCache(); ...）它起作用了，只保存了一个按钮图像，使用 graphView 它不起作用

# jsf-2 - Richfaces：a4j:commandLink 与 onclick 和 actionListener

> ID：10622453
> 
> 赞同：0
> 
> 时间：2012-05-16T16:10:33.790
> 
> 标签：jsf-2, richfaces

我正在使用 Richfaces 4.1.0.Final。[我有一个与这篇文章](https://stackoverflow.com/questions/10106223/jsf-using-onclick-actionlistener-together)类似的问题，但是补救措施（返回 true；）对我不起作用。它可能是我正在使用的 Richfaces 版本，但升级对我来说非常困难，我想首先验证这是问题所在，或者最好找到解决方法。

我在rich:tabPanel 中的rich:tab 中的rich:dataTable 中有一个a4j:commandLink 链接。我想单击链接，将列数据保存到支持 bean（例如通过 f:setPropertyActionListener），然后让用户切换到另一个选项卡进行编辑（使用：#{rich:component('TabPanel')} .switchToItem('EditTab');)

如果我对 javascript 片段使用 oncomplete，则处理程序会触发，但 switchToItem 片段不起作用。如果我改为对 javascript 片段使用 onclick，则处理程序不会触发，但 switchToItem 片段确实有效。我两个都需要。

有谁知道解决方案？这是这个版本的 Richfaces 中的一个已知问题吗？有谁知道我可以如何使用其他组件解决这个问题？

我提前道歉，但我不能发布我的代码。

谢谢，约翰

**更新：**

我升级到 Richfaces 4.2.2.Final，但没有任何改进。显然，如果您还使用 oncomplete 切换到另一个选项卡，则不可能将 a4j:commandLink 与 af:setPropertyActiopnListener 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:06:27.433

我使用 RichFaces 4.2.2.Final 进行了尝试，当我使用 onclick 时它对我有用：

```
<rich:dataTable value="#{model.simple}" var="item">
    <rich:column>
        <a4j:commandButton value="click me" onclick="#{rich:component('tabPanel')}.switchToItem('tab3');" action="#{bean.action}">
            <a4j:param assignTo="#{bean.parameter}" name="param" value="#{item}"/>
        </a4j:commandButton>
    </rich:column>
</rich:dataTable>

<rich:tabPanel id="tabPanel">
    <rich:tab name="tab1">tab 1 content</rich:tab>
    <rich:tab name="tab2">tab 2 content</rich:tab>
    <rich:tab name="tab3">tab 3 content</rich:tab>
</rich:tabPanel> 
```

问候，帕洛

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:52:29.517

好的，

我添加了第二个 f:setPropertyActionListener 将 TabPanel 的 activeItem 设置为 EditTab。然后我添加了 oncomplete="location.reload(true);" 刷新所有内容并使用正确的活动选项卡重绘。

它有效，但我仍然想听听更好的方法。

# html - 带有随机图像的页面的 HTML/DOM 将在 facebook 和 google+ 中正确发布

> ID：10622457
> 
> 赞同：1
> 
> 时间：2012-05-16T16:10:47.737
> 
> 标签：html, facebook, image, dom, random

我有一个网站，其中包含随机爆头的可爱自负。每次加载页面（或单击头像）时，它都会被新的头像替换。在我在 Facebook 上发布指向该网站的链接之前，它的效果很好。

然后发生的事情是当 Facebook 扫描页面以查找图像时，它没有找到随机图像，我认为是因为它不运行脚本。我希望 facebook 缩略图也有一个随机图像。

有没有办法在不求助于服务器端代码的情况下解决这个问题？

这是我现在要做的：

在头脚本部分

```
var lastTimeout = 0;
var lastHeadNum = 0;

function headURL(headCount)
{
    url = "/public/images/heads/mtoy";
    if( headCount < 10 )
        url += "0";
    url += headCount.toString();
    url += ".gif";
    return url;
}

function headshotImage()
{
    lastHeadNum = Math.floor((Math.random()*87)+1);
    document.write('<img id="headshot" src="' + headURL(lastHeadNum) + '" onclick="next_headshot();" width=150 height=150>\n');
    lastTimeout = setTimeout("next_headshot();", 12000);
}

function next_headshot()
{
    if (lastTimeout != 0)
        clearTimeout(lastTimeout);
    do {
        headNum = Math.floor((Math.random()*87)+1);
    } while (headNum == lastHeadNum);
    lastHeadNum = headNum;
    document.getElementById('headshot').src = headURL(headNum);;
    lastTimeout = setTimeout("next_headshot();", 12000);
} 
```

然后在body-html中

```
<div id="contents">
<script type="text/javascript">headshotImage();</script>
<H1 class="contenthead">Table of Contents</H1> 
```

在以前的化身中，body-html 看起来像：

```
<div id="contents">
<img id="headshot" src="" onclick="next_headshot();">
<H1 class="contenthead">Table of Contents</H1> 
```

然后我有一个 body.onload 处理程序来第一次调用 next_headshot，这与 Facebook 有同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:43:07.457

如果您真的希望 Facebook 拥有*随机*图像，那么我认为您需要服务器端代码。但是，如果您对固定图像感到满意，请查看 OpenGraph。您应该可以将其放在您的`<head>`部分中：

```
<meta property="og:image" content="/public/images/heads/mtoy01.gif"/> 
```

另一种方法是将`<img>`标记直接放入 HTML 中（而不是通过程序生成）并将其硬编码到一个图像中。它不会为您提供最初的随机图像，尽管您可能会在页面加载时立即将其换掉。

# javascript - 添加两个json对象

> ID：10622462
> 
> 赞同：0
> 
> 时间：2012-05-16T16:11:05.973
> 
> 标签：javascript, json, backbone.js

> **可能重复：**
> [添加两个 json 对象并排序](https://stackoverflow.com/questions/8869123/adding-two-json-objects-and-sorting)

我有两个 json 对象

```
[
{"name": "Graduation"},
{"name": "Post Graduation"}
] 
```

另一个也一样

```
[
{"name": "first sem"},
{"name": "second sem"},
{"name": "third sem"}
] 
```

如何将两个 json 对象合二为一，例如

```
[
{"name": "Graduation"},
{"name": "Post Graduation"},
{"name": "first sem"},
{"name": "second sem"},
{"name": "third sem"}
] 
```

我试过了

```
_this.model = new qualification();
_this.model1 = new sems();
 jsondata = _this.model.toJSON();
 jsonData = _.extend(_this.model1.toJSON(),jsonData) 
```

通过覆盖键获取json

```
even I tried
var result = _.union([jsonData1],[jsonData2]);
console.log(JSON.stringify(result)); 
```

并且使用 concat 也将输出打印为

```
[{"0":{"name":"first sem"},"1":{"name":"second sem"},"2":{"name":"third sem"}},{"0":{"name":"Graduation"},"1":{"name":"Post Graduation"}}], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:19:52.927

好吧，如果您在谈论对象，那么 _.extend 是完美的，但这些是数组。因此你应该在下面做

[_.union(*array);](http://documentcloud.github.com/underscore/#union)

### 代码

```
var A = [
    {
    "name": "Graduation"},
{
    "name": "Post Graduation"}
];

var B = [
    {
    "name": "first sem"},
{
    "name": "second sem"},
{
    "name": "third sem"}
];

console.log(_.union(A,B)​);​​​​ 
```

### 提琴手

[http://jsfiddle.net/7FkWs/](http://jsfiddle.net/7FkWs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:19:36.937

通过“JSON 对象”，我假设您只是指 JavaScript 对象，在这种情况下是数组。[`Array#concat()`您可以使用以下方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/concat)将它们附加在一起：

```
var a1 = [{"name":"Graduation"}, {"name":"Post Graduation"}];
var a2 = [{"name":"first sem"}, {"name":"second sem"}, {"name":"third sem"}];
var a3 = a1.concat(a2);
a3; // [{"name":"Graduation"}, {"name":"Post Graduation"}, {"name":"first sem"}, {"name":"second sem"}, {"name":"third sem"}]; 
```

请注意，如果这些对象确实是序列化的 JSON 字符串，那么您可以执行以下操作：

```
var a4 = JSON.parse(a1).concat(JSON.parse(a2));
a4; // [{"name":"Graduation"}, {"name":"Post Graduation"}, {"name":"first sem"}, {"name":"second sem"}, {"name":"third sem"}]; 
```

# bash - Cmake：如何推迟查找库？

> ID：10622470
> 
> 赞同：1
> 
> 时间：2012-05-16T16:11:28.313
> 
> 标签：bash, build, cmake

我有一个 Cmake 项目，我在其中使用来自另一个项目的静态库（它使用自己独特的构建系统）。

我设置了一个编译库的 bash 脚本。

当新用户签出两个项目时，就会出现问题。在其他项目中正确编译库之前，新用户无法执行 cmake，并且 cmake 命令 find_libarary 无法找到它们。

我使用命令 add_custom_target 将 bash 脚本作为 cmake 的一部分。但问题是它只有在你执行“make”时才会执行。

有没有办法让 CMake 在生成构建系统时执行命令。或者更好的方法是让它在实际制作之前忽略 find 命令？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T18:06:17.700

当然，[execute_process()](http://cmake.org/cmake/help/v2.8.8/cmake.html#command%3aexecute_process)函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:46:33.380

为什么不将 LINK_DIRECTORIES(xxx) 链接到库文件夹并且根本不使用 find_library。

# c# - 如何消除可以为空的布尔值的使用

> ID：10622471
> 
> 赞同：1
> 
> 时间：2012-05-16T16:11:28.953
> 
> 标签：c#, boolean, nullable

我想出了这段代码，我认为它相当聪明（要求是如果选择的日期是过去的，则 TextBoxes 应该是只读的，否则（今天的日期或未来的日期）它们应该是可编辑的）：

```
bool? setReadOnly = null;

if (SelectedDateIsInThePast() && (!currentlyReadOnly)) {
    setReadOnly = true;
} else if (!SelectedDateIsInThePast() && (currentlyReadOnly)) {
    setReadOnly = false;
}
if (setReadOnlyToTrue.HasValue) {
    foreach (Control ctrl in tableLayoutPanelPlatypus.Controls) {
        if (ctrl is TextBox) {
            tb = (TextBox)ctrl;
            tb.ReadOnly = setReadOnlyToTrue.Value;
        }
    }
} 
```

...但在我的伙伴中发现可空布尔值是“不受欢迎的数据类型”。

是否有一种简单的方法来做同样的事情（如果需要更改只读值，则仅循环通过控件？）。当然，我可以简单地设置它们，而不管它们是否需要这样设置：

```
if (SelectedDateIsInThePast()) {
    setReadOnly = true;
} else {
    setReadOnly = false;
}
foreach (Control ctrl in tableLayoutPanelPlatypus.Controls) {
    if (ctrl is TextBox) {
        tb = (TextBox)ctrl;
        tb.ReadOnly = setReadOnly;
    }
} 
```

...但我不喜欢执行模拟操作，如果可以合理地避免它们的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:17:16.553

将循环分解为一个方法，并且仅在您设置的情况下调用该方法`setReadOnly`：

```
if (SelectedDateIsInThePast() && (!currentlyReadOnly)) {
    SetReadOnly(true);
} else if (!SelectedDateIsInThePast() && (currentlyReadOnly)) {
    SetReadOnly(false);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:15:55.673

您可以使用`|=`、`&=`和两个不可为空的布尔值来实现相同的要求：

```
bool forceReadOnly = SelectedDateIsInThePast() && (!currentlyReadOnly);
bool clearReadOnly = !(!SelectedDateIsInThePast() && (currentlyReadOnly));

foreach (Control ctrl in tableLayoutPanelPlatypus.Controls) {
    if (ctrl is TextBox) {
        tb = (TextBox)ctrl;
        tb.ReadOnly |= forceReadOnly;
        tb.ReadOnly &= clearReadOnly;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T16:16:37.770

我认为可以为空的布尔值很好......但另一种方式是：

```
public enum ControlState
{
    Unknown = 0,
    DateInPast,
    DateInFuture
}

....

var state = ControlState.Unknown;

if (SelectedDateIsInThePast() && (!currentlyReadOnly)) {
    state = ControlState.DateInPast;
} else if (!SelectedDateIsInThePast() && (currentlyReadOnly)) {
    state = ControlState.DateInFuture;
}
if (state != ControlState.Unknown) {
    foreach (Control ctrl in tableLayoutPanelPlatypus.Controls) {
        if (ctrl is TextBox) {
            tb = (TextBox)ctrl;
            tb.ReadOnly = setReadOnlyToTrue.Value;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T16:17:23.677

使用具有三个独立的、有意义的状态的枚举？

```
enum ShouldSetState
{
    No, 
    SetReadOnly,
    SetReadable
} 
```

然后做

```
ShouldSetState setState = ShouldSetState.No;

if (SelectedDateIsInThePast() && (!currentlyReadOnly)) {
    setState = ShouldSetState.SetReadOnly;
} else if (!SelectedDateIsInThePast() && (currentlyReadOnly)) {
    setState = ShouldSetState.SetReadable;
}
if (setState != ShouldSetState.No) {
    foreach (Control ctrl in tableLayoutPanelPlatypus.Controls) {
        if (ctrl is TextBox) {
            tb = (TextBox)ctrl;
            tb.ReadOnly = setState == ShouldSetState.SetReadOnly;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T16:37:01.077

您的代码可以在不使用可为空的 bool 的情况下变得更简洁：

```
bool inThePast = SelectedDateIsInThePast();
if (currentlyReadOnly != inThePast )
{
    currentlyReadOnly = inThePast;
    foreach(var tb in tableLayoutPanelPlatypus.Controls.OfType<TextBox>())
        tb.ReadOnly = currentlyReadOnly;
} 
```

此外，如果您必须进行大量此类 UI 操作，您可能会考虑[数据绑定](http://msdn.microsoft.com/en-us/library/c8aebh9k.aspx)。

# python - 什么决定了哪些字符串在什么时候被保留？

> ID：10622472
> 
> 赞同：14
> 
> 时间：2012-05-16T16:11:30.280
> 
> 标签：python, string-interning

```
>>> s1 = "spam"
>>> s2 = "spam"
>>> s1 is s2
True
>>> q = 'asdalksdjfla;ksdjf;laksdjfals;kdfjasl;fjasdf'
>>> r = 'asdalksdjfla;ksdjf;laksdjfals;kdfjasl;fjasdf'
>>> q is r
False 
```

应该`s1 is s2`给出多少个字符`False`？极限在哪里？即我在问一个字符串在python开始制作它的单独副本之前需要多长时间。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T16:15:00.750

字符串实习是特定于实现的，不应依赖，如果要检查两个字符串是否相同，请使用相等测试。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-16T16:19:23.097

如果您想出于某种奇怪的原因强制比较为真，请使用 intern 函数：

```
>>> a = 实习生（'12345678012345678901234567890qazwsxedcrfvtgbyhnujmikolp'）
>>> b = 实习生（'12345678012345678901234567890qazwsxedcrfvtgbyhnujmikolp'）
>>> a 是 b
真的

```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-09T04:01:02.807

这是一条关于 CPython 2.5.0 源文件 (stringobject.h) 中的实习字符串的评论

```
/* ... ... This is generally restricted to strings that **"look like" Python identifiers**, although the intern() builtin can be used to force interning of any string ... ... */ 
```

因此，只包含下划线、数字或字母的字符串将被保留。在您的示例中，`q`并且 ``r 包含`;`，因此它们不会被拘留。

# android - 标签顶部的布局

> ID：10622473
> 
> 赞同：2
> 
> 时间：2012-05-16T16:11:31.233
> 
> 标签：android, android-tabhost, android-xml

我想我有一个简单的问题。

我正在使用标签，我的 xml 代码是：

```
<TabHost android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/tabHost"
xmlns:android="http://schemas.android.com/apk/res/android"
>
<TabWidget
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:id="@android:id/tabs"
/>
<FrameLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@android:id/tabcontent"
>
    <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/tab1"
    android:orientation="vertical"
    android:paddingTop="100px"
    >
    <TextView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:id="@+id/teste" />
    </LinearLayout>
    <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/tab2"
    android:orientation="vertical"
    android:paddingTop="60px"
    >
    </LinearLayout> 
    <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/tab3"
    android:orientation="vertical"
    android:paddingTop="60px"
    >
    </LinearLayout>
</FrameLayout>
</TabHost> 
```

问题是如果我删除顶部填充，当我打开一个选项卡时，选项卡的内容就在它上面。

这样做不会给我带来问题吗？内容怎么可能不在上面呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:23:19.183

尝试将`TabWidget`and`FrameLayout`放在一个垂直的`LinearLayout`. 这将`FrameLayout`迫使`TabWidget`.

# jquery - JavaScript - 视频标签

> ID：10622476
> 
> 赞同：0
> 
> 时间：2012-05-16T16:11:43.727
> 
> 标签：jquery, html, video

我在 html 中有一个视频标签-我将在 20 秒和 40 秒后使用 javascript 停止我的视频，然后显示一个灯箱。而当灯箱关闭时，视频是否应该再次播放。

我试过了

```
this.video.addEventListener("timeupdate", function(){
    if (this.video.currentTime >= 6) {
        this.showAnlageType();
    }
}); 
```

但它是假的，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T18:40:08.717

函数回调中的引用与用于绑定事件侦听`this`器的上下文不同。`this`存储引用`this`并使用存储的引用：

```
var self;
self = this;
this.video.addEventListener("timeupdate", function() {
    if (self.video.currentTime >= 6) {
        self.showAnlageType();
    }
}); 
```

# java - Hibernate 列空值默认值

> ID：10622485
> 
> 赞同：0
> 
> 时间：2012-05-16T16:12:51.887
> 
> 标签：java, hibernate, hibernate-mapping

对于 Hibernate 表的列定义，如果我不指定 not-null 或 @NotNull，可空性默认为什么？

例子：

```
<class name="Person" table="person">
    <id name="id" column="id" type="long"/>
    <property name="name" column="name" type="string"/>
</class> 
```

可以为`name`空吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:28:36.773

在你的情况下`name`是可以为空的。

默认行为对于原始类型（ 、 等）不可为`int`空`double`，否则为可空。

# javascript - 如何使用 FireBug 调试 JavaScript 代码

> ID：10622486
> 
> 赞同：-2
> 
> 时间：2012-05-16T16:12:53.713
> 
> 标签：javascript, jquery, firefox, firebug

我知道如何在 FireBug 中调试来自单独 JS 文件的 JavaScript 代码，但我不知道如何调试页面中的代码（剃刀视图）。这可能吗？如果可以，怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T16:14:17.460

和你通常做的一样。

页面内的 js 应该在脚本列表中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T16:15:01.137

双击要调试的行号（左侧）并重新运行您的页面。

# hibernate - 如何在 liferay 服务中获取文本类型而不是字符串类型

> ID：10622488
> 
> 赞同：2
> 
> 时间：2012-05-16T16:13:01.300
> 
> 标签：hibernate, liferay, liferay-6, database-migration

假设您的 service.xml 中有这种实体

```
<entity name="Answer" local-service="true" remote-service="true">
    <!-- PK fields -->
    <column name="answer_id" type="long" primary="true" />
    <!-- Other fields -->
    <column name="user_id" type="long" />
    <column name="answer" type="String" />
    <column name="date_answered" type="Date" />
</entity> 
```

我的理解是，查看类似[this](https://www.dnebinger.com/wiki/-/wiki/Portal+Development/Creating+the+Liferay+Service)和[this](http://www.liferay.com/web/jonas.yuan/blog/-/blogs/applying-convert-null-attribute-in-service-builder-to-persist-null-and-not-null-into-data-types-in-databases)的帖子，使用 Liferay 6 Service Builder，您只能指定 String 类型，但不能指定 Text。如果要使用 Text 类型，则必须手动修改生成的 SQL 脚本。看来您也可以像这样编辑 portlet-model-hints.xml 文件

```
<field name="answer" type="String">
    <hint name="max-length">5000</hint>
</field> 
```

在这种情况下，字段类型将在生成的 SQL 文件中设置为“TEXT”。

但是，如果您需要将“答案”字段从字符串更新为文本字段，并且表已经按照第一个模式生成，该怎么办？

谢谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:04:41.633

理想情况下，当您对 service.xml 进行一些更改时，它应该会自动更改数据库表。

1) 尝试取消部署 portlet 2) 清除 work 和 temp 文件夹 3) 重新启动服务器 4) 然后重新部署 portlet

注意：更新 portlet-model-hints.xml 是正确的方法，而不是更新 sql 文件。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T17:41:26.717

在这种情况下，从 tables.sql 中删除所有条目，并在更新字段后重建您的服务。

# jquery - 选择选项卡和 onselect 代码冲突 - 无限重新加载页面

> ID：10622495
> 
> 赞同：0
> 
> 时间：2012-05-16T16:13:31.387
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs, conflict, onselect

我使用 JQueryUI TABS 插件。

有我的标签结构。

```
<div id="tabs">
  <ul>
    <li><a href='#tabs-1'>TabGroup1</a></li>
    <li><a href='#tabs-2'>TabGroup2</a></li>            
  </ul>
  <div id='tabs-1'>
    <a href='tab1_link1.html'>TabGroup1-link1</a>
    <a href='tab1_link2.html'>TabGroup1-link2</a>
  </div>
  <div id='tabs-2'>
    <a href='tab2_link1.html'>TabGroup2-link1</a>
    <a href='tab2_link2.html'>TabGroup2-link2</a>
  </div>
</div> 
```

我使用这样的代码在选中选项卡时选择和加载选项卡中的第一个链接。它自己工作。

```
$(function() {
    $( "#tabs" ).tabs();

        // Activate first link on tab
    $( "#tabs" ).bind( "tabsselect", function(event, ui) {
     window.location.href = $(ui.panel).find('a:first').attr('href');
   });  
}); 
```

**但是在我的任务添加代码中，通过 URL 参数选择选项卡非常必要。因此，如果访问者从第二个选项卡组打开链接，则必须显示第二个选项卡已打开，而不是默认的第一个选项卡。***

我有工作代码，当加载来自此选项卡的链接时显示正确的选项卡（没有 AJAX 等，只是通常的链接）。`$URL['part']`是我从引擎中的 URL 收到的变量，这单独工作正常。

```
<?php if(@$URL['part']=='part2'){
    echo '<script>$(function() { $("#tabs").tabs("select","#tabs-2"); });</script>';    
} ?> 
```

***但是当我同时使用这两个代码块时，它会导致页面反复无限重新加载:-(***

**更新：**

请注意，这两个代码块都使用 SELECT 事件，这就是发生循环的原因。

**更新2：**

我想，如果在选择选项卡时使用 ONCLICK 加载链接，并且由于 URL 设置在激活选项卡上选择，它可以解决问题。但我不知道如何用代码编写它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:59:54.677

如果您在标签创建中移动处理，这是否有效：

```
$('#tabs').tabs({
    select: function(event, ui) {
        window.location.href = $(ui.panel).find('a:first').attr('href');
    }
}); 
```

在研究您的代码时，最好检查 URL，如果它是同一页面，则不要去任何地方，无论是通过链接还是通过选项卡选择：

```
$('#tabs').tabs({
    select: function(event, ui) {
        checkUrl(event, ui.panel);
    }
});
// handle link click on current tab
$('div>a').click(function(event) {
    checkUrl(event, event.target);
});

function checkUrl(event, ui) {
    var ehref = $(event.target).attr('href');
    var wl = window.location.href;
    var currentLocation = typeof ehref == "undefined" ? wl: ehref;
    var newLocation = $(ui.panel).find('a:first').attr('href');
    if (currentLocation != newLocation) {
        window.location.href = newLocation;
    }
}; 
```

参考您的评论，有一个创建处理程序，因此您将在其中进行绑定：

```
$('#tabs').tabs({
    create: function(event, ui) {
       $( "#tabs" ).bind( "tabsselect", function(event, ui) {
           window.location.href = $(ui.panel).find('a:first').attr('href');
       });
    }
}); 
```

但我不确定在创建序列上触发的事件，以及选项卡的选择是否发生在创建事件之前或之后（我会在之后考虑），因为我没有对此进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:43:49.600

* * *

更新：

**这个解决方案不正确！我出于历史原因保留它，评论在它下面。 [https://stackoverflow.com/a/10642137/1368570](https://stackoverflow.com/a/10642137/1368570) - 这是正确的解决方案：清晰简单**

* * *

我发现解决方案非常接近任务：

```
<script language="JavaScript" type="text/javascript">
function MySelect(event, ui){
    // selected - currently selected tab (string)
    var clicked_tab = '' + ui.index //clicked tab

    if(selected !== clicked_tab ){
        //So this code will works ONLY when another tab is selected, so no infinite loop        
        //alert(selected+'/'+ui.index);

            // Activate first link on tab
       $( "#tabs" ).bind( "tabsselect", function(event, ui) {
         window.location.href = $(ui.panel).find('a:first').attr('href');
       });
    }
}   

$(function() {
    $('#tabs').tabs({
        select: function(event, ui) {
            MySelect(event, ui);
        }
     });
});

        //retrieve the index of the currently selected tab
var tabs = $('#tabs').tabs();
var selected = '' + tabs.tabs('option', 'selected'); // from zero 0
</script> 
```

基于在我的引擎中处理的 URL 参数创建 propper TAB 的代码

```
<?php 
if(@$URL['part']=='part1'){
    echo '<script>$(function() { $("#tabs").tabs("select","#tabs-1"); });</script>';    
} 
if(@$URL['part']=='part2'){
    echo '<script>$(function() { $("#tabs").tabs("select","#tabs-2"); });</script>';    
} 
if(@$URL['part']=='part3'){
    echo '<script>$(function() { $("#tabs").tabs("select","#tabs-3"); });</script>';    
}
?> 
```

**问题：**

当我从 1-st 选项卡转到 2-d 或 3-d 时，window.location.href 不起作用，URL 不会改变。

如果我从除第一个选项卡之外的任何选项卡开始，一切都会完美运行。

我今天太累了，找不到解决这个问题的方法，如果有人有想法，会很高兴听到他们的意见！

此外，当我在代码中取消注释警报时，我看到选定的 var 是 [object Object]。因此，如果我将对象与非对象进行比较，为什么这个完整的解决方案在大多数情况下都能很好地工作？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:17:57.427

**这是我找到的完整的最终解决方案，它可以工作（跨浏览器）！**

创建选项卡

```
$(function() {
    $( "#tabs" ).tabs();
}); 
```

选择对于我们拥有的当前 URL 必须处于活动状态的选项卡

```
<?php 
if(@$URL['part']=='part1'){
    echo '$(function() { $("#tabs").tabs("select","#tabs-1"); });'; 
} 
if(@$URL['part']=='part2'){
    echo '$(function() { $("#tabs").tabs("select","#tabs-2"); });'; 
} 
?> 
```

下面的代码必须在我们启动选项卡并选择哪个现在处于活动状态之后，否则我们将收到无限的 url-reloading！

```
$(function() {
    $('#tabs').tabs({
        select: function(event, ui) {
            window.location.href = $(ui.panel).find('a:first').attr('href');
        }
    });
}); 
```

***因此，当我将基于 URL 的选项卡选择移到代码开头时，这解决了所有问题并使解决方案变得如此简单！***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-23T12:45:48.023

如果我没看错，那么您将在链接中的 HTML 中使用相同的代码，即

```
<div id="tabs">
    <ul>
        <li><a href='#tabs-1'>TabGroup1</a></li>
        <li><a href='#tabs-2'>TabGroup2</a></li>            
    </ul>
    <div id='tabs-1'>
        <a href='tab1_link1.html'>TabGroup1-link1</a>
        <a href='tab1_link2.html'>TabGroup1-link2</a>
    </div>
    <div id='tabs-2'>
        <a href='tab2_link1.html'>TabGroup2-link1</a>
        <a href='tab2_link2.html'>TabGroup2-link2</a>
    </div>
</div> 
```

您将`$( "#tabs" ).tabs()`在该页面上调用。如果是这样，为什么不在`$( "#tabs" ).tabs({ active: 1 })`链接应该重定向的页面中使用？

# android - 从 apk 中推送文件

> ID：10622497
> 
> 赞同：0
> 
> 时间：2012-05-16T16:13:37.710
> 
> 标签：android

我希望能够将我的 apk 中的文件复制到 sd 卡，我只是想知道这是否可能以及我将如何去做，因为我正在努力寻找和获取信息，并且 android 聊天室都被锁定了！提前致谢 ：）

编辑：我想将文件推送到内部存储（最好 /system/ 但如果需要，我可以使用终端命令将它从内部存储移动到那里）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:21:39.870

将您的文件放在`assets`项目的文件夹中，例如file.txt。

获取输入流以读取文件：

```
InputStream is = getAssets().open("file.txt"); 
```

复制内容：

```
FileOutputStream os = new FileOutputStream(new File(Environment.getExternalStorageDirectory(), "file.txt"))
byte[] buf = new byte[4096]
while (true) {
    int len = is.read(buf);
    if (len < 0) break;
    os.write(buf, 0, len);
}
os.close(); 
is.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T18:32:03.673

这是关于如何推入**内部**存储[http://developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

# c# - 将值传递给 Crystal 报表

> ID：10622498
> 
> 赞同：0
> 
> 时间：2012-05-16T16:13:39.767
> 
> 标签：c#, asp.net, .net, crystal-reports

我无法根据以下代码加载此报告：

```
 ReportDocument crystalReport = new ReportDocument();
        ParameterField paramField = new ParameterField();
        ParameterFields paramFields = new ParameterFields();
        ParameterDiscreteValue paramDiscreteValue = new ParameterDiscreteValue();

        paramField.Name = "Param";
        paramDiscreteValue.Value = TextBox1.Text.ToString();
        paramField.CurrentValues.Add(paramDiscreteValue);
        paramFields.Add(paramField);

        CrystalReportViewer1.ParameterFieldInfo = paramFields;
        crystalReport.Load(Server.MapPath("CrystalReport.rpt"));
        crystalReport.SetDatabaseLogon("username","password","servername","db");
        CrystalReportViewer1.ReportSource = crystalReport; 
```

它只是说“您要求的报告需要更多信息。” 我将报告所需的必要参数以及用户名、密码、服务器和数据库传递给它。任何建议都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:36:43.283

我自己也在做这件事，所以我分担你的痛苦。

我有：-

```
CrystalReportSource1.ReportDocument.SetParameterValue(fieldNo, fieldValue); 
```

从哪里来`fieldNo`的迭代：-

```
CrystalReportSource1.ReportDocument.DataDefinition.ParameterFields 
```

这似乎适用于我的报告。

顺便说一句，不同的版本对 fieldValue 的类型有不同程度的挑剔。

正如克雷格所说，您需要设置子报表参数，尽管您同样需要确保**不**设置链接参数的值。

您可以通过以下方式检测链接参数：-

```
bool linked = CrystalReportSource1.ReportDocument.DataDefinition.ParameterFields[fieldNo].IsLinked(); 
```

# java - java.lang.IllegalMonitorStateException：对象在等待（）之前未被线程锁定

> ID：10622500
> 
> 赞同：6
> 
> 时间：2012-05-16T16:13:43.710
> 
> 标签：java, android, synchronize, locks

但是我在“名册”对象上同步它得到新的任何地方。怎么来的 ？

违规代码：

```
 public Roster getRoster() {
    if (roster == null) {
        return null;
    }

    if (!roster.rosterInitialized) {
        try {
            synchronized (roster) {
                roster.reload();
                long waitTime = SmackConfiguration.getPacketReplyTimeout();
                long start = System.currentTimeMillis();
                while (!roster.rosterInitialized) {
                    if (waitTime <= 0) {
                        break;
                    }
                    roster.wait(waitTime);
                    long now = System.currentTimeMillis();
                    waitTime -= now - start;
                    start = now;
                }
            }
        }
        catch (InterruptedException ie) {
            // Ignore.
        }
    }
    return roster;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T16:52:08.167

用“gets new'ed”你的意思是你创建一个*新*的名册对象？

你确定你同步正确吗？同步发生在*实例*上，而不是*变量*上。所以如果你这样做

```
synchronized(roster) {
  roster = new Roster();
  // do something
} 
```

然后你只同步到*旧*的，而不是*新* `roster`的。

所以下面的代码应该会产生同样的错误：

```
Roster roster = new Roster();
Roster othervariable = roster;
synchronized(othervariable) {
  roster = new Roster(); // create a new roster
  othervariable.wait(1000); // OK, since synchronized with this instance!
  roster.wait(1000); // NOT OK, not synchronized with *new* roster!
} 
```

同步不会发生在*变量的名称上*，而是发生在*内容*上。如果覆盖内容，则不会重新同步到新值！

# jquery - 无法将图像上传到我的域

> ID：10622507
> 
> 赞同：0
> 
> 时间：2012-05-16T16:13:58.923
> 
> 标签：jquery, html, css

我正在使用自己的域来开发想法和基本网页。如您在此处看到的，我设计了一个在其背景上有图像的元素：

```
background:url(img/myImage.png); 
```

我制作了一个 jQuery 效果，将图像更改为另一个，所以我将我的背景属性设为：

```
var prev_value = $(this).css('background-image');
var patt=/\"|\'|\)/g;
prev_value = prev_value.split('/').pop().replace(patt,''); 
```

当你这样做时：

```
console.log(prev_value); 
```

它在 FireBug 控制台上写下我的图像的名称，而不写它的整个路线。

当我尝试使用 FileZila 将我的代码上传到我的私人域时，我的图像消失了。但问题是我什至在第一次加载时都看不到图像。好像它没有正确上传图像。

我的代码结构是：

```
(Folder)img
(Code)index.html
(Code)jquery_effects.js
(Code)style.css 
```

谁能帮我看看为什么当我将图像上传到我的域时我看不到它们？

非常感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:15:01.917

您的跨度是空的，因此它可能根本不会显示 - 它会自行调整大小以适应其内容。考虑用 div 替换它并设置宽度和高度。这应该会给你一个更可靠和直观的结果。

# c# - MasterPage 需要来自 System.Web.UI.Page 的抽象泛型类的属性

> ID：10622508
> 
> 赞同：0
> 
> 时间：2012-05-16T16:14:11.383
> 
> 标签：c#, asp.net, .net

我有两个派生自抽象泛型类的类，该类派生自 System.Web.UI.Page。我有一个 System.Web.UI.MasterPage，它可能是也可能不是我的两个派生页面类或 System.Web.UI.Page 的主页面。

问题是泛型类有一个我需要在我的 MasterPage 中访问的属性，但我不知道任何优雅的方式来获取它。

这是一个例子......

内容类型：

```
public abstract class Fruit
{
    public int ID { get; set; } //Just an identifier
}

public class Apple : Fruit {  }

public class Banana : Fruit {  } 
```

页数：

```
public abstract class FruitPage<T> : System.Web.UI.Page where T : Fruit
{
    public T MyFruit { get; set; } 
}

public class ApplePage : FruitPage<Apple> {  }

public class BananaPage : FruitPage<Banana> {  } 
```

掌握：

```
public partial class FoodMaster : System.Web.UI.MasterPage
{
    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        if (this.Page is FruitPage<Fruit>) //I know this is wrong
        {
            if ((this.Page as FruitPage<Fruit>).MyFruit.ID <= 0) //This too
            { 
                /*
                    I want to get here (this.Page being an ApplePage or BananaPage).  

                    Basically...  if ID<=0 then it is a new (unsaved) "fruit", 
                        and I need to change some MasterPage GUI accordingly. 
                */
            }
        }
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:33:15.857

[“计算机科学中的任何问题都可以通过另一个层次的间接来解决。”](http://en.wikipedia.org/wiki/Fundamental_theorem_of_software_engineering)

```
public class FruitPage : System.Web.UI.Page {
   public Fruit MyInnerFruit { get; protected set; }
}

public abstract class FruitPage<T> : FruitPage where T : Fruit
{
   public T MyFruit { 
     get { return (T)MyInnerFruit; } 
     set { MyInnerFruit = value; } 
   }
}

public partial class FoodMaster : System.Web.UI.MasterPage {
    protected override void OnLoad(EventArgs e) {
       base.OnLoad(e);

       var fruitPage = this.Page as FruitPage;
       if (fruitPage != null && fruitPage.MyInnerFruit.ID <= 0) {
          ...
       }
    }
} 
```

你也可以隐藏`MyInnerFruit`/ `MyFruit`- 但没有它更容易理解。

如果您使用的是 .NET 4，您还可以使用协变接口基本上允许从`FruitPage<Apple>`to进行转换`FruitPage<Fruit>`：

```
public interface IFruitPage<out T> where T : Fruit {
    public T MyFruit { get; }
}

public class FruitPage<T> : Page, IFruitPage<T> where T : Fruit {
    public T MyFruit { get; set; }
}

public class FoodMaster : MasterPage {
    protected override void OnLoad(EventArgs e) {
       base.OnLoad(e);

       var fruitPage = this.Page as IFruitPage<Fruit>;
       if (fruitPage != null && fruitPage.MyFruit.ID <= 0) {
          ...
       }
    }
} 
```

# c# - ContextMenuOpening 事件未在 WPF 中触发？

> ID：10622511
> 
> 赞同：14
> 
> 时间：2012-05-16T16:14:16.050
> 
> 标签：c#, wpf, mvvm

我有一个资源字典，里面有一个上下文菜单：

```
<ResourceDictionary x:Class="MyApp.Components.MyContextMenu"
                    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:MyApp"
                    xmlns:components="clr-namespace:MyApp.Components">
    <ContextMenu ContextMenuOpening="OnContextMenuOpening"> 
```

并且资源字典 XAML 后面有以下代码：

```
using System;
using System.Windows;
using System.Windows.Controls;

namespace MyApp.Components
{
    public partial class MyContextMenu : ResourceDictionary
    {
        public MyContextMenu()
        {
            InitializeComponent();
        }  

        void OnContextMenuOpening(object sender, ContextMenuEventArgs e)
        {
            Console.WriteLine("here i am!");
        }
    }
} 
```

日志没有出现。我想知道为什么事件没有触发或没有到达正确的位置 - 问题是因为我已将上下文菜单包装在此资源字典中吗？

**更新：**有趣的是，如果我删除代码隐藏函数，我会在编译过程中收到错误：

> 不包含“ContextMenu_OnContextMenuOpening”的定义，并且找不到接受“MyApp.Components.MyContextMenu”类型的第一个参数的扩展方法“ContextMenu_OnContextMenuOpening”（您是否缺少 using 指令或程序集引用？）

**更新 2：**看起来两者都`Console.WriteLine`产生`Debug.WriteLine`输出，但只是“随机”，尤其是当我在项目底部附近单击时。某种碰撞检测可能不起作用？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-17T10:11:01.380

ContextMenuOpening 事件必须在 ContextMenu 的祖先而不是 ContextMenu 本身上处理。如果您尝试在 ContextMenu 上处理它，则只有在您右键单击 ContextMenu 已打开时才会触发该事件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-16T17:19:39.950

这是框架中的一个错误：[http ://connect.microsoft.com/VisualStudio/feedback/details/353112/contextmenu-opening-event-doesnt-fire-properly](http://connect.microsoft.com/VisualStudio/feedback/details/353112/contextmenu-opening-event-doesnt-fire-properly)

> 第一次右键单击时不会触发上下文菜单的打开事件。仅当您在不移动鼠标的情况下连续两次右键单击时才会触发。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-21T13:28:54.123

我相信 kurrazyman 有正确的答案，但我花了一段时间才明白。就我而言，我有一个带有上下文菜单的 TreeView 控件。使用`myTreeView.ContextMenu.ContextMenuOpening`无效，但使用`myTreeView.ContextMenuOpening`确实有效。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-08-28T13:12:28.147

它不是错误，它正在工作......这是大多数人对 ContextMenuOpening 事件所做的最常见错误......考虑这两种不同的场景来找出这个问题的实际原因，

场景 1（这不起作用）：

```
<ListBox Name="lb_sizes" Height="120">
<ListBox.ContextMenu>
<ContextMenu ContextMenuOpening="My_ContextMenuOpening">
<MenuItem Header="Delete"/>
<MenuItem Header="Delete All"/>
</ContextMenu>
</ListBox.ContextMenu>
</ListBox> 
```

场景 2（这将起作用）：

```
<ListBox Name="lb_sizes" Height="120" ContextMenuOpening="My_ContextMenuOpening">
<ListBox.ContextMenu>
<ContextMenu>
<MenuItem Header="Delete"/>
<MenuItem Header="Delete All"/>
</ContextMenu>
</ListBox.ContextMenu>
</ListBox> 
```

唯一的区别是将 ContextMenuOpening 事件分配给适当的元素......在场景 1 中，它被分配（附加）给`<ContextMenu>`元素，而在场景 2 中，它被分配给`<ListBox>`元素，这是正确的方法并且应该可以工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T14:03:32.407

我正在使用**IsVisibleChanged**事件：

```
private void ContextMenu_IsVisibleChanged(object sender, DependencyPropertyChangedEventArgs e)
{
    var isVisible = (bool)e.NewValue;
    if (isVisible)
    {
        //...
    }
} 
```

# eclipse - 如何在 Eclipse 中使用外部差异查看器？是否有可用于 Eclipse 内置的差异查看器？

> ID：10622518
> 
> 赞同：10
> 
> 时间：2012-05-16T16:14:35.460
> 
> 标签：eclipse, eclipse-plugin

![在此处输入图像描述](../Images/6a33f27339dc531b0e42285502e6a04a.png)

我正在 eclipse 中处理一个 java 项目。每次提交文件时，我都想查看该文件中所做的所有更改。在 Eclipse 中，很难分析哪些行被删除、添加、更改等。请就此提出您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:38:09.913

你没有说你正在使用什么版本控制系统，但它们中的大多数（我知道的 cvs、svn、git 和 perforce）都实现了 Team > Synchronize 功能。Synchronize 透视图提供传出和传入更改的预览；您可以轻松查看需要提交的更改以及尚未收到的存储库中的更改。右键单击项目（或任何其他版本控制资源选择）并选择**Team** > **Synchronize**。它与您在 Netbeans 中展示的内容几乎相同。

您还可以使用“**比较”**菜单和/或版本控制系统在“**团队”**菜单下为单个文件提供的任何选项。

比较视图中的颜色可以根据您的喜好自定义，通过**首选项**>**常规**>**外观**>**颜色和字体**（在树中查找**文本比较）。**

对于 Mercurial，[MercurialEclipse 插件](http://www.javaforge.com/project/HGE)实现了这个 Synchronize 视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-07T12:56:51.027

我来到这里是因为我正在寻找一种在外部合并编辑器 (KDIFF3) 中合并但从 eclipse 开始合并的方法。我对上面提供的答案不满意。所以这里是如何在 Eclipse 中将 kdiff3 配置为 SVN 的合并和差异编辑器：

转到**Windows -> Preferences → Team -> SVN -> Diff Viewer** 添加新配置（添加按钮）：扩展名或 mimetype：* - 如果您希望可以为不同的编辑器指定不同的 mimetype，我不需要，因此阿尔昆特。

**差异：程序路径 C:\Program Files\KDiff3\ kdiff3.exe**（或任何你有合并编辑器的地方 - 对于 windows 路径，请随时在评论中添加 linux 版本或编辑此答案。）

论据： `${base} ${mine} ${theirs}`

**合并**：程序路径 C:\Program Files\KDiff3\kdiff3.exe

论据：

```
${base} ${mine} ${theirs} -o ${merged} 
```

这可能也适用于其他合并编辑器，但使用不同的参数语法（弄清楚让我们知道:)）。

用法与往常一样（团队->编辑冲突）用于合并和比较-> foo 用于差异视图。

干杯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T17:54:18.730

实际上 eclipse 有内置的比较工具。如果您需要与任何其他应用程序进行比较，请尝试使用此插件

[http://sourceforge.net/projects/externaldiff/](http://sourceforge.net/projects/externaldiff/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-25T11:20:58.537

此外，如果有人不必从 Eclipse 间接调用它（例如，我只是不喜欢在我的 Linux 上安装其他软件包，例如来自 Mohamed Jameel 答案的 externaldiff），您可以尝试从 SVN 调用外部差异查看器。

在 Linux 上，这篇文章对我很有帮助：[SVN：如何将工作副本与存储库修订进行比较？](https://stackoverflow.com/questions/4926896/svn-how-to-compare-working-copy-with-repository-revision).

# jquery - 删除打印按钮

> ID：10622519
> 
> 赞同：4
> 
> 时间：2012-05-16T16:14:35.557
> 
> 标签：jquery, highcharts

我正在使用 HighCharts 库创建图表，我想知道如何删除右上角的 2 个小按钮，您可以打印和下载图表，我想添加一个新按钮。

也许有人可以帮助我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T16:18:34.020

[根据文档](http://www.highcharts.com/ref/#exporting-buttons-printButton--enabled)，您可以根据需要禁用这些按钮。该文档甚至提供[了一个正在加载图表的示例](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/navigation/buttonoptions-enabled/)，其中禁用了按钮。

在您的配置中，请务必包含以下内容：

```
var chart = new Highcharts.Chart({
    /* Other items removed to focus on navigation */
    navigation: {
        buttonOptions: {
            enabled: false
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T18:58:44.820

如果您想删除所有按钮，最好的地方是：

```
exporting: {
    enabled: false
} 
```

如果禁用仅导航按钮被禁用，则继续加载导出模块。
要仅禁用一个按钮，您必须使用以下命令：

```
exporting: {
    buttons: {
        exportButton: {
            enabled: false
        }
    }
} 
```

下面的代码禁用导出按钮。

我不知道如何在不添加新的 svg 元素的情况下添加按钮，但如果您不使用导出按钮，为什么不更改图表按钮的样式和功能？你可以按照**[参考](http://www.highcharts.com/stock/ref/#exporting-buttons-printButton)**来做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T21:54:13.033

如上所述，您可以通过以下方式禁用，

```
exporting: {
    buttons: {
        exportButton: {
            enabled: false
        }
    }
} 
```

要添加新按钮，请使用此按钮，

[在 highcharts 中添加一个新的图像按钮](https://stackoverflow.com/questions/9218490/highcharts-add-a-custom-image-button)

# java - 添加jsp文件到ear

> ID：10622520
> 
> 赞同：0
> 
> 时间：2012-05-16T16:14:35.953
> 
> 标签：java, jsp, jakarta-ee, ear

我想将 .jsp 文件添加到部署在客户端站点的耳朵。这样做的过程是什么？请记住，我对 Java 世界很陌生。这将是一个简单的 keepalive 页面，无需与其他页面交互。理想的做法是不必重新创建/重新部署整个耳朵，因为将其返回到受保护的客户端站点会带来压力。我们宁愿给客户指示，将我们发送给他们的页面添加到他们的耳朵里。然后他们可以重新部署它。

谢谢。如果我错过任何信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:16:06.567

JSP 必须位于 WAR 中，而 WAR 又位于 EAR 中。如果您在 EAR 中已经有一个 WAR，则将其放入其中，或者添加另一个仅包含 JSP 的 WAR。它不能直接位于 EAR 本身中。

如果您需要快速重新部署，那么 EAR 确实不是最好的方法......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:31:44.383

JSP 页面是由应用程序服务器编译为 Java 对象的源文件。虽然通过 EAR 或 WAR 部署是传统方式，但某些服务器（如 Tomcat）也可以从扩展的 EAR 或 WAR 文件进行部署。这是因为 EAR 和 WAR 文件实际上只是 ZIP 文件，其中包含特定的文件夹结构和信息文件。

您总是可以尝试将 JSP 页面发送给他们，然后让他们将其复制并粘贴到部署文件夹中，覆盖旧文件。您的应用程序容器*应该*识别出源比已编译的 JSP 页面更新，并在您刷新该页面时即时为您重新编译它。

这在 Tomcat 中运行良好——我们通常在开发过程中将 JSP 文件粘贴到已部署的应用程序文件夹中以测试小的更改。

# google-apps-script - 我可以在 Google Apps 电子表格的消息框中添加超链接吗

> ID：10622521
> 
> 赞同：3
> 
> 时间：2012-05-16T16:14:37.570
> 
> 标签：google-apps-script

有没有办法在 Google Apps 电子表格的消息框中添加超链接？

我有这段代码显示一个 msgbox。

```
// The code below will display a message box
Browser.msgBox("Go to this site for help");
} 
```

有没有办法在该消息框中插入超链接？就像是：

```
// The code below will display a message box
Browser.msgBox("Go to this site for help" & <a href="www.google.com">Help</a>);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-10-24T18:37:23.750

自 2014 年 12 月 11 日起，Google 的 UI 服务已弃用。请参阅[此处](https://developers.google.com/apps-script/reference/ui/ui-app)。

您现在应该使用[HTML 服务](https://developers.google.com/apps-script/guides/html/)。显示带有链接的消息的代码如下。

```
var htmlOutput = HtmlService
    .createHtmlOutput('Go to <a href="https://www.google.ca/">this site</a> for help!')
    .setWidth(250) //optional
    .setHeight(50); //optional
SpreadsheetApp.getUi().showModalDialog(htmlOutput, 'Help Dialog Title'); 
```

谷歌表格似乎不会为打开公共电子表格的任何人运行脚本（显然是为了安全）。如果您想查看对话框的实时版本，只需将上述代码复制到`function onOpen() {}`脚本编辑器中，保存并刷新电子表格。否则，它看起来像下图。

[![帮助对话框示例](../Images/89fb01663e2f984c5aa104dd5ddaecb8.png)](https://i.stack.imgur.com/Z6TNJ.png)

如果您有比简单链接更多的 HTML，您还可以从 HTML 文件创建一个对话框。在脚本编辑器中，选择**File** > **New** > **Html 文件**并将其命名为“index”（或任何您想要的并在代码中更改文件名）。

```
var html = HtmlService.createHtmlOutputFromFile('index');
SpreadsheetApp.getUi() // Or DocumentApp or FormApp.
    .showModalDialog(html, 'Dialog title'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T11:58:42.187

这是一个显示 url 链接的弹出窗口示例

```
function showurl() {
  var app = UiApp.createApplication().setHeight('60').setWidth('150');
  app.setTitle("Anchor in a popup ;-)");
  var panel = app.createPopupPanel()
  var link = app.createAnchor('This is your link', 'https://sites.google.com/site/appsscriptexperiments/home');
  panel.add(link);
  app.add(panel);
  var doc = SpreadsheetApp.getActive();
  doc.show(app);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T16:18:21.023

对不起。消息框不接受超链接或标签。仅限纯文本。

# javascript - 使用 AJAX 确定重定向目标

> ID：10622525
> 
> 赞同：2
> 
> 时间：2012-05-16T16:14:45.243
> 
> 标签：javascript, ajax, redirect

是否有一种 AJAX-y 方法来找出重定向的给定 URL 的目的地？

用例：使用输入一个简短的 url，这个 javascript（不离开页面）通知用户目标 URL。

谢谢。

# javascript - 如果阻塞，jQuery 不会让我做？

> ID：10622530
> 
> 赞同：0
> 
> 时间：2012-05-16T16:15:00.613
> 
> 标签：javascript, jquery

我正在尝试做一个淡入淡出效果，淡出一个 div 并将其替换为另一个。为此，我创建了一个 lastDiv var，它设置最后一次单击的 div 的数量。

但是当我尝试设置一个 if js 说有一个错误。我很确定我使用的是正确的语法。（我是初学者）

谢谢

```
var lastDiv = 1;

$("#item1").click(function () {
    if(lastDiv == 2) {  $("#div2").fadeOut(0500, function() { $("#div1").fadeIn(500, function () {lastDiv = 1;});   });  }); }
    else if (lastDiv == 3) {  $("#div3").fadeOut(0500, function() { $("#div1").fadeIn(500, function () {lastDiv = 1;}); });  }); }

$("#item2").click(function () {
    if(lastDiv == 1){   $("#div1").fadeOut(0500, function() { $("#div2").fadeIn(0500, function () {lastDiv = 2;}) });  }); }
    else if(lastDiv == 3){  $("#div3").fadeOut(0500, function() { $("#div2").fadeIn(0500, function () {lastDiv = 2;}) });  }); }

$("#item3").click(function () {
    if(lastDiv == 1) { $("#div1").fadeOut(0500, function() { $("#div3").fadeIn(0500, function () { lastDiv = 3 })  }); }
    else if(lastDiv == 2) { $("#div2").fadeOut(0500, function() { $("#div3").fadeIn(0500, function () { lastDiv = 3 })  }); } }); 

</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T16:19:03.527

你的大括号都搞砸了：
我把你的代码通过[美化](http://jsbeautifier.org/)器：

```
var lastDiv = 1;

$("#item1").click(function () {
    if (lastDiv == 2) {
        $("#div2").fadeOut(0500, function () {
            $("#div1").fadeIn(500, function () {
                lastDiv = 1;
            });
        });
    });
} else if (lastDiv == 3) {
    $("#div3").fadeOut(0500, function () {
        $("#div1").fadeIn(500, function () {
            lastDiv = 1;
        });
    });
});
}

$("#item2").click(function () {
    if (lastDiv == 1) {
        $("#div1").fadeOut(0500, function () {
            $("#div2").fadeIn(0500, function () {
                lastDiv = 2;
            })
        });
    });
} else if (lastDiv == 3) {
    $("#div3").fadeOut(0500, function () {
        $("#div2").fadeIn(0500, function () {
            lastDiv = 2;
        })
    });
});
}

$("#item3").click(function () {
    if (lastDiv == 1) {
        $("#div1").fadeOut(0500, function () {
            $("#div3").fadeIn(0500, function () {
                lastDiv = 3
            })
        });
    } else if (lastDiv == 2) {
        $("#div2").fadeOut(0500, function () {
            $("#div3").fadeIn(0500, function () {
                lastDiv = 3
            })
        });
    }
}); 
```

您应该在浏览器中有**错误**！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:21:01.823

这就是您的代码的样子，带有适当的缩进和新行：

```
$("#item1").click(function () {
    if(lastDiv == 2) {
        $("#div2").fadeOut(0500, function() {
            $("#div1").fadeIn(500, function () {
                lastDiv = 1;
            });
        });
    });
} else if (lastDiv == 3) {
    $("#div3").fadeOut(0500, function() {
        $("#div1").fadeIn(500, function () {
            lastDiv = 1;
        });
    });
});
} 
```

看到问题了吗？该部分位于, 而不是`else if`的结束标记之后。这是一个语法错误，javascript 没有告诉你。尝试安装 FireBug、Firefox 的插件或类似的插件，这样您就可以看到此类错误。`function() {``if`

请不要将这段代码写在一行上。我不知道你怎么读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T16:21:14.417

`if`您的语句、括号关闭和奇怪的分号有很多语法错误。我已经为您修复了它们并缩进了所有内容以使其更易于阅读。我还删除了前导零。我只完成了你的第一个`click`活动，但希望它会有所帮助！:)

```
$("#item1").click(function ()
{
    if (lastDiv == 2)
    {
        $("#div2").fadeOut(500, function()
        {
            $("#div1").fadeIn(500, function()
            {
                lastDiv = 1;
            });
        }); 
    }
    else if (lastDiv == 3)
    {
        $("#div3").fadeOut(500, function()
        {
            $("#div1").fadeIn(500, function()
            {
                lastDiv = 1;
            });
        });
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T16:25:57.013

看起来你放错了 }); 在那里，还有其他几个语法问题。分隔代码和缩进将帮助您更好地查看这些类型的问题：

```
var lastDiv = 1;

$("#item1").click(function (){
    if(lastDiv == 2){
        $("#div2").fadeOut(0500, function(){
            $("#div1").fadeIn(500, function(){
                lastDiv = 1;
            });
        });
    }else if(lastDiv == 3){
        $("#div3").fadeOut(0500, function(){
            $("#div1").fadeIn(500, function(){
                lastDiv = 1;
            });
        });
    }
});

$("#item2").click(function (){
    if(lastDiv == 1){
        $("#div1").fadeOut(0500, function(){
            $("#div2").fadeIn(500, function(){
                lastDiv = 2;
            });
        });
    }else if(lastDiv == 3){
        $("#div3").fadeOut(0500, function(){
            $("#div2").fadeIn(500, function(){
                lastDiv = 2;
            });
        });
    }
});

$("#item3").click(function (){
    if(lastDiv == 1){
        $("#div1").fadeOut(0500, function(){
            $("#div3").fadeIn(500, function(){
                lastDiv = 3;
            });
        });
    }else if(lastDiv == 2){
        $("#div2").fadeOut(0500, function(){
            $("#div3").fadeIn(500, function(){
                lastDiv = 3;
            });
        });
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T16:35:05.930

让我们假设 div 具有`class="content"`和可点击元素具有`class="item"`和属性`data-i = n`，其中`n`是 1、2、3。

您可以通过无条件地淡出所有内容 div 来显着简化代码，尽管大概只有一个会真正淡出（其他将保持隐藏），然后找到正确的内容 div 淡入。

```
$(".item").click(function () {
    var index = $(this).data('i');//or similar - there are other possibilities here.
    $(".content").fadeOut(500, function() {
        $("#div"+index).fadeIn(500);//fade in the content div corresponding to the clicked item
    });
}); 
```

这不仅可以修复您的错误，还可以更好地利用 jQuery 的强大功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T16:56:44.437

我相信这就是你想要做的：

```
var selected = null;
var selectors = ["#div1","#div2","#div3"]; // use any valid jquery selectors

var selectme = function(){  
    if (selected==this)
        return;

    selected = this;

    $.each(selectors,function(key,selector){
        $(selector).fadeTo(300,0.2);
    });

    $(selected).fadeTo(300,1);
};

$(document).ready(function(){
    $.each(selectors,function(key,selector){
        $(selector).click(selectme);
    });

    $(selectors[0]).click();
}); 
```

# javascript - ExtJs 3.4 中是否存在验证框架？

> ID：10622535
> 
> 赞同：0
> 
> 时间：2012-05-16T16:15:19.417
> 
> 标签：javascript, validation, extjs4, extjs3, extjs-mvc

我正在使用 extjs 3.4 进行开发，我想知道是否存在可用于验证模型的插件或库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T11:10:41.810

我同意上述**没有用于模态验证的内置框架**

尝试编写自定义验证 [ExtJS 模型验证：日期（如何）](https://stackoverflow.com/questions/6376506/extjs-model-validations-dates-how-to)

并检查这个 [http://www.sencha.com/forum/showthread.php?125545-EXTJS-4.0-Model-and-remote-validation](http://www.sencha.com/forum/showthread.php?125545-EXTJS-4.0-Model-and-remote-validation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:47:06.257

不，没有用于验证的内置框架。在 ExtJs 4.0 中有一些部分 - 比如模型中的验证，表单中的验证，但它们不相关且不连贯。

如果您需要比这更完整的东西 - 您需要编写它。

# ocaml - 将 SML 转换为 OCaml（语法问题）

> ID：10622538
> 
> 赞同：0
> 
> 时间：2012-05-16T16:15:40.590
> 
> 标签：ocaml, sml

我是 ocaml 绝对的初学者，我正在为课程编写一些代码，但我遇到了这样一行的问题：

```
datatype logicexpr = Var of string
                 | Neg of logicexpr
                 | And of logicexpr * logicexpr
                 | Or of logicexpr * logicexpr;
let rec distributeLeft(X, And(e,f)) = And(distributeLeft(X, e),distributeLeft(Y, f)) 
| Or(X, Y);; 
```

为什么我在这里收到语法错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T18:06:26.653

函数`distributeLeft`定义为：

```
fun distributeLeft(X, And(e,f)) = And(distributeLeft(X,e),distributeLeft(X,f))
| distributeLeft(X, Y) = Or(X, Y); 
```

可以在 OCaml 中翻译为：

```
let rec distibuteLeft = function
  | (X, And(e,f)) -> And(distributeLeft(X,e),distributeLeft(X,f))
  | (X, Y)        -> Or(X, Y) 
```

等等 ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T16:43:47.953

没有办法真正说出您想要实现的目标，因为您的代码中与 OCaml 语法的相似之处只是微不足道的。我想你从某个地方得到了你正在呈现的代码，所以也许它有助于找出原始语言是什么，因为它显然不是 OCaml。

尽管我不知道您到底想做什么，但我仍然可以尝试提供一些一般性提示。

第一：不要在 OCaml 中的参数周围使用括号。它们不是必需的，也不习惯使用。

```
let rec fac n = if n < 0 then 1 else n * (fac (n-1)) 
```

是阶乘函数的一个非常常见的定义。如您所见，使用的参数 n 没有任何括号。

第二：您似乎正在尝试进行一些模式匹配。虽然我不知道你使用的是什么语言，但看起来是这样的，因为代码风格类似于 haskell 中的模式匹配。

OCaml 中的模式匹配需要使用该`match ... with`子句显式完成。这是使用您定义的数据的示例：

```
type logicexpr = Var of string
               | Neg of logicexpr
               | And of logicexpr * logicexpr
               | Or of logicexpr * logicexpr

let rec distributeLeft x y = 
  match y with
    And(e,f) -> And(distributeLeft(X,e),distributeLeft(X,f))
  | Or(e,f)  -> Or(distributeLeft(X,e),distributeLeft(Y,f))
(* ... *) 
```

这只是正确语法的示例，所以不要使用它。您需要真正了解从某个地方获取的程序才能将其翻译成另一种语言。还要非常小心，如果你以 Haskell 程序为例，很多算法都会失败，因为它们通常需要特殊的语言特性，而这些特性不容易翻译。

所以首先弄清楚这个程序是如何工作的，然后了解语法，然后尝试翻译。如果您在执行此操作时卡在某个地方，请回来，也许有人能够更好地帮助您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T16:29:53.330

在如此少的背景下很难提供帮助（正如pad指出的那样）。但是，符号“|” 不是 OCaml 中的运算符。它是模式语法的一部分。由于我们不知道您要做什么，因此很难说更多。 *也许*您想使用“||” 这是一个布尔运算符。或者，也许你正试图用不可能的模式做一些事情。

# asp.net-mvc - MVCContrib 网格分页定制

> ID：10622539
> 
> 赞同：1
> 
> 时间：2012-05-16T16:15:44.477
> 
> 标签：asp.net-mvc, grid, paging, customization, mvccontrib

是否可以从 MVCContrib 项目自定义寻呼机？现在我使用这个代码（用德语翻页）：

```
@Html.Pager((MvcContrib.Pagination.IPagination)Model.deals)
.First("Erste")
.Last("Letzte")
.Next("Naechste")
.Previous("Vorherige") 
```

结果显示是这样的：

```
Showing 1 - 2 of 5 Erste | Vorherige | Naechste | Letzte 
```

是否可以用德语显示文本“显示”...“的”？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:22:33.340

这很容易：

只需添加以下内容：

```
.Format( "Anzeige {0}-{1} von {2} | " ) 
```

# css - IE9中的表单输入框和标签对齐方式

> ID：10622544
> 
> 赞同：1
> 
> 时间：2012-05-16T16:16:19.263
> 
> 标签：css, spring, jsp-tags, forms

我正在重新设计用户信息表单的外观和布局。最初它是使用表格完成的，但我真的不想使用表格进行布局。我的代码在这里[http://jsfiddle.net/Chris22/eNqrM/](http://jsfiddle.net/Chris22/eNqrM/) 我已经在所有浏览器、Opera 11.x、FF 12.x、Chrome 18.x、Safari 5.1.x 中测试了我的代码，并且表单看起来很棒. 我的问题是IE9。

请看一下 IE9 中的代码，看看是否有人能弄清楚我的错误编码是什么，为什么表单元素没有对齐并且有些有不同的文本处理。我似乎无法弄清楚。

如果有人想比较，这是原始表格布局。 [http://jsfiddle.net/Chris22/q3sCb/3/](http://jsfiddle.net/Chris22/q3sCb/3/) 两组代码都有 java spring 表单标签，所以我也有点难以理解，因为我是 FED（前端开发人员）。也许我在这里混淆了一些东西。我不知道。

谢谢！！

PS如果修改原始表格布局是更好的方法，我会很感激一些关于如何开始编码的帮助......我有一段时间没有使用表格进行布局了。

IE9：

![在此处输入图像描述](../Images/a66ad97999613d7f369ea11a05d54232.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:09:33.613

我解决了这个问题。可能不是最好的方法，但我将`input`元素包装在标签中，并在其中的标签中`label`添加了一条规则。感谢大家的反馈`float:right``input`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:20:24.917

对于具有值属性的输入的相对简单的表单，我遇到了同样的问题。不确定这是否真的是一个答案，但知道您并不是唯一一个看到错位的人可能会有所帮助。我对为什么有些人没有看到错位感到有些困惑。float:right 提供修复的事实对我很有用，并且可能与长期以来一直是 IE 的“功能”的神秘 hasLayout 属性有关。向左或向右浮动会导致“hasLayout”，但可能会产生其他后果。没有“有布局”的一个常见解决方法是在 CSS 中给所有内容缩放：1 - 这会导致“有布局”并且通常没有任何视觉变化，因为以 1 倍缩放不会调整任何东西的大小。

# ruby-on-rails - 如何在设计 Flash 消息中呈现 HTML 和 Rails 助手？

> ID：10622547
> 
> 赞同：2
> 
> 时间：2012-05-16T16:16:39.173
> 
> 标签：ruby-on-rails

我正在尝试从设计控制器呈现自定义闪存消息。

它在视图中呈现如下：

```
<strong>Your profile is incomplete.</strong> Why not #{ActionController::Base.helpers.link_to 'add some more information', edit_user_registration_path}. 
```

如何在此 Flash 中呈现 HTML 和 Rails 助手？

我在控制器中调用闪光灯

```
set_flash_message :warning, :profile_incomplete 
```

在`:profile_incomplete`config/locales/devise.en.yml 中定义。

我尝试将字符串直接放入控制器中。这会正确呈现帮助程序，但会显示未找到设计翻译错误。

我尝试`.html_safe`在 devise.en.yml 中附加，这会导致 yaml 错误。我试过附加`:profile_incomplete`which cause `undefined method 'html_safe' for :profile_incomplete:Symbol`。而且我尝试附加到纯字符串，这似乎没有做任何事情。

我错过了什么？感谢您的任何建议。

编辑

session_controller.rb

```
def after_sign_in_path_for(resource)

  if current_user.completeness < 100
    set_flash_message :alert, :profile_incomplete, :link => ActionController::Base.helpers.link_to('add some more information', edit_user_registration_path)
  end

end 
```

设计.en.yml

```
en:
  devise:
    sessions:
      profile_incomplete:"<strong>Your profile is incomplete.</strong> Why not #{link}." 
```

应用程序.html.erb

```
<% flash.each do |key, msg| %>
    <div class="alert alert-<%= key %>">
        <a class="close" data-dismiss="alert">x</a>
        <%= msg.html_safe %>
    </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:09:52.983

这是 set_flash_message 的来源：[https ://github.com/rymai/devise_invitable/blob/master/lib/devise_invitable/controllers/internal_helpers.rb#L5](https://github.com/rymai/devise_invitable/blob/master/lib/devise_invitable/controllers/internal_helpers.rb#L5)

您不能在 i18n 文件中添加方法 .. 只是命名插值。我对您的问题的解决方案是：

```
set_flash_message :warning, :profile_incomplete, :link => link_to('add some more information', edit_user_registration_path) 
```

在 devise.en.yml

```
...
profile_incomplete: "<strong>Your profile is incomplete.</strong> Why not %{link}" 
```

同样在显示 flash 消息时（可能在 application.html.erb/haml 中）在每条 flash 消息的末尾添加一个 html_safe

# javascript - 为什么我的 window.navigate 代码会失败？

> ID：10622552
> 
> 赞同：2
> 
> 时间：2012-05-16T16:16:59.917
> 
> 标签：javascript, html

我有一个`<section id="thisitem"...>`

当我尝试做`window.navigate("#thisitem");`JS 失败时……为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:21:31.380

因为`window.navigate()`是特定于 IE 的，而不是跨浏览器兼容的。使用`window.location.href = '#thisitem'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:19:20.180

`navigate`DOM中没有方法`window`。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-16T16:21:09.363

我想你的意思是：`window.location='#thisitem';`

# c# - 使用 System.Net.Mail 附加文件时出现奇怪的错误

> ID：10622553
> 
> 赞同：0
> 
> 时间：2012-05-16T16:16:59.977
> 
> 标签：c#, email, email-attachments, system.net.mail

我有一个应用程序偶尔会发送一封带有三个附件的电子邮件。

一个附件是用户最初发送到我邮箱的文件，所以我回复的是他们发送给我的同一个文件。我通过 MemoryStream 做到这一点，它工作得很好。

其他两个文件是 .PDF 和 .XLSX 文件。

```
 var excelTemplatePath = GetFilePathToDefaultExcelFile();

    if (excelTemplatePath != null)
        mailMessage.Attachments.Add(new System.Net.Mail.Attachment(excelTemplatePath));

    var pdfPath = GetFilePathToPDFInstructions();

    if (pdfPath != null)
        mailMessage.Attachments.Add(new System.Net.Mail.Attachment(pdfPath)); 
```

这是奇怪的部分。当我在 Visual Studio 中调试应用程序时，它们连接得很好。每次都很完美。

当我运行编译的 .exe 时，无论是从 /BIN/ 还是我选择部署它的任何位置，它都会破坏电子邮件。它不附加任何文件，只是发送一些看起来像是将文件序列化到电子邮件文本正文中的内容：

```
cHMvYXBwLnhtbFBLAQItABQABgAIAAAAIQAkRr56YQEAAG0DAAAYAAAAAAAAAAAA
AAAAAKblAABjdXN0b21YbWwvaXRlbVByb3BzMy54bWxQSwECLQAUAAYACAAAACEA
te/KYaMAAADVAAAAEwAAAAAAAAAAAAAAAABl5wAAY3VzdG9tWG1sL2l0ZW0xLnht
bFBLAQItABQABgAIAAAAIQB/jqJ4TAEAAOYCAAAYAAAAAAAAAAAAAAAAAGHoAABj
dXN0b21YbWwvaXRlbVByb3BzMS54bWxQSwECLQAUAAYACAAAACEAvYRiI5AAAADb
AAAAEwAAAAAAAAAAAAAAAAAL6gAAY3VzdG9tWG1sL2l0ZW0yLnhtbFBLAQItABQA
BgAIAAAAIQCQ9oX78gAAAE8BAAAYAAAAAAAAAAAAAAAAAPTqAABjdXN0b21YbWwv
aXRlbVByb3BzMi54bWxQSwECLQAUAAYACAAAACEAZaNvWToEAACtDQAAEwAAAAAA
AAAAAAAAAABE7AAAY3VzdG9tWG1sL2l0ZW0zLnhtbFBLAQItABQABgAIAAAAIQDc
SoJLbAEAAJ4CAAARAAAAAAAAAAAAAAAAANfwAABkb2NQcm9wcy9jb3JlLnhtbFBL
BQYAAAAAGwAbADoHAAB68wAAAAA=

----boundary_0_61985b34-0fc6-4f91-99b8-464d8f613491

Content-Type: application/octet-stream; name="Microsoft Office 2003 Compatibility
 Installation Instructions.pdf"
Content-Transfer-Encoding: base64
Content-Disposition: attachment

----boundary_0_61985b34-0fc6-4f91-99b8-464d8f613491-- 
```

（那个 goobeldy goop 只是电子邮件中所有垃圾邮件的一小部分，但它在整个过程中看起来都是一样的。）

在创建附件时，我尝试使用不同的构造函数，以包含“application/pdf”的 MIME-TYPE 等等。当我这样做时，它将电子邮件正文中的 Content-Type 更改为 application/pdf，但电子邮件仍然包含所有垃圾并且没有附加文件。

为什么它会在 IDE 中运行，而不是在 .EXE 中运行？这对我来说是奇怪的行为。谢谢。

**解决方案**

具体解决方案是使用 System.Net.Mime 将 TransferEncoding 设置为 QuotedPrintable。

```
 var attachment = new System.Net.Mail.Attachment(filePath);
 attachment.TransferEncoding = System.Net.Mime.TransferEncoding.QuotedPrintable;
 mailMessage.Attachments.Add(attachment); 
```

我现在对每个附件执行此操作，并根据需要附加文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:44:58.733

我的问题的具体解决方案是使用 System.Net.Mime 将 TransferEncoding 设置为 QuotedPrintable。

```
var attachment = new System.Net.Mail.Attachment(filePath);  
attachment.TransferEncoding = System.Net.Mime.TransferEncoding.QuotedPrintable;
mailMessage.Attachments.Add(attachment); 
```

我现在对每个附件执行此操作，并根据需要附加文件。

# sql - 将 VBA 记录集粘贴到 Excel 中？

> ID：10622555
> 
> 赞同：0
> 
> 时间：2012-05-16T16:17:01.260
> 
> 标签：sql, excel, vba

如果我在 VBA 中返回了一个 SQL 记录集，是否有一种简单的方法可以将值粘贴到电子表格中而无需循环等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:12:00.283

如果您使用的是“Oracle InProc Server”和 OraDynaset，您将使用类似于以下代码段的内容。

```
Dim QueryResults As OraDynaset
Set QueryResults = Label_DB.CreateDynaset(SQL_String, 0&)
QueryResults.CopyToClipboard
Selection.Paste 
```

CopyToClipboard 的默认行为是将 TAB (ASCII 9) 作为列分隔符，将 ENTER (ASCII 13) 作为行分隔符。

# facebook - Facebook Open Graph 返回错误

> ID：10622558
> 
> 赞同：0
> 
> 时间：2012-05-16T16:17:10.367
> 
> 标签：facebook, graph, return-value

我正在尝试访问`http://graph.facebook.com/{user_id}`. 它通常返回有关用户的所有**公共**信息，即姓名、性别和地区。但是，在极少数情况下，它只是返回 false，甚至没有错误。我在 StackOverflow 上看到过其他问题，有人说访问令牌可能错误或查询格式可能错误，但我传递的只是 Facebook 用户 ID。这是为什么？

另外，如果它取决于用户的隐私设置，我该如何为自己启用/禁用它呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:20:21.403

如果用户完全退出 Facebook 平台，就会发生这种情况。用户可以在隐私设置 -> 广告、应用和网站 -> 关闭所有应用下执行此操作。您的开发者帐户可能无法删除您创建的任何应用程序，所以我会尝试使用其他人的帐户。

# iphone - 从不存在的项目文件构建 Xcode

> ID：10622561
> 
> 赞同：0
> 
> 时间：2012-05-16T16:17:18.343
> 
> 标签：iphone, xcode

我正在构建我的项目，但在不属于我的项目的文件中出现构建错误。该文件未在项目导航器或构建阶段下的编译源中列出。

我已经清理并运行了很多次，结果相同。

如何删除此文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T18:52:39.670

问题出在头文件中，而不是在实现文件中，代码中的某些内容导入了该头文件，删除了该语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:11:52.637

这也发生在我身上。对我来说，解决方法就是重新启动 XCode。

我认为问题来自我重命名类，而 XCode 一定缓存了旧名称。

# asp.net-mvc-3 - 如何在 MVC3 中显示可编辑实体的集合并在回发到 Action 时对其进行处理？

> ID：10622575
> 
> 赞同：0
> 
> 时间：2012-05-16T16:18:20.970
> 
> 标签：asp.net-mvc-3

我有一个实体集合，称为帐户。单个用户将拥有多个帐户，并且可以为每个帐户设置百分比。

UI 将列出所有帐户，每个帐户的可编辑字段是百分比属性。这将由一个文本框表示。

用户进行任何调整后，他们会将表单发回以进行处理。

我在其他几个项目中使用过 MVC，并且我了解模型绑定，但我不确定在处理模型***集合***时如何进行。

我不是在寻找代码或让某人为我写出完整的答案（尽管老实说我不会抱怨......）。我正在寻找方向的指导。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:05:21.390

两件事情：

1）您需要在总体页面视图模型中使用帐户列表/集合或 AccountViewModel 列表/集合

所以，你会有

```
public class MyPageViewModel
{
    public Collection<Account> AccountList; 
    //AccountViewModel is what I'd use but for simplicity
    //Other properties for view model
} 
```

您现在有一个包含帐户列表的视图模型。

2)

在您看来，您有两个选择。

a) 只需创建一个 for 循环来为每个帐户吐出您想要的 HTML（不是特别漂亮）

b）创建一个编辑器模板，这样您就不必做任何特别的事情您的页面就会有这个。

```
@Html.EditorFor(model => model.AccountList) 
```

以下是编辑器模板的设置方式。

![在此处输入图像描述](../Images/a6193f40b061759b376fc4531ccf3a93.png)

这是我现在正在做的一个项目。这里的要点应该是您在与您正在处理的内容相匹配的视图文件夹下添加一个“EditorTemplates”文件夹。按照惯例，当您使用 EditorFor 时，MVC 将在此文件夹中查找模板。现在，您只需在该强类型模板中插入您想要的任何 HTML（它将采用 Account 或 AccountViewModel 对象），您就完成了。无需在视图中使用 for 循环来为每个帐户生成 HTML。

真的，到时候就是这样。您的 post 操作将模型绑定到 MyPageViewModel 类型，该类型将具有您想要的更新数据

希望这能让你指出正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:57:55.633

这是如何解决您的任务的示例

首先让我们定义一个模型：

```
public class Account
{
    public int Id { get; set; }
    public string Number { get; set; }
    public decimal Percentage { get; set; }
}

public class UserEditModel
{
    public ICollection<Account> Accounts { get; set; }
} 
```

UserEditModel 是一个视图模型。它包含声明为 Account 集合的属性 Accounts。

我将在视图中描述一个表格以显示帐户并编辑它们的百分比：

```
<form action="Url.Action("Save")" method="POST">
<table>
  <thead>
    <tr>
       <td>Number</td>
       <td>Percentage</td>
    </tr>
  </thead>
  <tbody>
    @for (var i = 0; i < Model.Accounts.Count(); i ++)
    {
      <tr>
         <td>
            @Html.HiddenFor(m => m.Accounts[i].Id)
            @Html.HiddenFor(m => m.Accounts[i].Number)
            @Model.Accounts[i].Number
         </td>
         <td>
            @Html.TextBoxFor(m => m.Accounts[i].Id)
         </td>
      </tr>
    }
  </tbody>
</table>
</form> 
```

在视图模型的 Accounts 属性中提交表单后，我们将根据用户的百分比值进行更改。

# php - php的数字精度如何扩展

> ID：10622580
> 
> 赞同：2
> 
> 时间：2012-05-16T16:18:40.673
> 
> 标签：php, javascript, floating-point, precision

在 JavaScript 中，这个数学运算返回：

```
1913397 / 13.054 =  146575.53240386088 
```

但 php 中的相同操作返回：

```
1913397 / 13.054 =  146575.53240386 
```

我想这是由于四舍五入。

如何扩展 php 的精度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:19:43.067

从[我为 Authorize.Net 写的一篇文章中](http://community.developer.authorize.net/t5/The-Authorize-Net-Developer-Blog/Precision-Math-with-PHP/ba-p/8368)：

一加一等于二，对吧？0.2 加上 1.4 乘以 10 怎么样？那等于16，对吧？如果您使用 PHP（或大多数其他编程语言）进行数学运算，则不会：

```
echo floor((0.2 + 1.4) * 10); // Should be 16\. But it's 15! 
```

这是由于浮点数是如何在内部处理的。它们以固定的小数位数表示，并且可能导致数字加起来不像您期望的那样。在内部，我们的 0.2 加 1.4 乘以 10 示例计算大约为 15.9999999998 左右。当处理不需要像百分比这样精确的数字时，这种数学方法很好。但是，当处理货币精度问题时，这里或那里丢失的一分钱或一美元很快就会加起来，没有人喜欢在任何丢失的钱中亏本。

**BC 数学解决方案**

幸运的是，PHP 提供了[BC Math 扩展](http://us2.php.net/manual/en/book.bc.php)，“用于任意精度数学 PHP 提供了二进制计算器，它支持任何大小和精度的数字，以字符串表示。” 换句话说，您可以使用此扩展对货币价值进行精确的数学运算。[BC Math 扩展包含](http://us2.php.net/manual/en/ref.bc.php)允许您精确执行最常见操作的函数，包括[加法](http://us2.php.net/manual/en/function.bcadd.php)、[减法](http://us2.php.net/manual/en/function.bcsub.php)、[乘法](http://us2.php.net/manual/en/function.bcmul.php)和[除法](http://us2.php.net/manual/en/function.bcdiv.php)。

**一个更好的例子**

这是与上面相同的示例，但使用 bcadd() 函数为我们进行数学运算。它需要三个参数。前两个是我们希望添加的值，第三个是我们希望精确到的小数位数。由于我们使用的是金钱，我们将精度设置为小数点后两位。

```
echo floor(bcadd('0.2', '1.4', 2) * 10); // It's 16 like we would expect it to be. 
```

# html - Django HTML 质量和教程

> ID：10622581
> 
> 赞同：1
> 
> 时间：2012-05-16T16:18:43.527
> 
> 标签：html, django, python-3.x

嘿，我最近听说了 Django，并希望继续学习 HTML 类型的平台。我目前正在学习 python 3，想知道 Django，尤其是最近的版本，是否是“最好的”（对这种随意性感到抱歉）。另外，我希望知道任何关于 django 的好书/教程或任何其他你认为更易变、更容易等的书。大多数书在 Django 上似乎不是最新的，因为从 1.0 到显然有很大的变化从我读过的内容来看，1.1 和 1.3 的另一个飞跃。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:43:20.307

正如彼得所说，Django 不支持 python 3（这没什么大不了的，你不应该担心）

查看入门[Django 教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)- 看看你是否理解发生了什么（做所有的事情！）

如果您只想“制作网站”，我建议您在进入 django 之前学习构建原始 HTML/CSS 网站，这是一个 Web 框架。

Python 是一种学习的乐趣——听起来你正在跳入那个世界。我会使用基本教程——通读模型视图控制器架构——看看它是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T03:49:00.127

我可以和你分享我最近学习 Django 的经验。您应该尝试使用 Django 文档而不是阅读任何书籍，并且不要害怕查看源代码，它将帮助您了解幕后的工作方式。

# primefaces - Primefaces PickList 在转移时更新目标列表

> ID：10622582
> 
> 赞同：0
> 
> 时间：2012-05-16T16:18:51.717
> 
> 标签：primefaces, target, transfer

当用户将项目从一个列表转移到另一个列表时，我想更新 bean 中的列表。有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:17:44.460

在 xhtml 中：

```
<p:pickList value="#{myBean.myDepartment}" onTransfer="handleTransfer(e)"....> 
```

在豆子里：

```
List<Department> selectedDepartments = new ArrayList<Department>();
List<Department> availableDepartments = getAvailableDepartments();

private DualListModel<Department> myDepartment;
myDepartment = new DualListModel<Department>(availableDepartments, selectedDepartments); 
```

提交时，可以使用 selectedDepartments 访问用户选择的部门

还有剧本...

```
<script type="text/javascript">
function handleTransfer(e) {
    item = e.item;
    alert(item.text());

    fromList = e.from;
    toList = e.to;
    type = e.type; //type of transfer; command, dblclick or dragdrop)
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:24:53.057

I don't exactly know what do you want. This is done automatically same as if you type something into `p:inputText` it is available in beans property representing the value of `p:inputText` without need of manual update.

Just access the updated values in your `pickList` with `getTarget()` or `getSource()` methods. You are probably trying to access `lists` which you provided to `DualListModel` directly like:

```
DualListModel<fooType> fooModel = new DualListModel<fooType>(fooList1,fooList2);
// transfer item
// check if fooList2 is updated - this is wrong, it is **not** updated
fooModel.getTarget(); // this way you can get the actual values of target list 
```

`target` - right side, `source` - left side of a `pickList`.

# objective-c - cocos2d：SneakyJoystick 向下移动的触发代码

> ID：10622584
> 
> 赞同：1
> 
> 时间：2012-05-16T16:19:01.993
> 
> 标签：objective-c, xcode, cocos2d-iphone, joystick

我有一个正在进行的游戏，玩家只能左右移动，但在地图上的某些地方，他们可以向上或向下推动以前往这些方向的新场景（例如通过后墙上的门）。

如何设置我的 SneakyJoystick 以在用户按下时触发一些代码？目前它正在执行以下操作以向左/向右移动我的播放器，我希望这继续进行，但是（现在）当播放器完全向上或向下推杆时执行 CCLOG。有任何想法吗？

```
- (void) applyJoystick:(SneakyJoystick *)aJoystick forTimeDelta:(float)deltaTime {
    CGPoint scaledVelocity = ccpMult(aJoystick.velocity, 325.0f);
    CGPoint oldPosition = [self position];
    CGPoint newPosition = ccp(oldPosition.x + scaledVelocity.x * deltaTime, oldPosition.y);

    [self setPosition:newPosition];
    if (oldPosition.x > newPosition.x) {
        self.flipX = YES;
    } else if (oldPosition.x == newPosition.x) {
        // Intentionally do nothing to preserve orientation at start of scene!
    } else {
        self.flipX = NO;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:40:48.903

```
int extra = 20;
if ((int) aJoystick.degrees > 270 - extra && aJoystick.degrees < 270 + extra) {
    // Joystick button seems to be pointing down
} 
```

我认为这行得通。我记不太清了。我认为270度完全下降。我正在检查方向度是否在一定范围内（270 - 20 和 270 + 20）。

# bcp - 将表格内容从一台服务器复制到另一台服务器的最快方法

> ID：10622586
> 
> 赞同：1
> 
> 时间：2012-05-16T16:19:07.303
> 
> 标签：bcp, sap-ase

我正在寻找将一些表从一个 sybase 服务器（ase 12.5）复制到另一个的最快方法。目前我正在使用 bcp 工具，但创建正确的 bcp.fmt 文件需要时间。

表具有相同的结构。每个表中大约有 25K 行。我必须复制大约 40 张桌子。我尝试对 bcp 使用 -c 参数，但在导入时出现错误：

```
CSLIB Message:  - L0/O0/S0/N24/1/0:
cs_convert: cslib user api layer: common library error: The conversion/operation
 was stopped due to a syntax error in the source field. 
```

我的标准 bcp 输入/输出命令：

```
bcp.exe SPEPL..VSoftSent out VSoftSent.csv -U%user% -P%pass% -S%srv% -c
bcp.exe SPEPL..VSoftSent in VSoftSent.csv -U%user2% -P%pass2% -S%srv2% -e import.err -c 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:26:08.013

由于您从不同的服务器复制，BCP 是要走的路！

如果它在同一台服务器中会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:47:49.060

您是说它是从 1 个 Sybase ASE 主机到另一个 Sybase ASE 主机吗？

如果您不想弄乱文件系统上的 BCP 或 I/O，您可以在目标数据库中创建一个 CIS 代理表，该表引用带有 select 语句的存储过程或源数据库中的物理表。

然后你可以插入destinationtable (col1, col2...) select col1, col2... from proxytablename

CIS 代理是相当资源密集型的，所以我会非常小心你在这里做了多少工作。

# c - 如何在 XS 代码中逐字符处理字符串

> ID：10622588
> 
> 赞同：3
> 
> 时间：2012-05-16T16:19:11.513
> 
> 标签：c, perl, perl-xs

假设有这样一段代码：

```
 my $str = 'some text';
  my $result = my_subroutine($str); 
```

并且`my_subroutine()`应该作为 Perl XS 代码来实现。例如，它可以返回 (unicode) 字符串的字节总和。

在 XS 代码中，如何处理字符串**(a)** char by char，作为一般方法，以及**(b)**逐字节，如果字符串由 ASCII 码子集组成（从原生转换的内置函数*字符串*的数据结构到 char[]) ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:31:41.110

在 XS 层，您将获得字节或 UTF-8 字符串。在一般情况下，您的代码可能会包含`char *`指向字符串中下一项的指向，并随其递增。要在 XS 中使用一组有用的 UTF-8 支持函数，[请](http://perldoc.perl.org/perlapi.html#Unicode-Support)阅读`perlapi`

* * *

我的一个例子来自[http://cpansearch.perl.org/src/PEVANS/Tickit-0.15/lib/Tickit/Utils.xs](http://cpansearch.perl.org/src/PEVANS/Tickit-0.15/lib/Tickit/Utils.xs)

```
int textwidth(str)
    SV *str
  INIT:
    STRLEN len;
    const char *s, *e;

  CODE:
    RETVAL = 0;

    if(!SvUTF8(str)) {
      str = sv_mortalcopy(str);
      sv_utf8_upgrade(str);
    }

    s = SvPV_const(str, len);
    e = s + len;

    while(s < e) {
      UV ord = utf8n_to_uvchr(s, e-s, &len, (UTF8_DISALLOW_SURROGATE
                                               |UTF8_WARN_SURROGATE
                                               |UTF8_DISALLOW_FE_FF
                                               |UTF8_WARN_FE_FF
                                               |UTF8_WARN_NONCHAR));
      int width = wcwidth(ord);
      if(width == -1)
        XSRETURN_UNDEF;

      s += len;
      RETVAL += width;
    }

  OUTPUT:
    RETVAL 
```

简而言之，此函数一次迭代给定字符串一个 Unicode 字符，累积由 给出的宽度`wcwidth()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T17:23:49.717

如果您期望字节：

```
STRLEN len;
char* buf = SvPVbyte(sv, len);

while (len--) {
   char byte = *(buf++);

   ... do something with byte ...
} 
```

如果您期待文本或任何非字节字符：

```
STRLEN len;
U8* buf = SvPVutf8(sv, len);

while (len) {
   STRLEN ch_len;
   UV ch = utf8n_to_uvchr(buf, len, &ch_len, 0);
   buf += ch_len;
   len -= ch_len;

   ... do something with ch ...
} 
```

# javascript - 从数组中获取元素？

> ID：10622591
> 
> 赞同：1
> 
> 时间：2012-05-16T16:19:23.073
> 
> 标签：javascript

我有对象数组：

```
var aoo = [{},{},{},....{},{},{}]; 
```

我需要一个优化的函数来获取从 n 到 m 个元素的元素。例子：

```
var getEl = function(from,to){ ... return array ) 
```

如何以最佳优化方式进行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T16:22:51.410

您正在寻找[`slice`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)：

```
var arr = aoo.slice(from, to); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T16:22:58.933

我认为您正在寻找切片功能。就像是

```
var getEl = myArray.slice(from, to) 
```

# c# - 在使用 TFSBuild 保持内部版本号和程序集同步方面需要帮助

> ID：10622593
> 
> 赞同：1
> 
> 时间：2012-05-16T16:19:27.147
> 
> 标签：c#, tfs, msbuild, tfsbuild

我正在学习 TFS2010 Team Build、Workflow 和 MSBuild。我对 Workflow 有了大致的了解，并且最近能够成功地进行测试构建。

现在我需要一些帮助来保持构建版本和程序集版本同步。我一直在阅读[Jim Lamb](http://blogs.msdn.com/b/jimlamb/archive/2009/11/18/how-to-create-a-custom-workflow-activity-for-tfs-build-2010.aspx%5d)和[John Robbins](http://www.wintellect.com/CS/blogs/jrobbins/archive/2011/09/05/tfs-2010-build-numbers-file-versions-from-inside-your-c-and-c-projects.aspx)关于这个主题的几篇博客，但是我现在比开始时感到更加困惑。Jim Lamb 的博客讨论了使用自定义活动，该活动使用当前日期来设置版本号，而 John Robbins 的博客讨论了获取最后一个程序集版本并在 MSBuild 中执行所有操作，因为没有额外的依赖项。

目前我们使用 4 位版本号，例如 3.8.0.2，然后我们为每个构建增加最后一个数字。我们使用这个版本来同步所有的程序集。我们希望保持这种格式，并且我想在工作流程中处理我的所有版本控制，但是我不知道如何以这种方式从程序集中读取最后一个版本。我认为这将需要编写自定义活动，但我将使用什么方法来阅读最新版本？

提前致谢！吉姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T17:08:59.423

Stuart Preston 在他的博客上解释了一种设置程序集信息的简单方法：http: [//stuartpreston.net/blog/2010/05/02/simple-assembly-versioning-with-team-build-2010/](http://stuartpreston.net/blog/2010/05/02/simple-assembly-versioning-with-team-build-2010/)

**编辑：**

上面的链接已经失效，这里是缓存版本：

Stuart Preston 于 2010 年 5 月 2 日在 Team Foundation Server 下发布

有许多更复杂的方法可以实现这一点，但似乎没有一种方法能完全满足我的需求，因此在这里我介绍了另一种使用 Team Build 2010 进行程序集版本控制的方法。我希望我的 Team Build 编号与我的程序集版本完全匹配（而不是派生的），像这样：

（图片）

所以这就是我的做法。首先，我在构建定义中自定义 BuildNumber 格式：

（图片）

就我而言，我决定对其进行自定义，以便显式添加主要和次要版本号“0.1”。这让我可以控制我想要实现的版本号的前两部分。我还添加了前面`$(Month)$(DayOfMonth)`带有 a的宏。`1`对于 2010 年 5 月 2 日，这将生成一个数字 10502。（我在这里不使用全年的原因是今天它会生成一个内部版本号 100502 并且文件版本号不能高于 65335）。

当我决定在版本 0.2、0.3 或 1.0 上工作时，我所要做的就是在此处增加内部版本号并保存定义，我也很高兴在年份变化时增加编号。我说很简单！

内部版本号格式的最后一部分保持原样（即版本号在当天每次构建时递增 1，并在第二天重置）。

现在我们需要做的就是`MSBuild`在针对解决方案运行时检索此版本号，拆分版本号并将数字部分放入`Properties\AssemblyVersion.cs`文件中（您需要先注释掉`AssemblyFileVersion`该文件中的行并将其签入）。

这是您需要在`.csproj`文件中插入的片段（您必须检查它，然后在记事本或您喜欢的文本编辑器中打开它）。

```
<UsingTask
    TaskName="Microsoft.TeamFoundation.Build.Tasks.GetBuildProperties"
    AssemblyFile="$(MSBuildProgramFiles32)\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies\Microsoft.TeamFoundation.Build.ProcessComponents.dll"
  Condition="' $(BuildUri) '!='  '"/>

<Target Name="BeforeBuild" Condition="' $(BuildUri) '!='  '">
  <GetBuildProperties TeamFoundationServerUrl="$(TeamFoundationServerUrl)" BuildUri="$(BuildUri)">
    <Output TaskParameter="BuildNumber" PropertyName="BuildNumber" />
  </GetBuildProperties>

  <PropertyGroup>
    <BuildNumberSplitLocation>$([MSBuild]::Add($(BuildNumber.LastIndexOf('_')),1))</BuildNumberSplitLocation>
  </PropertyGroup>

  <ItemGroup>
    <AssemblyVersionLines Include="[assembly:AssemblyFileVersion(&quot;$(BuildNumber.Substring($(BuildNumberSplitLocation)))&quot;)]" />
  </ItemGroup>

  <Exec Command="attrib -r &quot;$(ProjectDir)\Properties\AssemblyInfo.cs&quot;" ContinueOnError="false" />
  <Message Text="Lines being added: @(AssemblyVersionLines)" Importance="high" />
  <WriteLinesToFile File="$(ProjectDir)\Properties\AssemblyInfo.cs" Lines="@(AssemblyVersionLines)" />
</Target> 
```

**（参考结束）**

他修改`csproj`文件以`AssemblyInfo.cs`在构建之前使用传入的值更新文件，`TFS`以便根据以下排列对程序集进行版本控制`MMDDRev`

您的情况有点不同，因为您想要一个自定义内部版本号。为此，您可以`BuildNumberFormat`将`3.8.0.$(Rev:.r)`. 由于修订是唯一改变的东西，`TFS`它将自动为您增加它。

如果您想更新该`3.8.0.`部分，您可以再次手动编辑内部版本号格式。`BeforeBuild`否则，您将需要一个解决方案来存储和解析内部版本号，作为`csproj`.

# javascript - 奇怪的 jQuery 错误信息

> ID：10622596
> 
> 赞同：4
> 
> 时间：2012-05-16T16:19:35.010
> 
> 标签：javascript, jquery, arrays, json, console

# 短的

得到

```
Syntax error, unrecognized expression: [object Object] @ jquery.js:4267 
```

这是jQ的一段代码

```
Sizzle.error = function( msg ) {
throw new Error( "Syntax error, unrecognized expression: " + msg ); // Line 4267
}; 
```

# 详细的

我已经预先声明了数组`aoData`。该数组由 Datatables 创建，我无法控制数组结构。

当我像这样手动推送参数时：

`aoData.push( { "name": "process", "value": "fetch" } );`

它运行良好，没有任何错误消息。

但问题是，当我尝试`tableXtraPostParams`在脚本顶部声明数组并将该数组的参数一一推送到`aoData`中时，它仍然可以正常工作，但是收到的奇怪错误消息不是来自我的代码，而是来自 jQuery。

```
Syntax error, unrecognized expression: [object Object] @ jquery.js:4267 
```

这是一段代码：（当我删除`$.each`循环时，错误消息消失）

```
var tableXtraPostParams = {
    "process":"fetch",
    "which":"mine"
};
$.each(tableXtraPostParams, function(n, v){
    aoData.push( {
       "name": n, 
       "value": v
    } );
}); 
```

这是`aoData`推送前的样子

```
[Object { name="sEcho", value=1}, Object { name="iColumns", value=8}, Object { name="sColumns", value=""}, Object { name="iDisplayStart", value=0}, Object { name="iDisplayLength", value=25}, Object { name="mDataProp_0", value=0}, Object { name="mDataProp_1", value=1}, Object { name="mDataProp_2", value=2}, Object { name="mDataProp_3", value=3}, Object { name="mDataProp_4", value=4}, Object { name="mDataProp_5", value=5}, Object { name="mDataProp_6", value=6}, Object { name="mDataProp_7", value=7}, Object { name="sSearch", value=""}, Object { name="bRegex", value=false}, Object { name="sSearch_0", value=""}, Object { name="bRegex_0", value=false}, Object { name="bSearchable_0", value=true}, Object { name="sSearch_1", value=""}, Object { name="bRegex_1", value=false}, Object { name="bSearchable_1", value=true}, Object { name="sSearch_2", value=""}, Object { name="bRegex_2", value=false}, Object { name="bSearchable_2", value=true}, Object { name="sSearch_3", value=""}, Object { name="bRegex_3", value=false}, Object { name="bSearchable_3", value=true}, Object { name="sSearch_4", value=""}, Object { name="bRegex_4", value=false}, Object { name="bSearchable_4", value=true}, Object { name="sSearch_5", value=""}, Object { name="bRegex_5", value=false}, Object { name="bSearchable_5", value=true}, Object { name="sSearch_6", value=""}, Object { name="bRegex_6", value=false}, Object { name="bSearchable_6", value=true}, Object { name="sSearch_7", value=""}, Object { name="bRegex_7", value=false}, Object { name="bSearchable_7", value=true}, Object { name="iSortingCols", value=1}, Object { name="iSortCol_0", value=0}, Object { name="sSortDir_0", value="asc"}, Object { name="bSortable_0", value=true}, Object { name="bSortable_1", value=true}, Object { name="bSortable_2", value=true}, Object { name="bSortable_3", value=true}, Object { name="bSortable_4", value=true}, Object { name="bSortable_5", value=true}, Object { name="bSortable_6", value=true}, Object { name="bSortable_7", value=true}] 
```

这是推后

```
[Object { name="sEcho", value=1}, Object { name="iColumns", value=8}, Object { name="sColumns", value=""}, Object { name="iDisplayStart", value=0}, Object { name="iDisplayLength", value=25}, Object { name="mDataProp_0", value=0}, Object { name="mDataProp_1", value=1}, Object { name="mDataProp_2", value=2}, Object { name="mDataProp_3", value=3}, Object { name="mDataProp_4", value=4}, Object { name="mDataProp_5", value=5}, Object { name="mDataProp_6", value=6}, Object { name="mDataProp_7", value=7}, Object { name="sSearch", value=""}, Object { name="bRegex", value=false}, Object { name="sSearch_0", value=""}, Object { name="bRegex_0", value=false}, Object { name="bSearchable_0", value=true}, Object { name="sSearch_1", value=""}, Object { name="bRegex_1", value=false}, Object { name="bSearchable_1", value=true}, Object { name="sSearch_2", value=""}, Object { name="bRegex_2", value=false}, Object { name="bSearchable_2", value=true}, Object { name="sSearch_3", value=""}, Object { name="bRegex_3", value=false}, Object { name="bSearchable_3", value=true}, Object { name="sSearch_4", value=""}, Object { name="bRegex_4", value=false}, Object { name="bSearchable_4", value=true}, Object { name="sSearch_5", value=""}, Object { name="bRegex_5", value=false}, Object { name="bSearchable_5", value=true}, Object { name="sSearch_6", value=""}, Object { name="bRegex_6", value=false}, Object { name="bSearchable_6", value=true}, Object { name="sSearch_7", value=""}, Object { name="bRegex_7", value=false}, Object { name="bSearchable_7", value=true}, Object { name="iSortingCols", value=1}, Object { name="iSortCol_0", value=0}, Object { name="sSortDir_0", value="asc"}, Object { name="bSortable_0", value=true}, Object { name="bSortable_1", value=true}, Object { name="bSortable_2", value=true}, Object { name="bSortable_3", value=true}, Object { name="bSortable_4", value=true}, Object { name="bSortable_5", value=true}, Object { name="bSortable_6", value=true}, Object { name="bSortable_7", value=true}, Object { name="process", value="fetch"}, Object { name="which", value="all"}] 
```

# 我试图解决的问题

1.  我下载了 jQ 1.7.2（开发版）并替换为缩小版 1.7.2。没有成功！
2.  我试着写

.

```
for( var p in tableXtraPostParams ) {
    aoData.push( {
       "name": p,
       "value": tableXtraPostParams[p]
    } );
} 
```

而不是 $.each。没有成功！

我在这里想念什么？我真的不知道，当我尝试从 $.each 内部推送时，为什么这条错误消息会出现在 Firefox 日志中，并且代码仍然可以正常工作。

任何建议将不胜感激！

笔记

这是一一版本（没有 $.each）：datatables.net/examples/server_side/custom_vars.html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:33:48.363

我希望您在错误的地方寻找该错误。如果您正在迭代和扩充的对象和数组不是 jQuery 实例，并且您可以在不使用 $.each 的情况下重现它，我认为您应该稍后看看您对 aoData 所做的事情。

Sizzle 是选择器引擎，因此请寻找一个可以执行以下操作的地方：

```
$(aoData[0]) 
```

在这个假设的情况下，你让 jQuery 认为它有一个选择器，但你给了它别的东西。

希望有帮助！

# python - 如何对字典进行排序？

> ID：10622597
> 
> 赞同：5
> 
> 时间：2012-05-16T16:19:35.283
> 
> 标签：python, dictionary

问题是我直接从一个 txt 文件中提取的房间号和客人详细信息列表，该文件需要放入字典中，房间号作为键，详细信息作为值。

客人名单字面意思是一个列表，每个项目代表房间号、客人姓名、到达、离开日期。旁边没有任何东西的房间是空的。

```
nlist = [['101'], ['102'], ['103'], 
['201', ' John Cleese', ' 5/5/12', ' 5/7/12'], ['202'], 
['203', ' Eric Idle', ' 7/5/12', ' 8/7/12'], ['301'], ['302'], ['303']] 
```

基本上，必须把它写进字典。这是我尝试过的：

```
guests = {}
for i in nlist:
        if len(i) == 1:
            key = i[0]
            guests[key] = None
        else:
            key = i[0]
            val = i[1],i[2],i[3]
            guests[key] = val 
```

这给了我：

```
guests = {'201': (' John Cleese', ' 5/5/12', ' 5/7/12'), 
'203': (' Eric Idle', ' 7/5/12', ' 8/7/12'), '202': None, '301': None, 
'302': None, '303': None, '102': None, '103': None, '101': None} 
```

如您所见，字典没有特定的顺序放在一起。然而，对于这个特定的练习，字典需要按房间号从低到高的顺序排列。我想我认为它只会从头到尾遍历每个内部列表，对其进行测试，然后按该顺序构建字典。

有谁知道如何正确编写代码，以便字典显示为 {'101': None, '102', None, '103': None... etc.)？希望有人能解释为什么我的代码也没有按我的预期工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T16:21:27.317

标准 Python 字典本质上是无序的。

一种可能性是使用[`OrderedDict`](http://docs.python.org/dev/library/collections.html#collections.OrderedDict). 它将保留*插入顺序*，这意味着您必须按照您希望检索它们的顺序插入条目。

另一种可能性是保持`dict`原样，但以所需的顺序迭代：

```
for k, v in sorted(guests.items()):
  print k, v 
```

最后，应该注意的是，您的示例将房间号存储为字符串而不是整数。这意味着排序是按字典顺序排列的 ( `'90' > '100'`)。由于这是家庭作业，因此我将其作为练习留给阅读以弄清楚如何解决此问题。

# objective-c - 存储 1000 个预设单词？

> ID：10622605
> 
> 赞同：0
> 
> 时间：2012-05-16T16:20:08.793
> 
> 标签：objective-c, macos, ipad

我正在开发一个 iPad/Mac 应用程序，需要存储 1000 个预设单词。这些话必须始终存储，不能更改。我应该如何处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:31:37.760

将它们存储在您加载到数组中的[属性列表中。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html)您几乎肯定会希望在将来的某个时候更改或本地化列表，这是最简单的方法。

# php - 将多个 WSDL 标头变量传递给 SOAP 服务器

> ID：10622608
> 
> 赞同：2
> 
> 时间：2012-05-16T16:20:14.970
> 
> 标签：php, web-services, soap, wsdl, soap-client

我是第一次使用 SOAP Web 服务，但在调用 SOAP 服务器时遇到了问题。我搜索了 WSDL SOAP 请求，但我无法解决我的问题。这是我的 WSDL 的片段

```
<s:complexType name="VerHeader">
    <s:sequence>
        <s:element minOccurs="0" maxOccurs="1" name="HD1" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="HD2" type="s:string"/>
        <s:element minOccurs="0" maxOccurs="1" name="HD3" type="s:string"/>
    </s:sequence>
    <s:anyAttribute/>
</s:complexType> 
```

我必须在这些 HD1、HD2 和 HD3 变量中发送用户名、密码和一些 ID。我还尝试了这些链接[Passing a PHP array in a SOAP call](https://stackoverflow.com/questions/1338573/passing-a-php-array-in-a-soap-call) and [Sending a Soap Header with a WSDL Soap Request with PHP](https://stackoverflow.com/questions/589228/sending-a-soap-header-with-a-wsdl-soap-request-with-php)

这是我尝试过但不起作用的方法，每次我运行我的代码它都会发送失败消息，你能弄清楚我的代码或我的逻辑有什么问题吗？

```
$soap = new SoapClient("http://example.com/verifyrecord.asmx?WSDL");
$header = array('HD1'=>'000000023','HD2'=>'val2','HD3'=>'val2');
$header = new SoapHeader('http://www.example.com/', 'VerHeader ', $header);

$soap->__setSoapHeaders(array($header)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:15:01.660

解决了这个问题。我不是通过使用php函数而是手动创建一个xml文件并将其发送到soap服务器来解决它。我已经发布了我的答案示例，以便对其他人有所帮助。谢谢大家的帮助。

```
// the xml to send
$xml = '<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header>
    <VerHeader xmlns="http://www.example.com/">
      <HD1>000000000117</HD1>
      <HD1>user</HD1>
      <HD1>password</HD1>
    </VerHeader>
  </soap:Header>
  <soap:Body>
    <m:VerifyTransaction xmlns:m="http://www.example.com/">
        <m:object1>45344</m:object1>
        <m:object2>5545437</m:object2>
    </m:VerifyTransaction>
  </soap:Body>
</soap:Envelope>';
// build your http request
$context = stream_context_create(array(
'http' => array(
'method' => 'POST',
'header' => "Content-type: text/xml\r\n",
'validateRequest'=>false,
'content' => $xml,
'timeout' => 10,
),
));

// send it
echo $xmlstring = file_get_contents('http://example.com/VerifyThis/VerifyThis.asmx?wsdl', false, $context); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:37:33.273

这不应该

new SoapHeader('http://www.example.com/', 'VerHeader', $header);

是

new SoapHeader('http://www.example.com/verifyrecord', 'VerHeader', $header);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:27:46.207

像这样尝试我确实将它用于我的英国邮件 api .. 它有效

```
<?php 

 $LoginWebRequest = new stdClass();
 $LoginWebRequest->Username = 'xxx cant show here xxx';
$LoginWebRequest->Password = 'xxx cant show here xxx';

//echo "<pre>";  print_r($LoginWebRequest); "</pre>"; exit;

$Login = new stdClass();
$Login->loginWebRequest = $LoginWebRequest;

 //echo "<pre>";  print_r($Login); "</pre>"; exit; 

 $soapClient = new SoapClient('https://qa-api.ukmail.com/Services/UKMAuthenticationServices/UKMAuthenticationService.svc?wsdl');
 $LoginResponse = $soapClient->Login($Login);

  ?> 
```

# delphi - CharInSet 接受 Unicode NULL 字符

> ID：10622611
> 
> 赞同：0
> 
> 时间：2012-05-16T16:20:29.283
> 
> 标签：delphi, delphi-2010

我正在从内存中读取一些数据，而这个内存区域是 Unicode。所以要制作一个 ansi 字符串，我需要这样的东西：

```
 while CharInSet(Chr(Ord(Buff[aux])), ['0'..'9', #0]) do
    begin
      Target:= Target + Chr(Ord(Buff[aux]));
      inc(aux);
    end; 
```

其中 Buff 是字节数组，目标是字符串。我只想在目标为 0..9 时继续获得 Buff 并添加目标，但是当它找到 NULL memory char (00) 时，它就会停止。如何在 Target 中继续添加数据，直到第一个字母或非数字字符？#0 无效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:37:45.980

如果您的数据是 Unicode，那么我假设编码是 UTF-16。在这种情况下，您无法逐字节处理它。一个字符单元是 2 个字节宽。先将数据放入Delphi字符串，然后解析：

```
var
  str: string;
....
SetString(str, PChar(Buff), Length(Buff) div SizeOf(Char)); 
```

这样做，你的循环看起来像这样：

```
for i := 1 to Length(str) do
  if not CharInSet(str[i], ['0'..'9']) then
  begin
    SetLength(str, i-1);
    break;
  end; 
```

我相信您的困惑是由逐字节处理引起的。对于 UTF-16 编码的文本，ASCII 字符被编码为一对字节，其中最重要的是零。我怀疑这解释了你试图通过你的`CharInSet`电话实现的目标。

如果您想满足其他数字字符，那么您可以使用该`Character`单元并使用`TCharacter.IsDigit()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T17:34:08.800

我什至不会打扰，`CharInSet()`因为您处理的是字节而不是字符：

```
var
  b: Byte;

while aux < Length(Buff) do
begin
  b := Buff[aux];
  if ((b >= Ord('0')) and (b <= Ord('9'))) or (b = 0) then
  begin
    Target := Target + Char(Buff[aux]); 
    Inc(aux); 
  end else
    Break;
end; 
```

# python - Python保持网页处于活动状态

> ID：10622613
> 
> 赞同：0
> 
> 时间：2012-05-16T16:20:44.507
> 
> 标签：python, web-services, web

我正在尝试让一组 python 脚本向一组微控制器报告它们的状态。

所以我的想法是让python脚本每个都创建自己的网页，可以由微控制器查看，但无论如何都要让脚本本身保持页面服务，即一个apache库，这样如果脚本崩溃或如果脚本未运行，则不提供页面或使页面具有默认值的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:27:07.323

您可以使用[http://docs.python.org/library/simplehttpserver.html](http://docs.python.org/library/simplehttpserver.html)或一些最小的 http 服务器框架，如[http://flask.pocoo.org/](http://flask.pocoo.org/)或[http://www.cherrypy.org/](http://www.cherrypy.org/)。

如果您想向您的微控制器提供“实时”信息，还可以查看[彗星式](https://en.wikipedia.org/wiki/Comet_%28programming%29)长轮询请求。您基本上会一直下载“页面”并将其作为数据流进行分析，而服务器会不断在“页面末尾”添加更新的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T17:58:16.840

你也可以看看[twisted.web](http://twistedmatrix.com/documents/current/web/howto/using-twistedweb.html)

一个非常基本的例子：

```
from twisted.web.server     import Site
from twisted.web.resource   import Resource
from twisted.internet       import reactor

class StatusPageResource(Resource):
    isLeaf           = True

    def __init__(self, param1):
        self.param1 = param1
        # Call the constructor of the super class
        Resource.__init__(self)

    def render_GET(self, request):
        return "<html><body>%s</body></html>" % self.param1

my_res = Resource()
my_res.putChild('GetStatusPage1', StatusPageResource(param1='abc'))
my_res.putChild('GetStatusPage2', StatusPageResource(param1='xyz'))

factory = Site(my_res)
reactor.listenTCP(8080, factory)
print 'Runnning on port 8080'
reactor.run() 
```

现在将您的浏览器指向`http://localhost:8080/GetStatusPage1`（例如）

# c# - Google Api .NET 库 OAuth2 身份验证

> ID：10622615
> 
> 赞同：0
> 
> 时间：2012-05-16T16:20:52.143
> 
> 标签：c#, .net, vb.net, google-api

我正在尝试使用[页面底部附近提供的代码示例进行一些实验](http://code.google.com/p/google-api-dotnet-client/wiki/OAuth2)

下面是基于上面链接的我的 VB.NET 代码的摘录。在翻译的某个地方，我错过了这里发生的事情：

```
Dim auth = New OAuth2Authenticator(Of NativeApplicationClient)(provider, GetAuthorization) 
```

GetAuthorization 方法有一个签名：

```
GetAuthorization(arg As NativeApplicationClient) 
```

我显然遗漏了关于 C# 和 VB.NET 之间的语法转换的一些非常明显的内容，因为在我提供的链接上的 C# 版本中的方法调用中没有提供参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:29:30.037

您必须指定`AddressOf`参数以引用方法。

```
Dim auth = New OAuth2Authenticator(Of NativeApplicationClient)(provider, AddressOf GetAuthorization) 
```

# java - 所有网络流量都通过 RMI 注册表吗？

> ID：10622616
> 
> 赞同：1
> 
> 时间：2012-05-16T16:20:55.550
> 
> 标签：java, rmi

这似乎是一个简单的问题，但我找不到明确的答案：

假设我在本地无防火墙网络上有三台服务器，其中一台是注册表（R），另外两台是客户端（A 和 B），客户端 A 和 B 都连接到注册表。

客户端 A 通过注册表获得对 B 上导出对象的引用并调用一个方法——该方法调用是否通过注册表？即，如果 A 将一个大字节数组作为参数传递给 B，是否需要通过 R 进行 2 跳，或者注册表是否告诉 A B 可以直接通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:22:44.097

不，从客户端到服务器的调用不通过 RMI 注册表。注册表仅用于查找对服务器的引用。对服务器的后续调用直接到那里。

RMI 注册中心实际上只不过是一个 RMI 服务器本身，它接受并存储向它注册的服务器的远程存根。它为不知道在哪里找到服务器的客户端提供了一个已知的入口点。它将 RMI 存根交还给客户端，然后客户端通过该存根直接与服务器对话。

# asp.net-mvc - 为什么我的视图模型的属性不显示？

> ID：10622617
> 
> 赞同：0
> 
> 时间：2012-05-16T16:20:58.550
> 
> 标签：asp.net-mvc

我正在使用 MVC 4 Beta，但这似乎并不特定于 MVC 4。我是 MVC 的新手，所以这可能只是我需要指出正确的方向。谢谢！

我正在使用定义为...的视图模型

```
public class PatientWithVisits
{
    public Patient Patient { get; set; }

    public IEnumerable<Visit> Visits { get; set; }

} 
```

在我看来，我正在使用 HTML 助手（`LabelFor`在这种情况下）并通过 lambda 表达式传递我的属性，就像这样`@Html.LabelFor(model => model.VisitId)`。

我开始挖掘，很快我就意识到了我的错误。视图模型没有`VisitId`属性。然而，解决问题并不像找到问题那么容易。

我试图改变`model => model.VisitId`，`model => model.Visits.VisitId`但没有奏效。`model`包括`Patient`和`Visits`我预期的智能感知。但是，`Visits`它不包含我期望看到的任何属性`Visit`，例如`VisitId`. 集合的智能感知`Visits`仅包含扩展方法。

发生了什么，如何让我的属性`Visit`显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:42:43.537

Visits 是一个集合，但集合中的每个人`Visit`都有一个`VisitId`. 只需按要求显示它们：

```
@foreach (var visit in Model.Visits)
{
    @visit.VisitId
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:30:39.770

您还需要向 ViewModel 添加一个名为 ViewId 的属性

# jquery - 在页面之间传递数据

> ID：10622619
> 
> 赞同：1
> 
> 时间：2012-05-16T16:21:01.940
> 
> 标签：jquery, ajax, jquery-mobile, cordova

我正在phonegap上开发一个移动应用程序，我需要在页面之间传递变量，就像：[http ://coenraets.org/apps/directory/jqm/index.html](http://coenraets.org/apps/directory/jqm/index.html)

但我的问题是我不能使用 php 文件。我怎样才能做到这一点 ？谢谢 ：）

我刚刚尝试了此处提到的 LocalStorage：http: [//docs.phonegap.com/en/1.6.1/cordova_storage_storage.md.html#localStorage](http://docs.phonegap.com/en/1.6.1/cordova_storage_storage.md.html#localStorage) 但它不起作用：这是我的代码：

**第 1 页：**

```
$(data).find("Book").each(function () {
        var temp = $(this).find("name").text();
        var temp1 = $("#champ").val().replace(" ", "") ;

        if (temp1 != "") {
            if (temp.toLowerCase().search(myRegExp) > -1) {
                $("#result_list").append("<li><a href='recherche_details.html' data-transition='pop'><img src='images/a.jpg' /><p><strong>Titre : " + temp + "</strong></p><p>Auteur : " + $(this).find("address").text() + "</p><p>Pays : " + $(this).find("country").text() + "</p></a></li>").listview("refresh") ;
                $envoi_search.attr("disabled", "");
                // Using the LocalStorage
                window.localStorage.setItem("titre" + i, temp);
                i++ ;
            }
        }
    }); 
```

**第2页 ：**

```
<script type="text/javascript" charset="utf-8">

        // Wait for Cordova to load
        document.addEventListener("deviceready", onDeviceReady, false);

        // Cordova is ready
        function onDeviceReady() {
            // keyname is now equal to "key"
            var value = window.localStorage.getItem("titre0");
            $("#result").append("Yoooo" + value + " !! you are here") ;
        }
    </script> 
```

但它不起作用。你有什么主意吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:25:55.827

`location.hash`在or (querystring)中设置您的变量`location.search`，然后在第二页上使用 JavaScript 检索它。

[https://developer.mozilla.org/en/DOM/window.location#Properties](https://developer.mozilla.org/en/DOM/window.location#Properties)

不要忘记，当您检索`location.hash`or时`location.search`，您需要使用以下内容去除第一个字符（# 或 ?）`.substring(1)`：

```
var hash = location.hash.substring(1); 
```

另请参阅[此问题](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)`location.search`以了解将字符串解析为键和值的技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:31:17.647

我很想为此使用 LocalStorage，将数据存储在第一页并在下一页检索它。

然后清空localstorage，防止被遗忘。

[http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html#localStorage](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html#localStorage)

# sql-server-2008-r2 - 在同一张表中建立一对多关系是否安全并被推荐？

> ID：10622620
> 
> 赞同：0
> 
> 时间：2012-05-16T16:21:02.067
> 
> 标签：sql-server-2008-r2, one-to-many

我正在使用 SQL SERVER 2008 R2 和 Visual Studio .NET 4 C#

我有著名的 USERS 表。考虑它的设计：

```
UserID
Username
Password
UsertypeID  -- this is a foreign key, linked to 'UserTypes' table to distinguish between super admins, admins, and dummy users 
```

我想向名为“CreatorID”的用户添加一个新字段。这样做的原因是每个“虚拟用户”都将由管理员创建，我想知道那个管理员。那么 USERS 表设计会是这样的：

```
UserID
Username
Password
UsertypeID  -- this is a foreign key, linked to 'UserTypes' table to distinguish between super admins, admins, and dummy users
CreatorID 
```

所以，我的目的是我即将在同一个 USERS 表中的“CreatorID”和“UserID”之间建立一对多的关系（使用 SQL SERVER 2008），但我有点担心（因为这是第一个时间我做这样的事情）。这样做有什么缺点吗？SQL SERVER 2008 对这种关系有什么问题吗？这是满足我需求的最合适方法吗？

我感谢您对此目的的详细说明。谢谢，

# java - 如何使用 .java 和 .class 文件填充 JList

> ID：10622624
> 
> 赞同：1
> 
> 时间：2012-05-16T16:21:18.970
> 
> 标签：java, swing, netbeans, filesystems, jlist

我正在创建一个应用程序，它从选定的目录中获取 .java 和 .class 文件的列表并将它们放在 JList 中。我正在使用 Netbeans 7.1.2。

目前，我正在检索文件并将其放入`List<File>`. 我已打印出列表中的所有文件，但我无法将它们添加到我的表单中的 JList 中。

这就是我将文件添加到列表中的方式

```
List<File> filesInDirectory = new ArrayList<>(); 

public List listFilesForFolder(final File folder) {

    for (final File fileEntry : folder.listFiles()) {
            if (fileEntry.isDirectory()) {
                listFilesForFolder(fileEntry);
            } else {
                        if(fileEntry.toString().toUpperCase().endsWith(".CLASS") || fileEntry.toString().toUpperCase().endsWith(".JAVA")){
                            filesInDirectory.add(fileEntry);
                            System.out.println(fileEntry.getName());
                        }
            }
        }

    return filesInDirectory;
} 
```

有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T16:29:45.620

```
DefaultListModel model = new DefaultListModel();
for(File f : yourFileList) {
    model.addElement(f);
}

yourList.setModel(model); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T16:27:20.443

创建一个[DefaultListModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultListModel.html)对象并将文件添加到此对象，然后让 JList 使用此模型。有关这方面的更多信息，请查看[JList 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)。您可能希望创建一个 ListCellRenderer 以便您的文件文本正确显示。

# java - 封装/抽象

> ID：10622628
> 
> 赞同：0
> 
> 时间：2012-05-16T16:21:35.690
> 
> 标签：java, oop

> **可能重复：**
> [抽象和封装之间的区别？](https://stackoverflow.com/questions/742341/difference-between-abstraction-and-encapsulation)
> [抽象和封装有什么区别？](https://stackoverflow.com/questions/4966710/what-is-the-difference-between-abstraction-and-encapsulation)

我注意到在讨论 OOP 设计时，封装和抽象的概念很重要。但是，我不太确定它们之间有何不同。我读过一堆相互矛盾的文章和帖子（其中大部分来自这个网站）。

我的理解是**抽象**是一种分解现实世界对象复杂性的方法。这种分解可能涉及创建几个共同代表现实世界对象的对象。抽象也可以有很多层，类继承就是这种情况的一个例子。

**封装**是隐藏类中内部实现数据的过程。诸如访问修饰符和访问器方法之类的语言特性是其中的关键。

如果这些定义是正确的（如果我错了，请纠正我），接口将用于什么原则？抽象？因为一组现实世界的对象可以概括在一个界面中？或者封装，接口本身可以用来暴露对象的特性而不暴露内部功能。

如果可能的话，你能否提供一个简短的例子，这将清楚地区分这两个原则？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:34:49.433

至少对我来说，理解抽象的最好方法是用这个例子思考几何图形中的时刻。假设三角形、正方形、矩形和圆形，这些元素构成了这个“几何图形”的一部分，如果你想在类模型中表示它，你可以做这样的事情

```
public abstract class GeometricFigures
{

    public int perimeter(); //Common Behavior
} 
```

现在这是一个抽象类，因为这个元素在我们的世界上没有真实的表示，这没关系，因为 GeometricFigures 类不能被实例化。

至少你可以定义这个类的孩子，例如 trigule 并且这个类继承自 `GeometricFigures`这样

```
public class Triangle inherits GeometricFigures
{
    public int size1;
    public int size2;
    public int size3;
    public int perimeter( int size1, int size2, int size3);
} 
```

的概念`Abstraction`允许我代表父类`GeometricFigures`理解这个类在现实中不存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:37:04.347

接口属于抽象类别。他们将一个类的共同特征“抽象”或分解到另一个类中，迫使所有子类遵守它们的约定并实现其所有方法。在我看来，我认为抽象和接口是代码重用，它有助于更​​易于维护的代码，而封装主要允许更大的安全措施。它们都是主要的 OOP 概念，并且确实有一些比较。

# iphone - 如何通过 Internet 将高质量的视频和音频从 iPhone 流式传输到远程服务器

> ID：10622629
> 
> 赞同：0
> 
> 时间：2012-05-16T16:21:35.853
> 
> 标签：iphone, ios, video-streaming, avfoundation, avcapturesession

我正在寻找以下三个项目，在 STACKOVERFLOW 或任何地方都找不到：

1.  用于将 AVFoundation 捕获到准备好压缩的文件块（约 10 秒）的示例代码？

2.  压缩视频和音频以通过 Internet 传输的示例代码？ffmpeg？

3.  HTTP Live Streaming 将文件从 iPhone 发送到 Internet 服务器的示例代码？

我的目标是将 iPhone 用作流式传输到远程服务器的高质量 AV 摄像机。如果中间的数据速率停滞不前，文件应该在 iPhone 上缓冲。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:48:58.387

您可以使用 AVAssetWriter 对所需长度的 MP4 文件进行编码。AV 媒体将被编码到 H264/AAC 的容器中。然后，您可以简单地将其上传到远程服务器。如果您愿意，您可以为 HLS 流式传输视频分段，但请记住，HLS 被设计为服务器->客户端流式传输协议。据我所知，没有推送的概念。您必须创建一个自定义服务器来接受分段视频流的推送（考虑到 HLS 的设计方式，这并没有多大意义。请参阅[RFC Draft](https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-08)。更好的方法可能是简单地上传 MP4（s）通过 TCP 套接字并让您的服务器将视频分段以流式传输到客户端查看器。这可以通过命令行或自定义程序使用 FFmpeg 轻松完成。

我还想补充一点，如果您尝试通过蜂窝连接流式传输 720p 视频，您的应用很可能会因过度使用数据而被拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:19:15.637

使用 AVFoundation 捕获视频和音频。您可以在 AVCaptureformatDescription 中将音频和视频编解码器指定为 kCMVideoCodecType_H264 和 kAudioFormatMPEG4AAC、帧大小、帧速率。它将为您提供压缩的 H264 视频和 AAC 音频。

使用任何 RTP 服务器（如 Live555 Media）将其封装并传输到服务器。

# arrays - 创建一个空的 NSArray

> ID：10622630
> 
> 赞同：5
> 
> 时间：2012-05-16T16:21:38.160
> 
> 标签：arrays, nsmutablearray, initialization, nsarray, declaration

在 CI 中可以简单地声明一个这样的数组：

```
int array[500]; 
```

声明一个大小为 500 的数组，以后可以填充该数组。是否可以在 NSArray 中做同样的事情？我了解 NSMutableArray 有 arrayWithCapacity 类方法来“创建”和空数组（或至少声明要稍后填充的数组）。有没有办法为 NSArray 做类似的事情，因为我知道我想要稍后在“for”循环中填充内容的数组的确切大小。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:30:16.807

从技术上讲，`int array[500];`它不会创建一个空数组 - 它会创建一个充满零的数组。由于s 是不可变的，因此如果您希望以后能够填充它`NSArray`，则需要使用它。`NSMutableArray`

您可以创建一个具有特定容量的数组，然后将对象放入其中，如下所示：

```
NSMutableArray *array = [NSMutableArray arrayWithCapacity:500];
for (int i = 0 ; i != 500 ; i++) {
     [array addObject:@(i)];
} 
```

由于`NSMutableArray`is an `NSArray`，您可以在 as 方法中创建它`NSMutableArray*`，然后将其作为`NSArray*`调用者返回。

# xcode - 如何在 xib 文件中的 XCode 中禁用警告

> ID：10622632
> 
> 赞同：0
> 
> 时间：2012-05-16T16:21:44.230
> 
> 标签：xcode, interface-builder, xcode4.2

我在代码文件中找到了一些答案，但我的警告来自界面生成器，这很愚蠢。

**属性不可用：定义表示上下文在 Xcode 4.2 之前不可用。**

我*正在*使用 Xcode 4.2。为什么我会关心这个警告？很多东西在 Xcode 0.01 中不起作用。这是新项目的第一天，我不想把所有时间都花在违反 no-checking-in-with-warnings 规则上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:26:49.327

选择xib文件；在“实用程序”窗格（右侧）中，在“文件检查器”选项卡下，找到“界面生成器文档”部分；将 Development 属性更改为“Default Version (Interface Builder 4.2)”。

# javascript - 按下后退按钮后需要重定向。如何？

> ID：10622635
> 
> 赞同：0
> 
> 时间：2012-05-16T16:22:07.967
> 
> 标签：javascript, html, back-button

我有一组三个应用程序/脚本。

第一个允许用户选择一个值。该值被传递给第二个脚本，该脚本获取该值、读取数据库并生成 XML，然后立即将其发布到 Eclipse/Java/RAP 应用程序，而无需用户使用 Javascript“onload”进行干预。

加载 RAP 应用程序后，对于用户来说，后退按钮似乎不起作用。后退按钮将用户带到第二个脚本，该脚本获得与第一次相同的值，然后立即再次转发到 RAP 应用程序。

我们希望后退按钮按用户期望的方式工作，即将用户带回到第一个脚本。

由于使用后退按钮提交的信息与第一次传递时完全相同，包括引荐来源网址，所以我能看到的唯一方法是使用 cookie。

是这样吗，还是有更好的方法？

谢谢，

肖恩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:09:36.333

在页面 B 上设置一个 cookie

在页面 A 上，检测 cookie。如果存在，请清除 cookie 然后重定向。

一个问题：页面 A 不知道您是按 BACK 到达那里还是直接导航到那里。如果你能忍受它，它就会起作用。

# c# - 为什么 XmlDocument 在 Windows8 引擎中使用？

> ID：10622636
> 
> 赞同：1
> 
> 时间：2012-05-16T16:22:16.107
> 
> 标签：c#, xml, windows-8, linq-to-xml, xmldocument

我想这`XmlDocument`是不推荐使用的类，我们必须使用它`XDocument`。但是`TileUpdateManager.GetTemplateContent`从 Windows 8 UX 核心返回`XmlDocument`类。一旦它是新的 API，我想知道在这里使用 XmlDocument 的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:00:36.667

XmlDocument 类在 .Net 中有一段时间了，他们可能更愿意保持这种状态。另一个原因可能是多语言支持。

您可以用另一个包装/装饰该功能。有多种方法可以将 XmlDocument 转换为 XDocument

```
 private static XDocument DocumentToXDocument(XmlDocument doc)
  {
    return XDocument.Parse(doc.OuterXml);
  }

  private static XDocument DocumentToXDocumentNavigator(XmlDocument doc)
  {
    return XDocument.Load(doc.CreateNavigator().ReadSubtree());
  }

  private static XDocument DocumentToXDocumentReader(XmlDocument doc)
  {
    return XDocument.Load(new XmlNodeReader(doc));
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:07:22.080

（我使用 XDocument 将 Linq2XML 和 XmlDocument 引用到 System.XML api 的）

我能看到的原因：

1.  XDocument 需要 LINQ，它是 .NET 特定的。Windows 应用商店应用程序也可以用 JavaScript 构建，因此如果您要构建一个 XDocument 以跨 JavaScript 和 .NET 工作，那么您也需要移植 LINQ，现在工程任务非常庞大。
2.  XDocument 以一种功能性的方式处理 XML，这非常不标准——处理 XML 的标准方式是通过 DOM 模型。因此，XmlDocument 提供了一种与它在其他地方工作的方式更加一致的方式。
3.  我猜你认为它们是独立的 API - 当 XDocument 构建在普通 XmlReader 类之上时。因此，除非您完全重写 XmlDocument，否则您将始终需要它 - 重写一些运行良好的东西的价值是什么，以便您可以将它隐藏在新版本中的其他东西中。
4.  虽然对新 API 进行了大量清理和改进，但请记住，它仍然构建在 COM 和我们目前拥有的许多内置 Windows API 之上（这种抽象意味着如果未来发生变化它不会影响我们，但目前它没有直接与内核对话），因此他们很可能正在利用现有的工具和库——它们都是基于 DOM 的，并且更好地与 XmlDocument 保持一致。

# java - 如何从 .class 文件中获取 java.lang.Class 的实例？

> ID：10622637
> 
> 赞同：0
> 
> 时间：2012-05-16T16:22:17.583
> 
> 标签：java, class, java-io

我的问题是如何从给定的 .class 文件中获取 java.lang.Class 的实例？因此，如果我有文件 MyClass.class 和相应的 java.io.File 实例，我如何使用它来获取与 MyClass 对应的 java.lang.Class 实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:26:57.933

`Class<?> clazz = new URLClassLoader(new File("").toURL()).loadClass(className);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T17:08:44.307

您实际上需要一个类加载器来执行此操作（将字节码字节流转换为类）。这里有几个选项。一，您使用标准`URLClassLoader`实例，但这将依赖于您被放置在一个好的java包位置（您将创建`URLClassLoader`文件所在文件路径的根目录。但这仅在目录结构镜像时才有效您尝试加载的类文件的包结构）。

最简单的基类是`SecureClassLoader`允许您在启用了安全管理器的 JVM 中运行代码（iow，您可以设置代码库）

对您来说重要的方法是`findClass`将二进制名称转换为类（您可以在类名和正在加载的文件之间进行自己的映射）。您可以加载文件并将文件的字节传递给最重要的方法：`defineClass`. 这是一种方法`SecureClassLoader`。它需要您的类的二进制名称，`ByteBuffer`以及`CodeSource`（用于 Java 安全性）

要从文件创建缓冲区，请使用：

```
FileInputStream fis = new FileInputStream(yourFileObj)
FileChannel channel = fis.getChannel();
ByteBuffer buffer = channel.map(FileChannel.MapMode.READ_ONLY, 0, clsFile.length()); 
```

你需要一个 `CodeSource`，这样你就可以在安全的环境中使用它，你可能想要使用类似的东西：

```
CodeSource cs = new CodeSource(clsFile.getParent().toURI().toURL(), (CodeSigner[]) null); 
```

然后调用

```
Class<?> aClass = super.defineClass(name, buffer, cs); 
```

希望这能让你走向正确的方向（！）

# c - 使用 C 中的 GLib/GIO 从 Web 获取文件

> ID：10622642
> 
> 赞同：7
> 
> 时间：2012-05-16T16:22:30.360
> 
> 标签：c, url, glib

我应该使用 GLib/GIO 库从 Web 获取文件的功能是什么？

如果我的文件来自：

```
gchar *path = "http://xxx.yyyServer/sharing/temp.txt" 
```

我应该怎么做才能下载它？

对于本地文件，我只使用 fopen 和 fread 等 C 库。

我该怎么做以上？

遗憾的是，教程中没有文件处理的示例。我只能从文件对话框中看到一个文件选择器。

* * *

使用来自评论的工作代码更新：下面的代码适用于未知大小的二进制文件。

```
char *name= http://127.0.0.1:8000/mybinfile

int getFile(char *name)
{

    GFile *f = g_file_new_for_uri(name);
    GFileInputStream *fis = NULL;
    GDataInputStream* dis = NULL;
    GError *err = NULL;
    //char buffer[2048];
    char *buffer;
    size_t length;
    int ret = -1;

    GFileInfo *info;

    int total_size = -1;

    /* get input stream */
    fis = g_file_read(f, NULL, &err);

    if (err != NULL) {
        fprintf(stderr, "ERROR: opening %s\n", name);
        g_object_unref(f);
        return -1;
    }

    info = g_file_input_stream_query_info (G_FILE_INPUT_STREAM (fis),G_FILE_ATTRIBUTE_STANDARD_SIZE,NULL, &err);
    if (info)
    {
        if (g_file_info_has_attribute (info, G_FILE_ATTRIBUTE_STANDARD_SIZE))
            total_size = g_file_info_get_size (info);
            printf( "total_size = %d\n", total_size);
            g_object_unref (info);
    }

    // fill buffer
    if(total_size > 0){
        buffer = (char *) malloc(sizeof(char) * total_size);
        memset(buffer, 0, total_size);
        if ((length = g_input_stream_read (G_INPUT_STREAM(fis),
                    buffer, total_size, NULL, &err)) != -1) {
                printf( "reading file\n");
        }
        printf( "File length = %d\n", length);

            ret = 0;
        }
        // close streams
        g_object_unref(fis);
        g_object_unref(f);   
        return ret;
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T18:29:25.593

HTTP 是 GIO 支持的协议之一，因此当使用 GIO 函数而不是标准 C 函数时，您可以像打开任何其他文件一样打开 HTTP URI。只需用于[`g_file_new_for_uri`](http://developer.gnome.org/gio/stable/GFile.html#g-file-new-for-uri)创建文件对象，然后您就可以像读取本地文件一样读取它。

您可以使用`g_file_read`为给定的 URI`g_data_input_stream_new`获取 GFileInputStream，然后为输入流获取 GDataInputStream，然后您可以使用它来逐行读取文件。您必须先将 GFileInputStream 向上转换为 GInputStream，然后才能将其传递给`g_data_input_stream_new`（或在您可以对它做任何其他有用的事情之前），但如果您正在用 C 语言编写 GTK，那么您现在可能已经习惯了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T16:40:10.947

我和你一样是 GTK 的菜鸟（也许更多），但我怀疑没有“单指令”方式来下载 C/C++ 文件。您必须使用外部工具（wget 等）或自己编写 GET 程序。[这](https://stackoverflow.com/questions/1636333/download-file-using-libcurl-in-c-c)是一个使用 libcurl 用 C 语言下载文件的示例。祝你好运！

# java - Android 浏览器不适用于地理定位

> ID：10622645
> 
> 赞同：5
> 
> 时间：2012-05-16T16:22:34.020
> 
> 标签：java, php, android, browser, geolocation

我正在建立一个使用地理位置代码的网站，它假设加载 mapCanvas 并在用户点击“找到我！”后 按钮获取他的位置并根据用户位置设置地图中心。它在 Firefox、Chrome、Safari 上运行良好，在普通 PC 和 iPhone 上进行了测试，唯一不兼容的设备是任何搭载 Android 的手机。这是一个代码：

```
<script src="http://maps.google.com/maps?file=api&v=3&key=YourKey" 
       type="text/javascript"></script>
<script type="text/javascript">
    //<![CDATA[

    var iconBlue = new GIcon(); 
    iconBlue.image = 'http://labs.google.com/ridefinder/images/mm_20_blue.png';
    iconBlue.shadow = 'http://labs.google.com/ridefinder/images/mm_20_shadow.png';
    iconBlue.iconSize = new GSize(17, 25);
    iconBlue.shadowSize = new GSize(1, 1);
    iconBlue.iconAnchor = new GPoint(6, 20);
    iconBlue.infoWindowAnchor = new GPoint(5, 1);

    var iconRed = new GIcon(); 
    iconRed.image = 'http://labs.google.com/ridefinder/images/mm_20_red.png';
    iconRed.shadow = 'http://labs.google.com/ridefinder/images/mm_20_shadow.png';
    iconRed.iconSize = new GSize(17, 25);
    iconRed.shadowSize = new GSize(1, 1);
    iconRed.iconAnchor = new GPoint(6, 20);
    iconRed.infoWindowAnchor = new GPoint(5, 1);

    var customIcons = [];
    customIcons["restaurant"] = iconBlue;
    customIcons["bar"] = iconRed;

    function load() {
      if (GBrowserIsCompatible()) {
        var map = new GMap2(document.getElementById("map_canvas"));
        map.setCenter(new GLatLng(50.061795,19.936924), 16);

        // Change this depending on the name of your PHP file
        GDownloadUrl("Your_xml.php", function(data) {
          var xml = GXml.parse(data);
          var markers = xml.documentElement.getElementsByTagName("marker");
          for (var i = 0; i < markers.length; i++) {
            var name = markers[i].getAttribute("name");
            var address = markers[i].getAttribute("address");
            var type = markers[i].getAttribute("type");
            var point = new GLatLng(parseFloat(markers[i].getAttribute("lat")),
                                    parseFloat(markers[i].getAttribute("lng")));
            var marker = createMarker(point, name, address, type);
            map.addOverlay(marker);
          }
        });
      }
    }

    function createMarker(point, name, address, type) {
      var marker = new GMarker(point, customIcons[type]);
      var html = "<b>" + name + "</b> <br/>" + address;
      GEvent.addListener(marker, 'click', function() {
        marker.openInfoWindowHtml(html);
      });
      return marker;
    }
    //]]>

function findLoc(){
if (!navigator.geolocation) {
alert('Sorry, your browser does not support Geo Services');
}
else {
// Get the current location    
navigator.geolocation.getCurrentPosition(showMap);
}
}
function showMap(position){
var lat = position.coords.latitude;
var lon = position.coords.longitude;
var myPoint = new GLatLng(lat, lon);
var map = new GMap2(document.getElementById("map_canvas"));
map.setCenter(myPoint, 15);
GDownloadUrl("Your_xml.php", function(data) {
          var xml = GXml.parse(data);
          var markers = xml.documentElement.getElementsByTagName("marker");
          for (var i = 0; i < markers.length; i++) {
            var name = markers[i].getAttribute("name");
            var address = markers[i].getAttribute("address");
            var type = markers[i].getAttribute("type");
            var point = new GLatLng(parseFloat(markers[i].getAttribute("lat")),
                                    parseFloat(markers[i].getAttribute("lng")));
            var marker = createMarker(point, name, address, type);
            map.addOverlay(marker);

}
       });

function createMarker(point, name, address, type) {
      var marker = new GMarker(point, customIcons[type]);
      var html = "<b>" + name + "</b> <br/>" + address;
      GEvent.addListener(marker, 'click', function() {
        marker.openInfoWindowHtml(html);
      });
      return marker;
    }
} 
```

我找不到任何解决方案让它工作。PS 没有任何错误或陈述给出任何提示，使其更易于理解。设备启用了 GPS。请帮助我已经尝试了 2 周

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:33:06.587

恐怕你面前只有一个艰巨的老式调试。我的方法是在代码的各个重要点（例如，在调用之前和之后`getCurrentPosition`，以及在开头`showMap`）添加可见输出，并从那里缩小发生故障的位置。一旦你知道什么是失败的，你可能会想出一个为什么，但直到你知道你在黑暗中挣扎。

（我开发了一个支持 Android 的基于地理位置的移动网络应用程序，所以如果你需要任何保证，你的情况本质上没有什么不可能的。）

# java - 如何在 JTable 下放置 JButton？

> ID：10622646
> 
> 赞同：1
> 
> 时间：2012-05-16T16:22:43.850
> 
> 标签：java, swing, jtable, jbutton, layout-manager

如何将 a 定位在 a`JButton`下`JTable`？什么样的布局？如何？我有一个`JTable`可滚动的表格，表格位于框架中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:43:08.010

有许多布局可以满足这一需求。

最简单的是使用 BorderLayout：

```
JFrame frame = new JFrame();
Container contentPane = frame.getContentPane();
contentPane.setLayout(new BorderLayout());
contentPane.add(new JScrollPane(jtable), BorderLayout.CENTER);
contentPane.add(button, BorderLayout.SOUTH); 
```

如果您不想调整此按钮的大小，只需添加`JPanel`到`contentPane`. 这`JPanel`应该包含使用几乎任何布局居中的按钮。

如果您想使用更复杂的布局 - 我认为最好的是[MigLayout](http://www.miglayout.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T16:39:01.790

为了纠正 LoveToCode 的善意但具有误导性的建议，您永远不会想给 JTable 本身一个布局。您的问题的解决方案不是设置 JTable 的布局，而是设置 JPanel 的布局，该 JPanel 包含 JTable 的 JScrollPane 和 JButton。BorderLayout 可能最适合放置在放置 BorderLayout.CENTER 的 JScrollPane 和包含 JButton BorderLayout.SOUTH 的 JPanel。

请注意，如果您将这些组件添加到 JFrame，那么要知道它的 contentPane 已经使用了 BorderLayout（教程会告诉您这一点——请阅读它们）。因此，只需将这些人添加到 contentPane 中，如上所述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T16:41:41.903

如果 swing 和 awt 的硬编码不是强制性的，请尝试使用 WindowsBuilder Pro，现在来自 google 的免费工具，将其插件安装到 eclipse，然后使用

GroupLayout - 由 NetBeans 团队于 2005 年推出，集成在 WindowsBuilder Pro 中，是在 Java 中用更少的时间创建良好 gui 的最方便的方法之一。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-16T16:30:36.643

似乎您可以像设置 jframe 或 jpane 的布局一样设置 jtable 的布局： table.setLayout(new grideLayout(4, 3) 会给它一个 4 行和 3 的网格布局列。可滚动功能允许您使用移动条“滚动”表格。这可能是默认功能，也可能是您必须使用的功能，请尝试查看表格为您提供的方法。最后，您的表格应该放在一个框架中，这样您就可以在窗口上查看它，让您的类扩展 JFrame，它将自动成为一个框架，您可以在其上简单地添加一个表格！

# android - 在自定义 ListView 适配器中获取 NullPointerException

> ID：10622656
> 
> 赞同：0
> 
> 时间：2012-05-16T16:23:22.943
> 
> 标签：android, listview, jakarta-mail, custom-adapter

我得到 NullPointerException `lv.setAdapter(adapter)`。我不明白，我更改了适配器中的一些代码，但后来我删除了它们。然后开始这个异常。

在 kimdenlistduzeltilmis 中：4 值

![在此处输入图像描述](../Images/98611857fe6322eefee68001b728e5ee.png)

在 konulist 中：4 值

![在此处输入图像描述](../Images/a09f85b235348bdde6b3cf0cf77104df.png)

```
final LayoutInflater mLInflater = getLayoutInflater();
        final ListViewAdapter adapter = new ListViewAdapter(
                getApplicationContext(), kimdenlistduzeltilmis, konulist,
                mLInflater);
        lv.setAdapter(adapter);
        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View item,
                    int position, long id) {
                // adapter.Refresh();
                onClickPosition = position;
                try {
                    EkDurumu ekdurumuNesnesi = new EkDurumu();
                    ekdurumuNesnesi.MessagePositionEkBulunuyormu(
                            onClickPosition, goruntuleNesnesi.getMessages());

                } catch (Exception e) {
                    e.printStackTrace();
                } 
```

和 ListViewAdapter：

```
import java.util.ArrayList;
import java.util.HashMap;

import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.CompoundButton.OnCheckedChangeListener;

public class ListViewAdapter extends BaseAdapter {
    static HashMap<Integer, Boolean> cartItems = new HashMap<Integer, Boolean>();
    Context mContext;
    ArrayList<String> kimdenlist; // to load images
    ArrayList<String> konulist; // for data
//  ArrayList<String> imagelist;
    LayoutInflater mLayoutInflater;

    public ListViewAdapter(Context context, ArrayList<String> kimdenlist, ArrayList<String> konulist,
            LayoutInflater layoutInflater) {
        mContext = context;
        this.kimdenlist = kimdenlist;
        this.konulist = konulist;
        mLayoutInflater = layoutInflater;
    }

    @Override
    public int getCount() 
    {
        return konulist.size(); // images array length
    }

    @Override
    public Object getItem(int arg0) {

        return null;
    }

    @Override
    public long getItemId(int arg0) {

        return 0;
    }

    int count = 0;

    // customized Listview
    @Override
    public View getView(int position, View arg1, ViewGroup arg2) {

        View v;
        final int pos = position;
        v = mLayoutInflater.inflate(R.layout.listust, null);

        TextView kimden = (TextView) v.findViewById(R.id.textvKimden);
        kimden.setText(kimdenlist.get(position));
        TextView konu = (TextView) v.findViewById(R.id.textvKonu);
        konu.setText(konulist.get(position));

//      // saving check box state at the time of raloading
        CheckBox ch = (CheckBox) v.findViewById(R.id.chk);
        try {
            if (count != 0) {
                boolean b = cartItems.get(pos);
                if (b == false)
                    ch.setChecked(false);
                else
                    ch.setChecked(true);
            }
        } catch (NullPointerException e) {

        }

        ch.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
                cartItems.put(pos, arg1);
                count++;

            }
        });
        return v;
    }

    public static HashMap<Integer, Boolean> getcartItems() {
        return cartItems;
    }

    public void Remove()
       {
        notifyDataSetChanged();
       }

} 
```

还有我的 Logcat：

```
05-16 16:13:12.962: E/AndroidRuntime(347): FATAL EXCEPTION: main
05-16 16:13:12.962: E/AndroidRuntime(347): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mobil.eposta/com.mobil.eposta.ListeleActivity}: java.lang.NullPointerException
05-16 16:13:12.962: E/AndroidRuntime(347):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
05-16 16:13:12.962: E/AndroidRuntime(347):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-16 16:13:12.962: E/AndroidRuntime(347):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-16 16:13:12.962: E/AndroidRuntime(347):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-16 16:13:12.962: E/AndroidRuntime(347):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-16 16:13:12.962: E/AndroidRuntime(347):  at android.os.Looper.loop(Looper.java:123)
05-16 16:13:12.962: E/AndroidRuntime(347):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-16 16:13:12.962: E/AndroidRuntime(347):  at java.lang.reflect.Method.invokeNative(Native Method)
05-16 16:13:12.962: E/AndroidRuntime(347):  at java.lang.reflect.Method.invoke(Method.java:521)
05-16 16:13:12.962: E/AndroidRuntime(347):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-16 16:13:12.962: E/AndroidRuntime(347):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-16 16:13:12.962: E/AndroidRuntime(347):  at dalvik.system.NativeStart.main(Native Method)
05-16 16:13:12.962: E/AndroidRuntime(347): Caused by: java.lang.NullPointerException
05-16 16:13:12.962: E/AndroidRuntime(347):  at com.mobil.eposta.ListeleActivity.onCreate(ListeleActivity.java:109)
05-16 16:13:12.962: E/AndroidRuntime(347):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-16 16:13:12.962: E/AndroidRuntime(347):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-16 16:13:12.962: E/AndroidRuntime(347):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:29:04.670

看起来您的 ListView 为空。尝试添加

```
lv = (ListView) findViewById(R.id.whatever_id_you_gave_your_listview); 
```

在调用 setAdapter() 之前

# .net - winforms 命名空间顺序 - 命名空间“AAA.System”中不存在“Security”

> ID：10622658
> 
> 赞同：0
> 
> 时间：2012-05-16T16:23:31.687
> 
> 标签：.net, winforms, visual-studio, visual-studio-2010

我有一个名为 AAA.System 的项目，其中包含一些简单的基本功能，可供我们所有其他项目共享。这已经存在了大约 5 年左右，我们有许多引用它的项目都运行良好。

现在，我正在创建一个新项目（WCF 服务），但在命名空间解析方面遇到了一些问题。具体来说，我有这些用途：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.IO;
using System.Configuration;
using System.Configuration.Install;
using System.Reflection;
using System.ServiceModel;
using System.ServiceProcess;
using System.Text;
using System.Threading;
using System.Xml; 
```

在某些时候，我有这行代码：

```
string fqdn = System.Net.Dns.GetHostName(); 
```

这是产生错误：

`The type or namespace name 'Net' does not exist in the namespace 'AAA.System' (are you missing an assembly reference?)`

因此，视觉工作室（2010）似乎以某种方式试图解决`AAA.System.Net.Dns.GetHostName()`而不是`System.Net.Dns.GetHostName()`，但我没有任何使用语句表明使用`AAA.System`. 我在这里缺少什么指示编译器使用 AAA.System？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:25:40.040

您正在调用以下行的类的名称空间是否设置为`AAA`？

```
string fqdn = System.Net.Dns.GetHostName(); 
```

例如

```
namespace AAA
{
    static void M()
    {
        string fqdn = System.Net.Dns.GetHostName(); 
    }
} 
```

要修复它，您应该能够在该行前加上`global::`.

```
string fqdn = global::System.Net.Dns.GetHostName(); 
```

或者只是`System.Net`使用指令添加到您

# .net - 系统配置.dll。是 2.0 还是 3.5 框架的一部分？

> ID：10622660
> 
> 赞同：1
> 
> 时间：2012-05-16T16:23:34.307
> 
> 标签：.net

我有一个 .NET 3.5 C# 控制台应用程序。我需要阅读 App.Config。当我去设置对 system.Configuration.dll 的引用时，我看到即使我的应用程序被编译为 Framework 的 3.5 版，Add Ref 对话框也只显示了 2.0 版的 dll。

所以我在下面找到了dll：

C:\Program Files\Reference Assemblies\Microsoft\Framework.NETFramework\v3.5\Profile\Client

我决定尝试直接设置对这个 3.5 dll 的引用。完成此操作后，我的项目最终得到了 2.0 版本。

到底是怎么回事？我认为如果一个应用程序是针对特定版本的框架编译的，那么作为框架一部分的所有 dll 都来自同一个版本。好像我在混合版本。我想我可以同时从旧版本的框架访问 dll 并不太惊讶，但是如果 3.5 文件夹中有更新的版本，为什么不使用它呢？或者这真的是放在 3.5 文件夹中的 2.0 dll 吗？

![在此处输入图像描述](../Images/2da731a726826a404c9a32155e58e269.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:47:57.670

System.Configuration.dll 来自框架的 v2.0。您找到的位置中的文件仍然与 .NET 2.0 文件相同，但它只是作为 3.5 客户端配置文件的打包组件存在（客户端配置文件只是完整 .NET 的精简版）。

.NET 3.5 版只是 2.0 版的一组扩展，因为它在 2.0 CLR 上运行，因此实现了来自 .NET 框架的 DLL 的 2.0、3.0 和 3.5 版本。System.Configuration.dll 中的类是引入的，并且仍然来自框架的 2.0 版本，因此 DLL 本身将始终为 2.0.0.0

有关更多详细信息：[http ://en.wikipedia.org/wiki/.NET_Framework_3.5#.NET_Framework_3.5](http://en.wikipedia.org/wiki/.NET_Framework_3.5#.NET_Framework_3.5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:48:09.083

.NET 3.5 基于 .NET 2.0 运行时，这意味着许多程序集仍然是 2.0。

这个是正常的。

# java - Java - 超类/子类

> ID：10622665
> 
> 赞同：0
> 
> 时间：2012-05-16T16:23:46.610
> 
> 标签：java, subclass, superclass

这里有个小问题：

```
public class Item extends ItemManufacturer
{
// Attributes
private String itemcode;
private String itemname;
private String description;
private String style;
private String finish;
private float  unitprice;
private float  stock;

public void item(String suppliercodeIn, String suppliernameIn, String addressIn, String itemcodeIn, String itemnameIn, String descriptionIn, 
            String styleIn, String finishIn, float unitpriceIn, float stockIn)
  {
       super ( suppliercodeIn, suppliernameIn, addressIn );

       itemcode = itemcodeIn;
       itemname = itemnameIn;
       description = descriptionIn;
       style = styleIn;
       finish = finishIn;
       unitprice = unitpriceIn;
       stock = stockIn;
  } 
```

我收到以下错误消息：

> 调用 super 必须是构造函数中的第一条语句。

有人愿意帮我解决这个问题吗？

在玩弄这些课程之后，我遇到了一个额外的错误。

```
// Create a Item oject
Item item = new Item(); 
```

我正在使用一个名为 items 的数据库和 item 的表名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:25:47.133

这就是问题：

```
public void item(...) 
```

这不是`Item`类的构造函数——它是一个名为`item`. 它应该是：

```
public Item(...) 
```

请注意，Java 区分大小写，并且构造函数没有声明的返回类型；它*只是*可访问性，后跟类的名称，然后是参数列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T16:25:22.223

我怀疑一个错字。`Item`你的构造函数不应该被调用`item`。（并且构造函数不返回任何东西，甚至不返回`void`。）

至于`new`表达式：您需要在创建新实例时传入所有这些参数`Item`。

```
Item item = new Item("234SD23", "SuperSupplier", "21 SO Drive", ...); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T16:34:16.290

读这个，

1.  如果没有错字，并且 item 是一个方法，那么 super() 将不起作用。你需要做 super.item();

2.  如果有错别字，并且它的 Item 不是 item，那么将没有返回类型，

    例如：

    ```
    public Item (String suppliercodeIn, String suppliernameIn, String addressIn,
        String itemcodeIn, String itemnameIn, String descriptionIn, 
        String styleIn, String finishIn, float unitpriceIn, float stockIn){

    } 
    ```

# c# - 如何在 Windows Phone 芒果上进行地理围栏

> ID：10622666
> 
> 赞同：1
> 
> 时间：2012-05-16T16:23:49.487
> 
> 标签：c#, windows-phone-7, geofencing

有人可以帮助我或分享一些关于如何在 Windows Phone Mango 上实现 GeoFencing 的代码。

我有 GeoPositions 列表（纬度和经度），在每次位置更新时，我都想验证当前位置是否在我们称为 GeoFencing 的列表中，但我想在本地进行而不接触任何 WebService 等...所以我想知道有没有可能...

我也想在不阻塞主 UI 线程的情况下实现这一点。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:04:44.217

在 Microsoft 示例表单中，Tidy 应用程序（Mango 示例的一部分） - 在 Todo.DataAccess 项目中，`GeoCodeDistanceCalc`静态类计算一对坐标之间的距离：

```
return radius * 2 * Math.Asin(Math.Min(1, Math.Sqrt((Math.Pow(Math.Sin((DiffRadian(lat1, lat2)) / 2.0), 2.0) + Math.Cos(ToRadian(lat1)) * Math.Cos(ToRadian(lat2)) * Math.Pow(Math.Sin((DiffRadian(lng1, lng2)) / 2.0), 2.0))))); 
```

（其中半径是地球的半径，以您想要的任何单位计算）

对于多边形方法中的点，有[一篇关于该主题的完整 Wikipedia 文章](http://en.wikipedia.org/wiki/Point_in_polygon)，但在过去，我发现光线投射算法实现起来相对简单。

# python - 缺少 Python.h 标头

> ID：10622668
> 
> 赞同：4
> 
> 时间：2012-05-16T16:23:54.677
> 
> 标签：python, c, gcc, header-files

我试图弄清楚如何在 C ( [http://docs.python.org/extending/extending.html](http://docs.python.org/extending/extending.html) ) 中编译 Python 模块，但 Python.h 头文件似乎丢失了。

我已经安装了所有的 python 开发头文件（我有 Python-dev、python2.7-dev、python2.6-dev、python-all-dev），但是 gcc 仍然重新输入错误：

```
fatal error: Python.h: No such file or directory

compilation terminated. 
```

知道我在哪里出错了吗？还有一个我需要为 Python.h 添加到 gcc 的参数（它是什么？）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T16:28:40.117

您需要使用`python-config`来确定编译时间和链接时间标志。

编译时：

```
gcc -c `python-config --cflags` somefile.c 
```

链接时：

```
gcc -o libfoo.so -shared `python-config --ldflags` 
```

尽管您确实应该考虑使用 distutils，如使用 distutils[构建 C 和 C++ 扩展中所述](http://docs.python.org/extending/building.html)

# c# - 动态创建图表。在 .net 中，c#

> ID：10622674
> 
> 赞同：35
> 
> 时间：2012-05-16T16:24:19.410
> 
> 标签：c#, .net, winforms, charts

有人有使用图表的经验`.NET`吗？特别是我想以编程方式创建它们。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Windows.Forms.DataVisualization.Charting;
using System.Diagnostics;

namespace WindowsFormsApplication6
{
  public partial class Form1 : Form
  {
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        Random rnd = new Random();
        Chart mych = new Chart();
        mych.Series.Add("duck");

        mych.Series["duck"].SetDefault(true);
        mych.Series["duck"].Enabled = true;
        mych.Visible = true;

        for (int q = 0; q < 10; q++)
        {
            int first = rnd.Next(0,10);
            int second = rnd.Next(0,10);
            mych.Series["duck"].Points.AddXY(first, second);
            Debug.WriteLine(first + "  " + second);
        }
        mych.Show();
        Controls.Add(mych);
        mych.Show();
    }
  }
} 
```

我正在尝试使用`.NET (.net 4, Visual Studio 2010)` [chart](https://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting(v=vs.110).aspx)，但随机生成的数据集没有出现。图表仍然是空白的。我搜索了示例，只找到了这样的示例 [，](http://codeabout.wordpress.com/2011/05/15/easy-way-to-plot-graphs-in-c-and-visual-studio-2010/)并且，是的，使用手动“拖动”方法它可以工作。我不知道为什么我以编程方式生成的数据没有出现。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-16T18:10:03.943

是的。

```
// FakeChart.cs
// ------------------------------------------------------------------
//
// A Winforms app that produces a contrived chart using
// DataVisualization (MSChart).  Requires .net 4.0.
//
// Author: Dino
//
// ------------------------------------------------------------------
//
// compile: \net4.0\csc.exe /t:winexe /debug+ /R:\net4.0\System.Windows.Forms.DataVisualization.dll FakeChart.cs
//

using System;
using System.Windows.Forms;
using System.Windows.Forms.DataVisualization.Charting;

namespace Dino.Tools.WebMonitor
{
    public class FakeChartForm1 : Form
    {
        private System.ComponentModel.IContainer components = null;
        System.Windows.Forms.DataVisualization.Charting.Chart chart1;

        public FakeChartForm1 ()
        {
            InitializeComponent();
        }

        private double f(int i)
        {
            var f1 = 59894 - (8128 * i) + (262 * i * i) - (1.6 * i * i * i);
            return f1;
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            chart1.Series.Clear();
            var series1 = new System.Windows.Forms.DataVisualization.Charting.Series
            {
                Name = "Series1",
                Color = System.Drawing.Color.Green,
                IsVisibleInLegend = false,
                IsXValueIndexed = true,
                ChartType = SeriesChartType.Line
            };

            this.chart1.Series.Add(series1);

            for (int i=0; i < 100; i++)
            {
                series1.Points.AddXY(i, f(i));
            }
            chart1.Invalidate();
        }

        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        private void InitializeComponent()
        {
            this.components = new System.ComponentModel.Container();
            System.Windows.Forms.DataVisualization.Charting.ChartArea chartArea1 = new System.Windows.Forms.DataVisualization.Charting.ChartArea();
            System.Windows.Forms.DataVisualization.Charting.Legend legend1 = new System.Windows.Forms.DataVisualization.Charting.Legend();
            this.chart1 = new System.Windows.Forms.DataVisualization.Charting.Chart();
            ((System.ComponentModel.ISupportInitialize)(this.chart1)).BeginInit();
            this.SuspendLayout();
            //
            // chart1
            //
            chartArea1.Name = "ChartArea1";
            this.chart1.ChartAreas.Add(chartArea1);
            this.chart1.Dock = System.Windows.Forms.DockStyle.Fill;
            legend1.Name = "Legend1";
            this.chart1.Legends.Add(legend1);
            this.chart1.Location = new System.Drawing.Point(0, 50);
            this.chart1.Name = "chart1";
            // this.chart1.Size = new System.Drawing.Size(284, 212);
            this.chart1.TabIndex = 0;
            this.chart1.Text = "chart1";
            //
            // Form1
            //
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(284, 262);
            this.Controls.Add(this.chart1);
            this.Name = "Form1";
            this.Text = "FakeChart";
            this.Load += new System.EventHandler(this.Form1_Load);
            ((System.ComponentModel.ISupportInitialize)(this.chart1)).EndInit();
            this.ResumeLayout(false);
        }

        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new FakeChartForm1());
        }
    }
} 
```

用户界面：

![在此处输入图像描述](../Images/a7e180ef64fde868f5b379cd6ddd1175.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T20:25:43.343

微软有一个不错的图表控件。[在这里](http://www.microsoft.com/en-us/download/details.aspx?id=14422)下载。很棒的视频在[这里](http://www.youtube.com/watch?v=bRnUAwUFIgY)。示例代码在[这里](http://blogs.msdn.com/b/alexgor/archive/2009/02/21/data-binding-ms-chart-control.aspx)。快乐编码！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-16T17:24:19.863

添加对 的引用`System.Windows.Form.DataVisualization`，然后添加适当的 using 语句：

```
using System.Windows.Forms.DataVisualization.Charting;

private void CreateChart()
{
    var series = new Series("Finance");

    // Frist parameter is X-Axis and Second is Collection of Y- Axis
    series.Points.DataBindXY(new[] { 2001, 2002, 2003, 2004 }, new[] { 100, 200, 90, 150 });
    chart1.Series.Add(series);

} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-06T16:19:17.210

尝试在您的代码中包含这些行，之后`mych.Visible = true;`：

```
ChartArea chA = new ChartArea();
mych.ChartAreas.Add(chA); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T18:16:39.660

您需要将`Form1_Load`处理程序附加到`Load`事件：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Windows.Forms.DataVisualization.Charting;
using System.Diagnostics;

namespace WindowsFormsApplication6
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            Load += Form1_Load;
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            Random rnd = new Random();
            Chart mych = new Chart();
            mych.Height = 100;
            mych.Width = 100;
            mych.BackColor = SystemColors.Highlight;
            mych.Series.Add("duck");

            mych.Series["duck"].SetDefault(true);
            mych.Series["duck"].Enabled = true;
            mych.Visible = true;

            for (int q = 0; q < 10; q++)
            {
                int first = rnd.Next(0, 10);
                int second = rnd.Next(0, 10);
                mych.Series["duck"].Points.AddXY(first, second);
                Debug.WriteLine(first + "  " + second);
            }

            Controls.Add(mych);
        }
    }
} 
```

# iphone - 用户注销时如何使用 NSUserDefaults 和 UIApplicationWillTerminateNotification 存储应用程序的当前状态？

> ID：10622675
> 
> 赞同：0
> 
> 时间：2012-05-16T16:24:22.060
> 
> 标签：iphone, ios, nsuserdefaults

我需要使用**UIApplicationWillTerminateNotification**和**NSUserDefaults**存储应用程序的当前状态，当用户从应用程序注销时，我需要加载具有先前状态的应用程序。我的应用程序是一个基于 TabBar 的应用程序，而它又是一个导航控制器。我需要存储加载在导航控制器中的当前视图控制器和导航控制器所在的当前选项卡。我的应用程序适用于不同的用户，我需要存储特定于用户的应用程序状态。所以，我也需要存储用户数据。我在 StackOverflow 中搜索并用 Google 搜索发现我们需要使用类似**NSUserDefaults**和**UIApplicationWillTerminateNotification**也是必要的。这是我第一次遇到这些东西。有人可以发布一些关于如何完成我的要求的教程或任何示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:42:36.007

您可以自己注册通知（请参阅 NSNotificationCenter）并在那里编写您的保存/加载代码，或者您可以将您的代码放在提供这些挂钩的 AppDelegate 中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions;
- (void)applicationWillResignActive:(UIApplication *)application;
- (void)applicationDidEnterBackground:(UIApplication *)application;
- (void)applicationWillEnterForeground:(UIApplication *)application;
- (void)applicationDidBecomeActive:(UIApplication *)application;
- (void)applicationWillTerminate:(UIApplication *)application; 
```

查看 AppDelegate.m 文件，您可以看到存根实现以及一些关于如何使用它们的文档。

在那里，您只需根据需要将数据写入 NSUserDefaults 并从中读取。

```
// Store the data
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:fooObject forKey:@"Foo"];
[defaults setObject:barObject forKey:@"Bar"];
[defaults synchronize];

// Load the data
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *fooObject = [defaults objectForKey:@"Foo"];
NSString *barObject = [defaults objectForKey:@"Bar"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:46:42.023

我假设你知道`NSUserDefaults`. 对于此特定任务，您只需要保存状态：

1.  标签栏控制器 - 获取`selectedIndex`当前标签并将其保存在 userDefaults 中。

2.  该选项卡的 NavigationController - 如您所知，导航控制器只不过是其中的视图控制器`navigationArray`。您只需要获取该`index`视图控制器的 ，并将其存储在`userDefaults`.

差不多就是这样。您将需要将它们（以及其他用户未保存的数据）保存在`UIApplicationWillTerminate`应该保存它们的位置。请记住`synchronize`userDefaults 强制保存。:)

# php - 如何在我的模型中避免样板代码？

> ID：10622679
> 
> 赞同：1
> 
> 时间：2012-05-16T16:24:30.040
> 
> 标签：php, codeigniter, orm, model

我正在使用 CI，但是这个问题通常适用于模型和数据库持久性。我发现自己在以下模型中创建方法：-

```
private function create_joins() {
  # Add some joins to the global db object using the active record 
} 
```

我这样做是为了随后可以为特定模型执行通用连接，而无需复制用于创建连接的代码。

所以一个选择方法可能是： -

```
public function get_by_id($id) {

    $this->db->select('some_cols');
    $this->db->from('some_table');
    $this->create_joins();
    $this->db->where(array('id' => $id));
    etc...
} 
```

这很好，但我想知道这是否是像数据映射器这样的 ORM 可以抽象出来的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:50:12.910

你应该试试[Doctrine](http://www.doctrine-project.org/)，它是 PHP 中最先进的 ORM 之一：

使用 Doctrine，您甚至不必`get_by_id($id)`在模型中编写方法：它们由 Doctrine 本身处理。所以你可以写：

```
$entityManager->find("Bug", $id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:07:32.137

另一种方法是通过[sparks](http://getsparks.org/packages/php-activerecord/versions/HEAD/show)使用[php-activerecord](http://www.phpactiverecord.org/)

**协会的一个例子** -

```
class User extends ActiveRecord\Model{

    //set tablename 
    //I would advice to keep Model singular and table names plural
    //then this next step is not needed
    static $table_name = 'table_one';

    //set relationships
    static $belongs_to array(
        array('Group')
    );

    static $has_many = array(
       array('Comment'),
       array('Order')
    );

    static $has_one = array(
       array('Additional_Info')
    );

    //one key feature is callbacks
    //this helps keep controllers clean by letting you pass
    //the post data(after validation) in to modify(serialize,json_encode,calculate vat etc) 

    static $before_create = array('json_encode_my_tags');

    public function json_encode_my_tags(){
        //$this->tags === $this->input->post('tags');
        $tags = explode(',', str_replace(' ', '', $this->tags));
        return $this->tags = json_encode($tags, TRUE);
    }
}

//calling a model and using eager-loading for associations
$model = User::find(array(
    'conditions'    =>    array('id=?', $id) // PK Primary key
    'include'       =>   array('comment', 'order', 'additional_info') // eager-loading associations
)); 

$model->key;
$model->comment->key;
$model->additional_info->key;
$model->order->key; 
```

# java - JDBC sql请求压缩

> ID：10622687
> 
> 赞同：0
> 
> 时间：2012-05-16T16:25:12.177
> 
> 标签：java, sql, jdbc

在我的应用程序中，我只有一个 sql 请求（一个 SELECT 或一个 UPDATE，...）。该请求可以执行一次并通过网络。是否有任何方法或技术可以使其优化或运行得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:59:29.503

使用网络的应用程序存在两个问题。一个，也许是唯一重要的一个，是网络转数，另一个是网络数据的大小。第一个处理请求和响应往返的端到端延迟，以及客户端在从服务器获得答案之前不会转到下一行代码。另一个处理发送的字节数和吞吐量。

最大的问题是网络转向。发送一个 30 字节的数据包所用的时间与发送一个 1400 字节的数据包所用的时间差不多。很多时候会交换很多小的（80 到 300 字节）数据包。

因此，该技术是减少网络匝数。如果有异步 api 并且可以，请使用它。尝试将查询组合成一个复杂的查询，而不是许多简单的查询。如果您可以将结果合并到一个查询中，则尤其要避免执行循环并在循环中执行查询。

此外，在您的表上使用索引，并确保您的查询有适当的索引可供使用。

# java - 什么时候需要在检票口中使用 LDM？

> ID：10622692
> 
> 赞同：3
> 
> 时间：2012-05-16T16:25:30.567
> 
> 标签：java, apache, web, wicket

我一直在阅读有关调整检票口会话大小的信息，我发现建议使用 LoadableDetachableModel 不要让模型永远存在。属性模型（Property 和 PropertyCompoundModel）这么贵吗？

何时使用 LDM 或属性模型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T03:39:23.933

如果您使用来自数据库的数据，几乎总是最好使用 a `LoadableDetachableModel`，以便仅序列化重新加载所需的 id。

`PropertyModel`并且`CompoundPropertyModel`可以包装模型并使其更易于在表单中使用，但减少序列化到会话中的成本的主要方法是使用`LoadableDetachableModel`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T10:13:20.917

它始终取决于您要达到的目标。因此，了解成本是多少很重要。

在请求之间，Wicket 通常会序列化您的页面对象及其引用的所有内容。这包括页面上的所有组件以及它们的所有模型。唯一不会发生这种情况的是页面是[无状态](https://cwiki.apache.org/WICKET/stateless-pages.html)的。

大多数模型实现都包含对底层模型对象的非瞬态引用，因此如果您的模型包含对大对象的引用并且页面不是无状态的，则会导致序列化时间的开销，更重要的是，会议。

`LoadableDetachableModel`工作方式不同，它只包含对底层模型对象的临时引用，因此当它被序列化时，模型对象不是。这样做的缺点是您必须为每个请求重建模型对象。

所以你的问题真的是这样的：使用传统模型的成本是否超过了成本`LoadableDetachableModel`？如前所述，如果您的模型对象来自数据库，则几乎总是值得使用 LDM。

您必须记住的另一件事（也是 LDM 支持的一个强有力的论点）是模型可以被链接。因此，您仍然可以使用`CompoundPropertyModel`由 LDM 支持的 a。

# c# - 处理不支持的类型

> ID：10622694
> 
> 赞同：1
> 
> 时间：2012-05-16T16:25:38.427
> 
> 标签：c#, exception-handling

我正在创建一个数据数组：

`var data = new Data[] { 1, "string", true, //.. }; //In this case, assume that strings and booleans are supported types, but integers are not.`

当我存储这组数据时，它会通过一系列`if`语句来存储数据：

```
if (data is string) StoreData(data as string);
else if (data is boolean) StoreData(data as boolean);
//.. 
```

因为不支持整数，所以我希望我的代码能够适当地处理它（无论是日志记录等）。但是，我希望仍然能够存储第二、第三等支持的类型。

**更新**：即使找到不受支持的类型，我也希望代码继续运行，因为可能有后续支持的类型要存储。

我将如何处理不受支持的类型，然后存储后续支持的类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:30:38.903

我会使用隐式运算符将支持的类型转换为您的 Data 类。为支持的任何数据类型添加隐式运算符，不支持的将不会编译。

[http://www.codeproject.com/Articles/15191/Understanding-Implicit-Operator-Overloading-in-C](http://www.codeproject.com/Articles/15191/Understanding-Implicit-Operator-Overloading-in-C)

```
public class Data
{
    private object UnderlyingValue;

    private Data(object underlyingValue)
    {
        this.UnderlyingValue = underlyingValue;
    }

    public static implicit operator Data(string value)
    {
        return new Data(value);
    }

    public static implicit operator Data(bool value)
    {
        return new Data(value);
    }
}

var data = new Data[] { 1, "string", true }; //compiler error on "1" because no supporting conversion method is provided 
```

正如乔恩所说，你的要求有点模糊，所以我不知道还有什么要补充的。根据您的需要，也许您可​​以使用通用版本的 Data，或者您以后想要如何管理 Data 对象可能会有所不同。您还可以通过一些工厂来检查支持的类型并抛出格式良好的异常。

编辑：根据您的编辑，您可以执行以下操作：

```
public class SupportedObjectsResults
{
    public List<object> SupportedObjects { get; private set; }
    public List<object> UnsupportedObjects { get; private set; }

    public SupportedObjectsResults(List<object> supportedObjects, List<object> unsupportedObjects)
    {
        this.SupportedObjects = supportedObjects;
        this.UnsupportedObjects = unsupportedObjects;
    }
}

public static class SupportedTypeHelper
{
    public static SupportedObjectsResults GetSupportedTypes(params object[] values)
    {
        List<object> supportedObjects = new List<object>();
        List<object> unsupportedObjects = new List<object>();

        foreach(object value in values)
        {
            if (CheckIsSupported(value))
                supportedObjects.Add(value);
            else
                unsupportedObjects.Add(value);
        }

        return new SupportedObjectsResults(supportedObjects, unsupportedObjects);
    }

    private static bool CheckIsSupported(object underlyingValue)
    {
        return (underlyingValue is string ||
                underlyingValue is bool
                );
    }
} 
```

然后您可以找出支持哪些对象，哪些不支持：

```
var supportedResults = SupportedTypeHelper.GetSupportedTypes(1, "string", true);
//supportedResults.SupportedObjects = ["string", true]
//supportedREsults.UnsupportedObjects = [1]; 
```

顺便说一句，我不太喜欢第二种解决方案。大量的装箱并且在编译时没有检查。无论如何，我想这应该为您解决特定设计问题提供了一个良好的开端。

# php - Zend 肥皂和 MindBody

> ID：10622696
> 
> 赞同：1
> 
> 时间：2012-05-16T16:25:40.887
> 
> 标签：php, api, zend-framework, soap, zend-soap

对于那些不熟悉 MindBody ( [http://www.mindbodyonline.com](http://www.mindbodyonline.com) ) 的人来说，它是一个方便的商家处理工具，适用于我工作的瑜伽工作室等健康和保健中心。它可以跟踪客户和管理员工以及各种很棒的东西。一段时间以来，我一直在使用 nuSOAP 和 MindBody SOAP API v0.4 生成报告。当我的客户要求我生成需要更新的 MindBody SOAP API v0.5 的报告时，我决定放弃 nuSOAP 以使用 PHP5 的本机 SOAP。然后我听说 Zend Soap 提供了与本机肥皂相同的速度，但还有许多其他好处，所以我编写了以下代码。

```
<?php
require_once 'Zend/Soap/Client.php';
$sourceCredentials = array('SourceName'=>'****', 'Password'=>"****", 'SiteIDs'=>array('****'));

try {
  $client = new Zend_Soap_Client('https://api.mindbodyonline.com/0_5/ClientService.asmx?WSDL');
  $result = $client->GetClients(array("SourceCredentials"=>$sourceCredentials, "XMLDetail"=>"Basic", "PageSize"=>"10", "CurrentPageIndex"=>"0", "ClientIDs"=>array("100009536")));
  echo $client->getLastRequest();

} catch (SoapFault $s) {
  die('ERROR: [' . $s->faultcode . '] ' . $s->faultstring);
} catch (Exception $e) {
  die('ERROR: ' . $e->getMessage());
}
var_dump($client);
var_dump($result);
?> 
```

我不确定我做错了什么。该页面只是不断加载和加载，但从不加载。我希望有人可以查看 WSDL 或 API Docs 并告诉我我缺少什么。这是 API Docs 的链接[http://api.mindbodyonline.com/Doc](http://api.mindbodyonline.com/Doc)我在这个例子中尝试使用客户端服务。

如果我注释掉 $result = $client->GetClients~ 行然后页面加载并且 $client 的 var_dump 返回这个

> object(Zend_Soap_Client)#1 (28) { ["_encoding:protected"]=> string(5) "UTF-8" ["_classmap:protected"]=> NULL ["_faultExceptions:protected"]=> array(0 ) { } ["_soapVersion:protected"]=> int(2) ["_uri:protected"]=> NULL ["_location:protected"]=> NULL ["_style:protected"]=> NULL ["_use: protected"]=> NULL ["_login:protected"]=> NULL ["_password:protected"]=> NULL ["_proxy_host:protected"]=> NULL ["_proxy_port:protected"]=> NULL ["_proxy_login: protected"]=> NULL ["_proxy_password:protected"]=> NULL ["_local_cert:protected"]=> NULL ["_passphrase:protected"]=> NULL ["_compression:protected"]=> NULL ["_connection_timeout:protected"]=> NULL ["_stream_context:protected"]=> NULL ["_features:protected"]=> NULL ["_cache_wsdl:protected"]=> NULL ["_user_agent:protected"]=> NULL [" _wsdl:protected"]=> 字符串(58) "https://api.mindbodyonline.com/0_5/ClientService.asmx?WSDL" ["_soapClient:protected"]=> NULL ["_lastMethod:protected"]=> 字符串(0) "" ["_soapInputHeaders:protected"]=> 数组(0) { } ["_permanentSoapInputHeaders:protected"]=> 数组(0) { } ["_soapOutputHeaders:protected"]=> 数组(0) { } }NULL ["_user_agent:protected"]=> NULL ["_wsdl:protected"]=> 字符串(58) "https://api.mindbodyonline.com/0_5/ClientService.asmx?WSDL" ["_soapClient:protected"] => NULL ["_lastMethod:protected"]=> string(0) "" ["_soapInputHeaders:protected"]=> array(0) { } ["_permanentSoapInputHeaders:protected"]=> array(0) { } [" _soapOutputHeaders:protected"]=> 数组(0) { } }NULL ["_user_agent:protected"]=> NULL ["_wsdl:protected"]=> 字符串(58) "https://api.mindbodyonline.com/0_5/ClientService.asmx?WSDL" ["_soapClient:protected"] => NULL ["_lastMethod:protected"]=> string(0) "" ["_soapInputHeaders:protected"]=> array(0) { } ["_permanentSoapInputHeaders:protected"]=> array(0) { } [" _soapOutputHeaders:protected"]=> 数组(0) { } }受保护的"]=> 数组(0) { } ["_soapOutputHeaders:protected"]=> 数组(0) { } }受保护的"]=> 数组(0) { } ["_soapOutputHeaders:protected"]=> 数组(0) { } }

我不确定这些值应该是什么，但所有这些 NULL 对我来说都很糟糕。我尝试了嵌套传递给 $client->GetClients 的数组的不同组合，并且我还尝试访问 GetClients 以外的不同函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T02:59:53.983

好吧，对于碰巧在谷歌上搜索并想要答案的人来说。出于某种原因，您必须将用户代理字符串添加到页面标题中才能使其与 API 一起使用。将此代码添加到 PHP 页面的顶部

```
ini_set("user_agent", "FOOBAR"); 
```

那么你需要创建一个 Zend_Soap_Client，soap_version 设置为 SOAP_1_1。创建要发送的参数数组。然后调用你想要的函数，在这种情况下你传入一个数组（ "Reqest"=>$params ）

```
$client = new Zend_Soap_Client('https://api.mindbodyonline.com/0_5/ClientService.asmx?WSDL', array("soap_version"=>SOAP_1_1));
$sourceCredentials = array('SourceName'=>'****', 'Password'=>"****", 'SiteIDs'=>array('****'));
$params = array("SourceCredentials"=>$sourceCredentials, "XMLDetail"=>"Basic", "PageSize"=>"10", "CurrentPageIndex"=>"0", "ClientIDs"=>array("123456789","123456789"));
$result = $client->GetClients(array("Request"=>$params)); 
```

编辑：有关更多信息，请查看我写的关于[如何在 30 分钟内开始使用 MINDBODY API 的文章](http://blog.devincrossman.com/start-using-the-mindbody-api-in-under-30-minutes-using-php/)

# delphi - 生成条形码

> ID：10622700
> 
> 赞同：4
> 
> 时间：2012-05-16T16:25:49.587
> 
> 标签：delphi, barcode, zxing

嗨，是否有任何已知的 Delphi 库可以[从 ZXing](http://zxing.appspot.com/generator/)项目生成/解码 QR 码生成器？

提前谢谢..

# javascript - 检测对 Knockout 视图模型的更改

> ID：10622707
> 
> 赞同：65
> 
> 时间：2012-05-16T16:26:08.197
> 
> 标签：javascript, knockout.js

当然，这是一个非常容易回答的问题，但是有没有一种简单的方法可以确定剔除视图模型的任何属性是否发生了变化？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-07-13T14:12:36.830

使用扩展器：

```
ko.extenders.trackChange = function (target, track) {
    if (track) {
        target.isDirty = ko.observable(false);
        target.originalValue = target();
        target.setOriginalValue = function(startingValue) {
            target.originalValue = startingValue; 
        };
        target.subscribe(function (newValue) {
            // use != not !== so numbers will equate naturally
            target.isDirty(newValue != target.originalValue);
        });
    }
    return target;
}; 
```

然后：

```
self.MyProperty= ko.observable("Property Value").extend({ trackChange: true }); 
```

现在您可以像这样检查：

```
self.MyProperty.isDirty() 
```

您还可以编写一些通用的 viewModel 遍历以查看是否有任何更改：

```
self.isDirty = ko.computed(function () {
    for (key in self) {
        if (self.hasOwnProperty(key) && ko.isObservable(self[key]) && typeof self[key].isDirty === 'function' && self[key].isDirty()) {
            return true;
        }
    }
}); 
```

...然后只需检查 viewModel 级别

```
self.isDirty() 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-05-16T16:31:49.043

您可以订阅要监控的属性：

```
myViewModel.personName.subscribe(function(newValue) {
    alert("The person's new name is " + newValue); 
}); 
```

这将在 personName 更改时发出警报。

好的，所以你想知道你的模型什么时候发生变化......

```
var viewModel = … // define your viewModel

var changeLog = new Array();  

function catchChanges(property, value){
    changeLog.push({property: property, value: value});
    viewModel.isDirty = true;
}

function initialiseViewModel()
{
    // loop through all the properties in the model
    for (var property in viewModel) {

        if (viewModel.hasOwnProperty(property)) { 

            // if they're observable
            if(viewModel[property].subscribe){

                // subscribe to changes
                viewModel[property].subscribe(function(value) {
                    catchChanges(property, value);
                });
            }
        }
    }
    viewModel.isDirty = false;
}

function resetViewModel() {
    changeLog = new Array();  
    viewModel.isDirty = false;
} 
```

*（还没有测试它 - 但你应该明白）*

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-10T11:41:44.387

考虑使用[Knockout-Validation 插件](https://github.com/Knockout-Contrib/Knockout-Validation)

它实现了以下功能：

> yourProperty.isModified() - 检查用户是否修改了值。
> 
> yourProperty.originalValue - 所以你可以检查值是否真的改变了。

连同其他派上用场的验证内容！

干杯

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-13T17:32:03.017

您可以为此使用以下插件：

[https://github.com/ZiadJ/knockoutjs-reactor](https://github.com/ZiadJ/knockoutjs-reactor)

例如，该代码将允许您跟踪任何视图模型中的所有更改：

```
ko.watch(someViewModel, { depth: -1 }, function(parents, child) { 
    alert('New value is: ' + child());
}); 
```

PS：到目前为止，这不适用于嵌套在数组中的可订阅，但支持它的新版本正在开发中。

**更新：**示例代码已升级为使用 v1.2b，它增加了对数组项和 subscribable-in-subscribable 属性的支持。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-22T16:47:45.767

我有同样的问题，我需要观察 viewModel 上的任何变化，以便将数据发送回服务器，如果有人仍然感兴趣，我做了一些研究，这是我设法组装的最佳解决方案：

```
function GlobalObserver(viewModel, callback) {  
    var self = this;
    viewModel.allChangesObserver = ko.computed(function() {
        self.viewModelRaw = ko.mapping.toJS(viewModel);
    });
    viewModel.allChangesObserver.subscribe(function() {
        callback(self.viewModelRaw);
    });
    self.dispose = function() {
        if (viewModel.allChangesObserver)
            viewModel.allChangesObserver.dispose();
        delete viewModel.allChangesObserver;
    };
}; 
```

为了使用这个“全球观察者”：

```
function updateEntireViewModel() {
    var rawViewModel = Ajax_GetItemEntity(); //fetch the json object..    
    //enter validation code here, to ensure entity is correct.
    if (koGlobalObserver)
        koGlobalObserver.dispose(); //If already observing the older ViewModel, stop doing that!
    var viewModel = ko.mapping.fromJS(rawViewModel);        
    koGlobalObserver = new GlobalObserver(viewModel, Ajax_Submit);
    ko.applyBindings(viewModel [ ,optional dom element]);   
} 
```

请注意，给定的回调（在本例中为“Ajax_Submit”）将在视图模型上发生的任何更改时触发，因此我认为确实建议使用某种延迟机制仅在用户完成编辑时发送实体属性：

```
var _entitiesUpdateTimers = {};

function Ajax_Submit(entity) { 
    var key = entity.ID; //or whatever uniquely related to the current view model..
    if (typeof _entitiesUpdateTimers[key] !== 'undefined')
        clearTimeout(_entitiesUpdateTimers[key]);    
    _entitiesUpdateTimers[key] = 
        setTimeout(function() { SendEntityFunction(entity); }, 500);           
} 
```

我是 JavaScript 和淘汰框架的新手，（直到昨天我才开始使用这个美妙的框架），所以如果我做错了什么，请不要生我的气.. (-:

希望这可以帮助！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-19T22:04:23.007

我已经修改了@Brett Green 代码并对其进行了扩展，以便我们可以拥有 AcceptChanges，将模型标记为不脏，并以更好的方式将模型标记为可跟踪。这是代码：

```
var viewModel = {
    name: ko.observable()   
};

ko.track(viewModel); 
```

[http://jsfiddle.net/david_freire/3HZEu/2/](http://jsfiddle.net/david_freire/3HZEu/2/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-08-26T17:11:54.310

我通过在页面加载时拍摄视图模型的快照来做到这一点，然后将该快照与当前视图模型进行比较。我不在乎什么属性改变了，只要有改变。

拍摄快照：

```
var originalViewModel = JSON.stringify(ko.toJS(viewModel)); 
```

稍后比较：

```
if(originalViewModel != JSON.stringify(ko.toJS(viewModel))){
    // Something has changed, but we don't know what
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-05-08T09:24:35.847

考虑如下视图模型

```
function myViewModel(){
    var that = this;
    that.Name = ko.observable();
    that.OldState = ko.observable();
    that.NewState = ko.observable();

    that.dirtyCalcultions - ko.computed(function(){
    // Code to execute when state of an observable changes.
});
} 
```

绑定数据后，您可以使用 ko.toJS(myViewModel) 函数存储状态。

```
myViewModel.Name("test");
myViewModel.OldState(ko.toJS(myViewModel)); 
```

您可以在视图模型中将变量声明为计算的可观察对象，例如

```
that.dirtyCalculations = ko.computed(function () {}); 
```

当视图模型中的任何其他可观察对象发生更改时，将输入此计算函数。

然后您可以将两种视图模型状态进行比较：

```
that.dirtyCalculations = ko.computed(function () {
  that.NewState(that);

  //Compare old state to new state
  if(that.OldState().Name == that.NewState().Name()){
       // View model states are same.
  }
  else{
      // View model states are different.
  } 
```

});

**注意：这个计算出来的 observable 函数也会在视图模型初始化的时候执行。**

希望这可以帮助 ！干杯！！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-06T11:32:31.687

我喜欢布雷特格林的解决方案。正如有人指出的那样， isDirty 比较不适用于 Date 对象。我通过像这样扩展订阅方法来解决它：

```
 observable.subscribe(function (newValue) {
            observable.isDirty(newValue != observable.originalValue);

            if (newValue instanceof Date) {
                observable.isDirty(newValue.getTime() != observable.originalValue.getTime());
            }
        }); 
```

# javascript - javascript 中是否存在任何不可知的库验证框架？

> ID：10622711
> 
> 赞同：0
> 
> 时间：2012-05-16T16:26:29.880
> 
> 标签：javascript, validation, extjs, extjs4, extjs3

我正在寻找类似于[backbone.validations的javascript验证框架](https://github.com/n-time/backbone.validations)

我见过一些 jQuery 插件，但我需要一个模型验证框架而不是表单验证框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:51:20.373

Ext js 4.x 提供了模型验证。

[数据模型](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model)

# sql - 我对文本列上的 Sqlite 比较感到困惑

> ID：10622714
> 
> 赞同：1
> 
> 时间：2012-05-16T16:26:41.203
> 
> 标签：sql, sqlite

我有一个 Sqlite 数据库，其中一列被定义为“TEXT NOT NULL”。有些值是字符串，有些可以转换为 DOUBLE，有些可以转换为 INTEGER。一旦我将它缩小到 DOUBLE 值，我想做一个获取一系列数据的查询。假设我的列名为“Value”。我可以这样做吗？

```
SELECT * FROM Tbl WHERE ... AND Value >= 23 AND Value < 42 
```

那是要进行某种 ASCII 比较还是数字比较？整数还是实数？BETWEEN 运算符的工作方式是否相同？

如果我这样做会发生什么？

```
SELECT MAX(Value) FROM Tbl WHERE ... 
```

它会进行字符串或整数或浮点比较吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:35:35.797

您无法将文本转换为整数或双精度，因此您将无法做您想做的事。

如果该列是 varchar 你可以通过这样做有机会：

```
select * 
from Tbl 
WHERE     ISNUMERIC(Value ) = 1 --condition to avoid a conversion from string to int for example
and cast(value as integer) > 1 --rest of your conditions 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:43:09.570

这一切都[在 SQLite 第 3 版中的数据类型一](http://www.sqlite.org/datatype3.html)文中进行了解释。例如，第一部分问题的答案是

> INTEGER 或 REAL 值小于任何 TEXT 或 BLOB 值。当一个 INTEGER 或 REAL 与另一个 INTEGER 或 REAL 进行比较时，将执行数值比较。

这就是为什么`SELECT 9 < '1'`两者`SELECT 9 < '11'`都给出`1`（真）。

> 表达式“a BETWEEN b AND c”被视为两个单独的二进制比较“a >= b AND a <= c”

最重要的一点是，列类型只是一个注解；SQLite 是动态类型的，因此每个值都可以具有任何类型。

# php - 如何使用连接访问php变量

> ID：10622719
> 
> 赞同：0
> 
> 时间：2012-05-16T16:27:01.613
> 
> 标签：php

我想访问一个名为`$item1`或`$item2`的变量`$item3`。

我想在每次都在的 for 循环`$i`中访问这个变量。`++`使用`$item.$i`或类似的东西。但是使用该代码意味着我正在尝试加入两个变量的内容，并且没有名为 $item 的变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:33:39.660

### 数组：更好的方法

虽然 PHP 确实允许您从各种其他值构建动态变量名，但在这种情况下您可能不应该这样做。在我看来，数组更适合您：

```
$items = array( 0, 12, 34 ); 
```

然后，您可以单独访问每个值：

```
echo $items[0]; // 0
echo $items[1]; // 12 
```

或者循环整个集合：

```
foreach ( $items as $number ) {
  echo $number; // 1st: 0, 2nd: 12, 3rd: 34
} 
```

### 合并多个数组

您在 OP 的评论中指出`$item1`through`$item3`已经是数组。如果您愿意，可以将它们全部合并到一个数组中`array_merge()`，如下所示：

```
$item1 = array( 1, 2 );
$item2 = array( 3, 4 );
$item3 = array( 5, 6 );

$newAr = array_merge( $item1, $item2, $item3 );

print_r( $newAr ); 
```

哪个输出：

```
Array
(
  [0] => 1
  [1] => 2
  [2] => 3
  [3] => 4
  [4] => 5
  [5] => 6
) 
```

### 如果必须：动态变量名称

为了完整起见，如果您要通过动态构造变量名称来解决问题，您可以执行以下操作：

```
$item1 = 12;
$item2 = 23;
$item3 = 42;

for ( $i = 1; $i <= 3; $i++ ) {
  echo ${"item".$i} . PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T16:31:53.920

将要访问的变量名构建到另一个变量中，然后使用[变量变量语法](http://php.net/manual/en/language.variables.variable.php)

```
<?php
   $item1 = 'a';
   $item2 = 'b';
   $item3 = 'c';

   for ($i = 1; $i<=3; $i++) {
       $varname = 'item' . $i;
       echo $$varname;
   }
?> 
```

输出：

> 美国广播公司

请注意，还有其他方法可以做到这一点，请参阅手册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T16:29:14.380

```
for ($i =1;$i<4;$i++){
    $var = 'item'.$i;
    echo $$var;
} 
```

在这里，您使用双 $ 来创建[变量 variable](http://php.net/manual/en/language.variables.variable.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T16:30:04.037

使用`${'item'.$i}`
If `$i == 1`，那么您将访问`$item1`.

但在你的情况下最好使用数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T16:31:04.653

您可以使用数组而不是单个变量吗？然后您可以通过索引值引用数组元素`i`。

```
$items = array();

$i = 1;
$items[$i] = "foo";

$i++;
$items[$i] = "bah";

echo $items[1], $items[2];     // gives "foobah" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T16:46:42.103

有点晚了，接受的答案是正确的方法，但是 PHP 确实允许您以 OP 描述的方式访问变量变量名称：

```
<?php
$item1 = 'a';
$item2 = 'b';
$item3 = 'c';
for($i=1;$i<=3;$i++)
    echo ${"item$i"}; //Outputs: abc
?> 
```

# facebook - Facebook - “august_2012”平台迁移的问题

> ID：10622720
> 
> 赞同：3
> 
> 时间：2012-05-16T16:27:13.057
> 
> 标签：facebook

我在使用 FB auth 的 iOS 应用程序中收到此警告消息：

`ERROR:This endpoint has been deprecated.To temporarily reenable it,you may disable the "august_2012" platform migration. It will be disable permanently on August 1,2012.`

问题是暂时禁用该迁移。但是，它已经被禁用了，所以不知道如何快速解决这个问题——而不是更新应用程序并将其推回商店，我们将这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:44:04.590

我通过使用从[GitHut](https://github.com/ShareKit/ShareKit)下载的最新 ShareKit 版本 (0.2.1) 解决了这个问题，但同样的版本也可以在[getsharekit.com/install](http://getsharekit.com/install/)上获得。

接下来，我通过在我的 XCode 项目中拖放（像往常一样）添加了位于“Classes”中的文件夹“ShareKit”。

出于安全原因，之前的配置文件已更改为一个类。在“DefaultSHKConfigurator.m”类中设置共享服务（FB、Twitter、...）的配置数据。（顺便说一句。我对 DefaultSHKConfigurator 进行了子类化，所以我仍然拥有原始结构）

要设置 FB，请更改设置：

```
- (NSString*)facebookAppId {
return @"..."; //app-id from facebook (create fb-app first, if not already done)
}

- (NSString*)facebookLocalAppId {
    return @"";
} 
```

比在 application:didFinishLaunchingWithOptions: 方法中，设置 ShareKonfiguration。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

DefaultSHKConfigurator *configurator = [[DefaultSHKConfigurator alloc] init];

[SHKConfiguration sharedInstanceWithConfigurator:configurator];

[configurator release];

//init the rest
..
} 
```

之后，添加一个 URL Scheme（在 XCode 4.x 中选择你的项目，选择一个目标，单击“Add”->“Add URL Type”）并将 URL Scheme 设置为“fb+your fb-app id”（我的看起来像“fb35486..”）。

要让 FB 打开您的应用程序并且用户可以立即发布内容，请添加

```
- (void) openFBWithURL:(NSURL*) URL {

if (URL != nil) {

    NSString* scheme = [URL scheme];

    NSString* prefix = [NSString stringWithFormat:@"fb%@", SHKCONFIG(facebookAppId)];

        if ([scheme hasPrefix:prefix]) {

            [SHKFacebook handleOpenURL:URL];
    }
}
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {

        [self openFBWithURL:url];

    return YES;
}

- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {

        [self openFBWithURL:url];

    return YES;
} 
```

比它应该设置并准备好使用。

# java - 不同JVM之间的Java同步

> ID：10622724
> 
> 赞同：14
> 
> 时间：2012-05-16T16:27:21.723
> 
> 标签：java, synchronization, process

我正在进行的项目会触发各种异步作业来完成一些工作。当我深入研究时，这些异步作业实际上是作为单独的 JVM（单独的 Java 进程）运行的。这是否意味着如果我需要在这些进程之间进行同步，我将无法使用以下任何内容：

*   同步方法/块
*   任何实现的锁`java.util.concurrent.locks`

因为在我看来它们都是线程级的？

Java 是否提供对 IPC 的支持，例如进程之间的信号量？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-16T16:31:26.653

这是正确的。您不能使用任何标准同步机制，因为它们在一个 JVM 中工作。

解决方案

1.  您可以使用 java 7 中引入的文件锁。
2.  您可以通过数据库实体使用同步。
3.  Terracota 等已实施的解决方案之一可能会有所帮助
4.  重新考虑您的设计。如果您是 Java 世界的初学者，请尝试与更有经验的工程师详细交谈。您的问题表明，恕我直言，您只是走错了路。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T16:32:31.520

您可以使用`synchronized`关键字、锁、原子对象等 - 但它们是 JVM 本地的。因此，如果您有两个 JVM 运行相同的程序，它们仍然可以例如同时运行相同的`synchronized`方法 - 每个 JVM 一个，但不能更多。

解决方案：

*   [terracotta](/questions/tagged/terracotta "显示标记为“兵马俑”的问题")提供分布式锁定

*   [榛树](/questions/tagged/hazelcast "显示标记为“hazelcast”的问题")也是

*   您可以在文件系统或数据库上使用手动同步

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-27T08:29:48.297

我正在使用[Redisson](https://redisson.org)提供的[分布式锁](https://github.com/redisson/redisson/wiki/8.-distributed-locks-and-synchronizers)来同步不同 JVM 的工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T16:31:32.897

> 它们都是线程级的？

这是正确的，`synchronized`等只在单个进程的上下文中工作。

> Java 是否提供对 IPC 的支持，例如进程之间的信号量？

在 Java 进程之间实现通信的一种方法是使用[RMI](http://en.wikipedia.org/wiki/Java_remote_method_invocation)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-23T00:43:20.473

我已经使用文件实现了一个 java IPC Lock 实现：[FileBasedLock](https://github.com/zolyfarkas/spf4j/blob/master/spf4j-core/src/main/java/org/spf4j/concurrent/FileBasedLock.java)和一个使用共享数据库（jdbc）的 IPC Semaphore 实现：[JdbcSemaphore](https://github.com/zolyfarkas/spf4j/blob/master/spf4j-core/src/main/java/org/spf4j/concurrent/jdbc/JdbcSemaphore.java)。这两种实现都是[spf4j](http://www.spf4j.org)的一部分。

如果您有 Zookeeper 实例，请查看[Apache Curator的基于 Zookeeper 的 Lock 配方](http://curator.apache.org/curator-recipes/index.html)

# ruby-on-rails - 如何在 Rails 应用程序之外使用 JBuilder？

> ID：10622728
> 
> 赞同：2
> 
> 时间：2012-05-16T16:27:50.423
> 
> 标签：ruby-on-rails, json, gem, jbuilder

我喜欢 JBuilder 的语法，并且想在 Rails 之外使用它。我有一个类和一个 to_json 方法：

```
class Blog

  def to_json
    Jbuilder.encode do |json|
      json.(self, :id, :logo)

      json.articles articles do |json, article|
        json.id article.id
      end
    end
  end

end 
```

不幸的是，我得到：

```
/Users/justin/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/jbuilder-0.4.0/lib/jbuilder.rb:13:in `define_method': wrong argument type NilClass (expected Proc/Method) (TypeError)
  from /Users/justin/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/jbuilder-0.4.0/lib/jbuilder.rb:13:in `<class:Jbuilder>'
  from /Users/justin/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/jbuilder-0.4.0/lib/jbuilder.rb:7:in `<top (required)>' 
```

对应于：

```
# jbuilder.rb
class Jbuilder < BlankSlate
  # Yields a builder and automatically turns the result into a JSON string
  def self.encode
    new._tap { |jbuilder| yield jbuilder }.target!
  end

  define_method(:__class__, find_hidden_method(:class))   # <--- exception
  define_method(:_tap, find_hidden_method(:tap))
  # .... 
```

知道我需要在 gem 中需要哪些 gem 来满足 JBuilder 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-09T07:46:56.043

您可以使用

```
template = File.read(template_file)
output = Jbuilder.encode { |json| eval template } 
```

# actionscript-3 - 知道一个 MovieClip 是否会触发一个函数

> ID：10622729
> 
> 赞同：1
> 
> 时间：2012-05-16T16:27:52.220
> 
> 标签：actionscript-3, flash

好的，所以我有这个电影剪辑 X，我需要检查它是否有一个函数的侦听器......我知道 hasListener 的事情，但我只能向它发送一个事件类型，对吗？像 MouseEvent.CLICK 或类似的东西。

我需要知道的是我是否可以获得一个确切的函数，该函数将在事件被调度时触发。willTrigger() 可以帮我做点什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:40:38.253

不，您无法获取将为特定事件调用的函数对象。`willTrigger`也无济于事。如果您稍后需要侦听器功能，那么您需要自己记住这一点。

记住侦听器函数的最佳方式取决于您的特定需求。一种可能的方法是扩展`MovieClip`和覆盖`addEventListener`以将侦听器保存在对象中。您可以使用事件类型作为键和一组侦听器（每个事件类型可以有多个侦听器）作为值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:43:44.120

`willTrigger()`只会在事件冒泡中起作用。您始终可以扩展您要使用的事件，使其成为您可以检查以确定的自定义事件。

# r - 从虚拟编码观察创建一个共现矩阵

> ID：10622730
> 
> 赞同：11
> 
> 时间：2012-05-16T16:27:52.270
> 
> 标签：r

是否有一种简单的方法可以将带有假人（二进制编码）的数据帧转换为包含两个方面同时出现的计数的共现矩阵？

例如，从此

```
X <- data.frame(rbind(c(1,0,1,0), c(0,1,1,0), c(0,1,1,1), c(0,0,1,0)))
X
  X1 X2 X3 X4
1  1  0  1  0
2  0  1  1  0
3  0  1  1  1
4  0  0  1  0 
```

对此

```
 X1 X2 X3 X4
X1  0  0  1  0
X2  0  0  2  1
X3  1  2  0  1
X4  0  1  1  0 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-16T16:53:53.910

这可以解决问题：

```
X <- as.matrix(X)
out <- crossprod(X)  # Same as: t(X) %*% X
diag(out) <- 0       # (b/c you don't count co-occurrences of an aspect with itself)
out
#      [,1] [,2] [,3] [,4]
# [1,]    0    0    1    0
# [2,]    0    0    2    1
# [3,]    1    2    0    1
# [4,]    0    1    1    0 
```

要将结果完全像您展示的那样放入 data.frame 中，您可以执行以下操作：

```
nms <- paste("X", 1:4, sep="")
dimnames(out) <- list(nms, nms)
out <- as.data.frame(out) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-07T12:14:41.630

虽然没有什么能比得上上面答案的简单性，只是发布`tidyverse`方法以供将来参考

```
Y <- X %>% mutate(id = row_number()) %>%
  pivot_longer(-id) %>% filter(value !=0)

merge(Y, Y, by = "id", all = T) %>%
  filter(name.x != name.y) %>%
  group_by(name.x, name.y) %>%
  summarise(val = n()) %>%
  pivot_wider(names_from = name.y, values_from = val, values_fill = 0, names_sort = T) %>%
  column_to_rownames("name.x")

   X1 X2 X3 X4
X1  0  0  1  0
X2  0  0  2  1
X3  1  2  0  1
X4  0  1  1  0 
```

# java - 我可以注入内部类的对象吗？

> ID：10622733
> 
> 赞同：3
> 
> 时间：2012-05-16T16:27:55.457
> 
> 标签：java, exception-handling, dependency-injection, java-ee-6, cdi

有人知道我是否可以在我的对象中注入一个内部类吗？我想写这样的东西：

```
@Named
public class ClassA {

    @Inject
    private InnerClass myObject;

    public class InnerClass extends DefaultImplementation implements Serializable{
        public String overriddenMethod() {
            // do something special
        }
    }
} 
```

我想做这些奇怪的事情，因为我有一个默认实现，我在 80% 的用例中都将其用于注入。但是对于特殊逻辑，我必须覆盖默认实现中的一些方法。

我不想创建额外的类文件，因为我只想覆盖两行代码。

如果我在我的 OpenWebBeans-Contrainer 中尝试代码，我会收到以下错误：

> javax.enterprise.inject.UnsatisfiedResolutionException: Api type [ClassA$InnerClass] is not found with the qualifiers Qualifiers: [@javax.enterprise.inject.Default()] for injection into Field: private ClassA$InnerClass ClassA.myObject

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:22:08.670

如果声明为“public static”，内部类的注入应该可以工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:01:55.323

要解决您的问题，只需将您的课程更改为

```
public static class InnerClass //... 
```

这可能看起来有点不直观，但 java 静态类与 c# 之类的语言有很大不同。在 java 中，静态类仅用于您所处的情况，您希望利用嵌套类，而不必先创建外部类的实例。在java中创建静态类而不是嵌套类实际上是无效的。

有关更多详细信息，请参阅此答案：[为什么您不能在 Java 中将类声明为静态？](https://stackoverflow.com/questions/3584113/java-static-class)

# javascript - 这是什么类型的数组？

> ID：10622740
> 
> 赞同：0
> 
> 时间：2012-05-16T16:28:31.890
> 
> 标签：javascript

或者它不是一个数组？我在哪里可以找到有关使用这种结构创建东西的信息？

```
[
    ['Firefox',   45.0],
    ['IE',       26.8],
    ['Safari',    8.5],
    ['Opera',     6.2],
    ['Others',   0.7]
] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T16:29:53.570

简单地说，它是一个数组，数组。:)

例如，如果您的对象（多维数组）被调用`testObject`，您可以像这样遍历它......

```
for (var i = 0; i < testObject.length; i++)
{
    for (var j = 0; j < testObject[i].length; j++)
    {
        alert(testObject[i][j]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T16:32:13.310

它是一个多维数组。

```
var x = [
    ['Firefox',   45.0],
    ['IE',       26.8],
    ['Safari',    8.5],
    ['Opera',     6.2],
    ['Others',   0.7]
];
console.log(x[3][1]); 
```

​将导致 6.2

**[jsFiddle 示例](http://jsfiddle.net/j08691/evrRE/)**。

# c++ - 如何查找地址是否属于代码或数据部分

> ID：10622750
> 
> 赞同：4
> 
> 时间：2012-05-16T16:29:15.027
> 
> 标签：c++, windows, winapi

给定一个我想在运行时找到的地址，如果它属于 .text 部分（是否还有其他可执行部分？），则无需访问磁盘上的 PE 标头。
更多详细信息：
该地址在我正在运行的同一进程中，但它可以形成不同的 dll 静态库或运行该进程的可执行文件。
我正在使用 VS2010 Win32 的 Windows 上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:40:18.867

你想要[`VirtualQuery`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366902.aspx)。它填充了一个[`MEMORY_BASIC_INFORMATION`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366775.aspx)结构。如果`mbi.Type == MEM_IMAGE`，您正在查看映射图像。您可能还想查看`AllocationProtect`to check for`PAGE_EXECUTE`或其变体之一（否则您可能会查看从可执行文件映射的只读数据之类的东西，例如位图资源或按该顺序排列的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T17:19:08.783

考虑 DbgHelp API： http: [//msdn.microsoft.com/en-us/library/ms679292](http://msdn.microsoft.com/en-us/library/ms679292(v=vs.85) (v=vs.85 )

例如，

EnumerateLoadedModulesEx 为您提供有关已加载模块的基地址和大小的信息（因此您可以识别模块）

MapDebugInformation 检索有关模块部分的信息

# django - Django ForeignKey 实例与原始 ID

> ID：10622751
> 
> 赞同：19
> 
> 时间：2012-05-16T16:29:14.900
> 
> 标签：django, django-models

有没有办法在创建新模型时不必为外键传递模型实例？假设我有以下模型：

```
class Foo(models.Model):
    description = models.CharField(max_length=100)

    class Meta:
         db_table = u'foo'

class Bar(models.Model):
    info = models.CharField(max_length=100)
    foo = models.ForeignKey('Foo')

    class Meta:
         db_table = u'bar' 
```

稍后发布请求进入视图 - 我知道 foo 记录的 id 并且只想将记录插入到 bar 表中。

如果我做：

```
new_bar = Bar(info="something important", foo=foo_id)
new_bar.save() 
```

我收到一个 ValueError 说“无法分配”546456487466L”：“Bar.foo”只是一个“Foo”实例。

所以，我明白了……它希望我有一个 Foo 模型的实际实例。我知道我可以在 Foo 上做一个 get 然后将它传递进去。但是，似乎必须有一种方法来覆盖这个功能。我做了一些谷歌搜索和阅读文档，管理员中的 raw_id_fields 似乎是基本思想。（也就是说，在这里允许一个原始 id）。但是，在 ForeignKey 字段中看不到此选项。

必须往返于数据库以获取对象以获取 id（我已经拥有）似乎非常低效。我知道进行往返可以验证 id 是否存在于数据库中。但是，嘿...这就是为什么我使用 RDBMS 并首先拥有外键的原因。

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-16T16:53:33.803

```
new_bar = Bar(info="something important", foo_id=12345)
new_bar.save() 
```

您也可以[直接获取外键值](https://docs.djangoproject.com/en/dev/topics/db/optimization/#use-foreign-key-values-directly)。某种优化。

# tomcat - NetBeans Maven {tomcat_base}/bin 文件夹作为错误的类路径

> ID：10622752
> 
> 赞同：1
> 
> 时间：2012-05-16T16:29:16.790
> 
> 标签：tomcat, maven, netbeans, classpath, web-deployment

我正在 NetBeans 7.1.1 中开发一个 Maven Web 应用程序，使用 Apache Tomcat 7.0.22 作为服务器。在运行或调试应用程序时，Java 类假定“/home/user/apache-tomcat-7.0.22/bin/”作为文件的基础。

例如，如果使用“Writer rssFile = new FileWriter("test.xml");”创建一个新文件，这个新文件将创建为“/home/user/apache-tomcat-7.0.22/bin/test.xml ”。

搜索图像或其他文件时，会出现同样的问题。它开始在“/home/user/apache-tomcat-7.0.22/bin”中搜索...

项目文件不在 Tomcat 基础中，所以我不知道为什么 bin 文件夹用作类路径的基础......在代码客户端（例如 *.jsp）中，找到了正确的路径，但在服务器端没有代码（Java 类）！

[这个问题与其他用户在https://stackoverflow.com/questions/7774446/netbeans-setting-default-current-directory-for-tomcat](https://stackoverflow.com/questions/7774446/netbeans-setting-default-current-directory-for-tomcat)中提到的相同，但没有给出解决方案。

这可能是 NetBeans Maven 插件的错误？如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T00:21:48.227

如果您喜欢使用 Tomcat，那么您可以利用两个系统属性：

*   `catalina.home`- tomcat 的安装位置 ( `/home/user/apache-tomcat-7.0.22`)
*   `catalina.base`- Tomcat 实例所在的位置（通常与上述相同，但可以配置为允许多个 Tomcat 实例全部基于相同的通用二进制文件运行）

所以你可以使用：

```
new File(System.getProperty("catalina.base") + "/conf/test.xml"); 
```

如果您尝试加载捆绑到您的战争中的资源，那么您还需要做一些其他的事情来加载与容器无关的资源：

*   如果资源在`WEB-INF/classes`文件夹中，您可以使用以下方法将它们作为 InputStreams 加载：

    > ```
    > Classloader.getResourceAsStream("/test.xml"); 
    > ```

*   如果您使用的是 2.5 或更高版本的 servlet 规范，并且您可以访问 ServletContext（或 HttpServletRequest 或 HttpSession，您可以从中深入获取 ServletContext）：

    > ```
    > ServletContext.getRealPath("/"); // will return the root of your web app 
    > ```

# python - 从python 3中的Web服务下载文件

> ID：10622753
> 
> 赞同：1
> 
> 时间：2012-05-16T16:29:19.447
> 
> 标签：python, file, download, web

我确实看到了一些在 Python 中从 HTTP/HTTPS 下载文件的方法，但是对于所有这些，您需要知道确切的 URL。我正在尝试从 Web 服务下载，并且 URL 具有为下载文件而发送的方法和发布参数，但我无法确定要发送的 URL 是什么。这是代码片段：

```
url = 'https://www.example123.com'
params = { 'user' : 'username', 'pass' : 'password', 'method' : 'getproject', 'getPDF' : 'true' }
data = urllib.parse.urlencode(params)
data = data.encode('utf-8')
request= urllib.request.Request(url, data)
response = urllib.request.urlopen(request)
xdata = response.read()
print(xdata) 
```

打印语句看起来好像正在阅读 PDF，但我想将它保存在某个地方并且找不到任何方法来做到这一点？这是打印响应的开头：

```
b'%PDF-1.6\r%\xe2\xe3\xcf\xd3\r\n12 0 obj\r<</Lin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:33:31.483

您必须打开一个文件并写入它。现在，您只是将它存储在一个字符串变量中。

```
with open('yourfile.pdf', 'w') as f:
    f.write(xdata) 
```

# .net - Visual Studio 2010 项目的 JSON 响应

> ID：10622765
> 
> 赞同：0
> 
> 时间：2012-05-16T16:30:21.143
> 
> 标签：.net, json.net

我有一个来自 HTTP 请求的 JSON 响应，但我无法拼凑出拼图的最后一部分……我已经完成了 90% 的工作，但现在我被卡住了，找不到任何线索别处。

以下是我得到的回复：

```
{
  "adult": false,
  "backdrop_path": "/mOTtuakUTb1qY6jG6lzMfjdhLwc.jpg",
  "belongs_to_collection": {
    "backdrop_path": "/mOTtuakUTb1qY6jG6lzMfjdhLwc.jpg",
    "id": 10,
    "name": "Star Wars Collection",
    "poster_path": "/6rddZZpxMQkGlpQYVVxb2LdQRI3.jpg"
  },
  "budget": 11000000,
  "genres": [
    {
      "id": 28,
      "name": "Action"
    },
    {
      "id": 14,
      "name": "Fantasy"
    },
    {
      "id": 878,
      "name": "Science Fiction"
    }
  ],
  "homepage": "http://www.starwars.com",
  "id": 11,
  "imdb_id": "tt0076759",
  "original_title": "Star Wars: Episode IV: A New Hope",
  "overview": "Princess Leia is captured.",
  "popularity": 84.8,
  "poster_path": "/qoETrQ73Jbd2LDN8EUfNgUerhzG.jpg",
  "production_companies": [
    {
      "id": 1,
      "name": "Lucasfilm"
    },
    {
      "id": 8265,
      "name": "Paramount"
    }
  ],
  "production_countries": [
    {
      "iso_3166_1": "TN",
      "name": "Tunisia"
    },
    {
      "iso_3166_1": "US",
      "name": "United States of America"
    }
  ],
  "release_date": "1977-12-27",
  "revenue": 775398007,
  "runtime": 121,
  "spoken_languages": [
    {
      "iso_639_1": "en",
      "name": "English"
    }
  ],
  "tagline": "A long time ago in a galaxy far, far away...",
  "title": "Star Wars: Episode IV: A New Hope",
  "vote_average": 8.8,
  "vote_count": 75
} 
```

使用 Newtonsoft Json，除了“belongs_to_collection”部分之外，我可以获得所需的一切......到目前为止，我的代码如下：

```
 Dim jsonResults As JObject = JObject.Parse(searchResults)
    Dim genreItems As JArray = DirectCast(jsonResults("genres"), JArray)
    Dim productionCompaniesItems As JArray = DirectCast(jsonResults("production_companies"), JArray)

    Dim release_Date As String = CStr(jsonResults.SelectToken("release_date"))
    Dim overview As String = CStr(jsonResults.SelectToken("overview"))
    Dim homepage As String = CStr(jsonResults.SelectToken("homepage"))
    Dim tagline As String = CStr(jsonResults.SelectToken("tagline"))
    Dim imdb_id As String = CStr(jsonResults.SelectToken("imdb_id"))

    Dim vote_Average As String = CStr(jsonResults.SelectToken("vote_average").ToString)
    Dim popularity As String = CStr(jsonResults.SelectToken("popularity").ToString)
    Dim vote_Count As String = CStr(jsonResults.SelectToken("vote_count").ToString)
    Dim revenue As String = CStr(jsonResults.SelectToken("revenue").ToString)
    Dim runtime As String = CStr(jsonResults.SelectToken("runtime").ToString)
    Dim budget As String = CStr(jsonResults.SelectToken("budget").ToString)
    Dim adult As Boolean = CBool(jsonResults.SelectToken("adult"))

        Dim item As JObject
        Dim jtoken As JToken

        'Genre List

        For i As Integer = 0 To genreItems.Count - 1

            item = DirectCast(genreItems(i), JObject)
            jtoken = item.First

            While jtoken IsNot Nothing

                Dim jProperty = DirectCast(jtoken, JProperty).Name.ToString()

                If jProperty = "name" Then
                    'Debug.Print("Genres: " & DirectCast(jtoken, JProperty).Value.ToString())
                End If

                jtoken = jtoken.[Next]

            End While

        Next 
```

谁能指出我正确的方向，这样我就可以完成最后的工作？

谢谢

**编辑**

```
 Dim collection As JObject = DirectCast(jsonResults("belongs_to_collection"), JObject)
    Dim id As String = CStr(collection.SelectToken("id").ToString) 
```

当“belongs_to_collection”包含数据时，这确实有效，但当它没有错误时它会出错：

```
Unable to cast object of type 'Newtonsoft.Json.Linq.JValue' to type 'Newtonsoft.Json.Linq.JObject' 
```

在尝试从中获取任何内容之前，如何测试它是否包含数据？

**编辑 2** 好的，所以它现在排序了......我很确定我之前尝试过它并没有工作，但它现在似乎工作了。解决方案是：

```
 Dim test_Collection As String = CStr(jsonResults.SelectToken("belongs_to_collection").ToString)

    If test_Collection = "" Then
        Console.WriteLine("--- NOTHING ---")
    Else
        Dim collection As JObject = DirectCast(jsonResults("belongs_to_collection"), JObject)
        Dim id As String = CStr(collection.SelectToken("id").ToString)
        Console.WriteLine(id)
    End If 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:35:57.143

这行得通吗？

```
Dim collection As JObject = DirectCast(jsonResults("belongs_to_collection"), JObject) 
```

然后从集合 JObject 中获取其余部分，就像您对顶级 JObject 所做的一样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T18:45:26.833

如果您对 C# 感到满意，那么您可能想看看[wattmdb](http://wattmdb.codeplex.com/SourceControl/changeset/view/15940#305222)库。这是 TMDB API 包装库，它与您做的事情相同。

# c# - LINQ To XML 中的“Where”子句未选择任何内容

> ID：10622767
> 
> 赞同：3
> 
> 时间：2012-05-16T16:30:30.597
> 
> 标签：c#, xml, linq-to-xml

我只是想从一个 XML 文件中读取一些详细信息，其中一部分如下所示：

```
<appender name="FILE" class="applications.core.logging.CustomFileAppender">
    <param name="File" value="C:\\Logs\\File.log"/>
    <param name="MaxBackupIndex" value="5"/>
</appender>
<appender name="FILE" class="applications.core.logging.CustomFileAppender">
    <param name="File" value="C:\\Logs\\File2.log"/>
    <param name="MaxBackupIndex" value="17"/>
</appender>
<appender name="FILE" class="applications.core.logging.CustomFileAppender">
    <param name="File" value="C:\\Logs\\File3.log"/>
    <param name="MaxBackupIndex" value="98"/>
</appender> 
```

我的 XML 文件中有几个这样的“附加器”节点。以下代码循环遍历每个“附加器”节点。在每个“附加程序”中，我想选择名称为“文件”的参数节点并检查该值是否等于我正在寻找的值。

```
foreach (XElement node in XmlFile.Descendants("appender"))
        {
            IEnumerable<XElement> elements = from el in node.Elements("param") 
                                             where el.Attribute("value").ToString().Equals("C:\\Logs\\File.log")) 
                                             select el;

            foreach (XElement el in elements)
            {
                Console.WriteLine("Found it " + el.Name);
                // Now read value for MaxBackupIndex
            }
        } 
```

但是我的代码没有打印出任何东西，所以我认为我的 LINQ 查询的“位置”部分可能不正确，有人能发现我哪里出错了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T16:33:16.650

你在打电话`XAttribute.ToString()`。尝试`XAttribute.Value`改用，或者只是*转换*为字符串。`ToString()`将返回`value="C:\\Logs\\File.log"`- 名称和值 - 而你只想要值：

```
var elements = from el in node.Elements("param")
               where (string) el.Attribute("value") == "C:\\Logs\\File.log"
               select el; 
```

就我个人而言，我不会在这里使用查询表达式，顺便说一句：

```
var elements = node.Elements("param")
         .Where(el => (string) el.Attribute("value") == "C:\\Logs\\File.log") 
```

编辑：*此外*，正如其他人所说，您希望在 XML 文件中有单个反斜杠。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-16T16:33:34.887

XML 文件中的属性包含双斜杠，但您匹配的是单斜杠。要匹配 XML/TXT 文件中的双斜杠，您的 C# 文件中需要四个斜杠。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-16T16:34:27.947

您正在转义 where 子句中的斜杠，但 XML 已经有双斜杠 - 尝试在 where 子句中的字符串前面添加一个 @ 以转义转义（并按字面意思获取字符串），看看是否有帮助：

例如

```
el.Attribute("value").ToString().Equals(@"C:\\Logs\\File.log")) 
```

# ruby-on-rails - 如何在 Rails、表单构建器和错误消息中本地化日期格式？

> ID：10622771
> 
> 赞同：3
> 
> 时间：2012-05-16T16:30:41.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime, activerecord, internationalization

我花了一天的大部分时间来尝试在我的应用程序中本地化日期。

阅读此[http://guides.rubyonrails.org/i18n.html](http://guides.rubyonrails.org/i18n.html)似乎 I18n.l(date) 是这样做的方法。

如果我只想在我的视图中直接渲染日期对象，这一切都很好。但是很多时候我想在表单字段中呈现日期：

```
= form_for @object do |f|
  .field
    = f.label :date
    = f.text_field :date 
```

这似乎在日期对象上调用 to_s 并使用它，没有本地化。

我尝试的第一个解决方法是修改日期类以使用 I18n.l：

```
class Date
  def to_s
    I18n.l(self)
  end
end 
```

这看起来不错，因为我不必记得每次渲染日期时都调用 I18n.l。但是，这样做会破坏我所有的数据库查询，因为特定于语言环境的格式在查询字符串中没有意义！

为了解决这个问题，我在补丁中添加了额外的逻辑：

```
class Date
  def to_s(type = nil)
    if(type == :db)
      self.strftime("%Y-%m-%d")
    else
      I18n.l(self)
    end
  end
end 
```

然而，这仍然不适合 - 因为当使用日期验证错误时，活动记录似乎使用发送到数据库的字符串值。

谁能与我分享您将如何在您的视图、表单构建器和活动记录错误消息中一致地本地化日期格式？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:15:58.797

重载 Date 的 to_s 方法对我来说是一个很大的禁忌。

我想不出一个神奇的解决方案，可以根据上下文以不同的方式格式化日期并设法可靠地做到这一点；）

我建议仅在您需要的地方继续指定日期格式，并可能覆盖`date.formats.default`您的语言环境文件中的翻译，以使格式更适合您的用户（这也应该修复您的`text_field`.

# weather - 用于电子邮件的天气 API？

> ID：10622772
> 
> 赞同：1
> 
> 时间：2012-05-16T16:30:43.670
> 
> 标签：weather, cgi-bin, weather-api

有没有办法为电子邮件的收件人显示当前的天气状况？我见过一些网站使用 CGI bin 类型的链接，但不知道这是如何实现的。我实际上正在寻找任何可行的方法或找出是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:11:38.160

那么使用一些javascript（http://blog.exacttarget.com/blog/email-design-4/email-design-tip-of-the-week-javascript-in-email）或iframes（http： //www.campaignmonitor.com/blog/post/3219/do-iframes-work-in-email/) 似乎不太可能成功。

一种可能有效的方法是嵌入一个托管在您的服务器上的图像，该图像是动态创建和填充的，其中包含您希望每个用户看到的天气。

# javascript - 仅使用 JQuery 模态（可选 SimpleModal）覆盖窗口的一部分

> ID：10622775
> 
> 赞同：0
> 
> 时间：2012-05-16T16:30:56.137
> 
> 标签：javascript, jquery, asp.net, modal-dialog, simplemodal

我在一个 ASP.NET 页面上单击了一个按钮，我预计这需要一段时间。我想在用户输入数据的框架上显示一个小的加载 gif，以向用户表明事情正在发生，但到目前为止，我完全未能将覆盖模式限制为活动框架。相反，它覆盖了我不想要的整个屏幕；页面上还有其他导航，用户仍然应该可以访问，因此如果需要太长时间并且他们感到无聊，他们可能会导航离开。

我如何修改模态的调用，使其只屏蔽用户修改过的页面部分（例如，一个特定的 div）？

由于这个项目使用了专有的“工作流程”系统，我无法使用简单的 AJAX 技术来做我需要的事情；令人沮丧的是，即使逻辑页面没有改变（它仍然是 Webpage1.aspx），字段等也会发生相当大的变化，因此 AJAX 调用将无法跨工作流步骤工作。这是我的大问题；按钮单击我正在使用更改工作流程步骤。

编辑：到目前为止，我大部分时间都在使用 SimpleModal 进行实验，所以我对此感到相当满意，但如果有标准的 JQuery 方式来执行此操作，我无论如何都不会受到它的约束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:41:23.813

对于它的价值（似乎没有人在看这个话题，但我不想留下一些未完成的事情），我想通了，这就是你在 SimpleModal 中寻找的：

```
 $('#TheModal').modal({
                opacity: 0,
                modal: false         
            }); 
```

这使得一个基本的模态框可以弹出，不输出任何背景，也不会挡住整个页面。然后，您可以使用其他样式选项将其放置在您想要的任何位置。

这很脏，因为您实际上是在使用模态插件并告诉它不要表现得像模态一样，但是对于我所处的荒谬情况，它似乎工作得很好！

# jquery - 从嵌套列表构建 JSON 输出

> ID：10622784
> 
> 赞同：1
> 
> 时间：2012-05-16T16:31:30.177
> 
> 标签：jquery, json, list

我有以下无序列表：

```
<ul class="primary">
    <li id="1"><span>Product Family A</span>
       <ul class="secondary">
           <li><span>A.1</span></li>
           <li><span>A.2</span></li>
       </ul>
    </li>
    <li id="2"><span>Product Family B</span>
       <ul class="secondary">
           <li><span>B.1</span></li>
       </ul>
    </li>
    etc...
</ul> 
```

我想用 jQuery 生成下面的输出。有人可以帮忙吗？

```
product_family:[{
   id:1,
   products:[{
      model: A1,
      model: A2
}],
product_family:[{
   id:2,
   products:[{
      model: B1
}] 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:39:31.917

```
var out = [];
$('ul.primary > li').each(function(index, val) {
    out[index] = {
        product_family : this.id,
        products: []
    };
    $('ul > li', this).each(function() {
        out[index].products.push({
            model: $('span', this).text()
        });
    })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:40:34.017

请注意，这部分是无效的：

```
products:[{
    model: A1,
    model: A2
}], 
```

我假设你打算写这个：

```
products:[
    { model: A1 },
    { model: A2 }
}], 
```

你可以使用这样的东西：

```
var pf = [];
$("ul.primary").children("li").each(function(i,e) {
    var products = [];
    $(e).find('ul').find('span').each(function(i2,e2) {
        products.push({ model: $(e2).find('ul') });
    });
    pf.push( {
        id: (i+1),
        products: products
    });
}); 
```

# html - 表单方法 = "get" 漂亮的 URL

> ID：10622787
> 
> 赞同：2
> 
> 时间：2012-05-16T16:31:38.540
> 
> 标签：html, forms, .htaccess, url, friendly-url

所以我将这个 HTML 表单用于一个简单的搜索字段

```
<form action = "/search/" method = "get">
<input type = "text" name = "search_term"/>
</form> 
```

但是当它在 URL 中处理时，它就像这样

```
http://mysite.com/search/?search_term=something 
```

**我知道这是完全正常的，但是有没有办法让它像这样发送？**

```
http://mysite.com/search/something 
```

然后我将使用`search`目录中的 .htaccess 来重写 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:34:45.370

您必须使用 javascript 来挂钩表单的提交事件，或者提交表单的某个按钮的单击事件等。

然后，您将根据表单中的输入构建 url 后重定向页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:35:10.847

您是希望 URL 漂亮还是希望从 URL 中隐藏参数。您可以更改您的`method='post'`，它会将所有参数作为 HTTP 标头的一部分传递，并且对您的用户完全隐藏。如果您想让 URL 看起来更好看，您应该查看 mod_rewrite 和 .htaccess 文件，了解如何将搜索查询从更改`?search_terms=something`为`/something`

# emacs - 自定义 emacs 模式和 font-lock-defaults

> ID：10622789
> 
> 赞同：3
> 
> 时间：2012-05-16T16:31:40.597
> 
> 标签：emacs, font-lock

我正在为 HTML/PHP 模板编写一个次要模式。

我有一个带有 PHP 关键字的 var

```
(defvar web-mode-php-keywords
 '("array" "as" "break" "catch" "continue")
  "PHP keywords.") 
```

这个 var 用于字体锁定，如下所示：

```
(defvar web-mode-php-font-lock-keywords
 (list
  (cons (concat "\\<\\(" (regexp-opt web-mode-php-keywords) "\\)\\>") 'web-mode-keyword-face)
... 
```

我无法找到一种方法让用户将关键字添加到`web-mode-php-keywords`他的列表中`.emacs`

`web-mode-php-font-lock-keywords`依赖`web-mode-php-keywords`并尝试`web-mode-php-keywords`在钩子中进行更改是行不通的，因为`web-mode-php-font-lock-keywords`已经构建了

我想我错过了一些东西......（这与`eval-after-load`？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T02:27:58.920

我想你可以`(setq web-mode-php-keywords '("array" "as" "break" "catch" "continue" "mykeyword1" "mykeyword2"...))` *在*加载 web 模式文件之前做。

# php - 从另一个产品属性中获取产品属性？

> ID：10622791
> 
> 赞同：0
> 
> 时间：2012-05-16T16:31:44.363
> 
> 标签：php, magento, wysiwyg

我们遇到了 WYSIWYS 编辑器弄乱了我们的视频嵌入代码的问题。

我们提出的一种解决方案是让嵌入代码成为自己的属性，然后从产品描述中调用该属性。

这甚至可能吗？

我们不想将它添加到 .phtml 中，我们宁愿将它放在描述中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T18:30:38.073

事实上，如果您打算完全不修改任何代码，这是**不可能的。**

但是，如果你想通过调用一个全新的函数来处理描述中的某些内容`Mage_Catalog_Model_Product`，比如

```
$_product = Mage::getModel('catalog/product');
$_product->getProcessedDescription(); // assuming this is the function you will be using in stead of $_product->getDescription(); in your PHTML files 
```

然后说你喜欢你的产品描述是这样的：

```
Lorem Ipsum Dolor Test Description
See our video below!
[[video]] 
```

`video`自定义产品属性在哪里

您可以重写 Mage_Catalog_Model_Product 类以获取新功能。为此，请创建一个模块！

应用程序/etc/modules/Electricjesus_Processeddescription.xml：

```
<?xml version="1.0"?>
<config>
  <modules>
    <Electricjesus_Processeddescription>
      <active>true</active>
      <codePool>local</codePool>
      <version>0.0.1</version>
    </Electricjesus_Processeddescription>
  </modules>
</config> 
```

应用程序/代码/本地/Electricjesus/Processeddescription/etc/config.xml

```
<?xml version="1.0"?>
<config>
  <modules>
    <Electricjesus_Processeddescription>
      <version>0.0.1</version>
    </Electricjesus_Processeddescription>
  </modules>
  <global>
    <models>
      <catalog>
        <rewrite>
            <product>Electricjesus_Processeddescription_Model_Product</product>
        </rewrite>
      </catalog>
    </models>
  </global>
</config> 
```

应用程序/代码/本地/Electricjesus/Processeddescription/Model/Product.php：

```
<?php
class Electricjesus_Processeddescription_Model_Product extends Mage_Catalog_Model_Product {
    public function getProcessedDescription() {
        $desc = $this->getDescription();
        return preg_replace("/\[\[video\]\]/", $this->getVideo(), $desc);
    }
 }
//NEVER close <?php tags in Magento class files! 
```

然后你应该能够`$_product->getProcessedDescription()`在你的 .phtml 文件中使用。

显然有很多东西丢失了，这一切似乎都是一个 hack（我什至不确定我的 preg_replace 声明），但你明白了。我们在这里所做的只是制作一个模块，只是为了重写一个 magento 核心类来做更多的处理！

此外，您可能还想获得一份[Magento 备忘](http://www.extensionprogrammer.com/magento-cheatsheet/)单，以获取有关重写的更多信息。

祝你好运！

赛斯

# sql - 从具有不同列数的多个文本文件加载数据到 1 个大表

> ID：10622793
> 
> 赞同：0
> 
> 时间：2012-05-16T16:31:45.237
> 
> 标签：sql, oracle, text-files, sql-loader

我有 30k+ 具有不同列数、空格分隔的文本文件，任务是将数据、列明智地加载到 1 个大 oracle 表中。详细信息和可能的方法如下：

文本文件 1-

```
Date Time SiteName CompName ipAdd
jkl mno pqr stu vwx 
```

文本文件 2-

```
Date CompName ipAdd
abc def ghi 
```

文本文件 3-

```
Date SiteName 
mno pqr 
```

预期的 Oracle 表 -

```
Date Time SiteName CompName ipAdd
jkl mno pqr stu vwx
abc         def ghi
mno     pqr 
```

现在，如您所见，有不同数量的“相同”列分布在多个文本文件中。而且我必须将数据加载到 1 个大 oracle 表中。

请注意：

在所有文本文件中，第一列始终是“日期”，并且这些列按顺序出现，即从日期到时间..或日期到 CompName...（从日期开始递增的顺序）

问题是我找不到一种使用 SQL Loader 的方法，它可以区分 2 个不同文本文件中的 2 列和 15 列，即使我在第一行文本文件中有它们的名称，然后加载他们在一张大桌子上。

方法：

*   将所有文本文件合并为 1 个大文本文件并执行某些操作 - 失败
*   试图放置一个分隔符，用于所有文本文件（25 列）中的最大列数，并做一些事情 - 不能
*   在 35k+ 个 oracle 表中加载 35k+ 个文本文件，然后坐下来将这些 35k+ 个 oracle 表组合成 1 个大表 - 由我周围的 PPL 推荐，但它太长了，可能是空间和时间/工作效率低下，所以我寻找一个真正的替代品

请给出你最好的方法。:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:10:47.857

假设您发布的示例是准确*的，并且每个文件的第一行是列标题*，这是我将采用的一般方法。（如果每个文件的第一行不是列标题，我认为你已经塞满了）。

在 *nix 上这一切都比在 Windows 上容易得多，尽管我希望 Powershell 可以处理这些任务（我不是 Powershell 人）。

1.  编写一个 shell 脚本来读取每个文件的第一行并将其写入列表文件以及文件名。
2.  按所有列对该列表文件的内容进行排序。这将按列对所有文件名进行分组。您需要这样做，因为仅知道列数是不够的：我假设某些具有三列的文件将拥有`Date Time SiteName`，而其他文件将拥有`Date Time ipAdd`
3.  我建议您在列表文件中标记每个组。这将非常乏味，值得使用文本处理器进行自动化，尽管现在我不确定我将如何做到这一点。
4.  您将需要为前面阶段中确定的每个列排列编写一个加载器文件。
5.  然后您需要将每个文本文件与适当的控制文件一起提交给加载程序。这就是为什么用组标记每个文件名是一个好主意：这将使这个阶段更容易自动化。

[顺便说一句，使用外部表](http://docs.oracle.com/cd/B19306_01/server.102/b14215/et_concepts.htm)而不是 SQL Loader会更简单。外部表的 DDL 比 Loader 控制文件更容易编写，您可以使用 SQL 来查询它们。基本上，外部表是临时表，但数据在 OS 文件中而不是在数据库中。

请注意，您不需要 35,000 个临时表。对于所有文本文件中的每个不同的列组合，您只需要一个。当然，鉴于您的目标表中有 25 列，可能的排列数是 huuuuuge，但我们假设它实际上是一个可管理的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:36:03.760

将每个文件加载到与文件结构匹配的临时表中。然后使用sql代码清理数据并将其移动到最终的生产表中。

或者，将文件退回给发送给您的人，并拒绝接受它们，因为它们符合标准文件规范。

# python - 如何从子模块导入python脚本？

> ID：10622795
> 
> 赞同：3
> 
> 时间：2012-05-16T16:31:52.550
> 
> 标签：python, import, module, pycharm, python-module

我有以下python模块结构：

```
/foo.py
/module
/module/__init__.py
/module/submodule/__init__.py
/module/submodule/bar.py 
```

在 foo.py 我有以下代码：

```
from module.submodule.bar import * 
```

但结果我收到以下错误：

```
'.../module/bar.py': [Errno 2] No such file or directory 
```

为什么 python 试图在 /module/bar.py 找到文件，而不是我在导入中所说的 module/submodule/bar？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:58:58.927

这是 PyCharm 的错误。如果您将脚本从一个文件夹移动到另一个文件夹，它会保存旧路径并使用它，即使您在运行配置中对其进行了更改。所以重新运行运行配置解决了这个问题。

# c# - 带有下拉菜单、文本框和复选框的 asp.net gridview

> ID：10622801
> 
> 赞同：0
> 
> 时间：2012-05-16T16:32:20.127
> 
> 标签：c#, asp.net, gridview

在用户控件中，我需要一个带有下拉列表、文本框和复选框的 asp.net 网格视图，如果存在，则可以从数据库映射其值，或者将其作为默认控件加载。然后一旦用户选择它，我需要将选定的值保存在数据库中。![在此处输入图像描述](../Images/8f81ec1028e370666621f166dd1cd34a.png)

请参阅下面的消息。这就是网格视图需要看起来的样子：有人有类似实现的例子吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:42:50.367

我会在网格外有一个按钮，上面写着“保存”onclick，它在 foreach gridview 行中循环并获取每个下拉列表、文本框、复选框的值并保存到数据库中。

```
foreach(GridViewRow row in gvMyGrid.Rows)
{
    DropDownList ddl1 = (DropDownList)row.FindControl("ddl1");
    //code here to save this value
} 
```

类似的东西，我一直在使用它，并且像魅力一样工作。

还有一种方法可以从网格中的任何控件回发并对其进行处理，检查一下，[adsanti.wordpress.com](https://adsanti.wordpress.com/2011/07/19/gridview-dropdownlist-postback-to-load-info/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:41:57.080

[使用文本框、复选框、单选按钮和下拉列表](http://www.codeproject.com/Articles/37207/Editable-Gridview-with-Textbox-CheckBox-Radio-Butt)查看可编辑的 Gridview

# tfs - 当文件有本地更改并且有新版本可用时，“tf get”

> ID：10622802
> 
> 赞同：3
> 
> 时间：2012-05-16T16:32:21.237
> 
> 标签：tfs

我喜欢在 TFS 中使用命令行，但是当您对文件进行本地更改并且有新版本可用时，我不确定如何完成与 VS2010 等效的操作。VS 询问您是否要合并等问题。

当我`tf get`对已进行本地更改且新版本文件可用的文件执行操作时，是否有自动合并的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T18:40:22.970

如果您对文件有待处理的更改并且服务器上有更新的内容，那么当您执行 a 时`tf get`，您将收到通知您有冲突，并且不会下载内容。

此时，您可以运行`tf resolve`以引发冲突解决对话框，类似于您在 Visual Studio 中看到的，允许您自动合并、在三向合并工具中合并，或者只是获取服务器或本地版本。

如果您更喜欢完全自动化的体验（或者您`tf`在 Unix 上使用命令行客户端），那么您还可以为`tf resolve`. 例如，要自动合并文件：

```
tf resolve $/Project/File.txt /auto:AutoMerge 
```

# solr - Solr日期范围查询

> ID：10622805
> 
> 赞同：2
> 
> 时间：2012-05-16T16:32:34.183
> 
> 标签：solr, solr-query-syntax

我正在尝试进行日期范围查询，但我总是遇到同样的错误。问题是当我将 + 字符添加到日期范围时

请求：

```
http://192.168.10.202:8080/solr/PageRequests/select/?q=request_datetime:[2011-09-01T00:21:57Z TO 2011-09-01T01:21:57Z+1HOUR]&version=2.2&start=0&rows=10&indent=on 
```

和堆栈跟踪：

```
at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:365)
at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:260)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(    ApplicationFilterChain.java:243)    
at org.apache.catalina.core.Appl    icationFilterChain.doFilter(Applicat    ionFilterChain.    java:210)    
at org.ap    ache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.    java:225)    
at org.ap    ache.catalina.core.StandardContextValve.invoke(StandardContextValve.    java:169)    
at org.ap    ache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.    java:472)    
at org.ap    ache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.ap    ache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.ap    ache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.ap    ache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.ap    ache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.ap    ache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.    java:999)    
at org.ap    ache.coyote.AbstractProtocol$AbstractConnectionHandler.process(    AbstractP    rotocol.java:565)    
at org.ap    ache.tomcat.util.    net.JIoEndpoint$SocketProcessor.run(JIoEndpoin    t.java:307)
at java.u    til.concurrent.Th    readPoolExecutor.runWorker(ThreadPoolExecutor.    java:1110)
at java.u    til.concurrent.Th    readPoolExecutor$Worker.run(ThreadPoolExecutor    .java:603)
at java.l    ang.Thread.run(Th    read.java:679)    
Caused by    : org.apache.luce    ne.queryParser    .ParseException: Cannot parse     'request_datetime:[2011-09-01T00:21:57Z TO 2011-09-01T01:21:57Z 1HOUR]    ':     Encounter    ed " <RANGEIN_GOO    P> "1HOUR "" a    t line 1, column 63\.    
Was expec    ting:    
"]" ...    

at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:211)
at org.apache.solr.search.LuceneQParser.parse(LuceneQParserPlugin.java:79)
at org.apache.solr.search.QParser.getQuery(QParser.java:143) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:41:54.753

由于您以这种方式调用 Solr，因此您必须使其成为`+`URL 编码，即替换为`%2B`.

# vb.net - 有需要转换为 VB.net 的遗留 VB6 代码

> ID：10622806
> 
> 赞同：3
> 
> 时间：2012-05-16T16:32:35.433
> 
> 标签：vb.net, vb6-migration

所以我有一个用旧版 VB6 编写的相当复杂的应用程序，我的任务是更新到当前的 VB.net，以便在更多机器上工作。

我的问题是，是否更容易尝试找到一个转换器来相当有效地完成它，或者我应该硬着头皮尝试用夏天剩下的时间来重写这个应用程序的野兽？

我不是专业的程序员（实际上是物理学家），而且我从高中开始就没有使用 VB 的经验......任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:41:38.277

转换器可能会花费更少的时间让您获得工作的最终结果，但它仍然可能需要大量修复。然而，最终，你会得到比现在更丑陋的代码。如果您有时间和能力这样做，那么这是一个在将代码翻译成新语言时重新设计代码的好机会。如果您使用转换器，VB.NET 中有许多新功能可能无法使用。这只是在您的情况下更重要的问题：速度或质量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T23:51:50.397

如果您决定使用转换工具，我肯定会访问[Microsoft Visual Basic 6.0 迁移资源中心](http://msdn.microsoft.com/en-us/vstudio//ms788233)。它们具有从[Visual Basic 6.0 到 Visual Basic .NET 升级评估工具](http://www.microsoft.com/en-us/download/details.aspx?id=9639)的链接——您可以使用它在转换之前评估您的 VB6 代码——以及其他信息。

[您的两个主要选择是使用 Visual Studio 2005](http://msdn.microsoft.com/en-us/library/60z6y467%28v=vs.80%29.aspx)或[2008](http://msdn.microsoft.com/en-us/library/60z6y467%28v=vs.90%29.aspx)附带的转换向导——MSFT 没有将它包含在 VS 2010 中！- 或者使用[ArtinSoft 的 Visual Basic Upgrade Companion (VBUC)](http://msdn.microsoft.com/en-us/vstudio/ff793478)的免费副本。我会推荐后者——它似乎比 MSFT VS 向导[更复杂](http://msdn.microsoft.com/en-us/vstudio/ff793478)——但它只能自由转换具有多达 10,000 行代码的项目。不仅如此，您还必须支付 $$ 才能获得许可证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T10:39:26.303

我的经验是自动转换器在做这种事情方面做得不好。

虽然这似乎是一项艰巨的任务，但我建议手工编码更可取。但是 - 也不要低估这项任务。

我个人会对那些（他们自己承认）不是从事这项工作的程序员的人感到紧张。

如果您尚未下载[Microsoft Code Advisor 加载项](http://www.microsoft.com/en-us/download/details.aspx?id=1222)- 这将提醒您在开始升级之前需要解决的一些更明显的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T18:23:03.067

另一种选择是聘请转换公司。我们选择的那个叫做 CodeArchitects。他们提供转换引擎和/或提供交钥匙解决方案的咨询服务 (http://www.vbmigration.com/)。我让他们为我的公司将一个 vb6 应用程序转换为 vb.net。这很顺利，而且成本比我自己花几个月的时间（开发/增强等）来做这件事要少。需要注意的是，您不会从自己实际操作中获得学习经验（我终于从 vb6 过渡到 vb.net）。希望这可以帮助..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T16:42:04.177

> 我不是职业程序员

如果您**想**学习 VB.Net 并且不容易被大型项目吓倒，请自己进行转换。根据应用程序的范围，您可以分步执行转换，尽管这很痛苦（我不推荐这样做）。

否则，我推荐使用转换工具。我不是 VB.Net，所以其他人可能有更好的建议。我不期望转换工具会 100% 准确，但应该提供一个非常简单的平台来继续转换。

# php - 如何更改电子邮件通知上的“返回路径”标题

> ID：10622808
> 
> 赞同：1
> 
> 时间：2012-05-16T16:32:46.360
> 
> 标签：php, email

任何人都可以请建议我如何更改邮件标题`Return-Path`

从`<apache@326932-web2.domain.co.uk>`到`fromemail@example.com`，因为通知电子邮件进入垃圾邮件/垃圾文件夹。

`Note:`我被建议在邮件发送代码（PHP）上更改此信息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:35:12.143

这就是我所做的并且每次都在工作

```
mail($to,$subject,$body,'From: fromemail@example.com','-f fromemail@example.com'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T16:34:41.187

在`mail()`函数的 headers 参数中，您可以设置：

```
<?php
$to      = 'nobody@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com' . "\r\n" .
    'Return-Path: fromemail@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T16:34:33.113

> 注意：我被建议在邮件发送代码（PHP）上更改此信息

你应该听从这个建议:-D

只需在`From: fromemail@example.com \r\n`将要发送的邮件的标题中添加一个。

# xamarin.android - Monodroid 二维码阅读器

> ID：10622815
> 
> 赞同：1
> 
> 时间：2012-05-16T16:33:08.757
> 
> 标签：xamarin.android

我正在使用以下代码使用 Zxing 库读取 QRcode 图像。我正在拍照并将其传递给二维码阅读器进行解码。

```
Reader barcodeReader = new MultiFormatReader();
LuminanceSource source = new RGBLuminanceSource(imagebytes, btmap.Width, btmap.Height);
BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));
com.google.zxing.Result result = barcodeReader.decode(bitmap); 
```

有什么方法可以在不拍照的情况下从当前相机屏幕解码二维码。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T01:40:55.917

看看我的 zxing 叉子。

[https://github.com/chkn/zxing.MonoTouch](https://github.com/chkn/zxing.MonoTouch)

它包括从相机进行实时扫描的示例：

[https://github.com/chkn/zxing.MonoTouch/tree/master/sample/QrSample.Android](https://github.com/chkn/zxing.MonoTouch/tree/master/sample/QrSample.Android)

# java - 我们可以对 jaxb 全局绑定实施限制以将 xs:dateTime 映射到 java.util.Date

> ID：10622816
> 
> 赞同：1
> 
> 时间：2012-05-16T16:33:11.307
> 
> 标签：java, jaxb

我有 3 个模式，每个模式都有 xs:dateTime。为了在 java jaxb 对象中将 xs:dateTime 表示为 java.util.Date，我使用的是 binding.xjb，如下所示

```
<bindings schemaLocation="schema1.xsd">
    <schemaBindings>
        <package name="com.mycompany.ims.schema1" />
    </schemaBindings>
</bindings> 
<bindings schemaLocation="schema2.xsd">
    <schemaBindings>
        <package name="com.mycompany.ims.schema2" />
    </schemaBindings>
</bindings> 
<bindings schemaLocation="schema3.xsd">
    <schemaBindings>
        <package name="com.mycompany.ims.schema3" />
    </schemaBindings>
</bindings>     

 <globalBindings>
    <javaType name="java.util.Date" xmlType="xs:dateTime"
      parseMethod="com.mycompany.ims.utils.JaxbDateAdapter.parseDateTime"
      printMethod="com.mycompany.ims.utils.JaxbDateAdapter.printDateTime"
    />
    <javaType name="java.util.Date" xmlType="xs:date"
      parseMethod="com.mycompany.ims.utils.JaxbDateAdapter.parseDate"
      printMethod="com.mycompany.ims.utils.JaxbDateAdapter.printDate"
    />
</globalBindings> 
```

如果我生成 jaxb 对象，所有 xs:dateTime 元素都被表示为 java.util.Date。我有一个要求，在其中一个模式（比如 schema1.xsd）中，我不想将 xs:dateTime 元素表示为 java.util.Date。

有什么方法可以配置为限制特定模式或基于节点名称？任何人都可以帮助。

我通过添加以下 xjb 配置解决了这个问题，我编辑了帖子以帮助遇到像我一样问题的人

```
<bindings schemaLocation="schema1.xsd">
    <bindings node="//xs:complexType[@name='ApplicationHeader1']">
        <bindings node=".//xs:element[@name='CreDt']">
          <javaType name="java.util.Date" 
          parseMethod="com.mycompany.ims.utils.JaxbDateAdapter.parseUTCDateTime"
          printMethod="com.mycompany.ims.utils.JaxbDateAdapter.printUTCDateTime"
            />
        </bindings>
    </bindings> 
    <bindings node="//xs:complexType[@name='ApplicationHeaderV01']">
        <bindings node=".//xs:element[@name='CreDt']">
          <javaType name="java.util.Date" 
          parseMethod="com.mycompany.ims.utils.JaxbDateAdapter.parseUTCDateTime"
          printMethod="com.mycompany.ims.utils.JaxbDateAdapter.printUTCDateTime"
            />
        </bindings>
    </bindings>
</bindings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:35:38.100

只需为不同的模式使用不同的绑定文件。将一个用于没有 xs:dateTime 自定义的 schema1.xsd，另一个用于确实包含它的另一个架构。

# java - 如何使用正则表达式计算文本中的单词数？

> ID：10622826
> 
> 赞同：3
> 
> 时间：2012-05-16T16:33:43.953
> 
> 标签：java, regex, string, split, words

我想将文本拆分为单词，以计算单词的数量。

这就是想象的样子：

```
int words = text.split("[\\p{Punct}*\\p{Space}*]").length; 
```

我尝试了多种组合，但它似乎分成了太多手动部分，例如

```
"word1       word2" 
```

...这个正则表达式有 8 个单词，我希望它只有 2 个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:35:50.477

尝试以下正则表达式：

```
[\\p{Punct}\\p{Space}]+ 
```

当前正则表达式的问题在于它只匹配一个字符，因此分别匹配 和 之间`word1`的每个空格`word2`。放置在字符组之外的重复操作符解决了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T16:42:50.697

```
int countWords(String input) {
   return input.trim().split("\\s+").length;
} 
```

一个单词只是被空格包围的文本。`String`可以通过调用`String.split()`using`"\\s+"`作为分隔符来解析 a 中的单词。

请注意，这`"\\s+"`是一个正则表达式。它匹配至少包含一个空白字符（例如空格、制表符或换行符）的字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T16:43:00.210

```
int words = text.trim().split("\\s+").length; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T16:49:45.503

使用[Guava](http://code.google.com/p/guava-libraries/)，将 Splitter 定义为常量：

```
private static final Splitter WORD_SPLITTER = 
    Splitter.on(CharMatcher.JAVA_LETTER_OR_DIGIT.negate())
            .trimResults()
            .omitEmptyStrings(); 
```

并在您的代码中使用它：

```
int words = Iterables.size(WORD_SPLITTER.split(yourString)); 
```

# python - 在 django 模型中调用 return self.property 时我做错了什么？

> ID：10622828
> 
> 赞同：1
> 
> 时间：2012-05-16T16:33:53.410
> 
> 标签：python, django

模型

```
from django.db import models

class Domain(models.Model):
    url = models.CharField(max_length=200)
    expires = models.CharField(max_length=200)
    def __unicode__(self):
        return self.url 
```

壳

```
>>>Domian.objects.all()
[<Domain: Domian object>] 
```

它应该是

```
[<Domain: http://voikai.com>] 
```

是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-16T16:41:04.727

我不确定，但尝试在`__unicode__`方法中返回一个实际的 unicode 字符串。

如在

```
return u"%s" %(self.url,) 
```

# c# - DevExpress aspxCallbackPanel 行为和控制状态

> ID：10622831
> 
> 赞同：0
> 
> 时间：2012-05-16T16:34:03.267
> 
> 标签：c#, asp.net, ajax, devexpress

我正在使用 ASPxperience 控件进行测试。我有一个简单的 CallbackPanel，里面有一个文本框和一个 PageControl。只是为了测试，我在回调面板下放置了一个按钮。单击时，我想向 PageControl 添加一个额外的选项卡。

标记：

```
<dx:ASPxCallbackPanel ID="ASPxCallbackPanel1" runat="server" Width="200px" OnCallback="ASPxCallbackPanel1_Callback1">
    <PanelCollection>
        <dx:PanelContent runat="server">
            <dx:ASPxPageControl ID="ASPxPageControl1" runat="server" ActiveTabIndex="0" ClientInstanceName="PageControl1"
                Height="359px" Width="538px">
                <TabPages>
                    <dx:TabPage>
                        <ContentCollection>
                            <dx:ContentControl runat="server">
                            </dx:ContentControl>
                        </ContentCollection>
                    </dx:TabPage>
                </TabPages>
            </dx:ASPxPageControl>
            <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
        </dx:PanelContent>
    </PanelCollection>
</dx:ASPxCallbackPanel>

 <input id="Button1" type="button" value="button" onclick="ASPxCallbackPanel1.PerformCallback('addtab');" /> 
```

代码隐藏

```
 protected void ASPxCallbackPanel1_Callback1(object sender, DevExpress.Web.ASPxClasses.CallbackEventArgsBase e)
    {
        ASPxPageControl1.TabPages.Add("Test");
        TextBox1.Text += "1";
    } 
```

现在奇怪的是，每次单击按钮时，在文本框中总是会在文本框的内容中添加“1”。因此，如果您单击 5 次，它将显示：'11111'。但是，PageControl 总是删除（或忘记或忽略？）之前添加的选项卡，因此您总是只剩下一个名为“测试”的额外选项卡。

这是怎么来的？我不明白 ？（我对这个控制套件相当陌生）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:15:16.833

使用`ASPxCallbackPanel`'s 你可以访问`ViewState`，因为它被发送到服务器，但是`ViewState`在回调期间不能在服务器端更改它，所以它最后不会更新。这种行为是设计使然，因此您无能为力。

在您的特定情况下，唯一已知的状态是在第一页加载时加载的状态，因此，在回调中，唯一已知的 TabPage 是标记处的状态。

您可以：

1.  [在标记上设计所有选项卡（或在第一次加载时），并使用ASPxPageControl 客户端 API](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxTabControlScriptsASPxClientPageControlMembersTopicAll)和[ASPxTabPage 客户端 API](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxTabControlScriptsASPxClientTabMembersTopicAll)使它们可见/不可见。

2.  使用[UpdatePanel](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.aspx)，它允许您访问和更改`ViewState`.

# jquery - jQuery插件Flot粉碎网站

> ID：10622832
> 
> 赞同：0
> 
> 时间：2012-05-16T16:34:06.023
> 
> 标签：jquery, flot

使用[Flot](http://code.google.com/p/flot "弗洛特")显示一些图表。出乎意料的是，网站开始崩溃。
问题出在 jquery.flot.js 的这一行：

```
if (!c.getContext) // excanvas hack
    c = window.G_vmlCanvasManager.initElement(c); 
```

例外：`G_vmlCanvasManager is undefined`.

与 Firefox 12 和真正的 Web 服务器一起工作。
与 Firefox 12 配合使用 Visual Studio 2010（本地服务器）。
将 IE 9 与真正的 Web 服务器一起使用时运行良好。
将 IE 9 与 Visual Studio 2010（本地服务器）一起使用时崩溃。
开发计算机上没有安装 IIS。

重新安装 VS 并清除其缓存没有帮助。
下载新版本的 Flot 并没有帮助。
禁用授权机制没有帮助。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T17:04:44.137

该错误表明浏览器不支持 HTML5 画布，并且您没有使用 Excanvas 插件来模拟它。

我的猜测是问题在于您的页面没有使用正确的 DOCTYPE：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

当 DOCTYPE 缺失或不正确时，IE9 以 quirks 模式呈现页面，该模式不支持 HTML5 画布。然后，您要么不包括 excanvas.js，要么将其包装在一个`[if lte IE 8]`不会触发的条件中，因为浏览器**是**IE9。

您的真实 Web 服务器可能会自动添加 DOCTYPE，而 Visual Studio 不会。如果是这种情况，那么您需要自己添加它，或者让 VS 服务器输出一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:45:46.223

你一开始有这个功能吗？: $(document).ready(function() {

# python - python坐标变换/插值可能吗？

> ID：10622834
> 
> 赞同：2
> 
> 时间：2012-05-16T16:34:15.217
> 
> 标签：python, geocoding, transformation, coordinate-transformation

嗨！

我实际上正在研究一些地理数据集。我正在使用 python 和 pygrib 来读取原始数据。pygrib 为我的“旋转”网格返回美妙的经度/纬度值（见情节）。我要做的是将数据带到正交的地理经度/纬度（所以是网格）。用手做没有问题，但我认为 python 有一个包可以为我做这件事？如果是的话，我在网上找到了任何好的提示。

pygrib 似乎对计算我的纬度的投影足够了解。所以我猜想某处有一个包可以将我的数据（通过插值）转换为另一个投影？:)

可能有人可以给我一些提示和/或链接。会很好！

感谢并祝愿 Reto Stauffer, 奥地利

![](../Images/7f08f5cea819aeea0c64adc94809c374.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:42:45.177

你可以使用 GDAL，有一个[命令行工具](http://www.gdal.org/gdalwarp.html)可以做到这一点。

您可以将 gdal 库中的 ogr 模块导入 python，从[这里](http://www.gdal.org/)开始，但命令行工具在类似的情况下为我做了诀窍。

# java - JRE 1.7.0_03 的任务空间 6.7 SP1 问题

> ID：10622835
> 
> 赞同：0
> 
> 时间：2012-05-16T16:34:15.487
> 
> 标签：java, applet, emc

使用 JRE 1.7.0_03 时，我们在任务空间 6.7 SP1 中的导入和导出上加载 java 小程序时遇到问题。在加载将文件拖放到其中的 java 小程序时，用户单击“导入”后会发生错误。这是一个零星的问题，它有时可能会工作，然后在其他初始化时崩溃。我们遇到错误的测试环境是在使用 IE 9.0.8112.16421 的 Windows 7 机器上。Apache Tomcat 是 Apache Tomcat 版本 6.0.32。有没有其他人看到这个问题并知道如何解决它？

# jquery-plugins - JqueryMobile DateBox 插件需要 6-7 秒才能加载

> ID：10622846
> 
> 赞同：0
> 
> 时间：2012-05-16T16:34:48.070
> 
> 标签：jquery-plugins, jquery-mobile, jquery-ui-datepicker

我正在使用可以在链接[http://dev.jtsage.com/jQM-DateBox/中找到的 Jquery Mobile Datebox](http://dev.jtsage.com/jQM-DateBox/)

它在 iPhone 设备上加载良好，但是当我在黑莓粗体 9780 上使用相同的代码时，日期框需要很长时间才能弹出。首先在 4 秒内弹出，然后在接下来的 2-3 秒内完全集中。这是糟糕的用户体验。关于可以做些什么来改善这一点的任何建议？

# iphone - iOS 是否会更新文件修改日期？

> ID：10622850
> 
> 赞同：3
> 
> 时间：2012-05-16T16:35:07.850
> 
> 标签：iphone, ios, filesystems, file-attributes

我正在尝试确定我的应用程序临时文件目录中的文件是否（以及何时）被修改，但修改日期（`NSFileModificationDate`在文件属性中）似乎总是与创建日期匹配（`NSFileCreationDate`）。我有一些模糊的回忆，iOS 中的文件系统不会更新修改日期，但我没有发现任何地方都有记录。

任何人都可以确认（并且可能指向文档）iOS 不会更新修改日期吗？

此外，是否有其他方法可以确定文件是否已更改，而不是散列内容并自己跟踪结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:15:33.737

我认为这仍然有效。取自[按日期修改顺序获取目录内容](https://stackoverflow.com/questions/1523793/get-directory-contents-in-date-modified-order)：

```
+ (NSDate*) getModificationDateForFileAtPath:(NSString*)path {
    struct tm* date; // create a time structure
    struct stat attrib; // create a file attribute structure

    stat([path UTF8String], &attrib);   // get the attributes of afile.txt

    date = gmtime(&(attrib.st_mtime));  // Get the last modified time and put it into the time structure

    NSDateComponents *comps = [[NSDateComponents alloc] init];
    [comps setSecond:   date->tm_sec];
    [comps setMinute:   date->tm_min];
    [comps setHour:     date->tm_hour];
    [comps setDay:      date->tm_mday];
    [comps setMonth:    date->tm_mon + 1];
    [comps setYear:     date->tm_year + 1900];

    NSCalendar *cal = [NSCalendar currentCalendar];
    NSDate *modificationDate = [[cal dateFromComponents:comps] addTimeInterval:[[NSTimeZone systemTimeZone] secondsFromGMT]];

    [comps release];

    return modificationDate;
} 
```

# sql - 甲骨文分组

> ID：10622856
> 
> 赞同：4
> 
> 时间：2012-05-16T16:35:28.207
> 
> 标签：sql, oracle, gaps-and-islands

我想要做的是总结ID与一组时间的每个“情节”的时间，而不是获得NC到C和C到NC的第一集时间以及从NC到C的最后一集时间和 C 到 NC 在下表中我手动添加了`GRP_Time`列。我还添加了最终结果表

这是我试图系统地生成的指标。

```
ID    ASSign_ID  GRP      Time            GRP_Time   
11    1788       NC       6             
11    1802       NC       1               7
11    2995       C        7               7
11    5496       NC       11              11
11    6077       C        2 
11    6216       C        2
11    6226       C        4               8  
11    6790       NC       5               5
12    1234       C        6               6
12    2345       NC       1               
12    3456       NC       8               9
12    4567       C       11              11
14    6789       C        2 
14    7890       C        2
14    8900       C        4               8  
14    8904       NC       5               5 
```

结果表

```
ID   First_ET_NC_C    First_ET_C_NC   LAST_ET_NC_C   LAST_ET_C_NC
11   7                7               11             8
12   9                6                9             6 
14   -                8                -             8 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T17:55:36.287

尝试这个：

```
with seq as 
(    
  select tbl.*, 
      row_number() over(order by assign_id) rn  -- naturalized the order
  from tbl
),
grp as 
(
  select cr.*,          
     sum(case when cr.grp = pr.grp or pr.grp is null then 0 else 1 end)
     over(order by cr.rn) gn      
  from seq cr -- current row
  left join seq pr -- previous row
  on pr.rn = cr.rn - 1
)
,run as
(
  select grp.*,
      sum(time) over(partition by gn order by rn) as run_tot
  from grp
)
select 
   id, assign_id, grp, time,
   case when max(rn) over(partition by gn) <> rn then 
      null
   else
      run_tot
   end as run_total
from run r; 
```

输出：

```
ID        ASSIGN_ID GRP       TIME      RUN_TOTAL
11        1788      NC        6         (null)
11        1802      NC        1         7
11        2995      C         7         7
11        5496      NC        11        11
11        6077      C         2         (null)
11        6216      C         2         (null)
11        6226      C         4         8
11        6790      NC        5         5 
```

现场测试：[http ://www.sqlfiddle.com/#!4/faacc/1](http://www.sqlfiddle.com/#!4/faacc/1)

* * *

这个怎么运作：

```
ID        ASSIGN_ID GRP       TIME      RN        GN
11        1788      NC        6         1         0
11        1802      NC        1         2         0
11        2995      C         7         3         1
11        5496      NC        11        4         2
11        6077      C         2         5         3
11        6216      C         2         6         3
11        6226      C         4         7         3
11        6790      NC        5         8         4 
```

我们基本上需要为`GN`一个连续的 grp 分配一个组号（列）。然后我们可以做一个由 GN 划分的运行总和

您可以在此处查看查询的进度：[http ://www.sqlfiddle.com/#!4/faacc/1](http://www.sqlfiddle.com/#!4/faacc/1)

每一步都建立在上一步的基础之上。只需向下滚动即可查看解决方案的进展情况

* * *

**编辑**

查询可以缩短，因为您的报告没有显示每行总计的运行，它只显示在最后一行，而不是`sum(time) over(partition by gn order by rn) as run_tot`，我们可以这样做`sum(time) over(partition by gn) as run_tot`，即我们删除`order by rn`; 然后检测该行是否是最后一行，如果是则执行`sum over`，否则显示null。

最终查询：

```
with seq as 
(

  select

     tbl.*, 
     row_number() over(order by assign_id) rn  -- naturalized the order
  from tbl
),
grp as 
(
  select 

     cr.*,

     sum(case when cr.grp = pr.grp or pr.grp is null then 0 else 1 end)
     over(order by cr.rn) gn

  from seq cr -- current row
  left join seq pr -- previous row
  on pr.rn = cr.rn - 1
)
select
     grp.*,

     case when max(rn) over(partition by gn) <> rn then -- if not last row
        null
     else -- if last row
        sum(time) over(partition by gn) 
     end as running_total
from grp; 
```

现场测试：[http ://www.sqlfiddle.com/#!4/faacc/7](http://www.sqlfiddle.com/#!4/faacc/7)

* * *

* * *

**编辑**

关于多个ID，例如6790：

```
ID        ASSIGN_ID GRP       TIME
11        1788      NC        6
11        1802      NC        1
11        2995      C         7
11        5496      NC        11
11        6077      C         2
11        6216      C         2
11        6226      C         4
11        6790      NC        5
12        6790      NC        1
12        6791      NC        3
12        6792      NC        1
12        6793      NC        4
12        6794      C         1
12        6795      C         6
12        6797      C         8
13        6793      C         1
13        6794      C         4
13        6795      C         3 
```

有两个相似的 ASSIGN_ID，例如 6790，但它属于一个更大的组（在 ID 上，分别为 11 和 12），因此为了隔离这两个组，我们必须按 ID 对它们进行分区。

这是最终查询，请注意在评论中**添加了此**内容：[http ://www.sqlfiddle.com/#!4/83789/2](http://www.sqlfiddle.com/#!4/83789/2)

```
with seq as 
(    
  select tbl.*, 

     -- added this: partition by id
     -- naturalized the order: rn       
     row_number() over(partition by id order by assign_id) rn  
  from tbl
)
,grp as 
(
  select cr.*,        

     -- added this: partition by cr.id
     sum(case when cr.grp = pr.grp then 0 else 1 end)
     over(partition by cr.id order by cr.rn) gn      
  from seq cr -- current row
  left join seq pr -- previous row
  on 
    pr.id = cr.id -- added this
    and pr.rn = cr.rn - 1
)
select id, assign_id, grp, time, 

     -- added this: partition by id
     case when max(rn) over(partition by id,gn) <> rn then 
        null
     else
        -- added this: partition by id
        sum(time) over(partition by id,gn) 
     end as running_total
from grp
order by id, rn; 
```

输出：

```
ID        ASSIGN_ID GRP       TIME      RUNNING_TOTAL
11        1788      NC        6         (null)
11        1802      NC        1         7
11        2995      C         7         7
11        5496      NC        11        11
11        6077      C         2         (null)
11        6216      C         2         (null)
11        6226      C         4         8
11        6790      NC        5         5
12        6790      NC        1         (null)
12        6791      NC        3         (null)
12        6792      NC        1         (null)
12        6793      NC        4         9
12        6794      C         1         (null)
12        6795      C         6         (null)
12        6797      C         8         15
13        6793      C         1         (null)
13        6794      C         4         (null)
13        6795      C         3         8 
```

这是如何工作的，请注意**ID 和 GN**：

```
ID        ASSIGN_ID GRP       TIME      RN        GN        RUNNING_TOTAL
11        1788      NC        6         1         1         (null)
11        1802      NC        1         2         1         7
11        2995      C         7         3         2         7
11        5496      NC        11        4         3         11
11        6077      C         2         5         4         (null)
11        6216      C         2         6         4         (null)
11        6226      C         4         7         4         8
11        6790      NC        5         8         5         5
12        6790      NC        1         1         1         (null)
12        6791      NC        3         2         1         (null)
12        6792      NC        1         3         1         (null)
12        6793      NC        4         4         1         9
12        6794      C         1         5         2         (null)
12        6795      C         6         6         2         (null)
12        6797      C         8         7         2         15
13        6793      C         1         1         1         (null)
13        6794      C         4         2         1         (null)
13        6795      C         3         3         1         8 
```

在此处查看查询进度：[http ://www.sqlfiddle.com/#!4/83789/2](http://www.sqlfiddle.com/#!4/83789/2)

* * *

**更新**尝试使用这个，它更简洁易读：[https ://stackoverflow.com/a/10629498](https://stackoverflow.com/a/10629498)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T17:26:32.287

您只能在 Oracle 上使用以下查询，因为它使用 LAG()

```
SELECT Table1.ID, 
       Table1.ASSign_ID, 
       Table1.GRP, 
       Table1.TIME, 
       grpSum.GRP_TIME 
FROM   Table1 
       left join (SELECT ID, 
                         MAX(ASSIGN_ID) ASSIGN_ID, 
                         SUM(TIME)      GRP_TIME 
                  FROM   (SELECT ID, 
                                 ASSIGN_ID, 
                                 GRP, 
                                 TIME, 
                                 SUM(GC) over (PARTITION BY GRP ORDER BY ID, ASSIGN_ID ) g 
                          FROM   (SELECT ID, 
                                         ASSIGN_ID, 
                                         GRP, 
                                         TIME, 
                                         CASE 
                                           WHEN GRP = Lag(GRP) over (ORDER BY ID, ASSIGN_ID) 
                                               THEN  0 
                                               ELSE 1 
                                         END gc 
                                  FROM   TABLE1) a) b
                  GROUP  BY ID, 
                            GRP, 
                            g) grpSum 
         ON table1.ID = grpSum.ID 
            AND table1.ASSIGN_ID = grpSum.ASSIGN_ID 
ORDER BY Table1.ID, 
         Table1.ASSign_ID 
```

[演示](http://sqlfiddle.com/#!4/49de7/10)

差距和孤岛解决方案有点难以描述，但这是每个部分的作用

*   最里面的查询“A”使用 LAG 将 1 分配给“episode”中的第一个项目，然后为每个成员分配 0。

*   下一个查询“B”使用 SUM OVER 为“剧集”的每个成员分配相同的标识符。请注意，如果 GRP 不同，则相同的标识符将用于不同的剧集

*   查询 grpSum 只是对每个“episode”的时间进行求和，并将最大的 Assing_ID 标识为“episode”中的最后一次

*   然后我们在 ID 上加入原始表并进行投影。

*我在偷迈克尔的进度演示想法*

[您可以在此处查看子查询](http://sqlfiddle.com/#!4/49de7/17)的进度 （向下滚动）

注意：您还可以使用 Micheal 的答案中的`CASE MAX OVER`and`SUM OVER`技术来删除 LEFT JOIN 和 grpSUM 查询

```
SELECT ID, 
       ASSIGN_ID, 
       GRP, 
       TIME, 
       CASE 
         WHEN Max(ASSIGN_ID) OVER (partition BY ID, GRP, G) = ASSIGN_ID THEN 
         SUM (TIME) OVER (partition BY ID, GRP, G) 
         ELSE NULL 
       END GRP_TIME 
FROM   (SELECT ID, 
               ASSIGN_ID, 
               GRP, 
               TIME, 
               Sum(GC) OVER (partition BY GRP ORDER BY ID, ASSIGN_ID ) g 
        FROM   (SELECT ID, 
                       ASSIGN_ID, 
                       GRP, 
                       TIME, 
                       CASE 
                         WHEN GRP = Lag(GRP) OVER (ORDER BY ID, ASSIGN_ID) THEN 
                         0 
                         ELSE 1 
                       END gc 
                FROM   TABLE1) a) b
    ORDER BY ID, 
             ASSign_ID 
```

[演示](http://sqlfiddle.com/#!4/49de7/35)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T03:36:42.357

我非常坚持我[之前使用 row_number 的答案](https://stackoverflow.com/a/10624010)，我假设没有很好的对行进行排序的候选者（事实上，我`ORDER BY NULL`在第一次代码迭代时进行了代码迭代，以明确代码依赖于行的物理排序） . 当我注意到你的数据有一个自然的顺序时，我应该已经从头开始了。

id + assign_id 非常适合分区和排序，我们可以制定一个更简单的查询，我们可以只使用 LAG。

这是最短和最简单的查询：[http ://www.sqlfiddle.com/#!4/b6c14/3](http://www.sqlfiddle.com/#!4/b6c14/3)

```
with hm as -- headers marked
(
    select tbl.*,

      case when lag(grp) over(partition by id order by assign_id) = grp then 
        0 
      else 
        1 
      end mark_header

    from tbl
)
,grp as -- grouping
(
    select 
      hm.*,

      -- gn: group number
      sum(mark_header) over(partition by id order by assign_id) as gn
    from hm
)
select -- final query
    id, assign_id, grp, time,

    case when max(assign_id) over(partition by id,gn) = assign_id then
       sum(time) over(partition by id,gn) 
    else
       null
    end as running_total
from grp
order by id, assign_id; 
```

输出：

```
ID        ASSIGN_ID GRP       TIME      RUNNING_TOTAL
11        1788      NC        6         (null)
11        1802      NC        1         7
11        2995      C         7         7
11        5496      NC        11        11
11        6077      C         2         (null)
11        6216      C         2         (null)
11        6226      C         4         8
11        6790      NC        5         5
12        6790      NC        1         (null)
12        6791      NC        3         (null)
12        6792      NC        1         (null)
12        6793      NC        4         9
12        6794      C         1         (null)
12        6795      C         6         (null)
12        6797      C         8         15
13        6793      C         1         (null)
13        6794      C         4         (null)
13        6795      C         3         8 
```

这是如何工作的，请注意**ID 和 GN**，这就是我们建立在我们的运行总数之上的地方：

```
ID        ASSIGN_ID GRP       TIME      MARK_HEADER  GN
11        1788      NC        6         1            1
11        1802      NC        1         0            1
11        2995      C         7         1            2
11        5496      NC        11        1            3
11        6077      C         2         1            4
11        6216      C         2         0            4
11        6226      C         4         0            4
11        6790      NC        5         1            5
12        6790      NC        1         1            1
12        6791      NC        3         0            1
12        6792      NC        1         0            1
12        6793      NC        4         0            1
12        6794      C         1         1            2
12        6795      C         6         0            2
12        6797      C         8         0            2
13        6793      C         1         1            1
13        6794      C         4         0            1
13        6795      C         3         0            1 
```

在此处查看进度：[http ://www.sqlfiddle.com/#!4/b6c14/3](http://www.sqlfiddle.com/#!4/b6c14/3)

* * *

***可以***是 Oracle 优化的（使用 DECODE 而不是 CASE WHEN）： [http ://www.sqlfiddle.com/#!4/b6c14/6](http://www.sqlfiddle.com/#!4/b6c14/6)

```
with hm as -- headers marked
(
    select tbl.*,

      decode(lag(grp) over(partition by id order by assign_id), grp, 0, 1)
         as mark_header

    from tbl
)
,grp as -- grouping
(
    select 
      hm.*,

      sum(mark_header) over(partition by id order by assign_id) as gn
    from hm
)
select -- final query
    id, assign_id, grp, time,

    decode(max(assign_id) over(partition by id,gn), assign_id,           
       sum(time) over(partition by id,gn), null) as running_total 

from grp
order by id, assign_id; 
```

# drupal - Drupal 表单 API

> ID：10622865
> 
> 赞同：0
> 
> 时间：2012-05-16T16:35:46.177
> 
> 标签：drupal

所以我一直在关注本教程[http://drupal.org/node/751826](http://drupal.org/node/751826)。我采用了以下代码：

```
<?php
function test_myform(&$form_state) {
  // Access log settings:
  $options = array('1' => t('Enabled'), '0' => t('Disabled'));
  $form['access'] = array(
    '#type' => 'fieldset',
    '#title' => t('Access log settings'),
    '#tree' => TRUE,
  );
  $form['access']['log'] = array(
    '#type' => 'radios',
    '#title' => t('Log'),
    '#default_value' =>  variable_get('log', 0),
    '#options' => $options,
    '#description' => t('The log.'),
  );
  $period = drupal_map_assoc(array(3600, 10800, 21600, 32400, 43200, 86400, 172800, 259200, 604800, 1209600, 2419200, 4838400, 9676800), 'format_interval');
  $form['access']['timer'] = array(
    '#type' => 'select',
    '#title' => t('Discard logs older than'),
    '#default_value' => variable_get('timer', 259200),
    '#options' => $period,
    '#description' => t('The timer.'),
  );
  // Description
  $form['details'] = array(
    '#type' => 'fieldset',
    '#title' => t('Details'),
    '#collapsible' => TRUE,
    '#collapsed' => TRUE,
  );
  $form['details']['description'] = array(
    '#type' => 'textarea',
    '#title' => t('Describe it'),
    '#default_value' =>  variable_get('description', ''),
    '#cols' => 60,
    '#rows' => 5,
    '#description' => t('Log description.'),
  );
  $form['details']['admin'] = array(
    '#type' => 'checkbox',
    '#title' => t('Only admin can view'),
    '#default_value' => variable_get('admin', 0),
  );
  $form['name'] = array(
    '#type' => 'textfield',
    '#title' => t('Name'),
    '#size' => 30,
    '#maxlength' => 64,
    '#description' => t('Enter the name for this group of settings'),
  );
  $form['hidden'] = array('#type' => 'value', '#value' => 'is_it_here');
  $form['submit'] = array('#type' => 'submit', '#value' => t('Save'));
  return $form;
}

function test_page() {
  return drupal_get_form('test_myform');
}
?> 
```

我将此代码粘贴到我的文本字段中。最后，在 php 关闭标记之前，我调用了函数 test_page 如下

```
test_page(); 
```

保存后出现以下错误。

```
 Warning: Parameter 1 to test_myform() expected to be a reference, value given in drupal_retrieve_form() (line 785 of /var/www/html/includes/form.inc).
    Warning: Parameter 1 to test_myform() expected to be a reference, value given in drupal_retrieve_form() (line 785 of /var/www/html/includes/form.inc). 
```

现在我不知道为什么。基本上我要做的是创建一个网络表单并将其本地保存在服务器上。如果你们除了使用 Drupal Form API 之外还有其他想法，欢迎提出建议。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:45:10.800

尝试将 test_myform() 函数中的参数更改为以下

```
function test_myform($form, &$form_state) {
  ...
} 
```

这样做吗？

* * *

在您发表评论后添加答案：

我不确定你在哪里以及如何调用你的函数，所以我无能为力。你为什么不干脆去掉那个 test_page() 函数并从菜单项中调用drupal 表单。

因此，在您的模块中，只需使用以下菜单挂钩：

```
 /** 
 * Implementation of hook_menu
 */
 function YOUR_MODULE_menu() {

 $items['test/page'] = array(
    'type' => MENU_CALLBACK,
    'title' => t('Your page title'),
    'page callback' => 'drupal_get_form',
    'page arguments' => array('test_myform'),
    'access arguments' => array('view published content'),
 );

 return($items);

} 
```

要对其进行测试，请确保您 1) 启用您的模块，2) 刷新所有缓存以便重建菜单，以及 3) 转到您替换该菜单项的任何内容，在本示例中为 www.yoursite.com/test /page 或 localhost/test/page。我认为这是调用表单功能的更好方法——通过菜单。

那样有用吗？

# objective-c - 如何在 Xcode 中访问除 Cocoa Storyboard 库之外的库？

> ID：10622866
> 
> 赞同：1
> 
> 时间：2012-05-16T16:35:47.317
> 
> 标签：objective-c, ios, xcode

当我在 Xcode 中的情节提要上时，我只能访问 Cocoa Storyboard 库类。但是，当我打开应用程序时，我会看到诸如地址簿之类的类和其他 GUI 对象（例如斜面按钮和组合框）。如何访问故事板？是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:43:04.790

这些其他对象不是 UIKit 的一部分，因此不能添加到您的故事板或您的应用程序中。当您编辑代码时，XCode 并不真正知道（或有错误！）您正在做一个 iOS 项目，因此它也会在对象浏览器中向您显示 AppKit (OS X) 小部件。

# android - 从我的 android 应用打开网页，发布值

> ID：10622872
> 
> 赞同：1
> 
> 时间：2012-05-16T16:36:00.867
> 
> 标签：android, android-intent

我需要从我的安卓手机访问一个网站，这个网站接受一些 POST 值。

当我在我的电脑上做同样的事情时，是一个带有 php 的表单：

```
<form name="form1" method="post" action="scripts/pago.php"> 
```

我可以使用以下代码打开一个网站：

```
 Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
        startActivity(browserIntent); 
```

它可以毫无问题地打开浏览器，但是，如何添加帖子值？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:02:40.597

试试这个：

```
public void postData() throws Exception {

 HttpClient client = new DefaultHttpClient();
 HttpPost httppost = new HttpPost("http://www.xyz.com");

 List<NameValuePair> list = new ArrayList<NameValuePair>(1);

 list.add(new BasicNameValuePair("name","ABC");

 httppost.setEntity(new UrlEncodedFormEntity(list));

 HttpResponse r = client.execute(httppost);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T17:18:40.440

[Android Webview POST](https://stackoverflow.com/questions/3471581/android-webview-post)

您可以使用 webview 打开网页，然后发出 post 请求。在上面给出的链接中进行了解释。

# php - 如何处理 php 中不同文件的“单独包含”？

> ID：10622875
> 
> 赞同：0
> 
> 时间：2012-05-16T16:36:06.133
> 
> 标签：php, include, require, include-path

一个`index.php`文件有许多包含文件，在其中一些包含文件中，有一些变量属于一个`index.php`包含的文件。我只能将“包含代码”写入`index.php`文件或插入“包含代码”所有单独的文件`index.php`包含哪些文件？可能很难理解我写的内容，但这是我的文件夹和代码：

我的文件夹和文件在这里：

```
/
|
+ includes/
|   |
|   + initialize.php
|   + functions.php
|   + config.php
|
+ layouts/
|   |
|   + header.php
|   + sidebar.php
|   + content.php
|   + footer.php
|
+ images/
|   |
|   + image1.jpg
|
+ index.php 
```

我的 initialize.php 在这里：

```
//initialize.php

<?php
defined('DS') ? null : define('DS', '/');

defined('SITE_ROOT') ? null : 
define('SITE_ROOT', '/webspace/httpdocs');

defined('LIB_PATH') ? null : define('LIB_PATH', SITE_ROOT.DS.'includes');

require_once(LIB_PATH.DS.'config.php');

require_once(LIB_PATH.DS.'functions.php');

?> 
```

这是function.php

```
//function.php

<?php
function include_layout_template($template="") {

    include(SITE_ROOT.DS.'layouts'.DS.$template);
}

function __autoload($class_name) {
    $class_name = strtolower($class_name);
        $path = LIB_PATH.DS."{$class_name}.php";
        if(file_exists($path)) {
           require_once($path);
        } else {
    die("The file {$class_name}.php could not be found.");
   }
}
?> 
```

这是 content.php 的一部分

```
//content.php

 <img src="<?php echo SITE_ROOT.DS.'images'.DS.'image1.jpg' ?>" /> 
```

这是 index.php：

```
//index.php

<?php require_once "includes/initialize.php";?>
<?php include_layout_template("index_header.php"); ?>
<?php include_layout_template("sidebar.php"); ?>
<?php include_layout_template("index_content.php"); ?>
<?php include_layout_template("footer.php"); ?> 
```

所以，我的问题是 content.php 中的代码：

```
<img src="<?php echo SITE_ROOT.DS.'images'.DS.'image1.jpg' ?>" /> 
```

不起作用。因为该文件无法识别`SITE_ROOT`和`DS`常量。所以，站点中没有图像。我知道，因为 initialize.php 不包括在内。**function.php**中没有包含，`DS`但是可以`SITE_ROOT`工作。虽然**initialize.php**包含在 index.php 中，但为什么 include 下的文件**看**不到这些`SITE_ROOT`和`DS`. 如果我插入到包含文件夹中的文件，那么**index.php**`<?php require_once "includes/initialize.php";?>`中会有很多 initialize.php 。

 **通过使用`<?php require_once "includes/initialize.php";?>`只有一个文件，我该如何解决这个问题？或者如何更好的设计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:40:33.787

我强烈建议你看看PHP 中的[OOP](http://us2.php.net/oop)和[自动加载](http://us.php.net/manual/en/language.oop5.autoload.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:48:59.350

functions.php 之所以有效，是因为它包含在包含所需定义的 initialize.php 中。

content.php 需要包含 initialize.php。尽管 index.php 包含它，但 content.php 是一个不同的文件，并且不是调用链的一部分，并且独立于 index.php 被调用，因此需要包含 initialize.php。

您需要在所有程序文件中包含 initialize.php 作为通用包含文件。

另一种方法是在 index.php 中包含 content.php，然后 content.php 将能够自动访问 initialize.php 中的定义。**

# javascript - 优化/分析 CSS/JS 连接

> ID：10622877
> 
> 赞同：1
> 
> 时间：2012-05-16T16:36:26.573
> 
> 标签：javascript, css

将 CSS/JS 文件组合在一起是一种最佳做法，这样可以减少对站点的请求。但是，究竟如何做到这一点并非易事。三种极端策略：

1.  不要结合任何东西。适合缓存，但对于没有缓存文件的用户来说会有很多 HTTP 请求。
2.  将网站上的每个文件合并为一个。也适用于缓存，并且只有一个请求，但是文件会不必要地大，并且会包含很多不需要的东西，这会减慢浏览器的速度并可能导致冲突。
3.  仅合并当前页面所需的文件。只有一个请求，没有不需要的内容，但是对于缓存来说太可怕了——如果你有 10 个文件，它们可以以一千种可能的组合出现，所以即使你的访问者看到了一个包含文件 1 和 2 的页面以及另一个包含文件 3 和 4 的页面，他们仍然需要为包含文件 1、2 和 3 的页面下载新的组合文件。（如果我们想保留文件的顺序，情况会变得更糟。）

理想的解决方案可能是这三种策略的组合（组合一些在很多页面上使用的文件并将它们包含在任何地方，并将其余的组合成几个文件，希望与在其他页面上的方式相同）页），但很难找到。您需要知道网站上使用了哪些文件，在哪个页面（或哪种类型的页面）上使用了哪个文件，每种页面类型获得了多少访问量，其中有多少来自回访者......简而言之，它手动操作似乎是一个巨大的痛苦。我在找

*   理想情况下，足够智能的工具可以为您进行优化或提供帮助。
*   更现实地，可以统计哪些 CSS/js 文件包含在哪个页面上/这些文件的下载频率/两个文件一起下载的频率的工具。
*   如果没有好的工具，请提供有关如何手动执行的建议/策略/最佳实践

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:00:32.180

以站点为中心的 CSS 和 JS 应该被最小化和组合。您绝对不想手动执行此操作，而是将其作为部署过程的一部分。本地更多的单个文件使开发/维护变得更容易。

以页面为中心的 CSS 和 JS 应该被最小化，但不能合并，因为它只适用于网站的一部分。（我认为以页面为中心的 CSS 甚至不应该是一个单独的文件，而是页面本身的一部分……当然，CSS 的全部意义在于避免以页面为中心的样式，所以可能没有实际意义）

而且，当然，总是有例外，并且高度依赖于项目的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:55:45.210

据我所知，css 和 js 文件不能与页面组合，因为它们大多被缓存并且比内容更不经常修改。

谷歌浏览器自带“开发者工具”（你在检查代码时看到的），它有很多很棒的功能。

审核菜单特别有用，因为它会为您提供优化建议，例如利用浏览器缓存、利用代理缓存、最小化 cookie 大小、优化样式和脚本的顺序、删除未使用的 CSS 规则等……看看吧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T16:49:16.860

国际海事组织你应该考虑合并的唯一事情是绝对存在于你网站的每个页面上的文件，以及你自己的自制资源。任何公共图书馆或类似的东西都不应该合并。缓存已经很容易击败“许多连接”的论点，并且随着时间的推移，服务器/浏览器在如何有效地缓存内容方面变得越来越智能。产生无数的重组只会让你无法从这一进步中获利。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T17:25:39.837

另一种策略是将常用库（阅读：jQuery）移动到 CDN。据说客户端已经缓存了它的可能性更大。如果 cdn 文件不可用，可以提供自托管后备。

# android - android tablelayout麻烦，添加视图

> ID：10622880
> 
> 赞同：0
> 
> 时间：2012-05-16T16:36:41.593
> 
> 标签：android, xml, view, android-linearlayout, tablelayout

我遇到了麻烦`View leader`，我不确定第二个参数应该是什么

```
 TableLayout leaderTable = (TableLayout)findViewById(R.id.leaderTable);            

        TableRow tr = new TableRow(this);
        tr.setId(i);
        tr.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));

        View leader = new View(UserView.this, null, R.id.leaderLayout);

        TextView number = (TextView)leader.findViewById(R.id.numberView);
        number.setText(String.valueOf(i+1));

        tr.addView(leader);

        leaderTable.addView(tr); 
```

问题是 my`TextView`为空，尽管它是`leader.`

对这个问题很困惑，这是我的 XML

```
<TableLayout 
                 android:id="@+id/leaderTable"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="center">

            </TableLayout> 
```

我需要对 XML 做更多的事情吗？我不需要在其中包含表格行吗？

`R.id.leaderLayout`是它自己的 xml 文件，一个带有该 id 的线性布局

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:22:37.510

这是 View 构造函数的开发者页面：

[https://developer.android.com/reference/android/view/View.html#View%28android.content.Context%29](https://developer.android.com/reference/android/view/View.html#View%28android.content.Context%29)

如果您希望此视图在创建该视图时设置某些属性或样式，则使用视图的第二个和第三个参数。

看起来您实际上希望您的变量`leader`被夸大。这将采用 xml 中定义的布局并将其分配给动态创建的视图。你说你的leaderLayout是一个LinearLayout，所以它看起来像这样。

```
//Initialize the layout inflator, do this once and use it to inflate as many views as you want
LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 

//Assign your custom view to the variable leader
LinearLayout leader = (LinearLayout) inflator.inflate(R.layout.leaderLayout, tr); 
```

inflate 的第一个参数是 R.layout。*nameOfYourXmlFile*。第二个是将成为膨胀视图的父级的 ViewGroup。完成此操作后，您可以使用`findViewById`on leader 获取 Xml 文件中的子视图，动态添加更多子视图，并将其添加为 TableRow 的子视图。

这是 LayoutInflator 的开发人员页面，以防您对该方法的其他用法感到好奇`inflate`。

[http://developer.android.com/reference/android/view/LayoutInflater.html](http://developer.android.com/reference/android/view/LayoutInflater.html)

# javascript - Xui.js .children() 替代

> ID：10622884
> 
> 赞同：0
> 
> 时间：2012-05-16T16:36:50.690
> 
> 标签：javascript, jquery, xui

jQuery 的`.children()`.

更具体地说，我正在尝试获取子级`$x(this)`但`$x(this).children('p')`不起作用（例如，它似乎不存在于库中。根据 Firebug 无法识别它，xuijs 文档中也没有）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:49:11.720

不确定那个库，但如果你有原生 DOM 元素，原生 JS 可能看起来像这样：

```
[].filter.call(this.children, function(el, i) { 
    return el.nodeName.toLowerCase() === 'p'; 
}); 
```

如果您支持旧版浏览器，您可以`Array.prototype.filter`从 MDN 获得 shim。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter#Compatibility](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter#Compatibility)

* * *

你也可以轻松地创建一个可重用的函数。

```
function children(elem, s) {
    return [].filter.call(elem.children, function(el, i) { 
        return el.nodeType === 1 && (!s || el.nodeName.toLowerCase() === s); 
    });
} 
```

* * *

```
children(this, 'p'); 
```

它仅按标签名称过滤，但扩展它很简单。

# php - 使用 PHP 进行 XML 合并优化

> ID：10622885
> 
> 赞同：2
> 
> 时间：2012-05-16T16:36:52.213
> 
> 标签：php, xml

我希望有人能指出我正确的方向。我正在编写一个 PHP 应用程序，它基本上会提取大约 10-15 个 xml 提要，每个提要大约有 30 个节点，格式不同，然后将它们聚集到各种类别中。到目前为止，我能够编写一段 php 来通过 XSLT 将每个提要转换/映射为标准化格式（xml 元素在所有输出字段中都是标准化的）。我可以做一个简单的包含并将它们全部包含以输出单个提要，问题是提要现在大约有 400-500 个节点，每个节点有 17 个元素，并且需要永远加载。这就是我卡住的地方，我尝试了 XMLReader/XMLWriter 命令，但在 XML Writer 上出现错误。我正在使用下面的代码

```
$xml1 = new XMLReader();
$xml1->open('convert1.php');

$xml2 = new XMLReader();
$xml2->open('convert2.php');
    $name = 'xmlroot';

    $write = new XMLWriter();
    $write->startElement($name); 
```

这是我得到的错误：

```
Warning: XMLWriter::startElement() [xmlwriter.startelement]: Invalid or unitialized XMLWriter object in C:\wamp\www\mergetest\merge1.php on line 22 
```

我的 XML 结构如下：

```
<xmlroot>
<xmlnode>
<xmlelement></xmlelement>
</xmlnode>
</xmlroot> 
```

转换 PHP 代码：

```
 <?php

$xml = new DOMDocument();
$xml->load('xmlfeed');

$xsl = new DOMDocument;
$xsl->load('xsl.xsl');

$proc = new XSLTProcessor();
$proc->importStyleSheet($xsl);

echo $proc->transformToXML($xml); 
```

我还是 PHP 新手，所以如果有菜鸟错误或者我没有包含某些内容，请不要发火，哈哈，我只是想学习，任何和所有的帮助都将不胜感激。我尝试查看 PHP 参考/教程，但似乎没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:30:16.780

您需要因此更改您的代码

```
$write = new XMLWriter();
$write->openMemory();
$write->startElement($name);
...more code...
print $write->outputMemory(); 
```

见[http://www.php.net/manual/en/function.xmlwriter-write-element.php#87535](http://www.php.net/manual/en/function.xmlwriter-write-element.php#87535)

# java - 如何将数组集合从 flex 传递到 java servlet

> ID：10622896
> 
> 赞同：0
> 
> 时间：2012-05-16T16:37:23.730
> 
> 标签：java, apache-flex, servlets

我的弹性页面中有 ArrayCollection。

将此数据发送到 Java Servlet 的最佳方法是什么？

如果我通过 url 请求发送数组集合，它会在 servlet 中作为字符串接收。

我需要迭代并获取这些数据。

请帮助我们如何以列表或地图的形式获取数据。这样我们就可以迭代并获取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:47:49.800

FinFlex 所说的会很好用。您也可以使用 BlazeDS。

查看“基于 servlet 的端点”文档：

[http://livedocs.adobe.com/blazeds/1/blazeds_devguide/index.html](http://livedocs.adobe.com/blazeds/1/blazeds_devguide/index.html)

# linux - 2.6.30 内核中的 kobject_init 问题

> ID：10622898
> 
> 赞同：1
> 
> 时间：2012-05-16T16:37:45.607
> 
> 标签：linux, kernel, device-driver

似乎 kobject_init 已更改（我是新手），实际上我在互联网上找到的示例设备驱动程序无法正常工作。

我绝对需要一个关于 /procs/sysfs 的样本，由于这些原因，我没有使用更简单的样本。

这是我使用的代码：

```
int int_init(void)
{
int i, ret;

kint = kmalloc(sizeof(*kint), GFP_KERNEL);
if (!kint) return -ENOMEM;
memset(kint, 0, sizeof(*kint));
kobject_init(&kint->kobj);
kint->numbers[0] = 0;
kint->numbers[1] = 1;
kint->numbers[2] = 5;
kint->kobj.ktype = &ktype_int;

ret = kobject_set_name(&kint->kobj, "sample-int-range");
if (!ret) ret = kobject_add(&kint->kobj);
if (!ret) {
     for (i=0; i<3; i++)
         sysfs_create_file(&kint->kobj,kint_default_attrs[i]);
}

if (ret)
    kfree(kint);
 return ret;
}

void int_exit(void)
{

 int i;

 for (i=0; i<3; i++)
     sysfs_remove_file(&kint->kobj,
               kint_default_attrs[i]);
 kobject_del(&kint->kobj);
 kobject_put(&kint->kobj);
 /* wait untile the kobj is freed */

 while (kint) {
     schedule_timeout(HZ/2);
 }
 return;
}
module_init(int_init);
module_exit(int_exit); 
```

这是我发现的错误（行不匹配）：

> make: 进入目录`/usr/src/linux-source-2.6.32' CC [M] /home/pietro/driver/sysfs.o /home/pietro/driver/sysfs.c: In function ‘int_init’: /home/pietro/driver/sysfs.c:125: error: too few arguments to function ‘kobject_init’ /home/pietro/driver/sysfs.c:132: error: too few arguments to function ‘kobject_add’ /home/pietro/driver/sysfs.c:135: warning: ignoring return value of ‘sysfs_create_file’, declared with attribute warn_unused_result /home/pietro/driver/sysfs.c: In function ‘int_exit’: /home/pietro/driver/sysfs.c:155: error: implicit declaration of function ‘schedule_timeout’ make[1]: *** [/home/pietro/driver/sysfs.o] Error 1 make: *** [_module_/home/pietro/driver] Error 2 make: Leaving directory`/usr/src/linux-source-2.6.32'

我怎样才能解决这个问题？

PS：[在这个链接整个源文件](http://dl.dropbox.com/u/3212387/sysfs.c)

# wpf - 带有图标的 WPF 按钮样式仅在运行时引发 System.Windows.Data 错误

> ID：10622900
> 
> 赞同：-1
> 
> 时间：2012-05-16T16:37:52.933
> 
> 标签：wpf, button, styles

我为工具栏内的按钮创建了一种样式，它是图标和文本的组合：

```
<Style TargetType="{x:Type Button}" x:Key="BtStyle_ToolBar">
    <Setter Property="Foreground" Value="White" />
    <Setter Property="FontWeight" Value="Bold" />
    <Setter Property="FontFamily" Value="Segoe UI" />
    <Setter Property="ContentTemplate">
        <Setter.Value>
            <DataTemplate DataType="{x:Type Button}">
                <StackPanel Orientation="Horizontal">
                    <Image Source="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Button}, Path=Tag}" />
                    <TextBlock Text="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Button}, Path=Content}" 
                               VerticalAlignment="Center" />
                </StackPanel>
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

使用它：

```
<Button Name="Bt_Export" Content="{x:Static p:Resources.Export}" Command="{Binding Path=CmdExport}"
                Padding="5" Style="{StaticResource BtStyle_ToolBar}" Tag="Resources/export_excel_16x16.png"/> 
```

问题是在运行时会向即时窗口抛出异常：

```
System.Windows.Data Error: 6 : 'ObjectSourceConverter' converter failed to convert value 'Resources/export_excel_16x16.png' (type 'String'); fallback value will be used, if available. BindingExpression:Path=Tag; DataItem='Button' (Name='Bt_Export'); target element is 'Image' (Name=''); target property is 'Source' (type 'ImageSource') IOException:'System.IO.IOException: Cannot locate resource 'themes/resources/export_excel_16x16.png'. 
```

但在设计时一切正常......

我该如何解决这个问题？

**编辑（解决方法）**

我从按钮声明中删除了 content 属性：

```
<Button Name="Bt_Export" Style="{StaticResource BtStyle_ToolBar}">
      <DockPanel>
           <Image Source="/Resources/export_excel_16x16.png"/>
           <TextBlock VerticalAlignment="center" Text="{x:Static p:Resources.Export}"></TextBlock>
       </DockPanel>
 </Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:43:24.313

```
<Button Name="Bt_Import" Command="{Binding Path=CmdImport}" Style="{StaticResource BtStyle_ToolBar}">
  <StackPanel>
    <TextBlock Text="{x:Static p:Resources.Import}"/>
    <Image Source="Resources/import_16x16.png"/>
  </StackPanel>
</Button> 
```

或者只是在模板级别设置它。

```
<Style TargetType="{x:Type Button}" x:Key="BtStyle_ToolBar">
    <Setter Property="Foreground" Value="White" />
    <Setter Property="FontWeight" Value="Bold" />
    <Setter Property="FontFamily" Value="Segoe UI" />
    <Setter Property="ContentTemplate">
        <Setter.Value>
            <DataTemplate DataType="{x:Type Button}">
                <StackPanel Orientation="Horizontal">
                    <Image Source="Resources/import_16x16.png" />
                    <TextBlock Text="Awesome" 
                               VerticalAlignment="Center" />
                </StackPanel>
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:45:24.160

嗯，你有没有注意到它抱怨的图像是 export_excel_16x16.png 但你发布的 XAML 是在谈论 import_16x16.png。你确定你没有误解错误的原因吗？即您在其他地方有 XAML，这就是问题所在。并且 Chris W. 是正确的，还检查了图像的构建操作。

谢谢

# java - 安全地从 String 执行 Java 代码

> ID：10622903
> 
> 赞同：0
> 
> 时间：2012-05-16T16:38:06.513
> 
> 标签：java

我有一个处理客户端发送的 JSON 信息的 Java 后端系统。为了确定应该进行哪种处理，我在 JSON 中使用了一个名为“type”的字段

我的后端系统检查“类型”并根据类型执行特定的 Java 代码。

我没有检查类型并执行硬编码到我的 Java 类中的代码，而是有兴趣探索从外部数据库运行代码的方法。这样，当我想创建更多“类型”时，我可以简单地添加处理数据库中每种类型的方法，而不必将新的检查或类硬编码到我的 Java 文件中并重新编译/部署。

我已经阅读了这篇 StackOverFlow 帖子：[Convert String to Code](https://stackoverflow.com/questions/935175/convert-string-to-code)，但正如评论所指出的那样，仅运行任意代码就存在重大风险。

理想情况下，我希望有一些从外部加载的 Java 方法，该方法具有 JSON 数据的参数，然后它自己进行检查和处理并返回一个值。

有没有**安全**且**（有点）简单**的方法来做到这一点？也许将字符串解析为java代码不是正确的想法（也许做一些外部类加载会更聪明），但我想问是否有人对如何做到这一点有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:51:10.773

如果要执行的代码很短（一行左右），您可以将其作为键值对存储在程序的配置中，其中 key 是 JSON 消息中的类型， value 是要执行的代码执行。用 Groovy 编译单行代码就可以了。

如果要执行的代码较长，则定义一个接口并创建多个实现。在配置中，将 JSON 中的类型与类相关联。实例化具有已知名称的类只是`Class.forName(...).newInstance()`加上错误处理。这也可以让您创建插件 - 只需在类路径中放置一个新的实现类，在配置中添加条目并重新启动应用程序。您可能可以使用 Spring 和 bean 来执行此操作，但对于一个简单的情况，手动执行此操作可能更容易、更快。

这些解决方案是安全的，因为我们假设恶意用户无法更改您的配置或 JAR（否则您将陷入困境）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:51:39.903

啊，好旧的软编码。我建议您在走这条路之前阅读[http://thedailywtf.com/Articles/Soft_Coding.aspx 。](http://thedailywtf.com/Articles/Soft_Coding.aspx)

如果您坚持能够在运行时修改代码，请查看 OSGi。您将拥有可以修改以反映更新代码的动态包，而不是数据库。

# sql - 修改 Microstrategy SQL 生成器

> ID：10622905
> 
> 赞同：1
> 
> 时间：2012-05-16T16:38:17.080
> 
> 标签：sql, infobright, microstrategy

我正在使用 Microstrategy，并且知道 Freeform SQL Report 功能。但是，我想更改 Microstrategy 生成其 SQL 的方式。

由于我使用的是 Infobright，我想使用子选择而不是完全连接等。示例：

Microstrategy 生成的查询： select b.colb, min(b.cold), sum(a.colb) from tablea a join tableb b on a.id = b.id group by b.colb

我希望它生成以下方式： select b.colb, min(b.cold), sum(a.colb) from (select id, sum(cold) from tablea a group by colb) join tableb b on a .id = b.id 由 b.colb 分组

是否可以修改生成器以采用这种方法而不是当前方法？或者，我必须使用自由格式生成器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:46:37.453

在 Report->Go to VLDB Properties->Sub Query Type->select 6 th option->where col 1 in (select s1.col1..) fall back to exists (Select col1, col2...) for multiple columns IN

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:30:21.737

您可以通过更改 VLDB 属性（在报告级别或数据库实例级别）来更改 MSTR 生成 SQL 的方式。

在 VLDB 设置中，我认为您应该在 Tables 文件夹内的“Intermediate Table Type”上寻找“Derived Table”选项，但请查看 Tables 文件夹和 Query Optimizations 文件夹中的其他选项。

# google-apps-script - 我可以使用脚本锁定特定的 Google Apps 工作表吗？

> ID：10622906
> 
> 赞同：3
> 
> 时间：2012-05-16T16:38:27.043
> 
> 标签：google-apps-script

有没有办法使用脚本锁定特定的 Google Apps 工作表？

我有这段代码可以将当前电子表格重命名为您在输入框中输入的任何内容。

```
// The code below will rename the active sheet to what you enter in the input box
var myValue = Browser.inputBox("Enter: LastMonth - Year");
SpreadsheetApp.getActiveSpreadsheet().renameActiveSheet(myValue);
SpreadsheetApp.getActiveSpreadsheet().getRange("A1").setValue(myValue); 
```

我可以在上面的代码中添加什么来锁定我刚刚重命名的同一个工作表，只允许我编辑该工作表。那可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T17:02:41.703

```
// Enables sheet protection for  this sheet
var sheet = SpreadsheetApp.getActiveSheet();
var permissions = sheet.getSheetProtection();
permissions.setProtected(true);
sheet.setSheetProtection(permissions); 
```

请参阅电子表格服务 -[类 PageProtection](https://developers.google.com/apps-script/class_pageprotection#setProtected)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-28T22:11:00.883

正如@ScampMichael 所说，在[电子表格服务](https://developers.google.com/apps-script/reference/spreadsheet/page-protection#setProtected)中找到以下代码。

如果工作表受到保护，则将用户添加到可以编辑工作表的用户列表中。

```
// Add the "user@example.com" user to the list of users who can edit this sheet
 var sheet = SpreadsheetApp.getActiveSheet();
 var permissions = sheet.getSheetProtection();
 permissions.addUser('user@example.com');
 permissions.setProtected(true);
 sheet.setSheetProtection(permissions); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-13T14:15:35.267

由于当前不推荐使用[Class PageProtection ，您可以使用](https://developers.google.com/apps-script/class_pageprotection)[Class Protection](https://developers.google.com/apps-script/reference/spreadsheet/protection)来实现相同的目的：

```
var sheet = SpreadsheetApp.getActiveSheet();
sheet.protect(); 
```

要在需要时取消保护，您可以使用以下代码段：

```
var protection = sheet.getProtections(SpreadsheetApp.ProtectionType.SHEET)[0];
 if (protection && protection.canEdit()) {
   protection.remove();
 } 
```

# java - Java HtmlCleaner：不处理扩展的 ascii 字符

> ID：10622907
> 
> 赞同：0
> 
> 时间：2012-05-16T16:38:29.373
> 
> 标签：java, ascii, extended-ascii, htmlcleaner

我正在使用 HTMLCleaner 清理一个 HTML 文件，该文件包含“€”（ascii 十进制 128）、“TM”（ascii 十进制 153）等字符。也就是说，**来自 ASCII 扩展表的字符**。

HTMLCleaner 无法处理这些字符并将它们替换为字符“？” （ASCII 十进制 63）。

为了处理这些字符，我可以在 HTMLCleaner 中设置任何标志吗？

提前致谢。

**编辑：** 变量“编码”是“iso-8859-1”，就像源文件编码一样。

```
 try {
        System.out.print("Parsing and cleaning:" + fileStr);
        URL url = new File(this.fileStr).toURI().toURL();
        // create an instance of HtmlCleaner
        HtmlCleaner cleaner = new HtmlCleaner();
        // default properties
        CleanerProperties props = cleaner.getProperties();
        // do parsing
        TagNode tagNode = new HtmlCleaner(props).clean(url);
        // serialize to XML file
        new PrettyXmlSerializer(props).writeToFile(tagNode, fileStr,
                encoding);
        System.out.println("Output: " + fileStr);
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

我刚刚想通了。该行：

```
TagNode tagNode = new HtmlCleaner(props).clean(url); 
```

应替换为：

```
TagNode tagNode = new HtmlCleaner(props).clean(url, encoding); 
```

其中 'encoding' 是源 url 的字符集的字符串表示形式。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:43:14.363

你试过设置`charset`吗？

# android-ndk - 为 Android NDK 构建 ImageMagick，支持更多图像格式

> ID：10622908
> 
> 赞同：1
> 
> 时间：2012-05-16T16:38:39.227
> 
> 标签：android-ndk, imagemagick

我从这个项目开始：

[https://github.com/lilac/Android-ImageMagick](https://github.com/lilac/Android-ImageMagick)

我从这个问题中发现：

[使用 NDK 为 Android 编译 Imagemagick](https://stackoverflow.com/questions/5832217/compile-imagemagick-for-android-using-ndk)

我已经能够为 NDK 成功构建 ImageMagick，只是它根本不支持任何图像格式。

我真的不确定如何包含更多格式，并且根据我在上面引用的项目中看到的内容，似乎至少应该支持 jpeg 和 tiff。有没有人知道如何在至少支持 jpeg、gif、tiff 和 png 的情况下构建它？

# java - 限制在黑莓应用程序中打开所有选项卡

> ID：10622910
> 
> 赞同：1
> 
> 时间：2012-05-16T16:38:47.440
> 
> 标签：java, blackberry, tabs, navigation, restriction

我的申请表中有 3 个选项卡，当单击上一个表单中的按钮时会打开这些选项卡。

下图显示了打开时的 3 个选项卡。

如图所示，当单击第一个选项卡中的搜索按钮时，它会在搜索结果后跳转到第三个选项卡。

同样，当单击组按钮时，它会在从数据库中搜索结果并填充到选项卡 2 和 3 中定义的网格布局后再次打开第二个选项卡

![在此处输入图像描述](../Images/4aec127a00a2137ac3babc461132cec3.png)

网格布局已用于选项卡 2 和 3，以便以字符串方式检索表中的值。

现在面临的问题是这些选项卡 SECOND 和 THIRD 在从 tab1 中点击搜索按钮之前正在获取垃圾值

这是因为所有 3 个选项卡的选项卡布局是一起初始化的。

有什么办法可以避免打开这两个选项卡（即第二个和第三个选项卡）打开此选项卡表单。（注意：此选项卡表单是在单击以前的主屏幕表单中的按钮时打开的）

请检查我之前使用的代码[如何从黑莓中的一个选项卡（窗格管理器模型）导航到另一个选项卡？](https://stackoverflow.com/questions/10473476/how-to-navigate-to-another-tab-from-one-tabpane-manager-model-in-blackberry)

如果需要对问题有更多的理解，请沟通。

# vba - 当 VBA 代码出错时自动发送电子邮件

> ID：10622912
> 
> 赞同：3
> 
> 时间：2012-05-16T16:38:52.683
> 
> 标签：vba, error-handling, outlook

我正在编写一个 VBA 宏，供非 VBA 用户的其他人使用。因此，我想在代码中嵌入一个系统，当代码抛出错误时，它会自动从宏用户的 Outlook 帐户向我发送一封电子邮件。VBA可以做到这一点吗？此外，用户将没有对其帐户的管理员访问权限，这会产生问题吗？提前感谢您对此的帮助！

编辑 - 我现在知道这是可能的，并且也有相同的 vba 代码（见下文）。但是，我们能否消除尝试自动发送电子邮件时弹出的“安全警告框”。另外，我想附上错误文件和电子邮件。如果我能在这方面得到一些帮助，那就太好了，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:47:19.053

试试这个。**未经测试**

```
Option Explicit

Sub Sample()
    On Error GoTo Whoa

    '
    '~~> Rest of the Code
    '

    Exit Sub
 Whoa:
    Set OutApp = CreateObject("Outlook.Application")
    Set OutMail = OutApp.CreateItem(0)

    With OutMail
        .To = "abc@abc.com"
        .Subject = "Error Occured - Error Number " & Err.Number
        .Body = Err.Description

        .Display '~~> Change this to .Send for sending the email
    End With

    Set OutApp = Nothing: Set OutMail = Nothing
End Sub 
```

**跟进**

> 有没有办法我也可以附加具有宏的excel文件？我还将编辑主要问题以反映这一点。– hardikudeshi 5 分钟前

试试这个。

```
Option Explicit

Private Declare Function GetTempPath _
Lib "kernel32" Alias "GetTempPathA" _
(ByVal nBufferLength As Long, _
ByVal lpBuffer As String) As Long

Private Const MAX_PATH As Long = 260

Sub Sample()
    Dim OutApp As Object, OutMail As Object
    Dim wb As Workbook

    On Error GoTo Whoa

    '
    '~~> Rest of the Code
    '

    Exit Sub
 Whoa:
    Set wb = ThisWorkbook

    Application.DisplayAlerts = False
    wb.SaveAs TempPath & "ErroringFile.xls", FileFormat:= _
    xlNormal
    Application.DisplayAlerts = True

    Set OutApp = CreateObject("Outlook.Application")
    Set OutMail = OutApp.CreateItem(0)

    With OutMail
        .To = "abc@abc.com"
        .Subject = "Error Occured - Error Number " & Err.Number
        .Body = Err.Description
        .Attachments.Add TempPath & "ErroringFile.xls"

        .Display '~~> Chnage this to .Send for sending the email
    End With

    Set OutApp = Nothing: Set OutMail = Nothing
End Sub

Function TempPath() As String
    TempPath = String$(MAX_PATH, Chr$(0))
    GetTempPath MAX_PATH, TempPath
    TempPath = Replace(TempPath, Chr$(0), "")
End Function 
```

# c# - 带有 HTML 敏捷包的节点选择器中的通配符搜索

> ID：10622913
> 
> 赞同：3
> 
> 时间：2012-05-16T16:38:57.200
> 
> 标签：c#, winforms, html-agility-pack

这是我的代码的一部分

```
<div>
<div style="PADDING-BOTTOM: 4px"> blah </div>
<div style="PADDING-BOTTOM: 2px"> blah </div>
<div> 
```

如何将第二个和第三个 div 选择到 'node.SelectNodes' 中？

```
HtmlNode node = doc.DocumentNode.SelectSingleNode(".//div[@style='PADDING-BOTTOM: 2px']"); 
```

我可以对 2px 和 4px 或任何其他 px 进行某种通配符搜索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:45:04.750

您可以使用`contains()`字符串进行字符串匹配。

```
node = doc.DocumentNode.SelectSingleNode(".//div[contains(@style, 'PADDING-BOTTOM:')]"); 
```

# mysql - 连接具有 diff 列数的表

> ID：10622919
> 
> 赞同：2
> 
> 时间：2012-05-16T16:39:10.230
> 
> 标签：mysql

我目前正在为本地站点处理一些嵌入式 sql 查询。我陷入了困惑。我需要这样做“向用户询问制造商。打印该制造商的所有产品规格。即打印型号、产品类型以及适合该类型的任何关系的所有属性。”

我尝试了以下查询

```
(SELECT * FROM product NATURAL JOIN pc WHERE maker = '$m') 
union (SELECT * FROM product NATURAL JOIN printer WHERE maker = '$m') 
union (SELECT * FROM product NATURAL JOIN laptop WHERE maker = '$m'); 
```

但问题是每个表（电脑、笔记本电脑、打印机）没有相同的列。我认为如果表不包含该列，我的问题只填写空值就可以了。我正在尝试将所有表和列合并到一个超级表中并将其显示给用户。然后我也想尝试按产品类型订购大桌子。我想我会在查询结束时添加一个 ORDER BY 。所以我的问题是如何加入这些表格？

关系：

```
Product(maker, model, type (laptop, printer, pc))
Printer(model, color (0,1), type(ink-jet, laser), price)
Laptop(model, speed, ram, hd, screen, price)
Pc(model, speed, ram hd, price) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:45:24.047

查看“SQL 表别名”以将列添加到具有较少列的表中。或者您也可以输入空值，例如：

```
Select Col1, Col2, Col3 from Table1
Union
Select Col1, Null as Col2, Null as Col3 from Table2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:46:02.027

是的，您可以使用 UNION 来完成这项工作。只需使所有 SELECT 列表具有相同的名称和相同的类型，如下所示：

```
SELECT (a,b) FROM TABLE TableB NATURAL JOIN (

    SELECT a,b,c, NULL as d from TableC
    UNION
    SELECT a,b,NULL as c, d from TableD

) AS u ON u.b = TableB.b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T16:49:34.673

您可以只为不存在的字段选择 NULL 值。

```
(SELECT maker,pc.model,p.model,price,NULL AS color,speed,pc.type,pc.type,ram,hd,NULL AS screen
  FROM product p NATURAL JOIN pc WHERE maker = '$m') 
UNION 
(SELECT maker,printer.model,p.model,price,color,NULL AS speed,printer.type,p.type,NULL AS ram,NULL AS hd,NULL AS screen
  FROM product p NATURAL JOIN printer WHERE maker = '$m') 
UNION
(SELECT maker,laptop.model,p.model,price,NULL AS color,speed,laptop.type,laptop.type,ram,hd,screen
  FROM product p NATURAL JOIN laptop WHERE maker = '$m'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-16T16:41:25.133

我认为您的意思是使用 join 关键字，而不是 union 关键字。

看看[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

# c# - 如何在 Visual 2010 报告中的 DataSetTableAdapter 中使用 GROUP BY DAY

> ID：10622925
> 
> 赞同：0
> 
> 时间：2012-05-16T16:39:40.303
> 
> 标签：c#, visual-studio, visual-studio-2010, crystal-reports

目前我正在尝试编写一个查询来**获取**月份中的所有出生日期。并按**出生当天分组**。

**示例**：

```
SELECT        DayBirth
FROM            BirthDay
WHERE        (DayBirth LIKE '%' + '5/1990')
GROUP BY     ???????? 
```

**表生日**

```
 Name  |  DayBirth
--------------------
  A    |  22/5/1990
  B    |  18/5/1990
  C    |  3/6/1990
  D    |  18/5/1990 
```

**输出**

```
DayBirth
--------
22/5/1990
18/5/1990 
```

**注意**：我正在尝试在Visual 2010 报告中的**DataSetTableAdapter**处编写查询，并尝试在**SQL中编写相同的****DAY** (DayBirth)、DATEPART **..**、**DIFF** ...查询。

 **但**错误**：**未定义函数 [Day],[DATEPART},[DIFF],... 在表达式中**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:33:17.253

看看这篇[文章](http://cephas.net/blog/2005/12/06/sql-server-group-by-datetime/)。我相信您正在将日期转换为 varchar，然后按此分组。[在本文](http://www.mssqltips.com/sqlservertip/1145/date-and-time-conversions-using-sql-server/)下方选择您的日期转换类型（查询中为 111）。

```
SELECT distinct convert(varchar,mydate,111) as thedate, count(id) as perday
FROM orders
group by convert(varchar,mydate,111)
order by perday DESC 
```**

# oop - OOPS 中的类和绘制关系

> ID：10622927
> 
> 赞同：1
> 
> 时间：2012-05-16T16:39:48.593
> 
> 标签：oop

这可能不是问这个问题的正确地方，因为在一次采访中被问到这个问题，但我想了解它背后的 oops 概念。

有两个基类和一个派生类：

```
 class Car {}

    class Paint {}

    class Colors : Paint {} 
```

所以问题是，将 Paint 作为不同的基类并将 Colors 作为 Paint 类的子类背后的面向对象概念是什么。

我的困惑是 Paint 是基类而不是 Car 类的属性。这里应用了 OOP 的概念。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:58:40.123

概念是有些人没有概念。首先，什么是“颜色”（不要用复数名称命名类）。颜色继承了 Paint 中的哪些行为？据我所知，什么也没有。我不知道颜色应该做什么。

颜色可以与油漆互换使用吗？不是我能想象的。马上，它似乎是一个糟糕的类层次结构。

恕我直言，这个问题完全是假的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T23:17:16.683

出于某种原因，我想它被描述为：

> “你有一个`Car`类和一个`Paint`类，并且`Paint`该类是子类的`Colors`。”

我假设解释它的人并不意味着一个名为`Colors`. 我想它更像是：

```
 public class Car
    {
    }

    public abstract class Paint
    {
        public abstract void PaintCar(Car car);
    }

    public class BluePaint : Paint
    {
        public override void PaintCar(Car car)
        {
            // apply blue paint to the car
        }
    }

    public class MatteRedPaint : Paint
    {
        public override void PaintCar(Car car)
        {
            // apply red paint to the car
            // use matte finish
        }
    } 
```

这本身并不理想，但比您的问题所建议的要合理得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T17:47:24.420

听起来他们在寻找关键词：继承

颜色继承自 Paint，对吗？

虽然如果 Paint 继承自 Color 会更有意义。

这可能是那些希望与您进行 OOP 讨论的开放式问题之一。

如果 Car `HAS-A`Paint 而不是 Car `IS-A`Paint，那可能是他们正在寻找策略设计模式：更喜欢组合而不是继承。但是这个例子有点推动它，因为它并没有真正的意义。

他们可能一直在寻找的最后一件事是关于为什么您认为多重继承不好的讨论。你确实认为它很糟糕，对吧？:)

# mysql - 如何更改值包含在多行中的列中的所有值？

> ID：10622928
> 
> 赞同：0
> 
> 时间：2012-05-16T16:39:51.380
> 
> 标签：mysql, sql, database

假设我有一个包含两列的简单表格，`userid`并且`email`.

如何更改值存在于多行`email`中的所有值？`email`

例如，假设该`email`值`blah@blah.com`存在于 4 行中。我不想删除这 4 行，我只想将`email`所有 4 行的列设置为`''`.

什么查询会在 MySQL 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:43:35.767

此请求获取存在于 1 行以上的电子邮件：

```
SELECT email, COUNT(email) AS c
FROM table 
GROUP BY email
HAVING c > 1 
```

因此，您只需在更新查询中使用它：

```
UPDATE table SET email = ''
WHERE email IN (
     SELECT email, COUNT(email) AS c
     FROM table 
     GROUP BY email
     HAVING c > 1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:44:11.180

```
Update t
Set t.Email = ''
Where t.Email in (Select email from YourTable group by email having count(*)>1) 
```

# ios - ios将UIControlEventTouchUpInside绑定到容器不会使容器中的视图响应事件

> ID：10622932
> 
> 赞同：0
> 
> 时间：2012-05-16T16:40:05.707
> 
> 标签：ios, events, uitableview, uicontrol

嗨，我有一个包含 2 个子视图、一个图像和一个标签的容器，我已将事件绑定到容器以响应 UIControlEventTouchUpInside，整个想法是，当用户单击容器上的任何位置时，包括其中的图像和标签，应该触发事件。

不确定这是否是一个问题，但是在绑定容器时，容器中已经填充了图像和标签视图

问题是我没有看到预期的行为点击标签图像不会触发事件但点击标签和图像之外但仍在容器内的区域会触发事件......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:49:15.247

您不必将 UIControlEventTouchUpInside 绑定到 Type View 。您可以使用[UITapGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITapGestureRecognizer_Class/Reference/Reference.html)或[UITouch](https://developer.apple.com/library/ios/#documentation/uikit/reference/UITouch_Class/Reference/Reference.html)来完成您想要的。

# java - 仅当它不是较长单词的一部分时才检测单词的正则表达式？

> ID：10622934
> 
> 赞同：1
> 
> 时间：2012-05-16T16:40:12.020
> 
> 标签：java, regex

我正在寻找一个只匹配一个单词的正则表达式，它不是更长单词的一部分。

让我们假设这个词是“失败”，所以这里有一些例子

*   `failure bla bla`- 应该匹配
*   `bla failure.`- 应该匹配
*   `no-failure bla`- 不应该匹配

主要是`failure`字符串不需要`[\d\w-_]`在它周围有任何东西才能被认为是一部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:47:46.090

由于您将破折号包含在构成单词的字符组中，因此您不能使用单词边界来执行此操作；您需要环视断言（Java 支持）：

```
(?<![\w-])failure(?![\w-]) 
```

应该这样做。

**解释：**

```
(?<![\w-])  # Assert no alphanumeric or dash before the current position
failure     # Match "failure"
(?![\w-])   # Assert no alphanumeric or dash after the current position 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:42:43.133

如果您的正则表达式支持它，您可以使用它`\b`来匹配分词，例如`/\bfailure\b/`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T18:40:15.680

对于正则表达式来说，这不是一个很好的案例。

为什么不 String.split 将其分解为单词，然后将每个单词与您的目标进行比较（因为您所说的是它应该只在被空格分隔时才匹配）。

好吧，String.split 确实使用了正则表达式，但它受到了更多的控制，你真的只需要默认的空间分割，或者你可能想添加句点（所以你的第二个例子会匹配）。

# schema.org - Schema.org 嵌套事件未正确解析

> ID：10622936
> 
> 赞同：0
> 
> 时间：2012-05-16T16:40:20.453
> 
> 标签：schema.org, rich-snippets

我正在使用 schema.org 标记我的内容，但遇到了一个小问题。我正在使用[BarOrPub](http://schema.org/BarOrPub "酒吧或酒吧")模式。正如您在链接中看到的，它从 Place 继承了“事件”属性，尽管它似乎不是来自层次结构中的 Place。当我将代码粘贴到[Rich Snippets Tool](http://www.google.com/webmasters/tools/richsnippets "丰富的片段工具")中时，它会正确显示提取的信息，但预览显示有错误。如果我`itemprop="event"`从 SocialEvent 中删除 ，它会正确显示预览，并且正确提取信息（尽管它没有按照我需要的方式布置）。如果我将 BarOrPub 更改为包含“事件”属性的 Place，它们都可以正常工作。我应该怎么办？

```
<div itemscope itemtype="http://schema.org/BarOrPub">
<div>
    <img itemprop="image" src="57.jpg">
    <div>
        <h1 itemprop="name">NameOfPlace</h1>
        <div itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating">
            <div itemprop="ratingValue">4.07</div>
            <meta itemprop="ratingCount" content="15"/>
        </div>
        <p itemprop="telephone">(316) 263-4044</p>
    </div>
</div>
<div>
    <div class="barhalfpad">
        <h2>Upcoming Events</h2>
        <p>
            <table>
                <tr  itemprop="event" itemscope itemtype="http://schema.org/SocialEvent">
                    <td>
                        5/18<meta itemprop="startDate" content="2012-05-18T21:30:00-07:00">
                    </td>
                    <td>21:30:00</td>
                    <td itemprop="name">
                        Event Name
                    </td>
                </tr>
            </table>
        </p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:33:06.050

似乎对于模式的标记方式没有非常严格的格式，谷歌现在甚至允许错误的评级和评论......我遇到了同样的问题，但我在大型网站上看到了很多标记的示例不存在的属性，（自定义或扩展属性[http://www.schema.org/docs/extension.html](http://www.schema.org/docs/extension.html)）谷歌无论如何都会解析所有内容 :) 我留下了一些没有产生错误的嵌入式项目，那些，我只是用没有来自父元素的 itemprop 的 itemscope itemtype 标记它们。目前工作良好。

题外话：今天google改了丰富的代码片段测试工具，比之前的更糟糕，只允许1500个字符，现在你需要选择html代码的片段来测试，而不是粘贴整个代码并提取数据，糟透了:S

# php - 我正在尝试从行中获取数据以匹配到定义的列

> ID：10622947
> 
> 赞同：2
> 
> 时间：2012-05-16T16:41:02.743
> 
> 标签：php, mysql

使用 PHP/MySQL

我有两张桌子一张是`customers`另一张是`cust_data`

有一个与两者相匹配的字段`ListID`

现在在`cust_data`表格内，数据被列为`cust_data`

列：

```
ListID  DataName  DataValue
 1      type      something
 1      Region    something 
```

客户栏：

```
ListID Name Address City State Zip Phone 
```

我想得到结果

```
Name Address City State Zip Phone Type Region 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:48:41.447

```
SELECT customers.*, data_type.DataValue AS Type, data_region.DataValue AS Region
FROM   customers
  JOIN cust_data AS data_type ON (
         data_type.ListID   = customers.List_ID
     AND data_type.DataName = 'Type'
  )
  JOIN cust_data AS data_region ON (
         data_region.ListID   = customers.List_ID
     AND data_region.DataName = 'Region'
  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:49:26.483

您可以使用组查询来完成。您可以按 ListID 分组以获得单行这一事实使得这相对简单——只需有条件地选择并根据需要为*DataValue*字段设置别名：

```
SELECT c.Name, c.Address, c.City, c.State, c.Zip, c.Phone,
    MAX (CASE WHEN d.DataName = 'type' THEN DataValue ELSE NULL END) AS  `Type`,
    MAX (CASE WHEN d.DataName = 'Region' THEN DataValue ELSE NULL END) AS  `Region`
FROM customers c, cust_data d
WHERE c.ListID = d.ListID
GROUP BY c.ListID, c.Name, c.Address, c.City, c.State, c.Zip, c.Phone 
```

# objective-c - 从结果类型为 '*' 的函数返回 **' 的不兼容指针类型

> ID：10622949
> 
> 赞同：0
> 
> 时间：2012-05-16T16:41:05.700
> 
> 标签：objective-c, ios

基本上，我有一个名为 BaseObject 的基类。第二种类型的类称为 RedObject、BlueObject。它们是 BaseObject 类的子类。

因此，在 RedObject.h 中，它具有：

```
#import "BaseObject.h"

@interface RedObject : BaseObject 
```

在 BlueObject.h 中，它具有：

```
#import "BaseObject.h"

@interface BlueObject : BaseObject 
```

我还有第三种类型的类，称为 MyObject。在 MyObject.h 文件中，它具有：

```
#import "RedObject.h"
#import "BlueObject.h"

@interface MyObject : NSObject

-(id)init:(char)objectType; 
```

在 MyObject.m 文件中，它具有：

```
-(id)init:(char)objectType
{
    self = [super init];
    switch (objectType) 
    {
        case 'R':
        {
            return [[RedObject alloc]init];  // this is where the yellow warning message 1
        }
        case 'B':
        {
            BlueObject *blueObject = [[BlueObject alloc]init];
            return blueObject;          // this is where the yellow warning message 2
        }
        default:
            break;
    }
    return self;
} 
```

警告消息 1：不兼容的指针类型从结果类型为 'MyObject*' 的函数返回*RedObject* '

警告消息 2：不兼容的指针类型从结果类型为“MyObject*”的函数返回*BlueObject _strong'*

当我尝试从调用者类实例化 MyObject 的实例时，它工作正常。我可以验证我已经访问了 RedObject/BlueObject 和 BaseObject 的所有属性。但不确定如何解决黄色警告。或者如果我错过了什么？

```
MyObject *myObject = [[MyObject alloc]init:'R'];  // or 'B' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T18:51:09.930

从发布的评论，尤其是来自@kevboh 的评论中，我做了一些修改，如下所示，它似乎解决了我的问题。

在 MyObject.h 中：

```
//-(id)init:(char)objectType;  //removed

-(id)getObject:(char)objectType;  //added 
```

在 MyObject.m 中：

//移除 -(id)init:(char)objectType 方法

// 添加了这个方法

```
-(id)getObject:(char)objectType
    {
        switch (objectType) 
        {
            case 'R':
            {
                return [[RedObject alloc]init]; //self;
            }
            case 'B':
            {
                BlueObject *object = [[BlueObject alloc]init];
                return object;
            }
            default:
                break;
        }
        return nil;
    } 
```

在调用者类中，使用这个：

```
MyObject *myObject = [[[MyObject alloc]init] getObject:'H']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:05:13.423

为什么不拥有一个完成所有构造的类方法。

```
+(id)newObject:(char)objectType
{
    switch (objectType) 
    {
        case 'R':
            return [[RedObject alloc]init]; //self;

        case 'B':
            BlueObject *object = [[BlueObject alloc]init];
            return object;

        default:
            return [[MyObject alloc]init];
    }
} 
```

这将按如下方式使用

```
MyObject *myObject = [MyObject newObject:'H']; 
```

# visual-studio-2010 - 如何找到引用 MSVCR80.dll 的第三方模块

> ID：10622951
> 
> 赞同：1
> 
> 时间：2012-05-16T16:41:07.973
> 
> 标签：visual-studio-2010, visual-studio-2008, visual-c++, runtime-error

我有 Visual Studio 2008 编译项目。这是一个大型服务器应用程序。此应用程序因“MSVCR80.dll”的运行时错误而崩溃。我检查了我的应用程序通过 Depends 引用的所有二进制文件，但没有一个是引用/加载 MSVCR80.dll。所以这应该由我的服务器应用程序正在使用的任何第三方模块加载。但问题是这个服务器应用程序引用了无数的第三方（比如数据库访问、报告、网络等）。

注意：我已经分析了崩溃转储，崩溃的调用堆栈中确实只有 Windows 操作系统的 dll 方法，所以这种方法也没有运气。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T02:31:26.437

尝试在配置文件模式下运行[依赖](http://www.dependencywalker.com/)。它将列出所有加载的 DLL，您应该能够确定谁加载它。

或者，通过调试器运行应用程序。如果您查看模块窗口，您可以看到模块加载顺序。找到 MSVC80.dll 看看是谁加载的

# sql - 如何选择最早的日期和与之对应的数据

> ID：10622964
> 
> 赞同：0
> 
> 时间：2012-05-16T16:41:55.903
> 
> 标签：sql, group-by

我有一个非常简单的问题让我很头疼。

```
CUSTNMBR   |  first_date |  SOPNUMBE
----------------------------------------
3344771005 |  2012-05-03 |  334471961748         
3344771005 |  2012-04-04 |  334476873726 
```

在上表中，我想返回最早的日期`custnumbr`，`sopnumbe`所以它看起来像这样

```
3344771005 |  2012-04-04 |  334476873726 
```

我用这个

```
Select a.CUSTNMBR, min(a.Tax_Date) as first_date, a.SOPNUMBE
from SOP30200 as a
where a.CUSTNMBR = '3344771005'
Group by a.CUSTNMBR, a.SOPNUMBE 
```

但它会返回所有变量，如果我敲掉`a.sopnumbe`in 组，它会出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:48:00.280

试试这个：

```
Select top 1 a.CUSTNMBR, a.Tax_Date as first_date, a.SOPNUMBE 
from SOP30200 as a 
where a.CUSTNMBR = '3344771005' 
order by a.Tax_Date asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:46:27.967

尝试

```
Select TOP 1 a.CUSTNMBR, min(a.Tax_Date)as first_date, a.SOPNUMBE
from SOP30200 as a
where a.CUSTNMBR = '3344771005'
Group by a.CUSTNMBR, a.SOPNUMBE'
ORDER BY 2 ASC 
```

# mysql - 如何获取文件路径的所有父文件夹

> ID：10622967
> 
> 赞同：-1
> 
> 时间：2012-05-16T16:42:08.883
> 
> 标签：mysql, sql

我有一个文件路径为`varchar`s 的表：

```
select * from file;
+-------------+
| path        |
+-------------+
| a/b/c/d/e/f |
| a/b/c/x/y   |
+-------------+ 
```

我需要获取包含以下文件之一的所有文件夹：

```
select * from parent_folders;
+-----------+
| parent    |
+-----------+
| a         |
| a/b       |
| a/b/c     |
| a/b/c/d   |
| a/b/c/d/e |
| a/b/c/x   |
+-----------+ 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T17:14:48.127

```
DELIMITER ;;

DROP PROCEDURE IF EXISTS explode_paths;;
CREATE PROCEDURE explode_paths() BEGIN
  DECLARE folders INT DEFAULT 0;
  DECLARE i INT DEFAULT 0;
  DECLARE done BOOLEAN DEFAULT FALSE;
  DECLARE cur CURSOR FOR SELECT path FROM file;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

  DROP TEMPORARY TABLE IF EXISTS parent_folders;
  CREATE TEMPORARY TABLE parent_folders (
    parent VARCHAR(255) NOT NULL PRIMARY KEY
  ) ENGINE=Memory;

  OPEN cur;
    read_loop: LOOP
      FETCH cur INTO value;
      IF done THEN
        LEAVE read_loop;
      END IF;

      SET folders = (SELECT LENGTH(value) - LENGTH(REPLACE(value,'/','')));
      SET i=1;
      WHILE i <= folders DO
        INSERT IGNORE INTO parent_folders VALUES (SUBSTRING_INDEX(value,'/',i));
        SET i = i + 1;
      END WHILE;
    END LOOP;

    SELECT * FROM parent_folders;
  CLOSE cur;
END;;

DELIMITER ; 
```

# wpf - WPF：是否可以获取设置了某些附加属性的所有元素？

> ID：10622970
> 
> 赞同：3
> 
> 时间：2012-05-16T16:42:26.360
> 
> 标签：wpf, properties, dependencies

我创建了一个自定义附加属性，该属性应设置在某些不相关的元素上。此附加属性的目的是保持所有这些元素的宽度相同。因此，当这些元素中的任何一个更改宽度时，它应该使用此附加属性集更新所有其他元素。我可以通过 UIPropertyMetadata 设置的“DP 属性更改事件处理程序”跟踪附加属性的更改，因此当任何元素更改宽度时，我都会收到该通知。然后我需要做的是更新具有此附加属性集的所有其他元素。

所以我想知道是否有可能做到这一点？有没有办法枚举具有某些附加属性集的所有 DependencyObject 实例？

我想这是一个有点高级的 WPF 东西，但它在我的 WPF 应用程序中是非常具体的特定要求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:46:38.063

您可以枚举可视化树并检查是否在每个元素上设置了属性。像这样的东西：

```
var objectsWithPropertySet = new List<DependencyObject>();
if (RootVisual.ReadLocalValue(FocusIdProperty) != DependencyProperty.UnsetValue)
    objectsWithPropertySet.Add(RootVisual);

objectsWithPropertySet.AddRange(RootVisual.GetAllChildren()
    .Where(o => o.ReadLocalValue(FocusIdProperty) != DependencyProperty.UnsetValue)); 
```

GetAllChildren() 扩展方法是这样实现的：

```
public static class VisualTreeHelperExtensions
{
    public static IEnumerable<DependencyObject> GetAllChildren(this DependencyObject parent)
    {
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(parent); i++)
        {
            // retrieve child at specified index
            var directChild = (Visual)VisualTreeHelper.GetChild(parent, i);

            // return found child
            yield return directChild;

            // return all children of the found child
            foreach (var nestedChild in directChild.GetAllChildren())
                yield return nestedChild;
        }
    }
} 
```

# c# - 获取网络转换数据字节并保存

> ID：10622978
> 
> 赞同：0
> 
> 时间：2012-05-16T16:42:45.953
> 
> 标签：c#, c#-4.0, network-programming, data-transfer

我有一个应用程序，我想保存或记录网络转换数据字节。但我不知道该怎么做。有人知道我该怎么做吗？（不是为了窃取数据！我只是想要我的网络转换数据字节）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T17:03:32.260

如果我阅读正确，我想你想写一个[Packet Sniffer](http://en.wikipedia.org/wiki/Packet_analyzer)。[这里](http://www.c-sharpcorner.com/UploadFile/fyratkocak/PacketSniffer12032005034955AM/PacketSniffer.aspx)有一个可下载的源代码，您应该可以对其进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T17:53:44.567

实际上，我只需`Sniffer`要从 David Stratton 的问题的第二条评论中得到的名称。我搜索了谷歌并找到[了这个](http://www.codeproject.com/Articles/17031/A-Network-Sniffer-in-C)，它比[这](http://www.c-sharpcorner.com/UploadFile/fyratkocak/PacketSniffer12032005034955AM/PacketSniffer.aspx)更简单！（因为我想要一个简单的代码）并且我可以通过一些代码更改将包作为字节数据获取。谢谢大家帮助我！