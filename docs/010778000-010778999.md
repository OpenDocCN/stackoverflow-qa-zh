# StackOverflow 问答 10778000-10778999

# ios - IOS 无法实例化 UIApplication 委托实例

> ID：10778000
> 
> 赞同：5
> 
> 时间：2012-05-27T23:33:15.470
> 
> 标签：ios, xcode, cocos2d-iphone

我创建了一个新的 cocos2d 项目，并将之前项目中的一些文件复制到这个新项目中。当 xCode 提示时，我确保表明我想要一份副本。我的 AppDelegate 类是 AppDelegate。

我对新项目进行了清理和构建。

我的 main.m 看起来像这样

```
int main(int argc, char *argv[]) {

NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
int retVal = UIApplicationMain(argc, argv, nil, @"AppDelegate");
[pool release];
return retVal;
} 
```

当我运行新项目时，出现以下错误；

无法实例化 UIApplication 委托实例。没有加载名为 AppDelegate 的类。

此错误似乎发生在

```
int retVal = UIApplicationMain(argc, argv, nil, @"AppDelegate"); 
```

正在 main.m 文件中运行。

AppDelegate 类显然存在于我的项目中。我希望有人能在这里把我推向正确的方向。

# c# - 无法获得准确的 Unix UTC 秒数

> ID：10778006
> 
> 赞同：0
> 
> 时间：2012-05-27T23:34:59.527
> 
> 标签：c#, date, unix-timestamp

我试过[如何将 DateTime 转换为自 1970 年以来的秒数？](https://stackoverflow.com/questions/3354893/how-can-i-convert-a-datetime-to-the-number-of-seconds-since-1970)和

```
 DateTime origin = new DateTime(1970, 1, 1, 0, 0, 0, 0);
    DateTime date = DateTime.Parse(@"28/05/12 01:30");
    TimeSpan diff = date.ToUniversalTime() - origin;
    Console.WriteLine( (Math.Floor(diff.TotalSeconds)).ToString()); 
```

输出 = 1338161400

[与http://www.mbari.org/staff/rich/utccalc.htm](http://www.mbari.org/staff/rich/utccalc.htm) 1338168600相比，这是错误的

为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T23:59:06.083

这很可能来自时区差异。如果您将值存储在临时变量中并查看，您可能会看到`ToUniversalTime`适当地修改了原始值：

```
 DateTime origin = new DateTime(1970, 1, 1, 0, 0, 0, 0);
        DateTime date = DateTime.Parse(@"05/28/2012 01:30:00");
        date = date.ToUniversalTime(); 
```

就我而言，当我将日期设置为 UniversalTime 后查看日期时，我看到时间为 5:30:00，因为我在东海岸。

所以，为了迫使这如你所料，我只是将我的时间改为实际上是格林威治标准时间（将我的日期更改 4 小时：

```
 DateTime origin = new DateTime(1970, 1, 1, 0, 0, 0, 0);
        DateTime date = DateTime.Parse(@"05/27/2012 9:30:00 pm");
        date = date.ToUniversalTime();
        TimeSpan diff = date - origin;
        Console.WriteLine((Math.Floor(diff.TotalSeconds)).ToString()); 
```

这产生：`1338168600`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:22:53.547

与 .NET`DateTime`相关的类应该是*Just Work*。他们经常这样做，但如果您使用的不是当地时间，则必须注意细节。（这不是特定于 .NET 的问题 - 时区，尤其是 DST，通常会引起严重的头痛。）无论您的语言环境如何，以下代码段都应该产生正确的输出：

```
DateTime origin = new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
DateTime date = DateTime.Parse(@"28/05/12 01:30", null, System.Globalization.DateTimeStyles.AssumeUniversal);
TimeSpan diff = date.ToUniversalTime() - origin;
Console.WriteLine((Math.Floor(diff.TotalSeconds)).ToString()); 
```

请注意，对于两个输入日期，需要明确指定日期应视为 UTC 日期而不是本地日期。调用似乎是多余的`ToUniversalTime()`，但有必要产生适当的差异。这似乎是减号运算符实施中的疏忽。

另请参阅MSDN 上的[选择 DateTime、DateTimeOffset 和 TimeZoneInfo](http://msdn.microsoft.com/en-us/library/bb384267.aspx)。

# c# - ListView 中显示不必要的滚动条

> ID：10778012
> 
> 赞同：3
> 
> 时间：2012-05-27T23:36:13.667
> 
> 标签：c#, winforms

C# WinForms：无法弄清楚为什么它在此屏幕截图中显示 scoll 条？我仍然希望它“根据需要”显示垂直滚动条，但是这个水平滚动条呢？为什么会显示？我的物品没有那么宽...

![在此处输入图像描述](../Images/8fb7bc77953e3631364a3f21e63dabb9.png)

这也是我在 FormLoad 上做的一些初始化 ..如果其中任何部分是罪魁祸首

```
 listView.Scrollable = true;
    listView.FullRowSelect = true;
    listView.View = View.Details;
    listView.HeaderStyle = ColumnHeaderStyle.None;
    ColumnHeader header = new ColumnHeader();
    header.Text = "MyHeader";
    header.Name = "MyColumn1";
    header.Width = listView.Width;
    listView.Columns.Add(header); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T23:51:29.290

```
header.Width = listView.Width; 
```

不，你忘了边界。使固定：

```
header.Width = listView.ClientSize.Width; 
```

# python - 使用 Python 访问 Facebook API 数据

> ID：10778018
> 
> 赞同：7
> 
> 时间：2012-05-27T23:37:32.037
> 
> 标签：python, facebook

访问 python 2.7 或 python 3.0 的 Facebook Graph API 数据的最佳库是什么？

我是 Facebook Graph API 的新手。做一些研究，过去人们使用 pyfacebook 和 Facebook Python SDK，但似乎都不再更新/支持。人们目前使用什么来访问数据？是否有一个独立于平台/框架的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T00:53:22.693

人们使用 SDK。这是最易于管理的方法。

Python SDK (facebook) 是最新的，并且在[https://github.com/pythonforfacebook/facebook-sdk](https://github.com/pythonforfacebook/facebook-sdk)有一个 repo 。它不是官方的，因为 Facebook 不再正式支持，*但*它被维护（最后一次提交 12 天前）*并且*人们确实使用它。

facepy 也得到积极维护[https://github.com/jgorset/facepy](https://github.com/jgorset/facepy)。facepy 的界面非常实用，是 API 的轻量级包装器（几乎您可以访问原始 API），因为 Python SDK 更加集成。

例如，

*照片上传*

Python SDK

```
graph = facebook.GraphAPI(oauth_access_token)
tags = json.dumps([{'x':50, 'y':50, tag_uid:12345}, {'x':10, 'y':60, tag_text:'a turtle'}])
graph.put_photo(open('img.jpg'), 'Look at this cool photo!', album_id_or_None, tags=tags) 
```

脸皮

```
graph = GraphAPI(oauth_access_token)
graph.post(
    path = 'me/photos',
    source = open('parrot.jpg')
) 
```

请注意，后者类似于原生 Graph API 调用的`.put_photo`vs。`me/photos`

还有 Django Facebook [http://django-facebook.readthedocs.org/en/latest/](http://django-facebook.readthedocs.org/en/latest/)

# c++ - OpenCV：加速 KLT 轨迹和 Harris 角点提取

> ID：10778021
> 
> 赞同：1
> 
> 时间：2012-05-27T23:38:02.387
> 
> 标签：c++, opencv, tracking

我正在使用 OpenCV 的 goodfeaturesToTrack 以及发现的角的亚像素细化和 Lucas Kanade 跟踪器？您对可以实现更高速度的替代方案有什么建议吗？

# android - Android GLSurfaceView 捏缩放

> ID：10778023
> 
> 赞同：2
> 
> 时间：2012-05-27T23:38:18.610
> 
> 标签：android, opengl-es, zooming, glsurfaceview, pinchzoom

我正在尝试在 GLSurfaceview 中实现捏合缩放，但无法使其正常工作。我知道如何放大图片的中心，这很容易（**我发布的示例已经可以缩放到图片的中心**）。但我不知道如何考虑手指坐标。

该项目本身是一个画廊应用程序，所以我不需要任何花哨的 3D 旋转。我需要了解**如何根据双指缩放手势放大图像的一部分**。很可能这可能是 3-5 行代码的问题，但我没有找到正确的方法来做到这一点。

这意味着场景矩阵不仅在 Z 轴上平移以进行缩放，而且还平移（移动）了某个 deltaX 和 deltaY 数量 - 以保持您正在放大的点在它的位置。

我的场景是这样设置的：

（渲染模式设置为 RENDERMODE_WHEN_DIRTY）

```
 // Screen size (in screen pixels.
    private int mViewportWidth;
    private int mViewportHeight;
    // Rectangle for render area.
    private RectF mViewRect = new RectF();

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {
        gl.glViewport(0, 0, width, height);
        mViewportWidth = width;
        mViewportHeight = height;

        float ratio = (float) width / height;
        mViewRect.top = 1.0f;
        mViewRect.bottom = -1.0f;
        mViewRect.left = -ratio;
        mViewRect.right = ratio;

        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        GLU.gluPerspective(gl, 20f, (float) width / height, .1f, 100f);
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();
    } 
```

应实现**捏拉缩放**的绘图区域：

```
@Override
public synchronized void onDrawFrame(GL10 gl) {
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT); // | GL10.GL_DEPTH_BUFFER_BIT);
    gl.glLoadIdentity();

    //Pinch-To-Zoom transformation should be implemented here
    //code below doesn't work
    gl.glTranslatef(-delta.x,-delta.y, -currentScale);

    //the drawing is done here
    //...
} 
```

我在同一个渲染类的方法中得到捏合手势和缩放之间的中间点：

```
private float currentScale = 6f;
/**
 * 
 * @param scaleAbsolute - scale value from ScaleGestureListener
 * @param focusX - X coordinate of pinch-to-zoom gesture in screen coordinates
 * @param focusY - Y coordinate of pinch-to-zoom gesture in screen coordinates
 */
public void zoom(float scaleAbsolute, float focusX, float focusY) {
    //the initial value of currentScale is 6f and by zooming in, we are decresing this value
    //currentScale is used as the Z value (so lower number = bigger zoom)
    currentScale = currentScale / scaleAbsolute;

    //Keep track of deltaX/deltaY here? How?

} 
```

我认为应该添加一个全局 deltaX 和 deltaY 值，但我不知道如何根据当前缩放级别计算 X、Y 偏移。

这是一个将屏幕坐标转换为场景坐标的辅助函数：

```
/**
 * Translates screen coordinates into view coordinates.
 */
public void translate(PointF pt) {
    pt.x = mViewRect.left + (mViewRect.width() * pt.x / mViewportWidth);
    pt.y = mViewRect.top - (-mViewRect.height() * pt.y / mViewportHeight);
} 
```

# javascript - Javascript：找到最接近的数字

> ID：10778027
> 
> 赞同：-5
> 
> 时间：2012-05-27T23:39:53.930
> 
> 标签：javascript

我想在javascript中找到四舍五入的最接近的数字，例如

10 --> 10

11 --> 10

12 --> 10

13 --> 15

16 --> 15

17 --> 15

18 --> 20

19 --> 20

20 --> 20

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T23:46:08.233

```
var multipleOfFive = Math.round(yourNumber / 5) * 5; 
```

# c# - 不明原因的空指针引用，我在怪鬼

> ID：10778028
> 
> 赞同：3
> 
> 时间：2012-05-27T23:39:58.183
> 
> 标签：c#, mono, monomac

我有以下代码：

```
public void DrawInput(string ChatCurrent){

        int uCursorTop;
        int uCursorLeft;
        uCursorLeft = Console.CursorLeft;
        uCursorTop = Console.CursorTop;
        Console.SetCursorPosition(0, uCursorTop);
        Console.Write("> "+ChatCurrent+" ");
        Console.SetCursorPosition(ChatCurrent.Length, uCursorTop);
    } 
```

除了最后一行，它的行为正常。最后一行抛出`System.NullReferenceException: Object reference not set to an instance of an object`。奇怪的事？具体来说，访问`ChatCurrent.Length`是导致它失败的原因。紧接在前面的行，它回显了字符串的内容，工作得很好。

这是怎么回事？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T23:43:10.683

字符串连接会将`null`值视为**空字符串**

> 在字符串连接操作中，C# 编译器将空字符串视为空字符串，但它不会转换原始空字符串的值。

[http://msdn.microsoft.com/en-us/library/ms228504.aspx](http://msdn.microsoft.com/en-us/library/ms228504.aspx)

但即使你`null`直接传递给`Console.Write`，它也不会抛出异常，它什么也不写。

[http://msdn.microsoft.com/en-us/library/zcwe8sfx%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/zcwe8sfx%28v=vs.80%29.aspx)

> 如果 value 是空引用（在 Visual Basic 中为 Nothing），则不写入任何内容，也不会引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T00:00:32.243

这是发生的事情：

我得到了如上所述的错误。当我注释掉长度测量时，我输入了一些内容以查看文本是否也会导致错误。如果没有，我把它放回去并尝试其他实验。

我在测试时始终没有输入任何内容，这反过来意味着变量已声明但未初始化。我已经尝试解决这个问题**两个小时。**

**也就是说，以防其他人遇到此问题：**确保您的变量已**初始化。**这与在这种情况下声明它一样重要。

# c - C中的二叉树 - 分段错误

> ID：10778030
> 
> 赞同：-1
> 
> 时间：2012-05-27T23:40:37.830
> 
> 标签：c, binary-tree

```
#include <stdio.h>
#include <stdlib.h>

typedef struct nod{
    int data;
    struct nod *left,*right;
}NOD;

NOD * generate(NOD * root)
{
    NOD *r,*p;
    int d=-1,value,line,position,i,f,v;
    if(root==NULL)
    {
        do{
            printf("Would you like to create the root node?\n\n1 - yes\n0 - no\n");
            scanf("%d",&d);
            switch(d)
            {
                case 1:
                    printf("Value=");
                    scanf("%d",&value);
                    root=add_root(value);
                    break;
                case 0:
                    return NULL;
                    break;
                default:
                    printf("Command unrecognized!\n");
                    break;
            }
        } while(d==-1);
        if(root!=NULL)
                printf("Root node successfully created!\n");
        else
            printf("Error: could not create root node!\n");
        d=-1;
        do{
            printf("Continue adding nodes?\n\n1 - yes\n0 - no\n");
            scanf("%d",&d);
            switch(d)
            {
                case 1:
                    printf("Insert the line and the position of the node you wish to add (root node has line=0, position=0)\nLine=");
                    scanf("%d",&line);
                    printf("Position ( less or equal with 2^$line-1 )=");
                    scanf("%d",&position);
                    printf("Value=");
                    scanf("%d",&value);
                    r=p=root;
                    for(i=line-1;i=0;i--)  
                    {
                        f=power(2,i);
                        if(position & f == f)   // if the i-(st,nd,rd,th) bit of "position" is 1, then (position & f == f) is true and *r will go right
                        {
                            p=r;
                            r=r->right;
                            v=1;
                        }
                        else
                        {
                            p=r;
                            r=r->left;
                            v=0;
                        }
                    }
                    if(v==0)
                        p=add_left(&r,value);
                    if(v==1)
                        p=add_right(&r,value);

                    break;
                case 0:
                    return root;
                    break;
                default:
                    printf("Command unrecognized!\n");
                    break;
            }
        } while(d==-1);
    }
    else
    {
        ...
    }

NOD * add_left(NOD **p,int value)
{
    NOD * r;
    r=malloc(sizeof(NOD));
    r->data=value;
    r->left=NULL;
    r->right=NULL;
    (*p)->left=r;
    return r;
}

NOD * add_right(NOD **p,int value)
{
    NOD * r;
    r=malloc(sizeof(NOD));
    r->data=value;
    r->left=NULL;
    r->right=NULL;
    (*p)->right=r;
    return r;
}

NOD * add_root(int value)
{
    NOD * x;
    x=malloc(sizeof(NOD));
    x->data=value;
    x->left=NULL;
    x->right=NULL;
    return x;
}

}
int main() {
    NOD *root=NULL;
    root=generate(root);
    return 0;
} 
```

* * *

我尝试制作一个创建二叉树的程序，但我不断收到 SIGSEGV 分段错误，我不明白为什么。你能告诉我我做错了什么吗？

```
if(position & f == f)   // if the i-(st,nd,rd,th) bit of "*position*" is 1,
                        // then (position & f == f) is true and *r will go right 
```

你觉得这部分怎么样？

*   *line*是树的级别（根有 line=0）

*   *position*是节点从左到右的位置（根的位置=0）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T23:52:30.783

您已经加粗了一个有问题的部分：

```
if(position & f == f) 
```

`==`的优先级高于`&`，因此被解析为

```
if(position & (f == f)) 
```

和 一样`if (position & 1)`，不是你想要的。

此外，您的循环条件错误

```
for(i=line-1;i=0;i--) 
```

测试可能应该是`i >= 0`，否则永远不会执行循环（`i = 0`是一个评估为 0 的赋值）。

如果这些是固定的并且循环被执行，那么在第一次迭代之后`r`是一个空指针，那么下一个循环迭代会导致崩溃`r = r->right;`，或者，如果循环只迭代一次，`add_left(&r,value);`（或`add_right`）取消引用倒数第二行试图访问的空指针它的`left`（resp. `right`）指针：

```
NOD * add_left(NOD **p,int value)
{
    NOD * r;
    r=malloc(sizeof(NOD));
    r->data=value;
    r->left=NULL;
    r->right=NULL;
    (*p)->left=r;          // *p == NULL here
    return r;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T00:23:26.647

在这一行

```
for(i=line-1;i=0;i--) 
```

我想你的意思是

```
for(i=line-1;i!=0;i--) 
```

否则循环将不会执行（`i=0`计算结果为`false`）。这导致`v`具有未定义的值（因为它从未被初始化）。虽然这很可能不会导致段错误，但当您覆盖根的左/右子树时，它会导致内存泄漏。

此外，默认`switch`分支不会更改 的扫描值`d`，这意味着您继续使用`NULL`根目录（检查 的错误分支`root != NULL`）不会退出函数）

# php - 如何检查字符串内容中是否包含任何 HTML？

> ID：10778035
> 
> 赞同：23
> 
> 时间：2012-05-27T23:41:38.390
> 
> 标签：php, html, regex, xhtml

如何检查 PHP 字符串内容是否包含任何 HTML 内容？

我不擅长正则表达式，所以我想要一个名为“ `is_html`”的函数来检查这个。：） 谢谢你！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-27T23:50:53.280

如果你想测试一个字符串是否包含一个`"<something>"`, （这是惰性的，但可以为你工作），你可以尝试这样的事情：

```
function is_html($string)
{
  return preg_match("/<[^<]+>/",$string,$m) != 0;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-08-20T15:25:59.920

我不使用正则表达式（如此处的其他建议），而是使用以下方法：

```
 function isHtml($string)
    {
        if ( $string != strip_tags($string) )
        {
            return true; // Contains HTML
        }
        return false; // Does not contain HTML
    } 
```

在这里，我使用 PHP 函数[strip_tags](http://php.net/manual/en/function.strip-tags.php)从字符串中删除任何 HTML。然后它比较字符串，如果它们不匹配，则存在 HTML 标记。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-11-09T17:27:37.153

接受的答案会将包含 <something> 的字符串视为 HTML，显然它不是。

我使用以下内容，这可能是一个更好的主意，也可能不是一个更好的主意。（评论赞赏。）

```
function isHTML( $str ) { return preg_match( "/\/[a-z]*>/i", $str ) != 0; } 
```

这将查找任何包含 /> 且斜线和右括号之间有零个或多个字母的字符串。

上述函数返回：

```
<something>             is NOT HTML
<b>foo</b>              is HTML
<B>foo</B>              is HTML
<b>foo<b>               is NOT HTML
<input />               is HTML 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-05-27T23:50:29.083

可能最简单的方法是：

```
<?php

function hasTags( $str )
{
    return !(strcmp( $str, strip_tags($str ) ) == 0);
}

$str1 = '<p>something with <a href="/some/url">html</a> in.';
$str2 = 'a string.';

var_dump( hasTags( $str1 ) ); // true - has tags.
var_dump( hasTags( $str2 ) ); // false - no tags. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-27T23:52:25.040

这是我想出的

```
function isHtml($string){
     preg_match("/<\/?\w+((\s+\w+(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)\/?>/",$string, $matches);
     if(count($matches)==0){
        return FALSE;
      }else{
         return TRUE;
      }
} 
```

您只需传递一个字符串并检查它是否返回真或假。就如此容易。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-27T23:44:07.933

这取决于您定义的 html 内容。

最直接的事情是测试字符串是否包含可以用正则表达式完成的html标签

```
<html.*> 
```

在 php 中，测试将是

```
if (preg_match('/<html.*>/', $subject)) {
    # Successful match
} else {
    # Match attempt failed
} 
```

如果您想查看是否有有效的 html，最好使用 html 解析器。

# iphone - IOS CABasicAnimation 旋转和触摸框

> ID：10778043
> 
> 赞同：1
> 
> 时间：2012-05-27T23:43:14.100
> 
> 标签：iphone, ios5

我有一个 UIView 的子类，它正在使用 CABasicAnimation 进行旋转。我还希望用户触摸这个旋转的视图来触发某些事件。但是，我发现对我的视图应用旋转似乎会弄乱我视图的可触摸区域。旋转后视图正确显示，但似乎只有一半的视图是可触摸的。touchesBegan 方法不会在视图的某些部分上触发，即使触摸清楚地显示在视图上。在旋转视图后，我需要做些什么来纠正视图的框架，以便可以正确地进行交互？

这是我的轮换代码：

```
CABasicAnimation *fullRotation;
fullRotation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
fullRotation.fromValue = [NSNumber numberWithFloat:0];
fullRotation.toValue = [NSNumber numberWithFloat:angle];
fullRotation.duration = 0.0;
fullRotation.removedOnCompletion = FALSE;
fullRotation.autoreverses = NO;
fullRotation.fillMode = kCAFillModeForwards;
fullRotation.repeatCount = 0;
[self.layer addAnimation:fullRotation forKey:@"rotation"]; 
```

通过做一些 NSLogs，我确实可以看到在添加动画后视图的框架没有被修改，尽管视图在视觉上看起来不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T01:55:21.040

我最终只使用 CGAffineTransform 进行旋转。只要确保在应用旋转后不要修改框架，如果需要移动视图，您应该使用 view.center 而不是 view.frame。

```
CGAffineTransform transformRotate = CGAffineTransformMakeRotation(angle);
self.transform = transformRotate; 
```

# xml - 如何修复此 XSLT 以使其专门针对此属性组合对 XML 节点进行分组？

> ID：10778045
> 
> 赞同：0
> 
> 时间：2012-05-27T23:43:59.583
> 
> 标签：xml, xslt

输入文件：

```
<workorders>
    <workorder>
        <renew id="a">
            <nodeA id="N1">
                <fruit id="1" action="aaa">

                    <orange id="x" action="aa">
                        <attributes>
                            <color>Yellow</color>
                            <ada>xxx</ada>
                        </attributes>
                    </orange>

                    <orange id="y" action="change">
                        <attributes>
                            <color>Red</color>
                            <year>2012</year>
                        </attributes>
                    </orange>
                    <orange id="x" action="aa">
                        <attributes>
                            <color>Pink</color>
                            <ada>xxx</ada>
                        </attributes>
                    </orange>
                    <orange id="y" action="change">
                        <attributes>
                            <color>Blue</color>
                            <condition>good</condition>
                        </attributes>
                    </orange>
                </fruit>
            </nodeA>
        </renew>
    </workorder>
</workorders> 
```

我的输出：

```
<workorders>
    <workorder>
        <renew id="a">
            <nodeA id="N1">
                <fruit id="1" action="aaa">
                    <orange id="x" action="aa">
                        <attributes>
                            <color>Pink</color>
                            <ada>xxx</ada>
                        </attributes>
                    </orange>
                    <orange id="y" action="change">
                        <attributes>
                            <color>Blue</color>
                            <year>2012</year>
                            <condition>good</condition>
                        </attributes>
                    </orange>
                </fruit>
            </nodeA>
        </renew>
    </workorder>
</workorders> 
```

**预期输出：**

```
<workorders>
    <workorder>
        <renew id="a">
            <nodeA id="N1">
                <fruit id="1" action="aaa">
                    <orange id="x" action="aa">
                        <attributes>
                            <color>Yellow</color>
                            <ada>xxx</ada>
                        </attributes>
                    </orange>

                    <orange id="x" action="aa">
                        <attributes>
                            <color>Pink</color>
                            <ada>xxx</ada>
                        </attributes>
                    </orange>

                    <orange id="y" action="change">
                        <attributes>
                            <color>Blue</color>
                            <year>2012</year>
                            <condition>good</condition>
                        </attributes>
                    </orange>
                </fruit>
            </nodeA>
        </renew>
    </workorder>
</workorders> 
```

XSL 文件：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:a="http://project.com">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:key name="entity" match="/workorders/*/*/*/*/*" use="concat(parent::*/@id, '_', @id, '_', @action)"/>

    <xsl:function name="a:is-primary" as="xs:boolean">
        <xsl:param name="ctx"/>
        <!-- need to establish "focus"(context) for the key() function to work -->
        <xsl:for-each select="$ctx">
            <xsl:sequence select="generate-id($ctx) = generate-id(key('entity', concat($ctx/parent::*/@id, '_', $ctx/@id, '_', $ctx/@action))[1])"/>
        </xsl:for-each>
    </xsl:function> 

    <xsl:function name="a:preceded-by" as="xs:boolean">
        <xsl:param name="ctx"/>
        <xsl:param name="action"/>
        <xsl:value-of select="count($ctx/preceding::*[a:matches($ctx, ., $action)]) > 0"/>
    </xsl:function>

    <xsl:function name="a:followed-by" as="xs:boolean">
        <xsl:param name="ctx"/>
        <xsl:param name="action"/>
        <xsl:value-of select="count($ctx/following::*[a:matches($ctx, ., $action)]) > 0"/>
    </xsl:function>

    <xsl:function name="a:matches" as="xs:boolean">
        <xsl:param name="src"/>
        <xsl:param name="target"/>
        <xsl:param name="action"/>

        <xsl:value-of select="
                     ($src/local-name() = $target/local-name()) and
                      ($src/parent::*/@id = $target/parent::*/@id) and 
                      ($src/@id = $target/@id) and 
                      (if ($action = 'same') 
                          then false()
                          else if ($action = 'any')
                              then ($target/@action = $src/@action)
                              else ($target/@action = $action))"/>  
    </xsl:function>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/*/*/*/*/*/*[a:is-primary(.)]" priority="1">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <xsl:apply-templates select="attributes" mode="consolidate-most-recent"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="attributes" mode="consolidate-most-recent">
        <xsl:copy>
            <xsl:for-each-group 
                        select="/workorders/*/*/*/*/*[a:matches(current()/parent::*, ., 'any')]/attributes/*" 
                        group-by="local-name()">
                <!-- take the last in the document order -->
                <xsl:apply-templates select="current-group()[last()]"/>
            </xsl:for-each-group>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="/*/*/*/*/*/*[not(a:is-primary(.))]"/>    
   </xsl:stylesheet> 
```

我应该在我的 xsl 文件中添加什么以使转换**仅**适用于具有组合的节点`action="change"`？现在它将所有其他动作组合分组。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T01:23:45.643

假设您的预期输出实际上应该保持`@action != 'change'`原样（这意味着每次出现都将`attributes/*`在输入文档中打印出原样而不尝试合并或合并），您只需要进行两个小的更改：

1）添加`@action = 'change'`到您的第一个“捕获”模板：

```
<xsl:template match="/*/*/*/*/*/*[action = 'change' and a:is-primary(.)]"> 
```

2）对您的“静默非主要”模板执行相同操作：

```
<xsl:template match="/*/*/*/*/*/*[@action = 'change' and not(a:is-primary(.))]"/> 
```

这将确保所有其他节点都通过身份转换模板。在您的输入文档上使用这两个修改运行转换会产生：

```
<workorders>
   <workorder>
      <renew id="a">
         <nodeA id="N1">
            <fruit id="1" action="aaa">
               <orange id="x" action="aa">
                  <attributes>
                     <color>Yellow</color>
                     <ada>xxx</ada>
                  </attributes>
               </orange>
               <orange id="y" action="change">
                  <attributes>
                     <color>Blue</color>
                     <year>2012</year>
                     <condition>good</condition>
                  </attributes>
               </orange>
               <orange id="x" action="aa">
                  <attributes>
                     <color>Pink</color>
                     <ada>xxx</ada>
                  </attributes>
               </orange>
            </fruit>
         </nodeA>
      </renew>
   </workorder>
</workorders> 
```

ps 如果您希望节点按以下方式排序`@action`（如预期的输出所示），则必须将以下模板添加到组合中：

```
<xsl:template match="/*/*/*/*/*">
    <xsl:copy>
        <xsl:apply-templates select="@*"/>
        <xsl:apply-templates select="*">
            <xsl:sort select="@action"/>
        </xsl:apply-templates>
    </xsl:copy>
</xsl:template> 
```

pps`a:matches()`函数的编写方式让我有点困惑。我会在逻辑表达式的最后一部分这样做：

```
(if ($action = 'any') 
    then true()
    else if ($action = 'same')
        then ($target/@action = $src/@action)
        else ($target/@action = $action)) 
```

它会写成：不关心`@action`属性如果`any`被要求，比较两个如果`same`被要求，否则假设提供了某个值，因此与该值进行比较。`same`然后，您将使用模板中的值调用它：

```
<xsl:for-each-group 
    select="/workorders/*/*/*/*/*[a:matches(current()/parent::*, ., 'same')]/attributes/*" 
    group-by="local-name()"> 
```

# ruby-on-rails - 通过文本识别日期

> ID：10778048
> 
> 赞同：4
> 
> 时间：2012-05-27T23:45:31.067
> 
> 标签：ruby-on-rails, date

我正在 Rails 中构建一个类似日历的应用程序。其中一个想法是让描述事件发生的文本可以被应用程序解析和理解。

例如，事件 A 发生在“每个星期五”、“每隔一天”、“每周”等。

是否有库或已知的实现方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T00:00:06.227

一个快速的谷歌搜索显示[慢性](https://github.com/mojombo/chronic)。[它在其 ruby​​gems.org 页面](http://rubygems.org/gems/chronic)上的下载量接近一百万，所以我认为值得一试。

# php - 关于删除授权的 PHP MYSQL 安全性

> ID：10778052
> 
> 赞同：1
> 
> 时间：2012-05-27T23:46:30.557
> 
> 标签：php, mysql

我是 Web 应用程序开发的新手，目前我正在开发一个小型应用程序。

只是想知道在 MySQL 用户权限上授予**DELETE是不好的做法。**在删除的那一刻，我只是更改了数据库中的一个字段。比如说“状态”我刚刚更新为“0”而不是“1”。哪种方法是正确的方法？请给我一个指导。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:55:17.987

只为您的用户/应用程序提供所需的权限是一个好主意。如果您的应用从未发出过`DELETE`查询，则它不需要该权限；不授予该权限可降低意外或恶意丢失数据的风险。

这通常不是最重要的事情，但如果可以，为什么不呢？它可能会引入一些开销，需要在您已经必须管理的所有其他事情之上管理 SQL 权限。

# javascript - 从 FF 扩展提交的意外推文文本

> ID：10778053
> 
> 赞同：3
> 
> 时间：2012-05-27T23:47:01.727
> 
> 标签：javascript, unicode, firefox-addon, tweets

我尝试在下一个代码的帮助下从我的 FF 插件发布推文：

```
 var hebrewDate = encodeURIComponent(this.hHCalendar.label);
 var author = "@HebrewCalendar";
 var postToTweeterLine = "http://www.twitter.com/home?status=" + hebrewDate + " " + author;
gBrowser.loadURI(url); 
```

当我只使用英语时：www.twitter.com/home?status=Or%20le%20Yom%20Bet%2C%207th%20Sivan%2C%205772%2C%20Isru%20Chag @HebrewCalendar

FF 12.0 显示下一个文本：

![在此处输入图像描述](../Images/d907892a5880cb1da6925f16166c645f.png)

如何解决 %20 的问题？

当我尝试发布希伯来语文本时，我看到下一个文本：%D7%90%D7%95%D7%A8%20%D7%9C%D7%99%D7%95%D7%9D%20%D7%91% 27%2C%20%D7%96%27%207%20%D7%91%D7%A1%D7%99%D7%95%D7%9F%20%20%D7%94%27%D7%AA% D7%A9%D7%A2%22%D7%91%205772%2C%20%D7%90%D7%A1%D7%A8%D7%95%20%D7%97%D7%92%20@HebrewCalendar

谢谢你，伊戈尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T02:36:57.960

问题是您对字符串进行了两次 URL 转义：一次是在执行 encodeURIComponent 时，另一次是在您通过 gBrowser 加载 URL 时。

# c# - 如何在某些特定 div 中呈现部分视图而不在 asp.net mvc 3 中使用 ajax？

> ID：10778055
> 
> 赞同：2
> 
> 时间：2012-05-27T23:47:22.010
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

如何在某些特定 div 中呈现部分视图而不在 asp.net mvc 3 中使用 ajax？

例如我有一个模型：

```
public class TestViewModel
{
    public string FullText
    {
        get
        {
            retrun "Full text";
        }
    }
    public string ShortText
    {
        get
        {
            return "Short text";
        }
    }
} 
```

主视图：

```
@model TestViewModel
   ...      
    <div id="RenderHere">

    </div>
    @Html.ActionLink("Show short text");
    @Html.ActionLink("Show full text");
   ... 
```

和两个部分视图：

ShortTextParial

```
@model TestViewModel
@Html.LabelFor(m => m.ShortText);
@Model.ShortText; 
```

和全文部分

```
@model TestViewModel
@Html.LabelFor(m => m.FullText);
@Model.FullText; 
```

例如，在不使用 ajax 的情况下按下“显示短文本”操作链接后，如何在“RenderHere”div 中呈现 ShortTextPartial？我已经找到了这样的解决方案，但它们不适合我。

PS 我不想使用 Ajax，因为如果在客户端禁用 Java 脚本，页面将无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T21:21:28.110

First of all I have to say I don't think your design is the best. Please notice that most of the logics, comparisons, and conditions should take place in your Models and Business Logic tier, rather than in Views and Controllers.

Anyway, If you don't want to use AJAX, you should either use URL parameters or Session States to pass data between pages. Having said that, I developed it by URL parameters.

(My development environment is VS2010 SP1, ASP.NET 4, MVC 3)

First we need to change TextViewModel like this:

```
public class TextViewModel
{
    public string FullText { get { return "Full text"; } }
    public string ShortText { get { return "Short text"; } }

    public string ViewMode { get; private set; }

    public TextViewModel(string viewMode)
    {
        if (!string.IsNullOrWhiteSpace(viewMode))
            this.ViewMode = viewMode.Trim().ToLower();
    }
} 
```

Now a little tweak on Controller:

```
public class HomeController : Controller
{
    public ActionResult Index(string id)
    {
        Models.TextViewModel model = new Models.TextViewModel(id);
        return View(model);
    }
} 
```

and finally our view:

```
@model MvcApplication1.Models.TextViewModel
@{
    ViewBag.Title = "Index";
}
<h2>
    Index</h2>
<div id="RenderHere">
    @if (Model.ViewMode == "short")
    {
        @Html.Partial("ShortTextParial", Model)
    }
    @if (Model.ViewMode == "full")
    {
        @Html.Partial("FullTextPartial", Model)
    }
</div>
@Html.ActionLink("Show short text", "Index", new { id = "short" })
@Html.ActionLink("Show full text", "Index", new { id = "full" }) 
```

The application works well in my computer. I've uploaded the code here if you need it: [http://goo.gl/9v2Ny](http://goo.gl/9v2Ny)

Again I want to say you can come up with a better design which doesn't need any `@if` in the View or even in the Controller.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T00:21:29.917

如果您真的不想使用 ajax 显示*更多*数据，您可以在单独的 div 中加载这两个内容并隐藏完整视图，当用户单击“显示更多”链接时，只需显示它。

你真的想这样做吗？请记住，并非所有用户都会点击您的“显示更多”链接。您仍然会为用户加载内容并将其隐藏。为什么需要这样做并增加页面大小？如果可能的话，我会使用 ajax 解决方案来“按需”提供数据。

# javascript - JavaScript：警报在脚本中不起作用

> ID：10778056
> 
> 赞同：2
> 
> 时间：2012-05-27T23:47:49.647
> 
> 标签：javascript

我是 JavaScript 新手。这是我开始实际学习 JavaScript 的第二天。我不知道问这个问题是否合适，因为要遵循的准则和标准太多了。

好吧，在这里我写了一个小脚本，但它不起作用。当`value < 5 && value > 5`它显示警报时。但是当有人给出答案 5（这是正确答案）时。它没有显示任何警报？我试图自己解决这个问题，但我无法解决这个问题。这是我的代码：

```
<script type="text/javascript"> 
    var number = prompt("count these numbers: 2+5-10+8=?");
    if( number === 5 ) {
     alert( "Congratulations Your Answer is Correct" );
    }
    else if ( number > 5  ) {
      alert( "Your answer is a little higher." );
    }
    else if ( number < 5 ) {
      alert( "Your answer is little lower than actual answer." );
    }
</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T23:48:40.927

提示返回一个字符串，但您正在对一个数字进行严格的相等测试。

你可以...

*   `number === "5"`用,代替测试字符串

*   或使用`==`代替`===`，这将为您进行转换，

*   或将提示转换为数字`number = parseInt(number, 10)`

*   或者如果您可能要测试浮点数，请使用`number = parseFloat(number)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T23:49:21.033

我建议：

```
var number = parseInt(prompt("count these numbers: 2+5-10+8=?"),10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T23:56:17.240

当您进行“===”比较时，它会检查类型是否完全匹配，在这种情况下，您正在检查 NUMBER 5 是否等于 STRING 5（或他们输入的任何其他内容），这是错误的。

正如大卫托马斯已经建议的那样，您需要将答案解析为整数：

```
var number = parseInt(prompt("count these numbers: 2+5-10+8=?")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T00:17:12.880

简单的答案是使用`==`而不是严格相等`===`。

不要使用`parseInt`，因为它会将 say 转换`5iasd`为`5`，因此您要么接受不正确的答案，要么需要额外的测试。

不要使用`parseFloat`，因为它不是必需的。使用`==`意味着以下所有条件都返回 true：

```
var n = 5;

n == '5'
n == '5.0'
n == '5e0'
n == '0.5e1' 
```

等等。

哦，作为参考，你应该学习 ECMAScript[抽象等式比较算法](http://es5.github.com/#x11.9.3)是如何工作的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-20T18:01:33.020

试试这个：

```
ScriptManager.RegisterStartupScript(this, GetType(), "alertmsg", "alert('your message');", true); 
```

# c - 多平台（Windows、Linux和OSX）的防文件删除；是否可以？

> ID：10778058
> 
> 赞同：-3
> 
> 时间：2012-05-27T23:48:21.833
> 
> 标签：c

我正在开发一些用C语言进行数据加密的软件。在这里，我只想问是否有可能利用一些技术来“不依赖特定的OS API”来进行防数据删除？如果您的回答是*有*可能，如果您能告诉我如何并给我很多解释，我会很高兴。否则，如果不可能，您可以不加解释地给我答案“不可能”。

我之所以要问的原因是，我预计如果有一天攻击者已经物理访问了机器，使用依赖 OS API 的反删除将不起作用（例如，通过使用像 Backtrack 5 这样的非常快速启动的操作系统）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T00:05:45.177

在 Unix 及其变体上，删除文件的标准系统调用是[`unlink()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/unlink.html). 为了防止数据删除，您必须确保对该系统调用的每次调用，在系统运行的任何程序中的任何位置，都会执行您想要的任何替代技巧。这在程序级别很难做到；你必须提供一个修改过的 C 库，而且你仍然会发现有些人甚至在他们的工作中解决了这个问题（例如，他们编写了一些汇编程序）。因此，您可以通过修改`unlink()`内核中系统调用的行为来做到这一点，但这也很困难且不可移植。

在 Windows 上，相同的注释适用于`unlink()`，但很有可能还有许多其他接口也提供删除文件的机制。相同的论点适用，但您必须捕获更多系统调用等。

最后，如果您需要更多的钉子，`unlink()`系统调用并不是破坏数据的唯一方法。您可以打开文件并截断​​它，然后将其关闭。文件存在，但数据不存在。您可以打开文件并对其进行修改；文件存在，但原始数据丢失。

所以，我认为你正处于困难时期。

您首先提出了评论，然后对问题进行了修订：

> [如果] 攻击者已经对机器进行了物理访问，则使用依赖 OS API 的反删除将不起作用（例如，通过使用像 Backtrack 5 这样的非常快速启动的 OS）。

我回答了：

*   如果攻击者可以启动到不同的操作系统，那么游戏就结束了——您无法阻止其他操作系统删除您当前操作系统中的文件。

这些话可能陈旧而丑陋，但它们基本上是正确的。操作系统负责原始硬件。如果攻击者可以选择负责硬件的对象，则攻击者获胜。

也可以看看：

*   [软件安全十大不变法则](http://technet.microsoft.com/library/cc722487.aspx)

    1.  法则 1：如果一个坏人可以说服你在你的电脑上运行他的程序，那它就不再是你的电脑了
    2.  法则 2：如果坏人可以更改您计算机上的操作系统，那它就不再是您的计算机了
    3.  法则 3：如果坏人可以不受限制地物理访问您的计算机，那么它就不再是您的计算机了
    4.  法则 4：如果你允许坏人将程序上传到你的网站，那么它就不再是你的网站了
    5.  法则 5：弱密码胜过强安全
    6.  法则 6：只有管理员值得信赖，计算机才是安全的
    7.  法则 7：加密数据仅与解密密钥一样安全
    8.  法则 8：过时的病毒扫描程序只比没有病毒扫描程序好一点点
    9.  法则 9：在现实生活或网络上，绝对匿名是不切实际的
    10.  法则 10：技术不是灵丹妙药

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T00:18:49.013

> 我之所以要问的原因是，我预计如果有一天攻击者已经物理访问了机器，使用依赖 OS API 的反删除将不起作用（例如，通过使用像 Backtrack 5 这样的非常快速启动的操作系统）。

抱歉，如果攻击者可以启动不同的操作系统，那么您无能为力，因为您可能编写的任何反删除代码都不会运行。

除非您设法以某种方式拦截和修补对 ATA/SCSI 控制器的调用，并在 BIOS 将控制权交给操作系统之前插入此修补程序，但我认为这甚至是不可能的；另一方面，物理访问 = root 访问，攻击者也可以拿起螺丝刀，打开机箱，将磁盘连接到另一台计算机，然后为所欲为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T23:54:37.893

对不起，基本上IO*是*操作系统。提供 IO 是操作系统最重要的工作。C 标准对它的定义如此之少，以至于它必须有所不同，尤其是在涉及取消删除文件这样晦涩难懂的事情时。

您可能会发现一些库将特定于操作系统的东西隐藏在一个不错的 API 后面，但它仍然取决于操作系统如何执行该操作。

# php - SonataAdminBundle - 自己的看法？

> ID：10778065
> 
> 赞同：1
> 
> 时间：2012-05-27T23:50:16.950
> 
> 标签：php, symfony1, symfony, symfony-sonata

在 Symfony 1.4 中，我可以从缓存中获取控制器和视图，并在我的项目中使用任何更改。SonataAdminBundle 可以做到这一点吗？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:17:26.660

我很长时间没有使用 Sonata，但是有一种标准方法可以覆盖外部 Bundle 的任何部分[——Bundle 继承](http://symfony.com/doc/current/cookbook/bundles/inheritance.html)。

# jsf - ui:decorate 和 ui:include 之间真正的概念区别是什么？

> ID：10778068
> 
> 赞同：24
> 
> 时间：2012-05-27T23:51:07.570
> 
> 标签：jsf, facelets

它发生在我之前，除了你也可以传递和传递给包含的文件之外，它`ui:decorate`在功能上是相同的。`ui:include``ui:param``ui:define`

我疯了吗？

**编辑：**虽然事实上你也可以传递`ui:param`给一个`ui:include`文件，但事实证明我已经在这样做了。也许你也可以通过`ui:define`，我会在这里检查和编辑。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-28T21:52:23.820

[`<ui:include>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/ui/include.html)和之间的主要区别在于[`<ui:decorate>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/ui/decorate.html)旨在`<ui:decorate>`允许插入用户定义的模板组件，而`<ui:include>`旨在包括现有的和已经预定义的模板。

这确实意味着在其主体中`<ui:decorate>`支持[`<ui:define>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/ui/define.html)用户自定义模板组件，并且可以将其插入[`<ui:insert>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/ui/insert.html)到模板内部的位置。

这是一个-有点笨拙的-示例来显示它可以在哪里使用：

`/WEB-INF/templates/field.xhtml`

```
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
>
    <h:outputLabel for="#{id}" value="#{label}" />
    <ui:insert name="input" />
    <h:message id="#{id}_message" for="#{id}" />
</ui:composition> 
```

`/page.xhtml`

```
<h:panelGrid columns="3">
    <ui:decorate template="/WEB-INF/templates/field.xhtml">
        <ui:param name="label" value="Foo" />
        <ui:param name="id" value="foo" />
        <ui:define name="input">
            <h:inputText id="foo" value="#{bean.foo}" required="true" />
        </ui:define>
    </ui:decorate>
    <ui:decorate template="/WEB-INF/templates/field.xhtml">
        <ui:param name="label" value="Bar" />
        <ui:param name="id" value="bar" />
        <ui:define name="input">
            <h:selectBooleanCheckbox id="bar" value="#{bean.bar}" required="true" />
        </ui:define>
    </ui:decorate>
    ...
</h:panelGrid> 
```

请注意，它很好地呈现了面板网格的每个单元格中的组件。同样，这个特定的例子非常笨拙，我只是使用了一个[标记文件](https://stackoverflow.com/questions/5713718/how-to-make-a-grid-of-jsf-composite-component)。只有当它是一个更大的部分时，例如一个完整的表单，它的页眉或页脚应该是可定制的，那么 an 才是`<ui:decorate>`合适的。

另一个主要优点`<ui:decorate>`是它允许您将复合组件与模板一起使用。另请参阅[是否可以在 JSF 2 中将模板与复合组件一起使用？](https://stackoverflow.com/questions/9817851/is-it-possible-to-use-template-with-composite-component-in-jsf-2)

# jquery - window.onload 与 document.ready jQuery

> ID：10778070
> 
> 赞同：27
> 
> 时间：2012-05-27T23:51:52.457
> 
> 标签：jquery, window, document, onload, ready

我有一个有两列的网站。我想使用 jQuery 在两者上具有相同的高度。

我正在尝试获取徽标列的高度。我有：

```
$(document).ready(function() {
    alert($('#logo').height());
});​ 
```

它没有用。所以我把它改成：

```
window.onload = function(){
    alert($('#logo').height());
} 
```

它正在工作。这是怎么回事？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-27T23:54:41.233

`document ready`在 DOM 加载时触发，因此高度等信息不可用，除非明确声明。

`window onload`等待页面中的资产完全加载 - 因此现在可以使用高度等信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-23T05:15:26.930

我在处理 $(document)ready 中的图像高度和宽度时遇到了同样的问题，我找到了一些更好的参考来解决它......我希望这可以帮助一些人

**$(文档).ready()**

当 HTML 文档被加载并且 DOM 准备就绪时触发 document ready 事件，即使所有的图形还没有加载。如果您想在窗口加载之前为某些元素连接事件，那么 $(document).ready 是正确的地方。

**代码：**

```
$(document).ready(function() {
    // document is loaded and DOM is ready
    alert("document is ready");
}); 
```

**$(窗口).load()**

窗口加载事件稍后触发，当整个页面完全加载时，包括所有框架、对象和图像。因此，涉及图像或其他页面内容的函数应放置在窗口或内容标签本身的加载事件中。

**代码：**

```
$(window).load(function() {
    // page is fully loaded, including all frames, objects and images
    alert("window is loaded");
}); 
```

# javascript - jquery sticky Panel-v1.4.1 - iphone、ipad 修复？

> ID：10778077
> 
> 赞同：1
> 
> 时间：2012-05-27T23:52:46.883
> 
> 标签：javascript, jquery, iphone, jquery-plugins, fixed

首先，我想对粘性面板 1.4.1 插件表示赞赏，它工作准确且快速，我很高兴它！

唯一的问题是该插件目前不支持 iphone - ipad。

这会是未来的一种选择，还是根本不可能？

还是我在这里做错了什么？

这里的代码片段：

```
<script type="text/javascript">
    $().ready(function () {
        var stickyPanelOptions = {
            topPadding: 0,
            afterDetachCSSClass: "BoxGlow_Grey2",
            savePanelSpace: true
        };
        $("#mainContentNav").stickyPanel(stickyPanelOptions);
     });
</script>

<div id="mainContentNav">
    <ul id="fixedNav">
        <li><a href="#" class="Button baselink"><div id="1">1</div></a></li>
        <li><a href="#" class="Button baselink"><div id="2">2</div></a></li>
        <li><a href="#" class="Button baselink"><div id="3">3</div></a></li>
     </ul>
</div>

#mainContentNav {
    z-index: 2;
    background: #FFF;
    text-align: center;
    height: 60px;
    width: 500px;
    margin-left: 50px;
    border-bottom-width: 1px;
    border-bottom-style: solid;
    border-bottom-color: #000;
    padding: 0;
    list-style: none; 
} 
```

希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:33:00.960

我添加了 iPad 支持，修复了刷新错误并添加了 onDetached 和 onReattached 事件。

# vim - vim 颜色方案执行但不改变颜色

> ID：10778078
> 
> 赞同：2
> 
> 时间：2012-05-27T23:53:18.130
> 
> 标签：vim

`ashen.vim`我已经安装了一个名为我的`~/.vimrc/colors`文件夹的配色方案。当我在 vim 中时，我可以通过 do 来执行配色方案`:colorscheme ashen`，但文件的实际颜色根本不会改变。[（从http://vimcolorschemetest.googlecode.com/svn/html/index-java.html](http://vimcolorschemetest.googlecode.com/svn/html/index-java.html)下载的配色方案）。我还需要做些什么来“激活”配色方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T00:03:12.077

你可能需要告诉 vim 使用 256 色。添加：

```
" 256-color terminal
set t_Co=256 
```

到 ~/.vimrc 的顶部。当然，如果您的终端不支持 256 色，这实际上是行不通的。

# c# - Java 到 C#：通用扩展

> ID：10778084
> 
> 赞同：3
> 
> 时间：2012-05-27T23:54:55.093
> 
> 标签：c#, java, android, xamarin.android

我正在尝试将此 Java (Android) 代码转换为 c# (MonoDroid)，但我不明白`<Item extends OverlayItem>`

```
public class BalloonOverlayView<Item extends OverlayItem> extends FrameLayout 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T23:58:18.203

它为类型参数添加了一个约束。它类似于`where`C# 中的子句。

在 Java 中，您有：

```
public class BalloonOverlayView<Item extends OverlayItem> extends FrameLayout 
```

where`Item`是必须子类化或实现 type 的类型参数`OverlayItem`。在 C# 中，这将被写为：

```
public class BalloonOverlayView<Item> : FrameLayout where Item : OverlayItem 
```

您可以看到约束是如何移动到最后的，但在其他方面类似。在 C# 中，为类型参数命名以 a 为前缀是非常[常见的做法`T`](http://msdn.microsoft.com/en-us/library/ms182243.aspx)，因此我推荐这样的名称`TItem`：

```
public class BalloonOverlayView<TItem> : FrameLayout where TItem : OverlayItem 
```

这有助于明确类型参数和普通类型之间非常重要的区别。

有关何时要使用这样的类型约束的讨论，[我在上一个答案中详细讨论了这一点。](https://stackoverflow.com/questions/4073852/why-use-generic-constraints-in-c-sharp/4073899#4073899)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T23:57:30.887

与此相同：

```
public class BalloonOverlayView<Item> : FrameLayout where Item : OverlayItem 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T23:59:00.063

这意味着参数化类型`Item`必须是`OverlayItem`

从语义上讲，这意味着如果 BalloonOverlayView 不扩展，则使用参数化类型实例化它是没有意义的`OverlayItem`

# apache - 如何摆脱错误的 301/2 重定向？

> ID：10778087
> 
> 赞同：0
> 
> 时间：2012-05-27T23:56:01.560
> 
> 标签：apache, http, .htaccess, redirect

在我的 .htaccess 中，我设置了（一对）301 重定向。它们被拾取只是为了创建一个无限循环。

例如我设置以下代码：

```
Redirect 301 / http://example.com/nl 
```

这使浏览器重定向到 example.com/nl -> example.com/nl/nl -> example.com/nl/nl/nl -> example.com/nl/nl/nl/nl -> 等。

另一个一直在前面加上 www。到域名 (www.www.www.www.www.example.com)。

我还设置了一些其他的尝试来解决这个问题。当然，我做的第一件事就是将 .htaccess 恢复为原始格式。但是所有重定向仍然有效！（在多个浏览器/机器/“隐私浏览器”/IPS 上）。

对于测试尝试添加这个：

```
Redirect 301 /test http://www.google.com 
```

如果您访问 example.com/test，这会将浏览器发送到 google。

但是，如果我将其更改为

```
Redirect 301 /test http://www.drupal.org 
```

或者

```
Redirect 302 /test http://www.drupal.org 
```

或者

```
RewriteCond %{REQUEST_URI} !^/$ [NC]
RewriteRule ^ http://www.example.com [L,R=301] 
```

或完全删除代码。

它仍然继续使用谷歌而不是 drupal.org。

如何摆脱这些错误的重定向？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:59:31.310

由于 301 是永久重定向的代码，因此以某种方式缓存它是有意义的。尝试清除缓存并查看问题是否仍然存在。

# c++ - 如何在 Windows 编程（保护模式）中访问前 1MB 的 RAM？

> ID：10778091
> 
> 赞同：-3
> 
> 时间：2012-05-27T23:56:49.280
> 
> 标签：c++, windows, ram, protected-mode

如何在 Windows 编程（保护模式）中直接访问前 1 MB RAM？

例如写入视频部分。

我可以使用 DPMI 解决所有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T00:01:10.597

不，常规（=用户模式）应用程序不能直接访问物理地址空间（每个应用程序看到的地址空间是*虚拟*地址空间，由操作系统通过 MMU 管理）。拥有一个操作系统的重点是抽象硬件细节并向应用程序提供一个干净的程序界面，如果你想在屏幕上绘图，你应该使用 Windows 提供的图形库（GDI，DirectX）。

如果您编写在内核模式下运行的驱动程序，您几乎*可以*访问任何硬件资源，但如果您不仔细遵循 Windows 内核模式编程的规则，您可能会立即使整个系统崩溃并出现 BSOD .

如果您在谈论视频 RAM 和 DPMI，我想您来自一些关于 DOS 风格编程的书籍/教程（甚至根本没有任何操作系统）；请记住，几乎所有这些东西都不适用于任何现代操作系统的上下文，因为运行的不仅是您的代码，因此您必须合作并遵守规则/使用操作系统的 API。

# facebook - 开放图形操作的 ref 属性对应用洞察力没有影响

> ID：10778094
> 
> 赞同：2
> 
> 时间：2012-05-27T23:57:17.253
> 
> 标签：facebook, facebook-opengraph, facebook-insights

[http://developers.facebook.com/docs/opengraph/actions/](http://developers.facebook.com/docs/opengraph/actions/)

在 Opengraph 操作文档中有一个 Optional Parameters: ref 属性，假设通过以下方式帮助进行 A/B 测试：

> 默认情况下，ref 参数将在 7 天内接受 500 个唯一值。这些值将用于显示按应用程序见解中每个唯一值 ref 分组的图形。

我已经开始使用它，我看到为我的操作视图图 API 保存的 ref 属性，并且我在操作链接中有 fb_ref，但是我没有看到任何“按每个唯一值分组的图 ref”理解错了还是可能没有实施？

谢谢，布纳亚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T09:06:25.043

您可以在 Open Graph › Demographics 下的见解中查看 Ref Parameter 值。很遗憾它没有很好地记录下来。

# knockout.js - knockout.js 和表格未添加新行

> ID：10778096
> 
> 赞同：2
> 
> 时间：2012-05-27T23:57:38.377
> 
> 标签：knockout.js, html-table

是否有任何理由为什么以下javascript和html不会出现一行？我在我的网格对象中看到了该对象，但它没有出现在表格中。难道我做错了什么？

查看模型

```
 app.viewModel.members.eventSchedule = {
            gyms: ko.observableArray(null),
            grid: ko.observableArray([]),

    .
    .
    . 
```

从 Ajax 请求填充初始网格

```
function populateGrid(grid) {

        var mapping = {
            'Matchup': {
                create: function (options) {
                    if (options.data) {
                        return ko.mapping.fromJS(options.data);
                    }

                    return null;
                }
            }
        };

        viewModel.grid(ko.mapping.fromJS(grid.Dates, mapping)());
        viewModel.gyms(grid.Gyms);
    } 
```

添加新行

```
 var timeRow = {
                            Time: ko.observable(data.Newtime),
                            Games: ko.observableArray([])
                        };

                        var gymCourts = viewModel.gymCourts();
                        for (var k = 0; k < gymCourts.length; k++) {
                            timeRow.Games.push(new Game(data.Dates, data.NewTime, gymCourts[k].Id, gymCourts[k].Order));
                        }

                        viewModel.grid()[0].Times().push(timeRow); 
```

表格 HTML

```
 <tbody data-bind="foreach: grid">
                                <tr>
                                    <td class="empty"></td>
                                    <td class="date-container" data-bind="attr: { colspan: $parent.gymCourts().length }">
                                        <div class="date" data-bind="html: Date"></div>
                                    </td>
                                </tr>
                                <!-- ko foreach: Times -->
                                <tr class="time-games">
                                    <td class="time-container">
                                        <a href="#" class="time" data-bind="html: Time, click: $root.members.eventSchedule.editTime.edit.bind($data, $parent)"></a>
                                    </td>
                                    <!-- ko foreach: Games() -->
                                    <td class="game-container draggable-item-container clearfix">
                                        <div class="game clearfix draggable-active draggable-item" data-bind="if: $data.Matchup, css: { 'empty' : !$data.Matchup, 'ui-droppable-disabled': $data.Disabled }, dynamicClass: { position: ($data.Matchup ? $data.Matchup.DivisionOrder() : 0) }, draggableGameHandler : { disabled: !$data.Matchup, disabledDrop: $data.Disabled() }">
                                            <span data-bind="html: (Matchup.PoolName() + Matchup.AwayTeam.Number())"></span> vs. <span data-bind="html: (Matchup.PoolName() + Matchup.HomeTeam.Number())"></span>
                                        </div>
                                    </td>
                                    <!-- /ko -->
                                </tr>
                                <!-- /ko -->
                            </tbody> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T23:08:58.777

检查这一行： viewModel.grid()[0].Times().push(timeRow); 您正在将一个新的 timeRow 推入 observableArray 内的数组中。这不会自动通知侦听器。你可以试试 viewModel.grid()[0].Times.push(timeRow); 反而？

# php - Doxygen 没有记录 PHP 类

> ID：10778098
> 
> 赞同：1
> 
> 时间：2012-05-27T23:57:47.880
> 
> 标签：php, class, doxygen

Doxygen 不会为我的课程生成文档。Doxygen 解析包含类的文件，这些文件出现在文件选项卡中，但没有类的文档。所有包含我的类的文件都命名为`XXXX.class.php`.

我的 doxygen 设置：

```
#---------------------------------------------------------------------------
# Project related configuration options
#---------------------------------------------------------------------------
DOXYFILE_ENCODING      = UTF-8
PROJECT_NAME           = "Kalandföld Online"
PROJECT_NUMBER         = 1.0
PROJECT_BRIEF          =
PROJECT_LOGO           =
OUTPUT_DIRECTORY       = "C:/Program Files/EasyPHP-5.3.6.0/www/WoA/dev/docs"
CREATE_SUBDIRS         = NO
OUTPUT_LANGUAGE        = English
BRIEF_MEMBER_DESC      = YES
REPEAT_BRIEF           = YES
ABBREVIATE_BRIEF       = "The $name class" \
                         "The $name widget" \
                         "The $name file" \
                         is \
                         provides \
                         specifies \
                         contains \
                         represents \
                         a \
                         an \
                         the
ALWAYS_DETAILED_SEC    = NO
INLINE_INHERITED_MEMB  = YES
FULL_PATH_NAMES        = YES
STRIP_FROM_PATH        =
STRIP_FROM_INC_PATH    =
SHORT_NAMES            = NO
JAVADOC_AUTOBRIEF      = YES
QT_AUTOBRIEF           = NO
MULTILINE_CPP_IS_BRIEF = NO
INHERIT_DOCS           = NO
SEPARATE_MEMBER_PAGES  = NO
TAB_SIZE               = 8
ALIASES                =
TCL_SUBST              =
OPTIMIZE_OUTPUT_FOR_C  = YES
OPTIMIZE_OUTPUT_JAVA   = NO
OPTIMIZE_FOR_FORTRAN   = NO
OPTIMIZE_OUTPUT_VHDL   = NO
EXTENSION_MAPPING      =
MARKDOWN_SUPPORT       = YES
BUILTIN_STL_SUPPORT    = NO
CPP_CLI_SUPPORT        = NO
SIP_SUPPORT            = NO
IDL_PROPERTY_SUPPORT   = YES
DISTRIBUTE_GROUP_DOC   = NO
SUBGROUPING            = YES
INLINE_GROUPED_CLASSES = NO
INLINE_SIMPLE_STRUCTS  = NO
TYPEDEF_HIDES_STRUCT   = NO
SYMBOL_CACHE_SIZE      = 0
LOOKUP_CACHE_SIZE      = 0

#---------------------------------------------------------------------------
# Build related configuration options
#---------------------------------------------------------------------------
EXTRACT_ALL            = NO
EXTRACT_PRIVATE        = YES
EXTRACT_PACKAGE        = YES
EXTRACT_STATIC         = YES
EXTRACT_LOCAL_CLASSES  = YES
EXTRACT_LOCAL_METHODS  = YES
EXTRACT_ANON_NSPACES   = YES
HIDE_UNDOC_MEMBERS     = NO
HIDE_UNDOC_CLASSES     = NO
HIDE_FRIEND_COMPOUNDS  = NO
HIDE_IN_BODY_DOCS      = NO
INTERNAL_DOCS          = NO
CASE_SENSE_NAMES       = YES
HIDE_SCOPE_NAMES       = YES
SHOW_INCLUDE_FILES     = YES
FORCE_LOCAL_INCLUDES   = NO
INLINE_INFO            = YES
SORT_MEMBER_DOCS       = YES
SORT_BRIEF_DOCS        = NO
SORT_MEMBERS_CTORS_1ST = NO
SORT_GROUP_NAMES       = NO
SORT_BY_SCOPE_NAME     = NO
STRICT_PROTO_MATCHING  = NO
GENERATE_TODOLIST      = YES
GENERATE_TESTLIST      = YES
GENERATE_BUGLIST       = YES
GENERATE_DEPRECATEDLIST= YES
ENABLED_SECTIONS       =
MAX_INITIALIZER_LINES  = 300
SHOW_USED_FILES        = YES
SHOW_FILES             = YES
SHOW_NAMESPACES        = YES
FILE_VERSION_FILTER    =
LAYOUT_FILE            =
CITE_BIB_FILES         =

#---------------------------------------------------------------------------
# configuration options related to warning and progress messages
#---------------------------------------------------------------------------
QUIET                  = NO
WARNINGS               = YES
WARN_IF_UNDOCUMENTED   = YES
WARN_IF_DOC_ERROR      = YES
WARN_NO_PARAMDOC       = NO
WARN_FORMAT            = "$file:$line: $text"
WARN_LOGFILE           =

#---------------------------------------------------------------------------
# configuration options related to the input files
#---------------------------------------------------------------------------
INPUT                  = "C:/Program Files/EasyPHP-5.3.6.0/www/WoA"
INPUT_ENCODING         = UTF-8
FILE_PATTERNS          = *.class.php
RECURSIVE              = YES
EXCLUDE                =
EXCLUDE_SYMLINKS       = NO
EXCLUDE_PATTERNS       =
EXCLUDE_SYMBOLS        =
EXAMPLE_PATH           =
EXAMPLE_PATTERNS       = *
EXAMPLE_RECURSIVE      = NO
IMAGE_PATH             =
INPUT_FILTER           =
FILTER_PATTERNS        =
FILTER_SOURCE_FILES    = NO
FILTER_SOURCE_PATTERNS =

#---------------------------------------------------------------------------
# configuration options related to source browsing
#---------------------------------------------------------------------------
SOURCE_BROWSER         = NO
INLINE_SOURCES         = NO
STRIP_CODE_COMMENTS    = YES
REFERENCED_BY_RELATION = NO
REFERENCES_RELATION    = NO
REFERENCES_LINK_SOURCE = YES
USE_HTAGS              = NO
VERBATIM_HEADERS       = YES

#---------------------------------------------------------------------------
# configuration options related to the alphabetical class index
#---------------------------------------------------------------------------
ALPHABETICAL_INDEX     = YES
COLS_IN_ALPHA_INDEX    = 5
IGNORE_PREFIX          =

#---------------------------------------------------------------------------
# configuration options related to the HTML output
#---------------------------------------------------------------------------
GENERATE_HTML          = YES
HTML_OUTPUT            = html
HTML_FILE_EXTENSION    = .html
HTML_HEADER            =
HTML_FOOTER            =
HTML_STYLESHEET        =
HTML_EXTRA_FILES       =
HTML_COLORSTYLE_HUE    = 220
HTML_COLORSTYLE_SAT    = 100
HTML_COLORSTYLE_GAMMA  = 80
HTML_TIMESTAMP         = YES
HTML_DYNAMIC_SECTIONS  = NO
HTML_INDEX_NUM_ENTRIES = 100
GENERATE_DOCSET        = NO
DOCSET_FEEDNAME        = "Doxygen generated docs"
DOCSET_BUNDLE_ID       = org.doxygen.Project
DOCSET_PUBLISHER_ID    = org.doxygen.Publisher
DOCSET_PUBLISHER_NAME  = Publisher
GENERATE_HTMLHELP      = NO
CHM_FILE               =
HHC_LOCATION           =
GENERATE_CHI           = NO
CHM_INDEX_ENCODING     =
BINARY_TOC             = NO
TOC_EXPAND             = NO
GENERATE_QHP           = NO
QCH_FILE               =
QHP_NAMESPACE          = org.doxygen.Project
QHP_VIRTUAL_FOLDER     = doc
QHP_CUST_FILTER_NAME   =
QHP_CUST_FILTER_ATTRS  =
QHP_SECT_FILTER_ATTRS  =
QHG_LOCATION           =
GENERATE_ECLIPSEHELP   = NO
ECLIPSE_DOC_ID         = org.doxygen.Project
DISABLE_INDEX          = NO
GENERATE_TREEVIEW      = NO
ENUM_VALUES_PER_LINE   = 4
TREEVIEW_WIDTH         = 250
EXT_LINKS_IN_WINDOW    = NO
FORMULA_FONTSIZE       = 10
FORMULA_TRANSPARENT    = YES
USE_MATHJAX            = NO
MATHJAX_RELPATH        = http://cdn.mathjax.org/mathjax/latest
MATHJAX_EXTENSIONS     =
SEARCHENGINE           = YES
SERVER_BASED_SEARCH    = NO

#---------------------------------------------------------------------------
# configuration options related to the LaTeX output
#---------------------------------------------------------------------------
GENERATE_LATEX         = NO
LATEX_OUTPUT           = latex
LATEX_CMD_NAME         = latex
MAKEINDEX_CMD_NAME     = makeindex
COMPACT_LATEX          = NO
PAPER_TYPE             = a4
EXTRA_PACKAGES         =
LATEX_HEADER           =
LATEX_FOOTER           =
PDF_HYPERLINKS         = YES
USE_PDFLATEX           = YES
LATEX_BATCHMODE        = NO
LATEX_HIDE_INDICES     = NO
LATEX_SOURCE_CODE      = NO
LATEX_BIB_STYLE        = plain

#---------------------------------------------------------------------------
# configuration options related to the RTF output
#---------------------------------------------------------------------------
GENERATE_RTF           = NO
RTF_OUTPUT             = rtf
COMPACT_RTF            = NO
RTF_HYPERLINKS         = NO
RTF_STYLESHEET_FILE    =
RTF_EXTENSIONS_FILE    =

#---------------------------------------------------------------------------
# configuration options related to the man page output
#---------------------------------------------------------------------------
GENERATE_MAN           = NO
MAN_OUTPUT             = man
MAN_EXTENSION          = .3
MAN_LINKS              = NO

#---------------------------------------------------------------------------
# configuration options related to the XML output
#---------------------------------------------------------------------------
GENERATE_XML           = NO
XML_OUTPUT             = xml
XML_SCHEMA             =
XML_DTD                =
XML_PROGRAMLISTING     = YES

#---------------------------------------------------------------------------
# configuration options for the AutoGen Definitions output
#---------------------------------------------------------------------------
GENERATE_AUTOGEN_DEF   = NO

#---------------------------------------------------------------------------
# configuration options related to the Perl module output
#---------------------------------------------------------------------------
GENERATE_PERLMOD       = NO
PERLMOD_LATEX          = NO
PERLMOD_PRETTY         = YES
PERLMOD_MAKEVAR_PREFIX =

#---------------------------------------------------------------------------
# Configuration options related to the preprocessor
#---------------------------------------------------------------------------
ENABLE_PREPROCESSING   = YES
MACRO_EXPANSION        = NO
EXPAND_ONLY_PREDEF     = NO
SEARCH_INCLUDES        = YES
INCLUDE_PATH           =
INCLUDE_FILE_PATTERNS  =
PREDEFINED             =
EXPAND_AS_DEFINED      =
SKIP_FUNCTION_MACROS   = YES

#---------------------------------------------------------------------------
# Configuration::additions related to external references
#---------------------------------------------------------------------------
TAGFILES               =
GENERATE_TAGFILE       =
ALLEXTERNALS           = NO
EXTERNAL_GROUPS        = YES
PERL_PATH              = /usr/bin/perl

#---------------------------------------------------------------------------
# Configuration options related to the dot tool
#---------------------------------------------------------------------------
CLASS_DIAGRAMS         = NO
MSCGEN_PATH            =
HIDE_UNDOC_RELATIONS   = NO
HAVE_DOT               = NO
DOT_NUM_THREADS        = 0
DOT_FONTNAME           = Helvetica
DOT_FONTSIZE           = 10
DOT_FONTPATH           =
CLASS_GRAPH            = YES
COLLABORATION_GRAPH    = YES
GROUP_GRAPHS           = YES
UML_LOOK               = NO
UML_LIMIT_NUM_FIELDS   = 10
TEMPLATE_RELATIONS     = NO
INCLUDE_GRAPH          = YES
INCLUDED_BY_GRAPH      = YES
CALL_GRAPH             = NO
CALLER_GRAPH           = NO
GRAPHICAL_HIERARCHY    = YES
DIRECTORY_GRAPH        = YES
DOT_IMAGE_FORMAT       = png
INTERACTIVE_SVG        = NO
DOT_PATH               =
DOTFILE_DIRS           =
MSCFILE_DIRS           =
DOT_GRAPH_MAX_NODES    = 50
MAX_DOT_GRAPH_DEPTH    = 0
DOT_TRANSPARENT        = NO
DOT_MULTI_TARGETS      = NO
GENERATE_LEGEND        = YES
DOT_CLEANUP            = YES 
```

一个示例 PHP 文件：

```
<?php

/**
 * Store all functions related to the smithing skill.
 */
Class Smithing {

    public static $SMITHING_ITEMS = array(
        //Created itemId, needed resources (id, amount, id, amount) in an array form, required level, xp, created amount
        array(18, array(33, 3, 32, 1), 2, 30, 1, 1),
        array(34, array(33, 3, 32, 1), 1, 30, 1, 1),
        array(35, array(33, 7, 32, 3), 5, 70, 1, 3),
        array(36, array(33, 4, 32, 2), 4, 45, 1, 2),
        array(37, array(33, 4, 32, 2), 3, 45, 1, 2)
    );
    public static $SMELTING_ITEMS = array(
        //Created itemId, needed resources (id, amount, id, amount) in an array form, required level, xp, created amount
        array(33, array(31, 1, 32, 1), 1, 5, 1)
    );
    private $user = null;

    public function __construct($user) {
        $this->user = $user;
    }

    /**
     * Create a smithing item from the requirements.
     * Return:
     * 3 - Not enough turne
     * 2 - Missing resources
     * 1 - Smithing sucessfull
     * 0 - Smithing failed
     * -1 - Error!
     * 
     * @param type $smithingId 
     */
    public function createSmithingItem($smithingId) {
        if ($smithingId >= 0 || $smithingId < count(Smithing::$SMITHING_ITEMS)) {
            $requirements = Smithing::$SMITHING_ITEMS[$smithingId][1];

            if ($requirements[4] >= $this->user->getTurns()) {
                //Check that we have all of the resources
                for ($i = 0; $i < count($requirements); $i+=2) {
                    if (!$this->user->getInventory()->hasItemAmount($requirements[$i], $requirements[$i + 1])) {
                        return 2;
                    }
                }

                //Delete all of the resources
                for ($i = 0; $i < count($requirements); $i+=2) {
                    $this->user->getInventory()->deleteItem($requirements[$i], $requirements[$i + 1]);
                }

                //Calculating chance
                $chance = 50 + ($this->user->getSkills()->getLevel(17) - $requirements[2]) * 10;

                //Give the item and the xp if passed the chance or give only half of the xp
                if ($chance == 100 || $chance > rand(1, 100)) {
                    $this->user->getInventory()->addItem(Smithing::$SMITHING_ITEMS[$smithingId][0], Smithing::$SMITHING_ITEMS[$smithingId][4], true);
                    $this->user->getSkills()->addXP(17, Smithing::$SMITHING_ITEMS[$smithingId][3]);
                    return 1;
                } else {
                    $this->user->getSkills()->addXP(17, Smithing::$SMITHING_ITEMS[$smithingId][3] / 2);
                    return 0;
                }
            } else {
                return 3;
            }
        }
        return -1;
    }

    /**
     * Create a smelting item from the requirements.
     * Return:
     * 2 - Missing resources
     * 1 - Smithing sucessfull
     * 0 - Smithing failed
     * -1 - Error!
     * 
     * @param type $smithingId 
     */
    public function createSmeltingItem($smeltingId) {
        if ($smeltingId >= 0 || $smeltingId < count(Smithing::$SMELTING_ITEMS)) {
            $requirements = Smithing::$SMELTING_ITEMS[$smeltingId][1];

            //Check that we have all of the resources
            for ($i = 0; $i < count($requirements); $i+=2) {
                if (!$this->user->getInventory()->hasItemAmount($requirements[$i], $requirements[$i + 1])) {
                    return 2;
                }
            }

            //Delete all of the resources
            for ($i = 0; $i < count($requirements); $i+=2) {
                $this->user->getInventory()->deleteItem($requirements[$i], $requirements[$i + 1]);
            }

            //Calculating chance
            $chance = 50 + ($this->user->getSkills()->getLevel(17) - $requirements[2]) * 10;

            //Give the item and the xp if passed the chance or give only half of the xp
            if ($chance >= 100 || $chance > rand(1, 100)) {
                $this->user->getInventory()->addItem(Smithing::$SMELTING_ITEMS[$smeltingId][0], Smithing::$SMELTING_ITEMS[$smeltingId][4], true);
                $this->user->getSkills()->addXP(17, Smithing::$SMELTING_ITEMS[$smeltingId][3]);
                return 1;
            } else {
                $this->user->getSkills()->addXP(17, Smithing::$SMELTING_ITEMS[$smeltingId][3] / 2);
                return 0;
            }
        }
        return -1;
    }

    /**
     * Repair all  equipment.
     * 
     * @return int how many durability got repaired
     */
    public function repairAllEquipment() {
        $totalPrice = 0;
        $repairedCount = 0;
        for ($i = 0; $i < 10; $i++) {
            if ($this->user->getEquipment()->getEquipment($i) != 0) {
                $item = ItemManager::getInstance()->getItem($this->user->getEquipment()->getEquipment($i));

                $price = ceil((($item->getPrice() / 100 * 40) / $item->getMaxDurability()) * 1.5);
                $repaired = floor(($this->user->getInventory()->getMoney() - $totalPrice) / $price);
                if ($repaired > $item->getMaxDurability() - $this->user->getEquipment()->getEquipmentDur($i)) {
                    $repaired = $item->getMaxDurability() - $this->user->getEquipment()->getEquipmentDur($i);
                }

                $totalPrice += $repaired * $price;
                $repairedCount += $repaired;
                $this->user->getEquipment()->setEquipmentDur($i, $repaired + $this->user->getEquipment()->getEquipmentDur($i));
            }
        }

        $this->user->getInventory()->deleteMoney($totalPrice);
        $this->user->getSkills()->addXP(17, $repairedCount * 5);

        return $repairedCount;
    }

    /**
     * Repair the equipment on a specific spot.
     * 
     * @param int $slot the slot
     * @return int how many durability got repaired 
     */
    public function repairEquipment($slot) {
        if ($this->user->getEquipment()->getEquipment($slot) != 0) {
            $item = ItemManager::getInstance()->getItem($this->user->getEquipment()->getEquipment($slot));

            if ($this->user->getEquipment()->getEquipmentDur($slot) != $item->getMaxDurability()) {
                $pricePerDur = ceil((($item->getPrice() / 100 * 40) / $item->getMaxDurability()) * 1.5);

                $repaired = floor($this->user->getInventory()->getMoney() / $pricePerDur);
                if ($repaired > $item->getMaxDurability() - $this->user->getEquipment()->getEquipmentDur($slot)) {
                    $repaired = $item->getMaxDurability() - $this->user->getEquipment()->getEquipmentDur($slot);
                }
                $repairPrice = $repaired * $pricePerDur;

                $this->user->getInventory()->deleteMoney($repairPrice);
                $this->user->getSkills()->addXP(17, $repaired * 5);
                $this->user->getEquipment()->setEquipmentDur($slot, $repaired + $this->user->getEquipment()->getEquipmentDur($slot));
            }
        }

        return $repaired;
    }

    /**
     * Repair an item in the inventory.
     * 
     * @param type $item the item's id
     * @param type $dur the item's durability
     * @return int the repaired amount
     */
    public function repairInventory($item, $dur) {
        if ($this->user->getInventory()->hasItemAmount($item, 1, $dur)) {
            $item = ItemManager::getInstance()->getItem($item);
            $pricePerDur = ceil((($item->getPrice() / 100 * 40) / $item->getMaxDurability()) * 1.5);

            $repaired = floor($this->user->getInventory()->getMoney() / $pricePerDur);
            if ($repaired > $item->getMaxDurability() - $dur) {
                $repaired = $item->getMaxDurability() - $dur;
            }
            $repairPrice = $repaired * $pricePerDur;

            $this->user->getInventory()->deleteMoney($repairPrice);
            $this->user->getInventory()->setItemDurability($item->getId(), $dur, ($dur + $repaired));

            $this->user->getSkills()->addXP(17, $repaired * 5);

            return $repaired;
        }
        return 0;
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:08:20.437

尝试为您的类定义使用小写字母`c`，即

```
class Smithing {
    // Class methods etc. go here.
} 
```

# php - PHP mp3 上传不起作用。JPEGS 和大多数其他文件类型都可以工作

> ID：10778099
> 
> 赞同：1
> 
> 时间：2012-05-27T23:57:48.173
> 
> 标签：php, forms, upload

我对 PHP 和编码有点陌生。我使用纯 HTML 和 css 创建了网站 www.newbornsounds.co.uk，但现在正在将会员功能与 PHP 集成。我的上传脚本有问题，它不允许上传音频。我检查了 php.ini 是否允许上传足够大的大小，并且已经完成了我能想到的一切。选择音频文件时，仅回显名称而不回显大小或文件类型。顺便说一句，如果这有任何意义，我将使用 wamp 作为开发服务器。

这是 php 文件中带有表单的 PHP 脚本：

```
<?php
// Connects to your Database 
include("phpscripts/database.php");

 //checks cookies to make sure they are logged in 

{ 
$username = $_COOKIE['username']; 

$pass = $_COOKIE['password']; 

    $check = mysql_query("SELECT * FROM members WHERE username = '$username'")or die(mysql_error()); }

while($info = mysql_fetch_array( $check ))  

    { }

    if ($pass != $info['password']) 

        {

                    }

 else 

 {           

 header("Location: login.html"); 

 } 

//**********************************************************************************************

echo "Please wait while we attempt to upload your file...<br><br>";

//**********************************************************************************************

$target_path = "../uploads/";

$flag = 0; // Safety net, if this gets to 1 at any point in the process, we don't     upload.

$filename = $_FILES['file']['name'];
$filesize = $_FILES['file']['size'];
$mimetype = $_FILES['file']['type'];

$filename = htmlentities($filename);
$filesize = htmlentities($filesize);
$mimetype = htmlentities($mimetype);

$target_path = $target_path . basename( $filename ); 

if($filename != ""){

echo "Beginning upload process for file named: ".$filename."<br>";
echo "Filesize: ".$filesize."<br>";
echo "Type: ".$mimetype."<br><br>";

}

   //First generate a MD5 hash of what the new file name will be
   //Force a MP3 extention on the file we are uploading

$hashedfilename = md5($filename);
$hashedfilename = $hashedfilename.".mp3";

//Check for empty file
if($filename == ""){
$error = "No File Exists!";
$flag = $flag + 1;

}

//Now we check that the file doesn't already exist.
$existname = "../uploads/".$hashedfilename;

if(file_exists($existname)){

if($flag == 0){
$error = "Your file already exists on the server!  
Please choose another file to upload or rename the file on your 
computer and try uploading it again!";
}

$flag = $flag + 1;
}

//Whitelisted files - Only allow files with MP3 extention onto server...

$whitelist = array(".mp3");
foreach ($whitelist as $ending) {

if(substr($filename, -(strlen($ending))) != $ending) {
$error = "The file type or extention you are trying to upload is not allowed!  
You can only upload MP3 files to the server!";
$flag++;
}
}

//Now we check the filesize.  If it is too big or too small then we reject it
//MP3 files should be at least 1MB and no more than 6.5 MB

if($filesize > 8920600){
//File is too large

if($flag == 0){
$error = "The file you are trying to upload is too large!  
Your file can be up to 8.5 MB in size only.  
Please upload a smaller MP3 file or encode your file with a lower bitrate.";
}

$flag = $flag + 1;
}

if($filesize < 104860){
//File is too small

if($flag == 0){
$error = "The file you are trying to upload is too small!
Your file has been marked as suspicious because our system has 
determined that it is too small to be a valid MP3 file.
Valid MP3 files must be bigger than 1 MB and smaller than .5 MB.";
}

$flag = $flag + 1;

}

//Check the mimetype of the file
if($mimetype != "audio/mp3" and $mimetype != "audio/mpeg"){

if($flag == 0){
$error = "The file you are trying to upload does not contain expected data.
Are you sure that the file is an MP3?";
}

$flag = $flag + 1;
}

//Check that the file really is an MP3 file by reading the first few characters of the file
$f = @fopen($_FILES['uploadedfile']['tmp_name'],'r');
$s = @fread($f,3);
@fclose($f);
if($s != "ID3"){

if($flag == 0){
$error = "The file you are attempting to upload does not appear to be a valid MP3     file.";
}

$flag++;
}

//All checks are done, actually move the file...

if($flag == 0){

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {

//Change the filename to MD5 hash and FORCE a MP3 extention.

if(@file_exists("uploads/".$filename)){

//Rename the file to an MD5 version
rename("uploads/".$filename, "uploads/".$hashedfilename);

echo "The file ".  basename( $filename ). " 
  has been uploaded.  Your file is <a href='uploads/$hashedfilename'>here</a>.";

}   
else{
  echo "There was an error uploading the file, please try again!";
}

} else{
echo "There was an error uploading the file, please try again!";
}

}
else {
echo "File Upload Failed!<br>";
if($error != ""){
echo $error;
}
}

?>

<div id="uploadcontainer">
 <script type="text/javascript">
   function performClick(node) {
   var evt = document.createEvent("MouseEvents");
   evt.initEvent("click", true, false);
   node.dispatchEvent(evt);
   }
 </script>
  <a href="#" onclick="performClick(document.getElementById('file'));">
   <div id="selectfile">
    <img src="images/upload.gif" width="100" height="96" alt="upload button" border="0">        <br><br>
    <input type="button" id="uploader" value="Select a file and upload it" class="button" >
   </div></a>
      <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" id="form"     method="post" enctype="multipart/form-data">
   <input type="file" id="file"  name="file" class="noshow">
   </form>
    <script type="text/javascript">
        $(function(){
         $("#file").change(function(){
        $("#form").submit();
     });
     });
    </script>
 <br><p2>We support MP3, WAV, FLAC, AIFF and MP2 file formats</p2>
  <br><br>
  <p2><b>Problem uploading?</b> Get in touch via<a     href="mailto:artists@newbornsounds.co.uk"><b> email </b></a>and we'll help sort things out.<br> 
```

**重要提示：**您必须拥有您上传的所有曲目的权利，并且您必须是未签名的艺术家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:33:43.983

现在都整理好了。结果我不得不在 .htaccess 文件中添加一些代码。花了我一段时间，但现在我们可以继续使用 NBS 的新功能了。

# c# - ASP.NET Massive - 如何创建数据库以显示 VIEW

> ID：10778103
> 
> 赞同：3
> 
> 时间：2012-05-27T23:58:27.893
> 
> 标签：c#, asp.net-mvc-3, massive, northwind

大家好，想寻求帮助，因为我不明白如何在 ASP.NET MVC 3 中使用 MASSIVE.CS 创建可以使用的数据库。

我一直在弄清楚如何在我的 MVC 项目中实现这个 MASSIVE 类，以及连接字符串如何在北风数据库中连接。我只有[本教程 https://github.com/robconery/massive](https://github.com/robconery/massive)但我仍然无法理解。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MovieMassive.Models;

namespace MovieMassive.Controllers
{
    public class MoviesController : Controller
    {

        MovieTable dbMovies = new MovieTable();

        public ActionResult Index()
        {
            dbMovies.Query("SELECT * FROM MovieTable");
            return View(dbMovies);
        }

        public ActionResult Add() {
            return View();
        }
    }
} 
```

> 连接字符串：
> 
> ```
> <add name="MyConnectionString" connectionString="data source=|DataDirectory|MyDatabase.sdf"  providerName="System.Data.SqlServerCe.4.0"/> 
> ```

电影表类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Massive;

namespace MovieMassive.Models
{
    public class MovieTable : DynamicModel
    {
        public MovieTable() : base("movieMassive", "MovieTable", "ID") { }
    }
} 
```

好的，这就是我想要的，你能帮我如何正确运行 View 吗`Index.cshtml`？属性还没有。因为不知道用数据库来实现它......任何帮助将不胜感激......

```
@model IEnumerable<MovieMassive.Models.MovieTable>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>

<table>
    <tr>
        <th>Title</th>
        <th>ReleaseDate</th>
        <th>Genre</th>
        <th>Price</th>
        <th>Rating</th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Title)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ReleaseDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Genre)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Price)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.ID }) |
            @Html.ActionLink("Details", "Details", new { id=item.ID }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.ID })
        </td>
    </tr>
}

</table> 
```

我需要这个正确运行以使用大量创建基本 CRUD。提前致谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T00:01:34.433

代码更新成问题后更新到 OP 评论

杰德，把你的 MoviesController 改成这个

```
public class MoviesController : Controller
{
    public ActionResult Index()
    {
        MovieTable dbMovies = new MovieTable();
        dbMovies.All();
        return View(dbMovies);
    }
    ...
} 
```

* * *

访问 TekPub.com，观看 MVC 2 视频（因为它们是免费的），因为 Rob Conery 向您展示如何将 Massive 文件实现到 MVC 应用程序中

这是直接链接

[ASP.NET MVC 概念 - 免费](http://tekpub.com/view/aspmvc/1)

Rob 的 Massive.cs 文件基本上是一个 ORM（对象关系映射）工具，用于查询数据存储中的表并将它们用作应用程序中的对象。

实施它很容易。你需要：

*   您的 web.config 中的 ConnectionString 指向您的数据库。这是一个示例 SQL 连接字符串：

    ```
    <connectionStrings>
        <add name="MyConnectionString" 
             connectionString="Data Source=DNSServerName;Initial Catalog=DatabaseName;user id=Username;password=Password" 
             providerName="System.Data.SqlClient" />
    </connectionStrings> 
    ```

如果您使用的不是 MS SQL，您可以访问 connectionstrings.com 以获取您的特定平台

*   将从 GitHub 下载的 Massive.cs 文件拖放到您的应用程序中。您的解决方案如何划分将影响您添加文件的位置。如果您在 ASP.NET MVC 应用程序中只使用一个项目，那么您可以将其添加到项目根目录中，或为其创建一个文件夹。如果我没记错的话，Rob 使用了一个名为 Infrastructure 的文件夹。

注意 - 大多数现实世界的应用程序都由 UI 项目、业务逻辑层和数据访问层组成。如果您使用的是这样的 N 层解决方案，那么 Massive.cs 文件应该进入您的 DAL。

*   你准备好了，这就是实施 Massive 的全部内容！

## 用法

要在您的应用程序中使用海量，只需执行以下操作：我正在使用单个项目 MVC 应用程序的简单示例，而不是分离层。

```
public ActionResult Index() {
    var table = new Products();
    var products = table.All();
    return View(products);
} 
```

同样，这不是最严格的用法。您应该了解所有有关使用 MVC 模式以及如何将您的解决方案/应用程序构建为正确设计的知识。通常，您将使用具有属性的 ViewModel，`Product`然后`products`将从 Massive 调用返回的映射`table.All();`到您的 ViewModel

这是一个简单的速成课程，希望对某人有所帮助:-)

# php - html2canvas 输出选定的 div PHP

> ID：10778105
> 
> 赞同：2
> 
> 时间：2012-05-27T23:58:55.337
> 
> 标签：php, javascript, jquery, html2canvas

这段代码几乎可以工作
，这会将整个页面输出为 jpg
**问题**：我怎样才能只抓取里面的内容`'#myDiv'`并将其输出为 jpg 文件？

JS：

```
$('.myButton').click(function(){
    $('#myDiv').html2canvas();//<< has no effect
    var queue = html2canvas.Parse();
    var canvas = html2canvas.Renderer(queue,{elements:{length:0}});
    var img = canvas.toDataURL();
    img.replace(/^data:image\/(png|jpg);base64,/, "");
    $.post( "postIO.php", {img:img}, function(data) {
        //$('#recieve').append(data);
    }); 
    return false;
}); 
```

postIO.php：

```
$canvasImg = $_POST['img'];    
//$canvasImg = str_replace('data:image/png;base64,', '', $canvasImg);

$data = base64_decode($canvasImg);
$File = "z.jpg"; 
$Handle = fopen($File, 'w');
fwrite($Handle, $data);  
fclose($Handle); 
```

从[这里参考](https://stackoverflow.com/questions/10457608/create-screenshot-of-webpage-using-html2canvas-unable-to-initialize-properly)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T02:20:56.080

我已经下载并尝试了 html2canvas，然后我发现 jquery 插件没有完成（它只是捕获图像并创建画布，没有用）所以我自己编写捕获代码。

```
var el = $('div').get(0);

function saveData(dturl){
    //Upload here
    console.debug(dturl);
}

html2canvas.Preload(el, {
    complete: function(image){
        var queue = html2canvas.Parse(el, image, {elements: el}),
            $canvas = $(html2canvas.Renderer(queue, {elements: el}));
        saveData($canvas[0].toDataURL());
    }
}); 
```

希望对你有帮助

所以要与您的程序一起使用，您必须编写

```
function saveData(dturl){
    dturl.replace(/^data:image\/(png|jpg);base64,/, "");
    $.post( "postIO.php", {img:dturl}, function(data) {
        //$('#recieve').append(data);
    }); 
}

$('.myButton').click(function(){
    var el = $('#myDiv').get(0); 
    html2canvas.Preload(el, {
        complete: function(image){
            var queue = html2canvas.Parse(el, image, {elements: el}),
                $canvas = $(html2canvas.Renderer(queue, {elements: el}));
            saveData($canvas[0].toDataURL());
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T02:19:09.293

之后`var canvasImg = canvasRecord.toDataURL("image/jpg");`，您可能需要使用`var data = canvasImg.replace(/^data:image\/(png|jpg);base64,/, "");`

那是`$canvasImg = $_POST['canvasImg'];`不是 $_POST['img']？

# regex - 反向应用的正则表达式会产生相同的匹配吗？

> ID：10778109
> 
> 赞同：0
> 
> 时间：2012-05-27T23:59:59.407
> 
> 标签：regex, algorithm

假设我们有一些文本和一个与之匹配的正则表达式。问题：如果我将相同的表达式向后应用（从最后一个字母到第一个字母），它仍然匹配吗？

正则表达式 -----> 文本

xereg --?--> txt

在似乎可行的实践中，问题在于理论对一般情况的看法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T00:06:30.813

如果您使用 Kleene 星号，则不会 - 如果您反转正则表达式，您最终会得到一个无效的正则表达式或匹配不同模式的正则表达式：

*   `ab*`-> `*ba`（无效语法）
*   `a*b`-> `b*a`（第一个匹配`aaab`但不匹配`abbb`，第二个匹配`bbba`但不匹配`baaa`）

另一方面，我很确定有可能设计一个算法，给定一个正则表达式，生成一个匹配反向字符串的正则表达式。以下递归算法应该可以工作（如果*r*是正则表达式，则*rev(r)*表示匹配反转字符串的正则表达式）：

*   如果*r*是单个符号*x*，则*rev(r) = x*。
*   如果*r*是联合*A|B*，则*rev(r) = rev(A)|rev(B)*。
*   如果*r*是串联*AB*，则*rev(r) = rev(B)rev(A)*。
*   如果*r*是 Kleene 星*A**，则*rev(r) = rev(A)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T00:32:36.753

一般来说，我肯定会说“不”，但这实际上取决于表达式的复杂性。

因为不仅需要反转任何简单的（子）表达式，而且如果适用，还需要考虑更复杂的东西，这些东西在任何正则表达式中都不容易“反转”：重复运算符怎么样，懒惰与. 贪婪，或反向引用和环顾，量词和修饰符...... - 例如[本教程](http://www.regular-expressions.info/tutorial.html)中解释的项目？

或许如果你有关于这种“逆转”的更具体的例子或问题，可以考虑一个更合适的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T00:02:59.307

一般原因是不会

例如，正则表达式

```
ab 
```

将匹配

```
ab 
```

但不是

```
ba 
```

您为什么认为一般情况下应该这样做？

有匹配反向字符串的正则表达式以及

```
[a|b]* 
```

将匹配

```
ab 
```

和

```
ba 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T00:13:07.220

`regex`和`xeger`都会在文本上产生相同匹配的情况是：

1.  `regex`是一个简单的（原子）模式，它是[回文](http://en.wikipedia.org/wiki/Palindrome)。例如，`abcba`
2.  `regex`由使用[交换](http://en.wikipedia.org/wiki/Commutative_property)函数（例如`or`）的几个原子模式组成，并且您不会反转这些单独的原子模式。如果你这样做了，那么它们也应该是回文。例如，`adef|bd881|cdavr`如果您不反转原子组件，或者`[aba|defed]`如果您确实反转了原子组件。

# java - 如何从 JAVA httpSession 获取参数并在 dao 类上使用/设置它？

> ID：10778112
> 
> 赞同：2
> 
> 时间：2012-05-28T00:00:07.710
> 
> 标签：java, jakarta-ee

我需要使用 servlet 来验证登录名/密码。那已经很好了。

我在 DAO 类中有一个方法，它通过 prepareStatement 返回值的结果集列表。

我正在使用一个带有 where 子句（按用户名）的过滤结果的查询。

问题是：如何获取 servlet 参数（登录用户的名称）并将其设置在 prepareStatement 上？

代码如下：

```
public class DaoPojoJoin extends Dao {

public List<PojoJoin> listUserDegrees() {
    List<PojoJoin> dg = new ArrayList<PojoJoin>();
    if (openConnection()) {
        try {
            st = cn.prepareStatement("SELECT USER, MATTER, DEGREE FROM DEGREES x "
                    + "right outer join USERS y on x.idUser=y.idUser "
                    + "right outer join MATTER z on idMatter=z.idMatter "
                    + "where x.iduser=?"); // filter result by user's name

            // How can I have something like this:
            // st.setString(1,usr.request.getParameter("user"));

            // or this:
            // st.setString(1,.getAttribute(user));

            rs = st.executeQuery();
            while (rs.next()) {
                PojoJoin pj = new PojoJoin();
                rs.getString("USER"); 
                rs.getString("MATTER");
                rs.getDouble("DEGREE");
                pj.setUsuario(rs.getString("USER"));
                pj.setDisciplina(rs.getString("MATTER"));
                pj.setNota(rs.getDouble("DEGREE"));
                nota.add(pj);
            }
        } catch (Exception ex) {
            err = ex.getMessage();
        } finally {
            closeConnection();
        }
    }
    return dg;
} 
```

}

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T00:05:59.017

要求它作为方法参数。DAO 不应该关心它所在的上下文，并且应该可以在其他任何地方重用（例如，不使用 servlet 的普通 Java 应用程序）。

就这样

```
public List<PojoJoin> listUserDegrees(String username) {
    // ...
} 
```

或者

```
public List<PojoJoin> listUserDegrees(Long userId) {
    // ...
} 
```

或者

```
public List<PojoJoin> listUserDegrees(User user) {
    // ...
} 
```

最后让调用者（servlet）把它传入。

* * *

**与具体问题无关**，您的数据库资源处理似乎不是线程安全的。每当您的 webapp 开始被多个用户使用时，我都会努力避免出现严重问题。

# gnu-screen - 在 GNU 屏幕中，是否可以以编程方式读取状态消息？

> ID：10778114
> 
> 赞同：4
> 
> 时间：2012-05-28T00:00:31.840
> 
> 标签：gnu-screen

我正在考虑编写一个图形工具，它将向您展示您拥有哪些 gnu-screen 会话以及其中可用的窗口。然后，您将能够，例如，单击窗口标题，它会将您带到那里。我不想以任何方式修改 gnu-screen，以便我的工具可以与其他机器上的现有安装等一起使用。

通过使用日志文件或将最后几行复制到交换缓冲区中，我可以从屏幕会话之外的屏幕会话中获得普通输出。为了制作一个漂亮的用户界面，我真正需要的是状态行的内容（临时出现在窗口底部的行）。例如，要获取会话中的窗口列表，我可以发送`windowlist`命令，但结果绝不是输出的一部分。有谁知道是否有办法让屏幕将其消息放入日志、粘贴缓冲区、当前窗口或任何类似的东西，我可以从另一个程序中获取它？

# javascript - Nodejs bcrypt 库

> ID：10778117
> 
> 赞同：8
> 
> 时间：2012-05-28T00:00:57.457
> 
> 标签：javascript, mysql, node.js, password-protection, bcrypt

我使用 nodejs [bcrypt](https://github.com/ncb000gt/node.bcrypt.js)库来更好地保护密码。

我不确定我是否完全了解如何使用它，但到目前为止我得到了这个：

```
//A module containing this login function:

login: function(credentials,req,res) {

    //"credentials" is containing email and password from login form

    var query = 'SELECT password, email FROM users WHERE email = ? LIMIT 1';

    client.query(query,[credentials.email], function(err, results) {

        if (results[0]) {

            //Compare passwords
        if (bcrypt.compareSync(credentials.password, results[0].password)) {

                //Set session data and redirect to restricted area

            }
        }
    });
} 
```

我在示例中删除了此处的所有错误处理，以便更容易阅读代码。

1.这可行，我可以登录并设置会话。但这就是它的全部吗？我错过了什么吗？

2.生成哈希时，看起来盐是在密码前添加的。我不必将盐保存在数据库中吗？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T00:08:24.440

是的，这就是它的全部！你原来加密密码时生成的盐是用来防止彩虹表攻击的；你不需要坚持它。

# php - 从 php webform 发送电子邮件到网站主机以外的地址

> ID：10778118
> 
> 赞同：1
> 
> 时间：2012-05-28T00:01:09.440
> 
> 标签：php, mailing

我开发了一个托管在 1and1 上的网站，该网站有一个用于提交联系信息的网络表单。

客户希望保留他当前的 GMAIL 地址以接收电子邮件。

我可以在 php 邮件设置中使用他的电子邮件地址吗？我的理解是，除非发件人地址与他的域名相同，否则 1and1 将拒绝网站生成的电子邮件。我是新来的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T00:04:58.200

我不明白为什么它不起作用。尝试向测试 gmail 帐户发送电子邮件，看看它是否有效。我感觉它最终会出现在垃圾邮件文件夹中。

```
mail('YourTestEmail@gmail.com', 'Test Subject', 'Test message'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T00:12:12.993

`FROM: someone@example.com`您可以在 PHP函数中添加一个标头，该标头`mail()`将在收件人邮件客户端上显示为来自`someone@example.com`. 如果某些邮件服务器将电子邮件识别为不是来自有权为该域发送电子邮件的邮件服务器，则它们可能会将其标记为垃圾邮件。

此外，1and1 可能会拒绝从其托管/授权以外的域发送的电子邮件。可能值得与他们联系以澄清这一点。

像下面这样的东西应该做你想要的，只要没有块等。但正如康斯坦丁上面所说，它可能会进入垃圾邮件文件夹等。

```
mail("recipient@domain.com", "Subject here...", "Message Here", "From: someone@example.com"); 
```

您总是可以考虑设置一个`Reply-To:`标头（`From:`如果您需要从 1and1.

# wordpress - 在 Wordpress 中查询某个日期之后发布的帖子

> ID：10778122
> 
> 赞同：5
> 
> 时间：2012-05-28T00:01:35.423
> 
> 标签：wordpress

我正在尝试写一个`WP_Query`我只调用 2012 年 3 月之后发布的帖子的地方。我可以成功地调用 2012 年 3 月发布的帖子，但“从 2012 年 3 月起”很难做到。

```
 $current_year = date('2012');
    $current_month = date('>3'); // This doesn't work
    $current_month = date('3'); // This DOES work

    $custom_query = new WP_Query("year=$current_year&monthnum=$current_month&order=ASC&posts_per_page=-1"); 
```

我错过了一些简单的东西，还是必须变得更复杂？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-07-06T13:50:16.830

从 WordPress 3.7 版开始，WP_Query 参数[`date_query`](http://codex.wordpress.org/Class_Reference/WP_Query#Date_Parameters)非常适合这种类型的查询。

[正如您在 Codex 中看到的](http://codex.wordpress.org/Class_Reference/WP_Query#Date_Parameters)，您可以使用参数指定日期查询`after`。`after`可以是与 strtotime() 兼容的字符串，也可以是“年”、“月”、“日”值的数组。

对于您的示例，类似以下内容应该有效：

```
$args = array(
    'posts_per_page' => -1,
    'date_query'     => array(
        'after' => array(
            'year'  => 2012,
            'month' => 3,
            'day'   => 1,
        ),
    ),
);
$custom_query = new WP_Query( $args ); 
```

或者使用 strtotime()-string：

```
$args = array(
    'posts_per_page' => -1,
    'date_query'     => array( 'after' => '2012-03-01' ),
);
$custom_query = new WP_Query( $args ); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T00:25:18.957

[http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)中的“时间参数”部分有关于日期范围的注释。使用相同的技术：

```
$query_string = "order=ASC&posts_per_page=-1";

// Create a new filtering function that will add our where clause to the query
function filter_where( $where = '' ) {
    $where .= " AND post_date >= '2012-03-01'";
    return $where;
}

add_filter( 'posts_where', 'filter_where' );
$custom_query = new WP_Query( $query_string );
remove_filter( 'posts_where', 'filter_where' ); 
```

# vim - VIM：在窗口左侧显示 3 个字符的边框

> ID：10778123
> 
> 赞同：5
> 
> 时间：2012-05-28T00:01:39.643
> 
> 标签：vim

## 语境

我正在使用 NERDTree 插件。

让我恼火的一件事是 NERDTree 本身和我的代码之间的视觉垂直边界。我觉得阅读我的代码有点烦人。我当前的设置如下所示：

```
........................#________________________________________________
........................#________________________________________________
........................#________________________________________________
........................#________________________________________________
........................#________________________________________________
........................#________________________________________________
........................#________________________________________________
........................#________________________________________________
........................#________________________________________________
........................#________________________________________________
........................#________________________________________________
........................#________________________________________________ 
```

其中... = NERDTree，*_* = 我的实际代码，### = 一些垂直的灰色边框。

现在，我想要的是这样的：

```
........................#   ________________________________________________
........................#   ________________________________________________
........................#   ________________________________________________
........................#   ________________________________________________
........................#   ________________________________________________
........................#   ________________________________________________
........................#   ________________________________________________
........................#   ________________________________________________
........................#   ________________________________________________
........................#   ________________________________________________ 
```

这个想法是我以某种方式在 NERDTre 的垂直分隔线和我的实际代码的左侧之间注入了一个 3 个字符的边框。

现在，我几乎可以通过“set nu”来实现这一点——除了不是得到空格，而是得到一堆数字。我想要像“set nub”这样的东西，除了行号，我只得到空格。

## 问题：

我如何实现上述目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T00:05:47.910

你可以[`foldcolumn`](http://vimdoc.sourceforge.net/htmldoc/options.html#%27foldcolumn%27)用来创建一个排水沟：

```
:set foldcolumn=3 
```

如果这会将折叠标记添加到装订线并且您根本不使用折叠，那么您可以设置[`foldmethod`](http://vimdoc.sourceforge.net/htmldoc/options.html#%27foldmethod%27)为`manual`这样就不会自动创建折叠：

```
:set foldmethod=manual 
```

# heroku - 如何在 Heroku Cedar 上的 Play Framework 1 应用上启用 GZIP 压缩？

> ID：10778127
> 
> 赞同：11
> 
> 时间：2012-05-28T00:03:48.193
> 
> 标签：heroku, playframework, compression, gzip, cedar

我想为公共资产启用 GZIP 压缩并为性能启用 HTTP 响应。我的网站有很多移动访问。

据我所知，Play Framework 中没有内置任何东西来支持这一点，而且 Heroku 似乎也没有解决方案。

开始对我的应用进行一些压缩的最佳方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T15:02:13.490

好的，我已经尝试过缩小和压缩所有 STATIC 资源 - 似乎还没有人尝试过。

Play 通过插件提供了一个钩子，但它看起来有点笨拙，因为你必须设置所有的缓存头和东西。

到目前为止似乎有效：

[https://gist.github.com/2882360](https://gist.github.com/2882360)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-28T17:20:03.387

查看：[https ://gist.github.com/1317626](https://gist.github.com/1317626)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-28T00:18:28.213

检查 Minifymod 模块： [http ://www.playmodules.net/module/7](http://www.playmodules.net/module/7)

# html - Textmate Wrap with Abbreviation 抛出错误

> ID：10778128
> 
> 赞同：1
> 
> 时间：2012-05-28T00:04:41.900
> 
> 标签：html, macos, keyboard-shortcuts, textmate, emmet

在 Textmate 中使用 Zen Coding Bundle 的 Wrap with Abbreviation 功能时，它会引发 Index Out of Range Error 并且什么也不做。

![使用带有缩写的 Wrap](../Images/09b4edd6fdd044d180004f11819731d4.png)

![错误信息](../Images/0267b6a9ef3feda150a695bd52033bf1.png)

# parallel-processing - 运行时出现UPC错误（原因：无法打开任何HCA端口）

> ID：10778130
> 
> 赞同：3
> 
> 时间：2012-05-28T00:05:08.187
> 
> 标签：parallel-processing, upc

我刚开始学习 UPC，运行 hello world 示例时出现以下错误：

```
GASNet gasnetc_init returning an error code: GASNET_ERR_RESOURCE (Problem with requested resource)
at /home/dx/Downloads/berkeley_upc-2.14.2/gasnet/vapi-conduit/gasnet_core.c:1422
reason: unable to open any HCA ports 
```

这是代码：

```
#include <upc_relaxed.h>
#include <stdio.h>

int main() {
   printf("Hello from thread %i/%i\n", MYTHREAD, THREADS);
   upc_barrier;
   return 0;
} 
```

它是用以下方式编译的：

```
/usr/local/upc/opt/bin/upcc upcTest.upc -o up 
```

并执行：

```
/usr/local/upc/opt/bin/upcrun -n 1 up 
```

编译时我也遇到了这个错误：

```
<command-line>:0:0: warning: "_FORTIFY_SOURCE" redefined [enabled by default]
<built-in>:0:0: note: this is the location of the previous definition
<command-line>:0:0: warning: "_FORTIFY_SOURCE" redefined [enabled by default]
<built-in>:0:0: note: this is the location of the previous definition 
```

关于如何解决问题的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T11:11:32.100

HCA 代表*主机通道适配器*，它只是各种网络类型适配器的技术术语，尤其是 InfiniBand。如果您的系统未启用 InifiniBand，则不存在 HCA。如果是这种情况，您应该使用另一种网络类型，例如，`udp`如果在仅具有以太网连接的集群上`smp`运行，或者如果在单个多核/多套接字节点上运行。

网络类型由`-network=<type>`选项指定`upcc`。运行`upcc -version`以获取可用网络类型的列表并阅读文档以查看可以在您拥有的硬件上使用哪一种。

# c# - c# - 具有SqlServerCe.3.5 的实体框架 - 连接异常

> ID：10778134
> 
> 赞同：2
> 
> 时间：2012-05-28T00:06:25.977
> 
> 标签：c#, wpf, entity-framework

我对带有 SqlServerCe.3.5 连接的实体框架有疑问。我有一个名为 Assets 的小项目，带有 .SDF 数据库和实体（模型名称为 Main）。现在，当我试图连接到实体时发生了一些奇怪的事情。第一次一切正常，但现在我必须添加这个：

```
 if (edmConnection.State != ConnectionState.Open)
  {
    edmConnection.Open();
  } 
```

因为与实体的连接一直都已关闭。添加此行后，我可以访问数据库和实体，但我收到此消息：

> 指定的命名连接在配置中未找到，不打算与 EntityClient 提供程序一起使用，或者无效。

这是堆栈跟踪：

> 在 System.Data.EntityClient.EntityConnection.ChangeConnectionString(String newConnectionString) 在 System.Data.Objects.ObjectContext.CreateEntityConnection(String connectionString) 在 System.Data.Objects 在 System.Data.EntityClient.EntityConnection..ctor(String connectionString)。 ObjectContext..ctor(String connectionString, String defaultContainerName) at BL.Model.DBEntities..ctor() in C:\Users\Orel\Documents\Visual Studio 2010\Projects\Assets\BL\Model\Main.Designer.cs： C:\Users\Orel\Documents\Visual Studio 2010\Projects\Assets\BL\Handlers\mModelHandler.cs:line 中 BL.Handlers.mModelHandler.GetOnlyInstance() 处 BL.Handlers.mModelHandler..ctor() 的第 34 行30

这是我的代码和 app.config：

```
 private static mModelHandler _mInstance = null;
public static DBEntities m_context = null;

public static mModelHandler GetOnlyInstance()
{
    if (_mInstance == null)
    {
        try
        {
            m_context = new DBEntities(GetConnectionString());
            _mInstance = new mModelHandler();
        }
        catch (Exception)
        {

            throw;
        }

    }
    return _mInstance;
}

public static EntityConnection GetConnectionString()
{
    try
    {
        var filePath = Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location);
        if (filePath == null) throw new ArgumentNullException("filePath");

        if (filePath.EndsWith("\\Assets\\bin\\Debug"))
        {
            filePath = filePath.Replace("\\Assets\\bin\\Debug", "\\BL\\DB.sdf");
        }
        var sqlCeConnectionString = string.Format("Data Source={0}", filePath);

        // Create an EDM connection
        EntityConnectionStringBuilder entity = new EntityConnectionStringBuilder();

        entity.Metadata = "res://*/Model.Main.csdl|res://*/Model.Main.ssdl|res://*/Model.Main.msl";
        entity.Provider = "System.Data.SqlServerCe.3.5";
        entity.ProviderConnectionString = sqlCeConnectionString;

        var edmConnectionString = entity.ToString();
        var edmConnection = new EntityConnection(edmConnectionString);
        if (edmConnection.State != ConnectionState.Open)
        {
            edmConnection.Open();
        }
        return edmConnection;
    }
    catch (Exception e)
    {

        throw;
    }
} 
```

app.config：

```
<add name="DBEntities" connectionString="metadata=res://*/Model.Main.csdl|res://*/Model.Main.ssdl|res://*/Model.Main.msl;provider=System.Data.SqlServerCe.3.5;provider connection string='Data Source=|DataDirectory|\DB.sdf'" providerName="System.Data.EntityClient" /> 
```

我在fourm中读到问题可能是app.config和连接字符串不匹配，我也试过了，但它不起作用..

我刚刚添加了一张图片： [链接](http://imageshack.us/photo/my-images/99/69123223.png/)

帮助！

奥廖尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T01:11:15.837

我认为您的连接字符串没有被正确解析。尝试使用`&quot;`代替`'`.

我也相信，对于 SqlCE，`provider`引号内的应该是`provider=System.Data.SqlServerCe,3.5;`而不是`provider=System.Data.SqlServerCe.3.5;`.

注意`,`版本之前的`3.5`。

综上所述，我们有：

```
<add name="DBEntities"
     connectionString="metadata=res://*/Model.Main.csdl|res://*/Model.Main.ssdl|res://*/Model.Main.msl;provider=System.Data.SqlServerCe,3.5;provider connection string= &quot;Data Source=|DataDirectory|\DB.sdf&quot;"
     providerName="System.Data.EntityClient" /> 
```

希望这可以帮助。

# java - 使用 Maven 的简单 Spring MVC Hibernate 项目

> ID：10778137
> 
> 赞同：5
> 
> 时间：2012-05-28T00:06:53.897
> 
> 标签：java, spring, model-view-controller, tomcat, maven

我一直在尝试遵循本教程：http: [//viralpatel.net/blogs/2010/11/spring3-mvc-hibernate-maven-tutorial-eclipse-example.html](http://viralpatel.net/blogs/2010/11/spring3-mvc-hibernate-maven-tutorial-eclipse-example.html)

我使用本教程没有遇到任何问题，但我的问题是：如何创建战争以便可以在 tomcat 中部署应用程序？

**编辑：我已经能够创建战争并部署它，但现在尝试访问 localhost:8080/MavenWeb 时，我有一个 404 页面。**

战争已正确构建，它的名称是 MavenWeb.war，在 pom.xml 文件中的 finalName 标记中指定。

下面是tomcat部署时的日志：

```
May 27, 2012 9:32:14 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jdk1.7.0_04\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Java\jdk1.7.0_04\;C:\apache-tomcat-7.0.27\lib;C:\apache-maven-3.0.4\bin;C:\Program Files\Java\jdk1.7.0_04\\bin;C:\apache-tomcat-7.0.27\lib;.
May 27, 2012 9:32:14 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
May 27, 2012 9:32:14 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
May 27, 2012 9:32:14 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 523 ms
May 27, 2012 9:32:14 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
May 27, 2012 9:32:14 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
May 27, 2012 9:32:14 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive C:\apache-tomcat-7.0.27\webapps\MavenWeb.war
May 27, 2012 9:32:15 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(C:\apache-tomcat-7.0.27\webapps\MavenWeb\WEB-INF\lib\servlet-api-2.5.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
May 27, 2012 9:32:17 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\apache-tomcat-7.0.27\webapps\docs
May 27, 2012 9:32:17 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\apache-tomcat-7.0.27\webapps\examples
May 27, 2012 9:32:17 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\apache-tomcat-7.0.27\webapps\host-manager
May 27, 2012 9:32:17 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\apache-tomcat-7.0.27\webapps\manager
May 27, 2012 9:32:17 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\apache-tomcat-7.0.27\webapps\ROOT
May 27, 2012 9:32:17 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
May 27, 2012 9:32:17 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
May 27, 2012 9:32:17 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 2483 ms 
```

欢迎文件在web.xml中正确设置，我创建了对应的list.jsp并放在WEB-INF/jsp文件夹中。

这是 POM.xml

```
 <?xml version="1.0" encoding="UTF-8"?><project>
  <modelVersion>4.0.0</modelVersion>
  <groupId>Spring3HibernateMaven</groupId>
  <artifactId>Spring3HibernateMaven</artifactId>
  <packaging>war</packaging>
  <version>0.0.1-SNAPSHOT</version>
  <description></description>

  <build>
    <plugins>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <source>1.5</source>
          <target>1.5</target>
        </configuration>
      </plugin>
      <plugin>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.0</version>
      </plugin>
    </plugins>

    <directory>target</directory>
    <outputDirectory>target/classes</outputDirectory>
    <!-- <finalName>${artifactId}-${version}</finalName> -->
    <finalName>MavenWeb</finalName>
    <testOutputDirectory>target/test-classes</testOutputDirectory>
    <sourceDirectory>src/main/java</sourceDirectory>
    <scriptSourceDirectory>src/main/scripts</scriptSourceDirectory>
    <testSourceDirectory>src/test/java</testSourceDirectory>
    <resources>
      <resource>
        <directory>src/main/resources</directory>
      </resource>
    </resources>
    <testResources>
      <testResource>
        <directory>src/test/resources</directory>
      </testResource>
    </testResources>
  </build>

  <dependencies>
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>servlet-api</artifactId>
      <version>2.5</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-beans</artifactId>
      <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-jdbc</artifactId>
      <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-web</artifactId>
      <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-webmvc</artifactId>
      <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-orm</artifactId>
      <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-entitymanager</artifactId>
      <version>3.5.1-Final</version>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-log4j12</artifactId>
      <version>1.4.2</version>
    </dependency>
    <dependency>
      <groupId>taglibs</groupId>
      <artifactId>standard</artifactId>
      <version>1.1.2</version>
    </dependency>
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>jstl</artifactId>
      <version>1.1.2</version>
    </dependency>
    <dependency>
      <groupId>mysql</groupId>
      <artifactId>mysql-connector-java</artifactId>
      <version>5.1.10</version>
    </dependency>
    <dependency>
      <groupId>commons-dbcp</groupId>
      <artifactId>commons-dbcp</artifactId>
      <version>20030825.184428</version>
    </dependency>
    <dependency>
      <groupId>commons-pool</groupId>
      <artifactId>commons-pool</artifactId>
      <version>20030825.183949</version>
    </dependency>
  </dependencies>
  <properties>
    <org.springframework.version>3.0.2.RELEASE</org.springframework.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
</project> 
```

战争已经建立，我可以将它部署到 Tomcat 中而不会出现任何错误，但是当尝试使用 localhost:8080/MavenWeb/ 访问它时，我只有一个白页。

第一个页面在web.xml下是这样配置的：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>Spring3-Hibernate</display-name>
    <welcome-file-list>
        <welcome-file>list.jsp</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
</web-app> 
```

因此，如果我正确理解，在访问 localhost:8080/MavenWeb/ 时，我应该直接重定向到 list.html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T00:18:53.923

对此做了以下操作

安装 Tomcat 6，因为源和目标是 1.5 [http://tomcat.apache.org/whichversion.html](http://tomcat.apache.org/whichversion.html)

将角色 manager-gui 添加到 tomcat-users.xml

```
 <role rolename="manager-gui"/>
  <user username="tomcat" password="tomcat" roles="manager-gui"/> 
```

然后登录`http://localhost:8080/manager/`成功部署 Hello World Servlet，遗憾的是，这对 OP 几乎没有用，因为与教程相关的这段代码不是完成的代码。嗯。

我建议[从 sonatype 阅读这个 mvn 教程，](http://www.sonatype.com/books/mvnref-book/reference/)因为这将建立 Maven 技能和知识，从而可以有效地解决第一个教程的问题。

还建议在 pom.xml 中包含对 pom XSD 的引用，以便工具可以验证与开发内容相同的内容。

从我们有的 sonatype 教程 pom 文件中

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion> 
```

然后在 IntelliJ 中，例如，我可以输入`< CTRL+SPACE`并获取文件中有效元素的下拉列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T05:53:43.397

你的战争没有得到正确部署。启动日志说 servlet-api.jar 没有正确加载。首先修复它，然后我们可以进一步诊断它。

这就是日志所说的

```
org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(C:\apache-tomcat-7.0.27\webapps\MavenWeb\WEB-INF\lib\servlet-api-2.5.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class 
```

您的 servlet-api jar 中似乎有 2 个版本，`classpath`其中一个导致问题。你也在使用`JDK 7`. 请检查您使用的 jar 与 JDK 7 的兼容性

我认为你有`servlet.jar`并且`servlet-api-2.5.jar`在你的类路径中。删除`servlet.jar`，你应该滚动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T00:53:55.020

1.  验证在 tomcat 上创建和部署的战争的名称。很多时候，maven 会创建带有版本号的战争文件。这会影响要使用的 URL。

2.  另外，我可能对此有误，但在 web.xml 中，URL 模式不应该是：“/*”而不是“/”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T05:30:58.580

你这里有错别字吗？？

在您的 web.xml 中，您已将**list.jsp**指定为欢迎文件列表。

但是在显示 web.xml 之后，您已经写到**list.html**没有被重定向。

希望这对您有所帮助。

干杯。

# php - PDOStatement::fetchObject 在类构建之前如何设置属性？

> ID：10778138
> 
> 赞同：3
> 
> 时间：2012-05-28T00:06:59.983
> 
> 标签：php

当我调用[此函数](http://ca3.php.net/manual/en/pdostatement.fetchobject.php)并向我的类添加构造函数时，我的所有类属性都已设置。这怎么可能——我认为你必须先构造一个类，然后才能设置它的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T00:20:31.973

我猜 PDO 使用一些内部代码来创建对象而不调用构造函数。然而，即使在纯 PHP 中也可以在不调用构造函数的情况下实例化一个新对象，您所要做的就是反序列化一个空对象：

```
class SampleClass {
    private $fld = 'fldValue';

    public function __construct() {
        var_dump(__METHOD__);
    }

    // getters & setters
}

$sc = unserialize(sprintf('O:%d:"%s":0:{}', strlen('SampleClass'), 'SampleClass'));
echo $sc->getFld(); // outputs: fldValue, without calling the construcotr 
```

自 PHP 5.4.0+ 起[`ReflectionClass::newInstanceWithoutConstructor()`](http://www.php.net/manual/en/reflectionclass.newinstancewithoutconstructor.php)，反射 API 中提供了方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T00:31:44.587

在 php 中，任何数组都可以转换为对象。我的假设是 pdo 创建一个关联数组，然后将其强制转换。我不知道他的构造函数是否被调用...

实际上，演员表不是正确的词，转换发生在幕后。读这个。模糊发生的事情： http: [//php.net/manual/en/language.types.object.php](http://php.net/manual/en/language.types.object.php)

# perl - 使对象实例不可变

> ID：10778148
> 
> 赞同：3
> 
> 时间：2012-05-28T00:09:42.240
> 
> 标签：perl, immutability, moose

我希望能够实例化一个添加到它的基于 Moose 的对象，直到我对其进行序列化，然后我想让它变得不可更改。我怎么能/应该这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:16:34.950

我会做两个班级和一个共同的角色：

```
package Thing
use Moose::Role;

has some_attrib => (isa => 'AnotherThing');

### Behaviour (the important stuff) goes here

package ImmutableThing;
use Moose;

with 'Thing';

has +some_attrib => (is => 'ro');

sub finalize { shift }

package MutableThing
use Moose;

with 'Thing';

has +some_attrib => (is => 'rw');

sub finalize {
    my $self = shift;
    Thing->new({some_attrib => $self->some_attrib});
} 
```

我不确定拥有同一类的可变和不可变形式是否一定是一个好主意。我倾向于尝试将构建时间和操作时间视为具有不同接口的两个不同阶段。

我更倾向于编写一个参数收集器（我把它大写，就像它是一种模式，但我在文献中没有看到它），它有一个优化的界面来收集创建事物所需的信息，以及事物它本身，它是程序其余部分*使用的对象。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:20:08.210

我不知道（也不容易找到）在 CPAN 上执行此操作的任何模块，这令人惊讶，但解释了您为什么要问:-)

对所有属性使用“之前”修饰符是显而易见的方法。我确信有一种合适的元编程方式来获取所有属性访问器的列表并应用修饰符，但我很想用一个大注释明确列出它们。

你有没有考虑过你这里是一门课还是两门课（Thingy，LockedThingy）？如果您愿意，两个类可以让您封装元智能。

# node.js - 来自 socket.io 的新 cookie 值不起作用？

> ID：10778149
> 
> 赞同：3
> 
> 时间：2012-05-28T00:09:49.773
> 
> 标签：node.js, cookies, express, socket.io, everyauth

我尝试将 socket.io id 用于多个浏览器窗口/页面。[它用于使用everyauth](http://everyauth.com)的 SNS-auth-process ，该项目基于[express](http://expressjs.com/)。

这是我的项目设计：

维护 socket.io 连接的完整 ajax 主页。没有重新加载，没有重定向等。

当用户尝试通过某个 SNS 帐户登录时，会打开一个弹出窗口，该窗口将由everyauth 和 SNS Auth 管理。在弹出窗口内，会发生许多重定向，但主窗口是持久的，socket.io 连接也是如此。

最后，授权成功后，everyauth 在弹窗中重定向'authdone.html'。

在浏览器上，这个弹窗已经没用了，所以 window.close();

但是，可以通过everyauth 获得成功的登录信息，但在我的情况下，cookie 更重要，因为我并不完全需要使用 express 框架进行会话管理，因为我打算**通过 socket.IO 进行会话管理**。

```
app.get('*',
    function (req, res)
    { 
        console.log("----------get------------");
        console.log(req.url);
        if (req.url == '/public/authdone.html')
        {
            console.log("----------get /public/authdone.html------------");
            console.log(req.cookies);  
            // express(connect) sessionID(sid) cookie available here.
            //{ 'connect.sid': '2DLlayNx90wtTsyeq5w83N9g.Kc1ZFd8I7omf6u4fk4FFyKAt4dP1V6IufSf1ZtRudVI' }
        }
        onreq(req, res);
    }); 
```

目前，我设法通过重定向到登录页面（/public/authdone.html）的弹出窗口上的cookie获得了快速会话ID，但是，这还不够。**我还需要在 cookie 中获取面向 socket.IO 的 ID。**

实际上，我在这里感到困惑，并提出了一个问题。 [在 Socket.IO 上添加 cookie 值](https://stackoverflow.com/questions/10771337/adding-a-cookie-value-on-socket-io)

感谢 Wes，我稍微找到了一种添加新 cookie 值的方法（在我的情况下，是一些套接字客户端 ID），如下所示：

```
io.configure(function ()
{
    io.set('authorization', function (handshake, callback)
    {
        if (handshake.headers.cookie)
        {
            var cookie = handshake.headers.cookie;
            var newS = ";" 
                + "socketClientID" + "=" 
                + "999999999999999";// eventually randomize for every client
            cookie += newS;
            console.log("=========================================");
            console.log(cookie);  
        } else
        {
            return callback('Cookie not found', false);
        }
        callback(null, true);
    });
}); 
```

在这个块中，我添加了一个 cookie 值作为“socketClientID=999999999999999”

所以当前通过 console.log 输出的 cookie 是

```
connect.sid=fc2iTJW3ETD7nIyxI5ZwpayK.S0qGhp1Ryw7Msg2r03yB6g822qVZIZTbZyWUSpQL0aU;
socketClientID=999999999999999 
```

到目前为止一切顺利，但是，在everyauth 重定向页面上，我仍然得到

```
----------get /public/authdone.html------------  
{ 'connect.sid': 'fc2iTJW3ETD7nIyxI5ZwpayK.S0qGhp1Ryw7Msg2r03yB6g822qVZIZTbZyWUSpQL0aU' } 
```

只能通过 cookie 获取 express sessionID(connect.sid)，socket.IO 握手阶段添加的 clientID cookie 值不反映。

我真的需要帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T01:34:12.993

好的，我发现我需要从客户端配置这种 cookie。

从 io.sockets.on('connection', function (client)... 发出 socketClientID

或者

从客户端发出并回调socketClientID。

我使用 [https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie) 进行客户端 Cookie 管理。

# php - 检查谁卸载了 Facebook 应用程序

> ID：10778152
> 
> 赞同：2
> 
> 时间：2012-05-28T00:10:36.047
> 
> 标签：php, facebook, facebook-graph-api, sdk, oauth

我们正在寻找不同的方法来检查在卸载发生几周后谁卸载了您的 Facebook 应用。我们知道[Facebook](https://stackoverflow.com/questions/9391375/how-to-recognize-on-php-that-facebook-app-was-uninstalled)在卸载时的 post call，但是如何检查用户是否在事件发生后的某个阶段卸载了应用程序？提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T00:13:47.250

除了你已经提到的之外，我不相信有任何可靠的方法。为什么不只存储用户已卸载您的应用程序？

如果您启用了“弃用离线访问”迁移，则访问令牌将授予您的应用 60 天，您可以检查令牌是否仍然有效。（[这里有详细信息](https://developers.facebook.com/roadmap/offline-access-removal/)）。

**更新**

正如评论中所指出的，在用户不卸载应用程序的情况下，访问令牌可能会变得无效还有其他原因。显而易见的是令牌过期和不太明显的密码更改。

# java - UPSERT 查询给出 ORA 缺少表达式异常

> ID：10778153
> 
> 赞同：0
> 
> 时间：2012-05-28T00:11:14.077
> 
> 标签：java, sql, oracle, upsert

我正在尝试使用以下查询更新并插入 Oracle 数据库。但是，当我尝试使用以下查询插入 oracle 数据库时，我总是得到异常：

```
java.sql.SQLException: ORA-00936: missing expression 
```

这是下面的 UPSERT 查询 - 下面的查询有什么问题吗？

```
// Update and Insert both
    public static final String UPSERT_SQL = "MERGE INTO " +DATABASE_TABLE+ " USING (  SELECT ? AS ID, " +    // We will maybe add this record
    "                ? AS CGUID, " +
    "                ? AS PGUID, " +
    "                ? AS SGUID, "+
    "                ? AS USERID, "+
    "                ? AS ULOC, "+
    "                ? AS SLOC, "+
    "                ? AS PLOC, "+
    "                ? AS ALOC, "+
    "                ? AS SITEID, "+
    "                FROM dual ) maybe "+
    // Checking whether ID got matched, if matched then we will update the database table (ULOC, SLOC, PLOC, ALOC)
    "   ON (maybe.ID = "+DATABASE_TABLE+".ID) "+
    "         WHEN MATCHED THEN "+
            // We only need update the fields that might have changed
    "       UPDATE SET " +DATABASE_TABLE+ ".ULOC = maybe.ULOC, " +DATABASE_TABLE+ ".SLOC = maybe.SLOC, " +DATABASE_TABLE+ ".PLOC = maybe.PLOC, " +DATABASE_TABLE+ ".ALOC = maybe.ALOC "+
    // If not matched then we will Insert new records in the database.
    "         WHEN NOT MATCHED THEN "+
       // Insert new record
    "   INSERT VALUES (maybe.ID, maybe.CGUID, maybe.PGUID, maybe.SGUID, maybe.USERID, maybe.ULOC, maybe.SLOC, maybe.PLOC, maybe.ALOC, maybe.SITEID)"; 
```

我正在尝试像这样插入-

```
LnPDataConstants.PSTMT = LnPDataConstants.DB_CONNECTION.prepareStatement(LnPDataConstants.UPSERT_SQL);
LnPDataConstants.PSTMT.setInt(1, (int) ind);
LnPDataConstants.PSTMT.setString(2, LnPDataConstants.CGUID_VALUE);
LnPDataConstants.PSTMT.setString(3, LnPDataConstants.PGUID_VALUE);
LnPDataConstants.PSTMT.setString(4, LnPDataConstants.SGUID_VALUE);
LnPDataConstants.PSTMT.setString(5, LnPDataConstants.UID_VALUE);
LnPDataConstants.PSTMT.setString(6, LnPDataConstants.ULOC_VALUE);
LnPDataConstants.PSTMT.setString(7, LnPDataConstants.SLOC_VALUE);
LnPDataConstants.PSTMT.setString(8, LnPDataConstants.PLOC_VALUE);
LnPDataConstants.PSTMT.setString(9, LnPDataConstants.ALOC_VALUE);
LnPDataConstants.PSTMT.setString(10, LnPDataConstants.SITEID_VALUE);
LnPDataConstants.PSTMT.executeUpdate(); 
```

当我试图打印查询时——我在控制台上得到了这样的结果——

```
MERGE INTO LNPDATA USING (  SELECT ? AS ID,                 ? AS CGUID,                 ? AS PGUID,                 ? AS SGUID,                 ? AS USERID,                 ? AS ULOC,                 ? AS SLOC,                 ? AS PLOC,                 ? AS ALOC,                 ? AS SITEID,                 FROM dual ) maybe    ON (maybe.ID = LNPDATA.ID)          WHEN MATCHED THEN        UPDATE SET LNPDATA.ULOC = maybe.ULOC, LNPDATA.SLOC = maybe.SLOC, LNPDATA.PLOC = maybe.PLOC, LNPDATA.ALOC = maybe.ALOC          WHEN NOT MATCHED THEN    INSERT VALUES (maybe.ID, maybe.CGUID, maybe.PGUID, maybe.SGUID, maybe.USERID, maybe.ULOC, maybe.SLOC, maybe.PLOC, maybe.ALOC, maybe.SITEID) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T00:41:13.370

```
 "                ? AS SITEID, "+ 
 "                FROM dual ) maybe "+ 
```

去掉逗号。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T00:54:12.117

您仍然需要列出插入语句的列

```
WHEN NOT MATCHED THEN
INSERT (col1, col2 ... )
VALUES (val1, val2 ... ) 
```

# android - 使用 iOS 混合模式的 Android 图像和颜色混合

> ID：10778159
> 
> 赞同：3
> 
> 时间：2012-05-28T00:13:31.663
> 
> 标签：android, ios, image, image-processing, alphablending

我目前正在将应用程序从 iOS 移植到 Android 中，但在图像处理方面遇到了一些困难。

我有一个过滤器类，它由 ImageOverlays 和 ColorOverlays 组成，它们以特定的顺序应用于给定的基本位图。每个 ColorOverlays 都有一个 RGB 颜色值、一个 BlendModeId 和一个 alpha 值。每个 ImageOverlay 都有一个图像位图、一个 BlendModeId 和一个 alpha/强度值。

我的主要问题是我需要支持以下从 iOS 获取的混合模式：

1.  CGBlendModeNormal
2.  CGBlendMode乘法
3.  CGBlendModeScreen
4.  CGBlendModeOverlay
5.  CGBlendModeDarken
6.  CGBlendModeLighten
7.  CGBlendModeColorDodge

其中一些在 Android 中有相应的 PorterDuff.Mode 类型，而另一些则没有。更糟糕的是，一些确实存在的模式是在最新版本的 Android 中引入的，我需要在 API 级别 8 上运行。

尝试从头开始构建模式效率极低。

此外，即使使用 API8 中确实存在的模式，我也无法找到混合 2 个图像但允许您指定蒙版强度（来自 ImageOverlay 的 alpha 值）的方法。与 ColorOverlays 类似。

我试图在 Android 中复制的 iOS 功能是

```
CGContextSetBlendMode(...)
CGContextSetFillColorWithColor(...)
CGContextFillRect(...) - This one is easy
CGContextSetAlpha(...) 
```

我已经开始研究支持这些混合模式和 alpha 操作的小型第三方库。最有希望的是[poelocesar 的 lib-magick](https://github.com/puelocesar/android-lib-magick)，据说它是[ImageMagick](http://www.imagemagick.org/script/index.php)的一个端口。

虽然 lib-magick 确实提供了大多数所需的混合模式（称为`CompositeOperator`），但我无法找到设置强度值或使用混合模式进行颜色填充的方法。

我敢肯定以前有人遇到过这个问题。任何帮助，将不胜感激。顺便说一句，项目规范禁止我进入 OpenGLES。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:51:50.200

即使我通过电子邮件帮助了你，我想我也会发布你的问题，以防有人需要更多解释:-)

2.2 是 API 级别 8，它支持 NDK 中的“libjnigraphics”库，它使您可以访问位图对象的像素缓冲区。您可以手动进行这些混合 - 它们是非常简单的数学计算，并且可以非常快速地完成。

查看[此站点](http://mobilepearls.com/labs/native-android-api/#bitmap)以获取 Android JNI 位图信息。

这真的很简单，只需使用您需要的任何参数（颜色值或可能要混合在一起的另一个位图对象）创建一个 JNI 方法 blend()，锁定该位图的像素缓冲区，进行所需的计算，然后解锁位图。 [关联](https://stackoverflow.com/questions/5919663/how-does-photoshop-blend-two-images-together)

但是，需要注意内存中位图的格式，因为 565 的移位/计算将不同于 8888。如果它看起来不完全正确，请记住这一点！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T17:34:45.293

事实证明，在 jni 中实现它并没有之前预期的那么痛苦。以下链接包含所有详细信息。

[Photoshop如何将两张图片融合在一起？](https://stackoverflow.com/questions/5919663/how-does-photoshop-blend-two-images-together)

# javascript - 如何在 javascript 中修改 Event 对象的目标属性？

> ID：10778162
> 
> 赞同：3
> 
> 时间：2012-05-28T00:13:56.520
> 
> 标签：javascript, javascript-events

我正在执行异步代码，所以我想在完成后触发一个事件。我创建了 Event 对象，并且我想将我当前的“this”对象作为事件的目标属性传递。但是，此属性不会改变。

```
var e = new Event("success");
e.target = myTargetObject;
console.log(e.target); // return 'null' for any myTargetObject. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T00:16:54.927

```
var chngEvt = document.createEvent("MouseEvents");
chngEvt.initMouseEvent('click', true, true);
e.target.dispatchEvent(chngEvt); 
```

# javascript - 抛出虚假错误会停止脚本吗？

> ID：10778163
> 
> 赞同：0
> 
> 时间：2012-05-28T00:15:42.383
> 
> 标签：javascript

之前用`throw new ReferenceError`的不多，用的时候发现会停止脚本：

```
alert("a");  //Yes
throw new ReferenceError("Error.");  //Yes
alert("b");  //Nope 
```

[http://jsfiddle.net/DerekL/uKEZ4/](http://jsfiddle.net/DerekL/uKEZ4/)

我只想在控制台中抛出一个错误而不停止整个脚本。我试图这样做：

```
alert("a");  //Yes
try{
    throw new ReferenceError("Error.");  //Yes
}catch(e){}
alert("b");  //Yes 
```

[http://jsfiddle.net/DerekL/uKEZ4/1/](http://jsfiddle.net/DerekL/uKEZ4/1/)

这会起作用，但我认为这不是最好的方法。在不停止脚本的情况下显示错误消息的最佳方法是什么？

PS：

```
console.warn("Error"); 
```

不能在 IE 上运行。​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T00:37:23.887

此行为是设计使然。JavaScript 中的异常处理就像在许多其他语言中一样工作：C#、Java、Ruby 等。

当抛出异常时，*它将*展开堆栈并*跳过*代码的执行，直到它被 a 捕获`catch`（它将“恢复”执行）。如果没有`catch`，那么它只是完全跳过代码的末尾（脚本元素、源文件、REPL 等）。`finally`在情况下也是一个选项（“恢复”执行），但没有什么像`On Error Resume Next`; 那不是JavaScript。

没有什么可以改变这种行为。（我建议只[填充 IE](https://github.com/kayahr/console-shim)以支持`console`.）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T00:37:17.283

`Error`只是一个简单的`Object`.whataever 你`throw`，他们总是打破执行流程。

# java - 使用已编译的 XPATH 表达式解析 XML 文件时遇到问题？

> ID：10778165
> 
> 赞同：0
> 
> 时间：2012-05-28T00:16:13.190
> 
> 标签：java, xml, xpath, xml-parsing

我正在学习[一个教程](http://www.cs.bgu.ac.il/~dwss111/wiki.files/XML/xpathjava.pdf)，并遇到了一个我预计会起作用的问题。我希望有人可以帮助我处理这段代码。我过不了这个。如果我使用 XPATH 表达式“ **//*/text() ”，我在下面共享的这段代码将匹配，但是当我得到比这更具体并使用“** **//tag0:G/text()** ”时它无法匹配。知道我做错了什么吗？我只是想从下面提供的 XML 中获取 2 个“tag0:G”值：

```
import java.io.IOException;
import java.io.StringReader;    
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpression;
import javax.xml.xpath.XPathExpressionException;
import javax.xml.xpath.XPathFactory;    
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;    
public class Test1 {        
  public static void main(String[] args) {
    System.out.println("Test start...");
    String myXML = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>" +
    "<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\">" +
    "<soapenv:Body>" +
    "<tag0:getA xmlns:tag0=\"http://me.ws.ix\">" +
    "<tag0:B>" +
    "<tag0:CC>" +
    "<tag0:CC>" +
    "<tag0:D>false</tag0:D>" +
    "<tag0:E>false</tag0:E>" +
    "<tag0:F xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:nil=\"true\"/>" +
    "<tag0:G>10001</tag0:G>" +
    "<tag0:H>7744000002</tag0:H>" +
    "</tag0:CC>" +
    "<tag0:CC>" +
    "<tag0:D>false</tag0:D>" +
    "<tag0:E>false</tag0:E>" +
    "<tag0:F xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:nil=\"true\"/>" +
    "<tag0:G>20002</tag0:G>" +
    "<tag0:H>1111122222</tag0:H>" +
    "</tag0:CC>" +
    "</tag0:CC>" +
    "<tag0:I>2012-05-27 23:38:48</tag0:I>" +
    "</tag0:B>" +
    "</tag0:getA>" +
    "</soapenv:Body>" +
    "</soapenv:Envelope>";

    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setNamespaceAware(true);
    Document doc = null;
    NodeList nodes = null;
    try {           
      doc = factory.newDocumentBuilder().parse( new InputSource( new StringReader( myXML) ) );
      XPathExpression expr = XPathFactory.newInstance().newXPath()
        .compile("//tag0:G/text()"); // this fails, I don't know why
      nodes = (NodeList)expr.evaluate(doc, XPathConstants.NODESET);
    } catch (SAXException e) {
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    } catch (ParserConfigurationException e) {
      e.printStackTrace();
    } catch (XPathExpressionException e) {
      e.printStackTrace();
    }
    System.out.println("Nodes length: " + nodes.getLength() );
    for (int i = 0; i < nodes.getLength(); i++) { 
      String val = nodes.item(i).getNodeValue(); 
      System.out.println( "Val: " + val ); 
    }
    System.out.println("Test end...");
  }    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T00:37:32.090

在开始编译 XPath 表达式之前，您应该**[`NamespaceContext`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/xpath/XPath.html#setNamespaceContext%28javax.xml.namespace.NamespaceContext%29)**在您的`XPath`实例上注册一个。你用 [`XPath#setNamespaceContext(NamespaceContex nsContext`)](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/xpath/XPath.html#setNamespaceContext%28javax.xml.namespace.NamespaceContext%29)来做。

请阅读xml.apache.org 上的[使用 NamespaceContext 章节。](http://xml.apache.org/xalan-j/xpath_apis.html#namespacecontext)

这个想法是，当您的文档使用名称空间信息进行解析时，XPath 执行器需要知道如何将您使用的前缀与您运行它的文档中的名称空间 URI 相匹配。前缀本身什么也没说，你可以使用任意前缀，只要它映射到相同的 URI。

ps 这里有更多关于[Namespaces in XML](http://www.w3.org/TR/REC-xml-names/)的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:11:00.880

当然你也可以作弊——如果每次出现的“G”（或你所追求的任何元素）都来自同一个命名空间——你可以简单地做

```
//*[local-name()='G'] 
```

然而，虽然这有效，但这只是规避了这个问题。你还不如硬着头皮穿过命名空间......

# javascript - 使用 JW Player flash 的静音切换链接，回退到 HTML5 视频不起作用

> ID：10778166
> 
> 赞同：0
> 
> 时间：2012-05-28T00:16:27.890
> 
> 标签：javascript, jquery, jwplayer

编辑：哇，通过在配置部分首先放置“文件”和“flashplayer”配置来解决它。我猜这两个参数必须是配置部分的第一个参数。

所以这行得通（由于跨域的东西，您不能像这样从 longtailvideo.com 加载文件，只需使用您自己的本地文件进行测试）

```
<!DOCTYPE html>
<html lang="en">
<head>
<script type="text/javascript" src="jwplayer.js"></script>
</head>
<body>
<div id="vs" style="width:300px;height:250px;"></div>
<a href="javascript:void(0);" onclick="jwplayer().setMute();">Toggle the audio</a>
</body>
</html>

<script type="text/javascript">
jwplayer("vs").setup({
file: "http://content.longtailvideo.com/videos/flvplayer.flv",
flashplayer: "player.swf",
autostart:true,
controlbar: "none",
icons: "false",
repeat:"always",
stretching:"exactfit",
width:300,
height:250,
mute:"true"
});
</script> 
```

无法使静音切换正常工作。根据 Longtail 的文档（http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/16022/controlling-the-player-using-javascript），我要做的就是制作带有 onclick 的链接。不工作。我什至尝试使用 JQuery 进行 .click 无济于事。使用 MP4 文件使代码从 flash 回退到 HTML5 视频。

这不适用于页面中包含的 JQuery

```
<script type="text/javascript">
$(document).ready(function(){
$('#mutetoggle').click(function(){
jwplayer().setMute();
});
});
</script> 
```

带有 JW javascript 的 JW Player 用于嵌入：

```
<!DOCTYPE html>
<html lang="en">
<head>
<script type="text/javascript" src="jwplayer.js"></script>
</head>
<body>
<div id="vs" style="width:300px;height:250px;"></div>
<a href="#" id="mutetoggle" onclick="jwplayer().setMute();">Toggle the audio</a>
</body>
</html>

<script type="text/javascript">
jwplayer("vs").setup({
autostart:true,
controlbar: "none",
icons: "false",
repeat:"always",
stretching:"exactfit",
file: "http://content.longtailvideo.com/videos/flvplayer.flv",
flashplayer: "player.swf",
volume:50,
width:300,
height:250,
mute:"true"
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:27:23.267

似乎文件和 flashplayer 参数必须位于配置部分的首位。去搞清楚。

```
<!DOCTYPE html>
<html lang="en">
<head>
<script type="text/javascript" src="jwplayer.js"></script>
</head>
<body>
<div id="vs" style="width:300px;height:250px;"></div>
<a href="javascript:void(0);" onclick="jwplayer().setMute();">Toggle the audio</a>
</body>
</html>

<script type="text/javascript">
jwplayer("vs").setup({
file: "http://content.longtailvideo.com/videos/flvplayer.flv",
flashplayer: "player.swf",
autostart:true,
controlbar: "none",
icons: "false",
repeat:"always",
stretching:"exactfit",
width:300,
height:250,
mute:"true"
});
</script> 
```

# css - 如何使用css添加空间？

> ID：10778169
> 
> 赞同：1
> 
> 时间：2012-05-28T00:17:02.053
> 
> 标签：css

我[这里有一个 jsfiddle](http://jsfiddle.net/GRENQ/4/)

我想要做的是我想在文本“回复数”旁边添加一点空格，以便文本不会太靠近两边的表格边框。我还想在两个单选按钮旁边的右侧添加一个空格。

如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T00:21:18.497

如果你在 CSS 中添加 padding:10px，你可以在元素周围留出足够的空间，这样它们就不会正好靠在边框上：

```
#replies td{
    border-collapse:collapse;
    border:1px solid black; 
    padding:10px;    
}​ 
```

这是您更新的[jsfiddle](http://jsfiddle.net/GRENQ/5/)，可让您了解它的外观。

接下来，要解决单选按钮的问题，请在`<span>`Single 和 Multiple 周围加上 a，然后去掉空格。此外，`div`在每个输入/跨度对周围添加一个。然后，将其添加到您的 CSS 中：

```
span {
    padding-left:5px;   
} 
```

有关示例，请参[见此 jsfiddle](http://jsfiddle.net/GRENQ/6/)。

这是修改后的 HTML：

```
<tr>
    <td>Number of <br/>Replies: </td>
    <td align="left">
        <div class="td">
            <input type="radio" name="reply" value="single" class="replyBtn" />
            <span>Single</span>
        </div>
        <div class="td">
            <input type="radio" name="reply" value="multiple" class="replyBtn" />            
            <span>Multiple</span>
        </div>
    </td>
</tr> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T02:10:46.980

忽略使用表格进行布局，这就是我认为应该这样做的方式

**HTML**

```
<table id="replies">
   <tr>
     <th colspan="2">Replies</th>
   </tr>
   <tr>
      <td>Number of <br/>Replies: </td>
      <td align="left">
          <input type="radio" name="reply" value="single" class="replyBtn" id="reply_single" />
          <label for="reply_single">Single</label><br />
          <input type="radio" name="reply" value="multiple" class="replyBtn" id="reply_multiple" />
          <label for="reply_multiple">Multiple</label>
      </td>
  </tr>
</table> 
```

**CSS**

```
#replies td
{
  padding:5px;
  border-collapse:collapse;
  border:1px solid black;    
}

#replies input:radio
{
    margin-right:5px;
} 
```

[小提琴](http://jsfiddle.net/GRENQ/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T00:27:56.250

简单的旧 HTML 怎么样？

`<table cellpadding="3">`

或 CSS：

```
#replies td, #replies th { padding: 3px; } 
```

在这种情况下，这个表的 TD 和 TH 都得到这个填充（更好的格式）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T01:59:11.253

您可以考虑先对标记进行更改。请不要将任何文本直接添加到您的`<td>`或`<th>`标签中。有用于添加文本的标签。虽然您的浏览器会渲染文本并显示，但这不是一个好习惯。现在来到你的问题..标记应该是::::

```
<table id="replies">
<tr>
     <th colspan="2">
         <span>Replies</span>
     </th>
</tr>
<tr>
    <td><span>Number of </span><br/><span>Replies: </span></td>
    <td align="left"><span><input type="radio" name="reply" value="single" class="replyBtn" />Single</span><br /><span>
    <input type="radio" name="reply" value="multiple" class="replyBtn" /> Multiple</span></td>
</tr>
</table>​ 
```

您只需将以下内容添加到您的 CSS:::

```
#replies span{
    margin:0 0 0 5px;
}
​ 
```

请在此处查看[JSFIDDLE](http://jsfiddle.net/GRENQ/8/)

# c++ - 别名而不是糖语法的新变量

> ID：10778172
> 
> 赞同：0
> 
> 时间：2012-05-28T00:17:15.763
> 
> 标签：c++, c-preprocessor, syntactic-sugar

考虑一下，除了将其用作糖以提高可读性之外`char firstLetter=word[0];`，您什么也不做。`firstLetter`除此之外还有什么`#define`可以制作内联“别名”而不是分配新内存吗？我意识到可以编写一个脚本，但如果某些东西已经存在......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T00:23:43.470

这里没有内存分配；的值`word[0]`可以复制到寄存器或堆栈中，但是否需要这样做取决于编译器。

请注意，“内联别名”会导致生成更糟糕的代码；该表达式`word[n]`意味着一些计算，如果您使用某种替代，将重复多次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:54:16.280

如果问题真的*是*关于 C++ 的，你总是可以为对象创建一个别名：

```
char& firstLetter=word[0]; 
```

这将为（假设是一个数组，而不是稍后更改的指针）创建`firstLetter`和别名。`word[0]``word`

# javascript - JS - 如何获取按钮文本“结束”位置

> ID：10778173
> 
> 赞同：1
> 
> 时间：2012-05-28T00:17:20.083
> 
> 标签：javascript, gwt

我有一个关于 html 按钮文本位置的问题。正如我所看到的，有一些方法可以获得左上角元素的位置，但右上角呢？例如

我有按钮：

```
<button style="text-align: left">Hello World</button> 
```

...好的，接下来我想知道内部文本“Hello World”结束的坐标。那么是否有可能用js或者什么是最优化的方式来获得呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T01:32:42.800

试试这个：

## 纯 JavaScript

[http://jsfiddle.net/DerekL/AYAPY/3/](http://jsfiddle.net/DerekL/AYAPY/3/)

```
//1\. wrap with content <span>
var txt=document.querySelector("button").innerHTML;
document.querySelector("button").innerHTML="";
document.querySelector("button").appendChild(document.createElement("span"));
document.querySelector("button span").innerHTML=txt;

//2\. Get the <span>'s coordinate
var end_y=document.querySelector("button span").offsetTop;
var end_x=document.querySelector("button span").offsetLeft+document.querySelector("button span").offsetWidth;

//3\. Done!
alert(end_x+", "+end_y); 
```

## 使用 jQuery

强烈推荐。
[http://jsfiddle.net/DerekL/AYAPY/](http://jsfiddle.net/DerekL/AYAPY/)

* * *

![在此处输入图像描述](../Images/fa1d06c0cf24fb19f656202c5a00f3b5.png)

> 我在这一点上放了一点“ `|`”东西，只是为了告诉你返回的坐标是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T01:33:05.117

将元素传递给 getButtonCoords。它将返回一个对象（我们称之为`coords`）。`coords.x`是 x 坐标，`coords.y`是 y 坐标。

```
/* from stackoverflow.com/questions/442404/dynamically-retrieve-html-element-x-y-position-with-javascript */
function getOffset( el ) {
    var _x = 0;
    var _y = 0;
    while( el && !isNaN( el.offsetLeft ) && !isNaN( el.offsetTop ) ) {
        _x += el.offsetLeft - el.scrollLeft;
        _y += el.offsetTop - el.scrollTop;
        el = el.offsetParent;
    }
    return { top: _y, left: _x };
}

function getButtonCoords(button) {
    /* wrap the text in a span element so we can get its coordinates */
    button.innerHTML = "<span id='button-text-" + button.id + "'>" + button.innerHTML + "</span>";

    /* get the span element */
    var button_span = document.getElementById('button-text-' + button.id);

    /* get the offset */
    var offset = getOffset(button_span);

    /* get the coordinates */
    var coords = { x: offset.left + button_span.offsetWidth, y: offset.top };

    /* return them */
    return coords;
}

/* get the button and pass it to the coordinate function */
var coords = getButtonCoords(document.getElementById('button-id'));
/* show the results */
alert(coords.x + ", " + coords.y); 
```

# jquery - 如何在jQuery中的单词之间添加空格？

> ID：10778174
> 
> 赞同：0
> 
> 时间：2012-05-28T00:17:20.323
> 
> 标签：jquery

我有一个 jQuery 函数，它从数据库表中返回一行。当它显示在文本框中时，所有单词都会一起运行。例如： `Everyonepleasebecarefulwhenleavingthebuilding`。我想将单词分开阅读：`Every one please be careful when leaving the building`。这来自用户输入，因此用户单击他希望在文本框中显示的任何行。每行包含不同的数据。下面列出的代码是触发事件的代码：

```
$(document).ready(function() {
    $("table tr").click(function(){
        $("#txttread").val($(this).text());
    });
});

$(document).ready(function() {
    $('.pickme tr').not(':first').hover(
        function() { $(this).addClass('highlight'); },
        function() { $(this).removeClass('highlight'); }
    ).click( function() {
        $('.selected').removeClass('selected');
        $(this).addClass('selected').find('input').attr('checked','checked');
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T00:57:15.530

单击表格行时，循环遍历其表格单元格，将每个单词添加到数组中。最后，通过空格连接该数组并将其结果设置为输入字段的值：

```
​$("#statements").on("click", "tr", function(){
    var words = [];
    $("td", this).text(function(i,v){ words.push( v ); });
    $("#txtread").val( words.join(" ") );
});​​​​​​​​​​ 
```

小提琴：http: [//jsfiddle.net/EXPBp/1/](http://jsfiddle.net/EXPBp/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T01:05:47.270

您需要遍历每个单元格并分别获取其文本，而不是仅仅抓取该行的文本：

```
$(document).ready(function(){
  $("table tr").click(function(){
       $("#txttread").val($.map($(this).children('td'), function (item) { return $(item).text() }).join(' '));
  });
}); 
```

[在http://jsfiddle.net/kSsYD/](http://jsfiddle.net/kSsYD/)工作小提琴

# ios - 移动应用程序的 Restful Web 服务 - 什么语言、框架、基础设施？

> ID：10778175
> 
> 赞同：4
> 
> 时间：2012-05-28T00:17:27.733
> 
> 标签：ios, web-services, rest, scalability

我对 IOS 开发非常陌生。我想知道每个人都使用哪种语言/框架来为高流量、可扩展的 IOS 应用程序后端创建 RESTFUL Web 服务。

解决方案需要： 1\. 安全登录 2\. Restful web services (JSON) 3\. 高流量 4\. 文件上传/下载 5\. 大容量数据库快速搜索结果

我来自 .NET 和 MSSQL 背景。我听说人们正在使用 PHP、Java、Python、RoR 和 IOS 网络服务开发。我明白每种语言都有利有弊，只是想知道当今趋势中更喜欢什么。

对于数据库，NoSQL 数据库是否比 RDBMS 更适合可扩展的大容量数据库？我正在检查 MongoDB。

如果我问错了问题，我深表歉意。我正在研究这个新项目的技术，任何意见都将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:55:46.300

我参与过三个主要项目，它们都有桌面客户端、Web 客户端和移动客户端（Android、iOS）。3 完成了不同的服务器端方法，所有这些都让我和用户感到高兴：

**项目 1：** **服务器：** Delphi + RemObjects **客户端：** Delphi 桌面应用程序、PHP Web 应用程序、Java 小程序、Android 应用程序、iOS 应用程序 **为什么选择 Delphi？**由于现有项目已经是Delphi多层应用程序，开发团队拥有Delphi平台领域，使用RemObjects（甚至使用标准DataSnap）很容易返回JSON，SOAP或XML-RPC供客户调用;

**项目 2：** **服务器：** PHP **客户端：** ExtJS Web 应用程序、Android 应用程序、iOS 应用程序 **为什么选择 PHP？**开发团队在 PHP 方面经验丰富，这些项目最初是一个 PHP Web 应用程序，其中一些类定义良好，并且没有与 UI 耦合。服务器中的一些新类重用了现有的代码库，只需转换为 JSON 或从 JSON 转换就足以让客户端以最小的努力与服务器对话。

**项目 3（初始开发）：** **服务器：** C# ASP.NET **客户端：** ASP.NET 应用程序、Android 应用程序、iOS 应用程序 **为什么选择 C#？**再次重申：开发团队在 C# 和 ASP.NET 方面经验丰富，这些项目最初是一个 ASP.NET 应用程序。我们正在将一些应用程序逻辑重构为 Web 服务，供 ASP.NET 应用程序和客户端使用。

如您所见，没有必要让团队在服务器端学习全新的东西。

我建议您利用您当前的技能，继续使用 MSSQL 在 .NET 中进行开发。

如果应用程序流量增加，您可以将服务器应用程序移动到支持 SQLServer 的 IaaS 服务器（如 Amazon AWS EC2），或者甚至更好地移动到 PaaS 服务器，在这种情况下，Windows Azure 可能是您最好的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T00:50:58.337

这些都是加载的问题，如果没有更多关于你正在做什么等的信息，就无法回答。我在我的大多数项目中使用 Ruby 与 Sinatra 和 DataMapper（以及 SQLite/PostgreSQL）的组合，但这是我个人的偏好并且可能对您没有太大帮助。

与其根据*趋势*选择技术堆栈，不如直接选择具有良好用户基础的产品寻求帮助并从那里着手？

# c# - EXCEPT 运算符可以排除列包含数组数据的数据吗

> ID：10778177
> 
> 赞同：2
> 
> 时间：2012-05-28T00:17:41.587
> 
> 标签：c#, model-view-controller, linq-to-sql

假设有一串以逗号分隔的文本值，如数组：

```
var excludelist ="apples,oranges,grapes,pears"; 
```

excludelist 值可能来自对数据库中表的查询。

假设一个查询，我们想要返回所有行，除了那些名为 Fruit 的字段包含排除列表中的任何项目的行。

```
var qry = from s in context.Groceries.Where(s => s.Fruit(here is where we need to exclude the items??) join u in context.Users on s.Owner equals u.User_ID 
```

有人可以提供指向 SQL 答案的示例链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T00:33:29.077

你试过了`Except`吗？

```
var qry = from s in context.Groceries.Except(excludelist)... 
```

链接到 SQL 有`CONTAINS`（和！包含）

```
where !excludelist.Contains(i)
        select i; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T18:32:20.850

我是这样解决的：

我有一个包含我希望排除的水果名称的数据库表，并且我创建了一个列表（IList 显然不起作用）。

```
List<string> excludedfruit = context.ExcludedFruit.Select(x => x.ExcludedFruitName).ToList(); 
```

然后我使用了以下 Linq to SQL 查询（部分显示）

```
 var qry = from s in context.Groceries
                .Where(s => !excludedfruit.Contains(s.Fruit)) 
```

# asp.net-mvc-3 - 如何在 Windows Azure 中的文件夹上授予 RW 权限？

> ID：10778178
> 
> 赞同：4
> 
> 时间：2012-05-28T00:17:52.580
> 
> 标签：asp.net-mvc-3, azure

我正在将 MVC 3.0 Web 应用程序部署到 Windows Azure。我有一个操作方法，它获取用户上传的文件并将其存储在我的网络应用程序中的文件夹中。

我怎样才能将该文件夹的 RW 权限授予正在运行的进程？我阅读了有关启动任务的内容并有基本的了解，但我不知道，

1.  如何授予权限本身，以及
2.  我应该向哪个运行进程（用户）授予权限。

非常感谢您的帮助。

**编辑**

除了下面@David 的回答，我发现这个链接非常有用：

[https://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/](https://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T02:48:02.650

对于本地存储，我不会忙于授予对各种目录的访问权限。相反，请利用专为正在运行的 VM 提供的存储资源。在给定实例大小的情况下，您可以使用从 20GB 到近 2TB 的本地存储（[此处](http://msdn.microsoft.com/en-us/library/windowsazure/ee814754.aspx)提供完整的大小详细信息）。要利用此空间，您将在项目中创建本地存储资源： ![在此处输入图像描述](../Images/7afb3dc5ac03ed2cb40c7a4d24a84113.png)

然后，在代码中，获取该存储的驱动器号：

```
var storageRoot = RoleEnvironment.GetLocalResource("moreStorage").RootPath; 
```

现在您可以自由使用该存储空间了。而且...这些都不需要任何启动任务或授予权限。

现在需要注意的是：这是每个运行实例的本地存储，并且不在实例之间共享。此外，它是*不耐用*的——如果磁盘崩溃，数据就会消失。

对于持久的、持久的文件存储，Blob 存储是一个更好的选择，因为它是*持久*的（在数据中心内进行三重复制，并在异地复制到另一个数据中心）并且它位于您的角色实例外部，可以从任何实例（或任何应用程序）访问，包括您的本地应用程序）。

由于 blob 存储是按容器组织的，并且容器中的 blob 是由容器组织的，因此组织 blob 非常简单（并且在给定的 blob 中存储几乎任何东西，每个最多 200GB）。此外，将文件上传/下载到 blob 或从 blob 上传/下载到文件流或本地文件（在您分配的存储资源中，如上图所示）也很简单。

# validation - cakePHP 表单自定义验证

> ID：10778187
> 
> 赞同：0
> 
> 时间：2012-05-28T00:19:41.447
> 
> 标签：validation, cakephp

大家好，我正在创建一个发票系统，并试图确保发送请求的人将其发送给存在的人。我目前拥有的代码不起作用，想知道是否有人可以帮我一把。

模型

```
 'exists'=>array(
                   'rule'=>'partytwo',
           'message'=>'That username doesnt exist.'
        )); 

 function userExists($field=array(), $compare_field=null )
    {
        if($field['exists']= $compare_field)
        return TRUE;
        else return FALSE;
    } 
```

和控制器关系的验证

```
if($this->request->is('post')){
    if($this->Relationship->validates(array('fieldlist'=>array('partywo','Relationship.userExists')))){
    $this->Relationship->create(); 
    if ($this->Relationship->save($this->request->data)) 
    {
        $id=$this->Relationship->id;
        $this->Session->setFlash('The relationship has been saved');  

    }}
    else { $this->Session->setFlash('The relationship could not be saved. Please, try again.'); } 
    } 
```

* * *

这是我目前的模型

```
 <?php
    class Relationship extends AppModel{ 
    var $name='Relationship'; 
    public $useTable = 'relationships_users';
    public $primaryKey = 'id';

    var $validate = array(
        'date' => array(
        'rule' => array('datevalidation', 'systemDate' ),
        'message' => 'Current Date and System Date is mismatched'),
        'partytwo'=>array(
                'partytwoExists'=>array(
                'rule'=> 'userExists',
                'message'=>'That username doesnt exist.'
             ))); 

 function datevalidation( $field=array(), $compare_field=null ) 
    {
        if ($field['date'] > $compare_field)

        return TRUE;
        else return FALSE;
    }

 function userExists($check)
    {

        $userExists= $this->find('count', array('conditions'=>$check));
        if($userExists == 1)
        {return TRUE;
        }
        else
        return FALSE;
    }
    } 
```

它目前直接出错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:15:22.947

你读过关于验证的书吗？

```
// MODEL

var $validation = array(
    'field_name' => array(
        'rule' => array( 'customFunction', param ),
        'message' => 'Message here'
        )
    );

function customFunction($field=array(), $compare_field=null )
{
    if($field['exists'] == $compare_field)
    return TRUE;
    else return FALSE;
} 
```

对于控制器：

```
// CONTROLLER

if($this->request->is('post')){

    $this->Relationship->set( $this->request->data );

    if($this->Relationship->validates(array('fieldlist'=>array('partywo','Relationship.userExists')))){
        $this->Relationship->create(); 
        if ($this->Relationship->save($this->request->data)) 
        {
            $id=$this->Relationship->id;
            $this->Session->setFlash('The relationship has been saved');  

        }

    } else { 
        $this->Session->setFlash('The relationship could not be saved. Please, try again.'); 
        } 

    } 
```

这是沿着这些路线的东西，试试吧。

# php - 会员注册无效

> ID：10778188
> 
> 赞同：1
> 
> 时间：2012-05-28T00:20:02.880
> 
> 标签：php, mysql

我做了一个小网站，非会员可以在网站上注册，注册的时候应该在数据库表中搅动一下自己的资料。我有这个工作，但现在它不是，它除了将详细信息存储在数据库中之外，它还能做所有事情。有人可以帮忙吗？

```
 $host="localhost"; // Host name
    $username="root"; // Mysql username
    $password=""; // Mysql password
    $db_name="test"; // Database name
    $tbl_name="members"; // Table name

       // Connect to server and select databse.
        mysql_connect("$host", "$username", "$password")or die("cannot connect");
        mysql_select_db("$db_name")or die("cannot select DB");

     // username and password sent from form
   $myusername=$_POST['myusername'];
   $mypassword=$_POST['mypassword'];
   $repeatpassword=$_POST['repeatpassword'];

   // To protect MySQL injection (more detail about MySQL injection)
   $myusername = strip_tags($myusername);
   $mypassword = strip_tags($mypassword);
   $repeatpassword = strip_tags($repeatpassword);
   $myusername = mysql_real_escape_string($myusername);
   $mypassword = mysql_real_escape_string($mypassword);
   $repeatpassword = mysql_real_escape_string($repeatpassword);

   if($myusername&&$mypassword&&$repeatpassword)
    {
        if ($mypassword==$repeatpassword)
        {
            if (strlen($myusername)>10)
                {
                header("location:erroruname.php");
                }
                else
                {
                if (strlen($mypassword)>10||strlen($mypassword)<5)

                header("location:errorpword.php");

                else 
                {

                $queryreg = mysql_query("

                 INSERT INTO $tbl_name VALUES('','$myusername','$mypassword')
        ");
            session_register("myusername");
            session_register("mypassword");
            header("location:insertdetail.php?myusername=" . $username);            
        }
        }

}
else
    header("location:errornomatch.php");
     }
      else
              header("location:errorfields.php"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T00:25:14.370

这从来没有工作，因为你没有在你的`INSERT`

```
INSERT INTO $tbl_name VALUES('','$myusername','$mypassword') 
```

需要看起来像

```
INSERT INTO $tbl_name(`column_a`, `username`, `password`) 
VALUES('','$myusername','$mypassword') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T00:27:34.373

该表中是否有自动增量列？如果是这样，请不要使用`' '`，而是不要输入任何内容。在这种情况下，您*应该*只指定两列（用户名和密码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T05:23:31.293

回显查询并在 phpmyadmin 中手动运行 sql 查询

```
echo "INSERT INTO $tbl_name VALUES('','$myusername','$mypassword') "; die(); 
```

# scala - OSX 上的 Scala SBT / Maven2 错误：“打开 Zip 文件时出错”-> MissingRequirementError

> ID：10778189
> 
> 赞同：5
> 
> 时间：2012-05-28T00:20:08.133
> 
> 标签：scala, maven, maven-2, sbt, ivy

我有一个在 Unix 机器上构建良好的项目（[http://www.github.com/jhclark/ducttape](http://www.github.com/jhclark/ducttape)）。

但是，使用 SBT 0.11.2（和一些其他版本的 SBT），它不会在我的 Mac（OSX 10.5）上构建。我收到以下神秘的错误消息：

```
$ ~/bin/sbt compile                                       (master*? 20:11)
[info] Loading project definition from /Users/jon/Documents/workspace-    scala/ducttape/project
[info] Set current project to ducttape (in build file:/Users/jon/Documents/workspace-scala/ducttape/)
[info] Compiling 104 Scala sources to /Users/jon/Documents/workspace-scala/ducttape/target/scala-2.9.2/classes...
[error] error while loading <root>, error in opening zip file
[error] {file:/Users/jon/Documents/workspace-scala/ducttape/}default-024416/compile:compile: scala.tools.nsc.MissingRequirementError: object scala not found.
[error] Total time: 2 s, completed May 27, 2012 8:12:09 PM 
```

即使我用以下方法彻底清理了东西，也会发生这种情况：

```
sbt clean clean-files
rm -rf ~/.ivy2 ~/.m2 ~/.sbt 
```

我怀疑真正的错误发生在 SBT 用于依赖管理的 Maven2 中（另请参阅[Maven：运行 maven 时打开 zip 文件时出错](https://stackoverflow.com/questions/7600028/error-in-opening-zip-file)）。

然而，几天后我被难住了。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T14:23:55.940

当我尝试将旧版本的[sbt-extras](https://github.com/paulp/sbt-extras)启动器与 sbt-0.11.3 一起使用时，我遇到了类似的问题。就我而言，它尝试下载一个不存在的文件，并尝试解压缩 404 错误页面。最新的 sbt-extras 启动器[已](https://github.com/paulp/sbt-extras/commit/d39e19700617d0f98439165e48f0b3f729338e81)针对 sbt-0.11.3 进行了修复。

你的听起来不同，但可能是由于[scala-tools.org 的关闭](http://blog.goodstuff.im/the-transition-of-scala-tools-org/)。如果可以，我建议升级到 sbt-0.11.3。

如果你需要继续使用 0.11.2，你应该使用 0.11.3-2 启动器，在`sbt.version=0.11.2`你的 . Mark Harrah在 SBT 邮件列表上[发布了信息。](https://groups.google.com/d/msg/simple-build-tool/3sE6DxS9t6E/45uMF_WmzPUJ)`project/build.properties``scalaTools``build.sbt`

如果这没有帮助，由于某种原因，您正在`.jar`从某个地方下载损坏的 s。

运行命令`find ~/.ivy2 ~/.m2 ~/.sbt -name "*.jar" -exec unzip -qqt {} \;`以查找哪些 jar(s) 已损坏。损坏的 jar 中的内容可能会为您提供有关问题所在的线索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:53:03.257

为了完成，我遇到了同样的问题，它是一个损坏的 zip/jar 文件。

但是，Dave 的命令行会检查您的 jar 可能所在的常用类路径目录。

给我带来麻烦的实际上是在我的项目`./lib`文件夹中。我为此苦苦挣扎了几个小时，希望这对其他人有帮助。

PS：非常感谢戴夫！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-30T18:57:41.113

我刚刚遇到了同样的问题（在 OSX 和 Scala 2.10.2 上），但结果证明问题不在我的任何依赖管理器存储库中，也不在 SBT 或 Scala 中（对于某些人来说）。

由于其他原因，我将 JAR 放入 /Library/Java/Home/lib/ext/ 中，但没有使其成为组和世界可读的。只有root（它的所有者）可以阅读它。我调整了权限，瞧。Scala 和 SBT 突然又开始工作了。

```
cd /Library/Java/Home/lib/ext
sudo chmod g+r bcprov-jdk15on-1.47.jar
sudo chmod g+a bcprov-jdk15on-1.47.jar 
```

# c++ - ascii 和二进制 - 按原样显示，但读取返回垃圾

> ID：10778198
> 
> 赞同：2
> 
> 时间：2012-05-28T00:22:04.160
> 
> 标签：c++, file-io

这主要是：

```
std::ofstream rainbow_file("rainbow.bin", std::ios::binary);
rainbow_file.write((const char*) p.pass, password::PASSWORD_SIZE);
rainbow_file.write((const char*) h.hash_, hash::HASH_SIZE); 
```

在哪里 ：

```
class hash
{
public:
    static const size_t HASH_SIZE = 32;
    uint8_t hash_[HASH_SIZE];
...
}
// similar for pass 
```

我在 Notepad++ 中打开 Rainbow.bin 文件，我看到我的通行证是通行证（字符 AZ、@、!、az、0-9）和哈希的二进制垃圾。稍后我会这样做：

```
std::ifstream rainbow_file("rainbow.bin", std::ios::binary);
rainbow_file.read((char*) p.pass, password::PASSWORD_SIZE);
rainbow_file.read((char*) h.hash_, hash::HASH_SIZE); 
```

我将通行证作为二进制垃圾返回。我尝试了很多事情（比如打开两个流 - 一个不是二进制模式 - 并使用 seekg 分别移动文件指针，尝试各种强制转换等），但对于我的生活，我无法让它工作。我很好奇为什么。并且很沮丧。我在 npp 中重复一遍，我看到所有的东西都是有序的。

编辑：这些是不同的控制流，并且流被正确关闭（）

**编辑2**：工作！仍然请参阅下面的答案和评论以了解更多的 C++ 方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:39:53.277

```
std::ifstream rainbow_file("rainbow.bin", std::ios::binary);  /* OK */

rainbow_file.read((char*) p.pass, password::PASSWORD_SIZE);   /* KO */
rainbow_file.read((char*) h.hash_, hash::HASH_SIZE); 
```

应替换为：

```
rainbow_file.read ( reinterpret_cast < char*> (&(p.pass)), password::PASSWORD_SIZE * sizeof(uint_8t));
rainbow_file.read ( reinterpret_cast < char*> (&(h.hash_)), hash::HASH_SIZE * sizeof(uint_8t)); 
```

这样你就不会假设 sizeof (uint_8t) == sizeof (char)。

在 C++ 中，h.hash_ 是一个类型为 uint_8t(&)[hash::HASH_SIZE] 的数组，而不是指针...您可以通过让编译器检查强制转换来轻松发现问题，但不幸的是，您使用了 C 风格演员，未检查。

永远不要在 C++ 程序中使用 C 风格转换方法！！！

但实际上你可以在纯 C++ 中做到这一点，没有错误：

```
std::ifstream rainbow_file("rainbow.bin", std::ios::binary);

rainbow_file >> p.pass >> h.hash_; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T21:48:16.210

如果您的文件中使用了非 ascii char（似乎是二进制文件），则必须使用 std::noskipws 流操纵器。此外，您还可以显式指定要加载的每个字段的宽度，从而生成代码`rainbow_file >> std::noskipws >> std::setw ( password::PASSWORD_SIZE ) >> p.pass >> std::noskipws >> std::setw ( hash::HASH_SIZE ) >> h.hash_;`。

@Nicol Bolas我没有假设 uint_8t 的类型大小，而是指针的大小！转换指针本质上是不安全的，我们对类型的真正内存布局了解多少？没有什么。这是强制转换非派生类型的指针不安全的唯一原因。我使用 reinterpret_cast 来通知其他开发人员以及编译器我知道我在做什么，reinterpret cast 的工作方式与日常使用中的静态转换相同。正如我所看到的，每个人都看到了这个把戏，所以我做得很好！

最后我必须重复那个`p.pas`s 并且`h.hash_`不是 C++ 中的指针！！！！！！它是 POD，C 风格的演员不能告诉你，C++ 风格的...

# javascript - 为什么原型 javascript 在这种情况下不起作用

> ID：10778200
> 
> 赞同：0
> 
> 时间：2012-05-28T00:22:20.117
> 
> 标签：javascript, oop, inheritance, prototypal-inheritance

我的案例（为什么“test1”没有出现在警报窗口中）：

```
var Parent=function(){
    this.test1= function(){ 
        alert("test1");
    }
}

var Child=function(){
   this.prototype=new Parent();
}

var test=new Child();
test.test1(); 
```

[http://jsfiddle.net/c3sUM/2/](http://jsfiddle.net/c3sUM/2/) （同样的代码在线尝试）​</p>

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T00:26:04.640

问题是您没有分配`Child`的原型，而是`prototype`在其实例中创建了一个属性，该属性`Child`指向`Parent`.

[相反，这样做](http://jsfiddle.net/c3sUM/4/)：

```
var Child = function(){};        // create constructor
Child.prototype = new Parent();  // assign instance of parent to constructor's
                                 // prototype 
```

[类似的答案](https://stackoverflow.com/a/10101604/575527)可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T02:42:15.900

使用函数声明，您的代码会更清晰：

```
// Parent constructor
function Parent() {}

// Methods of Parent.prototype are inherited by 
// instances of parent
Parent.prototype.test1 = function() {
    alert('test 1');
}

// Child constructor
function Child(){}

// Make Child.prototype an instance of Parent so 
// instances inherit from Child and Parent
Child.prototype = new Parent();

// Instance inherits from Child (and hence Parent);
var child = new Child();

child.test1();  // 'test 1' 
```

在这种情况下，使用函数表达式而不是声明的唯一原因是，如果您想根据其他逻辑动态创建构造函数。

# .net - 使用设计器插入 WinForms 自定义控件在调用 InitializeComponent 中的 __identifier 时产生错误

> ID：10778201
> 
> 赞同：0
> 
> 时间：2012-05-28T00:22:21.583
> 
> 标签：.net, winforms, custom-controls

使用 Windows 窗体、C++/CLI，我在项目中创建自定义控件并构建它，然后它们在设计器中可用于解决方案中的其他项目。整洁的

但是，我在设计器中经常遇到错误，我不太清楚如何系统地重现或解决：有时当我打开表单的设计器视图时，我会收到 C++ Code Dom 解析错误“在类 [自定义控件的类] 中找不到成员 __identifier”。通过打开代码，转到有问题的行并发表评论，它得到了“解决”（修补）。该行始终是设计人员在 InitializeComponent 中添加的默认值之一。例如

//this->tb_long_m->__identifier(value) = 1.7976931348623157E+308;

我很感激解决这个问题的一些指导。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:55:07.483

我认为 __identifier 是公开的而不是私有的。`[Browsable(false)]`或者，您可以在标识符上添加属性。

也[见这里](https://stackoverflow.com/questions/2598733/how-do-i-get-the-winform-designer-to-totally-ignore-a-property-on-a-custom-contr)

希望这可以帮助。

# java - 在 Generic SortedSet 中创建 E 和数组

> ID：10778203
> 
> 赞同：0
> 
> 时间：2012-05-28T00:22:57.153
> 
> 标签：java, sortedset

作为一个示例，我正在开发一个`MySortedSet<E>`实现`SortedSet<E>`接口的简单的java。它由一个简单的数组备份，即`E[] array`.

我对此有几个问题：

这是类：（我不是在编写整个代码，而是在编写相关部分）

```
public class MySortedSet<E> implements SortedSet<E>, Iterator<E> {

 private E[] array;
 private Comparator<? super E> _comparator;
 private int size = 0;
 private int capacity;

 @SuppressWarnings("unchecked")
 public MySortedSet() {
    this.capacity = 10;
    this.array = (E[]) new Object[this.capacity];
    // this.array = Array.newInstance(Class<E> var,int size);
    // We have to get Class<E> from outside caller.
 }
} 
```

**问题1：**有人可以告诉我是否有更好的解决方案来在构造函数中创建一个新数组而不是这个`this.array = (E[]) new Object[this.capacity];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:30:08.627

要么你应该继续做你正在做的事情，要么你应该把它保留为一个`Object[]`并在你输出它们时转换这些值。（`ArrayList`例如，实现是后者。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:56:51.360

您可以更改代码以删除不安全的演员表：

```
public MySortedSet(Class<E> clazz) {
    capacity = 10;
    array = Array.newInstance(clazz, capacity);
} 
```

尽管它强制客户端代码提供`Class<E>`对象，但这是一种非常常见的代码模式，用于解决此类问题（您需要`Class`在构造函数中使用类型化对象）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T00:54:18.477

`ArrayList<E>` [将元素存储](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#ArrayList.0elementData)在一个 plain`Object[]`中，原始值是自动装箱的，它[分配`null`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#421)给被移除元素留下的[空洞。](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#421)

实现的类`Comparable<E>`必须实现与from[`int compareTo(E other)`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Comparable.java#Comparable.compareTo%28java.lang.Object%29)类似的工作方式。您可以检查内部比较器并返回对象的自然顺序，也可以定义内部“使用自然顺序”比较器实现。[`compare(E o1, E o2)`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Comparator.java#Comparator.compare%28java.lang.Object,java.lang.Object%29)`Comparator``null`

[二进制搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)是一种最小化查找项目或应将项目插入排序列表的位置所需的比较次数的方法。不是从第一个元素开始检查每个元素，而是从列表的中点开始。如果寻找的项目应该在找到的元素之前，则向前面移动一半并重复；否则中途移动到最后并重复。每次重复时，都使用之前的下限/上限和中点作为新的子列表，将每一步的元素数量减半。

想一想尝试猜测 1 到 100 之间的数字，每次都会被告知您是猜得太高还是太低。

*   50 - 太高了
*   25 - 太低
*   37 - 太高
*   31 - 太低
*   34 - 太低
*   35 - 正确！

# jquery - 问题，包括 html 末尾的 javascript

> ID：10778206
> 
> 赞同：0
> 
> 时间：2012-05-28T00:23:43.487
> 
> 标签：jquery, ruby-on-rails-3, twitter-bootstrap, ckeditor, asset-pipeline

我使用的引导模板建议将所有 javascript 文件放在 html 的底部，以便页面加载更快，我认为这是一个好主意。但是一些 js 库希望 jquery 包含在顶部。我很想只把 jquery 放在顶部，但是 rails 资产管道真的想把我所有的 js 混在一起。处理这个问题的最佳方法是什么？例如，我正在使用 ckeditor，当我执行建议时：

```
<%= form.cktext_area :notes, :toolbar => 'Full', :width => 800, :height => 400 %> 
```

我在 Chrome 的控制台中得到：“Uncaught ReferenceError: $ is not defined”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T00:56:54.810

根据这里的演示[https://github.com/galetahub/ckeditor](https://github.com/galetahub/ckeditor)，您可以在模板代码中使用 javascript_include_tag 决定 ckeditor 的 javascript 标记的位置。表单助手应该只输出 HTML。

稍微偏离主题：如果您发现自己使用越来越多的 javascript 并希望有一种通用的方式来包含脚本和相互依赖的脚本，请查看 requirejs。如果 jquery 是您网站的要求，您甚至可以使用一个名为 requirejs-jquery 的版本。

# php - 正确的案例而不破坏 IBM、NASA 等

> ID：10778214
> 
> 赞同：2
> 
> 时间：2012-05-28T00:25:08.837
> 
> 标签：php, regex, string, upcase

有人对此有 PHP 解决方案吗？

目标是有一个函数来接受这些

你好世界你好世界你好IBM

并返回这些

你好世界你好世界你好IBM

分别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T00:36:33.180

来自苏格兰的麦克唐纳先生更喜欢他的名字大写，而来自爱尔兰的麦克唐纳先生更喜欢这样。在事先不知道您指的是哪位先生的情况下，很难知道哪个是“正确的”，这需要更多的上下文，而不仅仅是文件中的单词。

此外，英国广播公司（或者是英国广播公司？）已经开始拼写一些名字，比如 Nasa 和 Nato。它让我感到震惊；我非常不喜欢它。但这就是他们现在所做的。什么时候acrynom（或某些人更喜欢称之为“初始主义”）成为一个独立的词？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T01:30:39.940

虽然这有点 hack，但您可以存储要保留大写字母的首字母缩略词列表，然后将字符串中的单词与`$exceptions`. 虽然 Jonathan 是正确的，但如果它的名称是您使用的而不是首字母缩略词，那么这个解决方案是无用的。但显然，如果来自苏格兰的麦克唐纳先生是正确的，那么它就不会改变。

`**[See it in action](http://codepad.org/PszJjL6X)**`

```
<?php
$exceptions = array("to", "a", "the", "of", "by", "and","on","those","with",
                    "NASA","FBI","BBC","IBM","TV");

$string = "While McBeth and Mr MacDonald from Scotland
was using her IBM computer to watch a ripped tv show from the BBC,
she was being watched by the FBI, Those little rascals were
using a NASA satellite to spy on her.";

echo titleCase($string, $exceptions);
/*
While McBeth and Mr MacDonald from Scotland
was using her IBM computer to watch a ripped TV show from the BBC,
she was being watched by the FBI, Those little rascals were
using a NASA satellite to spy on her.
*/

/*Your case example
  Hello World Hello World Hello IBM, BBC and NASA.
*/
echo titleCase('HELLO WORLD hello world Hello IBM, BBC and NASA.', $exceptions,true);

function titleCase($string, $exceptions = array(), $ucfirst=false) {
    $words = explode(' ', $string);
    $newwords = array();
    $i=0;
    foreach ($words as $word){
        // trim white space or newlines from string
        $word=trim($word);
        // trim ending coomer if any
        if (in_array(strtoupper(trim($word,',.')), $exceptions)){
            // check exceptions list for any words that should be in upper case
            $word = strtoupper($word);
        } else{
            // convert to uppercase if $ucfirst = true
            if($ucfirst==true){
                // check exceptions list for should not be upper case
                if(!in_array(trim($word,','), $exceptions)){
                    $word = strtolower($word);
                    $word = ucfirst($word);
                }
            }
        }
        // upper case the first word in the string
        if($i==0){$word = ucfirst($word);}
        array_push($newwords, $word);
        $i++;
    }
    $string = join(' ', $newwords);
return $string;
}
?> 
```

# c++ - 将字符串转换为 C++ 中的函数

> ID：10778217
> 
> 赞同：0
> 
> 时间：2012-05-28T00:25:28.083
> 
> 标签：c++, memory-management

一段时间以来，我一直在寻找一种将函数动态加载到 c++ 中的方法，我想我终于弄明白了。这是计划：

> 1.  将函数作为字符串传递给 C++（通过套接字连接、文件或其他方式）。
> 2.  将字符串写入文件。
> 3.  让 C++ 程序编译该文件并执行它。如果有任何错误，抓住它们并返回它。
> 4.  让新执行的带有新函数的程序将函数的内存位置传递给当前正在运行的程序。
> 5.  将函数的位置保存到函数指针变量中（函数将始终具有相同的返回类型和参数，因此这简化了指针的声明）。
> 6.  使用函数指针运行新函数。

问题是在第 4 步之后，我不想让新程序继续运行，因为如果我经常这样做，许多正在运行的程序会占用线程。有什么方法可以关闭新程序，但保留存储新函数的内存位置？我不希望它在仍在使用时被覆盖或提供给其他程序。

如果你们对其他步骤也有任何建议，那也将不胜感激。可能还有其他库做类似的事情，推荐它们很好，但这是我想要研究的方法——如果不是为了完成它，那么是为了知道如何去做。

编辑：我知道动态链接库。这是我主要研究的内容，以更好地了解 C++ 中的工作原理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T00:30:16.367

我看不出这是如何工作的。当您运行新程序时，它将是一个单独的进程，因此其进程空间中的任何地址在原始进程中都没有意义。

不仅如此，你要调用的代码*甚至在原进程中都不存在*，所以在原进程中也没有办法调用它。

正如尼克在他的回答中所说，您需要一个 DLL/共享库，或者您必须设置某种形式的进程间通信，以便原始进程可以将数据发送到新进程以由相关函数操作，然后发回到原来的过程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T00:28:43.267

[**动态**链接库](http://en.wikipedia.org/wiki/Dynamic-link_library)怎么样？

这些可以在运行时链接/取消链接/替换。

或者，如果您真的想在进程之间进行通信，您可以使用[命名管道](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365590%28v=vs.85%29.aspx)。

**编辑**- 您还可以创建[命名共享内存](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T03:23:56.087

动态库最适合您的问题。也忘了启动一个不同的进程，这本身就是另一个问题，但除了上面的帖子，只要你正确地做了虚拟分配，只需在同一个“加载器”中调用你的函数，那么你不必担心因为您将运行相同的 RAM 大小绑定堆栈。

真正的问题是：

1 - 从主程序离线编译要加载的函数。

2 - 从编译器生成的二进制文件中提取相关代码。

3 - 加载字符串。

1 和 2 需要深入了解整个编译器套件，包括编译器标志选项、链接器等……而不仅仅是 IDE 的按钮……

如果你没问题，使用 1 和 2，你应该知道为什么使用 std::string 或除纯字符 * 之外的任何东西是有害的。

我可以继续整个故事，但它绝对值得一书，因为这是 Hacker/Cracker 做事的方式，我强烈建议普通用户使用动态库，这就是它们存在的原因。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T00:48:19.993

对于步骤 4。我们不能直接将内存位置（地址）从一个进程传递给另一个进程，因为这两个进程使用不同的虚拟内存空间。一个进程不能在其他进程中使用内存。所以你需要通过两个进程创建一个共享内存。并将您的功能复制到此内存中，然后您可以关闭新进程。对于共享内存，如果在 Windows 中，请查看创建命名共享内存 [http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551(v=vs.85).aspx)

之后，您仍然创建另一个内存空间以再次将功能复制到它。这个想法是分配的普通内存只有读/写属性，如果在上面执行程序员，CPU会产生异常。

因此，如果在 Windows 中，您需要使用 VirtualAlloc 使用标志 PAGE_EXECUTE_READWRITE 分配内存（[http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887%28v=vs.85%29.aspx) )

```
void* address = NULL;
address= VirtualAlloc(NULL,
        sizeof(emitcode),
        MEM_COMMIT|MEM_RESERVE,
        PAGE_EXECUTE_READWRITE); 
```

将函数复制到 后`address`，就可以调用 中的函数`address`，但需要非常小心保持堆栈平衡。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-21T15:49:29.657

通常我们称这种代码注入...

基本上，为了安全起见，任何现代操作系统都禁止在初始加载完成后访问某些内容以进行执行，因此我们必须回退到操作系统范围内经过验证的动态库。

也就是说，你有有效的编译代码，如果你真的想达到这个效果，你必须将你的函数加载到内存中，然后以系统特定的方式将它定义为可执行文件（清除 NX 位）。

但是让我们明确一点，您的函数必须与代码位置无关，并且动态链接器无法帮助您解析符号……这是工作的难点。

# ruby - 使用 Ruby 编写键盘输入脚本

> ID：10778219
> 
> 赞同：0
> 
> 时间：2012-05-28T00:25:46.710
> 
> 标签：ruby

我希望编写一个可以控制 GNU Screen 的脚本，例如用 'Ctrl + S' 分割屏幕。我的最终目标是用一个脚本运行 4 个不同的应用程序。这在 Ruby 中可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:20:44.020

我还没有找到任何预制的 Ruby 解决方案，但是有很多关于使用 shell 命令执行此操作的页面。例如，[为了乐趣和利润而编写脚本屏幕](http://www.jerri.de/blog/archives/2006/05/02/scripting_screen_for_fun_and_profit/)。

其他 Stack Exchange 问题：[此处](https://serverfault.com/questions/155851/run-gnu-screen-from-script)、[此处](https://stackoverflow.com/questions/899609/gnu-screen-run-script-that-sends-commands-to-the-screen-session-it-is-being-run)和[此处](https://stackoverflow.com/questions/2156290/how-do-you-script-gnu-screen-from-within-a-screen-session-to-open-new-windows-an)。

# c# - 知道哪个 ListView 关注表单

> ID：10778220
> 
> 赞同：0
> 
> 时间：2012-05-28T00:25:53.737
> 
> 标签：c#, winforms

C# WinForms：

在这样的一些应用程序中：

![在此处输入图像描述](../Images/2cd091ce0b8fa65c9e98db0cc9a8e228.png)

我想为“全选”按钮编写代码。如果我去检查哪个列表视图的“SelectedIndex”或“selected Item”属性大于零，那么它将不起作用，因为如果用户只是在它们的白色区域内单击了怎么办？

而且 form.ActiveControl 也不起作用，因为当我们单击“SelectAll”按钮时，为时已晚！ActiveControl 就是那个 SelectAll 按钮。

也许我可以创建一个类级变量来记住单击了哪个控件等..但我认为应该有更好的方法....但是什么？！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T00:44:33.683

您可以将“GotFocus”事件分配给这样的方法，并以这种方式记录“最后聚焦”控件。然后在您的 SelectAll_CLick 处理程序中，如果分配了列表视图，则选择全部，否则 - 不要！

```
private ListView mLastSelectedListView;

private void ListViews_GotFocus(object sender, EventArgs e)'
{
    ListView lv = sender as ListView;
    if (null == lv) return;
    mLastSelectedListView = lv;
}

private void SelectAll_Click(object sender, EventArgs e)
{
    if (null == mLastSelectedListView) return;
    mLastSelectedListView.SelectAll();
} 
```

这是支持上述内容的快速“SelectAll”扩展方法；

```
public static class ListViewExtensions
{
    public static void SelectAll(this ListView lv)
    {
        foreach (ListViewItem item in lv.Items)
            item.Selected = true;

    }
} 
```

# ios - 从音频文件中提取数据

> ID：10778222
> 
> 赞同：0
> 
> 时间：2012-05-28T00:26:15.920
> 
> 标签：ios

我们有一个网络服务功能，我们将音频文件上传到该功能以保存在服务器中。我用来创建音频文件内容的数据缓冲区（传递给 Web 服务）的代码是：

```
 NSURL *soundFileURL = [[NSURL alloc] initFileURLWithPath:fnWithSlash];
  audioData = [NSData dataWithContentsOfURL:soundFileURL];
  NSLog(@"audiodata%d",audioData.length); 
```

这里 fnWithSlash 包含文件的完整路径。但是 audioData.length 始终为 0。我错过了什么？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T01:20:35.670

尝试使用 NSData 的 dataWithContentsOfFile: 代替..如果文件在您的包中，它将类似于下面的示例，否则将声音文件的 filePath 构造到您想要的位置..

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"yourSound" ofType:@"wav"];  
audioData = [NSData dataWithContentsOfFile:filePath];
NSLog(@"audiodata%d",audioData.length); 
```

# java - 像使用接口一样使用第三方抽象类？

> ID：10778224
> 
> 赞同：4
> 
> 时间：2012-05-28T00:27:16.837
> 
> 标签：java, polymorphism

在我正在使用的第 3 方库中，有以下层次结构：

```
public abstract class Foo
{
    // Class is public in the Java sense and public in the library's API
}

public class FooImpl extends Foo
{
    // While this class is public in the Java sense, it is
    // NOT part of the public API and is not even documented
    // Library functions that hand back instances of this class
    // hand them back as type Foo
} 
```

库中的各种方法对类型的事物进行操作`Foo`。`Foo`文档说用户可以扩展`Foo`以进行具体实现，并且（显然）库提供了具体实现。

我对库提供的实现很满意，除了一种方法，我想改变一下它的行为。但是我所提供的等级制度让我绊倒了。

**如果** `Foo`是一个接口（它不是！），我会这样做：

```
public FooWrapper implements Foo
{
    private Foo wrappedImpl;

    public FooWrapper(Foo toBeWrapped) {
        wrappedImpl = toBeWrapped;
    }

    List<Whatever> methodIWantToTweak() {
        List<Whatever> list = wrappedImpl.methodIWantToTweak();
        do_something_to_list(list);
        return list;
    }

    Something methodThatsOk() {
        return wrappedImpl.methodThatsOk();
    }

    // similar delegations for remaining methods
} 
```

但由于它**不是**一个界面，所以我不能这样做，或者至少不能干净地做到这一点。

我唯一能想到的事情是：

1) 扩展 API-non-public 类 FooImpl 并覆盖我想要调整的方法。

2）做类似的事情：

```
public class FooWrapper extends Foo
{
    private Foo wrappedImpl;

    public FooWrapper(Foo toBeWrapped) {
        super();
        wrappedImpl = toBeWrapped;
    }

    List<Whatever> methodIWantToTweak() {
        List<Whatever> list = wrappedImpl.methodIWantToTweak();
        do_something_to_list(list);
        return list;
    }

    Something methodThatsOk() {
        return wrappedImpl.methodThatsOk();
    }

    // Override all non-final public, protected, and package-local
    // methods and delegate them to wrappedImpl
} 
```

这两种方法对我来说都闻起来很糟糕。第一个问题是它依赖于一个它不应该知道的类，并且可以在库的未来版本中更改/消失/重命名。第二个问题是超类部分`FooWrapper`实际上并没有被使用，并且不可能覆盖任何最终或私有方法`Foo`（这将导致问题，因为在这些情况下无法委托给`wrappedImpl`）。

我想我必须采用第一种方法，因为至少它会给出正确的行为，而第二种方法可能会以潜在的邪恶、微妙的方式被破坏，具体取决于`Foo`.

那我是不是运气不好？我忽略了哪些其他方法/想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T00:38:03.693

如果您不需要覆盖任何`Foo`' 最终或受保护（见下文）方法，我会采用第二种方法：`Foo`视为接口并在这种情况下执行您要执行的操作。优点是您不依赖于`FooImpl`可以改变的东西。

`final`和`private`方法`Foo`都不是问题，因为无论如何您都无法覆盖其中的那些`FooImpl`或如果`Foo`是接口。另外，我认为您的意思是`protected`代替`private`.

如果您*确实*需要覆盖`protected`方法，则需要使用第一种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T00:38:20.140

我想不出任何其他方法不会更臭！（反射会起作用，但在这种情况下，它会比你试图避免的问题更糟糕。）

我认为第二种方法是最好的。如果`Foo`抽象类被设计为公共类，那么它*不应该*有可能会绊倒你的讨厌的内部细节。如果是这样，他们的设计就错了。

请注意，由于您正在为“真实” Foo 实例创建包装类：

*   您可能会忽略抽象类为“真正的” Foo 子类提供的大部分功能。

*   您可能会忽略由 Foo 级属性表示的任何状态。

*   您可以在 API 中删除不需要在应用程序中使用的方法；例如，对它们进行编码以抛出`UnsupportedOperationException`.

所有这些都有助于降低问题的复杂性。

# python - 使用python递归创建硬链接

> ID：10778229
> 
> 赞同：16
> 
> 时间：2012-05-28T00:28:11.333
> 
> 标签：python, directory, directory-structure, hardlink

我基本上想做的是`cp -Rl dir1 dir2`。但据我了解，python 仅提供`shutils.copytree(src,dst)`实际复制文件的内容，但不可能硬链接文件。

我知道我可以`cp`使用模块调用命令`subprocess`，但我宁愿找到一种更清洁的（pythonic）方法来做到这一点。

那么有没有一种简单的方法可以做到这一点，还是我必须自己通过目录递归来实现它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-28T03:07:03.933

你只需要调用`os.system("cp -Rl dir1 dir2")`，不需要手写你自己的函数。

**已编辑**：因为您想在 python 中执行此操作。

你是对的：它在模块中可用[`shutil`](https://docs.python.org/3.8/library/shutil.html?highlight=shutil#shutil.copytree)：

```
shutil.copytree(src, dst, copy_function=os.link) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-28T08:23:22.580

这是一个纯 python 硬拷贝函数。应该与`cp -Rl src dst`

```
import os
from os.path import join, abspath

def hardcopy(src, dst):
    working_dir = os.getcwd()
    dest = abspath(dst)
    os.mkdir(dst)
    os.chdir(src)
    for root, dirs, files in os.walk('.'):
        curdest = join(dst, root)
        for d in dirs:
            os.mkdir(join(curdst, d))
        for f in files:
            fromfile = join(root, f)
            to = join(curdst, f)
            os.link(fromfile, to)
    os.chdir(working_dir) 
```

# c# - 文件归档库/API？

> ID：10778231
> 
> 赞同：1
> 
> 时间：2012-05-28T00:28:29.050
> 
> 标签：c#, .net, file, archive

我正在制作一个文档将依赖于资源的应用程序，我希望将它们嵌入到一个文件中。我没有创建新格式，而是想知道是否已经存在一个库或 API 来创建嵌入了其他文件的文件。它是什么格式并不重要，但我正在寻找一种：

1.  选项加​​密或不加密
2.  可以判断现有文件是否已加密。
3.  让我为它制作自己的文件扩展名，而不是使用为该格式创建的文件扩展名。
4.  适用于 .NET 3.5

有没有你们会推荐的库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T01:06:05.947

您可以使用[DotNetZip](http://dotnetzip.codeplex.com/)库，这里是使用 AES 加密的示例

```
using (ZipFile zip = new ZipFile())
{
  zip.AddFile("ReadMe.txt"); // no password for this one
  zip.Password= "Cool.Hand.Luke!";
  zip.Encryption= EncryptionAlgorithm.WinZipAes256;
  zip.AddFile("Rawdata-2008-12-18.csv");
  zip.Save("Backup-AES-Encrypted.zip");
} 
```

示例来自[此](http://cheeso.members.winisp.net/DotNetZipHelp/Examples.htm)页面，保存时您可以使用所需的任何扩展名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T00:55:27.400

我不确定“创建自己的格式”是什么意思。

归档/加密文件有很多方法。您可以结合使用这些方法。首先加密你想写的任何东西，然后使用 API 来写它们。

以下是创建档案的一些资源：

[http://weblogs.asp.net/jgalloway/archive/2007/10/25/creating-zip-archives-in-net-without-an-external-library-like-sharpziplib.aspx](http://weblogs.asp.net/jgalloway/archive/2007/10/25/creating-zip-archives-in-net-without-an-external-library-like-sharpziplib.aspx)

对于加密，您可以使用 RSA。将 your_rsa_key 替换为您的 RSA 密钥。

```
var provider = new System.Security.Cryptography.RSACryptoServiceProvider();
provider.ImportParameters(your_rsa_key);

var encryptedBytes = provider.Encrypt(
    System.Text.Encoding.UTF8.GetBytes("Hello World!"), true);

string decryptedTest = System.Text.Encoding.UTF8.GetString(
    provider.Decrypt(encryptedBytes, true)); 
```

# django - 设置 mysql 数据库时出现“ImportError: ... Expected in: flat namespace”

> ID：10778238
> 
> 赞同：0
> 
> 时间：2012-05-28T00:29:19.470
> 
> 标签：django, terminal, python-2.7, mysql-python, enthought

mySQL 似乎启动并运行得很好。但是当我尝试将 MySQLdb 导入 python 时，我得到一个`ImportError: ... Expected in: flat namespace`. 我认为这与python有两个不同的版本有关（两个不同的目录，相同的版本）

操作系统：Mac 10.6.8

```
$ ls /Library/Frameworks/Python.framework/Versions/
7.2 Current

$ which python
/Library/Frameworks/Python.framework/Versions/Current/bin/python

$ echo $PATH
/Library/Frameworks/Python.framework/Versions/Current/bin:/Library/Frameworks/Python.framework/Versions/2.7/bin:/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/usr/X11/bin

$ easy_install MySQL-python
...
...
Using /Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.5-i386.egg
...

$ mysql.server start
Starting MySQL
.. SUCCESS!

$ python manage.py runserver
...
...
django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: dlopen(/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.5-i386.egg/_mysql.so, 2): Symbol not found: _mysql_affected_rows
  Referenced from: /Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.5-i386.egg/_mysql.so
  Expected in: flat namespace
 in /Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.5-i386.egg/_mysql.so

$ python
Enthought Python Distribution (EPD) free version -- www.enthought.com
Version: 7.2-2 (32-bit)

>>> import MySQLdb
...
...
ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.5-i386.egg/_mysql.so, 2): Symbol not found: _mysql_affected_rows
  Referenced from: /Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.5-i386.egg/_mysql.so
  Expected in: flat namespace
 in /Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.5-i386.egg/_mysql.so 
```

因此，除了对 django 和 python 不熟悉之外，我对使用终端也很陌生，而且我不确定我在看什么。

但我可以说很明显：

*   我有两个版本，7.2 和当前。
*   如果我调用 python，它将调用“当前”版本。这是有道理的，它在 $PATH 中。
*   但是，PATH 中还有一个 2.7 版（不是 7.2 版），我在安装 EDP 包时已将其删除。...我不完全了解 PATH 是什么或做什么，所以我不想开始改变事情
*   MySQL-python 安装在 7.2 版本
*   无法运行服务器，因为没有必要的文件`flat namespace`并且它也在安装位置

有什么方法可以解开这些路径（*如果*这是问题的话）

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:12:57.027

嗯......我认为它与python的“当前”和“7.2”版本没有任何关系。

完成后似乎已经修复了

```
pip uninstall MySQL-python
brew uninstall mysql
brew install mysql --universal
pip install MySQL-python 
```

我不确定是否有所不同`--universal`或使用 pip install 而不是 easy_install

# performance - mpi 程序仅在链接到 mpip 或 ipm 时才会产生错误结果

> ID：10778240
> 
> 赞同：0
> 
> 时间：2012-05-28T00:29:55.320
> 
> 标签：performance, parallel-processing, profiling, mpi

我正在尝试使用 mpip 和 ipm 来分析 MPI 程序。

该程序运行良好，但是当我将其与 ipm 或 mpip 链接以对其进行分析时，当我执行该程序时，我得到错误的结果。我试过编译有和没有优化的程序，但结果是一样的

我以前用过ipm没有问题。唯一的两个区别是以前我使用 C，现在我使用 Fortran 77，以前我只有一个源文件，所以我编译+链接如下：

```
mpicc my_mpi_code.c -o my_mpi_code -L/path/to/ipm/lib -lipm 
```

现在，由于我有数百个源文件，我首先编译（例如，使用 mpif77 -c -O2 file.f），然后才链接所有内容：

```
mpif77 -o mpi_prog.x mpi_prog.o libWithAllOFiles.a -L/path/to/ipm/lib -lipm 
```

我也尝试过这样的编译：

```
mpif77 -c -O2 -L/path/to/ipm/lib -lipm file.f 
```

但结果是一样的。

知道为什么会这样吗？mpip/ipm 对程序执行有什么影响？

提前致谢！

# objective-c - 使用 NSTimer 翻转 UISwitch

> ID：10778242
> 
> 赞同：1
> 
> 时间：2012-05-28T00:30:12.603
> 
> 标签：objective-c, cocoa-touch, nstimer

我正在尝试学习如何使用`NSTimer`s，我想到了以下几点： 创建一个开关。让计时器在应用程序开始时开始，并且在每一秒之后，都会调用一个更改开关状态的函数。

这是我到目前为止所做的：

我在头文件 ViewControl.h 中声明了定时器和开关：

```
//Timer 
{NSTimer *timer;}
@property (weak, nonatomic) IBOutlet UISwitch *zeSwitch; 
```

然后，在 ViewControl.m 文件中，我定义了以下内容：

```
- (IBAction)zeSwitch:(id)sender {
    UISwitch *zeSwitchSatus = (UISwitch *) sender;
    BOOL yn = zeSwitchSatus.isOn;
    [zeSwitch setOn:yn animated:YES];

}    

- (void)viewDidLoad
{

    timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self 
    selector:@selector(zeSwitch) userInfo:nil repeats:YES];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

所以我希望当我运行代码时，我会看到一个打开或关闭的开关。然后我会看到它随着时间的推移自动改变其状态，而无需我干预。

![图片！](../Images/d556b626314d258f0c4cb4b8d60cd76c.png)

但这没有用！我首先得到上面的图像。没有什么变化。然后当我按下开关时它崩溃了。（但我的想法是根本不碰它。）

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T00:39:02.683

你很接近。这里有一些问题。首先，您提供给计时器的方法被命名`zeSwitch:`——冒号很重要。所以你需要像这样创建计时器：

```
timer = [NSTimer scheduledTimerWithTimeInterval:1 
                                         target:self 
                                       selector:@selector(zeSwitch:) 
                                       userInfo:nil             //^ Note colon!
                                        repeats:YES]; 
```

不带冒号命名的方法`zeSwitch`实际上是开关的访问器方法，因为您已经命名了您的 property `zeSwitch`。你真的应该重命名计时器的操作方法来澄清这一点。现在，计时器每秒都在调用 switch 的访问器方法，这实际上并没有做任何事情。

接下来，计时器将*自己*传递给它调用的方法。中的`sender`参数`zeSwitch:`将是计时器，而不是开关。如果这个方法实际上是通过定时器调用的，你会遇到崩溃，因为你会发送`isOn`到定时器，而它不会响应。

你有一个开关的插座，所以你可以通过那个插座来引用它：

```
- (void)flipSwitch: (NSTimer *)tim
{
    BOOL switchIsOn = [[self zeSwitch] isOn]; 
```

请注意，我已经更正了此方法中的名称和类型——您还需要更改计时器的创建以反映这一点：`@selector(flipSwitch:)`.

第三，您想要翻转开关，因此您应该将其设置为与其当前状态*相反的状态。*下一行需要是：

```
 [[self zeSwitch] setOn:!switchIsOn animated:YES]; 
```

`!`操作员否定`BOOL`它所附加的，变成`YES`反之亦然`NO`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T00:37:13.553

1) 当你指定一个接受一个参数的选择器时，你需要在名字后面加一个冒号，所以`@selector(zeSwitch:)`.

2）由定时器触发的选择器获取定时器作为参数，而不是开关，所以`- (IBAction)zeSwitch:(NSTimer *)timer`.

# wpf - 将依赖属性添加到自定义控件内的特定控件

> ID：10778244
> 
> 赞同：1
> 
> 时间：2012-05-28T00:30:47.227
> 
> 标签：wpf, dependency-properties

我是 WPF MVVM 开发的初学者，只需要一些帮助。我只想知道如何在自定义控件或用户控件中的特定控件上添加依赖属性。

我有一个使用自定义自动完成控件 (UserAutoComplete) 的视图 (UserMaintenance)。

用户维护视图.xaml

```
 <myProject:UserAutoComplete ViewModel="{Binding ViewModel}" SelectedItem="{max:ValidationBinding SelectedCandidate}" IsRequired="True"/> 
```

用户自动完成.xaml

```
 <Controls:AutoCompleteTextBox
                        FontSize="11"
                        x:Name="PART_AutoCompleteTextBox"
                        SelectedItem="{Binding ViewModel.SelectedItem, Mode=TwoWay, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Controls:UserAutoComplete}}, Converter={StaticResource UserSelectorConverter}, ConverterParameter={x:Type Entities:User}, ValidatesOnDataErrors=True, ValidatesOnExceptions=True}"
                        Text="{Binding ViewModel.Text, Mode=TwoWay, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Controls:UserAutoComplete}}, UpdateSourceTrigger=PropertyChanged}"
                        ItemsSource="{Binding ViewModel.AutoCompleteItems, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Controls:UserAutoComplete}}}"
                        SearchCommand="{Binding ViewModel.AutoCompleteSearchCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Controls:UserAutoComplete}}}"
                        IsRequired="{TemplateBinding IsRequired}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        IsItemSelected="{Binding ViewModel.IsItemSelected, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Controls:UserAutoComplete}}}"
                        IsPickerOpen="{Binding ViewModel.IsPickerOpen, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Controls:UserAutoComplete}}, Mode=TwoWay}"
                        IsListOpen="{Binding ViewModel.IsListOpen, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Controls:UserAutoComplete}}, Mode=TwoWay}"
                        Focusable="True"
                        Behaviours:TextCapitalizationBehaviorBinding.TextCapitalization="Title"
                        IsReadOnly="{TemplateBinding IsReadOnly}"
                        DisplayMember="DisplayName">

                        <Controls:AutoCompleteTextBox.AutoCompleteColumns>
                            <telerik:GridViewDataColumn UniqueName="DisplayName" Header="Name" DataMemberBinding="{Binding DisplayName}" DataType="{x:Type System:String}" Width="0.4*">
                                <telerik:GridViewColumn.CellTemplate>
                                    <DataTemplate> 
                                        <TextBlock Text="{Binding DisplayName, Mode=OneTime}" Behaviours:HighlightTextBehaviorBinding.Regex="{Binding 
                                            RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Controls:UserAutoComplete}},  
                                            Converter={StaticResource RegexEscapeConverter}, 
                                            Path=ViewModel.LastAutoCompleteSearchText}"  />
                                    </DataTemplate>
                                </telerik:GridViewColumn.CellTemplate>
                            </telerik:GridViewDataColumn>
                            <telerik:GridViewDataColumn Header="Date of birth" DataMemberBinding="{Binding DateOfBirth}" DataType="{x:Type System:String}" Width="Auto">
                                <telerik:GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding DateOfBirth, StringFormat=' {0:d} ', Mode=OneWay}"  >
                                        </TextBlock>
                                    </DataTemplate>
                                </telerik:GridViewColumn.CellTemplate>
                            </telerik:GridViewDataColumn>
                            <telerik:GridViewDataColumn Header="Suburb" DataMemberBinding="{Binding Suburb}" DataType="{x:Type System:String}" Width="Auto">
                                <telerik:GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding Suburb, Mode=OneWay}"  >
                                        </TextBlock>
                                    </DataTemplate>
                                </telerik:GridViewColumn.CellTemplate>
                            </telerik:GridViewDataColumn>
                        </Controls:AutoCompleteTextBox.AutoCompleteColumns> 
```

现在，我想仅针对特定视图修改列的宽度和 Telerik GridViewDataColums 标题的背景颜色。

不用说，还有很多其他的视图也使用 UserAutoComplete，所以肯定触及 UserAutoComplete 代码并不是理想的解决方案。

所以这里出现了依赖属性。我的问题是我应该使用什么，正常的依赖属性还是附加的依赖？以及将依赖属性放在 UserControl 上的什么位置，或者我可以将它放在 View 中吗？

像这样的东西......

```
public class UserAutoComplete : AutoComplete
{

    public int WidthOfGridDataColumn
    {
        get { return (int)GetValue(WidthOfGridDataColumnProperty); }
        set { SetValue(WidthOfGridDataColumnProperty, value); }
    }

    // Using a DependencyProperty as the backing store for WidthOfGridDataColumn.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty WidthOfGridDataColumnProperty =
        DependencyProperty.Register("WidthOfGridDataColumn", typeof(int), typeof(ownerclass), new UIPropertyMetadata(0));

    public string BackgroundColorOfGridHeader
    {
        get { return (string)GetValue(BackgroundColorOfGridHeaderProperty); }
        set { SetValue(BackgroundColorOfGridHeaderProperty, value); }
    }

    // Using a DependencyProperty as the backing store for BackgroundColorOfGridHeader.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty BackgroundColorOfGridHeaderProperty =
        DependencyProperty.Register("BackgroundColorOfGridHeader", typeof(string), typeof(ownerclass), new UIPropertyMetadata(0));` 
```

提前致谢。

# c# - 当文件操作失败时，导致 Winforms 应用程序显示用户凭据对话框

> ID：10778246
> 
> 赞同：1
> 
> 时间：2012-05-28T00:31:11.780
> 
> 标签：c#, winforms, authentication, file-io

我有一个简单的更新程序，可以将文件从公司服务器复制到用户的机器上。

对于内部 LAN 上的大多数人来说，这没有问题，但是一些员工从 LAN 访问它，他们不会自动通过相关服务器进行身份验证。

通常尝试访问该服务器（例如通过资源管理器）只会抛出一个用户凭据对话框，要求用户提供可以访问共享目录的登录名。

在我的 Winforms 应用程序中，我只是使用诸如`File.Copy`移动文件之类的操作。

**我的应用程序如何使 Windows 提示进行身份验证，而不仅仅是抛出异常？**

我愿意自己做一些工作，但我真正希望的是 Windows 提供了一种实现这一点的方法。

否则，我正在考虑尝试访问并显示一条错误消息，指示用户使用资源管理器进行身份验证。

**有没有其他很好的方法来处理这个问题而无需为 50 行程序重新发明轮子？:-)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T00:43:07.923

您可以使用 shell API 来实现这一点（Windows Explorer 基于相同的 API） - 相反`File.Copy`，您可以 pinvoke [`SHFileOperation`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762164%28v=vs.85%29.aspx)。

# html - 优雅的 CSS 间距定位

> ID：10778251
> 
> 赞同：0
> 
> 时间：2012-05-28T00:32:21.050
> 
> 标签：html, css

假设我有以下 HTML：

```
<div id="Wrapper">
    <div class="MyClass"></div>
    <div class="MyClass"></div>
    <div class="MyClass"></div>
    <div class="MyClass"></div>
    <div class="MyClass"></div>
</div> 
```

和以下CSS：

```
.MyClass {
    float: left;
    margin-right: 5px;
} 
```

所有这些元素都将放置在一条线上，中间有 5px 的空间。问题是最后也会有5px的空间。我想让 Wrapper 真正包装`.MyClass`div，这样边缘就没有空间了。

现在我可以想到几种方法：

*   使用jquery，将最后一个元素的右边距设置为0。
*   使用 CSS 创建一个新类 -`.MyClassForLastElement`设置`marin-right`为 0。
*   为. `right-margin`_`.Wrapper`

我想知道是否有一种优雅而聪明的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T00:37:34.520

不确定是否有完美的解决方案，我曾经这样做过：

```
.MyClass {
    float: left;
    margin-left: 5px;
}
.MyClass:first-child {
    margin-left: 0;
} 
```

我这样做是`first-child`因为它在 IE6-7 中受支持，但`last-child`不支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T00:39:34.303

如果您不希望最后一个孩子`margin-right`使用`last-child`伪选择器。

```
.MyClass:last-child {
   margin-right: 0px;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T00:36:29.237

以下规则将提供预期的效果。第一个元素没有边距，但实际上任何连续的元素都会有`margin-left:5px;`.

```
.MyClass {
    float: left;
    margin: 0;
}
.MyClass + .MyClass {
    margin-left: 5px;
} 
```

跨浏览器得到很好的支持，IE7+

*相邻选择器匹配作为`+`另一个元素的下一个兄弟元素的元素，在上面的示例中，它是`.MyClass`另一个元素之后的`.MyClass`元素*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T05:53:24.197

像这样的选择器

```
.MyClass + .MyClass {
    margin-left: 5px;
} 
```

更多信息[http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)

# .net - 将带有凭据的网络路径解析为基类库类型

> ID：10778253
> 
> 赞同：0
> 
> 时间：2012-05-28T00:33:00.480
> 
> 标签：.net, uri, unc, networkcredentials

考虑以下简单 Windows 网络共享（SMB 协议）的 UNC 路径：

*   `\\host\share`

您可以轻松地创建一个实例，`System.Uri`或者`System.IO.DirectoryInfo`通过将该路径作为字符串传递给构造函数。

现在考虑以下两条路径，将所有安全问题放在一边：

*   `\\username@host\share`
*   `\\username:password@host\share`

您不能简单地将这些传递给 Uri 或 DirectoryInfo 构造函数，因为它们不知道如何处理这些路径，这些路径主要由 linux 系统使用。此外，即使他们这样做了，他们也很可能不会保留登录凭据。

最终，我想要一种将这些转换为`System.Uri`代表实际路径的实例的方法，以及`System.Net.NetworkCredential`存储登录信息的实例。

那么我该如何解决这个问题呢？我什至不知道从哪里开始。继承 from`System.UriParser`似乎是一个不错的起点，但根据 MSDN，不建议这样做。

> Microsoft 强烈建议您使用 .NET Framework 附带的解析器。构建自己的解析器会增加应用程序的复杂性，并且不会像交付的解析器那样执行。

谢谢。

**编辑**

简单的解决方案（如下所示）是假设“@”符号之前的所有内容都是登录凭据的一部分，而它之后的所有内容都是实际路径。但是，当文件名包含“@”符号时，这可能会出现问题。

`\\credential@host\path`： 没问题

`\\credential@host\path@mystorage`: 同样没问题，因为第一个 @ 之前的所有内容都是登录的一部分。

`\\host\path@mystorage`: 现在我们破产了。当作为参数传递时，这肯定会引发参数异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:37:53.817

如果这些是您需要处理的仅有的两个方案，那么扩展解析器似乎有点过头了。无论如何，制作自己的实用程序类会更容易。

如果它真的像你给出的两个例子一样简单，我会暴力破解它。制作一个简单的类，可以将路径拆分为其各自的组件（基于“@”的存在和位置）并分别创建 Uri 和 NetworkCredential。如果字符串不包含“@”，则 NetworkCredential 可以为空。

如果它比这更复杂，我可能会偏离基础，但这听起来像是一个简单的解决方案可能会很好的时候。

请原谅我草率的代码，它不是完全容错的，但它应该说明问题。

```
Public Class CredentialedPath

    Public Property Uri As Uri
    Public Property Credential As NetworkCredential

    Public Shared Function GetFromString(ByVal path As String) As CredentialedPath

        Dim CP As CredentialedPath = New CredentialedPath()

        Dim pathParts() As String = path.Split("@"c)

        If pathParts.Length > 1 Then

            CP.Uri = New System.Uri("\\" & pathParts(1))

            Dim credParts() As String = pathParts(0).TrimStart("\"c).Split(":"c)
            CP.Credential = New NetworkCredential()
            CP.Credential.UserName = credParts(0)
            If (credParts.Length > 1) Then
                CP.Credential.Password = credParts(1)
            End If

        Else
            CP.Uri = New System.Uri(path)
        End If

        Return CP

    End Function

End Class 
```

# c++ - 如何访问内存映射的 USB 主机控制器寄存器？

> ID：10778254
> 
> 赞同：1
> 
> 时间：2012-05-28T00:33:15.537
> 
> 标签：c++, windows-7, usb

我正在尝试读取 USB 主机控制器的内存映射寄存器。据我了解，寄存器的内容应该从某个地址开始放入内存中，该地址可以从控制器的 PCI 配置寄存器（特别是 USBBASE）中检索。

我设法得到了这个地址，它似乎是有效的。至少它等于我可以通过珠穆朗玛峰得到的。问题是任何使用此地址从内存中读取数据的尝试都会导致“访问冲突”错误。像 memcpy 这样的东西是行不通的。也许有人知道读取主机控制器功能寄存器和主机控制器操作寄存器的方法？提前致谢。PS。我正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T20:19:43.557

好吧，似乎至少在 x64 系统上，如果不使用任何特殊库就无法实现。使用 x32 系统可能会更容易，但我没有尝试过。无论如何，这样的事情不适用于用户空间程序。PS。写这个只是为了关闭线程。

# jquery - 在 mouseenter 上附加 div

> ID：10778271
> 
> 赞同：0
> 
> 时间：2012-05-28T00:37:42.863
> 
> 标签：jquery

基本上，我想将一个 div 附加到 mouseenter 上的一个元素，然后在同一 parent`li`的另一个元素的 mouseenter 上附加一个单独的 div 。所以如果一个悬停，追加，然后如果另一个悬停，追加。`li``ul``li``#div1``li``#div2`

这是我到目前为止所拥有的

```
$('ul > li').mouseenter(function (){
      $('#div1').appendTo(this);

      if (('ul > li').mouseenter().not(this)){
         $('#div2')appendTo(this);
      }
}); 
```

这仅附加`#div1`到悬停的`li`. `#div2`如果另一个`li`悬停，我该如何追加？选择`.not()`器似乎不起作用。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T00:41:07.993

我建议如下：

```
$('li').mouseenter(
    function(){
        var that = $(this),
            i = that.index();
        if (i == 0){
            $('#div1').appendTo(that);
        }
        else {
            $('#div2').appendTo(that);
        }
    }); 
```

以上是基于您希望附加`#div1`到第一个`li`和`#div2`所有其他`li`元素的假设。

* * *

**针对 OP 的评论进行了编辑**（左下方）：

> 我实际上想在 mouseenter 上附加 #div1 然后如果另一个 li 悬停，我想将 #div2 附加到 #div1 附加到的同一个 li 上。

```
$('li').mouseenter(
    function(){
        var that = $(this),
            i = that.index();
        if (i == 0){
            $('#div1').appendTo(that);
        }
        else {
            $('#div2').appendTo($('#div1').closest('li'));
        }
    }) 
```

参考：

*   [`appendTo()`](http://api.jquery.com/appendTo/).
*   [`closest()`](http://api.jquery.com/closest/).
*   [`index()`](http://api.jquery.com/index/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T03:30:46.637

或者，您可以将 div 放在`li`元素内，`display:none`然后在鼠标悬停时显示它们。你可以淡入/等..

**CSS**

```
li div {display:none} 
```

**HTML**

```
<ul>
<li>Whatever <div>the div </div></li>
<li>Whatever 2<div>the div 2</div></li>
<li>Whatever 3<div>the div 3</div></li>
</ul> 
```

**JS**

```
$('li').mouseenter(
function(){
    $('div', this).show(); //
}); 
```

# objective-c - 选中/取消选中带有部分的 tableviewcell

> ID：10778279
> 
> 赞同：0
> 
> 时间：2012-05-28T00:39:44.023
> 
> 标签：objective-c, ios, xcode, uitableview, didselectrowatindexpath

以前，我在表格视图中显示了一个大型数据集（约 530 条记录）。数据保存在具有两个键 ID 和名称的字典数组中。以前，我点击了一个单元格，它添加了一个复选标记，并将单元格行号发送到“selectedArray”。因为我已经按字母顺序对它们进行了排序（仍然在一个部分中），所以存储在 selectedArray 中的 indexPath.row 对应于字典的数组索引，因此我可以从记录中提取数据（ID）。

我决定按字母顺序将其拆分为标题（这绝对是一种痛苦，我不明白为什么将标题插入记录列表是一个如此复杂的过程）。但是现在，由于我只使用了indexPath.row，所以当我勾选第一个时，它会勾选每个部分的第一条记录，并且只返回数字0，所以我只获取整个数据集中的第一条记录。有没有一种简单的方法来纠正这个问题？非常感谢任何帮助。

**cellForRowAtIndexPath：**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"inviteCell"];

//    cell.accessoryType = UITableViewCellAccessoryCheckmark;

    if ([checkedCells objectForKey:[NSNumber numberWithInt:indexPath.row]] != nil) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
    else
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }

//    NSDictionary *friend = [sortedFriendsArray objectAtIndex:indexPath.row];

    //---get the letter in the current section---
    NSString *alphabet = [nameIndex objectAtIndex:[indexPath section]];
    //---get all states beginning with the letter---
    NSPredicate *predicate =
    [NSPredicate predicateWithFormat:@"SELF.name beginswith[c] %@", alphabet];
    NSArray *states = [sortedFriendsArray filteredArrayUsingPredicate:predicate];
    if ([states count]>0) {
//---extract the relevant state from the states object---

        NSDictionary *friend = [states objectAtIndex:indexPath.row];
        long long fbid = [[friend objectForKey:@"id"]longLongValue];
        NSString *name = [friend objectForKey:@"name"];

        NSString *urlString = [NSString stringWithFormat:@"https://graph.facebook.com/%qi/picture?type=square",fbid];
        NSURL *url = [NSURL URLWithString:urlString];

        UILabel *eventNameLabel = (UILabel *) [cell viewWithTag:1];
        eventNameLabel.text = name;

        UIImageView *eventLogo = (UIImageView*) [cell viewWithTag:2];
        eventLogo.image = [UIImage imageNamed:@"112-group.png"];
        //    eventLogo.image = [UIImage imageWithData: [NSData dataWithContentsOfURL:url]];;

    }

        return cell;

} 
```

**当前 didSelectRowAtIndexPath:**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    NSNumber *indexNumber = [NSNumber numberWithInt:indexPath.row];
    NSDictionary *friend = [sortedFriendsArray objectAtIndex:indexPath.row];
    long long fbid = [[friend objectForKey:@"id"]longLongValue];
    NSNumber *fbidNum = [NSNumber numberWithLongLong:fbid];

    if ([checkedCells objectForKey:indexNumber] != nil) {
        [checkedCells removeObjectForKey:indexNumber];
        cell.accessoryType = UITableViewCellAccessoryNone;

    }
    else
    {
        [checkedCells setObject:fbidNum forKey:indexNumber];
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }

    NSLog(@"Cell Pressed: %@",indexNumber);
    NSLog(@"FBID: %lld",fbid);
    NSLog(@"Array: %@",checkedCells);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T03:28:15.587

看起来您只是按行保存选中的单元格，而不是按部分和行。至少，您不需要测试这段代码中的部分和行吗？

```
if ([checkedCells objectForKey:[NSNumber numberWithInt:indexPath.row]] != nil) {
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
}
else
{
    cell.accessoryType = UITableViewCellAccessoryNone;
} 
```

已经很晚了，我没有方便的 Mac 来尝试这段代码，所以我可能遗漏了一些明显的东西。我不确定你在说什么只返回零……那是 indexPath.row 吗？

编辑：

为了说明数据数组中的部分，我建议将数据存储为数组字典，一个字典条目由每个字母键入，内部数组包含以该字母开头的所有条目。检索数据有点复杂，但它正确地解释了该部分。

我想你可以创建某种偏移量来计算每个部分中的条目数，然后使用它来索引一个平面数组，但在我看来，这将更难维护。我认为数组字典是要走的路。

# c# - 如何更改 configSections、section、type 元素？具体版本

> ID：10778287
> 
> 赞同：1
> 
> 时间：2012-05-28T00:42:15.257
> 
> 标签：c#, configuration, configsection

我在这里和 CodeProject 发布我的问题，作为关于配置文件之谜的著名文章系列的[问题。](http://www.codeproject.com/Messages/4263716/Customizing-section-tag-type-attribute.aspx)

来自文章：

> 如果您希望确保在解析 .config 文件时只搜索特定版本的程序集，您可以选择指定文化、版本和公钥（用于签名程序集）值。

我正在使用以下代码打开并初始化配置文件：

```
ExeConfigurationFileMap fileMap = new ExeConfigurationFileMap();
fileMap.ExeConfigFilename = path;
config = ConfigurationManager.OpenMappedExeConfiguration(fileMap, ConfigurationUserLevel.None);
section = (OptionsSection)config.GetSection("myoptionsdata");
if (section == null)
{
    section = new OptionsSection(0, "aaaa", "bbbb", "cccc",14);
    config.Sections.Add("myoptionsdata", section);
    config.Save(ConfigurationSaveMode.Full);
} 
```

这将创建以下内容：

```
<configSections>
    <section name="myoptionsdata" type="my.namespace.OptionsSection, myAssembly,
      Version=1.0.3.0, Culture=neutral, PublicKeyToken=111222aaaabbb"
      allowLocation="true" allowDefinition="Everywhere"
      allowExeDefinition="MachineToApplication" overrideModeDefault="Allow"
      restartOnExternalChanges="true" requirePermission="true" />
</configSections> 
```

请注意“类型”如何具有版本、文化和 PublicKeyToken。我需要消除这些，或者至少是版本。问题是我使用特定版本部署应用程序，然后我升级版本并发布更新。但是当对配置进行读取时，它会失败，因为版本是明确的。

所以我真正想要的是：

```
<configSections>
    <section name="myoptionsdata" type="my.namespace.OptionsSection, myAssembly" />
</configSections> 
```

我从未见过包含扩展类型值的示例。每个示例都显示 Save() 创建 type="namespace.class,assembly"，但这似乎不是默认行为。

那么，参考上面的报价，我在哪里可以找到有关管理这些“可选”值的信息？

对于任何使用谷歌搜索的人，这是导致以下臭名昭著错误的原因之一：

> 异常：为 myoptionsdata 创建配置节处理程序时出错：无法加载文件或程序集“myAssembly，Version=1.0.3.0，Culture=neutral，PublicKeyToken=111222aaaabbb”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）（C:\Users\me\AppData\Roaming\product\dir\name.config 第 4 行）

我相信我的问题与[迄今为止](https://stackoverflow.com/questions/9001758)尚未收到任何回复的问题类似。

“关闭菜单”，我只想将配置文件部署到特定位置（非默认）并允许用户以工具>选项形式设置选项。大多数应用程序都这样做。有没有简单且普遍接受的方法来做到这一点？我应该注意我的应用程序是 Outlook 插件，我这样做是因为我想将插件设置存储在插件特定的配置文件中，而不是 Outlook 配置附近的任何地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T00:56:27.460

包含您的自定义配置部分的程序集具有强名称。对程序集进行强命名会显式阻止您想要进行的那种就地版本升级。从该程序集中删除强名称，程序集加载器将不再关心它是什么版本。

# nginx - 为什么nginx会在原始http请求后面加上斜杠？

> ID：10778289
> 
> 赞同：1
> 
> 时间：2012-05-28T00:42:33.137
> 
> 标签：nginx

是什么让 nginx 在我的请求中添加尾随 /？目前这似乎打破了他们。

```
 location ^~ /custom/ {
    location  = /custom/.*\.css$ {
    alias /var/www/custom
    }

  alias /var/www/custom;
  include uwsgi_params;
  uwsgi_param REDIRECT_STATUS 200;
  uwsgi_modifier1 9;
  uwsgi_pass 127.0.0.1:3031;
} 
```

这个配置至少有两个问题：

*   如果您请求类似`/custom/xxx.css`服务器的请求，则会将请求发送到 uwsgi
*   发送到 uwsgi 的请求将是`/custom/xxx.css/`- 并且这个额外的斜杠将确保事件 uwsgi 不会返回文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:18:54.210

您使用的语法将强制每个请求转到 uwsgi。

你应该把

```
location  = /custom/.*\.css$ 
```

在......之外

```
location ^~ /custom/ 
```

# javascript - 用Javascript移动光标位置？

> ID：10778291
> 
> 赞同：13
> 
> 时间：2012-05-28T00:42:58.400
> 
> 标签：javascript, contenteditable, caret

我希望将插入符号恰好移动到其当前位置之前的四个空格，以便我可以正确插入标签。我已经在插入符号的位置插入了 HTML，但是当我插入 HTML 时，插入符号被留下了。在过去的一个小时左右，我一直在寻找各种方法来做到这一点，并且我已经尝试了很多方法，但我无法让它们中的任何一个为我工作。这是我尝试过的最新方法：

```
function moveCaret(input, distance) {
    if(input.setSelectionRange) {
        input.focus();
        input.setSelectionRange(distance, distance);
    } else if(input.createTextRange) {
        var range = input.createTextRange();
        range.collapse(true);
        range.moveEnd(distance);
        range.moveStart(distance);
        range.select();
    }
} 
```

它绝对什么都不做——不移动插入符号，不抛出任何错误或任何东西。这让我很困惑。是的，我知道上面的方法 set （应该）将插入符号设置在指定节点（即`input`）开头的某个位置，但即使这样也不起作用。那么，我到底做错了什么，我该如何做对呢？

* * *

编辑：根据 ov 提供的链接，我设法将一些东西拼凑在一起，最终做了一些事情：抛出错误。耶！这是新代码：

```
this.moveCaret = function(distance) {
    if(that.win.getSelection) {
        var range = that.win.getSelection().getRangeAt(0);
        range.setStart(range.startOffset + distance);
    } else if (that.win.document.selection) {
        var range = that.win.document.selection.createRange();
        range.setStart(range.startOffset + distance);
    }
} 
```

现在，这给出了错误`Uncaught Error: NOT_FOUND_ERR: DOM Exception 8`。任何想法为什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-28T09:19:09.430

您拥有的代码片段用于文本输入和文本区域，而不是`contenteditable`元素。

如果您的所有内容都在单个文本节点中并且选择完全包含在其中，则以下内容将适用于所有主要浏览器，包括 IE 6。

演示：http: [//jsfiddle.net/9sdrZ/](http://jsfiddle.net/9sdrZ/)

代码：

```
function moveCaret(win, charCount) {
    var sel, range;
    if (win.getSelection) {
        // IE9+ and other browsers
        sel = win.getSelection();
        if (sel.rangeCount > 0) {
            var textNode = sel.focusNode;
            var newOffset = sel.focusOffset + charCount;
            sel.collapse(textNode, Math.min(textNode.length, newOffset));
        }
    } else if ( (sel = win.document.selection) ) {
        // IE <= 8
        if (sel.type != "Control") {
            range = sel.createRange();
            range.move("character", charCount);
            range.select();
        }
    }
} 
```

# javascript - 在 Google Charts (Gauge) 中使用变量作为值

> ID：10778294
> 
> 赞同：2
> 
> 时间：2012-05-28T00:43:49.150
> 
> 标签：javascript, arrays, json, google-visualization

我正在尝试动态更新 Google Charts Gauge 中的值，但是当我尝试使用变量作为值时，它会中断。

```
var data = google.visualization.arrayToDataTable([
    ['Label', 'Value'],
    //Doesn't work:
    ['Barometer', x],
    //Works:
    [x, 28],
    //Works:
    ['Barometer', 28]
    ]); 
```

我认为问题在于我声明变量的方式，因为当我只使用 时`var x=28`，它工作正常。这是我用来获取变量的代码：它使用 Jquery 来获取 JSON 文件，并从文件中获取一个值：

```
var x
    $.getJSON('http://pipes.yahoo.com/pipes/pipe.run?_id=467a55b506ba06b9ca364b1403880b65&_render=json&textinput1=40.78158&textinput2=-73.96648&_callback=?',
        function(data){
            x = data.value.items[0].data[1].parameters.pressure.value;
        }
    ) 
```

我尝试使用`x = eval(x)`，但它仍然无法正常工作。但是，当我使用`x = eval(x+1-1)`or`x = x+1-1`时，仪表出现了，但值为**NaN**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:47:30.723

好的，解决了。

我最终**在**加载 Google Charts API 之前定义了变量，然后，在定义变量之前，我添加了`x = eval(x)`.

所以这是最终的简化代码：

```
var x
$.getJSON('insert JSON url here WITH QUOTES',
    function(data){
        x = path.to.something.in.JSON.file.here;
    }

google.load('visualization', '1', {
    packages: ['gauge']
});
google.setOnLoadCallback(drawChart);

function drawChart() {

    x = eval(x)
    var Data = google.visualization.arrayToDataTable([
        ['Label', 'Value'],
        ['Gauge', x],
        ]);

    var Options = {
    };

    var Chart = new google.visualization.Gauge(document.getElementById('insertGaugeContainerHere'));
    Chart.draw(Data, Options);
} 
```

如果您想知道，最终产品位于[此处](http://jsfiddle.net/iansan5653/7EPjH/16/)。

# c++ - 将字符串转换为 boost::date 及前后

> ID：10778297
> 
> 赞同：1
> 
> 时间：2012-05-28T00:44:02.357
> 
> 标签：c++, boost

我有以下日期：

```
std::string sdt("2011-01-03"); 
```

我编写了以下 2 个函数并使用以下方法调用它们：

```
 date test;
  string_to_date(sdt,test);
  date_to_string(test,sdt); 
```

`string_to_date()`作品，它应该返回 ，`2011-Jan-03`而`date_to_string()` 返回

```
not-a-date-time 
```

这些是功能：

```
void string_to_date(const std::string& st, date out)
{
  std::string in=st.substr(0,10);
  date d1(from_simple_string(std::string (in.begin(), in.end())));
  std::cout<<d1;
  out=d1;
}

void date_to_string(date in, const std::string& out)
{

  date_facet* facet(new date_facet("%Y-%m-%d"));
  std::cout.imbue(std::locale(std::cout.getloc(), facet));
  std::cout<<in<<std::endl;

    out=in;//this doesn't work

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T00:52:08.453

```
void date_to_string(date in, std::string& out)
{
    std::ostringstream str;
    date_facet* facet(new date_facet("%Y-%m-%d"));
    str.imbue(std::locale(str.getloc(), facet));
    str << in;

    out = str.str();
} 
```

应该管用。注意`const`从`out`参数中删除。是否有理由不简单地返回生成的字符串？

# c++ - Qt 4.7 Symbols not found 错误

> ID：10778299
> 
> 赞同：0
> 
> 时间：2012-05-28T00:44:42.917
> 
> 标签：c++, qt, qt4.7

谁能向我解释这个错误？这似乎是 moc 发生的错误：

```
Undefined symbols:
make: Leaving directory `/Users/Dylan/Documents/programming/qt/Clock-build-desktop'
  "ClockDelegate::ClockDelegate(QObject*)", referenced from:
      AnalogClockDelegate::AnalogClockDelegate(QObject*)in AnalogClockDelegate.o
ld: symbol(s) not found
collect2: ld returned 1 exit status
make: *** [Clock.app/Contents/MacOS/Clock] Error 1
The process "/usr/bin/make" exited with code 2.
Error while building project Clock (target: Desktop)
When executing build step 'Make' 
```

时钟委托：

```
#ifndef CLOCKDELEGATE_H
#define CLOCKDELEGATE_H

#include <QObject>

class QTime;
class QWidget;

class ClockDelegate : public QObject
{
    Q_OBJECT

public:

    explicit ClockDelegate(QObject *parent);

    virtual void paintClock(QWidget *, QTime *) = 0;
};

#endif // CLOCKDELEGATE_H 
```

模拟时钟委托：

```
#ifndef ANALOGCLOCKDELEGATE_H
#define ANALOGCLOCKDELEGATE_H

#include <QColor>
#include <QPoint>

#include "ClockDelegate.h"

class QWidget;

class AnalogClockDelegate : public ClockDelegate
{
    Q_OBJECT

public:

    explicit AnalogClockDelegate(QObject *parent);

    void paintClock(QWidget *, QTime *);

private:

    void setupClockHands();

    void drawClockSurface(QWidget *clockView, QTime *);

    void drawHourComponent(QWidget *clockView);

    void drawMinuteComponent(QWidget *clockView, QTime *);

    void drawSecondComponent(QWidget *clockView, QTime *);

    QPoint   m_center;
    QPoint   m_hourHand[3];
    QPoint   m_minuteHand[3];
    QPoint   m_secondHand[2];

    QColor   m_hourColor;
    QColor   m_minuteColor;
    QColor   m_secondColor;
    QColor   m_clockFaceColor;
};

#endif // ANALOGCLOCKDELEGATE_H 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T00:47:59.533

假设 ClockDelegate 是 QObject，我认为您缺少“public”关键字。否则你不是从 QObject 派生的，所以你不能使用 Q_OBJECT。

```
class AnalogClockDelegate : public ClockDelegate 
```

# java - HttpSession request.getSession(false)

> ID：10778300
> 
> 赞同：3
> 
> 时间：2012-05-28T00:46:26.003
> 
> 标签：java, session, glassfish

我有个问题。在我`servlet`的 glassfish 中，我调用了方法`request.getSession(false)`。它应该`return null`。但相反，总是有一个`session`返回。而且，如果我`invalidate`在`session`调用之前对`getSession(false)`-它`returns null`。这意味着其他东西创造了`session`！那会是什么？`servlet`是从 .jsp 页面重定向的。我正在使用玻璃鱼。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T00:49:07.993

您是否在 JSP 中禁用了会话？在您的 jsp 顶部：

```
<%@ page language="java" session="false"%> 
```

# ruby - Bundler 1.2.0 ruby 版本检查是否不需要基本的 .rvmrc 文件？

> ID：10778304
> 
> 赞同：2
> 
> 时间：2012-05-28T00:46:50.983
> 
> 标签：ruby, rvm, bundler

Bundler 1.2.0.pre 包含一个新的“ruby”DSL 选项。根据[Heroku 的文档](https://devcenter.heroku.com/articles/ruby-versions)，他们使用这种新的 Gemfile 语法来控制在推送应用程序时使用哪个 ruby​​ 版本。

作为预发布版本，新的 Bundler 选项的文档目前相当薄弱，[Bundler 1.2 路线图](https://gist.github.com/1228013)只是将其列为“ruby 版本检查”。

我的问题是：目前我在大多数项目中使用单行 .rvmrc 文件，其中我只指定该项目的 ruby​​ 版本（例如。`rvm ruby-1.9.3`）。我不使用 RVM gemset 或其他任何东西（我更喜欢在项目中提供所有必需的 gem，并让 Bundler 管理依赖项）。

鉴于我简单的 RVM 配置，Bundler 的 DSL 中的新“ruby”选项是否意味着我不再需要指定 .rvmrc 文件？还是它们是两种不同的东西？

（我确实喜欢当我 cd 进入我的项目时 RVM 会自动切换 ruby​​ 版本的事实......不确定 Bundler 是否会这样做，或者它是否只是在当前版本不匹配时发出警告？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T21:00:54.487

the new `ruby` is a function and it will allow anything that finally evaluates to a string.

Unfortunately o read it you would need to use a `bundler` command which assumes you already have a ruby.

Instead RVM gives you two ways to defining ruby in `Gemfile`:

1) `ruby "1.9.3"` - simple strings

2) `#ruby=1.9.3-p125` - a comment when you want to use ruby code for `ruby` or when you want to specify patchlevel or gemset!:

```
#ruby=1.9.3
ruby ENV['RUBY_VERSION'] || '1.9.3' 
```

Will allow bundler to work with any ruby loaded by RVM but by default will use **1.9.3** from `#ruby=`

# asp.net - 如何从我的解决方案的构建序列中删除 DBProject

> ID：10778305
> 
> 赞同：1
> 
> 时间：2012-05-28T00:47:12.103
> 
> 标签：asp.net, visual-studio, debugging

每当我尝试通过按 F5 来调试我的 Web 项目时，DBProj 也会重新构建和部署。部署方面需要时间，我想避免这种情况。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T01:02:45.137

在 Visual Studio 上，找到带有“调试、发布、配置管理器”的组合框

选择“配置管理器”，将弹出一个窗口，取消选中您不想构建的项目，瞧。

![在此处输入图像描述](../Images/db03de35182e3eccb6da587f3f506d94.png)

# c# - VSTO C# Powerpoint 拆分按钮

> ID：10778306
> 
> 赞同：1
> 
> 时间：2012-05-28T00:47:24.283
> 
> 标签：c#, vsto

我是 VSTO 和 C# 的新手，对拆分按钮有疑问。我正在尝试创建一个拆分按钮“插入幻灯片”，就像默认的 Microsoft 创建的按钮“新幻灯片”一样。

如果有人点击该按钮，它会插入一张带有我的自定义模板的空白幻灯片（这部分对我来说很好用）。如果我单击下拉菜单，我想查看几个类别（例如：幻灯片组 A、幻灯片组 B 等）。在每个类别中都有一系列幻灯片（幻灯片组 A 有一堆不同的幻灯片模板）。我为它的外观创建了一些图片，但我还不能发布图片，所以我会尽力描述它们。如果您参考“新幻灯片”下拉菜单，我希望它看起来像这样。

我想动态构建菜单，以便根据指定目录中的文件夹名称创建所有组名，以便从该特定文件夹中提取要插入的幻灯片。如果您参考“新幻灯片”下拉菜单，则会有标题（如“Office THEme”，但使用我的文件夹名称），然后是一系列幻灯片，下面是文件夹中的所有幻灯片。

如果有人能给我指出正确的方向，我需要做什么来完成这项工作（我不需要你为我写代码；如果你能给我一个高层次的感觉，我会做什么需要执行此操作）我将不胜感激。此外，如果您可以为 Powerpoint 推荐 VSTO 资源，那就太好了（我一直在寻找所有资源，除了 Powerpoint 之外的所有资源！）。如果不清楚，请告诉我；我可以通过电子邮件提供模型图片以防万一。

谢谢，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:43:20.293

您可以使用图库控件而不是拆分按钮。此控件具有 getItemImage、getItemLabel、GetItemCount 等回调函数，可帮助您动态构建菜单。

这是我发现的一个使用 Excel 2007 的[示例](http://msdn.microsoft.com/en-us/library/dd756403%28v=office.12%29.aspx)，您可以按照 PowerPoint 操作

# php - 在 y 轴高位图上显示 HH:MM

> ID：10778307
> 
> 赞同：2
> 
> 时间：2012-05-28T00:47:40.680
> 
> 标签：php, javascript, mysql, highcharts

我需要在 y 轴上创建一个 HH:MM 的 highcharts 图表，这可行吗？我在 x 轴上有日期，需要在堆叠列上显示 HH:MM。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T03:42:37.707

如果 yaxis 是 datetime 类型，那么图表将以它认为合适的最佳方式呈现它们。如果您不喜欢它们的呈现方式，您可以使用[dateTimeLabelFormats](http://www.highcharts.com/ref/#xAxis--dateTimeLabelFormats)控制图表的日期时间格式。您还可以使用[tickInterval](http://www.highcharts.com/ref/#xAxis--tickInterval)控制显示的日期间隔。根据当时数据的日期时间跨度，图表将选择以下默认格式之一：

```
second: '%H:%M:%S',
minute: '%H:%M',
hour: '%H:%M',
day: '%e. %b',
week: '%e. %b',
month: '%b \'%y',
year: '%Y' 
```

如果您想将它们全部强制为小时和分钟，无论范围是多少，请按如下方式设置它们：

```
second: '%H:%M',
minute: '%H:%M',
hour: '%H:%M',
day: '%H:%M',
week: '%H:%M',
month: '%H:%M',
year: '%H:%M' 
```

**编辑**

要在列上显示 x 轴值：启用并格式化[**plotOptions 下列**](http://www.highcharts.com/ref/#plotOptions-column-dataLabels)上的 dataLabels，如下所示：

```
plotOptions: 
{
    column: 
    {
        stacking: 'normal',
        dataLabels: 
        {
            enabled: true,
            formatter: function() 
            {
                  return ''+ Highcharts.dateFormat('%H:%M', this.x);
            }
        }
    }
} 
```

# ruby - 如何根据位置存储和查找记录？

> ID：10778310
> 
> 赞同：0
> 
> 时间：2012-05-28T00:48:36.550
> 
> 标签：ruby, gps, location, zipcode

我正在考虑构建一个可以帮助您找到本地企业的应用程序（只是一个示例）。您可能会输入您的邮政编码（或 GPS，如果这是在手机上）并找到 10 英里内最近的企业等。我的问题是如何实现这种类型的逻辑？是否有我需要使用的图书馆或服务？或者这可以用数学来完成吗？我不熟悉这种事情通常是如何工作的，所以让我知道我需要如何存储记录，以便以后查询它们。注意：我将使用 Ruby 和 MongoDB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T01:20:07.720

应该很容易找到解决这个问题的数学，提供纬度/经度坐标。

或者你可以使用一些功能齐全的 gem 来为你做这件事，比如支持 Mongoid 或 MongoMapper的[Geocoder 。](https://github.com/alexreisner/geocoder)

下次您需要一些可能是共同世界问题的功能时，首先检查[ruby​​-toolbox](https://www.ruby-toolbox.com)是否有相应的 gem ，对于这种情况，这里有一些其他用于[地理编码的 gem](https://www.ruby-toolbox.com/categories/geocoding___maps)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:56:54.447

这里还有一种解决方案...

[http://geokit.rubyforge.org/](http://geokit.rubyforge.org/)

我想，这个话题已经在[这里](https://stackoverflow.com/questions/1703511/ruby-geolocation-gem-plugins)讨论过..

# jquery - Uploadifive：在每个队列元素处显示来自 uploadifive.php 的错误/结果

> ID：10778313
> 
> 赞同：0
> 
> 时间：2012-05-28T00:50:11.830
> 
> 标签：jquery, uploadify

我正在使用 uploadifive（uploadify 的非 Flash 版本），用于使用 jquery 和 php 上传

我正在寻找方法来处理从uploadifive.php返回（回显）的内容，与jquery在每个文件队列元素上显示错误/结果的方式相同

```
 'onUploadComplete (or maybe onProgress)' : function(file, data) {
 // show the php result/error at the queue element
 } 
```

就像现在一样，无论php返回什么，它都会为文件显示“已完成”

我在想，我应该摆弄 uploadifive.js 文件..但是究竟在哪里以及如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:11:12.177

我刚遇到同样的问题，发现“ **file.xhr.responseText** ”会输出后端脚本回显的内容。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T13:42:28.683

您可以访问数据变量中脚本中回显的数据......然后您可以根据需要处理它：

例如，如果一切正常，我不会回显任何内容，但如果发生错误（文件太大、格式错误……）我会在我的 php 脚本中回显消息，然后

```
'onUploadComplete': function (file, data) {
                    $('#uplodifive_errors').append('<div class="alert alert-error alert-dismissable">File "' + file['name'] + '" : ' + data + '</div>');
                }, 
```

我在错误 div 中显示它。

# php - 跟踪用户之间的付款？

> ID：10778316
> 
> 赞同：1
> 
> 时间：2012-05-28T00:50:21.737
> 
> 标签：php, paypal, payment

我正在创建一个网站，允许用户使用 Paypal 在我的网站上出售他们的东西。但是，我不知道如何安全地检查他们之间的付款是成功还是取消。

我的情况是：

> 用户 1 --- 卖 ---> 项目 #1234 --- 给 ---> 用户 2

用户 1 在我网站上的页面上出售商品 #1234。User2 转到该页面并单击*Pay by Paypal*。

我知道我可以为成功支付和取消支付提供两个 URL，但我如何安全地检查 URL 内的支付是否实际成功或取消，并检测虚假请求（例如使用 curl 发送）？

我已经研究过 IPN 和 PDT，但他们需要 User1 设置他的帐户，但为此，他的所有交易都会向我的 URL 发送通知，这是用户不接受的。

此外，我不想收到所有用户的所有付款。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T00:58:32.547

您最好让 User2 为您支付该项目的费用，然后当您收到付款（通过 IPN）时，您将付款转发给 User1。

更好的办法是为您的网站提供一种虚拟货币，这样用户就可以购买货币、使用该货币购买/出售商品，然后将该货币提取到他们的 PayPal 中。

# php - 测试字符串是否为正则表达式

> ID：10778318
> 
> 赞同：29
> 
> 时间：2012-05-28T00:50:33.013
> 
> 标签：php, regex, preg-match

有没有一种测试字符串是 PHP 中的正则表达式还是普通字符串的好方法？

理想情况下，我想编写一个函数来运行一个字符串，它返回真或假。

我看了看`preg_last_error()`：

```
<?php
preg_match('/[a-z]/', 'test');
var_dump(preg_last_error());
preg_match('invalid regex', 'test');
var_dump(preg_last_error());
?> 
```

显然第一个不是错误，第二个是。但两次都`preg_last_error()`返回。`int 0`

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-28T00:57:23.653

测试字符串是否为正则表达式的最简单方法是：

```
if( preg_match("/^\/.+\/[a-z]*$/i",$regex)) 
```

这将告诉您字符串是否很有可能被用作正则表达式。但是，有许多字符串可以通过该检查，但无法成为正则表达式。中间未转义的斜线、末尾的未知修饰符、不匹配的括号等都可能导致问题。

返回 0的原因`preg_last_error`是因为“无效的正则表达式”不是：

*   PREG_INTERNAL_ERROR（内部错误）
*   PREG_BACKTRACK_LIMIT_ERROR（过度强制回溯）
*   PREG_RECURSION_LIMIT_ERROR（过度递归）
*   PREG_BAD_UTF8_ERROR（UTF-8 格式错误）
*   PREG_BAD_UTF8_OFFSET_ERROR（偏移到 UTF-8 字符的中间）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-04-07T14:39:21.980

这是一个很好的答案：

[https://stackoverflow.com/a/12941133/2519073](https://stackoverflow.com/a/12941133/2519073)

```
if(@preg_match($yourPattern, null) === false){
    //pattern is broken
}else{
    //pattern is real
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-28T00:59:53.720

测试正则表达式在 PHP 中是否有效的唯一简单方法是使用它并检查是否引发了警告。

```
ini_set('track_errors', 'on');
$php_errormsg = '';
@preg_match('/[blah/', '');
if($php_errormsg) echo 'regex is invalid'; 
```

但是，使用任意用户输入作为正则表达式是个**坏主意**。之前在 PCRE 引擎中存在安全漏洞（缓冲区溢出 => 远程代码执行），并且可能创建需要大量 cpu/内存来编译/执行的特制长正则表达式。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-04-19T05:52:55.250

为什么不使用...另一个正则表达式？三行，没有`@`kludges或任何东西：

```
// Test this string
$str = "/^[A-Za-z ]+$/";

// Compare it to a regex pattern that simulates any regex
$regex = "/^\/[\s\S]+\/$/";

// Will it blend?
echo (preg_match($regex, $str) ? "TRUE" : "FALSE"); 
```

或者，以函数形式，更漂亮：

```
public static function isRegex($str0) {
    $regex = "/^\/[\s\S]+\/$/";
    return preg_match($regex, $str0);
} 
```

* * *

这不测试有效性；但看起来问题是`Is there a good way of test if a string is a regex or normal string in PHP?`，它确实做到了。

# unit-testing - 基于状态与交互的测试

> ID：10778322
> 
> 赞同：2
> 
> 时间：2012-05-28T00:51:28.903
> 
> 标签：unit-testing

假设我们有一个**Order**类，其中包含一个名为**Approve**的方法。调用此方法时，它会检查某些条件并将 Order 置于 Approved 状态或引发异常。在服务层，我们有这样的东西：

```
var order = _repository.Single(o => o.ID == orderID);
order.Approve();
_context.SaveChanges(); // or _session.SaveChanges(); 
```

有两种方法可以测试此方法，我想听听您对此的见解：

**解决方案 1**：存根存储库以返回 Order 对象。然后断言订单处于“已批准”状态。

**解决方案 2**：存根存储库以返回模拟订单对象。断言 Approve() 方法被调用。

解决方案 1 更简单，我个人更喜欢基于状态的测试而不是基于交互的测试，因为后者可以针对实现细节并且应该避免。但是，我相信测试给定订单是否处于已批准状态不是此服务方法的关注点。我认为我们需要一个单独的 Order 类测试方法来测试是否抛出异常或 Order 的状态是否更改为 Approved。

解决方案 2 可能听起来合乎逻辑，因为我们将批准订单的责任委托给订单类本身。所以也许我们需要对这个服务方法进行 2 个测试：一个确保它将批准订单的任务委托给 Order 类，另一个确保它保存更改。

您对此有何见解？您更喜欢哪种解决方案？

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T01:01:20.750

单元测试是为了测试观察到的行为是否符合预期/规范。

在这种情况下，您的问题的答案归结为您认为的“预期行为”：*a）*如果预期行为是调用服务方法后订单处于已批准状态，则测试状态；*b)*如果预期行为是授权操作被委托，则测试方法调用。

无论哪种情况，您都需要测试`Order`对象的行为（以便调用`Approve()`将状态更改为已批准）。

第二种解决方案效果很好，因为它解耦了两个对象的行为，但是如果有不止一种方式可以使订单处于已批准状态（这就是您正在测试的 - 案例 a）），那么您将限制接受不必要的行为。

另外，我会创建一个单独的测试来测试保存部分，如果这对批准部分不是必需的

# html - 如何在单选按钮旁边显示文本？

> ID：10778323
> 
> 赞同：0
> 
> 时间：2012-05-28T00:51:50.883
> 
> 标签：html, css

有一个关于单选按钮的问题。下面有一个 html 代码和 css 代码，但发生的是我有 2 个单选按钮，每个单选按钮旁边都有一个文本。第一个单选按钮状态为“男性”，另一个单选按钮状态为“女性”。

现在“男性”显示在单选按钮旁边，这很好，但“女性”显示在单选按钮下方。如果我使存储整个单选按钮和文本的表格更宽，那么“男性”和“女性”都显示在它们的单选按钮下方而不是它们旁边。

所以我的问题是在我的 css/html 代码中需要更改哪些内容才能在其单选按钮旁边显示“男性”和“女性”？

下面是html代码：

```
<table id="replies">
<tr>
     <th colspan="2">
     Replies
     </th>
</tr>
<tr>
<td>Gender: </td>
<td align="left">
<div class="replytd"> 
<input type="radio" name="reply" value="male" class="replyBtn" /><span class="replyspan">Male</span>
</div>
<div class="replytd"> 
<input type="radio" name="reply" value="female" class="replyBtn" /><span class="replyspan">Female</span>
</div>
</td>
</tr>
</table> 
```

下面是css代码：

```
#replies{
    display:inline-block;
    vertical-align:top;
    min-width:15%;
    max-width:15%;
}

#replies th{
    border-collapse:collapse;
    border:1px solid black; 
}

#replies td{
    border-collapse:collapse;
    border:1px solid black; 
    padding:1%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T01:01:40.623

我会使用[<label>](http://www.w3schools.com/tags/tag_label.asp)标记而不是`<span>`标记，因为它们具有更好的可访问性和与`<input>`元素的相关性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T01:05:29.037

您可以在您的 css 代码中添加它以更改有关“div”的显示模式

```
.replytd
{
float:left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T01:05:34.543

`white-space:nowrap` [有帮助](http://jsfiddle.net/ovfiddle/wrcH3/)，但可能有点矫枉过正，因为只需设置列宽即可

可悲的是，更正确的方法是使用`<label>`屏幕阅读器等正确识别并服务于其语义目的的元素。标签元素作为父元素时可以隐式（没有`for`属性）与输入链接，例如

```
<label><input type="radio" name="reply" value="male" class="replyBtn" />Male</label> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T01:10:00.210

您设置`max-width:15%;`的内容不足以容纳内容，因此内容开始换行。增加或删除`max-width`。

# actionscript-3 - 使位图部分不可见 AS3

> ID：10778326
> 
> 赞同：0
> 
> 时间：2012-05-28T00:52:35.327
> 
> 标签：actionscript-3, flash, video

我正在尝试制作一个对象（包含文本字段和位图的电影剪辑），有时我需要使其部分透明（例如使其一半消失）。这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:33:19.343

```
// only things inside the rect will be visible
DisplayObject.scrollRect = new Rectangle(...); 
```

MovieClip 也是一个 DisplayObject。

# php - PHP将日期间隔差异转换为十进制

> ID：10778338
> 
> 赞同：3
> 
> 时间：2012-05-28T00:56:35.220
> 
> 标签：php, datetime, datediff

我正在尝试将两个日期之间的差异转换为总年数，现在我正在使用这个：

```
 $datetime1 = new DateTime('2009-10-11'); 
 $datetime2 = new DateTime('2010-10-10');
 $interval = $datetime1->diff($datetime2);
 return $interval->format('%y'); 
```

这会返回一个 int（例如 0 表示 < 一年，2 表示两年等）

我需要结果为十进制，如下所示：

0.9 - 9 个月

1.2 - 1年零两个月

3.5 - 3年零5个月

等等..

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T01:01:01.037

如果您不关心完美的准确性：

```
return $interval->days / 365; 
```

你也可以做类似的事情`return $interval->y + $interval->m / 12 + $interval->d / 365`。

在我看到@2unco 的评论之前，我什至没有注意到你奇怪的十进制约定。那看起来像：`return $interval->y . '.' . $interval->m`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-05T16:16:14.590

在这里，您可以看到一个完全可以做到这一点的函数，并且有很多选项： http: [//php.net/manual/es/function.date-diff.php#98615](http://php.net/manual/es/function.date-diff.php#98615)

```
 <?php 
/* 
* A mathematical decimal difference between two informed dates 
*
* Author: Sergio Abreu
* Website: http://sites.sitesbr.net
*
* Features: 
* Automatic conversion on dates informed as string.
* Possibility of absolute values (always +) or relative (-/+)
*/

function s_datediff( $str_interval, $dt_menor, $dt_maior, $relative=false){

       if( is_string( $dt_menor)) $dt_menor = date_create( $dt_menor);
       if( is_string( $dt_maior)) $dt_maior = date_create( $dt_maior);

       $diff = date_diff( $dt_menor, $dt_maior, ! $relative);

       switch( $str_interval){
           case "y": 
               $total = $diff->y + $diff->m / 12 + $diff->d / 365.25; break;
           case "m":
               $total= $diff->y * 12 + $diff->m + $diff->d/30 + $diff->h / 24;
               break;
           case "d":
               $total = $diff->y * 365.25 + $diff->m * 30 + $diff->d + $diff->h/24 + $diff->i / 60;
               break;
           case "h": 
               $total = ($diff->y * 365.25 + $diff->m * 30 + $diff->d) * 24 + $diff->h + $diff->i/60;
               break;
           case "i": 
               $total = (($diff->y * 365.25 + $diff->m * 30 + $diff->d) * 24 + $diff->h) * 60 + $diff->i + $diff->s/60;
               break;
           case "s": 
               $total = ((($diff->y * 365.25 + $diff->m * 30 + $diff->d) * 24 + $diff->h) * 60 + $diff->i)*60 + $diff->s;
               break;
          }
       if( $diff->invert)
               return -1 * $total;
       else    return $total;
   }

/* Enjoy and feedback me ;-) */
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-01T22:14:30.757

更简单、更准确的间隔转换器到天/小时/分钟/秒：

```
function DateDiffInterval($sDate1, $sDate2, $sUnit='H') {
//subtract $sDate2-$sDate1 and return the difference in $sUnit (Days,Hours,Minutes,Seconds)
    $nInterval = strtotime($sDate2) - strtotime($sDate1);
    if ($sUnit=='D') { // days
        $nInterval = $nInterval/60/60/24;
    } else if ($sUnit=='H') { // hours
        $nInterval = $nInterval/60/60;
    } else if ($sUnit=='M') { // minutes
        $nInterval = $nInterval/60;
    } else if ($sUnit=='S') { // seconds
    }
    return $nInterval;
} //DateDiffInterval 
```

# python - Flask 和其他 Python 框架中的多个 URL 段

> ID：10778346
> 
> 赞同：6
> 
> 时间：2012-05-28T00:57:42.513
> 
> 标签：python, frameworks, flask

我正在 Bottle 和 Flask 中构建一个应用程序，看看我更喜欢哪个，因为 Django 包含太多“电池”。

我已经阅读了两者的路由文档，这些文档非常清晰易懂，但我正在努力寻找一种方法来处理未知的、可能无限数量的 URL 段。IE：

```
http://www.example.com/seg1/seg2/seg3/seg4/seg5.....
```

我正在考虑使用类似的东西

```
@app.route(/< path:fullurl >)
```

使用正则表达式删除不需要的字符并将 fullurl 字符串拆分为长度与段数相同的列表，但这似乎非常低效。

大多数 PHP 框架似乎都有一种构建段变量名称数组的方法，无论数量如何，但 Flask、Bottle 或 Django 似乎都没有类似的选项，我似乎需要指定确切数量的段来捕获变量。几个 PHP cms 似乎立即将前 9 个段收集为变量，并且任何不再作为完整路径传递的内容，然后以我上面提到的方式分解。

我不了解 URL 路由中的工作方式吗？字符串拆分方法真的效率低下还是最好的方法？或者，有没有办法将未知数量的段直接收集到 Flask 中的变量中？

我对 Python 框架很陌生，所以五岁的孩子的解释会有所帮助，

非常感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-28T10:03:47.877

我自己对 Flask 还很陌生，但从我目前的工作来看，我很确定这个想法是你有很多小的路由/视图方法，而不是一个巨大的切换野兽。

例如，如果您有这样的网址：

```
http://example.com/unit/57/
http://example.com/unit/57/page/23/
http://example.com/unit/57/page/23/edit 
```

你会像这样路由它：

```
@app.route('/unit/<int:unit_number>/')
def display_unit(unit_number):
    ...

@app.route('/unit/<int:unit_number>/page/<int:page_number>/')
def display_page(unit_number, page_number):
    ...

@app.route('/unit/<int:unit_number>/page/<int:page_number>/edit')
def page_editor(unit_number, page_number):
    ... 
```

这样做有助于在您的应用程序中保留某种结构并依赖框架来路由内容，而不是获取 URL 并自己完成所有路由。然后，您还可以使用蓝图来处理不同的功能。

不过我承认，我很难想到在 URL 中可能需要无限数量的部分的情况？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T05:34:39.317

拆分字符串不会给您的程序带来任何低效率。就性能而言，它是框架完成的 URL 处理的一个微不足道的补充。它也适合一行代码。

```
@app.route('/<path:fullurl>')
def my_view(fullurl):
    params = fullurl.split('/') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-14T12:54:18.473

有效：</p>

```
@app.route("/login/<user>/<password>")
def login(user, password):
    app.logger.error('An error occurred')
    app.logger.error(password)
    return "user : %s password : %s" % (user, password) 
```

然后：

[http://example.com:5000/login/jack/hi](http://example.com:5000/login/jack/hi)

输出：

```
user : jack password : hi 
```

# eclipse - JBoss&休眠

> ID：10778347
> 
> 赞同：0
> 
> 时间：2012-05-28T00:57:54.577
> 
> 标签：eclipse, jboss, classloader, jboss7.x, eclipse-indigo

我在 Eclipse 3.7.2 中使用 JBoss AS 7.1 和 Hibernate 来使用 Java 和 JSP 构建动态 Web 项目。所有正确的 JAR 文件都在 WAR 中（我检查过），但我收到了这个错误：

```
java.lang.ClassNotFoundException: org.hibernate.cfg.EJB3DTDEntityResolver from [Module "deployment.MyProject.war:main" from Service Module Loader]
        org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
        org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
        org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
        org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
        org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
        org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
        org.hibernate.cfg.Configuration.reset(Configuration.java:326)
        org.hibernate.cfg.Configuration.<init>(Configuration.java:265)
        org.hibernate.cfg.Configuration.<init>(Configuration.java:269)
        my.project.MyManager.<init>(MyManager.java:79)
        org.apache.jsp.index_jsp._jspService(index_jsp.java:68)
        org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
        org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
        org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326)
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:847) 
```

经理类的相关线路是`Configuration cfg = new Configuration();`. 一切都在一个独立的 Eclipse 项目中完美运行。只有当我尝试制作 JBoss 页面时它才会中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T02:10:22.267

确保在您的 WAR 文件中正确设置了 hibernate-annotations.jar。它可能已经丢失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:42:27.993

所以，显然问题是试图包括休眠罐子。JBoss AS 7.1.1 内置了休眠功能。您必须添加`Dependencies: org.hibernate, org.hibernate.envers`到`MANIFEST.MF`.

# javascript - 在这种情况下如何使用javascript cleanTime？

> ID：10778351
> 
> 赞同：0
> 
> 时间：2012-05-28T00:58:54.203
> 
> 标签：javascript, jquery

我需要清除超时，但我不知道如何。我不确定要从 window 对象传递什么 clearTimeout 方法...有什么提示吗？

```
 for (var k = 0; k <= arr2.length; k++) {

                  (function (k) {
                      window.setTimeout(function () {

                          //do something

                      }, 6000 * k);
                  })(k);

               } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T01:02:40.380

由于您正在创建`arr2.length`大量计时器，因此如果您需要“杀死”特定计时器，则需要一组引用。

```
//create a reference storage
var timerRefs = [];

for (var k = 0; k <= arr2.length; k++) {
    (function (k) {

        //reference the timeout to a variable
        var ref = window.setTimeout(function () {
            //do something
        }, 6000 * k);

        //store that reference in the array
        timerRefs.push(ref);
    })(k);
} 
```

要清除特定的，请执行以下操作：

```
clearTimeout(timerRefs[N]); //where N is the index of that timer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T00:59:56.040

如果你想取消超时，你必须捕获它的返回值。

```
var myTimer = setTimeout(...); 
```

然后，只需将该值传递给函数：

```
clearTimeout(myTimer); 
```

* * *

我个人会重写：

```
(function(inp) {
    var k = 0, l = inp.length, timer;
    timer = setInterval(function() {
        // do something with inp[k];
        k++;
        if( k > l) clearInterval(timer);
    },6000);
})(arr2); 
```

某些浏览器（尤其是 Firefox）对一次运行的超时过多反应不佳。

# java - 如何避免违反 Liskov 替换原则 (LSP)？

> ID：10778354
> 
> 赞同：15
> 
> 时间：2012-05-28T00:59:18.867
> 
> 标签：java, oop, liskov-substitution-principle

我的情况与[Steve McConnell](http://www.cc2e.com/Default.aspx)在 Code Complete 中提到的情况非常相似。只是我的问题是基于 Vehicles 的，而 Trike 恰好在法律上属于 Cars 类别。到目前为止，汽车有四个轮子。无论如何，我的域都是不必要的复杂，所以很容易坚持下面的猫示例。

> 对覆盖例程并且在派生例程内不执行任何操作的类保持怀疑 这通常表明基类的设计存在错误。例如，假设您有一个 Cat 类和一个例程 Scratch()，并假设您最终发现一些猫已经去爪并且不能抓挠。您可能很想创建一个从 Cat 派生的名为 ScratchlessCat 的类，并重写 Scratch() 例程以不做任何事情。这种方法存在几个问题：
> 
> 它通过更改其接口的语义违反了 Cat 类中呈现的抽象（接口契约）。
> 
> 当您将这种方法扩展到其他派生类时，这种方法很快就会失控。当你发现一只没有尾巴的猫时会发生什么？还是一只不会抓老鼠的猫？还是一只不喝牛奶的猫？最终你会得到像 ScratchlessTaillessMicelessMilklessCat 这样的派生类。
> 
> 随着时间的推移，这种方法会产生难以维护的代码，因为祖先类的接口和行为对其后代的行为几乎没有暗示。
> 
> 解决这个问题的地方不在基类中，而是在原始的 Cat 类中。创建一个 Claws 类并将其包含在 Cats 类中。根本问题是假设所有的猫都会抓挠，所以从源头解决这个问题，而不是在目的地包扎它。

根据上面他伟大著作的文字。跟风不好

**父类不必是抽象的**

```
public abstract class Cat {
   public void scratch() {
      System.out.println("I can scratch");
   }
} 
```

**派生类**

```
public class ScratchlessCat extends Cat {
   @Override
   public void scratch() {
      // do nothing
   }
} 
```

现在他建议创建另一个类`Claws`，但我不明白如何使用这个类来避免需要`ScratchlessCat#Scratch`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-28T01:12:39.543

并非所有的猫都有爪子并且能够抓挠是一个重要线索，`Cat`不应`scratch`在其 API 中定义公共方法。第一步是考虑你为什么首先定义`scratch`。如果可以的话，猫可能会在受到攻击时抓挠；如果不是，他们会发出嘶嘶声或逃跑。

```
public class Cat extends Animal {
    private Claws claws;

    public void onAttacked(Animal attacker) {
        if (claws != null) {
            claws.scratch(attacker);
        }
        else {
            // Assumes all cats can hiss.
            // This may also be untrue and you need Voicebox.
            // Rinse and repeat.
            hiss();
        }
    }
} 
```

现在您可以用任何子`Cat`类替换另一个子类，它的行为是否正确取决于它是否有爪子。您可以定义一个`DefenseMechanism`类来组织各种防御，例如`Scratch`、`Hiss`、`Bite`等。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-28T01:12:05.673

您仍然有一个`scratch()`方法，但它不会被派生类覆盖：

```
public class Cat {
  Claw claw_;
  public Cat(Claw claw) {claw = claw_;}
  public final void scratch() {
    if (claw_ != null) {
      claw_.scratch(this);
    }
  }
} 
```

这允许您将刮擦逻辑委托给包含的`Claw`对象（如果存在）（如果没有爪子，则不刮擦）。从 cat 派生的类对如何划伤没有发言权，因此无需基于能力创建影子层次结构。

此外，由于派生类不能更改方法实现，因此它们不会破坏`scratch()`基类接口中方法的预期语义。

如果你把它推到极端，你可能会发现你有很多类而没有很多派生——大多数逻辑都委托给组合对象，而不是委托给派生类。

# maven - 防止 maven 将依赖项复制到 WEB-INF\lib 文件夹

> ID：10778365
> 
> 赞同：0
> 
> 时间：2012-05-28T01:01:41.233
> 
> 标签：maven

我在 pom.xml 中有这个依赖项：

```
 <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-testing</artifactId>
        <version>${appengine.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-api-stubs</artifactId>
        <version>${appengine.version}</version>
        <scope>test</scope>
    </dependency> 
```

但是，尽管范围是“测试”，但 jar 仍会复制到`WEB-INF\lib`文件夹中：

```
src\main\webapp\WEB-INF\lib 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:59:46.987

我在这里看到两种可能的情况。

1）这些依赖关系在某个地方被引用（直接或不），`compile`除了`runtime`它们的`test`-scoped 使用之外，还有范围。然后，这个更广泛的范围被有效地用于满足他们的所有需求。

2）您（可能是无意识地）使用[Maven 依赖插件](http://maven.apache.org/plugins/maven-dependency-plugin/)或类似的东西进行一些依赖处理黑客攻击，这会造成混乱。

最后一个问题：我假设这个`src/main/webapp/WEB-INF/lib`目录实际上是空的（甚至可能不存在），这是你的错误。正如@Ryan 在他的评论中所说，所有库（以及任何其他构建工件）都应该放在`target`目录中。

# actionscript-3 - AS3 中是否有等效的 MemberwiseClone()？

> ID：10778370
> 
> 赞同：0
> 
> 时间：2012-05-28T01:02:55.493
> 
> 标签：actionscript-3

ActionScript3 中是否有[`MemberwiseClone()`](http://msdn.microsoft.com/en-us/library/system.object.memberwiseclone.aspx)等价物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T02:12:22.047

不，没有直接的方法来进行语言内置的深度复制，但是如果您不关心处理开销并且不想为每个对象编写自己的克隆方法，您可以使用内置的自省如下所述进入 AS3：http: [//blog.another-d-mention.ro/programming/how-to-clone-duplicate-an-object-in-actionscript-3/](http://blog.another-d-mention.ro/programming/how-to-clone-duplicate-an-object-in-actionscript-3/)

# cakephp - CakePHP 表单，打印出某些查询

> ID：10778371
> 
> 赞同：0
> 
> 时间：2012-05-28T01:02:56.290
> 
> 标签：cakephp, foreach

大家好，只是想知道您是否在 foreach 循环中打印出东西，您将如何对其进行编码，以便只有一组与该人有关的特定数据。例如，我希望它在我的关系表中的活动为 =false 或 0 时打印

这是我认为的当前代码。

```
 <?php foreach($Relationships as $relationship):?>

                <tr> 

                    <td align='center'><?php echo $relationship['Relationship']['partyone']; ?></td>
                    <td align='center'><?php echo $relationship['Relationship']['partytwo']; ?></td>
                    <td> </td>
                    <td><?php echo $this->Html->link('approve', array('action'=>'approve', $relationship['Relationship']['id'])); ;?>
                    <td><?php echo $this->Html->link('Decline', array('action'=>'decline', $relationship['Relationship']['id'])); ;?>
                    </td>

                </tr>
            <?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T04:58:08.553

错误出现在我在控制器中的查找条件中，而不是视图中。这是我必须为控制器编写的代码行

```
$this->set('Relationships', $this->Relationship->find('all', array('conditions' => array('Relationship.partytwo' => $userid,'Relationship.active'=>false)))); 
```

# hadoop - Hadoop MapReduce 中的数据连接

> ID：10778372
> 
> 赞同：1
> 
> 时间：2012-05-28T01:03:26.417
> 
> 标签：hadoop, mapreduce

我正在尝试实现 Book Hadoop In Action 中给出的一个用例，但我不是要编译代码。我是 Java 新手，所以无法理解错误背后的确切原因。

有趣的是，另一段使用相同类和方法的代码编译成功。

```
hadoop@hadoopnode1:~/hadoop-0.20.2/playground/src$ javac -classpath /home/hadoop/hadoop-0.20.2/hadoop-0.20.2-core.jar:/home/hadoop/hadoop-0.20.2/lib/commons-cli-1.2.jar:/home/hadoop/hadoop-0.20.2/contrib/datajoin/hadoop-0.20.2-datajoin.jar -d ../classes DataJoin2.java 
DataJoin2.java:49: cannot find symbol
symbol  : constructor TaggedWritable(org.apache.hadoop.io.Text)
location: class DataJoin2.TaggedWritable
            TaggedWritable retv = new TaggedWritable((Text) value);
                                  ^
DataJoin2.java:69: cannot find symbol
symbol  : constructor TaggedWritable(org.apache.hadoop.io.Text)
location: class DataJoin2.TaggedWritable
            TaggedWritable retv = new TaggedWritable(new Text(joinedStr));
                                  ^
DataJoin2.java:113: setMapperClass(java.lang.Class<? extends org.apache.hadoop.mapreduce.Mapper>) in org.apache.hadoop.mapreduce.Job cannot be applied to (java.lang.Class<DataJoin2.MapClass>)
        job.setMapperClass(MapClass.class);
           ^
DataJoin2.java:114: setReducerClass(java.lang.Class<? extends org.apache.hadoop.mapreduce.Reducer>) in org.apache.hadoop.mapreduce.Job cannot be applied to (java.lang.Class<DataJoin2.Reduce>)
        job.setReducerClass(Reduce.class);
           ^
4 errors 
```

- - - - - - - - 代码 - - - - - - - - - - -

```
import java.io.DataInput;
import java.io.DataOutput;
import java.io.IOException;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Reducer;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapred.KeyValueTextInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
import org.apache.hadoop.mapreduce.lib.input.TextInputFormat;
import org.apache.hadoop.util.GenericOptionsParser;

// DataJoin Classes
import org.apache.hadoop.contrib.utils.join.DataJoinMapperBase;
import org.apache.hadoop.contrib.utils.join.TaggedMapOutput;
import org.apache.hadoop.contrib.utils.join.DataJoinReducerBase;

import org.apache.hadoop.io.Writable;
import org.apache.hadoop.io.WritableComparable;

public class DataJoin2
{
    public static class MapClass extends DataJoinMapperBase
    {
        protected Text generateInputTag(String inputFile)
        {
            String datasource = inputFile.split("-")[0];
            return new Text(datasource);            
        }

        protected Text generateGroupKey(TaggedMapOutput aRecord)
        {
            String line = ((Text) aRecord.getData()).toString();
            String[] tokens = line.split(",");
            String groupKey = tokens[0];
            return new Text(groupKey);
        }

        protected TaggedMapOutput generateTaggedMapOutput(Object value)
        {
            TaggedWritable retv = new TaggedWritable((Text) value);
            retv.setTag(this.inputTag);
            return retv;
        }
    } // End of class MapClass

    public static class Reduce extends DataJoinReducerBase
    {
        protected TaggedMapOutput combine(Object[] tags, Object[] values)
        {
            if (tags.length < 2) return null;
            String joinedStr = "";
            for (int i=0;i<values.length;i++)
            {
                if (i>0) joinedStr += ",";
                TaggedWritable tw = (TaggedWritable) values[i];
                String line = ((Text) tw.getData()).toString();
                String[] tokens = line.split(",",2);
                joinedStr += tokens[1];
            }
            TaggedWritable retv = new TaggedWritable(new Text(joinedStr));
            retv.setTag((Text) tags[0]);
            return retv;
        }
    } // End of class Reduce

    public static class TaggedWritable extends TaggedMapOutput 
    {
        private Writable data;

        public TaggedWritable()
        {
            this.tag = new Text("");
            this.data = data;
        }

        public Writable getData()
        {
            return data;
        }

        public void write(DataOutput out) throws IOException
        {
            this.tag.write(out);
            this.data.write(out);
        }

        public void readFields(DataInput in) throws IOException
        {
            this.tag.readFields(in);
            this.data.readFields(in);
        }       
    } // End of class TaggedWritable

    public static void main(String[] args) throws Exception
    {
        Configuration conf = new Configuration();
        String[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();
        if (otherArgs.length != 2) {
          System.err.println("Usage: DataJoin2 <in> <out>");
          System.exit(2);
        }
        Job job = new Job(conf, "DataJoin");
        job.setJarByClass(DataJoin2.class);     
        job.setMapperClass(MapClass.class);
        job.setReducerClass(Reduce.class);
        job.setInputFormatClass(TextInputFormat.class);

        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(TaggedWritable.class);

        FileInputFormat.addInputPath(job, new Path(otherArgs[0]));
        FileOutputFormat.setOutputPath(job, new Path(otherArgs[1]));
        System.exit(job.waitForCompletion(true) ? 0 : 1);               
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T19:48:59.047

对于您的*前两条*错误消息，编译器错误*清楚地*告诉您，您没有`TaggedWritable`接受 type 参数的构造函数`Text`。在我看来，您正在`TaggedWritable`充当`Writable`添加标签的包装器，所以我可以建议添加构造函数：

```
public TaggedWritable(Writable data) {
    this.tag = new Text("");
    this.data = data;
} 
```

事实上，正如你所写的，这一行

```
this.data = data; 
```

只是重新分配`data`给自己，所以我很确定你打算有一个名为`data`. 请参阅我上面的推理，了解为什么我认为您应该使用它`Writable`而不是`Text`. 由于`Text`implements `Writable`，这*将*解决您的前两个错误消息。

但是，您需要*保留*一个默认的无参数构造函数。这是因为 Hadoop 将使用反射来实例化实例`Writable`值，因为它在 map reduce 阶段之间通过网络将它们序列化。我认为默认的无参数构造函数在这里有点混乱：

```
public TaggedWritable() {
    this.tag = new Text("");
} 
```

我认为这是一团糟的原因是，如果您不分配给`TaggedWritable.data`任何包装值的有效实例`Writable`，您将得到一个`NullPointerException`when `this.data.readFields(in)`is invoked in `TaggedWritable.readFields(DataInput)`。由于它是一个通用包装器，您可能应该创建一个泛型类型，然后在默认的无参数构造函数中`TaggedWritable`使用反射来分配。`TaggedWritable.data`

对于您的*最后两个*编译器错误，要使用`hadoop-datajoin`我注意到您需要使用*旧的 API*类。因此，所有这些

```
org.apache.hadoop.mapreduce.Job;
org.apache.hadoop.mapreduce.Mapper;
org.apache.hadoop.mapreduce.Reducer;
org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
org.apache.hadoop.mapreduce.lib.input.TextInputFormat; 
```

应替换为旧的 API 等效项。因此，`org.apache.hadoop.mapred.JobConf`而不是`org.apache.hadoop.mapreduce.Job`, 等等。这将处理您的最后两条错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T05:53:02.807

错误消息没有任何含糊之处。它告诉你你没有提供一个构造函数，`TaggedWritable`它接受一个类型的参数`Text`。您仅在发布的代码中显示无参数构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-29T05:30:25.990

我有 hadoop-2,7,1，我在 pom.xml 中添加了来自 MAven 的依赖项

```
<dependency>
<groupId>org.apache.hadoop</groupId>
<artifactId>hadoop-datajoin</artifactId>
<version>2.7.1</version>
</dependency> 
```

这是 hadoop-datajoin 的网址：[https ://mvnrepository.com/artifact/org.apache.hadoop/hadoop-datajoin](https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-datajoin)

# javascript - 通过 jQuery 将单选按钮转换为链接

> ID：10778375
> 
> 赞同：2
> 
> 时间：2012-05-28T01:03:50.113
> 
> 标签：javascript, jquery, css, radio-button

我不知道这种表单控制器的具体名称是什么（如果有的话），但基本上我想像这样更改无线电元素；

```
<input type="radio" name="size" value="S" id="size_S" />
  <label for="size_S">S</label>
<input type="radio" name="size" value="M" id="size_M" />
  <label for="size_M">M</label>
<input type="radio" name="size" value="L" id="size_L" />
  <label for="size_L">L</label> 
```

...进入程式化的链接，其检查有一个特殊的类。例如，我会[在 Macys.com 上列出尺寸选择元素](http://www1.macys.com/shop/product/stacy-adams-shoes-sandstorm-suede-plain-toe-chukka-boots?ID=597922&CategoryID=55637#fn=sp=1&spc=116&ruleId=3&slotId=2)。

我怎样才能把收音机变成这种盒子链接？是否有已经这样做的库或插件？

我可以修改 DOM，但是为了方便非 JS 用户，元素需要是单选按钮。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T02:14:08.197

您几乎可以重用标准表单元素。启用 js 后，隐藏单选按钮、设置标签样式并绑定`click`事件以添加`active`/`selected`类。单击标签仍将选择基础单选按钮。

示例 jsFiddle：http: [//jsfiddle.net/Y6BzY/](http://jsfiddle.net/Y6BzY/)

JS

```
$('input[type="radio"], label').addClass('js');

$('label').on('click', function() {
    $('label').removeClass('active');
    $(this).addClass('active');
}); 
```

CSS

```
input[type="radio"].js {
    display: none;
}

label.js {
    display: block;
    float: left;
    margin-right: 5px;
    border: 1px solid black;
    padding: 4px;
    cursor: pointer;
}

label.js.active {
    border: 1px solid blue;
    color: blue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T01:22:53.397

以弗兰，

我访问了您提供的链接，我只能看到其中有一个带有数字的跨度用于尺寸选择。你是说那些，还是*喜欢*那些？

关于您的问题：我知道显示链接而不是框的原因是缺少 js 支持。您是否考虑过在 noscript 标签之外使用带有硬编码单选按钮和跨度的标签，就像在您的示例中一样？

无论如何，老实说，我真的不认为有必要为此操作 DOM。

# javascript - JQuery 按子 div 对 div 进行排序

> ID：10778376
> 
> 赞同：3
> 
> 时间：2012-05-28T01:04:23.420
> 
> 标签：javascript, jquery, sorting, html

我有以下 div 列表，我希望能够使用 Javascript/JQuery 对它们进行排序。

```
<div class="item">
    <div class="genre">Classical</div>
    <div class="name">Alpha</div>
    <div class="location">London</div>
</div>

<div class="item">
    <div class="genre">Blues</div>
    <div class="name">Bravo</div>
    <div class="location">New York</div>
</div>

<div class="item">
    <div class="genre">Pop</div>
    <div class="name">Charlie</div>
    <div class="location">Paris</div>
</div>

<div class="buttons">
<a href="">Sort by Genre</a>
<a href="">Sort by Name</a>
<a href="">Sort by Location</a>
</div> 
```

我希望能够按字母顺序按类型/名称/位置对项目进行排序。

示例：如果单击按流派排序，它将按流派对 0-9 AZ 中的项目进行排序。

如果你们中的任何人有任何提示，将不胜感激。

干杯:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T01:22:37.370

您必须对 html 进行一些更改，如下所示：

```
<div id="container">
<div class="item">
    <div class="genre">Classical</div>
    <div class="name">Alpha</div>
    <div class="location">London</div>
</div>

<div class="item">
    <div class="genre">Blues</div>
    <div class="name">Bravo</div>
    <div class="location">New York</div>
</div>

<div class="item">
    <div class="genre">Pop</div>
    <div class="name">Charlie</div>
    <div class="location">Paris</div>
</div>
</div>
<div class="buttons">
<a href="" id="genre">Sort by Genre</a>
<a href="" id="name">Sort by Name</a>
<a href="" id="location">Sort by Location</a>
</div> 
```

### jQuery

```
function sorting(tag) {
    var items = $('div.item').sort(function(a, b) {
        var txt1 = $.trim($('div.' + tag, a).text()),
            txt2 = $.trim($('div.' + tag, b).text());
        if (txt1 > txt2) return 1;
        else return -1;
    });
    return items;
}
$('.buttons a').on('click', function(e) {
    e.preventDefault();
    $('div#container').html(sorting(this.id));
}); 
```

**[工作样本](http://jsfiddle.net/thecodeparadox/QStkd/81/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T01:35:00.677

好的，这将是我的纯 JS 解决方案。

首先，我们应该将您的 s 包装`<div>`到一个更大的容器中。

```
<div id = "wrapper">
   <div id = "item">...</div>
   <div id = "item">...</div>
   <div id = "item">...</div> 
</div> 
```

现在，让我们定义一个常量——你想按哪个属性对其进行排序？（这可能是稍后在您的代码中的函数参数）。

```
var propName = "genre"; 
```

让我们获取所有的`<div>`s 并将它们放入一个数组中。

```
var items = document.getElementsByClassName("item");
var itemsArray = new Array(); 
```

让我们根据所选属性的文本按字典顺序对它们进行排序。

```
for (var i = 0; i < items.length; i++)
    itemsArray.push(items[i]);

itemsArray.sort(function(a, b) {
    var aProp = a.getElementsByClassName(propName)[0].firstChild.nodeValue;
    var bProp = b.getElementsByClassName(propName)[0] .firstChild.nodeValue;

    if (aProp < bProp)
        return -1;
    else if (aProp > bProp)
        return 1;
    else
        return 0;
}); 
```

`<div>`让我们构造一个由排序后的 s组成的文档片段。

```
var fragment = document.createDocumentFragment();

for (var i = 0; i < itemsArray.length; i++)
    fragment.appendChild(itemsArray[i].clone()); 
```

最后，让我们清除 的内容，`<div id = "wrapper">`并将其替换为文档片段。

```
document.getElementById('wrapper').innerHTML = '';
document.getElementById('wrapper').appendChild(fragment); 
```

另外，请注意`document.getElementsByClassName`在 IE<9 中不起作用，但我现在真的懒得处理这个问题。

小提琴：http: [//jsfiddle.net/nNXr4/](http://jsfiddle.net/nNXr4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-22T13:45:29.207

检查这个野兽：

```
 function sortByCreatedOnAsc(a,b){
     return $(a).find('.created_on').text() > $(b).find('.created_on').text();
 }

 function sortByCreatedOnDesc(a,b){
    return $(a).find('.created_on').text() < $(b).find('.created_on').text();
 }

 function reorderEl(el){
     var container = $('#tasks');
     container.html('');
     el.each(function(){
         $(this).appendTo(container);
     });
 }

 $('#created_on').click(function(){
   if($(this).hasClass("asc")){
     reorderEl($('.task').sort(sortByCreatedOnDesc));
     $(this).removeClass("asc");
     $(this).addClass("desc");
   } else {
     reorderEl($('.task').sort(sortByCreatedOnAsc));
     $(this).removeClass("desc");
     $(this).addClass("asc");
   }
   return false;
}); 
```

jsfiddle：http: [//jsfiddle.net/jKJc3/116/](http://jsfiddle.net/jKJc3/116/)

# c# - 使用 ASP.NET MVC 作为 Web 服务

> ID：10778377
> 
> 赞同：16
> 
> 时间：2012-05-28T01:04:38.020
> 
> 标签：c#, asp.net-mvc, web-services, rest

有没有人有使用 ASP.NET MVC 项目作为 Web 服务的经验？

即使用没有视图的 ASP.NET MVC，因此其他应用程序可以使用 URL 来获取或发布到控制器中的操作。

有人用过吗？如果是这样，不使用 Web Service 项目有什么缺点吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T03:05:31.880

这实际上取决于您正在编写的应用程序的类型。实际上，我会反对 LukLed 的立场——当您想要支持 Windows 身份验证或 TCP 或 MSMQ 等不同协议时，基于 SOAP 的服务更适合内部客户端。

围绕特定“资源”使用更多 Web 风格的 GET 和 POST 开始让您进入[REST 架构风格](http://en.wikipedia.org/wiki/Representational_state_transfer)。这种技术对我来说有几个明显的优势：

*   响应通常较小，尤其是在使用 JSON 等轻量级格式时
*   由于请求和响应的简单性，这使得在移动/本地应用程序中使用起来更加容易（例如，参见[Twitter 的 API](https://dev.twitter.com/)）
*   您创建的服务可以是自描述的和可发现的，因为您可以像普通网页一样链接到 API 的其他部分。

一篇特别帮助我理解此处权衡的文章是 Martin Fowler 的[“走向 REST 荣耀的步骤”。](http://martinfowler.com/articles/richardsonMaturityModel.html) 话虽如此，它可能适合也可能不适合您的应用程序。

如果您确实选择构建更多基于 REST 的服务，请务必考虑使用其他人提到的 MVC4 中内置的[ASP.NET Web API 。](http://www.asp.net/web-api)它目前处于测试阶段，但微软觉得它足够好，可以给它一个上线许可证。

**更新：**

自 ASP.NET 核心以来，ASP.NET Web API 已集成到 MVC 6 项目中。 [https://wildermuth.com/2016/05/10/Writing-API-Controllers-in-ASP-NET-MVC-6](https://wildermuth.com/2016/05/10/Writing-API-Controllers-in-ASP-NET-MVC-6)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-28T01:21:35.783

如果您想使用简单的 GET 和 POST 调用，MVC 将是不错的选择。ASP.NET MVC 4 将支持创建基于 HTTP 的 API。你可以在这里阅读：[http ://www.asp.net/web-api](http://www.asp.net/web-api)

在 Web Service 项目中创建的 Web Service 可以更容易地使用，因为它可以生成 WSDL 文件，可以很容易地在许多不同的语言中读取和使用（通过使用 SOAP 协议）。另一方面，WS 可以创建巨大的 XML 响应，如果您使用自己的格式，它可能会小很多倍。

如果您想在全球范围内传播您的 Web 服务，那么允许 SOAP 将使许多开发人员的生活变得更轻松。SOAP 可以被几乎不了解编程的人使用。如果您将在内部使用它，更喜欢速度和简单的请求和响应，则可以使用 MVC。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T02:36:36.467

新的 ASP.NET MVC 包括 Web Api Kit，它可以完全满足您的需求。使用当前版本，您仍然可以使用它。它没有真正的缺点

# haskell - GHC Haskell 编译时常量

> ID：10778378
> 
> 赞同：2
> 
> 时间：2012-05-28T01:04:59.000
> 
> 标签：haskell, ghc

我正在为我的 Haskell 项目建立一个构建系统，并希望在不每次都修改代码的情况下同时构建调试和发布版本。换句话说，我正在寻找类似于 GCC 的 -D 标志的东西，这样我可以让某个值默认为 False，如果该标志传递给 GHC，则为 True。如果值为 True，则应用程序将使用生产环境而不是开发环境。

我可以让环境开关在命令行上或测试文件是否存在，但这并不理想。

大家有什么可以推荐的？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T01:19:54.303

C 预处理器宏可能会为您提供所需的东西，尤其是当您使用 cabal 作为构建系统时。看到[这个老问题](https://stackoverflow.com/questions/6361846/where-can-i-learn-about-ifdef)

# php - 在 PHP 函数中使用变量

> ID：10778383
> 
> 赞同：0
> 
> 时间：2012-05-28T01:05:36.237
> 
> 标签：php, mysql, function, variables, connect

好的，所以我有三个文件.. 用于示例目的：config.php、functions.php 和 index.php

在 config.php 中，我拥有站点运行所需的所有变量、设置、数据库详细信息等。在 functions.php 中，我尝试使用的函数如下：

```
function db_connect() {
    mysql_connect($app_config['mysql_server'], $app_config['mysql_username'], $app_config['mysql_password']) or db_die(__FILE__, __LINE__, mysql_error());
    mysql_select_db($app_config['mysql_database']) or db_die(__FILE__, __LINE__, mysql_error());

} 
```

这应该引用的是 config.php 中设置的变量，例如：

```
$app_config['mysql_username'] = "root";
$app_config['mysql_password'] = "password"; 
```

index.php 中需要 config.php 和 functions.php ，它使用该函数，但在 PHP 错误日志中我得到以下内容（对于不同的实例不止一次）：

```
[Mon May 28 02:02:46 2012] [error] [client <removed>] PHP Notice:  Undefined variable: app_config in /usr/home/<removed>/functions.php on line 11 
```

我什至尝试在functions.php中包含config.php，但无济于事。关于为什么这不起作用的任何想法？我敢肯定它相对简单，但我无法理解它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T01:10:35.660

两种选择：通过合同或全局变量

```
function db_connect() {
    global $app_config;
    mysql_connect($app_config['mysql_server'], $app_config['mysql_username'], $app_config['mysql_password']) or db_die(__FILE__, __LINE__, mysql_error());
    mysql_select_db($app_config['mysql_database']) or db_die(__FILE__, __LINE__, mysql_error());
}

// contract
function db_connect(array $app_config) {        
    mysql_connect($app_config['mysql_server'], $app_config['mysql_username'], $app_config['mysql_password']) or db_die(__FILE__, __LINE__, mysql_error());
    mysql_select_db($app_config['mysql_database']) or db_die(__FILE__, __LINE__, mysql_error());
} 
```

虽然你可以做一些更“优雅”的事情并创建一个[类](http://en.wikipedia.org/wiki/Object-oriented_programming)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T01:10:41.307

global $app_config，你想把它放在函数中，然后再使用该变量中的任何东西

这基本上是说从全局命名空间中检索 $app_config 变量以在此函数中使用。PHP 全局变量，虽然对所有函数都可用，但在您明确要求它之前不会涉及该函数的命名空间。这就是你正在发生的事情，你在“要求”之前使用了变量。

# objective-c - Objective-c : 这会造成内存泄漏吗

> ID：10778388
> 
> 赞同：0
> 
> 时间：2012-05-28T01:06:40.300
> 
> 标签：objective-c, memory-management, memory-leaks, delegates

如果我的代码如下所示：

```
 -(void) func {  
         ObjectA* A = [[ObjectA alloc]init];  

        [something doSomething:blah andDelegate: A]; 

    } 
```

假设 doSomething 的调用将发出一个 http 请求调用，因此只有在收到来自服务器的响应时才会调用委托。在这种情况下，会有延迟。注意：something 是类的实例变量。

如果我两次调用“func”，A 的第一个初始化是否会在它收到委托的响应之前被泄露。假设收到响应后调用委托函数时有释放操作。

我之所以想到这一点，是因为如果在第一个委托完成它的角色之前，第二个初始化的“A”作为委托传递给了某个东西。'A'的第二个初始化会取代'A'的第一个初始化吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T01:10:24.713

是的，如果您不使用 ARC 进行编译，则存在泄漏。您正在创建一个带有 的对象`alloc`，这意味着您拥有它，并且您不会通过发送来放弃该所有权`release`。这是[Cocoa 的核心内存管理规则](http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MemoryManagement.html)。

`something`您传递给的对象 可能`A`也需要拥有`A`（实际上，听起来就是这样）。如果是这样，`something`应该发送`retain`到不再需要时`A`再发送。`release``A`

> 'A'的第二个初始化会取代'A'的第一个初始化吗？

有点。该名称`A`仅在此方法内有效。当您创建一个对象并将其分配给`A`，然后该名称超出范围时，您将无法再引用该对象。这就是泄漏。当您再次运行此方法时，本质上`A`会创建一个新名称并为它分配另一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T01:08:57.097

`something`并且`func`应该释放`A`. `something`使用时也应保留`A`。

# android - 我需要在正在构建的应用程序中释放内存

> ID：10778390
> 
> 赞同：0
> 
> 时间：2012-05-28T01:06:48.860
> 
> 标签：android, memory, android-activity, process, task

我在 android 清单中使用 noHistory 但我的内存不断增加，最终导致我的应用程序崩溃，基本上我正在做的是让按钮允许用户左右导航，并且在第 20 次左右活动手机崩溃后，因为内存开始运行不足内存，

```
noHistory 
```

不工作有人可以帮忙吗？谢谢你

我看到了一些可能有用的东西，但有人可以解释一下如何使用

```
recycle() 
```

以及它是如何工作的，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T01:14:46.437

不保留任何历史记录并不能保证自动回收内存...

实际上，不能保证您的活动在调用 onDestroy 时会被垃圾回收

这是一个广泛的话题

看看开始

[http://android-developers.blogspot.co.uk/2009/01/avoiding-memory-leaks.html](http://android-developers.blogspot.co.uk/2009/01/avoiding-memory-leaks.html)

还有这个很棒的视频

[http://www.google.com/events/io/2011/sessions/memory-management-for-android-apps.html](http://www.google.com/events/io/2011/sessions/memory-management-for-android-apps.html)

# php - 我需要一些帮助来访问 PHP 中受保护数组中的成员函数

> ID：10778392
> 
> 赞同：0
> 
> 时间：2012-05-28T01:07:33.700
> 
> 标签：php, oop, function

现在我正在尝试编写一个允许我访问成员函数的函数。有问题的代码看起来有点像这样：

```
protected $formName;
protected $formClass;
protected $formAction;
protected $formMethod;
protected $formObjArray = array(); //outputs in order. So far it should only take newLine, selectTag, inputTag, textTag.
protected $submitBtnVal;
protected $encType;

function __construct($args) {
  $this->formName = $args['formName'];
  $this->formAction = $args['formAction'];

  if (isset($args['formClass'])) $this->formClass = $args['formClass'];
  if (isset($args['encType'])) $this->encType = $args['encType'];

  //default should be POST. Hell, you should never really be using GET for this..
  //also, the default submit value is Submit
  $this->formMethod = isset($args['formMethod']) ? $args['formMethod'] : "POST"; 
  $this->submitBtnVal = isset($args['submitBtnVal']) ? $args['submitBtnVal'] : "Submit";
}

//get functions
function getFormName () { return $this->formName; }
function getFormAction () { return $this->formAction; }
function getFormMethod () { return $this->formMethod; }
function getSubmitBtnVal () { return $this->submitBtnVal; }
function getEncType () { return $this->encType; }

//set functions
function setFormName ($newName) { $this->fromName = $newName; }
function setFormAction ($newAction) { $this->formAction = $newAction; }
function setFormMethod ($newMethod) { $this->formMethod = $newMethod; }
function setEncType ($newEType) { $this->encType = $newEType; }

function addTag($newTag) {
  if ($newTag instanceof formTag || $newTag instanceof fieldSetCont || $newTag instanceof newLine
      || $newTag instanceof noteTag)
    $this->formObjArray[] = $newTag;
  else throw new Exception ("You did not add a compatible tag.");
} 
```

我希望能够打电话`$myForm->getTagByName("nameA")->setRequired(true);`

我该怎么做？或者我需要做一些更像..

```
$tagID = $myForm->getTagByName("nameA");
$myForm->tagArray(tagID)->setRequired(true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T01:31:55.703

您的代码中似乎没有任何内容受到保护，因此您应该可以轻松访问其中的任何内容。

看起来您的所有标签都在 $formObjArray 中，因此过滤数组并返回与您传入的名称匹配的标签应该是微不足道的。您将遇到的麻烦是，`getTagByName`确实应该`getTagsByName`并且应该返回一个数组，因为您可以有多个同名标签。因为它会返回一个数组，所以你不能调用`setRequired`返回值，数组没有这样的方法。你需要做的更像：

```
$tags = $myForm->getTagsByName("nameA");
foreach ($tags as $tag) {
    $tag->setRequired(true);
} 
```

你到底在坚持什么？也许我不太了解这个问题。

所以也许过滤你卡住了？试试这个（如果你至少使用 php 5.3）

```
function getTagsByName($tagname) 
{
    return array_filter($this->formObjArray, function($tag) use($tagname) { 
        return $tag->getName() == $tagname; 
    });
} 
```

没有如果或开关。

在 5.3 之前，您没有 lambda 函数，因此您需要以不同的方式进行操作。有几种选择，但这可能是最容易理解的：

```
function getTagsByName($tagname) 
{
    $out = array();
    foreach ($this->formObjArray as &$tag) {
        if ($tag->getName() == $tagname) {
            $out[] = $tag;
        }
    }
    return $out;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T02:18:28.530

在您的 addTag 方法中，您使用 [] 表示法将新标签存储在 $this->formObjArray 中，这只会将新标签附加到数组的末尾。如果您的标记对象都有 getName() 方法，那么您可以执行以下操作：

```
$this->formObjArray[$newTag->getName()] = $newTag; 
```

然后，您可以轻松添加 getTagByName() 方法：

```
public function getTagByName($name) {
  if (array_key_exists($name, $this->formObjArray) {
    return $this->formObjArray($name);
  }
  else {
    return null;
  }
} 
```

请注意建议您遍历数组中所有标签的解决方案！随着您的表格变大，这可能会变得非常昂贵。

如果您需要使用 [] 构造，因为添加元素的顺序很重要，那么您仍然可以按名称维护一个单独的索引 $this->tagIndex，这将是一个 name => 标记的关联数组。由于您正在存储对象引用，因此它们不会使用太多空间。假设 getTagByName 将被多次使用，这将为您节省大量资源，而不是在每次调用 getTagByName 时迭代标签数组。

在这种情况下，您的 addTag 方法将如下所示：

```
$this->formObjArray[] = $newTag;
$this->tagIndex[$newTag->getName()] = $newTag; // it seems that you're doubling the memory needed, but you're only storing object references so this is safe 
```

**编辑**：这是一些修改后的代码，以解释多个标签可以具有相同名称的事实：

在您的 addTag() 方法中，执行以下操作：

```
$this->formObjArray[] = $newTag;
$tag_name = $newTag->getName();
if (!array_key_exists($tag_name, $this->tagIndex)) {
  $this->tagIndex[$tag_name] = array();
}
$this->tagIndex[$tag_name][] = $newTag 
```

然后，您可以将 getTagByName 重命名为 getTagsByName 并获得预期的结果。

As mentioned in the comments, this is only useful if you will call getTagsByName multiple times. You are trading a little additional memory usage in order to get quicker lookups by name.

# php - 使用 php/javascript 确定计算机中安装的软件

> ID：10778396
> 
> 赞同：-4
> 
> 时间：2012-05-28T01:08:04.383
> 
> 标签：php, javascript

有没有办法使用 php/javascript 或任何插件来检测计算机中安装了哪些软件。

我想要做的是，如果客户使用 firefox 或 ie 打开我们的网站，并且我们的网络检测到已安装 chrome，则 chrome 将自动打开并定向到我们的网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T01:10:27.500

不，你不能那样做。那将是一个巨大的安全风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T01:10:30.467

这是不可能的，对不起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T01:11:11.447

不，这是不可能的，除非你要求用户安装和运行使用 JavaScript 以外的东西编写的客户端软件。否则将是一个巨大的安全和隐私风险。

# jquery - 使用jQuery返回颜色名称

> ID：10778397
> 
> 赞同：2
> 
> 时间：2012-05-28T01:08:08.517
> 
> 标签：jquery, html, css, web

CSS：

```
.red-tile-color{
    background-color:red;
    color:white;
} 
```

JS：

```
var colorName = $(".red-tile-color").css("color"); 
```

返回：

```
rgb(255, 255, 255); 
```

如何返回在 css 上分配的颜色**名称？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:06:03.343

尝试从 rgb 值中获取名称会很麻烦。相反，我鼓励您使用[jQuery Color 插件](https://github.com/jquery/jquery-color)来确定当前颜色是否为特定值：

```
if ( $.Color( colorName ).is( "red" ) ) {
    /* Do X */
} else {
    /* Do Y */
} 
```

# objective-c - 用键盘控制 NSSegmentedControl

> ID：10778402
> 
> 赞同：1
> 
> 时间：2012-05-28T01:09:31.790
> 
> 标签：objective-c, cocoa, nsresponder, nssegmentedcontrol

我的 Cocoa 应用程序中有一个表单，其中包含我希望通过键盘控制的 NSSegmentedControl。然而，NSSegmentedControl 似乎很不愿意成为第一响应者。

将窗口的初始第一响应者设置为分段控件没有任何作用——当窗口第一次加载时，它将没有键盘焦点。如果我像这样手动设置第一响应者，它确实会获得焦点，但是：

`[segmentedControl.window makeFirstResponder: segmentedControl];`

如果表单的唯一部分是分段控件，那将可以正常工作。如果我添加另一个字段（例如，一个 NSTextField），并将分段控件的 nextResponder 设置为该字段，则分段控件将永远不会成为第一响应者。焦点将立即转到文本字段，按 Tab 键切换回分段控件不起作用。

我试过继承 NSSegmentedControl 并覆盖 AcceptFirstResponder、becomeFirstResponder 等，但无济于事。唯一有区别的是resignFirstResponder——如果我从那个方法返回NO，那么分段控件确实会保持焦点，但显然我不希望它一直保持焦点。

关于如何让控件表现得像普通响应者的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T02:29:30.687

它的行为符合预期。并非所有控件都参与“关键视图循环”。*通过系统偏好设置中的通用访问为所有*应用程序打开全键盘导航，而不是单个应用程序自行实现。

最好不要在用于繁重键盘输入的表单中使用分段控件。NSPopUpButton 与我们在 Web 表单中所期望的更接近，因此它并不一定是您应用程序 UI 中的*错误*选择。

与其准确回答您提出的问题（其他人可以这样做），我谦虚地建议您以稍微漂亮的 UI 元素为代价选择功能方面，因为更漂亮的 UI 元素并非旨在与键盘相处.

# php - 清理噪音词，例如 the, a, and or etc...

> ID：10778404
> 
> 赞同：0
> 
> 时间：2012-05-28T01:09:35.677
> 
> 标签：php, string, parsing, text, stop-words

我知道这是一个很长的镜头，但无论如何我都会问。

我想对某些文本运行过滤器，并且我想删除英语中出现次数最多的单词，例如“The”、“a”、“and”、“or”等...

这个挑战是否在某个地方得到了解决，这样你就可以获得一个*很好*的此类单词列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T01:44:01.043

您正在寻找的官方术语是“停用词”。对于英语，我经常使用 Solr 搜索引擎中的 stopwords.txt 列表：

[https://code.google.com/p/solrmarc/source/browse/trunk/test/data/smoketest/solr/conf/stopwords.txt?r=1333](https://code.google.com/p/solrmarc/source/browse/trunk/test/data/smoketest/solr/conf/stopwords.txt?r=1333)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T01:39:44.167

我会使用 str_replace()

例子：

```
str_replace("and", "", $text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T01:22:22.330

正则表达式怎么样？查看此页面的“单词”部分，[http://www.roscripts.com/PHP_regular_expressions_examples-136.html](http://www.roscripts.com/PHP_regular_expressions_examples-136.html)。有一些示例正则表达式，包括对单词进行操作的模式。

```
//Words: Whole word
//Match one of the words from the list
'\b(?:word1|word2|word3)\b' 
```

# javascript - 重写 Javascript 方程

> ID：10778405
> 
> 赞同：-1
> 
> 时间：2012-05-28T01:09:48.073
> 
> 标签：javascript

我有以下一段代码

```
var total = 5;
var arr = new Array("750", "400", "432", "355", "263");
id = 0;
num = 100;
var ht = 310;
var max = 750;
var cm = 20;
var bHg = 0;
var wdt = 100;
var bm = 20;
for (var i = 0; i < total; i++) {
    ar = parseInt(arr[i]);
    // how to rewrite these equations
    **bHg = (ar * ht / max) / num * id;
    printfu(cm + 50 + (i * (wdt + bm)) + bm,
                cm + (ht - bHg), wdt, bHg);**
}

function printfu(a,b,c,d) {
    document.write(a + b + c + d + "\n");
} 
```

从学习的目的来看，我怎样才能用不同的方程写两行来产生相同的输出

```
bHg = (ar * ht / max) / num * id;
printfu(cm + 50 + (i * (wdt + bm)) + bm, cm + (ht - bHg), wdt, bHg); 
```

以上的输出

520 640 760 880 1000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T01:32:59.383

这两行可以简化为：`i * k1 + k2`where`k1`和`k2`are constants。

完整的解决方案：

```
var total = 5;
var arr = new Array("750", "400", "432", "355", "263");
id = 0;
num = 100;
var ht = 310;
var max = 750;
var cm = 20;
var bHg = 0;
var wdt = 100;
var bm = 20;

/*
// It helps to note the bHG is ar times some constant.

var k = ht / max * num * id
var kA = (i * (wdt + bm)) + bm + cm + 50;
var kB = cm + (ht - bHg);
var kC = wdt;
var kD = bHg;

// bHg = ar * k;
var sum = kA + kB + kC + kD;
//=> (i * (wdt + bm)) + bm + cm + 50 + cm + (ht - bHg) + wdt + bHg
//=> (i * (wdt + bm)) + bm + 2*cm + 50 + ht + wdt
*/

var k1 = wdt + bm;
var k2 = bm + 2*cm + 50 + ht + wdt;

for (var i = 0; i < total; i++) {
   document.write(i * k1 + k2 + "\n");
}

//function printfu(a,b,c,d) {
//    document.write(a + b + c + d + "\n");
//} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T01:32:26.930

好吧，从外观上看，我想您可以预先计算一些东西。如果我没记错的话，该`printfu`函数将数字加在一起？在这种情况下，它简化为：

```
cm + 50 + i * (wdt + bm) + bm + cm + ht - bHg + wdt + bHg
= 2*cm + i*(wdt + bm) + bm + ht + wdt + 50 
```

由于它不再依赖于 bHg，因此您也可以预先计算它。所以这会起作用：

```
var pcp = ht * id / max / num,
    pcq = 2*cm + bm + ht + wdt + 50;
for( var i=0;...) {
    bHg = ar * pcp;
    document.write((pcq + i*(wdt+bm))+"\n");
} 
```

# firefox - 需要澄清 MutationObserver API

> ID：10778409
> 
> 赞同：3
> 
> 时间：2012-05-28T01:10:00.560
> 
> 标签：firefox, google-chrome, mutation-observers

W3C 正在提议 MutationObserver API 来替换 Mutation Event API。更多信息在这里：[http](http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#mutation-observers) ://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#mutation-observers 。

我有一个关于新 API 的新手问题

1.  在 MutationRecord 中，previousSibling 和 nextSibling 的目的是什么？如果有多个addedNodes 和removedNodes，它们指向哪里？
2.  如果有多个添加节点和删除节点，如何确定它们发生的顺序？
3.  同一个节点可以在addedNodes 和removedNodes 中，例如一个节点被添加并立即删除？如果是，同一节点是否可以在任何类别中多次出现，例如节点被添加、删除并再次添加？如果是，则上面的#2 问题变得更相关。

仅供参考，这些 API 刚刚出现在 Firefox 和 Webkit nightly build（除了出现在 Chrome 中）。

谢谢， 苏尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:07:53.647

我在这里找到了一个讨论，它提供了一些答案： http: [//lists.w3.org/Archives/Public/public-webapps/2011JulSep/1622.html](http://lists.w3.org/Archives/Public/public-webapps/2011JulSep/1622.html)。

# c++ - C++ API 的 REST 与 RPC

> ID：10778417
> 
> 赞同：3
> 
> 时间：2012-05-28T01:11:12.350
> 
> 标签：c++, api, rest, rpc

我正在编写一个用作 Web 服务的 C++ API。API 中的函数将 images/path_to_images 作为输入参数，对其进行处理，并给出一组不同的 images/paths_to_images 作为输出。我正在考虑实现一个 REST 接口，以使开发人员能够将这个 API 用于他们的项目（独立于他们想要使用的任何语言）。但是，我知道 REST 仅在您拥有要查询或操作的数据集合时才是好的，这里并非完全如此。[我拥有的集合具有操纵所提供数据的不同功能。]

那么，我最好为此实现一个 RPC 接口，还是可以使用 REST 本身来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:47:24.787

REST 使用常用操作 GET,POST,DELETE,HEAD,PUT。可以想象，这是非常面向数据的。但是，对数据类型没有限制，对数据的大小也没有限制（无论如何我都不知道）。因此几乎可以在所有情况下使用它（包括发送二进制数据）。REST 的优点之一是 Web 浏览器理解 REST，并且您的用户不需要专门的应用程序来发送请求。

RPC提供了更多的可能性，也可以使用。例如，您可以定义自定义操作。考虑到你打算做什么，不确定你需要那么多的力量。

我个人会选择 REST。

这是您可能想阅读的链接： [http ://www.sitepen.com/blog/2008/03/25/rest-and-rpc-relationship/](http://www.sitepen.com/blog/2008/03/25/rest-and-rpc-relationship/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T03:30:10.720

像 lcfseth 一样，我也会选择 REST。REST 确实是基于资源的，在您的情况下，您可能会认为没有资源可以处理。但是，这并不完全正确，系统中的图像转换器就是资源。您将图像发布到它，它会返回新图像。所以我只需创建一个 URL，例如：

```
POST http://example.com/image-converter 
```

您将图像发布到它，它会返回一些包含新图像路径的数组。

潜在地，您还可以拥有：

```
GET http://example.com/image-converter 
```

它可以告诉您图像转换的状态（假设这是一个耗时的过程）。

这样做的好处是您可以重复使用开发人员熟悉的 HTTP 动词，界面几乎是自记录的（当然您仍然需要记录 POST 调用接受和返回的格式）。使用 RPC，您必须定义新动词并记录它们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T01:17:20.823

与 RPC 相比，REST 的（json 风格接口）是轻量级的，API 用户易于使用。RPC(soap/xml) 看起来很复杂而且很重。

我猜你想要的是基于 HTTP+JSON 的 API，而不是 REST 作者声称的 REST API [http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven](http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven)

# c# - 如何不中止http响应c#

> ID：10778426
> 
> 赞同：6
> 
> 时间：2012-05-28T01:12:05.660
> 
> 标签：c#, asp.net

在将文件发送给用户进行下载后，我需要运行几种方法。发生的情况是，在我向用户发送文件后，响应被中止，之后我无法再做任何事情`response.end()`。

例如，这是我的示例代码：

```
 Response.Clear();
 Response.AddHeader("content-disposition", "attachment;  filename=test.pdf");
 Response.ContentType = "application/pdf";
 byte[] a = System.Text.Encoding.UTF8.GetBytes("test");
 Response.BinaryWrite(a);
 Response.End();
 StartNextMethod();
 Response.Redirect(URL); 
```

所以，在这个例子中`StartNextMethod`并`Response.Redirect`没有执行。

我尝试的是使用以下代码创建了一个单独的处理程序（ashx）：

```
public void ProcessRequest(HttpContext context)
        {
            context.Response.Clear();
            context.Response.AddHeader("content-disposition", "attachment;  filename=test.pdf");
            context.Response.ContentType = "application/pdf";
            byte[] a = System.Text.Encoding.UTF8.GetBytes("test");
            context.Response.BinaryWrite(a);
            context.Response.End();
        } 
```

并这样称呼它：

```
Download d = new Download();
d.ProcessRequest(HttpContext.Current);
StartNextMethod();
Response.Redirect(URL); 
```

但同样的错误发生。我已经尝试用 CompleteRequest 替换 Response.End 但它没有帮助。

我想问题是我正在使用 HttpContext.Current 但应该使用单独的响应流。那是对的吗？我通常如何在单独的方法中执行此操作（假设我希望我的处理程序接受数据和内容类型的字节数组并且可以从单独的响应中下载。我真的不想使用单独的页面进行响应。

**更新**
我仍然没有找到一个好的解决方案。我想在用户下载文件后执行一些操作，但不使用单独的页面进行响应\请求。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T15:48:29.830

**更新**
既然你说没有第二页，那就这样做吧。向您的页面添加一个部分，用于检查查询字符串参数（例如 fileid 或路径等）。如果存在此值，则它将使用您现有的代码启动下载过程。如果此值不存在，则它会正常运行。

现在，当用户单击下载链接时，您执行回发（您已经在执行此操作）。在这篇回帖中，在页面上创建一个 iFrame，并使用添加的查询字符串参数（mypage.aspx?id=12664 或 ?download=true，类似的东西）将 iFrame 的 URL 设置为您的页面 URL。创建 iframe 后，执行您希望的任何其他数据绑定/等。

**示例**
- [http://encosia.com/ajax-file-downloads-and-iframes/](http://encosia.com/ajax-file-downloads-and-iframes/)

上面链接的示例使用 iFrame 和更新面板，就像您在谈论的那样。

**Original Post**
Response.Flush 将允许您在将文件发送给用户后继续处理，或者只是不调用 Response.End （您也不需要）。

但是 Daniel A. White 是正确的，您在发送文件后实际上无法从代码中重定向，如果您尝试，您会收到错误消息。但是，如果需要，您可以继续执行其他服务器端操作。

其他答案与普遍共识一致，文件开始下载后您无法重定向：[https](https://stackoverflow.com/a/822732/328968) ://stackoverflow.com/a/822732/328968 （PHP，但概念相同，因为它通常涉及 HTTP）。或[下载文件后定向到新页面](https://stackoverflow.com/questions/1244621/directing-to-a-new-page-after-downloading-a-file)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T05:08:10.760

[Response.End()](http://msdn.microsoft.com/en-us/library/ms524629%28v=vs.90%29.aspx)引发线程中止异常。它旨在结束您的回复。之后没有代码将在该线程中处理。

> End 方法使 Web 服务器停止处理脚本并返回当前结果。不处理文件的其余内容。

你想达到什么目的？

如果您的目的是允许 pdf 下载然后将用户带到其他页面，那么一点 javascript 可以帮助您。

添加一个带有计时器的脚本，将 location.href 设置为您的重定向页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T21:13:29.493

正如之前的答案所述 - 返回 PDF 文件意味着发送 HTTP 标头。之后您无法发送其他标头，并且 Response.Redirect() 仅表示发送 HTTP 302。

如果您不想有单独的页面，或者您不想使用 AJAX，为什么不尝试：

```
<head>
    <meta http-equiv="refresh" content="3; url=http://www.site.com/download.aspx?xxxx">
</head> 
```

实际上，这将显示您想要向用户显示的所需页面，并在 3 秒后刷新页面，并带有下载 PDF 文件的 URL。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T16:29:40.067

分块下载文件，如[ASP.NET 中的文件下载和跟踪下载成功/失败状态或](http://www.codeproject.com/Articles/74654/File-Download-in-ASP-NET-and-Tracking-the-Status-o)[此问题](https://stackoverflow.com/questions/2120603/asp-net-memory-usage-during-download)的答案所示。当文件的最后一块被写入客户端时，您可以执行您需要的代码。（不必在最后，可以根据您的需要介于两者之间。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T06:23:20.853

用户点击下载按钮`WebForm1.aspx`开始下载文件。然后，在文件下载完成后（由 提供`WebForm2.aspx`），用户会被自动重定向。

`WebForm1.aspx`

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#btnDL').click(function () {
            $('body').append('<iframe src="WebForm2.aspx" style="display:none;"></iframe>');
            return true;
        });
    });
</script>
<asp:Button runat="server" ID="btnDL" ClientIDMode="Static" Text="Download" OnClick="btnDL_Click" /> 
```

`WebForm1.aspx.cs`

```
protected void btnDL_Click(object sender, EventArgs e)
{
    var sent = Session["sent"];

    while (Session["sent"]==null)
    {// not sure if this is a bad idea or what but my cpu is NOT going nuts
    }

    StartNextMethod();
    Response.Redirect(URL);

} 
```

`WebForm2.aspx.cs`

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.Clear();
    Response.AddHeader("content-disposition", "attachment;  filename=test.pdf");
    Response.ContentType = "application/pdf";
    byte[] a = System.Text.Encoding.UTF8.GetBytes("test");
    Response.BinaryWrite(a);
    Session["sent"] = true;
} 
```

`Global.asax.cs`

```
protected void Session_Start(object sender, EventArgs e)
{
    Session["init"] = 0; // init and allocate session data storage
} 
```

注意：确保不要使用 ashx（通用处理程序）来提供您的下载。出于某种原因，ashx 和 aspx 中的会话不会相互交谈，除非您实现[this](http://www.hanselman.com/blog/GettingSessionStateInHttpHandlersASHXFiles.aspx)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T16:37:42.273

只需删除，`context.Response.End();`因为无论如何您都在重定向...

问题是这里的逻辑有缺陷......你为什么要结束响应？

获取 PDF 并显示指向它的链接或使用`META`刷新重定向到 PDF 的位置，或者您也可以显示链接或使用这两种技术的组合。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-06T21:16:28.233

我相信你正在尝试的不会奏效。

这就是我要做的：

1.  将内容写入本地文件并为其分配唯一 ID
2.  将用户发送到包含隐藏框架的下一页，该隐藏框架执行具有唯一 ID 的请求（javascript）
3.  隐藏请求页面加载文件并推送内容流。

这与许多文件下载站点使用的行为相同。唯一的问题是如果隐藏框架无法执行请求（javascript 关闭），为什么如果自动请求失败，许多相同的站点都有可用的链接。

缺点：文件清理。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-16T15:18:39.593

我推荐这个解决方案：

1.  不要使用 response.End();

2.  声明这个全局变量： bool isFileDownLoad;

3.  就在您的 (Response.BinaryWrite(a);) set ==> isFileDownLoad = true; 之后

4.  覆盖您的渲染，如：

    /// /// AEG : 处理线程中止异常非常重要 /// /// override protected void Render(HtmlTextWriter w) { if (!isFileDownLoad) base.Render(w); }

# spring - Spring选择多个标签和绑定

> ID：10778428
> 
> 赞同：5
> 
> 时间：2012-05-28T01:12:12.927
> 
> 标签：spring, jsp, spring-mvc

我正在尝试使用 spring 的 select 标记来选择多个选项来填充列表。我的选择标签显示良好，当我选择选项时，列表已正确更新。

我遇到的唯一问题是，当我使用已填充的列表渲染 for 时，我的选择标签不会突出显示选定的选项。我尝试调试并且我可以看到列表不是空的，它实际上是似乎没有将选定选项标记为选定的标签。

我的代码：

```
@Entity
public class ProductsGroup
{
    @Version  @Column(name = "version")
    private Integer version;
    @Id @GeneratedValue(strategy = GenerationType.AUTO) @Column(name = "id")
    private Integer id;

    @ManyToMany(fetch = FetchType.EAGER)
    private List<Product> products; 

    public List<Product> getProducts()
    {
        return products;
    }

    public void setProducts(List<Product> products)
    {
        this.products = products;
    }
}

@Entity
public class Product
{
    @Version @Column(name = "version")
    private Integer version;

    @Id @GeneratedValue(strategy = GenerationType.AUTO) @Column(name = "id")
    private Long id;

    private String name;

    public String getName()
    {
        return name;
    }

    public void setName(String name)
    {
        this.name = name;
    }
}

<form:form action="${action}" class="fancyform" commandName="productsGroup" id="productForm">
    ....
    <form:select path="products" items="${products}" itemLabel="name" itemValue="id" multiple="true"/>
    ....
</form:form> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T06:49:59.317

It's probably due to the fact that the list of selected products doesn't contain the same instances as the complete list of displayed products.

The tag compares products with `equals()`, and you have not overridden `equals()` (and `hashCode()`) in your Product class.

So even if the selected products contain the Product with the name "foo", and the complete list of Product also contains a Product with the name "foo", those products are not equal, and Spring thus doesn't know they're the same product, and that this product should thus be selected.

# jquery - 如何在 cakephp2.1 中使用 jquery 更新 div 内容

> ID：10778431
> 
> 赞同：-1
> 
> 时间：2012-05-28T01:12:51.093
> 
> 标签：jquery, cakephp, load

所以我想单击一个按钮来更新 div 中的控制器操作，如下所示：

```
$('.navMenuButton').click(function(){
    $('#workarea').load('/controller/action');
}) 
```

我可以使用 jquery load() 方法在 cakephp 中做到这一点，如何？顺便说一句，cakephp'2.x 文档对 jshelper 没有太大帮助，有人可以推荐一些书或告诉我如何使用 jshelper！谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:03:00.617

是的你可以

您想停止使用页面布局模板并返回视图。

您可以在视图中包含 RequestHandler 组件或将布局设置为 ajax：

```
$this->layout = "ajax"; 
```

# ruby-on-rails - 如何对序列化属性执行包含验证？

> ID：10778434
> 
> 赞同：5
> 
> 时间：2012-05-28T01:14:40.843
> 
> 标签：ruby-on-rails, validation, serialization

我有一个带有序列化属性（数组）的模型。只有当数组的每个成员都包含在预先确定的选项中时，我才想验证模型。

示例：我有一个具有“情绪”属性的 Person 模型。用户可以有多种情绪，但每种情绪必须是“快乐”、“悲伤”、“疲倦”或“愤怒”。

该模型将是这样的：

```
class Person < ActiveRecord::Base
  MOODS = %w[happy sad tired angry]
  # validates :inclusion => { :in => MOODS } 

  attr_accessible :mood
  serialize :mood
end 
```

注释验证不起作用。有什么方法可以让它工作还是我需要自定义验证？

（注意：我不想创建单独的 Mood 模型。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T11:10:28.343

```
class Person < ActiveRecord::Base
  MOODS = %w[happy sad tired angry]
  validate :mood_check
  attr_accessible :mood
  serialize :mood

protected
  def mood_check
    mood.each do |m|
      errors.add(:mood, "#{m} is no a valid mood") unless MOODS.include? m
    end
  end

end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-05T17:53:49.790

将其留在这里以防将来对任何人有所帮助-我编写了一个 gem 来更好地处理验证序列化属性。您可以将这些验证放在块语法中，您可能期望的方式：

```
class Person < ActiveRecord::Base
  MOODS = %w[happy sad tired angry]
  attr_accessible :mood
  serialize :mood

  validates_array_values :mood, inclusion: { in: MOODS }
end 
```

[https://github.com/brycesenz/validates_serialized](https://github.com/brycesenz/validates_serialized)

# javascript - 如何以数字方式访问 Javascript 对象的成员？

> ID：10778436
> 
> 赞同：1
> 
> 时间：2012-05-28T01:15:06.380
> 
> 标签：javascript, arrays, json, object

例如，我有以下 Javascript 对象：

```
var Object = {
   Person_A: { name: 'James', age: 40, country: 'Spain' }, 
   Person_B : { name: 'Smith', age: 50, country: 'France' } 
} 
```

我想知道对象中有多少属性`Object`，并以数字方式访问这些属性，例如通过`Object[n]`。

直到现在（我很少使用 Javascript 对象，但在使用 AJAX 时我确实使用 JSON 作为返回格式）我不知道 Javascript 对象没有`length`方法并且不能以数字方式访问。

我尝试将 Javascript 对象转换为与我进行 AJAX 调用时返回的相同类型的 JSON（JSON 作为具有长度方法的对象返回，并且可以数字访问 -**只需读取另一个线程，也许我'我错了 - 现在仔细检查**）使用`JSON.parse(JSON.stringify(Object))`但它只是返回相同的确切对象。

所以，我的问题是，获取像示例这样的对象并使其以数字方式可访问并具有`length`方法的最有效方法是什么。

任何帮助将不胜感激（请询问您是否需要澄清我的问题）。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T01:18:07.597

这不能用意义来完成。JavaScript 对象的属性没有内在的顺序¹。

该`length`属性是 Arrays 的*特殊*成员。（数组只是具有特定 [[prototype]] 并了解如何神奇地更新的对象`length`——并定义了一些其他内部规则——就是这样！）

* * *

更新评论：

如果需要索引，请使用数组：

```
var people = [
   { id: "Person_A", data: { name: 'James', age: 40, country: 'Spain' } },
   { id: "Person_B", data: { name: 'Smith', age: 50, country: 'France' } }
]

people[0].id // "Person_A" 
```

* * *

^(1 JSON)*仅在序列化为文本时* “具有顺序” ，但实现（包括将其转换为 JavaScript 对象的实现）无需访问 [或假设] 关于顺序即可工作；根据 JSON 标准，属性没有*顺序保证。*仅仅因为对象中的属性“看起来”以 JSON（或 JS 对象文字）排序，并不意味着顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T01:19:26.327

如果您想用一个可数字访问的数组完全替换该对象，您可以首先循环遍历它以构建该新数组：

```
var newArray=new array();
for(i in object){
    array.push(i);
} 
```

您现在可以以数字方式访问该数组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T01:19:11.053

```
function numericIndices(obj) {
    var i=0, x;
    for( x in obj) {
        obj[i] = obj[x];
        i++;
    }
    // next line is OPTIONAL:
    obj.length = i;
} 
```

给定一个对象，这会将数字索引添加到该对象。因此，在通过该函数运行它之后，该对象将同时具有字符串键和数字键。如果您也有可选行，那么您也会自动获得一个`length`属性。

# java-ee-6 - javax.ws.rs.core.PathSegment 和 Errai

> ID：10778437
> 
> 赞同：0
> 
> 时间：2012-05-28T01:15:10.553
> 
> 标签：java-ee-6, jax-rs, errai

[Errai 支持 JAX-RS](https://docs.jboss.org/author/display/ERRAI/Errai+JAX-RS)，尽管当我尝试将它与提供的[Maven 原型](http://docs.jboss.org/errai/2.0.Beta1/errai/quickstart/html/sid-12484923.html)一起使用时， GWT 抱怨错误：

```
No source code is available for type javax.ws.rs.core.PathSegment; did you forget to inherit a required module? 
```

[PathSegment 接口似乎是官方 Java EE 标准的一部分](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/PathSegment.html)，那么为什么这个类不可用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:26:15.370

一种解决方案是在您的 GWT 项目中创建 javax.ws.rs.core 包，并为您自己包含接口。这些接口是 MultivaluedMap：

```
package javax.ws.rs.core;

import java.util.List;
import java.util.Map;

/**
 * A map of key-values pairs. Each key can have zero or more values.
 * 
 */
public interface MultivaluedMap<K, V> extends Map<K, List<V>> {

    /**
     * Set the key's value to be a one item list consisting of the supplied value.
     * Any existing values will be replaced.
     * 
     * @param key the key
     * @param value the single value of the key
     */
    void putSingle(K key, V value);

    /**
     * Add a value to the current list of values for the supplied key.
     * @param key the key 
     * @param value the value to be added.
     */
    void add(K key, V value);

    /**
     * A shortcut to get the first value of the supplied key.
     * @param key the key
     * @return the first value for the specified key or null if the key is
     * not in the map.
     */
    V getFirst(K key);

} 
```

路径段：

```
package javax.ws.rs.core;

/**
 * Represents a URI path segment and any associated matrix parameters. When an
 * instance of this type is injected with {@link javax.ws.rs.PathParam}, the
 * value of the annotation identifies which path segment is selected and the
 * presence of an {@link javax.ws.rs.Encoded} annotation will result in an
 * instance that supplies the path and matrix parameter values in
 * URI encoded form.
 *
 * @see UriInfo#getPathSegments
 * @see javax.ws.rs.PathParam
 */
public interface PathSegment
{

   /**
    * Get the path segment.
    * <p/>
    *
    * @return the path segment
    */
   String getPath();

   /**
    * Get a map of the matrix parameters associated with the path segment.
    * The map keys are the names of the matrix parameters with any
    * percent-escaped octets decoded.
    *
    * @return the map of matrix parameters
    * @see <a href="http://www.w3.org/DesignIssues/MatrixURIs.html">Matrix URIs</a>
    */
   MultivaluedMap<String, String> getMatrixParameters();

} 
```

您需要一个 GWT 模块文件（在 javax.ws.rs 包中）：

```
<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 1.6//EN"
        "http://google-web-toolkit.googlecode.com/svn/releases/1.6/distro-source/core/src/gwt-module.dtd">
<module rename-to="App">
    <source path="core"/> 
</module> 
```

您需要为您的应用程序 GWT 模块添加一个继承引用：

```
<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 1.6//EN"
        "http://google-web-toolkit.googlecode.com/svn/releases/1.6/distro-source/core/src/gwt-module.dtd">
<module rename-to="App">
    <inherits name='com.google.gwt.user.User'/>
    <inherits name="org.jboss.errai.common.ErraiCommon"/>
    <inherits name="org.jboss.errai.ioc.Container"/>

    <inherits name="org.jboss.errai.enterprise.Jaxrs"/> 
    <inherits name="com.redhat.topicindex.rest"/>
    <inherits name="javax.ws.rs.core"/>
</module> 
```

# php - CSCART：如何在产品详细信息页面上合并产品样本

> ID：10778438
> 
> 赞同：0
> 
> 时间：2012-05-28T01:15:23.417
> 
> 标签：php, zend-framework, e-commerce, cs-cart

我正在一个销售面料商品的网站上工作，为此我使用了 CSCART 作为购物车解决方案。我遇到了一个问题，让我简要描述一下：

网站所有者想要合并产品样本（他称之为 Swatch [定义：样本，尤其是织物。]）。他需要产品详细信息页面上的一个按钮，该按钮的工作方式与“添加到购物车”相同，而不是将特定产品添加到购物车中，而是将色板和色板价格添加到购物车中

为了实现这一点：

1.  我创建了一个“样本产品”。

但问题是，如果有人将 Swatch 产品添加到他的购物车并结帐，管理员怎么会知道请求的样本是哪个产品。

有什么办法可以解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-31T07:05:45.117

您可以使用 cscart 的产品选项功能。因此，您必须定义样本选项以及该产品的价格。现在您只需要更改产品详细信息页面的布局，因此每当客户添加要购买的样本产品时，将使用产品选项。在这种情况下，管理员可以查看订购了哪些产品样本选项。

要了解有关产品选项的更多信息，请访问此链接 - [http://docs.cs-cart.com/4.3.x/user_guide/manage_products/options/product_options.html](http://docs.cs-cart.com/4.3.x/user_guide/manage_products/options/product_options.html)

希望这能解决您的目的。

# unit-testing - 有没有办法访问一个进程的所有 fs.watch 侦听器？

> ID：10778439
> 
> 赞同：0
> 
> 时间：2012-05-28T01:15:25.267
> 
> 标签：unit-testing, node.js, fs

我正在尝试以可以调试测试的方式实现单元测试平台，单元测试自动化运行器，这种方式涉及在每次测试运行之间清除尽可能多的资源，例如 require.cache。

我遇到的问题是 FSWatcher 实例（如果有的话是由单元测试及其相关代码创建的）在每次测试运行时都会被复制，从而造成明显的内存泄漏，并在控制台中打印大红色警告。有没有办法从流程中找到它们以关闭它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:11:19.030

[http://nodemanual.org/latest/nodejs_ref_guide/fs.FSWatcher.html](http://nodemanual.org/latest/nodejs_ref_guide/fs.FSWatcher.html)

您可以在 FSWatcher 上调用 close()。

# asp.net - 防止 UpdatePanel 在服务器上加载整个页面

> ID：10778440
> 
> 赞同：2
> 
> 时间：2012-05-28T01:16:02.043
> 
> 标签：asp.net, performance, webforms, updatepanel, asp.net-3.5

据我了解，更新 UpdatePanel 时，会重建整个页面，但实际上只有 UpdatePanel 内的内容会重新加载到页面上。

我的页面的某些部分渲染速度很慢（由于数据库调用），如果只需要重新加载页面的一小部分，我不希望所有这些都在*每次回发时重新加载。*

示例 - 在页面顶部（在 UpdatePanel 之外）我显示一组总计，在 UpdatePanel 内我有一个带有“下一页”按钮的网格。当我单击“下一步”时，我希望网格更新，但我不希望服务器再次查询数据库以获取所有总数。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:01:53.050

您可以检查回发是否来自更新面板。如果是这样的话，那么你只是不计算总数。

如果您有多个更新面板，那么您可以通过检查以下内容来检查更新面板所做的回发：

```
bool isUpdatePanelPostBack 
        = ScriptManager.GetCurrent(Page).AsyncPostBackSourceElementID
          .Equals(yourUpdatePanel.UniqueID);

if(!isUpdatePanelPostBack) {
    //calculate your totals 
} 
```

如果您的页面上只有一个更新面板，那么您只需检查 IsInAsyncPostback 以设置布尔值：

```
bool isUpdatePanelPostback = ScriptManager.GetCurrent(Page).IsInAsyncPostBack; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:42:14.537

标准方法是在运行总计逻辑之前进行 !PostBack 检查。这样，它们仅在页面第一次加载时计算，之后它们被保存在您用来显示它们的控件的 ViewState 中。

或者，如果您使用数据绑定（使用 ObjectDataSource），那么这将自动为您处理，因为数据绑定只会在页面第一次加载时发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T01:19:36.673

您始终可以检查页面的[IsAsync](http://msdn.microsoft.com/en-us/library/system.web.ui.page.isasync.aspx)属性以将代码块排除在运行之外。

# javascript - 获取选择框的名称属性

> ID：10778443
> 
> 赞同：0
> 
> 时间：2012-05-28T01:16:57.300
> 
> 标签：javascript, jquery, jquery-selectors

我从未使用过 name 属性，但在 MVC 中看起来我必须这样做。

我有

```
<select name="testname" onChange="Alert()">
<option value="8">Test</option>
</select> 
```

JS

```
function Alert(){
alert(this.name);
} 
```

结果应该是 alert("testname")

它很简单，但我从未使用过，而且很难在谷歌上找到，因为每个人都在询问获得价值或索引：D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T01:30:51.033

问题在于，由于您调用`Alert`,的方式`this`是指`window`，而不是 DOM 元素。您可以将其作为参数传递给函数：

```
<select name="testname" onchange="Alert(this)"> 
```

和

```
function Alert(element){
    alert(element.name);
} 
```

有比使用 HTML 属性更好的附加事件处理程序的方法。我建议阅读[quirksmode.org 上有关事件处理的各种文章](http://www.quirksmode.org/js/introevents.html)。

还要确保您了解[其`this`工作原理](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)。

当然你也可以写

```
<select name="testname" onchange="alert(this.name)"> 
```

* * *

如果您使用的是 jQuery，那么您应该使用它来绑定事件处理程序。例如：

```
$('select[name=testname]').change(function() {
    alert(this.name);
}); 
```

看看[jQuery 教程](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery)并花时间阅读[API 文档](http://api.jquery.com/)，这是值得的。

# c# - 通过代码突出显示 ListViewItem 背景颜色

> ID：10778444
> 
> 赞同：2
> 
> 时间：2012-05-28T01:17:07.750
> 
> 标签：c#, winforms

如果我用鼠标单击列表视图的一个项目，颜色将变为“突出显示”颜色，但如果我通过如下代码执行此操作：（ *MultiSelect 应该为 True，并且我将 HideSelection 设置为 False）*

```
myListView1.Items[2].Selected = true; 
```

那么它将是灰色的......不好！当我用鼠标手动单击它们时，我希望它具有相同的突出显示颜色:(

我也尝试添加此代码，但这也不起作用，仍然是灰色的

```
myListView1.Items[2].BackColor = System.Drawing.Color.Blue; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:07:18.463

这是 ListView 在选择项目时的行为，但它**没有**获得焦点。

因此，要获得您所追求的“蓝色”，只需添加它；

```
listView1.Focus(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T02:20:44.773

你能在你的列表视图的 SelectedIndexChanged 事件中试试这个吗？

```
ListViewItem lv = YourListview.GetItemAt(YourListView.PointToClient(Cursor.Position).X, YourListView.PointToClient(Cursor.Position).Y);

// this kind of Control.GetItemAt() works everywhere you need to find your mouse position ;)

// if you need to find position for screen (i.e. if you want to show a messagebox at the center of screen) you can use PointToScreen instead of PointToClient

 if (lv == null) 
 { 
   return; 
 }

else if (yourfirstpossibility == true)
{
  lv.Selected = true;
  lv.BackColor = Color.FromKnownColor(KnownColor.ButtonHighLight);

 // or which color you prefer. FromKnownColor retrieves system colors which you can see in backcolor / forecolor property => "system" named palette

} 
```

我在 item_checked 事件中为我的列表视图使用的这段代码有点不同（更复杂）..希望它对你有帮助..

# apache - 将域重定向到另一个域相同的子文件夹结构

> ID：10778448
> 
> 赞同：1
> 
> 时间：2012-05-28T01:17:23.487
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我想将域重定向到另一个域和相同的子文件夹结构

例如 ：-

```
http://www.domain.com/forum 
```

将被重定向到

```
http://www.domain.net/forum 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T01:25:16.710

我希望它有帮助：

```
RewriteCond %{HTTP_HOST} ^(www\.)?domain.com$ [OR] 
RewriteCond %{HTTP_HOST} ^(www\.)?domain.org$ 
RewriteRule (.*)$ http://domain.net/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T01:26:53.533

尝试这个

```
RewriteCond %{HTTP_HOST} ^(www\.)?domain.com/$
RewriteRule ^(.*)$ http://www.domain.net/$1 [R=301,L] 
```

# php - 我需要帮助找出为什么我的带有 Jquery Validator 的 php 表单无法正确验证

> ID：10778449
> 
> 赞同：0
> 
> 时间：2012-05-28T01:17:33.243
> 
> 标签：php, jquery, forms, validation

我有一个带有 jquery 验证器脚本的 php 表单，它只验证了四个必填字段中的两个。已验证的两个字段是名称和电子邮件，但如果您不输入任何内容 - 错误消息会显示“仅限字母字符”而不是“请输入您的姓名”。设计要求我输入每个字段的名称字段作为表单中的占位符,我不确定这是否是它无法正常工作的原因.为了平衡这一点-我将每个字段的名称放在表单之外,然后用一个 css span 类将其隐藏脚本仍然没有拿起它。有什么建议吗？

```
 <?php 
   function isRequestSet( $name ) { 
if ( isset ( $_REQUEST[$name] ) ) { 
    return ( $_REQUEST[$name] != "" ) ;
}
return false;
    }

    $name = "";
    if ( isRequestSet('name' ) ) { 
$name = $_REQUEST['name'];
     } 
    $number = "";
     if ( isRequestSet('number') ) { 
$number = $_REQUEST['number'];
    }
    $email = "";
    if ( isRequestSet( 'email' ) ) { 
$email = $_REQUEST['email'];
    }
    $postcode = "";
    if ( isRequestSet('postcode' ) ) { 
$location = $_REQEUST['postcode'];
     }

    $how_did_you_hear_about_us = array();
    if ( isset( $_REQUEST['how_did_you_hear_about_us'] )  ) { 
$how_did_you_hear_about_us = $_REQUEST['how_did_you_hear_about_us']; 
    }

    $message = "";
    if ( isRequestSet('message' ) ) { 
$location = $_REQEUST['message'];
    }
    $apartment_price_range = array();
    if ( isset( $_REQUEST['apartment_price_range'] )  ) { 
$apartment_price_range = $_REQUEST['apartment_price_range']; 
    }

    if ( ($name !="") && ($number != "") && ($email != "") && ($isspam !="yes") ) { 
$to = 'name@email.com';
$from = $to;
$headers =  'From: ' . $to . "\n" .
            'Reply-To: ' . $to . "\n";
$vars = array( 'name' , 'number' , 'email' , 'postcode' , 'message' ) ;
$message = "-----------\n" ;
foreach ( $vars as $v ) { 
    $value = $_REQUEST[$v];
    $message .= "$v:\t$value\n";
}
$message .= "-----------\n" ;
$message .= "\nHow did you hear about us?:\n"  ;
foreach ( $how_did_you_hear_about_us as $how_did_you_hear_about_us ) { 

    $message .= "$how_did_you_hear_about_us\n" ; 
}

$message .= "-----------\n" ;
$message .= "\nApartment price range:\n"  ;
foreach ( $apartment_price_range as $apartment_price_range ) { 

    $message .= "$apartment_price_range\n" ; 
}
$subject = "From: $name <$email>";
mail( $to , $subject , $message , $headers,  "-f $from" );
$confirm = true;
    } else { 
$confirm = false;
    }

    ?>
     <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
     <html xmlns="http://www.w3.org/1999/xhtml">
      <head>
       <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title></title>
      <!--[if IE]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
       <link href="css/graphite.css" rel="stylesheet" type="text/css" media="screen" /><link href="css/graphitephone.css" rel="stylesheet" media="handheld, only screen and (max-device-width: 480px)" />
      <script src="js/gen_validatorv4.js" type="text/javascript"></script>
        <style>
       span {display: none;}</style>
        </head>

      <body onload="javascript:preload">
      <div id="container">
         <div id="header"><a href="index.html" target="_self"><img src="images/HomeBanner.jpg" width="900" height="162" border="0" /></a>
         <div id="ruler"></div><!--end header-->
         <div id="nav">
<ul>
    <li class="list1"><a href="index.html" id="item1"><span class="none">STORY</span></a></li>
    <li class="list2"><a href="#" id="item2"><span class="none">APARTMENTS</span></a>
   <ul>
        <li class="list7"><a href="gallery.html" id="item7"><span class="none">GALLERY</span></a></li>
        <li class="list8"><a href="floorplans.php" id="item8"><span class="none">FLOORPLANS</span></a></li>
        </ul>
    </li>
    <li class="list3"><a href="meet-the-locals.html" id="item3"><span class="none">MEET THE LOCALS</span></a></li>
     <li class="list4"><a href="meet-the-creators.html" id="item4"><span class="none">MEET THE CREATORS</span></a></li>
     <li class="list5"><a href="location.html" id="item5"><span class="none">LOCATION</span></a></li>
     <li class="current6"><span class="none">CONTACT</span></li>
</ul>
          </div><!--end nav-->

     <div id="main">

          <div id="contactform">
           <table width="250px" border="0" cellspacing="0px" cellpadding="0px">
           <form name="myform" method="post" action="" />
           <input type='hidden' name='submitted' value='yes' />
            <tr>
           <td colspan="2"><?php
            if ($confirm ) { 
              echo "<p>Thank you for enquiry</p>
               <p>We will contact you shortly to advise on apartment availability and pricing.<p>";
              } else { 
            if (isRequestSet( 'submitted' ) && $_REQUEST['submitted'] == "yes" ) { 
    echo "Request not sent, please complete all required fields marked '*'.";
}
              }             
         ?></td>
            </tr>
               <tr>
                 <td colspan="2" valign="middle"><p><span>name</span><input type="text" name="name" placeholder="Name*" id="contact_name" /></p></td>
               </tr>
                <tr>
                  <td colspan="2" valign="middle">
           <table width="250px" border="0" cellspacing="0px" cellpadding="0px">
                 <tr>
                <td bgcolor="#FFF" valign="baseline" height="10px"><p><img src="images/spacer.gif" width="1" height="5" /><span>number</span><input type="text" name="number" placeholder="Contact Number*" id="contact_number" /></p></td>
            <td width="8px" height="10px"><img src="images/spacer.gif" width="8" height="5" /></td>
              <td bgcolor="#FFF" valign="baseline" height="10px"><p><img src="images/spacer.gif" width="1" height="5" /><span>postcode</span><input type="text" name="postcode" placeholder="Postcode*" id="contact_postcode" /></p></td>
                </tr>
             <tr><td><img src="images/spacer.gif" width="1" height="6" /></td></tr>
              </table></td></tr>
              <tr>
            <td colspan="2" valign="middle"><p><span>email</span><input type="text" name="email" placeholder="Email*" id="contact_email" /></p></td>
          </tr>
             <tr>
            <td colspan="2"><p><select name="how_did_you_hear_about_us[]" id="" class='select-box'>
            <option label="How did you hear about us?" value="0">How did you hear about us?</option>
            <option label="realestate.com.au" value="realestate.com.au">realestate.com.au</option>
              <option label="domain.com.au" value="domain.com.au">domain.com.au</option>
               <option label="the age" value="the age">the age</option>
           <option label="the herald sun" value="the herald sun">the herald sun</option>
            <option label="billboard" value="billboard">billboard</option>
               <option label="bpmcorp.com.au" value="bpmcorp.com.au">bpmcorp.com.au</option>
                 <option label="google" value="google">google</option>
             <option label="site signage" value="site signage">site signage</option>
              <option label="other" value="other">other - please state in box below</option>
                </select></p></td>
               </tr>
                 <tr>
                <td colspan="2"><p>
                    <textarea name="message" cols="33" style="background:#fff; border:0px;" placeholder="What would you like to know?"></textarea>
</p></td>
             </tr>
            <tr>
             <td><p>Price?</p></td><td rowspan="4" valign="top" align="right"><input type="image" class="rollover" id="contact_submit" src="images/buttons/BTN_Submit.png" alt="Submit" width="72px" height="68px" border="0" hover="images/BTN_Submit_over.png" name="Submit" value="Login"></td>
           </tr>
              <tr>
            <td valign="middle"><p><input name="apartment_price_range[]" type="checkbox" value="350k-400k" style="background:#F9DC31; color: #000000;" />&nbsp;&nbsp;350k-400k</p></td></tr>
            <tr>
              <td><p><input name="apartment_price_range[]" type="checkbox" value="450k-550k" background="#F9DC31" />&nbsp;&nbsp;450k-550k</p></td></tr>
          <tr><td><p><input name="apartment_price_range[]" type="checkbox" value="550k+" background="#F9DC31" />&nbsp;&nbsp;550k+</p></td></tr>
                </form>
                <tr><td colspan="2"><p class="italics" style="font-size:10px;">* denotes a required field</p>             </td>
                   </tr>
                  <tr>
              <td colspan="2"></td></tr>
                   </table>
                   </div><!--end contact form-->

                </div><!--end left-->
                 </div><!--end main-->

                   </div><!--end container-->

                   <script language="JavaScript" type="text/javascript"
xml:space="preserve">//<![CDATA[
                  //You should create the validator only after the definition of the HTML form
                  var frmvalidator  = new Validator("myform");
                   frmvalidator.addValidation("name","req","Please enter your name");
                     frmvalidator.addValidation("name","alpha_s","Alphabetic chars only");

                     frmvalidator.addValidation("number","maxlen=50");
                     frmvalidator.addValidation("number","req");
                     frmvalidator.addValidation("number","numeric_s", "Numbers only");

                      frmvalidator.addValidation("postcode","maxlen=50");
                      frmvalidator.addValidation("postcode","req");
                      frmvalidator.addValidation("postcode","numeric_s", "Numbers only");

                      frmvalidator.addValidation("email","maxlen=50");
                      frmvalidator.addValidation("email","req");
                      frmvalidator.addValidation("email","email");

                  //]]></script>

                    <script type="text/javascript" src="js/jquery.min.js"></script>
                  <script>
                  $('[placeholder]').focus(function() {
                 var input = $(this);
                   if (input.val() == input.attr('placeholder')) {
                   input.val('');
                    input.removeClass('placeholder');
                     }
                    }).blur(function() {
                    var input = $(this);
                    if (input.val() == '' || input.val() == input.attr('placeholder')) {
                     input.addClass('placeholder');
                      input.val(input.attr('placeholder'));
                       }
                      }).blur().parents('form').submit(function() {
                       $(this).find('[placeholder]').each(function() {
                       var input = $(this);
                        if (input.val() == input.attr('placeholder')) {
                       input.val('');
                         }
                           })
                         });
                      </script>
                        <script src="js/load.js" type="text/javascript"></script>

                      </body>
                         </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T04:58:59.887

“名称”被验证为“有内容”，因为 javascript 从占位符文本中记录了“名称 *”的值。（遵循 gen_validatorv4.js 的第 1088 行 - objValue 具有占位符文本的值）。

此外，由于占位符文本有一个星号，这不是字母数字 - 所以它不符合该子句 - 因此您会看到您看到的消息。

因此，您是对的，占位符在作为“值”输入输入时必须在您验证时被删除。您可以通过说“如果值与占位符相同，请在处理之前删除 hte 值......然后恢复”来使用“form_submit_handler()”来执行此操作

* * *

另一种选择是我建议在[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)上查看 jQuery 验证器- 因为您已经在运行 jQuery，所以它的文档更好。但是，您会遇到同样的问题，但是您可以使用预验证和验证后挂钩来调整值。只需根据 if ($('#contact_name').val() == '[placeholderText]') { $('#contact_name').val(''); }

有点繁琐，但是如果您必须在输入中包含字段名称，那么这是一个解决方案。（还有其他涉及背景图形或半透明输入字段的解决方案。没有一个是完美的。）

# css - 居中插入的图像 after: 伪元素; 不能使用跨度

> ID：10778455
> 
> 赞同：14
> 
> 时间：2012-05-28T01:19:15.623
> 
> 标签：css, centering, pseudo-element

我正在使用 tumblr 的代码提取 tumblr 提要，并使用 after: 添加图像作为帖子之间的分隔符。我想将图像居中，但没有运气这样做。由于 tumblr 生成内容，而不是我，我认为我不能使用 span 标签，这似乎是通常的答案。还有其他想法吗？

显示正在使用的提要的页面：[lumn.net/index.shtml](http://www.lumn.net/index.shtml)

CSS：

```
.tumblr_post:after {
    content: url(../img/flower.png);
    display: block;
    position: relative;
    margin-top: 42px;
    margin-bottom: 24px;
    margin-left: auto;
    margin-right: auto;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-28T01:23:02.843

试试这个：

```
.tumblr_post:after {
    content: url("../img/flower.png");
    display: block;
    margin: 42px auto 24px;
    position: relative;
    text-align: center;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-18T06:00:29.723

虽然 Zoltan Toth 的答案有效，但它有一堆代码对预期的效果没有任何作用。这应该可以解决问题并且代码更少。

```
.tumblr_post:after {
    content: url("../img/flower.png");
    display: block;
    text-align: center;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-04T15:02:36.933

这是所有屏幕上的有效解决方案：

```
.produit-col .img-produit::after{
    content: '';
    background: url("../img/icone.png") center no-repeat;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    display: none;
} 
```

# html - URL#whatever 问题与 #tag 的长度有关

> ID：10778456
> 
> 赞同：0
> 
> 时间：2012-05-28T01:19:24.283
> 
> 标签：html, anchor

这是一个我发现很难用谷歌回答的问题，并且似乎在我的网站上遇到了问题。

我正在编码/解码用户 ID 只是为了混淆问题，并希望使用锚链接到页面的某些部分

事情是..我的加密正在制作一个很好的安全长字符串，但我认为 # 锚名称的长度必须有一个限制，因为它在较短时有效，但在较长时无效。

这似乎是真的吗？

哈希标签 URL 的示例是[http://wgwegw.co.uk/wegweg/protected/view-game/wegweg/platform#x243j3f41684w2w2m594n416](http://wgwegw.co.uk/wegweg/protected/view-game/wegweg/platform#x243j3f41684w2w2m594n416)

例如我有一个链接：

```
<a href="http://*.co.uk/*/protected/view-game/*/platform#y213j3f41684w2w2m594n416">Go to comment</a> 
```

1.  当我单击它时.. 它使用 HTACCESS 文件重定向打开。如果我使用 javascript window.hash 它返回哈希，所以我想哈希码不受 htaccess 重定向的影响。

2.  我登陆页面：http : *//.co.uk//protected/view-game/*/platform#y213j3f41684w2w2m594n416*

在 html 中的该页面上是一个锚名称：`<a name="y213j3f41684w2w2m594n416"></a>`

它不会跳到页面的那个部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:18:18.970

好的，给你。

你不会相信这一点，但我在后面加上了一个“a”，现在它可以工作了。

到底怎么回事？

已编辑//

可能是因为我的 id 和 name 相同吗？所以我有一个

```
<div id = "y213j3f41684w2w2m594n416"> 
```

我有一个

```
<a name = "y213j3f41684w2w2m594n416" /> 
```

因此，当我将 a 附加到名称的末尾时..它不再与 id 相同，因此不会混淆？

已编辑//

如果我在 W3 示例调整上尝试这个，它仍然可以工作，所以不能这样吗？啊，现在它已经修复了，我很想知道它为什么会起作用。

# javascript - 仅当谷歌地图空闲几秒钟时触发事件

> ID：10778461
> 
> 赞同：2
> 
> 时间：2012-05-28T01:19:55.700
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在编写一个谷歌地图 v3 javascript 应用程序，当地图的边界发生变化时，它会获取新的标记。为此，我使用了“bounds_changed”监听器。问题是我想限制我所做的调用，并且不想在每次用户更改地图视口时触发它们。仅当地图已更改并且已空闲 1 秒时，我如何才能触发此呼叫？

谢谢！保罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T01:25:20.647

您为超时声明一个全局变量

```
var changetm = null; 
```

那么如果你打电话

```
function event_handle(e){

    clearTimeout(changetm);
    changetm = setTimeout("fetch_new_markers()", 1000);

} 
```

这样做是清除上一个调用（如果存在），然后将下一个调用添加到队列中，等待 1000 毫秒（1 秒）并调用它。如果在 1 秒内触发了某个事件，它将再次清除等待队列...

塔达

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T01:26:27.250

获取您想要的最简单的方法可能是使用[setTimeout() 和 clearTimeout()](http://www.w3schools.com/js/js_timing.asp)来防止触发“更新”调用，直到地图空闲了所需的时间长度。

您可以实现您的`bounds_changed`侦听器，使其执行以下操作：

```
function loadMarkersForCurrentMapBounds() {
    //code to load markers from your server goes here
}

function boundsChanged() {
    //...

    if (window.scheduledUpdate) {
        clearTimeout(window.scheduledUpdate);
    }
    window.scheduledUpdate = setTimeout(loadMarkersForCurrentMapBounds, 1000);

    //...
} 
```

# xml - Eclipse：XML 树或网格视图

> ID：10778464
> 
> 赞同：1
> 
> 时间：2012-05-28T01:20:29.230
> 
> 标签：xml, eclipse, editor

一年前我使用 Eclipse 来编辑 xml 文件，并且有一个可用的树视图。我想我当时使用 IDE 来开发 Java EE 开发人员。作为其他开发的一部分，我这次安装了 Eclipse Classic 3.7.2。通过Help -> Install new software，我安装了1.) Eclipse XML Editors and Tools 2.) Eclipse XSL developer Tools。即使那样，我也只有 xml 的源/文本表示。如何启用树视图？另外，有没有办法获得一个网格编辑器（类似于 myeclipse [“Spring Beans Editor - New Grid Mode”](http://www.myeclipseide.com/module-htmlpages-display-pid-17.html)）

理想的设置是用于 xml 编辑的极简 Eclipse 安装。支持网格模式，以及节点的复制/粘贴/插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:06:54.763

检查您的文件关联。由于您从 Eclipse 经典开始，因此可能未设置将 .xml 文件绑定到 XML 编辑器的文件关联。转到首选项 -> 常规 -> 编辑器 -> 文件关联，然后选择 XML 编辑器，它应该为您提供文本和树视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T18:51:57.370

检查 Eclipse 中的 JBoss 工具。我从 Eclipse Marketplace 安装了 Red Hat Jboss Developer Studio 10，我有 Tree View 来编辑 web.xml

# php - PHP：JSON解码

> ID：10778467
> 
> 赞同：1
> 
> 时间：2012-05-28T01:20:59.290
> 
> 标签：php, json

我一直在尝试解码一些我从数据库查询中返回的 json：

我的结果=

```
{"queryResults":[{"id":"1","pageName":"home","blurb":"<p>knowInk Publishing is a Media Professional Services firm dedicated to integrating existing publications into the technology of today, introduce the publications of the future and provide traditional services for the print industry.<\/p> \r\n<p>From e-publishing, e-singles, mobile, web and print design and development, printing on demand and our editorial services we can provide a nuts to soup solution to your publishing needs.<\/p>\r\nLearn more about how KI can help you.","imgPath":"images\/img_homepage.jpg"},{"id":"3","pageName":"about","blurb":"This is where the about text would go. ","imgPath":"images\/img_about.jpg"},{"id":"4","pageName":"services","blurb":"This is where we would talk about the services we can provide","imgPath":"images\/img_services.jpg"},{"id":"5","pageName":"marketplace","blurb":"This is where we will discuss our marketplace, where you can buy and sell things","imgPath":"images\/img_marketplace.jpg"}]} 
```

我将 json 放入会话 var 并能够检索它。但是当我去挖掘它时，我被卡住了。这是我的 PHP 代码：

```
print $_SESSION['basicPageHTML']; //works fine, gives me the json above

$code = json_decode($_SESSION['basicPageHTML']); 
print count($code->queryResults); //this seems right, gives me 4
foreach($code->queryResults as $thisKey => $thisValue) { 
     //I can't do anything here.
} 
```

我已经离开 PHP 一段时间了，有趣的是你这么快就忘记了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T01:24:50.277

你第一次做对了。你只需要继续这样做。

```
echo $thisValue->pageName; 
```

# javascript - 错误通知不起作用

> ID：10778469
> 
> 赞同：0
> 
> 时间：2012-05-28T01:22:17.937
> 
> 标签：javascript, jquery, ajax, error-handling

我的问题恰好是错误，我试图产生错误，在这种情况下，错误是隐藏加载符号并显示刷新按钮，以便用户重新加载页面以查看这次是否加载数据。

```
$(document).ready(function () {
    $('#busy').show();
    $(document).bind('deviceready', function () {
        var today = $('#todaysong');

        $.ajax({
            url: 'my url',
            dataType: 'jsonp',
            jsonp: 'jsoncallback',
            timeout: 5000,
            success: function (data, status) {
                $.each(data, function (i, item) {
                    var song = '<name>' + item.name + '</name>' + '<artist>' + item.artist + '<br></artist>';
                    $('#busy').hide();

                    today.append(song);
                });
            },
            error: function (error) {
                $('#busy').fadeOut();
                $('#reload').fadeIn();
            }
        });
    });
}); 
```

这是我的代码，有人可以告诉我我做错了什么吗？我尝试了一些东西，但似乎无法让它工作，我是否会这样说按钮能够刷新这段单独的代码？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:42:39.617

**错误（jqXHR，textStatus，errorThrown）**

> 请求失败时调用的函数。该函数接收三个参数：jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象、描述发生的错误类型的字符串和可选的异常对象（如果发生）。第二个参数（除了 null）的可能值是“timeout”、“error”、“abort”和“parsererror”。发生 HTTP 错误时，errorThrown 会接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。从 jQuery 1.5 开始，错误设置可以接受一个函数数组。每个函数都会被依次调用。注意：跨域脚本和 JSONP 请求不调用此处理程序。这是一个 Ajax 事件。

在这种情况下，重要的部分在哪里；

> 注意：跨域脚本和 JSONP 请求不调用此处理程序。

引用自[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)的 API 文档。

您应该改为使用`jsonpCallback`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:25:34.817

如果没有看到其他细节，很难提出建议。我还在尝试.. 检查您提到的元素的 ID 是否与 HTML 中的相同。在 HTML 中检查一个 id 没有分配给多个元素。

在 AJAX 代码中删除`jsonp: 'jsoncallback',`一段时间并测试它是否工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T04:43:11.577

为了调试您的代码：

*   你自己产生错误吗？真的是错误吗？通过 Firebug 或...跟踪您的请求
*   确保运行错误功能。再次尝试 Firebug 或类似的东西来设置断点。
*   检查 JavaScript 控制台以确保没有任何该死的 JavaScript 错误。再次 Firebug 错误控制台。

# c# - C# WebClient DownloadString 返回乱码

> ID：10778477
> 
> 赞同：4
> 
> 时间：2012-05-28T01:23:49.637
> 
> 标签：c#, webclient, downloadstring

我正在尝试使用以下代码查看[http://simpledesktops.com/browse/desktops/2012/may/17/where-the-wild-things-are/的来源：](http://simpledesktops.com/browse/desktops/2012/may/17/where-the-wild-things-are/)

```
String URL = "http://simpledesktops.com/browse/desktops/2012/may/17/where-the-wild-things-are/";

WebClient webClient = new WebClient();

webClient.Headers.Add("user-agent", "Mozilla/5.0 (Windows; Windows NT 5.1; rv:1.9.2.4) Gecko/20100611 Firefox/3.6.4");
webClient.Encoding = Encoding.GetEncoding("Windows-1255");

string download = webClient.DownloadString(URL);

webClient.Dispose();

Console.WriteLine(download); 
```

当我运行它时，控制台返回一堆看起来像是被错误解码的废话。

我也尝试添加标题但无济于事：

```
webClient.Headers.Add("user-agent", "Mozilla/5.0 (Windows; Windows NT 5.1; rv:1.9.2.4) Gecko/20100611 Firefox/3.6.4");    
webClient.Headers.Add("Accept-Encoding", "gzip,deflate"); 
```

其他网站都返回了正确的 html 源代码。我还可以通过 Chrome 查看页面的源代码。这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T01:54:36.407

该 URL 的响应是 gzip 压缩的，您应该解压缩它或设置空的 Accept-Encoding 标头，您不需要该用户代理字段。

```
 String URL = "http://simpledesktops.com/browse/desktops/2012/may/17/where-the-wild-things-are/";    
  WebClient webClient = new WebClient();    
  webClient.Headers.Add("Accept-Encoding", "");
  string download = webClient.DownloadString(URL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-11T13:32:01.530

我今天也遇到了同样的事情。

使用 WebClient 对象检查 URL 是否正在返回某些内容。

但我的经历不同。我尝试删除 Accept-Encoding，基本上使用@Antonio Bakula 在他的回答中给出的代码。但我每次都遇到同样的错误（InvalidOperationException）

所以这不起作用：

```
WebClient wc = new WebClient();
wc.Headers.Add("Accept-Encoding", "");
string result = wc.DownloadString(url); 
```

但是添加“任何”文本作为用户代理确实起到了作用。这很好用：

```
WebClient wc = new WebClient();
wc.Headers.Add(HttpRequestHeader.UserAgent, "My User Agent String");
System.IO.Stream stream = wc.OpenRead(url); 
```

同样值得注意的是，您的里程可能会明显不同。我正在使用 ASP.NET 4.0.30319。

# php - 显示带有删除按钮的员工表

> ID：10778478
> 
> 赞同：-1
> 
> 时间：2012-05-28T01:24:49.193
> 
> 标签：php, jquery, mysql, html

我想知道为什么我的以下代码段在浏览器（http://localhost/display.php）中什么也不显示。如果我单击显示表上的删除按钮，我想为我的表生成一个模板以显示我的数据库中的所有员工（id、名字、姓氏），并通过 jquery ajax 方法使用 HTTP 动词 DELETE 删除用户。

这是我的 display.php

```
<table id="employees" border="1">
</table>

<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>    
    $document.ready(function()
    {
    var $employees = $("#employees");
    $.ajax({
        url: "delete.php",
        contentType: "json",
        success: function(data){            

        $.each(data, function(index, item){
            var $row = $("#templates").find(".row-template").clone();
            $row.find(".firstName").html(item.FirstName);
            $row.find(".lastName").html(item.LastName);
            $row.find(".delete").click(function() {
            $.ajax({
                url: "delaction.php" + item.Id,
                type: "DELETE",
                success: function()
            {
                    $row.remove();
                }
            });
            });
        $employees.append($row);
        });
      }
    });
});

</script>

<div id="templates" style="display: none">        
    <table>            
    <tr class="row-template">                
        <td class="firstName" style="width: 100px;"></td>
        <td class="lastName" style="width: 100px;"></td>
        <td>
            <input type="button" value="X" class="delete" />
        </td>
    </tr>
    </table>     
</div> 
```

我的 delete.php 看起来像这样

```
<?php
define('DB_HOST','localhost');
define('DB_ROOT','root');
define('DB_PASS','');
define('DB_NAME','employees');

$conn=mysqli_connect(DB_HOST,DB_ROOT,DB_PASS) or die("Unable to connect to your selected db.Error ".mysqli_error());
if(null!=$conn)
{
    mysqli_select_db($conn,DB_NAME);
    $query=("SELECT * FROM empl");
    $result=mysqli_query($query);
    foreach($result as $res)
    {

    }
    mysqli_close($conn);
}
?> 
```

十分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T01:34:39.703

'delaction.php' 中有什么？

无论如何，要将 itemId 与要删除的项目一起传递给 delaction.php，请更改：

```
url: "delaction.php" + item.Id, 
```

至：

```
url: "delaction.php?itemId=" + item.Id, 
```

# java - 如何发出 JMS 同步请求

> ID：10778485
> 
> 赞同：11
> 
> 时间：2012-05-28T01:25:52.450
> 
> 标签：java, architecture, jms, ibm-mq

我有一个 Web 应用程序，它可以从只能通过消息传递 (JMS) 访问的外部应用程序获取和显示数据。

因此，如果用户在浏览器上提交请求，同一个 HTTP 请求线程将不得不与消息系统（MQ 系列）交互，以便同一个请求线程可以显示从消息系统接收到的数据。

有没有我可以在这里使用的模式？我在网上看到一些以这种方式使用“相关 ID”的模糊参考：

```
Msg m = new TextMsg("findDataXYZ");
String cr_id = m.setCorrelationID(id);

sendQueue.send(m).

// now start listening to the Queue for a msg that bears that specific cr_id

Response r = receiverQueue.receive(cr_id); 
```

那里有更好的东西吗？我发现的其他模式期望响应是异步接收的。这对我来说不是一个选项，因为我必须在同一个 HTTP 请求上发回响应。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T04:13:13.123

请求/回复消息传递模式对您的要求很有用。您通常使用 CorrelationId 来关联请求和回复消息。

在发送请求消息时，您在消息上设置 JMSReplyTo 目的地。通常，临时队列用作 JMSReplyTo 目标。创建消费者以接收响应时，请使用带有 JMSCorrelationId 的选择器，例如

`cons = session.createConsumer(tempDestination,"JMSCorrelationId="+requestMsg.JMSMessageId);`

在另一端，正在处理请求消息的应用程序必须使用 JMSReplyTo 目标来发送响应。它还必须使用请求消息的 MessageId 并将其设置为响应消息的 CorrelationId。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T03:41:37.590

首先，打开响应队列。然后将该对象传递给消息上的 set reply-to 方法。这样，响应您请求的服务就知道将回复发送到哪里。通常，该服务会将消息 ID 复制到相关 ID 字段，因此当您发送消息时，获取您返回的消息 ID 并使用*它*来侦听回复队列。当然，如果您使用动态回复队列，即使这不是必需的 - 只需侦听队列中的下一条消息。

有显示所有这些的示例代码。如果您安装到默认位置，则示例代码位于`"C:\Program Files (x86)\IBM\WebSphere MQ\tools\jms\samples\simple\SimpleRequestor.java"`Windows 框或`/var/mqm/toolsjms/samples/simple/SimpleRequestor.java`*nix 框上。

如果你想知道“安装什么，究竟是什么？” WMQ 客户端安装可作为[SupportPac MQC71](http://ibm.co/SupptPacMQC71)免费下载。

# android - 为什么即使设置了 10000 毫秒，AlarmManager 也不会立即启动？

> ID：10778490
> 
> 赞同：0
> 
> 时间：2012-05-28T01:27:13.287
> 
> 标签：android, service, notifications, alarmmanager, android-pendingintent

以下代码必须在设置时间（单击按钮）后 10000 毫秒后启动警报 .. 但是`AlarmManager`单击按钮后立即启动服务为什么？包pit.opensource.notificationapp；

```
import java.util.Calendar;

import android.app.Activity;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class NotificationAppActivity extends Activity {

    private PendingIntent pendingIntent;

    /** Called when the activity is first created. */

    @Override

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        Button buttonStart = (Button)findViewById(R.id.btnset);

        buttonStart.setOnClickListener(new Button.OnClickListener(){

            @Override

            public void onClick(View arg0) {

                setAlarm();
                //setAlarm(25);

            }});

    }

    void setAlarm(){

        Intent myIntent = new Intent(NotificationAppActivity.this, ShowNotification.class);
        AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

        alarmManager.cancel(pendingIntent);

        pendingIntent = PendingIntent.getService(NotificationAppActivity.this, 445454, myIntent, 0);

        //alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis()-cal2.getTimeInMillis(), pendingIntent);
        alarmManager.set(AlarmManager.RTC_WAKEUP, 10000, pendingIntent);

    }

} 
```

显示通知服务

```
package pit.opensource.notificationapp;
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class ShowNotification extends Service {

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
    }
    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        Toast.makeText(this, "MyAlarmService.onDestroy()", Toast.LENGTH_LONG).show();
    }
    @Override
    public void onStart(Intent intent, int startId) {
        // TODO Auto-generated method stub
        super.onStart(intent, startId);
        Toast.makeText(this, "Alaaaaaaaaaarm ", Toast.LENGTH_LONG).show();
        Log.d("Aalram","Alaaaaaaaaaarm");

    }

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-28T02:29:57.660

第二个参数不是相对于*now*的延迟，而是警报应该响起的时间。使用类似的东西`System.currentTimeMillis() + 10000`。它会立即消失，因为您正在过去一个开始时间。

# html - 尝试将 text_area 中的文本转换为 HTML

> ID：10778492
> 
> 赞同：2
> 
> 时间：2012-05-28T01:27:32.270
> 
> 标签：html, ruby-on-rails

我正在 Rails 中写一个博客，当我放一些类似的东西时

```
Hello, <b> how are you? </b> 
```

在 text_area 中并发送它，我看到它被保存为纯文本，并且其中的 HTML 无法识别。我唯一想要的是我放在 text_area 中的每个 HTML 标记都被解释为 HTML 而不是纯文本。

例如，第一个代码应该显示在我的页面中，如下所示：

> 你好，**你好吗？**

这是帖子视图*新*的代码（在 HAML 中）：

```
= form_for @post do |f|
    .form
        .flabel= f.label :title
        = f.text_field :title
        .flabel= f.label :content
        = f.text_area :content
        .submit= f.submit "Create" 
```

[如果没有HTMLArea](http://www.htmlarea.com/)或类似的东西，我怎么能做到这一点？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T01:58:34.207

`raw`帮手呢？`<%= raw @post.content %>`在您的视图中尝试以下操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T02:53:22.710

我认为`<%= @post.content.html_safe %>`也可以。

# database - MongoDB 中的 findAndModify 和 update 有什么区别？

> ID：10778493
> 
> 赞同：186
> 
> 时间：2012-05-28T01:27:52.227
> 
> 标签：database, mongodb, sql-update

`findAndModify`我对MongoDB 中的方法有点困惑。它比`update`方法有什么优势？对我来说，它似乎只是先返回项目然后更新它。但是为什么我需要先退货呢？我阅读了***MongoDB：权威指南***，它说它对于操作队列和执行其他需要 get-and-set 样式原子性的操作很方便。但我不明白它是如何做到这一点的。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2012-05-28T03:21:01.797

如果您获取一个项目然后更新它，那么这两个步骤之间可能会有另一个线程进行更新。如果您先更新一个项目，然后再获取它，则中间可能会有另一个更新，您将得到一个与您更新的项目不同的项目。

以“原子”方式进行操作意味着您可以保证获得与您正在更新的完全相同的项目——即在这两者之间不会发生其他操作。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-11-16T03:47:53.883

`findAndModify`返回文档，更新不返回。

如果我正确理解 Dwight Merriman（mongoDB 的原作者之一），使用 update 修改单个文档 ie("multi":false} 也是原子的。目前，它也应该比使用`findAndModify`.

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2015-09-29T09:00:33.637

来自[MongoDB 文档](http://docs.mongodb.org/manual/reference/method/db.collection.findAndModify/#comparisons-with-the-update-method)（添加了重点）：

> *   默认情况下，这两个操作都会修改一个文档。但是，带有 multi 选项的 update() 方法**可以修改多个文档**。
>     
>     
> *   如果多个文档与更新条件匹配，对于 findAndModify()，您**可以指定一种排序**来提供对要更新哪个文档的某种控制措施。使用 update() 方法的默认行为，当多个文档匹配时，您无法指定要更新哪个单个文档。
>     
>     
> *   默认情况下， findAndModify() 方法**返回****文档**的预修改版本。要获取更新的文档，请使用新选项。update() 方法返回一个包含操作状态的 WriteResult 对象。要返回更新后的文档，请使用 find() 方法。但是，其他更新可能在您的更新和文档检索之间修改了文档。此外，如果更新只修改了单个文档但匹配了多个文档，您将需要使用额外的逻辑来识别更新的文档。
>     
>     
> *   在 MongoDB 3.2 之前，您无法为 findAndModify() 指定写入关注点以覆盖默认的写入关注点，而从 MongoDB 2.6 开始，您**可以为 update() 方法指定写入关注点。**
>     
>     
> 
> 修改单个文档时，findAndModify() 和 update() 方法都会自动更新文档。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-05-28T12:20:32.830

一类有用的用例是计数器和类似用例。例如，看一下这段代码（MongoDB 测试之一）： [find_and_modify4.js](https://github.com/mongodb/mongo/blob/master/jstests/core/find_and_modify4.js)。

因此，随着`findAndModify`您递增计数器并一步获得其递增值。比较：如果您 (A) 分两步执行此操作，而其他人 (B) 在您的步骤之间执行相同的操作，则 A 和 B 可能会获得相同的最后一个计数器值，而不是两个不同的（只是可能问题的一个示例）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-03-07T23:34:28.483

这是一个古老的问题，但一个重要的问题和其他答案只是让我提出更多问题，直到我意识到：**这两种方法非常相似，在许多情况下您可以使用其中任何一种。**

*   两者`findAndModify`并`update`在单个请求中执行原子更改，例如递增计数器；事实上`<query>`和`<update>`参数在很大程度上是相同的
*   对于这两者，当服务器找到与查询匹配的文档时，原子更改直接发生在文档上，即在服务器确认查询有效并应用更新的几分之一毫秒内对该文档进行内部写锁定

没有用户可以获得的系统级写锁或信号量。句号。MongoDB 故意不让签出文档然后对其进行更改然后将其写回变得容易，同时以某种方式阻止其他人同时更改该文档。（虽然开发人员可能认为他们想要这样，但在可伸缩性和并发性方面，这通常是一种反模式......作为一个简单的例子，想象一个客户端获取写锁，然后在持有它时被杀死。如果你真的想要一个写锁，你可以在文档中做一个，用原子更改来比较设置，然后确定你自己的恢复过程来处理废弃的锁等。但是如果你这样做的话要小心。）

据我所知，这些**方法有两种不同的主要方式**：

*   **如果您在更新时想要一份文档副本：只`findAndModify`允许 this**`new` ，如前所述，在更新后返回原始（默认）或记录；`update`你只得到一个，`WriteResult`而不是文档，当然，在之前或之后立即阅读文档并不能保护你免受另一个过程的影响，也可以在你的阅读和更新之间更改记录
*   **如果可能有多个匹配的文档**：`findAndModify`仅更改一个，并允许您自定义`sort`以指示应该更改哪个；`update`可以改变所有的`multi`虽然它默认只有一个，但不会让你说哪一个

Thus it makes sense what HungryCoder says, that **`update` is more efficient** where you can live with its restrictions (eg you don't need to read the document; or of course if you are changing multiple records). But for many atomic updates you *do* want the document, and `findAndModify` is necessary there.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-05-26T01:47:37.873

我们将 findAndModify() 用于计数器操作（inc 或 dec）和其他单字段变异情况。将我们的应用程序从 Couchbase 迁移到 MongoDB，我发现这个 API 可以替换执行 GetAndlock() 的代码，在本地修改内容，replace() 保存并再次 Get() 以获取更新的文档。使用 mongoDB，我只使用了这个返回更新文档的 API。

# c++ - Boost FileSystems，需要帮助了解我在做什么

> ID：10778502
> 
> 赞同：0
> 
> 时间：2012-05-28T01:30:57.853
> 
> 标签：c++, boost-filesystem

大约一年前，我使用 boost 文件系统编写了一个程序，现在我正试图返回并使用它作为参考，但我不确定代码到底发生了什么，以及是否有更好的方法去做吧。

这是我为遍历目录所做的工作。

```
vector <directory_entry> entry;
copy(directory_iterator("path"), directory_iterator(), back_inserter(entry)); 
```

这为我提供了一个向量，其中包含“路径”目录中所有文件和目录的目录条目

然后我会将它们分类为两个路径向量，一个用于文件，一个用于目录，使用 is_regular_file。

我正在使用 openAL，我必须进行这种类型的转换才能使事情正常进行。

```
path fp = file[0]; //file a vector of directory_entry
string fps = fp.string();
buffer[0] = AlutCreateBufferFromFile(fps.c_str()); 
```

这行得通，但我认为这一切都一定不是很正确，我如何使用它。不管怎样，我只是想看看有没有人能给我一点建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:19:44.880

您的代码看起来正确。

您可以避免像这样的几个变量声明：

```
buffer[0] = AlutCreateBufferFromFile(file[0].string().c_str()); 
```

您还可以避免将目录条目复制到 a`vector`并直接迭代目录条目：

```
directory_iterator cur("path");
directory_iterator end;
while (cur != end)
{
    path p = *cur;
    ...  // use p
    ++cur;
} 
```

在 C++11 中，您可以使用 lambda 进一步改进循环：

```
for_each(directory_iterator("path"), directory_iterator(), [](const path& p)
{
    // use p
}); 
```

# c++ - 在 C++ 中使用第三方库时如何保持项目的命名约定？

> ID：10778503
> 
> 赞同：3
> 
> 时间：2012-05-28T01:31:27.580
> 
> 标签：c++, naming-conventions

我正在考虑这个问题：例如，编写宏来创建函数、变量或来自不使用您的命名约定的第三方库的任何其他元素的别名是否很常见？如果是，最好的方法是什么，只写宏？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T01:34:56.910

“愚蠢的一致性是小人的妖精”。不要再担心命名约定——在项目中强制执行它，当然，但不要让第三方库符合它。

事实上，这些细微的差别可能有助于帮助读者一目了然地了解他们正在处理的代码类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T01:41:15.243

宏很难编写和阅读。所以最简单的方法是雇人来帮助你转换命名约定

# php - 从 JSON 中去除不需要的值

> ID：10778504
> 
> 赞同：0
> 
> 时间：2012-05-28T01:31:47.933
> 
> 标签：php, json

我有以下文本，我想删除并获取数据。

```
(function() {})({
    "Data": {
        "Status": "SUCCESS",
        "Name": "Facebook Inc",
        "Symbol": "FB",
        "LastPrice": 31.91,
        "Change": -1.12,
        "ChangePercent": -3.39085679685135,
        "Timestamp": "Fri May 25 16:00:05 UTC-04:00 2012",
        "MarketCap": 20214729720,
        "Volume": 37189630,
        "ChangeYTD": 0,
        "ChangePercentYTD": 0,
        "High": 32.95,
        "Low": 31.11,
        "Open": 32.9
    }
}) 
```

我还有以下代码正在与谷歌 api 一起使用，它将在今年 10 月离开我们。

```
<?php

//Obtain Quote Info
$quote = file_get_contents('http://finance.google.com/finance/info?client=ig&q=NASDAQ:'  . $stock . '');

//Remove CR's from ouput - make it one line
$json = str_replace("\n", "", $quote);

//Remove //, [ and ] to build qualified string  
$data = substr($json, 4, strlen($json) -5);

//decode JSON data
$json_output = json_decode(utf8_decode($data));

// get the last price
$perc = $json_output->c;
$last = $json_output->l;
$date = $json_output->lt;
$name = $json_output->t;
?> 
```

无论出于何种原因，我都无法弄清楚如何让另一个人使用我的代码。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T01:53:19.443

只需`http://dev.markitondemand.com/Api/Quote/json?symbol=AAPL`用作 url，在 json 中省略 p。

```
<?php
$stock = "FB";
//Obtain Quote Info
//$quote = file_get_contents('http://dev.markitondemand.com/Api/Quote/json?symbol='.$stock);

//or with curl
$quote = curl_get('http://dev.markitondemand.com/Api/Quote/json?symbol='.$stock);

function curl_get($url){
    if (!function_exists('curl_init')){
        die('Sorry cURL is not installed!');
    }
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_REFERER, $url);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/1.0");
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    $output = curl_exec($ch);
    curl_close($ch);
    return $output;
}

//decode JSON data
$json_output = json_decode(utf8_decode($quote));

$perc = $json_output->Data->ChangePercent;
$last = $json_output->Data->LastPrice;
$date = $json_output->Data->Timestamp;
$name = $json_output->Data->Name;

print_r($json_output);
/*
stdClass Object
(
    [Data] => stdClass Object
        (
            [Status] => SUCCESS
            [Name] => Facebook Inc
            [Symbol] => FB
            [LastPrice] => 31.91
            [Change] => -1.12
            [ChangePercent] => -3.3908567968514
            [Timestamp] => Fri May 25 16:00:05 UTC-04:00 2012
            [MarketCap] => 20214729720
            [Volume] => 37189630
            [ChangeYTD] => 0
            [ChangePercentYTD] => 0
            [High] => 32.95
            [Low] => 31.11
            [Open] => 32.9
        )

)*/
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T01:53:19.820

您用于 Google Finance 的代码是直接定制的，可以与您正在使用的 Google Finance API 的输出一起使用。

以下是 Google 财经的输出：

```
// [
{
"id": "296878244325128"
,"t" : "FB"
,"e" : "NASDAQ"
,"l" : "31.91"
,"l_cur" : "31.91"
,"s": "0"
,"ltt":"4:00PM EDT"
,"lt" : "May 25, 4:00PM EDT"
,"c" : "-1.12"
,"cp" : "-3.39"
,"ccol" : "chr"
}
] 
```

您的代码部分：

```
$data = substr($json, 4, strlen($json) -5); 
```

正是从 GF 输出中去除了不需要的字符。对于包裹在匿名函数中的新输出，我建议如下：

```
<?php
preg_match('/\(function\(\) \{\}\)\((.*)\)/', $input_string, $matches);
$data_json = $matches[1];
$json_output = json_decode($data_json, true); //true = assoc array
$final_json = $json_output['Data']; 
```

这将为 $json 变量分配一个有效的 json 字符串，其中 $input_string 是您在问题中列出的输入。$final_json 将包含原始 json 的 Data: 属性中的任何内容。

# javascript - 最新的 Google Chrome 稳定版未触发 onhashchange 事件

> ID：10778511
> 
> 赞同：1
> 
> 时间：2012-05-28T01:33:06.397
> 
> 标签：javascript, google-chrome, v8, google-chrome-frame

我注意到在过去一周或者可能更多的谷歌浏览器在第一次 hashchange 被触发后停止触发 onhashchange 事件。Firefox + IE 8 和 9 按预期工作，chrome 也能正常工作。有没有其他人注意到这一点？我无法提供示例，但如有必要可以模拟一个。我正在运行 Google Chrome 版本 19.0.1084.46。这也发生在 Google Chrome Frame 中，这表明它是 V8 的最新更新或类似的东西。

我也在 Chrome Beta V 20.0.1132.17 中尝试过，它的行为与我预期的一样，与 firefox 和 IE 相同。

哈希实际上在 URL 栏中发生了变化，但没有任何反应。

# awk - 平均的 awk 输出格式

> ID：10778513
> 
> 赞同：0
> 
> 时间：2012-05-28T01:33:40.910
> 
> 标签：awk, format

我正在计算许多值的平均值并`awk`使用以下脚本打印它。

```
for j in `ls *.txt`; do
  for i in emptyloop dd cp sleep10 gpid forkbomb gzip bzip2; do
    echo -n $j $i" "; cat $j | grep $i | awk '{ sum+=$2} END {print sum/NR}'
  done;
  echo ""
done 
```

但问题是，它正在打印 in 中的值`1.2345e+05`，这是我不想要的，我希望它以圆形打印值。但我无法找到传递输出格式的位置。

编辑：使用`{print "average,%3d = ",sum/NR}'`inplace of`{print sum/NR}'`没有帮助，因为它正在打印`"average,%3d 1.2345e+05"`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T01:38:58.890

你需要`printf`而不是简单地 `print`. Print 是一个比 printf 简单得多的例程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T02:32:03.860

```
for j in *.txt; do
    for i in emptyloop dd cp sleep10 gpid forkbomb gzip bzip2; do
        awk -v "i=$i" -v "j=$j" '$0 ~ i {sum += $2} END {printf j, i, "average %6d", sum/NR}' "$j"
    done
    echo
done 
```

你不需要`ls`- 一个 glob 就可以了。

无用的使用`cat`。

扩展时引用所有变量。

没有必要使用`echo`- AWK 可以完成这项工作。

没有必要使用`grep`- AWK 可以完成这项工作。

如果你得到这样的数字，`1.2345e+05`那么`%6d`可能是比 . 更好的格式字符串`%3d`。使用`printf`以使用格式字符串 -`print`不支持它们。

以下全 AWK 脚本可能会满足您的需求，而且速度会更快。在没有看到您的输入数据的情况下，我做了一些假设，主要是匹配的命令名称在第 1 列中。

```
awk '
    BEGIN {
        cmdstring = "emptyloop dd cp sleep10 gpid forkbomb gzip bzip2";
        n = split(cmdstring, cmdarray);
        for (i = 1; i <= n; i++) {
            cmds[cmdarray[i]]
        }
    }
    $1 in cmds {
        sums[$1, FILENAME] += $2;
        counts[$1, FILENAME]++
        files[FILENAME]
    }
    END {
        for file in files {
            for cmd in cmds {
                printf "%s %s %6d", file, cmd, sums[cmd, file]/counts[cmd, file]
            }
        }
    }' *.txt 
```

# sql - 子查询的结果可以与自身连接吗？

> ID：10778516
> 
> 赞同：3
> 
> 时间：2012-05-28T01:34:11.707
> 
> 标签：sql

假设我需要在每个动物园中找到最古老的动物。这是一种典型的最大组查询。只是这里有一个复杂之处：斑马和长颈鹿存储在不同的表中。要获得所有动物的列表，无论是长颈鹿还是斑马，我可以这样做：

```
(SELECT id,zoo,age FROM zebras
 UNION ALL
 SELECT id,zoo,age FROM giraffes) t1 
```

然后给定`t1`，我可以构建一个典型的最大组查询：

```
SELECT t1.*
FROM t1
JOIN
(SELECT zoo,max(age) as max_age
 FROM t1
 GROUP BY zoo) t2
ON (t1.zoo = t2.zoo) 
```

显然我可以存储`t1`为一个临时表，但是有没有一种方法可以在一个查询中完成所有这些操作，而不必重复`t1`? （请不要讨论对表设计的修改；我想集中讨论处理子查询结果的问题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T01:39:45.723

这是 with 子句的链接。

[理解 WITH 子句](http://gennick.com/with.html)

```
with t1 as
(select id, zoo, age from zebras
union all
select id, zoo, age from giraffes)
select t1.*
from t1
join
(SELECT zoo,max(age) as max_age
FROM t1
GROUP BY zoo) t2
on (t1.zoo = t2.zoo); 
```

注意：您也可以将 t2 移到您的 with 子句中。

注意 2：另一种解决方案是简单地将 t1 创建为视图并在查询中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T01:51:23.930

要找到最古老的动物，您应该使用 wjndoq 函数：

```
select z.*
from (select z.*,
           row_number() over (partition by zoo order by age desc) as seqnum
      from ( <subquery to union all animals>) z
     )
where seqnum = 1 
```

# javascript - JQM .bind 函数调用挂在方法上，但脚本仍然完成

> ID：10778521
> 
> 赞同：0
> 
> 时间：2012-05-28T01:35:47.723
> 
> 标签：javascript, jquery, jquery-mobile

我刚刚开始使用 Javascript、jQuery 和 jQuery Mobile。我正在尝试在线阅读教程，但我正在关注 mobileinit 事件处理程序。这是代码：

```
<script type="text/javascript">
        $(document).bind("mobileinit", function() {
        Notes.testHelper.createDumyNotes();
        Notes.controller.init();
    });
</script> 
```

如果我在 Notes.testHelper.createDummyNotes() 之前和之后发出警报；警报被调用。但是，如果我将警报放在 Notes.controller.init() 之后，则不会调用警报。我想这意味着代码在该函数中停止。但是，如果我在函数外部的结束脚本标记之前放置一个警报，则会调用该警报——这让我感到困惑。一个方法如何挂起并且不允许函数的其余部分完成但仍然让脚本完成？

有趣的是，我一开始忘记在这个 .bind 函数周围放置脚本标签，并且 html 的样式是正确的。但是，一旦我将标签放在这个函数周围，html 就会出现但没有样式。

有什么建议么？正如我所说，我是 javascript 的新手，所以这可能是对语言执行方式的根本误解。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T01:50:22.623

的内容`$(document).bind("mobileinit", function() { ... }`将在`mobileinit`事件触发时调用，这将在`script`读取标签之间的代码之后。这就是您在执行结束标记`alert`之前放置的原因。`script`

如果你`alert(1);`在结束标签之前，`alert(2);`在`function() {`and`alert(3)`之后`createDumyNotes()`，你可能会得到`1`and`2`但不是`3`。

我认为您走在正确的道路上，因为`createDumyNotes()`函数中发生了错误。我建议您进入该函数`try { ... } catch(e) { ... }`并确定错误发生的位置（假设`Notes`并且`Notes.testHelper`是有效对象，并且`Notes.testHelper.createDumyNotes()`是现有函数。

**编辑**

我刚刚注意到您的功能是`createDumyNotes()`而不是`createDummyNotes()`. 这仅仅是拼写错误吗？

# javascript - ActionScript 褪色的想法/帮助？

> ID：10778529
> 
> 赞同：1
> 
> 时间：2012-05-28T01:38:04.773
> 
> 标签：javascript, actionscript

这是我添加到基于 Flash 的聊天中的一个功能，用于对 [rainbow] 和 [/rainbow] 标记中的某些文本进行彩虹化处理。

```
ChatUI.prototype.rainbowParse = function(txt) {
    txt = txt;
    if ((txt.indexOf("[rainbow]") > -1) && (txt.indexOf("[/rainbow]") > -1)) {
        txt = txt.replace("&apos;", "@").replace("&amp;apos;", "@");
        var firstChar = txt.indexOf("[rainbow]") + 9;
        var lastChar = txt.indexOf("[/rainbow]");

        if (((lastChar - firstChar) > 100) || ((txt.split("[rainbow]").length - 1) > 3)) {
            break;
        }

        while (lastChar <= txt.lastIndexOf("[/rainbow]")) {
            var RAINBOWTEXT = '';
            var i = firstChar;
            while (i < lastChar) {
                RAINBOWTEXT += txt.charAt(i);
                i++
            }
            var text = RAINBOWTEXT;
            var texty = '';

            colors = new Array('ff00ff','ff00cc','ff0099','ff0066','ff0033','ff0000','ff3300','ff6600','ff9900','ffcc00','ffff00','ccff00','99ff00','66ff00','33ff00','00ff00','00ff33','00ff66','00ff99','00ffcc','00ffff','00ccff','0099ff','0066ff','0033ff','0000ff','3300ff','6600ff','9900ff','cc00ff');

            i = 0;

            while (i <= text.length) {
                var t = text.charAt(i);

                if (t != undefined) {
                    texty += "<font color=\"#" + colors[i % colors.length] + "\">" + t + "</font>";
                    i++;
                }
            }

            texty = texty.replace("> <", ">&nbsp;<");
            var REPLACEME = "[rainbow]" + RAINBOWTEXT + "[/rainbow]";
            txt = txt.replace(REPLACEME, texty);

            if (lastChar == txt.lastIndexOf("[/rainbow]")) {
                break;
            }
            nextChar = lastChar + 10;
            firstChar = txt.indexOf("[rainbow]", lastChar) + 9;
            lastChar = txt.indexOf("[/rainbow]", lastChar);
        }
        txt = txt.replace("@", "&apos;");
    }
    return txt;
} 
```

然而，我不喜欢这些彩虹的样子。文本的颜色会重复。

要查看我的意思的示例，请访问[http://www.tektek.org/color/](http://www.tektek.org/color/)并单击“Rainbow”并在重复设置为 1 的情况下进行预览。然后将其设置为 3 或更高进行预览。

我希望我的代码重复 1，但由于彩虹文本长度变化很大，我不知道该怎么做。我用谷歌搜索了许多彩虹文本生成器，试图查看他们的代码。糟透了。请给我一些想法或帮助。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:07:36.420

您需要将颜色数组中的元素数除以彩虹字符串中的字符数，并将每种颜色应用于字符串中的字符数。这样，无论字符串的长度如何，每种颜色都只会以相等的比例应用一次：

```
// Calculate the number of characters to apply each character to
var inc = Math.round(colors.length / txt.length);
// Empty string to store the modified rainbox text in
var str = ""; 
// Loop through each color and apply it to the correct number of characters
for (var i = 0; i < colors.length; i ++) {
    str += "<font color='#'" + colors[i] + "'>" 
        + txt.substr(i * inc, inc)
        + "</font>";
} 
```

**编辑：**

好的，我重新阅读了这个问题并再次查看了您链接到的示例，我认为更好的解决方案是`Sprite`使用绘图 API 在中创建线性渐变，并使用包含必须具有彩虹效果的文本的文本字段来掩盖它应用于它：

```
import flash.text.TextField;
import flash.text.TextFormat;
import flash.display.Sprite;
import flash.display.GradientType;
import flash.text.TextFieldAutoSize;
import flash.geom.Matrix;
import flash.text.Font;

// You need to embed the font to use it as a mask 
Font.registerFont(Arial);

var txt:String = "My Rainbow text";

// Removed some of your colors to save time formatting
var colors:Array = [0xff00ff, 0xff00cc, 0xff0099, 0xff0066, 0xff0033, 
                    0xff0000, 0xff3300, 0xff6600, 0xff9900, 0xffcc00, 
                    0xffff00, 0xccff00, 0x99ff00, 0x66ff00, 0x33ff00];

var alphas:Array = [];
var ratios:Array = [];

// Populate alphas and ratios arrays of the same length as colors array
for (var i:int = 0; i < colors.length; i ++)
{
    alphas.push(1); 
    ratios.push(i * Math.round(255 / colors.length)); // Equal ratio for each color
}

// Create a text field
var field:TextField = new TextField();
field.text = txt;
field.autoSize = TextFieldAutoSize.LEFT;
field.setTextFormat(new TextFormat("Arial", 30, 0x0000000));
field.embedFonts = true;

// Create a gradient of the same dimensions as the text field
var matrix:Matrix = new Matrix();
matrix.createGradientBox(field.width, field.height);

var gradient:Sprite = new Sprite();
gradient.graphics.beginGradientFill(GradientType.LINEAR, colors, alphas, ratios, matrix);
gradient.graphics.drawRect(0, 0, field.width, field.height);
gradient.graphics.endFill();

this.addChild(field);
this.addChild(gradient);

// Mask the gradient with the text field
gradient.mask = field; 
```

# genetic-algorithm - 交叉概率在遗传算法/遗传编程中有什么影响？

> ID：10778530
> 
> 赞同：1
> 
> 时间：2012-05-28T01:38:17.020
> 
> 标签：genetic-algorithm, genetic-programming, evolutionary-algorithm

任何人都可以举一个交叉概率的例子吗？我想知道确定交叉概率有什么好处，以及它对遗传算法或遗传编程有什么影响。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T12:57:37.720

根据定义，交叉概率没有好处。它只是一个允许您调整遗传算法行为的参数。降低交叉概率将使更多的个体在下一代中继续保持不变。在解决某些问题时，这可能会或可能不会产生积极影响。[我在HeuristicLab](http://dev.heuristiclab.com)中创建了一个小实验，将遗传算法应用于 TSP。遗传算法在 TSPLIB (bays29) 的一个小实例上对每个概率重复 10 次。如下图所示，识别模式相当困难。我也上传了[算法](https://docs.google.com/open?id=0BxtQesuetXARaHoxWEhvODVLVzA)和[实验](https://docs.google.com/open?id=0BxtQesuetXARdXhSWHBJUTJOZHc)，您可以在 HeuristicLab 中自己打开和试验这些文件。该实验包括每次运行的质量图表和进一步分析，因此您可以根据需要检查收敛行为。

![交叉概率的变化](../Images/371c5710286849098fbedfd5dfdf431d.png)

也有可能选择的策略过于简单，因此未能显示出效果。在实验中，未进行交叉的父母也通过适应度比例选择来选择。因此，一个高素质的个体将很快主宰人口。一种不同的策略可能是通过适应度比例选择仅选择交叉的父母，而随机选择剩余的父母。结果可以在这里看到（[算法](https://docs.google.com/open?id=0BxtQesuetXARWFdZSzlYY3FRSGs)和[实验](https://docs.google.com/open?id=0BxtQesuetXARcC1DVjh0RmNCaW8)）；

![交叉概率的变化](../Images/99e5544083cec716f9b427e63957d81b.png)

您可以进行自己的修改并试验结果。

可以在此处找到相关答案：[什么是遗传算法或遗传编程中的交叉概率和突变概率？](https://stackoverflow.com/questions/2877895/what-is-crossover-probability-mutation-probability-in-genetic-algorithm-or-gen)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T10:24:01.207

我不知道你在问什么。交叉概率只是应用交叉算子的概率——[0.0, 1.0] 范围内的任何实数都是一个例子。

也没有单一的最佳设置。它取决于大量因素以及与算法中其他设置的复杂相互关系。例如，如果您有一个世代遗传的遗传算法，您希望父母有一定的概率可以在未修改的情况下存活。否则，您可能会失去好的解决方案。因此，您可以将交叉率设置为稍低的值，例如 0.7。另一方面，像 CHC 这样的算法是非常精英主义的——它总是保留它找到的最佳解决方案，因此更有动力使用交叉进行更广泛的搜索，因此它将概率设置为 1.0。其他算法完全依赖于变异并将交叉率设置为 0.0。遗传算法的最典型值非常高——可能是 0.8 到 1.0。遗传编程倾向于经常使用较低的值，可能低至 0。

但这一切都是无关紧要的。你必须设计一种算法来支持某个目标。由于某种原因，弄清楚多长时间进行一次交叉应该是您做出的决定。如果您所做的只是采用现成的遗传算法并在其中转储一些随机参数，那么它不太可能很好地工作。

# google-maps - 带有 Filemaker Pro 网络视图的 Google 街景

> ID：10778531
> 
> 赞同：0
> 
> 时间：2012-05-28T01:38:20.050
> 
> 标签：google-maps, filemaker, google-street-view

我目前正在使用 Filemaker Pro 12，并且通过 Web 视图，我编写了一些函数来自动从每条记录的地址字段中获取信息，以便为每条记录调用谷歌地图和谷歌卫星（空中）。

我遇到的问题是街景。以下是我用于街景的功能：“http://maps.google.com/maps?q=&layer=c&cbll=37.35302269,-122.01458914&cbp=12,72.73,,0,-6.2&output=svembed "

它工作得很好，但我希望能够指向每条记录中的 x 和 y 坐标字段，这样我就不需要为每条记录输入它们。字段名称是零售数据库::Y 坐标和零售数据库::X 坐标

同样，我能够为谷歌地图和卫星编写函数，但似乎不能为谷歌街景编写函数。请帮忙。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:52:55.227

您应该能够创建一个简单的计算，将字段放入 URL 字符串中。

"http://maps.google.com/maps?q=&layer=c&cbll=" & 零售数据库::Y 坐标 & "," & 零售数据库::X 坐标 & "&cbp=12,72.73,,0,- 6.2&输出=svembed"

# java - 以对象为键的映射

> ID：10778532
> 
> 赞同：2
> 
> 时间：2012-05-28T01:38:37.380
> 
> 标签：java, map

我想创建一个以某个类为键的地图。我遇到的问题是，由于此类包含指针，因此如果我使用 HashMap，则在散列时使用此地址（请参阅下面的代码）。我怎样才能得到它来比较实际值而不是地址，或者我可以使用其他一些容器来达到相同的结果？

```
import java.util.*;
public class Main {
    public static void main(String args[]) {
        class Foo {
            public Foo(String a) {s = a;}
            public String s;
        }

        HashMap<Foo,Integer> a = new HashMap<Foo,Integer>();
        a.put(new Foo("test"), 1);
        System.out.println(a.get(new Foo("test")));
    }
} 
```

这输出`null`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T01:40:21.937

为了将类的实例用作 a 中的键，[`HashMap`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/HashMap.html)您需要覆盖其[`hashCode`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#hashCode%28%29)和[`equals`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)方法。一旦你这样做，一切都应该正常工作。

```
class Foo {
    public Foo(String a) {s = a;}
    public String s;
    int hashCode() {return s.hashCode();}
    boolean equals(Object other) {
        if (other == this) return true;
        if (!(other instanceof Foo)) return false;
        return ((Foo)other).s.equals(s);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T01:45:09.080

请注意，您不是[`Map`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)使用*类*作为键来参数化 ，而是使用类的*实例*`Foo`。如果您使用*类*作为地图的类型参数，它看起来像这样：

```
Map<Class<Foo>,Integer> map; 
```

如果您需要地图与以下实例一起使用，请了解上述情况不适用于您的代码`Foo`：

```
Map<Foo,Integer> map; 
```

...然后您需要确保`Foo`覆盖[两者](https://stackoverflow.com/a/2265637/201359) [`equals()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals(java.lang.Object))并且[`hashCode()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode())一切正常。[这是](http://www.javaworld.com/javaworld/jw-01-1999/jw-01-object.html)一篇很好的文章，解释了如何覆盖这两种方法。

# php - SVN 避免重复代码

> ID：10778534
> 
> 赞同：0
> 
> 时间：2012-05-28T01:39:08.973
> 
> 标签：php, git, svn, version-control, organization

我正在开发一个 php 项目，该项目有一个“工具包”文件夹/有用函数和类的存储库，然后是几个其他文件夹/存储库，称为“抓取”、“进程”和“服务”，每个文件夹/存储库都使用“工具包”中的函数'。现在的方式是，我使用属性 svn:externals 来确保每当我签出任何这些工具包存储库时都会附带它。这导致 toolkit 文件夹在其他每个存储库文件夹中显示相同的代码，这似乎不是最佳的。这是结帐时发生的事情

```
/code
   /scrape
      /toolkit
      scrapefiles...
   /process
      /toolkit
      processfiles...
   /serve
      /toolkit
      servefiles... 
```

这就是我想要发生的事情

```
/code
    /toolkit
    /scrape
        scrapefiles
    /process
        processfiles
    /serve
        servefiles 
```

我怎样才能做到这一点，以便我没有工具包的多个副本到处跑。如果可能的话，我更喜欢使用外部，但任何解决方案都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T01:52:10.197

SVN:External 没有处理你的 repo 的最终结构，如果你想要下面的结构，你可以签入具有相同结构的源。

签出文件夹的外部手段存在于不同的文件夹中，但签入结果却是相同的地方。

您可以尝试删除当前 svn 存储库中的那些“符号链接”，并将真正的工具包或链接添加到“代码”的根目录

在服务器上存储源的方式是基于文件夹的，但它完全独立于在本地端的查看方式。

# clojure - Clojure：前置后置函数

> ID：10778539
> 
> 赞同：6
> 
> 时间：2012-05-28T01:40:21.127
> 
> 标签：clojure

## 语境

我知道[http://blog.fogus.me/2009/12/21/clojures-pre-and-post/](http://blog.fogus.me/2009/12/21/clojures-pre-and-post/)

我想要的不完全是前置/后置条件。

我想要只执行一次*的前/后**功能*。

 *我没有看到任何文档向我承诺关于前置/后置条件的这个功能（即它们没有被多次执行。）

## 问题

对于 Clojure 函数，无论如何都要用只执行一次的前/后*函数来标记它，*

*   调用函数时的 pre 函数
*   函数返回时的 post 函数

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T02:06:05.257

您可以使用高阶函数相对轻松地做到这一点：

```
(defn wrap-fn [function pre post]
  (fn [& args]
    (apply pre args)
    (let [result (apply function args)]
      (apply post (cons result args)))))

(def f
  (wrap-fn
    +
    #(println (str "Calling function with args: " %&))
    #(println (str "Returning with result: " (first %&)))))

(f 2 3)
Calling function with args: (2 3)
Returning with result: 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:35:24.703

[Dire](https://github.com/MichaelDrogalis/dire#preconditions)正是这样做的。在评估函数之前调用所有前置条件谓词。如果谓词全部返回 true，则函数计算。否则会引发异常。所有后置条件谓词的评估如下。*

# scala - 如何优雅地终止从 scala 创建的进程

> ID：10778543
> 
> 赞同：6
> 
> 时间：2012-05-28T01:41:14.787
> 
> 标签：scala

我目前正在使用 scala 进程 API `scala.sys.process`，但我似乎无法弄清楚如何**优雅地**终止对 SIGTERM 信号作出反应的进程。我已经在 python 中完成了它，在这个过程中有漂亮`terminate`和`send_signal`功能，但是在 scala`scala.sys.process.Process`对象上，我看到的只是`destroy`. 对我来说，看起来 scala 会从轨道上摧毁我的进程，只是为了确定，这不是我想要的。

我怎样才能告诉这个过程它应该清理自己并从我的 scala 代码中退出？

```
val launcher = Process("myprocess", Seq("args"))
val process = launcher.run()
process.destroy() //Err... no? terminate or equivalent like in python please? 
```

编辑

更多细节：我的 scala 进程正在启动一个 C++ 子进程，它监听信号处理程序（SIGTERM、SIGKILL 等）以了解何时退出。它已经过很好的测试，并且可以正确清洁自己。我的问题是我不知道如何从我的 scala 应用程序发送该信号！因此，我的 C++ 进程总是被拖到外面并被枪杀，而不是被要求停止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:37:16.643

Scala`Process`的东西基于 Java，因此受到同样的限制。Java 提供了一个非常糟糕的接口。也许它可以在更多系统上使用相同的界面，但它对于那些在 Posix 系统上工作的人来说是难以置信的限制。

# url-rewriting - 如何将页面名称添加到域名，即 blog.example.com 而不是 example.com/blog

> ID：10778546
> 
> 赞同：0
> 
> 时间：2012-05-28T01:42:28.723
> 
> 标签：url-rewriting

我试过用谷歌搜索答案，但我认为我使用了错误的术语，因为什么都没有出现。

所以我希望能够采取：

```
example.com/blog 
```

并将其更改为：

```
blog.example.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T01:47:14.980

您需要的是一个“子域”。您的网站托管在什么服务器类型上？（Windows、Linux 等）。基于此，设置子域的下一步将非常清楚。

在某些情况下，您需要向您的域名注册商添加“C-NAME”记录，因此请与他们核实以确保允许子域。

如果您有基于 Linux 的主机（很可能运行 Apache Web 服务器），请执行以下步骤：

[http://www.santiagolizardo.com/article/how-to-setup-wildcard-subdomains-in-linux/64001](http://www.santiagolizardo.com/article/how-to-setup-wildcard-subdomains-in-linux/64001)

# database - 该数据集的最佳数据库是什么？

> ID：10778549
> 
> 赞同：2
> 
> 时间：2012-05-28T01:42:58.457
> 
> 标签：database, database-design, redis

我有一个应用程序（对于给定的 twitter 用户），它会获取您关注**但不关注您**的 twitter 用户列表。它这样做：

*   比较两个列表，一个来自时间 x 和时间 y，看看是否有更多的人关注你。
*   看看 twitter 用户 x 花了多长时间关注你。
*   看看用户 x 有多少转推/评论来关注你

我想出的简单方法就是与用户和不关注你的人建立一个有很多属于关系的关系，例如：

```
User table
-id

TwitterUser table
-user_id 
-timestamp
-isFollowing 
```

因此，使用该 SQL 模式，我可以获得给定用户的所有非后续用户，并且可以通过时间戳对它们进行比较以匹配上述要求。

但是，我希望有一个比 sql 数据库更好的数据库后端来表示这个数据集。我一直在尝试使用 redis，但不知道如何实现它。

我在想也许是一个文档存储-b/c 我想要做的就是获取两个数据集的差异。或者更准确地说：我想区分两个 twitter 用户 ID 列表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T04:24:42.923

比较两个数组的蛮力方法将具有 O(N*M) 的时间复杂度，其中 N 和 M 是数组的大小。因此，我们应该使用一些智能数据结构来存储它们以有效地执行此操作。

我想出了以下方法：

1.  twitter id 列表是一个集合，因为 id 是唯一的。Redis 支持集合并允许执行集合操作，例如差异。假设你有 2 套钥匙`ids_at_time_x`和`ids_at_time_y`。`SADD` 使用如下方式向它们添加元素：

    ```
    SADD ids_at_time_x "15424" 
    ```

    当您准备好执行差异执行时

    ```
    SDIFF ids_at_time_x ids_at_time_y 
    ```

    这将返回一个`ids_at_time_x`不存在于`ids_at_time_y`. 如果您想做反向操作，即检索不存在于 中的 id 列表`ids_at_time_x`，只需交换参数：

    ```
    SDIFF ids_at_time_y ids_at_time_x 
    ```

    SDIFF 最好的一点是它的运行效率非常高——时间复杂度为 O(N)，其中 N 是这两组中元素的总数。即使您进行 2 次差异操作，时间复杂度仍然是线性的。

2.  将它们存储为排序列表。Redis 支持排序集。添加 id 时，您必须包含一个元素分数（Redis 将根据分数进行排序），在您的情况下等于 id ：

    ```
    ZADD ids_at_time_x 15424 "15424" 
    ```

    当列表准备好时，我们检索它们并在代码中比较它们。这是伪代码：

    ```
    n = size of A
    m = size of B
    i = 0
    j = 0
    setA = [] // List of elements that present only in A
    setB = [] // List of elements that present only in B
    intersection = [] // List of elements that present in A and B

    while i < n or j < m {
      if j == m {
        setA.add(A[i])
        i = i + 1
      } else if i == n {
        setB.add(B[j])
        j = j + 1
      } else if A[i] < B[j] {
        setA.add(A[i])
        i = i + 1
      } else if B[j] < A[i] {
        setB.add(B[j])
        j = j + 1
      } else {
        intersection.add(A[i])
        i = i + 1
        j = j + 1
      }
    } 
    ```

    解释：我们使用 A 和 B 已排序的事实。我们有两个索引，都从零开始。比较 A 和 B 的两个第一个元素。如果 A[0] 小于 B[0]，我们知道 A[0] 只存在于 A 中，因此我们将其添加到列表 setA 并将 A 的索引增加一. 如果 B[0] 小于 A[0]，我们将 B[0] 添加到列表 setB 并将 B 的索引增加一。如果 A[0] == B[0] 我们将 A[0] 添加到交叉点列表并增加两个索引。此代码也适用于线性时间 O(N)，其中 N 是 A 和 B 中元素的总数。

    请注意，这种方法适用于任何可以返回排序列表的数据库，这意味着您可以将其存储在传统的 SQL 数据库中并使用`ORDER BY twitter_id`) 检索列表。

查看 Redis 支持的所有[数据类型](http://redis.io/topics/data-types)及其命令的完整列表，它们都有很好的文档记录。Redis 也有多种语言的官方客户端，所以这应该不是问题。您仍然可以将重要数据存储在 SQL 数据库中，并让 Redis 处理 id 列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T01:48:50.180

neo4j (http://neo4j.org) 是一个用于将数据存储为图形的数据库引擎。我没有任何实际使用 neo4j 的经验，但它似乎很合适。

# java - 我想使用 pdfbox 显示来自 pdf 的阿拉伯文本？

> ID：10778550
> 
> 赞同：3
> 
> 时间：2012-05-28T01:43:34.773
> 
> 标签：java, pdf, arabic, pdfbox

它显示字母但以阿拉伯语的相反顺序我使用以下代码

```
 PDDocument pddDocument = PDDocument.load(new File("test1.pdf"));
        PDFTextStripper textStripper = new PDFTextStripper();

        TextNormalize normalize = new TextNormalize("UTF-8");
        String Text = textStripper.getText(pddDocument);

      Text=normalize.makeLineLogicalOrder(Text, true);
      Text = normalize.normalizePres(Text);
      Text = normalize.normalizeDiac(Text);
        System.out.println(Text); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T02:44:54.137

[通过从http://site.icu-project.org/download/49#TOC-ICU4J-Download](http://site.icu-project.org/download/49#TOC-ICU4J-Download)下载 icu4j-49_1.jar将其放入类路径中解决了问题

然后重写代码如下

```
PDDocument pddDocument = PDDocument.load(new File("test1.pdf"));
            PDFTextStripper textStripper = new PDFTextStripper();
            String Text = textStripper.getText(pddDocument);
            System.out.println(Text); 
```

# opengl - 如何将 OpenGL 纹理转换为 CUDA 纹理？

> ID：10778554
> 
> 赞同：3
> 
> 时间：2012-05-28T01:45:18.080
> 
> 标签：opengl, cuda, textures

这里我有一个 OpenGL 纹理：GLuint tex1;

现在我想使用 tex1 作为 CUDA 中的搜索表，所以也许我应该将它转换为 CUDA 纹理。

众所周知，CUDA 纹理作为纹理<> 的一种，来自于一个 CUDABindTextureToArray。

那么，如何从 OpenGL 纹理中获取 CUDA 纹理呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T06:19:45.417

`cudaGraphicsGLRegisterImage`你应该首先用函数注册你的纹理。

```
cudaGraphicsResource *resource;
cutilSafeCall(cudaGraphicsGLRegisterImage(&resource,text1,GL_TEXTURE_2D, cudaGraphicsMapFlagsNone)); 
```

然后你可以得到这个资源的数组引用。

```
cudaArray* array;

cudaGraphicsMapResources (1, &resource, 0);
cudaGraphicsSubResourceGetMappedArray (&array, resource, 0, 0); 
```

之后，您可以使用您的`array`并将其绑定到 CUDA 纹理。

# database - 在 heroku DB 上保存图像与 Amazon S3：优点缺点？

> ID：10778555
> 
> 赞同：4
> 
> 时间：2012-05-28T01:45:23.740
> 
> 标签：database, image, heroku, amazon-s3

我在互联网上到处搜索，比较将图像保存在 Heroku PG-SQL 数据库中与保存在 Amazon S3 上的比较。我目前正在尝试做出设计决定。但是，这是我第一次编写网络应用程序。到目前为止，这是我所知道的做出决定：

1.  在数据库上保存图像会降低应用程序的性能
2.  与文件系统相比，将图像保存在 Db 上是昂贵的
3.  您无法访问 Heroku 中的文件系统
4.  您可以以非常便宜的价格将图像保存在 Amazon S3 中
5.  如果存储在 Amazon S3 上的图像未通过 Heroku 上的应用程序，则无法在保存之前对其进行处理
6.  在 Amazon S3 上检索和保存图像每次调用都要花钱
7.  如果浏览器正在检索具有图像的对象，则浏览器对每个对象发出 2 个请求，1 个请求来自 heroku 的数据，另一个来自 S3 的图像请求。这可能是有问题的，因为浏览器每单位时间只能发出某些 >m.unt 的请求。
8.  如果图像尺寸小，将图像保存在数据库上不会大大降低性能。
9.  从数据库中删除图像可能会导致碎片

这些是我知道的关于这个话题的事实。就目前情况而言，我倾向于将图像保存在 Heroku DB 中。因为它们大多是缩略图/小图像，它们的大小小于 250MB

我想知道是否有人可以让我知道这些事实是否错误，或者在做出这个设计决定时我是否需要考虑其他因素。

另外，如果有人能指出我在网络上关于这个主题的一些很好的讨论，我将非常感激。我在这个讨论中找不到任何确切的内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T01:55:41.673

将它们保存在 S3 上。性能方面，它比存储在数据库上要好得多——如果你存储在数据库上，请求必须通过你的 Web 应用程序，然后发出一个 DB 请求（或立即点击 varnish，但无论如何都是如此）。此外，除非您有很多 dyno，否则这意味着用户一次只能获取一个图像（瘦是单线程的，除非在特殊配置下用于长时间运行的请求）。使用 S3（或任何云存储解决方案），它就像对静态资源的另一个 HTTP 请求一样简单——您的应用甚至不必知道它！

# mysql - mysql工作台列图标是什么意思

> ID：10778561
> 
> 赞同：39
> 
> 时间：2012-05-28T01:47:45.423
> 
> 标签：mysql, sql, mysql-workbench

在 MySQL Workbench 中，当您编辑表时，每个列名都有一个彩色菱形。我在哪里可以找到解释每种颜色含义的文档？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2015-03-04T16:37:21.547

![在此处输入图像描述](../Images/c834bcc497a506e02c0fc039509148f4.png)![在此处输入图像描述](../Images/ffb4e2b01650d809a37b91c35c282a64.png)键：（部分）主键 已
![在此处输入图像描述](../Images/10def8952f38ce0d763f576e6b6e2746.png)![在此处输入图像描述](../Images/451f258d6577c671bc35194e237e6761.png)填充 菱形：NOT NULL
![在此处输入图像描述](../Images/6b8152931b013fde2c10acc3321eb76c.png)![在此处输入图像描述](../Images/456f93d5cfe095ea132ef22ae34e2151.png)未填充 菱形：NULL
![在此处输入图像描述](../Images/ac1b9ab900730922e93636e6e9e66496.png)![在此处输入图像描述](../Images/006db8b117837ec354888feb910c559f.png)![在此处输入图像描述](../Images/0db9760b99323dfd81e1169d06b633b7.png)红色：（部分）外键
![在此处输入图像描述](../Images/280489788dbd954aecb4f044e27cf267.png)![在此处输入图像描述](../Images/f0ac0860d869aa8c61671ad5ea3c5e57.png)蓝线菱形：简单属性（无键）

可以组合，例如：
![在此处输入图像描述](../Images/c834bcc497a506e02c0fc039509148f4.png)是红色键，所以它是主键，也是
![在此处输入图像描述](../Images/ffb4e2b01650d809a37b91c35c282a64.png)外键红色实心菱形，所以它不是NULL
![在此处输入图像描述](../Images/10def8952f38ce0d763f576e6b6e2746.png)
![在此处输入图像描述](../Images/451f258d6577c671bc35194e237e6761.png)
![在此处输入图像描述](../Images/6b8152931b013fde2c10acc3321eb76c.png)
![在此处输入图像描述](../Images/456f93d5cfe095ea132ef22ae34e2151.png)

附注：
请注意，MySQL Workbench 有一个错误的**数据库 > 逆向工程师 (Ctrl-R)**选项，您可以使用该选项生成 ERD 图并使用这些图标。根据我的经验，v6.x 比 v8.x 好，但两者都有自己的怪癖/错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T01:52:44.970

> 列名左侧是一个图标，指示该列是否是主键的成员。如果图标是小键，则该列属于主键，否则图标是蓝色菱形或白色菱形。蓝色菱形表示该列已设置 NN。要在主键中添加或删除列，请双击该图标。您还可以通过选中表编辑器的“列详细信息”部分中的“主键”复选框来添加主键。

来源：[http](http://dev.mysql.com/doc/workbench/en/wb-table-editor.html) ://dev.mysql.com/doc/workbench/en/wb-table-editor.html 部分：7.7.1.3.2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T01:50:57.907

使用谷歌，我发现了这个。

[http://dev.mysql.com/doc/workbench/en/wb-using-table-tool.html](http://dev.mysql.com/doc/workbench/en/wb-using-table-tool.html)

这是足够的解释吗？我很乐意提供进一步的帮助。

# jquery - Json 仅显示具有特定 ID 的对象

> ID：10778562
> 
> 赞同：1
> 
> 时间：2012-05-28T01:48:24.753
> 
> 标签：jquery, json

我想知道如何将具有特定 id 的 json 对象打印到 div？！我的 json 文件看起来像这样（缩短）并且由我使用的网店程序自动生成：

```
 "shipping":{
   "methods":{
     "core|13490|40699":{
       "id":"core|13490|40699",
       "price":{
         "price_excl":"0.0000","price_incl":"0.0000"
       }
     },
     "core|10292|40695":{
       "id":"core|10292|40695",
       "price":{
         "price_excl":"21.0084","price_incl":"25.0000"
       }
     }
   }
 }, 
```

我的脚本是这样的：

```
 window.onload = function(){
      $.getJSON('http://shop.com/cart/?format=json', function(data){
        $.each(data.cart.shipping.methods, function(index, method){
          $('<span></span>')
            .html('<strong>' + method.price.price_incl + '</strong>')
            .appendTo('.cart-shipping');
        });
      });
    }; 
```

我试图归档的是，仅显示 ID 为“core|10292|40695”的运输方式的运输价格。使用代码，我显示了两个运费。此外，我想知道如何将这些价格格式化为“真实”价格而不是 25.000。

正如您可能看到的，我对 JSON、jquery/ajax 很陌生，但我愿意学习。以上我通过搜索这个网站进行了归档，但我的问题是我真的无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T01:57:07.150

您是否尝试过使用简单的 if 语句？例如：

```
if (index == "core|10292|40695") {
    $('<span></span>').html('<strong>' + method.price.price_incl + '</strong>').appendTo('.cart-shipping');
} 
```

关于格式化货币，我相信有[很多可用的信息](https://stackoverflow.com/questions/149055/how-can-i-format-numbers-as-money-in-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T02:10:52.293

您要做的是替换以下块：

```
$.each(data.cart.shipping.methods, function(index, method){
  $('<span></span>').html('<strong>' + method.price.price_incl + '</strong>').appendTo('.cart-shipping');
}); 
```

和：

```
$('<span></span>').html('<strong>' + data.cart.shipping.methods['core|10292|40695'].price.price_incl + '</strong>').appendTo('.cart-shipping'); 
```

基本上，原始代码使用 $.each 结构迭代接收到的数据。在您的情况下，您不想遍历所有值，您已经知道想要哪个值。

另外，请注意建议您使用 if 语句的答案。这些答案仍将遍历整个对象，浪费资源。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T01:57:44.280

`$('<span></span>').html("whatever")`将创建一个包含此类数据的跨度，但该跨度尚未显示在页面上。

尝试在页面上有一个容器并在其中插入数据。

例如。

html: `<div id="a"></div>`

js： `<script>$('#a').html('test');</script>`

# delphi - MessageBoxW/Memo/TEdit 显示 UNICODE 字符

> ID：10778565
> 
> 赞同：0
> 
> 时间：2012-05-28T01:49:08.333
> 
> 标签：delphi, unicode, utf-8, delphi-7

我使用此函数从 RCDATA 资源读取 UTF-8 编码数据：

```
function ReadResourceW(ResourceName : WideString): WideString; // for UTF-8 and RCDATA
 var
  ServerModule: HMODULE;
  ResourceLocation: HRSRC;
  ResourceSize: dword;
  ResourceHandle: THandle;
  ResourcePointer: pointer;
  PBufferString : AnsiString;
 begin
  ServerModule := LoadLibraryW(NIL);
  try
   ResourceLocation := FindResourceW(ServerModule,PWideChar(ResourceName),PWideChar(10)); // For RCDATA
   ResourceSize := SizeofResource(ServerModule, ResourceLocation);
   ResourceHandle := LoadResource(ServerModule, ResourceLocation);
   ResourcePointer := LockResource(ResourceHandle);
   if ResourcePointer <> nil then begin
    SetLength (PBufferString, ResourceSize);
    CopyMemory(@PBufferString[1], ResourcePointer, ResourceSize);
    Delete (PBufferString,1, 3); // Delete the EF_BB_BF
    result := UTF8Decode(PBufferString);
    FreeResource(ResourceHandle);
    end;
   finally
    FreeLibrary(ServerModule);
   end;
 end; 
```

之后，我使用 MessageBoxW 显示 UNICODE 字符。在某些字符（如笑脸、心形等）上，消息框仅显示一个正方形。此外，我有 Delphi7 的 TNTComponents，所有的 unicode 字符都显示为“|” 在备忘录或编辑中。有没有办法可以“绘制”消息框或备忘录/编辑/等中的所有 unicode 字符。

谢谢您的帮助。

# c# - 如何将参数传递给 Ninject 创建的瞬态对象？

> ID：10778567
> 
> 赞同：1
> 
> 时间：2012-05-28T01:50:39.123
> 
> 标签：c#, ninject

我正在开发一个使用 NInject 创建对象实例的 ASP.NET MVC 3 项目。它为每个动作构建一个对象图。它在大多数情况下运行良好。但是，我有一个新要求，我必须将一些参数（来自请求）传递给对象图中的一些对象（它们是瞬态的）。我怎样才能做到这一点？这是一个例子：

```
class MyController : Controller
{
    [Inject]
    public IProcess Process {get;set;}

    public ActionResult MyAction(int value)
    {
         // how to pass the 'value' to an object (IOptions) created by NInject
         this.Process.Run();
    }
} 
```

如上面的代码所示，Process 属性被注入了一个`IProcess`由 NInject 创建的实例。场景背后有一个复杂的对象图。我想将“值”传递给对象图中的一个对象，该对象是实例`IOptions`使用的瞬态`IProcess`实例。该`IOptions`接口有一个名为 的方法`SetValue(int)`。

我想做的是，当创建 IOptions 对象时，它的 SetValue(int) 将被调用。当然，它应该是线程安全的。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:06:45.590

Hy 这可以通过自定义工厂或在`Ninject.Factory.Extension`幕后完成所有魔法的工厂来实现。我将在这里展示手动方法：

```
public interface IProcessFactory {
   IProcess Create(int value);
}

public class ProcessFactory : IProcessFactory {
    public IProcess Create(int value)
    {
        return this.kernel.Get<IProcess>(new Parameter("value", value, true));
    }
} 
```

模块中的某处：

```
 this.Bind<IProcess>().To<Process>();
        this.Bind<IOption>().To<Option>()
            .OnActivation((ctx, o) => o.SetValue((int)ctx.Parameters.Single(p => p.Name == "value").GetValue(ctx, ctx.Request.Target))); 
```

我认为在 ninject 扩展中的某处也应该有一个扩展方法，可以简化`OnActivation`调用。

# c - 安全的 C 编程

> ID：10778570
> 
> 赞同：17
> 
> 时间：2012-05-28T01:51:15.033
> 
> 标签：c, memory

我注意到我的 C 编译器 (gcc) 可以让我执行以下操作：

```
#include <stdio.h>
main(){
    short m[32768];
    short y = -1;
    short z = -1;
    printf("%u\n", y);
    m[y] = 12;
    printf("%d\n%d\n", y, m[z]);
} 
```

当我运行它时，它会吐出：

```
4294967295
12
12 
```

这对我来说似乎有点莫名其妙。

首先，运行这样的程序对我来说安全吗？我是否有可能意外覆盖操作系统（如果相关，我正在运行 OS X）？

此外，我曾预料到至少会出现像我过去遇到的某种段错误，但悄悄地忽略这样的错误真的让我害怕。为什么这个程序不对我造成段错误？

最后，出于好奇（这可能是最愚蠢的问题），有没有办法解决这种疯狂？我可以期望所有 ANSI C 编译器都以这种方式工作吗？不同平台上的 gcc 怎么样？内存布局是否明确定义为可利用（也许如果您要编写跨平台的混淆代码）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-28T02:01:44.620

C 语言将某些程序的行为定义为“未定义”。他们可以做任何事情。我们称这样的程序是错误的。

其中之一是访问数组的声明/分配边界之外的程序，您的程序会*非常*小心地执行此操作。

你的程序是错误的；你的错误程序发生的事情就是你看到的：-}它可能“覆盖操作系统”；实际上，大多数现代操作系统都会阻止您这样做，但是您可以覆盖进程空间中的关键值，并且您的进程可能会崩溃、死亡或挂起。

简单的回答是“不要编写错误的程序”。然后你看到的行为将使“C”有意义。

在这种特殊情况下，使用您的特定编译器，数组索引“有点”起作用：您在数组外部进行索引，它会获取*一些*值。分配给 m 的空间在栈帧中；m[0] 位于堆栈帧中的某个位置，“m[-1]”基于结合数组地址和索引的机器算术，因此不会发生段错误并且访问内存位置。这使编译后的程序可以读取和写入该内存位置……作为错误程序。基本上，编译的 C 程序不会检查您的数组访问是否超出范围。

我们的[CheckPointer](http://www.semanticdesigns.com/Products/MemorySafety)工具在应用于此程序时会告诉您数组索引在执行时是非法的。因此，您可以自己观察程序以查看您是否犯了错误，或者让 CheckPointer 在您犯错时告诉您。我强烈建议你无论如何都要目测。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-10-26T01:12:23.830

您可能对 INRIA 的[CompCert C](http://compcert.inria.fr/download.html)感兴趣，它是 C 语言的形式化、数学上可验证和验证的实现。[它与著名的Coq 证明助手](https://coq.inria.fr/)是同一作者。还有另一个变体 Verifiable [C](https://vst.cs.princeton.edu/)。

我对此知之甚少，但我知道法国的飞机工程师使用它来对即将推出的飞机嵌入式计算机进行编程，因此至少在法国，它是一种官方接受的关键系统编程语言。

最后，请注意，形式上可验证的语言不同于安全语言。

例如，据说 MISRA C 是一种安全的 C 语言（虽然这是有争议的），还有[Safe-C](http://www.safe-c.org/start.html)、微软的[Checked-C](https://www.microsoft.com/en-us/research/project/checked-c/)和[Cyclone](https://cyclone.thelanguage.org/)，以及[Safe C Library](https://sourceforge.net/projects/safeclib/)和[libsrt](https://github.com/faragon/libsrt)等无需更改编译器的安全库，或仅使用标准编译器和库，但使用诸如[frama-c 之](https://frama-c.com/)类的源代码分析器。

但是，尽管安全语言可以修复缓冲区溢出等一些问题，但不能保证关键系统所需的一致逻辑流。例如，CompCert C 应该始终为相同的 C 指令生成相同的汇编器指令集。CompCert C 和 Ada 等形式上可验证的语言提供了这种形式上的保证。

您可能还对这些文章感兴趣：

*   [健全和不健全的静态分析有什么区别？](https://www.electronicdesign.com/embedded-revolution/whats-difference-between-sound-and-unsound-static-analysis)
*   [C 和 C++ 中未定义行为指南，第 1 部分](https://blog.regehr.org/archives/213)
*   [https://github.com/stanislaw/awesome-safety-critical](https://github.com/stanislaw/awesome-safety-critical)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T02:09:26.327

> 首先，运行这样的程序对我来说安全吗？

你的例子：不。绝对不是。你为什么还要尝试？你期待它做什么？使用负索引的更通用示例 - 只要它们取消引用合法内存就可以了。

> 此外，我曾预料到至少会出现像我过去遇到的某种段错误，但悄悄地忽略这样的错误真的让我害怕。为什么这个程序不对我造成段错误？

盲目的运气。（实际上并不完全——正如 Ira Baxter 所解释的那样）

> 最后，出于好奇（这可能是最愚蠢的问题），有没有办法解决这种疯狂？

如果您设置指向数组内部内容的指针，那么负索引可能会起作用，但对于其他人来说，理解和维护它们将是一场噩梦！- 我已经看到它在嵌入式系统中完成。

> 我可以期望所有 ANSI C 编译器都以这种方式工作吗？

是的。

> 不同平台上的 gcc 怎么样？

是的

> 内存布局是否明确定义为可利用（也许如果您要编写跨平台的混淆代码）？

是的 - 但我不确定你是否真的想依赖它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T02:31:15.450

*   “安全”，从可能损坏操作系统的角度来看——是的，大多数情况下，大多数“现代”操作系统实施某种形式的“存储保护”，因此任性或恶意程序不能对操作系统或其他程序做坏事。（但“大部分”表示没有超过 50 行的软件是完美的，而且你总是有奇怪的机会在盔甲中发现裂缝。）
*   从您的程序“行为”正确的角度来看，“安全”？Wellllllllll，不，主要是。这里的“大部分”与知识渊博（我不会说“聪明”）的程序员偶尔会做“奇怪”的事情有关，例如使用负数组索引，当他们知道编译器和运行时如何操作并且需要有效地完成一些超出常规的事情。但是他们（希望）这样做是知道他们使用的“技巧”非常依赖于系统/编译器。

但正如@jb 指出的那样，“安全的 C 编程”是矛盾的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T03:38:03.853

除了上述内容之外，我建议针对 valgrind 运行的程序比仅基于编译器和操作系统信任而被释放的程序更有可能被检测为错误。Valgrind 不会捕获所有内容，但在检测对未初始化或越界内存的访问方面做得很合理。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-28T02:21:33.570

如果程序请求内存中的合法地址（m[-1]*可能*会这样做，因为它的行为是未定义的），你不会得到一个段错误......特别是如果你要求一个短的，因为它适合大多数单词长度。这是一个非常糟糕的主意，您可以轻松地覆盖磁盘上的某些内容，尽管内核受到保护，除非您在启动时立即运行您的代码。

我不确定你为什么打印出 -1 的地址。

# facebook - link_url 替换标记

> ID：10778572
> 
> 赞同：1
> 
> 时间：2012-05-28T01:51:30.180
> 
> 标签：facebook, ads, substitution, facebook-ads-api

一些搜索引擎支持在运行时（即投放广告时）替换的一组替换标记。Facebook 是否支持任何替代令牌？我在哪里可以找到这个文档？谢谢。

# javascript - 使用 d3 对轴标签进行多级/分组

> ID：10778573
> 
> 赞同：11
> 
> 时间：2012-05-28T01:51:44.030
> 
> 标签：javascript, graph, charts, svg, d3.js

我想知道是否有一种简单的方法可以在 d3 中添加多级/分层/轴标签分组。例如，如果我有一个折线图，其中 x 轴的月份名称跨越多年，我还希望将年份作为月份名称下方的标签，因此它看起来像这样。

```
Oct   Nov   Dec   Jan   Feb   Mar   Apr
|_____________|   |___________________|
     2011                 2012 
```

我知道您可以在 SVG 中执行任何操作以使其正常工作，但我想尽可能多地使用 d3，以便更轻松地动态更新图表。

谢谢，杰克

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-28T03:10:22.170

您可以随意添加和格式化多个轴。例如 - 显示一个轴显示月份，另一个显示年份。一个基本的例子：http: [//jsfiddle.net/Ea4mT/1/](http://jsfiddle.net/Ea4mT/1/)

之后您可能不得不稍微弄乱它以使其具有更可取的格式，但这似乎是您要完成的工作的核心。

# asp.net-mvc - 为什么当我的字符串太长时，MVC 会在我的模型上调用 set 方法？

> ID：10778574
> 
> 赞同：0
> 
> 时间：2012-05-28T01:51:45.807
> 
> 标签：asp.net-mvc, model-view-controller, llblgenpro

在 ASP.NET MVC 应用程序中，我有一个模型定义如下：

```
public class TestModel
{
    private string _firstName;

    [DisplayName("First Name")]
    [StringLength(20)]
    public string FirstName
    {
        get { return _firstName; }
        set
        {
            if (!string.IsNullOrEmpty(value))
                if (value.Length > 20)
                    throw new Exception("Too long");

            _firstName = value;
        }
    }
} 
```

在我的控制器更新操作方法中，我有以下代码：

```
[HttpPost]
public ActionResult Update()
{
    var tm = new TestModel();
    if (ModelState.IsValid)
    {
        if (TryUpdateModel(tm))
        {
            // Save to the DB
        }
    }

    return View("Test", tm);
} 
```

问题是，当我在视图中的文本框中输入一个超过 20 个字符的值时，我希望 MVC 不会尝试在我的模型上设置属性（然后抛出异常，因为它太长而无法放入数据库列）。在实际尝试设置属性之前，我会认为它会被 ModelState.IsValid 测试停止。

请注意，我在这里模拟一个实际的 ORM - LLBLGenPro - 这是它为具有长度的数据库列生成的属性所做的 - 如果您尝试设置一个太长的值，它会引发异常。

除了修改 LLBLGen 的模板，我应该如何解决这个问题？

这是 ASP.NET MVC 的正常行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:53:40.873

您提供的代码没有从视图接收模型实例，并且您正在您的代码中创建类的实例，因此无法告诉
此代码：

```
var tm = new TestModel(); 
```

创建 Testmodel 的实例，但无论如何它都没有绑定到从发布的表单接收到的值。你的动作应该基本上看起来像

```
public ActionResult Update(TestModel model) 
```

这是模型 mvc 将尝试验证的实例。
也许您应该发布您的整个代码（包括视图）以查看是否缺少其他任何内容，但是使用您到目前为止提供的代码，您将永远不会在存储库中更新表单值，也不会抛出异常，因为FirstName 将保持为空。

# java - java子类当我制作一个对象时？

> ID：10778578
> 
> 赞同：1
> 
> 时间：2012-05-28T01:52:25.900
> 
> 标签：java, eclipse, subclass

> **可能重复：**
> [Java 中如何使用匿名（内部）类？](https://stackoverflow.com/questions/355167/how-are-anonymous-inner-classes-used-in-java)

我有一个关于java的问题。我在很多来源都看到了这个......

```
Class object = new Class()
{
    // What is this, a subclass or what ?
    public void someRandomMethod()
    { 
    }
}; 
```

嗯，如果是子类，当我创建对象时，该类会自动执行吗？我很困惑

对不起我的英语，我尽力做到最好。

非常感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T01:54:56.183

它被称为[匿名类](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)。是的，课程将自动延长。这种模式最常用于创建回调接口，例如`Runnable`或`ActionListener`。

```
Thread foo = new Thread(new Runnable() {
    @Override
    public void run() {
        System.out.println("Hello World");
    }
});
foo.start(); // Hello World 
```

这将创建一个新实例`Runnable`并将其传递`Thread`给执行。[这是 Java 早期的闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)替代品。

# javascript - 转义位于双引号中的单引号中的单引号

> ID：10778579
> 
> 赞同：2
> 
> 时间：2012-05-28T01:52:27.543
> 
> 标签：javascript, html

我有这个被破坏的代码。由于单引号和双引号。

我应该如何逃脱它以使其正常工作？

```
<a href="path" rel="example_group" title="<a href='/Home/Vote/@item.Id'><img src='/Content/images/021.png' style='float:left; margin-left:45%;' /></a><a onClick='window.open('test.com','sharer','toolbar=0,status=0,width=548,height=325');' href='javascript: void(0)'><img src='/Content/images/022.png' /></a>"><img  src="@Url.Action("ViewImage", "Image", new { id = item.Id, imageType="thumb" })" alt="" width="100" height="100" /> </a> 
```

`window.open`正在打破它。

我怎样才能解决这个问题？我试图逃跑，但没有运气。

**请查看此代码在标题中。所以我不能使用双引号。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T01:55:12.890

在单引号内使用双引号。

`<a onClick='window.open("test.com","sharer","toolbar=0,status=0,width=548,height=325");'`

或者用双引号打开和关闭它

`<a onClick="window.open('test.com','sharer','toolbar=0,status=0,width=548,height=325');"`

**编辑**

您可以使用`&quot;`代替双引号。如果您需要将此 HTML 写回某处，您可以在那时替换`&quot;`with 。`"`

**编辑**

[这个](https://stackoverflow.com/questions/4015345/how-to-properly-escape-quotes-inside-html-attributes)类似的 SO question 可能会有所帮助。

# math - 如何确定一组平行线中最外层的线？

> ID：10778582
> 
> 赞同：2
> 
> 时间：2012-05-28T01:53:11.917
> 
> 标签：math, geometry, trigonometry, vector-graphics, lines

在一组平行线中，我如何确定哪些是最外面的线？线条可以是任何旋转角度。

插图：

`----`<- 最外层
`----`
`----`
`----`<- 最外层

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T01:58:37.197

将它们放在[一般形式](http://en.wikipedia.org/wiki/Linear_equation#General_form)中，然后选择具有最极端常数项的那些。

# php - PHP中的MySql查询语法错误

> ID：10778585
> 
> 赞同：1
> 
> 时间：2012-05-28T01:53:46.467
> 
> 标签：php, mysql

这段代码有什么错误

```
$FN=strtok($_POST['IS'],' ');
$LN=strtok(' ');
$query="SELECT person_id FROM a_person WHERE first_name=$FN AND last_name=$LN"; 
```

错误是这样说我不知道​​为什么？

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“Select AND last_name=”附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T01:59:22.830

你需要引用`$FN`和`$LN`

```
$query = "SELECT person_id FROM a_person WHERE first_name='$FN' AND last_name='$LN'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T01:59:23.480

使用爆炸并将它们剥离。mysql也转义数据：

```
$names = explode(' ',mysql_real_escape_string($_POST['IS']));
$FN = $names[0];
$LN = $names[1];
$query="SELECT person_id FROM a_person WHERE first_name='$FN' AND last_name='$LN'"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T02:21:37.033

**您需要用单引号包裹字符串值。**

`$query = "SELECT person_id FROM a_person WHERE first_name='$FN' AND last_name='$LN'";`

# c# - 为什么 Object.Equals(new Object(), new Object()) 是假的？

> ID：10778588
> 
> 赞同：1
> 
> 时间：2012-05-28T01:54:02.627
> 
> 标签：c#, boolean, reference-type

为什么是下面这段代码`false`？

```
Object.Equals(new Object(), new Object()) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T01:58:07.857

来自[MSDN](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)

> Equals 的默认实现支持引用类型的引用相等，以及值类型的按位相等。引用相等意味着被比较的对象引用指向同一个对象。按位相等意味着被比较的对象具有相同的二进制表示。

换句话说，您正在创建两个相同类型的不同对象，并查看它们是否是完全相同的对象，而事实并非如此。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-28T01:58:50.040

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/w4hkze5k.aspx)：

> Equals 的默认实现支持引用类型的引用相等，以及值类型的按位相等。**引用相等意味着被比较的对象引用指向同一个对象**。按位相等意味着被比较的对象具有相同的二进制表示。

请注意，派生类型可能会覆盖 Equals 方法以实现值相等。值相等意味着比较对象具有相同的值但不同的二进制表示。

您正在创建两个不同的对象。

# python - 如何在 python-webkit 中设置用户代理

> ID：10778595
> 
> 赞同：2
> 
> 时间：2012-05-28T01:55:44.593
> 
> 标签：python, webkit

```
import webkit
import gtk
import jswebkit

webview = webkit.WebView()
webview.connect('load-finished', lambda v, f: gtk.main_quit())
# How can I set user-agent ?
webview.load_uri('http://localhost/tech/test.html')
gtk.main()
js = jswebkit.JSContext(webview.get_main_frame().get_global_context())
renderedBody = str(js.EvaluateScript('document.body.innerHTML'))
print renderedBody 
```

我想为 webkit.WebView 设置像“iPad”或其他用户代理，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T02:20:21.340

尝试：

```
 settings = webkit.WebSettings()
  settings.set_property('user-agent', 'iPad')
  webview.set_settings(settings) 
```

# python - 在 django 中处理匹配计数的方法

> ID：10778597
> 
> 赞同：0
> 
> 时间：2012-05-28T01:56:18.367
> 
> 标签：python, django, models, django-queryset

几个小时以来，我一直试图破解并弄清楚如何自己解决这个问题，但我似乎想不出一个优雅的解决方案。我想知道是否有人可以提供帮助。

这是模型布局（示例）

```
Model A:
candyBarChoices

Model B:
snackLog 
```

好的，所以基本上困境是这样的。在数据库中，大约有 15 种糖果棒可供选择。每天，当用户记录他们吃的东西时，他们会选择一个糖果棒。我的问题是，在给定一组零食日志的情况下，“统计”每个糖果棒选择的有效方法是什么？

例如：如果我提供了一个包含 15 个零食日志的 QuerySet，有时用户可能在当天吃了多个糖果棒，因此每个零食日志可能有多个糖果棒。我如何运行这个查询集并创建他们吃的某个糖果棒的总数的编译数据集？

我已经使用字典等提出了多个非常混乱的解决方案。但是如果没有搞砸的话，它们都不能工作..请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:31:12.830

您应该发布实际模型以帮助阐明您的设置。看起来您正在尝试聚合模型实例的相关对象。如果是这样，请查看有关[QuerySet 聚合](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#generating-aggregates-over-a-queryset)的文档。

# objective-c - 如何使用方法和参数调用 WSDL？

> ID：10778600
> 
> 赞同：0
> 
> 时间：2012-05-28T01:56:38.447
> 
> 标签：objective-c, xcode, web-services, ipad, wsdl

嗨，我是 xcode 和 Objective-C 的新手

现在我有应用程序通过 xml 从服务器获取数据

但是如果我想通过带有方法和参数的 WSDL 将 xml 更改为 web 服务，我该怎么做

前任。ws 网址

```
http://HOST:PORT/ExportingReportWebservice/ExportingReportWebservice?wsdl 
```

方法名称是 getReport 参数是 java.lang.String

SOAP 响应

```
<?xml version="1.0" encoding="UTF-8"?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
        <ns2:getReportResponse xmlns:ns2="http://controller.exportingreportwebservice.lox.org/">
            <return>
                <exportId>4</exportId>
                <readFG>N</readFG>
                <receiverId>2711</receiverId>
                <referenceId>21</referenceId>
                <referenceName>???????????????????????? ?????????????????????????????????????????????</referenceName>
                <reportFullPath>http://10.3.24.202:8081/ExportingReportAdmin/Reports/55126a88-dcec-45d1-b156-e1eb9ab2b48e.pdf</reportFullPath>
                <reportName>55126a88-dcec-45d1-b156-e1eb9ab2b48e.pdf</reportName>
                <senderId>7615</senderId>
                <senderName>???????????????????????? ??????????????????</senderName>
                <sentDate>2012-05-23 10:40:01.0</sentDate>
                <subject>Report Surgical</subject>
            </return>
            <return>
                <exportId>8</exportId>
                <readFG>N</readFG>
                <receiverId>2711</receiverId>
                <referenceId>20</referenceId>
                <referenceName>????????????????????? ???????????????????????????</referenceName>
                <reportFullPath>http://10.3.24.202:8081/ExportingReportAdmin/Reports/691766e9-44eb-4ca9-9908-1b1846327acc.pdf</reportFullPath>
                <reportName>691766e9-44eb-4ca9-9908-1b1846327acc.pdf</reportName>
                <senderId>7615</senderId>
                <senderName>???????????????????????? ??????????????????</senderName>
                <sentDate>2012-05-23 10:41:28.0</sentDate>
                <subject>prime face user guide</subject>
            </return>
            <return>
                <exportId>13</exportId>
                <readFG>N</readFG>
                <receiverId>2711</receiverId>
                <referenceId>21</referenceId>
                <referenceName>???????????????????????? ?????????????????????????????????????????????</referenceName>
                <reportFullPath>http://10.3.24.202:8081/ExportingReportAdmin/Reports/c4f4f1fd-1c67-4bad-9447-f536fd2b46db.pdf</reportFullPath>
                <reportName>c4f4f1fd-1c67-4bad-9447-f536fd2b46db.pdf</reportName>
                <senderId>7615</senderId>
                <senderName>???????????????????????? ??????????????????</senderName>
                <sentDate>2012-05-23 11:21:23.0</sentDate>
                <subject>icefaces getting start</subject>
            </return>
        </ns2:getReportResponse>
    </S:Body>
</S:Envelope> 
```

非常感谢

附言。对不起我的英语水平。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:04:59.947

您可以使用 NSURL 类编写自己的实现以连接到 Web 服务并使用 NSXML 解析接收到的响应，或者您可以查看此线程（[如何从 iPhone 访问 SOAP 服务](https://stackoverflow.com/questions/204465/how-to-access-soap-services-from-iphone)）并使用其中提到的框架之一。

# iphone - 将音频数据上传到服务器

> ID：10778601
> 
> 赞同：0
> 
> 时间：2012-05-28T01:56:56.767
> 
> 标签：iphone, objective-c, http-post, audiotoolbox

我正在尝试通过 POST 请求将音频数据从 iphone 发送到服务器。我不想使用文件，而是直接将数据发送到服务器。我使用 AudioToolbox 从麦克风获取数据到缓冲区，然后我将此缓冲区发送到服务器。数据被正确接收，服务器创建了一个波形文件……但是即使这个文件不是空的，也无法播放声音……就像文件的持续时间太短一样……

以下是发送 post 请求的回调函数的代码：

```
void AudioInputCallback(
                    void *inUserData,
                    AudioQueueRef inAQ,
                    AudioQueueBufferRef inBuffer,
                    const AudioTimeStamp *inStartTime,
                    UInt32 inNumberPacketDescriptions,
                    const AudioStreamPacketDescription *inPacketDescs) {

RecordState* recordState = (RecordState*)inUserData;    

    // setting up the URL to post to
    NSString *urlString = @"http://localhost/script/upload.php";

    // setting up the request object now
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    /*
     now lets create the body of the post
     */
    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"test.wav\"\r\n",i] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];  //NSUTF8StringEncoding

    [body appendData:[NSData dataWithBytes:inBuffer->mAudioData length:inBuffer->mAudioDataByteSize]];

    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    // setting the body of the post to the reqeust
    [request setHTTPBody:body];

    // now lets make the connection to the web
    NSHTTPURLResponse *response = nil;
    NSError * error = nil;

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    AudioQueueStop(recordState->queue, true);

    AudioQueueFreeBuffer(recordState->queue,
                         recordState->buffers[0]);

    AudioQueueDispose(recordState->queue, true);

} 
```

# python - 在 Python 中复制对象？

> ID：10778602
> 
> 赞同：3
> 
> 时间：2012-05-28T01:56:59.367
> 
> 标签：python, object, copy

我是 Python 新手，所以我尝试编写一个类来模拟 C 中的字符串函数：

```
class CString:

  def __init__(self,str):
        self.value=[]
        self.value.extend(list(str))

def strcpy(cstring1,cstring2):
      import copy
      cstring1=copy.copy(cstring2)

def puts(cstring1):
    print ''.join(cstring1.value) 
```

但 strcpy 似乎没有工作：

```
>>obj1=CString("Hello World")
>>obj2=CString("Hai World!")
>>puts(obj1)
Hello World!
>>puts(obj2)
Hai World!
>>strcpy(obj1,obj2)
>>puts(obj1)
Hello World! 
```

我是否错误地分配了 copy.copy(cstring2) ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T02:00:33.730

线

```
cstring1 = copy.copy(cstring2) 
```

只改变被调用的*局部*变量`cstring1`，它不会*改变*被调用的外部范围内的变量`obj1`。

查看[其他 stackoverflow 问题](https://stackoverflow.com/q/986006/631586)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:20:17.700

虽然不能修改中的输入参数 cstring1

```
def strcpy(cstring1,cstring2):
      import copy
      cstring1=copy.copy(cstring2) 
```

您还可以做其他事情来实现您的目标。

首先，您可以创建`strcpy`字符串类的一部分，并让该成员函数更新它自己的`str`元素。

其次，您可以提供`CString`设置和获取功能。这些函数可以直接用于将一个字符串复制到另一个字符串，也可以由执行字符串复制的成员函数使用。

Python 是一门有趣的语言。它包含许多使它看起来像 C 或 Perl 等常规命令式语言的元素，并且您可以构建许多看起来像 C 的代码。就 Python 的纯粹性而言，您将被引导不要做Python 中的事情就像你在用 C 编程一样思考。

我建议重新创建类似 strcpy 的东西最好通过解决问题来完成，而不是使用 Python。对于初学者，一个字符串可以简单地替换另一个字符串。

祝你好运。

# javascript - 什么 js 脚本获取带有计时器的外部链接将被重定向到 iFrame 中显示的出站 URL

> ID：10778603
> 
> 赞同：-1
> 
> 时间：2012-05-28T01:57:06.370
> 
> 标签：javascript, redirect, iframe, outbound, external-links

我有这 3 个文件，*文件#1*：*“Links.html”*有指向外部域 URL 的礼貌链接

```
<html>
<title>File#1 - Directory of Links of Externals Domains_URL - Links.html<title>
<body>
<div>
Visit this Web Encyclopedia to expand your knowledge:
 <a href="Free.org/good-bye.html?link=en.wikipedia.org">wikipedia</a> 
<br>
Visit the <a href=
"Free.org/good-bye.html?link=http:/www.WebMasters.StackExChange.com">
 StackExChange</a>to get right people for right answers !
</div>
</body>
</html> 
```

*文件#2*：*“good-bye.html”*是一个带有（2）两个 JavaScript的“再见页面很快回来”。. .

*脚本#1*向用户显示创建的外部 URL 链接作为单击该链接的选项，而不是延迟并等待 15 秒。超时从*script#2 重定向*。. . 到最终的*window.location externalURL OutBound Domain*

```
<html>
<title>File#2 - Open and External URL link - good-bye.html</title>
<body>
<div>Good Bye ! - ComeBack Soon !</div>

<script language="Javascript">
<!--
  var loc=document.location.toString();
  if (loc) {
    var pos=loc.indexOf('link=');
    if (pos>0) {
      document.write('Click the link to visit the External URL location! <a href="'+loc.substring(pos+5)+'" >  '+loc.substring(pos+5)+' </a> ');
    } else
      document.write('(no location defined)');
  }
// -->
</script>

<div style="display:none;">
~~ The Second Script is a timmed 15-25secs. Automated Re-direction by JS Re-Director ~~~
</div>

<script language="Javascript">   
<!--
var targetURL=" @@ What is the variable that should be HERE? instead of this TEXT has to be Replaced with VariableURL window.location.href or something I don't Know ! This is the script2 Please Help me to Insert the correct variable from script1  @@ "

var currentsecond=15; // waiting time to help visitor to decide to comeback to Free.org
function countredirect(){
if (currentsecond!=1){
currentsecond-=1
document.getElementById('timer').value=currentsecond;
}
else{
window.location=targetURL;
return
}
setTimeout("countredirect()",1000)
}

countredirect();
  }

//-->
</script>

</body>
</html> 
```

*   1 * (?)*脚本#1*中提到的*变量URL*是什么，它将“提供”*脚本#2*，现在我有一个空行。. . **变种目标网址=“”**

 ****Q#1: **var targetURL="** @@ 必须去这里的变量是什么？~~ 而不是这个 TEXT 必须替换为*VariableURL window.location.href*或我不知道的东西！这是*脚本# 2*请帮我从*脚本#1* @@ 插入正确的变量“

*   *2 * (?) 你能在File#3*的 iFrame 中插入 variableURL吗？~~ 当 15 秒的时间用完时... *File#3*，*“come-back-Top-navBar.html”*应该在 iFrame 中使用 external-Domain-URL 打开 ~~ 我想要那个*文件上的 iFrame #3*显示指向外部域、en.wikipedia.org、stackexchange.com 的外部链接，或来自*File#1*（外部 URL 目录）的任何链接。

Q#2：如果你知道要喂什么变量。填充，*脚本#2*行**var targetURL=" "**？script#1 中提到的变量是什么？我想设置一个计时器来延迟 File#3 的打开。访客将在延迟后被重定向。我的*文件#3*是一个 [div][/div] 和一个 [iFrame][/iFrame]

Q#3：你能告诉我相同的变量=External-Link-Outbound-URL 是如何插入到*File#3*的 iFrame 中的吗？. . （因此访问者将在 iFrame 中看到 External-Link-Outbound-URL）。

我需要知道修复*File#2的**Script#2*的js 代码

 *我需要知道需要在*File#3*中插入​​的*iframe 代码*

 *感谢您的耐心等待 ！！

以下是我的*File#3*，这是不完整的，因为我不知道完成 Dereferer 周期的变量（link-OutboundURL），从File#2中延迟的*File* *#1*中的单击链接开始，最终在其中显示和显示*File#3*中的 iFrame

 **```
<html>
<body>
<tile>File#3 Visit other's URL but comeback to us! comeback-Top-navBar.html</title>
<div height=20>Comeback to Free.org <a href=http://www.Free.org>click here</a></div>
<br>        
        <iframe id="external-url-iframed" width="100%" scrolling="no" 
    frameborder="0" class="external-url-iframedt_iframe" height="80%"> @@ this TEXT 
has to be Replaced with a JavaScript or variableURL-links 
~~ so the user can enjoy my recommended external domains sites under 
an small  TopnavBar Banner @@ </iframe>
        </body>
     </html> 
```

*   3 * (?) 你能告诉我其他解决方案吗？链接到论坛或教程？十分感谢 ！
*   4 * (?)从*File#1*传递到*File#3的**variableString-Windows-Location-ExternalURL*是什么？

 **我测试了... **var targetURL="** *link=* **"** 。. . 还 。. . **var targetURL="** *document.location.toString();* **"**但没有用！

到现在为止，如果这个人不想等待，并点击 = *File#2*，这将直接进入我的*File#3 ，由**script#1*调用为*http://free.org/comeback-Top-navBar.html #external-url-iframed* 但这不会显示并且永远不会到达*Destination-external-Link-OutboundURL-Domainand*

另一方面，如果来访者决定或想要等待。. . &script#2* 计时器用完，但不会无处可去！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T02:48:43.110

我想我明白你想要什么。

问题 1：在文件 #2 中，您有以下代码

```
<script language="Javascript">
<!--
  var loc=document.location.toString();
  if (loc) {
    var pos=loc.indexOf('link=');
    if (pos>0) {
      document.write('Click the link to visit the External URL location! <a href="'+loc.substring(pos+5)+'" >  '+loc.substring(pos+5)+' </a> ');
    } else
      document.write('(no location defined)');
  }
// -->
</script> 
```

我认为您需要将您`var targetURL=`的内容移至此部分。

```
<script language="Javascript">
<!--
    var targetURL = '';
    var loc = document.location.toString();
    var pos = loc.indexOf('link=');

    if (loc && pos>0) {
        targetURL = loc.substring(loc.indexOf('link=')+5);
        document.write( 
            'Click the link to visit the External URL location! ' + 
            '<a href="come-back-Top-navBar.html?link='+escape(targetURL)+'">' + targetURL + '</a>'
        );
    } else {
        document.write('(no location defined)');
    }
// -->
</script> 
```

对于第二`script`部分

```
<script language="text/javascript">   
<!--
    //targetURL already defined
    var currentsecond=15; 

    function countredirect() {
        if (currentsecond!=0) {
            currentsecond -= 1;
            document.getElementById('timer').value=currentsecond;
        } else {
            window.location=targetURL;
            return;
        }
        setTimeout("countredirect()",1000)
    }

    countredirect();
//-->
</script> 
```

对于问题 #2，在第二`script`部分，而不是做

```
window.location = targetURL; 
```

改为这样做

```
window.location = "come-back-Top-navBar.html?link=" + escape(targetURL); 
```

在你的文件 #3 中，做这样的事情

```
<html>
<head>
    <title>File#3 Visit other's URL but comeback to us! comeback-Top-navBar.html</title>
</head>
<body>
    <div height=20>Comeback to Free.org <a href=http://www.Free.org>click here</a></div>
    <br>        
    <iframe id="external-url-iframed" src="" width="100%" scrolling="no" frameborder="0" class="external-url-iframedt_iframe" height="80%">
    </iframe>

    <script language="Javascript">
    <!--
        var targetURL = '';
        var loc = document.location.toString();
        var pos = loc.indexOf('link=');

        if (loc && pos>0) {
            document.getElementById("external-url-iframed").src = targetURL;
        } else {
            alert('(no location defined)');
        }
    // -->
    </script>
</body>
</html> 
```**********

# php - Mod Auth CAS 两个登录系统

> ID：10778605
> 
> 赞同：3
> 
> 时间：2012-05-28T01:57:12.393
> 
> 标签：php, authentication, apache2, cas

我需要支持大学 CAS 认证系统。这在 Apache2 上使用 mod_auth_cas 很简单，并且运行良好。

我们现在需要将非大学用户添加到系统中。这实际上意味着我们需要支持两个登录系统。第二个登录系统是我们自己的自定义风格，它只是通过 POST 到 PHP 来验证用户。

似乎这是一个不可能设置的环境。有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:22:25.163

解决方案原来是phpCAS。

使用常规 mod_auth_cas 您将整个位置囚禁在 CAS 后面，而无法选择性地禁用它。

使用 phpCAS，您可以选择在 php 文件中执行身份验证。

我所有的 php 文件都通过 ajax POST GET 请求进行通信，因此如果未登录并导致重定向，则需要登录机制来防止访问这些文件。使用 php $_SESSION 变量，我们可以存储登录是否成功。在每次访问时，我们都可以检查 $_SESSION 变量并在将 JSON 消息推送回 javascript 客户端通知他们失败并重定向后快速退出。

当用户尝试登录时，他们可以选择 CAS 路由。使用 phpCAS 它将正确地将它们重定向到 CAS 服务器并在完成后返回到我的应用程序。如果他们选择内部登录数据库，那么他们会像任何自制登录系统一样填写一个简单的表格。在这两种情况下，$_SESSION 都会存储成功，并在访问关键 PHP 文件时检查和验证成功。

既然经过验证和检查，CAS 是否过期，我们将在此处捕获它。内部登录系统与 PHP 会话内联过期。

# asp.net - urlrewritingnet - rewrite="Domain" 不起作用

> ID：10778606
> 
> 赞同：0
> 
> 时间：2012-05-28T01:57:14.567
> 
> 标签：asp.net, url-rewriting, umbraco

我正在尝试重写 Umbraco 网站上的路径以加载子域 - 这可能吗？使用下面的配置设置，我收到异常消息：“http://subdomain.domain.com”不是有效的虚拟路径。

```
 <add name="compare"  virtualUrl="http://www.domain.com/directory/?$"
     rewrite="Domain" destinationUrl="http://subdomain.domain.com" 
   ignoreCase="true"  /> 
```

有人成功使用 rewrite="Domain" 吗？我见过的所有示例都使用redirect="Domain"。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T23:52:39.650

当我无法访问 IIS 时，我已经在几个站点上使用它来重定向到 www.domain.com。

```
 <add name="SEOfix"  virtualUrl="^http\://domain.com/(.*)"
    rewriteUrlParameter="ExcludeFromClientQueryString"
    destinationUrl="http://www.domain.com/$1"
    redirect="Domain"
    redirectMode="Permanent"
    ignoreCase="true" /> 
```

那是你想要做的吗？

# ruby-on-rails - 嵌套路由路径是否依赖于模型？

> ID：10778607
> 
> 赞同：0
> 
> 时间：2012-05-28T01:57:23.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我使用 ror 3.2 并希望在自己的文件夹中分离用于管理目的的控制器，但使用与公共控制器相同的模型。我遇到了一个问题，我将在这里解释。我以不同的方式解决了这个问题，但这更好地解释了它。

新鲜的 Rails 应用程序，我运行：

```
rails generate scaffold admin/stats name:string value:string 
```

在它创建的所有其他文件中：

```
create    app/models/admin/stat.rb 
```

一切正常：

```
localhost:3000/admin/stats/ 
```

我看到以下路线：

```
 admin_stats GET    /admin/stats(.:format)          admin/stats#index
            POST    /admin/stats(.:format)          admin/stats#create
new_admin_stat GET  /admin/stats/new(.:format)      admin/stats#new
edit_admin_stat GET /admin/stats/:id/edit(.:format) admin/stats#edit
 admin_stat GET     /admin/stats/:id(.:format)      admin/stats#show
            PUT     /admin/stats/:id(.:format)      admin/stats#update
            DELETE  /admin/stats/:id(.:format)      admin/stats#destroy 
```

这里是我的 routes.rb 文件：

```
SampleApp::Application.routes.draw do
 namespace :admin do resources :stats end
 namespace :admin do resources :users end
 root :to => 'welcome#index'
end 
```

现在让我困惑的是什么。让我们通过界面输入一个数据行。假设 stats 在 models/ 而不是 models/admin 下。我更改并移动了类，重命名了表并将控制器的索引方法更改为这个（以反映新模型）

```
def index
 @admin_stats = Stat.all #was Admin::Stat.all

 respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @admin_stats }
 end
end 
```

为什么我现在再次访问相同的 URL 时会看到这个不存在方法的错误 localhost:3000/admin/stats/ ？

```
 NoMethodError in Admin/stats#index

 Showing [...]/sample_app/app/views/admin/stats/index.html.erb where line #16 raised:
 undefined method `stat_path' for #<#<Class:0x007fe96d51a348>:0x007fe96d53a1e8>
 ...
 16:     <td><%= link_to 'Show', admin_stat %></td> 
```

我没有接触任何视图文件，该对象仍称为@admin_stats，通过“rake routes”创建的路由仍与预期相同。为什么会破？（我通过简单地拥有每个模型的管理模型来为自己找到一个解决方案，该模型简单地继承常规模型并使用 Admin::Stat 作为对象，但我仍然想了解为什么会这样）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:45:39.303

您运行的 rails scaffold 命令会生成命名空间在 admin 下的 stat 模型，即 Admin::Stat。

Rails 使用这个模型名称来生成路由名称。因此，当您将模型更改为简单的 Stat 并将其传递给 link_to 辅助方法时，

```
link_to 'Show', admin_stat 
```

admin_stat 只是变量的名称，在这里无关紧要。admin_stat 是 Stat 类的对象，因此它会查找 stat_path。

如果你想要`admin/stats`在 url 中，那么你需要将 routes.rb 修改为

```
 scope "/admin" do
      resources :stats
    end 
```

# ios - iOS : 这个需要发布吗

> ID：10778611
> 
> 赞同：0
> 
> 时间：2012-05-28T01:58:27.757
> 
> 标签：ios, release

我正在使用 Instruments 来检查我的应用程序的泄漏内存并向我展示： ![在此处输入图像描述](../Images/9ad64ededcbbd2f0db0f60fe1f7c0a73.png)

```
NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ChangeAccountCellViewController" owner:self options:nil]; 
```

我应该释放这个“笔尖”吗？先感谢您 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T02:04:01.583

Objective-C 中的内存管理如下：如果你用 、 或 来创建一个对象`alloc`，`copy`你`mutableCopy`负责`release`在适当的时候调用它。否则，您可以安全地知道它在其他地方得到了正确处理。

由于您的笔尖不是使用上述任何方法创建的，不，您不应该释放它。

# ruby-on-rails - 两次之间的Rails查询

> ID：10778624
> 
> 赞同：17
> 
> 时间：2012-05-28T02:00:19.277
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有一个带有`Checkin`模型的 Rails 应用程序。我想查找当天特定时间范围内的所有记录。我将如何编写一个`where`来获取在中午 12 点到下午 4:30 之间创建的所有记录？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-28T02:41:16.043

@x1a4 的答案应该对您有好处，但是您可以使用范围以更具可读性和更短的方式进行操作。

```
 Checkin.where(created_at: Time.parse("12pm")..Time.parse("4:30pm")) 
```

它应该生成如下内容：

```
SELECT "checkins".*
FROM "checkins" 
WHERE ("checkins"."created_at" BETWEEN '2012-05-28 12:00:00.000000' AND '2012-05-28 16:30:00.000000') 
```

您可以`Time.parse("12pm")`通过任何其他方式更改创建时间。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-28T02:11:16.753

假设 UTC 时区，这看起来会起作用：

```
Record.where('created_at > ? AND created_at < ?', Date.today + 12.hours, Date.today + 16.5.hours) 
```

或带有`BETWEEN`：

```
Record.where('created_at BETWEEN ? AND ?', Date.today + 12.hours, Date.today + 16.5.hours) 
```

`BETWEEN`可能包含或不包含范围中的第二个值。[Postgres 包含它](http://www.postgresql.org/docs/8.2/static/functions-comparison.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T12:58:20.747

您可以使用下面的 gem 来查找日期之间的记录，

这个[宝石](https://github.com/radar/by_star)很容易使用而且更清晰[按星][1]。我正在使用这个 gem，API 更清晰，文档也得到了很好的解释。

```
Post.between_times(
 Time.zone.now - 3.hours,  # all posts in last 3 hours
 Time.zone.now
) 
```

在这里你也可以通过我们的领域`Post.by_month("January", field: :updated_at)`

请查看文档并尝试一下。

# zend-framework2 - bin 文件夹中的 Zend Framework 2 “Zend Tool Missing”

> ID：10778626
> 
> 赞同：2
> 
> 时间：2012-05-28T02:00:56.170
> 
> 标签：zend-framework2, zend-tool

我是框架的新手，但我在安装 zend 1.x 版本等方面没有任何困难。但是 ZF2 无法真正弄清楚....任何资源告诉我使用 zend 工具（即 bin 目录中的 zf.bat 或 zf.sh）创建项目，但与 zf1 相比，zf2 bin 文件夹中没有它们。唯一存在的文件是

```
autloader_example.php 
autloader_examples.php 
classmap_generator.php 
createAuoloadTestClasses.php 
docbook_skeleton.php 
plugin_generator.php 
```

任何人都可以帮助我...尽快解决

谢谢。d

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-28T06:43:04.687

由于 Zend Framework 2 正在开发中，这次我们没有自动生成代码的工具，但是，您可以从以下位置下载应用程序骨架：

[https://github.com/zendframework/ZendSkeletonApplication](https://github.com/zendframework/ZendSkeletonApplication)

这是一个

> 使用 ZF2 MVC 层和模块系统的简单骨架应用程序。此应用程序旨在用作那些希望用 ZF2 弄湿自己的脚的人的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T02:37:23.763

Zend 工具组件目前正在开发中，如框架本身。

无论如何，在创建了 Gabriel 所说的骨架应用程序之后，您可以尝试使用 zftool 管理您的模块。它提供有限但有效的功能。

在此处查看 zftool： [https ://github.com/zendframework/ZFTool](https://github.com/zendframework/ZFTool)

# c++ - 为什么在 C++11 中“i = i++ + 1”的行为未定义？

> ID：10778627
> 
> 赞同：19
> 
> 时间：2012-05-28T02:01:08.620
> 
> 标签：c++, c++11

我正在阅读 C++11 标准的 n3290 草案（尽可能接近实际的标准文本），我注意到这`i = i++ + 1;`会产生未定义的行为。我以前见过类似的问题，但他们是根据旧标准（序列点）回答的。新标准引入了表达式和子表达式执行之间关系*之前/之后的排序概念。*

> 1.9 13 之前排序是由单个线程 (1.10) 执行的评估之间的不对称、传递、成对关系，这会在这些评估中产生偏序。给定任意两个评估 A 和 B，如果 A 在 B 之前排序，则 A 的执行将在 B 的执行之前。如果 A 没有在 B 之前排序并且 B 没有在 A 之前排序，那么 A 和 B 是无序的。[注意：未排序评估的执行可以重叠。—尾注] 当 A 在 B 之前排序或 B 在 A 之前排序时，评估 A 和 B 的排序不确定，但未指定哪个。[注意：不确定顺序的评估不能重叠，但可以先执行。——尾注]
> 
> 1.9 14 与完整表达式相关的每个值计算和副作用在与要评估的下一个完整表达式相关的每个值计算和副作用之前进行排序。
> 
> 1.9 15 除非另有说明，对单个运算符的操作数和单个表达式的子表达式的求值是无序的。[注意：在程序执行期间多次评估的表达式中，其子表达式的未排序和不确定排序的评估不需要在不同的评估中一致地执行。—尾注] 运算符的操作数的值计算在运算符结果的值计算之前排序。如果标量对象上的副作用相对于同一标量对象上的另一个副作用或使用同一标量对象的值的值计算是未排序的，则行为未定义。

```
[ Example:
void f(int, int);
void g(int i, int* v) {
i = v[i++]; // the behavior is undefined
i = 7, i++, i++; // i becomes 9
i = i++ + 1; // the behavior is undefined
i = i + 1; // the value of i is incremented
f(i = -1, i = -1); // the behavior is undefined
}
—end example ] 
```

我理解它的方式是这样的：

*   `operator=`有两个操作数表达式：引用`i`and `i++ + 1`，两者都没有顺序。第二个对 有副作用`i`，但在我看来第一个没有副作用或用于值计算（或者是引用“使用相同标量对象的值进行值计算”？它实际上取决于存储在 i 中的值？不这么认为），所以它不是未定义的行为；
*   `operator=`执行是在两个操作数评估之后排序的。它对 有副作用`i`，但参考两个操作数的顺序很好，因此它不是未定义的行为；
*   `i++ + 1`显然是定义的行为。

我在这里错了吗？还是由于其他原因，这条线未定义的行为？

PS。标准实际上说

> 运算符的操作数的值计算在运算符结果的值计算之前排序。

，并且在这种情况下根本没有提到副作用。然而，排序关系仅在表达式评估之间定义，并且评估=值计算+副作用。所以要么我必须假设这个草案在这里不一致，或者假设在这一行中他们意味着评估而不是价值计算。还是我在这里错了？

编辑：

我想我会在这里回答自己，但这就是我困惑的原因：

> 5 1 表达式是指定计算的一系列运算符和操作数。表达式可能会产生一个值并可能导致副作用。

所以运算符的操作数本身不是子表达式。因此，仅对整体`i = i++ + 1;`的值计算进行排序，标准中没有提及副作用排序。这就是它未定义的原因。

请注意，如果例如。`operator=`对于给定的类型被重载（所以这将是一个隐式函数调用）它不会是未定义的行为，对吧？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T05:30:56.603

这是“未定义的行为”，而不是“未指定的”。未定义表示允许机器做任何事情，包括输出空程序、随机终止或爆炸。当然，当移植到另一个平台时，一个微妙的意外值是更有可能的结果。

未定义的行为适用于两个副作用应用于同一标量而没有相对于彼此排序的任何情况。在这种情况下，副作用恰好是相同的（两者都`i`从表达式之前的原始值递增），但是按照标准的字母，它们结合起来产生了 UB。

副作用是未排序的，因为除了`,`、`?:`、`||`和之外`&&`，运算符没有按照 C++11 §5.15/2 等术语定义排序规则：

> 如果对第二个表达式求值，则与第一个表达式关联的每个值计算和副作用在与第二个表达式关联的每个值计算和副作用之前排序。

赋值运算符确实定义了一个特殊的排序规则，§5.17/1：

> 在所有情况下，赋值都在左右操作数的值计算之后和赋值表达式的值计算之前进行排序。

这无济于事`i = i ++ + 1`，因为 的副作用`i ++`不是任何值计算的一部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T02:12:00.353

在 C++03 中，两者`i = ++i + 1;`都`i = i++ + 1` 没有很好的定义。

但在 C++11 中，它`i = ++i + 1`变得定义良好。但`i=i++ + 1`仍然不是。

详细信息请查看此处的内容 [排序规则和示例不一致](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#637)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T02:05:45.007

您将价值计算与副作用的解决混淆了。虽然必须在赋值之前计算 的值，但除了完整表达式的完成之外`i++`，没有任何事情对赋值的副作用（对 的修改）进行排序。`i`

对于一个对比示例，看一下逗号运算符：“与左表达式相关的每个值计算和副作用都在与右表达式相关的每个值计算和副作用之前排序。” 请注意如何分别提到值计算和副作用。没有这样的分配规则。

# c# - 当 FolderBrowserDialog SelectedPath 是 MyComputer 时禁用 OK 按钮

> ID：10778628
> 
> 赞同：1
> 
> 时间：2012-05-28T02:01:29.180
> 
> 标签：c#, visual-studio-2010, windows-xp

在我的程序中，我需要强制用户选择保存文件夹。我通过将 SelectedPath 设置为 MyComputer 来做到这一点。

我的问题是 OK 按钮最初没有被禁用。

行为：

*   选择了“我的电脑”（浅灰色），但启用了“确定”按钮。
*   单击“我的电脑”（现在选择深蓝色阴影）仍然选择了“确定”按钮。
*   如果我选择说桌面，然后重新选择“我的电脑”，那么“确定”按钮才会被禁用。

我尝试过使用 SelectedPath 和 RootFolder，以及 Environment.SpecialFolder.MyComputer 和 Environment.GetPath() 均无济于事。

当 SelectedPath 不是有效文件夹时，如何禁用 OK 按钮？

**编辑：** 这是在 Visual Studio 2010 Professional 中开发的 Windows XP、.Net 4.0 上运行的。

**编辑#2：**添加了完整的示例代码。

```
using System;
using System.Windows.Forms;

using System;
using System.Windows.Forms;

namespace FolderBrowser
{
    public class Form1 : Form
    {
        private System.ComponentModel.IContainer components;
        private System.Windows.Forms.Button button1;

        private void InitializeComponent()
        {
            this.button1 = new System.Windows.Forms.Button();
            this.SuspendLayout();

            this.button1.Location = new System.Drawing.Point(10, 10);
            this.button1.Text = "Open FolderBrowserDialog";
            this.button1.Click += new System.EventHandler(this.SelectSaveFolderItem_Click);

            this.Controls.Add(this.button1);
            this.ResumeLayout(false);
        }

        public Form1()
        {
            InitializeComponent();
        }

        private void SelectSaveFolderItem_Click(object sender, EventArgs e)
        {
            FolderBrowserDialog fbd = new FolderBrowserDialog();
            fbd.SelectedPath = "::{20D04FE0-3AEA-1069-A2D8-08002B30309D}";
            fbd.ShowDialog();
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T02:32:16.343

参考：[MSDN：禁用文件夹浏览器对话框中的按钮](http://social.msdn.microsoft.com/Forums/pl-PL/winforms/thread/48bf0547-1e1d-446f-8d18-c395491d0d60)

在上面的 msdn 线程中，用户希望在目录不存在时禁用文件夹浏览器对话框中的接受按钮。我觉得这与您的问题有关： `How can I disable the OK button when the SelectedPath is not a valid folder?`

该线程中的解决方案是在显示对话框后使用 Timer 事件禁用 OK 按钮。我为您将 VB.Net 代码转换为 C#：

```
using Microsoft.VisualBasic;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Diagnostics;
using System.Runtime.InteropServices;
public class Form1
{
    [DllImport("user32.dll", EntryPoint = "FindWindowA", CharSet = CharSet.Ansi, SetLastError = true, ExactSpelling = true)]

    private static extern Int32 FindWindow(string lpClassName, string lpWindowName);
    [DllImport("user32.dll", EntryPoint = "FindWindowExA", CharSet = CharSet.Ansi, SetLastError = true, ExactSpelling = true)]

    private static extern Int32 FindWindowEx(Int32 hWnd1, Int32 hWnd2, string lpsz1, string lpsz2);
    [DllImport("user32.dll", CharSet = CharSet.Ansi, SetLastError = true, ExactSpelling = true)]

    private static extern Int32 EnableWindow(Int32 hwnd, Int32 fEnable);

    private void Button1_Click(System.Object sender, System.EventArgs e)
    {
        Timer1.Enabled = true;

        FolderBrowserDialog fld = new FolderBrowserDialog();

        fld.ShowDialog(this);

    }

    private void Timer1_Tick(System.Object sender, System.EventArgs e)
    {
        Int32 hwndMainWindow = default(Int32);

        hwndMainWindow = FindWindow("#32770".Trim(), Constants.vbNullString);
        // '#32770 (Dialog)#32770 (Dialog)

        if (hwndMainWindow) {
            Int32 hwndBtn = default(Int32);

            hwndBtn = FindWindowEx(hwndMainWindow, IntPtr.Zero, "Button", "OK");

            if (hwndBtn) {
                EnableWindow(hwndBtn, 0);

            }

        }

        Timer1.Enabled = false;

    }

} 
```

# objective-c - obj-C 中的可变参数函数跳过第一个参数

> ID：10778630
> 
> 赞同：4
> 
> 时间：2012-05-28T02:02:07.037
> 
> 标签：objective-c, variables, parameters, cocos2d-iphone, variadic

我在将可变数量的参数传递给函数时遇到问题：

```
-(void)addCharacterToScene:(NSString *)name withFrames:(CCSpriteFrame*)frames,... {
    va_list args;
    va_start(args, frames);
    id arg = va_arg(args,CCSpriteFrame*);
    int i=1;
    while (arg) {
        NSString *frame_name = [NSString stringWithFormat:@"%@_%i",name,i];
        NSLog(@"%@ \n%@",frame_name, arg);
        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFrame:arg name:frame_name];
        arg = va_arg(args,CCSpriteFrame*);
        i++;
    }
    va_end(args);
} 
```

问题是函数跳过了第一个参数。我对该函数的调用如下所示：

```
[self addCharacterToScene:@"wiz" withFrames:wizardFrame1,wizardFrame2,wizardFrame3,nil]; 
```

我可以在第一个位置传递一个虚拟对象并给出所需的结果，但必须有更好的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T02:09:41.217

而不是第一次这样做：

```
id arg = va_arg(args,CCSpriteFrame*); 
```

做：

```
id arg = frames; 
```

A在您在函数中指定的参数*之后*`va_list`开始。因此，如果您想处理该论点，则必须自己开始。*`va_start`*

# spring - 有序初始化是依赖注入泛化/框架的要求吗？

> ID：10778631
> 
> 赞同：2
> 
> 时间：2012-05-28T02:02:42.400
> 
> 标签：spring, scala, guice

当我从 C# 来到 Scala 时，我几乎没有使用过著名的 DI 框架，但我已经阅读了它们并且最近开始意识到 Scala 中的[蛋糕模式](http://jonasboner.com/2008/10/06/real-world-scala-dependency-injection-di/)。

但是，如链接中所述，蛋糕模式不允许我们控制组件初始化的顺序。

对我来说，这仅在初始化时组件需要彼此时才重要，这似乎有点设计缺陷:)

在哪些情况下需要有序初始化并且无法通过单独的组件上下文负责初始化来解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:44:52.260

在他的演讲“来自黑湖的面包店”中，Daniel Spiewak 展示了一些解决这个特殊问题的方法。

幻灯片-> [https://dl.dropbox.com/u/1679797/NE%20Scala/Bakery%20from%20the%20Black%20Lagoon.pdf](https://dl.dropbox.com/u/1679797/NE%20Scala/Bakery%20from%20the%20Black%20Lagoon.pdf)

视频 -> [http://www.youtube.com/watch?feature=player_embedded&v=yLbdw06tKPQ](http://www.youtube.com/watch?feature=player_embedded&v=yLbdw06tKPQ)

摘自谈话：

**您可以通过使用惰性 val**或**def**而不是 val来解决空指针异常，但代价是可能出现死锁。

# html - 为从切片构建的导航项添加背景颜色

> ID：10778632
> 
> 赞同：0
> 
> 时间：2012-05-28T02:02:45.133
> 
> 标签：html, css, navigation, background-image, slice

我正在设计一个自定义导航菜单，您可以在[这里](http://soteriabrighton.co.uk/test2/)看到它的当前状态。每个单独的导航项如下所示：

![导航项](../Images/02ed387d88cbd445d884191300ee07a4.png)

因此，基本上每个导航项目都“悬挂”在水平条上。图像的主要部分由图像的三个切片组成：

左：![在此处输入图像描述](../Images/3a0ccf774c79335a8a9f9c1e7608b01c.png) 右：![在此处输入图像描述](../Images/57f29c5250b65e876341fa86e63e8a6f.png)和中间：![在此处输入图像描述](../Images/dc365c9a9fd8505bb8afcaf3277b7355.png)

中间 DIV 的背景应用了 repeat-x，因此它会增长以适应导航项的内容，即文本。

这是我目前用于左、右和中间 DIV 的 CSS：

```
.left {
    float: left;
    width: 13px;
    background-image: url(nav/images/nav_01.png);
    background-repeat: no-repeat;
    height:46px;
    margin-left:2%;
}

.middle {
    width:auto;
    float:left;
    background-image: url(nav/images/nav_02.png);
    background-repeat: repeat-x;
    font-size:20px;
    font-family: Typewriter;
    color:#393526;
    height:46px;
    padding-left:1px;
}

.right {
    float: left;
    width: 13px;
    background-image: url(nav/images/nav_03.png);
    background-repeat: no-repeat;
    height:46px;
} 
```

到目前为止一切都很好，但是我必须弄清楚如何将连接主水平条的垂直条包含到为导航项构建的图像中，以便它始终居中。我这样做的方法是在中间 div 中包含一个 div，如下所示：

```
<li>
<div class="nav_image">
<div class="left"></div>
<div class="middle"><div class="top"></div>home</div>
<div class="right"></div>
</div>
</li> 
```

然后将负边距顶部应用于“顶部”DIV：

```
.top {
    height:27px;
    background-image: url(nav/images/top.png);
    background-repeat: no-repeat;
    background-position-x: center;
    margin-top:-24px;
} 
```

和“nav_image”DIV 的正边距顶部：

```
.nav_image {
    margin-top:27px;
} 
```

我不确定这是否是实现我正在寻找的最佳方式，但到目前为止它正在发挥作用。

我遇到的问题是为“nav_image”DIV 设置背景颜色。我想为此设置一种颜色，并在悬停时设置另一种颜色。我希望我可以为这个 DIV 添加圆角，然后为此设置一个背景颜色，以显示在背景图像后面。

目前，DIV 'nav_image' 显示宽度为 1200 像素，高度为 0 像素。我原以为它会继承三个子 DIVS 的总宽度，即左、中和右，但显然这不是正在发生的事情。所以我似乎没有一个 DIV 来应用背景颜色。

我希望这很清楚，感谢您的阅读，我很乐意就此获得任何建议。

缺口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:02:49.850

1）将这些添加到CSS：

```
ul#list-nav li {
    float:left;
    display:inline;
}

.clear {
    clear:both;
} 
```

2）`<div class="clear"></div>`在每个之后添加`<div class="right"></div>`

3) 删除`.left`'s `margin-left: 2%;`(改为添加边距`ul#list-nav li`)

现在`nav_image`应该有正确的宽度和高度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:28:37.780

嗨，我认为您应该喜欢这个，我检查您的代码，并对您的导航和徽标进行一些修改和轻松创建代码，请检查'

**CSS**

```
.header, .navi, ul, li, a, span{
    margin:0;
    padding:0;
}
    .header{
        overflow:hidden;
        z-index:5;    }

        .logo{
            position:relative;
            z-index:1;
    height:188px;
    width:100%;
        }

        .navi{
            position:absolute;
            left:40%;
            right:0;
            z-index:2;
            top:148px;
            list-style:none;
        }

        li{
            float:left;
            background:url('http://soteriabrighton.co.uk/test2/nav/images/top.png') no-repeat 10% 0;
            margin-left:2%;
        }
        .navi a{
            background:url('http://s16.postimage.org/yqxo6bq6p/navi_left.png') no-repeat left top;
            padding-left:9px;
            color:#000;
            margin-top:27px;
            text-decoration:none;
            font-size:22px;
            float:left;
                border-radius:5px 0 0 5px;
        }
        .navi a span{
            background:url('http://s17.postimage.org/ukpot5zcb/navi_right.png') no-repeat right top;
            padding-right:9px;
            float:left;
            line-height:38px;
            border-radius:0 5px 5px 0;
        }
        .navi a:hover span, .navi a:hover{
            background:green;
            color:#fff;
            border-radius:5px;
        } 
```

**HTML**

```
<div class="header">
        <img src="http://soteriabrighton.co.uk/test2/logo.png" alt="" class="logo" />
        <ul class="navi">
            <li><a href="#"><span>home</span></a></li>
            <li><a href="#"><span>news</span></a></li>
            <li><a href="#"><span>forums</span></a></li>
            <li><a href="#"><span>articles</span></a></li>
            <li><a href="#"><span>contact</span></a></li>
        </ul>
    </div> 
```

现场演示 [http://jsfiddle.net/Kj2e9/](http://jsfiddle.net/Kj2e9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T05:29:29.917

您可以简化标记很多开始。

```
<li>
    <a>
         Home
    </a>
</li> 
```

然后我会使用伪元素而不是直接的 HTML 标记来实现“侧面图像”。我没有对此进行测试，但它应该为您指明正确的方向：

`<a>`这里的主要补充是：1）在 :before 和 :after 伪上使用绝对定位和 2）向元素添加 13px 左右填充。除此之外，您的代码看起来很正确，并且 3) display: block on the`<a>`我认为对于让它正常工作可能很重要

```
li a {
    padding: 0 13px;
    width:auto;
    float:left;
    display: block;
    position: relative;
    background-image: url(nav/images/nav_02.png);
    background-repeat: repeat-x;
    font-size:20px;
    font-family: Typewriter;
    color:#393526;
    height:46px;
    padding-left:1px;
}

li a:before,
li a:after {
    content: ' ';
    width: 13px;
    height:46px;
    position: absolute;
    top: 0;
    background-repeat: no-repeat
}

li a:before {
    left: 0;
    background-image: url(nav/images/nav_03.png);
}

li a:after {
    right: 0;
    background-image: url(nav/images/nav_01.png);
} 
```

# php - FOSUserBundle - 创建新用户指定角色

> ID：10778633
> 
> 赞同：0
> 
> 时间：2012-05-28T02:02:47.633
> 
> 标签：php, symfony, fosuserbundle

想知道如何才能实现创建新用户但指定他的角色。目前，当我创建一个新用户时，程序会自动与 ROLE_ADMIN 角色相关联。

非常欢迎任何信息/代码/示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T03:39:04.070

行。我解决了我的问题。基本上我遵循[本](https://symfony.com/doc/master/bundles/FOSUserBundle/overriding_forms.html)指南，并改变了一些方面。

1.  在我的模型上，我添加了角色字段：`protected $roles = array();`
2.  更改了我的 Form/Type/RegistrationFormType.php 并放置以下控件：

代码：

```
$user = new UserAdmin();
    $builder->add('roles', 'collection', array(
        'type'   => 'choice',
        'options'  => array(
            'choices'  => array(
                'nashville' => 'Nashville',
                'paris'     => 'Paris',
                'berlin'    => 'Berlin',
                'london'    => 'London',
            ),
        ),
)); 
```

现在，当我打开我的注册视图时，它会显示一个下拉列表。在这种情况下，选项是：纳什维尔、巴黎、柏林、伦敦。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T10:14:35.480

这是我使用的代码：

```
 $admin = new User() ;
    $admin->setEmail("adminl@gmail.com") ;
    $admin->setUsername("mitke") ;
    $admin->setPlainPassword("123123123") ;
    $admin->setEnabled(true) ;
    $admin->setSuperAdmin(true) ;

    $user1 = new User() ;
    $user1->setEmail("user1@gmail.com") ;
    $user1->setUsername("user1") ;
    $user1->setPlainPassword("123123123") ;
    $user1->setEnabled(true) ;
    $user1->setRoles( array(User::ROLE_DEFAULT) ) ; 
```

也许它可以帮助你，它对我有用。

问题：您使用 /register 创建的所有用户是否都具有管理员角色？也许 FOS 决定默认情况下第一个注册用户是管理员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T09:27:21.850

James Morris 的解决方案可能会有所帮助： [http ://blog.jmoz.co.uk/symfony2-fosuserbundle-roles](http://blog.jmoz.co.uk/symfony2-fosuserbundle-roles)

更多讨论参见：[Symfony2 FOSUserBundle 角色实体](https://stackoverflow.com/questions/8388080/symfony2-fosuserbundle-role-entities)

# actionscript-3 - 使用 Flex 4 和动作脚本 3 更改相机焦点

> ID：10778636
> 
> 赞同：0
> 
> 时间：2012-05-28T02:03:09.337
> 
> 标签：actionscript-3, flex4, android-camera, autofocus

我已经使用 Flex 4 和动作脚本 3 为 android 设备开发了视频聊天应用程序。一切正常。现在的问题是相机对焦。当我使用我的安卓设备进行视频聊天时，相机广泛聚焦脸部，意味着脸部显示非常大。它只是专注于脸部的一部分。如何使用动作脚本 3 更改相机焦点。

```
 var camera : Camera=getFrontCamera();
            if (camera)
            {

                var ui      : UIComponent   = new          UIComponent();
                var localVideoDisplay   : Video     = new Video(322, 196);
                localVideoDisplay.attachCamera(camera);
                ui.addChild(localVideoDisplay);                     
                cameraGroup.addChild(ui); 
```

这是我用于相机的代码。现在我需要改变我的相机的焦点，它应该在视频显示中显示小脸。实际问题是两个人都看不清对方的脸。它只显示了大部分的脸。请给我一些解决这个问题的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:17:17.987

我知道没有直接的方法可以严格控制相机焦点，但是如果你在 Camera 对象上调用 setMode 它确实会重新进行自动对焦，我不完全清楚这是否是你正在寻找的因为但这是我唯一知道的关于通过 AS3 控制相机焦点的事情：

```
 camera.setMode(VID_SIZE, VID_SIZE, 24); 
```

还要确保在 AIR 项目的 -app.xml 文件中包含此内容

```
<uses-feature android:name="android.hardware.camera.autofocus"/> 
```

应该在这些节点内的文件底部附近：

```
<android>
    <manifestAdditions> 
```

# android - 构造函数或 setLayoutParams() 在 Android 中采用 px 还是 dip 中的两个整数？

> ID：10778641
> 
> 赞同：0
> 
> 时间：2012-05-28T02:04:25.833
> 
> 标签：android, android-layout

我一直在阅读教程，并一直试图理解一些事情，但我对这个说法有点困惑：

```
imageView.setLayoutParams(new GridView.LayoutParams(85, 85)); 
```

文档说宽度和高度（意思是两个 85），或者它在屏幕上的显示方式。但这与在 xml 文件的网格视图中执行此操作相同吗？

```
<GridView
    android:layout_height="85"
... 
```

对我来说似乎不对，这就是我问的原因。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T02:47:35.383

根据文档：

```
Parameters
width  the width, either MATCH_PARENT, WRAP_CONTENT or a fixed size in pixels 
height  the height, either MATCH_PARENT, WRAP_CONTENT or a fixed size in pixels 
weight  the weight 
```

所以，以像素为单位。

在 XML 中，您可以指定单位。

# websocket - WebSockets -- 最大帧大小

> ID：10778649
> 
> 赞同：1
> 
> 时间：2012-05-28T02:06:23.953
> 
> 标签：websocket, netty

我只是偶然发现了这封（旧）邮件：

[http://www.ietf.org/mail-archive/web/hybi/current/msg07655.html](http://www.ietf.org/mail-archive/web/hybi/current/msg07655.html)

“如果发送的帧由于某种原因服务器无法缓冲，我希望服务器关闭连接并显示错误代码 1004”。

RFC 说：

```
1004
  Reserved.  The specific meaning might be defined in the future. 
```

Netty 如何处理大消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T03:24:36.203

Netty 3.4.2 已经考虑到了这一点。

基本上，您可以选择将您提供`maxFramePayloadLength`给`WebSocketServerHandshaker`.

请参阅拉取请求[https://github.com/netty/netty/issues/283](https://github.com/netty/netty/issues/283)。

# c - #include 是否会增加 RAM 使用率？

> ID：10778657
> 
> 赞同：1
> 
> 时间：2012-05-28T02:09:18.433
> 
> 标签：c, memory, heap-memory, ram, stack-memory

如果我包含更多头文件，它会增加所需的 RAM 大小吗？`#include <stdio.h>`例如，如果我需要更多 RAM`#include <string.h>`吗？

我正在用 CNU C 编译器编写一个嵌入式系统软件，所以我想尽可能减少所需的 RAM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:17:52.163

您真正想问的问题的答案可能是“不”，至少在您谈论标准库头文件时是这样。包括它们不会对可执行文件大小或内存占用产生影响。尽管如此，我还是忍不住给出了相反的回应：

这取决于您包含的文件中的内容。系统头文件不会这样做，但理论上，该文件中可以包含任何内容。标头仅包含函数原型和类型定义只是一种约定。如果我有这两个文件：

```
// foo.c
int bigarray[1000]; 
```

和

```
// bar.c
#include "foo.c"
int main(int argc, char**argv()) {
return 0;
} 
```

这是合法代码，bar.c 可以很好地编译，但是由于 foo.c 中的数组（如果编译器没有优化它），我的内存占用可能会大 4K。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T02:11:25.620

不，包含文件用于编译器；它们根本不影响生成代码的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T02:11:38.417

不，包含文件不是函数，它们是对系统函数的引用（至少对于编译器附带的那些）。如果您想亲自查看，请导航到`include`编译器的目录并在文本编辑器中打开文件（但永远不要更改它们）。它们与`.h`您编写的任何其他内容相同；他们没有定义任何功能。

编译器将看到函数名（例如 printf）是有效的，并将其编译为目标文件。链接器负责将该名称转换为有效的系统调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T02:12:30.873

包含头文件仅在编译期间有效。它们用于告诉编译器在哪里可以找到他需要的实现。

编译后的可执行文件不包含这些信息，因此不受包含数量的影响。

这与 PHP 等解释性语言有很大的不同，其中包含文件会增加内存使用量。但即使在 PHP 中，也有最小化内存使用的机制（包括一次文件，不包括未使用的包含...）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T04:37:06.997

是的，我可能会增加二进制大小，然后增加 RAM 大小。它有两种方式： 1\. 头文件具有全局/静态变量定义 2\. 头文件具有即使它不用于当前文件的功能。但是编译器可能仍将它们保存在最终的二进制文件中。

我说“可能增加”是因为如果编译器足够聪明，我可以只包含二进制所需的数据，而丢弃其他的。</p>

对于其他内容，可能在头文件中，例如变量声明，typedef等。它们不会增加RAM，因为它只在编译时需要，而不是在运行时需要。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-28T04:35:57.777

是的，但只是略微......但它确实增加了 CPU 使用率。您可以在 Windows 任务管理器中查看它。...

# jquery - 用 jQuery 创建一个变量选择器？

> ID：10778659
> 
> 赞同：0
> 
> 时间：2012-05-28T02:09:24.210
> 
> 标签：jquery

让我澄清一下。

我有一个巨大的循环来解析 XML，相应地在谷歌地图上放置标记，并制作隐藏的 div，每个标记一个，其中包含与该标记相关的信息。

该循环还在每个标记上放置一个打开信息窗口的事件。信息窗口包含一个按钮，该按钮必须显示该特定标记的 div。

但我不确定如何做到这一点。这是下面的大部分代码——我省略了循环中不相关的早期部分，并专注于我试图将点击事件附加到每个新按钮的区域。

但我不确定如何做到这一点。请参阅代码中的注释以获得完整的理解。

```
$(xml).find('sample').each(function () {

    var id = $(this).find('id long').text();

    /*there was code here which creates the other variables you see below*/

    var infoPage = '<div style="display:none; position:absolute; top:0px; bottom:0px; width:100%;" id="' + id + 'Info">' + '<p>Number: ' + number + '</p>' + '<p>ID: ' + id + '</p>' + '<p>Rock type: ' + rockType + '</p>' + '<p>Minerals: ' + minerals + '</p>' + '<p>Regions: ' + regions + '</p>' + '<p>Latitude: ' + latitude + '</p>' + '<p>Longitude: ' + longitude + '</p>' + '</div>';

    //there was code here which inserts this div into the page

    //this line creates the button which appears inside the info window
    var contentString = '<a href="" data-role="button" id="' + id + '">' + number + '</a>';

    //this line creates the info window
    var infowindow = new google.maps.InfoWindow({
        content: contentString
    });

    /*Here is where I hit a problem. I now need to construct a line of jQuery which attaches to this particular button a click event. But it needs to do it for every new button in the loop, so that each button's click event is unique and opens its personal div. How do I construct a selector which will change with the loop to accomplish the desired result?*/
    $('#' + id).click(function () {
        $('#' + id + 'Info').show();
    });

    google.maps.event.addListener(marker, 'click', function () {
        infowindow.open(map, marker);
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:15:35.957

首先，为所有按钮赋予相同的类

```
var contentString = '<a href="" class="mybutton" data-role="button" id="' + id + '">' + number + '</a>'; 
```

其次，将事件处理程序绑定到所有`mybuttons`

```
$(document).on('click', '.mybutton', function() {
    $('#' + $(this).attr('id') + 'Info').show();
}); 
```

**UPD**：正如@Felix Kling 所说-这里重要的是您需要在循环外绑定一次

# python - 如何在 python 中为 Chrome 构建远程 Webdriver

> ID：10778665
> 
> 赞同：1
> 
> 时间：2012-05-28T02:10:41.150
> 
> 标签：python, selenium

我已经启动了集线器和 rc，如下所示：

```
java -jar selenium-server-standalone-2.21.0.jar -role hub

java -jar selenium-standalone-2.21.0.jar -role wd -hub http://localhost:4444/grid/register  -Dwebdriver.chrome.driver=path-to-chromedriver 
```

但是当我使用这样的代码时：

```
capability =webdriver.DesiredCapabilities.CHROME
driver = webdriver.Remote("http://172.16.21.13:4444/wd/hub", capability)
driver.get("http://www.google.com") 
```

它失败并且错误是：'错误转发新会话找不到：{platform = ANY，javascriptEnabled = true，browserName = chrome，version =}'

所以，谁能告诉我如何正确运行远程chome，提前谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-29T15:50:19.110

我认为这是所需功能的空版本的问题。尝试仅使用 browserName 启动： `driver = webdriver.Remote("http://172.16.21.13:4444/wd/hub", { "browserName": "chrome"})`

# php - 如何使用参数自动加载 CodeIgniter 库？

> ID：10778674
> 
> 赞同：-3
> 
> 时间：2012-05-28T02:11:34.157
> 
> 标签：php, codeigniter-2

我需要使用参数自动加载 CodeIgniter 库。如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T02:33:56.273

创建一个配置数组并将其与库的加载一起传递这是 facebook 库的示例...

```
$fb_config = array(
'appId'  => 'YOUR_APP_ID_HERE',
'secret' => 'YOUR_APP_SECRET_HERE'
 );
$this->load->library('facebook', $fb_config); 
```

在这种情况下（facebook.php）在 application/config 中创建一个配置文件 library.php

```
 <?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
 $config['appId']  = 'YOUR_APP_ID_HERE';
 $config['secret'] = 'YOUR_APP_SECRET_HERE'; 
```

将其加载到您的控制器中并相应地在您的视图中使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T02:18:31.087

大多数 CI 系统库都有“初始化”方法。将数组传递给此方法将覆盖对象属性，例如：

```
$this->load->library('email');

$params['smtp_port'] = 25;
$this->email->initialize($params); 
```

来源：[http ://bit.ly/MS1yXK](http://bit.ly/MS1yXK)

# android - facebook 应用程序如何与 iPhone/Android 应用程序集成？

> ID：10778683
> 
> 赞同：-1
> 
> 时间：2012-05-28T02:12:59.873
> 
> 标签：android, iphone, facebook

如果我用 php 制作了 Facebook 应用程序，我可以将它与 iPhone/Android 或跨平台应用程序集成，这样我就不需要构建另一个服务器/数据库和本机代码了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:15:29.643

如果您需要它与 Android 或 iOS 上的本机代码应用程序通信，您可以为您的 php 应用程序创建一个基本的 Web 服务。如果您不想编写原生代码，您应该考虑在 Facebook 上制作移动 Web 应用程序。有关入门的详细信息，请参阅[https://developers.facebook.com/docs/guides/mobile/ 。](https://developers.facebook.com/docs/guides/mobile/)

# python - 使用 Python 抓取此站点时出错

> ID：10778684
> 
> 赞同：-3
> 
> 时间：2012-05-28T02:13:04.947
> 
> 标签：python, web-scraping

我无法从[这个天气网站](http://www.timeanddate.com/weather/usa/new-york)获取一些信息。我主要是试图检索“当前状况”信息表。这是我到目前为止所拥有的，但它给了我一些错误。

```
import urllib2
from BeautifulSoup import BeautifulSoup
soup = BeautifulSoup(urllib2.urlopen('http://www.timeanddate.com/weather/usa/los-angeles').read())

for row in soup('table', {'class' : 'rpad'})[0].tbody('trtd'):
tds = row('tr')
print tds.string 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T03:52:32.257

```
#!/usr/bin/env python
import urllib2
from bs4 import BeautifulSoup
soup = BeautifulSoup(urllib2.urlopen('http://www.timeanddate.com/weather/usa/los-angeles').read())

for tr in soup.table.find_all('tr'):
    if tr('th'):
        if tr.th.string == "Current conditions":
            tds = tr('td')
            for td in tds:
                print td.string 
```

我的解决方案，运行时的输出如下所示：

```
None
Location:
Los Angeles / USC Campus Downtown
Temperature:
63 °F
Comfort Level:
63 °F
Dew point:
51 °F
Pressure:
29.94 "Hg
Humidity:
65%
Visibility:
10 mi
Wind:
No wind
Last update:
Sun 7:47 PM PDT 
```

因为我累了，所以没有花额外的时间为第一个输出添加无检查。也没有很明显的格式，但这不会太难添加到你自己。

希望对您有所帮助。

# c++ - C++ 多态风格 - 仅在子类中实现自定义方法

> ID：10778685
> 
> 赞同：0
> 
> 时间：2012-05-28T02:14:01.510
> 
> 标签：c++, polymorphism

我想知道这种多态性的实现在 C++ 中是否可取。

我有一个超类（cPolygon）和两个子类（cRectangle 和 cTriangle）。问题是在未包含在超类中的子类之一中实现方法是否被认为是一种好的形式，即。我应该只在 cRectangle 中创建 **setSomething**方法吗？如果我这样做，我是否也应该在超类 cPolygon 中创建此方法（但显然不是抽象的）？

谢谢大家皮特

```
#include <iostream>
using namespace std;

// Super class
class CPolygon {
  protected:
    int width, height;
  public:
    void set_values (int a, int b)
      { width=a; height=b; }
  };
// Sublcass Rectangle
class CRectangle: public CPolygon {
  public:
    int area ()
      { return (width * height); }
    // Method only present in rectangle.
        // Is this OK?
    void setSomething(int a) {
        _a = a;
    }
private:
    int _a;
  };

// Subclass Triangle
class CTriangle: public CPolygon {
  public:
    int area ()
      { return (width * height / 2); }
  };

int main () {
  CRectangle rect;
  CTriangle trgl;
  CPolygon * ppoly1 = &rect;
  CPolygon * ppoly2 = &trgl;
  // Is this OK?
  rect->setSomething(3);
  trgl->set_values(2,3);

  ppoly1->set_values (4,5);
  ppoly2->set_values (4,5);
  cout << rect.area() << endl;
  cout << trgl.area() << endl;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:26:46.787

It is possible and completely valid to have new methods in the subclass which are not available in the super class. But in such cases, you will not be able to call it using a base class pointer or reference, even though it points to the correct subclass object. You can however cast the pointer or reference to the subclass to call that method, but casting is the root of many bugs and should be avoided.

# tapestry - 修改 Tapestry 5 Tynamo Security 登录表单模板

> ID：10778687
> 
> 赞同：4
> 
> 时间：2012-05-28T02:14:45.743
> 
> 标签：tapestry, tynamo

如何覆盖 Apache Tynamo 模板生成的 HTML？

我目前正在转换我的页面以与tapestry-bootstrap 一起使用，登录表单看起来有点难看。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T15:45:52.153

与其尝试自定义或重用提供的表单，不如编写自己的登录页面和登录表单。

超级简单，你可以从复制这个开始：

*   [https://github.com/ascandroli/petstore/blob/master/src/main/java/org/amneris/petstore/pages/Signin.java](https://github.com/ascandroli/petstore/blob/master/src/main/java/org/amneris/petstore/pages/Signin.java)

*   [https://github.com/ascandroli/petstore/blob/master/src/main/resources/org/amneris/petstore/pages/Signin.tml](https://github.com/ascandroli/petstore/blob/master/src/main/resources/org/amneris/petstore/pages/Signin.tml)

这只是一个示例登录页面，请确保删除不需要的任何内容。

之后别忘了告诉 Tapestry-security 现在你有了自己的登录页面：

```
@Contribute(SymbolProvider.class)
@ApplicationDefaults
public static void applicationDefaults(MappedConfiguration<String, Object> configuration)
{
    // Tynamo's tapestry-security (Shiro) module configuration
    configuration.add(SecuritySymbols.LOGIN_URL, "/signin");
} 
```

就是这样。

# c++ - Xe2 中的 Indy TcpServer：与数百个 GPRS 客户端一起工作

> ID：10778689
> 
> 赞同：0
> 
> 时间：2012-05-28T02:15:07.377
> 
> 标签：c++, windows, indy, gprs, indy10

我正在使用一个在数百个 GPRS 设备中使用的应用程序，服务器与客户端连接并每 1 或 2 分钟接收一个信息包。当接收到数据包时，服务器会发送一个确认数据包。这是我的问题：

1 - Indy 服务器自动为每个连接启动一个线程？如果是这样，我该如何管理这些线程。2-如何为每个输出包创建一个线程？因为 GPRS 设备响应缓慢。

谢天谢地，保罗·塞拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T04:36:20.617

是的，Indy`TIdTCPServer`为每个客户端连接创建一个单独的线程。你不需要做任何事情来管理这种行为，它是自动的。您可以在 Indy 之外创建自己的工作线程，只需使用 VCL 的`TThread`类，或 Indy 的`TIdThread`或 TIdThreadComponent` 组件。但在这种情况下，我认为没有必要，您不需要使用额外的线程将数据包发送回设备。

# javascript - Visual Studio 11 JS 调试慢

> ID：10778693
> 
> 赞同：0
> 
> 时间：2012-05-28T02:15:44.940
> 
> 标签：javascript, windows-8, windows-runtime, visual-studio-2012

我正在使用 Microsoft Visual Studio 11 Express Beta 和适当的 Metro SDK 为 Windows 8 开发 Javascript Metro 应用程序。

我正在用 HTML5 构建一个基本游戏，并使用一些 JS 游戏物理引擎（如 Box2D 和 Chipmunk）设置了一些基本测试。我立即注意到在 Visual Studio 中调试时性能极差。各种测试应用程序似乎在调试模式下以 20 FPS 的速度运行，但在调试模式之外以大约 60 FPS 的速度运行。

其他线程中的一些建议的调试速度提示不适用于 JS Metro 应用程序，并且似乎特定于旧版本的 Visual Studio。

对 VS11 JS Metro 开发人员有什么想法吗？

# ios - 在 iOS 中点击时如何更改自定义按钮的图像？

> ID：10778694
> 
> 赞同：4
> 
> 时间：2012-05-28T02:15:52.310
> 
> 标签：ios, button

我使用带有图像的自定义按钮。在正常情况下，当我们点击按钮时，按钮的颜色已经改变。

当我点击该自定义按钮时，我想从自定义按钮更改图像。

我怎样才能改变它？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-28T02:30:45.850

假设这是一个标准的 UIButton，您可以在初始化按钮时执行以下操作：

```
[btnObj setImage:[UIImage imageNamed:@"imgName.png"] forState:UIControlStateHighlighted]; 
```

或背景图像：

```
[btnObj setBackgroundImage:[UIImage imageNamed:@"imgName.png"] forState:UIControlStateHighlighted]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T02:35:13.653

首先创建一个按钮作为视图控制器的成员变量。让我们称之为`UIButton* myButton`。

然后像这样初始化按钮，并将其图像设置为您希望它最初显示的图像：

```
myButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
[myButton setImage:[UIImage imageNamed:@"OriginalImage"] forState:UIControlStateNormal];
[myButton addTarget:self action:@selector(onClickMyButton) forControlEvents:UIControlEventTouchUpInside]; 
```

那里的第三行将使它在单击按钮时调用函数“onClickMyButton”。那么你编写这个函数，它将图像更改为“NewImage”：

```
-(void) onClickMyButton
{
   [myButton setImage:[UIImage imageNamed:@"NewImage"] forState:UIControlStateNormal];
} 
```

瞧！问题解决了 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T02:31:09.493

您可以使用以下两种方法 – setBackgroundImage:forState: – setImage:forState: 检查[UIButton](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-09T11:51:37.423

首先在情节提要中使用“btYesAction”和“btNoAction”为按钮创建对象。

现在转到 viewcontroller.m 并粘贴以下代码

```
 <pre>
(IBAction)btYesAction:(id)sender {
UIButton *button = (UIButton *)sender;
button.selected = !button.selected;

[button setImage:[UIImage imageNamed:@"NO1.png"]
        forState:UIControlStateSelected]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-29T07:27:18.073

我是这样做的：

某处，在我的情况下 ViewDidLoad 。. .

```
 if(![[NSUserDefaults standardUserDefaults]boolForKey:@"volume_control"]){

        [btnVolume setImage:[UIImage imageWithIcon:@"fa-volume-up" backgroundColor:[UIColor clearColor] iconColor:clrPureBlueTint andSize:CGSizeMake(32, 32)] forState:UIControlStateNormal];
    }else{
        [btnVolume setImage:[UIImage imageWithIcon:@"fa-volume-off" backgroundColor:[UIColor clearColor] iconColor:[UIColor whiteColor] andSize:CGSizeMake(32, 32)] forState:UIControlStateNormal];
    } 
```

然后点击事件

```
- (void)btnVolumeClicked : (UIButton *)sender{

if ([[NSUserDefaults standardUserDefaults]boolForKey:@"volume_control"]) {

    [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"volume_control"];
    [[NSUserDefaults standardUserDefaults] synchronize];

}else{

    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"volume_control"];
    [[NSUserDefaults standardUserDefaults] synchronize];
}

[self selectedState];} 
```

在 SelectedState 方法中：

```
-(void) selectedState{

if(![[NSUserDefaults standardUserDefaults]boolForKey:@"volume_control"]){

    [btnVolume setImage:[UIImage imageWithIcon:@"fa-volume-up" backgroundColor:[UIColor clearColor] iconColor:clrPureBlueTint andSize:CGSizeMake(32, 32)] forState:UIControlStateNormal];

}else{
    [btnVolume setImage:[UIImage imageWithIcon:@"fa-volume-off" backgroundColor:[UIColor clearColor] iconColor:[UIColor whiteColor] andSize:CGSizeMake(32, 32)] forState:UIControlStateNormal];
}} 
```

我正在使用 Font Awesome ，但您可以像这样简单地设置按钮图像

```
[btnVolume setImage:[UIImage imageNamed:@"NO1.png"]
    forState:UIControlStateSelected]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-16T13:47:42.540

[Jose Rafael Santiago Jr.](https://stackoverflow.com/a/10778766/5327882)在**Swift 3**中的回答：

```
yourButton.setImage(UIImage(named: "imgName"), for: .normal) 
```

或背景图片：

```
yourButton.setBackgroundImage(UIImage(named: "imgName"), for: .normal) 
```

# python - 循环python“if”语句

> ID：10778696
> 
> 赞同：-1
> 
> 时间：2012-05-28T02:16:38.737
> 
> 标签：python, loops, if-statement, python-3.x

我正在构建一种问题序列，作为 Python 3.2 中程序的一部分。基本上，我会问一个问题并等待两种可能性之间的答案。如果给定的答案不是两个选项的一部分，我会打印一行并想重新提出问题，直到给出正确的输入，然后继续下一个问题并重复相同的顺序。

这是一段代码，也许可以更好地解释我自己：

```
colour = input("black or white?")
if colour in ["black", "white"]:
    print("Thank you")
else:
    print("Please choose one or the other") 
```

所以换句话说，如果给定的答案不是黑色或白色，我想打印“请选择一个或另一个”，然后重新提出问题，只要没有给出黑色或白色。一旦给出黑色或白色，我希望它脱离 if 语句，以便我可以以同样的方式提出另一个问题。

我已经搜索了如何做到这一点，但没有发现任何有用的东西。我猜是一个while循环，但是当我尝试它时，它只会无限吐出我的最后一个打印字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T02:22:06.427

```
while True:
  colour = input("black or white? ")
  if colour in ("black", "white"):
    print("Thank you")
    break
  else:
    print("Please choose one or the other") 
```

保留大部分代码，将其包装在无限循环中，并在输入是您要查找的内容时将其中断。

请注意，成员资格测试使用 a`tuple`而不是 a，`list`因为选择不会改变，即是不可变的并`in ("black", "white")`使其明确。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T02:18:57.257

```
colour = None
while not colour in ["black", "white"]:
    colour = input("black or white?")

print("Thank you") 
```

或者如果你想变得花哨

```
colour = input("black or white?")
while not colour in ["black", "white"]:
    print("Please choose one or the other")
    colour = input("black or white?")

print("Thank you") 
```

# grid - 在文本流出容器之前引导网格未调整

> ID：10778699
> 
> 赞同：0
> 
> 时间：2012-05-28T02:17:42.153
> 
> 标签：grid, twitter-bootstrap

我在 CSS 上不是那么先进，所以我想在报告这个问题之前先问问别人。

我正在使用最新的 (v2.0.3) bootstrap Hero 示例来展示这个问题。当我创建一个大于大约 1/2 列大小的文本的 single_long_word 时（由于大字体或单个单词中有大量字符），在布局调整之前允许文本超出其列我重新调整浏览器窗口的大小以使其更小。

我所要做的就是更改列中的文本以制作一个大字或长字，然后减小浏览器的窗口大小。它最终会重新布局列以允许更大的宽度，但不是在长字超过它所在列的边界之前。

对于具有响应式网格的普通容器和流体容器，都会发生这种情况。

只需转到此页面并在检查列元素后编辑文本即可在 Chrome 中轻松复制。

[http://twitter.github.com/bootstrap/examples/hero.html](http://twitter.github.com/bootstrap/examples/hero.html)

我无法发布图片，因为我对 stackoverflow 太陌生

# android - android服务实现可运行？

> ID：10778701
> 
> 赞同：0
> 
> 时间：2012-05-28T02:17:53.630
> 
> 标签：android, service

最近，我看到一个类，说是 A 类，它“扩展了 Service 实现了 Runnable”。

这是否意味着我可以创建很多 A 服务？此外，我真的很想知道

如果我创建 10 个 A 服务，每个 A 服务将使用 10 MB 内存，而 android 限制内存为 50 MB，我会内存不足导致程序崩溃吗？

# jquery - 合并两个 jQuery AJAX 脚本

> ID：10778703
> 
> 赞同：1
> 
> 时间：2012-05-28T02:18:05.353
> 
> 标签：jquery

我不知道这是否可能，因为我对 JSON 和 jQuery 很陌生。这是我的两个脚本：

```
$.getJSON('http://shop.com/test/?format=json', function(data){
  $.each(data.textpage, function(index, text){
    $('<div></div>').html('' + text + '').appendTo('.verzendkosten');
  });
}); 
```

和

```
$.getJSON('http://shop.com/vraag/?format=json', function(data){
  $.each(data.textpage, function(index, text){
    $('<div></div>').html('' + text + '').appendTo('.eigenschappen');
  });
}); 
```

有没有可能将这两者结合起来？两个脚本都有效，但我很好奇如何或是否可以组合这些脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:23:50.340

不知道你说的组合是什么意思。我假设您想摆脱两个片段中的重复代码。

将其包装成一个通用的可重用函数，并将页面名称和类名称作为参数传递

```
function DoSomethingGreat(page,targetClass)
{
   $.getJSON('http://shop.com/'+page+'/?format=json', function(data){
     $.each(data.textpage, function(index, text){
       $('<div></div>').html('' + text + '').appendTo(targetClass);
     });
   });
} 
```

并称它为

```
DoSomethingGreat('test','.verzendkosten') 
```

和

```
DoSomethingGreat('vraag','.eigenschappen') 
```

在适用的地方

**编辑：**根据评论，

如果您想在某些页面加载时执行这些，请使用 jQuery dom[就绪](http://api.jquery.com/ready/)功能。

把它放在你想调用它的页面中

```
$(function(){
   DoSomethingGreat('vraag','.eigenschappen')
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T02:23:08.530

看看[http://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

您将能够使用他们的示例来实现这一点，例如：

```
$.when(
    $.getJSON('http://shop.com/test/?format=json'),
    $.getJSON('http://shop.com/vraag/?format=json')
).then(function () {
    // Do stuff with data
}); 
```

使用 .then() 定义的函数将在两个 getJSON 调用完成后执行。

这是假设您想要“组合”从两者返回的数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T02:23:21.073

如果您的服务器可以将两个响应合并为一个，那么可以。否则，您将需要`Deferred`在 jQuery 中使用该功能。

响应可能是这样的：

```
{"data": {
    "kosten": "whatever you would have returned from /test/",
    "eigenschappen": "whatever you would have returned from /vraag/"
}} 
```

然后您的 JavaScript 可以访问这些：

```
$.each(data.kosten.textpage, ...)

$.each(data.eigenschappen.textpage, ...) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T02:23:57.907

好的，可以通过多种不同的方式组合脚本。最简单的解决方案是使请求 url 的可变部分在脚本中真正可变。

但是，它确实取决于您要寻找的结果。

# java - Java：使用变量指定数组长度的编码？

> ID：10778707
> 
> 赞同：0
> 
> 时间：2012-05-28T02:18:43.303
> 
> 标签：java, arrays

我正在开发一个学生分数应用程序，它接受一个或多个学生的姓氏、名字和分数，并将结果存储在一个数组中。然后它按姓氏的字母顺序打印学生和他们的分数。我们不知道有多少学生，但会少于 100 人。

我们必须在学生信息的末尾显示班级平均分，并在每个成绩低于班级平均分 10 分以上的学生之后显示一条消息。

我的第一个问题是我创建了一个 do/while 循环来询问用户是否想输入另一个，但它不起作用！？！？

其次，我不知道如何在个别学生身上显示“低于 10 分”的信息。

```
public class Student implements Comparable
{
    String firstName;
    String lastName;
    int score; 

    //stores last name, first name and score for each student
    public Student(String lastName,String firstName,int score)
    {
        this.lastName = lastName;
        this.firstName = firstName;
        this.score = score;    
    }
    //implement the comparable interface so students can be sorted by name
    public int compareTo(Object o)
    {
        Student otherStudent = (Student)o;

        if(otherStudent.lastName.equals(lastName))
            {
            return firstName.compareToIgnoreCase(otherStudent.firstName);
            }
        else
            {
            return lastName.compareToIgnoreCase(otherStudent.lastName);
            }
    }
    public String toString()
    {
        return lastName + ", " + firstName + ": " + score; 
    }
}

import java.util.Scanner;
import java.util.Arrays;

public class StudentApp
{
    static Scanner sc = new Scanner(System.in);

    public static void main(String [] args)
    {
        Student [] studentArray;
        String lastName;
        String firstName;
        int score = 0;
        double average = 0;

        System.out.println("Welcome to the Student Scores Application.");
        System.out.println();

        do{

            //code that uses variable to specify the array length
        int nStudent = 100;  //array size not set unit run time
        studentArray = new Student[nStudent];

            for (int i=0; i<nStudent; i++)
            {
            System.out.println();

            lastName = Validator.getRequiredString(sc, 
                           "Student " + (i+1) +  " last name: ");
            firstName = Validator.getRequiredString(sc, 
                           "Student " +  " first name: ");               
            score = Validator.getInt(sc, 
                         "Student " + " score: ",
                        -1, 101);

            studentArray[i] = new Student(lastName, firstName, score);

            double sum = 0.0;
            sum += score;
            average = sum/nStudent;
            }
        }while (getAnotherStudent());

        Arrays.sort(studentArray);

        System.out.println();

        for (Student aStudent: studentArray)
        {
            System.out.println(aStudent);
            if (score<= (average-10))
            {
                System.out.println ("Score 10 points under average");
            }
        }
        System.out.println("Student Average:" +average);
    }
    public static boolean getAnotherStudent()
    {
        System.out.print("Another student? (y/n): " );
        String choice = sc.next();
        if (choice.equalsIgnoreCase("Y"))
            return true;
        else
            return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T03:06:17.397

这里有*几个*问题：

*   每次通过 do...while 时，您都会重新实例化`studentArray`并且`sum`. 这意味着当`getAnotherStudent()`为真时，您之前迭代的所有数据都将被核对 - 您只想实例化数组并求和*一次*。
*   如果你有超过 100 名学生，你不会停下来。`nStudent`您的循环中也需要一个结束条件。
*   您应该进行一些调整，`getAnotherStudent()`以便您可以阻止数据，并在输入有效数据时等待 - 通过使用循环：

    ```
     public static boolean getAnotherStudent() {
         Scanner sc = new Scanner(System.in);
         System.out.print("Another student? (y/n): " );
         if (sc.hasNext()) {  
             String choice = sc.next();
             // blocks here - ignores all input that isn't "y" or "n"
             while(!((choice.equalsIgnoreCase("Y") || choice.equalsIgnoreCase("N")))) {
                 if (choice.equalsIgnoreCase("Y")) {
                     return true;
                 }
                 System.out.print("Another student? (y/n): " );
                 choice = sc.next();
             }
          }
          return false; // obligatory 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T02:53:01.413

您的代码很接近，只有几个问题。你的 do while 循环不起作用的原因是你里面有一个 for 循环。这意味着您将询问 100 名学生，然后再询问他们是否要添加另一名学生。您的总和正在此循环中创建，因此每次都会重置。

最后，您不知道将添加多少学生，但您的代码假定将有 100 个学生。这意味着您不能使用 for each 循环来遍历数组，因为有些可能为空。只需使用常规 for 循环直到您添加的学生的最后一个索引。以下是更改：

```
 Student[] student = new Student[nStudent]; 
    int studentCount = 0; //declear the counter outside the loop
    double sum = 0.0; //declear the sum outside the loop
    do {
        System.out.println();
        lastName = Validator.getRequiredString(sc, 
                       "Student " + (i+1) +  " last name: ");
        firstName = Validator.getRequiredString(sc, 
                       "Student " +  " first name: ");          
        score = Validator.getInt(sc, 
                     "Student " + " score: ",
                    -1, 101);

        student[studentCount] = new Student(lastName, firstName, score); 

        sum += score; //increase the sum

        studentCount++; //increment the counter

    } while (studentCount < nStudent && getAnotherStudent()); //stop if the user says 'n' or we hit the maximum ammount
    average = sum / studentCount; //work out the average outside the loop

    System.out.println();

    for (int i= 0; i< studentCount; i++ ) {
        System.out.println(aStudent);
        if (score <= (average - 10)) {
            System.out.println("Score 10 points under average");
        }
    }
    System.out.println("Student Average:" + average);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T02:47:58.193

您的*getAnotherStudent()*方法应为：

```
System.out.print("Another student? (y/n): " );
if (sc.hasNext()) {   // blocks until user entered something     
    String choice = sc.next();
            if (choice.equalsIgnoreCase("Y"))
                return true;
            else
                return false;
} else {
    // won't come here
    return false;
} 
```

# jquery - 将元素拉伸到填充的流体父级的全宽

> ID：10778711
> 
> 赞同：0
> 
> 时间：2012-05-28T02:19:55.320
> 
> 标签：jquery, html, css, padding, fluid-layout

我不能很好地解释这个，所以我做了一个图表。耶！

[![甜蜜的图表兄弟](../Images/e3d1b8aa8da436a1f0f4e7de71068035.png)](https://i.stack.imgur.com/jR9IR.png)

我有一个宽度为 95% 且填充为 30px 的父级。此部分内 99% 的元素将始终为 100% 宽度，在填充范围内冷却。

但。我有一个替代用例，其中将在该部分的顶部弹出一个警报，这需要在整个页面上延伸整个方式。

我可以制作一个可以容纳大部分内容的内部容器，但如果没有什么乱七八糟的方法可以让成功横幅的宽度为 100% + 填充然后偏移它（我知道我可以定位：相对） ，那么这似乎是最好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T02:49:19.100

而不是`width: 100%`，尝试`display: block`和`margin: 0 -30px;`示例： http: [//jsfiddle.net/tx6av/1/](http://jsfiddle.net/tx6av/1/)（对错误的 ID 感到抱歉）

# java - 为什么我的 JTable 接管了我的另一个 JComponent

> ID：10778716
> 
> 赞同：2
> 
> 时间：2012-05-28T02:20:26.630
> 
> 标签：java, swing, layout, jcomponent, panels

我一直在尝试解决这个问题，我已经检查了文档（如果您注意到表格代码来自那里），我只是无法弄清楚。我使用了错误的容器还是需要对其进行尺寸标注？如果是这样，怎么做？

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Invest extends JFrame {

    public static void main(String[] args) {
        demolayout frame = new demolayout();
        frame.setTitle("Financial Calculator");

        JPanel toppanel = new JPanel(new GridLayout(3, 3, 2, 2));
        frame.add(toppanel, BorderLayout.NORTH);

        String[] columnNames = {"Entry", "Year", "Year", "Year", "Year"};

        Object[][] data = {{"Period Ending:", "2011", "Snowboarding", new Integer(5), new Boolean(false)},
            {"Values in Millions of $", "12-31", "Rowing", new Integer(3), new Boolean(true)},
            {"Revenue:", "46,542", "Knitting", new Integer(2), new Boolean(false)},
            {"Revenue Other:", "-", "Speed reading", new Integer(20), new Boolean(true)},
            {"Total Revenue:", "46,542", "Speed reading", new Integer(20), new Boolean(true)},
            {"Cost of Revenue:", "18,216", "Speed reading", new Integer(20), new Boolean(true)},
            {"Gross Profit:", "28,326", "Speed reading", new Integer(20), new Boolean(true)},
            {"Selling Gen. Admin Expenses:", "12,111", "Speed reading", new Integer(20), new Boolean(true)},
            {"Research & Development:", "-", "Speed reading", new Integer(20), new Boolean(true)},
            {"Depreciation/Amortization:", "-", "Speed reading", new Integer(20), new Boolean(true)},
            {"Total Operating Expense:", "154", "Speed reading", new Integer(20), new Boolean(true)},
            {"Operating Income:", "35,810", "Speed reading", new Integer(20), new Boolean(true)},
            {"Interest Income (Exp.), Net NonOp:", "10,732", "Speed reading", new Integer(20), new Boolean(true)},
            {"Interest/Invest Inc. Non-Operating:", "White", "Speed reading", new Integer(20), new Boolean(true)},
            {"Interest Inc. Net Non-Operating:", "White", "Speed reading", new Integer(20), new Boolean(true)},
            {"Gain/Loss on Sale of Assets:", "White", "Speed reading", new Integer(20), new Boolean(true)},
            {"Other, Net:", "White", "Speed reading", new Integer(20), new Boolean(true)},
            {"Net Income Before Taxes:", "White", "Speed reading", new Integer(20), new Boolean(true)},
            {"Income Tax - Total:", "White", "Speed reading", new Integer(20), new Boolean(true)},
            {"Minority Interest:", "Brown", "Pool", new Integer(10), new Boolean(false)},
            {"Equity In Affiliates:", "Brown", "Pool", new Integer(10), new Boolean(false)},
            {"Accounting Change:", "Brown", "Pool", new Integer(10), new Boolean(false)},
            {"Discontinued Operations:", "Brown", "Pool", new Integer(10), new Boolean(false)},
            {"Extraordinary Items:", "Brown", "Pool", new Integer(10), new Boolean(false)},
            {"Net Income:", "Brown", "Pool", new Integer(10), new Boolean(false)}};

        JTable table = new JTable(data, columnNames);
        JScrollPane scrollPane = new JScrollPane(table);
        toppanel.add(scrollPane);

        JPanel bottompanel = new JPanel(new FlowLayout());
        bottompanel.setBackground(new Color(150, 150, 150));

        JButton compute = new JButton("Compute Ratios");
        bottompanel.add(compute);
        frame.add(bottompanel, BorderLayout.SOUTH);

        frame.setSize(800, 500);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

![在此处输入图像描述](../Images/7a286cb5c134eec48afa3a44faf55cef.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T03:03:21.020

添加到框架中看起来不错`BorderLayout.CENTER`。

此外，如果存在现有的原始方法或工厂方法，请不要创建新对象。

附录：*工厂方法是什么意思？*

好问题; `Integer. valueOf()`是典型的[*静态工厂*](http://en.wikipedia.org/wiki/Factory_method_pattern)方法。正如 API 中所指出的和 Joshua Bloch 的[*第 1 项中所讨论的那样：考虑静态工厂方法而不是构造函数*](http://www.drdobbs.com/jvm/208403883)，该方法缓存经常请求的值。

![桌子](../Images/7e606a2c2105568aed5eeed955b1f373.png)

```
import java.awt.*;
import javax.swing.*;

public class Invest extends JFrame {

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setTitle("Financial Calculator");

        JPanel toppanel = new JPanel(new GridLayout(3, 3, 2, 2));
        frame.add(toppanel, BorderLayout.NORTH);

        String[] columnNames = {"Entry", "Year", "Year", "Year", "Year"};

        Object[][] data = {{"Period Ending:", "2011", "Snowboarding", Integer.valueOf(5), false},
            {"Values in Millions of $", "12-31", "Rowing", Integer.valueOf(3), true},
            {"Revenue:", "46,542", "Knitting", Integer.valueOf(2), false},
            {"Revenue Other:", "-", "Speed reading", Integer.valueOf(20), true},
            {"Total Revenue:", "46,542", "Speed reading", Integer.valueOf(20), true},
            {"Cost of Revenue:", "18,216", "Speed reading", Integer.valueOf(20), true},
            {"Gross Profit:", "28,326", "Speed reading", Integer.valueOf(20), true},
            {"Selling Gen. Admin Expenses:", "12,111", "Speed reading", Integer.valueOf(20), true},
            {"Research & Development:", "-", "Speed reading", Integer.valueOf(20), true},
            {"Depreciation/Amortization:", "-", "Speed reading", Integer.valueOf(20), true},
            {"Total Operating Expense:", "154", "Speed reading", Integer.valueOf(20), true},
            {"Operating Income:", "35,810", "Speed reading", Integer.valueOf(20), true},
            {"Interest Income (Exp.), Net NonOp:", "10,732", "Speed reading", Integer.valueOf(20), true},
            {"Interest/Invest Inc. Non-Operating:", "White", "Speed reading", Integer.valueOf(20), true},
            {"Interest Inc. Net Non-Operating:", "White", "Speed reading", Integer.valueOf(20), true},
            {"Gain/Loss on Sale of Assets:", "White", "Speed reading", Integer.valueOf(20), true},
            {"Other, Net:", "White", "Speed reading", Integer.valueOf(20), true},
            {"Net Income Before Taxes:", "White", "Speed reading", Integer.valueOf(20), true},
            {"Income Tax - Total:", "White", "Speed reading", Integer.valueOf(20), true},
            {"Minority Interest:", "Brown", "Pool", Integer.valueOf(10), false},
            {"Equity In Affiliates:", "Brown", "Pool", Integer.valueOf(10), false},
            {"Accounting Change:", "Brown", "Pool", Integer.valueOf(10), false},
            {"Discontinued Operations:", "Brown", "Pool", Integer.valueOf(10), false},
            {"Extraordinary Items:", "Brown", "Pool", Integer.valueOf(10), false},
            {"Net Income:", "Brown", "Pool", Integer.valueOf(10), false}};

        JTable table = new JTable(data, columnNames);
        JScrollPane scrollPane = new JScrollPane(table);
        frame.add(scrollPane, BorderLayout.CENTER);

        JPanel bottompanel = new JPanel(new FlowLayout());
        bottompanel.setBackground(new Color(150, 150, 150));

        JButton compute = new JButton("Compute Ratios");
        bottompanel.add(compute);
        frame.add(bottompanel, BorderLayout.SOUTH);

        frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

# javascript - Canvas：在绘制圆的动画时，如何避免线段之间的间隙？

> ID：10778721
> 
> 赞同：2
> 
> 时间：2012-05-28T02:21:19.183
> 
> 标签：javascript, html, canvas, html5-canvas

我正在尝试为绘制的圆圈制作动画 - 这是我正在做的简化版本：

[http://jsfiddle.net/DQz37/1/](http://jsfiddle.net/DQz37/1/)

问题是：我在每个线段之间都有轻微的线条/失真。像这样：

![段之间的间隙](../Images/7586528695d7405889979765af070ff8.png)

我正在处理的限制是：

*   我需要在同一个画布上渲染多个圆圈，有时圆圈重叠
*   我需要使用透明度/ rgba 着色来渲染圆圈
*   我需要对圆圈的渲染进行动画处理（所以它们看起来像是被绘制的）

这是一个常见问题吗？你如何处理这种事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T02:37:56.133

解决此问题的一种简单方法是始终绘制一条路径，这样您就可以保证它们连接良好。

因此，不是从 A 到 B，然后 B 到 C，然后 C 到 D，而是从 A 到 B，*清除画布*，从 A 到 C，清除画布，从 A 到 D 等。

下面以修改后的代码位为例：

[http://jsfiddle.net/ZV7rv/](http://jsfiddle.net/ZV7rv/)

* * *

**编辑：**作为对评论的回应，这是如何在使用画布缓冲区保持与之前画布相同的状态时实现相同的目标：

[http://jsfiddle.net/7vVBC/](http://jsfiddle.net/7vVBC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:37:50.587

基本上，您想组合两条路径并将它们完美地连接起来，没有任何接缝，但这不会起作用，或者如果您真的很幸运并且它可以在一个浏览器中运行，那么它可能无法在另一个浏览器中运行。这是因为抗锯齿算法的实现并不完全相同，甚至可能是硬件加速并传递给显卡。

提示：[不能禁用 antialiasing](https://stackoverflow.com/questions/195262/can-i-turn-off-antialiasing-on-an-html-canvas-element)。

作为一名程序员，你不断地遇到各种不容易做或不方便的问题，这时你需要退后一步，重新评估你的选择。这是其中之一。

在您指定的约束中，您唯一的选择是重绘每一帧上的所有内容，或者不使用 alpha，并稍微重叠段以确保由于抗锯齿而没有空格。

# google-apps - 如果我不向谷歌市场提交申请怎么办？

> ID：10778725
> 
> 赞同：0
> 
> 时间：2012-05-28T02:21:56.173
> 
> 标签：google-apps, google-apps-marketplace

通过阅读谷歌市场应用程序的注册和开发流程，我想到了一个有趣的想法：在完成我的应用程序（基于Web应用程序）的测试（不断安装和测试）后，我可以避免提交（从不点击） “提交批准”）应用程序到谷歌市场，以便我可以私下使用它（可能是长期或永远）？有人试过这种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:27:24.927

您不必从市场安装或发布您的应用程序。您可以[旁加载](http://www.androidcentral.com/what-sideloading-android-z)您的应用程序，并根据需要使用它。您甚至可以将其提交到[另一个市场](http://danatheteacher.hubpages.com/hub/Top-Android-Market-Alternative-App-Stores)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:08:21.993

是的，您可以避免提交（这是在“更多”菜单上拥有内部应用程序的“旧方式”）。

如果您想为自己的 Google Apps 域添加功能，现在有一种更好的新方法。它称为[Google Apps Extensions Console](https://developers.google.com/google-apps/extensions-console/)，它使您能够与域中的其他开发人员共享所有权等。一探究竟。

# sql-server - 重命名表导致不同的查询计划

> ID：10778726
> 
> 赞同：0
> 
> 时间：2012-05-28T02:21:59.827
> 
> 标签：sql-server, tsql, sql-execution-plan

可能需要更多信息，但这真的很奇怪。使用 SQL 2005，我正在两个表上执行内部联接。如果我重命名其中一个表（使用 Alter Table），生成的查询计划会明显更长。表上有视图，但 Inner Join 使用的是基表，而不是任何视图。这有意义吗？这是可以预料的吗？

# php - 解析 HTML 文件并将值作为 php 变量返回

> ID：10778729
> 
> 赞同：1
> 
> 时间：2012-05-28T02:22:51.387
> 
> 标签：php, javascript, html, ajax

我有来自我公司网站的这个 HTML 代码。由于我无权访问数据库，因此我想通过 HTML 文件解析并返回值。代码是这样的：

```
<?php
$string = '
<p> <b>HEADER INFO</b>
<table width=100% cellspacing=0>
  <tr align=left>
    <td width=2% colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">&nbsp;&nbsp;</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>View Object:</b> 6600422</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>BPO:</b> G37147359-000000</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Ack Date:</b> 2012-05-28</font></td>
  </tr>
  <tr align=left>
    <td width=2% colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">&nbsp;&nbsp;</font></td>
    <td valign=top colspan=3><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Operation(s):</b> PPS_Queue, PPS_Build, PPS_BoxAll, JPN_End</font></td>
  </tr>
</table>
</p>
<hr>
<p> <b>EXTERNAL ORDER NUMBER REFERENCE</b>
<table width=100% cellspacing=0>
  <tr align=left>
    <td width=2% colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">&nbsp;&nbsp;</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>SAP Sales Order Number</b></font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Customer P.O. Number</b></font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Legacy Order Number</b></font></td>
  </tr>
  <tr align=left>
    <td width=2% colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">&nbsp;&nbsp;</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">0310363858</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">77340892008-120413</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">89FF09378001</font></td>
  </tr>
</table>
</p>
<hr>
<p> <b>PRODUCTS FOR THIS WORK OBJECT/OPERATION(S)</b>
<table width=100% cellspacing=0>
  <tr align=left>
    <td width=2% colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">&nbsp;&nbsp;</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>PL</b></font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Product #</b></font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Qty</b></font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Options</b></font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Serial #</b></font></td>
  </tr>
  <tr align=left>
    <td width=2% colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">&nbsp;&nbsp;</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">3C</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">AP703B</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">1</font></td>
    <td valign=top colspan=1>&nbsp </td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">2S6219000G</font></td>
  </tr>
</table>
</p>
<hr>
<p> <b>Station Info</b>
<table width=100% cellspacing=0>
  <tr align=left>
    <td width=2% colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">&nbsp;&nbsp;</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Start Station:</b> JPN_End</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Location:</b> Done</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Station:</b> </font></td>
  </tr>
  <tr align=left>
    <td width=2% colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">&nbsp;&nbsp;</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Birth Date/Time:</b> 2012-05-23 14:20:32 SGT</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Power Cord:</b></font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Voltage:</b></font></td>
  </tr>
</table>
</p>
<hr>
<p> <b>MATERIAL LIST FOR THIS WORK OBJECT/OPERATION(S)</b>
<table width=100% cellspacing=0>
  <tr align=left>
    <td width=2% colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">&nbsp;&nbsp;</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Part Number</b></font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Qty</b></font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Description</b></font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>BB Type</b></font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Material Location</b></font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\"><b>Serial Number</b></font></td>
  </tr>
  <tr align=left>
    <td width=2% colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">&nbsp;&nbsp;</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">AP703B@@</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">1</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">OEM Generic 1U SAS Enclosure</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">BOM</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">ASSY</font></td>
    <td valign=top colspan=1><font face=\"verdana, arial, helvetica\" size=\"-2\">2S6219000G</font></td>
  </tr>
</table>
</p>
 ';

 $result = parse_data($string);

extract($result);

echo $headertext.'<br />';
echo $sapSON.'<br />';
echo $custPON.'<br />';
echo $legacyON.'<br />';
echo $pl.'<br />';
echo $pn.'<br />';

function parse_data($string){
$string = str_replace('&nbsp;&nbsp;','',$string);

$xml = new DOMDocument();
@$xml->loadHTML($string);

$ret = array();

foreach($xml->getElementsByTagName('p') as $p) {
    $header = trim($p->nodeValue);
}

foreach($xml->getElementsByTagName('td') as $td) {
    $value = trim($td->nodeValue);
    if(!empty($value) && is_numeric($value{0})){
        $ret[] = $value;
    }
}

$ret = array('headertext'=>$header,
             'sapSON'=>$ret[0],
             'custPON'=>$ret[1],
             'legacyON'=>$ret[2],
             'pl'=>$ret[3],
             'pn'=>$ret[4],);

return $ret;
}
?> 
```

现在我想将标题“外部订单号参考”保存到我可以稍后调用的 i 变量中。

此外，第一行的第二、第三和第四列分别对应于第二行的第二、第三和第四列的值。我还想将这些值保存到变量中。所以基本上，我需要一个 PHP 脚本来解析这个 HTML 文件并返回以下内容：

```
$header1 = "HEADER INFO";
$viewObject = "6600422";
$BPO = "G37147359-000000";
$AckDate = "2012-05-28";
$Operations = "PPS_Queue, PPS_Build, PPS_BoxAll, JPN_End";
$header2 = "EXTERNAL ORDER NUMBER REFERENCE";
$sapSON = "0310363858";
$custPON = "77340892008-120413";
$legacyON = "89FF09378001";
$header3 = "PRODUCTS FOR THIS WORK OBJECT/OPERATION(S)"
$pl = "3C";
$pn = "AP703B";
$qty = "1";
$options = "&nbsp;";
$serialNo = "2S6219000G"; 
```

ETC ...基本上，我需要将所有表格内容保存到变量中，因为我稍后会将它们保存到我的数据库中并从中创建一个报告并生成一些详细信息的条形码

谢谢您的帮助！

仅供参考：我无权访问数据库，所以我所能做的就是通过这个 HTML 文件进行解析并将值保存到变量中，以便以后存储到我的数据库中。另外，请注意标题是恒定的，唯一变化的值是用于不同订单的数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T02:56:38.620

在这里试试这个，`**[See it in action](http://codepad.org/RmL2tUJa)**`

```
<?php
$string = '<p> <b>EXTERNAL ORDER NUMBER REFERENCE</b>
    <table width=100% cellspacing=0>
      <tr align=left>
        <td width=2% colspan=1><font face="verdana, arial, helvetica" size="-2">&nbsp;&nbsp;</font></td>
        <td valign=top colspan=1><font face="verdana, arial, helvetica" size="-2"><b>SAP Sales Order Number</b></font></td>
        <td valign=top colspan=1><font face="verdana, arial, helvetica" size="-2"><b>Customer P.O. Number</b></font></td>
        <td valign=top colspan=1><font face="verdana, arial, helvetica" size="-2"><b>Legacy Order Number</b></font></td>
      </tr>
      <tr align=left>
        <td width=2% colspan=1><font face="verdana, arial, helvetica" size="-2">&nbsp;&nbsp;</font></td>
        <td valign=top colspan=1><font face="verdana, arial, helvetica" size="-2">0310363858</font></td>
        <td valign=top colspan=1><font face="verdana, arial, helvetica" size="-2">77340892008-120413</font></td>
        <td valign=top colspan=1><font face="verdana, arial, helvetica" size="-2">89FF09378001</font></td>
  </tr>
    </table>
</p>
';

$result = parse_data($string);

extract($result);

echo $headertext.'<br />';
echo $sapSON.'<br />';
echo $custPON.'<br />';
echo $legacyON.'<br />';

function parse_data($string){
    $string = str_replace('&nbsp;&nbsp;','',$string);

    $xml = new DOMDocument();
    @$xml->loadHTML($string);

    $ret = array();

    foreach($xml->getElementsByTagName('p') as $p) {
        $header = trim($p->nodeValue);
    }

    foreach($xml->getElementsByTagName('td') as $td) {
        $value = trim($td->nodeValue);
        if(!empty($value) && is_numeric($value{0})){
            $ret[] = $value;
        }
    }

    $ret = array('headertext'=>$header,
                 'sapSON'=>$ret[0],
                 'custPON'=>$ret[1],
                 'legacyON'=>$ret[2]);

    return $ret;
}
?> 
```

* * *

# 编辑版本 2（多行）：

由于每次迭代您的表都不同，因此它变得非常复杂，但我喜欢挑战。加油，希望对你有帮助...

```
<?php
$result = parse_data($string);

//Create Variables From Values
foreach($result as $key=>$value){
    foreach($value as $key_b=>$value_b){
        $$key_b = $value_b;
    }
}
/* --New Available Variables--
    $header0 = HEADER INFO
    $ViewObject = 6600422
    $BPO = G37147359-000000
    $AckDate = 2012-05-28
    $Operations = PPS_Queue, PPS_Build, PPS_BoxAll, JPN_End
    $header1 = EXTERNAL ORDER NUMBER REFERENCE
    $SAPSalesOrderNumber = 0310363858
    $CustomerPONumber = 77340892008-120413
    $LegacyOrderNumber = 89FF09378001
    $header2 = PRODUCTS FOR THIS WORK OBJECT/OPERATION(S)
    $PL = 3C
    $Product = AP703B
    $Qty = 1
    $Options =  
    $Serial = 2S6219000G
    $header3 = Station Info
    $StartStation = JPN_End
    $Location = Done
    $Station = 
    $BirthDateTime = 2012-05-23 14
    $PowerCord = 
    $Voltage = 
    $header4 = MATERIAL LIST FOR THIS WORK OBJECT/OPERATION(S)
    $PartNumber = AP703B@@
    $Description = OEM Generic 1U SAS Enclosure
    $BBType = BOM
    $MaterialLocation = ASSY
    $SerialNumber = 2S6219000G
*/

function parse_data($string){
    $string = str_replace('&nbsp;&nbsp;','',$string);
    $parts = explode('<hr>',$string);

    $html = new DOMDocument();
    $ret = array();
    $entry=0;
    foreach($parts as $part){
        @$html->loadHTML($part);
        //Get Header
        foreach($html->getElementsByTagName('p') as $p) {
            $ret[$entry]['header'.$entry] = trim($p->nodeValue);
        }
        $i=0;
        foreach($html->getElementsByTagName('td') as $td){
            $value = trim($td->nodeValue);
            if(empty($value)){
                continue;
            }
            switch($entry){
                case 0:
                    $split = explode(':',$value);
                    $ret[$entry][preg_replace('/[^a-zA-Z]/s', '', $split[0])] = trim($split[1]);
                    break;
                case 1:
                    if(!is_numeric($value{0})){
                        $ret[$entry][$i] = trim($value);
                    }else{
                        $ret[$entry][preg_replace('/[^a-zA-Z]/s', '', $ret[$entry][$i-3])] = trim($value);
                        unset($ret[$entry][$i-3]);
                    }
                    break;
                case 2:
                    if($i<=4){
                        $ret[$entry][$i] = trim($value);
                    }else{
                        $ret[$entry][preg_replace('/[^a-zA-Z]/s', '', $ret[$entry][$i-5])] = trim($value);
                        unset($ret[$entry][$i-5]);
                    }
                    break;
                case 3:
                    $split = explode(':',$value);
                    $ret[$entry][preg_replace('/[^a-zA-Z]/s', '', $split[0])] = trim($split[1]);
                    break;
                case 4:
                    if($i<=5){
                        $ret[$entry][$i] = trim($value);
                    }else{
                        $ret[$entry][preg_replace('/[^a-zA-Z]/s', '', $ret[$entry][$i-6])] = trim($value);
                        unset($ret[$entry][$i-6]);
                    }
                    break;
            }
            $i++;
        }
        $entry++;
    }
    return $ret;
}
?> 
```

# python - python pyplot 注释

> ID：10778733
> 
> 赞同：4
> 
> 时间：2012-05-28T02:23:35.770
> 
> 标签：python, marker, matplotlib

我目前正在使用以下代码使用 python pyplot 绘制图形：

```
 plt.plot([row[2] for row in data],[row[1] for row in data], type, marker='o', label=name) 
```

`'o'`但是，我希望点处的标记不是默认标记，而是`row[1]`

有人可以解释如何做到这一点吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T03:13:36.273

所以你想注释你的直线上的点的 y 值？

用于`annotate`每个点。例如：

```
import matplotlib.pyplot as plt

x = range(10)
y = range(10)

fig, ax = plt.subplots()

# Plot the line connecting the points
ax.plot(x, y)

# At each point, plot the y-value with a white box behind it
for xpoint, ypoint in zip(x, y):
    ax.annotate('{:.2f}'.format(ypoint), (xpoint,ypoint), ha='center', 
                va='center', bbox=dict(fc='white', ec='none'))

# Manually tweak the limits so that our labels are inside the axes...
ax.axis([min(x) - 1, max(x) + 1, min(y) - 1, max(y) + 1])
plt.show() 
```

![在此处输入图像描述](../Images/204df443470eb03aad1b7109ea00510e.png)

# mysql - 什么影响mysql中的日期格式？

> ID：10778734
> 
> 赞同：0
> 
> 时间：2012-05-28T02:23:49.607
> 
> 标签：mysql, asp.net-mvc, date-format

我使用 mysql 作为后端数据库创建 asp.net mvc 应用程序。但我对它存储日期数据的方式感到困惑。例如，我在输入字段中输入 06-03-2012，保存后，在我的开发计算机中，它将显示 2012 年 3 月 6 日，这正是我想要的，但是当我在服务器中运行应用程序（已发布的应用程序）时，它会给我；2012年6月3日。我的开发计算机和服务器中的mysql服务器是相同的版本。

这是我用来获取输入的代码：

```
 <tr>
   <td>@Html.LabelFor(m => m.Tanggal)
   </td>
   <td>
       @Html.EditorFor(m => m.Tanggal)
       @Html.ValidationMessageFor(m => m.Tanggal)
   </td>
 </tr> 
```

我应该怎么做才能解决这个问题？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:29:53.473

在您的 web.config 中，更改文化：

```
<globalization uiCulture="en-US" culture="en-US" /> 
```

全球化是 system.web 节点的子节点。

# java - 如何从 Java 数组中“删除”一个对象（不能使用集合）

> ID：10778737
> 
> 赞同：2
> 
> 时间：2012-05-28T02:24:13.350
> 
> 标签：java, arrays

作为示例，我正在用 java 开发一个简单的 MySortedSet，它实现了 SortedSet 接口。它由一个简单的数组备份，即 E[] 数组。

我对此有几个问题：

这是类：（我不是在编写整个代码，而是在编写相关部分）

```
public class MySortedSet<E> implements SortedSet<E>, Iterator<E> {

 private E[] array;
 private Comparator<? super E> _comparator;
 private int size = 0;
 private int capacity;

 @SuppressWarnings("unchecked")
 public MySortedSet() {
    this.capacity = 10;
    this.array = (E[]) new Object[this.capacity];
    // this.array = Array.newInstance(Class<E> var,int size);
    // We have to get Class<E> from outside caller.
 }
} 
```

由于它接受从原始类型到引用类型等所有类型的类型。我不确定何时删除项目，分配 null 是代替已删除项目的好方法。由于 Java 使用 0 初始化原始类型。所以 null 仅适用于引用类型。

下面可能是非常糟糕的设计：

```
@Override
public boolean remove(Object o) {
    int indexOfElement = this.find(o);
    boolean removed = false;
    if (indexOfElement != -1) {
        this.array[indexOfElement] = null;
        removed = true;
    }
    return removed;
} 
```

有人能告诉我从数组中删除元素的最佳方法是什么吗？

**编辑：**

老实说，我想从一个简单的数组中删除一个元素就像将没有删除项的整个数组复制到一个全新的数组中，但我不确定它在性能等方面的效率如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:31:24.437

这有点取决于你想如何使用你的数组的上下文。例如，如果您要遍历数组并将其内容用于标准方法（如`Arrays.sort()`），则它们可能会在您的数组中`NullPointerExceptions`有值时生成。`null`

如果您真的想以安全的方式从数组中删除项目，我建议您将数组更改为`ArrayList`这样的...

```
ArrayList<Object> list = new ArrayList<Object>();
list.add(object);
list.remove(object); 
```

因为这实际上会完全从列表中删除该项目 - 没有`nulls`或任何东西都将保留，并且执行类似的方法`length()`将返回一个真实值。

例如，当我使用数组时，我将值设置为`null`，并确保数组上的所有迭代`value != null`在我尝试查询它之前都会检查它。在`nulls`为删除的项目设置好之后，我通常会遍历数组并手动将所有的排序`nulls`到数组的末尾，然后`System.arraycopy()`调整数组的大小。这将为您留下一个大小正确的新数组，其中包含除已删除的项之外的所有项。但是，我建议仅在您确实必须使用数组时才这样做，因为它速度较慢，并且引入了更大的错误可能性，并且`NullPointerExceptions`.

或者，如果您不担心排序顺序，您可以简单地将数组中的最后一项移动到要删除的项的顶部，并计算*实际*数组大小。例如...

```
Object[] array = new Object[20];
int realSize = 15; // real number of items in the array

public void remove(int arrayIndex){
    array[arrayIndex] = array[realSize-1];
    realSize--;
} 
```

此方法通过将数组中的项“替换”为数组最后位置的项来删除数组中的项 - 如果您不关心排序顺序，它的实现非常快速且漂亮。

# javascript - JavaScript 自动完成搜索栏修改帮助

> ID：10778738
> 
> 赞同：0
> 
> 时间：2012-05-28T02:24:22.680
> 
> 标签：javascript

我正在为一个网站构建一个原型，并且我正在使用 JavaScript 代码来模拟谷歌在其搜索栏上的自动完成体验。

但是，我已修改示例列表中的数组以包含图像。当我进行选择时会出现问题。

```
var customarray=new Array(
    '1 Apple /img src="images/AutoComplete/Apple.png" width="627" height="40" />',
    '2 <img src="images/AutoComplete/Apple.png" width="627" height="40" /> Apple iMac ',
    '3 Apple iPad',
    'Apple iPhone',
    'Apple iPod',
    'Apple iPod Touch ',
    'Apple iPod Nano ',
    'Apple iPod Shuffle ',
    'Apple iPod Classic ',
    'Apple MacBook',
    'Apple MacBook Pro',
    'Apple TV'); 
```

数组 1 将在 HTML 输入字段中正确显示，但如果我单击它，输入字段将显示：“Apple img src="images/AutoComplete/Apple.png" width="627" height="40" “我只想要它显示“Apple”。

第二个问题是对齐。如果我将图像放在文本之前（如数组 2 所示），我会得到一个损坏的图像文件而不是图像。

关于如何纠正这些问题的任何想法？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T03:15:34.227

首先，我看到一个错字。`customarray[0]`应该

```
'1 Apple <img src="images/AutoComplete/Apple.png" width="627" height="40" />' 
```

其次，当您将此文本放入 HTML 标记时，请确保您正在使用该`innerHTML`属性。它可以是这样的

```
<div id="dropdownbox"></div>
<script type="text/javascript">
    //whatever code you have that executes when a search is done
    //...

    var html;
    var div = document.getElementById("dropdownbox");
    div.innerHTML = ""; //clears the results

    for (var i=0; i<customarray.length; i++) {
        html += "<div>" + customarray[i] + "</div>";
    }

    div.innerHTML = html;

    //...
</script> 
```

# php - 多维数组的 JSON_ENCODE 给出不同的结果

> ID：10778741
> 
> 赞同：25
> 
> 时间：2012-05-28T02:25:11.400
> 
> 标签：php, arrays, json

在 PHP 中执行 json_encode 多维数组时，我注意到一个不同的输出，只需命名其中一个数组，而不是不命名它们。例如：

```
$arrytest = array(array('a'=>1, 'b'=>2),array('c'=>3),array('d'=>4));
json_encode($arrytest) 
```

给出多个 json 对象的单个数组

```
[{"a":1,"b":2},{"c":3},{"d":4}]; 
```

* * *

而只是为中间数组分配一个名称

```
$arrytest = array(array('a'=>1, 'b'=>2),"secondarray"=>array('c'=>3),array('d'=>4));
json_encode($arrytest) 
```

创建单个 json 对象，其中包含多个 json 对象

```
{"0":{"a":1,"b":2},"secondarray":{"c":3},"1":{"d":4}}; 
```

为什么第一个选项不会返回与第二个执行相同的结果，用“1”代替“secondarray”

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-28T02:29:52.360

在 JSON 中，数组`[]`只有每个都有数字键，而对象`{}`有字符串属性。在第二个示例中包含数组键会强制整个外部结构成为对象。由于包含字符串键，这两个示例的内部对象都被制成对象`a,b,c,d`。

如果要`JSON_FORCE_OBJECT`在第一个示例中使用该选项，则应该返回与第二个示例类似的结构，外部结构是对象而不是数组。如果不指定您希望它作为对象，外部数组中缺少字符串键会导致 PHP 假定它被编码为 JSON 中的等效数组结构。

```
$arrytest = array(array('a'=>1, 'b'=>2),array('c'=>3),array('d'=>4));

// Force the outer structure into an object rather than array
echo json_encode($arrytest , JSON_FORCE_OBJECT);

// {"0":{"a":1,"b":2},"1":{"c":3},"2":{"d":4}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T02:30:46.107

具有连续数字键的数组被编码为 JSON 数组。就是这样。为什么？因为这很有意义。

由于键可以通过数组编码隐式表达，因此没有理由将它们显式编码为对象键。

[`json_encode`请参阅文档](http://php.net/manual/en/function.json-encode.php)中的所有示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T02:36:18.177

在第一个选项中，您只有数字索引（0、1 和 2）。虽然它们没有明确声明，但 php 会自动创建它们。

在第二个选项中，您将其中一个索引声明为字符串，这使得 PHP 在内部将所有索引转换为字符串。

当您对第一个数组进行 json 编码时，没有必要在生成的 json 字符串中显示整数，因为任何解码器都应该能够“猜测”它们是 0、1 和 2。

但在第二个数组中，这是必要的，因为解码器必须知道数组中的键值。

这很简单。数组中没有声明索引？它们是 0、1、2、3 等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-11T06:29:12.137

json 形式的输出是 year1{a,b},year2{c}, year3{d} **a 的值 1 ,b=2,c=3,d=4 存储在 year1 的 a,b 数组中分别为years2's c 和years3's d

```
$array1 = array('a'=>1, 'b'=>2);
    $array2 = array('c'=>3);
    $array3 = array('d'=>4)
    $form = array("year1" =>$array1,
                  "year2" =>$array2,
                  "year3" =>$array3,
            );

    $data = json_encode($form); 
```

# java - 在 Java 中对数组进行排序

> ID：10778744
> 
> 赞同：1
> 
> 时间：2012-05-28T02:26:31.087
> 
> 标签：java, sorting

作为示例，我正在用 java 开发一个简单的 MySortedSet，它实现了 SortedSet 接口。它由一个简单的数组备份，即 E[] 数组。

我对此有几个问题：

这是类：（我不是在编写整个代码，而是在编写相关部分）

```
public class MySortedSet<E> implements SortedSet<E>, Iterator<E> {

 private E[] array;
 private Comparator<? super E> _comparator;
 private int size = 0;
 private int capacity;

 @SuppressWarnings("unchecked")
 public MySortedSet() {
    this.capacity = 10;
    this.array = (E[]) new Object[this.capacity];
    // this.array = Array.newInstance(Class<E> var,int size);
    // We have to get Class<E> from outside caller.
 }
} 
```

**问题 3：**对 Constructor 有一个解释，因为这是一个排序集，所以假设元素是排序的：

> 如果此构造函数用于创建排序集，则假定元素使用它们的自然顺序进行排序（即，E 实现 Comparable）。

它有两个不同的构造函数。一种是无参数的，另一种是接受的`Comparator<? super E>`。

```
public MySortedSet() {
    this.capacity = 10;
    this.array = (E[]) new Object[this.capacity];
    // this.array = Array.newInstance(Class<E> var,int size);
    // We have to get Class<E> from outside caller.
}

public MySortedSet(Comparator<? super E> comparator) {
    this._comparator = comparator;
} 
```

如果`comparator`未传入，则应使用自然排序，但我不确定如何完成它，因为我需要以`Comparator`某种方式访问`compare`​​方法。请你们推荐我一种调用它的方法，这样我就可以在比较`sort`方法对每个元素进行排序时调用它。

对于他们喜欢查看完整代码的人，请参阅此地址：[http](http://codepaste.net/4ucvsw) ://codepaste.net/4ucvsw它并不完美，但我正在努力。

**问题 4：**代码指南说：

> 因为搜索特定项目的最快方法是使用二进制搜索，所以您必须确保集合中的项目始终处于排序顺序。这并不像看起来那么难实现。当您插入一个新项目时，您可以假设要插入它的数组已经排序。因此，您需要做的就是在数组中找到新项目所属的位置，将大于新项目的所有内容向右移动一个插槽，然后插入新项目。这称为插入排序。

这是`sort`方法逻辑。我需要进行二进制搜索以查找新项目所属的位置，以便我可以在该位置插入新项目并将另一个插槽向右移动。

但我不太确定二分搜索在这里对我有用，因为我不太确定我需要找到什么。我得到的是要添加的项目，而不是要查找的项目。相反，我认为是将每个元素与我需要添加的元素进行比较，当我找到最后一个较小和第一个较大的项目时，我将获得第一个较大项目的索引，将它们向右移动并在索引处添加新项目.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:38:29.080

**答案 3：**

“自然排序”意味着元素必须实现[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)，以便可以在不使用 a 的情况下对它们进行比较[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)。让调用者在`Comparable`元素和 a之间进行选择的棘手部分`Comparator`是，您无法进行编译时检查以确保它们至少满足其中一个要求。

Java[`TreeSet`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)类似地公开了一个构造函数，该构造函数接受 a`Comparator`和其他不接受的构造函数。`TreeSet`的合同本质上是抛出 ​​a`ClassCastException`如果您尝试插入一个不是 a 的元素，如果您在创建它时`Comparable`没有提供`TreeSet`a 。`Comparator`是否要使用此策略或其他策略取决于您。

**答案 4：**

根据报价的策略，您应该能够[`Arrays.binarySearch(Object[], Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#binarySearch%28java.lang.Object%5B%5D,%20java.lang.Object%29)用于此确切目的。从该方法的文档中：

> **返回：**搜索键的索引，如果它包含在数组中；否则，`(-(insertion point) - 1)`。插入点定义为将键插入数组的点：第一个元素的索引大于键，或者`a.length`如果数组中的所有元素都小于指定的键。请注意，这保证了当且仅当找到键时，返回值将 >= 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T02:41:12.353

**问题 3：**

事实是每个集合都使用预定义的比较器，该比较器隐式定义在 上`E`，因此每个用于具体化类型参数的类`E`都应该[`implement Comparable<E>`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html). 您正在寻找自然排序的比较方法是方法

```
int compareTo(E other) 
```

这必须由您将与数据结构一起使用的类来实现。由于您的工作与定义要与您的集合一起使用的类无关，而只是集合本身您将要做的事情

```
public class MySortedSet<E> ... {
    private Comparator<? super E> _comparator;

    public int innerCompare(E e1, E e2)
    {
      if (_comparator != null)
        return _comparator.compare(e1,e2);
      else
        return e1.compareTo(e2);
    }

    ... 
```

这样您就可以在提供时使用自定义比较器，否则使用自然比较器。

两者都`Comparable`遵循`Comparator`相同的原则，但第一个，顾名思义，附加到数据类，因此它是它的自然比较器。相反，使用后者是因为它允许您定义一种自定义方式来对元素进行排序，这些元素将根据自然顺序以不同的方式进行排序。

**问题4：**

这意味着，在具有排序数组的假设下，您必须在每次插入后保持此约束有效，并且您将被允许在查找项目时进行二进制搜索。

您必须只专注于将元素放置在正确的索引处（您必须添加的项目）。与查找元素相关的语句部分必须按以下方式解释：

> 如果您注意保持数组排序，这可以通过确保您添加的每个元素都放置在正确的位置来完成（例如，使用插入排序），那么您可以在查看元素是否包含在数组中时应用二进制搜索集。

这是正确的，因为如果对数组进行了排序，您可以确定查看数组部分的中间元素将始终指向正确的方向，以查看列表中是否确实包含另一个元素。

例如：

```
1, 2, 6, 11, 21, 30, 45 
```

您需要检查 2，您可以在 index 处取元素`size()/2 = 3`，即`11`. 由于您已经知道数组已排序，因此`2 < 11`您可以在左半边递归地执行相同的操作，依此类推。

# objective-c - Objective-C (Mac) 中的 RSA 加密

> ID：10778753
> 
> 赞同：5
> 
> 时间：2012-05-28T02:27:22.367
> 
> 标签：objective-c, macos, cocoa, encryption, rsa

我正在研究需要 RSA 加密的东西，我有一些看起来像这样的代码：

```
- (NSData *)RSAEncryptData:(NSData *)data {

    NSMutableData * encrypted = [NSMutableData dataWithLength:256];

    RSA * rsa = RSA_new();
    rsa->n = BN_bin2bn(modulus.bytes, modulus.length, NULL);
    rsa->e = BN_bin2bn(exponent.bytes, exponent.length, NULL);

    RSA_public_encrypt(data.length, data.bytes, encrypted.mutableBytes, rsa, RSA_PKCS1_OAEP_PADDING);
    RSA_free(rsa);
    return encrypted;

} 
```

其中模数和指数是`NSData`对象。

这工作得很好，除了所有的 RSA 方法之外，编译器还对我抱怨它们在 Mac OS 10.7 上是如何被弃用的。

有没有更现代的方式我应该这样做？我已经用谷歌搜索了几个小时，只能找到 Mac 上不可用的 iOS 内容（`SecKeyEncrypt`等）。

明确地说，我不是在寻找 iOS 解决方案，而是在寻找 Mac OS 解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T03:08:25.170

根据[WWDC 2011 上的下一代加密服务演示文稿](https://developer.apple.com/videos/wwdc/2011/)，OpenSSL 在 Mac OS X 10.7 及更高版本中已弃用，因为 OpenSSL 库的版本控制非常糟糕。

话虽如此，OpenSSL 中的 RSA 功能目前没有直接替代品。然而。您现在可能可以继续使用它们；你只需要忍受警告。或者，您可以采纳 Jon Callas 在该演示文稿中给出的建议，并为 RSA 捆绑您自己的 libcrypto 副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T02:39:13.267

你已经审查过[这个](https://github.com/andrewtj/cutkey/issues/2)吗？这似乎是你问的确切问题，但是，这个问题似乎已经解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T09:48:29.737

你可以看看这个是否有帮助

[https://github.com/skomik/RSAUtility](https://github.com/skomik/RSAUtility)

# hibernate - Hibernate 的值为“create”的“hbm2ddl.auto”属性不是重新创建表

> ID：10778755
> 
> 赞同：4
> 
> 时间：2012-05-28T02:27:45.583
> 
> 标签：hibernate, hbm2ddl

我正在开发我的[第一个简单的 Hibernate 应用程序](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch01.html#tutorial-firstapp)。问题的关键是，我重命名了持久类的成员（对所有其他部分进行了适当的更改）并重新运行应用程序。由于 'hbm2ddl.auto' 属性在配置 xml 中被分配了 'create' 值，Hibernate 预计会在每次运行时创建新表，但它并没有这样做。以下是详细信息：

班级：

```
 public class Event {
    private Long id;

    private String title;
    private Date date;

    public Event() {
        // this form used by Hibernate
    }

    public Event(String title, Date date) {
        // for application use, to create new events
        this.title = title;
        this.date = date;
    }

    public Long getId() {
        return id;
    }

    private void setId(Long id) {
        this.id = id;
    }

    public Date getDate() {
        return date;
    }

    public void setDate(Date date) {
        this.date = date;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }
} 
```

事件.hbm.xml：

```
<hibernate-mapping package="org.hibernate.tutorial.hbm">

<class name="Event" table="EVENTS">
    <id name="id" column="EVENT_ID">
        <generator class="increment"/>
    </id>
    <property name="date" type="timestamp" column="EVENT_DATE"/>
    <property name="title"/>
</class> 
```

hibernate.cfg.xml 等具有以下条目：

```
<property name="hbm2ddl.auto">create</property> 
```

主要课程：

```
public class EventManager {

public static void main(String[] args) {

    EventManager mgr = new EventManager();

    List events = mgr.listEvents();
for (int i = 0; i < events.size(); i++) {
    Event theEvent = (Event) events.get(i);
        System.out.println( "Event: " + theEvent.getTitle() + " Time: " + theEvent.getDate() );
    }

    HibernateUtil.getSessionFactory().close();

}

private List listEvents() {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    List result = session.createQuery("from Event").list();
    session.getTransaction().commit();
    return result;
} } 
```

上面的代码按预期工作。只是为了测试“hbm2ddl.auto”属性，我已将 Event 类中的“title”成员更改为“title1”。并且，更新了 setter 和 getter 方法以及所有引用（在映射 xml、Event 和 EventManager 类中）。遵守没有错误。但是，当我尝试运行应用程序时，我看到以下异常：

> 线程“主”org.hibernate.exception.SQLGrammarException 中的异常：org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:82) 中 org.hibernate 的“字段列表”中的未知列“event0_.title1”。 exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49) at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125) at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert( SqlExceptionHelper.java:110) 在 org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129) 在 org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java: 81）在 $Proxy6。executeQuery(Unknown Source) at org.hibernate.loader.Loader.getResultSet(Loader.java:1953) at org.hibernate.loader.Loader.doQuery(Loader.java:829) at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections( Loader.java:289) 在 org.hibernate.loader.Loader.doList(Loader.java:2438) 在 org.hibernate.loader.Loader.doList(Loader.java:2424) 在 org.hibernate.loader.Loader.listIgnoreQueryCache (Loader.java:2254) 在 org.hibernate.loader.Loader.list(Loader.java:2249) 在 org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470) 在 org.hibernate.hql。 internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355) 在 org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:195) 在 org.hibernate.internal.SessionImpl.list(SessionImpl.java: 1248）在组织。hibernate.internal.QueryImpl.list(QueryImpl.java:101) at org.hibernate.tutorial.hbm.EventManager.listEvents(EventManager.java:56) at org.hibernate.tutorial.hbm.EventManager.main(EventManager.java: 20) 原因：com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance( Sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) at java.lang.reflect.Constructor.newInstance(Unknown Source) at com.mysql.jdbc.Util.handleNewInstance(Util.java:409) at com.mysql .jdbc.Util.getInstance(Util.java:384) 在 com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1054) 在 com。mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3562) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3494) at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1960) at com .mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2114) 在 com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2696) 在 com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2105) 在com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2264) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown来源）在 org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler 的 java.lang.reflect.Method.invoke（未知来源）。continueInvocation(AbstractStatementProxyHandler.java:122) ... 16 更多

错误指向以下行的 EventManager 类：

```
List result = session.createQuery("from Event").list(); 
```

由于 'hbm2ddl.auto' 属性在配置 xml 中被分配了 'create' 值，Hibernate 预计会在每次运行时创建新表，但它并没有这样做。请帮助解决问题。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-28T02:32:50.300

尝试指定`hibernate.hbm2ddl.auto=create`而不是仅指定`hbm2ddl.auto=create`.

这是[文档](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/session-configuration.html#configuration-optional)使用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-23T10:02:14.507

尝试`<property name="hibernate.hbm2ddl.auto">create</property>`代替`<property name="hbm2ddl.auto">create</property>`

# java - 如何显示时间表

> ID：10778756
> 
> 赞同：1
> 
> 时间：2012-05-28T02:27:54.793
> 
> 标签：java, jakarta-ee

我有一个表格“时间表”如下：

![在此处输入图像描述](../Images/79936d7fb93cebf79504880e97b0b04b.png)

我在我的项目中使用 Hibernate。因此，当我查询此表时，我会得到包含 Class、Teacher、Course 和 Room 数据的列表。但是我遇到了一个问题，我不知道如何在屏幕上打印时间表，因为通常会显示时间表。

时间表通常显示如下。

![在此处输入图像描述](../Images/8e6a3ff9bcf44462892f3c6218c8a3d4.png)

谁能解决我的这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:10:27.463

您的表可以表示为 TimeSlot 列表。列表中的每个 TimeSlot 对象都有一个 timeRange（开始和结束时间）和一个 5 个事件（星期一、星期四 ...）。TimeSlots 有一个自然的顺序，即它们的时间范围开始的顺序。

遍历表中的所有行。对于每一行，找到一个具有相同时间范围的现有 TimeSlot，如果尚不存在则创建它，并将其存储在时隙列表中。然后根据行中的日期设置 TimeSlot 的适当日期字段。对列表进行排序。

一旦你有了这个 TimeSlot 对象的排序列表，显示表格只是遍历 TimeSlot 列表的问题，并为每个 TimeSlot 生成一个表格行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:59:36.470

请参阅 PrimeFaces 计划组件： http: [//www.primefaces.org/showcase-labs/ui/scheduleLazy.jsf](http://www.primefaces.org/showcase-labs/ui/scheduleLazy.jsf)

它易于使用，对我来说很酷。

# xml - 在 ActionScript 中使用 XML

> ID：10778763
> 
> 赞同：0
> 
> 时间：2012-05-28T02:30:08.463
> 
> 标签：xml, actionscript-3, actionscript

我在另一个 SWF 文件中有 XML 数据。我通过这个获取数据：

```
var getXML = event.target.applicationDomain.getDefinition("class");
var getXML = new getXML;
trace(getXML); 
```

如果我输出数据，它只是 XML 内容，如：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<assets>
   <asset name="blabla" />
    ....
</assets> 
```

如何将此文本“转换”为纯 XML，以便可以使用 data.asset[0].@name？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T02:47:20.207

从字符串输出实例化一个 XML 对象：

```
var xml:XML = new XML(getXML.toString()); 
```

# python - Python“溢出错误”

> ID：10778764
> 
> 赞同：11
> 
> 时间：2012-05-28T02:30:25.360
> 
> 标签：python, overflow

我刚刚开始学习用 Python 编码。我正在尝试编写一些代码来回答这个 Project Euler 问题：

13195 的质因数是 5、7、13 和 29。

数字 600851475143 的最大质因数是多少？

我的程序适用于 13195 的测试用例，但是当我尝试输入 600851475143 时，出现错误：“OverflowError: range() results has too many items” 有谁知道我该如何解决这个问题？

这是我的代码：

```
class Euler3:
    "A class to find the largest prime factor of a given number"
     n = 600851475143
     primeFactors = []
     for i in range(2,n):
         if (n%i ==0):
            primeFactors.append(i)
            n = n/i
            i = i -1 #reset i
     print primeFactors 
```

任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-28T02:40:45.667

该`range`函数创建一个列表并尝试将其存储在内存中。创建一个长很多数字的列表是导致溢出错误的原因。您可以`xrange`改为使用生成器来按需生成数字。

也就是说，我想你会发现你的算法对于计算大素数来说太慢了。有很多素数算法，但我可能建议您[以埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)为起点。

编辑：正确地`xrange`实际上并没有返回一个生成器，而是一个 xrange 对象，它的行为很像一个生成器。我不确定你是否在乎，但我不准确让我很烦恼！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T02:38:56.990

我猜你使用的是 python 2 而不是 python 3——`range(2,n)`实际上是在构造一个列表！你没有足够的内存来存储 6000 亿个数字！`xrange`不过应该没问题。

另外，你的想法是`i=i-1`行不通的。For 循环不像 C 那样工作，而且这种 hack 只适用于 C 风格的循环。for 循环遍历`range(2,n)`. 如果在一次迭代中`i`获取该值`5`，那么无论您对 做什么`i`，它仍然会`6`在下一次通过。

此外，`range(2,n)`当您进入循环时，将构建列表。因此，当您修改 时`n`，这不会改变任何内容。

你将不得不重新考虑你的逻辑。

（如果你不相信我，尝试使用 175 作为测试用例）

作为最后的评论，您可能应该养成使用特殊整数除法的习惯：`n = n // i`. 虽然`/`和`//`在 python 2 中的工作方式相同，但这确实是不推荐使用的行为，并且它们在 python 3 中的工作方式不同，它`/`会给你一个浮点数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-28T02:38:58.207

您可以通过使用`xrange`而不是解决问题`range`

您的下一个问题将是程序运行时间过长，因为您需要在某些情况下跳出循环

处理重复因素的更好方法是`if`将`while`

```
 while (n%i ==0):
        primeFactors.append(i)
        n = n/i 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T02:56:17.563

```
n = 600851475143
primeFactors = []
for i in range(2,n): 
```

我认为您可以通过注意到这一点来优化功能

```
for i in range(2,n): 
```

你可以更换

```
range(2,n) 
```

经过

```
range(2,int(sqrt(n))+2) 
```

因为，你可以看到维基...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-13T11:25:19.017

我花了大约 5 秒钟才得到答案。

```
import math

def is_prime_number(x):
   for i in range(int(math.sqrt(x)), 2, -1):
      if x % i == 0:
        return False
   return True

def next_prime_number(number):
    #Returns the next prime number.
    if number % 2 == 0 and number != 2:
        number += 1
    while not is_prime_number(number):
        number += 2
    return number

num = 600851475143
i = 2
while (i < long(math.sqrt(num) / 2)):
    if num % i == 0:
       largest = i
       print largest
    i = next_prime_number(i + 1) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-15T08:49:50.633

这是找到迄今为止我发现的素数的最佳方法：

```
def isprime(n):
    #make sure n is a positive integer
    n = abs(int(n))
    #0 and 1 are not primes
    if n < 2:
        return False
    #2 is the only even prime number
    if n == 2:
        return True
    #all other even numbers are not primes
    if not n & 1:
        return False
    #range starts with 3 and only needs to go up to the square root of n
    #for all odd numbers
    for x in range (3, int(n**0.5)+1, 2):
        if n % x == 0:
            return False
    return True #if it makes it through all the catches, it is a prime 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-05T08:26:32.980

xrange 可能不会帮助你（或者它可能！），但这里的关键是要意识到你不需要找到直到 600851475143 或 600851475143 的因数的素数，但它是素数，所以.. . 使用良好的旧素数分解方法，如下所示：

```
A=600851475143
n=2
fac=[]
while(n<=int(A)):
    B=1
    while(A%n==0):
        B=0   
        A=A/n
    if(B==0):
        fac.append(n)
    n=n+1

print max(fac) 
```

这将几乎立即返回最大的素数

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-07T10:19:02.987

我也在与这个 Python “OverflowError”作斗争，在这个项目上工作。想出一个有效的组合让我发疯了。

但是，我确实发现了一种聪明的方法，至少我是这么认为的:)。

这是我解决这个问题的代码。

```
def IsNumberPrime(n):
   bounds = int(math.sqrt(n))
   for number in xrange(2,bounds+2):
        if n % number == 0:
            return False
   return True

def GetListOfPrimeFactors(n):
    primes = []
    factors = GetListOfFactors(n)
    if n % 2 == 0:
       primes.append(2)

    for entries in factors:
       if IsNumberPrime(entries):
          primes.append(entries)
    return primes

GetListOfPrimeFactors(600851475143)

def GetListOfFactors(n):
   factors = []
   bounds = int(math.sqrt(n))
   startNo = 2

   while startNo <= bounds:
      if n % startNo == 0:
         factors.append(startNo)
      startNo += 1
   return factors 
```

我所做的是将输入的数字的因素输入到“因素”列表中。之后，我获取因子列表并确定哪些是素数并将它们存储到一个列表中，然后打印出来。

我希望这有帮助

——迈克

# bash - Bash 脚本发送回车键或防止猫挂起

> ID：10778768
> 
> 赞同：0
> 
> 时间：2012-05-28T02:31:04.827
> 
> 标签：bash, cat

我目前正在使用以下命令在屏幕会话中运行 Minecraft 服务器：

```
(tail -f /path/to/fifo & cat) | java -Xmx2048M -jar minecraft_server.jar nogui 
```

您可以通过在服务器控制台中发送“停止”来关闭我的世​​界服务器。我正在使用 fifo 来发送来自其他 bash 脚本的命令，并使用 cat 来允许来自屏幕会话中实际 Minecraft 服务器控制台的输入。

但是会发生什么，如果您将命令“停止”放在实际的 Minecraft 控制台中，服务器最终会因为“cat”命令而在它应该退出之前挂起。解决这个问题的唯一方法是在发送停止命令后再次按回车键。

我怎样才能让“猫”不导致它挂起？

编辑：完整的脚本。

```
#!/bin/bash

serverDirectory=/opt/games/minecraft
pidFile=$serverDirectory/server.pid
fifoFile=$serverDirectory/server.fifo

cleanup() {
    rm -f $pidFile
    rm -f $fifoFile
}

if [ ! -p $fifoFile ]; then
    mkfifo $fifoFile && chmod 0777 $fifoFile
fi

echo $$ > $pidFile

# restart server if it stops
while true
do
    # how minecraft server should handle an interruption
    trap "{ echo 'stop' > $fifoFile ; }" SIGINT
    (tail -f $fifoFile & cat) | java -Xmx2048M -jar minecraft_server.jar nogui
    echo "Restarting server...."
    # if interruption occurs before we restart, stop trying to restart and clean up
    trap "{ cleanup ; exit 0 ; }" SIGINT SIGTERM
    sleep 5
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:43:59.490

我没有使用过我的世界服务器，所以我不知道我是否在正确的轨道上，但这会工作吗？

```
#!/bin/sh

fifo="/path/to/fifo"
mkfifo $fifo
trap "rm -f $fifo" 0 1 2 3 6 15

/path/to/java -Xmx2048M -jar minecraft_server.jar nogui < $fifo &
echo $? > /path/to/minecraft.pid
cat > $fifo 
```

一旦服务器退出，这仍然不会杀死`cat`，但至少它不会阻塞服务器。您可能希望在退出时杀死猫的函数中启动我的世界服务器。我建议保留 .pid 文件以备将来使用。:-)

# javascript - 从服务器加载带有级联下拉列表的 jQuery 对话框

> ID：10778769
> 
> 赞同：0
> 
> 时间：2012-05-28T02:31:08.737
> 
> 标签：javascript, jquery, jquery-ui

我有一个 jQuery 对话框，需要打开并填充来自数据库的数据。对话框中有下拉菜单，当处于“新”模式（不为重新保存而编辑）时会级联。

如何使用数据库中的值加载对话框，同时导致级联发生。

当对话框处于“编辑”模式时，我已经使用对话框的 onfocus 事件进行绑定，但是每次元素获得焦点时都会触发焦点。没有偷偷摸摸地使用编辑模式就无法工作。

我尝试打开对话框并使用 jQuery 设置下拉菜单，这可行，但随后级联确实有效。

对于级联，我在不同的下拉列表中使用 .change。

不确定代码是否会有所帮助，但会发布一些来迭代我正在使用的 jQuery 功能。

**问题是：我如何打开一个对话框，使用来自服务器的信息加载下拉菜单并让 .change 功能正常工作？**

```
$('#collectDD').change(function(){
      // first change the item drop down list
      var collection = $('#collectDD').val();

      data = "coll=" + collection + "&action=getItems&func=";
      $('#addCollection').text(collection);

      $.ajax({
            url: "getItemList.php",
            type: "GET",
            cache: false,
            data: data,
            success: function (html) {
               $('#itemDD').empty();
               $("#itemDD").html(html);              
               // now update the function collection dropdown
               data = "coll=" + collection + "&action=getFunction";

            }
        }); 
```

集合 DD HTML

```
 <select id="collectDD" name="collectionDD">
      <option>Select Collection</option>
      <option>Option1</option>
    </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:51:42.783

这与您的标签名称不完全匹配，我对`data`字符串进行了一些更改，但我认为它符合您正在寻找的内容

```
<div id="dialogbox">
    <select id="s1"></select>
    <select id="s2"></select>
    <select id="s3"></select>
</div>

<script type="text/javascript">
  $(document).ready( function() {
    $( "#dialogbox" ).dialog({
        open: function(event, ui) {
            var s1 = $("#s1").empty();
            var s2 = $("#s2").empty(); 
            var s3 = $("#s3").empty();

            s1[0].enabled = false;
            s2[0].enabled = false;
            s3[0].enabled = false;

            //load first dropdown from the database
            var data = "coll=dropdown1&val=&action=getItems&func=";
            $.ajax({
                url: "getItemList.php",
                type: "GET",
                cache: false,
                data: data,
                success: function (html) {
                    s1.html(html);
                    s1[0].enabled = true;
                }
            });

            //load the second DD when the first changes
            s1.change( function() {
                s2[0].enabled = false; //disable until after ajax load
                s3[0].enabled = false;

                data = "coll=dropdown2&val=" + s1.text() + "&action=getItems&func=";
                $.ajax({
                    url: "getItemList.php",
                    type: "GET",
                    cache: false,
                    data: data,
                    success: function (html) {
                        s2.empty().html(html);
                        s2[0].enabled = true;
                    }
                });
            });

            s2.change( function() {
                if (s2[0].enabled) { //test for enabled to prevent some unnessecary loads
                    s3[0].enabled = false;

                    data = "coll=dropdown3&val=" + s2.text() + "&action=getItems&func=";
                    $.ajax({
                        url: "getItemList.php",
                        type: "GET",
                        cache: false,
                        data: data,
                        success: function (html) {
                            s3.empty().html(html);
                            s3[0].enabled = true;
                        }
                    });
                }
            });
        }
    });
  });
</script> 
```

**更新**

这是一个在自己的函数中具有更改函数的示例

```
<div id="dialogbox">
    <select id="s1"></select>
    <select id="s2"></select>
    <select id="s3"></select>
</div>

<script type="text/javascript">
    var s1, s2, s3, data;

    $(document).ready( function() {
        s1 = $("#s1").empty();
        s2 = $("#s2").empty(); 
        s3 = $("#s3").empty();

        $( "#dialogbox" ).dialog({
            open: function(event, ui) {
                s1[0].enabled = false;
                s2[0].enabled = false;
                s3[0].enabled = false;

                //load first dropdown from the database
                data = "coll=dropdown1&val=&action=getItems&func=";
                $.ajax({
                    url: "getItemList.php",
                    type: "GET",
                    cache: false,
                    data: data,
                    success: function (html) {
                        s1.html(html);
                        s1[0].enabled = true;
                    }
                });

                //load the second DD when the first changes
                s1.change( changeDD1 );

                //load the third DD when the second changes
                s2.change( changeDD2 );
            }
        });
    });

    function changeDD1() {
        s2[0].enabled = false; //disable until after ajax load
        s3[0].enabled = false;

        data = "coll=dropdown2&val=" + s1.text() + "&action=getItems&func=";
        $.ajax({
            url: "getItemList.php",
            type: "GET",
            cache: false,
            data: data,
            success: function (html) {
                s2.empty().html(html);
                s2[0].enabled = true;
            }
        });
    }

    function changeDD2() {
        if (s2[0].enabled) { //test for enabled to prevent some unnessecary loads
            s3[0].enabled = false;

            data = "coll=dropdown3&val=" + s2.text() + "&action=getItems&func=";
            $.ajax({
                url: "getItemList.php",
                type: "GET",
                cache: false,
                data: data,
                success: function (html) {
                    s3.empty().html(html);
                    s3[0].enabled = true;
                }
            });
        }
    }
</script> 
```

# mfc - 使用 MFC 应用程序进行模拟制作

> ID：10778775
> 
> 赞同：0
> 
> 时间：2012-05-28T02:32:01.240
> 
> 标签：mfc, simulation

我正在使用 MFC 应用程序（它是一个在田地中移动的机器人）进行模拟，发生的情况是后面的过程计算位置到快速绘制需要时间的位置，所以我最终看到的是机器人在末端位置没有中间位置。但是当我放 AFXMessageBox 时，我可以看到它所经历的所有位置，你能帮我弄清楚吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:55:55.940

您可以使用内存设备上下文来固定绘图。简而言之，您将在内存中的位图上进行所有绘图，这将很快。一切准备就绪后，您将在显示器上打印最终图纸。这将非常快速和顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:08:17.520

Hina，你需要做的是将计算机器人位置的复杂计算移到一个线程中，并将机器人的绘图保留在你的主线程中。然后您需要将您当前的位置传达给主线程，并且在绘图后使您的表面无效。这样您就可以看到经常更新的职位。

当您显示一个消息框时会发生什么，您可以在计算后重新绘制表面。

# c# - 获取特定地区的日期/时间？

> ID：10778779
> 
> 赞同：3
> 
> 时间：2012-05-28T02:32:22.537
> 
> 标签：c#, datetime, region

如何获取`DateTime.Now`特定区域？

我正在尝试在国外获取当前日期，我正在寻找一种简单的方法来实现这一目标。

注意：我不介意从在线服务器获得价值，我只是不想为此花费太多的开发时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T02:42:58.473

如果你知道你想要的时区，你可以使用这个[`TimeZoneInfo`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx)类。首先[获取`TimeZoneInfo`所需时区的对象](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.findsystemtimezonebyid.aspx)，然后将当前时间转换为该时区：

```
var timezone = TimeZoneInfo.FindSystemTimeZoneById("Central America Standard Time");
var dateTime = TimeZoneInfo.ConvertTime(DateTime.Now, timezone); 
```

# .htaccess - htaccess 重定向删除特殊字符

> ID：10778781
> 
> 赞同：0
> 
> 时间：2012-05-28T02:33:00.753
> 
> 标签：.htaccess, mod-rewrite, redirect, url-rewriting

我想将此 URL 重定向`http://www.domain.com/forum/1122554-lorem-ipsum-u-dolor%C4%8Dsimit-lorem`到`http://www.domain.com/forum/1122554-lorem-ipsum-u-dolorsimit-lorem`

我试过了：

```
%C4%8D == č
RewriteRule ^forum/(.+)(č)(.+) /forum/$1$3 [R=301,L]
this also not worked
RewriteRule ^forum/(.+)(%C4%8D)(.+) /forum/$1$3 [R=301,L] 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T23:05:28.693

这是正确的答案，对不起，伙计们，我已经弄清楚了！我希望这也能帮助其他人！^/forum/(.*)(?:%C4%8D|č) /forum/$1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:10:15.317

```
RewriteRule ^forum/(.*)([^a-zA-Z0-9-./]+)(.*) /forum/$1$3 [R=301,L] 
```

# syntax-highlighting - notepad++ 用户定义的伪代码语言

> ID：10778787
> 
> 赞同：1
> 
> 时间：2012-05-28T02:34:04.903
> 
> 标签：syntax-highlighting, notepad++, pseudocode

我在 Notepad++ 中制作了一个基本的 UDL，以符合我编写伪代码的方式。但是，我需要的一个功能是何时写：

```
BEGIN Main
    ExampleSub
END

BEGIN SUBPROGRAM ExampleSub
    Display something...
END SUBPROGRAM ExampleSub 
```

我想要的是 Notepad++ 突出显示 ExampleSub 以便我知道它是一个子程序（有点像它如何突出显示在 PHP 中声明的变量）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:05:12.573

使用 SUBPROGRAM 作为分隔符的开头，使用 ((EOL)) 作为分隔符的结尾，以突出显示 SUBPROGRAM 语句及其之后的所有内容。UDL 不如内置语言强大，因此不计算嵌套的 ExampleSub 引用。

### 参考

*   [用户定义语言的限制](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Limitations_Of_User_Defined_Languages)
*   [用户定义的语言首选项](http://npp-community.tuxfamily.org/documentation/notepad-user-manual/languages/user-defined-languages)
*   [用户定义的语言配置](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=User_Defined_Language_Files)

# c# - 如何在我的代码中使用这个类

> ID：10778791
> 
> 赞同：-3
> 
> 时间：2012-05-28T02:36:07.543
> 
> 标签：c#, list, sorting

我看到了 Ian Griffiths在 C# 中 创建的这个自然排序类 ( [http://www.interact-sw.co.uk/iangblog/2007/12/13/natural-sorting )。](http://www.interact-sw.co.uk/iangblog/2007/12/13/natural-sorting)

我想用它来按对象的名称对我自己的代码中的对象列表进行排序（另外，我将如何通过对象中的字段进行排序），我该怎么做？

我试过了，出现错误...

```
 System.Func<MyObjectClass, string> ConvertMyObject = str =>
    {
        return str.ToString();
    };
    listObjects = listObjects.OrderBy(str => Regex.Split(str, "([0-9]+)").Select(ConvertMyObject), new EnumerableComparer<MyObjectClass>()); 
```

谢谢！

```
/// <summary>
/// Compares two sequences.
/// </summary>
/// <typeparam name="T">Type of item in the sequences.</typeparam>
/// <remarks>
/// Compares elements from the two input sequences in turn. If we
/// run out of list before finding unequal elements, then the shorter
/// list is deemed to be the lesser list.
/// </remarks>
public class EnumerableComparer<T> : IComparer<IEnumerable<T>>
{
/// <summary>
/// Create a sequence comparer using the default comparer for T.
/// </summary>
public EnumerableComparer()
{
    comp = Comparer<T>.Default;
}

/// <summary>
/// Create a sequence comparer, using the specified item comparer
/// for T.
/// </summary>
/// <param name="comparer">Comparer for comparing each pair of
/// items from the sequences.</param>
public EnumerableComparer(IComparer<T> comparer)
{
    comp = comparer;
}

/// <summary>
/// Object used for comparing each element.
/// </summary>
private IComparer<T> comp;

/// <summary>
/// Compare two sequences of T.
/// </summary>
/// <param name="x">First sequence.</param>
/// <param name="y">Second sequence.</param>
public int Compare(IEnumerable<T> x, IEnumerable<T> y)
{
    using (IEnumerator<T> leftIt = x.GetEnumerator())
    using (IEnumerator<T> rightIt = y.GetEnumerator())
    {
        while (true)
        {
            bool left = leftIt.MoveNext();
            bool right = rightIt.MoveNext();

            if (!(left || right)) return 0;

            if (!left) return -1;
            if (!right) return 1;

            int itemResult = comp.Compare(leftIt.Current, rightIt.Current);
            if (itemResult != 0) return itemResult;
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:23:13.153

当“正常”排序不符合您的需要时，他提供的自然排序方法非常有用。例如，对字符串进行排序的“正常”方式是按字母顺序排列的，因此我们需要一种解决方法。

但是，在您的示例中，您正在尝试对自定义对象进行排序——这意味着您可以提供自己的排序规则！

要定义这些规则，请根据您从对象中选择的任何字段，使用您自己的比较来[实现 IComparable 。](http://www.dotnetperls.com/icomparable)

您可以让排序首先检查您描述的“名称”字段，如果它们匹配，然后比较数字字段。

但是，如果您确实需要对给定字段进行自然排序，那么您仍然可以使用这种更易于理解的技术来调整博客的方便 EnumerableComparer。（简单比较左边的 Regex.Split(str.Replace(" ", ""), "([0-9]+)").Select() 到右边的）

最后，如果是 LINQ 表达式给您带来了困难，[请查看这种 LINQ-less 方法。](http://www.codeproject.com/Articles/22517/Natural-Sort-Comparer)

# c# - 字符串和\的使用

> ID：10778792
> 
> 赞同：0
> 
> 时间：2012-05-28T02:36:14.423
> 
> 标签：c#, string

我有 stringBuilder 和字符串类，存储路径：

```
StringBuilder name = new StringBuilder();
name.Append(@"NETWORK\MyComputer");
String serverName = name.ToString();  //this converts the \ to a \\ 
```

我已经尝试了很多东西，但它总是导致字符串具有 \

使用`serverName.Replace("\\", @"\");`不起作用，它将其保留为 \

`servername.Replace("\\", "\"");` 将 a 添加`"`到字符串中，这仍然不正确。

请协助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T02:41:10.690

如果您担心将单个反斜杠显示为双反斜杠，请不要担心 - 这只是在调试器中显示给您的方式。

反斜杠是一个[特殊字符](http://msdn.microsoft.com/en-us/library/362314fe%28v=vs.71%29.aspx)，通过将其加倍来关闭“特殊性”。或者，`@`可以在源代码中为字符串添加前缀，从而避免使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T02:39:14.883

利用

```
name.Append(Path.Combine("NETWORK", "MyComputer"); 
```

在字符串`\`中是一个转义序列。所以`\`在调试器中`\\`

根据 MSDN

`Character combinations consisting of a backslash (\) followed by a letter or by a combination of digits are called "escape sequences." To represent a newline character, single quotation mark, or certain other characters in a character constant, you must use escape sequences. An escape sequence is regarded as a single character and is therefore valid as a character constant.`

`Escape sequences are typically used to specify actions such as carriage returns and tab movements on terminals and printers. They are also used to provide literal representations of nonprinting characters and characters that usually have special meanings, such as the double quotation mark ("). The following table lists the ANSI escape sequences and what they represent.`

阅读[转义序列](http://msdn.microsoft.com/en-us/library/h21280bw.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T02:43:10.893

我认为您的代码无法编译。因为 \ 是转义字符，所以字符串`"\"`会出错。这`@"\"`是正确的，因为`@`（文字）忽略了该转义并将其视为正常字符。

[在这里](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)查看更多

# c++ - 真的很想解决地图的“常量”问题

> ID：10778803
> 
> 赞同：2
> 
> 时间：2012-05-28T02:38:23.837
> 
> 标签：c++, dictionary, operator-overloading, constants

> **可能重复：**
> [为什么 STL 映射的 [] 运算符不是 const？](https://stackoverflow.com/questions/1474894/why-isnt-the-operator-const-for-stl-maps)

我把它归结为（我认为是）它最简单的形式：

```
#include <iostream>
#include <map>
#include <vector>

class NumberHolder
{   
public:
    NumberHolder( const std::string aKey, const double aNumber );
    void printSmallestMappedNumber( const unsigned int theIndex ) const;
private:
    std::vector< std::map< std::string, double> > theNamedNumberMapVector;
};

NumberHolder::NumberHolder( const std::string key, const double aNumber )
{
    std::map<std::string, double> aTempMap;
    aTempMap[key] = aNumber;
    theNamedNumberMapVector.push_back(aTempMap);
}

void NumberHolder::printSmallestMappedNumber( const unsigned int theIndex ) const
{
    std::map<std::string, double>& aSpecificMap = theNamedNumberMapVector[theIndex];
    std::cout << aSpecificMap["min"] << std::endl;
}

int main(int argc, char* argv[])
{
    NumberHolder aTaggedNumberHolder("min", 13);
    aTaggedNumberHolder.printSmallestMappedNumber( 0 );
    return 0;
} 
```

我有一个充满地图的矢量，每张地图都充满了（字符串）“标记”数字。我试图尽可能严格地控制对所涉及变量的可见性/可变性的访问。

无论如何，编译器失败并出现此错误

> 将对类型 'std::map' 的引用绑定到类型为 'const std::map, double, std::less >, std::allocator, double> > >' 的值丢弃限定符

我的第一次（未成熟）尝试是制作地图 const ...，因为我没有修改地图，只是从中检索一个值：

```
const std::map<std::string, double>& aSpecificMap = theNamedNumberMapVector[theIndex]; 
```

然后向我展示了这个公认的更短但实际上更令人困惑的错误：

```
No viable overloaded operator[] for type 'const std::map<std::string, double>' 
```

在以下行上：

```
 std::cout << aSpecificMap["min"] << std::endl; 
```

然而，也许是因为我一直试图解开这个问题，我的解决方案似乎非常非常糟糕：

```
std::map<std::string, double>& aSpecificMap = const_cast<std::map<std::string, double>&>(theNamedNumberMapVector[theIndex]); 
```

const_casting 去掉 [const derp] 限定符可以解决我的问题，但我真的很想清楚地了解到底发生了什么。我猜编译器对我对地图的访问感到不满（在我的第二次尝试中，上面），并认为我会使用和滥用我对地图内容的访问。我真的很想/需要能够向其他人解释这样的事情，以及尽量不滥用语言并最终以 The Daily WTF 告终，因为，你知道，羞耻之类的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T02:55:01.370

如果您查看 map 的[operator[]](http://en.cppreference.com/w/cpp/container/map/operator_at)的声明，您会发现它`const`不合格，这就是为什么不能在 a 上调​​用它的原因`const std::map<std::string, double>`。它不是 const 的原因是因为如果映射中不存在键，它会创建它。您应该改为使用[`find`](http://en.cppreference.com/w/cpp/container/map/find)or[`at`](http://en.cppreference.com/w/cpp/container/map/at)来获取元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T02:53:37.483

`map<>::operator[]`如果它们尚不存在，则在地图中创建元素，这就是为什么它不允许在`const`对象上。你应该使用`find()`.

（一些正确链接的问题已经回答了这个问题：例如[，为什么 STL 地图的 [] 运算符不是 const ？](https://stackoverflow.com/questions/1474894/why-isnt-the-operator-const-for-stl-maps) -我将投票关闭它作为重复项）

# backbone.js - Backbone.js 是否适用于 IE6？在尝试使用 Backbone.js 支持 IE6 时需要小心处理哪些类型的事情？

> ID：10778807
> 
> 赞同：3
> 
> 时间：2012-05-28T02:39:09.130
> 
> 标签：backbone.js, internet-explorer-6

我完全理解 IE6 到现在已经快 10 年了，但是我的创业公司必须在中国推出一个产品，它必须支持这里企业中所有使用 IE6 的计算机。我的问题是，有没有人在 IE6 上使用 Backbone.js 的经验，如果有，在 IE6 浏览器上使用 Backbone 是否现实？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T21:39:11.750

[给出这样的](https://stackoverflow.com/questions/7550912/backbone-js-router-doesnt-work-on-ie6)答案，我不会抱太大希望。

如果您正在为 IE6 编写代码，则需要寻找对其有明确支持的东西，因为否则您几乎肯定会遇到过去几年编写的几乎所有 Javascript 的问题。

# java - 如何查看eclipse中打印的内容？爪哇

> ID：10778808
> 
> 赞同：1
> 
> 时间：2012-05-28T02:39:09.843
> 
> 标签：java, eclipse

```
 class hello{
        public static void main(String[] arguments){
        System.out.println("Hello World!");
        System.out.println("New Line.");
    }
} 
```

以上是我的代码，eclipse运行它没有错误报告。它应该打印出 Hello World！和新线。但是我怎么能看到这些内容呢？我在eclipse中找不到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T02:40:56.463

做你的课`public`。它没有运行它，因为它不公开。

做一个窗口-> 显示视图-> 控制台，你应该能够看到它。

# lua - 如何将方法添加到表类型？

> ID：10778812
> 
> 赞同：8
> 
> 时间：2012-05-28T02:39:20.740
> 
> 标签：lua, metaprogramming

如何将方法添加到表类型？我正在尝试编写一种搜索表值的方法。到目前为止我有。

```
function table:contains(value)
  for _, v in ipairs(self) do
    if v == value then return true end
  end
  return false
end 
```

然而，当我尝试执行以下操作时。

```
t = {'four', 'five', 'six'}
t:contains('five') 
```

我得到了错误。

```
stdin:1: attempt to call method 'contains' (a nil value) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T07:02:14.827

正如其他人所说，您`t`是一个简单的表，它仅包含以下键值对：`[1]='four'`, `[2]='five'`, `[3]='six'`。

如果要“扩展”`t`以能够从`table`模块访问功能，则必须设置一个`__index`指向`table`模块的元表。我使用以下功能轻松访问它：

```
function T(t)
    return setmetatable(t, {__index = table})
end 
```

然后您可以按如下方式使用它（感谢语法糖不需要括号）：

```
t = T{'four', 'five', 'six'}
t:insert('seven')
print(t:contains('seven')) --> true 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-28T03:38:37.623

所有表都没有单一的元*表*。与字符串和数字不同，每个表都有自己的元表。

只需为这些事情创建一个免费函数而不是“成员”函数。并非所有内容都需要全部为 OOP`:`等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T03:38:53.807

您已向`table`库中添加了一个方法，但您没有为 table 提供任何元表`t`。`table`和之间没有自动连接`t`。

# java - 无法将 java.lang.String 类型的属性值转换为所需的 double 类型

> ID：10778822
> 
> 赞同：9
> 
> 时间：2012-05-28T02:42:13.587
> 
> 标签：java, spring-mvc

每当我在文本框中输入一个空字符串并尝试保存它时，我都会遇到这个错误我有这个错误：

```
Failed to convert property value of type java.lang.String to 
   required type double for property customerAcctSetting.maxAllowableAmount; 
nested exception is java.lang.IllegalArgumentException: Cannot convert value of 
    type [java.lang.String] to required type [double] for 
    property maxAllowableAmount:
PropertyEditor [bp.ar.util.NumberFormatUtil$CustomerDoubleEditor] returned
    inappropriate value 
```

但是，当我输入无效的数字格式（例如“ddd”）时，会出现以下错误：

```
Failed to convert property value of type java.lang.String to required
    type double for property customerAcctSetting.maxAllowableAmount; 
nested exception is java.lang.NumberFormatException: For input string: "ddd" 
```

我的控制器中有这个活页夹：

```
@InitBinder
public void initBinder(WebDataBinder binder) {
    NumberFormatUtil.registerDoubleFormat(binder);
} 
```

我有一个`NumberFormatUtil.java`实现静态函数的类`registerDoubleFormat(binder)`：

**`NumberFormatUtil.java`**

```
public static void registerDoubleFormat (WebDataBinder binder) {
    binder.registerCustomEditor(Double.TYPE, new CustomerDoubleEditor());
}

private static class CustomerDoubleEditor extends PropertyEditorSupport{    
    public String getAsText() { 
        Double d = (Double) getValue(); 
        return d.toString(); 
    } 

    public void setAsText(String str) { 
        if( str == "" || str == null ) 
            setValue(0); 
        else 
            setValue(Double.parseDouble(str)); 
    } 
} 
```

我使用的是 Spring 3.0.1。我对java和其他相关技术（如spring）非常陌生。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T08:13:51.537

在这里更改您的 setAsText() 方法，

```
 public void setAsText(String str) { 
       if(str == null || str.trim().equals("")) {
           setValue(0d); // you want to return double
       } else {
           setValue(Double.parseDouble(str)); 
       }
  } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T02:57:21.023

我不知道这是否是您的问题的原因，但这`str == ""`是一个错误。

如果您正在测试一个 String 是否为空，请使用`str.isEmpty()`or`str.length() == 0`甚至`"".equals(str)`.

操作员测试两个`==`字符串是否是同一个对象。这不符合您的要求，因为您正在运行的应用程序中可能有许多不同的 String 实例代表相同的字符串。在这方面，空字符串与其他字符串没有什么不同。

* * *

即使这不是您的问题的原因，您也应该修复此错误，并记下不要用于`==`测试字符串。（或者至少，除非您采取了特殊步骤以确保它始终有效......这超出了本问答的范围。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-28T08:53:10.280

至于空字符串，我想问题是你的**0**被转换为*Integer*，而不是*Double*所以你必须使用后缀*d* : **0.0d** ;

至于 NumberFormatException，我没有看到转换器无法转换它的任何问题。如果您想为转换错误提供自定义消息，您应该按照[DefaultMessageCodeResolver](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/validation/DefaultMessageCodesResolver.html)的语义将该消息放入消息属性文件中， 我认为它类似于`typeMismatch.java.lang.Double = "invalid floating point number"` 并且在您的 bean 配置中具有消息源

```
 <bean id="messageSource"
    class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basenames">
        <list>
            <value>exceptions</value><!--- that means you have exceptions.properties in your class path with the typeMismatch string specified above-->
        </list>
    </property>
    </bean> 
```

此外，属性编辑器的概念现在已经过时，[带有转换器的新 API](http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/validation.html#core-convert) 是可行的方法，因为 spring 不会为使用这种方法编辑的任何属性创建一堆帮助对象（属性编辑器）。

# python - 在python中将可变对象锁定为不可变

> ID：10778824
> 
> 赞同：11
> 
> 时间：2012-05-28T02:42:31.657
> 
> 标签：python, immutability

如何在 Python 中“锁定”对象？

说我有：

```
class Foo:
  def __init__(self):
    self.bar = []
    self.qnx = 10 
```

我会尽可能多地修改 foo ：

```
foo = Foo()
foo.bar.append('blah')
foo.qnx = 20 
```

但是我希望能够“锁定”它，这样当我尝试

```
lock(foo)
foo.bar.append('blah')  # raises some exception.
foo.qnx = 20            # raises some exception. 
```

这在 Python 中可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-28T03:08:39.680

这是一个简单的方法。

```
class Foo(object):
    def __init__(self):
        self._bar = []
        self._qnx = 10
        self._locked= False

    @property
    def locked(self):
        return self._locked

    def lock(self):
        self._locked = True

    @property
    def bar(self):
        if self.locked:
            return tuple(self._bar)
        return self._bar

    @property
    def qnx(self):
        return self._qnx
    @qnx.setter
    def qnx(self,val):
        if self.locked:
            raise AttributeError
        self._qnx = val

def lock(obj):
    obj.lock() 
```

# python - 如何将 urlencode 更改为 python 字典

> ID：10778828
> 
> 赞同：2
> 
> 时间：2012-05-28T02:43:10.550
> 
> 标签：python, django, urlencode

我从 POST 中获得了数据，例如

```
first_name=jon&nick_name=harry 
```

如何将其更改为 python 字典，例如：

```
{
    "first_name":"jon",
    "nick_name":"harry"
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T02:58:58.887

```
>>> urlparse.parse_qs("first_name=jon&nick_name=harry")
{'nick_name': ['harry'], 'first_name': ['jon']} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T02:57:22.377

如果您相信 URL 参数的格式总是正确的，那么这将是一个最小的解决方案：

```
dict(pair.split("=") for pair in urlargs.split("&")) 
```

但是，在可以公开访问的代码中，您可能希望使用一个进行错误检查的库。如果您使用的是 Django，您可能已经可以在类字典对象 HttpRequest.POST 中访问它们。

# ruby-on-rails - 在 Rails 应用程序中模块化 javascript 代码

> ID：10778830
> 
> 赞同：0
> 
> 时间：2012-05-28T02:43:36.630
> 
> 标签：ruby-on-rails, commonjs

我正在尝试将我们的 Rails Web 应用程序移植到 ember.js（我们目前在服务器端完成大部分渲染视图的工作），我想知道如何实现 javascript 代码的完全模块化。到目前为止，我最喜欢的插件是 sprockets-commonjs，它会自动为所有名为 .module.js 的文件创建 commonjs 模块。这将解决我们的大部分问题，除了外部库，它仍然会在代码中声明全局变量。

我能想到的唯一解决方案是为每个库创建 common.js 模块。

例如：假设我希望能够将 Ember.js 作为 Common.js 模块导入。然后，我将创建一个名为 vendor/modules/ember.module.js 的文件，其中包含以下内容：

```
//= require ember

module.exports = Ember; 
```

然后我会将 ember_module（连同其他模块包装器）导入应用程序并使用它们。

```
//= require_tree vendor/modules

var ember = require("vendor/modules/ember"); 
```

这个解决方案有点老套，但它会改进代码的模块化。有没有更好的方法来达到同样的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:51:59.990

在您的`ember.module.js`中，尝试使用`//= include ember`而不是`require`. 该`require`指令只是将文件添加为依赖项；该`include`指令实际上将包含文件内容。（参见[https://github.com/sstephenson/sprockets#sprockets-directives](https://github.com/sstephenson/sprockets#sprockets-directives)）。

否则你的解决方案应该工作:)

# java - 按下按钮时显示返回值？

> ID：10778831
> 
> 赞同：1
> 
> 时间：2012-05-28T02:43:55.987
> 
> 标签：java, awt

我这里有一些代码可以计算数组的 maxValue：

```
 public static int getMaxValue(int[] marks){
     int maxValue = marks[0];
     for(int i=1;i < marks.length;i++){
         if(marks[i] > maxValue){
             maxValue = marks[i];
         }
     }
     return maxValue;
 } 
```

我想在用户按下按钮时显示最大值。这是我到目前为止所拥有的，但它不起作用：

```
private void analyzeButtonActionPerformed(java.awt.event.ActionEvent evt) {

    maxValue mv = new maxValue ();
    analyzeTextArea.setText("Maximum:" + maxValue.toString());

} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:50:47.233

由于您的方法是静态的，您可以简单地使用包含它的类的名称来调用它。

```
analyzeTextArea.setText("Maximum:" + YourClassNameHere.getMaxValue()); 
```

你不能实例化一个方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T02:51:57.203

我想你正在寻找这样的东西......

```
private void analyzeButtonActionPerformed(java.awt.event.ActionEvent evt) {
    analyzeTextArea.setText("Maximum:" + getMaxValue(arrayOfValues));
} 
```

要调用方法，除了调用之外你不需要做任何事情`methodName(inputValues)`——你不能通过做来创建方法的实例`new methodName()`

如果该方法在不同的类中，并且它是`static`像您的情况一样的方法，您可以这样做......

```
private void analyzeButtonActionPerformed(java.awt.event.ActionEvent evt) {
    analyzeTextArea.setText("Maximum:" + MyClass.getMaxValue(arrayOfValues));
} 
```

否则，如果该方法在不同的类中而不是`static`，那么您首先创建该类的实例，然后调用该方法...

```
private void analyzeButtonActionPerformed(java.awt.event.ActionEvent evt) {
    MyClass example = new MyClass();
    analyzeTextArea.setText("Maximum:" + example.getMaxValue(arrayOfValues));
} 
```

# javascript - 临时数据在 mvc3 中的 javascript 中不起作用？

> ID：10778833
> 
> 赞同：0
> 
> 时间：2012-05-28T02:44:14.653
> 
> 标签：javascript, asp.net-mvc-3, tempdata

当我开始使用 asp mvc3 时，我正在将我的脚本放在我的视图文件 (cshtml) 中。我这样做是这样的：在每个 cshtml 文件的底部，我放了我的脚本，....其中一些脚本使用 TempData，一切正常。

但后来有人告诉我，让用户看到我如何编写脚本是一个坏习惯。他们说我应该创建一个 js 文件并将我所有的脚本放在那里，我应该像这样调用它们：

```
 <script src="@Url.Content("~/Scripts/myOwnLocalScripts.js")" type="text/javascript"></script>. 
```

所以我这样做了，但似乎我的脚本现在无法读取 TempData 甚至会话 cookie。我的脚本中有这样一行：

```
 var currentEmployee = '@System.Web.HttpContext.Current.Session["UserNumber"]';
 $('.textBoxEmployeeNumber input[id="EmployeeId"]').val(currentEmployee); 
```

它应该显示一个用户编号，但它显示“System.Web.HttpContext.Current.Session[“UserNumber”]”作为一个字符串......

此外，我的脚本中有这样的代码：

```
 if ('@TempData["successMessage"]' != "" || '@TempData["successMessage"]' != null) {
    function newAlert(type, message) {
        $("#alert-area").append($("<div class='alert alert-success " + type + " fade in' data-alert><p><b> " + message + " </b></p></div>"));
        $(".alert-success").delay(4000).fadeOut("slow", function () { $(this).remove(); });
    }
    newAlert('success', '@TempData["successMessage"]');
} 
```

它应该仅在 Tempdata[successMessage] 包含一个值时显示，但它会在每次页面加载时一直显示，并将 '@TempData["successMessage"]' 显示为字符串...

我的错误可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T03:31:21.947

该`@...`语法仅在 Razor ( `.cshtml`) 文件中在服务器端进行解释。在 JavaScript ( `.js`) 文件中，`@`并不特殊——在这种情况下，它只是字符串文字中的另一个字符。

至于：

> 然后有人告诉我，让用户看到我如何编写脚本是一个坏习惯

这不是单独文件的实际原因`.js`——如果浏览器可以读取 JavaScript，那么用户也可以读取它。

它们实际上有用的是让您成为[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，一次定义通用函数以包含在多个视图中，并允许浏览器在视图更新时缓存脚本。

因此，如果这些是常见任务，请在`.js`可从以下位置调用的 中为它们定义函数`.cshtml`：

`.js`：

```
function setCurrentEmployee(currentEmployee) {
    $('#EmployeeId').val(currentEmployee);
}

function newAlert(type, message) {
    if (message != "" || message != null) {
        $("#alert-area").append($("<div class='alert alert-success " + type + " fade in' data-alert><p><b> " + message + " </b></p></div>"));
        $(".alert-success").delay(4000).fadeOut("slow", function () { $(this).remove(); });
    }
} 
```

`.cshtml`：

```
<script>
    setCurrentEmployee('@System.Web.HttpContext.Current.Session["UserNumber"]');
    newAlert('success', '@TempData["successMessage"]');
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:36:44.803

如果您不想在 cshtml 中使用内联 javascript，请使用 JavaScriptModel ( [http://jsm.codeplex.com](http://jsm.codeplex.com) )。

您只需在控制器操作中编写以下代码：

```
this.AddJavaScriptVariable("CurrentEmployee", System.Web.HttpContext.Current.Session["UserNumber"]);
this.AddJavaScriptVariable("SuccessMessage", successMessage);
this.AddJavaScriptFunction("ReadyFunction"); 
```

.js：

```
var CurrentEmployee;
var SuccessMessage;
function ReadyFunction()
{
    setCurrentEmployee(CurrentEmployee);
    newAlert("success" SuccessMessage);
} 
```

或者，您也可以在控制器操作中编写以下代码：

```
this.AddJavaScriptFunction("setCurrentEmployee", System.Web.HttpContext.Current.Session["UserNumber"]);
this.AddJavaScriptFunction("newAlert", "success", successMessage); 
```

但我会向您推荐第一个解决方案，因为您可以在 javascript 的其他地方重用 currentEmployee。

# sms - SMS PDU 级联

> ID：10778834
> 
> 赞同：0
> 
> 时间：2012-05-28T02:44:34.243
> 
> 标签：sms

我正在使用短信连接。我的 GSM 调制解调器支持 PDU 模式。当我使用 05 的 IEI 来使用某个端口时，我的 UDH 工作正常，但后来我尝试使用用于连接的 IEI 00。我收到两条消息合并为一条消息没有问题，但我收到不可读的奇怪字符的短信。下面是我第一部分的 PDU。

> 0041000B819062972624F60000A0050003A1020154741914AFA7C76B9058FEBEBB41E6371EA4AEB7E173D0DB5E983E8E832881DD6E741E4F7D905A2A2CBA0783D3D5E83C4F2F7DD0D32BFF12075BD0D9F83DEF6B21C44479741ECB03E0F22BFCF2E10155D06C5EBE9F11A2496BFEF6E90F98D07A9EB6DF81CF4B697E5203ABA0C6287F57910F97D7681A8E832285E4F8FD720B1FC7D7783CC6F

这是第二部分：

> 0041000B819062972624F600007B050003A102027890BADE86CF416F7B590EA2A3CB2076589F0791DF6717888A2E83E2F5F4780D12CBDF7737C8FCC683D4F5367C0E7ADBCB72101D5D06B1C3FA3C88FC3EBB4054741914AFA7C76B9058FEBEBB41E6371EA4AEB7E173D0DB5E9683E8E832881DD6E741E4F7D905

非常感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:26:33.440

您是否记得用额外的位填充您的 UDH，以便您的 UD 七重奏开始于七重奏边界？

例如，如果您的 UDH 中有 6 个八位字节（最常见），等于 48 位，那么您必须再添加 1 位，以便 GSM-7 编码字符从 septet 边界开始（49 位是 7 个 septets）。

阅读[http://mobiletidings.com/2009/02/18/combining-sms-messages/](http://mobiletidings.com/2009/02/18/combining-sms-messages/)了解更多信息。

# php - 找不到实体类的映射文件

> ID：10778846
> 
> 赞同：0
> 
> 时间：2012-05-28T02:47:03.390
> 
> 标签：php, orm, symfony, doctrine

我对 Symfony2 很陌生，我在我的项目中创建了一个实体类，但我得到了一个错误。我用谷歌搜索了很多解决方案，但找不到。这是我的控制器

```
<?php
namespace IDP\Bundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use IDP\Bundle\Entity\Portfolio;

class PortfolioController extends Controller {

public function indexAction() {
    $product = $this->getDoctrine()
    ->getRepository('IDPBundle:Portfolio')
    ->find(1);
    return $this->render('IDPBundle:Portfolio:index.html.twig');
} 
```

}

我在实体文件夹中的 Portfolio.php 就像

```
<?php

namespace IDP\Bundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
/**
* IDP\Bundle\Entity\Portfolio
* @ORM\Table(name="pm_portfolios")
*/
class Portfolio
{
/**
 * @var integer $id
 */
private $id;

/**
 * @var integer $user_id
 */
private $user_id;

/**
 * @var string $portfolio_name
 */
private $portfolio_name;

/**
 * @var text $description
 */
private $description;

/**
 * @var string $permalink
 */
private $permalink;

/**
 * @var string $sharing_code
 */
private $sharing_code;

/**
 * @var boolean $shared
 */
private $shared;

/**
 * @var integer $shared_portfolio_calls
 */
private $shared_portfolio_calls;

/**
 * @var integer $patentgroup_id
 */
private $patentgroup_id;

/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set user_id
 *
 * @param integer $userId
 */
public function setUserId($userId)
{
    $this->user_id = $userId;
}

/**
 * Get user_id
 *
 * @return integer 
 */
public function getUserId()
{
    return $this->user_id;
}

/**
 * Set portfolio_name
 *
 * @param string $portfolioName
 */
public function setPortfolioName($portfolioName)
{
    $this->portfolio_name = $portfolioName;
}

/**
 * Get portfolio_name
 *
 * @return string 
 */
public function getPortfolioName()
{
    return $this->portfolio_name;
}

/**
 * Set description
 *
 * @param text $description
 */
public function setDescription($description)
{
    $this->description = $description;
}

/**
 * Get description
 *
 * @return text 
 */
public function getDescription()
{
    return $this->description;
}

/**
 * Set permalink
 *
 * @param string $permalink
 */
public function setPermalink($permalink)
{
    $this->permalink = $permalink;
}

/**
 * Get permalink
 *
 * @return string 
 */
public function getPermalink()
{
    return $this->permalink;
}

/**
 * Set sharing_code
 *
 * @param string $sharingCode
 */
public function setSharingCode($sharingCode)
{
    $this->sharing_code = $sharingCode;
}

/**
 * Get sharing_code
 *
 * @return string 
 */
public function getSharingCode()
{
    return $this->sharing_code;
}

/**
 * Set shared
 *
 * @param boolean $shared
 */
public function setShared($shared)
{
    $this->shared = $shared;
}

/**
 * Get shared
 *
 * @return boolean 
 */
public function getShared()
{
    return $this->shared;
}

/**
 * Set shared_portfolio_calls
 *
 * @param integer $sharedPortfolioCalls
 */
public function setSharedPortfolioCalls($sharedPortfolioCalls)
{
    $this->shared_portfolio_calls = $sharedPortfolioCalls;
}

/**
 * Get shared_portfolio_calls
 *
 * @return integer 
 */
public function getSharedPortfolioCalls()
{
    return $this->shared_portfolio_calls;
}

/**
 * Set patentgroup_id
 *
 * @param integer $patentgroupId
 */
public function setPatentgroupId($patentgroupId)
{
    $this->patentgroup_id = $patentgroupId;
}

/**
 * Get patentgroup_id
 *
 * @return integer 
 */
public function getPatentgroupId()
{
    return $this->patentgroup_id;
}
} 
```

我得到的错误是

```
 No mapping file found named 'IDP.Bundle.Entity.Portfolio.php' for class 'IDP\Bundle\Entity\Portfolio'. 
```

我错过了什么吗？谢谢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:48:25.753

您需要将 @ORM\Entity 添加到您的 Entity 类中。尝试：

```
<?php

namespace IDP\Bundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
* IDP\Bundle\Entity\Portfolio
*
* @ORM\Entity
* @ORM\Table(name="pm_portfolios")
*/
class Portfolio
{ 
```

您还需要将 ORM 映射添加到您的投资组合实体的每个属性（请参阅[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#annref-列](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#annref-column)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T17:03:03.730

我遇到了同样的错误，并找到了同时使用注释和 yml 的原因..一次只使用一个...

# android - 请帮我在android中旋转动画？

> ID：10778857
> 
> 赞同：0
> 
> 时间：2012-05-28T02:49:28.180
> 
> 标签：android, animation

我需要一些示例旋转动画来完成我的项目。动画可以旋转图像 360 度....你能分享一些例子吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T03:36:48.877

你可以 [在android中使用Rotate3dAnimation来做到这一点](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/animation/Rotate3dAnimation.html)

[请参阅此示例](http://samir-mangroliya.blogspot.in/p/android-rotation-animation.html)

# android - 如何在时间表中显示数据？

> ID：10778858
> 
> 赞同：0
> 
> 时间：2012-05-28T02:49:28.977
> 
> 标签：android, sqlite, timetable

我和一个朋友正在尝试制作火车时刻表，但我们现在陷入了如何显示 Sqlite 数据库中的数据。我们可以显示数据，但不能显示我们想要的方式。

我画了一幅草图来展示我们想要做什么。

[http://i.imgur.com/MtaP5.png](http://i.imgur.com/MtaP5.png)

在“站”表上方垂直滚动时，“站”和“时间”都应垂直滚动，但在“时间”上方滚动时，只有“时间”应水平滚动（站应保持不变）。

有谁知道我们应该如何做到这一点（我们是编程和android编程的初学者）？

谢谢 ：） ！

编辑：

我找到了一个可以做我想做的应用程序，这样每个人都更容易理解

[Google Play - 悉尼铁路测试版](https://play.google.com/store/apps/details?id=com.chingy1788.sydney_rail)

（它不允许我放 2 个链接，所以我删除了 http） i.stack.imgur.com/ktS8J.jpg

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:32:14.107

对于垂直滚动，您可以使用`ScrollView`（[http://developer.android.com/reference/android/widget/ScrollView.html](http://developer.android.com/reference/android/widget/ScrollView.html)）

我不确定为什么滚动“Stations”时需要滚动“Times”，但是您可以使用以这种方式修改的[Horizo​​ntalScrollView 同步 ScrollView 滚动位置 - android](https://stackoverflow.com/questions/3948934/synchronise-scrollview-scroll-positions-android)

在 OnScrollChanged 方法中，您可以使用 Horizo​​ntalScrollView 的 scrollTo 方法滚动到所需位置。

# xcode - Xcode：将 WorkspaceSettings.xcsettings 添加到源代码管理

> ID：10778859
> 
> 赞同：10
> 
> 时间：2012-05-28T02:49:43.617
> 
> 标签：xcode, version-control

在 Xcode 中，在 File > Workspace Settings... 中更改的设置会为每个 Xcode 用户单独存储。我希望为所有用户设置相同的工作区设置。我的目标是将构建的目标复制到相同的相对目录中。

默认情况下，工作区设置存储在：

> [工作空间名称].xcworkspace/xcuserdata/[用户名].xcuserdatad

我希望能够在所有用户之间共享它，以便我可以将其添加到版本控制中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T11:47:04.630

我们最终编写了一个小型 bash 脚本，该脚本执行四个默认写入命令来设置正确的设置

```
scriptPath="$(dirname "$0")"
cd "$scriptPath"
fullPath=$(pwd)
settingsFile="$fullPath"/<project>.xcworkspace/xcuserdata/$USER.xcuserdatad/WorkspaceSettings.xcsettings

cp -f "$settingsFile" "$settingsFile.plist"

defaults write "$settingsFile" BuildLocationStyle CustomLocation
defaults write "$settingsFile" CustomBuildLocationType RelativeToWorkspace
defaults write "$settingsFile" CustomBuildProductsPath "Build/Products"
defaults write "$settingsFile" CustomBuildIntermediatesPath "Build/Intermediates"

cp -f "$settingsFile.plist" "$settingsFile" 
```

# java - 如何传递不同的枚举作为参数？

> ID：10778861
> 
> 赞同：2
> 
> 时间：2012-05-28T02:50:29.937
> 
> 标签：java, enums

我有一些不同的枚举，我想创建一个函数，如果字符串是枚举变量名之一（不确定它是否真的可以理解），它可以查找或不查找。

```
enum MYENUM {
  ONE,
  TWO;
}

enum MYENUM1 {
  RED,
  GREEN;
} 
```

我想这样做（这只是示例，我的枚举更复杂）：

```
if(isInEnum(MYENUM, "one")) ...
if(isInEnum(MYENUM1, "one")) ... 
```

`isinEnum`功能（代码不好，仅供理解）：

```
boolean isinEnum(enum enumeration, String search) {
  for(enum en : enumeration.values()){
    if(en.name().equalsIgnoreCase(search)) return true;
  }
  return false;
} 
```

这种事情可能吗？

根据我在网上看到的内容，我认为不是，但也许有人有解决方案来做到这一点，而不是为每个枚举创建一个循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:00:08.213

这可能不是最干净的解决方案，因为它在正常程序流中使用异常，但它肯定很短，因为它避免了循环：

```
boolean isinEnum(Class<T> enumClass, String search) {
    try {
        Enum.valueOf(enumClass, search);
        return true;
    } catch (IllegalArgumentException iae) {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T03:03:48.527

这是一种使用反射的方法...

```
public class EnumFinder {

    public static <T extends Enum<T>>  boolean isInEnum(Class<T> clazz, String name) {
        for (T e : clazz.getEnumConstants()) {
            if (e.name().equalsIgnoreCase(name)) {
                return true;
            }
        }

        return false;
    }

    public static void main(String[] argv) {
        System.out.println(isInEnum(MYENUM.class, "one"));   // true
        System.out.println(isInEnum(MYENUM1.class, "one"));  // false
    }
} 
```

您在回答中的尝试实际上非常接近。唯一的区别是 Java 需要一个定义类的实例，以便在运行时动态地回答有关未知类型的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T02:59:34.157

你的问题有点难以理解，但我想我明白了它的要点。

你可能会让自己变得比必要的更艰难。

看看 Java 的映射接口/数据结构（在 java.util 中），看看这是否能让您更接近您的解决方案：

[java.util 接口映射<K,V>](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)

如果没有，请重新发布您所做的任何腿部工作，我会看看是否可以进一步帮助您。;-)

# java - Android项目无法在eclipse中引用其他项目

> ID：10778865
> 
> 赞同：6
> 
> 时间：2012-05-28T02:51:29.323
> 
> 标签：java, android, eclipse

A 有一个名为 TestAndroid 的 android 项目。我可以在我的安卓设备上运行它。但是我希望能够使用来自另一个项目的代码。所以我去我的构建路径并添加项目测试。测试是使用 java6 的标准 java 项目。Test 项目有一个类Test，它只是一个空类。

不过，这就是它搞砸的地方，当我在 TestAndroid 中创建一个 Test 实例时，我得到一个运行时错误。这是我从 logcat 得到的错误。

```
05-27 21:47:49.976: E/dalvikvm(27493): Could not find class 'com.tests.eclipseisbroken.Test', referenced from method com.tests.eclipseisbroken.TestAndrodiActivity.onCreate
05-27 21:47:49.986: W/dalvikvm(27493): VFY: unable to resolve new-instance 11 (Lcom/tests/eclipseisbroken/Test;) in Lcom/tests/eclipseisbroken/TestAndrodiActivity;
05-27 21:47:49.986: D/dalvikvm(27493): VFY: replacing opcode 0x22 at 0x0008
05-27 21:47:49.986: D/dalvikvm(27493): VFY: dead code 0x000a-000d in Lcom/tests/eclipseisbroken/TestAndrodiActivity;.onCreate (Landroid/os/Bundle;)V
05-27 21:47:50.026: D/AndroidRuntime(27493): Shutting down VM
05-27 21:47:50.046: W/dalvikvm(27493): threadid=1: thread exiting with uncaught exception (group=0x40028a00)
05-27 21:47:50.056: E/AndroidRuntime(27493): FATAL EXCEPTION: main
05-27 21:47:50.056: E/AndroidRuntime(27493): java.lang.NoClassDefFoundError: com.tests.eclipseisbroken.Test
05-27 21:47:50.056: E/AndroidRuntime(27493):    at com.tests.eclipseisbroken.TestAndrodiActivity.onCreate(TestAndrodiActivity.java:16)
05-27 21:47:50.056: E/AndroidRuntime(27493):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1065)
05-27 21:47:50.056: E/AndroidRuntime(27493):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2745)
05-27 21:47:50.056: E/AndroidRuntime(27493):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2797)
05-27 21:47:50.056: E/AndroidRuntime(27493):    at android.app.ActivityThread.access$2300(ActivityThread.java:135)
05-27 21:47:50.056: E/AndroidRuntime(27493):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2132)
05-27 21:47:50.056: E/AndroidRuntime(27493):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-27 21:47:50.056: E/AndroidRuntime(27493):    at android.os.Looper.loop(Looper.java:143)
05-27 21:47:50.056: E/AndroidRuntime(27493):    at android.app.ActivityThread.main(ActivityThread.java:4914)
05-27 21:47:50.056: E/AndroidRuntime(27493):    at java.lang.reflect.Method.invokeNative(Native Method)
05-27 21:47:50.056: E/AndroidRuntime(27493):    at java.lang.reflect.Method.invoke(Method.java:521)
05-27 21:47:50.056: E/AndroidRuntime(27493):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
05-27 21:47:50.056: E/AndroidRuntime(27493):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
05-27 21:47:50.056: E/AndroidRuntime(27493):    at dalvik.system.NativeStart.main(Native Method) 
```

我认为我的 Eclipse 安装一定有问题，因为我有一个项目，我必须引用另一个项目并且它有效。我宁愿现在修复它，完全重新安装 eclipse 和我所有的插件。如果有人知道出了什么问题并可以帮助我，我将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T03:16:56.007

假设您使用最新的 Android SDK 和 ADT 版本，并且您想在 android 项目**A中添加一个标准的 java 项目****B**作为依赖项：

 **1.  将项目 B 添加到项目 A 的构建路径：`Properties -> Java Build Path -> Projects -> Add ...`
2.  在项目 A 的构建路径导出列表中勾选项目 B：`Properties -> Java Build Path -> Order and Export`

现在您应该能够在您的 Android 项目中使用标准 java 库中的类并在 Eclipse 中构建/运行/调试它。

希望这可以帮助。

更新：上面的操作只是添加了一行`.classpath`

```
<classpathentry combineaccessrules="false" exported="true" kind="src" path="/projB"/> 
```**

# java - 如何获取引用的项目或库的名称？

> ID：10778866
> 
> 赞同：1
> 
> 时间：2012-05-28T02:51:50.377
> 
> 标签：java, eclipse, eclipse-plugin

我目前正在为 Eclipse 开发一个插件，用于分析工作区中 Java 和插件项目的依赖关系和引用。

但是，我终其一生都无法找到一种方法来获取在 Classpath Entries 中找到的引用项目或库的名称。

这是我所拥有的（摘自更长的方法）：

```
IJavaProject j= JavaCore.create(project);          //project is an IProject
try {
    IClasspathEntry[] classpath= j.getRawClasspath();

    // Get required Libraries and Projects
    for (IClasspathEntry entry : classpath) {
        switch (entry.getEntryKind()) {
        case IClasspathEntry.CPE_LIBRARY: {
            //Retrieve name of the Library
            break;              
            }
        case IClasspathEntry.CPE_PROJECT: {
            //Retrieve name of the Project
            break;
        }
    }
} catch [...] 
```

有谁知道如何在标记位置获取名称，或者有更好的方法来检索它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T04:43:44.797

在咨询了别人之后，我终于找到了解决方案：

```
switch (entry.getEntryKind()) {
    case IClasspathEntry.CPE_LIBRARY: {
        String name = entry.getPath().segment(0);
        /* Further processing for a Library
        *...
        */
        break;              
        }
    case IClasspathEntry.CPE_PROJECT: {
        String name = entry.getPath().segment(0);
        /* Further processing for a Project
        *...
        */
        break;
    } 
```

# jquery - 使用 jQuery ajax .get() 加载时，cftextarea 控件不显示

> ID：10778869
> 
> 赞同：1
> 
> 时间：2012-05-28T02:53:01.197
> 
> 标签：jquery, ajax, forms, coldfusion

我有一个 CFTEXTAREA 字段，它在单独查看时表现正常，但是当它通过 jQuery get() 方法加载时，控件不会出现。

即cftextarea 位于产品详细信息窗格中。页面左侧是要编辑的产品列表。点击一个

*   元素，通过 ajax 和 jquery 加载产品详细信息窗格（模拟老式的 href）

    内容正在加载，但工具栏没有出现。单独点击页面，工具栏显示。

    这是jquery（工作正常）

    ```
    $("#productList li").click(function(event) {
    $.get(
        'editProduct.cfm',
        {id:$(this).attr('id')},
        function (response) {
            $('#productDetail').html(response);
        }
    );
    }); 
    ```

    这是 CFTEXTAREA 调用：（未通过 jquery/ajax 加载时工作正常）

    ```
    <cftextarea enabled="yes" name="nutrition" rows="5" cols="25" richText="yes"  toolbar="Basic" html="yes" >#DESCRIPTION#  </cftextarea> 
    ```

    * * *

    能够在通过 ajax 加载的表单上使用 cftextarea 会很好。有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:22:27.843

您需要做的就是`<cfajaximport>`在包含您的 jQuery 功能的页面上包含标签。^__^

# asp.net - HttpContext.Current.RewritePath - 到另一个域 - 这可能吗？

> ID：10778871
> 
> 赞同：1
> 
> 时间：2012-05-28T02:53:12.963
> 
> 标签：asp.net

使用 ASP.Net 是否可以使用 HttpContext.Current.RewritePath 重写到不同的域？例如。

```
HttpContext.Current.RewritePath("http://www.otherdomain.com"); 
```

当我尝试这个时，我得到以下异常：

“http://www.otherdomain.com”不是有效的虚拟路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:20:58.563

`HttpContext.Current.RewritePath`正在重写服务器端的url。

这意味着如果您请求 url `/products`，您可以使用以下命令告诉 asp.net 进行 rednder `/Products.aspx`：

```
if( HttpContext.Current.Request.RawUrl == "/products")
     HttpContext.Current.RewritePath("/Products.aspx"); 
```

如果您想将用户发送到另一个域，您需要执行以下操作：

HttpContext.Current.Response.Redirect("http://www.otherdomain.com/page");

# php - php 脚本中的 php/html 代码 - 如何在 html 中显示

> ID：10778873
> 
> 赞同：0
> 
> 时间：2012-05-28T02:53:34.827
> 
> 标签：php, html, echo

我正在尝试将以下内容放入一个 php 块中，以便我可以在其他网页中重用它，但我遇到了太多错误。

有人可以告诉我如何实现这一目标吗？

php文件中的代码块：

```
<select name="products">
                        <option value="select">Select</option>
                        <option value="Box" <?php echo @$product_list['Box'] ?>>Box</option>
                        <option value="TV"  <?php echo @$product_list['TV'] ?>>TV</option>
                        <option value="Setup"  <?php echo @$product_list['Setup'] ?>>Setup</option>
                    </select> 
```

我需要在 html 页面中回显上面的代码。

谢谢！

我刚刚尝试了似乎不起作用的heredoc语法，这一定意味着我做错了什么*叹息*

编辑：

知道为什么我会在下面的代码中收到以下错误：语法错误，意外的 T_IF

```
echo '<select name="products">
                        <option value="select">Select</option>
                        <option value="Box" '. 
                        if (!isset($updatebtn_clicked)){
                            echo @$product_list['Box'];
                            }elseif (isset($updatebtn_clicked)){
                            echo @$_POST['Box'];
                        }

                         .'>'. $product_name[0] .'</option>
                                    <option value="select">Select</option>
                        <option value="TV" '. 
                        if (!isset($updatebtn_clicked)){
                            echo @$product_list['TV'];
                            }elseif (isset($updatebtn_clicked)){
                            echo @$_POST['TV'];
                        }

                         .'>'. $product_name[1] .'</option>
                         </select>; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T02:57:04.673

使用单引号：

```
$select = '<select name="products">
               <option value="select">Select</option>
               <option value="Box" ' . $product_list['Box'] . '>Box</option>
               <option value="TV"  ' . $product_list['TV'] . '>TV</option>
               <option value="Setup" ' . $product_list['Setup'] . '>Setup</option>
           </select>';
echo $select; 
```

或者，关闭并打开 PHP 块：

```
<?php

?>
<select name="products">
    <option value="select">Select</option>
    <option value="Box" <?php echo @$product_list['Box'] ?>>Box</option>
    <option value="TV"  <?php echo @$product_list['TV'] ?>>TV</option>
    <option value="Setup"  <?php echo @$product_list['Setup'] ?>>Setup</option>
</select>
<?php 
```

或者，使用输出缓冲：

```
<?php
ob_start();
?>
<select name="products">
    <option value="select">Select</option>
    <option value="Box" <?php echo @$product_list['Box'] ?>>Box</option>
    <option value="TV"  <?php echo @$product_list['TV'] ?>>TV</option>
    <option value="Setup"  <?php echo @$product_list['Setup'] ?>>Setup</option>
</select>
<?php
$select = ob_get_clean();
echo $select; 
```

# c# - 如何允许远程连接到我的 .net 应用程序？

> ID：10778874
> 
> 赞同：4
> 
> 时间：2012-05-28T02:53:35.950
> 
> 标签：c#, .net, wcf, client-server, firewall

我正在编写一个具有桌面和移动应用程序组件的应用程序。桌面应用程序是用 c# 编写的，我希望能够打开它以充当移动应用程序的服务器（类似于 AirVideo 所做的）。我怎样才能在不要求用户配置他们的防火墙和/或路由器的情况下做到这一点？

理想情况下，我想在桌面应用程序中自行托管一个宁静的 wcf 服务。我已经尝试过了，但是防火墙的自动配置不允许远程连接到 wcf 服务，因为它似乎是由系统进程托管的。这种行为有解决方法吗？

编辑：我已经通过使用 NATUPnP COM 库（http://pietschsoft.com/post/2009/02/05/NET-Framework-Communicate-through-NAT-Router-）尽我所能解决了路由器问题通过-UPnP.aspx）。我仍然需要知道如何允许通过防火墙远程连接到自托管 WCF 服务，而无需手动配置防火墙（一旦启动应用程序，我可以接受用户提示允许连接）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:18:55.710

在您的路由器中设置一个指定路由到您的服务器地址的特定端口，
因此如果您的路由器真实 ip 是 abcd，您应该设置所有与 abcd:port# 的通信都被路由到您的服务器本地地址。(abcd:port# --> serverIP)

可以从您的路由器配置中实现此设置。

在您无法修改路由器设置/防火墙设置的情况下：
这意味着您不能使用端口来侦听传入连接，而只能使用传出连接。为了克服这个问题，您将不得不使用具有真实 IP 地址的第三台服务器，该服务器将充当双方的侦听器。典型场景可描述如下：

客户端 - A（桌面）
客户端 - B（智能手机）
服务器端 - S（通信服务器）

1.  S --> 打开端口以侦听传入连接。
2.  A --> 每 x 秒连接到 S 以检查是否有请求做某事正在等待。
3.  B --> 连接到 S.（向 A 发出等待请求）

这样，S 就可以充当代理来粘合双方的通信。

# android - 如何监听位置提供者被启用/禁用？

> ID：10778877
> 
> 赞同：0
> 
> 时间：2012-05-28T02:54:11.007
> 
> 标签：android, locationmanager

是否可以在启用或禁用位置提供程序时收到通知，而无需实际查找设备的位置（因为这样做可能会消耗大量电量）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:08:18.393

在 android 中有 LocationListener 接口，它提供了一个抽象方法 onProviderEnabled(String provider)。因此，您已经创建了自己的侦听器并实现了 onProviderEnabled(String provider) 方法。您的听众必须向位置管理器注册。

如果与上述相同，则在启用位置提供程序时将自动调用 onProviderEnabled(String provider)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T03:07:15.730

[Locationmanager.isProviderEnabled()](http://developer.android.com/reference/android/location/LocationManager.html#isProviderEnabled%28java.lang.String%29)似乎不需要实际查找位置。它不会太有效，因为您需要轮询它，但它比获取实际位置要好。

实际上，阅读更多有关该主题的内容，您似乎可以使用[requestLocationUpdates()](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28long,%20float,%20android.location.Criteria,%20android.app.PendingIntent%29)来执行此操作。`KEY_PROVIDER_ENABLED`它会在启用或禁用提供程序时向您发送一个捆绑包。您可以将通知的最短时间和距离设置为极高的值。这样，您将不时收到位置通知，而且大多只是启用/禁用通知。

# java - 与编译时相比，Eclipse 中的 Java drawImage 快得多

> ID：10778878
> 
> 赞同：1
> 
> 时间：2012-05-28T02:54:30.060
> 
> 标签：java, eclipse, performance, drawimage, compiled

当我从 Eclipse 运行我的程序时，它运行良好，CPU 负载很少。JProfiler（观察从 eclipse 运行的程序）说大部分都被碰撞检测和绘图占用了。当 JProfiler 在观察编译后的 jar 运行时，它 97% 的 cpu 使用来自于 drawImage。它的运行速度大约是 Eclipse 的两倍 - 三倍。

为什么是这样？

这会加载一次以从精灵表中获取图像（所有图像都是缓冲图像）

```
SpriteMan(Map xMap, Board xBoard)
    {
        mMap = xMap;
        mBoard = xBoard;
        try
        {
            bigImg = ImageIO.read(new File("sprites.PNG"));
            background = ImageIO.read(new File("background.PNG"));
        }
        catch (IOException e) 
        {
            System.err.println("Caught IOException: " + e.getMessage());
        }

        for (int i = 0; i < rows; i++)
        {
            for (int j = 0; j < cols; j++)
            {
                sprites[i][j] = bigImg.getSubimage(i * width,j * height,width,height);

                iSprites[i][j] = config.createCompatibleImage(width, height, Transparency.TRANSLUCENT);
                //iSprites[i][j] = toImage(sprites[i][j]);

                for(int x = 0; x<32; x++)
                {
                    for(int y = 0; y<32; y++)
                    {
                        iSprites[i][j].setRGB(x, y, sprites[i][j].getRGB(x,y));
                    }
                }

                loadedImage+=1;

            }
        }

    } 
```

在此之后，精灵被保存到它们对应的对象中（也只调用一次）

```
BlockGround(Map xMap, int X, int Y)
    {
        super(xMap, X, Y);

        mSprite = mMap.mBoard.mSpriteMan.sprites[0][0];
        mCollidable = true;
        mChar = 'G';
    } 
```

使用以下方法绘制块：

```
g2.drawImage(mSprite,null, x, y); 
```

编辑-----非常感谢！该程序现在可以正常运行（更新我的 JRE 之后），虽然我似乎搞砸了一些东西，并且花了很多时间才能让 eclipse 再次运行，但是嘿，它有效！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:12:31.840

我最好的猜测是 eclipse 使用的 java 版本比你的系统默认设置的更稳定。没有一些代码真的无法分辨。

---编辑---
在命令提示符下使用“java -version”并将你的eclipse项目设置为使用它。那么它应该是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T03:09:53.690

您是否有机会将 jar 上传到网络服务器？如果是这样，减速可能是由该服务器引起的。

# c# - 如何为会话设置更多时间并创建标签以从用户端选择更多时间？

> ID：10778879
> 
> 赞同：0
> 
> 时间：2012-05-28T02:54:36.203
> 
> 标签：c#, asp.net, .net

我是一名学习者，当我在办公室看到一个应用程序时，我很想知道。具有身份验证和会话超时的 Web 应用程序也与所有其他应用程序一样。但是有一个标签或链接选项称为“会话需要更多时间或更多时间”，此选项适用于最终用户。如果我们单击该链接，它将为您的会话提供更多额外时间。你们能帮我看看如何为此编写代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T03:02:56.293

您可以将会话超时设置为某个值，例如 30 分钟。使用 javascript 代码来检测用户不活动或空闲时间。

[检测空闲时间](http://paulirish.com/2009/jquery-idletimer-plugin/)

如果用户在 20 分钟内处于非活动状态，您可以向他显示弹出窗口或指向用户的链接，说您是否要继续会话。如果用户单击该链接，他的会话将继续，否则他将被重定向到注销页面。

# ajax - 从控制器获取参数

> ID：10778880
> 
> 赞同：0
> 
> 时间：2012-05-28T02:54:39.657
> 
> 标签：ajax, spring-mvc, jquery-mobile

我打算这样做。当用户在第一页点击课程名称时，将转到带有参数的第二页。我已经将参数从第一页传递到控制器。但我不知道如何从控制器中获取？我应该这样使用吗？如果我使用如下硬编码，

```
var idInput = "123";
var regNoInput = "123"; 
```

它会显示在控制台中，但不会显示在显示屏中，但第一步可以。但是当我喜欢下面的内容时，它会在控制台中显示 null 。请帮助我。我真的需要帮助。

```
$('#MregisteredClassesDetails').live('pageshow', function(){
    var rowInput = "1";
    var pageInput = "1";
    var idInput = document.getElementById("courseId");//value take from controller
    var regNoInput = document.getElementById("regNo");//value take from controller

    $.ajax({
     url: '${pageContext.request.contextPath}/getRegisteredClassesDetails.html',
     data: ( {rows : rowInput, page : pageInput, courseId : idInput, regNo : regNoInput}),
     type: 'POST',

     success: function(json_results){
       $('#list').append('<ul data-role="listview" data-inset="true"</ul>');
       listItems = $('#list').find('ul');
       html  = '#################################################################################################';
       html += '<h1>' +json_results.courseName+'</h1>';
       html += '#################################################################################################';
       html += '<br> Registration #    : '+json_results.regNo+'</br>';
       html += '<br> Status            : '+json_results.regStatus+'</br>';
       html += '<br> Location          : '+json_results.courseLoc+'</br>';
       html += '<br> Start Date        : '+json_results.startDate+'</br>';
       html += '<br> Registered Person : '+json_results.fullName+'</br>';
       html += '<br> Rate              : '+json_results.rate+'</br>';
       listItems.append(html);

       $('#list ul').listview();
       $.mobile.pageLoading(true);      
    }
});
}); 
```

但是当我在我的控制器中调试时，在控制台中，这两个参数都是空的

```
2012-05-28 10:35:57,085 DEBUG [http-bio-137.57.102.146-8080-exec-6] TrainingController -   courseId:null
2012-05-28 10:35:57,085 DEBUG [http-bio-137.57.102.146-8080-exec-6] TrainingController - registerNo:null 
```

我应该怎么办？如果我无法检索参数，我无法显示数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T03:05:10.757

试试这样

```
$.ajax({
 url: '${pageContext.request.contextPath}/getRegisteredClassesDetails.html',
 data:"{'rows ': '" + rowInput + "', 'page ': '"+ pageInput +"', 'courseId' : '"+ idInput+"', 'regNo' : '"+ regNoInput + "'}",
 type: 'POST',
 contentType: "application/json; charset=utf-8",  
  dataType: "json", 
 success: function(json_results){
...... 
```

});

# ruby-on-rails - form_for ：如何将 2 个变量带入视野

> ID：10778881
> 
> 赞同：0
> 
> 时间：2012-05-28T02:54:48.573
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

如何将 2 个变量带入视图。我是 Ruby on rails 的新手。

将 2 个或更多值带入视图的语法是什么。

```
<%= form_for(@user) do |f| %> 
```

编辑 ：

```
<%= form_for(@user) do |f| %>
prohibited this user from being saved: </h2>
<u1>
    <% @user.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
    <% end %>
</u1>
</div>
<% end %>
<%= debug @user %>
<div class = "field">
<%= f.label :email %><br/>
<%= f.text_field :email %>
</div> 
```

假设在上面的代码中，我想打印来自 2 个对象的值并提交它们。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:00:09.437

好吧，如果您需要使用 2 个变量，我认为最好使用两个单独的形式，因为它们是不相关的。如果两个变量彼此有关系，则应该使用`accepts_nested_attributes_for`and`fields_for`来做功。

[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html) [http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:22:34.963

从您上面的评论“我正在谈论将 2 个模型加载到一个表单中”，我认为您需要在一个表单中使用两个模型，因此 rails cast 会在使用嵌套模型的表单时产生很好的插曲。

您可以使用 **accepts_nested_attributes_for**例如。对于调查是一个模型，问题是另一个模型，您可以在调查中将问题用作嵌套属性，并且您可以在调查模型中以相同的形式使用答案模型。

有关更多信息，您可以阅读以下链接。

[http://railscasts.com/episodes/196-nested-model-form-part-1?view=asciicast](http://railscasts.com/episodes/196-nested-model-form-part-1?view=asciicast)

我希望这能帮到您。
谢谢。

# android - android文件操作，打开，失败

> ID：10778883
> 
> 赞同：1
> 
> 时间：2012-05-28T02:55:00.387
> 
> 标签：android, linux, android-ndk, embedded-linux

我正在使用ndk工具链构建以下代码来测试android的文件操作能力。并且，在 /data 中，读或写的权限无疑是 Ok 的。但是，我对为什么 fopen() 不起作用并返回 NULL 感到困惑。这是代码：

```
#include <unistd.h>
#include <stdio.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<fcntl.h>
void main()
{
    int fd;
    int count = 128;
    int offset = 32;
    int ret;
    char buf[1024]="hi ! this is pwrite.";
    char pathname[128] = "/data/pwrite.txt";
    /*fd = fopen(pathname, O_WRONLY);*/
    FILE *infile;
    infile = fopen(pathname, "rb");
    if(infile==NULL) printf("fopen error  \n");
    /*if(fd==-1)printf("open error \n");*/
    if((ret = pwrite(fd, buf, count, offset))==-1)
    {
        printf("pwrite error\n");
        exit(1);
    }
    else
    {
        printf("pwrite success\n");
        printf("the writed data is:%s", buf);
    }
} 
```

我直接在Android中运行代码时，提示如下：

```
# ./test
fopen error  
pwrite error 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:21:43.463

除了你的文件模式问题，

```
"/data/pwrite.txt" 
```

不应是 android 应用程序用户 ID 或什至（在安全设备上）adb shell 用户可访问的位置。

从大约 android 2.2 开始（但随时可能更改），/data/local 可用作 adb shell 用户的暂存区。对于应用程序中的代码，每个应用程序用户 ID 都有它自己的包唯一私有存储区域，可通过其中一个 java 级别的 api 调用找到 - 我认为它类似于 getFilesDir() - 你真的应该使用它来实现可移植性而不是硬编码路径.

WRITE_EXTERNAL_STORAGE 权限仅在您希望使用“外部存储”（取决于可能被焊接的设备或实际的可移动卡）而不是内部存储时才相关。再次，您应该真正通过 api 调用获取设备特定路径，而不是不可移植地假设它类似于 /mnt/sdcard

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T03:42:23.480

您`rb`在打开文件时给出了模式，这只是意味着读取二进制文件。现在您正在执行`write`错误的操作。你应该给写模式如下，

```
infile = fopen(pathname, "wb"); 
```

# intellij-idea - 在 IDEA 中查找 log4j.properties

> ID：10778892
> 
> 赞同：8
> 
> 时间：2012-05-28T02:57:42.177
> 
> 标签：intellij-idea, log4j

**更新**- 这个问题是我自己做的。

在某个阶段，这个特定的测试类进行了测试以确保记录某些内容。在设置中，我之前删除了所有附加程序并添加了我自己的附加程序以进行测试时断言。该测试早已不复存在，但该金块仍保留在设置中：`Logger.getRootLogger().removeAllAppenders();`.

很抱歉误报。:)

* * *

在 IDEA 我有以下测试：

```
@Test
public void shouldLog() {
    URL resource = Thread.currentThread().getContextClassLoader()
        .getResource("log4j.properties");
    System.out.println("resource = " + resource);
    final Logger logger = Logger.getLogger(getClass());
    logger.info("Hello world");
} 
```

它因此输出：

```
"C:\Program Files\Java\jdk1.5.0_18\bin\java" -classpath "C:\Program Files\JetBrains\IntelliJ IDEA Community Edition 11.1\lib\idea_rt.jar" -ea -Dfile.encoding=UTF-8 com.intellij.rt.execution.CommandLineWrapper C:\DOCUME~1\JMAWSO~1.NT3\LOCALS~1\Temp\classpath2294205410661538428.tmp @vm_params C:\DOCUME~1\JMAWSO~1.NT3\LOCALS~1\Temp\vm_params5645362020129462784.tmp com.intellij.rt.execution.application.AppMain com.intellij.rt.execution.junit.JUnitStarter -ideVersion5 au.com.gmm.repo.RepoThreadCleanupServiceTest,shouldLog
resource = file:/C:/user/jem/projects/GMM/out/test/cashflow/log4j.properties
log4j:WARN No appenders could be found for logger (au.com.gmm.repo.RepoThreadCleanupServiceTest).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.

Process finished with exit code 0 
```

这是一个著名的问题，许多新手一遍又一遍地看到。今天被它难住了，我觉得有点傻。

[http://logging.apache.org/log4j/1.2/faq.html#noconfig](http://logging.apache.org/log4j/1.2/faq.html#noconfig)说`log4j uses Thread.getContextClassLoader().getResource() to locate the default configuration files`。但是，我的测试检查 `Thread.currentThread().getContextClassLoader().getResource("log4j.properties")`并找到没有问题的属性文件。

该文件的内容是：

```
log4j.rootLogger=DEBUG, CONSOLE
log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern=%d{HH:mm:ss.SSS} %c - %m%n 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T14:52:40.077

我在 IntelliJ IDEA 中使用 log4j 和 slf4j，它非常适合我。只需将这些 jar 包包含到 IntelliJ 中的应用程序依赖项中：

```
log4j-1.2.9.jar
slf4j-api-1.5.11.jar
slf4j-log4j12-1.5.11.jar 
```

比将 log4j 配置放在您的应用程序中的某个位置。但是不要忘记将 IntelliJ 中 log4j.properties 的位置标记为源，或者如果您在测试中使用它作为测试源：

log4j.properties：

```
log4j.rootLogger=INFO,stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d [%t] %-5p %X{file} %c{1} - %m%n

log4j.logger.your.app=DEBUG,yourApp
log4j.additivity.your.app=false
log4j.logger.yourApp=DEBUG,yourApp
log4j.additivity.yourApp=false
log4j.appender.yourApp=org.apache.log4j.ConsoleAppender
log4j.appender.yourApp.layout=org.apache.log4j.PatternLayout
log4j.appender.yourApp.layout.ConversionPattern=%d [%t] %-5p %X{file} %c{1} %m%n
log4j.appender.yourApp.ImmediateFlush=true 
```

然后在你的java类中使用它来获取记录器：

```
private static final Logger LOGGER = LoggerFactory.getLogger(YourApp.class); 
```

而且您不会看到任何警告，例如：`No appenders could be found for logger`.

希望这可以帮助。

# android - Android开发相关的数据库通信

> ID：10778895
> 
> 赞同：0
> 
> 时间：2012-05-28T02:59:00.210
> 
> 标签：android

我有一个简单的问题要问你，如果我想开发一个使用数据库来存储数据和检索这些数据的 Android 应用程序，我知道有一个使用 SQLite 的选项，因为我知道 SQLite 是存储设备中的数据，或者您可以在某个系统中的某个地方说，如果我想从一个设备存储一些数据并从另一个设备检索这些数据呢？我的意思是拥有与所有设备通信的单个数据库的最佳方式是什么？需要明确的是，使用 SQLite 在我看来更像是一个本地数据库而不是全局数据库。

谢谢！卢尔津

# asp.net-mvc-3 - 是否可以让标准 ASP.NET MVC 不显眼的验证在 Orchard CMS 中工作？

> ID：10778897
> 
> 赞同：2
> 
> 时间：2012-05-28T02:59:34.173
> 
> 标签：asp.net-mvc-3, orchardcms

我正在尝试构建一个自定义模块以与 Orchard CMS 集成以实现业务应用程序。虽然 Orchard CMS 是一个 MVC 应用程序，但似乎不可能（或者至少很容易）完成所有可以使用 MVC “开箱即用”完成的事情。

我正在尝试通过不显眼的验证来处理我的观点，但似乎无法让它发挥作用。

**更新**：根据下面 Rohan West 的建议，我现在使用 ResourceManifest 类和 Script.Require 调用将脚本包含在页面中。

但是，尽管在我使用 @Html.EditorFor 的属性上有 .NET 属性，但实际 HTML 元素上的验证属性并未生成。

我在 web.config 文件中设置了 appSettings，如下所示：

```
<appSettings>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>      

    <add key="webpages:Enabled" value="false" />
    <add key="log4net.Config" value="Config\log4net.config" />
</appSettings> 
```

还是不开心！

**更新 2：**根据 Rohan West 的建议，修改 OrchardStarter 类以注释掉以下行“解决”了问题：

```
 ModelValidatorProviders.Providers.Clear();
    ModelValidatorProviders.Providers.Add(new LocalizedModelValidatorProvider()); 
```

不过应该有更好的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T03:09:13.160

您需要在模块的资源清单中定义脚本。

```
public class ResourceManifest : IResourceManifestProvider
{
    public void BuildManifests(ResourceManifestBuilder builder)
    {
        var manifest = builder.Add();

        manifest.DefineScript("jQueryValidation").SetUrl("jquery.validate.js", "jquery.validate.min.js").SetVersion("1.7").SetDependencies("jQuery");
        manifest.DefineScript("jQueryValidation_Unobtrusive").SetUrl("jquery.validate.unobtrusive.js", "jquery.validate.unobtrusive.min.js").SetDependencies("jQuery", "jQueryValidation");
    }
} 
```

然后在你的页面

```
@{ 
    this.Script.Require("jQueryValidation_Unobtrusive").AtHead(); 
} 
```

看看下面的课

```
Orchard.Environment.OrchardStarter 
```

在 Orchard 1.4.2 中有一行删除了所有 ModelValidatorProviders

```
ModelValidatorProviders.Providers.Clear(); 
```

这是从集合中删除默认的 DataAnnotationsModelValidatorProvider 。您可以尝试将其添加到集合中，

# delphi - 从 Delphi 2006 迁移到 Delphi XE2

> ID：10778898
> 
> 赞同：6
> 
> 时间：2012-05-28T02:59:38.343
> 
> 标签：delphi, delphi-xe2, delphi-2006

delphi 2006 中有一个代码库，过去多年没有开发。如果开发需要激活，有哪些选项。

*   2006 年继续开发。（不确定 IDE 支持等）
*   迁移到 Delphi XE2。（不确定需要什么）
*   用Java重新编码。

似乎第二种选择更可行，但这样做会涉及什么？我读了一些关于 Unicode 支持的东西，也不确定图形库的支持。

换个角度来看，我一直是一名 Java 程序员，拥有 C/C++ 方面的经验。但是，我试图从进入市场策略的阻力最小的路径的角度来更多地理解它。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T10:49:45.437

我不能说任何关于用 Java 重新编码的事情。取决于代码库的功能，它可能是一个不错的选择，因为您说您对 Java 有经验（而且，我假设，不是 Delphi）。

关于升级到 Delphi XE2：

检查是否使用了任何第三方组件。

如果没有，您可能只需进行很少的更改即可升级到 Delphi XE2。

如果是，请检查这些组件的源代码是否已经可用。

如果没有，如果您想升级到 Delphi XE2，您将不得不购买这些组件的新许可证（这次要购买包含源代码的许可证！）。如果你真的不走运，开发这些组件的公司已经破产了。然后你要么被 Delphi 2006 卡住，要么你必须找到这些组件的替代品。

如果您已经获得了组件的源代码，您可能仍想检查是否将它们升级到 Delphi XE2。它可能会为您省去一些麻烦。升级编写良好的组件对于经验丰富的 Delphi 开发人员来说不是问题（这些年来我做过无数次），但对于不知道可能存在的陷阱的人来说几乎是不可能的。

Delphi 2006 和 XE2 之间的唯一重大变化（实际上发生在 Delphi 2007 和 Delphi 2009 之间）是切换到 Unicode 字符串。切换现有的代码库可能是无痛的，也可能是下背部的真正痛苦，这取决于它一开始写得有多好以及它如何（ab）使用字符串。

您还没有提到的另一个选项可能是升级到 Delphi 2007，这基本上是对 Delphi 2006 的错误修复，而不是其本身的真正版本。如果我没记错的话，Delphi 2006 软件包可以与 Delphi 2007 一起使用，甚至无需重新编译。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T06:03:38.587

一年前，我从 2006 年转到 XE（不是 XE2）。这很无痛。最重要的是unicode。但即使这样也相对容易（在我的具体情况下可能）。大多数是由德尔福以正确的方式处理的。最大的问题是导入组件，尤其是当字符串用作字节字符串时，这在我的领域（音乐，midi）是常态。Embarcadero 上有关于字符串转换的[白皮书。](http://www.embarcadero.com/images/dm/technical-papers/delphi-unicode-migration.pdf)

我只使用可用源的组件。如果不这样做，您可能必须重新购买许可证。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T00:38:23.087

It is a long jump taking 2006 to 2011/2012!

But it is possible if you consider that:

*   You have to convert String variables using the new conversions methods ;
*   You have to check all the versions between 2006 and xe/xe2 to know how the libraries have changed, bacause some have been spplited, others merged, and a few deleted ;
*   You have to buy/download the upgrade (if any) of your 3rd party components.

If you do that 3 things, the applications will compile just fine.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T08:07:12.733

如果代码中除了诸如“Hello, World”之类的琐碎案例之外还有任何复杂性，那么升级 IDE 总是比重写代码更容易。

Delphi 2006 中的主要障碍可能是：没有源代码的旧组件、unicode 问题、可能使用过时的技术（主要是 BDE）以及可能的一些低级黑客攻击，例如使用未记录的功能。

[购买 XE2 许可证即可免费获得旧版本的 Delphi。](http://www.embarcadero.com/products/delphi/previous-versions)但是 Delphi 2006 不存在。Delphi 2007 几乎相同（但更好）。[甚至可以在 Delphi 2007 中使用 D2006 二进制包](http://www.bobswart.nl/weblog/Blog.aspx?RootId=5:2010)。

重写时，您的首要任务是找出软件实际做了什么。逐行。然后您需要在 Java 中复制它，希望以 Java 风格复制，然后您需要针对旧软件验证该功能实际上是复制的。

因此，如果旧组件有问题，您可以在完全重写或重新编译和部分重写之间进行选择。

另请阅读这个，古老但很好的文字：[你不应该做的事情，第 1 部分](http://www.joelonsoftware.com/articles/fog0000000069.html)

也就是说，你需要重写的商业理由，以及愿意为此付费的人。

# macos - 为什么我的 Mac (OS X 10.7.3) 有旧版本 (2.3) 的 Gnu Bison？

> ID：10778905
> 
> 赞同：12
> 
> 时间：2012-05-28T03:01:26.297
> 
> 标签：macos, gnu, bison

我的 Mac 上的 GNU Bison 版本是 2.3，但我知道 Bison 2.5 是很久以前发布的。*Flex & Bison*一书使用 2.5 版。

我应该自己升级到 2.5 吗？有必要吗？

2.3和2.5有什么区别？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-09-24T05:30:35.877

我有同样的问题 MacOSX 10.9.5。

做完之后：

```
brew install bison 
```

我将此添加到我的 bash 个人资料中：

```
export PATH=/usr/local/Cellar/bison/3.0.4/bin:$PATH 
```

（当您阅读本文时，您的版本可能与 3.0.4 不同）在我重新启动终端后，它在我重新启动时选择了新版本的 Bison`bison -V`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2019-06-09T08:46:18.590

如果您正在使用`zsh`：

```
$ brew unlink bison
$ echo 'export PATH="/usr/local/opt/bison/bin:$PATH"' >> ~/.zshrc
$ export LDFLAGS="-L/usr/local/opt/bison/lib"
$ source ~/.zshrc
$ bison -V
bison (GNU Bison) 3.4.1
Written by Robert Corbett and Richard Stallman.

Copyright (C) 2019 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-06-15T11:58:16.183

您可以使用自制软件安装新版本：

```
$ brew install bison

...

This formula is keg-only, which means it was not symlinked into /usr/local.

Mac OS X already provides this software and installing another version in
parallel can cause all kinds of trouble.

Some formulae require a newer version of bison.

Generally there are no consequences of this for you. If you build your
own software and it requires this formula, you'll need to add to your
build variables:

    LDFLAGS:  -L/usr/local/opt/bison/lib

==> Summary
  /usr/local/Cellar/bison/3.0.4: 51 files, 2.2M, built in 74 seconds 
```

但是如果你运行: `bison -V`，它仍然会输出 2.3，而不是新安装的 3.0.4。要强制执行此操作，您可以运行以下命令：

```
arganzhengs-MacBook-Pro:thrift argan$ brew unlink bison
Unlinking /usr/local/Cellar/bison/3.0.4... 0 symlinks removed
arganzhengs-MacBook-Pro:thrift argan$ brew link bison
Warning: bison is keg-only and must be linked with --force
Note that doing so can interfere with building software.
arganzhengs-MacBook-Pro:thrift argan$ brew link bison --force
Linking /usr/local/Cellar/bison/3.0.4... 9 symlinks created
arganzhengs-MacBook-Pro:thrift argan$ bison -V
bison (GNU Bison) 2.3
Written by Robert Corbett and Richard Stallman.

Copyright (C) 2006 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
arganzhengs-MacBook-Pro:thrift argan$ source ~/.bash_profile 
arganzhengs-MacBook-Pro:thrift argan$ bison -V
bison (GNU Bison) 3.0.4
Written by Robert Corbett and Richard Stallman. 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-30T01:06:54.913

如果您使用 Brew：

```
brew tap homebrew/dupes && brew install bison 
```

如果您使用 MacPorts：

```
sudo port install bison 
```

如果你使用 Fink，它们仍然是 2.3，就像 Apple 一样，所以你必须自己编辑包。

如果你知道如何安装 Unix 软件，下载它，解压缩，然后像往常一样配置/制作/安装。

如果以上所有内容对您来说都是希腊语，请查看[Link](https://brew.sh/)和[http://macports.org](http://macports.org)并决定哪个对您更友好。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-08-10T04:36:37.207

所以我想出了如何摆脱 Mojave 和 Catalina 上的野牛构建问题。

这是我所做的：

```
$ brew install bison
$ cp /usr/local/opt/bison/bin/bison /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/bison 
```

--

不需要管理员权限，cp 命令将使用自制软件安装的最新版本覆盖 Xcode 应用程序中的野牛二进制文件。

现在我可以这样做了：

```
 $ bison -V
bison (GNU Bison) 3.7.1 
```

在运行 Mojave 的多个 macOS 系统上构建 wine 时遇到了很多问题。主要是由于对我从未听说过的库的这种奇怪需求，但这个修复让它工作了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-02T18:28:49.567

我使用了 Brew 并安装了该软件包。但是，这不会更新野牛的位置。我仍然看到野牛 2.3 而不是 2.5。

然后，我发现新野牛的位置不同。

```
bash-3.2$ echo $PATH
/opt/local/bin:/opt/local/sbin:/Users/taposh/anaconda/bin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/m4/bin/
bash-3.2$ PATH=/usr/local/bison/bin/:$PATH
bash-3.2$ which bison
/usr/local/bison/bin//bison

bash-3.2$ bison --version
bison (GNU Bison) 2.5
Written by Robert Corbett and Richard Stallman.
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-26T16:19:26.123

因为安装了bison，所以osx上的默认版本是2.3。所以我们应该做如下事情：

1.  安装更高版本的os bison

    > 如果您使用 Brew，请尝试使用此命令--brew install bison，它将安装 bison 3.0.2。二进制包在我电脑的 /usr/local/Cellar/bison/3.0.4/bin/ 下。
    > 
    > 或者您可以通过源代码安装野牛，按照官方网站[http://www.gnu.org/software/bison/](http://www.gnu.org/software/bison/)上的说明进行操作。

2.  替换旧的（您需要 sudo 或 root 权限）

    > $ which bison --- 找到安装的路径，在我的电脑里是 /usr/bin/bison
    > 
    > $ cd /usr/bin
    > 
    > $ sudo mv 野牛 bison.2.3
    > 
    > $ sudo cp /usr/local/Cellar/bison/3.0.4/bin/bison bison

然后你可以安装 thrift 而不会出现这个问题。

# c# - C#从两个哈希之间的文件中获取文本

> ID：10778911
> 
> 赞同：1
> 
> 时间：2012-05-28T03:03:14.480
> 
> 标签：c#, streamreader

在我的 C# 程序中（此时），我的表单中有两个字段。一种是使用列表框的单词列表；另一个是文本框。我已经能够成功地将一个大单词列表从文本文件加载到列表框中。我还可以通过这种方式将列表框中的选定项目显示到文本框中：

```
private void wordList_SelectedIndexChanged(object sender, EventArgs e)
     {
          string word = wordList.Text;
          concordanceDisplay.Text = word;
     } 
```

我有另一个本地文件，我需要在文本框中显示它的一些内容。在这个文件中，每个词条（如字典中的）前面都有一个#。因此，我想使用变量“word”并在此本地文件中搜索以将条目放入文本框中，如下所示：

> ```
> #headword1
>     entry is here...
>     ...
>     ...
> #headword2
>     entry is here...
>     ...
>     ...
> #headword3
>     entry is here...
>     ...
>     ... 
> ```

你得到文本文件的格式。我只需要在该词之前用# 搜索正确的词条，然后从那里复制所有信息，直到文件中的下一个哈希值，然后将其放在文本框中。

显然，我是新手，所以要温柔。非常感谢。

PS 我使用 StreamReader 获取单词列表并将其显示在列表框中，如下所示：

```
StreamReader sr = new StreamReader("C:\\...\\list-final.txt");
       string line;
       while ((line = sr.ReadLine()) != null)
       {
           MyList.Add(line);
       }
       wordList.DataSource = MyList; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T03:24:19.570

```
var sectionLines = File.ReadAllLines(fileName) // shortcut to read all lines from file
    .SkipWhile(l => l != "#headword2") // skip everything before the heading you want
    .Skip(1) // skip the heading itself
    .TakeWhile(l => !l.StartsWith("#")) // grab stuff until the next heading or the end
    .ToList(); // optional convert to list 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T03:14:43.403

```
string getSection(string sectionName)
{
    StreamReader sr = new StreamReader(@"C:\Path\To\file.txt");
    string line;
    var MyList = new List<string>();
    bool inCorrectSection = false;
    while ((line = sr.ReadLine()) != null)
    {
        if (line.StartsWith("#"))
        {
            if (inCorrectSection)
                break;
            else
                inCorrectSection = Regex.IsMatch(line, @"^#" + sectionName + @"($| -)");
        }
        else if (inCorrectSection)
            MyList.Add(line);
    }
    return string.Join(Environment.NewLine, MyList);
}

// in another method
textBox.Text = getSection("headword1"); 
```

以下是检查该部分是否匹配的几种替代方法，粗略的顺序是它们在检测正确的部分名称方面的准确程度：

```
// if the separator after the section name is always " -", this is the best way I've thought of, since it will work regardless of what's in the sectionName
inCorrectSection = Regex.IsMatch(line, @"^#" + sectionName + @"($| -)");
// as long as the section name can't contain # or spaces, this will work
inCorrectSection = line.Split('#', ' ')[1] == sectionName;
// as long as only alphanumeric characters can ever make up the section name, this is good
inCorrectSection = Regex.IsMatch(line, @"^#" + sectionName + @"\b");
// the problem with this is that if you are searching for "head", it will find "headOther" and think it's a match
inCorrectSection = line.StartsWith("#" + sectionName); 
```

# django - 使用tastepie创建一个新用户，结果为401

> ID：10778916
> 
> 赞同：1
> 
> 时间：2012-05-28T03:04:19.683
> 
> 标签：django, tastypie

我有这样的用户资源

```
class UserResource(ModelResource):

  class Meta:
    queryset = User.objects.filter(is_active=True)
    resource_name = 'user'
    excludes = ['email', 'password', 'is_active', 'is_staff', 'is_superuser']
    serializer = CamelCaseJSONSerializer(formats=['json'])
    list_allowed_methods = ['post']
    detail_allowed_methods = ['get', 'post', 'put', 'patch']
    authentication = ApiKeyAuthentication()
    models.signals.post_save.connect(create_api_key, sender=User)

  def obj_create(self, bundle, request=None, **kwargs):
    try:
      bundle = super(UserResource, self).obj_create(bundle, request, **kwargs)
      bundle.obj.set_password(bundle.gata.get('password'))
      bundle.obj.save()
    except IntegrityError:
      raise BadRequest('The username already exists')
    return bundle

  def apply_authorization_limits(self, request, object_list):
    return object_list.filter(user = request.user) 
```

我正在使用 slumber 用这行代码创建一个新用户

```
import slumber
>>> api = slumber.API("http://127.0.0.1:8000/api/v1")
>>> new = api.user.post({"firstName" : "fname", "lastName" : "lname", "username" : "anewuser", "password" : "123456", "email" : "email@email.com"}) 
```

我收到一个错误，上面写着

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Python/2.7/site-packages/slumber/__init__.py", line 125, in post
    resp = self._request("POST", data=s.dumps(data), params=kwargs)
  File "/Library/Python/2.7/site-packages/slumber/__init__.py", line 104, in _request
    raise exceptions.HttpClientError("Client Error %s: %s" % (resp.status_code, url), response=resp, content=resp.content)
slumber.exceptions.HttpClientError: Client Error 401: http://127.0.0.1:8000/api/v1/user/ 
```

我认为在创建新用户时我不应该得到 401 ......

我不希望 API 打开，因此可以检索所有用户的列表，我只希望登录用户获取他们的信息

我究竟做错了什么？

**更好的方法 - 创建一个用于创建用户的新资源。此资源只能由超级用户调用**

```
class UserSignUpResource(ModelResource):

  class Meta:
    object_class = User
    queryset = User.objects.all()
    allowed_methods = ['post']
    include_resource_uri = False
    resource_name = 'newuser'
    excludes = ['is_active', 'is_staff', 'is_superuser']
    serializer = CamelCaseJSONSerializer(formats=['json'])
    authentication = ApiKeyAuthentication()
    authorization = DjangoAuthorization()
    models.signals.post_save.connect(create_api_key, sender=User)

  def obj_create(self, bundle, request=None, **kwargs):
    try:
      bundle = super(UserSignUpResource, self).obj_create(bundle, request, **kwargs)
      bundle.obj.set_password(bundle.data.get('password'))
      bundle.obj.save()
    except IntegrityError:
      raise BadRequest('The username already exists')
    return bundle

  def apply_authorization_limits(self, request, object_list):
    return object_list.filter(id=request.user.id, is_superuser=True) 
```

使用此命令创建一个新用户

```
curl -v -X POST -d '{"username" : "username", "password" : "123456"}' -H "Authorization: ApiKey superusername:apikey" -H "Content-Type: application/json" http://127.0.0.1:8000/api/v1/newuser/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:42:07.530

我通过创建一个新资源来解决它

```
class UserSignUpResource(ModelResource):

  class Meta:
    object_class = User
    queryset = User.objects.all()
    allowed_methods = ['post']
    include_resource_uri = False
    resource_name = 'newuser'
    excludes = ['is_active', 'is_staff', 'is_superuser']
    serializer = CamelCaseJSONSerializer(formats=['json'])
    authentication = ApiKeyAuthentication()
    authorization = DjangoAuthorization()
    models.signals.post_save.connect(create_api_key, sender=User)

  def obj_create(self, bundle, request=None, **kwargs):
    try:
      bundle = super(UserSignUpResource, self).obj_create(bundle, request, **kwargs)
      bundle.obj.set_password(bundle.data.get('password'))
      bundle.obj.save()
    except IntegrityError:
      raise BadRequest('The username already exists')
    return bundle

  def apply_authorization_limits(self, request, object_list):
    return object_list.filter(id=request.user.id, is_superuser=True) 
```

# php - 在 PHP 中的 textarea 值中换行

> ID：10778917
> 
> 赞同：-1
> 
> 时间：2012-05-28T03:04:19.960
> 
> 标签：php, textarea, line-breaks

所以这是一个文本区域内的值的示例。

```
Welcome to my site

Blah blah blah? 
```

当回显值时，它是这样的：

```
Welcome to my site Blah blah blah? 
```

如何在不输入的情况下换行... \n 或 <br> 使用 PHP

或者举一个很好的例子。当您提出问题时，就像我们在 Stack Overflow 中的情况一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T03:06:06.090

将换行符转换为`<br />`with [`nl2br()`](http://php.net/manual/en/function.nl2br.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T04:37:52.613

您可以[`nl2br()`](https://www.php.net/manual/en/function.nl2br.php)在发布值时使用。在 textarea 中为新行输入值，您可以使用回车键查看示例。

```
<textarea name="description" rows="5" class="input"></textarea>
   echo  nl2br($_POST['description']); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-28T03:06:21.940

[`nl2br`](https://www.php.net/manual/en/function.nl2br.php)

> 在字符串中的所有换行符之前插入 HTML 换行符

# c - c中的字母减法

> ID：10778920
> 
> 赞同：2
> 
> 时间：2012-05-28T03:05:03.623
> 
> 标签：c, subtraction, letters-and-numbers

**我想知道如何在 C 中“减去字母”：**
我的意思是，我有 2 个字母，'a' 和 'c'，我想执行 'c'-'a'='b' 这是 3-1 =2。
如何在 C 中获得相同的行为？
我可以转换*字母->数字*，但如何管理有限的字母*长度？***谢谢你。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T03:08:30.183

您可以将字母视为数字，然后将字母加`'a'`回以对其进行规范化

所以

```
char c1 = 'a';
char c2 = 'c';
int diff = c2 - c1; //'c' - 'a' = 2
char ans = diff + 'a' - 1; //add 'a' and subtract 1 to normalize it 
```

如果您想要数字差异，请使用`diff`我的答案（`ans`会给您字母）。

这不会环绕所以

```
'a' - 'b' 
```

将导致`-1`（或a之前的字符）

如果你想用包装处理底片，你必须检查它

```
int diff = c2 - c1;
char ans;
diff > 0 ? ans = diff + 'a' - 1 : 'z' + diff + 1; 
```

这将给出：

1.  `'z'`为了`'b'-'c'`
2.  `'y'`为了`'b'-'d'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T03:08:41.010

你在看这个吗？

```
char a1,a2,a3;
a3 = a1 - a2 + 'a'; 
```

# asp.net-mvc-3 - 改变状态的电子邮件中的链接策略

> ID：10778926
> 
> 赞同：2
> 
> 时间：2012-05-28T03:06:07.587
> 
> 标签：asp.net-mvc-3, rest, html-email

我们的 ASP.NET MVC 3 应用程序发送了一些电子邮件。

在其中一封电子邮件中，我们想添加“您觉得这有帮助吗？” 到电子邮件的页脚。

如果他们单击“是”，则需要在数据库中执行一些操作。

我应该对这些链接采取什么方法？

我不太喜欢做 GET 的想法（例如，当他们单击链接时），然后将某些内容添加到数据库中。GET 永远不应该更新状态。有没有办法让它做一个 POST 呢？

如果这很重要，我正在使用 ActionMailer 来执行电子邮件。

**编辑：**

需要明确的是，我是如何询问“如何”实现 MVC 方面的。我知道我可以创建一个将 id 等保存到数据库的操作，但我从 REST 风格的角度询问正确的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:34:02.993

您可以创建一个表单并在电子邮件中进行 POST，但它不适用于某些邮件客户端。以下是 2007 年的参考资料，其中显示了它的工作原理和不工作的地方：http: [//www.campaignmonitor.com/blog/post/2435/how-forms-perform-in-html-emai/](http://www.campaignmonitor.com/blog/post/2435/how-forms-perform-in-html-emai/)

ETA：POST 当然适合 REST 模式，但在您的情况下可能不是一个好的选择。由于您可能只是为了提供帮助而增加一个计数器，因此暴露此 URL 不会造成太大问题。

# php - 如何在不离开我的站点的情况下将变量从我的站点传递到另一个站点？

> ID：10778929
> 
> 赞同：0
> 
> 时间：2012-05-28T03:06:24.527
> 
> 标签：php

我希望能够将变量发送到另一个网站，而无需实际使用 php 访问该网站。

我正在建立一个将运输仓库外包的电子商务网站。在该人检查他们的产品后，我想使用 $_GET['vars'] 将一些变量发送到托运人的网站。这是一个完全不同的 URL。问题是，我不希望该人实际访问托运人的网页。我只是想在那边 ping 那个信息。

是否可以通过 URL 将变量发送到另一个站点而不离开您的站点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:46:45.780

您应该将所有相关的订单信息存储在数据库中，然后使用 cron 触发将处理未处理的脚本，这样可以在向您的外包站点发出任何请求之前对订单进行系统检查。不要依赖您的用户浏览器在订单过程中触发 API 调用或相信他们不会在提交前三次单击或注入值。

我建议使用 curl 来完成您的实际请求，因为它更快。像这样简单的东西：

```
<?php 
function curl_do_api($url){
    if (!function_exists('curl_init')){
        die('Sorry cURL is not installed!');
    }
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    $output = curl_exec($ch);
    curl_close($ch);
    return $output;
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T03:09:07.477

是的你可以。最简单的方法：

```
 $contents = file_get_contents("http://example.com/some/page.php?var=abcd"); 
```

有关更多高级功能，请参阅[Curl](http://id2.php.net/manual/en/book.curl.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T04:00:40.740

两者都是正确的，您应该根据您正在寻找的安全性做出选择。

cURL 会更安全，如果你不想在查询字符串中传递一些参数，你应该使用它。同时当您使用 file_get_cotents("URL?data=value"); 传递数据时 您将有大约 2k 的数据被传递限制。

另一方面，如果您将 cURL 与 https 一起使用，它会更加安全。使用 cURL，您还可以发布文件并模拟表单发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T04:14:47.190

实际上有一个更简单的方法来解决这个问题...使用**ajax**
包括 jquery 标头首先
参考这里
[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# ruby-on-rails - 链接到购物车

> ID：10778934
> 
> 赞同：1
> 
> 时间：2012-05-28T03:07:52.067
> 
> 标签：ruby-on-rails, routes, e-commerce, shopping-cart

我创建了一个购物车，其中包含会话对象中存在的行项目。如果购物车存在，我不知道如何链接到我的购物车显示页面，如果不存在，我只是链接到“购物车为空”页面。我错过了什么？我的代码如下：

*   购物车 has_many line_items, & lineitems 属于购物车

**查看链接** ，我不确定我应该在这里放什么以及在哪里定义它，例如......“if current_cart.empty?cart”或“if @cart.line_items.empty?current_cart”等。

```
 <% if current_cart.line_items.empty?%>
        <%= link_to "cart", cart_path, :class =>'headertab' %>&nbsp;
    <% else %>
        <%= link_to "cart", cart_path(current_cart), :class =>'headertab' %>&nbsp;
    <% end %> 
```

这给了我以下错误：

```
Showing /Users/dave/rails_projects/EquiptMe/app/views/layouts/_headerexterior.html.erb where line #20 raised:

undefined local variable or method `current_cart' for #<#<Class:0x007fae841cc8e0>:0x007fae83339698>
Extracted source (around line #20):

17:         <li><%= link_to "browse gear", '/gear', :class =>'headertab' %></li>
18:         <li><%= link_to "join", '/signup', :class =>'headertab' %></li>
19:         <li>
20:         <% if current_cart.line_items.empty?%>
21:             <%= link_to "cart", cart_path, :class =>'headertab' %>&nbsp;
22:         <% else %>
23:             <%= link_to "cart", cart_path(current_cart), :class =>'headertab' %>&nbsp; 
```

**路线**

```
Outdoor::Application.routes.draw do
  resources :line_items

  resources :carts
..... 
```

**应用控制器**

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  private

  def current_cart
    Cart.find(session[:cart_id])
    rescue ActiveRecord::RecordNotFound
      cart = Cart.create
      session[:cart_id] = cart.id
      cart
  end
end 
```

**推车控制器“显示”、“销毁”和“创建”**

```
 def show
    begin
    @cart = Cart.find(params[:id])
    rescue ActiveRecord::RecordNotFound
      logger.error "Attempt to access invalid cart #{params[:id]}"
      redirect_to '/gear', notice: 'Invalid cart'
    else
      respond_to do |format|
        format.html # show.html.erb
        format.json { render json: @cart }
      end
   end

  def destroy
    @cart = current_cart
    @cart.destroy
    session[:cart_id] = nil

    respond_to do |format|
      format.html { redirect_to carts_url, notice: 'Your cart is currently empty' }
      format.json { head :no_content }
    end
end

  def create
    @cart = Cart.new(params[:cart])

    respond_to do |format|
      if @cart.save
        format.html { redirect_to @cart, notice: 'Cart was successfully created.' }
        format.json { render json: @cart, status: :created, location: @cart }
      else
        format.html { render action: "new" }
        format.json { render json: @cart.errors, status: :unprocessable_entity }
      end
    end
  end 
```

**行项目控制器“创建”**

```
 def create
    @cart = current_cart
    gear = Gear.find(params[:gear_id])
    @line_item = @cart.add_gear(gear.id)

    respond_to do |format|
      if @line_item.save
        format.html { redirect_to @line_item.cart }
        format.json { render json: @line_item, status: :created, location: @line_item }
      else
        format.html { render action: "new" }
        format.json { render json: @line_item.errors, status: :unprocessable_entity }
      end
    end
  end
  end 
```

**谢谢您的帮助！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T05:08:11.287

从您的代码中，您始终拥有一个已创建的`Cart`对象。您的`current_cart`方法将始终返回`new`或先前创建的`Cart`对象，因此您必须链接到`cart_path(current_cart)`.

```
 <%= link_to "my cart", cart_path(current_cart), :class =>'headertab' %> 
```

在另一种情况下，如果您想检查购物车是否为空？在这种情况下，您必须使用`current_cart.line_items.empty?`

# 已编辑

要`current_cart`在视图和控制器中访问，`helper_method :current_cart`请向 ApplicationController 添加声明。

**代码更新：**

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  private

  def current_cart
    Cart.find(session[:cart_id])
    rescue ActiveRecord::RecordNotFound
      cart = Cart.create
      session[:cart_id] = cart.id
      cart
  end
  helper_method :current_cart
end 
```

# qt - Qt mousemoveevent + Qt::LeftButton

> ID：10778936
> 
> 赞同：6
> 
> 时间：2012-05-28T03:08:12.413
> 
> 标签：qt, mouseevent, qgraphicsscene

快速提问，为什么会这样：

```
void roiwindow::mouseMoveEvent(QGraphicsSceneMouseEvent *event)
{ 
    QGraphicsScene::mouseMoveEvent(event);
    qDebug() << event->button();
} 
```

当我在图形场景中移动光标时按住鼠标左键时返回 0 而不是 1。无论如何要让它返回 1，这样我就可以知道用户何时在图形场景中拖动鼠标。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-28T07:15:22.117

尽管 Spyke 的回答是正确的，但您可以使用`buttons()`( [docs](https://qt-project.org/doc/qt-4.8/qmouseevent.html#buttons) )。 *返回导致*`button()`事件的鼠标按钮，这就是它返回的原因；但返回事件触发时按住的按钮，这就是你所追求的。*`Qt::NoButton``buttons()`*

 ** * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-28T07:29:58.287

`buttons`通过查看属性可以知道是否按下了左键：

```
if ( e->buttons() & Qt::LeftButton ) 
{
  // left button is held down while moving
} 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T04:25:19.533

对于[鼠标移动事件](http://qt-project.org/doc/qt-4.8/qmouseevent.html#button)，返回值始终是 Qt::NoButton 。您可以使用事件过滤器来解决这个问题。

尝试这个

```
bool MainWindow::eventFilter(QObject *object, QEvent *e)
{

 if (e->type() == QEvent::MouseButtonPress && QApplication::mouseButtons()==Qt::LeftButton)
 {
  leftbuttonpressedflag=true;
 }

  if (e->type() == QEvent::MouseMove)
 {
   QMouseEvent *mouseEvent = static_cast<QMouseEvent*>(e);
   if(leftbuttonpressedflag && mouseEvent->pos()==Inside_Graphics_Scene)
   qDebug("MouseDrag On GraphicsScene");
 }

 return false;

} 
```

并且不要忘记在主窗口中安装这个事件过滤器。

```
qApplicationobject->installEventFilter(this); 
```*

# iphone - 如何使用 UIAppearance 在 UINavigationBar 上设置提交按钮的样式？

> ID：10778946
> 
> 赞同：1
> 
> 时间：2012-05-28T03:09:16.500
> 
> 标签：iphone, ios, cocoa-touch

我正在使用[UIApperance](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html)设计我的 iOS 应用程序。我已经设法使我的所有[UINavigationBar](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html)中的所有条形按钮项都具有灰色文本，除了一个特定的按钮 - [MFMessageComposeViewController](http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)视图的发送按钮保持其默认的白色。为什么我的代码针对除此之外的每个按钮？

![在此处输入图像描述](../Images/840f4dea8332631aa995f2691b96cb85.png)

```
NSDictionary* normalStyle = [NSDictionary 
    dictionaryWithObjects:[NSArray 
        arrayWithObjects:
            [UIColor navigationTextNormalColor],
            [UIColor whiteColor],
            [NSValue 
                valueWithUIOffset:UIOffsetMake(
                    0, 
                    1
                )
            ]
            , nil
        ]
        forKeys:[NSArray
            arrayWithObjects:
                UITextAttributeTextColor,
                UITextAttributeTextShadowColor,
                UITextAttributeTextShadowOffset,
                nil
        ]
];

[[UIBarButtonItem appearanceWhenContainedIn:[UINavigationController class], nil] 
    setTitleTextAttributes:normalStyle
    forState:UIControlStateNormal
];

[[UINavigationBar appearanceWhenContainedIn:[UINavigationController class], nil] 
    setTintColor:[UIColor navigationBarTintColor]
]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T04:18:03.633

根据文档：

[http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)

> 重要邮件撰写界面本身是不可定制的，并且不能由您的应用程序修改。此外，在呈现界面后，您的应用程序不允许对电子邮件内容进行进一步的更改。用户仍然可以使用界面编辑内容，但程序更改会被忽略。因此，您必须在呈现界面之前设置内容字段的值。

# ruby - 全局变量 vs. 常量 vs. 全局缓存的类实例变量

> ID：10778947
> 
> 赞同：6
> 
> 时间：2012-05-28T03:09:23.237
> 
> 标签：ruby

一般来说，哪个更适合全局缓存：全局变量、常量或类实例变量？

以下是每个示例：

```
module Foo
  $FOO_CACHE = {}
  def self.access_to_cache
    $FOO_CACHE
  end
end

module Foo
  CACHE = {}
  def self.access_to_cache
    CACHE
  end
end

module Foo
  @cache = {}
  def self.access_to_cache
    @cache
  end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T03:15:50.707

这最终是相当主观的，但我将一一解决每个选项：

*   **全局变量**：*不*……因为将全局变量放在模块（或类，或与此相关的任何东西）中没有多大意义，无论如何它都会在范围内。除了如果你可以使用全局变量以外的东西，你应该总是这样做。

*   **常量**：*不*……因为缓存不是常量！虽然 Ruby 不强制常量不能改变，但这并不意味着你应该这样做。它们被称为常量是有原因的。

*   **类实例变量**：*是*的……因为它是这里唯一有意义的变量（尽管名称可能不是，从技术上讲，它是一个模块实例变量，但这相当迂腐）。这是三者中唯一一个既具有修改语义意义又被某个范围封装的。

# html - 为什么将文本添加到跨度会改变其位置？

> ID：10778949
> 
> 赞同：5
> 
> 时间：2012-05-28T03:09:40.927
> 
> 标签：html, css

看到这个[小提琴](http://jsfiddle.net/Yn7VJ/ "小提琴")。当我取出文本时，跨度很好地排列在一起。当我向其中添加文本时，它会显示在页面的下方。

```
<div>
    <span id="first">
    </span>
    <span id="second">
        Text
    </span>
</div>

span#first {
    display:inline-block;
    width: 100px;
    height: 100px;
    background-color: red;    
}

span#second {
    display: inline-block;
    width: 100px;
    height: 100px;
    background-color: yellow;   
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T03:26:18.340

`vertical-align`的默认值为`baseline`。CSS[规范](http://www.w3.org/TR/2008/REC-CSS2-20080411/visudet.html#line-height)说`vertical-align: baseline`

> 将框的基线与父框的基线对齐。如果框没有基线，请将框的底部与父项的基线对齐。

一个空块没有基线，所以底部`span`与 parent 的基线对齐`div`。下一个`span`，因为它有文本（因此有一个基线），所以将文本与`div`.

如果您同时设置`vertical-align: top`两个`span`元素，它们应该正确排列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T03:18:58.847

尝试添加**float: left**，例如

```
span#first {
    display:inline-block;        
    float: left;
    width: 100px;
    height: 100px;
    background-color: red;
}
span#second {
    display: inline-block;
    float: left;    
    width: 100px;
    height: 100px;
    background-color: yellow;   
} 
```

参见：[jsFiddle](http://jsfiddle.net/Yn7VJ/6/)

# hibernate - 如何使用 Spring MVC 在休眠中将自动提交设置为 false

> ID：10778951
> 
> 赞同：1
> 
> 时间：2012-05-28T03:10:10.580
> 
> 标签：hibernate, spring-mvc, transactions, set, autocommit

我目前正在学习 Spring + Hibernate 的集成，到目前为止我正在让它工作。但是我遇到了不想在流程结束时提交事务的情况，因为我只想查看生成的 sql 语句以进行测试和调试。

我已经在我的休眠属性中添加了 false ，但是它仍然无法正常工作。

如果使用Spring处理休眠事务是否可以实现？因为在 hibernate 中使用传统事务，有可能，只要不调用 session.commit() 方法，所有的更新和插入都不会被保存；

目前我的服务层有这个代码：

@Transactional(propagation = Propagation.SUPPORTS, readOnly = true) 公共类 EmployeeServiceImpl{

```
@Autowired
private EmployeeDao employeeDao

@Transactional(propagation = Propagation.REQUIRED, readOnly = false)
public void saveEmployee(Employee employee){

    // count the number of employee in the database
    int n  = employeeDao.getEmployeeCount();
    // lets say it should print 10 here
    System.out.println("number of employee before inserting : " + n);

    // insert to employee
    employeeDao.saveEmployee(employee);

    // then count the employee after inserting
    n  =  employeeDao.getEmployeeCount();

    // then it should print 11 here after inserting new employee
    System.out.println("number of employee after inserting : " + n);

/* Then Dont commit insert!!!
*/

} 
```

}

道层代码：

```
public EmployeeDaoImpl implements EmployeeDao{

@Autowired
public void saveEmployee(Employee employee){

    sessionFactory.getCurrentSession.save(employee);

}

public int getEmployeeCount(){

    String count = sessionFactory.getCurrentSesion.createQuery("select count(emp.employeeId) from Employee emp")
    .list().get(0).toString;

return Integer.valueOf(count);
} 
```

}

但是这里发生的是它确实提交了事务！但我不想仅仅为了测试和调试目的而提交事务。

我也试过 @Transactional(propagation = Propagation.SUPPORTS, readOnly = false) 而不是 @Transactional(propagation = Propagation.SUPPORTS, readOnly = true)

但是这里发生的是它没有提交事务，但是员工的数量也没有增加。

所以，我期望在这里发生的是在插入员工表之前计算员工人数。然后插入员工表并再次计算员工人数，因此它将增加 1。但在流程结束时，我不想提交该插入！

各位大佬有idea吗？

我将非常感谢任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T03:39:12.880

对于测试，请使用[Spring 测试框架](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/testing.html#integration-testing)。它为您处理自动事务回滚。如果您正在寻找其他内容，则必须更具体。你的问题虽然很详细，但对你真正想做的事情却相当模糊。您只是经常使用诸如“测试”和“调试”之类的词。这些词对不同的人可能意味着很多不同的东西。

# c# - C# Wolfram aplha API 工作示例

> ID：10778954
> 
> 赞同：3
> 
> 时间：2012-05-28T03:10:34.167
> 
> 标签：c#, wolframalpha

我一直试图让 Wolframalpha API`C#`无法正常工作。我一直在尝试使用这两个资源：

1.  [堆栈问题](https://stackoverflow.com/questions/4834913/wolfram-alpha-api-wrapper-for-vb-not-working-for-c-sharp)
2.  [Wolfram API 演示](http://products.wolframalpha.com/api/libraries.html)

帖子中的答案是半有用的，但我无法编译任何东西。我是 C# 的新手，所以有点不知所措。我真的很难让它接受输入然后输出结果。

**如果有人可以帮助我使此代码正常工作，以便我可以使用有效的示例或知道我可以从中建模的示例项目，将不胜感激。**

这是我剪切并粘贴到 C# (Visual Studio) 控制台项目中的代码：

```
 namespace WolframAlpha {
    using System;
    using System.Collections.Generic;
    using System.Data.Services.Client;
    using System.Net;
    using System.IO;

    public partial class DefaultPodEntity {

        private String _PlainText;

        private String _Img;

        private String _Title;

        private String _ParentTitle;

        private Int16 _ParentPosition;

        private String _ParentId;

        public String PlainText {
            get {
                return this._PlainText;
            }
            set {
                this._PlainText = value;
            }
        }

        public String Img {
            get {
                return this._Img;
            }
            set {
                this._Img = value;
            }
        }

        public String Title {
            get {
                return this._Title;
            }
            set {
                this._Title = value;
            }
        }

        public String ParentTitle {
            get {
                return this._ParentTitle;
            }
            set {
                this._ParentTitle = value;
            }
        }

        public Int16 ParentPosition {
            get {
                return this._ParentPosition;
            }
            set {
                this._ParentPosition = value;
            }
        }

        public String ParentId {
            get {
                return this._ParentId;
            }
            set {
                this._ParentId = value;
            }
        }
    }

    public partial class HtmlPodEntity {

        private String _Markup;

        private String _Title;

        private Int16 _Position;

        private String _Id;

        private String _Css;

        private String _Scripts;

        public String Markup {
            get {
                return this._Markup;
            }
            set {
                this._Markup = value;
            }
        }

        public String Title {
            get {
                return this._Title;
            }
            set {
                this._Title = value;
            }
        }

        public Int16 Position {
            get {
                return this._Position;
            }
            set {
                this._Position = value;
            }
        }

        public String Id {
            get {
                return this._Id;
            }
            set {
                this._Id = value;
            }
        }

        public String Css {
            get {
                return this._Css;
            }
            set {
                this._Css = value;
            }
        }

        public String Scripts {
            get {
                return this._Scripts;
            }
            set {
                this._Scripts = value;
            }
        }
    }

    public partial class PlainTextPodEntity {

        private String _PlainText;

        private String _Title;

        private String _ParentTitle;

        private Int16 _ParentPosition;

        private String _ParentId;

        public String PlainText {
            get {
                return this._PlainText;
            }
            set {
                this._PlainText = value;
            }
        }

        public String Title {
            get {
                return this._Title;
            }
            set {
                this._Title = value;
            }
        }

        public String ParentTitle {
            get {
                return this._ParentTitle;
            }
            set {
                this._ParentTitle = value;
            }
        }

        public Int16 ParentPosition {
            get {
                return this._ParentPosition;
            }
            set {
                this._ParentPosition = value;
            }
        }

        public String ParentId {
            get {
                return this._ParentId;
            }
            set {
                this._ParentId = value;
            }
        }
    }

    public partial class WolframAlphaFactsContainer : System.Data.Services.Client.DataServiceContext {

        public WolframAlphaFactsContainer(Uri serviceRoot) : 
                base(serviceRoot) {
        }

        /// <summary>
        /// </summary>
        /// <param name="Input">Query string Sample Values : weather|msft|derivative of x^4 sin x|SAT scores</param>
        /// <param name="Location">Location used for computation Sample Values : Madrid|Springfield, IL</param>
        /// <param name="LatitudeLongitude">Latitude/Longitude used for computation Sample Values : 40.42,-3.71|-22.54,-43.12</param>
        /// <param name="Width">Width in pixels for images returned Sample Values : 300|500</param>
        public DataServiceQuery<DefaultPodEntity> GetImageResults(String Input, String Location, String LatitudeLongitude, Int16? Width) {
            if ((Input == null)) {
                throw new System.ArgumentNullException("Input", "Input value cannot be null");
            }
            DataServiceQuery<DefaultPodEntity> query;
            query = base.CreateQuery<DefaultPodEntity>("GetImageResults");
            if ((Input != null)) {
                query = query.AddQueryOption("Input", string.Concat("\'", Input, "\'"));
            }
            if ((Location != null)) {
                query = query.AddQueryOption("Location", string.Concat("\'", Location, "\'"));
            }
            if ((LatitudeLongitude != null)) {
                query = query.AddQueryOption("LatitudeLongitude", string.Concat("\'", LatitudeLongitude, "\'"));
            }
            if (((Width != null) 
                        && (Width.HasValue == true))) {
                query = query.AddQueryOption("Width", Width.Value);
            }
            return query;
        }

        /// <summary>
        /// </summary>
        /// <param name="Input">Query string Sample Values : weather|msft|derivative of x^4 sin x|SAT scores</param>
        /// <param name="Location">Location used for computation Sample Values : Madrid|Springfield, IL</param>
        /// <param name="LatitudeLongitude">Latitude/Longitude used for computation Sample Values : 40.42,-3.71|-22.54,-43.12</param>
        /// <param name="Width">Width in pixels for images returned Sample Values : 300|500</param>
        public DataServiceQuery<HtmlPodEntity> GetHtmlResults(String Input, String Location, String LatitudeLongitude, Int16? Width) {
            if ((Input == null)) {
                throw new System.ArgumentNullException("Input", "Input value cannot be null");
            }
            DataServiceQuery<HtmlPodEntity> query;
            query = base.CreateQuery<HtmlPodEntity>("GetHtmlResults");
            if ((Input != null)) {
                query = query.AddQueryOption("Input", string.Concat("\'", Input, "\'"));
            }
            if ((Location != null)) {
                query = query.AddQueryOption("Location", string.Concat("\'", Location, "\'"));
            }
            if ((LatitudeLongitude != null)) {
                query = query.AddQueryOption("LatitudeLongitude", string.Concat("\'", LatitudeLongitude, "\'"));
            }
            if (((Width != null) 
                        && (Width.HasValue == true))) {
                query = query.AddQueryOption("Width", Width.Value);
            }
            return query;
        }

        /// <summary>
        /// </summary>
        /// <param name="Input">Query string Sample Values : weather|msft|derivative of x^4 sin x|SAT scores</param>
        /// <param name="Location">Location used for computation Sample Values : Madrid|Springfield, IL</param>
        /// <param name="LatitudeLongitude">Latitude/Longitude used for computation Sample Values : 40.42,-3.71|-22.54,-43.12</param>
        /// <param name="Width">Width in pixels for images returned Sample Values : 300|500</param>
        public DataServiceQuery<PlainTextPodEntity> GetPlainTextResults(String Input, String Location, String LatitudeLongitude, Int16? Width) {
            if ((Input == null)) {
                throw new System.ArgumentNullException("Input", "Input value cannot be null");
            }
            DataServiceQuery<PlainTextPodEntity> query;
            query = base.CreateQuery<PlainTextPodEntity>("GetPlainTextResults");
            if ((Input != null)) {
                query = query.AddQueryOption("Input", string.Concat("\'", Input, "\'"));
            }
            if ((Location != null)) {
                query = query.AddQueryOption("Location", string.Concat("\'", Location, "\'"));
            }
            if ((LatitudeLongitude != null)) {
                query = query.AddQueryOption("LatitudeLongitude", string.Concat("\'", LatitudeLongitude, "\'"));
            }
            if (((Width != null) 
                        && (Width.HasValue == true))) {
                query = query.AddQueryOption("Width", Width.Value);
            }
            return query;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:40:23.130

这个 codeplex 项目声称涵盖了最新的 Wolfram Alpha API 并包含一个示例： [http ://wolframalphaapi20.codeplex.com/](http://wolframalphaapi20.codeplex.com/)

控制台应用程序使用静态 Main 方法作为其入口点。此例程通常可以在为控制台应用程序创建新项目时自动创建的文件 program.cs 中找到。

如果编译器说它找不到 Main 那么它可能已被删除或从未创建。很难说没有任何代码看。当 Main 方法的问题得到解决时，可能会显示更多错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-19T10:33:41.960

我目前正在玩一个 lib 调用 WolframAlpha.NET。代码源在[github 上](https://github.com/Genbox/WolframAlpha.NET)。有一个[nuget 包](https://www.nuget.org/packages/WolframAlpha.NET)（最后发布于 2019-06-24）。

### 示例（来自自述文件）

这是从 Wolfram|Alpha 获取数据的最简单形式：

```
static void Main(string[] args)
{
    //First create the main class:
    WolframAlpha wolfram = new WolframAlpha("APPID HERE");

    //Then you simply query Wolfram|Alpha like this
    //Note that the spelling error will be correct by Wolfram|Alpha
    QueryResult results = wolfram.Query("Who is Danald Duck?");

    //The QueryResult object contains the parsed XML from Wolfram|Alpha. Lets look at it.
    //The results from wolfram is split into "pods". We just print them.
    if (results != null)
    {
        foreach (Pod pod in results.Pods)
        {
            Console.WriteLine(pod.Title);
            if (pod.SubPods != null)
            {
                foreach (SubPod subPod in pod.SubPods)
                {
                    Console.WriteLine(subPod.Title);
                    Console.WriteLine(subPod.Plaintext);
                }
            }
        }
    }
} 
```

有关更多示例，请查看 WolframAlphaNet.Examples 和 WolframAlphaNet.Tests 项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T10:56:41.270

您有允许您与 Wolfram API 交互的复制粘贴的类定义（如`DefaultPodEntity`和`WolframAlphaFactsContainer`），但您没有`Main()`定义您的程序应该对这些类做什么的函数的定义。您将需要添加方法定义

```
static void Main(string[] args)
{
  // TODO: call methods of WolframAlphaFactsContainer
} 
```

到其中一个类（例如，您的问题中未列出的`WolframAlphaFactsContainer`新类，如该类并使用适当的参数调用其方法）。`Program``TODO``WolframAlphaFactsContainer``GetImageResults()`

*注意*：您需要学习基本的 C# 编程习惯，然后才能成功解决用 C# 编写一个工作的、正确的程序来执行*您*想做的事情（而不是依赖其他人的代码）的问题。

*注意*：阅读[文档](http://msdn.microsoft.com/en-us/library/acy3edy3.aspx)以及`Main()`如何将命令行参数传递给您的程序（如果您想这样做）。

*注意*：该类`WolframAlphaFactsContainer`被标记`partial`，这意味着该类可能还有其他部分（请参阅[文档](http://msdn.microsoft.com/en-us/library/wa80x488.aspx)）。如果有，您还需要在代码中包含这些内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-30T22:25:03.713

我知道这篇文章很旧，但看看它是如何出现在谷歌顶部附近的： [https ://wapiex.codeplex.com/](https://wapiex.codeplex.com/)

这是我刚刚完成的包装。它包含的内容比其他 codeplex 项目要多得多。随意使用它

# bash - 从 txt 文件 BASH 中的名称打开文件夹

> ID：10778958
> 
> 赞同：0
> 
> 时间：2012-05-28T03:11:31.300
> 
> 标签：bash, directory

我有一个`fold.txt`包含一行的文本文件`fold_nam`：

```
$ cat fold.txt
fold_nam 
```

文本文件中的此名称是在文件夹名称的程序运行期间创建的输出，该文件夹名称现在包含我需要使用的其他文件。

我正在写一个大脚本，现在我需要进入这个文件夹，我需要从文本文件中获取名称。我尝试了几件事，但无法真正解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T04:04:21.850

如果要将行读入变量：`read -r folder_name < fold.txt`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T03:27:26.287

没有必要使用`cat`：

```
cd $(<fold.txt) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T03:16:25.637

你应该能够做到这一点：

```
cd $(cat fold.txt) 
```

或者

```
cd `cat fold.txt` 
```

# c++ - 没有语法错误但没有打印结果

> ID：10778962
> 
> 赞同：1
> 
> 时间：2012-05-28T03:12:19.347
> 
> 标签：c++

我无法打印出总和我没有收到任何警告等。

在这里尝试做这个问题：http://projecteuler.net/problem=1 程序运行，然后永远停止。

```
// Adding multiples of this and following equations
#include "std_lib_cmpt125.h"

void SumMultiple(int Max,int Base)
{
    int i=0;
    int sum=0;
    for(i;i<Max;i+Base)
        {
            sum=i+sum;
        };
    cout<<"The sum"<<sum;
}
int main()
{
    int base=0;
    int max=0;
    int sum=0;
    cout<<"Please enter the sum's multiple: (ex. 3: 3,6,9,12...)\n";
    cin>>base;
    cout<<"Please enter the sum's maximum: (ex. 10000)\n";
    cin>>max;
    SumMultiple(max,base);
    return 0;
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T03:14:03.437

你错过了增加*i*，

```
for(i;i<Max;i=i+Base)
{
..
} 
```

或者

```
for(i;i<Max;i+=Base)
 {
  ..
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T03:16:47.923

改变：

```
int i=0;
int sum=0;
for(i;i<Max;i+Base)
{
   sum=i+sum;
}; 
```

至：

```
int sum = 0;
for (int i = 0; i < Max; i += Base)
{
  sum += i;
} 
```

请注意，原始`for`循环中的第一条语句什么也不做，`i`必须递增 的值（这通过`+=`运算符最简单地完成），并且右大括号后的分号是不必要的。

在 C++ 中习惯于在循环本身中声明一个循环变量，以限制其范围并强调其作为计数器的目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T03:18:26.700

最后你有一个额外的 Brace } 并且你没有增加 i

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T03:42:30.890

此外，您不会使用该功能得到答案。问题 1 是从 [1..999] 中寻找 3 或 5 的所有倍数之和

尝试这个

```
for ( int i = 1; i < Max ; i++ ) 
    sum += ((i % 3 && i % 5) ? 0 : i ; 
return sum 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T03:23:32.750

更改

```
for(i;i<Max;i+Base)
        {
            sum=i+sum;
        };
    cout<<"The sum"<<sum; 
```

进入

```
for(i;i<Max;i=i+Base)
        {
            sum=i+sum;
        };
    cout<<"The sum"<<sum; 
```

或者

```
for(i;i<Max;i+=Base)
        {
            sum=i+sum;
        };
    cout<<"The sum"<<sum; 
```

上面的代码将增加计数器 i 并显示必要的结果

# c# - 如何在 asp.net mvc 3 razor 中显示模型属性？

> ID：10778965
> 
> 赞同：2
> 
> 时间：2012-05-28T03:13:01.773
> 
> 标签：c#, asp.net-mvc-3, razor

我正在尝试从我的模型中显示一个属性。目前我无法在顶部显示 2 人的地址？

动作方法

```
public ActionResult Index()
{
    Person person = new Person() {name="Jan Kees",address="Beukenootjes straat 23" };
    Person person2 = new Person() { name = "Peter Jan", address = "Beukenootjes straat 23" };
    List<Person> lijst = new List<Person>();
    lijst.Add(person);
    lijst.Add(person2);

    return View(lijst);
} 
```

人类

```
 public class Person
 {
     public string name { get; set; }
     public string address { get; set; }
 } 
```

索引视图

```
@model IEnumerable<stack.Models.Person>

@item.address @*how to display address?*@

@foreach (var item in Model)
{
    @item.name <br />
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:06:09.570

如果你只想显示一次你可以使用

```
@Model.First().address 
```

*我想为代码添加更多解释，也许它也可以帮助其他类似情况的人*

这项工作是因为您的模型是 IEnumerable，所以要选择元素，您可以使用 Linq，并`First()`获取序列的第一个元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T03:24:56.320

您只需要将`@item.address`调用放在 foreach 块中：

```
@foreach (var item in Model)
{
    @item.name <br />
    @item.address
} 
```

您可以根据需要订购它，例如地址可以出现在名称之前。

# java - Java LinkedHashSet 索引有效性

> ID：10778970
> 
> 赞同：2
> 
> 时间：2012-05-28T03:14:25.940
> 
> 标签：java, boost-multi-index, linkedhashset

我一直在将大量 Java 代码移植到 C++ 中，并且在我离开时不得不实现 LinkedHashSet 之类的东西。我使用 Boost 的多索引容器对 LinkedHashSet/Map 进行了合理的复制。

当我移植代码时，我遇到了一些有趣的东西，其中包含 multi_index，因为包含的对象不是可变的（除非您将类的特定字段标记为可变）。但是，如果密钥是从包含的类的一些可变成员中计算出来的，那么事情就会变得有趣。

为了澄清一些事情，我想我会用 Java 写一个简单的例子来检查他们的 LinkedHashSet 的行为。结果让我有点惊讶；看起来它们的行为类似于 Boost 的多索引容器，因为在修改包含的对象时不会重新生成索引（如您所料）；然而，编译器并没有以任何方式抱怨——似乎很容易让自己陷入困境（我正在移植的代码似乎犯了上述罪过，谁知道它仍然是如何工作的）。

这只是 Java 中缺少 const_iterators 的限制，还是我设法做了一些特别愚蠢或棘手的事情？

这是一个简单的例子：

```
class StringContainer                                                        
{                                                                            
    public String s;                                                         

    public StringContainer(String s)                                         
    {                                                                        
        this.s = s;                                                          
    }                                                                        

    public boolean equals(Object t1)                                         
    {                                                                        
        StringContainer other = (StringContainer) t1;                        
        return this.s == other.s;                                            
    }                                                                        

    public int hashCode()                                                    
    {                                                                        
        int val = 8;                                                         
        for (int i = 0; i < s.length(); i++)                                 
            val += s.charAt(i);                                              
        return val;                                                          
    }                                                                        

    public String toString()                                                 
    {                                                                        
        return s;                                                            
    }                                                                        
}                                                                            

class test                                                                   
{                                                                            
    public static void main(String[] args)                                   
    {                                                                        
        Set<StringContainer> set = new LinkedHashSet();                      
        set.add(new StringContainer("Foo"));                                 
        set.add(new StringContainer("Bar"));                                 
        set.add(new StringContainer("Baz"));                                 
        set.add(new StringContainer("Qux"));                                 

        Iterator<StringContainer> it = set.iterator();                       
        while (it.hasNext())                                                 
        {                                                                    
            StringContainer s = it.next();                                   
            if (s.s == "Baz")                                                
                s.s = "Baz2";                                                
            System.out.println(s);                                           
        }                                                                    

        System.out.println("\nRe-iterate:\n");                               

        it = set.iterator();                                                 
        while (it.hasNext())                                                 
        {                                                                    
            StringContainer s = it.next();                                   
            System.out.println(s);                                           
        }                                                                    

        System.out.println();                                                

        if (set.contains(new StringContainer("Foo")))                        
            System.out.println("Contains Foo");                              

        if (set.contains(new StringContainer("Baz")))                        
            System.out.println("Contains Baz");                              
        else                                                                 
            System.out.println("Does not contain Baz");                      

        if (set.contains(new StringContainer("Baz2")))                       
            System.out.println("Contains Baz2");                             
        else                                                                 
            System.out.println("Does not contain Baz2");                     
    }                                                                        
} 
```

它打印出以下内容：

```
Foo
Bar
Baz2
Qux

Re-iterate:

Foo
Bar
Baz2
Qux

Contains Foo
Does not contain Baz
Does not contain Baz2 
```

有趣的是，它知道 Baz 变了；但是它仍然没有找到 Baz2。

显然这是人为的，但我正在查看的非常合理的代码似乎（通过多个间接）导致了这个问题。使用 Boost Multi Index 至少你必须 const-cast 一个迭代器来导致这个！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T03:45:49.677

不建议在中使用可变对象`Set`（或作为键`Map`）。正如 Javadoc[`Set`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)所说：

> 注意：如果将可变对象用作集合元素，则必须非常小心。如果对象的值以影响等于比较的方式更改，而对象是集合中的一个元素，则不指定集合的​​行为。

所以你的例子是直接的，并将你`Set`放在“行为......未指定”区域。

根本原因正如 Paul Bellora 在他的回答中所说的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T03:34:36.127

请注意，`LinkedHashSet`extends`HashSet`只是简单地包装了`HashMap`只关心其键的 a。所以我们在这里真正谈论的是`HashMap`.

`HashMap`仅保存对其键的引用，并且不负责跟踪何时对这些对象进行更改。它计算键的哈希值的唯一时间是它们是什么时候`put`或`HashMap`调整本身大小的时候。

理论上，一个自定义 HashMap 实现可以跟踪其键的更改，但这取决于键实现了一个接口，该接口在其属性更改时触发通知。这个自定义 HashMap 只能与特定类型的键一起使用这一事实将使其非常专业化。

# java - 我如何只解析Java中的DTD文件，一次一行并且没有任何验证

> ID：10778977
> 
> 赞同：1
> 
> 时间：2012-05-28T03:16:07.160
> 
> 标签：java, parsing, merge, dtd

我收到了一个无效的 DTD 文件，其中包含重复的元素并且元素不相同：

```
<!ELEMENT Data (Name, address?)>
<!ELEMENT Data (Name, age)> 
```

我需要编写一个实用程序来读取 DTD 并合并如下元素：

```
<!ELEMENT Data (Name, address?, age)> 
```

我似乎无法找到一个 java 库，它允许我一次只解析一个元素（如 SAX）。

我真正想要的是读`<!ELEMENT Data (Name, address?)>`入一个数据结构，比如数组映射或类似的东西。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:52:31.600

在我看来，您必须一次阅读所有 DTD 元素，否则您无法将它们配对，如您在示例中所示。

因为 DTD 描述可以有 (...) 正则表达式的任意嵌套，理论上无法帮助您。实际上，大多数 DTD 元素只有一层或两层 (...)，因此它们可能会起作用。如果您的问题很大程度上看起来像您已经展示的那样，您可以通过字符串黑客来完成此操作并手动修复其余部分。（阅读单行不会削减它；ELEMENT 描述可以跨越多行并以“...>”结尾，您必须找到它）。

如果您想要一种*可靠*的自动化方法，您需要一个[程序转换系统](http://en.wikipedia.org/wiki/Program_transformation)。DTD 是一种特殊的形式系统。您需要一个可以读取正式描述实例的工具，让您可以读取和更新表示实例的数据结构（通常称为抽象语法树），并将结果重写为有效的源文本。

不是在 Java 中，但我们的[DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)就是这样一个程序转换引擎。它有一个能够解析 DTD 的 XML 前端，事实上我们已经使用这些 DTD 构建了代码生成器。

# python - 如何让 CGIHTTPServer 询问用户/密码

> ID：10778978
> 
> 赞同：1
> 
> 时间：2012-05-28T03:16:15.487
> 
> 标签：python, simplehttpserver

我只想在 Python 中启动一个 CGI HTTP 服务器，它要求用户/密码。我怎样才能做到这一点？

HTTP 基本身份验证（带有询问名称/密码的浏览器弹出框）会很好（并且可能是首选）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:06:19.900

返回状态码 401 和`WWW-Authenticate`标头将告诉浏览器提示用户输入凭据。有关详细信息，请参阅[RFC 2617](http://www.ietf.org/rfc/rfc2617.txt)。

# python - django-userena 中的多个用户配置文件

> ID：10778980
> 
> 赞同：4
> 
> 时间：2012-05-28T03:16:29.540
> 
> 标签：python, django

我正在尝试为 Userena 创建多个配置文件 - 每个用户只能有一个配置文件类型。在其他讨论之后，我正在使用多表继承，但是当我这样做时，我无法将数据保存到派生模型中。一切最终都是 CommonProfile，这应该是不可能的/不允许的。示例代码如下：

在`models.py`：

```
# models.py
# This is an example of how i've attempted to get 
# multiple user profiles working with Userena
from django.contrib.auth.models import User
from django.db import models
from userena.models import UserenaLanguageBaseProfile

class CommonProfile(UserenaLanguageBaseProfile):
    """Common fields for 2 user profiles: Spam and Eggs"""
    user = models.OneToOneField(User)
    common_field = models.CharField(max_length=100)

    @property
    def is_spam(self):
        """Find out if this is a Spam user"""
        try:
            self.spamprofile
            return True
        except SpamProfile.DoesNotExist:
            return False

    def get_real_type(self):
        """return the real model"""
        if self.is_spam:
            return self.spamprofile
        else:
            return self.eggsprofile

class SpamProfile(CommonProfile):
    spam_field = models.CharField(max_length=20)

class EggsField(CommonProfile):
    eggs_field = models.SmallIntegerField() 
```

在`forms.py`

```
# forms.py
# This is the form to sign up a Spam Type Person

from django import forms
from userena.forms import SignupFormTos
from . models import CommonProfile, SpamProfile

class SpamSignupForm(SignupFormTos):
    """signup a Spam Person"""
    common_field = forms.CharField(label='what is your quest')
    spam_field = forms.CharField(label='what kind of spam are you')

    def clean(self):
        cleaned_data = super(SpamSignupForm,self).clean()
        #do stuf, same idea for clean_<field>
        return cleaned_data

    def save(self):
        """Save the SpamProfile"""
        user = super(SpamSignupForm,self).save()
        common_profile = user.get_profile()
        spam_profile = SpamProfile(commonprofile_ptr=common_profile)
        spam_profile.spam_field = self.cleaned_data['spam_field']
        spam_profile.save()
        return spam_profile 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:09:35.083

这个周末我遇到了同样的问题。试试你的保存功能

```
def save:
  #your other code
   spam_field = self.cleaned_data['spam_field']
   new_spam_user = SpamProfile.objects.create_user(spam_field)

   return new_user 
```

# c - 如何以原始用户身份从 sudo 程序执行命令？

> ID：10778981
> 
> 赞同：5
> 
> 时间：2012-05-28T03:16:37.287
> 
> 标签：c, unix, sudo

我必须用来`sudo`运行我的程序：

```
 sudo ./my_program 
```

我正在尝试`git clone`从我的程序运行，但它尝试使用 root 用户的 SSH 密钥而不是我的。有没有办法以最初调用我的程序的用户身份执行这个命令？

我想我可以做到：

```
su - original_user -c "git --version" 
```

但是我如何找出原始用户的用户名？还是有另一个优雅的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T03:31:58.900

[`sudo`](http://www.sudo.ws/sudo/sudo.man.html)手册显示应该`$SUDO_USER`给你原始用户的用户名并`$SUDO_UID`给出原始用户的 UID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T03:30:05.440

在从 Web 应用程序创建文件时，我在 NAS 上遇到了 Samba 问题。

在这种情况下，我检索了正在运行的进程并确定了哪个用户正在运行 samba。隔离该名称后，我拥有了正确的用户帐户。也许这也适用于您的情况？

在这种情况下，我想您需要过滤 ps 输出并查找程序的名称。通过在 bash 上测试它是否有效。

# c# - 如何忽略递归缓存数据以将它们完全获取到数据库存储中？

> ID：10778984
> 
> 赞同：0
> 
> 时间：2012-05-28T03:17:33.803
> 
> 标签：c#, entity-framework, caching

在我的 DBMS 上，我有两个具有一对多关系的表（A <- B）。在第一次运行时，我检索了 A（包括 B）的一些记录，如下所示：

```
var lst = from a in ctx.As.Include("Bs") select a; 
```

所以，一切正常。但是几分钟后，我想再次获得它们，因为它们可以在其他应用程序上进行更改。

我试着用

```
ctx.Refresh(RefreshMode.StoreWins, lst); 
```

当我这样做时，唯一刷新的是来自 B 的对象，而不是 A。因此，我必须执行另一个步骤，例如：

```
foreach (var a in lst) {
    ctx.Refresh(RefreshMode.StoreWins, a.Bs);
} 
```

如果我没有`Bs`在linq语句中包含也可以，然后使用`Load`方法而不是`Refresh`

这里的问题是调用`Refresh`或调用`Load`次数过多可能会降低性能。如何在没有这么多调用的情况下从数据库存储中重新加载它们？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:00:02.000

> 但几分钟后...

上下文是工作单元，工作单元通常不需要几分钟，因此您问题的基本答案是创建新上下文并再次执行查询。

如果您真的认为您的上下文必须存在这么长时间（我怀疑它必须存在，因为在这种情况下您不想覆盖本地更改），您可以试试这个：

```
ctx.As.MergeOption = MergeOption.OverwriteChanges;
ctx.Bs.MergeOption = MergeOption.OverwriteChanges;
var lst = from a in ctx.As.Include("Bs") select a; 
```

# android - 让 Android 应用程序在后台运行

> ID：10778987
> 
> 赞同：0
> 
> 时间：2012-05-28T03:19:14.227
> 
> 标签：android, cordova

我正在开发一个将实时音频流式传输到设备的应用程序。但是，对于某些设备，当用户浏览互联网时，应用程序会停止音频播放。解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T03:20:11.163

**`Services`**您可以为此类后台活动使用调用的 Android 组件。**[Service](http://developer.android.com/guide/topics/fundamentals/services.html)**是一个应用程序组件，可以在后台执行长时间运行的操作，并且不提供用户界面

# django - 如何在 Django 中删除缓存的模板片段？

> ID：10778988
> 
> 赞同：11
> 
> 时间：2012-05-28T03:19:15.683
> 
> 标签：django, django-cache, python-memcached

以前，我在我的 Django 模板中设置了一个缓存的 HTML 块，如下所示。

```
{% load cache %}            
    {% cache 10000 courseTable %} <!-- Cached HTML --> {% endcache %} 
```

现在，我已经更新了这个缓存的内容并想要刷新它。我尝试更改时间无济于事：

```
{% load cache %}            
    {% cache 0 courseTable %} <!-- Updated Cached HTML --> {% endcache %} 
```

在这种情况下，页面仍然显示旧的缓存 HTML。

我还尝试删除与缓存相关的模板标签并重新插入它们。但是，在这种情况下，内容只是在我重新插入缓存模板标签后恢复为最初缓存的内容。

我能做些什么？我不想等待大约 2 小时来重新加载我的缓存。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-03-09T21:39:53.043

对于 Django 1.6+ 和[Django 文档](https://docs.djangoproject.com/en/1.11/topics/cache/#django.core.cache.utils.make_template_fragment_key)，您只需生成要查找的部分的密钥并将其删除：

```
from django.core.cache import cache
from django.core.cache.utils import make_template_fragment_key

# cache key for {% cache 500 sidebar username %} templatetag
key = make_template_fragment_key('sidebar', [username])
cache.delete(key) # invalidates cached template fragment 
```

您只需要`make_template_fragment_key`使用先前定义的`courseTable`参数进行调用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T04:47:16.630

如果您有能力完全清空 memcached，请运行[`flush_all`](http://www.mernin.com/blog/2008/10/how-to-flush-the-contents-of-a-memcached-instance/)cmd 或干脆

```
from django.core.cache import cache
cache.clear() 
```

否则您必须[手动生成缓存键](https://github.com/django/django/blob/master/django/templatetags/cache.py#L26)。在`timeout`密钥过期之前不会刷新。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-18T23:34:50.297

在 Django 1.6 之前，`cache`模板标签或多或少地在标签定义的主体中构建了它的缓存键（参见[此处](https://github.com/django/django/blob/stable/1.5.x/django/templatetags/cache.py#L31)）。从 1.6 开始，模板片段缓存键已使用该`django.core.cache.utils.make_template_fragment_key`函数构建（参见[此处](https://github.com/django/django/blob/stable/1.6.x/django/core/cache/utils.py#L10)）。

在任何情况下，您都可以通过使用或定义来删除特定的缓存片段，`make_template_fragment_key`以获取其缓存键，如下所示：

```
from __future__ import unicode_literals

import hashlib
from django.core.cache import cache
from django.utils.encoding import force_bytes
from django.utils.http import urlquote

TEMPLATE_FRAGMENT_KEY_TEMPLATE = 'template.cache.%s.%s'

def make_template_fragment_key(fragment_name, vary_on=None):
    if vary_on is None:
        vary_on = ()
    key = ':'.join(urlquote(var) for var in vary_on)
    args = hashlib.md5(force_bytes(key))
    return TEMPLATE_FRAGMENT_KEY_TEMPLATE % (fragment_name, args.hexdigest())

def delete_cached_fragment(fragment_name, *args):
    cache.delete(make_template_fragment_key(fragment_name, args or None))

delete_cached_fragment('my_fragment', 'other', 'vary', 'args') 
```

此代码直接从 django 代码库复制，因此适用[此](https://github.com/django/django/blob/master/LICENSE)许可和版权。

# c# - Android Java 到 Mono C# - MapView.LayoutParams

> ID：10778989
> 
> 赞同：0
> 
> 时间：2012-05-28T03:19:48.057
> 
> 标签：c#, java, android, android-mapview, xamarin.android

我正在为 Android 应用程序将一些 Android Java 移植到 Mono C#。IDE`MapView.LayoutParams`中似乎没有以下内容：`Mono for Android C#`

```
 MapView.LayoutParams params = new MapView.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, point,
            MapView.LayoutParams.BOTTOM_CENTER);
    params.mode = MapView.LayoutParams.MODE_MAP; 
```

这将如何转换为适用于 Android C# 的 Mono？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:27:50.323

正如@LexLi 所说，

[Android.GoogleMaps.MapView.LayoutParams](http://androidapi.xamarin.com/?link=T%3aAndroid.GoogleMaps.MapView%2bLayoutParams)类是您想要的。

这是 C# 代码：

```
MapView.LayoutParams layoutParams = new MapView.LayoutParams(
    MapView.LayoutParams.WrapContent, MapView.LayoutParams.WrapContent,
    point, MapView.LayoutParams.BottomCenter);
layoutParams.Mode = MapView.LayoutParams.ModeMap; 
```

Mono for Android 非常相似，只是大小写有所不同。这通常是直接翻译的情况。更复杂的是以“正确的”.NET 方式使用库，例如​​将 Delegates 方式转换为 Events 方式。

并希望 Xamarin 团队将这些 const 转换为 Enum：

[Android.GoogleMaps.MapView.LayoutParams：字段成员](http://androidapi.xamarin.com/?link=T%3aAndroid.GoogleMaps.MapView%2bLayoutParams%2fF)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T05:49:52.177

[http://androidapi.xamarin.com/?link=T%3aAndroid.GoogleMaps.MapView%2bLayoutParams](http://androidapi.xamarin.com/?link=T%3aAndroid.GoogleMaps.MapView%2bLayoutParams)

那是你要找的吗？

# c++ - 虚函数上的 C++ 多态性

> ID：10778991
> 
> 赞同：1
> 
> 时间：2012-05-28T03:20:36.340
> 
> 标签：c++, function, inheritance, polymorphism, virtual

我试图弄清楚 C++ 中如何处理继承和多态性，这似乎与我在 Java 中习惯的有点不同。我试图在其中一个函数中返回一个基类，但是当收到返回时，我希望该对象成为派生类。但是，它并没有像我预期的那样工作。

```
#include "Prefixer.h"
using namespace std;

Prefixer::Prefixer( Lexer l ){
    lexer = l;
}

Expr Prefixer::expr() {
    Expr left = term();
    Expr right = termTail();
    cout << left.name();
    cout << right.name();
    return left;
}

Expr Prefixer::term() {
    NullExpr temp;
    return temp;
}

Expr Prefixer::termTail() {
    NullExpr temp;
    return temp;
} 
```

但是返回的 left.name() 和 right.name() 都调用了 Expr（基类）的虚拟 name() 函数：C。我怎样才能让他们从派生类 NullExpr 调用重载的 name() 函数？

```
string Expr::name() {
    return "expr";
}

string NullExpr::name() {
    return "null";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T03:22:28.657

你需要做`left`和`right`是`Expr*`或`Expr&`，不是`Expr`。

与 Java 不同，C++ 中类类型的变量包含实际实例，而不是对实例的引用。

所以当你这样做时：

```
Expr left = term(); 
```

您实际上是在调用`Expr`的复制构造函数，它只会创建基`Expr`类的实例。

在 Java 中，这是非常不同的——你只是设置`left`引用一些现有的对象，而不是创建一个新的对象。

因此，需要拥有`left`并`right`成为引用或指针——这样在 C++ 中就会发生与在 Java 中发生的事情相同的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T03:26:52.517

您的问题始于以下代码：

```
Expr Prefixer::term()
{
    NullExpr temp;
    return temp;
} 
```

`temp`是一个局部变量，在函数结束时被销毁。返回值通过*复制*返回表达式创建一个`Expr`实例（因为这是返回类型）。调用者永远不会看到对象。*`temp``NullExpr`*

 *Java 所做的基本上是：

```
Expr* Prefixer::term()
{
    NullExpr* temp = new NullExpr;
    return temp;
} 
```

但是你不能在 C++ 中盲目地这样做，否则你会导致内存泄漏（Java 有垃圾收集器，C++ 没有）。您可以使用以下方法释放内存`delete`：

```
Expr* left = term();
left->name();
delete name; 
```

更推荐的方法是使用智能指针，当指向它的最后一个指针消失时自动销毁该对象：

```
shared_ptr<Expr> Prefixer::term()
{
    NullExpr* temp = new NullExpr;
    return temp;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T03:24:01.483

要使用该方法`dynamic-binding`（或调用带有基对象句柄的重载子类方法），您应该使用引用或指针来操作对象。如果这样实现，请确保返回对象的生命周期足够长，以便在方法终止后可以访问它。您会发现它与 Java 不同，因为 Java 中的所有对象确实是对堆上存储的引用，而不是对象本身。*

# android - 我应该在自定义代码之前还是在重写方法之后调用 super.xxxx()？

> ID：10778997
> 
> 赞同：3
> 
> 时间：2012-05-28T03:21:53.633
> 
> 标签：android

我应该在自定义代码之前还是在重写方法之后调用 super.xxxx()？
是否有一些技能可以识别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T03:49:32.293

简短的回答：这取决于。

长答案：您需要了解父类中方法的实现是做什么的。

*   在某些情况下，超级方法会执行一些“初始化”工作，以使被覆盖的方法能够顺利运行。在这种情况下，`super.myMethod()`调用应该是方法中的第一行。
*   在其他一些情况下，父类中方法的实现可能负责一些清理（或某种终结）操作。那是您需要调用覆盖实现中`super`的**最后一行的时候。**
*   然后有些情况下顺序无关紧要，但你必须调用 super 方法，因为基类中的实现执行了一些必要的操作；尽管这些操作的顺序无关紧要。大多数`Activity`生命周期方法都属于这一类。这就是为什么你**必须**调用它，`super.onCreate()`尽管你可以在你的`onCreate()`.
*   最后，也有不需要调用 super 方法的情况。基类有一个默认实现，您可以选择使用或忽略它。您可能还会在这里执行 if-else：例如，您可能会调用 super 实现。如果它返回 a `null`，您可能会创建一个新对象并返回它。

> 是否有一些技能可以识别？

*   阅读方法文档，看看是否有提到`super`必须调用该方法的顺序。
*   浏览基类的源代码，看看你是否能弄清楚它是否做了任何需要以特定顺序调用它的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T03:43:31.337

   （非常 OOPy）通常，这个想法是在您需要父母的功能时调用 super 。我知道这看起来很明显，但它在清理功能方面有影响：

```
Init:
    super.init
    ... your initialization code

Delete:
    ... your deletion code here <-- important
    super.delete

SomeOtherRandomMethod:
    ... your code may go here if it does not need any state from the parent
    super.SomeOtherRandomMethod
    ... otherwise it can go here 
```

    我发现在覆盖开始时调用 super 的代码更简单/更干净（除非有一些*非常*具体的理由不这样做），并确保在我完成*后*调用父级的销毁/删除/释放/销毁我自己的清理（我们绝对不希望父母从我们下面倾倒对象！）

# javascript - 通过 JavaScript 在 ActionScript3 中调用 file.browse() 会触发错误

> ID：10778999
> 
> 赞同：0
> 
> 时间：2012-05-28T03:22:12.520
> 
> 标签：javascript, actionscript-3

这是 AS3 部分：

```
import flash.net.FileReference;
import flash.events.Event;
import flash.external.ExternalInterface;
import flash.system.Security;

Security.allowDomain( "*" );

// file reference:
var file:FileReference = new FileReference();
ExternalInterface.addCallback( "bFile" , choose );

function choose():void{
    ExternalInterface.call( "alert( 'browse' )" );
    file.browse();
} 
```

HTML部分：

```
<object width="1px" height="1px">
<param name="movie" value="./ftest/uploader.swf">
<embed width="1px" height="1px" allowscriptaccess="always" id="uploader" src="./ftest/uploader.swf">
</object> 
```

JS部分：

```
$( "#uploader" )[ 0 ].bFile(); 
```

**更新**： - [通过单击按钮调用的操作]

`$( "#uploader" )[ 0 ]`返回对象（就像我使用的一样`getElementById`）。

触发时，会抛出带有“broswe”的警报，因此，我知道`choose()`它被调用了。

**但**它没有进一步。

我在每个浏览器的控制台中都得到了这些行：未捕获的错误：在 NPObject 上调用方法时出错。

你能帮我弄清楚这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:27:59.387

相信您的问题与安全相关，必须调用浏览方法以直接响应用户交互（KeyboardEvent 或 MouseEvent）。阅读文档中有关此内容的具体详细部分：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#browse](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#browse) ()

我引用的文档中的部分：

在 Flash Player 10 和 Flash Player 9 Update 5 中，您只能成功调用此方法以响应用户事件（例如，在鼠标单击或按键事件的事件处理程序中）。否则，调用此方法会导致 Flash Player 引发错误异常。