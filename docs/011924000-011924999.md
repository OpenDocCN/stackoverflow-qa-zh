# StackOverflow 问答 11924000-11924999

# php - 使用 CakePHP 上传文件（PDF 和图像）

> ID：11924003
> 
> 赞同：0
> 
> 时间：2012-08-12T16:56:01.123
> 
> 标签：php, cakephp

我想做的事我以前从未做过。我正在使用 CakePHP 构建表单，我正在使用表单助手来执行此操作。这一切都适用于输入和文本区域，但我现在正试图将我的两个输入更改为文件上传字段。

当我调试 $this->data['Event']['img'] （表单是调用事件）时，我已经完成了这项工作并且看起来很有效。我得到以下输出：

```
Array
 (
   [name] => logo.gif
   [type] => image/gif
   [tmp_name] => /tmp/phpaU3aBa
   [error] => 0
   [size] => 7318
 ) 
```

现在我在这里做客，但我必须将文件保存到我的“webroot”文件夹中。我已经创建了路径 /webroot/eventfiles/img & webroot/eventfiles/pdf - 我现在开始只做图像，所以我可以让它工作，但我要上传的另一种文件类型是 pdf。

现在我已经查看了 CakePHP 网站的内容，但我只是说要查看 PHP 网站，似乎有很多方法可以做到这一点，但我只是不知道如何保存它。这样我以后可以访问它，例如它进入 webroot 文件夹以便 Cake 可以看到它。

另外作为旁注，还需要将路径+文件名保存到数据库中。除非我错了，否则这应该很容易，只需使用 $this->data['Event']['img']['name'] 并将其保存到我的数据库中。

请帮忙？我已经为此工作了好几天。我似乎无法理解文件上传。有没有简单的方法来做到这一点？例如，Cake 如何作为 HTML 和表单助手，一种保存上传文件的简单方法？

谢谢你提供的所有帮助。

格伦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:56:33.943

尽管我会发布我的答案，但它完全有效。我从两个文件输入文件中获取一个 pdf 和 jpeg 图像，然后重命名为用户在输入文本字段中提供的给定标题。使用 $newevent 中的两个变量，这些是与其他输入一起保存到数据库、路径和重命名的图像的内容。

这段代码非常简单。该代码的主体来自该站点上的一篇文章，我刚刚将其更改为供我使用。

如果您还尝试添加/上传不同的文件类型，例如 doc 或 png，您只需要知道要上传的文档的标题类型并将其添加到 if 语句。

希望这对其他人有帮助！

格伦。

```
 $pathimg = "/eventfiles/img/";
            $pathpdf = "/eventfiles/pdf/";
            $dir_pdf = getcwd().$pathpdf;
            $dir_img = getcwd().$pathimg;
            $PDF_Path = $dir_pdf .  $this->data['Event']['pdf']["name"];
            $IMG_Path = $dir_img .  $this->data['Event']['img']["name"];
            $IMG_WithOutSpace = preg_replace('/\s+/', '_', $newevent['title']);
            $PDF_WithOutSpace = preg_replace('/\s+/', '_', $newevent['title']);

            $newevent['img'] = "/vh/eventfiles/img/" . $IMG_WithOutSpace . ".jpg";
            $newevent['pdf'] = "/vh/eventfiles/pdf/" . $PDF_WithOutSpace . ".pdf";

        if ((( $this->data['Event']['img']["type"] == "application/pdf") || ( $this->data['Event']['img']["type"] == "image/jpeg"))) {
          if (($this->data['Event']['img']["error"] > 0) || ($this->data['Event']['pdf']["error"] > 0)) {
            $this->Session->setFlash(__('An error has occured during updating. Please check all the fields.', true), 'default', array('class' => 'error-message'));
            $this->redirect($this->referer());
            exit();
          } else {

              move_uploaded_file( $this->data['Event']['img']["tmp_name"], $IMG_Path);
              rename($IMG_Path, $dir_img . $IMG_WithOutSpace. ".jpg");

              move_uploaded_file( $this->data['Event']['pdf']["tmp_name"], $PDF_Path);
              rename($PDF_Path, $dir_pdf . $PDF_WithOutSpace . ".pdf");

              $filename= $this->data['Event']['pdf']["name"];
              $filename= $this->data['Event']['img']["name"];
          } 
```

# netty - netty 4.0.0.Alpha 或 3.5.2.Final 用于新项目？

> ID：11924004
> 
> 赞同：3
> 
> 时间：2012-08-12T16:56:05.603
> 
> 标签：netty

无法自己决定在新项目中应该使用哪个版本的 netty。netty 4.x 有路线图或发布时间表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T05:20:27.183

如果一切顺利，Netty 4.0.0.Final 应该会在大约 2 个月后发布。因此，根据您的项目，您可以选择适合您的版本。我会使用 4.x，但我是 netty 的开发人员之一，所以这可能是原因；）

# extjs - extjs4.0 行网格编辑器多选组合在未选择时显示键而不是值

> ID：11924011
> 
> 赞同：1
> 
> 时间：2012-08-12T16:56:50.353
> 
> 标签：extjs

![ 我正在使用 extjs 4 。并使用 RowEditing 插件，添加了多选组合框，组合框显示键而不是值，但是当我选择任何行时，它显示值，之后当我对任何 gievn 行中的数据进行一些更改时，然后值开始显示。

此外，当未选中该行并在选中该行时显示该复选框时，我也看不到该复选框。

代码

型号是：

```
Ext.define('Employee', {
extend: 'Ext.data.Model',
idProperty:'employeeId',
fields: [
        {name: 'alertType', type: 'string'},
        {name: 'statusCode', type: 'bool'},
        {name: 'employeeId', type: 'string'},
        {name: 'employeeName', type: 'string'},
        {name: 'jobCode', type: 'string'},
        {name: 'jobTitle', type: 'string'},
        {name: 'jobTarget', type: 'string'},
        {name: 'vpPlan', type: 'string'},
        {name: 'losPlanName', type: 'string', convert:function(v, record){if(typeof v =="string") return v.split(",");  else return v; }},
        {name: 'losPlanCodes', type: 'float[]', convert:function(v, record){if(typeof v =="string") return v.split(",");  else return v; }},
        {name: 'losLocation', type: 'string', convert:function(v, record){if(typeof v =="string") return v.split(",");  else return v; }},
        {name: 'losLocationCodes', type: 'float[]', convert:function(v, record){if(typeof v =="string") return v.split(",");  else return v; }},
        {name: 'entity', type: 'string'},
        {name: 'locationCode', type: 'string'},
        {name: 'deptId', type: 'string'},
        {name: 'deptName', type: 'string'},
    ] 
```

});

网格商店：-

```
var directReportiesStore = Ext.create('Ext.data.Store', {
    autoDestroy: true,
    autoLoad:true,
    autoSync: true,
    allowSingle: true,
    storeId: 'directReportiesStore',
    model: 'Employee',
    sorters: [{
        property: 'employeeName',
        direction:'ASC'
    }],
    proxy: {    
        type: 'ajax',
        url: 'getDirectReportiesJson.do?plannerId='+plannerId,
        api: {
            update: 'getDirectReportiesJson.do?plannerId='+plannerId,
        },
        reader: {
            type: 'json',
            successProperty: 'success',
            idProperty: 'employeeId',
            root: 'data',
            messageProperty: 'message'
        },
        writer: {
            type: 'json',
            writeAllFields: false
        },
        listeners: {
            exception: function(proxy, response, operation){
                Ext.MessageBox.show({
                    title: 'REMOTE EXCEPTION',
                    msg: operation.getError(),
                    icon: Ext.MessageBox.ERROR,
                    buttons: Ext.Msg.OK
                });
            }
        }
    },
    listeners: {
        write: function(proxy, operation){
            Ext.example.msg(operation.action, operation.resultSet.message);
        }
    },
    listeners: {
        load: function(store,records){
                for(var rec=0; rec< records.length; rec++){
                    for(var i=0; i< Ext.getCmp('employeeGrid').columns.length; i++){
                        if(Ext.getCmp('employeeGrid').columns[i].getId() =='losLocationCodes'){
                            alert(Ext.getCmp('employeeGrid').columns[i].getId())
                            Ext.getCmp('employeeGrid').columns[i].getEditor().setValue(records[rec].get('losLocationCodes'))
                            alert(records[rec].get('losLocationCodes'));
                        }
                    }
                }
        }
    }
}); 
```

![][1]

组合框商店：

```
// create the Plan Store
var planStore = Ext.create('Ext.data.Store', {
    autoDestroy: true,
    storeId: 'planStore',
    idIndex: 0,
    fields: [
        {name: 'planId', type: 'float'},
        {name: 'planName', type: 'string'},
        {name: 'planTypeName', type: 'string'},
   ]
});

planStore.loadData(plansJson);

// create the Location Store
var locationStore = Ext.create('Ext.data.Store', {
    autoDestroy: true,
    storeId: 'locationStore',
    idIndex: 0,
    fields: [
        {name: 'locAreaId', type: 'float'},
        {name: 'locAreaName', type: 'string'},
        {name: 'active', type: 'string'},
        {name: 'inclRegAvg', type: 'string'},
   ]
});

locationStore.loadData(locationJson); 
```

GRID 使用所有三个商店...

```
var grid = Ext.create('Ext.grid.Panel', {
    store: directReportiesStore,
    id:'employeeGrid',
    title: 'Employee Varieable Pay Mapping',
    width: 1100,
    height: 400,
    frame: true,
    columns: [{
        id: 'alertType',
        header: 'Alert',
        width: 30,
        dataIndex: 'alertType',
        editor: {
            disabled: true
        }
    } , {
        id: 'statusCode',
        header: 'Reviewed?',
        dataIndex: 'statusCode',
        width: 40,
        editor: {
            xtype: 'checkbox',
            cls: 'x-grid-checkheader-editor'
        }
    } , {
        id: 'employeeId',
        header: 'Employee Id',
        dataIndex: 'employeeId',
        width: 50,
        editor: {
            disabled: true
        }
    } ,{
        id: 'employeeName',
        header: 'Employee Name',
        dataIndex: 'employeeName',
        flex: 1,
        editor: {
            disabled: true
        }
    } ,{
        id: 'jobCode',
        header: 'Job Code',
        dataIndex: 'jobCode',
        width: 40,
        editor: {
            disabled: true
        }
    } ,{
        id: 'jobTitle',
        header: 'Job Title',
        dataIndex: 'jobTitle',
        flex: 1,
        editor: {
            disabled: true
        }
    } ,{
        id: 'jobTarget',
        header: 'Job Target',
        dataIndex: 'jobTarget',
        width: 40,
        editor: {
            disabled: true
        }
    } , {
        id:'vpPlan',
        header: 'VP Plan',
        dataIndex: 'vpPlan',
        width: 70,
        editor: {
            xtype: 'combobox',
            typeAhead: true,
            editable: false,
            triggerAction: 'all',
            selectOnTab: true,
            store: [
                ['SCAL','SCAL'],
                ['Shared Svc','Shared Svc'],
            ],
            lazyRender: true,
            listClass: 'x-combo-list-small'
        }
    }, {
        id:'losPlanCodes',
        header: 'LOS Plan Name',
        dataIndex: 'losPlanCodes',
        width: 250,
        editor: {
            xtype: 'combobox',
            typeAhead: true,
            triggerAction: 'all',
            tooltip: 'losPlanName',
            selectOnTab: true,
            store: planStore,
            queryMode: 'local',
            lazyRender: true,
            multiSelect: true,
            displayField: 'planName',
            valueField:'planId'
        }
    }, {
        id:'losLocationCodes',
        header: 'LOS Location',
        dataIndex: 'losLocationCodes',
        width: 90,
        editor: {
            xtype: 'combobox',
            typeAhead: true,
            triggerAction: 'all',
            selectOnTab: true,
            autoSelect: true,
            store: locationStore,
            queryMode: 'local',
            multiSelect: true,  
            lazyRender: true,
            valueField:'locAreaId',
            displayField: 'locAreaName',
            listClass: 'x-combo-list-small'
            //value: 'losLocationCodes',
            //data : 'losLocationCodes',
            /*
            listeners : {
                'beforeselect' : function(combo, record,index){
                },
                'change': function(combo, newValue, oldValue){
                },
                'afterrender': function(combo, record1) {
                }
            }
        */
        }
    },{
        id: 'Entity',
        header: 'entity',   
        dataIndex: 'entity',
        width: 30,
        editor: {
            disabled: true
        }
    } , {
        id: 'locationCode',
        header: 'Location Code',
        dataIndex: 'locationCode',
        width: 50,
        editor: {
            disabled: true
        }
    } ,{
        id: 'deptId',
        header: 'Dept Code',
        dataIndex: 'deptId',
        width: 50,
        editor: {
            disabled: true
        }
    } ,{
        id: 'deptName',
        header: 'Dept Name',
        dataIndex: 'deptName',
        flex: 1,
        editor: {
            disabled: true
        }
    }],
    selModel: {
        selType: 'cellmodel'
        //selType: 'checkboxmodel'
    },
    renderTo: 'editor-grid',
    tbar: [{
        text: 'Select All'
    }],
    plugins: [
      Ext.create('Ext.grid.plugin.RowEditing', {
          clicksToMoveEditor: 1,
          pluginId: 'employeeEditing',
          autoCancel: false,    
          listeners: {
          'beforeedit': function(editor, e, eOpts) {

         //  alert(editor.rowIdx)
         //    alert(editor.field)
         //   alert(editor.value)

            if (editor.record.get('entity') == 2 || editor.record.get('entity') == 02){
                   grid.getPlugin('employeeEditing').editor.form.findField('losPlanCodes').disable();
                   grid.getPlugin('employeeEditing').editor.form.findField('losLocationCodes').disable();
            } else if (editor.record.get('entity') == 8 || editor.record.get('entity') == 08){
                    grid.getPlugin('employeeEditing').editor.form.findField('losPlanCodes').disable();                        
            }
            /*
                var me = this;
                this.isEditAllowed = false;
                this.cancelEdit();
                    Ext.MessageBox.show({
                    title: 'Not Allowed to Edit',
                    msg: 'Not Allowed to Edit this record with entity'+ this.entity,
                    icon: Ext.MessageBox.INFO,
                    buttons: Ext.Msg.OK
                });
            return true;
            */
          },
         'cancelEdit': function(editor) {
                grid.getPlugin('employeeEditing').editor.form.findField('losPlanCodes').enable();
                grid.getPlugin('employeeEditing').editor.form.findField('losLocationCodes').enable();
          },
          'validateedit': function(e) {

          },
          'edit': function(editor) {
                if (editor.record.get('entity') == 2 || editor.record.get('entity') == 02){
                           grid.getPlugin('employeeEditing').editor.form.findField('losPlanCodes').enable();
                           grid.getPlugin('employeeEditing').editor.form.findField('losLocationCodes').enable();
                        }
                else if (editor.record.get('entity') == 8 || editor.record.get('entity') == 08){
                        grid.getPlugin('employeeEditing').editor.form.findField('losPlanCodes').enable();                        
                }
         }
        }
      })
  ],
  listeners: {
          'render': function(grid) {
          }
      }
});
grid.getSelectionModel().on('selectionchange', this.onSelectChange, this); 
```

请帮忙

][1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T02:15:54.643

您现在可能已经想通了，但如果没有，您需要`renderer`在列配置上进行自定义以提取显示字段，即：

```
{
    id:'losPlanCodes',
    header: 'LOS Plan Name',
    dataIndex: 'losPlanCodes',
    width: 250,
    editor: {
        xtype: 'combobox',
        typeAhead: true,
        triggerAction: 'all',
        tooltip: 'losPlanName',
        selectOnTab: true,
        store: planStore,
        queryMode: 'local',
        lazyRender: true,
        multiSelect: true,
        displayField: 'planName',
        valueField:'planId'
    },
    renderer: function(value, metaData, record, row, col, store, view) {
        return planStore.getById(value).get('planName');
    }
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:53:19.967

您很可能在加载数据之前设置组合框的值。查看事件的顺序，尝试在商店加载时使用回调，然后设置其值。

# python - python - 从列表中获取项目编号

> ID：11924012
> 
> 赞同：0
> 
> 时间：2012-08-12T16:56:55.050
> 
> 标签：python, list, numbers, int

我刚刚问了以下问题：

[Python - 在列表中查找最接近 0 的整数](https://stackoverflow.com/questions/11923657/python-find-integer-closest-to-0-in-list)

最好的答案是使用：`min(lst, key=abs)`.

该代码返回列表中的项目。

如何从列表中获取项目**编号**？（即`2`代替`-18`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T16:58:39.440

您需要使用索引来扩充您的列表：

```
min(enumerate(lst), key=lambda x: abs(x[1])) 
```

它将返回索引*和*最接近零的值，`[0]`如果您只需要索引则使用。

在你的例子中：

```
>>> example = [237, 72, -18, 237, 236, 237, 60, -158, -273, -78, 492, 243]
>>> min(enumerate(example), key=lambda x: abs(x[1]))
(2, -18)
>>> min(enumerate(example), key=lambda x: abs(x[1]))[0]
2 
```

这是非常有效的（最坏情况为 O(n)）；您也可以使用`example.index(min(example, key=abs))`，但在最坏的情况下（O（2n））必须通过列表两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T17:00:36.767

尝试：

`lst.index(min(lst, key=abs))`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T17:01:16.243

一种方法是在找到要查找的整数后，可以使用“索引”...

```
result = min(lst, key=abs)
index = lst.index(result)
print(index) # prints 2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T17:01:49.887

```
>>> lst = [237, 72, -18, 237, 236, 237, 60, -158, -273, -78, 492, 243]
>>> lst.index(min(lst, key=abs))
2 
```

# php - 为不同的分支生成不同的自动编号

> ID：11924014
> 
> 赞同：0
> 
> 时间：2012-08-12T16:57:01.470
> 
> 标签：php, mysql

我目前正在为一家拥有许多分支机构的公司开发一个小型发票系统。我想知道如何根据每个分支生成不同的发票自动编号。这是我的表结构表`invoice_header`：

```
id | number | cust | grand_total 
```

我应该为每个分支创建不同的表吗？例如`invoice_header_1, invoice_header_2 , invoice_header_3`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:08:54.873

制作一个包含分支类型的表格会更好，更可行。然后只向表 invoice_header 添加 1 列，然后在分支表中给出确切分支的 id。

通过这种方式，您可以将这两者连接起来并保持干净整洁。并且更容易编辑。

所以：表 invoice_header id | 号码 | 客户 | 总计| branch_id

表分支id | 分店名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:45:47.480

如果您使用`ENGINE=MyISAM`，MySQL 将为您执行此操作：

```
创建表 invoice_header (
branch_id INT UNSIGNED NOT NULL，
id INT UNSIGNED NOT NULL AUTO_INCREMENT,
number INT UNSIGNED NOT NULL DEFAULT 1,
cust INT UNSIGNED NOT NULL,
grand_total DECIMAL(10,2) NOT NULL DEFAULT 0,
主键（branch_id，id）
) 引擎=MyISAM;

```

MySQL 将为`id`列生成一个唯一值，从 1 开始，但对于每个不同的`branch_id`. 这仅在引擎为`MyISAM`.

[在http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)中搜索“多列索引”以获取更多信息。

# c# - 反编译的 HtmlDocument 的 InvokeScript 不起作用

> ID：11924016
> 
> 赞同：0
> 
> 时间：2012-08-12T16:57:15.963
> 
> 标签：c#, .net, reflection, webbrowser-control, ilspy

这是我使用 ILSpy 得到的代码：

```
public static object InvokeScript(this IHTMLDocument2 document, string scriptName, object[] args = null)
{
    object result = null;
    UnsafeNativeMethods.tagDISPPARAMS tagDISPPARAMS = new UnsafeNativeMethods.tagDISPPARAMS();
    tagDISPPARAMS.rgvarg = IntPtr.Zero;
    try
    {
        UnsafeNativeMethods.IDispatch dispatch = ((IHTMLDocument)document).Script as UnsafeNativeMethods.IDispatch;
        if (dispatch != null)
        {
            Guid empty = Guid.Empty;
            string[] rgszNames = new string[]
            {
                scriptName
            };
            int[] array = new int[]
            {
                -1
            };
            int iDsOfNames = dispatch.GetIDsOfNames(ref empty, rgszNames, 1, UnsafeNativeMethods.GetThreadLCID(), array);
            if (UnsafeNativeMethods.Succeeded(iDsOfNames) && array[0] != -1)
            {
                if (args != null)
                {
                    Array.Reverse(args);
                }
                tagDISPPARAMS.rgvarg = ((args == null) ? IntPtr.Zero : ArrayToVARIANTVector(args));
                tagDISPPARAMS.cArgs = ((args == null) ? 0 : args.Length);
                tagDISPPARAMS.rgdispidNamedArgs = IntPtr.Zero;
                tagDISPPARAMS.cNamedArgs = 0;
                object[] array2 = new object[1];
                if (dispatch.Invoke(array[0], ref empty, UnsafeNativeMethods.GetThreadLCID(), 1, tagDISPPARAMS, array2, new UnsafeNativeMethods.tagEXCEPINFO(), null) == 0)
                {
                    result = array2[0];
                }
            }
        }
    }
    catch (Exception ex)
    {
        if (IsSecurityOrCriticalException(ex))
        {
            throw;
        }
    }
    finally
    {
        if (tagDISPPARAMS.rgvarg != IntPtr.Zero)
        {
            FreeVARIANTVector(tagDISPPARAMS.rgvarg, args.Length);
        }
    }
    return result;
} 
```

我还得到了一些从这个方法调用的其他方法。这是我的称呼（注意是扩展方法）：

```
var doc = Browser.Document.DomDocument as IHTMLDocument2;
doc.InvokeScript("alert", new object[] { "hi" }); 
```

但是这条线`int iDsOfNames = dispatch.GetIDsOfNames(ref empty, rgszNames, 1, UnsafeNativeMethods.GetThreadLCID(), array);`抛出一个`AccessViolationException`. 我不确定的一件事是这`UnsafeNativeMethods.IDispatch dispatch = ((IHTMLDocument)document).Script as UnsafeNativeMethods.IDispatch;`条线。实际的 ILSpy 行是`UnsafeNativeMethods.IDispatch dispatch = this.NativeHtmlDocument2.GetScript() as UnsafeNativeMethods.IDispatch;`但由于某种原因我没有该`GetScript`方法。

知道我在做什么错吗？

*编辑*

这是我的 IDispatch：

```
 [Guid("00020400-0000-0000-C000-000000000046"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown), SuppressUnmanagedCodeSecurity]
    [ComImport]
    internal interface IDispatch
    {
        [SecurityCritical]
        void GetTypeInfoCount(out uint pctinfo);
        [SecurityCritical]
        void GetTypeInfo(uint iTInfo, int lcid, out IntPtr info);
        [SecurityCritical]
        void GetIDsOfNames(ref Guid iid, [MarshalAs(UnmanagedType.LPArray, ArraySubType = UnmanagedType.LPWStr, SizeParamIndex = 2)] string[] names, uint cNames, int lcid, [MarshalAs(UnmanagedType.LPArray, ArraySubType = UnmanagedType.I4, SizeParamIndex = 2)] [Out] int[] rgDispId);
        [PreserveSig]
        int GetIDsOfNames([In] ref Guid riid, [MarshalAs(UnmanagedType.LPArray)] [In] string[] rgszNames, [MarshalAs(UnmanagedType.U4)] [In] int cNames, [MarshalAs(UnmanagedType.U4)] [In] int lcid, [MarshalAs(UnmanagedType.LPArray)] [Out] int[] rgDispId);
        [SecurityCritical]
        void Invoke(int dispIdMember, ref Guid riid, int lcid, System.Runtime.InteropServices.ComTypes.INVOKEKIND wFlags, ref System.Runtime.InteropServices.ComTypes.DISPPARAMS pDispParams, IntPtr pvarResult, IntPtr pExcepInfo, IntPtr puArgErr);
        [PreserveSig]
        int Invoke(int dispIdMember, [In] ref Guid riid, [MarshalAs(UnmanagedType.U4)] [In] int lcid, [MarshalAs(UnmanagedType.U4)] [In] int dwFlags, [In] [Out] tagDISPPARAMS pDispParams, [MarshalAs(UnmanagedType.LPArray)] [Out] object[] pVarResult, [In] [Out] tagEXCEPINFO pExcepInfo, [MarshalAs(UnmanagedType.LPArray)] [Out] IntPtr[] pArgErr);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:30:23.393

编辑：GetIDsOfNames 中的 dispid 参数是调用者提供的数组，因此您不能使用 [out] （这意味着被调用者在 COM 堆上分配数组）。

如果没有看到你的声明就很难说`UnsafeNativeMethods.IDispatch`，但是`GetIDsOfNames`在没有固定 dispid 数组或向参数添加 ref 的情况下调用是错误的。`GetIDsOfNames`如果您通过按值传递地址来封送数组，则垃圾收集器可以在调用仍在运行时移动数组，并且本机代码将在返回时写入野指针。如果您将数组作为引用传递，那么您的代码将无法编译 - 您需要将 ref 添加到参数中。

您可以使用`System.Type.InvokeMember`方法通过脚本对象访问全局变量或函数。这个方法调用`IDispatch::GetIDsOfNames`和`IDispatch::Invoke`为你。

# android - 为什么 toString() 返回一个十六进制代码？

> ID：11924018
> 
> 赞同：0
> 
> 时间：2012-08-12T16:57:20.603
> 
> 标签：android, tostring, last.fm

我在我的应用程序中写了这个

```
LastFmServer server = AndroidLastFmServerFactory.getServer();
Artist[] results;
results = server.searchForArtist("Hatebreed"); 
Log.e("", results[2].toString()); 
```

为什么这段代码会出现在 logcat 中？

```
fm.last.api.Artist@2bf03488 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T16:59:14.023

这是因为该类没有实现它自己的 toString，所以你最终调用了继承自`java.lang.Object`它的类，它为你提供了类名和它的哈希值。

# android - 使用 setLookAtM 方法的 Android OpenGL 怪异

> ID：11924020
> 
> 赞同：5
> 
> 时间：2012-08-12T16:57:30.700
> 
> 标签：android, opengl-es, matrix

作为 android 和 openGL 2.0 es 的初学者，我正在测试简单的东西，看看它是如何进行的。

[我在http://developer.android.com/training/graphics/opengl/touch.html](http://developer.android.com/training/graphics/opengl/touch.html)下载了示例。

我更改了代码以检查是否可以为相机围绕 (0,0,0) 点（正方形中心）的旋转设置动画。

所以我这样做了：

```
public void onDrawFrame(GL10 unused) {
    // Draw background color
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    // Set the camera position (View matrix)
    long time = SystemClock.uptimeMillis() % 4000L;
    float angle = ((float) (2*Math.PI)/ (float) 4000) * ((int) time);
    Matrix.setLookAtM(mVMatrix, 0, (float) (3*Math.sin(angle)), 0, (float) (3.0f*Math.cos(angle)),     0 ,0, 0,     0f, 1.0f, 0.0f);

    // Calculate the projection and view transformation
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);

    // Draw square
    mSquare.draw(mMVPMatrix);
} 
```

我希望相机总是看向正方形的中心（（0,0,0）点），但事实并非如此。相机确实在围绕正方形旋转，但正方形并没有停留在屏幕的中心......而是沿着 X 轴移动......： ![在此处输入图像描述](../Images/48eb2ea118df15e394bfe19082a359fe.png) ![在此处输入图像描述](../Images/dcc8cbc0208539844841dec9f177d569.png)

我还期望如果我们给 eyeX 和 eyeY 赋予与 centerX 和 centerY 相同的值，就像这样：

```
Matrix.setLookAtM(mVMatrix, 0, 1, 1, -3,     1 ,1, 0,     0f, 1.0f, 0.0f); 
```

正方形将保持其形状（我的意思是，您的视野将被拖动，但沿着与正方形平行的平面），但这也不是发生的情况：

![在此处输入图像描述](../Images/21b49b05591b961359cb40808d23579a.png)

这是我的投影矩阵：

```
float ratio = (float) width / height;

// this projection matrix is applied to object coordinates
// in the onDrawFrame() method
Matrix.frustumM(mProjMatrix, 0, -ratio, ratio, -1, 1, 2, 7); 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-12T20:11:48.657

查看您下载的示例的源代码，我可以看到您遇到这个问题的原因，它与矩阵乘法的顺序有关。

通常在 OpenGL 源代码中，您会看到这样设置的矩阵

`transformed vertex = projMatrix * viewMatrix * modelMatrix * input vertex`

但是，在您下载的源示例程序中，它们的着色器设置如下：

`" gl_Position = vPosition * uMVPMatrix;"`

与矩阵另一侧的位置。您可以通过这种方式使用 OpenGL，但它要求您反转矩阵乘法的 lhs/rhs。

长话短说，在您的情况下，您应该将着色器更改为：

`" gl_Position = uMVPMatrix * vPosition;"`

然后我相信你会得到预期的行为。

# ruby - 打包和分发 Ruby 批处理应用程序

> ID：11924023
> 
> 赞同：0
> 
> 时间：2012-08-12T16:57:36.270
> 
> 标签：ruby, package, distribution

我需要打包 Ruby 应用程序（一个批处理作业），然后分发给其他用户。理想情况下，我不需要用户设置 Ruby，并且包中应包含所有依赖项。

有没有简单的方法可以做到这一点？我正在使用 Ruby v1.9.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T01:26:04.733

您的问题不清楚，所以我假设以下情况属实：

*   您和您的用户在 Windows 上
*   这是一个简短的脚本，几乎没有依赖项

鉴于此，您最好的选择可能是“ocra”宝石。有了它，您可以使用 .exe 将脚本打包成 .exe `ocra <script>.rb`。这会将您的 Ruby 运行时、您的脚本使用的任何 gem 以及您的源代码捆绑到一个`<script>.exe`文件中，如下所示：

```
 C:\Users\Walton>cat hello.rb
    puts 'Hello World!'

    C:\Users\Walton>ocra hello.rb
    === Loading script to check dependencies
    Hello World!
    C:/Ruby193/lib/ruby/gems/1.9.1/gems/ocra-1.3.0/bin/ocra:467: Use RbConfig instead of obsolete and deprecated Config.
    === Including 52 encoding support files (5179608 bytes, use --no-enc to exclude)

    === Building hello.exe
    === Adding user-supplied source files
    === Adding ruby executable ruby.exe
    === Adding library files
    === Compressing 14898286 bytes
    === Finished building hello.exe (3261400 bytes)

    C:\Users\Walton>hello.exe
    Hello World! 
```

由于它打包了您现有的 ruby​​ 运行时，因此您可能应该运行 32 位 Ruby 以确保您的可执行文件可以在 32 位和 64 位平台上运行。

如果您需要的东西超出了 ocra 所能提供的范围，那么最好的办法是构建一个安装程序来打包 Ruby 和您的应用程序。

# c++ - 我无法理解的 c++ 中的 Lua 奇怪行为？

> ID：11924027
> 
> 赞同：2
> 
> 时间：2012-08-12T16:57:52.467
> 
> 标签：c++, lua

我对 C++ 中使用的这个简单的 LUA 脚本代码有疑问。

```
Main.cpp
#include <iostream>
using namespace std;
extern "C"
{
#include "lua.h"
#include "lualib.h"
#include "lauxlib.h"
}
int main()
{
    lua_State *L=luaL_newstate();
    luaL_openlibs(L);
    luaL_loadfile(L,"script.lua");
    lua_call(L,0,1);
    int n;
    n=lua_tonumber(L,-1);  // Can be changed to 0 and i gain the same result as -1
    cout<<n<<endl;
    lua_close(L);
    cout<<"test"<<endl;
    return 0;
}

script.lua
print("Hello world")
return 10 
```

程序正常工作并返回 10 到控制台，但问题是为什么当我将 lua_tonumber(L,-1) -1 更改为 0 时它仍然返回 10？似乎我在堆栈中有两个 10，一个索引为 0，另一个索引为 -1。但为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T18:18:43.547

来自 Lua 文档：

> 正索引表示绝对堆栈位置（从 1 开始）；负索引表示相对于堆栈顶部的偏移量。

Lua 中不允许使用 0 索引并且行为未定义（可能只是将 0 更改为 1，但您不应该依赖它）。

# mysql - 如何创建辅助数据库以与我的 MediaWiki 服务器一起运行？

> ID：11924029
> 
> 赞同：1
> 
> 时间：2012-08-12T16:58:08.780
> 
> 标签：mysql, database, mediawiki

首先，我的目标是创建一个数据库来存储关于我的 wiki 文章的统计信息，这些信息是使用我为我的 MediaWiki 服务器编写的扩展导出的。然后通过我服务器上的另一个扩展，我希望访问这个辅助数据库并使用这些信息来编辑最终文章页面的输出。

我想尝试制作一个单独的数据库，以避免将错误引入现有的 MediaWiki 模式。这可能吗？我找不到有关在安装 MediaWiki 的同时运行额外的 mySQL 数据库的任何信息。

我觉得更好的解决方案可能是将表添加到现有架构中，但我不确定如何在不破坏现有基础架构的情况下处理它。我相信我可以只使用标准的 CREATE 命令，但不幸的是 mySQL 不是我的强项。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:00:01.500

希望我理解你的问题。假设您有媒体 wiki 服务器或 mysql 服务器在端口 3308 上运行，并且您想创建另一个 mysql 实例。请按照以下步骤操作：

`bkp my.cnf file`

`start first instance on port 3308`

`chnage my.cnf settings & make it run on 3307`

`start second instance of mysql`

如果您有良好的硬件、交换/内存，您可以轻松创建这样的 4-5 个实例并且所有实例都将运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:29:09.743

您可以与主 MediaWiki 数据库一起运行一个单独的数据库。您只需要专门使用[PHP MySQL API](http://us.php.net/manual/en/book.mysql.php)打开与它的连接。

向现有数据库添加新表非常简单，而且可能是您最好的选择。如果您的站点变大，您将能够利用内置的数据库负载平衡。要了解如何从扩展创建新表，请查看[此文档页面](http://www.mediawiki.org/wiki/Manual%3aHooks/LoadExtensionSchemaUpdates)。

# c# - MVVM 更新标签

> ID：11924032
> 
> 赞同：0
> 
> 时间：2012-08-12T16:58:51.570
> 
> 标签：c#, mvvm, binding, inotifypropertychanged

我知道这是一个经常被问到的问题，但我现在至少要在一周内解决它……阅读这么多线程，下载数百万个不同的 MVVM-Pattern-Examples 等等……

我只想在我的 MVVM 模型视图第一种方法中更新一个愚蠢的标签：

```
 void StartUpProcess_DoWork(object sender, DoWorkEventArgs e)
    {
        SplashWindow splash = new SplashWindow();
        var ViewModel_Splash = new VM_SplashWindow();
        splash.DataContext = ViewModel_Splash;
        splash.Topmost = true;
        splash.Show();
        ViewModel_Splash.DoWork();
    } 
```

完整的视图模型：

```
public class VM_SplashWindow:VM_Base
    {
        #region Properties
        private string _TextMessage;
        public string TextMessage
        {
            get
            {
                return _TextMessage;
            }
            set
            {
                if(_TextMessage != value)
                {
                    _TextMessage = value;
                    base.OnPropertyChanged("TextMessage");
                }
            }
        }
        #endregion

        #region Methods     
        public void DoWork()
        {
            this.TextMessage = "Initialize";
            for(int aa = 0; aa < 1000; aa++)
            {
                this.TextMessage = "Load Modul: " + aa.ToString();
                Thread.Sleep(5);
            }
            this.TextMessage = "Done";
            Thread.Sleep(1000);
        }
        #endregion
    } 
```

底座上的一小块：

```
public abstract class VM_Base:INotifyPropertyChanged, IDisposable
{       
    #region INotifyPropertyChanged
public event PropertyChangedEventHandler PropertyChanged;

protected virtual void OnPropertyChanged(string propertyName)
{
    PropertyChangedEventHandler handler = this.PropertyChanged;
    if (handler != null)
    {
        var e = new PropertyChangedEventArgs(propertyName);
        handler(this, e);
    }
}
#endregion
} 
```

最后是视图：

```
<Label Height="28" Margin="19,0,17,15" Name="label2" VerticalAlignment="Bottom"
               Content="{Binding Path=TextMessage}" Foreground="White" /> 
```

如果我在视图模型的构造函数中为 TextMessage 属性设置了一个初始值，这个初始值将在 splash.Show() 命令之后显示。

在 DoWork-Method 中设置 TextMessage 属性会引发 onPropertyChangedEvent，但不幸的是它不会更新窗口中的标签。我不知道我应该怎么做......我真的很期待帮助。提前谢谢了！

也许我应该提到 StartUpProcess_DoWork 在自己的 STAThread 中运行

亲切的问候，弗洛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T21:47:33.557

显然，您在 GUI 线程中执行了大量工作。你`Thread.Sleep`甚至可以暂停 GUI 线程。因此，它将无法更新控件。

解决方案是对该`DoWork`方法使用不同的线程。这可以通过`BackgroundWorker`. 如果您向工作人员提供 GUI 调度程序对象，则可以从那里发出 GUI 更改。尽管如果可能的话，最好使用`ProgressChanged`-Event 。

# c++ - std::string 指针的 Find() 方法

> ID：11924040
> 
> 赞同：0
> 
> 时间：2012-08-12T16:59:49.220
> 
> 标签：c++

我有这样的功能：

```
int find_string ( string *url){
   if(*url.find() != string::npos){
        [...]
   }
   [...]
} 
```

并这样称呼它：

```
find_string(&url); 
```

但是我得到了以下编译错误：

```
request for member ‘find’ in ‘url’, which is of non-class type ‘std::string*’ 
```

为什么会发生这种情况，最重要的是，我该如何解决这个问题？（当没有指针时，它正在工作）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T17:01:33.603

使用`(*url).find()`或者，更好`url->find()`

`*url.find`尝试调用`find()`函数然后使用`operator *`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T17:02:46.660

`*url.find()`相当于`*(url.find())`你真正想要的是什么时候`(*url).find()`。更好的是，您应该`url->find()`改用它。

原因是取消引用 ( `*`) 运算符的[优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)低于元素选择 ( `.`) 运算符。

# vim - vim 中的自动完成 javascript/DOM API？

> ID：11924043
> 
> 赞同：5
> 
> 时间：2012-08-12T17:00:33.043
> 
> 标签：vim, autocomplete

在输入长函数名（如`ctx.createRadialGradient`. 如果我可以自动完成它们，那就太好了。

1.  有没有我可以开箱即用的插件？
2.  如果没有，如何为vim的自动完成添加新的自定义关键字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T17:29:14.027

在插入模式下，存在命令`Ctrl-X``Ctrl-P`以完成先前的匹配。因此，如果您有：

```
ctx.createRadialGradient
ctx.createGradient
ctx.create 
```

并开始写`ctx.cr`，按，这些字符串将出现在上下文窗口中，您可以使用箭头键或使用Next 或Previous`Ctrl-X``Ctrl-P`导航它们。`Ctrl-N``Ctrl-P`

# jquery - 我错过了什么？Django - 阿贾克斯

> ID：11924046
> 
> 赞同：2
> 
> 时间：2012-08-12T17:00:42.680
> 
> 标签：jquery, python, ajax, django, django-views

我正在按照示例进行操作，但我想我遗漏了一些东西，因为它不起作用

```
#views.py
def message(request):
    if request.is_ajax():
        message = "I'm in Ajax"
    else:
        message = "I'm NOT in Ajax"
    return HTTPResponse(message)

#html

<script type="text/javascript">
    $(document).ready(function() {
        $.get("/message", function(data){
        alert(data);
        });
            });
</script>

#urls.py
        #Display Message
        (r'^message/$', message), 
```

当我刷新页面时，什么都没有发生。当我在控制台的 Google Chrome 中按 F12 时，它给了我一个错误：

```
GET http://127.0.0.1:8000/message/ 500 (INTERNAL SERVER ERROR) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T17:04:54.237

Django 没有`HTTPResponse`对象。您需要使用一个`HttpResponse`对象：

```
from django.http import HttpResponse 
```

和：

```
return HttpResponse(message) 
```

# backbone.js - 收集添加时的主干同步

> ID：11924048
> 
> 赞同：1
> 
> 时间：2012-08-12T17:00:45.800
> 
> 标签：backbone.js, backbone-views

我正在向我的骨干集合中添加一个项目，如下所示：

```
item = existingItem.clone()
myCollection.add(item) 
```

我已经像这样覆盖了 MyCollection 中的同步：

```
sync: function() {
  console.log('sync is called')
} 
```

但是似乎在添加之后没有调用同步-它成功执行并触发“添加”事件。我错过了什么吗？还是这是正确的行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T20:05:22.630

你想要的是`myCollection.create(item)`.

检查[Backbone Collection.create() 文档](http://backbonejs.org/#Collection-create)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-01T05:28:36.603

Collection.create 返回模型，但在某些情况下，您可能需要访问 xhr 对象。在这种情况下，您可以这样做：

```
// add the model to the collection first
// so that model.url() will reference the collection's URL
myCollection.add(myModel)

// now save. this will trigger a POST to the collection URL
// save() returns the xhr so we can attach .done/.fail handlers
myModel.save()
.done(function(res) {
    console.log('it worked')
})
.fail(function(err) {
    console.log('it failed')
    // might be a good idea to remove the model from the collection
    // since it's not on the server
    myCollection.remove(myModel)
})
```

# c++ - 随机数生成和封装

> ID：11924049
> 
> 赞同：0
> 
> 时间：2012-08-12T17:00:54.067
> 
> 标签：c++, boost, encapsulation

我正在尝试使用 boost 生成随机数，但我无法让它以一种将所有内容都封装起来的方式工作。我在 main() 中有这段代码，它允许我使用 roll() 从 [0,1) 生成一个随机数

```
boost::mt19937 rng(seed);
boost::uniform_01<> uniform_p;
boost::variate_generator< boost::mt19937, boost::uniform_01<> >
    roll(rng, uniform_p); 
```

现在我想将它粘贴在它自己的头文件/cpp 文件中，其中一个函数用于获取种子并创建卷，而其他函数则调用卷。但是似乎什么都看不到滚动，而且我很确定它会在调用它的函数超出范围后超出范围。我尝试过使用静态和外部，我尝试过让 roll 成为类的一部分，这样它就不会超出范围，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:28:31.173

如何在 .h 文件中声明`seed`和`rool`函数，以及在 .cpp 文件中实现它们。您可以使用`static scoped_ptr`在 .cpp 模块中存储辅助对象并在静态初始化阶段之后对其进行初始化。线程安全是此解决方案中要记住的另一件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T18:57:54.080

下面是一个类似于 Matlab 的接口，我喜欢用它来生成随机数。`seed()`使用前必须先打电话`rand()`。正如 Greg 指出的那样，`scoped_ptr`存储所需的静态变量（Mersenne twister 和变量生成器）很方便。为了线程安全，请使用互斥锁保护这些资源。

**随机的.hpp**

```
#ifndef RANDOM_HPP
#define RANDOM_HPP

void seed(unsigned s);
double rand();

#endif // RANDOM_HPP 
```

**随机的.cpp**

```
#include "random.hpp"
#include <boost/random/mersenne_twister.hpp>
#include <boost/random/uniform_01.hpp>
#include <boost/random/variate_generator.hpp>
#include <boost/scoped_ptr.hpp>

static boost::scoped_ptr<boost::mt19937> twister;
static boost::scoped_ptr<boost::variate_generator<boost::mt19937&,
                                                  boost::uniform_01<> > > vargen;

void seed(unsigned s)
{
    twister.reset(new boost::mt19937(s));
    vargen.reset(new boost::variate_generator<boost::mt19937&,
                                              boost::uniform_01<> >(
                     *twister, boost::uniform_01<>()));
}

double rand()
{
    assert(vargen.get() != 0);
    return (*vargen)();
} 
```

**主文件**

```
#include "random.hpp"
#include <iostream>

int main()
{
    seed(42);
    for (int i = 0; i < 10; ++i)
        std::cout << rand() << std::endl;
    return 0;
} 
```

# java - 我的游戏中出现 NullPointerException，无法修复

> ID：11924051
> 
> 赞同：1
> 
> 时间：2012-08-12T17:00:54.693
> 
> 标签：java, nullpointerexception, null-pointer

我正在使用自定义像素引擎制作一个 rpg，当我尝试运行它时，我只得到一个 NullPointerException 并且我知道原因，但是当我尝试初始化该变量时，我在不同的位置得到另一个变量并修复了它现在它根本不会运行，我仍然得到一个 NullPointerException。这是出现错误的类，控制台告诉我错误出现在 screen.render(); 行。

```
import java.awt.Canvas;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.image.BufferStrategy;
import java.awt.image.BufferedImage;
import java.awt.image.DataBufferInt;
import java.io.IOException;
import java.util.Random;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import sprites.SpriteSheetLoader;

public class Game extends Canvas implements Runnable{

    private static final long serialVersionUID = 1L;

    public static final int HEIGHT = 120;
    public static final int WIDTH = 120;
    public static final int SCALE = 3;
    public static final String NAME = "TypicalRPG";
    public SpriteSheetLoader loader;

    private BufferedImage img = new BufferedImage(WIDTH * SCALE, HEIGHT * SCALE, BufferedImage.TYPE_INT_RGB);
    private int[] pixels = ((DataBufferInt) img.getRaster().getDataBuffer()).getData();
    private boolean running = false;
    private Screen screen = new Screen(WIDTH, HEIGHT, loader);

    Random random = new Random();

    public void start(){

        running = true;

        new Thread(this).start();

    }

    public static void main(String args[]){

        Game game = new Game();

        game.setPreferredSize(new Dimension(WIDTH * SCALE, HEIGHT * SCALE));
        game.setMaximumSize(new Dimension(WIDTH * SCALE, HEIGHT * SCALE));
        game.setMinimumSize(new Dimension(WIDTH * SCALE, HEIGHT * SCALE));

        JFrame jf = new JFrame(NAME);

        jf.add(game);

        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        jf.pack();

        jf.setVisible(true);
        jf.setResizable(true);

        game.start();

    }

    public void run(){

        while(running){

            tick();

            render();

            try{

                Thread.sleep(5);

            }

            catch(InterruptedException e){ e.printStackTrace(); }

        }

    }

    public void stop(){ running = false; }

    public void tick(){

        screen.render(0, 0, 0, 16, 16);

    }

    public void render(){

        BufferStrategy bs = getBufferStrategy();

        if(bs == null){

            createBufferStrategy(3);

            requestFocus();

            return;

        }

        for(int i = 0; i < screen.pixels.length; i++){

            pixels[i] = screen.pixels[i];

        }

        Graphics g = bs.getDrawGraphics();

        g.drawImage(img, 0, 0, getWidth(), getHeight(), null);

        g.dispose();

        bs.show();

    }

    public void init(){

        BufferedImage sheet = null;

        try {

            sheet = ImageIO.read(Game.class.getResourceAsStream("res/tiles.png"));

        }

        catch (IOException e) {

            e.printStackTrace();

    }

    loader = new SpriteSheetLoader(sheet);

    screen = new Screen(WIDTH, HEIGHT, loader);

    }

} 
```

这是具有 render() 的类：

```
import sprites.SpriteSheetLoader;

public class Screen{

    public int[] pixels;

    private SpriteSheetLoader loader;
    private int w, h;

    int xoff = 0, yoff = 0;

    public Screen(int w, int h, SpriteSheetLoader loader){

        this.loader = loader;
        this.w = w;
        this.h = h;

        pixels = new int[w * h];

    }

    public void render(int xpos, int ypos, int tile, int width, int height){

        loader.grabTile(tile, width, height);

        xpos -= xoff;
        ypos -= yoff;

        for(int y = 0; y < height; y++){

            if(ypos + y < 0 || ypos + y >= h) continue;

            for(int x = 0; x < width; x++){

                if(xpos + x < 0 || xpos + x >= w) continue;

                int col = loader.pixels[x + (y * height)];

                if(col != -65281) pixels[(x + xpos) + (y + ypos)] = col;

            }

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T17:05:49.440

似乎您从未在第一堂课中启动加载器。

你定义你的变量是这样的：

```
public SpriteSheetLoader loader;
private Screen screen = new Screen(WIDTH, HEIGHT, loader); 
```

因此，您将一个空对象传递给您的屏幕。然后从那里尝试调用该空对象的方法：

```
loader.grabTile(tile, width, height); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T17:15:40.967

您**只是宣布** `loader`，但**从未启动**它。

`public SpriteSheetLoader loader;`

# mysql - 按月和年分组

> ID：11924058
> 
> 赞同：0
> 
> 时间：2012-08-12T17:02:12.320
> 
> 标签：mysql, date, group-by, date-format

我目前正在更新一个旧站点，其中数据库中使用的日期格式为 dd/mm/yyyy。

我想做的是按月和年对行进行分组。这种格式有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T17:09:00.617

您可以随时调用 STR_TO_DATE(value,'%d/%m/%Y')。

然后，您将能够使用 YEAR() 和 MONTH() 等普通日期提取函数对行进行分组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:11:50.380

存储日期的列的列类型是什么？如果它的 DateTime 那么你可以这样做：

```
group by YEAR(date_col), MONTH(date_col) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T17:12:04.307

或者你可以`GROUP BY`喜欢`substr`

```
SELECT *
FROM table
GROUP BY substr(date, 4, 2) 
```

`substr(date, 4, 2) = MM`如果您愿意，可以在哪里`dd`尝试`substr(date, 1, 2)`

# windows-phone-7 - 用于 Windows Phone 7 的最新 Silverlight 工具包的问题

> ID：11924064
> 
> 赞同：1
> 
> 时间：2012-08-12T17:03:13.693
> 
> 标签：windows-phone-7, silverlight-toolkit

在我最新的 WP7 项目中，我使用 Nuget 添加了对 Silverlight Toolkit for WP7 的引用。在我的一个页面中，我在顶部添加了一个新的命名空间引用，就像我之前所做的那样：

```
xmlns:toolkit="clr-namespace:System.Windows.Controls;assembly=Microsoft.Phone.Controls.Toolkit" 
```

但是，当我尝试向页面添加工具包控件时，键入后我只得到一个选项

```
<toolkit:HeaderedItemsControl 
```

无法从 XAML 访问所有其他工具包控件。WP7 上 Silverlight Toolkit 的最新 Nuget 版本是否有人遇到过类似问题？我是否遗漏了什么（我之前使用过该工具包没有任何问题......虽然我同意我当时没有使用 Nuget）？我可以毫无问题地从代码中访问其他工具包类...

欢迎任何帮助或建议！

先感谢您！安德烈

# android - ListView中的Android ArrayList项

> ID：11924065
> 
> 赞同：0
> 
> 时间：2012-08-12T17:03:23.693
> 
> 标签：android, motodev-studio

所以我有这个列表，它使用来自 ArrayList 的值（我不能使用 String[]，因为用户必须将项目添加到列表中，而我不能 .add 到 String[]）。但现在我遇到了 onItemClick 方法的问题。我想从选定的项目中获取文本，我的书说以下应该有效：

```
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    dodaj.setText(values[arg2]);

} 
```

但是我收到以下错误：**表达式的类型必须是数组类型，但它解析为 ArrayList** 我应该怎么做才能修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:09:18.550

“值”是一个 ArrayList 吗？如果是这样使用

```
dodaj.setText( (String)values.get( arg2 ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:13:28.490

您将不得不使用将 arraylist 转换为数组`arraylist.toarray()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T17:17:39.990

使用 ArrayList 你总是使用

```
arrayList.get(index); 
```

推荐的方法是向您的项目/对象添加一个 toString() 方法，以便它返回首选字段。

```
public Student()
{
    ...
    ...
    public String toString()
    {
        return firstName + " " + lastName;
    }
} 
```

现在您可以使用 arrayList.get(int index)。它将打印我们 toString() 的输出。

# java - android.database.sqlite.SQLiteConstraintException 无法修复

> ID：11924066
> 
> 赞同：0
> 
> 时间：2012-08-12T17:03:34.663
> 
> 标签：java, android

我有一个插入方法，它首先检查该行是否可用，如果没有，那么它会尝试创建新的，或者如果可用，那么它会更新它，但是这个方法给了我`else`部分中的异常，这是我的方法

```
public long SetSettings(String whichCol, String value) {
        // TODO Auto-generated method stub
        preferences = ourcontext.getSharedPreferences(filenames, 0);
        String[] colum = new String[] { KEY_CAR };
        Cursor c = ourDB.query(DBhelper.DATABASE_SETTINGSTABLE, colum, KEY_CAR
                + "=" + "'" + preferences.getString("selectedcar", "") + "'",
                null, null, null, null);
        ContentValues cvedit = new ContentValues();
        cvedit.put(KEY_CAR, preferences.getString("selectedcar", ""));
        cvedit.put(whichCol, value);
        if (c.getCount() > 0) {

            return ourDB.update(
                    DBhelper.DATABASE_SETTINGSTABLE,
                    cvedit,
                    KEY_CAR + "=" + "'"
                            + preferences.getString("selectedcar", ""), null);

        } else {

            return ourDB.insert(DBhelper.DATABASE_SETTINGSTABLE, null, cvedit);

        }
    } 
```

这就是我创建数据库的方式：

```
public static final String KEY_ID = "_id";
public static final String KEY_CAR = "car";   
public static final String KEY_SET_DISENTRY_MODE = "ditance_entry_mode";
        public static final String KEY_SET_DISUNIT = "distance_unit";
        public static final String KEY_SET_PETROLUNIT = "petrol_unit";
        public static final String KEY_SET_CONDISPLAY = "consumption_display";
        public static final String KEY_SET_DATEFORMAT = "date_format";
        public static final String KEY_SET_CURRENCY = "currency";
        public static final String KEY_SET_STOREFILLLOC = "store_fillloc";
        public static final String KEY_SET_GPSPIN = "gps_pin";
        public static final String KEY_SET_KEYCLICK = "keyboard_click";
        public static final String KEY_SET_KEYVIBRATE = "keyboard_vibrate";
        public static final String KEY_SET_BACKUP = "backup";

@Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

        db.execSQL("CREATE TABLE " + DATABASE_SETTINGSTABLE + " (" + KEY_ID
                + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_CAR
                + " TEXT NOT NULL, " + KEY_SET_DISENTRY_MODE + " TEXT, "
                + KEY_SET_DISUNIT + " TEXT, " + KEY_SET_PETROLUNIT + " TEXT, "
                + KEY_SET_CONDISPLAY + " TEXT, " + KEY_SET_DATEFORMAT
                + " TEXT, " + KEY_SET_CURRENCY + " TEXT, "
                + KEY_SET_STOREFILLLOC + " TEXT, " + KEY_SET_GPSPIN + " TEXT, "
                + KEY_SET_KEYCLICK + " TEXT, " + KEY_SET_KEYVIBRATE + " TEXT, "
                + KEY_SET_BACKUP + " TEXT NOT NULL);");

    } 
```

我无法弄清楚我的问题在哪里，有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T17:07:58.847

您有一个约束`KEY_SET_BACKUP TEXT NOT NULL`，但是在更新时您将 null 作为此值传递，因此也将以下行添加到 contentvalues

```
cvedit.put(KEY_SET_BACKUP,""); 
```

# python - Pycurl：如何确定请求的持续时间

> ID：11924067
> 
> 赞同：0
> 
> 时间：2012-08-12T17:03:43.070
> 
> 标签：python, curl, time, pycurl

我的任务是定期向服务器发出请求，并将此请求的时间写入数据库。我使用 Python 2.7.3、cURL 和 pycurl 作为 cURL 的包装器。我确实要求这样：

```
import pycurl
c = pycurl.Curl()
c.setopt(c.URL, "http://google.com/")
c.setopt(c.VERBOSE, True) # to see request details
c.perform() 
```

但是我怎样才能确定这个请求的时间呢？

**UPD1**

好的，我明白，我应该采用 2 个时间戳，它们之间的差异将是请求的持续时间。但我面临一些问题：

当我执行：

```
import pycurl, time
c = pycurl.Curl()
c.setopt(c.URL, "http://google.com/")
c.setopt(c.VERBOSE, True) # to see request details
ts = time.clock()
c.perform()
print time.clock() - ts 
```

我得到 0.0 o（有时）0.01。`ts = time.clock()`这是错误的差异，因为我在 python shell 中执行了这个命令，并且在我执行之后和执行之前还剩下一些时间`print time.clock() - ts`，所以差异应该是大约 3 秒。

我在安装在 Virtualbox 上的 Ubuntu 服务器 12.04 上得到这个输出。Virtualbox 安装在 Windows 7 上。当我在 Windows 7 中尝试以下代码时，我得到正确的输出。

这是另一个问题 - 也许我应该使用 time.time() 而不是 time.clock()？

**解决方案**

想法取自[这篇文章](http://coreygoldberg.blogspot.com/2008/09/python-timing-timeclock-vs-timetime.html)。简而言之，您应该在 windows 上使用 time.clock()，在 Linux 或 Unix（Ubuntu 和其他、FreeBSD 和其他、MacOS）上使用 time.time()。您还可以使用 timeit.default_timer()。此函数检测操作系统类型并选择 time.time() 或 time.clock()。所以解决方案的代码是：

```
import pycurl, timeit
c = pycurl.Curl()
c.setopt(c.URL, "http://google.com/")
c.setopt(c.VERBOSE, True) # to see request details
ts = timeit.default_timer()
c.perform()
print timeit.default_timer() - ts 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-08-24T18:16:33.580

完成后，`curl.perform()`您可以从 curl 句柄中提取信息：

```
m = {}
m['total-time'] = curl.getinfo(pycurl.TOTAL_TIME)
m['namelookup-time'] = curl.getinfo(pycurl.NAMELOOKUP_TIME)
m['connect-time'] = curl.getinfo(pycurl.CONNECT_TIME)
m['pretransfer-time'] = curl.getinfo(pycurl.PRETRANSFER_TIME)
m['redirect-time'] = curl.getinfo(pycurl.REDIRECT_TIME)
m['starttransfer-time'] = curl.getinfo(pycurl.STARTTRANSFER_TIME) 
```

getinfo() 的文档：http: [//pycurl.io/docs/latest/curlobject.html#pycurl.Curl.getinfo](http://pycurl.io/docs/latest/curlobject.html#pycurl.Curl.getinfo)

从请求中获取的可用信息列表： [https ://curl.haxx.se/libcurl/c/curl_easy_getinfo.html](https://curl.haxx.se/libcurl/c/curl_easy_getinfo.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T17:10:26.060

```
import pycurl, time
c = pycurl.Curl()
c.setopt(c.URL, "http://google.com/")
c.setopt(c.VERBOSE, True) # to see request details
ts = time.clock()
c.perform()
print time.clock() - ts 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-25T17:24:09.573

不要使用 time.clock() 来计时经过的时间间隔。它现在也被弃用了。

# c++ - 什么是 sa_family_t

> ID：11924068
> 
> 赞同：4
> 
> 时间：2012-08-12T17:03:43.387
> 
> 标签：c++, sockets, types, identifier

我正在遵循[Beej 的网络编程指南](http://beej.us/guide/bgnet/)，并且我正在使用 VC++ 2010，但是当我将结构复制粘贴到我的程序中时，某些类型会出现不正确的标识符。例如：

`u_int32_t`就这样出现了，经过一番搜索，我发现这些是大约 1999 年 C 语言中的旧类型。我本可以只包含*stdint.h*，但这需要我记住它们的含义。相反，我使用了标准`int`的 32 位长（4 字节），而对于其他 64 位长（8 字节）的标准，我使用了`long long int`.

无论如何，我正在缩小到我的最后一个语法错误，它说`sa_family_t`是一个无效的标识符。我不知道它应该是什么，搜索也没有任何结果。那是我的问题，我不知道我应该为此指定什么类型标识符。

另一件困扰我的事情是： `char __ss_pad1[_SS_PAD1SIZE];`这`SS_PAD1SIZE`件事也以红色显示为无效。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T17:21:03.027

[sa_family_t 应该是一个无符号整数。](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_socket.h.html) Windows 头文件不符合该标准。Winsock.h 定义 sockaddr 结构如下：

```
struct sockaddr {
        u_short sa_family;              /* address family */
        char    sa_data[14];            /* up to 14 bytes of direct address */
}; 
```

所以要编译你的代码，你需要自己 typedef sa_family_t。

# jquery - 使用带有 XHR ResponseText 的 jQuery Append

> ID：11924069
> 
> 赞同：0
> 
> 时间：2012-08-12T17:03:49.737
> 
> 标签：jquery, ajax, xmlhttprequest, responsetext

在过去的几个小时里，我一直在尝试使用 jQuery append() 将 XHR responseText 中的内容附加到 div 元素（带有 ID）中。

我已经验证我得到了 responseText，所有变量都是正确的，等等。我相信这与尝试附加 responseText（即 HTML）有关。

```
function fetchasyncClientData_Handler() {
    if (asyncajaxrequest.readyState==4 && asyncajaxrequest.status==200){
        $("#clientList").append(asyncajaxrequest.responseText);
    }
}

lastClientID = $("#clientList_Row input").last().val();

asyncajaxrequest = new XMLHttpRequest();
asyncajaxrequest.onreadystatechange = fetchasyncClientData_Handler();
asyncajaxrequest.open("GET", "fetchLatestClientList.php?id=" + lastClientID);
asyncajaxrequest.send(); 
```

关于问题可能是什么的任何想法？我不想使用 jQuery.ajax() 库/函数，我可以提一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:14:20.423

您应该将请求传递给`fetchasyncClientData_Handler`函数，为此您需要使用括号调用函数，您可以在 readystate 事件的单独函数调用中执行此操作，这将让您在调用之前检查请求是否成功`fetchasyncClientData_Handler`功能 ：

```
function fetchasyncClientData_Handler(req) {
    $("#clientList").append(req.responseText);
}

var lastClientID = $("#clientList_Row input").last().val();

var asyncajaxrequest = new XMLHttpRequest();
    asyncajaxrequest.onreadystatechange = function() {
        if (asyncajaxrequest.readyState==4 && asyncajaxrequest.status==200){
            fetchasyncClientData_Handler(asyncajaxrequest);
        }
    }
    asyncajaxrequest.open("GET", "fetchLatestClientList.php?id=" + lastClientID);
    asyncajaxrequest.send();
​ 
```

您可以尝试像这样调用该函数：

```
asyncajaxrequest.onreadystatechange = fetchasyncClientData_Handler; 
```

使用您拥有的代码，因为无论如何您的所有变量都是全局的。

每当您使用括号编写函数时，您都会执行该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:17:46.087

这一行： `asyncajaxrequest.onreadystatechange = fetchasyncClientData_Handler();`不是将 onreadystatechange 处理程序设置为使用该`fetchasyncClientData_Handler`函数，而是将事件处理程序设置为使用该函数的 RESULT。

它应该是：

```
asyncajaxrequest.onreadystatechange = fetchasyncClientData_Handler; 
```

最后没有括号。

# objective-c - 对委托所有权的困惑

> ID：11924072
> 
> 赞同：0
> 
> 时间：2012-08-12T17:04:01.147
> 
> 标签：objective-c, delegates

> 例如，`WhereamiViewController`拥有`CLLocationManager`，而`CLLocationManager`的委托是 `WhereamiViewController`。

当 all has 是一个引用类对象的实例变量时，我对如何`WhereamiViewController`拥有该类感到困惑。有人可以帮我弄清楚这个概念吗？`CLLocationManager``WhereamiViewController``CLLocationManager`

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>

@interface WhereamiViewController : UIViewController <CLLocationManagerDelegate> {
    CLLocationManager *locationManager;
}
@end 
```

* * *

```
#import "WhereamiViewController.h"

@implementation WhereamiViewController

-(id) initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) {
        locationManager = [[CLLocationManager alloc] init];
        [locationManager setDelegate: self];
        [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
        [locationManager startUpdatingLocation];
    }
    return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:11:04.947

`CLLocationManager`根据[文档](http://developer.apple.com/library/ios/DOCUMENTATION/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/instp/CLLocationManager/delegate)不保留的代表：

> @property( ***assign*** , nonatomic) id 委托

因此，您的委托不会被 保留`CLLocationManger`，因此没有保留循环。

# wpf - WPF 中的哪个表/网格控件？

> ID：11924073
> 
> 赞同：8
> 
> 时间：2012-08-12T17:04:41.600
> 
> 标签：wpf, .net-4.0, wpf-controls, epg

我正在寻找显示表格数据（电视频道），但带有 DataGrid/UniformGrid/Table 和 FlowDocument/等选项。我不知道什么是最好的选择。主要问题是单元格的大小不统一，因为它会根据时间长度而变化，我也想在它们之间添加填充。此外，我只需要能够显示表格的一部分，并允许他们向上/向下/向右滚动以查看其余部分。

什么是最好的 WPF 控制选项？这是我要做什么的一个小例子。左上角的白色方块是我想在开始时显示的，并允许他们滚动到它的其余部分。

![在此处输入图像描述](../Images/7d432900f3e34bb71a2a22f1c4a955b5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T19:37:13.593

有几种方法可以完成您在这里尝试做的事情。如果性能不是问题，那么我会忽略虚拟化并尝试[`DockPanel`](http://msdn.microsoft.com/en-us/library/system.windows.controls.dockpanel.aspx) 这里的缺点是您必须按顺序添加项目而不是逐行添加它们。

另一种选择是使用两个堆栈面板（每个方向一个）。这解决了添加问题，但需要使用更多面板。

前两个选项都需要设置单个项目的高度/宽度。

最后一个选项（取决于您的网格有多大）是使用具有固定大小的行和列的 Grid 以及跨行的项目（使用[rowspan](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.rowspan.aspx)属性）。这种方法的缺点是我不知道在 xaml 中为未指定的行/列数创建此控件的任何好方法，因此您必须在代码中创建它以获得所需的行数/列数。

如果您有性能问题，您可以尝试使用[VirtualizingStackPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.virtualizingstackpanel.aspx)。如果这仍然不能满足您的性能要求，那么您将需要对其进行子类化[`VirtualizingPanel`](http://msdn.microsoft.com/en-us/library/system.windows.controls.virtualizingpanel)并对其进行定制以满足您的特定需求。

有关面板性能的更多信息，请参见[此处](https://stackoverflow.com/questions/9946811/in-what-order-are-panels-the-most-efficient-in-terms-of-render-time-and-performa/9996707#9996707)。

我建议`StackPanel`先尝试这两种方法，然后是`VirtualizingStackPanel`方法，最后，如果这不起作用，然后尝试`VirtualizingPanel`

填充很容易通过设置`Margin`每个子控件的属性来完成。

对于滚动使用[`ScrollViewer`](http://msdn.microsoft.com/en-us/library/ms750665.aspx)

# asp.net-mvc - 如何在 MVC 4 中路由动态控制器/动作模式 - Routing for ASP.net MVC 4

> ID：11924074
> 
> 赞同：1
> 
> 时间：2012-08-12T17:04:43.520
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, asp.net-mvc-4

我希望这是在 MVC 4 中编写路由的更好方法，并希望得到一些反馈。

您能否告诉我下面的路由模式是否是 MVC 4 中最好的方法？

我有一个应用程序需要以以下格式显示 url。

[http://domain.com/777-777-7777-777-7777/Page1](http://domain.com/777-777-7777-777-7777/Page1)

[http://domain.com/777-777-7777-777-7777/Page2](http://domain.com/777-777-7777-777-7777/Page2)

777-777-7777-777-7777 是一个帐号。PageX 是报表页码。

我试图避免在我的项目中破坏其他控制器路由。以下是我尝试过的，但如果这会破坏未来的控制器，则需要反馈。

**报告编号加页面路径**

```
routes.MapRoute( 
"Report", // Route name 
"{AccountNumber}/{ReportPage}",  
new { controller = "Report", action = "Navigate", AccountNumber =     UrlParameter.Optional, ReportPage = UrlParameter.Optional}); 
```

**未来的控制器我不想垃圾。**

```
routes.MapRoute( 
"FutureController", // Route name 
"FutureController/{action}/{id}",  
new { controller = "FutureController",id= UrlParameter.Optional}); 
```

任何反馈表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:26:53.690

我相信你的路线还可以。它不会破坏当前的设置。编写路由时唯一要记住的是，您首先放置更具体的路由，因为它们是按顺序处理的，并且 url 引擎会选择第一个匹配的路由。但是，我必须说您的`ReportPage`参数将包含像`page1`and`page1`而不是数字 1 或 2 之类的值。我见过有人编写规则，其中只有数字部分会在操作结果中收到。据我所知，它就像

```
routes.MapRoute( 
"Report", // Route name 
"{AccountNumber}/page{ReportPage}",  
new { controller = "Report", action = "Navigate", AccountNumber =     UrlParameter.Optional, ReportPage = UrlParameter.Optional},new{ReportPage = "\d+"}); 
```

这样，您将拥有类似的 url，`http://domain.com/account/page1`但在操作方法中，您将收到参数的数值`ReportPage`。但是，当页码不存在时，它将不匹配。对于这种情况，您可以添加另一条路线，例如在回答[此问题时推荐的人](https://stackoverflow.com/questions/1582821/paging-and-routing-in-asp-net-mvc)

# php - 尝试使用 DOMDocument 将 mysql 转义数据回显到 XML 时，PHP 无法去除斜杠

> ID：11924076
> 
> 赞同：-1
> 
> 时间：2012-08-12T17:04:50.447
> 
> 标签：php, xml, stripslashes

我在使用 mysql_real_escape_string 对它们进行转义后在数据库中插入了一些 HTML 文本，并且我试图将它们添加到 XML 文档中以供 flash 文件读取，我正在使用 DOMDocument 类来制作 XML 文档，这是我的尝试和输出：尝试 1：

```
$descC = $doc->createCDATASection(stripslashes($sql['body']));
$desc = $doc->createElement('desc');
$desc->appendChild($descC); 
```

输出：

很多斜线！

尝试2：

```
$desc = $doc->createElement('desc',htmlentities(stripslashes($sql['body']))); 
```

输出：

还有很多斜线

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:27:27.067

我认为您的配置中启用了魔术引号。

您必须在转义 vai mysql_real_escape_string() 之前检查它，因为它会添加更多斜杠。

如果（get_magic_quotes_gpc（））{

$b = 斜线($b);

}

$b = mysql_real_escape_string($b);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:19:29.807

> 它来自数据库，它有斜线，因为我在插入之前转义了它

从数据库中出来的数据不应该有多余的斜线；转义数据时添加的内容不应在最终结果中可见，不再`stripslashes()`需要。

您为数据库准备数据的方式很可能存在问题。也许向我们展示这一点。

# apache-flex - Adobe Flex：弹出对话框的大小不正确

> ID：11924079
> 
> 赞同：0
> 
> 时间：2012-08-12T17:04:59.430
> 
> 标签：apache-flex, layout, flash-builder, flex4.5

我有一个弹出对话框，它是一个 mx:TitleWindow。但是，对话框的渲染高度太大，请参阅底部的空白。将高度降低 x 像素似乎没有效果。如何正确调整尺寸？

```
<mx:TitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
     xmlns:s="library://ns.adobe.com/flex/spark" 
     xmlns:mx="library://ns.adobe.com/flex/mx" width="356" height="322"
     layout="vertical" showCloseButton="true" close="cancel(event)"
     title="Add User" creationComplete="usernameTF.setFocus();"
     hasFocusableChildren="true">

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<fx:Script>
    <![CDATA[
        import com.adobe.crypto.SHA1;
        import com.hurlant.crypto.hash.SHA1;

        import mx.controls.Alert;
        import mx.events.CloseEvent;
        import mx.events.FlexEvent;
        import mx.managers.PopUpManager;

        [Bindable]
        public var mainApp:Object = null; 

        protected function apply_clickHandler(event:MouseEvent):void {
            if (usernameTF.text == null || usernameTF.text.length < 1) {
                usernameTF.errorString = "The username is mandatory";
                width = 520;
                return;
            }
            else if (mainApp.userExists(usernameTF.text)) {
                usernameTF.errorString = "Username already exists";
                width = 520;
                return;
            }
            else {
                usernameTF.errorString = "";
            }

            if (passwordTF.text == null || passwordTF.text.length < 1) {
                passwordTF.errorString = "The password is mandatory";
                width = 520;
                return;
            }
            else {
                passwordTF.errorString = "";
            }

            if (confirmTF.text == null || confirmTF.text.length < 1) {
                confirmTF.errorString = "The confirmation password is mandatory";
                width = 520;
                return;
            }
            else {
                confirmTF.errorString = "";
            }               

            if (passwordTF.text != confirmTF.text) {
                passwordTF.errorString = "The passwords must match";
                width = 520;
                return;
            }
            else {
                passwordTF.errorString = "";
            }

            var u:Object = new Object();
            u.username = usernameTF.text;
            u.password =  com.adobe.crypto.SHA1.hash(passwordTF.text);
            u.accesslevel = accessLevelCB.selectedItem;

            mainApp.addUserToModel(u);
            mainApp.applyHandler(null);
        }

        protected function cancel(event:Event):void {
            PopUpManager.removePopUp(this);
        }
    ]]>
</fx:Script>

<s:Form height="280" defaultButton="{apply}">
    <s:layout>
        <s:FormLayout gap="{Globals.FORM_GAP}"/>
    </s:layout>                 
    <s:FormHeading label="Add User"/>
    <s:FormItem label="Username:">
        <s:TextInput id="usernameTF" restrict="0-9A-Za-z_." maxChars="127"/>
    </s:FormItem>
    <s:FormItem label="Password:">
        <s:TextInput maxChars="127" id="passwordTF" displayAsPassword="true"/>
    </s:FormItem>
    <s:FormItem label="Confirm Password:">
        <s:TextInput maxChars="127" id="confirmTF" displayAsPassword="true"/>
    </s:FormItem>       
    <s:FormItem label="Access Level:">
        <s:ComboBox id="accessLevelCB" selectedIndex="0">
            <s:dataProvider>
                <mx:ArrayList>
                    <fx:String>user</fx:String>
                    <fx:String>admin</fx:String>
                </mx:ArrayList>
            </s:dataProvider>               
        </s:ComboBox>
    </s:FormItem>
    <s:FormItem>
        <s:HGroup>
            <s:Button id="apply" label="Apply" click="apply_clickHandler(event)" />
            <s:Spacer width="3"/>
            <s:Button label="Cancel" click="cancel(event)"/>
        </s:HGroup>
    </s:FormItem>
</s:Form> 
```

![弹出对话框截图](../Images/d11c11c5b2e82c15ac74704903c233c8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:12:21.757

> 将高度降低 x 像素

你要降低哪个高度？

```
<mx:TitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
     xmlns:s="library://ns.adobe.com/flex/spark" 
     xmlns:mx="library://ns.adobe.com/flex/mx" width="356" height="322"
     layout="vertical" showCloseButton="true" close="cancel(event)"
     title="Add User" creationComplete="usernameTF.setFocus();"
     hasFocusableChildren="true">

<s:Form height="280" defaultButton="{apply}"> 
```

在您显示的代码中，我希望框的高度为 322。形式为 280；在底部留下约 42 像素的空白。

# android - Android 找不到以下类 - EditText（更改为 android.widget.EditText，修复构建路径，编辑 XML）

> ID：11924080
> 
> 赞同：9
> 
> 时间：2012-08-12T17:05:02.403
> 
> 标签：android, class

尝试查看图形布局视图时出现以下错误：

> 找不到以下类 - EditText（更改为 android.widget.EditText、修复构建路径、编辑 XML）

该应用程序运行良好，我可以毫无问题地编辑 XML。我只是无法再加载图形布局视图。在 Main.java 文件中，从 Android 库导入 EditText 小部件没有问题或错误。

我正在使用 Eclipse Indigo Service Release 2。获得了所有最近的更新。

我也在使用最新的 Android SDK Tools 20.0.1

这是来源。我尝试了 Source > Cleanup Document and Format 选项，以确保 XML 正确。

> ```
> <?xml version="1.0" encoding="utf-8"?>
> <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
>     android:layout_width="match_parent"
>     android:layout_height="match_parent" >
> 
>     <Button
>         android:id="@+id/button1"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_alignParentTop="true"
>         android:layout_centerHorizontal="true"
>         android:layout_marginTop="63dp"
>         android:text="@string/button1" />
> 
>     <EditText
>         android:id="@+id/editText1"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_alignParentLeft="true"
>         android:layout_alignParentRight="true"
>         android:layout_alignParentTop="true"
>         android:layout_marginTop="16dp"
>         android:ems="10"
>         android:inputType="" >
> 
>         <requestFocus />
>     </EditText>
> 
> </RelativeLayout> 
> ```

我设法解决了这个问题。

我不得不改变

> android:inputType="" **到** android:inputType="text"

图形布局视图现在再次工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-20T10:01:01.690

这是因为如果您使用的是最近为 android wear 发布的 api 4.4W

并且安卓穿戴不支持edittext

[http://developer.android.com/training/building-wearables.html](http://developer.android.com/training/building-wearables.html)

# vb.net - 在主键以外的其他东西上使用 db find

> ID：11924083
> 
> 赞同：0
> 
> 时间：2012-08-12T17:05:23.580
> 
> 标签：vb.net, asp.net-mvc-3

我在互联网上搜索了这个问题的答案，但没有运气。我有一个模型存在于使用实体框架创建的数据库中，并通过 db（我的 DBContext 类的一个实例）进行访问。

```
Function Details(id As Integer) As ViewResult
    Dim bill As Bill = db.Bills.Find(id)
    Return View(bill)
End Function 
```

票据类的模型定义为：

```
Public Class Bill

    Public Property BillId() As Integer

    Public Property CustomerId() As String

    Public Property BillStatus() As String

End Class 
```

假设在首先提到的函数中，我传递了 CustomerId 而不是这个模型的主键 (BillId)，我将如何使用它来创建一个“Dim bill As Bill”，其中仅包含具有该 customerId 的账单。

就像上面的例子一样，账单是用 .Find(id) 过滤的——它只查看主键——我希望能够使用与 .Find() 类似的方法，但在非关键字段上：在这种情况下为 CustomerId .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:19:51.187

或者，如果您确定始终只有一个实体与该 CustomerId 匹配，您可以使用 Single。

VB.NET

```
Dim myBill = db.Bills.Single(Function(x) x.CustomerId = cId); 
```

C# .NET

```
var myBill = db.Bills.Single(x => x.CustomerId == cId); 
```

请注意，如果找不到正好 1，这将引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:09:04.450

使用 .NET 的过滤器版本（在哪里）

```
 Dim bills = db.Bills.Where(Function(x) x.CustomerId = cId) 
```

或者

```
 Dim bills = From i in db.Bills
                Where i.CustomerId = cId 
                Select i 
```

编辑：根据 Scott 的评论调用 FirstOrDefault() 只返回一个结果。如果不存在，则返回 null。要做到这一点。

```
 Dim bill = (From i in db.Bills
                    Where i.CustomerId = cId 
                    Select i).FirstOrDefault()
 If Not IsDBNull(bill) Then
  /*Do Stuff*/
 End If 
```

# objective-c - 自定义 segue - 单独为 UINavigationBar 和 UITableView 设置动画

> ID：11924084
> 
> 赞同：0
> 
> 时间：2012-08-12T17:05:48.660
> 
> 标签：objective-c, uistoryboardsegue

有没有办法使用自定义 segues 来单独为几个不同的子视图设置动画。

例如，我希望我的模态视图通过 UINavigationBar 淡入（因为源目标的 UINavigationBar 淡出）然后 UITableView 向下滑动屏幕“越过”源目标的视图控制器。

当我尝试在`- (void)perform`方法中实现这一点时。我的属性不使用`[UIView animateWithDuration: animations: completion:]`.

谁能给我一个解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:32:52.443

您当然可以使用自定义 segues 来实现这一点 - 但是，如果没有有关设置视图控制器的更多详细信息，我认为您不会获得太多帮助。

您描述的所有内容都是正确的：要创建自定义 segue，您可以在您的内部和 segue 的方法内部为视图`sourceViewController`设置`destinationViewController`动画`perform:`。如果他们没有动画，你可能想检查你的 segue 是否真的被调用了（你可以在调试器中使用断点来检查这个），或者你试图在你的视图控制器中访问的视图实际上存在于那个点及时（同样，您可以使用调试器进行检查）。

对于特定于您的应用程序的解决方案，您几乎肯定必须提供有关您尝试在其之间转换的两个视图控制器的更多详细信息。也许你可以发布你的`perform:`方法。

# macos - 在 OS X 中从 perl 控制鼠标

> ID：11924087
> 
> 赞同：1
> 
> 时间：2012-08-12T17:06:09.157
> 
> 标签：macos, cocoa, perl

这里有什么方法可以从 perl 控制 OS X 中的鼠标移动和点击吗？找到了几个 python 解决方案，但还没有 perl。

如果这里不是 perl 解决方案，可以从 perl 调用 python（或 ruby​​）代码（不是通过 fork/exec/system），而是像“Inline::Lua”或 soo..

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:38:42.170

是的，我建议你使用 Python 和[ATOMac](http://pypi.python.org/pypi/atomac)。有[Inline::Python](http://search.cpan.org/~nine/Inline-Python/)但我没用过；虽然看起来很成熟。

# node.js - Heroku 部署出现 404 错误

> ID：11924088
> 
> 赞同：0
> 
> 时间：2012-08-12T17:06:33.940
> 
> 标签：node.js, mongodb, heroku

我们正在尝试将应用程序部署到 heroku，但 MongoDB 依赖项返回 404 错误时遇到了一些问题。

我之前遇到了同样的问题，我相信资源之前已更新或关闭。这是我们从 heroku 获得的 npm 日志。

```
 git push heroku master
   Counting objects: 107, done.
   Delta compression using up to 8 threads.
   Compressing objects: 100% (88/88), done.
   Writing objects: 100% (93/93), 255.39 KiB | 61 KiB/s, done.
   Total 93 (delta 43), reused 0 (delta 0)

   -----> Heroku receiving push
   -----> Removing .DS_Store files
   -----> Node.js app detected
   -----> Resolving engine versions
          Using Node.js version: 0.8.6
          Using npm version: 1.1.41
   -----> Fetching Node.js binaries
   -----> Vendoring node into slug
   -----> Installing dependencies with npm
          npm http GET https://registry.npmjs.org/express/3.0.0rc1
          npm http GET https://registry.npmjs.org/ejs
          npm http GET https://registry.npmjs.org/mongoose
          npm http GET https://registry.npmjs.org/connect-mongo
          npm http GET https://registry.npmjs.org/underscore
          npm http 200 https://registry.npmjs.org/connect-mongo
          npm http GET https://registry.npmjs.org/connect-mongo/-/connect-mongo-0.1.9.tgz
          npm http 200 https://registry.npmjs.org/express/3.0.0rc1
          npm http GET https://registry.npmjs.org/express/-/express-3.0.0rc1.tgz
          npm http 200 https://registry.npmjs.org/ejs
          npm http GET https://registry.npmjs.org/ejs/-/ejs-0.8.1.tgz
          npm http 200 https://registry.npmjs.org/underscore
          npm http GET https://registry.npmjs.org/underscore/-/underscore-1.3.3.tgz
          npm http 200 https://registry.npmjs.org/connect-mongo/-/connect-mongo-0.1.9.tgz
          npm http 200 https://registry.npmjs.org/express/-/express-3.0.0rc1.tgz
          npm WARN package.json connect-mongo@0.1.9 No README.md file found!
          npm http 200 https://registry.npmjs.org/mongoose
          npm http GET https://registry.npmjs.org/mongoose/-/mongoose-3.0.1.tgz
          npm http 200 https://registry.npmjs.org/underscore/-/underscore-1.3.3.tgz
          npm http 200 https://registry.npmjs.org/ejs/-/ejs-0.8.1.tgz
          npm http 200 https://registry.npmjs.org/mongoose/-/mongoose-3.0.1.tgz
          npm http GET https://registry.npmjs.org/connect/2.4.1
          npm http GET https://registry.npmjs.org/commander/0.6.1
          npm http GET https://registry.npmjs.org/mongodb
          npm http GET https://registry.npmjs.org/range-parser/0.0.4
          npm http GET https://registry.npmjs.org/mkdirp/0.3.3
          npm http GET https://registry.npmjs.org/cookie/0.0.4
          npm http GET https://registry.npmjs.org/fresh/0.1.0
          npm http GET https://registry.npmjs.org/crc/0.2.0
          npm http GET https://registry.npmjs.org/methods/0.0.1
          npm http GET https://registry.npmjs.org/send/0.0.3
          npm http GET https://registry.npmjs.org/debug
          npm http 200 https://registry.npmjs.org/range-parser/0.0.4
          npm http GET https://registry.npmjs.org/range-parser/-/range-parser-0.0.4.tgz
          npm http 200 https://registry.npmjs.org/connect/2.4.1
          npm http 200 https://registry.npmjs.org/commander/0.6.1
          npm http GET https://registry.npmjs.org/connect/-/connect-2.4.1.tgz
          npm http GET https://registry.npmjs.org/commander/-/commander-0.6.1.tgz
          npm http 200 https://registry.npmjs.org/cookie/0.0.4
          npm http GET https://registry.npmjs.org/cookie/-/cookie-0.0.4.tgz
          npm http 200 https://registry.npmjs.org/mkdirp/0.3.3
          npm http GET https://registry.npmjs.org/mkdirp/-/mkdirp-0.3.3.tgz
          npm http 200 https://registry.npmjs.org/fresh/0.1.0
          npm http GET https://registry.npmjs.org/fresh/-/fresh-0.1.0.tgz
          npm http 200 https://registry.npmjs.org/crc/0.2.0
          npm http GET https://registry.npmjs.org/crc/-/crc-0.2.0.tgz
          npm http 200 https://registry.npmjs.org/range-parser/-/range-parser-0.0.4.tgz
          npm http 200 https://registry.npmjs.org/mongodb
          npm http GET https://registry.npmjs.org/-/mongodb-0.9.9-8.tgz
          npm http 200 https://registry.npmjs.org/debug
          npm http 200 https://registry.npmjs.org/send/0.0.3
          npm http 200 https://registry.npmjs.org/methods/0.0.1
          npm http GET https://registry.npmjs.org/debug/-/debug-0.7.0.tgz
          npm http GET https://registry.npmjs.org/send/-/send-0.0.3.tgz
          npm http GET https://registry.npmjs.org/methods/-/methods-0.0.1.tgz
          npm http 200 https://registry.npmjs.org/connect/-/connect-2.4.1.tgz
          npm http 200 https://registry.npmjs.org/mkdirp/-/mkdirp-0.3.3.tgz
          npm http 200 https://registry.npmjs.org/cookie/-/cookie-0.0.4.tgz
          npm http 200 https://registry.npmjs.org/fresh/-/fresh-0.1.0.tgz
          npm http 200 https://registry.npmjs.org/commander/-/commander-0.6.1.tgz
          npm http 404 https://registry.npmjs.org/-/mongodb-0.9.9-8.tgz
          npm http 200 https://registry.npmjs.org/methods/-/methods-0.0.1.tgz
          npm http 200 https://registry.npmjs.org/send/-/send-0.0.3.tgz
          npm http 200 https://registry.npmjs.org/debug/-/debug-0.7.0.tgz
          npm http 200 https://registry.npmjs.org/crc/-/crc-0.2.0.tgz
          npm http GET https://registry.npmjs.org/hooks/0.2.1
          npm http GET https://registry.npmjs.org/mongodb/1.1.2
          npm http GET https://registry.npmjs.org/ms/0.1.0
          npm WARN package.json connect@2.4.1 No README.md file found!
          npm ERR! fetch failed https://registry.npmjs.org/-/mongodb-0.9.9-8.tgz
          npm ERR! Error: 404 Not Found
          npm ERR!     at null.<anonymous> (/tmp/node-npm-oliq/lib/utils/fetch.js:47:16)
          npm ERR!     at EventEmitter.emit (events.js:115:20)
          npm ERR!     at WriteStream.flush (fs.js:1514:12)
          npm ERR!     at fs.close (/tmp/node-npm-oliq/node_modules/graceful-fs/graceful-fs.js:94:5)
          npm ERR!     at Object.oncomplete (fs.js:297:15)
          npm ERR! If you need help, you may report this log at:
          npm ERR!     <http://github.com/isaacs/npm/issues>
          npm ERR! or email it to:
          npm ERR!     <npm-@googlegroups.com>

          npm ERR! System Linux 2.6.32-343-ec2
          npm ERR! command "/tmp/node-node-0RqS/bin/node" "/tmp/node-npm-oliq/cli.js" "install" "--production"
          npm ERR! cwd /tmp/build_1kq3xko4hyz59
          npm ERR! node -v v0.8.6
          npm ERR! npm -v 1.1.41
          npm WARN package.json methods@0.0.1 No README.md file found!
          npm http 200 https://registry.npmjs.org/ms/0.1.0
          npm http 200 https://registry.npmjs.org/hooks/0.2.1
          npm http GET https://registry.npmjs.org/ms/-/ms-0.1.0.tgz
          npm http GET https://registry.npmjs.org/hooks/-/hooks-0.2.1.tgz
          npm http 200 https://registry.npmjs.org/mongodb/1.1.2
          npm http GET https://registry.npmjs.org/-/mongodb-1.1.2.tgz
          npm http GET https://registry.npmjs.org/mime/1.2.6
          npm http GET https://registry.npmjs.org/qs/0.4.2
          npm http GET https://registry.npmjs.org/formidable/1.0.11
          npm http GET https://registry.npmjs.org/bytes/0.1.0
          npm http GET https://registry.npmjs.org/pause/0.0.1
          npm http 200 https://registry.npmjs.org/ms/-/ms-0.1.0.tgz
          npm http 200 https://registry.npmjs.org/hooks/-/hooks-0.2.1.tgz
          npm http 404 https://registry.npmjs.org/-/mongodb-1.1.2.tgz
          npm http 200 https://registry.npmjs.org/formidable/1.0.11
          npm http GET https://registry.npmjs.org/formidable/-/formidable-1.0.11.tgz
          npm http 200 https://registry.npmjs.org/mime/1.2.6
          npm ERR! fetch failed https://registry.npmjs.org/-/mongodb-1.1.2.tgz
          npm http GET https://registry.npmjs.org/mime/-/mime-1.2.6.tgz
          npm http 200 https://registry.npmjs.org/bytes/0.1.0
          npm http GET https://registry.npmjs.org/bytes/-/bytes-0.1.0.tgz
          npm http 200 https://registry.npmjs.org/pause/0.0.1
          npm http 200 https://registry.npmjs.org/qs/0.4.2
          npm http GET https://registry.npmjs.org/pause/-/pause-0.0.1.tgz
          npm http GET https://registry.npmjs.org/qs/-/qs-0.4.2.tgz
          npm http 200 https://registry.npmjs.org/formidable/-/formidable-1.0.11.tgz
          npm http 200 https://registry.npmjs.org/mime/-/mime-1.2.6.tgz
          npm http 200 https://registry.npmjs.org/bytes/-/bytes-0.1.0.tgz
          npm http 200 https://registry.npmjs.org/qs/-/qs-0.4.2.tgz
          npm http 200 https://registry.npmjs.org/pause/-/pause-0.0.1.tgz
          npm ERR! 
          npm ERR! Additional logging details can be found in:
          npm ERR!     /tmp/build_1kq3xko4hyz59/npm-debug.log
          npm ERR! not ok code 0
    !     Failed to install --production dependencies with npm
    !     Heroku push rejected, failed to compile Node.js app 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:20:28.547

目前 npm 遇到 404 错误的问题很普遍：

[NPM 获取失败](https://stackoverflow.com/questions/11922430/npm-fetch-failed)

# javascript - 将随机图像从数组加载到 CSS 背景

> ID：11924090
> 
> 赞同：2
> 
> 时间：2012-08-12T17:06:39.743
> 
> 标签：javascript, css

我是一个js新手。我已经在寻找这个特定问题的答案，但在这个论坛或其他人中还没有找到答案，如果它在这里并且我错过了，很抱歉。我有一个脚本，用于将随机图像从数组加载到页面加载时直接放置在 html 中的 id 元素。

我正在尝试查看是否可以让它做同样的事情，但要为 css 文件中 id 元素中的背景图像执行此操作。我有萤火虫，它没有给我任何错误消息，但它也不起作用。

```
window. onload = choosePic;

var myPix = new
Array("images/image1.gif", "images/image2.gif");

function choosePic() {
    randomNum = Math.floor((Math.random() * myPix.length));
    document.getElementById("headerAnimation").style.backgroundImage.src = myPix[randomNum];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T17:11:26.863

你几乎是对的。

```
window.onload = choosePic;

var myPix = new Array("images/image1.gif", "images/image2.gif");

function choosePic() {
    var randomNum = Math.floor((Math.random() * myPix.length));
    document.getElementById("headerAnimation").style.backgroundImage =
        "url(" + myPix[randomNum] + ")";
} 
```

# .htaccess - 向 htaccess 添加另一个例外？

> ID：11924091
> 
> 赞同：0
> 
> 时间：2012-08-12T17:06:41.647
> 
> 标签：.htaccess, redirect, webserver

我的 .htaccess 文件允许访问服务器上的*真实*文件和文件夹。对于其他任何事情，它将重定向到`/index.php`，*除非*指定了`app`文件夹，在这种情况下它将重定向到`/app/index.php`。我想添加一个名为的**第二个**文件夹`appbeta`，它将重定向到`/appbeta/index.php`. 我应该如何修改我的 .htaccess 来添加这个额外的异常？

```
SetEnv APPLICATION_ENV development

RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(?!app)(.+)$ /index.php?u=$1 [NC,QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^app(.+)$ /app/index.php?u=$1 [NC,QSA,L]

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:21:50.190

我不确定以下重写的作用：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(?!app)(.+)$ /index.php?u=$1 [NC,QSA,L] 
```

但是，如果您的电流`.htaccess`按您的意愿工作，我会尝试以下操作，在 rewrite for`/appbeta`之前进行 rewrite for `/app`：

```
SetEnv APPLICATION_ENV development

RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(?!app)(.+)$ /index.php?u=$1 [NC,QSA,L]

# rewrite /addbeta to /appbeta/index.php ...
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^appbeta(.*)$ /appbeta/index.php?u=$1 [NC,QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^app(.+)$ /app/index.php?u=$1 [NC,QSA,L]

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

注意：如评论中所述，没有开始新问题，请在上面修复（更改`^appbeta(.+)$`为`^appbeta(.*)$`）

# api - OAuth 2.0 访问令牌是否足以完成 PayPal 支付

> ID：11924093
> 
> 赞同：0
> 
> 时间：2012-08-12T17:06:53.490
> 
> 标签：api, paypal

我正在尝试探索paypal提供的OAuth2.0 api。获得 OAuth 访问令牌后，我正在尝试查找它是否可用于支付身份验证。

任何人都可以对此提出一些想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:10:04.600

可以，但是您需要将它与[Permissions API](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_Permissions.pdf)结合使用，以允许用户授予您的应用程序代表他们进行 API 调用的权限。

# javascript - 输入值中的javascript变量

> ID：11924099
> 
> 赞同：0
> 
> 时间：2012-08-12T17:07:51.957
> 
> 标签：javascript

我有一些问题。这是我的代码片段：

```
FB.api('/me', function(me){
  if (me.id) {
  alert(me.id);
  //alert(me.email);
  var fbmail = me.email;
  alert(fbmail);
  document.write('<input id="mail" type="hidden" value="'+fbmail+'">');                    
  var retro = document.getElementById('mail').value;
  alert(retro);                    
}) 
```

我的问题是没有警报（复古）；:(你能告诉我怎么了？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T17:11:58.067

`document.write`只能在页面加载时使用。

在异步回调中调用它会删除当前页面，因此`getElementById`将返回 null。

# c# - 更新 Properties.Settings 绑定

> ID：11924109
> 
> 赞同：1
> 
> 时间：2012-08-12T17:09:17.377
> 
> 标签：c#, wpf, xaml, data-binding, settings

我在 UI 中有一个只读文本框，它绑定到 Properties.Settings.Default.MyVar，当窗口打开时，绑定正确获取值。但是当用户单击一个按钮（此按钮更改 Properties.Setting.Default.MyVar）时，文本框不会更新（但如果我关闭窗口并再次打开它，我会得到新值）。我已经尝试过 UpdataSourceTrigger 但不起作用。

我的xml：

```
<TextBox IsReadOnly="True"
         Text="{Binding Source={StaticResource settings}, Path=MyVar}"/>
<Button Content="..." Click="ChangeMyVar_Click"/> 
```

窗口代码

```
public partial class ConfigureWindow : Window, INotifyPropertyChanged
{
    public ConfigureWindow()
    {
        InitializeComponent();
    }

    private void ChangeMyVar_Click(object sender, RoutedEventArgs e)
    {
        Properties.Settings.Default.MyVar = "Changed";
        Properties.Settings.Default.Save();

        OnPropertyChanged("MyVar");
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string info)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(info));
    }
} 
```

调试我看到处理程序总是为空。我的 INotifyPropertyChanged 实施错误？或者我无法使用 Properties.Settings 更新 UI？如何解决？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T17:34:33.677

这：

```
Source={StaticResource settings} 
```

看起来你没有绑定到默认设置而是另一个实例，所以如果你更改默认设置，绑定当然不会更新，因为它的源根本没有改变。采用：

```
xmlns:prop="clr-namespace:WpfApplication.Properties" 
```

```
Source={x:Static prop:Settings.Default} 
```

更改属性就足够了，为了让 UI 注意到更改，**包含该属性的类**需要触发更改通知，因此您的通知不会做任何事情。但是在这种情况下，您根本不需要做任何事情，因为应用程序设置类确实实现了`INPC`，您只需要绑定到正确的实例。

# php - 如何更改此显示/隐藏 DIV 代码？

> ID：11924111
> 
> 赞同：0
> 
> 时间：2012-08-12T17:09:46.977
> 
> 标签：php, html, hide, show

我在我的项目中使用这个显示/隐藏 DIV 代码：http: [//papermashup.com/demos/jquery-show-hide-plugin/](http://papermashup.com/demos/jquery-show-hide-plugin/)

目前，在您单击 VIEW 后，会出现 div 并且单词 VIEW 变为 CLOSE，然后您点击关闭 div。无论如何我们可以移动 CLOSE 以便它出现在出现的 DIV 中？

我是这方面的新手，我整晚都在尝试，但我无法让它发挥作用。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:18:40.547

使用 append() 函数，您可以将代码插入到某个 div 中。尝试类似的东西

```
$("#slidingDiv_2").append("<a href='#' class='show_hide' rel='#slidingDiv_2'>Close</a>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:17:57.823

如果你想不管它`showHide.js`，有一个简单的解决方案。

1）在出现的div中创建“关闭”文本

2) 为其赋予属性，以便在单击时执行一个`.slideUp()`功能，该功能与示例页面中的其他“关闭”文本完全相同。

[`slideUp()`](http://api.jquery.com/slideUp/)

# ruby-on-rails - 如何在项目中重命名 Rails 控制器和模型

> ID：11924124
> 
> 赞同：95
> 
> 时间：2012-08-12T17:11:29.943
> 
> 标签：ruby-on-rails, model, controller, rename

我启动了一个 Rails 应用程序，一切正常。但现在，我想重命名一个控制器和关联的模型：

我想将`Corps`控制器更改`Stores`为模型的相同（没有 final s）。

看谷歌，人们建议销毁然后重新生成控制器和模型。问题是它会删除每个文件的实际代码！

有什么解决办法吗？提前致谢。

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-08-12T17:28:45.643

这是我要做的：

创建**迁移**以更改表名（数据库级别）。我假设您的旧表称为**corps**。迁移内容将是：

```
class RenameCorpsToStores < ActiveRecord::Migration
  def change
    rename_table :corps, :stores
  end
end 
```

更改模型文件名、模型类定义和模型关联：

*   文件重命名：`corp.rb`->`store.rb`
*   代码`store.rb`：更改`class Corp`为`class Store`
*   重命名所有模型关联，例如`has_many :corps`->`has_many :stores`

更改控制器文件名和控制器类定义：

*   文件重命名：`corps_controller.rb`->`stores_controller.rb`
*   代码`stores_controller.rb`：更改`class CorpsController`为`class StoresController`

重命名视图文件夹。从`corps`到`stores`。

`config/routes.rb`对文件中的路径进行必要的更改，例如`resources :corps`-> `resources :stores`，并确保代码中的所有引用都从 corps 更改为 stores (corps_path, ...)

**记得运行迁移:)**

如果以前不可行，请尝试删除 db/schema.rb 并执行：

```
 $ rake db:drop db:create db:migrate 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-16T11:44:53.613

除了 Nobita 回答之外，您同样需要将**测试**和**助手**类定义和文件名更改`corps`为`store`. **更重要**的是，您应该在**config/routes.rb**文件中更改`corps`为`store`

 **因此，总的来说，您正在对控制器、关联的模型、视图、帮助程序、测试和路由文件进行更改。

我认为你所看到的`destroy`&`generate`是一个更好的选择。我在这里给出了如何做到这一点的答案：[Rails：重命名控制器和相应的模型](https://stackoverflow.com/questions/5672640/rails-renaming-a-controlller-and-corresponding-model)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-08-01T06:04:13.057

您也可以尝试[Rails Refactor](https://github.com/jcrisp/rails_refactor) gem，这是一个用于简单重构的命令行工具，例如重命名 Rails 项目的模型和控制器

**用法：**

> Rails 项目的基本重命名和重构。尽管这些并不完美，但它们会为您完成大量工作并节省您的时间。
> 
> 在使用之前，建议您从干净的存储库状态开始，以便您可以轻松查看更改。
> 
> 安装：
> `gem install rails_refactor`
> 
> 在使用之前，请确保您***cd 到您的 rails 项目的根目录。***
> 
> 要重命名控制器：
> `rails_refactor rename OldController NewController`
> 
> *   重命名文件中的控制器文件和类名
> *   重命名控制器规范文件和文件中的类名
> *   重命名视图目录
> *   重命名文件中的帮助文件和模块名称
> *   更新路线
> 
> 要重命名控制器操作：
> `$ rails_refactor rename DummyController.old_action new_action`
> 
> *   重命名控制器类文件中的控制器动作
> *   重命名所有格式的视图文件
> 
> 要重命名模型：
> `$ rails_refactor rename OldModel NewModel`
> 
> *   重命名文件中的模型文件和类名
> *   重命名规范文件和文件中的类名
> *   重命名文件中的迁移和类名和表名
> 
> ...

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-12-09T10:23:23.500

我除了大雄的回答（如果我有足够的代表我会评论），如果你觉得勇敢，那么代码中对文件名和对模型的引用的更改可以在某种程度上自动化。例如，要更改代码中的引用，您可以使用

单数、减号和马尤斯：

```
grep -rl corp | xargs sed -i 's/corp/store/g'
grep -rl Corp | xargs sed -i 's/Corp/Store/g' 
```

复数，减号和mayus（如果复数只需要和s结尾的字符，则单数替换复数）：

```
grep -rl corps | xargs sed -i 's/corps/stores/g'
grep -rl Corps | xargs sed -i 's/Corps/Stores/g' 
```

重命名文件：

```
find . -name '*corp*' -exec bash -c 'mv $0 ${0/corp/store}' {} \; 
```

* * *

在某些 *nix 风格（包括 Slackware）上有一个名为 rename 的实用程序，可以帮助您重命名文件：

```
shopt -s globstar
rename -v corps stores app/**/*corps* config/**/*corps* test/**/*corps* 
```

检查重命名是您的想法，但我知道其他发行版（如 Ubuntu）附带同名的不同实用程序（请参阅[https://unix.stackexchange.com/questions/78621/find-rename-command-不工作](https://unix.stackexchange.com/questions/78621/find-rename-command-doesnt-work)）。在 Ubuntu 上，您可以这样做：

```
shopt -s globstar
rename -v 's/corps/stores/' app/**/*corps* config/**/*corps* test/**/*corps* 
```

请注意，您希望避免重命名 db/ 中的任何文件，除了可能在您的种子.rb 文件中，因此您可能希望排除此目录并手动进行任何更改。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-10-19T07:08:53.747

另一件重要的事情是您需要更新模型关联，无论您是手动重命名还是销毁并生成资源（因为它们存在于其他模型中），您都必须这样做。您可以运行迁移以更改数据库中外键的列名，并更改代码中对这些外键的所有引用：

```
rename_column :table, :old_id, :new_id 
```

或在声明使用旧外键的关联时设置自定义外键：

```
belongs_to :new, foreign_key: "old_id" 
```

此外，如果您的资源包含图像，它们通常存储在包含资源名称的目录中，但是（至少使用carrierwave）一旦资源名称被更改，它们将被错误地引用（文件存在于'/uploads/old/image/ 1/pic.jpg' 但在 'uploads/new/...' 中查找），因此您必须删除并重新上传图像，将它们移动到新路径，或者更改它们的位置正在寻找。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-19T08:55:37.240

如果你有模型测试，你需要改变：

文件重命名：corp_test.rb -> store_test.rb（也用于控制器测试、集成测试、夹具等）

store_test.rb 的代码：将类 CorpTest 更改为类 StoreTest。

以及 corp 在控制器、模型、集成、夹具测试中的所有引用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-05T11:23:02.733

作为刚刚完成这个痛苦过程的人，最重要的一步是构建足够的**测试**来检查尽可能多的功能。它们不仅应涵盖您计划重命名的模型/控制器，还应涵盖所有其他模型/控制器/视图部分。无论如何，这是一个很好的（甚至可能是必须的）实践。

通过迭代执行此步骤，有时您需要多次返回步骤（5 次或更多）以发现需要更改的其他文件。现在进行重命名步骤：

1.  将包含的所有文件（名称和内容）更改`Corps/Corp`为`Stores/Store`文件`db/migrate`夹
2.  尝试运行：

    耙 db:drop:all

    耙分贝：创建

    耙分贝：迁移

3.  更改`db/seeds.rb`文件内容。

4.  尝试运行：（ `rake db:seed --trace`在此步骤中您可能需要更改一些其他模型/控制器文件。）
5.  更改`test/fixtures`文件。您可能不仅需要更改 corps.yml，还需要更改其他相关文件（某些文件可能包含 corp_id）。
6.  尝试运行您的测试，最好使用固定种子运行它（添加：`TESTOPTS="--seed=1981"`或任何其他数字）
7.  重命名文件（名称和内容）要小心，有时您需要更改测试和其他应用程序文件

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-09T15:27:11.250

对于控制器，如果您*手动*进行，则必须在以下位置进行更改：

*   路线
*   应用程序/视图
*   应用程序/控制器
*   测试/控制器
*   应用程序/助手
*   应用程序/资产/javascripts/
*   应用程序/资产/样式表/

对于模特，大雄的回答还不错**

# vim - vim 有什么办法可以从 PyQt 或 PySide 自动完成方法和类？

> ID：11924125
> 
> 赞同：1
> 
> 时间：2012-08-12T17:11:35.123
> 
> 标签：vim, autocomplete, pyqt, pyside

我发现自己需要大量参考文档，因为我不记得方法或类的名称。有没有人在 vim 中编辑时遇到过自动完成这些包的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:43:59.833

[Exuberant Ctags](http://ctags.sourceforge.net/)解析 Python 源代码并与 vim 很好地集成。只需从您选择的一个或多个库中构建一个标签文件，然后将 VIM 指向您的标签文件：

```
set tags=<tags path> 
```

这仅在您的选项完整字符串中包含“t”时才有效。检查这个`set cpt?`

# c++ - Windows 中 boost::serialization 的未知异常

> ID：11924126
> 
> 赞同：1
> 
> 时间：2012-08-12T17:11:40.313
> 
> 标签：c++, exception, boost-serialization

这是我尝试过的，但我被`Error: Unknown exception`抛出

```
try{//load
  std::ifstream stream(arch_name.c_str());
  std::cout << ">> " << "Started deserializing " << arch_name << std::endl;
  boost::archive::binary_iarchive arc(stream);
  arc & c & matrix;
  stream.close();
  std::cout << ">> " << "Finished deserializing" << std::endl;
}catch(std::exception e){
  std::cout << "Error: " << e.what() << std::endl;
  return 1;
} 
```

这在带有 gcc 的 Linux 中运行良好。我在 Windows 中使用 Visual Studio。

## 编辑

回溯显示`basic_binary_iprimitive.hpp`正在引发异常

```
template<class Archive, class Elem, class Tr>
inline void basic_binary_iprimitive<Archive, Elem, Tr>::load_binary( void *address,     std::size_t count){
//.....
if(scount != s)
    boost::serialization::throw_exception(
        archive_exception(archive_exception::input_stream_error)
    ); 
```

## 编辑

我将`catch`黑色更改为`catch(boost::archive::archive_exception e)`并打印。`input stream error`

boost存档异常中的虚拟内容是否有任何遗漏？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-23T10:17:34.347

我遇到了这个问题，因为我遇到了同样的问题——Windows 上的 boost 序列化异常。我在 Greg 的评论中找到了解决方案：在创建数据流时定义 i/o 模式。

我改变了这个：

```
std::ofstream ofs(filename);
boost::archive::binary_oarchive ar(ofs); 
```

对此：

```
std::ofstream ofs(filename, std::ios::binary);
boost::archive::binary_oarchive ar(ofs); 
```

然后反序列化时不再发生异常！

我认为这个问题需要一个实际的答案（不仅仅是评论），所以我自己添加它，但所有功劳归于 Greg。

# java - 使用 java/swing 将公历日期转换为回历日期

> ID：11924128
> 
> 赞同：0
> 
> 时间：2012-08-12T17:11:49.320
> 
> 标签：java, swing, jdatechooser, hijri

有谁知道使用 Jdatechooser 将公历日期转换为回历日期的方法。(java/swing) 对解决方案的任何帮助将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:31:29.140

请看一下这个源代码，我认为它是你需要的。 [http://code.google.com/p/hijricalendar/source/browse/trunk/HijriCalendar/src/HijriCalTest.java](http://code.google.com/p/hijricalendar/source/browse/trunk/HijriCalendar/src/HijriCalTest.java)

# django - 为多表继承 Django 模型填充一个美味的资源

> ID：11924132
> 
> 赞同：7
> 
> 时间：2012-08-12T17:12:36.557
> 
> 标签：django, django-models, tastypie

鉴于以下代码，我想知道如何填充`RecordsResource`每个真实记录数据：

`models.py`

```
class Record(models.Model):
    content_type = models.ForeignKey(ContentType, editable=False, null=True)
    user = models.ForeignKey(User, related_name='records')
    issued = models.DateTimeField(auto_now_add=True)
    date = models.DateField()

    def save(self, *args, **kwargs):
        if not self.content_type:
            self.content_type = ContentType.objects.get_for_model(self.__class__)
        super(Record, self).save(*args, **kwargs)

    def as_leaf_class(self):
        model = self.content_type.model_class()
        if model == self.__class__:
            return self
        return model.objects.get(pk=self.id)

class Record1(Record):
    # some fields

# ...

class RecordN(Record):
    # some fields 
```

`api.py`

```
class BaseModelResource(ModelResource):
    class Meta(object):
        authentication = ApiKeyPlusWebAuthentication()
        authorization= Authorization()
        cache = SimpleCache()
        throttle = CacheDBThrottle(
            throttle_at=350,
            # 1 day
            expiration=86400
        )
        if settings.DEBUG:
            serializer = PrettyJSONSerializer()

    def obj_create(self, bundle, request=None, **kwargs):
        return super(BaseModelResource, self).obj_create(bundle, request, user=request.user)

    def apply_authorization_limits(self, request, object_list):
        return object_list.filter(user=request.user)

class BaseRecordResource(BaseModelResource):
    class Meta(BaseModelResource.Meta):
        filtering = {
            'date': ALL
        }
        excludes = ['issued']

class RecordsResource(BaseRecordResource):
    class Meta(BaseRecordResource.Meta):
        resource_name = 'records'
        queryset = Record.objects.all()

class Record1Resource(BaseRecordResource):
    class Meta(BaseRecordResource.Meta):
        resource_name = 'record1'
        queryset = Record1.objects.all()

# ...

class RecordNResource(BaseRecordResource):
    class Meta(BaseRecordResource.Meta):
        resource_name = 'recordn'
        queryset = RecordN.objects.all() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T08:59:57.740

好的，我刚刚解决了。我已经简化了代码。

鉴于以下代码...

`models.py`

```
from django.db import models
from model_utils.managers import InheritanceManager

class Place(models.Model):
    name = models.CharField(max_length=50)
    address = models.CharField(max_length=80)

    # https://github.com/carljm/django-model-utils#inheritancemanager
    objects = InheritanceManager()

class Restaurant(Place):
    custom_field = models.BooleanField()

class Bar(Place):
    custom_field = models.BooleanField() 
```

`api.py`

```
from core.models import Place, Restaurant, Bar
# http://django-tastypie.readthedocs.org/en/latest/cookbook.html#pretty-printed-json-serialization
from core.utils import PrettyJSONSerializer
from tastypie.resources import ModelResource

class PlaceResource(ModelResource):
    class Meta:
        queryset = Place.objects.select_subclasses()
        resource_name = 'place'
        serializer = PrettyJSONSerializer()

class RestaurantResource(ModelResource):
    class Meta:
        queryset = Restaurant.objects.all()
        resource_name = 'restaurant'
        serializer = PrettyJSONSerializer()

class BarResource(ModelResource):
    class Meta:
        queryset = Bar.objects.all()
        resource_name = 'bar'
        serializer = PrettyJSONSerializer() 
```

输出

`http://localhost:8000/api/v1/bar/?format=json`

```
{
  "meta": {
    "limit": 20,
    "next": null,
    "offset": 0,
    "previous": null,
    "total_count": 1
  },
  "objects": [
    {
      "address": "dawdaw",
      "custom_field": true,
      "id": "1",
      "name": "dwdwad",
      "resource_uri": "/api/v1/bar/1/"
    }
  ]
} 
```

好的

`http://localhost:8000/api/v1/restaurant/?format=json`

```
{
  "meta": {
    "limit": 20,
    "next": null,
    "offset": 0,
    "previous": null,
    "total_count": 1
  },
  "objects": [
    {
      "address": "nhnhnh",
      "custom_field": true,
      "id": "2",
      "name": "nhnhnh",
      "resource_uri": "/api/v1/restaurant/2/"
    }
  ]
} 
```

好的

`http://localhost:8000/api/v1/place/?format=json`

```
{
  "meta": {
    "limit": 20,
    "next": null,
    "offset": 0,
    "previous": null,
    "total_count": 2
  },
  "objects": [
    {
      "address": "dawdaw",
      "id": "1",
      "name": "dwdwad",
      "resource_uri": "/api/v1/place/1/"
    },
    {
      "address": "nhnhnh",
      "id": "2",
      "name": "nhnhnh",
      "resource_uri": "/api/v1/place/2/"
    }
  ]
} 
```

我想要达到的目标

```
{
  "meta": {
    "limit": 20,
    "next": null,
    "offset": 0,
    "previous": null,
    "total_count": 2
  },
  "objects": [
    {
      "address": "dawdaw",
      "custom_field": true,
      "id": "1",
      "name": "dwdwad",
      "resource_uri": "/api/v1/bar/1/"
    },
    {
      "address": "nhnhnh",
      "custom_field": true,
      "id": "2",
      "name": "nhnhnh",
      "resource_uri": "/api/v1/restaurant/2/"
    }
  ]
} 
```

解决方案：

```
from core.models import Place, Restaurant, Bar
# http://django-tastypie.readthedocs.org/en/latest/cookbook.html#pretty-printed-json-serialization
from core.utils import PrettyJSONSerializer
from tastypie.resources import ModelResource

class RestaurantResource(ModelResource):
    class Meta:
        queryset = Restaurant.objects.all()
        resource_name = 'restaurant'
        serializer = PrettyJSONSerializer()

class BarResource(ModelResource):
    class Meta:
        queryset = Bar.objects.all()
        resource_name = 'bar'
        serializer = PrettyJSONSerializer()

class PlaceResource(ModelResource):
    class Meta:
        queryset = Place.objects.select_subclasses()
        resource_name = 'place'
        serializer = PrettyJSONSerializer()

    def dehydrate(self, bundle):
        # bundle.data['custom_field'] = "Whatever you want"
        if isinstance(bundle.obj, Restaurant):
            restaurant_res = RestaurantResource()
            rr_bundle = restaurant_res.build_bundle(obj=bundle.obj, request=bundle.request)
            bundle.data = restaurant_res.full_dehydrate(rr_bundle).data
        elif isinstance(bundle.obj, Bar):
            bar_res = BarResource()
            br_bundle = bar_res.build_bundle(obj=bundle.obj, request=bundle.request)
            bundle.data = bar_res.full_dehydrate(br_bundle).data
        return bundle 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T07:47:35.413

在 RecordsResource 类中，您还需要添加模型字段（请参阅[https://github.com/tomchristie/django-rest-framework/blob/master/djangorestframework/resources.py#L232-234](https://github.com/tomchristie/django-rest-framework/blob/master/djangorestframework/resources.py#L232-234)）

```
class RecordsResource(BaseRecordResource):
    model = Record

    class Meta(BaseRecordResource.Meta):
        resource_name = 'records'
        queryset = Record.objects.all() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T07:17:03.843

从头解释：

在Django 中可以使用[三种继承方式。](https://docs.djangoproject.com/en/dev/topics/db/models/#model-inheritance)

1.  通常，您只想使用父类来保存您不想为每个子模型输入的信息。这个类永远不会被孤立地使用，所以抽象基类是你所追求的。

2.  如果您要对现有模型进行子类化（可能完全来自另一个应用程序）并希望每个模型都有自己的数据库表，那么多表继承就是要走的路。

3.  最后，如果您只想修改模型的 Python 级别行为，而不以任何方式更改模型字段，则可以使用代理模型。

这里的选择是多表继承

*多表继承 Django 支持的第二种模型继承类型是层次结构中的每个模型都是单独的模型。每个模型对应自己的数据库表，可以单独查询和创建。继承关系引入了子模型与其每个父模型之间的链接（通过自动创建的 OneToOneField）* [Ref](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)

从你做`Record`的`Recordx`地方去，然后使用[下面的东西](https://stackoverflow.com/questions/2202232/distinguishing-parent-models-children-with-django-inheritance)检查它的类型`1 <= x <= n``a_example_record = Record.objects,get(pk=3)``Recordx`

```
if hasattr(a_example_record, 'record1'):
    # ...
elif hasattr(a_example_record, 'record2'):
    # ... 
```

因此，既然我们知道如何从父级获取子级，并且我们需要在其元数据中提供`TastyPie`a `queryset`，您需要`queryset`在模型上编写一个由自定义管理器支持的自定义`Record`，以获取您的所有记录（更多[自定义查询集和管理器不破坏 DRY？](https://stackoverflow.com/questions/2163151/custom-queryset-and-manager-without-breaking-dry)），检查它是什么类型的孩子并将其附加到查询集或列表中。您可以在此处阅读[如何在 Django 视图中组合 2 个或更多查询集？](https://stackoverflow.com/questions/431628/how-to-combine-2-or-more-querysets-in-a-django-view)

# c++ - MFC 应用程序中的代码注入

> ID：11924133
> 
> 赞同：0
> 
> 时间：2012-08-12T17:12:59.600
> 
> 标签：c++, winapi, mfc

我有一个获取 MFC 应用程序句柄的 Win32 应用程序。我的目标是强制 MFC 程序不显示 ASSERT 错误消息框。

基本上，我制作了一个原型，允许我的 Win32 应用程序强制 MFC 应用程序显示一个消息框，只是为了检查这个想法是否可行。现在我需要强制 MFC 应用程序不显示此类 ASSERT 错误消息框。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:29:34.763

令我非常遗憾的是我错过了那个代码。但是，您仍然可以手动完成。

1.  下载并安装[CFF 资源管理器](http://download.cnet.com/CFF-Explorer/3000-2383_4-10431156.html)
2.  用它打开你的exe文件
3.  在部分资源管理器中选择导入目录。
4.  在导入的dll列表中选择USER32.dll
5.  选择 MessageBoxA 或 MessageBoxW。编辑 OFT 列。在那里写一些“无害”功能的OFT。我以 GetWindowRect 为例。

![在此处输入图像描述](../Images/935d3e2339f099fa8ec76a50833cc516.png)

如果您仍然希望应用程序执行此操作，我有一个功能非常相似的代码。它只是将您的 dll 嵌入到导入表中。您既可以编辑它以达到想要的结果，也可以使用它将 MessageBoxW 调用重定向到您的处理程序。

```
#include <windows.h>
#include <tchar.h>
#include "stdafx.h"
#include <stdio.h>

DWORD MapFile(HANDLE &FileMapping, LPVOID &FileBegin, const _TCHAR *exeName) {
    HANDLE File = CreateFile(exeName, GENERIC_READ | GENERIC_WRITE, FILE_SHARE_WRITE, NULL,
                                    OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);

    if (File == INVALID_HANDLE_VALUE) {
        return GetLastError();
    }   

    FileMapping = CreateFileMapping(File, NULL, PAGE_READWRITE, 0, 0, NULL);
    CloseHandle(File);

    if (!FileMapping) {
        return GetLastError();
    }

    FileBegin = MapViewOfFile(FileMapping, FILE_MAP_WRITE, 0, 0, 0);
    if (!FileBegin) {
        CloseHandle(FileMapping);
        return GetLastError();
    }

    return 0;
}

DWORD RewriteImportTable(const HANDLE FileMapping, const LPVOID FileBegin, const _TCHAR *dllName, const _TCHAR *funcName, DWORD &finalResult) {

    IMAGE_DOS_HEADER* dos_header;
    IMAGE_FILE_HEADER* file_header;
    IMAGE_OPTIONAL_HEADER* optional_header;
    IMAGE_SECTION_HEADER* section_header;

    // Counting PE-header offset
    dos_header = (IMAGE_DOS_HEADER*) FileBegin;
    DWORD PEOffset = dos_header->e_lfanew;
    file_header = (IMAGE_FILE_HEADER*) ((DWORD)FileBegin + PEOffset); // file_header must reference "PE\0"

    // Checking if we work with PE
    _TCHAR* PEString = "PE\0";
    if (_tcscmp(PEString, (const _TCHAR*) file_header) != 0) {
        printf("This file is not Portable Executable!\n");
        return 666;
    }

    file_header = (IMAGE_FILE_HEADER *)((DWORD)file_header + sizeof(DWORD)); // Ignoring PE
    optional_header = (IMAGE_OPTIONAL_HEADER *)((DWORD)file_header + sizeof(IMAGE_FILE_HEADER));

    // Finding import section
    DWORD ImportRVA = optional_header->DataDirectory[IMAGE_DIRECTORY_ENTRY_IMPORT].VirtualAddress;
    int sectNum = -1;

    // Finding import table
    section_header = (IMAGE_SECTION_HEADER*) ((DWORD) optional_header + sizeof(IMAGE_OPTIONAL_HEADER));

    for (int i = 0; i < (file_header->NumberOfSections); i++) {
        if (ImportRVA < (section_header->VirtualAddress)) {
            section_header--;
            sectNum = i-1;
            break;  
        }
        section_header++;
    }

    if (sectNum == -1) {
        printf("This program uses no external libraries! (strange)\n");
        return 666;
    }

    // Getting address of section folowing import section
    section_header++;
    DWORD SectionNextToImportBegin = (DWORD)FileBegin + section_header->PointerToRawData;
    section_header--;

    // Getting the address of the import table
    LPVOID ImportSectionBegin = (LPVOID) ((DWORD)FileBegin + section_header->PointerToRawData);

    // Counting the import table offset in the import section
    LPVOID ImportTable = (LPVOID)((DWORD)ImportSectionBegin + (ImportRVA - section_header->VirtualAddress));

    IMAGE_IMPORT_DESCRIPTOR *DLLInfo = (IMAGE_IMPORT_DESCRIPTOR*) ImportTable;
    LPVOID DLLName;
    DWORD DLLCounter = 0;

    while (DLLInfo->Name != NULL) {
        DLLCounter++;
        DLLName = (LPVOID) ((DWORD)ImportSectionBegin + ((DWORD)DLLInfo->Name - section_header->VirtualAddress));
        DLLInfo++;
    }

    printf("Number of imported libraries: %d\n", DLLCounter);

    // Counting the size of the future import table
    DWORD newImportTableSize = sizeof(IMAGE_IMPORT_DESCRIPTOR) * (DLLCounter + 2);

    // Finding the end of the import section
    LPVOID pos = (LPVOID) (SectionNextToImportBegin - 1);

    DWORD maxFree = 0;
    DWORD prevPtr;
    LPVOID freePtr = NULL;

    // Searching for the free place
    while (pos >= ImportSectionBegin) {
        if (*(BYTE*)pos == 0) {
            prevPtr = (DWORD) pos;

            while (*(BYTE*)pos == 0) {
                pos = (LPVOID) ((DWORD)pos - 1);
            }

            if (((DWORD)prevPtr - (DWORD)pos) > maxFree) {
                maxFree = ((DWORD)prevPtr - (DWORD)pos);
                freePtr = (LPVOID) ((DWORD)pos + 1);
            }
        }
        pos = (LPVOID) ((DWORD)pos - 1);
    }

    // Modifying pointer: it can refer the tailing zero of some stucture
    freePtr = (LPVOID) ((LPDWORD)freePtr + 1);
    maxFree -= 4;

    // Checking if we have enough space in the import section
    if (maxFree < newImportTableSize) {
        printf("Not enough free space in Import Section\n");
        return 666;
    }

    printf("Injecting new library...\n");

    // Copying old import table on the new place
    memcpy(freePtr, ImportTable, sizeof(IMAGE_IMPORT_DESCRIPTOR) * DLLCounter);

    // Saving everithing we need on the old place
    typedef struct {
        DWORD ZeroDword;
        DWORD IAT;
        DWORD IATEnd;
    } MeanStruct;

    MeanStruct patch;
    patch.ZeroDword = NULL; // this is \0 for dll name
    patch.IAT = ImportRVA + _tcslen(dllName) + sizeof(MeanStruct); // RVA to where list of functions begins
    patch.IATEnd = NULL;

    WORD Hint = 0;

    IMAGE_IMPORT_BY_NAME myName;
    myName.Hint = 0x00;
    myName.Name[0] = 0x00;

    LPDWORD zeroPtr = (LPDWORD) ImportTable;
    memcpy(zeroPtr, dllName, _tcslen(dllName));
    zeroPtr = (LPDWORD) ((DWORD)zeroPtr + strlen(dllName));
    memcpy(zeroPtr, &patch, sizeof(patch));
    zeroPtr = (LPDWORD) ((DWORD)zeroPtr + sizeof(patch));

    finalResult = (DWORD)zeroPtr - (DWORD)ImportSectionBegin + section_header->VirtualAddress;

    memcpy(zeroPtr, &Hint, sizeof(WORD));
    zeroPtr = (LPDWORD) ((DWORD)zeroPtr + sizeof(WORD));
    memcpy(zeroPtr, funcName, strlen(funcName) + 1); // we have no need to write \0 into the end - this is already free space
    zeroPtr = (LPDWORD) ((DWORD)zeroPtr + strlen(funcName) + 1);
    memcpy(zeroPtr, &myName, sizeof(IMAGE_IMPORT_BY_NAME));

    // filling info about dll
    IMAGE_IMPORT_DESCRIPTOR myDLL;

    // counting RVA for IMAGE_IMPORT_BY_NAME: 
    DWORD IIBN_Table = ImportRVA + strlen(dllName) + sizeof(DWORD);

    // function name pointer
    myDLL.Characteristics = IIBN_Table;
    myDLL.TimeDateStamp = NULL;
    myDLL.ForwarderChain = NULL;
    // dll name pointer
    myDLL.Name = ImportRVA;
    myDLL.FirstThunk = IIBN_Table;

    // writting dll info into the new import table
    LPVOID oldFreePtr = freePtr;
    freePtr = (LPVOID) ((DWORD)freePtr + sizeof(IMAGE_IMPORT_DESCRIPTOR) * DLLCounter);
    memcpy(freePtr, &myDLL, sizeof(IMAGE_IMPORT_DESCRIPTOR));

    // creating list tail
    myDLL.Characteristics = NULL;
    myDLL.TimeDateStamp = NULL;
    myDLL.ForwarderChain = NULL;
    myDLL.Name = NULL;
    myDLL.FirstThunk = NULL;

    // writing list tail
    freePtr = (LPVOID) ((DWORD)freePtr + sizeof(IMAGE_IMPORT_DESCRIPTOR));
    memcpy(freePtr, &myDLL, sizeof(IMAGE_IMPORT_DESCRIPTOR));

    // setting new import table rva
    DWORD newImportTableRVA = (DWORD)oldFreePtr - (DWORD)ImportSectionBegin + section_header->VirtualAddress;

    // changing DataDirectory
    optional_header->DataDirectory[IMAGE_DIRECTORY_ENTRY_IMPORT].VirtualAddress = newImportTableRVA;
    optional_header->DataDirectory[IMAGE_DIRECTORY_ENTRY_IMPORT].Size = (DLLCounter + 1) * sizeof(IMAGE_IMPORT_DESCRIPTOR);

    // clearing non-actual values
    optional_header->DataDirectory[IMAGE_DIRECTORY_ENTRY_BOUND_IMPORT].VirtualAddress = 0;
    optional_header->DataDirectory[IMAGE_DIRECTORY_ENTRY_BOUND_IMPORT].Size = 0;

    optional_header->DataDirectory[IMAGE_DIRECTORY_ENTRY_IAT].VirtualAddress = 0;
    optional_header->DataDirectory[IMAGE_DIRECTORY_ENTRY_IAT].Size = 0;

    return 0;
}

int _tmain(int argc, _TCHAR *argv[]) {

    if (argc != 4) {
        printf("Invalid arguments number!!!\n");
        return 0;
    }

    HANDLE FileMapping;
    LPVOID FileBegin;
    DWORD FileMappingResult = MapFile(FileMapping, FileBegin, argv[1]);
    if (0 != FileMappingResult) {
        printf("Error of file mapping (%d)\n", FileMappingResult);
        if (NULL != FileMapping) CloseHandle(FileMapping);
        return FileMappingResult;
    }

    DWORD functionAddr;
    DWORD RewriteImportTableResult = RewriteImportTable(FileMapping, FileBegin, argv[2], argv[3], functionAddr);
    if (0 != RewriteImportTableResult) {
        UnmapViewOfFile(FileBegin);
        CloseHandle(FileMapping);
        return 666;
    }

    printf("Library successfully injected!\n");
    printf("Address of injected function: %X", functionAddr);

    UnmapViewOfFile(FileBegin);
    CloseHandle(FileMapping);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T19:30:49.660

您可以通过拦截`MessageBoxA`/`MessageBoxW`函数调用来做到这一点。在用户模式级别，这通常在以下三个位置之一完成：

*   **调用站点**- 您的可执行文件中可能有多个调用`MessageBox`。您需要找到要禁用的那个。然后你可以用什么都不做的代码覆盖调用（即用`nop`指令覆盖）。
*   **IAT** - 导入地址表；由 PE 加载器填充的函数指针表。执行经常（但不总是）流经此处，替换函数指针`MessageBox`可以允许将`MessageBox`调用重定向到一些什么都不做的例程。
*   **函数入口点**-`MessageBox`函数的开始。这可以通过`GetProcAddress`将第一条指令替换为`ret`.

操作在运行时（动态）或静态（二进制重写/可执行编辑）完成，第一个选项更为常见。可以帮助您实现运行时绕行的库是 Microsoft Detours。

这不是所有可能性的完整列表，而是执行重定向和绕行的最常见方法。

# python - 如何使用 Beautiful Soup 查找 id 变化的标签？

> ID：11924135
> 
> 赞同：5
> 
> 时间：2012-08-12T17:13:29.850
> 
> 标签：python, regex, beautifulsoup

我在 Python 中使用 Beautiful Soup。

这是一个示例网址：

[http://www.locationary.com/place/en/US/Ohio/Middletown/McDonald%27s-p1013254580.jsp](http://www.locationary.com/place/en/US/Ohio/Middletown/McDonald%27s-p1013254580.jsp)

在 HTML 中，有一堆标签，我可以指定要查找哪些标签的唯一方法是使用它们的 id。我只想找到电话号码。标签如下所示：

```
<td class="dispTxt" id="value_xxx_c_1_f_8_a_134242498">5134231582</td> 
```

我访问了同一网站上的其他 URL，每次都发现电话号码标签的 ID 几乎相同。始终保持不变的部分是：

```
'value_xxx_c_1_f_8_a_' 
```

但是，之后的数字总是会发生变化。有没有一种方法可以告诉 Beautiful Soup 查找 id 的一部分并匹配它，让另一部分像正则表达式一样是数字？

另外，一旦我得到标签，我想知道......如何在不使用正则表达式的情况下提取电话号码？我不知道 Beautiful Soup 是否可以做到这一点，但它可能比正则表达式更简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T17:16:48.147

您可以使用正则表达式（此示例匹配标签名称，您需要对其进行调整，使其与元素的 id 匹配）：

```
import re
for tag in soup.find_all(re.compile("^value_xxx_c_1_f_8_a_")):
    print(tag.name) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T17:18:11.907

了解您的文档

[http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)

```
soup.findAll(id=re.compile("para$"))
# [<p id="firstpara" align="center">This is paragraph <b>one</b>.</p>,
#  <p id="secondpara" align="blah">This is paragraph <b>two</b>.</p>] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T17:20:02.577

您可以在此处使用[*CSS 选择器*](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors)来匹配属性值前缀：

```
soup.select('div[id^="value_xxx_c_1_f_8_a_"]') 
```

这只会匹配带有以字符串开头`<div>`的属性的标签。`id``value_xxx_c_1_f_8_a_`

如果您愿意改用[`lxml`](http://lxml.de/)，可以使用 XPath 1.0 表达式来查找这些：

```
from lxml import etree
doc = etree.parse(openfile)
for elem in doc.xpath('//div[starts-with(@id, "value_xxx_c_1_f_8_a_")]'):
    print elem.text 
```

使用 lxml XPath 表达式将比使用 BeautifulSoup 正则表达式匹配快一个数量级。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-12T17:36:24.540

要获取电话号码，您可以使用 .text 属性。

```
tag = soup.find("foo") 
phone_number = tag.text 
```

# asp.net - 模块化的 eXpressApp 框架

> ID：11924138
> 
> 赞同：0
> 
> 时间：2012-08-12T17:13:53.360
> 
> 标签：asp.net, module, devexpress, xaf

我是我们公司的研发经理。我正在寻找好的解决方案来模块化我们的产品。我们公司正在研究财务和官方系统。它有很多子系统。我们想组合不同的子系统并将它们模块化，比如 Oracle ERP。我们想分离不同的子系统，当我们的客户需要特殊的子系统时，从解决方案中选择它们。

你认为我们可以使用“The eXpressApp Framework”吗？请指导我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:53:49.353

据我所知，eXpressApp 框架（又名“XAF”），您的问题不能直接用“是”或“否”来回答。XAF 有许多特点，使其成为模块化系统的绝佳平台，但它也有一些限制。如果您想使用遗留数据库，XAF 将在为您生成持久类和工作接口（WinForms 和/或 ASP.NET）方面做得很好。内置的安全系统将允许您以模块化的方式授予这些类（以及相关的列表视图和详细视图）的权限。

但是，存储过程中包含的任何逻辑都不会自动使用，并且任何现有的表示层都不会以无缝方式轻松合并。

但由于 XAF 确实是可定制的、功能强大的、成熟的并且得到很好的支持，我建议您通过下载并了解评估版本来试一试，如果您有任何问题，请联系 DevExpress 支持。这两个资源都可以在这里找到[http://www.devexpress.com/products/net/application_framework/](http://www.devexpress.com/products/net/application_framework/)。

祝你好运！

# sql - 如何从单个数据库的多个表中获取数据

> ID：11924141
> 
> 赞同：0
> 
> 时间：2012-08-12T17:14:03.530
> 
> 标签：sql, database, foreign-keys

```
 i have three tables file, expense and payment. I want fetch data from 3 table based on foreign key. 
```

我有以下三个表

**文件表**

```
FileId
FileNo 
```

**付款表**

```
 Id
  Amount
  FK_FileID 
```

**费用表**

```
 Id
  Amount
  FK_FileID 
```

我想要像这样的输出

```
FileNo      Amount  IsPayment
10001         220         True
10001         120         False
10001         150         True 
```

**IsPayment 是逻辑字段**，如果金额来自付款表 IsPayment 应该为真，如果它来自费用表，则应该为假。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:44:41.630

我想这个查询应该可以解决问题：

```
SELECT ft.FileNo, pt.Amount, 'True' IsPayment
FROM FileTable ft
JOIN PaymentTable pt ON pt.FK_FileID = ft.FileId
UNION ALL
SELECT ft.FileNo, et.Amount, 'False' IsPayment
FROM FileTable ft
JOIN ExpenseTable et ON et.FK_FileID = ft.FileId 
```

# php - Yii 比较密码仅适用于一个字段

> ID：11924147
> 
> 赞同：0
> 
> 时间：2012-08-12T17:14:29.603
> 
> 标签：php, validation, yii

我正在使用 Yii 的内置比较验证器来比较两个表单属性：

```
<div class="row ">
<?php echo $form->labelEx($model, 'newPassword', array('class'=>'control-label'));?>
<?php echo $form->passwordField($model, 'newPassword',array('class'=>'span5','maxlength'=>100)); ?>
<?php echo $form->error($model, 'newPassword'); ?>
</div>
<div class="row">
<?php echo $form->labelEx($model, 'confirmPassword', array('class'=>'control-label'));?>
<?php echo $form->passwordField($model, 'confirmPassword',array('class'=>'span5','maxlength'=>100)); ?>
<?php echo $form->error($model, 'confirmPassword'); ?>
</div> 
```

与规则：

```
array('newPassword', 'length', 'max'=>100,'min'=>6),
array('newPassword', 'compare', 'compareAttribute'=>'username','operator'=>'!=', 'message'=>'Password must not be the same as username'),
array('newPassword', 'compare', 'compareAttribute'=>'confirmPassword','message'=>'Please enter the same password twice'),
array('confirmPassword', 'safe'), 
```

当我第一次输入 newPassword 时，会触发验证并显示“输入相同”的错误消息。如果我然后正确输入 confirmPassword，它不会隐藏。如果我然后更改 confirmPassword，然后更改 newPassword 以匹配，则错误隐藏。它似乎只在我更改 newPassword 字段时才起作用 - 所以我必须向后填写表格才能正确隐藏错误。

我错过了什么吗？

[编辑] 我可以强制验证在具有 compareAttribute 规则的字段上触发，方法是使用 JavaScript 暂时清空字段的值，触发验证，然后重新应用以前的值并再次触发验证。不过似乎有点疯了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:48:51.297

我猜你正在使用客户端验证？

我相信这不能按您的意愿工作的原因是当您更改除 newPassword 字段之外的字段时，不会触发 newPassword 的规则。

不幸的是，我不确定当您更改另一个字段时如何在一个字段上触发验证，尽管看起来您[之前曾问过这个问题](https://stackoverflow.com/questions/11469194/trigger-yii-field-validation-onchange-of-another-field)。Jon 的回答似乎建议您可以[`$.fn.yiiactiveform.updateInput`](http://code.google.com/p/yii/source/browse/tags/1.1.10/framework/web/js/source/jquery.yiiactiveform.js#239)在 javascript 中使用 onchange 来触发验证？

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-08-14T07:32:44.203

设置运算符

```
array('newPassword', 'compare', 'compareAttribute'=>'confirmPassword','operator'=>'==' ,'message'=>'Please enter the same password twice'),**strong text** 
```

# javascript - 寻找解释为什么 `[1,2,3] === [1,2,3]` 在 JS 中是错误的

> ID：11924149
> 
> 赞同：1
> 
> 时间：2012-08-12T17:14:40.843
> 
> 标签：javascript, ecmascript-5

我正在查看 ES5 的第 11.9.6 条，试图弄清楚为什么 [1,2,3] === [1,2,3] 返回 false。

编码：

```
a = [1,2,3]
b = [1,2,3]
a === b // false 
```

严格相等比较算法的相关规则：

> x === y
> 
> (1) 如果 Type(x) 与 Type(y) 不同，则返回**false**。
> 
> ...
> 
> ...
> 
> ...
> 
> (7) 如果 x 和 y 引用同一个对象，则返回 true。否则返回**false**。

任何想法为什么解释器返回错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T17:16:52.327

`a`并且`b`是两个不同的对象，它们恰好具有相同的 Number 值。如果你这样做了，`a[0] = 42;`那么`b[0]`仍然等于 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:16:32.927

它们不是指同一个对象。就那么简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T17:17:02.047

它看起来像你的`a`并且`b`指的是不同的对象。它们可能每个都包含相同的值并且是同一类的实例，但您可以更改其中一个而另一个保持不变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T17:17:10.523

`(7) Return true if x and y refer to the same object. Otherwise return false.`- 它们不是指同一个对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T17:17:41.067

因为创建了两个对象。

# java - 看懂罗盘的布局算法

> ID：11924150
> 
> 赞同：15
> 
> 时间：2012-08-12T17:14:49.790
> 
> 标签：java, graph, clojure, visualization, graphviz

我想可视化一个代表一些地理地图的图表。因此，我的图表的边缘与罗盘玫瑰（北、南、东、西）相关联。图本身是有向的，可以做成无环的。

例如，我有节点：House-1、House-2、House-3，边缘为 [House-1，North-of，House-2]，[House-2，East-of，House-3]。

我正在寻找一种可以理解罗盘的布局算法（也许作为提示？）

我经历过 JUNG、JGraph、GraphViz，但似乎都没有做我想做的事，但我可能错过了一些东西。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:30:46.230

最近有一篇论文处理了这个问题，他们试图重建韩国的旧土地记录（地籍）。论文中有一个布局算法应该可以满足您的需求。它没有提供所有细节，但它确实给出了大纲和对细节的引用。

Hyungmin Lee、Sooyun Lee、Namwook Kim 和 Jinwook Seo。2012\. *JigsawMap：通过绘制历史文本地籍图将过去与未来联系起来*。在 2012 年 ACM 计算系统中的人为因素年度会议论文集 (CHI '12)。ACM，纽约，纽约，美国，463-472。DOI = [10.1145/2207676.2207740](http://dx.doi.org/10.1145/2207676.2207740)。

![拼图地图示例](../Images/dc4a60c51c656a3529f5c74cf4d13781.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:46:18.360

@edallme：好文档，有趣！

@道文：

我在你的帖子中理解的是，你正在寻找一种算法来将所有块放在地图上，而不是一个“小部件”来做到这一点（所以也许我错了？）。

如果您询问计算如何放置块的想法（知道“图形本身是有向的并且可以制成非循环的”），则以下方法应该有效，与您使用的图形库无关：

您可以尝试首先生成一个依赖图，例如每个节点都受其他节点的约束（相对位置和偏移量，例如 SOUTH/30units）。这堆代码也应该检查不连贯性。

其次，计算每个块的相对位置，将最小值和最大值存储在某处（参见第 3 部分），以及对具有最小/最大位置的对象的引用。

第三，您应该能够虚拟生成具有最小/最大相对位置的全尺寸图尺寸。

然后，你“只是”必须从角落里画出来。

# php - Plesk - 添加梨

> ID：11924151
> 
> 赞同：2
> 
> 时间：2012-08-12T17:15:03.557
> 
> 标签：php, linux, pear, plesk

我目前有一个安装了 Plesk 的 linux 服务器。我需要有梨功能，但是我很难理解文档。

查看 phpinfo()，configure 命令包含 --without-pear。

我已经“编辑”了我的 httpd.include 文件以将 openbase_dir 值扩展到 /usr/share/pear 并且还在包含路径中使用了它。

在梨手册中，它指出：

```
When using PHP, the PEAR Package Manager is already installed unless one has used the ./configure option --without-pear. 
```

这是否意味着我需要再次安装 pear 包管理器？我需要用 --with-pear 重新配置 PHP 吗？如果是这样，我该怎么做？

在这一步之后，我还需要做些什么来启用 pear 吗？

非常感谢

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-30T08:07:10.803

就个人而言，我刚刚使用**apt-get install php-pear**手动安装了 PEAR，然后我将它包含在我的 plesk 面板上每个域和子域的 php 参数中。所以我在**include_path**和**open_basedir部分添加了***/usr/share/php*（这是 PEAR 目录，您可以使用**pear config-get php_dir**获取它） （您可以[在此处查看](https://manage.grabweb.net/knowledgebase.php?action=displayarticle&id=959)如何在 plesk 上管理 PHP 设置）。

# android - 带有自定义 ListView 的 ActivityGroup

> ID：11924152
> 
> 赞同：0
> 
> 时间：2012-08-12T17:15:14.653
> 
> 标签：android

在我的应用程序中，底部有 4 个选项卡，每个选项卡都连接到一个 ActivityGroup：

```
tabHost.addTab(tabHost
.newTabSpec("Group1")
.setIndicator("group1")
.setContent(new Intent(this, Group1.class))); 
```

group1 就像一个控制子Activity行为的接口

```
this.history = new ArrayList<View>();
    group1 = this;

    /** a frame for its child **/
    View view = getLocalActivityManager().startActivity(
            "Group1_Layer1",
            new Intent(Group1.this, costumeList.class)
                    .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK))
            .getDecorView();
    replaceView(view); 
```

goup1 有一个自定义的 ListView：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.xml, null);

            ImageView image = (ImageView) v.findViewById(R.id.cell);
                            .
                            .
        }
        return v;
    }
} 
```

但它崩溃了，logCat 显示：

`Unable to start activity, java.lang.NullPointerException`

崩溃刚刚发生在自定义 ListViews 中，

其他活动没有这个问题，

它出什么问题了？

# c - 用C编译后生成的可执行文件可以复制并在任何不同的OS（UNIX）上运行吗？

> ID：11924153
> 
> 赞同：2
> 
> 时间：2012-08-12T17:15:32.967
> 
> 标签：c

我是一名 java 程序员，但我在 C 语言中几乎没有什么事情要做。所以，我从一个简单的例子开始，如下所示。如果我已经编译它并生成一个可执行文件（hello），我可以在没有原始文件（hello.c）的任何unix平台上运行可执行文件（hello）吗？还有有没有办法从可执行文件中读取数据，将可执行文件反编译为原始文件（hello.c）？

```
[oracle@oracleapps test]$ cat hello.c
#include <stdio.h>
int main(){
int i,data =0;
for(i=1;i<=64;i+=1){
data = i*2;
printf("data=%d\n",data);
}
return 0;
} 
```

编译

```
gcc -Wall -W -Werror hello.c -o hello 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T17:26:57.923

您可以在与您为其编译可执行文件的平台兼容 ABI 的平台上运行生成的可执行文件。ABI 兼容性基本上意味着在两个（可能不同的）操作系统上使用相同的物理处理器架构和操作系统接口（加上调用约定）。例如，您可以在 FreeBSD 系统（具有相同的处理器类型）上运行为 Linux 编译的二进制文件，因为 FreeBSD 包含 Linux ABI 兼容性。但是，可能无法在所有其他类型的 Unices 上运行二进制文件，除非进行了一些骇客操作。例如，你不能在 Linux 上运行 Mac OS X 应用程序，但是[这个人有一个解决方案](https://github.com/shinh/maloader)，可以在 Linux 上使用一些 OS X 命令行工具（包括 GCC 编译器本身）。

逆向工程：确实有反编译器旨在从机器代码生成 C 代码，但它们（还）不是很强大。原因是它们天生就很难写。必须识别机器代码模式，即使那样你也无法收集所有原始信息。例如，循环类型、注释和非静态局部变量名称以及大多数类型在编译过程中都消失了。例如，如果您有这样的 C 源文件：

```
int main(int argc, char **argv)
{
    int i;
    for (i = 0; i < 10; i++)
    {
        printf("I is: %d\n", i); /* Write the value of I */
    }

    return 0;
} 
```

C 反编译器可能能够重建以下代码：

```
int main(int _var1, void *_var2)
{
    int _var3 = 0;
    while (_var3 < 10)
    {
        printf("I is: %d\n", _var3);
        _var3 = _var3 + 1;
    }

    return 0;
} 
```

但这将是一个相当先进的反编译器，例如[这个。](http://boomerang.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T17:18:34.367

不......每个平台可能有不同的可执行格式要求，不同的硬件架构，由链接器确定的不同的可执行内存布局等。编译的可执行文件是其当前编译平台的“本机”，而不是其他平台。不过，您可以在当前机器上交叉编译另一个架构。

例如，即使它们可能有很多相似之处，在 Linux x86 上编译的可执行文件并不能保证在 BSD 下运行，这取决于它的风格（即，您可能可以在 FreeBSD 下运行它，但通常不是 OSX 的达尔文版本的 BSD，甚至认为两者机器可能具有相同的底层硬件架构）。您也无法在运行 IRIX 的 SGI MIPS 机器上编译某些东西并在运行 Solaris 的 Sun SPARC 上运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T17:19:41.437

您不能在任何平台上运行可执行文件。

您可以在没有 .c 文件的其他机器（或这台机器）上运行可执行文件。如果它是在相同硬件上运行的相同操作系统/发行版。

您可以使用反编译器到反汇编程序来读取文件并将其视为汇编或 C-它们看起来与原始 c 文件不太一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T17:22:30.717

编译后的文件是纯机器代码（加上一些元数据），因此它是自给自足的，因为它不需要存在源文件。不足之处？机器代码是操作系统和平台特定的。对于平台，我们通常只是粗略地指 CPU 的指令集，即“x86”或“PowerPC”，但使用某些编译器标志编译的某些代码可能需要特定的指令集扩展。操作系统依赖性不仅是由于可执行文件的不同格式（例如，ELF 与 PE 相对）造成的，而且还由使用特定于操作系统的服务或以特定于操作系统的方式使用的通用操作系统服务（例如系统调用）引起的。除此之外，几乎所有重要的代码都依赖于一些库（至少是 C 运行时库），所以你可能不会 如果没有兼容版本的正确库，就无法运行可执行文件。因此，您的可执行文件可能不会在 10 年前的专有 UNIX 上运行，并且*可能*无法在不同的 Linux 发行版上运行（尽管您的程序很有可能会运行，因为它可能只依赖于`glibc`.

虽然机器代码可以很容易地反汇编，但结果是非常低级的，对许多人来说毫无用处。尽管有尝试，但反编译为 C 几乎总是要困难得多。算法可以恢复，只是因为它们*必须以**某种方式*在机器代码中编码。假设您没有为调试而编译，它*永远不会*恢复注释、格式、变量名等，因此即使是“完美”的反编译器也会产生与您输入的不同的 C 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T17:21:03.790

对于 C 程序，程序与编译它的环境相关联（通常与编译它的平台相同，除非您进行交叉编译）。您可以将为一个版本的 Linux（和特定的硬件架构）构建的东西复制到另一台运行相同版本 Linux 的具有相同架构的机器上，您会没事的。您通常可以在相关版本的 Linux 上运行它。但是您不会让 x86/64 代码在 IA32 机器、PPC 机器或 SPARC 机器上运行。如果基本的 O/S 足够相似，您可能会在 x86/64 机器上运行 IA32 代码。你可能会也可能不会为 Debian 编译一些东西以在 RedHat 下运行，反之亦然；这取决于您的程序使用哪些库。

Java 通过编译一个与平台无关的字节码程序和一个平台特定的 JVM (JRE) 在每个平台上运行它来避免这种情况。这种 WORM（一次写入，多次运行）行为是 Java 的一个关键卖点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-12T17:42:04.143

是的，你可以在任何 unix`qemu`上运行它。这与 java 程序非常相似，您可以在 jvm 运行的任何 unix 上运行它...

# php - 从 php 脚本中预缓存第二张图片

> ID：11924157
> 
> 赞同：0
> 
> 时间：2012-08-12T17:16:24.463
> 
> 标签：php, javascript, image, preload

我有这样的html：

```
<html>
<body>
         <script src="http://example.com/a.js"></script>
         <img src="loading.gif" />

</body>
</html> 
```

现在我有一个输出 png 图像的 php 脚本。

我想要的是：

1.  从 php 脚本中预加载/预缓存 png 图像。
2.  当所有东西都被加载（页面、图像、外部 js、..）时，我需要调用 a.js 中定义的函数
3.  调用该函数后，我需要显示预加载的图像（替换 loading.gif）

我如何实现这一目标？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:41:07.387

您可以使用 JavaScript Image 对象预加载图像：

```
var img = new Image();
img.src = 'path/to/image.png'; 
```

现在图像被缓存。您可以简单地将带有此图像的标签附加到文档中，您的图像将立即显示。

# jquery - QUnit - Firefox 中的无限循环 - 为什么？

> ID：11924159
> 
> 赞同：0
> 
> 时间：2012-08-12T17:16:36.867
> 
> 标签：jquery, qunit

我是 QUnit 的新手，并尝试编写一些测试。我发送了一个 ajax-Request 来模拟导航中的点击。之后，我尝试填写两个输入字段并单击提交按钮。现在我想等待结果并获取预期的“电子邮件已发送”成功消息。不幸的是，测试套件一次又一次地启动——就像一个无限循环——出了什么问题？提前致谢。

这是我的代码：

```
// Aufruf in layouttest.phtml
function runTestSuite(){
// Standardtest QUnit
test("Standardtest", function() {
    ok(true, "Test erfolgreich durchlaufen.");
    var value = "hallowelt";
    equal( value, "hallowelt", "Wert hallowelt wird erwartet!" );
});

// Sende Formularinfo an Server
test("Klick Kontakt, sende Formular", function() {
    var mes = "test: Klick Kontakt, sende Formular;";
    stop(); // Test anhalten fuer bestimmte Zeitspanne
    // Ajax1: Klicke Kontakt
    jQuery.ajax({
        url: "./../index/kontakt/",
        async: false,
        success: function(response){
            if (response){
                jQuery('#ajaxcontent').html(response);
            }
        },
        context: document.body,
        type: "GET"
    });
    // Aktion: Fuelle Formular, Klick auf Button;
    var emailField = jQuery('input#email').eq(0);
    emailField.val('xxx@xxx.com');
    var textArea = jQuery('textarea#ta01').eq(0);
    textArea.val('Testcontent ...');
    var submitButton = jQuery('input#submit').eq(0);
    submitButton.click();
    // Warte auf Resultat, unterbreche test-Funktion, pruefe Assertion, lasse Test weiterlaufen;
    setTimeout(function(){
        var exp = "E-Mail verschickt.";
        var act = jQuery('#ajaxcontent h3 p').eq(0).text();
        equal(act, exp, mes);
        // Restart des Tests
        start();
    }, 3000); // 3 Sekunden warten
});
} 
```

# php - 教义2中的子查询 notIN 函数

> ID：11924164
> 
> 赞同：30
> 
> 时间：2012-08-12T17:16:54.790
> 
> 标签：php, doctrine-orm, query-builder

我想选择不在特定服务中的成员。我有 3 张桌子：

*   `membre`
*   `service`
*   `membre_service``membre`（和之间的关系`service`）

我正在使用学说 2，在 SQL 中我的查询是：

```
SELECT m.* FROM membre m WHERE m.`id` NOT IN (
    SELECT ms.membre_id FROM membre_service ms WHERE ms.service_id != 29
) 
```

在教义中，我这样做：

```
$qb  = $this->_em->createQueryBuilder();
$qb2 = $qb;
$qb2->select('m.id')
        ->from('Custom\Entity\MembreService', 'ms')
        ->leftJoin('ms.membre', 'm')
        ->where('ms.id != ?1')
        ->setParameter(1, $service);

    $qb  = $this->_em->createQueryBuilder();
    $qb->select('m')
        ->from('Custom\Entity\Membre', 'm')
        ->where($qb->expr()->notIn('m.id', $qb2->getDQL())
    );
    $query  = $qb->getQuery();
    //$query->useResultCache(true, 1200, __FUNCTION__);

    return $query->getResult(); 
```

我收到以下错误：

> 语义错误] 第 0 行，第 123 列“m WHERE ms.id”附近：错误：“m”已定义。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-12T20:44:08.017

同一个别名不能在同一个查询中定义 2 次

```
$qb  = $this->_em->createQueryBuilder();
$qb2 = $qb;
$qb2->select('m.id')
    ->from('Custom\Entity\MembreService', 'ms')
    ->leftJoin('ms.membre', 'm')
    ->where('ms.id != ?1');

$qb  = $this->_em->createQueryBuilder();
$qb->select('mm')
    ->from('Custom\Entity\Membre', 'mm')
    ->where($qb->expr()->notIn('mm.id', $qb2->getDQL())
);
$qb->setParameter(1, $service);
$query  = $qb->getQuery();

return $query->getResult(); 
```

理想情况下，您应该为您的实体使用多对多关系，在这种情况下，您的查询会简单得多。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-07-17T12:39:21.397

实际上，如果您使用 Symfony2 存储库类，您还可以执行以下操作：

```
$in = $this->getEntityManager()->getRepository('Custom:MembreService')
    ->createQueryBuilder('ms')
    ->select('identity(ms.m)')
    ->where(ms.id != ?1);

$q = $this->createQueryBuilder('m')
    ->where($q->expr()->notIn('m.id', $in->getDQL()))
    ->setParameter(1, $service);

return $q->getQuery()->execute(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-29T10:02:38.837

您可以使用`(NOT) MEMBER OF`：

```
<?php
$query = $em->createQuery('SELECT m.id FROM Custom\Entity\Membre WHERE :service NOT MEMBER OF m.services');
$query->setParameter('service', $service);
$ids = $query->getResult(); 
```

有关更多示例，请参阅[文档](http://docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#dql-select-examples)。

# html - 列出 HTML/CSS 设计方法

> ID：11924165
> 
> 赞同：0
> 
> 时间：2012-08-12T17:16:59.570
> 
> 标签：html, css

我想使用 html 和 css 实现以下目标。设计列表的最佳方法是什么。

![](../Images/d490dcd23c1e777b6eb991df3ecf0916.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:21:56.587

见[http://jsfiddle.net/X9Nch/1/](http://jsfiddle.net/X9Nch/1/)

HTML：

```
<ol id="list">
 <li><ul><li>Text 1</li><li>Sub 1</li></ul></li>
 <li><ul><li>Text 2</li><li>Sub 2</li></ul></li>
 <li><ul><li>Text 3</li><li>Sub 3</li></ul></li>
 <li><ul><li>Text 4</li><li>Sub 4</li></ul></li>
 <li><ul><li>Text 5</li><li>Sub 5</li></ul></li>
</ol> 
```

CSS：

```
#list{
    background:black;
    color:white;
}
#list>li{
    list-style:decimal inside none;
    font-weight:bold;
    line-height:75px;
    height:75px;
    padding-left:20px;
    font-size:300%;
}
#list>li:nth-child(even){
    padding-left:50px;
}
#list>li>ul{
    font-weight:normal;
    vertical-align:middle;
    display:inline-block;
    font-size:medium;
    list-style:none;
    margin:0;
    padding:0;
}

#list>li>ul>li{
    display:block;
    line-height:normal;
    color:#aaa;
    margin-left:5px;
    padding:0;
}

#list>li>ul>li:first-child{
    font-size:200%;
    color:white;
    margin-left:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:53:49.157

这是一种方法（[在 jsFiddle 中查看它：http://jsfiddle.net/Nw99Z/44/](http://jsfiddle.net/Nw99Z/44/)）：

## HTML

```
<div id="box1">
    <span class="num">1</span>
    <h1>We Rule</h1>
    You don't know how much
</div>
<div id="box2">
    <span class="num">2</span>
    <h1>We Super Rule</h1>
    You don't know how much
</div>
<div id="box3">
    <span class="num">3</span>
    <h1>We Are Insanely Awesome</h1>
    You don't even undestand
</div>
<div id="box4">
    <span class="num">4</span>
    <h1>Yes, It's True</h1>
    Yep, it's true
</div>
<div id="box5">
    <span class="num">5</span>
    <h1>I'm Still Talking</h1>
    Yep, I am
</div>

​ 
```

## CSS

```
body {
    background-color: #0e1013;
    font-family: Helvetica, Arial, sans-serif;
}
div {
    background-color: #414141;
    color: #ababab;
    padding: 16px 0 16px 100px;
    margin: 16px 0 16px 32px;
}
div span.num {
    color: #fff;
    font-size: 56px;
    font-weight: bold;
    display: block;
    margin-left: -116px;
    position: absolute;
}
div h1 {
    font-size: 38px;
    color: #fff;
}

div#box1 { width: 370px }
div#box2 { margin-left: 100px; width: 440px }
div#box3 { width: 700px }
div#box4 { margin-left: 160px; width: 460px }
div#box5 { width: 430px } 
```

​</p>

## 结果

![结果截图](../Images/143d888b562a3a4110d4f48344f52fb0.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T17:29:30.717

你应该去嵌套列表：

```
<ul class="list">
    <li>1
        <ul>
            <li>2</li>
        </ul>
    </li>
    <li>2</li>
</ul> 
```

然后你会使用类似这样的 CSS：

```
/* styles the whole list */
ul.list { }
/* styles 1st level items */
ul.list > li {}

/* styles 2nd level list */
ul.list ul { }

/* styles 2nd level items */
ul.list ul > li { } 
```

您可以将 a 添加`margin-left`到二级列表，也可以为所有列表指定默认边距：

```
ul { margin-left:10px } 
```

然后所有嵌套列表将继承父级的边距，加上它自己的边距，这也将创建您指定的布局。

PS：不要忘记添加其余的 CSS（背景、颜色等）..

编辑：一个例子：http: [//jsfiddle.net/JTtHY/](http://jsfiddle.net/JTtHY/)

# javascript - 本地 JSON 数据到 URL 上的 getJSON

> ID：11924177
> 
> 赞同：1
> 
> 时间：2012-08-12T17:18:16.413
> 
> 标签：javascript, jquery, json, jquery-mobile

我正在使用这个脚本来读取一些内部 json 数据。

数据当前在实际页面中。

我需要更改代码以使用 getJSON？以便它从外部页面/ url 读取 json

这是当前的完整代码：

```
<script>

var data = [{"id": "1","title": "mytitle"}];

  var output = '';

 $.each(data, function(index, value){
        output += '<li data-icon="false"><a href="#">' + value.title + '</a></li>';
    });

    $('#listview').append(output).listview('refresh');

</script> 
```

如何更改代码以便我可以使用外部 json 代码而不是这种方式，例如向其中添加 getJSON？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T17:20:47.113

```
$.getJSON('url_to_script', function(data) {
  var output = '';
  $.each(data, function(index, value){
    output += '<li data-icon="false"><a href="#">' + value.title + '</a></li>';
  });
  $('#listview').append(output).listview('refresh');
}); 
```

但是，如果您尝试从不同的域获取数据，那么您需要以下内容：

```
$.getJSON("url_to_script?jsoncallback=?",, function(data) {
  var output = '';
  $.each(data, function(index, value){
    output += '<li data-icon="false"><a href="#">' + value.title + '</a></li>';
  });
  $('#listview').append(output).listview('refresh');
}); 
```

阅读更多关于**[.getJSON()](http://api.jquery.com/jQuery.getJSON/)**的信息。

# cakephp - CakePHP - 放置服务逻辑的位置

> ID：11924181
> 
> 赞同：14
> 
> 时间：2012-08-12T17:18:34.697
> 
> 标签：cakephp, architecture

我是一名试图研究 CakePHP 的 Java 程序员——目前我在应用程序结构/设计方面遇到问题。我不明白将应用程序的核心逻辑放在哪里。

当我在 JavaEE 中开发时，常见的方法如下所示：

*   模型类是表示数据实体（产品、人员等）的简单 bean——主要类似于带有 getter/setter 的数据结构；

*   控制器类是足够简单的类，它们聚合必要的数据并将它们注入专用的视图模板，然后发送给用户；

*   DAO（DataAccessObject）或存储库类是可以将实体加载和存储到数据库中的类；

*   服务类通常是包含某些业务逻辑方法的单例——这些方法由控制器、其他服务或计划操作调用，另一方面，它们本身调用 DAO / Repository 方法来获取或修改数据。

例如，如果我有实体`Person`，`Product`并且`Order`，当用户选择某些产品并单击“将其放入我的购物车/购物篮”`new Order`时，`Person`应该创建它并将`Product`其添加到此`Order`（我们可能会检查这`Person`不是坏债人并且`Product`存在在商店等） - 所有这些工作都是在`OrderService`某些控制器调用的方法中执行的。

通常使用某种 IOC（控制反转），以便所有服务和控制器都链接到必要的服务等。

现在我对这一切是如何在 CakePHP 中完成的有些困惑。我应该把这个业务逻辑等放在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T03:24:58.943

在 CakePHP 中，模型层由[活动记录](http://martinfowler.com/eaaCatalog/activeRecord.html)实例的集合组成，称为[`AppModel`](http://book.cakephp.org/2.0/en/models.html). 它们将与存储相关的逻辑*（通常放在 DAO 和/或存储库中）*与业务逻辑*（通常放在“模型”中）*结合起来。

任何其他与域相关的逻辑（来自您的服务）都成为控制器的一部分。

如果您想知道，您**应该**如何在 CakePHP 中实现领域业务逻辑，只需查找赞美*活动记录*模式的文章即可。

> [**个人意见**
> CakePHP 和 CodeIgniter 是 PHP 中最差的两个框架。
> 他们充满了不良做法。]

实际上，如果您正在做正确的 MVC，那么*模型层*将包含所有业务逻辑以及与之相关的所有内容。模型层由 DAO、存储库、[域对象](http://c2.com/cgi/wiki?DomainObject)（您称之为“模型”）和服务组成。

虽然您对基于 Java 的代码的描述表明您正在朝着那个方向前进，但 CakePHP 甚至还没有接近它。

话又说回来，可能是[我对](https://stackoverflow.com/a/5864000/727208)MVC 的理解是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T17:24:51.867

控制器应该只包含与作为 Web 应用程序的整个事物相关的逻辑。您的业​​务逻辑属于模型。我认为这是您在许多 cakePHP 应用程序中发现的基本错误之一，将太多逻辑放入控制器中，而控制器实际上属于模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-02T03:34:54.863

在 CakePHP 中。“M”只是一堆数据模型而不是领域模型。在我看来。CakePHP 是为 RAD 开发而设计的。它不适合企业应用程序。

不过我的意见。

# blackberry - Blackberry 5.0 - 点击了 BrowserField 句柄链接

> ID：11924182
> 
> 赞同：4
> 
> 时间：2012-08-12T17:18:35.787
> 
> 标签：blackberry, onclick, browserfield

我正在尝试在`BrowserField`用户实际单击链接时处理事件。我研究过`BrowserFieldListener`，尝试过它的`documentCreated()`方法，但是当页面开始加载时，它会给我一个响应。我想要在用户单击 browserField 中的链接时触发。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T01:50:03.807

覆盖ProtocolController 的[handleNavigationRequest()](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/browser/field2/ProtocolController.html#handleNavigationRequest%28net.rim.device.api.browser.field2.BrowserFieldRequest%29)，例如

```
ProtocolController controller = new ProtocolController(browserField) {
    public void handleNavigationRequest(BrowserFieldRequest request) throws Exception {
         /* 
         Here you get the redirection link using 
           request.getURL() 
         and do what you want to do 
          */
      // to display url in browserfield use
      InputConnection inputConnection = handleResourceRequest(request);
      browserField.displayContent(inputConnection, request.getURL()); 

    }
};

browserField.getConfig().setProperty(BrowserFieldConfig.CONTROLLER, controller); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T11:43:00.560

使用我使用的以下类

```
public class CacheProtocolController extends ProtocolController{
    public CacheProtocolController() {
        super(browserField);     
    }

    /**
    * Handle navigation requests (e.g., link clicks)
    */
    public void handleNavigationRequest(final BrowserFieldRequest request) throws Exception {
        UiApplication.getUiApplication().invokeAndWait(new Runnable() {
            public void run() {
                // TODO Auto-generated method stub
                Logger.debug("*******URL*******",request.getURL() );
        });
    }

    /**
    * Handle resource request (e.g., images, external css/javascript resources)
    */
    public InputConnection handleResourceRequest(BrowserFieldRequest request) throws Exception {
        return super.handleResourceRequest(request);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:40:37.273

我已经使用以下类解决了这个问题：

```
public class CacheProtocolController extends ProtocolController{
    private SparseList sparseList = null;
    private int imageIndex ;
    private int click = 0;
    private BrowserField browserField = null;

    public CacheProtocolController(BrowserField browserField,SparseList sparseList,int imageIndex ) {
        super(browserField);
        this.sparseList = sparseList;
        this.imageIndex = imageIndex;
    }

    /**
    * Handle navigation requests (e.g., link clicks)
    */
    public void handleNavigationRequest(final BrowserFieldRequest request) throws Exception {
        UiApplication.getUiApplication().invokeAndWait(new Runnable() {
            public void run() {
                Logger.debug("*******URL*******",request.getURL() );
                String requestUrl = null;
                requestUrl = FileManipulations.replaceAll(request.getURL(), "file:///SDCard/BlackBerry/pictures/", "../");
                Logger.debug("*******requestUrl*******",requestUrl );
                Enumeration enumeration = sparseList.elements();
                while (enumeration.hasMoreElements()) {
                    final News news = (News) enumeration.nextElement();
                    if(news.getDetailsURL().equalsIgnoreCase(requestUrl)){
                        if(click == 1){
                            click = 0;
                            UiApplication.getUiApplication().pushScreen(new DetailedNewsScreen(news.getImageURL() , imageIndex));
                        } else
                            click++;
                    }
                }
            }
        });
    }

    /**
    * Handle resource request (e.g., images, external css/javascript resources)
    */
    public InputConnection handleResourceRequest(BrowserFieldRequest request) throws Exception {
        return super.handleResourceRequest(request);
    }

} 
```

并在`MainScren`使用以下

```
browserField = new BrowserField();
browserField.getConfig().setProperty(BrowserFieldConfig.CONTROLLER, new CacheProtocolController(browserField,List,index)); 
```

# java - Java Runtime exec：从 Firefox 获取信息

> ID：11924184
> 
> 赞同：0
> 
> 时间：2012-08-12T17:18:54.900
> 
> 标签：java, firefox, exec, runtime.exec

使用 Java，我可以使用以下代码设置的 URL 很好地打开 Firefox：

```
Runtime.getRuntime().exec("C:\\Program Files\\Mozilla Firefox\\firefox.exe" + " " + "http://www.website.com"); 
```

但如果可能的话，我怎样才能返回以下数据？

1.  如果 Firefox 加载成功？（作为布尔值）
2.  如果 URL 加载成功？（作为 bool，或者如果使用超过 1 个 URL 作为 bool 数组）
3.  加载时间（作为值/字符串，或者如果使用超过 1 个 URL 作为值/字符串数组。
4.  Firefox Web 控制台的内容（作为字符串，或者如果使用超过 1 个 URL 作为字符串数组）

有没有办法做到这一点并从 Firefox 或 .exec 正在启动的其他程序中取回此类数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T17:37:13.537

您根本不会从 Java Runtime.exec() 中获得太多收益，恕我直言...

这是一个替代方案，可以让您从 Perl（而不是 Java）做一些/大部分您正在尝试做的事情：

*   [以编程方式查找前 1000 个网站的页面加载时间](https://stackoverflow.com/questions/6569320/programatically-find-page-load-times-for-top-1000-websites)

这只是一个例子。还有很多很多其他的选择。如果您想走 Java 路线，请搜索“screen scrapers”或“automation”。例如：

*   [http://www.manageability.org/blog/stuff/screen-scraping-tools-written-in-java/view](http://www.manageability.org/blog/stuff/screen-scraping-tools-written-in-java/view)

*   [http://code.google.com/p/selenium/](http://code.google.com/p/selenium/)

'希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:00:54.350

我建议看一下 Selenium... 基本上，您（当然）需要一个用于 firefox 进程的监视器，并且由于 Firefox 不提供 COM，您需要某种“内部”firefox，即插件。这就是硒的作用。然后，这样的插件可以向您发送任何内部信息，例如通过简单的 tcp 连接。

# sonarqube - Sonar Runner 未启动

> ID：11924192
> 
> 赞同：5
> 
> 时间：2012-08-12T17:19:47.813
> 
> 标签：sonarqube

我正在尝试使用 java 1.7.0_05 在我的 Windows 7 64 位操作系统中配置 Sonar 3.2。

当我启动 Sonar runner - 1.4 时，我得到了这个异常

```
Exception in thread "main" org.sonar.batch.bootstrapper.BootstrapException: org.sonar.batch.bootstrapper.BootstrapException: Fail to download the file: http://localhost:9000/batch/hibernate-entitymanager-3.4.0.GA.jar
        at org.sonar.batch.bootstrapper.Bootstrapper.downloadBatchFiles(Bootstrapper.java:164)
        at org.sonar.batch.bootstrapper.Bootstrapper.createClassLoader(Bootstrapper.java:87)
        at org.sonar.runner.Runner.createClassLoader(Runner.java:176)
        at org.sonar.runner.Runner.execute(Runner.java:84)
        at org.sonar.runner.Main.main(Main.java:67)
Caused by: org.sonar.batch.bootstrapper.BootstrapException: Fail to download the file: http://localhost:9000/batch/hibernate-entitymanager-3.4.0.GA.jar
        at org.sonar.batch.bootstrapper.Bootstrapper.remoteContentToFile(Bootstrapper.java:113)
        at org.sonar.batch.bootstrapper.Bootstrapper.downloadBatchFiles(Bootstrapper.java:159)
        ... 4 more
Caused by: java.net.SocketTimeoutException: Read timed out
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:150)
        at java.net.SocketInputStream.read(SocketInputStream.java:121)
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
        at java.io.BufferedInputStream.read1(BufferedInputStream.java:275)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:334)
        at sun.net.www.http.ChunkedInputStream.fastRead(ChunkedInputStream.java:239)
        at sun.net.www.http.ChunkedInputStream.read(ChunkedInputStream.java:680)
        at java.io.FilterInputStream.read(FilterInputStream.java:133)
        at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:3035)
        at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:3029)
        at org.sonar.batch.bootstrapper.BootstrapperIOUtils.copyLarge(BootstrapperIOUtils.java:63)
        at org.sonar.batch.bootstrapper.Bootstrapper.remoteContentToFile(Bootstrapper.java:109) 
```

感谢任何解决此问题的解决方案。

我可以从`http://localhost:9000/batch/hibernate-entitymanager-3.4.0.GA.jar`浏览器中下载 hibernate-entitymanager-3.4.0.GA.jar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:33:46.607

我在您的配置详细信息中看到您正在使用 Java 7 VM 运行 Sonar：您可以尝试使用 Java 6 吗？

这可能不是根本原因，但我知道我们有用户报告了 Java 7 的一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:02:04.307

这是我在没有管理权限的情况下执行运行程序时遇到的错误。

如果您从 DOS 提示符启动运行程序，请尝试右键单击“Windows 命令处理器”并选择“以管理员身份运行”。

# jsf - 如何使用 JSF 创建一个简单的重定向？

> ID：11924194
> 
> 赞同：1
> 
> 时间：2012-08-12T17:19:50.983
> 
> 标签：jsf

如何使用 jsf 创建一个简单的重定向？

我试过了：

```
 <h:form>
        <h:commandButton action="www.google.de" value="go to google" />
    </h:form> 
```

但是当我单击按钮时，我只是停留在索引页面上。什么都没发生！这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T17:35:53.057

JSF 在这里绝对必要吗？您似乎根本不需要向您提交任何东西。只需使用纯 HTML。

```
<form action="http://www.google.de">
    <input type="submit" value="Go to Google" />
</form> 
```

请注意，外部站点的 URL 必须包含方案（`http://`部分），否则只会相对于当前请求 URI 提交，例如`http://example.com/context/www.google.de`.

如果你真的需要提交到你身边，例如预处理和/或记录一些东西，那么你可以`ExternalContext#redirect()`在 action 方法中使用。

```
<h:form>
    <h:commandButton value="Go to Google" action="#{bean.submit}" />
</h:form> 
```

和

```
public void submit() throws IOException {
    // ...

    FacesContext.getCurrentInstance().getExternalContext().redirect("http://www.google.de");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:29:24.337

您可以使用：

```
<h:commandButton value="Go to Google" type="button" onclick="window.location.href = 'http://www.google.de';" /> 
```

不需要表格。

# go - 在不同类型的切片之间转换

> ID：11924196
> 
> 赞同：57
> 
> 时间：2012-08-12T17:20:18.800
> 
> 标签：go, go-reflect

我从 UDP 套接字获得一个字节切片 ( `[]byte`)，并希望将其视为整数切片 ( `[]int32`)，而不更改底层数组，反之亦然。在 C(++) 中，我只会在指针类型之间进行转换；我将如何在 Go 中做到这一点？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-13T01:55:34.130

正如其他人所说，转换指针在 Go 中被认为是不好的形式。以下是正确的 Go 方式和 C 数组强制转换的等效示例。

警告：所有代码未经测试。

# 正确的方式

在此示例中，我们使用`encoding/binary`包将每组 4 个字节转换为`int32`. 这更好，因为我们指定了字节序。我们也没有使用`unsafe`包来破坏类型系统。

```
import "encoding/binary"

const SIZEOF_INT32 = 4 // bytes

data := make([]int32, len(raw)/SIZEOF_INT32)
for i := range data {
    // assuming little endian
    data[i] = int32(binary.LittleEndian.Uint32(raw[i*SIZEOF_INT32:(i+1)*SIZEOF_INT32]))
} 
```

# 错误的方式（C 数组转换）

在这个例子中，我们告诉 Go 忽略类型系统。这不是一个好主意，因为它可能在 Go 的另一个实现中失败。它假设语言规范中没有的东西。但是，这个并没有做一个完整的副本。此代码使用 unsafe 访问所有切片中通用的“SliceHeader”。标头包含指向数据（C 数组）、长度和容量的指针。我们首先需要更改长度和容量，而不是将标头转换为新的切片类型，因为如果我们将字节视为新类型，则元素会更少。

```
import (
    "reflect"
    "unsafe"
)

const SIZEOF_INT32 = 4 // bytes

// Get the slice header
header := *(*reflect.SliceHeader)(unsafe.Pointer(&raw))

// The length and capacity of the slice are different.
header.Len /= SIZEOF_INT32
header.Cap /= SIZEOF_INT32

// Convert slice header to an []int32
data := *(*[]int32)(unsafe.Pointer(&header)) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-13T00:10:17.000

你做你在 C 中所做的事情，除了一个例外 - Go 不允许从一种指针类型转换为另一种。好吧，确实如此，但是您必须使用 unsafe.Pointer 告诉编译器您知道所有规则都被破坏并且您知道自己在做什么。这是一个例子：

```
package main

import (
    "fmt"
    "unsafe"
)

func main() {
    b := []byte{1, 0, 0, 0, 2, 0, 0, 0}

    // step by step
    pb := &b[0]         // to pointer to the first byte of b
    up := unsafe.Pointer(pb)    // to *special* unsafe.Pointer, it can be converted to any pointer
    pi := (*[2]uint32)(up)      // to pointer to the first uint32 of array of 2 uint32s
    i := (*pi)[:]           // creates slice to our array of 2 uint32s (optional step)
    fmt.Printf("b=%v i=%v\n", b, i)

    // all in one go
    p := (*[2]uint32)(unsafe.Pointer(&b[0]))
    fmt.Printf("b=%v p=%v\n", b, p)
} 
```

显然，你应该小心使用“不安全”的包，因为 Go 编译器不再牵着你的手——例如，你可以`pi := (*[3]uint32)(up)`在这里写，编译器不会抱怨，但你会遇到麻烦。

此外，正如其他人已经指出的那样，uint32 的字节在不同的计算机上的布局可能不同，所以你不应该假设这些是你需要的布局。

所以最安全的方法是一个接一个地读取你的字节数组，并从中得到你需要的任何东西。

亚历克斯

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-12T19:33:35.110

简短的回答是你不能。Go 不会让你将一种类型的切片转换为另一种类型的切片。在转换数组中的每个项目时，您将遍历数组并创建另一个所需类型的数组。这通常被认为是一件好事，因为类型安全是 go 的一个重要特性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-29T18:32:07.257

我遇到了大小未知的问题，并使用以下代码调整了以前的不安全方法。给定一个字节片 b ...

```
int32 slice is (*(*[]int)(Pointer(&b)))[:len(b)/4] 
```

数组到切片的例子可以被赋予一个虚构的大常数，并且切片边界以相同的方式使用，因为没有分配数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-06T16:50:50.940

也许在给出较早的答案时它不可用，但似乎该`binary.Read`方法比上面给出的“正确方法”更好。

此方法允许您将二进制数据从读取器直接读取到所需类型的值或缓冲区中。您可以通过在字节数组缓冲区上创建读取器来做到这一点。或者，如果您可以控制为您提供字节数组的代码，则可以将其替换为直接读入缓冲区，而无需临时字节数组。

有关文档和一个不错的小示例，请参阅[https://golang.org/pkg/encoding/binary/#Read](https://golang.org/pkg/encoding/binary/#Read)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-11T17:57:51.293

您可以使用“不安全”包来做到这一点

```
package main

import (
    "fmt"
    "unsafe"
)

func main() {
    var b [8]byte = [8]byte{1, 2, 3, 4, 5, 6, 7, 8}
    var s *[4]uint16 = (*[4]uint16)(unsafe.Pointer(&b))
    var i *[2]uint32 = (*[2]uint32)(unsafe.Pointer(&b))
    var l *uint64 = (*uint64)(unsafe.Pointer(&b))

    fmt.Println(b)
    fmt.Printf("%04x, %04x, %04x, %04x\n", s[0], s[1], s[2], s[3])
    fmt.Printf("%08x, %08x\n", i[0], i[1])
    fmt.Printf("%016x\n", *l)
}

/*
 * example run:
 * $ go run /tmp/test.go
 * [1 2 3 4 5 6 7 8]
 * 0201, 0403, 0605, 0807
 * 04030201, 08070605
 * 0807060504030201
 */ 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-08-25T21:17:40.143

从 Go 1.17 开始，使用`unsafe`包有一种更简单的方法来执行此操作。

```
import (
    "unsafe"
)

const SIZEOF_INT32 = unsafe.Sizeof(int32(0)) // 4 bytes

func main() {
    var bs []byte

    // Do stuff with `bs`. Maybe do some checks ensuring that len(bs) % SIZEOF_INT32 == 0

    data := unsafe.Slice((*int32)(unsafe.Pointer(&bs[0])), len(bs)/SIZEOF_INT32)

    // A more verbose alternative requiring `import "reflect"`
    // data := unsafe.Slice((*int32)(unsafe.Pointer((*reflect.SliceHeader)(unsafe.Pointer(&bs)).Data)), len(bs)/SIZEOF_INT32)
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-22T11:29:35.203

# 转到 1.17 及更高版本

Go 1.17[引入](https://golang.org/doc/go1.17#language)了这个[`unsafe.Slice`](https://pkg.go.dev/unsafe#Slice)函数，它正是这样做的。

将 a 转换`[]byte`为 a `[]int32`：

```
package main

import (
    "fmt"
    "unsafe"
)

func main() {
    theBytes := []byte{
        0x33, 0x44, 0x55, 0x66,
        0x11, 0x22, 0x33, 0x44,
        0x77, 0x66, 0x55, 0x44,
    }

    numInts := uintptr(len(theBytes)) * unsafe.Sizeof(theBytes[0]) / unsafe.Sizeof(int32(0))
    theInts := unsafe.Slice((*int32)(unsafe.Pointer(&theBytes[0])), numInts)

    for _, n := range theInts {
        fmt.Printf("%04x\n", n)
    }
} 
```

[游乐场](https://play.golang.org/p/WW5ydYHqlHb)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-19T10:30:15.427

[http://play.golang.org/p/w1m5Cs-ecz](http://play.golang.org/p/w1m5Cs-ecz)

```
package main

import (
    "fmt"
    "strings"
)

func main() {
    s := []interface{}{"foo", "bar", "baz"}
    b := make([]string, len(s))
    for i, v := range s {
        b[i] = v.(string)
    }
    fmt.Println(strings.Join(b, ", "))
} 
```

# android - 如何将原生 c 例程的标准 IO 与 Android 的 IO 例程（例如 edittext）链接？

> ID：11924198
> 
> 赞同：-1
> 
> 时间：2012-08-12T17:20:26.787
> 
> 标签：android, android-ndk, stdout, stdin

我正在尝试为 android 构建一个应用程序，它通过 ndk 使用 c 代码。c 代码从标准输入读取文本，对其进行操作，然后将其放入标准输出。这就像控制台程序的通常行为一样。

现在我希望用户通过edittext在android中输入文本。然后这个文本应该在 ndk 的帮助下传递给 c 例程的标准输入。

在 c 例程操作文本之后，文本应该从 stdout 到 androids edittext 的相反方向。

我希望有一种相对简单的方法可以以这种方式执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:21:04.297

AFAIK，这是不可能的。

您可以创建一个接受字符串作为参数并返回字符串的 C 函数，使用参数和返回值在 Java 和 C 之间来回传递字符串。或者，完全摆脱 C 并在 Java 中实现所有逻辑.

# vala - 为什么 webkit-1.0 和 gtk+-3.0 在 .vapi 文件中有 900 多个相同的符号

> ID：11924206
> 
> 赞同：0
> 
> 时间：2012-08-12T17:21:07.690
> 
> 标签：vala, vapi

正如标题所说，我的问题是我尝试同时使用 gtk 3 和 webkit 1。

我正在关注这个例子[https://live.gnome.org/Vala/WebKitSample](https://live.gnome.org/Vala/WebKitSample)

除了我使用的是 gtk 3 而不是 2。

我正在使用 valac 0.16.0

我现在注意到错误是 Gdk 2 和 Gdk 3 相同的符号。

这似乎是解决我的问题[链接](https://mail.gnome.org/archives/vala-list/2011-July/msg00006.html)的一种方法， 但它是非标准的。

没关系，我已经用捆绑的 webkitgtk 修复了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:51:12.477

您不能将库 webkit-1.0 与 gtk+-3.0 一起使用，因为 webkit-1.0 依赖于与 gtk+-3.0 和 gdk-3.0 冲突的 gtk+-2.0 和 gdk-2.0。您必须使用与 webkit-1.0 具有相同 API 的库 webkitgtk-3.0，但依赖于 gtk+-3.0 和 gdk-3.0。

由于 webkigtk-3.0 绑定没有随 Vala 提供（[错误 676249](https://bugzilla.gnome.org/show_bug.cgi?id=676249)），您必须创建自己的绑定（按照[上述电子邮件](https://mail.gnome.org/archives/vala-list/2011-July/msg00006.html)中的说明）并告诉 valac 您的 webkigtk-3.0.vapi 文件所在的位置（`--vapidir=.`）。

```
$ ls
webkitgtk-3.0.deps  webkitgtk-3.0.vapi  webkit-sample.vala
$ valac --vapidir=. --pkg gtk+-3.0 --pkg webkitgtk-3.0 --thread webkit-sample.vala
/tmp/fenryxo/webkit-sample.vala.c: In function ‘vala_browser_create_widgets’:
/tmp/fenryxo/webkit-sample.vala.c:206:2: warning: ‘gtk_vbox_new’ is deprecated (declared at /usr/include/gtk-3.0/gtk/deprecated/gtkvbox.h:60): Use 'gtk_box_new' instead [-Wdeprecated-declarations]
$ ls
webkitgtk-3.0.deps  webkitgtk-3.0.vapi  webkit-sample  webkit-sample.vala 
```

# jquery - 使用jquery如何在重复器控件中单击按钮时在表格单元格中获取文本框值

> ID：11924213
> 
> 赞同：0
> 
> 时间：2012-08-12T17:22:05.773
> 
> 标签：jquery, textbox, repeater, cell

我有一个中继器控件，在每个单元格中都有一些文本、出价按钮和一个用于出价金额的文本框。当用户单击同一单元格中的按钮时，我试图获取文本框值（出价金额），以便我可以验证出价金额。任何帮助将不胜感激。

这是我的html表格代码：

```
<table id="values" class="values" border="3">
<tr>
<td  align="center"  style="white-space:nowrap">
<span class="MainBgContent_UpperRight_Title" style="height:25px;max-height:25px">Your Bid: $
<asp:TextBox ID="tbBid" CssClass="bids" Style="width: 30px" runat="server" Text=''></asp:TextBox>

</span>                                                
<div style="height:10px;clear:both;"></div>

<div class="offer" style="width:100px;height:30px;line-height:20px;">                                                    
<asp:Button style="width:100px;height:30px;line-height:20px;"  Visible="true"  CssClass="btnSubmitBid"  ID="lbBid" Text="BID" runat="Server" CommandName="makeBid"    ></asp:Button>                                                    
</div>
<div style="height:20px;clear:both;"></div>
</td>
</tr>
</table> 
```

我可以通过类名 btnSubmitBid 获取按钮的 ID，但只需要获取该特定单元格的文本框值。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:34:02.650

在点击按钮的javascript函数中，可以遍历DOM树找到输入。由于按钮位于单元格中的div中，因此您需要获取按钮的[父级](http://api.jquery.com/parent/)（div）的父级（单元格）。然后找到第一个[孩子](http://api.jquery.com/children/)（跨度），以及那个跨度的孩子：

```
var bid = $(this).parent().parent().children()[0].children()[0]; 
```

或者您可以使用单元格上的[查找](http://api.jquery.com/find/)功能来查找输入：

```
var bid = $(this).parent().parent().find("input"); 
```

或者，使用[最接近](http://api.jquery.com/closest/)的函数，尽管我不确定是否存在很大的性能差异，并且您已经知道结构以知道您需要查找多远才能找到单元格：

```
var bid = $(this).closest('td').find("input"); 
```

这个答案假设表中只有 on 输入。如果有多个，您应该寻找类`.bids`而不是元素类型`input`。

# cocoa-touch - 允许用户在不启动应用程序的情况下确认 UILocalNotification

> ID：11924214
> 
> 赞同：0
> 
> 时间：2012-08-12T17:22:09.877
> 
> 标签：cocoa-touch, uilocalnotification

有什么办法，当 a`UILocalnotification`显示为警报时，只显示一个操作按钮，而不是“关闭”和“启动”？

假设没有办法，我可以将第二个操作按钮更改为“继续”。我希望能够在我的应用程序中注册他们确实按“继续”但我不希望该应用程序实际启动。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:10:00.883

不幸的是，在当前的 SDK 中这是不可能的。推送通知警报只能有两个动作——要么被取消并且你的应用程序没有收到通知，要么你的应用程序被带到前台来处理通知。

# compilation - 构建 Omnet++ 时出错：无法在 Mountain lion 上构建 Tcl/Tk 应用程序

> ID：11924217
> 
> 赞同：6
> 
> 时间：2012-08-12T17:22:42.637
> 
> 标签：compilation, osx-lion, omnet++

我正在尝试在 Mountain Lion 上编译 Omnet++ 4.1。当我输入：

```
./configure 
```

我收到以下错误：

> 配置：错误：无法构建 Tcl/Tk 应用程序，可能是由于配置错误或缺少 X11 标头或库。检查 config.log 了解更多信息！

我记得在 Lion 上编译它没有任何问题，任何想法如何让它在 Mountain Lion 上工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T21:57:46.980

[在omnetpp google group](https://groups.google.com/forum/?fromgroups#!topic/omnetpp/QYFKVhEe_GE%5B1-25%5D)上找到了解决方案，我将其粘贴在这里：

> 大家好，
> 
> 刚刚试用了昨天发布的Mountain Lion。不幸的是，新的 MacOSX 默认不包含 X11。我真的很讨厌这个决定。结果，当我们执行 ./configure 时，它​​没有通过 Tcl/Tk 检查。
> 
> 经过几个小时的努力，我终于想出了如何解决这个问题：
> 
> 1.  [在http://xquartz.macosforge.org/landing/](http://xquartz.macosforge.org/landing/)下载并安装 XQuartz
> 2.  在 /usr/include 处创建符号链接： sudo ln -s /opt/X11/include/X11 /usr/include
> 
> 你们都准备好了。在2中，您也可以相应地设置一些环境变量，而不是制作符号链接。
> 
> 未来的 OMNet++ 版本可能会考虑设置关联的环境变量，以便编译器使用 Mountain Lion 在 /opt/X11/include/X11 中查找 Xlib.h。
> 
> 刚刚成功编译模拟器，暂时还没有遇到其他问题。
> 
> 玩得开心，TS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-04T18:24:02.627

如果您在 Linux (ubuntu) 上遇到同样的问题，可以在控制台中运行解决方案：

```
sudo apt-get install build-essential gcc g++ bison flex perl tcl-dev tk-dev blt libxml2-dev zlib1g-dev openjdk-6-jre doxygen graphviz openmpi-bin libopenmpi-dev libpcap-dev 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-14T13:25:19.587

安装 XQuartz 仍然是解决这个问题的方法。

# artificial-intelligence - 人工神经网络和马尔可夫过程

> ID：11924229
> 
> 赞同：2
> 
> 时间：2012-08-12T17:24:22.747
> 
> 标签：artificial-intelligence, neural-network, markov-models

我读了一些关于 ANN 和马尔可夫过程的信息。有人可以帮助我了解马尔可夫过程在哪里适合人工神经网络和遗传算法。或者简单地说，马尔可夫过程在这种情况下的作用是什么。

非常感谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-29T03:15:40.533

接受的答案是正确的，但我只想添加一些细节。

马尔可夫过程是随机经历一系列状态的任何系统，如果您知道当前状态，您可以预测每个可能的下一个状态的可能性。一个常见的例子是天气。如果现在是晴天，你可以预测以后很可能是晴天，*不管之前的天气如何*。

遗传算法是从为给定问题生成一堆任意随机解决方案开始的算法。然后它检查这些解决方案，看看它们有多好。“坏”解决方案被丢弃，“好”解决方案被保留并组合在一起以形成（希望）更好的解决方案，就像一个物种的成功成员培育新一代一样。理论上，重复此过程将提供越来越好的解决方案，直到您最终获得最佳解决方案。

如您所见，它们在算法上不相关。然而，遗传算法*通常*用于生成隐马尔可夫模型，例如[这里](http://bioinformatics.oxfordjournals.org/content/20/18/3613.full.pdf)。基本思想是用随机权重初始化 HMM，运行相关马尔可夫过程的“训练集”，并调整权重以使训练集的成员出现最高概率。这通常在语音识别软件中完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T15:21:29.080

马尔可夫过程和人工神经网络是完全不同的概念。

马尔可夫过程描述了遵循特定统计属性的任何事件。与“高斯”或“随机”这两个词根据其统计特性描述一组特定事件的方式相同。

人工神经网络是一种可以帮助您解决问题的算法，并且与马尔可夫过程并不真正相关。您可能会想到[隐马尔可夫模型](http://en.wikipedia.org/wiki/Hidden_Markov_model#Learning)，它也是一种算法。HMM 假设底层系统是具有隐藏状态的马尔可夫过程。

# facebook - Facebook 图形延迟

> ID：11924235
> 
> 赞同：0
> 
> 时间：2012-08-12T17:25:22.217
> 
> 标签：facebook, latency

下面的代码片段

```
for($i=0;$i<60;$i++){
    $u[$i]=$_REQUEST["u".$i];
    $pic[$i] =imagecreatefromjpeg("http://graph.facebook.com/".$u[$i]."/picture"); 
```

}

在我的新服务器上执行需要超过 90 秒。在我的共享托管服务器上花费了不到 15 秒的时间。但是，在专用服务器上，它需要超过 90 秒。

我的新服务器的数据中心是亚太地区。

请就如何减少在图表上获取图像的时间提出建议。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:40:49.563

为什么不在一次调用中请求所有图片的 URL？

`https://graph.facebook.com/?fields=picture&ids=[CSV LIST OF IDS]&access_token=ACCESS_TOKEN`

然后，您将获得所有图像的列表，并且可以随心所欲地获取所有图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:09:47.013

> 在我的新服务器上执行需要超过 90 秒。

好吧，我会说，对于 60 个 HTTP 请求*来说还算不错。*

> 在我的共享托管服务器上花费了不到 15 秒的时间。但是，在专用服务器上，它需要超过 90 秒。

也许您的旧服务器的连接速度更快......？

> 我的新服务器的数据中心是亚太地区。

你有没有机会知道它以前是哪一个？

> 请就如何减少在图表上获取图像的时间提出建议。

您是否必须一次性请求所有这些图像？

也许您的应用程序的工作流程（我们对此一无所知）将允许其他方法，例如在以前的时间获取用户图像（当用户开始使用您的应用程序时）并将它们缓存在本地，这样您就不会必须一次完成 60 多个 HTTP 请求。

# ios - UITableView 单元格分隔符索引不正确？

> ID：11924237
> 
> 赞同：0
> 
> 时间：2012-08-12T17:25:43.167
> 
> 标签：ios, uitableview

我正在尝试实现一个 UITableView，其中奇数索引是“分隔符”。问题是，当我的数据源中有一个对象并加载 tableView 时，我看到第一个单元格很好。但是，当我的数据源中有两个对象然后加载 tableView 时，即使应该有两个单元格，我也只能看到一个单元格。我试图将数据重新加载到单元格，如果这会改变任何东西，但它没有。

如果您需要查看代码，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:06:11.660

我怀疑你的问题出在`tableView:numberOfRowsInSection:`. 因为您要在表格的数据单元格之前插入“间隔”单元格，所以从该方法返回的行数也需要考虑间隔单元格，因此要返回的正确数字是数组中元素数量的两倍。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.cellArray count] * 2;
} 
```

# django - 如何在 Django 中创建保存 User 和 UserProfile 对象的视图

> ID：11924238
> 
> 赞同：5
> 
> 时间：2012-08-12T17:26:12.953
> 
> 标签：django, django-models, django-forms, django-views, django-users

我在 Django 中有两个模型：用户（由 Django 预定义）和 UserProfile。两者通过外键连接。

模型.py：

```
class UserProfile(models.Model):
  user = models.ForeignKey(User, unique=True, related_name="connect")
  location = models.CharField(max_length=20, blank=True, null=True) 
```

我为用户模型使用 UserCreationForm（由 Django 预定义），并在 forms.py 中为 UserProfile 创建了另一个表单

```
#UserCreationForm for User Model

class UserProfileForm(ModelForm):
  class Meta:
    model = UserProfile
    exclude = ("user", ) 
```

我在模板registration.html中加载这两个表单，因此网站客户可以输入有关两个模型中包含的字段的数据（例如：用户模型中的“first_name”，“last_name”，UserProfile模型中的“location”）。

对于我的生活，我无法弄清楚如何为此注册表单创建视图。到目前为止我所尝试的将创建 User 对象，但它不会关联其他信息，例如相应 UserProfile 对象中的位置。谁能帮我吗？这是我目前拥有的：

```
def register(request):
  if request.method == 'POST':
    form1 = UserCreationForm(request.POST)
    form2 = UserProfileForm(request.POST)
    if form1.is_valid():
      #create initial entry for User object
      username = form1.cleaned_data["username"]
      password = form1.cleaned_data["password"]
      new_user = User.objects.create_user(username, password)

      # What to do here to save "location" field in a UserProfile 
      # object that corresponds with the new_user User object that 
      # we just created in the previous lines

  else:
    form1 = UserCreationForm()
    form2 = UserProfileForm()
  c = {
    'form1':UserCreationForm,
    'form2':form2,
  }
  c.update(csrf(request))
  return render_to_response("registration/register.html", c) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T17:34:54.517

差不多好了 ：）

```
def register(request):
    if request.method == 'POST':
        form1 = UserCreationForm(request.POST)
        form2 = UserProfileForm(request.POST)
        if form1.is_valid() and form2.is_valid():
            user = form1.save()  # save user to db
            userprofile = form2.save(commit=False)  # create profile but don't save to db
            userprofile.user = user
            userprofile.location = get_the_location_somehow()
            userprofile.save()  # save profile to db

    else:
        form1 = UserCreationForm()
         form2 = UserProfileForm()
    c = {
      'form1':form1,
      'form2':form2,
    }
    c.update(csrf(request))
    return render_to_response("registration/register.html", c) 
```

为了澄清一点，`form.save()`创建模型的一个实例并将其保存到 db。`form.save(commit=False)`只是创建一个实例，但不会将任何内容保存到 db。

# ios - facebook ios sdk 日志：奇怪的消息

> ID：11924245
> 
> 赞同：5
> 
> 时间：2012-08-12T17:27:42.527
> 
> 标签：ios, facebook

我有一个共享图像的按钮，每次单击它时，我都会在日志中收到此消息，我不明白：

> 2012-08-12 19:21:30.511 AvisOcean[2239:707] 类 FBSessionManualTokenCachingStrategy 的实例 0xe6b8fe0 已被释放，而键值观察者仍向其注册。观察信息被泄露，甚至可能被错误地附加到其他对象上。在 NSKVODeallocateBreak 上设置断点以在调试器中停止。这是当前的观察信息：（上下文：0xa5e90，属性：0x245310> 上下文：0xa5e90，属性：0x28c400>）

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T15:32:01.287

Facebook SDK 正在泄露观察者。我正在使用 SDK v3.1。

如果您使用没有弃用标头（即 Facebook.h）的 SDK，这应该不是问题。但是要使用本机对话框，您需要包含已弃用的标头（来源：[https](https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/) ://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/ ），这会在关闭/清理时导致此错误活动会话。

这是修复它的拉取请求：[https ://github.com/facebook/facebook-ios-sdk/pull/474](https://github.com/facebook/facebook-ios-sdk/pull/474)

然后，您可以使用[Facebook SDK for iOS6/Xcode 4.5 重建 SDK 不起作用](https://stackoverflow.com/questions/12513222/facebook-sdk-for-ios6-xcode-4-5-not-working/12540137#12540137)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T18:17:42.263

我遇到了同样的问题。我认为发生的事情是我在其他地方初始化了 Facebook，当我尝试重新初始化它并再次从另一个实例调用对话框委托时，它给了我错误。

我保持实际应用程序初始化和访问令牌的实例与调用对话框的实例不同。当我在查看[文档](http://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)后更正该问题时，它就解决了。

```
if (nil == self.facebook) {
    self.facebook = [[Facebook alloc]
                     initWithAppId:FBSession.activeSession.appID
                     andDelegate:nil];

    // Store the Facebook session information
    self.facebook.accessToken = FBSession.activeSession.accessToken;      
    self.facebook.expirationDate = FBSession.activeSession.expirationDate;
}

[self.facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T16:44:44.547

在分配 accessToken 和 expireDate 之前快速注销，这将有助于清理您看到的一些令人讨厌的错误。我敢肯定，对于那些使用已弃用的 Facebook 标头的人来说，这只是一个临时解决方案。

```
// Initiate a Facebook instance
if(!_facebook)
    _facebook = [[Facebook alloc] initWithAppId:FBSession.activeSession.appID andDelegate:nil];

// Store the Facebook session information
[_facebook logout];
_facebook.accessToken = FBSession.activeSession.accessToken;
_facebook.expirationDate = FBSession.activeSession.expirationDate; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T16:36:18.677

当我的 Facebook 对象被解除分配时，我会看到此消息。我正在使用 3.0.8 SDK。在我的情况下，我认为 Facebook 对象应该在将其释放到其 dealloc 之前将其自身作为其 tokenCaching 的观察者移除。您的情况可能会有所不同，因为听起来您不会清除 FB 对象。也许[这里](https://stackoverflow.com/questions/5982620/objective-cobject-deallocated-while-key-value-observers-were-still-registered-w)的建议会有所帮助。

# facebook-like - Facebook Like 不出现，如果 Url 结尾有“/”“%2F”

> ID：11924246
> 
> 赞同：2
> 
> 时间：2012-08-12T17:27:43.040
> 
> 标签：facebook-like, facebook-likebox

我们的网站网址以斜杠“/”结尾，它被编码为“%2F”。由于这个斜线 facebook like 按钮没有显示在网站上。

例如

不工作的 url：因为在 href 参数中 url 有“%2F”，但是如果我删除了“%2f”，它就会开始工作。早些时候它工作正常。

[https://www.facebook.com/plugins/like.php?action=like&channel_url=https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D9%23cb%3Df3e1268db4% 26origin%3Dhttps%253A%252F%252Fwww.bcgperspectives.com%252Ff189b4c84c%26domain%3Dwww.bcgperspectives.com%26relation%3Dparent.parent&extended_social_context=false&font=arial&href=https%3A%2F%2Fwww.bcgperspectives.com%2Fcontent%2Fvideos% 2Fleadership_paul_deighton_organizing_london_2012_olympics](https://www.facebook.com/plugins/like.php?action=like&channel_url=https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D9%23cb%3Df3e1268db4%26origin%3Dhttps%253A%252F%252Fwww.bcgperspectives.com%252Ff189b4c84c%26domain%3Dwww.bcgperspectives.com%26relation%3Dparent.parent&extended_social_context=false&font=arial&href=https%3A%2F%2Fwww.bcgperspectives.com%2Fcontent%2Fvideos%2Fleadership_paul_deighton_organizing_london_2012_olympics) **%2F** &layout=button_count&locale=en_US&node_type=link&ref=.UCfPf5lBPRI.like&sdk=joey&show_faces=false&width=90

任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T10:00:38.987

当我输入您的 URL [https://www.bcgperspectives.com/content/videos/leadership_paul_deighton_organizing_london_2012_olympics/](https://www.bcgperspectives.com/content/videos/leadership_paul_deighton_organizing_london_2012_olympics/)时，我无法在[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)上显示一个赞按钮，无论斜线是否存在。

但是，如果我使用`http://`而不是`https://`在您的 URL 前面，它确实会显示 - 然后它适用于两个版本，一个带有斜杠，一个没有。

一个有趣的事实是，我看不到使用[URL 上的调试工具](https://developers.facebook.com/tools/debug/og/object?q=https://www.bcgperspectives.com/content/videos/leadership_paul_deighton_organizing_london_2012_olympics/)从您的页面上抓取的任何信息——无论是斜线版本还是非斜线版本，还是 HTTP 与 HTTPS 版本都无关紧要，因为您的服务器会重定向无论如何，到带有斜杠的 HTTPS 版本。因此，这*可能*表明 FB 的抓取工具与您的 URL/域存在一些问题（尽管没有显示明确的错误消息）。

# internet-explorer - Knockout observable 元素未在 IE 中正确更新

> ID：11924247
> 
> 赞同：4
> 
> 时间：2012-08-12T17:27:49.593
> 
> 标签：internet-explorer, data-binding, knockout.js, observable

我有这个非常简单的可观察元素，由于某种原因在 IE8 中没有更新

```
<body>
<form data-bind="submit: show">
<input type="text" data-bind="value: someText" />
</form>
<script type="text/javascript">

    var ViewModel = function () {
        var self = this;
        self.someText = ko.observable('initial value');

        self.show = function () {
            alert(self.someText());
            self.someText('');
        }
    }

    ko.applyBindings(new ViewModel());
</script>
</body> 
```

因此，当单击 Enter 时，应显示输入到文本框中的值。Mozilla，Opera，chrome中的一切都很好。IE 看不到任何更改，并且始终使用空字符串发出警报。为什么？
[在这里你可以运行这段代码](http://jsfiddle.net/GCbw2/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-12T17:51:44.503

对不起，我应该仔细谷歌它。问题是在不同的事件之后应该更新可观察元素。IE 的小修复看起来像这样

```
<input type="text" data-bind="value: someText, valueUpdate: 'keydown'" /> 
```

# c++ - 寻找主要因素

> ID：11924249
> 
> 赞同：7
> 
> 时间：2012-08-12T17:28:03.523
> 
> 标签：c++, primes, prime-factoring, factorization

```
#include <iostream>
using namespace std;

void whosprime(long long x)
{
    bool imPrime = true;

    for(int i = 1; i <= x; i++)
    {
        for(int z = 2; z <= x; z++)
        {
            if((i != z) && (i%z == 0))
            {
                imPrime = false;
                break;
            }
        }

        if(imPrime && x%i == 0)
            cout << i << endl;

        imPrime = true;
    }    
}

int main()
{
    long long r = 600851475143LL;
    whosprime(r);  
} 
```

我试图找到欧拉项目中[问题 3](https://projecteuler.net/problem=3)指定的数字 600851475143 的素因数（它要求最高的素因数，但我想找到所有这些素数）。但是，当我尝试运行这个程序时，我没有得到任何结果。这是否与我的程序需要多长时间才能处理这么大的数字，甚至与数字本身有关？

另外，有什么更有效的方法可以解决这个问题，你有什么提示可以帮助我在解决问题时转向这些更优雅的解决方案吗？

一如既往，谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-12T17:38:06.270

你的算法是错误的；你不需要*我*。这是通过试除法进行整数分解的伪代码：

```
define factors(n)

    z = 2

    while (z * z <= n)

        if (n % z == 0)
            output z
            n /= z

        else
            z++

    if n > 1
        output n 
```

我将把它留给你用适当的整数数据类型转换成 C++。

编辑：修复了比较（感谢 Harold）并为 Bob John 添加了讨论：

理解这一点的最简单方法是举个例子。考虑 n = 13195 的因式分解。最初 z = 2，但 13195 除以 2 余数为 1，因此 else 子句设置 z = 3 并循环。现在 n 不能被 3 或 4 整除，但是当 z = 5 时，13195 除以 5 的余数为零，因此输出 5 并将 13195 除以 5，因此 n = 2639 和 z = 5 不变。现在新的 n = 2639 不能被 5 或 6 整除，但可以被 7 整除，所以输出 7 并设置 n = 2639 / 7 = 377。现在我们继续 z = 7，留下余数，除法也是乘以 8、9、10、11、12，但 377 / 13 = 29 没有余数，所以输出 13 并设置 n = 29。此时 z = 13，且 z * z = 169，即大于 29，所以 29 是素数，是 13195 的最终因数，所以输出 29。完整的因式分解为 5 * 7 * 13 * 29 = 13195。

有更好的整数因式分解算法使用试除法，甚至更强大的整数分解算法使用除试除法以外的技术，但上面显示的算法将帮助您入门，并且对于 Project Euler #3 来说已经足够了。当您准备好更多时，请看[这里](http://programmingpraxis.com/contents/themes/#Prime%20Numbers)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-29T18:15:07.987

使用@user448810 的伪代码的 C++ 实现：

```
#include <iostream>
using namespace std;

void factors(long long n) {
    long long z = 2;
    while (z * z <= n) {
        if (n % z == 0) {
            cout << z << endl;
            n /= z;
        } else {
            z++;
        }
    }
    if (n > 1) {
        cout << n << endl;
    }
}

int main(int argc, char *argv[]) {
    long long r = atoll(argv[1]);
    factors(r);
}

// g++ factors.cpp -o factors ; factors 600851475143 
```

下面是具有相同算法的 Perl 实现。
运行速度慢约 10-15 倍（对于 n=600851475143，Perl 为 0.01 秒）

```
#!/usr/bin/perl
use warnings;
use strict;

sub factors {
    my $n = shift;
    my $z = 2;
    while ($z * $z <= $n) {
        if ( $n % $z ) {
            $z++;
        } else {
            print "$z\n";
            $n /= $z;
        }
    }
    if ( $n > 1 ) {
        print "$n\n"
    }
}

factors(shift);

# factors 600851475143 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T17:31:19.723

600851475143 超出 int 范围

```
void whosprime(int x) //<-----fix heere ok?
{
    bool imPrime = true;

    for(int i = 1; i <= x; i++)
    {... 
      ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T17:43:26.397

编辑：我错了（见评论）。我会删除，但我错的方式有助于表明程序中具体的内容需要很长时间才能产生输出，所以我会留下它:-)

这个程序应该立即打印出来`1`（我不打算讨论它是否是素数，这正是你的程序所做的）。因此，如果您什么也没看到，那么问题不在于执行速度，那么您运行程序的方式可能存在一些问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T17:44:00.397

试试下面的代码：

```
counter = sqrt(n)
i = 2;

while (i <= counter)
    if (n % i == 0)
        output i
    else
        i++ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-06T15:06:48.583

由于 600851475143 超出了 int 的范围，并且单个 long 类型在这里不起作用，因此在这里解决我们必须在 typedef 的帮助下在这里定义自己的类型。现在 ll 的范围大约是 9,223,372,036,854,775,807。

**typedef long long int LL**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-13T11:21:35.667

```
# include <stdio.h>
# include <math.h>
void primeFactors(int n)
{
    while (n%2 == 0)
    {
        printf("%d ", 2);
        n = n/2;
    }
    for (int i = 3; i <= sqrt(n); i = i+2)
    {
        while (n%i == 0)
        {
            printf("%d ", i);
            n = n/i;
        }
    }
   if (n > 2)
        printf ("%d ", n);
}
int main()
{
    int n = 315;
    primeFactors(n);
    return 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-20T20:41:09.090

简短而清晰的版本：

```
 int main()
    {
        int MAX = 13195;

        for (int i = 2; i <= MAX; i++)
        {
             while (MAX % i == 0)
             {
                  MAX /= i;
                  cout <<  i << ", " << flush;   // display only prime factors
             }
        return 0;
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-06-15T07:42:05.537

这是我的代码，可以很好地找到任何数字的最大素数：

```
#include <iostream>
using namespace std;

// --> is_prime <--
// Determines if the integer accepted is prime or not
bool is_prime(int n){
    int i,count=0;
    if(n==1 || n==2)
      return true;
    if(n%2==0)
      return false;
    for(i=1;i<=n;i++){
    if(n%i==0)
        count++;
    }
    if(count==2)
      return true;
    else
      return false;
 }
 // --> nextPrime <--
 // Finds and returns the next prime number
 int nextPrime(int prime){
     bool a = false;
     while (a == false){
         prime++;
         if (is_prime(prime))
            a = true;
     }
  return prime;
 }
 // ----- M A I N ------
 int main(){

      int value = 13195;
      int prime = 2;
      bool done = false;

      while (done == false){
          if (value%prime == 0){
             value = value/prime;
             if (is_prime(value)){
                 done = true;
             }
          } else {
             prime = nextPrime(prime);
          }
      }
        cout << "Largest prime factor: " << value << endl;
 } 
```

请记住，如果您想找到极大数的最大素数，您必须使用“long”变量类型而不是“int”并调整算法以更快地处理。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-24T09:54:23.900

这是您问题的最简单易懂的解决方案之一。它可能不像上面提供的其他解决方案那样有效，但对于像我这样的初学者来说可以。

```
int main() {

int num = 0;
cout <<"Enter number\n";
cin >> num;
int fac = 2;  
while (num > 1) {
    if (num % fac == 0) {
        cout << fac<<endl;
        num=num / fac;
    }
    else fac++;
}
return 0; 
```

}

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-09-13T08:59:52.960

**简单的方法：**

```
#include<bits/stdc++.h>
using namespace std;
typedef long long int ll;

ll largeFactor(ll n)
{
        ll ma=0;
        for(ll i=2; i*i<=n; i++)
        {
            while(n%i == 0)
            {
                n=n/i;
                ma=i;
            }
        }
        ma = max(ma, n);
        return ma;
}

int main() 
{
    ll n;
    cin>>n;
    cout<<largeFactor(n)<<endl;
    return 0;
} 
```

使用素筛[ideone](https://ideone.com/kizzWs)实现。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2015-10-29T16:59:21.983

试试这个代码。绝对是最好和最有效的：

```
long long number;
bool isRepetitive;

for (int i = 2; i <= number; i++) {
    isRepetitive = false;
    while (number % i == 0) {
        if(!isRepetitive){
            cout << i << endl;
            isRepetitive = true;
        }
        number /= i;
    }
} 
```

享受！☻</p>

# string - Shell 脚本：截断字符串

> ID：11924255
> 
> 赞同：0
> 
> 时间：2012-08-12T17:28:47.220
> 
> 标签：string, shell

我有两个文件夹，里面装满了培训和相应的测试文件，我想使用 shell 脚本相互运行拟合对。

这是我到目前为止所拥有的：

```
for x in SpanishLS.train/*.train
do
    timbl -f $x -t SpanishLS.test/$x.test
done 
```

这应该接受`file1(-n).train`一个目录，在另一个目录中查找`file1(-n).test`，然后通过一个名为`timbl`. 它所做的是寻找一个名为`SpanishLS.train/file1(-n).train.test`当然不存在的文件。我试图做的，但无济于事，是以`$x`一种让脚本找到正确文件的方式截断，但每当我这样做时，`$x`都被截断得太早，导致脚本甚至找不到`.train`文件。

我应该如何编码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T17:38:01.133

如果我说对了，这将完成工作：

```
for x in SpanishLS.train/*.train
do
    y=${x##*/}  # strip basepath
    y=${y%.*} # strip extention
    timbl -f $x -t SpanishLS.test/$y.test
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T17:33:51.140

使用`basename`：

```
for x in SpanishLS.train/*.train
do
    timbl -f $x -t SpanishLS.test/$(basename "$x" .train).test
done 
```

这会从 中删除目录前缀和`.train`后缀`$x`，并建立您想要的名称。

在`bash`（和其他[符合 POSIX 的 shell](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_06_02)）中，您可以`basename`使用两个 shell[参数扩展](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)来执行操作，而无需调用外部程序。（我认为没有办法将这两个扩展合并为一个。）

```
for x in SpanishLS.train/*.train
do
    y=${x##*/}                                        # Remove path prefix
    timbl -f $x -t SpanishLS.test/${y%.train}.test    # Remove .train suffix
done 
```

注意：`bash`支持相当多（有用的）POSIX 未定义的扩展。例如，`${y//.train/.test}`是`bash`-only 表示法（或`bash`兼容的 shell 表示法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T17:34:58.940

`.train`将文件名中所有出现的 替换为`.text`：

```
timbl -f $x -t $(echo $x | sed 's/\.train/.text/g') 
```

# php - 将文本存储在 PHP 数组或 MySQL 数据库中？

> ID：11924257
> 
> 赞同：0
> 
> 时间：2012-08-12T17:29:09.110
> 
> 标签：php, mysql, arrays, query-optimization

假设我有 50 页，我想为其中大约 30 页写一个描述。

描述将在每页上大约两段。

*如果我将描述保存在 MySQL 数据库中然后在每个页面上查询以查看是否有相应的*描述，或者将它们存储在我的 PHP 文件中的数组中并查看是否元素存在吗？

额外信息：我会手动编辑数组文件或通过 phpMyAdmin 编辑数据库条目，这两者都需要相同的时间。此外，只有我编辑它们，所以我不必担心制作快速编辑文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:47:19.847

像这样做：

`data.php`以这种形式将它们存储在一个单独的文件中的数组中：

```
<?php
return array(
  // here be data
); 
```

在调用者脚本中，您可以像这样使用它：

```
$data = require 'data.php'; 
```

然后根据需要在整个站点中使用 $data 变量。您还可以拆分数组并根据特定条件使用多个文件，例如“语言”或“文章类别”或其他。

如果你这样做，你总是可以插入一个带有 Web 界面的编辑器来编辑该数组并将其存储回`file_put_contents('data.php', '<?php return '. var_export($data));`，例如，`$data`在处理`POST`表单后，它的值是从 的旧值生成的`$data`。

真正优雅、快速且可维护！

作为奖励，围绕这些序列化、反序列化等编写辅助函数，这样如果您改变主意（因为您的站点不断增长，最终会得到数百个这样的数组），您只需重新实现这些函数即可使用数据库后端，**无需触及代码库的其余部分**。

代码可重用性和可维护性达到顶峰！如果需要，您可以立即启动并**运行**它，而不会失去**在未来使其变得更好**的前景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:39:17.823

如果您不经常更改这些描述，则可以将它们存储在数组中。但最好将它们保存在单独的文件中，而不是将它们全部保存在一个 PHP 文件中。

但是您的服务器可以轻松处理这种小行。所以做对你来说容易的事。

也许您可以将它们存储在数据库中以添加/编辑内容，并对其进行缓存以从您的页面中读取。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-12T20:39:48.620

我会将信息存储在数据库中。它更慢但更优雅。如果你想用一个数组来做：

```
Class Page
{
    // global configuration
    private static $config = null;

    // individuel configuration
    public $title, $content;

    // constructor
    function __construct($page) {
        // get the configuration
        $config = self::getConfig();

        // cheack weather the page exists
        if(!isset($config[$page]))
            die('unknown page "'.$page.'"');

        // set some stuff
        $this->title = $config[$page]['title'];
        $this->content = $config[$page]['content'];
    }

    // get the configuration
    private function getConfig() {
        if(self::$config === null)
            self::$config = include(dirname(__FILE__) . '/config.php');
        return self::$config;
    }
} 
```

配置：

```
return Array(
    'home' => Array(
        'title' => 'Welcome!',
        'content' => 'Welcome to my site!' /* maybe include some html for complxe stuff */
    )
); 
```

例子：

```
$myPage = new Page('home');
echo $myPage->content; 
```

# html - 多重自 动保证金

> ID：11924259
> 
> 赞同：0
> 
> 时间：2012-08-12T17:29:17.203
> 
> 标签：html, css, margin

我正在和我的一些伙伴制作一个迷你梦幻足球经理网站，我试图让我的球员图标以与他们在这样的图标上相同的方式[对齐](http://fantasy.premierleague.com/)。目前我对 HTML 编码的最佳方法没有任何限制，因此无论是 div、表格等都不受限制。

[这是我目前所拥有的，](http://jsfiddle.net/UYDKa/)但我希望所有的 div 分布均匀，所以 GK 在中间，3 名前锋比 4 名中场等间隔得更大。通常我擅长这种 CSS 的东西，但它今天刚刚离开我的大脑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:36:13.340

在子元素上使用 inline-block，在包装器上使用 text-align: center 并将包装器上的字体大小设置为 0，以便标记中的空白不会影响元素的居中，

[http://jsfiddle.net/UYDKa/1/](http://jsfiddle.net/UYDKa/1/)

# android - 将复选框添加到android中的列表视图

> ID：11924266
> 
> 赞同：0
> 
> 时间：2012-08-12T17:30:07.207
> 
> 标签：android, android-arrayadapter, android-checkbox

当我运行以下代码时，复选框的名称以随机字符串的形式出现（例如`android.widget.CheckBox@43e641b0`。）我也无法单击那些添加的复选框。

这是我的java代码：

```
package com.srk.android.rough1;
import java.util.ArrayList;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.EditText;
import android.app.ListActivity;

public class Rough1Activity extends ListActivity {
   ArrayList<CheckBox> listItems=new ArrayList<CheckBox>();
   ArrayAdapter<CheckBox> adapter;
   private EditText taskNameEditText;

   @Override
   public void onCreate(Bundle icicle) {
       super.onCreate(icicle);
       setContentView(R.layout.main);
       adapter=new ArrayAdapter<CheckBox>(this, android.R.layout.simple_list_item_multiple_choice, listItems);
       setListAdapter(adapter);
   }

   public void addItems(View v) {
       taskNameEditText=(EditText)findViewById(R.id.TaskName);
       String taskName=taskNameEditText.getText().toString();
       CheckBox cb=new CheckBox(this);
       cb.setText(taskName);
       listItems.add(cb);
       adapter.notifyDataSetChanged();
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:13:51.513

您正在尝试显示 CheckBoxes，就像添加整数或字符串数​​组一样...我建议采用不同的方法：

```
public class Rough1Activity extends ListActivity {
    private ArrayList<String> listItems = new ArrayList<String>();
    private ArrayAdapter<String> adapter;
    private EditText taskNameEditText;

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);

        // I like this layout, but it's your choice
        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_checked, listItems);
        //adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice, listItems);
        setListAdapter(adapter);

        // I guessed that you want a multiple choice list from your first layout choice. This is optional, you can remove it.
        ListView listView = getListView();
        listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

        // Here you only need to initialize taskNameEditText once 
        taskNameEditText = (EditText) findViewById(R.id.TaskName);
    }

    public void addItems(View v) {
        // Add the current string in the EditText to the ListView
        adapter.add(taskNameEditText.getText().toString());
    }
} 
```

您想要一个字符串列表并使用复选框显示字符串。我将您的 ArrayList 和 ArrayAdapter 更改为 String 子类型以反映这一点，并且布局`android.R.layout.simple_list_item_checked`本身添加了 Checkbox 功能。现在用户将看到他们在 ListView 中输入的带有可检查行的文本。

希望这可以帮助！

# iphone - 浏览不同的细节视图

> ID：11924267
> 
> 赞同：0
> 
> 时间：2012-08-12T17:30:46.993
> 
> 标签：iphone, uinavigationcontroller, storyboard

我想在检测到滑动时切换我看到的详细视图。问题是我真的不知道该怎么做。如何在目标视图控制器中设置正确的 mySQLite 数据。准确地说：我有一个带有人员列表的标准导航视图。当我点击此人时，会加载包含他信息的详细视图。我想切换详细视图，而不必返回主视图。

我正在使用 Storyboard（前卫 FTW）。

# php - Doctrine 2.0 结果集映射使用不正确？

> ID：11924268
> 
> 赞同：1
> 
> 时间：2012-08-12T17:30:55.383
> 
> 标签：php, doctrine-orm, sqlresultsetmapping

在尝试执行本机查询时，我遇到了 Doctrine 的 ResultSetMapping 问题。

```
$sql = "SELECT id, thesis "
     . "FROM activity p "
     . "WHERE MATCH (thesis) AGAINST ('Gun') ";

$rsm = new \Doctrine\ORM\Query\ResultSetMapping;
$rsm->addEntityResult('activity\models\Entities\Opinion', 'p');
$rsm->addFieldResult('p', 'id', 'id');
$rsm->addFieldResult('p', 'thesis', 'thesis');

$query = $this->_em->createNativeQuery($sql, $rsm);

$results = $query->getResult();

return $results; 
```

我知道 sql 端正在寻找东西的事实，因为首先，数据库中有条目中包含世界“枪”，如果我将其更改为不在数据库中的内容，它会给我一个错误.

这留下了结果集映射代码。它没有产生任何错误，但 getResult() 返回的数组是空白的。这让我怀疑我的映射不正确。

你们对我可以做些什么来进一步确定问题所在有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:49:43.680

事实证明，如果查询少于 4 个字母，则 MATCH AGAINST 不起作用。问题毕竟是 sql :(

结果集映射工作正常。

# asp.net - 当用户使用 CAS SSO 注销时，ASP.NET MVC 会触发 HttpRequestValidationException

> ID：11924274
> 
> 赞同：2
> 
> 时间：2012-08-12T17:32:33.787
> 
> 标签：asp.net, asp.net-mvc, iis-7, cas, request-validation

我们正在使用[Jasig .NET CAS 客户端](https://wiki.jasig.org/display/CASC/.Net+Cas+Client)与我们组织的 CAS SSO 服务器进行交互。

但是，我们注意到在 ASP.NET MVC 3（我假设这也会影响 ASP.NET WebForms）应用程序中，当用户注销时，我们会在错误日志中看到以下错误：

```
System.Web.HttpRequestValidationException (0x80004005):
A potentially dangerous Request.Form value was detected from the client
(logoutRequest="<samlp:LogoutRequest...").
  at System.Web.HttpRequest.ValidateString(String value, String collectionKey, RequestValidationSource requestCollection)
  at System.Web.HttpRequest.ValidateNameValueCollection(NameValueCollection nvc, RequestValidationSource requestCollection)
  at System.Web.HttpRequest.get_Form()
  at System.Web.HttpRequest.FillInParamsCollection()
  at System.Web.HttpRequest.GetParams()
  at DotNetCasClient.Utils.RequestEvaluator.GetRequestIsCasSingleSignOut() in C:\Projects\Jasig\CAS\dotnet-client\trunk\DotNetCasClient\Utils\RequestEvaluator.cs:line 292
  at DotNetCasClient.CasAuthenticationModule.OnBeginRequest(Object sender, EventArgs e) in C:\Projects\Jasig\CAS\dotnet-client\trunk\DotNetCasClient\CasAuthenticationModule.cs:line 93
  at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
  at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

我不相信这是用户收到的错误消息——它似乎只被服务器看到。就用户而言，注销是成功的。

有什么方法可以让 ASP.NET MVC 停止尝试验证这些类型的请求？我知道我可以完全禁用请求验证，但这是不可能的。[带有连字符的网站](http://www.experts-exchange.com/Programming/Languages/.NET/Q_26769212.html)对此有一个很好的问题，但不是一个真正可以接受的答案：

> 将以下设置添加到 web.config：
> 
> `<httpRuntime requestValidationMode="2.0" />`
> 
> 设置此值后，U 可以通过设置 validateRequest="false" 来禁用请求验证

那么，*有没有办法在不完全关闭它的情况下禁用此请求的 ASP.NET 验证？*

**编辑：**这也很难调试，因为这个请求来自 CAS 服务器，而不是来自用户的浏览器。我认为这是 CAS 服务器试图通知所有正在运行的应用程序用户已注销（*单点注销*）。所以我们只在生产中收到这个错误，而不是在本地测试时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T16:08:20.840

dotnetcas 客户端在访问 MVC 控制器操作之前获得对请求的访问权限，因此无法简单地在 MVC 控制器或操作上设置验证属性。

此请求的目标似乎是最后一个经过验证的 URL，因此也无法使用此方法禁用对应用程序中特定路径的验证：http: [//erikbra.wordpress.com/2012/04/ 17/wif-saml-token-post-and-requestvalidationmode2-0/](http://erikbra.wordpress.com/2012/04/17/wif-saml-token-post-and-requestvalidationmode2-0/)

从我看到你有几个选择：

禁用此验证：

```
<system.web>
  <httpRuntime  requestValidationMode="2.0" />
</system.web> 
```

或者

.Net 4.5 允许您在请求通过验证之前访问它。如果您有权访问它，您可以从源代码重新编译客户端，修复相关问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T18:26:21.287

我不熟悉 Jasig .NET CAS 但 ASP.NET MVC 允许您在***页面级别*****禁用请求验证***。*

 *将以下属性添加到您的控制器操作：

```
[ValidateInput(false)] 
```*

# android - 在安装期间将设置存储在 SharedPreferences 中

> ID：11924276
> 
> 赞同：0
> 
> 时间：2012-08-12T17:32:52.413
> 
> 标签：android, facebook, facebook-authentication

是否可以？我希望我的应用程序使用 Facebook 身份验证，但为此我需要一个应用程序密码。根据我的阅读，确保其安全的最佳方法是使用 SharedPreferences，但在使用它之前如何将其放在那里？如果我将它包含在源代码中，可能会通过反编译发现它，那么有没有办法将它放在APK中并在安装时将其写入SharedPreferences？（我想APK也可以被黑，但可能更难，我真的不知道......）感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:45:28.373

据我所知，Android 使用[ProGuard](http://developer.android.com/tools/help/proguard.html)混淆了您的代码。如果有人真的在寻找密钥，这将不够安全。

您可以通过在另一个密钥中加密您的密钥来使他们的工作更加困难。但是，这是尽可能安全的。

关于[SharedPreference](http://developer.android.com/guide/topics/data/data-storage.html#pref)类的安全性，它有一个安全的实现。[ObscuredSharedPreferences](https://stackoverflow.com/a/6393502/543711)是一个自定义的 SharePreference 类，它支持加密但它仍然不是 100% 安全

# r - 在 R 中获得地块边距

> ID：11924278
> 
> 赞同：2
> 
> 时间：2012-08-12T17:33:10.893
> 
> 标签：r, plot

我正在尝试在我的情节右侧安装第二个 ylab，但我无法获得所需的额外空间。如果不可能，在图表内绘制比例值可能是一种解决方案。我的代码（模拟数据，但右边距存在问题）：

```
dev.new( width= 16, height= 7 )
par( cex= 0.9 )
plot( 1:100, type="n", xlab = "", ylab = "", axes = F, las = 2, cex = 0.7 )
axis( 4, at = c ( 0, 30, 60, 90, 120, 150, 180 ), labels = c( "0", "30", "60", "90", "120", "150", "180" ), las = 0, cex.axis = .8,col.lab = "gray80",
tck = 0.01 )
rect( 153, -5.5, 169, 185, col = "gray80", border = NA)
rect( 246, -5.5, 272, 185, col = "gray80", border = NA)
lines( 1:200, col = "gray20" )
#text("Moon phase (º)", 330, 90, cex = .9 )
mtext(side = 4, text = "Moon phase (º)", line = 2, cex = .9 )
mtext(side = 1, text = "Dates", line = 4, cex = .9 )

par( new = T )
plot( 1:220, type = "n", lwd= 1.2, xlab= "", ylab= "Photoperiod (h)", axes = F, cex = .8, col.lab = "red" )
axis( side= 1, at = c ( 1, 20, 51, 82, 112, 143, 173, 204, 235, 264, 295, 324 ), labels = c ( "12 Jun'07", "1 Jul'07", "1 Aug'07", "1 Sep'07", "1 Oct'07", "1 Nov'07", "1 Dec'07", "1 Jan'08", "1 Feb'08", "1 Mar'08", "1 Apr'08", "30 Apr'08" ), las = 2, cex.axis = .75 )
axis ( side = 2, at = c( 12, 13, 14, 15, 16 ), labels = c( "12", "13", "14", "15", "16" ), cex.axis = .8, las = 2)
box() 
```

感谢您的帮助，

桑蒂

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T17:43:33.233

见参数*mar*。`par`这会设置绘图区域的边距（底部、左侧、顶部、右侧；详情请参阅`?par`）。

```
dev.new( width= 16, height= 7 )
## set outer margins
par( mar=c(5, 4, 4, 4), cex= 0.9 )
plot( 1:100, type="n", xlab = "", ylab = "", axes = F, las = 2, cex = 0.7 )
axis( 4, at = c ( 0, 30, 60, 90, 120, 150, 180 ), labels = c( "0", "30", "60", "90", "120", "150", "180" ), las = 0, cex.axis = .8,col.lab = "gray80",
tck = 0.01 )
rect( 153, -5.5, 169, 185, col = "gray80", border = NA)
rect( 246, -5.5, 272, 185, col = "gray80", border = NA)
lines( 1:200, col = "gray20" )
#text("Moon phase (º)", 330, 90, cex = .9 )
mtext(side = 4, text = "Moon phase (º)", line = 2, cex = .9 )
mtext(side = 1, text = "Dates", line = 4, cex = .9 )

par( new = T )
plot( 1:220, type = "n", lwd= 1.2, xlab= "", ylab= "Photoperiod (h)", axes = F, cex = .8, col.lab = "red" )
axis( side= 1, at = c ( 1, 20, 51, 82, 112, 143, 173, 204, 235, 264, 295, 324 ), labels = c ( "12 Jun'07", "1 Jul'07", "1 Aug'07", "1 Sep'07", "1 Oct'07", "1 Nov'07", "1 Dec'07", "1 Jan'08", "1 Feb'08", "1 Mar'08", "1 Apr'08", "30 Apr'08" ), las = 2, cex.axis = .75 )
axis ( side = 2, at = c( 12, 13, 14, 15, 16 ), labels = c( "12", "13", "14", "15", "16" ), cex.axis = .8, las = 2)
box() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T17:46:09.320

在您的代码中使用第 #2 行：

```
par( cex= 0.9,mar=c(6,4,6,4) ) 
```

# android - 如何减少 TextView 行距

> ID：11924280
> 
> 赞同：9
> 
> 时间：2012-08-12T17:33:45.810
> 
> 标签：android, fonts, textview, truetype

我试图通过将负“添加”设置为 TextView.setLineSpacing() 来减少 TextView 中的行距。它运作良好，只是底线被截断。

主要布局

```
<TextView
    android:id="@+id/text_view"
    android:padding="dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    tools:context=".MainActivity" /> 
```

主要活动：（注意

```
package com.font_test;

import android.app.Activity;
import android.graphics.Typeface;
import android.os.Bundle;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final Typeface typeface = Typeface.createFromAsset(getAssets(), "fonts/custom_fonts.ttf");
        final TextView tv = (TextView) findViewById(R.id.text_view);
        tv.setTypeface(typeface);
        tv.setTextSize(60);
        tv.setLineSpacing(-30f, 1f);  // *** -30 to reduce line spacing
        tv.setBackgroundColor(0x280000ff);
        tv.setText("gggkiiikkk" + "\n" + "gikgikgik" + "\n" + "kigkigkig");
    }
} 
```

这会导致视图底部的截断（注意底部的“g”）：

![减小行距会在底线削减“g”](../Images/5f364f14054ffd4deb8c6562ca30f278.png)

问题似乎与不正确的布局测量有关。如果我将 TextView 设置为

```
 android:layout_height="fill_parent" 
```

它确实正确渲染：

![使用 'fill_parent' 不会截断底线](../Images/ecef77b0d57e24ba2a6b5d84cbe78011.png)

知道如何解决吗？如果有帮助，我不介意有丑陋的解决方法。我还可以访问 FontForge，如果需要，我可以修改字体文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-10T14:01:04.200

littleFluffyKittys 的回答很好，但如果行间距是通过 xml 设置的，它在某些设备上不起作用

我通过将字体的原始高度与 textview 为一行计算的高度进行比较来计算所需的额外高度。如果行高小于字体的高度，则将差异添加一次。

这可以降低到至少 API 10 可能更低（只是没有测试过更低）

```
public class ReducedLineSpacingTextView extends TextView {

    public ReducedLineSpacingTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public ReducedLineSpacingTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ReducedLineSpacingTextView(Context context) {
        super(context);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        int truncatedHeight = getPaint().getFontMetricsInt(null) - getLineHeight();
        if (truncatedHeight > 0) {
            setMeasuredDimension(getMeasuredWidth(), getMeasuredHeight() + truncatedHeight);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T19:49:28.633

我遇到了同样的问题，但是当我尝试使用小于 1 的间距乘数时。

我创建了一个子类，`TextView`它自动修复最后一行的截断，并且不需要您在底部设置已知/固定间距。

使用这个类就可以正常使用了，不需要加任何额外的间距或修正。

```
public class ReducedLineSpacingTextView extends TextView {

    private boolean mNegativeLineSpacing = false;

    public ReducedLineSpacingTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public ReducedLineSpacingTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ReducedLineSpacingTextView(Context context) {
        super(context);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        if (mNegativeLineSpacing) { // If you are only supporting Api Level 16 and up, you could use the getLineSpacingExtra() and getLineSpacingMultiplier() methods here to check for a less than 1 spacing instead.
            Layout layout = getLayout();
            int truncatedHeight = layout.getLineDescent(layout.getLineCount()-1);
            setMeasuredDimension(getMeasuredWidth(), getMeasuredHeight() + truncatedHeight);
        }
    }

    @Override
    public void setLineSpacing(float add, float mult) {
        mNegativeLineSpacing = add < 0 || mult < 1;
        super.setLineSpacing(add, mult);
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T10:06:45.847

好的！这样就可以了，但是将常量值放在我们有变量的任何地方都不是一个好主意。您可以使用 lineSpacing 值以 dinamyc 的方式将它们添加到 onMeasure 方法。请注意，此值始终可通过“getLineSpacingExtra()”和“getLineSpacingMultiplier()”获得。或者更容易你可以得到两者的总和：“getLineHeight()”。

虽然我觉得这个值应该包含在 onMeasure 方法中，但您始终可以测量所需的确切高度，然后进行简单检查：

```
final int measuredHeight = getMeasuredHeight();
if (measuredHeight < neededHeight) {
    setMeasuredDimension(getMeasuredWidth, neededHeight);   
} 
```

最后一件事，您不需要在单独的属性中传递上下文。如果您查看构造函数，则上下文已经存在。如果您需要组件的代码，您可以使用“getContext()”。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-31T15:19:55.827

使用它来减少文本视图中的行距**

> 机器人：lineSpacingMultiplier="0.8"

**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T17:37:21.440

只需将 paddingBottom 添加到 TextView xml 的声明中，选择一个产生良好结果的值。并因此为其他填充（顶部、让和右侧）设置值。这应该可以解决您的问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-12T20:33:54.623

如果填充不起作用，边距应该可以完成工作。如果您仍然有问题，您可以随时将行距值应用于视图的 onMeasure 方法。您必须为此创建一个[自定义组件](http://developer.android.com/guide/topics/ui/custom-components.html)并扩展 onMeasure。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-12T22:02:48.430

这是我根据何塞在这里的回答所做的，它似乎有效。我对布局机制的复杂性不是很熟悉。这段代码安全吗？有什么问题吗？

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.font_test.MyTextView
        android:id="@+id/text_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        tools:context=".MainActivity" />

</RelativeLayout> 
```

添加了将垂直高度扩展 N 个像素的自定义 TextView：

```
package com.font_test;

import android.content.Context;
import android.util.AttributeSet;
import android.widget.TextView;

public class MyTextView extends TextView {

    public MyTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        // TODO: provide an API to set extra bottom pixels (50 in this example)
        setMeasuredDimension(getMeasuredWidth(), getMeasuredHeight() + 50);       
    }
} 
```

底部不截断的结果文本视图渲染：

![在此处输入图像描述](../Images/a55374662e56a3813fd0dfea5202315e.png)

# javascript - imdb 中的 onclick 属性

> ID：11924284
> 
> 赞同：0
> 
> 时间：2012-08-12T17:34:26.437
> 
> 标签：javascript, onclick, imdb

我正在查看[www.imdb.com](http://www.imdb.com)的来源，我注意到每个链接中都有一个 onclick 属性。

我对javascript不是很熟悉，所以我在徘徊下面代码的目的是什么以及为什么要使用它。

```
(new Image()).src='/rg/OTW_3/HPRHS/images/b.gif?link=%2Ftitle%2Ftt1535438%2F'; 
```

关联

```
<a href="/title/tt1815708/" onclick="(new Image()).src='/rg/OTW_7/HPRHS/images/b.gif?link=%2Ftitle%2Ftt1815708%2F';">Freelancers</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:04:41.917

如果您查看加载的图像（1x1 白色像素图像）的位置，您会看到它包含指向您单击位置的更具体的链接。

这是一种跟踪点击的内容和位置的方法。因为像 IMDB 这样的网站可能有几十种方法可以访问任何单独的页面，所以仅仅跟踪哪些网站被访问是不够的。他们不断跟踪哪些链接比其他链接更容易被点击，以便更好地查看和导航他们的界面。这通常是为了更好地放置广告。

查看可能回答您问题的[另一个 SO question](https://stackoverflow.com/questions/2716270/using-new-image-src-for-click-tracking)（尽管您的问题更基本，而另一个问题更技术性......）

# image - Shutterfly如何区分这两个链接来渲染不同大小的图像？

> ID：11924285
> 
> 赞同：0
> 
> 时间：2012-08-12T17:34:30.510
> 
> 标签：image, web-applications, thumbnails

我正在查看 Shutterfly RSS 提要中的缩略图，链接是

[http://im1.shutterfly.com/procgtaserv/47a2d624b3127cce9854b08c5baa00000039100AYtWzNi4Yt2Qg](http://im1.shutterfly.com/procgtaserv/47a2d624b3127cce9854b08c5baa00000039100AYtWzNi4Yt2Qg)

正如预期的那样，这会呈现出约 3KB 的缩略图。

我将它与实际 Shutterfly 页面上的图像链接进行了比较，该链接具有相同的明显链接：

[http://im1.shutterfly.com/procgtaserv/47a2d624b3127cce9854b08c5baa00000035100AYtWzNi4Yt2Qg](http://im1.shutterfly.com/procgtaserv/47a2d624b3127cce9854b08c5baa00000035100AYtWzNi4Yt2Qg)

但是当我点击这个链接时，它会渲染出一个 ~60KB 的图像。

我已经在 Fiddler 和 Chrome 开发工具中查看过这个，并且在请求中看不到任何不同的东西，这些请求会告诉服务器要呈现什么大小。我什至尝试将这些链接复制到 Firefox 中，以查看它是否是浏览器/cookie 类型问题，但它们在那里的呈现方式也不同。

我让自己发疯，试图弄清楚发生了什么。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T17:56:40.747

两个网站不一样。

缩略图： [http ://im1.shutterfly.com/procgtaserv/47a2d624b3127cce9854b08c5baa0000003](http://im1.shutterfly.com/procgtaserv/47a2d624b3127cce9854b08c5baa0000003) **9** 100AYtWzNi4Yt2Qg

原文： [http ://im1.shutterfly.com/procgtaserv/47a2d624b3127cce9854b08c5baa0000003](http://im1.shutterfly.com/procgtaserv/47a2d624b3127cce9854b08c5baa0000003) **5** 100AYtWzNi4Yt2Qg

我在 Chrome 的不同选项卡中打开了这两个链接。然后，在两个选项卡之间来回切换，盯着 URL。有一个小闪光，9 变为 5，反之亦然。

# jsf - 打开 serval 页面而不替换 ManagedBean 中的属性

> ID：11924287
> 
> 赞同：0
> 
> 时间：2012-08-12T17:34:47.557
> 
> 标签：jsf, properties, managed-bean

我有一个问题，但不知道我应该看什么。我不认为我是第一个有这个问题的人！

它是一个带有 JSF & Co 基本框架的 Java SE 应用程序。

应用程序可以向线程提交评论。我写了一条评论，然后我打开了另一个线程（另一个浏览器选项卡），所以评论发布在新打开的线程中。

我有一个属性为“selectedThread”的 ManagedBean。该错误是由于该属性被较新的属性替换而导致的。我该如何解决这个问题？

我有几个想法，但都产生了同样的问题。

谢谢！

* * *

```
@ManagedBean
@SessionScoped
public class ViewBean {

private Thread selectedThread = new Thread(); //Current opened Threas
private String threadId=""; //ThreadId read out from Database by Id convert to Object
private Comment selectedThreadComment = new Comment(); //Comment to be made 
```

**工作/失败步骤：**

1.  打开：thread_detail.xhtml?id=10
2.  设置的 ThreadId 和选定的行程
3.  写评论（selectedThreadComment 已设置）
4.  打开：thread_detail.xhtml?id=11
5.  提交评论

id 11 而不是 id 10 的注释是可以理解的。

我使用哪个范围无关紧要。必须有一种方法可以根据打开的站点保存评论。

我希望现在我的问题得到更好的定义！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:06:27.963

听起来好像托管 bean 的范围对于它所拥有的数据来说太宽泛了。症状表明托管 bean 被放置在会话范围内，而它保存的数据特定于单个 HTTP 请求或单个视图。只要浏览器会话建立，会话范围的托管 bean 实例就会存在。它在同一会话中的所有请求/视图中共享。由一个窗口/选项卡发起的任何更改都将反映在同一会话中的另一个窗口/选项卡中。

然后，您应该将 bean 放置在请求或视图范围中，而不是如果它仅包含请求或视图范围的数据。如果您有*一些*确实应该保存在会话范围内的数据，例如登录用户，那么您应该将当前会话范围的托管 bean 拆分为两个托管 bean，每个托管 bean 都在正确的范围内。会话范围的用于保存表示登录用户的数据，请求/视图范围的用于保存表示提交的表单数据和/或视图状态的数据。您可以使用`@ManagedProperty`将会话范围一注入到请求/视图范围一中。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)
*   [servlet 是如何工作的？实例化、会话、共享变量和多线程](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading/3106909#3106909)（以更好地理解 JSF 请求/会话/应用程序范围的“幕后”工作）

# c# - 当我需要一些物品时，我应该只使用它的“int id”吗？

> ID：11924291
> 
> 赞同：5
> 
> 时间：2012-08-12T17:34:58.167
> 
> 标签：c#, oop

我的应用程序有- 我创建实例`InstrumentFactory`的唯一地方。`Instrument`每个仪器实例都包含多个字段，例如`Ticker=MSFT`和`GateId=1`以及 unique `Id =1`。

现在我意识到我几乎不需要`Instrument`实例。在 90% 的情况下，我只需要`Id`. 例如现在我有这样的方法：

```
public InstrumentInfo GetInstrumentInfo(Instrument instrument)
{
    return instrumentInfos[instrument.Id];
} 
```

我们知道我们不应该在参数中传递比要求更多的信息。所以这段代码可能应该重构为：

```
public InstrumentInfo GetInstrumentInfo(int instrumentId)
{
    return instrumentInfos[instrumentId];
} 
```

我的 90% 的代码现在可以重构为使用`instrumentId`而不是`Instrument`.

我应该这样做吗？到处更改`Instrument`将`instrumentId`使其成为一项硬性要求（每个 Instrument 都应该有一个唯一的 id）。但是我会有什么好处呢？作为“硬要求”的回报，我想为此获得一些好处......（速度，可读性？）但我没有看到它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T17:45:18.993

到处使用 id 而不是对象是错误的方法，它违背了 OOP 的精神。

使用对象本身有两大优势：

1.  它是类型安全的。您不能不小心将类似的东西传递`Person`给第一个版本，但您可能会不小心将其传递`person.Id`给第二个版本。
2.  它使您的代码易于修改。如果将来您决定需要`long`id 或其他方式来识别唯一性`Instrument`，则无需更改调用代码。

而且您可能也应该更改您的字典，它应该像现在一样`Dictionary<Instrument, InstrumentInfo>`，而不是`Dictionary<int, InstrumentInfo>`。这样，您也可以获得这两个优势。要使其工作，您需要在 中实现相等`Instrument`，这意味着正确覆盖`Equals()`并且`GetHashCode()`理想情况下还实现`IEquatable<Instrument>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T17:44:58.680

在对象方面工作总是比像整数这样的原始值更好。如果明天您的需求发生变化，并且您需要的不仅仅是 ID，那么很容易将它们添加到`Instrument`对象中，而不是更改所有代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T17:51:27.100

```
GetInstrumentInfo(int instrumentId); 
```

这可能意味着客户端代码必须具有：

```
GetInstrumentInfo(instrument.Id); 
```

不要让你的方法的用户担心这样的小细节。让他们传递整个对象并让您的方法完成工作。

看不到任何主要的性能劣势。无论您是传递一个 Int 还是对实际对象的引用。

假设您想进一步开发 GetInstrumentInfo，访问整个对象比访问 Int 更容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T17:54:58.113

您需要问自己的第一件事是：

“如果我有两个 ID == 53 的仪器，那么这是否意味着它们绝对是相同的仪器，无论如何？或者是否存在有意义的案例，它们可能不同？”

假设答案是“它们都是相同的。如果任何其他属性不同，那要么是一个错误，要么是因为一个这样的对象是一个接一个地获得的，并且很快就会自行解决（当任何处理线程使用旧仪器时） ，停止使用它）”然后：

首先，在内部，只使用你觉得更方便的任何东西。`int`尽管坚持将 an`Instrument`传递给方法，但您很可能会发现这是一直存在的。如果所有`Instrument`构造都发生在通过工厂方法访问的构造函数`internal`或`private`构造函数中，则尤其如此，并且代码的用户无法创建具有`Instrument`与系统中任何内容都不匹配的 id 的虚假代码。

像这样定义相等：

```
public class Instrument : IEquatable<Instrument>
{
  /* all the useful stuff you already have */
  public bool Equals(Instrument other)
  {
    return other != null && Id == other.Id;
  }
  public override bool Equals(object other)
  {
    return Equals(other as Instrument);
  }
  public override int GetHashCode()
  {
    return Id;
  }
} 
```

现在，特别是当我们考虑到上述内容可能在大多数情况下被内联时，关于我们是否在相等性方面使用 ID 或对象几乎没有实现差异，因此在将它们用作关键。

现在，您可以通过以下任何方式定义所有公共方法：

```
public InstrumentInfo GetInstrumentInfo(Instrument instrument)
{
    return instrumentInfos[instrument];
} 
```

或者：

```
public InstrumentInfo GetInstrumentInfo(Instrument instrument)
{
    return instrumentInfos[instrument.Id];
} 
```

或者：

```
public InstrumentInfo GetInstrumentInfo(Instrument instrument)
{
    return GetInstrumentInfo(instrument.Id);
}
private InstrumentInfo GetInstrumentInfo(int instrumentID)
{
    return instrumentInfos[instrumentID]
} 
```

无论您选择哪种方式，性能影响都是一样的。呈现给用户的代码将是类型安全的，并保证它们不会传入虚假值。选择的实现可以简单地是由于其他原因您认为更方便的实现。

由于在内部使用仪器本身作为密钥不会再花费您，我仍然建议您这样做（上面三个选项中的第一个）作为类型安全并使其难以传递虚假值然后也将适用于您的内部代码。另一方面，如果您发现一组调用仍然只使用 id（例如，如果他们正在与只有 ID 有意义的数据库层交谈），那么仅更改这些位置对您来说变得快速而容易，并且对用户隐藏。

您还可以让您的用户能够使用您的对象作为键并进行快速的相等比较，如果它适合他们这样做的话。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-12T17:48:33.360

您可以重载每个函数，一个使用仪器，一个使用 id：

```
public InstrumentInfo GetInstrumentInfo(Instrument instrument)
{
    // call GetInstrumentInfo passing the id of the object
    return GetInstrumentInfo[instrument.Id];
}

public InstrumentInfo GetInstrumentInfo(int instrumentId)
{
    return instrumentInfos[instrumentId];
} 
```

这将为您提供足够的灵活性，以便当您通过任何调用`GetInstrumentInfo`更改它以传递 id 的地方时，当前代码仍将起作用。

至于你是否“应该”完全取决于你。您必须权衡更改它需要多少时间与更改代码的好处。

# sql-server - 对静态数据进行 SHRINK 后的糟糕表现

> ID：11924293
> 
> 赞同：1
> 
> 时间：2012-08-12T17:35:00.923
> 
> 标签：sql-server

在我的测试环境中，在我的 4GB 生产数据库的副本上，我归档了大约 20% 的数据，然后从 SSMS 对其进行缩减，建议最大可用空间为 20%。

结果是一个性能糟糕的 2.7GB 数据库。一个特定的查询在生产中大约是 0.5 秒，现在在测试中大约是 11 秒。如果我在测试中删除查询的全文部分，执行时间约为 2 秒。

生产和测试之间的实际执行计划是相同的。

我重建了所有索引和全文索引。性能还是差不多的。自复制以来，测试数据库中的实际内容没有改变。

关于我在哪里寻找罪魁祸首的任何想法（除了键盘后面？:)

编辑：好的，重复该过程三次，每次结果相同......但是，在我运行收缩之前，性能会降低 - 一旦我归档非活动记录。存档前 0 秒，之后 18 秒。重建一些索引后返回 7 秒。归档过程：

1.  创建一个新的“存档”数据库
2.  标识要删除的 3 种类型的键，将它们存储在表变量中
3.  对 20 个表中的这三个键执行“归档”数据库的选择
4.  从这三个键的 20 个“实时”表中删除了行。

而已。归档后，当我查看执行计划时，40% 的时间花在第一个操作上，即聚集索引扫描。

我将删除此内容并在 SQL 站点上重新发布问题。

重新定位的问题：[https ://dba.stackexchange.com/questions/22337/option-force-order-improves-performance-until-rows-are-deleted](https://dba.stackexchange.com/questions/22337/option-force-order-improves-performance-until-rows-are-deleted)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:01:43.860

由于这个问题具有误导性，因此我将在几天后将其删除，但以防万一有人对结果感到好奇，这里已解决：

[https://dba.stackexchange.com/questions/22337/option-force-order-improves-performance-until-rows-are-deleted](https://dba.stackexchange.com/questions/22337/option-force-order-improves-performance-until-rows-are-deleted)

收缩不是原因，我只是认为这是因为收缩可能会导致数据碎片化。真正的问题是删除行会导致对数据形状进行错误的统计样本。这反过来又导致查询分析器返回一个错误的计划。它认为它的计划将扫描大约 900 行，但它扫描了超过 52,000,000 行。

感谢所有的帮助！

# batch-file - CMD Batch 按文件名创建文件夹并放入

> ID：11924298
> 
> 赞同：1
> 
> 时间：2012-08-12T17:35:50.277
> 
> 标签：batch-file, cmd, subdirectory

我有大约 1000 个文件，例如：

```
_etc_sec
_home_host_www_temp
and etc. 
```

如何根据文件名制作批处理文件以在彼此内部制作文件夹，然后将此文件放入其中。

所有文件都在 d:\ 因此，如果我们有名为 _etc_sec 的文件，我们必须创建名为 d:\etc 的文件夹，然后将文件 _etc_sec 放入文件 d:\etc

因此，如果我们有名为 _home_host_www_temp 的文件，我们必须创建名为 d:\home 的文件夹，然后在此文件夹中创建文件夹 host，然后在文件夹 host 中创建文件夹 www，然后将文件 _home_host_www_temp 放入文件 d:\home\host\www

我知道如何用 VBA 做到这一点，但批处理 cmd 对我来说很难。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:04:24.443

使用 SET 搜索替换将 _ 改为 \，然后使用 FOR 变量 ~p 修饰符获取需要创建的完整路径。单个 MKDIR 命令可以创建一系列嵌套目录。我在循环中打开和关闭延迟扩展，以防万一你有一个带有`!`字符的文件名。

```
@echo off
setlocal disableDelayedExpansion
for %%F in (*_*) do (
  set "file=%%F"
  setlocal enableDelayedExpansion
  for %%A in ("!file:_=\!") do (
    endlocal
    2>nul mkdir "%%~pA"
    >nul move "%%F" "%%~pA"
  )
) 
```

# mysql - arel union 和消息中的最新对话

> ID：11924311
> 
> 赞同：4
> 
> 时间：2012-08-12T17:37:49.657
> 
> 标签：mysql, sql, ruby-on-rails, ruby, arel

我需要一个消息列表，其中每一个都是当前用户和其他用户之间的“对话”中的最新消息。

[这个问题](https://stackoverflow.com/questions/4702688/i-could-use-some-help-with-my-sql-command)中描述了相同的查询

我到目前为止的代码是：

```
t1 = Arel::Table.new(:messages, :as => 't1')
t2 = Arel::Table.new(:messages, :as => 't2')

convs1 = t1.
          project(
                  t1[:receiver_user_id].as('other_user_id'), 
                  t1[:receiver_user_id].as('receiver_user_id'), 
                  t1[:sender_user_id].as('sender_user_id'), 
                  t1[:created_at].as('created_at')
                 ).
          where(t1[:sender_user_id].eq(user.id))

convs2 = t2.project(
                  t2[:sender_user_id].as('other_user_id'), 
                  t2[:receiver_user_id].as('receiver_user_id'), 
                  t2[:sender_user_id].as('sender_user_id'), 
                  t2[:created_at].as('created_at')
                 ).
          where(t2[:receiver_user_id].eq(user.id))

conv = convs1.union(convs2) 
```

首先，我收到一个错误：

```
ActiveRecord::StatementInvalid: Mysql2::Error: You have an error in your SQL syntax; check \
  the manual that corresponds to your MySQL server version for the right syntax to use near \
  'UNION SELECT `t2`... 
```

如果我在下面生成的 sql 中手动将“UNION”替换为“UNION ALL”，则此方法有效。上述代码中的 conv.to_sql 产生：

```
SELECT `t1`.`receiver_user_id` AS other_user_id, 
       `t1`.`receiver_user_id` AS receiver_user_id, `
        t1`.`sender_user_id` AS sender_user_id, 
       `t1`.`created_at` AS created_at 
  FROM `messages` `t1` 
 WHERE `t1`.`sender_user_id` = 50 
UNION 
SELECT `t2`.`sender_user_id` AS other_user_id, 
       `t2`.`receiver_user_id` AS receiver_user_id, 
       `t2`.`sender_user_id` AS sender_user_id, 
       `t2`.`created_at` AS created_at 
  FROM `messages` `t2` 
 WHERE `t2`.`receiver_user_id` = 50 
```

知道为什么会出现 MySQL UNION 错误。它是一个arel错误吗？其次，非常感谢您对完成查询的任何帮助。

**更新：** 使用 Arel::Nodes::Union.new 有效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:35:21.973

我认为这更可能是 mysql 故障，这是一个 mySQL 错误文本。[这里](http://bugs.mysql.com/bug.php?id=7684)讨论了类似的东西，但不完全是这个问题。

尝试迁移到另一个 sql server，然后再次检查，或者如果`union all`有效，则使用[此](http://rubydoc.info/gems/arel/2.0.9/Arel/Nodes/UnionAll)：

```
conv = convs1.union(convs2, :all) 
```

基于文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:29:14.093

问题实际上是sql中的括号。如果我运行它会起作用：

```
Message.find_by_sql conv.to_sql.delete('()') 
```

删除前导“（”和尾随“）”

奇怪..我不知道如何链接它来完成查询。（Arel::Nodes::Union 没有 group 方法）。这是 Rails 3.1.4

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:27:40.503

我有一个类似的问题并解决如下：

```
 def last_messages
    Message.find_by_sql("
          SELECT  messages.*,
                  (IF(recipient_id = #{id}, 0,1)) as outlast,
                  users.avatar_name,
                  users.name 
          FROM messages 
          INNER JOIN users 
              ON users.id=(IF(recipient_id = #{id}, sender_id,recipient_id))
          WHERE messages.id IN 
              ( SELECT max(id)
                FROM messages
                WHERE recipient_id = #{id} OR sender_id = #{id}
                GROUP BY (IF(recipient_id = #{id}, sender_id, recipient_id))
              )
          ORDER BY messages.id DESC")
  end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T14:55:17.110

这是我最后使用的代码

```
all_msgs = Message.where("messages.sender_user_id = ? OR messages.receiver_user_id = ?",
                                     user.id, user.id)

msg_ids = all_msgs.select("sender_user_id, receiver_user_id, max(id) as max_id")
.group(:sender_user_id, :receiver_user_id).map { |m| m.max_id }

all_msgs = all_msgs.where(:id => msg_ids) 
```

# asp.net - 使用 wget 抓取 ASPX Web 表单？

> ID：11924318
> 
> 赞同：1
> 
> 时间：2012-08-12T17:38:20.827
> 
> 标签：asp.net, wget

对于数据收集/分析项目，我正在尝试在[http://www.lasuperiorcourt.org/civilcasesummarynet/ui/?CT=AP&casetype=appellate](http://www.lasuperiorcourt.org/civilcasesummarynet/ui/?CT=AP&casetype=appellate)下载 aspx 网络表单中的条目，但到目前为止我收效甚微.

想法是通过wget从网页下载相关信息，并将结果输出到单个html文件。然后，根据结果输出，我将对相关案例的提取数据进行统计（例如，从案例编号 BV024000 到 BV028933）。

但是，我无法让 wget 从表单中检索数据。我一直在使用：

```
wget --post-data "frmsearch=BV024000" http://www.lasuperiorcourt.org/civilcasesummarynet/ui/?CT=AP^&casetype=appellate -O output.html 
```

但我只是取回原始页面，而不是表单输出。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:32:37.267

有两个问题

1.  您的命令中有拼写错误 - 您应该将 http 地址用引号括起来，它是 ui/index.aspx?CT=AP。没有 ^
2.  当您发布表单时，您必须发布表单的所有输入字段，否则您的发布请求不会被验证。

在这里，我做了如下请求

```
 wget --post-data "__VIEWSTATE=%2FwEPDwUJMzM0NzAxOTczD2QWBgIBD2QWCmYPDxYCHgdWaXNpYmxlZ2RkAgIPDxYCHwBoZGQCBA8PFgIfAGhkZAIGDw8WAh8AaGRkAggPDxYCHwBoZGQCAw9kFgpmDw8WAh8AZ2RkAgIPDxYCHwBoZGQCBA8PFgIfAGhkZAIGDw8WAh8AaGRkAggPDxYCHwBoZGQCCQ9kFgICAw8PFgIfAGhkFgICAQ8QZA8WIGYCAQICAgMCBAIFAgYCBwIIAgkCCgILAgwCDQIOAg8CEAIRAhICEwIUAhUCFgIXAhgCGQIaAhsCHAIdAh4CHxYgEAUGU2VsZWN0BQZTZWxlY3RnEAUTQWxoYW1icmEgQ291cnRob3VzZQUDQUxIZxAFFUJlbGxmbG93ZXIgQ291cnRob3VzZQUDTEMgZxAFGEJldmVybHkgSGlsbHMgQ291cnRob3VzZQUDQkggZxAFEkJ1cmJhbmsgQ291cnRob3VzZQUDQlVSZxAFFUNoYXRzd29ydGggQ291cnRob3VzZQUDQ0hBZxAFEkNvbXB0b24gQ291cnRob3VzZQUDQ09NZxAFFkN1bHZlciBDaXR5IENvdXJ0aG91c2UFA0NDIGcQBRFEb3duZXkgQ291cnRob3VzZQUDRE9XZxAFG0Vhc3QgTG9zIEFuZ2VsZXMgQ291cnRob3VzZQUDRUxBZxAFE0VsIE1vbnRlIENvdXJ0aG91c2UFA0VMTWcQBRNHbGVuZGFsZSBDb3VydGhvdXNlBQNHTE5nEAUaSHVudGluZ3RvbiBQYXJrIENvdXJ0aG91c2UFA0hQIGcQBRRJbmdsZXdvb2QgQ291cnRob3VzZQUDSU5HZxAFFUxvbmcgQmVhY2ggQ291cnRob3VzZQUDTEIgZxAFEU1hbGlidSBDb3VydGhvdXNlBQNNQUxnEAUtTWljaGFlbCBBbnRvbm92aWNoIEFudGVsb3BlIFZhbGxleSBDb3VydGhvdXNlBQNBVFBnEAUTTW9ucm92aWEgQ291cnRob3VzZQUDU05JZxAFE1Bhc2FkZW5hIENvdXJ0aG91c2UFA1BBU2cQBRdQb21vbmEgQ291cnRob3VzZSBOb3J0aAUDUE9NZxAFGFJlZG9uZG8gQmVhY2ggQ291cnRob3VzZQUDU0JCZxAFF1NhbiBGZXJuYW5kbyBDb3VydGhvdXNlBQNMQVNnEAUUU2FuIFBlZHJvIENvdXJ0aG91c2UFA0xBUGcQBRhTYW50YSBDbGFyaXRhIENvdXJ0aG91c2UFA05FV2cQBRdTYW50YSBNb25pY2EgQ291cnRob3VzZQUDU00gZxAFFVNvdXRoIEdhdGUgQ291cnRob3VzZQUDU0cgZxAFF1N0YW5sZXkgTW9zayBDb3VydGhvdXNlBQNMQU1nEAUTVG9ycmFuY2UgQ291cnRob3VzZQUDU0JBZxAFGFZhbiBOdXlzIENvdXJ0aG91c2UgV2VzdAUDTEFWZxAFFldlc3QgQ292aW5hIENvdXJ0aG91c2UFA0NJVGcQBRtXZXN0IExvcyBBbmdlbGVzIENvdXJ0aG91c2UFA0xBV2cQBRNXaGl0dGllciBDb3VydGhvdXNlBQNXSCBnFgFmZGQk7ioHoNWuWLyRkeV2Jf7vbNorIw%3D%3D&CaseNumber=BV024000&submit1=Search&casetype=appellate" "http://www.lasuperiorcourt.org/civilcasesummarynet/ui/index.aspx?CT=AP&casetype=appellate" -O output.html
--2012-08-12 19:25:32--  http://www.lasuperiorcourt.org/civilcasesummarynet/ui/index.aspx?CT=AP&casetype=appellate
Resolving www.lasuperiorcourt.org... 153.43.255.56
Connecting to www.lasuperiorcourt.org|153.43.255.56|:80... connected.
HTTP request sent, awaiting response... 302 Found
Location: /civilcasesummarynet/ui/casesummary.aspx?CT=AP&casetype=appellate [following]
--2012-08-12 19:25:33--  http://www.lasuperiorcourt.org/civilcasesummarynet/ui/casesummary.aspx?CT=AP&casetype=appellate 
```

它工作看到图片[http://i47.tinypic.com/35db8k3.png](http://i47.tinypic.com/35db8k3.png)

可能您需要为每个请求设置一个新的 __VIEWSTATE 值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-12T18:36:43.117

你在什么环境下执行这个命令？在大多数 unix shell 中，“&”是一个特殊字符，它将终止命令字符串并将命令在执行时发送到后台。~~，但您没有以任何方式引用该网址~~。

编辑：好的，没关系......我的答案并不是那么有用，只是我不知道“^”是一个引号字符，现在我知道了。 [http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds_shelloverview.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds_shelloverview.mspx?mfr=true)

# java - 平面文本文件解析

> ID：11924320
> 
> 赞同：0
> 
> 时间：2012-08-12T17:38:40.293
> 
> 标签：java, parsing

我有一个相当复杂的平面文件，需要用 Java 解析，但我找不到任何适合我需要的库。

本质上，我有一个由单行格式组成的文件：[num num num num]
示例：[0.1 0.2 15 30]

接下来是一系列两字段 CSV 格式的行：num、num
示例：1.0000E+01、5.7104E-02

这种模式是重复的，因此文件由包含标题和一些数据的块组成。这是整个文件的示例（仅截断为三个块）： http: [//pastebin.com/q3VfRtmF](http://pastebin.com/q3VfRtmF)

我需要将该文件转换为“FluxSet”对象数组，定义如下：http: [//pastebin.com/knUFQuVY](http://pastebin.com/knUFQuVY)

一对在这里定义：http: [//pastebin.com/s5Ehqpab](http://pastebin.com/s5Ehqpab)

有谁知道适用于这种解析的库？

谢谢，塔克托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:43:32.073

如果你的输入文件定义得很好，那么去写一个简单的文件阅读器，它会逐行读取文件并执行简单的`String.split()`和`Integer.parseInt()`/或任何其他适用的方法，最后用你刚刚解析的数据填充所需的对象。

# objective-c - 使用 .mm 文件而不是 .m 以防我以后使用 C++ 是不是一个坏主意？

> ID：11924325
> 
> 赞同：7
> 
> 时间：2012-08-12T17:39:49.320
> 
> 标签：objective-c, objective-c++

假设我正在使用 Apple 最新的 Xcode 工具开发典型的 Mac 或 iOS 应用程序。进一步假设我主要使用 Objective-C 开发此应用程序，并利用 Apple 的 Cocoa 或 Cocoa Touch 框架中的所有相关 API。

假设我目前没有任何计划在我的代码库中使用 C++ 或 Objective-C++，但我怀疑在未来的某个时间我**可能**想在这里或那里加入一点 Objective-C++。

所以我正在考虑将我所有的`.m`文件命名为`.mm`，以防万一。（这将在我的 SCM 系统中产生更清晰的历史记录，因为我以后不必重命名文件。）

这是一个坏主意吗？是否有任何理由为什么使用`.mm`文件肯定或明显比使用`.m`文件实际上不包含任何 Objective-C++ 时使用更糟糕？

大概这个文件扩展名会触发编译器中的一些开关，然后编译器不仅要解析 ObjC 的源代码，还要解析 C++ 的源代码。这对中型到大型代码库的构建时间是否有显着的负面影响？

我应该记住它是否有任何其他负面（或正面）影响？

注意：请不要回复任何关于 ObjC 或 C++ 是否更好的评论。这不是这个问题的目的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-12T17:59:38.860

这不是最坏的主意，但也不是一个好主意。

Objective-C++ 的主要目的是充当需要使用 C++ 库的 Objective-C 代码的桥梁。因此，在大多数项目中，几乎所有代码都是普通的老式 Objective-C，可能有几个 .mm 文件来创建一个“包装器”对象来与 C++ 库对话。

因此，您极不可能需要将代码的重要部分从 Objective-C 更改为 Objective-C++。您的 SCM 历史记录中不应该有很多文件重命名。

到处使用 Objective-C++ 的主要问题是你将遵循“少有人走的路”：你阅读的 99% 的教程以及你使用和学习的开源代码都将被编写为由 Obj- 编译C 编译器。使用 Obj-C++ 编译器将大体相同，并且可能在大多数情况下不会产生任何影响，但您最终会遇到一些问题，这是由于 Obj-C++ 的编译方式略有不同，但是当您发现错误它不会很明显，并且您将花费大量时间尝试诊断它，然后才意识到这是因为您使用的编译器设置测试得不太好。

如果你有很多 C++ 经验，并且发现自己在代码中“需要”来自 C++ 的特性，那么你可能并不真正需要它们，你可能需要花更多的时间来弄清楚如何在 Objective-C 中做同样的事情. 在罗马做到入乡随俗。

一般来说，“以防万一”并不是偏离标准做法的好理由。你经常会在不需要的东西上花费很多精力。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T17:48:47.727

引用巴里·沃克的话：

> 对于“普通”Objective-C，使用 .mm 而不是 .m 的主要缺点是 Objective-C++ 的编译时间要长得多。这是因为 C++ 编译器比 C 编译器需要更长的时间。在 Xcode 3.2 及更高版本中，Objective-C 代码可以使用 Clang 前端工具链来显着加快 Objective-C/C 编译时间。由于 Clang 还不支持 Objective-C++/C++，这进一步拉大了两者在编译时间上的差距。

但

> 更新 2012 年 2 月 17 日 从 Xcode 4.0（使用 LLVM 3.0）开始，Clang 已支持 Objective-C++。即使是 C++11 支持现在也相当强大。

所以我认为只要你只使用C特性就可以使用.mm，.mm文件应该生成与.m非常相似的代码

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-13T02:38:48.150

正如我在评论中所写，C++ 不是 C 的严格超集，因此您可能会遇到使用例如 C99 代码的情况，如果您将其放在 Objective-C++ 文件中将无法编译。我最近在使用 C99[复合文字](http://www.mikeash.com/pyblog/friday-qa-2011-02-18-compound-literals.html)时遇到了这个问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-12T19:39:58.027

是的，这是个坏主意。

当我看到一个`.mm`文件时，我希望它有 C++ 代码（当然还有 Objective-C）。与 C++ 相比，有一些与 OOP 没有直接关系的东西在 C++ 中有些不同。

因此，将所有 Objective-C 文件命名为`.m`. 只要您需要任何 C++ 功能 - 将其重命名为`.mm`并验证一切正常。

如果您保留头文件 C++-less，您将获得奖励积分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T17:49:25.727

.mm 扩展名表示 Objective-C++ 文件。编译器编译 c++ 代码比 C 代码花费更多时间。

因此，如果不需要，请将扩展名仅保留为 .m。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-12T19:31:06.920

根据我的经验（在 Apple）：1）xcode 团队最后考虑 c++（花了很长时间才获得 objc++ 中的块支持）2）objc++ 编译速度要慢得多

# php - 乘以列进行货币兑换

> ID：11924327
> 
> 赞同：0
> 
> 时间：2012-08-12T17:40:38.263
> 
> 标签：php, mysql, sql

我的 MySQL 表中有两列`total`，`dollars`. 我需要将我的美元兑换成卢比并将其存储在我的`total`领域中。我可以将实时美元汇率相乘并存储结果吗？

我需要一个数学函数的 SQL 查询，如下所示：

```
total = dollars * current_dollar_rate_in_rupees 
```

我可以使这种转换动态吗？如果是这样，我的 SQL 查询将如何以及将是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T17:47:58.413

`total`您可以使用此查询将转换结果存储到字段中：

```
UPDATE `tablename` SET `total` = `dollars` * <current_dollar_rate_in_rupees>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:45:21.503

[SQL Server 中的两列相乘](https://stackoverflow.com/questions/7536996/multiplying-two-columns-in-sql-server)

因此，只需将此查询给出的值存储在您的数据库中作为“总计”

```
SELECT dollars * current_dollar_rate_in_rupees from tablename 
```

# c# - 可重用类以等待事件触发

> ID：11924328
> 
> 赞同：3
> 
> 时间：2012-08-12T17:40:59.257
> 
> 标签：c#, events, reflection

我知道这与此问题略有重复：[Blocking and waiting for an event](https://stackoverflow.com/questions/492020/blocking-and-waiting-for-an-event)

但是，我在编写 EventWaiter 的过程中遇到了问题。这是我一直在研究的（主要）简化版本：

```
public class EventWaiter
{
    private AutoResetEvent _autoResetEvent = new AutoResetEvent(false);
    private EventInfo _event = null;
    private object _eventContainer = null;

    public EventWaiter(object eventContainer, string eventName)
    {
        _eventContainer = eventContainer;
        _event = eventContainer.GetType().GetEvent(eventName);
    }
    public void WaitForEvent()
    {
        MethodInfo method = this.GetType().GetMethod("DynamicCaller");
        Delegate handler = Delegate.CreateDelegate(this._event.EventHandlerType, this, method);

        _event.AddEventHandler(_eventContainer, handler);

        _autoResetEvent.WaitOne();

        _event.RemoveEventHandler(_eventContainer, _handler);

    }
    public void DynamicCaller(/* insert magic here */)
    {
        _autoResetEvent.Set();
    }
} 
```

用法很简单：

```
EventWaiter ew = new EventWaiter(someClass, "someEvent");
ew.WaitForEvent(); 
```

基本上正在发生的事情是将`DynamicCaller`void 注册为该事件的处理程序。问题是，事件有不同的签名，我希望能够处理事件而不管使用的委托。

我可以使用 this._event.EventHandlerType 获取委托的类型，但是无论委托是什么，我如何使用它来创建一个完全可重用的类？如果 DynamicCaller 参数与事件委托参数不完全相同，我会得到一个异常。

作为旁注，我对框架中的代码做了很多研究，如果我可以访问其中的一些，我认为这会很容易。太糟糕了，我需要的很多类都是框架内部的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T17:54:08.313

由于所有遵循推荐模式的事件都有一个 object 类型的参数和一个派生自 的类型的参数`EventArgs`，因此您应该能够使用此签名处理所有这些事件：

```
void DynamicCaller(object sender, EventArgs e) 
```

当然，它不适用于非标准事件签名......

* * *

编辑：这是一个动态生成的处理程序的例子：

```
public class EventWaiter
{
    private AutoResetEvent _autoResetEvent = new AutoResetEvent(false);
    private EventInfo _event = null;
    private object _eventContainer = null;

    public EventWaiter(object eventContainer, string eventName)
    {
        _eventContainer = eventContainer;
        _event = eventContainer.GetType().GetEvent(eventName);
    }
    public void WaitForEvent()
    {
        Delegate handler = CreateHandler();

        _event.AddEventHandler(_eventContainer, handler);

        _autoResetEvent.WaitOne();

        _event.RemoveEventHandler(_eventContainer, handler);

    }

    private Delegate CreateHandler()
    {
        var invokeMethod = _event.EventHandlerType.GetMethod("Invoke");
        var invokeParameters = invokeMethod.GetParameters();
        var handlerParameters = invokeParameters.Select(p => Expression.Parameter(p.ParameterType, p.Name)).ToArray();
        var body = Expression.Call(Expression.Constant(_autoResetEvent), "Set", null);
        var handlerExpression = Expression.Lambda(_event.EventHandlerType, body, handlerParameters);
        return handlerExpression.Compile();
    }
} 
```

编辑： SLaks 比我快 ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T17:58:14.600

您应该使用表达式树来编译带有任意参数集的方法，这些参数会调用您的回调：

```
Expression.Lambda(
    _event.EventHandlerType,

    Expression.Call(Exrpession.Constant(_autoResetEvent), 
                    typeof(AutoResetEvent).GetMethod("Set")),

    _event.EventHandlerType.GetMethod("Invoke")
                           .GetParameters()
                           .Select(p => Expression.Parameter(p.ParameterType))
).Compile(); 
```

请注意，您可以使用泛型和表达式树使您的系统类型安全：

```
 new EventWaiter(_ => someObject.SomeEvent += _) 
```

where`_`是一个普通（但很短）的参数名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T18:06:35.433

你可以做你想做的事`TaskCompletionSource`：

```
 TaskCompletionSource<string> tcs = 
    new TaskCompletionSource<string>();

  WebClient client = new WebClient();

  client.DownloadStringCompleted += (sender, args) => {
    if (args.Error != null) tcs.SetException(args.Error);
    else if (args.Cancelled) tcs.SetCanceled();
    else tcs.SetResult(args.Result);
  };

  client.DownloadStringAsync(address);

  tcs.Task.Wait(); // WaitForEvent 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T18:46:26.003

这里的解决方案很好，但是对我来说，使用字符串，反射有一点代码味道，所以我会选择一个通用版本：

```
public class EventWaiter
{
    public enum Mode
    {
        Wait,
        Detach
    }

    public static Func<Mode, TEventArgs> Create<TDelegate, TEventArgs>(
        Func<Action<object, TEventArgs>, TDelegate> converter,
        Action<TDelegate> addHandler,
        Action<TDelegate> removeHandler
        )
    {
        AutoResetEvent semaphore = new AutoResetEvent(false);
        TEventArgs args = default(TEventArgs);

        TDelegate handler = converter((s, e) => {  args = e; semaphore.Set(); });

        addHandler(handler);

        return mode =>
        {
            if (mode == Mode.Wait)
            {
                semaphore.WaitOne(); 
                return args;
            }
            else
            {
                removeHandler(handler);
                return default(TEventArgs);
            }
        };
    } 
```

用法：

```
 var evt = 
        EventWaiter.Create<SerialDataReceivedEventHandler, SerialDataReceivedEventArgs>
            (handler => (s, e) => handler(s, e), 
            h => port.DataReceived += h,
            h => port.DataReceived -= h);

        var firstArgument = evt(EventWaiter.Mode.Wait); //Wait for first event
        var secondArgument = evt(EventWaiter.Mode.Wait); //Wait for second event

        evt(EventWaiter.Mode.Detach); //Dispose 
```

# ios - wait_fences：未能收到回复：10004003 - viewDidLoad

> ID：11924332
> 
> 赞同：3
> 
> 时间：2012-08-12T17:41:18.443
> 
> 标签：ios, xcode4.3

我收到了这个错误，很好奇是什么触发了它。从我读过的内容来看，它通常是关于在 viewDidLoad 内设置动画或阻止 UIAlertView。

1.如果我注释掉scrollView代码块，错误就会消失。

2.如果我离开scrollView代码并从360Controller开始注释掉到页面一结束。警告消失。

3.是因为内存过载吗？

```
- (void)viewDidLoad
{
[super viewDidLoad];

self.view.hidden = YES;
// Do any additional setup after loading the view.
self.view.backgroundColor = [UIColor grayColor];

//SCROLLVIEW Start
scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];
[scrollView setContentSize:CGSizeMake(1024*6, 768)];
scrollView.bounces = NO;
scrollView.pagingEnabled = YES;
scrollView.showsHorizontalScrollIndicator = YES;
scrollView.delegate = self;
[self.view addSubview:scrollView];
//SCROLLVIEW End

//Poster Vertical Scroller STart
posterVerticalScroller = [[UIScrollView alloc] initWithFrame:CGRectMake(1024*3, 0, 1024, 768)];
[posterVerticalScroller setContentSize:CGSizeMake(1024, 768*3)];
posterVerticalScroller.bounces = NO;
posterVerticalScroller.pagingEnabled = YES;
[scrollView addSubview:posterVerticalScroller];
//Poster Vertical Scroller End

//Overview Start
overView = [[OverViewController alloc] initWithNibName:nil bundle:nil];
overView.view.frame = CGRectMake(1024, 0, 1024, 768);
[scrollView addSubview:overView.view];
//OverView End

//Landing start
landingView = [[LandingViewController alloc] initWithNibName:nil bundle:nil];
landingView.view.frame = CGRectMake(0, 0, 1024, 768);
[scrollView addSubview:landingView.view];
//Landing End

//360Controller Start
rotateController * rotateAnim = [[rotateController alloc] initWithNibName:nil bundle:nil];
rotateAnim.view.frame = CGRectMake(1024*2, 0, 1024, 768);
[scrollView addSubview:rotateAnim.view];

animateHouse = [[UIImageView alloc] initWithFrame:CGRectMake(100 + 1024*2, 200, 800, 450)];
  // animateHouse.animationImages = rotateImg;
  //animateHouse.animationDuration = 3.0;
  // animateHouse.animationRepeatCount = 1;
  // [animateHouse startAnimating];
animateHouse.userInteractionEnabled = YES;
animateHouse.image = [UIImage imageNamed:@"1.png"];
[self.view addSubview:animateHouse];
//360Controller End

//Poster 1 start
poster1 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"poster01.png"]];
poster1.frame = CGRectMake(0, 0, 1250, 768);
[posterVerticalScroller addSubview:poster1];
poster1Items = [[UIImageView alloc] initWithImage:[UIImage     imageNamed:@"poster01_items.png"]];
poster1Items.frame = CGRectMake(0, 0, 1024, 768);
[posterVerticalScroller addSubview:poster1Items];    
//Poster 1 end

//Poster 2 Start
poster2 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"poster02.png"]];
poster2.frame = CGRectMake(0, 768, 1162, 768);
[posterVerticalScroller addSubview:poster2];
poster2Items = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"poster02_items.png"]];
poster2Items.frame = CGRectMake(0, 768, 1024, 768);
[posterVerticalScroller addSubview:poster2Items];
//Poster 2 End

//Poster 3 Start
poster3 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"poster03.png"]];
poster3.frame = CGRectMake(0, 768*2, 1536, 768);
[posterVerticalScroller addSubview:poster3];
poster3Items = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"poster03_items.png"]];
poster3Items.frame = CGRectMake(0, 768*2, 1024,768 );
[posterVerticalScroller addSubview:poster3Items]; 
//Poster 3 End

//PageOne Start
UIImageView * pageOneBg = [[UIImageView alloc] initWithFrame:CGRectMake(1024*4, 0, 1024, 768)];
pageOneBg.image = [UIImage imageNamed:@"page360_landing_full.png"];
[scrollView addSubview:pageOneBg];

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(1024*4+750, 520, 200, 200);
[button setTitle:@"" forState:UIControlStateNormal];
[button addTarget:self action:@selector(loadingTEst) forControlEvents:UIControlEventTouchUpInside];
[scrollView addSubview:button];
//PageOne End

//Page 2
UIImageView *pageTwoBG = [[UIImageView alloc] initWithFrame:CGRectMake(1024*5, 0, 1024, 768)];
pageTwoBG.image = [UIImage imageNamed:@"Page06_Full.png"];
[scrollView addSubview:pageTwoBG];    

UIButton *buttonTwo = [UIButton buttonWithType:UIButtonTypeCustom];
buttonTwo.frame = CGRectMake(1024*5+0, 550, 250, 100);
[buttonTwo setTitle:@"" forState:UIControlStateNormal];
[buttonTwo addTarget:self action:@selector(loadMap) forControlEvents:UIControlEventTouchUpInside];
[scrollView addSubview:buttonTwo];
//Page 2 END

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:45:03.730

尝试将您的动画代码放入 viewDidAppear。如果动画只需要在加载视图时运行，则使用布尔值来检查视图是否已重新加载。

# javascript - 响应式导航菜单，项目相互“隐藏”

> ID：11924334
> 
> 赞同：6
> 
> 时间：2012-08-12T17:41:22.207
> 
> 标签：javascript, jquery, html, css, responsive-design

我希望有人能够用我希望实现的目标为我指明正确的方向。我正在构建一个响应式站点，顶部有一个传统的导航菜单，里面有几个项目。

当页面变窄时，我需要缩小此菜单，但我希望导航菜单不适合放在“更多...”下拉选项卡下方的项目。这有意义吗？这是一个图形表示...

![1024宽度](../Images/68e164dfd4c332434cb75ae9ef721393.png)

![在此处输入图像描述](../Images/2592a75bc5f1eb5c40d5f6cdf990d9b7.png)

所以顶部的图像可能是 1024 宽度的样子，下面是 768 的宽度。

菜单中的内容是未知的，因此宽度会有所不同，因此我需要计算组合链接的宽度，然后将除此之外的任何内容放在 More.. 下拉列表下方。

任何提示将不胜感激，只是现在不知道从哪里开始。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T21:58:18.537

实现这一点非常简单，如果菜单可以是静态的并且在调整窗口大小时不必调整；@skip405 的示例在这种情况下是一个非常好的解决方案 (+1)。

如果实现必须在窗口调整大小时动态调整菜单，但它会变得很棘手......`window.onresize`当用户缩放浏览器窗口时，该事件经常被触发，所以一个天真的实现（例如@skip405的方法在每个事件上执行）将是太慢/太贵。

我将按如下方式解决问题：

1.  计算并在开始时将所有链接的外部宽度相加。
2.  将所有可用链接附加到“更多”选项卡（克隆），以便它们可以动态显示/隐藏。这比一直创建新（或破坏）DOM 元素要快得多。
3.  将处理程序绑定到`onresize`事件。在处理程序中，获取当前菜单宽度并将其与链接的宽度进行比较。隐藏所有不适合菜单的链接，并在“更多”选项卡中显示对应的链接。如果菜单足够宽，则显示链接也是如此。

这是我的实现：http: [//jsfiddle.net/vNqTF/](http://jsfiddle.net/vNqTF/)

只需调整窗口大小，看看会发生什么。;) 请注意，该解决方案当然仍然可以优化 - 这只是一个示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-30T22:00:32.217

这是一个很好的 jQuery 插件，可以解决这个问题：[https ://github.com/352Media/flexMenu](https://github.com/352Media/flexMenu)

还请务必查看一篇很棒的文章，其中提供了有关如何使用上述 flexMenu 插件组织这种灵活导航的分步说明：[http ://webdesign.tutsplus.com/tutorials/site-elements/a-灵活的响应式导航方法/](http://webdesign.tutsplus.com/tutorials/site-elements/a-flexible-approach-to-responsive-navigation/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T21:39:02.647

我认为我的变体可能是您的起点。我是 jQuery 的新手，我自己也学到了很多东西——所以任何人都可以随时纠正（和改进）我的方法或逻辑:)

我的出发点在这里：http: [//jsfiddle.net/skip405/yN595/1/](http://jsfiddle.net/skip405/yN595/1/)

要查看它的实际效果，您需要调整 Result 窗口的大小，使一行中有 3 或 4 个项目（不是 7 个），然后再次按 Run。将鼠标悬停在更多以查看其余部分。

在这个小提琴中，我计算循环中列表项的宽度，并将其与整个菜单的宽度进行比较。当计算出来的item的宽度变得高于menu的宽度时——我们可以得到此时可见`li`的s数。

**注意：**此代码适用于 document.ready 并且不适用于调整窗口大小。因此，当您现在调整窗口大小时，请按运行。

# javascript - 使用 d3.scale.log() 时地平线图不可见

> ID：11924335
> 
> 赞同：0
> 
> 时间：2012-08-12T17:41:23.807
> 
> 标签：javascript, charts, scale, d3.js

我已经使用默认的线性比例成功绘制了水平线图，它们看起来很棒。不幸的是，当我尝试使用 d3.scale.log() 缩放器时，图表永远不会出现；没有错误，什么都没有。我曾认为问题在于输入数据中的零，但即使我的指标返回单个非零值，也会发生这种情况。这是一个例子：

```
context = cubism.context(), horizon = context.horizon();
horizon.scale(d3.scale.log());
var flatMetric = context.metric(function(start, stop, step, callback) {
  var values = [];

  // convert start & stop to milliseconds
  start = +start;
  stop = +stop;

  while (start < stop) {
    start += step;
    values.push(10);
  }

  callback(null, values);
});
d3.select("body").selectAll(".horizon")
  .data([flatMetric]).enter().append("div")
  .attr("class", "horizon")
  .call(horizon); 
```

如果我只是用线性刻度替换对数刻度，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T21:40:51.627

面积图（其中水平图是一种特殊情况）在对数刻度上没有意义：零是无穷大。在实践中，这表现为渲染错误，因为坐标是 ±Infinity 或 NaN。

如果要使用对数刻度，则需要不带零基线的不同图表类型，例如折线图。比较图表也可能有效。如果您想保留水平图表并且不想使用线性刻度，请尝试使用 sqrt（或更一般地，pow）刻度。

# css - 使元素堆叠不低于

> ID：11924339
> 
> 赞同：2
> 
> 时间：2012-08-12T17:42:09.137
> 
> 标签：css

我无法正确解释它....但是在这里....我希望 DIV 在容器中向左浮动，这样...当它们的总宽度增加容器的宽度时...它们会使一个水平滚动条，但在任何情况下都不会低于另一个……
就像容器的宽度是 500 像素一样；
并且它现在包含 5 个子 DIV，每个 200px 宽度
，当我浮动然后离开时......它们像一行中的 2 个和下一行中的 2 个一样堆叠......例如：
div1 div2
div3 div4
div5
我想要它们是这样的：
div1 div2 div3 div4 div5
带滚动条...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T17:44:13.463

我会建议，而不是浮动它们， set `display:inline-block;`，然后应用于`white-space:nowrap`容器元素。

并确保容器没有固定宽度。（虽然最小宽度是可以的）。

**更新** 1）修复错误（感谢 JOPLOmacedo）2）工作示例：http: [//jsfiddle.net/t9Vnf/](http://jsfiddle.net/t9Vnf/)

# node.js - 在发送之前过滤响应

> ID：11924340
> 
> 赞同：2
> 
> 时间：2012-08-12T17:42:16.513
> 
> 标签：node.js, mongodb, filtering, mongoose

我正在用 mongoose 在 Node.js 和 MongoDB 中编写服务器。

我有一个看起来像这样的用户模型：

```
var User = new Schema({
  username : {
    'type'      : String,
    'trim'      : true,
    'required'  : true,
    'validate': [usernameValidator, 'whitespace_not_allowed']
  },
  avatar : {
    'type'      : String,
    'lowercase' : true,
    'required'  : true
  },
  facebook_id : {
    'type'      : Number,
    'required'  : true,
    'index'     : { unique: true }
  },
  email : {
    'type'      : String,
    'lowercase' : true,
    'required'  : true
  },
  token : {
    'type'      : String,
    'index'     : { unique: true },
    'required'  : true
  }
}); 
```

当客户请求他所有的 Facebook 朋友时，我不想向他发送用户令牌，这几乎适用于每个请求。但是对于某些请求，例如登录，我想发送令牌。

这样做的问题是，在查询数据库并发送令牌其他信息时忘记过滤结果可能是非常致命的。

我现在正在考虑的解决方案是覆盖一个方法（还不知道是哪个），我在其中指定默认情况下应该选择哪些字段。然后在我需要更多的少数情况下，我必须在查询中指定它。这将确保内存滑动不会导致错误的数据被发送出去。

你如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:26:46.333

您可以通过架构中字段定义`token`的属性默认排除结果中的字段：[`select`](http://mongoosejs.com/docs/api.html#schematype_SchemaType-select)

```
token : {
  'type'      : String,
  'index'     : { unique: true },
  'required'  : true,
  'select'    : false
} 
```

# sql - Perl DBI 通过创建 VIEW 修改 Oracle 数据库

> ID：11924341
> 
> 赞同：0
> 
> 时间：2012-08-12T17:43:04.447
> 
> 标签：sql, perl, oracle, dbi

我编写了一个 Perl 脚本来检查 Oracle 数据库中的数据。因为查询过程很复杂我选择在中间创建一个VIEW。使用这个视图可以大大简化代码。

当我使用 Perl 代码从文件开始查询数据库时，Perl 代码运行良好，例如`Perl mycode.pl file_a`. Perl 代码从视图中读取行`file_a`并创建/更新视图，直到输入结束。我取得的结果是完全正确的。

当我同时运行时出现问题

```
perl mycode.pl file_a 
```

和

```
perl mycode.pl file_b 
```

访问同一个数据库。根据我的观察，第一个进程使用的VIEW会被第二个进程修改。这两个过程在同一个观点上交织在一起。

有什么建议可以使这两个过程不相互冲突吗？

查询数据库的 Perl 代码通常是这样的，但是每个实际查询中的细节都比较复杂。

```
my ($gcsta,$gcsto,$cms) = @t; #(details of @t is read from a line in file a or b)

my $VIEWSS = 'CREATE OR REPLACE VIEW VIEWSS AS SELECT ID,GSTA,GSTO,GWTA FROM TABLEA   WHERE GSTA='.$gcsta.' AND GSTO='.$gcsto.' AND CMS='.$cms;

my $querying = q{ SELECT COUNT(*) FROM VIEWSS WHERE VIEWSS.ID=1};

my $inner_sth = $dbh->prepare($VIEWSS);
my $inner_rv  = $inner_sth->execute();

$inner_sth = $dbh->prepare($querying);
$inner_rv  = $inner_sth->execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:24:00.990

你必须

*   只创建一次视图，并在任何地方使用它

*   在 SQL 语句中使用占位符，并通过调用传递实际参数`execute`

这是您的 SQL 的全部范围吗？可能不是，但如果是这样，它确实相当简单。

看看这个重构以获得一些想法。注意是使用一个*here文件*来表达SQL。文本结尾的`END_SQL`标记前后不得有空格。

如果您的要求比这更复杂，请向我们描述，以便我们更好地帮助您

```
my $stmt = $dbh->prepare(<<'END_SQL');
SELECT count(*)
FROM tablea
WHERE gsta = ? AND gsto = ? AND cms= ? AND id = 1
END_SQL

my $rv = $stmt->execute($gcsta, $gcsto, $cms); 
```

* * *

如果您*必须*使用视图，那么您应该`CREATE VIEW`像以前一样使用占位符，并将每组更改都放入一个事务中，这样其他进程就不会干扰。`AutoCommit`这涉及在创建数据库句柄时禁用并在所有步骤完成时`$dbh`添加调用`$dbh->commit`

```
use strict;
use warnings;

use DBI;

my $dbh = DBI->connect('dbi:Oracle:mydbase', 'user', 'pass',
        { AutoCommit => 0, RaiseError => 1 } );

my $make_view = $dbh->prepare(<<'END_SQL');
CREATE OR REPLACE VIEW viewss AS
SELECT id, gsta, gsto, gwta
FROM tablea
WHERE gsta = ? AND gsto = ? AND cms= ? AND id = 1
END_SQL

my $get_count = $dbh->prepare(<<'END_SQL');
SELECT count(*)
FROM viewss
WHERE id = 1
END_SQL

while (<>) {

  my ($gcsta, $gcsto, $cms) = split;

  my $rv = $make_view->execute($gcsta, $gcsto, $cms);
  $rv = $get_count->execute;
  my ($count) = $get_count->fetchrow_array;
  $dbh->commit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T18:39:05.540

观点是相同的还是不同的？

如果视图都相同，则只创建一次，或使用 all_views 表检查它是否存在：http: [//docs.oracle.com/cd/B12037_01/server.101/b10755/statviews_1202.htm#i1593583](http://docs.oracle.com/cd/B12037_01/server.101/b10755/statviews_1202.htm#i1593583)

您可以轻松地创建一个包含您的 pid 的视图，其中 $$ 变量是 pid，但它在计算机之间不会是唯一的，oracle 也有一些唯一的 id，请参阅[http://docs.oracle.com/cd/B14117_01/server .101/b10759/functions150.htm](http://docs.oracle.com/cd/B14117_01/server.101/b10759/functions150.htm)，例如 SESSIONID。

但是你真的需要这样做吗？你为什么不准备一个语句然后执行它？[http://search.cpan.org/dist/DBI/DBI.pm#prepare](http://search.cpan.org/dist/DBI/DBI.pm#prepare)

谢谢，迈克

# mysql - 在mysql数据库中存储天数

> ID：11924346
> 
> 赞同：3
> 
> 时间：2012-08-12T17:43:39.517
> 
> 标签：mysql

我想知道在 mysql 数据库中存储星期几的最有效方法。我有一个每周发生的事件列表，并希望以列表格式将它们作为匹配日的时间表返回。

我不确定哪个是最好的解决方法，因为它不是一个特定的日期，而是一天？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T18:00:24.010

对于您的特定场景，我会使用[ENUM](http://dev.mysql.com/doc/refman/5.5/en/enum.html)类型，它既可读又高效。

```
CREATE TABLE MY_TABLE
(
 -- other fields
  EVENT_DAY ENUM('SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY')
); 
```

ENUM 的好处是您可以编写易于阅读的查询（例如，`WHERE EVENT_DAY = 'FRIDAY'`）而不会放弃性能，因为 MySQL 在内部使用数字表示有效地存储数据。

* * *

只是为了扮演魔鬼的拥护者，Chris Komlenic 写了一篇非常有趣[的帖子](http://komlenic.com/244/8-reasons-why-mysqls-enum-data-type-is-evil/)，推荐参考表而不是枚举。无论如何，我认为您的问题符合他的文章“何时可以使用枚举的标准”。一个星期几的模型参考表听起来有点矫枉过正（我会选择`TINYINT`第二个选项）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T18:15:54.233

您可以将工作日及其标准 ODBC 索引号存储在表中。（始终使用 INNODB 引擎。）

```
create table weekdays (
  weekday_num integer primary key,
  day_of_week char(3) not null,
  unique (day_of_week)
);

-- Values correspond to return values from the dayofweek() function.
insert into weekdays values (1, 'Sun');
insert into weekdays values (2, 'Mon');
insert into weekdays values (3, 'Tue');
insert into weekdays values (4, 'Wed');
insert into weekdays values (5, 'Thu');
insert into weekdays values (6, 'Fri');
insert into weekdays values (7, 'Sat'); 
```

如果应用程序需要在列表中显示这些天数和它们的索引，它们只需在数据库中查询正确的值。（或者通过查询数据库生成代码`make <your_program_name>`。）

然后创建一个重复事件表。

```
create table recurring_events (
  event_name varchar(20) primary key,
  day_of_week char(3) not null,
  foreign key (day_of_week) references weekdays (day_of_week)
);

insert into recurring_events values
('Trash pickup', 'Mon'),
('Bookmobile', 'Mon'),
('Grocery store', 'Wed'),
('Tutoring', 'Fri'); 
```

使用连接意味着 dbms 应该能够避免为表中的每一行评估 dayofweek()。

```
select e.*
from recurring_events e
inner join weekdays w on e.day_of_week = w.day_of_week
and dayofweek(current_date) = w.weekday_num; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T17:48:34.437

另一种选择是使用该`ENUM`字段以整数或字符串形式存储星期几。取决于您的特定实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T17:45:41.480

将其存储为正常的日期时间，并使用该函数[`DAYOFWEEK()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_dayofweek)确定它是星期几。

例如，假设您要运行一个查询，该查询将返回应该在星期一发生的所有行：

```
SELECT event
FROM scheduled_events
WHERE DAYOFWEEK(event_datetime) = 2; 
```

# sql-server - 如何将欧洲日期作为参数传递给存储过程

> ID：11924347
> 
> 赞同：0
> 
> 时间：2012-08-12T17:43:45.227
> 
> 标签：sql-server, date, stored-procedures, parameter-passing

使用 SQL Server 2012 和新的日期类型（不是 dateTime），我创建了下一个过程：

```
CREATE PROC Test(@StartDate date ,@EndDate date)    
AS    
DECLARE @Temp TABLE([ID] int, [Date] date)    
INSERT INTO @Temp SELECT 1, CONVERT(date,'31/12/2012',103)    
INSERT INTO @Temp SELECT 2, CONVERT(date,'01/10/2012',103)    
INSERT INTO @Temp SELECT 3, CONVERT(date,'01/01/2012',103)    
SELECT * FROM @Temp WHERE [Date] BETWEEN @StartDate AND @EndDate 
```

当我运行这个存储过程时，我得到下一个错误，指示参数的日期格式：

```
'/' 附近的语法不正确。 

```

请问应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T17:46:50.510

一方面，你的约会不应该有一个`/`。但它也需要用引号括起来。尝试：

```
EXEC dbo.Test @StartDate = '20120101', @EndDate = '20120131'; 
```

它需要用引号括起来的原因是，如果您不使用引号，您的“日期”将被解释为数学表达式，例如：

```
01/01/2012 = 1 divided by 1 divided by 2012 
```

您的日期不应该包含的原因`/`是因为`m/d/y`并且`d/m/y`是不安全的格式，可以根据语言和其他设置进行不同的解释。

最后，如果您从 C# 调用此过程，为什么要传递字符串而不是正确键入的参数？

# java - 默认情况下，命令行 java 应用程序中未处理的异常在哪里打印？到标准输出或标准错误？

> ID：11924348
> 
> 赞同：4
> 
> 时间：2012-08-12T17:43:49.593
> 
> 标签：java, exception-handling

标题包含整个问题。我也将不胜感激包含答案的文档链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T20:03:56.407

在 Java 中，未处理的异常会渗透到抛出它们的线程的顶部。Java 允许您安装[线程级未捕获异常处理程序](http://docs.oracle.com/javase/6/docs/api/index.html?java/lang/Thread.UncaughtExceptionHandler.html)。据我所知，没有指定默认异常处理程序时的行为不是由 Java 规范定义的。Sun 的 JDK 观察到的默认行为是将异常消息及其堆栈跟踪打印到 stderr。

# c++ - 用普通文件嵌入.exe

> ID：11924354
> 
> 赞同：-5
> 
> 时间：2012-08-12T17:44:26.963
> 
> 标签：c++, c, windows, security

我如何将 .exe 嵌入或关联到普通文件中，例如 .jpeg 或任何视频等？我想将普通文件的打开与可执行程序的执行联系起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:56:43.417

你试图做的事情是**不可能**的。如果它确实发生了，它是通过利用读取文件的程序中的缺陷来发生的。这可能会发生（当程序是用 C 或 C++ 编写时，这更常见）通过在标头中存储超出范围的值并希望程序在将它们用作内存中的偏移量之前不验证它们，或者（这是在高级语言中更常见）通过利用格式有意允许的某些过度生长的功能中的逻辑错误（如嵌入 javascript）。

除此之外，我认为任何进一步的答案都与 SO 无关。这不是获取编写恶意软件帮助的网站。

# hibernate - Grails 一对多映射级联

> ID：11924355
> 
> 赞同：0
> 
> 时间：2012-08-12T17:44:28.740
> 
> 标签：hibernate, grails, relational-database

这是我的情况：

一个名为 League 的类和一个名为 Team 的类之间的关系 1-N。

一个联赛可以有多支球队。在单元测试中，我尝试将 A 队分配到联赛 1，而将同一队 A 分配到联赛 2。

发生的情况是两个联赛都指代同一支球队 A。但球队 A 只指联赛 2。

删除联赛 1 对 A 队的引用的最佳方法是什么？

**编辑：**

```
class League {

    static hasMany = [ teams: Team, schedules: Schedule ]

    String name
    ...
}

class Team {
    static belongsTo = [ league: League ]
    ...
} 
```

联赛测试

```
def league1 = new League( name: "Serie A" )
def league2 = new League( name: "Premier League" )

def team = new Team( name: 'AC Milan', stadium: 'San siro', nation: 'Italy' )

league1.addToTeams( team )
assert league1.numOfTeams() > league2.numOfTeams() //true

league2.addToTeams( team )
assert league1.numOfTeams() == league2.numOfTeams() //true

assert team.league == league2 //true
assert team.league == league1 //false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:12:11.347

持久性的工作始终属于拥有域类。

在您的情况下， League 类负责持久性，即它是拥有类。因此，要删除联赛 1 对球队 A 的引用，您需要在联赛对象上调用适当的方法。在您的情况下，这将变为：

League1.removeFromTeams(team) //team 是需要从所需联赛中移除的 Team 对象

# vim - 如何重新映射

> ID：11924358
> 
> 赞同：2
> 
> 时间：2012-08-12T17:45:09.663
> 
> 标签：vim, vi, macvim

我想使用以下代码快速从插入模式 -> 命令模式。问题是它似乎没有注册我的密钥。我试过控制（没有任何反应），我也试过命令（D），它只是说拼写检查没有激活。

```
" Quick command mode from insert
imap <C-;> <esc>: 
```

我该怎么做呢？有没有我不知道的更简单的 vim 方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T17:58:38.093

某些`Ctrl`和弦无法映射，包括`Ctrl-;`.

此常见问题解答中提到了[这一点](http://vimhelp.appspot.com/vim_faq.txt.html#faq-20.5)，另请参阅[Vim 常见问题解答](http://vimdoc.sourceforge.net/htmldoc/vimfaq.html)：

> 20.4。我无法为`<xxx>`密钥创建映射。怎么了？
> 
> 首先确保将密钥传递给 Vim。在插入模式下，按`Ctrl`- ，`V` 然后按所需的键。您应该会看到与该键对应的键码。如果您确实看到了密钥代码，那么您可以使用以下命令为密钥创建映射：
> 
> ```
> :map <C-V><xxx> <your_command_to_be_mapped> 
> ```
> 
> 有关更多信息，请阅读
> 
> ```
> :help map-keys-fails
> :help :map-special-keys
> :help key-codes 
> ```

`Ctrl-V`如果您在使用另一个组合键时遇到此问题，请记住有关尝试打印字符的提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:00:22.713

我试过了，但它似乎不起作用，正如 pb2q 所说，它只是无法映射。但是还有其他方法可以使用 Ctrl 组合键进行转义。

例如，您还可以使用以下按键退出插入模式：

1.  `Ctrl-[`
2.  `Ctrl-c`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T19:54:29.187

在 OS X（我认为是 Lion 及更高版本）上，您可以`alt - ;`使用[此方法](https://stackoverflow.com/a/11904947/1000282)进行映射，`alt - ;`在 OS X 输出 ç 上，您可以进行映射。

但在 MacBook 上，我更喜欢使用[PCKeyboardHack](http://pqrs.org/macosx/keyremap4macbook/pckeyboardhack.html.en)映射`caps lock`到`esc`. 或者在 Windows 上，使用[我自己创建的工具，](http://oblita.com/Interception.html)甚至[Ctrl2Cap](http://technet.microsoft.com/en-us/sysinternals/bb897578.aspx)。

**编辑**

哦，对不起，我以为你想切换到普通模式，这就是我谈到`caps lock`映射的原因。

# java - 在开发 JAX-WS webservice 中去除注解并添加 xml

> ID：11924362
> 
> 赞同：2
> 
> 时间：2012-08-12T17:45:43.707
> 
> 标签：java, web-services, jax-ws

我是 web 服务世界的新手，我有一个疑问，因为我正在开发 JAX-WS 下面的 web 服务生产者和客户端，但我正在使用注释，你能告诉我如何在不使用的情况下开发相同的程序使用 XML ..本身的注释的数量..

**创建 Web 服务端点接口**

```
import javax.jws.WebMethod;
import javax.jws.WebService;
import javax.jws.soap.SOAPBinding;
import javax.jws.soap.SOAPBinding.Style;

//Service Endpoint Interface
@WebService
@SOAPBinding(style = Style.RPC)
public interface HelloWorld{

    @WebMethod String getHelloWorldAsString(String name);

} 
```

**创建 Web 服务端点实现**

```
import javax.jws.WebService;

//Service Implementation
@WebService(endpointInterface = "com.mkyong.ws.HelloWorld")
public class HelloWorldImpl implements HelloWorld{

    @Override
    public String getHelloWorldAsString(String name) {
        return "Hello World JAX-WS " + name;
    }

} 
```

**创建端点发布者**

```
import javax.xml.ws.Endpoint;
import com.mkyong.ws.HelloWorldImpl;

//Endpoint publisher
public class HelloWorldPublisher{

    public static void main(String[] args) {
       Endpoint.publish("http://localhost:9999/ws/hello", new HelloWorldImpl());
    }

} 
```

**Java Web 服务客户端通过 Wsimport 工具**

```
wsimport -keep http://localhost:9999/ws/hello?wsdl 
```

它将生成必要的客户端文件，这取决于提供的 wsdl 文件。在这种情况下，它将生成一个接口和一个服务实现文件。

最后是使用生成的存根类的主类..

```
package com.mkyong.client;

import com.mkyong.ws.HelloWorld;
import com.mkyong.ws.HelloWorldImplService;

public class HelloWorldClient{

    public static void main(String[] args) {

        HelloWorldImplService helloService = new HelloWorldImplService();
        HelloWorld hello = helloService.getHelloWorldImplPort();

        System.out.println(hello.getHelloWorldAsString("mkyong"));

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T00:41:33.657

我在遇到同样的问题时遇到了这个问题......

终于在这里找到了如此需要的解释：http: [//jonas.ow2.org/JONAS_5_1_1/doc/doc-en/pdf/jaxws_developer_guide.pdf](http://jonas.ow2.org/JONAS_5_1_1/doc/doc-en/pdf/jaxws_developer_guide.pdf)

寻找：覆盖注释

# c# - 指数超出范围

> ID：11924364
> 
> 赞同：-1
> 
> 时间：2012-08-12T17:46:05.137
> 
> 标签：c#

我收到这个错误...

> *指数超出范围。必须是非负数且小于集合的大小。
> 参数名称：`index`.*

在指定位置的代码中。

```
List<int>[] tetangga = new List<int>[this.observasi];
for (int i = 0; i < this.observasi; i++) 
{
    tetangga[i] = new List<int>();
    for (int j = 0; j < this.observasi; j++) 
    {
        if (tableWeight[i, j] > 0) 
        {
            tetangga[i].Add(j);
        }
    }
}

this.dataTable.ColumnCount = 2;
this.dataTable.Columns[0].HeaderCell.Value = "REGION";
this.dataTable.Columns[1].HeaderCell.Value = "REGION NEIGHBOR";
this.dataTable.Columns[1].SortMode = DataGridViewColumnSortMode.NotSortable;
this.dataTable.Columns[0].SortMode = DataGridViewColumnSortMode.NotSortable;
this.dataTable.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.AllCells;

int jlhRow = 0;
for (int i = 0; i < this.observasi; i++)
{
    jlhRow = jlhRow + tetangga[i].Count;
}
this.dataTable.RowCount = jlhRow;

int row = 0;
for (int k = 0; k < this.observasi; k++)
{
    this.dataTable[0, row].Value = this.nameRegion[k];  // <-- error occurs here
    for (int l = 0; l < tetangga[k].Count; l++)
    {
        this.dataTable[1, row].Value = this.nameRegion[tetangga[k][l]];
        row++;
    }
} 
```

谁能向我解释为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:51:33.803

你的问题在这里

```
 for (int j = 0; j < this.observasi; j++) 
    {
        if (tableWeight[i, j] > 0) 
        {
            tetangga[i].Add(j);
        }
    } 
```

我们怎么知道 tableWeight 的第二维是什么？我希望它不会达到 this.observasi。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:51:47.717

在循环的开头，在行之前放置一个断点：

```
this.dataTable[0, row].Value = this.nameRegion[k]; 
```

检查`dataTable`并`nameRegion`在调试器中，您可能会回答自己的问题。集合可能不包含您指定的索引处的元素。

# java - 我应该学习摇摆来制作 GUI，还是应该简单地使用任何 IDE

> ID：11924365
> 
> 赞同：3
> 
> 时间：2012-08-12T17:46:08.480
> 
> 标签：java, swing

我想知道从长远来看，什么对我有帮助，比如行业的趋势是什么？是否每个人都使用 GUI builder，或者就像 java 不普遍用于 GUI 并且主要充当后台操作语言一样？请指导我..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T17:48:45.323

`IDE`可能不足以设计所有东西（但它对开发有很大帮助），同时学习 API 和 IDE 总是更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T17:49:08.403

我会学习 Swing，因为了解它的工作原理很有用。至于实际生成 GUI，我会使用 IDE builder，因为它更快。您可能会发现了解如何手动修复生成的代码很有用，因此了解 Swing 会很有用。通常您想自定义部分 GUI 的工作方式，您必须直接使用该语言来执行此操作。IDE builder 可以成为快速构建*大部分*GUI 的有用工具。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T17:54:52.877

这只是评论，我不是专家。我对 Java 的建议是学习如何在 swing 中手动操作。但是，我最近使用的是最新的 Eclipse Juno 中包含的 Windows Builder Pro。它会创建代码，因此您可以毫不妥协地返回直接编码。肯定有更好的，但对于我的小而简单的应用程序可以节省我的时间。 [https://developers.google.com/java-dev-tools/wbpro/userinterface/](https://developers.google.com/java-dev-tools/wbpro/userinterface/) 它包含在 Juno 中，只需右键单击 JFrame 类型的类并选择使用 Windows Builder 编辑。您可以使用 IDE 工具，创建代码，然后查看它并根据需要进行增强或添加。但是对于初学者，您可以立即添加完整菜单、按钮和多个控件，同时维护单个 .java 文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-12T17:54:00.813

我建议您学习 swing，因为 GUI 构建器的功能有限。但是，如果您正在开发简单的应用程序，则可以使用 GUI builder。我更喜欢编写自己的 UI

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-12T18:08:50.767

您绝对应该选择 Swing。一开始使用 IDE 似乎很容易，但您必须记住它的限制性太强。如果你最终学习了挥杆，你可以把事情提升到一个新的水平，如果你明白我的意思的话。这还取决于您是否喜欢编写代码，因为如果您不喜欢，那么您自然不会对 Swing 感兴趣。[这是](http://docs.oracle.com/javase/tutorial/uiswing/)一个教程。希望能帮助到你。:)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-13T01:38:27.773

如果您想成为一名专业人士，您需要掌握 Swing 及其所有细微差别，例如 LookAndFeel 和 Layouts。 `NullLayout`是我开始时最喜欢的布局，但你肯定需要`GridLayout`学习`GridBagLayout`。掌握行为和侦听器模型需要工作，但对于任何中级及以上的 GUI 程序员来说都是必须的。

IDE 构建器非常适合入门，但我对信任他们生成的代码持怀疑态度，特别是如果您必须亲自对此负责。即使您必须使用 IDE WSIWYG，您最好确保您知道它在做什么。

# php - php函数不会循环遍历所有用户，只是第一个用户

> ID：11924369
> 
> 赞同：0
> 
> 时间：2012-08-12T17:46:31.283
> 
> 标签：php, sql

以下php函数仅适用于一条用户记录，而不是weekly_email_f1列中值为“1”的所有用户记录，有什么想法吗？

```
function getSummaryEmailInfo() {
    $sql = "
      SELECT u.id, u.master_id, u.email
      FROM user AS u
      WHERE u.weekly_email_fl = 1
    ";
    $query = $this->db->query( $sql );
    $users = $query->result_array();

    foreach ( $users as &$user ) {
      $user_id = ( $user['master_id'] == '0' ) ? $user['id'] : $user['master_id'];

      $sql = "
        SELECT ui.custom_name
        FROM user_item AS ui
        WHERE ui.user_id = '" . $user_id . "'
        AND added_to_list_dt IS NOT NULL
        ORDER BY added_to_list_dt DESC
        ;
      ";
      $query = $this->db->query( $sql );
      $user['s_list'] = $query->result_array();
    }
    return $users;
  } 
```

有多个用户 week_email_f1 = 1。我认为 result_array(); 的方式有问题。正在填充，但无法弄清楚，但...

```
function getUserInfo( $user_id ) {
    $query = $this->db->query( "
      SELECT name AS first_name, email, zip_code, weekly_email_fl
      FROM user
      WHERE id = '" . $user_id . "'
    ;" );
    if ( $query->num_rows() > 0 ) {
      $results = $query->result_array();
      $results = $results[0];
    } else {
      $results = null;
    }
    return $results;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T23:14:29.200

```
while($users = $query->result_array()) {
    /* You can use $users['master_id'] here */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:51:54.960

1.  只有 1 个用户 week_email_f1 = 1
2.  $query->result_array(); 仅返回第一/最后/一行。

# android - Android 实时渲染条形图库

> ID：11924374
> 
> 赞同：0
> 
> 时间：2012-08-12T17:47:14.753
> 
> 标签：android, charts, data-acquisition, stripchart

我正在尝试为我的 android 应用程序找到最好的图表库，该应用程序从数据采集设备接收实时数据（每秒最多支持 800 个样本）。我需要显示一个带有一些附加功能的实时移动条形图，例如放大和缩小以及追溯图表。我查看了一些开源库，例如`achartengine`, `afreechart`，`graphView`但由于缺乏足够的示例和信息，我似乎无法真正决定应该使用哪一个。任何有用的链接？有什么推荐吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:47:16.190

我建议您为您的项目尝试 AChartEngine。有关一些教程，请参阅[此内容。](https://stackoverflow.com/questions/5828616/can-any-one-suggest-me-some-good-tutorials-on-achartengine-for-android-developme)

还有另一个相关的[线程](https://stackoverflow.com/questions/424752/any-good-graphing-packages-for-android)。

# wordpress - WPMS 域映射和永久链接错误

> ID：11924379
> 
> 赞同：0
> 
> 时间：2012-08-12T17:47:36.113
> 
> 标签：wordpress, permalinks, wpmu

我最近开始使用 Wordpress MS（新的 WPMU）。我刚刚安装了所有东西，并且有几个不同的域在同一个 Wordpress MS 安装下工作。

我正在使用 WordPress MU 域映射插件来处理不同的域名。

我遇到的问题是使用永久链接。我希望 URL 显示类似这样的内容[http://blakebullis.me/sample-post/](http://blakebullis.me/sample-post/) ...但是每当我将永久链接设置更改为对 SEO 更友好时，我都会收到 404 错误。该页面仅在我使用默认永久链接设置[http://blakebullis.me/?page_id=2时才能正常工作](http://blakebullis.me/?page_id=2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:53:33.897

问题已解决。我用这篇文章弄清楚了[http://wordpress.org/support/topic/wordpress-mu-domain-mapping-plugin-052-mysteriously-still-not-working](http://wordpress.org/support/topic/wordpress-mu-domain-mapping-plugin-052-mysteriously-still-not-working)

在我的 /etc/apache2/sites-available/[domainname] ... 我将配置的“AllowOverride None”更改为“AllowOverride All”

# android - 来自广播接收器的短信接收器

> ID：11924388
> 
> 赞同：0
> 
> 时间：2012-08-12T17:48:53.187
> 
> 标签：android

我正在构建一个简单的应用程序来接收在平台上`SMS`使用，但它根本 **不接收短信**......它不显示？`broadcast receiver``ICS`**`Toast`**

 **我有 3 节课：

1.  MessageActivity：这是主类
2.  SimpleSmsRecever：接收`sms`
3.  回复：回复

我的主要文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.message"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MessageActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <receiver android:name=".SmsReceiver" >
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver>
    </activity>
    <activity android:name=".Reply" >
    </activity>
</application>
<uses-permission android:name="android.permission.READ_SMS" />
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS" /> 
```

我的接收短信代码是：

```
public class SmsReceiver extends BroadcastReceiver {

private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
private static final String TAG = "SMSBroadcastReceiver";
private static String sender, body;
private static int flag = 0;

@Override
public void onReceive(Context context, Intent intent) {

    MessageActivity mvt = null;

    Log.i(TAG, "Intent recieved: " + intent.getAction());

    if (intent.getAction() == SMS_RECEIVED) {
        Bundle bundle = intent.getExtras();
        if (bundle != null) {
            Object[] pdus = (Object[]) bundle.get("pdus");
            final SmsMessage[] messages = new SmsMessage[pdus.length];
            for (int i = 0; i < pdus.length; i++) {
                messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
            }

            if (messages.length > -1) {
                flag = 1;
                sender = messages[0].getOriginatingAddress();
                body = messages[0].getMessageBody();
                Log.i(TAG,
                        "Message recieved: " +   messages[0].getMessageBody());
                Toast.makeText(context, messages[0].getMessageBody(),
                        Toast.LENGTH_SHORT).show();

            }
        }
    }
}
} 
```

请帮忙，我有点感觉它与`ICS`. 我在谷歌搜索时在某处读到它......谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-28T08:52:45.463

我不确定这个解决方案，但会覆盖 onPause 和 onResume 方法。**

# dll - JNI UnsatisfiedLinkError-如何正确加载库？

> ID：11924395
> 
> 赞同：0
> 
> 时间：2012-08-12T17:50:10.747
> 
> 标签：dll, java-native-interface, loadlibrary, unsatisfiedlinkerror

我正在尝试使用 CardScan SDK 中的 Java 示例数据库程序。

我正在处理位于 Java/JNI 和 Java/Database 中的文件。该程序必须使用 32 位 JRE 运行。通过卸载 Java 并安装 32 位版本，然后重新添加 Java 的系统路径，我能够在 64 位机器上执行此操作。我可以通过双击 SDKData.bat 文件成功运行程序并与 CardScan 数据库文件 (.cdb) 交互，但是当我打开源文件进行编辑并编辑 Java.library.path 以包含所需的库 (CRTK_JNI .dll），我到处都得到 UnsatisfiedLinkErrors：

> 线程“主”java.lang.UnsatisfiedLinkError 中的异常：sdkdata.CRTK.CRTK.CRTK_Init (Native Method)处的 sdkdata.CRTK.CRTK_Init ([I)
> I。(CRTK.java:239)
> sdkdata.SDKData.( SDKData.java:97)
> 在 sdkdata.SDKData.main(SDKData.java:643)
> Java 结果：1

大概这是因为库没有正确加载而发生的。

我需要做什么才能满负荷运行和编辑程序（CRTK_JNI 中的所有本机功能都正常工作）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T10:07:50.890

> 大概这是因为库没有正确加载而发生的。

相反。库加载完成。您不是从`System.load()/loadLibrary()`调用中得到的，而是在调用本机方法时遇到错误，该方法应该具有签名：

```
package sdkdata;

public class CRTK
{
  public native int CRTK_Init(int[]);
} 
```

所以它不存在，或者您在没有重新生成 .h 和 .c 文件的情况下更改了签名，或者您以其他方式手动破坏了声明。

发布您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:04:58.107

澄清一下，CardScan API 正式不支持此 Java 示例程序 - 尝试将 API 与仅依赖于实验性实现的不受支持的语言一起使用是个坏主意。我最终使用了一种受支持的语言（Visual Basic）来处理 SDK；如果看到这个问题的人碰巧在使用 CardScan API 时遇到困难，[这里](https://github.com/darylsew/infusionsync/blob/master/infusionsync/Module1.vb)是我在 Github 上的 VB 实现。

# facebook - 使用图形 API 获取朋友应用用户

> ID：11924397
> 
> 赞同：0
> 
> 时间：2012-08-12T17:50:15.100
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我想通过
我尝试使用的 Graph API 来获得朋友应用程序用户，`me/friends?fields=installed`但我得到了我所有的朋友。也许，我这里有些不对劲。
请告诉我使用 Graph API 获得朋友应用用户的任何方法。我不知道在 Facebook SDK 3.0 中我可以更轻松地获得该列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:27:36.063

**您可以使用FQL**而不是 Graph API获取您的应用程序用户的朋友列表，如下所示：

```
SELECT uid FROM user
WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())
AND is_app_user = 1 
```

# javascript - 如果页面不存在则加载特殊页面 (404)

> ID：11924398
> 
> 赞同：1
> 
> 时间：2012-08-12T17:50:23.630
> 
> 标签：javascript, jquery, load

我有一个小函数（如下），它需要一个参数来确定要加载的内容。有没有办法让 .load() 遇到 404 时有一个“else”或一个后备？

```
function start(page,last){
$("#area").load("pages/"+page+".inc.php");
loading();
} 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T17:52:10.647

您可以指定加载完成时要执行的函数。

取自[**文档**](http://api.jquery.com/load/)：

```
$("#success").load("/not-here.php", function(response, status, xhr) {
  if (status == "error") {
    var msg = "Sorry but there was an error: ";
    $("#error").html(msg + xhr.status + " " + xhr.statusText);
  }
}); 
```

使用您的代码，它看起来类似于：

```
function start(page,last){
    $("#area").load("pages/"+page+".inc.php", function(response, status, xhr) {
        if (status == "error") {
            // don't load as an error occured,...do something else...
        }
        else{
            loading();
        };
    });
} 
```

您可以查看链接文档以获取有关可能的返回值和错误的更多详细信息。事实上，文档底部的演示显示了处理 404。

`xhr.status`样本中包含错误号`404`和`xhr.statusText`is `Not Found`。

这意味着您可以检查特定数字：

```
function start(page,last){
    $("#area").load("pages/"+page+".inc.php", function(response, status, xhr) {
        if (status == "error" && xhr.status == ""404) {
            // a 404 occurred...
        }
        else{
            loading();
        };
    });
} 
```

见[**演示**](http://jsfiddle.net/frKrX/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T17:52:28.183

[`.load()`](http://api.jquery.com/load/)有 responseText 和 textStatus 参数告诉你它什么时候成功，所以你可以用它来检查它是否失败。成功的响应将生成“成功”或“未修改”，而错误生成“错误”。

```
$("#success").load("/not-here.php", function(response, status, xhr) {
  if (status == "error") {
    var msg = "Sorry but there was an error: ";
    $("#error").html(msg + xhr.status + " " + xhr.statusText);
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T17:52:39.717

在[`ajaxSetup`](http://api.jquery.com/jQuery.ajaxSetup/)您可以定义状态代码，如

```
$.ajaxSetup({
  statusCode: {
    404: function() {
      alert("page not found");
      //load the 404 page here
    }
  }
}); 
```

# java - 在 Java 桌面应用程序中嵌入 Flash？

> ID：11924400
> 
> 赞同：0
> 
> 时间：2012-08-12T17:51:13.513
> 
> 标签：java, flash

我正在构建一个 Java 应用程序，我希望能够嵌入一个 Flash 播放器。这可能吗？不仅仅是一个 Flash 视频文件，我还想嵌入一个完整的播放器，就像我们在网络上看到的那样。这可能吗？如果是这样，它是如何完成的？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:07:30.400

是的，这是可能的，但您必须使用外部库。就像[这个](http://www.javalobby.org/java/forums/t105291.html)让你有一个 Flash Player 的。

# extjs4 - 如何控制 ExtJS 手风琴的工具图标

> ID：11924403
> 
> 赞同：0
> 
> 时间：2012-08-12T17:51:29.083
> 
> 标签：extjs4

如果我使 TreePanel 可折叠，则工具图标是上下双箭头。

在手风琴中，它们切换为 +/-。

如何使用手风琴的双箭头？

（版本 4.1.1）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T19:03:59.407

好的，我找到了答案：

```
/* Undo the accordion's bizarre switch to +/- */
.x-accordion-hd .x-tool-expand-top,
.x-accordion-hd .x-tool-collapse-top {
    background-position: 0 -210px;
}

.x-accordion-hd .x-tool-expand-bottom,
.x-accordion-hd .x-tool-collapse-bottom {
    background-position: 0 -195px;
} 
```

由于 Sencha 的设计师所熟知的原因，手风琴的样式总是带有 +/-。上面修复了它。我确信这是脆弱的，应该用他们的主题 CSS 编译器完成的东西来代替。

# c# - ExtendedVisualStateManager.GoToElementState 应该如何使用

> ID：11924404
> 
> 赞同：2
> 
> 时间：2012-08-12T17:51:30.220
> 
> 标签：c#, silverlight, windows-phone-7, visualstatemanager

我有以下视觉状态定义：

```
<VisualStateManager.CustomVisualStateManager>
    <ec:ExtendedVisualStateManager/>
</VisualStateManager.CustomVisualStateManager>
<VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="Highlight">
        <VisualState x:Name="Active">
            <Storyboard>
                <ColorAnimation Duration="0"
                                To="{StaticResource PhoneAccentColor}" 
                                Storyboard.TargetProperty="(Shape.Stroke).(SolidColorBrush.Color)"
                                d:IsOptimized="True"/>
            </Storyboard>
        </VisualState>
        <VisualState x:Name="Inactive"/>
    </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

还有一些矩形：

```
<Rectangle x:Name="A" Width="10" Height="10" Stroke="#00000000" StrokeThickness="4" />
<Rectangle x:Name="B" Width="10" Height="10" Stroke="#00000000" StrokeThickness="4" />
<Rectangle x:Name="C" Width="10" Height="10" Stroke="#00000000" StrokeThickness="4" />
<Rectangle x:Name="D" Width="10" Height="10" Stroke="#00000000" StrokeThickness="4" /> 
```

在我的布局根堆栈面板中。

我想将`Active`状态应用于矩形 A 和 C。这感觉像是一份工作`ExtendedVisualStateManager.GoToElementState`：

```
ExtendedVisualStateManager.GoToElementState(this.A, "Active", true);
ExtendedVisualStateManager.GoToElementState(this.B, "Inactive", true);
ExtendedVisualStateManager.GoToElementState(this.C, "Active", true);
ExtendedVisualStateManager.GoToElementState(this.D, "Inactive", true); 
```

但是，这不起作用 - 动画没有`Storyboard.TargetName`定义。

如何获取`GoToElementState`故事板中传递给的第一个参数，以便将动画附加到它？

# yui - 删除 YUI 富文本编辑器中的默认示例文本

> ID：11924410
> 
> 赞同：0
> 
> 时间：2012-08-12T17:51:52.130
> 
> 标签：yui

有没有办法删除富文本编辑器中的示例文本？

基本上，我有一个富文本编辑器，并有一个“示例文本”作为默认值，我希望在单击编辑器时删除示例文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:40:08.157

```
Y.one('#some-button').on('click', function (e) {
    Y.one('#some-textarea').setHTML('');
}); 
```

# c# - 设置对象时如何维护绑定？

> ID：11924411
> 
> 赞同：0
> 
> 时间：2012-08-12T17:51:52.483
> 
> 标签：c#, wpf, data-binding

我正在弄清楚 WPF 中的绑定，并遇到了对象绑定的问题。

我有一个组合框，其中 itemsource 设置为用户列表

```
ICollection<User> users = User.GetAll();
cmbContacts.ItemsSource = users; 
```

我的 UI 中还有一个对象，其中包含所选用户。

```
public partial class MainWindow : Window
{

    private User selectedUser = new User();

    public MainWindow()
    {
        InitializeComponent();
        ReloadContents();

        Binding b = new Binding();
        b.Source = selectedUser;
        b.Path = new PropertyPath("uFirstName");
        this.txtFirstName.SetBinding(TextBox.TextProperty, b);
   } 
```

在我的组合框的 SelectChanged 方法中......

```
selectedUser = (User)e.AddedItems[0]; 
```

但是，文本框没有更新！我可以通过将绑定代码移动到组合框 SelectChanged 方法来验证我的绑定是否有效

```
selectedUser = (User)e.AddedItems[0];    
Binding b = new Binding();
b.Source = selectedUser;
b.Path = new PropertyPath("uFirstName");
this.txtFirstName.SetBinding(TextBox.TextProperty, b); 
```

现在文本框更新正常。这似乎是不正确的做事方式。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:02:36.647

在您的代码中，我看到一个错误 - 当您设置字段 selectedUser 时，您没有通知此数据已更改。您的示例应如下所示：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{ 
    private User selectedUser;

    public User SelectedUser 
    {
       get 
       {
           return selectedUser;
       }
       set
       {
           selectedUser = value;
           NotifyPropertyChanged("SelectedUser");
       }
    }

    public MainWindow() 
    { 
        InitializeComponent(); 
        ReloadContents(); 

        // Now the source is the current object (Window), which implements
        // INotifyPropertyChanged and can tell to WPF infrastracture when 
        // SelectedUser property will change value
        Binding b = new Binding(); 
        b.Source = this; 
        b.Path = new PropertyPath("SelectedUser.uFirstName"); 
        this.txtFirstName.SetBinding(TextBox.TextProperty, b); 
   } 

   public event PropertyChangedEventHandler PropertyChanged;

   private void NotifyPropertyChanged(string info)
   {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
   }
} 
```

并且不要忘记现在您需要为属性设置新值，不要使用字段，因此 SelectChanged 应该如下所示：

```
SelectedUser = (User)e.AddedItems[0]; 
```

# .net - tcplistener 绑定所有本地地址？

> ID：11924413
> 
> 赞同：4
> 
> 时间：2012-08-12T17:51:56.290
> 
> 标签：.net, sockets, tcplistener

我有一个我正在玩的服务器应用程序。我将地址绑定到 127.0.0.1 ，直到我想从 VM 内的客户端连接之前它都很好。所以我将它绑定到 192... 现在我的测试都连接到 127... 无法连接。我知道我可以使用 Any 但我不希望外部互联网连接（我知道我可以使用防火墙但我不想使用 ATM）。

有没有办法我可以指定任何本地地址，以便 192.xxx 和 127.0.0.3 工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T17:59:45.630

指定本地地址时，请使用[IPAddress.Any](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.any.aspx)而不是显式地址。请参阅之前回答的问题：[TcpListener: How to listen on specific port on all interfaces?](https://stackoverflow.com/questions/7238096/tcplistener-how-to-listen-on-specific-port-on-all-interfaces)

# python - 如何在 Django 中每天一次在准确的时间执行命令？

> ID：11924414
> 
> 赞同：4
> 
> 时间：2012-08-12T17:52:09.230
> 
> 标签：python, django, django-models, scheduled-tasks, pytz

我正在开发一个基于 Django Web 的项目，在该项目中我需要构建一个按以下顺序工作的应用程序：

1）用户打开一个页面，他需要在其中输入a`command`和a`time`

2) Django 应用程序将在每天的给定时间执行该命令，直到用户退出调度程序（默认情况下为 True）

我面临的问题是：

1）我应该如何一次但每天执行命令。为了节省命令和时间，我在我的`models.py`

```
class commands(models.Model):
    username = models.ForeignKey(User)
    command = models.CharField(max_length=30)
    execution_time = models.DateField() 
```

我有相同的时间，但我没有在每天的给定时间以正确的方式执行它

有可能与`pytz`图书馆有关吗？

为了执行我正在使用`paramiko`库的命令

PS：我不想使用任何外部库

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-12T18:01:03.473

虽然您可以让您的 django 应用程序在系统上添加和删除 cron 作业，但另一种更 django-ish 的方法是使用[Celery](http://pypi.python.org/pypi/django-celery/)。它是一个可以运行同步和异步任务的任务队列系统。

Celery 的一项特定功能是计划任务：[http ://packages.python.org/celery/userguide/periodic-tasks.html](http://packages.python.org/celery/userguide/periodic-tasks.html)

```
from datetime import timedelta

CELERYBEAT_SCHEDULE = {
    "runs-every-30-seconds": {
        "task": "tasks.add",
        "schedule": timedelta(seconds=30),
        "args": (16, 16)
    },
} 
```

他们还有一个更精细的周期任务版本，可以复制 crontab 的调度：

```
from celery.schedules import crontab

CELERYBEAT_SCHEDULE = {
    # Executes every Monday morning at 7:30 A.M
    'every-monday-morning': {
        'task': 'tasks.add',
        'schedule': crontab(hour=7, minute=30, day_of_week=1),
        'args': (16, 16),
    },
} 
```

芹菜本身是独立的，但有[django-celery](http://pypi.python.org/pypi/django-celery/)特定的版本

此解决方案的好处是您无需编辑和维护系统级 cron 选项卡。这是一个高度集成到 django 中的解决方案，用于此确切用途。

使用 cron 的另一个**巨大**优势是 Celery 可以随您的系统扩展。如果您使用的是基本系统 crontab，那么任务将位于托管应用程序的服务器上。但是，如果您需要扩展您的网站并在 5 个 Web 应用程序节点上运行它怎么办？您需要集中该 crontab。如果您使用的是 Celery，您有[很多](http://docs.celeryproject.org/en/latest/getting-started/brokers/index.html)关于如何传输和存储任务的选项。它本质上是分布式的，并且可以同步到您的所有应用程序服务器。它是便携式的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T18:00:48.217

在我看来，正确的方法是编写一个[Django 自定义命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/#howto-custom-management-commands)并通过 cron 执行它。但是您似乎很幸运，因为其他人也有类似的需求并编写了自定义 django 应用程序。以[django-cron](http://code.google.com/p/django-cron/)为例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T18:00:39.797

您的问题的解决方案是标准`cron`应用程序（*nix 系统上的任务规划器）。您可以使用 cron 安排脚本（通过将其添加到 crontab）。

如果您的脚本必须在您的 Django 应用程序环境中执行，可以通过`setup_environment`函数告诉他执行此操作。[您可以在此处](http://www.b-list.org/weblog/2007/sep/22/standalone-django-scripts/)阅读有关 Django 应用程序的独立脚本的更多信息。

# asp.net-mvc-3 - 如何防止某些模型属性更新？

> ID：11924416
> 
> 赞同：0
> 
> 时间：2012-08-12T17:52:17.500
> 
> 标签：asp.net-mvc-3, model, attributes, model-binding

我在 ASP.Net 中使用脚手架，我有一个名为“Page”的模型，其属性如下

```
public class Page
{
    private DateTime _Created_at = DateTime.Now;
    private bool _IsActive = true;

    public int ID { get; set; }

    public string Code { get; set; }

    [Required]
    [DisplayName("Parent Code")]
    public string ParentCode { get; set; }

    [Required]
    public string Title { get; set; }

    ************
} 
```

在这里，在**创建**方法期间，我正在更新代码属性，如下所示

```
 public ActionResult Create(Page page)
        {
            if (ModelState.IsValid)
            {
                page.Code = page.Url.Replace(" ", string.Empty);
                page.IsActive = true;
                db.Pages.Add(page);

                db.SaveChanges();

                return RedirectToAction("Details", new { id = page.ID });
            }

            return View(page);
        } 
```

现在，问题是，我不希望在**Update方法期间更改此****Code**值，我没有将其包含在 Edit 表单中。但如果我更新，它仍然会更新“NULL”值。

 **我尝试`[Bind(Exclude = "Code")]`了 Page 类，但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:00:03.773

您需要`code`在编辑视图中有一个隐藏字段。使用`@Html.HiddenFor(model => model.Code)`.**

# authentication - 如何使用 Box API 2.0 撤销应用程序权限

> ID：11924417
> 
> 赞同：0
> 
> 时间：2012-08-12T17:52:19.400
> 
> 标签：authentication, box-api

我可以使用 Box API 2.0 授予应用程序权限。但我需要让用户撤销给定的权限。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:10:24.023

要以编程方式执行此操作，您可以使用[v1 注销方法](http://developers.box.net/w/page/12923939/ApiFunction_logout)。用户还可以随时在 box.com 上的帐户设置中撤销任何应用程序的访问权限。

# java - GraphView 库 x 和 y 轴

> ID：11924420
> 
> 赞同：0
> 
> 时间：2012-08-12T17:52:32.260
> 
> 标签：java, android, graph

我正在使用一个`GraphView`库，我想使用该方法`GraphViewData`来显示`LineGraph`. 老实说，我不知道如何`LineGraph`用这个库生成。因此，我删除了显示 的示例模拟数据，`LineGraph`并将其替换为我自己的 x 数据和 y 数据。

但我做错了，它没有显示它自己的线，只有它填充了 x 轴和 y 轴：

```
Bundle extras = getIntent().getExtras(); 
if(extras != null) {
    valueX = extras.getDouble("xValue");
    valueY = extras.getDouble("yValue");
    Log.d("X = " + valueX, " Y = " + valueY);
}

GraphViewSeries exampleSeries = new GraphViewSeries(
    new GraphViewData[] {
        new GraphViewData(valueX, valueY)
    });

// graph with dynamically genereated horizontal and vertical labels
GraphView graphView;
graphView = new LineGraphView(
    this,                         // context
    "Incomming Bluetooth Data");  // heading
graphView.addSeries(exampleSeries); // data

LinearLayout layout = (LinearLayout) findViewById(R.id.graph1);
layout.addView(graphView); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T02:39:31.720

您只需定义一个点的坐标。要画线，您需要为 2 个不同的点定义坐标。

在数组中添加另一个具有不同 X 和 Y 值的 GraphViewData。

# php - GET 变量错误

> ID：11924422
> 
> 赞同：0
> 
> 时间：2012-08-12T17:52:50.683
> 
> 标签：php, mysql, action, message, isset

我不知道为什么，但这段代码不起作用。我要做的是从用户那里获取操作和消息 ID，并根据消息 ID 显示用户的整个对话。

```
if (isset($_GET['action']) && isset($_GET['message_id']) === true) {
            if ($_GET['action']=="read_conversation" && $_GET['message_id'] == $message_id) {
                echo 'this is true';
            } else if (isset($_GET['action']) !== "read_conversation" || isset($_GET['message_id']) !== $message_id) {
                echo '<META HTTP-EQUIV="Refresh" Content="0; URL=index.php">'; 
            }
        } 
```

它一直重定向到索引......当我只希望它在变量 action 和 message_id 不等于他们点击的值时重定向......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T17:56:22.820

```
isset($_GET['action']) !== "read_conversation" 
```

这是你的问题。isset($_GET['action']) 返回真或假，您正试图将其与“read_conversation”进行比较

# html - Box-shadow 未显示或 z-index

> ID：11924423
> 
> 赞同：1
> 
> 时间：2012-08-12T17:52:57.627
> 
> 标签：html, z-index, css

我已经尽可能多地尝试了我所知道的这些东西，但未能在图像上显示框阴影。

[http://thesameffect.com/healthy-habits-and-distinctions/#related-posts](http://thesameffect.com/healthy-habits-and-distinctions/#related-posts)

我想显示覆盖在图像上的阴影。和..一样

[http://thesameffect.com/blog/](http://thesameffect.com/blog/)

请帮助我..

**HTML：**

```
<div class="related-posts">
    <h3 class="related-title">Related Posts</h3>
    <ul id="related-posts" class="related-list">
        <li>
            <a title="Permanent Link toHow Genetics and Epigentics Relate to Your Health and Fitness" rel="bookmark" href="http://TheSamEffect.com/how-genetics-and-epigentics-relate-to-your-health-and-fitness/">
                <img class="attachment-Header Square" width="297" height="200" title="genes2" alt="genes2" src="http://TheSamEffect.com/wp-content/uploads/genes2-297x200.jpg">
                <span class="related-heading">How Genetics and Epigentics Relate to Your Health and Fitness</span>
            </a>
        </li>

        <li>
            ...
        </li>   

        <li>
            ...
        </li>
    </ul>
</div> 
```

**CSS：**

```
.related-posts ul {
    list-style: none outside none;
    margin: 0;
    padding: 0;
}

.related-list li {
    background-color: #F4F4F4;
    box-shadow: 0 0 10px #000000 inset;
    float: left;
    height: 150px;
    list-style: none outside none !important;
    margin: 0.25em !important;
    overflow: hidden;
    position: relative;
    text-align: center;
    width: 216px;
}

.related-posts ul li a {
    font-size: 14px;
    font-weight: normal;
    line-height: 20px;
    text-decoration: none;
}

.related-posts a {
    color: #F4F4F4;
}

.related-list img {
    display: block;
    margin: 0;
    position: absolute;
}

.related-heading {
    background-color: rgba(0, 0, 0, 0.5);
    bottom: 0;
    font-family: Conv_resea-bolditalic,"Helvetica Neue",Arial,Helvetica,sans-serif,georgia;
    font-size: 16px;
    left: 0;
    min-height: 40px;
    padding: 10px;
    position: absolute;
    width: 90.5%;
    z-index: 1;
} 
```

PHP-WP 代码：

*这就是我从创世纪中提取图像的方式。*

```
 $img = genesis_get_image() ? genesis_get_image( array( 'size' => 'Header Square' ) ) : '<img src="' . get_bloginfo( 'stylesheet_directory' ) . '/images/related.png" alt="' . get_the_title() . '" />';

            $related .= '<li><a href="' . get_permalink() . '" rel="bookmark" title="Permanent Link to' . get_the_title() . '">' . $img . '<span class="related-heading">' . get_the_title() . '</span></a></li>'; 
```

在做了所有这些事情之后，我仍然看不到盒子阴影，实际上阴影在它的实际位置，但由于 z-index 我认为我无法看到阴影。

请帮我解决这个问题。

## 谢谢你。

**解决后：**

以下代码仅显示 Genesis 中的图像 url。

genesis_get_image(array('format' => 'url'));

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:59:41.870

尝试这样的[事情](http://jsfiddle.net/esnLn/)

[http://jsfiddle.net/esnLn/](http://jsfiddle.net/esnLn/)

将图像设置为 div 背景

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:59:56.350

您的阴影位于具有嵌入阴影的列表项上，并且列表项中的图像覆盖了它。解决此问题的一种方法是将列表项背景图像设置为您的图像并删除图像本身。

根据您的更新，您可以尝试以下操作：

```
$img = genesis_get_image( array( 'size' => 'Header Square' ) );
$related .= '<li style="background-image:url('.$img.')"><a href="' . get_permalink() . '" rel="bookmark" title="Permanent Link to' . get_the_title() . '"><span class="related-heading">' . get_the_title() . '</span></a></li>'; 
```

# .net - 在客户端计算机上安装基于服务器的 .NET 应用程序快捷方式的最佳方式？

> ID：11924425
> 
> 赞同：0
> 
> 时间：2012-08-12T17:53:51.947
> 
> 标签：.net, networking, installation, inno-setup

我正在开发一个网络版本的 .NET WinForms 应用程序，它只需要服务器上的 EXE 的快捷方式就可以出现在客户端的桌面上。用户是非技术人员/非专业人士，因此需要自动创建快捷方式。Click-Once 不是一个选项。我们正在使用 Inno Setup。

感谢您的建议/策略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T21:00:34.520

我个人更喜欢使用某种集中式系统，而不是搜索网络。返回服务器应用程序的简单 Web 应用程序。path 可能是最简单的解决方案之一。[`invoke the web service`](http://turngeek.blogspot.cz/2012/04/making-web-request-within-inno-setup.html)然后从 InnoSetup 内部很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:20:01.180

假设用户知道如何到达网络上的*某个地方*，您可以将客户端安装程序放在那里。然后，这可以用于`{src}`在 run-direct-from-network 场景中定位客户端可执行文件（或告诉您在哪里可以找到客户端可执行文件的 ini 文件），或者可以在安装中与客户端可执行文件一起安装的配置文件-locally-but-connect-to-server 场景。

请注意，在选择其中一种策略之前，您应该考虑升级的频率和类型。任何直接从网络共享运行应用程序的客户端通常都会锁定文件，因此您无法将其替换为升级版本，因此您必须协调所有客户端以在升级之前关闭应用程序。相反，如果文件安装在本地，那么您需要协调所有客户端以在更新可用时安装更新。（当然，这两者都可以在应用程序中自动处理——但这就是为什么在部署之前考虑这一点很重要！）

基于域的网络上的另一个选项是通过 Active Directory 部署简单地强制在所有客户端上安装应用程序。

# html - 神秘的粗体字体 CSS3

> ID：11924429
> 
> 赞同：0
> 
> 时间：2012-08-12T17:54:12.420
> 
> 标签：html, css, font-face

我在我的页面上的几个按钮上使用了 webfont（多边形）。在 firefox 中，一切看起来都是正确的，但在 Chrome 中，尽管使用了相同的 CSS3 代码，但第一个按钮的字体似乎比其他按钮的字体更粗（除非我错过了一个错字）。

[http://ashgavs.cloudant.com/site/_design/AshGavsCouch/betcha/index.html](http://ashgavs.cloudant.com/site/_design/AshGavsCouch/betcha/index.html)

这就是页面，查看登录与使用 facebook 登录或注册。影响字体粗细的不是文本的长度，已经测试过了。

这是第一个和第二个按钮的 CSS：

```
 #login{
        position: absolute;
        top: 137px;
        left: 19px;
        padding-top: 10px;
        padding-bottom: 10px;
        border-top: 1px solid #aff797;
        background: #369942;
        background: -webkit-gradient(linear, left top, left bottom, from(#27ca3d), to(#369942));
        background: -webkit-linear-gradient(top, #27ca3d, #369942);
        background: -moz-linear-gradient(top, #27ca3d, #369942);
        background: -ms-linear-gradient(top, #27ca3d, #369942);
        background: -o-linear-gradient(top, #27ca3d, #369942);
        -webkit-border-radius: 11px;
        -moz-border-radius: 11px;
        border-radius: 5px;
        -webkit-box-shadow: rgba(0,0,0,.7) 0 1px 0;
        -moz-box-shadow: rgba(0,0,0,.7) 0 1px 0;
        box-shadow: rgba(0,0,0,.7) 0 1px 0;
        text-shadow: 0 1px 0 #91d99a;
        color: #0e5817;
        font-size: 24px;
        font-family: 'Poly', serif;
        text-decoration: none;
        vertical-align: center;
        width: 229px;
    }

    #loginFB{
        position: absolute;
        top: 196px;
        left: 19px;
        padding-top: 10px;
        padding-bottom: 10px;
        border-top: 1px solid #65a9d7;
        background: #3e779d;
        background: -webkit-gradient(linear, left top, left bottom, from(#65a9d7), to(#3e779d));
        background: -webkit-linear-gradient(top, #65a9d7, #3e779d);
        background: -moz-linear-gradient(top, #65a9d7, #3e779d);
        background: -ms-linear-gradient(top, #65a9d7, #3e779d);
        background: -o-linear-gradient(top, #65a9d7, #3e779d);
        -webkit-border-radius: 11px;
        -moz-border-radius: 11px;
        border-radius: 5px;
        -webkit-box-shadow: rgba(0,0,0,.7) 0 1px 0;
        -moz-box-shadow: rgba(0,0,0,.7) 0 1px 0;
        box-shadow: rgba(0,0,0,.7) 0 1px 0;
        text-shadow: 0 1px 0 #7ca9c7;
        color: #0e3458;
        font-size: 24px;
        font-family: 'Poly', serif;
        text-decoration: none;
        vertical-align: center;
        width: 229px;
      } 
```

两个按钮都从相同的 div 继承属性，所以这也不是问题。谢谢。——阿什利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:11:47.450

它可能与您的特定浏览器有关。无论如何，一件非常好的事情（现在几乎是一个要求）是在您自己的 CSS 定义之前添加一个 CSS 重置。只需谷歌“CSS重置”。你会看到很多结果。基本上它会删除浏览器特定的格式，以便您的 CSS 是页面上唯一有效的格式。没有来自浏览器的意外更改或添加。通常这样做会解决您描述的各种问题。您可能想研究浏览器的特性，但为了节省时间，请先尝试重置。

# algorithm - 锁树算法死锁检测

> ID：11924436
> 
> 赞同：1
> 
> 时间：2012-08-12T17:56:45.507
> 
> 标签：algorithm, tree, locking, deadlock, detection

我一直在研究锁树死锁检测算法的一些示例，但无法弄清楚在这种特殊情况下死锁是如何发生的：

```
Thread 1:           Thread 2:

lock(A)             lock(E)
lock(C)             lock(D)
unlock(C)           unlock(D)
lock(B)             unlock(A)
lock(D)             lock(A)
lock(E)             lock(C)
unlock(E)           unlock(C)
unlock(D)           unlock(A)
unlock(B)
unlock(A) 
```

据我了解，锁树应该是这样的：

```
 T1:          T2:
              /  \
  A          E    A
 / \         |    |
C   B        D    C
    |
    D
    | 
    E 
```

死锁是否发生在节点 T1：D - E 和 T2：E - D，因为线程以相反的顺序获取这些锁？

我怎么能建议插入一个锁和一个解锁语句来消除死锁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T21:17:49.337

是的，T2 中 lock(E) 之前的 lock(B) 将防止死锁。这称为门锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:04:53.267

线程 1 执行：lock(a)、lock(c)、unlock(c)、lock(b)、lock(d)

所以现在 a,b 和 d 被锁定

线程 2 执行：lock(e), lock(d)

所以现在 e 也被锁定了，线程 2 正在等待 d 解锁

现在线程一醒来并执行：lock(e)

现在他们被困住了——

1 正在等待 2 解锁 e.

2 正在等待 1 解锁 d

避免这种情况的方法之一是立即锁定您需要的所有内容，而不是作为单独的操作。

# javascript - Javascript：从 cookie 中读取会话 ID

> ID：11924439
> 
> 赞同：3
> 
> 时间：2012-08-12T17:57:40.707
> 
> 标签：javascript, session, cookies, browser

对于 websockets，我必须从 cookie 中公开我的 sessionid。

我搜索了一下，发现我应该能够通过以下方式访问 cookie：

```
console.log(document.cookie); 
```

不幸的是，这不起作用或更好的 document.cookie 包含一个空字符串，即使 chrome 本身也向我显示 cookie 也可以进行身份​​验证。

难道是chrome隐藏了javascript的cookie吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T17:59:55.613

如果服务器被配置为发送带有[标志的会话 cookie](http://en.wikipedia.org/wiki/HTTP_cookie#HttpOnly_cookie) [，`HttpOnly`](http://en.wikipedia.org/wiki/HTTP_cookie#HttpOnly_cookie)就会发生这种情况。这样，cookie 就变得对 JS 等客户端脚本语言不可见/不可访问。

为了实现您的具体功能要求，要么重新配置服务器不这样做，要么寻找替代方法，例如设置自定义 cookie（`HttpOnly`当然没有标志），或者让服务器端视图技术动态打印当前会话 ID 为JS 变量或作为某些 HTML 元素的属性，以便 JS 可以通过遍历 HTML DOM 来访问它。

# asp.net - 如何捕获由错误的 web.config 导致的错误？

> ID：11924441
> 
> 赞同：2
> 
> 时间：2012-08-12T17:57:44.617
> 
> 标签：asp.net, web-config, custom-error-handling

这是针对 ASP.NET 应用程序的。由于我在 web.config 文件中缺少某些内容，尝试加载应用程序时出现运行时错误。我想显示自定义错误页面，但我担心如果 web.config 中有错误，那么 customerror 属性将不起作用。那正确吗？

在 web.config 中，我有这个：

```
<system.web>
<customErrors configSource="config\customErrors.config" />
</system.web> 
```

在我的 customError.config 文件中，我有这个：

```
<?xml version="1.0"?>
<customErrors defaultRedirect="~/ErrorPages/DefaultError.html" mode="On"/> 
```

我还添加了授权属性，认为我需要它。我删除了它，因为它似乎没有任何区别。

```
<location path="ErrorPages/DefaultError.html">
<system.web>
  <authorization>
    <allow users="*" />
  </authorization>
</system.web>
</location>
<location path="Config/customErrors.config">
<system.web>
  <authorization>
    <allow users="*" />
  </authorization>
</system.web>
</location> 
```

我为样式表和图像添加了更多位置路径。

这是运行时错误： 说明：服务器上发生应用程序错误。此应用程序的当前自定义错误设置阻止查看应用程序错误的详细信息。

它要求我将我的自定义错误设置为关闭或仅远程，并创建一个模式为打开的自定义错误页面，我已经拥有了。

当模式关闭时，错误是：无法加载文件或程序集“AntiXSSModule”或其依赖项之一。该系统找不到指定的文件。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

当我登录应用程序以及登录之前，我的 customerror 页面工作得很好。我也希望能够解决这些类型的错误。这是我在 web.config 中不应该有的行，因为我缺少一些文件/引用，但我希望能够显示 customerror 页面，而不是崩溃。

```
<add name="ValidateInput" type="AntiXSSModule.ValidateInput, AntiXSSModule"/> 
```

我试图移动我的位置路径，认为这很重要，将它放在给我错误的行的上方和之前。我查看了问题[CustomErrors mode="Off"](https://stackoverflow.com/questions/101693/customerrors-mode-off)，这与我遇到的错误相同，但是添加属性并没有解决问题，当我添加此属性时，配置文件出现错误。

问题是如何捕获由 web.config 文件中的错误导致的错误？我还没有尝试过，但是通过查看我看到的各种问题，我可以将方法添加到我的 global.asax; Application_Exception 或 Application_Error。目前我只有 Application_Start 和 Application_End 方法。

我是 ASP.NET 的新手，想马上使用，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:09:22.157

您应该在其应用程序日志中检查服务器的事件查看器，以了解应用程序无法加载的原因。

通常对于未处理的错误，即应用程序可以预期的异常，您可以使用[ELMAH](http://code.google.com/p/elmah/)记录并通知您错误。

对于在应用程序中处理的异常，即在 try/catch 中，您可以使用[log4net](http://logging.apache.org/log4net/)记录并通知您错误。

这两个库都可以将异常记录到数据库中，甚至可以通过电子邮件将异常发送给您。

**更新：**要明确这一点（考虑到问题是*如何捕获由 web.config 文件中的错误导致的错误？*），如果您的应用程序配置无效，则应用程序将不会加载，因此将无法提供页面，更不用说错误页面了。您不应该考虑如何捕获应用程序配置错误，而是要弄清楚如何使您的应用程序配置有效，那么您就不会有这个问题。

# python - django评论自定义标签不起作用？

> ID：11924442
> 
> 赞同：1
> 
> 时间：2012-08-12T17:57:45.520
> 
> 标签：python, django, tags

我正在学习 python 和 django，尝试“learning-website-development-with-django”，我已经成功地创建了项目，直到评论应用程序。但是，在添加 django 的评论应用程序的自定义标签时，我遇到了这个问题，虽然我没有收到任何错误......下面的行按原样打印在 html 中。

```
{% get_comment_count for usernews.sharedbookmark shared_bookmark.id as comment_count %} 
```

我之前加`{% load comments %}`过。

我`TEMPLATE_DEBUG = True`在设置文件中设置了 , 。我不明白为什么会这样。

# android - 如何使 Android WebView 显示部分加载的图像？

> ID：11924443
> 
> 赞同：3
> 
> 时间：2012-08-12T17:57:52.963
> 
> 标签：android, image, webview

当我在 Android WebView 中显示图像时，任何未完全下载的图像（包括任何截断的本地文件）都不会出现。大多数浏览器会尽可能多地显示图像，因此图像会逐渐出现，而不是在几秒钟后突然出现。如何让 WebView 做到这一点？

# ios - 用 UITextField 理解 resignFirstResponder

> ID：11924445
> 
> 赞同：6
> 
> 时间：2012-08-12T17:58:19.187
> 
> 标签：ios, resignfirstresponder

当用户在我的 UITextField 之外触摸时，我试图通过使用以下方法摆脱键盘：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [mainTextController resignFirstResponder];
    [super touchesBegan:touches withEvent:event];
} 
```

但是，这似乎调用了一个在按下键盘上的返回按钮后调用的方法，但我只是希望键盘消失，而不是为我按下返回。我怎样才能做到这一点？

谢谢！

编辑：tGilani 的回答是最直接的方式，就像一个魅力，无需更改为 UIControl。但我想 jonkroll 的回答也有效。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-12T18:01:13.477

尝试

```
[self.view endEditing:YES]; 
```

更新：

取一个布尔值并在 init 方法中将其设置为 false。在您的`textFieldShouldReturn`委托方法方法中，如果为 false，则执行代码，否则跳过

```
- (BOOL) textFieldShouldReturn:(UITextField*)textField
{
    if (!boolean)
    {
        // YOur code logic here
    }
    boolean = false;
} 
```

在调用 endEditing 方法的方法中，将布尔值设置为 true。

```
boolean = YES;      
[self.view endEditing:YES]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-12T18:41:57.197

这是我以前处理过的方法。首先在您的视图控制器上创建一个方法，该方法将通过在您的文本字段上退出第一响应者状态来关闭键盘：

```
- (IBAction)dismissKeyboard:(id)sender
{
    [mainTextController resignFirstResponder];
} 
```

接下来，在您的故事板场景中`ViewController`（或者`nib`，如果您不使用故事板）将 ViewController`view`属性的类从`UIView`更改为`UIControl`。该`view`属性实际上是其他 UI 元素背后的背景。类类型需要更改，因为`UIView`不能响应触摸事件，但是`UIControl`（它是 的直接子类`UIView`）可以响应它们。

最后，在 ViewController 的`viewDidLoad:`方法中，告诉视图控制器`dismissKeyboard`在视图接收到`UIControlEventTouchDown`事件时执行您的方法。

```
- (void)viewDidLoad
{
    [super viewDidLoad];       
    UIControl *viewControl = (UIControl*)self.view;
    [viewControl addTarget:self action:@selector(dismissKeyboard:) forControlEvents:UIControlEventTouchDown];
} 
```

编辑：

您的部分担忧似乎`textFieldDidEndEditing:`是在关闭键盘时调用。这是不可避免的，每当文本字段失去焦点（即第一响应者状态）时，它总是会被调用。听起来您的问题是当用户单击返回按钮时，您已经放置了要执行的代码`textFieldDidEndEditing:`。如果您不希望在用户触摸文本字段外部时运行该代码，那么这不是放置它的合适位置。

相反，我会将该代码放在一个单独的方法中：

```
- (IBAction)textFieldReturn:(id)sender
{
    if ([mainTextController isFirstResponder]) {
            [mainTextController resignFirstResponder];

            // put code to run after return key pressed here...
        }
    }
} 
```

然后在您的文本字段发送控制事件时通过 Target-Action 调用该方法`UIControlEventEditingDidEndOnExit`。

```
[mainTextController addTarget:self action:@selector(textFieldReturn:) forControlEvents:UIControlEventEditingDidEndOnExit]; 
```

请注意，`UIControlEventEditingDidEndOnExit`它不同于`UIControlEventEditingDidEnd`. 前者在用户触摸控件外部结束编辑时调用，后者在用户按回车键结束编辑时调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T20:19:17.130

您需要将`ViewController's`视图属性从使用身份检查器更改`UIView`为：`UIControl`

从那里，您只需创建一个`IBAction`并告诉文本字段关闭（我假设是您的`mainTextController`）。如果`mainTextController`不是您希望键盘关闭的文本字段，则将`resignFirstReaponder`方法更改为您的文本字段，如下所示。

```
- (IBAction)backgroundTap:(id)sender {
[myTextField resignFirstResponder];
} 
```

然后从那里返回到您的 View Contoller`.xib`文件并将操作连接到控制视图并选择“Touch Down”。

# c# - 如何在 Windows 7 中找到用于 cpu 使用的 OID 是什么？

> ID：11924446
> 
> 赞同：2
> 
> 时间：2012-08-12T17:58:25.863
> 
> 标签：c#, cpu-usage, snmp, oid

我有一个带有 windows 7 的 vm。我已经安装了 windows snmp 代理服务。然后从我的电脑上，我用 C# 开发了一个小程序，使用[snmpsharpnet](http://www.snmpsharpnet.com/)与 SNMP 代理进行通信，并且可以正常工作！

我使用了一些示例 OID，例如：

*   .1.3.6.1.2.1.1.1.0 获取系统描述
*   .1.3.6.1.2.1.25.1.6。获取进程数

所以我的程序有效并且我有正确的网络连接。

```
 string host = "192.168.1.92";
        string community = "public";
        SimpleSnmp snmp = new SimpleSnmp(host, community);

        if (!snmp.Valid)
        {
            Console.WriteLine("SNMP agent host name/ip address is invalid.");
            return;
        }
        Dictionary<Oid, AsnType> result = snmp.Get(SnmpVersion.Ver1, new string[] { ".1.3.6.1.2.1.25.3.3.1.2" }); 

        if (result == null)
        {
            Console.WriteLine("No results received.");
            Console.ReadKey();
            return;
        }

        foreach (KeyValuePair<Oid, AsnType>  kvp in result)
        {
            Console.WriteLine("{0}: {1} {2}", kvp.Key.ToString(),
                                  SnmpConstants.GetTypeName(kvp.Value.Type),
                                  kvp.Value.ToString());
        }
        Console.ReadKey();
    } 
```

现在我正在尝试使用**.1.3.6.1.2.1.25.3.3.1.2**来获得 cpu 负载，但我没有工作（从[这里](http://forums.manageengine.com/topic/finding-cpu-mem-utilization-for-windows-system)获取信息）。我还安装了一个 Mib 浏览器（来自[ireasoning.com](http://www.ireasoning.com/)）来学习正确的 OID。

我的问题是：

*   从 Windows 7 获取 CPU 负载的正确 OID 是哪个？

*   OID 并非对所有系统都通用，不是吗？我的意思是 linux、windows、路由器有自己的 OID？

*   在哪里可以找到 Windows 7 的 OID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T18:06:45.520

**1.3.6.1.2.1.25.3.3.1.2**是 HOST-RESOURCES MIB 中 hrProcessorTable 的一部分。使用 Mib Browser 之类的工具，对表 OID **1.3.6.1.2.1.25.3.3**执行 SNMP Walk 。或者，从该 OID 开始并执行 SNMP Next。例如，如果您有一个双核 CPU，则其中一个内核的处理器负载可能在像**1.3.6.1.2.1.25.3.3.1.2 *.1***这样的 OID 中。

# php - 在运行 Install.php 时看到空白页？

> ID：11924450
> 
> 赞同：0
> 
> 时间：2012-08-12T17:58:42.357
> 
> 标签：php

我在 localhost 上运行基于 php 的网站的安装。我收到以下错误

```
Deprecated: Assigning the return value of new by reference is deprecated in C:\wamp\www\testweb\install\install.php on line 65 
```

65号线有

```
$Install =&new INSTALL(); 
```

我被告知要删除 & 读取第 65 行，`$Install =new INSTALL();`但是当我运行 install 时，我只看到一个空白页，仅此而已。有人可以就这里发生的事情以及为什么我看到的只是一个空白页对此有所了解。

我的 php 版本是 5.3.3，我在 WAMP 上运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:01:57.767

这意味着该功能已被弃用。您可能下载了旧脚本/cms。主要是它的泄漏，还有其他更好的脚本。我建议不要使用这个脚本。

# mysql - MySQL 中的自动提交示例

> ID：11924451
> 
> 赞同：0
> 
> 时间：2012-08-12T17:58:42.403
> 
> 标签：mysql

我尝试按照下面的示例进行操作，但得到了不同的结果，即会话 A 中的第二个选择返回会话 B 插入的新行。

该示例来自[http://dev.mysql.com/doc/refman/5.6/en/innodb-consistent-read.html](http://dev.mysql.com/doc/refman/5.6/en/innodb-consistent-read.html)。我正在使用 5.5。

```
 Session A              Session B

           SET autocommit=0;      SET autocommit=0;
time
|          SELECT * FROM t;
|          empty set
|                                 INSERT INTO t VALUES (1, 2);
|
v          SELECT * FROM t;
           empty set
                                  COMMIT;

           SELECT * FROM t;
           empty set

           COMMIT;

           SELECT * FROM t;
           ---------------------
           |    1    |    2    |
           ---------------------
           1 row in set 
```

**更新** 我在会话 A 和 B 中都进行了如下更改，但问题仍然存在。

```
SET autocommit=0;   -- I think this line is redundant given the line below 
set transaction isolation level read committed;
start transaction; 
```

任何想法？

# handlebars.js - 使用 Handlebars.js 遍历基本的“for”循环

> ID：11924452
> 
> 赞同：82
> 
> 时间：2012-08-12T17:59:11.607
> 
> 标签：handlebars.js

我是 Handlebars.js 的新手，刚开始使用它。大多数示例都基于对对象的迭代。我想知道如何在基本的 for 循环中使用车把。

例子。

```
for(i=0 ; i<100 ; i++) {
   create li's with i as the value
} 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2012-08-12T19:06:12.213

Handlebars 中没有任何内容，但您可以轻松添加自己的助手。

如果你只是想做一些事情`n`，那么：

```
Handlebars.registerHelper('times', function(n, block) {
    var accum = '';
    for(var i = 0; i < n; ++i)
        accum += block.fn(i);
    return accum;
}); 
```

和

```
{{#times 10}}
    <span>{{this}}</span>
{{/times}} 
```

如果你想要一个完整的`for(;;)`循环，那么像这样：

```
Handlebars.registerHelper('for', function(from, to, incr, block) {
    var accum = '';
    for(var i = from; i < to; i += incr)
        accum += block.fn(i);
    return accum;
}); 
```

和

```
{{#for 0 10 2}}
    <span>{{this}}</span>
{{/for}} 
```

演示：http: [//jsfiddle.net/ambiguous/WNbrL/](http://jsfiddle.net/ambiguous/WNbrL/)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2017-01-04T12:00:22.077

这里的最佳答案很好，如果你想使用 last / first / index 虽然你可以使用以下

```
Handlebars.registerHelper('times', function(n, block) {
    var accum = '';
    for(var i = 0; i < n; ++i) {
        block.data.index = i;
        block.data.first = i === 0;
        block.data.last = i === (n - 1);
        accum += block.fn(this);
    }
    return accum;
}); 
```

和

```
{{#times 10}}
    <span> {{@first}} {{@index}} {{@last}}</span>
{{/times}} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-25T08:14:13.750

如果你喜欢 CoffeeScript

```
Handlebars.registerHelper "times", (n, block) ->
  (block.fn(i) for i in [0...n]).join("") 
```

和

```
{{#times 10}}
  <span>{{this}}</span>
{{/times}} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-09-03T21:45:30.657

此代码段将处理 else 块以防万一`n`作为动态值出现，并提供`@index`可选的上下文变量，它还将保留执行的外部上下文。

```
/*
* Repeat given markup with given times
* provides @index for the repeated iteraction
*/
Handlebars.registerHelper("repeat", function (times, opts) {
    var out = "";
    var i;
    var data = {};

    if ( times ) {
        for ( i = 0; i < times; i += 1 ) {
            data.index = i;
            out += opts.fn(this, {
                data: data
            });
        }
    } else {

        out = opts.inverse(this);
    }

    return out;
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-11-24T14:19:30.803

晚了几年，但现在`each`在 Handlebars 中可用，它允许您非常轻松地迭代一系列项目。

[https://handlebarsjs.com/guide/builtin-helpers.html#each](https://handlebarsjs.com/guide/builtin-helpers.html#each)

# linux - 哪个用户在 Amazon EC2 上运行 tomcat？

> ID：11924460
> 
> 赞同：1
> 
> 时间：2012-08-12T18:00:07.753
> 
> 标签：linux, tomcat, ubuntu, amazon-ec2

我有一`Tomcat 7`台在 Amazon EC2（操作系统 - Ubuntu 12 LTS）上运行的服务器。如何找出`Tomcat`在 Amazon EC2 上运行的用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:08:10.260

试试这个命令：

```
ps auxwww | grep tomcat | grep -v grep 
```

你会得到这样的输出

```
 $ ps auxwww | grep tomcat | grep -v grep
root      1941  0.2  1.7 419224 35208 ?        Sl   Aug12   0:06 /usr/lib/jvm/java-6-sun/bin/java -Djava.util.logging.config.file=/usr/local/tomcat/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.endorsed.dirs=/usr/local/tomcat/endorsed -classpath /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar -Dcatalina.base=/usr/local/tomcat -Dcatalina.home=/usr/local/tomcat -Djava.io.tmpdir=/usr/local/tomcat/temp org.apache.catalina.startup.Bootstrap start 
```

在那里你得到进程所有者名称和进程ID ..

# ios - iOS 5 safari mobile 固定位置

> ID：11924464
> 
> 赞同：0
> 
> 时间：2012-08-12T18:00:39.890
> 
> 标签：ios, ipad, anchor, css-position, scrolltop

我正在处理一个内容片段，它有一个固定的导航，可以使用向下滚动到锚点位置

```
$('.buttons').click(function(){
  var anchorPos = $(this).attr('href');
  $('html, body').animate({scrollTop: $(anchorPos).offset().top}, 1000);
  return false;
 }); 
```

但是我遇到了回流问题，在 ipad 上，导航只能点击一次，并且在滚动后不起作用，它在桌面上可以正常工作。

我尝试了不同的解决方案但无济于事，包括添加空 div 和尝试更改正文的宽度。我已经模拟了我试图在 jsbin 上做的事情。

[http://jsbin.com/esaxuc/2/edit](http://jsbin.com/esaxuc/2/edit)

将不胜感激任何反馈！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:49:44.713

这确实是一个重复的问题。
请参阅原始问题，特别是[此答案](https://stackoverflow.com/a/10030251/1118070)

是的，我承认这是我自己的答案，但自从发布它以来，有很多人联系我感谢我，所以它很有可能会对你有所帮助。

祝你好运。

# sql - 备份螳螂

> ID：11924468
> 
> 赞同：2
> 
> 时间：2012-08-12T18:01:18.050
> 
> 标签：sql, issue-tracking, mantis

我想完全备份我的 Mantis 跟踪系统，最简单的方法是什么？如果我只备份数据库，它是否已经备份了 Mantis 上的所有内容？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T21:34:27.940

要完全备份 Mantis，必须保存数据库状态。此外，您应该备份以下文件或目录：

*   上传目录，如果 Mantis 被配置为在磁盘上存储附件；
*   config_inc.php 文件
*   任何其他自定义文件，例如 custom_strings_inc.php 或 custom_constant_inc.php

# jquery - jQuery 不会正确处理应用程序/json 响应

> ID：11924469
> 
> 赞同：0
> 
> 时间：2012-08-12T18:01:16.740
> 
> 标签：jquery

使用 jQuery 1.8 和 Kohana 的简单 jQuery ajax 调用和响应：

```
$.ajax({
    data:{
        file: file  
},
    dataType: 'json',
    url: 'media/delete',
    contentType: 'application/json; charset=utf-8',
    type: 'GET',
    complete: function(response){
        console.log(response);
        console.log(response.file);
    }
}); 
```

URL 的 PHP 是一个简单的 json_encode() 页面，它返回：

```
{"file":"uploaded\/img\/Screen Shot 2012-04-21 at 2.17.06 PM-610.png"} 
```

根据 JSLint，这是有效的 JSON。

根据萤火虫的说法，响应标头是：

```
Response Headers
Connection  Keep-Alive
Content-Length  74
Content-Type    application/json
Date    Sun, 12 Aug 2012 17:44:39 GMT
Keep-Alive  timeout=5, max=97
Server  Apache/2.4.1 (Unix) PHP/5.4.0
X-Powered-By    PHP/5.4.0 
```

但是在成功函数中“响应”不是我期望的 JS 对象，我无法访问 response.file。相反，它似乎是某种响应对象，其中包含 readyState、responseText、status 等字段。

这里有很多类似的问题，但我相信我已经根据其他答案正确连接了所有内容。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T21:12:54.307

`complete:`回调不提供响应作为它的参数。来自[jQuery 文档`$.ajax()`](http://api.jquery.com/jQuery.ajax/)：

```
complete(jqXHR, textStatus) 
```

因此，您所看到的完整函数的参数是 jqXHR 对象，而不是解析的响应。这可能是因为无论是否成功，当 ajax 调用完成时都会调用 complete。它是`success`获取成功解析的 JSON 响应的处理程序。

您可能想改用`success:`回调。

```
$.ajax({
    data: {file: file},
    dataType: 'json',
    url: 'media/delete',
    contentType: 'application/json; charset=utf-8',
    type: 'GET',
    success: function(response){
        console.log(response);
        console.log(response.file);
    }
}); 
```

# php - 如何在mysql中获取上一行

> ID：11924470
> 
> 赞同：0
> 
> 时间：2012-08-12T18:01:17.643
> 
> 标签：php, mysql

我有疑问：

```
SELECT ID
FROM VACANCIES 
WHERE CATEGORYID = 1
AND VISIBLE = '1'
AND user_enable = '1'
AND DATA >= '2012-08-10 10:54:46'
AND torder >= 0
AND ID > 570153
ORDER BY torder ASC, DATA ASC, ID ASC
LIMIT 1 
```

我得到结果 ID - 570164 作为前一个键，这是错误的结果：正确的结果是 567556

```
570164 | ROW 1 | 2012-08-10 11:27:39
567556 | ROW 2 | 2012-08-10 10:55:53
570153 | ROW 2 | 2012-08-10 10:54:46 
```

有没有办法获得 prev id ？注意：我按日期下订单，但日期可以相等，prev id 可以小于当前 ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:07:23.057

您的条件表明 ID 必须大于 570153。

*   570164 是返回的结果，满足该条件。
*   567556 是您希望的结果，它不满足该条件。

我的猜测是你想要一个小于而不是大于你的 ID 条件，但我不知道你的目标是什么，所以不能确定。我还会在 ID 列上将您的排序条件从 ASC 切换为 DESC，否则您将获得第一个匹配项（即最低 id），而不是最接近您要比较的值的匹配项。

```
SELECT ID
FROM VACANCIES 
WHERE CATEGORYID = 1
AND VISIBLE = '1'
AND user_enable = '1'
AND DATA >= '2012-08-10 10:54:46'
AND torder >= 0
AND ID < 570153
ORDER BY torder ASC, DATA ASC, ID DESC
LIMIT 1 
```

# uipickerview - Xcode 警报按钮

> ID：11924471
> 
> 赞同：0
> 
> 时间：2012-08-12T18:01:39.390
> 
> 标签：uipickerview, uialertview, picker, didselectrowatindexpath

我有这段代码，它会将我发送到另一个页面，但这只会在选择器中选择一行时发生。

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{
    NSString *urlString;
    if (row == 0) {            
                urlString = @" ";
                [self loadData:urlString];
            } 
```

但是，我有一个警报视图，假设当我单击某一行时会执行此代码。我的每一行都有不同的 url，因此，如果 (row == 0) 代码，我需要这样做。

无论如何我可以将上面的代码添加到下面的警报代码中吗？

```
 -(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

    if (buttonIndex == 1) {
        }
    } 
```

上面的这两个代码工作得很好。我只是想知道是否可以将 didSelectRow 代码添加到 alertview 代码中。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:09:43.027

除非我不完全理解您的要求，否则将上述代码转移到警报视图方法应该没有问题。

只需使用：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

if (buttonIndex == 1) {

    NSInteger row =[ pickerView selectedRowInComponent:0];
    NSString *select = [pickerViewArray objectAtIndex:row];
    NSString *urlString;

    if (select == @"  " ) {

        urlString = @" ";
    [self loadData:urlString];
    }
}
}
} 
```

# javascript - .replace() 函数错误

> ID：11924472
> 
> 赞同：0
> 
> 时间：2012-08-12T18:01:41.153
> 
> 标签：javascript

我正在使用以下函数替换`'`字符串

```
'' 
```

例如

```
yourstring= "uncle Tom's cabin";
var crucial = yourstring.replace(/'/g, "''"); 
```

这不起作用，我不知道为什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:05:35.550

您的代码有效，您只是拼错了“您的字符串”变量。

```
yourstring= "uncle Tom's cabin";
var crucial = yourstring.replace(/'/g, "''"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T18:03:19.983

试试这个：

```
 var yourstring = "uncle Tom's cabin";
  var crucial = yourstring.replace("'","''"); 
```

这只会替换一个`'`

# windows - 批处理脚本获取包含 .git 文件夹的父目录的路径

> ID：11924477
> 
> 赞同：0
> 
> 时间：2012-08-12T18:02:56.723
> 
> 标签：windows, git, batch-file

> **可能重复：**
> [有没有办法在一个命令中获取 git 根目录？](https://stackoverflow.com/questions/957928/is-there-a-way-to-get-the-git-root-directory-in-one-command)

假设存储库开始于

```
C:\myrepo\
and the prompt is at 
C:\myrepo\folderone\folderoneb\folderonec 
```

我需要一个可以上升直到找到的批处理脚本

```
C:\myrepo.git and return C:\myrepo 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:20:58.080

请参阅[有没有办法在一个命令中获取 git 根目录？](https://stackoverflow.com/questions/957928/is-there-a-way-to-get-the-git-root-directory-in-one-command)

只需使用命令`git rev-parse --show-toplevel`并以您需要的方式使用其输出

是的，这也适用于 Windows ;)

# java - 2 列 JTable 用于文件名。将更多文件添加到文件列表时自动更新？

> ID：11924478
> 
> 赞同：1
> 
> 时间：2012-08-12T18:03:15.503
> 
> 标签：java, swing, jtable

我正在制作一个文件转换器。我将使用 JButton 从列表中添加和删除文件。添加文件时，它会调出 JFileChooser（或其他东西）并返回文件列表。每次添加/删除文件时是否需要重新填充整个表？如果我必须解决这个问题，最好的方法是什么？

当我没有两列时，我使用了 JListModel + JList<File>。是否有使用 JTables 的类似方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T18:28:38.253

不，您不必重新填充整个表格。只需使用 DefaultTableModel.addRow()。JTable 自动创建 DefaultTableModel 的一个实例。

检查此链接：[http ://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T19:31:30.583

我认为一个好方法是编写自己的`TableModel`. 如果继承自[`AbstractTableModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html)，我认为这是使用[*观察者设计模式*](http://en.wikipedia.org/wiki/Observer_pattern)的便捷方式。如果要更新表，请调用`fireTableXxx()`方法。

# regex - 在手册页中搜索行首的单词

> ID：11924480
> 
> 赞同：1
> 
> 时间：2012-08-12T18:03:20.747
> 
> 标签：regex, search, manpage, less-unix

对我来说，当我想在手册页中搜索特定选项时会发生很多情况。我知道选项位于行首，但不知道如何限制搜索。
我试过`/^REG-PATT`了，但它对我不起作用。

我可以使用的最短的正确模式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:22:49.067

在选项之前有一些空间。也许`^\s*-o`（`-o`是您正在搜索的选项）有效。或者您可以简单地搜索整行 ( `-o`) 中的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T18:42:36.873

`grep`它与上下文有关，例如列出`-x`switch of 的`tar`作用：

```
man tar | grep -C5 -- "-x\b" 
```

### 编辑

`-static`要从获取文档`gcc(1)`，您可以使用 GNU sed 执行以下操作：

```
man gcc | sed -n '/^ *-static/,/^ *-.*/p' 
```

请注意，最后一行来自下一段。

这是使用 GNU awk 的更精细和更精确的解决方案：

```
man gcc | gawk -v RS='\n\n' -v ORS='\n\n' '
 /(^|\n) *-static/ { state = "printing"    ; print "--" }
!/(^|\n) *-static/ { state = "not printing"             }
state == "printing"
' 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-12T18:31:23.580

您或许可以尝试：

$man 命令 | 头

# c# - 定义类的默认返回值/函数？

> ID：11924484
> 
> 赞同：0
> 
> 时间：2012-08-12T18:03:55.117
> 
> 标签：c#, .net

我可以创建一个具有默认返回值的类吗？可以说，如果我创建此类的对象，我总是会得到一个特定的值，而无需调用属性或其他东西。例子：

```
int i = new MyIntClass(/*something*/); //will return an int 
```

实际上我想使用默认函数来返回一些东西。也许是这样的：

```
class MyCalculator()
{
  public double a { get; set; }
  public double b { get; set; }

  MyCalculator(double a, double b)
  {
    this.a = a;
    this.b = b;
  }

  public double DoMath()
  {
    return a*b;
  }
}

/* somewhere else */
double result = new MyCalculator(5.5, 8.7); 
```

`result`应该是 的结果`DoMath()`。那可能吗？我知道这可能不是最好的例子，但这样的事情会很好。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T18:06:15.543

您可以进行隐式转换。

示例（添加到类）：

```
public static implicit operator double(MyCalculator c)
{
  return c.DoMath();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T18:09:43.043

如果我跟着你，你想要一个`MyCalculator`有一个`double`它可以被视为。您可以使用隐式强制转换运算符重载来做到这一点。把它放在 的定义中`MyCalculator`：

```
public static implicit operator double(MyCalculator m)
{
  return m.DoMath();
} 
```

然而，它在某种程度上隐藏了正在发生的事情（你打电话`new`并得到了 a `double`），如果你是一个重度用户，`var`你会发现它很烦人，因为你必须明确。

总之，只有`implicit`在你有*很强*的理由时才使用它。确实，只有`explicit`在你有*非常*强烈的理由时才使用，并且只有`implicit`在你有*非常*强烈的理由时才使用。

对于与类的接口有关的任何事情，一个好的指导原则是“对于从未看过源代码的人来说，这看起来有多明智或怪异？”

# javascript - 无法从数组中获取经度和纬度

> ID：11924487
> 
> 赞同：0
> 
> 时间：2012-08-12T18:04:43.130
> 
> 标签：javascript

我试图从一个数组中存储纬度和经度，它的长度有时是 1 ，有时是 2 或 3 。

这是代码：

```
 var latitude,longitude;
    $.each(data.results, function (i, item) {
    var name = item.from_user;
    var img = item.profile_image_url;
    var text=item.text;
    var profile_img=item.profile_image_url;
    var url=(item.entities.urls.length > 0 ? item.entities.urls[0].url : '');
    Placemaker.getPlaces(text,function(o){
    console.log(o);
    if (typeof(o.match!=='undefined') ||(o.length==1)){
     latitude=o.match.place.centroid.latitude, longitude=o.match.place.centroid.longitude; 
     console.log(latitude,longitude);}
     else if (typeof(o.match[0]!=='undefined') ||(o.match.length==2)){
        latitude=o.match[0].place.centroid.latitude, longitude=o.match[0].place.centroid.longitude; 
     console.log(latitude,longitude);
     }

    });
    array.push({name:name,img:img,text:text,latitude:latitude,longitude:longitude,profile_img:profile_img,url:url}); 
```

当数组长度为 1 时，从这段代码中我只得到纬度和经度值。所以只有第一个 if 被执行。我正在尝试修复其他数组，以便我也可以从其他数组中获取值，因为当我使用 console.log 输出数组时，纬度和经度的值不存在。我猜想循环必须在将所有值放入数组之前完成获取它们。

我正在尝试通过推文位置在谷歌地图上输出推文。我没有使用地理编码，而是使用 yahoo placemaker 从推文的文本中定位位置。

这是 placemaker 数组结构的快照[http://www.flickr.com/photos/codepo8/3553188917/](http://www.flickr.com/photos/codepo8/3553188917/)

这是另一个试图获取值的数组 Object { match=[2]}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:04:42.073

`typeof(o.match!=='undefined')`总是“布尔”我认为你想要 `typeof(o.match)!=='undefined'`或只是 `typeof o.match!=='undefined'`

# javascript - 跨浏览器兼容性

> ID：11924490
> 
> 赞同：0
> 
> 时间：2012-08-12T18:05:06.963
> 
> 标签：javascript, jquery, css, safari, cross-browser

在 Lion 10.8 上的新 Safari 浏览器 6.0 上，此代码未正确执行。在 Firefox 和 iPad Safari 中运行良好。但在 Mac 上，当我上下滚动时，它一直在振动。我试图保持顶部横幅滚动，直到按钮到达页面顶部，此时我希望按钮保持固定。

这是该页面的链接：

[http://www.persiantunedpiano.com/Mirror/events.htm](http://www.persiantunedpiano.com/Mirror/events.htm)

这是js：

```
<script type="text/javascript">
<![CDATA[

  $(document).scroll(function() {var scrollTop = $(window).scrollTop();
                        scroll(0, scrollTop);
                        if (scrollTop > 189) {
                            //alert(scrollTop);
                            $('#top_links').css('position', 'fixed');
                            $('#top_links').css('top', '0');
                            $('#left_links').css('position', 'fixed');
                            $('#left_links').css('top', '57px');

                        } else {
                            //alert('2');

                            $('#top_links').css('position','absolute');
                            $('#top_links').css('top', '186px');
                            $('#left_links').css('position', 'absolute');
                            $('#left_links').css('top', '242px');
                            //allertSize();
                        }
                        });

//]]>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:15:30.807

嗯...似乎太慢了，这会加快速度，不能确定它是否足够快：

（我将 jQuery 元素添加到闭包中，因此您不必每次移动搜索 4 次。）

```
<script type="text/javascript">

  var top_links = $('#top_links');
  var left_links = $('#left_links');

  $(document).scroll(function() {
     var scrollTop = $(window).scrollTop();
     scroll(0, scrollTop);
     if (scrollTop > 189) {
       top_links.css('position', 'fixed')
                .css('top', '0');
       left_links.css('position', 'fixed')
                 .css('top', '57px');
     }
     else {
       top_links.css('position','absolute')
                .css('top', '186px');
       left_links.css('position', 'absolute')
                 .css('top', '242px');
     }
 });
</script> 
```

# api - 如何防止再次使用已签名的请求？

> ID：11924492
> 
> 赞同：0
> 
> 时间：2012-08-12T18:05:51.883
> 
> 标签：api, http, rest, ssl, sniffing

假设 Bob 将此 HTTP 请求发送到 API 以更新他的电子邮件：

`/user/update?email=bob@example.com&userid=1234&sig=x1zz645`

现在一个名为 Zerocool 的嗅探器记录了这个请求以供以后使用。

几天后，Bob 再次将他的电子邮件更新为`email=newbob@example.com`。

几个小时后，Zerocool 现在决定使用他几天前嗅到的内容并运行请求：

`/user/update?email=bob@example.com&userid=1234&sig=x1zz645`

服务器接受了它，Bob 现在很困惑为什么旧的电子邮件又回来了。

我们如何在不使用 SSL 的情况下防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T19:06:51.140

记录最近的请求。在此类请求中嵌入时间戳，并拒绝日志中存在或比日志更早的任何请求。为了更好地衡量，使用私有 md5 校验和对时间戳进行签名，这样它们就不会被伪造。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T03:45:15.940

按照标签中的说明使用 SSL。它已经免疫嗅探和重放攻击。它存在。使用它是免费的。有用。完成。

如果您不能使用 SSL，请将其从您的标签中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:16:29.007

您可以使用[基于哈希的消息身份验证代码 (HMAC)](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)来保护 API ~~，从而可以避免像您提到的那样的重放攻击。~~服务器和客户端都有一个共享的 API 密钥。

Amazon S3 Rest API 使用相同的过程来验证和验证请求。请参阅此处的文档[。](http://docs.amazonwebservices.com/AmazonS3/latest/dev/S3_Authentication2.html)

更新：正如布鲁诺指出的那样，HMAC 本身无法防止重放攻击。您必须在消息中包含一些使用密钥签名的唯一标识符，并在服务器上对其进行验证。

# google-plus - 在非 Google 网站上 +1 - 加号帐户是否必须投票？

> ID：11924493
> 
> 赞同：1
> 
> 时间：2012-08-12T18:05:55.473
> 
> 标签：google-plus, google-plus-one

我在任何地方都找不到这个信息。为了给+1（并增加计数器），投票的人**必须**有一个谷歌帐户。

但问题是。选民拥有一个 gmail 帐户是否足够，或者只有选民拥有 google plus 帐户才会登记投票？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T22:24:50.497

您需要公开的 Google 个人资料才能使用 +1 按钮。目前，创建公开 Google 个人资料的唯一方法是升级到 Google+。一些拥有旧版公开个人资料的用户无需升级到 Google+ 即可使用 +1 按钮。

从[常见问题解答](http://support.google.com/plus/bin/answer.py?hl=en&answer=1047397&topic=1207011&ctx=topic)：

> 为了使用 Google +1 按钮，您需要有一个公开的 Google 个人资料，对全世界可见，其中至少包括您为个人资料选择的名称。

# delphi - Delphi中抽象错误的可能原因？

> ID：11924494
> 
> 赞同：8
> 
> 时间：2012-08-12T18:05:57.203
> 
> 标签：delphi, fastmm

在一个 Delphi 7 项目中，我们安装了 FastMM。不久之后，我们注意到其中一个表单在关闭时开始发出抽象错误消息。我已经对此进行了广泛的调试，但到目前为止我找不到原因。此错误消息的通常原因似乎不适用于此处。该应用程序没有定义抽象类。我还在表单中搜索了可能使用 TStrings 或类似的东西。最重要的是，我们没有（好吧，我们认为我们没有）对此表单进行任何更改。它刚刚坏了。

1.  除了尝试调用未实现的方法之外，还有其他可能导致此错误的原因吗？
2.  FastMM 是否有可能在应用程序中启用了一些隐藏的错误，直到现在仍然隐藏？

如果这些问题的答案是否定的，那么我将继续搜索未实现的方法调用，并为我没有遗漏其他内容而松了一口气。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-12T18:20:33.230

如果存在内存损坏，则可能会引发各种错误，并且很难找到原因。

回答您的问题：1）是的，抽象错误也可能是由内存损坏引起的，并且 2）是的，启用 FastMM 可以使通常被忽视的错误可见（但仍应修复）。

查找内存错误的一些一般建议：

1.  在 FastMM 中尝试“FullDebugMode”设置。
2.  确保您创建的所有内容都与免费匹配。
3.  确保没有任何东西被释放超过一次。
4.  确保对象在被释放后（或在创建之前）未被使用。
5.  打开提示和警告（并在它们发生时修复它们）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T03:27:56.303

“它刚刚坏了”——它可能总是坏了，但现在你知道了。

作为按钮事件的一部分关闭表单时，我发现了一些问题。表单被销毁，然后按钮消息的其余部分被分派到不再存在的按钮。Release 方法通过（从内存中）将 wm_close 消息发送回表单来避免这种情况

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T08:42:25.593

您可以尝试将 u_dzAbstractHandler 添加到您的项目中。它应该在调用该方法的地方引发抽象错误，因此更容易调试它。当然，这仅在在调试器中运行时发生错误时才有帮助。

[https://osdn.net/projects/dzlib-tools/scm/svn/blobs/head/dzlib/trunk/src/u_dzAbstractHandler.pas](https://osdn.net/projects/dzlib-tools/scm/svn/blobs/head/dzlib/trunk/src/u_dzAbstractHandler.pas)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-29T09:59:59.923

回答问题 1“除了尝试调用未实现的方法之外，还有其他可能导致此错误的原因吗？”

是的。这就是在我的情况下导致抽象错误的原因：

```
TWinControl(Sender).Visible:= FALSE; 
```

这在发件人是 TButton 时有效，但在发件人是其他人（如 TAction）时引发错误（当然）。这显然是我的错。我应该使用“as”而不是硬类型转换。

对问题 2 的回答：是的。我也看到了这种情况。我们应该很清楚，这并不意味着 FastMM 有问题。该错误是“休眠的”。FastMM 只触发了它。
实际上，您应该更多地依靠 FastMM 来找到您的问题。为此，将 FastMM 切换到完全调试模式。它将帮助您：

> 确保对象在被释放后（或在创建之前）未被使用

此外，在少数情况下，整个项目都搞砸了，我得到了 Abstract 错误。在我删除 DPROJ 文件之前没有任何效果。只需将您当前的 DPROJ 文件与您背后的文件进行比较，您就会看到 IDE 如何对文件进行 f****。

您还必须修复编译器显示的所有警告！编译器对此很认真。如果没有正当理由，它不会发出警告。解决这个问题，您可能会解决您的问题。

在这种特殊情况下，我还将全部替换`.Free`为`FreeAndNil()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-09T11:49:16.767

可能是您的基类中的抽象函数/过程之一未实现；

试试这个 ：

例如

```
 type

   TBaseClass = class (TObject)

 public

      procedure DoSomething;  virtual; abstract; //not implemented procedure

 end;

  type

    TInheritedClass = class (TBaseClass)

 public

      procedure DoSomething; override;

   end;

//Implementation

procedure TInheritedClass.DoSomething;

begin

 //your code

end; 
```

# ruby-on-rails - 创建全局变量 rails 3.1

> ID：11924495
> 
> 赞同：0
> 
> 时间：2012-08-12T18:05:57.673
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我需要创建一个“全局”变量。我在文件 boot.rb 中创建它。

RAILS_CAR_IMAGES = Rails.root.to_s + "/app/assets/images/" 除非定义？(RAILS_CAR_IMAGES)

但它会弹出一个错误。“未初始化的常量 Rails (NameError)”

我应该在哪里创建一个全局变量（包含相对于根文件夹的路径）来保存上传的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:07:53.257

在`boot.rb`Rails 中尚未初始化...创建`config/initializers`一个名称类似于 car_images.rb 的文件并将代码放在那里

# iphone - 使用单个 Webview 加载多个 URL：在请求之间停止加载更好吗？

> ID：11924496
> 
> 赞同：0
> 
> 时间：2012-08-12T18:05:59.043
> 
> 标签：iphone, uiwebview

关于 UIWebViews 的一般问题。我的应用程序中有一个网络视图。左侧有一些按钮，它们只是将不同的 URL 加载到 webview 中。

在没有 [webview stopLoading] 前一个请求的情况下将新 URL 加载到 webview 是否有任何不良后果？

例如，此流程可能发生：

1.  用户按下 button1 将 urlA 加载到 webview
2.  当 urlA 仍在加载时，用户按下按钮 2 将 urlB 加载到 webview

但这会更好吗？

1.  用户按下 button1 将 urlA 加载到 webview
2.  虽然 urlA 仍在加载并且用户按下按钮 2 获取 urlB
3.  首先调用[webview stopLoading]，然后继续加载urlB。

这种情况有什么最佳实践吗？无论哪种方式都重要吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:42:55.003

根据[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIWebView_Class/Reference/Reference.html)，`stopLoading`必须在视图**消失**或被**销毁**之前调用。这意味着异步事件会继续存在，可能会造成破坏。

但是，没有提及您的情况。我仍然会打电话`stopLoading`只是为了安全起见。如果`loading`web 视图的属性是`NO`，这个方法根本什么都不做。

# javascript - Facebook示例JS登录未加载

> ID：11924499
> 
> 赞同：0
> 
> 时间：2012-08-12T18:06:20.713
> 
> 标签：javascript, facebook, facebook-login

我正在尝试用 JS 替换我的画布应用程序的 PHP 登录名，并且几乎完全从这里[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)和这里[https://developers复制了 Facebook 示例.facebook.com/docs/reference/javascript/FB.login/](https://developers.facebook.com/docs/reference/javascript/FB.login/)。但是，即使警报提示正在打开用户接受权限的提示，也不是。谁能从下面的代码中看出原因？我已经在这几个小时了，我看不出我的代码与建议的代码有何不同。它可能与浏览器保护不运行javascript有关吗？

```
<?php

require_once 'config.php'; // This contains app information
//include_once 'scripts/mysql_connect.php'; // This is the database connection configuration
require_once 'Database.php';
$fbconfig['appUrl'] = "https://localhost/FindAFlatmate-Dev/";

?>

    <html>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Profile Page</title>
    </head>
    <body> 
    <div id="fb-root"></div>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '127865210690483', // App ID
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
        });

        // Additional initialization code here
        alert('Api loaded');

    FB.login(function(response) {
       if (response.authResponse) {
         console.log('Welcome!  Fetching your information.... ');
         FB.api('/me', function(response) {
           console.log('Good to see you, ' + response.name + '.');
         });
       } else {
         console.log('User cancelled login or did not fully authorize.');
       }
     });
      };

      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         ref.parentNode.insertBefore(js, ref);
       }(document));

     </script>
    </body> 
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:42:15.580

> 但是，即使警报提示正在打开用户接受权限的提示，也不是。谁能从下面的代码中看出原因？

您在页面加载时直接调用 FB.login，没有用户交互 - 因此很可能是您的浏览器的弹出窗口阻止程序完全阻止了登录对话框的显示。

FB.login 的一般建议是仅在显式用户交互时调用它，例如用户单击显示“登录”或其他内容的链接/按钮。这样打开 FB.login 的弹出窗口不太可能被阻止，因为当前浏览器中弹出窗口阻止程序的默认配置是仅阻止“自动”打开的弹出窗口，而无需用户以任何方式请求它们。

# c# - 从代码访问数据模板（列表视图）的控件

> ID：11924503
> 
> 赞同：0
> 
> 时间：2012-08-12T18:06:32.547
> 
> 标签：c#, xaml, listview, windows-8, microsoft-metro

我有一个带有自定义数据模板的列表视图，每个 ListViewItem 都有一个文本、一个作者和一个日期。像这样的东西

```
texttexttexttext
Author     Date 
```

现在我想创建多个项目并调整这三个文本框的每个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:24:34.993

通常您可以使用该`FindName`方法 ( [MSDN](http://msdn.microsoft.com/en-us/library/system.windows.frameworktemplate.findname.aspx) ) 执行此操作，但 Windows 8 WinRT 框架中似乎缺少此方法，我还没有找到另一种方法来完成此操作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:08:15.387

您应该使用数据绑定：

```
<ListView ItemsSource="{Binding List}">
     <ListView.ItemTemplate>
          <DataTemplate>
              <TextBlock Text="{Binding Author}" />
          </DataTemplate>
     </ListView.ItemTemplate>
</List> 
```

列表在视图模型和一个`ObservableCollection<Item>`.

物品：

```
public class Item : INofifyPropertyChanged
{
    private string author; 
    public string Author
    {
        get { return author; }
        set 
        {
            author = value;
            var copy = PropertyChanged; // avoid concurrent changes
            if (copy != null)
                copy(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    ...
} 
```

在互联网上搜索更完整的绑定教程...

# wcf - 简单的 WCF "Hello world" 服务在负载下只占用一个 CPU 核心

> ID：11924507
> 
> 赞同：2
> 
> 时间：2012-08-12T18:06:43.850
> 
> 标签：wcf, performance

我有一个基于 basicHttpBinding 的简单“Hello world”服务。该服务托管在四核 CPU 上。

当我运行负载测试时，只有一个核心被占用（95%），其他三个大约 4-8%。

为什么其他核心不用于处理？

设置`ConcurrencyMode = ConcurrencyMode.Multiple`没有帮助。

![在此处输入图像描述](../Images/b130f6edca1d804bc8f53c9c9d63d5f3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T19:17:37.227

为您的服务配置一个`ServiceBehavior`。

WCF`ConcurrencyMode=ConcurrencyMode.Single`默认使用。该模式在一个线程中运行对您服务的所有请求。

> 使用 ConcurrencyMode.Single，只要方法正在运行，WCF 就不会再次调用对象。操作返回后，可以再次调用该对象。

一个 CPU 内核用于运行该线程。

为您的服务添加以下属性以使用所有 CPU：

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple)] 
```

启用该模式时请注意服务状态。如果您更改状态，您可能需要实现自己的锁定。

检查*[ConcurrencyMode 枚举](http://msdn.microsoft.com/en-us/library/system.servicemodel.concurrencymode.aspx)*以获取更多详细信息。

还要确保您的客户端同时进行四个调用（在客户端中实现多线程）。没有它，即使您的服务器支持多线程，您仍然会有顺序的单线程调用处理。

**检查代码后更新：**

您的 WCF 方法不会执行任何可以加载 CPU 的工作。请用一些占用大量 CPU 的函数（计算哈希或阶乘）替换您的方法并重新检查。

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple)]
public class HelloService : IHelloService
{
   public string HelloWorld()
   {
      return "Hello world";
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:14:24.843

[BasicHttpBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpbinding.aspx)的API 文档这样说：

> 不保证任何实例成员都是线程安全的。

这意味着不应从多个线程并行调用单个 BasicHttpBinding 实例，因此不能分布在多个 CPU/CPU 内核上。

# javascript - prettyPhoto 在 Dreamweaver 上完美运行；但不能在任何浏览器上在线工作

> ID：11924510
> 
> 赞同：0
> 
> 时间：2012-08-12T18:07:01.097
> 
> 标签：javascript, jquery, jquery-plugins, dreamweaver, prettyphoto

**解决**

我已经按正确的方向将所有内容上传到 ftp 并进行了多次测试。I2ve 还检查了文件夹名称是否存在大小写问题。问题是什么？我错过了什么吗？顺便说一句，我正在使用mac。

这是我使用 prettyPhoto 的页面之一：http: [//www.gulcebaycik.com/works-design/bade.html](http://www.gulcebaycik.com/works-design/bade.html)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:11:13.487

您到 prettyPhoto JavaScript 和 CSS 的路径会生成 403 错误。解决这个问题，你应该没事。

```
../scripts/prettyPhoto/js/jquery.prettyPhoto.js
../scripts/prettyPhoto/css/prettyPhoto.css 
```

# php - 如何让浏览器远离我的库？它们应该放在哪里？

> ID：11924512
> 
> 赞同：2
> 
> 时间：2012-08-12T18:07:08.467
> 
> 标签：php, security

通过研究，我发现了两种常见的技术来阻止客户端直接使用浏览器访问库：

1.  用来`.htaccess`阻止他们
2.  定义一个常量并将其传递给包含的文件，包含的文件然后检查该常量是否存在。

但是，将这些文件保留在文档根目录之外似乎是明智的。这种方法有什么问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T18:08:39.670

最好的办法是把它放在你的 docroot 之外。没有理由将包含放在直接 HTTP 可访问的位置。

一些共享网络主机配置不当，没有此选项，但大多数都有，而且您在自己的服务器或 VPS 上肯定有此选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T18:13:07.650

要完成 Brad 的回答，您可以按以下方式组织文件夹：

```
/path/to/project/
  public_html/
    index.php
  includes/
    includes.php 
```

您的网络服务器的根文件夹将是`public_html`.

如果你不能修改这个结构，唯一可以接受的方法是使用一个`.htaccess`（或等效的）来防止`includes`被公开访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T18:26:51.547

如果您使用 Apache 网络服务器，您可以拒绝访问所有 .inc.php 文件。您只需将以下内容添加到您的 Apache Vhost 配置中：

```
<FilesMatch .inc.php>
   Order allow, deny
   deny from all
</FilesMatch> 
```

您仍然可以在您的 php 代码中包含这些文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T18:28:05.117

如果库文件只是定义类/函数/任何东西，并且您的服务器没有以可以查看源代码的方式进行配置，那么无论如何通过 Web 服务器请求脚本将无法实现任何目标。话虽如此，如果可以的话，您不妨将它们存储在文档根目录之外。

# python - 在 Emacs 中使用 Python 的 Unicode 转换问题

> ID：11924515
> 
> 赞同：5
> 
> 时间：2012-08-12T18:07:19.487
> 
> 标签：python, emacs, unicode

我试图了解在命令行上运行与作为 Emacs elisp 函数的一部分运行时的一些 Python 脚本行为的区别。

脚本看起来像这样（我使用的是 Python 2.7.1 BTW）：

```
import json; t = {"Foo":"ザ"}; print json.dumps(t).decode("unicode_escape") 
```

也就是说，[通常] 获取一个包含 unicode 字符的 JSON 段，将其转储到它的 unicode 转义版本，然后将其解码回它的 unicode 表示。在命令行上运行时，转储部分返回：

```
'{"Foo": "\\u30b6"}' 
```

打印时看起来像：

```
'{"Foo": "\u30b6"}' 
```

这个的解码部分看起来像：

```
u'{"Foo": "\u30b6"}' 
```

打印时看起来像：

```
{"Foo": "ザ"} 
```

即，结构的原始字符串表示，至少在支持unicode的终端/控制台中（在我的测试平台中，一个xterm）。在 Windows 控制台中，关于 unicode 字符的输出不正确，但脚本不会出错。

在 Emacs 中，转储转换与命令行上的转换相同（至少就打印确认而言），但解码部分令人恐惧：

> 文件“”，第 1 行，在 UnicodeEncodeError：'ascii' 编解码器无法在位置 9 编码字符 u'\u30b6'：序数不在范围内（128）`

我觉得我在这里缺少一些关于脚本或 Emacs 的基本内容（在我的测试平台 23.1.1 中）。打印调用正确的编解码器/语言环境是否有一些自动魔术部分发生在命令行但不在 Emacs 中？我已经尝试为 Emacs 调用显式设置语言环境（这是一个没有 json 逻辑的存根测试）：

```
"LC_ALL=\"en_US.UTF-8\" python -c 's = u\"Fooザ\"; print s'" 
```

产生相同的异常，而

```
"LC_ALL=\"en_US.UTF-8\" python -c 'import sys; enc=sys.stdout.encoding; print enc' " 
```

表示编码为“无”。

如果我尝试使用以下命令强制转换：

```
"LC_ALL=\"en_US.UTF-8\" python -c 's = u\"Fooザ\"; print s.encode(\"utf8\",\"replace\")'" 
```

错误消失了，但结果是在非 unicode 控制台中看到的字符串的“乱码”版本：

```
Fooa?¶ 
```

有任何想法吗？

更新：由于[unutbu](https://stackoverflow.com/users/190597/unutbu) -- b/c 语言环境标识下降，该命令需要用 utf8-encode 显式修饰（请参阅直接使用 unicode 字符串的答案）。就我而言，我从`dumps/decode`序列中得到了需要的东西，所以我添加了额外的必需装饰来达到预期的结果：

`import json; t = {"Foo":"ザ"}; print json.dumps(t).decode("unicode_escape").encode("utf8","replace")`

请注意，这是没有 Emacs 所需的必要转义的“原始”Python。

正如您在查看此问题的原始部分时可能已经猜到的那样，我将其用作 Emacs 中某些 JSON 格式化逻辑的一部分——请参阅[我](https://stackoverflow.com/questions/435847/emacs-mode-to-edit-json/7934783#7934783)对[这个问题](https://stackoverflow.com/questions/435847/emacs-mode-to-edit-json)的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T19:31:21.350

Python wiki 页面， “ [PrintFails”](http://wiki.python.org/moin/PrintFails)说

> 当 Python 没有检测到所需的输出字符集时，它将 sys.stdout.encoding 设置为 None，并且 print 将调用“ascii”编解码器。

似乎当从 elisp 函数运行 python 时，它无法检测到所需的字符集，因此它默认为“ascii”。因此，尝试打印 unicode 会默认导致 python 将 unicode 编码为 ascii，这是错误的原因。

* * *

替换`u\"Fooザ\"`为`u\"Foo\\u30b6\"`似乎有效：

```
(defun mytest ()
  (interactive)
  (shell-command-on-region (point)
         (point) "LC_ALL=\"en_US.UTF-8\" python -c 's = u\"Foo\\u30b6\"; print s.encode(\"utf8\",\"replace\")'" nil t)) 
```

`C-x` `C-e` `M-x` `mytest`

产量

```
Fooザ 
```

# entity-framework - EF Code first 4.3 - 如何将项目添加到列表<>？

> ID：11924524
> 
> 赞同：0
> 
> 时间：2012-08-12T18:08:07.983
> 
> 标签：entity-framework, list, frameworks, entity

我有这样的事情：

```
public class Category
{
    [Key]
    public int Id { get; set; }

    public string Name { get; set; }
    public List<Thread> Threads { get; set; }
}
public class Thread
{
    [Key]
    public int Id { get; set; }

    public List<Post> Posts { get; set; }
}

public class Post
{
    [Key]
    public int Id { get; set; }
} 
```

而且我不知道如何将线程项目添加到现有类别。我试过这样的事情：

```
var context = new Db();
var thr = new Thread
        {...(adding new Post item here, not important since this works perfectly)...};
context.Categories.Single(c => c.Name == "some_category").Threads.Add(thr); 
```

但这显然不想工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:37:25.360

您是否实际上将新的 Thread 项目添加到您的上下文中以便对其进行跟踪？如果您的上下文不知道它存在，它不会将其添加到数据库中。

```
var context = new Db();
var thr = new Thread
        {...(adding new Post item here, not important since this works perfectly)...};

//add thread to context
context.Threads.Add(thr);

context.Categories.Single(c => c.Name == "some_category").Threads.Add(thr); 
```

# ruby-on-rails - rails 生成模型

> ID：11924526
> 
> 赞同：57
> 
> 时间：2012-08-12T18:08:20.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在尝试按照“Head First Rails”一书中的说明进行操作，第 50 页上说要创建一个模型，但我无法使用 rails 命令创建一个模型。

当我在这个提示符下输入：localhost:~ home$

```
 rails generate model ad name:string description:text price:decimal seller_id:integer email:string img_url:string 
```

我明白了：

```
Usage:
  rails new APP_PATH [options]

Options:
  -r, [--ruby=PATH]              # Path to the Ruby binary of your choice
                                 # Default: /Users/home/.rvm/rubies/ruby-1.9.3-p125/bin/ruby
  -b, [--builder=BUILDER]        # Path to a application builder (can be a filesystem path or URL)
  -m, [--template=TEMPLATE]      # Path to an application template (can be a filesystem path or URL)
      [--skip-gemfile]           # Don't create a Gemfile
      [--skip-bundle]            # Don't run bundle install
  -G, [--skip-git]               # Skip Git ignores and keeps
  -O, [--skip-active-record]     # Skip Active Record files
  -S, [--skip-sprockets]         # Skip Sprockets files
  -d, [--database=DATABASE]      # Preconfigure for selected database (options: mysql/oracle/postgresql/sqlite3/frontbase/ibm_db/sqlserver/jdbcmysql/jdbcsqlite3/jdbcpostgresql/jdbc)
                                 # Default: sqlite3
  -j, [--javascript=JAVASCRIPT]  # Preconfigure for selected JavaScript library
                                 # Default: jquery
  -J, [--skip-javascript]        # Skip JavaScript files
      [--dev]                    # Setup the application with Gemfile pointing to your Rails checkout
      [--edge]                   # Setup the application with Gemfile pointing to Rails repository
  -T, [--skip-test-unit]         # Skip Test::Unit files
      [--old-style-hash]         # Force using old style hash (:foo => 'bar') on Ruby >= 1.9

Runtime options:
  -f, [--force]    # Overwrite files that already exist
  -p, [--pretend]  # Run but do not make any changes
  -q, [--quiet]    # Suppress status output
  -s, [--skip]     # Skip files that already exist

Rails options:
  -h, [--help]     # Show this help message and quit
  -v, [--version]  # Show Rails version number and quit

Description:
    The 'rails new' command creates a new Rails application with a default
    directory structure and configuration at the path you specify.

    You can specify extra command-line arguments to be used every time
    'rails new' runs in the .railsrc configuration file in your home directory.

    Note that the arguments specified in the .railsrc file don't affect the
    defaults values shown above in this help message.

Example:
    rails new ~/Code/Ruby/weblog

    This generates a skeletal Rails installation in ~/Code/Ruby/weblog.
    See the README in the newly created application to get going.
localhost:~ home$ 
```

我正在使用 Rails -v 3.2.8 和 Ruby 1.9.3p125

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-08-12T18:28:32.577

代码没问题，但您在错误的目录中。您必须在您的 rails 项目目录中运行这些命令。

从头开始的正常方法是：

```
$ rails new PROJECT_NAME
$ cd PROJECT_NAME
$ rails generate model ad \
    name:string \ 
    description:text \
    price:decimal \
    seller_id:integer \
    email:string img_url:string 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-12T17:03:32.743

该错误表明您尚未创建 rails 项目，或者您不在 rails 项目目录中。

假设您正在处理 myapp 项目。您必须在命令行上移动到该项目目录，然后生成模型。以下是一些您可以参考的步骤。

示例：假设您尚未创建 Rails 应用程序：

```
$> rails new myapp
$> cd myapp 
```

现在从命令行生成模型。

```
$> rails generate model your_model_name 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-10T16:07:50.503

对我来说，发生的事情是我使用 rails new rails new chapter_2 生成了应用程序，但 RVM --default 具有 rails 4.0.2 gem，但我的 chapter_2 项目使用带有 rails 3.2.16 的新 gemset。

所以当我跑

```
rails generate scaffold User name:string email:string 
```

控制台显示

```
Usage:
   rails new APP_PATH [options] 
```

所以我用 rails 3.2.16 gem 修复了 RVM 和 gemset，然后再次生成应用程序然后我执行

```
 rails generate scaffold User name:string email:string 
```

它奏效了

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-12T18:32:39.513

您需要先创建新的 Rails 应用程序。跑

```
rails new mebay
cd mebay
bundle install
rails generate model ... 
```

并尝试查找 Rails 3 教程，因为 2.1 指南 ( [http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html) ) 是一个很好的起点，所以有很多变化。

# php - single.php 中的自定义侧边栏

> ID：11924527
> 
> 赞同：0
> 
> 时间：2012-08-12T18:08:26.050
> 
> 标签：php, wordpress

我使用此代码在 wordpress 中显示自定义 single.php 页面（按类别），它工作正常。

```
 get_header(); ?>

        <div id="container">
            <div id="content" role="main">

            <?php
              $post = $wp_query->post;

              if (in_category('4')) {
                  include(TEMPLATEPATH.'/loop-single-recept.php');
              } elseif (in_category('7')) {
                  include(TEMPLATEPATH.'/loop-single.php');
              } else {
                  include(TEMPLATEPATH.'/loop-single.php');
              }
                ?>

            </div><!-- #content -->
        </div><!-- #container -->

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

但我也想在每个 single.php 页面中显示自定义侧边栏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:16:05.623

您可以创建多个侧边栏文件，然后使用（通常为空）参数调用它们`<?php get_sidebar() ?>`

例如，您创建一个替代侧边栏并将其命名为 sidebar-alternative.php，然后使用`<?php get_sidebar('alternative'); ?>`

所以你的代码可能是；

```
 <?php

          if (in_category('4')) {
              get_sidebar();
          } elseif (in_category('7')) {
              get_sidebar('alternative');
          } else {
              get_sidebar('alternative');
          }

         ?> 
```

顺便说一句，我没有提出问题，但您应该考虑接受您的一些答案，因为它会使人们无法回答 - [Stackoverflow Answers](https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-02T16:32:38.847

有时 in_category() 似乎不起作用，我喜欢从 $wp_query 变量中获取类别名称并包含我自己的文件：

```
if($wp_query->query['category_name'] == 'your-category-name-1') {

    include_once('sidebar-one.php');

} else if($wp_query->query['category_name'] == 'your-category-name-2') {

    include_once('sidebar-two.php');

} else {

    include_once('sidebar-three.php');

} 
```

# android - GridView 与所有正方形大小相等的框

> ID：11924529
> 
> 赞同：0
> 
> 时间：2012-08-12T18:08:35.033
> 
> 标签：android, gridview

在我正在进行的一个实验项目中，我试图制作一个比实际屏幕更宽的 GridView，并且在所有“框”大小相同的情况下，水平和垂直均可滚动。不，我正在努力让 GridView 水平滚动并保持完美的正方形，并且完全彼此相邻。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:17:09.057

`GridView`不是为水平滚动而设计的。欢迎您尝试将 a 放入 a`GridView`中`HorizontalScrollView`，如果幸运的话，它会起作用。

`GridView`让您以属性的形式显式控制列的大小，例如`android:columnWidth`. 行的高度取决于您放入行中的内容——因此，您可以确保将列宽设置为与行高相同。

话虽如此，请记住，内置小部件和容器并非旨在处理所有可能的情况。根据您的工作，您可能会得到更好的服务，要么尝试不同的方法（例如，使用支持水平和垂直滚动地图概念的 2D 游戏引擎），要么创建满足您需要的自己的小部件。

# regex - 正则表达式查找 unix 路径而不是 URL

> ID：11924535
> 
> 赞同：0
> 
> 时间：2012-08-12T18:08:58.797
> 
> 标签：regex

我一直在尝试提出一个正则表达式，它会从给定文本中过滤掉所有有效的 Unix 路径，但不会匹配任何 URL（例如`http://...`）

以下路径均有效：

```
/home/username/some_file.txt
/home/username/some_file.longext
"/path/to/file/some file.longext" 
```

但它不应该与以下任何一个匹配：

```
http://www.somelink.com
ftp://www.somelink.co.uk
https://www.somelink.com and so on 
```

我想出了这个，但它也匹配所有 URL，这是我试图过滤掉的东西：

```
"?[a-zA-Z0-9\/].*\.[a-zA-Z0-9].*"? 
```

编辑：我应该提到输入文本实际上是来自内部带有 URL 以及有效 Unix 路径的文件的内容，因此正则表达式需要能够匹配文本内任何位置的任何路径，除了匹配的 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T19:28:34.620

您应该知道，您提出的任何解决方案都只是一种启发式方法。

```
cd /tmp
mkdir test
cd test
mkdir http:
cd http:
mkdir www.google.com
cd www.google.com
echo "I'm a file, not a web site" > 'search?q=Unix+path+syntax+double+slash'
cd /tmp/test 
```

现在[http://www.google.com/search?q=Unix+path+syntax+double+slash](http://www.google.com/search?q=Unix+path+syntax+double+slash)既是：URL 又是文件路径：

```
cat 'http://www.google.com/search?q=Unix+path+syntax+double+slash'
w3m 'http://www.google.com/search?q=Unix+path+syntax+double+slash' 
```

了解什么是路径名和什么不是路径名的唯一可靠方法是通过上下文。to 的参数`cat`是路径名。一个论点`w3m`不是。在自由格式的文本中，不解析作者的母语，你在猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T18:14:35.527

假设您的路径是绝对的并且不需要检查路径是否存在，它是可读的或类似的，它似乎就像尝试匹配字符串开头的斜杠一样简单。它应该像`^"?/`. 这足以过滤掉 URL。

# cuda - 来自 2D 阵列 CUDA 的 2D 纹理

> ID：11924537
> 
> 赞同：1
> 
> 时间：2012-08-12T18:09:08.590
> 
> 标签：cuda

我正在尝试将 Nx3 数组传递给内核并像在纹理内存中一样从它读取并写入第二个数组。这是我的 N=8 的简化代码：

```
#include <cstdio>
#include "handle.h"
using namespace std;

texture<float,2> tex_w;

__global__ void kernel(int imax, float(*w)[3], float (*f)[3])
{
  int i = threadIdx.x;
  int j = threadIdx.y;

  if(i<imax)
      f[i][j] = tex2D(tex_w, i, j);
}

void print_to_stdio(int imax, float (*w)[3])
{
  for (int i=0; i<imax; i++)
    {
      printf("%2d  %3.6f\t  %3.6f\t %3.6f\n",i, w[i][0], w[i][1], w[i][2]);
    }
}

int main(void)
{
  int imax = 8;
  float (*w)[3];
  float (*d_w)[3], (*d_f)[3];
  dim3 grid(imax,3);

  w = (float (*)[3])malloc(imax*3*sizeof(float));

  for(int i=0; i<imax; i++)
    {
      for(int j=0; j<3; j++)
        {
          w[i][j] = i + 0.01f*j;
        }
    }

  cudaMalloc( (void**) &d_w, 3*imax*sizeof(float) );
  cudaMalloc( (void**) &d_f, 3*imax*sizeof(float) );

  cudaChannelFormatDesc desc = cudaCreateChannelDesc<float>();
  HANDLE_ERROR( cudaBindTexture2D(NULL, tex_w, d_w, desc, imax, 3, sizeof(float)*imax ) );

  cudaMemcpy(d_w, w, 3*imax*sizeof(float), cudaMemcpyHostToDevice);

  // just use threads for simplicity                                                                  
  kernel<<<1,grid>>>(imax, d_w, d_f);

  cudaMemcpy(w, d_f, 3*imax*sizeof(float), cudaMemcpyDeviceToHost);

  cudaUnbindTexture(tex_w);
  cudaFree(d_w);
  cudaFree(d_f);

  print_to_stdio(imax, w);

  free(w);
  return 0;
} 
```

运行此代码我希望得到：

```
0  0.000000   0.010000   0.020000
1  1.000000   1.010000   1.020000
2  2.000000   2.010000   2.020000
3  3.000000   3.010000   3.020000
4  4.000000   4.010000   4.020000
5  5.000000   5.010000   5.020000
6  6.000000   6.010000   6.020000
7  7.000000   7.010000   7.020000 
```

但相反我得到：

```
0  0.000000   2.020000   5.010000
1  0.010000   3.000000   5.020000
2  0.020000   3.010000   6.000000
3  1.000000   3.020000   6.010000
4  1.010000   4.000000   6.020000
5  1.020000   4.010000   7.000000
6  2.000000   4.020000   7.010000
7  2.010000   5.000000   7.020000 
```

我认为这与我给 cudaBindTexture2D 的 pitch 参数有关，但使用较小的值会产生无效的参数错误。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T19:10:21.460

在 brano 的回应并更多地研究了音高的工作原理之后，我将回答我自己的问题。这是修改后的代码：

```
#include <cstdio>
#include <iostream>
#include "handle.cu"

using namespace std;

texture<float,2,cudaReadModeElementType> tex_w;

__global__ void kernel(int imax, float (*f)[3])
{
  int i = threadIdx.x;
  int j = threadIdx.y;
  // width = 3, height = imax                                                                         
  // but we have imax threads in x, 3 in y                                                            
  // therefore height corresponds to x threads (i)                                                    
  // and width corresponds to y threads (j)                                                           
  if(i<imax)
    {
      // linear filtering looks between indices                                                       
      f[i][j] = tex2D(tex_w, j+0.5f, i+0.5f);
    }
}

void print_to_stdio(int imax, float (*w)[3])
{
  for (int i=0; i<imax; i++)
    {
      printf("%2d  %3.3f  %3.3f  %3.3f\n",i, w[i][0], w[i][1], w[i][2]);
    }
  printf("\n");
}

int main(void)
{
  int imax = 8;
  float (*w)[3];
  float (*d_f)[3], *d_w;
  dim3 grid(imax,3);

  w = (float (*)[3])malloc(imax*3*sizeof(float));

  for(int i=0; i<imax; i++)
    {
      for(int j=0; j<3; j++)
        {
          w[i][j] = i + 0.01f*j;
        }
    }

  print_to_stdio(imax, w);

  size_t pitch;
  HANDLE_ERROR( cudaMallocPitch((void**)&d_w, &pitch, 3*sizeof(float), imax) );

  HANDLE_ERROR( cudaMemcpy2D(d_w,             // device destination                                   
                             pitch,           // device pitch (calculated above)                      
                             w,               // src on host                                          
                             3*sizeof(float), // pitch on src (no padding so just width of row)       
                             3*sizeof(float), // width of data in bytes                               
                             imax,            // height of data                                       
                             cudaMemcpyHostToDevice) );

  HANDLE_ERROR( cudaBindTexture2D(NULL, tex_w, d_w, tex_w.channelDesc, 3, imax, pitch) );

  tex_w.normalized = false;  // don't use normalized values                                           
  tex_w.filterMode = cudaFilterModeLinear;
  tex_w.addressMode[0] = cudaAddressModeClamp; // don't wrap around indices                           
  tex_w.addressMode[1] = cudaAddressModeClamp;

  // d_f will have result array                                                                       
  cudaMalloc( &d_f, 3*imax*sizeof(float) );

  // just use threads for simplicity                                                                  
  kernel<<<1,grid>>>(imax, d_f);

  cudaMemcpy(w, d_f, 3*imax*sizeof(float), cudaMemcpyDeviceToHost);

  cudaUnbindTexture(tex_w);
  cudaFree(d_w);
  cudaFree(d_f);

  print_to_stdio(imax, w);

  free(w);
  return 0;
} 
```

使用 memcpy2D() 代替使用 memcpy() 并且必须处理主机上的音调，使用 memcpy2D() 接受设备数据和主机数据的音调参数。由于我们在主机上使用简单分配的数据，我的理解是间距将只是行宽，或 3*sizeof(float)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T10:34:53.130

我可以给你一个完整的解决方案，但你可能学不会:D，所以这里有一些提示，也许你可以自己解决其余的问题。

提示 1.
使用`cudaBindTexture2D`时要求偏移和俯仰。这两个参数都有一定的硬件相关对齐限制。如果您使用 ，偏移量保证为 0 `cudaMalloc(..)`。使用 检索音高`cudaMallocPitch(..)`。您还需要确保您的主机内存以相同的方式投放，否则您`memcpy`将无法按预期工作。

提示 2.
了解二维索引。在访问元素时，`W[i][j]`您需要知道该元素`W[i][j+1]`是内存中的下一个元素，而不是`W[i+1][j]`。

提示 3.
使用 1D 数组并自己计算 2D 索引。这会给你更好的控制。

# unit-testing - 所有单元测试都应该成功吗？

> ID：11924539
> 
> 赞同：6
> 
> 时间：2012-08-12T18:09:32.770
> 
> 标签：unit-testing, language-agnostic, phpunit

假设您制作了一个应用程序，试图将字母 A 中的内容尽可能地音译为字母 B。

因为语言 B 非常复杂，所以这并不总是成功的。但是你确实得到了一个近似的音译。

考虑到您预计 20-30% 会失败，在这种情况下您将如何构建单元测试？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T18:20:06.937

单元测试的成功必须始终是目标。您使用它的方式，您无法区分软件中的严重错误和您似乎期望的翻译错误。

我建议将两者分开：

1.  仅使用单元测试来确保您的软件以您期望的方式工作（即使这包括翻译中的一些错误）
2.  生成包含您的软件生成的翻译的测试数据集。您可以手动检查此测试数据集，也可以使用 R 等统计软件包来了解您的翻译质量。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-12T18:13:38.563

单元测试应该是确定性的。失败的测试应该表明软件失败，而不是*“按预期工作”*。对于您的情况，以您可以确定结果的方式准备数据并对其进行测试，无论转换成功还是失败（测试失败始终是一种选择，因为您*期望失败*- 重要的是您始终可以控制何时您的测试通过/失败）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-12T18:13:22.160

预期会失败的单元测试不是单元测试。您需要通过使用充当过滤器并确定它是否“足够接近”并确定通过/失败的评估函数来更改成功的定义。随着您的翻译变得更好，您可以提高过滤器的标准。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-12T22:35:51.593

我在这种情况下学到的一种技术是只测试代码中功能性（或确定性）的部分。当然，如果要从非确定性部分中分离出确定性部分，则是困难的部分。简写方式是“减少 [或重构] 为功能性”，这意味着分离出确定性的代码部分，然后测试这些部分。

有关基于场景的上下文，请阅读这篇关于在围绕遗留代码进行测试时应用该技术的[博客文章（并使用名为](http://arlobelshee.com/what-makes-a-good-test-suite/llewellyn-falco)[ApprovalTests](http://www.ApprovalTests.com)的开源单元测试库）。

这里可能感兴趣的另一种技术是“基于理论的”测试。有关更多信息，请查看此[博客](http://llewellynfalco.blogspot.com/2010/09/theory-based-testing.html)文章。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T23:44:06.133

单元测试可能失败的唯一原因是是否涉及计时（主要是在测试电子设备的情况下）。但是，即使在这些情况下，目标也应该是从单元测试中消除计时问题，例如，如果可能的话，通过延长/切换超时或其他计时问题。当不可能时，应该有很好的记录。

消除时序问题并使测试具有确定性的另一种方法是使用某种注入方法为所有外部接口编写存根，即能够设置外部接口方法将返回的值。通过以这种方式设置单元测试，您可以从字面上测试所有内容以及每个错误条件。

（故事：我在一家公司工作，偶尔会有几个单元测试失败。只有少数人能够分析这些是严重错误还是时间问题。首先做好单元测试会节省很多时间） .

# asp.net - 获取执行 Web 应用程序的汇编版本

> ID：11924540
> 
> 赞同：2
> 
> 时间：2012-08-12T18:09:39.960
> 
> 标签：asp.net, reflection, .net-assembly, outputcache

我想在我的库中实现一些缓存破坏代码，这些代码可以与 ASP.NET Web 应用程序/站点集成。这将通过将版本字符串附加到 URL 的末尾来实现。我想为缓存清除提供的默认版本提供程序将使用主机网站的程序集版本。

目前，这基本上是我提取此版本号的方式：

```
HttpContext.Current
           .ApplicationInstance
           .GetType()
           .Assembly
           .GetName()
           .Version
           .ToString() 
```

不幸的是，至少对于我的示例测试站点`Assembly`来说，应用程序实例是一个生成的程序集（我猜是因为它`global.asax`被编译成一个新的程序集）。在[获取 Web 应用程序程序集名称中，无论当前正在执行的程序集如何](https://stackoverflow.com/questions/7463284/get-web-application-assembly-name-regardless-of-current-executing-assembly)，SLaks 都表示您可以使用它`BaseType`来获取实际站点程序集的类型，但我假设如果站点不使用`global.asax`文件，`BaseType`则会在 BCL 中为您提供一些东西。

是否有任何可靠的方法来提取 ASP.NET Web 应用程序的程序集版本号？我还准备使用替代方法来生成每个构建唯一令牌，这不需要应用程序开发人员额外的构建步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:17:50.083

我的策略是从我的自定义类型中选择一个类型，然后向运行时询问该类型程序集的版本号。

```
 typeof( SomeKnownType ).Assembly.GetName().Version 
```

# unit-testing - 测试是否调用了模拟方法有什么意义？

> ID：11924542
> 
> 赞同：7
> 
> 时间：2012-08-12T18:10:00.273
> 
> 标签：unit-testing, mocking

好的，所以这可能是一个危险的问题。我已经做了一段时间的单元测试，但是由于某种原因，我今天早上醒来，问了自己这个问题。

假设我有一个 UserFactory 接口，它有 CreateUser 方法。

在某些时候我需要创建一个用户权利？因此，我创建了一个测试，检查是否在适当的位置为 UserFactory 调用了 CreateUser。

现在，单元测试与实际代码非常耦合——这很好。但也许有点太多了？如中所示，打破测试的唯一方法是不调用 CreateUser。我们没有检查它的实现等，而只是检查接口是否被调用。但是，无论谁删除了该调用，都会有一个失败的测试，并最终从验证 CreateUser 被调用的步骤中删除验证语句。

我已经看到这种情况一遍又一遍地发生。

有人可以把灯带回给我并解释为什么验证模拟对象的方法已被调用是有益的吗？我可以理解为什么设置它们可能很有用，比如 CreateUser 应该为代码的后面部分返回一个虚拟用户，但是在我们简单且仅验证它们是否被调用的地方是让我着迷的部分。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:15:59.087

您不仅可以验证接口是否已被调用，还可以针对接口的不同行为进行多次测试。尤其是极端情况——当 CreateUser~~返回错误~~引发异常时，您的代码是否会优雅地故障转移？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T18:18:22.030

> 打破测试的唯一方法是不调用 CreateUser

因此，在具有一些复杂性、一些条件等的方法中，跳过该调用可能很容易；以后的维护可能会无意中导致错过呼叫。

所以我认为这些副作用测试是有价值的。在您的情况下，是否应该始终调用 CreateUser？抛出异常时怎么办？在某些情况下检查 CreateUser 是否**未被**调用可能会有一些价值。

我同意你的观点，在简单的情况下，有时会感觉我们的测试和输出代码或多或少地重复自己，维护变成了一种无意识的“更改代码，更改测试”活动。我认为当有更多路径和错误处理时，价值会变得更加清晰。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T18:25:58.927

验证模拟对象通常是必要的，正如您所提到的，单元测试有时与被测类紧密耦合。

我不知道如何对你的问题给出一个好的答案，但我会尝试的。

以这段代码为例，其中 userRepository 是一个依赖项（示例不是很好）。

```
public void doSomething(User user) {
    if( user.isValid() ) {
        userRepository.save(user)
    } else {
        user.invalidate();
    }
} 
```

对此进行测试的一种方法是插入连接到数据库的真实存储库，并验证用户是否被持久化。但是由于我是单元测试，所以我的测试中不能有外部依赖。

现在，您还需要哪些其他选项来验证用户有效的场景？由于 userRepository.save() 返回 void，因此验证副作用的唯一方法是验证是否调用了 mock。如果我不验证模拟，那么单元测试就不会很好，因为我可以删除保存对象的行，并且测试仍然会通过。

对于一些返回值的模拟，情况并非如此，然后在方法中使用了值。这通常意味着如果模拟返回 null，则应用程序会抛出 NullPointerException（在 java 的情况下）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T18:49:57.610

了解依赖项在测试代码中的用途很重要：

*   帮助履行班级合同/责任（如您的`UserFactory`示例）
*   允许委派超出类范围但必须完成的工作（例如，日志功能可能就是这种情况）

现在，如果依赖（模拟）*不能帮助*，显然依赖于这个帮助的测试代码也会失败。在这种情况下，进行额外的测试来验证是否调用了依赖项并不是很有用。任何调用都不会导致依赖于它并带有明确消息的测试中的多次失败。

回到你的工厂例子，当它没有被调用时会发生什么？其他一些测试，可能是那些验证该用户是否*被保存在某个地方*，或者*用它制作的东西*会失败。

自然有第二组依赖项，它们根本不影响您的代码，而是在后台静默执行。但是，这些很可能会反映在您的代码职责中，例如：

> SaveUser 方法应将新用户保存在存储库中并**记录操作结果**

通常，除了验证是否调用了适当的方法之外，没有其他方法可以进行行为检查。

作为结论，在确定是否应该编写测试时要考虑两个问题：

*   这个测试会验证我班级的（部分）责任吗？
*   当此测试通过/失败时，我将获得关于测试代码的哪些知识？

除非有必要，否则不要测试你的代码是否调用了其他代码；**测试您的代码是否以您认为的方式工作**。

# html - iPad默认输入边框半径

> ID：11924543
> 
> 赞同：4
> 
> 时间：2012-08-12T18:10:32.067
> 
> 标签：html, css, ipad

新 iPad 在我的所有输入字段上都设置了默认边框半径。我怎样才能摆脱这个默认半径？

我验证了 CSS 中没有边框半径属性，并且当 MacBook Pro 呈现我的网站时没有半径，但新 iPad 确实在文本输入字段上有一个半径。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T18:21:40.847

你确定它是新 iPad 独有的吗？或者它可能与所有 iOS 设备有关？我问是因为 iOS 设备中的 Safari 浏览器确实将特定样式应用于输入元素。
但是，您可以使用以下方法将其关闭：

```
input {
  -webkit-appearance: none;
} 
```

这样做并`border-radius: 0`开始按照您的预期工作。

之前已经在这里回答过几次：[关闭 iPhone/Safari 输入元素舍入](https://stackoverflow.com/questions/2918707/turn-off-iphone-safari-input-element-rounding)。

# java - Java - 使用 while 循环解决计算

> ID：11924546
> 
> 赞同：1
> 
> 时间：2012-08-12T18:10:45.790
> 
> 标签：java, while-loop

我从模拟试卷中被困在这个问题上。我需要将“from”数字乘以“n”数字。换句话说：from*(from+1) *(from+2)* ...*n。

我需要通过使用while循环来解决这个问题。到目前为止我已经这样做了，不知道该怎么做。

```
class Fact {

    private int factPartND(final int from, final int n) {

        int c = 1;
        int z = from;
        int y = n;
        int num = 0;

        while (y >= z) {

            num += from * (from + c);// need to stop multiplying from for each
                                     // iteration?
            c++;
            y--;
        }

        return num;
    }

    public static void main(String[] args) {
        Fact f = new Fact();
        int test = f.factPartND(5, 11);
        System.out.println(test);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T08:27:04.597

`while`您的循环**条件**有问题。

```
while(y>=z)
{
    ....
} 
```

将执行您的代码 n+1 次。即如果你想从 5 到 11 执行，这个条件将允许执行到 12。

`while(y>z)`在 while 循环中更好地使用条件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T18:14:32.463

你的计算是：

```
from * (from + 1) * (from + 2) * ... * (from + n) 
```

将每个*因素*视为循环的一次迭代。

因此，您的第二次迭代应该将累积值乘以`(from + 1)`，然后再进行一次迭代乘以`(from + i)`、 where`from < i < n`等等，直到您将累积值乘以`(from + n)`。

您的代码非常接近 - 您`(from + c)`在每次迭代中都有，但您的算术是错误的。

正如已经提到的，使用`c` *和* `y`跟踪你的循环有点令人困惑，当它足以测试时`c`。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-12T18:22:21.303

```
public class Fact {

    private int factPartND(final int from, final int n) {
        int m = 1;
        int result = from;

        while (m <= n) {
            result *= (from + m++);
        }

        return result;
    }

    public static void main(String[] args) {
        Fact f = new Fact();
        int test = f.factPartND(5, 8);
        System.out.println(test);
    }
} 
```

如果你用 5, 11 来做，你就会溢出。那么你应该使用 BigInteger 而不是 int。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-12T18:24:37.240

也许是这样的：

```
package homework;
public class Homework {

    public static int fact(int from, int to){
    int result = 1;
    while(to>0){
        result*=from+to;
        to--;
    }
    return result*from;
    }
    public static void main(String[] args) {
    System.out.println(fact(2,4));
    }
} 
```

# codeigniter - Codeigniter：将会话用户数据从控制器传递到视图

> ID：11924548
> 
> 赞同：0
> 
> 时间：2012-08-12T18:11:04.047
> 
> 标签：codeigniter, variables

所以这是一个小问题，但经过研究仍然无法使这项工作。我想从会话用户数据中传递“用户名”变量。从我的控制器中查看。这是我的代码：

控制器：

```
 function members_area()
{
    $user['username'] = $this->session->userdata('username');
    $data['main_content'] = 'members_area';
    $this->load->view('includes/template', $data, $user);
} 
```

鉴于我使用这个：

```
<?php echo "$username" ?> 
```

编辑：我以更简单的方式解决了它。因为会话用户数据在用户登录时在每个页面中都是全局可用的，所以不需要像这样传递它。

我刚刚在我的视图页面中做了这一行：

```
<?php echo $name = $this->session->userdata('username'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:18:31.160

你只需要填充`$data`：

```
// Controller
function members_area()
{
  $data['username'] = $this->session->userdata('username');
  $data['main_content'] = 'members_area';
  $this->load->view('includes/template', $data);
}

// View
<?= $username ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T18:18:43.403

的第三个参数`$this->load->view`是 True 或 False - 不是另一个变量。

[文档](http://codeigniter.com/user_guide/general/views.html)提供了关于视图如何工作的精彩概述。

做这个：

```
$this->load->view('includes/template', $data); 
```

然后在视图中：

```
<?php echo $username; ?> 
```

如果您打算使用模板，您也可以考虑为 CodeIgniter 使用真正的模板插件。

祝你好运！

# java - 哪些 Java 代码可以移动到 GPU？

> ID：11924550
> 
> 赞同：5
> 
> 时间：2012-08-12T18:11:12.177
> 
> 标签：java, gpu, rootbeer

有了[rootbeer](https://github.com/pcpratts/rootbeer1)框架，Java 的 GPU 编程成为可能。

哪些 Java 代码应该用于 rootbeer，哪些代码应该更好地在 Java VM 中运行？

或者其他：哪个代码产生更多开销并且没有意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T19:10:00.793

说起来有点傻，但显而易见的答案是“对于 GPU 优于 CPU 的问题”。现代 GPU 有超过一千个核心，但内存相对较少，所以一般来说，这意味着很[适合并行化](http://en.wikipedia.org/wiki/Embarrassingly_parallel)并且不会占用太多内存的东西。

G. Bach 在评论中提到了针对加密货币的暴力攻击，这是一个很好的例子。科学模拟是另一个很好的例子，事实上，几年前一些研究机构（尤其是 NASA）拥有 Playstation 3 的运行模拟集群。维基百科关于 GPGPU 计算的文章[列出了](http://en.wikipedia.org/wiki/GPGPU#Applications)该技术的几种应用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T20:37:14.260

除了其他答案：rootbeer jet 不支持翻译一些 Java 功能。

1.  本机方法
2.  反射
3.  动态方法调用
4.  在显示器里面睡觉。
5.  垃圾收集（！）

您应该避免使用这些功能的代码。

Rootbeer 的更新正在生产中，以提供垃圾收集和其他缺少的 Java 功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T09:12:37.697

为了通过 GPU 获得加速，您希望每个数据元素进行大量计算，因为数据传输非常慢。您通常希望在 GPU 上运行 2 或 3 个嵌套 for 循环，至少有 1000 个线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T19:21:57.713

当前 GPU 的限制之一是它可以将一个简单的方法加载到每个内核并立即执行。通用 CPU 可以加载更多代码和数据并独立完成。

有矢量样式的代码在 GPU 上可能会更快，我有一天会看到它是一种选择，但大多数代码（如果不是按处理能力，按体积计算）将在 CPU 上。

# html - 如何在另一个div中居中div？

> ID：11924553
> 
> 赞同：1
> 
> 时间：2012-08-12T18:11:43.987
> 
> 标签：html, css

我正在学习如何使用相对/绝对位置。

但是，我有点卡住了。

我试图在一个 div 中水平居中一个 div，但是当我添加`margin: 0 auto;`它时什么都不做。

我做了一个[小提琴。](http://jsfiddle.net/MichaelT/Q8NVH/)

或者这里的代码：

```
<!DOCTYPE HTML>
<html lang="en-UK">
    <head>
        <link href="DivTest.css" rel ="stylesheet" type="text/css">
        <title></title>
    </head>
    <body>
    <div id="header"></div>
    <div id="outer">
        <div id="inner"></div>
    </div>
    </body>
</html> 
```

CSS：

```
body, html {
     margin: 0;
     width: 100%;
}

#header{
     position: relative;
     width: 100%;
     height: 200px;
     background-color: lightgreen;
     margin: 0 0 20px 0;
}

#outer{
     position: relative;
     width: 800px;
     height: 500px;
     background-color: red;
     margin: 0 auto;

}

#inner{
     position: absolute;
     width: 200px;
     height: 250px;
     background-color: lightblue;
     margin: 0 auto;
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T18:15:14.310

只需删除`position:absolute;`属性`#inner`

小提琴：http: [//jsfiddle.net/Q8NVH/7/](http://jsfiddle.net/Q8NVH/7/)

# php - jQuery CSS 'display: none' 有时在 PageLoad 上的问题

> ID：11924555
> 
> 赞同：1
> 
> 时间：2012-08-12T18:12:12.630
> 
> 标签：php, jquery, css, .post

我正在通过 $.post 从数据库中加载一些文本。有时在页面加载时屏幕只是空白，当我检查它设置为的 div 元素时`<div id="#panel" style="display:none">`，我不知道为什么会发生这种情况，尽管在`$.post`我淡出 div 并且当`$.post`得到输出时，我带回来分区。

`$('#panel').html(output).show();`

我正在使用`$("#panel").fadeOut(100);`，所以我可以让我的 loading.gif 工作。

有什么方法可以检查#panel 的样式是否设置为 display:none，如果是，则将其删除。

谢谢。

编辑：我调用复选框更改和页面加载的函数

```
$("#loading").show();
$("#panel").fadeOut(100);
$('#options :input').prop('disabled', true);
$('#loading').html("<img src='loading.gif'>"); 
var langSelected = $('input[name=text]:checked').map(function() {return $(this).parent().text();}).get().join(",");

$.post('http://mywebsite.com/data.php', { value: languages.url.value, mycheckboxes: langSelected},
function(output) {
    $('#panel').html(output).show(); 
    $('#loading').hide();
    $('#options :input').removeAttr('disabled');

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T18:15:06.930

试试这个：

```
if ($('#panel').is(':hidden')) {
     $('#panel').remove()
} 
```

或者：

```
$('#panel:hidden').remove() 
```

`error`但是，您可以使用以下方法代替删除 div ：

```
$.post("example.php", function() {
      // success
}).error(function() { 
      $('#panel').show()
      // error
}) 
```

# php - PHP Twitter OAuth - 我无法验证我的帐户

> ID：11924557
> 
> 赞同：0
> 
> 时间：2012-08-12T18:12:17.370
> 
> 标签：php, authentication, twitter, oauth

我整天都在努力实现 Twitter 身份验证（使用 OAuth），但我已经绝望了，我仍然收到错误消息**无法验证你。**，它正在成为我的噩梦。

这是我用于身份验证的两个文件：

**requestOauth.php**

```
session_start();
$basedir=dirname(__FILE__)."";  
include($basedir.'/config.php');
include_once( $basedir.'/twitteroauth/twitteroauth.php' );

$connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET);    
$request_token = $connection->getRequestToken(OAUTH_CALLBACK);

//$_SESSION['oauth_token'] = $token = $request_token['oauth_token'];
//$_SESSION['oauth_token_secret'] = $secret = $request_token['oauth_token_secret'];
$_SESSION['oauth_token'] = $request_token['oauth_token'];
$_SESSION['oauth_token_secret'] = $request_token['oauth_token_secret']; 

switch ($connection->http_code) {
  case 200:

    $url = $connection->getAuthorizeURL($_SESSION['oauth_token'], FALSE);
    header('Location: ' . $url); 
    break;
  default:
    echo 'Could not connect to Twitter. Refresh the page or try again later.';
} 
```

**索引.php**

```
if(!isset($_GET['oauth_verifier'])){
    $link_redirect = '<a href="requestOauth.php">Login With Twitter</a>';
}
else
{
    if(isset($_SESSION['access_token'])){ 
        $oauth_token = $_SESSION['access_token']['oauth_token'];
        $oauth_token_secret = $_SESSION['access_token']['oauth_token_secret'];
        $twitterRequest = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, $oauth_token, $oauth_token_secret);

    } else {

        $twitterRequest = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, $_SESSION['oauth_token'], $_SESSION['oauth_token_secret']);
        $accessToken = $twitterRequest->getAccessToken($_GET['oauth_verifier']);
        $_SESSION['access_token'] = $accessToken;
        echo 'ACCESS TOKEN2: '.var_dump($_SESSION['access_token']);
    }

    $user_info = $twitterRequest->get('account/verify_credentials');
    if(isset($user_info->error))
    {
        echo $user_info->error;
        //header("location: requestOauth.php");
    }  else {
        var_dump($_GET);
    } 
```

我仍然收到错误**无法对您进行身份验证。**并且已经不知道，哪里可能有问题......

你能给我任何帮助吗，如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:01:16.123

根据[文档，第 8 步](https://github.com/abraham/twitteroauth/blob/master/DOCUMENTATION)您必须在使用从那里获得的值`TwitterOAuth`调用后构建另一个对象。`getAccessToken`

在你的情况下，这样的事情可能会起作用：

```
$twitterRequest = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, $accessToken['oauth_token'], $accessToken['oauth_token_secret']); 
```

# asp.net-mvc - ASP.NET MVC 数据类型.Text

> ID：11924558
> 
> 赞同：0
> 
> 时间：2012-08-12T18:12:21.710
> 
> 标签：asp.net-mvc, asp.net-mvc-3, viewmodel, data-annotations, displayattribute

在我的 ASP.NET MVC 3 应用程序中有以下视图模型，我有一个问题描述如下：

```
public class MyViewModel : ViewModelBase
{
  // having this line kills the one below it, while commenting it out solves the problem. WHY?
  [DataType(DataType.Text)]
  [Display(Name = "Name", Description = "Description", Prompt = "Prompt"]
  public new string MyField { get; set; }
} 
```

一旦我注释掉，`[DataType(DataType.Text)]`我就可以看到所有其他的东西出现，但如果一起使用，DataType.Text 有点覆盖它下面的东西（至少看起来像这样）。

为什么会发生这种情况以及如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:19:53.377

哦，刚刚想通了。万一有人需要它：我有一个编辑器模板，它可以`Shared/EditorTemplates/String.cshtml`用.`DisplayAttribute``[DataType(DataType.Text)]``String.cshtl``Text.cshtml`

*活到老，学到老！*

# c# - 需要一种使用实体框架基于 XSD 创建 XML 文档的策略

> ID：11924559
> 
> 赞同：0
> 
> 时间：2012-08-12T18:12:46.387
> 
> 标签：c#, xml

我有一个 XSD 文件并使用 XSD.exe 将“逆向工程”作为类文件。此外，我使用 Entity Framework 为将填充 XML 文档的数据“逆向工程”类。我可以序列化 EF 类，但当然这与我必须遵守的 XSD 不匹配。

我可以枚举 EF 类并填充 XSD 类属性，然后序列化……但这似乎是错误的。

如何在不枚举 EF 类的结果的情况下填充 XML 文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:28:00.953

您可以使用此页面中的[属性控制 XML 序列化](http://msdn.microsoft.com/en-us/library/83y7df3e.aspx)的属性来控制您希望如何序列化 .NET 类（在您的情况下为 .NET Framework 类）。[另请查看 MSDN 上有关序列化XML 和 SOAP 序列](http://msdn.microsoft.com/en-us/library/90c86ass)化的文章列表。

# mysql - WSO2 api 管理器 mysql 数据库

> ID：11924560
> 
> 赞同：0
> 
> 时间：2012-08-12T18:12:48.510
> 
> 标签：mysql, jdbc, wso2

我想我不是唯一一个尝试使用新的 WSO2 API 经理的人。如自述文件中所述，我尝试使用 mysql 存储所有数据。我在正确的文件中上传了 mysql 的 jdbc 驱动程序，现在问题是更改 master-datasources.xml 中的设置，但提供的唯一示例是在自述文件中，但仅适用于 mssql，我也从未使用过 jdbc ...使用自述文件中的 mssql 示例您如何看待为 mysql 定制的此设置：

```
 <datasource>
        <name>WSO2_CARBON_DB</name>
        <description>The datasource used for registry and user manager</description>
        <jndiConfig>
            <name>jdbc/WSO2CarbonDB</name>
        </jndiConfig>
        <definition type="RDBMS">
            <configuration>
                <url>jdbc:jtds:mysql://db.mydomain.com:3306/USERDB</url>
                <username>USER</username>
                <password>USER</password>
                <driverClassName>net.sourceforge.jtds.jdbc.Driver</driverClassName>
                <maxActive>50</maxActive>
                <maxWait>60000</maxWait>
                <testOnBorrow>true</testOnBorrow>
                <validationQuery>SELECT 1</validationQuery>
                <validationInterval>30000</validationInterval>
            </configuration>
        </definition>
    </datasource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:51:04.240

在发布的数据源配置中，我看到您使用 JTDS 驱动程序连接到 MySQL，这是错误的。JTDS 仅支持 MSSQL 和 Sybase 数据库，因此您必须使用 MySQL JDBC 驱动程序才能正确配置数据源以连接到 MySQL 后端数据库。为此，从 [1] 下载 MySQL JDBC 驱动程序并将其放入 API_MANAGER_HOME/repository/component/lib 文件夹并更改数据源配置，如下所示。

```
<datasource>
        <name>WSO2_CARBON_DB</name>
        <description>The datasource used for registry and user manager</description>
        <jndiConfig>
            <name>jdbc/WSO2CarbonDB</name>
        </jndiConfig>
        <definition type="RDBMS">
            <configuration>
                <url>jdbc:mysql://hostname_or_ip:3306/database_name</url>
                <username>valid_mysql_username</username>
                <password>valid_mysql_password</password>
                <driverClassName>com.mysql.jdbc.Driver</driverClassName>
                <maxActive>50</maxActive>
                <maxWait>60000</maxWait>
                <testOnBorrow>true</testOnBorrow>
                <validationQuery>SELECT 1</validationQuery>
                <validationInterval>30000</validationInterval>
            </configuration>
        </definition> 
```

问候， 普拉巴斯

[1] [http://dev.mysql.com/downloads/connector/j/](http://dev.mysql.com/downloads/connector/j/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T00:29:21.467

我有同样的问题，这个页面帮助了我：[http ://shavanthaw.blogspot.mx/2013/02/how-to-connect-wso2-is-server-to.html](http://shavanthaw.blogspot.mx/2013/02/how-to-connect-wso2-is-server-to.html)

# java - Android - 检查 PDF 文件是否存在

> ID：11924561
> 
> 赞同：2
> 
> 时间：2012-08-12T18:13:03.673
> 
> 标签：java, android, eclipse, pdf, exists

我想检查一个pdf文件（这个：[http](http://www.augustinianum.eu/roosterwijzigingen/14062012.pdf) ://www.augustinianum.eu/roosterwijzigingen/14062012.pdf ）我试过这个：

```
File fileTest = new File("http://www.augustinianum.eu/roosterwijzigingen/14062012.pdf");
 if(fileTest.exists()){
     //DO STUFF
 } 
```

但它不执行 if 块。这怎么可能？PDF确实存在。

这可能是一个简单的问题，但我不知道如何解决它。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:17:33.687

实际上，文件的 URL 是针对您无法访问的服务器的`File`，

为此，**您必须首先在 android 设备上下载此文件**，然后使用`File`Android 类您可以检查它的存在。

**例子：**

`HttpPost`假设您使用or从此 URL 下载了 sdcard 上的文件`URLConnection`，

然后

```
File fileTest = new File("/mnt/sdcard/14062012.pdf"); //Virtually path of your pdf file after download
 if(fileTest.exists()){
     //DO STUFF
 } 
```

现在你的`if`块将执行..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:19:33.843

我不认为你可以使用`File`类直接访问这样的文件。

`HTTPURLConnection`为此，您可能需要考虑使用API。

# java - 在objectify中使用'IN'查询

> ID：11924572
> 
> 赞同：4
> 
> 时间：2012-08-12T18:14:26.137
> 
> 标签：java, google-app-engine, objectify

如何在 objectify 中使用“IN”查询？我有一个“Paper”实体和一个不同的实体“Schedule”。在“时间表”中，我有纸键。现在我使用一些标准得到了一些“纸”键。现在我想用'scheduledDate'过滤那些。我想用这样的东西查询“计划”：`get 'schedule' from 'Schedule' where 'paper key' in (List of paper keys) and 'scheduledDate' = 'some date'`。我如何在客观化中做到这一点？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T19:47:57.017

Objectify 是低级 Datastore API 的精简包装器，因此 IN 运算符的行为与低级 API 相同：

```
ofy.query(Schedule.class).filter("paper IN", listOfPaperKeys).filter("scheduledDate = ", someDate) 
```

这假设您的`Schedule`类有一个`List<Key> paper`包含指向实体的键列表的字段（如果您使用 objectify 的 type-safe s `Paper`，您也可以拥有）。`List<Key<Paper>> paper``Key`

请注意如何`IN`在后台执行一系列查询并组合结果。所以从某种意义上说，它表现为一系列“=”运算符，其结果被合并：

```
The IN operator also performs multiple queries, one for each item in the 
specified list, with all other filters the same and the IN filter replaced with
an EQUAL filter. The results are merged, in the order of the items in the list. 
If a query has more than one IN filter, it is performed as multiple queries, 
one for each possible combination of values in the IN lists. 
```

# windows - 批处理脚本替换字符串中的变量字符串

> ID：11924575
> 
> 赞同：2
> 
> 时间：2012-08-12T18:14:39.663
> 
> 标签：windows, batch-file

如何删除//从 fullPath 字符串中删除绝对路径字符串

```
set abs_p=C:\abspath\
set rel_p=C:\abspath\foo\boo\bar 
```

如何从 rel_p 中删除 abs_p？我没有让语法正常工作

```
set rel_p=%rel_p:abs_p=% 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T03:56:26.600

只要 abs_p 不包含`=`或`!`

```
@echo off
setlocal enableDelayedExpansion

set "abs_p=C:\abspath\"
set "rel_p=C:\abspath\foo\boo\bar"

set "rel_p=!rel_p:*%abs_p%=!"
echo relative path = !rel_p! 
```

一个应该始终有效的快速解决方案。

```
@echo off
setlocal enableDelayedExpansion

set "abs_p=C:\abspath\"
set "rel_p=C:\abspath\foo\boo\bar"

>temp.txt echo !abs_p!
for %%N in (temp.txt) do set /a len=%%~zN-2
set "rel_p=!rel_p:~%len%!"
del temp.txt

echo relative path = !rel_p! 
```

上面使用了一种粗略但有效的方法来获取绝对路径的字符串长度。有一个更复杂但令人尖叫的快速[strLen 函数](http://www.dostips.com/DtCodeCmdLib.php#Function.strLen)可以代替使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T20:01:37.257

对于您的示例输入，此脚本生成

> 富\嘘\酒吧

```
set abs_p=C:\abspath\
set rel_p=C:\abspath\foo\boo\bar

set newp=
set rec_a=
set rec_r=

call :strip  %rel_p%\ %abs_p%
goto :END

:strip
set rec_a_part=
set rec_a=
set rec_r_part=
set rec_r=

for /F "tokens=1,* delims=\" %%t  in ("%2") do (
    set rec_a_part=%%t
    set rec_a=%%u
 )
for /F "tokens=1,* delims=\" %%t  in ("%1") do ( 
  set rec_r_part=%%t
  set rec_r=%%u
)
if not !%newp%!==!! set newp=%newp%\
if not !%rec_a_part%!==!%rec_r_part%! set newp=%newp%%rec_r_part%
if not !%rec_r%!==!! call :strip  %rec_r% %rec_a%
goto :EOF

:END
echo %newp% 
```

# java - 有没有一种有效的方法来重构这个 Android SQLite 数据库处理程序？

> ID：11924577
> 
> 赞同：1
> 
> 时间：2012-08-12T18:15:06.107
> 
> 标签：java, android, sqlite, refactoring

我正在开发我的第一个 Android 应用程序，我遇到了一个问题，我重用了很多代码片段来执行数据库连接。我看到自己一遍又一遍地重写相同的 try/catch 语句，但我在寻找处理它的好方法时遇到了问题。请看一下这段代码，你有没有看到我在如何重构这个方面缺少任何明显的方式？

如您所见，这些方法通常只有 1 或 2 行差异。这是一个示例（所有其他 try/catch 代码都类似）：

**光标 cursor = dbAdapter.fetchReceipts(timeFrom, timeTo);**

**Communicator.java**

```
 public ArrayList<Receipt> getReceipts(int limit)
{
    ArrayList<Receipt> receiptList = null;
    DbAdapter dbAdapter = new DbAdapter(context);

    try
    {
        dbAdapter.open();
        Cursor cursor = dbAdapter.fetchReceipts(limit);

        if (cursor != null)
        {
            receiptList = buildReceiptList(cursor);
        }

        dbAdapter.close();
    }
    catch (SQLException e)
    {
        Log.d(context.getString(R.string.tag_receipttracker), e.getMessage());
        showToast(MESSAGE_COULD_NOT_OPEN);
    }
    return receiptList;
}

public ArrayList<Receipt> getReceipts(long timeFrom, long timeTo)
{
    ArrayList<Receipt> receiptList = null;
    DbAdapter dbAdapter = new DbAdapter(context);

    try
    {
        dbAdapter.open();
        Cursor cursor = dbAdapter.fetchReceipts(timeFrom, timeTo);

        if (cursor != null)
        {
            receiptList = buildReceiptList(cursor);
        }

        dbAdapter.close();
    }
    catch (SQLException e)
    {
        Log.d(context.getString(R.string.tag_receipttracker), e.getMessage());
        showToast(MESSAGE_COULD_NOT_OPEN);
    }
    return receiptList;
}

public Receipt getLatestReceipt()
{
    Receipt receipt = null;
    Cursor cursor = null;
    DbAdapter dbAdapter = new DbAdapter(context);

    try
    {
        dbAdapter.open();
        cursor = dbAdapter.fetchLastReceipt();

        if (cursor.getCount() > 0)
        {
            receipt = buildReceipt(cursor);
        }

        dbAdapter.close();
    }
    catch (SQLException e)
    {
        Log.d(context.getString(R.string.tag_receipttracker), e.getMessage());
        showToast(MESSAGE_COULD_NOT_OPEN);
    }
    return receipt;
}

public ArrayList<Receipt> searchReceipts(String query)
{
    ArrayList<Receipt> receiptList = null;
    DbAdapter dbAdapter = new DbAdapter(context);

    try
    {
        dbAdapter.open();
        Cursor cursor = dbAdapter.searchReceiptName(query);

        if (cursor != null)
        {
            receiptList = buildReceiptList(cursor);
        }

        dbAdapter.close();
    }
    catch (SQLException e)
    {
        Log.d(context.getString(R.string.tag_receipttracker), e.getMessage());
        showToast(MESSAGE_COULD_NOT_OPEN);
    }

    return receiptList;
}

public boolean updateReceipt(Receipt receipt)
{
    DbAdapter dbAdapter = new DbAdapter(context);
    boolean result = false;
    try
    {
        dbAdapter.open();
        result = dbAdapter.updateReceipt(receipt.getId(), receipt.getName(), receipt.getPhoto(), receipt.getTimestamp(),
                receipt.getLocationLat(), receipt.getLocationLong(), receipt.getSum(), receipt.getTax(), receipt.getComment());
        showResult(result);
        dbAdapter.close();
    }
    catch (SQLException e)
    {
        Log.d(context.getString(R.string.tag_receipttracker), e.getMessage());
        showToast(MESSAGE_COULD_NOT_OPEN);
    }
    return result;
}

private boolean insertReceipt(Receipt receipt)
{
    boolean result = false;
    DbAdapter dbAdapter = new DbAdapter(context);
    try
    {
        dbAdapter.open();
        result = dbAdapter.createReceipt(receipt.getName(), receipt.getPhoto(), receipt.getTimestamp(), receipt.getLocationLat(),
                receipt.getLocationLong(), receipt.getSum(), receipt.getTax(), receipt.getComment());
        showResult(result);
        dbAdapter.close();
    }
    catch (SQLException e)
    {
        Log.d(context.getString(R.string.tag_receipttracker), e.getMessage());
        showToast(MESSAGE_COULD_NOT_OPEN);
    }
    return result;
} 
```

**DBAdapter.java**

```
public Cursor fetchReceipt(long rowId) throws SQLException
{

    Cursor cursor = db
            .query(true, DATABASE_TABLE_RECEIPTS, new String[] { KEY_ROWID, KEY_NAME, KEY_PHOTO, KEY_TIMESTAMP, KEY_LOCATION_LAT,
                    KEY_LOCATION_LONG, KEY_SUM, KEY_TAX, KEY_COMMENT }, KEY_ROWID + "=" + rowId, null, null, null, null, null);
    if (cursor != null)
    {
        cursor.moveToFirst();
    }
    return cursor;

}

public Cursor fetchReceipts(long timeFrom, long timeTo)
{
    Cursor cursor = db.query(true, DATABASE_TABLE_RECEIPTS, new String[] { KEY_ROWID, KEY_NAME, KEY_PHOTO, KEY_TIMESTAMP,
            KEY_LOCATION_LAT, KEY_LOCATION_LONG, KEY_SUM, KEY_TAX, KEY_COMMENT }, KEY_TIMESTAMP + ">" + timeFrom + " AND "
            + KEY_TIMESTAMP + "<" + timeTo, null, null, null, KEY_TIMESTAMP + " DESC", null);
    if (cursor != null)
    {
        cursor.moveToFirst();
    }
    return cursor;
}

public Cursor fetchLastReceipt()
{
    Cursor cursor = db.query(true, DATABASE_TABLE_RECEIPTS, new String[] { KEY_ROWID, KEY_NAME, KEY_PHOTO, KEY_TIMESTAMP,
            KEY_LOCATION_LAT, KEY_LOCATION_LONG, KEY_SUM, KEY_TAX, KEY_COMMENT }, null, null, null, null, KEY_ROWID + " DESC", "1");
    if (cursor != null)
    {
        cursor.moveToFirst();
    }
    return cursor;
}

public Cursor searchReceiptName(String query)
    {
        Cursor cursor = db.query(DATABASE_TABLE_RECEIPTS, new String[] { KEY_ROWID, KEY_NAME, KEY_PHOTO, KEY_TIMESTAMP, KEY_LOCATION_LAT,
                KEY_LOCATION_LONG, KEY_SUM, KEY_TAX, KEY_COMMENT }, KEY_NAME + " LIKE ?", new String[] { "%" + query + "%" }, null, null,
                null);
        if (cursor != null)
        {
            cursor.moveToFirst();
        }
        return cursor;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T20:29:54.420

首先，在打开数据库时，我最好使用这样的东西：

```
if (db == null || !db.isOpen()) {
db = getWritableDatabase(); //getReadableDatabase();
} 
```

它会照顾您创建或打开数据库，以防它尚未完成。

对于第一个方法块，我显然会采用以下方法：

```
public ArrayList<Receipt> searchReceipts(String query, DbAdapter _db, Cursor cursor)
{
    ArrayList<Receipt> receiptList = null;

    try
    {
        _db.open();

        if (cursor != null)
        {
            receiptList = buildReceiptList(cursor);
        }

        _db.close();
    }
    catch (SQLException e)
    {
        Log.d(context.getString(R.string.tag_receipttracker), e.getMessage());
        showToast(MESSAGE_COULD_NOT_OPEN);
    }

    return receiptList;
} 
```

这样，您只需要预先创建适配器和游标，并将它们传递到该 main 方法中，该方法将为所有调用执行其余逻辑。我注意到有一种方法可以只返回一个对象而不是数组。在这种情况下，您可以只传递一个内部包含唯一对象的数组。

希望能帮助到你。

让我知道您的印象/更新。

# python - 使用正则表达式（或其他 python 模块）来比较文本/字符？

> ID：11924585
> 
> 赞同：6
> 
> 时间：2012-08-12T18:16:06.933
> 
> 标签：python, regex, string-matching

假设我的程序接收到一个输入，例如具有任何类型字符的字符串。例如，“鲍勃的百吉饼店”。然后它得到另一个字符串，上面写着“Fred's Bagel Store”。如何在 python 中使用正则表达式或其他模块来比较这些并让我的程序告诉我字符串中的任何位置是否至少有 5 个（或我想要的任何数字）字符相同*，*但*顺序相同*，比如“Bagel”这个词？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-12T18:24:14.950

有一个 Python 标准库类[`difflib.SequenceMatcher`](http://docs.python.org/library/difflib.html#sequencematcher-objects)可以帮助解决您的问题。这是一个代码示例：

```
from difflib import SequenceMatcher

s1 = "Bob's Bagel Shop"
s2 = "Bill's Bagel Shop"

matcher = SequenceMatcher(a=s1, b=s2)
match = matcher.find_longest_match(0, len(s1), 0, len(s2)) 
```

结果：

```
Match(a=3, b=4, size=13)  # value that 'match' variable holds 
```

结果表明，两个字符串都有相同的子字符串，长度为 13 个字符（从第一个字符串中的第 3 个字符和第二个字符串中的第 4 个字符开始）。

您可以使用此匹配结果对象将其字段作为值获取：

```
match.size  # 13
match.a     # 3
match.b     # 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:35:16.423

您可以使用`itetools.combinations`然后使用`intersection`集合从两个字符串中找出匹配的字符：

```
from itertools import combinations
str1="Bob's Bagel Shop"
str2="Fred's Bagel Store"

def combi(strs):
    chars=''.join(strs.split())
    lis=[]
    for x in range(1,len(chars)):
        for y in combinations(chars,x):
            if ''.join(y) in chars:
                lis.append(''.join(y))
    return lis           

lis1=combi(str1)
lis2=combi(str2)
print max(set(lis1).intersection(set(lis2)),key=len) 
```

**输出：**

```
'sBagelS 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T18:21:20.423

看

[Python中的字符串相似度度量](https://stackoverflow.com/questions/1471153/string-similarity-metrics-in-python)

或签出 simhash 模块：

[http://bibliographie-trac.ub.rub.de/browser/simhash.py](http://bibliographie-trac.ub.rub.de/browser/simhash.py)

# php - 在 2 个 div 之间传输（添加/删除）php 数组值

> ID：11924587
> 
> 赞同：1
> 
> 时间：2012-08-12T18:17:05.917
> 
> 标签：php, javascript, arrays, search

我有一个普通的 div，有一个可以手动编辑的输入文本框。我想从另一个具有一组 php 数组值（来自查询）的 div 中添加/删除 php 值。每个值都有一个 [Add] 或 [Remove] 按钮，根据天气相应的 php 值是否存在于输入文本字段中。

所以，基本上如果文本框是空的，那么所有的按钮都会是[添加]，点击它会将相应的php值添加到文本框，然后变成一个[删除]按钮。同样，任何 [Remove] 按钮都会从文本框中删除相应的 php 值，然后变为 [Add] 按钮。

> 示例：
> $values = array(" **Mike** "、" **James** "、" **Jerry** "、" **Tom** ");
> 输入类型="文本"

如果我手动对文本框进行了任何更改或在其中输入了一些已知的 php 值（用分号分隔）：

> **詹姆斯;迈克;海德;杰瑞;**

另一个 div 将动态搜索 php 数组的所有值，并为存在的值添加一个 [Remove] 按钮，为在文本框中未找到的那些值添加一个 [Add] 按钮。

詹姆斯 [**删除**]
迈克 [**删除**]
汤姆 [**添加**]
杰瑞 [**删除**]

> 注意#1：这里，' **Tom** ' 是文本框中唯一不存在的值，所以它有一个 [Remove] 按钮。
> 注意#2：另外，' **Hyde** ' 不是 php 数组的值，因此它既没有 [Add] 也没有 [Remove] 按钮。

* * *

## **编辑：**

我已经做的，基本上是从 php 查询中回显所有数组值，并用 [Add] 按钮附加每个值（因为默认情况下文本框为空）
我使用自定义 js 函数类似于：

> $("#textbox").val(function(i, val) { return val.replace(phparrayvalue, ''); });

但是，为了动态更改 [Add] 和 [Remove] 之间的按钮，我必须一直保留 php 数组（AJAX 请求在获取 php 值 ontextchange 时会很慢）。

**我认为如果我可以通过并将php数组转换为javascript** onload，问题就会消失。之后，很容易将保存的 js 数组与文本框值 ontextchange 进行比较，并根据结果更改按钮。

我希望它很清楚，有人可以帮助处理 javascript 代码。
*谢谢*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:55:34.933

对于您正在尝试做的那种事情，您是否考虑过“选择”？这是它的链接：http: [//harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

它会喜欢你做你想做的事情，尽管以一种更优雅的方式。你可以将你的名字列表从你的 PHP 数组传递到插件中，它可以处理其余的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:21:40.733

如果我正确理解了您的问题，这可能会有所帮助

## 预览：

![在此处输入图像描述](../Images/cb7d4ce01d5f92555a990957a9082e74.png)

创建简单的 html 文档进行测试..

## 测试.html

```
<!DOCTYPE html>
<html>
  <head>
  <title>Test Add/Remove</title>
  <script type="text/javascript" src="adddel.js"></script>
  <style type="text/css">
  <!--
  body { font-family: tahoma, verdana, arial; }
  .btn { color: #0000ff; font-size: 12px; cursor: pointer; }
  .div1 { width: 200px; height: 200px; background-color: #ffffee; border: dashed 1px #494949; position: absolute; left: 50px; top: 50px; padding: 10px; }
  .div2 { width: 200px; height: 200px; background-color: #ffffee; border: dashed 1px #494949; position: absolute; left: 280px; top: 50px; padding: 10px; font-size: 14px; }
  .myinput { width: 194px; font-weight: bold; font-size: 14px; border: solid 1px #000000; padding: 3px; }
  -->
  </style>
</head>
<body>
  <div id="divinput" class="div1"></div>
  <div id="divvalues" class="div2"></div>
  <script type="text/javascript">
  <!--
  // echo next line from php code
  myArray = 'Mike,James,Jerry,Tom';

  jsStart(myArray, 'divinput', 'divvalues');
  -->
  </script>
</body>
</html> 
```

如您所见，此 html 包含**标题**、指向外部**JavaScript**文件的链接以及**HEAD**部分中页面元素的一些**样式，以及****BODY**部分中的两个**DIV**和一些简单**的页面 JavaScript**。

 ******您所要做的就是从 PHP 代码创建 JavaScript 变量**myNames 。**我使用了您在问题中提到的相同名称，因此我的行如下所示：

```
myArray = 'Mike,James,Jerry,Tom'; 
```

在 PHP 中创建逗号分隔的列表并在此处**回**显。

在该行后面，我调用了在外部 JavaScript 文件**adddel.js**中定义的函数**jsStart()**。

 **让我们看看该文件的样子

## adddel.js

```
var name = Array();

// page preparation
function jsStart(a, div1id, div2id) {
  // create array of names
  name = a.split(',');
  // create div1 html
  html = '<input type="text" name="myedit" id="myedit" class="myinput" value="" onchange="changeText()" onkeyup="changeText()">';
  document.getElementById(div1id).innerHTML = html;
  // create div2 html
  html = '';
  for (i=0; i<name.length; i++) {
    if (name[i].trim() != '') {
      if (html != '') html += '<br />';
      // name
      html += '&bull; <b>' + name[i] + '</b> ';
      // button
      html += ' <span class="btn" id="btn' + i + '" onclick="btnClick(' + i + ')">[Add]</span>';
      }
    }
  if (html == '') html = '&nbsp;';
  document.getElementById(div2id).innerHTML = html;
  changeText();
  }

// fires on input-text change
function changeText() {
  edl = document.getElementById('myedit').value.trim().split(';'); 
  for (i=0; i<name.length; i++) {
    btnText = '[Add]';
    for (j=0; j<edl.length; j++) {
      ne = name[i].trim().toLowerCase();
      nl = edl[j].trim().toLowerCase();
      if (ne == nl) {
        btnText = '[Remove]';
        break;
        }
      }
    document.getElementById('btn' + i).innerHTML = btnText;
    }
  }

// add/remove name from text-input
function btnClick(id) {
  ne = name[id].trim().toLowerCase();
  edl = document.getElementById('myedit').value.trim().split(';'); 
  newed = '';
  found = false;
  for (i=0; i<edl.length; i++) {
    nl = edl[i].trim().toLowerCase();
    if (nl != '') {
      if (nl != ne) newed += edl[i].trim() + ';';
      else found = true;
      }
    }
  if (!found) newed+=name[id]+';'
  document.getElementById('myedit').value = newed;
  changeText();
  } 
```

将这两个文件放在同一目录中，然后从浏览器中打开**test.html文件。**如果你做得对，你会在我的帖子顶部有类似图片的东西。

**注意：文本输入中的项目不区分大小写，并且允许名称周围有额外的空格。**

这意味着文本

```
"Mike;John;Sam; BRian" 
```

和

```
"   mike ; john;Sam;Brian " 
```

现在编辑此代码并使其符合您的需求。很简单。

## 希望这可以帮助********

# c - 为什么行打印两次？

> ID：11924589
> 
> 赞同：1
> 
> 时间：2012-08-12T18:17:18.350
> 
> 标签：c, unix, fork, zombie-process

我是 UNIX 编程的新手，我正在阅读僵尸进程以及如何使用 fork() 两次来避免它们。我从一本书中阅读了代码并尝试在我的系统上运行它。我使用的是 ubuntu 12.04。我运行了以下代码：

```
#include<stdio.h>   
#include<sys/wait.h>
#include<stdlib.h>

int main()
{
    pid_t pid;
    if(pid = fork() < 0)
        printf("Fork Error.!!!\n");
    else 
    if(pid == 0)
    {
        if((pid = fork()) < 0)
             printf("Fork2 Error.!!!\n");
        else 
             if(pid > 0)
                   exit(0);

        sleep(2);
        printf("Second Child, parent id: %d\n", getppid());
        exit(0);
    }
    if(waitpid(pid, NULL, 0) != pid)
        printf("Waitpid Error.!!!\n");

    exit(0);
} 
```

我得到的输出如下：

```
Second Child, parent id: 1
Second Child, parent id: 1 
```

这本书说这应该只打印一次，当我看到代码中发生的事情时，这也是我觉得应该发生的事情。我不明白为什么它会被打印两次。我在网上的很多地方都找到了这段代码，但找不到能解释这一点的东西。欢迎任何帮助。谢谢。！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T18:34:04.710

main 中的第二行代码 - 缺少括号`pid = fork()`

```
if( ( pid = fork() ) < 0){ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T18:37:32.337

在这一行：

```
if(pid = fork() < 0) 
```

您应该在零件周围添加括号`pid = fork()`，就像您为另一个叉子所做的那样。您正在分配`fork() < 0`to的结果`pid`。只要分叉没有失败，这意味着`pid`在第一个分叉的父和子中都变为 0，因此您将获得 2 个运行子分支的进程（每个进程都创建自己的子分支）并且没有运行`waitpid`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T18:44:31.620

请检查此[链接](http://www.steve.org.uk/Reference/Unix/faq_2.html#SEC6)。它说：

> 当使用 fork()，尤其是 vfork() 时，exit() 和 _exit() 之间存在一些显着差异。
> 
> ...
> 
> 在 fork() 的子分支中，使用 exit() 通常是不正确的，因为这会导致 stdio 缓冲区被刷新两次，并且临时文件被意外删除。

这对我来说很有意义，您需要相应地更新代码以获得预期的结果。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-12T18:30:44.477

在

```
pid_t pid;
if(pid = fork() < 0)
printf("Fork Error.!!!\n"); 
```

将创建一个线程。所以目前我们有两个线程主线程和子线程。排队

```
if(pid == 0) 
```

您正在检查子线程中的当前线程。您再次创建了一个新线程

```
if((pid = fork()) < 0)
     printf("Fork2 Error.!!!\n");
else if(pid > 0)        //Do nothing if this is parent thread.
     exit(0); 
```

所以现在你有线程在运行，它会执行

```
printf("Second Child, parent id: %d\n", getppid()); 
```

因此，您将消息打印两次。

# linux - Ubuntu inet addr 不断变化

> ID：11924590
> 
> 赞同：0
> 
> 时间：2012-08-12T18:17:27.743
> 
> 标签：linux, ubuntu, inet

我在 Windows 中进行客户端开发，在 linux 中进行服务器端开发（我虚拟运行）。我的客户端套接字设置为连接到我的 linux 服务器的 inet addr（使用 localhost 似乎对我不起作用，我猜是因为我实际上是在运行 linux）。

我的主要问题是我的 inet addr 不断变化（通常递增 1），然后我必须重建我的客户端代码并将其传输到服务器，这非常烦人。

无论如何手动设置我的inet addr或防止它改变？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:54:45.767

编辑 /etc/network/interfaces 并定义如下内容：

```
auto eth0
iface eth0 inet static
    address 10.0.0.10
    netmask 255.255.255.0
    gateway 10.0.0.1 
```

在这种情况下，假设您的网络地址是 10.0.0.0/24，并且网关（Windows 机器）具有 10.0.0.1 作为 Linux 机器的接口。此外，这假设您要设置网络接口`eth0`。

然后：

```
$ sudo ifdown eth0
$ sudo ifup eth0 
```

第一个是关闭网络接口，第二个是使用新设置重新激活它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T18:21:08.987

乔希，这是因为您使用的是 dhcp。确保设置固定地址。假设您运行 RH 或 CentOS，最简单的方法是运行：**system-config-network-tui**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T07:56:27.770

看起来您正在使用 DHCP，并且您正在使用桥接让您的虚拟机访问网络。检查这一点的最简单方法是比较 Windows 机器和 Ubuntu 机器中的 IP 地址：如果它们在同一范围内，则可能是桥接。

这意味着可以从本地子网中的任何地方访问您的虚拟机。

您可以使用 DHCP 和 DNS 服务器（可能是您的路由器）为您的 Ubuntu 机器分配一个固定的 IP 地址。

你也可以只通过它的 DNS 名称来引用你的 Ubuntu 机器。

# ios - 使用视频播放器时，应用程序总是崩溃

> ID：11924591
> 
> 赞同：0
> 
> 时间：2012-08-12T18:17:27.240
> 
> 标签：ios

我正在尝试将视频代码放入我正在使用情节提要的 Xcode 中，但是每次使我崩溃时，这就是错误：

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“ *** -[NSURL initFileURLWithPath:]: nil string parameter”***首先抛出调用堆栈：

我将按钮连接到，`IBAction`但按下按钮后，应用程序崩溃了

```
- (IBAction)playMove;
{
    NSString *url = [[NSBundle mainBundle]pathForResource:@"skill" ofType:@"flv"];    

    MPMoviePlayerController *theMovie = [[MPMoviePlayerController alloc]initWithContentURL:[NSURL fileURLWithPath:url]];
    theMovie.view.frame = CGRectMake(64, 100, 200, 150);
    [self.view addSubview:theMovie.view];

    [theMovie play];
} 
```

我的文件`name.mp4`很大 480* 360 但那是它崩溃了这是代码

```
- (IBAction)playMove;
{
    NSURL *url =[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"go" ofType:@"mp4"]];
    MPMoviePlayerViewController *player = [[MPMoviePlayerViewController alloc]initWithContentURL:url];
    [self presentMoviePlayerViewControllerAnimated:player];
    player.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
    [player.moviePlayer play];

} 
```

并且按钮连接正常我该怎么做才能修复它？

我试图在没有故事板和故事板的情况下使用，但总是崩溃。

这是错误：

```
NSInvalidArgumentException', reason: '*** -[NSURL initFileURLWithPath:]: nil string parameter'
*** First throw call stack:
(0x1e0a022 0x1348cd6 0x1db2a48 0x1db29b9 0xb9753b 0xb974c5 0x21dc 0x1e0be99 0x25814e 0x2580e6 0x2feade 0x2fefa7 0x2fe266 0x27d3c0 0x27d5e6 0x263d 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:21:14.620

这是因为您试图通过 . 播放 FLV 文件`MPMoviePlayer`。

这是来自 MPMoviePlayerController 支持格式的苹果 api 文档：

**支持的格式**
此类播放 iOS 支持的任何电影或音频文件。这包括流式内容和固定长度文件。对于电影文件，这通常意味着扩展名为 .mov、.mp4、.mpv 和 .3gp 并使用以下压缩标准之一的文件：

H.264 Baseline Profile Level 3.0 视频，在 30 fps 时高达 640 x 480。（基线配置文件不支持 B 帧。） MPEG-4 第 2 部分视频（简单配置文件） 如果您使用此类播放音频文件，它会在播放音频时显示带有 QuickTime 徽标的白屏。对于音频文件，此类支持最高 48 kHz 的 AAC-LC 音频和最高 48 kHz 的 MP3（MPEG-1 音频层 3）立体声音频。

# .htaccess - .htaccess 重写规则从目录/到根

> ID：11924592
> 
> 赞同：1
> 
> 时间：2012-08-12T18:17:30.933
> 
> 标签：.htaccess, rewrite, root

我想要一个重写规则，将目录/文件带到 /file 因为在这种情况下，一切都可以在根目录中找到，我不想重写文件的源代码以指向根目录 ../ 而不是我在这种情况下特别喜欢 htaccess。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T20:16:09.690

您可以简单地在文档根目录的 htaccess 文件中执行此操作

```
Redirect 301 /directory/file /file 
```

# c++ - 在类中封装游戏对象

> ID：11924596
> 
> 赞同：0
> 
> 时间：2012-08-12T18:17:58.677
> 
> 标签：c++, ogre

在我尝试使用 Ogre 创建我的第一个 3D 游戏时，我开始编写一个通用的“对象”类。构造函数：

```
Object( const char* mesh, Ogre::SceneManager*& sm )
{
    ...
    _sn = sm->getRootSceneNode()->createChildSceneNode( _sn_name );
    _ent = sm->createEntity( _ent_name, mesh );
    _sn->attachObject(_ent);
    ...            
} 
```

_sn 是 SceneNode* 并且 _ent 是 Entity*（都是私有的）。问题是没有任何东西被吸引到屏幕上！但如果我使用：

```
Ogre::Entity *map = mSceneMgr->createEntity("map","map.mesh");
Ogre::SceneNode *sc = mSceneMgr->getRootSceneNode()->createChildSceneNode("mapNode");
sc->attachObject(map); 
```

在类之外，对象被绘制并且一切正常。

我的方法有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:34:33.853

我有一个解决方案：我之前有同样的经验，你应该检查：

1.  创建了多少实例？

2.  这里有多少构造函数？

3.  你用这个词吗？如果您的类继承，请小心应用父方法和属性，因为它们依赖于它们的构造函数并且可能返回空指针。

4.  如果您使用继承，我更喜欢将父 obj 传递给继承的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T19:42:59.060

Managed to fix this. In my destructor I had the scene manager call detachAllObjects(). Commenting/removing that solved the problem obviously

# jquery - 使用 MVC 3 Razor 和 JQuery 在级联文本框中自动完成

> ID：11924598
> 
> 赞同：1
> 
> 时间：2012-08-12T18:18:09.053
> 
> 标签：jquery, asp.net-mvc, json, razor, autocomplete

我正在尝试使用**JQuery Autocomplete**在文本框中显示自动完成的城市名称，来自用户填写的邮政编码文本框。

城市文本框自动完成必须由**控件的焦点**触发。但我仍然必须按向下键才能显示自动完成的城市。此外，如果我更改邮政编码文本框中的值，自动完成将首先显示最后匹配的城市。任何人都知道我应该怎么做才能解决这些问题？

这是我的代码。一、观点：

```
<script type="text/javascript">
$(function () {
    $('#PostalCode').blur(function () {
        $.getJSON("http://xxxxxxxxx/Cities/GetCities", { strPostalCode: $('#PostalCode').val() }, function (data) {
            $("#autocompCities").autocomplete({
                minLength: 0,
                source: data
            }).focus(function () {
                $(this).autocomplete("search", "");
            });
        });
    });
}); 
```

...

```
@Html.TextBoxFor(model => model.PostalCode)
@Html.TextBoxFor(model => model.City, new { id = "autocompCities" }) 
```

然后，在我的控制器中：

```
public JsonResult GetCities(string strPostalCode)
{
//retrieving data
var cities = from city in allCities
                     where city.Id == strPostalCode
                     select city.Name;

        return Json(cities, JsonRequestBehavior.AllowGet);
} 
```

仅供参考，我通过修改 getJSON 函数中的 url 解决了我的先例问题（从未调用过 JSONResult 函数），因为我认为使用“Url.Action”生成的路由与我的 global.asax 文件中映射的路由不匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T18:54:41.193

问题是您错误地使用了“源”选项。

根据位于：http: [//jqueryui.com/demos/autocomplete/#remote-jsonp](http://jqueryui.com/demos/autocomplete/#remote-jsonp)的文档， 如果单击查看源代码链接，可以看到源代码采用以下形式：

```
source: function(request, response) { ... } 
```

在该函数中，使用自动完成的数据作为其参数调用响应

```
data = [];
response(data); 
```

response() 用于典型的自动完成功能，其中下拉显示结果，这与您正在寻找的似乎不完全一样。

您的 jquery 的另一个问题是您的 autocompCities 既是更新目标又是自动完成小部件，这与您所说的功能相反。您想让 Zip Code 字段成为自动完成小部件，但抑制默认行为并在 ajax 成功时更新 autocompCities。

# windows - boost 异步 I/O 示例的运行时错误

> ID：11924601
> 
> 赞同：3
> 
> 时间：2012-08-12T18:18:29.410
> 
> 标签：windows, debugging, visual-c++, runtime, boost-asio

最近我需要使用 boost TCP iostream，所以我一直在尝试使用 Ubuntu 12.04 和 MSVC 11.0 (Visual Studio 2012) 上的 g++ 4.6 的 boost (v1.50.0) 异步 I/O的 iostream[示例编译日间](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/examples.html)[服务器](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/example/iostreams/daytime_server.cpp)和[客户端](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/example/iostreams/daytime_client.cpp)RC）在 Windows 7 上。程序在 Linux 上按预期编译和运行。从中我们可以推断出boost示例的源代码是完全正确的，所以我不在这里简称。此外，所有 MSVC 项目设置和 boost 二进制文件的链接都可以，因为它编译得很好，只有警告 C4250[根据微软](http://connect.microsoft.com/VisualStudio/feedback/details/733720/inheriting-from-std-fstream-produces-c4250-warning)的说法是好的。

问题是服务器和客户端都在 Windows 上运行时崩溃，并且错误看起来像`0x000007FEEE9082DE (msvcp110d.dll) (***.exe) unhandled exception: 0xC00000FD: Stack overflow (arguement: 0x0000000000000001, 0x00000000000C3FF0)`在调试中。

当我离开服务器运行后台并调试客户端时，堆栈跟踪 ![在此处输入图像描述](../Images/252798d48089972e2cf1459a47e170e5.png) 显示了调用堆栈。我挖掘了 ostream 的源代码，发现在 in 的构造函数`sentry`中`basic_ostream`

```
explicit __CLR_OR_THIS_CALL sentry(_Myt& _Ostr)
        : _Sentry_base(_Ostr)
        {   // construct locking and testing stream
        if (_Ostr.good() && _Ostr.tie() != 0)
            _Ostr.tie()->flush();
        _Ok = _Ostr.good(); // store test only after flushing tie
        } 
```

是否有电话`_Ostr.tie()->flush()`和定义`flush()`

```
_Myt& __CLR_OR_THIS_CALL flush()
    {   // flush output stream
    if (_Myios::rdbuf() != 0)
        {   // buffer exists, flush it
        const sentry _Ok(*this);

        if (_Ok && _Myios::rdbuf()->pubsync() == -1)
            _Myios::setstate(ios_base::badbit); // sync failed
        }
    return (*this);
    } 
```

构造一个常量哨兵`_Ok`。我认为这是一个错误，但我不确定。

所以我的问题是，您认为这是 MSVC 11.0 运行时的错误吗？如果使用 MSVC 10.0 (Visual Studio 2010) 编译，服务器或客户端是否会出于同样的原因在您的 Windows 系统上崩溃？

# android - Android 布局 - 等距按钮

> ID：11924612
> 
> 赞同：0
> 
> 时间：2012-08-12T18:19:43.657
> 
> 标签：android, xml, button

我有两个按钮一个保存到 sd 卡和另一个共享它（图像）我需要它们相等，每个都是屏幕的一半..

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/btnShare"
        android:layout_height="50dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Share"
        android:textColor="#000000"
        android:typeface="serif" 
        android:layout_width="wrap_content"     
        android:layout_alignParentLeft="true"/>

    <Button
        android:id="@+id/btnSD"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Save to SD Card"
        android:textColor="#000000"
        android:typeface="serif" 
        android:layout_alignParentRight=""/>

</RelativeLayout> 
```

atm 共享不仅仅是保存到 sd

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T18:22:44.740

您将需要使用[layout_weight](http://developer.android.com/guide/topics/ui/layout/linear.html#Weight)。这将允许您按比例定义按钮的大小，如果您愿意，可以使它们相等。请记住将 layout_width 或 layout_height 设置为 0px，具体取决于方向。

您还需要更改为 LinearLayout 才能使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:44:08.387

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/btnShare"
        android:layout_width="0dp"
        android:layout_height="50dp"
        android:layout_weight=".5"
        android:text="Share"
        android:textColor="#000000"
        android:typeface="serif" />

    <Button
        android:id="@+id/btnSD"
        android:layout_width="0dp"
        android:layout_height="50dp"
        android:layout_weight="0.50"
        android:text="Save to SD Card"
        android:textColor="#000000"
        android:typeface="serif" />

</LinearLayout> 
```

# java - Java中的动态转换

> ID：11924617
> 
> 赞同：0
> 
> 时间：2012-08-12T18:20:00.510
> 
> 标签：java, inheritance, polymorphism, overloading

我不确定这是否是所谓的，但问题是：

我有一个包含三个子类的超类。假设超类，子类1，子类2，子类3

我有另一个具有以下重载方法的类：

```
public void exampleMethod (Subclass1 object1){
//Method to be called if the object is of subclass 1
}

public void exampleMethod (Subclass2 object2){
//Method to be called if the object is of subclass 2
}

public void exampleMethod (Subclass3 object3){
//Method to be called if the object is of subclass 3
} 
```

有没有办法让我在运行时将方法参数动态转换为对象类型时从超类调用重载方法？

```
anotherClass.exampleMethod(this); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:22:26.777

```
if (this instanceof Subclass1) {
    anotherClass.exampleMethod((Subclass1)this);
} else if (this instanceof Subclass2) {
    anotherClass.exampleMethod((Subclass2)this);
}
... 
```

你是这个意思吗？

可能会更好

```
abstract class Superclass {
    abstract void callExampleMethod(AnotherClass anotherClass);
}

class Subclass1 extends Superclass {
    void callExampleMethod(AnotherClass anotherClass) {
        anotherClass.exampleMethod(this);
    }
}
... same for other subclasses ... 
```

然后你可以调用`callExampleMethod`超类，它会正确委托。

# php - Stream Published Story 和 Link 之间的区别 - Insights 报告没有点击 feed 帖子

> ID：11924634
> 
> 赞同：1
> 
> 时间：2012-08-12T18:21:44.077
> 
> 标签：php, facebook-php-sdk, facebook-insights

我们使用 php sdk 以标准方式发布链接：

```
$data = array(
    'access_token' => $facebook->getAccessToken(),
    'link' => $url,
    'type' => 'link'
);

$facebook->api('/me/feed', 'POST', $data); 
```

在 7 月 17 日之前，他们以“流发布的故事”的形式出现在见解（概览 -> 分享）中，并且在此期间报告了点击/评论/喜欢（流量 -> 流发布）

然而，在 7 月 17 日之后，所有帖子现在都显示为“已发布链接”，并且没有点击、评论或喜欢……而且在我们监控的过程中，他们肯定会得到所有这些。见解确实显示了印象，但根本没有点击。

“流发布的故事”和“发布的链接”之间有区别吗？关于为什么见解不会报告点击次数，我应该知道什么？这是代码级别的问题，洞察中的错误还是 Facebook 改变的东西？

# windows - AutoHotkey 将韩语键重新映射到 Ctrl

> ID：11924645
> 
> 赞同：4
> 
> 时间：2012-08-12T18:24:16.067
> 
> 标签：windows, keyboard, autohotkey

标准韩语键盘上的空格键旁边有两个键（每侧一个），我想将它们重新映射为 Control 或 Alt 修饰符 - 所以我可以使用比我的小指更强的手指交替使用（我是 emacs 用户） .

我猜问题是它们似乎没有**生成****KeyUp**事件，并且它们**不会**像其他键一样重复。我有一个非常糟糕的解决方案，涉及使用自动热键的循环。还对另一个非免费程序 KeyManager 做了类似的事情。我希望有一些更高级的技巧或解决方法（AutoHotkey、驱动程序或其他）。

```
;Scan Code for Hanja Key
sc1F1::
Loop 10000
{
SetKeyDelay,-1
Send {Blind}{LCtrl DownTemp}
}
SetKeyDelay,-1
Send {Blind}{LCtrl Up}
Return 
```

按下（并按住）的键盘挂钩输出`Hanja`：

您可以看到没有重复和向上事件。

```
VK  SC  Type    Up/Dn   Elapsed Key     Window
74  03F     u   0.08    F5              
19  1F1     d   0.66    Hanja           
74  03F     d   9.58    F5 
```

# 更新：

## 试过：

`sc1F1 & t::Send {Blind}{LCtrl DownTemp}{t}{LCtrl Up}`

## 结果：

按`Hanja`+后`t`，热键会触发，但随后仅按**ONLY****会** 执行相同的操作。 似乎没有发生。`t` **`LCtrl Up`**

 **安倍的`SetTimer`重置还是不错的！感觉就像我的原始代码的一个更优雅的版本。然而，问题在于延迟——我必须调整输入速度以匹配延迟。

## 其他经过测试的解决方案：

`GetKeyState("vk19", "p")`总是在脚本加载和第一次按下后报告 PRESSED。它永远不会打破这种状态——即使在我释放密钥很久之后。

`KeyWait`也不能按预期工作。

`sc1F1 up::traytip,, test`在任意数量的按下/释放后也不会产生托盘提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:07:23.803

Have the script send`{Ctrl down}`
and then set a timer to run a subroutine after a desired amount of time (600ms in the example)
(the - makes it only run once)
to send `{Ctrl up}`:

```
sc1F1::
Sendinput, {Ctrl Down}
SetTimer, Reset, -600
Return

Reset:
Sendinput, {Ctrl Up}
Return 
```

[→SetTimer←</a>](http://l.autohotkey.net/docs/commands/SetTimer.htm)

 [* * *

If you wanted to make it a toggle button,
i.e press it once and x sends `Control` + `A`,
then press it again to return x to normal behavior:

```
sc1F1::Flag:=!Flag

#If Flag
x::Sendinput, ^a
a::Sendinput, test
#If 
```](http://l.autohotkey.net/docs/commands/SetTimer.htm) 

[The value of variable `Flag` is reversed with every press of `sc1F1`,
i.e. Flag is either set to 1 or 0.
`#If Flag` is shorthand for `#If Flag = 1`
This example requires](http://l.autohotkey.net/docs/commands/SetTimer.htm) [Autohotkey_L](http://l.autohotkey.net/) (newer/recommended version) because it uses the `#If` command.

Using AHK basic it would look like:

```
sc1F1::Flag:=!Flag

$x::
if Flag
    Send, ^a
Else
    Send, x
Return 
```

* * *

**Other options/examples using
`Capslock` in place of sc1F1**:

You could try using `&` if you just want to use the button as a modifier.
This example turns `Capslock` into a modifier (the first line keeps the capslock light off):

```
SetCapsLockState, AlwaysOff

capslock & x::traytip,, %a_thishotkey% 
```

If you want `Capslock` to send something when pressed alone
you will need to add something like:

```
capslock::Send, something 
```

and then that will only then 'something' on the **release** of `Capslock`.

[→Additional information←</a>](http://www.autohotkey.com/docs/Hotkeys.htm)

 [* * *

Here is an example where `X` and `A` perform differently if `Capslock` is physically ("p") held down:

```
SetCapsLockState, AlwaysOff
#If GetKeystate("capslock","p")
x::traytip,, %a_thishotkey%
a::traytip,, %a_thishotkey%
#If 
```

You could also try setting a variable ("Flag"),
and then clearing it with a timer.

```
capslock::
Flag := 1
SetTimer, Reset, 600
Return

Reset:
Flag := 0
Return

#If Flag
x::Sendinput, ^a
a::Sendinput, test
#If 
```](http://www.autohotkey.com/docs/Hotkeys.htm) 

[Manual reference:](http://www.autohotkey.com/docs/Hotkeys.htm) [#If](http://l.autohotkey.net/docs/commands/_If.htm)
[GetKeyState()](http://l.autohotkey.net/docs/Functions.htm#BuiltIn)

* * *

Another option is installing a keyboard hook.
Then you can check what the last pressed key was with the built-in variable: `a_priorkey`

```
#InstallKeybdhook

x::
if (a_priorkey = "Capslock") {
    Traytip,, %a_thishotkey%
} Return 
```

[→More on built-in variables←</a>](http://l.autohotkey.net/docs/Variables.htm#BuiltIn)

 [* * *](http://l.autohotkey.net/docs/Variables.htm#BuiltIn) 

[If all else fails you could try:](http://l.autohotkey.net/docs/Variables.htm#BuiltIn) [Remapping via the Registry's "Scancode Map"](http://www.autohotkey.com/docs/misc/Remap.htm#registry)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:18:12.280

组装，

我还没有完成这个想法，但这会是另一种方法吗？它会显示您按下了哪些键，直到（在这种情况下按下回车键），但您可以创建自己的“完成”条件，然后“组合”按键以创建您的 Alt 或 Ctrl 组合。

```
sc038:: ; Start when (in this case) the left Alt is pressed, {LAlt} is NOT listed in the input list....
input:=""
   Loop
   {
        Input, in, L1, {Enter}{LControl}{RControl}{RAlt}{LShift}{RShift}{LWin}{RWin}{AppsKey}{F1}{F2}{F3}{F4}{F5}{F6}{F7}{F8}{F9}{F10}{F11}{F12}{Left}{Right}{Up}{Down}{Home}{End}{PgUp}{PgDn}{Del}{Ins}{BS}{Capslock}{Numlock}{PrintScreen}{Pause}
        EL=%ErrorLevel%
        ToolTip, %EL% and %in% and %A_ThisHotkey%
        if EL = EndKey:Enter
        {
            ToolTip
            Sleep, 5000
            Break
        }
   }
Return 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-02T03:30:07.373

也许我没有正确理解这个问题，但我找到了这些键的关键特殊代码，这对我有用：

```
SC11D:: RCtrl
SC138:: RAlt 
```

不确定谁会使用 Alt 重映射，但为了完整起见......

在 Win8 上使用韩语 Microsoft IME 工作。**

# iphone - Iphone - >将图像从捆绑包复制到文档文件夹需要太长时间

> ID：11924647
> 
> 赞同：0
> 
> 时间：2012-08-12T18:24:21.547
> 
> 标签：iphone, multithreading, image, copy

当我的应用程序第一次启动时，我需要将一些（大约 300-400 张图像）复制到文档文件夹中。我看到的是它需要很长时间的工具（即使现在我认为我只用 30-40 张图像进行测试）。一开始我的应用程序在手机上（不是在模拟器上）运行时崩溃，因为运行时间太长。现在我正在运行复制线程上所有文件的方法。该应用程序保持运行，但我认为 ios 会在几秒钟后杀死该线程。我应该将每个图像副本放在一个新线程上吗？？？

我的代码是这样的：（这是在线程中运行的部分）

```
-(void) moveInitialImagesFromBundleToDocuments {
//move all images.

    NSMutableArray *images = [MyParser getAllImagesList];
    for (int i = 0 ; i< [images count] ; i++) {
        [self copyFileFromBundleToDocuments:[images objectAtIndex:i]];
    }
}

- (void) copyFileFromBundleToDocuments: (NSString *) fileName {

    NSString *documentsDirectory = [applicationContext getDocumentsDirectory];
    NSString *sourcePath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:fileName];
    NSString *destinationPath = [documentsDirectory stringByAppendingPathComponent:fileName];
    NSLog(@"Source Path: %@\n Documents Path: %@ \n Destination Path: %@", sourcePath, documentsDirectory, destinationPath);

    NSError *error = nil;

    [self removeFileFromPath:destinationPath];

    [[NSFileManager defaultManager] copyItemAtPath:sourcePath toPath:destinationPath error:&error];

    NSLog(@"File %@ copied", fileName);
    NSLog(@"Error description-%@ \n", [error localizedDescription]);
    NSLog(@"Error reason-%@", [error localizedFailureReason]);
} 
```

有什么建议么？首先是为了加快复制速度，其次，我应该为我复制的每个文件创建一个新线程吗？

* * *

评论1：

这看起来不错。但我想调暗应用程序，以便用户在加载所有图像之前无法使用该应用程序。

我在 . 它确实阻止了用户运行应用程序，但我认为在手机上，线程正在被杀死，因为当我尝试它时，加载时间太长。实际上从未停止过。

```
MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
hud.labelText = @"preparing...";
hud.dimBackground = YES;
hud.square = YES;
dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    // Do something...

    FileUtil *fileut = [[FileUtil alloc] init];
    [fileut moveInitialImagesFromBundleToDocuments];

    //Done something

    dispatch_async(dispatch_get_main_queue(), ^{
        [MBProgressHUD hideHUDForView:self.view animated:YES];
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:58:15.930

调用方法的时候，建议你用GCD把它移到后台线程，这样就可以像这样调用整个for循环了。（我还稍微改变了你的 for 循环以使其简单。

```
-(void) moveInitialImagesFromBundleToDocuments
{
//move all images and use GCD to do it

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
    NSMutableArray *images = [MyParser getAllImagesList];
        for (id image in images) {
            [self copyFileFromBundleToDocuments:image];
        }
    });
} 
```

关于使复制更快，我不知道任何解决方案。

# c# - 如何判断 VS 2010 IWpfTextView 何时已完全加载

> ID：11924650
> 
> 赞同：1
> 
> 时间：2012-08-12T18:24:57.650
> 
> 标签：c#, visual-studio-2010, visual-studio-extensions, visual-studio-sdk

我刚刚开始了解 VS2010 SDK，并正在尝试编写一个在 VS 编辑器中突出显示文本的扩展（使用 C#）。

我首先对 VS ***Editor Text Adornment***示例进行了更改。

谁能告诉我如何判断文件何时已完全加载并显示在编辑器窗口中？我希望突出显示对代码文件所做的进一步更改，而不突出显示第一次加载时文件中已经存在的任何文本。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:51:57.010

如果我理解您的问题：您可以尝试使用[ITextView.LayoutChanged](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.text.editor.itextview.layoutchanged.aspx)并尝试处理当前打开文档的所有更改。这行得通吗？

# ios4 - 适用于 iOS 的 Facebook SDK，在 iOS 4.0 设备上

> ID：11924651
> 
> 赞同：0
> 
> 时间：2012-08-12T18:25:03.293
> 
> 标签：ios4, facebook-ios-sdk

Facebook SDK 文档表明此 SDK 将适用于 iOS 4.0 及更高版本。然后我在 iPhone 3GS iOS 4.0 设备上测试了他们的 Scrumptions 样本。但似乎这个应用程序不起作用。尽管我登录了，但它一直向我显示登录屏幕。

然后我调试并注意到`FBSessionState`总是返回`FBSessionStateClosedLoginFailed`。它永远不会回来`FBSessionStateOpen`。

可能是什么原因？但是，当我在 iOS 5.1 模拟器中运行它时，它工作正常。是因为 SDK 不支持 iOS 4.0 还是其他问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:09:50.447

你都申报了吗

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation; 
```

和

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url; 
```

?

第一种是 iOS 4.2 及更高版本，因此如果您的设备运行的是 4.2 之前的版本，则将使用第二种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:24:15.903

就像 saulobrito 所说的那样。我自己遇到了这个问题，并通过在应用程序委托中实现此方法来解决它

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    return [FBSession.activeSession handleOpenURL:url]; ;
} 
```

您不必实现 handleOpenURL

# facebook - 我可以在运行 OSX10.6.8 的 Mac 上安装 Facebook SDK 吗？

> ID：11924652
> 
> 赞同：1
> 
> 时间：2012-08-12T18:25:03.287
> 
> 标签：facebook, macos, sdk, facebook-ios-sdk

我在我的 Mac 上下载了 Facebook iPhone sdk 3.0，在那里我正在开发我的 iPhone 游戏，但安装失败了两次。这是因为我的电脑上有 10.6.8 吗？

这是我收到的消息

![安装失败](../Images/d9d51961bf7f71fd7a7b7f98fe1e10b9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:40:37.733

是的，您可以在 OS 10.6.8 上安装 SDK。我自己安装了它，没有任何问题。

我相信这个包所做的就是将 SDK 放在你的 Documents 文件夹中。所以，你真的可以自己拿回购[https://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)并安装在任何你想要的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T13:49:38.790

我刚刚得到同样的错误和解决方案（在我的情况下）很简单：重新下载 sdk ;）

# objective-c - ARC过早释放或根本不释放的问题

> ID：11924655
> 
> 赞同：0
> 
> 时间：2012-08-12T18:25:23.827
> 
> 标签：objective-c, cocoa, automatic-ref-counting, avfoundation

我有一个简单的小音乐播放器，用于在 10.8 下使用 AVFoundation。它工作得很好，但我最近才被介绍给 ARC，这给我带来了一些麻烦。

该应用程序是基于文档的，大量必要的代码位于预制的 Document.h/.m 文件中。头文件中定义了一个 __strong AVAudioPlayer 对象，实现中的所有函数都使用该对象来播放音频文件。文件使用标准的 readFromURL: 方法加载。

关闭文档时，文件不会被释放，甚至会继续播放。如果 AVAudioPlayer 设置为 weak，它几乎会立即被释放并且文件将不再播放。

我在这里缺少什么吗？我知道我不能在 ARC 下手动释放，那么是什么让对象被捆绑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:05:44.707

ARC 中的对象指针默认是强的。您对您的任何引用都`AVAudioPlayer`没有被定义为弱并且位于仍然存在的对象/类中，这将阻止它被释放。如果您的文件继续播放，这可能不是 ARC 问题，而是您正在使用`AVAudioPlayer`.

在 ARC 中“释放”内存的一种方法是将指向对象的指针设置为`nil`. 如果没有其他对该对象的引用，它将被释放。

# sql - 合并，当匹配插入

> ID：11924657
> 
> 赞同：1
> 
> 时间：2012-08-12T18:25:55.357
> 
> 标签：sql, oracle

我希望在 Oracle 中执行建设性合并，即如果在源表中找到匹配的记录，则应将具有当前时间戳的新记录添加到目标表中。

如何在 Oracle 中使用合并来做到这一点？下面是我的代码，它给出了“缺少关键字”错误。

```
merge into studLoad sl
using student s
on(s.studID=sl.studID)
when matched
then
insert(sl.studID,sl.studName)
values(s.studID||'abc',s.studName)
when not matched
then
insert(sl.studID,sl.studName)
values(s.studID,s.studName); 
```

另外，我不知道如何将当前时间戳与`studName`. 任何相同的建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:32:38.887

如果您要插入新行，无论是否匹配，使用`MERGE`. 只需做一个`INSERT`.

```
INSERT INTO student( studID, studName, <<timestamp column>> )
  SELECT (CASE WHEN s.studId IS NOT NULL -- If there is a match
               THEN <<student ID sequence>>.nextval
               ELSE sl.studID
           END), 
         studName, 
         (CASE WHEN s.studId IS NOT NULL -- If there is a match
               THEN systimestamp
               ELSE NULL
           END)
    FROM studLoad sl
         LEFT OUTER JOIN student s ON (sl.studID = s.studId) 
```

请注意，我假设您的`student`表实际上有一个列来存储当前时间戳——使用该列名代替`<<timestamp column>>`上面的 SQL 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T00:13:44.863

这不应该通过合并来完成（正如贾斯汀所说），而是通过两个插入来完成。**每个匹配只有一行**（如您在评论中所说的重复匹配），然后是学生的所有行。这可以通过以下方式完成。

```
insert into studLoad ( studID, studName, <<timestamp column>> )
select studID, studName, systimestamp
from student
where studId in (
        selct studId
        from studLoad
    )
/
insert into studLoad (studID, studName)
select studID, studName
from student
/ 
```

并且不要颠倒这个执行顺序！！！

# tcplistener - 为什么我不能听远程连接？

> ID：11924661
> 
> 赞同：0
> 
> 时间：2012-08-12T18:26:10.517
> 
> 标签：tcplistener

我想收听来自远程机器的连接。但是它不起作用。使用我的浏览器我只是简单地连接到 127.0.0.1 并且我知道我是否连接（来自浏览器消息和调试器）。

127.0.0.1 与 127.0.0.2 一样工作。但是除非我使用 IPAddress.Parse("192.168.1.1") （假设那是我的本地地址），否则 192.xxx 不会。但是 any 应该适用于任何接口。这有什么问题？[DoBeginAcceptTcpClient 看起来像这样](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.beginaccepttcpclient.aspx)。对于 > 1024 的端口，问题仍然存在。我用 1234 测试过

```
var server = new TcpListener(IPAddress.Any, 80);
server.Start(backlog);
while (true)
{
    DoBeginAcceptTcpClient(server);
} 
```

# css - IE8 及更低版本的 CSS 'background-size: contains' 属性

> ID：11924662
> 
> 赞同：1
> 
> 时间：2012-08-12T18:26:15.283
> 
> 标签：css

> **可能重复：**
> [使背景大小在 IE 中工作？](https://stackoverflow.com/questions/2991623/make-background-size-work-in-ie)

我正在为 css background-size 属性寻找 IE8 和更低的解决方案。现在我看到了这篇文章，但问题是它基本上只涵盖了：

```
background-size: cover;
(stretching over the whole element) 
```

并不是

```
background-size: contain;
(fitting 100*100% of the image inside the element) 
```

这是IE的解决方案：

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='images/logo.gif',
sizingMethod='scale');

-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='images/logo.gif',
sizingMethod='scale')"; 
```

现在 sizingMethod 有其他值，它们是裁剪和图像，但仍然没有创造出想要的效果（[看看为什么](http://msdn.microsoft.com/en-us/library/ms532920%28v=vs.85%29.aspx)） background-size: 包含的可能解决方案是什么？我知道有一个 jquery 插件，但如果可能的话，我更愿意使用基于 css 的方法

谢谢！

# common-lisp - Common lisp：有没有一种不那么痛苦的输入数学表达式的方法？

> ID：11924667
> 
> 赞同：6
> 
> 时间：2012-08-12T18:27:06.073
> 
> 标签：common-lisp, prefix, infix-notation, s-expression, reader-macro

我喜欢普通的 lisp，但有时输入简单的数学表达式真的很痛苦，比如

```
a(8b^2+1)+4bc(4b^2+1) 
```

（当然我可以转换这个，但它有点慢，我先写（+（）（）），然后在每个括号中我放（*（）（））......）

我想知道这里是否有人知道输入此内容的更好方法。我在考虑写一个数学宏，在哪里

```
(math “a(8b^2+1)+4bc(4b^2+1)”) 
```

扩展到

```
(+ (* a (1+ (* 8 b b))) (* 4 b c (1+ (* 4 b b)))) 
```

但是对于名称很长的变量，解析是一个问题。

有人有更好的建议吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-12T18:54:30.020

有用于此目的的阅读器宏。

见： [http ://www.cliki.net/infix](http://www.cliki.net/infix)

例如：

```
CL-USER 17 > '#I(a*(8*b^^2+1)+ 4*b*c*(4*b^^2+1) )
(+ (* A (+ (* 8 (EXPT B 2)) 1)) (* 4 B C (+ (* 4 (EXPT B 2)) 1))) 
```

`'`是通常的报价。`#I( some-infix-expression )`是阅读器宏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T04:11:03.233

我正在关注的一个项目是所谓的“Sweet-expressions”，它是[Readable Lisp S-expressions Project](https://readable.sourceforge.io/)的一部分。该项目的目标是添加与 s 表达式向后兼容的“甜味”，并且足够简单，表达式不会妨碍宏。（例如，已经观察到运算符优先级确实会干扰宏系统；因此，建议的解决方案不使用运算符优先级。）

应该记住，该项目还处于起步阶段，尤其是对于 Common Lisp；然而，该项目有一个中缀表示法的工作实现，它依赖于大括号和一个简单的算法：

```
{1 + {2 * 3} + {4 exp 5}} 
```

很好地翻译成

```
(+ 1 (* 2 3) (exp 4 5)) 
```

我将向您推荐链接，以更深入地讨论花括号的语义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-10T06:01:45.327

我最近专门为此目的编写了一个 cl 宏，您可能会发现它很有用。它被称为[丑陋的小中缀宏](https://github.com/peey/ugly-tiny-infix-macro)。

您可以将有问题的表达式写为：

```
($ a * ($ 8 * (expt b 2) + 1) + 4 * b * c * ($ 4 * (expt b 2) + 1)) 
```

它扩展为

```
(+ (* A (+ (* 8 (EXPT B 2)) 1)) (* (* (* 4 B) C) (+ (* 4 (EXPT B 2)) 1))) 
```

**说明：** $ 是宏的名称。参数被视为表达式列表，因此自由使用空格将数字/形式与表示运算符的符号分开。

考虑以下示例以更好地理解此宏的功能：

```
($ 1 + 2)       ; gets converted to (+ 1 2), where name of the macro is $
($ t and nil)   ; gets converted to (and t nil)
($ 3 > 5)       ; gets converted to (> 3 5)
($ 1 + 2 + 3)   ; gets converted to (+ (+ 1 2) 3)
($ 1 + 2 *  3)      ; gets converted to (+ 1 (* 2 3))
($ 1 < 2 and 2 < 3) ; gets converted to (AND (< 1 2) (< 2 3)) 
```

操作数位置括号内的任何内容都被视为 lisp 形式。

```
($ 2 + (max 9 10 11)) ; gets converted to (+ 2 (max 9 10 11)). It could have been any function / lisp form.
($ 6 / ($ 1 + 2))     ; gets converted to (/ 6 ($ 1 + 2)), and then subsequently to (/6 (+ 1 2)) 
```

我发现它比 reader 宏更容易推理和更有利，因为它可能很**容易与 lisp 形式混合**，因此您可以在表达式中嵌套 lisp 形式。例如，`(exp b 2)`可以是*任何 lisp 形式*，如`(max a b c)`或您自己的用户定义`(foobar a b c)`。

您可以在 github上找到有关[README的更多信息。](https://github.com/peey/ugly-tiny-infix-macro)它也可以在 quicklisp 上找到。

# javascript - 赋予锚标记多种功能 - HTML

> ID：11924668
> 
> 赞同：0
> 
> 时间：2012-08-12T18:27:07.223
> 
> 标签：javascript, html, web

在我的网页中，我有多个锚标记，并且我已将它们分配为在单击时滚动到页面顶部。我如何让它们向上滚动，然后按该顺序重定向到 href 中的页面？

JSFiddle - [http://jsfiddle.net/TkdMJ/](http://jsfiddle.net/TkdMJ/)

HTML

```
<a href="javascript:void(0)" onClick="goToByScroll('translation_list')"  href="VideoPages/Azeri/Heydər Oğuzun1-ci hissə.html">
        <li>
      <img src="../Images/Article Images/GuliyevFace14.png" class="li-image" />
        <h3 class="li-header">Heydər Oğuzun Rəsul Quliyevlə Müsahibəsi - 29 İyul 2012, 1-ci hissə</h3>

         <p class="li-text">Yayımlanıb on Aug 1, 2012 - Rəsul Quliyev</p>
        <p class="li-text">Heydər Oğuzun Rəsul Quliyevlə müsahibəsi - 29 İyul 2012, 1-ci hissə Heydar Oguz's Interview with Rasul Guliyev on July 29, 2012, Part 1
 </p>
       </li>
         </a> 
```

Javascript

```
function goToByScroll(id){
        $('html,body').animate({scrollTop: $("#"+id).offset().top},'slow');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:31:49.767

您在链接上有两个`href`属性会导致问题。我会将 jQuery`click`事件附加到锚元素并在动画完成后重定向。您还需要调用`preventDefault`，以便默认情况下链接不会重定向。

```
$("#link").click(function(e) {
    $("body").animate({
        scrollTop: $("body").offset().top
    }, "slow", function() {
        alert("redirecting to " + $(e.target).attr("href"));
        window.location.href = $(e.target).attr("href");
    });

   e.preventDefault();
}); 
```

我更新了这个[jsFiddle](http://jsfiddle.net/TkdMJ/17/)中的解决方案。

# php - 我的 php CURL 登录脚本在 asp 页面中没有成功

> ID：11924670
> 
> 赞同：1
> 
> 时间：2012-08-12T18:27:32.063
> 
> 标签：php, asp.net, curl, single-sign-on, siteminder

我想使用 php CURL 脚本登录一个网站，但它在最后一步被重定向到一个循环中。

我在使用 Firefox 和 Internet Explorer 时使用 Fiddler 来捕获 HTTP 请求和响应。我重新创建了脚本中的步骤。

该网站有几个步骤，包括 302 重定向、在表单提交之前设置 cookie 以及位置重定向。

这一切都进行得很顺利，直到最后一步。该网站加载以下内容。

```
 HTTP/1.1 200 OK
Connection: Keep-Alive
Server: Microsoft-IIS/5.0
Date: Sun, 12 Aug 2012 15:51:55 GMT
X-Powered-By: ASP.NET
Set-Cookie: SMSESSION=*omitted by me*; path=/; domain=website.com
Content-Length: 511
Content-Type: text/html
Set-Cookie: BIGipServerPortal_80_Green=3741601290.20480.0000; expires=Sun, 12-Aug-2012 17:51:57 GMT; path=/
Cache-Control: private
X-PvInfo: [S10201.C29051.A26868.RA0.G7175.U147B7189].[OT/html.OG/pages]
Vary: Accept-Encoding, User-Agent
Content-Encoding: gzip

<!--START:INC\common\include.asp-->
<!--START:INC\common\errorfns.asp-->

<!--END:INC\common\errorfns.asp--><!--START:INC\common\newconstant.asp-->

<!--END:INC\common\newconstant.asp--><!--START:INC\common\securityfns.asp-->

<!--END:INC\common\securityfns.asp--><!--START:INC\common\newptintllocales.asp-->

<!--END:INC\common\newptintllocales.asp-->

<!--START:INC\common\newptintl.asp-->

<!--END:INC\common\newptintl.asp-->

<!--START:INC\common\newutility.asp-->

<!--END:INC\common\newutility.asp-->
<!--END:INC\common\include.asp--><!--START:INC\sso\vendors\ActiveDirectoryServer.asp-->

<!--END:INC\sso\vendors\ActiveDirectoryServer.asp--><!--START:INC\sso\vendors\netegrity.asp-->

<!--END:INC\sso\vendors\netegrity.asp--><!--START:INC\sso\vendors\oblix.asp-->

<!--END:INC\sso\vendors\oblix.asp-->
<!--START:INC\sso\vendors\securant.asp-->

<!--END:INC\sso\vendors\securant.asp--><!--START:INC\sso\vendors\Tivoli.asp-->

<!--END:INC\sso\vendors\Tivoli.asp-->
<!--START:INC\sso\vendors\customsso.asp-->

<!--END:INC\sso\vendors\customsso.asp-->
<!--START:INC\sso\ssoutility.asp-->

<!--END:INC\sso\ssoutility.asp-->
<!--START:INC\sso\sso.asp-->

    <HTML>
        <BODY onload="javascript:void(document.dologin.submit())">
            <FORM ACTION="../admin/dologin.asp" METHOD="POST" NAME="dologin">
                <INPUT TYPE="HIDDEN" NAME="RedirectURL" VALUE="">
                <INPUT TYPE="HIDDEN" NAME="ssoMode" VALUE="1">
            </FORM>
        </BODY>
    </HTML>

<!--END:INC\sso\sso.asp--> 
```

当 Firefox 提交此表单时，它会被重定向到正确的内容。但是我的 CURL 脚本被重定向到同一页面，但表单输入现在将 RedirectURL 值设置为`admin/login.asp?Mode=1`

```
<HTML>
        <BODY onload="javascript:void(document.dologin.submit())">
            <FORM ACTION="../admin/dologin.asp" METHOD="POST" NAME="dologin">
                <INPUT TYPE="HIDDEN" NAME="RedirectURL" VALUE="/admin/login.asp?Mode=1">
                <INPUT TYPE="HIDDEN" NAME="ssoMode" VALUE="1">
            </FORM>
        </BODY>
    </HTML> 
```

我使用 Fiddler 复制和粘贴浏览器和 CURL 的执行，并逐行比较它们。两者都发送相同的信息，我没有错过任何 cookie。

我能看到的唯一区别是发送的标头的顺序和发送的 COOKIES 的顺序。

我已经调整了我的 CURL 以发送与 firefox 相同的标题，但我无法获得相同的顺序。

火狐头

```
GET https://www.website.aa.com/ HTTP/1.1 
Host: www.website.com
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:14.0) Gecko/20100101 Firefox/14.0.1 
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5 
Accept-Encoding: gzip, deflate
Connection: keep-alive 
```

卷曲头

```
GET /login/SMLogin.jsp? HTTP/1.1
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:14.0) Gecko/20100101 Firefox/14.0.1
Host: www.website.com
Accept-Encoding: gzip, deflate
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Connection: keep-alive 
```

最大的区别是 CURL 在 HOST: 之前发送 User-Agent: 和 Accept-Encoding: 的顺序不同。我试图通过以不同的顺序设置 CURL 选项来重新排列事物，但似乎无法获得与 Firefox 相同的顺序。

这是我的 CURL 选项。（我省略了选择 GET 或 POST 并创建查询字符串的步骤）

```
//process the header
$headerArray = array();
$headerArray[] = 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8';
$headerArray[] = 'Accept-Language: en-us,en;q=0.5'; 
$headerArray[] = 'Connection: keep-alive';
    if($ref != ""){
    $headerArray[] = 'Referer: ' . $ref;
    }
curl_setopt($ch, CURLOPT_HTTPHEADER, $headerArray) ;

// set up the cURL resource
curl_setopt($ch, CURLOPT_TIMEOUT, CURL_TIMEOUT);    // Timeout
curl_setopt($ch, CURLOPT_USERAGENT, WEBBOT_NAME);   // Webbot name
curl_setopt($ch, CURLOPT_ENCODING, "gzip, deflate");   

// SSL SECTION
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 1);
curl_setopt($ch, CURLOPT_CAINFO, getcwd() . '\cert\ca-bundle.crt');

// Cookie management.
curl_setopt($ch, CURLOPT_COOKIEJAR, COOKIE_FILE);   
curl_setopt($ch, CURLOPT_COOKIEFILE, COOKIE_FILE);

curl_setopt($ch, CURLINFO_HEADER_OUT, TRUE);    
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);     
curl_setopt($ch, CURLOPT_URL, $target); 
```

另一个区别是发送 cookie 的顺序。由于我让 CURL 处理 cookie 管理，我无法控制顺序。除非我自己管理 cookie 并使用`CURLOPT_COOKIE`选项设置它们，但这似乎很痛苦。

那么，是否很可能是标头的顺序和/或发送的 COOKIES 的顺序告诉服务器我的脚本不是真正的浏览器并将我从受保护的内容中重定向？如果是这样，我该如何改变？还是我错过了其他东西？

**编辑** 这是@MARC_B 评论“javascript 设置cookies”说明了一切。

是的，我了解 CURL 不执行 javascript。我已经查看了 javascript 并复制了脚本中的操作。在提交登录表单后的一个页面上，javascript 验证用户名，然后设置一个 cookie。

```
if (validate) {
        document.cookie = "loggedIn=yes";
        document.Login.submit();
} 
```

所以在检索到页面后，脚本将上面的cookie写入cookie文件。

```
$handle = fopen("cookies.txt", "a");

$cookie = "website.com  FALSE   /login/ FALSE   0   loggedIn    yes";

fwrite($handle, $cookie);
fclose($handle); 
```

其他 javascript 操作只是自动提交表单，它只需要执行 CURL 来复制。

我已经取得了进展。经过一整天的谷歌搜索，我发现其中一个网络表单是[CA Siteminder](http://support.ca.com/cadocs/0/CA%20SiteMinder%20r12%205-ENU/Bookshelf_Files/HTML/idocs/index.htm?toc.htm?1915257.html?zoom_highlight=firefox)软件的一部分，用于保护资源。链接文档显示表单收集正在使用的浏览器。代理名称在表单中被加密（不确定为什么需要）。我找不到任何关于为什么浏览器很重要的文档。我想知道加密字符串是从 agentname 标头创建的，还是通过使用发送的标头名称的组合和顺序创建的。

我开始脚本时没有设置 cookie。在逐行审查响应标题后，我专注于 2 个特定的 cookie。从未在响应中设置 2 个 cookie 中的脚本 1 的每次运行。但如果每次都不一样。

我决定使用 Firefox 登录时显示的所有 cookie 设置 cookie 文件。这一次，脚本在上述页面循环一次后继续进入新页面。新页面包含检测浏览器类型和设置的 JavaScript。分析页面需要一段时间。

**所以答案似乎是我错过了几个必要的 cookie 中的一个。**

如果有人能对 Siteminder 生态系统和典型的 asp 登录脚本有所了解，我想听听。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:35:28.917

尝试调试js函数并emu它们。如果你不能，那么curl帮不了你。

# jquery - 用于未“包装”元素的 JQuery 选择器

> ID：11924672
> 
> 赞同：3
> 
> 时间：2012-08-12T18:27:57.927
> 
> 标签：jquery, jquery-selectors

我正在寻找一个 JQuery 选择器，它选择所有没有被特定 div 包装的 img 元素（使用 .special 或 .dontSelect 类）

例如我的html代码：

```
<div class="special">
    <ul>
        <li>
             <img id="1"></img>
        </li>
    </ul>
</div>
<div>
    ....
          <img id="2"></img>
    ....
          <div class="dontSelect">
              <img id="3"></img>
          </div>
</div> 
```

在这个例子中，只有 id 为 2 的 img 应该被选中，因为 1 和 3 被“包装”了。

感谢帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T18:32:52.430

没有选择器，但您可以选择所有图像并过滤它们：

```
$("img").filter( function(){
    return !$(this).closest(".special,.dontSelect").length
}).remove();

//Will remove the image with id="2" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:32:31.717

您可以使用以下`filter`方法：

```
var $imgs = $('img').filter(function(){
               return $(this).closest('.dontSelect, .special').length === 0
           }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T18:37:00.667

尝试：

```
 $('*:not(.dontSelect), *:not(.special)').find('img') 
```

甚至

```
 $('*:not(.dontSelect, .special) img') 
```

# android - Android 保持线程活跃问题

> ID：11924675
> 
> 赞同：0
> 
> 时间：2012-08-12T18:28:12.827
> 
> 标签：android, multithreading, tcp

我正在构建一个将通过 TCP 与服务器通信的 Android 应用程序。我有一些实施想法，但我不知道哪种方式最好。我是新手，我的设计随着我学习新事物而不断发展，所以现在我正在寻找有关如何最好地实施解决方案以实现我的目标的建议。

目标：能够：

1.  向服务器发送数据
2.  将数据发送到服务器并读取服务器响应。

    *   我发送的一些信息将提供服务器信息，其他信息将向服务器请求信息。

可能的实现：

*   Thread Run() 方法不断循环检查我的发送队列是否有东西要发送（如果有，就发送它）然后检查我是否有任何东西要读回。
    *   这会耗尽电池/烧毁CPU吗？
*   每次我想发送/接收时创建一个新线程，一旦我完成“发送”或“发送+接收”就让它死掉
    *   我应该如何将线程交互与我的一个套接字同步？阻止制作下一个线程，直到这个线程完成？
*   每次我需要写入或写入+读取时，创建一个线程并使用该线程调用发送或发送+接收方法
    *   如何在不燃烧电池/CPU 的情况下保持线程存活？
    *   我应该使用队列来处理传输数据的请求，我应该同步读取它直到当前的读/写完成吗？

任何关于潜在问题的额外指针、链接或警告将不胜感激。示例代码特别感谢，因为我刚刚开始使用它。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T20:14:20.933

正如您所指出的，有几种方法可以实现这一目标，每种方法都有其优点和缺点。

保持连接打开或经常重新发送它们肯定会影响电池续航时间。如果这是您的情况，我会考虑每隔一定时间将一些请求批处理为一个。这是一篇有趣的[文章](http://developer.android.com/training/efficient-downloads/efficient-network-access.html)。

几天前，我写了一篇关于我经常使用的方法，该方法效果很好。它可以像看起来一样简单，也可以为您的 Android 应用程序的整个 API 通信引擎奠定基础。这取决于您的需求。它基本上是在后台线程池中执行您的请求，由服务控制并在您的活动或您需要的任何内容中通知。每当您需要推送新请求时，只需将其入队并设置回调即可。如果您认为这可能对您有用，我会给您提供一对更深入的链接。

[http://ugiagonzalez.com/2012/07/02/theres-life-after-asynctasks-in-android/](http://ugiagonzalez.com/2012/07/02/theres-life-after-asynctasks-in-android/) [http://ugiagonzalez.com/2012/08/03/using-runnables-queues-and-executors-执行任务在后台线程在安卓/](http://ugiagonzalez.com/2012/08/03/using-runnables-queues-and-executors-to-perform-tasks-in-background-threads-in-android/)

希望能帮助到你。

# php - 使用 php 连接到远程服务器时发生访问冲突错误

> ID：11924678
> 
> 赞同：2
> 
> 时间：2012-08-12T18:28:20.940
> 
> 标签：php, post, curl, access-violation

我有以下代码

```
<?php
function send_post($url,$data) {//sends data array(param=>val,...) to the page $url in post method and returns the reply string
    $post = http_build_query($data);
    $context = stream_context_create(array("http"=>array(
       "method" => "POST",
       "header" => "Content-Type: application/x-www-form-urlencoded\r\n"."Content-Length: ". strlen($post) . "\r\nUser-agent:Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)r\n",  
       "content" => $post,
    ))); 
    $page = file_get_contents($url, false, $context);
    return $page;
}
$post_data=array();
$post_data['firstName'] = 'Name';
$post_data['lccp_trnno']='16348';
$post_data['lccp_month'] = '8';
$post_data['lccp_day']='12';
$post_data['lccp_srccode']='ktym';
$post_data['lccp_dstncode']='tvc';
$post_data['lccp_classopt']='1A';
$post_data['lccp_conc']='ZZZZZZ'; 
$post_data['lccp_age']='30';
echo send_post("http://www.indianrail.gov.in/cgi_bin/inet_frenq_cgi.cgi",$post_data);
?> 
```

查询产生一个带有消息的页面

```
access violation, reason mask=!XB, virtual address=!XH, PC=!X 
```

显然问题不在于我的代码。请求在他们的页面中创建了某种类型的错误。有人知道这是什么类型的错误及其原因，以及如何做一个工作请求来避免错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:52:50.850

使用以下答案中列出的所有字段，包括“classopt”和“lcp_frclass1”

```
 <FORM NAME="FareInfo" METHOD="POST" ACTION="http://www.indianrail.gov.in/cgi_bin        /inet_frenq_cgi.cgi"><td>
 <INPUT TYPE="SUBMIT" NAME="lccp_submitfare" CLASS="btn_style" ONCLICK="return submitfare()"  VALUE="Get Fare">
 <INPUT  TYPE="HIDDEN" NAME="lccp_trnno" SIZE="5" VALUE="12635">
 <INPUT  TYPE="HIDDEN" NAME="lccp_srccode" SIZE="4" VALUE="MS  ">
 <INPUT  TYPE="HIDDEN" NAME="lccp_dstncode" SIZE="4" VALUE="MDU ">
 <INPUT  TYPE="HIDDEN" NAME="lccp_month" SIZE="2" VALUE="3">
 <INPUT  TYPE="HIDDEN" NAME="lccp_day" SIZE="2" VALUE="8">
 <INPUT  TYPE="HIDDEN" NAME="lccp_year" SIZE="4" VALUE="2013">
 <INPUT  TYPE="HIDDEN" NAME="lccp_age" SIZE="2" VALUE="ADULT_AGE">
 <INPUT  TYPE="HIDDEN" NAME="lccp_conc" SIZE="6" VALUE="ZZZZZZ">
 <INPUT  TYPE="HIDDEN" NAME="lccp_classopt" SIZE="2" VALUE="ZZ">
 <INPUT  TYPE="HIDDEN" NAME="lccp_frclass1" SIZE="2" VALUE="2S">
 <INPUT  TYPE="HIDDEN" NAME="lccp_frclass2" SIZE="2" VALUE="ZZ">
 <INPUT  TYPE="HIDDEN" NAME="lccp_frclass3" SIZE="2" VALUE="ZZ">
 <INPUT  TYPE="HIDDEN" NAME="lccp_frclass4" SIZE="2" VALUE="ZZ">
 <INPUT  TYPE="HIDDEN" NAME="lccp_frclass5" SIZE="2" VALUE="ZZ">
 <INPUT  TYPE="HIDDEN" NAME="lccp_frclass6" SIZE="2" VALUE="ZZ">
 <INPUT  TYPE="HIDDEN" NAME="lccp_frclass7" SIZE="2" VALUE="ZZ">
 <INPUT  TYPE="HIDDEN" NAME="lccp_disp_avl_flg" SIZE="1" VALUE="1">
 <INPUT  TYPE="HIDDEN" NAME="lccp_enrtcode" SIZE="4" VALUE="NONE">
 <INPUT  TYPE="HIDDEN" NAME="lccp_viacode" SIZE="4" VALUE="NONE">
 </FORM> 
```

# powershell - 使用 Dargs 启动 java，并从 powershell 开始

> ID：11924680
> 
> 赞同：2
> 
> 时间：2012-08-12T18:28:30.097
> 
> 标签：powershell

如何从 powershell 运行这个在命令提示符下工作的命令？

`java -DSTOP.PORT=9100 -DSTOP.KEY=juststop -Xms256M -Xmx512M -jar start.jar`

它给`Error: Could not find or load main class .PORT=9100`

我试过 ：

*   `iex 'java -DSTOP.PORT=9100 -DSTOP.KEY=juststop -Xms256M -Xmx512M -jar start.jar'`
*   `iex "java -DSTOP.PORT=9100 -DSTOP.KEY=juststop -Xms256M -Xmx512M -jar start.jar"`
*   `@" same as above "@`
*   只是`java -DSTOP.PORT=9100 -DSTOP.KEY=juststop -Xms256M -Xmx512M -jar start.jar`没有iex
*   还有更多没有结果。

如果您想尝试一下，只需下载 apache solr 并从 powershell 启动和停止码头。

从命令提示符开始的命令是 `java -DSTOP.PORT=9100 -DSTOP.KEY=juststop -Xms256M -Xmx512M -jar start.jar`，停止的命令是`java -DSTOP.PORT=9100 -DSTOP.KEY=juststop -jar start.jar --stop`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T19:28:02.603

如果您在 PowerShell v3.0 上运行，请尝试以下操作：

```
java --% -DSTOP.PORT=9100 -DSTOP.KEY=juststop -Xms256M -Xmx512M -jar start.jar 
```

如果您使用的是 V1 或 V2，请尝试：

```
java '-DSTOP.PORT=9100' '-DSTOP.KEY=juststop' -Xms256M -Xmx512M -jar start.jar 
```

# ios - 自定义 UISwitch？

> ID：11924683
> 
> 赞同：0
> 
> 时间：2012-08-12T18:28:41.863
> 
> 标签：ios, customization, uiswitch

在过去的三天里，我一直在尝试推出自己的 UISwitch，因为它是使用自定义图像为实际切换按钮和自定义图像进行自定义的。到目前为止，它已经导致了错误和丑陋的代码，而且它不能很好地工作。

由于我不想重新发明轮子，有什么方法或库可以让我用自己的 UIImage 自定义 UISwitch 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:52:23.207

您可以使用图层创建完全自定义的交换机版本。

下面是一个简单的例子。您应该能够修改它以使用图像或您喜欢绘制的任何自定义图形。

代替标准外观的开关，它使用红色和绿色填充来指示开/关状态。它的行为与 `UISwitch 相同，只是使用不同的图形。由于我们使用的是 CALayer，所以颜色过渡也为我们设置了动画。

```
//CustomSwitch.H
#import <Foundation/Foundation.h>

@interface CustomSwitch : UISwitch {
    CALayer* uiLayer; 
}

@end

//CustomSwitch.m

    #import "CustomSwitch.h"
    #import "QuartzCore/QuartzCore.h"

    @implementation CustomSwitch               

    -(id) initWithFrame:(CGRect)frame
    {
        self = [super initWithFrame:frame];                

        [self addTarget:self action:@selector(checked:) forControlEvents:UIControlEventValueChanged];
        if (NULL!=self)
        {
            [self customLayout];
        }        

        return self;
    }

    -(void) checked:(id) event
    {
        uiLayer.backgroundColor=  [self isOn] ? [UIColor greenColor].CGColor : [UIColor redColor].CGColor;      
    }

    -(void) customLayout
    {
        uiLayer = [CALayer layer];            
        uiLayer.frame = self.frame;
        uiLayer.backgroundColor= [UIColor redColor ].CGColor;         
        [[self layer] addSublayer:uiLayer];            
    }

    -(void)dealloc
    {
        [uiLayer release];
    }

    @end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T18:33:15.647

这是一个几乎完整的类似 UISwitch 的控件。由于它是开源的，因此您可以对其进行子类化/修改，以便使用图像对其进行自定义。

[https://github.com/domesticcatsoftware/DCRoundSwitch](https://github.com/domesticcatsoftware/DCRoundSwitch)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T09:28:46.170

我制作了一个自定义 UISwitch 类，我想分享它。您可以在此处下载自定义 UISwitch：

[http://xcodenoobies.blogspot.com/2013/04/free-custom-uiswitch-flexible-colors.html](http://xcodenoobies.blogspot.com/2013/04/free-custom-uiswitch-flexible-colors.html)

干杯

# spring - Spring AOP target() 与 this()

> ID：11924685
> 
> 赞同：23
> 
> 时间：2012-08-12T18:28:44.057
> 
> 标签：spring, spring-aop

来自[Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html)：

*   代理实现 AccountService 接口的任何连接点（仅在 Spring AOP 中执行方法）：

    ```
    this(com.xyz.service.AccountService) 
    ```

*   目标对象实现 AccountService 接口的任何连接点（仅在 Spring AOP 中执行方法）：

    ```
    target(com.xyz.service.AccountService) 
    ```

我不明白“目标对象”和表达的`target(...)`意思。

有什么`target`不同`this`？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-12T21:03:02.453

`this(AType)`表示所有`this instanceof AType`为真的连接点。因此，这意味着在您的情况下，一旦调用到达 AccountService 的任何方法，`this instanceof AccountService`都将为真。

`target(AType)`表示 的所有连接点`anObject instanceof AType`。如果您在对象上调用方法并且该对象是 AccountService 的实例，那么这将是一个有效的连接点。

总结一种不同的方式 -`this(AType)`是从接收者的角度来看，并且`target(AType)`是从呼叫者的角度来看。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-10-09T13:00:36.660

我知道这是一篇旧帖子，但我只是在不使用 AspectJ 的情况下遇到了这个和目标之间的重要区别。

考虑以下介绍方面：

```
@Aspect
public class IntroductionsAspect {

    @DeclareParents(value="a.b.c.D", defaultImpl=XImpl.class)
    public static X x;

    @After("execution(* a.b.c.D.*(..)) && this(traceable)")
    public void x(Traceable traceable) {
        traceable.increment();
    }

} 
```

简单地说，这个方面是在做两件事：

1.  使`a.b.c.D`类实现`X`接口。
2.  `traceable.increment()`在 的每个方法之前添加要执行的调用`a.b.c.D`。

重要的部分是`"execution(* a.b.c.D.*(..)) && this(traceable)"`。请注意，我使用**了 this**，而不是**target**。

如果您改用**target**，则您正在尝试匹配原始 class `a.b.c.D`，而不是引入的 interface `X`。所以 Spring AOP 不会在`a.b.c.D`.

总之：

**this** - 检查代理类型或引入类型。 **target** - 检查声明的类型。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-09-21T17:44:42.210

来自官方文档：

> Spring AOP 是一个基于代理的系统，它区分代理对象本身（绑定到'this'）和代理背后的目标对象（绑定到'target'）。

[http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-pointcuts-designators](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-pointcuts-designators)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-01T22:30:57.490

This topic is often a source of confusion when it comes to AOP programming. I found a very good excerpt explanation on the web which summaries the differences:

> **this** limits matching to join points where the bean reference is an instance of the given type, while **target** limits matching to join points where the target object is an instance of the given type. The former works when Spring AOP creates a **CGLIB-based** proxy, and the latter is used when a **JDK-based** proxy is created.
> 
> Suppose that the target class implements an interface:
> 
> ```
> public class FooDao implements BarDao {
>     ...
> } 
> ```
> 
> In this case, Spring AOP will use the JDK-based proxy and you should use the target PCD because the proxied object will be an instance of Proxy class and implement the BarDao interface:
> 
> ```
> @Pointcut("target(com.baeldung.pointcutadvice.dao.BarDao)") 
> ```
> 
> On the other hand if FooDao doesn't implement any interface or proxyTargetClass property is set to true then the proxied object will be a subclass of FooDao and the this PCD could be used:
> 
> ```
> @Pointcut("this(com.baeldung.pointcutadvice.dao.FooDao)") 
> ```

You can find out more on the following link:

[Introduction to Pointcut Expressions in Spring](https://www.baeldung.com/spring-aop-pointcut-tutorial#3-this-and-target)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-03T09:19:27.897

我试图为目标和这个切入点指示符提供外行代码。已经太晚了，但希望对某人有所帮助。

**方面类**

```
package com.opensource.kms;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.Pointcut;
import org.springframework.stereotype.Component;

@Aspect
@Component
public class SecurityService {

    @Pointcut("target(com.opensource.kms.FooDao)")
    public void myPointCut1() {}

    @Pointcut("this(com.opensource.kms.SooDao)")
    public void myPointCut2() {}

    @Before("myPointCut1()")
    public void beforeMethodTarget() {
        System.out.println("beforeMethodTarget myPointCut1");
    }

    @Before("myPointCut2()")
    public void beforeMethodThis() {
        System.out.println("beforeMethodThis myPointCut2");
    }
} 
```

**FooDao 类：JDK 动态代理**

```
package com.opensource.kms;
import org.springframework.stereotype.Component;

interface BarDao {
    String m();
}

@Component
public class FooDao implements BarDao {

    public String m() {
        System.out.println("implementation of m");
        return "This is return value";
    }
} 
```

**SooDao 类：CGLIB 代理**

```
package com.opensource.kms;
import org.springframework.stereotype.Component;

@Component
public class SooDao {

    public String m() {
        System.out.println("implementation of m : SooDao");
        return "This is return value";
    }
} 
```

**主应用**

```
 AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(JavaConfig.class);
    SooDao ob1 = ctx.getBean("sooDao", SooDao.class);
    System.out.println("Data using this ->"+ob1.m());
    System.out.println("********************");
    BarDao ob2 = ctx.getBean("fooDao", BarDao.class);
    System.out.println("Data using target -> "+ob2.m()); 
```

**输出**

```
beforeMethodThis myPointCut2
implementation of m : SooDao
Data using this ->This is return value
********************
beforeMethodTarget myPointCut1
implementation of m
Data using target -> This is return value 
```

# java - 用于低网络带宽使用的带有压缩的 Java 自定义序列化

> ID：11924686
> 
> 赞同：3
> 
> 时间：2012-08-12T18:29:02.203
> 
> 标签：java, serialization, glassfish, compression, ejb

我目前正在开发一个客户端/服务器应用程序。应用服务器是 Glassfish v3，通过远程 EJB 进行通信。主要问题是序列化对象图时使用大量网络带宽。例如在下一个方法中：

```
@Stateless
public class MyEJB extends MyRemoteInterface {

   @Override
   public PurchaseOrder savePurchaseOrder( PurchaseOrder po ) { ... }

} 
```

这个方法，当远程调用时，将收到一个 PurchesOrder 实例，它是一个对象图，当通过网络传输时，它会占用大量 KB，返回时也是如此。

我已经管理了这个，现在，改变方法的原型是这样的：

```
...

   @Override
   public byte[] savePurchaseOrder( byte[] po ) { ... }

... 
```

我在通过网络传输 PurchaseOrder 实例之前和之后手动解压缩和反序列化它。但是我松散了类型安全的方法，它变得丑陋了。

有没有办法使用java自定义序列化来压缩默认序列化过程中的输出流？例如：

```
 @Entity
    public class PurchaseOrder implements Serializable {

       private void writeObject(ObjectOutputStream oos) throws IOException {
           // default serialization 
           oos.defaultWriteObject();

           // COMPRESS STREAM HERE (zip or gzip)
       }

       private void readObject(ObjectInputStream ois) 
           throws ClassNotFoundException, IOException {

           // DECOMPRES STREAM HERE 

           // default deserialization
           ois.defaultReadObject();
       }

    } 
```

我需要“DE/COMPRESS STREAM HERE”部分的代码，或者另一个好主意。

预先感谢您的建议。

泽维尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T19:31:02.850

这里有一些关于使用自定义序列化的建议很好，但根据您的对象可能需要做很多工作。您可以使用泛型和包装类来获得“有点”更好的实现。

“简单”的实现可能如下所示：

```
public class ShrinkWrap<E> implements Serializable
{
  private transient E _value;

  public ShrinkWrap(E value) { _value = value; }

  public E get() { return _value; }

  private void writeObject(ObjectOutputStream oos) throws IOException {
    // default serialization 
    oos.defaultWriteObject();

    // compress _value to a byte[] using new ObjectOutputStream(new GZIPOutputStream(new ByteArrayOutputStream()))
    byte[] compValue = ...;

    oos.writeInt(compValue.length);
    oos.write(compValue);
  }

  @SuppressWarnings("unchecked")
  private void readObject(ObjectInputStream ois) throws ClassNotFoundException, IOException {
    // default deserialization
    ois.defaultReadObject();

    byte[] compValue = new byte[ois.readInt()];
    ois.readFully(compValue);

    // decompress _value from byte[] using new ObjectInputStream(new GZIPInputStream(new ByteArrayInputStream()))
    _value = ...;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T19:01:04.917

我建议您需要提供一个能够自动压缩/解压缩流的自定义工厂

尝试阅读[http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/socketfactory/index.html](http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/socketfactory/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T19:48:33.100

看看[JBoss Serialization](https://www.jboss.org/serialization)，值得一看，也许对你有很大帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T19:18:57.353

您可以使用 DeflatorOutputStream 和 InflatorInputStream 来压缩流。

如果可以的话，我建议使用更紧凑的序列化格式，例如 JSon、Exernalizable 或您自己的二进制格式。这是因为默认的 Java 序列化相对冗长。例如，一个整数使用超过 80 个字节。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T19:24:40.883

我认为上帝的想法正在使用`ZipOutputStream and ZipInputStream`. 您可以选择压缩对象的级别并在一个文件中发送多个对象。

# java - 在Java中更改字符串

> ID：11924689
> 
> 赞同：8
> 
> 时间：2012-08-12T18:29:13.260
> 
> 标签：java, string

我想将一个字符串发送到一个方法并在那里更改字符串。该方法应返回 void。例子：

```
String s = "Hello";
ChangeString(s);

String res = s;
//res = "HelloWorld"
-------------------------------------------

private void ChageString(String s){
s = s + "World";
} 
```

我怎样才能在Java中做到这一点？可以在不添加另一个类的情况下完成吗？

谢谢！铅

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-12T18:31:31.810

由于两个原因，您的方法无法使用当前界面：

*   字符串是不可变的。一旦您创建了一个字符串，您以后就不能再更改该字符串对象。
*   Java 使用按值传递，而不是按引用传递。当您在方法中分配新值时`s`，它只会修改 local ，而不是调用代码中`s`的原始值。`s`

要使您的方法有效，您需要更改界面。最简单的更改是返回一个新字符串：

```
private String changeString(String s){
    return s + "World";
} 
```

然后像这样调用它：

```
String s = "Hello";
String res = changeString(s); 
```

在线查看它：[ideone](http://ideone.com/JWgIb)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-20T16:53:54.020

使用 StringBuffer 而不是 String 它将解决您的问题。

```
public static void main(String[] args) {
    StringBuffer s = new StringBuffer("Hello");
    changeString(s);
    String res = s.toString();
    //res = "HelloWorld"
}

private static void changeString(StringBuffer s){
    s.append("World");
} 
```

或者，如果您真的只需要使用 String，那么这里是使用反射的解决方案：

```
public static void main(String[] args) {
    String s = "Hello";
    changeString(s);
    String res = s;
    //res = "HelloWorld"
}

private static void changeString(String s){
    char[] result = (s+"World").toCharArray();
    try {
        Field field = s.getClass().getDeclaredField("value");
        field.setAccessible(true);
        field.set(s, result);

    } catch (NoSuchFieldException | SecurityException | IllegalArgumentException |
            IllegalAccessException  e1) {
        e1.printStackTrace();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T18:44:49.847

您可以将字符串包装在一个对象中：

```
public class StringWrapper {
    String _str;
    public StringWrapper(String str) { set(str); }
    public void set(String str) { _str = str; }
    public String toString() { return _str; }
} 
```

允许您执行以下操作：

```
StringWrapper s = new StringWrapper("Hello");
ChangeString(s);

String res = s + "";
//res = "HelloWorld" 
```

```
private void ChageString(StringWrapper s) {
    s.set(s + "World");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T18:32:24.207

不，不能在返回时完成`void`。

Java 按值传递参数。字符串是不可变的，所以你不能改变它的值。你运气不好。

你可以这样做：

```
private String changeString(String original) {
    return original + " World";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T18:31:54.043

不，Java 字符串是不可变的，不能更改。您可以只返回一个新字符串并将其分配给同一个变量。

更进一步：String 被声明为 final，所以你不能扩展 String 来添加新的行为

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-12T18:34:08.870

使用 StringBuffer/StringBuilder 更改字符串。java中的字符串是不可变的，这意味着一旦它们被赋值，它们就不能被改变，看起来改变字符串的代码实际上是创建一个新对象。[这](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuffer.html)是关于字符串缓冲区的内容，希望对您有所帮助。:)

# asp.net - DropDownList 只选择初始值不选择所选值

> ID：11924691
> 
> 赞同：0
> 
> 时间：2012-08-12T18:30:07.270
> 
> 标签：asp.net, drop-down-menu

我在我的aspx 页面上有一个detailview。通过使用模板，我在其中放置了 3 个下拉列表。1 个下拉列表有回发事件，而其他 2 个没有。工作流程是在选择第一个下拉列表值时加载第三个下拉列表值。（直到工作正常）。但是，当每次从第三个下拉列表中选择初始值提交表单时，就会出现问题。如果我在页面加载事件中使用 IsPostBack，那么我将无法加载表单值，正如我之前提到的第一个下拉列表何时会改变第三个下拉列表将加载这些值。请回复我已经坚持了 2 周或更长时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:34:35.770

尝试在 ddl1 数据绑定中绑定 ddl3，并且 selectedindexchanged 事件不在页面加载中

# c# - 在两个列表框内平滑滚动

> ID：11924692
> 
> 赞同：1
> 
> 时间：2012-08-12T18:30:21.723
> 
> 标签：c#, windows-phone-7, listbox, scrollview, smooth-scrolling

我有两个带有数据的堆叠列表框（第一个列表框包含 <10 个元素，第二个可能有多达 5000 个元素），第一个列表框的元素必须在顶部：

```
 <ScrollViewer >
<Grid>
<Grid.RowDefinitions>
<RowDefinition Height="Auto" />
 <RowDefinition Height="Auto"/>
 </Grid.RowDefinitions>
<Listbox IsScrollable="False"/>
<Listbox Grid.Row="1" IsScrollable="False"/>
 </ScrollViewer > 
```

如何提高滚动性能？

我知道当我调用“ScrollViewer.SetVerticalScrollBarVisibility(sender as ListBox, ScrollBarVisibility.Disabled);”时我失去了 virtualizingPanel

但是当我需要两个 ListBox 时，有什么方法可以启用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:41:43.117

为什么你不想只使用一个 ListBox 并为不同的数据类型设置不同的模板？您不需要做任何额外的工作来提高滚动性能。查看这篇 MSDN 文章[Data Templating Overview](http://msdn.microsoft.com/en-us/library/ms742521.aspx)，你会发现一个最新的示例使用 DataTemplateSelector 并且 SL 没有这个类，但是你可以在 SL/WP 中找到很多试图解决这个问题的博客文章：[Implementing Windows Phone 7 数据模板选择器和自定义数据模板选择器](http://www.windowsphonegeek.com/articles/Implementing-Windows-Phone-7-DataTemplateSelector-and-CustomDataTemplateSelector)。因此，如果您将使用这种方法 - 您只需要确保您将绑定到您的集合，并且您的集合将具有正确的元素顺序：来自第一个 ListBox 的 10 个元素，来自第二个 ListBox 的其他元素。

# design-patterns - OOAD 与设计模式 - 困惑

> ID：11924700
> 
> 赞同：1
> 
> 时间：2012-08-12T18:31:41.073
> 
> 标签：design-patterns, ooad

我拿起了两本 HEAD 第一本书，OOAD 和设计模式。当我开始阅读设计模式时，我很困惑。以下是我的基本疑问：

1.  设计模式是否仅适用于面向对象的设计？对我来说，DP似乎只能在OOAD中应用

2.  设计模式是（一组用于）OO 设计的一部分吗？具体来说，我想问的是，OOAD 是否是更大的目标，而设计模式有助于实现目标

在阅读了前 4 或 5 个模式之后，看起来如果某个人是一名优秀的 OO 设计师，他会自动使用这些模式进行设计。

我真的很困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T20:51:19.640

模式作为问题的可重用解决方案，可以在许多领域中找到。使用模式语言来传达这些解决方案的想法起源于架构领域（请参阅[A Pattern Language](http://en.wikipedia.org/wiki/A_Pattern_Language)），但后来成功地应用于软件工程。即使在软件工程领域中，模式也存在于不同的层次上，例如企业应用程序的[实现模式](http://sourcemaking.com/implementation-patterns)和[架构模式](http://martinfowler.com/eaaCatalog/)。

普及软件设计模式概念的开创性书籍的标题，[设计模式 - 可重用的面向对象软件的元素](http://en.wikipedia.org/wiki/Design_Patterns_%28book%29)，*确实*表明所描述的模式仅适用于面向对象的设计（我认为这不是作者的意图） . 一些创建模式专门处理对象，但几乎所有其他模式都可以用任何非面向对象的语言来实现。有关 C 中的示例，请参阅[状态模式](http://www.adampetersen.se/Patterns%20in%20C%202,%20STATE.pdf)、[策略模式](http://www.adampetersen.se/Patterns%20in%20C%203,%20STRATEGY.pdf)和[观察者模式](http://www.adampetersen.se/Patterns%20in%20C%204,%20OBSERVER.pdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T18:34:26.130

设计模式是可重用的问题解决方案——最初的设计模式书本身非常清楚地表明它们并不特定于任何一种语言或范式。

例如 - 甚至还有 SQL 的设计模式书 - 一种在 OOP 之外的声明性语言。

设计模式往往是比一个类更高层次的设计——它们往往是许多相关的类，它们共同实现了某个设计目标。因此（并且作为可重用的解决方案），它们绝对是一个很好的工具 - 从它们获得的价值在创建设计时考虑到它们（模式应该从代码中*出现*，而不是编码到），但有它们的名称 - 它们方便沟通。如果您正在与某人谈论单例或外观，如果他们熟悉设计模式，他们将对您在谈论的内容以及设计及其目标有一个很好的了解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-06T12:41:21.107

根据我的理解，设计模式不仅仅局限于面向对象的系统。如果我们注意到这些词，设计和模式服务于不同的目的。模式是一个可重复的活动，它与上下文耦合，当你将这个理论应用于设计时活动它成为设计模式。它是在特定上下文中经过测试的设计解决方案。OOAD 比设计模式拥有更大的保护伞，设计模式就像字典中的单词，而 OOAD 用作字母表，您可以使用它来创建单词。OOAD 理论已被用于创建这些设计模式。

# iphone - 重新进入选项卡时更新 UITableView

> ID：11924705
> 
> 赞同：0
> 
> 时间：2012-08-12T18:32:12.963
> 
> 标签：iphone, objective-c, ios, xcode

我正在从 TabBarController（故事板模板）制作应用程序。这些选项卡都是带有 UITableViews 的 UINavigationControllers。每次进入 Tab 2 时，tableview 都应该更新（寻找要添加的新项目），但它只加载一次！（第一次输入标签。）如何做到这一点？

更详细地描述我的问题：

当我在选项卡 1 中时，我选择了一些单元格（对象）以添加到选项卡 2 中的 TableView。单元格点击正在更改对象 plist 中 reprecented 对象的布尔值。

因此，如果我在启动时选择选项卡 1 中的对象，然后进入选项卡 2，此 TableView 将充满单元格，因为这是我第一次进入选项卡 2 并加载。

但是，如果我返回选项卡 1 并选择更多对象，这些对象不会显示在选项卡 2 中，因为 TableView 已经加载。那么如何重新加载 Tab 2 TableView 呢？当发生选项卡2时，我应该这样做吗？我没有 TabBarController 的类或参考，它仅在情节提要中。或者也许我应该在选项卡 1 中的 addObject 操作中执行此操作？谢谢你的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:36:16.567

也许你可以尝试添加

```
[self.tableView reloadData]; 
```

在`viewWillAppear`Tab 2 视图控制器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:56:14.357

```
-(void)viewDidAppear
{
    [super viewDidAppear];
    [self.tableViewName reloadData];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-25T13:16:02.423

您需要使用通知。发送本地 NSNotification 然后 addObserver 在您的 tableView 视图上响应并重新加载。以正常方式重新加载表将不起作用，因为视图已经加载。

# python - 如何摆脱python windows文件路径字符串中的双反斜杠？

> ID：11924706
> 
> 赞同：35
> 
> 时间：2012-08-12T18:32:18.497
> 
> 标签：python, file, dictionary, path

我有一本字典：

```
my_dictionary = {"058498":"table", "064165":"pen", "055123":"pencil"} 
```

我遍历它：

```
for item in my_dictionary:
    PDF = r'C:\Users\user\Desktop\File_%s.pdf' %item
    doIt(PDF)

def doIt(PDF):
    part = MIMEBase('application', "octet-stream")
    part.set_payload( open(PDF,"rb").read() ) 
```

但我得到这个错误：

```
IOError: [Errno 2] No such file or directory: 'C:\\Users\\user\\Desktop\\File_055123.pdf' 
```

它找不到我的文件。为什么它认为文件路径中有双反斜杠？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-12T18:48:12.420

双反斜杠没有错，python向用户*表示*它的方式。在每个双反斜杠`\\`中，第一个*转义*第二个以暗示实际的反斜杠。如果`a = r'raw s\tring'`和`b = 'raw s\\tring'`（没有 'r' 和显式双斜杠），那么它们都表示为`'raw s\\tring'`.

```
>>> a = r'raw s\tring'
>>> b = 'raw s\\tring'
>>> a
'raw s\\tring'
>>> b
'raw s\\tring' 
```

为了澄清起见，当您*打印*字符串时，您会看到它会被使用，就像在路径中一样 - 只有一个反斜杠：

```
>>> print(a)
raw s\tring
>>> print(b)
raw s\tring 
```

在这个打印字符串的情况下，`\t`并不意味着*tab*，它是一个反斜杠，`\`后跟字母 't'。

否则，没有 'r' 前缀和单个反斜杠的字符串将转义它后面的字符*，*使其评估它后面的 't' == 制表符：

```
>>> t = 'not raw s\tring'  # here '\t' = tab
>>> t
'not raw s\tring'
>>> print(t)  # will print a tab (and no letter 't' in 's\tring')
not raw s       ring 
```

所以在PDF路径+名称中：

```
>>> item = 'xyz'
>>> PDF = r'C:\Users\user\Desktop\File_%s.pdf' % item
>>> PDF         # the representation of the string, also in error messages
'C:\\Users\\user\\Desktop\\File_xyz.pdf'
>>> print(PDF)  # "as used"
C:\Users\user\Desktop\File_xyz.pdf 
```

[有关表中](https://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals)[*转义序列*](https://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals)的更多信息。另见[`__str__`vs`__repr__`](https://stackoverflow.com/a/1436721/1431750)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-12T18:37:49.323

双反斜杠是由于`r`原始字符串：

```
r'C:\Users\user\Desktop\File_%s.pdf' , 
```

使用它是因为`\`可能会转义某些字符。

```
>>> strs = "c:\desktop\notebook"

>>> print strs                #here print thinks that \n in \notebook is the newline char
c:\desktop
otebook

>>> strs = r"c:\desktop\notebook"  #using r'' escapes the \
>>> print strs

c:\desktop\notebook

>>> print repr(strs)   #actual content of strs
'c:\\desktop\\notebook' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T18:39:55.480

它没有。双反斜杠只是计算机说反斜杠的方式。是的，我知道这听起来很奇怪，但是这样想——为了表示特殊字符，选择了反斜杠作为转义字符（例如，\n 表示换行符，而不是后跟 n 字符的反斜杠字符）。但是，如果您确实想打印（或使用）一个反斜杠（可能后跟更多字符），但又不希望计算机将其视为转义字符，会发生什么？在这种情况下，我们将反斜杠本身转义，这意味着我们使用双反斜杠，以便计算机将理解它是单个反斜杠。

`r`由于您在字符串之前添加了，它会在您的情况下自动完成。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-30T05:18:47.360

避免头痛，您也可以使用其他斜线。如果你知道我在说什么。相反的斜线。

你现在正在使用 **`PDF = 'C:\Users\user\Desktop\File_%s.pdf' %item`**

尝试使用**

> **PDF = 'C:/Users/user/Desktop/File_%s.pdf' %item**

** 它不会被视为转义字符。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-09-01T16:15:53.037

alwbtc@我敢说：“我发现了bug……”

代替

```
PDF = r'C:\Users\user\Desktop\File_%s.pdf' %item
doIt(PDF)` 
```

和

```
for item in my_dictionary:
    PDF = r'C:\Users\user\Desktop\File_%s.pdf' % mydictionary[item]
    doIt(PDF)` 
```

事实上，你真的在​​寻找 File_pencil.pdf（不是 File_055123.pdf）。您正在滑动索引字典而不是其内容。这个论坛主题可能是一个副作用。

# c# - 如何在 C# 和 C++ 之间进行互操作

> ID：11924707
> 
> 赞同：-4
> 
> 时间：2012-08-12T18:32:21.027
> 
> 标签：c#, c++, c

如何在 C# 和 C++ 之间进行互操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:13:17.640

您不能直接从 C# 调用本机 DLL 中的函数，但可以通过称为 P/Invoke 的工具使用它们。[http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx)

另一种选择是用 C++/CLI 编写包装器。C++/CLI 几乎是允许 .Net 代码包装和使用本机内容的标准方式。

最后，您还可以使用 P/Invoke 从 C# 调用 q.dll 函数，而不是使用包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T23:58:08.150

extern "c" 是 c++ 特定的，因为它告诉编译器导出函数“就像在 c 中一样”，所以在 c 中不需要它。

如果您希望它同时使用 c 和 c++ 编译，您可以执行类似的操作。

```
#ifdef __cplusplus
extern "C" {
#endif

__declspec(dllexport) void D()
{
}

#ifdef __cplusplus
}
#endif 
```

您还需要告诉 VS 构建一个 dll，而不是一个可执行文件。

# jquery - 如何让 Iscroll 和 Lazy Load jQuery 插件一起工作？

> ID：11924711
> 
> 赞同：3
> 
> 时间：2012-08-12T18:32:31.647
> 
> 标签：jquery, image, scroll, lazy-loading, conflict

有没有机会让这两个插件一起工作？现在，如果我在带有图像的 div 中使用 iscroll，则延迟加载不会检测到图像何时应该可见。

谢谢。

**编辑：**

正如其中一条评论所说，我试图在滚动上应用延迟加载，如下所示：

```
onScrollMove: function () {
    $("img").lazyload();
    $('img').on('load',function(){myScroll.refresh();});
} 
```

为了正常工作，我想我必须将同样的方法应用于 onBeforeScrollEnd：

```
onBeforeScrollEnd: function () {
    $("img").lazyload();
    $('img').on('load',function(){myScroll.refresh();});
} 
```

但是这个解决方案是否会影响性能（因为它不断地将延迟加载应用于所有图像并在加载它们以重新适应加载的图像宽度/高度时刷新）？我真的很关心这里的性能，因为我将在所有带有图像的主题中拥有一个带有几个（比如说 30 个）滚动条的容器滚动条。我还可以做些什么？

**编辑2：**

这是我迄今为止所拥有的，我认为效果几乎很好：

```
onScrollMove: function() {
    $('#my_container img').lazyload({
        container: $('#my_container'),
        threshold: 200
    }).on('load', function() {
        myScroll.refresh();
    });​
} 
```

但是这个解决方案的问题是，当myScroll第一次刷新时，lazyload会加载所有的图片..

这是一个小提琴：http: [//jsfiddle.net/U3gYS/](http://jsfiddle.net/U3gYS/)

而且它还有一个问题，如果从一开始就可以看到第一张图像，那么延迟加载将不会加载该图像。[http://jsfiddle.net/U3gYS/1/](http://jsfiddle.net/U3gYS/1/)

**编辑 3：**

[http://jsfiddle.net/pdakD/](http://jsfiddle.net/pdakD/)我差不多有了，请帮忙。在新的小提琴中，问题是：

1.  onBeforeScrollEnd 似乎不起作用。如果我在其中包含一个 console.log('something')，它在我看来就像滚动开始时正在触发一样。

2.  初始#container 的高度是跨度+第一个img。为了让它看起来更好，我添加了一个填充底部（不太大）并在最后一张图像最终加载时将其删除......我还能做什么？

**编辑4：**

这看起来更好： http: [//jsfiddle.net/pdakD/1/.onBeforeScrollEnd](http://jsfiddle.net/pdakD/1/) Stills 对我来说看起来很糟糕。我也有这个选项：http: [//jsfiddle.net/pdakD/1/](http://jsfiddle.net/pdakD/1/)适用

```
checkDOMChanges:true 
```

但由于我有多个 iscrollers 和 ajax 数据等，我认为这不是一个好主意。

**解决方案：** 这是 Michael Alexander Freund 提出的解决方案的 jfiddle。 [http://jsfiddle.net/pdakD/11/](http://jsfiddle.net/pdakD/11/) 它可以工作，但如果你快速“滚动”，它会卡在底部。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T08:52:34.623

今天我遇到了同样的问题，我发现滚动事件没有被触发，这是延迟加载正在监听的。因此，您唯一需要做的就是手动触发滚动容器的滚动事件。我使用了`onScrollEnd`iScroll 的回调并做了一个

```
onScrollEnd: function () {
    $('div.scroll').trigger('scroll');
} 
```

while`$('div.scroll')`是我与 iScroll 一起使用的容器

```
var scroll, container;

container = $('div.scroll');
scroll    = new iScroll(container.get(0), {
    bounce: false,
    onScrollEnd: function () {
        container.trigger('scroll');
    }
}); 
```

这就是lazyload方法的样子

```
$('img.lazyload').lazyload({
    effect: 'fadeIn',
    container: $('div.scroll')
}); 
```

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:25:24.350

这可能不是最好的解决方案，但因为没有其他人回答：

尝试在 iscroll 的 onScrollEnd 事件中调用lazyload 方法。像这样的东西：

```
 new iScroll('wrapper', onScrollEnd: function() {$("img.lazy").lazyload()}); 
```

# php - $argv 在一个类中

> ID：11924716
> 
> 赞同：7
> 
> 时间：2012-08-12T18:32:39.313
> 
> 标签：php, class, argv

我`exec()`用来执行一个文件，但该文件在一个类中，我阅读了更多关于 argv 的信息，但它令人困惑。我需要让它在课堂上工作。

它说：

> 请注意，$argv 和 $argc 需要声明为全局，同时尝试在类方法中访问

[在 php.net 上]

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-12T18:35:06.797

这意味着 argc/argv 不是超全局变量——它们只在 PHP 脚本的顶级上下文中可见，所以......

```
<?php

$x = $argv[1]; // works

class foo {
   function bar() {
       echo $argv[1]; // undefined
   }
   function baz() {
       global $argv;
       echo $argv[1]; // works
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-24T04:32:29.043

我将 argv 作为参数添加到类构造函数

```
class MyClass
{
    protected $args;

    public function __construct($args) 
    {
        $this->args = $args;
    }

    public function foo()
    {
        $this->args[1]; //access args using $this->args
    }
}

$myClass = new MyClass($args); 
```

# jquery - 使用 Twitter Bootstrap 的 iframe 错误

> ID：11924717
> 
> 赞同：2
> 
> 时间：2012-08-12T18:32:45.850
> 
> 标签：jquery, iframe, twitter-bootstrap

我有以下错误：

```
<a href="http://facebook.com/share.php?...." class="class">Click me</a>

<div class="modal hide" id="jpmodal">
 <div class="modal-header">
    <button class="close" data-dismiss="modal">×</button>
    <h3>Modal header</h3>
  </div>
    <div class="modal-body">
        <div id="loadframe">

        </div>
    </div>
</div> 
```

查询：

```
$('a.class').on('click', function(e){
   e.preventDefault();
   var url = $(this).attr('href');
   $("#loadframe").html('<iframe width="300" height="200" frameborder="0" scrolling="no" allowtransparency="true" src="'+url+'"></iframe>');

   $('#jpmodal').modal('toggle');

}); 
```

iframe 是空白的。

Chrome 控制台返回给我一个空白页

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:38:56.910

您不能`http://facebook.com/share.php?...`在 iframe 中加载。Facebook 通过设计阻止它以防止点击劫持。

使用[发送按钮 - Facebook 插件](http://developers.facebook.com/docs/reference/plugins/send/)是一个更好的选择，即使它不完全支持您的目的。

# svn - WAMP 2.2 和 Subversion 1.7.5.，它是如何工作的？

> ID：11924719
> 
> 赞同：0
> 
> 时间：2012-08-12T18:33:08.750
> 
> 标签：svn, wamp

所以我一直在使用 WAMP，最近决定包含 Subversion，并尝试将它与安装了 WAMP 的 Apache 服务器连接起来。到目前为止，我已经浏览了大约 6 到 8 个指南，其中几乎所有人都告诉我同样的交易。

将`mod_dav.so`文件等复制到 Apache 安装的模块目录，然后将文件复制到Apache HTTP Server 等文件夹。更改 Apache 的`intl3_svn.dll`文件以包含新模块以及 SVN 事物的新目录定义。`libdb48.dll``/bin``httpd.conf`

但是每个指南似乎都提到了不同的`mod_dav.so`文件和不同的`.dll`文件。最重要的是，当我每次重新启动 Apache 时都复制文件时，它不会工作。它只是拒绝处理对`httpd.conf`文件的更改，即使我从指南中复制了它。

有没有人有安装颠覆 1.7.5 的经验。使用 WAMP server 2.2 可以帮助我吗？

编辑：

Apache 服务器的错误日志实际上并没有真正说明什么。

我在 httpd.conf 文件的加载模块列表中添加了以下几行：

```
LoadModule dav_module modules/mod_dav.so
LoadModule dav_svn_module modules/mod_dav_svn.so
LoadModule authz_svn_module modules/mod_authz_svn.so 
```

dav_module 已经存在于标准的 httpd.conf 文件中，我只需要通过删除“#”标签来启用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:37:08.797

我希望[这篇文章](http://shareurthoughtss.blogspot.in/2012/08/svn-server-configuration-on-wamp-server.html)能指导你正确地在 WAMP 服务器上安装 subversion。

如果它有效，请不要忘记将其推广为正确答案。所以它可能会帮助其他人。

# css - Twitter Bootstrap：小标签上的边距底部

> ID：11924720
> 
> 赞同：2
> 
> 时间：2012-08-12T18:33:10.043
> 
> 标签：css, twitter-bootstrap

我有一段文字，位于`p`-tag 中。在此文本中，有一个图像。对于该图像，我想使用`small`标签在下面添加一个标题。这是 HTML 代码（我添加了换行符以提高可读性）：

```
<p>Lorem ipsum dolor sit amet, <img src="img/myimage.png" alt="myimage" /><small>
Hey look, thats my image!</small><br />consetetur sadipscing elitr,
sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam</p> 
```

现在我想`small`使用这个 CSS 代码为 -tag 添加一个底部边距：

```
p small {
    margin-bottom: 30px;
} 
```

它不起作用，没有`margin-bottom`应用。选择器是正确的，因为我可以更改左边距、文本颜色等。

*如何在 Twitter Bootstrap 中添加`margin-bottom`to ？`small`*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T18:44:21.260

`p small`是一个`inline`项目，您不能为内联项目添加边距。尝试：

```
p small {
    margin-bottom: 30px;
    display: inline-block;
} 
```

唯一的缺点`inline-block`是您可能会遇到跨浏览器兼容性问题。

在您的具体示例中，也许您可​​以将`img`and包装`small`在一个 div 中，然后定义：

```
p small {
    margin-bottom: 30px;
    display: block;
} 
```

# javascript - 按名称获取对象作为字符串而不使用 eval

> ID：11924731
> 
> 赞同：15
> 
> 时间：2012-08-12T18:34:54.380
> 
> 标签：javascript, jquery, html, node.js

下面的代码做我想要的，但我想避免`eval`. Javascript中是否有一个函数可以通过字符串中定义的名称查找对象？

```
myobject = {"foo" : "bar"}
myname = "myobject";
eval(myname); 
```

一些上下文：我将它用于一个应用程序，其中 dom 中的大量节点具有 html5`data-object`属性，该属性在处理函数中用于连接回模型。

编辑： myobject 既不是全局的也不是本地的，它是在处理程序的父框架之一中定义的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-12T18:41:53.250

如果变量是全局的，那么：

```
myobject = {"foo" : "bar"};
myname = "myobject";
window[myname].foo 
```

**[演示](http://jsfiddle.net/r6Xhm/1/)**

对于本地：

```
(function(){
    myobject = {"foo" : "bar"};
    myname = "myobject";
    alert( this[myname].foo );
})(); 
```

**[演示](http://jsfiddle.net/r6Xhm/3/)**

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-12T18:38:39.107

**局部变量解决方案：**

您可以使用另一个对象的字符串属性来创建要访问的所有对象。例如：

```
var objectHolder = {
    myobject: {"foo" : "bar"},
    myobject2: {"foo" : "bar"},
    myobject3: {"foo" : "bar"}
}; 
```

然后像这样访问您想要的对象：

```
var desiredObject = objectHolder["myobject"]; 
```

* * *

**全局变量解决方案：**

您可以使用如下字符串访问全局变量：

```
window["myobject"]; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-11-24T19:56:30.203

这个问题很老了，但由于它是 Google 上查询“javascript get object from string”的最高结果，我想我会分享一种使用点表示法的更长对象路径的技术。

鉴于以下情况：

```
var foo = { 'bar': { 'alpha': 'beta' } }; 
```

我们可以从这样的字符串中获取 'alpha' 的值：

```
var objPath = "bar.alpha";

var alphaVal = objPath.split('.')
  .reduce(function (object, property) {

    return object[property];
  }, foo);

// alphaVal === "beta" 
```

如果是全球性的：

```
window.foo = { 'bar': { 'alpha': 'beta' } }; 
```

只需`window`作为`initialValue`for传递`reduce`：

```
var objPath = "foo.bar.alpha";

var alphaVal = objPath.split('.')
  .reduce(function (object, property) {

    return object[property];
  }, window);

// alphaVal === "beta" 
```

基本上，我们可以`reduce`通过将初始对象作为`initialValue`.

[Array.prototype.reduce 的 MDN 文章](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce "Array.prototype.reduce 的 MDN 文章")

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-12T18:41:12.367

由于 window 是一个全局命名空间，你可以简单地使用

```
window[myname] 
```

# java - 如何在 Eclipse 的引用库中使用类

> ID：11924736
> 
> 赞同：6
> 
> 时间：2012-08-12T18:35:17.347
> 
> 标签：java, eclipse

如上所示，我已将 algs4.jar 文件作为引用库导入。一切似乎都很好，但我似乎无法使用或访问库中的任何类。

是否有我缺少的导入声明？

图片参考：

![](../Images/0f447e5eb1214260d3672bcacf7747d8.png)

请注意我如何尝试`BinarySearch`从引用的库中使用，但它没有为我提供使用或导入它的选项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-09T02:19:18.887

我正在通过 Coursera 学习[算法](https://www.coursera.org/course/algs4partI)课程，该课程利用 algs4.jar 参考库。

**问题：**

您遇到的问题是参考库位于默认包中，而您访问参考库的源不在。

**解决方案**

您项目中的所有类都需要在默认包中，否则将无法识别参考库（位于默认包中）。您的项目类需要位于 src 目录中，并且不应在 .java 文件的开头声明包。此外，您还需要确保已将[参考库添加到构建路径](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29)中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-12T18:44:41.770

我不确定，我没有尝试过这个。虽然有些解释。

这是一个标准库还是有人自己创建并给你的？

问题是类`BinarySearch`在`default`包中。您将无法导入它。如果这个库是由您或您的任何朋友创建的，您需要让您的朋友将所有类从默认包移动到一个好的命名空间，然后重新创建 jar。

如果类可访问，`ctr + shift + o`则应导入该类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-23T16:38:19.920

请注意，jar 文件中的类都包含在默认包中。

如果您的类随后包含在一个包中，那么它们将无法直接访问。

我提交这个答案是因为我正在学习这些 jar 文件所属的算法课程，这是我的程序无法正常工作的具体原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-16T19:42:25.383

如果要导入类，则需要下载该库的打包版本。请参阅本网页底部的问答部分。 [http://introcs.cs.princeton.edu/java/stdlib/](http://introcs.cs.princeton.edu/java/stdlib/)

> 问：如果我使用命名包来构造我的代码，编译器将无法再访问 stdlib.jar 中的库。为什么不？
> 
> A. stdlib.jar 中的库位于“默认”包中。在 Java 中，您不能从命名包访问默认包中的类。如果您需要将我们的库与命名包一起使用，您可以使用打包版本的 stdlib-package.jar。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-18T16:52:31.280

首先，无法创建 BinarySearch（私有构造函数）。使用静态方法`BinarySearch.rank(int key, int[] array)`

其次，您只能从**默认包访问 BinarySearch**

第三怎么`Arrays.binarySearch(array, key)`办？

# mysql - MySQL - 存储过程集和轮

> ID：11924737
> 
> 赞同：0
> 
> 时间：2012-08-12T18:35:24.740
> 
> 标签：mysql, stored-procedures

我需要在一行中编写[MySQL](http://en.wikipedia.org/wiki/MySQL) 。也就是说，是否有任何选项可以在 MySQL 中编写这样的存储过程？`set``round`

```
SET x = ROUND'(Y,2); 
```

我也绑定了这样的方法

```
DECLARE z INTEGER;
DECLARE x FLOAT;
SET z = y*100;
SET x = z/100; 
```

但它也不起作用。当我们将值设置为该变量时，有什么方法可以在 MySQL 中对变量进行舍入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:37:15.937

这样做没有错：

```
SET z = ROUND(y*100, 2); 
```

您可以随时[编写自己的函数](http://dev.mysql.com/doc/refman/5.0/en/adding-udf.html)来执行此操作，并根据需要调用它`MYROUND()`或其他任何方法。

但是您不能重载/替换现有的 MySQL 函数。

# c++ - 在 C++ 中抽象文本解析的库

> ID：11924739
> 
> 赞同：0
> 
> 时间：2012-08-12T18:35:32.180
> 
> 标签：c++, parsing, token

我将解析大量文件，其中 XML 文件具有精确的层次结构，其他文件具有精确的语法。我想在*“令牌级别”*抽象这些文件以简化我的代码和逻辑。我还需要 UTF-8 支持。

是否有可以在 C++ 中执行此操作的库，或者可能仅由多个标头组成的库？

编辑：

假设我的文件是这样的

```
COLOR=red Language=en
COLOR=blue Language=se
COLOR=green Language=fr 
```

对于令牌级别，我的意思是我可以在以这种方式解析后访问这些值：

```
Object.getValue(color, 1) 
```

这应该返回`red`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T19:27:10.120

好吧，有[boost::spirit](http://www.boost.org/doc/libs/1_50_0/libs/spirit/doc/html/index.html)，我认为这可能是您正在寻找的。您可以使用它来创建解析输入的规则。我个人从未使用过它，但听到了很好的评论。希望能帮助到你。

# c# - .NET 中的 UMDF 开发

> ID：11924740
> 
> 赞同：3
> 
> 时间：2012-08-12T18:35:34.053
> 
> 标签：c#, .net, drivers, umdf

有谁知道微软 UMDF 的当前状态是否允许在 .NET 中进行驱动程序开发？

# jquery-mobile - 导航栏按钮保持按下状态

> ID：11924743
> 
> 赞同：4
> 
> 时间：2012-08-12T18:35:45.893
> 
> 标签：jquery-mobile, user-interface, navbar

我正在使用两个

```
<li><a href="#" type="button"  > text</a></li> 
```

在我的应用程序的页脚导航栏中键入按钮，以触发我的应用程序中的功能（不用于导航。）。每次按下按钮后都保持按下状态，直到按下导航栏中的另一个按钮。我怎样才能避免这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T18:15:42.603

处理此问题的另一种方法是从事件绑定中返回 false，这样 JQM 就不会首先添加该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:28:45.387

`ui-btn-active`从最后按下的按钮中手动删除类。

```
$('#button_id').removeClass('ui-btn-active'); 
```

已编辑

最好的方法是重新定义 class`ui-btn-active`的样式，与“未点击”按钮相同。例如：

```
.ui-footer .ui-navbar .ui-btn-active {
    border: 1px solid       #222;
    background:             #333333;
    font-weight: bold;
    color:                     #fff;
    text-shadow: 0 -1px 1px #000;
    background-image: -webkit-gradient(linear, left top, left bottom, from( #555), to( #333));
    background-image: -webkit-linear-gradient(#555, #333);
    background-image:    -moz-linear-gradient(#555, #333);
    background-image:     -ms-linear-gradient(#555, #333);
    background-image:      -o-linear-gradient(#555, #333);
    background-image:         linear-gradient(#555, #333);
}​ 
```

[这里](http://jsfiddle.net/9kKAP/4/)的例子 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-10T19:27:37.370

```
<button type="button" class="btn btn-default touchbtn">Test</button>

$('.touchbtn').bind('touchstart', function() {
    $(this).css('background-color', 'black');
});

$('.touchbtn').bind('touchend', function() {
    $(this).css('background-color', 'white');
}); 
```

# mysql - mysql中的分组和计数

> ID：11924745
> 
> 赞同：-1
> 
> 时间：2012-08-12T18:35:58.220
> 
> 标签：mysql

我正在尝试对连续出现的所有单词进行分组，计算它们的频率值并按计数结果排序。它只能在 sql 中完成。这是一个例子：

我有下表：

```
word | freq
-----------
car  | 5
cake | 2
car  | 4 
```

并希望得到这个结果：

```
word | freq
-----------
car  | 9
cake | 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:38:35.223

您可以按单词分组，然后根据组进行汇总......

```
 SELECT word,SUM(freq) AS freq FROM tblName GROUP BY word 
```

当您必须根据频率对单词进行排序时，您可以通过以下方式使用 ORDER BY：

```
SELECT word,SUM(freq) AS freq FROM tblName GROUP BY word ORDER BY freq DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:38:46.513

```
SELECT word, SUM(freq) AS freq FROM yourTable GROUP BY word ORDER BY freq DESC; 
```

# php - 如何发布给墙上的所有朋友一次性facebook api

> ID：11924748
> 
> 赞同：0
> 
> 时间：2012-08-12T18:36:46.370
> 
> 标签：php, facebook, api

我想发布给所有的人通过应用程序连接 发布他所有的朋友在墙上，这个代码只发布它的墙 需要更改或添加到它的内容将带到他的朋友列表中，并通过应用程序将他们发布在墙上

请帮我

```
 require "../settings.php";
    require '../src/facebook.php';
    require "../fbaccess.php";
    require "web_config.php";

    //user data from database
    $sql = mysql_query("SELECT user_id,user_access_token,user_access_token_expire FROM data_table");

    while ($data = mysql_fetch_array($sql)){
    $user_id = $data['user_id'];
    $accessToken = $data['user_access_token'];
    $accessTokenExpire = $data['user_access_token_expire'];

    try {
                $publishStream = $facebook->api("/$user_id/feed", 'post', array(
                    'message' => "",
                    'link'    => '',
                    'picture' => '',
                    'name'    => 'iOS Apps & Games',
                    'description'=> ''
                    )
                );
                //as $_GET['publish'] is set so remove it by redirecting user to the base url
            } catch (FacebookApiException $e) {
                error_log($e);
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:56:34.333

这是您获取所有朋友用户 ID 的方式：

```
SELECT uid FROM user WHERE (uid IN (SELECT uid2 FROM friend WHERE uid1=me())) 
```

但是，如果您尝试向所有朋友发布信息，Facebook 将阻止您的应用程序。你可以做的是向你的朋友发送**Requests**。

# c++ - 返回值优化

> ID：11924749
> 
> 赞同：0
> 
> 时间：2012-08-12T18:36:58.497
> 
> 标签：c++, performance, return-value, copy-constructor

考虑以下两个相同功能的实现

```
Object foo()
{
    Object ret;
    ret.a.set(...);
    ret.b.set(...);
    return ret;
}

Object foo()
{
    A a;
    a.set(...);

    B b;
    b.set(...);

    return Object(a, b);
} 
```

假设 A::set 和 B::set 必须在构造后调用。此外，假设 Object、A 和 B 都具有不复制大量数据的移动构造函数。最后，假设编译器同时执行 RVO 和 NRVO。

在对象构造方面，哪一个更有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:44:14.580

如果此实现使用 3 个子对象（A、B、C），那么后者似乎更有效，因为对新创建的对象的成员值调用会更少。不过，我认为这并没有什么不同。我会选择你认为最易读的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T20:37:05.020

假设——因为你没有给出太多的上下文——成员 a 和 b 是类向量，并且 set 函数用元素“填充”这个类向量对象......并假设 Object 的双参数构造函数复制从参数构造成员 a 和 b ...并假设您的编译器能够执行 NRVO 而不仅仅是 RVO（现在很常见）...第一个函数应该更有效，因为您不必须以这种方式复制 a 和 b。

# entity-framework - CreateDataSource 不适用于 WCF 和存储过程

> ID：11924752
> 
> 赞同：0
> 
> 时间：2012-08-12T18:37:23.273
> 
> 标签：entity-framework, wcf-data-services

我正在尝试使用`CreateDataSource`. 这似乎适用于对表的简单请求，但是当我尝试使用存储过程时它失败了......当我使用 .edmx 文件时，它总是试图使用为 SP 设置的原始数据源。

我的代码是：

```
string mConnectionString; 
mConnectionString = ConfgurationManager.ConnectionStrings["D7SG_DEVEntities"].ConnectionString;
return new SGEntities(mConnectionString);` 
```

发生的错误是

> *指定的命名连接在配置中未找到，不打算与 EntityClient 提供程序一起使用，或者无效。*

任何人都知道如何使用存储过程进行这项工作？（此过程与 中的硬编码字符串一起使用时效果很好`web.config`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:57:51.437

在您的服务操作中，您正在创建 SGEntities 而不传入修改后的连接字符串。因此它将从您的配置中选择默认连接字符串。为了使其工作，您可以使用 this.CurrentDataSource 而不是在服务操作实现中创建 SGEntities 的新实例。这将通过 CreateDataSource 并应该选择新的连接字符串。

# java - java区别StdOut vs System.out.println

> ID：11924757
> 
> 赞同：6
> 
> 时间：2012-08-12T18:37:34.863
> 
> 标签：java, eclipse, stdout, system.out

我刚刚开始研究java，因为我下载了eclipse并创建了一个java项目。项目工作正常，然后我导入了一个类，但由于以下几行而无法正常工作

```
StdOut.println(p + "  " + q); 
```

搜索后我已将其替换为

```
System.out.println(p + "  " + q); 
```

输入方式相同。

我试过导入`system.io.*`没有用。然后我试过`import StdIn`没有工作

我能感觉到这可能是由于不同的项目模板/类型。和教程链接也会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-12T18:39:33.840

`StdOut`不是JDK中的类。

不过，[StdOut](http://algs4.cs.princeton.edu/stdlib/StdOut.java.html)通常用于学校项目。

# php - 优化性能：许多 CURL 请求

> ID：11924762
> 
> 赞同：3
> 
> 时间：2012-08-12T18:38:14.910
> 
> 标签：php, caching, optimization, curl

我正在为客户端开发基于 Web 的 RESTful api。除了一个请求之外，一切都很好，我需要为每一行请求 Foursquare API。

此请求的 URL 是：[http://api.example.com/v1/users/times](http://api.example.com/v1/users/times)。

目前对该网址的请求的响应是：

```
{
"response": {
    "user": {
        ... some user info ...
        "times": [
            {
                "id": "8",
                "venue_fq_id": "4b81eb25f964a52000c430e3",
                "user_id": "1",
                "wait_length": "4468",
                "created_at": "2012-06-09 21:45:43"
            },
            {
                "id": "9",
                "venue_fq_id": "4aad285af964a520c05e20e3",
                "user_id": "1",
                "wait_length": "8512",
                "created_at": "2012-06-09 21:45:43"
            },
            {
                "id": "10",
                "venue_fq_id": "42377700f964a52024201fe3",
                "user_id": "1",
                "wait_length": "29155",
                "created_at": "2012-06-09 21:45:44"
            },
            {
                "id": "11",
                "venue_fq_id": "45c88764f964a5206e421fe3",
                "user_id": "1",
                "wait_length": "33841",
                "created_at": "2012-06-09 21:45:44"
            },
            {
                "id": "12",
                "venue_fq_id": "430d0a00f964a5203e271fe3",
                "user_id": "1",
                "wait_length": "81739",
                "created_at": "2012-06-09 21:45:44"
            }
        ]
    }
},
"stat": "ok"
} 
```

但是，数组`venue_fq_id`中返回的`response.user.times`值是相对于 Foursquare API 上的一个场所。我尝试为每一行向 Foursquare API 运行 curl 请求，但性能非常慢。请您提供一些示例，说明我可以通过哪些方式来加快性能，同时检索我每次访问请求 F/Q API 时会获取的相同信息？

这是我的代码：

```
$query = $this->db->query("SELECT * FROM `wait_times` WHERE `user_id` = ?", array($email_address));

$wait_times = $query->result();

foreach ($wait_times as $wait_time) {

    $wait_time->venue = $this->venue_info($wait_time->venue_fq_id);

}

function venue_info($fq_id) {

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, "https://api.foursquare.com/v2/venues/4b522afaf964a5200b6d27e3");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    $response = json_decode(curl_exec($ch));
    curl_close($ch);

    return $response['response']['venue'];

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T18:43:18.557

您正在浪费大量时间实例化/拆除 CURL 对象。这可以防止您利用 HTTP keep-alives，强制 curl 为您发出的每个请求启动一个新的 tcp 连接。

卷曲手柄**可以**重复使用。例如

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

function venue_info($fq_id) {
   global $ch;
   curl_setopt($ch, CURLOPT_URL, "https://api.foursquare.com/v2/venues/4b522afaf964a5200b6d27e3");
   $resp = curl_exec($ch) or die(curl_error($ch));
   $json = json_decode($resp);
   return($json);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T18:48:55.047

Foursquare API 提供的[`multi`](https://developer.foursquare.com/docs/multi/multi)端点允许您将最多五个查询组合成一个请求。

# java - 如何以循环方式使用适配器滑动列表视图（每页 10 个列表元素）

> ID：11924771
> 
> 赞同：1
> 
> 时间：2012-08-12T18:38:59.937
> 
> 标签：java, android, android-listview, android-gesture

我想要一个每页显示 10 个元素的列表。但是当列表中有 11 个元素时，我希望我的列表显示 2 页 1 显示前 10 个元素，1 显示剩余元素。但是，如果列表中有 31 个元素，那么它将仅显示 3 页每页 10 个元素，其余 1 个元素没有单独的页面。

此外，当我尝试从左到右滑动列表时，它可以工作到第一页，但从第一页开始它不会转到最后一页。

活动：

```
public class MainActivity extends Activity implements OnGestureListener {
    private static final int SWIPE_MIN_DISTANCE = 10;
    private static final int SWIPE_THRESHOLD_VELOCITY = 300;

    private GestureDetector gestureScanner;

    Button btnLoad;
    ListView list;
    private String [] names = 
        { "a" , "b", "c", "d", "e", "f", "g", "h", "i", "j",
            "a1" , "b1", "c1", "d1", "e1", "f1", "g1", "h1", "i1", "j1",
            "a2" , "b2", "c2", "d2", "e2", "f2", "g2", "h2", "i2", "j2",
            "a3" , "b3", "c3", "d3", "e3", "f3", "g3", "h3", "i3", "j3","j4"
        }; 

    MyAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        gestureScanner = new GestureDetector(this);

        setContentView(R.layout.activity_main);

        btnLoad = (Button) findViewById(R.id.btnLoad);
        list = (ListView) findViewById(R.id.list);

        adapter = new MyAdapter(this, names);

        list.setAdapter(adapter);
        View.OnTouchListener gestureListener = new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                return gestureScanner.onTouchEvent(event); 
            }
        };
        list.setOnTouchListener(gestureListener);

        /* 
        btnLoad.setOnClickListener( new OnClickListener() {
            public void onClick(View v) {
                adapter.setNextPage();
            }
        });
        */
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public boolean onDown(MotionEvent e) {
        // TODO Auto-generated method stub
        return false;
    }

    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        try {
            // right to left swipe
            if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY)
            {
                adapter.setNextPage();
                Toast.makeText(getApplicationContext(), "Left Swipe", Toast.LENGTH_SHORT).show();
            } 
            else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) 
            {
                Toast.makeText(getApplicationContext(), "Right Swipe", Toast.LENGTH_SHORT).show();
                adapter.setPreviousPage();
            }
        } 
        catch (Exception e)
        {
            e.printStackTrace();
        }

        return true;
    }

    public void onLongPress(MotionEvent e) {
        // TODO Auto-generated method stub
    }

    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
            float distanceY) {
        // TODO Auto-generated method stub
        return false;
    }

    public void onShowPress(MotionEvent e) {
        // TODO Auto-generated method stub
    }

    public boolean onSingleTapUp(MotionEvent e) {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

适配器：

```
public class MyAdapter extends BaseAdapter{
    private int pageNo = 0 ;
    Context context;
    String [] names;

    public MyAdapter( Context context, String [] names ) {
        this.context = context;
        this.names = names;
    }

    public void setNextPage() {
        pageNo++;
        notifyDataSetChanged();
    }

    public void setPreviousPage() {
        pageNo--;
        notifyDataSetChanged();
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return 10;
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return pageNo;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        TextView txt;
        if( convertView == null ) {
            txt = new TextView(context);
            txt.setTextSize(20);
            txt.setPadding(20, 10, 0, 10);
            txt.setLayoutParams(new ListView.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        }
        else {
            txt = (TextView) convertView;
        }

        int index = ( 10 * pageNo + position );
        if( index >= names.length ) {
            index = 0;
            pageNo = 0;
        }
        txt.setText( names[ index ]);
        return txt;
    }
} 
```

# objective-c - 将对象指针传递给 performSelector:withObject 会导致 EXC_BAD_ACCESS

> ID：11924775
> 
> 赞同：0
> 
> 时间：2012-08-12T18:39:20.843
> 
> 标签：objective-c, pointers, nsvalue

这就是问题所在：我将一个指向对象的指针传递给`performSelector:withObject`via `[NSValue valueWithPointer:]`，例如：

```
// GVertex is NSObject subclass
GVertex *vertex = [[GVertex alloc] initWithX:5.0f andY:4.5f]];
GVertex **vertexPtr = &vertex;
// later in code when I need to process the vertex
[self performSelector:@selector(processVertex:) withObject:[NSValue valueWithPointer:vertexPtr]]; 
```

然后在我的`processVertex:(NSValue *)vertexValue`方法中，我想获取传递的顶点，我这样做：

```
- (void)parseVertex:(NSValue *)vertexValue
{
    GVertex *vertex = (GVertex *)[vertexValue pointerValue];
    ...
    [vertex setFlags:32]; <<-- This gives me EXC_BAD_ACCESS
    ... 
} 
```

我已经尝试了许多 (*) 和 (&) 的组合，但无法让它发挥作用。我究竟做错了什么 ？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:49:12.707

你为什么不直接传递你的`vertex`对象：

```
[self performSelector:@selector(processVertex:) withObject:vertex]; 
```

并将您的方法声明更改为：

```
- (void)parseVertex:(GVertex *)vertex {
     [vertex setFlags:32];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T19:25:53.927

您放入的`NSValue`指针是指向指针的指针（或指针的地址），但您正在检索它，就好像它是一个普通的对象指针。此外，您要获取其地址的指针是一个局部变量——该地址在新方法的上下文中将成为垃圾。

如果您只是将（单个）指针存储在`NSValue`：

```
[self performSelector:@selector(processVertex:) withObject:[NSValue valueWithPointer:vertex]]; 
```

但是，请注意内存管理问题——`NSValue`不会在该指针处复制或获取内存的所有权。

# javascript - 是否可以输出我在上次会话中输入控制台的所有代码？

> ID：11924777
> 
> 赞同：7
> 
> 时间：2012-08-12T18:39:33.813
> 
> 标签：javascript, google-chrome-devtools

是否可以输出我在上次会话中输入控制台的所有代码？只是代码，没有结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T18:52:31.970

在当前检查器中打开一个新的网络检查器（ctrl+shift+j，他们删除了递归检查元素），然后在新检查器中执行此操作：

```
console.dir(WebInspector.consoleView.prompt._suggestBox._textPrompt._data) 
```

为了清楚起见，您不会在页面的检查器中运行它。您在检查员的检查员中运行它。IE：

**您的检查员也必须取消停靠**，否则它只会转到当前检查员的控制台选项卡，而不是打开检查当前检查员的新检查员。

![在此处输入图像描述](../Images/a76efee9b1e92089b27f9b68260072e0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T18:50:09.227

您是否正在寻找名为Firebug 的[命令行历史的东西。](http://getfirebug.com/commandline/)

> 命令行维护自己的已执行表达式历史记录，因此您可以轻松返回并再次执行表达式。只需使用向上和向下箭头或单击命令行左侧的红色按钮即可查看包含所有条目的历史弹出窗口。链接和其他地方

# c++ - 带有包含的循环类依赖

> ID：11924784
> 
> 赞同：0
> 
> 时间：2012-08-12T18:40:13.023
> 
> 标签：c++, class

这基本上是我的课堂布局：

游戏驱动程序.h：

```
#ifndef GAMEDRIVER_H
#define GAMEDRIVER_H
#include "CameraSystem.h"

class CameraSystem; //Forward declaration

class GameDriver {
    //Stuff
};

#endif 
```

相机系统.h：

```
#ifndef CAMERASYSTEM_H
#define CAMERASYSTEM_H
#include "Tickable.h"

class GameDriver;
class CameraSystem: public Tickable { //Complains here
    //Stuff
};

#endif 
```

可勾选的.h：

```
#ifndef TICKABLE_H
#define TICKABLE_H
#include "GameDriver.h"
class GameDriver;
class Tickable {
    //Stuff
};

#endif 
```

这是我得到的错误：

```
CameraSystem.h:9 error: expected class-name before '{' token 
```

前向声明 Tickable 也不起作用。有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T18:45:17.220

如果您转发 delcare 一个类，则不应包含该类的标题。

```
#include "CameraSystem.h" // DO NOT INCLUDE THIS

class CameraSystem; //Forward declaration

class GameDriver {
    //Stuff
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:49:23.120

好的，我在这里看到两个问题。

首先：您的前向声明是无用的。您正在编写（以 GameDriver.h: 为例）：

```
#include "CameraSystem.h"

class CameraSystem; //Forward declaration

class GameDriver {
    //Stuff
}; 
```

在这里，CameraSystem 将通过包含 CameraSystem.h 已知，因此前向声明是无稽之谈。你想写的是：

```
class CameraSystem; //Forward declaration

class GameDriver {
    //Stuff
}; 
```

第二：如果你真的需要前向声明，你不能使用它，因为你不能从前向声明的类派生：

```
#include "Tickable.h"

class CameraSystem: public Tickable { //Complains here
    //Stuff
}; 
```

请注意，**仅**当您不直接将前向声明的类用作类成员时，前向声明才有效。然后，您将被限制为指向前向声明的类的指针或引用。这样做的原因是，编译器不知道类的内存布局，除非它完全知道（即通过包含头文件）。例如：

```
class CameraSystem;
class GameDriver {
  CameraSystem m_cameraSystem;
}; 
```

不会**工作**。然而，

```
class CameraSystem;
class GameDriver {
  CameraSystem *m_cameraSystem;
  CameraSystem& m_otherCameraSystem;
}; 
```

将要。当然，您仍然必须在 *.cpp 文件中包含正确的头文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T18:47:30.120

你无法解决这样的循环依赖。但是，您已经获得了解决方案（部分）：

即不包括标题，而是使用前向声明。如果你做对了，应该没有任何问题。但是，请尝试将您的程序分组为逻辑元素/组，并且仅在需要时添加交叉引用（例如，游戏必须知道并访问相机，但相机不应该作为访问游戏系统的所有的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T19:07:17.270

您不能从尚未声明的类继承。

预处理`Tickable.h`为您提供：

```
class GameDriver;
class CameraSystem: public Tickable { //Complains here
    //Stuff
};

class CameraSystem; //Forward declaration

class GameDriver {
    //Stuff
};

class GameDriver;
class Tickable {
    //Stuff
}; 
```

看看`Tickable`当你从它继承时甚至没有被前向声明？

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-12T18:43:25.033

尝试`#pragma once`在每个头文件的开头添加。

您应该以某种方式告诉编译器只放置一次。这是一种方式。另一个是使用`#ifndef X`and `#define X`。

如果这不能解决它，请尝试消除循环依赖 - 它似乎不必发生......

# android - 从安卓模拟器发送电子邮件

> ID：11924785
> 
> 赞同：0
> 
> 时间：2012-08-12T18:40:19.073
> 
> 标签：android, android-emulator

我指的是以下链接以从我的**android 模拟器**发送电子邮件： [无意图地发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

一切都与链接相同，通过查看 LogCat 日志似乎可以正常工作，但我似乎从未收到电子邮件！

**以下是 LogCat 的详细日志内容**：

```
I/System.out(815):      --------Inside onReceive of CallReceiver--------
D/CallReceiver(815):        Inside onReceive
D/CallReceiver(815):        -----Criteria matched-----
D/EmailService(815):        -----Inside On Start Command-----
I/System.out(815):      DEBUG: setDebug: JavaMail version 1.4.1
D/GmailSenderService(815):  from = 24adithya@gmail.com, 
D/GmailSenderService(815):  recipient = 24adithya@gmail.com, 
D/GmailSenderService(815):  replyTo = 24adithya@gmail.com, 
I/System.out(815):      DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc.,1.4.1]
I/System.out(815):      DEBUG SMTP: useEhlo true, useAuth true
I/System.out(815):      DEBUG SMTP: useEhlo true, useAuth true
I/System.out(815):      DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 465, isSSL false
I/System.out(815):      220 mx.google.com ESMTP qn3sm3719992pbc.6
I/System.out(815):      DEBUG SMTP: connected to host "smtp.gmail.com", port: 465
I/System.out(815):      EHLO localhost
I/System.out(815):      250-mx.google.com at your service, [117.195.44.162]
I/System.out(815):      250-SIZE 35882577
I/System.out(815):      250-8BITMIME
I/System.out(815):      250-AUTH LOGIN PLAIN XOAUTH
I/System.out(815):      250 ENHANCEDSTATUSCODES
I/System.out(815):      DEBUG SMTP: Found extension "SIZE", arg "35882577"
I/System.out(815):      DEBUG SMTP: Found extension "8BITMIME", arg ""
I/System.out(815):      DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH"
I/System.out(815):      DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
I/System.out(815):      DEBUG SMTP: Attempt to authenticate
I/System.out(815):      AUTH LOGIN
I/System.out(815):      334 VXNlcm5hbWU6
I/System.out(815):      MjRhZGl0aHlh
I/System.out(815):      334 UGFzc3dvcmQ6
I/System.out(815):      I2EsZmF3a2VzKzE=
I/System.out(815):      235 2.7.0 Accepted
I/System.out(815):      DEBUG SMTP: use8bit false
I/System.out(815):      MAIL FROM:<24adithya@gmail.com>
I/System.out(815):      250 2.1.0 OK qn3sm3719992pbc.6
I/System.out(815):      RCPT TO:<24adithya@gmail.com>
I/System.out(815):      250 2.1.5 OK qn3sm3719992pbc.6
I/System.out(815):      DEBUG SMTP: Verified Addresses
I/System.out(815):      DEBUG SMTP:   24adithya@gmail.com
I/System.out(815):      DATA
I/System.out(815):      354  Go ahead qn3sm3719992pbc.6
I/System.out(815):      Sender: 24adithya@gmail.com
I/System.out(815):      To: 24adithya@gmail.com
I/System.out(815):      Message-ID: <1079654112.1.1344795799196.JavaMail.javamailuser@localhost>
I/System.out(815):      Subject: Test Subject
I/System.out(815):      MIME-Version: 1.0
I/System.out(815):      Content-Type: text/plain; charset=us-ascii
I/System.out(815):      Content-Transfer-Encoding: 7bit
I/System.out(815): 
I/System.out(815):      Hi, This is 5554
I/System.out(815):      .
I/System.out(815):      250 2.0.0 OK 1344795807 qn3sm3719992pbc.6 
```

我将邮件发送给自己。跟模拟器有关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:22:25.230

麻烦各位了。邮件一直在我的收件箱中，但由于我的过滤器而在其他文件夹中:)

# java - 如何使用 android java 创建 facebook 相册并将照片上传到 facebook 相册？

> ID：11924787
> 
> 赞同：1
> 
> 时间：2012-08-12T18:40:45.753
> 
> 标签：java, android, facebook, photos

谁能给我一个例子，如何使用来自android设备的java创建相册并将照片上传到facebook相册？我找到了一种如何将照片一张一张上传到 Facebook 墙的方法，但没有找到创建相册和上传照片的方法。

非常感谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T02:10:58.443

我们的开发者博客有一个[很好的教程](https://developers.facebook.com/blog/post/498/)，介绍如何使用 Graph API 上传照片。尽管代码是用 PHP 编写的，但您可以轻松地将示例代码翻译成 Java。教程的相关部分可能是场景 2：创建新相册并添加照片。

要使用我们的 Graph API 创建新专辑，您首先需要拥有一个具有权限的访问令牌`publish_stream`。然后创建新专辑：

```
Bundle params = new Bundle();
params.putString("name", "My Test Album Name Here");
params.putString("message", "My Test Album Description Here");
mAsyncRunner.request("me/albums", params, "POST", new CreateAlbumListener()); 
```

在你的`CreateAlbumListener`类中，在方法中获取新创建的专辑 ID `onComplete()`。获得刚刚创建的相册的相册 ID 后，将照片上传到该相册：

1）上传本地照片（例如从画廊），假设我们有一个变量`data`是我们希望上传的照片的字节数组

```
Bundle params = new Bundle();
params.putByteArray("photo", data);
params.putString("caption", "Test description here");
mAsyncRunner.request("ALBUM_ID/photos", params, "POST"); 
```

2) 从远程上传（例如照片的 URL）

```
Bundle params = new Bundle();
params.putString("url", "http://www.lolbrary.com/content/454/facebook-cat-9454.jpg");
params.putString("caption", "Cats are awesome");
mAsyncRunner.request("ALBUM_ID/photos", params, "POST"); 
```

`ALBUM_ID`是存储您刚刚创建的专辑的专辑 ID 的变量。您可以[查看 HackBook](https://github.com/facebook/facebook-android-sdk/tree/master/examples/Hackbook)，这是我们创建的示例应用程序，用于向您展示您可以使用 android SDK 执行的所有不同调用。

让我知道这是否有帮助。

# actionscript-3 - AS3 动画无法播放

> ID：11924796
> 
> 赞同：0
> 
> 时间：2012-08-12T18:41:57.817
> 
> 标签：actionscript-3

对编程相当陌生，慢慢掌握它。我遇到了一个问题，我花了几个小时试图解决，但似乎无法得到我正在寻找的结果。我为我的角色制作了跑步动画。他向左、向上、向下、向右、向上、向下、向右奔跑，但向上向左和向下向左跑，动画不播放。他朝正确的方向移动，但正在播放的动画是 upRight 和 downRight。我已将 upLeft 和 downLeft 的动画更改为我的“空闲”动画并且它可以工作。如果所有其他动画都正常工作，我不确定为什么会发生这种情况。

这是我的播放器动画代码。任何帮助或建议都会很棒。提前致谢

包裹 {

```
import flash.display.MovieClip;
import flash.display.*;
import flash.events.*;

public class PlayableCharacter extends Character 
{
    private var dx:int;
    private var dy:int;
    var ready:Boolean;

    public function PlayableCharacter(x:int=0, y:int=0, dx:int = 3, dy:int = 3) 
    {
        // constructor code
        this.x = x;
        this.y = y;

        this.dx = dx;
        this.dy = dy;
        ready = true;
        gotoAndStop("Idle");

        addEventListener(Event.ENTER_FRAME,onEnter);
        addEventListener(Event.ADDED_TO_STAGE, onStage);
    }

    private function onEnter(e:Event)
    {

        //doing animation stuff

        if(!leftPressed && !rightPressed && !downPressed && !upPressed)
        {
            gotoAndStop("Idle");
        }

        //Go Left
        if(leftPressed && !upPressed && !downPressed && !rightPressed)
        {
            //do something left
            goDown(-dx)
            gotoAndStop("Run");
        }

        //Go Right
        if(rightPressed && !upPressed && !downPressed && !leftPressed)
        {
            //do something right
            goDown(dx)
            gotoAndStop("Run");
        }

        //Go Up
        if(upPressed && !leftPressed && !rightPressed && !downPressed)
        {
            goUp(-dy)
            gotoAndStop("RunUp");

        }

        //Go Down
        if(downPressed && !upPressed && !rightPressed && !leftPressed)
        {
            goUp(dy)
            gotoAndStop("RunDown");
        }

        //Go UpRight
        if(rightPressed && upPressed && !leftPressed && !downPressed)
        {
            goDown(dx)
            goUp(-dy)
            gotoAndStop("UpRight");
        }

        //Go DownRight
        if(rightPressed && downPressed && !leftPressed && !upPressed)
        {
            goDown(dx)
            goUp(dy)
            gotoAndStop("DownRight");
        }

        //Go UpLeft
        if(leftPressed && upPressed && !rightPressed && !downPressed)
        {
            goDown(-dx)
            goUp(-dy)
            gotoAndStop("UpLeft");
        }

        // Go Downleft
        if(leftPressed && downPressed && !rightPressed && !upPressed)
        {
            goDown(-dx)
            goUp(dy)
            gotoAndStop("DownLeft");

        }

        if (x > stage.stageWidth)
            x = stage.stageWidth;
        else if (x < 0)
            x = 0;

        if (y > stage.stageHeight)
            y = stage.stageHeight;
        else if (y < 0)
            y = 0;
    }

    public function onStage(e:Event)
    {

    }

        public function goUp(dy:int=0)
    {
        y += dy;

        if(scaleY > 0 && dy < 0)
        {
            scaleY *= 1;
        }
        else if(scaleY < 0 && dy > 0)
        {
            scaleY *= -1;
        }

    }

        public function goDown(dx:int =0)
    {
        x += dx;

        if(scaleX > 0 && dx < 0)
        {
            scaleX *= -1;
        }
        else if(scaleX< 0 && dx > 0)
        {
            scaleX *= -1;
        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:50:10.373

乍一看，我没有发现您的代码有任何问题。我总是建议不要使用标签作为框架，而是使用它们的数字。函数“goUp”和“goDown”的名称暗示了错误的方向，我将它们更改为“goVertical”和“goHorizo​​ntal”。leftPressed, rightPressed, ... 变量是如何设置的？您是否尝试过在每个“if”中添加跟踪，以查看问题是执行了错误的 if 块还是动画处理错误？您是否仔细检查了框架的名称并使用它们各自的编号进行了尝试？

# java - 错误活动不在 AndroidManifest.xml 中，即使它在那里

> ID：11924797
> 
> 赞同：0
> 
> 时间：2012-08-12T18:42:18.217
> 
> 标签：java, android, xml, android-manifest

收到无法启动活动 vTestSession 的错误，可能是因为不在 AndroidManifest.xml 中。但它就在那里。

LogCat 错误

```
08-12 18:39:14.871: E/AndroidRuntime(987): FATAL EXCEPTION: main
08-12 18:39:14.871: E/AndroidRuntime(987): java.lang.IllegalStateException: Could not execute method of the activity
08-12 18:39:14.871: E/AndroidRuntime(987):  at android.view.View$1.onClick(View.java:3591)
08-12 18:39:14.871: E/AndroidRuntime(987):  at android.view.View.performClick(View.java:4084)
08-12 18:39:14.871: E/AndroidRuntime(987):  at android.view.View$PerformClick.run(View.java:16966)
08-12 18:39:14.871: E/AndroidRuntime(987):  at android.os.Handler.handleCallback(Handler.java:615)
08-12 18:39:14.871: E/AndroidRuntime(987):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-12 18:39:14.871: E/AndroidRuntime(987):  at android.os.Looper.loop(Looper.java:137)
08-12 18:39:14.871: E/AndroidRuntime(987):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-12 18:39:14.871: E/AndroidRuntime(987):  at java.lang.reflect.Method.invokeNative(Native Method)
08-12 18:39:14.871: E/AndroidRuntime(987):  at java.lang.reflect.Method.invoke(Method.java:511)
08-12 18:39:14.871: E/AndroidRuntime(987):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-12 18:39:14.871: E/AndroidRuntime(987):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-12 18:39:14.871: E/AndroidRuntime(987):  at dalvik.system.NativeStart.main(Native Method)
08-12 18:39:14.871: E/AndroidRuntime(987): Caused by: java.lang.reflect.InvocationTargetException
08-12 18:39:14.871: E/AndroidRuntime(987):  at java.lang.reflect.Method.invokeNative(Native Method)
08-12 18:39:14.871: E/AndroidRuntime(987):  at java.lang.reflect.Method.invoke(Method.java:511)
08-12 18:39:14.871: E/AndroidRuntime(987):  at android.view.View$1.onClick(View.java:3586)
08-12 18:39:14.871: E/AndroidRuntime(987):  ... 11 more
08-12 18:39:14.871: E/AndroidRuntime(987): Caused by: java.lang.NullPointerException
08-12 18:39:14.871: E/AndroidRuntime(987):  at com.kids.playground.math.vTestSession.getcurrentquestion(vTestSession.java:312)
08-12 18:39:14.871: E/AndroidRuntime(987):  at com.kids.playground.math.vTestSession.setuparun(vTestSession.java:132)
08-12 18:39:14.871: E/AndroidRuntime(987):  at com.kids.playground.math.vTestSession.ans1clicked(vTestSession.java:342)
08-12 18:39:14.871: E/AndroidRuntime(987):  ... 14 more 
```

我在 com.kids.playground 包中有一个带有按钮的类。当您单击该按钮时，它会在 com.kids.playground.math 包中运行

![在此处输入图像描述](../Images/e49399b3f487e1717bbee0386391a62d.png)

我的 AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.kids.playground"

    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

      <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

    <application 
        android:icon="@drawable/icon" 
        android:label="@string/app_name" >
         <activity
            android:label="@string/app_name"
            android:name=".AppActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

           <activity android:name="com.kids.playground.math.DMG"
                  android:label="@string/app_name">
        </activity>

        <activity android:name="com.kids.playground.math.vSplash"
                  android:theme="@style/Theme.Transparent">
        </activity>

        <activity android:name="com.kids.playground.math.vTestSession"
                  android:label="@string/app_name">
        </activity>

        <activity android:name="com.kids.playground.math.vStats"
                  android:label="@string/app_name">
        </activity>

        <activity android:name="com.kids.playground.math.vHistoryStats"
                  android:label="@string/app_name">
        </activity>

        <activity android:name="com.kids.playground.math.vEasystats"
                  android:label="@string/app_name">
        </activity>

        <activity android:name="com.kids.playground.math.vNormalstats"
                  android:label="@string/app_name">
        </activity>

        <activity android:name="com.kids.playground.math.vHardstats"
                  android:label="@string/app_name">
        </activity>

        <receiver android:name="com.kids.playground.math.MyIntentReceiver" android:enabled="true">
            <intent-filter>
                <action android:name="com.kids.playground.math.PrepareOperationSet" />
            </intent-filter>
        </receiver>

        </application>

</manifest> 
```

**编辑 - 第 306-317 行**

```
 @SuppressWarnings("unchecked")
    private ArrayList<String> getcurrentquestion() {
        ArrayList<String> retval = new ArrayList<String>();
        Random r = new Random();

        //Check if the current index is not over size of question set and maximum number of questions then return null
        if( vTestSession.currentindex > this.numquestions-1 || vTestSession.currentindex > this.questions.size()-1) { return null; }

        int qindex = r.nextInt(this.questions.size());
        retval = (ArrayList<String>) this.questions.get(qindex);
        return retval;
    } 
```

第 312 行是注释“//Check if the current index ...”下的 if 语句

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:01:14.640

您需要调试并且必须检查在 if 条件下使用的所有变量的值。在这里，您需要验证所有变量是否包含预期值而不是空值。您可以按照以下方式进行操作。

1.  在第 312 行设置断点
2.  调试您的应用程序并让断点触发
3.  只需将鼠标指针放在变量上，您将获得变量的值
    OR
4.  右键单击变量名称并选择检查

我希望这能帮到您...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T20:04:06.710

调试并告诉我们这一行中所有变量的值。其中一个（或多个）将为空。如果你找出原因，你的问题就解决了。

您很可能没有在之前的代码中初始化它们中的任何一个。

# magento - 如何解决 Magento 1.7 致命错误：在非对象消息上调用成员函数 toHtml()

> ID：11924799
> 
> 赞同：0
> 
> 时间：2012-08-12T18:42:25.487
> 
> 标签：magento, object, fatal-error

我在这里遇到了一个情况。

据我所知，在以前的 Magento 版本中，如果有人收到此 PHP 致命错误消息：

```
Fatal error: Call to a member function toHtml() on a non-object in C:\xampp\htdocs\magento\app\design\frontend\base\default\template\wishlist\view.phtml on line 50 
```

您应该在 page.xml 文件中做一个简单的更改，以便：

```
<block type="core/profiler" output="toHtml"/> 
```

会成为：

```
<block type="core/profiler" output="toHtml" name="core_profiler"/> 
```

但是现在......运行 Magento 1.7 这个解决方案似乎不再起作用了！

有人有解决方案吗？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T21:54:18.017

这是为什么人们应该使用**local.xml**来覆盖基本主题布局的一个完美示例！

问题是，在使用之前版本的 Magento 时，有时您将 wishlist.xml 从基本主题复制到自定义主题，而不是愿望清单模板文件。

在 1.6 和 1.7 版本之间的愿望清单布局中添加了一些新块。

[wishlist/view.phtml](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/design/frontend/base/default/template/wishlist/view.phtml#L50)的第 50 行试图在名为`control_buttons`...的子块上调用 toHtml

```
<?php echo $this->getChild('control_buttons')->toHtml();?> 
```

此块仅在 1.7 中引入，因此您从以前版本获得的 wishlist.xml 文件并未声明该块 - 因此出现错误“调用**非对象**上的成员函数 toHtml() ”

因此，要解决此问题，您需要尝试将 1.7 基本的 wishlist.xml 文件与您的自定义版本合并 - 本质上是添加在 1.7 中声明的新块。

[1.6 wishlist.xml 这里](http://svn.magentocommerce.com/source/branches/1.6/app/design/frontend/base/default/layout/wishlist.xml)

[1.7 wishlist.xml 在这里](http://svn.magentocommerce.com/source/branches/1.7/app/design/frontend/base/default/layout/wishlist.xml)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T19:11:15.633

很明显，您的问题与您提到的 xml 布局指令无关：

```
<block type="core/profiler" output="toHtml" name="core_profiler"/> 
```

致命错误在文件 app\design\frontend\base\default\template\wishlist\view.phtml 的第 50 行触发

我猜，你最近更新了你的 magento 安装。

你能做下一个实验吗：

1.  在您的活动主题中临时将 layout/wishlist.xml 重命名为 layout/wishlist-back.xml
2.  清理 Magento 缓存
3.  尝试再次重现问题
4.  与我们分享结果

# html - 在背景图像上使用文本作为蒙版

> ID：11924800
> 
> 赞同：17
> 
> 时间：2012-08-12T18:42:26.353
> 
> 标签：html, css

我的页面上有一个漂亮的背景，我希望我的文本标题充当*遮罩*以切开其包含的 div 并将背景作为纹理。

我可以在*CSS*中执行此操作还是必须打开*Photoshop*？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T18:48:38.077

有限的浏览器支持，但`background-clip`可以获得这种效果：[http](http://tympanus.net/Tutorials/ExperimentsBackgroundClipText/) ://tympanus.net/Tutorials/ExperimentsBackgroundClipText/ （点击 Animate 按钮以获得更多乐趣）

使用 SVG 你可以这样做： http: [//people.opera.com/dstorey/images/newyorkmaskexample.svg](http://people.opera.com/dstorey/images/newyorkmaskexample.svg)（查看源代码以了解实际做了什么，也请参阅[参考文章](http://my.opera.com/dstorey/blog/using-svg-masks-for-cut-out-text-effects)）

使用背景图片和 CSS，您可以这样做：http: [//www.netmagazine.com/tutorials/texturise-web-type-css](http://www.netmagazine.com/tutorials/texturise-web-type-css)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-16T16:22:40.843

正如 CSS-Tricks 在[本文](https://css-tricks.com/image-under-text/)中展示的那样，“文本后面的图像”可以这样完成：

```
h1 {
   color: white;  /* Fallback: assume this color ON TOP of image */
   background: url(images/fire.jpg) no-repeat; /* Set the backround image */
   -webkit-background-clip: text; /* clip the background to the text inside the tag*/
   -webkit-text-fill-color: transparent; /* make the text transparent so 
                                          * the background shows through*/
} 
```

但它不能保证适用于所有浏览器，所以他们建议一些变通方法，比如[modernizr](http://www.modernizr.com/)。

这是它工作时的样子：

![工作时的样子](../Images/5b6d920ab6a121c6d14dd408dd47dd47.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-12T18:49:27.997

CSS3 中有一个`background-clip: text`属性，尽管它并不适用于所有浏览器。有关更多详细信息，请参见[此处](http://www.webkit.org/blog/164/background-clip-text/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-25T15:35:31.213

扩展@sgress454 的答案。现在`background-clip: text`可以在 Firefox 和 Edge 上运行，但是它的浏览器兼容性还不够全面。Safari 和 Chrome 部分不支持（仅支持前缀版本的属性。根据[WebKit 博客](https://webkit.org/blog/164/background-clip-text/)，剪辑中不包含文本装饰或阴影。）。`background-clip: text`仍然是您正在寻找的：

> 背景剪辑：文本；
> 
> 背景被绘制在（剪辑到）前景文本中。

[MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/background-clip)

演示：

```
body {background: black;}

div {
  background: url(https://images.unsplash.com/photo-1543005472-1b1d37fa4eae?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=600&q=60), black;
  background-clip: text;
  color: transparent;
}
```

```
<div>This background clips to the text.</div>
```

# algorithm - 使用随机元素进行多参数优化

> ID：11924801
> 
> 赞同：2
> 
> 时间：2012-08-12T18:42:33.033
> 
> 标签：algorithm, optimization, random

我正在寻找一种方法来找到模拟的最佳参数。这是关于台球/台球的突破。一个镜头由 7 个参数定义，我可以模拟镜头，然后对结果进行评分，我想计算最佳参数。

我在这里找到了以下链接： [Multiple parameter optimization with lots of local minima](https://stackoverflow.com/questions/3900577/multiple-parameter-optimization-with-lots-of-local-minima) 建议4种算法。在我使用的泳池模拟器中，每次模拟时，**镜头都会改变一点随机值。**如果我两次模拟同一个镜头，结果会有所不同。所以我正在寻找一种类似于上面链接中的算法，只是添加了一个随机元素，优化了 7 个参数，这些参数平均会产生最佳参数，即最有可能成功的破门。我最初的想法是模拟 100 或 1000 次镜头，然后将平均值作为上述算法的评分，但我仍然觉得有更好的方法。有人有想法吗？

这 7 个参数是连续的，但在不同的范围内（一个从 0 到 10，另一个从 0.0 到 0.028575 等等）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:13:09.443

至少对于某些算法而言，可能不需要重复模拟*同一个*镜头。只要您的替代方案具有某种形式的动力，例如在群体模拟方法中，您就可以让它受到每个单独模拟结果的影响。在这种情况下，一个不幸的模拟只会稍微减慢参数空间中的运动，而严重的质量损失应该足以停止和反转运动。那些不使用动量的算法可能会被调整为具有动量。如果不是，那么重复模拟似乎是最好的方法。除非您可以掌握模拟器的内部结构，并从整体上对镜头进行评分，而不必一遍又一遍地模拟它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:12:59.947

您可以将您在非确定性场景中提到的算法与独立的随机运行一起使用。您重复模拟的想法很好，您可以阅读更多关于您可能需要为模拟考虑[多少次重复](http://en.wikipedia.org/wiki/Sample_size_determination)的信息（不幸的是，没有简单的答案）。如果你不太喜欢数学，而且跑得很快，重复 1.000 次，然后重复 10.000 次，看看结果是否有很大差异。如果是，您必须收集更多样本，如果不是，您可能是安全的（[中心极限定理](http://en.wikipedia.org/wiki/Central_limit_theorem)表明结果收敛）。

此外，**不要只考虑平均值**！确保查看每个算法结果的标准偏差；您可能想使用[箱线图](http://en.wikipedia.org/wiki/Box_plot)来比较它们的四分位数。如果你只依赖平均值，你可能会选择一种产生非常不同结果的算法，有时性能很好，有时性能很差。

我不知道您使用的是什么语言，但如果您使用 Java，我正在维护[一个](https://github.com/feldob/InPUT)可以简化您的“蒙特卡罗”风格实验的工具。

# ios5 - 将多个表视图嵌入到详细视图中

> ID：11924811
> 
> 赞同：1
> 
> 时间：2012-08-12T18:43:40.073
> 
> 标签：ios5, xcode4.4

总的来说，我对 iOS 和 GUI 编程非常陌生，但我似乎已经掌握了它的基本知识，但我真的很难过，如果可能的话，我可以用手握住。我正在开发一个主从 iPad 应用程序。导航控制器工作正常，但细节视图控制器出现了一些问题。它被垂直分成3个独立的部分。第一部分由标准控件（标签、图像视图等）组成，另外两个部分由表格视图组成。

在我的一生中，我无法弄清楚如何让表格视图填充表格中的任何数据。根据我收集到的信息，我需要为每个表视图设置一个数据源和委托，但我似乎无法弄清楚在哪里/如何做到这一点。

谁能指出我正确的方向？谢谢。

# android - 从编辑文本中获取信息时出现 Android 号码格式异常

> ID：11924812
> 
> 赞同：-2
> 
> 时间：2012-08-12T18:43:48.387
> 
> 标签：android, google-maps, exception, android-edittext, numberformatexception

在这里，我从用户那里获取经度和经度，然后将其转换为整数，这是日志 cat msg 的问题：

无法将 30.01 转换为 int ！然后我在数据库中的表中输入纬度和经度：

```
 public class newMission extends Activity 
  implements OnClickListener{
SQLiteDatabase sql;
EditText e1,e2,e3,e4;
Button b;
MaptoDo obj;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Intent in =getIntent();
    setContentView(R.layout.newmission);
    e1=(EditText) findViewById(R.id.edn1);
    e2=(EditText) findViewById(R.id.edn2);
    e3=(EditText) findViewById(R.id.edn3);
    e4=(EditText) findViewById(R.id.edn4);
    b=(Button) findViewById(R.id.btnew);
    b.setOnClickListener(this);
    obj=new MaptoDo();
    sql=openOrCreateDatabase("db",0, null);
    sql.execSQL("CREATE TABLE Mission" +
            "" +
            " (emp integer REFERENCES Employee2 (password)," +
            "oper_n text,cust_n text,lat double," +
            "long double,oper_id integer PRIMARY KEY AUTOINCREMENT)");
}
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    String opN=e1.getText().toString();
    String cuN=e2.getText().toString();
    String lats=e3.getText().toString();
    String lons=e4.getText().toString();
     try {
  int lat=Integer.parseInt(lats);
  int lon=Integer.parseInt(lons);
  sql.execSQL("insert into Mission (oper_n,cust_n,lat,long)values('"+opN+"','"+cuN+"',"+lat+","+lon+");");
  Toast.makeText(this,"Data Inserted",2000).show();
  obj.addMission(lat, lon); 
    //add to ToDo list too 
}catch (NumberFormatException nfe) {
    Toast.makeText(this, "Please Enter Valid Data",2000).show();
}} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T19:03:25.097

首先尝试使用`double`数据类型。

```
double dLat=Double.parseDouble(lats);
double dLon=Double.parseDouble(lons); 
```

然后是获取小数点前的值的问题：

```
int lat = (int)Math.floor(dLat);
int lon = (int)Math.floor(dLon); 
```

或者，如果您愿意 - 您可以首先在输入上运行正则表达式以确保它具有数字 [dot] 数字，否则将输入提取到 numeric 将失败，但话虽如此，这将取决于布局的方式它`EditText`是否为某些输入类型设置了 -`android:inputType`在 XML 布局中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T19:03:47.163

`int`您不能在不丢失精度的情况下将字符串“30.01”转换为。尝试将其解析为`float`.

```
float lat = Float.parseFloat(lats); 
```

或使用

```
double lat = Double.parseDouble(lats); 
```

# php - php百分比计算

> ID：11924815
> 
> 赞同：1
> 
> 时间：2012-08-12T18:44:04.767
> 
> 标签：php, math

我正在尝试计算激活在线扑克奖金所需的手数。

举个例子：

使用必发扑克

*   每个底池的 5% 用于抽成
*   3.25 玩家点数每贡献一美元抽成即可获得

所以

平均底池为 1 美元的 100 手牌产生 5 美元的抽水 5 x 3.25 = 16.25 点

奖金以每 40 点 5 美元的增量发放，所以我需要计算产生 40 点需要多少手牌。

**这是我到目前为止的代码：**

```
$average_pot = 1;
$points_required = 40;

//percentage of rake taken from pot
$rake_percentage = 5;
//number of points for every dollar generated
$points_per_dollar = 3.25;
$rake_to_generate = $points_required / $points_per_dollar; // 12.30
$hands_needed = $rake_to_generate * $rake_percentage; //Wrong?!?!

 echo $hands_needed; 
```

我知道这可能很容易，但由于某种原因，我的大脑不会让我弄清楚，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:50:19.360

```
$points_per_hand = $rake_percentage/100 * $points_per_dollar * $average_pot;
$hands_needed    = ceil($points_required / $points_per_hand); 
```

使用您的示例：

```
$points_per_hand = 5/100 * 3.25 * 1;
                 = 0.1625;

$hands_needed    = ceil(40 / 0.1625);
                 = ceil(246.1538...);
                 = 247; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T18:52:52.847

试试这个：

```
$average_pot = 1;
$points_required = 40;

//percentage of rake taken from pot
$rake_percentage = 0.05;
//number of points for every dollar generated
$points_per_dollar = 3.25;
$rake_to_generate = $points_required / $points_per_dollar; // 12.30
$hands_needed = $rake_to_generate * $rake_percentage; //Wrong?!?! 
```

 回声 $hands_needed;

# c++ - 派生类实现具有通用函数签名的多个接口

> ID：11924820
> 
> 赞同：4
> 
> 时间：2012-08-12T18:44:23.053
> 
> 标签：c++, class, inheritance, multiple-inheritance

尝试编译代码时出现编译错误。错误是这样的：

```
multi.cc: In function ‘int main()’:
multi.cc:35: error: cannot declare variable ‘mdc’ to be of abstract type ‘MostDerivedClass’
multi.cc:27: note:   because the following virtual functions are pure within ‘MostDerivedClass’:
multi.cc:13: note:  virtual int Interface2::common_func()
multi.cc:36: error: request for member ‘common_func’ is ambiguous
multi.cc:13: error: candidates are: virtual int Interface2::common_func()
multi.cc:21: error:                 virtual int InterimClass::common_func() 
```

这是我的代码：

```
class Interface1 {
public:
    virtual int common_func() = 0;
    virtual ~Interface1() {};
};

class Interface2 {
public:
    virtual int common_func() = 0;
    virtual int new_func() = 0;
    virtual ~Interface2() {};
};

class InterimClass : public Interface1 {
public:
    virtual int common_func() {
        return 10;
    }
};

class MostDerivedClass : public InterimClass, public Interface2 {
public:
    virtual int new_func() {
        return 20;
    }   
};

int main() {
    MostDerivedClass mdc;
    int x = mdc.common_func();
    cout << "The value = " << x << endl;    

    Interface2 &subset_of_funcs = dynamic_cast<Interface2 &>(mdc);
    x = subset_of_funcs.common_func();
} 
```

我的问题：

*   如何告诉编译器 common_func() 已经由作为 MostDerivedClass 的基类的 InterimClass 实现？

*   还有其他方法可以解决我的问题吗？我真正想做的是能够从 Interface2 调用 common_func。我正在使用 Interface1 中包含大量方法的一些遗留代码。在我的新代码中，我只想调用一小组这些 Interface1 函数，以及一些我需要添加的函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T19:02:49.847

您需要定义一个`common_func()`无论如何`MostDerivedClass`以满足您的继承`Interface2`

你可以尝试类似的东西

```
virtual int common_func() {
    return InterimClass::common_func();
} 
```

如果您无法更改第一个，这是最有用的`Interface1`

如果你想在你的类之间建立真正的继承关系，你需要遵循 Lol4t0 的建议。从 中提取一个超类`Interface1`，并`Interface2`创建这个新创建的类的子类。例子 ：

```
class RootInterface{
public :
    virtual int common_func() = 0;
    virtual ~RootInterface(){}
};

class Interface1 : public virtual RootInterface{
public:
    virtual ~Interface1() {};
};

class Interface2 : public virtual RootInterface{
    public:
    virtual int new_func() = 0;
    virtual ~Interface2() {};
};

class InterimClass : public Interface1 {
    public:
    virtual int common_func() {
        return 10;
    }
};

class MostDerivedClass : public InterimClass, public Interface2 {
public:
    virtual int new_func() {
        return 20;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T19:03:22.573

在 MostDerivedClass 中添加一个覆盖，并从中调用 InterimClass::common_func()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T19:14:02.727

首先，我不太了解您的代码的含义。

您需要知道只实现了 Interface1::common_func。

为什么不让 Interface2 从 Interface1 继承？我猜你希望两个 common_func 方法是相等的。

示例代码（使用多态性）：

```
class Interface1 
{
public:
    virtual int common_func() = 0;
    virtual ~Interface1() {};
};

class Interface2 : public Interface1 {
public:
    virtual int common_func() = 0;
    virtual int new_func() = 0;
    virtual ~Interface2() {};
};

class InterimClass : public Interface2 {
    public:
        virtual int common_func() {
            return 10;
        }
};

class MostDerivedClass : public InterimClass {
public:
    virtual int new_func() {
        return 20;
    }
};

int test_func()
{
    Interface1 * i1 = new MostDerivedClass;
    int x = i1->common_func();
    cout << "The value = " << x << endl;

    Interface2 * i2 = new MostDerivedClass;
    x = i2->common_func();

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-26T20:25:48.967

让第二个接口派生自第一个接口，去掉`virtual int common_func() = 0;`第二个接口的声明，&使用关键字virtual来引导编译器实现。

```
class Interface1 {
public:
    virtual int common_func() = 0;
    virtual ~Interface1() {};
};

class BaseClass : public virtual Interface1 {
public:
    virtual int common_func() {
        return 10;
    }
};

class Interface2 : public virtual Interface1{
public:
    virtual int new_func() = 0;
    virtual ~Interface2() {};
};

class DerivedClass : public virtual BaseClass, public virtual Interface2 {
public:
    virtual int new_func() {
        return 20;
    }   
}; 
```

# functional-programming - 无法实现 Y 组合器工作

> ID：11924832
> 
> 赞同：1
> 
> 时间：2012-08-12T18:45:36.867
> 
> 标签：functional-programming, scheme, racket, combinators, y-combinator

这是代码（[也在这里](http://www.slideshare.net/fullscreen/yinwang0/reinventing-the-ycombinator/1)）：

```
#lang racket
(define poorY
  ((lambda length
    (lambda (ls)
      (cond
        [(null? ls) 0]
        [else (add1 ((length length) (cdr ls)))])))
  (lambda length
    (lambda (ls)
      (cond
        [(null? ls) 0]
        [else (add1 ((length length) (cdr ls)))]))))) 
```

当我运行它时：

```
> (poorY '(9 7 8))
. . application: not a procedure;
 expected a procedure that can be applied to arguments
  given: '(#<procedure>)
  arguments...:
   '(#<procedure>) 
```

屏幕截图如下所示：

![在此处输入图像描述](../Images/de4b87d4ad699825506294c3bcda8887.png)

我使用 DrRacket 作为 repl。代码有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T19:21:10.443

周围应该有括号`length`：

```
(define poorY
  ((lambda (length)  ;; here
    (lambda (ls)
      (cond
        [(null? ls) 0]
        [else (add1 ((length length) (cdr ls)))])))
  (lambda (length)   ;; and here
    (lambda (ls)
  ...... 
```

除了输入相同的长 lambda 表达式两次，您还可以尝试

```
(define poorY
  ((lambda (f) (f f))
   (lambda (length)
     (lambda (ls)
       (cond
         [(null? ls) 0]
         [else (add1 ((length length) (cdr ls)))]))))) 
```

另请参阅[“The Little Schemer”中的 Y 组合器讨论](https://stackoverflow.com/questions/10499514/y-combinator-discussion-in-the-little-schemer/11864862#11864862)。

# .htaccess - 从一些 ExpressionEngine 2 路径中删除 index.php

> ID：11924836
> 
> 赞同：1
> 
> 时间：2012-08-12T18:47:08.020
> 
> 标签：.htaccess, expressionengine

[我按照用户指南说明](http://expressionengine.com/user_guide/general/remove_index.php.html)使用干净的 url 设置了 ExpressionEngine 2.4 。他们工作得很好。但是当我使用来自[通道条目标签](http://expressionengine.com/user_guide/modules/channel/channel_entries.html)的路径单个变量时，我仍然在路径中得到“index.php”。例如：

```
{exp:channel:entries channel="news"}
  ..
  <a href="{comment_url_title_auto_path}">Test</a>
{/exp:channel:entries} 
```

呈现给：

```
<a href="http://eetest/index.php/mothra-is-attacking">Test</a> 
```

我目前有一个由两部分组成的解决方法：

[首先，我使用Find and Replace Plus](http://devot-ee.com/add-ons/find-and-replace-plus)插件从 url 中清除“index.php” ：

```
{exp:channel:entries channel="news" limit="1"} 
    <a href="{exp:replace_plus find="index.php/"}
             {comment_url_title_auto_path}
           {/exp:replace_plus}">Test</a>
{/exp:channel:entries} 
```

这给了我工作干净的网址：

```
<a href="http://eetest/mothra-is-attacking">Test</a> 
```

其次，如果我错过了模板中的 url，我会确保将任何包含“index.php”的 url 重定向到没有的 url。在我的 .htaccess 中，我使用了这个子句：

```
# Redirect index.php Requests
# ------------------------------
RewriteCond %{THE_REQUEST} ^[^/]*/index\.php [NC]
RewriteCond %{THE_REQUEST} ^GET
RewriteRule ^index\.php(.+) $1 [R=301,L] 
```

因此，尽管此设置有效，但它很杂乱（让我在模板中的链接上撒上查找/替换）并且效率有点低（在某些情况下强制重定向），而且它不是完全对 SEO 友好（对于那些使用 index.php 呈现的网址） .

我的问题是，我是否缺少一些设置来防止 index.php 首先出现在其中一些路径中？

以下是我的 config.php 中的一些相关设置：

```
$config['index_page'] = ''; //per the user docs on removing index.php
$config['uri_protocol'] = 'AUTO'; //didn't have luck with the other values
$config['base_url'] = '';
$config['url_suffix'] = ''; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:08:13.353

找到了。

我必须转到管理->频道管理->频道，然后为我的每个频道单击“编辑首选项”。

在那里，我从“路径设置”部分的“频道 URL”字段中删除了“index.php”。

点击更新并刷新我的前端页面后。上面显示的路径中的所有 index.php 都消失了。不再需要解决方法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:07:27.787

解决此问题的另一种方法是使用 Deploy Helper 或 Relocate - 两个出色的附加组件，可将通常分布在整个控制面板中的所有路径变量拉到一个位置，以便您可以快速轻松地找到并用一个按钮替换它们点击。这样，任何会影响您的自动路径的杂散 index.php 引用都将被一次性找到并更新。两个很棒的工具。

# directx - 如何使用 cmake 编译 .fx 文件

> ID：11924839
> 
> 赞同：4
> 
> 时间：2012-08-12T18:47:43.793
> 
> 标签：directx, cmake, directx-11

根据[此 MSDN 博客条目](http://blogs.msdn.com/b/chuckw/archive/2012/05/07/hlsl-fxc-and-d3dcompile.aspx)，建议在构建过程中使用 fxc 编译 .fx 效果文件。给定一个 fx 文件列表，我如何告诉 cmake 添加一些到我的项目文件（VS2010）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T00:37:47.913

用于[`find_program`](http://cmake.org/cmake/help/v2.8.9/cmake.html#command%3afind_program)查找`fxc`和[`add_custom_command`](http://cmake.org/cmake/help/v2.8.9/cmake.html#command%3aadd_custom_command)构建：

```
find_program(FXC fxc DOC "fx compiler")
if(NOT FXC)
message(SEND_ERROR "Cannot find fxc.")
endif(NOT FXC)

add_custom_target(fx ALL)

foreach(FILE foo.fx bar.fx baz.fx)
  get_filename_component(FILE_WE ${FILE} NAME_WE)
  add_custom_command(OUTPUT ${FILE_WE}.obj
                     COMMAND ${FXC} /Fo ${FILE_WE}.obj ${FILE} 
                     MAIN_DEPENDENCY ${FILE}
                     COMMENT "Effect-compile ${FILE}"
                     VERBATIM)
  add_dependencies(fx ${FILE_WE}.obj)
endforeach(FILE) 
```

不是 Windows 用户，我不确定这是否是正确的调用方式`fxc`，但您可以修改它。另请注意，这不会将目标文件链接到它们需要去的任何地方。此[邮件列表帖子](http://www.cmake.org/pipermail/cmake/2008-November/025541.html)可能会对您有所帮助。

# java - 在java中保存一个对象数组以供以后在另一个程序中使用

> ID：11924843
> 
> 赞同：1
> 
> 时间：2012-08-12T18:48:12.173
> 
> 标签：java, file

好的，所以我的问题是我在 java 中使用了很多程序，它们使用完全相同的对象数组，但我不想在每次编写新程序时都重新创建这个数组。有没有办法保存一组对象以供其他java程序使用。如果是这样怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T18:53:07.967

如果您是初学者，您应该将对象数组序列化到一个文件中。约定是命名您的序列化文件 name-of-file.ser

```
try
      {
     FileOutputStream fileOut = new FileOutputStream("card.ser");//creates a card serial file in output stream
     ObjectOutputStream out = new ObjectOutputStream(fileOut);//routs an object into the output stream.
     out.writeObject(array);// we designate our array of cards to be routed
     out.close();// closes the data paths
     fileOut.close();// closes the data paths
  }catch(IOException i)//exception stuff
  {
      i.printStackTrace();
} 
```

反序列化它使用这个：

```
try// If this doesnt work throw an exception
         {
            FileInputStream fileIn = new FileInputStream(name+".ser");// Read serial file.
            ObjectInputStream in = new ObjectInputStream(fileIn);// input the read file.
            object = (Object) in.readObject();// allocate it to the object file already instanciated.
            in.close();//closes the input stream.
            fileIn.close();//closes the file data stream.
        }catch(IOException i)//exception stuff
        {
            i.printStackTrace();
            return;
        }catch(ClassNotFoundException c)//more exception stuff
        {
            System.out.println("Error");
            c.printStackTrace();
            return;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:52:21.877

要序列化一个对象，请创建一个 ObjectOutputStream 并调用 writeObject。

```
// Write to disk with FileOutputStream
FileOutputStream f_out = new 
    FileOutputStream("myobject.data");

// Write object with ObjectOutputStream
ObjectOutputStream obj_out = new
    ObjectOutputStream (f_out);

// Write object out to disk
obj_out.writeObject ( myArray ); 
```

[参考](http://www.javacoffeebreak.com/articles/serialization/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T18:59:17.577

您可以序列化多种对象。是的，数组也是一个对象（@see Array 类）。如果你不想要数组的限制，你也可以使用容器类之一（例如 LinkedList）。序列化的工作方式相同。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-12T19:03:00.217

编写一个管理这个数组的类。将这个类以及它所依赖的类放在它自己的 JAR 中。在多个程序中重复使用 JAR。

如果您使用 Eclipse，您可以通过创建一个新的 Java 项目（我们称之为项目 OM - 来自对象模型）并将 Foo 和 FooManager 类放在那里来做到这一点。然后在每个要重用对象的项目中，在项目的 Build Properties 中将 OM 项目添加到类路径和导出选项卡中。而已。

# r - 非转义由 R XML 包生成的解析字符串？

> ID：11924844
> 
> 赞同：4
> 
> 时间：2012-08-12T18:48:18.033
> 
> 标签：r, xml-parsing, escaping

我一直在抄袭关于[使用 XML 包](https://stackoverflow.com/questions/1395528/scraping-html-tables-into-r-data-frames-using-the-xml-package)将 html 表抓取到 R 数据框中的非常有用的响应，以从网络上抓取一些 html 并在 R 中使用它。

XML 包似乎非常彻底地转义文本字符串中的非字母字符。在 XML 或其他一些包中是否有一种简单的方法可以反转通过 XML 传递我的数据所做的部分/全部转义字符？我开始自己做，但在遇到像“代表华昆卡斯特罗”这样的案例后，我想“一定有更好的解决方案……”

只是为了清楚起见，使用 XML 包来解析这个 HTML

```
 library(XML)
 apos_str <- c("<b>Tim O'Reilly</b>")
 apos_str.parsed <- htmlTreeParse(apos_str, error=function(...){})
 apos_str.parsed$children$html[[1]][[1]] 
```

会产生

```
 <b>Tim O&apos;Reilly</b> 
```

理想情况下，我想要一个可以搜索它的函数或包

```
&apos; 
```

并将其变回

```
'<b>Tim O'Reilly</b>' 
```

**编辑**为了澄清，从下面的评论中，我得到了如何针对撇号的特殊情况或我在数据中看到的任何其他字符执行此操作。我正在寻找的是一个有人更普遍地解决了这个问题的包。

到目前为止我所做的研究：

-阅读我可以在 XML[文档](http://cran.r-project.org/web/packages/XML/XML.pdf)中找到的关于转义的所有内容。

- 在 CRAN [NLP 页面](http://cran.r-project.org/web/views/NaturalLanguageProcessing.html)上寻找有前途的软件包。

- 在 SO 上搜索了“unes​​cape [R]”和“reverse escape [R]”。无法取得任何进展，所以我想我会在这里提出问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T19:01:35.407

我不确定我是否理解其中的困难。替换的字符串处理是使用基本的正则表达式函数完成的：sub、gsub、regexpr、gregexpr

```
?sub # the same help page will also discuss 'gsub'
txt <- '<b>Tim O&apos;Reilly</b>'
sub("\\&apos;", "'", txt)
[1] "<b>Tim O'Reilly</b>" 
```

如果您有一个出现在“&”和“;”之间的值列表 您可以拆分这些然后重新组合。我想你可能希望有人已经这样做了。您应该澄清您希望达到的抽象级别。

编辑：一位博主讨论了“&apos”的具体案例 [http://fishbowl.pastiche.org/2003/07/01/the_curse_of_apos/](http://fishbowl.pastiche.org/2003/07/01/the_curse_of_apos/)

我自己做了一些进一步的研究。这些不恰当地称为“转义”，而是“命名实体”。我在 rhelp 档案中找不到对它们的任何引用。我已经从 w3.org 网站下载了定义这些“实体”的 XML 列表，并试图转换为支持搜索和替换的表格形式。但你对“代表华昆卡斯特罗”的评论让我感到困惑。奇怪的字符不是“$#xxx”的形式，所以......你到底要什么？请发布具有预期输出的合适测试用例。

编辑 2：这是 Michael Friendly 提出的一个基本相同的问题，David Carlson 在 Rhelp 上回答了这个问题。这是 Rhelp 档案上的帖子链接：

[https://stat.ethz.ch/pipermail/r-help/2012-August/321478.html](https://stat.ethz.ch/pipermail/r-help/2012-August/321478.html)

他在创建翻译表方面已经做得比我做得更好，并且包含了通过 html 文本行进的代码。（还有奖金……他包括在内`&apos`）。Michael Friendly 在第二天的跟进中将这个过程包含在一个函数中。您可以点击档案页面上的链接。

# ibm-mq - MQ 发送方-接收方通道问题

> ID：11924845
> 
> 赞同：2
> 
> 时间：2012-08-12T18:48:33.367
> 
> 标签：ibm-mq

我有两台运行 Windows7 的 PC 通过 LAN 线连接（作为家庭组网络）。在两台 PC 中，我都安装了 MQ7.0。让我为它们命名：A 和 B 在 A 上，我定义了一个队列管理器 QMA。在 B 上，我创建了一个队列管理器 QMB。现在我在系统 A 上创建了一个发送通道：QMA.QMB，并在系统 B 上创建了一个接收通道：QMA.QMB。这设置工作正常。两个频道都在运行。我在系统 A 上配置了一个示例远程队列定义并检查了跟踪路由消息。

现在的问题是反向配置。我想创建从 B 到 A 的发送者-接收者通道。所以我按照类似的步骤来配置通道 QMB.QMA。在系统 B 上，发送方通道 (QMB.QMA) 不断重试。在系统 A 的接收器通道 (QMA.QMB) 上，它始终显示为非活动状态。我已经尝试了几个小时，但没有运气。请帮忙。

从两台机器正常工作的固定 IP 地址。我正在使用带有默认 1414 端口的 tcp。侦听器在两个系统上都已启动。一件奇怪的事情是，当我尝试在系统 A 上显示 chstatus(QMB.QMA) 时，它显示“未找到通道状态”。在系统 B 上，相同的命令显示通道状态和状态停止。我已经尝试过多次删除 - 重新创建频道。但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T22:15:19.647

首先要做的是查看连接请求是否甚至从 QMB 到达 QMA。签入`AMQERR01.LOG`文件`{WMQ Install Dir}/errors`并查看是否`{WMQ Install Dir}/QMgrs/QMA/errors`有任何失败的迹象。如果连接请求到达 QMA 但失败，您应该在`QMA/errors/AMQERR01.LOG`文件中看到它。如果它到达 WMQ 但没有到达 QMA，那么您将在 WMQ 全局日志中找到它`{WMQ Install Dir}/errors`。

如果您在这些日志之一*中*看到错误，它应该会告诉您问题所在。如果有日志条目但不能解决问题，请将错误日志条目作为此问题的附件发布。

如果您在这些日志之一中*没有*看到它，请查找配置错误。确保侦听器正在运行并且在您认为应该在的端口上。确保`CONNAME`指向正确的 IP 地址和端口。确保使用 IP 地址而不是 QMA 的主机名来排除名称解析。确保为正在侦听的端口打开 Windows 防火墙。转到 QMB 主机并尝试在 WMQ 端口上远程登录到 QMA 主机。如果连接立即被拒绝或在一两秒后关闭，则可能是防火墙问题。

# asp.net - 如何将实体框架对象绑定到列表视图

> ID：11924851
> 
> 赞同：1
> 
> 时间：2012-08-12T18:48:56.837
> 
> 标签：asp.net, .net, entity-framework

这是第一次在这里问，所以请帮助我表达我的意思。

首先我使用了一个实体框架，我想进行一个从 3 个表中检索数据的查询，然后将结果绑定到一个列表视图，这里的问题是页面上没有任何内容。这就是我所做的：

```
ITIEntities MyContext = new ITIEntities();
var Courses = MyContext.Courses;
var Instructors = MyContext.Instructors;
var Ins_Courses = MyContext.Ins_Course;
var Query= from Crs in Courses
           from Ints in Instructors
           from Instructor_courses in Ins_Courses
           where Crs.Crs_Id==Instructor_courses.Crs_Id
           && Instructor_courses.Ins_Id== Ints.Ins_Id
           select new 
           {
               Name=  Ints.Ins_Name,
               Salary=Ints.Salary,
               ListOfCourses=Crs.Crs_Name,
           };
MyListView.DataSource = Query;
MyListView.DataBind();            

MyContext.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:05:23.540

这里的问题是可枚举类型变量 Query 因此，如果要将结果绑定到列表视图，则必须为要显示的每一列定义具有 getter 和 setter 属性的实体公共类。

```
public Class ClassNameEntity
{

public string Name {get; set;}

} 
```

在 linq 查询中使用以下内容

```
 select new ClassNameEntity
{
Name= Ints.Ins_Name

}.ToList(); 
```

这将返回您定义的类对象列表的列表，因此直接绑定上层查询的结果。

```
ITIEntities MyContext = new ITIEntities();
            var Courses = MyContext.Courses;
            var Instructors = MyContext.Instructors;
            var Ins_Courses = MyContext.Ins_Course;
            List<ClassNameEntity> Query= from Crs in Courses
                       from Ints in Instructors
                       from Instructor_courses in Ins_Courses
                       where Crs.Crs_Id==Instructor_courses.Crs_Id
                       && Instructor_courses.Ins_Id== Ints.Ins_Id
                       select new ClassNameEntity
                       {
                           Name=  Ints.Ins_Name,
                           Salary=Ints.Salary,
                           ListOfCourses=Crs.Crs_Name,
                       }.ToList();
            MyListView.DataSource = Query;
            MyListView.DataBind();            

                MyContext.SaveChanges(); 
```

# java - 如何在edittext中保持文本颜色？

> ID：11924857
> 
> 赞同：0
> 
> 时间：2012-08-12T18:49:32.660
> 
> 标签：java, android, sharedpreferences

我有一个活动，它有计数按钮加减，这样它会增加或减少editText中的值，一个非负数。这样 int 值通过 setTextColor 属性设置为颜色。该值通过 Shared Preference 保持不变。我的问题是当再次进入应用程序时如何在 editText 中保持“彩色”绿色或红色值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:36:56.823

假设您的 EditText 名为`mEditText`. 首先设置一个 SharedPreferences 对象：

```
mSharedPreferences = getSharedPreferences("Preferences File Name", MODE_PRIVATE); 
```

保存颜色（可能在 onDestroy() 或颜色改变时）：

```
SharedPreferences.Editor editor = mSharedPreferences.edit();
editor.putInt("Text Color", mEditText.getTextColors().getDefaultColor());
editor.commit(); 
```

如果没有保存数据（可能在 onCreate() 中）读取保存的值，默认值为黑色：

```
mEditText.setTextColor(mSharedPreferences.getInt("Text Color", 0xff000000)); 
```

# ruby-on-rails - Rails 无法执行 rake 任务

> ID：11924858
> 
> 赞同：0
> 
> 时间：2012-08-12T18:49:42.597
> 
> 标签：ruby-on-rails, ruby, linux, rake

Rails 不会从我的控制器触发 rake 命令，因为它找不到 rake。我知道这一点，因为我在我的开发环境中经历了这一点，并通过为其提供绝对路径来修复它。但是，此解决方案不适用于我的生产环境。

我知道的事情：

1.  我可以运行 rake 任务 rom cli
2.  我可以通过 irb 运行它：system "rake ..."
3.  我找不到任何错误！

耙子：

```
/usr/lib/ruby/1.9.1/rake
/usr/lib/ruby/gems/1.9.1/bin/rake
/usr/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake
/usr/lib/ruby/gems/1.9.1/gems/rake-0.9.2/bin/rake
/usr/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake
/usr/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/bin/rake
/usr/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake
/usr/lib/ruby/gems/1.9.1/gems/rake-0.8.7/bin/rake
/usr/bin/rake
/var/lib/gems/1.8/bin/rake
/var/lib/gems/1.8/doc/rake-0.9.2.2/rdoc/lib/rake
/var/lib/gems/1.8/gems/rake-0.9.2.2/lib/rake
/var/lib/gems/1.8/gems/rake-0.9.2.2/bin/rake
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake
/var/lib/gems/1.8/gems/rake-0.8.7/bin/rake
/var/lib/gems/1.8/gems/sprockets-2.3.1/lib/rake 
```

我该怎么解决这个问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:47:13.460

我在生产中调用的 rake 任务失败，因为我试图将其内容转储到禁用记录器的日志中。

```
system "rake invite INVITE_ID=5 RAILS_ENV=production >> /root/log/rake.log &" 
```

感谢您的所有帮助...抱歉如此含糊。我只是在寻找快速响应，希望我在做一些愚蠢的事情。我就是。我发誓我在没有日志条目的情况下尝试过......可能像我往常一样移动得太快了。

另外，只是为了回答几个问题。我正在使用的 rake 任务是一个内部工具，我自己使用它来进行一些维护，并且想简单地将该任务卸载给使用我构建的应用程序的同事。无需使用调度程序等将其工业化......

# http - 当套接字要关闭时，HTTP 服务器向客户端发送什么？

> ID：11924862
> 
> 赞同：0
> 
> 时间：2012-08-12T18:50:15.950
> 
> 标签：http, webserver

按照标题。我一直在谷歌搜索，但一无所获。我已经尝试过 HTTP/1.1 的 RFC 定义，但是它是一个非常复杂的文档。服务器会发送任何东西吗？（现在是提一下我想使用持久连接的好时机吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:20:01.553

使用 HTTP/1.1 持久连接，连接可能会在请求后保持打开状态，通常持续几秒钟。一旦过了一段时间，TCP 连接就会简单地关闭。没有消息或任何东西被发送。不需要。

如果您启动数据包嗅探器（例如[Wireshark](http://www.wireshark.org/download.html) ），您可以自己轻松地看到这一点。

# ios - iOS 地图中的自行车路线建议 - 哪个 API？

> ID：11924865
> 
> 赞同：0
> 
> 时间：2012-08-12T18:50:33.580
> 
> 标签：ios, maps

哪个是为 iOS 应用程序获取自行车路线的最佳解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T19:25:24.873

谷歌地图在许多城市提供自行车路线。我认为这是一个非常好的选择。

# asp.net-mvc - 使用 MVC4 上传无法正常工作。IO 错误

> ID：11924866
> 
> 赞同：0
> 
> 时间：2012-08-12T18:50:40.920
> 
> 标签：asp.net-mvc, flash, uploadify

我正在使用 Uploadify 3.1 版。当我尝试上传文件时，我收到 IO 错误。

当我将调试器保持在操作方法中时，它没有命中。

我尝试了以下链接，但甚至想到了同样的错误。

[在 Asp.net MVC 应用程序上使用 uploadify 时出现 HTTP 错误](https://stackoverflow.com/questions/8358223/getting-http-error-while-using-uploadify-on-asp-net-mvc-application)

请建议我。

**看法**

```
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link href="@Url.Content("~/uploadify/uploadify.css")" rel="stylesheet" type="text/css" />
</head>
<body>
    <div id="file_upload"></div>

    <script src="@Url.Content("~/Scripts/jquery-1.6.2.js")" type="text/javascript"></script>
@*    <script src="@Url.Content("~/uploadify/swfobject.js")" type="text/javascript"></script>*@
    <script src="@Url.Content("~/uploadify/jquery.uploadify-3.1.js")" type="text/javascript"></script>
    <script type="text/javascript">
        $('#file_upload').uploadify({
            'uploader': '@Url.Content("~/uploadify/uploadify.swf")',
            'flash_url': '@Url.Content("~/uploadify/uploadify.swf")',
            'fileObjName': 'fileData',
            'script': '@Url.Action("Upload", "Home")',
            'cancelImg': '@Url.Content("~/uploadify/cancel.png")',
            'folder': '@Url.Content("~/content/images")',
            'fileDesc': 'Image Files',
            'fileExt': '*.jpg;*.jpeg;*.gif;*.png',
            'auto': true
        });    
    </script>
</body>
</html> 
```

**[控制器]**

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";

        return View();
    }
}

[HttpPost]
public ActionResult Upload(HttpPostedFileBase fileData)
{
    if (fileData != null && fileData.ContentLength > 0)
    {
        var fileName = Server.MapPath("~/Content/Images/" + Path.GetFileName(fileData.FileName));
        fileData.SaveAs(fileName);
        return Json(true);
    }
    return Json(false);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:13:42.787

试试这样：

```
 $('#file_upload').uploadify({
            'checkExisting': 'Content/uploadify/check-exists.php',
            'swf': '@Url.Content("~/uploadify/uploadify.swf")',
            'uploader': '@Url.Action("Upload", "Home")',
            'auto': false,
            'buttonText': 'Browse',
            'fileTypeExts': '*.jpg;*.jpeg;*.png;*.gif',
            'removeCompleted': false
         }); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:14:34.537

您是否检查了要上传文件的文件夹的文件夹权限？您还需要将该文件夹的权限设置为 IIS 用户和网络用户

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T05:23:30.047

检查您的控制器，操作必须是**AllowAnonymous**。

# php - AS3 SecurityError #2048 Mac 与 Windows

> ID：11924867
> 
> 赞同：1
> 
> 时间：2012-08-12T18:50:54.263
> 
> 标签：php, actionscript-3, security, sandbox

在将 Sprite 保存到我的服务器时，我似乎遇到了一个有趣的问题。当我在我的 MAC 上运行 swf（远程）时，它工作正常，但是当我从我的 windows 计算机运行完全相同的 URL 时，我得到一个 #2048 SecurityError。

这是我的 AS3 代码：

```
 public function saveSprite(s:Sprite):void {
        var bmpData:BitmapData = new BitmapData(s.width, s.height, true, 0xFFFFFF);
        bmpData.draw(s);
        var byteArray:ByteArray = PNGEncoder.encode(bmpData);
        var encodedFile:Base64Encoder = new Base64Encoder();
        encodedFile.encodeBytes(byteArray);

        var data:URLVariables = new URLVariables();
        data.fileData = encodedFile;
        data.fileName = "test.png";
        data.location = "temp/";

        var request:URLRequest = new URLRequest(scriptLocation);
        request.method = URLRequestMethod.POST;
        request.data = data;

        var loader:URLLoader = new URLLoader();
        loader.addEventListener(Event.COMPLETE, errorLog);
        loader.addEventListener(Event.OPEN, errorLog);
        loader.addEventListener(HTTPStatusEvent.HTTP_STATUS, errorLog);
        loader.addEventListener(IOErrorEvent.IO_ERROR, errorLog);
        loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, errorLog);
        loader.addEventListener(ProgressEvent.PROGRESS, errorLog)

        try {
            loader.load(request);
        } catch (e:*) {
            debug.updateLog(e + "\n");
        }
    }

    private function errorLog(e:*):void {
        debug.updateLog(e + "\n");
    } 
```

AS3 与以下一行 PHP 文件连接：

```
<?php file_put_contents($_POST['location'] . $_POST['fileName'], base64_decode($_POST['fileData'])); 
```

当我在我的 Mac 上运行 SWF 时，输出如下： Log Start [Event type="open" bubbles=false cancelable=false eventPhase=2] [ProgressEvent type="progress" bubbles=false cancelable=false eventPhase=2 bytesLoaded =7 bytesTotal=0] [HTTPStatusEvent type="httpStatus" bubbles=false cancelable=false eventPhase=2 status=200 responseURL=null] [Event type="complete" bubbles=false cancelable=false eventPhase=2]

在 Windows 上，我得到以下输出： Log Start [HTTPStatusEvent type="httpStatus" bubbles=false cancelable=false eventPhase=2 status=0 responseURL=null] [SecurityErrorEvent type="securityError" bubbles=false cancelable=false eventPhase= 2 文本="错误 #2048"]

对此的任何想法将不胜感激。我自己的猜测是具有文件权限的东西，但是什么？

提前致谢！

[编辑] 它变得更有趣。1\. 当我将整个项目移动到不同的服务器时，我在 windows 和 mac 上得到 #2048。2\. 如果我将文件权限更改为 777，我在 windows 和 mac 上也会得到 #2048。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:05:26.113

最后！我已经找到了。

将 crossdomain.xml 添加到我的网络服务器的根目录解决了这个问题。对我来说这似乎很奇怪，因为我访问的 php 文件在同一台服务器上，所以这解决了问题。不仅如此，它还在同一个文件夹中！

似乎在 MAC OSX 下，flashplayer 识别出请求在同一个域内，但在 windows 下却不能这样做。这可以解释为什么在 Windows 下安全错误是 trow。这导致我的 swf 在 MAC 下工作，但不能在 Windows 机器上工作。现在，我已将以下 crossdomain.xml 文件添加到服务器的根目录：

```
<?xml version="1.0" ?>

<cross-domain-policy>
    <site-control permitted-cross-domain-policies="master-only"/>
    <allow-access-from domain="*.mydomain.com" to-ports="*"/>
    <allow-http-request-headers-from domain="*.mydomain.com" headers="*"/>
</cross-domain-policy> 
```

如果您想使用此解决方案，请将“mydomain.com”更改为您要允许的特定域。在此处阅读有关 crossdomain.xml 以及如何使用它的所有内容：[http ://learn.adobe.com/wiki/download/attachments/64389123/CrossDomain_PolicyFile_Specification.pdf?version=1](http://learn.adobe.com/wiki/download/attachments/64389123/CrossDomain_PolicyFile_Specification.pdf?version=1)

正如我在问题中所述，捕获了以下错误： [SecurityErrorEvent type="securityError" bubbles=false cancelable=false eventPhase=2 text="Error #2048"]

请注意，通常错误包含： [SecurityErrorEvent type="securityError" bubbles=false cancelable=false eventPhase=2 text="Error #2048: Security Sandbox Violation : [http://www.domain1.com/file.swf](http://www.domain1.com/file.swf) can not load数据来自[http://www.domain2.com/file](http://www.domain2.com/file) .*"]

在我的案例中缺少部分错误的事实可能表明请求了同一域中的文件。

所以 crossdomain.xml 成功了！我希望这个答案会对某人有所帮助。

快乐编码！

# java - 使用 OnTouchListener 在网格视图中交换图像

> ID：11924868
> 
> 赞同：0
> 
> 时间：2012-08-12T18:51:14.657
> 
> 标签：java, android

我正在制作一个需要在网格视图中交换图像的应用程序。这是代码......我怎么能实现交换：

活动

```
public class GameActivity extends Activity
    implements OnTouchListener  
{

     @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //Intent intent = getIntent();
    setContentView(R.layout.layout_game);

    //create grid view
    splitImage(); 
    GridView gridView = new GridView(this);
    gridView = (GridView)findViewById(R.id.grid_view);   
    final ImageAdapter images = new ImageAdapter(this,chunkedImages);
    final GridView gV = gridView;
    gridView.setAdapter(images);
    gridView.setOnTouchListener(this);

}

public boolean onTouch(View v, MotionEvent me) {

    switch(me.getAction())
    {

    case MotionEvent.ACTION_DOWN :

        Toast.makeText(GameActivity.this, "down ", Toast.LENGTH_SHORT).show();
        break;
    case MotionEvent.ACTION_UP :

        Toast.makeText(GameActivity.this, "up " , Toast.LENGTH_SHORT).show();
        break;
    case MotionEvent.ACTION_MOVE :
        //Toast.makeText(GameActivity.this, "move", Toast.LENGTH_SHORT).show();
        break;
    }
    return true;
}

 } 
```

触摸图像时，它会吐司掉下来，然后移开手指就会放弃。但是如何交换图像我无法理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:48:15.237

我建议使用 OnItemClicklistener 触摸两个不同的图像来交换它们。像这样：

```
private int firstPosition = -1;
...

gridView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        if(firstPosition < 0) 
            firstPosition = position;
        else {
            Bitmap swapImage = chunkedImages.get(position);
            chunkedImages.set(position, chunkedImages.get(firstPosition));
            chunkedImages.set(firstPosition, swapImage);
            firstPosition = -1;
        }
    }
}); 
```

您应该添加功能，例如在选择第一张图像时突出显示它，但这是基本方法。

如果你想拖放，你需要做更多的工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T20:00:51.207

正确的交换方式可能在适配器中完成。创建您自己的基本适配器或从任何其他适配器继承，并包括将从活动中调用的任何用于刷卡的方法。在此方法中，您可以执行必要的更改以成功交换。最终，您将能够使用[Collections.swap交换数组中的项目](http://developer.android.com/reference/java/util/Collections.html#swap%28java.util.List%3C?%3E,%20int,%20int%29)

希望它有所帮助 *如果有必要，请不要忘记在源准备好时更新您的组件（[notifyDatasetChanged](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged%28%29)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:41:53.037

[https://github.com/thquinn/DraggableGridView](https://github.com/thquinn/DraggableGridView)

这是一个解决方案。可能符合您的要求。一探究竟

# php - 从 Linux 守护程序插入到客户端 Web 浏览器的 MySQL 数据的推送通知系统

> ID：11924869
> 
> 赞同：1
> 
> 时间：2012-08-12T18:51:15.270
> 
> 标签：php, mysql, websocket

在互联网上花了几个小时寻找有关 Web 应用程序的推送通知系统后，我有了一些结论，也对它感到好奇..

当我们在寻找这种通知技术时，我们会一遍又一遍地看到“websocket”术语。特别是在这个 HTML 5 时代。

但是，看到这个演示后：[http ://www.websocket.org/echo.html](http://www.websocket.org/echo.html)

我刚刚意识到的一件事是：websocket 会将通知从一个浏览器推送到另一个浏览器。这里不涉及数据库。

如果就我而言，我有一个由 Linux 守护程序（不是 Web 浏览器）定期插入的数据库，但我希望它被推送到客户端的 Web 浏览器，该怎么办？如何用 websocket 做到这一点？或者这是 websocket 技术的局限性？如果是这样，我的情况有什么解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T19:10:13.100

这取决于您用来处理 websocket 请求的服务器。您将需要开发服务器以检查/推送数据库更新到客户端。

`What if, in my case, I have a database regularly inserted by Linux Daemon (not a web browser) but I want it to be pushed to client's web browser? how to do that with websocket?`

你不能用 websockets 来做这件事；javascript websockets 是客户端实现。你需要在你的服务器上处理这个问题（也许让插入守护进程向服务器应用程序发送一个信号，或者让服务器代码定期检查数据库的更新）。

你可能想玩一些[mod_pywebsocket](http://code.google.com/p/pywebsocket/)来给你一些想法。另请参阅[为什么我们需要网络套接字？](https://stackoverflow.com/questions/3617583/why-do-we-need-web-sockets?rq=1)帮助您了解 websocket 的真正含义。

Websockets 只是与服务器的开放连接。这有点像打电话给某人并让他们说“请稍等”。连接是开放的，但是一旦他们有话要和你谈谈，而不是必须先拨打你的电话然后等待你接听，他们只需拿起听筒并开始交谈。websockets也是如此；一旦服务器准备好数据，我只需将其发送给客户端（反之亦然）。这避免了对服务器进行大量 AJAX 调用。

所以 websockets 可以做任何事情；限制不是连接，而是您对客户端和服务器进行编程的程度。

# java - 关键部分在 onSensorChanged() 中不起作用

> ID：11924873
> 
> 赞同：1
> 
> 时间：2012-08-12T18:51:57.857
> 
> 标签：java, android, multithreading, android-sensors

我是 Android 开发的新手。我正在构建一个简单的 Android 应用程序，它可以分析`accelerometer sensor`数据并使用`MediaPlayer`. 实现代码`SensorEventListener`：

```
 class AccelListener implements SensorEventListener {
        boolean firstUpdate = true;
        volatile boolean stopped = true;
        private MediaPlayer mplayer;
            //some variables to store calculations

        public AccelListener(MediaPlayer mediaplayer) {
            mplayer = mediaplayer;
            mplayer.setOnCompletionListener(new OnCompletionListener() {
                public void onCompletion(MediaPlayer mp) {
                    if (mplayer == mp) {
                        synchronized (AccelListener.this) {
                            stopped = true;
                        }
                        Log.d("MediaPlayer Callback", "stopped=" + stopped);
                    }
                }
            });
        }

    public void onSensorChanged(SensorEvent event) {
        updateAccel(event.values);
        if (isAccelChanged()) {
            Log.d("Accel Listener", "stopped_before=" + stopped);
            synchronized (this) {
                if (stopped) {
                    stopped = false;
                    firstUpdate = true;
                    mplayer.start();
                    Log.d("Accel Listener", "stopped_after=" + stopped);
                }
            }
        }
    }    
} 
```

问题是当我启动应用程序并开始摇动手机时，声音会同时播放好几次。音频文件大约 3-4 秒长，所以它不可能播放到最后，然后对下一次震动做出反应。

Logcat 显示以下内容：

```
08-12 22:16:24.693: D/Accel Listener(5382): stopped_before=true
08-12 22:16:24.693: D/Accel Listener(5382): stopped_after=false
08-12 22:16:24.693: D/Accel Listener(5382): stopped_before=true
08-12 22:16:24.703: D/Accel Listener(5382): stopped_after=false
08-12 22:16:28.777: D/MediaPlayer Callback(5382): stopped=true
08-12 22:16:28.777: D/MediaPlayer Callback(5382): stopped=true 
```

`onSensorChanged()`和中的关键部分`onCompletion()`被锁定在同一个对象上（我`AccelListener`在程序中只创建了一个实例），所以不应该并行访问`stopped`.

此外，此变量被声明为`volatile`，因此任何输入关键变量的人都应该有一个新的、最新的值。但似乎两个不同的线程*实际上同时进入了临界区*，它们都具有相同的标志值。这怎么可能发生，我错在哪里？

PS[这里](https://stackoverflow.com/questions/3993705/problems-with-onsensorchanged-method "这里")的那个人似乎也有同样的问题，但没有一个解决方案`MediaPlayer`适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:13:05.300

假设您进入“isAccelChanged() if”内部，则无论stopped 的值如何，您总是在“onSensorChanged”内启动播放器中的声音（它在if 之外，并且在同步块之外）。

如果您确定只有一个实例，则可以摆脱“同步”。

检查并回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:04:22.983

问题解决了。我没有取消注册`AccelListener`，而且调试器似乎没有正确停止程序的运行版本。每个连续`Run`的命令刚刚启动主活动，它实例化`AccelListener`，注册它，等等。添加以下代码修复了整个问题：

```
@Override
protected void onPause() {
    super.onPause();
    sensMgr.unregisterListener(grListener);
}

@Override
protected void onResume() {
    super.onResume();
    sensMgr.registerListener(grListener,
            sensMgr.getDefaultSensor(Sensor.TYPE_LINEAR_ACCELERATION),
            SensorManager.SENSOR_DELAY_GAME);
} 
```

# php - Jquery Hide Div（需要替代）

> ID：11924876
> 
> 赞同：1
> 
> 时间：2012-08-12T18:52:19.117
> 
> 标签：php, javascript, jquery, css

我的网站有一个功能，用户可以从下拉框中选择音频，当他们这样做时`$.post`，它会输出一个带有音频播放器的 div（自动启动）。我遇到的问题是我不希望用户看到该音频播放器，当我使用`.hide();`音频播放器时，它在 Firefox 中不起作用，但在其他浏览器中起作用。如果我将音频播放器宽度设置为 0px，它将无法在 safari 中使用。我尝试通过css格式化div

`#sound { width:0px; height:0px; }`但它不会产生任何影响（是的，名称是正确的）。那么有没有其他方法可以隐藏 div 并使其在所有浏览器上运行。顺便说一句，音频播放器是 flash swf 文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T18:55:36.017

```
$('#sound').css({position: 'absolute', width: '1px', height: '1px', left: '-999px', top: '-999px'}); 
```

或者

```
$('#sound').css('opacity', 0); 
```

两者都是黑客，虽然

**在一些评论之后添加**（不确定是否适合他）：

```
$('#sound').css({position: 'absolute', width: '1px', height: '1px', overflow: 'hidden'}).find('embed, object').css('margin-left', '1px'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T18:55:07.150

您没有尝试使用`display:none;`or的 CSS 属性吗`visibility:hidden;`？您甚至可以在浏览器检测中设置这些属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T18:54:44.530

尝试这个：

```
$('#sound').css('visibility', 'hidden').hide(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T18:55:07.140

尝试`opacity:0;`或`visibility:hidden;`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-12T18:55:14.030

如果您隐藏 Flash 电影，大多数浏览器都足够聪明，可以理解不需要对其进行初始化。

因此，您可以给它一个非常小的宽度和高度，在嵌入它时将 wmode 参数设置为透明或不透明（这允许您在其上放置 HTML 元素），然后在 Flash 影片的顶部放置一个白色 div。将 html 元素放在 flash 顶部以覆盖它不会被视为隐藏，没有浏览器那么*聪明*。*然而*:-)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-12T18:57:39.950

#sound 是音频播放器本身还是它的包装？我相信如果你隐藏一个包装 div，它可以工作。

# c# - 一对多级联删除沿多对多导致异常

> ID：11924887
> 
> 赞同：0
> 
> 时间：2012-08-12T18:53:34.857
> 
> 标签：c#, entity-framework-4, ef-code-first

在我添加 WillCascadeOnDelete(true) 之前，我的代码运行良好。

异常： InvalidOperationException - 数据库创建成功，但数据库对象的创建没有成功。有关更多详细信息，请参阅内部异常。

内部异常：System.Data.SqlServerCe.SqlCeException - 引用关系将导致不允许的循环引用。[ 约束名称 = User_AdministratorOf_Target ]

最小复制（在新的 MVC3 Web 应用程序项目中）：

```
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Data.Entity;

public class User
{
    [Key]
    public string UserName { get; set; }
    public virtual ICollection<Document> Documents { get; set; }
    public virtual ICollection<Document> AdministratorOf { get; set; }
}

public class Document
{
    public int Id { get; set; }
    public User Owner { get; set; }
    public ICollection<User> Administrators{ get; set; }
}

public class EntityMappingContext : DbContext
{
    public DbSet<User> Users { get; set; }
    public DbSet<Document> Documents { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>()
            .HasMany(x => x.AdministratorOf)
            .WithMany(x => x.Administrators)
            .Map(x =>
            {
                x.MapLeftKey("UserName");
                x.MapRightKey("Document");
                x.ToTable("DocumentAdministrators");
            });
        modelBuilder.Entity<Document>()
            .HasRequired(x => x.Owner)
            .WithMany(x => x.Documents)
            .WillCascadeOnDelete(true);
        base.OnModelCreating(modelBuilder);
    }

} 
```

当然，还必须在 connectionStrings 下将 SQL 连接字符串添加到 web.config 中：

```
<add name="EntityMappingContext" connectionString="Data Source=|DataDirectory|Error.sdf" providerName="System.Data.SqlServerCe.4.0"/> 
```

当一对多关系已经存在时，删除时启用级联如何创建循环关系？是不是说级联删除有循环？当我指定的唯一级联是用户 - >文档时，如何？我如何解决它？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T20:16:44.350

级联删除错误不一定是由于循环关系，而是由于在删除树中对同一个表有多个引用，请参见[这篇文章](http://weblogs.asp.net/manavi/archive/2011/01/23/associations-in-ef-code-first-ctp5-part-3-one-to-one-foreign-key-associations.aspx)。

触发器是删除：

*   用户 -> 文档 -> 文档管理员
*   用户 -> 文档管理员。

通过删除一个用户，它会触发多对多表的删除两次，给你错误。最好只删除业务逻辑中属于所有者的所有文档。

# image-processing - 使用连接组件标记的文本检测

> ID：11924888
> 
> 赞同：0
> 
> 时间：2012-08-12T18:53:37.717
> 
> 标签：image-processing, edge-detection

我正在创建一个项目，我必须在其中检测图像中的文本区域并定位文本行。这个我还没有实现，在这个项目中，在初始图像预处理之后，我会生成一个边缘图，然后使用 CCL（两遍算法）来定位文本行。

我的问题是在边缘检测部分之后将检测到所有边缘，包括那些不是文本的边缘，那么如何过滤掉非文本区域？请帮忙，这是我第一次做这样的事情。

原谅我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T21:26:44.970

我希望你在谈论光学字符识别算法......这是matlab [OCR中示例代码的链接](http://www.mathworks.com/matlabcentral/fileexchange/18169)

您没有指定您正在使用的平台，如果是 opencv 这里是简单教程 [OCR_opencv的链接](http://blog.damiles.com/2008/11/basic-ocr-in-opencv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T19:48:06.743

您可以使用高斯滤波器去除噪声，然后使用 Sobel 滤波器检测边缘，然后使用非最大抑制来消除弱边缘，最后使用滞后阈值使边缘变为白色和背景黑色:)

# javascript - Force Directed 图可视化：是否可以确保某些节点彼此之间的距离比其他节点更近？

> ID：11924889
> 
> 赞同：0
> 
> 时间：2012-08-12T18:53:42.197
> 
> 标签：javascript, graph-visualization, graph-drawing, force-based-algorithm

我正在做这个项目，我正在分析一个人与他的 Twitter 朋友和追随者的“亲密程度”。接近度是根据主题提及他人或被他人提及的次数来衡量的。

最后，我有这个连接的“权重”指标。我想为同一主题创建一个可视化，其中主题位于中心并被他的朋友/追随者包围。我希望权重较高的朋友/追随者更接近主题，并且随着连接权重的降低，它会越来越远离主题。

我目前正在使用[Graph Dracula](http://www.graphdracula.net/)来生成相同的力有向图。是否有可能确保某些节点总是比其他节点更接近主题，或者我对力导向图可视化的理解都是错误的？

它是一个开源项目，您可以在[此处](https://github.com/ekanshpreet/data-portraits)找到，如果您想查看它的实际效果，请在[此处](http://nsitonline.in/ekansh/berkman)尝试。

它绝不是完整的，因此请忽略（或报告）任何错误或您可能发现的任何内容。是的，目前只有 Chrome。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:26:15.493

当然有可能；基本上你要做的就是应用一个考虑边缘重量的力函数。如果您正在使用的实现不支持提供您自己的强制功能，您可能只想破解它（如果您觉得自己是一个负责任的社区成员，可以提交一个补丁）。

# c# - 泛型函数中的一些特定类型

> ID：11924891
> 
> 赞同：-2
> 
> 时间：2012-08-12T18:53:45.063
> 
> 标签：c#, generics

我想做一个函数，我不想用不同的类型写很多次。我可以使用“在哪里”和“告诉它”我想要我写的特定类型之一吗？顺便说一句，我需要一个处理整数的函数和另一个处理浮点数的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:01:37.593

不，你不能。您可以为类型参数应用特定的约束，例如它必须是不可为空的值类型，或者它必须是一个类，或者它必须实现一个接口或其他任何东西......但你不能指定一组类型并说它一定是其中之一。

即使你*可以*这样做，我怀疑它不会做你想做的事——因为我希望你想对这些类型执行算术。

两种选择：

*   如果您使用的是 C# 4，则可以使用动态类型。它不会给你编译时的安全性，但如果你小心的话，它会起作用。
*   您可以在[MiscUtil](http://pobox.com/~skeet/csharp/miscutil)中使用 Marc Gravell 的[通用运算符](http://www.yoda.arachsys.com/csharp/miscutil/usage/genericoperators.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T19:01:55.460

您不能静态地将函数限制为仅采用浮点数或整数。为此，您必须在函数内手动检查参数类型。

# parsing - 不确定的、不友好的语法？

> ID：11924893
> 
> 赞同：1
> 
> 时间：2012-08-12T18:53:54.013
> 
> 标签：parsing, grammar, context-free-grammar, non-deterministic, glr

根据[维基百科 GLR 的描述](http://en.wikipedia.org/wiki/GLR_parser)，它们*“处理非确定性和模棱两可的语法”。* 我可以想象一个模棱两可的语法，就像[悬空的 else 问题一样](http://en.wikipedia.org/wiki/Dangling_else)，但是什么是不模棱两可的非确定性 CF 语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T19:57:05.303

几乎任何非 LR(k) 语法都是不确定的，但不一定是模棱两可的。明显的例子是当你有一些可以用两种方式解析的任意大的构造时，哪个是正确的取决于大构造之后的东西。例如：

```
S ::= A x | B y
A ::= A a | a
B ::= B a | a 
```

但是，如果可以组合解析大型构造的两种方法，则通常可以对此类非确定性语法进行修改以使其具有确定性（就像`S ::= A x | A y`上述语法一样，它是解析相同语言的确定性方法。）

更有趣的是本质上是非确定性的 LANGUAGES——即该语言没有确定性语法。为此，在任意大的构造中需要有一些东西需要与后面的内容相匹配。例如：

```
S ::= X x | Y y
X ::= a X a | x
Y ::= a Y a | y 
```

# spring - sessionFactory 只在 applicationContext-security.xml 中调用过一次？

> ID：11924894
> 
> 赞同：0
> 
> 时间：2012-08-12T18:54:05.917
> 
> 标签：spring, hibernate, security, login

我不确定atm的一个问题，我已经通过用户表休眠处理我的登录。如果在应用程序运行时操作此表，则登录端不会发生任何更改（但是它们在表上进行，我为此使用 ZK 并且可以正确查看更改）。因此，如果我使用以下方式登录：管理员密码

然后把密码改成newpassword

我必须清理并构建应用程序，然后在登录发生更改之前运行它。所以换句话说我认为它只检查用户表数据一次，把它保存在某个地方？

无论如何，我认为代码可能会有所帮助：

applicationContext-security.xml 的片段

```
<beans:bean id="sesFactory"
  class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <beans:property name="configLocation">
        <beans:value>classpath:\hibernate.cfg.xml</beans:value>
    </beans:property>
</beans:bean>

<beans:bean id="userDAO" class="login.UserLoginDAOImpl">
            <beans:property name="sessionFactory" ref="sesFactory"></beans:property>
</beans:bean>

<beans:bean id="userService" class="login.UserLoginService">
    <beans:property name="userDAO" ref="userDAO"></beans:property>
</beans:bean> 

<authentication-manager>
     <authentication-provider user-service-ref="userService">
        <!--<password-encoder hash="sha" />-->
     </authentication-provider>      
</authentication-manager> 
```

休眠.cfg.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
 "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
 "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
<session-factory>
    <!-- Database connection settings -->
    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="connection.url">jdbc:mysql://localhost:3306/test</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password">admin</property>

    <!-- JDBC connection pool (use the built-in) -->
    <property name="connection.pool_size">1</property>

     <!-- Enable Hibernate's automatic session context management -->
    <property name="current_session_context_class">thread</property>

    <!-- Disable the second-level cache -->
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

    <!-- SQL dialect -->
    <property name="dialect">org.hibernate.dialect.MySQLDialect</property>

    <!-- Echo all executed SQL to stdout -->
    <property name="show_sql">true</property>

    <mapping class="contacts.Contacts" />
    <mapping class="login.Users" />
</session-factory>
</hibernate-configuration> 
```

UserLoginDaoImpl:

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
  package login;

import java.util.List;

import org.hibernate.SessionFactory;
import org.springframework.orm.hibernate3.HibernateTemplate;

/**
 * The Class UserLoginDAOImpl
 */
public class UserLoginDAOImpl implements UserLoginDAO {

/** The hibernate template. */
private HibernateTemplate hibernateTemplate;

/**
 * Sets the session factory.
 * 
 * @param sessionFactory
 *            the new session factory
 */
public void setSessionFactory(SessionFactory sessionFactory) {
    this.hibernateTemplate = new HibernateTemplate(sessionFactory);
}

@Override
public Users loadUserByName(String name) {
    if (name != null && !name.equals("")) {

        List<Users> usr = hibernateTemplate
                .find("from Users where username ='" + name + "'");
                        System.out.println(usr.get(0));
        if (usr.size() == 1) {
            return usr.get(0);
        } else {
                        System.out.println("USER SIZE IS INCORRECT");
            return null;

        }
    } else {
        return null;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T20:05:50.107

我绝不是 Hibernate 方面的专家，但我认为

`<property name="current_session_context_class">thread</property>`

行是不必要的，会影响事务管理器的行为：参见[spring、hibernate 和声明性事务实现：没有活动事务](https://stackoverflow.com/questions/4138663/spring-hibernate-and-declarative-transaction-implementation-there-is-no-active)

[PS Spring 通过 AnnotationSessionFactoryBean 管理事务，并且可能在您的 UserLoginDAOImpl 和 UserLoginService 类中发生一些有趣的事情。]

# java - 从扩展可运行的类列表中删除项目是否会终止其线程？

> ID：11924897
> 
> 赞同：0
> 
> 时间：2012-08-12T18:54:31.923
> 
> 标签：java, list, timer, runnable

我正在用 Java 编写一个聊天服务器。我使用了一个固定的可运行类数组，其中数组中的每个元素都代表一个客户端。创建的线程处于从套接字流读取的无限循环中。

现在我想用一个列表来做，所以我不必担心数组的大小，而且这听起来更合法。但是我不能确定删除一个项目是否也会终止线程。其实我不知道它是做什么的。另外，我想知道在这种情况下使用列表是否还有其他可能的问题。最后，Timer 数组怎么样？由于我已经为每个客户端使用了 Timer，所以从 Timer 列表中删除 Timer 是否也会停止其日程安排？有什么可能的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:57:47.733

一个对象本身就存在——将对该对象的引用存储在一个列表中不会改变它的行为。

因此，如果您有一个在线程中运行的 Runnable 任务，将其添加到列表中/从列表中删除它不会对该 Runnable 产生影响，并且线程将继续运行它。

这同样适用于 Timer 和任何其他对象。

旁注：在一种情况下，从列表中删除对象会产生影响：如果该对象只能通过该列表访问。被删除后，因为它不再可达，它变得有资格进行垃圾收集。但这不适用于正在运行的线程或活动计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:58:37.350

你有一个线程对象。对它的引用被插入到数组中。从数组（即线程）中添加或删除引用不会导致任何未知的副作用，所以你很好。如果你想停止线程，你将不得不在你的`run`方法内部实现它。垃圾收集在这里不是问题。

定时器又是同样的问题：它们都是对象引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T19:00:02.147

正在运行的线程被认为是所谓的垃圾收集根。任何作为根或可以（间接）从根引用的东西都不会被垃圾收集。当垃圾收集器确定您的对象是否“可达”时，它总是使用垃圾收集器根集作为参考点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T18:59:05.400

嘿，我会[参考这个问题！](https://stackoverflow.com/questions/6409262/when-wil-the-new-thread-without-reference-be-garbage-collected)

如果线程被启动，它不会被垃圾收集，因为它被包含线程引用。

如果它已完成或尚未启动，它将被垃圾收集！

这样做的原因是，当启动线程对象时，它会被添加到当前线程对象中`ThreadGroup`（在幕后有点复杂:)），当它完成时，它会自动删除。

# javascript - 网络分析信标

> ID：11924898
> 
> 赞同：0
> 
> 时间：2012-08-12T18:54:36.900
> 
> 标签：javascript, web, analytics

我想知道为什么网络分析软件使用 1x1 gif 元素来发送信标，而不是简单地包含一个

`<script src='http://my.analytics.com/script.js?my=params'></script>`

元素来发送信标，从而避免必须实际返回 1x1 像素 gif，因为空响应将是有效的 javascript 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:58:37.553

原因之一可能是即使没有激活 javascript 的用户也会加载 .gif。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T18:58:08.433

最有可能满足禁用 javascript 的场景。

# assembly - MASM x86 fastcall 函数声明...怎么样？

> ID：11924900
> 
> 赞同：1
> 
> 时间：2012-08-12T18:54:42.680
> 
> 标签：assembly, x86, declaration, masm, fastcall

我正在尝试让 VisualStudio 2010 C 程序调用 fastcall 约定汇编例程。

这是 C 代码中的声明：

```
extern boolean _fastcall InNonSuspendableCriticalRegion(DWORD); 
```

这是汇编代码中的声明：

```
 public @InNonSuspendableCriticalRegion@4

  @InNonSuspendableCriticalRegion@4 proc near ; fastcall
         <code>
  @InNonSuspendableCriticalRegion@4 endp 
```

我收到以下链接器错误：

```
 Assembling: C:\DMS\Domains\PARLANSE\Tools\RunTimeSystem\Source\PARLANSE0.asm
   1>RuntimeSupport.obj : error LNK2001: unresolved external symbol @InNonSuspendableCriticalRegion@4 
```

我确定我在做一些愚蠢的错误，但我看不到它。

MS文档很难弄清楚，因为它太模糊了。我记得在过去的迷雾中，汇编器也进行了一些名称修改，所以我不确定我提供的名称是如何被修改的，如果是的话。

这是关于如何做的[最明确的参考](http://www.c-jump.com/CIS77/ASM/Procedures/lecture.html#P77_0040_proc_format)，我认为我完全遵循它；它说，

```
13\. FASTCALL Caller and Callee Summary

The following sample illustrates the code generated in the calling function and in the called function to support __fastcall, the fastcall calling convention:

   int __fastcall FastFunc( int a, int b );

      calling function    called function
      -------------------------------------------
      mov edx, b          @FastFunc@8 PROC NEAR
      mov ecx, a                       .
      call @FastFunc@8                 .
       .                               .
       .                              RET 8
       .                  @FastFunc@8 ENDP 
```

有什么线索吗？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:24:01.933

尝试在两个目标文件上运行 dumpbin 以转储符号表。这应该同时显示发出的和引用的函数名称。这通常有助于诊断这类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-07T17:18:54.120

> 这是汇编代码中的声明：
> 
> ```
> public @InNonSuspendableCriticalRegion@4
> 
> @InNonSuspendableCriticalRegion@4 proc near ; fastcall
>      ;; code
> @InNonSuspendableCriticalRegion@4 endp 
> ```

我认为你很接近。这个答案中唯一真正的见解是汇编程序默认情况下不会损坏，所以如果你调用你的过程`InNonSuspendableCriticalRegion`，那么它就是这样导出的。要为更高级别的语言获得一个错误的名称，您通常可以按照 Alexey 的建议进行操作。但是没有`FASTCALL`，所以只需使用`ALIAS`.

改为执行以下操作：

```
title Really cool assembly routines
public InNonSuspendableCriticalRegion

.486
.MODEL FLAT

.CODE
ALIGN   8

ALIAS <@InNonSuspendableCriticalRegion@4> = <InNonSuspendableCriticalRegion>

OPTION PROLOGUE:NONE
OPTION EPILOGUE:NONE

InNonSuspendableCriticalRegion proc
    ;; code
InNonSuspendableCriticalRegion endp

OPTION PROLOGUE:PrologueDef
OPTION EPILOGUE:EpilogueDef

;; ...

end 
```

我也*认为* `public @InNonSuspendableCriticalRegion@4`是不正确的（但这不是名称装饰问题的原因）。您可以省略它，也可以使用未修饰的`InNonSuspendableCriticalRegion`名称。

[`ALIAS`你可以在这里](https://msdn.microsoft.com/en-us/library/b07c5b4f.aspx)找到文档。这不是很令人印象深刻。

您可以查看使用 导出的符号`dumpbin`。下面有一个来自 Crypto++ 项目的示例。

***_IF_***你在 fastcall 名称中得到一个*不需要的*前导下划线，比如`_@InNonSuspendableCriticalRegion@8`，然后确保你*没有*某个`OPTION LANGUAGE:C`地方。

最后，我*认为* `SYSCALL`主要相当于`FASTCALL`，但我无法让汇编程序接受它。也许它在过去可以工作，但我无法让 MASM 用现代的 Visual Studio 来接受它。

* * *

Crypto++ 项目使用[C++ 代码](https://github.com/weidai11/cryptopp/blob/master/rdrand.cpp)通过 fastcall与[MASM 代码](https://github.com/weidai11/cryptopp/blob/master/rdrand.asm)交互（代码调用 RDRAND 或 RDSEED，它需要快速运行）。

***C++ 代码***

以下声明用于 X86 和 X64。

```
#if MASM_RDRAND_ASM_AVAILABLE
extern "C" void CRYPTOPP_FASTCALL MASM_RDRAND_GenerateBlock(byte*, size_t);
#endif

#if MASM_RDSEED_ASM_AVAILABLE
extern "C" void CRYPTOPP_FASTCALL MASM_RDSEED_GenerateBlock(byte*, size_t);
#endif 
```

***垃圾箱***

请注意，该符号`MASM_RDRAND_GenerateBlock`是用 导出的`External`，它会再次以别名 as 导出，`@MASM_RDRAND_GenerateBlock@8`并显示为`WeakExternal`。

如果您没有线符号（标签），请务必使用`/Zi`. 它带有 MASM 文件的调试信息。

```
C:\>dumpbin /SYMBOLS rdrand-x86.obj

Dump of file rdrand-x86.obj

File Type: COFF OBJECT

COFF SYMBOL TABLE
000 00DF520D ABS    notype       Static       | @comp.id
001 00000011 ABS    notype       Static       | @feat.00
002 00000000 SECT1  notype       Static       | .text$mn
    Section length   6F, #relocs    0, #linenums    0, checksum        0
004 00000000 SECT2  notype       Static       | .data
    Section length    0, #relocs    0, #linenums    0, checksum        0
006 00000000 SECT3  notype       Static       | .debug$S
    Section length  534, #relocs   26, #linenums    0, checksum        0
008 00000000 SECT4  notype       Static       | .debug$T
    Section length   3C, #relocs    0, #linenums    0, checksum        0
00A 00000000 SECT1  notype ()    External     | MASM_RDRAND_GenerateBlock
00B 00000000 UNDEF  notype       WeakExternal | @MASM_RDRAND_GenerateBlock@8
    Default index        A Alias record
00D 00000038 SECT1  notype ()    External     | MASM_RDSEED_GenerateBlock
00E 00000038 UNDEF  notype       WeakExternal | @MASM_RDSEED_GenerateBlock@8
    Default index        D Alias record
010 00000000 SECT1  notype       Static       | $$000000
011 00000000 SECT1  notype       Label        | GenerateBlock_Top
012 00000005 SECT1  notype       Label        | Call_RDRAND_EAX
013 0000000A SECT1  notype       Label        | RDRAND_succeeded
014 0000000F SECT1  notype       Label        | Full_Machine_Word
015 00000019 SECT1  notype       Label        | Partial_Machine_Word
016 0000002A SECT1  notype       Label        | Bit_1_Not_Set
017 00000034 SECT1  notype       Label        | Bit_0_Not_Set
018 00000034 SECT1  notype       Label        | GenerateBlock_Return
019 00000038 SECT1  notype       Label        | GenerateBlock_Top
01A 0000003D SECT1  notype       Label        | Call_RDSEED_EAX
01B 00000042 SECT1  notype       Label        | RDSEED_succeeded
01C 00000047 SECT1  notype       Label        | Full_Machine_Word
01D 00000051 SECT1  notype       Label        | Partial_Machine_Word
01E 00000062 SECT1  notype       Label        | Bit_1_Not_Set
01F 0000006C SECT1  notype       Label        | Bit_0_Not_Set
020 0000006C SECT1  notype       Label        | GenerateBlock_Return 
```

# rendering - 哪里有好的 C++ 2D 渲染引擎？

> ID：11924909
> 
> 赞同：0
> 
> 时间：2012-08-12T18:55:45.050
> 
> 标签：rendering, 2d

我正在为此构建一个脚本创建[者](http://www.skyscrapersim.com/)。我将 OGRE 用于 3D 位，但要建造一座建筑物，我需要一些 2D 的东西，它可以根据您单击的位置绘制东西（有点像[这样](http://beno.org.uk/metromapcreator/)）。我不在乎它在什么平台上（只要它是 Windows）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-16T02:59:08.433

有一些选择：

*   维格拉
*   AGG
*   奥莱娜
*   [开罗](https://www.cairographics.org/)
*   [斯基亚](https://skia.org/)

任何一个都满足你的需要。我更喜欢斯基亚。QT 专注于 UI，与 2D 渲染无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T19:08:09.823

如果您需要一个简单的跨平台低级渲染引擎，您可以使用 Simple DirectMedia Layer (libsdl.org)。

对于更高级的编程，我更喜欢 Qt。Qt 是一个用于多种用途的完整框架。您可以使用 qgraphicsview/qgraphicsscene 类制作自定义渲染内容。

如果你是初学者，你应该使用 libsdl，因为它更容易学习。

# python - 使用带有 django 模板的变量

> ID：11924911
> 
> 赞同：1
> 
> 时间：2012-08-12T18:56:15.730
> 
> 标签：python, django

我开发了一个过滤器，它在我的 django 模板中执行大量数据库查询。我对具有相同值的相同过滤器有多种用途，这将在同一个模板上提供相同的结果。我希望将过滤结果保存在模板中的一个变量中，这样我就可以确保我不会再次重新运行相同的查询。

我无法从我的视图中发送它，因为我正在为我的模型中的每个对象在 for 循环中执行此过滤器调用。

我需要的一个例子可以在 url 标签中看到：

```
{% url 'path.to.view' arg arg2 as the_url %} 
```

我需要对过滤器进行“as”操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T19:03:20.577

```
{% with bla=arg|foo %}
  {% url 'view' bla %}
{% endwith %} 
```

# xcode - 什么是保存上下文表单核心数据的线程安全方法？

> ID：11924912
> 
> 赞同：1
> 
> 时间：2012-08-12T18:56:29.590
> 
> 标签：xcode, multithreading, core-data, nsmanagedobject, nsoperation

我`NSOperationQueue`有一套`NSOperationQueueDefaultMaxConcurrentOperationCount`。它充满了`NSOperation`物体（到目前为止没有什么奇怪的）。我将其子类化`NSOperation`以执行一些后台任务。

1.  从互联网下载数据。
2.  解析数据，以便我可以读取它。
3.  创建一个 NSManagedObject：

    [NSEntityDescription insertNewObjectForEntityForName:@"Channel" inManagedObjectContext:context];

4.  将其与上下文一起保存。

    [managedObjectContext 保存：&错误]

我喜欢这一切都在后台发生，这样 UI 就不会被阻塞。我读[了这篇关于核心数据并发的文章](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385-SW1)，据我所知。最好的方法是在 each 中创建一个新`NSManagedObjectContext`的`NSOperation`，但共享相同的持久存储协调器。

然而，这很容易做到，当谈到保存它在文档中说的上下文时，这样做很容易出错。所以我的问题如下：

1.  如果我在 NSOperationQueue 中运行不同的操作，这些操作是否会在保存托管对象上下文时相互干扰？还是等到保存完成才执行下面的操作？

2.  我可以安全地将上下文保存在 NSOperation 中吗？或者这真的是不好的做法？

我希望有人能对这件事有所了解，因为我现在真的很困。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:09:07.390

您需要执行以下操作：

1.  为每个 NSOperation 创建一个托管对象上下文。**在 main 方法上创建这个新的上下文**，因为这是它在正确的线程上执行的时候。
2.  分配上下文持久存储协调器。
3.  **创建一个观察者来接收 NSManagedObjectContextDidSaveNotification**。这是在对 NSOperation 的上下文进行更改时主要上下文知道的唯一方式。**确保在合并上下文所在的线程/块上进行合并调用**。如果要与主线程的上下文进行合并，请使用来自 NSOperation 上下文的通知在主线程上调用 mergeChangesFromContextDidSaveNotification: 方法。

另外，问问自己是否真的想让所有这些操作同时工作。根据文档：

> 默认的最大操作数由 NSOperationQueue 对象根据当前系统条件动态确定。

您无法控制同时运行的 NSOperations 数量。如果这不是您想要的，考虑到您将锁定数据库以进行保存这一事实，并且还因为您有网络，您可能会更好地使用串行 NSOperationQueue (maxConcurrentOperation=1)也做了。

如果您采取上述预防措施，您可以安全地保存在 NSOperation 的 main 方法中。

# cocos2d-iphone - CCSpriteBatchNode 错误

> ID：11924913
> 
> 赞同：0
> 
> 时间：2012-08-12T18:56:37.407
> 
> 标签：cocos2d-iphone, ccsprite

我使用`CCSpriteBatchNode`，但我遇到了一些异常错误。这是我的代码：

```
//Use CCSpriteBatchNode.....!!!

    CCSpriteBatchNode *singleGameSpriteBatchNode;       

    //if < 16 , create dice

    unsigned int createDiceNumber = 4 - (maxDiceNumber%4) ;
    for (int i = 0; i<createDiceNumber; i++) {
        CCLOG(@"Total dice number = %d" , createDiceNumber);
        int randomDiceNumber = arc4random()%17;
        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"singleGameImage.plist"];
        singleGameSpriteBatchNode = [CCSpriteBatchNode batchNodeWithFile:@"singleGameImage.png"];
        Dice *tempCreateDice = [[Dice alloc]initWithSpriteFrameName:[self getDicePicture:randomDiceNumber]];
        [singleGameSpriteBatchNode addChild:tempCreateDice];
        [self addChild:singleGameSpriteBatchNode z:5];
        [createDiceArray addObject:tempCreateDice];
        [tempCreateDice setPosition:ccp( 40 , 220-(60*i))];
        [tempCreateDice setRecentPosition:ccp( 40 , 220-(60*i))];
        [tempCreateDice setDiceType:randomDiceNumber];

        [tempCreateDice release];
        maxDiceNumber++;
        mustMoveDiceNumber++;
    }
    CCLOG(@"length = %d" , [createDiceArray count]);
} 
```

它成功地用图像创建骰子。但是当我使用该`ccTouchesBegan`方法时，我收到一些错误消息：

```
*** Assertion failure in -[Dice draw], /Users/xxxxx/Documents/C_Program/iOs Practice(2011)/DiceGame/DiceGame/libs/cocos2d/CCSprite.m:576
2012-08-13 02:32:47.921 DiceGame[11103:c07] *** Terminating app due to uncaught
 exception 'NSInternalInconsistencyException', reason: 'If CCSprite is being
 rendered by CCSpriteBatchNode, CCSprite#draw SHOULD NOT be called' 
```

PS：骰子是一个继承自我`CCSprite`创建的类。

如果它不能使用`CCSpriteBatchNode`，也许我应该回去使用`CCSprite`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T21:32:09.090

你读过错误信息吗？

```
'If CCSprite is being rendered by CCSpriteBatchNode, 
 CCSprite#draw SHOULD NOT be called' 
```

要么不覆盖该`-(void) draw`方法，要么不使用精灵批处理节点。

# php - 在匿名函数中调用匿名函数（Inception）

> ID：11924916
> 
> 赞同：3
> 
> 时间：2012-08-12T18:56:57.513
> 
> 标签：php, anonymous-function

简单的问题，但很难回答？我在类方法中有以下匿名函数：

```
$unnest_array = function($nested, $key) {
    $unnested = array();

    foreach ($nested as $value) {
        $unnested[] = (object) $value[$key];
    }

    return $unnested;
}; 
```

在同一个类方法中，我有这个数组，我保存匿名函数。即我使用内联创建了一个新的匿名函数，`create_function()`并且我想使用已经定义的匿名函数`$unnest_array()`。是否可以？

```
$this->_funcs = array(
    'directors' => array(
        'func'  => create_function('$directors', 'return $unnest_array($directors, "director");'),
        'args'  => array('directors')
    )
); 
```

目前我得到“未定义的变量：unnest_array”。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T19:04:43.057

你为什么首先使用`create_function`？闭包`create_function`完全替换，使其在 5.3 之后的所有 PHP 版本中基本过时。似乎您正试图通过[将](https://en.wikipedia.org/wiki/Partial_application) `$unnest_array`第二个参数固定为`"director"`.

除非我误解了你，否则你应该能够通过使用闭包/匿名函数（未经测试）来获得相同的结果：

```
$this->_funcs = array(
    'directors' => array(
        'func'  => function($directors) use ($unnest_array)
            {
                return $unnest_array($directors, "director");
            },
        'args'  => array('directors')
    )
); 
```

该`use ($unnest_array)`子句是访问闭包父范围内的局部变量所必需的。

# image - 如何将外部图像导入dreamweaver 面板

> ID：11924917
> 
> 赞同：0
> 
> 时间：2012-08-12T18:57:14.737
> 
> 标签：image, dreamweaver, filepath

我的问题非常简单，但我无法在网上找到答案。我在 Photoshop 中制作了一个小图像，并试图将其合并到我当前的网站中。我不知道如何将图像放入dreamweaver 到dreamweaver 面板中的图像文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:29:30.440

您可以将图像复制到根文件夹的图像目录中，然后只需在要添加图像的位置添加标记即可。

```
<img src = "[your image link]" /> 
```

或者简单地使用文件面板添加图像-插入->图像->选择您的图像，然后按确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T19:13:10.193

您的图像文件夹应本地存储在您的计算机上的站点根文件夹中。

在 Photoshop 中：为 Web 设备保存，导航到存储站点的根文件夹，打开图像文件夹并将图像保存在该位置。

在 Dreamweaver 中：转到文件面板，点击刷新按钮，图像现在应该出现在图像文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T19:08:40.623

尝试以下

1- ctrl + Alt + I 并从对话框中选择您的图像 2- 手动将您创建的图像复制到硬盘上的网站目录

希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T05:41:28.043

到目前为止，最简单的方法是将光标放在您希望图片驻留的页面部分。

然后使用顶部菜单单击“插入”，然后单击“图像”，完成此操作后，您将能够在本地计算机或网络上找到您的图像，并且系统会提示您将其与站点目录一起保存到您的站点已经启动 - 然后只需选择保存文件的位置。

最好将所有图像保存到图像文件夹中。

希望有帮助！

# java - 在 MP3 ID3v2 标签中设置歌词

> ID：11924922
> 
> 赞同：4
> 
> 时间：2012-08-12T18:58:07.187
> 
> 标签：java, android, mp3, id3v2

我想在 Android 应用程序中将歌词写入 mp3。我找到了一个名为 mp3agic 的用于读取[文件](https://github.com/mpatric/mp3agic)`mp3`和读取/操作 ID3 标签（ID3v1 和 ID3v2.2 到 ID3v2.4）的 java 库。

我修改`mp3agic`为写ID3v2标签的歌词标签，写标签：`USLT`. [在维基百科](http://en.wikipedia.org/wiki/ID3#ID3v2_Frame_Specification_.28Version_2.3.29)中找到

在一个示例 Android 应用程序中，我修改了 MP3 的艺术家、专辑、标题、流派、歌词和评论。除歌词外，所有标签均已正确修改。`PowerAMP`用于验证修改后的`MP3`文件，`PowerAMP`无法在 MP3 中找到歌词。

如果有人熟悉这个库，这里是我从 AbstractID3v2Tag.java 修改的代码：

```
//define lyric tag for id3v2
public static final String ID_TEXT_LYRICS = "USLT";

//get the lyrics from the tag
public String getLyrics() {
    ID3v2TextFrameData frameData;
    if (obseleteFormat) return null;
    else frameData = extractTextFrameData(ID_TEXT_LYRICS);
    if (frameData != null && frameData.getText() != null) 
        return frameData.getText().toString();
    return null;
}

//set the lyrics in the tag
public void setLyrics(String lyrics) {
    if (lyrics != null && lyrics.length() > 0) {
        invalidateDataLength();
        ID3v2TextFrameData frameData = new ID3v2TextFrameData(useFrameUnsynchronisation(), new EncodedText(lyrics));
        addFrame(createFrame(ID_TEXT_LYRICS, frameData.toBytes()), true);
    }
} 
```

`MP3`我在 Windows 中的一个程序上设置了歌词，并`USLT`用我的应用程序读取了标签并`getLyrics()`返回了字符串`eng`。 `PowerAMP`确实找到了这些由 Windows 程序设置的歌词。

我搜索并发现了许多指向 MP3 ID3 标签修改器库的帖子，这就是我找到 mp3agic 的地方。这是唯一一个我可以轻松修改以合并歌词更改的库。

我发现的一个库是[MyID3_for_Android](https://sites.google.com/site/eternalsandbox/myid3-for-android)，它没有修改歌词的方法。

我正在寻找这方面的指导。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T22:11:44.953

在[http://id3.org/id3v2.4.0-frames](http://id3.org/id3v2.4.0-frames)查看官方 ID3 规范：

```
Header for 'Unsynchronised lyrics/text transcription', ID: "USLT":
    Text encoding        $xx
    Language             $xx xx xx
    Content descriptor   (text string according to encoding) $00 (00)
    Lyrics/text          (full text string according to encoding) 
```

因此，USLT 框架不仅仅是一个文本框架，这就是您尝试解析它的方式。相比之下，文本框架如下所示：

```
Header for 'Text information frame', ID: "T000" - "TZZZ" excluding "TXXX":
    Text encoding                $xx
    Information                  (text string(s) according to encoding) 
```

请注意 USLT 框架中的额外字段。您将需要一个自定义框架类（例如，ID3v2LyricsFrameData）。

然而，USLT 框架与评论框架 (COMM) 非常相似，因此您可能可以重复使用其中的一些代码。也许创建一个 ID3v2CommentFrameData 和 ID3v2LyricsFrameData 都扩展的超类。

# c++ - 河豚和双鱼是逐字节加密的吗？

> ID：11924926
> 
> 赞同：0
> 
> 时间：2012-08-12T18:58:29.903
> 
> 标签：c++, blowfish, twofish

我正在通过网络接收数据包。但是其中一些数据包具有动态长度，因此第二个字节有一个包含长度的 2 个字节长的 WORD。所以我先收到包号，然后按照长度全部接收。当没有加密时，这里一切都很好。如果我使用twofish或blowfish加密会一样吗？我的意思是，“A”被加密为“B”，但“AA”会被加密为“BB”吗？我可以从整个用 TF/BF 加密的数据包中提取一个字节并解密它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:17:47.367

> 我的意思是，“A”被加密为“B”，但“AA”会被加密为“BB”吗？

一个明智的加密算法永远不会这样做，否则加密信息很容易被频率分析破解。（顺便说一下，这被称为[替换密码](http://en.wikipedia.org/wiki/Substitution_cipher)）。这对于[河豚](http://en.wikipedia.org/wiki/Blowfish_%28cipher%29)和[双鱼](http://en.wikipedia.org/wiki/Twofish)来说当然是正确的* 。

即使要在中间提取一个字节，也必须先解密整个数据包。

* * *

*：除非您使用弱[ECB 模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29)，这只会将两种加密算法减少为 64 位/128 位块上的替换密码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T19:27:00.737

通常答案是填充加密数据。但是，在达到块长度之前，不要只是通过添加 0 来填充；填充可能会泄露太多信息。

至于提取一个字节，取决于所使用的密码模式 - 密码如何在块之间更改 - 你不应该能够做到这一点。您需要一直解密要读取的字节字节。加密是“透明”的一般做法 - 即您进行网络编程，然后在其上添加 SSL，以便 SSL 处理加密所有内容、处理可变长度等，而您只需处理普通的旧数据.

至于在你的设计中使用 SSL 是否是一个好主意，我不知道，但你可以使用这个概念。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T21:59:05.453

Twofish 在其基础级别编码 16 字节块。所以你可以拥有的最小的 Twofish 加密数据是 16 字节长。如果您的数据包含长度，那么您可以对其进行解密，然后丢弃最后一个块中的任何额外字节。

因此，要加密“A”，您需要将它（不知何故 - 有多种方法 - 全零显然不是最好的方法）填充到 16 个字节，然后加密一个字节的数据和 15 个不需要的字节。你得到一个 16 字节的加密块。在解密时，您可以丢弃额外的字节。

我建议花半小时阅读这些维基百科文章：

[http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)

[http://en.wikipedia.org/wiki/Padding_%28cryptography%29](http://en.wikipedia.org/wiki/Padding_%28cryptography%29)

他们俩都对我有帮助。

# bigdata - 用于非分析的 vertica

> ID：11924929
> 
> 赞同：1
> 
> 时间：2012-08-12T18:58:38.740
> 
> 标签：bigdata, vertica

我的系统中有一个大型分析模块，并计划使用 vertica。有人建议我们在应用程序的其余部分（标准的 crud 应用程序和我们域中的模型）中也使用 vertica，这样就不要管理多个数据库。

vertica 是否适合这种双重场景？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T21:32:38.523

高频更新可能是 Vertica 落后于最坏情况的地方。我会避免将它用于此类数据模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T20:34:09.870

Alec - 我想恭敬地挑战您对 Vertica 的评论。在加载之前，您绝不需要对数据进行非规范化或排序。Vertica 还保持着所有数据库中数据加载速度最快的记录。

您还谈到 Vertica 无法像 RDBMS 那样进行复杂的分析。Vertica 是一种 RDBMS，可以比任何其他 RDBMS 更快地进行分析，并且他们一遍又一遍地证明了这一点。

至于您的数字，在我的用例中，我每秒将大约 500 万条记录加载到我的 Vertica 集群中，并且有 100 条数十亿条记录。

所以 Yaron - 我强烈建议您先查看 Vertica，然后再根据此信息排除它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T11:09:04.000

就像现在经常发生的情况一样，一个有意义的答案取决于你需要做什么。一般来说，“大数据”解决方案是从 RDBMS 系统中的大数据量缺陷发展而来的。没有任何“大数据”解决方案可以与 RDBMS 系统的核心功能（即复杂分析）相媲美，但 RDBMS 系统对于大数据量处理来说是较差（昂贵）的解决方案。目前的实际解决方案必须是混合解决方案。加载数据后，Vertica 可能会很好，但我相信（不是专家）它需要在加载之前对数据进行非规范化和预排序以达到最佳性能。对于大数据量，这可能会显着增加所需的资源。使用一个系统来满足您的所有需求肯定有好处，但保持您的选择开放也有好处。

我采用的方法是存储和索引新数据，然后根据需要向各种报告/分析引擎提供特定的提要。这将原始数据的收集和存储与复杂的分析处理分开。如果您有兴趣，我很乐意提供更多详细信息。这种分离解决了一直存在于数据库系统中的核心问题。过去常常听到“快存、慢报或慢存、快报，但不能两者兼得”。在过去几年中，对完整解决方案的搜索催生了许多 NoSQL 产品，这些产品通常用于解决“快速存储”任务。一些系统还通过将数据存储在内存或缓存中来提供令人印象深刻的查询性能，但这需要许多服务器来处理大量数据。我相信 NoSQL 和 SQL 解决方案可以而且将会是集成的，

为了给你一些背景信息，我处理每天至少加载 10 亿条记录的场景。如果您每天处理 1 亿条记录（大是相对的），那么您的 Vertica 方法可能就足够了，否则我认为您需要扩展您的选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T21:05:03.663

测试一下。每个用例都是不同的。[假设 Vertica 是适用于每个用例的解决方案，几乎与为每个用例都使用 MongoDB](http://www.mongodb-is-web-scale.com)一样糟糕。

Vertica 是一个高性能分析数据库，面向列，旨在分析非常大的数据集并进行水平扩展。它也很昂贵，难以管理，并且文档参差不齐。显然，在正确的环境中获得的回报很容易值得付出努力

MySQL 是一个传统的 RDBMS，面向行，旨在对结构化数据之间的关系进行建模，并且在单节点规模上运行良好（尽管许多公司已经对其进行了改造，取得了巨大的成功，例如 Facebook）。它的文档非常完善，似乎可以在任何平台、语言或框架上运行，任何人都可以使用。

我的猜测是将 Vertica 用于员工通讯录数据库就像穿着 3000 美元的西装出现在蓝领工作中一样。当然可以*，*但它是适合这项工作的工具吗？也许如果您已经拥有 Vertica 许可证并且您的应用程序已经拥有必要的数据适配器/ORM/等...，请继续尝试。它仍然是一个 SQL 数据库，因此在这些情况下它应该可以正常工作。如果您的目标是最少的编程而不是最佳性能，那么为什么要使用 Vertica？听起来更简单的东西会更理想。Vertica 可能会或可能不会在常规 CRUD 应用程序环境中提供更好的性能，因为它没有为此进行优化，但您始终可以同时测试并查看。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-01T20:53:11.497

Vertiy 有很多高并发问题（每分钟很多小事务） 在 MPP 系统中，数据是跨集群分段的，任何时候都需要获取集群级别的锁（主要是在提交时间），所以很多提交很多集群级别 X锁。高并发在 DWH 和报告中的用例较少，因此 vertica 非常适合。在大多数情况下，需要为此提供高并发性的 OLTP 解决方案（如 CRM 等）是非常糟糕的选择

谢谢

# javascript - 在 Google App Script 中使用 GUI builder 添加列表框元素

> ID：11924934
> 
> 赞同：0
> 
> 时间：2012-08-12T18:59:37.350
> 
> 标签：javascript, listbox, google-apps-script

我是 javaScript 新手，所以我需要使用 App Script 的帮助。在 GUI Builder 中，我添加了一个名为“List Stocks”的列表框，在事件中我添加了一个函数“listStockQuotes()”。我不知道如何将元素添加到此列表框中并显示它们。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:23:56.483

现在可以通过编写如下代码将项目添加到列表框

```
function doGet() {
  var app = UiApp.createApplication();
  var form = app.loadComponent('gui00');
  var listBox1 = app.getElementById('ListBox1');
  listBox1.addItem('Item 00', 'Value00');
  listBox1.addItem('Item 01', 'Value01');
  listBox1.addItem('Item 01', 'Value02');
  app.add(form);
  return app;
} 
```

# algorithm - 将节点添加到树的函数

> ID：11924935
> 
> 赞同：1
> 
> 时间：2012-08-12T18:59:46.550
> 
> 标签：algorithm, c++-cli, binary-search-tree

这个问题与二叉搜索树有关。这是我正在使用的节点的定义

```
struct _Node
{
    _Node *Parent;
    int Data;
    _Node *Left;
    _Node *Right;
}; 
```

现在这里是创建根后添加节点的函数的定义

```
void AddNode(_Node *Incoming, _Node *currentNode)
{

            if(!currentNode)
            {
                currentNode = Incoming;
            }
            else if(currentNode->Data >= Incoming->Data)
            {
                Incoming->Parent = currentNode;
                AddNode(Incoming, currentNode->Left);
            }
            else if(currentNode->Data < Incoming->Data)
            {
                Incoming->Parent = currentNode;
                AddNode(Incoming, currentNode->Right);
            }

} 
```

AddNode 函数基于递归方法。主要代码是

```
_Node *Root= new _Node;
Root->Data = 50;
Root->Parent = nullptr;
Root->Left = nullptr;
Root->Right = nullptr;

_Node *Node2 = new _Node;
Node2->Data = 25;
Node2->Parent = nullptr;
Node2->Left = nullptr;
Node2->Right = nullptr;
_Node *Node3 = new _Node;

   AddNode(Node2, Root); 
```

问题：一旦我退出添加节点功能，我发现 Root 节点没有设置为 Node2 的 Left 或 Right Child。据我说，每次我应该将节点正确添加到根时，都会传递指向节点的指针。这没有发生。你能帮我看看我犯了什么错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:03:20.550

尝试

```
AddNode(Incoming, currentNode->Left); 
```

代替

```
AddNode(Incoming, Incoming->Left); 
```

对`Right`.

# ajax - 当前查询的 URL

> ID：11924937
> 
> 赞同：0
> 
> 时间：2012-08-12T18:59:57.973
> 
> 标签：ajax, url, history, permalinks

我有一个 AJAX Web 应用程序，我想在其中使用 URL 来反映当前查询是什么，以便获得“永久链接”。例如，用户在搜索输入中输入“foobar”作为查询，然后`http://example/search/`在 URL 栏中更新为`http://example/search/?foobar`.

当尝试使用 index.html 实现这一点时：

```
<script>
query = "foobar";
window.location.search = query;
</script> 
```

首先，这奇怪地使浏览器陷入无限循环。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:23:09.970

更改`window.location`会使浏览器重新加载该页面。

# javascript - 如何在html复选框值参数中使用javaScript变量？

> ID：11924940
> 
> 赞同：0
> 
> 时间：2012-08-12T19:00:05.257
> 
> 标签：javascript, html, checkbox

在我的文件中，我有 javaScript 变量名称“testJava”

```
<script>
var testJava = 'script Test';
</script> 
```

在页面底部，我有一个复选框。**我需要将 'testJava' 变量添加到 checkbox 的值中**。

```
<input type="checkbox" name="website[]" value= "I_WANT_TO_ADD_IT_HERE" />My Test<br /> 
```

`value = "<script>document.write(testJava);</script>"`不工作

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:02:23.370

您应该`id`向您的元素添加一个标签`<input>`以识别它：

```
<input type="checkbox" name="website[]" id="thecheckbox" /> 
```

使用 jQuery，很容易改变值：

```
$('#thecheckbox').val(testJava); 
```

要包含 jQuery，例如使用以下脚本标签：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T19:04:44.740

```
<script>
var testJava = 'script Test';
document.getElementById('checkbox_ID').value = testJava;
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T19:01:26.910

试试这个：

```
var checkBox = document.getElementsByTagName("input")[0];
checkBox.value = testJava; 
```

注意：这必须在`window.onload`事件中或在复选框 HTML 之后的脚本中完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T19:02:34.650

您不能直接按照您的要求进行操作，因此只需在事后设置值：

```
<input type=checkbox id=cb1 ...> My Test
<script>
  document.getElementById('cb1').value = testJava;
</script> 
```

此外，Java 和 JavaScript 不是一回事。

确保在`<script>`之后`<input>`，否则它在“加载”或“就绪”事件处理程序中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T19:02:45.757

```
<input type="checkbox" name="website[]" id="check_box" value= "I_WANT_TO_ADD_IT_HERE" />My Test<br /> 
```

在你的脚本中，在 dom 准备好之后，

```
document.getElementById("check_box").value("testJava"); 
```

# java - Java：具有优先级的 ReentrantReadWriteLock

> ID：11924942
> 
> 赞同：7
> 
> 时间：2012-08-12T19:00:13.607
> 
> 标签：java, multithreading, reentrantlock, reentrantreadwritelock, readwritelock

以下是典型的读写器模式（读多写少）

```
 private ReadWriteLock lock = new ReentrantReadWriteLock();
  private int value;

  public void writeValue(int newValue){
       lock.writeLock().lock();
       try{
           this.value = newValue;
       }
       finally{
           lock.writeLock().unlock();
       }
  }

  public int readValue(){
       lock.readLock().lock();
       try{
           return value;
       }
       finally{
           lock.writeLock().unlock();
       }
  } 
```

我想知道是否可以优先考虑作者和读者？例如，如果其他线程不断持有读锁，通常 writer 可能会等待很长时间（可能永远），所以是否可以让 writer 具有更高的优先级，所以每当 writer 到来时，它可以被认为是高优先级（跳线）之类的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T19:14:26.297

根据[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)，jdk 实现没有*任何*读写器优先级。但是，如果您使用“公平”实现，则按 fifo 顺序授予锁（*仍然*没有读取器/写入器首选项），因此至少未来的读取器不会阻塞等待的写入器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T19:06:33.100

写锁实际上已经优先于读锁。

如果一个线程想要读取资源，只要没有线程正在写入，并且没有线程请求对该资源的写访问，就可以了。通过提高写访问请求的优先级，我们假设写请求比读请求更重要。

有关更多详细信息，请参阅[这篇出色的帖子](http://tutorials.jenkov.com/java-concurrency/read-write-locks.html)。

**编辑：重要的是要注意这[仅适用于公平模式](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)。谢谢@jtahlborn！**

# google-analytics - 在 Google Analytics 中过滤掉 URI 不起作用

> ID：11924944
> 
> 赞同：1
> 
> 时间：2012-08-12T19:00:37.313
> 
> 标签：google-analytics

我正在使用 Google Analytics 来跟踪我网站上的综合浏览量。但是，我想忽略一个特定的 URL (www.example.com/android_api)。

所以，在过滤器中，我有这个过滤器：自定义过滤器-> 排除-> 请求 URI-> ^/android_api-> 不区分大小写

但是，“/android_api”仍然出现在“Top Pages”中。

知道我做错了什么吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:23:07.790

弄清楚了！过滤不适用于分析的实时部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:24:55.920

您确定在创建过滤器后查看您的报告吗？如果您的时间跨度设置为包含过滤器之前的数据，则您的首页中可能会出现一些挥之不去的数据。

# php - 在 vbulletin 4 中替换模板上的单词

> ID：11924945
> 
> 赞同：1
> 
> 时间：2012-08-12T19:00:39.157
> 
> 标签：php, vbulletin

我是 vbulletin 3 产品开发人员，我想要 vbulletin 4 的代码：

```
//hook name : parse_template
$vbulletin->templatecache['NAVBAR'] = str_replace("word", "replace", $vbulletin->templatecache['NAVBAR']); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T23:21:18.620

您只能在加载模板后运行代码。如果你想强制加载模板，只需使用

```
$bootstrap->load_style();
$bootstrap->process_templates(); 
```

（确保 $bootstrap 在您的上下文中可用）。

一种更简单的方法（但不是最佳方法）是渲染任何模板，它会强制加载模板，例如

```
vB_Template::create('NAVBAR')->render(); 
```

之后，NAVBAR（和其他缓存的模板）将在 $vbulletin->templatecache 数组中可用。

# opengl - Haskell中的OpenGL使用哪个线性代数？

> ID：11924949
> 
> 赞同：10
> 
> 时间：2012-08-12T19:01:07.053
> 
> 标签：opengl, haskell, linear-algebra

我正在尝试在 haskell 中进行一些 OpenGL 编程。但我对图书馆的现状感到困惑。[OpenGL](http://hackage.haskell.org/package/OpenGL)使用[Tensor](http://hackage.haskell.org/package/Tensor)包，它只定义了几种矢量类型（但没有以通用方式这样做）。它似乎没有提供任何 Matrix 实现。

线性代数还有其他几个包：[张量](http://hackage.haskell.org/package/tensor)（注意小写的 T）、[Vec](http://hackage.haskell.org/package/Vec)、[hmatrix](http://hackage.haskell.org/package/hmatrix)，它们似乎比[张量](http://hackage.haskell.org/package/Tensor)更完整。

我正在搜索的内容至少应该包含 3d 和 2d 图形中使用的常用函数，具有合理的性能并且应该与[OpenGL](http://hackage.haskell.org/package/OpenGL)兼容，但我想我必须为此更改库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:40:27.233

迟到的答案，对不起。HMatrix 是此类事情的标准选择。它非常兼容，有一个很好的 API，并且实际上用于其他应用程序中的计算机视觉：http: [//dis.um.es/profesores/alberto/research.html](http://dis.um.es/profesores/alberto/research.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:20:51.657

我最近也有同样的疑惑，特别恼火的是 Tensor 没有为您提供点积、叉积、归一化等方便的功能。

正如您所指出的，对于and`vect`是“硬编码”的，因此不能有有用的类型类实例，例如, or - 使用这些实例，我们将“免费”获得很多操作，例如 add: 。`Float``Double``Functor``Monoid``Applicative``(+) <$> v1 <*> v2`

上`#haskell`，我被指向[线性](http://hackage.haskell.org/package/linear)包。它维护良好，并带有许多有用的实例和功能。

# c++ - 修改 WAH 压缩位图性能

> ID：11924954
> 
> 赞同：0
> 
> 时间：2012-08-12T19:01:42.053
> 
> 标签：c++, database, performance, compression, bit-manipulation

我正在开发用于数据索引的字对齐位图压缩算法。算法基于 WAH 压缩研究论文。压缩位图在按位操作上表现良好，并且非常节省空间。但是修改压缩位图效率不是很高，因为修改需要拆分压缩字大小块和几个 memmove 导致性能瓶颈。

> 请看下面的例子。
> 
> 示例：数据集 - [1000000,34,9,23456,6543,10000000,23440004,100,345]

由于数据集的随机性，性能会降低，在实际应用场景中可能会发生这种情况。

1.  谁能给我一个关于如何克服这个性能问题的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:59:16.480

Daniel Lemire 有几篇关于预排序以提高压缩和性能的论文。这是最新的： http: [//arxiv.org/abs/1207.2189](http://arxiv.org/abs/1207.2189)

你也可以看看他的 EWah 变体。

普遍的感觉是，当数据集变化缓慢时，位图数组压缩技术效果很好，因为大多数实现会丢弃并在每次更改时重建索引。对于变化更频繁的数据集，传统的索引方法（例如 B-Tree 变体）仍然是王道。

实现：[https](https://github.com/lemire/javaewah) ://github.com/lemire/javaewah和[https://github.com/lemire/EWAHBoolArray](https://github.com/lemire/EWAHBoolArray)

# java - SQL 更新无法正常工作

> ID：11924956
> 
> 赞同：0
> 
> 时间：2012-08-12T19:02:15.417
> 
> 标签：java, sql, oracle

我正在处理显示设置值并将设置更新到 Oracle 表中的 JSF 页面：

```
public void updateDBSettings() throws SQLException {

        /*
         -- TABLE GLOBALSETTINGS
            CREATE TABLE GLOBALSETTINGS(
            SETTINGNAME VARCHAR2(40 ) NOT NULL,
            SETTINGVALUE VARCHAR2(40 )
            )
            /
         */

        String SQL_Statement = null;

        if (ds == null) {
            throw new SQLException();
        }
        Connection conn = ds.getConnection();
        if (conn == null) {
            throw new SQLException();
        }

        PreparedStatement ps = null;

        try {
            conn.setAutoCommit(false);
            boolean committed = false;
            try {
                /* Insert the new settings values with one SQL statement */
                SQL_Statement = "UPDATE GLOBALSETTINGS "
                        + "SET \"SettingValue\" = "
                        + "CASE "
                        + "WHEN \"SettingName\" = 'SessionTTL' THEN ? "
                        + "WHEN \"SettingName\" = 'MaxUsersActive' THEN ? "
                        + "WHEN \"SettingName\" = 'TimestampFormat' THEN ? "
                        + "END "
                        + "WHERE \"SettingName\"  IN ('SessionTTL', 'MaxUsersActive', 'TimestampFormat')";

                /* Execute the SQL statement */
                ps = conn.prepareStatement(SQL_Statement);
                ps.setString(1, settingsMap.get("SessionTTL"));
                ps.setString(2, settingsMap.get("MaxUsersActive"));
                ps.setString(3, settingsMap.get("TimestampFormat"));               

                ps.executeQuery();
                conn.commit();
                committed = true;
            } finally {
                if (!committed) {
                    conn.rollback();
                }
            }
        } finally {
            /* Release the resource after all SQL queries are executed */
            ps.close();
            conn.close();
        }
        /* Refresh Hash Map
         * Get again settings from Oracle
         */
        initSettings();
        // Display the message
        FacesContext context = FacesContext.getCurrentInstance();
        context.addMessage(null, new FacesMessage("Successful", "Settings are updated"));
    } 
```

我在 Glassfish 错误日志中收到此错误：

```
javax.faces.FacesException: #{ApplicationController.updateDBSettings}: java.sql.SQLSyntaxErrorException: ORA-00904: "SettingName": invalid identifier

    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.faces.el.EvaluationException: java.sql.SQLSyntaxErrorException: ORA-00904: "SettingName": invalid identifier

    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 31 more
Caused by: java.sql.SQLSyntaxErrorException: ORA-00904: "SettingName": invalid identifier

    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:445)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)
    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:879)
    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:450)
    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:192)
    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:531)
    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:207)
    at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:1044)
    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1329)
    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3584)
    at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3628)
    at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1493)
    at com.sun.gjc.spi.jdbc40.PreparedStatementWrapper40.executeQuery(PreparedStatementWrapper40.java:642)
    at com.DX_57.SM_57.Application.updateDBSettings(Application.java:139)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 32 more
|#] 
```

你能帮我解决这个问题吗？我确定问题出在 SQL 语句中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T19:11:41.993

你的 SQL 是错误的。您在 Oracle 中创建表的方式，SQL 应该是（删除双引号转义） -

```
SQL_Statement = "UPDATE GLOBALSETTINGS "
    + "SET SettingValue = "
    + "CASE "
    + "WHEN SettingName = 'SessionTTL' THEN ? "
    + "WHEN SettingName = 'MaxUsersActive' THEN ? "
    + "WHEN SettingName = 'TimestampFormat' THEN ? "
    + "END "
    + "WHERE SettingName  IN ('SessionTTL', 'MaxUsersActive', 'TimestampFormat')"; 
```

当您使用以下 SQL 创建表时 -

```
CREATE TABLE GLOBALSETTINGS(
        SETTINGNAME VARCHAR2(40 ) NOT NULL,
        SETTINGVALUE VARCHAR2(40 ) ) 
```

这与创建表不同 -

```
CREATE TABLE "GlobalSettings" (
        "SettingName" VARCHAR2(40 ) NOT NULL,
        "SettingValue" VARCHAR2(40 ) ) 
```

使用第一种方法，Oracle 将所有内容转换为`UPPERCASE`. 如果您使用第二种方法，则表/列名称将保持区分大小写。如果您使用了第二种方法，则必须在 sql. 使用第一种方法，您不应该转义表/列名。

# javascript - 如何将参数从 java 脚本函数发送到 servlet

> ID：11924957
> 
> 赞同：-1
> 
> 时间：2012-08-12T19:02:17.717
> 
> 标签：javascript, servlets

我想在javascript的帮助下向servlet发送一些参数.....在我的jsp页面中有一个动态生成的参数“a [j]”，点击javascript函数调用，这个a [j ] 在 java 脚本函数中是“ur”的参数应该被发送到一个名为 Rank 的 servlet .....告诉我应该使用哪个函数来转发参数......

在 JSP 中：

```
<a href="<%out.println(a[j]);%>" onclick="(rank('<%=a[j]%>'))"><%out.println(a[j+1]);%></a> 
```

Javascript：（排名）

```
 <script type="text/javascript">

    function rank(ur)
    { ??????????("Rank?set="+ur);

    }
    </script> 
```

在 Servlet（等级）中：

```
String s = (String)request.getParameter("set"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:06:04.193

你可以做

```
window.location="Rank?set="+ur; 
```

或者

```
document.body.innerHTML+='<form id="myform" action="Rank" method="get"><input name="set" value="'+ur+'" /></form>';
document.getElementById('myform').submit(); 
```

**编辑**：

啊，我认为您需要的是[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)，一组相互关联的 Web 开发技术，用于在客户端创建异步 Web 应用程序。使用 Ajax，Web 应用程序可以异步（在后台）向服务器发送数据和从服务器检索数据，而不会干扰现有页面的显示和行为。

然后代码是：

```
var xmlhttp;
if (window.XMLHttpRequest){
  // code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
}else{
  // code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function(){
  if (xmlhttp.readyState==4 && xmlhttp.status==200){
    //only if you want the response
    document.getElementById("log").innerHTML=xmlhttp.responseText;
  }
}
xmlhttp.open("GET","Rank?set=" + ur,true);
xmlhttp.send();
} 
```

# xcode - 添加多个本地化文件

> ID：11924965
> 
> 赞同：1
> 
> 时间：2012-08-12T19:02:53.740
> 
> 标签：xcode

我必须将多个本地化文件添加到我的项目中。如果我理解正确我应该

1.  将一种语言的文件添加到我的项目中（例如英语）

2.  选择每个文件并添加一种新语言，这将复制我在 en.lprj 和 fr.lproj 中的文件

3.  在 fr.lproj 中覆盖我的法语文件

这很挑剔，有没有更好的方法？

# linux - Linux awk 文本文件处理

> ID：11924967
> 
> 赞同：1
> 
> 时间：2012-08-12T19:03:08.593
> 
> 标签：linux, awk, text-processing

我有一个包含几千行数据的文件，每一行都像：`a:b:c:d`

例如：

```
0.0:2000.00:2000.04:2000.02 
```

我想在一个文件中获取所有 a，在第二个文件中获取 b，等等。如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T19:13:20.460

单程。输出文件将命名为**fileX**，每列编号为**X。**

假设**infile**包含内容：

```
0.0:2000.00:2000.04:2001.02
0.1:2002.00:2000.05:2003.02
0.2:2003.00:2002.04:2004.02
0.3:2001.00:2000.05:2000.03
0.3:2001.00:2000.04:2001.02
0.2:2001.00:2002.04:2000.02 
```

执行这个`awk`命令：

```
awk '
    BEGIN {
        FS = ":";
    }

    {
        for ( i = 1; i <= NF; i++ ) {
            print $i > "file" i;
        }
    }
' infile 
```

检查输出文件：

```
head file[1234] 
```

结果如下：

```
==> file1 <==
0.0
0.1
0.2
0.3
0.3
0.2

==> file2 <==
2000.00
2002.00
2003.00
2001.00
2001.00
2001.00

==> file3 <==
2000.04
2000.05
2002.04
2000.05
2000.04
2002.04

==> file4 <==
2001.02
2003.02
2004.02
2000.03
2001.02
2000.02 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T19:06:00.673

查看[`awk`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/awk.html)（或[`gawk`](http://www.gnu.org/s/gawk/manual/gawk.html)）手册。

您应该使用该`-F:`标志将字段分隔符设置为`:`.

您应该使用`print`with`> file`将输出获取到您想要的文件。

```
awk -F: '{ for (i = 1; i <= NF; i++) { file = "file." i; print $i > file; } }' input 
```

（`awk`在 Mac OS X 10.7.4 上不允许使用表达式作为文件名；`gawk`可以。显示的解决方案适用于两者。）

[*为反击（现已取消——谢谢）否决票而给出的家庭作业答案，这是 IMNSHO 无偿错误的！*]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T19:12:29.637

关于什么：

```
cat filename|cut -d ':' -f1 > a.txt 
```

然后你可以为第二个字段写 -f2 并把它放在 b.txt 中。

# java - 在 JDK 1.6 中执行 Jar 文件给出问题

> ID：11924971
> 
> 赞同：2
> 
> 时间：2012-08-12T19:03:21.470
> 
> 标签：java

我使用 eclipse ide 在 java 中创建了一个简单的项目来测试 log4j 功能。我需要使用 java 中的 jar 工具从命令提示符运行应用程序。logtest.java 文件是一个简单的 java 文件，它定义了一个如下的记录器。它正在引用另一个 Jar 文件中的 Logger。下面是目录结构。

```
package com;

import org.apache.log4j.Logger;

public class logtest {

    private static Logger logger = Logger.getLogger(logtest.class);

    public static void main(String[] args) {
        System.out.println("---------------HIIIIII-----------");
    } 
```

下面是我在eclipse项目中创建的目录结构。

```
src/com/logtest.java

lib/log4j-1.2.17.jar 
```

清单文件条目如下，我手动创建了 maifest 文件。

```
Manifest-Version: 1.0
Main-Class: com.logtest
Class-Path: lib/log4j-1.2.17.jar 
```

Jar 文件的内容如下，我使用 jar 实用程序解压缩。

```
META-INF/MANIFEST.MF
.project
com/logtest.class
manifest.mf
lib/log4j-1.2.17.jar
.classpath 
```

我已经导出了 jar 文件，当我尝试使用 commond java -jar JarTest2.jar 运行时，出现以下错误

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/log4j/Logger
    at com.logtest.<clinit>(logtest.java:6)

Caused by: java.lang.ClassNotFoundException: org.apache.log4j.Logger
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 1 more 
```

我知道它是一个未找到异常的类，但奇怪的是，当我使用 jdk1.5 创建同一个 jar 并运行命令工具时，jar 成功运行并且 java 类执行没有任何错误。

我不知道为什么会这样，因为一切都是一样的。

我的是一台 64 位 Windows 7 机器，而另一台运行它的机器是 32 位 XP 机器。

当然，两台机器上的eclipse ide版本不同。

你能否让我知道我正在做的事情有什么问题，或者我错过了什么。

感谢 Vikeng21

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:16:25.887

我很确定 Java 不支持嵌入式 Jars。我建议将 lib/log4j-1.2.17.jar 文件移到文件系统中（以便它在与可执行 Jar 相同的目录中创建一个子文件夹 ./lib 并查看是否有所不同。

如果你真的想使用嵌入式 Jar，你可以阅读[One-Jar](http://www.ibm.com/developerworks/java/library/j-onejar/)

你应该有一个目录结构

```
.\JarTest2.jar
.\lib\log4j-1.2.17.jar 
```

在您的文件系统上。`log4j`Jar 不应嵌入（包含在）文件`JarTest2.jar`中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:20:22.870

请检查您的 log4j.jar 是否重复。例如，一个 log4j.jar 在 lib 文件夹下，另一个在 Eclipse 的引用库下。如果重复，请移除一个 jar 并重新部署。

# javascript - 使用 underscore.js 过滤 js 对象

> ID：11924976
> 
> 赞同：7
> 
> 时间：2012-08-12T19:03:55.017
> 
> 标签：javascript, filter

我正在尝试使用 underscore.js 过滤这个 javascript 对象，但我不知道它为什么不起作用，它意味着找到任何包含“how”的问题值。

```
 var questions = [
    {question: "what is your name"},
    {question: "How old are you"},
    {question: "whats is your mothers name"},
    {question: "where do work/or study"},
    ];

var match = _.filter(questions),function(words){ return words === "how"});

alert(match); // its mean to print out -> how old are you? 
```

完整的代码在这里（underscore.js 已经包含）：http: [//jsfiddle.net/7cFbk/](http://jsfiddle.net/7cFbk/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-12T19:12:03.583

1.  您使用 关闭了函数调用`.filter(questions)`。最后一个`)`不应该在那里。
2.  过滤通过遍历数组并使用每个元素调用函数来工作。在这里，每个元素都是一个对象`{question: "..."}`，而不是一个字符串。
3.  您检查是否相等，而您想检查问题字符串是否*包含*某个字符串。您甚至希望它不区分大小写。
4.  您无法提醒对象。改为使用控制台`console.log`。

所以：http: [//jsfiddle.net/7cFbk/45/](http://jsfiddle.net/7cFbk/45/)

```
var questions = [
    {question: "what is your name"},
    {question: "How old are you"},
    {question: "whats is your mothers name"},
    {question: "where do work/or study"},
];

var evens = _.filter(questions, function(obj) {
    // `~` with `indexOf` means "contains"
    // `toLowerCase` to discard case of question string
    return ~obj.question.toLowerCase().indexOf("how");
});

console.log(evens); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T19:12:02.193

这是一个工作版本：

```
var questions = [
    {question: "what is your name"},
    {question: "How old are you"},
    {question: "whats is your mothers name"},
    {question: "where do work/or study"},
];

var hasHow = _.filter(questions, function(q){return q.question.match(/how/i)});

console.log(hasHow); 
```

### 已修复的问题：

*   Parens 未正确放置。
*   使用`console.log`而不是警报。
*   在迭代每个问题时，您可能应该使用正则表达式来查找“如何”。
*   `_filter`遍历一个数组。您的数组包含对象，每个对象都包含一个问题。您传递给的函数`_filter`需要以相同的方式检查每个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T07:52:33.250

```
data = {
    'data1' :{
        'name':'chicken noodle'
     },
    'data2' :{
        'name':'you must google everything'
     },
    'data3' :{
        'name':'Love eating good food'
     }
}

_.filter(data,function(i){

    if(i.name.toLowerCase().indexOf('chick') == 0){

        console.log(i);

    }else{

        console.log('error');

    }

}) 
```

# java - 如果 ID 存在则更新记录，否则插入值

> ID：11924979
> 
> 赞同：0
> 
> 时间：2012-08-12T19:04:02.333
> 
> 标签：java, sql-server, jsp

如果记录存在，我正在尝试更新值，否则将值插入数据库。但是，这是行不通的。我写了下面的代码。

```
 String sqlCheck = "Select * from [UAP].[dbo].[UAP_EMPLOYEE] where EMP_EMPLOYEE_ID = '"+empId+"' ";
    PreparedStatement prpStatementCheck = conn.prepareStatement(sqlCheck);
    prpStatementCheck.setString(1, EMP_EMPLOYEE_ID);
    ResultSet rsCheck=prpStatementCheck.executeQuery();
    String check=null;

     while((rsCheck.next())
    {
         if(rsCheck.next()>0)
          update statement; 
         else
             Insert Statement; 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:10:51.913

setString 应与绑定变量一起使用：您的 sql 字符串应如下所示：

```
"Select * from [UAP].[dbo].[UAP_EMPLOYEE] where EMP_EMPLOYEE_ID = ?" 
```

您的 SqlServer 的版本是什么？如果是 2008 或更高版本，您可以利用[UPSERT](http://www.databasejournal.com/features/mssql/article.php/3739131/UPSERT-Functionality-in-SQL-Server-2008.htm)命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T19:32:06.170

只有当员工存在时才会执行该条件 while((rsCheck.next()) 。否则，该代码

```
if(rsCheck.next()>0)
      update statement; 
     else
         Insert Statement; 
```

是无法到达的。你可以使用类似的东西：

```
boolean exists = false;

 while((rsCheck.next())
{
     update statement; 
     exists = true;
}
if(!exists) insert statement; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T19:17:05.923

由于 EMP_EMPLOYEE_ID 字段是 INTEGER 类型，请使用`setInt`而不是`setString`：

```
String sqlCheck = "Select * from [UAP].[dbo].[UAP_EMPLOYEE] where EMP_EMPLOYEE_ID = ?";
PreparedStatement prpStatementCheck = conn.prepareStatement(sqlCheck);
prpStatementCheck.setInt(1, EMP_EMPLOYEE_ID); 
```

# python - IOError：[Errno 13] 权限被拒绝，打开文件时

> ID：11924981
> 
> 赞同：4
> 
> 时间：2012-08-12T19:04:14.230
> 
> 标签：python, windows, file-io

我有一个 Python 脚本，用于查找文件文件夹（添加/删除）中的任何更改。我正在寻找添加的任何新文件，并希望打开它们并从中读取一些数据。

代码是

```
# Utility to check for any new jobs

import os
import win32file
import win32event
import win32con
import string

path= r"C:\Users\dZONE\Desktop\py"

change_handle = win32file.FindFirstChangeNotification      (path,0,win32con.FILE_NOTIFY_CHANGE_FILE_NAME)

try:

  old_path_contents = dict ([(f, None) for f in os.listdir (path)])
while 1:
  result = win32event.WaitForSingleObject (change_handle, 500)

if result == win32con.WAIT_OBJECT_0:
  new_path_contents = dict ([(f, None) for f in os.listdir (path)])
  added = [f for f in new_path_contents if not f in old_path_contents]
  #deleted = [f for f in old_path_contents if not f in new_path_contents]
  if added: print "Added: ", ", ".join (added)
  #if deleted: print "Deleted: ", ", ".join (deleted)
  # My open
  print "Len" , len(added)
  for item in added:
   print item
   ad=open(item,'r')
   print ad.read()

  old_path_contents = new_path_contents
  win32file.FindNextChangeNotification (change_handle)

 finally:
   win32file.FindCloseChangeNotification (change_handle) 
```

当我试图打开文件时，它给了我 IO 错误 13。虽然我拥有文件夹和文件的权限。我编写了另一个测试代码并尝试直接打开同一个文件，将文件名提供给 open() 并且它确实有效。

如果有人能指出我正在做的错误，将不胜感激。

编辑：错误信息

```
Traceback (most recent call last):
File "C:\Users\dZONE\Desktop\py\util.py", line 50, in <module>
ad=open(item,'r')
IOError: [Errno 13] Permission denied: 'ad.sjs_hdr' 
```

PS我是python新手，所以也许我犯了一些非常愚蠢的错误谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T19:56:27.837

该`.listdir()`方法只为您提供不带路径的文件名，您可能试图在*当前*目录中打开文件，而不是在`path`.

您必须使用该[`os.path.join`功能](http://docs.python.org/library/os.path.html#os.path.join)来`path`组合`item`：

```
for item in added:
    print item
    fullfilename = os.path.join(path, item)
    ad=open(fullfilename,'r')
    print ad.read() 
```

# javascript - 使用 JavaScript 为 DIV 设置动画会在 Chrome 上呈现工件

> ID：11924986
> 
> 赞同：15
> 
> 时间：2012-08-12T19:04:46.967
> 
> 标签：javascript, google-chrome, animation

作为一个实验，我试图在不使用画布对象的情况下在 JavaScript 中复制 AS3 的 Sprite 功能。我认为使用绝对定位的 div 并操作它们的 css 属性是一件轻而易举的事，但是在 Chrome 中，动画会引入奇怪的伪影（似乎是因为重绘问题）。

我找不到我做错了什么？事实上，代码非常简单。以下是我尝试过的一些没有帮助的点：

*   使用相对定位的 div（而不是绝对定位。）
*   使用边距（与顶部和左侧属性相反。）
*   将对象直接附加到正文（而不是附加到容器 div。）
*   使用 setTimeout（相对于 requestAnimationFrame）

你可以在这里看到一个简化的小提琴：http: [//jsfiddle.net/BVJYJ/2/](http://jsfiddle.net/BVJYJ/2/)

编辑：http: [//jsfiddle.net/BVJYJ/4/](http://jsfiddle.net/BVJYJ/4/)

在这里，您可以在我的浏览器上看到工件：

![Chrome 中的工件](../Images/393ca77aeb489a009e79304982a59f0e.png)

这可能是我的设置中的一个错误（Windows 7 64 位，Chrome 21.0.1180.75）。没有其他浏览器表现出这种行为。如果有人可以评论我可能做错了什么，我将不胜感激。我更好奇这背后的原因，而不是顺便说一句的解决方法。也就是说，欢迎任何解释。:)

编辑：示例代码中有一个错误导致使用 setTimeout，即使我认为使用了 RAF。requestAnimationFrame 解决了基本转换的问题，但问题仍然存在于 CSS 转换，例如旋转。

![Chrome 中带有旋转变换的工件。](../Images/69c966757325d234410e0fe75499ed73.png)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-18T23:56:28.783

我的 liteAccordion 插件也有同样的问题。可以通过在您正在制作动画的元素上将背面可见性设置为隐藏来修复它，您可以在此处看到：http: [//jsfiddle.net/ZPQBp/1/](http://jsfiddle.net/ZPQBp/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T19:16:24.610

一些研究表明，`setTimeout`由于各种原因，这可能会导致问题。你真的应该使用[`requestAnimationFrame`](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)：

> 计时器不精确到毫秒。以下是一些常见的计时器分辨率[1](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)：
> 
> *   Internet Explorer 8 及更早版本的计时器分辨率为 15.625 毫秒
> *   Internet Explorer 9 及更高版本的计时器分辨率为 4 毫秒。火狐
> *   Safari 的计时器分辨率约为 10 毫秒。
> *   Chrome 的计时器分辨率为 4 毫秒。
> 
> 版本 9 之前的 Internet Explorer 的计时器分辨率为 15.625 ms [1](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)，因此 0 到 15 之间的任何值都可以是 0 或 15，但仅此而已。Internet Explorer 9 将计时器分辨率提高到 4 毫秒，但在动画方面仍然不是很具体。
> 
> Chrome 的计时器分辨率是 4 毫秒，而 Firefox 和 Safari 是 10 毫秒。因此，即使您将时间间隔设置为最佳显示，您仍然只能接近您想要的时间。

参考：[http ://www.nczonline.net/blog/2011/05/03/better-javascript-animations-with-requestanimationframe/](http://www.nczonline.net/blog/2011/05/03/better-javascript-animations-with-requestanimationframe/)

还

> `setTimeout`没有考虑浏览器中发生的其他事情。该页面可能隐藏在选项卡后面，在不需要时占用您的 CPU，或者动画本身可能已从页面滚动，从而再次不需要更新调用。Chrome 确实在隐藏选项卡中将 setInterval 和 setTimeout 限制为 1fps，但这并不是所有浏览器都依赖的。
> 
> 其次，`setTimeout`仅在需要时更新屏幕，而不是在计算机能够更新时。这意味着你糟糕的浏览器必须在重绘整个屏幕的同时重绘动画，如果你的动画帧速率与屏幕的重绘不同步，它可能会占用更多的处理能力。这意味着更高的 CPU 使用率和计算机的风扇启动，或耗尽移动设备上的电池。[Nicolas Zakas 在一篇相关文章](http://www.nczonline.net/blog/2011/05/03/better-javascript-animations-with-requestanimationframe/)中出色地解释了计时器分辨率对动画的影响 。

参考：[http ://creativejs.com/resources/requestanimationframe/](http://creativejs.com/resources/requestanimationframe/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T19:22:15.543

它与[亚像素定位](http://trac.webkit.org/wiki/LayoutUnit)有关。如果您四舍五入到最近的像素，您将不会看到这些渲染错误：

```
thisRef.block.style.left = Math.round((x + (mouseX - ox - x) * .125)) + "px";
thisRef.block.style.top = Math.round((y + (mouseY - oy - y) * .125)) + "px"; 
```

# java - Tomcat解密与Java主应用程序不同的aes

> ID：11924988
> 
> 赞同：1
> 
> 时间：2012-08-12T19:04:56.050
> 
> 标签：java, encryption, aes

我有一个 AES 加密字节数组。当我在 java 应用程序中解密这个数组时，一切都很好。但是在一个servlet容器中，解密错误。

这是我的字节数组

```
 String [] str = new String[] {"41", "23", "67" ,"-124", "-56" ,"-35" ,"89", "-54" ,"-17" ,"-49" ,"-53", "-21" ,"125" ,"4", "98", "-13", "60" ,"-72", "12", "75" ,"-105" ,"-104", "107", "34", "1", "-109", "-19", "-102", "-72", "9" ,"26" ,"-39", "-60", "-15", "0" ,"112", "-5", "-86", "-7", "5" ,"75", "100" ,"94", "-47", "6", "-81", "-22", "82", "97" ,"114", "3", "-24", "-80", "67", "106", "-100" ,"-35", "-83", "54", "-95", "124", "-22", "-100", "-47" };

        byte [] inv = new byte[str.length];

        int count = 0;
        for (String s : str) {
            inv[count++] = Byte.valueOf(s);
        } 
```

Java应用程序的结果

```
Decrypted: 000000.016*kWh|000000.007*kWh|000000.015*kWh|000000.000*kWh 
```

我的申请代码

```
 byte[] keyBytes = "vikoAmrPass12345".getBytes(); 
 SecretKeySpec key = new SecretKeySpec(keyBytes, "AES"); 
 Cipher cipher = Cipher.getInstance("AES/ECB/NoPadding"); 
 cipher.init(Cipher.DECRYPT_MODE, key); 
 byte [] out = cipher.doFinal(inv); 
 System.out.println("Decrypted: " +new String(out)); 
```

我在 servlet 容器上工作的 web 代码与上面的代码完全相同。但是容器解密的结果是

```
'?f ??0??????b]5hJ?F*`U????.8??p@?]?u?~Nb??z?????{3??;? 
```

这里有什么问题？

在我的应用程序中，我得到了加密的字节数组

```
ServerSocket ss = new ServetSocket(port); 
Socket socket = ss.accept(); 
InputStream in = socket.getInputStream(); 
byte [] sizeBuffer = new byte[5]; 
in.read(sizeBuffer); 
byte [] dataBuffer = new byte[Integer.valueOf(""+new String(sizeBuffer)];     
in.read(dataBuffer); 
```

加密数据存在于*dataBuffer*数组中。并在嵌入式设备中处理加密。

我的配置

java 1.6 tomcat 7.1

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T19:25:31.630

从您发布的代码中：

```
byte[] keyBytes = "vikoAmrPass12345".getBytes(); 
```

这*可能*是问题所在。如果您希望在多个地方获得相同的结果，则永远不应使用平台默认编码。始终指定编码。

如果你已经这样做了，你*也*可能在传输加密数据时遇到问题。如果你曾经从它创建一个字符串，你几乎肯定应该使用 Base64，例如使用[这个库](http://iharder.net/base64)。如果您正在使用：

```
// Bad! Do not use!
String encryptedText = new String(encryptedData); 
```

那么这基本上会丢失信息，并且很可能是问题的原因。

编辑：好的，所以现在我们知道您的接收代码是：

```
ServerSocket ss = new ServetSocket(port);
Socket socket = ss.accept();
InputStream in = socket.getInputStream();
byte [] sizeBuffer = new byte[5];
in.read(sizeBuffer);
byte [] dataBuffer = new byte[Integer.valueOf(""+new String(sizeBuffer)]; 
in.read(dataBuffer); 
```

这里你至少有三个问题：

*   您的代码不可能处理超过 99999 个字节，并且不清楚您希望它如何处理少于 10000 个字节。
*   您再次假设默认字符编码跨平台是一致的
*   您的代码*假定*每次调用`read`时都会读取确切数量的信息。很有可能不会，特别是对于网络流。您应该使用 的返回值来查看*实际*读取`read`了多少。你要么需要循环，直到你读取了所有需要的数据（或者流中的数据用完了），要么使用更高级别的 API 来做同样的事情。

# php - 使用 stream_filter_append 和 stream_copy_to_stream 解压缩 gzip

> ID：11924990
> 
> 赞同：2
> 
> 时间：2012-08-12T19:05:19.940
> 
> 标签：php, stream, zlib

发现这个： [https](https://stackoverflow.com/a/11373078/530599) ://stackoverflow.com/a/11373078/530599 - 很好，但是

怎么样`stream_filter_append($fp, 'zlib.inflate', STREAM_FILTER_*`

寻找另一种解压缩数据的方法。

```
$fp = fopen($src, 'rb');
$to = fopen($output, 'wb');

// some filtering here?
stream_copy_to_stream($fp, $to);
fclose($fp);
fclose($to); 
```

例如 200+ Mb`$src`的一些网址在哪里:)`http://.../file.gz`

**添加了有效的测试代码，但分两步：**

```
<?php

    $src = 'http://is.auto.ru/catalog/catalog.xml.gz';
    $fp = fopen($src, 'rb');
    $to = fopen(dirname(__FILE__) . '/output.txt.gz', 'wb');
    stream_copy_to_stream($fp, $to);
    fclose($fp);
    fclose($to);

    copy('compress.zlib://' . dirname(__FILE__) . '/output.txt.gz', dirname(__FILE__) . '/output.txt'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T19:10:58.170

尝试[`gzopen`](http://php.net/gzopen)打开一个 gzip (.gz) 文件进行读取或写入。如果文件未压缩，它会透明地读取它，因此您可以安全地读取非 gzip 压缩文件。

```
$fp = gzopen($src, 'rb');
$to = fopen($output, 'w+b');
while (!feof($fp)) {
    fwrite($to, gzread($fp, 2048)); // writes decompressed data from $fp to $to
}

fclose($fp);
fclose($to); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T23:33:10.437

PHP 的流过滤子系统中令人讨厌的遗漏之一是缺少 gzip 过滤器。Gzip 本质上是使用 deflate 方法压缩的内容。然而，它在压缩数据之前添加了一个 2 字节的标头，并在末尾添加了一个 Adler-32 校验和。如果你只是将一个 zlib.inflate 过滤器添加到流中，它是行不通的。在附加过滤器之前，您必须跳过前两个字节。

请注意，PHP 5.2.X 版本中的流过滤器存在严重错误。这是由于流缓冲。基本上 PHP 将无法通过过滤器传递流的内部缓冲区中已经存在的数据。如果您在附加膨胀过滤器之前执行 fread($handle, 2) 来读取 gzip 标头，那么它很有可能会失败。调用 fread() 将导致 PHP 尝试填满其缓冲区。即使对 fread() 的调用只要求两个字节，PHP 实际上可能会从物理介质中读取更多字节（比如说 1024）以尝试提高性能。由于上述错误，额外的 1022 字节不会发送到解压缩例程。

# javascript - 使用 jQuery 和图像映射在悬停时更改图像

> ID：11924993
> 
> 赞同：0
> 
> 时间：2012-08-12T19:05:31.873
> 
> 标签：javascript, jquery, image, hover, jquery-hover

我有一张正在使用图像映射的图像。当根据地图将鼠标悬停在图像的一部分上时，我希望图像发生变化，但我不确定如何使用 jQuery 进行此操作。这是我尝试过的代码：

**HTML：**

```
 <div class="img-center">
  <img src="img-src_off.jpg" usemap="#Map" class="feature-image" border="0" />
    <map name="Map" id="Map">
      <area shape="rect" coords="77,461,391,492" href="#" target="_blank"
            class="link-1" />
      <area shape="rect" coords="557,461,855,490" href="#" target="_blank" 
            class="link2" />
    </map>
 </div> 
```

**JS：**

注意：这是我尝试过的 JS，但抛出了错误（下面列出了错误），我现在不知道该尝试什么。如果我能找到可以正常工作的代码，我就不必使用此代码。

```
var $j = jQuery.noConflict();
  $j(document).ready(function() {
     $j.preLoadImages("img_src_01.jpg",
                     "img_src_02.jpg"
     ); 

     $j(".link1").hover(function(){
        this.src = this.src.replace("_off","_01");
        },
        function(){
        this.src = this.src.replace("_01","_off");
        }
     );

           $j(".link2").hover(function(){
        this.src = this.src.replace("_off","_02");
        },
        function(){
        this.src = this.src.replace("_02","_off");
        }
     ); 
   });

  (function(j$) {
    var cache = [];
    $j.preLoadImages = function() {
      var args_len = arguments.length;
      for (var i = args_len; i--;) {
        var cacheImage = document.createElement('img');
        cacheImage.src = arguments[i];
        cache.push(cacheImage);
      }
    }
  }); 
```

我看到的错误如下：

```
TypeError: this.src is undefined
[Break On This Error]   

this.src = this.src.replace("_off","_01");

(this error repeats itself on every hover) 
```

而这个错误：

```
TypeError: $j.preLoadImages is not a function
[Break On This Error]   

"img_src_02.jpg" 
```

请在回答时提供示例，因为我的 Javascript 不是很流利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:20:32.997

> 要编写 jQuery 插件，首先向 jQuery.fn 对象添加一个新的函数属性，其中该属性的名称是您的插件的名称：

尝试以下操作：

```
(function($j) {
   $j.fn.preLoadImages = function() {
        //...
   }
})(jQuery); 
```

# c++ - 如何将 Eclipse 项目转移到新计算机？

> ID：11924994
> 
> 赞同：1
> 
> 时间：2012-08-12T19:05:33.510
> 
> 标签：c++, eclipse-cdt

我是 C++ 和 Eclipse（带有 CDT 插件）的新手，我想将我在旧计算机上编写的小项目转移到我的新计算机上。在新机器上，我是否必须创建一个新项目，为项目中的每个相应文件创建新文件，然后将源代码复制并粘贴到这些文件中，或者在 Eclipse 中是否有允许我一次导入文件的设置. 我一直在搜索所有菜单项，例如“导入项目”或“导入文件”，但我找不到任何东西。复制和粘贴是唯一的解决方案吗？我正在使用 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T19:09:49.730

首先，创建一个新的空工作区。

然后打开**文件**菜单并选择**导入**...。

在这里，您将找到一个导入现有项目的选项，该选项应与旧/复制的源目录中的项目文件一起使用。

![在此处输入图像描述](../Images/595947615928b705a2a08a4f99444935.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T19:07:25.600

> 从现有源创建项目：选中后，您可以指定新建 Java 项目向导将从中检索现有 Java 项目的位置。在这种情况下，向导将分析现有项目并自动设置构建路径。单击 Browse... 以浏览现有 Java 项目的位置。

[http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-wizard-java-project.htm](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-wizard-java-project.htm)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-12T19:11:13.567

最简单的方法是复制完整的工作区文件夹。