# StackOverflow 问答 10333000-10333999

# ruby-on-rails - Show 方法中的 ActiveAdmin 显示集合

> ID：10333007
> 
> 赞同：5
> 
> 时间：2012-04-26T12:03:40.037
> 
> 标签：ruby-on-rails, activeadmin

我有包，它有多个组件（使用 has_many 通过捆绑链接）

在 ActiveAdmin 中，当我显示一个包时，我希望能够显示链接到它的所有组件

所以我有一个显示方法如下：

```
show do
 attributes_table do
  row :description

  row 'Components' do |n|
     package.components.each do |component|
       #debugger
       component.name
     end
  end
 end
end 
```

当我显示页面时，它会显示每条记录的完整版本，即（我在下面显示其中一个，但组件数量将与组件一样多）：

```
[#<Component id: 2, component_token: "6e9be0b0-71c0-012f-d523-00254bca74c4", name: "Exercise Module", description: "This is the exercise module", created_at: "2012-04-26 11:25:20", updated_at: "2012-04-26 11:25:20">] 
```

当我在注释的地方停止调试器时，component.name 的值作为“Exercise Module”给出，但这不是输出到节目的内容 - 事实上，ActiveAdmin 似乎忽略了该组件中的所有内容| 堵塞。

如何显示记录属性，而不是整个记录本身？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-26T12:12:17.833

发生这种情况是因为该行显示了这一行的输出，这`package.components.each {|component| ... }`就是集合

试试这个：

```
show do

 attributes_table do
  row :description

  row 'Components' do |n|
     package.components.map(&:name).join("<br />").html_safe
  end
 end

end 
```

或您喜欢的任何其他连接字符串:)

# java - 如何验证纯文本的哈希而不是纯文本本身

> ID：10333008
> 
> 赞同：0
> 
> 时间：2012-04-26T12:03:50.640
> 
> 标签：java, digital-signature, sha1

我正在尝试在 Java 中验证带有 RSA 签名的 SHA1。我的代码实际上是这样的：

```
String plainText = "myString";
String signature_b64_encoded = "bOBrJmPGJ6eqDpk7sZMJZ0QujErTVz/boe44ANTLbeHd1Pm56UBH3uUCdH4sDZcDczIW5E6Q0o2dq/4lpjTAOzu3FjaLMAZ1sSTn8Ds8XxQnOnmhapbrd/6sNSr9fC57c7BlgAy7GZbCZGUQC/b/UETb8cIR0B1Dqk41RDorm+NdwDEVCTl4q9I7D70/Kau/aGpUvJ3ULgzM3/JnxHpaWmG7xAsXH9MyxVSxi/ZpJ0WuyuaAiSmiDN946O/ElIxRqnaEtFuSIDinUYz4yAWtoLdssDO5SqMFb8EskUdfExs1IcGtYRaIbz3ASTFdVQoou7HI4pxVn1Sh4Y4mrxa7Ag==";
Signature instance = Signature.getInstance("SHA1WithRSA");
PublicKey pkey = cert.getPublicKey(); // gets my Public Key
instance.initVerify(pkey);
instance.update(plainText.getBytes());
Boolean blnResult = instance.verify(Base64.decode(strSignature.getBytes("UTF-8"), Base64.DEFAULT)); 
```

问题是验证的签名仅在某些情况下为假，而在其他情况下为真。我无法理解这个结果随机性的原因。

*   我要验证的字符串已在 .NET 环境中签名
*   在 .NET 中完成的签名验证是**在 plainText 的哈希上进行的，而不是在 plainText 上进行的**。

**问题 1**

有没有办法在 Java 中验证纯文本的哈希而不是纯文本本身（在 .NET 中可能）？这将允许确保在验证过程开始时具有相同的输入。

**问题2**

是否有另一种方法可以在 Java 中使用 RSA 签名验证 SHA1？

# linux - 如何应用“非统一差异”？

> ID：10333013
> 
> 赞同：1
> 
> 时间：2012-04-26T12:04:04.380
> 
> 标签：linux, diff, patch

如果我像这样创建一个非统一差异

```
diff original.txt edited.txt > 1.patch
cp original.txt test.txt 
```

我想第一个文件名应该是未修改/原始文件，第二个文件名应该如何看待补丁？

那么我该如何应用补丁`test.txt`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T12:08:09.523

这很简单

```
patch test.txt 1.patch 
```

# tsql - TSQL从列中的多个范围中选择唯一值

> ID：10333015
> 
> 赞同：2
> 
> 时间：2012-04-26T12:04:13.807
> 
> 标签：tsql

一个初学者的问题。

我有两张桌子。一 (A) 包含`Start_time, End_time, Status`. 第二个 (B) 包含`Timestamp, Error_code`. 第二个表每隔几秒就会被系统自动记录一次，因此它包含许多非唯一的 Error_code 值（它是随机变化的，但在表 A 的时间范围内）。我需要的是为表 A 中每个时间范围的第一个表中的每个时间范围（在我的情况下为每一行）选择唯一的错误代码：

A.Start_time，A.End_time B.Error_code。

我来到了这个：

```
select A.Start_time,
       A.End_time,
       B.Error_code
from B
  inner join A
    on B.Timestamp between A.Start_time and A.End_time 
```

这是错误的，我知道。欢迎任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T12:49:58.723

如果游览查询给出了很多重复项，请使用 distinct 删除它们：

```
select DISTINCT A.Start_time, A.End_time, B.Error_code
from B
inner join A on B.Timestamp between A.Start_time and A.End_time 
```

# php - 如何访问具有整数或无效属性名称等名称的对象属性？

> ID：10333016
> 
> 赞同：100
> 
> 时间：2012-04-26T12:04:18.533
> 
> 标签：php, object, properties

我正在使用`json_decode()`类似的东西：

```
$myVar = json_decode($data) 
```

这给了我这样的输出：

```
[highlighting] => stdClass Object
        (
            [448364] => stdClass Object
                (
                    [Data] => Array
                        (
                            [0] => Tax amount liability is ....... 
```

我想访问键 [0] 中的字符串值。当我尝试做类似的事情时：

```
print $myVar->highlighting->448364->Data->0; 
```

我收到此错误：

> 解析错误：语法错误，意外的 T_DNUMBER

这两个数字/整数似乎有问题。

* * *

## 回答 #1

> 赞同：305
> 
> 时间：2012-04-26T12:16:18.673

# 更新为 PHP 7.2

[PHP 7.2 引入了在对象和数组强制转换](https://wiki.php.net/rfc/convert_numeric_keys_in_object_array_casts)中转换数字键的行为更改，它修复了这种特殊的不一致性并使以下所有示例的行为都符合预期。

少一件事要混淆！

* * *

# 原始答案（适用于 7.2.0 之前的版本）

PHP 有一些你*真的*不想在里面找到自己的黑暗小巷。名称为数字的对象属性就是其中之一...

## 他们从未告诉过你的事

**事实 #1：**您不能轻易访问名称不是合法变量名的属性

```
$a = array('123' => '123', '123foo' => '123foo');
$o = (object)$a;
echo $o->123foo; // error 
```

**事实 #2：**您*可以*使用花括号语法访问此类属性

```
$a = array('123' => '123', '123foo' => '123foo');
$o = (object)$a;
echo $o->{'123foo'}; // OK! 
```

**事实 #3：**但如果属性名称全为数字，则*不然！*

```
$a = array('123' => '123', '123foo' => '123foo');
$o = (object)$a;
echo $o->{'123foo'}; // OK!
echo $o->{'123'}; // error! 
```

[**活生生的例子**](http://ideone.com/sn119)。

**事实 #4：**好吧，除非对象一开始不是来自数组。

```
$a = array('123' => '123');
$o1 = (object)$a;
$o2 = new stdClass;
$o2->{'123'} = '123'; // setting property is OK

echo $o1->{'123'}; // error!
echo $o2->{'123'}; // works... WTF? 
```

[**活生生的例子**](http://ideone.com/ZxVSZ)。

很直观，你不同意吗？

## 你可以做什么

**选项#1：手动执行**

最实用的方法是将您感兴趣的对象转换回一个数组，这将允许您访问属性：

```
$a = array('123' => '123', '123foo' => '123foo');
$o = (object)$a;
$a = (array)$o;
echo $o->{'123'}; // error!
echo $a['123']; // OK! 
```

不幸的是，这不能递归地工作。因此，在您的情况下，您需要执行以下操作：

```
$highlighting = (array)$myVar->highlighting;
$data = (array)$highlighting['448364']->Data;
$value = $data['0']; // at last! 
```

**选项#2：核选项**

另一种方法是编写一个函数，将对象递归地转换为数组：

```
function recursive_cast_to_array($o) {
    $a = (array)$o;
    foreach ($a as &$value) {
        if (is_object($value)) {
            $value = recursive_cast_to_array($value);
        }
    }

    return $a;
}

$arr = recursive_cast_to_array($myVar);
$value = $arr['highlighting']['448364']['Data']['0']; 
```

但是，我不相信这是一个更好的选择，因为它会不必要地转换到数组中您*不*感兴趣的所有属性以及您感兴趣的属性。

**选项＃3：聪明地玩**

上一个选项的替代方法是使用内置 JSON 函数：

```
$arr = json_decode(json_encode($myVar), true);
$value = $arr['highlighting']['448364']['Data']['0']; 
```

JSON 函数有助于执行到数组的递归转换，而无需定义任何外部函数。不管这看起来多么理想，它具有选项 #2 的“nuke”缺点，*另外还有*一个缺点，即如果您的对象中有任何字符串，这些字符串*必须*以 UTF-8 编码（这是 的要求[`json_encode`](http://www.php.net/manual/en/function.json-encode.php)）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-08T23:28:10.477

只是想在乔恩雄辩的解释中添加失败的原因。这完全是因为在创建数组时，php 将键转换为整数（如果可以的话），这会导致对已转换为对象的数组进行查找问题，这仅仅是因为保留了数字键。这是有问题的，因为所有属性访问选项都期望或转换为字符串。您可以通过执行以下操作来确认这一点：

```
$arr = array('123' => 'abc');
$obj = (object) $arr;
$obj->{'123'} = 'abc';
print_r( $obj ); 
```

这将输出：

```
stdClass Object ( 
  [123] => 'abc', 
  [123] => 'abc'
) 
```

所以该对象有两个属性键，一个是数字的（不能访问），一个是基于字符串的。这就是 Jon`#Fact 4`工作的原因，因为通过使用花括号设置属性意味着您始终定义基于字符串的键，而不是数字。

采用 Jon 的解决方案，但反过来，您可以通过执行以下操作从数组中生成一个始终具有基于字符串的键的对象：

```
$obj = json_decode(json_encode($arr)); 
```

从现在开始，您可以使用以下任一方法，因为以这种方式访问​​总是将花括号内的值转换为字符串：

```
$obj->{123};
$obj->{'123'}; 
```

好旧的不合逻辑的PHP...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-03T08:32:11.527

> *对于 PHP 7*

访问以数字作为属性名称的对象属性。在将数组转换为对象后最需要。

```
 $arr = [2,3,7];
    $o = (object) $arr;

    $t = "1";
    $t2 = 1;
    $t3 = (1);

    echo $o->{1};      // 3
    echo $o->{'1'};   // 3
    echo $o->$t;        // 3
    echo $o->$t2;       // 3
    echo $o->$t3;       // 3

    echo $o->1;       // error
    echo $o->(1);      // error 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T12:14:15.593

我从网上复制了这个功能。如果它像它说的那样工作（“将 stdClass 对象转换为多维数组的功能”），请尝试以下操作：

```
<?php

    function objectToArray($d) {
        if (is_object($d)) {
            // Gets the properties of the given object
            // with get_object_vars function
            $d = get_object_vars($d);
        }

        if (is_array($d)) {
            /*
            * Return array converted to object
            * Using __FUNCTION__ (Magic constant)
            * for recursive call
            */
            return array_map(__FUNCTION__, $d);
        }
        else {
            // Return array
            return $d;
        }
    }

?> 
```

*   首先将您的数组传递给`objectToArray`函数
*   然后取返回值
*   回声`[highlighting][448364][Data][0]`

来源：[PHP stdClass 到 Array 和 Array 到 stdClass](http://www.if-not-true-then-false.com/2009/php-tip-convert-stdclass-object-to-multidimensional-array-and-convert-multidimensional-array-to-stdclass-object/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-27T06:52:30.890

乔恩综合答案的最后一个替代方案：

只需使用 json_decode() 并将第二个参数设置为**true**。

```
$array = json_decode($url, true); 
```

然后，这将返回一个关联数组而不是一个对象，因此无需在事后进行转换。

这可能并不适合每个应用程序，但它确实帮助我轻松地引用原始对象的属性。

在本教程中找到了解决方案 - [http://nitschinger.at/Handling-JSON-like-a-boss-in-PHP/](http://nitschinger.at/Handling-JSON-like-a-boss-in-PHP/)

问候

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-06T14:58:57.603

如果一个对象以`@`like开头：

```
SimpleXMLElement Object (
    [@attributes] => Array (
        [href] => qwertyuiop.html
        [id] => html21
        [media-type] => application/xhtml+xml
    )
) 
```

你必须使用：

```
print_r($parent_object->attributes()); 
```

因为`$parent_object->{'@attributes'}`或`$parent_object['@attributes']`不会工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T12:09:37.773

恐怕您不允许命名以数字开头的对象。将第一个以字母开头的名称重命名为“448364”。

第二个是一个数组，它们将通过括号访问，如下所示：

```
print myVar->highlighting->test_448364->Data[0] 
```

反而

# svn - TortoiseSVN：在以前的版本中显示文件？

> ID：10333017
> 
> 赞同：4
> 
> 时间：2012-04-26T12:04:23.570
> 
> 标签：svn, tortoisesvn, revision

假设我有 4 个修订版。

例如，有没有办法查看文件在修订版 2 上的情况？我找不到在 TortoiseMerge 中打开旧版本的选项

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T12:12:22.673

在文件上使用“显示日志”来查看修订，在那里你可以打开一个旧的...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-26T12:10:11.717

你必须安装

赢得合并

[http://garr.dl.sourceforge.net/project/winmerge/stable/2.12.4/WinMerge-2.12.4-Setup.exe](http://garr.dl.sourceforge.net/project/winmerge/stable/2.12.4/WinMerge-2.12.4-Setup.exe)

它将自动与tortoisesvn集成，然后您可以将文件与当前文件进行比较以查看更改

# iphone - 在 Xcode 4.3 中的键盘上放置一个 UIToolbar

> ID：10333018
> 
> 赞同：3
> 
> 时间：2012-04-26T12:04:24.183
> 
> 标签：iphone, ios4, uitoolbar

这是我的第一篇文章，我对 iOS 编程很陌生。我正在使用 xcode 4.3 并且有什么可能是一个简单的问题。我已经到处寻找一种将工具栏放置在键盘上方的方法，该键盘上有一个上一个/下一个按钮。当 xcode 使用界面生成器时，我发现了一些关于如何执行此操作的 tuts。但我找不到适用于最新版本 xcode 的版本。所以我把我在互联网上和苹果开发网站上找到的东西拿出来了一些代码。唯一的问题是，它不起作用！我收到一个错误，指出在 inputAcessoryView 的行上分配给只读属性。我知道这可能很简单，但是当将代码从以前的版本转移到较新的版本时，我很可能搞砸了。有人可以检查我的代码并让我知道我做错了什么。非常感谢。我已经包含了我的 .h/.m 文件

```
 #import <UIKit/UIKit.h>

    @interface keyboardViewController : UIViewController

    @property (retain, nonatomic) IBOutlet UIView *textField1;
    @property (retain, nonatomic) IBOutlet UIView *textField2;

    @property (nonatomic, retain) UIToolbar *keyboardToolbar;

    -(void)resignKeyboard:(id)sender;
    -(void)previousField:(id)sender;
    -(void)nextField:(id)sender;

    @end 
```

暗示

```
 #import "keyboardViewController.h"

    @interface keyboardViewController ()

    @end

    @implementation keyboardViewController
    @synthesize textField1;
    @synthesize textField2;
    @synthesize keyboardToolbar;

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        if (keyboardToolbar == nil)
        {
            keyboardToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0,                            self.view.bounds.size.width, 44)]; 

            UIBarButtonItem *previousButton = [[UIBarButtonItem alloc] initWithTitle:@"previous" 
                                                                               style:UIBarButtonItemStyleBordered
                                                                      target:self 
                                                                      action:@selector(previousField:)];
            UIBarButtonItem *nextButton = [[UIBarButtonItem alloc] initWithTitle:@"next" 
                                                                           style:UIBarButtonItemStyleBordered
                                                                          target:self 
                                                                          action:@selector(nextField:)];

            UIBarButtonItem *extraSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:(UIBarButtonSystemItemFlexibleSpace) target:nil action:nil];

            UIBarButtonItem *done = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:(UIBarButtonSystemItemDone) target:self action:@selector(resignKeyboard:)];

            [keyboardToolbar setItems:[[NSArray alloc] initWithObjects:previousButton, nextButton, extraSpace, done, nil]];

            textField1.inputAccessoryView  = keyboardToolbar;
            textField2.inputAccessoryView  = keyboardToolbar;

        }

    }

    -(void) resignKeyboard:(id)sender
    {
        if ([textField1 isFirstResponder])
            [textField1 resignFirstResponder];

        else if ([textField2 isFirstResponder])
        [textField2 resignFirstResponder];
    }

    -(void) previousField:(id)sender
    {
        if ([textField1 isFirstResponder])
            [textField2 becomeFirstResponder];

        else if ([textField2 isFirstResponder])
            [textField1 becomeFirstResponder];
    }

    -(void) nextField:(id)sender
    {
        if ([textField1 isFirstResponder])
            [textField2 becomeFirstResponder];

        else if ([textField2 isFirstResponder])
            [textField1 becomeFirstResponder];
    }

    - (void)viewDidUnload
    {
        [self setTextField1:nil];
        [self setTextField2:nil];
        [self setKeyboardToolbar:nil];
        [super viewDidUnload];
        // Release any retained subviews of the main view.
    }

    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    }

    @end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:14:54.063

```
@interface keyboardViewController : UIViewController<UITextFieldDelegate>

@property (retain, nonatomic) IBOutlet UITextField *textField1;
@property (retain, nonatomic) IBOutlet UITextField *textField2; 
```

并在 .m 位置而不是此代码

```
 textField1.inputAccessoryView  = keyboardToolbar;
        textField2.inputAccessoryView  = keyboardToolbar; 
```

粘贴这些代码

```
for (id view in self.view.subviews) {
    if ([view isKindOfClass:[UITextField class]]) {
        [(UITextField *)view setInputAccessoryView:keyboardToolbar];
    }
} 
```

粘贴此代码

```
-(void) resignKeyboard:(id)sender{

         [self.view endEditing:YES];
} 
```

而不是这个

```
-(void) resignKeyboard:(id)sender
    {
        if ([textField1 isFirstResponder])
            [textField1 resignFirstResponder];

        else if ([textField2 isFirstResponder])
        [textField2 resignFirstResponder];
    } 
```

在 viewDidLoad 方法中添加此代码

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil]; 
```

和

```
-(void)nextField:(id)sender{

    if ([textField1 isFirstResponder]) {

        [textField2 becomeFirstResponder];
        [previousButton setEnabled:YES];
        [nextButton setEnabled:NO];
    }
}

-(void)previousField:(id)sender{

    if ([textField2 isFirstResponder]) {

        [textField1 becomeFirstResponder];
        [nextButton setEnabled:YES];
        [previousButton setEnabled:NO];
    }
}

-(void)keyboardWillShow:(id)sender{

    if ([textField2 isFirstResponder]) {

        [nextButton setEnabled:NO];
        [previousButton setEnabled:YES];
    }else if ([textField1 isFirstResponder]) {

        [nextButton setEnabled:YES];
        [previousButton setEnabled:NO];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T12:29:32.547

当您的文本字段类型为 UIKeyboardTypeNumberPad 时，当您要添加“完成按钮”时，UIToolbar 非常有用。这是因为默认情况下它没有完成按钮。为此，您只需添加以下内容：-

```
 UIToolbar *boolbar = [UIToolbar new];
    boolbar.barStyle = UIBarStyleBlackTranslucent;
    [boolbar sizeToFit];

    UIBarButtonItem *leftBarButton =[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneBtnClicked)];

    NSArray *array = [NSArray arrayWithObjects:cancelleftBarButton, nil];
    [leftBarButton release];
    [boolbar setItems:array];

    textField_phnNumber.inputAccessoryView = boolbar; 
```

//选择器执行的方法

-（无效）doneBtnClicked{

```
[textField_phnNumber resignFirstResponder]; 
```

}

**注意：-**如果您使用 UITextField，请将其添加到 textFieldDidBeginEditing 委托方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T11:53:01.553

此代码在键盘上方的 UIToolbar **右侧**创建“完成”按钮：

```
UIToolbar *tbAboveKeyboard = [[UIToolbar alloc] init];
tbAboveKeyboard.barStyle = UIBarStyleBlackTranslucent;
[tbAboveKeyboard sizeToFit];

UIBarButtonItem *flexibleSpaceLeft = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

UIBarButtonItem *rightBarButton =[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonClicked:)];

NSArray *array = [NSArray arrayWithObjects:flexibleSpaceLeft, rightBarButton, nil];
[rightBarButton release];
[tbAboveKeyboard setItems:array];

yourTextView.inputAccessoryView = tbAboveKeyboard;
[tbAboveKeyboard release]; 
```

...

```
- (void)doneButtonClicked:(id)sender
{
    [searchTextField resignFirstResponder];
} 
```

# multiline - 在 COCS2D 中将 CCFadeIn 用于多行文本标签时出现问题

> ID：10333019
> 
> 赞同：0
> 
> 时间：2012-04-26T12:04:25.677
> 
> 标签：multiline

我想在 CCLabeTTF 中输出多行文本。我有能力。但我希望文本顺利出现。为此，我使用动作 CCFadeIn。$ //多行输出说明

```
 description =[descriptions valueForKey:@"text_MainHistory"];

    float fontSize =22;
    CGSize maxSize = {500, 400};
    CGSize actualSize = [description sizeWithFont:[UIFont fontWithName:@"Arial" size:fontSize] constrainedToSize:maxSize lineBreakMode:UILineBreakModeWordWrap];
    CGSize containerSize = {actualSize.width, actualSize.height};
    descriptionText = [CCLabelTTF labelWithString:description dimensions:containerSize alignment:UITextAlignmentCenter fontName:@"Arial" fontSize:fontSize];
    descriptionText.position = ccp(screenSize.width/2,screenSize.height/2);
    descriptionText.color = ccc3(128, 64, 0);
    [descriptionText runAction:[CCSequence actions:[CCFadeIn actionWithDuration:5.0f], nil]];
    [self addChild:descriptionText z:2]; 
```

但在性能半秒出现和消失的文字，然后开始CCFadeIn。

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:57:18.807

我不确定我是否理解，但看起来您应该在设置标签颜色后立即将标签的不透明度设置为零。

# ssl - 在 C++ 代码中实现 SSL 隧道（WinSock）

> ID：10333020
> 
> 赞同：0
> 
> 时间：2012-04-26T12:04:26.830
> 
> 标签：ssl, winsock, tunnel

就 TCPIP 连接而言，我有一个既是客户端又是服务器的应用程序。

Client1(externl) ---A---> 我的应用程序 ---B---> Server1(external)

连接 A 和 B 主要使用 CAsyncSocket 完成，但也使用 CSocket（超过 1 个 A 和超过 1 个 B）。

我的任务是将 SSL 添加到 A 和 B。为了安全要求，我们必须摆脱 stunnel - 管理员可以操纵隧道或监听隧道和我的应用程序之间的连接。不要问，但这是要求和想法，为什么必须在我的应用程序中完成，而不是使用 stunnel。

目前 SSL 是通过外部 SSL 隧道（stunnel）实现的。

Client1(externl) ---A---> STUNNEL1 ---> 我的应用程序 ---> STUNNEL2 ---B--> Server1(external)

使用例如openssl API 向A 和B 添加SSL 是一项繁重的工作。太多了。

所以我想.. 是否有可能在我的应用程序中创建 SSL 隧道（而不是 stunnel）。并让现有的套接字连接到隧道，但让 Windows 管理员无法监听 App 和隧道之间的流量？

```
NOW is:

My app now:
Listens 192.168.1.1:5000
Listens 192.168.1.1:5001

Connects to 192.168.1.2:9000
Connects to 192.168.1.2:9001 
```

* * *

```
New schema:
Listens 127.0.0.1:15000
Listens 127.0.0.1:15001
ThreadTunnel listens 192.168.1.1:5000 (forwards to  127.0.0.1:15000)
ThreadTunnel listens 192.168.1.1:5001 (forwards to  127.0.0.1:15001)

Connects to 127.0.0.1:19000
Connects to 127.0.0.1:19001
ThreadTunnel listens 192.168.1.1:19000 (forwards to  192.168.1.2:9000 )
ThreadTunnel listens 192.168.1.1:19001 (forwards to  192.168.1.2:9001 )

This schema would be ideal but problem is that admin could listen traffic between

127.0.0.1:15000  <-> 192.168.1.1:5000  
or 127.0.0.1:19000 <-> 192.168.1.1:19000 
```

有什么方法可以让 CSocket/CAsyncSocket 和 OpenSSL 在同一个 .exe 中相互通信，这样管理员就无法捕获流量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:58:04.297

这篇 CodeProject 文章似乎回答了这个问题： http: [//www.codeproject.com/Articles/3855/CAsyncSocketEx-Replacement-for-CAsyncSocket-with-p](http://www.codeproject.com/Articles/3855/CAsyncSocketEx-Replacement-for-CAsyncSocket-with-p)

# ios - Cocos2D游戏场景中CCSpriteBatchNode和纹理表的最佳方法是什么

> ID：10333026
> 
> 赞同：1
> 
> 时间：2012-04-26T12:04:44.990
> 
> 标签：ios, cocos2d-iphone, textures, ccsprite, frame-rate

我正在修改我在[Learn Cococs2D](http://www.apress.com/9781430233039/)上找到的一些教程，发现每当我在一个类中使用多个 CCSpriteBatchNode 时，帧速率都会下降。

阅读了一下，我了解到一个 CCSpriteBatchNode 一次只能接受 1 个纹理表，这对关卡设计造成了一些限制（精灵表可以最大 2048x2048 像素[讨论](https://stackoverflow.com/questions/7549266/when-to-use-ccspritebatchnode)）。尽管有一些扩展似乎可以克服这个限制（我还不敢尝试）[CCBigImage](https://github.com/cocos2d/cocos2d-iphone-extensions/tree/master/Extensions/CCBigImage)。

我正在尝试遵循一种文件方法并将我的所有图像加载到一个 CCSpriteFrameCache 中，但我在[编程指南](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:best_practices)上没有找到太多关于此的内容。

在[1](http://www.apress.com/9781430233039/)的 ShootEmUp 示例中，方法是在 ParallaxNode 以及 EnemyCache 等其他类中拥有一个 CCSpriteBatchNode（在链接[书源代码链接](http://www.apress.com/downloadable/download/sample/sample_id/640/)的第 8 章文件夹中找到源代码）

虽然我在 cocos2d-iphone.org 论坛上进行了一些研究，发现以下主题，**版主建议仅将 CCSpriteBatchNode 的一个实例添加到根层** [论坛主题](http://www.cocos2d-iphone.org/forum/topic/16827)。

**我现在有点困惑**。我注意到的一件事是，遵循[1](http://www.apress.com/9781430233039/)方法（多个实例）帧速率不是最佳的。你有类似的经历吗？你如何解决这个问题？

**多个 CCSpriteBatchNode 与否？每个级别或多个纹理表？**

非常感谢阅读:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:20:57.607

我不认为你的帧率问题是由于多个 CCSpriteBatchNode 的......我在一个类中使用了多个 CCSpriteBatchNode，我怀疑这是问题所在。但是，您只能拥有一个 CCSpriteFrameCache。您可能需要发布一些代码才能找到问题的根源

# google-visualization - Google Charts - 单击图例键时隐藏行

> ID：10333030
> 
> 赞同：5
> 
> 时间：2012-04-26T12:05:21.183
> 
> 标签：google-visualization

我希望能够在单击图例中的相关键时显示/隐藏折线图上的线条，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T17:04:46.240

要隐藏 GWT 可视化折线图上的显示线，请执行以下步骤：-

1.根据已有的DataTable对象创建一个DataView对象：

```
DataTable dataTable = DataTable.create();
DataView dataView = DataView.create(dataTable); 
```

2.在DataView中隐藏要隐藏的曲线/线的列：

```
dataView.hideColumns(new int[]{<id_of_the_column>}); 
```

3.基于DataView再次绘制整个图表：

```
chart.draw(dataView, getOptions()); 
```

请注意这里有一个警告，第 3 步是一个代价高昂的步骤，对我们来说它需要将近 20-30 秒。用于绘制新图形。但是，如果数据不大，它应该在您的上下文中是可管理的。

注意：您必须使用复选框制作自己的图例，并在用户选中/取消选中复选框时执行上述操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-08T21:20:02.063

如果您不需要包含缩放和动画，那么一种选择就是使用 lineWidth 和 areaOpacity 值隐藏数据；

```
 <head>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>

    <script>
        function updateTable() {

            // quick data - cleaned up for this example real data sources
            data = new Array();
            data[0] = new Array();
            data[0][0] = "Day";
            data[0][1] = "Metric 1";
            data[0][2] = "Metric 2";
            data[0][3] = "Metric 3";
            data[1] = new Array();
            data[1][0] = 1;
            data[1][1] = 200;
            data[1][2] = 50;
            data[1][3] = 400;
            data[2] = new Array();
            data[2][0] = 2;
            data[2][1] = 440;
            data[2][2] = 140;
            data[2][3] = 40;
            data[3] = new Array();
            data[3][0] = 3;
            data[3][1] = 300;
            data[3][2] = 500;
            data[3][3] = 600;

            var gdata = google.visualization.arrayToDataTable(data);

            var options = {
              // title: 'kala',
              hAxis: {title: 'Days',  titleTextStyle: {color: '#333'}}
              ,vAxis: {minValue: 0}
              ,height: 300
              ,width: 600
              ,chartArea: {left: 60}
              ,lineWidth: 2
              ,series: {0:{color: 'black', areaOpacity: 0.3, lineWidth: 2}
              ,1:{color: 'red', areaOpacity: 0.3, lineWidth: 2}
              ,2:{color: 'purple', areaOpacity: 0.3, lineWidth: 2}}
            };

            var chart = new google.visualization.AreaChart(document.getElementById('my_chart'));
            chart.draw(gdata, options);

            google.visualization.events.addListener(chart, 
                'select', 
                (function (x) { return function () { AreaSelectHander(chart, gdata, options)}})(1));

    }

    function AreaSelectHander(chart, gdata, options) {
        // when ever clicked we enter here 
        // more code needed to inspect what actually was clicked, now assuming people
        // play nicely and click only lables...
        var selection = chart.getSelection();       
        var view = new google.visualization.DataView(gdata);
        console.log(options);

        // click and data index are one off
        i = selection[0].column - 1;

        // just simple reverse
        if (options.series[i].lineWidth == 0) {
            options.series[i].lineWidth = 2;
            options.series[i].areaOpacity = 0.3;
        }
        else {
            options.series[i].lineWidth = 0;
            options.series[i].areaOpacity = 0.0;            
        }

        chart.draw(gdata, options);
    }
    </script>

    <script type='text/javascript'>
        google.load('visualization', '1', {packages:['table', 'corechart']});
        google.setOnLoadCallback(updateTable);
    </script>

</head>

<body>
    <div id='my_chart'></div>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-03T07:30:59.980

以下代码显示护目镜折线图，并具有通过单击图例标签隐藏/显示图形线的功能。#graph_sales_data 是显示图表的 div 的 id，sales_data_graph 是包含记录的变量。

```
function drawChart() {
                        if (sales_data_graph.length > 1)
                        {
                            $('#graph_sales_data').show();
                            var data = new google.visualization.arrayToDataTable(sales_data_graph);

                            // Instantiate and draw our chart, passing in some options.
                            var chart = new google.visualization.ChartWrapper({
                                chartType: 'LineChart',
                                containerId: 'graph_sales_data',
                                dataTable: data,
                                colors: ['#ea6f09', '#fb250d', '#0ac9c6', '#2680be', '#575bee', '#6bd962', '#ff0000', '#000000'],
                                options: {
                                    width: 1200,
                                    height: 500,
                                    fontSize: 10,
                                    pointSize: 10
                                }
                            });

                            // create columns array
                            var columns = [0];
                            /* the series map is an array of data series
                             * "column" is the index of the data column to use for the series
                             * "roleColumns" is an array of column indices corresponding to columns with roles that are associated with this data series
                             * "display" is a boolean, set to true to make the series visible on the initial draw
                             */
                            var seriesMap = [{
                                    column: 1,
                                    roleColumns: [1],
                                    display: true
                                }, {
                                    column: 2,
                                    roleColumns: [2],
                                    display: true
                                }, {
                                    column: 3,
                                    roleColumns: [3],
                                    display: true
                                }, {
                                    column: 4,
                                    roleColumns: [4],
                                    display: true
                                }, {
                                    column: 5,
                                    roleColumns: [5],
                                    display: true
                                }, {
                                    column: 6,
                                    roleColumns: [6],
                                    display: true
                                }, {
                                    column: 7,
                                    roleColumns: [7],
                                    display: true
                                }, {
                                    column: 8,
                                    roleColumns: [8],
                                    display: true
                                }];
                            var columnsMap = {};
                            var series = [];
                            for (var i = 0; i < seriesMap.length; i++) {
                                var col = seriesMap[i].column;
                                columnsMap[col] = i;
                                // set the default series option
                                series[i] = {};
                                if (seriesMap[i].display) {
                                    // if the column is the domain column or in the default list, display the series
                                    columns.push(col);
                                }
                                else {
                                    // otherwise, hide it
                                    columns.push({
                                        label: data.getColumnLabel(col),
                                        type: data.getColumnType(col),
                                        sourceColumn: col,
                                        calc: function() {
                                            return null;
                                        }
                                    });
                                    // backup the default color (if set)
                                    if (typeof(series[i].color) !== 'undefined') {
                                        series[i].backupColor = series[i].color;
                                    }
                                    series[i].color = '#CCCCCC';
                                }
                                for (var j = 0; j < seriesMap[i].roleColumns.length; j++) {
                                    //columns.push(seriesMap[i].roleColumns[j]);
                                }
                            }

                            chart.setOption('series', series);

                            function showHideSeries() {
                                var sel = chart.getChart().getSelection();
                                // if selection length is 0, we deselected an element
                                if (sel.length > 0) {
                                    // if row is undefined, we clicked on the legend
                                    if (sel[0].row == null) {
                                        var col = sel[0].column;
                                        if (typeof(columns[col]) == 'number') {
                                            var src = columns[col];

                                            // hide the data series
                                            columns[col] = {
                                                label: data.getColumnLabel(src),
                                                type: data.getColumnType(src),
                                                sourceColumn: src,
                                                calc: function() {
                                                    return null;
                                                }
                                            };

                                            // grey out the legend entry
                                            series[columnsMap[src]].color = '#CCCCCC';
                                        }
                                        else {
                                            var src = columns[col].sourceColumn;

                                            // show the data series
                                            columns[col] = src;
                                            series[columnsMap[src]].color = null;
                                        }
                                        var view = chart.getView() || {};
                                        view.columns = columns;
                                        chart.setView(view);
                                        chart.draw();
                                    }
                                }
                            }

                            google.visualization.events.addListener(chart, 'select', showHideSeries);

                            // create a view with the default columns
                            var view = {
                                columns: columns
                            };
                            chart.draw();
                        }
                        else
                        {
                            $('#graph_sales_data').hide();
                        }
                    } 
```

# java - MySQL：单列 SUM(IF(cond,a,b)) 与多列 Sum()

> ID：10333032
> 
> 赞同：0
> 
> 时间：2012-04-26T12:05:31.870
> 
> 标签：java, mysql, sum, lamp, multiple-columns

有一个我正在转换到 JVM 的旧式 LAMP 应用程序。

有问题的问题需要一个带有@250K 记录的评分表。目前，“scoreType”列表示为 tinyint，其中 1 = 目标，2 = 辅助 1，3 = 辅助 2。

对于得分领先者，要获得每个球员的进球/助攻 1/助攻 2 总数，查询片段如下所示：

```
SUM(IF(scoreType=1,1,0)) AS goals, SUM(IF(scoreType=2,1,IF(scoreType=3,1,0))) AS assists 
```

足够公平，可以完成这项工作，但我想知道，*就查询上下文将需要 SUM、COUNT 等操作的一般模式设计而言，*最好打破有限的选择集，如目标/辅助 1/辅助 2、赢/loss/tie 等分成单独的列而不是 tinyint 方法？

在单独的列中，查询变为：

```
SUM(goal) AS goal, SUM(assist1) AS assist1, SUM(assist2) AS assist2 
```

这是性能上的胜利（不需要 if(cond,a,b) 匹配），但代价是稍微增加了存储空间（3 列对 1 列）。

在应用层，一个潜在的重大胜利是从 ORM 不支持的 SUM(if()) 转移到 column.Sum(); 否则，我需要使用多合一列方法保留非静态类型的字符串 SQL 查询

想法？您将如何处理、保持原样或将数据库和应用程序代码迁移到 3 列方法？

感谢您的反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:11:10.697

```
SELECT scoreType, COUNT(scoreType)
FROM ...
GROUP BY scoreType 
```

不会吗？

* * *

对于比较备选方案的诚实时机，请使用更详细的；

```
SELECT COUNT(CASE WHEN scoreType = 1 THEN id ELSE NULL END) AS goals,
       ... 
```

# javascript - 如何在 jquery 模态脚本中动态命名按钮？

> ID：10333033
> 
> 赞同：1
> 
> 时间：2012-04-26T12:05:33.170
> 
> 标签：javascript, jquery

我有以下脚本用于创建带有按钮的模式。我只有下面的第一行：

```
$.modal = function(options)
    {
        var settings = $.extend({}, $.modal.defaults, options),
            root = getModalDiv(),

            // Vars for resizeFunc and moveFunc
            winX = 0,
            winY = 0,
            contentWidth = 0,
            contentHeight = 0,
            mouseX = 0,
            mouseY = 0,
            resized, content = '', contentObj; 
```

然后：

```
 var buttonsFooter = false;
    $.each(settings.buttons, function(key, value)
    {
        // Button zone
        if (!buttonsFooter)
        {
            buttonsFooter = $('<div class="block-footer align-'+settings.buttonsAlign+'"></div>').insertAfter(contentBlockWrapper);
        }
        else
        {
            // Spacing
            buttonsFooter.append('&nbsp;');
        } 
```

这是我创建模态的方式：

```
$.modal({
                    title: title,
                    closeButton: true,
                    content: content,
                    complete: function () {
                        applyTemplateSetup();
                        $($('#main-form')).updateTabs();
                    },
                    width: 900,
                    resizeOnLoad: true,
                    buttons: {
                        'Submit' : function () {
                            formSubmitHandler($('#main-form'));
                        }
                    }
                }); 
```

我想做的是使用这个脚本来创建我的带有按钮的模式并动态分配按钮名称。但是，当我尝试用 javascript 变量的名称替换“提交”时，它不起作用。有谁知道我怎么能做我需要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:08:48.560

用变量名替换`'Submit'`不起作用的原因是因为以这种方式定义对象时不需要引号（除非名称包含一些特殊字符）。`var obj = { 'Submit': function() { } }`与 完全一样`var obj = { Submit: function() { } }`。

您会注意到您已经在传递给的对象中省略了这样的引号`$.modal()`。

然而，虽然你不能写

```
var myVariable = 'abc';
var obj = { myVariable: 3 }; 
```

...并期望`obj.abc`存在（`obj.myVariable`将存在），你*可以*写

```
var myVariable = 'abc';
var obj[myVariable]  = 3; 
```

...并且`obj.abc` *将*存在。

因此，您可以通过以下方式解决您的问题：

```
var buttons = { };

buttons[variableName] = function () {
   formSubmitHandler($('#main-form'));
};

$.modal({
   ...
   buttons: buttons
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:10:46.513

**编辑：** David Hedlund 打败了我回答，并提供了一个类似的答案，其中涉及的代码修改更少。他建议只分解按钮选项而不是整个选项变量。**结束编辑**

首先，将选项分解为一个变量：

```
var modalOpts = {
    title: title,
    closeButton: true,
    content: content,
    complete: function () {
        applyTemplateSetup();
        $($('#main-form')).updateTabs();
    },
    width: 900,
    resizeOnLoad: true,
    buttons: {
        'Submit' : function () {
            formSubmitHandler($('#main-form'));
        }
    }
};

$.modal(modalOpts); 
```

然后将有问题的按钮从选项中分离出来，并使用方括号表示法来访问和写入属性：

```
var dynamicButtonName = 'Submit'; //Or whatever

var modalOpts = {
    title: title,
    closeButton: true,
    content: content,
    complete: function () {
        applyTemplateSetup();
        $($('#main-form')).updateTabs();
    },
    width: 900,
    resizeOnLoad: true,
    buttons: {}
};

modalOpts.buttons[dynamicButtonName] = function () {
    formSubmitHandler($('#main-form'));
};

$.modal(modalOpts); 
```

# android - Webview 和 CSS3

> ID：10333034
> 
> 赞同：2
> 
> 时间：2012-04-26T12:05:34.737
> 
> 标签：android

Android 2.2 是否支持所有的 Css3 标签？在 ICS 上：

```
background: -webkit-linear-gradient(left, #64615E, #B6B0AB, #64615E);
background: -moz-linear-gradient(left, #64615E, #B6B0AB, #64615E);
background: -o-linear-gradient(left, #64615E, #B6B0AB, #64615E); 
```

那些被正确渲染。在 Android 2.2 和 android 3 上它们不是。我做错了什么还是不支持这些标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T09:37:01.407

在 Android 2.2-2.3 上，您必须使用旧的渐变语法，即：

```
background: -webkit-gradient(linear, center left, center right, color-stop(0%, #64615E), color-stop(50%, #B6B0AB), color-stop(100%, #64615E)); 
```

您可以在 -webkit-linear-gradient 之前添加规则，因此它也适用于旧版本和新版本。此外，我认为 Android 浏览器/webview 将忽略其他供应商特定的前缀，如 -moz 或 -o。

# ios - UINavigationController 和 UINavigationItem 有什么区别

> ID：10333037
> 
> 赞同：12
> 
> 时间：2012-04-26T12:05:57.600
> 
> 标签：ios, uinavigationcontroller, uinavigationitem

我不明白两者之间有什么区别 `self.navigationcontroller.navigationitem`，`self.navigationitem` 我有基于导航的应用程序，并且在 navigationController 的`viewDidLoad`方法中`rootViewController`，我使用此代码将 NavigationItem titleView 设置为自定义图像

```
UIImageView* titleImage=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image.png"]];
self.navigationItem.titleView =titleImage; 
```

顺便说一句，如果我尝试通过这种方式更改标题视图

```
UIImageView* titleImage=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image.png"]];
self.navigationcontroller.navigationItem.titleView =titleImage; 
```

什么也没发生。，并且当navigationcontroller 将另一个视图推送到堆栈时，navigationitem 的titleview 被清除并且引用设置为nil，而且我注意到和的引用**`self.navigationcontroller.navigationitem`**不**`self.navigationitem`**一样。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T14:44:13.090

我相信您要问的是以下内容：`self.navigationController.navigationItem`和`self.navigationItem`。我忽略了问题的其余部分，因为它对问题并不是很重要。

据我了解`self.navigationController.navigationItem`是无用的，因为它正在访问导航控制器的导航项（即您的 rootViewController）。您真正想要的是`self.navigationItem`视图控制器的导航项，因为这基本上会显示在您的视图控制器中。

`UINavigationController`是子类的子类，`UIViewController`只是子类化`self.navigationController.navigationItem`的溢出方法。它没有做任何积极的事情（至少在我的经验中）。

**编辑**：阅读[此](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html)内容以获得进一步说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:08:14.920

它们是不同的。如果你动态添加`UINavigationController`，那么你使用`self.navigationController.navigationItem`.

请更好地澄清你的问题。

# jquery - 使用 jquery 和 ajax 在 X 秒后刷新 div

> ID：10333039
> 
> 赞同：0
> 
> 时间：2012-04-26T12:06:03.600
> 
> 标签：jquery

我发现[这段代码](http://www.9lessons.info/2009/07/auto-load-refresh-every-10-seconds-with.html)用于使用 jquery 刷新我的 div。这有效，但我有任何问题。这个插件总是刷新我的 div 和打印结果。这个坏主意。我需要打印`div`和`result`何时`result != 0`。在我的 ie jquery`0`中打印结果 div。这个解决方案有什么办法吗？谢谢

jQuery代码：

```
<script type="text/javascript">
var auto_refresh = setInterval( 
function ()
{
$('#load_tweets').load('record_count.php').fadeIn("slow");
}, 10000);    
<body>
<div id="load_tweets"> </div> 
```

record_count.php（非常简单）结果 = 0

```
0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:18:53.330

```
var auto_refresh = setInterval(function(){
    $.ajax({
        url:'record_count.php',
        sucsess:function(data){
        if(data!=0)    
            $('#load_tweets').html(data).fadeIn("slow");
        }
    });
}, 10000);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:19:38.150

试试这个：

```
var auto_refresh = setInterval(function () {
    $.get('record_count.php', null, function(data) {
        if (data != "0") {
            $('#load_tweets').html(data).fadeIn("slow");
        }
    }, "html")
}, 10000); 
```

# mysql - 创建一个新的 mysql 表，其主自动递增 id 链接到另一个表？

> ID：10333040
> 
> 赞同：0
> 
> 时间：2012-04-26T12:06:03.577
> 
> 标签：mysql, database-design, database-schema

我想要两个表共享一个主要的自动递增 id，这可能吗？我该怎么做呢？他们有什么我需要考虑的吗？

我这样做的原因是因为它是比将组列添加到用户表更好的解决方案，也比创建完全独立的组表更好，因为如果他们共享主键，我可以使用现有的帖子表组和用户。而不必创建两个不同的帖子表，（组帖子的 group_posts 表。用户帖子的 user_posts 表。）

**现有用户表是**

id（主要，ai）

用户名

密码

电子邮件

**我想使用共享 ai 主键链接到我的用户表的我的组表**

id(primary, ai, 链接到用户表 id)

组的名字

由...制作

创立日期

等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:29:43.293

您应该通过执行以下操作使架构更清晰：

1.  创建一个表（例如`people`）
    *   `id`, 主键, 自增
    *   `type`, 告诉你它是 a`user`还是 a`group`
2.  制作`users`和`groups`主键外键`people`
    *   插入记录`people`
    *   获取使用分配的 ID`LAST_INSERT_ID()`
    *   使用上面获得的 ID插入`users`或`groups`适当地插入

然后你会在你的`posts`表中引用“人”，而不是“用户”或“组”等等。

从概念上讲，以 OO 的方式考虑它，它意味着`users`并且`groups`都可以扩展`people`。

# mysql - 将 MySQL 表重新格式化为网格

> ID：10333041
> 
> 赞同：2
> 
> 时间：2012-04-26T12:06:03.977
> 
> 标签：mysql, sql, formatting

我有一张桌子用来存放翻译。它的布局如下：

```
id | iso | token | content
-----------------------------------------------
 1 | GB  | test1 | Test translation 1 (English)
 2 | GB  | test2 | Test translation 2 (English)
 3 | FR  | test1 | Test translation 1 (French)
 4 | FR  | test2 | Test translation 2 (French)

// etc 
```

为了使翻译管理工具与表格一起使用，我需要以更像电子表格网格的形式输出它：

```
 token          | GB                           | FR                          | (other languages) --> 
-------------------------------------------------------------------------------------------
 test1          | Test translation 1 (English) | Test translation 1 (French) |
 test2          | Test translation 1 (French)  | Test translation 2 (French) |
 (other tokens) |                              |                             |
       |        |                              |                             |
       |        |                              |                             |
       V        |                              |                             | 
```

我以为这很容易，但结果比我想象的要困难得多！

经过大量搜索和挖掘，我确实找到了 group_concat，对于上面的特定情况，我可以开始工作并生成我正在寻找的输出：

```
select 
    token, 
    group_concat(if (iso = 'FR', content, NULL)) as 'FR',
    group_concat(if (iso = 'GB', content, NULL)) as 'GB'
from 
    translations
group by token; 
```

然而，这当然是完全不灵活的。它仅适用于我目前指定的两种语言。当我添加一种新语言时，我必须手动更新查询以将其考虑在内。

我需要上述查询的通用版本，它能够生成正确的表输出，而无需了解存储在源表中的数据的任何信息。

一些消息来源声称你不能在 MySQL 中轻松地做到这一点，但我相信它一定是可能的。毕竟，这是数据库首先存在的那种东西。

有没有办法做到这一点？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:07:00.683

您寻求的通常称为动态交叉表，您可以在其中动态确定输出中的列。从根本上说，关系数据库并不是为了动态确定模式而设计的。实现您想要的最佳方式是使用中间层组件来构建类似于您所展示的交叉表 SQL 语句，然后执行该语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:30:27.120

由于 mysql 的限制，我需要在查询端做这样的事情，在 1 个查询中，我会这样做：

**询问：**

```
select token, group_concat(concat(iso,'|',content)) as contents
from translations
group by token 
```

**“令牌”；“内容”**

> "test1";"GB|试译1(英文),FR|试译1(法文),IT|试译1(意大利语)" "test2";"GB|试译2(英文),FR|试译2 (法语),IT|测试翻译 2 (意大利语)"

比当我绑定行时，我可以从逗号拆分为行，并从管道拆分为标题..

# asp.net - 带有开始和结束日期的日期的正则表达式

> ID：10333046
> 
> 赞同：0
> 
> 时间：2012-04-26T12:06:35.907
> 
> 标签：asp.net, regex

我正在使用“MM/DD/YYYY”格式的日期正则表达式，例如

```
"^(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)\d\d$" 
```

它工作正常，没问题....在这里我想限制之间的一年`"1950"`，`"2050"`如何做到这一点，谁能帮助我....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T12:09:05.463

所以答案取决于你想如何完成任务。

您当前的`Regex`搜索模式将匹配 20 世纪和 21 世纪格式“MM/DD/YYYY”的大多数日期。因此，一种方法是遍历结果匹配，此时将其表示为字符串值，并将每个字符串解析为`DateTime`. 然后你可以做一些范围验证检查。

（注意：我从您的原件中删除了开头`^`和结尾`$`以使我的示例正常工作）

```
string input = "This is one date 07/04/1776 and this is another 12/07/1941\. Today is 08/10/2019.";
string pattern = "(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)\\d\\d";

List<DateTime> list = new List<DateTime>();
foreach (Match match in Regex.Matches(input, pattern))
{
    Console.WriteLine(match.Value);
    DateTime result;
    if (DateTime.TryParse(match.Value, out result))
    {
        if (result.Year >= 1950 && result.Year <= 2050)
        {
            list.Add(result);
        }
    }
}

Console.WriteLine("Number of valid dates: {0}", list.Count); 
```

此代码输出以下内容，注意 1776 不匹配，其他两个日期匹配，但仅将最后一个添加到列表中。

```
12/07/1941
08/10/2019
Number of valid dates: 1 
```

虽然这种方法有一些缺点，例如第二次循环结果以尝试进行范围验证，但也有一些优点。

*   框架中的内置`DateTime`方法更容易处理，而不是不断调整`Regex`搜索模式，因为您可以接受的范围会随着时间的推移而变化。
*   通过之后的范围检查，您还可以简化`Regex`搜索模式以使其更具包容性，甚至可以获取*所有*日期。
*   一个更简单的`Regex`搜索模式更容易维护，并且也明确了代码的意图。`Regex`解读含义可能会令人困惑和棘手，尤其是对于经验不足的编码人员。
*   复杂`Regex`的搜索模式可能会引入细微的错误。确保您的代码周围有良好的单元测试。

当然，您的另一种方法是调整`Regex`搜索模式，这样您就不必事后解析和检查。在大多数情况下，这将是最佳选择。您的搜索模式不会返回任何超出范围的值，因此您不必在该点循环或进行任何额外的检查。只要记住那些单元测试！

正如@skywalker 在他的回答中指出的那样，这种模式应该适合你。

```
string pattern = "(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19[5-9][0-9]|20[0-4][0-9]|2050)"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T12:52:43.837

可以使用 19[5-9][0-9]|20[0-4][0-9]|2050 找到 1950-2050 年（含）

# cakephp - OpenId 组件：使用 CakePHP 从 Google 获取属性

> ID：10333051
> 
> 赞同：1
> 
> 时间：2012-04-26T12:06:49.833
> 
> 标签：cakephp, components, openid, cakephp-2.0

有没有我可以使用 CakePHP 和 OpenID 组件从 Google 成功获取 OpenId 用户属性（如姓名、电子邮件）的示例？当我尝试添加所需参数时，我收到“您请求的页面无效”。

## 更多详情

组件：[http ://code.42dh.com/openid/](http://code.42dh.com/openid/)

如果我不要求任何“属性”，它工作正常。当我尝试像以下示例中那样添加对必需/可选属性的请求时，我从 Google 收到错误消息：“您请求的页面无效。”

示例（不适合我）：[http ://cakebaker.42dh.com/2008/02/12/using-the-openid-simple-registration-extension/](http://cakebaker.42dh.com/2008/02/12/using-the-openid-simple-registration-extension/)

根据 1 来源，问题是：

> 该错误实际上是由于不包括 openid.claimed_id 和 openid.identity 参数而触发的，这些参数必须设置为“ [http://specs.openid.net/auth/2.0/identifier_select](http://specs.openid.net/auth/2.0/identifier_select) ”。有了这些设置，我得到另一个错误，也可以通过填写 openid.realm 来解决，其值与 openid.return_to 相同。

[Google OpenID：您请求的页面无效](https://stackoverflow.com/questions/1344240/google-openid-the-page-you-requested-is-invalid)

**代码**

```
function openidlogin() {

    $realm = 'http://' . $_SERVER['HTTP_HOST'];
    $returnTo = $realm . '/users/openidlogin';

    $url = "https://www.google.com/accounts/o8/id";
    if ($this->RequestHandler->isPost() && !$this->Openid->isOpenIDResponse()) {
        try {
            $this->Openid->authenticate($url, $returnTo, $realm); // WORKS !!!
            $this->Openid->authenticate($url, 'http://'.$_SERVER['SERVER_NAME'].'/users/login', 'http://'.$_SERVER['SERVER_NAME'], array('email'), array()); // FAILS
        } catch (InvalidArgumentException $e) {
            $this->Session->setFlash("Error: Invalid OpenId");
        } catch (Exception $error) {
            $this->Session->setFlash("Error: " + $error->getMessage());
        }
    } elseif ($this->Openid->isOpenIDResponse()) {

        $response = $this->Openid->getResponse($returnTo);

        if ($response->status == Auth_OpenID_CANCEL) {
            $this->Session->setFlash("Google Login Cancelled");
            $this->redirect(array("controller" => "users", "action" => "login"));
        } elseif ($response->status == Auth_OpenID_FAILURE) {
            $this->Session->setFlash("Veficiation Failed: " . $response->message);
            $this->redirect(array("controller" => "users", "action" => "login"));
        } elseif ($response->status == Auth_OpenID_SUCCESS) {

            $axResponse = Auth_OpenID_AX_FetchResponse::fromSuccessResponse($response);
            debug ($response);
            debug ($axResponse);
            $this->Session->setFlash("Authenticated");
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:47:10.050

看看下面的例子：[https ://github.com/cakebaker/openid-component-example/blob/master/app/Controller/UsersController.php](https://github.com/cakebaker/openid-component-example/blob/master/app/Controller/UsersController.php)

# javascript - JQuery slideUp/slideDown 不能正常工作

> ID：10333054
> 
> 赞同：3
> 
> 时间：2012-04-26T12:07:02.557
> 
> 标签：javascript, jquery, html, slidetoggle

我正在努力制作一个在 slideUp() 操作后会消失的 div。

html:

```
<div class="rounded gradient" id="BCBox">
    <ul class="BCSelect">
        <li style="text-align:left;">Welcome <b>Username</b>,<br/><br/>Bla Bla Bla: </li>
        <li>
        <div class="button2 BCButton">
        </div>
        </li>
    </ul>
</div>
​ 
```

javascript:

```
$('#BCBox').height($('#BCBox').height());
$('#BCBox').slideUp();​ 
```

你可以在这里看到一个演示：http: [//jsfiddle.net/4feU9/7/](http://jsfiddle.net/4feU9/7/)

不知何故，盒子不想按照它应该的方式制作动画......它滑动得非常快。你能帮我吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:31:57.717

问题是您将它浮动到右侧，顶部边距很大（边距是元素的一部分，因此在上滑过程中也有动画效果）。在这里你可以看到绝对定位元素例如修复动画：http: [//jsfiddle.net/4feU9/8/](http://jsfiddle.net/4feU9/8/)

html

```
<div class="rounded gradient" id="BCBox" >

        <ul class="BCSelect">
            <li style="text-align:left;">Welcome <b>Username</b>,<br/><br/>Bla Bla Bla:
            </li>
            <li >
                <div class="button2 BCButton"></div>    
            </li>
        </ul>

    </div>​ 
```

javascript

```
$('#BCBox').slideUp(); 
```

​</p>

# cakephp - cakephp 即时更改语言

> ID：10333058
> 
> 赞同：0
> 
> 时间：2012-04-26T12:07:16.587
> 
> 标签：cakephp, multilingual, cakephp-2.1, cakephp-model

我的网站有两种语言（英语和意大利语）

**我的 SiteMessagesController.php 控制器代码：**

```
public function index() {
    $this->SiteMessage->locale = 'it';
    $this->SiteMessage->recursive = 0;
    $this->set('siteMessages', $this->paginate());
} 
```

[上面的代码显示了来自数据库](http://book.cakephp.org/2.0/en/core-libraries/behaviors/translate.html)的所有意大利语消息。如果我`comment`是第一行代码，那么它将以英文显示消息。

如果我在整个站点中使用这个，我必须在每个控制器的每个操作`$this->SiteMessage->locale = 'it';`之前写一行。`$this->ModelName->find();`

有没有办法`$locale`为`'it'`每个模型设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:16:07.217

如果你问我认为你在问什么，这将是：

```
Configure::write('Config.language', 'ita'); 
```

如果你把它放在像你一样的地方，`AppController::beforeFilter()`它应该适用于整个应用程序，而不是单个模型或查询。有关更多信息，请参阅有关[I18n 和 L10n的书。](http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:39:06.347

put locale in AppModel.

eg: This one is for english
`public $locale = 'en_us';`

# xslt - 如何使用 XSLT 添加或替换元素

> ID：10333059
> 
> 赞同：3
> 
> 时间：2012-04-26T12:07:19.853
> 
> 标签：xslt

我正在使用 XSLT 来应用配置转换。如果元素不存在，我想添加它，如果它存在，我想覆盖它。

期望的结果：

```
<foo>
    <bar value="baz" />        
</foo> 
```

我可以使用什么模板来为两个输入提供此输出

```
<foo>
    <bar value="123" />        
</foo> 
```

和

```
<foo>
</foo> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:21:50.777

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="foo/bar/@value[.='123']">
  <xsl:attribute name="value">baz</xsl:attribute>
 </xsl:template>

 <xsl:template match="foo[not(bar)]">
  <foo>
    <bar value="baz"/>
  </foo>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于第一个提供的 XML 文档时**：

```
<foo>
    <bar value="123" />
</foo> 
```

**产生想要的正确结果**：

```
<foo>
   <bar value="baz"/>
</foo> 
```

**当应用于第二个提供的 XML 文档时：**

```
<foo>
</foo> 
```

**它也产生相同的正确结果**。

**说明**：正确使用和覆盖**[身份规则](http://dpawson.co.uk/xsl/sect2/identity.html)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:10:01.037

你在使用.NET吗？如果是这样，您可以考虑为这些配置转换专门制作的东西。MS 员工 Sayed Ibrahim Hashim 创建了[SlowCheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)，它是所有 VS 项目的 Web 配置转换。

您的 2 个场景将变为：

```
<foo>
  <bar xdt:Transform="Replace" value="123" />
</foo>

<foo xdt:Transform="Replace">
</foo> 
```

Xslt 有点冗长 IMO。Hansleman 有一个[帖子](http://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx)

可以在此处找到有关不同转换的文档[http://go.microsoft.com/fwlink/?LinkId=214134](http://go.microsoft.com/fwlink/?LinkId=214134)

SlowCheetah 扩展添加了一个目标，您可以将其复制到项目中以使其自包含

[如果您想将其用作 exe 或在名为Transform Config](http://transformconfig.codeplex.com)的代码中执行，在 Codeplex 上还有一个简单的项目。

PS。汤姆范轨道一号;）

# flash - 发布到 flash 播放器 9，如果浏览器插件 10.2 或更高版本，Stage Video 可用？

> ID：10333066
> 
> 赞同：0
> 
> 时间：2012-04-26T12:07:51.430
> 
> 标签：flash, video, stage

我希望有人可以消除一些混乱。我有一个 Flash 视频播放器，为了获得最广泛的兼容性，我只想针对 Flash 播放器版本 9。因此，在我的嵌入代码中，我只会检查 Flash Player 版本 9 或更高版本。但是，如果用户安装了 10.2 或更高版本的 flash 插件，则有一个非常强大的新功能，称为 Stage Video，它将允许更大的全屏和全浏览器视频性能。

我的问题是，假设用户拥有 10.2 或更高版本的插件，StageVideo 在上述情况下是否可用（发布到 FP9），还是我还必须发布以 fp10 为目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:27:25.313

对我来说正确的方法是制作两个不同的视频播放器和一个加载器 swf。Loader swf 的目的是获取 FP 版本和加载高效的视频播放器。您也可以构建一个视频播放器，但分开做会更干净、更好。

从该站点获取版本的示例代码-> [http://www.mediacollege.com/adobe/flash/actionscript/3/player-version.html](http://www.mediacollege.com/adobe/flash/actionscript/3/player-version.html)

```
var flashVersion:Object = new Object();// Object to hold the Flash version details

function getPlayerVersion() {
   var versionNumber:String = Capabilities.version;// Get the whole version string
   var versionArray:Array = versionNumber.split(",");// Split it up
   var length:Number = versionArray.length;
   var osPlusVersion:Array = versionArray[0].split(" ");// The main version contains the OS (e.g. WIN), so we split that off as well.
   // Populate the version object (the OS is a string, others are numbers):
   flashVersion["os"] = osPlusVersion[0];
   flashVersion["major"] = parseInt(osPlusVersion[1]);
   flashVersion["minor"] = parseInt(versionArray[1]);
   flashVersion["build"] = parseInt(versionArray[2]);
   // Test the output:
   trace(flashVersion["os"]);
   trace(flashVersion["major"]);
   trace(flashVersion["minor"]);
   trace(flashVersion["build"]);
} 
```

# p2p - 为什么 JXTA 被放弃了？有什么替代品吗？

> ID：10333072
> 
> 赞同：17
> 
> 时间：2012-04-26T12:08:12.143
> 
> 标签：p2p, distributed-computing, jxta, grid-computing

P2p/网格计算似乎是一个很有前途的概念。JXTA 看起来像是唯一的多合一框架。这个领域如此稀少是有原因的吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-26T22:21:11.050

我已经领导了 JXTA 2.6 和 2.7 的发布——JXTA 并没有完全放弃。有些人在 2.6 分支上发布了补丁，它可以很容易地与 2.7 分支合并。

人们没有继续参加 JXTA 的原因有很多：

1.  甲骨文没有跟进他们在项目治理方面的职责，这使该项目陷入了困境。

2.  Oracle 没有跟进将项目转移到 Apache 的请求。

3.  代码库很旧。我们对其进行了清理并实施了单元测试。但是为了将项目提升到一个新的水平，它需要进行大量的重写。没有足够的志愿者。

但更根本的是，很少有 P2P 框架起飞的原因是因为 P2P 从根本上讲是复杂的。大多数人直到他们开始把手伸进泥土时才明白。“以简单的方式”实现 P2P 是不可能的。

所以与全 Java 客户端、许可费用或其他无关。

**更新（2013 年 8 月）：**您认为 JXTA/JXSE 已死？好吧，有人进一步研究并开发了 DZone 教程（不幸的是，SO 不允许链接到 Dzone，所以谷歌：JXSE 和 Equinox 教程）。

**更新（2013 年 11 月）：**一群人正在开发 JXTA 的新版本。如需更多信息，请在[邮件列表](https://java.net/projects/jxta/lists)上注册。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-20T04:32:06.817

有趣的是，过去所有 P2P 计划都缺少让同伴保持活跃的动力。问题始终是为什么对等点会继续运行 CPU 消耗和基于 XML 的详细协议。信任是另一个因素——我怎么能信任同伴。作为团队的重要成员，我们引入了安全性。但安全并不能解决信任问题。

更糟糕的是，JXTA 引入了超级节点的概念——打败了点对点的概念。

然而，并非一切都那么糟糕。JXTA 提供了许多新概念。一个是 JXME 和 JXTA 并存的边缘计算 - 您可以将其称为当前的雾计算，其中繁重的工作在 JXTA 节点上，而一些智能则在受限的 JXME 节点上。

快进，区块链解决了任何 P2P 平台无法回答的大多数问题（如果不是全部）的差距：信任、激励同行、防篡改等等。

P2P 还活着:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T12:13:26.443

我认为这与 RMI、CORBA 和 Jini 不太受欢迎的原因相同：复杂且封闭。

大多数时候，简单而开放的胜利。

它可能与全 Java 客户端或许可费用或其他原因有关。

这可能是竞争。MPI 是一种广泛接受的计算消息传递标准。Hadoop 获得了很大的吸引力。

更新：被接受的答案讨论了为什么人们可能会或可能不会选择参加 JXTA。我认为我的回答更多地与用户采用有关，这是不同的。我要回到 JXTA 的起源，而不是 2.6 和 2.7 版本的细节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T01:08:45.823

如果你使用 Linux，试试这个：[http](http://www.p2pns.org/) ://www.p2pns.org/ “P2PNS（Peer-to-Peer Name Service）是一种使用点对点网络的分布式名称服务。目前 P2PNS 的重点是为分散式 VoIP (P2PSIP) 提供安全高效的 SIP 名称解析。” 在大多数情况下，名称解析足以在其之上构建 P2P 应用程序。

# javascript - 如何在 Sencha-Touch2.0 的地图中获取当前位置的标记

> ID：10333076
> 
> 赞同：6
> 
> 时间：2012-04-26T12:08:17.703
> 
> 标签：javascript, sencha-touch, extjs, sencha-touch-2

嘿朋友们，我是**[Sencha Touch](http://www.sencha.com/)**平台的新手。

我想找到用户`current location`，`marker`请帮帮我。我陷入了这种状态。

有没有什么新的好教程给我，请与我分享..

在此先感谢您的时间。

[拉维帕特尔](http://ravikpatel@mail.com)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T12:30:36.103

好问题。我以前遇到过类似的问题。但是，后来，我想出了解决方案。

这是您可以解决的方法。

*   使用[**Phonegap 的 Geolocation API**](http://docs.phonegap.com/en/1.6.1/cordova_geolocation_geolocation.md.html#Geolocation)或 ..
*   使用Sencha Touch API中的[**Ext.util.Geolocation**](http://localhost/sencha/docs/#!/api/Ext.util.Geolocation)

使用**Phonegap 的 Geolocation API进行演示**

1.  通过 geolocation api 获取地理位置。

    ```
    vat lat, lng;
    var geoLocationOptions = { maximumAge: 3000, timeout: 5000, enableHighAccuracy: true };
    navigator.geolocation.getCurrentPosition(geoLocationSuccess,geoLocationError,geoLocationOptions);

    function geoLocationSuccess(position) {
        lat = position.coords.latitude;
        lng = position.coords.longitude;
        Ext.Msg.alert("Geolocation","Latitude:"+ lat +", Longitude:"+ lng); 
    }

    function geoLocationError() {
       Ext.Msg.alert('Error','Error while getting geolocation');
    } 
    ```

2.  然后使用 lat 和 lng 的值将地图的中心设置为它，并将标记的位置设置为该值。

    ```
     ... 
     ...
     var position = new google.maps.LatLng(lat,lng);
     map = this.add({
            xtype: 'map',
            getLocation: true,
            autoLoad: true,
            mapOptions: {
                zoom: 15,
                center: position,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                navigationControl: true,
                zoomControl: true,
                mapTypeControl: true,
                scrollwheel: true,
                scaleControl: true,
                zoomControlOptions: {
                    style: google.maps.ZoomControlStyle.LARGE
                }
            }
        });

     marker = new google.maps.Marker({
            id: 'geoLocMarker',
            position: position,
            map: map.getMap(),
            visible: true
     });
     ...
     ... 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T11:38:53.140

我还为使用 sencha touch 2.3.1 的类似应用程序
使用 Ext.util.Geolocation 类获取当前位置并使用以下代码自动更新 currentPosition。

```
Ext.create('Ext.util.Geolocation', {
autoUpdate: true,
allowHighAccuracy: true,
frequency: '5000', // set the milliseconds for the location update
listeners: {
locationupdate: function(geo) {
    latitude=Global.currentUserLocations.currentLat;
    longitude=Global.currentUserLocations.currentLong;
    if(Global.currentUserPositionMarker)
    {
        latlng1=new google.maps.LatLng(latitude, longitude);
        Global.currentUserPositionMarker.setPosition(latlng1);
    }
   }
 }
}); 
```

上面的代码对我有用，我已经在我的应用程序中使用它来获取 currentLocation 并将标记移动到 currentPosition。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T01:16:23.637

如果您只使用 Ext.Map.getGeo() 会简单得多，如下所示：

```
 var geo = extmap.down("#Map").getGeo();
    var currentPosition = new google.maps.LatLng(geo.getLatitude(), geo.getLongitude()); 
```

只要您将地图实例化，如果浏览器客户端允许您获取当前位置，它就应该获取当前位置。

！

# perl - 计算列的小部分的平均值，按perl中的键分组？

> ID：10333077
> 
> 赞同：2
> 
> 时间：2012-04-26T12:08:20.723
> 
> 标签：perl, statistics, average

这个问题与这个问题非常相似[如何获得按键分组的平均值和标准偏差？](https://stackoverflow.com/questions/1412970/how-can-i-get-the-average-and-standard-deviations-grouped-by-key)但我没有设法修改它以适应我的问题。

我有很多包含 7 列的文件 (.csv)，最后三列如下所示：

```
col5,col6,col7
1408,1,123
1408,2,234
1408,3,345
1408,4,456
1408,5,567
1408,6,678
1409,0,123
1409,1,234
1409,2,345
1409,3,456
1409,4,567
1409,5,678
1409,6,789
...
N,0,123
N,1,234
N,2,345
N,3,456
N,4,567
N,5,678
N,6,789 
```

我想要做的是计算在第 5 列 (col5) 中具有相同值的所有值的最后一列 (col7) 的平均值，所以 1408、1409、1410，... 直到 N 并且我没有知道 N。我想在第 6 列（col6）中包含 3 的行（在 col8 中）旁边打印这个平均值。请注意，第 6 列（col6）中的值从 0 到 6，但文件的第一个数字并不总是 0。所以我想要的是：

```
col1,col2,col3,col4,col5,col6,col7,col8
bla,bla,bla,bla,1408,3,345,400.5
bla,bla,bla,bla,1409,3,456,456
...
bla,bla,bla,bla,N,3,456,456 
```

我有一些脚本可以用来计算平均值，但我必须能够将我的值放入一个数组中。以下是我尝试做的，但它不起作用。另外，我只是想自己学习 Perl，所以如果它看起来像垃圾，我只是在尝试！

```
 open (FILE, "<", $dir.$file) or die;
    my @lines = <FILE>;
    foreach my $line(@lines) {
        my ($col1,$col2,$col3,$col4,$col5,$col6,$col7) = split(/\,/, $line);
        push @arrays5, $col5;
    }

    foreach my $array5(@arrays5) {            
        foreach my $line(@lines) {
            my ($col1,$col2,$col3,$col4,$col5,$col6,$col7) = split(/\,/, $line);
            if ($array5 == $col5) {
                push @arrays7, $col7;
            }
        }
    }
close(FILE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:07:05.377

一种使用`Text::CSV_XS`模块的方法。它不是内置的，因此必须从`CPAN`或类似的工具安装。

内容`script.pl`：

```
use warnings;
use strict;
use Text::CSV_XS;

my ($offset, $col_total, $row3, $rows_processed);

## Check arguments to the script.
die qq[Usage: perl $0 <input-file>\n] unless @ARGV == 1;

## Open input file.
open my $fh, q[<], shift or die qq[Open error: $!\n];

## Create the CSV object.
my $csv = Text::CSV_XS->new or  
        die qq[ERROR: ] . Text::CSV_XS->error_diag();

## Read file content seven lines each time.
while ( my $rows = $csv->getline_all( $fh, $offset, 7 ) ) { 

        ## End when there is no more rows.
        last unless @$rows;

        ## For each row in the group of seven...
        for my $row ( 0 .. $#{$rows} ) { 

                ## Get value of last column.
                my $last_col_value = $rows->[ $row ][ $#{$rows->[$row]} ];

                ## If last column is not a number it is the header, so print it
                ## appending the eigth column and read next one.
                unless ( $last_col_value =~ m/\A\d+\Z/ ) { 
                        $csv->print( \*STDOUT, $rows->[ $row ] );
                        printf qq[,%s\n], q[col8];
                        next;
                }   

                ## Acumulate total amount for last column.
                $col_total += $last_col_value;

                ## Get third row. The output will be this row with the
                ## average appended.
                if ( $rows->[ $row ][-2] == 3 ) { 
                        $row3 = [ @{ $rows->[ $row ] } ];
                }   

                ## Count processed rows.
                ++$rows_processed;
        }   

        ## Print row with its average.
        if ( $rows_processed > 0  && ref $row3 ) { 
                $csv->print( \*STDOUT, $row3 );
                printf qq[,%g\n], $col_total / $rows_processed;
        }   

        ## Initialize variables.
        $col_total = $rows_processed = 0;
        undef $row3;
} 
```

内容`infile`：

```
col1,col2,col3,col4,col5,col6,col7
bla,bla,bla,bla,1408,1,123
bla,bla,bla,bla,1408,2,234
bla,bla,bla,bla,1408,3,345
bla,bla,bla,bla,1408,4,456
bla,bla,bla,bla,1408,5,567
bla,bla,bla,bla,1408,6,678
bla,bla,bla,bla,1409,0,123
bla,bla,bla,bla,1409,1,234
bla,bla,bla,bla,1409,2,345
bla,bla,bla,bla,1409,3,456
bla,bla,bla,bla,1409,4,567
bla,bla,bla,bla,1409,5,678
bla,bla,bla,bla,1409,6,789 
```

像这样运行它：

```
perl script.pl infile 
```

具有以下输出：

```
col1,col2,col3,col4,col5,col6,col7,col8
bla,bla,bla,bla,1408,3,345,400.5
bla,bla,bla,bla,1409,3,456,456 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:46:26.310

在我们尝试完成答案之前，您会尝试这个并告诉我它与您想要的结果有多接近吗？

```
#!/usr/bin/perl
use warnings;
use strict;

my $target = 3;

my %summary;

while(<>) {
    chomp;
    my ($col1,$col2,$col3,$col4,$col5,$col6,$col7) = split /\,/;
    $summary{$col5}{total} += $col7;
    ++$summary{$col5}{count};
    $summary{$col5}{line} = $_ if $col6 == $target;
}

$summary{$_}{average} = $summary{$_}{total} / $summary{$_}{count}
    for keys %summary;

print "${summary{$_}{line}},${summary{$_}{average}}\n"
    for sort keys %summary; 
```

如果足够接近，那么您可能希望自己完成。如果没有，那么我们可以进一步讨论这个问题。

请注意，如果您更喜欢从数据文件中读取而不是从标准输入中读取，则可以`<>`替换为。`<FILE>`

**实施说明**

该代码依赖于 Perl 的*自动生存*功能。观察例如 line `++$summary{$col5}{count};`，它最初似乎增加了一个不存在的计数器。然而，这实际上是标准的 Perl 习惯用法。如果你试图对一个不存在的对象做一些算术运算（比如递增），Perl 会隐式创建这个对象，将它初始化为零，然后对它做你想做的事情（比如递增）。

像 C++ 这样更清醒的编程语言自动激活可能是不明智的，但多年的经验表明，自动激活在像 Perl 这样稍微不那么清醒的语言中在顺序和便利之间取得了适当的平衡。

在更基本的层面上，代码可能只对那些习惯于 Perl 散列的人有意义。但是，如果您以前没有使用过 Perl 的哈希，那么这将是一个学习它们的好机会。哈希是该语言的核心支柱，上面给出了一个相当典型的使用示例。

在这种情况下，我们有一个哈希值，这也是相当典型的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:20:57.823

这应该可以解决问题。适当地替换**Cols[index]**。

```
 use Data::Dumper ;
    open (FILE, "<", '/tmp/myfile') or die;
    my @lines ;
    my (%Sum,%Count);

    chomp(@lines = <FILE>);
    foreach my $line(@lines) {
        next if $line =~ /col/;
        my @Cols = split /,/, $line;
        $Sum{$Cols[0]} +=  $Cols[2] ;
        $Count{$Cols[0]}++;
    }

    foreach my $line(@lines) {
        if($line=~/col/) {
            print "$line,colX\n" ;
            next;
        }

        my @Cols = split /,/, $line;
        if($Cols[1]==3) {
            print "$line,",$Sum{$Cols[0]}/$Count{$Cols[0]},"\n" ;
        } else {
            print "$line,-1\n";
        }
    } 
```

示例输入 /tmp/myfile

```
col5,col6,col7
1408,1,123
1408,2,234
1408,3,345
1408,4,456
1408,5,567
1408,6,678
1409,0,123
1409,1,234 
```

样本输出

```
col5,col6,col7,colX
1408,1,123,-1
1408,2,234,-1
1408,3,345,400.5
1408,4,456,-1
1408,5,567,-1
1408,6,678,-1
1409,0,123,-1
1409,1,234,-1 
```

# java - 如何在 IToolBarManager 上添加 JComboBox

> ID：10333080
> 
> 赞同：0
> 
> 时间：2012-04-26T12:08:30.027
> 
> 标签：java, eclipse, swing, jcombobox

我正在开发一个 Eclipse 插件并尝试添加`JComboBox`一个[`IToolBarManager`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjface%2Faction%2FIToolBarManager.html)并添加`ActionListener`到它，所以我可以处理`JComboBox`选择。

任何人都可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:43:08.407

可能有更好的解决方案，但我使用了以下方法：

```
IToolBarManager mgr = this.getViewSite().getActionBars().getToolBarManager();
IContributionItem comboCI = new ControlContribution("test") {
        protected Control createControl(Composite parent) {

            final Combo c = new Combo(parent, SWT.READ_ONLY);
            c.add("one");
            c.add("two");
            c.add("three");
            c.addSelectionListener(new SelectionAdapter() {
                 public void widgetSelected(SelectionEvent e) {
                     c.add("four");
                  }
                  });
            return c;
        }
    };        

    mgr.add(comboCI);
} 
```

# java - Java：从 HTTP POST 获取参数和正文

> ID：10333082
> 
> 赞同：0
> 
> 时间：2012-04-26T12:08:34.367
> 
> 标签：java, http, http-headers, http-post, httprequest

我想从 http 帖子中读取帖子参数和正文。

示例：如果您发布到 url：[http://localhost/controller?sign=true](http://localhost/controller?sign=true)。在帖子中，正文中还有 json 数据。

```
{"transaction": 
    {"user":[
        {"name": "Anna"}]
    }
} 
```

获取参数是通过 public java.lang.String getParameter(java.lang.String name)

并且可以通过 public ServletInputStream getInputStream() throws java.io.IOException 来检索正文

但是你如何同时掌握参数和身体呢？因为如果我在 getInputStream 之前调用 getParameter，那么 inputStream 上的结果将是 -1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:12:06.373

我相信在 getParameter(String name) 的掩护下，正在读取 ServletInputStream 以获取这些参数。如果您要将 POST 数据与 URL 参数混合（我假设 sign=true 是您提到的试图获取的参数）使用 HttpServletRequest.getQueryString() 来获取 URL 参数，那么您应该仍然能够使用 getInputStream() 读取正文。但是，您可能必须解析查询字符串以获取您正在寻找的信息。

编辑：我忘了在我的原始答案中添加，当读取 ServletInputStream 时，它无法再次读取。如果需要多次使用流中的数据，则必须存储它。

[http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)

# android - 在 Android 源代码中设置蓝牙设备名称？

> ID：10333088
> 
> 赞同：2
> 
> 时间：2012-04-26T12:08:50.973
> 
> 标签：android, bluetooth

[Android 设备名称 == “BlueZ”？](https://stackoverflow.com/questions/9911813/android-device-name-bluez)

我的问题与这个问题非常相似，我需要知道如何更改`BlueZ`以显示实际设备名称，即从 build.prop 读取它，而不是显示“BlueZ”

我找到了`main.conf`in `external/bluetooth/bluez/src/main.conf`（可能有点偏离），它包含关于设备名称的一行，变量设置为“BlueZ”。我尝试将其更改为`%d`and `%h`，但两者都没有进行任何更改。我将尝试手动将其设置为设备名称，但我希望此修复可在多个设备上使用。

有任何想法吗？

```
# Default adaper name
# %h - substituted for hostname
# %d - substituted for adapter id
Name = "Bluez" 
```

我尝试替换上述两个变量，但似乎都没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:47:40.943

从外部应用程序呢？您可以只构建一个 Android 版本，然后在最后一个状态下运行一个应用程序来更改 Android 设备名称吗？

您可以使用 IBluetooth.aidl -> setName 更改蓝牙名称。

教程可以在[这里](https://stackoverflow.com/questions/4464426/specifying-a-link-key-in-android-without-pairing)找到，它进一步引用[了这个](http://snipplr.com/view/49526/get-ibluetooth-instance/)。

简而言之，在 src 中创建一个包 android.bluetooth，在其中复制粘贴 IBluetooth.aidl 和 IBluetoothCallback.aidl（您可以在上一个链接中找到它们）。

**在您的代码**中，导入包： import android.bluetooth.IBluetooth;

然后实现这个方法来获取蓝牙对象：

```
@SuppressWarnings("rawtypes")
private IBluetooth getIBluetooth() {
    IBluetooth ibt = null;
    try {
        Class c2 = Class.forName("android.os.ServiceManager");
        Method m2 = c2.getDeclaredMethod("getService", String.class);
        IBinder b = (IBinder) m2.invoke(null, "bluetooth");
        Class c3 = Class.forName("android.bluetooth.IBluetooth");
        Class[] s2 = c3.getDeclaredClasses();
        Class c = s2[0];
        Method m = c.getDeclaredMethod("asInterface", IBinder.class);
        m.setAccessible(true);
        ibt = (IBluetooth) m.invoke(null, b);
    } catch (Exception e) {
        Log.e("flowlab", "Erroraco!!! " + e.getMessage());
    }
    return ibt;
} 
```

然后实例化这个对象：IBluetooth ib =getIBluetooth();

并且可能使用 ib.setName("something");

# iphone - 调用触摸事件的混乱

> ID：10333091
> 
> 赞同：1
> 
> 时间：2012-04-26T12:09:05.657
> 
> 标签：iphone

我在主视图中使用 UISwipeGestureRecognizer 进行左右方向滑动，如下所示：

```
UISwipeGestureRecognizer *recognizer1,*recognizer;

    recognizer1 = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeFromleft:)];
    [recognizer1 setDirection:(UISwipeGestureRecognizerDirectionLeft)];
    [self.view addGestureRecognizer:recognizer1];
    [recognizer1 release]; 

    recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeFromright:)];
    [recognizer setDirection:(UISwipeGestureRecognizerDirectionRight)];
    [self.view addGestureRecognizer:recognizer];
    [recognizer release]; 
```

在同一个视图中，我还使用触摸事件，如触摸开始、移动和结束。

两者都用于不同的目的。

我的问题是，当我触摸我的视图并将其从左到右或从右到左移动时；UISwipeGestureRecognizer 在触摸开始和触摸移动方法之间被调用，这是我不想要的

，所以任何人都知道我怎样才能避免这种类型的事情？我如何告诉视图我现在想要使用触摸事件或者我正在使用 UISwipeGestureRecognition

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:24:07.103

看看[参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/instp/UIGestureRecognizer/cancelsTouchesInView)有一个属性叫做`cancelsTouchesInView`. 所以我看到的方式是确定是否要在 swipeHandlers 中处理手势或标准触摸，并 `cancelsTouchesInView`相应地设置属性

# c++ - 如何在不使用命名空间 std 和字符串库的情况下拆分和存储 const char*？

> ID：10333092
> 
> 赞同：1
> 
> 时间：2012-04-26T12:09:05.713
> 
> 标签：c++, c

我有一个 const char* 变量“str”，它可以像下面这样：

```
const char* str ="/v1/AUTH_abb52a71-fc76-489b-b56b-732b66bf50b1/images/bhs"; 
```

我必须拆分这个`str`变量并将它们存储在一个数组中，就像`char a[256]`. 但我想通过检测每个斜线（`/`）来分割。我的意思是我想存储`v1`等`AUTH_abb52a71-fc76-489b-b56b-732b66bf50b1`。问题是在这个项目中我不允许使用字符串库和命名空间 std，所以我不能使用`istringstream`. 我只被允许使用`string.h`and `stdio.h`。那么我怎么能在这个限制内做到这一点呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T12:11:54.140

strcpy()，然后是 strtok()。

或者通过遍历数组来做真正的基本方法。

这是作业吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T12:25:22.063

```
 const char* yourStr;
  char str[1000];
  strncpy(str, yourStr, sizeof(str));
  char* parts[100] = {0};
  unsigned int index = 0;
  parts[index] = strtok(str,"/");

  while(parts[index] != 0)
  {
    ++index;
    parts[index] = strtok(0, "/");
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T12:13:56.780

您可以使用`strtok`将字符串拆分为标记的函数。您可以使用 « / » 值设置« delim »。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T12:28:11.377

```
#include <stdio.h>
#include "string.h"

int main()
{
    char str [] ="/v1/AUTH_abb52a71-fc76-489b-b56b-732b66bf50b1/images/bhs";

    char* token_pointer;
    token_pointer = strtok(str, "/");

    while(NULL != token_pointer)
    {
            //handle your token
        printf("%s \n", token_pointer);
        token_pointer = strtok(NULL, "/");    
    }

    return 0;
} 
```

运行。检查控制台。

希望能帮助到你！

干杯；）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T12:31:34.370

有一个类似的帖子[strtok - 如何避免换行并放入字符串数组？](https://stackoverflow.com/questions/5156119/strtok-how-avoid-new-line-to-and-put-to-array-of-strings)，如果你通过你会找到一个很好的答案。

那里的摘录代码

```
#include <stdlib.h>
#include <string.h>
...
void split(char *str, char **splitstr) 
{      
  char *p;      
  int i=0;      

  p = strtok(str,",");      
  while(p!= NULL)      
  {                
    printf("%s", p);
    splitsr[i] = malloc(strlen(p) + 1);
    if (splitstr[i])
      strcpy(splitstr[i], p);
    i++;
    p = strtok (NULL, ",");       
  } 
} 
```

# php - 使用 strlen 或 trim 更新 sql 中的表

> ID：10333097
> 
> 赞同：0
> 
> 时间：2012-04-26T12:09:19.783
> 
> 标签：php, sql, sql-server, database

所以，我所拥有的是一个表格，其中包含一个具有此值的单元格`*0000123*`

我需要的是选择该单元格的值并删除两侧的“*”并将其粘贴到另一个单元格中。

要删除：文本中的星号符号。

如何在不使用 php 的情况下在 sql 中编辑内部值？（直接输入就可以了）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:14:14.237

它可能是`REPLACE()`您正在寻找的功能：

```
DECLARE @Example varchar(max) = '*0000123*'
SELECT REPLACE(@Example, '*', '') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T12:18:51.553

您可以`REPLACE`在 SQL-Server 和 MySql 中使用：

```
SELECT REPLACE(MyVal, '*', '') As NewValue
FROM Table 
```

T-SQL：http: [//msdn.microsoft.com/en-us/library/ms186862.aspx](http://msdn.microsoft.com/en-us/library/ms186862.aspx)

MySql：[http ://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_replace](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_replace)

# php - UTF-8 安全等效于 PHP 中的 ord 或 charCodeAt()

> ID：10333098
> 
> 赞同：17
> 
> 时间：2012-04-26T12:09:29.413
> 
> 标签：php, javascript, utf-8, character-encoding

我需要能够使用 ord() 来获得与 javascript 的 charCodeAt() 函数相同的值。问题是 ord() 不支持 UTF8。

如何让 Ą 在 PHP 中转换为 260？我已经尝试了一些 uniord 函数，但它们都报告 256 而不是 260。

非常感谢您的帮助！

问候

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-28T22:23:18.377

mbstring 版本：

```
function utf8_char_code_at($str, $index)
{
    $char = mb_substr($str, $index, 1, 'UTF-8');

    if (mb_check_encoding($char, 'UTF-8')) {
        $ret = mb_convert_encoding($char, 'UTF-32BE', 'UTF-8');
        return hexdec(bin2hex($ret));
    } else {
        return null;
    }
} 
```

使用 htmlspecialchars 和 htmlspecialchars_decode 获取一个字符：

```
function utf8_char_code_at($str, $index)
{
    $char = '';
    $str_index = 0;

    $str = utf8_scrub($str);
    $len = strlen($str);

    for ($i = 0; $i < $len; $i += 1) {

        $char .= $str[$i];

        if (utf8_check_encoding($char)) {

            if ($str_index === $index) {
                return utf8_ord($char);
            }

            $char = '';
            $str_index += 1;
        }
    }

    return null;
}

function utf8_scrub($str)
{
    return htmlspecialchars_decode(htmlspecialchars($str, ENT_SUBSTITUTE, 'UTF-8'));
}

function utf8_check_encoding($str)
{
    return $str === utf8_scrub($str);
}

function utf8_ord($char)
{
    $lead = ord($char[0]);

    if ($lead < 0x80) {
        return $lead;
    } else if ($lead < 0xE0) {
        return (($lead & 0x1F) << 6) 
      | (ord($char[1]) & 0x3F);
    } else if ($lead < 0xF0) {
        return (($lead &  0xF) << 12)
     | ((ord($char[1]) & 0x3F) <<  6)
     |  (ord($char[2]) & 0x3F);
    } else {
        return (($lead &  0x7) << 18)
     | ((ord($char[1]) & 0x3F) << 12)
     | ((ord($char[2]) & 0x3F) <<  6)
     |  (ord($char[3]) & 0x3F);
    }
} 
```

PHP 扩展版本：

```
#include "ext/standard/html.h"
#include "ext/standard/php_smart_str.h"

const zend_function_entry utf8_string_functions[] = {
    PHP_FE(utf8_char_code_at, NULL)
    PHP_FE_END
};

PHP_FUNCTION(utf8_char_code_at)
{
    char *str;
    int len;
    long index;

    unsigned int code_point;
    long i;
    int status;
    size_t pos = 0, old_pos = 0;

    if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "sl", &str, &len, &index) == FAILURE) {
        return;
    }

    for (i = 0; pos < len; ++i) {
        old_pos = pos;
        code_point = php_next_utf8_char((const unsigned char *) str, (size_t) len, &pos, &status);

        if (i == index) {
            if (status == SUCCESS) {
                RETURN_LONG(code_point);
            } else {
                RETURN_NULL();
            }

        }

    }

    RETURN_NULL();
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-26T12:22:34.047

`ord()`按字节工作（作为大多数 PHP 标准字符串函数 - 如果不是全部）。您需要自己转换它，例如在多字节字符串扩展的帮助下：

```
$utf8Character = 'Ą';
list(, $ord) = unpack('N', mb_convert_encoding($utf8Character, 'UCS-4BE', 'UTF-8'));
echo $ord; # 260 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-26T12:23:30.147

尝试：

```
 function uniord($c) {
        $h = ord($c{0});
        if ($h <= 0x7F) {
            return $h;
        } else if ($h < 0xC2) {
            return false;
        } else if ($h <= 0xDF) {
            return ($h & 0x1F) << 6 | (ord($c{1}) & 0x3F);
        } else if ($h <= 0xEF) {
            return ($h & 0x0F) << 12 | (ord($c{1}) & 0x3F) << 6
                                     | (ord($c{2}) & 0x3F);
        } else if ($h <= 0xF4) {
            return ($h & 0x0F) << 18 | (ord($c{1}) & 0x3F) << 12
                                     | (ord($c{2}) & 0x3F) << 6
                                     | (ord($c{3}) & 0x3F);
        } else {
            return false;
        }
    }
    echo uniord('Ą'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-20T01:18:03.787

这应该等同于`charCodeAt()`基于@hakre 工作的 JavaScript，但更正为实际上与 JavaScript 相同（以我能想到的各种方式进行测试）：

```
function charCodeAt($string, $offset) {
  $string = mb_substr($string, $offset, 1);
  list(, $ret) = unpack('S', mb_convert_encoding($string, 'UTF-16LE'));
  return $ret;
} 
```

（这需要安装和激活PHP 扩展“ [mbstring ”。）](https://www.php.net/mbstring)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-03-04T20:43:58.210

这里有一个**ord_utf8**函数： [https ://stackoverflow.com/a/42600959/7558876](https://stackoverflow.com/a/42600959/7558876)

这个函数看起来像这样*（接受字符串并返回整数）*

```
<?php

function ord_utf8($s){
return (int) ($s=unpack('C*',$s[0].$s[1].$s[2].$s[3]))&&$s[1]<(1<<7)?$s[1]:
($s[1]>239&&$s[2]>127&&$s[3]>127&&$s[4]>127?(7&$s[1])<<18|(63&$s[2])<<12|(63&$s[3])<<6|63&$s[4]:
($s[1]>223&&$s[2]>127&&$s[3]>127?(15&$s[1])<<12|(63&$s[2])<<6|63&$s[3]:
($s[1]>193&&$s[2]>127?(31&$s[1])<<6|63&$s[2]:0)));
} 
```

还有一个快速**的 chr_utf8**： [https ://stackoverflow.com/a/42510129/7558876](https://stackoverflow.com/a/42510129/7558876)

这个函数看起来像这样*（接受整数并返回一个字符串）*

```
<?php

function chr_utf8($n,$f='C*'){
return $n<(1<<7)?chr($n):($n<1<<11?pack($f,192|$n>>6,1<<7|191&$n):
($n<(1<<16)?pack($f,224|$n>>12,1<<7|63&$n>>6,1<<7|63&$n):
($n<(1<<20|1<<16)?pack($f,240|$n>>18,1<<7|63&$n>>12,1<<7|63&$n>>6,1<<7|63&$n):'')));
} 
```

如果您想要一个示例，请查看链接...</p>

# blackberry - Eclipse插件1.5中的黑莓模拟器

> ID：10333109
> 
> 赞同：0
> 
> 时间：2012-04-26T12:10:18.733
> 
> 标签：blackberry, eclipse-plugin, simulator

我有 Eclipse 插件版本 1.5 Helios。它有一个默认的模拟器 9930 粗体。

我想在我的插件中添加其他模拟器。如何添加其他模拟器，如 Curve-9550/Torch-9860。

目前我的日食有一个模拟器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:38:38.713

对于 9000 Bold 模拟器----

```
1.Open the file “SimPackage-JDE.rc” which should be found in your **eclipse** simulator folder. It should be in <JDEInstallDirectory>\plugins\net.rim.eide.componentpack4.5.0_4.5.0.16\components\simulator.

2\. Append two entries

    SimulatorCommand9000-JDE = <Sim_install_dir>\fledge.exe /app=Jvm.dll /handheld=9000 /session=9000 /app-param=DisableRegistration /app-param=JvmAlxConfigFile:9000.xml /data-port=0x4d44 /data-port=0x4d4e /pin=0x2100000A

    SimulatorDirectory9000-JDE= <Sim_install_dir> 
```

请注意，应将其替换为安装 9000 Bold 模拟器的实际路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:14:31.583

[您可以从黑莓网站](http://us.blackberry.com/developers/resources/simulators.jsp)下载模拟器

# testing - 如何在给定位置触发 Ember.View 上的点击事件

> ID：10333115
> 
> 赞同：2
> 
> 时间：2012-04-26T12:11:04.987
> 
> 标签：testing, ember.js

出于测试目的，我需要在视图上触发单击事件并检查鼠标位置是否正确发送到回调。

我可以通过以下方式触发事件：

```
view.fire('click'); 
```

但是如何添加鼠标的 (x,y) 坐标？

使用 jquery 可以执行以下操作：

```
var event = $.Event('click');
event.clientX = 100;
event.clientY = 50;
$('div').trigger(event); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T12:22:48.913

只需将事件作为参数传递，请参阅[http://jsfiddle.net/pangratz666/8nRRE/](http://jsfiddle.net/pangratz666/8nRRE/)：

```
var view = Ember.View.create({
    click: function(evt) {
        console.log('clicked on view at %@/%@'.fmt(evt.clientX, evt.clientY));
    }
});

var event = $.Event('click');
event.clientX = 100;
event.clientY = 50;

view.fire('click', event);​ 
```

所有参数`fire`都传递给触发事件，请参阅[evented.js](https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/mixins/evented.js#L19-21)。

# android - Android - 无需配对即可连接多个蓝牙设备

> ID：10333120
> 
> 赞同：4
> 
> 时间：2012-04-26T12:11:15.067
> 
> 标签：android, bluetooth, rfcomm, insecure-connection

我有一堆不可发现的设备，但我知道它们的 MAC 地址。目前我可以在我的 ConnectThread 中使用它连接到多个设备：

```
Method m = device.getClass().getMethod("createRfcommSocket",new Class[] { int.class });

tmp = (BluetoothSocket) m.invoke(device, 1); 
```

问题是我想为 2.3 之前的设备支持不安全的 RFCOMM。然后我在另一个答案上[找到了这个](http://mobisocial.stanford.edu/news/2011/03/bluetooth-reflection-and-legacy-nfc/)，这让我可以这样做：

```
tmp = InsecureBluetooth.createRfcommSocketToServiceRecord(device,MY_UUID, true); 
```

无需配对即可完美连接到单个设备。

我的问题是我怎样才能两全其美并在 InsecureBluetooth 类上使用反射？或者它是否需要在 InsecureBluetooth 类中完成，如果是这样，怎么做？这是 InsecureBluetooth 类的相关部分：

```
private static BluetoothSocket createRfcommSocketToServiceRecord(
        BluetoothDevice device, int port, UUID uuid, boolean encrypt)
        throws IOException {
    try {
        BluetoothSocket socket = null;
        Constructor<BluetoothSocket> constructor = BluetoothSocket.class
                .getDeclaredConstructor(int.class, int.class, boolean.class,
                        boolean.class, BluetoothDevice.class, int.class, ParcelUuid.class);
        if (constructor == null)
            throw new RuntimeException("can't find the constructor for socket");

        constructor.setAccessible(true);
        Field f_rfcomm_type = BluetoothSocket.class
                .getDeclaredField("TYPE_RFCOMM");
        f_rfcomm_type.setAccessible(true);
        int rfcomm_type = (Integer) f_rfcomm_type.get(null);
        socket = constructor.newInstance(new Object[] { rfcomm_type, -1, false,
                true, device, port, uuid != null ? new ParcelUuid(uuid) : null });
        return socket;
    } catch (NoSuchMethodException e) {
        throw new RuntimeException(e);
    } catch (NoSuchFieldException e) {
        throw new RuntimeException(e);
    } catch (IllegalAccessException e) {
        throw new RuntimeException(e);
    } catch (InstantiationException e) {
        throw new RuntimeException(e);
    } catch (InvocationTargetException e) {
        if (e.getCause() instanceof IOException) {
            throw (IOException) e.getCause();
        }
        throw new RuntimeException(e.getCause());
    }
}

public static BluetoothSocket createRfcommSocketToServiceRecord(
        BluetoothDevice device, UUID uuid, boolean encrypt) throws IOException {
    return createRfcommSocketToServiceRecord(device, -1, uuid, encrypt);
}

public static BluetoothSocket createRfcommSocket(BluetoothDevice device,
        int port, boolean encrypt) throws IOException {
    return createRfcommSocketToServiceRecord(device, port, null, encrypt);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:22:25.627

您可以使用以下类来创建不安全的蓝牙套接字连接。它会自动处理反射，为 2.3.3 以下的 SDK 提供此功能

```
import java.io.IOException;
import java.lang.reflect.Constructor;
import java.lang.reflect.Field;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.UUID;

import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothServerSocket;
import android.bluetooth.BluetoothSocket;
import android.os.Binder;
import android.os.Handler;
import android.os.IBinder;
import android.os.ParcelUuid;
import android.util.Log;

/**
 * Class to offer unsecure bluetooth socket connection.<br />
 * It was intended to be used when building the app with API version below 10 (API < Android2.3.3)
 * @author waa
 *
 */
@SuppressWarnings("all")
public class UnpairedBluetooth {
    static private class InUse extends RuntimeException {
    }

    public static BluetoothServerSocket listenUsingRfcommWithServiceRecord(BluetoothAdapter adapter, String name, UUID uuid, boolean encrypt) throws IOException {
        try {
            Class c_rfcomm_channel_picker = null;
            Class[] children = BluetoothAdapter.class.getDeclaredClasses();
            for(Class c : children) {
                Log.e("TO", "class " + c.getCanonicalName());
                if(c.getCanonicalName().equals(BluetoothAdapter.class.getName() + ".RfcommChannelPicker")) {
                    c_rfcomm_channel_picker = c;
                    break;
                }
            }
            if(c_rfcomm_channel_picker == null)
                throw new RuntimeException("can't find the rfcomm channel picker class");

            Constructor constructor = c_rfcomm_channel_picker.getDeclaredConstructor(UUID.class);
            if(constructor == null)
                throw new RuntimeException("can't find the constructor for rfcomm channel picker");
            Object rfcomm_channel_picker = constructor.newInstance(new Object[] {uuid});
            Method m_next_channel = c_rfcomm_channel_picker.getDeclaredMethod("nextChannel", new Class[] {});
            m_next_channel.setAccessible(true);

            BluetoothServerSocket socket = null;

            int channel;
            int errno;
            while (true) {
                channel = (Integer)m_next_channel.invoke(rfcomm_channel_picker, new Object[] {});

                if (channel == -1) {
                    throw new IOException("No available channels");
                }

                try {
                    socket = listenUsingRfcomm(channel, encrypt);
                    break;
                } catch(InUse e) {
                    continue;
                }
            }

            Field f_internal_service = adapter.getClass().getDeclaredField("mService");
            f_internal_service.setAccessible(true);
            Object internal_service = f_internal_service.get(adapter);

            Method m_add_rfcomm_service_record = internal_service.getClass().getDeclaredMethod("addRfcommServiceRecord", new Class[] {String.class, ParcelUuid.class, int.class, IBinder.class});
            m_add_rfcomm_service_record.setAccessible(true);

            int handle = (Integer)m_add_rfcomm_service_record.invoke(internal_service, new Object[] { name, new ParcelUuid(uuid), channel, new Binder() } );

            if (handle == -1) {
                try {
                    socket.close();
                } catch (IOException e) {}
                throw new IOException("Not able to register SDP record for " + name);
            }
            Field f_internal_handler = adapter.getClass().getDeclaredField("mHandler");
            f_internal_handler.setAccessible(true);
            Object internal_handler = f_internal_handler.get(adapter);

            Method m_set_close_handler = socket.getClass().getDeclaredMethod("setCloseHandler", new Class[] {Handler.class, int.class});
            m_set_close_handler.setAccessible(true);

            m_set_close_handler.invoke(socket, new Object[] { internal_handler, handle});
            return socket;
        } catch (NoSuchMethodException e) {
            throw new RuntimeException(e);
        } catch (NoSuchFieldException e) {
            throw new RuntimeException(e);
        } catch(IllegalAccessException e) {
            throw new RuntimeException(e);
        } catch(InstantiationException e) {
            throw new RuntimeException(e);
        } catch(InvocationTargetException e) {
            if(e.getCause() instanceof IOException) {
                throw (IOException)e.getCause();
            }
            throw new RuntimeException(e.getCause());
        }   
    }
    private static BluetoothServerSocket listenUsingRfcomm(/*BluetoothAdapter adapter, */ int port, boolean encrypt, boolean reuse) throws IOException, InUse {
        BluetoothServerSocket socket = null;
        try {
            Constructor<BluetoothServerSocket> constructor = BluetoothServerSocket.class.getDeclaredConstructor(int.class, boolean.class, boolean.class, int.class);
            if(constructor == null)
                throw new RuntimeException("can't find the constructor");
            constructor.setAccessible(true);
            Field f_rfcomm_type = BluetoothSocket.class.getDeclaredField("TYPE_RFCOMM");
            f_rfcomm_type.setAccessible(true);
            int rfcomm_type = (Integer)f_rfcomm_type.get(null);

            Field f_e_addr_in_use = BluetoothSocket.class.getDeclaredField("EADDRINUSE");
            f_e_addr_in_use.setAccessible(true);
            int e_addr_in_use = (Integer)f_e_addr_in_use.get(null);

            socket = constructor.newInstance(new Object[] { rfcomm_type, false, encrypt, port } );

            Field f_internal_socket = socket.getClass().getDeclaredField("mSocket");
            f_internal_socket.setAccessible(true);
            Object internal_socket = f_internal_socket.get(socket);
            Method m_bind_listen = internal_socket.getClass().getDeclaredMethod("bindListen", new Class[] {});
            m_bind_listen.setAccessible(true);
            Object result = m_bind_listen.invoke(internal_socket, new Object[] {});

            int errno = (Integer)result;
            if(reuse && errno == e_addr_in_use) {
                throw new InUse();
            } else if (errno != 0) {
                try {
                    socket.close();
                } catch (IOException e) {}
                internal_socket.getClass().getMethod("throwErrnoNative", new Class[] {int.class}).invoke(internal_socket, new Object[] { errno });
            }
            return socket;
        } catch (NoSuchMethodException e) {
            throw new RuntimeException(e);
        } catch (NoSuchFieldException e) {
            throw new RuntimeException(e);
        } catch(IllegalAccessException e) {
            throw new RuntimeException(e);
        } catch(InstantiationException e) {
            throw new RuntimeException(e);
        } catch(InvocationTargetException e) {
            if(e.getCause() instanceof IOException) {
                throw (IOException)e.getCause();
            }
            throw new RuntimeException(e.getCause());
        }
    }
    public static BluetoothServerSocket listenUsingRfcomm(int port, boolean encrypt) throws IOException {
        return listenUsingRfcomm(port, encrypt, false);
    }
    private static BluetoothSocket createRfcommSocketToServiceRecord(BluetoothDevice device, int port, UUID uuid, boolean encrypt) throws IOException {
        try {
            BluetoothSocket socket = null;
            Constructor<BluetoothSocket> constructor = BluetoothSocket.class.getDeclaredConstructor(
                    int.class, int.class, boolean.class, boolean.class, BluetoothDevice.class, int.class, ParcelUuid.class);
            if(constructor == null)
                throw new RuntimeException("can't find the constructor for socket");

            constructor.setAccessible(true);
            Field f_rfcomm_type = BluetoothSocket.class.getDeclaredField("TYPE_RFCOMM");
            f_rfcomm_type.setAccessible(true);
            int rfcomm_type = (Integer)f_rfcomm_type.get(null);
//          socket = constructor.newInstance(new Object[] { rfcomm_type, -1, false, true, device, port, uuid != null ? new ParcelUuid(uuid) : null} );
            socket = constructor.newInstance(new Object[] { rfcomm_type, -1, false, encrypt, device, port, uuid != null ? new ParcelUuid(uuid) : null} );
            return socket;
        } catch (NoSuchMethodException e) {
            throw new RuntimeException(e);
        } catch (NoSuchFieldException e) {
            throw new RuntimeException(e);
        } catch(IllegalAccessException e) {
            throw new RuntimeException(e);
        } catch(InstantiationException e) {
            throw new RuntimeException(e);
        } catch(InvocationTargetException e) {
            if(e.getCause() instanceof IOException) {
                throw (IOException)e.getCause();
            }
            throw new RuntimeException(e.getCause());
        }
    }
    public static BluetoothSocket createRfcommSocketToServiceRecord(BluetoothDevice device, UUID uuid, boolean encrypt) throws IOException{
        return createRfcommSocketToServiceRecord(device, -1, uuid, encrypt);
    }
    public static BluetoothSocket createRfcommSocket(BluetoothDevice device, int port, boolean encrypt) throws IOException {
        return createRfcommSocketToServiceRecord(device, port, null, encrypt);
    }
} 
```

有关更多信息，请参阅[此](http://mobisocial.stanford.edu/news/2011/03/bluetooth-reflection-and-legacy-nfc/)链接。

# asp.net-mvc-3 - 使用 for 循环是在 ASP.NET MVC 应用程序中添加多个相似数据库条目的最优雅方式吗？（ C＃ ）

> ID：10333123
> 
> 赞同：2
> 
> 时间：2012-04-26T12:11:21.957
> 
> 标签：asp.net-mvc-3, entity-framework, design-patterns, for-loop

我有一个应用程序，学生可以在其中注册学校课程。为了准备他们的出勤信息，我需要填充出勤表中的数据。我通常会像这样完成这项任务：

```
Attendance newAttendace = new Attendance
{
    CourseID = course.CourseID,
    StudentID = thisStudent.StudentID,
    AttendanceDay = 1,
    Present = false
};
db.Attendance.Add(newAttendance);
db.SaveChanges(); 
```

但是我需要为课程的每个可能的出勤日都执行此操作 - 因此，如果学生有 20 天的时间参加这门课程，我需要能够添加 AttendanceDay = 1 到 20 的行。

我正在考虑在 for 循环中执行此操作并一遍又一遍地增加出勤日 1 并将“newAttendance”添加到数据库中 20 次然后执行 db.SaveChanges() 调用 - 但我在进入数据库时​​从未执行过 for 循环之前的条目 - 在使用 C# 的 ASP.NET MVC 中是否有更优雅的方式来执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:15:23.750

我认为这是正确的做法。但请确保您`db.SaveChanges()`在循环之外。你只需要调用一次

```
for(int i=0;i<20;i++)
{
   Attendance newAttendace = new Attendance
  {
    CourseID = course.CourseID,
    StudentID = thisStudent.StudentID,
    AttendanceDay = 1,
    Present = false
  };
  db.Attendance.Add(newAttendance);
}
db.SaveChanges(); 
```

# sql - Zend Db PDO_sqlite 插入和更新查询的糟糕性能

> ID：10333125
> 
> 赞同：0
> 
> 时间：2012-04-26T12:11:34.310
> 
> 标签：sql, database, sqlite, zend-framework, zend-db

我的 sqlite 数据库性能存在一些重大问题。我用它来存储少量数据，这应该非常快，但不知何故需要太长时间。首先，我使用工厂静态方法创建 Zend_Db 对象：

```
$this->db = Zend_Db::factory('PDO_SQLITE', $params); 
```

之后我运行一些简单的查询：

```
$this->db->query($q) 
```

这里是日志的时间：

2012-04-26 13:08:06.752855: 更新集`session`= `value`'542M', `timeStamp`='1335438486', type='999', `ip`='62.21.30.77' WHERE `name`='code1' AND id_session='8fac3359f5c352b64a8077456567746ce' **01.**

对于这样简单的查询，0.1453s 似乎真的很大。此外，有时类似的查询会持续近 0.5 秒。

数据库已创建索引。

任何想法可能是什么问题？或者这就是 Zend_Db 与 sqlite 一起工作的方式？

# javascript - SVG：通过 jQuery 更新在 FF 中有效，但在 Safari 中无效，有什么想法吗？

> ID：10333128
> 
> 赞同：2
> 
> 时间：2012-04-26T12:11:46.000
> 
> 标签：javascript, jquery, html, safari, svg

我想更新嵌入式 SVG。我使用**jQuery css 选择器选择 SVG 元素，并通过****jQuery 的 .attr()**函数更改它的属性。它在 FF 中按预期工作，但在 Safari 中没有效果。有任何想法吗？

**我的 HTML 中的 SVG：**

```
 <svg id="svgelem" height="150" width="400" xmlns="http://www.w3.org/2000/svg">
   <defs>
    <path id = "s3" d = "M 60 70 L 220 30 L 300 60 L 180 120 L 60 70" fill = "green" stroke = "black" stroke-width = "3"/>
   </defs>
   <g fill = "navy">
    <text font-size = "20">
     <textPath xlink:href = "#s3">
       Foo Bar
     </textPath>
    </text>
   </g>
  </svg> 
```

**JavaScript：**

```
$("textPath").text("other text");
$("path").attr("d","M 60 70 L 90 30 L 300 60 L 180 120 L 60 70"); 
```

**工作示例：**

[提琴手](http://jsfiddle.net/snies/FmhqX/16/)

*   操作系统：Mac OS X 10.7.3
*   火狐：11.0
*   野生动物园：5.1.5 (7534.55.3)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:42:38.873

我想我一开始我像这样向 textpath 节点添加了一个 id

```
 <textPath id="test" xlink:href = "#s3"> 
```

其次，我将方式属性从文本更改为追加，因为您在节点内追加 html 内容并首先删除里面的内容看看

```
$("#bt_text").click(function(){
    $("#test").empty().append("other text allalaksddkfdsbbklas sldnsdd");});
$("#bt_coord").click(function(){
    $("path").attr("d","M 60 70 L 90 30 L 300 60 L 180 120 L 60 70");});​ 
```

这是现场示例

[http://jsfiddle.net/FmhqX/23/](http://jsfiddle.net/FmhqX/23/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T10:58:28.050

不优雅，但可行的解决方案。这会更新完整的 svg：

```
$("#svg_cont").html($("#svg_cont").html()); 
```

其中`#svg_cont`是 svg 元素的容器 div。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-10T20:00:26.720

这个 SVG 刷新问题是一个难题。经过大量研究，我在这里找到了最好的解决方案：http: [//jcubic.wordpress.com/2013/06/19/working-with-svg-in-jquery/](http://jcubic.wordpress.com/2013/06/19/working-with-svg-in-jquery/)

基本上，创建...

```
$.fn.xml = function() {
    return (new XMLSerializer()).serializeToString(this[0]);
};

$.fn.DOMRefresh = function() {
    return $($(this.xml()).replaceAll(this));
}; 
```

然后调用它

```
$("#diagram").DOMRefresh(); //where your <svg> tag has id="diagram" 
```

这是一个奇迹，但它有效！（Chrome 和 Firefox。我不知道其他浏览器。）

# hibernate - 从 HttpSession 中的 Hibernate Session 检索到的实例的生命周期

> ID：10333129
> 
> 赞同：1
> 
> 时间：2012-04-26T12:11:45.980
> 
> 标签：hibernate, servlets, httpsession

我会用一个例子来解释我的问题。在我的 JSP 登录页面中，每个正确的登录都会放置一个名为“用户”的对象的实例，该实例保存用户登录到 HttpSession( `session.setAttribute("user",userObject)`) 的数据。该对象的创建方式是，检查该用户的用户名和密码以及一个实例（从 HibernateSession 中检索 User 对象的 'User')。
在另一个页面中，当我从 HttpSession 检索上述 set userObject 时，可以无错误地检索该对象。但是当它的方法被调用时，它给出了一个异常。`org.hibernate.LazyInitializationException: could not initialize proxy - no Session` 为什么我不能从 HttpSession 中获取那个 userObject，即使我已经把它放在前面了？

为什么 HttpSession 中存在一个空对象（实例变量没有值），即使该对象在添加到会话时早先具有值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:57:47.320

如果`User`实体具有延迟获取的集合属性，则可能发生这种情况。`size()`然后，只有当调用者实际需要通过例如、等访问它时，集合才会实际填充来自 DB 的数据。这需要在与检索`iterator()`时相同的 Hibernate 会话中发生。`User`在一个设计合理的 web 应用程序中，Hibernate 会话的生命周期就是一个 HTTP 请求-响应。因此，如果访问集合属性发生在不同的 Hibernate 会话中（阅读：不同的 HTTP 请求），那么您将得到这个异常。

要解决此问题，您要么需要急切地获取集合属性，要么`Hibernate#initialize()`在检索`User`.

### 也可以看看：

*   [Hibernate 参考文档 - 初始化集合和代理](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/performance.html#performance-fetching-initialization)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:11:34.480

这是延迟加载的问题。存储在不同数据库实体（例如子对象列表）中的元素不会直接与主实例（您的用户对象）一起加载，而是稍后在真正访问它们时加载。优点是，只有真正使用的对象才需要从数据库中加载。

为了通过延迟加载加载这些额外的对象，Hibernate 需要一个会话。这是最初用于加载主实例的会话。此实例绑定到会话。如果会话在此期间关闭，您会收到您收到的错误消息。例如，如果您按此顺序执行

```
userObject = session.load(...);
session.close();
userObject.getChildObjects(...); // or whatever the method fetching extra objects is called 
```

然后你得到你的错误信息。

您可以采取哪些措施来避免此错误：例如

*   不要关闭会话
*   在子对象的类映射中禁用延迟加载
*   在关闭会话之前调用`userObject.getChildObjects(...);`，即使您在那一刻不使用获取的对象。

将主用户对象存储在 HttpSession 中基本上不是问题，但您可能在对象存在的同时关闭了 Hibernate 会话。

# iphone - 如何显示从xml获取的多个图像

> ID：10333130
> 
> 赞同：0
> 
> 时间：2012-04-26T12:11:46.407
> 
> 标签：iphone, xml, image, imageview

我有这个问题我正在寻找一种方法来创建一个 UIImageView，它显示从我的网络服务器拍摄的照片（使用 xml 以便自动执行）我的目的是创建一个像 Fancy 应用程序这样的 imageView

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:58:54.590

这个答案假设您已经解析了 XML，或者至少知道如何解析。如果您不知道从哪里开始，请开始查看 NSXMLParser。您可以通过快速 google 搜索找到大量有关它的教程/已解决的问题。

对于图像，我会推荐[这里](https://github.com/rs/SDWebImage)提供的 SDWebImage 库。导入库可能会很痛苦，但自述文件中给出了该过程，我发现这个库非常有用/用途广泛。自述文件还详细说明了如何使用代码，实际上非常简单直观。如果您愿意，我可以提供我自己的代码示例并回答有关导入库的任何问题。

关于布局，亚历山大至少在他的回答中给出了我认为是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:20:10.257

[通过来自 web 的 Asynchronous UIImage](http://www.alterplay.com/ios-dev-tips/2009/10/asynchronous-uiimage-from-web.html)给出了非常好的描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:20:24.483

如果我理解正确，您希望能够显示多个 UIImageView。您可以创建一个`UIScrollView`并将其用作容器，因此您可以拥有任意（合理）数量的图像。然后使用循环为图像创建框架、a`UIImageView`和任何其他配置，将图像作为子视图添加到滚动视图并更改`UIScrollView`'s`contentSize`以允许滚动。

类似于：

```
 CGRect baseFrame = CGRectMake(kXOffset, xYOffset, kImageSize, kImageSize); 
    int count = [myArray count]; // myArray contains your data
    for (int i = 0; i < count; i++) {
        NSDictionary *unit = [myArray objectAtIndex:i];
        CGRect buttonFrame = baseFrame;
        buttonFrame.origin.y += (kImageSize + kSpacing) * (i / 3);

        // "imageName" below is a sample key for your image name, you can change this with url or whatever
        UIImageView *img = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[unit objectForKey:@"imageName"]]]; 
        [img setFrame:buttonFrame];
        [myScrollView addSubview:img];
        [img release]; // if not using ARC
    }
    [myScrollView setContentSize:CGSizeMake(320, 20 + (kImageSize + 2 * kSpacing) * ([army count] / 3))]; // some air above and below 
```

# mysql - 一个复杂的 MySQL 查询

> ID：10333134
> 
> 赞同：3
> 
> 时间：2012-04-26T12:11:57.700
> 
> 标签：mysql, sql

我正在尝试编写一个复杂的 SQL 查询，但无法获得具有正确值的结果集。

*   `coupons`桌子上有一些在线优惠券。
*   `merchants`表保存商家信息并`coupons`与`coupons.merchant_id`.
*   `branches``lat`表用和`lng`值保存商家的分支（*计算距离和最近的分支等*）并用 绑定到`merchants`表`branches.merchant_id`。
*   `coupons_branches`表关系`coupons`和`branches`表。
*   `places`桌子放置一些特殊的地方，如商场等，并`branches`用`branches.place_id`.

下面是我的表结构；

```
CREATE TABLE IF NOT EXISTS `branches` (
  `branch_id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `merchant_id` int(11) unsigned NOT NULL DEFAULT '0',
  `place_id` smallint(5) unsigned NOT NULL DEFAULT '0',
  `branch` varchar(40) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `address` varchar(255) COLLATE utf8_unicode_ci DEFAULT '',
  `postcode` varchar(6) COLLATE utf8_unicode_ci DEFAULT '',
  `phone` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  `fax` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  `lat` float(10,6) DEFAULT NULL,
  `lng` float(10,6) DEFAULT NULL,
  `status` tinyint(4) unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`branch_id`),
  KEY `lat` (`lat`),
  KEY `lng` (`lng`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `coupons` (
  `coupon_id` mediumint(9) unsigned NOT NULL AUTO_INCREMENT,
  `category_id` tinyint(4) unsigned NOT NULL DEFAULT '0',
  `merchant_id` mediumint(9) unsigned NOT NULL DEFAULT '0',
  `coupon` varchar(200) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `description` longtext COLLATE utf8_unicode_ci,
  `start_date` date DEFAULT NULL,
  `end_date` date DEFAULT NULL,
  `coupon_usage` int(10) unsigned NOT NULL DEFAULT '0',
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `status` enum('active','passive','deleted','preview') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'active',
  PRIMARY KEY (`coupon_id`),
  KEY `start_date` (`start_date`),
  KEY `end_date` (`end_date`),
  KEY `merchant_id` (`merchant_id`),
  KEY `category_id` (`category_id`),
  KEY `status` (`status`),
  KEY `created` (`created`),
  FULLTEXT KEY `description` (`description`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `coupons_branches` (
  `branch_id` int(11) unsigned NOT NULL DEFAULT '0',
  `coupon_id` int(11) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`branch_id`,`coupon_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE IF NOT EXISTS `merchants` (
  `merchant_id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `merchant` varchar(80) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `website` varchar(150) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `status` enum('active','passive','deleted') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'passive',
  PRIMARY KEY (`merchant_id`),
  KEY `status` (`status`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `places` (
  `place_id` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `city_id` smallint(5) unsigned NOT NULL DEFAULT '0',
  `place` varchar(150) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`place_id`),
  KEY `place` (`place`),
  KEY `city_id` (`city_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ; 
```

这是我的 SQL；

```
SELECT * FROM (SELECT coupons.coupon_id AS c_id, coupons.category_id, coupons.coupon, merchants.merchant_id, merchants.merchant, (((acos(sin((41.02287686 * pi() / 180)) * sin((branches.lat * pi() / 180)) + cos((41.02287686 * pi() / 180)) * cos((branches.lat * pi()/ 180)) * cos(((29.04632806 - branches.lng) * pi() / 180)))) * 180 / pi()) * 60 * 1.1515 * 1.609344) as distance, COUNT(coupons.coupon_id) AS total_coupons
FROM (`coupons`)
INNER JOIN `coupons_branches` ON `coupons`.`coupon_id` = `coupons_branches`.`coupon_id`
RIGHT OUTER JOIN `branches` ON `coupons_branches`.`branch_id` = `branches`.`branch_id`
LEFT OUTER JOIN `merchants` ON `coupons`.`merchant_id` = `merchants`.`merchant_id`
WHERE `coupons`.`status` =  'active'
AND `merchants`.`status` =  'active'
GROUP BY `merchants`.`merchant_id`
HAVING `distance` <= 25000
ORDER BY `merchants`.`merchant`) as T2 GROUP BY c_id ORDER BY merchant 
```

我正在尝试找出商家的总优惠券。我只想列出该商家的最新优惠券。我不想列出所有优惠券。我想先对商家进行分组，显示商家有多少优惠券。然后在另一个页面上，我将显示属于该商家的优惠券。

**`total_coupons`**除了列，一切都很好。总优惠券列未正确计算。如果我在下面写下类似的内容，它会正确计算。

```
SELECT * FROM (SELECT coupons.coupon_id, coupons.coupon_id AS c_id, coupons.category_id, coupons.coupon, merchants.merchant_id, merchants.merchant, coupons.coupon_usage, COUNT(coupons.coupon_id) AS total_coupons
FROM (`coupons`)
LEFT OUTER JOIN `merchants` ON `coupons`.`merchant_id` = `merchants`.`merchant_id`
WHERE `coupons`.`status` =  'active'
AND `merchants`.`status` =  'active'
GROUP BY `merchants`.`merchant_id`
ORDER BY `merchants`.`merchant`) as T2 GROUP BY c_id ORDER BY merchant 
```

`branches`和表有问题，`places`但我找不到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T12:36:35.543

Try by changing the `COUNT()` expression to `COUNT(DISTINCT coupons.coupon_id)`. Without the DISTINCT keyword, even duplicate coupons are being counted into the total sum of merchant's coupons. I'm guessing you're looking only for the sum of coupons currently distributed to branches.

# eclipse - 更改后自动重新加载属性文件

> ID：10333135
> 
> 赞同：0
> 
> 时间：2012-04-26T12:11:58.933
> 
> 标签：eclipse, tomcat, fileinputstream, fileoutputstream, file-properties

我正在开发一个从文件属性获取信息的应用程序，并创建一个将新值放入属性文件的字段问题是，当我提交更改时，不会重新加载文件，并且仅在重新加载应用程序后才考虑更改。我正在使用 Eclipse Indigo、Liferay 6.1、Tomcat 7.0、Vaadin、Spring、Hibernate 和 Maven

我正在使用此类将 textField 中的新值保存到文件中

```
public class configurationProperties {

Properties prop = new Properties() ;
File fProp = new File("C:/integrationContinue/src/main/resources/fooMessages_fr_FR.properties") ;
FileInputStream stream = null;
FileOutputStream oStream = null;

public void changeUrlJenkins(String url) throws IOException{

    stream = new FileInputStream(fProp);
    prop.load(stream) ;
    prop.setProperty("jenkins.url",url) ;
    oStream = new FileOutputStream(fProp);
    prop.store(oStream,"test") ;

} 
```

当我单击保存按钮时，没有任何反应，但如果我打开属性文件

我收到此消息“文件系统上的文件 '.../fooMessages_fr_FR.properties' 已更改。您想用这些更改替换编辑器内容吗？”

当我单击“重新加载按钮”时提交更改并重新加载应用程序=>当我在 Eclipse 上时很好，我不能在网络浏览器上这样做。

PS：听说如果我使用Tomcat Manager而不是集成在Liferay上的Tomcat，它可以工作，但是当我想用Tomcat的新路径配置Liferay时出现错误

修改后如何自动重新加载属性文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:06:17.947

您更改`src`-folder 中的属性，这是错误的，您必须在`classes`-folder 中更改它。

ps：这适用于eclipse，因为eclipse将它复制到了classes文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:07:33.733

这听起来像是一个部署问题，而不是 tomcat 没有正确读取属性。

当您通过 Eclipse 部署到 Tomcat 时，它会将文件从项目复制到部署目录 [eclipse workspace]/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/[server]。它也可以将其复制到输出目录，具体取决于您的配置。

因此，如果理解正确，您将保存到工作区文件 /src/main/resources/fooMessages_fr_FR.properties？Eclipse 直到您单击它才意识到该文件已被更新，此时它将它复制到 .plugins/blah，并且一切正常。

如果您在 Eclipse 之外部署，这可能会正常工作，因为不会有任何从您的工作区复制到部署目录的内容。

如果您在此之后仍然卡住，请查看 apache commons [FileChangedReloadingStrategy](http://commons.apache.org/configuration/apidocs/org/apache/commons/configuration/reloading/FileChangedReloadingStrategy.html)，它允许您在属性文件更改时重新加载它。

# jqplot - JQ 图无法正确显示月份

> ID：10333137
> 
> 赞同：1
> 
> 时间：2012-04-26T12:12:16.387
> 
> 标签：jqplot

我正在使用以下代码段来显示我的图表：

```
 xaxis: {
        min: '2012-01-01 00:00:00.0',
        max: '2012-04-01 00:00:00.0',
        renderer : "$.jqplot.DateAxisRenderer",
        rendererOptions : {
           "tickRenderer" : "$.jqplot.CanvasAxisTickRenderer"
        },
        numberTicks: 4,
        showTickMarks : false,
        tickOptions:{
           angle:0,
           formatString:'%b %Y'
        }
    },

    Data :[
          ['2012-01-01 00:00:00.0', 0]
        , ['2012-02-01 00:00:00.0', 0]
        , ['2012-03-01 00:00:00.0', 0]
        , ['2012-04-01 00:00:00.0', 0]
    ] 
```

而不是显示：2012 年 1 月、2012 年 2 月、2012 年 3 月、2012 年 4 月，而是显示：2012 年 1 月、2012 年 1 月、2012 年 3 月、2012 年 4 月。

在进一步调试时，我发现第二点实际上是 2012 年 1 月 31 日，在应用格式时显示为 2012 年 1 月。

我怎样才能确保它正确显示月份。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:31:32.637

我注意到您的代码中有一些“混乱”。`tickRenderer`应该在参数之外`rendererOptions`。此外，它周围和渲染器类周围的引号也不是必需的。

我在询问您是否希望每个显示间隔为一个月的刻度？因此，请改用 tickInterval 参数。例如：`tickInterval: "1 months"`

[就像我在其他答案中展示的那样。](https://stackoverflow.com/a/10233111/613495)

**编辑：** 我把它整理好了。显然没有必要限制滴答的数量，因为它们被错误地计算了。既然要受益于`tickInterval`你被迫使用`min`和`max`参数，所以，只有让脚本算出滴答数才对，对吧？:)

因此，要让它按照您想要的方式工作，只需删除带有`numberTicks`. [它显示在这里。](http://jsfiddle.net/Boro/RPnkZ/1/)

**注意：** 我意识到为什么会有这种`numberTicks`行为。之所以如此，是因为它使刻度之间的距离相等。

从 2012 年 1 月 1 日到 5 月 1 日，我们有 122 天。如果我们将天数除以 numberTicks - 1（即 4），我们得到 30.5。因此，我们有 1 月 1 日、1 月 31 日、3 月 1 日、3 月 31 日和 5 月 1 日。

# iphone - 如何在UITabBarItem中设置badgeValue的颜色

> ID：10333143
> 
> 赞同：1
> 
> 时间：2012-04-26T12:12:31.790
> 
> 标签：iphone, objective-c, uitabbaritem

如何在 UITabBarItem 中设置 badgeValue 的颜色。默认的红色表示有问题 - 在我的情况下，它只是信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:38:35.010

恐怕没有（官方）方法可以做到这一点。文档说得很清楚：

> **徽章值**
> 
> 显示在项目右上角的文本，*周围有一个红色椭圆*。

（来自 Apple 的文档）

# asp.net - 添加 .edmx 文件后，需要添加“代码生成项”吗？

> ID：10333146
> 
> 赞同：1
> 
> 时间：2012-04-26T12:12:45.003
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, entity-framework

我正在研究 mvc3 应用程序。

我想知道一些具体的答案：

> 添加 .edmx 文件后需要添加什么，`Code generation item`例如 Poco 、 dbContext 等。

请解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:18:41.693

生成像 Poco 这样的代码为您提供与您的数据库（表）匹配的类

示例：具有两个表（Person 和 Child）的数据库

在您的 ItemPoco 中，您将有两个类 Person 和 Child。在此类中，它们的属性是您的列的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:14:04.053

代码生成项将为您提供 POCO。 [http://msdn.microsoft.com/en-us/library/dd456853.aspx](http://msdn.microsoft.com/en-us/library/dd456853.aspx)

它将创建您可以在应用程序中使用的对象（类）。

本文对帮助您使用 dbcontext tt 创建 POCO 非常有用。

[http://blogs.msdn.com/b/adonet/archive/2011/03/15/ef-4-1-model-amp-database-first-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2011/03/15/ef-4-1-model-amp-database-first-walkthrough.aspx)

# objective-c - 在 UIViewController 中向 NSNotificationCenter 添加和删除观察者

> ID：10333153
> 
> 赞同：19
> 
> 时间：2012-04-26T12:13:15.017
> 
> 标签：objective-c, ios, dealloc, nsnotificationcenter, addobserver

查看各种 Apple 示例（例如[Add Music](http://developer.apple.com/library/ios/#samplecode/AddMusic/Introduction/Intro.html)），在这些示例中，我看到他们将观察者添加到默认值`NSNotificationCenter` ，`viewDidLoad`然后将它们删除`dealloc`。这似乎很危险，因为`viewDidLoad`可以多次调用而不`dealloc`被调用。然后这将多次添加相同的观察者，导致处理程序被多次调用。

对此的解决方案是同时删除 中的观察者`viewDidUnload`，但这意味着同一观察者可以第二次被删除，`dealloc`这似乎是一个潜在的问题。

我错过了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-26T13:45:50.190

有很多关于以正确方式删除通知的讨论。例如：

*   [removeobserver-with-nsnotification-what-am-i-doing-wrong](https://stackoverflow.com/questions/3328210/removeobserver-with-nsnotification-what-am-i-doing-wrong)
*   [移除-a-nsnotificationcenter-observer-in-ios-5-arc](https://stackoverflow.com/questions/8372841/removing-a-nsnotificationcenter-observer-in-ios-5-arc)

我建议您删除`viewWillDisappear`（或`viewDidDisappear`）和`viewDidUnload`生命周期方法中的观察者。（**注意：** `viewDidUnload`已弃用且不应在 iOS6+ 中实现；请参阅[iOS 6 - viewDidUnload migrate to didReceiveMemoryWarning?](https://stackoverflow.com/questions/12674268/ios-6-viewdidunload-migrate-to-didreceivememorywarning)）

重要说明：

`viewDidUnload`不保证被调用 - 它不是标准的生命周期方法。

来自苹果文档：

> viewDidUnload 当内存不足并且不需要当前视图控制器的视图时，系统可能会选择从内存中删除这些视图。此方法在视图控制器的视图被释放后调用，这是您执行任何最终清理的机会。

相反，`dealloc`只要该接收器的引用数为零，就会调用它。

希望能帮助到你。

**编辑**

为了完整起见，您可以查看有关如何[避免-nsnotification-removeobserver 的链接](http://subjective-objective-c.blogspot.it/2011/04/avoid-nsnotification-removeobserver.html)。该链接提供了一些有用的指南来删除观察者（另见评论）。作者在`viewDidAppear`/`viewDidDisappear`方法中执行此操作，因为在许多应用程序`viewWillAppear`中`viewWillDisappear`并不总是正确调用。这是你的选择。

如果您想确保以正确的方式删除观察者，请在`dealloc`方法中或当视图完全卸载时取消注册，如您在第二条评论中所写。但请确保`dealloc`将来会调用它。换句话说，正如我已经提到的，如果控制器继续保持活动状态，因为其他对象已经引用了它，那么该方法将永远不会被调用。在这种情况下，控制器会继续接收通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-23T07:19:45.687

```
- (void)viewWillAppear:(BOOL)animated
{
   [super viewWillAppear:animated];
   [[NSNotificationCenter defaultCenter] addObserver:self .........]
}

- (void)viewWillDisappear:(BOOL)animated
{
   [super viewWillDisappear:animated];
   [[NSNotificationCenter defaultCenter] removeObserver:self .........];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-06T04:33:12.107

对于最近在此页面上绊倒的人来说，可能不再需要删除观察者了。[文档](https://developer.apple.com/documentation/foundation/notificationcenter/1415360-addobserver)的[“讨论”部分`addObserver(_:selector:name:object:)`](https://developer.apple.com/documentation/foundation/notificationcenter/1415360-addobserver)说：

> 如果您的应用面向 iOS 9.0 及更高版本或 macOS 10.11 及更高版本，则无需在其`dealloc`方法中取消注册观察者。否则，您应该`removeObserver(_:name:object:)`在观察者或传递给此方法的任何对象被释放之前调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T13:25:13.147

你为什么不在`viewWillAppear`/中做呢`viewDidDisappear`？无论如何，您只关心显示视图时的通知，对吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-16T02:44:23.317

您可以在 viewWillAppear 中添加观察者，并在 viewWillDisappear 中删除观察者。但是 viewWillAppear 可能会调用很多次。所以你可以先删除通知然后添加观察者。

```
 -(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:YES];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:@"UIKeyboardWillShowNotification" object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:@"UIKeyboardWillHideNotification" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillShow:)name:@"UIKeyboardWillShowNotification"object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillHide:)name:@"UIKeyboardWillHideNotification"object:nil];
 }

 -(void)viewWillDisappear:(BOOL)animated{
[super viewWillDisappear:YES];
[[NSNotificationCenter defaultCenter] removeObserver:self name:@"UIKeyboardWillShowNotification" object:nil];
[[NSNotificationCenter defaultCenter] removeObserver:self name:@"UIKeyboardWillHideNotification" object:nil];
 } 
```

# linq - Linq 格式化项目列表以替换 foreach 循环

> ID：10333155
> 
> 赞同：2
> 
> 时间：2012-04-26T12:13:23.300
> 
> 标签：linq

我有一个项目列表，其中包含对帖子的所有评论和回复。我想通过将 CommentID 与 ReplyToCommentId 进行比较，根据评论和回复来格式化它。

这是我使用 foreach 循环来获得我想用 linq 替换的结果

```
List<UserComment> comments = GetComments(SomeID).ToList();

int i = 0;
  foreach(var item in comments) {
    if(item.IsReply == false) {
      i++;
      formatedComments.Add(item);
      foreach(var replys in comments) {
        if(item.CommentID == replys.ReplyToCommentId) {
          i++;
          formatedComments.Add(replys);
        }
      }
    } 
```

这在 LINQ 中是否可行。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:16:42.527

```
from c in comments
where !c.IsReply
from r in new[] { c }.Concat(
                    comments.Where(r => c.CommentID == r.ReplyToCommentId)
)
select r 
```

或者

```
comments
    .Where(c => !c.IsReply)
    .SelectMany(c => new[] { c }.Concat(
                    comments.Where(r => c.CommentID == r.ReplyToCommentId)
    ) 
```

您可以通过用预先计算的替换嵌套调用来使其更快（`O(n)`而不是）`O(n²)``Where``ToLookup(r => r.ReplyToCommentId)`

# android - Android 无法禁用剪切复制粘贴

> ID：10333160
> 
> 赞同：2
> 
> 时间：2012-04-26T12:13:50.510
> 
> 标签：android

我无法禁用复制粘贴选项。在三星galaxy S2上，如果我点击edittext，会出现一个箭头，点击那个箭头，所有选项都会出现。onCreateContextMenu 尚未被调用。在 onUserInteration 中，我只是使用 setText() 方法清除剪贴板信息，在模拟器上它正在工作，但在真实设备上却没有。请给我这个想法。我尝试了几个小时，但无法修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:37:11.103

See [How to disable edittext in android](https://stackoverflow.com/questions/5879250/how-to-disable-edittext-in-android)

You can additionally set your edittext to `android:editable="false"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:01:18.220

将此添加到您要禁用复制粘贴选项的edittext。

```
 edittext.setCustomSelectionActionModeCallback(new Callback() {

                public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
                    return false;
                }

                public void onDestroyActionMode(ActionMode mode) {                  
                }

                public boolean onCreateActionMode(ActionMode mode, Menu menu) {
                    return false;
                }

                public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
                    return false;
                }
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-06T11:19:06.207

要禁用复制粘贴，您需要停止选择然后插入。使用下面的代码，它的 100% 工作代码。

```
 //This disable the paste 
    editText.setCustomInsertionActionModeCallback(new ActionMode.Callback() {
        @Override
        public boolean onCreateActionMode(ActionMode mode, Menu menu) {
            menu.clear();
            return false;
        }

        @Override
        public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
            return false;
        }

        @Override
        public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
            return false;
        }

        @Override
        public void onDestroyActionMode(ActionMode mode) {

        }
    });

    //This Disable selection of text
    editText.setCustomSelectionActionModeCallback(new Callback() {
        @Override
        public boolean onCreateActionMode(ActionMode mode, Menu menu) {
            menu.clear();
            return false;
        }

        @Override
        public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
            return false;
        }

        @Override
        public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
            return false;
        }

        @Override
        public void onDestroyActionMode(ActionMode mode) {

        }
    });
    editText.setLongClickable(false);
    editText.setTextIsSelectable(false); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-26T12:37:17.580

You might want to check out this question [here.](https://stackoverflow.com/questions/6275299/how-to-disable-copy-paste-from-to-edittext)

Apparently by catching the long touch event you can prevent the copy paste tools from activating like this:

```
OnLongClickListener mOnLongClickListener = new OnLongClickListener() 
{
    @Override
    public boolean onLongClick(View v) 
    {
        // prevent context menu from being popped up, so that user
        // cannot copy/paste from/into any EditText fields.
        return true;
    }
}; 
```

Then set the onLongClickListener you just created on the EditText like this:

```
myEditTextView.setOnLongClickListener(mOnLongClickListener); 
```

# haskell - 如何用haskell处理windows上的信号？

> ID：10333161
> 
> 赞同：6
> 
> 时间：2012-04-26T12:13:52.973
> 
> 标签：haskell, signals

Windows上有类似System.Posix的东西吗？

我希望下面的代码在 Windows 上运行，我应该更改它吗？

```
import IO
import Control.Exception hiding (catch)
import Control.Concurrent
import Network
import System.Posix   ---cannot be run on windows.

main = withSocketsDo (installHandler sigPIPE Ignore Nothing >> main')
    --so the signal handler cannot be used

main' = listenOn (PortNumber 9900) >>= acceptConnections

acceptConnections sock = do
        putStrLn "trying to accept" -- debug msg
        conn@(h,host,port) <- accept sock
        print conn -- debug msg
        forkIO $ catch (talk conn `finally` hClose h) (\e -> print e)
        acceptConnections sock

talk conn@(h,_,_) = hGetLine h >>= hPutStrLn h >> hFlush h >> talk conn 
```

例如，如果我想让程序在 ctrl+c 时退出，我必须为 SIGINT 添加一个处理程序，所以在 c++ 中，编写如下代码：

```
void callback(int sig) 
{ 
   // printf("catch\n"); 
} 
... 
signal(SIGINT,callback); 
```

但我不知道如何在haskell中做到这一点，使用FFI？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-02T08:47:03.117

聚会迟到了，但我写了一个可以提供帮助的库。它允许在 Windows 和 Linux 上进行信号处理。它可用于 hackage： [https ://hackage.haskell.org/package/signal](https://hackage.haskell.org/package/signal)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T17:10:35.913

```
import Foreign
import Foreign.C.Types

type Handler = CInt->IO ()
foreign import ccall "wrapper"
  genHandler:: (Handler) -> IO (FunPtr Handler)

foreign import ccall safe "signal.h signal"
        install:: CInt->FunPtr Handler->IO CInt
main=do
        s<-genHandler (\x->putStrLn $ "catch "++(show x))
        res<- install 2 s
        putStrLn $ show res
        s<-getLine 
```

上面的代码是我想做的，只需导入`signal`函数，带有haskell回调。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T17:10:02.040

我不是 Windows 专家，所以我不知道你需要做什么来忽略你在这里忽略的任何事件。您可能想在[Win32](http://hackage.haskell.org/package/Win32)文档中查找您安装的任何版本。但是，我确实对构建系统以及如何获取要构建的函数的两个版本之一有所了解。所以策略将如下所示：

1.  创建两个目录，`unix-src`和`Win32-src`（或一些类似的名称）。
2.  在每个目录中，放置一个`OSCompat`包含如下内容的模块（或类似名称）：

    ```
    -- unix-src/OSCompat.hs
    module OSCompat where
    import System.Posix
    ignorePipe = installHandler sigPIPE Ignore Nothing

    -- Win32-src/OSCompat.hs
    module OSCompat where
    import System.Win32
    ignorePipe = -- ??? 
    ```

3.  在您的`project.cabal`文件中，将以下内容放入您的`executable`块中：

    ```
    if os(windows)
        build-depends: Win32
        hs-source-dirs: Win32-src
    else
        build-depends: unix
        hs-source-dirs: unix-src 
    ```

4.  将您的顶级模块更改为如下所示：

    ```
    import OSCompat
    main = withSocketsDo (ignorePipe >> main') 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T17:48:51.333

我不认为你可以在 Windows 上做这样的事情。Windows 不兼容 Posix，因此它不完全支持信号，例如它[不支持](http://blogs.msdn.com/b/shrib/archive/2008/05/23/signals-on-windows.aspx)向其他进程发送信号。此外，可用信号的数量[非常有限](http://msdn.microsoft.com/en-us/library/xdkz3x12%28v=vs.71%29.aspx)。

如果我理解正确，您将忽略 SIGPIPE 以保护您的程序在其输出通过管道传输到另一个进程然后该进程终止时退出，对吗？抱歉，我不知道如何在 Windows 中执行此操作（实际上您并不经常看到程序通过 Windows 上的简单管道进行通信）。如果您的信号处理与套接字连接，[这](http://social.msdn.microsoft.com/Forums/en-us/netfxnetcom/thread/ac626c1d-9449-4f4d-804f-115a1779b284)可能会有所帮助。

# java - 比较两个通用复杂对象java

> ID：10333163
> 
> 赞同：1
> 
> 时间：2012-04-26T12:14:06.467
> 
> 标签：java, generics, reflection, compare

我的要求是比较相同未知/通用类型的两个对象。对象很复杂。它们可以包含列表，而列表本身可以包含列表。

因此，我最初的想法是使用 Comparator 来比较对象，使用反射来发现 bean 的所有属性，并使用递归来处理对象可能包含的任何嵌套列表。

或者，是否有一个实用程序可以在 java 中为我完成所有这些工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:21:46.923

您可以使用[Bean Utils](http://commons.apache.org/beanutils/)或直接使用... [Apache Commons EqualsBuilder](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/builder/EqualsBuilder.html#reflectionEquals%28java.lang.Object,%20java.lang.Object%29)

类似的[解决方案](https://stackoverflow.com/a/1520954/1234198)

**编辑：** 请看看[这篇文章](https://stackoverflow.com/a/867696/1234198)。谷歌搜索后，我还发现[了这个 BeanDiff api](http://beandiff.googlecode.com/svn-history/r3/trunk/docs/javadoc/com/mythosis/beandiff/DiffGenerator.html)，它可能对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:25:11.333

如果您可以确保所有嵌套对象树实现 Comparable 您可以使用：

```
 public int compareTo(Object o) {
   return CompareToBuilder.reflectionCompare(this, o);
 } 
```

[http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/builder/CompareToBuilder.html](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/builder/CompareToBuilder.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:15:07.357

我会按照你已经提到的那样做。

1.  检查两个对象是否属于同一类型并且
2.  遍历对象 1 的所有变量
    1.  获取对象 2 中变量的值
    2.  调用 valueOfVariableInObject1.compareTo(valueOfVariableInObject2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T12:20:19.623

母羊。我想您可以使用反射来获取字段列表，然后从那里开始。您将需要一些复杂的代码来确定给定字段是简单类型还是复杂类型，并在比较时深入了解复杂的字段。

[请参阅此](http://tutorials.jenkov.com/java-reflection/fields.html)内容以帮助您开始获取字段列表、它们的名称和类型

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T12:22:00.380

免责声明：我不是 JAVA 开发人员。

我认为没有一种比较未知类型的干净方法。这就是我要做的：声明一个接口，我们称之为 ComparableInterface

```
interface ComparableInterface {
    function isEqual(ComparableInterface $a);
} 
```

使您的未知对象可能成为实例的所有类都实现此接口。然后用它来比较它们。

我能想到的任何其他解决方案都将是一个丑陋的黑客：/。另外我认为，如果您必须比较您不知道的想法，那么您的设计就有问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-03T14:43:49.367

我目前正在研究类似的问题。我可以确认使用 java 反射可以比较相同未知/通用类型的两个对象。[我在这里](http://docs.oracle.com/javase/tutorial/reflect/TOC.html)找到了我需要做的一切。以下是有关如何执行此操作的一些简要说明：

1.  在一个函数中获取两个对象
2.  确定 ob1 的所有字段
3.  假设对象的类型相同，您可以使用 one 字段从两个对象中获取值并进行比较，如下所示`field.get(ob1).equals(field.get(ob2)`

但是，比较对象内部的对象要困难得多。我还没有找到解决方案，这就是问题所在：要与使用反射的项目进行比较，您需要两个对象。我还没有找到一种从未知类型的对象中提取对象的方法。如果你发现什么，请告诉我。

# wpf - 从 WPF RichTextBox 中的行号计算 ScrollToVerticalOffset 的偏移量

> ID：10333168
> 
> 赞同：7
> 
> 时间：2012-04-26T12:14:22.957
> 
> 标签：wpf, textbox, richtextbox, offset, scrollviewer

我想将 a 的内容移动到内容的`RichTextBox`特定行。`RichTextBox`提供`ScrollToVerticalOffset`从嵌入式的方法`ScrollViewer`。该方法在 MSDN 中有记载，但未[指定](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.scrolltoverticaloffset.aspx)名为 offset 的参数的测量单位。类型是`double`。

a 的[`VerticalOffset`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.textboxbase.verticaloffset.aspx)属性`TextBox`记录为与设备无关的单位（每单位 1/96 英寸）。

所以我试图从字体大小计算偏移量。字体大小以像素为单位。结果公式是

```
offset = fontSize * 96 / 72  *  lineNumber; 
```

但这远远落后于所需的线。现在我正在使用这个计算：

```
offset = fontSize * lineNumber; 
```

它是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-02T16:56:53.777

确实从问这个问题很久了，但仍然没有找到正确的答案！

我现在使用了这段代码，这对我来说真的很好：

```
var offset = (lineNumber * (fontSize + 2)) - richTextBox.ActualHeight / 2;
richTextBox.ScrollToVerticalOffset(offset); 
```

如果您知道比这种方式更好的解决方案，请帮助我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-23T07:54:47.873

```
TextPointer myTextPointer1 = Paragraph.ContentStart.GetPositionAtOffset(20);
TextPointer myTextPointer2 = Paragraph.ContentEnd.GetPositionAtOffset(-10);

RichTextBox.Selection.Select(myTextPointer1, myTextPointer2);

DependencyObject currObj = RichTextBox.CaretPosition.Parent;
FrameworkElement fe = currObj as FrameworkElement;
if (fe != null)
{
    fe.BringIntoView();
}
else
{
    FrameworkContentElement fce = currObj as FrameworkContentElement;
    if (fce != null)
    {
        fce.BringIntoView();
    }
}
```

# jquery - 如何从收集的元素中找到父元素？

> ID：10333173
> 
> 赞同：0
> 
> 时间：2012-04-26T12:14:38.697
> 
> 标签：jquery

我有一个变量存储了 3 个 div。

每个 div 都有一个 Tille 元素。单击标题元素时，我需要制作手风琴功能，可以吗..？

我试过这样，但没有工作：

```
var sectors = $('#parent').find('div > div') //it returs the length 3

var title = $('#parent').find('h3') // as well it returns 3.

function//

$(title).click(function(){
    $(sectors).slideToggle();//it's working... i am hiding all
   $(sectors,':first').slideToggle();//it's not working... i need to show the sibling elment
}) 
```

有没有什么办法解决这一问题？而不是遍历dom，我只是使用变量来做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:17:59.010

这~~$(sectors,':first').slideToggle();// 它不起作用..~~

应该是：~~$(':first', 扇区).slideToggle();~~

编辑： ~~sectors.hide();~~ ~~$(this).next("div").show();~~

编辑 2：您的代码存在很多问题，我已经更正了它们并使用工作代码更新了[小提琴。](http://jsfiddle.net/YLdKw/2/)但是，我建议您也将所有 html、脚本和 css 放在这里。

# jetty - jetty-maven-plugin 未从 Jetty.xml 添加 JNDI 数据源资源

> ID：10333181
> 
> 赞同：3
> 
> 时间：2012-04-26T12:15:10.343
> 
> 标签：jetty, jndi, maven-jetty-plugin

我似乎无法使用 jetty-maven 插件添加我的数据源。没有抛出任何错误，但是当我查看上下文时，尚未添加数据源。我已经验证文件的路径是正确的并且它正在解析它（输入不正确的类名会导致错误）。我曾尝试使用标记并将其配置为 WebAppContext 配置，但该文件被完全忽略。

pom.xml

```
<plugin>
  <groupId>org.mortbay.jetty</groupId>
  <artifactId>jetty-maven-plugin</artifactId>
  <version>8.1.3.v20120416</version>
  <configuration>
    <jettyXml>somePath/jetty.xml</jettyXml>
  </configuration>
  <dependencies>        
    <dependency>
    <groupId>postgresql</groupId>
    <artifactId>postgresql</artifactId>
    <version>9.0-801.jdbc4</version>
  </dependency>
 </dependencies>
</plugin> 
```

码头.xml

```
<Configure class="org.eclipse.jetty.server.Server">

<New id="jdbc/postgres" class="org.eclipse.jetty.plus.jndi.Resource">
    <Arg>jdbc/postgres</Arg>
    <Arg>
        <New class="org.postgresql.ds.PGSimpleDataSource">
            <Set name="User">postgres</Set>
            <Set name="Password">postgres</Set>
            <Set name="DatabaseName">myDB</Set>
            <Set name="ServerName">localhost</Set>
            <Set name="PortNumber">5432</Set>
        </New>
    </Arg>
</New> 
```

Java 代码

```
Context ctx = new InitialContext();
Context context = (Context) ctx.lookup("java:comp/env");
ds = (DataSource) context.lookup("jdbc/postgres"); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T08:36:11.760

对于仍在寻找解决方案的人，请参阅[此问题中接受的答案](https://stackoverflow.com/questions/7923980/jetty-7-configuring-jndi-for-start-java)。

这里的关键是使用`jetty-env.xml`而不是`jetty.xml`.

**参考**

*   [http://docs.codehaus.org/display/JETTY/jetty-env.xml](http://docs.codehaus.org/display/JETTY/jetty-env.xml)
*   [http://docs.codehaus.org/display/JETTY/JNDI](http://docs.codehaus.org/display/JETTY/JNDI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-27T12:35:17.193

或者简单地添加到您的 web.xml：

```
<resource-ref>
    <res-ref-name>jdbc/postgres</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

# smartgwt - GWT listgrid 单元格之间的间距

> ID：10333184
> 
> 赞同：2
> 
> 时间：2012-04-26T12:15:24.967
> 
> 标签：smartgwt

我创建了一个 GWT listGrid 并尝试覆盖单元格间距的行为。默认情况下，网格的单元格之间没有空格。

我已经尝试过这样的事情，但没有奏效。

Listgrid 网格 = 新 Listgrid();

grid.setStyleName("my-listgrid-style");

在 css 中，我为 my-listgrid-style 定义了边框间距：10px。

如何在网格中的单元格之间留出空间？

例如，在这里我正在设计我想要实现的网格，它在 column1 和 column2 之间有空间：

------------- -------------
Header1 Header2
------------- --------- ----
数据A1 数据A2 数据B1
数据B2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:40:29.753

您可以将样式应用于 listGrid..

```
.withlines td {
    padding: 2px 10px !important;
    border: 0.2px solid #E0E0E0 !important;
    overflow: hidden;
    line-height: 15px;
}

.withlines th {
    border: 0.2px solid #E0E0E0 !important;
    overflow: hidden;
    padding: 3px 10px !important;
    text-align: left;
    line-height: 15px;
}

.withlines_medium td {
    padding: 2px 10px !important;
    border: 0.2px solid #E0E0E0 !important;
    overflow: hidden;
    line-height: 15px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:53:55.563

我能够简单地修改 td 和 th 来解决我的问题。但这只是我找到的单元格中的文本。不确定它是否适用于您的情况。

td,th { 填充：10px; }

# jquery - 单击服务器端asp.net按钮控件后如何保持JQuery UI对话框打开？

> ID：10333185
> 
> 赞同：1
> 
> 时间：2012-04-26T12:15:27.513
> 
> 标签：jquery, dialog, postback

我有一个 JQuery 对话框和一个 asp.ent 按钮，当对话框打开时，我单击 asp.net 按钮，它刷新页面并且对话框消失了。除非我将按钮放入 UpdatePanel，但我讨厌 UpdatePanel，当用户单击将触发回发的页面上的控件时，是否有任何其他方法可以使对话框保持打开状态？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:20:38.853

在 aspnet btn 的回发期间，使用 this.Page.ClientScript.RegisterStartupScript() 重新启动之前启动的相同 JQuery 对话框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T16:43:02.413

例如，如果您在弹出窗口中有一个 LinkBut​​ton，则每次都需要像这样注册脚本......

```
protected void LinkButton1_Click(object sender, EventArgs e)
{
    Page.ClientScript.RegisterStartupScript(this.GetType(), "KeepPopup", "<script type=text/javascript> PopItUp(); </script>");
} 
```

# c# - 如何输入和异常

> ID：10333190
> 
> 赞同：0
> 
> 时间：2012-04-26T12:15:40.850
> 
> 标签：c#

好的，这是我正在处理的代码。我试图获得一个例外，这样如果他们在盒子里没有东西来保存它就会弹出并且不让他们继续前进，直到把东西放在那里。现在我知道当我运行我的程序并单击保存按钮时它告诉我这个

> ArgumentException 未处理

这意味着什么。我知道它说空路径名是不合法的。但是路径是用户想要的。我一直在搞砸这个，我试图弄清楚该怎么做，但仍然有点困惑。那么尝试去做的最好方法是什么。我是否必须创建一个类才能使其工作，或者我可以添加到我的代码中。我用 try and catch 修复了另一部分，但我无法让它在这个上工作，或者我可能把它放在错误的位置。

```
private void Save_Click(object sender, EventArgs e)
{
    string path = txtFilePath.Text;    

    if (!File.Exists(path))
    {
        using (StreamWriter sw = File.CreateText(path))          
        {
            foreach (string lines in employeeList.Items)
                sw.WriteLine(lines);
        }
        else
        {
            using (StreamWriter sw = File.AppendText(path))<--This is 
where is says Arugment exception was unhandled.              
            {    
                foreach (var item in employeeList.Items)
                    sw.WriteLine(item.ToString());
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:18:10.833

采用

```
private void Save_Click(object sender, EventArgs e)
{
  if (!string.IsNullorEmpty(txtFilePath.Text))
  {
    MessageBox.Show("Please enter new path");
    txtFilePath.Focus();
    return;
  }
  else
  {
    string path = txtFilePath.Text;

      if (!File.Exists(path))
        {
           ..... Your rest code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:18:38.337

这意味着：

> path 是一个长度为零的字符串，仅包含空格，或者包含一个或多个由 InvalidPathChars 定义的无效字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:19:39.197

```
if(path == "")
{
    // Alert user or throw Exception
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T12:21:19.217

您的“路径”不正确。

```
ArgumentException   
path is a zero-length string, contains only white space, or contains one or more invalid characters as defined by InvalidPathChars. 
```

[http://msdn.microsoft.com/ru-ru/library/system.io.path.invalidpathchars.aspx](http://msdn.microsoft.com/ru-ru/library/system.io.path.invalidpathchars.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T12:21:23.320

将代码包装在 try catch 语句中，在 catch 中，您可以向用户生成一条消息（可能是一个 javascript 警报框）

伪代码...

```
try
{
    current code
}
catch (exception e)
{
    error message to user
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T09:55:23.843

我知道这是一个旧帖子，但我想我还是会回答。

上面代码的所有问题是在错误的地方有一个 }。

```
If (not file exists)
{

   else 
   {
   }
} 
```

else 应该再下降一点。

```
if(not file exists)
{
}
else
{
} 
```

# window - 如何确定表单是否停靠？

> ID：10333194
> 
> 赞同：1
> 
> 时间：2012-04-26T12:15:53.847
> 
> 标签：window, state, docking, c++builder-xe

如何在 C++ Builder XE 中确定窗口当前是否停靠？我的应用程序中的所有窗口都派生自基类 TForm。如何捕捉从停靠状态到非停靠状态的变化，反之亦然？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T01:10:30.917

停靠时窗体的`HostDockSite`属性将为非，否则为非。`NULL``NULL`

更改时没有具体通知`HostDockSite`，但您可以覆盖表单的虚拟`Dock()`和/或`DoDock()`方法以检查`HostDockSite`调用继承方法时是否更改。或者，覆盖 Form 的虚拟`SetParent()`方法并检查Form属性`csDocking`中的标志。`ControlState`

# actionscript-3 - 使用 Loader.loadBytes - 为加载的 swf 指定 SecurityDomain？

> ID：10333198
> 
> 赞同：2
> 
> 时间：2012-04-26T12:16:12.987
> 
> 标签：actionscript-3, loader

我使用 Loader.loadBytes 将 swf 动态加载到我的应用程序中（我使用此方法将模块加载到应用程序中）。我的麻烦是，当我想使用 ExternalInterface.addCallback 允许在我的应用程序上调用 js 时。当这些函数被调用时，会抛出 SecurityError，因为我不在正确的安全域中。尝试通过 LoaderContext 设置加载内容的 SecurityDomain 会导致另一个错误，告诉我 SecurityDomain 不能为空。有没有办法让我的模块可以从 JS 访问？

*注意：我在我的主应用程序（实例化加载模块的模块控制器的应用程序）中设置了以下内容：

```
Security.allowDomain("*");
Security.allowInsecureDomain("*"); 
```

加载代码：

```
var _contextLoader:LoaderContext = new LoaderContext(false, ApplicationDomain.currentDomain);
_contextLoader.allowCodeImport = true;
_moduleLoader.loadBytes(moduleBytes, _contextLoader); 
```

错误：

```
SecurityDomain 'null' tried to access incompatible context ... 
```

# html - 如何删除悬垂的 div

> ID：10333199
> 
> 赞同：0
> 
> 时间：2012-04-26T12:16:13.523
> 
> 标签：html, css

我有以下 css 和 html 文件：

```
body{
    text-align: center;
    background-color: #eeeeee;
    margin: 0;
    padding: 0;
    font-size: 1em;
    font-family: Helvetica,Arial,sans-serif;
}
#wrapper{
    margin: 0 auto;
    width:900px;
    border: 1px solid #cccccc;
    background-color:#ffffff;
    padding:5px;
}
#banner{
    width:900px;
    height: 150px; 
    background-image: url("../images/logo.png");
    background-repeat: no-repeat; 
}
#separator{
    width:100%;
    height: 5px;
    border: 1px solid #993311;
    background-color: #993300;
}
#navbar{
    height:25px;
    width: 100%;
    background-color: #434a4f; 
}
#topsearch{
    height:25px;
    width: 100%;
    background-color: #434a4f; 
}
#breadcrumb{
    float:left;
    width: 30%;
    background-color: #cccccc;
}
#search{
    float:left;
    width:70%;
    background-color: #fccfcf;
}
#main{
    clear: both;
}
#mainleft{
    float:left;
    width: 21%;
    background-color: #ff0000;

}
#maincenter{
    float:left;
    width: 58%;
    background-color: #00ff00;
}
#mainright{
    float:left;
    width: 21%;
    background-color: #0000ff;
}
#mainright1{
    width: 100%;
    height:20%;
    background-color: #0000ff;
}
#mainright2{
    clear:both;
    width:100%;
    height: 21%;
    background-color: #0000ff;
}
#footer{
    clear: :both;
    width: :100%;
    background-color: #333333;
} 
```

和

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

        <title>test</title>
        <meta name="description" content="" />
        <meta name="generator" content="Studio 3 http://aptana.com/" />
        <meta name="author" content="byteslash" />

        <meta name="viewport" content="width=device-width; initial-scale=1.0" />

        <link href="css/template.css" type="text/css" rel="stylesheet"/>
    </head>
        <body>

        <div id="wrapper">
            <div id="banner"></div>
            <div id="separator"></div>
            <div id="navbar">
                NavBar
            </div>
            <div id="topsearch">
                <div id="breadcrumb">Breadcrumb</div>
                <div id="search">SearchBox</div>
            </div>

            <div id="main">
                <div id="mainleft">
                    MainLeft
                </div>
                <div id="maincenter">
                    MainCenter
                </div>
                <div id="mainright">
                    <div id="mainright1">MainRight1</div>
                    <div id="mainright2">MainRight2</div>
                </div>              
            </div>
            <div id="footer">
                <h6>Footer</h6>
            </div>
        </div>
    </body>
</html> 
```

如果您检查颜色，我的 mainright2 在 mainright1 顶部显示为蓝色，这是有意的，但 mainright2 挂在页脚顶部。

我认为解决这个问题的一种方法是以某种方式使 div 主要解释其子项内部定义的所有高度，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:22:01.550

发生这种情况是因为您的`#main`div 的高度为 0px - 它的所有内容都是`float`ing。有很多方法可以解决这个问题，其中之一就是应用`overflow: hidden`到`#main`div 上，像这样：

```
#main{
    overflow: hidden;
    clear: both;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:25:30.630

你的风格有误`#footer`

```
clear: :both; 
```

删除第二个冒号。

编辑：还有另一个，但那个没有那么糟糕，因为默认情况下 div 的宽度为 100%。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:19:09.273

`<div style="clear:both;"></div>`在页脚和主容器之间添加。

# iphone - 应用内购买缺少非消耗性选项？

> ID：10333206
> 
> 赞同：1
> 
> 时间：2012-04-26T12:16:35.700
> 
> 标签：iphone, ios, app-store, in-app-purchase, app-store-connect

我发现本[教程](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)看起来很棒，但事实上，当我进入 iTunes Connect 并在我的应用程序中点击管理应用内购买时，我只列出了“免费订阅”选项......：/我都看不到consumable or non=consumable options :( 基本上我想要的是上传带有附加内容的免费应用程序，当通过应用程序内购买购买时，但它是非消耗性的，不是订阅......有人吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T17:13:12.397

上面的答案对我来说并不清楚我到底要做什么。我将在这里解释这些步骤：

1.  转到 iTunes Connect 主页（上一个`Manage Your Applications`）。你应该看到销售和`Trends, Contract Tax and Banking`....
2.  选择`Contracts Tax and Banking`链接
3.  在这里你可能没有任何`Master Agreements`。我有一份合同作为请求。我点击了`Request`按钮，它移到了该`Master Agreements`部分（填写表格后）。该合同属于该类别`Contract in Process`。这足以启用屏幕`In-App purchase`上的其他选项。`In-App Purchase`

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T12:25:39.923

您需要在 iTunesConnect 中设置付款合同。

如果没有这些合同，您将无法在 iTunesConnect 中添加任何应用内购买。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-29T06:11:29.367

你们俩都是对的，但您仍然缺少一件事，那就是只`Admin Legal`允许这样做`Admin`。我花了几个小时，因为`Request`当我打开**`Contracts Tax and Banking`**链接时按钮丢失了，因为我被添加为`Technical`管理员。`itunesconnect`并且在我添加的帐户中也缺少请求按钮，就像`Admin`在我的另一个`itunesconnect`帐户中一样。

![在此处输入图像描述](../Images/a17f10ab76d977a0786484dfbff50d71.png)

# windows-phone - Windows Phone 返回空对象

> ID：10333209
> 
> 赞同：0
> 
> 时间：2012-04-26T12:16:44.360
> 
> 标签：windows-phone

M 新使用 windows mobile 并尝试使用在 SOAP 中管理的 web 服务登录。在方法完成后，它返回一个 LoginResponse ob 作为结果。

但是如果 M 试图使用对象访问它的成员，则它会显示所有成员的错误。

就像 M 尝试 e.Result.Statuscode.toString() 一样，它会生成错误。

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:42:03.047

您是否考虑过在 HTTP Post 中设置 POST 数据？试试这个[http://geekswithblogs.net/rakker/archive/2006/04/21/76044.aspx](http://geekswithblogs.net/rakker/archive/2006/04/21/76044.aspx)

# jquery - 如何使用 jquery 获取以“test-”开头的类名（作为字符串）？

> ID：10333210
> 
> 赞同：0
> 
> 时间：2012-04-26T12:16:46.590
> 
> 标签：jquery, css

问题真的说明了一切，

如果有一个元素

```
<span class="a-class another-class test-top-left"></span> 
```

如何获取以“test-”开头的类名到一个字符串变量中，这样我就可以将该类名中的顶部和左侧单词提取到单独的变量中并使用它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:23:24.877

```
var test = (​$("span[class*='test-']")[0].className​​).split("test-")​[1].split("-"); 
```

其中 test[0] 将包含“top”，而 test[1] 将包含“left”。

这是工作演示：http: [//jsfiddle.net/kayen/QJCpc/](http://jsfiddle.net/kayen/QJCpc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:26:16.913

我会使用正则表达式来查找和提取类。分步演示：http: [//jsfiddle.net/JAAulde/baVq5/1/](http://jsfiddle.net/JAAulde/baVq5/1/)和[http://jsfiddle.net/JAAulde/baVq5/2/](http://jsfiddle.net/JAAulde/baVq5/2/)

```
 /* Get the class attribute from the element */
var wholeclass = $('span').attr('class'),
    /* Define a regex to find the class in question */
    pattern = /(?:^|\s)test-[a-z0-9_-]+(?:\s|$)/mi,
    /* run the regex against the class */
    matches = wholeclass.match(pattern),
    /* get the portion of the match array and trim it up */
    extractedclass = $.trim(matches[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:27:03.723

```
var myClasses = document.getElementsByTagName("span")[0].className.split(' '),
    Lastclass = myClasses[myClasses.length-1].split('-'),

    first = Lastclass[0],  //test
    second = Lastclass[1], //top
    third = Lastclass[2];  //left 
```

[小提琴](http://jsfiddle.net/adeneo/PbamJ/)

# hibernate - @NamedQuery 中应用的 TOP 子句

> ID：10333211
> 
> 赞同：2
> 
> 时间：2012-04-26T12:17:01.567
> 
> 标签：hibernate, named-query, show-sql

我 `@NamedQuery(name="CustomerMarket.findByMarketId", query="SELECT DISTINCT c.marketid FROM CustomerMarket c WHERE c.marketid LIKE :mask")` 在我的类 CustomerMarket 定义中命名了查询。

我想获取 350_000 个结果中的前 1_000 个，所以我应用了 setMaxResult：

```
Query market = session.getNamedQuery("CustomerMarket.findByMarketId");
market.setString("mask", getMask() + "%");
market.setMaxResults(1000);
List<Object> result = market.list() 
```

执行此查询后，我检查了 server.log 并找到了这个

```
select distinct customerma0_.marketid as col_0_0_ 
from   CUSTOMER_MARKET_S customerma0_ 
where  customerma0_.marketid like ? 
```

我有正确的数据，前 1_000 条记录，但我想知道是否应用了 TOP 限制以及在哪里。

这个 TOP 子句是如何处理的？

1.  TOP 应用于 Hibernate 使用的可调用语句，这不会显示在日志中
2.  TOP 在从 DB 接收结果并在 Java 端过滤数据后应用
3.  或者别的什么

我已经设置了 persistence.xml 和 log4j.properties 来显示几乎所有内容，但我认为没有问题，因为我有 SQL 脚本。

**编辑**：我在两种情况下（有和没有 setMaxResults）都对性能进行了一些测量，并得到了以下时间：

```
long time = System.currentTimeMillis();
market.list();
LOGGER.info("time: " + (System.currentTimeMillis() - time) + "ms"); 
```

在没有 TOP 的第一种情况下，我每次选择的平均时间消耗为 1400 毫秒。在实施 TOP 的第二种情况下，我的平均时间消耗约为 150 毫秒。

也有人对我说，这个 TOP 实现可能依赖于使用的 Hibernate 方言（我们使用的是 Sybase）。并且出现在日志中的选择与发送到数据库的选择完全相同。但是在这种情况下，将 350k 结果从结果集（或结果如何存储在 Hibernate 会话中）转换为没有任何元数据的结构 List 需要这么长时间是正常的吗？我可以想象在内部它被转换为：

```
**SQL generating process**
**SQL setting parameters**
ResultSet rs = executeQuery();
List<Object[]> result = new ArrayList<Object[]>(rs.getFetchSize());
int rowSize = rs.getMetaData().getColumnCount()
while (rs.next) {
  Object[] row = new Object[rowSize];
  for (int i = 0; i < rowSize; i++) {
    row[i] = rs.getObject(i);
  }
} 
```

这似乎没有那么复杂，为什么会有这个时差。可能我很天真，因为 Hibernate 是一个具有很多特性的复杂框架。:-D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T08:04:33.837

看来我的问题出在我用于我的应用程序的数据库中。在链接[www.petefreitag.com/item/59.cfm](http://www.petefreitag.com/item/59.cfm)上描述了用户如何限制其结果的数量。如您所见，只有一个 Sybase 将这种选择分为两个单独的操作 (SET + SELECT)。所以整个问题是第一个动作没有记录，第二个动作是。

# mysql - 修改 MySQL 查询以使用 PostgreSQL

> ID：10333212
> 
> 赞同：0
> 
> 时间：2012-04-26T12:17:07.090
> 
> 标签：mysql, postgresql

我从以下位置获取 MySQL 查询：[SQL 中的偏向随机？](https://stackoverflow.com/questions/4063742/biased-random-in-sql)但不幸的是它不适用于 PostgreSQL：

```
DECLARE @sample TABLE (id int, boost int)

INSERT @sample VALUES (1, 1), (2, 2), (3, 7)

SELECT
    RAND(CHECKSUM(NEWID())) * boost  AS weighted,
    SUM(boost) OVER () AS boostcount,
    id
FROM
    @sample
GROUP BY
    id, boost
ORDER BY
    weighted DESC 
```

它说 NEWID() 函数不存在。任何人都可以帮助我修改这个查询吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:46:54.993

目前尚不清楚您是指 MySQL（它没有`newid()`函数）还是 SQL Server（它有一个`newid()`函数并且也是您链接到的答案中的目标）。

在 Postgres 中生成 UUID 的标准方法是安装 UUID contrib 模块，然后使用提供的函数之一来生成 UUID：

[http://www.postgresql.org/docs/current/static/uuid-ossp.html](http://www.postgresql.org/docs/current/static/uuid-ossp.html)

该模块是通过`create extension "uuid-ossp"`以超级用户（通常是 postgres）连接时运行来安装的。

如果您使用的是旧版本的 PostgreSQL，则需要`uuid-ossp.sql`从 contrib 文件夹（这是 PostgreSQL 安装的一部分）运行脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:23:44.033

PostgreSQL 不支持与 Microsoft SQL Server 函数等效的函数`newid()`

如果你愿意，你必须实施。

一个好的实现可以在[这里找到](http://www.codeproject.com/Articles/56562/Creating-newid-for-PostgreSQL)

您也可以使用 [uuid-ossp 模块](http://www.postgresql.org/docs/devel/static/uuid-ossp.html)，但我从未尝试过。

# wcf - 将 WCF 服务访问限制为仅 localhost

> ID：10333217
> 
> 赞同：7
> 
> 时间：2012-04-26T12:17:27.653
> 
> 标签：wcf, iis, localhost

我在 IIS 中托管了三个 WCF 服务，我的内部应用程序（包括 WCF 服务）正在同一台机器上使用这些服务。这里需要限制外部对 WCF 服务的访问。这三个 WCF 服务应该只能在本地主机上访问，我的意思是在同一台机器上，它不应该从其他机器访问。因此，如果我从其他机器输入 svc url：[http://myHostingMachine/MyService/Service1.svc](http://myHostingMachine/MyService/Service1.svc) ..它应该无法访问。实现这一目标的最佳方法是什么。

以简单的方式，我可以使用 WCF 配置限制对 SCV 文件的访问仅限于本地主机吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T12:32:27.530

有几种方法可以做到这一点；

*   [在 IIS 本身中](https://serverfault.com/questions/136742/iis-7-5-limit-folder-access-to-local-users)
*   [通过正确配置 WCF](https://stackoverflow.com/questions/2360540/configure-wcf-for-localhost-only-listening)
*   [使用 IIS7 和 WAS](http://msdn.microsoft.com/en-us/magazine/cc163357.aspx)
*   [使用命名管道](http://msdn.microsoft.com/en-us/library/ms733769.aspx) [（更多信息）](https://stackoverflow.com/questions/184878/expose-a-wcf-service-through-a-named-pipes-binding)
*   正确配置防火墙

命名管道可能是要走的路

> *何时使用命名管道传输*
> 
> 命名管道是 Windows 操作系统内核中的一个对象，例如进程可用于通信的共享内存部分。**命名管道有一个名称，可用于单机进程之间**的单向或双工通信。

# database - 根据距离和受欢迎程度对地点进行排名

> ID：10333218
> 
> 赞同：2
> 
> 时间：2012-04-26T12:17:29.057
> 
> 标签：database, algorithm, sorting, geolocation, ranking

考虑到我们与某个点的距离+该地点的受欢迎程度，对记录持有地点进行排名的理想方式应该是什么？

假设我的表格设计有以下列：

```
| PlaceID | Lat/Long | Distance | Popularity | 
```

这里有 2 个因素需要考虑对记录进行排名（排序）： 1\. 距离：按距离升序对记录进行排序。2\. 流行度：按流行度降序排列记录。

考虑到这两个因素，对地点记录进行排名的理想方法是如何为用户提供最佳地点搜索体验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:48:24.067

你可以使用很多方法。最简单的一种是使用流行度重要性的值和距离重要性的值。

给定一个地点*p* ，您可以使用流行度*P(p)*和距离*D(p)计算地点**I(p)*的重要性。*您应该决定或找到权重a*和*b*的最佳值。

 ***I(p) = a * P(p) - b * D(p)***

# android - 在扩展视图类中将 admob 添加到画布

> ID：10333222
> 
> 赞同：0
> 
> 时间：2012-04-26T12:17:44.923
> 
> 标签：android, view, admob, android-canvas, extends

我正在尝试在我的应用程序中实现 admob，但我无法让它工作。

我有一个 A 类，它是主类，它扩展了活动。我有一个 B 类，它是应用程序启动时调用的类。我在 A 类中有以下代码来存档：

```
B b = new B(this);
setContentView(B); 
```

在 BI 类中有一个带有测试和位图的画布。我想用 admob 在画布上放一个广告，但我无法存档。B类：

```
private AdView adView;
int[] degree = { 90, 180, 270, 360 };// random graden eindposities pijl
// int width, height;
Random rand = new Random();
Typeface font;
Matrix matrix = new Matrix();// degree,x,yaxis
Region region;// region die klikbaar is om het pijl te bewegen
AlertDialog alertDialog;
LinearLayout layout;

public YesNo(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

@Override
public boolean onTouchEvent(MotionEvent event) {
   //do something
}

@Override
protected void onDraw(Canvas canvas) {
    //Do something
    invalidate();
} 
```

我试图用这段代码（除其他外）实现admob：

```
public void ads() {
    adView = new AdView((Activity) getContext(), AdSize.BANNER,
             "xxxxxxxxxxx");

    LinearLayout.LayoutParams params;
    params = new LinearLayout.LayoutParams(
             LinearLayout.LayoutParams.FILL_PARENT,
             LinearLayout.LayoutParams.WRAP_CONTENT);

    // Create a linear layout
    LinearLayout layout = new LinearLayout((Activity) getContext());
    layout.setOrientation(LinearLayout.VERTICAL);
    layout.setPadding(6, 6, 6, 6);
    layout.addView(adView, params);
} 
```

我搜索了几个小时的解决方案，但我找不到任何解决方案。

有人可以帮助我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:05:23.103

首先，您`AdView`需要成为内容视图的一部分。`LinearLayout`您在`ads()`函数中创建的。其次，您需要创建一个 AdRequest 并使用该请求加载广告：

```
AdRequest request = new AdRequest();
request.addTestDevice(AdRequest.TEST_EMULATOR); // get test ads on emulator.
adView.loadAd(request); 
```

查看[文档](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals#addadview)以获取有关如何设置 AdView 的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:45:39.990

在您的`ads`函数中，您实际上并没有使用您创建的 LinearLayout - 您需要将其放入另一个布局或直接放入您的活动中，使用`setContentView`

# perl - Net::SFTP 是否因为 SSH 而失败？

> ID：10333228
> 
> 赞同：1
> 
> 时间：2012-04-26T12:18:05.100
> 
> 标签：perl, ssh, sftp

我无法使用[Net::SFTP](http://p3rl.org/Net%3a%3aSFTP)连接到远程服务器。我之前在另一台机器上成功运行了相同的脚本，但是，我现在收到以下错误：

```
[root@script-server fmzbih_cms_weather_updater]# ./fmzbih_cms_forecast.pl
script-server.bih.net.ba: Reading configuration data /root/.ssh/config
script-server.bih.net.ba: Reading configuration data /etc/ssh_config
script-server.bih.net.ba: Allocated local port 1023.
script-server.bih.net.ba: Connecting to 10.100.4.193, port 22.
script-server.bih.net.ba: Remote protocol version ., remote software version
script-server.bih.net.ba: Net::SSH::Perl Version 1.34, protocol version 1.5.
script-server.bih.net.ba: No compat match: .
script-server.bih.net.ba: Connection established.
Can't locate object method "_session_channel" via package "Net::SSH::Perl::SSH1" at /usr/local/lib/perl5/site_perl/5.14.2/Net/SFTP.pm line 78. 
```

这可能是因为使用了 SSH1，如日志中所示？SFTP不应该使用SSH2吗？

# r - 对向量的内容进行分类

> ID：10333229
> 
> 赞同：0
> 
> 时间：2012-04-26T12:18:08.433
> 
> 标签：r, class, function, categories

这是我的问题：

```
myvec <- c(1, 2, 2, 2, 3, 3,3, 4, 4, 5, 6, 6, 6, 6, 7, 8, 8, 9, 10, 10, 10) 
```

我想开发一个函数，可以根据我定义的类别数量来满足这个向量。

如果类别 1 所有 newvec 元素将是 1

如果类别是 2 那么

唯一的（myvec），即

```
1 = 1, 2 =2, 3 = 1, 4 = 2, 5 =1, 6 = 2, 7 = 1, 8 = 2, 9 = 1, 10 = 2 
```

（这是奇数或偶数的情况）

如果类别为 3，则前三个数字将是 1:3，然后将重复模式。

```
1 = 1, 2 = 2, 3=3, 4=1, 5 = 2, 6 = 3, 7 =1, 8 = 2, 9 = 3, 10 =1 
```

如果类别为 4，则第一个数字将是 1:4，然后将重复模式

```
1 = 1, 2 = 2, 3= 3, 4 = 4, 5 = 1, 6 = 2, 7=3, 8=4, 9 =1, 10 = 2 
```

类似地，对于 n 个类别，第一个 1:n，然后重复该模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:01:16.663

如果我正确理解了这个问题，这应该可以满足您的需求。您可以改变变量`n`以选择组数。

```
myvec <- c(1, 2, 2, 2, 3, 3, 3, 4, 4, 5, 6, 6, 6, 6, 7, 8, 8, 9, 10, 10, 10)
out <- vector(mode="integer", length=length(myvec))
uid <- sort(unique(myvec))
n <- 3
for (i in 1:n) {
  s <- seq(i, length(uid), n)
  out[myvec %in% s] <- i
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T13:20:10.010

使用 R 的回收特性（如果向量长度不能被 n 整除，则会发出警告）：

```
R> myvec <- c(1, 2, 2, 2, 3, 3, 3, 4, 4, 5, 6, 6, 6, 6, 7, 8, 8, 9, 10, 10, 10)
R> n <- 3
R> y <- cbind(x=sort(unique(myvec)), y=1:n)[, 2]
R> y
 [1] 1 2 3 1 2 3 1 2 3 1 
```

或使用`rep`：

```
R> x <- sort(unique(myvec))
R> y <- rep(1:n, length.out=length(x))
R> y
 [1] 1 2 3 1 2 3 1 2 3 1 
```

*更新*：你可以只使用模运算符

```
R> myvec
 [1]  1  2  2  2  3  3  3  4  4  5  6  6  6  6  7  8  8  9 10 10 10
R> n <- 4
R> ((myvec - 1) %% n) + 1
 [1] 1 2 2 2 3 3 3 4 4 1 2 2 2 2 3 4 4 1 2 2 2 
```

# html - 单击按钮时将输入数据保存到 localStorage

> ID：10333230
> 
> 赞同：9
> 
> 时间：2012-04-26T12:18:10.383
> 
> 标签：html, button, input, local-storage

我正在尝试构建我的第一个 Web 应用程序。在我的应用程序中，我需要一个设置面板，但我不知道该怎么做。我一直在网上搜索，发现了一个 HTML5 localStorage，我相信这可能是做这些事情的最佳方式。但问题是我不知道如何使用它。

```
<input type='text' name="server" id="saveServer"/> 
```

当用户单击按钮时，如何将输入中的数据保存到 localStorage？像这样的东西？

```
<input type='text' name="server" id="saveServer"/>  

<button onclick="save_data()" type="button">Save/button>

    <script>
            function saveData(){
        localStorage.saveServer
        }
        </script> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-26T12:23:16.090

该[`localStorage`](https://developer.mozilla.org/en/DOM/Storage)对象具有`setItem`用于存储项目的方法。它需要 2 个参数：

1.  可以参考项目的键
2.  一个值

    ```
    var input = document.getElementById("saveServer");
    localStorage.setItem("server", input.val()); 
    ```

上面的代码首先获取对元素的引用，然后将一个项目（“服务器”）与该元素`input`的值一起存储在本地存储中。`input`

您可以通过调用检索值`getItem`：

```
var storedValue = localStorage.getItem("server"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-07T12:25:33.800

这对我有用。对于设置，我放在`.value`后面`var`并调用`var`了`setItem`：

```
var input = document.getElementById('saveServer').value;
localStorage.setItem('server', input); 
```

为了取回文本：

```
document.getElementById('saveServer').value = localStorage.getItem('server'); 
```

# javascript - Javascript函数创建它自己的 ，但删除所有其他 在过程中的网页上

> ID：10333232
> 
> 赞同：1
> 
> 时间：2012-04-26T12:18:11.700
> 
> 标签：javascript, html-lists

好吧，标题说明了一切。我的 javascript 函数构建了一些“块”并使用`<ul>`和`<li>`创建它们。问题是，它会删除`<li>`网页上的所有其他内容。

编辑：（好吧，我假设该函数导致了这个。删除我的意思是：它们完全消失了，查看浏览器中的 HTML 源代码只显示我`<ul></ul>`，没有`<li></li>`，它们已经消失了）

给网页的`<ul>`和`<li>`不同的类没有效果，它仍然删除`<li></li>`

我怎样才能防止这种情况？

JS函数（只是它的一部分）：

```
//Board build up
function setBlocks() {
    bR = 0;
    counts = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    var mR = 5, mC = 6;
    var tempFloor, tempRow, tempBlock;
    var floors = $('ul');
    floors.empty();
    for (var f = 0; f < 4; f++) {
        bM[f] = [];
        for (var r = 0; r < mR; r++) {
            bM[f][r] = [];
            tempRow = $('<li></li>');
        $(floors[f]).append(tempRow);
        for (var c = 0; c < mC; c++) {
            var randomNoRequired = true;
            var randomClass;
            while(randomNoRequired) {
                randomClass = Math.round(Math.random() * 10 + 0);
                if (counts[randomClass] < 6 || bR >= 66) {
                    randomNoRequired = false;
                }
            }

etc etc etc 
```

JS 使用的 HTML：

```
<div id="a2">
                    <ul></ul>
                    <ul></ul>
                    <ul></ul>
                    <ul></ul>
                    <a class="x"></a>
                </div> 
```

网页上的其他 HTML`<li></li>`被删除：

```
<div id="scoreboard-overview">
        <ul> 
             <li>
             test
             </li>
etc etc etc 
```

任何帮助表示赞赏

亲切的问候，莫里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:21:41.850

那是因为你打电话

```
var floors = $('ul');
floors.empty(); 
```

编辑 - 只选择 ul 内部 `<div id="a2">`使用

```
$('div#a2 ul'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:20:41.723

```
var floors = $('ul'); 
```

这一行基本上选择了页面上的所有 ul 元素

如果您只想使用 ul(s)：

```
var floors = $('div#a2 ul'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T12:21:07.887

```
var floors = $('ul');
floors.empty(); 
```

`ul`这将删除页面上 every 的所有后代节点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T12:22:21.080

为什么要使用 jquery 选择器声明字符串？这：

```
 tempRow = $('<li></li>'); 
```

应该：

```
 tempRos="<li><\/li>" 
```

# c# - 具有特定命名的 JSON RPC 序列化对象

> ID：10333235
> 
> 赞同：0
> 
> 时间：2012-04-26T12:18:26.247
> 
> 标签：c#, json, json-rpc, json.net

我使用 NewtonSoft linq 2 json 将对象从类直接序列化为 json 字符串

我使用的类对象非常简单：

```
public class OverviewQuery
{
    public string id { get; set; }
    public string method { get; set; }
    public string Params { get; set; }

    public OverviewQuery(string sid, string smethod, string sparam)
    {
        this.id = sid;
        this.method = smethod;
        this.Params = sparam;
    }
} 
```

如果我序列化这个，我会得到 Json 字符串：

```
"{\"id\":\"1\",\"method\":\"getStockItemDetails\",\"Params\":\"0000000002\"}" 
```

我连接的 Oracle 服务器（通过 WebAPI）要求我使用非常具体的命名，这里应该是

```
"{\"id\":\"1\",\"method\":\"getStockItemDetails\",\"Params\":[\"0000000002\"]}" 
```

NewtonSoft 有什么方法可以实现这种格式吗？如果没有正确的格式，发送信息的唯一方法是对所有内容进行硬编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:00:38.797

序列化程序对您的课程所做的事情似乎很简单。

通常 JSON-RPC 服务将要求`params`信封中的值是 JSON `Array`（用于索引参数）或`Object`（用于命名参数）。

你能改变你的`Params`班级`Array`吗`String`？

# installation - 在 Visual Studio 2010 中创建的 Windows 2000 上安装 msi 安装程序时出错

> ID：10333237
> 
> 赞同：1
> 
> 时间：2012-04-26T12:18:30.280
> 
> 标签：installation, windows-installer, windows-2000

我创建了一个安装项目，其中包含一个 Windows 服务和一个 win 表单应用程序。我使用以下配置来准备设置：

*   Windows XP 上的 Visual Studio 2010
*   .NET 框架 2.0
*   安装程序是为 x86 架构创建的。

当我测试此安装文件时，它成功完成了安装。但由于客户有windows 2000 server，需要安装windows 2000 server操作系统。但是，在安装到 Windows 2000 服务器时出现错误。指示错误的日志如下：

MSI (s) (4C:68) [11:51:19:739]：调用远程自定义操作。DLL：C:\WINDOWS\Installer\MSI2E3.tmp，入口点：ManagedInstall MSI (s) (4C:44) [11:51:19:739]：生成随机 cookie。MSI (s) (4C:44) [11:51:19:755]：使用 PID 348 (0x15C) 创建了自定义操作服务器。MSI (s) (4C:E8) [11:51:19:770]：作为服务运行。MSI (s) (4C:2C) [11:51:19:770]：您好，我是您的 32 位 Elevated 自定义操作服务器。操作于 11:51:19 结束：InstallExecute。返回值 3。

在那之后，回滚操作开始。

我的第一个问题：

我正在虚拟机中对此进行测试。我在该操作系统上安装了 .NET Framework 2.0。可能因为我使用的是虚拟机而出现问题吗？（可能是管理问题）

第二个问题：

如果这不是真正的原因，解决此问题的可能原因和解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T06:29:06.873

I have tried to downgrade my project to Visual Studio 2008\. I created the setup and finally it worked. I think this is a problem in Visual Studio 2010.

# windows - 临时exe的文件夹是什么？

> ID：10333238
> 
> 赞同：0
> 
> 时间：2012-04-26T12:18:33.790
> 
> 标签：windows, special-folders

我创建了一个小型 exe 和关联的 ini 文件，我们用于在客户站点上进行诊断。客户可以访问我们的网站，运行配置程序，下载诊断 exe 和 ini 并设置 exe 运行。

我们不想为此进行完整的 Windows 安装，因为这对于只想要在 10-15 秒内加载并开始运行的客户来说太过分了。

我们应该在哪里下载这个 exe 并根据 Windows 理念运行，以及它可以保证在哪里工作？以下条件是必不可少的：

1.  执行此操作的客户可能是机器上的管理员，但也可能是基本用户。
2.  UAC 可能已打开。
3.  此外，在程序过程中，用户可能会改变。
4.  exe 还需要能够在首次启动时写入其 ini。
5.  操作系统可以是 XP、Vista、Win7 32 位、Win7 64 位

如果有一个文件夹涵盖了上述所有内容，那就太棒了，但我也很乐意为每个操作系统命名使用适当的不同文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:24:29.083

`%APPDATA%`在用户配置文件目录 ( ) 内的环境变量指向的文件夹中`%USERPROFILE%`，如果它应该被任何用户使用，那么`%ALLUSERSAPPDATA%`它在里面`%ALLUSERSPROFILE%`

查看[公认的环境变量](http://technet.microsoft.com/en-us/library/cc749104%28v=ws.10%29.aspx)

# android - 具有底层套接字连接的Android应用程序 - 远程服务与否？

> ID：10333245
> 
> 赞同：0
> 
> 时间：2012-04-26T12:18:52.037
> 
> 标签：android, sockets, binding, service, aidl

我正在开发一个 Android 应用程序，该应用程序持有一个到消息服务器的套接字连接。我有一组可运行的，它们产生自己的线程并处理连接/维护连接。这些是从前台服务调用的。前台服务是处理所有的消息处理/业务逻辑。这不会太复杂，它将涉及操作 XML，通过 SQLite DB 拖网。活动将是单薄和愚蠢的 - 将所有内容传递给前台服务。

我在 mindtherobot.com 上查看了一个教程，该教程详细介绍了如何构建一个基本的 twitter 客户端，该客户端具有一个后台服务，该服务会定期轮询 Twitter API 并将该数据传递给活动。（我不想发布指向它的实际链接，因为它在 Google atm 上显示为受恶意软件感染/有害）。为此，它使用远程服务。

使用远程服务意味着它涉及AIDL来处理IPC，而不是仅仅使用绑定。

我不确定是否有必要这样做。我的服务不会被任何第 3 方应用程序使用 - 从我所读到的内容来看，除非严格需要，否则使用远程服务是不受欢迎的（因为它会使开销翻倍）。

将来，我可能想添加小部件来显示来自前台服务的通知——这会改变远程服务的任何内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:28:44.233

标准模式是使用：

*   处理程序以触发定期 Intent
*   BroadcastReceiver 来监听所说的意图。当它唤醒时，轮询服务器并存储任何新数据
*   ContentProvider 向 Activity 提供数据

确保不要太频繁地触发周期性 Intent，否则会耗尽电池电量。

再说一次，您可以改为创建一个通过 C2DM 推送数据的服务器。

# c# - 自动化/WinAPI 在 64 位和 32 位应用程序之间调用

> ID：10333248
> 
> 赞同：2
> 
> 时间：2012-04-26T12:19:06.543
> 
> 标签：c#, automation, pinvoke, wow64, win64

我们在 2 个应用程序之间有一个自动化场景（主要是 MSUIA），目标是 32 位，我的应用程序（自动化应用程序）是 64 位，在 64 位 win7 上。一些需要共享的信息必须通过 direkt Win SDK 调用（如 SendMessage、GetFocus 等）来访问。

根据我现在的理解，Win64 和 32 子系统是完全独立的，因此任何此类交互都应该立即失败（例如尝试通过 64 位应用程序访问 32 位应用程序的某些部分）。奇怪的是，大多数东西似乎都可以正常工作。所以似乎有某种编组/内部的任何东西。

不过，我现在遇到了一些情况，我定义 p/invoke 函数的方式似乎存在问题。我已经宣布它们是“官方的 MS 方式”，只要有东西可能改变大小（也使用很棒的[http://www.pinvoke.net/default.aspx/](http://www.pinvoke.net/default.aspx/)站点），所以我强制我的 .net 应用程序成为64 位（使用编译开关），它们应该使用 64 位版本的 dll 编译为 64 位。

现在奇怪的是，当使用这些调用访问 32 位应用程序时（例如 GetWindowText，它实际上从另一个进程的内存中读取）这些调用似乎工作正常。但。随后的 MSUIA 调用似乎随机失败。

如果我（错误地）为 p/invoke 调用声明了 32 位签名，即使编译为 64 位，一切都运行良好。

对我来说，这没有任何意义。

最干净的解决方案可能是将我的应用程序也编译为 32 位（或与目标应用程序相同），但仍然......我将不胜感激任何对此的见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:50:42.367

64 位进程只能执行 64 位代码。32 位进程只能执行 32 位代码。现在，对于 32 位进程，操作系统内核将为任何内核级系统调用切换到 64 位模式。但这确实是操作系统的业务。

当您`GetWindowText`从 64 位进程调用时，您正在调用 64 位`user32.dll`。当您从 32 位进程调用时，您调用的是 hte 32 位`user32.dll`。目标窗口是在 32 位还是 64 位进程中并不重要，重要的是执行代码的位数。

您的问题中关于 32 位版本的 p/invoke 签名的部分对我来说没有多大意义。如果没有看到任何代码，我真的不能说更多。

您想知道是否需要为 32 位编译您的应用程序。我对此表示怀疑。您正在对不同的流程进行自动化。32 位进程自动化 64 位进程是完全正常的，反之亦然。

您不能在同一进程中混合使用不同的位数模块。您不能从 64 位可执行文件加载 32 位 DLL。反之亦然。但是您没有这样做，这意味着您可以将应用程序编译为 32 位或 64 位。

现在，已经说过您可以使用 32 位或 64 位进程，我建议您以 32 位为目标。原因是它使您的部署更简单，因为您只有一个应用程序版本。是的，你可以使用 AnyCPU，但何苦呢。如果您不需要 64 位进程，那么坚持最低公分母会更简单。

# wpf - 捕获鼠标时的 IsMouseOver

> ID：10333251
> 
> 赞同：12
> 
> 时间：2012-04-26T12:19:16.217
> 
> 标签：wpf

我的元素上有一个 IsMouseOver 触发器。我还发生了一个拖动动作，其中另一个元素捕获了鼠标，因此 IsMouseOver 触发器永远不会发生，但我明确希望它在我拖动它时发生在某些元素上（鼠标捕获和所有）。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-12-19T17:45:37.607

我知道这是几年前问的，但以防万一有人从搜索引擎登陆（就像我一样），这就是我自己解决问题的方法。不要使用`IsMouseOver`属性，而是在代码中使用命中测试来确定鼠标是否在您的控件内：

```
bool IsMouseOverEx = false;

VisualTreeHelper.HitTest(this, d =>
{
  if (d == this) 
  {
    IsMouseOverEx = true;
    return HitTestFilterBehavior.Stop;
  } 
  else 
   return HitTestFilterBehavior.Continue;
}, 
ht => HitTestResultBehavior.Stop, 
new PointHitTestParameters(Mouse.GetPosition(this)));

if (IsMouseOverEx) 
{
  //Do whatever you need in case of MouseOver
} 
```

注意如果您还没有阅读该问题，请注意，此方法是针对鼠标被“捕获”并因此`IsMouseOver`属性无法正常工作的情况的解决方法。在正常情况下，您应该始终使用`IsMouseOver`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T02:28:03.777

当用户拖动某些东西时，鼠标在那一刻被“捕获”，并且鼠标事件不会发送到鼠标经过的控件。只有实际“捕获鼠标”的控件才会接收鼠标事件。因此，您需要在那里处理这些事件。这应该很容易。如果您有任何问题，请随时通过电子邮件向我发送一些示例代码，我会为您检查。最良好的祝愿。

# c# - C# 参数 'picture' 必须是可以用作图标的图片

> ID：10333256
> 
> 赞同：22
> 
> 时间：2012-04-26T12:19:28.603
> 
> 标签：c#, winforms, visual-studio-2010, icons

我无法将图标导入我的应用程序。我有一个主表单，我正在尝试通过`Icon`.`Properties`

图像已经是`.ico`格式：[这是我正在尝试使用的图标的链接](http://www.iconfinder.com/icondetails/15336/32/chat_references_talk_icon)。

有谁知道为什么 Microsoft Visual Studio 会显示此错误？

![参数“图片”必须是可以用作图标的图片](../Images/99c5807ee22614a51c9d6cf341483835.png)

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-31T03:50:36.440

我最近有这个错误。一些建议：

*   确保图标是方形的（16x16、32x32）
*   尝试将其保存为 PNG 并使用此免费服务进行转换： http: [//www.convertico.com/](http://www.convertico.com/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-15T05:23:11.400

我们有一个应用程序可以在 99% 的计算机上正常运行，但在一台笔记本电脑上它会弹出此错误。

看起来我们的问题是笔记本电脑用户将屏幕文本/图像大小设置为 150%。这可能会导致正常工作的图像不再工作。我们将看看这是否有效。

**更新**

评论者似乎有同样的问题。是的，我们通过将屏幕文本大小设置为小于 150% 解决了这个问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-30T07:49:21.187

在第二次重新启动后，我自己在 Gimp 中打开并重新保存 .ico，然后我就可以导入它而没​​有任何错误。不太确定是什么导致了这个问题，但这只是一个怪异的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-28T00:35:34.653

感谢[Xiaohuan ZHOU](https://stackoverflow.com/users/10538739/xiaohuan-zhou)对[这个问题](https://stackoverflow.com/questions/17212704/convert-image-to-icon-in-c-sharp)的回答。此功能无损地将 PNG（包括透明度）转换为 .ICO 文件格式。

```
public void ConvertToIco(Image img, string file, int size)
{
    Icon icon;
    using (var msImg = new MemoryStream())
    using (var msIco = new MemoryStream())
    {
        img.Save(msImg, ImageFormat.Png);
        using (var bw = new BinaryWriter(msIco))
        {
            bw.Write((short)0);           //0-1 reserved
            bw.Write((short)1);           //2-3 image type, 1 = icon, 2 = cursor
            bw.Write((short)1);           //4-5 number of images
            bw.Write((byte)size);         //6 image width
            bw.Write((byte)size);         //7 image height
            bw.Write((byte)0);            //8 number of colors
            bw.Write((byte)0);            //9 reserved
            bw.Write((short)0);           //10-11 color planes
            bw.Write((short)32);          //12-13 bits per pixel
            bw.Write((int)msImg.Length);  //14-17 size of image data
            bw.Write(22);                 //18-21 offset of image data
            bw.Write(msImg.ToArray());    // write image data
            bw.Flush();
            bw.Seek(0, SeekOrigin.Begin);
            icon = new Icon(msIco);
        }
    }
    using (var fs = new FileStream(file, FileMode.Create, FileAccess.Write))
    {
        icon.Save(fs);
    }
} 
```

# java - java.io.IOException：通过 https 下载 pdf 时过早的 EOF

> ID：10333257
> 
> 赞同：1
> 
> 时间：2012-04-26T12:19:31.550
> 
> 标签：java, http, io, stream

尝试使用 java 下载 pdf 时出现错误。我知道有类似的问题，但没有我的那么具体。

我的代码片段：

```
URL url = new URL("https://.../abc.pdf");
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
... 
InputStream in= conn.getInputStream();
ByteArrayOutputStream out = new ByteArrayOutputStream(4096);
byte[] buf = new byte[4096];
int bytesRead = 0;
while ((bytesRead = in.read(buf)) != -1) {
    out.write(buf, 0, bytesRead);
} 
```

其他服务器响应标头：

```
 X-AspNet-Version:2.0.50727
 Transfer-Encoding:chunked
 Date:Thu 26 Apr 2012 12:07:59 GMT
 Content-Disposition:attachment; filename=abc.pdf
 Set-Cookie:Language=en-gb; path=/
 Connection:Keep-Alive
 Content-Type:application/octet-stream
 Server:Microsoft-IIS/6.0
 X-Powered-By:ASP.NET
 Cache-Control:private 
```

例外（在`in.read(buf)`）：

```
Exception in thread "main" java.io.IOException: Premature EOF
    at sun.net.www.http.ChunkedInputStream.readAheadBlocking(ChunkedInputStream.java:556)
    at sun.net.www.http.ChunkedInputStream.readAhead(ChunkedInputStream.java:600)
    at sun.net.www.http.ChunkedInputStream.read(ChunkedInputStream.java:687)
    at java.io.FilterInputStream.read(FilterInputStream.java:133)
    at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2959)
    at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2953) 
```

该代码几乎适用于所有情况，并且已被使用了数千次。但在极少数情况下，我会遇到此异常。但是我可以用浏览器下载pdf。此外，如果我将 pdf 放在自己的服务器上，我可以用我的代码下载它。因此，它必须与服务器提供此 pdf 的方式有关。

也许它与它有关`Transfer-Encoding:chunked`？

有谁知道，我可以尝试解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T12:40:40.440

这似乎是一个与 java 分块处理相关的错误。许多解决方法是一次读取一个字节并将读取放入 EOFException 的 try-catch 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T00:20:36.773

我认为您应该需要此代码。

```
try {
}catch(IOException e) {
} finally {
   try {
     if (in != null)
      in.close();
   }catch(Exception e) {
   }
} 
```

或尝试在 Apache 库中使用 IOUtils.close。

```
 finally {
     IOUtils.close(in);
   } 
```

我也发生了同样的事情。但现在修好了。

# php - 无法使 PHPUnit 依赖项工作

> ID：10333264
> 
> 赞同：3
> 
> 时间：2012-04-26T12:20:03.350
> 
> 标签：php, unit-testing, testing, phpunit

我正在开发一个 API，但在编写一些测试用例时遇到了麻烦。我已经编写了一组通用测试用例来测试所有实体。其中包括创建、修改和删除等一般操作。

```
/**
 * @dataProvider provideCreateData
 * @depends LoginTest::testLogin
 */
public function testCreate

 /**
 * @dataProvider provideModifyData
 * @depends testCreate
 */
function testModify 
```

数据提供者提供 API 实体列表及其各自的属性，测试会动态测试所有实体，而我们不必在未来发生变化时对测试进行主控。

以上目前工作正常，但我无法集成其他需要的硬编码测试，例如不遵循一般模式的搜索功能。显然，我无法在没有现有实体的情况下测试 find 函数，因此 find 测试需要在 create 测试之后运行，而我在执行此操作时遇到了麻烦。我尝试使用：

```
 /**
 * @depends GeneralTest::testCreate 
 */
public function testFind() {} 
```

哪个不起作用，测试没有运行，而是无缘无故地被跳过。但是，如果我删除了依赖项，测试就会运行，但是我不能再保证数据库中存在实体。

我觉得我遗漏了一些明显的东西，或者我误解了一些重要的概念。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T13:24:42.627

跳过消费者测试有几个原因。

1.  'testFind' 在 'GeneralTest::testCreate' 之前定义。PHPUnit 不会改变执行顺序来帮助依赖；那是在你身上。
2.  'GeneralTest::testCreate' 中的断言失败。如果断言失败，则说明尚未满足依赖关系，因此跳过该方法。

如果你真的需要，你应该只使用@depends。您应该努力让每个测试方法测试一个特定的执行路径。如果您认为需要该依赖项，则需要配置一个测试套件，以便您可以控制测试的顺序。

[https://phpunit.de/manual/3.7/en/organizing-tests.html#organizing-tests.xml-configuration](https://phpunit.de/manual/3.7/en/organizing-tests.html#organizing-tests.xml-configuration)

# javascript - obj.foo() 和 obj(a).foo - 如何解决这个问题？（jQuery的想法）

> ID：10333266
> 
> 赞同：0
> 
> 时间：2012-04-26T12:20:17.170
> 
> 标签：javascript, jquery

起初 - 对不起我糟糕的英语。我必须练习它，并将尽我所能。

我会在 javascript 中为我尝试一些新的东西。我得到了 jQuery 库的想法。那里有两个

使用“jQuery”或“$”的不同方式。

```
jQuery(arg).foo(); // first way
jQuery.foo();      // second way 
```

现在我想对一个对象做同样的事情。

```
obj(arg).foo();
obj.foo(); 
```

我的第一个问题是：jQuery 如何成为一个返回对象并成为

一样的方法 ？

```
obj(arg).foo(); 
```

看起来像一个返回对象的函数。但

```
obj.foo(); 
```

看起来像一个物体。

我尝试了一些与 obj.foo() 和 obj().foo() 一起使用的东西，但没有任何效果 - 无论如何我尝试了一些返回错误的东西： foo() 未定义。

你知道 jQuery 是如何解决它的，以这种不正常的方式注册变量 jQuery 吗？

以下是我想要实现的（代码确实有效！）：

```
myClass = function () {
   this.foo() {
      window.alert('foo()!');
      return this;
   }
}
var myObj = new myClass();
function obj() {
    return myObj.foo(arguments);
}

var obj = {
            secondFoo : function () {
                                        myObj.foo();
                                    }  
          };

obj('arg').foo();     // alert(foo()!) && alert(foo()!)
obj.secondFoo();      // alert(foo()!)
obj('arg');           // alert(foo()!) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:33:51.967

这是一个小小提琴，显示 jQuery 是如何做到的（不完全是，但核心逻辑在那里）[http://jsfiddle.net/UD2Mv/1/](http://jsfiddle.net/UD2Mv/1/)

基本上 jQuery 总是返回自己（实际上不是 jQuery 对象，而是 jQuery.fn 的一个实例），除非函数调用期望返回一些东西。

因为它返回自己，所以所有属性和方法都被返回并且可以作为链使用。jQuery 的诀窍是它在其中存储元素，但使用整数键，就像在数组中一样。

这就是我在此行的示例中所做的

```
this[0] = document.getElementById(id); 
```

这意味着该元素现在已存储并可用于作为其一部分的所有方法，因此当我调用 colorMe 时，this[0] 为我提供了目标元素。

这是代码

```
function wrap(id) {
    return new wrap.init(id);
};

wrap.init = function(id) {
    this[0] = document.getElementById(id);
    return this;
};

wrap.init.prototype = {
    colorMe: function(color) {
        this[0].style.color = color;
        return this;
    }
};

$(function() {
    wrap('boo').colorMe('red');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:23:05.893

在 Javascript 中，所有函数也是对象。

你可以写

```
someFunction.someProperty = function() { ... };

someFunction.someProperty(); 
```

# .htaccess - 使用 .htaccess 允许/禁止目录列表

> ID：10333268
> 
> 赞同：1
> 
> 时间：2012-04-26T12:20:21.207
> 
> 标签：.htaccess, directory

我有一个 wordpress 网站正在运行，目前任何人都可以通过访问来查看上传目录

```
http://site.com/wp-content/uploads 
```

我想阻止在浏览器中查看此目录，但我希望可以查看子文件夹（例如。`http://site.com/wp-content/uploads/PublicUploads`）。我试过设置

```
IndexIgnore * 
```

在上传文件夹中，但我无法弄清楚如何将子文件夹设置回可见。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:28:43.617

大多数人使用

```
Options -indexes 
```

要使子目录再次可见，您需要在该子目录中放置一个 .htaccess 文件，其中包含`Options +indexes`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:41:00.633

使用 mod_rewrite 您可以阻止对目录的直接访问，`wp-content/uploads`如下所示：

```
RewriteRule ^wp-content/uploads/?$ - [F,NC] 
```

请记住，这只会阻止浏览`/wp-content/uploads`内容，但会允许`/wp-content/uploads/PublicUploads`或任何`/wp-content/uploads/foo`.

# javascript - 带有 JavaScript 对象（数据）的 POST 表单

> ID：10333270
> 
> 赞同：0
> 
> 时间：2012-04-26T12:20:26.217
> 
> 标签：javascript, ajax, forms, jquery

我有表格来添加帖子的标题、描述字段和一个隐藏字段。Post 有许多子内容（文本、照片、视频）。

现在，每个新的子内容（作为 Javascript 对象（哈希））都被添加到 Javascript 数组变量中。单击提交按钮后，数组变量被移动到隐藏字段值并发送请求以创建新帖子（带有标题、描述和带有子内容的字段）。

这是任何安全的方法（例如，现在黑客可以通过 JS 控制台添加子内容而无需验证检查）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:25:33.403

任何人都可以将任何数据添加到任何 POST，无论是否使用 javascript。我可以用来`curl`向您的服务器提交我想要的任何数据。由您的服务器端应用程序过滤掉坏东西并验证好东西。

# php - 如何使用 PHP 从 Second Life 获取数据？

> ID：10333271
> 
> 赞同：2
> 
> 时间：2012-04-26T12:20:26.417
> 
> 标签：php, linden-scripting-language

我相信这与我的 $paramList 和 $paramList1 有关... do-while 循环正在执行，但没有报告这两个变量。我将它们声明为未定义的数组，然后将它们设置为等于对象和脚本的数量。我做错什么了吗？有什么建议可以尝试吗？

谢谢。

PHP：

```
<?php
$savefile = 'testing1.html';

ob_start();

function emu_getallheaders()
{
  foreach($_SERVER as $name => $value)
  if(substr($name, 0, 5) == 'HTTP_')
    $headers[str_replace('X-Secondlife-', 'X-SecondLife-', str_replace(' ', '-', ucwords(strtolower(str_replace('_', ' ', substr($name, 5))))))] = $value;
    return $headers;
}

$headers = emu_getallheaders(); // Just replace any use of `apache_request_headers()` with `emu_getallheaders()`.

$objectName = $headers["X-SecondLife-Object-Name"];
$objectKey = $headers["X-SecondLife-Object-Key"];
$ownerKey     = $headers["X-SecondLife-Owner-Key"];
$ownerName = $headers["X-SecondLife-Owner-Name"];
$region        = $headers["X-SecondLife-Region"];

$sensorNum = $_POST["sensorNum"];
$numOfObjects = $_POST["numOfObjects"];
$numOfScripts = $_POST["numOfScripts"];
$maxSensors = 4;

$paramList = array();
$paramList1 = array();

$paramList[$sensorNum] = $numOfObjects;
$paramList1[$sensorNum] = $numOfScripts;

$j = 1;

echo <<<EOT
<html>
<CENTER>
<H1>
<b>Heat Map<br><br></b>
</H1>
EOT;

do{
echo <<<EOT
<CENTER>
<H1>
<b>Sensor $j <br></b>
</H1>
</CENTER>
<font size="5" face="arial" color="red">
<CENTER>
Total number of objects running:
$paramList[$j]
<br>
Total number of scripts running:
$paramList1[$j]
<br>
</font>
</CENTER>
EOT;
$j = ($j + 1);
}while($j <= $maxSensors);

<<<EOT
</body>
</html>
EOT;

$thePara = ob_get_contents();
file_put_contents('testing1.html', $thePara);
?> 
```

这是我的第二人生剧本，以防有人想看：

```
//Get the number of objects and scripts in a given area

key requestid;
integer typeConst;
integer objects;
integer scripts;
integer two = 2;

webPage()
{
    requestid = llHTTPRequest("http://www.wbi-icc.com/students/SL/thisisatest.php", 
        [HTTP_METHOD, "POST",
         HTTP_MIMETYPE, "application/x-www-form-urlencoded"],
        "numOfScripts=" + (string)scripts 
        + "&sensorNum=" + (string)two); 
}

default
{
state_entry()
{

}
//Activate on a touch
touch_start(integer total_number)
{
    typeConst = 0;
    llSensor("", NULL_KEY, SCRIPTED, 20.0, PI);
}
//Use the sensors to keep a count of the total objects and scripts
sensor(integer detected)
{
    if(typeConst == 0)
    {
        llOwnerSay("There are "+(string)detected 
            +" scripted objects in range.");
        typeConst = 1;
        llSensor("", NULL_KEY, PASSIVE, 20.0, PI);
    }
    else if(typeConst == 1)
    {
        llOwnerSay("There are "+(string)detected 
            +" objects in range.");
    }
}

no_sensor()
{
    if(typeConst == 0)
    {
        llOwnerSay("There are no scripted objects in range.");
        typeConst = 1;
        llSensor("", NULL_KEY, PASSIVE, 20.0, PI);
    }
    else
    {
        llOwnerSay("No objects in range.");
    }

} 
```

}

# perl - Perl：没有条件的while

> ID：10333275
> 
> 赞同：44
> 
> 时间：2012-04-26T12:20:42.227
> 
> 标签：perl, while-loop

根据[文档](http://perldoc.perl.org/perlsyn.html#Compound-Statements)，`while`只要表达式为[真](http://perldoc.perl.org/perlsyn.html#Truth-and-Falsehood)，语句就会执行块。我想知道为什么它会变成一个带有空表达式的无限循环：

```
while () { # infinite loop
 ...
} 
```

只是文档中的不准确吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-26T12:42:58.853

```
$ perl -MO=Deparse -e 'while () { }'
while (1) {
    ();
}
-e syntax OK 
```

似乎`while () {}`和`while (1) {}`是等价的。另请注意，在空块中插入了空括号*。

预定义编译器行为的另一个示例：

```
$ perl -MO=Deparse -e 'while (<>) { }'
while (defined($_ = <ARGV>)) {
    ();
}
-e syntax OK 
```

我会说这只是没有报告特殊情况的文档。

* — 准确地说，`stub`操作码被插入。它什么都不做，但为`enterloop`操作码提供一个 goto 目标。没有真正的理由注意到这一点。Deparse`stub`使用空括号表示此操作，因为括号不生成代码。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-26T15:16:29.687

这是[Vacuous Truth](http://en.wikipedia.org/wiki/Vacuous_truth#Scope_of_the_concept)概念的一个特例。如果没有条件，*则条件为真时*的陈述本身就是空虚的。

如果我没看错的话，相关的代码似乎在 5.14.1[的第 5853 行附近：`op.c`](http://perl5.git.perl.org/perl.git/blob/906024c7fead4086ed911b8052d784aa07c2f1e2:/op.c#l5853)

```
5853     if (expr) {
5854         scalar(listop);
5855         o = new_logop(OP_AND, 0, &expr, &listop);
5856         if (o == expr && o->op_type == OP_CONST && !SvTRUE(cSVOPo->op_sv)) {
5857             op_free(expr);              /* oops, it's a while (0) */
5858             op_free((OP*)loop);
5859             return NULL;                /* listop already freed by new_logop */
5860         }
5861         if (listop)
5862             ((LISTOP*)listop)->op_last->op_next =
5863                 (o == listop ? redo : LINKLIST(o));
5864     }
5865     else
5866         o = listop; 
```

I am assuming with no `expr` in the condition, we reach `o = listop`. `listop` was previously defined as `listop = op_append_list(OP_LINESEQ, block, cont);`.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-26T12:27:23.707

这是一个特例。空条件表达式默认为 just `true`，这意味着“永远循环，或者直到 a `break`。在 C（和 perl）中，成语

```
for(;;) {
   // Neverending fun
} 
```

出于相同的原因具有相同的效果。

官方的 perl 文档中似乎没有提到这一点，但是解析器中有一个特殊的规则。也许是因为没有人使用它:)

不过，这个`for(;;)`成语不太常见。

# c# - DataList 的重复列属性

> ID：10333278
> 
> 赞同：0
> 
> 时间：2012-04-26T12:21:00.700
> 
> 标签：c#, asp.net, user-interface, ado.net, datalist

我正在使用 DataList 在表格布局中呈现一些 div，并将**RepeatColumn 属性设置为 3**。当我的数据源有 3 条或多于 3 条记录时，它可以正常工作并呈现 3 列和尽可能多的所需行。但是当我的数据源包含一到两条记录时，它分别只呈现一列或两列，因此违反了站点标准。是否有任何**填充**方式，以便如果我的数据源包含一条记录，那么其他两列将自动生成（**当然是空的**），或者如果数据源包含两条记录，那么第三列将**自动生成**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:25:46.620

只需确保在绑定之前始终在数据源中至少包含三个项目。

一些伪代码就足够了：

```
datasource = GetDatasourceMethod();
while(datasource.Count <= 3) {
    datasource.Add(emptyItem);
}
datalist.DataSource = dataSource;
datalist.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-17T22:48:19.273

添加 ItemStyle Width ="25%" 得到 4 列

**" data-model="<%# ParameterModel(Container.ItemIndex) %>"><%# Eval("Name") %>**

 **```
</ItemTemplate> 
```**

# javascript - 在轮播中按下按钮时自动为每个 li 添加类

> ID：10333284
> 
> 赞同：0
> 
> 时间：2012-04-26T12:21:13.473
> 
> 标签：javascript, jquery

使用 JCarousel（循环），我制作了一个项目列表，我想在单击按钮后为每个 li 动态添加一个类，该类也应该一个接一个地添加。所以，对于每次点击，只有一个 li 应该有那个类，这样我就可以为那个类编写 css。有没有任何 jquery 或 javascript 方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:24:53.233

```
$('#button').click(function(){   
    $('li.liclass:not(.your_class)')[0].addClass('your_class'); 
}); 
```

# ruby-on-rails - Ruby on Rails：如何使用 OAuth2::AccessToken.post？

> ID：10333286
> 
> 赞同：10
> 
> 时间：2012-04-26T12:21:22.220
> 
> 标签：ruby-on-rails, ruby, oauth-2.0

OAuth2::AccessToken.post() 方法在文档中是这样指定的：

（对象）发布（路径，opts = {}，&block）

我试图传递一些论点，但似乎我做错了：

```
response = token.post('/oauth/create.js', {:title => "title", :description => "desc"}) 
```

参数永远不会到达方法，值始终为零。那么，使用带有参数的 post 方法的正确方法是什么？那是什么&block？

我也收到警告：无法验证 CSRF 令牌的真实性。这也可能导致问题。情况是我从应用程序外部使用 OAuth api。OAuth 2 是通过 Doorkeeper gem 实现的。

更新：定义范围后，CSRF 警告现在消失了。我也设法通过提供作为 url 的一部分来使用这个 post() 方法和参数：“?title=test&...”。仍然很高兴知道如何使用记录的这种方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-27T00:43:10.900

POST 或 PUT 中的正文通过选项正文参数访问。没有这方面的文档。必须查看 oauth 客户端代码本身才能发现这一点：

[https://github.com/intridea/oauth2/blob/ebe4be038ec14b3496827d29cb224235e1c9f468/lib/oauth2/client.rb](https://github.com/intridea/oauth2/blob/ebe4be038ec14b3496827d29cb224235e1c9f468/lib/oauth2/client.rb)

你的例子，正确的身体将是：

```
response = token.post('/oauth/create.js', {body: {:title => "title", :description => "desc"}}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T00:31:06.887

您可以使用该块将参数传递给发布请求：

```
token.post('/oauth/create.js') do |request|
  request.params['title'] = "something"
end 
```

OAuth2 gem 使用法拉第，`request`对象是法拉第请求，因此您可能需要检查其他方式与请求一起传递参数

法拉第宝石 => [https://github.com/lostisland/faraday](https://github.com/lostisland/faraday)

# java - java.lang.NoSuchFieldError: LUCENE_33

> ID：10333289
> 
> 赞同：1
> 
> 时间：2012-04-26T12:21:33.283
> 
> 标签：java, maven, lucene, jvm, jython

尝试使用 Jython 的 Datomic (http://www.datomic.com) 时出现此错误：

```
java.lang.NoSuchFieldError: java.lang.NoSuchFieldError: LUCENE_33 
```

我使用 Shade Maven 插件创建了一个 Datomic uber jar，我看到添加了 Lucene 3.3.0：

```
Including org.apache.lucene:lucene-core:jar:3.3.0 in the shaded jar 
```

uber jar 在我的 CLASSPATH 中，否则会引发 Datomic 错误。

# php - 我需要在样式表中插入一些 PHP 代码

> ID：10333295
> 
> 赞同：6
> 
> 时间：2012-04-26T12:21:52.860
> 
> 标签：php, css

在我的 CSS

```
div.image {
   width:<?php echo get_image_size( $size[1] ); ?>px;
} 
```

大小存储在一个数组中，所以我在这里调用 $size[1] ...

我是php的初学者...

有人请帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T12:25:51.207

更好的解决方案是在我的示例 cssfile.php 中为 css / php 文件设置标题：

```
<?php header("Content-type: text/css"); ?> 
```

然后你可以使用 php 文件作为样式。

```
<link rel="stylesheet" type="text/css" href="cssfile.php?param=1" /> 
```

然后你应该在你的网站上得到输出。但是使用该解决方案，如果您有很多流量，您应该非常小心。在每个站点调用中，您的 PHP 解释器都用于传递该文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T12:27:19.067

是的，对于这个特定的实例，如果您只需要在这一行上的 php，最好插入到您的 html 的头部，而不是让 php 为您制作一个完整的 css 文件。

```
<style type="text/css">
  div.image {
   width:<?php echo get_image_size( $size[1] ); ?>px;
  }    
</style> 
```

除非绝对必要，否则 PHP 不应该创建您的静态资产。如果流量变高，您会注意到性能下降。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T12:26:55.797

将扩展名更改为 .php，然后在您的样式表中输入：

```
<?php header("Content-type: text/css"); ?> 
```

然后你可以在你的样式表中使用 PHP。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-26T12:39:55.050

也许你应该使用这个：

```
<div class="image">
  <img src="image.gif" />
</div> 
```

CSS：

```
div.image img{
   width: 100%
} 
```

将样式放入 html 的问题在于，一切都变得一团糟。您应该尽量将 html 与 css 和 js 分开。

另外，根据我的经验，在 css 或 js 文件中使用 php 不是一个好习惯。

考虑检查您的 html 布局以优化这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T12:26:13.427

一种方法是将特定部分从 .css 文件中移出，并将其插入到可以访问 get_image_size() 函数的 PHP 文档中。例如，您可能有一个模板被解析为标题。然后你可以用`<style>`标签把这件作品包围起来。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-26T12:31:28.033

为此，您需要像这样使用

1.  将您的 css 文件更改为 css.php，并像这样使用样式表包含

    `<link rel="stylesheet" type="text/css" href="css.php?opt1=<?php echo get_image_size($size[1] ); ?>" />`

2.  在 css.php 文件中

    `div.image { width:<?php echo $_GET['opt1']; ?>px; }`

试试这个

# fedex - 联邦快递 api 用于运输

> ID：10333305
> 
> 赞同：7
> 
> 时间：2012-04-26T12:22:29.753
> 
> 标签：fedex

我想在我的电子商务网站上应用 FedEx API。但我不知道如何应用该 API。我已完成“测试密钥注册”并获取测试帐户信息。所以我接下来要做什么。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:40:20.817

以下答案与作为运输服务一部分的跟踪服务有关：在收到您的测试凭据（密钥、密码、帐号和仪表编号）后，使用它们发送 SOAP 请求（就像您通常使用编程语言所做的那样）到该服务位于[https://wsbeta.fedex.com:443/web-services/track](https://wsbeta.fedex.com:443/web-services/track) 使用 123456789012 作为测试跟踪号。当您准备好迁移到生产环境时，将服务路径更改为[https://ws.fedex.com:443/web-services/track](https://ws.fedex.com:443/web-services/track)（或[https://gateway.fedex.com:443/web-services /track](https://gateway.fedex.com:443/web-services/track) ) 并使用可[从此处获得的生产凭据](https://www.fedex.com/wpor/web/jsp/drclinks.jsp?links=wss/production.html)

请参阅[文档](http://images.fedex.com/us/developer/product/WebServices/MyWebHelp/DeveloperGuide2012.pdf)以了解如何使用您的编程语言使用这些服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:32:48.753

根据 FedEx 的说法，他们很快就会停用他们的 API。我相信目标日期是 2012 年 5 月末。现在他们将使用 Web 服务而不是 API。以下是有关公告的更多信息：

[http://www.fedex.com/us/developer/migration.html](http://www.fedex.com/us/developer/migration.html)

就 Web 服务而言，他们的网站上有很好的文档，说明如何直接访问 Web 服务以及如何在您的网站上放置一个小部件，以允许客户查看他们的运输。以下是这些资源：

[http://www.fedex.com/us/developer/solutions.html](http://www.fedex.com/us/developer/solutions.html)

这里也有演示和教程：

[http://www.fedex.com/us/developer/web-services/index.html](http://www.fedex.com/us/developer/web-services/index.html)

我希望这可以帮助您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:44:54.257

如果您觉得您已准备好测试实时货件，您现在需要联系 Fedex 服务台并要求获取与您的 Fedex 帐户相关联的用户密钥。测试密钥只会让您进入 Web 服务的测试端。要获得实际费率等，您需要使用真实用户密钥指向实时网关。

# .net - servicehost.open 方法后的代码未执行

> ID：10333309
> 
> 赞同：0
> 
> 时间：2012-04-26T12:22:45.510
> 
> 标签：.net, wcf, wcf-binding

我正在学习 wcf 并研究一个示例。在此，我为 wcf 服务和 2 个用于托管服务和另一个客户端应用程序的 Windows 应用程序构建了一个 dll。在托管 appn 中，我无法在 servicehost.open 方法之后执行代码。我只是想知道发生了什么。请帮忙。

托管应用程序中的代码如下：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.ServiceModel;
using System.ServiceModel.Description;
using WCFService;
namespace WCFServiceHost
{
    public partial class Form1 : Form
    {
        ServiceHost sh = null;
        public Form1()
        {
            InitializeComponent();
        }
        private void Form1_Load(object sender, EventArgs e)
        {
            Uri tcpa = new Uri("net.tcp://localhost:8000/TcpBinding");

            sh = new ServiceHost(typeof(ServiceClass), tcpa);
            NetTcpBinding tcpb = new NetTcpBinding();
            ServiceMetadataBehavior mBehave = new ServiceMetadataBehavior();
            sh.Description.Behaviors.Add(mBehave);
            sh.AddServiceEndpoint(typeof(IMetadataExchange),
            MetadataExchangeBindings.CreateMexTcpBinding(), "mex");
            sh.AddServiceEndpoint(typeof(IServiceClass), tcpb, tcpa);
            sh.Open();
**//This line is not executed
            label1.Text = "Service Running";
//This line is not executed**
        }
        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            sh.Close();
        }
    }
} 
```

另一个帮助：我们如何在 Visual Studio 2005 中添加服务参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:39:11.060

有2种可能：

*   没有调用 Form1_Load
*   sh.Open() 或前几行之一抛出异常

在您的代码周围放置一个 try catch。在 catch 块中，将文本设置为异常的文本。

**编辑**

这是一个权利问题。当您执行 sh.Open() 时，程序应该开始侦听端口。监听端口需要许可。

如果您使用“以管理员身份运行”启动程序，它应该可以工作。

# mysql - 确保 MySQL 表字符集和排序规则

> ID：10333310
> 
> 赞同：1
> 
> 时间：2012-04-26T12:22:46.533
> 
> 标签：mysql

情况：有一个表由应用程序 A 管理。应用程序 A 全天在表中插入和更新数据。每周一次，它`DROP`是表，重新创建它，并插入所有数据。

问题：应用程序 A 将表创建为`utf8`. 依赖此表的应用程序 B 要求它是`ascii_bin`. 我没有设计任何一个应用程序，也无权修改他们的要求。

需要什么：确保表格在`ascii_bin`. 我考虑编写一个脚本并通过 CRON 运行它，它会检查当前字符集并在需要时设置它。有没有更好的方法来实现这一目标？

由于`ALTER`是导致隐含的语句之一，因此`COMMIT`我认为不可能将其作为`INSERT`or之后的触发器的一部分`UPDATE`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:27:53.310

您可以将`ascii_bin`数据库模式设置为默认字符集。然后所有创建的表在创建时都将具有此字符集，除非您明确指定另一个字符集。

有关如何设置默认字符集的信息，请参阅 MySQL 文档：http: [//dev.mysql.com/doc/refman/5.0/en/charset-database.html](http://dev.mysql.com/doc/refman/5.0/en/charset-database.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:38:04.007

[MySQL 代理](https://launchpad.net/mysql-proxy)可能是这里的解决方案。

您可以在通过代理时重写 create 语句。

或者，也许您可​​以从应用程序 A 中删除权限，以便它不能删除表。

不做任何更改的 ALTER 语句基本上会被忽略。因此，如果多次运行到 ascii_bin 的转换，服务器上的工作量不会太大。所以，把它放在 cron 中，或者 Applicatio B 调用的现有存储过程中，或者其他一些聪明的东西，并不是那么糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:44:23.590

[请参阅http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html)上的 SET NAME

# sql - (@Variable) 查询中的 SQL

> ID：10333319
> 
> 赞同：6
> 
> 时间：2012-04-26T12:23:20.683
> 
> 标签：sql

我有以下代码，问题是我的变量列表@LocationList 本质上是一个csv字符串。当我在 (@LocationList) 中将它用作 where LocationID 的一部分时，它说它不是 int （LocationID 是 int）。如何让这个 csv 字符串被 in 子句接受？

```
Declare @LocationList varchar(1000)
Set @LocationList = '1,32'

select Locations from table where Where LocationID in (@LocationList) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T12:38:43.600

最有效的方法是使用动态 SQL，例如 rt2800 提及（Michael Allen 的注入警告）

但是，您可以创建一个函数：

```
ALTER  FUNCTION [dbo].[CSVStringsToTable_fn] ( @array VARCHAR(8000) )
RETURNS @Table TABLE ( value VARCHAR(100) )
AS 
    BEGIN
        DECLARE @separator_position INTEGER,
            @array_value VARCHAR(8000)  

        SET @array = @array + ','

        WHILE PATINDEX('%,%', @array) <> 0 
            BEGIN
                SELECT  @separator_position = PATINDEX('%,%', @array)
                SELECT  @array_value = LEFT(@array, @separator_position - 1)

                INSERT  @Table
                VALUES  ( @array_value )

                SELECT  @array = STUFF(@array, 1, @separator_position, '')
            END
        RETURN
    END 
```

并从中选择：

```
DECLARE @LocationList VARCHAR(1000)
SET @LocationList = '1,32'

SELECT  Locations 
FROM    table
WHERE   LocationID IN ( SELECT   *
                           FROM     dbo.CSVStringsToTable_fn(@LocationList) ) 
```

或者

```
SELECT  Locations
FROM    table loc
        INNER JOIN dbo.CSVStringsToTable_fn(@LocationList) list
            ON list.value = loc.LocationID 
```

当您尝试将多值列表从 SSRS 发送到 PROC 时，这非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-12T15:49:26.363

我经常有这个要求，**有时**，如果您非常了解要搜索的列[大小/格式/长度]，您可以做一种正则表达式。

像这样的东西：

```
 DECLARE @MyListOfLocation varchar(255)
  set @MyListOfLocation  = '|1|32|36|24|3|'

  Select LocationID 
  from  Table 
  where @MyListOfLocation like '%|' +  LocationID + '|%' 
```

**注意**：PIPE 字符用于保护查询不返回任何包含单个字符（例如“1”）的 LocationID。

这是一个完整的工作示例：

```
DECLARE @MyListOfLocation varchar(255)
set @MyListOfLocation  = '|1|11|21|'

SELECT LocationName
FROM (
        select '1' as LocationID, 'My Location 1' as LocationName
        union all
        select '11' as LocationID, 'My Location 11' as LocationName
        union all
        select '12' as LocationID, 'My Location 12' as LocationName
        union all
        select '13' as LocationID, 'My Location 13' as LocationName
        union all
        select '21' as LocationID, 'My Location 21' as LocationName
    ) as MySub
where @MyListOfLocation like '%|' + LocationID + '|%' 
```

**警告！这种方法对索引不友好！**

如果您想在所有这些中添加一些 IN(@MyListOfLocation) 以利用 INDEXES，您可以将脚本修改为：

```
SELECT MyDATA.* 
FROM   HugeTableWithAnIndexOnLocationID as MyDATA 
WHERE  LocationID in (
      Select LocationID 
      from  Table 
      where @MyListOfLocation like '%|' +  LocationID + '|%') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:30:55.883

```
declare @querytext Nvarchar(MAX)

set @querytext = 'select Locations from table where Where LocationID in (' + @LocationList + ');';

exec sp_executesql @querytext; 
```

# android - 是否可以调用扩展应用程序 android 的类？

> ID：10333325
> 
> 赞同：4
> 
> 时间：2012-04-26T12:23:31.633
> 
> 标签：android

我有一个扩展应用程序的类，我想从代码中调用它，它有

```
@Override
public void onCreate() 
```

我需要从活动中调用它。我知道如何在应用程序启动时调用它，因为我需要包含在清单中：

```
 android:name="" 
```

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T12:29:13.250

您应该避免手动调用应用程序 onCreate，因为如果配置正确，它将自动启动。但是，如果您想从覆盖的应用程序中调用方法，您可以这样做：

```
public class MyApplication extends Application{
    public void someMethod(){}
} 
```

然后在任何活动中：

```
MyApplication app = (MyApplication)getApplication()
app.someMethod(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T12:28:59.787

试试这个 ：

```
public class YourApplication extends Application 
{     
     public void sayHello {
        System.out.println("Hello")
    }
} 
```

然后通过以下方式在任何活动中调用它：

```
YourApplication appState = ((YourApplication)this.getApplication());
appState.sayHello(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T12:28:40.657

`onCreate()`应用程序启动时调用应用程序类。如果你想调用你在 Application 类中声明的方法，你可以这样调用它，

```
((Application_Class_Name)getApplicationContext()).calling_method(); 
```

从扩展 Activity 的任何其他类，否则您必须使用上下文来获取`getApplicationContext()`要从非 Activity 类调用的实例。

**例如 -**如果你想从适配器类调用它，你需要将 Activity 的上下文传递给适配器类并获取应用程序的实例，

```
((Application_Class_Name)mContext.getApplicationContext()).calling_method(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T12:28:27.417

从`Activity`您只需调用`((YourAppName)getApplicationContext())`.

而且，你不需要`onCreate()`在你的`Application`（除非你知道你这样做）。您可以在那里设置一些方法，然后使用例如调用它们`((YourAppName)getApplicationContext()).myMethod()`。只要它的任何 Activity 存在，您的应用程序就会存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T12:28:39.457

你不应该自己调用`onCreate()`方法......Android会为你做......这样一个类的主要目的是保持全局变量对整个应用程序通用，因为Application本身是一个实例......

它允许您覆盖`onCreate()`，因为您可能需要操作系统创建的应用程序/活动中的自定义内容..

# ios - 应用程序在调试模式下在设备上运行良好，但在我独立运行时崩溃

> ID：10333328
> 
> 赞同：0
> 
> 时间：2012-04-26T12:23:41.533
> 
> 标签：ios

我的应用程序在调试模式下在设备上运行良好，但是一旦我在没有 Mac 或 Xcode 调试模式的情况下运行我的应用程序，它就会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T09:08:01.490

您可以尝试将您的配置文件更改为开发类型。

# android - Android旋转拨号器设置可点击区域

> ID：10333333
> 
> 赞同：0
> 
> 时间：2012-04-26T12:24:13.577
> 
> 标签：android, android-image

我只是在玩 Android SDK Demos，发现了旋转拨号器示例，您可以在这里找到：[Android Rotating Dialer](http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-rotating-dialer/)，我对一件事感到好奇。如何将图像设置为仅在单击图像时才旋转……而不是由内向外。如果我单击中心（在白色区域）或图像外部（再次在白色区域），我不想旋转它。

有什么建议我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:32:34.793

有趣的问题。

这可以通过修改 myOnTouchListener 的代码来实现。就在 switch 语句之前，您将执行计算以检查触摸的 x,y 坐标是否在内半径之外和外半径内。

一些简单的毕达哥拉斯，它不会太难。如果不是这种情况，则此时返回 true。

# nsurl - 如果传递的字符串包含阿拉伯语单词和空格，则 NSURL 返回 nil

> ID：10333334
> 
> 赞同：1
> 
> 时间：2012-04-26T12:24:25.213
> 
> 标签：nsurl

实际上，我正在尝试从包含英语和带有空格的阿拉伯语单词的字符串创建 NSUrl。但是 NSURl 在将其传递给 nsurl 后返回 null。我应该怎么做才能完成这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:45:48.143

你应该这样做：第二行很重要。

```
NSString *urlstr=[NSString stringWithFormat:@"www.ModelAirplane.ir/هاشم"];

urlstr = [urlstr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSURL * url=[NSURL URLWithString:urlstr];
NSLog(@"%@",url.description); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-24T19:53:29.907

在**Swift 2.0中使用它**

```
let  = "http://example.ir/اسم-عربي"
let safeURL = urlStr.stringByAddingPercentEncodingWithAllowedCharacters(NSCharacterSet.URLQueryAllowedCharacterSet())! 
```

从[这里参考](https://stackoverflow.com/a/32703510/1599713)

# c++ - 意外标记“换行符”附近的语法错误

> ID：10333336
> 
> 赞同：0
> 
> 时间：2012-04-26T12:24:29.083
> 
> 标签：c++, makefile

使用 a 编译一些代码后`Makefile`，当我尝试运行它时得到了这个：

```
$ ./libbookgui.a
./libbookgui.a: line 1: syntax error near unexpected token `newline'
./libbookgui.a: line 1: `!<arch>' 
```

有以下`Makefile`内容。

```
INCLUDES = -I"$(FLTK)"
LIBS     = -lstdc++
CXXFLAGS = $(INCLUDES) -Wall -time -O3 -DNDEBUG -Wno-deprecated
LIBFLAGS = 
AR       = ar

.SUFFIXES: .cpp .o

# Create a list of source files.
SOURCES  = $(shell ls *.cpp)
# Create a list of object files from the source file lists.
OBJECTS = ${SOURCES:.cpp=.o}     
# Create a list of targets.
TARGETS = libbookgui.a

# Build all targets by default
all:    $(TARGETS)

%.a: $(OBJECTS)
    $(AR) rcs $@ $(OBJECTS)

# A rule to build .o file out of a .cpp file
%.o: %.cpp 
    $(CXX) $(CXXFLAGS) -o $@ -c $<

# A rule to clean all the intermediates and targets
clean:  
    rm -rf $(TARGETS) $(OBJECTS) *.out *.stackdump 
```

我看到它有该行`TARGETS = libbookgui.a`并且编译器不返回任何错误它只是创建`.a`文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:26:45.310

`libbookgui.a`是一个静态库（其中聚合了几个目标文件）。

您应该运行可执行文件，而不是库。将此库链接到某个可执行文件并运行*它*。

我建议你阅读[这篇文章](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:43:21.657

您需要更新您的帖子以显示您对 makefile 所做的更改以添加链接行。没有它，我们无法真正帮助您解决这部分问题。

基于这些错误，我怀疑您没有使用正确的链接工具：您要么使用“gcc”（C 编译器前端），要么尝试直接调用链接器。当您链接您的应用程序时，您应该使用 C++ 编译器（在您的情况下为`$(CXX)`）。您也不需要指定`-lstdc++`，因为 C++ 前端会自动将其添加到链接行。

# python - 如何输出多行csv？

> ID：10333343
> 
> 赞同：2
> 
> 时间：2012-04-26T12:24:48.557
> 
> 标签：python, csv, text-files

现在我用下面的代码解析一些txt文件中的段落文本：

```
def ParseFile(path,filename):

    content=open(path+filename).read()
    code=filename.split('.')[0]

    pattenstart = ''
    pattenend = ''

    for catlog in CATLOG:   

        i = content.index(pattenstart)
        j = content.index(pattenend)

        info=content[i:j]

        yield (catlog,code,info)
        sys.stdout.write('.') 
```

并且信息是多行文本

现在我想输出一个 csv 文件，如：

```
code    info
***     ****
        ****
        ****
***     ****
        ****
        **** 
```

我使用一些脚本进行测试，但只能输出如下文件：

```
code    info 
***     ****
***********
********** 
```

我的测试脚本是：

```
time1=time.time()

subfix='_ALL.csv'
d = defaultdict(list)
for path in [PATH1,PATH2]:
    print 'Parsing',path
    filenames = os.listdir(path)
    for filename in filenames:
        print 'Parsing',filename
        for item in ParseFile(path,filename):
            d[item[0]].append((item[1],item[2]))
        print

for k in d.keys():
    out_file=open(DESTFILEPATH+k+subfix,'w')
    for code,info in sorted(set(d[k])):
        out_file.write(code+'\t'+info+\n')
    out_file.close()
print 'Done in %0.1f seconds'%(time.time()-time1) 
```

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:28:58.573

Python 有[模块`csv`，](http://docs.python.org/library/csv.html)它可以让你更轻松地做你想做的事，我建议你看看。

例如：

```
import csv
with open('somefile.csv', 'w') as file:
    output = csv.writer(file, delimiter='\t')
    output.writerows([
        ['code', 'info'],
        ['****', '****'],
        [None, '****'],
        [None, '****'],
        [None, '****'],
        ['****', '****'],
        [None, '****']
    ]) 
```

产生：

```
code    info
****    ****
        ****
        ****
        ****
****    ****
        **** 
```

编辑：

如果您的数据不适合此格式，那么您只需将其更改为适合：

```
import csv
from itertools import izip_longest
from itertools import chain

data = [("key", ["value", "value"]), ("key", ["value", "value"])]

with open('somefile.csv', 'w') as file:
    output = csv.writer(file, dialect='excel-tab')
    output.writerows(
        chain.from_iterable(
            izip_longest([key], values) for key, values in data
        )
    ) 
```

产生：

```
key     value
        value
key     value
        value 
```

# javascript - Modify JSON object

> ID：10333346
> 
> 赞同：0
> 
> 时间：2012-04-26T12:24:57.070
> 
> 标签：javascript, json

I have the following JSON object :

```
var myObject = {"priorityset": 
  [
    {"name":"Prio1", "valueA":"0", "valueB":"0", "valueC":"0", "valueD":"1"}, 
    {"name":"Prio2", "valueA":"1", "valueB":"0", "valueC":"0", "valueD":"1"}, 
    {"name":"Prio3", "valueA":"0", "valueB":"0", "valueC":"0", "valueD":"1"}
  ]
}; 
```

I want to modify this object so I get something like this:

```
var myObject = 
[
  {"name":"Prio1", "valueA":"0", "valueB":"0", "valueC":"0", "valueD":"1"}, 
  {"name":"Prio2", "valueA":"1", "valueB":"0", "valueC":"0", "valueD":"1"}, 
  {"name":"Prio3", "valueA":"0", "valueB":"0", "valueC":"0", "valueD":"1"}
]; 
```

I have tried to solve this by myself, but no solution so far. Any ideas?

Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:26:23.037

First, json is a string-based data format. You have an object literal with a property, the value of which is an array that contains object literals. From what I see, you just want the property.

`myObject = myObject.priorityset;`

Equally valid is

`myObject = myObject['priorityset'];`

which is another way to do property access on an object literal.

# security - 在 Web 应用程序 url 中使用表索引有什么问题吗？

> ID：10333348
> 
> 赞同：0
> 
> 时间：2012-04-26T12:25:01.690
> 
> 标签：security, url, web-applications

我们正在为我们的 Web 应用程序设计 URL 结构，并希望使用 RESTful、有意义的 URL。在我们的系统中，给定帐户的 url 看起来像 app/accounts/62/details，其中 62 是数字自动递增索引中的键。

这种方法有什么问题吗？用户可以登录他们各自的帐户，因此用户无法通过更改帐号来访问其他帐户。但是，公开这样的记录 ID 是否有任何问题，或者有任何理由在哈希中屏蔽它是有意义的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:53:51.727

有许多担忧 - 它们可能不适用......

首先，“信息泄露”可能令人担忧。例如，想知道您有多少客户/订单的竞争对手可能会遍历 URL，直到您向他发送 404。在某些情况下，您可以通过要求用户在您决定是否发送之前登录来避免这种情况。 404; 在其他人中，你不能。

一个更概念化的问题是主键通常对用户没有意义 - 很多网站都有像 app/accounts/homer.simpson/details 这样的 URL，并采用消歧策略允许超过 1 个 Homer Simpson（Facebook、LinkedIn、Twitter 都这样做） ）。

# jquery - 如何在 jquery 工具提示上显示之前使用繁忙的 img 预加载 img

> ID：10333350
> 
> 赞同：0
> 
> 时间：2012-04-26T12:25:02.007
> 
> 标签：jquery, image, tooltip, preload

我正在使用此脚本从产品列表页面上的缩略图加载更大的图像：

```
$(function() {
$('a.listingProductImageTooltip').tooltip({
    track: true,
    delay: 0,
    showURL: false,
    bodyHandler: function() {
        return "<img src='"+ $(this).attr('rel') +"' alt='image preview' /><div style=\"padding-top: 10px\">"+ this.tooltipText+"</span>";
},
    fade: 250
}); }); 
```

但是如何预加载新的更大图像以显示在工具提示插件中？

提前 Tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:44:57.637

如我所见，您将更大尺寸的 img src 存储在 rel 属性中。因此，您可以在页面完成初始加载后执行此操作

```
$(window).load(function() {
    $('a[rel]').each(function() {
        var theImage = new Image();
        theImage.src = $(this).attr('rel');
    });
}); 
```

它将创建 Javascript 图像对象并将每个锚点的 rel 属性分配给每个图像对象的 src。所以图片会在后台预加载

# iphone - 当 UIImageView.image 设置 2-3 次时应用程序崩溃

> ID：10333354
> 
> 赞同：0
> 
> 时间：2012-04-26T12:25:16.623
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ipad

当我连续三次在 UIImageView 上设置图像属性时（有时两次就足够了），我的应用程序崩溃了。有几次我在应用程序关闭之前看到内存警告，但大多数时候它只是崩溃了。该应用程序不会在模拟器中崩溃，所以我很确定这是一个内存问题。

这是我在设置图像属性时使用的代码：

```
-(void)changeBgPictureTo:(UIImage *)img
{
    [self.backgroundImage setImage:img];
} 
```

UIImages 使用以下方法分配`[UIImage imageWithData:]`：

```
[UIImage imageWithData:[NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:fileName ofType:type]]]; 
```

图像前两次设置正确，但第三次崩溃。它与特定的图像文件无关。我已经尝试了 10 种不同的图像，但没有任何区别。

如何让 UIImageView 卸载以前加载的图像？

**编辑：** 好的，我被要求提供整个代码，所以这里是：

我正在使用一个看起来像这样的类：

```
@interface MyImage : NSObject
{
    UIImage* image;
    int imgId;
    NSArray* colors; //contains 'UIColor' objects.
}

@property (nonatomic, retain) UIImage* image;
@property (nonatomic, retain) NSArray* colors;
@property (nonatomic, readwrite) int imgId;

-(id)initWithFileName:(NSString*)fileName withType:(NSString*)type andId:(int)imgId andColors:(NSArray*)colorArray;

@end 
```

这是初始化实现：

```
-(id)initWithFileName:(NSString*)fileName withType:(NSString*)type andId:(int)imageId andColors:(NSArray*)colorArray
{
     self = [super init];

     if (self)
     {
         self.colors = [NSArray arrayWithArray:colorArray]; 
         self.imgId = imageId;
         self.image = [UIImage imageWithData:[NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:fileName ofType:type]]];
     }   

return self; 
```

}

我有一个数据控制器，它有一个“MyImage”对象列表，通过这个调用添加到一个循环中：

```
[self.myImages addObject:[[MyImage alloc] initWithFileName:[NSString stringWithFormat:@"0000%d", i] withType:@"jpg" andId:i andColors:colors]]; 
```

我有 9 张图片，分别命名为 00001.jpg、00002.jpg、.....、00008.jpg。

这个数据控制器有一个这样的方法：

```
-(MyImage *)getImageWithId:(int)imgId
{
    for (MyImage* img in self.myImages)
    {
        if (img.imgId == imgId)
            return img;
    }
    return nil;
} 
```

getImageWithId 方法是这样调用的：

```
-(void)btnPushed:(id)sender
{
     [self.delegate changeBgPictureTo:[self.imgDataController getImageWithId:((UIButton*)sender).tag]];    
} 
```

changeBgPictureTo 方法是设置图像属性的方法：

```
-(void)changeBgPictureTo:(MyImage *)img
{
    NSLog(@"Setting image: %d", img.imgId);
    [self.backgroundImage setImage:img.image];    
} 
```

日志打印三次“设置图像：0000X：”，但在第三次打印后不久崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:29:41.370

不要将 UIImage 对象存储在 MyObject 类中，而是尝试仅存储文件的文件名。

```
@interface MyImage : NSObject 
{
    NSString *fileName;//UIImage* image;
    int imgId;
    NSArray* colors; //contains 'UIColor' objects.
}

@property (nonatomic, retain) NSString *fileName;//@property (nonatomic, retain) UIImage* image;
@property (nonatomic, retain) NSArray* colors;
@property (nonatomic, readwrite) int imgId;

-(id)initWithFileName:(NSString*)fileName withType:(NSString*)type andId:(int)imgId andColors:(NSArray*)colorArray; 
```

和实施

```
-(id)initWithFileName:(NSString*)fileName withType:(NSString*)type andId:(int)imageId   andColors:(NSArray*)colorArray
{
     self = [super init];

     if (self)
     {
         self.colors = [NSArray arrayWithArray:colorArray]; 
         self.imgId = imageId;
         //self.image = [UIImage imageWithData:[NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:fileName ofType:type]]];
         self.fileName = [[NSBundle mainBundle] pathForResource:fileName ofType:type]];
      }   
      return self;
 } 
```

然后在功能

```
 -(void)changeBgPictureTo:(MyImage *)img   
 {
    NSLog(@"Setting image: %d", img.imgId);
    //[self.backgroundImage setImage:img.image];    
    UIImage *img = [UIImage imageWithContentsOfFile:[img fileName]];
    [self.backgroundImage setImage:img];
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:33:04.637

至少您应该在添加到图像数组后释放那些 MyImage 实例。

```
[self.myImages addObject:[[MyImage alloc] initWithFileName:[NSString stringWithFormat... 
```

这段代码应该是 -

```
MyImage* img = [[MyImage alloc] initWithFileName:[NSString stringWithFormat... 
[self.myImages addObject:img];
[img release]; 
```

或使用自动释放。

您的代码应该会出现内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:45:25.320

尝试使用以下内容从捆绑包中获取图像

```
[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"yourImageName.png" ofType:nil]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T04:47:00.540

当您收到内存不足警告时，您是否有可能释放某个属性然后尝试使用它，但您使用的是 nil？

您是否尝试过在模拟器中模拟内存不足警告以查看它是否崩溃？硬件 > 模拟内存警告

# android - Android 蓝牙代码在 2.2 上运行良好，但在 2.3 或 2.3.3 上运行良好

> ID：10333364
> 
> 赞同：0
> 
> 时间：2012-04-26T12:25:59.320
> 
> 标签：android, bluetooth, ioexception

我正在使用代码进行蓝牙连接，

```
public void run() 
{
    try 
    {

        Method m = mBluetoothDevice.getClass().getMethod("createRfcommSocket", new Class[] {int.class});
        mBluetoothSocket = (BluetoothSocket) m.invoke(mBluetoothDevice, 1);

       // mBluetoothSocket = mBluetoothDevice.createRfcommSocketToServiceRecord(applicationUUID);
        mBluetoothAdapter.cancelDiscovery();

        mBluetoothSocket.connect();

    }
    catch (IOException eConnectException) 
    {
        Log.d(TAG, "CouldNotConnectToSocket", eConnectException);
         closeSocket(mBluetoothSocket);
         return;
    } catch (SecurityException e) {

        Log.d(TAG, "CouldNotConnectToSocket", e);
        closeSocket(mBluetoothSocket);
    } catch (NoSuchMethodException e) {

        Log.d(TAG, "CouldNotConnectToSocket", e);
        closeSocket(mBluetoothSocket);
    } catch (IllegalArgumentException e) {
        Log.d(TAG, "CouldNotConnectToSocket", e);
        closeSocket(mBluetoothSocket);
    } catch (IllegalAccessException e) {
        Log.d(TAG, "CouldNotConnectToSocket", e);
        closeSocket(mBluetoothSocket);
    } catch (InvocationTargetException e) {
        Log.d(TAG, "CouldNotConnectToSocket", e);
        closeSocket(mBluetoothSocket);
    }
} 
```

它在 android 2.2 的 Karbonn 设备上运行良好，当我在三星 Galaxy Y 和索尼爱立信 Xperia mini 上尝试相同的代码时，它不起作用......可能是什么问题......请协助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:31:52.277

您是否在清单中设置了权限？

```
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN"/>
<uses-permission android:name="android.permission.BLUETOOTH"/> 
```

你的例外是什么？

编辑：根据这个 [http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#ACTION_ACL_DISCONNECTED](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#ACTION_ACL_DISCONNECTED) 这是一个不应该发生的低级异常。

[如何以编程方式判断蓝牙设备是否已连接？（Android 2.2）](https://stackoverflow.com/questions/4715865/how-to-programmatically-tell-if-a-bluetooth-device-is-connected-android-2-2) 这对您有帮助吗？

# php - 使用 CodeIgniter 路由？

> ID：10333366
> 
> 赞同：0
> 
> 时间：2012-04-26T12:26:12.123
> 
> 标签：php, codeigniter

我认为这是一个路线问题，但我不确定。我有一个带有此 URL 的页面：

> siteurl.com/kowmanger/titles/titles/edit/$id

我试图找出当我在这个页面上时我加载标题页面它说找不到页面所以我需要告诉它这`$id`只是一个参数所以我可以使用它来获取标题的数据。

**更新 ：**

所以我决定更改我的标题控制器，以便在标题控制器内部有一个编辑和添加功能，这样它们实际上是方法时没有单独的控制器。

所以现在我有：

> kansasoutalwwrestling.com/kowmanager/titles/titles - 标题列表
> 
> kansasoutalwwrestling.com/kowmanager/titles/titles/add - 添加新表格
> 
> kansasoutalwwrestling.com/kowmanager/titles/titles/edit/$id - 编辑表格

到目前为止，我还没有为此设置任何路线。出于某种原因，尽管我为这两个页面都获得了相同的页面。

> kansasoutalwwrestling.com/kowmanager/titles/titles/add - addnew 表单（右链接 url） kansasoutalwwrestling.com/kowmanager/titles/add - addnew 表单

我需要一个路由，以便在访问 add 方法时它会显示正确的 url。

此外，我需要设置一个路由，以便如果访问正确的编辑链接，它会看到附加到 url 末尾的 id 并且它会接受它，以便我可以进行数据库查询以获取标题数据。

更新：所以重申我有一个名为标题的模块（子文件夹）。在模块内部，我有一个名为titles 的控制器，在该控制器内部，我有3 个函数，分别称为index()、add()、edit()。

我尝试在路由上使用 Chris 的建议，但路由不正确。还想提一下，如果这很重要，我正在使用wiredesignz 模块化分离框架。

有什么额外的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:39:07.370

根据您的帖子可能的答案，而不是您的整个结构的 100%，但如果我不得不根据帖子猜测，我会先尝试这个作为我的路线..

```
$route['titles/titles/edit/(:any)'] = 'titles/titles/edit/$1';
$route['titles/titles/add'] = 'titles/titles/add';
$route['titles/titles'] = 'titles/titles';
$route['titles'] = 'titles/index'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:34:17.953

您是否在配置文件中使用自定义路由？

codeigniter使用的通用路由协议是这样的：

```
domain.com/controller/methode/param1/param2/param3 
```

话虽这么说，你的网址

```
siteurl.com/kowmanger/titles/titles/edit/$id 
```

对应于这样的东西：

```
class Kownmanger extends CI_Controller
{
    public function titles($titles, $action, $id)
    {

    }
} 
```

如果您在控制器文件夹中使用子文件夹，我刚才所说的会改变，您能告诉我们您的目录结构是什么吗？

# c++ - 标准头文件中的错误

> ID：10333372
> 
> 赞同：5
> 
> 时间：2012-04-26T12:26:21.670
> 
> 标签：c++, c, syntax, header

我目前收到以下错误：

> c:\program files\microsoft visual studio\vc98\include\iomanip(15) : error C2059: >syntax error : 'namespace'
> 
> c:\program files\microsoft visual studio\vc98\include\iomanip(15) : error C2334: >unexpected token(s) before '{'; 跳过明显的函数体
> 
> c:\program files\microsoft visual studio\vc98\include\math.h(36) : error C2059: syntax >error: 'string'
> 
> c:\program files\microsoft visual studio\vc98\include\math.h(36) : error C2334: unexpected >token(s) before '{'; 跳过明显的函数体

由于它们都在标准库头文件中，因此是只读的，我不知道如何修复它！

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T14:26:53.510

在 C/C++ 中，预处理器在实际解析源代码之前运行，`#include`基本上只是将不同的文件拼接在一起。这样做的一个结果是 C/C++ 非常满意`{`在一个文件中匹配`}`另一个（包含）文件中的 a。当然，从来没有人这样做（或者如果他们这样做，他们应该被枪杀），但是因为 C/C++ 预处理器是如此简单，所以在技术上是允许的。

这样做的一个后果是，您自己的一个文件中的语法错误最终可能看起来像其他文件中的语法错误。`;`当我忘记在类定义之后放置一个时，我经常会遇到这种情况。但是 mismatched `{}`s 可以（如您所见）具有相同的效果。

因此，如果您在某些包含的文件中看到您认为可能不应该存在的错误（例如标准库），那么首先要查看的是该文件之前包含的任何文件。有时重新排列你的`#include`陈述也可以帮助缩小错误的来源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-29T09:36:55.367

视觉工作室：

1.  打开项目的属性页对话框。
2.  单击 C/C++ 文件夹。
3.  单击高级属性页。
4.  显示包括（是）

构建项目，在构建输出中您应该看到包含树。查找第一次出现的错误，然后向上扫描打开每个包含文件（您编写的）以查找缺少大括号“}”的文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-15T09:15:37.200

我遇到了这个错误，但发现问题是我定义的方法的名称已经在 window.h 中定义为宏。所以我不得不#undef 它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-10T17:05:36.390

我在一个学生的代码中遇到了“跳过明显的函数体”错误，并且很难追踪，因为我预计这是一个大括号不匹配。

我的学生有一个成员变量和一个以相同名称声明的成员函数。该函数在变量之后，因此在函数体上解析失败。这与引用预定义宏的漏洞答案中的火最相似。

# ios - 如何通过 UIView 参考获取设备方向？

> ID：10333374
> 
> 赞同：6
> 
> 时间：2012-04-26T12:26:26.477
> 
> 标签：ios, uiview, uiinterfaceorientation

我需要从 ViewController 获取设备方向。**我不能基于**：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation]; 
```

因为它有时会返回未知方向（例如，当设备放在桌子上时）。

我只需要知道**当前 UIView 显示的方向是什么**（是横向左侧还是横向右侧）。当方向改变时，我不需要更新这个值，我只想知道它，当我要求它时。只是一些参考*view.orientation* ;)。有什么可以帮助我的吗？我已经阅读了 UIView 文档，找到了一些对 UIWindow 的参考，但没有什么可以帮助我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T12:31:29.477

您还可以从 UIApplication 获取设备方向，您是否尝试过使用

```
UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T17:49:38.700

UIViewController 有一个属性

```
UIInterfaceOrientation interfaceOrientation; 
```

因此，在您的 UIViewController 中，您可以随时通过以下方式访问设备的当前方向

```
UIInterfaceOrientation myCurrentOrientation = self.interfaceOrientation; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-01T01:14:04.603

斯威夫特版本

```
 let currentOrientation:UIInterfaceOrientation = UIApplication.sharedApplication().statusBarOrientation

    if currentOrientation.isPortrait {

        print("PORTRAIT")

    } else if currentOrientation.isLandscape {

        print("LANDSCAPE")

    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-26T12:32:46.787

以下是执行相同操作的示例代码。有一个名为**deviceOrientation**的变量，它会在被询问时回答设备的当前方向。

```
UIDeviceOrientation deviceOrientation;

- (void)viewWillAppear:(BOOL)animated
{
    deviceOrientation = (UIDeviceOrientation)[[UIApplication sharedApplication] statusBarOrientation];
    [self willAnimateRotationToInterfaceOrientation:deviceOrientation duration:0.5];
}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration
{
    deviceOrientation = (UIDeviceOrientation)interfaceOrientation;
    if(interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight)
    {
        NSLog(@"Landscape");
    }
    else
    {
        NSLog(@"Portrait");
    }
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return TRUE;
} 
```

# php - ORACLE 更新两个 CLOB 列 - 可能的表锁定以进行进一步更新？

> ID：10333375
> 
> 赞同：1
> 
> 时间：2012-04-26T12:26:30.117
> 
> 标签：php, oracle, clob

我需要用两个 CLOB 列更新 ORA 表。

我为此找到了许多解决方案（一个先加上`select x, y into x_loc, y_loc from table for update`然后做一个`dbms_lob.write()`+ `commit`），但我意识到这个很简单：

```
UPDATE table SET
    clob1 = TO_CLOB(VARCHAR2_VALUE),
    clob2 = TO_CLOB(VARCHAR2_VALUE)
WHERE condition 
```

从 PHP 应用程序执行此查询后，当我无法在该表（和/或具体行）上执行任何其他更新时，我遇到了奇怪的行为 - 应用程序只是在另一个更新上挂起（通过调试确认）。当尝试使用`sqldeveloper`它进行更新查询时，似乎没有锁定问题。

CLOB 更新后表/行是否有可能保持锁定？我应该在 CLOB 更新后使用给定的更新查询进行提交吗？如果它在那里，我该如何释放这个锁？

非常感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:17:34.977

您必须提交每个 DML 查询 (INSERT,UPDATE,DELETE)。

是否使用 CLOB 都没有关系。

# linux - 如何在每个样本中从分析器获取完整的堆栈转储以用于火焰图中？

> ID：10333376
> 
> 赞同：3
> 
> 时间：2012-04-26T12:26:32.513
> 
> 标签：linux, arm, profiling, valgrind, stack-trace

[我真的很喜欢使用火焰图](http://dtrace.org/blogs/brendan/2011/12/16/flame-graphs/#mysql)进行分析的想法，因为它有助于消除不需要的函数调用。但是有一个问题，它要求分析器在每次收集样本时都进行完整的堆栈转储。这可以通过 DTrace 或 SystemTap 很容易地完成，但我需要能够在运行 ubuntu 的 ARM 设备上执行此操作（这消除了 DTrace）。我也想在不重新编译内核（消除 SystemTap）的情况下做到这一点。

是否有可能让 Valgrind/Callgrind 或 OProfile（或其他一些可以在 Ubuntu 的 ARM 设备上运行的分析工具）输出类似于：
`dtrace -n 'profile-1001 /pid == 12345 && arg1/ { @[ustack()] = count(); }`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-04T17:28:19.353

试试 Linux perf_events（又名“perf”命令），它是 Linux 主线内核的一部分，通常通过 linux-tools-common（或类似）包安装。我经常用它在 Linux 上创建火焰图。

我写了一些使用 perf 创建火焰图的说明：[http ://www.brendangregg.com/perf.html#FlameGraphs](http://www.brendangregg.com/perf.html#FlameGraphs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:59:35.293

pstack 是由 Mike Dunlavey 建议的，不幸的是，在我应用 ARM 补丁并在 ARM 设备上运行它之后出现了段错误。直到我有时间看它，我找到了以下权宜之计：

[http://www.commandlinefu.com/commands/view/4039/print-stack-trace-of-a-core-file-without-needing-to-enter-gdb-interactively](http://www.commandlinefu.com/commands/view/4039/print-stack-trace-of-a-core-file-without-needing-to-enter-gdb-interactively)

它通过以下命令使用 gdb：`gdb --q --n --ex bt --batch --pid PID`

有点慢但有效。

# javascript - SenchaTouch2 - 监听存储加载事件，设置选项卡面板项“badgeText”

> ID：10333377
> 
> 赞同：2
> 
> 时间：2012-04-26T12:26:32.520
> 
> 标签：javascript, dom-events, sencha-touch-2

我正在尝试构建我的第一个小 Sencha Touch 2 应用程序。我已经创建了一些按预期工作的东西，现在我想创建一些事件处理的东西。

我创建了以下商店：

```
Ext.define('Mobile.store.Blogs', {
    extend: 'Ext.data.Store',

    config: {
    },
    listeners: {
        'load' :  function(store,records,options) {
            store.loaded = true;
            console.log("fired blogCountAvailable");
            store.fireEvent("blogCountAvailable");
        },
        'blogCountAvailable': function(store, records, options) {
            console.log("blogCountAvailable has been fired");
        }
    }
}); 
```

这些东西按预期工作，但现在是下一步。

这是我的标签面板栏的代码：

```
 Ext.create("Ext.tab.Panel", {
        xtype:'mainTabPanelBottom',
        tabBarPosition: 'bottom',
        fullscreen: true,
    items: [
            {
                title: 'Blog',
                iconCls: 'home',
                xtype:'mainpanel'
            },
            {
                title: 'Users',
                iconCls: 'user',
                xtype:'userpanel'
            }
    ],
        listeners: {
            blogCountAvailable: function(tabpanel, newTab) {
                var tab   = newTab.tab,
                            badge = 10;

                tab.setBadge(badge);

                console.log("blogCountAvailable has been fired");
            }
        }
    }); 
```

我现在的问题是如何实现它以将我的自定义事件“触发”`blogCountAvailable`到选项卡面板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:44:52.300

最简单的方法是为您的 TabPanel 设置一个 id，然后：

```
Ext.getCmp('your_TabPanel_id').fireEvent("blogCountAvailable"); 
```

# java - 无法找出 9/30/11 2:58:49 PM EST 的日期格式字符串？

> ID：10333378
> 
> 赞同：0
> 
> 时间：2012-04-26T12:26:36.860
> 
> 标签：java, date, date-format

美国东部时间 2011 年 9 月 30 日下午 2:58:49

这个的Java日期格式是什么？类似“MM/dd/YY HH:MM:SS ???”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:29:28.197

你谷歌了吗？

[http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

该文档的摘录：

```
Date and Time Pattern   Result
"yyyy.MM.dd G 'at' HH:mm:ss z"  2001.07.04 AD at 12:08:56 PDT
"EEE, MMM d, ''yy"  Wed, Jul 4, '01
"h:mm a"    12:08 PM
"hh 'o''clock' a, zzzz" 12 o'clock PM, Pacific Daylight Time
"K:mm a, z" 0:08 PM, PDT
"yyyyy.MMMMM.dd GGG hh:mm aaa"  02001.July.04 AD 12:08 PM
"EEE, d MMM yyyy HH:mm:ss Z"    Wed, 4 Jul 2001 12:08:56 -0700
"yyMMddHHmmssZ" 010704120856-0700 
```

所以，你可以试试这个：

```
"MM/dd/yy hh:mm:ss a z" 
```

# jquery - jQuery克隆输入并删除克隆中的值

> ID：10333385
> 
> 赞同：3
> 
> 时间：2012-04-26T12:26:52.427
> 
> 标签：jquery, forms, input, clone

我要存档的是克隆我的“盒子”并有一个没有值的克隆。所以输入应该是空的。我有这个小提琴，只有函数和 html。希望很明确，你们可以帮助我。

[http://jsfiddle.net/XeELs/117/](http://jsfiddle.net/XeELs/117/)

```
addAddress: function() {
    var cloneCount = 0;
    $copy = $("#scroll .first").first().clone().attr("id", "to-add-first_Clone" + cloneCount).addClass('cloned'); //add a new class cloned to the cloned outerDivs
    $(".clone", "#to-add-first_Clone" + cloneCount).attr("id", "clone_Clone" + cloneCount);
    cloneCount++;
    //check breakpoints
    var $last_bp = $('#scroll .wrap .breakpoint').last();
    var $first = $(".first", $last_bp).length;
    if ($first > 2) {
        //move this into a new breakpoint
        $('#scroll .wrap').append('<div class="breakpoint"/>');
        $last_bp = $('#scroll .wrap .breakpoint').last();
    }
    $last_bp.append($copy);
    this.drawNavigation();
}, 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T13:22:02.877

我认为这是您要尝试做的事情的要点。

[http://jsfiddle.net/XeELs/132/](http://jsfiddle.net/XeELs/132/)

新克隆的框将具有空输入值。删除地址链接智能显示，我添加了创建新“唯一”ID 的逻辑。

# java - 使图像变暗

> ID：10333387
> 
> 赞同：3
> 
> 时间：2012-04-26T12:26:55.527
> 
> 标签：java, image, image-processing

我正在尝试使 java 中的图像变暗，但它却变成了纯黑色。

这是我正在使用的代码..

```
 float[] elements = {factor};

    Kernel kernel = new Kernel(1, 1, elements);
    ConvolveOp op = new ConvolveOp(kernel);

    BufferedImage bufferedImage = new BufferedImage(image.getWidth(), image.getHeight(), image.getType());
    op.filter(image, bufferedImage); 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:42:04.003

我认为您缺少该因子的正确数字，一个非常好的试验方法是使用 Gimp，您可以转到过滤器 -> 通用 -> 卷积矩阵并尝试不同的因子，我可以用因子 0.7 和非常低变得太黑。

让我知道进展如何。

# javascript - 将值传递给函数

> ID：10333389
> 
> 赞同：0
> 
> 时间：2012-04-26T12:26:59.523
> 
> 标签：javascript, jquery, arrays, function, parameter-passing

当我尝试传递此值时，出现此错误

> 09 不是合法的 ECMA-262 八进制常数 [Break On This Error]
> 
> 链接点击（SS-10-04-2012-0199）
> 
> javasc...2-0199）（第 1 行，第 26 列）SS 未定义

不知道这意味着什么，尝试预先将值转换为字符串等，但它根本不会读取

```
for(var i=0; i < resultArray.length; i++){
var temp = resultArray[i].pp_order_details_id;
$('#results').append('<tr><td><a href="javascript:linkClicked(' + temp + ')">' + resultArray[i].pp_order_details_id + '</a></td><td>' + resultArray[i].order_ref + '</td><td>' + resultArray[i].status + '</td></tr>');
} 
```

上面是数据写入表的地方用户应该点击链接，pp_order_details_id应该传递给下面的linkClicked函数

```
function linkClicked(orderno) {
$.post("../../order/get-order.php", {
    orderRef: orderno
}, function (data) {
    if (data.match("set")) { $('#my_order_details').fadeOut("fast").load('index#my_order_details').fadeIn("fast");
    }
});
} 
```

我可能做错了传递的事情，因为我不习惯它，但我想我会问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:30:49.223

从错误消息的外观来看，这是您对以下内容的调用`linkClicked`：

```
linkClicked(SS-10-04-2012-0199) 
```

但是你需要传递一个字符串。注意转义`'`字符的添加：

```
$('#results').append('<tr><td><a href="javascript:linkClicked(\'' + temp + '\')">' //... 
```

这应该会导致调用如下所示：

```
linkClicked('SS-10-04-2012-0199') 
```

# oauth - Google 应用程序脚本 oauth connect 不适用于 trello

> ID：10333390
> 
> 赞同：8
> 
> 时间：2012-04-26T12:26:59.900
> 
> 标签：oauth, google-apps-script, trello

我一直在尝试在[Google 应用程序脚本](https://docs.google.com/macros/)中使用 oAuth来访问 trello 数据，但似乎 OAuthService API 对 oAuth 服务做出了一些假设，并且 trello 不能以这种方式工作。

以下代码有效。它可以访问 twitter（来自 google 的 oauth 教程）：

```
function authorizeToTwitter() {
  var oauthConfig = UrlFetchApp.addOAuthService("twitter");
  oauthConfig.setAccessTokenUrl("https://api.twitter.com/oauth/access_token");
  oauthConfig.setRequestTokenUrl("https://api.twitter.com/oauth/request_token");
  oauthConfig.setAuthorizationUrl("https://api.twitter.com/oauth/authorize");
  oauthConfig.setConsumerKey(<CONSUMER KEY>);
  oauthConfig.setConsumerSecret(<CONSUMER SECRET>);
  var requestData = {
    "method": "GET",
    "oAuthServiceName": "twitter",
    "oAuthUseToken": "always"
  };
  var result = UrlFetchApp.fetch("https://api.twitter.com/1/statuses/mentions.json", requestData);
} 
```

以下代码将让我进入 trello“按确定返回”页面，但 trello 不知道如何重定向回来，所以我进入一个页面，要求我手动复制粘贴令牌（但谷歌不为我提供插入该令牌的方法）

```
function authorizeToTrello() {
  var oauthConfig = UrlFetchApp.addOAuthService("trello");
  oauthConfig.setAccessTokenUrl("https://trello.com/1/OAuthGetAccessToken");
  oauthConfig.setRequestTokenUrl("https://trello.com/1/OAuthGetRequestToken");
  oauthConfig.setAuthorizationUrl("https://trello.com/1/OAuthAuthorizeToken");
  oauthConfig.setConsumerKey(<CONSUMER KEY>);
  oauthConfig.setConsumerSecret(<CONSUMER SECRET>);
  var requestData = {
    "method": "GET",
    "oAuthServiceName": "trello",
    "oAuthUseToken": "always"
  };
  var result = UrlFetchApp.fetch(
      "https://api.trello.com/1/members/me/boards",
      requestData);
} 
```

我试图通过在授权 url 中手动添加我提供给 twitter 的重定向回调来解决这个问题

```
oauthConfig.setAuthorizationUrl("https://trello.com/1/OAuthAuthorizeToken?return_url=https://docs.google.com/macros"); //this is what the tutorial says I should provide to twitter 
```

或者

```
oauthConfig.setAuthorizationUrl("https://trello.com/1/OAuthAuthorizeToken?return_url=https://docs.google.com/macros/externaloauthcallback"); //this is what twitter actually calls when performing the oauth dance 
```

但两者都不起作用。难道我做错了什么？我是否缺少一些我应该提供的配置参数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T16:03:06.530

此行为是由[Trello API 中的错误引起的](https://trello.com/c/2BGCXo35)；Google 正在尝试提供一个`oauth_callback`何时获取其授权令牌，但当您批准令牌请求时，Trello 并未重定向到那里。

此错误已得到解决，并且我已验证以下代码有效：

```
function authorizeToTrello() {
  var oauthConfig = UrlFetchApp.addOAuthService("trello");
  oauthConfig.setAccessTokenUrl("https://trello.com/1/OAuthGetAccessToken");
  oauthConfig.setRequestTokenUrl("https://trello.com/1/OAuthGetRequestToken");
  oauthConfig.setAuthorizationUrl("https://trello.com/1/OAuthAuthorizeToken");

  // Replace these with the values you get from 
  // https://trello.com/1/appKey/generate
  oauthConfig.setConsumerKey("Consumer Key");
  oauthConfig.setConsumerSecret("Consumer Secret");

  var requestData = {
    "method": "GET",
    "oAuthServiceName": "trello",
    "oAuthUseToken": "always"
  };

  var result = UrlFetchApp.fetch(
      "https://api.trello.com/1/members/me/boards",
      requestData);

  Logger.log(result.getContentText());
} 
```

# php - 动态 URL 重写 .htaccess

> ID：10333392
> 
> 赞同：1
> 
> 时间：2012-04-26T12:27:18.037
> 
> 标签：php, .htaccess, url-rewriting, localhost

我是 URlRewriting 的新手，我在重写我的 URL 时遇到了一些问题，我有一个 .php 索引页，其中的内容是根据 url 变量使用 php 填充的。

我的问题是我似乎找不到正确的表达方式来让它工作。对于我的主页，我只发送 1 个变量，例如

```
"index.php?page=home" 
```

但是对于其他页面，我最多使用 4 个变量，例如 "index.php?page=about&content=about-news&id=27&pn=1"

现在我已经让 1 或 2 个单独工作但不能一起使用：

```
RewriteRule ^((.*)+)$ index.php?page=$1 
```

或者

```
RewriteRule ^(.*)/(.*)$ index.php?page=$1&content=$2 
```

过去几天我一直在谷歌和 Stackoverflow 上四处寻找，但我似乎找不到一个可行的解决方案，有没有人知道如何让它工作？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:29:05.467

尝试：

```
#Make sure it's not an actual file
RewriteCond %{REQUEST_FILENAME} !-f 

#Make sure its not a directory
RewriteCond %{REQUEST_FILENAME} !-d 

#Rewrite the request to index.php
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

然后，您可以查看 $_SERVER['REQUEST_URI'] 变量以查看请求的内容。

这应该对你有用，让我知道你的进展如何。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T12:31:58.923

您只需要一次重写：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?route=$1 [L,QSA] 
```

然后在您的 index.php 文件中，您将路线分成几部分：

```
$route = (!isset($_GET['route']))?'':$_GET['route']);
$parts = explode('/', $route);

So your old urls like this:
index.php?page=home 
index.php?page=about&content=about-news&id=27&pn=1
index.php?page=$1
index.php?page=$1&content=$2

Become:
Example: `http://example.com/controller/action/do/value`
or       `http://example.com/$parts[0]/$parts[1]/$parts[2]/$parts[3]/$parts[4]` 
```

保持控制器->动作->执行->值的想法很容易分配路由。

`?page=`将是你的**控制器**

`?content=`将是你的**行动**

`?id=`将是您的**子行动 | 做 | 价值**等

# sql - 在 SQL 中计算 AM 和 PM

> ID：10333394
> 
> 赞同：1
> 
> 时间：2012-04-26T12:27:22.637
> 
> 标签：sql, sql-server

给定这个样本数据集：

```
Date_Time
10/1/2011 12:05:00 AM
10/6/2011 2:25:00 AM
10/3/2011 5:59:00 AM
10/19/2011 6:01:00 PM
11/5/2011 8:30:00 PM
11/30/2011 11:59:00 PM 
```

SQL server（2005或2008）中是否有日期时间函数可以统计这两个时间范围内的记录数？以下是上述数据集的结果。请让我知道是否有网站也显示此内容。非常感谢，伙计们。

```
Midnight-6:00am     6:00pm – Midnight. 
3                   3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:35:18.163

请注意，您希望第二个范围到晚上 11:59，而不是午夜...[`DATEPART()`](http://msdn.microsoft.com/en-us/library/ms174420.aspx)用于获取日期的小时部分，并在`SUM()`满足时使用聚合将每个范围的总数加 1。所以你需要的是 0 到 5 (00:00 - 05:59) 和 18 到 23 (18:00 - 23:59) 之间的时间

```
SELECT
  SUM(CASE WHEN DATEPART(hour, Date_Time) BETWEEN 0 AND 5 THEN 1 ELSE 0 END) AS  [Midnight to 6:00am],
  SUM(CASE WHEN DATEPART(hour, Date_Time) BETWEEN 18 AND 23 THEN 1 ELSE 0 END) AS  [6:00pm to 11:59pm]
FROM your_table 
```

### 更新

以上计算至上午 05:59:59。如果这真的应该算到 06:00:00，您还需要检查 6:00 的各个时间部分。这可能很慢。

```
SELECT
  SUM(CASE WHEN
        DATEPART(hour, Date_Time) BETWEEN 0 AND 5 
        -- Look for 06:00:00 by stripping off the date portion and comparing against a character string
        OR (DATEPART(hour, Date_Time) = 6 AND DATEPART(minute, Date_Time) = 0 AND DATEPART(second, Date_Time) = 0)
      THEN 1 ELSE 0
      END
  ) AS [Midnight to 6:00am],
SUM(CASE WHEN DATEPART(hour, Date_Time) BETWEEN 18 AND 23 THEN 1 ELSE 0 END) AS  [6:00pm to 11:59pm]
FROM your_table 
```

或者，使用起来可能会更快

```
 SUM(CASE WHEN
        DATEPART(hour, Date_Time) BETWEEN 0 AND 5 
        -- Look for 06:00:00 also
        OR CONVERT(VARCHAR, Date_Time, 108) = '06:00:00'
      THEN 1 ELSE 0
      END
  ) AS [Midnight to 6:00am], 
```

# sql - 关于子查询的奇怪访问行为

> ID：10333396
> 
> 赞同：1
> 
> 时间：2012-04-26T12:27:23.207
> 
> 标签：sql, ms-access

我在 Access 中有这段代码：

```
SELECT DISTINCT p.course, p.date
FROM Student s, Participation p
WHERE s.id = d.student AND footballer = NO 
```

当我运行它时，我得到 10 行。所以我下次用它作为子查询：

```
SELECT c.course, c.date
FROM Course c
WHERE NOT EXISTS
(SELECT DISTINCT p.course, p.date
FROM Student s, Participation p
WHERE s.id = d.student AND footballer = NO) 
```

我根本没有得到任何结果。所以我删除了`NOT`in `NOT EXISTS`，我得到了`Course`表中的所有 15 行。所以在我看来，`course`从主查询而不是从子查询中`date`读取的子查询。但这怎么可能，因为我创建了不同的别名，甚至源表也不同（尽管它们都包含名称和的列），我该如何解决这个问题？`Course``Participation``course``date`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:35:11.747

您的子查询与主查询无关。试试这样的东西？

```
SELECT c.course, c.date
  FROM Course c
 WHERE NOT EXISTS (
                   SELECT DISTINCT p.course, p.date
                     FROM Student s INNER JOIN Participation p ON s.id = d.student
                    WHERE footballer = NO
                      AND p.course = c.course
                      AND p.date   = c.date
                  ) 
```

现在，这将接收每条记录`Course`并为每一行运行 NOT EXISTS 检查，通过and字段过滤`Participation`表。`course``date`

您的示例只运行了一次子查询。它返回了 10 条记录，所以`NOT EXISTS`总是失败。

# c# - 如何在 jQuery ajax 上设置 UpdateTargetId

> ID：10333403
> 
> 赞同：4
> 
> 时间：2012-04-26T12:27:48.067
> 
> 标签：c#, jquery, asp.net-mvc-3

我想使用 ajax 渲染局部视图。
当我提交按钮时，必须呈现部分视图。
我可以使用 ActionLink 实现它，但我想通过 JavaScript 调用 Action。
但是下面的代码不起作用。调用 Action 但不呈现局部视图。

**看法**

```
@section script{
<script type="text/javascript">
    function test() {
        $.ajax(
        {
            type: "POST",
            url: "Test",
            data: "",
            success: function (result) { alert("OK!!"); },
            error: function (req, status, error) {
                alert("Damn!!");}
        });

    }
</script>
}

<input type="submit" onclick="test()" />
<div id="Container"> 
```

**控制器**

```
public ActionResult Test()
{
    if (Request.IsAjaxRequest())
    {
        return PartialView("ViewUserControl1");
    }
    return View();
} 
```

**部分视图 ViewUserControl1**

```
Hello world 
```

**这有效，但不是我想做的**

```
@Ajax.ActionLink("click me", "Test", new AjaxOptions { UpdateTargetId = "Container" }) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T13:36:47.887

您的网址可能不正确。它取决于您在 Global.asax 中定义的路由设置。但如果您的操作在 HomeController 中，通常您的 url 应该看起来像“/Home/Test”。最好使用 url helper 来获取操作的 url：

```
...
url: '@Url.Action("Test", "Home")'
... 
```

您可以通过以下方式渲染您的部分：

```
...
success: function (result) { $('#elementId').html(result) },
... 
```

此外，如果您想更新块，请不要忘记先清除它，如果它包含带有不显眼验证的表单 - 解析表单。

# sql - 保留事件行中的主键需要恢复

> ID：10333404
> 
> 赞同：3
> 
> 时间：2012-04-26T12:27:48.887
> 
> 标签：sql, sql-server, tsql, primary-key, database-restore

我有一个具有一对多和多对多关系的 SQL 数据库。大多数关系都基于自动递增字段“ID”。在某些情况下，当表中的行被删除时，我会先将多个表中的所有数据导出到 XML 文件中，然后再从数据库中删除数据，以防以后需要恢复这些数据。

如何处理数据库 ID？我可以简单地将数据恢复到现有数据库中并且 Id 和关系将保持不变吗？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:43:34.080

如果您使用`SET IDENTITY_INSERT [table] ON`

```
SET IDENTITY_INSERT yourTable ON

INSERT INTO
  yourTable (
    id,
    field1,
    field2
  )
SELECT
  id,
  field1,
  field2
FROM
  yourBackup

SET IDENTITY_INSERT yourTable OFF 
```

请注意，您必须在 INSERT 语句中指定*所有*字段，包括 ID。

使用主键重新创建记录后，您可以在使用它们作为外键的表中重新创建记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:48:03.160

简短的回答：是的。SQL Server 中有一个针对每个表设置的标志，指示是否允许为标识列指定值。默认情况下它是关闭的。您需要在重新插入数据时临时启用它：

```
DECLARE @Id int
DECLARE @Name varchar(20) = 'Dave'

INSERT INTO Example(Name) VALUES(@Name)

SET @Id = SCOPE_IDENTITY()

DELETE FROM Example WHERE Id = @Id

SET IDENTITY_INSERT Example ON

INSERT INTO Example(Id, Name) VALUES(@Id, @Name)

SET IDENTITY_INSERT Example OFF 
```

请注意，为了满足任何外键关系，您需要将数据重新插入到“多”表之前的“一”表中。

# html - 更改页面大小时删除图像

> ID：10333405
> 
> 赞同：2
> 
> 时间：2012-04-26T12:27:49.397
> 
> 标签：html, css, image, image-size

我有一个关于 html 和 css 的问题（纯 html 和 css - 没有 JavaScript 或 JQuery）

我的页面上有 2 列（第一个 - 宽度：35%（页面），第二个 - 宽度：65%（页面））。第一列中有一张图片 - 300px x 300px。而且，我正在更改页面的大小：

*   当第一列宽于 300 像素时 - 图像应为 300 像素 x 300 像素
*   当第一列宽于 100 像素且小于 300 像素时 - 图像应为 100 像素 x 100 像素 - 当第一列窄于 100 像素时 - 图像应消失。

使用 JavaScript 很容易，但我只能在 HTML + CSS 中使用。

有人知道该怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:46:17.700

您可以使用 CSS3 媒体查询来做到这一点，但是这当然不是所有浏览器都支持的（这只是给定的）：

**示例：** 如果查看区域小于 600 像素，将应用以下 CSS。

```
@media screen and (max-width: 600px) {
  .class {
    background: #ccc;
  }
} 
```

**参考：**
[http ://webdesignerwall.com/tutorials/css3-media-queries](http://webdesignerwall.com/tutorials/css3-media-queries)

# jquery - 使用 jQuery Ajax 的安全风险

> ID：10333409
> 
> 赞同：10
> 
> 时间：2012-04-26T12:28:02.787
> 
> 标签：jquery, ajax, security

这是一个困扰我一段时间的问题，因此我正在寻找意见和解决方案，以遏制该应用程序存在安全风险的可能性。

我用 jQuery 做很多事情，但主要是用它来处理 jQuery 对话窗口。很多时候需要从表单上的字段中获取一个值，将该信息与 .serialize() 命令连接起来，然后将其传递给 jQuery ajax 调用，以便转到 PHP 文件进行数据库交互。

我的问题来了（最后），

**'猜测' PHP 处理的 url 看起来像什么不是很容易吗？**
您可以在现代浏览器中打开源代码并单击链接以查看包含 ajax 调用的完整 JavaScript 文件。

我可能会缩小 JavaScript 文件以进行混淆，但这不是一种可以依赖的安全形式。

我正在使用 PDP 进行数据库访问，并使用准备好的语句进行 SQL 注入攻击，但是如果有人花时间查看，他们不能只是形成一个有效的 url 将其发送到数据库并插入他们想要的内容吗？

我不是在谈论将数据库黑客攻击到钢铁信息，我更多的是在谈论插入恶意信息，就好像数据是从应用程序本身添加的一样。考虑将 50 美元的东西添加到您的购物车，只需 25 美元。

如果它就像将 ajax 请求从 GET 转换为 POST 并更改我的 PHP 文件一样简单？

**编辑：此人已登录并经过正确身份验证。**

只是想知道那里的其他人在做什么。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T12:30:30.617

你说得很对，任何稍微懂技术的人都可以识别任何 web 应用程序的公共服务器端点。他们甚至不需要看代码。他们可以只使用他们的 webkit/firebug 来跟踪请求，或者使用像 Charles 这样的程序来监控网络活动。

这就是您需要在服务器端代码中进行 **身份验证**和**授权处理的原因。**

**身份验证**通常由用户名和密码处理；这是验证用户是谁的行为。

**授权**可以由服务器上的角色处理，并且是检查以确保用户可以做他们想做的事情。

这两种机制到位，即使用户知道一个url，他们仍然需要“登录”并有权做他们想做的事。

想想看。如果您在线查看您的银行账户信息，您可以轻松识别加载您的账户信息的请求。如果没有这些机制，是什么阻止您简单地更改您传递给服务器的帐户 ID 以尝试获取其他人的帐户信息？通过身份验证/授权，服务器知道即使它收到加载某些数据的请求，它也可以检查用户的详细信息以查看他们是否有权获取该数据，并拒绝该请求。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-26T12:32:04.510

即使您从 GET 切换到 POST，任何有兴趣的人仍然可以很容易地查看（和更改）任何传递到您的服务器的参数。但关键在于：即使您根本不使用 AJAX，而是使用普通的旧表单，*仍然*非常容易查看和编辑传递给服务器的任何参数。

在危急情况下，您永远不能完全依赖从客户那里收到的信息。

例如，如果您要向购物车中添加商品，只需将商品的 ID 和数量传递给您的服务器。不要从您的客户那里获取价格详细信息，而是从您的数据库中获取。如果有人试图破解您并编辑要发送的商品 ID 或数量，最糟糕的情况是他们最终购买了他们不想要的东西；完全是他们的问题。（但出于同样的原因，如果它是有限的报价，您将需要验证您收到的数量不大于您允许任何一位客户购买的数量，例如）。

因此，在一天结束时，您始终是开发人员必须决定您希望用户控制哪些值，并在您的服务器端验证您没有收到任何超出用户应有范围的请求能够做到。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T12:33:44.663

您永远不能依赖来自客户端的任何操作或数据，不仅与 jQuery 有关。

您必须处理服务器端的各种安全问题。始终仔细检查来自用户的数据（一个在客户端用于减少性能请求的数量；另一个在服务器端用于实际确认）。

请求类型（GET 或 POST）其实并不重要，可以很容易地模拟出来。在用户尝试以 25 美元的价格添加 50 美元的商品后，您应该检查您的数据库并确认商品的实际价格。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-27T04:54:46.857

是的，您需要服务器端安全性来验证每个数据都发送到您的服务器。例如，您在 javascript/jquery 中验证数据：

```
if($(this).val() != ""){
   // post to my server page (mypage.cfm/php/asp)
} 
```

但是如果你不保护你的服务器页面，我可以很容易地将空数据发布到你的服务器并避免使用 javascript，所以你需要使用另一个验证脚本来保护服务器页面，例如：

```
<cfif val is "">
  //dont post to my server ...
</cfif> 
```

有时它是双重工作，但我们有时都会面对它......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-26T12:35:13.010

您永远不应该以这种方式编写代码，价格是从客户端单独传输的，因为任何人都可以发送价格 = 0 或 0.01 的数据以获取任何数量的商品/服务或其他任何东西。

更笼统地说：永远不要相信客户数据。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-14T08:11:41.697

数据库的风险通常是：恶意数据、SQL 注入、CSRF。

缩小/丑化你的 javascript 会有所帮助。但是无论您做什么，您的用户都可以轻松捕获他们自己的请求数据。并且没有明确的方法可以防止用户浏览这些乱七八糟的代码。

只有当用户知道您的所有源代码和配置，但仍无法破解您时，安全才是真正的。

没有简单的安全解决方案。以下是在大多数情况下避免出现问题的一些一般做法：

**使用 HTTPS 和 POST 请求。** 通过 HTTPS 的 POST 请求，请求数据被加密。URL 已公开，但通常没问题。这可以防止中间人攻击并大大减少隐私问题（例如密码/信用泄露）。如果您使用 GET 请求，您的所有数据都将作为 URL 中的查询字符串传递。这意味着为第三方更改您的数据的好机会。

**服务器端验证** 始终在服务器端验证数据。用户可能是恶意的，并且客户端可能存在错误。例如，计算服务器端的总价格，而不是客户端。否则，用户可能会在此处放置 0。

**访问权限控制 AKA Authorization** 对允许的操作设置限制，并限制其有效范围。例如，不允许用户代他人下订单。并且不要让他们删除他们的行动历史。

**生成令牌以防止 CSRF** 一些库可以防止 CSRF。或者你可以实现你自己的。主要概念是生成一个随机令牌并请求客户端将其传回。这可以防止其他网站触发对您服务器的请求（使用您的客户端凭据）

**正确备份和** 登录 定期备份您的数据库将有助于从灾难中恢复（是的，它们会发生）并通过日志模块跟踪用户所做的事情。

# ruby-on-rails-3 - 在 Rails 3 的视图中对记录进行分组？

> ID：10333411
> 
> 赞同：2
> 
> 时间：2012-04-26T12:28:08.053
> 
> 标签：ruby-on-rails-3, model, group-by, records

我的 Rails 3 应用程序中有以下代码：

**显示视图（来自另一个名为 animal.rb 的模型）**

```
 <% @animal.labs.each do |lab| %>
    <li>
      <%= lab.TestDone.strftime("%d %b. %Y") %> 
      <h5><%= lab.TestType %></h5>
      <h6><%= lab.TestLower %></h6> 
      <b><%= lab.TestResult %></b> 
      <h6><%= lab.TestUpper %></h6>
    </li>
<% end %> 
```

**实验室模型**

```
belongs_to :animal
default_scope :order => "TestDone DESC", :group => "TestDone" 
```

上面的代码成功地将所有结果按日期分组。但是，它只显示日期之后每个值的第一个。

例如，如果输出最初（分组之前）是这样的：

```
<li>
 26 April 2012
 <h5>Glucose</h5>
 <h6>1.0</h6>
 <b>1.8</b>
 <h6>2.0</h6>
</li>

<li>
 26 April 2012
 <h5>WBC</h5>
 <h6>1.1</h6>
 <b>2.8</b>
 <h6>3.0</h6>
</li>

<li>
 26 April 2012
 <h5>ABC</h5>
 <h6>1.0</h6>
 <b>1.6</b>
 <h6>2.0</h6>
</li> 
```

那么它会在分组后输出以下内容：

```
<li>
 26 April 2012
 <h5>Glucose</h5>
 <h6>1.0</h6>
 <b>1.8</b>
 <h6>2.0</h6>
</li> 
```

产生这样的东西的正确方法是什么：

```
<li>26 April 2012</li>
<li>
  <h5>Glucose</h5>
  <h6>1.0</h6>
  <b>1.8</b>
  <h6>2.0</h6>
</li>
<li>
 <h5>WBC</h5>
 <h6>1.1</h6>
 <b>2.8</b>
 <h6>3.0</h6>
</li>
<li>
 <h5>ABC</h5>
 <h6>1.0</h6>
 <b>1.6</b>
 <h6>2.0</h6>
</li> 
```

所以我有一个日期标题，然后下面列出了该日期的每条记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T16:44:48.770

一种更简单的方法是`group_by`像这样使用：

```
 <% @animal.labs.group_by{|l| l.TestDone.strftime("%d %b. %Y") }.each do |testdate,labs| %>
   <li><%= testdate %></li>
   <% labs.each do |lab| %>
     <li>
       <h5><%= lab.TestType %></h5>
       <h6><%= lab.TestLower %></h6> 
       <b><%= lab.TestResult %></b> 
       <h6><%= lab.TestUpper %></h6>
     </li>
   <% end %>
 <% end %> 
```

[http://api.rubyonrails.org/classes/Enumerable.html#method-i-group_by](http://api.rubyonrails.org/classes/Enumerable.html#method-i-group_by)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:48:00.647

分组不会按照您想要的方式工作。首先，您不应该将它分组到您的 default_scope 中，但您可以在视图或控制器中使用一些聚合。

模型：

```
default_scope :order => "TestDone DESC" 
```

看法：

```
<% prev = nil %>
<% @animal.labs.each do |lab| %>
    <%= "</ul></li>" if prev != nil && prev != lab.TestDone %>
    <%= "<li>"+lab.TestDone.strftime("%d %b. %Y")+"<ul>" if prev != lab.TestDone %>
      <li>
        <h5><%= lab.TestType %></h5>
        <h6><%= lab.TestLower %></h6> 
        <b><%= lab.TestResult %></b> 
        <h6><%= lab.TestUpper %></h6>
      </li>
    <% prev = lab.TestDone %>
<% end %>
<%= "</ul></li>" if prev != nil %> 
```

不是最漂亮的解决方案，但它基于您的代码。基本上，您需要存储最后一个元素的日期，以便将其与实际元素的日期进行比较。如果它们不同，则必须显示新日期。因为它们按日期排序，所以具有相同日期的元素彼此接近。

我想这就是你要找的。

# wpf - 如何将方法绑定到 HoverButton？

> ID：10333417
> 
> 赞同：2
> 
> 时间：2012-04-26T12:28:46.937
> 
> 标签：wpf, binding, kinect, icommand

我一直在寻找几个小时，但我找不到任何有用的东西。任何帮助表示赞赏！

我正在使用带有 Coding4Fun 工具包和 MVVM 模式的 WPF 编写 Kinect 应用程序。

我想将所有与 kinect 相关的逻辑放在 ViewModel 中，并将这些方法绑定到 HoverButton（在 C4F 工具包中找到）。普通按钮具有“命令”属性，但 HoverButton 没有。

简而言之：

我想将 HoverButton 的单击事件绑定到我的 ViewModel 中的方法。

**我的 XAML：**

```
<Window x:Class="KinectTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:fun="clr-namespace:Coding4Fun.Kinect.Wpf.Controls;assembly=Coding4Fun.Kinect.Wpf" Title="MainWindow" Height="350" Width="525"
    Loaded="WindowLoaded"
    Closed="WindowClosed"
    Cursor="None"
    >
<Grid Name="MainGrid" MouseMove="GridHoverMouseMove" DataContext="_viewModel">

    <Canvas Name="SkeletonCanvas" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Background="Black">
        <fun:HoverButton Name="KinectUp" ImageSource="/Images/blue_glass.png" ActiveImageSource="/Images/blue_glass.png" ImageSize="100" Canvas.Top="26" TimeInterval="1000">

        </fun:HoverButton>
        <fun:HoverButton Name="KinectDown" ImageSource="/Images/red_glass.png" ActiveImageSource="/Images/red_glass.png" ImageSize="100" Canvas.Bottom="26" TimeInterval="1000"/>

    </Canvas>
    <Image Name="ColorImage" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="120" Height="120"></Image>
            <TextBlock Name="Notification" Foreground="White" FontSize="50" VerticalAlignment="Top" HorizontalAlignment="Stretch" TextAlignment="Center" Text="{Binding Path=Notification, Mode=TwoWay}"></TextBlock>
    <Canvas Name="CanvMouse" Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
        <Image Name="imgMouse" Width="70" Source="/Images/handround_green.png"></Image>
    </Canvas>
</Grid>
</Window> 
```

**我的视图模型：**

```
internal class MainViewModel : INotifyPropertyChanged
{

    public event PropertyChangedEventHandler PropertyChanged;
    public ICommand KinectUpClick { get; private set; }
    public ICommand KinectDownClick { get; private set; }

    private string _notification = "Hello";
    public SensorHelper SensorHelper { get; set; }

    public string Notification
    {
        get { return _notification; }
        set
        {
            _notification = value;
            PropertyChanged(this, new PropertyChangedEventArgs("Notification"));
        }
    }

    public MainViewModel()
    {
        KinectUpClick = new RelayCommand(PerformKinectUpClick, CanKinectUpClick);
        KinectDownClick = new RelayCommand(PerformKinectDownClick, CanKinectDownClick);

    }

    private bool CanKinectUpClick(object parameter)
    {
        return SensorHelper.CanMoveUp;
    }

    private bool CanKinectDownClick(object parameter)
    {
        return SensorHelper.CanMoveDown;
    }

    private void PerformKinectUpClick(object parameter)
    {

        ThreadPool.QueueUserWorkItem((o) =>
        {
            Notification = "Kinect goes up!";
            SensorHelper.MoveAngle(5);
            Notification = "Kinect ready...";
        });
    }

    private void PerformKinectDownClick(object parameter)
    {
        ThreadPool.QueueUserWorkItem((o) =>
        {
            Notification = "Kinect goes down!";
            SensorHelper.MoveAngle(-5);
            Notification = "Kinect ready...";
        });
        ;
    }
}
} 
```

**我的代码隐藏：**

```
public partial class MainWindow : Window
{
    private readonly MainViewModel _viewModel;
    private SensorHelper _sensorHelper;

    public MainWindow()
    {
        InitializeComponent();
        _viewModel = new MainViewModel();
        MainGrid.DataContext = _viewModel;
    }

    private void WindowLoaded(object sender, RoutedEventArgs e)
    {
        try
        {
            _sensorHelper = new SensorHelper();
        }
        catch (Exception exception)
        {
            MessageBox.Show(exception.Message);
        }
        _viewModel.SensorHelper = _sensorHelper;
        _sensorHelper.InitializeSkeleton(ref SkeletonCanvas);
        //_sensorHelper.CaptureMouse(CanvMouse);
        _sensorHelper.InitializeColorFrame(ColorImage);
        _sensorHelper.StartKinect();
    }

    private void WindowClosed(object sender, EventArgs eventArgs)
    {
        _sensorHelper.StopKinect();
    }

    private void GridHoverMouseMove(object sender, MouseEventArgs e)
    {
        imgMouse.SetValue(Canvas.LeftProperty, e.GetPosition(CanvMouse).X - imgMouse.ActualWidth/2);
        imgMouse.SetValue(Canvas.TopProperty, e.GetPosition(CanvMouse).Y - imgMouse.ActualHeight/2);

        MouseHelper.CheckButton(KinectUp, imgMouse);
        MouseHelper.CheckButton(KinectDown, imgMouse);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:38:06.970

Okay, very simple, what you'll have to do is bind an ICommand/Command to an Event by using an EventToCommand which can be found in the MVVMLight Toolkit.

You can use Blend for that as well

Simple example :

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" xmlns:GalaSoft_MvvmLight_Command="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.Extras.WPF4"
    x:Class="TestProject.Window5"
    x:Name="Window"
    Title="Window5"
    Width="640" Height="480">

    <Grid x:Name="LayoutRoot">
        <Button Content="Button" HorizontalAlignment="Left" Height="69" Margin="92,117,0,0" VerticalAlignment="Top" Width="206">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Click">
                    <GalaSoft_MvvmLight_Command:EventToCommand Command="{Binding Kinect.MyCommand, Source={StaticResource Locator}}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </Button>
    </Grid>
</Window> 
```

# javascript - 如何在html中的图像上写文字

> ID：10333418
> 
> 赞同：1
> 
> 时间：2012-04-26T12:28:52.217
> 
> 标签：javascript, html, css

我们是否可以使用 html 或 javascript 在图像上编写文本。

我已经做到了

创建了一个 em 标签并在其中创建跨度，现在我们可以在跨度中写入任何文本并调整 em 标签的位置，使其出现在图像上。将 em 标签的 z-index 设置为比图像更大的值。然后看起来文本被写在图像上。

但我想提供一个选项，访问者可以使用它来编辑文本。我该怎么做？

代码示例：-

```
$("#em1").html("<p><span>Hi I am</span><br>
<span> Trying to </span><br><br>
<span> To write text</span></p>");

#em1{
    display: block;
    /*border: 1px solid black;*/
    position: absolute;
    top: 160px;
    right: 145px;
    z-index : 10;
} 
```

我正在使用背景（空白 - 上面没有写任何东西）图像

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T12:33:06.180

设置元素的`contenteditable`属性。`em`您可能需要告知用户可食用性，因为人们通常不会期望它，并且视觉外观中没有任何暗示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:50:49.663

你可以有一个文本区域

```
`<textarea  class='abc' >Hello Boys</textarea>`
```

`应用了一些CSS。`

 ````
`.abc{

background: url('http://www.bzfusion.net/skymaps/sky_englishspring.jpg') no-repeat; 
background-color:red; 
width:300px;

    height:500px;
}​` 
```

 `* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:32:27.283

这种特性的一个好的做法是在服务器端进行绘图。如果您真的需要在客户端上绘图，请使用 HTML5 画布。

如果您需要保存该图像，请阅读本文： [http ://www.nihilogic.dk/labs/canvas2image/](http://www.nihilogic.dk/labs/canvas2image/)``

# javascript - 对象对象不能转换为字符串

> ID：10333427
> 
> 赞同：0
> 
> 时间：2012-04-26T12:29:23.387
> 
> 标签：javascript, android, json, cordova, stringify

我正在尝试使用 Android 上的电话间隙访问移动联系人。我访问联系人并在下拉框中显示它们，然后用户应该选择所需的联系人，然后该联系人应该显示在文本框中。

现在，当我单击联系人列表中的一个联系人时，文本框的值将更改为 [object object]。

我试过了：

```
 JSON.stringify(data.value); 
```

但它只是将 [object object] 更改为“[object object]”。

我试过了：

```
 data.value.tostring(); 
```

&

```
 data.value.formatted; 
```

但随后输出未定义。

那是我更改文本框内容的 jS 行：

```
 document.getElementById ("friendName").value = "/*Stringified data is written here*/; 
```

那么您知道如何将对象对象更改为普通的可读字符串吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:18:13.297

如果您的“数据”对象是[联系人](http://docs.phonegap.com/en/1.6.1/cordova_contacts_contacts.md.html#Contact)类型，那么您应该使用 data.displayName 或 data.name.formatted 如果您想要联系人名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:04:42.797

看起来您正在使用的联系人对象没有`toString()`实现；默认的 JavaScript`toString()`会给你你得到的结果。您将必须编写一个函数来提取所需的成员值并创建一个字符串。或者，您可以添加 a `toString()`，但我认为这不是最佳选择，因为该`Contact`对象似乎来自第三方 Cordova，正如@Simon MacDonald 的回答中所确定的那样。

# iphone - iPhone：异步 HEAD 方法

> ID：10333428
> 
> 赞同：2
> 
> 时间：2012-04-26T12:29:27.883
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios5

我在这里很新。我试图从网络服务器更新文件的内容，只有当它发生变化时。我在这里找到了一个在 NSURLconnection 中使用同步连接的代码示例。是否可以异步执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:43:05.987

`NSURLConnection`有`sendSynchronousRequest:returningResponse:error:`同步连接的方法。它还有一个`sendAsynchronousRequest:queue:completionHandler:`异步连接的方法。您需要为`completionHandler`参数创建一个块，用于处理来自 Web 服务器的响应。

还：

*   `initWithRequest:delegate:`
*   `initWithRequest:delegate:startImmediately:`
*   `start`

可用于异步使用。你需要实现一些方法`NSURLConnectionDelegate`来处理异步响应。

请参考[NSURLConnection 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)和[NSURLConnectionDelegate 协议参考](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-26T12:47:23.050

我认为[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use)是最简单的解决方案：

为您设置`request`方法`ASIHTTPRequest`

```
// HTTP method to use (eg: GET / POST / PUT / DELETE / HEAD etc). Defaults to GET
NSString *requestMethod; 
```

或者您可以使用[下载缓存](http://allseeing-i.com/ASIHTTPRequest/How-to-use#using_a_download_cache)

> ASIHTTPRequest 可以自动将下载的数据存储在缓存中以供以后使用。这在许多情况下都有帮助...

# iphone - 如何移动导航栏图像？

> ID：10333437
> 
> 赞同：0
> 
> 时间：2012-04-26T12:29:49.223
> 
> 标签：iphone, xcode, uiimageview, uinavigationbar

我想在导航栏的左侧设置图像。我参考了一些教程，但大多数都说*使用按钮图像将图像移到左侧*。是否有任何代码可以将图像作为图像视图而不是按钮图像向左移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:55:42.267

您可以通过在导航栏上添加您的 imageview 来做到这一点。请参阅下面的代码它对我来说工作正常

```
bar = [self.navigationController navigationBar];    
    [bar setBackgroundColor:[UIColor clearColor]];
    barImg=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"navImg.png"]];
    [bar addSubview:barImg];

    tick_img_lbl=[[UIImageView alloc]initWithFrame:CGRectMake(86, 6,34, 33)];
    tick_img_lbl.image=[UIImage imageNamed:@"tick-1.png"];
    [bar addSubview:tick_img_lbl];
    [tick_img_lbl release]; 
```

这里的**栏**是 UINavigationBar。我在导航栏中添加图像，然后在指定坐标中添加图像视图。试试这个，让我知道是否需要任何澄清..

# java - 如何以这种特殊方式在 Android 中使用微调器？

> ID：10333440
> 
> 赞同：1
> 
> 时间：2012-04-26T12:29:58.363
> 
> 标签：java, android, spinner, adapter

所以，我有一个具有名称和 ID 的 ArrayList

```
Gil 232
Asty 2423 and so on. 
```

为了在微调器中使用它，我所做的是创建两个单独的字符串数组列表。一个包含名称，另一个包含相应的 ID。所以，一旦用户被选中，我就会从该位置获取相应的 id。

我不知道如何做最后一部分。至于，如何获得位置？>`parent.getItemAtPosition(pos).toString();` 这再次给了我名称，而不是名称在 ArrayList 中的位置，我可以使用它从另一个列表中检索 ID。怎么做？而且，他们是更好的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:38:47.220

```
public class User {
    public int id;
    public String name;
} 
```

* * *

```
public class CustomAdapter extends ArrayAdapter<Data> implements Spinner
                                                      .OnItemSelectedListener {
    @Override
    public View getView(int position, View convertView, ViewGroup parent){
        LayoutInflater inflater = getLayoutInflater();
        View view = inflater.inflate(android.R.layout.simple_spinner_item,
                        parent, false);
        Data data = getItem(position);
        // Do something with data and view here
        return view;
    }

    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, 
                                                int position, long arg4) {
        Data data = getItem(position);
        // Do something with data here
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
    }

} 
```

Then create an `ArrayList<Data>` and use with your `CustomAdapter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:34:31.133

该`pos`变量是从 Spinner 中选择的项目的位置，因此您可以使用该位置来获取选择的相应名称的 id（来自第二个 ArrayList）。

作为替代方案，您还可以创建一个`HashMap<String,String> map` 并在该地图中放置值，`map.put(name,id);`这样当用户从 Spinner 选择值时，您将选择名称。然后使用地图获取相应的 id

```
like String id = map.get(selected_name); 
```

希望它会有所帮助。

# python - 'pydoc -w EXPRESSIONS' 不起作用，但 'pydoc EXPRESSIONS' 起作用。为什么？（所有大写的帮助主题）

> ID：10333444
> 
> 赞同：1
> 
> 时间：2012-04-26T12:30:16.923
> 
> 标签：python, pydoc

`pydoc EXPRESSIONS`工作得很好，但`pydoc -w EXPRESSIONS`没有。这是为什么？（将 `w`输出写入 html 文件的选项）对于其他大写帮助主题（例如 FORMATTING 或 TUPLELITERALS）也是如此。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:40:19.713

如果您查看[源代码](http://hg.python.org/cpython/file/2.7/Lib/pydoc.py)，您可以看到[当使用开关“-w”时，](http://hg.python.org/cpython/file/2.7/Lib/pydoc.py#l2311) pydoc 使用函数 writedoc，[否则](http://hg.python.org/cpython/file/2.7/Lib/pydoc.py#l2325)使用类 Helper。在 Helper-class EXPRESSIONS 中定义在第[1666](http://hg.python.org/cpython/file/2.7/Lib/pydoc.py#l1666)行。函数 writedoc 不使用它，也不使用 Helper 类。

[FORMATTING](http://hg.python.org/cpython/file/2.7/Lib/pydoc.py#l1644)和[TUPLELITERALS](http://hg.python.org/cpython/file/2.7/Lib/pydoc.py#l1700)相同

在我看来，可能有资格获得错误报告。

# javascript - 在 javascript 中访问 Backbone js 模型

> ID：10333447
> 
> 赞同：1
> 
> 时间：2012-04-26T12:30:30.703
> 
> 标签：javascript, backbone.js

是否可以在 javascript 中访问 Backbone.js 模型的属性或函数？如果可以的话怎么做？？

我的模型：

> ```
> var TimeZone = Backbone.Model.extend({
>     defaults:{
>         timeZoneID : 'EST5EDT',
>         timeZoneShortForm : "ET",
>         timeZoneLongForm : "Eastern Time",
>      }
>    }); 
> ```

Javascript

> ```
>  getTimeZoneId :function(TimeZone)          
>     {
>            //here for given TimeZone model.. i have to acess the timeZoneID
>     } 
> ```

现在我必须访问 timeZoneID .. 这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:33:25.990

我假设您正在尝试访问以下实例`TimeZone`：

```
var timeZone = new TimeZone();
timeZone.get('timeZoneID'); 
```

[http://documentcloud.github.com/backbone/#Model-get](http://documentcloud.github.com/backbone/#Model-get)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:41:08.857

请注意，Backbone.js 是一个 JavaScript 框架，因此您的 Backbone 模型是 JavaScript，就像您的`getTimeZoneId`函数一样。

`Backbone.Model.extend()`创建一个模型构造函数，您应该使用它创建实例（例如`var mymodel = new TimeZone();`）。

从您的问题中不清楚您是要获取`timeZoneID`模型实例的，还是`timeZoneID`要从原型模型对象的`defaults`对象中获取属性。`TimeZone`

如果您有一个`TimeZone`名为 的实例`mymodel`，您可以像这样获取它的 timeZoneID：

```
 mymodel.get('timeZoneID'); 
```

但是，您不能（我不认为）`defaults`检查`TimeZone`. `Backbone.Model.extend()`返回一个不公开传递给它的对象的任何属性的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:40:22.777

就像 ponzano 所说，您似乎想要以下内容：

```
getTimeZoneId :function(timeZone){
  return timeZone.get('timeZoneID');
} 
```

但是请注意，`timeZone`函数参数是小写的。不要使用大写字母，否则会与模型“class”混淆。

当然，正弦 Backbone 已经定义了 getter 和 setter，你可能根本不需要额外的功能......

此外，也许您不应该`var`在模型定义的前面加上 ，以便它成为全局命名空间的一部分，并且在您的应用程序中随处可见。

# android - 如何支持手机和平板电脑的apk

> ID：10333450
> 
> 赞同：-1
> 
> 时间：2012-04-26T12:30:36.237
> 
> 标签：android

```
 i am developed one apk for mobile(4 inch).. 
    same apk i can put tablet means total gui changed ..
    i want my apk can put any mobile or any tablet . the gui cannot changed .. 
    please how to achieve this problem..please suggest me 
```

我的应用程序 ui 可以根据分辨率更改什么屏幕分辨率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:33:54.147

请参阅 [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

您需要了解所有信息，以确保您的应用在所有设备上看起来都很棒。这几乎没有你想象的那么容易。

# python - 用python读取标签中有xmlns的XML文件

> ID：10333454
> 
> 赞同：4
> 
> 时间：2012-04-26T12:30:59.783
> 
> 标签：python, xml, xml-namespaces

我正在尝试从 xml 文件中读取元素以添加新元素。

我试图找到的标签包含 xmlns。

它看起来像这样：

```
<labcore.logging.service defaultSystemIdentificationCode="??" xmlns="http://schemas.com/labcore/configuration">
<storage databaseName="COMIT" storageType="Oracle" />
<logEventDefinitions>

            <logEventDefinition assembly="IM.LogEventDefinitions" />                    
            <logEventDefinition assembly="BarcodeEntry.LogEventDefinitions" />                  
            <logEventDefinition assembly="MaintenanceScheduling.ActivityLog.Messages.LogEventDefinitions" />
            <logEventDefinition assembly="InCore.LogEventDefinitions" />    

  <logEventDefinition assembly="LogEventPackage.LogEventDefinitions" />
</logEventDefinitions> 
```

我的python代码如下所示：

```
import xml.etree.ElementTree as xml

def modifyComitLoggingConfigFile(filePath, fileName):

    path = filePath+"\\"+fileName

    IM = xml.Element("logEventDefinition")
    IM.attrib["assembly"] = "IM.LogEventDefinitions"

    BarcodeEntry = xml.Element("logEventDefinition")
    BarcodeEntry.attrib["assembly"] = "BarcodeEntry.LogEventDefinitions"

    MaintenanceScheduling = xml.Element("logEventDefinition")
    MaintenanceScheduling.attrib["assembly"] = "MaintenanceScheduling.ActivityLog.Messages.LogEventDefinitions"

    RTCosmo3 = xml.Element("logEventDefinition")
    RTCosmo3.attrib["assembly"] = "InCore.LogEventDefinitions"

    tree = xml.parse(path)
    rootElement = tree.getroot()

    loggingTag = rootElement.find("labcore.logging.service")
    print "loggingTag"
    print loggingTag
    print

    logEventDefinitionsTag = loggingTag.find("logEventDefinitions")
    print "logEventDefinitionsTag"
    print logEventDefinitionsTag
    print

    logEventDefinitionsTag.insert(0, RTCosmo3)
    logEventDefinitionsTag.insert(0, MaintenanceScheduling)
    logEventDefinitionsTag.insert(0, BarcodeEntry)        
    logEventDefinitionsTag.insert(0, IM)

    print "definitionfilesTag"
    print logEventDefinitionsTag
    print

    print "xml.tostring of definitionfilesTag"
    print xml.tostringlist(logEventDefinitionsTag)
    print

    tree.write(path+"1")
    return 
```

并在以下行：

```
import xml.etree.ElementTree as xml

def modifyComitLoggingConfigFile(filePath, fileName):

    path = filePath+"\\"+fileName

    IM = xml.Element("logEventDefinition")
    IM.attrib["assembly"] = "IM.LogEventDefinitions"

    BarcodeEntry = xml.Element("logEventDefinition")
    BarcodeEntry.attrib["assembly"] = "BarcodeEntry.LogEventDefinitions"

    MaintenanceScheduling = xml.Element("logEventDefinition")
    MaintenanceScheduling.attrib["assembly"] = "MaintenanceScheduling.ActivityLog.Messages.LogEventDefinitions"

    RTCosmo3 = xml.Element("logEventDefinition")
    RTCosmo3.attrib["assembly"] = "InCore.LogEventDefinitions"

    tree = xml.parse(path)
    rootElement = tree.getroot()

    loggingTag = rootElement.find("labcore.logging.service")
    print "loggingTag"
    print loggingTag
    print

    logEventDefinitionsTag = loggingTag.find("logEventDefinitions")
    print "logEventDefinitionsTag"
    print logEventDefinitionsTag
    print

    logEventDefinitionsTag.insert(0, RTCosmo3)
    logEventDefinitionsTag.insert(0, MaintenanceScheduling)
    logEventDefinitionsTag.insert(0, BarcodeEntry)        
    logEventDefinitionsTag.insert(0, IM)

    print "definitionfilesTag"
    print logEventDefinitionsTag
    print

    print "xml.tostring of definitionfilesTag"
    print xml.tostringlist(logEventDefinitionsTag)
    print

    tree.write(path+"1")
    return 
```

并在以下行：

```
loggingTag = rootElement.find("labcore.logging.service") 
```

出现以下错误：

```
AttributeError: 'NoneType' object has no attribute 'find' 
```

但是当我`xmlns`从标签中删除部分时，它可以工作。有人知道我怎么解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:17:56.933

尝试使用`xml.etree.ElementTree.register_namespace(prefix, uri)`

所以

```
xml.etree.ElementTree.register_namespace("lc", "http://schemas.com/labcore/configuration") 
```

然后在搜索元素时，在元素名称前使用前缀

```
loggingTag = rootElement.find("lc:labcore.logging.service") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T05:58:42.850

正如我的评论，这是一种有效的解决方案。但我现在不确定，如果该服务仍然有效，也许我可以在今天或星期一测试它。

解决方案是：将命名空间添加到变量：

```
namespace = "{http://schemas.com/labcore/configuration}" 
```

然后当您调用 find.. 在搜索标记之前添加 {0} 并对其进行格式化。

```
loggingTag = rootElement.find("{0}labcore.logging.service".format(namespace)) 
```

你必须为所有孩子添加这个。

我不确定该服务是否会在此之后工作，因为他为每个标签添加了一个 ns:tagname。但我认为它会工作。

根元素现在是：

```
<configuration xmlns:ns0="http://schemas.com/labcore/configuration"> 
```

孩子们现在是：

```
<ns0:labcore.logging.service defaultSystemIdentificationCode="??"> 
```

如果它有效或无效，将给出反馈。但希望它会:)

# c++ - 为什么我们不能在 c 或 c++ 代码中使用直接寻址？

> ID：10333463
> 
> 赞同：5
> 
> 时间：2012-04-26T12:31:35.463
> 
> 标签：c++, c, pointers

当我连续编译并执行此代码几次时，它报告 cc 的地址为 0x0012FF5C。但是，当我尝试使用 foo 中对 printf 的第二次调用来打印该地址处的字符串时，它会打印垃圾而不是打印出“Hello”？为什么这样？？当我知道地址位于应用程序的地址空间内时，如果我直接将地址作为参数传递会有什么问题（至少直到我不重新启动我的电脑，或者启动其他需要大量空间的应用程序，这会导致我的申请将被分页）？？

```
void foo(char *cc[])
{
    printf("%x\n",cc);
    printf("%s\n",(char *)(0x0012FF5C));
}

int main()
{
    char *c[] = {"Hello","World"};
    foo(c);
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T12:37:49.500

**Because there is nothing in the C or C++ standard to guarantee that.** Those addresses *may* be predictable depending your compiler/OS, but don't count on it.

```
#include <stdio.h>

int main(void) {
    char s[] = "okay";
    printf("%p", (void*)s);
    return 0;
} 
```

I get a different address *every time* (gcc on linux). Don't use "address literals" ;)

Process address space on modern OS's is randomized for security on each execution:

[http://en.wikipedia.org/wiki/Address_space_layout_randomization](http://en.wikipedia.org/wiki/Address_space_layout_randomization)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T12:43:08.033

因为当第二个 printf 尝试将此 char* 数组打印为字符串时，第一个 printf 会为您提供 char* 数组的地址。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-26T12:40:09.333

好的，第一件事是，**永远不要假设多次执行会返回相同的地址**

现在。假设您很幸运并获得了相同的地址。请注意，这`cc`是一个指针数组。你正在发送这个数组的基地址。您需要发送数组第一个元素的值

试试这个，如果你幸运的话，

```
printf("%s\n",*((char**)(0x0012FF5C))); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-26T12:40:56.150

[如果你在没有虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)和[内存保护](http://en.wikipedia.org/wiki/Memory_protection)的机器上运行你的程序，你很可能会成功。这些技术/功能是它不起作用的原因。

每个进程都有自己的虚拟地址空间，其地址由处理器的[内存管理单元](http://en.wikipedia.org/wiki/Memory_management_unit)转换为硬件地址。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-26T12:38:27.907

I don't think your (0x0012FF5C) represents poiter. Try (char*)(0x0012FF5C).

Besides that, like other tell you, this has no practical value, as there is no guarantee string will be located at that address every run. This is not some embedded assembly where you say put this string at this location and later use the address directly.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-26T12:36:31.730

The memory location of your process may have changed between the both executions. You can't do that, you are trying to read an adress who isn't alloced by your process. Moreover I have many warnings :

> test.c: In function ‘foo’: test.c:6: warning: format ‘%x’ expects type ‘unsigned int’, but argument 2 has type ‘char **’</p>
> 
> test.c:7: warning: format ‘%s’ expects type ‘char *’, but argument 2 has type ‘int’</p>
> 
> test.c:9: warning: format ‘%x’ expects type ‘unsigned int’, but argument 2 has type ‘char **’</p>

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-26T12:38:37.907

> when I know that the address

Well, you don't really *know* anything about the address when you're hard-coding it, you're *guessing* at it.

There are lots of reasons why the address of a thing could change between executions of the same program. There are even more reasons why the address could change *if you're changing the code* (as you appear to be doing here).

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-04-26T12:39:35.177

正如之前有人所说，您在内存中的代码位置可能因执行而异，变量的位置也是如此。尝试运行此代码。它打印您在内存中指向的变量的实际地址。您会看到多次执行会产生完全不同的地址。永远记住这一点！

```
 #include <stdio.h>

 void foo(char *cc[])
{
    printf("%x\n",cc);
    printf("%s\n",(0x0012FF5C)); //this line will fail, there is no guarantee to that
    cc++;
    printf("%x\n",cc);
}

int main()
{
    char *c[] = {"Hello","World"};
    printf("c array location: %p",c); //print location
    foo(c);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-26T12:59:43.457

首先，`printf("%x\n",cc);`不打印`cc`. 充其量它会打印 的值`cc`，但行为是未定义的，因为您为 format 传递了错误的类型参数`%x`。它期望`unsigned int`，你已经提供了一个指针。

实践中最可能的行为是它会打印值的最低有效部分`cc`（因此在 32 位机器上它似乎可以工作，而在 64 位机器上你不会看到整个地址）。但它可能会以不同的方式出错。

第二件事，`cc`有 type `char**`，因此 的值`cc`不是指向字符串第一个字符的指针，而是指向数组第一个元素的指针`c`from `main`。该`%s`格式需要一个指向字符串第一个字符的指针。因此，即使`cc`真的是的值`0x0012FF5C`，将该值传递给`printf`格式`%s`也是错误的。

您看到的“垃圾”是试图从该指针数组中打印指针数据，就好像它是属于字符串的字符数据一样。它不是。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-26T13:17:17.763

我稍微简化了你的例子。如果您知道字符串的地址，则可以从该地址读取。

```
#include <stdio.h>

void foo(char cc[])
{
    int i;
    printf("%p\n",cc);
    printf("Type the address you would like to read:");
    scanf ("%x",&i);
    printf("Character value at your address: %c\n",*((char *)(i)));
}

int main()
{
    char c[] = "Hello";
    foo(c);
} 
```

这将允许您从命令行中指定的地址读取。它将首先打印出字符数组的基地址，因此您知道在哪里查找字符串。

例子：

```
$ ./a.out 
0xbfcaaf3a
Type the address you would like to read:bfcaaf3d
Character value at your address: l 
```

正如预期的那样，这将打印 的第四个字母`Hello`。

# objective-c - 如何限制 iOS 中 NSInteger 的最大数量？

> ID：10333466
> 
> 赞同：0
> 
> 时间：2012-04-26T12:31:39.550
> 
> 标签：objective-c, ios

我有一个表格可以在 iOS 中使用 UISearchBar 显示 searchData。

当我使用关键字搜索时，我将数据检索到 NSMutableArray。NSMutableArray 中有很多数据。我只想在 tableView 中显示大约 20 个数据。通常我使用数据在表格视图中显示，

> 返回 [self.myArrayData 计数]；

它显示了来自 NSMutableArray 的全部数据。我想限制数据计数以显示在 tableView 中。

我如何限制该数据计数？感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:32:59.683

```
NSInteger count = [self.myArrayData count];
if (count > 20) return 20;
return count; 
```

# javascript - Google+ 样式自动完成 + 下拉 jQuery 插件

> ID：10333468
> 
> 赞同：3
> 
> 时间：2012-04-26T12:31:44.423
> 
> 标签：javascript, jquery, jquery-plugins, google-plus

我正在寻找一个 jQuery 插件，其行为类似于 Google+ 自动完成 + 下拉菜单。在 G+ 中，我可以输入一个人的姓名，它会在我的圈子中查找并显示匹配列表，或者我可以单击输入框末尾的下拉箭头以获取我可以使用的所有可能名称的列表从中选择。我能够找到执行自动完成功能的插件，但没有将其与下拉功能混合以向您显示所有可能的名称。有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-26T12:53:11.387

您也可以尝试选择的组件。 [http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/) 这是一个非常好的用户界面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:49:53.607

尝试 jQueryUI 自动完成：http: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

# asp.net - asp.net c# GDI 应用程序

> ID：10333477
> 
> 赞同：0
> 
> 时间：2012-04-26T12:32:16.747
> 
> 标签：asp.net, gdi

我只是在使用 c# 在 asp.net 页面上使用 GDI 完成图像创建教程

我的代码在下面

html页面代码

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Image1.aspx.cs" Inherits="GDI_1.Image1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <asp:Image runat="server" ID="img" ImageUrl="Image1.aspx" />
    </div>
    </form>
</body>
</html>

asp.net page behind code

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Drawing.Imaging;

namespace GDI_1
{
    public partial class Image1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            Bitmap image = new Bitmap(300, 50);
            Graphics g = Graphics.FromImage(image);
            g.FillRectangle(Brushes.Red, 1, 1, 298, 48);
            Font font = new Font("Impact", 20, FontStyle.Regular);
            g.DrawString("test text", font, Brushes.Yellow, 10, 5);
            image.Save(Response.OutputStream, System.Drawing.Imaging.ImageFormat.Gif);
            g.Dispose();
            image.Dispose();
        }
    }
} 
```

我的问题是当我编译它并查看它显示的页面时

GIF89a,2�3f���++3+f+�+�+�UU3UfU�U�U���3�f����������3�f����������3� fՙ������3�f������3333f3�3�3�3+3+33+f3+�3+�3+�3U3U33Uf3U�3U�3U�3�3�33�f3� ��3��3��3��3��33�f3��3��3��3�3�33�f3�3��3��3�3�33�f3��3��3��ff3fff ��f�f+f+3f+ff+�f+�f+�fUfU3fUffU�fU�f�f�3f�ff��f��f��f�3f�ff��f�� f��f�f�3f�ff�f��f��f�f�3f�ff��f��f����3�f���̙��+�+3�+f�+ ��+̙

以及所有在 html 标记之前

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:05:34.123

如果您只是想直接在页面中运行它，那么这就是您将得到的。

要正确显示，您需要将其设置为图像的来源，即

```
<asp:Image runat="server" ID="img" ImageUrl="ImageBuilder.aspx" /> 
```

其中 ImageBuilder.aspx 是包含您的代码的页面。

**编辑**

您需要做的是有 2 页。

Image1.aspx 包含您当前拥有的图像控件 - 将图像源更改为 Image2.aspx。

创建一个名为 Image2.aspx 的新页面，并从 aspx 中删除除 <%@ Page 行之外的所有内容。现在从 Image1 Page_Load 中删除代码并将其粘贴到 Image2 Page_Load。

重建并重试。

# java - 用于 FTP 操作的标准 Java 类

> ID：10333483
> 
> 赞同：0
> 
> 时间：2012-04-26T12:32:33.183
> 
> 标签：java, ftp

我可以将标准 Java 类用于 FTP 操作（上传、下载、删除、列出...）吗？因为，我找到了一个很好的 FTP 客户端库[Apache Commons Net](http://commons.apache.org/net/)，但我的经理想根据标准类编写她自己的。

我怎样才能让我的经理允许我们使用上面的包，如果她不同意使用这个库，我们可能会遇到什么陷阱？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T12:35:50.583

为什么您的经理不想使用经过验证的软件并用您必须编写、测试和维护的软件来替换它？你的老板是个白痴——使用 Apache FTP 客户端并继续前进。您有更多有趣的业务问题需要解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T12:36:52.843

JDK中有FTP类，见sun.net.FtpClient。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-25T09:19:11.410

Apache Commons 类是标准类。它们被广泛传播，并带有全面的测试和文档。与 JDK 类相比，它们确实提供了更好的 ftp 文件传输处理。

# c++ - 带地图的 C++ 程序 - 解释下面的程序是如何工作的

> ID：10333484
> 
> 赞同：-1
> 
> 时间：2012-04-26T12:32:33.143
> 
> 标签：c++, dictionary, iterator

在下面的程序中，tmp_data 首先打印为：“Ravindra Kumar”。但是在复制到地图后，它变成了“RRRRRRRRRRR”。当我们下次打印时，它仍然在打印“Ravindra Kumar” - 如何。它假设打印 RRRRRRRR 对吗？

```
#include <iostream>
#include <cstring>
#include <string>
#include <map>
using namespace std;

void fun_call( );
main(){
        cout << "printing all data " << endl ;

        fun_call();
        fun_call();

}

void fun_call()
{
      //  static void *tmp_data;
        void *tmp_data;
        char *str="Ravindra Kumar";
        char *str1="RRRRRRRRRRRRRRRRRRRRR";
        char name[]="Ravi";
        char value[100];

        static std::map<std::string,void *> name_data_map;
        std::map<std::string,void *>::iterator iter   ;

        iter=name_data_map.find(name) ;

        if ( iter == name_data_map.end())
        {
        tmp_data = (void *) malloc ( strlen(str)+1 );
        memcpy(tmp_data,str,strlen(str)+1);
        name_data_map[name]=tmp_data;
        cout << "Inside the if" << endl ;
        }
        cout << "Outside the if" << endl ;
        iter=name_data_map.find(name) ;

        memcpy(value,iter->second,strlen(str)+1);
        cout << "value is " << value <<  endl ;
        tmp_data=(void *)malloc(100000);
        memcpy(tmp_data,str1,strlen(str1)+1);

} 
```

输出 ：

```
$ ./a.out
printing all data
Inside the if
Outside the if
value is Ravindra Kumar
Outside the if
value is Ravindra Kumar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:40:29.473

您复制`"RRRRRRRRRRRRRRRRRRRRR"`到`tmp_data`，然后退出该函数，完全丢弃`tmp_data`（顺便说一句，没有释放它，所以那里有内存泄漏）。下一次调用`fun_call`将创建一个新的`tmp_data`局部变量，其值与您之前设置的值无关。但是，`name_data_map`是声明`static`的，所以它只分配一次（在第一次调用时`fun_call`），然后重复使用，保留你在上一次调用中放入的值（并且该值实际上是与你复制的不同的内存块R's into later）。

### 更新——更详细的解释

这里

```
 tmp_data = (void *) malloc ( strlen(str)+1 );
    memcpy(tmp_data,str,strlen(str)+1);
    name_data_map[name]=tmp_data; 
```

您分配一个内存块，将“Ravindra Kumar”复制到其中并将指向它的指针存储在映射中。此时，`name_data_map[name]`和`tmp_data`指向同一个内存块。从图形上看，它可能大致看起来像这样（为了简单起见，假设两个文本文字连续存储在内存中，这在现实生活中可能是这样，也可能不是这样）：

```
name_data_map[name] ----
                        ˇ
tmp_data ---------------
                        ˇ
raw memory    ..........Ravindra Kumar\0RRRRRRRRRRRRRRRRRRRRR\0............ 
```

如果您修改了该内存块的内容（例如，通过将不同的文本复制到`tmp_data`中），则更改也将是可见的`name_data_map[name]`，因为它们都指向相同的内存位置。

但是，反之亦然：在更改地图值之后，例如

```
 name_data_map[name]=str1; 
```

程序状态如下所示：

```
name_data_map[name] --------------------
                                        ˇ
tmp_data ---------------
                        ˇ
raw memory    ..........Ravindra Kumar\0RRRRRRRRRRRRRRRRRRRRR\0............ 
```

使两个指针指向不同的位置，因此其中一个的更改不会影响另一个。*因此请注意，更改指针*的值与更改其指向的*内存*值之间存在根本区别。

几行之后，您只需使用以下命令即可完成前者`tmp_data`：

```
 tmp_data=(void *)malloc(100000);
    memcpy(tmp_data,str1,strlen(str1)+1); 
```

第一行改变了 的值`tmp_data`，所以现在它不再指向同一个地方`name_data_map[name]`！之后，无论你对新分配的内存块做什么，它都不会再有影响`name_data_map[name]`了。这就是你没有改变它的原因。

> 如果我们将地图声明为非静态的，那么我们可以更改它吗？

错误的。声明你的地图`static`对此没有影响——它只会影响你的地图范围。当您退出时，非静态映射将不复存在`fun_call`，丢失存储在其中的所有值。当它还活着时，你可以改变它的值，不管它是否`static`存在。您只需要使用正确的指针即可。

如果您的目标是通过 更改存储在地图中的值`tmp_data`，只需删除第二个`malloc`并修改第一个以分配更长的块（因为`str1`比 长`str`，因此尝试复制`str1`到长度为 的缓冲区`str`导致缓冲区溢出，即未定义的行为）。在那之后，你应该有一个工作 - 虽然讨厌 - 代码，因为尝试“在其背后”修改地图中的值通常不是一个好主意。此外，在 C++ 代码中混合 C 构造（`malloc`尤其是原始指针）是一个坏主意。`void*`如果您只是在试验，这是可以接受的——机器人请不要在生产代码中这样做。你的意图是不同的，请澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:37:54.323

以下代码更简单，似乎可以满足您的要求。是否有任何理由更喜欢 char* 而不是 std::string 作为地图中的值？

```
#include <iostream>
#include <string>
#include <map>

void fun_call()
{
        const char* str="Ravindra Kumar";
        const char* str1="RRRRRRRRRRRRRRRRRRRRR";
        const char* name="Ravi";

        static std::map<std::string,std::string> name_data_map;
        std::map<std::string,std::string>::iterator iter;

        iter=name_data_map.find(name) ;

        if ( iter == name_data_map.end())
        {
          name_data_map[name]=str;
          cout << "Inside the if" << endl ;
        }
        cout << "Outside the if" << endl ;
        iter=name_data_map.find(name) ;
        cout << "value is " << iter->second <<  endl ;
        iter->second = str1;
}

main(){
        cout << "printing all data " << endl ;

        fun_call();
        fun_call();
} 
```

输出：

```
printing all data 
Inside the if
Outside the if
value is Ravindra Kumar
Outside the if
value is RRRRRRRRRRRRRRRRRRRRR 
```

# c++ - Spirit::qi : 将继承的属性引用传递给 phoenix::function

> ID：10333487
> 
> 赞同：6
> 
> 时间：2012-04-26T12:32:35.753
> 
> 标签：c++, boost-spirit-qi

以下代码是我正在尝试做的简化版本。基本上，我有一个带有容器数据成员的结构（玩具代码中的 int_holder）。我想插入一个对象（在这种情况下为 int）并向父 qi::rule 返回一个指向新插入对象的指针。

我通过引用将 int_holder 传递给语法，以便在解析时用值填充它，因此 int_holder 将是语法的继承属性。代码：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix_core.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>
#include <boost/spirit/include/phoenix_function.hpp>
#include <vector>

namespace qi=boost::spirit::qi;
namespace phoenix=boost::phoenix;

struct int_holder
{
    int_holder() {}
    std::vector<int> ints;
};

struct insert_impl
{
    template<class, class>
    struct result { typedef int* type; };
    int* operator() (int_holder& holder, int i) const
    {
        holder.ints.push_back (i);
        return &holder.ints.back();
    }
};

template<class Iterator>
struct my_grammar : qi::grammar<Iterator, int*(int_holder&)>
{
    my_grammar () : my_grammar::base_type (start)
          , insert (insert_impl())
    {
        using qi::_val;
        using qi::int_;
        using qi::_r1;
        using qi::_1;

        using phoenix::ref;

        start = +next(_val) [_val = _1];
        next = int_ [_val = insert(_r1, _1)];
    }
    qi::rule<Iterator, int*(int_holder&)> start, next;
    phoenix::function<insert_impl> insert;
};

int main ()
{
    using phoenix::ref;

    const char* p="1";
    int* last;
    int_holder holder;
    my_grammar<const char*> g;
    qi::parse (p, p+1, g(ref(holder)), last);
} 
```

该代码无法编译，并显示以下错误消息：

```
In file included from     
/opt/local/include/boost/fusion/sequence/intrinsic/detail/segmented_begin.hpp:16:0,
         from /opt/local/include/boost/fusion/sequence/intrinsic/begin.hpp:17, from
         /opt/local/include/boost/fusion/iterator/segmented_iterator.hpp:12, from
         /opt/local/include/boost/fusion/sequence/intrinsic/detail/segmented_end.hpp:11, from
         /opt/local/include/boost/fusion/sequence/intrinsic/end.hpp:17, from
         /opt/local/include/boost/fusion/sequence/intrinsic/back.hpp:11, from
         /opt/local/include/boost/fusion/sequence/intrinsic.hpp:11, from
         /opt/local/include/boost/fusion/include/intrinsic.hpp:10, from
         /opt/local/include/boost/proto/fusion.hpp:22, from
         /opt/local/include/boost/proto/core.hpp:21, from
         /opt/local/include/boost/proto/proto.hpp:12, from
         /opt/local/include/boost/spirit/home/support/meta_compiler.hpp:19, from
         /opt/local/include/boost/spirit/home/qi/meta_compiler.hpp:14, from
         /opt/local/include/boost/spirit/home/qi/action/action.hpp:14, from
         /opt/local/include/boost/spirit/home/qi/action.hpp:14, from
         /opt/local/include/boost/spirit/home/qi.hpp:14, from
         /opt/local/include/boost/spirit/include/qi.hpp:16, from test_qi.cpp:1:
         /opt/local/include/boost/fusion/container/list/cons.hpp: In instantiation of
         'boost::fusion::cons<Car, Cdr>::cons(const boost::fusion::cons<Car2, Cdr2>&) [with Car2 =
         int*&; Cdr2 = boost::fusion::nil; Car = int_holder&; Cdr = boost::fusion::nil]':
         /opt/local/include/boost/spirit/home/support/context.hpp:117:20: required from
         'boost::spirit::context<Attributes, Locals>::context(typename Attributes::car_type, const
         Args&, Context&) [with Args =
         boost::fusion::vector<boost::phoenix::actor<boost::spirit::attribute<0> >,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_>; Context = boost::spirit::context<boost::fusion::cons<int*&,
         boost::fusion::cons<int_holder&, boost::fusion::nil> >, boost::fusion::vector0<> >;
         Attributes = boost::fusion::cons<int*&, boost::fusion::cons<int_holder&,
         boost::fusion::nil> >; Locals = boost::fusion::vector0<>; typename Attributes::car_type =
         int*&]' /opt/local/include/boost/spirit/home/qi/nonterminal/rule.hpp:343:67: required
         from 'bool boost::spirit::qi::rule<Iterator, T1, T2, T3, T4>::parse(Iterator&, const
         Iterator&, Context&, const Skipper&, Attribute&, const Params&) const [with Context =
         boost::spirit::context<boost::fusion::cons<int*&, boost::fusion::cons<int_holder&,
         boost::fusion::nil> >, boost::fusion::vector0<> >; Skipper = boost::spirit::unused_type;
         Attribute = int*; Params =
         boost::fusion::vector<boost::phoenix::actor<boost::spirit::attribute<0> >,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_>; Iterator = const char*; T1 = int*(int_holder&); T2 =
         boost::spirit::unused_type; T3 = boost::spirit::unused_type; T4 =
         boost::spirit::unused_type]'
         /opt/local/include/boost/spirit/home/qi/nonterminal/detail/parameterized.hpp:48:79:
         required from 'bool boost::spirit::qi::parameterized_nonterminal<Subject,
         Params>::parse(Iterator&, const Iterator&, Context&, const Skipper&, Attribute&) const
         [with Iterator = const char*; Context = boost::spirit::context<boost::fusion::cons<int*&,
         boost::fusion::cons<int_holder&, boost::fusion::nil> >, boost::fusion::vector0<> >;
         Skipper = boost::spirit::unused_type; Attribute = int*; Subject =
         boost::spirit::qi::rule<const char*, int*(int_holder&), boost::spirit::unused_type,
         boost::spirit::unused_type, boost::spirit::unused_type>; Params =
         boost::fusion::vector<boost::phoenix::actor<boost::spirit::attribute<0> >,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_>]' /opt/local/include/boost/spirit/home/qi/action/action.hpp:65:13:
         required from 'bool boost::spirit::qi::action<Subject, Action>::parse(Iterator&, const
         Iterator&, Context&, const Skipper&, Attribute&) const [with Iterator = const char*;
         Context = boost::spirit::context<boost::fusion::cons<int*&,
         boost::fusion::cons<int_holder&, boost::fusion::nil> >, boost::fusion::vector0<> >;
         Skipper = boost::spirit::unused_type; Attribute = boost::spirit::unused_type; Subject =
         boost::spirit::qi::parameterized_nonterminal<boost::spirit::qi::rule<const char*,
         int*(int_holder&), boost::spirit::unused_type, boost::spirit::unused_type,
         boost::spirit::unused_type>,
         boost::fusion::vector<boost::phoenix::actor<boost::spirit::attribute<0> >,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_> >; Action =
         boost::phoenix::actor<boost::phoenix::composite<boost::phoenix::assign_eval,
         boost::fusion::vector<boost::spirit::attribute<0>, boost::spirit::argument<0>,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_> >
         >]' /opt/local/include/boost/spirit/home/qi/detail/fail_function.hpp:38:72: required from
         'bool boost::spirit::qi::detail::fail_function<Iterator, Context,
         Skipper>::operator()(const Component&, Attribute&) const [with Component =
         boost::spirit::qi::action<boost::spirit::qi::parameterized_nonterminal<boost::spirit::qi::rule<const
         char*, int*(int_holder&), boost::spirit::unused_type, boost::spirit::unused_type,
         boost::spirit::unused_type>,
         boost::fusion::vector<boost::phoenix::actor<boost::spirit::attribute<0> >,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_> >,
         boost::phoenix::actor<boost::phoenix::composite<boost::phoenix::assign_eval,
         boost::fusion::vector<boost::spirit::attribute<0>, boost::spirit::argument<0>,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_> >
         > >; Attribute = boost::spirit::unused_type; Iterator = const char*; Context =
         boost::spirit::context<boost::fusion::cons<int*&, boost::fusion::cons<int_holder&,
         boost::fusion::nil> >, boost::fusion::vector0<> >; Skipper = boost::spirit::unused_type]'
         /opt/local/include/boost/spirit/home/qi/detail/pass_container.hpp:263:38: [ skipping 10
         instantiation contexts ] /opt/local/include/boost/function/function_template.hpp:1042:16:
         required from 'boost::function<R(T0, T1, T2, T3)>::function(Functor, typename
         boost::enable_if_c<boost::type_traits::ice_not<boost::is_integral<Functor>::value>::value,
         int>::type) [with Functor =
         boost::spirit::qi::detail::parser_binder<boost::spirit::qi::plus<boost::spirit::qi::action<boost::spirit::qi::parameterized_nonterminal<boost::spirit::qi::rule<const
         char*, int*(int_holder&), boost::spirit::unused_type, boost::spirit::unused_type,
         boost::spirit::unused_type>,
         boost::fusion::vector<boost::phoenix::actor<boost::spirit::attribute<0> >,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_> >,
         boost::phoenix::actor<boost::phoenix::composite<boost::phoenix::assign_eval,
         boost::fusion::vector<boost::spirit::attribute<0>, boost::spirit::argument<0>,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_> >
         > > >, mpl_::bool_<false> >; R = bool; T0 = const char*&; T1 = const char* const&; T2 =
         boost::spirit::context<boost::fusion::cons<int*&, boost::fusion::cons<int_holder&,
         boost::fusion::nil> >, boost::fusion::vector0<> >&; T3 = const
         boost::spirit::unused_type&; typename
         boost::enable_if_c<boost::type_traits::ice_not<boost::is_integral<Functor>::value>::value,
         int>::type = int]' /opt/local/include/boost/function/function_template.hpp:1083:5:
         required from 'typename
         boost::enable_if_c<boost::type_traits::ice_not<boost::is_integral<Functor>::value>::value,
         boost::function<R(T0, T1, T2, T3)>&>::type boost::function<R(T0, T1, T2,
         T3)>::operator=(Functor) [with Functor =
         boost::spirit::qi::detail::parser_binder<boost::spirit::qi::plus<boost::spirit::qi::action<boost::spirit::qi::parameterized_nonterminal<boost::spirit::qi::rule<const
         char*, int*(int_holder&), boost::spirit::unused_type, boost::spirit::unused_type,
         boost::spirit::unused_type>,
         boost::fusion::vector<boost::phoenix::actor<boost::spirit::attribute<0> >,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_> >,
         boost::phoenix::actor<boost::phoenix::composite<boost::phoenix::assign_eval,
         boost::fusion::vector<boost::spirit::attribute<0>, boost::spirit::argument<0>,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_> >
         > > >, mpl_::bool_<false> >; R = bool; T0 = const char*&; T1 = const char* const&; T2 =
         boost::spirit::context<boost::fusion::cons<int*&, boost::fusion::cons<int_holder&,
         boost::fusion::nil> >, boost::fusion::vector0<> >&; T3 = const
         boost::spirit::unused_type&; typename
         boost::enable_if_c<boost::type_traits::ice_not<boost::is_integral<Functor>::value>::value,
         boost::function<R(T0, T1, T2, T3)>&>::type = boost::function<bool(const char*&, const
         char* const&, boost::spirit::context<boost::fusion::cons<int*&,
         boost::fusion::cons<int_holder&, boost::fusion::nil> >, boost::fusion::vector0<> >&,
         const boost::spirit::unused_type&)>&]'
         /opt/local/include/boost/spirit/home/qi/nonterminal/rule.hpp:182:13: required from
         'static void boost::spirit::qi::rule<Iterator, T1, T2, T3,
         T4>::define(boost::spirit::qi::rule<Iterator, T1, T2, T3, T4>&, const Expr&, mpl_::true_)
         [with Auto = mpl_::bool_<false>; Expr =
         boost::proto::exprns_::expr<boost::proto::tagns_::tag::unary_plus,
         boost::proto::argsns_::list1<const
         boost::proto::exprns_::expr<boost::proto::tagns_::tag::subscript,
         boost::proto::argsns_::list2<boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal,
         boost::proto::argsns_::term<boost::spirit::qi::parameterized_nonterminal<boost::spirit::qi::rule<const
         char*, int*(int_holder&), boost::spirit::unused_type, boost::spirit::unused_type,
         boost::spirit::unused_type>,
         boost::fusion::vector<boost::phoenix::actor<boost::spirit::attribute<0> >,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_> > >, 0l>&,
         boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal,
         boost::proto::argsns_::term<const
         boost::phoenix::actor<boost::phoenix::composite<boost::phoenix::assign_eval,
         boost::fusion::vector<boost::spirit::attribute<0>, boost::spirit::argument<0>,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_> >
         >&>, 0l> >, 2l>&>, 1l>; Iterator = const char*; T1 = int*(int_holder&); T2 =
         boost::spirit::unused_type; T3 = boost::spirit::unused_type; T4 =
         boost::spirit::unused_type; boost::spirit::qi::rule<Iterator, T1, T2, T3, T4> =
         boost::spirit::qi::rule<const char*, int*(int_holder&), boost::spirit::unused_type,
         boost::spirit::unused_type, boost::spirit::unused_type>; mpl_::true_ =
         mpl_::bool_<true>]' /opt/local/include/boost/spirit/home/qi/nonterminal/rule.hpp:220:13:
         required from 'boost::spirit::qi::rule<Iterator, T1, T2, T3, T4>&
         boost::spirit::qi::rule<Iterator, T1, T2, T3, T4>::operator=(const Expr&) [with Expr =
         boost::proto::exprns_::expr<boost::proto::tagns_::tag::unary_plus,
         boost::proto::argsns_::list1<const
         boost::proto::exprns_::expr<boost::proto::tagns_::tag::subscript,
         boost::proto::argsns_::list2<boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal,
         boost::proto::argsns_::term<boost::spirit::qi::parameterized_nonterminal<boost::spirit::qi::rule<const
         char*, int*(int_holder&), boost::spirit::unused_type, boost::spirit::unused_type,
         boost::spirit::unused_type>,
         boost::fusion::vector<boost::phoenix::actor<boost::spirit::attribute<0> >,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_> > >, 0l>&,
         boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal,
         boost::proto::argsns_::term<const
         boost::phoenix::actor<boost::phoenix::composite<boost::phoenix::assign_eval,
         boost::fusion::vector<boost::spirit::attribute<0>, boost::spirit::argument<0>,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_,
         boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_> >
         >&>, 0l> >, 2l>&>, 1l>; Iterator = const char*; T1 = int*(int_holder&); T2 =
         boost::spirit::unused_type; T3 = boost::spirit::unused_type; T4 =
         boost::spirit::unused_type; boost::spirit::qi::rule<Iterator, T1, T2, T3, T4> =
         boost::spirit::qi::rule<const char*, int*(int_holder&), boost::spirit::unused_type,
         boost::spirit::unused_type, boost::spirit::unused_type>]' test_qi.cpp:41:3: required from
         'my_grammar<Iterator>::my_grammar() [with Iterator = const char*]' test_qi.cpp:57:26:
         required from here /opt/local/include/boost/fusion/container/list/cons.hpp:83:40: error:
         invalid initialization of reference of type 'boost::fusion::cons<int_holder&,
         boost::fusion::nil>::car_type {aka int_holder&}' from expression of type 'int*' 
```

将_r1传递给phoenix::function时显然有问题，但我不知道如何解决。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:56:01.117

对不起，我刚刚发现错误，代码行

```
start = +next(_val) [_val = _1]; 
```

需要改为

```
start = +next(_r1) [_val = _1]; 
```

然后它就起作用了。很抱歉浪费了您的时间！再见！

# ios - _和自我之间的区别。在 Objective-C 中

> ID：10333495
> 
> 赞同：56
> 
> 时间：2012-04-26T12:33:14.493
> 
> 标签：ios, objective-c, getter-setter, synthesize

`self`在调用 时，在 Objective-C 中使用下划线和使用关键字有区别`@property`吗？

财产声明：

```
@property (weak, nonatomic) NSString *myString; 
```

调用`@synthesize`属性：

```
@synthesize myString = _myString; 
```

如果我想在我的代码中使用它有区别吗？什么时候？在 getter/setter 中？

```
self.myString = @"test";
_myString = @"test"; 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-04-26T12:49:01.227

`self.myString = @"test";`完全等同于写作`[self setMyString:@"test"];`。这两个都在调用一个方法。

您可以自己编写该方法。它可能看起来像这样：

```
- (void)setMyString:(NSString*)newString
{
    _myString = newString;
} 
```

因为您使用`@synthesize`了 ，所以您实际上不必费心编写该方法，您可以让编译器为您编写它。

因此，从查看该方法来看，调用它似乎与为实例变量赋值完全相同，对吧？好吧，这不是那么简单。

首先，您可以编写自己的 setter 方法。如果你这样做，你的方法会被调用，它可以做各种额外的事情以及设置变量。在这种情况下， using`self.myString =`将调用您的方法，但 do`_myString =`不会，因此将使用不同的功能。

其次，如果你曾经使用过 Key Value Observing，编译器会做一些非常聪明的技巧。在幕后，它继承了您的类，并覆盖了您的 setter 方法（无论是您自己编写的还是通过综合生成的），以便`willChangeValueForKey:`对 Key Value Observing 工作所需的调用进行调用。你不需要知道它是如何工作的（虽然如果你想睡前阅读它会很有趣！），但你需要知道如果你想让 Key Value Observing 自动工作，你必须使用 setter 方法。

第三，即使您依赖 synthesize 来编写 setter 方法，也可以调用该方法，这为您未来提供了灵活性。每当值更改时，您可能想要做一些额外的事情，并且当您发现您想要这样做时，您可以手动编写一个 setter 方法 - 如果您习惯于始终使用`self.myString =`，那么您将不需要更改其余代码以开始调用新方法！

第四，同样适用于子类。如果其他人要对您的代码进行子类化，如果您使用设置器，那么他们可以覆盖它们以调整功能。

每当您直接访问实例变量时，您都没有明确地提供一种方法来连接额外的功能。由于您或其他人将来可能想要挂钩此类功能，因此一直使用 setter 是值得的，除非有充分的理由不这样做。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-26T12:37:48.140

你是对的 - 第一个版本 ( `self.myString`) 调用合成的 getter/setter，第二个版本直接访问私有成员变量。

看起来您正在使用 ARC，所以在这种情况下，它并没有太大的区别。但是，如果您不使用 ARC，则可能会有所不同，因为直接分配给私有成员不会触发使用`synthesize`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T13:07:56.747

（`_`下划线）只是一个约定，如[本问题](https://stackoverflow.com/a/5466601/248062)所述。

当您不使用 为属性访问添加前缀时`self.`，您将直接访问底层变量，就像在 ac 中一样`struct`。通常，您应该只在您的 init 方法和自定义属性访问器中执行此操作。[这允许计算属性和KVC 之](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html%20KVC)类的东西按预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-07T08:13:19.153

There is a tip not mentionend, the access using underscore is faster and the access using self is safer (KVC). Maybe this can summarise when you have to use each one.

# android - 随时重启设备

> ID：10333499
> 
> 赞同：0
> 
> 时间：2012-04-26T12:33:23.743
> 
> 标签：android, broadcastreceiver

我做了三个“广播接收器”。但是，设备反复重启。知道可能是什么吗？

我觉得这是消耗太多的内存。我怎么知道？

有什么建议么？

谢谢，马特乌斯

# javascript - 如何让 javascript 对象在多页 html5 应用程序中保持活跃？

> ID：10333500
> 
> 赞同：1
> 
> 时间：2012-04-26T12:33:24.257
> 
> 标签：javascript, html

如何在多页应用程序（独立于浏览器）中保持 javascript 对象处于活动状态？

我知道我可以例如编写一个带有背景页面的 Chrome 扩展程序来解决它，但是有没有一种独立于浏览器的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:43:34.790

一种方法是让您的 javascript 代码加载页面（通过“ajax”调用），然后替换 html 的主体或部分内容。这样，就浏览器而言，您仍然在同一个“页面”上。您必须确保您网站中的所有链接都是无效的，而不是导致浏览器页面加载，它们实际上会触发 javascript 函数。例如，这就是 Facebook 管理其网站点击量的方式。见[https://stackoverflow.com/a/7425870/562906](https://stackoverflow.com/a/7425870/562906)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:43:46.267

当您使用 html5 时，您可以使用本地存储来存储对象的 JSON 表示：

```
var json_text = JSON.stringify(your_object, null, 2);

localStorage.setItem("someKey", json_text); 
```

然后在另一页上检索您的项目：

```
var your_object = JSON.parse(localStorage.getItem("someKey")); 
```

要使用`JSON.stringify`您*可能*需要[JSON-js](https://github.com/douglascrockford/JSON-js) - 如果浏览器支持 html5 *，*您可能不需要第三方脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:36:11.323

您可以使用 cookie 在页面请求之间传递数据。除此之外，您总是必须从头开始重建您的对象。

# php - 将 Git 与共享托管计划一起使用

> ID：10333503
> 
> 赞同：31
> 
> 时间：2012-04-26T12:33:30.963
> 
> 标签：php, git, deployment, ftp, shared-hosting

所以我开始使用 Git 和[这个工作流程](http://nvie.com/posts/a-successful-git-branching-model/)来制作一个个人网站（主要用于测试和学习 Git），我正在使用 Xampp 在我的笔记本电脑上本地开发它。

但现在我想公开这个网站并将其上传到我的网络服务器。问题是，我使用共享托管计划，这意味着我只能通过 FTP 访问我的网站目录。不能使用 SSH 或安装 Git 或任何东西..

我想部署该网站以及对该网络服务器的任何更新，但我想知道仅通过 FTP 访问的 Git 是否可行？如果没有，更新我的网站的建议方法是什么？通过 Filezilla 手动拖放文件会有点乏味。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-26T12:37:17.223

如果您没有远程服务器的 SSH 访问权限，并且托管服务提供商不提供 git deploy 功能，您将无法直接使用 git 进行部署。

但是，无论远程选项如何，跟踪源代码总是一个好主意。

在您的情况下，自动化发布过程的一个很好的替代方法是使用您最喜欢的编程语言（Ruby、Python、Bash ...）创建一个简单的部署脚本，该脚本从您的 git 存储库加载更改的文件列表并执行上传通过这些文件的 FTP。

[对git-ftp](https://www.google.com/search?sugexp=chrome,mod=0&ix=nh&sourceid=chrome&ie=UTF-8&q=git-ftp)的简单搜索显示已经有两个项目似乎按照我的建议进行：

*   [ezyang/git-ftp](https://github.com/ezyang/git-ftp)
*   [git-ftp/git-ftp](https://github.com/git-ftp/git-ftp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:49:11.203

如果您在共享托管计划中，那么托管自己的 git 服务器不是一个好主意，因为您将同时受到空间和带宽的限制。您可以寻找其他选项，例如[github](http://github.com)，或者如果您想拥有私人托管，可以使用[bitbucket](http://bitbucket.org)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T20:22:31.557

也许考虑不同的托管设置？

1.  在 VPS 上你有更多的自由，但你需要自己设置一切。
2.  在云 PaaS 上，您将获得出色的技术，但需要支付更多费用。
3.  如上所述：具有 ftp 部署选项的私有 repo 主机也可能工作。

对我来说，最好的生产力是最重要的。将网络托管成本与网络开发成本进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-07T11:06:18.757

如果服务器上安装了 git（例如`<?php $last_line = system('git --version', $retval); ?>`），但您没有 SSH 访问权限，不妨试试[php-git-bundle](https://bitbucket.org/jwerner/php-git-bundle)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-22T18:08:09.530

这个问题可能很老，但是有一个共享的虚拟主机，它提供了 git 部署选项和对 git pull/push 等的 SSH 访问：[githoster.com](http://githoster.com)

或者您可以在 google 中搜索一些脚本，这些脚本将使用 git 挂钩将您的 github 帐户链接到您的主机。

# php - php中的MySQLdump，我需要它转储到特定目录中

> ID：10333504
> 
> 赞同：1
> 
> 时间：2012-04-26T12:33:30.990
> 
> 标签：php, mysql, mysqldump

我在我的一个 php 文件中运行一个脚本，该脚本转储一个运行良好的特定数据库，但它将创建的文件放在调用脚本的目录中。如何使其将文件存储在特定目录中？（例如 /blahblah/backups）

这是代码（不包括连接代码，但你明白了）

```
system("mysqldump -h $pdb_server -u $pdb_user -p$pdb_pwd $pdb_name > $backupfile"); 
```

我可以补充一下吗

```
/path/to/output/$backupfile 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:36:21.997

将路径放在命令之前：

```
system("cd /path/to/output/$backupfile; mysqldump -h $pdb_server -u $pdb_user -p$pdb_pwd $pdb_name > $backupfile"); 
```

或者

```
system("mysqldump -h $pdb_server -u $pdb_user -p$pdb_pwd $pdb_name > /path/to/output/$backupfile"); 
```

# visual-c++ - 如何引用我不知道其名称的文本框？

> ID：10333510
> 
> 赞同：0
> 
> 时间：2012-04-26T12:33:54.523
> 
> 标签：visual-c++

我正在使用 VC++ 2008（Windows 窗体应用程序 C++\CLR），我创建了文本框的动态数组（用户定义了他想要创建的文本框数量），并且我想创建一个 KeyPress 事件处理程序，以防止字符（我希望这些文本框只是数字，并且只接受一个点“十进制数字”）。那么如何引用用户正在使用的文本框（例如光标所在的文本框）有什么办法可以做到这一点吗？该函数如下所示：

```
private: System::Void textBox_KeyPress(System::Object^  sender, System::Windows::Forms::KeyPressEventArgs^  e) {
         if(e->KeyChar == '.')
         {
             if(this->/*the textbox in use*/->Text->Contains(".") && !this->/*the textbox in use*/->SelectedText->Contains("."))
                 e->Handled = true;
         }
         else if(!Char::IsDigit(e->KeyChar) && e->KeyChar != 0x08)
             e->Handled = true;
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:50:47.090

```
 private void CreateTextBoxControls()
    {
        intColCount= Convert.ToInt32(txtColumnNo.Text.ToString().Trim());
        int rowCount =0;
        Table tblHead = new Table();
        if (tblHead.GetType().ToString().Equals("System.Web.UI.WebControls.Table") && PHOptions.FindControl("tblHead") == null )
        {
            tblHead.ID  = "tblHead";
            tblHead.EnableViewState = true;
            tblHead.BorderWidth=Unit.Pixel(0);
            tblHead.CellSpacing = 0;
            tblHead.CellPadding = 1;
            tblHead.Width = Unit.Percentage(96);
            TableRow rH     = new TableRow();
            TableCell cH    = new TableCell();
            cH.Text= "Table Heading" ;
            cH.Font.Bold = true;
            rH.Cells.Add(cH);
            tblHead.Rows.Add(rH);
            PHOptions.Controls.Add(tblHead);
            if(intColCount>0)
                rH.Visible =true;
            else
                rH.Visible =false;
        }

        Table tblHelp = new Table();
        if (tblHelp.GetType().ToString().Equals("System.Web.UI.WebControls.Table") && PHOptions.FindControl("tblHelp") == null )
        {
            tblHelp.ID  = "tblHelp";
        }
        tblHelp.EnableViewState = true;
        tblHelp.BorderWidth=Unit.Pixel(1);
        tblHelp.CellSpacing = 0;
        tblHelp.CellPadding = 1;
        tblHelp.BorderWidth = Unit.Pixel(1);
        tblHelp.Width = Unit.Percentage(96);
        for (int rowIndex=0; rowIndex<=rowCount; rowIndex++) 
        {
            TableRow r      = new TableRow();
            TableRow rWeight= new TableRow();
            //r.ID          = "rLabel";
            TableRow rID    = new TableRow();

                for (int clIndex=0; clIndex<intColCount; clIndex++) 
                {
                    TableCell c = new TableCell();
                    txtBox = new TextBox();
                    if (txtBox.GetType().ToString().Equals("System.Web.UI.WebControls.TextBox") && PHOptions.FindControl("txtOption"+(clIndex+1).ToString()) == null )
                    {
                        txtBox.ID ="txtOption"+(clIndex+1).ToString();
                        //txtBox.Text = (clIndex+1).ToString();
                        txtBox.Width= Unit.Pixel(45);
                        txtBox.MaxLength = 2;
                        c.BorderWidth=Unit.Pixel(1);
                        c.Width=Unit.Pixel(80);
                        c.Controls.Add(txtBox);
                        r.Cells.Add(c);     
                        txtBox.PreRender += new System.EventHandler(this.txtBox_PreRender); 
                    }
                }

            tblHelp.Rows.Add(r);
        }
        TableRow rSubmit        = new TableRow();
        TableCell cSubmit = new TableCell();
        cSubmit.ColumnSpan = intColCount ;
        btnSubmitButton = new Button();
        btnSubmitButton.ID  ="btnSubmit";
        btnSubmitButton.Text= "Submit";

        if( PHOptions.FindControl("btnSubmit") == null )
            cSubmit.Controls.Add(btnSubmitButton);
        cSubmit.Attributes.Add("Align","Center");
        rSubmit.Cells.Add(cSubmit); 
        tblHelp.Rows.Add(rSubmit);
        PHOptions.Controls.Add(tblHelp);
        this.btnSubmitButton.PreRender += new System.EventHandler(this.btnSubmitButton_PreRender);
        this.btnSubmitButton.Click += new System.EventHandler(this.btnSubmitButton_Click);
    }

    private void btnSubmitButton_Click(object sender, System.EventArgs e)
    {
        for (int clIndex=0; clIndex<intColCount; clIndex++) 
        {
            string boxName = "txtOption" + (clIndex+1).ToString();      
            TextBox tb = PHOptions.FindControl(boxName) as TextBox;
            if( lblDisplay.Text != "" )
                lblDisplay.Text+=","+tb.Text ;
            else
                lblDisplay.Text=tb.Text ;
        }
    } 
```

只需参考这段代码......（这包含动态创建文本框和从文本框读取）

# list - CLISP：根据另一个列表中元素的顺序对列表进行排序

> ID：10333512
> 
> 赞同：1
> 
> 时间：2012-04-26T12:34:05.683
> 
> 标签：list, lisp

我有一个清单

```
(SetQ L '(1 j 3 k 4 h 5 n 6 w)) 
```

我必须做一个函数 Order，它在入口处有一个带有“n”个原子的列表，它必须检查该列表的每个原子是否包含在列表 L 中，并根据列表 L 中指定的顺序对它们进行排序，如果原子不是列表 L 的一部分，然后将显示结果

```
(Defun Order lst)

(SetQ L2'(w o 5 j 3)) 
```

我想验证这一点：

```
(Order L2) 
```

结果应该返回：

```
(J 3 5 W) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T16:26:42.030

提示：

之前，你问过这个问题：

[CLISP ：检查两个元素是否在列表中依次排列](https://stackoverflow.com/questions/10303736/clisp-check-if-two-elements-are-in-order-one-after-another-in-a-list)

这个函数与问题有关，因为它可以在调用标准 Lisp 函数时用作比较函数`sort`。

Lisp 函数`intersection`可以生成一个列表，该列表仅包含一个列表中出现在另一个列表中的那些元素。这是一个集合操作，所以它可能会挤压重复；另一种方法是使用`remove-if-not`测试谓词是一个 lambda 函数，用于`member`表达“删除该列表中不属于该列表的所有元素”的想法。

# blackberry - 黑莓推送集成客户端示例代码

> ID：10333513
> 
> 赞同：-1
> 
> 时间：2012-04-26T12:34:13.750
> 
> 标签：blackberry, push

我需要一个示例应用程序代码，用于在我的黑莓应用程序中进行推送集成。我已经为推送凭据注册了我的应用程序并已收到它们。

请帮忙，

亲切的问候，鲁佩什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:44:25.243

这是完全工作的推送应用程序代码，它可以帮助您实现推送通知。

```
public class push_Main {

/**
 * Entry point for this application
 * @param args Command line arguments (not used)
 */

private static final String REGISTER_SUCCESSFUL = "rc=200";
private static final String DEREGISTER_SUCCESSFUL = REGISTER_SUCCESSFUL;
private static final String USER_ALREADY_SUBSCRIBED = "rc=10003";
private static final String ALREADY_UNSUSCRIBED_BY_USER = "rc=10004";
private static final String ALREADY_UNSUSCRIBED_BY_PROVIDER = "rc=10005";

private static final String PUSH_PORT = "";  //push port
private static final String BPAS_URL = "http://pushapi.eval.blackberry.com";
private static final String APP_ID = "";   // add application id
//  private static final String CONNECTION_SUFFIX = ";deviceside=false;ConnectionType=seekrit string";

private static String URL = "http://:100"; // PORT 100 add your posh port.
private static final int CHUNK_SIZE = 256;

public static ListeningThread _listeningThread;
public static StreamConnectionNotifier _notify;

private static final long ID = 0x954a603c0dee81e0L;

public push_Main() {
    // TODO Auto-generated constructor stub

    NotificationsManager.registerSource(ID, theSource, NotificationsConstants.IMPORTANT);
        if(_listeningThread==null)
        {
            System.out.println("msg on listening thread 1");        
            _listeningThread = new ListeningThread();
            System.out.println("msg on listening thread 2");
            _listeningThread.start();
            System.out.println("msg on listhning thread 3 ");

        } 

}
public static class ListeningThread extends Thread
{
    private boolean _stop = false;

    /**
     * Stops the thread from listening.
     */
    private synchronized void stop()
    {
        _stop = true;
        try 
        {
            // Close the connection so the thread will return.
            _notify.close(); 
        } 
        catch (Exception e) 
        {      

        }          
    }

    /**
     * Listen for data from the HTTP url. After the data has been read, 
     * render the data onto the screen.
     * @see java.lang.Runnable#run()
     */

    public void run()
    {

        StreamConnection stream = null;
        InputStream input = null;
        MDSPushInputStream pushInputStream=null;

        while (!_stop)
        {
            try 
            {

                // Synchronize here so that we don't end up creating a connection that is never closed.
                synchronized(this)  
                {
                    // Open the connection once (or re-open after an IOException),  so we don't end up 
                    // in a race condition, where a push is lost if it comes in before the connection 
                    // is open again. We open the url with a parameter that indicates that we should 
                    // always use MDS when attempting to connect.
                    System.out.println("\n\n msg connection 1");
                    _notify = (StreamConnectionNotifier)Connector.open(URL);
                    System.out.println("\n\n msg connection 2");

                }

                while (!_stop)
                {

                    // NOTE: the following will block until data is received.
                    System.out.println("\n\n msg notify 1");
                    stream = _notify.acceptAndOpen();
                    System.out.println("\n\n msg 1 ");

                    try 
                    {
                        System.out.println("\n\n msg 2");
                        input = stream.openInputStream();
                        System.out.println("\n\n msg 3 ");

                        pushInputStream= new MDSPushInputStream((HttpServerConnection)stream, input);

                        System.out.println("\n\n msg 4");
                        // Extract the data from the input stream.

                        DataBuffer db = new DataBuffer();

                        byte[] data = new byte[CHUNK_SIZE];
                        int chunk = 0;

                        while ( -1 != (chunk = input.read(data)) )
                        {
                            db.write(data, 0, chunk);
                        }

                        updateMessage(data);

                        // This method is called to accept the push.
                        pushInputStream.accept();                          

                        data = db.getArray();
                    } 
                    catch (IOException e1) 
                    {
                        // A problem occurred with the input stream , however, the original 
                        // StreamConnectionNotifier is still valid.
                        //                          errorDialog(e1.toString());                   
                    }
                    finally
                    {
                        if ( input != null ) 
                        {
                            try 
                            {
                                input.close();
                            } 
                            catch (IOException e2) 
                            {                  

                            }
                        }

                        if ( stream != null )
                        {
                            try 
                            {
                                stream.close();
                            } 
                            catch (IOException e2) 
                            {                                    
                            }
                        }                                                 
                    }
                }                  
            } 
            catch (IOException ioe)
            {
                // Likely the stream was closed. Catches the exception thrown by 
                // _notify.acceptAndOpen() when this program exits.
                errorDialog(ioe.toString());        
            }
            finally
            {
                /*

                if ( _notify != null ) 
                {
                    try 
                    {
                        _notify.close();
                        _notify = null;
                    } 
                    catch ( IOException e ) 
                    {          

                    }
                }

                 */

            }
        }
    }
}

private static void updateMessage(final byte[] data)
{
    System.out.println("\n\n msg 6");

    Application.getApplication().invokeLater(new Runnable() 
    {
        public void run() 
        {
            // Query the user to load the received message.

            //              Dialog.alert( new String(data));

            UiApplication.getUiApplication().invokeLater( new Runnable() {
                public void run()
                {
                    NotificationsManager.triggerImmediateEvent(ID, 0, null, null);
                    Dialog d = new Dialog( Dialog.D_OK, new String(data) ,0, null, Screen.DEFAULT_CLOSE);
                    //                      _dialogShowing = true;
                    UiApplication.getUiApplication().pushGlobalScreen( d, 10, UiApplication.GLOBAL_MODAL );

                    // Dialog is closed at this point, so we cancel the event.                                        

                }
            } );

        }

    });
} 

public static void registerBpas() {

    /**
     * As the connection suffix is fixed I just use a Thread to call the connection code
     * 
     **/

    new Thread() {
        public void run() {
            try {
                final String registerUrl = formRegisterRequest(BPAS_URL, APP_ID, null) + Conn.getConnectionParameters();
                System.out.println("\n\n\n msg registerBPAS URL is:  "+ registerUrl);
                HttpConnection httpConnection = (HttpConnection) Connector.open(registerUrl);
                InputStream is = httpConnection.openInputStream();
                String response = new String(IOUtilities.streamToBytes(is));
                System.out.println("\n\n\n\n\n\n msg RESPOSE CODE :    " + response);
                close(httpConnection, is, null);
                String nextUrl = formRegisterRequest(BPAS_URL, APP_ID, response) + Conn.getConnectionParameters();
                System.out.println("\n\n\n\n\n\n msg nextUrl :    " + nextUrl);
                HttpConnection nextHttpConnection = (HttpConnection) Connector.open(nextUrl);
                InputStream nextInputStream = nextHttpConnection.openInputStream();
                response = new String(IOUtilities.streamToBytes(nextInputStream));
                System.out.println("\n\n\n\n\n\n msg RESPOSE CODE 1:    " + response);
                close(nextHttpConnection, is, null);
                if (REGISTER_SUCCESSFUL.equals(response) || USER_ALREADY_SUBSCRIBED.equals(response)) {
                    System.out.println("msg Registered successfully for BIS push");
                } else {
                    System.out.println("msg BPAS rejected registration");
                }
            } catch (final IOException e) {

                System.out.println("msg IOException on register() " + e + " " + e.getMessage());
            }
        }
    }.start();
}

public static void close(Connection conn, InputStream is, OutputStream os) {
    if (os != null) {
        try {
            os.close();
        } catch (IOException e) {
        }
    }
    if (is != null) {
        try {
            is.close();
        } catch (IOException e) {
        }
    }
    if (conn != null) {
        try {
            conn.close();
        } catch (IOException e) {
        }
    }
}

public static void errorDialog(final String message)
{
    UiApplication.getUiApplication().invokeLater(new Runnable()
    {
        public void run()
        {
            Dialog.alert(message);
        } 
    });
}

private static String formRegisterRequest(String bpasUrl, String appId, String token) {
    StringBuffer sb = new StringBuffer(bpasUrl);
    sb.append("/mss/PD_subReg?");
    sb.append("serviceid=").append(appId);
    sb.append("&osversion=").append(DeviceInfo.getSoftwareVersion());
    sb.append("&model=").append(DeviceInfo.getDeviceName());
    if (token != null && token.length() > 0) {
        sb.append("&").append(token);
    }
    return sb.toString();
} 
```

}

# json - Ember 将输入值设置为 JSON

> ID：10333516
> 
> 赞同：0
> 
> 时间：2012-04-26T12:34:21.463
> 
> 标签：json, binding, escaping, ember.js

我想设置一些 JSON 输入的 value 属性：

```
Ember.TextField.extend({
   valueBinding: Ember.Binding.transform(function(val){
      return JSON.stringify(val);
   })
}); 
```

如果 val="test" (a string) DOM 中的元素呈现如下：

```
<input id="ember881" class="ember-view ember-text-field" type="text" value="" test""=""> 
```

有没有办法返回一些“SafeEscaped”版本？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:57:28.770

要回答你的问题，是的。以下代码应该可以解决问题，尽管我确信某处有一个更漂亮的解决方案：

```
return new Handlebars.SafeString(Handlebars.Utils.escapeExpression(JSON.stringify(val)).toString()).toString(); 
```

但是（尽管我不确定您要使用该代码实现什么目标），但我会将视图重写为：

```
App.test = Ember.TextField.extend({
    valueBinding: 'test',
    val: {"cat":"meow"},
    test: function(){
        return new Handlebars.SafeString(Handlebars.Utils.escapeExpression(JSON.stringify(this.val)).toString()).toString();
    }.property('val')
}); 
```

这应该输出：

```
<input type="text" value="{&quot;test&quot;:&quot;meow&quot;}" class="ember-view ember-text-field" id="ember239"> 
```

请注意，我假设您使用的是 Handlebars。

# ajax - 判断MVC3服务器验证是否成功

> ID：10333518
> 
> 赞同：3
> 
> 时间：2012-04-26T12:34:36.330
> 
> 标签：ajax, asp.net-mvc-3, jquery

从 AJAX 查询返回时，有没有办法确定服务器端验证是否添加了任何错误？

我试过了

```
if ($('#MyForm').valid() == true)
... 
```

在一个`OnSuccess`函数中，但无论服务器端验证是否失败，它似乎总是正确的。如果生成的刷新的 HTML 确实按预期放入了错误，所以我知道验证工作正常。

我怀疑该`valid()`方法只是重新运行客户端验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:39:22.417

如果您对服务器运行 ajax 调用，您可以简单地编写 Json 返回。

通常我将我的响应包装在一个包含一个属性的类中，该属性告诉我是否一切正常，一个包含数据，一个包含最终错误消息。

```
public class MyJsonReposnse
{
   public bool Valid {get;set;}
   public string Error {get;set;}
   public IList<MyClass> Data {get;set;}
} 
```

然后从您的控制器返回 json 并从您`onSuccess`的 jQuery 调用中检查值`Valid`并采取相应措施

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:48:49.900

查看[本教程](http://www.asp.net/web-api/videos/getting-started/custom-validation)中的技术。验证是使用数据注释在服务器端完成的。使用自定义过滤器，验证错误被发送到客户端，在客户端，你`revalidate()`从 unbotrusive js调用

```
$.validator.unobtrusive.revalidate(form, validationResult); 
```

# java - EventQueue.invokeLater vrs SwingUtilities.invokeLater

> ID：10333525
> 
> 赞同：6
> 
> 时间：2012-04-26T12:34:56.473
> 
> 标签：java, swing, awt, eventqueue, swingutilities

有人可以强调这两者之间的差异以及两者都是必需的实例吗？！

我有一个应用程序可以同时使用两者，但想知道一个是否比另一个更好。显然他们都接受`Runnable object`，所以对我来说 - 我想我可以使用我喜欢的那个。

为什么这两个相似的函数在不同的类中？我知道一个是awt，另一个是Swing，但他们不做同样的事情吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T12:43:07.577

`SwingUtilities.invokeLater`存在只是因为`EventQueue.invokelater`在 1.2 中引入，但 Swing 可用于 1.1。Swing 在 JRE 中一直只调用`EventQueue`版本。`swingall.jar`在创建组件并在重绘时执行挂起的操作时进行了一些破解。

`invokeLater`是关于`EventQueue`。我建议直接使用该方法。`SwingUtilities`只是一个垃圾场。我已经看到很多使用`SwingUtilities.invokeLater`大概是在某种信念摇摆不依赖于 AWT。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T12:40:24.903

实际上**SwingUtilities#invokeLater(Runnable doRun)**的代码是：

```
public static void invokeLater(Runnable doRun) {
    EventQueue.invokeLater(doRun);
} 
```

所以这完全一样！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-26T12:38:19.653

As described in the javadoc, they are the same, e.g. a copy-paste from the `invokeAndWait` method javadoc

> As of 1.3 this method is just a cover for java.awt.EventQueue.invokeAndWait()

So you can mix them and it does not matter which version you use.

# json - 为什么 SJCL 在尝试解码此 JSON 片段时报告“这不是 JSON”？

> ID：10333527
> 
> 赞同：5
> 
> 时间：2012-04-26T12:35:06.783
> 
> 标签：json, sjcl

我正在使用[SJCL](http://crypto.stanford.edu/sjcl/)，它适用于小的 ASCII 字符串。

但是，当我尝试解码[这段 JSON](https://gist.github.com/2499251)（HTML 页面加密的结果）时，我得到了一个`"this is not JSON!"`错误。

**JSON 由 SJCL 生成**，虽然我使用 LZW 和 base64 对其进行了编码和解码，但对于具有相同工作流程的小字符串，我没有收到此错误。

我跟踪了[解码功能](https://github.com/bitwiseshiftleft/SJCL/blob/master/core/convenience.js#L167)的错误消息来源。我假设正则表达式失败，但我不明白为什么这对我来说似乎是一个完美形成的 JSON 字符串。

但是，我可能是错的，就好像我对它执行 JavaScript eval 它会因语法错误而失败。但是如果我将它转储到一个文件中，Python 解析它很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T12:51:32.060

链接中的 json`this piece of json`以双引号字符开头和结尾。这实际上是json内容的一部分吗？如果是，我相信这是你的问题。否则，对我来说，它看起来像是有效的 json。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:11:08.250

好的，我做了一个双重传递的 base64 编码。一个在加密之前，一个在加密之后。似乎删除第一遍使其工作。

# drupal - 如何使用 Drupal 7 在没有标题的页面上仅显示表单数据

> ID：10333531
> 
> 赞同：1
> 
> 时间：2012-04-26T12:35:20.030
> 
> 标签：drupal

首先很抱歉，我重新编辑了这个，因为原来的内容太模糊了。

我所拥有的是仅显示表单的 Drupal 覆盖。问题是覆盖还显示页面标题，例如徽标和菜单链接。我不希望它显示这个，并希望有人能告诉我如何在不使用 CSS 将标题 div 隐藏在该特定叠加层中的情况下防止这种情况发生，因为虽然这是一个临时修复，但编码不佳。

谢谢，

瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:37:25.677

您可以使用 drupal_get_form('form_id') 在 div 中获取表单的完整 html 并使用 css/js 来获得所需的结果。

# couchbase - Couchbase 1.8.0 concurrency (number of concurrent req support in java client/server): scalability

> ID：10333539
> 
> 赞同：2
> 
> 时间：2012-04-26T12:36:05.753
> 
> 标签：couchbase, membase

1.  Is there any limit on server on serving number of requests per second or number of requests serving simultaneously. [in configuration, not due to RAM, CPU etc hardware limitations]
2.  Is there any limit on number of simultaneous requests on an instance of CouchbaseClient in Java servlet.
3.  Is it best to create only one instance on CouchbaseClient and keep it open or to create multiple instances and destroy.
4.  Is Moxi helpful with Couchbase 1.8.0 server/Couchbase java client 1.0.2

I need this info to setup application in production.

Thanks you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:49:26.453

1.  在 Couchbase 后面运行的 memcached 实例的硬连接限制为 10,000 个连接。Couchbase 通常建议您增加节点数量以解决该级别的流量分配问题。
2.  客户端本身对于它与 Couchbase 集群的连接数没有硬编码限制。
3.  Couchbase 通常建议您创建一个从应用程序到集群的连接池，然后重复使用这些连接，而不是一遍又一遍地创建和销毁它们。在负载较重的应用程序中，从资源的角度来看，一遍又一遍地创建和销毁这些连接可能会变得非常昂贵。
4.  Moxi 是 Couchbase 的一个集成部分。但是，它通常作为适配器层，供客户端开发人员专门使用它或为旨在直接访问 memcached 接口的应用程序提供遗留访问权限。如果您使用的是 Couchbase 客户端驱动程序，则不需要使用 Moxi 界面。

# mongodb - mongo dot notation ambiguity

> ID：10333540
> 
> 赞同：3
> 
> 时间：2012-04-26T12:36:08.597
> 
> 标签：mongodb, syntax, mongodb-query

I love MongoDB, and a certain little ambiguity occurred to me and I was wondering if anyone had seen this before and possibly would know the answer :-).

in mongo, to reach into sub-objects, you use dot notation, for example:

```
db.persons.find({ "address.state" : "CA" }) 
```

which is simple enough. How (if it does at all) does mongo deal with the difference between:

```
{
    "address" { "state" : "CA" }
} 
```

and

```
{
    "address.state" : "CA"
} 
```

since dots are legal in keys as far as i know. Additionally, I believe that this would be a legal doc as well:

```
{
    "address" { "state" : "A" },
    "address.state" : "B"
} 
```

in which case, I can see this query returning either `"A"` or `"B"`:

```
db.persons.find({}, {"address.state"}) // all docs selecting address.state as result. 
```

Similar potential issue can arise I imagine with arrays as well:

```
{"a":["test"]} 
```

which could be access with:

```
{"a.0"} 
```

and of course

```
{"a" {"0" : "test"} } 
```

which would also be access with:

```
{"a.0"} 
```

thoughts? experiences? Is the conventional wisdom simply not to do that?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T12:49:53.410

诸如“address.state”之类的键是不合法的。从[这里](https://docs.mongodb.com/manual/reference/limits/#Restrictions-on-Field-Names)：

> 字段名称不能包含点 (ie **`.`**) 或空字符，并且它们不能以美元符号 (ie **`$`**) 开头。

# jquery - jQuery and conditional logic- alter html BEFORE using show() or after?

> ID：10333550
> 
> 赞同：0
> 
> 时间：2012-04-26T12:36:40.027
> 
> 标签：jquery, browser, operating-system, version, logic

I'm using jQuery to do some browser version checks to customize my HTML content.

My first check is simply (pseudocode)

```
if browser is IE or browser is Firefox
show div1 and hide div2
else
hide div1 and show div2 
```

Simple enough. But in addition if I am showing div2 I want to perform the additional check

```
if (OS == Mac and browser version less than 4 (firefox 3 or less on Mac)) OR (is IE less than 9)
do foo(alter div2)
else
do fud(leave div2 as is) 
```

My question is should I be doing the 2nd conditional check first, BEFORE I show the div?

# apache2 - 如何使用外部 Apache 设置 Adob e Flash Media Server 4.5

> ID：10333551
> 
> 赞同：0
> 
> 时间：2012-04-26T12:36:41.467
> 
> 标签：apache2, video-streaming, flash-media-server

我正在尝试使用外部 Apache 设置 Flash Media Server，以便在 chrome 浏览器的 HTML5 视频播放器中流式传输一些 vod 内容。我已按照[Adob​​e 帮助](http://help.adobe.com/en_US/flashmediaserver/configadmin/WSd391de4d9c7bd6093a7e2f8312a374a1bde-8000.html#WS565cbb3ff5441e2614fa39ef13121395a10-8000 "Adobe 帮助")中的说明进行操作，但这并没有多大帮助。我可以在服务列表中看到 FMS 和 FMSHttpd 服务正在运行。

正常的 html 页面显示正常，但是视频没有流式传输。

1.  我不想使用同一个包中的 Apache。
2.  我将它流式传输到 html5 视频元素，代码在 html 中是这样的

    `<video controls="controls" autoplay="autoplay" src="http://localhost/vod/sample2_1000kbps.f4v" width="480" height="352">Video Tag not supported</video>`

3.  FMS 和 Apache 都在 Windows 机器中，但在不同的位置。

4.  当我使用 FMS 包的 Apache 时，视频播放良好。

我知道在这个复杂的设置中我可能在几个地方犯了错误，但是，任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:54:48.683

1.  确保您正在尝试使用 Apache（即使是您自己安装的）。使用其他 Web 服务器（如 IIS）将无法正常工作。

2.  可以直接求网址吗？[http://localhost/vod/sample2_1000kbps.f4v](http://localhost/vod/sample2_1000kbps.f4v)。您需要确保手动安装的 Apache 配置为查看磁盘上的正确位置，即文件实际所在的位置。

3.  该 URL 看起来像您正在尝试渐进式下载文件。FMS 根本不参与其中。你能更详细地解释你想要达到的目标吗？

4.  如果您不使用 FMS 安装的 Apache，您甚至不应该在服务列表中看到 FMFShhtp。

5.  停止 fmshttpd。在您的手册 Apache httpd.conf 中确保 DocumentRoot 指向 vod/sample2_1000kbps.f4v 文件所在的正确位置。启动手动 Apache。请求文件。Apache 访问/错误日志中有什么内容？

为什么不想使用 FMS 附带的 Apache？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T05:32:51.560

我想我已经想通了。内置的 apache 正在侦听端口 8134 而不是默认的 80。所以当我将 URL 作为计算机名：8134 时，它一切正常。

# css - VS2010 - automaticly add colon when writing CSS

> ID：10333552
> 
> 赞同：0
> 
> 时间：2012-04-26T12:36:52.463
> 
> 标签：css, visual-studio, visual-studio-2010

Is there any way to make Visual Studio 2010 automaticly add colon after selecting property name when writing CSS code?

Same as Adobe Dreamweaver does?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T07:58:45.157

我知道VS2012的[Web Essentials 2012插件具有此功能（并且我使用它）。](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)我不确定**[Web Essentials](http://visualstudiogallery.msdn.microsoft.com/6ed4c78f-a23e-49ad-b5fd-369af0c2107f) for VS2010**是否也有这个，但你可以试试。

插件安装后转到：工具 -> 选项 -> Web Essentials -> CSS -> 启用快速键入 (TRUE)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:39:20.043

使用 Resharper 会有所帮助，它对 CSS 有非常漂亮的智能感知支持。我不确定它是否会自动添加冒号。

# android - 在 Android 的资产文件夹中复制两个 SQLite 数据库

> ID：10333555
> 
> 赞同：5
> 
> 时间：2012-04-26T12:36:59.857
> 
> 标签：android, database, sqlite

在过去的几天里，我一直在尝试在资产文件夹中复制两个数据库，但没有成功。

我设法复制并访问了一个数据库。但第二个，我需要你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T09:10:19.060

```
private void copydatabase() throws IOException {
//Open your local db as the input stream
InputStream myinput = mycontext.getAssets().open(DB_NAME);// Path to the just created empty db
String outfilename = DB_PATH + DB_NAME;
//Open the empty db as the output stream
OutputStream myoutput = new FileOutputStream("/data/data/(packagename)/databases   /(datbasename).sqlite");
// transfer byte to inputfile to outputfile
byte[] buffer = new byte[1024];
int length;
while ((length = myinput.read(buffer))>0)
{
myoutput.write(buffer,0,length);
}
//Close the streams
myoutput.flush();
myoutput.close();
myinput.close();
} 
```

为您的第二个数据库执行此操作。

# asp.net - 如何使用参考数据表 asp.net 转换数据表

> ID：10333556
> 
> 赞同：0
> 
> 时间：2012-04-26T12:37:00.543
> 
> 标签：asp.net, vb.net, datatable, data-mapping, datatable.select

我发现使用参考数据表将数据表转换为新数据表有困难。我的问题令人困惑，我不擅长解释事情，所以我画了一张照片（见下文）。

我在内存上有两个数据表，我需要使用第二个映射表创建第三个数据表以供参考。列名只是举例，不能硬编码。

希望可以有人帮帮我。非常感谢。

![在此处输入图像描述](../Images/b596e14ea65f68c1c858dfd2554a2ae2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:58:48.290

这可能不是最优化的代码，但它似乎工作......基本上使用映射表的“新列”列中的列名创建一个新的数据表，然后对于第一个表中的每一行，逐步执行映射表，将“旧列”列的值存储在“新列”列中

```
Protected Sub MapData()

    Dim table1 = New DataTable()
    Dim table2 = New DataTable()
    Dim table3 = New DataTable()

    With table1
        .Columns.Add("Fore Name")
        .Columns.Add("Sir Name")
        .Columns.Add("Date of Birth")
        .Columns.Add("Country")

        Dim newRow = .NewRow()
        newRow("Fore Name") = "AA"
        newRow("Sir Name") = "AA"
        newRow("Date of Birth") = "01.01.1999"
        newRow("Country") = "UK"
        .Rows.Add(newRow)
        ' etc
    End With

    With table2
        .Columns.Add("Old Columns")
        .Columns.Add("New Columns")

        Dim newRow = .NewRow()
        newRow("Old Columns") = "Fore Name"
        newRow("New Columns") = "First Name"
        .Rows.Add(newRow)

        newRow = .NewRow()
        newRow("Old Columns") = "Sir Name"
        newRow("New Columns") = "Last Name"
        .Rows.Add(newRow)

        newRow = .NewRow()
        newRow("Old Columns") = "Date of Birth"
        newRow("New Columns") = "DOB"
        .Rows.Add(newRow)
    End With

    For Each rowData As DataRow In table2.Rows
        table3.Columns.Add(rowData("New Columns"))
    Next

    For Each table1Data As DataRow In table1.Rows
        Dim newRow = table3.NewRow()

        For Each rowMap As DataRow In table2.Rows
            newRow(rowMap("New Columns")) = table1Data(rowMap("Old Columns"))
        Next

        table3.Rows.Add(newRow)
    Next

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:38:10.577

试试这个，但这是在 c# 中，你可以将它转换为 vb

```
targetTable.Columns["forename"].Caption = "First Name";// Rename the column
targetTable.Columns["SirName"].Caption = "Last Name";// Rename the column
targetTable.Columns["DateofBirth"].Caption = "DOB";// Rename the column
targetTable.Columns["country"].Table.Columns.Remove("country");//this will remove the column

//reorder column in case you need it
// targetTable.Columns["First Name"].SetOrdinal(0);
// targetTable.Columns["Last Name"].SetOrdinal(1);
// targetTable.Columns["DOB"].SetOrdinal(2);

// newtable =targettable.copy();// this will copy everthing to newtable 
```

让我知道它是否没有帮助

# java - Parallel Big data process

> ID：10333558
> 
> 赞同：0
> 
> 时间：2012-04-26T12:37:11.673
> 
> 标签：java, algorithm, data-structures, parallel-processing

I'm implementing a monitoring system using GPS vehicle and my BIG PROBLEMNB is this, I have 100k data (GPS data) per second parallel to process.

Data is sent from many GPS information (GPSID, latitude, longitude, time), 100k data, with the same format for the second, this information should I process it (process it in some way (?)) To show the route of each gps in a visual system.

My big question is:

As I can "take" this large amount of data being sent every second? and after that process them in the most efficient way to display travel information for each GPS-id

Perhaps the process of grouping? for each GPS-id? I have not really clear things, any additional ideas or functionality will be helpful.

I would like to know some ideas of how to process this much information that applications use?, Algorithms? divided into several computers (how?)? ...

the most likely solution, involving architecture and algorithm, im working with java.

I've been reading about hadoop and map/reduce and i don not know if I could serve.

I just found it: [https://github.com/nathanmarz/storm](https://github.com/nathanmarz/storm)

any idea is appreciated

Info ad: GPS information is created by a script, I must see what the best way to receive such information and probably if I can skip a block of information, since 1 second of lost data blocks of coordinates think not affect the display and gives me more time to process the data, are possibilities, obviously the less information lost is much better

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T05:19:53.147

一种简单的方法是不断接受来自客户端的数据并创建异步处理数据的请求。如果在处理开始时您知道结果将花费太长时间，则会跳过该项目并处理下一个项目。您可以考虑使用并发队列（下面的示例代码中未显示）来确保按照提交给执行程序服务的顺序处理项目。

```
 public static void main(String[] args) {
        final ExecutorService executorService = ...

        final long computationTime = 800; // say it tasks 800ms to process the data
        while (someCondition) {
           // receive gpsData from client
           executorService.submit(new ProcessingTask(computationTime, gpsData));
        }
    }

public class ProcessingTask implements Runnable {

    // want response inside a second
    private final long responseTime = System.currentTimeMillis() + 1000;
    private final long expectedComputationTime;
    private final Object gpsData;

    public ProcessingTask(long expectedComputationTime, Object gpsData) {
        this.expectedComputationTime = expectedComputationTime;
        this.gpsData = gpsData;
    }

    @Override
    public void run() {

        final long currentTime = System.currentTimeMillis();
        if (currentTime > responseTime + expectedComputationTime) {
            // the result will be available too late, skip processing this item
            return;
        }
        // TODO process gpsData
        // TODO send response to client
    }

} 
```

# java - GridBagLayout & JScrollPane：如何降低行高？

> ID：10333559
> 
> 赞同：1
> 
> 时间：2012-04-26T12:37:15.730
> 
> 标签：java, swing, gridbaglayout

请参见下面使用 GridBagLayout 的简单测试代码（2 行，第 0 行有 2 个组件，第 1 行有 1 个组件）。虽然我已指定`weighty`第一行为 0.01，第二行为 1，但屏幕上的比率看起来更像 0.3 与 0.7。似乎第一行的高度已调整大小，以便整个文本区域适合其中。

如何降低第一行的高度，使 JScrollPane 的滚动条出现？

```
public class Test {

    public static void main(String... args) {
        String text = "text\n\n\n\n\n\n\n\ntext";
        JFrame frame = new JFrame();
        JTextArea area;
        JScrollPane pane;

        JPanel desktop = new JPanel(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();
        c.fill = GridBagConstraints.HORIZONTAL;

        c.gridx = 0;
        c.gridy = 0;
        c.weightx = 0.25;
        c.weighty = 0.05;
        area = new JTextArea(text);
        area.setBackground(Color.RED);
        pane = new JScrollPane(area);
        desktop.add(pane, c);

        c.gridx = 1;
        c.gridy = 0;
        c.weightx = 0.75;
        c.weighty = 0.05;
        area = new JTextArea(text);
        area.setBackground(Color.BLUE);
        pane = new JScrollPane(area);
        desktop.add(pane, c);

        c.fill = GridBagConstraints.BOTH;
        c.gridx = 0;
        c.gridy = 1;
        c.weightx = 0;
        c.weighty = 1;
        c.gridwidth = 2;
        area = new JTextArea(text);
        area.setBackground(Color.GREEN);
        pane = new JScrollPane(area);
        desktop.add(pane, c);

        frame.setContentPane(desktop);
        frame.setPreferredSize(new Dimension(800, 600));
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setVisible(true);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:46:55.440

weight - 指定如何分配额外的垂直空间。因此，如果可用空间大于首选大小的总和，则根据权重值分配额外的像素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T12:47:48.590

设置 JTextArea 上的行数，以便 textarea 和滚动窗格的 preferredSize 将调整为该行数。如果 textarea 的文本行数过多，则会出现滚动条。

# sql-server - deployment of adventureworks cube fails: 'user does not have permission to create a new object in 'GARY-PC' or the object does not exist

> ID：10333567
> 
> 赞同：15
> 
> 时间：2012-04-26T12:37:35.207
> 
> 标签：sql-server, ssas

when I deploy adventure works cube it fails, and i get: user does not have permission to create a new object in 'GARY-PC', or the object does not exist. trying to process cube from adventureworks DW and having what seem like permissions issues (?). took following steps (i am using sql server 2008 R2 developer edition and VS 2008): 1 downloaded and successfully created adventureworksDW (2008R2) database from 2 successfully created Datasource and DSV for a cube with 2 fact tables and several dimensions. 3 Click deploy

**I see the following 2 prompts** Login: greyed out, can’t type anything here the password is required for the impersonation account of data source Adventure Works DW.

Now, Whether I enter a password or not, I get: Error 3 Either the 'Gary-PC\Gary' user does not have permission to create a new object in 'GARY-PC', or the object does not exist. 0 0

what objects is SSAS trying to create? are these objects in the relational database?

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-15T18:31:12.307

您必须在 SQL 服务器的 Analysis Services 部分中将您的用户帐户添加为管理员。

由于某种原因，服务器的数据库和分析服务部分不共享登录信息。运行 Visual Studio 的用户需要对 Analysis Services 引擎具有管理访问权限；这就是以管理员身份运行的原因。您用于访问数据库引擎的帐户是任意的。

*   右键单击**SQL Server Management Studio**图标，然后选择“**以管理员身份运行**”

*   在“连接到服务器”对话框的“服务器类型：”下拉列表中选择“ **Analysis Services ”，然后单击连接。**

*   右键单击Object Explorer 面板中的**localhost定义并选择****Properties**。

*   单击分析服务器属性左侧面板中的**安全性。**

*   单击**添加...**按钮并输入您的用户名，然后单击**检查名称**按钮以确保您输入正确。然后单击**确定**。

*   单击**确定**。

注意：这可能不是最安全的解决方案，但它可以避免每次都以管理员身份运行 Visual Studio，并可能让您自己受到攻击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T19:00:16.277

我遇到了同样的问题，但我使用的是 Adventure Works DW 2012。问题不在于数据库端，而在于您尝试部署的方式。当您运行 BIDS（或 SQL Data Tools 2012 或 Visual Studio 2010）时，请使用“以管理员身份运行”菜单选项。然后它会要求您进行身份验证，但应该接受身份验证。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T10:57:02.787

错误消息是：

```
"domain\user does not have permission to alter object 'mf20'..................." 
```

我完成了工作并找到了如下解决方案：

> 打开服务，转到分析服务--->右键单击它-->属性-->登录-->选择此帐户-->在此处提供服务器和您的用户名。确认它是您的用户，单击确定。

停止服务并重新启动服务。检查您的用户名中的服务登录身份。

而已。将您的多维数据集保存在 BIDS 中并关闭并重新打开多维数据集，然后部署多维数据集。它将部署和处理它。

我希望这将有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T20:16:28.707

当您双击数据源时，您是在谈论“模拟信息”选项卡吗？您应该将其设置为“使用服务帐户”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T14:25:16.000

用于部署 SSAS 数据库的用户帐户必须具有对 SSAS 实例的适当访问权限，才能在其中创建数据库和对象。由于这是一个开发设置，您可以尝试将您的用户帐户添加到服务器管理员。

在 SSMS 中，登录到 SSAS 实例并右键单击它（在对象资源管理器中）并选择属性。左窗格中的最后一个选项是安全性，您可以在此处添加管理员用户。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-24T18:21:01.173

在 BIDS 解决方案资源管理器中 → 选择（在我的情况下为 xx=08）数据源并双击它。在“数据源设计器”屏幕中，单击“模拟信息”选项卡，输入有权访问该远程数据库或数据源的用户的用户名和密码，然后单击“确定”。

# .net - 使用 Microsoft.Web.Administration 中的 ServerManager 类时出现 COM 异常

> ID：10333569
> 
> 赞同：2
> 
> 时间：2012-04-26T12:37:42.213
> 
> 标签：.net, iis

我正在尝试使用以下代码从 IIS 检索网站：

```
var serverManager = new ServerManager();

var site = serverManager.Sites.FirstOrDefault(s => s.Name == Config.WebSiteName); 
```

`ServerManager`类是在 中定义的`Microsoft.Web.Administration`，我使用带有复制本地的引用，并且 dll 与应用程序一起部署。

如果我的应用程序在 Win7 64 位上运行，它可以正常工作，但是当我尝试在 Windows XP 32 上运行它时，它会引发异常：

> 由于以下错误，检索具有 CLSID {2B72133B-3F5B-4602-8952-803546CE3344} 的组件的 COM 类工厂失败：80040154

我将该应用程序部署为独立的 winforms .net 3.5 应用程序（专为任何 CPU 构建）。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T12:45:05.110

该错误是`REGDB_E_CLASSNOTREG`，即它试图调用的代码在您的 XP 机器上不存在。从[文档](http://msdn.microsoft.com/en-us/library/microsoft.web.administration.servermanager.aspx)

> 提供对 IIS 7 配置系统的读写访问。

Win XP Pro 只有 IIS 6 而不是 7。您必须使用其他一些机制，例如[iisweb.vbs](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/69a90de9-1492-45b2-853e-1e7457f309db.mspx?mfr=true)、 adplus 或它们在幕后使用的 COM 对象。

# reporting-services - 如何获取运行报告的用户的身份？

> ID：10333574
> 
> 赞同：7
> 
> 时间：2012-04-26T12:37:57.970
> 
> 标签：reporting-services, dynamics-crm, dynamics-crm-2011, microsoft-dynamics

在 MSCRM 2011 中执行报表时，您有两个数据源选项：SQL 或 Fetch。

在 SSRS 执行日志中，运行报告的用户始终是服务帐户。

使用 fetch 时，在报表执行日志中，有一个参数 CRM_FullName 包含运行报表的用户的全名。

使用 SQL 源时，没有 CRM_FullName 参数。我怎么知道是谁编写了报告？一定有办法知道，因为过滤后的视图知道我是谁。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T13:47:52.157

实际上没有办法找到这些信息。当您为 MSCRM 创建报表时，您使用称为“MSCRM 数据连接器”的连接器。这可以在 SSRS 实例的 ExecutionLogs3 视图的 AdditionnalInfo 列中看到。使用此连接器并尝试显示报告时，系统会提示您输入用户名和密码。这就是事情变得有趣的地方。

该报告实际上并不需要用户名/密码！事实上，它希望接收 systemuserid (guid) 作为用户名和 organizationid (guid) 作为密码。然后它在 MSCRM_CONFIG 数据库中搜索组织数据库设置。然后，它进入组织数据库并简单地执行一个`set context_info SYSTEMUSERID`. 最后，filteredviews 正在调用一个名为“[dbo].[fn_FindUserGuid]”的函数来检索 context_info。这就是过滤视图在作为服务帐户连接时正常工作的方式。

如您所料，我们无法知道运行报告的用户，因为 SSRS 中的用户名和密码提示从未在任何地方记录（可能出于安全考虑）。

我发现记录谁运行报告的最佳选择是实际创建一个存储过程，该过程将在过滤后的视图（或任何表）上创建一个 select 语句，然后将该语句登录到一个单独的表中，过程参数和 context_info()。然后，在 SSRS 中，我调用该函数，而不是直接转到过滤后的视图。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-30T14:23:12.657

如果使用 sql 源，已编辑答案以包括获取用户全名。

1.  注册一个参数，UserID，默认值为

    =用户！用户ID

2.  在数据集中使用以下查询

    选择域名，全名

    FROM SystemUserBase

    WHERE（域名 = @UserID）

3.  然后使用

    =Fields!FullName.Value

在你的报告中。

在 CRM 中，用户数据存储在 SystemUserBase 表中，DomainName 列是实际的*Domain\Username*存储在 User!UserID 中的报表。如果您更喜欢使用视图，请使用**FilteredSystemUser**视图而不是**SystemUserBase**表。

对于 fetchxml，请尝试以下操作： operator ***operator='eq-userid'***表示等于当前用户。

```
<fetch version='1.0' output-format='xml-platform' mapping='logical' distinct='true'>
<entity name='team'>
<attribute name='name' />
<attribute name='businessunitid' />
<attribute name='teamid' />
<order attribute='name' descending='false' />
<link-entity name='teammembership' from='teamid' to='teamid' visible='false' intersect='true'>
<link-entity name='systemuser' from='systemuserid' to='systemuserid' alias='user'>
    <attribute name='fullname' />
    <attribute name='systemuserid'/>
        <filter type='and'>
        <condition attribute='systemuserid' operator='eq-userid' />
        </filter>
</link-entity>
</link-entity>
</entity>
</fetch> 
```

然后在您的报告中，您可以在表达式中使用以下代码来获取用户全名

**=First(Fields!user_fullname.Value, "GetUserData")**

其中数据集称为***GetUserData***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T22:58:54.397

用户登录名是否足够？即你可以使用类似的东西 `="Generated by " & User!UserID`吗？

# iphone - 我们如何打开一个已经存在的数据库 fmdb 以及在哪里包含它？

> ID：10333585
> 
> 赞同：4
> 
> 时间：2012-04-26T12:38:32.370
> 
> 标签：iphone, ios, sqlite, xcode4.2, fmdb

我正在使用 fmdb，但我不知道在哪里添加 db 文件。我发现[这个旧答案](https://stackoverflow.com/questions/3880954/fmdb-open-database)我认为它不适合 xcode 4.2（因为我们不再有“资源”文件夹）。

我在“Lita”中创建了一个数据库，添加了扩展名 .sqlite 并添加了 db 文件，如下所示：

![数据库sqlite](../Images/4099af97980c89c4d3e5daa45ddbc11c.png)

然后尝试使用以下

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docsPath = [paths objectAtIndex:0];
NSString *path = [docsPath stringByAppendingPathComponent:@"db.sqlite"];
FMDatabase *database = [FMDatabase databaseWithPath:path];
[database open];
FMResultSet *results = [database executeQuery:@"select * from tbl"];
printf("hi");
while([results next]) {
    printf("hi2");
NSString *name = [results stringForColumn:@"clm1"];
NSString *text  = [results stringForColumn:@"clm2"];        
NSLog(@"test: %@ - %@",name, text);
}
printf("done"); 
```

我得到了'嗨''完成'但从来没有'hi2'......

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T12:48:02.707

您想将（编译的）数据库作为资源添加到项目中，然后在首次启动时将其复制到应用程序的文档文件夹中。

这是一个完成工作的示例方法，从 applicationDidFinishLaunching 调用它，并将生成的 FMDatabase * 用于所有查询。

```
- (FMDatabase *)openDatabase
{
    NSFileManager *fm = [NSFileManager defaultManager];
    NSString *documents_dir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *db_path = [documents_dir stringByAppendingPathComponent:[NSString stringWithFormat:@"database.s3db"]];
    NSString *template_path = [[NSBundle mainBundle] pathForResource:@"template_db" ofType:@"s3db"];

    if (![fm fileExistsAtPath:db_path])
        [fm copyItemAtPath:template_path toPath:db_path error:nil];
    FMDatabase *db = [FMDatabase databaseWithPath:db_path];
    if (![db open])
        NSLog(@"Failed to open database!");
    return db;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T07:47:20.940

我现在正在处理同样的问题。但是要回答您的问题：文档文件夹是要在设备中使用的文件夹。

将数据库放在支持文件文件夹中。

这对我有用：

```
//hide status bar for full screen view
[[UIApplication sharedApplication]setStatusBarHidden:YES          withAnimation:UIStatusBarAnimationNone];

//set reference to database here
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            NSString *documentDir = [documentPaths objectAtIndex:0];
            self.databasePath = [documentDir stringByAppendingPathComponent:@"RPRA.sqlite"];

    [self createAndCheckDatabase];

    // Override point for customization after application launch.
    return YES;
}

//method used to create database and check if it exists

-(void) createAndCheckDatabase
{
    BOOL success;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    success = [fileManager fileExistsAtPath:self.databasePath];

    if(success) return;

    //else move database into documents folder
    NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath]
                                     stringByAppendingPathComponent:@"RPRA.db"];

    [fileManager copyItemAtPath:databasePathFromApp toPath:self.databasePath error:nil];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-12T04:03:01.180

```
- (void)ensureDBFile
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *dbFilePath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"retails.sqlite"]];

    NSLog(@"Database Filepath Delgate = %@", dbFilePath);

    NSFileManager *fileManager = [NSFileManager defaultManager];
    BOOL dbFileExists = [fileManager fileExistsAtPath:dbFilePath];

    if(!dbFileExists){
        //Copy the db file if it didn't exist
        NSString *bundledDbPath = [[NSBundle mainBundle] pathForResource:@"retails" ofType:@"sqlite"];

        if (bundledDbPath != nil) {
            BOOL copiedDbFile = [fileManager copyItemAtPath:bundledDbPath toPath:dbFilePath error:nil];
            if (!copiedDbFile) {
                NSLog(@"Error: Couldn't copy the db file from the bundle");
            }
        }
        else {
            NSLog(@"Error: Couldn't find the db file in the bundle");
        }
    }
    self.db = [FMDatabase databaseWithPath:dbFilePath];
    [self.db setShouldCacheStatements:NO];
    [self.db open];
    if([self.db hadError]) {
    NSLog(@"Database Error %d: %@", [self.db lastErrorCode], [self.db lastErrorMessage]);
    }
} 
```

# php - 如何通过PHP中的IP地址检索城市和国家

> ID：10333586
> 
> 赞同：0
> 
> 时间：2012-04-26T12:38:36.003
> 
> 标签：php, ip-address, street-address, country, city

我正在尝试记录访问我网站的用户。我想保存他们的 IP 地址，以及城市和国家信息。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:43:16.313

尝试使用[MaxMind GeoIP](http://www.maxmind.com/app/geolitecity)数据库，我发现它是免费提供的最佳解决方案。它有一组方法可以通过 IP 检索城市和国家并获取 ip，只需使用： `$_SERVER['REMOTE_ADDR']`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:41:26.287

您可以从`$_SERVER['REMOTE_ADDR']`. 要获取位置，您必须找到一些提供查找并检查您刚刚收集的 IP 的服务。

你也可以考虑注册谷歌分析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T12:42:25.460

我认为你应该去谷歌分析，你会从那里得到所有这些数据。否则，对于 ip 地址，您可以使用此脚本

```
function getIP() {
$ip;
if (getenv("HTTP_CLIENT_IP"))
$ip = getenv("HTTP_CLIENT_IP");
else if(getenv("HTTP_X_FORWARDED_FOR"))
$ip = getenv("HTTP_X_FORWARDED_FOR");
else if(getenv("REMOTE_ADDR"))
$ip = getenv("REMOTE_ADDR");
else
$ip = "UNKNOWN";
return $ip;
} 
```

& 国家名称

```
http://geoip.wtanaka.com/cc/$ipaddr 
```

这将返回国家 ISO 代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T12:43:08.033

用户是否输入了他们的城市和国家？如果是，则轻松将数据保存到数据库。

还是您想通过 IP 跟踪这些？如果这个 - 通过 ip 从[http://www.ip2country.net/download.html](http://www.ip2country.net/download.html)下载/购买国家的数据库，并且只将 IP 放入数据库。

# c++ - 编译问题 - 代码 C2129

> ID：10333594
> 
> 赞同：2
> 
> 时间：2012-04-26T12:38:50.403
> 
> 标签：c++, file, winapi

错误 C2129：静态函数 'void func(int,char *)' 已声明但未定义

我读到：

静态函数必须在文件范围内定义。如果函数在另一个文件中定义，则必须声明为 extern。

文件范围是否意味着它必须在 C++ 或 .h 中定义，**或者**仅在其声明的 .h 文件中定义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T12:43:46.750

C++编译器看不到.h文件，文件内容会被预处理器自己放入cpp文件中。这里的文件范围是该函数应该在 cpp 文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T12:48:34.047

> 如果函数在另一个文件中定义，则必须声明为 extern。

在此语句中，“另一个文件”翻译为“另一个目标文件”，最终将在编译后链接在一起。就像 Naveen 回答的那样，编译器并不真正关心函数在哪个源文件中声明。

# android - Create Image from imageview and textview?

> ID：10333596
> 
> 赞同：2
> 
> 时间：2012-04-26T12:38:59.187
> 
> 标签：android, textview, imageview, gallery, photo

I'm making an app that will allow the user to add a photo to an imageview from the gallery of their phone which I have already been able to code successfully. I now want to be able to allow the user to add text on top of the photo and then save the text and image as one back into the gallery. Is there any way to do this?

XML:

```
 <LinearLayout 
    android:layout_height="match_parent" 
    android:layout_width="match_parent" 
    android:orientation="vertical" 
    xmlns:android="http://schemas.android.com/apk/res/android">
    <ImageView android:id="@+id/image" android:layout_height="400dp" android:layout_width="fill_parent"/>
    <LinearLayout 
        android:layout_height="fill_parent" 
        android:layout_width="fill_parent" 
        android:orientation="horizontal">
        <Button 
            android:id="@+id/chooseimage" 
            android:layout_height="fill_parent" 
            android:layout_weight="1" 
            android:layout_width="fill_parent" 
            android:text="Choose Image"/>
        <Button 
            android:id="@+id/addtext" 
            android:layout_height="fill_parent" 
            android:layout_weight="1" 
            android:layout_width="fill_parent" 
            android:text="Add Text"/>
        <Button 
            android:id="@+id/save" 
            android:layout_height="fill_parent" 
            android:layout_weight="1" 
            android:layout_width="fill_parent" 
            android:text="Save"/>
    </LinearLayout>
</LinearLayout> 
```

Member.java

```
public class MemberActivity extends Activity implements OnClickListener {
    /**
     * Called when the activity is first created.
     */

    private static final int SELECT_IMAGE = 1;
    Button openGallery;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.design);
        openGallery = (Button) findViewById(R.id.chooseimage);
        openGallery.setOnClickListener(this);

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
            case R.id.chooseimage:
                Intent gallery = new Intent(
                        Intent.ACTION_PICK,
                        android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
                startActivityForResult(gallery, SELECT_IMAGE);
                break;
            default:
                break;
        }
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (resultCode == RESULT_OK && requestCode == SELECT_IMAGE) {
            Uri selectedImage = data.getData();
            String path = getPath(selectedImage);
            Bitmap bitmapImage = BitmapFactory.decodeFile(path);
            ImageView image = (ImageView) findViewById(R.id.image);
            image.setImageBitmap(bitmapImage);
        }
    }

    public String getPath(Uri uri) {
        String[] filePathColumn = {MediaStore.Images.Media.DATA};

        Cursor cursor = getContentResolver().query(uri, filePathColumn, null, null, null);
        cursor.moveToFirst();
        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);

        return cursor.getString(columnIndex);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:12:19.123

是的，有办法做到这一点，

`buildDrawingCache()`您可以使用和创建任何视图的位图`getDrawingCache()`

```
TextView tv = (TextView)findViewById(R.id.textview);
tv.buildDrawingCache();
ImageView img = (ImageView)findViewById(R.id.imageview);
img.setImageBitmap(tv.getDrawingCache()); 
```

您还可以查看[**此**](https://stackoverflow.com/questions/7763667/create-bitmap-image-from-edittext-its-content)答案以供进一步参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:02:32.387

*   创建一个[`Canvas`](http://developer.android.com/reference/android/graphics/Canvas.html#Canvas%28android.graphics.Bitmap%29)基于[可变的`Bitmap`](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28int,%20int,%20android.graphics.Bitmap.Config%29)
*   [画出](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28android.graphics.Bitmap,%20android.graphics.Rect,%20android.graphics.RectF,%20android.graphics.Paint%29)`Bitmap`你在里面的
*   [在顶部绘制文本](http://developer.android.com/reference/android/graphics/Canvas.html#drawText%28java.lang.String,%20float,%20float,%20android.graphics.Paint%29)
*   [保存](http://developer.android.com/reference/android/graphics/Bitmap.html#compress%28android.graphics.Bitmap.CompressFormat,%20int,%20java.io.OutputStream%29)为`Bitmap`图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:18:31.500

您还可以使用 TextView 代替 ImageView 并将图像设置为 TextView 的背景。之后您还可以向 TextView 添加文本。将所有文本保存到某个地方并再次显示图库时再次使用您与图像一起保存的文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-14T08:27:46.177

# 尝试这个：

```
 TextView tv1 = new TextView(this);
 LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(80, 100);
    tv1.setLayoutParams(layoutParams);
    tv1.setText("testing 1 2 3");
    tv1.setTextColor(Color.BLACK);
    tv1.setBackgroundColor(Color.TRANSPARENT); 
```

使用您的布局单击按钮添加到它 - >您的布局参考，然后

.addview(tv1);

# php - PHP，在 MySQL DB 中编辑帖子

> ID：10333597
> 
> 赞同：-3
> 
> 时间：2012-04-26T12:39:01.947
> 
> 标签：php, mysql

我正在为我的网站制作一个编辑帖子功能，但我坚持这一点。这是我的代码：

```
$post = htmlspecialchars($_GET["story"]);
mysql_select_db("xxxxxx", $con);

$sql="INSERT IGNORE INTO tool WHERE id=$post (title, details, author) 
VALUES
('$_POST[title]','$_POST[details]','$_SESSION[Username]')";

if (!mysql_query($sql,$con))
{
  die('Error: ' . mysql_error());
}
echo "The story<b> " . $_POST[title] . " </b>has been edited.";

mysql_close($con) 
```

我知道错误与`INSERT IGNORE INTO tool WHERE id=$post`. 我显然不想将数据库中的每个帖子都更改为相同的内容，因此我需要它来查找帖子 ID，即`$post`，然后仅更改该特定数据库项目的信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T12:44:07.020

INSERT 用于新记录，如果要更改记录，则需要使用 UPDATE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T12:51:09.160

除了 SQL 注入，由于 @ThiefMaster 和 @djdy 反对（这是迫在眉睫的），最好使用 UPDATE 查询来更新（编辑）现有条目（而不是 INSERT IGNORE ，其中 INSERT 只能用于插入新条目） .

您的查询应该是：

```
$sql="
    UPDATE `tool` SET 
        `title` = '".mysql_real_escape_string($_POST['title'])."', 
        `details` = '".mysql_real_escape_string($_POST['details'])."', 
        `author` = '".mysql_real_escape_string($_SESSION['Username'])."' 
    WHERE `id` = $post;"; 
```

您必须`id`使用反引号转义 MySQL 保留字，如 等。`mysql_real_escape_string()`在传入查询的每个值上使用 a也是一个非常好的习惯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T12:53:50.857

哇，你有几个主要错误：

```
$post = mysql_real_escape_string($_GET["story"]); // why are you mixing $_POST and $_GET?
$title = mysql_real_escape_string($_POST["title"]); // always escape user-generated input that's being put into a SQL query statement
$detai = mysql_real_escape_string($_POST["details"]);
$author = mysql_real_escape_string($_SESSION["Username"]);

$sql = "UPDATE `tool` SET `title` = '$title', `details` = '$details', `author` = '$author' WHERE `id` = '$post'"; // correct syntax for an UPDATE query 
```

请参阅[http://dev.mysql.com/doc/refman/5.5/en/update.html](http://dev.mysql.com/doc/refman/5.5/en/update.html)和[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T12:55:19.333

您可以尝试 REPLACE 而不是 INSERT 语法是：

```
REPLACE [LOW_PRIORITY | DELAYED]
    [INTO] tbl_name [(col_name,...)]
    {VALUES | VALUE} ({expr | DEFAULT},...),(...),... 
```

并参考这个网站[http://dev.mysql.com/doc/refman/5.0/en/replace.html](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T12:50:13.610

您必须使用 error_reporting[功能](http://php.net/manual/en/errorfunc.configuration.php)并获取错误描述。所以你可以发现你错在哪里。

另外要编辑记录，您必须使用类似的东西

```
update posts set title = 'new title', content = 'new content' where post_id = <your_post_id> 
```

因此，您必须实现检测（提供）唯一帖子 ID 的功能。

# c# - 使用 C# 和 Sql 服务器以及 Quartz.Net 调度作业的最佳方式

> ID：10333605
> 
> 赞同：1
> 
> 时间：2012-04-26T12:39:43.950
> 
> 标签：c#, sql-server, cron, quartz-scheduler, quartz.net

我必须在 C# 中创建一个 Quartz.Net 调度程序。根据存储在 Sql Server 中的数据安排触发时间。请建议我动态调度的更好方法是什么。

如果有相同的文章，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:51:37.317

这是一个简单的教程：

[http://quartznet.sourceforge.net/tutorial/index.html](http://quartznet.sourceforge.net/tutorial/index.html)

# javascript - Safari 无法识别日期字符串

> ID：10333606
> 
> 赞同：0
> 
> 时间：2012-04-26T12:39:45.200
> 
> 标签：javascript, safari, cross-browser

我的 JavaScript 代码在 Chrome、IE 和 Firefox 上运行，但是当它进入 safari 时它不起作用。我相信我已经缩小了问题的范围：在 JavaScript 中创建“新日期”时，除了 safari 之外，所有其他浏览器都可以识别我的字符串。

HTML：

```
<form>
<input id="timeIn" value="1:00 AM"/>
<input id="dateIn" value="1/20/2012"/>
<input id="timeOut" value="2:00 AM"/>
<input id="dateOut" value="1/21/2012"/>
</form>​ 
```

JavaScript：

```
function calcHours() {
    // Build datetime objects and subtract
    var timeIn = new Date($('#timeIn').val() + $('#dateIn').val());
    if(!isValidDate(timeIn)) return -1;
    var timeOut = new Date($('#timeOut').val() + $('#dateOut').val());
    if(!isValidDate(timeOut)) return -1;
    var hours = (timeOut - timeIn)/(1000*60*60);
    return hours.toFixed(1);
}

function isValidDate(d) {
    console.log(d);
    if ( Object.prototype.toString.call(d) === "[object Date]" ) {
      // it is a date
      if ( isNaN( d.getTime() ) ) {  // d.valueOf() could also work
        // date is not valid
          console.log("isn't valid");
          return 0;
      }
      else {
        // date is valid
          console.log("is valid");
          return 1;
      }
    }
    else {
      // not a date
        console.log("isn't valid");
        return 0;
    }
}
var hours = calcHours();
console.log("Hours:", hours);​ 
```

我做了一个 js 小提琴：http: [//jsfiddle.net/mq72k/7/](http://jsfiddle.net/mq72k/7/)。如果你用chrome打开它，它会正常工作。如果您在 Safari 中打开它，它会显示相同输入的日期无效并且根本不起作用。我也尝试过改变字符串，添加空格，不同的顺序等。

有没有人知道如何解决这个跨浏览器兼容性问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:52:20.610

尝试使用外部插件来解析你的日期，比如[Datejs](http://www.datejs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:53:53.703

坦率地说，我很惊讶其他浏览器能正确解析字符串，因为你给日期对象的字符串是`1:00 AM1/20/2012`. 将日期放在首位，并在其间添加一个空格。

```
var timeIn = new Date($('#dateIn').val() + ' ' + $('#timeIn').val());
var timeOut = new Date($('#dateOut').val() + ' ' + $('#timeOut').val()); 
```

[http://jsfiddle.net/mq72k/8/](http://jsfiddle.net/mq72k/8/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T12:48:50.837

Javascript 根本不能很好地解析字符串日期，包括 ISO8601 格式。您必须自己解析字符串。您尤其不应该期望解析像月/日/年这样的次要格式，因为它被全球少数人使用。

顺便说一句，这与 jQuery 无关。

### 编辑

要可靠地解析 m/d/y 格式：

```
function toDate(ds) {
  var a = ds.split('/');
  return new Date(+a[2], (a[0] - 1), +a[1]);
} 
```

以上假设提供了正确的日期字符串。要同时检查它是否是有效日期：

```
function toDate(ds) {
  var a = ds.split('/');
  var d = new Date(+a[2], (a[0] - 1), +a[1]);

  if (d.getDate() == a[1] && d.getFullYear() == a[2]) {
    return d;

  } else {
    return NaN; // or some other suitable value like null or undefined
  }
} 
```

# devexpress - AspxClientTextBox：如何在客户端检测到 AspxTextBox 字段已更改

> ID：10333607
> 
> 赞同：0
> 
> 时间：2012-04-26T12:39:48.833
> 
> 标签：devexpress

我正在使用 DevExpress v 10。在网页上，我有一个 AspxTextBox 字段。我需要客户端的以下功能：在字段内容更改后立即执行我的一些 JavaScript 代码。

问题是：如何识别这种情况？事件 TextChanged 和 ValueChanged 不适合我：只有在字段失去焦点后才会触发它们。事件 KeyUp 几乎可以，但在使用上下文菜单修改字段时不会触发它：例如，右键单击鼠标并在上下文菜单中选择剪切或粘贴或删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T18:51:45.960

是的你是对的。

以这种方式修改输入值时，浏览器不会引发“更改”事件。

请参阅我的回答：[How to call a JS function, on data selection in from AUTOCOMPLETE list?](https://stackoverflow.com/questions/8834030/how-to-call-a-js-function-on-data-selection-in-input-type-text-from-autocom/8865109#8865109)

希望这可以帮助。

否则，可以通过 jQuery 库订阅所需的操作（剪切、复制、过去）。

请参阅[如何通过 jQuery](http://www.devexpress.com/Support/Center/p/Q304646.aspx) DX 资源附加复制/剪切/过去事件以查看此方法的实际效果。

# jquery - JQuery点击+这不起作用

> ID：10333608
> 
> 赞同：0
> 
> 时间：2012-04-26T12:39:52.463
> 
> 标签：jquery

我已经复制了一段代码。我对网络语言非常陌生，并且来自 java 背景。

JQuery 看起来很棒，但我就是不知道如何解决这个问题。

[http://jsfiddle.net/MMf9Q/2/](http://jsfiddle.net/MMf9Q/2/)

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T12:40:34.227

我已经更新了你的小提琴，我认为你正在期待它。

我删除了 if/else 语句并简单地使用了 jQuery 切换功能（http://api.jquery.com/toggle/）。制作了一个我希望对象转换为的类。我发现这使代码更加干净和有条理。

固定代码：http: [//jsfiddle.net/MMf9Q/6/](http://jsfiddle.net/MMf9Q/6/)

jQuery：

```
 $('#clickme').click(function(){
        $(this).toggleClass('red');
    }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:55:11.393

Answers21241 和 iambriansreed 有很好的答案，给出了你试图完成的任务。

但是对于您的代码，我想给出一些建议作为开始。

首先，这是您的原始 javascript 代码：

```
$('#clickme').click(function(){

    var color = this.css('background');

    if(color == '#cc0000'){
        this.css('background', '#00CC00');
    }else{
        this.css('background', '#CC0000');
    }
})​ 
```

1）您必须包装您的代码，`$(function(){});`以便 jquery 在页面加载后执行它。否则，您的 javascript 代码将在 DOM 完全加载之前执行，并且在大多数情况下根本无法工作：

```
$(function(){
    $('#clickme').click(function(){
        var color = this.css('background-color');
                    alert(color);
        if(color == '#CC0000'){
            this.css('background-color', '#00CC00');
        }else{
            this.css('background-color', '#CC0000');
        }
    });
});​ 
```

2）`this.css()`不会工作。`.css()`是 jquery 对象的函数，在这种情况下 this 不是 jquery 对象。您必须将其包装起来`$()`才能从任何 dom 元素构造一个 jquery 对象：

```
$(function(){
    $('#clickme').click(function(){
        var color = $(this).css('background-color');
        if(color == '#CC0000'){
            $(this).css('background-color', '#00CC00');
        }else{
            $(this).css('background-color', '#CC0000');
        }
    });
});​ 
```

3）颜色值可能与您给出的不同。浏览器主要将十六进制颜色值转换为 RGB 值，您得到的结果会有所不同。尝试`alert(color);`在某一点上获得价值，并相应地更改您的代码。

```
$(function(){
    $('#clickme').click(function(){
        var color = $(this).css('background-color');
                    alert(color);
        if(color == '#CC0000' || color == 'rgb(204, 0, 0)'){
            $(this).css('background-color', '#00CC00');
        }else{
            $(this).css('background-color', '#CC0000');
        }
    });
});​ 
```

这是最后的[小提琴](http://jsfiddle.net/MMf9Q/21/)：

这将帮助您了解问题所在。此外，该方法不是最佳实践。使用 toggleClass 并在 CSS 中设置元素的样式。Answers21241 和 iambriansreed 提供了很好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:54:36.713

使用 $(this) 而不是 this。它代表选择器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T12:45:49.663

使用 $(this) 作为 JQuery 对象访问 this 元素

```
$('#clickme').click(function(){

    var color = $(this).css('background-color');

    if(color == '#cc0000'){
        $(this).css('background', '#00CC00');
    }else{
        $(this).css('background', '#CC0000');
    }
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T12:46:22.713

**摆弄**

[http://jsfiddle.net/nTXPC/](http://jsfiddle.net/nTXPC/)

**CSS**

```
.red {
 background:#CC0000;
}
.green {
 background:#00CC00;
} 
```

**HTML**

```
<div id="clickme" class="red"> Click me </div>​ 
```

**JS**

```
$('#clickme').click(function(){

   $(this).toggleClass('red green');

});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T12:47:03.980

戈登，你的代码有几个问题。首先是您需要将`this`. `$()`那代表`#clickme`元素。

其次，您对背景的要求比您预期的要详细得多。您可以`alert`或 console.log 什么被返回找出为什么您的 if 语句的行为不像您预期​​的那样。[如此处所见。](http://jsfiddle.net/MMf9Q/8/)

**更新**：这是[更新的方法](http://jsfiddle.net/MMf9Q/17/)：

```
$('#clickme').click(function() {
    var color = $(this).css('backgroundColor');
    if(color == "rgb(0, 204, 0)") {
        $(this).css('backgroundColor', '#CC0000');
    }else{
        $(this).css('backgroundColor', '#00CC00');
    }
});​ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T12:51:56.713

应该是这样的

```
$('#clickme').click(function(){

    var color = $(this).css('background-color');

    if(color == '#cc0000'){
        $(this).css('background-color', '#00CC00');
    }else{
        $(this).css('background-color', '#CC0000');
    }
})​; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-26T12:50:58.690

正如其他人所说，它应该是 $(this) 而不是 this。出于性能目的，我还建议将 $(this) 保存到另一个变量。在这里可能没有必要这样做，但这是一个好习惯，特别是如果你正在循环某些东西。像这样的东西：

```
$('#clickme').click(function(){

    var clickedElement = $(this);
    var color = clickedElement.css('background');

    if(color == '#cc0000'){
        clickedElement.css('background', '#00CC00');
    }else{
        clickedElement.css('background', '#CC0000');
    }
})​ 
```

# silverlight - 无法序列化 System.Collections.IDictionary 类型的成员 System.Exception.Data，因为它实现了 IDictionary。

> ID：10333610
> 
> 赞同：0
> 
> 时间：2012-04-26T12:39:54.880
> 
> 标签：silverlight, visual-studio-2010, web-services

我正在使用 Silverlight 制作应用程序。在该应用程序中，我添加了一项 Web 服务，并且在该 Web 服务中，我有一个 Web 方法作为

```
[WebMethod(Description = "Write buffer log")]     
        public bool WriteLog(System.Collections.ObjectModel.ObservableCollection<LogBuffer> buffer)
        {
            bool result = true;
            .//Some code here
            return result;
        } 
```

但我收到错误消息“无法序列化 System.Collections.IDictionary 类型的成员 System.Exception.Data，因为它实现了 IDictionary。”

其中 LogBuffer 类为

```
namespace WriterLog
{
   [DataContract]
    public class LogBuffer
    {
       [DataMember]
        public string Message
        {
            get;
            set;
        }
        [DataMember]
        public Exception Exception
        {
            get;
            set;
        }
        [DataMember]
        public LogType LogType
        {
            get;
            set;
        }
        [DataMember]
        public string MethodName
        {
            get;
            set;
        }
        [DataMember]
        public string DeclaringType
        {
            get;
            set;
        }
        [DataMember]
        public DateTime LogTime
        {
            get;
            set;
        }
    }
} 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:51:30.117

Silverlight 版本的 ObservableCollection 不可序列化 [http://msdn.microsoft.com/en-us/library/ms668604(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/ms668604(v=vs.95).aspx)

而是尝试使用通用列表。这是我使用的东西，它有效

```
[DataContractAttribute]
public class InstrumentDataField : INotifyPropertyChanged
    {
    [DataMemberAttribute]
    private string Value { get; set; }

    [DataMemberAttribute]
    public string Name { get; set; }

    public InstrumentDataField(string field, string value)
    {
        this.Name = field;
        this.Value = value;
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

用法

```
[OperationContract]
public List<InstrumentDataField> GetInstrumentData(string browserid, long tickCount)
{
    //some code here
} 
```

# linq - 如何将 LINQ 查询结果转换为 List？

> ID：10333619
> 
> 赞同：27
> 
> 时间：2012-04-26T12:40:33.150
> 
> 标签：linq

我需要将 linq 查询结果转换为列表。我尝试了以下代码：

```
var qry = from a in obj.tbCourses
                     select a;

List<course> lst = new List<course>();
lst = qry.ToList(); 
```

上述代码出现以下错误：

```
Cannot implicitly convert type 
System.Collections.Generic.List<Datalogiclayer.tbcourse> to
System.Collections.Generic.List<course> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-08T11:41:52.670

没必要做那么多工作。。

```
var query = from c in obj.tbCourses
        where ...
        select c; 
```

然后你可以使用：

```
List<course> list_course= query.ToList<course>(); 
```

这对我来说可以。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-11-20T22:19:42.880

```
List<course> = (from c in obj.tbCourses
                 select 
                new course(c)).toList(); 
```

您可以直接在调用时将实体对象转换为列表。有一些方法可以将其转换为不同的数据结构（列表、数组、字典、查找或字符串）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-26T12:48:16.357

您需要以某种方式将每个`tbcourse`对象转换为`course`. 例如`course`，可以有一个构造函数，它采用`tbcourse`. 然后，您可以像这样编写查询：

```
var qry = from c in obj.tbCourses
          select new course(c);

List<course> lst = qry.ToList(); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-26T12:45:51.863

您需要使用`select new`LINQ 关键字将您的`tbcourse`实体显式转换为自定义类型`course`。示例`select new`：

```
var q = from o in db.Orders
        where o.Products.ProductName.StartsWith("Asset") && 
              o.PaymentApproved == true
        select new { name   = o.Contacts.FirstName + " " +
                              o.Contacts.LastName, 
                     product = o.Products.ProductName, 
                     version = o.Products.Version + 
                              (o.Products.SubVersion * 0.1)
                   }; 
```

[http://www.hookdonlinq.com/LINQtoSQL5MinuteOverview.ashx](http://www.hookedonlinq.com/LINQtoSQL5MinuteOverview.ashx)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-15T19:20:31.297

您可以做的是将所有内容选择到一个新的 Course 实例中，然后将它们转换为 List。

```
var qry = from a in obj.tbCourses
                     select new Course() {
                         Course.Property = a.Property
                         ...
                     };

qry.toList<Course>(); 
```

# bash - 从 tcsh 转换为 bash 问题

> ID：10333624
> 
> 赞同：3
> 
> 时间：2012-04-26T12:40:45.863
> 
> 标签：bash, gnuplot, tcsh

我正在尝试将 tcsh 脚本转换为 bash 脚本。该脚本以这种方式调用 gnuplot：

```
#!/bin/tcsh
<script commands>
gnuplot << EOF
set terminal png
<other commands>
plot <args> 
```

我试图将'tcsh'修改为'bash'，但我得到“here-document at line x delimited by end-of-file (wanted 'EOF')”。为什么是这样 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:44:33.853

正如错误消息所说：您需要使用开始时给出的字符串结束此处的文档，在本例中为 EOF。您不能只使用文件末尾来终止此处的文档。

例如，这是我使用 here doc 的脚本中的一个片段：

```
/usr/bin/gnuplot << GPLOT
set terminal png
set output "$3"
set logscale xy
set xlabel "$1"
set ylabel "$2"
plot "tmp2.$$" notitle
GPLOT 
```

由于我用 开始了 here doc `GPLOT`，因此 bash 会查找`GPLOT`以指示 here doc 的结尾。

# c#-4.0 - Quartz.net, c# ASP.Net MVC3

> ID：10333628
> 
> 赞同：-1
> 
> 时间：2012-04-26T12:40:51.197
> 
> 标签：c#-4.0, quartz.net

有人知道入门教程 Quartz.net

先感谢您，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:00:07.763

令人难以置信的是，人们宁愿花时间在 SO 上写一个问题，也不愿在 Google 搜索框中输入内容。

[http://quartznet.sourceforge.net/tutorial/index.html](http://quartznet.sourceforge.net/tutorial/index.html)

# objective-c - 在 MPMoviePlayerController 中播放音频

> ID：10333631
> 
> 赞同：0
> 
> 时间：2012-04-26T12:41:00.977
> 
> 标签：objective-c, ios, ios4, mpmovieplayercontroller

我必须背靠背播放两个音频文件。我有一个通用文件，上面写着：“我的名字是”

然后跟随另一个具有另一个音频字符串的音频文件。

例如：说 a.mp3 有“我的名字是” b.mp3 有“约翰”

但是当我设置 MPMoviePlayerController 的 contentURL 时。它跳过第一个音频并播放第二个音频。

这是我的代码：

```
- (void) playPromptAudio
{[appDelegate.globalPlayer setContentURL:[NSURL 
             URLWithString:@"http://localhost/a.mp3"]];

    [appDelegate.globalPlayer prepareToPlay];
    [appDelegate.globalPlayer play];

    while (appDelegate.globalPlayer.playbackState == MPMoviePlaybackStatePlaying ) {
        // dirty hack, do gracefully
        // do nothing
    }

    [appDelegate.globalPlayer setContentURL:[NSURL URLWithString:@"http://localhost/b.mp3"]];
        [appDelegate.globalPlayer prepareToPlay];
    [appDelegate.globalPlayer play];
} 
```

但是当我运行代码时，只播放“John”。

调试代码后，我看到音频在执行整个函数后开始播放，所以很明显“John”是最后设置的。但是有没有办法防止这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:49:04.337

试试这个链接 MPMoviePlayerController 播放

下面的代码 Play MpMoviePlayer with nodification：

```
 NSURL *url = [NSURL fileURLWithPath:filePath isDirectory:NO];
        self.moviePlayer = [[[MPMoviePlayerController alloc] initWithContentURL:url]
                    autorelease];
        moviePlayer.shouldAutoplay = NO;
        moviePlayer.view.frame = view_video.bounds;
        moviePlayer.scalingMode= MPMovieScalingModeFill;
        moviePlayer.controlStyle =MPMovieControlStyleNone;
        [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self 
                                                 selector:@selector(doneButtonClick:) 
                                                     name:MPMoviePlayerPlaybackDidFinishNotification 
                                                   object:nil];
        [moviePlayer Play]; 
```

下面的函数称为 MpMovieplayerController Playbackfinished：

```
 -(void)doneButtonClick:(NSNotification*)aNotification{
        NSLog(@"MPMoviePlayer is finished..!");
     } 
```

谢谢....！

# java - sqlite 和休眠 - 是个好主意吗？

> ID：10333633
> 
> 赞同：9
> 
> 时间：2012-04-26T12:41:09.450
> 
> 标签：java, hibernate, sqlite

我正在使用 Java + Hibernate 开发一个小型桌面应用程序。我正在使用 MySQL 进行开发，但想用 SQLLite 之类的轻量级 SQL 替换它。我想这样做是出于以下原因：

*   避免安装和配置 MySQL。这将允许我的客户自行安装和配置应用程序。
*   简化数据库的备份和恢复。
*   等等

[我在http://code.google.com/p/hibernate-sqlite/](http://code.google.com/p/hibernate-sqlite/)上找到了 SQLLiteDialect、它的配置和一个工作示例 eclipse 项目（使用 hibernate3）。

但是当我看到[一个问题的评论时](https://stackoverflow.com/a/3119866/607637) ：“*由于 SQLite 数据库被广泛使用并且它在 java 中的 Hibernate 没有很好的支持，所以在 Hibernate 中使用 SQLite 并不容易*”我吓坏了。

你能建议我吗 - 在这里使用 SQLite 是个好主意吗？Hibernate 是否支持 SQLite 的任何替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:43:33.480

我认为每个数据库都有优点和缺点。对于嵌入式数据库，您还可以查看 HSQLDB 或 H2DB。

# android - 将 SDcard 中的文件链接存储到 SQLite 数据库

> ID：10333638
> 
> 赞同：0
> 
> 时间：2012-04-26T12:41:25.470
> 
> 标签：android

我有应用程序将录音 .3gp 文件存储在 SDCard 中的特定文件夹中，例如：- 录音。我想在单击它应该播放录音的路径时访问数据库中的该文件路径？任何帮助都将不胜感激。我正在使用该功能查找文件的链接

文件目录 = new File("sdcard/Recordings");

```
File file[] = directory.listFiles();  
            System.out.println("The length of files is " + file.length); 
```

它不工作

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:56:14.887

Here`Environment.getExternalStorageDirectory()`将在您的 SDCard 中创建路径。

```
File path = new File(Environment.getExternalStorageDirectory() + getResources().getString(R.string.YourPath));
path.mkdirs(); 
```

在 Strings.xml 中声明路径

`<string name="YourPath">/Recordings/</string>`

# azure - 多个 Azure CDN 终结点

> ID：10333640
> 
> 赞同：3
> 
> 时间：2012-04-26T12:41:25.993
> 
> 标签：azure, cdn, endpoint

我们有一个 Azure CDN 端点和一个映射到它的自定义域 cdn.ourcompany.com，所以我可以使用两个域来访问 CDN，我的自定义域和 azure CDN 主机 (.vo.msecnd.net)

无法在 Azure 管理门户中向端点添加另一个自定义 CDN 域，但我想知道是否有任何解决方法可以做，也许在我的 DNS 中做点什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:43:34.410

当我发现没有解决方法时，我正在与微软的一个人交谈，他说他可以使用手动过程为我做这件事，如果将来可能的话，我没有得到正式职位，希望会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:27:33.590

据我所知，目前您只能将单个自定义域添加到 CDN 端点。我不确定还有其他解决方法。[您可以在http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting](http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting)上提交功能请求。大多数浏览器允许 6 个（不是 5 个）同时连接到单个域。这通常就足够了。如果您有第 7 个请求，它仍然可以工作，但只有在前 6 个请求之一返回时，才会将请求发送到服务。如果这不可接受，您可以按照 SilverNinja 的建议进行操作：将多个请求合并到一个请求中。或者您可以使用多个存储帐户，这样您就可以为每个帐户创建一个自定义域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T13:40:16.603

您可以尝试创建另一个映射到 CDN 主机`.vo.msecnd.net`或您的自定义域的 CNAME，它可能工作相同。我想`tracert`验证一下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-18T16:52:37.380

直到去年，您必须向 Microsoft 开一张票，后者将为每个额外的域手动添加一个内部重写规则。

最近可以直接从 Windows Azure 管理门户添加多个域。选择 CDN，然后单击 CDN 名称，然后单击底部控件中的管理域。这将打开“管理自定义域”对话框，您可以在其中添加和删除域名（顶部的域名除外，它是默认的 CDN 端点名称）。

您仍然需要使用 DNS 中的 CNAME 记录来验证每个添加的域。

在六个域中工作正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-10T20:37:47.977

您始终可以在 Azure 门户上创建多个自定义域，只需单击门户底部的管理域按钮。我这里有多个自定义域名。您需要做的是首先将您的自定义域指向 CDN 端点，然后在“管理自定义域”页面中添加自定义域

[![在此处输入图像描述](../Images/010fb68fef34c6f4031eac280f84050e.png)](https://i.stack.imgur.com/ZmQJP.png)

[![在此处输入图像描述](../Images/f0610ae874a13ad8533f7a8668be2c0a.png)](https://i.stack.imgur.com/gCrPG.png)

# python - 使用 Django 的加法器

> ID：10333642
> 
> 赞同：0
> 
> 时间：2012-04-26T12:41:32.150
> 
> 标签：python, django

我是 Django 的新手，试图让这段代码作为加法器工作。

```
"""Perform addition using Django"""

template = """
<form method="post" action=" ">{% csrf_token %}
    <input type="text" name="a" > + <input type="text" name="b" >
    <input type="submit" value="="> <input type="text" name="result >
</form>""" 
```

```
def add(request):
    if request.POST.has_key('a'):
        a = int(request.POST['a'])
        b = int(request.POST['b'])
        result = request.POST['result'] 

    else:
        a = 0
        b = 0
    t = Template(template)
    c = RequestContext(request, {'a': a, 'b': b, 'result': a+b})
    return HttpResponse(t.render(c))

#url.py
urlpatterns = patterns('',      
    url(r'^add/$', 'myapp.views.add'),   
) 
```

[Django加法器](http://pastebin.com/tdZnU8Gv)

但无法获得正确的结果。不太确定哪里出错了。感谢任何评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:03:31.397

在您的模板中，您没有填写`a`、`b`和`result`。您还需要动作指向某个地方。另外，您缺少报价。最后，使用`get`而不是`post`因为提交表单不会更改任何持久性内容，例如数据库：

```
template = Template("""
<form method="get" action="{% url add %}">{% csrf_token %}
    <input type="text" name="a" value="{{a}}">
    + <input type="text" name="b" value="{{b}}">
    <input type="submit" value="=">
    <input type="text" name="result" value="{{result}}">
</form>""") 
```

您的视图不需要该`result`变量，并且需要更多的错误检查。此外，您不需要`Template`每次都创建：

```
def add(request):
    try:
        a = int(request.POST.get('a', 0))
    except:
        a = 0

    try:
        b = int(request.POST.get('b', 0))
    except:
        b = 0

    c = RequestContext(request, {'a': a, 'b': b, 'result': a + b})
    return HttpResponse(template.render(c)) 
```

在`url.py`中，您需要名称才能使`url`上面的标签起作用：

```
urlpatterns = patterns('',      
    url(r'^add/$', 'myapp.views.add', name='add'),   
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:49:29.917

*   最好不要有空间`action=" "`
*   缺少双引号`<input type="text" name="result >`
*   的检查`if request.POST.has_key('a')`不完整且容易出错。另外，使用`'a' in request.POST`而不是弃用`has_key()`
*   计算逻辑错误：从分支`result`中删除`result`行`if`
*   在模板中，您需要渲染值：和`a`，比如`b``result`

    ```
    <input type="text" name="a" value="{{ a }}"> +
    <input type="text" name="b" value="{{ b }}">
    <input type="submit" value="="> 
    <input type="text" name="result" value="{{ result }}"> 
    ```

# sql - 根据同一张表中的主记录插入缺失的记录

> ID：10333645
> 
> 赞同：2
> 
> 时间：2012-04-26T12:41:38.543
> 
> 标签：sql, oracle, join

我之前问过几乎相同的问题，但由于音序器，我不能使用 MERGE 语法。问题是我们对数据库中的人有定价规则。我想为其他应该有相同规则的人同步这些价格规则。

```
+---------------------------+
| id | name | belongs_to_id |
|----+------+---------------+
| 1  | A    |               |
| 2  | B    | 1             |
| 3  | C    | 1             |
| 4  | D    |               |
+----+------+---------------+ 
```

好的，现在人们 B 和 C 最终需要与用户 A 具有相同的价格规则。所以我有一个价格规则表（简化），如下所示：

```
+-----------------------------------+
| id | user_id | product_id | price |
+----+---------+------------+-------+
| 1  | 1       | 1          | 0.12  |
| 2  | 1       | 2          | 0.10  |
| 3  | 1       | 3          | 0.03  |
| 4  | 2       | 2          | 0.10  |
| 5  | 2       | 3          | 0.10  |
| 6  | 3       | 1          | 0.12  |
| 7  | 3       | 2          | 0.10  |
| 8  | 3       | 3          | 0.03  |
| 9  | 3       | 4          | 0.25  |
+----+---------+------------+-------+ 
```

所以在这个例子中，应该发生的是：

*   给用户 2 产品 1 的价格，价格为 0.10
*   将用户 2 产品 3 的价格更新为 0.03
*   删除用户 3、产品 4 的定价规则

我想我必须采取三个步骤：删除、更新、添加。我得到了前两个。但我正在考虑插入语句。基本上我需要为用户 1 选择所有价格规则，然后按 product_id*为每个用户*离开加入。我如何为每个用户执行此操作？

我正在使用 Oracle 10.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:49:09.537

```
INSERT INTO
  priceRule
SELECT
  user.id,
  parentPriceRule.product_id,
  parentPriceRule.price
FROM
  user
LEFT JOIN
  priceRule    AS parentPriceRule
    ON  parentPriceRule.user_id = user.belongs_to_id
LEFT JOIN
  priceRule    AS myPriceRule
    ON  myPriceRule.user_id     = user.id
    AND myPriceRule.product_id  = parentPriceRule.product_id
WHERE
  myPriceRule.id IS NULL 
```

# iphone - 如何将 plist 值显示到表格视图中作为复选标记？

> ID：10333646
> 
> 赞同：0
> 
> 时间：2012-04-26T12:41:46.177
> 
> 标签：iphone, objective-c

我有一个应用程序，其中有 tableview，其中 tableview 中有 5 行（娱乐、零售、健康、食品、服务）。当我最初运行我的应用程序时，我希望从我的 plist 中获取值（娱乐、零售、健康），并根据我想在我的 tableview 上显示复选标记的值。

换句话说，当我单击 tableview 控制器时，默认情况下，前 3 行应通过从 plist 中获取值来显示复选标记，当我通过单击应将特定值保存到我的 plist 数组中的行来更改值时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:57:27.197

只需在每个条目的 plist 中保存一个布尔值。所以我会让每个条目成为一个有两个值的字典。一个是标题，另一个是布尔值。

或者，您可以在 plist 中有两个数组。一个是条目列表，另一个是布尔匹配列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:00:25.493

你可以有这样的结构 plist 的每个值都应该包含一个字典。就像在您的示例中，默认情况下娱乐将是一个字典，您可以在字典中添加一个 bool 标志。像这样的东西

```
NSDictionary *entertainmentDictionary = [NSDictionary dictionaryWithObjectsAndKeys:@"Entertainment",@"name",[NSNUmber numberWithBool:YES],@"Checked",nil]; 
```

然后在表格中显示时，您可以像这样从字典中获取 bool 标志的值

```
NSDictionary *entD = [arrayOfPlistItems objectAtIndex:indexPath.row];
BOOL checked = [[entD objectForKey:@"Checked"] boolValue];
//Not replace this with actual code it is for explaining purpose only
if(checked) {
    cell.accessoryType = checkmarktype;

}else {
  cell.accessoryType = none;
} 
```

希望你能从中明白

# iphone - 如何使用 ASINetworkQueue 显示多个下载进度

> ID：10333647
> 
> 赞同：1
> 
> 时间：2012-04-26T12:41:46.487
> 
> 标签：iphone, multithreading, download, asihttprequest, uiprogressview

我想在多个按钮单击时执行下载，这些按钮是动态创建的。每个按钮都分配有不同的 url。

我想同时进行多个下载操作，也想在不同`UIProgressView`的s上更新每次下载的下载进度。

有人告诉我要使用`ASINetworkQueue`方法，但是在这个方法中，如何将请求动态添加到队列中？还是有其他方法或示例代码？

请帮忙。

示例代码：

```
- (void)fetchThisURLFiveTimes:(NSURL *)url
{
   [myQueue cancelAllOperations];
   [myQueue setDownloadProgressDelegate:myProgressIndicator];
   [myQueue setDelegate:self];
   [myQueue setRequestDidFinishSelector:@selector(queueComplete:)];
   int i;
   for (i=0; i<5; i++) {
      ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
      [myQueue addOperation:request];
   }
   [myQueue go];
}

- (void)queueComplete:(ASINetworkQueue *)queue
{
   NSLog(@"Value: %f", [myProgressIndicator progress]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:03:09.173

简单地将新的操作/请求添加到队列中：

```
 [networkQueue addOperation:<#(NSOperation *)#>]
  [networkQueue addOperations:<#(NSArray *)#> waitUntilFinished:<#(BOOL)#>] 
```

您可以通过设置以下内容来跟踪特定请求的进度：

```
 [request setDownloadProgressDelegate:<#(id)#>] 
```

> // 如果 downloadProgressDelegate 是 NSProgressIndicator，我们将它的 MaxValue 设置为 1.0，这样我们就可以像 UIProgressView 一样更新它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:19:50.867

我相信 ASI 已经不再被支持了。我的公司已经开始使用 RestKit 作为替代方案，仅供参考。查看他页面顶部的标题：http: [//allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)

# ruby-on-rails - 使用 Faraday 和 Omniauth 进行 Rails 集成测试

> ID：10333650
> 
> 赞同：1
> 
> 时间：2012-04-26T12:42:05.307
> 
> 标签：ruby-on-rails, ruby, oauth, oauth-2.0, faraday

我的集成测试如下所示：

```
class OAuthTest < ActionDispatch::IntegrationTest
  ...

  @client = OAuth2::Client.new(                                                
    client_id,                                              
    client_secret,                                          
    { :site => 'https://provider', :token_url => '/oauth/access_token' }
  )                                                                            

  @client.connection.build do |b|                                              
    b.adapter :action_dispatch, self
  end                                                                          

  access_token = @client.auth_code.get_token(...)
  access_token.get("/user.json") 
```

并且使用 Faraday 0.7.6 它工作得很好，`action_dispatch`适配器会将 http 请求路由到我的 Rails 应用程序（调用`users_controller`）。但是在 Faraday 0.8.0 中，`action_dispatch`适配器被替换为`rack`（参见[https://github.com/technoweenie/faraday/pull/134](https://github.com/technoweenie/faraday/pull/134)），我无法让它工作。

我想我需要将上面的代码更改为：

```
@client.connection.build do |b|      
  b.adapter :rack, self.app          
end 
```

但它在 Rack (1.2.5) 期待 Stream 失败，但它得到一个 Hash 并`undefined read method for Hash`在第 149 行说（这里：[https ://github.com/rack/rack/blob/1.2.5/lib/rack/request .rb#L149](https://github.com/rack/rack/blob/1.2.5/lib/rack/request.rb#L149)）。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T09:07:16.283

您将需要添加中间件 url_encoded 以使其工作；

```
@oauth = OAuth2::Client.new('client_id', 'client_secret') do |b|
  b.request :url_encoded
  b.adapter :rack, Rails.application
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:33:13.743

`app`在您的测试套件中，您可以通过变量直接访问机架应用程序。代码应该是：

```
@client.connection.build do |b|      
  b.adapter :rack, app
end 
```

[我在一个示例应用程序](https://github.com/jch/test_faraday_rails)上进行了尝试，它对我有用。祝你好运！

# c# - 识别请求源页面

> ID：10333656
> 
> 赞同：0
> 
> 时间：2012-04-26T12:42:34.877
> 
> 标签：c#, asp.net, http, redirect

> **可能重复：**
> [asp.net/C# 中的请求来源](https://stackoverflow.com/questions/4889971/source-of-request-in-asp-net-c)

我正在用 ASP.NET 开发一个站点。我有一个特殊页面说 default2.aspx 和另外两个页面页面 default1.aspx、default3.aspx。default1.aspx 和 default3.aspx 都有指向 default2.aspx 的链接。所以在 default2.aspx 上，我想知道请求是从哪里来的。我认为它可能来自于在浏览器中输入地址而不是 default1.aspx 或 default2.aspx。

Request 对象是否提供有关它的任何信息。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:46:04.570

Request.UrlReferrer

希望能帮助到你！

# asp.net-mvc-3 - MVC ViewModel > JS ViewModel - Uncaught SyntaxError: Unexpected token &

> ID：10333658
> 
> 赞同：0
> 
> 时间：2012-04-26T12:42:42.727
> 
> 标签：asp.net-mvc-3, knockout.js

当我尝试在客户端视图模型中传递服务器端视图模型时出现 js 错误“Uncaught SyntaxError: Unexpected token &”（对于 knockout.js）

视图模型

```
public class InvoiceViewModel
{
        public Factuur Factuur { get; set; }
        public List<Factuurlijn> Factuurlijnen { get; set; }
} 
```

控制器

```
 //Create Viewmodel
        InvoiceViewModel ivm = new InvoiceViewModel();

        //Initialize vm objects
        int aantaldagentotvervaldatum = Convert.ToInt32(General.getParameter("defaultaantaldagentotvervaldatum"));

        Factuur i = new Factuur { factuur_nummer = 1, factuur_nummervoorvoegsel = DateTime.Now.Year.ToString(), factuur_datum = DateTime.Now, factuur_type = Ftype, factuur_vervaldatum = DateTime.Now.AddDays(aantaldagentotvervaldatum), factuur_kortingspercentage = Convert.ToDecimal(General.getParameter("defaultkortingspercentage")) };

        List<Factuurlijn> FLijnen = new List<Factuurlijn>{new Factuurlijn(){ factuurlijn_aantal = 0, factuurlijn_item="", factuurlijn_prijs=0 }};

        // add objects to viewmodel
        ivm.Factuur = i;
        ivm.Factuurlijnen = FLijnen;

        return View(ivm); 
```

看法

```
 @{
        //prepare viewmodel to assign to pas into js
        string initialData = new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model);

    }

...

<script type="text/javascript">
    var initialDataJS = @(initialData)
    alert('initialdata : ' + initialDataJS);
</script> 
```

我的警报没有被触发，我得到的错误；

**在 FF 中：**尝试在清除范围 Bronbestand 上运行 compile-and-go 脚本：chrome://firebug/content/net/requestObserver.js

**在 Chrome 中：** Uncaught SyntaxError: Unexpected token &

在我尝试将它分配给 js 变量之前，我感觉它在 viewmodel 的序列化上出错了，但我不明白为什么......

我已经试过了

```
string initialData = Json.Encode(Model); 
```

但没有成功......然后我在我的js错误中看到了这个

错误：无效的属性 ID

```
var initialDataJS = {&quot;Factuur&quot;:{&quot;factuur_id&quot;:0,&quot;factuur_nummervoorvoegsel&quot;:&quot;2012&quot;,&quot;factuur_nummer&quot;:1,&quot;factuur_type&quot;:&quot;F&quot;,&quot;bedrijf_id&quot;:0,&quot;factuur_naam&quot;:null,&quot;factuur_notities&quot;:null,&quot;factuur_details&quot;:null,&quot;factuur_datum&quot;:&quot;\/Date(1335443889648)\/&quot;,&quot;factuur_vervaldatum&quot;:&quot;\/Date(1336307889648)\/&quot;,&quot;factuur_kortingspercentage&quot;:0,&quot;factuur_betaald&quot;:false,&quot;factuur_bedrijf_naam&quot;:null,&quot;factuur_bedrijf_adres&quot;:null,&quot;factuur_bedrijf_postcode&quot;:null,&quot;factuur_bedrijf_gemeente&quot;:null,&quot;factuur_bedrijf_land&quot;:null,&quot;factuur_bedrijf_tel&quot;:null,&quot;factuur_bedrijf_fax&quot;:null,&quot;factuur_bedrijf_gsm&quot;:null,&quot;factuur_bedrijf_email&quot;:null,&quot;factuur_bedrijf_website&quot;:null,&quot;factuur_bedrijf_btw&quot;:null,&quot;factuur_deleted&quot;:false,&quot;bedrijf&quot;:null,&quot;bedrijfReference&quot;:{&quot;Value&quot;:null,&quot;EntityKey&quot;:null,&quot;RelationshipName&quot;:&quot;ScotaModel.facturen_ibfk_1&quot;,&quot;SourceRoleName&quot;:&quot;facturen&quot;,&quot;TargetRoleName&quot;:&quot;Bedrijf&quot;,&quot;RelationshipSet&quot;:null,&quot;IsLoaded&quot;:false},&quot;factuurlijnen&quot;:[],&quot;EntityState&quot;:1,&quot;EntityKey&quot;:null},&quot;Factuurlijnen&quot;:[{&quot;factuurlijn_id&quot;:0,&quot;factuur_id&quot;:0,&quot;factuurlijn_item&quot;:&quot;&quot;,&quot;factuurlijn_aantal&quot;:0,&quot;factuurlijn_prijs&quot;:0,&quot;factuurlijn_btwbedrag&quot;:0,&quot;factuurlijn_btwpercentage&quot;:0,&quot;factuurlijn_datum&quot;:&quot;\/Date(-62135596800000)\/&quot;,&quot;factuurlijn_volgorde&quot;:null,&quot;factuurlijn_deleted&quot;:false,&quot;facturen&quot;:null,&quot;facturenReference&quot;:{&quot;Value&quot;:null,&quot;EntityKey&quot;:null,&quot;RelationshipName&quot;:&quot;ScotaModel.factuurlijnen_ibfk_1&quot;,&quot;SourceRoleName&quot;:&quot;factuurlijnen&quot;,&quot;TargetRoleName&quot;:&quot;facturen&quot;,&quot;RelationshipSet&quot;:null,&quot;IsLoaded&quot;:false},&quot;EntityState&quot;:1,&quot;EntityKey&quot;:null}]} 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:27:00.340

改变

```
var initialDataJS = @(initialData) 
```

至

```
var initialDataJS = @Html.Raw(initialData) 
```

来自 Phil Haack [http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)

Razor 正在尝试对所有这些引号进行安全编码，但您实际上需要它们用于 Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:07:10.777

您需要替换引号字符。这就是我所做的

```
 var jsonStr = '@(Model.JSONData)';
    var json = JSON.parse(jsonStr.replace(/&quot;/g, '"'));

    viewModel = new JsModel(json);
    ko.applyBindings(viewModel); 
```

所以在这个例子中，你将来自服务器的数据保存为 jsonStr 变量中的字符串，然后在 regEx 的帮助下替换双引号并解析它。这将创建一个 json 对象。

# playframework-2.0 - 在 play2.0 中避免模板助手

> ID：10333660
> 
> 赞同：2
> 
> 时间：2012-04-26T12:42:51.240
> 
> 标签：playframework-2.0

我有一个表单，其中有一个绑定到属性的输入文本字段：

```
 @helper.inputText(myForm("username")) 
```

但我希望避免输入字段的助手。我想将输入文本字段直接与模型中的属性绑定，例如：

```
<input type="text" value=@myForm("username")> 
```

有关如何执行此操作的任何指示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T08:47:59.617

`@myForm("username")`返回一个[字段](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/java/play/data/Form.java#L509)对象。所以你可以访问它的变量。在您的情况下，您想要填写输入字段的值。所以你称它的`value`变量为：`<input type="text" value=@myForm("username").value>`. 您可以以相同的方式访问其错误、约束、格式等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:24:11.007

如[官方文档](http://www.playframework.org/documentation/2.0/ScalaFormHelpers)所述：

```
@helper.input(myForm("username")) { (id, name, value, args) =>
    <input type="date" name="@name" id="@id" @toHtmlArgs(args)>
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:24:23.087

您忘记了名称属性

```
<input type="text" name="username" value='@myForm("username").value' id="youCanAddyourId" class="orClass"> 
```

# tomcat - 如何在 Windows Server 的 tomcat 服务器中安装 ssl 证书？

> ID：10333662
> 
> 赞同：0
> 
> 时间：2012-04-26T12:42:54.663
> 
> 标签：tomcat, ssl

我有一个扩展名（.p7s）的文件和四个来自认证机构的扩展名（.crt）的文件。如何仅使用这些文件来安装 SSL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-09-01T07:38:51.233

使用 Java keytool 实用程序管理 Java 密钥库中的 SSL 证书。请参阅此 Tomcat 文档以了解如何为 Tomcat 创建 Java 密钥库和安装 SSL 证书。

[Tomcat 文档](http://randomrack.in/blog/learning/9655/Tomcat-SSL-Configuration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:46:04.010

您应该使用 Java [keytool](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/keytool.html)实用程序来管理 Java 密钥库中的证书。查看[此](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)Tomcat 文档以了解如何创建用于 Tomcat 的 Java 密钥库。

# java - 日志信息未在控制台上打印

> ID：10333663
> 
> 赞同：1
> 
> 时间：2012-04-26T12:42:58.410
> 
> 标签：java, logging

在我的 Struts 项目中，我使用的是 Loggers。我在调试模式下运行我的 WSAD 服务器。此处满足以下条件，但未在控制台中打印日志信息。

```
if(count.intValue() > 1)
{
    if (log.isDebugEnabled())
        log.info("many");

    return mapping.findForward("many");
} 
```

在这里，我将我的 Logger 级别设置为 INFO。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T07:33:31.253

“较低”的日志记录级别包括所有“较高”级别：

```
ERROR > WARN > INFO > DEBUG
highest ------------ lowest 
```

这意味着，例如，当您将级别设置为 DEBUG 时，您还会收到 INFO、WARN 和 ERROR 消息；如果将其设置为 INFO，您将看到 ERROR、WARN 和 INFO，但不会看到 DEBUG 消息等。

看看这些行：

```
if (log.isDebugEnabled())
    log.info("many"); 
```

这里令人困惑的是您测试 DEBUG 级别是否处于活动状态（使用`isDebugEnabled`），但您实际上是在 INFO 级别登录。

那么，如果级别设置为：

*   DEBUG：您将看到该消息，因为 DEBUG 包含 INFO 消息。
*   INFO：您**不会**看到该消息，因为当级别设置为高于 DEBUG 时`isDebugEnabled`返回。`false`这意味着里面的语句`if`没有被执行，你也看不到消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:27:59.443

正如 Jesper 所说，`isDebugEnabled`只有当日志级别至少设置为时才会返回 true `DEBUG`，因此请删除该检查或将日志级别设置为`DEBUG`. 该`DEBUG`级别包括`INFO`，但`INFO`不包括`DEBUG`。

# java - 我可以使用拦截器检查 JAX-RS 应用程序中的 http 标头吗？

> ID：10333667
> 
> 赞同：3
> 
> 时间：2012-04-26T12:43:06.610
> 
> 标签：java, web-services, rest, jax-rs

应该`@Context HttpHeaders`在一个`Interceptor`?

我创建了一个`RestfulClasses`扩展`javax.ws.rs.core.Application`和注释它的类`@javax.ws.rs.ApplicationPath("/api")`——所有这些都是非常标准的东西。

我还有一个类，添加到处理特定路径，它本身工作正常。问题是我想检查传入的 HTTP 标头，并且使用拦截器听起来很完美。

我的拦截器类有一个`@Context HttpHeaders httpHeaders`声明，但在`@AroundInvoke`方法中这个属性是空的。

我应该期望这个工作还是我错过了什么？还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:17:01.230

我找到了一种使用拦截器的方法：扩展一个具有成员的基类：

```
 @Context protected HttpHeaders headers; 
```

还有一个 @AroundInvoke 方法，在调用任何方法之前检查标头。虽然它并不完全优雅。

Artem 的解决方案也有效，但我是该平台的新手，之前没有遇到过 servlet 过滤器。虽然我仍然更喜欢 web.xml 标记的注释，但它更优雅......

# entity-framework-4 - EntityFramework 4.3.1 中的持久实体不返回导航属性

> ID：10333679
> 
> 赞同：0
> 
> 时间：2012-04-26T12:43:45.190
> 
> 标签：entity-framework-4, savechanges, navigation-properties

我正在使用 Visual Studio 2010 中的 EntityFramework 4.3.1。

我有一个名为 container 的根实体对象**，它有一个名为****containerversions**的导航属性。

当需要新的容器版本时，我：

1.  新建一个**containerversion**对象
2.  通过 EF 上下文获取根容器
3.  将新的 containerversion 添加到 containerversions 列表属性。
4.  通过 Context.SaveChanges() 保存上下文

所有这些都工作正常。

但是，当我查看容器对象并检查 containerversions 集合属性时，保存后，新的 containerversion 就在那里，但它的导航属性没有填充，它的类型不是 System.Data.Entity.DynamicProxy 而是新的类型我创建的对象在保存之前添加到集合中。

当我保存将导致新插入的 containerversion 导航属性被填充的根实体时，我是否遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:20:12.600

如果您只是通过调用创建实体，`new ContenerVersion`您将永远不会获得该实例的动态代理。要获得动态代理，您必须使用`objectContext.CreateObject`或`dbContext.ContainerVersions.Create`

# android - 如何使用 Ant 构建 Android 应用程序？

> ID：10333683
> 
> 赞同：0
> 
> 时间：2012-04-26T12:43:54.833
> 
> 标签：android, ant

我有一个 android 项目，它使用最新的 Google API 和 Android 15 SDK 来构建。它还具有其他库 - *.so、*.jar 以及资产和资源，如果最后两个有所不同的话。所以我想通过 Ant 构建这个项目，这样我就可以在我进一步的 CruiseControl 配置中使用该脚本。

目前我只有`build.xml`通过这个命令自动生成的：

```
android update project --path . 
```

如果需要，我应该更改哪些内容以包含这些库和资源。请写下最简单的库使用示例。提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:48:21.360

将您的 JAR 放入`libs/`. [通过文档](http://developer.android.com/guide/developing/projects/projects-cmdline.html)中的说明设置您的 Android 库项目，主要涉及修改`project.properties`。您已经通过命令行使用`ndk-build`.

# java - 无法在 Spring Bean 中注入 DAO

> ID：10333685
> 
> 赞同：2
> 
> 时间：2012-04-26T12:44:00.493
> 
> 标签：java, spring

在 spring 3.o 中，我正在尝试使用以下方法将我的 DAO 层对象注入到我的 singleTon bean：

```
ApplicationContext applicaionContext = new ClassPathXmlApplicationContext(ApplicationConstants.APP_PROPERTY_CONFIG_PATH);

        TemplateManagementDAO  templateManagementDAO =(TemplateManagementDAO) applicaionContext.getBean("templateManagementDAO"); 
```

但它给出了例外：

```
java.lang.NoClassDefFoundError: org.springframework.beans.FatalBeanException
    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:581)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:983)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:879)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4655)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5364)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:345)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:986)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:970)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:704)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1649)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1254)
    at com.sun.enterprise.server.WebModuleDeployEventListener.moduleDeployed(WebModuleDeployEventListener.java:182)
    at com.sun.enterprise.server.WebModuleDeployEventListener.moduleDeployed(WebModuleDeployEventListener.java:278)
    at com.sun.enterprise.admin.event.AdminEventMulticaster.invokeModuleDeployEventListener(AdminEventMulticaster.java:1005)
    at com.sun.enterprise.admin.event.AdminEventMulticaster.handleModuleDeployEvent(AdminEventMulticaster.java:992)
    at com.sun.enterprise.admin.event.AdminEventMulticaster.processEvent(AdminEventMulticaster.java:470)
    at com.sun.enterprise.admin.event.AdminEventMulticaster.multicastEvent(AdminEventMulticaster.java:182)
    at com.sun.enterprise.admin.server.core.DeploymentNotificationHelper.multicastEvent(DeploymentNotificationHelper.java:308)
    at com.sun.enterprise.deployment.phasing.DeploymentServiceUtils.multicastEvent(DeploymentServiceUtils.java:231)
    at com.sun.enterprise.deployment.phasing.ServerDeploymentTarget.sendStartEvent(ServerDeploymentTarget.java:298)
    at com.sun.enterprise.deployment.phasing.ApplicationStartPhase.runPhase(ApplicationStartPhase.java:132)
    at com.sun.enterprise.deployment.phasing.DeploymentPhase.executePhase(DeploymentPhase.java:108)
    at com.sun.enterprise.deployment.phasing.PEDeploymentService.executePhases(PEDeploymentService.java:966)
    at com.sun.enterprise.deployment.phasing.PEDeploymentService.start(PEDeploymentService.java:609)
    at com.sun.enterprise.deployment.phasing.PEDeploymentService.start(PEDeploymentService.java:653)
    at com.sun.enterprise.admin.mbeans.ApplicationsConfigMBean.start(ApplicationsConfigMBean.java:773)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.enterprise.admin.MBeanHelper.invokeOperationInBean(MBeanHelper.java:390)
    at com.sun.enterprise.admin.MBeanHelper.invokeOperationInBean(MBeanHelper.java:373)
    at com.sun.enterprise.admin.config.BaseConfigMBean.invoke(BaseConfigMBean.java:477)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
    at sun.reflect.GeneratedMethodAccessor13.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.enterprise.admin.util.proxy.ProxyClass.invoke(ProxyClass.java:90)
    at $Proxy1.invoke(Unknown Source)
    at com.sun.enterprise.admin.server.core.jmx.SunoneInterceptor.invoke(SunoneInterceptor.java:304)
    at com.sun.enterprise.interceptor.DynamicInterceptor.invoke(DynamicInterceptor.java:170)
    at com.sun.enterprise.admin.jmx.remote.server.callers.InvokeCaller.call(InvokeCaller.java:69)
    at com.sun.enterprise.admin.jmx.remote.server.MBeanServerRequestHandler.handle(MBeanServerRequestHandler.java:155)
    at com.sun.enterprise.admin.jmx.remote.server.servlet.RemoteJmxConnectorServlet.processRequest(RemoteJmxConnectorServlet.java:122)
    at com.sun.enterprise.admin.jmx.remote.server.servlet.RemoteJmxConnectorServlet.doPost(RemoteJmxConnectorServlet.java:193)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.ApplicationFilterChain.servletService(ApplicationFilterChain.java:427)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:315)
    at org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:287)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:218)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:94)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:98)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:222)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:587)
    at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:1093)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:166)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:587)
    at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:1093)
    at org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:291)
    at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.invokeAdapter(DefaultProcessorTask.java:666)
    at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.doProcess(DefaultProcessorTask.java:597)
    at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.process(DefaultProcessorTask.java:872)
    at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.executeProcessorTask(DefaultReadTask.java:341)
    at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:263)
    at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:214)
    at com.sun.enterprise.web.connector.grizzly.TaskBase.run(TaskBase.java:264)
    at com.sun.enterprise.web.connector.grizzly.WorkerThreadImpl.run(WorkerThreadImpl.java:117) 
```

谁能建议我为什么不能将 DAO 对象访问到 bean 层？谢谢，Gunjan Shah。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:05:06.957

在您的`application-context.xml`定义中：

```
<bean id="templateManagementDAO" class="yourPackage.TemplateManagementDAO" /> 
```

注意`TemplateManagementDAO`应该是实现类而不是接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:12:56.840

您需要先修复此异常

`java.lang.NoClassDefFoundError: org.springframework.beans.FatalBeanException`

这与任何 Spring 配置错误无关。你的类路径上有旧版本的 Spring 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:46:05.733

产生问题是因为我的应用程序初始化程序类在容器加载之前尝试访问 DAO。

所以在使用lazy-init = true 选项后它工作正常。

```
 <!-- LAZY LOAD THIS BEAN TO RESOLVE DAO INJECTION PROBLEM INTO THE BEAN -->
    <bean id="selStartUpDataInitializer" class="com.eks.sel.service.SELStartUpDataInitializer"
        factory-method="getInstance" lazy-init="true">
    </bean> 
```

供您进一步参考，这是我使用 DAO 的类，从那里生成异常..

```
public class SELStartUpDataInitializer  implements Cloneable{

    private static SELStartUpDataInitializer selStartUpDataInitializer;
    private static final Logger LOGGER =Logger.getLogger(SELStartUpDataInitializer.class);
    private static Map<String,Object> staticContextMap = new HashMap<String, Object>(); 

    //PRIVATE CONSTRUCTOR : FOR SINGLE TON
    private SELStartUpDataInitializer(){                
        initializeTempalteDataFieldMap();
    }

    //OVERRIDE CLONNABLE METHOD
    @Override
    protected Object clone() throws CloneNotSupportedException {
        if(selStartUpDataInitializer==null){
            selStartUpDataInitializer = new SELStartUpDataInitializer();
        }
        return selStartUpDataInitializer;
    }

    //GET INSTANCE : USED BY BEAN TO INITIALIZE THE BEAN 
    public static synchronized SELStartUpDataInitializer getInstance(){
        if(selStartUpDataInitializer==null){
            selStartUpDataInitializer = new SELStartUpDataInitializer();
        }
        return selStartUpDataInitializer;
    }   

    //INITIALIZE TEMPALTE DATA FILEDs : CALLED BY ONE TIME CONSTRUCTOR
    public  void initializeTempalteDataFieldMap(){      
        LOGGER.info("SELStartUPDataInitializer ... Initializing all temaplte data mapping fields ....");
        Map<Integer, Map<String,String>> templateDatafieldMap = new HashMap<Integer, Map<String,String>>();
        LOGGER.info("Loading application contex from the class path : STARTED");
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(ApplicationConstants.APP_RELOAD_PROPERTY_CONFIG_PATH);
        LOGGER.info("Loading application contex from the class path : COMPLETED");
        //ITS MANDATORY TO CAST BY INTERFACE. OTHERWISE $PROXY ERROR WILL BE GENERATED
        ITemplateManagementDAO  templateManagementDAO =(ITemplateManagementDAO) applicationContext.getBean("templateManagementDAO");                

        List<Template> templates = templateManagementDAO.findByStatus(1);
        LOGGER.info("initializeDataFields, number of templates = "+templates.size());

        for (Template template : templates) {
            String base64TffFile = ApplicationConstants.BASE64_PREFIX + 
                            new String(Base64.encodeBase64(template.getTemplateFile().getBytes()));

            LOGGER.info("initializeDataFields, initializing templateId = "+template.getTemplateid()+".");
            templateDatafieldMap.put(template.getTemplateid(), SELUtil.getDatafieldNames(base64TffFile));
            LOGGER.info("initializeDataFields, templateId = "+template.getTemplateid()+" initialized.");
        }

        IDynamicAttributeDAO dynamicAttributeDAO =(IDynamicAttributeDAO) applicationContext.getBean("dynamicAttributeDAO");

        staticContextMap.put(ApplicationConstants.TEMPLATE_DATAFIELD_MAP, templateDatafieldMap);
        staticContextMap.put(ApplicationConstants.ECC5_SAPTODATAFIELD_MAP,dynamicAttributeDAO.getAllSAPtoDataFieldAttribsMap(SAPConstants.SAP_ECC5));
        staticContextMap.put(ApplicationConstants.ECC6_SAPTODATAFIELD_MAP,dynamicAttributeDAO.getAllSAPtoDataFieldAttribsMap(SAPConstants.SAP_ECC6));
        staticContextMap.put(ApplicationConstants.ALL_DYNAMICATTRIBS_MAP,dynamicAttributeDAO.getAllDynamicAttributesMap());

    }

    public  Map<String, Object> getStaticContextMap() {
        return staticContextMap;
    }

} 
```

在上面的课程中，我尝试使用 ClassPathXMLApplicationContext 重新加载/重新扫描 bean。所以这里的异常是在使用 DAO 时产生的。

在完全扫描配置并且初始化所有 bean 之前，它正在尝试检索 DAO。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T14:16:51.853

我也有同样的例外。它提供的信息不多。通过大量调试，我发现在实例化 bean 时出现堆栈溢出异常。它是由使用 @Bean 注释的 2 个工厂方法之间的无休止的递归调用给出的。

这是它死前的堆栈跟踪，也许它发生在你身上，@Lazy 注释有助于避免这种情况......

```
"main" prio=10 tid=0x09151000 nid=0x4c10 runnable [0xf733b000]
   java.lang.Thread.State: RUNNABLE
        at com.cme.datamine.elephant.config.ElephantConfig.fileRouters(ElephantConfig.java:276)
        at com.cme.datamine.elephant.config.ElephantConfig$$EnhancerByCGLIB$$b38541f7.CGLIB$fileRouters$14(<generated>)
        at com.cme.datamine.elephant.config.ElephantConfig$$EnhancerByCGLIB$$b38541f7$$FastClassByCGLIB$$1e5bbc2f.invoke(<generated>)
        at net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:215)
        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:280)
        at com.cme.datamine.elephant.config.ElephantConfig$$EnhancerByCGLIB$$b38541f7.fileRouters(<generated>)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:149)
        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:570)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1015)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        - locked <0xe04f0fb8> (a java.util.concurrent.ConcurrentHashMap)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:292)
        at com.cme.datamine.elephant.config.ElephantConfig$$EnhancerByCGLIB$$b38541f7.fileRouters(<generated>)
        at com.cme.datamine.elephant.config.ElephantConfig.faultToleranceArbiter(ElephantConfig.java:302)
        at com.cme.datamine.elephant.config.ElephantConfig$$EnhancerByCGLIB$$b38541f7.CGLIB$faultToleranceArbiter$15(<generated>)
        at com.cme.datamine.elephant.config.ElephantConfig$$EnhancerByCGLIB$$b38541f7$$FastClassByCGLIB$$1e5bbc2f.invoke(<generated>)
        at net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:215)
        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:280)
        at com.cme.datamine.elephant.config.ElephantConfig$$EnhancerByCGLIB$$b38541f7.faultToleranceArbiter(<generated>)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:149)
        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:570)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1015)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        - locked <0xe04f0fb8> (a java.util.concurrent.ConcurrentHashMap)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:292)
        at com.cme.datamine.elephant.config.ElephantConfig$$EnhancerByCGLIB$$b38541f7.faultToleranceArbiter(<generated>)
        at com.cme.datamine.elephant.config.ElephantConfig.fileRouters(ElephantConfig.java:292)
        at com.cme.datamine.elephant.config.ElephantConfig$$EnhancerByCGLIB$$b38541f7.CGLIB$fileRouters$14(<generated>)
        at com.cme.datamine.elephant.config.ElephantConfig$$EnhancerByCGLIB$$b38541f7$$FastClassByCGLIB$$1e5bbc2f.invoke(<generated>)
        at net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:215)
        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:280)
        at com.cme.datamine.elephant.config.ElephantConfig$$EnhancerByCGLIB$$b38541f7.fileRouters(<generated>)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:149)
        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:570)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1015)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        - locked <0xe04f0fb8> (a java.util.concurrent.ConcurrentHashMap)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:292)
        at com.cme.datamine.elephant.config.ElephantConfig$$EnhancerByCGLIB$$b38541f7.fileRouters(<generated>)
        at com.cme.datamine.elephant.config.ElephantConfig.writersRunners(ElephantConfig.java:256)
        at com.cme.datamine.elephant.config.ElephantConfig$$EnhancerByCGLIB$$b38541f7.CGLIB$writersRunners$13(<generated>)
        at com.cme.datamine.elephant.config.ElephantConfig$$EnhancerByCGLIB$$b38541f7$$FastClassByCGLIB$$1e5bbc2f.invoke(<generated>)
        at net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:215)
        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:280)
        at com.cme.datamine.elephant.config.ElephantConfig$$EnhancerByCGLIB$$b38541f7.writersRunners(<generated>)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:149)
        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:570)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1015)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        - locked <0xe04f0fb8> (a java.util.concurrent.ConcurrentHashMap)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        - locked <0xe04f0fb8> (a java.util.concurrent.ConcurrentHashMap)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        - locked <0xe04f0fb8> (a java.util.concurrent.ConcurrentHashMap)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
        - locked <0xe04f1df0> (a java.util.concurrent.ConcurrentHashMap)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
        - locked <0xe04f1eb0> (a java.lang.Object)
        at com.cme.datamine.elephant.launch.Launcher.createSpringContext(Launcher.java:109)
        at com.cme.datamine.elephant.launch.Launcher.main(Launcher.java:55) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T13:17:32.333

在您的 Spring Context 配置文件中，如果您已激活包扫描以基于 annotations () 发现 bean，您也可以使用 @Repository 注释您的 DAO 类。

# java - 监控已经用java打开的串口

> ID：10333690
> 
> 赞同：2
> 
> 时间：2012-04-26T12:44:22.973
> 
> 标签：java, serial-port

我正在监视 com 端口并获取可用的数据，该端口正在被另一个程序使用，所以是否可以在不打开它的情况下监视端口这是代码

```
package comtest;

import javax.comm.*;
import java.io.*;

public class PortTyper {

    public static void main(String[] args) {

        try {
            CommPortIdentifier com =
                    CommPortIdentifier.getPortIdentifier("COM2");

            CommPort thePort = com.open("port", 10);

            CopyThread output = new CopyThread(thePort.getInputStream(),
                    System.out);

            output.start();
        } catch (Exception e) {
            System.out.println(e);
        }
    }
}

class CopyThread extends Thread {

    InputStream theInput;
    OutputStream theOutput;

    CopyThread(InputStream in, OutputStream out) {
        theInput = in;
        theOutput = out;
    }

    @Override
    public void run() {

        try {
            byte[] buffer = new byte[256];
            while (true) {
                int bytesRead = theInput.read(buffer);
                if (bytesRead == -1) {
                    break;
                }
                theOutput.write(buffer, 0, bytesRead);
            }
        } catch (IOException e) {
            System.err.println(e);
        }
    }
} 
```

所以我可以直接看看 COM2 没有什么数据吗

```
CommPort thePort = com.open("port", 10); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:48:00.263

如果串口被其他程序打开，则无法监控串口，因为一个串口不能同时打开 2 次。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-08T20:41:20.420

您可以使用 PortMon 等软件手动尝试监控串口。

然而，该软件仅在 Windows NT 之前可用。

# jquery - jQuery Sticky Scroller 多个实例

> ID：10333695
> 
> 赞同：2
> 
> 时间：2012-04-26T12:44:37.577
> 
> 标签：jquery, scroll

我正在尝试在我正在构建的页面上使用插件[（http://www.vertstudios.com/blog/jquery-sticky-scroller-position-fixed-plugin ）。](http://www.vertstudios.com/blog/jquery-sticky-scroller-position-fixed-plugin)我想在页面上多次使用该函数，但我发现如果我多次调用它，只有第二个实例可以正常工作。另一个没有顺利退出固定位置。我有一种感觉，插件正在使用最后一个元素的绝对位置。

示例代码...

```
var scroller1 = new StickyScroller(“#text1″,
{
start: 2145,
end: 3000,
interval: 300,
range: 100,
margin: 680
});

var scroller2 = new StickyScroller(“#text2″,
{
start: 7145,
end: 7600,
interval: 300,
range: 100,
margin: 680
}); 
```

提前致谢。

PVS

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T17:07:15.463

我是说 StickyScroller 插件的作者。老实说，我认为这个插件很垃圾，我是在几年前做的，当时我对 jQuery 还比较陌生。它唯一的好处是一些愚蠢的混乱方式让“粘性”在 IE7 中工作。我强烈建议您使用[jQuery Waypoints](http://imakewebthings.com/jquery-waypoints/)来满足您的“粘性”需求。它比我的插件更加优雅和简洁。

# objective-c - 在 iOS 开发中更改项目模板

> ID：10333704
> 
> 赞同：0
> 
> 时间：2012-04-26T12:45:19.483
> 
> 标签：objective-c, ios, xcode

好吧，这个问题之前一定有人问过，但有时你迷路了，甚至不知道要找什么。我创建了一个带有标签栏模板的 iOS 项目（来自 Xcode 的默认基本模板）。现在我不太关心这个模板，想要使用单个视图。我在故事板中设计了我需要的东西，并将其自定义类修改为我使用的控制器。

![在此处输入图像描述](../Images/60e632d7d9b9d5cd7ada8ee7392e233f.png)（自定义类子类 UIViewController）

这些是我到目前为止所做的唯一步骤。当模拟器启动时，故事板中不再存在的旧模板被使用并且仍然有效。我用我想要的模板创建了一个新项目，我没有看到在我的主项目中我必须做任何特别的事情来实现它。如果有人能指出我正确的方向，那将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:58:37.123

尝试从设备中删除应用程序，然后清理并重建解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:07:36.543

我不完全确定您正在设置什么自定义类。显然，您不能将 UIViewController 的类设为 UIView。尝试在任何 UIViewController 子类的名称中包含“控制器”一词。

## 故事板一个项目

你有没有看到故事板？如果不 -

您的 AppDelegate.m 应如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    return YES;
} 
```

要“使用”故事板，

*   点击 cmd-1 在左侧栏中查看您的文件
*   选择您的项目（最上面的项目）
*   在摘要部分，您应该有 1 或 2 个目标，选择您的目标（即：非测试目标）
*   在 iPad/iPad 部署信息下设置你的故事板

或者，在 Info 选项卡下，您可以设置`Main storyboard file base name`plist 条目。

## 添加视图控制器

删除故事板中除选项卡栏控制器场景之外的所有内容后，请确保您没有直接设置它的视图或任何特殊内容。

将 View Controller 拖到 Storyboard 画布中，然后从 Tab Bar Controller 的中心按住 ctrl 并拖动到新控制器的中心，创建一个关系 segue。

然后点击 shift-cmd-k 来清理和 cmd-b/r 来构建/运行:)

希望这可以帮助！

# hadoop - 在 cygwin/windows 上为压缩编解码器构建 Hadoop 本机库时出错

> ID：10333705
> 
> 赞同：1
> 
> 时间：2012-04-26T12:45:19.990
> 
> 标签：hadoop, makefile, cygwin

我正在尝试在 Windows 环境中使用 Hadoop 压缩编解码器。但是，正如 Haddop 文档中提到的，需要为 Linux 以外的任何平台构建本机库。

我正在按照此处提到的步骤从 Cygwin 构建用于压缩编解码器的本机库：http: [//hadoop.apache.org/common/docs/r0.18.3/native_libraries.html#Building+Native+Hadoop+Libraries](http://hadoop.apache.org/common/docs/r0.18.3/native_libraries.html#Building+Native+Hadoop+Libraries)

但收到此错误：（日志的最后几行）

```
 [exec] configure: WARNING: jni.h: present but cannot be compiled
 [exec] configure: WARNING: jni.h:     check for missing prerequisite headers?
 [exec] configure: WARNING: jni.h: see the Autoconf documentation
 [exec] configure: WARNING: jni.h:     section "Present But Cannot Be Compiled"
 [exec] configure: WARNING: jni.h: proceeding with the preprocessor's result
 [exec] configure: WARNING: jni.h: in the future, the compiler will take precedence
 [exec] configure: WARNING:     ## ------------------------------------------ ##
 [exec] configure: WARNING:     ## Report this to the AC_PACKAGE_NAME lists.  ##
 [exec] configure: WARNING:     ## ------------------------------------------ ##
 [exec] checking for jni.h... yes
 [exec] checking zlib.h usability... yes
 [exec] checking zlib.h presence... yes
 [exec] checking for zlib.h... yes
 [exec] checking Checking for the 'actual' dynamic-library for '-lz'...
 [exec] checking zconf.h usability... yes
 [exec] checking zconf.h presence... yes
 [exec] checking for zconf.h... yes
 [exec] checking Checking for the 'actual' dynamic-library for '-lz'... (cached)
 [exec] checking fcntl.h usability... yes
 [exec] checking fcntl.h presence... yes
 [exec] checking for fcntl.h... yes
 [exec] checking for stdlib.h... (cached) yes
 [exec] checking for string.h... (cached) yes
 [exec] checking for unistd.h... (cached) yes
 [exec] checking for an ANSI C-conforming const... yes
 [exec] checking for memset... yes
 [exec] checking whether strerror_r is declared... yes
 [exec] checking for strerror_r... yes
 [exec] checking whether strerror_r returns char *... no
 [exec] configure: creating ./config.status
 [exec] config.status: creating Makefile
 [exec] config.status: error: cannot find input file: Makefile.in 
```

BUILD FAILED C:\cygwin\usr\local\hadoop\build.xml:596：执行此行时出现以下错误：C:\cygwin\usr\local\hadoop\build.xml:645：exec 返回：1

我还将所有 Makefile 重命名为 Makefile.in 但仍然无法克服此错误。任何人都可以帮我解决这个问题。

Makefile 确实存在于 haddop/src/native 文件夹中，如果我使用 ./configure 构建它，那很好，但是它不会生成任何 jar。

# perl - Glibc 静态链接

> ID：10333708
> 
> 赞同：1
> 
> 时间：2012-04-26T12:45:35.357
> 
> 标签：perl, glibc, static-linking

我尝试安装 Perl 模块，但在某些时候我收到此错误：

```
 chmod 644 SSH2.bs
rm -f blib/arch/auto/Net/SSH2/SSH2.so
LD_RUN_PATH="/usr/lib:/lib" cc  -shared -O2 -L/usr/local/lib -fstack-protector SSH2.o  -o blib/arch/auto/Net/SSH2/SSH2.so   \
       -L/root -L/usr/local/lib -L/lib -L/usr/lib -L/usr/local/lib -L/usr/local -L/usr/lib -L/usr -L/opt -L//lib -L/ -lssh2 -lz -lssl -lcrypto      \

/usr/bin/ld: cannot find -lz
collect2: ld returned 1 exit status
make: *** [blib/arch/auto/Net/SSH2/SSH2.so] Error 1
-> FAIL Installing Net::SSH2 failed. See /root/.cpanm/build.log for details. 
```

我在其他论坛上发现那行说

```
/usr/bin/ld: cannot find -lz 
```

意味着我缺少 glibc-static 包。但是我在 CentOS 5 上运行它并且在任何存储库中都没有 glibc-static 包？这个包还有其他替代名称还是我走错了方向？

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:42:20.717

不，-lz 是指 libz，zlib 压缩库。我确信 CentOS 有这个——你可能想要安装“zlib-devel”包。

# sql-server-2008 - 如何处理存储过程以实现兼容性

> ID：10333711
> 
> 赞同：2
> 
> 时间：2012-04-26T12:45:44.267
> 
> 标签：sql-server-2008, sql-server-2005, sql-server-2000, sql-server-2008-r2

您好我正在使用 MSSQLSERVER 2000,2005,2008 和 2008R2

我在 2000 年创建了 SP 并希望在更高版本上运行它，反之亦然假设我在 2008 年创建了 SP（我的意思是在更高版本上创建的 SP）并想在 2000 或 2005 等较低版本上运行它需要这样做才能在不同的不同版本上使用 SP 或 SP 中的相同代码？任何人都可以帮我解决这个问题....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:06:27.627

我假设“在 2008 年创建 SP 并希望在较低版本上运行它”是指在 2008 年处理该过程的代码并在 2000 年重新创建它。

如果是这样，它将取决于您的过程中的 T-SQL 代码。如果您在 2008 上有一个 proc 可以完成 2000 所做的所有事情，那么它将适用于两个版本。但是，例如，如果您在 2008 上有一个运行 CTE 的程序，它在 2000 上将无法运行，因为该版本不支持 CTE。

[此](http://www.google.ie/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CC8QFjAA&url=http://download.microsoft.com/download/2/0/B/20B90384-F3FE-4331-AA12-FD58E6AB66C2/SQL%2520Server%25202000%2520to%25202008%2520Upgrade%2520White%2520Paper.docx&ei=GEeZT53fDYOA8wPHrdCABg&usg=AFQjCNHREhaRPPZE_tjdjNENilWNKPNpIw)链接将下载显示差异的文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:22:55.140

首先，不要使用 CTE 或表变量。

SQL 2005+ 对分号有点迂腐/兼容，所以如果你写在那里，它应该在 SQL 2000 上运行。

有关一些列表，另请参阅[sql server 2005 的新 t-sql 功能是什么？](https://stackoverflow.com/q/679821/1352199)

来自经验的警告：Microsoft 承认在 SQL 2005 及更高版本中更改查询语义以提高性能。请参阅 Microsoft 2008 年 6 月 17 日上午 11:34 的回复： [http ://connect.microsoft.com/SQLServer/feedback/details/350485/bug-with-newid-and-table-expressions](http://connect.microsoft.com/SQLServer/feedback/details/350485/bug-with-newid-and-table-expressions)

例如，我在 SQL 2000 中编写了一个子查询来返回一个有效日期列表。

```
Select dates.Date, *
From (
    Select Cast(y + '-' + m + '-' + d1 + d2 As smalldatetime) [date]
    From (Select '2007' y Union Select '2008') y,
    (Select '01' m Union Select '02' Union Select '03' Union Select '04' Union Select '05'Union Select '06' Union Select '07' Union Select '08' Union Select '09' Union Select '10' Union Select '11' Union Select '12') m,
    (Select '0' d1 Union Select '1' Union Select '2' Union Select '3') d1,
    (Select '0' d2 Union Select '1' Union Select '2' Union Select '3' Union Select '4' Union Select '5' Union Select '6' Union Select '7' Union Select '8' Union Select '9') d2
    Where IsDate(y + '-' + m + '-' + d1 + d2) = 1
) dates 
```

我用它作为子查询来加入一个日期稀疏的表，这样我就可以构建一个日历。虽然不理想，但我不想在这种情况下构建“日期”表，并且它有效。

当我们切换到 SQL Server 2005 时，它决定在 Cast(as smalldatetime) 之后优化“Where IsDate”。这意味着它试图投射不是日期的东西，并返回错误。我相信我尝试进一步嵌套子查询，以便 Cast 位于带有 IsDate 的查询之外，但它仍然失败。解决方案是使用子查询的结果构建一个临时表或表变量，并将其连接到我们的稀疏表。

# linux - 如何制作和应用SVN补丁？

> ID：10333712
> 
> 赞同：53
> 
> 时间：2012-04-26T12:45:45.093
> 
> 标签：linux, diff, patch

我想制作一个 SVN 类型的补丁文件，`httpd.conf`以便我可以轻松地将其应用于其他主机。

如果我做

```
cd /root
diff -Naur /etc/httpd/conf/httpd.conf_original /etc/httpd/conf/httpd.conf > httpd.patch
cp /etc/httpd/conf/httpd.conf_original /etc/httpd/conf/httpd.conf
patch < httpd.patch 
```

我得到：

```
can't find file to patch at input line 3
Perhaps you should have used the -p or --strip option?
The text leading up to this was:
--------------------------
|--- /etc/httpd/conf/httpd.conf_original    2012-04-26 13:36:08.331068438 +0200
|+++ /etc/httpd/conf/httpd.conf 2012-04-26 14:27:36.857075085 +0200
--------------------------
File to patch: 
```

**问题**

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-07-16T14:11:53.067

使用**`svn patch`**.

案例1：**使用`/usr/bin/patch`**：

```
svn diff > $TMPDIR/mypatchfile.patch
cd myOtherCheckOut
patch -p0 < $TMPDIR/mypatchfile.patch 
```

如果没有通过`svn add`或添加/删除文件，则可以很好地应用您的更改`svn delete`

案例2：**使用`svn patch`**：

```
svn diff > $TMPDIR/mypatchfile.patch
cd myOtherCheckOut
svn patch $TMPDIR/mypatchfile.patch 
```

也跟踪添加和删除的文件。

请注意，轨道`svn move`s 和`rename`s

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-04-26T12:53:50.203

默认情况下，`patch`忽略目标文件名的目录部分；它只是在您当前的工作目录中寻找“httpd.conf”。如果您希望它使用完整路径，则必须使用以下选项明确要求它这样做`-p`：

`patch -p 0 < httpd.patch`

后面的数字`-p`是要从文件名路径中删除的级别；`-p N` 去掉包括斜线号 N 在内的所有内容。第一个斜线是数字 1，所以`-p 0`意思是“不要去掉任何东西”。

不过，一般来说，最好不要依赖补丁文件中的完整路径；如果它甚至适用于不同目录布局中的文件，则该补丁将更普遍有用。在运行补丁之前，您始终可以 cd 进入包含该文件的目录（如果需要，可以使用完整路径来查找补丁文件本身）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-06-21T18:29:29.977

如果你使用 TortoiseSVN，有一个易于使用的界面来创建和应用补丁。

**创造：**

右键单击文件夹 -> TortoiseSVN -> 创建补丁

系统将提示您选择输出文件

**申请：**

右键单击文件夹 -> TortoiseSVN -> 应用补丁

系统将提示您选择要应用补丁的文件并在必要时合并的界面。

# mysql - 一种快速更改 PHP 代码以抵抗 mysql 注入的方法

> ID：10333716
> 
> 赞同：-2
> 
> 时间：2012-04-26T12:45:55.377
> 
> 标签：mysql, database, code-injection

我的问题是，如何使用脚本或其他自动方法，更改每个

$_POST['*'] 变量，在所有 PHP 文件中，

等价物抗 MySQL 注入。

在这个话题上，我在谷歌上一无所获。

本主题可能有用：[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-stop-sql-injection-in-php)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:49:41.467

你不能可靠地做到这一点。这正是 PHP 开发人员打算使用命运多舛的魔术引号功能做的事情，但它根本无法适用于任何地方的每个人。

**安全性不是您在编写应用程序后就可以固定的东西。你必须为它设计。**在这种情况下，这意味着您需要重新访问每个 SQL 查询并以安全的方式重写它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:05:18.843

**正如 Jon 已经说过的，每个 SQL 查询都应该在您的应用程序中进行审查。**

但是，如果您使用的是 Apache，则可以尝试使用可能的（糟糕的）解决方案来回答您的问题。

1.  设置 apache 并`php.ini`允许`auto_prepend_file`通过`.htaccess`文件进行设置
2.  写进`php_value auto_prepend_file mysql_magic_quote.inc.php`你`.htaccess`
3.  放一些这样的代码`mysql_magic_quote.inc.php`

例子：

```
foreach($_POST as &$var)
    $var = addquotes($var);
foreach($_GET as &$var)
    $var = addquotes($var);
foreach($_COOKIE as &$var)
    $var = addquotes($var);
foreach($_REQUEST as &$var)
    $var = addquotes($var); 
```

**请注意：**

1.  这基本上模拟了不推荐使用的设置`magic_quotes_gpc`，该设置**已被弃用是有原因的！**
2.  这只是一个愚蠢的例子——它肯定会**引起副作用**！
3.  **不要这样做，而是检查您的代码！**
4.  我没有`mysql_real_escape_string()`在这里使用，因为那需要一个开放的数据库连接。
5.  我没有`mysql_escape_string()`在这里使用，因为它也被弃用了。

> addlashes() 的一个示例使用是当您将数据输入数据库时​​。例如，要将名称 O'reilly 插入数据库，您需要对其进行转义。强烈建议使用 DBMS 特定的转义函数（例如 MySQL 的 mysqli_real_escape_string() 或 PostgreSQL 的 pg_escape_string()），但如果您使用的 DBMS 没有转义函数并且 DBMS 使用 \ 来转义特殊字符，您可以使用这个功能。这只是将数据放入数据库，不会插入额外的\。将 PHP 指令 magic_quotes_sybase 设置为 on 将意味着 ' 被另一个 ' 转义。
> 
> PHP 指令 magic_quotes_gpc 在 PHP 5.4 之前默认启用，它本质上是对所有 GET、POST 和 COOKIE 数据运行 addlashes()。不要在已经用 magic_quotes_gpc 转义的字符串上使用addslashes()，因为你会做双重转义。函数 get_magic_quotes_gpc() 可能会派上用场来检查这一点。

# javascript - 在JSF中如何使用支持bean方法获取值后调用java脚本

> ID：10333719
> 
> 赞同：0
> 
> 时间：2012-04-26T12:46:05.047
> 
> 标签：javascript, jsf, google-maps-api-3

我正在我的 jsf 应用程序中开发一个功能，它应该从数据库中检索地点的纬度和经度，并将其绘制在谷歌地图中。由于[gmaps4jsf](http://code.google.com/p/gmaps4jsf/)库未使用[google maps java script api v3](https://developers.google.com/maps/documentation/javascript/)进行更新，因此我使用的是 google maps java script api。问题是在检索纬度和经度（通过jsf）后，我无法调用脚本来绘制地图中的位置。

这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:12:54.797

只需让 JSF 打印它，就好像它是一个 JS 变量。

```
<h:form>
    <h:commandButton value="Submit" action="#{bean.submit}" />
</h:form>
<h:outputScript rendered="#{not empty bean.lat and not empty bean.lon}">
    var lat = #{bean.lat};
    var lon = #{bean.lon};
    initializeMapSomehowWith(lat, lon);
</h:outputScript> 
```

*（`<h:outputScript>`生成一个 HTML`<script type="text/javascript">`元素，如果您仍在使用旧的 JSF 1.x，请在模板文本中使用`<h:panelGroup><script>`而不是 EL）`<h:outputText>`*

有类似的东西

```
public void submit() {
    lat = 12.106173;
    lon = -68.935304;
} 
```

请记住：JSF 基本上生成 HTML。JS 是 HTML 响应的一部分。

# java - Android：强制 texview 包装内容

> ID：10333720
> 
> 赞同：3
> 
> 时间：2012-04-26T12:46:08.497
> 
> 标签：java, android, multiline, textview, word-wrap

我有 tableview，在其中创建新行并手动设置它们的布局。在每一行中都有 3 个主要元素：图像、标题的 textview 和描述的 textview。要将它们移动到我想要的位置，我使用了两个线性布局。我想要用于描述的 textview（命名为 descView）以两行显示文本，但相反 - 它只显示一个。我做错了什么或调用什么方法，因此视图以两行显示文本。如果它按单词（而不是字符）包装文本将是完美的。

我现在拥有的截图：

![在此处输入图像描述](../Images/6403f2fad76becf8b43aaff93599d16c.png)

创建新行的代码（'New' 是我保存信息（文本、图像等）的对象）：

```
private TableRow formRow(New item) {

    //prepare table row parameters
    TableRow tr = new TableRow(this);
    tr.setBackgroundResource(R.drawable.results_table_row);
    tr.setVerticalGravity(Gravity.CENTER);
    tr.setTag(item.getTitle());
    tr.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            if (event.getAction() == MotionEvent.ACTION_UP) {
                v.setBackgroundResource(R.drawable.results_table_row);

            } else if (event.getAction() == MotionEvent.ACTION_DOWN) {
                v.setBackgroundResource(R.drawable.results_table_row_touched);
            }
            return true;
        }
    });

    //create main layout for content
    LinearLayout layout = new LinearLayout(this);
    layout.setOrientation(LinearLayout.HORIZONTAL);

    //add image
    int imageID = Integer.parseInt(item.getPictureSrc());
    ImageView image = new ImageView(this);
    image.setImageResource(imageID);
    image.setPadding(5, 5, 5, 5);
    layout.addView(image);

    //add another layout for title and description
    LinearLayout descLayout = new LinearLayout(this);
    descLayout.setOrientation(LinearLayout.VERTICAL);
    descLayout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 

    //add title
    TextView titleView = new TextView(this);
    titleView.setText(item.getTitle());
    titleView.setPadding(5, 0, 0, 0);
    titleView.setTextAppearance(this, R.style.TableRowStyle_ChildTitle);
    titleView.setLines(1);
    descLayout.addView(titleView);

    //add description
    TextView descView = new TextView(this);
    descView.setText(item.getDescription());
    descView.setPadding(5, 0, 0, 0);
    descView.setTextAppearance(this, R.style.TableRowStyle_ChildText);
    descView.setInputType(InputType.TYPE_TEXT_FLAG_MULTI_LINE);
    descView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 
    //descView.setEllipsize(TextUtils.TruncateAt.END);
    descView.setLines(2);
    descLayout.addView(descView);

    //add description layout to main layout
    layout.addView(descLayout);

    //finally, add layout to row
    tr.addView(layout);

    return tr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:56:40.147

对于我的一些应用程序，我有类似的设置，但就个人而言，我会废弃 2 LinearLayouts 并为此使用单个 RelativeLayout，我会尝试摆脱：

```
descView.setInputType(InputType.TYPE_TEXT_FLAG_MULTI_LINE);
descView.setLines(2); 
```

然后，我将项目相对于彼此定位，并将 TextView 的宽度设置为 FILL_PARENT 并将其高度设置为 WRAP_CONTENT 的侧面。

使用 RelativeLayout，您可以获得更统一的外观：

使用 ALIGN_PARENT_LEFT 设置 ImageView，在左右两侧给它一个 x-dip 的边距。

然后添加您的 Title TextView 并将其与 ImageView 的 RIGHT 对齐。

然后添加您的描述 TextView 并将其对齐到 ImageView 的右侧和标题下方。

既然你是通过代码来做的，我会更进一步，因为看起来它们都是相同的字体样式（标题只是粗体）并使其成为标题/描述的单个 TextView，然后只需使用：

```
 textView.setText(Html.fromHtml("<b>" + item.getTitle() + "</b><br>" + item.getDescription())); 
```

只需确保为所有内容提供一个唯一的 ID 以链接到，并且不要与尚​​未显示的内容对齐，否则您将抛出 NPE 或根本无法正确显示。

但是，是的，我将在任何一天使用 RelativeLayout 来列出具有多个组件的项，而不是 LinearLayout。

希望有帮助~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:52:28.877

如果您的 TableRow 只有 1 列，那么我认为`android:shrinkColumns="0"`您的**TableLayout**中的设置将帮助您解决此问题。

* * *

将布局参数添加到您的 TableRow ：

```
tr.setLayoutParams(new LayoutParams(TableLayout.LayoutParams.FILL_PARENT,
       TableLayout.LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:56:14.027

我将最大行数设置为某个数字，并通过将字符计算为第一个点来设置字符长度。所以现在应用程序知道要显示多少信息并且不会出现这样的错误

# ms-media-foundation - MediaFoundation 有类似 GraphEdit 的东西吗？

> ID：10333728
> 
> 赞同：4
> 
> 时间：2012-04-26T12:47:10.900
> 
> 标签：ms-media-foundation, graphedit

[GraphEdit](http://en.wikipedia.org/wiki/GraphEdit)仅适用于[DirectShow](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375454%28v=vs.85%29.aspx)，不适用于使用[MediaFoundation](http://msdn.microsoft.com/en-us/library/windows/desktop/ms694197%28v=vs.85%29.aspx)构建的拓扑。

MediaFoundation 是否有与 GraphEdit 类似的工具？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T12:48:59.510

与 GraphEdit 类似，[TopoEdit](http://msdn.microsoft.com/en-us/library/windows/desktop/ff485862(v=vs.85).aspx)是用于构建和测试 MediaFoundation 拓扑的可视化工具。

TopoEdit 在[Windows SDK](http://www.microsoft.com/download/en/details.aspx?id=8279)中可用，从适用于 Windows Server 2008 的 Windows SDK 开始（记得勾选*工具*复选框）。

默认情况下，它安装到：`C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T02:56:44.507

如果您安装最新的 Windows SDK。您可以在以下位置找到 TopoEdit 示例代码：

```
Microsoft SDKs\Windows\v7.0\Samples\Multimedia\MediaFoundation 
```

# java - 如何使 BaseAdapter 显示 AlertDialog android 应用程序

> ID：10333730
> 
> 赞同：2
> 
> 时间：2012-04-26T12:47:12.050
> 
> 标签：java, android, listview, android-alertdialog

如何使 listView 中 BaseAdapter 中的按钮显示 alertDialog，我尝试过，但它意外停止工作（运行时错误），我的代码如下所示。

任何建议

提前致谢

莫内拉

====更新后======================

```
import java.util.List;

import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class MyCasesListAdapter extends BaseAdapter {
    private Context context;

    private List<MyCaseClass> listOfCases;

    // TODO delete it not imp.
    public MyCasesListAdapter() {

        super();

    }

    public MyCasesListAdapter(Context context, List<MyCaseClass> listPhonebook) {
        this.context = context;
        this.listOfCases = listPhonebook;
    }

    public int getCount() {
        return listOfCases.size();
    }

    public Object getItem(int position) {
        return listOfCases.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup viewGroup) {
        MyCaseClass entry = listOfCases.get(position);

        if (convertView == null) {

            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.mypage_row, null);

        }

        // this is row items..
        // Set the onClick Listener on this button
        Button ConfExpandRegion  = (Button) convertView.findViewById(R.id.expand);
        Button Cancelb = (Button) convertView.findViewById(R.id.cancelCase);
        TextView tvCase = (TextView) convertView.findViewById(R.id.mypage_name);

        //To be a clickable button
        ConfExpandRegion.setFocusableInTouchMode(false);
        ConfExpandRegion.setFocusable(false);
       //For Dialog
        AlertDialog alertDialog = new AlertDialog.Builder(MyCasesListAdapter.this);
       alertDialog.setTitle("Conformation");
       alertDialog.setMessage("Are you sure you want to do ???");
        ConfExpandRegion.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                    alertDialog.setButton("Yes", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int which) {
                      // Some code

                       //ConfExpandRegion.setEnabled(false);
                   }

                });

                alertDialog.setButton2("No", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int which) {
                    // here you can add functions
                    // Do nothing 

                   }
                });

                alertDialog.setIcon(android.R.drawable.ic_dialog_alert);
                alertDialog.show();

        }});

       //To be a clickable button
        Cancelb.setFocusableInTouchMode(false);
        Cancelb.setFocusable(false);
        Cancelb.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                MyCaseClass entry = (MyCaseClass) v.getTag();
                listOfCases.remove(entry);
                // listPhonebook.remove(view.getId());
                notifyDataSetChanged();
            }
        });

        // Set the entry, so that you can capture which item was clicked and
        // then remove it
        // As an alternative, you can use the id/position of the item to capture
        // the item
        // that was clicked.
        ConfExpandRegion.setTag(entry);
        Cancelb.setTag(entry);

        // btnRemove.setId(position);

        return convertView;
    }

    public void onClick(View view) {
        MyCaseClass entry = (MyCaseClass) view.getTag();
        listOfCases.remove(entry);
        // listPhonebook.remove(view.getId());
        notifyDataSetChanged();

    }

    private void showDialog(MyCaseClass entry) {
        // Create and show your dialog
        // Depending on the Dialogs button clicks delete it or do nothing
    }

    public void add(MyCaseClass myCaseClass) {
        // TODO Auto-generated method stub
        listOfCases.add(myCaseClass);
    }

} 
```

//================================================= ==============================

```
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;

public class MyPage extends Activity {

    Button createForm;
    Button ConfExpandRegion, Cancelb;
    String ExpandMsg, CancelMsg;
    boolean b;
    MyCaseClass mycase;
    TextView tvCase;
    AlertDialog alertDialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mypage);

        // Moving to anther activity
        createForm = (Button) findViewById(R.id.creat_new_formbtn);
        createForm.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                Intent j = new Intent(MyPage.this, CreateNewForm.class);
                startActivity(j);

            }
        });

        // ============================================================================================
        // for list

            ListView list = (ListView) findViewById(R.id.mypage_list);
            list.setClickable(true);

            final List<MyCaseClass> listOfPhonebook = new ArrayList<MyCaseClass>();

            MyCasesListAdapter adapter = new MyCasesListAdapter(this, listOfPhonebook);

            for (MyCaseClass m : All_Static.getMyCaseList())
                adapter.add(new MyCaseClass(m));

            // after fill the adapter.. assign the list to the adapter
            list.setAdapter(adapter);

            list.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> arg0, View view, int position, long index) {
                    System.out.println("sadsfsf");
                ;
                }
            });
            list.setAdapter(adapter);
        // ========================================================================================

    }

    public void sendSMS(String number, String msg) throws Exception {
        if (!b) {
            SmsManager smsManager = SmsManager.getDefault();
            smsManager.sendTextMessage(number, null, msg, null, null);
        }
        b = true;
    }

    // ========================================================================

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T15:07:48.717

您是否 100% 确定在创建适配器时将“this”作为参数传递给您正在传递 Activity？

检查的一种好方法是像这样修改应用程序：

*将 Activity 参数添加到您的适配器*

```
private Context context;
private Activity parentActivity;
...
public MyCasesListAdapter(Context context, List<MyCaseClass> listPhonebook, Activity parentActivity) {         
    this.context = context;         
    this.listOfCases = listPhonebook; 
    this.parentActivity = parentActivity;    
} 
```

*像这样创建警报对话框...*

```
AlertDialog alertDialog = new AlertDialog.Builder(parentActivity); 
```

*最后，像这样调用适配器的构造函数......*

```
MyCasesListAdapter adapter = new MyCasesListAdapter(this, listOfPhonebook, MyPage.this); 
```

说明：您可能不需要将 Activity 和 Context 传递给您的基本适配器，但我这样做只是为了让您暂时保留其他所有内容。我不确定当您实例化适配器时“this”是否实际上是一个活动。我将构造函数中的第三个参数定义为“Activity”，以强制您传入一个 Activity。如果你尝试传入一些不是和活动的东西，你会得到编译错误，所以它应该可以帮助你。

另外，我刚刚注意到，但问题可能是您更新的代码仍在尝试使用 MyCasesListAdapter.this 作为上下文创建 AlertDialog，这不是活动。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-12-22T12:13:03.470

```
 AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(view.getRootView().getContext());
    alertDialogBuilder.setMessage("Are you sure you want to delete?");
    alertDialogBuilder.setPositiveButton("Ok",
            new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface arg0, int arg1) {
                    deleteExp(tid);
                }
            });

    alertDialogBuilder.setNegativeButton("cancel",
            new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface arg0, int arg1) {

                }
            });

    AlertDialog alertDialog = alertDialogBuilder.create();
    alertDialog.show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T12:52:29.587

首先你的**alertDialog**甚至没有初始化.. 所以 NPE .. 当你在 Adapter 中创建它时，请确保使用`activity context and not ApplciatioContext`

```
AlertDialog alertDialog = new AlertDialog.Builder(YourACtivity.this); 
```

上面的行不应该在类级别..它应该在`getView()`方法内部......并将您的活动实例用作上下文..类似`nameOfYourActivity.this`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T12:52:04.907

您必须使用 an[`AlertDialog.Builder`](http://developer.android.com/reference/android/app/AlertDialog.Builder.html)来构建`AlertDialog`.

# c# - 我在 XAML 中声明了一个图像，但想设置从 C# 显示的图像，因为它在隔离存储中

> ID：10333731
> 
> 赞同：0
> 
> 时间：2012-04-26T12:47:14.243
> 
> 标签：c#, windows-phone-7, xaml

我可以在我的 xaml 中像这样声明我的图像

```
<!--ContentPanel - place additional content here-->
<Grid x:Name="ContentPanelx" Grid.Row="1" Margin="0,0,0,0">
    <Image x:Name="MyImage" Height="150" HorizontalAlignment="Left" Margin="141,190,0,0" Name="image1" Stretch="Fill" VerticalAlignment="Top" Width="200" />
</Grid> 
```

我可以像这样通过 .xaml.cs 从隔离存储中加载我的图像

```
void loadImage()
{
    // The image will be read from isolated storage into the following byte array

    byte[] data;

    // Read the entire image in one go into a byte array

    using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
    {
        using (IsolatedStorageFileStream isfs = isf.OpenFile("0.jpg", FileMode.Open, FileAccess.Read))
        {
            data = new byte[isfs.Length];
            isfs.Read(data, 0, data.Length);
            isfs.Close();
        }
    }

    MemoryStream ms = new MemoryStream(data);
    BitmapImage bi = new BitmapImage();
    bi.SetSource(ms);

    Image image = new Image();
    image.Height = bi.PixelHeight;
    image.Width = bi.PixelWidth;

    image.Source = bi;    
} 
```

当我键入 MyImage。我找不到将其设置为我刚刚创建的图像的方法。请问有大佬可以给点建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T12:54:24.007

```
void loadImage() { // The image will be read from isolated storage into the following byte array

        byte[] data;

        // Read the entire image in one go into a byte array

        using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (IsolatedStorageFileStream isfs = isf.OpenFile("0.jpg", FileMode.Open, FileAccess.Read))
            {
                data = new byte[isfs.Length];
                isfs.Read(data, 0, data.Length);
                isfs.Close();
            }
        }

        MemoryStream ms = new MemoryStream(data);
        BitmapImage bi = new BitmapImage();
        bi.SetSource(ms);

        MyImage.Source = bi;    
    }
} 
```

你需要设置`MyImage.Source = bi;`. 就是这样

还有一点重构：

```
void loadImage() { 
        BitmapImage bi = new BitmapImage();

        using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (IsolatedStorageFileStream isfs = isf.OpenFile("0.jpg", FileMode.Open, FileAccess.Read))
            {
                bi.SetSource(isfs);
            }
        }

        MyImage.Source = bi;    
    }
} 
```

# linq - 带有多个条件的 WHERE 子句的 LINQ 查询

> ID：10333732
> 
> 赞同：8
> 
> 时间：2012-04-26T12:47:14.713
> 
> 标签：linq, entity-framework

我将 EntityFramework 与 POCO 一起使用。
假设我有这样定义的 POCO（简化）：

```
class Class1
{
    public int ID;
    public int SomeNumber;
}

class Class2
{
    public int ID;
    public int SomeNumber;
}

class Class3
{
    public int ID;
    public int SomeNumber;
}

class SomeClass
{
    public int ID;
    public int? Class1ID;
    public Class1 Class1;
    public int? Class2ID;
    public Class2 Class2;
    public int? Class3ID;
    public Class3 Class3;
} 
```

我想从数据库中获取所有记录，这些`SomeClass`记录属于`Class1`，`Class2`或者等于某个数字。`Class3``ClassX.SomeNumber`

我编写了如下所示的 LINQ 查询：

```
Database DB = new Database(); // object context
var result = DB.SomeClass.ToList();

int SomeNumber = 1; // some number
List<SomeClass> retValue = result
    .Where(x =>
        {
            int Number = 0;
            if (x.Class1 != null)
                Number = x.Class1.SomeNumber;
            else if (x.Class2 != null)
                Number = x.Class2.SomeNumber;
            else if (x.Class3 != null)
                Number = x.Class3.SomeNumber;
            return Number == SomeNumber;
        })
    .ToList(); 
```

...但是`retValue`不包含任何记录。

**解决方案**

显然我必须指定`.Include`语句，因为延迟加载被禁用`x.Class1`，`x.Class2`并且`x.Class3`总是有`null`值。我感到很惭愧，因为我没有明确声明延迟加载已被禁用——那时问题就很明显了。

然而，多亏了 Ladislav 的帖子，我改进了我的代码，如下所示：

```
Database DB = new Database(); // object context

int SomeNumber = 1; // some number
List<SomeClass> retValue = DB.SomeClass
    .Include("Class1")
    .Include("Class2")
    .Include("Class3")
    .Where(x =>
        SomeNumber == x.Class1.SomeNumber ||
        SomeNumber == x.Class2.SomeNumber ||
        SomeNumber == x.Class3.SomeNumber)
    .ToList(); 
```

我不知道 LINQ-to-Entities 应该执行自动空值合并。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T13:05:06.510

恕我直言，您应该对此感到满意：

```
Database DB = new Database(); 
var result = DB.SomeClass.Where(x =>
                            Number == x.Class1.SomeNumber ||
                            Number == x.Class2.SomeNumber ||
                            Number == x.Class3.SomeNumber)
                         .ToList(); 
```

您的查询会加载所有数据，然后在 .NET 中评估条件 = 您必须在访问之前测试空值，`SomeNumber`但如果您`SomeNumber`通过 Linq-to-entities 在 SQL 中进行评估，则不需要这样做。Linq-to-entities 应该执行自动空值合并。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:05:30.553

根据您的逻辑，如果 x.Class1 不为空，但 x.Class1.SomeNumber 为 3，则不会检查所有其他子句。

如果你想检查，如果只是一些`ClassN.SomeNumber == SomeNumber`，那么你应该这样做：

```
int SomeNumber = 1; // some number 
List<SomeClass> retValue = result 
    .Where(x => 
        { 
            if (x.Class1 != null && x.Class1.SomeNumber == SomeNumber) 
                return true;
            else if (x.Class2 != null && x.Class2.SomeNumber == SomeNumber) 
                return true;
            else if (x.Class3 != null && x.Class3.SomeNumber == SomeNumber) 
                return true;
            return false;
        }) 
    .ToList(); 
```

# visual-studio - 使用 TFS 但没有包还原的 NuGet

> ID：10333734
> 
> 赞同：0
> 
> 时间：2012-04-26T12:47:33.853
> 
> 标签：visual-studio, visual-studio-2010, nuget, nuget-package

我正在尝试为我们的团队建立一个私有 NuGet 服务器，但我想我已经找到了一个阻碍。

如果我必须从 TFS 下载解决方案，则会创建包及其子目录，但没有下载实际文件。结果是缺少 dll/程序集。

有没有办法在不启用包还原的情况下完成此操作？我喜欢在 vcs 中保留相应的 dll。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:25:40.957

默认情况下，TFS 在将文件夹添加到挂起的更改时会忽略 dll（通常不适用于二进制文件）。不要忘记将 dll 显式添加到源代码管理中。

这就是为什么我更喜欢在使用 TFS 时直接从 nuget 提要恢复包的原因:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:51:08.387

仍然没有找到解决方案。我认为我们真的必须切换到包还原功能。

# c++ - C++11；非静态数据成员初始化可以访问其他数据成员吗？

> ID：10333736
> 
> 赞同：6
> 
> 时间：2012-04-26T12:47:42.817
> 
> 标签：c++, gcc, lambda, c++11, mingw

我真的很喜欢 C# 中的属性的想法，作为一个小项目，我一直在修改用 C++ 实现它们的想法。我遇到了这个例子[https://stackoverflow.com/a/5924594/245869](https://stackoverflow.com/a/5924594/245869)看起来相当不错，但我不禁认为 lambdas 和非静态数据成员初始化可能使使用一些非常好的语法成为可能有了这个想法。这是我的实现：

```
#include <iostream>
#include <functional>

using namespace std;

template< typename T >
class property {

public:
    property(function<const T&(void)> getter, function<void(const T&)> setter)
        : getter_(getter),
          setter_(setter)
    {};

    operator const T&() {
        return getter_();
    };

    property<T>& operator=(const T& value) {
        setter_(value);
    }

private:
    function<const T&(void)> getter_;
    function<void(const T&)> setter_;

};

class Foobar {

public:
    property<int> num {
        [&]() { return num_; },
        [&](const int& value) { num_ = value; }
    };

private:
    int num_;

};

int main() {
    // This version works fine...
    int myNum;
    property<int> num = property<int>(
        [&]() { return myNum; },
        [&](const int& value) { myNum = value; }
    );
    num = 5;

    cout << num << endl;  // Outputs 5
    cout << myNum << endl;  // Outputs 5 again.

    // This is what I would like to see work, if the property
    // member of Foobar would compile...
    // Foobar foo;
    // foo.num = 5;

    // cout << foo.num << endl;

    return 0;
} 
```

我可以正常使用我的属性类 [参见 main() 中的示例]，但是带有 g++4.7 的 MinGW 并不特别关心我尝试将属性用作数据成员：

```
\property.cpp: In lambda function:
\property.cpp:40:7: error: invalid use of non-static data member 'Foobar::num_' 
```

所以似乎我的属性实现的概念有效，但它可能是徒劳的，因为我无法从我的 lambda 函数访问其他数据成员。我不确定标准如何定义我在这里尝试做的事情，我完全不走运，还是我只是没有在这里做某事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:42:12.933

您的属性是`property<int>`与包含对象（的实例）不同的对象（的实例`Foobar`）。因此，它的成员函数被传递一个不同的`this`，而不是你需要访问的`num_`那个——所以你不能那样做。如果 lambdas 是在 的非静态成员函数中定义的`Foobar`，它们将捕获该函数的`this`参数并可以访问封闭对象的成员（明确地， as `this->num_`）。但是 lambda 是在类中定义的，其中非静态数据成员实际上并不存在。如果 lambdas*确实*可以访问`num_`, which `num_`, 的哪个实例`Foobar`, 会是那个？

我看到的最简单的解决方案是让属性存储指向封闭对象的指针。这样，它可以自由访问其非静态成员。缺点是声明稍微复杂一些（您必须这样做`property<int, Foobar> num`），并且您需要通过传递`this`指针来初始化属性。因此，您将无法在类中执行此操作，它必须在构造函数的初始化列表中，因此否定了 C++11 数据成员初始化的优势。

那时，`this`lambdas 无论如何都可以捕获（通过值，而不是通过引用！），因此如果您将属性的初始化移动到 Foobar 的构造函数，那么您的代码实际上只需很少的更改即可工作：

```
Foobar::Foobar():
    num {
        [this]() { return this->num_; },
        [this](const int& value) { this->num_ = value; }
    }
{
} 
```

有谁知道`this`传递给恰好被调用的构造函数是否可用于类定义中的非静态成员初始化？我怀疑不是，但如果是的话，相同的构造将在类定义中起作用。

# c# - 来自控制台的进程与 winform 相比

> ID：10333750
> 
> 赞同：3
> 
> 时间：2012-04-26T12:48:49.867
> 
> 标签：c#, winforms, delegates

以下控制台应用程序运行正常 - 我很惊讶它没有出错。

```
class DelegateExperiments
{

    //>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    //open notepad when the console begins
    //create an event that fires and writes "Notepad closed" in the console
    //>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

    //instance variables of the form
    private const string helloText = "hello world";
    private const string exitText = "you just closed notepad";
    private Process myProcess;
    //<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<        

    static void Main(string[] args)
    {

        Console.WriteLine(helloText);

        DelegateExperiments myInstance;
        myInstance = new DelegateExperiments();
        myInstance.Foo();

        Console.Read();
    }

    void Foo()
    {

        myProcess = new Process();
        myProcess.StartInfo.FileName = @"notepad.exe";
        myProcess.Exited += MyProcessExited;
        myProcess.EnableRaisingEvents = true;
        //myProcess.SynchronizingObject = this;
        myProcess.Start();

    }

    private void MyProcessExited(Object source, EventArgs e)
    {
        Console.WriteLine(exitText);
    }

} 
```

如果我尝试用 winform 做类似的事情，即将消息写回表单上的标签，那么它会更复杂，需要线路`myProcess.SynchronizingObject = this;`才能工作。为什么它们应该不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T12:57:31.360

该类`Console`被有意编写为线程安全的。您可以从任何线程调用它。它甚至会确保不会“重叠”来自不同线程的调用。 `Console.Write/WriteLine`是原子的。这是因为 Console 旨在与 shell 交互，而 shell 的一个主要*目的*是能够收集来自多个*进程*的输入。让它能够做到这一点是相当大量的工作，但它需要完成才能真正实现其目的。

GUI 对象（例如标签）在设计时并未考虑到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:56:50.610

在 WinForms 中，对 UI 元素的所有访问都必须在专用的 UI 线程上。[请参阅此处](http://www.codeproject.com/Articles/18702/Threading-in-NET-and-WinForms)的第 1.2.1 节。

正如文档所说：

> 当 Exited 事件由可视化 Windows 窗体组件（例如 Button）处理时，通过系统线程池访问组件可能不起作用，或者可能导致异常。通过将 SynchronizingObject 设置为 Windows 窗体组件来避免这种情况，这会导致在创建组件的同一线程上调用处理 Exited 事件的方法。

# .net - 从 Dynamics CRM Online 中的自定义实体检索数据

> ID：10333765
> 
> 赞同：2
> 
> 时间：2012-04-26T12:49:31.287
> 
> 标签：.net, dynamics-crm, dynamics-crm-2011, crm, dynamics-crm-online

我开发了一个自定义应用程序，它能够使用 CRM Web 服务并执行 Windows Live Id 身份验证，从自定义 .NET 页面在 CRM 中创建、读取和更新操作。我能够使用 CRM 从帐户中检索数据以下代码：

```
 public ArrayList GetAccounts(Microsoft.Crm.Sdk.Samples.ServerConnection.Configuration serverconfig)
    {
        try
        {
            using (_serviceProxy = Microsoft.Crm.Sdk.Samples.ServerConnection.GetOrganizationProxy(serverconfig))
            {
                _serviceProxy.EnableProxyTypes();
                _service = (IOrganizationService)_serviceProxy;
                ServiceContext svcContext = new ServiceContext(_service);

                                var accounts = from a in svcContext.AccountSet
                               select new Account
                               {
                                   Name = a.Name,
                                   EMailAddress1 = a.EMailAddress1,
                                   Address1_City = a.Address1_City,
                                   Address1_Country = a.Address1_Country,
                                   Address1_Latitude = a.Address1_Latitude,
                                   Address1_Longitude = a.Address1_Longitude,
                                   AccountId=a.AccountId
                               };

                foreach (var a in accounts)
                {
                    en_names.Add(a.Name);
                    lat.Add(a.Address1_Latitude);
                    lon.Add(a.Address1_Longitude);
                    info1.Add(a.EMailAddress1);
                    info2.Add(a.Address1_City);
                    info3.Add(a.Address1_Country);
                    id.Add(a.AccountId);
                }
                en_det.Add(en_names);
                en_det.Add(lat);
                en_det.Add(lon);
                en_det.Add(info1);
               en_det.Add(info2);
                en_det.Add(info3);
                en_det.Add(id);

             return en_det;
            }
        }
        catch (FaultException<Microsoft.Xrm.Sdk.OrganizationServiceFault>)
        {
            throw;
        }
    } 
```

同样，我想从我在 CRM 在线创建的自定义实体中检索数据，但我无法找到这样做的方法。

任何人都可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T09:43:57.730

使用[早期绑定实体](http://msdn.microsoft.com/en-us/library/gg327844.aspx)。您应该生成类并包含在您的项目中。然后您将能够使用您的自定义实体。

# url - towerjs：运行示例应用程序

> ID：10333767
> 
> 赞同：0
> 
> 时间：2012-04-26T12:49:34.983
> 
> 标签：url, frameworks, web, routes, towerjs

我在[http://towerjs.org/screencasts](http://towerjs.org/screencasts)之后创建了一个示例应用程序。

我已经使用 npm 安装了所有的 deps，并且我还启动并运行了一个本地 mongodb 实例。

无论如何，我尝试访问的每个网址都喜欢

```
http://localhost:3000/posts/
http://localhost:3000/posts/index
... 
```

我有

```
No path matches /posts/
No path matches /posts/index
... 
```

这是我的资料来源： [http ://dl.dropbox.com/u/50740523/tower-app.zip](http://dl.dropbox.com/u/50740523/tower-app.zip)

问候，贾科莫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:33:29.673

看起来这是您的 /config/routes.coffee 文件。看起来好像您已经从 towerjs.org 网站复制了路线示例，以及直接从这些示例中复制了大多数其他文件。但是这些示例并不“完整”，代码不会像这样工作。

我的建议是生成一个新的应用程序，然后生成几个脚手架：

```
tower generate scaffold User name:string email:string hasMany:posts

tower generate scaffold Post content:string belongsTo:user 
```

然后运行：

```
tower server -e development 
```

并在 localhost:3000 检查它，以确保一切都在您的系统上正常工作。然后，检查提供的 routes.coffee 文件、控制器和模型，看看一个简单的系统是如何工作的。然后，您可以开始在您知道运行的应用程序中添加点点滴滴的功能。这样，当有东西损坏时，您将能够快速了解​​原因。我正在尝试编写一个简单但功能强大的 Tower 应用程序的详细演练，但是我也在边学习边学习，所以这将是一个缓慢的过程。但是，这应该有望使您再次前进。

抱歉，这可能不是您要寻找的答案，但是看看您文件夹中的内容，我不确定如何将这些部分放在一起并使它们一起工作，因为它们本质上是串在一起的示例块，而不是功能应用程序。例如，请注意您的 routes.coffee 文件中您引用了会话控制器和管理员“命名空间”，但两者均未提供代码。看起来好像您的模型和控制器正在做类似的事情。希望这可以帮助。

# css - 如何使用 css 将空的浮动 div 拉伸到可用的全高？

> ID：10333768
> 
> 赞同：2
> 
> 时间：2012-04-26T12:49:36.513
> 
> 标签：css, css-float

我有两个相邻的浮动 div，希望左边的 div 可以拉伸到右边的任何大小。单独使用css可以吗？

```
<div class="page">
    <div class="left-sidebar">
    </div>
    <div class="right-content">
    </div>
</div>

.left-sidebar
{
    background: url('ImageUrl') no-repeat right top #F8F1DB;
    float: left;
    width: 203px;
    min-height: 500px;
    height : auto;
}

.right-content
{
    background: #F8F1DB;
    margin-left: 203px;
    min-height: 477px;
} 
```

它最终看起来像这样：

```
------------------
| | |
| | |
| | |
| | |
| | |
------------------

```

左侧边栏框架有一个背景图像，应该拉伸到内容框架的任何高度，但是我在实现这一点时遇到了问题。

是否有一种跨浏览器的方法可以使左侧边栏 div 仅使用 css 拉伸与右侧内容框架相同的高度？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T12:59:26.523

我能想到的最好的方法是`position: absolute`在`.left-sidebar`元素上使用：

```
.page {
    position: relative; /* causes the left-sidebar to position relative to this element */
}

.left-sidebar {
    position: absolute;
    top: 0;
    bottom: 0;  /*  this line, and the one above, confer full-height */
    left: 0;
    width: 30%;
    background-color: #f90; /* adjust to taste, just to see where the element was rendered */
}

​.right-content {
    background-color: #f00; /* again, adjust to taste, was just to see where elements were rendered */
    margin: 0 0 0 35%; /* stops the sidebar showing 'above' the content, and gives a 5% gutter between */
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/DZrx7/)。

* * *

**针对以下评论进行了**编辑：****

 **> 浮动 div 的两侧都有一个标题和一些空间，所以我不知道要使用的实际顶部/左侧/底部位置。此外，如果右侧内容框架延伸得更长，左侧边栏框架不会随之延伸（将高度：500px 添加到小提琴的右侧内容框架）。

不幸的是，我能看到的唯一其他选择是在`.left-sidebar`元素内移动`.right-content`元素，然后以下工作。但是，这对于您的用例可能是不可能的。

```
.left-sidebar {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    width: 30%;
    background-color: #f90;
}

.right-content {
    position: relative;
    background-color: #f00;
    margin: 0;
    padding: 0 0 0 35%;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/DZrx7/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:54:11.393

这是一个复杂的问题。在这里你有一篇关于它的文章：http: [//matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)**

# python - 某些关键字上的 Django Haystack 错误

> ID：10333773
> 
> 赞同：1
> 
> 时间：2012-04-26T12:49:59.893
> 
> 标签：python, django, django-haystack, whoosh

我在我的平台上使用`haystack`和`whoosh`，它每小时运行一次，为我的内容编制索引。

我发现对于某些字符串，它会引发

```
VariableDoesNotExist: Failed lookup for key [object] in u'None' 
```

错误。

其中一些字符串包括“Shoot”、“Zero”和其他一些我不记得的字符串。

你以前有没有遇到过这个问题，有没有办法摆脱这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:32:47.180

我曾经看到过这样的错误。重建索引帮助了我。

```
python manage.py rebuild_index 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:27:58.357

听起来您正在使用不是您编码的外部包，因为您听起来不熟悉它正在寻找的字符串。

我对您正在使用的软件包一无所知，如果它正在寻找的键是必不可少的，但处理可能存在或可能不存在的字典键的常用方法是使用

```
mydict.get('keyname', defaultvalue) 
```

您可能需要简单地使用我猜 django-haystack 或您正在使用的任何软件包提交错误报告。你并没有在你的问题中真正说出来。

# java - 我可以忽略“可比”的使用吗

> ID：10333780
> 
> 赞同：0
> 
> 时间：2012-04-26T12:50:52.877
> 
> 标签：java, sorting, comparison

```
public class EmployeeSortTest {
    public static void main(final String[] args) {
        final Employee[] staff = new Employee[3];
        staff[0] = new Employee("Harry Hacker", 35000);
        staff[1] = new Employee("Carl Cracker", 75000);
        staff[2] = new Employee("Tony Tester", 38000);
        Arrays.sort(staff);
        for (final Employee e : staff) {
            System.out.println("name=" + e.getName() + ",salary=" + e.getSalary());
        }
    }
}

class Employee implements Comparable<Employee> {
    public Employee(final String n, final double s) {
        name = n;
        salary = s;
    }

    public String getName() {
        return name;
    }

    public double getSalary() {
        return salary;
    }

    public void raiseSalary(final double byPercent) {
        final double raise = salary * byPercent / 100;
        salary += raise;
    }

    @Override
    public int compareTo(final Employee other) {
        if (salary < other.salary) {
            return -1;
        }

        if (salary > other.salary) {
            return 1;
        }

        return 0;
    }

    private final String name;
    private double salary;
} 
```

我是 Java 的初学者，当我从 Cay S. Horstmann 先生和他的同事*Core Java, Volume I: Fundamentals*所写的书中学习时，我发现了一些我不太明白的东西。“employeesorttest.java”示例（第 245 页）。

我无法得到的是方法`compareTo`。它如何改变输出？该方法只返回三个数字：0、-1 和 1。它没有改变任何位置或`staff`. 另外，如果代码`arrays.sort(staff)`确实有效，为什么我们还需要使用接口？

我知道这两个代码之间一定有一些关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:53:40.257

Comparable 接口只告诉其他代码元素应该相对于另一个元素排序的位置。由调用代码实际使用该信息执行某些操作。

Comparable 的用途包括：

*   [`Collections.sort(list)`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)
*   [`Arrays.sort(array)`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D%29)
*   [`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)

有关更多信息，请参阅[Java 教程中的](http://docs.oracle.com/javase/tutorial/)[对象排序](http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html)部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:13:20.303

与 java 示例相比，此示例缺少一些更有意义的部分。我将向您展示的这种方法称为冒泡排序。

```
// A bubble sort for Strings. 
class SortString { 
    static String arr[] = { 
    "Now", "is", "the", "time", "for", "all", "good", "men", 
    "to", "come", "to", "the", "aid", "of", "their", "country" 
};

public static void main(String args[]) { 
    for(int j = 0; j < arr.length; j++) { 
        for(int i = j + 1; i < arr.length; i++) { 
          if(arr[i].compareTo(arr[j]) < 0) { 
          String t = arr[j]; 
          arr[j] = arr[i]; 
          arr[i] = t; 
        } 
     } 
    System.out.println(arr[j]); 
   } 
 } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:58:24.473

[`Comparable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口需要方法的定义`compareTo`。

根据 Java 文档，

> `int compareTo(T o)`
> 
> 将此对象与指定对象进行比较以进行排序。返回负整数、零或正整数，因为此对象小于、等于或大于指定对象。

如果一个对象实现了`Comparable`，那么类似的函数`Arrays.sort(...)`可以使用它。`Arrays.sort`不像`Employee`您的示例中那样查看 Array 中的对象，它仅将其视为一个`Comparable`对象。它只看到`compareTo`方法，但这就是对它们进行排序所需的全部。

# jquery - 如何仅在滚动时显示滚动条（使用 jQuery）

> ID：10333782
> 
> 赞同：1
> 
> 时间：2012-04-26T12:50:56.927
> 
> 标签：jquery, html, scroll, scrollbar

我目前正在构建一个底部有导航栏的测验应用程序，其中包含问题数量的项目符号：

[滚动条截图](http://i.stack.imgur.com/LWhNp.png)

我的页面底部有一个滚动条（水平），用作导航栏。就像您在移动应用程序上看到的很多一样。我没有或不希望滚动条可见，滚动我只需单击并拖动到一侧（或在平板电脑上点击并拖动）。这目前运作良好。

**问题**

我想添加的功能是一个很小的深蓝色滚动条，只有在我滚动时才会弹出。我认为如果我使用 div 而不是滚动条，那将是最简单的，因此可以使用 css 进行调整。现在我有了 div，随着栏滚动，自动调整到问题的长度和当前位置。

您知道如何在滚动发生时显示滚动条吗？我宁愿不把它放在悬停上，而只放在运动上。

我已经尝试过以下方法：

```
$('#wrapper').scroll(function() {
  $('#navScrollbar').toggleClass("hidden");
}); 
```

hidden 类显然包含“visibility : hidden;”。这不适用于每次滚动移动都会切换类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T13:57:41.947

这个问题是很久以前问的，当时我还没有太多经验。由于很久以前就提出了这个问题，所以我将选择的解决方案作为答案：

```
var scrollbarTimeout;

$('#wrapper').scroll(function() {
    $('#navScrollbar').show();
    clearTimeout(scrollbarTimeout);
    scrollbarTimeout = setTimeout(function()
    {
        // Your function here
        $('#navScrollbar').hide();
    }, 500);
}); 
```

每当发生滚动事件时，此代码的作用是：被调用的函数创建（或清除并创建）一个超时，该超时会在 500 毫秒后隐藏滚动条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:15:09.183

创建一个每两秒运行一次的ticker函数

```
var isUserScrolling = false;
var navScrollbar = $('#navScrollbar');

function ToggleScrollbarVisiblity()
{
  if(isUserScrolling == false)
    navScrollbar.stop().fadeOut();

  isUserScrolling = false;
}

setInterval(ToggleScrollbarVisiblity, 1500);

$('#wrapper').scroll(function() {
  if(isUserScrolling == false)
    navScrollbar.stop().fadeIn();

  isUserScrolling = true;
}); 
```

这将有望做的是：

*   当用户开始在滚动条中滚动淡入淡出并将布尔值设置为 true

*   每 x 秒将滚动设置为 false

*   当 x 秒返回时，如果它仍然是假的（用户没有滚动 x 秒）然后淡出

* * *

如果您遇到滚动条在错误的时刻淡出的问题，那么这是一个时间问题。然后协调时间，尝试：

```
var scrollThread = null;
var isUserScrolling = false;
var navScrollbar = $('#navScrollbar');

function ToggleScrollbarVisiblity()
{
  if(isUserScrolling == false) {
    navScrollbar.stop().fadeOut();
    clearInterval(scrollThread);
  }

  isUserScrolling = false;
}

$('#wrapper').scroll(function() {
  if(isUserScrolling == false) {
    navScrollbar.stop().fadeIn();
    scrollThread = setInterval(ToggleScrollbarVisiblity, 1500);
  }

  isUserScrolling = true;
}); 
```

# jquery - 鼠标悬停时更改多个 div 的类

> ID：10333783
> 
> 赞同：2
> 
> 时间：2012-04-26T12:50:57.840
> 
> 标签：jquery, jquery-ui

我有一个脚本如下。我有许多 div，当光标在一个 div 上时，我按如下方式更改该 div 的类名。但我不知道这样的 div 的数量。我怎样才能据此更新代码？谢谢。

```
$(function() {   
    $('#ea_0').hover( function(){    
    $('#ea_0').attr('class','myClassHover'); 
    },  

    function(){       
        $('#ea_0').attr('class','myClass'); 
    }); 
}); 

<div id="ea_0" class="myClass" ></div>
<div id="ea_1" class="myClass" ></div>
<div id="ea_2" class="myClass" ></div>
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:54:47.400

尝试 ：

```
$(function () {
    $('div[id^="ea_"]').hover(function () {
        $(this).addClass('myClassHover');
        $(this).removeClass('myClass');
    }, function () {
        $(this).addClass('myClass');
        $(this).removeClass('myClassHover');
    });
});
​ 
```

使用[以选择器开头的选择器](http://api.jquery.com/attribute-starts-with-selector/)`id`选择所有以开头的DOM元素`ea_`并使用[addClass](http://api.jquery.com/addClass/)和[removeClass](http://api.jquery.com/removeClass/)切换类属性

[这里的工作示例](http://jsfiddle.net/8zUYE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:01:50.630

如果可能的话，为这些元素添加一个独特的类`<div>`将是更好的选择。如果没有，那么您可以使用 ID 的“属性以”选择器来选择`<div>`ID 以“ea_”开头的所有元素。然后用于`this`引用`<div>`回调函数内部触发事件的那个。

```
$(function() {   
    $('div[id^="ea_"]').hover( function(){    
        $(this).attr('class','myClassHover'); 
    },  
    function(){       
        $(this).attr('class','myClass'); 
    }); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:32:55.037

试试这个优雅的解决方案：您只需将所有 div 包装在另一个 div 中，而不是将悬停事件绑定到每个 div，您只需将 mouseover 和 mouseout 事件绑定到容器 div 以加快东西。

```
$('div:first').mouseover(function(event) {
    $(event.target).closest('div').addClass('myClassHover');
});
$('div:first').mouseout(function(event) {
    $(event.target).closest('div').removeClass('myClassHover');
}); 
```

演示：http: [//jsfiddle.net/8vD56/](http://jsfiddle.net/8vD56/)

# django - 带有 soaplib 和 suds 的 SOAP Web 服务

> ID：10333785
> 
> 赞同：0
> 
> 时间：2012-04-26T12:50:59.380
> 
> 标签：django, web-services, soap, suds, soaplib

我使用带有soaplib的soap webservices并使用suds从命令提示符创建客户端，这可以正常工作。谁能告诉我如何通过视图创建客户端？如何将 oject 传递给soaplib 的rpc() 或soap() 方法？

提前致谢

# windows-phone-7 - 如何在windows phone 7中的按钮单击上添加带有滚动条的消息框

> ID：10333789
> 
> 赞同：1
> 
> 时间：2012-04-26T12:51:14.150
> 
> 标签：windows-phone-7, windows-phone-7.1

嗨，我是 Windows Phone 7.1 开发的新手。我如何在带有 ScrollBar 的网格内添加消息框，因为我的消息在按钮单击事件上很大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:54:15.187

您可以使用以下博客文章中详细介绍的 ChildWindow 控件：-

[http://wildermuth.com/2010/08/17/Using_ChildWindow_in_Windows_Phone_7_Projects](http://wildermuth.com/2010/08/17/Using_ChildWindow_in_Windows_Phone_7_Projects)

# android - 适用于 Android USB 网络摄像头的 V4L2 补丁

> ID：10333790
> 
> 赞同：2
> 
> 时间：2012-04-26T12:51:15.137
> 
> 标签：android, v4l2

我一直在尝试使用[https://bitbucket.org/neuralassembly/simplewebcam](https://bitbucket.org/neuralassembly/simplewebcam)作为指南，让 USB 网络摄像头在我的 Acer A500 上工作。

根据我设备上的配置文件，它满足所有要求并且应用程序运行，但我仍然无法让它工作。

我在这里找到了一个 V4L2 补丁：[http](http://code.google.com/p/android-m912/downloads/detail?name=v4l2_camera_v2.patch) ://code.google.com/p/android-m912/downloads/detail?name=v4l2_camera_v2.patch但我不知道如何处理它。

我会很感激任何可以帮助我编译/安装这个补丁的人。

谢谢

保罗

*Acer A500 CWM 3.2 植根于 ADHOC wifi 支持*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:38:36.383

UVC 合规性不是这里的问题。Acer A500 运行 Android，根据您的查询，您似乎正试图让 USB 网络摄像头被 Android 相机应用程序识别。

您遇到的问题是平板电脑上的 Android 框架仅识别内置摄像头，不支持枚举底层 Linux 内核支持的 USB 摄像头。你提到的[补丁应该可以解决这个问题。](http://code.google.com/p/android-m912/downloads/detail?name=v4l2_camera_v2.patch)它修改了 Android 相机框架以添加对通用 v4l2 相机的支持。不幸的是，这不是针对 Acer A500，而是针对完全不同的设备（技嘉 M912X）。

要在 Acer A500 上添加对 USB 摄像头的支持，您需要：

*   访问 android 源代码。
*   修改摄像头框架（camera-HAL，摄像头服务）。
*   构建它并将 camera-HAL 和框架二进制文件推送到设备上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T02:57:38.617

@TheCodeArtist, the bulk of my current activities is around webcams working on Android devices. Based on personal experience using the Acer A500, you do NOT need any modification to any of your sources to get a UVC compliant webcam to work with it!- especially the video portion.

. The Android implementation on the Acer A500 already has the video4linux2 driver installed as part of the base kernel. What it needs is an available /dev/video?? to run.

I will suggest that @1358628 you connect to the tablet using adb. Try something like adb ipaddress_of_the Acer_A500:5555 if the tablet is rooted or connect the tablet to your development system through USB. Plug your camera into the Acer A500 and check for the avialble /dev/video?? consumed.

1\. Connect to the Acer A500 by using **adb connect "address_of_camera:5555"**
2\. use **adb devices** to ensure that you are connected to the tablet. Then
4\. Please try something like **ls -l dev/video?**. Check the number at the end of the word video --video? portion of your response. For example if you may notice **../video1, ../video2\.**

After this, turn the power off and unplug the webcam. Repeat the last exercise: check to see the ../video? listing. You should notice a missing ../video? entry. If you don't your camera is not UVC compliant. If you confirm the brand and model of your webcam I could verify things for you.

Try this suggestion an let me know the results

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-03T10:13:47.547

仅当您需要将 USB 网络摄像头作为本机摄像头而不需要任何第三方应用程序（主要使用 jni 与 v4l2 调用和操作数据）时才需要修补程序。您提到的补丁修改了 android 框架以获取 USB 网络摄像头。你需要你的设备 aosp 源来应用补丁，请注意这个补丁是旧的，所以现在相关的源可能不一样了。

[simplewebcam 不起作用](https://bitbucket.org/neuralassembly/simplewebcam "简单的网络摄像头")的最可能原因是视频设备节点与源中提到的默认 0 不匹配。`ls -l /dev/video*`检查插入网络摄像头后执行创建的视频节点。相应地修改代码中的视频节点索引。如果您通过执行`chmod 666 /dev/videoX`where x is webcam video device index 获得权限被拒绝错误，还可以更改设备的写入权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T02:30:04.607

你能解释一下你究竟做了什么试图让网络摄像头与你的平板电脑一起工作吗？如果您最近有一个网络摄像头，它将符合 UVC - 这意味着您不需要任何额外的外部驱动程序即可使用网络出租车

请查看此 URL 上的此列表，以查看您使用的摄像头是否符合 UVC。[http://www.ideasonboard.org/uvc/#devices](http://www.ideasonboard.org/uvc/#devices)

您需要的是应用程序需要知道如何识别和“呼叫”并使用网络摄像头。您从该大学研究网站引用的示例肯定适用于您的网络摄像头模型。
继续构建示例单机或双机应用程序，您的网络摄像头应该能够显示其输出

# html - Facebook中的分享方式

> ID：10333793
> 
> 赞同：0
> 
> 时间：2012-04-26T12:51:32.827
> 
> 标签：html, facebook, methods, share

当我用这种方法分享一些东西时；

```
<a href="https://www.facebook.com/sharer/sharer.php?u=mypage.com" target="_blank">
  Share on Facebook
</a> 
```

facebook 会在我的页面中检索哪些文本以共享？我在 html 代码之间的`<title></title>` 标题或标题之间`<head></head>` 或我的正文部分之间`<body></body>`？

我只想分享这段文字；“您计算了 3 + 2 并找到了 5” 您将如何在 HTML 中编写代码？（所有页面仅包含此文本，没有其他内容）

它可能是 PHP、XML 或其他的，没关系。我只想了解 facebook 主要在我的页面中看到的内容。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:57:18.600

Facebook 从标签中获取标题，`<title></title>`从元描述标签中获取描述如下：

```
<meta name="description" content="Description" /> 
```

# javascript - 视频进度条不工作

> ID：10333794
> 
> 赞同：3
> 
> 时间：2012-04-26T12:51:39.290
> 
> 标签：javascript, html, css, javascript-events

我一直在尝试制作自定义视频播放器，但进度条出现问题，当我尝试单击进度条时，视频不会转到特定位置。

这是我的html代码：

```
<!doctype html>
<html lang="en">
<head>
    <link rel="stylesheet" href="main.css">
    <script src="main.js"></script>
</head>
<body>
    <section id="skin">
        <video id="myVideo" width="640" height="360">
            <source src="My Google Android.mp4">
        </video>
        <nav>
            <div id="buttons">
                <button type="button" id="playButton">Play</button>
            </div>
            <div id="defaultBar">
                <div id="progressBar"></div>
            </div>
            <div style="clear:both"></div>
        </nav>
    </section>
</body>
</html> 
```

这是javascript代码：

```
function doFirst(){
    barSize=600;
    myVideo=document.getElementById('myVideo');
    playButton=document.getElementById('playButton');
    defaultBar=document.getElementById('defaultBar');
    progressBar=document.getElementById('progressBar'); 

    playButton.addEventListener('click', playOrPause, false);
    defaultBar.addEventListener('click', clickedBar, false);
}

function playOrPause(){
    if(!myVideo.paused && !myVideo.ended){
        myVideo.pause();
        playButton.innerHTML='Play';
        window.clearInterval(updateBar);
    } else{
        myVideo.play();
        playButton.innerHTML='Pause';
        updateBar=setInterval(update, 500);
    }
}

function update(){
    if(!myVideo.ended){
        var size=parseInt(myVideo.currentTime*barSize/myVideo.duration);
        progressBar.style.width=size+'px';
    } else{
        progressBar.style.width='0px';
        playButton.innerHTML='Play';
        window.clearInterval(updateBar);
    }
}

function clickedBar(e){
    if(!myVideo.paused && !myVideo.ended){
        var mouseX=e.pageX-bar.offsetLeft;
        var newtime=mouseX*myVideo.duration/barSize;
        myVideo.currentTime=newtime;
        progressBar.style.width=mouseX+'px';
    }
}

window.addEventListener('load', doFirst, false); 
```

还有css代码：

```
body{
    text-align:center;
}
header, section, footer, aside, nav, article, hgroup{
    display: block;
}
#skin{
    width: 700px;
    margin: 10px auto;
    padding: 5px;
    background: red;
    border: 4px solid black;
    border-radius: 10px;
}
nav{
    margin: 5px 0px;
}
#buttons{
    float:left;
    width: 70px;
    height: 22px;
}
#defaultBar{
    position:relative;
    float: left;
    width: 600px;
    height: 16px;
    padding: 4px;
    border: 2px solid black;
    background: yellow;
}
#progressBar{
    position: absolute;
    width: 0px;
    height: 16px;
    background: blue;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T22:43:18.327

您需要用 e.offsetX 替换您的 e.pageX-bar.offsetLeft ，这应该可以工作。甚至在您尝试更改代码之前，了解[screenX/Y、clientX/Y、pageX/Y](https://stackoverflow.com/questions/6073505/what-is-the-difference-between-screenx-y-clientx-y-and-pagex-y)之间的[区别以及 offsetX/Y 和 pageX/Y 之间的区别](https://stackoverflow.com/questions/6645951/what-is-the-difference-between-offsetx-offsety-and-pagex-pagey)

# jsp - 在 JSP setProperty useBean 中我们如何填充列表

> ID：10333798
> 
> 赞同：1
> 
> 时间：2012-04-26T12:51:58.090
> 
> 标签：jsp, usebean

我的源代码是：

```
public class ContestForm
{
    List<SubContestForm> subContests;
}
public class SubContestForm
{
    int minAgeInclusive;
}

<jsp:useBean id="cont" class="com.kids.forms.ContestForm" scope="session"/>
<jsp:setProperty name="cont" property="*"/> 
```

现在，我应该给表单元素取什么名字，以便 minAgeInclusive 自动填充到 ContestForm 上？我试过了

```
subContests[0].minAgeInclusive 
```

但这不起作用！

# javascript - 拉绳上的动画上/下效果更平滑

> ID：10333802
> 
> 赞同：0
> 
> 时间：2012-04-26T12:52:23.810
> 
> 标签：javascript, jquery, animation, jquery-animate, easing

我正在尝试为拉绳设置动画，因此单击它会使“顶部”向下动画，然后当它到达底部时，一次又回到起始位置。

我为我想要实现的目标创造了一个小提琴。[http://jsfiddle.net/UUtXP/](http://jsfiddle.net/UUtXP/)

但是，我想对它使用缓动easeOutBounce。下降的效果很好，但在上升之间会有一个暂停。

是否有可能在点击时一直做一个动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:55:46.820

只需将一个又一个动画：http: [//jsfiddle.net/maniator/94Dfg/](http://jsfiddle.net/maniator/94Dfg/)

JS：

```
$('#rope').click(function() {
    $(this).animate({
        top: '-40',
        queue: true,
    }, 1000).animate({
            top: '-155px',
            queue: true
        }, 500);
});​ 
```

# android - 如何在我的应用程序中使用 alertdialog 管理智能手机上的后退按钮

> ID：10333805
> 
> 赞同：0
> 
> 时间：2012-04-26T12:52:28.953
> 
> 标签：android, android-layout, android-intent

我会正确处理智能手机上的后退按钮的压力，我知道按下时会显示一个警告对话框，询问“你确定要通过 APP 退出”，如果用户再次按下，应用程序将关闭

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:57:35.643

在您的应用程序的第一个 Activity 或没有返回（退出除外）的 Activity 中覆盖以下方法并显示弹出对话框以确认退出

```
@Override
public void onBackPressed() {
    DialogInterface.OnClickListener listener = new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            YourActivity.this.finish();
        }
    };
    AlertDialog.Builder bldr = new Builder(YourActivity.this);
    bldr.setMessage("Are you sure you want to exit?");
    bldr.setPositiveButton(android.R.string.yes, listener);
    bldr.setNegativeButton(android.R.string.no, null);
    bldr.show();
} 
```

# security - 使用 Spring 的 Shiro 注释

> ID：10333807
> 
> 赞同：0
> 
> 时间：2012-04-26T12:52:31.843
> 
> 标签：security, spring-mvc, shiro

我是 shiro 的新手，我正在将 shiro 与 spring 集成，我试图在 Spring 控制器上使用 shiro 注释，但它们不起作用，当我将 @RequiresPermissions("W027:UPDT") 放在控制器方法上时控制器停止工作。任何帮助家伙/谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:06:14.487

控制器上的 Shiro 注释似乎不起作用。要解决此问题，您可以将 @RequiresPermissions("W027:UPDT") 推送到即时服务方法（可以是 dao 或服务方法）。这将间接授权您的控制器方法。尝试在控制器方法中使用 @RequiresPermissions 意味着您正在尝试保护特定的 url。更好的方法是在配置文件中而不是在 java 文件中执行此操作。

```
 <property name="filterChainDefinitions">
        <value>
         /resources/** = anon
            /login = anon
            /logout = authc             
            /unauthorized = authc
            /someurl/** = roles[ROLE-ADMIN]
            /** = authc
        </value>
    </property> 
```

# android - Android模拟器SD卡大小和文件删除

> ID：10333808
> 
> 赞同：0
> 
> 时间：2012-04-26T12:52:38.040
> 
> 标签：android, android-emulator, android-sdcard

我为模拟器上的 SD 卡分配了 50MB，并将 2 个文件放在 SD 卡文件夹中。现在我删除了文件并想放置一个新文件，但我收到一条没有剩余空间的消息。模拟器上有类似回收站的东西吗？如何永久删除文件，以便我能够使用它们占用的空间？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:54:56.197

是的，模拟器内存​​清理太慢了。当我们删除某些东西时，它不会同时反映。

所以，*最好在创建模拟器时增加你的 sdcard 大小。*

# ios - 在 iphone 中以编程方式将联系人添加到现有组

> ID：10333810
> 
> 赞同：1
> 
> 时间：2012-04-26T12:52:42.113
> 
> 标签：ios, addressbook, abrecordref

我想将 ABRecordRef 添加到现有组。有些如何它不起作用。这是我的代码：

```
-(void)addUsers:(NSMutableArray*)users toGroupID:(ABRecordID)groupID {

    CFErrorRef error = NULL;
    ABAddressBookRef addressBookRef = ABAddressBookCreate();

   // Get Group 
    ABRecordRef group = ABAddressBookGetGroupWithRecordID(addressBookRef,groupID);

    for (User *user in users) {

        int recordId = user.uniqID;

        ABRecordRef person = ABAddressBookGetPersonWithRecordID(addressBookRef,(ABRecordID)recordId);

        //add the new person to the record
        ABAddressBookAddRecord(addressBookRef, person, nil); 
        ABAddressBookSave(addressBookRef, &error);

        // add the group   
        ABAddressBookAddRecord(addressBookRef, group, &error); 
        ABAddressBookSave(addressBookRef, &error);

        // add the person to the group 
        ABGroupAddMember(group, person, &error);         
        ABAddressBookSave(addressBookRef, &error);

        //save the record
        ABAddressBookSave(addressBookRef, nil);

        if (!isMemberAdded) {
            [self showAlertWithTitle:@"Alert" andMessage:@"Some Error Occured While Adding User to Existing Group"];
        }
    }
    BOOL isMembersAddedToGroup = ABAddressBookSave(addressBookRef, nil); 
    if (isMembersAddedToGroup) {
        [self showAlertWithTitle:@"Alert" andMessage:@"Selected Members Added to Existing Group Successfully"];
    }
    else{
        [self showAlertWithTitle:@"Alert" andMessage:@"Some Error Occured While Adding User to Existing Group"];
    }
    CFRelease(addressBookRef);
} 
```

每当我使用上述代码并尝试将其保存在现有组中时，我都会在控制台中收到以下消息

```
CPSqliteStatementPerform: constraint failed for INSERT INTO ABGroupMembers (group_id, member_type, member_id) VALUES (?, ?, ?);
CPSqliteStatementReset: columns group_id, member_type, member_id are not unique for INSERT INTO ABGroupMembers (group_id, member_type, member_id) VALUES (?, ?, ?); 
```

我没有得到上面代码中缺少的东西。感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T18:37:58.297

如果我们看到消息：

```
CPSqliteStatementPerform: constraint failed for INSERT INTO ABGroupMembers (group_id, member_type, member_id) VALUES (?, ?, ?);
CPSqliteStatementReset: columns group_id, member_type, member_id are not unique for INSERT INTO ABGroupMembers (group_id, member_type, member_id) VALUES (?, ?, ?); 
```

同样在[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/AddressBook/Reference/ABAddressBookRef_iPhoneOS/Reference/reference.html)中：

> ABAddressBook 不透明类型（其实例称为地址簿）为地址簿提供了一个编程接口 - 一个由多个应用程序用来存储有关人员的个人信息的集中式数据库

（所以，在内部，这个错误是由于不正确的 sqlite 查询引起的。）

它表明`ABGroupAddMember`or`ABAddressBookAddRecord(addressBookRef, group, &error);`呼叫存在一些问题。

问题可能是：当我们调用`ABAddressBookGetGroupWithRecordID`和`ABAddressBookGetGroupWithRecordID`函数时，我们已经有了组和个人引用。

现在，当`ABAddressBookAddRecord`为 both(`person`和`group`) 执行时，它会将它们添加到`addressbook`但**不更新它们的 UniqueIds** ( `id for person and group ref.`)，因此在`ABGroupAddMember`函数调用时它具有`person`并且`group`具有相同的 id，这些 id 已添加到 `ABGroupMembers`表中。

请尝试在将它们添加到通讯簿之前和之后打印（以及在将它们添加到组之前`recordId`）`person`。`group`如果`recordsIds`没有更新，那就是原因，您需要获取`record`new `recordId`。还要检查新的`person`和`group`是否被添加到地址簿。

*目前，我没有访问权限来验证我的建议/答案。

# sql-server-2008 - 使用表值函数进行基本转换时出错

> ID：10333811
> 
> 赞同：2
> 
> 时间：2012-04-26T12:52:42.813
> 
> 标签：sql-server-2008, sql-server-2008-r2

在为大约 50000 条记录运行表值函数时出现算术溢出错误。

错误：“int 类型的算术溢出错误，值 = 2147483648.000000”

当我使用标量函数时，我没有同样的问题。我想知道我是否可以克服这个问题

[我从http://www.sqlmag.com/article/tsql3/performing-base-conversions](http://www.sqlmag.com/article/tsql3/performing-base-conversions)获得了 baseconversion 的代码

这是我的内联和标量函数。Nums 表有一个名为 n 的 bigint 字段。它有 200000 行

```
 --- 
   --- Inline
   ---
   CREATE FUNCTION dbo.ConvertFromBase
   (@val AS VARCHAR(63))
   RETURNS TABLE
   RETURN
   (SELECT SUM(
   (CHARINDEX(
      SUBSTRING(@val, LEN(@val) - n + 1, 1),
      '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ') - 1)
   *POWER(2, n-1) )  AS Value
 FROM Nums
 WHERE n <= LEN(@val));

   --- 
   --- Scalar
   ---

    CREATE FUNCTION dbo.fn_ConvertFromBase
    (@val AS VARCHAR(63), @base AS int)
    RETURNS BIGINT
    BEGIN
    DECLARE @RESULT BIGINT 
    SELECT @result =SUM(
    (CHARINDEX(
      SUBSTRING(@val, LEN(@val) - n + 1, 1),
      '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ') - 1)
   *POWER(@base, n-1))  
   FROM Nums
   WHERE n <= LEN(@val)

 RETURN @result 
```

结尾

我将表值函数转换为返回表变量，它似乎正在工作。不过，这可能表现不佳。我需要做更多的研究

```
 CREATE FUNCTION [dbo].[ConvertFromBasenew]
  (@val AS VARCHAR(63), @base AS bigint)
  RETURNS @TableVar TABLE(VALUE BIGINT)
  BEGIN
  INSERT INTO @TableVar
  SELECT SUM(CONVERT(BIGINT,
   (CHARINDEX(
      SUBSTRING(@val, LEN(@val) - n + 1, 1),
      '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ') - 1)
   *CAST(POWER(@base, n-1) AS BIGINT)))  AS Value
  FROM Nums
  WHERE n <= LEN(@val)
  RETURN
 END 
```

我用来调用函数的代码

```
 SELECT  * FROM dbo.FinalBitmapTable
    CROSS APPLY dbo.ConvertFromBase(fINALBitmap,2) b 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T23:01:03.150

这个

```
SELECT POWER(2, 31) 
```

不起作用（产生算术溢出错误）。但是这个

```
SELECT POWER(**CAST(2 AS bigint)**, 31) 
```

做：

```
----------
2147483648 
```

该`@base`参数在您存在的两个函数中具有不同的类型。问题在于参数为 的那个`int`，而另一个有效的，正如你所说，`@base`似乎`bigint`与我的发现非常一致，我猜。

# python - 告诉 pip 安装需求文件中列出的包的依赖项

> ID：10333814
> 
> 赞同：60
> 
> 时间：2012-04-26T12:52:45.410
> 
> 标签：python, pip, requirements.txt

开发 Django Web 应用程序时，我有一个需要安装在 virtualenv 中的软件包列表。说：

```
Django==1.3.1
--extra-index-url=http://dist.pinaxproject.com/dev/
Pinax==0.9b1.dev10
git+git://github.com/pinax/pinax-theme-bootstrap.git@cff4f5bbe9f87f0c67ee9ada9aa8ae82978f9890
# and other packages 
```

最初，我在开发过程中一个一个地手动安装它们。这安装了所需的依赖项，我最终`pip freeze`在部署应用程序之前使用了它。

问题是，当我升级了一些包时，一些依赖项不再使用也不需要，但它们一直被`pip freeze`.

现在，我想以这种方式设置一个新的 virtualenv：

*   将所需的包（没有它们的依赖项）放在一个需求文件中，
    比如`manual-requirements.txt`
*   安装它们及其依赖项
    `pip install -r manual-requirement.txt`（←问题，这不会安装依赖项）
*   冻结完整的 virtualenv
    `pip freeze -r manual-requirements.txt > full-requirements.txt`
    并部署。

有什么方法可以做到这一点，而无需在新的 virtualenv 中手动重新安装软件包以获取它们的依赖项？这很容易出错，我想自动化从不再需要的旧依赖项中清除 virtualenv 的过程。

**编辑：**实际上，pip*确实*安装了未在需求文件中明确列出的依赖项，即使[文档](http://www.pip-installer.org/en/latest/requirements.html)告诉我们这些文件是平面的。我错了我希望安装哪些依赖项。对于任何怀疑 pip 没有安装所有依赖项的人，我都会提出这个问题。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-06T12:35:37.063

只需使用：

```
pip install -r requirements.txt 
```

这将安装 requirements.txt 文件中列出的所有依赖项。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-02-15T14:03:03.163

> 有什么方法可以做到这一点，而无需在新的 virtualenv 中手动重新安装软件包以获取它们的依赖项？这很容易出错，我想自动化从不再需要的旧依赖项中清除 virtualenv 的过程。

这就是*pip-tools*包的用途（来自[https://github.com/jazzband/pip-tools](https://github.com/jazzband/pip-tools)）：

## 安装

```
$ pip install --upgrade pip  # pip-tools needs pip==6.1 or higher (!)
$ pip install pip-tools 
```

## pip-compile 的示例用法

假设您有一个 Flask 项目，并希望将其固定用于生产。将以下行写入文件：

```
# requirements.in
Flask 
```

现在，运行 pip-compile requirements.in：

```
$ pip-compile requirements.in
#
# This file is autogenerated by pip-compile
# Make changes in requirements.in, then run this to update:
#
#    pip-compile requirements.in
#
flask==0.10.1
itsdangerous==0.24        # via flask
jinja2==2.7.3             # via flask
markupsafe==0.23          # via jinja2
werkzeug==0.10.4          # via flask 
```

它将生成您的`requirements.txt`, 并固定所有 Flask 依赖项（以及所有底层依赖项）。将此文件也置于版本控制之下，并定期重新运行`pip-compile`以更新软件包。

## pip-sync 的示例用法

现在您有了`requirements.txt`，您可以使用它`pip-sync`来更新您的虚拟环境以准确反映其中的内容。注意：这将安装/升级/卸载匹配`requirements.txt`内容所需的一切。

```
$ pip-sync
Uninstalling flake8-2.4.1:
  Successfully uninstalled flake8-2.4.1
Collecting click==4.1
  Downloading click-4.1-py2.py3-none-any.whl (62kB)
    100% |████████████████████████████████| 65kB 1.8MB/s
  Found existing installation: click 4.0
    Uninstalling click-4.0:
      Successfully uninstalled click-4.0
Successfully installed click-4.1 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-04-26T14:11:41.897

鉴于您对问题的评论（您说为单个软件包执行安装按预期工作），我建议您遍历您的需求文件。在 bash 中：

```
#!/bin/sh
while read p; do
  pip install $p
done < requirements.pip 
```

！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-10-09T14:03:05.493

扩展 Piotr 的答案，如果您还需要一种方法来确定要放入什么`requirements.in`，您可以首先使用[`pip-chill`找到您拥有的最小所需包集](https://stackoverflow.com/a/40074640/115246)。通过组合这些工具，您可以显示安装每个包的依赖原因。整个循环如下所示：

1.  创建虚拟环境：
    `$ python3 -m venv venv`
2.  激活它：
    `$ . venv/bin/activate`
3.  安装最新版本的 pip、pip-tools 和 pip-chill：
    `(venv)$ pip install --upgrade pip`
    `(venv)$ pip install pip-tools pip-chill`
4.  构建您的项目，安装更多 pip 包等，直到您想要保存...
5.  提取最小的包集（即，没有依赖关系的顶级包）：
    `(venv)$ pip-chill --no-version > requirements.in`
6.  编译所有必需包的列表（显示依赖原因）：
    `(venv)$ pip-compile requirements.in`
7.  确保当前安装与列表同步：
    `(venv)$ pip-sync`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-13T08:26:29.353

正如@Ming 提到的：

```
pip install -r file.txt 
```

这是强制更新所有依赖项的简单行：

```
while read -r package; do pip install --upgrade --force-reinstall $package;done < pipfreeze.txt 
```

或者

```
pip list --outdated --format=freeze | grep -v '^\-e' | cut -d = -f 1  | xargs -n1 pip install -U 
```

# perl - 如何在不安装 OpenSSL 的情况下在 Windows 上使用 Perl 读取 https 页面的内容？

> ID：10333823
> 
> 赞同：2
> 
> 时间：2012-04-26T12:53:13.907
> 
> 标签：perl, ssl, https, proxy

我编写了一个脚本，它通过发送 POST 请求来读取 https 页面的内容，并将其转储到文本文件中。它在 Linux 下运行良好，在安装[Shining Light OpenSSL](http://slproweb.com/products/Win32OpenSSL.html)后也可以在我的 Windows 机器上运行。但是客户说他们无法在他们的 Windows 机器上安装任何 exe，并要求提供替代解决方案。

我们这里有其他选择吗？也许一些代理接受 POST 请求，获取 https 内容并将其作为 http 传递？我知道很多一厢情愿的想法，但我只想在这里探索任何可能的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:34:17.943

使用[Win32::IE::Mechanize](http://search.cpan.org/perldoc/Win32%3a%3aIE%3a%3aMechanize)。如今，所有 Windows 系统都有某些版本的 Internet Explorer（尽管在某些系统上，管理员可能会阻止功能）。

您也可以使用[Win32::OLE](http://search.cpan.org/perldoc/Win32%3a%3aOLE)来“手动”驱动 IE，可以这么说 ;-)

以下代码在我古老的 Windows XP SP3 系统上“工作”。我不确定它是否适用于 Vista 或 Windows 7 UAC。`showcgi.pl`只是转储`$cgi`对象的状态。你可以看到下面的输出。

[我会在我的博文](http://blog.nu42.com/2012/04/how-do-you-pass-postdata-argument-to.html)中更详细地解释发生了什么。

我没有为测试设置 SSL 服务器，但请让我知道脚本在这些修改后是否有效。

```
#!/usr/bin/env perl

package My::Poster;

use strict; use warnings;

use Const::Fast;
use Try::Tiny;
use Win32::OLE;
use Win32::OLE::Variant;
local $Win32::OLE::Warn = 3;

# http://msdn.microsoft.com/en-us/library/aa768360%28v=vs.85%29.aspx
const my %BrowserNavConstants => (
    navOpenInNewWindow => 0x1,
    navNoHistory => 0x2,
    navNoReadFromCache => 0x4,
    navNoWriteToCache => 0x8,
    navAllowAutosearch => 0x10,
    navBrowserBar => 0x20,
    navHyperlink => 0x40,
    navEnforceRestricted => 0x80,
    navNewWindowsManaged => 0x0100,
    navUntrustedForDownload => 0x0200,
    navTrustedForActiveX => 0x0400,
    navOpenInNewTab => 0x0800,
    navOpenInBackgroundTab => 0x1000,
    navKeepWordWheelText => 0x2000,
    navVirtualTab => 0x4000,
    navBlockRedirectsXDomain => 0x8000,
    navOpenNewForegroundTab => 0x10000,
);

sub new {
    my $class = shift;
    my $self = bless {} => $class;
    $self->init;
    return $self;
}

sub ie {
    my $self = shift;
    my $ie = shift;

    return $self->{ie} unless defined $ie;

    $self->{ie} = $ie;
    return;
}

sub init {
    my $self = shift;

    $self->ie(
        Win32::OLE->new(
            'InternetExplorer.Application',
            sub {
                my $ie = shift;
                try { $ie->Quit if $ie } catch { warn "$_\n" };
            },
        )
    );
    return;
}

sub post {
    my $self = shift;
    my ($url, $data) = @_;

    my $ie = $self->ie;

    my $flags = $BrowserNavConstants{navNoHistory} |
                $BrowserNavConstants{navNoReadFromCache} |
                $BrowserNavConstants{navNoWriteToCache} |
                $BrowserNavConstants{navEnforceRestricted} |
                $BrowserNavConstants{navNewWindowsManaged} |
                $BrowserNavConstants{navUntrustedForDownload} |
                $BrowserNavConstants{navBlockRedirectsXDomain}
    ;

    # $postdata should also be converted to bytes here
    # I don't remember the right way to do it, and it works for ASCII
    # so it should be good enough for now.

    my $postdata = join '&', map join('=', @$_), @$data;

    my $vPostData = Variant(VT_ARRAY|VT_UI1, length $postdata);
    $vPostData->Put($postdata);

    # http://msdn.microsoft.com/en-us/library/aa752133%28v=vs.85%29.aspx
    $ie->Navigate(
        $url,
        $flags,
        '_self',
        $vPostData,
        "Content-Type: application/x-www-form-urlencoded\015\012",
    );

    while ($ie->{ReadyState} != 4) {
        sleep 1;
    }

    return $ie->Document->documentElement->innerHTML;
}

sub DESTROY {
    my $self = shift;
    try { $self->ie->Quit } catch { warn "$_\n" };
    return;
}

package main;

use strict; use warnings;

my $poster = My::Poster->new;

my $html = $poster->post(
    'http://test.localdomain:8080/cgi-bin/showcgi.pl',
    [
        [ thisvar => 'thatvalue', ],
        [ anothervar => 'anothervalue', ],
        [ oh => 'lala', ],
    ],
);

print $html if defined $html; 
```

输出：

```
$VAR1 = 祝福（{
     '.参数' => [
                        'thisvar',
                        '另一个'，
                        '哦'
                      ],
     '.crlf' => '
',
     '.globals' => {
                     '调试' => 0,
                     'NO_UNDEF_PARAMS' => 0,
                     'NO_NULL' => 1,
                     '致命' => -1，
                     'USE_PARAM_SEMICOLONS' => 0,
                     'PARAM_UTF8' => 0,
                     'DISABLE_UPLOADS' => 1,
                     'USE_CGI_PM_DEFAULTS' => 0,
                     'NPH' => 0,
                     'POST_MAX' => 102400,
                     'HEADERS_ONCE' => 0
                   },
     '另一个变量' => [
                       '另一个价值'
                     ],
     '哦' => [
               '拉拉'
             ],
     'thisvar' => [
                    '那个值'
                  ],
     '.fieldnames' => {
                        '另一个变量' => 1,
                        '哦' => 1,
                        'thisvar' => 1
                      },
     '.header_printed' => 1
   }, 'CGI::Simple' );
```

# perl - 为什么我会收到 Net::SFTP::Foreign 错误 37，作为 cron 任务运行时连接断开？

> ID：10333824
> 
> 赞同：3
> 
> 时间：2012-04-26T12:53:18.563
> 
> 标签：perl

我有一个使用[Net::SFTP::Foreign](http://p3rl.org/Net%3a%3aSFTP%3a%3aForeign)的 Perl 脚本，如果我手动运行它，它运行得很好。当设置为 cron 任务时，脚本会启动，但失败并出现错误 37，连接断开。我不明白为什么。有谁知道我如何才能确切地找出连接失败的原因？

这是我创建的地方：

```
$sftp = Net::SFTP::Foreign->new("$source_machine_user_id\@$source_machine_ip",
                                autodie => 1, key_path => $id_file_path,
                                fs_encoding => 'latin1'); 
```

我用过`more => 'v'`，但没有得到更多信息。我也试过`autodie => 0`了，但这似乎也没有什么不同。

我正在使用公钥进行身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:52:52.387

这通常发生在`ssh`不在您的 cron 上时`$PATH`。

使用构造函数选项`ssh`对脚本上的位置进行硬编码。`ssh_cmd`例如：

```
$s = Net::SFTP::Foreign->new($host, ssh_cmd => '/opt/openssh/bin/ssh', ...); 
```

# maven - 错误：在本地或存储库中找不到 gem

> ID：10333825
> 
> 赞同：0
> 
> 时间：2012-04-26T12:53:23.407
> 
> 标签：maven, maven-2, rubygems, gem, jruby

我对我的项目进行了 mavenizing，发现无法从 maven 安装一些 gem。当我跑

> 宝石安装 jruby-openssl -v 0.7.2

从命令行我得到以下输出：

> 成功安装jruby-openssl-0.7.2

当我运行 maven 时出现错误：

> 错误：在本地或存储库中找不到 gem jruby-openssl

有我的 pom.xml：

```
 <dependency>
        <groupId>org.jruby</groupId>
        <artifactId>jruby-complete</artifactId>
        <version>1.5.2</version>
    </dependency>
...

<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>exec-maven-plugin</artifactId>
<version>${exec.version}</version>
<executions>
    <execution>
        <id>install-gems</id>
        <phase>process-resources</phase>
        <configuration>
            <mainClass>org.jruby.Main</mainClass>
            <arguments>
                <argument>-S</argument>
                <argument>gem</argument>
                <argument>install</argument>
                <argument>jruby-openssl</argument>
                <argument>-v</argument>
                <argument>0.7.2</argument>
                <arguments>rails</arguments>
                <arguments>-v</arguments>
                <arguments>2.3.8</arguments>
                <arguments>rcov</arguments>
                <arguments>-v</arguments>
                <arguments>0.9.11</arguments>
                <arguments>activerecord-jdbcmysql-adapter</arguments>
                <arguments>-v</arguments>
                <arguments>1.2.1</arguments>
                <arguments>will_paginate</arguments>
                <arguments>-v</arguments>
                <arguments>2.3.15</arguments>
                <arguments>validates_timeliness</arguments>
                <arguments>-v</arguments>
                <arguments>2.3.2</arguments>
                <argument>--no-rdoc</argument>
                <argument>--no-test</argument>
                <argument>--user-install</argument>
            </arguments>
        </configuration>
        <goals>
            <goal>java</goal>
        </goals>
    </execution>
</executions>
</plugin> 
```

我不能只安装一些 gem，比如 open-ssl、rcov、will_paginate、activerecord-jdbcmysql-adapter。

有没有人有类似的问题？

我使用 jruby 1.5.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T22:56:12.313

要安装 jruby gem，请使用。

```
jruby -S gem install jruby-openssl -v 0.7.2 
```

看到这个有帮助。

# visual-studio-2010 - 如何实现两个按钮点击活动

> ID：10333826
> 
> 赞同：2
> 
> 时间：2012-04-26T12:53:25.027
> 
> 标签：visual-studio-2010, visual-c++, outlook, outlook-addin

我有一个功能区 xml，在单击按钮时，我必须为各个按钮打开两个不同的窗口窗体，但我无法在同一个文件中定义两个不同的按钮单击功能。
xml：我有两个按钮，代码是

```
STDMETHOD(ButtonClicked)(IDispatch* ribbon)
    {//MessageBoxW(NULL,L"Button Clicked!",L"NativeAddin",MB_OK);
        NativeAddIn::ApplicationConfiguration ^appConfigurationform = gcnew NativeAddIn::ApplicationConfiguration();
        appConfigurationform->ShowDialog();
        return S_OK;
    }
STDMETHOD(ButtonClicked)(IDispatch* ribbon)
    {
        //MessageBoxW(NULL,L"Button Clicked!",L"NativeAddin",MB_OK);
        NativeAddIn::Helpme ^helpmeobj = gcnew NativeAddIn::Helpme();
        helpmeobj->ShowDialog();
        return S_OK;
    } 
```

我如何在按钮单击时编写两个函数。在执行上面的代码时，错误来了：

> HRESULT CConnect::ButtonClicked(IDispatch *)' : 成员函数已定义或声明。

```
<button id="GoToAppConfiguration" size="large" label="Application Configuration" imageMso="AutoArchiveSettings" onAction="ButtonClicked"/> 
<button id="GoToAppHelp" size="large" label="Help" imageMso="CreateReportFromWizard" onAction="ButtonClicked"/> 
```

请帮忙....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:47:29.390

`ButtonClicked`您可以在“帮助”按钮中使用不同的名称。

```
<button id="GoToAppHelp" size="large" label="Help" imageMso="CreateReportFromWizard" onAction="ButtonHelpClicked"/> 
```

```
STDMETHOD(ButtonHelpClicked)(IDispatch* ribbon)
{
    //MessageBoxW(NULL,L"Button Clicked!",L"NativeAddin",MB_OK);
    NativeAddIn::Helpme ^helpmeobj = gcnew NativeAddIn::Helpme();
    helpmeobj->ShowDialog();
    return S_OK;
} 
```

* * *

对此的替代方法是使用[`IRibbonControl`](http://msdn.microsoft.com/en-us/library/microsoft.office.core.iribboncontrol_members.aspx)上下文（`ribbon`参数）并请求控件 ID 来触发 switch 语句。您将只有一个`ButtonClicked`方法来处理所有按钮点击。

```
STDMETHOD(ButtonClicked)(IDispatch* ribbon)
{
    switch (ribbon.Id)
    {
     case "GoToAppConfiguration" : 
        //MessageBoxW(NULL,L"Button Clicked!",L"NativeAddin",MB_OK);
         NativeAddIn::ApplicationConfiguration ^appConfigurationform = gcnew   NativeAddIn::ApplicationConfiguration();
         appConfigurationform->ShowDialog();
         return S_OK;
     case "GoToAppHelp" : 
        //MessageBoxW(NULL,L"Button Clicked!",L"NativeAddin",MB_OK);
        NativeAddIn::Helpme ^helpmeobj = gcnew NativeAddIn::Helpme();
        helpmeobj->ShowDialog();
        return S_OK;
    }   
} 
```

# android - 使用 android 库拆分资源

> ID：10333828
> 
> 赞同：0
> 
> 时间：2012-04-26T12:53:27.407
> 
> 标签：android, android-library, android-resources, r.java-file

我有一个 android 项目，其中需要更改几个字符串、图像和数据库以适合每个客户（这些将是单独的应用程序，而不是例如，客户输入他们的姓名）。据我所知，对我来说最好的方法是使用一个库来处理所有的 GUI 和逻辑，然后使用它来更改项目中的必要内容。不幸的是，该库似乎在父项目的`res/layout`文件夹中查找布局，但仍需要在其自己的文件夹中使用相同的文件`res/layout`才能生成`R.java`. 这基本上意味着我必须处理资源的重复副本。

我的问题基本上是这样的：我的项目是否可以使用库中的资源（而不是父项目），除了父项目中的一些资源（可以在库中的代码中引用）？

否则，有没有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:06:14.287

> 不幸的是，该库似乎在父项目的 res/layout 文件夹中查找布局，但仍需要在其自己的 res/layout 文件夹中使用这些相同的文件才能生成 R.java。这基本上意味着我必须处理资源的重复副本。

没错，尽管库中的副本只是您的默认值。如果您需要替换它们，您只会在托管项目中覆盖它们。因此，唯一会出现“重复”的地方是文件实际上不同的地方。

> 我的项目是否可以使用库中的资源（而不是父项目），除了父项目中保存的一些资源（可以在库中的代码中引用）？

仅当您修改库的 API 以接受资源 ID 作为参数，而不是按`R`名称假定某些资源时。例如，大多数Android SDK 使用资源ID 作为方法的参数（例如，`setContentView()`），而不是假定要使用的资源的名称（例如，`R.layout.main`）。

> 否则，有没有更好的方法来处理这个问题？

你原来的方法对我来说似乎很好。

# java - jsp 表单的字段验证

> ID：10333835
> 
> 赞同：0
> 
> 时间：2012-04-26T12:54:04.180
> 
> 标签：java, javascript, oracle, validation, jsp

我有一个名为`Description`. 该字段声明如下

```
<input type="text" name="description"> 
```

此值用于编写 SQL 查询：

> select * from Engines where description like '% (Value from the field)%'

当用户输入字母数字字符时它可以正常工作，但是当用户输入特殊字符时它会失败，例如单引号：`'`

我的问题：

1.  我该如何在服务器端处理这个问题
2.  如果需要在 JavaScript 上实现，那么需要过滤掉哪些字符呢？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:01:55.917

使用准备好的语句而不是编写 SQL 查询字符串。您的方式容易受到[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)。

如果无法使用 PreparedStatements，则在将此字段值传递给 SQL 查询之前，使用 java 正则表达式删除特殊字符。

有[一个与此任务相关的帖子](https://stackoverflow.com/questions/4374822/javascript-regexp-remove-all-special-characters)。

不要使用 javascript 过滤掉特殊符号。它不会保护您免受 sql 注入攻击。攻击者可能会在没有验证 javascript 的情况下伪造自己的表单并攻击您的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:56:19.020

使用参数化查询来处理这类问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:58:47.273

你所做的被认为是一种非常糟糕的做法，可能会导致非常糟糕的事情...... [http://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T13:03:33.340

您可以使用 JavaScript 和 Regex 通过基本验证删除无效字符：

```
<script type="text/javascript">
var str= document.getElementById('mySearch').value;
str=str.replace(/[^A-Za-z0-9]/g,'');
alert(str);
</script> 
```

但我同意hkutluay，参数化查询将是更好的路线。

# git - git clone 无法解析代理

> ID：10333836
> 
> 赞同：46
> 
> 时间：2012-04-26T12:54:06.287
> 
> 标签：git

当我尝试从 git 克隆时

```
git clone "http://github.com/symfony/symfony.git" "d:/www/a/vendor/symfony" 
```

我收到一个错误

```
Cloning into 'd:/www/a/vendor/symfony'...
error: Couldn't resolve proxy '(null)' while accessing http://github.com/symfony/symfony.git/info/refs
fatal: HTTP request failed 
```

我直接连接到互联网（没有代理）。我试图关闭防火墙并没有帮助。我在 Windows 上，刚刚从[http://code.google.com/p/msysgit/downloads/list](http://code.google.com/p/msysgit/downloads/list)安装了 Git-1.7.10-preview20120409.exe 。以前我有 1.7.8，这个命令有效。我还重新安装了 TortoiseGit，但我认为没关系。

我的`C:\Documents and Settings\xxx\.gitconfig`文件是

```
[http]
    proxy = 
[user]
    name = xxxx
    email = xxx@example.com 
```

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-04-26T13:09:33.173

似乎问题已在邮件列表中报告。[这](http://osdir.com/ml/msysgit/2012-04/msg00054.html)有帮助吗？

```
git config --global --unset http.proxy 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-29T14:34:06.357

在防火墙后面推时，我遇到了同样的问题。

问题不是空的 http_proxy var（git var -l 没有显示任何代理变量），我的操作系统环境变量包括：

```
http_proxy=username:passowrd@proxy.company:port
https_proxy=username:passowrd@proxy.company:port
no_proxy=.company 
```

此设置将始终触发：

```
error: Couldn't resolve proxy '(null)' while accessing https://... 
```

但是，一旦我更改了代理变量，在代理地址前**添加了一个“ `http://`”，错误消息就停止了**：

```
http_proxy=http://username:passowrd@proxy.company:port
https_proxy=http://username:passowrd@proxy.company:port
no_proxy=.company 
```

（注意 ' `http://`' 即使是 https 代理地址）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-06-26T07:42:43.960

在 git bash 中运行以下命令

```
git config --global --unset http.proxy 
```

**注意：不要忘记重新启动 git bash，否则将无法正常工作。**

还要确保删除 HTTPS_PROXY 和 HTTP_PROXY 环境变量。

* * *

如果上述步骤对您不起作用，请尝试如下所示设置您的公司代理；

```
git config --global  http://example.com:8080
git config --global  https://example.com:8080 
```

**使用您的公司代理和端口更改 example.com/8080

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-30T20:50:03.663

只需删除

```
 [http]
     proxy = 
```

为我工作

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-02-23T07:29:17.060

我有两种工作环境，在公司和在家的时候。所以，每一天我都必须设置和取消设置代理变量才能让我的 git 运行。我发现有效的是创建两个 bash 文件，一个用于设置代理变量，另一个用于“取消设置”它。所以，每当我回到家或上班时，我所要做的就是双击具有管理员权限的文件，我就完成了。这些文件非常简单：

**未设置代理.bat**

```
setx HTTP_PROXY ""
setx HTTPS_PROXY ""
setx HTTP_PROXY "" /M
setx HTTPS_PROXY "" /M
git config --global --unset http.proxy
git config --global --unset https.proxy
sleep 5 
```

**设置代理.bat**

```
setx HTTP_PROXY <your proxy here>
setx HTTPS_PROXY <your proxy here>
setx HTTP_PROXY <your proxy here> /M
setx HTTPS_PROXY <your proxy here> /M
git config --global <your proxy here>
git config --global <your proxy here>
sleep 5 
```

最后`sleep 5`只是让窗口保持打开几秒钟以验证所有命令是否正确运行。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-10-05T06:02:58.860

感谢@VonC 的回答。

虽然它对我有用，但我用你的答案作为参考来解决我的问题。

我已经配置了以下环境变量来解决其中一个 Cloud Foundry 开发环境问题。突然间，我的 git clone 发出警报，说无法解析代理。我刚刚删除了这些环境变量并且 git clone 运行良好。

```
http_proxy=proxy.company:port
https_proxy=proxy.company:port 
```

希望有帮助。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-25T02:29:22.153

只需删除

```
 [http]
     proxy = 
```

块在 Git 全局配置文件中。(git 版本 1.7.10.msysgit.1 , windows XP)

positron 的答案中提到的命令行命令不起作用：

```
 git config --global --unset http.proxy

 error: unknown switch `â' 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-28T07:04:50.977

键入以下命令。

1.  `git config --global http.proxy example.com:8080`

    这里，`example.com`是代理服务器，`8080`是端口号。

2.  确保您已设置代理服务器。

3.  然后，克隆所需的存储库。它会起作用的。

我在 Windows 中试过这些。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-19T03:19:43.617

代理应以“http”或“https”开头

例如

```
abc.proxy.com:8080 may not work
http://abc.proxy.com:8080 should work 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-04T23:19:31.610

我在 CentOS 6.5 上运行 git 时遇到了同样的问题。在 Ubuntu 上运行相同的命令效果很好。Git似乎对url中的冒号有问题。无论如何，解决方案最终是我必须在 url 中明确指定端口，例如：

```
git clone https://example.edu.au:443/git/master.git 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-08T09:35:13.977

出现此错误是因为您使用了代理。即使您将代理设置添加到您的 PC，也会有一些错误。因为系统设置更改对 GIT 来说是不够的。所以你应该为代理配置 git。

```
git config --global http.proxy http://proxyUsername:proxyPassword@proxy.server.com:port 
```

这里 proxyUsername 是您使用的用户名，proxyPassword 是它的密码。proxy.server.com 表示代理服务器名称，端口是用于代理的端口。如果您使用特定域，请使用此代码：

```
git config --global http.https://domain.com.proxy http://proxyUsername:proxyPassword@proxy.server.com:port 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-10-27T04:05:57.167

当您在 Ubuntu 上使用此命令时，请使用 'sudo' 在请求 'git clone' 时获得管理权限

ex-: sudo git clone "http://github.com/symfony/symfony.git" "d:/www/a/vendor/symfony"

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-11-20T15:01:20.733

首先尝试重置 Github 代理。有时它可能是代理服务器的问题。

```
git config --global --unset http.proxy 
```

然后重新启动终端并再次尝试克隆存储库。

如果仍然出现错误，则必须尝试使用​​以下命令设置代理。

```
git config --global http.proxy http://proxyUsername:proxyPassword@proxy.server.com:port 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-03-04T12:45:29.080

为了激活/停用 git 代理，我在 ~/.bashrc 中使用了两个 shell 函数：

```
proxy_set() {
    export http_proxy=http://PROXYADDR:PORT/
    export https_proxy=https://PROXYADDR:PORT/
    export socks_proxy=socks://PROXYADDR:PORT;
    sed -i '/proxy =/s/^#//g' ~/.gitconfig
}
proxy_unset() {
    unset http_proxy; unset https_proxy; unset socks_proxy;
    sed -i '/proxy =/s/^#*/#/g' ~/.gitconfig
} 
```

这些将分别取消注释/注释 ~/.gitconfig 中的 [http] 和 [https] 代理条目。只需在终端中输入 proxy_set 或 proxy_unset 即可。

# ruby - 如何按字母顺序对单词数组进行排序但考虑字母的大小写？

> ID：10333841
> 
> 赞同：-3
> 
> 时间：2012-04-26T12:54:38.140
> 
> 标签：ruby, sorting

大写的单词必须先走
**andrew Net andrey Andrew
Andrew andrew andrey Net**

升级版：

**安德鲁·网安德雷·
安德鲁·安德鲁·安德鲁·安德鲁·网**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T12:59:37.367

您可以使用两个连续的标准：首先是字母（不区分大小写），然后是字母（区分大小写）。`Array#sort_by`非常适合这些：

```
%w[andrew Net andrey Andrew].sort_by{|w| [w.downcase, w]}
# => ["Andrew", "andrew", "andrey", "Net"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T05:44:38.783

```
b = a.sort { |x,y| (z = x[0].upcase <=> y[0].upcase) == 0 ? x <=> y : z } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-07T19:19:44.583

```
%w[andrew Net andrey Andrew].sort_by(&:downcase) 
```

# wpf - WPF 多线程属性更新无法异步工作

> ID：10333846
> 
> 赞同：0
> 
> 时间：2012-04-26T12:54:51.557
> 
> 标签：wpf, multithreading, asynchronous

今天我将尝试了解 WPF 中的多线程进程。所以我做了一个很小的 ​​WPF 应用程序，它只有一个窗口。在窗口中，您将找到一个按钮和一个文本框 - 仅此而已：

```
<Window x:Class="Multithreading.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Button Content="Button" Height="23" Name="button1" Width="75" Click="button1_Click" />
    <TextBox Height="23" Name="txtCounter" VerticalAlignment="Top" Width="120" />
</Grid> 
```

好的 - 让我们看看我的点击事件：

```
private void button1_Click(object sender, RoutedEventArgs e)
    {
        ThreadStart ts = delegate
        {
            Dispatcher.BeginInvoke(DispatcherPriority.Normal, new Action(Threddy));
        };
        new Thread(ts).Start();
    } 
```

如您所见，有一个委托方法“Threddy”：

```
public void Threddy()
    {
        for (int i = 0; i < 10000; i++)
        {
            txtCounter.Text = "" + i;
        }
    } 
```

我希望现在很清楚我要做什么：如果用户单击按钮，则应该启动一个新线程，这会更改我的文本框的文本。但不幸的是，文本只改变了一次：最后。

那么 - 我做错了什么？谢谢你的帮助！

代码食人族

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:23:16.853

我*认为*您将启动线程异步与发布线程代码异步混淆了。
您想启动另一个线程并从中更新 UI 线程上的控件。WPF 不允许您从另一个线程更新在 UI 线程上创建的控件，因此您必须使用调度程序将控件更新代码发布到 UI 线程。这是 Theddy 中的 Dispatcher 包装器。

```
private void button1_Click(object sender, RoutedEventArgs e) {
    ThreadStart ts = new ThreadStart(Threddy);
    new Thread(ts).Start();
}  

public void Threddy() {
    for (int i = 0; i < 10000; i++){
        Dispatcher.BeginInvoke(DispatcherPriority.Normal, new Action(() => {
            txtCounter.Text = "" + i;
        }));
    }
} 
```

请注意，在循环内您可以 BeginInvoke OR Invoke。
前者（BeginInvoke）意味着 Threddy 循环将继续运行并且不会等待 UI 更新 - （UI 更新）会发生但循环不会等待它。UI 和循环计数器都在进步，但不一定同步。
后面的（调用）意味着循环的每次执行都将等到 UI 控件实际更新。UI 和循环计数器已同步。

# sitecore - 由于没有占位符，无法插入营销人员的 Web 表单

> ID：10333848
> 
> 赞同：3
> 
> 时间：2012-04-26T12:54:57.007
> 
> 标签：sitecore, sitecore6, web-forms-for-marketers

我们正在尝试解决运行 .NET Framework 2.0 的 Sitecore 6.4.1 中的营销人员 Web 表单模块（我认为是 2.2，但我不知道如何判断）的一个老问题。我什至无法将表单添加到项目中。我假设我应该在我的项目的演示选项卡中使用“插入表单”按钮。

当我单击该按钮时，我会得到一个运行良好的向导，直到它告诉我以下信息：“没有允许的占位符来插入新表单。”

暂时忽略错误的语法问题，我认为它告诉我项目有先决条件才能使其与表单一起使用。我环顾四周，认为这个问题中的问题可能与此有关：

[无法在占位符中显示 Sitecore 表单（营销人员的 Web 表单模块）](https://stackoverflow.com/questions/8517858/cannot-get-a-sitecore-form-to-display-in-a-placeholder-web-forms-for-marketers)

所以我确保我的模板中有一个表格。它现在在那里，但是当我在设备编辑器的表单项上单击“编辑”时，会在日志中引发“值不能为空”异常。

![Sitecore 的屏幕截图让我想打自己。](../Images/b09aced3c5fea260a93d11a622620a75.png)

我也有一个占位符设置，因为我已经读到出于某种原因我需要它。它被命名为“form”，设置项是/content。

我错过了一个额外的好处吗？我需要重新安装模块吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T16:38:16.277

我怀疑您需要在允许包含表单的占位符列表中添加一个占位符。最简单的方法是使用 WFM 安装的 Restricting Placeholders 应用程序。登录桌面，在 Sitecore -> 所有应用程序 -> 面向营销人员的 Web 表单 -> 限制占位符下指定一个或多个表单可以存在的位置。

请参阅[http://sdn.sitecore.net/upload/sdn5/products/web_forms2/web_forms_for_marketers_v2_reference_usletter.pdf](http://sdn.sitecore.net/upload/sdn5/products/web_forms2/web_forms_for_marketers_v2_reference_usletter.pdf)，第 7 页左右。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:54:53.073

我遇到了类似的问题，经过很长时间发现不支持在占位符或引用它们的键中使用大写字母或单词。因此，在我将这些键更改为小写后，我的问题就消失了。

# c++ - 如何处理带有指针的地图？

> ID：10333854
> 
> 赞同：7
> 
> 时间：2012-04-26T12:55:20.080
> 
> 标签：c++, pointers, map

考虑我有一个班级名称 People。我将指向这些人的指针存储在地图中

```
map<string, People*> myMap; 
```

要创建新人物，我使用 maps [] 运算符。

```
myMap["dave"]->sayHello(); 
```

但这给了我一个分段错误，它甚至没有调用 People 类的构造函数。

我也试过

```
 myMap.insert( std::make_pair( "dave", new People() )); 
```

但这并没有改变任何东西，构造函数仍然没有被调用，程序关闭处理这段代码并出现分段错误。

如何访问和操作带有指针的地图？为什么上述方法不起作用，我没有收到编译时错误或警告。

任何见解都非常感谢，谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T12:58:38.087

给定地图：

```
map<string, People*> myMap; 
```

`operator[]`不会创建 new `People`，而是会创建`People*`，即不指向任何东西的指针。

最简单的解决方案是让您的地图真正包含人，而不是指针，例如：

```
map<string, People> myMap; 
```

然后内存管理全部为您处理，使用`operator[]`将根据需要构建新的人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T12:59:33.747

尝试

```
myMap["dave"] = new People(....); 
```

将`new`调用构造函数，返回一个指针并将其插入到地图中。

不过，您需要小心内存泄漏。使用智能指针来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T00:05:20.107

尝试使用：

```
People* new_people = new People (member_variable1,member_variable2);

myMap.insert(std::pair<std::string, People*>("key for string",new_people) ); 
```

或以其他方式：

```
People new_people(member_variable1,member_variable2);
myMap.insert(std::pair<std::string, People*>("key for string",&new_people) ); 
```

两者都会工作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T13:28:38.150

如果您想堆分配您的`People`但使用地图，请查看[Boost Pointer Containers](http://www.boost.org/doc/libs/1_49_0/libs/ptr_container/doc/ptr_container.html)，特别是`boost::ptr_map`. 它只是标题，因此您不需要编译任何额外的库。

```
#include <iostream>
#include <string>
#include <boost/ptr_container/ptr_map.hpp>

struct People
{
    int age;
};

typedef boost::ptr_map<std::string,People> PeopleMap;

int main(int,char**)
{
    PeopleMap data;

    data["Alice"].age = 20;
    data["Bob"].age = 30;

    for (PeopleMap::const_iterator it = data.begin(); it != data.end(); ++it)
        std::cout << "Name: " << it->first << " Age: " << it->second->age << std::endl;

    return 0;
} 
```

# asp.net-mvc - 我如何使用 jquery.validate 验证 3 个字段或使用 asp.net mvc 3 DataAnnotations 进行迭代？

> ID：10333855
> 
> 赞同：0
> 
> 时间：2012-04-26T12:55:34.757
> 
> 标签：asp.net-mvc, jquery-validate, validation

我有 3 个用于有效电话的文本框：phone_part1、phone_part2、phone_part3，我该如何使用

jquery.validate 验证 3 作为有效的电话号码：

phone_part1：3 个号码 phone_part2：4 个号码 phone_part3：4 个号码

它们都需要，如果其中一个无效，则输出一条验证消息：

请输入有效的电话号码。

我不熟悉 jquery.validate ，感谢您的帮助！

如果您可以做到这一点，请使用带有客户端验证的 mvc 数据注释属性，那就是

相当不错！！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:14:13.910

您可以放置​​一个文本框并使用正则表达式对其进行验证

在模型中：

```
public class Contact
{
    [Required(ErrorMessage = "Invalid Phone")]
    [RegularExpression(@"\d{3}-\d{4}-\d{3}", ErrorMessage = "Invalid Phone")]
    public string Phone { get; set; }
} 
```

如果你想使用 3 个文本框”：

```
public class Contact
{
    [Required(ErrorMessage = "Invalid Phone")]
    [RegularExpression(@"\d{3}", ErrorMessage = "Invalid Phone")]
    public string Phone_Part1 { get; set; }

    [Required(ErrorMessage = "Invalid Phone")]
    [RegularExpression(@"\d{4}", ErrorMessage = "Invalid Phone")]
    public string Phone_Part2 { get; set; }

    [Required(ErrorMessage = "Invalid Phone")]
    [RegularExpression(@"\d{3}", ErrorMessage = "Invalid Phone")]
    public string Phone_Part3 { get; set; }
} 
```

# c# - 检查图像是否有颜色

> ID：10333859
> 
> 赞同：4
> 
> 时间：2012-04-26T12:55:44.510
> 
> 标签：c#, .net, image, gdi+, pixelformat

我试图弄清楚图像是否是彩色的。在[这个](https://stackoverflow.com/questions/2150504/how-can-i-check-the-color-depth-of-a-bitmap)`PixelFormat`StackOverflow问题上，有一个回复说我应该检查`Image`. 不幸的是，我的回答不是很清楚。检查是否`image.PixelFormat`不同于`PixelFormat.Format16bppGrayScale`认为它是彩色图像是否安全？枚举的其他值呢？MSDN 文档不是很清楚...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T13:21:33.110

您可以通过避免使用 Color.FromArgb 并迭代字节而不是整数来改进这一点，但我认为这对您来说更具可读性，并且作为一种方法更容易理解。

一般的想法是将图像绘制成已知格式（32bpp ARGB）的位图，然后检查该位图是否包含任何颜色。

锁定位图的位允许您使用不安全代码以比使用 GetPixel 快许多倍的速度迭代它的颜色数据。

如果一个像素的 alpha 为 0，那么它显然是 GrayScale，因为 alpha 0 意味着它完全不透明。除此之外 - 如果 R = G = B，那么它是灰色的（如果它们 = 255，它是黑色的）。

```
private static unsafe bool IsGrayScale(Image image)
{
    using (var bmp = new Bitmap(image.Width, image.Height, PixelFormat.Format32bppArgb))
    {
        using (var g = Graphics.FromImage(bmp))
        {
            g.DrawImage(image, 0, 0);
        }

        var data = bmp.LockBits(new Rectangle(0, 0, bmp.Width, bmp.Height), ImageLockMode.ReadOnly, bmp.PixelFormat);

        var pt = (int*)data.Scan0;
        var res = true;

        for (var i = 0; i < data.Height * data.Width; i++)
        {
            var color = Color.FromArgb(pt[i]);

            if (color.A != 0 && (color.R != color.G || color.G != color.B))
            {
                res = false;
                break;
            }
        }

        bmp.UnlockBits(data);

        return res;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-19T12:12:16.190

```
 private bool isGrayScale(Bitmap processedBitmap)
    { 
        bool res = true;
        unsafe
        {
            System.Drawing.Imaging.BitmapData bitmapData = processedBitmap.LockBits(new Rectangle(0, 0, processedBitmap.Width, processedBitmap.Height), System.Drawing.Imaging.ImageLockMode.ReadWrite, processedBitmap.PixelFormat);
            int bytesPerPixel = System.Drawing.Bitmap.GetPixelFormatSize(processedBitmap.PixelFormat) / 8;
            int heightInPixels = bitmapData.Height;
            int widthInBytes = bitmapData.Width * bytesPerPixel;
            byte* PtrFirstPixel = (byte*)bitmapData.Scan0;
            Parallel.For(0, heightInPixels, y =>
            {
                byte* currentLine = PtrFirstPixel + (y * bitmapData.Stride);
                for (int x = 0; x < widthInBytes; x = x + bytesPerPixel)
                {
                    int b = currentLine[x];
                    int g = currentLine[x + 1];
                    int r = currentLine[x + 2];
                    if (b != g || r != g)
                    {
                        res = false;
                        break;
                    }
                }
            });
            processedBitmap.UnlockBits(bitmapData);
        }
        return res;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-18T20:07:15.430

SimpleVar 的回答*大部分是*正确的：当源图像具有索引颜色格式时，该代码无法正确处理。

要解决这个问题，只需将外部`using`块替换为：

```
using (var bmp = new Bitmap(image)) { 
```

并完全移除内部`using`，因为`Graphics`不再需要该对象。无论原始图像的像素格式如何，这都会以非索引格式创建图像的完美副本。

# ruby-on-rails-3 - RSpec：验证当前子域

> ID：10333864
> 
> 赞同：0
> 
> 时间：2012-04-26T12:55:56.963
> 
> 标签：ruby-on-rails-3, rspec, subdomain

我使用 ActsAsTenant 将多租户应用于我的应用程序。在每次请求之前，我都会通过检查当前租户是否存在来检查子域`nil`。如果当前租户是`nil`，我将用户重定向到 404 页面：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  set_current_tenant_by_subdomain(:client, :account_name)

  before_filter :check_subdomain

  private

  def check_subdomain
    redirect_to("/404.html") if ActsAsTenant.current_tenant.nil?
  end
end 
```

我有以下规范来测试这种行为：

```
require 'spec_helper'

describe SessionsController do

  let(:client) { create(:client) }

  before(:each) do
    @request.host = "#{client.account_name}.lvh.me"
  end

  describe "GET 'new'" do
    context "for invalid subdomains" do
      it "should redirect the user to the 404 page" do
        @request.host = "foo.lvh.me"
        response.should redirect_to "/404.html"
      end
    end
  end
end 
```

规范失败并显示以下错误消息：

```
F

Failures:

  1) SessionsController GET 'new' for invalid subdomains should redirect the user to the 404 page
     Failure/Error: response.should redirect_to "/404.html"
       Expected response to be a <:redirect>, but was <200>
     # ./spec/controllers/sessions_controller_spec.rb:15:in `block (4 levels) in <top (required)>'

Finished in 0.2098 seconds
1 example, 1 failure

Failed examples:

rspec ./spec/controllers/sessions_controller_spec.rb:13 # SessionsController GET 'new' for invalid subdomains should redirect the user to the 404 page 
```

我的问题是：为什么？？为什么这个规范失败了？我尝试从浏览器手动测试它，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:56:24.773

对于那些可能有同样问题的人，不要忘记在测试响应之前做一个请求！！！！！！！即：添加`get :new`

# facebook - 在身份验证期间消除“转到应用程序”步骤

> ID：10333865
> 
> 赞同：2
> 
> 时间：2012-04-26T12:55:59.300
> 
> 标签：facebook, facebook-c#-sdk

我正在使用服务器端流程对用户进行身份验证并要求他们授权我的应用程序。一切正常，但有时当我重定向到 Facebook 时，用户首先会看到一个页面，该页面使他们单击“转到应用程序”按钮以​​访问他们授权我的应用程序和请求的权限的授权页面。我想直接重定向到授权页面并跳过此“转到应用程序”页面。这是我正在使用的代码：

```
var facebookClient = new FacebookClient();
String RedirectUri = "page on my server";
var parameters = new Dictionary<string, object> {
    { "redirect_uri", RedirectUri },
    { "client_id", "my client id" },
    { "scope", "publish_stream,manage_pages,email"}
};
String LoginUrl = facebookClient.GetLoginUrl(parameters).ToString();

Response.Redirect(LoginUrl, true); 
```

谢谢，这让我发疯了；）

这是一个示例重定向网址：

```
https://www.facebook.com/dialog/oauth?redirect_uri=MY-URI&client_id=My-CLIENT_ID&scope=publish_stream,manage_pages,email 
```

# java - 如何让 3rd 方应用程序使用 logback.xml？

> ID：10333870
> 
> 赞同：0
> 
> 时间：2012-04-26T12:56:21.090
> 
> 标签：java, classpath, logback

我正在为 Java 应用程序开发一个插件。这个 Java 应用程序不使用真正的记录器，但是我的插件使用 logback。当最终用户在 Windows 上运行应用程序时，他将运行一个 .EXE 文件，该文件以某种方式使用多个 jar 启动应用程序。

现在我的问题是，我不知道如何告诉我的插件找到 logback.xml，因为我不知道类路径设置为什么以及如何修改它以包含我放置 logback 的路径。 xml

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:28:32.233

试着把它放进你的罐子里（你做的一个插件）。您很可能最终会从[logback.xml 获得解决方案并从 JetBrains IDEA IDE 运行应用程序](https://stackoverflow.com/questions/5612832/logback-xml-and-running-application-from-jetbrains-idea-ide)。

# c++ - 除非使用，否则为什么不初始化静态模板字段？

> ID：10333871
> 
> 赞同：6
> 
> 时间：2012-04-26T12:56:24.527
> 
> 标签：c++, templates

> **可能的重复：（**
> [静态初始化/模板实例化）工厂模式](https://stackoverflow.com/questions/2851991/static-initialization-template-instantiation-problems-with-factory-pattern)
> [试图强制静态对象初始化的问题](https://stackoverflow.com/questions/9549714/trying-to-force-static-object-initialization)

### 编辑：有一个副本，但我会留下这个，因为我个人很难找到它。此外，这是对我有帮助的答案：

[https://stackoverflow.com/a/2852234/673730](https://stackoverflow.com/a/2852234/673730)

假设以下类：

```
template<class X>
struct A
{
   static bool x;
   static bool foo()
   {
      cout << "here";
      return true;
   }
};

template<class X>
bool A<X>::x = A<X>::foo(); 
```

我会假设当我专门化时`A`，静态字段`x`会被初始化。但是，以下内容：

```
A<int> a;
//no output 
```

不会导致调用`foo`. 如果我尝试访问该成员，则行为符合预期：

```
A<int> a;
bool b = a.x;
//output: here 
```

编辑：**如何确保`A::x`在不访问它的情况下进行初始化？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T13:01:07.903

如果一个模板由于被实例化而被*隐式*特化，那么只有那些实际引用的成员被实例化。

*将此与显式*类模板实例化 ( )进行对比，后者为*所有*成员`template struct A<int>;`实例化并创建代码。（您也可以仅单独实例化特定成员：。）*`template bool A<int>::x;`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:09:35.507

这个想法是参考（14.7.1.2）：

除非类模板或成员模板的成员已被显式实例化或显式特化，否则当在需要成员定义存在的上下文中引用特化时，成员的特化将被隐式实例化；特别是，静态数据成员的初始化（以及任何相关的副作用）不会发生，除非该静态数据成员本身的使用方式要求该静态数据成员的定义存在。

```
template<class X, bool y>
struct A
{
    static cosnt bool x = y;
    static bool foo()
    {
       cout << "here";
       return true;
    }
 }; 
```*

# git - 二进制文件和可扩展性的 git 行为

> ID：10333872
> 
> 赞同：0
> 
> 时间：2012-04-26T12:56:36.213
> 
> 标签：git, svn, version-control

在我对 SVN 的 GIT 性能测试中，我发现 GIT 肯定比 SVN 快。现在看看性能是否随着项目大小（更多版本）的增加而保持良好，我将 Perl 项目与 45K 提交分叉并将其存储在我们的服务器中。我只用最新版本创建了另一个仓库。第一个 repo 在大约 140 秒内克隆，第二个 repo 在大约 19 秒内克隆了一个提交。这有点令人担忧。现在随着历史的发展，它失去了相对于 SVN 的性能优势。这个结论对吗？

此外，我在这里阅读了许多帖子/博客，它们表达了对具有大量存储库和大量二进制文件的 GIT 性能的担忧。由于这些帖子至少有 1 年的历史，你认为这仍然是 GIT 的一个问题吗？

是的，解决这些缺点的一种方法是使用浅克隆。具有 --depth 1 的浅层克隆与从 repo 中克隆几乎相同的时间，只有 1 次提交。但是浅克隆手册页谈到了限制。“创建一个将历史记录截断为指定修订数量的浅层克隆。浅层存储库有许多限制（您不能克隆或从中获取，也不能从中推送或推入），但如果您只对以下内容感兴趣，就足够了一个历史悠久的大型项目的近期历史，并希望将修复作为补丁发送。” 这真的是一个限制还是文档不是最新的？我已经用我的测试存储库对其进行了测试，但似乎能够很好地推送到中央存储库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-02T10:44:15.790

大型二进制文件的 Git 行为更糟。但是，有 Git LFS 来支持这些要求。

当您不小心将大型二进制文件推送到存储库时，就会出现困难。尽管您稍后在同一分支上删除它们，但历史记录保持不变并且存储库变得庞大。克隆和 git 的任何内部操作变得非常缓慢。因为它不是为二进制文件（尤其是大型二进制文件）设计的。

这可以防止最初正确设置 .gitignore 文件。

通常，即使在大型存储库中，推/拉/状态也非常快。（即你并不总是克隆）

[开始前好好阅读](https://www.atlassian.com/git/articles/how-to-handle-big-repositories-with-git)

# iphone - Xcode 上适用于 iPhone 的 UISoundboard？

> ID：10333873
> 
> 赞同：0
> 
> 时间：2012-04-26T12:56:44.910
> 
> 标签：iphone, ios, xcode, xcode4.2

> **可能重复：**
> [xcode 4.2 音板？](https://stackoverflow.com/questions/10336708/xcode-4-2-soundboard)

嗨，我正在为我的 iPhone 应用程序创建一个音板，但我的代码中不断出现错误等，你们可以编辑它吗？或者你知道我正在使用 Xcode 4.2 的音板有更好的代码吗，我是新手，所以请清楚谢谢你的时间，我真的很感激！！

.h 都很好，我认为没有错误

```
#import <UIKit/UIKit.h>
#import <AudioToolbox/AudioToolbox.h>

@interface ViewController : UIViewController {

}

-(IBAction)sound1:(id)sender;

@end 
```

.m 这是有错误的

```
#import "ViewController.h"

//@interface ViewController ()

@implementation ViewController

-(IBAction)sound1:(id)sender {
CFBundleRef mainBundle = CFBundleGetMainBundle();
CFURLRef soundFileURLRef;
soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"sound1" , CFSTR ("wav") , null);
}

uint32 soundID;
AudioservicecreatesystemsoundID(soundfileURLRef, &soundID);
AudioservicesPlaysystemsound(soundID) 

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}
@end 
```

谢谢你希望你能帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T23:18:48.063

AudioToolbox 可能对您的需求来说有点太低级了......您可能可以通过使用 AVFoundation 让您的生活更轻松；特别是[AVAudioPlayer](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html#//apple_ref/doc/uid/TP40008067)类。

在您的实施中：

```
#import <AVFoundation/AVFoundation.h>

- (void)viewDidLoad
{
    NSString      *soundPath = [[NSBundle mainBundle] pathForResource:@"sound1" ofType:@"wav"];
    NSURL         *soundURL  = [NSURL fileURLWithPath:soundPath];
    NSError       *error     = nil;
    AVAudioPlayer *player    = [[AVAudioPlayer alloc] initWithContentsOfURL:soundURL error:&error];

    if ( ! player )
    {
        NSLog(@"%@", [error description]);
    }
    else
    {
        [player prepareToPlay];
        [player play];
    }
} 
```

请注意，我在这里没有进行任何内存管理。此外，如果您需要一次播放多个声音，您可以创建额外的 AVAudioPlayer 实例，或者您可以查看 OpenAL 库……这里的[github 上](https://github.com/hollance/SoundBankPlayer)有一个很好的包装器。

# python - Basic Python Class

> ID：10333878
> 
> 赞同：1
> 
> 时间：2012-04-26T12:56:53.890
> 
> 标签：python, class, init

Im just try to build a basic class so that I can learn some more about python. So far I have the following :

```
class Bodymassindex:
  count = 0
  def __init__(self,name,weight,height):
    self.name = name
    self.weight = 14 * weight
    self.height = 12 * height
    notes = "no notes have been assigned yet"
    bmitotal = 0
    Bodymassindex.count += 1

  def displayCount(self):
    print "Total number of objects is %d" % Bodymassindex.count

  def notesBmi(self,text):
    self.notes = text

  def calcBmi(self):
    return ( self.weight * 703 ) / ( self.height ** 2 ) 
```

In terms of adding a note variable and viewing what is the correct way of doing so ?

Thanks,

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:04:30.330

The `bmitotal` and `notes` variables in `__init__` will be local and garbage collected when `__init__` finishes, so initializing them like that is useless. You probably want to initialize them as `self.notes` and `self.bmitotal`

`Bodymassindex.count` would be *like* a static variable, which *shares* its value with all the instances.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:05:37.307

Just access the attribute:

```
class BodyMassIndex(object): #Inheriting from object in 2.x ensures a new-style class.
  count = 0
  def __init__(self, name, weight, height):
    self.name = name
    self.weight = 14 * weight
    self.height = 12 * height
    self.notes = None
    self.bmitotal = 0
    BodyMassIndex.count += 1

  def display_count(self):
    print "Total number of objects is %d" % BodyMassIndex.count

  def calculate_bmi(self):
    return ( self.weight * 703 ) / ( self.height ** 2 )

test = BodyMassIndex("bob", 10, 10)
test.notes = "some notes"
print(test.notes) 
```

There is nothing wrong with direct access in Python. As others have noted, it's likely you meant to make `notes` and `bmitotal` instance variables, which I have done here.

# soundcloud - 有没有办法使用javascript API成为具有已知ID的组的成员

> ID：10333879
> 
> 赞同：1
> 
> 时间：2012-04-26T12:57:03.093
> 
> 标签：soundcloud

有没有办法使用 javascript API 成为具有已知 ID 的组的成员。[我在这里https://developers.soundcloud.com/docs/api/users](https://developers.soundcloud.com/docs/api/users)和这里[https://developers.soundcloud.com/docs/api/groups](https://developers.soundcloud.com/docs/api/groups)都找不到这种能力

其他问题 - 我是否正确，必须成为小组成员才能使用 API 贡献我的曲目

非常感谢提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:23:48.513

不幸的是，我们目前不公开加入组功能。但是您仍然可以在不成为成员的情况下为群组做出贡献，使用：

```
SC.put("/groups/{id}/contributions/{track_id}", function(){
  console.log("contributed");
}); 
```

# automapper - Automapper：如何为多个属性指定一次类型转换

> ID：10333883
> 
> 赞同：1
> 
> 时间：2012-04-26T12:57:12.100
> 
> 标签：automapper

我正在使用 Automapper 从包含许多我想自动映射到标准 System.string、System.DateTime 的本土“StringType”和“DateTimeType”字段的对象进行映射。有没有办法做到这一点而不必在源对象上注册每个成员？

我正在尝试做这样的事情：

```
 Mapper.CreateMap<StringType, string>()
            .ForAllMembers(q =>
                {
                    q.NullSubstitute(string.Empty);
                    q.MapFrom(p => p.Value);
                });
        Mapper.CreateMap<DateTimeType, DateTime>()
            .ForAllMembers(q =>
            {
                q.NullSubstitute(DateTime.MinValue);
                q.MapFrom(p => p.Value);
            });
        Mapper.CreateMap<InType, OutType>(); 
```

当我尝试从“InType”到“OutType”的实际转换时，我不断收到“源对象为空”异常。我尝试通过 ValueResolvers 定义转换，但这没有帮助。

这样做的正确方法是什么？（我在 stackoverflow 上看到过类似的问题，但我看到的答案都建议涉及配置步骤和/或下载另一个库来处理这种情况：在所有这些情况下，我自己的解决方案是转储 Automapper 并使用手写转换，节省时间，同时使代码更具可读性。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:24:23.163

你看过自定义类型转换器吗？

我认为这应该可以解决问题...

这个链接不是那么“年轻”，但我几周前看过它，它仍然有用

[http://lostechies.com/jimmybogard/2009/05/06/automapper-feature-custom-type-converters/](http://lostechies.com/jimmybogard/2009/05/06/automapper-feature-custom-type-converters/)

你会有类似的东西（未经测试）

```
public class StringTypeToStringResolver : ITypeConverter<StringType, string> {
    public string Convert(StringType source) {
        return source == null ? string.Empty : source.Value;
    }
} 
```

和这样的映射声明

```
Mapper.CreateMap<StringType, string>().ConvertUsing(new StringTypeToStringResolver());
Mapper.CreateMap<InType, OutType>(); 
```

# c - 计算大CRC32的正确方法是什么

> ID：10333889
> 
> 赞同：2
> 
> 时间：2012-04-26T12:57:27.100
> 
> 标签：c, x86-64, sse, crc32

[这](http://www.drdobbs.com/go-parallel/article/parallel/229401411?pgno=2)是一篇文章，描述了如何使用现代 x86-64 处理器中的内置 CRC32 指令计算最大 1024 字节的 CRC32。但是，我需要计算超过 1024 字节的 CRC32。计算每个 1024 字节块的 CRC32 并最终将它们相加是正确的方法，还是不正确？如果是这样，正确的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T13:05:35.827

引用您的文章提到的[英特尔白皮书](http://www.intel.com/content/dam/www/public/us/en/documents/white-papers/crc-iscsi-polynomial-crc32-instruction-paper.pdf)，

> 我们不是使用传统的线性方法计算整个消息的 CRC，而是使用更快的方法将**任意长度的缓冲区拆分为多个较小的固定大小的段，并行计算这些段上的 CRC，然后是计算**使用段的部分 CRC 的**有效 CRC 。**

还，

> **CRC 的最终重组**增加了开销，并且**可以使用 Nehalem 微架构上的查找表来实现**——我们展示了如何使用尽可能少的表来实现这一点，同时在大小范围内提供出色的整体性能。**Westmere 微架构中的 PCLMULQDQ 指令允许高效重组 CRC，而无需查找表。本文通过真实的代码示例对各种方法进行了详尽的解释。**

所以你需要详细研究这篇论文： *Fast CRC Computation for iSCSI Polynomial Using CRC32 Instruction*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T13:09:18.150

不，只是添加不会完成这项工作。

您链接的文章告诉我们如何做到这一点：

> 一次计算的 CRC 输出用作下一次计算的初始 CRC [...]

为了涵盖最终结果较大的情况，然后`0xffffffff`在`crc32 = ~crc32 & 0xffffffff`最终计算之后进行。

# objective-c - 如何让 UIToolbar 在静态表格视图中正确显示？

> ID：10333894
> 
> 赞同：0
> 
> 时间：2012-04-26T12:57:35.743
> 
> 标签：objective-c, ios, uitableview, ios5, uitoolbar

在情节提要中，我将 UIToolbar 拖到我的静态 tablView 上。出于某种原因，工具栏在情节提要中显示得很好，但是当我运行它时，工具栏根本不显示。然后我尝试删除它，以便我可以拖出一个新的，但工具栏甚至没有显示在我的文档大纲中 - 我也无法通过在情节提要中单击它来选择它。然后我尝试拖出另一个工具栏并将其放在那个工具栏的顶部，并且那个工具栏出现了，但是模拟器屏幕底部有一个白色间隙：

![在此处输入图像描述](../Images/12e1a00211685643c9d990c4f6580bf6.png)

![在此处输入图像描述](../Images/52f728f1465c84420a2e2313ad1c23b8.png)

然后我删除了第二个工具栏并尝试了我在网上找到的几个解决方案，但它们似乎都已过时且容易出错。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:24:18.947

当我想这样做时，我使用 UIViewController 而不是 UITableViewController。首先通过从对象库中拖动它来添加工具栏更容易，然后从同一个库中拖动一个 tableView，它将自动适应场景中剩余空间的大小。

如果您需要实现委托和数据源方法，则必须声明它

```
@interface MyViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>
...
@end 
```

不要忘记将 MyViewController 设置为 tableView 的委托和数据源，方法是在情节提要中连接它，或者如果您想为 tableView 使用 IBOutlet，请通过代码。

如果您需要更多详细信息，请发表评论:)

# java - ExecutorService 超时而不阻塞主线程

> ID：10333895
> 
> 赞同：4
> 
> 时间：2012-04-26T12:57:40.973
> 
> 标签：java, multithreading, concurrency

我想在有时间限制的后台执行一些工作。问题是，我不想阻塞主线程。

天真的实现是有两个执行器服务。一个用于调度/超时，第二个负责完成工作。

```
final ExecutorService backgroundExecutor = Executors.newSingleThreadExecutor();
final ExecutorService workerExecutor = Executors.newCachedThreadExecutor();

backgroundExecutor.execute(new Runnable() {
    public void run() {
        Future future = workerExecutor.submit(new Runnable() {
            public void run() {
                // do work
            }
        });
        try {
            future.get(120 * 1000, TimeUnit.MILLISECONDS);
        } catch (InterruptedException e) {
            logger.error("InterruptedException while notifyTransactionStateChangeListeners()", e);
            future.cancel(true);
        } catch (ExecutionException e) {
            logger.error("ExecutionException", e);
        } catch (TimeoutException e) {
            logger.error("TimeoutException", e);
            future.cancel(true);
        }
    }
}); 
```

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:08:10.857

您不需要 ExecutorService 就可以像这样运行一个线程。您可以创建一个 FutureTask 来代替，它可以为您提供相同的好处而无需开销。

```
FutureTask<T> future = new FutureTask<T>(callable);
Thread thread = new Thread(future);
thread.start();
try {
    future.get(120 * 1000, TimeUnit.MILLISECONDS);
} ... 
```

上述代码段中的可调用对象将是您的任务。如果您有一个 Runnable（就像您在上面的代码块中所做的那样），您可以通过以下方式将其转换为 Callable：

```
Callable callable = Executors.callable(runnable, null); 
```

因此，总而言之，您的代码可能会更改为：

```
backgroundExecutor.execute(new Runnable() {
    public void run() {

        Runnable myRunnable = new Runnable() {
            public void run() {
                // do work
            }
        } 

        Callable callable = Executors.callable(myRunnable, null);

        FutureTask<T> future = new FutureTask<T>(callable);
        Thread thread = new Thread(future);
        thread.start();

        try {
            future.get(120 * 1000, TimeUnit.MILLISECONDS);
        } catch (InterruptedException e) {
            logger.error("InterruptedException while notifyTransactionStateChangeListeners()", e);
            future.cancel(true);
        } catch (ExecutionException e) {
            logger.error("ExecutionException", e);
        } catch (TimeoutException e) {
            logger.error("TimeoutException", e);
            future.cancel(true);
        } 
    }
}); 
```

您不需要 finally 来关闭执行程序。尽管您可能仍然需要 finally 来清理任何其他资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-28T10:23:01.103

您可以将 Executor Service 与 CompletableFuture 一起使用。CompletableFuture runAsync 接受 Runnable 和 ExecutorService 参数。

```
final ExecutorService workerExecutor = Executors.newCachedThreadExecutor();

void queueTask(TaskId taskId) {
        workerExecutor.submit(() -> processTaskAsync(taskId));
    }

private void processTaskAsync(TaskId taskId) {
        CompletableFuture.runAsync(() -> processTask(taskId), this.workerExecutor)
                .whenComplete((ok, error) -> {
                    if (error != null) {
                        log.error("Exception while processing task", error);
                    } else {
                        log.info("finished post processing for task id {}", taskId.getValue());
                    }
                });
} 
```

# facebook-graph-api - Facebook link_stat 表中的计数仍然为零

> ID：10333896
> 
> 赞同：3
> 
> 时间：2012-04-26T12:57:41.517
> 
> 标签：facebook-graph-api, facebook-fql

我正在通过 android sdk 共享一个链接。我有朋友评论并喜欢那个分享......当我想检索这个链接的几个计数时，我正在这样做：[https ://developers.facebook.com/docs/reference/fql/link_stat/](https://developers.facebook.com/docs/reference/fql/link_stat/)

但是，所有计数仍然为 0。我想我给它一个小时左右，也许 facebook DB 需要时间来更新它的数据库。但即使在 3 小时后，所有计数仍为 0。

我的 fql 语句如下所示：

```
SELECT url, normalized_url, share_count, like_count, comment_count, total_count, commentsbox_count, comments_fbid, click_count FROM link_stat WHERE url = "http://someurl" 
```

我做错了什么，还是我只需要等待更长时间让 facebook 更新 link_stat 表？

# iphone - 如何从类别表中重新加载 RootViewController 中列出的 tableView？

> ID：10333897
> 
> 赞同：0
> 
> 时间：2012-04-26T12:57:44.333
> 
> 标签：iphone, objective-c, ios, uitableview, listview

我正在做一个笑话应用程序。主页是`RootViewController`从类别表中列出的类别列表。

当用户执行更改时，数据库会更新。问题是当我回到主页时，表格没有刷新。当我再次运行应用程序时，更改是可见的。

我试过了`[tableView reloadData]`，`[self.tableView reloadData]`但没有结果。

这里的代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
{       
    return 1;
}   

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
      WhySoSeriousAppDelegate *appDelegate = (WhySoSeriousAppDelegate *)[[UIApplication               sharedApplication] delegate];

      return appDelegate.jokes.count;
}    

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath    
{       
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier ] autorelease];

        UIView *activeColor = [[[UIView alloc] init] autorelease];
        activeColor.backgroundColor = [UIColor colorWithRed:170/256.0 green:50/256.0 blue:0/256.0 alpha:1.0];
        cell.selectedBackgroundView = activeColor;          
    }       

    WhySoSeriousAppDelegate *appDelegate = (WhySoSeriousAppDelegate *)[[UIApplication sharedApplication] delegate];
    Joke *joke = (Joke *)[appDelegate.jokes objectAtIndex:indexPath.row];   

    [cell setText:joke.category];       
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;       

    return cell;        
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:14:51.790

在同一控制器的应用程序委托中重新加载笑话数据以查看更改的记录。然后重新加载表格视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:02:58.710

试试下面的代码来更新你的 UITableview：

```
 [table_view beginUpdates];
    [table_view deleteSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationLeft];
    [table_view insertSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationRight];
    [table_view endUpdates]; 
```

谢谢...！

# git - 使用 git 存储库和 jenkins 执行子项目的 maven 发布

> ID：10333898
> 
> 赞同：4
> 
> 时间：2012-04-26T12:57:45.933
> 
> 标签：git, maven, jenkins, maven-release-plugin

## 设置

我有一个带有子项目的项目，并且想做一个子项目的 maven 版本（项目 B）：

```
Project-A/
  pom.xml
  Project-B/
    pom.xml
    src/ 
```

Project-A 的文件夹同时也是我的 git 存储库，我从我们的中央 git 服务器克隆了它。

对于我们的发布，我们使用 jenkins 作为构建服务器和 Jenkins Maven 发布插件来启动发布构建。

因此，在 jenkins Job（称为 JobB）启动后，它会将 Project-A 文件夹检出到以下位置：`/Users/titan/.jenkins/jobs/JobB/workspace`.

由于 git 的工作方式，我只能克隆我的结构的顶层。所以这意味着我需要将我想在 jenkins 中构建的 pom 设置为 Project-B/pom.xml ，然后它将更改 maven 用于完成其工作的工作目录。

这会给 git 带来很多问题，因为 maven 发布插件试图提交到错误的目录（它假定 Project-A/Project-B/ 是一个有效的 git 存储库）。我可以解决所有此类问题（通过在发布时停用对远程仓库的推送并在发布时指定正确的 scm url。）

这是`Release goals and options`jenkins JobB 配置中字段的值：

```
-X -DpreparationGoals="clean install" 
-DpushChanges=false 
-DconnectionUrl=scm:git:file:///Users/titan/.jenkins/jobs/JobB/workspace 
release:prepare release:perform 
```

需要 connectionUrl 的文件 url，因为我没有将更改推送到 git 远程服务器，并且在 maven:perform 开头完成的克隆找不到它需要从中签出的标签。

## 问题

毕竟这是我无法解决的问题：

maven:prepare 步骤贯穿并完成所有工作（更改 pom 中的版本号，创建发布标签）。然后该`maven:perform`步骤开始，从 git 存储库克隆内容，将 checkouts 标记放入目标文件夹，然后调用部署命令。

但这是在顶层调用调用的部署命令的问题，因此它正在部署 Project-A 而不是 Project-B。作业本身正在运行，没有任何错误，它只是在构建和部署错误的东西。

这是 maven 为执行部署而生成的命令：

```
[INFO] Executing goals 'deploy'...
[DEBUG] Using ${maven.home} of: '/usr/share/java/maven-3.0.3'.
[DEBUG] Executing: /bin/sh -c cd /Users/titan/.jenkins/jobs/jobB/workspace/Project-B/target/checkout && /usr/share/java/maven-3.0.3/bin/mvn -B -X -D maven.repo.local=/Users/titan/.m2/repository -s /Users/titan/.m2/settings.xml -D performRelease=true deploy 
```

所以它在 checkout 目录中调用 pom 文件，而不是在 checkout/Project-B 中。有趣的是，maven:prepare 步骤确实在正确的 pom 上执行。

## 到目前为止我尝试了什么

*   不使用 jenkins，而是直接从 shell 调用 mvm 命令。这给了我同样的结果。所以我认为詹金斯不是问题。

*   `-Darguments="-f sword-packaging-wbf/pom.xml"`用and 改变 pom 的路径`-Darguments="-DpomFileName=sword-packaging-wbf/pom.xml"`

    这两种方法都不会改变结果。查看输出，我发现`-f <path>`在生成的命令中忽略了 ，因为`-DpomFileName`是可见的，但不会改变结果中的任何内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T07:46:38.867

所以这意味着你的组织完全错了。将您的父级放入一个单独的 Maven 模块（也是单独的 git repos）中释放它。在您的子模块中，只需使用父模块并让您的孩子分开 maven 模块以及 git repos 并分别发布它们。就是这样。否则，您开始与 Maven 战斗，您将失去战斗。

# ruby-on-rails-3 - Rails 3 祖先模型属于_另一个模型

> ID：10333900
> 
> 赞同：1
> 
> 时间：2012-04-26T12:57:49.190
> 
> 标签：ruby-on-rails-3, data-mapping, ancestry

我正在尝试使用 Ancestry gem 实现属于另一个模型的嵌套集。

使用旧的帖子/评论示例，我正在尝试做这样的事情：

```
Post
has_many comments

Comment
belongs_to post
has_ancestry 
```

因此，如果我有一个属于 ID 为 1 的帖子的评论，我希望该评论的任何子级都继承该帖子 ID。

有没有一个不错的 Rails-Way 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:42:26.423

我认为你应该看[这个](http://asciicasts.com/episodes/262-trees-with-ancestry)

# azure - Windows Azure VM 角色上传

> ID：10333901
> 
> 赞同：3
> 
> 时间：2012-04-26T12:57:53.263
> 
> 标签：azure, azure-vm-role

此问题与 Azure VM 角色有关。正如我在一些博客中所读到的，要托管 VM 角色，我们需要创建一个安装了 Windows Server 2008 r2 的虚拟机映像 (VHD)。

1.) 那么 VHD 文件的大小（大约）是多少？

2.) 我想它肯定会以 GB 为单位。所以可以用任何其他方法来避免它，以便我们可以动态创建它，我的意思是在云环境本身中。这样就避免了上传这么大的文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T17:55:34.620

我将在 David 提供的内容中添加更多信息。请检查下面标题为“我为什么要在我的应用程序中使用 VM 角色？”的链接。因为您必须确定为什么要使用“VM Role”路径：

[http://msdn.microsoft.com/en-us/library/windowsazure/gg671911.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg671911.aspx)

接下来要准确回答您的问题：

1) VHD 的大小由您将使用的 VM 角色实例的类型定义。最大 VHD 逻辑大小支持为 64GB。根据您的 VM 角色实例类型“超小、小、中、大和超大”，您可以使用 15GB 和超小、35GB 和小以及 64GB 和中、大和超大。

2) 到目前为止，VM 角色仍处于测试阶段，您必须使用 Windows Server Hyper-V 在本地创建 VHD，并且必须在其上安装 Windows Server 2008。

如果您想深入了解，可以按照下面的逐步动手实验室操作：

[http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_vmrolelab_topic2#_Toc308775050](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_vmrolelab_topic2#_Toc308775050)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:15:33.373

这就是今天的工作方式：您在本地 Hyper-V 中创建 VHD，然后上传映像，该映像随后用于 VM 角色部署和扩展。很难预测实际的 VHD 大小，因为这在很大程度上取决于您在 VM 上安装的内容。我相信您可以轻松创建超过 10 GB 以上的图像。

一旦你上传了你的图像，你就不需要重新上传整个图像，如果你给你的虚拟机打了补丁。您可以上传差异磁盘，该磁盘会小得多。

需要记住的一件事：在 Windows Azure 中运行时对 VM 所做的任何更改都将是非持久性的。例如，如果 VM 崩溃并且必须重建，它会从您最初上传的 VHD 中重建。

现在...说了这么多：您应该仔细考虑在 Web 和 Worker 角色上使用 VM 角色（本质上分别是运行和不运行 IIS 的 Windows Server 2008）。通过可能以提升的权限运行的启动任务，您几乎可以安装通常在 Windows Server 上安装的任何东西。使用 VM 角色有三个主要原因：

*   您有软件要安装，但无法自动安装
*   您可以自动安装，但需要的时间太长（例如，超过 5-10 分钟）
*   您可以自动安装，但安装不可靠

如果可以避免 VM Role，则可以避免 VM 上传和后续 VM 维护，并将 OS 管理外包给 Windows Azure。

# jakarta-ee - 使 JBoss 7 中部署的所有应用程序都可以访问 OSGI 包中的导出包

> ID：10333902
> 
> 赞同：2
> 
> 时间：2012-04-26T12:57:57.437
> 
> 标签：jakarta-ee, osgi, jboss7.x

我正在寻找正确的方法来使某个 OSGI 包中的导出包中的类可供部署在 JBoss AS 7 中的所有 Java EE 应用程序访问。到目前为止，我一直在做的解决方法是将 OSGI 包 jar 放在JBOSS_HOME/standalone/deployments 文件夹，然后每次我需要访问的地方我在它的 MANIFEST.MF 文件中添加这一行 `Dependencies: deployment.<OSGIBundleName>:<OSGIBundleVersion>`：

我的问题是：有没有办法在 JBoss 中发布 OSGI 包（在“bundles”文件夹中？）并指示应用程序服务器将包导出的包访问到其中部署的任何应用程序？

我知道使用模块（[https://community.jboss.org/message/604576](https://community.jboss.org/message/604576)）可以使JBoss中的所有应用程序都可以访问包，但我想知道是否可以使用OSGI包来代替。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:07:23.810

把它们放在“bundles”文件夹中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:33:36.943

我认为这不会起作用，因为如果不是“OSGi 模式”，JBoss 可能会忽略清单中的 Export-Packages 部分（不过我在这里猜测）。

如果我是你，我会将包拆分为导出*所有*类的 API 包和依赖于它的实现包。您可以将 API 包视为普通 jar，因为无论它是否在 OSGi 上下文中使用，它都会公开相同的类。

# eclipse - 从 Eclipse 中的 cvs 项目中删除 bin 文件夹

> ID：10333905
> 
> 赞同：2
> 
> 时间：2012-04-26T12:58:05.463
> 
> 标签：eclipse, cvs

我有一些在 Eclipse 中使用 CVS 的 Android 项目。很久以前添加项目时，也添加了 bin 文件夹。这变得越来越烦人，我想删除它，但是如何？

到目前为止我的尝试：

1.  右键单击 bin 文件夹并选择 Team->Add to .cvsignore 将显示为灰色。我想这仅在文件是新文件时才有效。

2.  停用项目-> 自动构建，然后删除 bin 文件夹，然后提交更改使 eclipse 说：“没有提交”。然后我的想法是再次激活自动构建并将新的 bin 文件夹添加到 .cvsignore。

有任何想法吗？如果有任何建议可以规避日食，我也对此持开放态度。我可以访问服务器。但我更喜欢使用 eclipse 来避免冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T03:30:18.853

这是 CVS 的一个“特性”。您需要`bin`从 CVS 服务器文件系统中物理删除，以使其“忘记”该文件夹（在处理 CVS 服务器的文件系统时要小心！）。然后，您可能需要在 Eclipse 中重新签出该项目（尽管我已经看到它在使用和不使用最后一步的情况下都可以工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:25:32.957

您只能忽略 CVS 服务器上根本不存在的文件。bin 可以以某种方式在 .cvsignore 文件中以及在服务器上吗？

# java - 具有内容长度和内容类型限制的可靠 Java HTTP 请求

> ID：10333906
> 
> 赞同：0
> 
> 时间：2012-04-26T12:58:12.547
> 
> 标签：java, http, timeout, request, limits

我正在寻找具有这些功能的可靠（防挂起）方式来获取 Java 中的 HTTP 页面：

*   如果标题中的内容类型不是文本/...，则停止获取页面
*   如果加载的数据超过字节限制（并且未设置内容长度作为响应），您可以随时停止获取页面
*   您可以在给定的时间限制内停止获取页面

apache http 客户端有这些选项吗？我知道在多次连接之后，所有的一小部分完全挂起很长时间，甚至对进程信号也没有响应 - 但是这个问题可以在其他线程中运行页面获取时被忽略，你可以在一段时间后忘记. 但是我仍然没有找到给定问题的解决方案。

此外，我的目标是避免大量被遗忘的僵尸线程下载大文件，因此停止错误下载是这里的首要任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:30:53.863

使用 httpclient 或 httpURLConnection：

1.  `response.getHeaders`或者`connection.getHeaderField`
2.  在 n 个字节后停止读取循环
3.  在 t 之后停止读取循环（只需检查`System.currentTimeMillis()`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:35:20.367

1.  `HttpRequestExecutor.doReceiveResponse(...)`根据内容进行过滤。

2.  `org.apache.http.message.BasicLineParser#parseRequestLine(...)`使用最大光标右侧位置的设置限制覆盖。

3.  您可以覆盖[`HttpRequestExecutor.preProcess(...)`](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/protocol/HttpRequestExecutor.html#preProcess%28org.apache.http.HttpRequest,%20org.apache.http.protocol.HttpProcessor,%20org.apache.http.protocol.HttpContext%29)以设置计时器到期。

所有这些都需要您付出一些努力。

# hibernate - Hibernate：在 Oracle 和 TimesTen 中使用相同映射文件的选项

> ID：10333907
> 
> 赞同：1
> 
> 时间：2012-04-26T12:58:16.917
> 
> 标签：hibernate

我们有一个问题，即我们的 Oracle 数据库中的不可空字段在我们的 TimesTen 数据库中不存在。因此，我们应用程序的 GUI 部分写入 Oracle，然后我们的应用程序引擎从 TimesTen 读取。问题是 Oracle 中的某些字段不可为空，因此我们需要在映射文件中使用它们。但是，当我们从 TimesTen 读取相应的对象时，我们会收到一个错误，指出该列不存在。我们无法将这些列添加到 TimesTen，因为我们的应用程序引擎不使用它们，并且性能/内存使用是关键。我已经尝试使这些有问题的属性在映射文件中“惰性”，但这似乎不起作用。我们不能在 Oracle 中为这些不可为空的字段指定默认值，所以这似乎很难解决！

从 Hibernate 的角度来看，我们还有哪些其他选择？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:36:11.117

据我所知，Hibernate 总是确保映射文件中提到的所有列也存在于数据库中。所以你不能在一个映射文件中做到这一点。

使用两个映射文件。然后你还使用了两个hibernate.cfg.xml，一个用于GUI 部分，一个用于应用程序引擎。这两个配置文件的不同之处在于，它们在映射属性中引用了不同的映射文件。当您将这些配置文件的名称作为参数提供给 GUI 部分和应用程序引擎中的 configure() 方法时，其余的 Java 代码对于您的两个应用程序可能完全相同。

如果一个表的两个不同的映射文件（对于 Oracle 和 TimesTen）应该包含很多相同的 xml 代码，并且您不想在文件中两次使用此 xml 代码，那么您可以使用包含文件的 xml 机制（和`[<!ENTITY namexxx SYSTEM "filename">]`）`&namexxx`。

# c# - 具有区域设置特定字符的数据库的 OleDbConnection/命令

> ID：10333911
> 
> 赞同：3
> 
> 时间：2012-04-26T12:58:29.973
> 
> 标签：c#, ms-access, oledb, cultureinfo

我有 MS Access DB 表，其中包含名称**具有**丹麦字符的**列。**例如**`Døbt`**

 **当程序在丹麦位置的 PC 上运行时，一切正常，但在乌克兰位置的 PC 上，我收到该字段`Dжbt`丢失的错误。似乎 char`ø`是从 DB 来找我的`ж`

在最后一行触发错误的代码：

```
var connection = new OleDbConnection();
connection.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=F:\\STAT.MDB";
var table = new DataTable( "NewTable" );
table.Locale = CultureInfo.GetCultureInfo( "da-DK" ); 
var adapter = new OleDbDataAdapter( "SELECT Døbt FROM Table", connection );
adapter.Fill( table ); 
```

有没有办法为连接或其他东西设置目标文化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:21:16.020

我认为问题不在于连接，而是因为您运行它的机器没有使用正确的字符集，您可能可以下载一个更新，允许乌克兰位置设置读取丹麦字符**

# json - Json 反序列化流返回类型

> ID：10333916
> 
> 赞同：0
> 
> 时间：2012-04-26T12:58:43.263
> 
> 标签：json, http

嗨，我有一个从 http 响应返回的流。我已将其反序列化为 Object(obj)，并希望将 obj 的类型检查为 MyObject 或 string 或 double。是程序错误还是我的概念错误。请帮忙。

```
DataContractJsonSerializer obj = new DataContractJsonSerializer(typeof(Object));
        Object Obj = obj.ReadObject(_stream) as Object;
        Product p = new Product();
        List<string> ls = new List<string>();
        List<DisplayProduct> displs = new List<DisplayProduct>();

         if (Obj.Equals(p))
            Console.WriteLine("PRODUCT");
        else if (Obj.Equals(ls))
            Console.WriteLine("LIST OF STRING");
        else
            Console.WriteLine("DISPLAY PRODUCT LIST"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:20:38.107

雨，

您可以使用 'is' 或 'as' 关键字，而不是做你想做的事。

不同之处在于`as`operator 类似于强制转换操作。但是，如果无法进行转换，则 as 返回 null 而不是引发异常。考虑以下表达式：

```
expression as type 
```

除了仅计算一次表达式外，它等效于以下表达式。

```
expression is type ? (type)expression : (type)null 
```

您将如何使用的示例`as`：

```
 Derived d = new Derived();

       Base b = d as Base; 
```

相比之下，`is`如果提供的表达式为非 null，则表达式的计算结果为 true，并且提供的对象可以转换为提供的类型而不会引发异常。

如果已知`is`表达式始终为真或始终为假，则关键字会导致编译时警告，但通常会在运行时评估类型兼容性。

以下是您可能使用的方法`is`：

```
if (obj is MyObject)
{
} 
```

# iphone - 刷新视图控制器.m

> ID：10333917
> 
> 赞同：2
> 
> 时间：2012-04-26T12:58:44.417
> 
> 标签：iphone, objective-c, ios, xcode

我有一个从网络服务器提取的随机问卷表格。我需要执行一个按钮（setNeedsDisplay）来刷新页面......当我点击按钮时应用程序崩溃了：

*Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[ExercisesViewController setNeedsDisplay]: unrecognized selector sent to instance 0x6a1e840' *** First throw call stack: (0x13f3022 0x1584cd6 0x13f4cbd 0x1359ed0 0x1359cb2 0x963054 0x974fc6 0x57c0 0x13f4e99 0x4014e 0x400e6 0xe6ade 0xe6fa7 0xe6266 0x301a1a 0x13c799e 0x135e640 0x132a4c6 0x1329d84 0x1329c9b 0x12dc7d8 0x12dc88a 0x3d626 0x1f96 0x1f05) 终止称为抛出异常*

```
//Add refreshing agenda
    scrollViewFrame = CGRectMake(0, 200, 80, 40);
    mark = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    mark.frame = scrollViewFrame;
    [mark setTitle:@"Get Score" forState:UIControlStateNormal];
    [mark setBackgroundColor:[UIColor clearColor]];

    [mark addTarget:self 
             action:@selector(markButtonSelected:) forControlEvents:UIControlEventTouchUpInside];
    [scrollView addSubview:mark]; 
```

...

```
- (IBAction)markButtonSelected:(id)sender{
[self performSelectorInBackground:@selector(setNeedsDisplay) withObject:nil]; 
```

}

这是语法问题吗？[我在这里](https://stackoverflow.com/questions/8742099/refreshing-a-view)读到它与线程有关。有人可以解释一下线程还是有更直接的方法？提前谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:02:48.307

`setNeedsDisplay`方法是`UIView`的方法，而不是`UIViewController`。在您的`markButtonSelected:`方法中，只需添加：`[self.view setNeedsDisplay];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:01:39.553

利用：

```
[self.view setNeedsDisplay]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:17:09.917

视图更新应该在主线程上完成。

利用

```
[self.view performSelectorOnMainThread:@selector(setNeedsDisplay) withObject:nil waitUntilDone:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T13:40:29.040

您需要在 UIView 而不是 UIViewController 上调用 setNeedsDisplay。异步执行此操作会产生更好的性能。使用 GCD 做异步工作是 Apple 的首选方式。

IE：

```
 dispatch_async(dispatch_get_main_queue(), ^{
      [self.view setNeedsDisplay];
    }); 
```

# gwt - 难以运行简单的 GWT 应用程序

> ID：10333920
> 
> 赞同：0
> 
> 时间：2012-04-26T12:58:53.030
> 
> 标签：gwt

我正在按照以下步骤制作 gwt 应用程序：

1.  首先，我在我的 Eclipse（Helios）中安装了 gwt 插件。
2.  创建动态项目。
3.  通过添加gwt插件
    1.  转到项目的属性页面
    2.  选择 google-webtoolkit
    3.  勾选“使用 GWT”
    4.  然后转到 google-web 应用程序
    5.  目录名称为“web-content”。
4.  在我的项目中创建 gwt 模块，然后创建入口点类，然后创建 html。
5.  在入口点类的 onModule 方法中创建一个按钮。

然后我通过右键单击项目并选择作为 Web 应用程序运行（使用 tomcat 服务器运行）在 tomcat 服务器中运行应用程序。因此，我在浏览器上得到一个空白页面？服务器日志中没有例外。我无法调试。我哪里错了？请帮我解决这个问题。

我没有使用谷歌网络应用程序，因为我很难创建战争文件。因此，我得到了开发 GWT 应用程序的上述过程。

谢谢拉胡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:51:08.653

你为什么不反过来尝试：

1.  首先在我的 eclipse(Helios) 中安装 gwt 插件。
2.  创建 GWT 项目
3.  添加动态网络插件
    1.  转到项目的属性页面
    2.  项目构面选项卡
    3.  选择动态 Web 模块和 java
    4.  确定应用更改。
4.  编写你的代码

并尝试在服务器上运行。它会起作用的。

# c# - 如何在c#中动态转换excel表格的列号格式？

> ID：10333923
> 
> 赞同：0
> 
> 时间：2012-04-26T12:59:06.853
> 
> 标签：c#, excel, string-formatting

我正在将一些字段导出到 c# 中的 excel 工作表。除了一列之外的所有列都正确出现，但在该列中，我需要将值 0 导出为 0.00 格式。

当我的代码背后的代码运行时，我将值作为 0.00 格式附加到 stringBuilder 对象，但是当我打开导出的文档时，它显示的值为 0。然后我必须更改 excel 表中的列号格式并更改数字通过选择类型 12.3323 来格式化。

我不想这样做。我想在文件后面的 c# 代码中动态定义列号格式。

我怎样才能做到这一点？如果你知道，请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:01:36.663

我认为 C# 做得对。问题是您需要在 excel 中指定“列格式”才能以这种方式显示。只需添加格式掩码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:19:30.713

您可以在写入单元格时使用 Format 函数来转换您的值。喜欢 ：

```
Format(Convert.ToDouble(data.ToString()), "0.00") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:17:15.620

您可以使用`Range.NumberFormat = "0.00"`（英文版）或`"0,00"`（对于 Office 的德文版）；例如`ws.get_Range("A1", "C2").NumberFormat = "0.00";`

# linux - 在特定空格后的文件的每一行中添加一个变量

> ID：10333925
> 
> 赞同：0
> 
> 时间：2012-04-26T12:59:08.477
> 
> 标签：linux, append, add

这是文件的一小部分：

```
ATOM   1276 HB1  ALA    81       9.959   6.292   8.850
ATOM   1277 HB2  ALA    81       9.327   5.104  10.015
ATOM   1264 HG21 THR    80       7.466  11.485   7.678
ATOM   1265 HG22 THR    80       6.093  12.332   8.430
ATOM   1278 HB3  ALA    81       8.579   5.259   8.408
ATOM   1279 C    ALA    81       8.644   7.659  10.963
ATOM   1280 O    ALA    81       9.831   8.068  10.879
ATOM   1281 OXT  ALA    81       7.873   7.848  11.925
TER   
ATOM   1282 N    THR    82      25.394   2.987 -11.042
ATOM   1283 H1   THR    82      25.767   3.599 -10.330
ATOM   1284 H2   ALA    82      24.426   3.228 -11.202
ATOM   1285 H3   THR    82      26.042   2.957 -11.816
ATOM   1264 HG21 HIS    80       7.466  11.485   7.678
ATOM   1265 HG22 THR    80       6.093  12.332   8.430
ATOM   1286 CA   THR    82      25.370   1.609 -10.498
ATOM   1287 HA   THR    82      24.355   1.215 -10.451
TER 
```

如果我将 ATOM 的“A”视为位置 1，我如何在第 4 列之后的一个空格（即第 21 位）添加“A”。这将持续到 TER，在 TER 之后它将添加“B”到同一位置。这种方式填充将如下所示：

```
ATOM   1276 HB1  ALA A   81       9.959   6.292   8.850
ATOM   1277 HB2  ALA A   81       9.327   5.104  10.015
ATOM   1264 HG21 THR A   80       7.466  11.485   7.678
ATOM   1265 HG22 THR A   80       6.093  12.332   8.430
ATOM   1278 HB3  ALA A   81       8.579   5.259   8.408
ATOM   1279 C    ALA A   81       8.644   7.659  10.963
ATOM   1280 O    ALA A   81       9.831   8.068  10.879
ATOM   1281 OXT  ALA A   81       7.873   7.848  11.925
TER   
ATOM   1282 N    THR B   82      25.394   2.987 -11.042
ATOM   1283 H1   THR B   82      25.767   3.599 -10.330
ATOM   1284 H2   ALA B   82      24.426   3.228 -11.202
ATOM   1285 H3   THR B   82      26.042   2.957 -11.816
ATOM   1264 HG21 HIS B   80       7.466  11.485   7.678
ATOM   1265 HG22 THR B   80       6.093  12.332   8.430
ATOM   1286 CA   THR B   82      25.370   1.609 -10.498
ATOM   1287 HA   THR B   82      24.355   1.215 -10.451
TER 
```

如果在 linux 中可以做到这一点，Linux 命令将非常有帮助。如果这些更改发生在文件中并重写它会很好。任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:06:15.057

```
awk '
    /^TER/ && x==0{
    x=1
}
NF>1{
    $4 = $4 " " (x ? "B" : "A")
}1' input.txt | column -t 
```

* * *

```
ATOM  1276  HB1   ALA  A  81  9.959   6.292   8.850
ATOM  1277  HB2   ALA  A  81  9.327   5.104   10.015
ATOM  1264  HG21  THR  A  80  7.466   11.485  7.678
ATOM  1265  HG22  THR  A  80  6.093   12.332  8.430
ATOM  1278  HB3   ALA  A  81  8.579   5.259   8.408
ATOM  1279  C     ALA  A  81  8.644   7.659   10.963
ATOM  1280  O     ALA  A  81  9.831   8.068   10.879
ATOM  1281  OXT   ALA  A  81  7.873   7.848   11.925
TER
ATOM  1282  N     THR  B  82  25.394  2.987   -11.042
ATOM  1283  H1    THR  B  82  25.767  3.599   -10.330
ATOM  1284  H2    ALA  B  82  24.426  3.228   -11.202
ATOM  1285  H3    THR  B  82  26.042  2.957   -11.816
ATOM  1264  HG21  HIS  B  80  7.466   11.485  7.678
ATOM  1265  HG22  THR  B  80  6.093   12.332  8.430
ATOM  1286  CA    THR  B  82  25.370  1.609   -10.498
ATOM  1287  HA    THR  B  82  24.355  1.215   -10.451
TER 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:05:44.687

在特定偏移处插入字母的最简单方法（可能）是：

```
perl -i.bak -pwe 'substr( $_, 20, 0 ) = "A"' input-file 
```

要处理您在 TER 之后更改替换的要求，您可以执行以下操作：

```
perl -i .bak -pwe 'if( m/^TER/ ) { $m = "B"; next }
    substr( $_, 20, 0 ) = $m || "A"' input-file 
```

# jquery - .get jquery 返回“数组”字符串？

> ID：10333926
> 
> 赞同：0
> 
> 时间：2012-04-26T12:59:10.947
> 
> 标签：jquery, get

我正在使用 .get 从数据库中获取单词列表

```
$.get( "script/get_words.php", function( data ) {
    alert(data);
    words = data;
    $.each( words, function( k, v ) {
        availableTags[k] = v;
    })
});

$( "#tags" ).autocomplete({
    source: availableTags
}); 
```

这是我正在调用的 get_words.php 请求中的 php

```
$sql = "select answer from questions";
$words =  array();
$result = run_query( $sql );
$i = 0;

// echo "1 $course_is is course_id and  $class_id is class_id <br>" ;   
while ( $row = mysql_fetch_assoc( $result ) ) {
    $words[$i] = $row['answer'];
    //echo $words[$i];
    $i++;   
}

return $words; 
```

它只返回单词数组的问题，而不是我要求的单词列表，可能是什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:02:30.127

您正在构建一个阵列服务器端，并尝试将其传递回客户端。由于 PHP 并不隐式知道您需要 JavaScript 的对象，因此它会做它认为应该做的事情，并打印类型。

使用以下命令从 PHP 返回 JSON [`json_encode()`](http://php.net/manual/en/function.json-encode.php)：

```
json_encode( $php_array ); 
```

您可以在以下示例中看到两者之间的区别：

```
$array = array( 'Foo' => 'bar' );

echo $array; // Array
echo json_encode( $array ); // {"Foo":"bar"} 
```

在您的`$.get()`中，请务必将响应类型声明为 JSON（或考虑`$.getJSON()`改用），然后您可以遍历其内容。

# ios - UITableViewCell 和 CALayer 的自动旋转问题

> ID：10333927
> 
> 赞同：1
> 
> 时间：2012-04-26T12:59:13.077
> 
> 标签：ios, uiview, uitableview, core-animation, calayer

我有一个设置为我自己的对象的`UITableViewCell`子类。该对象包含三层。我实现了我更新所有图层的地方。问题是自转。`backgroundView``UIView``UIView``CALayer``- (void)layoutSubviews``CALayer`

当我从横向模式旋转到纵向模式时，会出现以下外观问题：

**在动画过程中，我所有的`CALayer`图层都像纵向模式一样窄。**

看来这个人是对的：

> 在`layoutSubviews`方向更改期间调用时，视图的边界已经设置为旋转结束时的边界。

来源：[如何在使用单步旋转时实现平滑动画/如何在旋转开始时获得新的帧大小？](https://stackoverflow.com/questions/3493850/how-to-achieve-smooth-animation-when-using-single-step-rotation-how-do-i-get-t)

那么，我应该在哪里更新我的图层以实现正确的自动旋转？视图已经在旋转它们，所以我想不需要做任何自定义动画，只需调整大小。正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:08:12.810

Figured it out:

1.  subclass `CALayer` + add sublayers into it
2.  implement resizing of sublayers in `CALayer`'s `- (void)layoutSublayers` method
3.  subclass `UIView` + override `+ (Class)layerClass` in it:

    ```
    + (Class)layerClass {
        return [SubclassedCALayer class];
    } 
    ```

4.  set the subclassed `UIView` as `backgroundView` of `UITableViewCell`

# android - 在应用程序崩溃时禁用振动

> ID：10333929
> 
> 赞同：0
> 
> 时间：2012-04-26T12:59:20.020
> 
> 标签：android

有没有办法在应用程序崩溃时禁用振动？

我附近有一些人，有时当我开发新功能并导致应用程序崩溃时，振动会打扰他们。

# jquery - jQuery获取父元素的css背景颜色值

> ID：10333930
> 
> 赞同：2
> 
> 时间：2012-04-26T12:59:22.420
> 
> 标签：jquery, html, css, dom

我想做一些有点尴尬的事情，我的伪代码不起作用，但应该解释我想要做什么。我有 4 个单选按钮组，在 6 个单独的 div 中，所以总共有 24 个单选按钮。每个 div 都是特定的背景颜色。When a radio button within a particular div is selected, I need to grab the colour of the div the selected radio button is within, and have it stored in a variable ready to apply it to an element that'll be created next...

```
 $("#voucher_selection_container input:radio").change(function(){
    //var color = $(this).parent("div").css("background-color");
    //alert(color);
    $("#voucher_customisation_container").slideDown(600);
    //$("#voucher_customisation_container .voucher_box").css("background-color", color);
}); 
```

任何帮助，将不胜感激。：） 谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T13:07:29.680

尝试`closest()`在 DOM 树上查找下一个匹配元素

```
var color = $(this).closest("div").css("background-color"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:04:34.573

```
$("#voucher_selection_container input:radio").change(function(){

     var color = $(this).parent("div").css("backgroundColor");

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:06:29.657

```
$("#voucher_selection_container input:radio").change(function(){
    var color = $(this).parent().css("background-color");
    alert(color);
    //$("#voucher_customisation_container").slideDown(600);
    $("#voucher_customisation_container .voucher_box").css("background-color", color); 
}); 
```

尝试这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T13:04:18.307

```
$('input:radio').change(function(){
 var backColor = $(this).parent().css("background-color");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T13:05:14.480

通过使用 parent 函数，您将能够访问父 div

```
$('radio').click(function(){
  $(this).parent();
}); 
```

# symfony - Symfony2 SonataAdmin：尝试扩展 SonataUserAdmin 时出现“拒绝访问”异常

> ID：10333931
> 
> 赞同：0
> 
> 时间：2012-04-26T12:59:22.623
> 
> 标签：symfony, symfony-sonata

当从后端创建用户时，我需要扩展**SonataUser以将名为 isAdmin 的字段设置为 true。****对于ADMIN** =>（可以创建管理员用户并在其他实体上执行 CRUD）和**STAFF** =>（可以在其他实体上执行 CRUD ），我有不同的用户组。客户从前端注册。

**backend_users** (STAFF) 和**customers**都是 User 实体的实例，它扩展了 SonataUser 。

* * *

到目前为止，我一直在使用默认的 User 和 Group Admin 类。这是我的 app/config/config.yml 的样子

```
...app/config/config.yml...
            users:
                label: Users
                items: [ sonata.user.admin.user ]
            groups:
                label: Groups
                items: [sonata.user.admin.group]
... 
```

它对我来说很好。

现在我需要自定义默认实现，因此我将代码复制`Sonata/UserBundle/User/BaseUser.php`到`<my namespace>/AdminBundle/Admin/BackendUser.php` 创建新服务并将其映射到 config.yml

```
...app/config/config.yml...
            users:
                label: Users
                items: [ gd_admin.backend_user ]
            groups:
                label: Groups
                items: [sonata.user.admin.group]
...

...GD/AdminBundle/Resources/services.yml...
parameters:
    gd_admin.backend_user.class: GD\AdminBundle\Admin\BackendUserAdmin
..
services:
    gd_admin.backend_user:
        class: %gd_admin.backend_user.class%
        tags:
            - { name: sonata.admin, manager_type: orm, label: Backend User } 
        arguments: [null, GD\AdminBundle\Entity\User, null]
        # NOTE: No group defined in tags
... 
```

早些时候，我已将以下角色授予我的 ADMIN 组：

```
 'ROLE_SONATA_USER_ADMIN_USER_EDIT',
        'ROLE_SONATA_USER_ADMIN_USER_LIST',
        'ROLE_SONATA_USER_ADMIN_ USER _CREATE',
        'ROLE_SONATA_USER_ADMIN_ USER _VIEW',
        'ROLE_SONATA_USER_ADMIN_ USER _DELETE',
        'ROLE_SONATA_USER_ADMIN_ USER _OPERATOR',
        'ROLE_SONATA_USER_ADMIN_ USER _MASTER',
Now they are:
        'ROLE_GD_ADMIN_BACKEND_USER_EDIT',
        'ROLE_GD_ADMIN_BACKEND_USER_LIST',
        'ROLE_GD_ADMIN_BACKEND_USER_CREATE',
        'ROLE_GD_ADMIN_BACKEND_USER_VIEW',
        'ROLE_GD_ADMIN_BACKEND_USER_DELETE',
        'ROLE_GD_ADMIN_BACKEND_USER_OPERATOR',
        'ROLE_GD_ADMIN_BACKEND_USER_MASTER', 
```

* * *

当我登录到我的管理员/仪表板时，我可以在 Admin Dashboard 小部件中看到 BackendUser。但是当我单击“列表”或“添加新”时，我得到一个 403：拒绝访问异常。

我哪里错了？

谢谢，阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:29:55.403

我认为您不必弄乱奏鸣曲用户捆绑包中的 BaseUser 类。

相反，您可以根据奏鸣曲用户管理员 crud (Sonata\UserBundle\Admin\Document\UserAdmin) 在您自己的包中创建一个新的管理员 crud，并使用 prePersist() 方法将其扩展以将 isAdmin 设置为 true：

```
public function prePersist($object)
{
  $object->setIsAdmin(true);
} 
```

prePersist 实际上是一个在持久化新实体之前调用的钩子。

# java - 如何在 JButton 上绘制彩色矩形？

> ID：10333934
> 
> 赞同：2
> 
> 时间：2012-04-26T12:59:32.343
> 
> 标签：java, swing, jbutton

我将使用 Swing UI 增强应用程序，以允许用户选择颜色，这样他们就不会被默认颜色选择所困扰。

It is common for other applications to have shaded rectangles drawn on each button that activates a color selector, with the rectangle's color changing accordingly when a new color is selected. 我试图通过在按钮上放置一个带有所选颜色的小 JPanel 来达到相同的效果，但这会导致按钮中间出现一个小方块，而不是填充按钮的大部分表面。

我认为另一种方法是动态生成带有颜色的矩形图标，然后为每个按钮添加适当的图标，但肯定有更简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:04:28.770

放在`JButton.setIcon`那里`Rectangle`，[例如](https://stackoverflow.com/a/9300813/714968)

编辑

> 我试图通过在按钮上放置一个带有所选颜色的小 JPanel 来达到相同的效果，但这会导致按钮中间出现一个小方块，而不是填充按钮的大部分表面。

只有`JFrame (BorderLayout)`并且`JPanel (FlowLayout)`已经预先实现，对于您必须定义`LayoutManager`的其余部分`JComponents`（将一个添加`JComponent`到另一个） ，[请阅读此线程](https://stackoverflow.com/a/10140922/714968)`JComponent``LayoutManager`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:20:26.390

这是一个使用 setBackground 的示例，适用于我：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JColorChooser;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Test {

    public static void main(String... args) {
        JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        final JButton button = new JButton("Hello");
        button.setOpaque(true);
        panel.add(button);
        button.setBackground(Color.RED);
        button.setOpaque(true);
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                Color c = JColorChooser.showDialog(button, "Choose a color", button.getBackground());
                if (c != null) {
                    button.setBackground(c);
                }
            }
        });
        frame.setContentPane(panel);
        frame.setPreferredSize(new Dimension(800, 600));
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T13:08:29.427

每个摆动组件都是使用 JComponent.drawComponent(...) 方法绘制的，您可以根据需要覆盖默认行为。例如，制作您建议的面板。不过值得注意的是，您可以更改 jpanels 背景颜色来实现完全相同的效果。

```
 JColorChooser chooser = new JColorChooser(Color.BLACK);
    chooser.setVisible(true);

    Color color = chooser.getColor();
    if (color!=null) {
        colorPanel.setBackground(color);
    } 
```

其中 colorPanel 将是您的 JPanel，指示您的颜色。

# domain-driven-design - DDD：连接对象是实体对象还是值对象？

> ID：10333938
> 
> 赞同：6
> 
> 时间：2012-04-26T12:59:38.273
> 
> 标签：domain-driven-design

我正在开发一个用户可以互相关注的应用程序，类似于 Twitter。

在阅读了 DDD 之后，我了解到我的用户是实体对象——我使用他们的唯一 ID 来指代他们。

当一个用户“关注”另一个用户（即形成一个连接）时，该关系存储在一个多对多表中。其字段包括`FollowerID`、`TargetID`和`Status`。每个 Follower/Target 组合只能有两条记录（一个 Active，另一个 Inactive），因此我可以根据对象的属性安全地识别对象。

所以，我认为我的 Connection 对象是值对象，而不是实体对象，但我不确定。你能帮我做这个决定吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T14:54:22.253

您是正确的，实体是唯一的并且带有具有身份的概念（即只能存在一个唯一用户）。A`Connection`依赖于其他`User`实体。它代表了两个用户之间的某些方面。该方面是是否存在活动或非活动连接。如果不包含用户正在连接的数据，则连接没有身份。它甚至可能在数据库中有自己的主键，但从域的角度来看，它没有自己的身份。

因此，我会说这`Connection`是一个**价值**对象。

* * *

为了支持我的结论，*[Microsoft.Net 为企业构建应用程序](https://rads.stackoverflow.com/amzn/click/com/073562609X)*，第 187 页说：

> 值对象类表示域中的一个实体，该实体主要包含数据并为它所包含的数据而存在。值对象由其包含的值的组合完全标识。另一方面，实体对象有自己的生命和丰富的行为，无论它包含什么数据。实体对象通常是具有较长生命周期的对象。值对象代表实体的一个方面，并且只能与实体相关。

同样在第 189 页：

> 需要进一步评论来解释实体和值对象之间的区别。值对象不需要存储库或数据映射器。您只需要一个实体的存储库。给定实体的存储库（或映射器）肯定会处理依赖于给定实体的所有值对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T09:17:24.950

前段时间，我看了一部关于发明克隆的科学家的漫画。每次克隆自己，他都会破坏之前的版本。然后正在观看演示的人决定打断并破坏破坏部分，所以有两个科学家。卡通以一些有趣的存在主义问题结束。

值与实体不是关于具有或不具有一种或另一种形式的 id 字段。重点是 - 我们如何通过我们的领域视角看待这些对象。如果它们是价值对象，那么只有它们的价值很重要——第 1 位、第 3 位和第 53 位科学家是相同的。如果我们关心身份，如果我们认为克隆第三位科学家永远不会像第一位那样，那么我们的对象就是一个实体。

# php - 仅显示班级特定页面

> ID：10333944
> 
> 赞同：0
> 
> 时间：2012-04-26T12:59:52.577
> 
> 标签：php, drupal, drupal-templates, drupal-nodes

我正在使用 Drupal 7，我的主题是 Omega。我有一个类“掩码”及其css代码：

```
.mask {
    background:url("../img/header_mask.png") repeat-x scroll 0 0 transparent;
    height:200px;
    position:absolute;
    top:0;
    width:100%!important;
    z-index:101
} 
```

我正在创建一个关于显示内容顶部的 Omega 主题选项的类，但我的 div 显示每一页。所以，我想只显示这个类的节点页面。

这是我的 node.tpl.php：

```
<div id="node-<?php print $node->nid; ?>" class="<?php print $classes; ?> clearfix"<?php print $attributes; ?>>

  <?php print $user_picture; ?>

  <?php print render($title_prefix); ?>
  <?php if (!$page): ?>
    <h2<?php print $title_attributes; ?>><a href="<?php print $node_url; ?>"><?php print $title; ?></a></h2>
  <?php endif; ?>
  <?php print render($title_suffix); ?>

  <?php if ($display_submitted): ?>
    <div class="submitted">
      <?php print $submitted; ?>
    </div>
  <?php endif; ?>

  <div class="content"<?php print $content_attributes; ?>>
    <?php
      // We hide the comments and links now so that we can render them later.
      hide($content['comments']);
      hide($content['links']);
      print render($content);
    ?>
  </div>

  <?php print render($content['links']); ?>

  <?php print render($content['comments']); ?>

</div> 
```

在此代码中在哪里添加我的“掩码”类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:20:28.730

如果您只希望此规则仅适用于节点类型，请将其更改为：

```
.node .mask {
 ...
} 
```

Drupal 在 html 的 div 中添加有关正在查看的特定节点以及节点类型的信息。您可以使用 Firebug 或仅查看页面 html 来确定您可能希望如何根据针对不同内容类型存在的类来限制您的规则。

If the content type you want this rule to apply to has a machine name of 'event', for example, you'll see that Drupal adds the class 'node-event' to each node of that type, and you can use that to restrict your rule even further:

```
.node-event .mask {
 ...
} 
```

Hope that puts you in the right direction!

# reverse - Achartengine：反转y轴，怎么办？

> ID：10333946
> 
> 赞同：0
> 
> 时间：2012-04-26T13:00:10.307
> 
> 标签：reverse, achartengine

我正在使用 achartengine 来显示图表，但我想反转 y 轴，例如从 15 到 0。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:57:51.363

我只需要添加：

```
 XYMultipleSeriesRenderer aRenderer = new XYMultipleSeriesRenderer();
    aRenderer.setYAxisMin(15);              
    aRenderer.setYAxisMax(1);
    aRenderer.setYLabels(15); 
```

# css - 当在一个规则集中声明两个相同的 CSS 属性时，浏览器会同时呈现这两个属性吗？

> ID：10333947
> 
> 赞同：1
> 
> 时间：2012-04-26T13:00:20.273
> 
> 标签：css, browser

在一个规则集中使用相同的 CSS 属性时，如果需要为不支持您可能正在使用的属性的浏览器提供回退，如下所示：

```
body{
    background: rgb(255, 255, 255);
    background: rgba(255, 255 ,255, 0.5);
} 
```

理解这两个声明的浏览器是否会呈现第一个，然后用第二个覆盖它？或者浏览器是否省去了麻烦，只呈现后者？

编辑：我知道如果浏览器理解这两个声明，它将呈现后者，但我想知道浏览器是否将第一个呈现/绘制到视口中，然后用第二个覆盖它，或者浏览器是否以某种方式工作意味着它只呈现所需的一个声明，可能会节省自己的资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:20:56.467

我希望现代（也可能是旧的）浏览器在渲染任何东西之前解析提供给它的 CSS 规则。这是来自 Chrome 分析器的两个规则的屏幕截图：

![在此处输入图像描述](../Images/7e581ff6b572b37f417430c4c3e54f85.png)

这是另一个，仅适用于第一条规则：

![在此处输入图像描述](../Images/f731108629fdca66e5ba8b249118fe29.png)

如您所见，当存在两个不同的规则时，不会涉及额外的步骤。如果浏览器要渲染它两次，你会看到另一个“Paint”。（单个规则的绘制时间略有减少可能是因为我删除了`rgba`规则，因此浏览器不必考虑透明度）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:02:38.803

将应用 2 个中的最后一个

更准确地说：第一个将被应用，然后是第二个。这与使用 2 个相同的选择器设置背景属性相同。将应用最具描述性的一个。如果它们相同，则最后声明的将是应用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:48:11.920

从基本的[UA 一致性要求](http://www.w3.org/TR/CSS2/conform.html#conformance)来看，浏览器必须首先解析*所有*CSS 规则，然后根据规范中设定的原则决定每个元素的每个属性应该使用什么值。在阅读其余部分之前应用部分 CSS 代码的意义上，不允许“增量渲染”。浏览器偏离这一点会很奇怪，因为这意味着实现者需要做更多的工作，作者和最终用户会抱怨更多，而且没有任何好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T13:02:30.830

CSS 中的“C”代表 Cascading，这意味着样式可以添加或取代之前的 CSS 规则。所以第二个声明将覆盖第一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T13:02:41.817

浏览器正确处理这个问题。你可以使用这种规则。

比如chrome会应用rgba，IE8会应用rgb。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T13:18:39.027

浏览器通常应用以下算法：

```
for each element in the DOM tree
    for each CSS rule
        if rule's selector matches element
            apply all declarations in rule
render 
```

这**不是**它的工作方式：

```
for each CSS rule
    for each element in DOM tree
        if rule's selector matches element
            for each declaration in rule
                apply declaration
                render 
```

那将是一个巨大的性能问题。

# java - Jsoup 细粒度解析

> ID：10333950
> 
> 赞同：0
> 
> 时间：2012-04-26T13:00:41.710
> 
> 标签：java, web-scraping, jsoup

我正在尝试浏览网页正文上的每个 html 标签，看看它是否有文本。如果是这样，我想打印出该文本：

```
 Document doc = Jsoup.connect(site).get();     
    Elements e = doc.body().getAllElements();
      for (int i=0; i<e.size(); i++){
         if(doc.body().child(i).hasText()){
        System.out.println(doc.body().child(i).text());
          }
       } 
```

以上工作，但不是我想要的。似乎 child() 方法不是细粒度的，因为它将多个“div 类”元素聚集在一起。如何以更细粒度的方式遍历 DOM 正文以查看每个标签的文本是什么？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:09:43.840

您可以使用[这种](https://stackoverflow.com/questions/10111511/how-i-can-traverse-the-html-tree-using-jsoup)方法

在 traverse 中，您可以检查当前节点是否为 TextNode：

```
if(node intanceof TextNode) {
  System.out.println(node.text());
} 
```

如果您尝试打印出所有文本。为什么你不在`text()`课堂上使用`Elements`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:49:12.603

```
 Document doc = Jsoup.connect(site).get();
    doc.body().traverse(new NodeVisitor() {

        @Override
        public void head(Node node, int depth) {
            if (node instanceof TextNode) {
                TextNode tn = ((TextNode) node);
                // Try to improve this filter for the nodes who contain
                // texts with a whitespaces
                if (tn.text().replaceAll("\\s*", "").length() > 0) {
                    System.out.println("Tag:" + tn.parent().nodeName()
                            + ", text:" + tn.text());
                }
            }
        }

        @Override
        public void tail(Node node, int depth) {
            // Do Nothing
        }
    }); 
```

# clickonce - 为 clickonce wpf 应用程序编辑 setup.exe 资源字符串的自动化过程

> ID：10333951
> 
> 赞同：0
> 
> 时间：2012-04-26T13:00:41.937
> 
> 标签：clickonce, installation, ildasm

我们有一个合理大小的应用程序，为 Y 版本的 Z 区域中的 N 个客户推出。对于每种情况，每个 clickonce URL 对应的 WCF 服务 URL 都是不同的。

在需要部署/更新之前，我们不知道这些将是什么。目前这是一个非常手动的过程：

构建解决方案，更新程序集版本更新 clickonce 客户端配置以具有正确的 url resign click 一旦应用程序设置服务（url，配置等）部署

我们正在尝试自动化这个过程，并在此过程中释放大量时间和错误。我们的方法是在每次提交时构建一个通用版本并按版本号将其存档（我们自动增加客户端版本号并将整个应用程序、客户端、服务器、数据库脚本等存储在该版本号下）。这意味着企业可以说我们有 UAT 的 X 版并且可以很高兴它上线。

我一直在创建自动化工具来存档、配置转换等，然后重新签署客户端应用程序。然后我们意识到单击一次会创建一个 setup.exe，其中包含需要更新的资源，例如名称将更改，url 更改。

我正在尝试找到一种方法来获取此 setup.exe 并以自动 / 命令行 / C# 方式更改资源字符串。

我尝试了 ildasm，但它不会打开它说“错误：setup.exe 没有有效的 CLR 标头并且无法反汇编”

编辑此资源或确保我们可以构建应用程序的通用版本然后针对每个新需求对其进行自定义的任何方式都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:58:28.130

我认为解决您的问题的最佳方法是采取不同的方法。您无法在 Visual Studio 构建的 setup.exe 文件中访问这些资源详细信息（我知道）。但是，ClickOnce 也有一个 .Net API，当您想自己控制更新和安装过程时，您可以使用它来集成到您的应用程序中。

在此处查看有关创建自定义安装程序项目的[MSDN 文章。](http://msdn.microsoft.com/en-us/library/dd997001.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:50:40.637

找到了一种更新 baseurl 和其他一些位的方法：

[http://msdn.microsoft.com/en-us/library/8st7th1x(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/8st7th1x(v=vs.90).aspx)

似乎它知道如何自我更新。从我最初的测试来看，这似乎有效，将尽快对其进行测试。

# php - 使用 HSL 在 php 中着色

> ID：10333952
> 
> 赞同：0
> 
> 时间：2012-04-26T13:00:52.410
> 
> 标签：php, html, css, hsl

我希望能够按顺序为一些字母（碱基）着色。我可以制作一个功能来说“给这个上色”，但我不能说颜色是什么。

我使用内部样式表制作了一些 hsl div，但这似乎不起作用。

```
case 1: /*500-550(Raw Score)*/
    $truecol=<div style="text-color: hsl($col,25%, 100%);">/*input*/</div>
    break;

case 2: //550-600
    $truecol=<div style="text-color: hsl($col,35%, 100%);">/*input*/</div>
    break;
case 3: //600-650
    $truecol=<div style="text-color: hsl($col,45%, 50%);">/*input*/</div>
    break;
case 4: //650-700
    $truecol=<div style="text-color: hsl($col,50%, 100%);">/*input*/</div>
    break;
case 5: //700-750
    $truecol=<div style="text-color: hsl($col,55%, 100%);">/*input*/</div>
    break;
case 6: //750-800
    $truecol=<div style="text-color: hsl($col,60%, 100%);">/*input*/</div>
    break;
case 6: //800-850
    $truecol=<div style="text-color: hsl($col,70%, 100%);">/*input*/</div>
    break;
case 7: //850-900
    $truecol=<div style="text-color: hsl($col,80%, 100%);">/*input*/</div>
    break;
case 8: //900-950
    $truecol=<div style="text-color: hsl($col,90%, 100%);">/*input*/</div>
    break;
case 9: //950-1000
    $truecol=<div style="text-color: hsl($col,100%, 100%);">/*input*/</div>
    break; 
```

我是否必须将 rgb 转换为 hsl 饱和度，然后再转换回十六进制？颜色呈渐变色很重要。这就是我最初使用 HSL 的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:29:21.850

首先，只需查看问题中 PHP 的颜色编码。很明显，你可以看到这是不对的。

将这些 HTML 标记放在一个字符串中。最好使用双引号，只要您正确转义样式属性即可。例子：

```
$truecol = "<div style=\"color: hsl($col,100%,50%);\">...</div>"; 
```

另请注意，我更正了其他两个错误：样式属性是`color`，不是~~`text-color`~~，并且`hsl`对于“正常”颜色，亮度应为 50%。在 100% 时，您只会变白。

# security - REST API 安全的当前智慧状态是什么？

> ID：10333953
> 
> 赞同：4
> 
> 时间：2012-04-26T13:00:57.603
> 
> 标签：security, rest, oauth

我在网络上收到了关于首选 REST API 身份验证/授权机制的混合信号，尤其是对于移动应用程序。

1.  有 OAuth 1.0，但它声称比它需要的更复杂，并且不能很好地支持本机客户端（回调 URL 非常以浏览器为中心）。另一方面，有一个支持它的主要提供商（Twitter）。
2.  然后是 OAuth 2.0，它应该是对 1.0 的改进，它在默认咒语中摆脱了客户端加密（替换为不记名令牌），但有些人认为[它被设计破坏了](http://hueniverse.com/2010/09/oauth-2-0-without-signatures-is-bad-for-the-web/)，并且[不记名令牌并不比 cookie 好](http://hueniverse.com/2010/09/oauth-bearer-tokens-are-a-terrible-idea/)。来自粗略提供商的 SSL 证书可以更容易地欺骗移动客户端，使其相信端点是受信任的权威机构。然而，两个主要的供应商（谷歌和 Facebook）支持它。
3.  还有一些人，他们[主张回避整个混乱并自己动手。](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)

那么它是哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:25:38.513

这听起来像是对冲，但答案是“任何适合您的应用程序”。

像 OAuth 和 OpenID 这样的 3rd 方身份验证系统占有一席之地，它们非常适合某些应用程序，尤其是那些允许客户端成为 API 用户而无需将其个人凭据分叉到另一个服务器系统的系统。

但是，您可能正在构建一个没有该约束或要求的系统，并且要求您的客户简单地在您的服务器上创建一个帐户可能是合理的。在这种情况下，您可能可以通过使用 HTTPS 和 Basic Auth 大大简化事情。让客户端在适当的标头中传递他们的用户名/密码，并确保您的连接受 SSL 保护。或者，让客户为其凭据使用证书。

我建议您首先列举“安全”对您意味着什么，然后从头开始工作。考虑每个相关方面，例如完整性保证、不可否认性、重放保护、客户端影响、性能和 API 可用性。从那里，确定您是否只需要 HTTPS/基本身份验证，或者您是否还需要添加 API 密钥、OAuth、OpenID、校验和等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:37:13.683

我会推荐 OAuth 2，但会在客户端进行额外的证书检查。如果您的证书来自 Verisign，则使来自其他 CA 的所有证书无效。确保始终在同一个 CA 获得证书，除非您喜欢分发更新。

然而，最后，只有客户端才能验证与服务器的连接是完全安全的。永远别忘了。

# uiwebview - 使用基本身份验证加载 UIWebView 资源

> ID：10333959
> 
> 赞同：4
> 
> 时间：2012-04-26T13:01:07.960
> 
> 标签：uiwebview, basic-authentication, uiwebviewdelegate

对于我正在创建的（网络）应用程序，我需要使用基本身份验证在我的 UIWebView 中加载页面。

现在设置我使用的授权标头：

```
NSString *result = [NSString stringWithFormat:@"%@:%@", username, password];
NSData *resultData = [result dataUsingEncoding:NSASCIIStringEncoding];

NSString *result64 = [NSString stringWithFormat:@"Basic %@", [resultData base64Encoding]];
[request setValue:result64 forHTTPHeaderField:@"Authorization"]; 
```

在我的 apache 访问日志中，我可以看到登录成功。但是随后 UIWebView 想要加载类似的资源`style.css`，`jquery.min.js`但是对这些资源的请求失败，因为它们没有设置授权标头。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T11:35:30.743

解决方案是继承 NSURLProtocol 来验证资源加载：

```
#import <Foundation/Foundation.h>

#import "AuthenticationUtils.h"

@interface CustomURLProtocol : NSURLProtocol <NSURLConnectionDelegate>
{
    NSMutableURLRequest *_customRequest;
    NSURLConnection *_connection;
}

@end

@implementation CustomURLProtocol

static NSString *AUTHORIZED_REQUEST_HEADER = @"X-AUTHORIZED";

+(BOOL) canInitWithRequest:(NSMutableURLRequest *)request
{
    // check if the request is one you want to authorize
    BOOL canInit = (![request.URL.scheme isEqualToString:@"file"] && [request valueForHTTPHeaderField:[AUTHORIZED_REQUEST_HEADER stringByAppendingString:[request.URL absoluteString]]] == nil);
    return canInit;
}

-(id) initWithRequest:(NSURLRequest *)request cachedResponse:(NSCachedURLResponse *)cachedResponse client:(id<NSURLProtocolClient>)client
{        
    _customRequest = [request mutableCopy];
    [_customRequest setValue:@"" forHTTPHeaderField:[AUTHORIZED_REQUEST_HEADER stringByAppendingString:[request.URL absoluteString]]];

    self = [super initWithRequest:_customRequest cachedResponse:cachedResponse client:client];

    return self;
}

+(NSURLRequest *) canonicalRequestForRequest:(NSURLRequest *)request
{
    NSMutableURLRequest *customRequest = [request mutableCopy];
    [customRequest setValue:@"" forHTTPHeaderField:[AUTHORIZED_REQUEST_HEADER stringByAppendingString:[request.URL absoluteString]]];

    NSString *basicAuthentication = [AuthenticationUtils getBasicAuthentication];
    [customRequest setValue:basicAuthentication forHTTPHeaderField:@"Authorization"];

    return customRequest;
}

- (void) startLoading
{
    NSString *basicAuthentication = [AuthenticationUtils getBasicAuthentication];
    [_customRequest setValue:basicAuthentication forHTTPHeaderField:@"Authorization"];

    _connection = [NSURLConnection connectionWithRequest:_customRequest delegate:self];
}

- (void) stopLoading
{
    [_connection cancel];
}

#pragma mark - NSURLConnectionDelegate

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
{
    // This protocol forgets to store cookies, so do it manually
    if([redirectResponse isKindOfClass:[NSHTTPURLResponse class]])
    {
        [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookies:[NSHTTPCookie cookiesWithResponseHeaderFields:[(NSHTTPURLResponse*)redirectResponse allHeaderFields] forURL:[redirectResponse URL]] forURL:[redirectResponse URL] mainDocumentURL:[request mainDocumentURL]];
    }

    [[self client] URLProtocol:self didReceiveResponse:response cacheStoragePolicy:NSURLCacheStorageNotAllowed];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [[self client] URLProtocol:self didLoadData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
{
    [[self client] URLProtocol:self didFailWithError:error];
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
    [[self client] URLProtocolDidFinishLoading:self];
}

-(NSURLRequest *) connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)redirectResponse
{    
    // This protocol forgets to store cookies, so do it manually
    if([redirectResponse isKindOfClass:[NSHTTPURLResponse class]])
    {
        [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookies:[NSHTTPCookie cookiesWithResponseHeaderFields:[(NSHTTPURLResponse*)redirectResponse allHeaderFields] forURL:[redirectResponse URL]] forURL:[redirectResponse URL] mainDocumentURL:[request mainDocumentURL]];
    }

    // copy all headers to the new request
    NSMutableURLRequest *redirect = [request mutableCopy];
    for (NSString *header in [request allHTTPHeaderFields]) 
    {
        [redirect setValue:[[request allHTTPHeaderFields] objectForKey:header] forHTTPHeaderField:header];
    }

    return redirect;
}

@end 
```

在您的 AppDelegate 中添加：

```
[NSURLProtocol registerClass:[CustomURLProtocol class]]; 
```

# php - 如何用魔法棒白垫/边框图像？

> ID：10333960
> 
> 赞同：0
> 
> 时间：2012-04-26T13:01:08.543
> 
> 标签：php, image, imagemagick, magickwand

我有一个 180x240 的图像，我想用白色填充/边框，直到它适合 360x240 的大小，所以图像中的原始内容不会失真。

[http://www.magickwand.org/](http://www.magickwand.org/) - 我在文档中找不到任何提示功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:49:22.913

我不使用 Magickwand，但使用 Imagemagick 有一个名为 extent 的运算符可以满足您的需求。但是我在您链接的文档中看不到任何关于范围的提及。

您可能需要创建一个 360x240 的白色画布并将图像合成到上面。

或者，您可以使用 MagickBorderImage 并将边框高度设置为 0 或 1，宽度设置为 90？

# android - Android 的 Phonegap 限制

> ID：10333961
> 
> 赞同：1
> 
> 时间：2012-04-26T13:01:12.623
> 
> 标签：android, cordova

我想开发一款应该支持视频播放和网络服务调用的 Android/移动应用程序。

我正在寻找跨平台开发，因为这个框架更好。我听说Phonegap 是最好的，但如果我选择Phonegap，我想知道phonegap 的局限性和App 的性能。

请分享你Phoneegap vs Native

你能分享你的想法吗，这对我很有帮助。

谢谢瓦基蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:23:00.383

PhoneGap 使您能够使用 html5、css3 和 javascript 为您的移动设备构建应用程序。在七个不同平台中的任何一个上都很容易上手。查看[http://phonegap.com/start](http://phonegap.com/start)以获取入门的简短教程。

在stackoverflow上也有一个类似的问题，您可能有兴趣阅读它比较存在的不同框架：[Corona、Phonegap、Titanium 之间的比较](https://stackoverflow.com/questions/1482586/comparison-between-corona-phonegap-titanium)

由于PhoneGap使用HTML5，添加视频应该没有任何问题，因此它支持视频标签[Video标签](http://www.w3schools.com/html5/tag_video.asp)

# ruby-on-rails - Heroku 上的“application.css 未预编译”错误，CDN 上有远程资产

> ID：10333965
> 
> 赞同：0
> 
> 时间：2012-04-26T13:01:27.183
> 
> 标签：ruby-on-rails, heroku, rackspace-cloud, fog, cloudfiles

我在 Heroku 上遇到了典型的错误，似乎解决方案是在本地预编译然后提交到 git。

```
ActionView::Template::Error (application.css isn't precompiled) 
```

但是，我使用asset_sync 在Rackspace CloudFiles CDN 上拥有我的资产，并且它们编译得很好，所以我真的不想也必须将编译后的资产提交给git。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T06:09:29.447

before you push your app to heroku run the following.

```
bundle exec rake assets:precompile 
```

That will precompile all the necessary javascript and css.

If you are running the app on your computer after you precompile you will not see any css and js changes until you run.

```
bundle exec rake assets:clean 
```

that will remove all precompiled files, you need to precompile every time you push your app.

# maven - 如何使用 maven-selenium-plugin 定义 user-extensions.js？

> ID：10333966
> 
> 赞同：0
> 
> 时间：2012-04-26T13:01:29.393
> 
> 标签：maven, plugins, selenium

有谁知道如何使用 maven-selenium-plugin 设置默认用户扩展？
我几乎测试了所有东西。我的 user-extensions.js 位于“ **src/test/resources/** ”中，插件始终采用“ **target/selenium** ”中的扩展名...

我试过这个：
<defaultUserExtensionEnabled>true</defaultUserExtensionEnabled>
<defaultUserExtension> **src/test/resources/user-extensions.js** </defaultUserExtension>

这仍然行不通。有人可以帮我使用这些标签吗？
提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:43:51.943

事实上，我认为它有效。请仔细查看 target/selenium/user-extensions.js

userExtensions 参数指定“加载到服务器的 user-extensions.js 的位置。如果 defaultUserExtensionsEnabled 为 true，则此文件将**附加**到默认值。”

但是，如果您不想拥有默认用户扩展名，如果认为您必须设置 false

# image - HTML5 上传前调整图片大小

> ID：10333971
> 
> 赞同：192
> 
> 时间：2012-04-26T13:01:44.073
> 
> 标签：image, html, upload, xmlhttprequest, local-storage

**这是一个面条刮刀。**

**请记住，我们有 HTML5 本地存储和 xhr v2 等等。我想知道是否有人能找到一个可行的例子，甚至只是给我一个是或否这个问题：**

是否可以使用新的本地存储（或其他）预先调整图像大小，以便不知道调整图像大小的用户可以将他们的 10mb 图像拖到我的网站中，它使用新的本地存储调整它的大小和然后以较小的尺寸上传。

我很清楚你可以用 Flash、Java 小程序、active X 来做到这一点……问题是你是否可以用 Javascript + Html5 来做。

期待对此的回应。

塔暂时。

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-04-26T13:13:51.353

是的，使用[File API](https://developer.mozilla.org/en/Using_files_from_web_applications)，然后您可以使用[canvas 元素](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Using_images)处理图像。

[这篇 Mozilla Hacks 博客文章将](http://hacks.mozilla.org/2011/01/how-to-develop-a-html5-image-uploader/)引导您完成大部分过程。以下是博客文章中汇编的源代码供参考：

```
// from an input element
var filesToUpload = input.files;
var file = filesToUpload[0];

var img = document.createElement("img");
var reader = new FileReader();  
reader.onload = function(e) {img.src = e.target.result}
reader.readAsDataURL(file);

var ctx = canvas.getContext("2d");
ctx.drawImage(img, 0, 0);

var MAX_WIDTH = 800;
var MAX_HEIGHT = 600;
var width = img.width;
var height = img.height;

if (width > height) {
  if (width > MAX_WIDTH) {
    height *= MAX_WIDTH / width;
    width = MAX_WIDTH;
  }
} else {
  if (height > MAX_HEIGHT) {
    width *= MAX_HEIGHT / height;
    height = MAX_HEIGHT;
  }
}
canvas.width = width;
canvas.height = height;
var ctx = canvas.getContext("2d");
ctx.drawImage(img, 0, 0, width, height);

var dataurl = canvas.toDataURL("image/png");

//Post dataurl to the server with AJAX 
```

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2014-07-16T08:01:53.297

几年前我解决了这个问题并将我的解决方案上传到 github 作为[https://github.com/rossturner/HTML5-ImageUploader](https://github.com/rossturner/HTML5-ImageUploader)

robertc 的答案使用了[Mozilla Hacks 博客文章](http://hacks.mozilla.org/2011/01/how-to-develop-a-html5-image-uploader/)中提出的解决方案，但是我发现当调整到不是 2:1（或其倍数）的比例时，图像质量非常差。我开始尝试不同的图像大小调整算法，尽管大多数算法最终都很慢，或者质量也不是很好。

最后，我想出了一个我相信执行速度很快并且性能也相当不错的解决方案——因为 Mozilla 解决方案从一个画布复制到另一个画布可以快速工作，并且在 2:1 的比例下不会损失图像质量，给定目标*x*像素宽和*y*像素高，我使用这种画布调整大小的方法，直到图像介于*x*和 2 *x*以及*y*和 2 *y*之间。在这一点上，我然后转向算法图像调整大小，以实现将大小调整到目标大小的最后“步骤”。在尝试了几种不同的算法后，我选择了双线性插值法，该插值法取自不再在线但[可通过 Internet 档案访问的博客](http://web.archive.org/web/20120123142531/http://www.philou.ch/js-bilinear-interpolation.html)，这给出了很好的结果，这是适用的代码：

```
ImageUploader.prototype.scaleImage = function(img, completionCallback) {
    var canvas = document.createElement('canvas');
    canvas.width = img.width;
    canvas.height = img.height;
    canvas.getContext('2d').drawImage(img, 0, 0, canvas.width, canvas.height);

    while (canvas.width >= (2 * this.config.maxWidth)) {
        canvas = this.getHalfScaleCanvas(canvas);
    }

    if (canvas.width > this.config.maxWidth) {
        canvas = this.scaleCanvasWithAlgorithm(canvas);
    }

    var imageData = canvas.toDataURL('image/jpeg', this.config.quality);
    this.performUpload(imageData, completionCallback);
};

ImageUploader.prototype.scaleCanvasWithAlgorithm = function(canvas) {
    var scaledCanvas = document.createElement('canvas');

    var scale = this.config.maxWidth / canvas.width;

    scaledCanvas.width = canvas.width * scale;
    scaledCanvas.height = canvas.height * scale;

    var srcImgData = canvas.getContext('2d').getImageData(0, 0, canvas.width, canvas.height);
    var destImgData = scaledCanvas.getContext('2d').createImageData(scaledCanvas.width, scaledCanvas.height);

    this.applyBilinearInterpolation(srcImgData, destImgData, scale);

    scaledCanvas.getContext('2d').putImageData(destImgData, 0, 0);

    return scaledCanvas;
};

ImageUploader.prototype.getHalfScaleCanvas = function(canvas) {
    var halfCanvas = document.createElement('canvas');
    halfCanvas.width = canvas.width / 2;
    halfCanvas.height = canvas.height / 2;

    halfCanvas.getContext('2d').drawImage(canvas, 0, 0, halfCanvas.width, halfCanvas.height);

    return halfCanvas;
};

ImageUploader.prototype.applyBilinearInterpolation = function(srcCanvasData, destCanvasData, scale) {
    function inner(f00, f10, f01, f11, x, y) {
        var un_x = 1.0 - x;
        var un_y = 1.0 - y;
        return (f00 * un_x * un_y + f10 * x * un_y + f01 * un_x * y + f11 * x * y);
    }
    var i, j;
    var iyv, iy0, iy1, ixv, ix0, ix1;
    var idxD, idxS00, idxS10, idxS01, idxS11;
    var dx, dy;
    var r, g, b, a;
    for (i = 0; i < destCanvasData.height; ++i) {
        iyv = i / scale;
        iy0 = Math.floor(iyv);
        // Math.ceil can go over bounds
        iy1 = (Math.ceil(iyv) > (srcCanvasData.height - 1) ? (srcCanvasData.height - 1) : Math.ceil(iyv));
        for (j = 0; j < destCanvasData.width; ++j) {
            ixv = j / scale;
            ix0 = Math.floor(ixv);
            // Math.ceil can go over bounds
            ix1 = (Math.ceil(ixv) > (srcCanvasData.width - 1) ? (srcCanvasData.width - 1) : Math.ceil(ixv));
            idxD = (j + destCanvasData.width * i) * 4;
            // matrix to vector indices
            idxS00 = (ix0 + srcCanvasData.width * iy0) * 4;
            idxS10 = (ix1 + srcCanvasData.width * iy0) * 4;
            idxS01 = (ix0 + srcCanvasData.width * iy1) * 4;
            idxS11 = (ix1 + srcCanvasData.width * iy1) * 4;
            // overall coordinates to unit square
            dx = ixv - ix0;
            dy = iyv - iy0;
            // I let the r, g, b, a on purpose for debugging
            r = inner(srcCanvasData.data[idxS00], srcCanvasData.data[idxS10], srcCanvasData.data[idxS01], srcCanvasData.data[idxS11], dx, dy);
            destCanvasData.data[idxD] = r;

            g = inner(srcCanvasData.data[idxS00 + 1], srcCanvasData.data[idxS10 + 1], srcCanvasData.data[idxS01 + 1], srcCanvasData.data[idxS11 + 1], dx, dy);
            destCanvasData.data[idxD + 1] = g;

            b = inner(srcCanvasData.data[idxS00 + 2], srcCanvasData.data[idxS10 + 2], srcCanvasData.data[idxS01 + 2], srcCanvasData.data[idxS11 + 2], dx, dy);
            destCanvasData.data[idxD + 2] = b;

            a = inner(srcCanvasData.data[idxS00 + 3], srcCanvasData.data[idxS10 + 3], srcCanvasData.data[idxS01 + 3], srcCanvasData.data[idxS11 + 3], dx, dy);
            destCanvasData.data[idxD + 3] = a;
        }
    }
}; 
```

这会将图像缩小到 的宽度`config.maxWidth`，同时保持原始纵横比。在开发时，除了主要的桌面浏览器（IE9+、Firefox、Chrome）之外，它还可以在 iPad/iPhone Safari 上运行，所以我预计它仍然可以兼容，因为现在 HTML5 得到了更广泛的采用。请注意，canvas.toDataURL() 调用采用 mime 类型和图像质量，这将允许您控制质量和输出文件格式（如果您愿意，可能与输入不同）。

这没有涉及的唯一一点是维护方向信息，在不知道此元数据的情况下，图像被调整大小并按原样保存，丢失图像中用于方向的任何元数据，这意味着在平板设备上拍摄的图像“倒置”是这样渲染，尽管它们会在设备的相机取景器中翻转。如果这是一个问题，[这篇博文](http://chariotsolutions.com/blog/post/take-and-manipulate-photo-with-web-page/)有一个很好的指南和代码示例，说明如何完成此操作，我确信可以将其集成到上述代码中。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2014-07-15T11:21:33.990

更正上图：

```
<img src="" id="image">
<input id="input" type="file" onchange="handleFiles()">
<script>

function handleFiles()
{
    var filesToUpload = document.getElementById('input').files;
    var file = filesToUpload[0];

    // Create an image
    var img = document.createElement("img");
    // Create a file reader
    var reader = new FileReader();
    // Set the image once loaded into file reader
    reader.onload = function(e)
    {
        img.src = e.target.result;

        var canvas = document.createElement("canvas");
        //var canvas = $("<canvas>", {"id":"testing"})[0];
        var ctx = canvas.getContext("2d");
        ctx.drawImage(img, 0, 0);

        var MAX_WIDTH = 400;
        var MAX_HEIGHT = 300;
        var width = img.width;
        var height = img.height;

        if (width > height) {
          if (width > MAX_WIDTH) {
            height *= MAX_WIDTH / width;
            width = MAX_WIDTH;
          }
        } else {
          if (height > MAX_HEIGHT) {
            width *= MAX_HEIGHT / height;
            height = MAX_HEIGHT;
          }
        }
        canvas.width = width;
        canvas.height = height;
        var ctx = canvas.getContext("2d");
        ctx.drawImage(img, 0, 0, width, height);

        var dataurl = canvas.toDataURL("image/png");
        document.getElementById('image').src = dataurl;     
    }
    // Load files into file reader
    reader.readAsDataURL(file);

    // Post the data
    /*
    var fd = new FormData();
    fd.append("name", "some_filename.jpg");
    fd.append("image", dataurl);
    fd.append("info", "lah_de_dah");
    */
}</script> 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-09-16T17:34:11.060

[贾斯汀对答案的](https://stackoverflow.com/a/24756889/3536236)修改对我有用：

1.  添加了 img.onload
2.  用一个真实的例子展开 POST 请求

```
 function handleFiles()
{
    var dataurl = null;
    var filesToUpload = document.getElementById('photo').files;
    var file = filesToUpload[0];

    // Create an image
    var img = document.createElement("img");
    // Create a file reader
    var reader = new FileReader();
    // Set the image once loaded into file reader
    reader.onload = function(e)
    {
        img.src = e.target.result;

        img.onload = function () {
            var canvas = document.createElement("canvas");
            var ctx = canvas.getContext("2d");
            ctx.drawImage(img, 0, 0);

            var MAX_WIDTH = 800;
            var MAX_HEIGHT = 600;
            var width = img.width;
            var height = img.height;

            if (width > height) {
              if (width > MAX_WIDTH) {
                height *= MAX_WIDTH / width;
                width = MAX_WIDTH;
              }
            } else {
              if (height > MAX_HEIGHT) {
                width *= MAX_HEIGHT / height;
                height = MAX_HEIGHT;
              }
            }
            canvas.width = width;
            canvas.height = height;
            var ctx = canvas.getContext("2d");
            ctx.drawImage(img, 0, 0, width, height);

            dataurl = canvas.toDataURL("image/jpeg");

            // Post the data
            var fd = new FormData();
            fd.append("name", "some_filename.jpg");
            fd.append("image", dataurl);
            fd.append("info", "lah_de_dah");
            $.ajax({
                url: '/ajax_photo',
                data: fd,
                cache: false,
                contentType: false,
                processData: false,
                type: 'POST',
                success: function(data){
                    $('#form_photo')[0].reset();
                    location.reload();
                }
            });
        } // img.onload
    }
    // Load files into file reader
    reader.readAsDataURL(file);
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-12-15T05:33:49.837

如果你不想重新发明轮子，你可以试试[plupload.com](http://www.plupload.com)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-08-13T18:48:02.120

打字稿

```
async resizeImg(file: Blob): Promise<Blob> {
    let img = document.createElement("img");
    img.src = await new Promise<any>(resolve => {
        let reader = new FileReader();
        reader.onload = (e: any) => resolve(e.target.result);
        reader.readAsDataURL(file);
    });
    await new Promise(resolve => img.onload = resolve)
    let canvas = document.createElement("canvas");
    let ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0);
    let MAX_WIDTH = 1000;
    let MAX_HEIGHT = 1000;
    let width = img.naturalWidth;
    let height = img.naturalHeight;
    if (width > height) {
        if (width > MAX_WIDTH) {
            height *= MAX_WIDTH / width;
            width = MAX_WIDTH;
        }
    } else {
        if (height > MAX_HEIGHT) {
            width *= MAX_HEIGHT / height;
            height = MAX_HEIGHT;
        }
    }
    canvas.width = width;
    canvas.height = height;
    ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0, width, height);
    let result = await new Promise<Blob>(resolve => { canvas.toBlob(resolve, 'image/jpeg', 0.95); });
    return result;
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-01-30T19:51:15.177

接受的答案效果很好，但调整大小逻辑忽略了图像仅在一个轴中大于最大值的情况（例如，高度 > maxHeight 但宽度 <= maxWidth）。

我认为以下代码以更直接和更实用的方式处理所有情况（如果使用纯 JavaScript，请忽略打字稿类型注释）：

```
private scaleDownSize(width: number, height: number, maxWidth: number, maxHeight: number): {width: number, height: number} {
    if (width <= maxWidth && height <= maxHeight)
      return { width, height };
    else if (width / maxWidth > height / maxHeight)
      return { width: maxWidth, height: height * maxWidth / width};
    else
      return { width: width * maxHeight / height, height: maxHeight };
  } 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-03-09T14:41:49.080

```
fd.append("image", dataurl); 
```

这行不通。在 PHP 方面，你不能用这个保存文件。

请改用此代码：

```
var blobBin = atob(dataurl.split(',')[1]);
var array = [];
for(var i = 0; i < blobBin.length; i++) {
  array.push(blobBin.charCodeAt(i));
}
var file = new Blob([new Uint8Array(array)], {type: 'image/png', name: "avatar.png"});

fd.append("image", file); // blob file 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-04-16T19:50:18.560

在画布元素中调整图像大小通常是个坏主意，因为它使用最便宜的插值框。生成的图像质量明显下降。我建议使用[http://nodeca.github.io/pica/demo/](http://nodeca.github.io/pica/demo/)它可以执行 Lanczos 转换。上面的演示页面显示了画布和 Lanczos 方法之间的区别。

它还使用网络工作者并行调整图像大小。还有WEBGL实现。

有一些在线图像调整器使用 pica 来完成这项工作，例如[https://myimageresizer.com](https://myimageresizer.com)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-03-15T12:55:09.983

如果你想使用简单易用的上传管理器和上传前调整大小，你可以使用[dropzone.js 。](http://www.dropzonejs.com)

它具有内置的调整大小功能，但您可以根据需要提供自己的功能。

# javascript - 为什么 Chrome 不显示已选择的 使用后退按钮后的元素？

> ID：10333973
> 
> 赞同：7
> 
> 时间：2012-04-26T13:01:54.077
> 
> 标签：javascript, jquery, html, google-chrome

我有一个`<select>`包含单个`<option>`元素的标签：

```
<select id="someselect">
  <option value="2">B</option>
</select> 
```

单曲`<option>`后来被 jQuery 取代。新的选项列表始终包含旧选项：

```
selected = $('#someselect').val();
$('#someselect').html('<option value="1">A</option><option value="2">B</option>').val(selected); 
```

这按预期工作。然而，当在谷歌浏览器中离开网页然后点击后退按钮时，会发生一些奇怪的事情。选择标签回到了它的初始状态（有意义），但是单个`<option>`元素没有被选中！

Chrome 中这种行为的原因是什么？

我创建了一个最小的工作示例：[http](http://dl.dropbox.com/u/27566470/backdemo.html)
://dl.dropbox.com/u/27566470/backdemo.html 最初只有一个`<option>`. 首先点击“点击”替换选项（但保持选择“B”选项），然后点击“谷歌”导航离开，然后使用 Chrome 的后退按钮查看`<select>`只有一个选项的标签未选中的。

编辑：澄清一下，我对如何解决这个问题不感兴趣。我很好奇为什么 Chrome 会这样工作。使用后退按钮后提供原始（未修改的）DOM 是有道理的，但为什么没有选择唯一的选择选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T07:47:54.623

要回答我自己的问题，这似乎是一个 Chromium 错误。我已经提交了一个目前已确认和分类的错误：[http](http://code.google.com/p/chromium/issues/detail?id=125509)
://code.google.com/p/chromium/issues/detail?id=125509 所以希望这应该在未来得到修复 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:13:33.613

因为每个在文档外部导航的浏览器（# 仍在内部）在导航返回时都会加载服务器缓存版本，也就是说 Chrome 会在您选择一个选项时修改`selected`DOM它再次加载`selected`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T13:09:14.787

因为当使用浏览器后退按钮时，它使用页面的缓存版本，但在您的页面中存在丢失的动态数据，因此浏览器找不到先前选择的值，您可以使用 jQuery 设置它：

```
$(document).ready(function(){
     $('#someselect').val('0');
}); 
```

# c# - 在 Windows Phone 应用程序的 bing 地图中添加自定义地图点/地点/位置和显示方向

> ID：10333976
> 
> 赞同：0
> 
> 时间：2012-04-26T13:02:03.857
> 
> 标签：c#, .net, windows-phone-7, bing-maps

任何人都知道如何在 Bing 地图中添加自定义地图点/位置（不是图钉）并在 Windows Phone 应用程序的自定义点/位置之间显示路线？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T06:54:52.580

您不能将“位置”添加到 Bing 地图 - 位置仅使用纬度/经度坐标标识地球表面上的位置 (http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol .location.aspx) - 因此必应地图已经识别出地球上所有可能的“位置”。

如果您想计算两个位置之间的路线（例如，在 lat/lng 坐标 (37.78,-122.42) 和 (32.716,-117.1617) 之间），您可以向 Bing Maps Routes API 发出请求，如下所示：

[http://dev.virtualearth.net/REST/V1/Routes?wp.0=37.78,-122.42&wp.1=32.716,-117.1617&key=BingMapsKey](http://dev.virtualearth.net/REST/V1/Routes?wp.0=37.78,-122.42&wp.1=32.716,-117.1617&key=BingMapsKey)

您需要将“BingMapsKey”替换为从[http://www.bingmapsportal.com](http://www.bingmapsportal.com)获得的有效密钥。有关使用 Routes API 的更多信息，请访问[http://msdn.microsoft.com/en-us/library/ff701717.aspx](http://msdn.microsoft.com/en-us/library/ff701717.aspx)。获得返回的路线后，循环遍历路点并创建 MapPolyLine 以添加到地图中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T15:41:15.033

记录在案：也许这可以与自定义引脚一起使用：

[http://www.bingmapsportal.com/ISDK/AjaxV7#Pushpins5](http://www.bingmapsportal.com/ISDK/AjaxV7#Pushpins5)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T10:15:10.427

我发现 BING Map DataSource API 可以插入数据并显示相同的路线。

我也参考了下面的链接

[http://www.bingmapsportal.com/ISDK/AjaxV7#VenueMapsModule3](http://www.bingmapsportal.com/ISDK/AjaxV7#VenueMapsModule3)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T16:17:57.593

您可以使用`MapPolyLine`显示位置之间的路线。

如果您想要更详细的答案，那么您将不得不提出更详细的问题。（给我更多关于你想要做什么的细节，我会更新我的答案）

# ruby-on-rails - 在 Rails 路线中使用资源而不是 id 生成永久链接

> ID：10333979
> 
> 赞同：0
> 
> 时间：2012-04-26T13:02:21.013
> 
> 标签：ruby-on-rails, routing

有没有一种简单的方法可以让 rails 路由生成带有永久链接而不是 id 的 url 我的意思是..

```
resources :posts #=> generates urls like posts/12, posts/45/edit, ... 
```

可以在控制器中用作***find(params[:id])***

现在有了

```
def to_param
  self.permalink
end 
```

urls 变成**/posts/what-is-rails, /posts/what-is-rails/edit**，现在要找到带有永久链接的记录，我们仍然需要做

* **find_by_permalink(params[:id])***

现在的问题是，有没有一种更简单的方法来生成带有永久链接的网址

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:20:03.167

使用[FriendlyId](https://github.com/norman/friendly_id) gem，如[#314 Pretty URLs with FriendlyId](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid) Railscast 所示。

# css - CSS3 的目标是前一个元素？

> ID：10333988
> 
> 赞同：0
> 
> 时间：2012-04-26T13:02:51.397
> 
> 标签：css, css-selectors

使用 CSS3 是否可以定位前一个元素？

所以如果我有这个标记：

```
<p>Target Me </p>
<p id="second">Second</p> 
```

像这样的东西会使文本“Target Me”加粗：

```
#id -previous {
   font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:07:02.220

一种解决方案是使用 jQuery。它看起来像

```
$("#second").prev().css('font-weight', 'bold'); 
```

# php - 我的 PHP 条件语句显示 if 和 else 的两个结果，我的代码有什么问题？

> ID：10333990
> 
> 赞同：0
> 
> 时间：2012-04-26T13:03:05.303
> 
> 标签：php, themes, conditional, concrete5

我在 Concrete5 中为我的自定义主题创建了一个条件语句。我的代码目标是切换布局。如果当前页面下有子页面，它会显示一个附加的侧边栏 ( `<div class="grid_3">`) 来列出子页面项目。如果没有子页面，它将显示完整的布局 ( `<div class="grid_13">`)。

不幸的是，我得到了不同的结果。我的条件声明中可能遗漏了一些东西。它不是只显示一种布局，而是呈现两种布局。

下面是我的代码的样子：

```
<? if($c->getNumChildren()) { ?>

<div class="grid_3">
    <?php   
    $bt_sidenav = BlockType::getByHandle('autonav');
    $bt_sidenav->controller->orderBy = 'display_asc';
    $bt_sidenav->controller->displayPages = 'below';
    $bt_sidenav->controller->displaySubPages = 'all';
    $bt_sidenav->render('view');
    ?>
</div>

<div id="main-content-container" class="grid_10">
    <div id="main-content-inner">
        <?php
        $a = new Area('Main');
        $a->display($c);
        ?>          
    </div>  
</div>

<? } else { ?>

<div id="main-content-container" class="grid_13">
    <div id="main-content-inner">
        <?php
        $a = new Area('Main');
        $a->display($c);
        ?>          
    </div>  
</div>

<? } ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:05:13.247

虽然您的 PHP 内容生成部分使用正确的 PHP 标记 ( `<?php … ?>`)，但您的 if/else 语句使用`<? … ?>`通常被禁用的短标记 ( )。

改为使用`<?php`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:11:25.707

尝试这样做可能会解决问题

`<?php if($c->getNumChildren()!='') { ?> ... <?php } else { ?> ... <?php } ?>`

# javascript - 资产管道控制咖啡脚本的关闭

> ID：10333992
> 
> 赞同：0
> 
> 时间：2012-04-26T13:03:15.700
> 
> 标签：javascript, coffeescript, asset-pipeline

我有 2 个简单的咖啡脚本和资产管道。我获得了：

```
(function() {
  window.App.Test_widget = {...}
}).call(this);
(function() {
  $.widget("ui.Test_widget", window.App.Test_widget);
  $(document).ready(function() {...});
}).call(this); 
```

但我想要 1) 合并闭包 2) 添加闭包参数

```
(function($) {
  var App;
  App.Test_widget = {...}
  $.widget("ui.Test_widget", App.Test_widget);
  $(document).ready(function() {...});
})(jQuery); 
```

我不能用谷歌搜索实现这个的方法

UPD：1）我不想将每个文件放在不同的闭包中。我想控制这个 2）如果可能的话，我不想在窗口中放置任何东西

答案很简单：“使用裸选项。对于链轮，请参阅[提交](https://github.com/sstephenson/sprockets/commit/1f87cc9e1c0ceb25b065bd4f94387451b27b2e18)”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:58:13.897

如果您想要对输出进行那种级别的细粒度控制，您将不得不自己编写 JavaScript，而不是让 CoffeeScript 为您完成。作为 CoffeeScript 的倡导者，我这么说：如果你使用它，你必须接受它的某些约定，例如为每个文件提供自己范围的包装器。您失去了连接文件的自由，以便在文件之间共享变量。

然而，值得一提的是

1.  在 CoffeeScript 1.2.0+ 中，仅在必要时添加包装器。至少在您的第一个文件中，情况并非如此。（**编辑：**我错了；这个功能存在于 1.1.3 但在 1.2.0 之前消失了）
2.  写`$ = jQuery`在函数的顶部在语义上等同于命名一个参数并作为该参数的值`$`传入。`jQuery`因此，您只需`$ = jQuery`要将 jQuery 放在每个 CoffeeScript 文件的顶部即可在`noConflict`mode 中使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-26T14:41:37.770

我认为您所描述的是延迟...您想在两次关闭完成后做某事？如果是这样，那么请查看[jQuery 1.5 延迟](http://www.erichynds.com/jquery/using-deferreds-in-jquery/)基础架构。

# java - 在 .NET 中处理 JAXB @XMLIDRef

> ID：10333995
> 
> 赞同：37
> 
> 时间：2012-04-26T13:03:21.907
> 
> 标签：java, .net, web-services, visual-studio, jax-ws

我正在使用 jax-ws 编写 Web 服务。Web 服务的方法之一返回 bean，其中包含对其父级的引用。为了防止循环引用，我在我的 bean 中使用了 JAXB @XMLID 和 @XMLIDRef 注释。

然后我为java客户端生成代理类，一切正常，id解析为对象属性。但后来我在 Visual Studio for .NET 中生成 Web 服务客户端代理，它将 idrefs 解释为字符串属性，而不是对象。

是否可以通过解析 idrefs 从 wsdl 为 .NET 生成代理类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:37:23.530

开箱即用的 Microsoft 工具无法为您完成这项工作。您必须要求 Microsoft 更改

wsdl 生成工具。例如：

*   wsdl.exe： http: [//msdn.microsoft.com/library/7h3ystb6 (VS.80).aspx](http://msdn.microsoft.com/library/7h3ystb6%28VS.80%29.aspx "wsdl.exe")
*   svcutil.exe：http: [//msdn.microsoft.com/en-us/library/aa347733.aspx](http://msdn.microsoft.com/en-us/library/aa347733.aspx "svcutil.exe")

在最近的一个项目中，我必须解决这些工具的缺点，并使用基本脚本修改生成的代码，以修复未按需要的方式生成的内容（在我们的例子中，与 Java 端 wsdl 生成不兼容）

# php - PHP：函数参数的动态默认值

> ID：10333996
> 
> 赞同：4
> 
> 时间：2012-04-26T13:03:22.800
> 
> 标签：php, function, parameters, default

我想将选项保留在 Config 类中，因此在更改（例如）MySQL 数据库时不需要更改几个（相同的）值。到目前为止，我正在访问这些选项，例如：

```
Config::$credentials["mysql"]["username"] 
```

现在，我想为一个函数设置一个“动态”默认值，但 PHP 不会让我做类似的事情

```
public function get_single_db_entry($uid, $table=Config::$credentials["mysql"]["table"]) {
    // logic here...
} 
```

我想知道的是：是否有机会保持默认参数的值动态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:17:38.480

我认为这是不可能的。但是您可以为其呈现静态默认值，并且在第一行中，如果调用者未更改该值，则只需分配动态值。

```
public function get_single_db_entry($uid, $table=0) {
    if $table == 0 
      $table = Config::$credentials["mysql"]["table"]
    // logic here...
} 
```

有点解决方法，但它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-09T10:27:09.750

在这种情况下，您可以使用我的小型库[ValueResolver](https://github.com/LapaLabs/ValueResolver)，例如：

```
$table = ValueResolver::resolve($table, Config::$credentials["mysql"]["table"]); 
```

并且不要忘记使用命名空间`use LapaLabs\ValueResolver\Resolver\ValueResolver;`

还有类型转换的能力，例如如果你的变量的值应该是`integer`，所以使用这个：

```
$id = ValueResolver::toInteger('6 apples', 1); // returns 6
$id = ValueResolver::toInteger('There are no apples', 1); // returns 1 (used default value) 
```

查看[文档](https://github.com/LapaLabs/ValueResolver)以获取更多示例

# oop - 使用 UML 进行正确的类建模

> ID：10333997
> 
> 赞同：0
> 
> 时间：2012-04-26T13:03:28.020
> 
> 标签：oop, class, uml

经过多年的编程，我开始使用 UML，我想确保我正确使用图表中的符号。

下图是否看起来像一个简单的 Car 类的正确表示？

![原始模型](../Images/7e520e6483f9b635167677b08f7b41ae.png)

更新：

实际上，我只是意识到 Make 知道模型，所以我删除了箭头，但是 Make 和 Model 不知道 Car，所以我添加了箭头：

![修正模型](../Images/f32734f5faeac64848b84063f84f3a5a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:27:12.093

I would make some adjustments to your original diagram:

## Make

*   The Make identifies the manufacturer, so Make will have many Models, and because no other manufacturer can take ownership of those models, the black diamond is shown to denote composition
*   The relationship is bidirectionally navigable, so no arrows are shown
*   Because we can navigate from Make to Model, there is a SortedSet (sorted by year) of Models shown in Make

## Model

*   Model holds the only direct relationship to Make; this guarantees the validity of the relationships and avoids incorrect connections that could result from allowing other classes to create relationships with Make
*   Because Model may be used to navigate to Make, Model contains a reference to its Make; this ensures that any Car may navigate to its Model information and from there (and only there) navigate to its Make
*   For year, the immutable type Integer was chosen, because the value will never change once it has been assigned

## Car

*   The relationship between Model and Car is only navigable from Car to Model, because the business domain has no need to obtain a set of all Cars that mere manufactured for any given Model (and it keeps things simpler)
*   Each car is assigned a VIN, shown as an instance of UUID - Universally Unique Identifier
*   The relationship between Car and Engine is only navigable from Car to Engine, so Car has an Engine member; there are use cases where parts of the system that receive a reference to a Car may want to navigate to the Car's Engine

## Engine

*   Given that an Engine may start its life in one Car but then be moved into a different Car, the relationship is shown using a white diamond, denoting aggregation
*   The Engine is assigned a Part Number, which is a specific identifier for that instance of Engine; therefore the immutable type String is shown
*   The Engine maintains a mileage counter, which is defined to be of type: int, because the value is mutable and will change over the lifetime of the Engine

![enter image description here](../Images/80d515dcab929df45a9fdeb4f23bb981.png)

I hope this is helpful and provides some good feedback that makes your modeling exercise thought provoking. I know I had fun creating the diagram and thinking about the relationships and some of the details. Haven't done this in awhile -