# StackOverflow 问答 10701000-10701999

# version - Common Lisp：获取 ASDF 包的版本

> ID：10701004
> 
> 赞同：4
> 
> 时间：2012-05-22T11:19:53.207
> 
> 标签：version, metadata, package, common-lisp, asdf

我知道我可以使用`(asdf:asdf-version)`. 但同样不适用于我使用 ASDF 加载的所有其他包，例如`(my-system:my-system-version)`. 是否有任何编程方式来获取`:version`系统定义中关键字的值？

```
(defsystem my-system
   ...
   :version "0.1"
   ...) 
```

我正在编写一个简单的 HTTP 服务器，并希望在服务器 HTTP 标头中包含版本号。无论如何，任何程序都需要能够在某处打印出其版本号以获取用户信息。当然，我希望只在一个地方定义版本号，因为我可能会忘记在多个地方更新它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T12:28:13.760

```
(slot-value (asdf:find-system 'my-system) 'asdf:version) 
```

# objective-c - 使用 drawRect 时的最佳实践

> ID：10701005
> 
> 赞同：1
> 
> 时间：2012-05-22T11:19:55.733
> 
> 标签：objective-c, uikit, core-graphics

我最近开始创建自己的控件，但我似乎有点难以理解应该如何使用 drawRect。

基本上我有3个问题。

1.  有条件的drawRect是个好主意吗？IE。基于属性或实例变量的不同绘图代码。

2.  对 drawRect 的绘图进行动画更改的最佳方法是什么？例如，带有动画填充和卸载的燃油表控件。

3.  最后，我看到的使用 drawRect 进行动画制作的示例倾向于使用计时器，这在实践中真的是一个好方法吗？似乎较重的应用程序会遇到该方法的问题。

我想第四个会是，也许，有一个更好的地方来做这种事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:42:50.340

> 有条件的drawRect是个好主意吗？IE。基于属性或实例变量的不同绘图代码。

当然，为什么不呢？如果您的`drawRect:`方法变得笨拙，您可以将其拆分为多个方法，然后`drawRect:`根据视图的属性调用这些方法。例如，您可以使用`drawBackground`,`drawTitle`等方法。

> 对 drawRect 的绘图进行动画更改的最佳方法是什么？例如，带有动画填充和卸载的燃油表控件。

那要看。对于非常小的视图，您可以`setNeedsDisplay`从计时器调用，但对于较大的视图，您经常会遇到这种方法的性能问题。

通过将多个子视图或图层组合成可以使用核心动画（或简化的`UIView`动画方法）进行动画处理的视图，通常可以更好地完成动画更改。

# java - 线程池性能比较：本地 vs 远程

> ID：10701008
> 
> 赞同：1
> 
> 时间：2012-05-22T11:20:19.700
> 
> 标签：java, multithreading, couchdb, threadpool

*   我有 2 台完全相同的机器（COM1 - COM2），都是单核的。
*   两台机器都在运行 couchdb 和 tomcat
*   我的应用程序通过休息请求查询数据库，我实现了一个 10 的线程池来加快进程。每个线程都有自己的数据库实例。

* * *

*   当我将我的应用程序设置为使用带有线程池的本地数据库时（war 文件在 COM1 中，数据库在 COM1 中），30 个查询需要 431.83 毫秒。没有线程池的相同配置需要 823.83 毫秒。
*   但是，当我将其设置为使用带线程池的远程数据库时（战争在 COM1 中，数据库在 COM2 中），30 个查询需要 276.52 毫秒。没有线程池的相同配置需要 960.00 毫秒。

* * *

我的问题是：

1.  为什么我在使用线程池时单核速度增加？
2.  为什么远程数据库配置比本地配置快？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:33:09.633

> 为什么我在使用线程池时单核速度增加？

线程并不总是在 CPU 上做事。有些将从磁盘、网络、内存等读取数据，而其他线程可以同时使用 CPU。如果你有一台浓缩咖啡机和一台牛奶蒸锅，让两个人一起制作卡布奇诺会比让一个人制作更快。

> 为什么远程数据库配置比本地配置快？

如果您的查询是 CPU 密集型的，那么可以想象，手头有两个 CPU 可以获得足够的性能，从而补偿您的网络延迟损失。即，如果您的浓缩咖啡制作需要足够的时间，那么即使您必须爬楼梯，也可以在下一层使用浓缩咖啡机。请注意，如果您只有一个人，那么这样做是没有意义的。这就是为什么你得到 960 毫秒而不是 823 毫秒的设置（即无用的爬楼梯）。

# mysql - phpMyAdmin 转储一个不带引号的 varchar

> ID：10701014
> 
> 赞同：1
> 
> 时间：2012-05-22T11:20:36.410
> 
> 标签：mysql, sql, phpmyadmin

我正在使用 phpMyAdmin 转储一组结果，因为我需要将其导入另一个表中。其中一列是 Varchar(150)。在转储文件中，该列的值不带引号写入，导致尝试导入时出现语法错误。

我怎样才能解决这个问题？

# java - 使用 ID 加载 JPA 实体时卡住，出现 LazyInitializationException

> ID：10701017
> 
> 赞同：1
> 
> 时间：2012-05-22T11:20:56.667
> 
> 标签：java, spring, hibernate, spring-mvc, hibernate-mapping

**我再次陷入以下错误：** 任何人都可以帮助我..?? 我有一个 JPA 实体说 ABC

在那个 ABC 中，id 是 long 数据类型的主键。

现在我正在使用hibernate访问加载这个类，如下所示：

```
ABC abc= (ABC )hibernateTemplate.load(ABC.class, id); 
```

但它给出了错误： **org.hibernate.LazyInitializationException**：无法初始化代理 - 没有会话

我尝试使用调试器，但此时它返回 null（如果我尝试检查它显示的值“java.util.emptystackexception”）

谁能指导我……？？？提前致谢..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:51:08.090

检查 JPA 实体中的任何关系

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T21:04:46.670

你的 hibernateTemplate 是如何被实例化的？

根据文档的正常实例化通常是这样的：

```
@Autowired
public void setSessionFactory(SessionFactory sessionFactory)
{
  hibernateTemplate = new HibernateTemplate(sessionFactory);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:20:14.330

问题解决了...这是由于其他人在数据库中进行了一些更改。因为我使用的是旧的 JPA 实体，并且表列由显示该错误的人更新。

无论如何，感谢 dardo、Christian Kuetbach、jayjay...！！！！

# ruby - Listen Gem 与 FSSM gem 相比——哪个更好？

> ID：10701022
> 
> 赞同：3
> 
> 时间：2012-05-22T11:21:20.133
> 
> 标签：ruby, rubygems, sass, compass-sass

刚刚阅读了 sass[更改日志](http://sass-lang.com/docs/yardoc/file.SASS_CHANGELOG.html)，发现[FSSM](http://rubygems.org/gems/fssm)（用于指南针监视任务的 gem）已被替换为[Listen](http://rubygems.org/gems/listen)

我试图谷歌找出原因，但找不到确切的原因。截至今天，总下载量`FSSM`远大于`Listen`. 此外，据我所知（如果我错了，请纠正我）如果不支持类似 inotify 的事件，FSSM 会优雅地降级以进行轮询。听没有。

那么，如果我想在我的脚本中使用文件系统事件，有人可以解释使用 Listen gem 而不是 FSSM 的原因是什么？

**UPD：** 哈哈，在更新 FSSM 并尝试调用它后，我从 FSSM 收到以下消息：

> 亲爱的在您的项目中使用 FSSM 的开发人员，此时 FSSM 基本上已经死了。新的共享警卫/监听项目将进一步发展。如果您需要帮助过渡，请告诉我们！^_^b - 特拉维斯·蒂利

所以看起来像是 FSSM 创作者的决定。然而，这并不能消除我的问题——FSSM 出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T22:45:05.733

[本](https://github.com/chriseppstein/compass/issues/491)指南针问题中讨论了该开关。目前，多个核心 Guard 开发人员似乎比[FSSM更积极地维护](https://github.com/ttilley/fssm)[Listen](https://github.com/guard/listen)。如果警告消息来自@ttilley（谁是 FSSM 的作者），则可以进一步证明这一点。

运行时我也收到了 FSSM 警告消息`compass watch somefile.css.scss`（使用 compass 0.12.2）。这似乎只是转向聆听的[即将到来的吸引力](http://groups.google.com/group/compass-users/browse_thread/thread/ee9c445464bd653c)，似乎还没有[发生](http://compass-style.org/CHANGELOG/)。

根据当前的 Listen 文档，如果操作系统适配器无法确定文件是否已更改，则它太优雅地降级为轮询。

# android - 检查位图是否为空

> ID：10701023
> 
> 赞同：2
> 
> 时间：2012-05-22T11:21:25.187
> 
> 标签：android, xamarin.android

```
Bitmap bmp;
bmp = (Android.Graphics.Bitmap)data.Extras.Get("data");
CallToFunction (bmp); 
```

使用 Bitmap 调用函数。

```
private void CallToFunction(Bitmap bmp)
    {
       if(bmp)
         {
         }
    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-22T11:22:13.610

```
private void CallToFunction(Bitmap bmp)
{
       if (bmp != null)
       {
       }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T11:28:59.240

这里没有太多可以继续的，但是我怀疑当你对“数据”可能为空的位图进行隐式转换时，你得到了一个空引用异常？

在转换为位图之前检查数据是否为空。

```
var data = data.Extras.Get("data");
if(data != null){

    CallToFunction ((Android.Graphics.Bitmap)data);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T11:30:41.077

您可以通过

```
if(data.Extras.Get("data")!=null && data.Extras.Get("data") instanceOf Bitmap){
     CallToFunction ((Android.Graphics.Bitmap)data.Extras.Get("data"));
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T11:26:10.537

您可以使用以下方法检查位图是否不为空，然后调用该方法，否则将不调用该方法。

```
 Bitmap bmp;
       bmp = (Android.Graphics.Bitmap)data.Extras.Get("data");
       if (bmp != null)
       {
         CallToFunction (bmp);
       } 
```

# linux - 将输入数据组织为 3D 配置

> ID：10701025
> 
> 赞同：2
> 
> 时间：2012-05-22T11:21:27.463
> 
> 标签：linux, bash, shell, ubuntu

我来自“file.txt”的输入数据如下（提取样本）：

```
245.214
188.936
195.758
194.939
194.242
188.936
  ... 
```

但是，我使用的软件需要将数据组织为 3D 配置

```
245.214 188.936 195.758
194.939 194.242 188.936
.... 
```

转换输入数据的最简单方法是什么？我使用 Ubuntu Linux。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:30:36.433

您可以使用[列](http://www.manpagez.com/man/1/column/)命令：

```
cat file.txt | column -c 28 -s "\ " 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:28:13.933

```
$ xargs -n3 < file.txt mycommand 
```

或者，如果您在另一个文本文件中需要它：

```
$ xargs -n3 < file.txt > foo.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T11:26:05.777

我可以使用此代码获得所需的输出

```
awk '{if(NR%3 == 0){printf("%s\n",$0);}else{printf("%s ",$0);}}' ip_file.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T14:38:38.793

使用纯 Bash：

```
printf '%7.3f %7.3f %7.3f\n' $(<file.txt) 
```

# php - setCredentialTreatment 如何在 Zend 框架中工作

> ID：10701026
> 
> 赞同：1
> 
> 时间：2012-05-22T11:21:29.920
> 
> 标签：php, zend-framework

谁能告诉我以下语句的用途以及它在 Zend Framework 中的工作原理？

> setCredentialTreatment('SHA1(CONCAT(?, `salt`))');

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T11:49:18.110

`setCredentialTreatment`告诉身份验证适配器如何检查用户提供的密码与数据库中的密码（或再次检查的任何密码）。在您的示例中， the`?`是表示密码的占位符，并且`CONCAT()`和`SHA1()`都是数据库函数。所以这个例子会将盐附加到用户输入的密码中，然后使用 SHA1 对它们进行哈希处理。

这将产生一个类似于以下内容的数据库查询：

> SELECT id FROM users WHERE email = 'user@example.com' AND password = SHA1(CONCAT('password',salt))

您用于`setCredentialTreatment()`更改密码的检查方式。例如，如果您的密码只是直接的 MD5 哈希，则您可以改用：

```
setCredentialTreatment('MD5(?)'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T12:13:31.650

试试这样：

```
 $auth = Zend_Auth::getInstance();
            $authAdapter = new Zend_Auth_Adapter_DbTable(
                Zend_Db_Table::getDefaultAdapter(),
                'users',
                'username',
                'password',
                "CONCAT('$this->_salt', sha(?))"
            );
            $authAdapter->setIdentity($username)
                ->setCredential($password); 
```

# url - 无法完全强制浏览器缓存资源——gsCacheBuster进来了

> ID：10701031
> 
> 赞同：0
> 
> 时间：2012-05-22T11:21:49.483
> 
> 标签：url, caching, http-headers, browser-cache

适当的缓存对我们来说非常重要，因为我们的目标是减少流量。我已经为资源配置了通信：

这是请求网址：

```
http://www.mydomain.com/resources/product/assets/swf/modules/loader.swf?ver=1 
```

这些是响应标头：

```
Accept-Ranges:bytes
Connection:Keep-Alive
Content-Length:14622
Content-Type:application/x-shockwave-flash
Date:Tue, 22 May 2012 09:16:41 GMT
ETag:"7804f-391e-4c08e046d3ec0"
Keep-Alive:timeout=15, max=96
Last-Modified:Mon, 21 May 2012 16:01:39 GMT
P3P:CP="HONK"
Server:Apache 
```

我需要强制浏览器缓存我传回的资源。据我所知，这些标头应该足以缓存资源。但...

***对于一些资源，一个奇怪的东西，叫做 gsCacheBuster，进来了：***

请求网址：

```
http://www.mydomain.com/resources/product/assets/images/image1.png
?gsCacheBusterID=1337684498911&purpose=audit&ver=1 
```

这会更改 URL，因此不会缓存资源。

如您所见，我们已经在客户端（在这种情况下是 Flash）中实现了功能，以在请求中传递一个***ver***参数，以确保正在下载当前版本。通过这种方式，我们旨在维护资源的版本控制并强制浏览器缓存具有相同版本的资源。

我不知道为什么这个 cacheBuster 会出现并且找不到任何信息。它发生在所有浏览器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:25:10.030

事实证明它是一个 LoaderMax 属性，因为我们在 Flash 客户端中使用了 Greensock 库。可以通过将 setter noCache 设置为 false 来禁用它，也可以删除审计。

# google-maps - 谷歌地图 API 密钥不起作用

> ID：10701034
> 
> 赞同：0
> 
> 时间：2012-05-22T11:21:56.777
> 
> 标签：google-maps, google-maps-api-3

我按照谷歌的指示：

登录，进入 API 控制台，激活 JSv3（和 2）地图 API，进入访问部分，请求一个新密钥，使用他们的“hello world”代码，使用我的密钥而不是示例中的密钥，然后工作，整整 3 秒。然后我收到带有以下消息的警报：

*Google 已禁用此应用程序的 Maps API。提供的密钥不是有效的 Google API 密钥，或者未授权用于本网站上的 Google Maps Javascript API v2。*

代码如下。我究竟做错了什么？

```
<script src="//maps.google.com/maps?file=api&amp;v=2&amp;key=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
        type="text/javascript"></script>

<script type="text/javascript">
function initialize() {
  if (GBrowserIsCompatible()) {
    var map = new GMap2(document.getElementById("map_canvas"));
    map.setCenter(new GLatLng(37.4419, -122.1419), 13);
    GEvent.addListener(map, "click", function() {
      alert("You clicked the map.");
     });
  }
}  
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:51:48.340

根据 Sean 的上述建议 - 我调用的是 api 的 v2，而不是 v3，v2 正在/已经被弃用，所以这可能是问题所在。

# asp.net - 如果网站所有者窃取了支付网关信息，那么使用支付网关是否安全？

> ID：10701038
> 
> 赞同：0
> 
> 时间：2012-05-22T11:22:08.063
> 
> 标签：asp.net, authorize.net

我正在集成支付网关；这是我第一次将支付网关功能集成到我的系统中，我使用 Authorised.Net 作为支付网关。

由于我已成功集成它，但我看到用户必须输入以下值才能购买他的商品，并返回交易 ID。

```
 //post_values.Add("x_card_num", "4111111111111111");
    //post_values.Add("x_card_num", CreditCard);
    //post_values.Add("x_exp_date", "0115");
    ////post_values.Add("x_amount", "19.99");
    ////post_values.Add("x_amount", );
    ////post_values.Add("x_description", "Sample Transaction");
    //post_values.Add("x_amount", txtAmout.Text);

    //post_values.Add("x_description", txtDesc.Text);

    ////post_values.Add("x_first_name", "John");
    ////post_values.Add("x_last_name", "Doe");
    ////post_values.Add("x_address", "1234 Street");
    ////post_values.Add("x_state", "WA");
    ////post_values.Add("x_zip", "98004");
    //post_values.Add("x_first_name", txtFName.Text);
    //post_values.Add("x_last_name", txtFName.Text);
    //post_values.Add("x_address", txtAddr.Text);
    //post_values.Add("x_state", txtState.Text);
    //post_values.Add("x_zip", txtZip.Text); 
```

这些值只是固定他的交易和购买项目，所以我的困惑是，如果网站所有者将所有这些信息放入他的数据库并使用他的详细信息进行更多交易，那会怎样？它是安全可靠的，还是发生了我无法弄清楚的其他事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:38:00.967

以下是一些需要遵循的基本准则：

1.  将所有信息保留在您的数据库中，除了信用卡号。除非您认为您的加密系统是安全的，否则切勿保留信用号码。
2.  存储 Authorize.net 成功或失败的交易
3.  您需要创建一个事务表，您将为每个事务创建一个新行，无论是同一用户或事务结果。
4.  加密交易的某些部分：地址是加密的好东西。如果您被黑客入侵，这将避免身份盗用。
5.  确保所有用户密码都经过哈希处理
6.  存储加密的网站数据库连接
7.  仅使用存储过程与数据库通信。如果存储过程构建正确，这应该可以避免 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:31:34.167

就是这样，网站所有者可以将所有信息放入他的数据库中，如果网站上存在交易模式，这就是为什么我和我认为大多数其他人要么从受信任的站点或重定向到某些受信任网关的站点进行交易像 paypal 或 authorize.net 进行金融交易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T11:43:58.020

感谢您的澄清。我目前正在开发一个以同样方式使用 PayPal 的项目。我们**仅**将授权代码和交易 ID 存储在我们的数据库中。

在我看来，用户将通过存储他们的信息来节省 30 秒左右的时间不值得与存储他们的信息相关的风险。如果您正在进行重复交易，供应商将为您安全地存储信息（至少 PayPal 会这样做），因此没有真正的理由将信用卡信息存储在您的系统中。

[编辑] 正如 Imran 指出的那样，存储该号码的最后 4 位数字可以很好地显示在报告上。

除了联系您的信用卡公司并报告欺诈性费用之外，如果数据库所有者正在存储这些信息，您无法阻止他们滥用这些信息。支付网关不知道是谁在输入支付细节，除了确保交易来自他们的授权客户之一（即，被授权使用支付网关的客户）。

# directx - VirtualSurfaceImageSource 的闪烁问题

> ID：10701043
> 
> 赞同：0
> 
> 时间：2012-05-22T11:22:21.883
> 
> 标签：directx, windows-8, windows-runtime, direct3d, direct2d

我正在考虑在我的应用程序中使用[VirtualSurfaceImageSource](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.virtualsurfaceimagesource.aspx)，并且我已经实现了类似于[Direct2D 杂志应用示例](http://code.msdn.microsoft.com/windowsapps/Magazine-Sample-2a657289)的东西，但是当虚拟表面比显示区域大几倍时，我遇到了一个问题。

基本上，我有一个水平滚动`ScrollViewer`，其中包含一个`Image`. 图像的来源是宽的`VirtualSurfaceImageSource`（至少 ~10000 x 500 像素）。的宽度`ScrollViewer`为 1280 像素。

当我通过触摸平移滚动滚动查看器时，图像有时会闪烁 - 图像的一部分消失，然后重新绘制。这通常发生在惯性滚动停止时。图像在滚动到视图时已经完全绘制，但由于某种原因它被清除并被`IVirtualSurfaceUpdatesCallbackNative::UpdatesNeeded()`调用。

**我上传[了一个说明问题的视频](http://www.youtube.com/watch?v=9ShSMgWnZvE)**。观察滚动停止时会发生什么（在 0:02、0:17 等...）

**任何想法为什么会发生这种情况？**

我还注意到，如果图像宽度约为 5000 像素或更小，则不会发生闪烁。

* * *

如果您想重现此内容，请从[Direct2D 杂志应用示例](http://code.msdn.microsoft.com/windowsapps/Magazine-Sample-2a657289)开始，并在 Sample.story 中的`<text name="butterfly-body">`标签下添加更多文本 - 只需将现有文本复制 10 次左右。尝试以不同的速度双向滚动蝴蝶页面，您应该会看到似乎是相同的问题。

*我在[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/24d8d9ea-284e-4524-bbe6-3a0f222c6a5b)上问过这个问题，但到目前为止我还没有得到答案。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:44:57.493

这在 Windows 8 Release Preview 中不再是问题，因此它可能只是 Consumer Preview 中的一个错误。

# c# - 列表框无滚动条

> ID：10701047
> 
> 赞同：0
> 
> 时间：2012-05-22T11:22:38.943
> 
> 标签：c#, wpf, xaml

我一直在互联网上上下寻找，很多人似乎都有这个问题，但它通常通过将容器更改为网格、限制高度等来解决。我似乎无法让它工作。我有一个输入数据模板的 observableCollection。我一辈子都无法让滚动条正常工作。它在那里但没有启用。谢谢斯科特

```
<TabItem Header="select a call" x:Name="TabActiveCalls" Style="{DynamicResource MyTabItem}" FontFamily="QuickType">
            <Grid Margin="0.125,0.412,3.125,0" Height="471" HorizontalAlignment="Stretch">
                <StackPanel Orientation="Horizontal" Width="839.14" HorizontalAlignment="Left" VerticalAlignment="Top" Height="56">
                    <StackPanel Orientation="Vertical" HorizontalAlignment="Left" Margin="0,0,10,0" Width="741.14">
                        <StackPanel Height="28" Orientation="Horizontal" Width="733.14" HorizontalAlignment="Left">
                            <TextBlock x:Name="txtHistoryFound" TextWrapping="Wrap" Text="*" Foreground="#FFE20A0A" Visibility="Collapsed"/>
                            <TextBlock TextWrapping="Wrap" Text="filter by:" Margin="5,0,10,0" Foreground="#FF585AD4" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            <TextBlock TextWrapping="Wrap" Text="call no" Margin="5,0,2,0" VerticalAlignment="Center" Foreground="#FF5E88DA"/>
                            <TextBox Template="{StaticResource TextBoxBaseControlTemplate}" x:Name="searchCallNo" TextChanged="searchCallNo_TextChanged"  TextWrapping="Wrap" Width="67" Foreground="#FF1341B1" TextAlignment="Center" Margin="5,0,10,0" Height="22" VerticalAlignment="Center"  />
                            <TextBlock TextWrapping="Wrap" Text="postcode" Margin="5,0,2,0" VerticalAlignment="Center" Foreground="#FF5E88DA"/>
                            <TextBox Template="{StaticResource TextBoxBaseControlTemplate}" x:Name="searchPostcode" TextWrapping="Wrap" Width="67" Foreground="#FF1341B1" TextAlignment="Center" Margin="5,0,10,0" Height="22" VerticalAlignment="Center"/>
                            <TextBlock Height="23" x:Name="txtSiteName" FontSize="16" Foreground="#FF0E7C0B" Width="409" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="0" TextAlignment="Right" Text="Airedale International Ltd" />
                        </StackPanel>
                        <StackPanel Width="733.14" HorizontalAlignment="Left">
                            <Border Height="21" Margin="5,6,8,0" CornerRadius="3,3,0,0" BorderThickness="1" BorderBrush="#FFC0BABA">
                                <StackPanel Orientation="Horizontal" Background="#FFD0D5DE">
                                    <TextBlock TextWrapping="Wrap" Text="CALL NO. / DATE DUE/ CUSTOMER" Margin="5,0,0,0" Foreground="{DynamicResource ListTitle}" FontSize="10.667" VerticalAlignment="Center"/>
                                    <TextBlock TextWrapping="Wrap" Text="ENGINEER / ADDRESS" Margin="114,0,0,0" Foreground="{DynamicResource ListTitle}" VerticalAlignment="Center"/>
                                    <TextBlock TextWrapping="Wrap" Text="REPORT" Margin="43,0,0,0" Foreground="{DynamicResource ListTitle}" RenderTransformOrigin="2.543,0.429" VerticalAlignment="Center"/>
                                    <TextBlock TextWrapping="Wrap" Text="CALL" Margin="28,0,0,0" Foreground="{DynamicResource ListTitle}" RenderTransformOrigin="2.543,0.429" VerticalAlignment="Center"/>
                                    <TextBlock TextWrapping="Wrap" Text="POSITION" Margin="43,0,0,0" Foreground="{DynamicResource ListTitle}" RenderTransformOrigin="2.543,0.429" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </StackPanel>
                    <Image Height="56" Width="90" Source="/ComfortReportEng;component/Media/Images/comfort_group.png"/>
                </StackPanel>
                    <ListBox ItemTemplate="{StaticResource DataTemplateReportList}" ItemsSource="{Binding Source={StaticResource cvsReportList}}" 
                    Margin="5,56,8,0" MaxHeight="415" Height="415" ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.CanContentScroll="True"/>

            </Grid>
        </TabItem> 
```

非常感谢您回来。这是我的数据模板

```
<DataTemplate x:Key="DataTemplateReportList">
        <Border Margin="0,2,0,0" BorderThickness="1" BorderBrush="#FFA19C9C" CornerRadius="3,3,0,0" Width="810.52" Height="50" >
            <Grid Background="#FF737B89" Height="48" >
                <StackPanel Orientation="Vertical" HorizontalAlignment="Left" Width="274" VerticalAlignment="Top" >
                    <StackPanel Height="23" Orientation="Horizontal" Margin="0">
                        <TextBlock TextWrapping="Wrap" Text="{Binding CallNo, Mode=TwoWay}" Foreground="#FF7DF51E" Margin="5,0,0,0" FontFamily="Verdana"/>
                        <TextBlock TextWrapping="Wrap" Text="{Binding DateDue, Mode=TwoWay, StringFormat=d}" Foreground="White" Margin="5,0,0,0" FontFamily="Verdana"/>
                    </StackPanel>
                    <StackPanel Height="23" Orientation="Horizontal">
                        <TextBlock TextWrapping="Wrap" Text="{Binding CompanyName, Mode=TwoWay}" Foreground="#FFFFEA00" Margin="5,0,0,0" FontFamily="Verdana"/>
                    </StackPanel>
                </StackPanel>
                <StackPanel HorizontalAlignment="Left" Width="456" Orientation="Vertical" Height="46" Margin="274,1,0,1" VerticalAlignment="Top">
                    <StackPanel Height="23" Orientation="Horizontal">
                        <TextBlock TextWrapping="Wrap" Text="{Binding EngineerName, Mode=TwoWay}" Foreground="#FFCAE5C6" Margin="5,0,0,0" FontFamily="Verdana" Width="140"/>
                        <TextBlock TextWrapping="Wrap" Text="{Binding ReportStatus, Mode=TwoWay}" Foreground="#FF7DF51E" Margin="20,0,0,0" FontFamily="Verdana" Width="50"/>
                        <TextBlock TextWrapping="Wrap" Text="{Binding CallStatus, Mode=TwoWay}" Foreground="#FF7DF51E" Margin="20,0,0,0" FontFamily="Verdana" Width="50"/>
                        <TextBlock TextWrapping="Wrap" Text="{Binding Position, Mode=TwoWay}" Foreground="White" Margin="20,0,0,0" FontFamily="Verdana" Width="50"/>
                    </StackPanel>
                    <StackPanel Height="23" Orientation="Horizontal">
                        <TextBlock TextWrapping="Wrap" Text="{Binding Address, Mode=TwoWay}" Foreground="#FFFFEA00" Margin="5,0,0,0" FontFamily="Verdana" Width="483.12"/>

                    </StackPanel>
                </StackPanel>
                <Grid Width="56" HorizontalAlignment="Right" Margin="0,0,12.52,0" VerticalAlignment="Top">
                    <Image Name="imgInfo" Source="/ComfortReportEng;component/Media/Images/Info4.png" Margin="24,8,0,0" Cursor="Hand" MouseLeftButtonDown="imgInfo_MouseLeftButtonDown"/>
                </Grid>
            </Grid>
        </Border>
    </DataTemplate> 
```

一定是个bug。我只有以下..

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="ComfortReportEng.Views.EngineerReport.EngineerReport"
Title="Engineer Report" WindowStartupLocation="CenterScreen" Loaded="Window_Loaded" SizeToContent="WidthAndHeight" >
<Window.Resources>
    <CollectionViewSource x:Key="cvsReportList"/>
</Window.Resources>
    <Grid Margin="0.125,0.412,3.125,0" Height="471">
        <ListBox Margin="23,64,3,0" Width="834.14"  ItemsSource="{Binding Source={StaticResource cvsReportList}}" 
            x:Name="lbReportList" SelectionChanged="lbReportList_SelectionChanged" Background="#FFEEEFE4" />
    </Grid> 
```

和代码是

```
 private void LoadReportList()
    {
        int number = 0;
        List<int> myNumbers = new List<int>();
        while (number < 80)
        {
            myNumbers.Add(number);
            number += 1;
        }
        _cvsReportList = (CollectionViewSource)(this.FindResource("cvsReportList"));
        _cvsReportList.Source = myNumbers;
    } 
```

这是从另一个项目复制过来的。完全糊涂了。请不要担心。这不是逻辑问题。请将此视为没有解决方案的近距离电话。再次干杯斯科特

只是为了给出这个完整性。我不确定为什么会发生这种情况，但就是这样。

```
if (System.Environment.MachineName == "SCOTT-PC")
        {
            this.txtUserName.Text = "Scott Fisher";
            this.txtPassword.Password = "palace";
            //LoginOK();

        }
        else
            Keyboard.Focus(this.txtUserName); 
```

如果我清除对 LoginOK 过程的评论，我将没有滚动条。评论它并且我与登录屏幕交互然后一切都很好。最后是 LoginOK 的代码。if (LoginService.CheckLogin(txtUserName.Text, txtPassword.Password.ToString())) { Helpers.User.ThisUser = this.txtUserName.Text;

```
 EngineerReport.EngineerReport engReport = new EngineerReport.EngineerReport()
                {
                    Owner = Window.GetWindow(this),
                    WindowStartupLocation =
                        System.Windows.WindowStartupLocation.
                        CenterOwner
                };
                this.Hide();
                engReport.ShowDialog();
            }
            else
            {
                this.txtPassword.Password = "";
                this.txtPassword.Focus();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:15:43.130

您能否为您提供 DataTemplate，因为我相信我刚刚设法模拟了您要实现的目标，并且滚动条可见并且从一开始就可以工作。

这是我用于 ListBox 的 DataTemplate 的 xaml：

```
 <ListBox DataContext="{StaticResource MusicData}" ItemsSource="{Binding XPath=Album}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <ListBoxItem>
                    <StackPanel Orientation="Horizontal" >
                        <TextBlock>No.</TextBlock>
                        <TextBlock Text="{Binding XPath=No}"></TextBlock>
                        <TextBlock>Title</TextBlock>
                        <TextBlock Text="{Binding XPath=Title}"></TextBlock>
                    </StackPanel>
                </ListBoxItem>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

希望这可以帮助。

我还发现了一段我不久前使用过的代码，这可能会有所帮助。您可以尝试设置 ItemsPanelTemplate：

```
 <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel>
                <ScrollViewer VerticalScrollBarVisibility="Visible" />
            </StackPanel>
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel> 
```

这将适用于本文所述的任何项目控件：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemcontainerstyle.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemcontainerstyle.aspx)

我可以建议的最后一件事是为 ListBox 创建自己的 ControlTemplate，如下所示：

```
<ListBox.Template>
    <ControlTemplate>
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <ItemsPresenter />
        </ScrollViewer>
    </ControlTemplate>
</ListBox.Template> 
```

# asp.net - 如何将字符串转换为int？

> ID：10701052
> 
> 赞同：-2
> 
> 时间：2012-05-22T11:22:59.507
> 
> 标签：asp.net

如何将字符串转换为 int？我知道使用了 convert.ToInt32。但它失败了。错误是输入字符串的格式不正确。字符串 s1 = "12.00"

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T11:30:07.040

`.`我喜欢小数点分隔符始终是点 ( )的假设。您最好使用[`InvariantCulture`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)，其中包含一个 NumberFormat ，它明确地将点指定为小数分隔符：

```
Convert.ToInt32(Convert.ToDouble("12.00", CultureInfo.InvariantCulture)); 
```

澄清一下：[世界一半使用点，另一半使用逗号](http://en.wikipedia.org/wiki/Decimal_mark)。当我在具有荷兰文化的 PC 上运行它并且未指定 CultureInfo 时，它采用系统默认值（逗号）并返回`1200`，忽略点。

虽然它不会直接影响您的问题，但它的压力还是不够。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T11:25:10.847

*错误是因为字符串是`"12.00"`*

首先将字符串转换为双倍而不是 int

```
int a = Convert.ToInt32(Convert.ToDouble("12.00")); 
```

或者

如果你只想要它的整数部分而不是

```
string s= "12.00";
string[] words = s.Split('.');
int a = Convert.ToInt32(words[0]); 
```

还要检查 SO 上已经回答的线程：[C# Convert String Decimal to Int](https://stackoverflow.com/questions/4975613/c-sharp-convert-string-decimal-to-int)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T11:23:45.450

“12.00”是十进制数，而不是整数。整数没有小数部分。在[`Convert.ToDouble`](http://msdn.microsoft.com/en-us/library/system.convert.todouble.aspx)调用. _`.``Convert.ToInt32`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T11:24:41.443

字符串“12.00”是双/十进制值。使用 Double.Parse() 或 Double.TryParse() 或 Convert.ToDouble()。

# php - 使用 scrollTop 显示滚动的像素

> ID：10701056
> 
> 赞同：0
> 
> 时间：2012-05-22T11:23:11.427
> 
> 标签：php, javascript, jquery, html

我想通过使用 jQuery 中的 scrollTop 方法来显示用户在我的网站中滚动的像素数。我希望像素数出现在一个名为“像素”的类中。

因此我可以

```
<p><span class="pixels"><!--number of pixels here--></span> Pixels Scrolled</p> 
```

我找到了一个网站，它在它的页脚处进行。这正是我想做的！您可以在这里找到该网站[http://chartbeat.com/](http://chartbeat.com/)

虽然我一直在寻找，但似乎无法找到如何去做。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:29:56.617

下次在你问之前再努力一点：

```
$(function(){
  var $w = $(window), display = $(".pixels");

  $w.on("scroll", function(e){
    $display.text($w.scrollTop())
  });
});
​ 
```

[http://jsfiddle.net/Mb45L/2/](http://jsfiddle.net/Mb45L/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:34:28.773

这真的很简单，如下所示：

```
(function(window, document, $, undefined) {
  $(function() {
    var win = $(window),
        ele = $('.pixels');

    win.scroll(function() {
      ele.text(win.scrollTop());
    });
  });
})(window, document, jQuery); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:30:14.667

尝试使用`document.getElementsByTagName("body")[0].scrollTop`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T11:38:45.760

something like this?

```
<html>
 <head>
  <script type="text/javascript" src="jquery-1.6.2.min.js"></script>
 </head>

 <body>
<p><span class="pixels" style="position:fixed"><!--number of pixels here--></span>     Pixels Scrolled</p>
<?php for($x=0;$x<100;$x++) { echo "<br>"; } ?>

<script type="text/javascript">

$(document).ready(function() {
   $(document).scroll(function() {
      $(".pixels")[0].innerHTML = $(document).scrollTop();
   });
});

</script>

 </body>
</html> 
```

# java - 通过编码从字符串创建 uri

> ID：10701059
> 
> 赞同：1
> 
> 时间：2012-05-22T11:23:26.610
> 
> 标签：java, url, uri, encode

我正在解析网页上的一些链接，然后测试这些链接是否存在。我正在将解析的链接字符串转换为 uri，问题是一些链接已经具有如下编码字符：http: [//download.microsoft.com/download/6/3/c/63c1d527-9d7e-4fd6-9867 -fd0632066740/kinect_qsg%20premium_bndl_en-fr-es.pdf](http://download.microsoft.com/download/6/3/c/63c1d527-9d7e-4fd6-9867-fd0632066740/kinect_qsg%20premium_bndl_en-fr-es.pdf)

当通过我下面的代码时，我得到：http: [//download.microsoft.com/download/6/3/c/63c1d527-9d7e-4fd6-9867-fd0632066740/kinect_qsg%2520premium_bndl_en-fr-es.pdf](http://download.microsoft.com/download/6/3/c/63c1d527-9d7e-4fd6-9867-fd0632066740/kinect_qsg%2520premium_bndl_en-fr-es.pdf)

如您所见，它正在对 %20 进行编码。我该如何避免这种情况？我应该先解码我的字符串吗？如果是这样，最好的方法是什么？

```
URL url = null;
        URI uri = null;
        try {
            url = new URL(checkUrl);
        } catch (MalformedURLException e1) {
            e1.printStackTrace();
        }
        try {
            uri = new URI(url.getProtocol(), url.getAuthority(), url.getPath(), url.getQuery(), url.getRef());
        } catch (URISyntaxException e1) {
            e1.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:30:28.863

尝试使用 URLDecoder 类，

```
 URL url = null;
        URI uri = null;
        String checkUrl = "http://download.microsoft.com/download/6/3/c/63c1d527-9d7e-4fd6-9867-fd0632066740/kinect_qsg%20premium_bndl_en-fr-es.pdf"; 
        try {
            url = new URL(URLDecoder.decode(checkUrl,"UTF-8"));
        } catch (MalformedURLException e1) {
            e1.printStackTrace();
        } catch (UnsupportedEncodingException e1) {
            e1.printStackTrace();
        }
        try {
            uri = new URI(url.getProtocol(), url.getAuthority(), url.getPath(), url.getQuery(), url.getRef());
            System.out.println(uri.getHost());
        } catch (URISyntaxException e1) {
            e1.printStackTrace();
        } 
```

该类的类路径是 java.net.URLDecoder

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:31:19.087

您可以使用：

```
String decoded = URLDecoder.decode(yorUrl, "UTF-8"); 
```

# android - 在 Textview 之后 EditText 时 Android XML 失败

> ID：10701060
> 
> 赞同：0
> 
> 时间：2012-05-22T11:23:26.953
> 
> 标签：android, xml

我收到错误`TextView cannot be cast to EditText.`

当我更改 XML 的顺序以使 EditText 位于正确的（所需）位置时，就会发生这种情况。

它发生在这一行：

```
 EditText edtPassword = (EditText)findViewById(R.id.EditText03); 
```

我很困惑，因为它们没有任何联系。

```
<EditText
    android:id="@+id/EditText03"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:width="160dip" >

</EditText>
<TextView
    android:id="@+id/TextView03"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="UserName:" >

</TextView>
<TextView
    android:id="@+id/TextView04"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Password:">
</TextView>
// IF I MOVE AN EditText03 Here instead it just crashes. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:07:26.157

> 我认为它有时会发生在 R.java 文件中 TextView 和 EditText 的相同 ID 时

因此，您的代码引用了 R 文件，但按照我上面的描述，它的引用错误。

您应该为项目中的每个视图使用唯一 ID。

或者，如果您的 prj 中的所有视图都有唯一 ID，则清理并运行您的项目。

# c - 为什么这个多线程 C 程序给我分段错误？

> ID：10701065
> 
> 赞同：0
> 
> 时间：2012-05-22T11:23:46.937
> 
> 标签：c, multithreading, segmentation-fault

我的意图是使用多线程转置两个文件。但是下面的程序给了我分段错误。

```
#include   <stdio.h>
#include  <stdlib.h>
#include <pthread.h>
#include  <string.h>

void *a_to_temp( void *filea);
void copyFile( FILE *in, FILE *out );
void *temp_to_b( void *fileb);
void *b_to_a(void *ab);

struct files{
    char a[80];
    char b[80];
} ab;

pthread_mutex_t temptob     = PTHREAD_MUTEX_INITIALIZER;
pthread_mutex_t btoa        = PTHREAD_MUTEX_INITIALIZER;

main(int argc, char **argv)
{
    fprintf(stderr, "in main");

    pthread_t thread1, thread2, thread3;
    strcpy( ab.a, argv[1]);
    strcpy(ab.b, argv[2]);

    int  iret1, iret2, iret3;

    pthread_mutex_lock( &temptob );
    pthread_mutex_lock( &btoa );

    iret1 = pthread_create( &thread1, NULL, a_to_temp, (void*) &argv[1]);

    iret2 = pthread_create( &thread2, NULL, b_to_a, (void*) &ab);

    iret3 = pthread_create( &thread3, NULL, temp_to_b, (void*) &argv[2]);

    pthread_join( thread1, NULL);
    pthread_join( thread2, NULL);
    pthread_join( thread3, NULL);

    exit(0);
}

void *a_to_temp( void *filea) {
    FILE *a = fopen((char *)filea, "r");    
    FILE *f = fopen( "temp", "w");
    copyFile( a , f);
    fclose(f);
    fclose( a); 
    pthread_mutex_unlock( &temptob );
}

void *temp_to_b( void *fileb) {
    pthread_mutex_lock( &temptob );
    FILE *b = fopen((char *)fileb, "r");
    FILE *f = fopen( "temp", "r");
    copyFile( f, b);
    fclose(f);  
    pthread_mutex_unlock( &btoa );
}

void *b_to_a(void *ab) {
    pthread_mutex_lock( &btoa );
    FILE *a = fopen(((struct files *) ab)->a, "w"); //
    FILE *b = fopen(((struct files *) ab)->b, "r");//
    fprintf(stderr, "c files opened");
    copyFile( b, a);
    fclose(a);
    fclose(b);
}

void copyFile( FILE *in, FILE *out) {
    char ch;
    while(!feof(in)) {
        ch = getc(in);  
        if(!feof(in)) putc(ch, out);            
    }
} 
```

我已经通过打印值测试了代码，直到主函数结束。我猜测错误应该在其中一个函数内。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:30:39.643

您的代码的一个问题是您将互斥锁锁定在一个线程中并在另一个不允许的线程中解锁它。

如果您尝试在不拥有它的线程中解锁互斥锁，则可能会导致未定义的行为。

例如，您`pthread_mutex_lock( &temptob );`在主线程中，而`pthread_mutex_unlock( &temptob );`在 a_to_temp 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:34:37.893

您传递`&argv[1]`给`a_to_temp()`函数，它是 a `char **`，然后尝试使用它，就好像它是 a 一样`char *`。`&argv[2]`和`temp_to_b()`函数同上。这不是幸福的秘诀；核心转储是一个相当合理的响应。

`&`最简单的解决方法是放弃`pthread_create()`通话。另一种方法是处理被`char **`调用函数中的 。

注意：这只是修复了由于访问错误数据而导致的核心转储。代码也可能存在算法问题，以确保发生正确的同步。在这里使用线程是否有任何性能提升是值得商榷的。确实，可能没有。但这可能与练习的重点相切，即让线程代码完全正常工作。

* * *

> 你能告诉我如何序列化我的线程。我试图使用似乎没有帮助的互斥锁。

一项是确保您对每个系统调用进行错误检查；目前，您假设一切正常。但是，我认为[Jay](https://stackoverflow.com/users/236222/jay)走在正确的轨道上，“锁定互斥锁的线程也必须解锁它”。您可能需要一两个条件（[`pthread_cond_init()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_cond_init.html)等）来控制对文件的访问，而不是互斥锁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T20:33:20.733

很抱歉介入，但我的印象是，您真正想要实现的不一定是互斥，而是操作的序列化（即：对操作进行*排序*：第一：copy_a_to_temp；第二：copy_b_to_a；第三：copy_temp_to_b）。上面的答案是关于通过同一线程锁定和解锁互斥锁的正确答案。然而，对于排序（或者更准确地说，强制一个线程*等待*另一个线程完成任务）实际上并不是互斥锁的工作，而是监视器/条件变量的工作（或者，以更复杂的方式，一个信号量，因为信号量可以实现监视器）。强制线程（例如，copy_b_to_a*不能*在 copy_a_to_temp 完成其工作之前发生），您应该使用 pthread_cond_wait。请参阅此问题以了解如何使用 pthread_cond_wait 的问题：[我是否被迫使用 pthread_cond_broadcast (over pthread_cond_signal) 以保证 *my* 线程被唤醒？](https://stackoverflow.com/q/10868946/1284631)

# javascript - 从 Javascript 和 Java 返回的数组中填充 DropDown

> ID：10701069
> 
> 赞同：0
> 
> 时间：2012-05-22T11:23:51.777
> 
> 标签：javascript, java, dom-events

我在 HTML 中有一个下拉列表，需要使用数据库中的 userId 列表动态填充。因此，我需要在 HTML 页面加载之前执行调用 Java 函数的 JavaScript 函数来查询数据库。由于我需要在页面加载之前执行 JS 函数，因此我在 head 部分中导入了 Javascript (Users.js) 并调用了我的 JS 函数（`findActiveOrganisationsRequest('findActiveOrganisations')`在`atload()`HTML 的 Body 标记中的方法上）。

**Q1。在表单加载之前让该 JS 函数运行以便我可以填充下拉列表的最佳方法是什么？以上会解决问题吗？我的 HTML 是：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 
Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Sample User Registration</title>     
    <script language="javascript" src="js/Users.js"> </script>
</head>

<body atload="findActiveUsersRequest(findActiveUsers)">
    <H2>User Registration</H2>                        
    <div id="userAccessForm" >
 <form name="userAccessForm" id="userAccessForm">
<div id="userAccessResults" style=" width : 364px; float:left;"></div><br>      <table width="100%" border="1px">
<tr><td>    <p>Organisation *<br>
    <select name="UserID" id="UserID">                  <option value="Choose your Organisation" selected>Choose Username</option>
    <option value="1">Dynamically populate User1</option>                   <option value="2">Dynamically populate User2</option>                   <option value="3">Dynamically populate user3</option>                   </select>   </p><td>
<input name="submit" type="submit" id="submit" value="Submit">              <input name="reset" type="reset" id="cancel" value="Cancel">
</td></tr>
<tr><td>
<div id="UserResults" style=" width:353px; float:left;"></div></td></tr>
</table>
</form></body> 
```

**Q2。现在，如何使用 JS 函数返回的列表填充 DropDown。我的Javascript函数如下：**

```
function findActiveUsersRequest(findActiveUsers){
var xmlhttp;
if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
} else {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange = function() {
    var returnText = xmlhttp.responseText;
    document.getElementById("UserResults").innerHTML=returnText;
};

var loadingHtml = "<img border=\"0\" src=\"images/busy.gif\" width=\"50\" /> Active Users Details...";
document.getElementById("UserResults").innerHTML=loadingHtml;
xmlhttp.open("GET","mets?action=users&userAction="+findActiveUsers);    
xmlhttp.send(); 
} 
```

很明显，上述 JS 函数的最后两行发送了一个 HTTP 请求，该请求被 servlet 捕获，然后：

1.  检查 HTTP 请求中的参数，

2.  从数据库中获取结果

3.  创建一个`StringBuffer`数组作为响应，格式为“UserID - UserName”。但我不确定这是不是最好的方法。任何帮助/建议将不胜感激！

4.  按如下方式发送该响应： `sendResponse(response.getWriter(), stringBuffer)`

```
import java.io.PrintWriter;
import java.util.List;
import java.util.Map;
import javax.servlet.http.HttpServletRequest;

public class RequestActionFactory {
@SuppressWarnings("unchecked")
public static Action getAction(HttpServletRequest request) {
    // Retrieve action parameters
    String action = request.getParameter("action");
    String userAction = request.getParameter("UserAction");

              // Validate
    if (action != null) {
        // Event request
        if (action.equals("users")) {
            List<UserIdDTO> userDTOList = getActiveUsers(); //Gets the UserIds from the DB
            StringBuffer[] stringBuffer = new StringBuffer[userDTOList.size()];                         
            for (UserIdDTO userDTO : userDTOList) {
                for(int i=0; i<userDTOList.size(); i++) {
                    stringBuffer[i] = new StringBuffer();
                    stringBuffer[i].append(responseValue(userDTO));
                }
            }           
            sendResponse(response.getWriter(), stringBuffer); 
        } 
    }       
    return null;        
}

private StringBuffer responseValue(UserIdDTO userDTO){
    StringBuffer strBuffer = new StringBuffer();
    strBuffer.append(userDTO.getId());
    strBuffer.append(" - ");
    strBuffer.append(userDTO.getuserName());        
    return strBuffer;
}   

public static void sendResponse(PrintWriter writer, StringBuffer[] stringBuffer) {
    if (stringBuffer != null) {         
            for(int i=0; i<stringBuffer.length; i++) {                  
                if(null!=stringBuffer[i]) {
                    writer.write(stringBuffer[i].toString());
            }   
        } 
    } else {
        // TODO write to log            
    }       
}   
} 
```

一旦 Java Servlet 发送回响应，它就会被上述 JS 函数捕获，如下所示：

```
xmlhttp.onreadystatechange = function() {
    var returnText = xmlhttp.responseText;
    document.getElementById("UserResults").innerHTML=returnText;
}; 
```

因此，我成功地在表单的 UserResults DIV 标记中显示数组：

1 - 约翰·史密斯

2 - 亚当·史密斯

3 - 彼得·史密斯

但是我怎样才能使用这个数组来填充表单中的下拉列表呢？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:34:34.110

要调用你的 js 函数，请使用 jQuery：

```
jQuery(document).ready( function() {
    // You init code here
}); 
```

使用 json 从 java 序列化您的集合并在 javascript 端反序列化它。在java端序列化为json：

```
Collection<YourType> myCollection = ... ;
Gson gson = new Gson();
String json = gson.toJson(myCollection);

// Write json to response 
```

在js方面：

```
var myCollection = JSON.parse(responseText);
for(i = 0l i < myCollection.length; i++) {
    var element = myCollection[i];
} 
```

# javascript - javascript中的正则表达式匹配

> ID：10701073
> 
> 赞同：0
> 
> 时间：2012-05-22T11:23:59.640
> 
> 标签：javascript, regex

我想使用正则表达式匹配 JavaScript 中的以下术语。

```
String = 'abc AND def AND igk AND lmn' 
```

要匹配的词： first 之前和之后的单词`AND`。

例如，在上面的字符串中，匹配部分将是 : `abc AND def`。

我想用 JavaScript 来做。所以我会打电话

```
string.match(/regex to use/) 
```

并将其分配给一个var。

请有任何建议。

编辑：

字符串可以是如下形式：

```
 string = 'AND abc';
    string = 'abc AND';
    string = 'abc def AND igk lmn';
    string = 'abc def AND';
    string = 'AND igk lmn'; 
```

感谢您在这方面的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:27:10.497

你可以试试这个正则表达式：

```
/(\w+\s+AND\s+\w+)/ 
```

**编辑**（在阅读了您的最后一次更新之后）：如果左右术语是可选的，请改用以下正则表达式：

```
/(?: (\w+) \s+)? AND (?: \s+ (\w+))?/x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:22:10.797

对伊戈尔的版本略有改进：

```
 var m = str.match (/(\w+)\s+AND\s+(\w+)/);
   // word before AND in m[1], word after AND in m[2] 
```

自动提取这两个词。

# jsf - 如何呈现的自定义属性 ?

> ID：10701074
> 
> 赞同：2
> 
> 时间：2012-05-22T11:24:07.120
> 
> 标签：jsf, facelets, pinterest

我正在尝试使用如下所示的片段来实现 pinterest 的 pinit 按钮：

```
<h:outputLink value="http://pinterest.com/pin/create/button/" class="pin-it-button" count-layout="horizontal">
   <f:param name="url" value="#{beanOne.someMethod}/sometext{prettyContext.requestURL.toURL()}"/>
   <f:param name="media" value="#{beanOne.someOtherMethod}/sometext/somemoretext/#{beanTwo.someMethodTwo}-some-text.jpg"/>
   <f:param name="description" value="#{beanTwo.someOtherMethodTwo}"/>
   <img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" />
</h:outputLink> 
```

这是陷阱：

*   整个标记是由来自两个不同 bean 的四种不同方法以及一些静态文本的组合创建的
*   url 参数显然需要进行 urlencoded，因此我在 h:outputLink 中使用 f:param 以便它们得到 urlencoded
*   生成的`a`标签需要有非标准`count-layout="horizontal"`属性

**现在我的问题是以下之一：**

*   如何将 count-layout 属性注入 h:outputLink 或生成的锚标记
*   否则，如果我不能，那么另一种非侵入性（我不想更改 bean 方法）方式来完成所需的 pinit 按钮标记是什么？

所需的标记可以在[http://pinterest.com/about/goodies/](http://pinterest.com/about/goodies/)的“网站固定按钮”部分找到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T13:39:39.853

要么使用普通`<a>`元素以及[委托](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function)给[`URLEncoder#encode()`](http://docs.oracle.com/javase/6/docs/api/java/net/URLEncoder.html#encode%28java.lang.String,%20java.lang.String%29).

```
<c:set var="url" value="#{beanOne.someMethod}/sometext#{prettyContext.requestURL.toURL()}"/>
<c:set var="media" value="#{beanOne.someOtherMethod}/sometext/somemoretext/#{beanTwo.someMethodTwo}-some-text.jpg"/>
<c:set var="description" value="#{beanTwo.someOtherMethodTwo}"/>

<a href="http://pinterest.com/pin/create/button/?url=#{utils:encodeURL(url)}&amp;media=#{utils:encodeURL(media)}&amp;description=#{utils:encodeURL(description)}" class="pin-it-button" count-layout="horizontal">
   <img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" />
</a> 
```

*（请注意，该`class`属性对 无效`<h:outputLink>`，您应该使用`styleClass`）*

或者创建一个自定义渲染器，`<h:outputLink>`为其添加对`count-layout`属性的支持。假设您使用的是 Mojarra，最简单的方法是扩展它`OutputLinkRenderer`：

```
public class ExtendedLinkRenderer extends OutputLinkRenderer {

    @Override
    protected void writeCommonLinkAttributes(ResponseWriter writer, UIComponent component) throws IOException {
        super.writeCommonLinkAttributes(writer, component);
        writer.writeAttribute("count-layout", component.getAttributes().get("count-layout"), null);
    }

} 
```

要让它运行，请在以下位置注册它`faces-config.xml`：

```
<render-kit>
    <renderer>
        <component-family>javax.faces.Output</component-family>
        <renderer-type>javax.faces.Link</renderer-type>
        <renderer-class>com.example.ExtendedLinkRenderer</renderer-class>
    </renderer>
</render-kit> 
```

# javascript - Firefox 浏览器不能识别 table.cells 吗？

> ID：10701076
> 
> 赞同：2
> 
> 时间：2012-05-22T11:24:09.370
> 
> 标签：javascript, firefox, cells

我有以下 JavaScript 代码。

* * *

```
var myCellCollection = document.getElementById('myTbl').cells; 
```

* * *

这在 IE 中运行良好，它返回一个表格单元格的集合。但同一行在 Firefox 中返回“未定义”。我正在使用 IE 9 和 Firefox 12。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T11:26:26.447

你应该使用`document.getElementById("myTbl").getElementsByTagName('td')`;

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-19T05:37:01.390

今天在移植旧的 Internet Explorer 应用程序时偶然发现了这一点。

**警告：**
`container.getElementsByTagName('tagname')`返回与查询匹配的*所有*元素。`container``tagname`

因此`table.getElementsByTagName('td')`将返回所有`td`的，*包括*嵌套表的！
但是`table.cells`不这样做（在实施的地方）。

此外，显然，它不会匹配`th`。所以这些单元格不在返回的集合中，可选地导致如何解决它们相对于 td 的顺序的“问题”......

为了填充（*同时*`table.cells`返回并按DOM 顺序返回）的预期功能，我编写了以下简单函数： *`th``td`*

 *```
function tableCells(t){
   if(t.cells) return t.cells; // use internal routine when supported
   for(var a=[], r=t.rows, y=0, c, x; t=r[y++];){
      for(c=t.cells, x=0; t=c[x++]; a.push(t));
   } 
   return a;
} 
```

^(或者，使用 'if-else' 的 'single return' 打包到完全相同的大小*，*但上面的 gzip 更小。PS：我试过`concat`-ting the `table.rows[X].cells`，但这没有用（尽管这样做我觉得不安全）)

**用法示例：**
`var identifier = tableCells( /*reference to table (or thead/tbody/tfoot) here*/ );`
它将返回一个数组（不是实时集合），如`table.cells`.

希望这可以帮助某人*

# php - PHP 会话和 Cookie 被删除？

> ID：10701077
> 
> 赞同：1
> 
> 时间：2012-05-22T11:24:09.757
> 
> 标签：php, cookies

在 Chrome 和 Firefox 上，这会持续大约一个小时，然后会话 cookie 和其他由 javascript 设置的 cookie 消失。我什至没有关闭浏览器。

```
session_set_cookie_params(946080000); // 30 years
session_start();
$_SESSION['login']=true; 
```

走了。会话 cookie 消失了。我认为它不是浏览器的东西，因为它在 Chrome 和 Firefox 上都消失了。我没有在IE上测试。

这是正常行为吗...我确定它没有在某处未设置。

抱歉，我知道我没有提供太多信息，但那是因为没有太多信息可以提供。它应该工作，但它没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:33:32.367

我认为您做错了，如果可能，请更改 php.ini 以反映您要应用的 coockie 持续时间。从 php.net 手册中阅读：

> "设置 php.ini 文件中定义的 cookie 参数。此函数的效果仅在脚本执行期间持续。因此，您需要为每个请求调用 session_set_cookie_params()，并且在调用 session_start() 之前。
> 
> 此函数更新相应 PHP ini 配置键的运行时 ini 值，可以使用 ini_get() 检索。"

这意味着在执行 session_start() 之前，您需要在所有 php 文件中每次都调用它。可能有解决方案的博客文章：http: [//blog.centresource.com/2006/05/23/php-session-lifetime-an-adventure/](http://blog.centresource.com/2006/05/23/php-session-lifetime-an-adventure/)

要更改 PHP ini 中的值，请使用以下行：

```
php_value session.gc_maxlifetime "946080000" 
```

无论如何，最好使用 cookie，会话不会长期使用，而是使用 cookie。

# ruby-on-rails - 使用rvm时在哪里安装Nginx

> ID：10701078
> 
> 赞同：4
> 
> 时间：2012-05-22T11:24:17.650
> 
> 标签：ruby-on-rails, passenger

当我使用 RVM 时，我想在哪里安装 Nginx。它默认为系统版本 1.8.7。我需要它来使用 1.9.3

```
Where do you want to install Nginx to?

Please specify a prefix directory [/opt/nginx]: 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T11:50:52.737

首先，指定您的 ruby​​ 版本。

rvm install 1.9.3 (如果你还没有) rvm use 1.9.3 (--default)

然后你需要：

gem installpassenger cd /your gems dir (例如 ~/.rvm/gems/ruby-1.9.3-p0/gems)/passenger/bin ./passenger-install-nginx-module

目标目录呢？一切由您决定：

*   如果是开发者/学习机 - 建议安装在 ~/nginx

*   如果它类似于“生产” - 为 Web 应用程序创建用户，削减他的权限，为他安装 rvm 和所有 rails 环境，nginx 安装到公共目录 (/opt/nginx) 以同时从多个帐户访问 nginx。

一般规则：RVM 和 Rails（网络应用程序）适用于一位用户 => nginx 可能适用于一位用户。以不同的方式=>全局

# javascript - 在对 facebook api 的异步调用中失去作用域

> ID：10701081
> 
> 赞同：0
> 
> 时间：2012-05-22T11:24:25.270
> 
> 标签：javascript, facebook, facebook-graph-api

```
for (var i = 0; i < friends.length; i++) {
    var friend = $("<li>" + friends[i].name + "</li>");
    FB.api('/' + eventId + '/invited/' + friends[i].id, 'post', {}, function (response) {
        //friend here is the last one created for all callbacks
    });
} 
```

我有一个邀请朋友参加活动的循环，我发现`friend`这里创建的 jquery 对象始终是为所有回调创建的最后一个对象。我假设这是因为 Facebook 调用是异步的。我怎样才能在这里保持范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:32:23.543

您可以为局部变量创建一个闭包：

```
for (var i = 0; i < friends.length; i++) {
  var friend = $("<li>" + friends[i].name + "</li>");

  (function(friend){

    FB.api('/' + eventId + '/invited/' + friends[i].id, 'post', {}, function (response) {
      //friend here is the parameter in the closure, so it's preserved for each item
    });

  })(friend);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:30:19.893

尝试这个：

```
for (var i = 0; i < friends.length; i++) {
    var friend = $("<li>" + friends[i].name + "</li>");
    var callback = (function(friend){
       return function (response) {
          //friend here should be the correct one
       })(friend);
    }
    FB.api('/' + eventId + '/invited/' + friends[i].id, 'post', {}, callback);
} 
```

# jquery - 如何使用 jquery 切换表行，一次切换一行？

> ID：10701084
> 
> 赞同：1
> 
> 时间：2012-05-22T11:24:42.283
> 
> 标签：jquery, toggle, html-table, tablerow

我创建了一个具有切换行的 html 表。但我想要的是当我切换一行时，以前切换的行应该隐藏。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:27:08.287

我假设一个点击事件

```
$('table tr').on('click', function() {
  $('table tr:visible').hide();
  $(this).toggle();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:29:27.473

那这个呢？假设您在点击时执行此操作，那么您可以将最后点击的项目存储到变量中。像这样：

```
var lastClicked;
$("#yourTable tr").on("click", function () {
    if (lastClicked != null) {
        lastClicked.hide();
    }

    $(this).toggle();

    lastClicked = $(this);
}); 
```

# ruby-on-rails - 如何在 select_tag 中的内容旁边获取链接？

> ID：10701085
> 
> 赞同：0
> 
> 时间：2012-05-22T11:24:44.693
> 
> 标签：ruby-on-rails, ruby-on-rails-3

选择标签：-

```
<%=select_tag "names",options_from_collection_for_select(@users,"id","name",@user.id)%> 
```

现在我的下拉列表看起来像这样：-

```
john
matt
sara 
```

但我想拥有它： -

```
 john edit
 matt edit
 sara  edit 
```

其中“编辑”是可以编辑特定用户的链接。但我无法将链接放入 select_tag。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:36:17.587

There's no way to do this in Rails out of the box - this is rather uncommon task. Yet I see two options here:

1.  use solutions like [this](https://stackoverflow.com/questions/2000656/using-href-links-inside-option-tag);
2.  find yourself a suitable jQuery plugin like [this](http://jamielottering.github.com/DropKick/). Most of them will turn the `select` tag into `divs`, which can be further customized.

# asp.net-mvc-3 - MVC 3 的 SignalR 实现

> ID：10701086
> 
> 赞同：3
> 
> 时间：2012-05-22T11:24:51.273
> 
> 标签：asp.net-mvc-3, signalr

我想在我的 mvc 3 项目中使用 SignalR。我有像“basecamp”或“donedone”这样的票证系统，所以当新票证分配给系统中的任何用户时，应该通知这些用户。旧系统应该使用 jquery 计时器，并且每 1 分钟应该检查数据库以查看是否有新票证。

但是当我读到 SignalR 时，我实际上可以在服务器端触发一些触发客户端的东西。但我不知道我是否可以在我的应用程序上实现这一点。例如，我有一个业务层来执行数据库操作。我可以在创建新票证时触发 SignalR Hub。有例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:33:39.740

是的，这确实是可能的。请查看[https://github.com/SignalR/SignalR/wiki/Hubs上标题为“从集线器外部通过集线器进行广播”的部分](https://github.com/SignalR/SignalR/wiki/Hubs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:43:18.763

我还写了一篇关于使用 SignalR 实现与您的要求类似的东西的博客。在我的例子中，对 Web 服务的调用会触发使用更新的统计信息更新特定的客户端浏览器。

[将实时统计数据添加到surveywizz](http://www.woohoo.uk.com/Blog/adding-real-time-statistics-to-surveywizz-using-signalr)

# php - 从 php simple html dom 获取所有标题标签

> ID：10701087
> 
> 赞同：2
> 
> 时间：2012-05-22T11:24:53.733
> 
> 标签：php, simple-html-dom

我正在使用简单的 html dom 进行一些抓取，并想知道是否有一种方法可以一次性获取所有 H 标签的集合 - 即 H1 H2 H3 等...

某种程度的东西

```
$HTags = $html->find("h*"); 
```

然后我还需要确切知道它是哪个标签 -`<H1> <H2>`等等。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T11:28:04.730

你可以做类似的事情

```
foreach($html->find('h1,h2,h3') as $element){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-31T20:34:24.500

试试 $xpath->query

例子：

```
/* The following example finds <h1> and <h2> tags in a html String and sets id to it. The html-code will be printed.*/
$html = "<h2>test2</h2><h1>test1</h1><h3>test3</h3>";
$dom = new DOMDocument();
@$dom->loadHTML($html, LIBXML_HTML_NOIMPLIED | LIBXML_HTML_NODEFDTD);
$xpath = new DOMXpath($dom);
$htags = $xpath->query('//h1 | //h2');
foreach($htags as $htag)
    $htag->setAttribute('id', 'test');

echo htmlentities($dom->saveHTML()); 
```

# ios - ios设置UISlider的开始位置和增量

> ID：10701097
> 
> 赞同：5
> 
> 时间：2012-05-22T11:25:41.723
> 
> 标签：ios, uislider

有谁知道如何设置 a 的起始位置`UISlider`（理想情况下在中间）以及如何以十而不是十递增？

这是我到目前为止所得到的：

```
// Setup custom slider images
UIImage *minImage = [UIImage imageNamed:@"ins_blueTrack.png"];
UIImage *maxImage = [UIImage imageNamed:@"ins_whiteTrack.png"];
UIImage *tumbImage= [UIImage imageNamed:@"slide.png"];

minImage=[minImage stretchableImageWithLeftCapWidth:6.0 topCapHeight:0.0];
maxImage=[maxImage stretchableImageWithLeftCapWidth:6.0 topCapHeight:0.0];

// Setup the  slider
[self.slider setMinimumTrackImage:minImage forState:UIControlStateNormal];
[self.slider setMaximumTrackImage:maxImage forState:UIControlStateNormal];
[self.slider setThumbImage:tumbImage forState:UIControlStateNormal];

self.slider.minimumValue = 10;
self.slider.maximumValue = 180;
self.slider.continuous = YES;

int myVal = self.slider.value;
NSString *timeValue = [[NSString alloc] initWithFormat:@"%1d", myVal];

self.timeLabel.text = timeValue;

// Attach an action to sliding
[self.slider addTarget:self action:@selector(fxSliderAction) forControlEvents:UIControlEventValueChanged]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:02:48.270

**设置滑块位置**

根据您的代码，您可以拥有：

```
self.slider.value = (90); 
```

*`self`注意：当您`IBOutlet`从同一个类中引用时，没有真正的需要。*

如果您想要一种真正动态的方式将 设置`UISlider`为中间标记，您只需将最大值除以 2，即可有效地将其减半：

```
self.slider.value = (self.slider.maximumValue / 2); 
```

**以 10 的倍数递增**

为此，我建议与您目前拥有的略有不同。而不是最小 10 和最大 180，那么最小 1 和最大 18 呢？

```
self.slider.minimumValue = 1;
self.slider.maximumValue = 18; 
```

每次检索滑块的值时，只需将其乘以 10。这样滑块会移动到 18 个不同的位置（如您所愿），并且您总是得到 10 的倍数。

```
int trueSliderValue = self.slider.value * 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:45:53.110

如果您想要 UISlider 的起始位置（最好在中间），那么

```
slider.value = (slider.maximumValue / 2); 
```

如果你想以 10 而不是 1 来增加它，那么你应该有那么多的最大值。现在在滑块值更改方法中检查当前滑块值的地板和天花板，然后将其设置为slider.value = new value

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-15T04:02:46.910

这应该准确地放置 UISlider 的中点，无论使用的是 minimumValue 还是 maximumValue。

```
slider.minimumValue = -10.0
slider.maximumValue = 1000.0
let trueMidPoint = ((slider.maximumValue-0)-(0-slider.minimumValue))/2
slider.value = trueMidPoint 
```

# mysql - 比较两个mysql数据库中的数据

> ID：10701101
> 
> 赞同：1
> 
> 时间：2012-05-22T11:26:18.613
> 
> 标签：mysql, sql, compare, procedure

我有两个mysql数据库。我必须将第一个数据库中一个表的列数据与第二个数据库的列数据进行比较。在这两个数据库中，表名和列名是相同的。我必须找到共同的数据。该列是一个 varchar 字段。但问题是“newyork times”和“times newyork”和“newyork”应该被认为是共同的。我无法生成 sql 查询。这是我尝试过的程序

```
drop procedure if exists test;
delimiter #
create procedure test()
begin

declare v_max int unsigned default 243;
declare v_counter int unsigned default 1;
declare pName varchar(255);

start transaction;
while v_counter < v_max do
select t.property_name from t.property where t.property_id=v_counter into pName;
SELECT distinct b.property.property_name,b.property.property_id from b.property where    b.property.property_name like '%'+pName+'%'
set v_counter=v_counter+1;
end while;
commit;
end #

delimiter ; 
```

是否可以同样进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:58:56.827

不可能告诉 MySQL 进行如此模糊的比较。它不知道以下哪一项应该被认为是“相同的”

*   纽约时报
*   纽约时报
*   吨
*   约克

如果您的“错误”数量有限，则可以在查找中对其进行规范化

```
WHERE t.property_name = REPLACE(v.property_name, 'new york times', 'new york') 
```

但当然，这*很快*就会变得难以管理。

您可以添加一个新列，即使是暂时的？然后，您可以在一组预通行证中对数据进行某种清理。

```
UPDATE t
SET cleanpropertyname = 'new york times' 
WHERE property_name IN ('new york times', 'new york', 'nyt') 
```

# javascript - 正则表达式的 javaScript 文本验证

> ID：10701107
> 
> 赞同：0
> 
> 时间：2012-05-22T11:26:35.853
> 
> 标签：javascript, regex

我需要检查一个字符串是否以`http://`java脚本开头

我所拥有的是

```
if(!txt.match(/^http:/)) {}  // this only works for http: 
```

我需要让它为`http://`

有人可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:30:23.683

或者：

```
txt.substr(0, 7) === "http://" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:27:17.120

你需要转义`\`字符，也为了检查最好使用`test`方法。

```
if(!(/^http:\/\//.test(txt))) {} 
```

# java - 我需要一个基本的简单Java布局方法

> ID：10701109
> 
> 赞同：3
> 
> 时间：2012-05-22T11:26:40.497
> 
> 标签：java, swing, user-interface, layout

我已经在互联网上查看了关于`FlowLayout`等的内容`Group`，所有这些都是无用的示例。我只需要一种基本方法来为我的 Java 应用程序做好布局。我会告诉你我的代码：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.Border;
import javax.swing.border.LineBorder;

public class Test1 {

    //Step1 - Declaring variables
    private static JFrame myFrame;
    private static JPanel myPanel;
    private static JLabel titleLabel=null;
    private static JLabel logIn=null;
    private static JLabel username=null;
    private static JLabel password=null;
    private static JTextField usernameField=null;
    private static JPasswordField passwordField=null;
    private static Color myColor=new Color(0, 102, 204);
    private static Font myFont11=new Font("Tahoma", 1, 11);
    private static Font myFont12bold=new Font("Tahoma", Font.BOLD, 12);
    private static Font myFont11bold=new Font("Tahoma", Font.BOLD, 11);

    //Step2 - Creating Components
    public void createComponents() {

        //Title Label
        titleLabel=new JLabel("My Program");
        titleLabel.setForeground(Color.white);
        titleLabel.setFont(myFont12bold);
        //titleLabel.setVisible(false); //hide it or show it
        //--------------------------------------------------------

        logIn=new JLabel("Log in");
        logIn.setFont(myFont11bold);
        logIn.setForeground(Color.white);
        username=new JLabel("Username");
        username.setLabelFor(usernameField);
        username.setFont(myFont11);
        username.setForeground(Color.white);
        password=new JLabel("Password");
        password.setLabelFor(passwordField);
        password.setFont(myFont11);
        password.setForeground(Color.white);
        usernameField=new JTextField(10);
        usernameField.setBorder(new LineBorder(null, 0, false));
        passwordField=new JPasswordField(10);
        passwordField.setBorder(new LineBorder(null, 0, false));

        //Panel
        myPanel=new JPanel();
        myPanel.setBackground(myColor);
        myPanel.add(titleLabel);       
        myPanel.add(logIn);
        myPanel.add(mySeparator2);
        myPanel.add(username);
        myPanel.add(usernameField);
        myPanel.add(password);
        myPanel.add(passwordField);
        //----------------------------------------------------------

    //Step3 - Main Function
    public static void main(String[] arg) {

        //Frame
        myFrame=new JFrame();

        myFrame.setPreferredSize(new Dimension(400,300));//width:400px, height:300px
        myFrame.setLocationRelativeTo(null);//to show at center of screen
        myFrame.setTitle("My Program");
        Test1 prog=new Test1();
        prog.createComponents();
        myFrame.add(myPanel);
        myFrame.pack();//this alone will not give the frame a size
        myFrame.setVisible(true);
        //----------------------------------------------------------------------

    }

} 
```

这是一个基本的 gui，它有一些标签和一些文本字段，使用 .pack() 方法它们将显示在同一行，我只需要一个简单的小方法来制作一个好的布局

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T11:40:22.607

由于多种原因，代码中的变量过多`static`并不是理想的解决方案。尝试使用不同的方法，除非您不考虑`Factory Class`为您的`Project`. 看看这个修改后的版本，是否足够好：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.Border;
import javax.swing.border.LineBorder;

public class Test1 {

    //Step1 - Declaring variables
    private JFrame myFrame;
    // Added by me
    private JPanel contentPane;
    private JPanel myPanel;
    private JLabel username=null;
    private JLabel password=null;
    private JTextField usernameField=null;
    private JPasswordField passwordField=null;
    private Color myColor=new Color(200, 102, 204);
    private Font myFont11=new Font("Tahoma", 1, 11);
    private Font myFont12bold=new Font("Tahoma", Font.BOLD, 12);
    private Font myFont11bold=new Font("Tahoma", Font.BOLD, 11);

    //Step2 - Creating Components
    public void createComponents() {

        contentPane = new JPanel();
        contentPane.setOpaque(true);
        contentPane.setBackground(Color.WHITE);
        contentPane.setLayout(new GridBagLayout());
        contentPane.setBorder(BorderFactory.createTitledBorder("My Program"));

        username=new JLabel("Username");
        username.setLabelFor(usernameField);
        username.setFont(myFont11);
        username.setForeground(Color.white);
        password=new JLabel("Password");
        password.setLabelFor(passwordField);
        password.setFont(myFont11);
        password.setForeground(Color.white);
        usernameField=new JTextField(10);
        usernameField.setBorder(new LineBorder(null, 0, false));
        passwordField=new JPasswordField(10);
        passwordField.setBorder(new LineBorder(null, 0, false));

        //Panel
        myPanel=new JPanel();
        myPanel.setOpaque(true);
        myPanel.setBorder(BorderFactory.createTitledBorder("Login"));
        myPanel.setBackground(myColor);
        myPanel.setLayout(new GridLayout(2, 2, 2, 2));
        myPanel.add(username);
        myPanel.add(usernameField);
        myPanel.add(password);
        myPanel.add(passwordField);
        //----------------------------------------------------------
        contentPane.add(myPanel);

        myFrame=new JFrame();
        myFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //myFrame.setPreferredSize(new Dimension(400,300));//width:400px, height:300px
        myFrame.setLocationRelativeTo(null);//to show at center of screen
        myFrame.setTitle("My Program");
        //myFrame.add(myPanel);
        myFrame.setContentPane(contentPane);
        myFrame.pack();//this alone will not give the frame a size
        myFrame.setVisible(true);
    }   

    //Step3 - Main Function
    public static void main(String[] arg) {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new Test1().createComponents();
            }
        });
    }

} 
```

这是输出：

![登录窗口](../Images/2c5eb8a452984bebe9c62390558d7f83.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T11:43:59.517

1）您在调试、Java 约定以及打包方法和类方面遇到问题，您遇到了问题

2）添加一个新的花括号

```
 }//add this one

    public static void main(String[] arg) {

    }
} 
```

[3) 在Initail Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)中构建 Swing GUI ，那么你的主类应该是

```
public static void main(String[] arg) {
    SwingUtilities.invokeLater(new Runnable() {

        public void run() {
            myFrame = new JFrame();

            myFrame.setPreferredSize(new Dimension(400, 300));//width:400px, height:300px
            myFrame.setLocationRelativeTo(null);//to show at center of screen
            myFrame.setTitle("My Program");
            Test1 prog = new Test1();
            prog.createComponents();
            myFrame.add(myPanel);
            myFrame.pack();//this alone will not give the frame a size
            myFrame.setVisible(true);
        }
    });
} 
```

4) `setSize`for `JFrame`and then usage of`pack();`是相反的使用`pack()`，而不是`setSize`

5）您查看[SpringLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/spring.html)或[GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)以防您将更多类似的 JComponents 放在那里，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T13:25:28.730

对于那些类型的 UI（标签 - 编辑器组件），我发现[JGoodies](http://www.jgoodies.com/freeware/libraries/forms/)`FormLayout`是最好的之一，而且非常易于使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T14:34:50.617

看起来你有一个登录表单......
你可以在一行上使用两行一列的网格布局，
它将包含标签，文本字段，如果你不想给，第二个也与额外的按钮相同最后一个文本字段的事件处理程序

这是我在不使用任何拖放工具的情况下设计的一个简单登录表单的代码

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class LoginFrame extends JFrame{
    User user;
    private JPanel buttonPanel;
    JButton btnLogin;
    JButton btnRegister;
    JButton btnExit;
    JPanel panelUser;
    JPanel panelPwd;
    JLabel nameLabel;
    final JTextField txtUserName;
    final JPasswordField txtPwd;

    public LoginFrame() {
        user = new User();
        setTitle("Demo for next Button frame");
        setSize(370, 169);
        JPanel masterPanel = new JPanel(); 
        buttonPanel  = new JPanel();

        btnLogin = new JButton("Log in");
        btnExit = new JButton("Exit");
        btnRegister = new JButton("Register");

        buttonPanel.add(btnLogin);
        buttonPanel.add(btnExit);
        buttonPanel.add(btnRegister);

        panelUser = new JPanel();
        panelPwd = new JPanel();

        nameLabel = new JLabel("user name");
        txtUserName = new JTextField("", 20);
        JLabel pwdLabel = new JLabel("password");
        txtPwd = new JPasswordField("", 20);

        panelUser.add(nameLabel);
        panelUser.add(txtUserName);
        panelPwd.add(pwdLabel);
        panelPwd.add(txtPwd);

        masterPanel.add(panelUser);
        masterPanel.add(panelPwd);
        masterPanel.add(buttonPanel);
        add(masterPanel, BorderLayout.CENTER);

        btnRegister.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {

                user.setUserName(JOptionPane.showInputDialog(null,"Enter user name you want"));
                user.setPassword(JOptionPane.showInputDialog(null,"Enter password you want"));
                JOptionPane.showMessageDialog(null, "now log in with your user name and password");
                user.saveFile();
            }
        });

        btnLogin.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent event){

                if(txtUserName.getText().equals(user.getUserName()) && (new String(txtPwd.getPassword())).equals(user.getPassword())){
                                dispose();
                                user.saveLog();
                                TimeFrame tFrame = new TimeFrame(user.getUserName());
                                tFrame.setVisible(true);
                                tFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                                Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();

                                // Determine the new location of the window
                                int w = tFrame.getSize().width;
                                int h = tFrame.getSize().height;
                                int x = (dim.width-w)/2;
                                int y = (dim.height-h)/2;

                                // Move the window
                                tFrame.setLocation(x, y);

                        } else {
                            JOptionPane.showMessageDialog(null,"User name or password don't match","Acces Denied", JOptionPane.ERROR_MESSAGE);
                        }
            }

        });

        btnExit.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent event){
                dispose();
            }
        });

    }
} 
```

你可以看到代码...

有基本布局作为流式布局 Swing 应用程序的默认布局和
流式布局中的网格布局 您添加到框架中的组件从右到左流动 每次您更改框架的大小时，它们的方向都会改变，从而倾向于流因此称为流布局

在网格布局中，组件对齐到 nxm 维度的网格中 n：行数和 n：类似于网格的列数，因此如果您调整窗口大小，则在网格布局中不会发生任何事情，因为它设计用于相同的目的... ![流布局和 girf 布局的输出组合如下所示](../Images/0e3525193335126b3d0714b929f45f5e.png) 仅供参考：标有2x2网格的框架是网格布局的输出其余其他框架是流布局的o / p请研究改变窗口大小按钮排列的差异欢呼

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T11:35:45.943

你不使用IDE吗？JDeveloper 和 Netbeans 是具有拖放功能的出色解决方案

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-17T07:03:53.603

您可以使用 windowBuilder eclipse 插件，它有助于以您想要的方式形成布局。例如，我使用 windowbuilder 创建了一个简单的布局，它以这种方式形成代码

```
import java.awt.Color;import java.awt.EventQueue;import java.awt.Font;import java.awt.event.ActionEvent;import java.awt.event.ActionListener;import javax.swing.GroupLayout;import javax.swing.GroupLayout.Alignment;import javax.swing.JButton;import javax.swing.JCheckBox;import javax.swing.JFrame;import javax.swing.JLabel;import javax.swing.JMenu;import javax.swing.JMenuBar;import javax.swing.JPanel;import javax.swing.JPasswordField;import javax.swing.JProgressBar;import javax.swing.JTextField;import javax.swing.LayoutStyle.ComponentPlacement;import javax.swing.SwingConstants;import javax.swing.border.EmptyBorder;import javax.swing.event.MenuEvent;import javax.swing.event.MenuListener;public class LoginFrame2 extends JFrame implements ActionListener,MenuListener{private static final long serialVersionUID=1L;private JPanel contentPane;private JTextField userNameTextField;private JPasswordField passwordField;private JButton btnChangePassword;private JProgressBar progressBar;private JCheckBox chckbxShowPassword;private static final Color GREEN_COLOR=new Color(107,142,35);private static final Color RED_COLOR=new Color(255,0,0);private JLabel lblStatusmessage,lblProgressstatus;private JPanel footerPanel;private JLabel lblFooter;private JMenuBar menuBar;private JMenu mnConfigure;public static void main(String[]args){EventQueue.invokeLater(new Runnable(){public void run(){try{LoginFrame2 frame=new LoginFrame2();frame.setVisible(true);}catch(Exception e){e.printStackTrace();}}});}
public LoginFrame2(){setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);setBounds(100,100,455,350);menuBar=new JMenuBar();setJMenuBar(menuBar);mnConfigure=new JMenu("Configure");mnConfigure.addMenuListener(this);menuBar.add(mnConfigure);contentPane=new JPanel();contentPane.setBorder(new EmptyBorder(5,5,5,5));setContentPane(contentPane);JPanel topPanel=new JPanel();JPanel centerPanel=new JPanel();JPanel bottomPanel=new JPanel();footerPanel=new JPanel();GroupLayout gl_contentPane=new GroupLayout(contentPane);gl_contentPane.setHorizontalGroup(gl_contentPane.createParallelGroup(Alignment.LEADING).addGroup(Alignment.TRAILING,gl_contentPane.createSequentialGroup().addGroup(gl_contentPane.createParallelGroup(Alignment.TRAILING).addComponent(bottomPanel,GroupLayout.DEFAULT_SIZE,438,Short.MAX_VALUE).addComponent(footerPanel,GroupLayout.PREFERRED_SIZE,438,Short.MAX_VALUE).addComponent(topPanel,Alignment.LEADING,GroupLayout.DEFAULT_SIZE,438,Short.MAX_VALUE).addComponent(centerPanel,Alignment.LEADING,GroupLayout.DEFAULT_SIZE,438,Short.MAX_VALUE)).addContainerGap()));gl_contentPane.setVerticalGroup(gl_contentPane.createParallelGroup(Alignment.LEADING).addGroup(gl_contentPane.createSequentialGroup().addComponent(topPanel,GroupLayout.PREFERRED_SIZE,37,GroupLayout.PREFERRED_SIZE).addPreferredGap(ComponentPlacement.RELATED).addComponent(centerPanel,GroupLayout.DEFAULT_SIZE,154,Short.MAX_VALUE).addPreferredGap(ComponentPlacement.RELATED).addComponent(bottomPanel,GroupLayout.PREFERRED_SIZE,61,GroupLayout.PREFERRED_SIZE).addPreferredGap(ComponentPlacement.RELATED).addComponent(footerPanel,GroupLayout.PREFERRED_SIZE,14,GroupLayout.PREFERRED_SIZE).addGap(1)));lblFooter=new JLabel("Developer : KEA3");lblFooter.setHorizontalAlignment(SwingConstants.RIGHT);lblFooter.setFont(new Font("Tahoma",Font.PLAIN,8));GroupLayout gl_footerPanel=new GroupLayout(footerPanel);gl_footerPanel.setHorizontalGroup(gl_footerPanel.createParallelGroup(Alignment.LEADING).addGroup(gl_footerPanel.createSequentialGroup().addGap(100).addComponent(lblFooter,GroupLayout.PREFERRED_SIZE,338,GroupLayout.PREFERRED_SIZE).addContainerGap(GroupLayout.DEFAULT_SIZE,Short.MAX_VALUE)));gl_footerPanel.setVerticalGroup(gl_footerPanel.createParallelGroup(Alignment.LEADING).addGroup(gl_footerPanel.createSequentialGroup().addComponent(lblFooter,GroupLayout.PREFERRED_SIZE,14,GroupLayout.PREFERRED_SIZE).addContainerGap(GroupLayout.DEFAULT_SIZE,Short.MAX_VALUE)));footerPanel.setLayout(gl_footerPanel);progressBar=new JProgressBar();lblProgressstatus=new JLabel("progressStatus");lblProgressstatus.setFont(new Font("Tahoma",Font.BOLD,11));lblProgressstatus.setHorizontalAlignment(SwingConstants.CENTER);GroupLayout gl_bottomPanel=new GroupLayout(bottomPanel);gl_bottomPanel.setHorizontalGroup(gl_bottomPanel.createParallelGroup(Alignment.TRAILING).addGroup(gl_bottomPanel.createSequentialGroup().addContainerGap().addComponent(lblProgressstatus,GroupLayout.DEFAULT_SIZE,412,Short.MAX_VALUE).addContainerGap()).addComponent(progressBar,Alignment.LEADING,GroupLayout.DEFAULT_SIZE,438,Short.MAX_VALUE));gl_bottomPanel.setVerticalGroup(gl_bottomPanel.createParallelGroup(Alignment.LEADING).addGroup(gl_bottomPanel.createSequentialGroup().addContainerGap().addComponent(progressBar,GroupLayout.PREFERRED_SIZE,GroupLayout.DEFAULT_SIZE,GroupLayout.PREFERRED_SIZE).addPreferredGap(ComponentPlacement.RELATED).addComponent(lblProgressstatus).addContainerGap(GroupLayout.DEFAULT_SIZE,Short.MAX_VALUE)));bottomPanel.setLayout(gl_bottomPanel);JLabel lblAlias=new JLabel("Alias :");lblAlias.setFont(new Font("Tahoma",Font.BOLD,11));lblAlias.setHorizontalAlignment(SwingConstants.RIGHT);JLabel lblPassword=new JLabel("Password :");lblPassword.setFont(new Font("Tahoma",Font.BOLD,11));lblPassword.setHorizontalAlignment(SwingConstants.RIGHT);userNameTextField=new JTextField();userNameTextField.setColumns(10);passwordField=new JPasswordField();chckbxShowPassword=new JCheckBox("Show Password");chckbxShowPassword.setFont(new Font("Tahoma",Font.BOLD,11));btnChangePassword=new JButton("Change Password");GroupLayout gl_centerPanel=new GroupLayout(centerPanel);gl_centerPanel.setHorizontalGroup(gl_centerPanel.createParallelGroup(Alignment.LEADING).addGroup(gl_centerPanel.createSequentialGroup().addGroup(gl_centerPanel.createParallelGroup(Alignment.TRAILING,false).addComponent(lblPassword,Alignment.LEADING,GroupLayout.DEFAULT_SIZE,GroupLayout.DEFAULT_SIZE,Short.MAX_VALUE).addGroup(Alignment.LEADING,gl_centerPanel.createSequentialGroup().addContainerGap().addComponent(lblAlias,GroupLayout.PREFERRED_SIZE,151,GroupLayout.PREFERRED_SIZE))).addPreferredGap(ComponentPlacement.UNRELATED).addGroup(gl_centerPanel.createParallelGroup(Alignment.LEADING).addComponent(btnChangePassword).addComponent(chckbxShowPassword).addComponent(passwordField,GroupLayout.DEFAULT_SIZE,251,Short.MAX_VALUE).addComponent(userNameTextField,GroupLayout.DEFAULT_SIZE,251,Short.MAX_VALUE)).addContainerGap()));gl_centerPanel.setVerticalGroup(gl_centerPanel.createParallelGroup(Alignment.LEADING).addGroup(gl_centerPanel.createSequentialGroup().addGap(21).addGroup(gl_centerPanel.createParallelGroup(Alignment.BASELINE).addComponent(lblAlias).addComponent(userNameTextField,GroupLayout.PREFERRED_SIZE,GroupLayout.DEFAULT_SIZE,GroupLayout.PREFERRED_SIZE)).addPreferredGap(ComponentPlacement.UNRELATED).addGroup(gl_centerPanel.createParallelGroup(Alignment.BASELINE).addComponent(lblPassword).addComponent(passwordField,GroupLayout.PREFERRED_SIZE,GroupLayout.DEFAULT_SIZE,GroupLayout.PREFERRED_SIZE)).addGap(18).addComponent(chckbxShowPassword).addPreferredGap(ComponentPlacement.UNRELATED).addComponent(btnChangePassword).addContainerGap(15,Short.MAX_VALUE)));btnChangePassword.addActionListener(this);centerPanel.setLayout(gl_centerPanel);lblStatusmessage=new JLabel("Status Message");lblStatusmessage.setFont(new Font("Tahoma",Font.BOLD|Font.ITALIC,13));lblStatusmessage.setHorizontalAlignment(SwingConstants.CENTER);JLabel lblHeader=new JLabel("Header\r\n");lblHeader.setFont(new Font("Tahoma",Font.BOLD,13));lblHeader.setHorizontalAlignment(SwingConstants.CENTER);GroupLayout gl_topPanel=new GroupLayout(topPanel);gl_topPanel.setHorizontalGroup(gl_topPanel.createParallelGroup(Alignment.TRAILING).addGroup(Alignment.LEADING,gl_topPanel.createSequentialGroup().addGap(10).addGroup(gl_topPanel.createParallelGroup(Alignment.LEADING).addComponent(lblStatusmessage,Alignment.TRAILING,GroupLayout.DEFAULT_SIZE,428,Short.MAX_VALUE).addComponent(lblHeader,Alignment.TRAILING,GroupLayout.DEFAULT_SIZE,428,Short.MAX_VALUE)).addContainerGap()));gl_topPanel.setVerticalGroup(gl_topPanel.createParallelGroup(Alignment.TRAILING).addGroup(Alignment.LEADING,gl_topPanel.createSequentialGroup().addComponent(lblHeader).addPreferredGap(ComponentPlacement.RELATED,7,Short.MAX_VALUE).addComponent(lblStatusmessage)));topPanel.setLayout(gl_topPanel);contentPane.setLayout(gl_contentPane);lblStatusmessage.setVisible(false);lblProgressstatus.setVisible(false);progressBar.setVisible(false);}@Override
public void actionPerformed(ActionEvent e){System.out.println("Ding"+e.getActionCommand());}@Override
public void menuCanceled(MenuEvent arg0){}@Override
public void menuDeselected(MenuEvent arg0){}@Override
public void menuSelected(MenuEvent arg0){new ConfigureDialog(this).setVisible(true);}} 
```

你甚至可以从现有的 jframe 打开一个弹出窗口

```
 import java.awt.BorderLayout;import java.awt.Dimension;import java.awt.FlowLayout;import java.awt.Point;import java.awt.event.ActionEvent;import java.awt.event.ActionListener;import java.io.File;import javax.swing.GroupLayout;import javax.swing.GroupLayout.Alignment;import javax.swing.JButton;import javax.swing.JDialog;import javax.swing.JFileChooser;import javax.swing.JFrame;import javax.swing.JLabel;import javax.swing.JPanel;import javax.swing.JTextField;import javax.swing.LayoutStyle.ComponentPlacement;import javax.swing.border.EmptyBorder;import javax.swing.filechooser.FileFilter;import javax.swing.filechooser.FileNameExtensionFilter;public class ConfigureDialog extends JDialog implements ActionListener{private static final long serialVersionUID=1L;private final JPanel contentPanel=new JPanel();private JTextField driverPathTextField;private JLabel lblDriverPath;private JButton btnBrowse;public static void main(String[]args){try{ConfigureDialog dialog=new ConfigureDialog(new JFrame());dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);dialog.setVisible(true);}catch(Exception e){e.printStackTrace();}}
public ConfigureDialog(JFrame parent){super(parent,"",true);if(parent!=null){Dimension parentSize=parent.getSize();Point p=parent.getLocation();setLocation(p.x+parentSize.width+100,p.y+parentSize.height/1);}
setBounds(100,100,479,141);getContentPane().setLayout(new BorderLayout());contentPanel.setBorder(new EmptyBorder(5,5,5,5));getContentPane().add(contentPanel,BorderLayout.CENTER);{lblDriverPath=new JLabel("Driver Path : ");}
{driverPathTextField=new JTextField(System.getProperty("web.ie.driver"));driverPathTextField.setColumns(10);}
btnBrowse=new JButton("Browse");GroupLayout gl_contentPanel=new GroupLayout(contentPanel);gl_contentPanel.setHorizontalGroup(gl_contentPanel.createParallelGroup(Alignment.LEADING).addGroup(gl_contentPanel.createSequentialGroup().addContainerGap().addComponent(lblDriverPath).addPreferredGap(ComponentPlacement.RELATED).addGroup(gl_contentPanel.createParallelGroup(Alignment.LEADING).addComponent(btnBrowse).addComponent(driverPathTextField,GroupLayout.DEFAULT_SIZE,207,Short.MAX_VALUE)).addContainerGap()));gl_contentPanel.setVerticalGroup(gl_contentPanel.createParallelGroup(Alignment.LEADING).addGroup(gl_contentPanel.createSequentialGroup().addGap(5).addGroup(gl_contentPanel.createParallelGroup(Alignment.BASELINE).addComponent(driverPathTextField,GroupLayout.PREFERRED_SIZE,GroupLayout.DEFAULT_SIZE,GroupLayout.PREFERRED_SIZE).addComponent(lblDriverPath)).addPreferredGap(ComponentPlacement.UNRELATED).addComponent(btnBrowse).addContainerGap(21,Short.MAX_VALUE)));contentPanel.setLayout(gl_contentPanel);{JPanel buttonPane=new JPanel();buttonPane.setLayout(new FlowLayout(FlowLayout.RIGHT));getContentPane().add(buttonPane,BorderLayout.SOUTH);{JButton okButton=new JButton("OK");okButton.setActionCommand("OK");okButton.addActionListener(this);buttonPane.add(okButton);getRootPane().setDefaultButton(okButton);}
{JButton cancelButton=new JButton("Cancel");cancelButton.setActionCommand("Cancel");cancelButton.addActionListener(this);buttonPane.add(cancelButton);}}
btnBrowse.addActionListener(this);}@Override
public void actionPerformed(ActionEvent e){if("Cancel".contains(e.getActionCommand())){dispose();}else if("Browse".contains(e.getActionCommand())){JFileChooser fileopen=new JFileChooser();FileFilter filter=new FileNameExtensionFilter("exe file","exe");fileopen.addChoosableFileFilter(filter);fileopen.setAcceptAllFileFilterUsed(false);fileopen.setFileFilter(filter);fileopen.setFileSelectionMode(JFileChooser.FILES_ONLY);int ret=fileopen.showOpenDialog(this);if(ret==JFileChooser.APPROVE_OPTION){File file=fileopen.getSelectedFile();System.out.println(file);driverPathTextField.setText(file.getPath());}}else if("OK".contains(e.getActionCommand())){System.setProperty("web.ie.driver",driverPathTextField.getText());dispose();}}} 
```

我知道这篇文章更长了......如果有人想要关于这个的信息，我的回答可能会有所帮助......;）

# c# - 如何在螺丝转 wiki 中测试运行插件

> ID：10701111
> 
> 赞同：1
> 
> 时间：2012-05-22T11:26:56.353
> 
> 标签：c#, testing, plugins, screwturn

我正在尝试为Screwturn Wiki 创建一个插件。我正在运行测试代码，但我也不知道如何启动插件。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:09:16.190

您需要将插件编译为 .dll，然后通过 Wiki-admin 面板安装 .dll 插件。

该插件可以有一个指向最新版本的 URL，Screwturn 可以检查这一点，但存在时间延迟，我发现每次手动升级更容易。

# java - SAXParser 对特定数据失败

> ID：10701116
> 
> 赞同：3
> 
> 时间：2012-05-22T11:27:11.467
> 
> 标签：java, android, xml-parsing, saxparser

我正在尝试解析如下所示的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<downloaddata>
    <downloaditem itemid="1">
    <title>Abdul kalaam Inspirational Talk</title>
    <downloadlink>http://o-o.preferred.spectranet-blr1.v8.lscache4.c.youtube.com/videoplayback?upn=Rxb-DvFeBTE&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&fexp=906512%2C907217%2C907335%2C921602%2C919306%2C919316%2C904455%2C919324%2C904452&itag=18&ip=203.0.0.0&signature=96D7FA17DF684B4C2CD30F12251F3263C83EC443.05F62E98E1059BB44459ABF319F50DC4B7E6D90E&sver=3&ratebypass=yes&source=youtube&expire=1337691481&key=yt1&ipbits=8&cp=U0hSTFZUT19NS0NOMl9OTlNFOmlwaTFSSGFfd3NK&id=67ffa1d50864f57d&title=Abdul%20Kalam%20inspirational%20Speech%20on%20Leadership%20and%20Motivation</downloadlink>
    </downloaditem>
</downloaddata> 
```

`downloadlink`当标签的数据如上时，似乎解析失败。我试图用相同长度的其他东西替换数据，并且它有效。

下面是我正在使用的安卓代码。

```
import java.io.File;
import java.io.IOException;
import java.util.List;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.Attributes;

import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

import android.os.Environment;

public class Wilxmlparser extends DefaultHandler{

List<VideoDetails> downloadList;
private String tempVal;
private VideoDetails tempVidDet;

public Wilxmlparser(){

}

public void parseXML() {

//get a factory
SAXParserFactory spf = SAXParserFactory.newInstance();
try {

    //get a new instance of parser
    SAXParser sp = spf.newSAXParser();

    File downloadInfo =new         File(Environment.getExternalStorageDirectory()+"/watchitlater/config/downloadinfo1.xml");        
    //parse the file and also register this class for call backs
    sp.parse(downloadInfo, this);

}catch(SAXException se) {
    se.printStackTrace();
}catch(ParserConfigurationException pce) {
    pce.printStackTrace();
}catch (IOException ie) {
    ie.printStackTrace();
}
}

//Event Handlers
@Override
public void startElement(String uri, String localName, String qName, Attributes     attributes) throws SAXException {
//reset
tempVal = "";
if(qName.equalsIgnoreCase("downloaditem")) {
    tempVidDet = new VideoDetails();
    tempVidDet.setItemId(Integer.parseInt(attributes.getValue("itemid")));
    }
}

@Override
public void characters(char[] ch, int start, int length) throws SAXException {
tempVal = new String(ch,start,length);
}

@Override
public void endElement(String uri, String localName, String qName) throws SAXException                 {

if(qName.equalsIgnoreCase("downloaditem")) {
downloadList.add(tempVidDet);
}else if (qName.equalsIgnoreCase("title")) {
    tempVidDet.setTitle(tempVal);
}else if (qName.equalsIgnoreCase("downloadlink")) {
    tempVidDet.setDownloadLink(tempVal);        
    }
}
} 
```

上面的代码没有`endElement`为上面的 xml 文件提供回调。但是，如果 xml 要像

```
<?xml version="1.0" encoding="utf-8"?>
<downloaddata>
    <downloaditem itemid="1">
        <title>Abdul kalaam Inspirational Talk</title>
        <downloadlink>http://www.gmail.com/hello/world/sdfsdf%20.@@%!@#    ($dwe</downloadlink>
    </downloaditem>
</downloaddata> 
```

或者

```
<?xml version="1.0" encoding="utf-8"?>
<downloaddata>
    <downloaditem itemid="1">
        <title>Abdul kalaam Inspirational Talk</title>
            <downloadlink>httphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttphttpa</downloadlink>
    </downloaditem>
</downloaddata> 
```

然后它工作正常。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:05:18.867

您的解析器无法解析有问题的 xml 的原因是它是无效的 xml。导致问题的数据部分包含必须转义的字符。有关更多信息，请参阅关于 XML 的维基百科文章中的[字符和转义](http://en.wikipedia.org/wiki/XML#Characters_and_escaping)。

这在生成 xml 的任何内容中都得到了最好的纠正，最简单的解决方法是将有问题的文本包装在[CDATA 部分](http://en.wikipedia.org/wiki/CDATA#CDATA_sections_in_XML)中。

数据修复后，您可能还会看到由解析代码中的误解引起的问题。

```
@Override
public void characters(char[] ch, int start, int length) throws SAXException {
   tempVal = new String(ch,start,length);
} 
```

不会总是获取开始和结束标记之间的所有字符，因为此方法的合同允许多次调用它。您需要追加到在方法中初始化并在`startElement`方法中使用的字符串缓冲区，而不是简单地复制到字符串中`endElement`。

有关此方法解析问题的更多信息，请参阅[我对另一个 SO 问题的回答。](https://stackoverflow.com/questions/5855421/android-sax-parsing-returns-null-values-and-retrieve-values-in-tags-of-same-nam/5855796#5855796)`characters`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:33:59.113

Parser 不会解析特殊字符。如果所有特殊字符都存在于

> 块引用

[http://oo.preferred.spectranet-blr1.v8.lscache4.c.youtube.com/videoplayback?upn=Rxb-DvFeBTE&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&fexp=906512% 2C907217%2C907335%2C921602%2C919306%2C919316%2C904455%2C919324%2C904452&itag=18&ip=203.0.0.0&signature=96D7FA17DF684B4C2CD30F12251F3263C83EC443.05F62E98E1059BB44459ABF319F50DC4B7E6D90E&sver=3&ratebypass=yes&source=youtube&expire=1337691481&key=yt1&ipbits=8&cp=U0hSTFZUT19NS0NOMl9OTlNFOmlwaTFSSGFfd3NK&id=67ffa1d50864f57d&title=Abdul%20Kalam%20inspirational%20Speech %20on%20领导力%20和%20动机](http://o-o.preferred.spectranet-blr1.v8.lscache4.c.youtube.com/videoplayback?upn=Rxb-DvFeBTE&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&fexp=906512%2C907217%2C907335%2C921602%2C919306%2C919316%2C904455%2C919324%2C904452&itag=18&ip=203.0.0.0&signature=96D7FA17DF684B4C2CD30F12251F3263C83EC443.05F62E98E1059BB44459ABF319F50DC4B7E6D90E&sver=3&ratebypass=yes&source=youtube&expire=1337691481&key=yt1&ipbits=8&cp=U0hSTFZUT19NS0NOMl9OTlNFOmlwaTFSSGFfd3NK&id=67ffa1d50864f57d&title=Abdul%20Kalam%20inspirational%20Speech%20on%20Leadership%20and%20Motivation)

> 块引用

您可以将此文本传递给 TextUtils.htmlEncode(string) 然后开始解析。我认为它可以工作或改变它在服务器端为您提供使用 UTF-8 字符集编码的数据，在设备端您可以使用相同的字符集进行解码

# mysql - MYSQL查询比较2个表值

> ID：10701118
> 
> 赞同：0
> 
> 时间：2012-05-22T11:27:17.577
> 
> 标签：mysql, wordpress

我现在处于深水区，强调截止日期的原因和对缺乏知识的挫败感。

所以我会寻求绝望的帮助。

这是更多的 mysql 问题，但由于我目前正在使用 WP，因此无法演示 wp 的场景。

我已经发布了帖子类型为“聊天”的帖子，其中每个帖子都有其重要的元数据。其中一个 Metas 是时间戳，另一个是聊天 id。

我需要获取具有给定 ID（来自 meta_value）并且时间戳值大于给定值的所有帖子。

到目前为止我得到了这个，但我正在努力让它工作：S

```
 SELECT wp_postmeta.*, 
          wp_posts.* 
     FROM wp_postmeta
LEFT JOIN wp_posts 
       ON wp_posts.ID = wp_postmeta.post_id 
          AND wp_posts.post_type = 'chatt'
LEFT JOIN wp_postmeta t2 
       ON t2.meta_key = 'aw_chat_id' 
          AND t2.meta_value = 'test-chat-av-chattuser'
    WHERE wp_postmeta.post_id = wp_posts.ID 
      AND t2.meta_key = 'aw_chat_timestamp' 
      AND t2.meta_value > 2 
```

有谁知道如何解决这个问题？

（基本上，获取所有 post_type = chatt AND meta_value = 'test-chat-av-chattuser' AND meta_value > 2 的帖子）

编辑：结构

这是 wp_postmeta 中的样子：

```
INSERT INTO `wp_postmeta` (`meta_id`, `post_id`, `meta_key`, `meta_value`)
VALUES
    (2212, 1458, 'aw_chat_id', 'test-chat-av-chattuser'),
    (2213, 1458, 'aw_chat_timestamp', '6'),
    (2209, 1457, 'aw_chat_id', 'test-chatt'),
    (2210, 1457, 'aw_chat_timestamp', '5'),
    (2207, 1456, 'aw_chat_id', 'test-chatt'),
    (2208, 1456, 'aw_chat_timestamp', '4'),
    (2205, 1455, 'aw_chat_id', 'test-chatt'),
    (2206, 1455, 'aw_chat_timestamp', '3'),
    (2202, 1454, 'aw_chat_id', 'test-chatt'),
    (2203, 1454, 'aw_chat_timestamp', '2'),
    (2204, 1454, 'aw_chat_answer', 'adfgsdhfgsdfhsfdh'),
    (2199, 1453, 'aw_chat_id', 'test-chatt'),
    (2200, 1453, 'aw_chat_timestamp', '1'),
    (2201, 1453, 'aw_chat_answer', 'asdfasdasdf');

meta_id post_id meta_key    meta_value
2212    1458    aw_chat_id  test-chat-av-chattuser
2213    1458    aw_chat_timestamp   6
2209    1457    aw_chat_id  test-chatt
2210    1457    aw_chat_timestamp   5
2207    1456    aw_chat_id  test-chatt
2208    1456    aw_chat_timestamp   4
2205    1455    aw_chat_id  test-chatt
2206    1455    aw_chat_timestamp   3
2202    1454    aw_chat_id  test-chatt
2203    1454    aw_chat_timestamp   2
2204    1454    aw_chat_answer  adfgsdhfgsdfhsfdh
2199    1453    aw_chat_id  test-chatt
2200    1453    aw_chat_timestamp   1
2201    1453    aw_chat_answer  asdfasdasdf 
```

这就是 wp_posts 的样子：

```
INSERT INTO `wp_posts` (`ID`, `post_author`, `post_date`, `post_date_gmt`, `post_content`, `post_title`, `post_excerpt`, `post_status`, `comment_status`, `ping_status`, `post_password`, `post_name`, `to_ping`, `pinged`, `post_modified`, `post_modified_gmt`, `post_content_filtered`, `post_parent`, `guid`, `menu_order`, `post_type`, `post_mime_type`, `comment_count`)
VALUES
    (1458, 0, '2012-05-22 11:15:59', '0000-00-00 00:00:00', 'Chatuser chat !?', 'qwedq', '', 'draft', 'open', 'closed', '', '', '', '', '2012-05-22 11:15:59', '0000-00-00 00:00:00', '', 0, 'http://localhost/?post_type=chatt&p=1458', 0, 'chatt', '', 0),
    (1457, 18, '2012-05-22 10:51:27', '2012-05-22 09:51:27', 'asdgasdgfsdfg', 'asdgfasdg', '', 'publish', 'open', 'closed', '', 'asdgfasdg', '', '', '2012-05-22 10:51:27', '2012-05-22 09:51:27', '', 0, 'http://localhost/?post_type=chatt&#038;p=1457', 0, 'chatt', '', 0),
    (1456, 1, '2012-05-22 10:48:13', '0000-00-00 00:00:00', 'sadfasdfasdfasdf', 'asdfasdfasdf', '', 'draft', 'open', 'closed', '', '', '', '', '2012-05-22 10:48:13', '0000-00-00 00:00:00', '', 0, 'http://localhost/?post_type=chatt&p=1456', 0, 'chatt', '', 0),
    (1455, 1, '2012-05-22 10:38:47', '2012-05-22 09:38:47', 'ghkjhlkhkjhkj', 'jhgfjhfjh', '', 'trash', 'open', 'closed', '', 'jhgfjhfjh', '', '', '2012-05-22 10:38:47', '2012-05-22 09:38:47', '', 0, 'http://localhost/?post_type=chatt&#038;p=1455', 0, 'chatt', '', 0),
    (1454, 1, '2012-05-22 10:37:04', '2012-05-22 09:37:04', 'random text', 'awegfw', '', 'publish', 'open', 'closed', '', 'asdasd', '', '', '2012-05-22 10:37:04', '2012-05-22 09:37:04', '', 0, 'http://localhost/?post_type=chatt&#038;p=1454', 0, 'chatt', '', 0),
    (1453, 1, '2012-05-22 01:27:02', '2012-05-22 00:27:02', 'asdfasdfasdf', 'asdfasdf', '', 'publish', 'open', 'closed', '', 'asdfasdf', '', '', '2012-05-22 01:27:02', '2012-05-22 00:27:02', '', 0, 'http://localhost/?post_type=chatt&#038;p=1453', 0, 'chatt', '', 0);

    ID  post_author post_date   post_date_gmt   post_content    post_title  post_excerpt    post_status comment_status  ping_status post_password   post_name   to_ping pinged  post_modified   post_modified_gmt   post_content_filtered   post_parent guid    menu_order  post_type   post_mime_type  comment_count
1458    0   2012-05-22 11:15:59 0000-00-00 00:00:00 Chatuser chat !?    askwlfoef askwlfoef     draft   open    closed                  2012-05-22 11:15:59 0000-00-00 00:00:00     0   http://localhost/?post_type=chatt&p=1458    0   chatt       0
1457    18  2012-05-22 10:51:27 2012-05-22 09:51:27 asdgasdgfsdfg   asdgfasdg       publish open    closed      asdgfasdg           2012-05-22 10:51:27 2012-05-22 09:51:27     0   http://localhost/?post_type=chatt&#038;p=1457   0   chatt       0
1456    1   2012-05-22 10:48:13 0000-00-00 00:00:00 sadfasdfasdfasdf    asdfasdfasdf        draft   open    closed                  2012-05-22 10:48:13 0000-00-00 00:00:00     0   http://localhost/?post_type=chatt&p=1456    0   chatt       0
1455    1   2012-05-22 10:38:47 2012-05-22 09:38:47 ghkjhlkhkjhkj   jhgfjhfjh       trash   open    closed      jhgfjhfjh           2012-05-22 10:38:47 2012-05-22 09:38:47     0   http://localhost/?post_type=chatt&#038;p=1455   0   chatt       0
1454    1   2012-05-22 10:37:04 2012-05-22 09:37:04 asd2ewfefasdf   askwlfoef askwlfoef     publish open    closed      askwlfoef-askwlfoef         2012-05-22 10:37:04 2012-05-22 09:37:04     0   http://localhost/?post_type=chatt&#038;p=1454   0   chatt       0
1453    1   2012-05-22 01:27:02 2012-05-22 00:27:02 asdfasdfasdf    asdfasdf        publish open    closed      asdfasdf            2012-05-22 01:27:02 2012-05-22 00:27:02     0   http://localhost/?post_type=chatt&#038;p=1453   0   chatt       0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:37:36.730

除非您希望包含 NULL 值，否则 LEFT JOIN 是不必要的。

根据您的最后一句话和评论：

```
 SELECT chat.*, 
           timestamp.*,
           wp_posts.* 
      FROM wp_posts
INNER JOIN wp_postmeta chat
        ON wp_posts.ID = chat.post_id 
           AND chat.meta_key = 'aw_chat_id'
INNER JOIN wp_postmeta timestamp
        ON wp_posts.ID = timestamp.post_id 
           AND timestamp.meta_key = 'aw_chat_timestamp'
     WHERE wp_posts.post_type = 'chatt'
       AND timestamp.meta_value > 2
       AND chat.meta_value = 'test-chat-av-chattuser' 
```

# css - 具有固定标题和列的表格 - IE8 优化

> ID：10701122
> 
> 赞同：2
> 
> 时间：2012-05-22T11:27:30.160
> 
> 标签：css, html

我创建了如下所示的布局： ![布局样机](../Images/7e734d579db65e342176f1deadb3116a.png)

这是它的工作原理：

![在此处输入图像描述](../Images/4d36f8ebe50388292247ce493fd86e42.png)

如您所见，标题是固定的但可滚动，相同的行为适用于 1 列。

这是此演示的代码：http: **[//jsfiddle.net/Misiu/9j5Xy/7/](http://jsfiddle.net/Misiu/9j5Xy/7/)**

一切正常，但仅在 FF 上，在 IE8 上我有 2 个问题：

*   在 FF 中，我在头部和行 div 中有边框（在其中的表格内），但 IE8 削减了底部边框。

![即错误](../Images/c21534e84a77bbc0b37c9c73426e7a71.png)

**更新：修复了边框错误（解决方法） - 我为头部、列和行 div 添加了额外的边框。 [http://jsfiddle.net/Misiu/9j5Xy/12/](http://jsfiddle.net/Misiu/9j5Xy/12/)**

*   第二个问题是滚动功能——在 FF 上一切正常，但 IE8 总是有问题。当我单击包装器 div 内部并使用箭头滚动表格 div 时，FF 工作正常，但 IE 有时会随机滚动或返回顶部（尝试随机按箭头）。它应该一次只允许一个动作。

* * *

有人可以帮我在 IE 中解决这个问题并优化代码和 css 吗？

* * *

**我不想使用任何像 DataTables 这样的插件。在我的情况下，最好在服务器上生成 4 个表，而不是在客户端调用插件——对于非常大的表，而在旧电脑上，使用 FixedColumn 运行 DataTables 需要将近 3 分钟。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:08:23.420

您可能想看看像[Bootstrap](http://twitter.github.com/bootstrap/)或类似的框架。响应式/流畅的布局是开箱即用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:13:30.440

我已经设法用 css 和 jQuery 进行了所有修复。 **[http://jsfiddle.net/Misiu/9j5Xy/26/](http://jsfiddle.net/Misiu/9j5Xy/26/)**

这是我的 jQuery 代码：

```
$(document).ready(function () {
function scrollHandler(e) {
    $('#row').css('left', -$('#table').get(0).scrollLeft);
    $('#col').css('top', -$('#table').get(0).scrollTop);
}
$('#table').scroll(scrollHandler);
$('#table').resize(scrollHandler);

var animate = false;
$('#wrapper').keydown(function (event) {
    if (animate) {
        event.preventDefault();
    };
    if (event.keyCode == 37 && !animate) {
        animate = true;
        $('#table').animate({
            scrollLeft: "-=200"
        }, "fast", function () {
            animate = false;
        });
        event.preventDefault();
    } else if (event.keyCode == 39 && !animate) {
        animate = true;
        $('#table').animate({
            scrollLeft: "+=200"
        }, "fast", function () {
            animate = false;
        });
        event.preventDefault();
    } else if (event.keyCode == 38 && !animate) {
        animate = true;
        $('#table').animate({
            scrollTop: "-=200"
        }, "fast", function () {
            animate = false;
        });
        event.preventDefault();
    } else if (event.keyCode == 40 && !animate) {
        animate = true;
        $('#table').animate({
            scrollTop: "+=200"
        }, "fast", function () {
            animate = false;
        });
        event.preventDefault();
    }
});
}); 
```

但是总是欢迎评论和优化:)

# jquery - jQuery在悬停时替换元素的文本

> ID：10701124
> 
> 赞同：10
> 
> 时间：2012-05-22T11:27:52.603
> 
> 标签：jquery, hover, replace

使用 jQuery，我试图在悬停时替换这些链接内的文本，包括跨度。然后当用户悬停时，原始文本再次显示。

```
<a class="btn" href="#">
    <img src="#" alt=""/>
    <span>Replace me</span> please
</a>

<a class="btn" href="#">
    <img src="#" alt=""/>
    <span>Replace me</span> please
</a> 
```

最终输出应该是

```
<a class="btn" href="#">
    <img src="#" alt=""/>
    I'm replaced!
</a> 
```

我正在玩弄，但不知道如何将其更换回来。有任何想法吗？

```
$('.btn').hover(function(){
    $(this).text("I'm replaced!");
}); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-22T11:30:52.240

```
$('.btn').hover(
    function() {
        var $this = $(this); // caching $(this)
        $this.data('defaultText', $this.text());
        $this.text("I'm replaced!");
    },
    function() {
        var $this = $(this); // caching $(this)
        $this.text($this.data('defaultText'));
    }
); 
```

您可以将原始文本保存在`data-defaultText`存储在节点本身的属性中，以避免变量

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T11:31:01.467

这应该可以解决问题

```
$(function(){
  var prev;    

  $('.btn').hover(function(){
  prev = $(this).text();
      $(this).text("I'm replaced!");
  }, function(){
      $(this).text(prev)
  });
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T11:31:39.363

```
$('.btn').hover(function() {
    // store $(this).text() in a variable     
    $(this).text("I'm replaced!");
},
function() {
    // assign it back here
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T11:33:22.580

像这样向悬停事件添加另一个函数：

```
$('.btn').hover(function(){
    $(this).text("I'm replaced!");
}, function() {
    $(this).text("Replace me please");
}); 
```

演示[链接](http://jsfiddle.net/3JDZs/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T11:31:49.313

您需要将其存储在一个变量中才能将其设置回原来的样子，请尝试：

```
var text;

$(".btn").hover(function () {
    text = $(this).text();
    $(this).text("I'm replaced!");
},
function () {
    $(this).text(text);
}); 
```

# zend-framework - Doctrine extensions (Gedmo) Translatable - 如何根据当前语言环境显示翻译后的实体

> ID：10701128
> 
> 赞同：1
> 
> 时间：2012-05-22T11:28:12.937
> 
> 标签：zend-framework, doctrine, doctrine-orm, zend-translate

我有 gedmo 可翻译扩展在我的 zend 框架应用程序中工作。我的意思是下面的代码创建了 ext_translations 表并将翻译的文章插入到表中。

```
$article = new \App\Entity\Article;
$article->setTitle('my title in en');
$article->setContent('my content in en');
$this->_em->persist($article);
$this->_em->flush();

//// first load the article
$article = $this->_em->find('App\Entity\Article', 1 /*article id*/);
$article->setTitle('my title in de');
$article->setContent('my content in de');
$article->setTranslatableLocale('de_de'); // change locale
$this->_em->persist($article);
$this->_em->flush();

// first load the article
$article = $this->_em->find('App\Entity\Article', 1 /*article id*/);
$article->setTitle('my title in es');
$article->setContent('my content in es');
$article->setTranslatableLocale('es_es'); // change locale
$this->_em->persist($article);
$this->_em->flush();

$article = $this->_em->getRepository('App\Entity\Article')->find(1/* id of article */);
echo $article->getTitle();
// prints: "my title in en"
echo $article->getContent();
// prints: "my content in en" 
```

以上工作并打印了我在评论中包含的内容。但是，如果我将应用程序语言环境更改为 es_ES，它会给出相同的输出，并且似乎没有注意到语言环境的变化。

在我的引导程序中，它的设置如下：

```
public function _initLocale() {
        $session = new Zend_Session_Namespace('myswaplocalesession');
        if ($session->locale) {
            $locale = new Zend_Locale($session->locale);
        }

        $config = $this->getOptions();

        if (!isset($locale) || $locale === null) {
            try {
                $locale = new Zend_Locale(Zend_Locale::BROWSER);
            } catch (Zend_Locale_Exception $e) {
                $locale = new Zend_Locale($config['resources']['locale']['default']);
            }

        }
        Zend_Registry::set('Zend_Locale', $locale);

        echo $locale;

        $translator = new Zend_Translate('gettext', APPLICATION_PATH . '/../data/lang/',
                        null, array('scan' => Zend_Translate::LOCALE_FILENAME, 'disableNotices' => 1));

        Zend_Registry::set('Zend_Translate', $translator);
        Zend_Form::setDefaultTranslator($translator);
    } 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:17:09.657

您必须告诉 Gedmo 默认情况下必须使用什么语言环境。

当您知道要使用的语言环境时，您可以添加这些行：

```
$listener = $this->getDoctrine()->getEventManager()->getListener(
    'Gedmo\Translatable\TranslatableListener'
);

$listener->setTranslatableLocale($locale); 
```

# forms - 无法使用 EXTJS4 中的搜索记录加载网格

> ID：10701132
> 
> 赞同：-1
> 
> 时间：2012-05-22T11:28:20.477
> 
> 标签：forms, grid, extjs4

我有一个包含 5 个字段的表单（用于“搜索”）和一个包含几列的网格（网格和表单已绑定）。

最初，我想加载所有记录（json 数据）的网格，并且已经完成。问题是当我点击“搜索”按钮（不使用任何参数）时，我的 PHP 脚本返回了正确的 json 格式，但它没有加载到网格中（网格仍然有所有记录）。

自 3 天以来我一直在尝试这些，但无法解决这个问题。我是 EXTJS4 的新手。请帮我。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:45:16.370

我不确定你想要什么，但看看这个网格搜索示例[http://docs.sencha.com/ext-js/4-0/#!/example/grid/live-search-grid.html](http://docs.sencha.com/ext-js/4-0/#!/example/grid/live-search-grid.html)

# html - 液体布局中水平对齐的 div - 一个的背景延伸到另一个后面

> ID：10701135
> 
> 赞同：2
> 
> 时间：2012-05-22T11:28:37.473
> 
> 标签：html, css

我有一个液体布局。我需要 2 个 div 水平相邻并占据整个可用宽度。第二个 div 需要是其内容的宽度，所以第一个 div 应该占据其余的空间。

这是我的尝试：http: [//jsfiddle.net/jamesbrighton/N2prR/2/](http://jsfiddle.net/jamesbrighton/N2prR/2/)

它的工作原理是#other 的背景延伸到#button 后面。我的实际站点#other 的右侧也设置了背景图像。这意味着我需要背景颜色和图像只能扩展到#button，而不是超出它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:53:24.020

两个 div 中的第一个应该是浮动的。（如果不是，它们存在于不同的“层”和重叠中）

至于自动宽度的事情，我不认为你可以用 html 轻松做到这一点。根据我的经验，使用 div 设置宽度/高度总是更好。

如果您愿意，可以使用 2 td 表（一个设置为 100% 宽度，另一个设置宽度 - 例如 200px）

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:12:41.617

```
<style>
#other {
    background-color: blue;
width: 40%;
}
#button {
   background-color: gold;
   float: right;
   border-radius: 10px;
   width: 60%; 
}
.clear{
   clear: both;
} 
```

```
<div id="父">
 <div id="按钮">
    提交 提交 提交 提交 提交 提交 提交 提交 提交
 </div>
 <div id="其他">
   其他一些内容
 </div>
<div class="clear"></div>
</div>
```

你必须给第一个 <div> 一些固定的百分比。第二个中的文本将自动换行。

# python - 在lxml中获取特定名称的所有节点？

> ID：10701137
> 
> 赞同：3
> 
> 时间：2012-05-22T11:28:47.337
> 
> 标签：python, xml, lxml

我发现 lxml 的初始学习曲线有点陡峭 - 只是常见的任务，例如按名称、属性抓取节点并获取它们的内容。这是一个非常简单的问题。

我有一个 XML 文件。我想找到所有名为`<Review>`. 如何使用 lxml 最有效地做到这一点？

```
f = open('./test.xml')
xml = f.read()
tree = etree.parse(StringIO(xml))
context = etree.iterparse(StringIO(xml))
# How to get all the tags with the name <Review>
reviews = tree.findall('Review') # Something like this? 
```

我不知道我是否应该使用objectify，xpath ...

关于我在文件中读取并将其转换为可解析的 lxml 对象的方式，也欢迎发表评论。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T11:32:30.297

请参阅[文档](http://lxml.de/tutorial.html#elementpath)：

```
tree = etree.parse(open('./test.xml'))
reviews = tree.findall(".//Review") 
```

# json - JSON解析返回空值

> ID：10701139
> 
> 赞同：0
> 
> 时间：2012-05-22T11:28:58.613
> 
> 标签：json, asp-classic

我正在尝试使用此代码从以下 Json 文件中获取场地名称。但我得到 Object does not support this property or method: 'Info.Response.venues.items.venue' 错误。我会感谢你的帮助。

编辑：忘了提，我使用 ASP Xtreme Evolution 来解析 Json 数据。

```
<%
i = 0
    For Each key in Info.response.venues.items.keys()
        i = i + 1   
        For Each venue In Info.response.venues.items
            Response.write venue.Get("name")
        Next
    Next
    Response.Write "<br />" & i
%>

{
response: {

venues: {
    count: 27
    items: [
        {
            beenHere: 1
            venue: {
                id: "4227a500f964a520c51f1fe3"
                name: "Columbia University"
                : { }
                location: {
                    address:
                    crossStreet: "Broadway To Amsterdam Ave."
                    lat: 40.80821992957681
                    lng: -73.96215395358303
                    postalCode: "10027"
                    city: "New York"
                    state: "NY"
                    country: "United States"
                }
                categories: [
                    {
                        id: "4bf58dd8d48988d1ae941735"
                        name: "University"
                        pluralName: "Universities"
                        shortName: "University"
                        icon: {
                            prefix: "https://foursquare.com/img/categories/education/default_"
                            sizes: [
                                32
                                44
                                64
                                88
                                256
                            ]
                            name: ".png"
                        }
                        primary: true
                    }
                ]
                verified: true
                stats: {
                    checkinsCount: 14833
                    usersCount: 6138
                    tipCount: 52
                }
                beenHere: {
                    count: 0
                }
            }
        }
        {
            beenHere: 1
            venue: {
                id: "43bba61df964a520eb2c1fe3"
                name: "Whole Foods"
                contact: {
                    phone: "+12126735388"
                    formattedPhone: "+1 212-673-5388"
                    twitter: "WholeFoodsNYC"
                }
                location: {
                    address: "4 Union Square"
                    crossStreet: "btwn Broadway & University Pl."
                    lat: 40.734852286139734
                    lng: -73.99108529090881
                    postalCode: "10003"
                    city: "New York"
                    state: "NY"
                    country: "United States"
                }
                categories: [
                    {
                        id: "4bf58dd8d48988d118951735"
                        name: "Grocery or Supermarket"
                        pluralName: "Grocery or Supermarkets"
                        shortName: "Grocery Store"
                        icon: {
                            prefix: "https://foursquare.com/img/categories/shops/food_grocery_"
                            sizes: [
                                32
                                44
                                64
                                88
                                256
                            ]
                            name: ".png"
                        }
                        primary: true
                    }
                ]
                verified: true
                stats: {
                    checkinsCount: 43014
                    usersCount: 17275
                    tipCount: 212
                }
                url: "http://wholefoodsmarket.com"
                beenHere: {
                    count: 0
                }
            }
        }
} 
```

# java - 如何在 java 客户端中添加身份验证信息？

> ID：10701141
> 
> 赞同：0
> 
> 时间：2012-05-22T11:29:02.863
> 
> 标签：java, authentication, basic-authentication

如何在 java 客户端中配置身份验证，我尝试创建新`Authenticator`对象并调用它是设置默认方法，但我仍然收到以下错误：

```
java.io.IOException: Authentication failure
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1096)
    at UrlProxy.main(UrlProxy.java : 54) 
```

如果我需要设置任何其他附加属性，请告诉我。我正在使用`HttpUrlconnection`类打开与目标站点的连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:41:04.920

似乎我的问题是，服务器期待 NTLM 代理，而我以明文形式发送凭据，在更改它之后它工作正常。

# objective-c - 给定一年和一周的数字，您如何获得一周的第一天的日期？

> ID：10701148
> 
> 赞同：1
> 
> 时间：2012-05-22T11:29:38.107
> 
> 标签：objective-c, ios

我需要这个来获取每周图表中的数据。这个对我不起作用。它返回的日期是所选年份的一月一日。有什么想法吗？

```
-(NSDate*) getFirstDateOfTheWeek:(NSString*) weekNr andYear: (NSString*) theYear {
        int intYear = [theYear intValue];
        int intWeek = [weekNr intValue];

        NSCalendar *gregorian = [[NSCalendar alloc]
                                 initWithCalendarIdentifier:NSGregorianCalendar];
        [gregorian setLocale:[NSLocale currentLocale]];

        NSDateComponents * comp = [[NSDateComponents alloc] init];
        [comp setYear:intYear];
        [comp setWeek:intWeek];

        NSDate *dateOfFirstDay = [gregorian dateFromComponents:comp];
        NSDateComponents *dateComponents =
        [gregorian components:NSWeekdayCalendarUnit|NSWeekCalendarUnit|NSDayCalendarUnit|NSYearCalendarUnit|NSMonthCalendarUnit fromDate:dateOfFirstDay];
        int year = [dateComponents year];
        int month = [dateComponents month];
        int day = [dateComponents day];

        dateOfFirstDay= [gregorian dateFromComponents:dateComponents];
        return dateOfFirstDay;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:39:39.297

除了 setYear 和 setWeek 之外，您还应该在 NSDateComponents 中设置工作日。

```
[comp setWeekday:intWeek]; 
```

然后，在获取新组件时，您不需要很多标志，因为您实际上只需要一天（以及其他用于调试的时间）：

```
 [gregorian components:NSDayCalendarUnit|NSYearCalendarUnit|NSMonthCalendarUnit fromDate:dateOfFirstDay]; 
```

# android - “触摸屏”和“导航”配置更改何时触发？

> ID：10701151
> 
> 赞同：1
> 
> 时间：2012-05-22T11:29:46.013
> 
> 标签：android, android-activity, android-configchanges

阅读Android的文档[`android:configChanges`](http://developer.android.com/guide/topics/manifest/activity-element.html#config)，我发现：

```
"touchscreen"   The touchscreen has changed. (This should never normally happen.)
"navigation"    The navigation type (trackball/dpad) has changed. (This should never normally happen.) 
```

嗯。。好吧。那么这里的“通常”是什么意思？这是否意味着它*确实*有时会发生？有人可以举例说明何时会触发吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:06:10.110

我确定@Rafael T 是对的。这一切都可以通过USB连接。或者在紧急情况下，它可以由设备维修人员“即时”更换（打开外壳并打开设备..）至少我是这样想的

> “（这通常不应该发生。）”

# c++ - 通用日志文件系统 API 的 RegisterManageableLogClient() 和“访问被拒绝”错误

> ID：10701152
> 
> 赞同：0
> 
> 时间：2012-05-22T11:29:48.830
> 
> 标签：c++, winapi, clfs

我正在尝试使用 Microsoft 的通用日志文件系统 (CLFS) API。我的代码看起来像这样。

```
CLFS_MGMT_POLICY log_policy;
CLFS_INFORMATION log_info;
ULONG info_size = sizeof (log_info);
ULONGLONG desired_size;
ULONGLONG resulting_size;

data->log_handle = CreateLogFile (
    helpers::towstring (data->log_name).c_str (), GENERIC_WRITE,
    FILE_SHARE_DELETE | FILE_SHARE_WRITE | FILE_SHARE_READ, 0,
    OPEN_ALWAYS, FILE_ATTRIBUTE_ARCHIVE);

if (data->log_handle == INVALID_HANDLE_VALUE)
{
    loglog_win32_error (LOG4CPLUS_TEXT ("CreateLogFile()"));
    goto error;
}

if (! RegisterManageableLogClient (data->log_handle, 0))
{
    loglog_win32_error (LOG4CPLUS_TEXT ("RegisterManageableLogClient()"));
    goto error;
} 
```

该`CreateLogFile()`函数执行得很好，我什至可以看到`.blf`文件系统上出现了一个文件。但`RegisterManageableLogClient()`返回错误并`GetLastError()`返回`5`“访问被拒绝”的值。[此代码与MSDN](http://msdn.microsoft.com/en-us/library/bb540368%28v=vs.85%29.aspx)上的示例几乎相同。

我无法弄清楚为什么会`RegisterManageableLogClient()`失败。

**更新：**

问题丢失`GENERIC_READ`了`CreateLogFile()`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:59:05.980

由于您正在与策略进行交互，我猜您需要管理凭据来执行注册。这就是您获得 Access_denied 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:50:53.113

问题丢失`GENERIC_READ`了`CreateLogFile()`。

# r - 编写代码来计算分数并将它们添加到 data.frame

> ID：10701155
> 
> 赞同：1
> 
> 时间：2012-05-22T11:30:04.903
> 
> 标签：r, for-loop

我有一个 6 列的 data.frame。第一个用于主题，第二个用于实验中的块，第 3,4 和 5 列是我需要计算二进制分数（0 或 1）的值，我想将其添加到第六列（这就是为什么现在，它充满了0）。

```
head(kfdblock3to9)
    subject time        gr       ugr      sdugr IL
40002.3   40002    3 0.4475618 0.3706000 0.02994533  0
40002.4   40002    4 0.4361786 0.3901111 0.01846110  0
40002.5   40002    5 0.4279880 0.4550000 0.02811839  0
40002.6   40002    6 0.4313647 0.4134444 0.04352974  0
40002.7   40002    7 0.4420889 0.4394286 0.02883143  0
40002.8   40002    8 0.4325227 0.3960000 0.06559222  0 
```

我正在尝试使用 for 循环来做到这一点，但我是 R 的初学者，我在这方面遇到了困难。我试图实现的评分公式是：如果第 3 列中的值 ($gr) 小于第 4 列中的值 ($ugr) 和第 5 列中的值 ($sdugr) 之间的差值的 0.35 倍)，则主体收到 1，否则为 0。

到目前为止我尝试过的是：

```
for (i in kfdblock3to9$subject) {
     if (kfdblock3to9$gr<(kfdblock3to9$ugr-(.35*kfdblock3to9$sdugr))) 
                 kfdblock3to9$IL=1
         else kfdblock3to9$IL=0
    } 
```

这给了我 50 个警告，都说：“条件的长度 > 1，并且只使用第一个元素”

我想我当时对索引做错了，但我无法弄清楚。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:54:55.640

看看`within`和`ifelse`：

```
kfdblock3to9 <- 
within(kfdblock3to9,
  IL <- ifelse( gr < ugr - 0.35 * dugr, 1, 0)
) 
```

`within()`不是真的那么必要，但它使您的代码更易读和更容易理解。

为什么会出错？那是因为你的条件是矢量化的：试试

```
kfdblock3to9$gr<(kfdblock3to9$ugr-(.35*kfdblock3to9$sdugr)) 
```

你会看到它返回一个逻辑向量。现在一个`if()`子句一次只能处理一个布尔值。如果你有一个矢量化的结果，你需要一个矢量化的解决方案，那就是`ifelse()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:54:59.437

为了解决你的问题，我会建议这样的事情：

```
kfdblock3to9[, "IL"] <- ifelse(kfdblock3to9$gr < (kfdblock3to9$ugr-(0.35*kfdblock3to9$sdugr)), 1, 0); 
```

（矢量化方法通常比循环快。）

你的循环是错误的，因为你不尊重你的 index `i`。您必须使用`i`来访问循环中的行：

```
for (i in seq(along=kfdblock3to9)) {
    cat("row:", i, kfdblock3to9[i, "subject"], "\n");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T11:58:16.607

你想要的是一个逻辑测试。因此，您可以避免使用`loop`, 甚至`ifelse`, 并且只需执行以下操作：

```
kfdblock3to9$IL <- with(kfdblock3to9, gr < (ugr-0.35*sdugr)) 
```

IL 列将包含 TRUE 或 FALSE，而不是 1 或 0。如果您更喜欢使用整数，可以执行以下操作：

```
kfdblock3to9$IL <- as.integer(with(kfdblock3to9, gr < (ugr-0.35*sdugr))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T11:54:57.080

在这种情况下，您不应该使用循环。以后无论何时使用循环，都需要使用索引：

```
for (i in 1:length(kfdblock3to9$subject)) {
     if (kfdblock3to9[i,"gr"] < (kfdblock3to9[i, "ugr"] - .35 * kfdblock3to9[i, "sdugr"])) 
                 kfdblock3to9[i,"IL"]=1
     else  kfdblock3to9[i,"IL"]=0
}

kfdblock3to9
     subject time        gr       ugr      sdugr IL
40002.3   40002    3 0.4475618 0.3706000 0.02994533  0
40002.4   40002    4 0.4361786 0.3901111 0.01846110  0
40002.5   40002    5 0.4279880 0.4550000 0.02811839  1
40002.6   40002    6 0.4313647 0.4134444 0.04352974  0
40002.7   40002    7 0.4420889 0.4394286 0.02883143  0
40002.8   40002    8 0.4325227 0.3960000 0.06559222  0 
```

# plugins - 在 CRM2011 中检索 MarketingList 的 EntityID

> ID：10701157
> 
> 赞同：1
> 
> 时间：2012-05-22T11:30:10.627
> 
> 标签：plugins, dynamics-crm, dynamics-crm-2011

我敢肯定有人可以在这里帮助我，我真的很想知道为什么下面的代码不起作用。基本上我有一个自定义实体，它有一个列表（以及列表中的所有列表成员）和我的自定义实体（在创建后注册）我创建另一个列表，将所有这些列表成员导入另一个列表。现在我需要检索每个列表成员的 entityID（以便我添加它们）我的代码如下（仅用于一个列表成员用于测试目的）：

```
// GET LIST MEMBER 
QueryByAttribute query = new QueryByAttribute("listmember");
query.AddAttributeValue("listid", m_list_ID.Id);
ColumnSet cs = new ColumnSet();
cs.AddColumns("entityid");
query.ColumnSet = cs;
EntityCollection entityCollection = service.RetrieveMultiple(query);

Guid g = Guid.Empty;
g = (Guid)entityCollection.Entities[0].Attributes["entityid"]; 
```

为了检查 guid，我将另一个字段上的 GUID 作为字符串输出，只是为了检查它是否正确，但是当我尝试保存表单时，我收到错误“System.InvalidCastException: Specified cast is not valid.”。另一方面，我确信它会在我进行计数时检索实体，并且它显示了正确数量的实体，但由于某种原因不允许我获取 entityId 属性。如果有人能解释这里发生了什么，将不胜感激。预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:50:55.983

实体的`entityid`属性是 type 。如果您将演员更改为，则可以通过属性引用 GUID 。`listmember``EntityReference``EntityReference``Id`

# c# - 从 Azure 通过 API 上传到 Youtube

> ID：10701165
> 
> 赞同：0
> 
> 时间：2012-05-22T11:30:33.493
> 
> 标签：c#, azure, youtube-api

我正在尝试通过其 API 上传到 youtube，而当我在本地进行时，它工作正常。当它在我的 Azure 应用程序上时，它如何获得 (403) Forbidden

这是我的代码：

```
YouTubeRequestSettings settings = new YouTubeRequestSettings("XXXXX", token, userName, Password);
YouTubeRequest request = new YouTubeRequest(settings);
Video newVideo = new Video();

newVideo.Title = "Test";
newVideo.Tags.Add(new MediaCategory("Autos", YouTubeNameTable.CategorySchema));
newVideo.Keywords = "car";

newVideo.Description = "My first try";
newVideo.YouTubeEntry.Private = false;
newVideo.Tags.Add(new MediaCategory("devTag",
  YouTubeNameTable.DeveloperTagSchema));
newVideo.YouTubeEntry.MediaSource = new MediaFileSource(**SaveFileToLocal**(fileUpload), fileUpload.ContentType);
Video createdVideo = request.Upload(newVideo);

private string **SaveFileToLocal**(HttpPostedFileBase fileUpload)
{
    string uploadedFilePath;
    if (Local)
    {
        var uploadPath = Server.MapPath("~/AlbumsUploads//" + "RD");
        uploadedFilePath = Path.Combine(uploadPath, fileUpload.FileName);
    }
    else
    {
        LocalResource localResource = RoleEnvironment.GetLocalResource("LocalWebRoleStorage");
        string[] paths = { localResource.RootPath, DateTime.Now.Ticks.ToString() + "_temp" + fileUpload.FileName.Substring(fileUpload.FileName.LastIndexOf('.')) };
        uploadedFilePath = Path.Combine(paths);
    }
    using (var fs = new FileStream(uploadedFilePath, FileMode.Create))
    {
        var buffer = new byte[fileUpload.InputStream.Length];
        fileUpload.InputStream.Read(buffer, 0, buffer.Length);
        fs.Write(buffer, 0, buffer.Length);
    }
    return uploadedFilePath;
} 
```

这是我的例外。

```
Google.GData.Client.GDataRequestException: Execution of request failed: https://uploads.gdata.youtube.com/feeds/api/users/default/uploads ---> System.Net.WebException: The remote server returned an error: (403) Forbidden.
at System.Net.HttpWebRequest.GetResponse()
at Google.GData.Client.GDataRequest.Execute()
--- End of inner exception stack trace ---
at Google.GData.Client.GDataRequest.Execute()
at Google.GData.Client.GDataGAuthRequest.Execute(Int32 retryCounter)
at Google.GData.Client.MediaService.EntrySend(Uri feedUri, AtomBase baseEntry, GDataRequestType type, AsyncSendData data)
at Google.GData.Client.Service.Insert(Uri feedUri, AtomEntry newEntry, AsyncSendData data)
at Google.YouTube.YouTubeRequest.Upload(String userName, Video v)
at MvcWedApp.Controllers.AlbumManagementController.UploadToYouTube(HttpPostedFileBase fileUpload, Int32 albumId)
at MvcWedApp.Controllers.AlbumManagementController.Upload(Nullable`1 chunk, String name) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:22:05.660

I ran into a similar problem to your problem:

I talked about this situation with Azure Technical Evangelist and he thinks this problem occur when the Youtube API’s port close (80 and 443), Maybe It’s about Server Firewall properties. So I tried to change many way (Remote to Server and change firewall properties etc ) about open this ports but It doesn’t work.

Finally I solved my problem and I can understand It is not about port access.** [I authorized acces to our google account and granted our cloud services with this url**:](https://accounts.google.com/b/0/IssuedAuthSubTokens#accesscodes) We understand, we have to generate a new specific password for each application. [And also you must generate a DevKey with this URL :](https://accounts.google.com/ServiceLogin?service=youtubepartnersyn&passive=true&nui=1&continue=http://code.google.com/apis/youtube/dashboard/gwt/index.html&followup=http://code.google.com/apis/youtube/dashboard/gwt/index.html#product/AI39si64pfcTmyV0xQFYeuocSfbNZn3PdCNi1ThHRRPDMT85dsR4YbN0BvB0Whyuu8R4KvjByp6iVlXGjEhfqZ1XuF5W2dhaFg)

Maybe it could be related to problems ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:49:42.040

问题是 YourTube 服务器正在拒绝您的 403 授权请求，这意味着来自 ASP.NET Web 角色的身份验证请求由于某种原因而失败。它还解释说您甚至还没有开始上传，因此可能是与网络相关的访问问题。

为了解决此类问题，您可以尝试以下操作：

1.  RDP 到您的 Azure VM 并安装[Fiddler](http://www.fiddler2.com/fiddler2/)并收集网络流量。比较您的桌面流量，看看可能是什么问题。
2.  您还可以在 Azure VM 中安装网络监视器比较网络流量，以了解这是由于身份验证失败而导致的问题，还是网络 IP/端口等问题。

此外，当您在本地测试时，如果您的 ASP.NET 应用程序在计算机模拟器中运行，它是否有效？

根据以下文档，您被 Google 授权序列卡住了，因此这将是排查问题的第一个地方。根据我的经验，**Fiddler 是您最好的朋友，了解根本原因**，然后您可以找到解决方案： [https ://developers.google.com/youtube/2.0/developers_guide_protocol#Process_Flows_for_Uploading_Videos](https://developers.google.com/youtube/2.0/developers_guide_protocol#Process_Flows_for_Uploading_Videos)

注意：无论如何，这不是一个解决方案，但是我写在这里是为了解释如何解决这个问题。

# sql-server - 无法在 Windows 上使用 PyMSSQL 连接到 SQL Server -“来自服务器的意外 EOF”

> ID：10701174
> 
> 赞同：0
> 
> 时间：2012-05-22T11:31:05.477
> 
> 标签：sql-server, pymssql

我一直在尝试使用 Python 2.7 中的 PyMSSQL 版本 pymssql-2.0.0b1.win-amd64-py2.7 从 Windows 7 64 位操作系统连接到 MS SQL 2008 服务器。

```
import pymssql
conn = pymssql.connect(host='host', user='user', password='password', database='database') 
```

但是，当我为服务器、用户 ID、密码和数据库输入正确的登录凭据时，我收到以下错误：

> err_handler(dbproc = 025D30D8, severity = 9, dberr = 20017, oserr = 0, dberrstr = '来自服务器的意外 EOF'

我看到其他人在使用 FreeTDS for Linux 机器时遇到此问题，并且设置了不正确的 TDS 版本。由于我使用的是 Windows 操作系统，因此我的印象是不需要使用 FreeTDS 或指定 TDS 版本。这是真的？我还需要在某处指定 TDS 版本吗？

请提供任何建议或帮助。谢谢。

# jquery - jquery在鼠标上下拉如何更改它

> ID：10701175
> 
> 赞同：0
> 
> 时间：2012-05-22T11:31:06.467
> 
> 标签：jquery, drop-down-menu, twitter-bootstrap

[slideshare.net/tag/zendcon09?sort=views](http://www.slideshare.net/tag/zendcon09?sort=views)基于 Twitter Bootstrap，并且下拉菜单对鼠标悬停作出反应，在引导页面上，此插件对点击作出反应。怎么改？？我查看了源代码但没有找到解决方案，我什至把他们的代码和我的代码放到 diff 工具中，什么也没有。

有人可以告诉我如何更改它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:41:00.997

你只能用 CSS 做到这一点！只需添加此代码以匹配悬停菜单：

```
 ul.nav li.dropdown:hover ul.dropdown-menu{
        display: block;    
 } 
```

你可以在这里看到一个例子：http: [//jsfiddle.net/ekjxu/104/](http://jsfiddle.net/ekjxu/104/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:44:27.957

我相信他们只是在改变

```
display:none; 
```

到

```
display:block; 
```

在鼠标悬停时，只需 css 制作类似的东西就可以轻松完成

```
.dropdown
{
  display: none;
}

.dropdowncontainer:hover .dropdown
{
  display: block;
} 
```

# objective-c - UIPopoverController

> ID：10701176
> 
> 赞同：0
> 
> 时间：2012-05-22T11:31:11.147
> 
> 标签：objective-c, ios, ipad, xcode4

我会按一个按钮打开一个表格视图。根据这个方案，我做了几次尝试：

```
- (IBAction)menuContext:(id)sender {
    //ViewController2 *xx = [[ViewController2 alloc] init];
    //ViewControllerXXX *xx = [[ViewControllerXXX alloc] init];
    ViewController2 *xx = [[ApplicationModel sharedInstance] getView2];

    UIPopoverController *over = [[UIPopoverController alloc] initWithContentViewController:xx];

    [over setDelegate: (id) self];

    [over presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated: YES];

} 
```

但只需单击按钮程序崩溃...
ViewController2 是 UITableViewController 的子类。我可以在弹出窗口上使用它吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:53:53.300

我想您没有为按钮设置选择器。请确保您这样做（或）您可能将选择器设置为返回 nil 参数的方法

# android - AndroidJNIClass 无法执行我的非静态函数

> ID：10701184
> 
> 赞同：3
> 
> 时间：2012-05-22T11:31:46.040
> 
> 标签：android, java-native-interface, unity3d

我从我的统一代码中调用了 java 函数。我的 java 类中有静态和非静态类型的函数 **要访问第一个静态函数**，我使用了：

```
AndroidJavaClass plugin = new AndroidJavaClass("com.android.test.TestActivity");
AndroidJavaClass unityPlayer = new AndroidJavaClass("com.unity3d.player.UnityPlayer");
AndroidJavaObject activity = unityPlayer.GetStatic<AndroidJavaObject>("currentActivity");        
plugin.CallStatic("InstantiateMe", qwe); 
```

上面的代码运行良好，但是在此之后，当我尝试执行我的非静态函数时，它实际上并没有执行..甚至没有给出任何异常或错误..

**我调用非静态函数的代码**

```
AndroidJavaClass plugin = new AndroidJavaClass("com.android.test.TestActivity");
AndroidJavaClass unityPlayer = new AndroidJavaClass("com.unity3d.player.UnityPlayer");
AndroidJavaObject activity = unityPlayer.GetStatic<AndroidJavaObject>("currentActivity");        
plugin.Call("Enable", qwe); 
```

帮帮我，伙计。我被困在这里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T02:59:27.400

将您的“活动”变量用于非静态调用：`activity.Call("Enable", qwe);` 有静态和非静态函数调用的示例：

```
public class Caller {
  private readonly AndroidJavaClass _ActivityClass;
  private readonly AndroidJavaObject _ActivityObject;
  private readonly AndroidJavaClass _MyActivityClass; 

  public Caller() {
    _ActivityClass = new AndroidJavaClass("com.unity3d.player.UnityPlayer");
    _MyActivityClass = new AndroidJavaClass("com.example.u2aTest.MyMainActivity"); 

    _ActivityObject = _ActivityClass.GetStatic("currentActivity");
    // AndroidJavaObject my_activity_object = _MyActivityClass.GetStatic("currentActivity"); //doesn't work
  }

  public void MakeTestCalls() {
    _ActivityObject.Call("testVoid"); // works fine
    //_ActivityClass.CallStatic("testVoidStatic"); // doesn't works
   _MyActivityClass.CallStatic("testVoidStatic"); // works fine
    //_ActivityObject.CallStatic("testVoid"); // doesn't work on some divices

   //public int testInt(int intValue)
   int iresult = _ActivityObject.Call<int>("testInt", 999);

   //public String testStringString(String paramValue)
   String sresult = _ActivityObject.Call<String>("testStringString", "s2");      

   //public static int testIntStatic(int intValue) 
   iresult = _MyActivityClass.CallStatic<int>("testIntStatic", 999);

   //public static String testStringStringStatic(String paramValue)
   sresult =_MyActivityClass.CallStatic<String>("testStringStringStatic", "s1");
  }
} 
```

查看[Unity3D 的 Android 插件示例以](http://code.google.com/p/dvsrc/downloads/detail?name=20121113_Unity2AndroidTest.7z)获取详细信息。

# delphi - 自定义对象检查器组件？

> ID：10701189
> 
> 赞同：6
> 
> 时间：2012-05-22T11:32:12.297
> 
> 标签：delphi

我正在处理的项目中有几个表单，每个表单都包含它们自己不同的属性和值编辑，例如 TEdits、TTrackBars 和 TSpinEdits 等。这些表单的工作方式与 InputBox Dialog 在显示表单时的工作方式相似，您输入一个值，如果 ModalResult 是 mrOk，您将相应地处理结果。

我现在意识到这不是最实用的解决方案，特别是有几种形式，甚至更多要添加。我认为这里最好的 GUI 设计选项类似于主窗体上可信赖的 Delphi Object Inspector，它也更容易维护。

我不需要的是一个显示组件类属性的对象检查器，但我想用我自己的字段和类型填充对象检查器。

到目前为止，我发现的唯一接近的组件是在此处找到的 Berg NextInspector：[http](http://www.bergsoft.net/component/next-inspector/overview.htm) ://www.bergsoft.net/component/next-inspector/overview.htm ，它允许使用您自己的数据填充 Object Inspector：

![在此处输入图像描述](../Images/614b5c908b84e63a62713f84b94c322c.png)

在考虑购买上述产品之前，我想看看替代品，这样我就可以权衡我的其他选择，并比较不同组件库之间的优缺点。

到目前为止，我还没有找到任何像这样工作的东西，大多数似乎只是模仿 Delphi Object Inspector，这不是我想要的。

是否有任何其他类似于 Berg Next Inspector 的 Object Inspector 组件来允许自定义字段和类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T12:12:23.473

您可以使用[Virtual Treeview](http://www.soft-gems.net/index.php/controls/virtual-treeview)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T12:42:27.370

我自己还没有使用过，但我认为[DevExpress 的 ExpressVerticalGrid](http://www.devexpress.com/Products/VCL/ExVerticalGrid/)应该符合您的标准。

![在此处输入图像描述](../Images/db023bc5acd7238e6af4f46b060603be.png)

（根据我的口味，这些样本*有点*色彩缤纷，但您不必全部使用背景位图。:-)）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T12:31:22.897

还有来自[JEDI Visual Component Library的 TJvInspector](http://jvcl.delphi-jedi.org/)

# database - OrientDB 可以处理多个根吗

> ID：10701192
> 
> 赞同：1
> 
> 时间：2012-05-22T11:32:23.903
> 
> 标签：database, graph-databases, orientdb

我是 GraphDB 概念的新手，所以如果我误解了任何内容，请原谅我。这个问题主要是关于 OrientDB，因为我有兴趣将它用作混合 Document + Graph DB。

虽然 OrientDB 的 Raw API 的文档似乎建议我们*应该*声明一个根节点并给它一个名字...... [http://code.google.com/p/orient/wiki/GraphDatabaseRaw](http://code.google.com/p/orient/wiki/GraphDatabaseRaw)

但是我想知道这是否是绝对必要的。正如我所看到的，独立图更多地是一种常见的实际用法，并且给定了 OrientDB 的架构（GraphDB 建立在基于文档的数据库之上）。当然，我应该能够在集群/类类型中创建多个独立的图，并通过指定一个“起始”节点来遍历该图。

一个“类型/类”数据的单个“根”节点的理想状态似乎过于严格。

有没有人有更好的例子来使用 Raw Graph API 处理 OrientDB？根据此页面[http://code.google.com/p/orient/wiki/JavaAPI](http://code.google.com/p/orient/wiki/JavaAPI)我不愿意使用Tinkerpop但我找不到任何典型的使用实现示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:10:12.123

根节点是可选的，可以在不进行查询的情况下开始穿越图。您可以避免使用它并执行查询来获取您的图形元素。

关于 TinkerPop 蓝图的使用，您也可以通过仅在性能是真正必须的情况下（在一些基准测试之后）使用本机 API 并让 Gremlin 进行大部分遍历来保持混合状态。

# mysql - mysql查询 - 计算类似术语

> ID：10701195
> 
> 赞同：0
> 
> 时间：2012-05-22T11:32:38.643
> 
> 标签：mysql, sql

我的 MySQL 表如下：

```
ID  term  timestamp

1   foo    xxxx
2   bar    xxxx
3   bar    xxxx
4   foo    xxxx
5   foo    xxxx
6   foo    xxxx
7   xxx    xxxx 
```

我希望生成一个列表，按该术语的数量顺序显示最常用的术语

即最终结果：

```
foo 
bar
xxx 
```

我应该使用什么查询？我做了一些谷歌搜索，但我不太确定我在寻找什么 - COUNT / GROUP BY 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T11:34:57.020

以下 SQL 查询应该为您的问题提供解决方案。

```
SELECT term
FROM tablename
GROUP BY term
ORDER BY COUNT(*) DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:34:58.113

```
SELECT COUNT(*), term FROM table GROUP BY term ORDER BY COUNT(*) DESC; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T11:35:39.087

尝试

```
SELECT term, Count(*) AS cnt FROM mytable GROUP BY term ORDER BY cnt DESC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T11:38:29.830

`GROUP BY`是正确的。试试这个：

```
SELECT term FROM table
GROUP BY term
ORDER BY COUNT(term) desc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T11:36:09.973

```
SELECT TERM
FROM @table
GROUP BY TERM
HAVING COUNT(*) > 5 --replace with number you want
ORDER BY COUNT(*) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T11:43:11.980

这个 SQL 查询应该这样做：

```
SELECT term FROM my_table GROUP BY term ORDER BY COUNT(term) DESC; 
```

# wcf - 该服务实施“2”合同。无效操作异常

> ID：10701196
> 
> 赞同：0
> 
> 时间：2012-05-22T11:32:44.400
> 
> 标签：wcf, contracts

我有一个 WCF 服务项目，我试图在我的本地开发机器上启动并运行它。

当我从在 Cassini 中运行的 IE8 中点击 .SVC 时，它没有问题。

当我从在 IIS 中运行的 IE8 中点击 .SVC 时，我收到以下服务器错误。

**该服务实施“2”合同。要使用 WebScriptServiceHostFactory，您必须为每个服务实现一个协定。如果您必须使用多个合同，请使用常规的 ServiceHost。**

我的 IIS 配置似乎有问题。我有一个同事在他的机器上通过 IIS 运行项目，我们已经检查并匹配了我们的 Windows 功能列表，以确保我们在 Windows 7 中安装了相同的 IIS 和 WWW 功能。

我还用 IIS 为 4.0 重新注册了 aspnet，但错误没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:39:44.287

Well, the a reason why works in Cassini and not in IIS7 is that Cassini emulates IIS6 and there have been a significant number of changes to website configuration between IIS6 and IIS7\. You should most definitely install and use IIS Express 7.5 as your integrated development web host the instead of the default Cassini browser.

Now, you've checked your features but have you checked your IIS7 configuration? Are you sure that the site is running in the correct (.NET 4) app pool. Have you also ensure that it is running in the correct mode (Integrated).

# wordpress - Wordpress：显示类别和日期的帖子计数

> ID：10701198
> 
> 赞同：0
> 
> 时间：2012-05-22T11:33:01.533
> 
> 标签：wordpress

我已经尝试了很多代码变体来实现这一点，所以任何帮助将不胜感激..

我想显示每个类别的帖子计数，但也来自某个时间范围。

例如本周类别 1 的帖子数量。

我必须获得帖子计数的代码是

```
<?php
$chosen_id = 1;
$thisCat = get_category($chosen_id);
echo $thisCat->count;
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:32:06.673

与大多数与编程相关的事情一样，有许多不同的方法可以实现这一点，但这里有一个解决方案：

```
<?php
    $current_year = date('Y');
    $week = date('W');
    $category = 1;
    $countposts = get_posts("year=$current_year&w=$week&category=$category");
    echo 'There are ' . count($countposts) . ' posts in category ' . $category;
?> 
```

我们首先获取当前年份，然后获取当前周数（注意：周从星期一开始），然后获取当前周指定类别的所有帖子。这些帖子现在包含在`$countposts`我们可以计算它们的变量中。

更多关于 php`date()`函数的信息在这里： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

这个解决方案也可以很容易地抽象成它自己的功能`functions.php`。

# c++ - Qt4 Designer 创建一个带有 QTableWidget 的对话框

> ID：10701199
> 
> 赞同：1
> 
> 时间：2012-05-22T11:33:17.283
> 
> 标签：c++, qt, qt-designer

我希望在 Qt Designer 和 Qt v4.7.1 中使用 QTableWidget 是一个简单的问题。我想创建一个对话框，其中 QTableWidget 设置为 3x3 网格，然后将表格的初始大小设置为完全显示 3x3 网格，没有滚动条。我不希望桌子比这更大或更小。然后，我想将对话框的初始大小（可以是固定大小）设置为该表所需的确切大小。

我在 Qt Designer 中完成了这些步骤：

1.  创建一个新对话框（对于这个例子，我们将使用一个没有按钮的对话框）。
2.  拖入一个 QTableWidget。
3.  双击表格并设置 3 行（称为 1、2 和 3）和 3 列（同样），然后点击 OK。
    *   表格现在与我最初拖入时的空表格大小相同。这对于三列来说不够宽，所以我有一个水平滚动条，对于三行来说太高了，所以我有很多空白空间在底部。
4.  右键单击对话框并选择“在网格中布局”（或水平/垂直）。

    *   该表现在调整大小以填充大于所需的对话框，因此我可以看到所有行/列，但右侧和底部有很多空白空间。
5.  右键单击对话框并说“调整大小”。
    *   表格现在跳回到初始大小，即。水平滚动条不够宽，而且太高。调整对话框的大小以适合此表。

调整大小以适合表格的对话框是正确的。但是我怎样才能调整表格的大小以适应它的内容呢？

我尝试了很多其他的东西，例如。将表格上的大小策略更改为“固定、固定”或“最小、最小”，但它仍希望将初始大小设置为与内容不匹配的大小。理想情况下，我希望表格/对话框仅设置正确的初始大小并允许用户使对话框更小（这将添加滚动条），但如果我必须固定大小，这并不是世界末日。

是否可以在 Qt Designer 中执行此操作，或者我应该在代码中设置大小？

非常感谢任何回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:40:18.177

请注意，除非 QTableWidget 不强制任何大小，否则您的 QDialog 也不强制。所以你需要的是固定 QTableWidget 的大小；QDialog 与此无关。当 QTableWidget 想要强制另一个大小时，布局将尝试调整 QDialog 的大小。

但是据我所知，将 QTableWidget 的大小设置为特定的行数/列数是不可能的，至少在 QtDesigner 中是不可能的。

您需要编写一些代码来实现这一点。代码需要请求列的宽度和行的高度（包括标题），并添加小部件的边框。然后使用`ui->tableWidget->setFixedSize(...)`. 如果您为用户启用此功能，您还需要对调整列/行的大小做出反应。

* * *

对于固定的单元格大小和不可见的标题，有一个无需手动代码的可能解决方案（完全在 QtDesigner 中）：

*   设置（水平|垂直）HeaderVisible = false
*   设置 (horizo​​ntal|vertical)HeaderDefaultSectionSize = (fixedValue)
*   设置 (horizo​​ntal|vertical)HeaderMinimumSectionSize = (fixedValue)
*   将 QTableWidget 的大小设置为大小的总和。请记住将（列数 + 1）和（行数 + 1）像素添加到 QTableWidget 的固定总大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:00:50.190

对于固定单元格大小，您可以直接从 QtDesigner 使用 setFixedSize 和 QSizePolicy::Fixed。

如果您想根据内容长度调整列/行的大小 - 在代码中使用 resizeColumn(s)[Row(s)]ToContents。

如果要将调整大小附加到 QDialog 调整大小 - 在代码中的 Dialog 的 resizeEvent 中编写代码。

动态调整表格单元格的大小只能来自代码而不是来自 QtDesigner

# apache - 端口 apache 重写为 nginx

> ID：10701204
> 
> 赞同：1
> 
> 时间：2012-05-22T11:33:37.150
> 
> 标签：apache, nginx, rewrite

我让 nginx 充当 apache 的反向代理。

我有一个资产目录，其中包含 nginx 提供的静态文件

```
location /assets {
  alias   /var/public/assets;
  expires     1h;
} 
```

但是，从该目录提供的一些 jpeg 具有特定格式，即

```
/assets/test.jpg?p=2&project=wert 
```

我希望这些 url 由 nginx 重写，以便它们由后端服务处理

我有以下 apache rewrite 可以满足我的要求

```
RewriteEngine On
RewriteCond %{QUERY_STRING} q=[0-9]{1,2}&project=(\w+)$
RewriteRule ^assets/(.*)\.(jpe?g)$ /process/assets/$1.$2 [L] 
```

nginx 的等价物是什么，我应该把它放在上面的位置指令中还是其他地方？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:21:58.063

```
if ($query_string ~ "q=[0-9]{1,2}&project=(\w+)$"){
    rewrite ^/assets/(.*)\.(jpe?g)$ /process/assets/$1.$2 break;
} 
```

# build - Jenkins：在不触发构建的情况下更新 SCM？

> ID：10701206
> 
> 赞同：3
> 
> 时间：2012-05-22T11:33:38.977
> 
> 标签：build, continuous-integration, hudson, jenkins

我们有一个 SCM 控制的项目，每隔几分钟就会轮询一次 repo。总体而言，工作流程很棒，但有时我需要将新更改推送到服务器的存储库而不触发 Jenkins 中的构建（出于各种原因：长时间构建、微小更改、并发提交等）。

我已经设置了一个安静期，有时我只是启动和停止构建（这很尴尬），所以詹金斯拉动了变化，以后不会触发构建。

那么，是否有任何类型的插件允许：

*   手动取消未来的构建（在它被 SCM 轮询器触发之前）
*   在不触发构建的情况下手动更新项目的 SCM 存储库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T11:50:21.493

你有很多解决方案可以做到这一点：

1.  无需轮询 SCM 并触发基于更改的构建，您可以采用另一种方式。您可以让您的 SCM 决定提交是否应该触发作业。[看看那里的例子](http://fatalfailure.wordpress.com/2011/12/28/triggering-jenkins-jobs-from-the-scm-push-to-avoid-the-evil-polling/)
2.  您可以尝试在您的作业的 Subversion 扩展属性中使用“排除的提交评论”属性，这样，您可以避免在“无用的提交”上触发构建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:45:30.970

看看那个：[https ://wiki.jenkins-ci.org/display/JENKINS/PollSCM+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/PollSCM+Plugin)

您应该仅将构建触发器配置为“定期构建”（没有“池 SCM”触发器），我认为这可能会完成这项工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:52:22.157

另一个想法（不一定更好，但可能更适合您的口味）：使用[Run Condition Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Run+Condition+Plugin)。使其余的构建以参数为条件（让我们将其命名为*DO_BUILD*）。默认情况下将该参数设置为*TRUE*。如果您需要在不触发构建集的情况下提交某些内容，则*DO_BUILD*默认为*FALSE*。

同一想法的变体：您在一项工作 ( *Trigger* ) 中进行轮询，该工作在构建步骤中通过[Parameterized Trigger Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)调用您的主要工作。然后，该构建步骤可以以参数为条件。请注意，在这种情况下，您要么必须为两个构建使用相同的自定义工作区，要么在主作业中进行手动签出（例如，在 shell 构建步骤中）。

# javascript - 无法在 HTML5 中清除画布

> ID：10701208
> 
> 赞同：0
> 
> 时间：2012-05-22T11:33:41.183
> 
> 标签：javascript, html5-canvas

我在 HTML 页面中有几个分层的画布，我希望能够更改顶层，它显示用户可以选择的图像。

问题是，每当我调用 clearRect 时，它确实会清除画布片刻，然后将之前的图像加载回来。

这是我的 JavaScript 代码：

```
window.onload = function(){
    init();
    drawAll();  
}
function clear(){
    ctx2.clearRect(0,0,WIDTH,HEIGHT);
}

function init() {
    city.src ="city.png";
    image2.src="image.png";
    layer1 = document.getElementById("layer1");
    ctx1 = layer1.getContext("2d");
    layer2 = document.getElementById("layer2");
    ctx2 = layer2.getContext("2d");
}

function drawAll() {
    draw1();
    draw2();
}

function draw2() {
    ctx2.clearRect(0,0,WIDTH,HEIGHT);
    ctx2.drawImage(image2, 240, 200);
}

function draw1() {
    ctx1.clearRect(0, 0, WIDTH, HEIGHT);
    ctx1.drawImage(city, 0, 0);
} 
```

为什么会这样？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-03T22:14:37.700

您应该包含 HTML 代码，因为它有点不清楚您的问题是什么，但这就是我想出的。

“宽度”和“高度”可能是这里的麻烦制造者。你试过用 canvas.width 和 canvas.height 替换它们吗？

```
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext('2d');

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "#F00";
  ctx.fillRect(0, 0, 320, 180);
}

draw();
```

```
<canvas id="myCanvas" width=400 height=400></canvas>
```

# perl - 如何在 Perl 的整数数组中找到最大值和最小值？

> ID：10701210
> 
> 赞同：21
> 
> 时间：2012-05-22T11:33:52.450
> 
> 标签：perl

我有一个值为*33, 32, 8, 100*的数组。

如何在这个数组中找到最大值和最小值？

我需要包含任何特殊的库吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-22T15:33:18.333

[List::Util](http://search.cpan.org/perldoc?List::Util)的`min`并且`max`很好，

```
use List::Util qw( min max );
my $min = min @numbers;
my $max = max @numbers; 
```

但是[List::MoreUtils](http://search.cpan.org/perldoc?List::MoreUtils)`minmax`在您同时需要最小值和最大值时效率更高（因为它进行的比较较少）。

```
use List::MoreUtils qw( minmax );
my ($min, $max) = minmax @numbers; 
```

List::Util 是核心的一部分，但 List::MoreUtils 不是。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-22T13:50:45.887

没有模块：

```
#!/usr/bin/perl
use strict;
use warnings;
my @array = sort { $a <=> $b } qw(33 32 8 100);
print "min: $array[0]\n";
print "max: $array[-1]\n"; 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-05-22T11:38:00.797

你可以用它[`List::Util`](http://search.cpan.org/perldoc?List::Util)来轻松地做到这一点，例如。

```
use List::Util qw(min max);
my @arr = (33, 32, 8, 100);
print min(@arr)," ", max(@arr), "\n"; 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-05-22T13:44:18.877

提供的解决方案很好，但如果您想自己实现它，它非常简单：

```
use strict;
use warnings;

my @array = (33, 32, 8, 100);
my ($min, $max);

for (@array) {
    $min = $_ if !$min || $_ < $min;
    $max = $_ if !$max || $_ > $max
};

print "min: $min\n";
print "max: $max\n"; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-06T19:41:02.130

对于数字：

```
 my ($min,$max) = (sort {$a <=> $b} @array)[0,-1]; 
```

对于字符串：

```
 my ($min,$max) = (sort {$a cmp $b} @array)[0,-1]; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-10-02T09:25:10.033

您可以使用 map 来执行此操作而无需库：

```
my @array = (33, 32, 8, 100);
my ($max,$min)=(-1e99,1e99); # Initialize to values outside anything in your list
map {$max=$_ if ($_>$max); $min=$_ if($_<$min);} @array;
print "max=$max, min=$min\n"; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-22T11:40:18.863

您应该使用[`List::Util`](https://metacpan.org/module/List%3a%3aUtil)自 v5.7.3 以来随 Perl 发行版一起发布的它，因此可能不需要安装。

```
use strict;
use warnings;

use feature 'say';

use List::Util qw/ max min /;

my @data = (33, 32, 8, 100);

say min @data;
say max @data; 
```

**输出**

```
8
100 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-23T15:07:04.253

当然，如果你同时想要一个列表的最大值和最小值，那么同时获取两者更有效；它只需要对每 2 项数据执行 3 次顺序比较，而不是 4 次。如果数据集足够大，这可能很重要。

`List::Util`不提供`minmax`功能，但提供`List::MoreUtils`。

```
use strict;
use warnings;
use feature qw( say );

use List::MoreUtils qw( minmax );

my ( $min, $max ) = minmax @data;

say $min;
say $max; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-22T11:37:56.347

我认为[List::Util](http://search.cpan.org/perldoc?List%3a%3aUtil)是您正在寻找的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-22T11:37:58.823

您可以使用[Statistics::Lite](http://search.cpan.org/~brianl/Statistics-Lite-3.2/Lite.pm)计算最小值、最大值等

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-22T11:38:11.140

使用[`List::Util`模块](https://metacpan.org/module/List%3a%3aUtil)，无论如何建议熟悉它，就像`List::MoreUtils`：

```
D:\ :: perl -MList::Util=max -lwe "print max 324, 43, 53, 3532, 43"
3532

D:\ :: perl -MList::Util=min -lwe "print min 324, 43, 53, 3532, 43"
43 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-05-22T11:38:17.870

[List::Util](http://perldoc.perl.org/List/Util.html)具有“max”和“min”函数，您可以使用它们直接找到给定数字列表的最大值和最小值。检查你是否可以使用它。您也可以对数组进行排序，然后确定最高和最低的数字

# php - 使用 PHP 的 MySQL 数据库 SSL 连接

> ID：10701217
> 
> 赞同：0
> 
> 时间：2012-05-22T11:34:05.163
> 
> 标签：php, mysql, ssl, mysql-connect

我有一个数据库设置非远程服务器。

我想要做的是使用 PHP 建立连接。

服务器上的所有设置都可以，因为我使用 MySQL 工作台使用以下详细信息对其进行了测试：主机名：xxx.xx.xx.xxx 端口 - 空白所以默认为：3306

在工作台的高级选项卡中选择了“如果可用则使用 SSL”。连接测试成功。

虽然当我尝试使用简单的 mysq_connect('IP','user','pass') 进行连接时，我收到以下错误：第 2 行：$c = mysql_connect('IP','USER','PASS');

> 警告：mysql_connect() [function.mysql-connect]：在线 C:\wamp\www\sql\index.php 中的数据过早结束 (mysqlnd_wireprotocol.c:553)
> 
> 警告：mysql_connect() [function.mysql-connect]：OK 数据包比预期短 1 个字节 >在第 2 行的 C:\wamp\www\sql\index.php
> 
> 警告：mysql_connect() [function.mysql-connect]：mysqlnd 无法使用旧的不安全身份验证连接到 MySQL 4.1+。请使用管理工具通过命令 SET PASSWORD = PASSWORD('your_existing_password') 重置密码。这将在 mysql.user 中存储一个新的、更安全的哈希值。如果此用户在 PHP 5.2 或更早版本执行的其他脚本中使用，您可能需要从第 2 行 C:\wamp\www\sql\index.php 中的 my.cnf 文件中删除 old-passwords 标志

现在是我试图建立这种联系的日子。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:41:51.933

尝试..

```
mysql_connect('IP','USER','PASS', false, MYSQL_CLIENT_SSL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:41:54.167

快速指南：

1.  打开服务器的`my.cnf`（通常在`/etc`）
2.  注释掉`old-passwords = 1`
3.  重启 MySQL
4.  `mysql_fix_privilege_tables`必要时运行
5.  使用该`mysqlclient`实用程序进行连接`root`
6.  `use mysql`
7.  `update user set password=password('new password') where user='the user'`

然后再试一次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:44:45.757

在这里你是[php 手册 mysql 连接](http://www.php.net/manual/en/function.mysql-connect.php)

查看客户端标志

# android - Android Twitter 验证 twitter4j-core-2.2.5.jar 中的代码更改

> ID：10701232
> 
> 赞同：0
> 
> 时间：2012-05-22T11:35:02.303
> 
> 标签：android

我正在开发一个可以将推文和图片发布到 Twitter 的 Android 应用程序。我使用的是 twitter4j-core-2.1.11。现在我已经升级到 twitter4j-core-2.2.5.jar，因为 twitter4j-core-2.1.11 没有在发推文时添加上传图片的属性。

这是我用来在 twitter4j-core-2.1.11 中进行身份验证的代码。

```
public static boolean isAuthenticated(SharedPreferences prefs) {
  String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
  String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");
  AccessToken accesstoken = new AccessToken(token, secret);
  Twitter twitter = new TwitterFactory().getInstance();
  twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
  twitter.setOAuthAccessToken(accesstoken);
  try {
    twitter.getAccountSettings();
      return true;
  } catch (TwitterException e) {
    return false;
  }
} 
```

现在我得到错误：

**AndroidRuntime(694)：原因：java.lang.IllegalArgumentException：访问令牌格式无效。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:46:24.467

```
Do like this way

    RequestToken requestToken=twitter.getOAuthRequestToken(getResources().getString(R.string.callback));
    webView.loadUrl(requestToken.getAuthenticationURL()+"&force_login=true");

webView.setWebViewClient(new WebViewClient(){
                @Override
                public boolean shouldOverrideUrlLoading(WebView view, String url) {
                    try {
                        if(url.startsWith(getString(R.string.callback)))
                        {
                            List<NameValuePair> list = URLEncodedUtils.parse(new URI(url), "utf-8");
                            String oauthVerifier="";
                            Iterator<NameValuePair> iter = list.iterator();
                            while (iter.hasNext()) {
                                NameValuePair param = iter.next();
                                if(param.getName().equals("oauth_verifier"))
                                {
                                    oauthVerifier = param.getValue();
                                    break;
                                }
                            }       

                            accessToken = twitter.getOAuthAccessToken(requestToken,oauthVerifier);
                            twitter.setOAuthAccessToken(accessToken);
                            setResult(1);
                            finish();
                            getAccountSettings();
                        }
                        else
                            return false;
                    } catch (Exception e) {

                        e.printStackTrace();
                        return false;
                    }
                }

                @Override
                public void onPageFinished(WebView view, String url) {
                    stopProgress();
                    super.onPageFinished(view, url);

                }
            });

private boolean getAccountSettings(){
    try {
            twitter.getAccountSettings();
            return true;
        } catch (TwitterException e) {
            return false;
        }
} 
```

# font-face - @Font-Face Internet Explorer - Firefox 同域

> ID：10701235
> 
> 赞同：1
> 
> 时间：2012-05-22T11:35:23.213
> 
> 标签：font-face

我尝试了一切，但我无法开始工作。

这是我的@font-face 代码的一部分：

```
@font-face {
font-family: 'font';
src: url('font-regular-webfont.eot');
src: url('font-regular-webfont.eot?#iefix') format('embedded-opentype'),
url('font-regular-webfont.woff') format('woff'),
url('font-regular-webfont.ttf') format('truetype'),
url('font-regular-webfont.otf') format('opentype'),
url('font-regular-webfont.svg#font') format('svg');
font-weight: normal;
font-style: normal;
} 
```

它适用于 Chrome 和 Safari，但不适用于 IE 和 firefox。字体和 css 在同一个域中，我总是使用相对路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:01:57.197

确保所有字体格式都包含在您的 IIS 服务器环境中。默认情况下，IIS 不包含 .woff。确认 EOT、TTF 和 SVG 也存在。

# cloud-foundry - 无法在 Cloud Foundry 中隧道服务

> ID：10701246
> 
> 赞同：0
> 
> 时间：2012-05-22T11:35:52.730
> 
> 标签：cloud-foundry

当我尝试通过隧道传输 mongodb 服务时，我的 Cloud Foundry 安装出现以下错误。

```
vmc tunnel mongodb-1234
Deploying tunnel application 'caldecott'.
Create a password: *******
Uploading Application:
  Checking for available resources: OK
  Packing application: OK
  Uploading (1K): OK   
Push Status: OK
Binding Service [mongodb-1234]: OK
Staging Application: OK                                                         
Starting Application: OK                                                        
**Error: Cannot determine URL for caldecott-8e54b.vcap.me** 
```

另一方面，当我以 为目标时，隧道工作正常 `api.cloudfondry.org`，因此似乎我的安装配置不正确。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:07:35.090

问题出在我的主机文件上。我必须添加这样的条目：{IP 地址} {Caldecott URL}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:03:20.210

有关安装 Cloud Foundry 开源项目的问题，最好的资源是 vcap-dev Google 组：[https ://groups.google.com/a/cloudfoundry.org/group/vcap-dev/](https://groups.google.com/a/cloudfoundry.org/group/vcap-dev/)

乍一看，这似乎是一个 URL 映射问题。也许您没有设置 SSH 隧道到 VACP 主机的 80 或 443 端口？

# python - File upload functionality in google closure?

> ID：10701247
> 
> 赞同：1
> 
> 时间：2012-05-22T11:35:54.653
> 
> 标签：python, html, ajax, google-app-engine, google-closure

I am creating a project on google app engine. Here I am trying to upload a file to blobstore. I have an html file with multiple forms, where each form has a file upload button

```
<input type="file"> 
```

Now as soon as user selects a file using this button the file must start uploading to GAE blobstore.
I have the python code which can do this uploading stuff but **I am not able to link my backend (python) code to the file I've browsed. Also, as there are multiple forms the page must not get refreshed.**

I have found a solution to page refresh in google closure(using a pop up), but it is not desire in my project. I believe there is no other way in closure library.

I am trying to do it using ajax call but my very limited knowledge of ajax is preventing me to get the dsired results.

Using JQUERY is not an option.

I hope my question is clear, please revert back if not.

Any help is much appreciated.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:47:41.763

Google Closure 提供了一个 IframeIo 类，可以发布您的文件（无需刷新页面），此处提供文档，[http: //closure-library.googlecode.com/svn/docs/class_goog_net_IframeIo.html](http://closure-library.googlecode.com/svn/docs/class_goog_net_IframeIo.html)

我们在 IframeIo（在 BSD 许可下可用）上实现了一个包装器，以在用户选择文件时向用户显示文件上传输入和 URL 的帖子。来源：[https://code.google.com/p/prestans/source/browse/trunk/client/closure/ui/IframeFileUpload.js](https://code.google.com/p/prestans/source/browse/trunk/client/closure/ui/IframeFileUpload.js)

处理成功/失败代码有点棘手，具体取决于您从 Blobstore 文件上传处理程序返回的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T22:33:25.623

我使用的是使用输入/文件控制的onchange。onChange 返回控件和 mime 类型。在 onchange 中，您可以访问控件的 filelist 数组以获取文件名。使用文件名，您可以使用 FileReader 加载实际数据。可以使用 xhr post（并将其转换为 base64）将此数据上传到服务器。就像是：

```
function onChange(control, mimetype) {
var f = control.files;
if (f.length) {
  var reader = new FileReader;
  reader.onload = function() {
    // Post using xhr
  }
  reader.readAsBinaryString(f)
} 
```

请注意，并非所有浏览器上都存在 FileReader 对象...（Chrome 确实支持它！）

# hibernate - 连接不能为空休眠异常

> ID：10701250
> 
> 赞同：2
> 
> 时间：2012-05-22T11:36:08.003
> 
> 标签：hibernate, exception, dialect

我是休眠的新手。当我尝试运行它时，我收到此异常“当未设置 hibernate.dialect 时连接不能为空”。我已经正确设置了方言。

这是 hibernate.cfg.xml 文件

```
<hibernate-configuration>
<session-factory>
<property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
<property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
<property name="hibernate.connection.url">jdbc:mysql://localhost:3306/mysql</property>
<property name="hibernate.connection.username">root</property>
<property name="hibernate.connection.password">admin</property>
<property name="hibernate.connection.pool_size">10</property>
<property name="show_sql">true</property>
<property name="dialect">org.hibernate.dialect.MySQLDialect</property>
<property name="hibernate.hbm2ddl.auto">create</property>

<mapping class="org.siva.model.UserDetails"/>
</session-factory>
</hibernate-configuration> 
```

模型类。

```
@Entity
public class UserDetails {
  @Id
  private int userID;
  private String userName;

  public int getUserID() {
    return userID;
  }
  public void setUserID(int userID) {
    this.userID = userID;
  }
  public String getUserName() {
    return userName;
  }
  public void setUserName(String userName) {
    this.userName = userName;
  }
} 
```

主要班

```
public class HibernateTest {

public static void main(String[] args) {
   UserDetails user=new UserDetails();
   user.setUserID(1);
   user.setUserName("firstUser");
   Configuration configuration=new Configuration();
   ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();        
   SessionFactory sessionFactory = configuration.buildSessionFactory(serviceRegistry);
   Session session=sessionFactory.openSession();
   session.beginTransaction();
   session.save(user);
   session.getTransaction().commit();

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:45:29.833

你忘了配置你的配置。使用例如这个调用

```
Configuration configuration=new Configuration().configure(); 
```

# c# - ReSharper自定义模式，从字符串中提取文本

> ID：10701252
> 
> 赞同：2
> 
> 时间：2012-05-22T11:36:10.797
> 
> 标签：c#, resharper

我有很多代码，例如：

```
Resources.SettingName.ResourceManager.GetString("Setting") 
```

可以很容易地写成：

```
SettingName.Setting 
```

我一直在尝试在 Resharper 中编写一个自定义模式来实现这一点，但还没有成功。有人能告诉我什么是正确的模式吗？

ps：我用的是resharper 6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:17:53.333

您可以使用正则表达式使用 Visual Studio 的快速查找和替换：

找什么：

`Resources\.{.+}\.ResourceManager\.GetString\("{.+}"\)`

用。。。来代替：

`\1.\2`

这假设您的模式符合：`Resources.`{some setting name} `.ResourceManager.SetString("`{some setting}`")`

# class - Ninject DI with Class Library Project

> ID：10701253
> 
> 赞同：0
> 
> 时间：2012-05-22T11:36:14.650
> 
> 标签：class, dependency-injection, ninject

I'm working on a larger scale MVC App and have been trying to use DI with Ninject. I have the following projects:

Core - Class Library (contains a custom membership provider) Domain - Class Library (contains interfaces and EF to access data such as IUserRepository) WebUI - MVC 3 Project

I have bound IUserRepository to UserRepository in the Ninject startup within the App_Start container of my WebUI.

```
public static class NinjectWebCommon 
{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    /// <summary>
    /// Starts the application
    /// </summary>
    public static void Start() 
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        bootstrapper.Initialize(CreateKernel);
    }

    /// <summary>
    /// Stops the application.
    /// </summary>
    public static void Stop()
    {
        bootstrapper.ShutDown();
    }

    /// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);
        return kernel;
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<IUserRepository>().To<UserRepository>();
    }        
} 
```

However I want to use the UserRepository in my Customer Membership Provider with the Core Class Library...

```
public class MyMembershipProvider : MembershipProvider
{

    private IUserRepository userRepository;

    public MyMembershipProvider (IUserRepository repository)
    {
        this.userRepository = repository;
    }

    public override string ApplicationName
    {
        get
        {
            throw new NotImplementedException();
        }
        set
        {
            throw new NotImplementedException();
        }
    }

// Rest of methods.... 
```

However this fails as my Ninject start is within the WebUI project and presumably knows nothing about the class library. Is there a way to get it to inject the dependencies for those class libraries also?

Or should I be looking at a different way to code those and their dependencies?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:10:50.940

我不确定您是否应该使用带有构造函数参数的 MembershipProvider 或 roleProvider，因为当您注册自定义提供程序时，web.config 将需要调用非参数构造函数，或者当您尝试调用例如：

```
 public MembershipCreateStatus CreateUser(string userName, string password, string email)
    {
        MembershipCreateStatus status;
        var memberProvider = (MyMembershipProvider)Membership.Provider;

        memberProvider.CreateUser(userName, password, email, null, null, true, null, out status);
        return status;
    } 
```

它将尝试使用空构造函数构造一个新的 MyMembershipProvider，而不是使用 [inject] 属性

# c# - 应用 ToList() 后的不同结果

> ID：10701255
> 
> 赞同：3
> 
> 时间：2012-05-22T11:36:19.940
> 
> 标签：c#, linq

考虑以下类：

```
public class Score
{
    private static readonly Guid _relationId = Guid.NewGuid();

    public Guid Id { get; set; }
    public Guid RelationId { get { return _relationId; } }

    public Score()
    {
        Id = Guid.NewGuid();
    }
} 
```

以下功能：

```
public IEnumerable<Score> GetScores()
{
    yield return new Score();
    yield return new Score();
    yield return new Score();
} 
```

为什么以下函数返回**1**：

```
public int Execute()
{
    var scores = GetScores();
    IList<Score> externalScores = new List<Score>();

    var filteredScores = scores.Where(score => externalScores.All(x => x.RelationId != score.RelationId));

    foreach (var score in filteredScores)
    {
        externalScores.Add(score);
    }

    return externalScores.Count();
} 
```

但是当我添加`.ToList()`到`filteredScores`（在 foreach 循环中或在 linq 操作之后）时，函数的结果是**3**。

我怀疑它与[关闭循环变量有关](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx "关闭循环变量")，但我似乎无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T11:40:46.197

使用`ToList`，检查中的所有项目`scores`是否与谓词匹配，谓词总是返回真，因为`externalScores` 它是空的。

如果没有`ToList`，则检查中的每个项目与修改 的循环`scores`交错（请参阅：[*延迟执行*](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)），导致谓词返回第一项和其他两项。`foreach`[](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)*`externalScores``true``false`*

# mysql - 用 LIKE 更新

> ID：10701257
> 
> 赞同：-2
> 
> 时间：2012-05-22T11:36:38.550
> 
> 标签：mysql

```
UPDATE jos_ezrealty

  SET jos_ezrealty.locid = p.id

,jos_ezrealty.locality = p.locality

,jos_ezrealty.owncoords = 1

FROM poblacion p

  WHERE jos_ezrealty.alias LIKE '%' || p.locality || '%' 
```

* * *

它给了我：

`#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM poblacion p WHERE jos_ezrealty.alias LIKE '%' || p.locality || '%'' at line 5`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:40:31.747

阅读[`UPDATE`MySQL 的语法](http://dev.mysql.com/doc/refman/5.5/en/update.html)。

```
UPDATE jos_ezrealty AS e
  JOIN poblacion p
    ON e.alias LIKE '%' || p.locality || '%'
SET e.locid = p.id
  , e.locality = p.locality
  , e.owncoords = 1 ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:46:53.807

它应该是这样的：

```
UPDATE jos_ezrealty join poblacion 

SET jos_ezrealty.locid = p.id

,jos_ezrealty.locality = p.locality

,jos_ezrealty.owncoords = 1

WHERE jos_ezrealty.alias LIKE CONCAT('%', p.locality, '%'); 
```

# c# - 列表 , IEnumerable 和 ObservableCollection

> ID：10701261
> 
> 赞同：4
> 
> 时间：2012-05-22T11:36:50.020
> 
> 标签：c#, .net, collections, .net-4.0, observablecollection

我有两个类定义为

```
public class PostleitzahlList : ObservableCollection<Postleitzahl> {
}

public class Postleitzahl : IPostleitzahl {
} 
```

现在我有一个服务类，其中包含

```
PostleitzahlList _postleitzahlList; 
```

这个服务类还必须实现一个服务接口的属性，它返回`_postleitzahlList`——但这个接口只知道`IPostleitzahl`——它不知道`PostleitzahlList`或`Postleitzahl`。此属性应用于 WPF 中的绑定。

我现在正在尝试声明和实现此属性。我试过了

```
 public ObservableCollection<IPostleitzahl> PostleitzahlList {
        get { return this._postleitzahlList; }
    } 
```

和

```
 public IList<IPostleitzahl> PostleitzahlList {
        get { return this._postleitzahlList; }
    } 
```

但两者都不起作用。休耕似乎有效：

```
 public IEnumerable<IPostleitzahl> PostleitzahlList {
        get { return this._postleitzahlList; }
    } 
```

我现在问我 1.为什么第一次和第二次尝试不起作用？2.解决这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T11:40:05.643

问题在于协方差。An`ObservableCollection<Postleitzahl>`不是`ObservableCollection<IPostleitzahl>`，列表也是如此。这是一个为什么不这样做的例子：

```
ObservableCollection<string> strings = new ObservableCollection<string>();

// This is invalid, but it's what you're trying to do, effectively.
ObservableCollection<object> objects = strings;

// This would have to work... it's fine...
objects.Add(new object());

// And this should be fine too...
string x = strings[0]; 
```

...但是如您所见，您现在正尝试获取非字符串引用并将其存储在字符串变量中。唯一可行的结果是执行时失败……而泛型的一半是将错误检测推到*compile-time*。

Now`IEnumerable<T>`是*协变*的，`T`因为您不能通过它添加任何项目 - 这使得应用这种转换变得安全：

```
// There's nothing you can do to violate type safety here...
Observable<string> strings = new ObservableCollection<string>();
IEnumerable<object> objects = strings; 
```

有关更多信息，请阅读[MSDN 中泛型中的协变和逆变](http://msdn.microsoft.com/en-us/library/dd799517.aspx)。

需要`IPostleitzahl`接口吗？如果您只是通过`ObservableCollection<Postleitzahl>`or暴露属性`IList<Postleitzahl>`就可以了。或者，您可以将变量更改为 an`ObservableCollection<IPostleitzahl>`并且恰好通过创建`Postleitzahl`实例来填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:44:56.993

你能把 PostleitzahlList 改成

```
public class PostleitzahlList : ObservableCollection<IPostleitzahl> {
} 
```

用 elementtype`IPostleitzahl`代替`Postleitzahl`?

有关解释，请参阅@jon skeet 答案

# java - Unable to change permgen memory

> ID：10701264
> 
> 赞同：0
> 
> 时间：2012-05-22T11:37:14.670
> 
> 标签：java, tomcat, memory, permgen

We have a PermGen Out of memory exception in our Java EE web application:

> java.lang.OutOfMemoryError: PermGen space

We have read so many posts about how to solve it and almost all of them say that we have to increase PermSize (default and maximum). But we are not able to change them. We have tried to modify **setenv.sh, catalina.sh and startup.sh** adding this code:

> export JAVA_OPTS="-XX:PermSize=M -XX:MaxPermSize=1024m -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled"

And we also try to do it using the terminal:

> export JVM_ARGS="-XX:PermSize=256m-XX:MaxPermSize=1024m -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled"

But when we check it using "jstat -gcpermcapacity " nothing changes; the memory is always the same. Our enviroment is Centos 6, Apache 2.2, Tomcat 5.5, Java 6 and we have done our app deploy installing servlets by WHM in our account.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:42:31.813

尝试在您的 tomcat.conf 中更改它。实际上，请检查 ps ax | grep java 查看运行了哪些命令行来生成参数。我的生产：

26552 pts/1 Sl 0:36 /usr/lib/jvm/jre/bin/java -Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n -Xmx1024m -XX:MaxPermSize=128m -classpath :/usr/share/tomcat6/bin/bootstrap.jar:/usr/share/tomcat6/bin/tomcat-juli.jar:/usr/share/java/commons-daemon.jar -Dcatalina.base=/usr/share /tomcat6 -Dcatalina.home=/usr/share/tomcat6 -Djava.endorsed.dirs= -Djava.io.tmpdir=/var/tmp/tomcat6 -Djava.util.logging.config.file=/usr/share/tomcat6 /conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager org.apache.catalina.startup.Bootstrap start

这是在 tomcat6、java6、centos 5.5 上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:51:17.600

我们已经解决了这个问题！我们的应用程序运行在*WHM*上，执行 Tomcat 重启的脚本没有使用**startup.sh**文件。在我们的例子中，重置是由**/usr/bin**中的文件**“starttomcat”执行的。**我们修改了文件，将变量**my@cmd**保留如下：

 ****```
my @cmd = (

"./jsvc",
"-user",
"$user",
"-XX:PermSize=64M",
"-XX:MaxPermSize=512m",
"-cp",
"$jars",
"-Djava.endorsed.dirs=../common/endorsed",
"-outfile",
"${logdir}/catalina.out",
"-errfile",
"${logdir}/catalina.err",
"-verbose",
@options,
"org.apache.catalina.startup.Bootstrap",
#"-security",
"start",
); 
```

它运行！****

# ssrs-2008 - SSRS Category group displays category group label vertically

> ID：10701266
> 
> 赞同：0
> 
> 时间：2012-05-22T11:37:17.340
> 
> 标签：ssrs-2008

Is there a way to display the category group label horizontally in SSRS stacked bar chart?

The first group label displays horizontally i.e. (2011, 2012), but the second label displays the label vertically i.e. (US) in SSRS 2008 R2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:40:37.707

我遇到了同样的问题，并通过使用带有行组的表格和工具箱中的“数据栏”来规避它。

如何设置：在最左边的列中添加一些组到表格中，与条形图中的类别相同，然后在最右边的列中添加数据栏，然后打开或关闭一些边框以进行格式化。

您可以添加一个值轴，但它会显示在每一行上。使用 Visible 上的以下表达式使其仅在顶行或底行可见：

`=Iif(Fields!ChildCategoryGroup.Value = Last(Fields!ChildCategoryGroup.Value, "Tablix1") And Fields!ParentCategoryGroup.Value = Last(Fields!ParentCategoryGroup.Value, "Tablix1"), "True", "False")`

或者：

如果您不介意父组标签显示在每一行，请更改条形图，如下所示：

*   合并父组和子组：将父组和排序移动到子组，反之亦然
*   将子组的标签更改为这样的`=Fields!ParentCategoryGroup.Value & " - " & Fields!ChildCategoryGroup.Value`

注意：如果您将标签向左对齐，它们会看起来更干净。

（PS我知道这是一个老话题，但我在任何地方都找不到答案，所以你去吧。）

# c# - iTextSharp 西里尔字母

> ID：10701272
> 
> 赞同：4
> 
> 时间：2012-05-22T11:37:52.060
> 
> 标签：c#, itextsharp

我使用[http://www.codeproject.com/Articles/260470/PDF-reporting-using-ASP-NET-MVC3](http://www.codeproject.com/Articles/260470/PDF-reporting-using-ASP-NET-MVC3)从我的剃刀视图中生成 pdf 文件，效果很好，但我无法显示像 č 这样的西里尔字母， C 。我尝试了一切，但无法正常工作。

我必须以某种方式告诉 HtmlWorker 使用不同的字体：

```
 using (var htmlViewReader = new StringReader(htmlText))
                    {                       
                        using (var htmlWorker = new HTMLWorker(pdfDocument))
                        {                            

                            htmlWorker.Parse(htmlViewReader);
                        }
                    } 
```

你能帮我吗？

**编辑：**

我少了一行

```
styleSheet.LoadTagStyle(HtmlTags.BODY, HtmlTags.ENCODING, BaseFont.IDENTITY_H); 
```

其余的与答案相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T07:33:37.210

如果您将*StandardPdfRenderer的**Render*方法更改为以下代码段，它应该可以工作：

 *```
public byte[] Render(string htmlText, string pageTitle)
{
    byte[] renderedBuffer;

    using (var outputMemoryStream = new MemoryStream())
    {
        using (var pdfDocument = new Document(PageSize.A4, HorizontalMargin, HorizontalMargin, VerticalMargin, VerticalMargin))
        {
            string arialuniTff = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Fonts), "ARIALUNI.TTF");
            iTextSharp.text.FontFactory.Register(arialuniTff);

            PdfWriter pdfWriter = PdfWriter.GetInstance(pdfDocument, outputMemoryStream);

            pdfWriter.CloseStream = false;
            pdfWriter.PageEvent = new PrintHeaderFooter { Title = pageTitle };
            pdfDocument.Open();

            using (var htmlViewReader = new StringReader(htmlText))
            {
                using (var htmlWorker = new HTMLWorker(pdfDocument))
                {
                    var styleSheet = new iTextSharp.text.html.simpleparser.StyleSheet();
                    styleSheet.LoadTagStyle(HtmlTags.BODY, HtmlTags.FACE, "Arial Unicode MS");
                    styleSheet.LoadTagStyle(HtmlTags.BODY, HtmlTags.ENCODING, BaseFont.IDENTITY_H);
                    htmlWorker.SetStyleSheet(styleSheet);

                    htmlWorker.Parse(htmlViewReader);
                }
            }
        }

        renderedBuffer = new byte[outputMemoryStream.Position];
        outputMemoryStream.Position = 0;
        outputMemoryStream.Read(renderedBuffer, 0, renderedBuffer.Length);
    }

    return renderedBuffer;
} 
```*

# .net - Need support on win2003 server with Excel import using asp.net

> ID：10701282
> 
> 赞同：0
> 
> 时间：2012-05-22T11:38:17.043
> 
> 标签：.net, oledb

I have a web application running on win 2003 server with mssql 2005\. I want to import some data through a .NET application to mssql server.

but I'm getting the error below:

```
The 'Microsoft.ACE.OLEDB.8.0' provider is not registered on the local machine. 
```

I installed the this driver 2007 Office System Driver: Data Connectivity Components downloaded from Microsoft.

but still the same error. Do I need to install anything else onn the server?

My server config : win 2003 x64 SP 2 with MsSql 2005 express edition

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:15:31.753

这通常是驱动程序兼容性问题。由于您运行的是 x64 操作系统，因此您需要确保已安装 x64 驱动程序或确保 ASP.NET 应用程序在 x86 模式下运行。

# java - Android orientation trick needed

> ID：10701286
> 
> 赞同：1
> 
> 时间：2012-05-22T11:38:48.007
> 
> 标签：java, android, orientation

So i have a web view in a activity

I need it to **keep orientation the same as the one the devices was in, when user opened activity** (so if LANDSCAPE when activity was opened -> keep that!..if PORTRAIT -> keep that)

So

*   dont need XML manifest notation.. i dont want to force a specific orientation, just to keep opened one!

These two tentatives do nothing:

```
 public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(null); 
```

or

```
public void onConfigurationChanged(Configuration newConfig) {
      newConfig.orientation = getResources().getConfiguration().orientation;
      super.onConfigurationChanged(newConfig); 
```

So ideas??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:48:49.907

将 android:configChanges="orientation" 放在您的活动下的清单中会告诉 android 活动将自行处理屏幕方向更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:44:51.920

用于修复活动方向

设置Mani-feast活动

```
android:screenOrientation="portrait" 
```

或者

```
android:screenOrientation="landscape" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:45:21.687

您应该阅读 Android 活动生命周期。当您重新打开一个活动时，会构建一个新实例。因此，没有“以前的”方向。如果您想要与暂停活动时相同的方向，则应将先前的方向存储在一个贯穿整个生命周期的值中。

编辑：如果你想让你的例子工作，你应该在清单中声明它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T12:14:51.340

我不确定您为什么要实现该功能，但这应该可以：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if(savedInstanceState == null) // you only want to save orientation when you are loading the activity for the first time
    {
        ((MyApp)getApplication()).orientation = getResources().getConfiguration().orientation; // I saved the orientation in the application class, but you can save it anywhere you like except in "this"
        Log.d("test", "orientation in onCreate: "+((MyApp)getApplication()).orientation);
    }

}
@Override
protected void onResume() {
    super.onResume();
    Log.d("test", "setContentview with orientation in onResume "+((MyApp)getApplication()).orientation);
    if(((MyApp)getApplication()).orientation==Configuration.ORIENTATION_LANDSCAPE)
    {
        setContentView(R.layout.my_layout_portrait);
    }
    else if(((MyApp)getApplication()).orientation ==Configuration.ORIENTATION_PORTRAIT)
    {
        setContentView(R.layout.my_layout_landscape);
    }
} 
```

顺便说一句，对我来说，强制这样的方向是个坏主意。

# objective-c - ARC 的向后兼容性如何？

> ID：10701287
> 
> 赞同：0
> 
> 时间：2012-05-22T11:38:49.520
> 
> 标签：objective-c, cocoa-touch, automatic-ref-counting, backwards-compatibility

使用 ARC 编译的应用程序可以在以前 (<5.0) 版本的 iOS 上运行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T11:44:01.167

从[文档](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)中：

> Mac OS X v10.6 和 v10.7（64 位应用程序）以及 iOS 4 和 iOS 5 的 Xcode 4.2 支持 ARC。Mac OS X v10.6 和 iOS 4 不支持弱引用。

# ios - iOS 故事板中的水平翻转方向

> ID：10701290
> 
> 赞同：5
> 
> 时间：2012-05-22T11:38:54.073
> 
> 标签：ios, cocoa-touch, ios5

我在 Storyboard 中设置了两个视图控制器，每个控制器都有一个操作按钮。我设置了两个segue：

1.  从第一个视图控制器到第二个视图控制器：Modal、Flip Horizo​​ntal。
2.  从第二个视图控制器到第一个视图控制器：Modal、Flip Horizo​​ntal。

一切正常，但我希望它可以单向翻转，现在它为两个视图控制器翻转相同的方向。

制作翻转翻转效果的最简单方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T14:49:42.343

我遇到了同样的问题，希望找到解决方案。

我使用自定义 segue 来翻转回去的路。这是我的代码`FlipLeftSegue`

```
@implementation FlipLeftSegue
- (void)perform
{
    UIViewController *src = (UIViewController *) self.sourceViewController;
    UIViewController *dst = (UIViewController *) self.destinationViewController;    

    [UIView beginAnimations:@"LeftFlip" context:nil];
    [UIView setAnimationDuration:0.8];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:src.view.superview cache:YES];
    [UIView commitAnimations];

    [src presentViewController:dst animated:NO completion:nil];
}
@end 
```

我发现这个解决方案的唯一问题`viewDidAppear`是动画开始时立即调用该方法。而对于普通的 segue，它是在动画之后调用的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T05:51:13.090

我建议不要创建 ViewController 的新演示文稿，而是访问第二个 ViewController 上的 presentingViewController 属性，然后在其上调用 -dismissViewControllerAnimated:completion:。像这样：

```
-(IBAction)someResponderToYourCancelButtonOrWhatever:(id)sender {
    // Do some stuff
    [self.presentingViewController dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-29T12:48:51.027

您最好在 NSZombie 的回答中使用此代码：

```
- (void)swapChildVCFrom:(UIViewController *)from to:(UIViewController *)to options:(enum UIViewAnimationOptions)options
{
    [self addChildViewController:to];
    [from willMoveToParentViewController:nil];

    // Adjust the new child view controller's view's frame
    // For example here just set it to fill the parent view
    to.view.frame = self.view.bounds;

    [self transitionFromViewController:from
                      toViewController:to
                              duration:1.0
                               options:options
                            animations:nil
                            completion:^(BOOL b)
                            {
                                [to didMoveToParentViewController:self];
                                [from.view removeFromSuperview];
                                [from removeFromParentViewController];
                            }];
} 
```

# vba - 使用vba在excel中记录下载的文件

> ID：10701291
> 
> 赞同：1
> 
> 时间：2012-05-22T11:39:02.910
> 
> 标签：vba, excel

我可以使用下面的宏成功地从服务器下载文件，但有时文件名可能不正确，因此我必须手动浏览目录并将下载的内容与应该下载的内容进行比较，这变得非常耗时。我需要在此宏中包含什么以使其提供未下载内容的日志？

```
Private Declare Function URLDownloadToFile Lib "urlmon" _
Alias "URLDownloadToFileA" (ByVal pCaller As Long, ByVal szURL As String, _
ByVal szFileName As String, ByVal dwReserved As Long, ByVal lpfnCB As Long) As Long
Sub imagedownloader()
    Dim i As Long, url As String
    With ActiveWorkbook.Sheets("Sheet1") 'must use the name of the sheet to do this
    For i = 1 To 4 'Where 4 is the number of items in the list (can be made dynamic)
        DoEvents
        url = "http://mydomain.com/images/" & .Range("A" & i).Value & ".jpg"
        URLDownloadToFile 0, url, "C:\downloads\images\" & .Range("A" & i).Value & ".jpg", 0, 0
    Next
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:46:52.653

这是你正在尝试的吗？（**未经测试**）

```
Option Explicit

Private Declare Function URLDownloadToFile Lib "urlmon" _
Alias "URLDownloadToFileA" (ByVal pCaller As Long, ByVal szURL As String, _
ByVal szFileName As String, ByVal dwReserved As Long, ByVal lpfnCB As Long) As Long

Sub imagedownloader()
    Dim i As Long
    Dim filesize As Integer
    Dim FlName As String, url As String

    FlName = "C:\downloads\images\Log.Txt"

    '~~> get a free file handle
    filesize = FreeFile()

    '~~> Open your file
    Open FlName For Output As #filesize

    With ActiveWorkbook.Sheets("Sheet1")
        For i = 1 To 4
            url = "http://mydomain.com/images/" & .Range("A" & i).Value & ".jpg"

            URLDownloadToFile 0, url, "C:\downloads\images\" & .Range("A" & i).Value & ".jpg", 0, 0

            DoEvents

            If DoesFileExist("C:\downloads\images\" & .Range("A" & i).Value & ".jpg") Then
                Print #filesize, .Range("A" & i).Value & ".jpg - Successfully Downloaded"
            Else
                Print #filesize, .Range("A" & i).Value & ".jpg - Not Downloaded"
            End If
        Next
    End With

    Close #filesize
End Sub

Public Function DoesFileExist(FilePath As String) As Boolean
    On Error GoTo Whoa
    If Not Dir(FilePath, vbDirectory) = vbNullString Then DoesFileExist = True
Whoa:
    On Error GoTo 0
End Function 
```

**跟进**

这是一个高级版本（**TESTED AND TRIED**）。这是必需的，因为`URLDownloadToFile`即使文件不可用也会下载文件。在这种情况下，唯一的事情就是图像文件会损坏。

处理这个问题的最好方法是创建一个用户窗体并添加一个图像控件。如果需要，可以将图像控件的可见属性设置为 false。现在使用此代码。我已经评论了它，所以你在理解它时不会有问题:)

```
Option Explicit

Private Declare Function URLDownloadToFile Lib "urlmon" _
Alias "URLDownloadToFileA" (ByVal pCaller As Long, ByVal szURL As String, _
ByVal szFileName As String, ByVal dwReserved As Long, ByVal lpfnCB As Long) As Long

Private Sub CommandButton1_Click()
    Dim i As Long
    Dim filesize As Integer
    Dim FlName As String, url As String

    FlName = "C:\downloads\images\Log.Txt"

    '~~> Get a free file handle
    filesize = FreeFile()

    '~~> Open your file
    Open FlName For Output As #filesize

    With ActiveWorkbook.Sheets("Sheet1")
        For i = 1 To 4
            url = "http://capnhud.host22.com/examples/" & .Range("A" & i).Value & ".jpg"

            URLDownloadToFile 0, url, "C:\downloads\images\" & .Range("A" & i).Value & ".jpg", 0, 0

            DoEvents

            '~~> Try to load the downloaded image to Image1 Control
            On Error Resume Next
            Set Image1.Picture = LoadPicture("C:\downloads\images\" & .Range("A" & i).Value & ".jpg")
            '~~> If image is not in the correct format then delete it
            If Not Err.Number = 0 Then
                Kill "C:\downloads\images\" & .Range("A" & i).Value & ".jpg"
                Print #filesize, .Range("A" & i).Value & ".jpg - Not Downloaded"
            Else
                Print #filesize, .Range("A" & i).Value & ".jpg - Successfully Downloaded"
            End If
        Next
    End With

    Close #filesize
End Sub 
```

**快照**

![在此处输入图像描述](../Images/6dcd4f6a0cf7d13dcda1974d0f2c975a.png)

**注意**：您现在实际上不需要`DoesFileExist`功能。您也可以对文本进行写入`If Not Err.Number = 0 Then`。

**样本文件**

[http://wikisend.com/download/310908/Sample.xlsm](http://wikisend.com/download/310908/Sample.xlsm)

高温高压

# https - 使用 squid 和 HTTPS 网站进行 URL 过滤

> ID：10701292
> 
> 赞同：0
> 
> 时间：2012-05-22T11:39:08.737
> 
> 标签：https, filtering, squid

我正在寻找在我的 squid 代理上阻止网站的最简单方法。我考虑过 squidguard，但我希望尽可能简单地根据一天中的时间阻止/取消阻止很少的网站。

我创建了一个包含要阻止的 URL 的 ACL，其中包含以下行

```
acl bad_url dstdomain "/etc/squid/bad_url.squid"
http_access deny bad_url 
```

我使用 sed 命令从 crontab 中删除了这些行，它按计划工作。但是通过 HTTPS 访问该站点仍然有效。

Squid 中的任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T01:53:39.483

除了你已经拥有的：

```
acl bad_url dstdomain "/etc/squid/bad_url.squid"
http_access 拒绝 bad_url

```

添加以下信息

> http_access 拒绝 CONNECT bad_url

您的最终配置将如下所示；

```
acl bad_url dstdomain "/etc/squid/bad_url.squid"
http_access 拒绝 bad_url
http_access 拒绝 CONNECT bad_url

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-07T09:28:15.240

检查您是否已将 Squid 配置为拦截 HTTPS 流量。通常不建议拦截 HTTPS 流量，因为它是在模拟“中间人”攻击。

# jruby - How to get value from hbase and put it into a variable?

> ID：10701293
> 
> 赞同：0
> 
> 时间：2012-05-22T11:39:10.300
> 
> 标签：jruby, hbase, irb

This is probably a noob question, so I apologize in advance.

The HBase console, as far as I understand, is an extension (or a script running over) JIRB. Also, it comes with several HBase-specific commands, one of which is 'get' - to retrieve columns\values from a table. However, it seems like 'get' only writes to screen and doesn't output values at all.

Is there any native hbase console command which will allow me to retrieve a value (e.g. a set of rows\columns), put them into a variable and retrieve their values?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:00:56.247

不，0.92 中没有本机控制台命令。如果你深入研究源代码，有一个类 Hbase::Table 可以用来做你想做的事。我相信这将在 0.96 中更加暴露。在这一点上，我已经求助于将我自己的 Ruby 添加到我的 shell 来处理各种常见任务（比如在扫描中使用 SingleColumnValueFilters）。

# android - 我的应用程序在 android 中意外停止，请重试

> ID：10701310
> 
> 赞同：0
> 
> 时间：2012-05-22T11:40:40.873
> 
> 标签：android

我的 android 代码中有一个错误：

```
 case R.id.bSQLOpenView:
        Intent i = new Intent("com.fps.say.SQLView");
        startActivity(i);
        break; 
```

我的 logcat 说没有找到处理意图的活动。我已经在 AndroidManifest.xml 声明了我的课程，为什么我仍然会收到此错误。

这是我的 manifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.fps.say"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.SET_WALLPAPER"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WAKE_LOCK"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Splash"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
                <activity
            android:name=".Menu"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.fps.say.MENU" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <activity
            android:name=".SayActivity"
            android:label="@string/app_name" >
                <intent-filter>
                <action android:name="com.fps.say.SAYACTIVITY" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <activity
            android:name=".TextPlay"
            android:label="@string/app_name" >
                <intent-filter>
                <action android:name="com.fps.say.TEXTPLAY" />
            </intent-filter>
        </activity>

        <activity
            android:name=".Email"
            android:label="@string/app_name" >
                <intent-filter>
                <action android:name="com.fps.say.EMAIL" />
            </intent-filter>
        </activity>

        <activity
            android:name=".Camera"
            android:label="Camera Application" 
            android:screenOrientation="portrait">
                <intent-filter>
                <action android:name="com.fps.say.CAMERA" />
            </intent-filter>
        </activity>

        <activity
            android:name=".AboutUs"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Dialog">
                <intent-filter>
                <action android:name="com.fps.say.ABOUTUS" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <activity
            android:name=".Prefs"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="com.fps.say.PREFS" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>        

        <activity
            android:name=".Data"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="com.fps.say.DATA" />
            </intent-filter>
        </activity>

         <activity
            android:name=".GFX"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="com.fps.say.GFX" />
            </intent-filter>
        </activity>       

         <activity
            android:name=".GFXSurface"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="com.fps.say.GFXSURFACE" />
            </intent-filter>
        </activity>          

        <activity
            android:name=".OpenedClass"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="com.fps.say.OPENEDCLASS" />
            </intent-filter>
        </activity>

        <activity
            android:name=".SoundStuff"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="com.fps.say.SOUNDSTUFF" />
            </intent-filter>
        </activity>        

        <activity
            android:name=".Slider"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="com.fps.say.SLIDER" />
            </intent-filter>
        </activity>          

        <activity
            android:name=".Tabs"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="com.fps.say.TABS" />
            </intent-filter>
        </activity>             

        <activity
            android:name=".SimpleBrowser"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="com.fps.say.SIMPLEBROWSER" />
            </intent-filter>
        </activity>     

        <activity
            android:name=".SharedPrefs"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="com.fps.say.SHAREDPREFS" />
            </intent-filter>
        </activity>         

        <activity
            android:name=".InternalData"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="com.fps.say.INTERNALDATA" />
            </intent-filter>
        </activity>          

        <activity
            android:name=".ExternalData"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="com.fps.say.EXTERNALDATA" />
            </intent-filter>
        </activity>          

        <activity
            android:name=".SQLView"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="com.fps.say.SQLVIEW" />
            </intent-filter>
        </activity>         

        <activity
            android:name=".SQLiteExample"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="com.fps.say.SQLITEEXAMPLE" />
            </intent-filter>
        </activity>           

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:54:03.970

*   复核类名
*   复核清单文件中应提及的名称
*   执行干净构建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:55:53.053

有几种可能的方式来运行一个活动。这是我使用的方法：

```
Intent i = new Intent (this, YourTargetActivity.class);
startActivity(i); 
```

这对应于您当前的活动*。*

使用这样的调用可以方便地让 IDE 自动完成所需的活动名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T12:00:00.970

```
Intent i = new Intent(this,SQLVIEW.class); 
```

# iphone - Parsing xml multiple times

> ID：10701311
> 
> 赞同：0
> 
> 时间：2012-05-22T11:40:43.000
> 
> 标签：iphone, objective-c, ios

In my application I have to parsed xml file two times in a single build as per my applications requirement.But I am loading the array in only first parse . So is there any effect on my application performance due to parsing xml twice?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:48:23.127

这取决于您使用的是 dom-parser 还是 sax-parse ：-

1.  sax 是基于事件的解析器，而 dom 不是
2.  sax 仅在可以双向访问 dom 的情况下才前进。
3.  sax 在读取文件时解析文件，当 dom 加载到内存中进行解析时
4.  Sax 没有内存限制，因为 dom 有内存限制，因为 xml 文件被加载到内存中以解析文件。
5.  sax 是只读的，dom 是读写的。

所以，如果你有一个非常大的 xml 并且你正在使用 dom，那么它对应用程序的性能有影响。Sax 在移动平台上是可取的（无论如何解析 2 次确实会降低应用程序的性能，但如果你有 2 次解析，你可能会使用 dom 因为它保留了它的节点，你不需要解析 2 次。）

对于非常小的 xml，两者几乎相同。

# google-apps-script - 出现错误：找不到方法偏移量（。（Google Apps 脚本）

> ID：10701313
> 
> 赞同：0
> 
> 时间：2012-05-22T11:40:45.383
> 
> 标签：google-apps-script

以下代码执行预期的操作。我收到一个弹出错误：遇到错误：找不到方法偏移量（。

```
 function respondToSubmit(e) {

  var app = UiApp.getActiveApplication();
  var ss = SpreadsheetApp.openById("0AmDozcwoS3_udGVqaUdfTTRnYlVybmtydklpMkN0Mnc");
  var sheets = ss.getSheets();
  var tB3 = e.parameter.TextBox3;
  var cache = sheetCache(sheets[2].getRange("a1"));
  var values = cache.getValuesOfRange(sheets[2].getRange(22,37,113,36));

      var rowValue;
  for(var j = 0; j < values.length; ++j) {
    if (values[j][0] == tB3 ) { 
       rowValue = j;                          
      break;
     }
  }  
   Logger.log(rowValue)

  var cD = sheets[2].getRange(22,3);
  var tB1 = e.parameter.TextBox1;
  var tB2 = e.parameter.TextBox2;
  var lB1 = e.parameter.ListBox2;

  cD.offset(rowValue, 4).setValue(parseFloat(tB1));
  cD.offset(rowValue, 9).setValue(parseFloat(tB2));  
  ((tB1 == 0) && (tB2 == 0)) ? cD.offset(rowValue, 0).setValue("") :        cD.offset(rowValue, 0).setValue(tB3);
  ((tB1 == 0) && (tB2 == 0)) ? cD.offset(rowValue, 1).setValue("") : cD.offset(rowValue, 1).setValue(lB1);

  var app = UiApp.getActiveApplication();
  app.close();
  return app;  
} 
```

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:27:19.540

似乎cD范围不可用。确保 sheet[2] 引用 n 个现有工作表。

# asp.net - 提取 SQL 数据库中的所有数据，然后使用 LINQ 对其进行过滤

> ID：10701315
> 
> 赞同：0
> 
> 时间：2012-05-22T11:40:48.130
> 
> 标签：asp.net, sql, linq, caching, c#-4.0

我有一个用户权限列表。我正在考虑从`UserPermission`表中提取所有数据，将其放入缓存中，然后`userID`使用 LINQ 对其进行过滤。

因此，下次有人尝试访问用户权限屏幕时，我会将数据保存在缓存中，然后根据用户 ID 过滤和显示必要的基础。

这样做有什么表现吗？或者在数据库/数据层中过滤它的速度更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:48:23.753

这里有两个因素在起作用

1.  通过 LINQ 过滤数据的速度
2.  通过 SQL 过滤数据并将数据从数据存储返回到应用程序的速度

一般来说，对于小型数据集，1\. 和 2\. 之间的差异可以忽略不计。

对于小结果的大数据集，2.会有更好的表现

对于具有大结果的大数据集，1.将具有更好的性能

但是当然，这种概括是完全没有用的，因为它完全取决于您的环境和您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:43:49.267

您需要权衡延迟、性能和陈旧数据。

不同的用例总是不同的......

但是这种东西已经内置在 .net 中了——查找 ASP.NET Authorization Providers

# jquery - Jquery自动完成：如何防止事件触发

> ID：10701316
> 
> 赞同：0
> 
> 时间：2012-05-22T11:40:48.287
> 
> 标签：jquery, autocomplete

诸如搜索/选择之类的自动完成事件正在触发诸如“Home”、“End”、“Shift”之类的键盘键。

我在演示网站上看到这些没有触发示例 例如：http: [//jqueryui.com/demos/autocomplete/remote.html](http://jqueryui.com/demos/autocomplete/remote.html)

请让我知道如何阻止某些键盘事件的搜索/选择事件。

我认为这是默认行为，但在我的情况下不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:49:55.937

我不确定为什么这些事件会为您触发但不是在演示中，也许检查您的 jquery UI 版本？

为了阻止某些键的这些事件，您可以返回 false。

```
$( ".selector" ).autocomplete({
   search: function(event, ui) { 
     if(event.keyCode === 36) {
       // HOME key pressed
       return false;
     }
   }
}); 
```

[请参阅此处](http://jqueryui.com/demos/autocomplete/)的“事件”选项卡以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:26:05.763

你可以试试这个；

```
$( "#selectorid" ).autocomplete({
    search: function(event, ui) {
        $.lastText = $('#selectorid').val();
    }
});

$('#selectorid').keypress(function (e) {
if ($(this).val() == $.lastText) return;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:55:55.983

您可以将最后一个文本保存到 var 中，并在触发事件时检查文本是否已更改。

```
$( ".selector" ).autocomplete({
    search: function(event, ui) {
        if($('.selector').val() === lastText) {
            return false;
        }
        // do what do you want

        lastText = $('.selector').val();
    }
}); 
```

# javascript - 滑块更改时需要更改 div 的内容

> ID：10701317
> 
> 赞同：0
> 
> 时间：2012-05-22T11:40:49.173
> 
> 标签：javascript, jquery

我的 jquery 横幅需要一些修复。我已将回声滑块用于横幅。当横幅图像更改为另一个图像时，我们需要更改不在滑块边界内的 div 中的内容。Div 是单独的 div （与滑块没有连接）。

我已经尝试过使用代码。我只是根据滑块的导航放置 if 语句。

我的代码只影响了第一张横幅图片。它不影响下一个横幅

帮我

在我的代码下面

```
<div class="echo-nav">
<a rel="0" class="echo-control active" href="javascript:;">1</a>
<a rel="1" class="echo-control" href="javascript:;">2</a>
<a rel="2" class="echo-control" href="javascript:;">3</a>
<a rel="3" class="echo-control" href="javascript:;">4</a>
<a rel="4" class="echo-control" href="javascript:;">5</a>
<a rel="5" class="echo-control" href="javascript:;">6</a>
</div>

<script>
     $(document).ready(function(){
    if($('.echo-nav a.active').attr('rel')=='0'){
            $('#app_info').text('Some dummy contents for one');                 
        }
    else if($('.echo-nav a.active').attr('rel')=='1'){
            $('#app_info').text('Some dummy contents for Two ');                    

              }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:49:58.480

你可以用另一种（简单的）方式来做：

## *[演示 jsBin](http://jsbin.com/uzedat/edit#javascript,html,live)*

```
var contents = [
    'Some dummy contents for 1',
    'Some dummy contents for 2',
    'Some dummy contents for 3',
    'Some dummy contents for 4',
    'Some dummy contents for 5',
    'Some dummy contents for 6'
];

var activeRelN = $('.echo-nav a.active').index(); // get index N (0,1,2,3...)

$('#app_info').html(contents[activeRelN]); 
```

# jquery - JQPlot - 饼图 - 获取点击的切片颜色

> ID：10701321
> 
> 赞同：4
> 
> 时间：2012-05-22T11:41:10.360
> 
> 标签：jquery, jqplot

我的要求是在用户单击它时获取饼图的选定颜色。如果我可以在以下功能中做到这一点会很好：

```
$('#chart1').bind('jqplotDataClick',
    function (ev, seriesIndex, pointIndex, data) {
      alert("ev = " + ev + " seriesIndex = " + seriesIndex + "pointIndex = " + pointIndex + "data = " + data);
}); 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T11:53:40.077

是的，你可以得到颜色：

```
plot.series[seriesIndex].seriesColors[pointIndex] 
```

`plot`您存储 jqPlot 的 var 在哪里

[这里的工作示例](http://jsfiddle.net/NYewy/15/)

# c# - 根据输入框获取不同的 url

> ID：10701324
> 
> 赞同：2
> 
> 时间：2012-05-22T11:41:16.550
> 
> 标签：c#, asp.net-mvc, model-view-controller, asp.net-mvc-2, asp.net-mvc-routing

我正在使用具有类似 url 的 asp.net MVC 模式`controller/action/id`。如果我直接导​​航到 url，这很好用。

我想要一个页面，用户可以在其中输入`id`并单击一个按钮（或链接），将他们带到正确的 url。

我是否需要使用某些客户端脚本根据输入以某种方式创建指向不同 url 的操作链接？
或者我可以呈现一个`GET`正确 url 的表单吗？

我在做什么不寻常；我应该做点别的吗？（请注意，id 的数量太长，无法列出）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:46:10.050

假设您设置了默认路由，您可以执行以下客户端脚本（但请确保它在同一个文件中）：

```
var yourLink = '@Url.Action("controller", "action")';
//should output controller/action/ 
```

然后假设你的按钮有 id`myButton`并且文本框有 id `myTextBox`，你可以这样做 jQuery：

```
$("#myButton").click(function () {
    location.href = yourLink + $("#myTextBox").val();
    //should output controller/action/5 for example, although you might
    //want to make sure they've put a "correct" value in here
}); 
```

# javascript - 如何用 JS 构建自己的甘特图

> ID：10701325
> 
> 赞同：4
> 
> 时间：2012-05-22T11:41:36.723
> 
> 标签：javascript, html, gantt-chart

我即将看看 HTML5 画布中的 Javascript 是否能够构建我自己的甘特图。图表应提供拖放功能。有没有一个图书馆可以给我一个很好的基础？所以我不必从头开始构建所有东西。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-22T11:46:21.087

[**js甘特图**](http://www.jsgantt.com/)

> 一个功能齐全的**甘特图组件**，完全用**Javascript**、 **CSS**和**AJAX**构建。无需图像。
> 
> 功能包括：任务和可折叠任务组依赖关系、任务完成、任务颜色、里程碑、资源、任务的动态加载、格式的动态更改（日/周/月）、从 XML 文件加载甘特图。
> 
> **[您可以在http://www.jsgantt.com](http://www.jsgantt.com/#tDownload)**查看实时示例

其他一些库：

[https://www.bryntum.com/products/gantt-for-extjs/](https://www.bryntum.com/products/gantt-for-extjs/)

[http://www.jsgantt.com/#tDownload](http://www.jsgantt.com/#tDownload)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:49:31.770

你试过用谷歌搜索一些例子吗？那里有几十个。[jsgantt](http://jsgantt.com/)和 [dhtmlxgantt](http://dhtmlx.com/docs/products/dhtmlxGantt/index.shtml)是我找到的前两个，没有太多麻烦。

# android - 页面标识符和android

> ID：10701326
> 
> 赞同：0
> 
> 时间：2012-05-22T11:41:40.107
> 
> 标签：android

我想做一些这样的事情： ![在此处输入图像描述](../Images/6534b084a19b14c1541798062ffad436.png)

我想在这张照片上做一些类似的事情。我想换照片，有这个小圆圈。在android中有任何小部件可以做到这一点吗？我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:55:56.573

我会使用 GalleryView 和 RadioGroup，其中每个点都是 RadioButton，然后您可以更改 GalleryView 更改时选择的收音机。

您还可以设置圆点的样式并使它们看起来像您想要的任何东西。

# c++ - Qt C++初始化一个QStringList类成员

> ID：10701331
> 
> 赞同：0
> 
> 时间：2012-05-22T11:41:56.383
> 
> 标签：c++, qt, qstring

我有一个类型的班级成员`QStringList`。我有一个猜测，当这个类被实例化时，`nex`实例会得到一个`QStringLsit`没有元素的实例。
我有一个函数应该`QStringList`在用户交互中填写这个。但是，我在调试器中看到函数调用时类成员不存在。这可能是什么？有没有办法初始化`QListString`我可能在这里丢失的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:49:36.503

`QStringList`应该在创建对象时自动初始化（除非它是指针）。我看到调试器行为的两种可能解释：

*   您的对象（您调用函数的对象）不会在函数调用之前创建；这意味着`this`输入函数时指针无效。如果您在指向您的类的未初始化指针上调用该函数，则可能会出现这种情况。
*   调试器只是没有`QStringList`正确显示该成员。
*   如果您的成员是类型`QStringList*`（指针），它不会在对象创建时自动初始化。然后你需要`list = new QStringList();`在构造函数中做。但我怀疑您是否需要一个指向字符串列表的指针。

# java - 当我直接单击按钮时未触发 ValueChangeEvent

> ID：10701334
> 
> 赞同：2
> 
> 时间：2012-05-22T11:42:26.223
> 
> 标签：java, gwt

我有一个带有 valuechange 处理程序的文本框：

```
@UiHandler("box")
public void box_onValueChange(ValueChangeEvent<String> event) {
  window.alert("allright");
} 
```

如果我通过单击其他地方失去焦点，它会很好。除非我点击一个按钮。

有没有我没看到的技巧？我应该破解我的 onclick 事件来触发 valuechangeevent 吗？

谢谢

# windows-phone-7 - 如何使用 RichTextBox 在 WP7 中添加笑脸？

> ID：10701336
> 
> 赞同：1
> 
> 时间：2012-05-22T11:42:37.860
> 
> 标签：windows-phone-7

谁能告诉有没有办法在 RichTextBox 中添加笑脸。如果可能，请提供链接或代码以继续

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:02:22.253

这取决于您要添加的笑脸，但有很多选择。
例如：

```
<RichTextBox>
    <Paragraph>;)</Paragraph>
    <Paragraph>☺&lt;/Paragraph>
    <Paragraph>&#x236a;</Paragraph>
</RichTextBox> 
```

# ruby - 如何使用 resque 发送响应

> ID：10701347
> 
> 赞同：1
> 
> 时间：2012-05-22T11:43:38.390
> 
> 标签：ruby, ruby-on-rails-3, redis, resque

我们这里有 3 个 resque 工作人员，负责处理和转换一些数据。现在，我需要向向我发送数据的人发送回复。如何发送回复？resque 是否有异步方式向客户端发送响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:03:13.973

Resque 不能（也从未设计为）这样做，但是，您可以使用 redis 或您的数据库作为通信机制。我们实际上是在处理长时间运行的任务时这样做的。例如，在将作业排入队列时，只需在 redis 中创建一个新键，并将该键与作业参数一起传递。随着作业的进行，它可能会更新 redis 中的该键。将这项工作排入队列的人只需要查看该 redis 密钥的更改即可。

如果轮询有问题，也有更有效的“推送”类型的解决方案（例如向应用程序中的控制器或套接字发送 HTTP 通知），尽管只有 3 个工作人员听起来不应该如此。

# php - 如何在 Safari 中保存/下载 MP4（而不是在快速专业播放器中播放文件）

> ID：10701353
> 
> 赞同：1
> 
> 时间：2012-05-22T11:43:50.387
> 
> 标签：php, macos

我已经在上传文件夹中上传了一个带有 php 的 .mp4 文件。现在我用下载链接下载它。它在 Safari 浏览器的 Windows 系统上正确下载。但在 mac 系统上，视频文件正在使用 quicktime pro 播放器播放。虽然我只是想下载它。但它默认播放。这是仅在 safari 浏览器上的问题。有什么办法可以改变这一点。因此默认情况下它不会与 quicktime pro player 一起播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:46:27.700

这*可能是*因为您只是链接到该文件，因此如果用户的计算机有软件来处理它，它将选择默认运行它（假设用户的计算机以这种方式设置）。

如果您使用正确的标题，您可以强制浏览器显示下载对话框提示：

```
 header("Cache-Control: public");
 header("Content-Description: File Transfer");
 header("Content-Disposition: attachment; filename=$file");
 header("Content-Type: video/mpeg");
 header("Content-Transfer-Encoding: binary"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:48:03.177

请使用以下代码，

```
 if (file_exists($file)) {
        header('Pragma: public');   // required
        header('Expires: 0');    // no cache
        header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
        header('Last-Modified: '.gmdate ('D, d M Y H:i:s', filemtime ($file)).' GMT');
        header('Cache-Control: private',false);
        header('Content-Type: octet/stream');
        header('Content-Disposition: attachment; filename="'.basename($file).'"');
        header('Content-Transfer-Encoding: binary');
        header('Content-Length: '.filesize($file));  // provide file size
        header('Connection: close');
        readfile($file);    // push it out
        exit();
    } 
```

# google-plus - Google + Page 将关注者直接添加到特定圈子中

> ID：10701354
> 
> 赞同：1
> 
> 时间：2012-05-22T11:43:53.007
> 
> 标签：google-plus

我创建了一个 google + 帐户并添加了一个业务页面，所以我现在有一个页面 ID。此页面有多个圈子公众、交易员、企业等。

然后，我将 Google api 添加到我的网站，供人们关注我的页面并将他们添加到一个圈子，但很明显，我现在无法确定新的追随者应该在哪个圈子。有没有办法从我的网站直接将关注者添加到特定圈子中。

请帮忙，因为这让我发疯了，还是我错过了一些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:59:28.313

[Google+ 徽章](https://developers.google.com/+/plugins/badge/)是目前唯一无需访问[plus.google.com/circles](https://plus.google.com/circles)即可更改人们所在圈子的方法。如果您想添加这样的方法，可以通过 API 访问圈子的[开放功能请求。](https://code.google.com/p/google-plus-platform/issues/detail?id=9)

# webgl - three.js - 创建可拖动的圆圈

> ID：10701355
> 
> 赞同：0
> 
> 时间：2012-05-22T11:43:53.593
> 
> 标签：webgl, geometry, three.js

我刚刚从 github 克隆了 three.js 项目。我有兴趣在 2d 平面上创建一个可以用鼠标拖动的圆圈。我没有图形编程（WebGL 或 OpenGL）方面的经验。

有人可以指出我正确的方向吗？我试过谷歌，但例子似乎太复杂了。

提前谢谢了，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:52:49.933

我认为这是您需要尝试的事情。它并不像你想象的那么复杂。如果数学把你吓跑了，不用担心 three.js 会为你处理这一切，你只需要添加一个相机、一些形状并让它渲染它们。

请务必花时间阅读[aerotwists 的三个 js 教程](http://aerotwist.com/tutorials/getting-started-with-three-js/)，因为这些教程将为您提供如何设置基本场景的良好基础。

您很快就会意识到，一旦有了场景，您就可以使用当前场景轻松更改对象。

至于拖着东西到处走，我敢肯定，在你能跑之前试着走路。

# qt - 使用 QT 在图片中手绘线性绘图

> ID：10701357
> 
> 赞同：1
> 
> 时间：2012-05-22T11:43:59.440
> 
> 标签：qt, qt4, qtgui

我想在按下按钮时创建一个事件，程序应该允许在图片中使用鼠标指针绘制徒手线。目前我正处于可以在标签窗口中显示相册的阶段。任何人都可以通过提供一些指导或线索来帮助吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:34:11.517

恐怕你的问题很广泛。我建议对您想要实现的目标进行一些研究，也许看看其他人如何解决同样的问题。通过将 SO 更多地用作回答特定问题的资源，您将充分利用 SO。

也就是说，您可以查看以下几件事：

[`QGraphicsScene`](http://qt-project.org/doc/qt-4.8/qgraphicsscene.html)：可以包含大量 2D 图形对象（即您将允许用户绘制的线条）的表面

[`QGraphicsSceneMouseEvent`](http://qt-project.org/doc/qt-4.8/qgraphicsscenemouseevent.html)：您需要捕获和处理的事件，以便从鼠标获取输入到您的场景。您可以通过创建子类`QGraphicsScene`和重新实现来处理此事件[`QGraphicsScene::mouseMoveEvent`](http://qt-project.org/doc/qt-4.8/qgraphicsscene.html#mouseMoveEvent)，或者通过在场景中[安装 eventFilter来处理。](http://qt-project.org/doc/qt-4.8/qobject.html#installEventFilter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:05:37.827

如果您使用简单的 QWidget 显示图片（我的意思是，不是像 QGraphicsScene 这样复杂的东西），只需重新实现`QWidget::mouseMoveEvent(QMouseEvent *e)`. 当用户按下鼠标按钮 ( `e->buttons() != 0`) 时，您可以在图片中进行绘画。

假设您在成员中有您的图片，`QImage img`并在 中跟踪先前的光标位置`QPoint cursorLast`。让我们还假设您使用 QLabel 之类的东西显示图片，您可以在属性中设置图像。然后你可以这样画：

```
void MyWidget::mouseMoveEvent(QMouseEvent *e) {
    if(e->buttons()) {
        if(!cursorLast.isNull()) {
            QPainter p(&img); // and set pen
            p.drawLine(cursorLast, e->pos());
            p.end();
            setImage(img); // update image in your view
        }
        cursorLast = e->pos();
    }
} 
```

`cursorLast`释放鼠标时不要忘记重置成员：

```
void MyWidget::mouseReleaseEvent(QMouseEvent *e) {
    cursorLast = QPoint(); // reset
} 
```

请注意，此代码未经测试，我可能在方法中使用了稍微错误的名称，但很容易找到真正的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T14:11:00.313

以下是如何使用鼠标移动进行绘画的示例：

[http://qt-project.org/doc/qt-4.8/widgets-scribble.html](http://qt-project.org/doc/qt-4.8/widgets-scribble.html)

# xcode - 故事板与 XIB

> ID：10701364
> 
> 赞同：3
> 
> 时间：2012-05-22T11:44:06.040
> 
> 标签：xcode, uistoryboard

我几乎是 XCODE 的新手，几乎所有可用的 tuts 都在用文件所有者等解释使用 XIB 文件进行编程。最新版本的 XCODE 仅适用于 Storyboard，我找不到任何有用的东西。所以拜托，我认为有人必须有一个很好的教程。这真的会帮助我。谢谢

肖尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:14:34.213

当您创建项目时（文件->新建->项目->选择模板前单视图..）删除标签以“使用情节提要”然后您将获得一个xib文件而不是情节提要...现在您可以关注使用 xib 文件的教程 :)

提示：如果您遵循旧教程...分配的时间您还必须删除使用自动引用计数，因为在 Xcode 4 之前它们都使用手动方法（发布等）

祝你好运！

# linux - 执行远程命令并将输入保存到文件

> ID：10701365
> 
> 赞同：2
> 
> 时间：2012-05-22T11:44:19.623
> 
> 标签：linux, shell, ssh, telnet, remote-execution

我需要通过 SSH 访问多个主机，执行特定命令 ( `show ms info`) 并将输出捕获到文件中。我需要将该文件复制回我的 linux 机器

我想使用`ssh`并`expect`提供密码

我的问题是将输出保存到文本文件并同时循环大约 100 台机器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T11:50:27.440

它比你想象的更简单：

```
host1 $ ssh user@host2 ls > remote-output.txt
Enter passphrase for key '/home/user/.ssh/id_rsa':
host1 $ ls
remote-output.txt
host1 $ 
```

要为多个主机执行此操作，我建议使用[ssh-agent](http://en.wikipedia.org/wiki/Ssh-agent)并设置自动密钥：

```
$ ssh-agent bash
$ ssh-add
Enter passphrase for /home/user/.ssh/id_rsa:
$ for h in host1 host2;do ssh $h ls > $h.txt; done
$ ls
host1.txt host2.txt
$ 
```

# javascript - JavaScript（正则表达式）：从输出中排除匹配项

> ID：10701367
> 
> 赞同：5
> 
> 时间：2012-05-22T11:44:24.950
> 
> 标签：javascript, jquery, regex

我有这个文本：**nisi non text600 elit**其中**600**是动态添加的。我怎么才能得到它？

```
var str = ('nisi non text600 elit').match(/text\d+/);
alert(str); 
```

这会提醒**text600**，我怎样才能只提醒**600**而无需额外替换单词**text**（如果可能的话）？

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T11:46:29.390

```
var str = ('nisi non text600 elit').match(/text(\d+)/);
alert(str[1]); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T11:46:46.627

使用括号捕获正则表达式中的组：

```
var str = ('nisi non text600 elit').match(/text(\d+)/)[1]; 
```

注意：正则表达式文字不是字符串，因此不应在其周围使用撇号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:50:04.377

请参阅此工作[jsFiddle](http://jsfiddle.net/ExDwU/)。您需要在正则表达式中捕获某些内容，这是使用`(`and完成的`)`。

结果将是一个数组，其中索引`0`是应用于字符串的整个匹配项，以下索引是您的捕获。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-22T11:46:41.497

```
alert(str.substr(14, 16) ) 
```

试试这个

# database - MS Access 2010 解码数据库

> ID：10701374
> 
> 赞同：4
> 
> 时间：2012-05-22T11:45:01.203
> 
> 标签：database, ms-access

我有一个 MS Access 2003 .mdb 数据库，我想将其转换为 .accdb。

我安装了 MS Office 2010，删除了密码，当我尝试将数据库另存为 .accdb 时，我收到以下消息：

> 您正在尝试转换编码数据库。解码数据库，然后重试。

我没有在 MS Access 2010 中找到任何其他选项来解码数据库。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T11:52:10.200

在尝试转换之前，您需要解码数据库。我找到了以下关于它的 Microsoft 文章：

[访问安全 (MDB) 概述](http://office.microsoft.com/en-us/access-help/overview-of-access-security-mdb-HP005188226.aspx)

这是它的摘录：

> 最简单的保护方法是对数据库进行编码。对数据库进行编码会压缩数据库文件，并有助于保护它不被文字处理器读取。对不采用安全措施的数据库进行编码是无效的，因为任何人都可以打开数据库并获得对数据库中所有对象的完全访问权限。当您以电子方式传输数据库或将其存储在软盘、磁带或光盘上时，编码特别有用。
> 
> 在对 Microsoft Access 数据库进行编码或解码之前，您必须是数据库的所有者，或者，如果数据库采用安全措施，则必须是工作组信息文件的 Admins 组的成员，该文件包含用于帮助保护数据库的帐户. 您还必须能够以独占模式打开数据库，这意味着您必须具有打开/运行和打开独占权限。
> 
> 解码数据库会反转编码。

解码后，您应该能够运行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-19T05:09:42.557

我在尝试在 Access 2010 中打开 Access 97 数据库时收到该消息。我可以选择将数据库转换为 Access 2010 或在没有完整功能的情况下打开数据库。当我选择转换数据库时，我收到了关于它被编码的消息。解决方案是在没有完整功能的情况下打开数据库，然后将其保存为 Access 2000 格式。之后，Access 2010 能够打开它。

# sql-server-2008 - 将 MERGE 转换为 T-SQL 命令

> ID：10701376
> 
> 赞同：0
> 
> 时间：2012-05-22T11:45:04.880
> 
> 标签：sql-server-2008, merge

我有一个`MERGE`在我的 SQL Server 2008 上运行良好的 T-SQL 命令。不幸的是，该代码也必须在 SQL Server 2005 数据库上运行。

为了使以下代码可以在 SQL Server 2005 中运行，我需要进行哪些更改？

感谢您的帮助。

```
DECLARE @CNVAL varchar(100) = 'xyz' DECLARE @ATRBT varchar(100) = 'abcde' DECLARE @CON varchar(100) = 'fgh' 
MERGE into CNEXTR as target
USING (VALUES( @CON, @ATRBT, @CNVAL))
     AS source([Name], ATTR, CNVAL)
     ON (target.[Name] = source.[Name])
     AND (target.ATTR = source.ATTR)
WHEN MATCHED THEN 
     UPDATE SET 
         CNVAL = source.CNVAL 
WHEN NOT MATCHED THEN 
     INSERT([Name], ATTR, CNVAL) 
     VALUES(source.[Name], source.ATTR, source.CNVAL); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T11:49:12.713

将此更改为

```
BEGIN TRAN

   UPDATE CNEXTR
   SET CNVAL = @CNVAL
   WHERE [Name] = @CON AND ATTR = @ATRBT;

   IF @@ROWCOUNT = 0
       INSERT CNEXTR ([Name], ATTR, CNVAL)
       VALUES(@CON, @ATRBT, @CNVAL);

COMMIT TRAN 
```

每个语句都将比 MERGE 简单得多

# php - PHP 得到 ? 没有将变量设置为任何东西

> ID：10701377
> 
> 赞同：2
> 
> 时间：2012-05-22T11:45:09.627
> 
> 标签：php, url, get

如果我打电话：

www.*.com?你好

```
if($_GET["hello"]){
} 
```

它总是会返回 false，因为 ?hello 变量需要设置为...

有没有办法得到？部分而不事先将变量设置为anythign？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T11:46:31.903

您可以检查变量是否设置如下：

```
if(isset($_GET["hello"])){

} 
```

有时`key_exists()`会更好，因为如果`$_GET["hello"] == null`你能得到`false`

```
if (key_exists("hello", $_GET)) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:47:17.327

`$_GET["hello"]`是假的，检查它是否被设置

```
if (isset($_GET["hello"])) {
   //do stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T11:47:25.727

使用[array_key_exists](http://php.net/manual/en/function.array-key-exists.php)：

```
if (array_key_exists("hello", $_GET)) {
} 
```

请阅读 this 以了解[isset 和 array_key_exists 之间的区别](http://jontai.me/blog/2012/03/isset-vs-array_key_exists/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T11:50:28.610

通常的方法是检查它：

```
if(isset($_GET["hello"]) && $_GET["hello"] != ""){
  //code
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T11:54:51.990

```
if(!empty($_GET["hello"]))
{

} 
```

而不是同时检查 isset 和 $_GET != ""。

# android - PhoneGap - Android - 在 phonegap 中滑动导航

> ID：10701380
> 
> 赞同：10
> 
> 时间：2012-05-22T11:45:29.693
> 
> 标签：android, html, jquery-mobile, cordova

我正在为 android 平台制作 phonegap 应用程序。在这个应用程序中，我想在多个 html 页面中滑动导航。请告诉我我该怎么做。要么是在单个 html 页面中完成，要么我必须为此滑动导航创建多个 html 页面。

提前致谢。普雷特

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T12:18:24.103

如果您使用的是 jquery mobile，那么很容易做到这一点，因为 jquery 支持 swipe、swipeleft 和 swiperight 触摸事件。

**刷卡**

滑动事件，当用户垂直（20 或更少像素）或水平（30 或更多像素）滑动时触发

**向左滑动**

向左滑动，当用户向左滑动 30 或更多像素时触发

**向右滑动**

向右滑动，当用户向右滑动 30 或更多像素时触发

用这个：

```
<script>
$("ul").delegate("li", "swipe", function() {
 // The user has swiped to the right on a list view item. Show an edit menu.
$(this).find(".menu-edit").show();
})
</script> 
```

# java - Java 类加载器委托模型是强制性的吗？

> ID：10701385
> 
> 赞同：3
> 
> 时间：2012-05-22T11:45:42.880
> 
> 标签：java, classloader

如果我有一个自定义类加载器，而不是首先委托给它的父类，而是尝试搜索和加载类本身，这是否违反了某些已声明/未声明的规则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T11:48:07.810

Tomcat webapp 类加载器遵循这个模型，所以我想它至少在某种程度上可以工作*:)*来自[Tomcat 类加载器文档](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)：

> 如上所述，Web 应用程序类加载器不同于默认的 Java 2 委托模型（根据 Servlet 规范，版本 2.4，第 9.7.2 节 Web 应用程序类加载器中的建议）。当处理从 Web 应用程序的 WebappX 类加载器加载类的请求时，该类加载器将首先在本地存储库中查找，而不是在查找之前进行委托。也有例外。作为 JRE 基类的一部分的类不能被覆盖。对于某些类（例如 J2SE 1.4+ 中的 XML 解析器组件），可以使用 J2SE 1.4 认可的特性。最后，任何包含 Servlet API 类的 JAR 文件都将被类加载器显式忽略——不要在您的 Web 应用程序中包含此类 JAR。Tomcat 6 中的所有其他类加载器都遵循通常的委托模式。

在我看来，您在执行此操作之前应该非常谨慎，但在某些情况下，如果小心使用它*可能*会很有用。您应该彻底记录它（特别是如果第三方开发人员会看到）并确保包含足够的日志记录/诊断以帮助解决棘手的问题。

# c - 内存块上的 C 写/读检测

> ID：10701387
> 
> 赞同：3
> 
> 时间：2012-05-22T11:45:57.303
> 
> 标签：c, linux, posix, mprotect

我想问一下是否有人知道如何检测分配内存地址上的写入。

起初，我使用 mprotect 和 sigaction 在进行写/读操作时强制出现分段错误。

这种方法有两个负面因素：

*   是难以通过分段错误
*   mprotect 中的内存地址传递必须与页面边界对齐，即不可能使用简单的 malloc 处理此内存地址。

为了澄清问题：

我在 C 中为集群环境构建了一个应用程序。在某些时候，我分配了我在本地主机中调用缓冲区的内存并分配了一些数据。该缓冲区将被发送到远程节点并具有相同的过程。同时，该缓冲区将在远程节点中写入/读取，但我不知道何时（它将使用 DMA 写入/读取缓冲区），必须通知本地主机有关缓冲区修改。就像我上面说的，我已经使用了一些机制，但没有一个能够以某种能力处理它。现在我只是想要一些想法。

这里欢迎每一个不同的想法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:39:24.563

您可以使用硬件断点。缺点是这是特定于硬件的，只能设置有限数量的断点。而且大多数情况下，此类设施不是特定于任务的，因此如果您运行程序的多个实例，它们将共享可用“插槽”的数量。

x86 架构具有调试寄存器，可用于设置硬件内存断点（参见：[http](http://en.wikipedia.org/wiki/X86_debug_register) ://en.wikipedia.org/wiki/X86_debug_register ）。

如果您想对此进行测试，您可以使用 GDB 设置硬件断点。您可以使用 GDB 的“watch”命令在变量上放置硬件内存断点。

请注意，使用调试寄存器`mprotect()`只是完成您要求的工作的方法，我认为它们不是进行内存管理的合理工程实践（您可能在这里尝试做的事情）。也许您可以在更高级别上解释一下您尝试做的事情：http: [//catb.org/esr/faqs/smart-questions.html#goal](http://catb.org/esr/faqs/smart-questions.html#goal)

# fetch - 如果处理器的速度是 3 倍，DDR3 RAM 如何跟上处理器的速度？

> ID：10701388
> 
> 赞同：1
> 
> 时间：2012-05-22T11:45:57.263
> 
> 标签：fetch, ram, processor

当处理器从 RAM 中获取所有指令时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:48:26.597

查找[CPU 缓存](http://en.wikipedia.org/wiki/CPU_cache)。这是经典的方式。

# iphone - 数字键盘上的完成按钮不起作用

> ID：10701389
> 
> 赞同：1
> 
> 时间：2012-05-22T11:46:03.297
> 
> 标签：iphone, uikeyboard, uikeyboardtype

我正在使用文本字段输入移动 nuber，我想添加完成按钮来隐藏键盘，以下是我的代码

```
 - (void)keyboardWillShow:(NSNotification *)note {  
        // create custom button
        UIButton *doneButton = [UIButton buttonWithType:UIButtonTypeCustom];
        doneButton.frame = CGRectMake(0, 163, 106, 53);
        doneButton.adjustsImageWhenHighlighted = NO;
        [doneButton setImage:[UIImage imageNamed:@"doneup.png"] forState:UIControlStateNormal];
        [doneButton setImage:[UIImage imageNamed:@"donedown.png"] forState:UIControlStateHighlighted];
        [doneButton addTarget:self action:@selector(doneButton:) forControlEvents:UIControlEventTouchUpInside];

        // locate keyboard view
       UIWindow* tempWindow = [[[UIApplication sharedApplication] windows]objectAtIndex:1];
    UIView* keyboard;
    for(int i=0; i<[tempWindow.subviews count]; i++) {
        keyboard = [tempWindow.subviews objectAtIndex:i];
        // keyboard found, add the button
        if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 3.2) {
            if([[keyboard description] hasPrefix:@"<UIPeripheralHost"] == YES)
                [keyboard addSubview:doneButton];
        } else {
            if([[keyboard description] hasPrefix:@"<UIKeyboard"] == YES)
                [keyboard addSubview:doneButton];
        }
   }
} 
```

但我无法添加完成按钮，在与断点交叉检查后，我观察到控制没有进入 `if([[keyboard description] hasPrefix:@"UIKeyboard"] == YES)`条件。我正在使用IOS5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:02:33.293

我也确实在我的一个项目中添加了一个自定义完成按钮。我使用的教程提到了那段代码：

```
if([[[UIDevice currentDevice] systemVersion] floatValue] >= 3.2)
{
    if([[tmpKeyboard description] hasPrefix:@"<UIPeripheralHost"] == TRUE)
        [tmpKeyboard addSubview:doneButton];
}
else
{
    if([[tmpKeyboard description] hasPrefix:@"<UIKeyboard"] == TRUE)
        [tmpKeyboard addSubview:doneButton];
} 
```

在 iOS 版本 3.2 之前，您使用 UIKeyboard 的方法很好，但后来您必须将其更改为 UIPeripheralHost。

# ruby - 使用 Ruby 对 Azure 进行身份验证（HTTP 标头身份验证）？

> ID：10701391
> 
> 赞同：2
> 
> 时间：2012-05-22T11:46:05.157
> 
> 标签：ruby, http-headers, http-authentication

由于 Google Search API 已被弃用，我想在我的 Ruby 应用程序中使用 Bing Search API（现在是 Windows Azure API）。

但是，Azure 有一个奇怪的身份验证模式，您可以在其中构建查询 URI，将其粘贴到浏览器中，将密钥传递到标准 HTTP 身份验证框的密码框中，然后进行 POST 以查看结果。我假设这会生成一个签名并以某种方式将其传递到标头中。如果可能，我想在 Ruby 中完成整个过程并跳过浏览器部分。

我在一个[不起眼的 Windows Azure storage gem](https://github.com/johnnyhalife/waz-storage/blob/master/lib/waz/storage/core_service.rb)的源代码中找到**了一个示例**，但我无法弄清楚他们是如何构建签名并进行调用的。有没有一种简单的方法可以在 Ruby 中进行基本的 HTTP 身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T14:07:44.683

我继续使用法拉第内置的基本身份验证方案，如下所示：

```
connection = Faraday.new "http://api.something.com/1/dudez"
connection.basic_auth "username" "password"
connection.get 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:53:48.200

我想为此推荐[RestClient](https://github.com/archiloque/rest-client) gem。我在跨域的 GET'ing 和 POST'ing 中使用它取得了巨大的成功。如果你真的必须像浏览器一样来实现 API，你总是可以使用[Capybara](https://github.com/jnicklas/capybara)。

很抱歉我自己没有尝试过 Azure API，否则我会举个例子。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T12:00:41.633

我记得以前使用另一个 Azure API 执行此操作，但找不到代码。

在此处查看签名过程的详细信息：

[http://msdn.microsoft.com/en-us/library/windowsazure/ee395415.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee395415.aspx)

如果 Azure API 使用 SharedSignature 方法，我无法立即找到

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T20:20:11.903

此处描述了通过 REST API 对 Windows Azure blob 存储的请求进行签名的方法：http: [//msdn.microsoft.com/en-us/library/dd179428.aspx](http://msdn.microsoft.com/en-us/library/dd179428.aspx)。

基本上，您不会通过简单地在 HTTP 标头中添加一些凭据来进行身份验证，您必须使用与您的存储帐户关联的密钥对您的请求进行签名。

# html - HTML 电子邮件应该以 ... 开头吗？

> ID：10701393
> 
> 赞同：18
> 
> 时间：2012-05-22T11:46:20.083
> 
> 标签：html, email

HTML 电子邮件消息是否应该像任何有效的 HTML 文档一样开头，甚至是否应该有 DOCTYPE 声明？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-07T19:57:38.357

如果您打算做任何花哨的事情，HTML 电子邮件应该包含 doctype、html 和 body 声明。

关于这个主题有很多指南可以帮助您学习如何正确编码 HTML 电子邮件，但其中大多数都忽略了文档类型的细节，这就是我偶然发现您的问题的方式。

我建议您阅读以下 2 篇来自熟悉各种问题的知名团队的帖子：

[竞选监督员的看法](http://www.campaignmonitor.com/blog/post/3317/correct-doctype-to-use-in-html-email/)

[关于酸的电子邮件](http://www.emailonacid.com/blog/details/C13/doctype_-_the_black_sheep_of_html_email_design)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T11:48:29.257

不，因为大多数电子邮件客户端会去掉`<html>`and`<body>`标签并用自己的标签替换它们（参见 hotmail）。

至于文档类型，请参见： http: [//www.campaignmonitor.com/blog/post/3317/correct-doctype-to-use-in-html-email/](http://www.campaignmonitor.com/blog/post/3317/correct-doctype-to-use-in-html-email/)

假设您使用表格进行布局（您应该使用表格），您将拥有一个可以有效充当`<body>`元素的包罗万象的表格，然后嵌套在其中，您的其余内容将位于其他表格中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T12:01:43.670

邮件客户端**不是**网络浏览器。它们支持一小部分 HTML，几乎每个客户端在解析这些 HTML 元素时的行为都不同。因此，像、、`html`或这样的元素是不相关的，通常被邮件客户端丢弃。`head``body``DOCTYPE`

来自维基百科：

> HTML 邮件允许发件人正确表达引文（如内联回复）、标题、项目符号列表、强调文本、下标和上标以及其他视觉和排版提示，以提高邮件的可读性和美观性，... 长 URL 可以被链接到而不被分成多个部分，并且文本被包装以适合用户代理视口的宽度，......它允许内联包含表格，以及作为图像的图表或数学公式......

# django - 使用 Whoosh 的 Django Haystack 随机错误

> ID：10701401
> 
> 赞同：5
> 
> 时间：2012-05-22T11:46:33.780
> 
> 标签：django, django-haystack, whoosh

我在我的 Ubuntu 服务器上使用`django-haystack`and`Whoosh`并发现某些搜索查询只会引发错误页面，我不知道为什么会发生这种情况......

我正在使用以下

```
Whoosh==2.4.0
django-haystack==1.2.7 
```

我也`python manage.py update_index`每小时跑一次

**示例回溯**

```
Traceback (most recent call last):

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/core/handlers/base.py", line 111, in get_response
   response = callback(request, *callback_args, **callback_kwargs)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/newrelic-1.2.0.246/newrelic/hooks/framework_django.py", line 430, in __call__
   return self.__wrapped(*args, **kwargs)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/haystack/views.py", line 50, in __call__
   return self.create_response()

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/haystack/views.py", line 145, in create_response
   return render_to_response(self.template, context, context_instance=self.context_class(self.request))

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/shortcuts/__init__.py", line 20, in render_to_response
   return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/loader.py", line 188, in render_to_string
   return t.render(context_instance)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/base.py", line 123, in render
   return self._render(context)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/newrelic-1.2.0.246/newrelic/api/function_trace.py", line 82, in __call__
   return self._nr_next_object(*args, **kwargs)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/base.py", line 117, in _render
   return self.nodelist.render(context)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/base.py", line 744, in render
   bits.append(self.render_node(node, context))

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/base.py", line 757, in render_node
   return node.render(context)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/loader_tags.py", line 127, in render
   return compiled_parent._render(context)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/newrelic-1.2.0.246/newrelic/api/function_trace.py", line 82, in __call__
   return self._nr_next_object(*args, **kwargs)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/base.py", line 117, in _render
   return self.nodelist.render(context)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/base.py", line 744, in render
   bits.append(self.render_node(node, context))

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/base.py", line 757, in render_node
   return node.render(context)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/newrelic-1.2.0.246/newrelic/hooks/framework_django.py", line 622, in __call__
   return self.__wrapped(*args, **kwargs)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/loader_tags.py", line 64, in render
   result = block.nodelist.render(context)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/base.py", line 744, in render
   bits.append(self.render_node(node, context))

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/base.py", line 757, in render_node
   return node.render(context)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/defaulttags.py", line 311, in render
   return self.nodelist_true.render(context)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/base.py", line 744, in render
   bits.append(self.render_node(node, context))

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/base.py", line 757, in render_node
   return node.render(context)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/defaulttags.py", line 227, in render
   nodelist.append(node.render(context))

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/base.py", line 915, in render
   resolved_vars = [var.resolve(context) for var in self.vars_to_resolve]

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/base.py", line 653, in resolve
   value = self._resolve_lookup(context)

 File "/home/fundedbyme/.virtualenvs/fundedbyme/local/lib/python2.7/site-packages/django/template/base.py", line 692, in _resolve_lookup
   raise VariableDoesNotExist("Failed lookup for key [%s] in %r", (bit, current)) # missing attribute

VariableDoesNotExist: Failed lookup for key [object] in u'None'

<WSGIRequest
GET:<QueryDict: {u'q': [u'stockholm']}>, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:55:58.603

你能把你的观点和你的模板代码放在这里吗？如果仅在某些查询而不是全部查询中发生这种情况，则可能是您传递给视图的参数。这是我在自己的项目中使用 Haystack 2.0 和 Whoosh 2.3.2 进行搜索查询的视图代码：

```
def search(request):
   sqs = SearchQuerySet().filter(content=AutoQuery(request.GET['q']))
return  render_to_response('search.html', {'sqs': sqs,}) 
```

这工作得很好。我想您应该考虑使用最新版本的 Haystack，因为我在使用旧的稳定版本时遇到了很多错误。我建议你也偶尔使用“rebuild_index”，以防万一。

# liferay - 如何在 Liferay 中检索用户个人资料图片

> ID：10701405
> 
> 赞同：3
> 
> 时间：2012-05-22T11:46:49.763
> 
> 标签：liferay, profile, image, liferay-6

我想检索用户个人资料图片。我该怎么做？你能分享一个代码片段吗？我正在使用 Liferay 6.0.6。它只有 user.getPortraitId() 而没有 user.getPortraitURL()。因此，一旦我在 JAVA 类中获得了肖像 id，我该怎么处理它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:15:53.537

参见`UserConstants.getPortraitURL(...)` [https://github.com/liferay/liferay-portal/blob/master/portal-service/src/com/liferay/portal/model/UserConstants.java的实现](https://github.com/liferay/liferay-portal/blob/master/portal-service/src/com/liferay/portal/model/UserConstants.java)

通过这种方法，您可以获得图像 url。

如果您需要图像对象，可以使用以下命令加载它`ImageLocalServiceUtil`：

```
 long portraitId = user.getPortraitId();
        Image image = ImageLocalServiceUtil.getImage(portraitId); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:50:40.717

在 JSP 中渲染肖像至少有两种选择：

```
<img src="<%= themeDisplay.getPathImage()%>  
  /image_gallery?img_id=<%= image.getImageId()%>&t=  
  <%= ImageServletTokenUtil.getToken(image.getImageId())%>">  

<img src="<%= themeDisplay.getPathImage() %>/user_portrait?img_id=<%=id %>"> 
```

第一种方法包含基于安全令牌的附加安全方面，您可能会或可能不会发现与您的需求相关。

# sql-server - T-SQL 每天滚动 12 个月的性能

> ID：10701406
> 
> 赞同：2
> 
> 时间：2012-05-22T11:46:52.303
> 
> 标签：sql-server, performance, tsql, sql-server-2005

我检查过类似的问题，但没有一个对我有用。最有用的是[http://forums.asp.net/t/1170815.aspx/1](http://forums.asp.net/t/1170815.aspx/1)，但性能使我的查询运行了几个小时。

我有 150 万条记录，基于 4 年的产品销售（约 10k 产品）。我想要一个包含日期、产品和滚动十二个月销售额的表格。

此查询（来自上面的链接）有效，并显示了我想要的内容，但性能使其无用：

```
select day_key, product_key, price, (select sum(price) as R12 from #ORDER_TURNOVER as tb1 where tb1.day_key <= a.day_key and tb1.day_key > dateadd(mm, -12, a.day_key) and tb1.product_key = a.product_key) as RSum into #hejsan
from #ORDER_TURNOVER as a 
```

我为所有记录尝试了一个滚动求和游标函数，它快如闪电，但我无法获得仅对过去 365 天的销售额求和的查询。

非常感谢有关如何解决此问题的任何想法。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:51:53.200

我会稍微改变你的设置。

首先，有一个表格，列出所有感兴趣的产品密钥......

```
CREATE TABLE product (
  product_key    INT NOT NULL,
  price          INT,
  some_fact_data VARCHAR(MAX),
  what_ever_else SOMEDATATYPE,
  PRIMARY KEY CLUSTERED (product_key)
) 
```

然后，我会有一个日历表，其中包含您可能需要报告的每个日期......

```
CREATE TABLE calendar (
  date             SMALLDATETIME,
  is_bank_holdiday INT,
  what_ever_else   SOMEDATATYPE,
  PRIMARY KEY CLUSTERED (date)
) 
```

最后，我会确保您的数据表在所有相关字段上都有一个覆盖索引......

```
CREATE INDEX IX_product_day ON #ORDER_TURNOVER (product_key, day_key) 
```

这将允许以下查询...

```
SELECT
  product.product_key,
  product.price,
  calendar.date,
  SUM(price)    AS RSum
FROM
  product
CROSS JOIN
  calendar
INNER JOIN
  #ORDER_TURNOVER AS data
    ON  data.product_key = product.product_key
    AND data.day_key    >  dateadd(mm, -12, calendar.date)
    AND data.day_key    <= calendare.date
GROUP BY
  product.product_key,
  product.price,
  calendar.date 
```

通过以这种方式执行所有操作，每个 product/calendar_date 组合将与数据表中的一组记录相关，这些记录彼此连续。对于优化器来说，这将使查找要聚合的数据的行为变得更加简单。

*[需要一个索引，特别是在顺序（产品、日期）中。]*

如果你有相反的索引，它实际上要困难得多......

示例数据：

```
 product | date                   date | product
---------+-------------    ------------+---------
    A    |  01/01/2012      01/01/2012 |    A
    A    |  02/01/2012      01/01/2012 |    B
    A    |  03/01/2012      02/01/2012 |    A
    B    |  01/01/2012      02/01/2012 |    B
    B    |  02/01/2012      03/01/2012 |    A
    B    |  03/01/2012      03/01/2012 |    B 
```

在左侧 oyu 中，只需获取 365 天块中彼此相邻的所有记录。

在右侧搜索每条记录，然后才能进行聚合。搜索相对简单，但你做了 365 个。比左边的版本要多得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:36:40.817

这就是 SQL Server 2005-2008 中“运行总计”/“汇总子集”的方式。在 SQL 2012 中，原生支持运行总计，但我们仍在使用 2005-2008 db

```
SELECT  day_key ,
        product_key ,
        price ,
        ( SELECT    SUM(price) AS R12
          FROM      #ORDER_TURNOVER AS tb1
          WHERE     tb1.day_key <= a.day_key
                    AND tb1.day_key > DATEADD(mm, -12, a.day_key)
                    AND tb1.product_key = a.product_key
        ) AS RSum
INTO    #hejsan
FROM    #ORDER_TURNOVER AS a 
```

几点建议。

您可以预先计算运行总计，这样就不会一次又一次地计算它们。你在做什么上面的选择是一个变相的循环而不是一个集合查询（除非优化器可以将子查询转换为连接）。

上述解决方案需要对代码进行一些更改。

您当然可以尝试的另一个解决方案是在 #ORDER_TURNOVER 临时表上创建一个聚集索引。这更安全，因为它是本地更改。

```
CREATE CLUSTERED INDEX IndexName
ON #ORDER_TURNOVER (day_key,day_key,product_key) 
```

WHERE 子句中的所有 3 个表达式都是 SARGS，因此优化器现在将执行搜索而不是扫描。

如果索引解决方案没有提供足够的性能提升，那么值得投资解决方案 1

# java - 在 JUnit 4 中使用不同的 @BeforeClass 设置多次运行测试用例

> ID：10701408
> 
> 赞同：3
> 
> 时间：2012-05-22T11:46:53.187
> 
> 标签：java, junit, junit4

我有一个看起来像这样的测试用例：

```
public class MyTest {

    private static TestObject obj;

    @BeforeClass
    public static void setUpBeforeClass() {
        obj = new TestObject();
    }

    @Test
    public void testOne() {
        assertTrue(obj.hasFoo());
    }

    @Test
    public void testTwo() {
        assertEquals(42, obj.getBar());
    }

    // More tests here...

} 
```

我现在要做的是使用不同的 TestObject 实例运行整个测试用例。所以假设我有 10 个不同的 TestObject 实例。现在我想运行 testOne() testTwo() 等 10 次（我需要的每个 TestObject 实例）。

如何使用 JUnit4 实现这一目标？还是我的设计不好？有更好的想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T11:57:43.470

使用[参数化测试](http://junit.sourceforge.net/javadoc/org/junit/runners/Parameterized.html)：

```
@RunWith(Parameterized.class)
public class MyTest {
    public MyTest(TestObject obj) {
        this.obj = obj;
    }

    @Parameters
    public static Collection<TestObject> params() { ... }

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:57:23.453

使用数组来测试一切怎么样？

```
public class MyTest {

    private static TestObject[] objs;

    @BeforeClass
    public static void setUpBeforeClass() {
        objs = new TestObj[]{new TestObject1(), new TestObject2()];
    }

    @Test
    public void testOne() {
        for(TestObject obj : objs){
           assertTrue(obj.hasFoo());
        }
    }

    @Test
    public void testTwo() {
        for(TestObject obj : objs) {
           assertEquals(42, obj.getBar());
        }
    }

    // More tests here...

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T12:00:39.740

您可以通过继承实现与此接近的目标，这还具有允许您区分测试输出中的测试用例的优势。您必须尝试一下，因为静态和继承不能很好地协同工作。

一种选择是创建十个子类，每个子类都有一个`@Before`初始化`obj`超类中的实例字段的方法。如果您不希望`TestObject`每次都重新初始化 a 的开销，您还可以使用一种`@BeforeClass`方法来初始化单例静态`classObj`字段。然后，您`@Before`只需复制`classObj`到`obj`. 无论哪种方式，您的超类都有测试方法和`obj`实例方法，但没有初始化代码。

# security - 保护 Zend Framework 站点免受黑客攻击

> ID：10701411
> 
> 赞同：0
> 
> 时间：2012-05-22T11:47:11.737
> 
> 标签：security, zend-framework

我有一个 Zend 框架站点正在运行，实际上有人设法在 ZF 公用文件夹中上传了 2 个 php 脚本。

我已将密码更改为 cpanel，包括 ftp、数据库等。

但是我怎样才能防止这种情况再次发生呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:09:24.323

如果可以在不登录的情况下访问 pgrfilemanager，那么用户可以轻松地将他们想要的任何文件上传到您的站点。您需要找到一种方法来保护该脚本，或者通过在其中包含您的 ZF 登录检查，或者通过使用 htaccess 样式登录来保护它（可能更容易）。

# iphone - 如何在目标c中调用构造函数

> ID：10701418
> 
> 赞同：0
> 
> 时间：2012-05-22T11:47:41.013
> 
> 标签：iphone, objective-c, ipad, constructor, call

我是 iPhone 开发者的新手，

我想手动调用构造函数，我应该怎么调用？

这是我的代码片段，

```
- (id)initWithFrame:(CGRect)frame {
    if (self = [super initWithFrame:frame]) {

        CFURLRef pdfURL = CFBundleCopyResourceURL(CFBundleGetMainBundle(), CFSTR("ePubTutorial.epub"), NULL, NULL);
        pdf = CGPDFDocumentCreateWithURL((CFURLRef)pdfURL);
        CFRelease(pdfURL);
        self.pageNumber = 1;
        self.backgroundColor = nil;
        self.opaque = NO;
        self.userInteractionEnabled = NO;
    }
    return self;
} 
```

**提前致谢 ！！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:49:31.123

只需使用该初始化方法。例子：

```
[[yourClass alloc]initWithFrame:yourFrame]; 
```

我建议买一些书读一读，它们确实有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:49:48.830

包含init及其名称的方法是iphone中的构造函数。你会称它为

```
Object* obj = [[Object alloc] initWithFrame:theFram]; 
```

# mysql - 如何优化 MySQL UPDATE

> ID：10701420
> 
> 赞同：5
> 
> 时间：2012-05-22T11:47:47.650
> 
> 标签：mysql, sql, query-optimization

请问有什么办法可以优化MySql中的这个更新查询吗？

```
 UPDATE table1 t1 
   SET t1.column = 
   (SELECT MIN(t2.column) 
     FROM table2 t2 WHERE t1.id = t2.id
    ); 
```

这两个表都有大约 250 000 条记录。

表结构：

```
CREATE TABLE `table1` (
 `id` int(11) NOT NULL,  
 `column` datetime NOT NULL,
 PRIMARY KEY (`id`)  
) ENGINE=InnoDB DEFAULT CHARSET=utf8

CREATE TABLE `table2` (
 `code` int(11) NOT NULL,  
 `id` int(11) NOT NULL,    
 `column` datetime NOT NULL,
 PRIMARY KEY (`code, `id`)  
) ENGINE=InnoDB DEFAULT CHARSET=utf8

ALTER TABLE table2 ADD CONSTRAINT FK_id 
    FOREIGN KEY (id) REFERENCES table1 (id)         
; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T12:35:01.567

我就是这样做的：

创建一个临时表来保存聚合值

```
CREATE TEMPORARY TABLE tmp_operation 
SELECT id, MIN(`column`) as cln FROM table2 GROUP BY id; 
```

为临时表添加索引以更快地连接到表 1（可以根据数据大小省略此步骤）

```
ALTER TABLE tmp_operation ADD UNIQUE INDEX (id); 
```

用简单的加入更新。您可以使用左连接或内连接，具体取决于您是否要将列更新为空值）

```
UPDATE table1 
SET table1.`column` = tmp_operation.cln
INNER JOIN tmp_operation ON table1.id = tmp_operation.id; 
```

完成后删除临时表

```
DROP TABLE tmp_operation; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T15:07:34.897

您可以通过首先分组表`t2`然后使用来做到这一点`JOIN`（这类似于@frail 的答案，但没有临时表）：

```
UPDATE 
      table1 t1 
  JOIN
      ( SELECT id
             , MIN(column) AS min_column
        FROM table2 
        GROUP BY id
      ) AS t2
    ON t2.id = t1.id
SET t1.column = t2.min_column ; 
```

`table2`, on处的索引`(id, column)`将有助于提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:54:50.900

在table1主键的table2中添加外键

```
UPDATE table1 t1
INNER JOIN table2 t2
ON t1.id = t2.id
SET t1.column = t2.column
having MIN(t2.column) 
```

[例子](http://www.electrictoolbox.com/article/mysql/cross-table-update/)

# groovy - 在 Groovy 闭包中跟踪方法调用

> ID：10701421
> 
> 赞同：1
> 
> 时间：2012-05-22T11:47:50.000
> 
> 标签：groovy, dsl, reactive-programming

我正在编写一个用于反应式评估的小型 DSL，需要在 Groovy 中进行元编程方面的帮助。

示例 DSL 代码：

```
Signal<Integer> a = var(1)
Signal<Integer> b = var(2)
Signal<Integer> c = signal { a(it) + b(it) } 
```

'var' 函数创建新`Signal`实例。

该`signal`函数需要`Signal`闭包内的实例列表（引用`a`和`b`示例）。

工作实施：

```
interface Signal<T> {
    T now()
}

Signal.metaClass.call = { dependencies ->
    dependencies?.add(delegate)
    delegate.now()
}

def signal = { Closure<?> body ->
    def dependencies = new HashSet<>()
    body.call(dependencies)
    createSignal(dependencies, body)
} 
```

有什么方法可以等待传递`it`变量，所以示例看起来像

```
Signal<Integer> a = var(1)
Signal<Integer> b = var(2)
Signal<Integer> c = signal { a() + b() } 
```

**编辑：**用于测试的 存根`Signal`实现：

```
class SignalStub<T> implements Signal<T> {
    T value
    Collection<Signal<?>> dependencies

    static def var(value) { new SignalStub<>(value: value, dependencies: [])}
    static def createSignal(deps, body) { new SignalStub<Object>(value: body.call(), dependencies: deps) }

    @Override
    T now() {
        return value
    }
} 
```

DSL的测试用例：

```
def a = var(1)
def b = var(2)

def c = signal { a() + b() }

assert c.now() == 3
assert c.dependencies.contains(a)
assert c.dependencies.contains(b) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:05:53.430

问题是：“有没有办法避免传递 it 变量？” 由于 a 和 b 是局部变量，并且局部变量不参与 MOP，因此使用运行时元编程应该是不可能的。

使用转换是可能的，但我不知道你是否想在这里走那么远

# sql-server - 从另一个表中的数据更新计数列

> ID：10701422
> 
> 赞同：10
> 
> 时间：2012-05-22T11:47:50.623
> 
> 标签：sql-server, stored-procedures

在我的数据库中，我有两个表 Items(Id, ..., ToatlViews int) 和 ItemViews (id, ItemId, Timestamp)

在 ItemViews 表中，我存储了一个项目的所有视图，因为它们来到了站点。有时我想调用一个存储过程来更新 Items.ToatlViews 字段。我尝试使用游标来执行此 SP ...但更新语句是错误的。你能帮我改正吗？我可以在没有光标的情况下执行此操作吗？

```
CREATE PROCEDURE UpdateItemsViews
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    DECLARE @currentItemId int
    DECLARE @currentItemCursor CURSOR
    SET @currentItemCursor = CURSOR FOR SELECT Id FROM dbo.Items

    OPEN @currentItemCursor
    FETCH NEXT FROM @currentItemCursor INTO @currentItemId
    WHILE @@FETCH_STATUS = 0
    BEGIN
        Update dbo.Items set TotalViews = count(*) 
              from dbo.ItemViews where ItemId=@currentItemId
        FETCH NEXT FROM @currentItemCursor INTO @currentItemId
    END   
END
GO 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-22T11:54:17.247

您可以使用直接的 UPDATE 语句

```
update Items set TotalViews = 
     (select COUNT(id) from ItemViews where ItemViews.ItemId = Items.Id) 
```

如果这很重要，您可能想要测试执行此操作的各种方法的性能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-22T11:50:22.293

您可以使用`update ... from`而不是游标：

```
update  i
set     TotalViews = iv.cnt
from    dbo.Item i
join    (
        select  ItemId
        ,       count(*) as cnt
        from    dbo.ItemViews
        group by
                ItemId
        ) iv
on      i.Id = iv.ItemId 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T11:56:03.703

```
;WITH x AS 
(
  SELECT ItemID, c = COUNT(*) 
  FROM dbo.ItemViews
  GROUP BY ItemID
)
UPDATE i
SET TotalViews = x.c
FROM dbo.Items AS i
INNER JOIN x
ON x.ItemID = i.ItemID; 
```

但是，当您始终可以在运行时获取计数时，为什么要存储此值？每次您以任何方式触摸 ItemViews 表时，您都必须运行此更新语句，否则与 Items 一起存储的计数将不正确。

您可能会考虑做的是设置索引视图：

```
CREATE VIEW dbo.ItemViewCount
WITH SCHEMABINDING
AS
    SELECT ItemID, ItemCount = COUNT_BIG(*)
      FROM dbo.ItemViews
      GROUP BY ItemID;
GO
CREATE UNIQUE CLUSTERED INDEX x ON dbo.ItemViewCount(ItemID); 
```

现在，您可以在查询中加入视图并知道计数始终是最新的（无需支付扫描每个项目计数的惩罚）。索引视图的缺点是，当对 ItemViews 表进行插入/更新/删除时，您会逐步支付该成本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-20T10:59:12.010

对于谁也需要包括零计数

```
UPDATE Items as i,
    (SELECT 
        i.Id as Id, COUNT(iv.ItemId) AS c
    FROM
        Items AS i
    LEFT JOIN ItemViews AS iv ON i.Id = iv.ItemId
    GROUP BY i.Id) AS ic 
SET 
    i.TotalViews = ic.c
WHERE
    i.Id = ic.Id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-15T22:19:45.270

我在写完并回答了这个问题/答案一年后找到了这个问题/答案。答案还可以，但我追求的是更自动的东西。我最终编写了一个触发器，以在插入、删除或更新另一个表中的相关行时自动重新计算列。

我认为这是一个比手动运行重新计算更好的解决方案，因为不会有人忘记运行代码：

```
CREATE TRIGGER [dbo].[TriggerItemTotalViews] 
   ON  [dbo].[ItemViews]
   AFTER INSERT, DELETE, UPDATE
AS 
BEGIN
SET NOCOUNT ON;

UPDATE [Items] 
SET [TotalViews] = 
    (
    SELECT COUNT(id) 
    FROM [ItemViews] 
    WHERE [ItemViews].[ItemId] = [Items].[ItemId]
    )
WHERE [Items].[ItemId] IN
    (
    SELECT [ItemId] FROM [INSERTED] 
    UNION 
    SELECT [ItemId] FROM [DELETED]
    )
END 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-14T13:02:43.597

相同但不同：

```
declare @productId int = 24;
declare @classificationTypeId int = 86;

update s
set CounterByProductAndClassificationType = row_num
from Samples s
join
(
    select row_number() over (order by (select Id)) row_num, Id
    from Samples
    where 
        ProductId = @productId and
        ClassificationTypeId = @classificationTypeId
) s_row on s.Id = s_row.Id 
```

# java - 为 jQuery 数据表传递一个额外的参数给 Java 控制器

> ID：10701425
> 
> 赞同：3
> 
> 时间：2012-05-22T11:48:07.120
> 
> 标签：java, jquery, jsp, datatable

我正在尝试将用户定义的参数传递给充当我的 jquery 数据表的数据源的 Java 控制器。关键是，我想在我的 jsp 上的组合框的更改事件上执行此操作（传递参数）。

这是我的数据表初始化：

```
var oTable = $('#reqAllQueriesTable')
            .dataTable(
                    {
                        "sDom": '<"H"l<"projectTeamTools">frtip>',
                        "bProcessing": true,
                        "bServerSide": true,
                        "sAjaxSource": "query/getQuery",
                        "bPaginate" : true,
                        "bLengthChange": true,
                        "bScrollCollapse" : true,
                        "iDisplayLength" : 10,
                        "bFilter" : true,
                        "bJQueryUI" : true,
                        "sPaginationType" : "full_numbers",
                        "sSearch": "Search"
                    }); 
```

我的组合框的值将传递给控制器​​，相应的功能是：

```
 $("div.projectTeamTools").html('Organize by Project Teams: <select id="projectTeams"><option value="0">Project Team</option><option value="1">All</option><option value="2">Not Associated</option><c:forEach var="projectTeam" items="${userProjectTeams}"><option value="${projectTeam.projectId}">${projectTeam.projectName}</option></c:forEach></select>');  

    $("#projectTeams").change(function () {
        onTeamSelect($(this).val());
    }); 

    function onTeamSelect(teamId){
        alert(teamId +" Selected");
//This function to pass the parameter to the datatable is supposed to be here.
        oTable.fnDraw();
    } 
```

然后数据表显示它从 ajax Source 接收到的新数据`getQuery`。

PS：我无法使用 fnServerParams，因为我使用的是旧版本的数据表。我曾尝试使用 fnServerData 但没有帮助。我想我在 fnServerData 中使用 ajax 函数的方式是错误的。

```
"fnServerData": function ( sSource, aoData, fnCallback ) {
                            $("#projectTeams").change(function() { 
                                 aoData.push( { "name": "myParam", "value": $("#ComboBox option:selected").value() } );
                                    $.ajax( {
                                        "dataType": 'json', 
                                        "url": sSource, 
                                        "data": aoData, 
                                        "success": fnCallback
    }); 
```

当我从组合框中选择一个项目时，我看不到要在浏览器中的“网络 XHR”中传递的参数。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:40:33.283

得到了答案。在初始化期间，fnServerData 应该是：

```
"fnServerData": function ( sSource, aoData, fnCallback ) {
                    aoData.push( { "name" : "myTeamId", "value" : myTeamId  } );
                    $.getJSON( sSource, aoData, function (json) { 
                        fnCallback(json);
                    });
              } 
```

以及我要传递参数的组合框的 onChange 函数：

```
 $("#projectTeams").change(function () {
        onTeamSelect($(this).val());
    }); 
    function onTeamSelect(teamId){
        myTeamId = teamId;
        oTable.fnDraw();
    } 
```

其中 myTeamId 是一个全局变量。`oTable.fnDraw()`重绘数据表并将 的值分配给我`teamId`在`myTeamId`中使用的`fnServerData`。这段代码对我有用！

# django - 覆盖 get_form() 方法以根据用户自定义管理视图

> ID：10701430
> 
> 赞同：0
> 
> 时间：2012-05-22T11:48:22.383
> 
> 标签：django, django-forms, python-2.7

```
def get_form(self, request, obj=None, **kwargs):
    if request.user.is_superuser:   
        self.exclude=[]
    else:
        self.fields=['employer_verified']
    return super(EmployerAdmin, self).get_form(request, obj, **kwargs) 
```

我有这段代码来覆盖get_form（）方法来根据用户自定义视图它在超级用户登录时工作得很好但问题是当工作人员登录然后超级用户登录时只显示employee_verified我猜问题是现在等于“雇主验证”的字段中没有排除任何内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:29:07.423

你不应该`self.exclude`在`get_form`方法中设置，它不是线程安全的。相反，您可以定义两个不同的表单类，并根据`user.is_superuser`.

```
class EmployerForm(forms.ModelForm):
    class Meta:
        model = Employer
        fields = ['employer_verified',]

class EmployerSuperUserForm(forms.ModelForm):
    class Meta:
        model = Employer

def get_form(self, request, obj=None, **kwargs):
    if request.user.is_superuser:   
        return EmployerSuperUserForm
    else:
        return EmployerForm
        self.fields=['employer_verified'] 
```

# asp.net - 如何让我的表格显示在我的 ContentPlaceHolder 上方？

> ID：10701431
> 
> 赞同：0
> 
> 时间：2012-05-22T11:48:22.863
> 
> 标签：asp.net, css, webforms

我正在尝试在单击超链接时显示的 MasterPage 中创建一个菜单。YardimDokumaniMenuAHREF 是显示菜单的超链接。如您所见，当我单击它时会调用一个 javascript。但是，由于内容占位符，无法显示单元格的内容。请看[截图](http://dl.dropbox.com/u/38860715/screenshot.png)。

这是我的代码。有人可以帮我解决这个问题吗？

```
<a id="YardimDokumaniMenuAHREF" href="javascript:DisplayMenu('ctl00_YardimDokumaniMenuContent')" runat="server" title="">YARDIM DÖKÜMANI</a>
<%-- YardimDokumaniMenuAHREF triggers YardimDokumaniMenuContent to be displayed --%>

<div ID="YardimDokumaniMenuContent" runat="server" style="visibility:hidden; position:absolute; z-index:-99999">
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td>
            <a href="/YardimDokumanlari/YeniSayfa?key=38fad920-196c-48d9-a2fa-3df052c0cb0c">hadi bakalııııım</a>
        </td>
    </tr>
    <tr>
        <td>
            <a href="/YardimDokumanlari/YeniSayfa?key=38fad920-196c-48d9-a2fa-3df052c0cb0c">hadi bakalııııım333</a>
        </td>
    </tr>
</table>
</div>
                    </li>
                    <li class=""><a href="~/Default.aspx" title="Ana Sayfa" runat="server" id="AnaSayfaLink">
                        Ana Sayfa</a> </li>
                    <li class=""><a href="~/Everyone/iletisim.aspx" runat="server" title="Bilgi almak istiyorum, şikayetim var, haklı müşteriyim.">
                        İLETİŞİM / YARDIM MASASI</a></li>
                    <li class="current_page_item" runat="server" id="OnlineIslemLink"><a id="A1" runat="server"
                        href="https://ode.a-kent.com/Yetki/Login.aspx">ONLINE İŞLEM</a> </li>
                    <li class="">
                        <asp:LinkButton ID="LogoutLinkButton" runat="server" CausesValidation="false" OnClick="LogoutLinkButton_Click">GÜVENLİ ÇIKIŞ</asp:LinkButton>
                    </li>
                </ul>
            </div>
            <!-- globalNav end -->
        </div>
        <!-- header end -->
        <div id="main">
            <div class="panel fetaured" style="left: 192px; top: 0px; width: 755px;">
                <div class="comments">
                    <a href="javascript:history.go(-1);"><b>GERİ</b></a>
                </div>
            </div>
        </div>
        <div>
            <asp:ContentPlaceHolder runat="server" ID="LeftPanelContentPlaceHolder">
            </asp:ContentPlaceHolder> 
```

显示菜单功能：

```
<script type="text/javascript">
    function DisplayMenu(obj) {
        obj = document.getElementById(obj);
        obj.style.visibility = 'visible';
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:38:14.940

`z-index:-99999`从 YardimDokumaniMenuContent div 样式中删除。如果这不起作用，请确保该 div 的 z-index 大于背景之一。

# adobe - Adobe的ExtendScript中是否有等效的setTimeout

> ID：10701445
> 
> 赞同：14
> 
> 时间：2012-05-22T11:48:51.427
> 
> 标签：adobe, settimeout, extendscript, adobe-indesign

Javascript的`setTimeout`函数是`window`对象的一个​​方法。此对象在 ExtendScript 中不存在，因此不可用于为 Adob​​e InDesign 或 Illustrator 制作的脚本。我可以使用什么来获得相同的结果？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-22T16:56:35.930

它是扩展脚本`$`对象的一部分。

```
$.sleep(1000) //tell extendscript to sleep 1000 milliseconds 
```

与 setTimeout() 不同，但你应该能够让它为你工作。

编辑：这是扩展脚本的 setTimeout 扩展：

```
$.setTimeout = function(func, time) {
        $.sleep(time);
        func();
};

$.setTimeout(function () {alert("hello world")}, 3000); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-07T14:29:30.567

[这里](http://aiedv.ch/site/de/indesign-scripts-free.php#STO)有一个 setTimeout ExtendScript 实现（德国网站，代码用英文注释），但由于它依赖于`app.idleTasks`，它只能在 InDesign 中工作（没有 Photoshop）。

我将上面链接中的可下载代码粘贴到此处（© Andreas Imhof）：

```
/**
 * setTimeout
 * Version 1.0
 * A setTimeout function implementation for InDesign ExtendScript like known from a Browser's Javascript.
 * Uses InDesign's idleTask stuff.
 * Timeout milliseconds are not accurate, but it allows to call a heavy load script,
 * split it up into small junks for InDesign is not blocked too long and has time to breath.
 *
 * The script MUST run in its dedicated target engine:
 * #target "InDesign"
 * #targetengine "myOwnEngineName"
 *
 * DISCLAIMER:
 * No warranty - use as is or modify but retain the originator's coordinates:
 * CopyRight Andreas Imhof, www.aiedv.ch, ai@aiedv.ch
 */
//
var setTimeout_Task_curfile = new File($.fileName),
setTimeout_Task_curfullname = decodeURI(setTimeout_Task_curfile.name),
                // setTimeout_Taskname must be a UNIQUE name, so we take it from the current running script!! 
                // May be set to any String like
                // setTimeout_Taskname = 'myOwnTask';
setTimeout_Taskname = setTimeout_Task_curfullname.lastIndexOf(".") > 0 ? (setTimeout_Task_curfullname.substr(0,setTimeout_Task_curfullname.lastIndexOf("."))) : setTimeout_Task_curfullname,

setTimeout_Tasks = {},  // all defined tasks prepared to run
/**
 * setTimeout_hasIdleTask
 * Utility function
 * @param {Number} the timeout task id
 * @return {Boolean} true if a given timeout id also has his attached idleTask
 */
setTimeout_hasIdleTask = function(id) {
  var has = false, i;
  for (i = 0; i < app.idleTasks.length; i++) {
    //alert("id: " + id + " tid: " + app.idleTasks[i].label);
    if (app.idleTasks[i].isValid && (app.idleTasks[i].id === id)) {
      has = true;
      break;
    }
  }
  return has;
},
/**
 * setTimeoutList
 * Utility function
 * @return {String} a list of all currently active setTimeout_Tasks
 */
setTimeoutList = function() {
  var list = "", cb,
    k;
  for (k in setTimeout_Tasks) {
    if (list !== "") list += ",";
    cb = setTimeout_Tasks[k]["cb"].toString();
    cb = cb.replace(/\s/g,"");
    list += setTimeout_Tasks[k]["taskid"] + ":" + cb;
  }
  return list;
},
/**
 * idleTasksList
 * Utility function
 * @return {String} a list of all currently active idleTasks
 */
idleTasksList = function() {
  var list = "",
    k;
  for (k = 0; k < app.idleTasks.length; k++) {
    if (list !== "") list += ",";
    list += app.idleTasks[k].id + ":" + setTimeout_hasIdleTask(app.idleTasks[k].id) + ":" + app.idleTasks[k].label;
  }
  return list;
},
/**
 * setTimeoutInit
 * Init/clean the timeout system
 */
setTimeoutInit = function() {
  var it;
  // remove all (erroneous) idleTasks
  //alert("set idleTasks: " + app.idleTasks.length);
  //NA: logmess("setTimeoutInit set idleTasks: " + app.idleTasks.length + "\n");
  for (it = 0; it < app.idleTasks.length; it++) {
    if (app.idleTasks[it].label == setTimeout_Taskname) {
      //alert("removing idleTask id " + app.idleTasks[it].id + " label: " + app.idleTasks[it].label);
      clearTimeout(app.idleTasks[it].id);
    }
  }
  setTimeout_Tasks = {};
},
/**
 * Tasks Handler
 * Check if a task can be called now
 * @param {Number} taskid
 * @return {Boolean} always false
 */
setTimeoutHandler = function(taskid) {
  var now_Ticks = new Date().getTime(),
    cb, cb_retval = undefined;

  try {
    //alert("taskid: " + taskid + "\nnumcalls: " + setTimeout_Tasks[taskid]["numcalls"]);
    // we look for well timed call only!!!  CS6 calls at start AND after the timeout
    if (setTimeout_Tasks[taskid]["end_ticks"] > now_Ticks) {    // we have not reached timeout
      //NA: logmess("setTimeoutHandler id " +  taskid + " too early by ms: " + (setTimeout_Tasks[taskid]["end_ticks"] - now_Ticks) + "\n");
      //alert("setTimeoutHandler id " +  taskid + " too early by ms: " + (setTimeout_Tasks[taskid]["end_ticks"] - now_Ticks));
      setTimeout_Tasks[taskid]["numcalls"] += 1;
      return false; // wait for next call
    }
  }
  catch(ex) {
    alert("Exception (1) in function 'setTimeoutHandler()', taskid " + taskid + ":\n" + ex);
  }

  try {
    cb = setTimeout_Tasks[taskid]["cb"];    // store the callback
    clearTimeout(taskid);   // remove the timeout
  }
  catch(ex) {
    alert("Exception (2) in function 'setTimeoutHandler()', taskid " + taskid + ":\n" + ex);
  }

  try {
    //NA: logmess("setTimeoutHandler call " +  cb + "\n");
    cb_retval = cb();   // call the cb
    //if (cb_retval) alert("cb_retval:\n" + cb_retval);
  } catch(ex) {
    alert("Exception in function '" + cb() + ":\n" + ex);
  }

  return false;
},
/**
 * setTimeout
 * Set a function to called after the given timeout
 * @param {function} callback the function to call
 * @param {Number} timeout in ms
 * @return {Boolean} null on error, otherwise the id (can be used with clearTimeout
 */
setTimeout = function(callback,timeout) {
  try {
    var idle_Task,
      now_Ticks = new Date().getTime();
    idle_Task = app.idleTasks.add({sleep:timeout});
    idle_Task.label = setTimeout_Taskname;
    setTimeout_Tasks[idle_Task.id] = {
      "label": setTimeout_Taskname,
      "start_ticks": now_Ticks,
      "sleep": timeout,
      "end_ticks": now_Ticks + timeout,
      "cb": callback,
      "taskid": idle_Task.id,
      "numcalls": 0
      };
    setTimeout_Tasks[idle_Task.id].handler = function(ev){setTimeoutHandler(setTimeout_Tasks[idle_Task.id]["taskid"]);};
    idle_Task.addEventListener(IdleEvent.ON_IDLE, setTimeout_Tasks[idle_Task.id].handler,false);
    //NA: logmess("setTimeout idle_Task.id: " + idle_Task.id + ", timeout: " + timeout + "\ncallback: " + callback + "\n");
    return idle_Task.id;
  }
  catch(ex) {
    alert("Exception in function 'setTimeout()':\n" + ex);
  }
  return null;
},
/**
 * clearTimeout
 * Clear the timeout given by the setTimeout return value
 * @param {Number} id the timeout id to clear
 */
clearTimeout = function (id){
  var i, task = null;
  for (i = 0; i < app.idleTasks.length; i++) {
    //alert("id: " + id + " tid: " + app.idleTasks[i].label);
    if ((app.idleTasks[i].id == id) && app.idleTasks[i].isValid) {
      task = app.idleTasks[i];
      break;
    }
  }

  if (task !== null) {
    try {
      if (setTimeout_Tasks[id] && setTimeout_Tasks[id].handler) {
        // this kills any!!!    app.idleTasks.itemByID(id).removeEventListener(IdleEvent.ON_IDLE, setTimeout_Tasks[id].handler,false);
        task.removeEventListener(IdleEvent.ON_IDLE, setTimeout_Tasks[id].handler,false);
      }
      // this kills any!!!    app.idleTasks.itemByID(id).remove();
      //task.remove();
      task.sleep = 0;
    }
    catch(ex) {
      alert("Exception in function 'clearTimeout() idleTasks':\n" + ex);
    }
    try {
      delete setTimeout_Tasks[id];
    }
    catch(ex) {
      alert("Exception in function 'clearTimeout() delete setTimeout_Tasks':\n" + ex);
    }
  }
};
/**
 * Init/clean the timeout system
 */
setTimeoutInit();
// alert(setTimeout_Taskname);  // Just to check if the 'setTimeout_Taskname' was set correctly 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-28T11:55:30.507

在 Adob​​e After Effects 中使用`$.sleep(time)`会导致脚本停止。

而是`app.scheduleTask(stringToExecute, delay, repeat)`在 ExtendScript 中使用本机：

例子：

```
var taskId = app.scheduleTask(function () {alert("hello world")}, 1500, false); 
```

取消：

```
app.cancelTask(taskId); 
```

# google-maps - 来自经纬度的国名

> ID：10701450
> 
> 赞同：2
> 
> 时间：2012-05-22T11:49:08.183
> 
> 标签：google-maps, google-api, latitude-longitude, reverse-geocoding

这个问题可能看起来很眼熟：我有一个地方的经纬度。我需要得到国家的名字。我知道我必须为此使用[反向地理编码](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)。但我的问题是，有时它会返回地区或国家/地区的缩写形式（例如美国代表美国或加利福尼亚州代表 CA）。有什么办法可以得到这个**国家的全名**？我无法通过这个简短的表格与我预先存储的国家数据库执行匹配操作。

我已经经历过[这个](https://stackoverflow.com/questions/4013606/google-maps-how-to-get-country-state-province-region-city-given-a-lat-long-va)，[这个](https://stackoverflow.com/questions/4497728/get-country-from-latitude-longitude)。但这对我的问题没有多大帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T16:12:37.607

地理编码器响应通常会返回几个`results`，其中包括街角、十字路口、县和其他替代表示名称。我发现这`results[0]`是最好的描述。

诀窍是在结果中搜索“国家”。然后可以检索 long_name。

[点击地图](http://jsbin.com/aqazez/edit#preview)

```
 function getCountry(latLng) {
    geocoder.geocode( {'latLng': latLng},
      function(results, status) {
        if(status == google.maps.GeocoderStatus.OK) {
          if(results[0]) {
            for(var i = 0; i < results[0].address_components.length; i++) {
              if(results[0].address_components[i].types[0] == "country") {
                alert(results[0].address_components[i].long_name);
              }
            }
          }
          else {
            alert("No results");
          }
        }
        else {
          alert("Status: " + status);
        }
      }
    );
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:56:29.447

JSON 数组通常包含`long_name`和`short_name`。你应该能够同时提取...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:07:48.283

这是一个适用于谷歌街道地图和开放街道地图的 JSON/XML 解析器。

（唯一的问题是它需要一个 JSON 或 XML 对象作为其在版本 3 google 和 0.6 开放街道地图上测试的“回复”，并且效果很好）

注意：它返回一个对象 location.lat 或 location.lon 你也可以让它返回你想要的任何其他字段。

JSON.parse(text) // 其中 text 是来自 google 的回复或打开的街道地图 XML.parse(text) // 您可以自己制作将回复转换为 XML 或使用正则表达式对其进行解析。如果有人有一个正则表达式版本来解析文本回复，这也可能会有所帮助。

```
// Parser(ajax reply object, google/open, json/xml); 
// takes the reply from google maps or open street maps and creates an object with location[lat/lon] 
function Parser(reply, provider, type) {
  var location = {};
  if(reply != null) {
    if(provider == "google") { // Google Street Maps
      switch(type) {
      case "xml":
        location["lat"] = reply.getElementsByTagName("lat")[0].textContent; 
        location["lon"] = reply.getElementsByTagName("lng")[0].textContent; 
        break;
      default: // json
        location["lat"] = reply.results[0].geometry.location.lat;
        location["lon"] = reply.results[0].geometry.location.lng;
      }
    }
    else { // Open Street Maps
      switch(type) {
      case "xml":
        location["lat"] = reply.getElementsByTagName("place")[0].getAttribute("lat"); 
        location["lon"] = reply.getElementsByTagName("place")[0].getAttribute("lon"); 
        break;
      default: // json
        location["lat"] = reply[0].lat;
        location["lon"] = reply[0].lon;
      }
    }
  }
  return location;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-29T16:24:04.060

```
function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (position) {
            $.post("https://maps.googleapis.com/maps/api/geocode/json?latlng=" + position.coords.latitude + "," + position.coords.longitude + "&sensor=false", function (result) {
                for (var i = 0; i < result['results'][0]['address_components'].length; i++) {
                    if (result['results'][0]['address_components'][i]['types'][0] == "country") {
                        alert(result['results'][0]['address_components'][i]['long_name']);
                    }
                }
            });
        });
    }
}
getLocation(); 
```

# php - GROUP 一级和二级好友

> ID：10701451
> 
> 赞同：-2
> 
> 时间：2012-05-22T11:49:12.180
> 
> 标签：php, mysql, sql, group-by

假设给定一个 song_id 和一个 uid，我们想知道所有喜欢同一首歌的朋友（直接朋友和朋友的朋友）：

这就是我们的做法：

```
public function get_song_mates($uid, $song_id, $current_only = true, $limit = PHP_INT_MAX)
    {

        $sql    = "SELECT * 
                    FROM (
                    (
                        SELECT users . * ,  '1st' AS  `level`, 1 AS `level_i` 
                        FROM songs
                        JOIN users ON users.id = songs.user_id
                        JOIN friends AS my_friend ON my_friend.fid = users.id 
                        AND my_friend.uid = '".$uid."'                  
                        WHERE song_id =  '".$song_id."')
                    UNION (

                    SELECT second_friend . * ,  '2nd' AS  `level`, 2 AS `level_i`
                    FROM songs
                    JOIN users AS second_friend ON second_friend.id = songs.user_id
                    JOIN friends ON friends.uid = second_friend.id
                    JOIN users AS first_friend ON first_friend.id = friends.fid 
                    JOIN friends AS my_friend ON my_friend.fid = first_friend.id 
                    AND my_friend.uid = '".$uid."'                  
                    WHERE song_id =  '".$song_id."'

                    AND second_friend.id NOT IN
                        (
                            SELECT users.id 
                              FROM songs
                              JOIN users ON users.id = songs.user_id
                              JOIN friends AS my_friend ON my_friend.fid = users.id 
                               AND my_friend.uid = '".$uid."'
                             WHERE song_id = '".$song_id."'
                        )
                    ) ORDER BY `level_i` ASC, firstname, lastname
                    ) AS friend                 
                    GROUP BY id ORDER BY `level_i`";

        $users  = $this->getFromSql($sql);  
        return $users;
    } 
```

但请注意，我们必须添加：

```
AND second_friend.id NOT IN... 
```

为了防止将同一用户显示为直接朋友和朋友的朋友.. 我很确定我需要使用 GROUP BY，但我无法使用正确的语法。这里有什么线索吗？

-编辑-

```
friends(uid, fid)
songs(id, user_id, song_id)
users(id, frist_name, last_name) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:37:00.583

像这样修复它：

公共函数 get_song_mates($uid, $song_id, $current_only = true, $limit = PHP_INT_MAX) {

```
 $sql    = "SELECT DISTINCT * 
                FROM (
                (
                    SELECT users . * ,  '1st' AS  `level`, 1 AS `level_i` 
                    FROM songs
                    JOIN users ON users.id = songs.user_id
                    JOIN friends AS my_friend ON my_friend.fid = users.id 
                    AND my_friend.uid = '".$uid."'                  
                    WHERE song_id =  '".$song_id."')
                UNION (

                SELECT DISTINCT second_friend . * ,  '2nd' AS  `level`, 2 AS `level_i`
                FROM songs
                JOIN users AS second_friend ON second_friend.id = songs.user_id
                JOIN friends ON friends.uid = second_friend.id
                JOIN users AS first_friend ON first_friend.id = friends.fid 
                JOIN friends AS my_friend ON my_friend.fid = first_friend.id 
                AND my_friend.uid = '".$uid."'                  
                WHERE song_id =  '".$song_id."'";

    $users  = $this->getFromSql($sql);  
    return $users;
} 
```

# php - 命令行版本正在运行时，php curl被拒绝

> ID：10701453
> 
> 赞同：1
> 
> 时间：2012-05-22T11:49:14.943
> 
> 标签：php, curl, lamp

我是新来的，但是在过去的几年中阅读了很多答案，所以首先：感谢您到目前为止给我的很多帮助！所以，这就是今天让我发疯的原因，在任何地方都找不到答案：

我有一个 Web 服务（一个 Openfire 插件）和一个基于 LAMP 的后台（在一个单独的盒子上），它可以远程管理 Openfire。将 Openfire 迁移到新的（第三个）盒子后，后台代码停止工作。这是一个片段：

```
<?php
    header("Content-Type: text/plain");

    $url = "http://gbbackup.dyndns.org:9090/plugins/goldsteinAdmin/goldsteinadmin"; echo $url."\n";

    $ch = curl_init($url); echo "handle: ".$ch."\n";
    curl_setopt($ch, CURLOPT_VERBOSE, true);
    curl_setopt($ch, CURLOPT_STDERR, fopen('php://stdout', 'w'));
    $result = curl_exec($ch); echo "Result: ".$result."\n";
    if ($result === false) echo 'cURL error '.curl_errno($ch).': '.curl_error($ch)."\n";
    print_r(curl_getinfo($ch));
    curl_close($ch);
?> 
```

Curl 的详细输出是：

```
* About to connect() to gbbackup.dyndns.org port 9090 (#0)
*   Trying 81.183.210.206... * Connection refused
* couldn't connect to host
* Closing connection #0 
```

现在奇怪的是，如果我通过命令行尝试，它可以完美运行：

```
user@login01:~/public_html/gb$ curl -v "http://gbbackup.dyndns.org:9090/plugins/goldsteinAdmin/goldsteinadmin"
* About to connect() to gbbackup.dyndns.org port 9090 (#0)
*   Trying 81.183.210.206... connected
* Connected to gbbackup.dyndns.org (81.183.210.206) port 9090 (#0)
> GET /plugins/goldsteinAdmin/goldsteinadmin HTTP/1.1
> User-Agent: curl/7.21.0 (x86_64-pc-linux-gnu) libcurl/7.21.0 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.15 libssh2/1.2.6
> Host: gbbackup.dyndns.org:9090
> Accept: */*
>
< HTTP/1.1 200 OK
< Expires: Thu, 01 Jan 1970 00:00:00 GMT
< Set-Cookie: JSESSIONID=12e1urcewodgr;Path=/
< Content-Type: application/json;charset=ISO-8859-1
< Transfer-Encoding: chunked
<
{"type":"error","msg":"RequestNotAuthorised"}
* Connection #0 to host gbbackup.dyndns.org left intact
* Closing connection #0 
```

PHP 和命令行 curl 之间可能有什么区别？我删除了所有花哨的附加功能只是为了测试连接本身，但必须保留一些差异。

我又做了一些测试，结果如下：

*   PHP curl 到其他网站（例如 google.com）：有效
*   将链接插入到我自己机器上的 Chrome 中：有效
*   通过 php system() 测试命令行 curl：不起作用
*   我也想 tcpdump 差异，但在另一个盒子上，我有 root 权限，PHP 和命令行版本都有效

似乎只是这两个盒子不喜欢彼此:-)

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:12:10.213

使用 PHP，您必须单独提供端口（不在 URL 中），例如：

```
$url = "http://gbbackup.dyndns.org/plugins/goldsteinAdmin/goldsteinadmin";
...
curl_setopt($ch, CURLOPT_PORT, 9090);
... 
```

# java - 如何导入 com.google.android.maps.GestureDetector

> ID：10701455
> 
> 赞同：0
> 
> 时间：2012-05-22T11:49:19.320
> 
> 标签：java, android, gps

我正在使用 android 中的地图应用程序。要使用一些手势方法，我需要导入以下内容，

```
import com.google.android.maps.GestureDetector; 
```

但这显示了一个错误，例如“com.google.android.maps.GestureDetector 类型不可见”。问题是什么？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:53:23.597

我认为你导入了错误的类，你应该导入 android.view.GestureDetector;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:42:53.593

就像您写的“com.google.android.maps.GestureDetector 类型不可见”意味着该类未在公共范围内定义，因此它是内部类，不打算由“我们”使用

# dependency-injection - 带有自定义注释的 Guice 辅助注入

> ID：10701457
> 
> 赞同：0
> 
> 时间：2012-05-22T11:49:31.190
> 
> 标签：dependency-injection, guice, guice-3, assisted-inject

目前我使用带有命名参数的辅助注入，如下所示：

```
public interface Factory {
public MyObject create(@Assisted("string1") String string1, @Assisted("string2") String string2);
} 
```

这很好用。但我认为使用字符串作为参数的标识符有点难看。我想做的是以下几点：

```
public interface Factory {
public MyObject create(@String1 String string1, @String2 String string2);
} 
```

所以本质上我想要自定义辅助注释。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T14:44:22.787

据我所知，这种自定义`@Assisted`注释风格并不作为一项功能存在。正如您所说，区分相同类型的辅助注入参数的唯一方法是使用命名`@Assisted`注释。

您提出的建议可能是可实施的，因此如果您认为值得，您可以随时在 Guice 站点 [1] 上提交功能请求。

不过，我的直觉是，这种方法不会有*太多*附加值，因为它们很容易与正常的绑定注释混淆，而注释的含义`@Assisted`却*大不相同*。另外，定义注释类型确实需要相当多的样板文件。

1.  [http://code.google.com/p/google-guice/](http://code.google.com/p/google-guice/)

# php - 通过url调用脚本后如何在用户机器上运行shell脚本

> ID：10701461
> 
> 赞同：0
> 
> 时间：2012-05-22T11:49:43.767
> 
> 标签：php, python, bash, shell, shell-exec

我有一个名为`xyz.sh`zenity 的脚本。执行时会为用户提供一个选择菜单。问题是这是我们`/home/dir`基于 nfs 的队友之一。通常我们`path/xyz.sh`从终端运行它。它被执行。我试图把它作为一个 url 并且当用户调用它时应该运行脚本并弹出选择菜单。

示例：`http://abc.com/xyz`应该`xyz.sh`在用户远程机器上执行。不在服务器上。

我不介意它是在 python 中还是在 cgi/php 中。

* * *

更新：感谢分享链接。我已经在 Firefox 中尝试并创建了协议处理程序。如下所述。

首先打开`about:config`然后我创建了一个外部协议。`network.protocol-handler.external.app.xyz.sh`在字符串中我提供了我的脚本的路径`/home/xyz/xyz.sh`

但是，当我从浏览器 xyz 调用它时：它再次给我错误，因为“firefox 确实知道如何打开这个地址。因为协议与任何程序都没有关联”。

请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:52:23.500

不可能在访问者计算机上运行任意脚本（出于显而易见的原因）。

最好的方法可能是告诉用户安装一些软件，在浏览器中注册一个自定义协议，这样你就可以将用户引导到类似的东西

```
pythonexec://abc.com/xyz 
```

如何做到这一点在其他 SO 帖子中进行了解释，例如这个：

*   [如何创建自己的 URL 协议？（例如所以：//...）](https://stackoverflow.com/questions/389204/how-do-i-create-my-own-url-protocol-e-g-so)
*   [linux中的自定义协议？](https://stackoverflow.com/questions/411544/custom-protocol-in-linux)（对于 Linux）

# android - Android：启动同一个实例

> ID：10701462
> 
> 赞同：1
> 
> 时间：2012-05-22T11:49:45.443
> 
> 标签：android

我正在使用以下代码创建主页快捷方式：我想获得启动的应用程序的相同打开实例（如果存在）而不是新实例。

```
 public void createShortcut() {

    if (app.prefs.getBoolean("prefs_ShortcutCreated", false) == false) {
        Intent shortcutIntent = new Intent();
        shortcutIntent.setClassName(this, this.getClass().getName());

        shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);

        Intent addIntent = new Intent();
        addIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
        addIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, "test");
        addIntent.putExtra("duplicate", false);
        File image = new File(app.DEFAULT_APP_FOLDER_MAIN, "icon.png");
        AssetManager assets = app.getApplicationContext().getResources().getAssets();
        try {
            copy(assets.open("icon.png"), image);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Bitmap theBitmap = BitmapFactory.decodeFile(app.DEFAULT_APP_FOLDER_MAIN + "icon.png");
        Bitmap scaledBitmap = Bitmap.createScaledBitmap(theBitmap, 128, 128, true);
        addIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON, scaledBitmap);

        addIntent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
        sendBroadcast(addIntent);

        theBitmap.recycle();
        scaledBitmap.recycle();

        Editor editor = app.prefs.edit();
        editor.putBoolean("prefs_ShortcutCreated", true);
        editor.commit();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:23:38.067

Android 框架按照预定义的 Activity 生命周期销毁和重新创建 Activity。当一个活动对用户不可见时，它很可能已被销毁，并且肯定已“暂停”。但是，如果您希望跨实例维护某个活动的实例，您可以将这些人工制品放在`onCreate`通过`onSaveInstanceState`方法覆盖传递给 Activity 的 Bundle 中。这允许在与离开时相同的状态下重新创建活动，例如恢复部分填写的表单，而不是在重新创建期间忘记用户输入。“后栈”可能采用我不是 100% 支持的不同机制。

# android - onListItemClick 未在 ListActivity 中触发

> ID：10701463
> 
> 赞同：0
> 
> 时间：2012-05-22T11:49:46.933
> 
> 标签：android, android-fragments, actionbarsherlock, android-actionbar, android-listfragment

在我的主要活动中，我有一个带有导航选项卡和操作项的 ActionBar。我的一个操作项调用了一个 ListFragment，它显示了一个带有图像和文本视图的自定义列表视图。我正在使用 ActionBarSherlock 来实现兼容性。这是我调用新 ListFragment 的代码：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        Intent intent = new Intent(this, ERGProActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        return true;
    case R.id.menuitem_search:
        onSearchRequested();
        return true;
    case R.id.menuitem_info:
        // Create new fragment and transaction
        SherlockListFragment aboutListFragment = new AboutListFragment();
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();

        // Replace whatever is in the fragment_container view with this fragment,
        // and add the transaction to the back stack
        ft.replace(R.id.root, aboutListFragment);
        ft.addToBackStack(null);
        ActionBar actionBar = getSupportActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);

        // Commit the transaction
        ft.commit();
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

这是我的 ListFragment 代码：

```
public class AboutListFragment extends SherlockListFragment {

    private ListView listView;

    @Override
     public void onActivityCreated(Bundle savedInstanceState) {
         super.onActivityCreated(savedInstanceState);
         getActivity().setContentView(R.layout.aboutlist);

         CustomMenu menu_data[] = new CustomMenu[]
                { new CustomMenu(R.drawable.info, "About"),
                  new CustomMenu(R.drawable.legal, "Disclaimer"),};

                CustomMenuAdapter adapter = new CustomMenuAdapter(getActivity(), 
                        R.layout.listview_item_row, menu_data);
                listView = (ListView) getActivity().findViewById(R.id.listView1);
                listView.setAdapter(adapter);
     }

     @Override
     public void onListItemClick(ListView l, View v, int position, long id) {
         switch (position) {
         case 0:
             // about
             Log.i("ABOUT"," - About Selected");
         case 1:
             Log.i("ABOUT"," - Disclaimer Selected");
             // disclaimer
         }
     }
} 
```

这是我的 CustomAdapter 代码：

```
public class CustomMenuAdapter extends ArrayAdapter<CustomMenu> {
    Context context; 
    int layoutResourceId;    
    CustomMenu data[] = null;

    public CustomMenuAdapter(Context context, int layoutResourceId, CustomMenu[] data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        CustomMenuHolder holder = null;

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new CustomMenuHolder();
            holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
            holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);

            row.setTag(holder);
        }
        else
        {
            holder = (CustomMenuHolder)row.getTag();
        }

        CustomMenu menu = data[position];
        holder.txtTitle.setText(menu.title);
        holder.imgIcon.setImageResource(menu.icon);

        return row;
    }

    static class CustomMenuHolder
    {
        ImageView imgIcon;
        TextView txtTitle;
    }
} 
```

任何意见或建议将不胜感激！先谢谢了。

**谢谢各位的意见！这是最终的工作代码：**

```
 @Override
 public void onActivityCreated(Bundle savedInstanceState) {
     super.onActivityCreated(savedInstanceState);
     getActivity().setContentView(R.layout.aboutlist);

     CustomMenu menu_data[] = new CustomMenu[]
            { new CustomMenu(R.drawable.info, "About"),
              new CustomMenu(R.drawable.legal, "Disclaimer"),};

            CustomMenuAdapter adapter = new CustomMenuAdapter(getActivity(), 
                    R.layout.listview_item_row, menu_data);
            listView = (ListView) getActivity().findViewById(R.id.listView1);
            // listView.setOnItemSelectedListener(this);
            listView.setAdapter(adapter);
            listView.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {

                    switch (position) {
                             case 0:
                                 Log.i("ABOUT"," - About Selected");
                                 break;
                             case 1:
                                 Log.i("ABOUT"," - Disclaimer Selected");
                                 break;
                             default:
                                 // do nothing
                                 Log.i("ABOUT"," - default");
                                 break;
                                }
                    }
            });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:59:03.830

```
listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub

            }
        }); 
```

尝试使用此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:03:53.910

使用以下代码：

```
listView.setOnItemSelectedListener(this); 
```

实现方法后，您将获得以下方法：

```
@Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        // TODO Auto-generated method stub
Do your code here.....

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    } 
```

# php - 从字符串参数 MySQL PHP 中获取变量

> ID：10701466
> 
> 赞同：0
> 
> 时间：2012-05-22T11:49:57.177
> 
> 标签：php, mysql, html

我在为指定的事件 ID 实现 RecordResults 时遇到了一些麻烦。它需要能够做到 - 页面底部列出的事件条目应包含一个超链接，该超链接会将管理员带到一个新的 Web 表单以记录该事件的结果。EventID 通过查询字符串参数传递，例如 RecordResults.php?EventID=4。

目前我有这段代码要显示：

将数据记录到数据库中

```
 <?php
mysql_connect("localhost", "root", "") or die(mysql_error()); 

mysql_select_db("clubresults") or die(mysql_error());

if (isset($_POST['submit'])) {    
$EventDate = date('D-m-y', $EventDate);
$sql="INSERT INTO events (EventName, EventDate, Location)
VALUES
('".$_POST['EventName']."', '".$EventDate."', '".$_POST['EventLocation']."')";

$add_event = mysql_query($sql);

echo "Successfully Added 1 Event";
}
?> 
```

HTML 表单 + 从 MySQL 数据库生成表 -

```
<h2> Add Event To Database </h2>
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
Event Name: <input type="text" name="EventName" /><br>
Event Date: <input type="text" name="EventDate" /><br>
Event Location: <input type="text" name="EventLocation" /><br>
<input type="submit" name="submit" value="Add Event" />
</form>

<?php

$query = "SELECT * FROM events";
$result = mysql_query($query) or die ('Error in Query');

echo '<table width=100% border=1>';

echo '<tr><td><b>Event ID</b></td><td><b>Event Name</td><td><b>Event Date</b></td><td><b>Event Location</b></td><td><b> Record Results</b></td></tr>';

while ($row=mysql_fetch_row($result))

{

echo '<tr>';

echo '<td>'.$row[0].'</td>';

echo '<td>'.$row[1].'</td>';

echo '<td>'.$row[2].'</td>';

echo '<td>'.$row[3].'</td>';

echo '</tr>';

}

echo '</table>';

mysql_free_result($result);

?> 
```

我也一直在研究这个，但是我不确定如何使用它为表中传递 URL 字符串的每一行添加结果超链接。

```
 // Get id from URL
$id = mysql_real_escape_string( $_GET['EventID'] );

// If id is number
if( (int)$id== $id && (int)$id> 0 ) {

     // Get record from database
     $sql = 'SELECT * FROM Evernts WHERE EventID=' . $id;
     $result = mysql_query( $sql, $link );    
     $row = mysql_fetch_array( $result );

     // Show record with HTML here - Need to show it in the table!
     print_r( $row );

} else {

   echo "Record not found";
} 
```

任何帮助，将不胜感激！

感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:31:00.377

这是一个带有一些建议的答案。

*   当你命名事物时，尽量保持一致。您有以大写字母开头的变量，例如`$EventDate`，有些不喜欢`$result`，有些带有下划线`$add_event`。使用[camelCase](http://fr.wikipedia.org/wiki/CamelCase)命名变量。数据库中的表列名称也是如此：您有 EventName、EventDate 和 Location...
*   试着理解你在做什么。PHP 是一种宽容，不会抱怨像`$EventDate = date('D-m-y', $EventDate);`. 您不需要声明变量，因此它会将 $EventDate 评估为 0 ( `$EventDate = date('D-m-y', 0)`)。如果您不知道函数的作用或如何使用它，请 阅读[手册。](http://fr.php.net/manual/fr/function.date.php)
*   不要在选择查询中使用星号。明确命名您要检索的所有列。
*   你必须学习过时的 PHP 做事方式，这对你的老师来说是一种耻辱。因此，请注意更好的解决方案，例如[PDO](http://fr.php.net/manual/fr/book.pdo.php)和[准备好的](http://fr.php.net/manual/fr/pdo.prepare.php)或[引用](http://fr.php.net/manual/fr/pdo.quote.php)的语句。

据我了解，您希望在 HTML 表中显示数据库中的所有事件。
并且可以通过表单添加事件。您还希望将事件链接到记录结果页面，将事件 id 作为 URL 中的参数传递（您对此不清楚）。索引.php

```
 mysql_connect("localhost", "root", "") or die(mysql_error()); 
    mysql_select_db("clubresults") or die(mysql_error());

    if (isset($_POST['submit'])) 
    {   
        $eventName = mysql_real_escape_string($_POST['EventName']);
        $eventLocation = mysql_real_escape_string($_POST['EventLocation']);
                    // if you want to retrieve the date via the form 
                    // you have to check the format so that it corresponds to 
                    // what your date column expects (default format is Y-m-d)
        $eventDate = date('Y-m-d');

        $sql = "
            INSERT INTO events (EventName, EventDate, EventLocation)
            VALUES (
                '" . $eventName . "', 
                '" . $eventDate . "', 
                '" . $eventLocation . "'
            )";

        $addEventQueryResult = mysql_query($sql);

        if ($addEventQueryResult)
        {
            echo "Successfully added 1 event";
        }
        else 
        {
            echo "Error adding the event";
        }
    }
    ?>

    <h2>Add Event To Database</h2>
    <form action="index.php" method="post">
        Event Name: <input type="text" name="EventName" /><br>
        Event Date: <input type="text" name="EventDate" /><br>
        Event Location: <input type="text" name="EventLocation" /><br>
        <input type="submit" name="submit" value="Add Event" />
    </form>

    <?php

    $query = "
        SELECT EventId, EventName, EventDate, EventLocation 
        FROM events";

    $result = mysql_query($query) or die ('Error in Query');

    echo '<table width="100%" border="1">';

    echo '
        <tr>
            <th>Event ID</th>
            <th>Event Name</th>
            <th>Event Date</th>
            <th>Event Location</th>
            <th>Record Results</th>
        </tr>';

    while ($row = mysql_fetch_assoc($result))
    {
        $addResultLink = 
                '<a href="recordResults.php?EventId=' . 
                $row['EventId'] . 
                '">Add Results</a>';

        echo '<tr>' 
                . '<td>' . $row['EventId'] . '</td>' 
                . '<td>' . $row['EventName'] . '</td>'
                . '<td>' . $row['EventDate'] . '</td>' 
                . '<td>' . $row['EventLocation'] . '</td>' 
                . '<td>' . $addResultLink . '</td>' 
           . '</tr>';
    }

    echo '</table>';

    mysql_free_result($result);
    ?> 
```

这是 recordResults.php，它根据 URL 中的事件 id 检索事件，并使用与上面相同的 HTML 表显示事件。接下来做任何你想做的事。注意：这段代码应该被重构，这样你就不会两次编写同一个 HTML 表。

```
<?php

    date_default_timezone_set('Europe/Paris'); 

    mysql_connect("localhost", "root", "sqlflo54") or die(mysql_error()); 
    mysql_select_db("clubresults") or die(mysql_error());

    // Get id from URL
    $id = mysql_real_escape_string($_GET['EventId']);

    // If id is number
    if ($id > 0) 
    {
         // Get record from database
         $sql = "
            SELECT EventId, EventName, EventDate, EventLocation 
            FROM events 
            WHERE EventId = " . $id;
         $result = mysql_query($sql);    

         echo '<table width="100%" border="1">';

         echo '
            <tr>
                <th>Event ID</th>
                <th>Event Name</th>
                <th>Event Date</th>
                <th>Event Location</th>
            </tr>';

         while ($row = mysql_fetch_assoc($result))
         {
            echo '<tr>' 
                    . '<td>' . $row['EventId'] . '</td>' 
                    . '<td>' . $row['EventName'] . '</td>'
                    . '<td>' . $row['EventDate'] . '</td>' 
                    . '<td>' . $row['EventLocation'] . '</td>'  
               . '</tr>';
         }

         echo '</table>';

         mysql_free_result($result);
    } 
    else 
    {
       echo "Record not found";
    }
?> 
```

我希望这最终会帮助你理解你想要做什么。不要复制和粘贴此代码，因为我更改了一些变量名称以遵守上述建议。

# android - 如何使用 Monodroid 中的意图在活动中从浏览器接收 url

> ID：10701468
> 
> 赞同：1
> 
> 时间：2012-05-22T11:50:03.737
> 
> 标签：android, android-intent, xamarin.android

我已经成功配置了意图过滤器，它允许“共享链接”上的浏览器弹出我的应用程序。但是，处理部分是问题所在。

```
string g;
var action = Intent.Action;

if (Intent.ActionSend == action)
{
     g = Intent.GetStringExtra(Intent.ExtraText);    
} 
```

尝试了上半部分以及许多其他实现，但它不起作用（应用程序强制关闭）。在 Android 中，intent i =getintent() 似乎可以完成这项工作，但在 Monodroid 中，现在有直接的 get 方法。

然而，intent i = new intent (intent.getintent(string)); 在 monodroid 中，但还没有完成工作。请帮助（使用专业版的 monodroid 并在设备上进行测试）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:50:25.483

参数 to`GetStringExtra`不应该是`Intent.ExtraText`，而是您之前输入的额外名称。例如：

```
Intent intent = new Intent();
intent.PutExtra("someKey", someStringValue);
...
// In another activity
var value = Intent.GetStringExtra("someKey"); 
```

# windows-phone-7 - Windows phone 7 中的透明按钮

> ID：10701470
> 
> 赞同：0
> 
> 时间：2012-05-22T11:50:05.767
> 
> 标签：windows-phone-7, xaml

我想让我的按钮透明。我正在做不透明度 0，但它对我不起作用。如何使我的按钮在正常和按下状态下透明。

```
<Button VerticalAlignment="Top" HorizontalAlignment="Left" Width="140"  Height="80" Margin="0,240,0,0" >
                <StackPanel Orientation="Horizontal">
                    <Image Source="/Images/Search.png"/>
                </StackPanel>
</Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:50:50.197

如果您想要按钮的所有功能但希望它看起来像一个图像，您应该考虑使用 Expression Blend 使您的按钮看起来像您想要的那样。

这是如何做到这一点的演练。 [http://www.c-sharpcorner.com/uploadfile/cd80b9/creating-a-custom-button-from-an-image-in-expression-blend/](http://www.c-sharpcorner.com/uploadfile/cd80b9/creating-a-custom-button-from-an-image-in-expression-blend/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:00:32.067

您是否希望使用 Search.png 图像作为您的按钮？

如果是，为什么不挂钩 MouseLeftButtonDown 事件来执行特定操作。

我不确定您想用图像替换整个按钮控件然后使按钮本身透明来获得什么。

# c# - 代码合同警告未显示

> ID：10701471
> 
> 赞同：1
> 
> 时间：2012-05-22T11:50:10.897
> 
> 标签：c#, .net, code-contracts

我有这个简单的代码：

```
public ArrayStack(int capacity)
    {
        Contract.Requires(capacity >= 0);
        Contract.Ensures(_items != null);
        Contract.Ensures(_items.Length == capacity);
        _items = new T[capacity];
        _top = -1;
    } 
```

我预计一旦我键入以下内容，我会收到一个编译时警告，但我只会从合约中得到一个运行时异常。

```
static void Main(string[] args)
    {
        int i = -1;
        ArrayStack<string> stack = new ArrayStack<string>(i);

    } 
```

有任何想法吗？

已编辑：我的代码合同设置图片 ![在此处输入图像描述](../Images/2c05c20a794b97803e649e6d18bf60ee.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:03:44.403

弄清楚了。

似乎编译器太聪明了，在最后一行之后没有人使用堆栈，所以他没有检查它。

一旦我添加 stack.push(...) 它会给我错误...

不能让电脑太聪明...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:56:52.020

如果你想要波浪线，那么你必须检查'显示波浪线'：

![在此处输入图像描述](../Images/3f7e5ff9b2684abf691732dc33b56c81.png)

重新构建项目，等待静态分析完成，您将在“输出”窗口中看到两个警告（如果您没有运行 VS 的“终极”版本，这些很容易错过）和行在可疑代码下。

[编辑] 顺便说一句，我总是以“标准合同要求”装配模式运行。

然后在示例构建之后： ![在此处输入图像描述](../Images/aa020260c0f9c586752fd8f743769b0f.png)

在 IDE 中：

![在此处输入图像描述](../Images/7a2ce028ed7603918ccda5e122c5191f.png)

# wpf - 如何为树视图的选定项启用/禁用菜单项（在上下文菜单中）

> ID：10701478
> 
> 赞同：5
> 
> 时间：2012-05-22T11:50:39.337
> 
> 标签：wpf, treeview, contextmenu

我需要在 WPF 应用程序中使用树视图控件创建嵌套数据（类型为 DataItem）并将其分配给树视图控件。创建一个分层数据模板并将其分配给treeview控件添加一个contextmenu到treeview，现在我想通过SelectedItem的一个属性禁用或启用菜单项（我认为它应该是DataItem），“IsEnabled”

如何处理？

```
 <HierarchicalDataTemplate x:Key="dt" ItemsSource="{Binding Items}">
                <TextBlock x:Uid="TextBlock_2" Text="{Binding Name}">
                </TextBlock>
            </HierarchicalDataTemplate>

        <TreeView x:Name="tree_3" Height="200"
                  ItemTemplate="{StaticResource dt}"
                  >
            <TreeView.ContextMenu>
                <ContextMenu>
                    <MenuItem ItemsSource="{Binding SelectedItem}"
                        Header="doA" IsEnabled="{Binding IsEnabled, Mode=OneWay}"  />
                    <MenuItem Header="doB" IsEnabled="False"/>
                    <MenuItem Header="doC" />
                </ContextMenu>
            </TreeView.ContextMenu>
        </TreeView>

class DataItem : DependencyObject //INotifyPropertyChanged
{
    private List<DataItem> _items = new List<DataItem>();
    public List<DataItem> Items 
    {
        get
        {
            return _items;
        }
    }

    public string Name { get; set; }
    public int Category { get; set; }
    public bool IsEnabled { get; set; }
}

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        List<DataItem> allData = new List<DataItem>();

        DataItem i1 = new DataItem() { Name = "Test1", Category = 1, IsEnabled = false };
        DataItem i2 = new DataItem() { Name = "Test2", Category = 2, IsEnabled = false };
        DataItem i3 = new DataItem() { Name = "Test3", Category = 3, IsEnabled = true };

        DataItem t1 = new DataItem() { Name = "Template 1", Category = 1, IsEnabled = true  };
        DataItem t2 = new DataItem() { Name = "Template 2", Category = 1, IsEnabled = false };

        i1.Items.Add(t1);
        i1.Items.Add(t2);

        allData.Add(i1);
        allData.Add(i2);
        allData.Add(i3);
        tree_3.ItemsSource = allData;
    } 
```

我通过以下方法解决了这个问题。

1.  创建上下文菜单资源

    ```
    <ContextMenu x:Uid="ContextMenu_1" x:Key="TreeViewItemContextMenu"
             ItemsSource="{Binding}">
        <MenuItem x:Uid="MenuItem_1" 
              Header="Rename" 
              IsEnabled="{Binding Path=., Converter={StaticResource renameMenuConverter}}"
              Click="RenameMenu_OnClick"
              />
    </ContextMenu> 
    ```

2.  为树视图项创建样式并使用上面的上下文菜单资源

    ```
    <Style TargetType="{x:Type TreeViewItem}" x:Uid="Style_1">
    <Setter x:Uid="Setter_32" Property="ContextMenu" Value="{StaticResource           TreeViewItemContextMenu}">
    </Setter>
    ...
    </Style> 
    ```

3.  实现一个转换器。根据上面的标记扩展，convert传入的参数是当前选中的项目，所以我可以获取它的属性并进行检查。

感谢您所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:05:39.317

我在 WinForm TreeView 中使用了它并取得了成功。

声明 DataItems 时还包括其中的标记属性。

```
DataItem i1 = new DataItem() { Name = "Test1", 
                  Category = 1, IsEnabled = false, Tag = "Test1" }; 
```

在 TreeView 的 EventListener 上，投射发件人对象或从 TreeView 获取 SelectedItem。

```
//It is only Algorithm:
if treeview1.selecedItem.Tag = "Test1" then
    //code for execution
end if 
```

同样对于发送者对象，

```
//It is only Algorithm:
variable treeNode = cast ( sender to TreeView ).SelectedItem
if treeNode.Tag = "Test1" then
    //code for execution
end if 
```

至于“执行代码”，您可以启用或禁用 MenuItems。

注意：您尚未在 ContextMenu 标记中为 MenuItems 声明 x:Name 属性。请这样做以访问 MenuItems。

IsEnabled 是用于启用或禁用 WPF 中的可交互项的直接属性

我只是给出了算法，因为我更像是一个 VB 而不是 C#。所以我不想弄乱代码。

祝你有美好的一天 ：）

# php - PHP 通过 php://fd/ 读取上传的文件

> ID：10701481
> 
> 赞同：1
> 
> 时间：2012-05-22T11:50:49.117
> 
> 标签：php, upload, file-descriptor

是否可以通过协议 php://fd/ 读取上传的文件？

例如：

```
<?php
    echo file_get_contents('php://fd/1'); // I quess file descriptor (1) is the name of file input ?>

<form method="post" enctype="multipart/form-data">
    <input type="file" name="1"/>
    <input type="submit" value="ok"/>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:58:58.920

**php://fd**需要文件描述符。我认为您必须在上传的文件上使用 fopen 创建一个，然后使用它的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:19:09.067

尝试

```
<?php echo file_get_contents($_FILES["1"]["tmp_name"]); ?> 
```

# objective-c - UITableView 提交编辑错误

> ID：10701482
> 
> 赞同：1
> 
> 时间：2012-05-22T11:50:51.790
> 
> 标签：objective-c, ios, cocoa-touch

我有一个 UITableView 填充了一个从 NSUserDefaults 读取的可变数组。我希望用户能够删除一些存在的项目。以下是特定于编辑方法的代码，这是整个文件： http: [//pastebin.com/LmZMWBN9](http://pastebin.com/LmZMWBN9)

当我单击“编辑”并删除一个项目时，应用程序崩溃并返回：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[__NSCFArray removeObjectAtIndex:]: mutating method sent to immutable object”

我的具体问题是，我在这里做错了什么？

```
 // Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:    (UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (editingStyle == UITableViewCellEditingStyleDelete) {

    // edit list of names 
    if ([listOfNames count] >= 1) {
        [tableView beginUpdates];
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [listOfNames removeObjectAtIndex:[indexPath row]];

       // write updated listofnames to nsuserdefaults
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

         [[NSUserDefaults standardUserDefaults] setObject:listOfNames forKey:@"My Key"];

        [defaults synchronize];

        if ([listOfNames count] == 0) {
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        }
        [tableView endUpdates];
    }

}   
else if (editingStyle == UITableViewCellEditingStyleInsert) {
    // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
}   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:57:42.193

您的`listOfNames`实例变量是不可变的，因此您不能从中删除对象。

改变：

```
listOfNames = [[defaults objectForKey:@"My Key"] copy]; 
```

到

```
listOfNames = [[defaults objectForKey:@"My Key"] mutableCopy]; 
```

在你的`-viewWillAppear:`和`viewDidLoad`方法中。

# objective-c - UITextView 中的不同文本格式？或者是其他东西？

> ID：10701491
> 
> 赞同：0
> 
> 时间：2012-05-22T11:51:11.990
> 
> 标签：objective-c, ios, format, uitextview

我想在同一个文本视图中设置不同的文本格式（普通、粗体、斜体...）或 HTML。UITextView 可以吗？或者还有什么？

感谢您的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:59:53.280

我在 Stack over flow 中找到了这个

还有一个未记录的`-[UITextView setContentToHTMLString:]`方法。

但是人们说如果您使用未记录的方法，该应用程序将被拒绝，请参阅此 stackoverflow 链接[Display html text in uitextview](https://stackoverflow.com/questions/2454067/display-html-text-in-uitextview)

请看看这个也 [有在textview中显示HTML内容吗？](https://stackoverflow.com/questions/1998030/is-there-anyway-to-display-html-content-in-textview)

这也是[UITextView 富文本？](https://stackoverflow.com/questions/1436839/uitextview-rich-text)

堆栈溢出还有更多请在stackoverflow中搜索..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:16:56.587

你为什么不使用[UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)？你可以使用纯 HTML，因为它是一个完整的工作浏览器

# jquery - 如何使用 div 类获取 div id 并将其传递给 jquery

> ID：10701493
> 
> 赞同：0
> 
> 时间：2012-05-22T11:51:18.667
> 
> 标签：jquery

我需要使用 div name 获取 div id 及其子类名称。但是 div Id 将始终不同且唯一。

**HTML**

```
<div class="diagram" id="12" >
<div class="121">
    ...     
</div>
</div>

<div class="diagram" id="133" >
<div class="33">
    ...     
</div>
</div>

<div class="diagram" id="199" >
<div class="77">
    ...     
</div>
</div> So on.. 
```

查询

```
$(function(){ 
//i need to pass  to values to the function in the following way

o.circle("12","121");
o.circle("133","33"); 
o.circle("199","77"); 

//So on..
}); 
```

请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:53:07.103

```
$('div.diagram').each(function() {

  // this.id -> get the id of parent i.e div.diagram
  // $('div:first', this) -> get the first child of diagram, here this refers to diagram
  // $('div:first', this).attr('class') -> get the class name of child div

  o.circle(this.id, $('div:first', this).attr('class'));
}); 
```

如果您想在任何活动中尝试此操作，请尝试：

例子：

```
// I assumed a click event

$('div.diagram').on('click', function() {
  o.circle(this.id, $('div:first', this).attr('class'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:18:45.943

你可以用这个。它对我来说很好用。

```
 $('div.diagram').on('event_name', function() { // use click, hover, change, focus at the place of event_name whatever you need
                   o.circle(this.id, $('div:first', this).attr('class'));
                 }); 
```

# java - JSF 页面中删除按钮中的错误

> ID：10701499
> 
> 赞同：0
> 
> 时间：2012-05-22T11:51:51.150
> 
> 标签：java, javascript, jsf, jsf-2, jquery-dialog

我正在尝试使用删除按钮实现 JSF 表。这是显示对话框的 JavaScript：

```
function dialog(a){              
    $("<div />", {
        text: a
    }).dialog({        
        width: 600,
        buttons: {
            "Ok": function() { 
                $("#myHiddenButtonID").click();
                $(this).dialog("close"); 
            }, 
            "Cancel": function(event) { 
                $(this).dialog("close");
                event.preventDefault();
            } 
        }
    });

} 
```

当用户从对话框中确认时，我使用第二个隐藏按钮删除行：

```
<!-- hidden button -->
<h:commandButton id="myHiddenButtonID" value="DeleteHiddenButton" action="#{bean.deleteSelectedIDs}" style="display:none">
    <f:ajax render="@form" execute="@form"></f:ajax>
</h:commandButton>

<!-- the button -->
<h:commandButton value="Delete">
    <f:ajax execute="@form" onevent="dialog('demo test')"></f:ajax>
</h:commandButton> 
```

当我单击删除按钮时，会出现对话框以确认删除表行。然后我单击“是”，没有任何反应。我想隐藏的按钮 id 是问题，但是当我尝试修复它时，什么也没有发生。不调用托管 bean 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:59:02.797

查看隐藏按钮上的萤火虫或查看源代码，查看其完整 id，它可能带有类似前缀`form1ID:myHiddenButtonID`或其他前缀，如果是这种情况，您应该写一个更好的`id`（例如 form1ID:myHiddenButtonID）

像这样

```
$("#form1ID\\:myHiddenButtonID").click(); 
```

此外，您可以`style="display:none"`从该按钮中删除并手动单击它以查看其是否真正按预期运行......

你也可以试试[Attribute Ends With Selector](http://api.jquery.com/attribute-ends-with-selector/)

像这样

```
$('input[id$="myHiddenButtonID"]').click(); 
```

# php - 如何实现无限滚动砌体

> ID：10701500
> 
> 赞同：-1
> 
> 时间：2012-05-22T11:51:55.607
> 
> 标签：php, javascript, jquery

我使用 masonry js 在我的网站上显示内容。

我想使用这个文件实现无限滚动功能。

我看过这个演示

[http://masonry.desandro.com/demos/infinite-scroll.html](http://masonry.desandro.com/demos/infinite-scroll.html)

但我不明白如何在我的网站上实现这个演示。

这是我的网站

[http://www.techmodi.com/demo/lookandpin_demo/](http://www.techmodi.com/demo/lookandpin_demo/)

我用过这些js文件，

1) jquery-ui.min.js

2) jquery.masonry.min.js

如果有人有，请给我解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:00:45.250

尝试使用 Chrome（或 Firefox）的检查器（Ctrl+Shift+J），然后单击网络选项卡。在那里你可以看到无限滚动是如何工作的。您必须划分页面，插件不会为您执行此操作。

# c++ - 命令在终端中工作，但不是通过 QProcess

> ID：10701504
> 
> 赞同：21
> 
> 时间：2012-05-22T11:52:05.683
> 
> 标签：c++, linux, qt, terminal, pipe

```
ifconfig | grep 'inet' 
```

通过终端执行时正在工作。但不是通过 QProcess

我的示例代码是

```
QProcess p1;
p1.start("ifconfig | grep 'inet'");
p1.waitForFinished();
QString output(p1.readAllStandardOutput());
textEdit->setText(output); 
```

textedit 上没有显示任何内容。

但是当我`ifconfig`在 qprocess 开始时使用时，输出会显示在 textedit 上。我是否错过了构造命令的任何技巧`ifconfig | grep 'inet'`，例如使用`\'`for`'`和`\|`for `|`？对于特殊字符？但我也试过了:(

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-22T11:59:00.570

QProcess 执行一个单一的进程。你想要做的是执行一个*shell 命令*，而不是一个进程。命令的管道是 shell 的一个特性。

有三种可能的解决方案：

将要执行的命令作为参数放在`sh`after `-c`("command") 中：

```
QProcess sh;
sh.start("sh", QStringList() << "-c" << "ifconfig | grep inet");

sh.waitForFinished();
QByteArray output = sh.readAll();
sh.close(); 
```

或者您可以将命令作为标准输入写入`sh`：

```
QProcess sh;
sh.start("sh");

sh.write("ifconfig | grep inet");
sh.closeWriteChannel();

sh.waitForFinished();
QByteArray output = sh.readAll();
sh.close(); 
```

另一种避免的方法`sh`是启动两个 QProcesses 并在您的代码中进行管道：

```
QProcess ifconfig;
QProcess grep;

ifconfig.setStandardOutputProcess(&grep); // "simulates" ifconfig | grep

ifconfig.start("ifconfig");
grep.start("grep", QStringList() << "inet"); // pass arguments using QStringList

grep.waitForFinished(); // grep finishes after ifconfig does
QByteArray output = grep.readAll(); // now the output is found in the 2nd process
ifconfig.close();
grep.close(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-22T11:58:50.960

该`QProcess`对象不会自动为您提供完整的 shell 语法：您不能使用管道。为此使用外壳：

```
p1.start("/bin/sh -c \"ifconfig | grep inet\""); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-22T12:01:33.640

您似乎不能在 QProcess 中使用管道符号。

但是，有[setStandardOutputProcess](http://qt-project.org/doc/qt-4.8/qprocess.html#setStandardOutputProcess)方法将输出传送到下一个进程。

API 中提供了一个示例。

# jquery - photoswipe 插件在关闭时显示我未定义

> ID：10701509
> 
> 赞同：1
> 
> 时间：2012-05-22T11:52:27.323
> 
> 标签：jquery, jquery-mobile

我正在使用`Jquery Mobile 1.0`和`PhotoSwipe plugin`为画廊。我的问题是，当我打开画廊照片时，它运行良好，但是照片滑动`when i close`显示了一个**空白屏幕，屏幕左上角有 UNDEFINED**，有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T18:26:00.240

我正在回答我自己的问题，我希望这对其他人有帮助：

我`rel="external"`在锚标记中丢失了，这很重要，如果你不这样做，这会弄乱 jQuery Mobile 的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T21:02:23.003

这也可能是iOS上崩溃的这个[问题/拉取请求](https://github.com/codecomputerlove/PhotoSwipe/pull/311)

# android - Android 活动崩溃

> ID：10701510
> 
> 赞同：1
> 
> 时间：2012-05-22T11:52:27.827
> 
> 标签：android

我做了一个简单的汽车里程计算器。

```
package com.android.carmanager;

import com.android.carmanager.CarManagerActivity;
import android.os.Bundle;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.view.View;

public class MileageCalculator extends CarManagerActivity {
private EditText input1;
private EditText input2;
private EditText input3;
private TextView distance;
private TextView showmileage;

  @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mileagecalculator);

        input1 = (EditText) findViewById(R.id.input1);
        input2 = (EditText) findViewById(R.id.input2);
        input3 = (EditText) findViewById(R.id.input3);
        distance = (TextView) findViewById(R.id.distance);
        showmileage = (TextView) findViewById(R.id.showmileage);

        Button calculatebutton = (Button) findViewById(R.id.calculatebutton);

        double totaldistance = new Double(input2.getText().toString()) - new Double(input1.getText().toString());
        distance.setText(Double.toString(totaldistance));

        calculatebutton.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {

                double result = new Double(distance.getText().toString()) / new Double(input3.getText().toString());
                showmileage.setText(Double.toString(result));

            }

    });

}
} 
```

里程计算器 .xml 文件在这里：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:orientation="vertical">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/InitialOdo"
        android:padding="10dp" android:textStyle="bold"/>

    <EditText
        android:id="@+id/input1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:inputType="number"
        android:padding="10dp" >

    </EditText>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/FinalOdo"
        android:padding="10dp" 
        android:textStyle="bold"/>

    <EditText
        android:id="@+id/input2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:inputType="number"
        android:padding="10dp" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="10dp"
        android:text="@string/distance"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/distance"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="10dp"/>

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/fuelrefilled"
        android:padding="10dp" android:textStyle="bold"/>

    <EditText
        android:id="@+id/input3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:inputType="number"
        android:padding="10dp" />

    <Button
        android:id="@+id/calculatebutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/CalcMileage" />

    <TextView
        android:id="@+id/showmileage"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center_vertical|center_horizontal" />

</LinearLayout> 
```

每当我尝试运行这个简单的里程计算器活动时，应用程序简单崩溃都会返回到主屏幕。我在日志猫中遇到以下错误。

```
05-22 17:05:09.743: W/dalvikvm(542): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
05-22 17:05:09.793: E/AndroidRuntime(542): FATAL EXCEPTION: main
05-22 17:05:09.793: E/AndroidRuntime(542): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.carmanager/com.android.carmanager.MileageCalculator}: java.lang.NumberFormatException: Invalid double: ""
05-22 17:05:09.793: E/AndroidRuntime(542):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-22 17:05:09.793: E/AndroidRuntime(542):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-22 17:05:09.793: E/AndroidRuntime(542):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-22 17:05:09.793: E/AndroidRuntime(542):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-22 17:05:09.793: E/AndroidRuntime(542):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-22 17:05:09.793: E/AndroidRuntime(542):  at android.os.Looper.loop(Looper.java:137)
05-22 17:05:09.793: E/AndroidRuntime(542):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-22 17:05:09.793: E/AndroidRuntime(542):  at java.lang.reflect.Method.invokeNative(Native Method)
05-22 17:05:09.793: E/AndroidRuntime(542):  at java.lang.reflect.Method.invoke(Method.java:511)
05-22 17:05:09.793: E/AndroidRuntime(542):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-22 17:05:09.793: E/AndroidRuntime(542):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-22 17:05:09.793: E/AndroidRuntime(542):  at dalvik.system.NativeStart.main(Native Method)
05-22 17:05:09.793: E/AndroidRuntime(542): Caused by: java.lang.NumberFormatException: Invalid double: ""
05-22 17:05:09.793: E/AndroidRuntime(542):  at java.lang.StringToReal.invalidReal(StringToReal.java:63)
05-22 17:05:09.793: E/AndroidRuntime(542):  at java.lang.StringToReal.parseDouble(StringToReal.java:248)
05-22 17:05:09.793: E/AndroidRuntime(542):  at java.lang.Double.parseDouble(Double.java:295)
05-22 17:05:09.793: E/AndroidRuntime(542):  at java.lang.Double.<init>(Double.java:136)
05-22 17:05:09.793: E/AndroidRuntime(542):  at com.android.carmanager.MileageCalculator.onCreate(MileageCalculator.java:30)
05-22 17:05:09.793: E/AndroidRuntime(542):  at android.app.Activity.performCreate(Activity.java:4465)
05-22 17:05:09.793: E/AndroidRuntime(542):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-22 17:05:09.793: E/AndroidRuntime(542):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-22 17:05:09.793: E/AndroidRuntime(542):  ... 11 more
05-22 17:05:10.033: I/dalvikvm(542): threadid=3: reacting to signal 3
05-22 17:05:10.043: I/dalvikvm(542): Wrote stack traces to '/data/anr/traces.txt'
05-22 17:05:10.493: I/dalvikvm(542): threadid=3: reacting to signal 3
05-22 17:05:10.563: I/dalvikvm(542): Wrote stack traces to '/data/anr/traces.txt'
05-22 17:05:12.313: I/Process(542): Sending signal. PID: 542 SIG: 9 
```

我已经重新启动了eclipse，avd几次。多次清理构建并删除了 R.java 文件，但我仍然被困在这里，不知道下一步该做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:55:51.550

在您的`OnCreate`方法中，您正在计算一个字段并从 TextViews 中检索双精度数。不幸的是，您的 TextViews 是空白的，因此无法转换为双精度。

这是问题行：

```
double totaldistance = new Double(input2.getText().toString()) 
              - new Double(input1.getText().toString()); 
```

您需要将计算移动到仅按下按钮，在尝试计算之前对数据进行一些验证，或者设置一些默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:55:13.973

这就是导致问题的原因： double totaldistance = new Double(input2.getText().toString()) - new Double(input1.getText().toString());

由于您的文本输入字段可能为空，因此无法将其转换为浮点数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:57:51.037

似乎您在这里尝试将字符串用作双精度...如果您确定该值将是双精度，那么您可以转换为双精度

```
double totaldistance = new Double(input2.getText().toString()) - new Double(input1.getText().toString());
distance.setText(Double.toString(totaldistance)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T12:00:25.233

```
double totaldistance = new Double(input2.getText().toString()) - new Double(input1.getText().toString());
distance.setText(Double.toString(totaldistance)); 
```

# mysql - 如何修改查询以强制使用索引的左前缀？

> ID：10701513
> 
> 赞同：0
> 
> 时间：2012-05-22T11:52:31.520
> 
> 标签：mysql

我有以下类型的 SQL 查询：

```
SELECT * FROM data_table WHERE col2 >= x AND col2 < x+y 
```

data_table 上有一个 index_1(col1, col2, col3) ，而第一到第三列保存大于零的整数值，而不允许使用空值。由于 MySQL 中索引的每个左前缀都是索引，我的第一个方法是修改查询，希望 MySQL 将使用 index_1 并加快查询速度。修改后的查询如下所示：

```
SELECT * FROM data_table WHERE col2 >= x AND col2 < x+y OR col1 >0 
```

我的想法是，当我添加一些始终正确但不改变结果的东西时，MySQL 将使用 index_1(col1, col2) 的左前缀，但快速浏览一下 EXPLAIN，不幸的是它没有。

有谁知道如何修改查询以便使用 index_1 ？还是只是不可能？

供您参考：data_table 非常大，由于创建时间长，使用 col2 创建新索引不是一个合适的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:07:15.037

对不起

我回答得太晚了，我在前一年读到了这本书，现在我找到了涵盖这本书和那本书的书，你不应该使用 * 因为你的索引没有涵盖它，你应该像 SELECT col1,col2 一样定义列,col3 等...或将查询重写为这样的内容： `SELECT * FROM data_table JOIN (SELECT col1 FROM data_table WHERE col2>=x AND col2<x+y) AS table ON (table.col1=data_table.col1)`，在子查询中将使用索引，因此它会比您的查询更快...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:57:08.450

`col1 > 0`是没有意义的：它的意思是“每一行”。优化器使用的统计数据将显示这一点，因此索引被忽略或使用效率低下（扫描，未搜索）

想法：

*   如果您使用的是 col2，为什么不在 col2 上创建索引？
*   将索引更改为 (col2, col1, col3)

此外，检查您是否需要*当前*索引。除非它用于其他查询，否则将其替换为更有用的东西

# c++ - 如何从 boost::python 返回 numpy.array？

> ID：10701514
> 
> 赞同：28
> 
> 时间：2012-05-22T11:52:36.597
> 
> 标签：c++, arrays, numpy, boost-python

我想从 c++ 代码中返回一些数据作为`numpy.array`对象。我看过`boost::python::numeric`，但它的文档非常简洁。我可以得到一个例子，例如将一个（不是很大）返回`vector<double>`给 python 吗？我不介意复制数据。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-22T15:39:31.130

**更新：**我的原始答案（[https://github.com/ndarray/Boost.NumPy](https://github.com/ndarray/Boost.NumPy)）中描述的库已直接集成到 Boost.Python 中，因为 Boost 1.63，因此现在不推荐使用独立版本。下面的文本现在对应于新的集成版本（只有命名空间发生了变化）。

Boost.Python 现在将 NumPy C-API 的适度完整包装器包含到 Boost.Python 接口中。这是相当低级的，主要集中在如何解决如何在不复制的情况下将 C++ 数据传入和传出 NumPy 的更困难的问题，但这里是你如何使用复制的 std::vector 返回：

```
#include "boost/python/numpy.hpp"

namespace bp = boost::python;
namespace bn = boost::python::numpy;

std::vector<double> myfunc(...);

bn::ndarray mywrapper(...) {
    std::vector<double> v = myfunc(...);
    Py_intptr_t shape[1] = { v.size() };
    bn::ndarray result = bn::zeros(1, shape, bn::dtype::get_builtin<double>());
    std::copy(v.begin(), v.end(), reinterpret_cast<double*>(result.get_data()));
    return result;
}

BOOST_PYTHON_MODULE(example) {
    bn::initialize();
    bp::def("myfunc", mywrapper);
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-09T10:16:08.050

不需要您下载任何特殊的第 3 方 C++ 库（但您需要 numpy）的解决方案。

```
#include <numpy/ndarrayobject.h> // ensure you include this header

boost::python::object stdVecToNumpyArray( std::vector<double> const& vec )
{
      npy_intp size = vec.size();

     /* const_cast is rather horrible but we need a writable pointer
        in C++11, vec.data() will do the trick
        but you will still need to const_cast
      */

      double * data = size ? const_cast<double *>(&vec[0]) 
        : static_cast<double *>(NULL); 

    // create a PyObject * from pointer and data 
      PyObject * pyObj = PyArray_SimpleNewFromData( 1, &size, NPY_DOUBLE, data );
      boost::python::handle<> handle( pyObj );
      boost::python::numeric::array arr( handle );

    /* The problem of returning arr is twofold: firstly the user can modify
      the data which will betray the const-correctness 
      Secondly the lifetime of the data is managed by the C++ API and not the 
      lifetime of the numpy array whatsoever. But we have a simple solution..
     */

       return arr.copy(); // copy the object. numpy owns the copy now.
  } 
```

当然，您可以从 double * 和 size 编写一个函数，它是通用的，然后通过提取此信息从向量中调用它。您也可以编写一个模板，但您需要某种从数据类型到`NPY_TYPES`枚举的映射。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-12-01T14:55:14.840

有点晚了，但是经过多次不成功的尝试后，我找到了一种将 c++ 数组直接公开为 numpy 数组的方法。`boost::python`这是一个使用和 Eigen的简短 C++11 示例：

```
#include <numpy/ndarrayobject.h>
#include <boost/python.hpp>

#include <Eigen/Core>

// c++ type
struct my_type {
  Eigen::Vector3d position;
};

// wrap c++ array as numpy array
static boost::python::object wrap(double* data, npy_intp size) {
  using namespace boost::python;

  npy_intp shape[1] = { size }; // array size
  PyObject* obj = PyArray_New(&PyArray_Type, 1, shape, NPY_DOUBLE, // data type
                              NULL, data, // data pointer
                              0, NPY_ARRAY_CARRAY, // NPY_ARRAY_CARRAY_RO for readonly
                              NULL);
  handle<> array( obj );
  return object(array);
}

// module definition
BOOST_PYTHON_MODULE(test)
{
  // numpy requires this
  import_array();

  using namespace boost::python;

  // wrapper for my_type
  class_< my_type >("my_type")
    .add_property("position", +[](my_type& self) -> object {
        return wrap(self.position.data(), self.position.size());
      });

} 
```

该示例描述了该属性的“getter”。对于“setter”，最简单的方法是`boost::python::object`使用 a手动分配数组元素`boost::python::stl_input_iterator<double>`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T13:41:24.027

直接使用 numpy api 并不一定很困难，但是我经常在我的项目中使用 boost::multiarray 并且发现在 C++/Python 边界之间自动传输数组的形状很方便。所以，这是我的食谱。使用[http://code.google.com/p/numpy-boost/](http://code.google.com/p/numpy-boost/)，或者更好的是，[这个](http://dl.dropbox.com/u/5363697/numpy_boost.hpp)版本的 numpy_boost.hpp 标头；尽管它使用了一些 C++11，但它更适合多文件 boost::python 项目。然后，从您的 boost::python 代码中，使用如下内容：

```
PyObject* myfunc(/*....*/)
{
   // If your data is already in a boost::multiarray object:
   // numpy_boost< double, 1 > to_python( numpy_from_boost_array(result_cm) );
   // otherwise:
   numpy_boost< double, 1> to_python( boost::extents[n] );
   std::copy( my_vector.begin(), my_vector.end(), to_python.begin() );

   PyObject* result = to_python.py_ptr();
   Py_INCREF( result );

   return result;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-10T00:17:10.193

我查看了可用的答案并想，“这很容易”。我继续花费数小时尝试看似微不足道的示例/对答案的改编。

然后我完全实现了@max 的答案（必须安装 Eigen），它运行良好，但我仍然无法适应它。我的问题主要是（按数量）愚蠢的语法错误，但另外，在向量似乎从堆栈中删除之后，我使用了指向复制的 std::vector 数据的指针。

在此示例中，返回指向 std::vector 的指针，但您也可以返回 size 和 data() 指针或使用任何其他实现，使您的 numpy 数组以稳定的方式访问底层数据（即保证存在）：

```
class_<test_wrap>("test_wrap")
    .add_property("values", +[](test_wrap& self) -> object {
            return wrap(self.pvalues()->data(),self.pvalues()->size());
        })
    ; 
```

对于带有 a 的 test_wrap `std::vector<double>`（通常 pvalues() 可能只返回指针而不填充向量）：

```
class test_wrap {
public:
    std::vector<double> mValues;
    std::vector<double>* pvalues() {
        mValues.clear();
        for(double d_ = 0.0; d_ < 4; d_+=0.3)
        {
            mValues.push_back(d_);
        }
        return &mValues;
    }
}; 
```

完整示例在 Github 上，因此您可以跳过繁琐的转录步骤，而不必担心构建、库等。您应该能够执行以下操作并获得一个功能示例（如果您安装了必要的功能并设置了路径已经）：

```
git clone https://github.com/ransage/boost_numpy_example.git
cd boost_numpy_example
# Install virtualenv, numpy if necessary; update path (see below*)
cd build && cmake .. && make && ./test_np.py 
```

这应该给出输出：

```
# cmake/make output
values has type <type 'numpy.ndarray'>
values has len 14
values is [ 0\.   0.3  0.6  0.9  1.2  1.5  1.8  2.1  2.4  2.7  3\.   3.3  3.6  3.9] 
```

*在我的情况下，我将 numpy 放入 virtualenv 如下 - 如果您可以`python -c "import numpy; print numpy.get_include()"`按照@max 的建议执行，这应该是不必要的：

```
# virtualenv, pip, path unnecessary if your Python has numpy
virtualenv venv
./venv/bin/pip install -r requirements.txt 
export PATH="$(pwd)/venv/bin:$PATH" 
```

玩得开心！:-)

# android - 如何使用我创建的库 Android 的方法？

> ID：10701523
> 
> 赞同：0
> 
> 时间：2012-05-22T11:53:23.647
> 
> 标签：android, class, hierarchy

我创建了一个 Android 库：AndroidLib。我在设置中将其标记为“isLibrary”。我在我的项目中导入了它，并在 BuildPath 中添加了 AndroidLib。现在，我必须 `public void inviaDati(String,String,String,String,String)` 在我的新项目中调用 AndroidLib 中的方法。

我能怎么做？

我应该静态地做它，而不是一个对象。语法是什么？

# python - 如何使用 PyLZMA 的示例

> ID：10701528
> 
> 赞同：13
> 
> 时间：2012-05-22T11:53:47.747
> 
> 标签：python, archive, extraction, 7zip

我想使用[PyLZMA](http://www.joachim-bauch.de/projects/pylzma/)从存档（例如 test.7z）中提取文件并将其提取到同一目录。

我是 Python 的新手，不知道如何开始。我做了一些谷歌搜索并找到[了一些示例](http://nullege.com/codes/search/pylzma.decompress)和[文档](http://github.com/fancycode/pylzma/blob/master/doc/usage.txt)，但我不明白它们是如何工作的。

有人可以发布我想做的基本代码，以便我可以开始工作和理解吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T03:32:16.520

这是一个处理基本功能的 Python 类。我已经将它用于我自己的工作：

```
import py7zlib
class SevenZFile(object):
    @classmethod
    def is_7zfile(cls, filepath):
        '''
        Class method: determine if file path points to a valid 7z archive.
        '''
        is7z = False
        fp = None
        try:
            fp = open(filepath, 'rb')
            archive = py7zlib.Archive7z(fp)
            n = len(archive.getnames())
            is7z = True
        finally:
            if fp:
                fp.close()
        return is7z

    def __init__(self, filepath):
        fp = open(filepath, 'rb')
        self.archive = py7zlib.Archive7z(fp)

    def extractall(self, path):
        for name in self.archive.getnames():
            outfilename = os.path.join(path, name)
            outdir = os.path.dirname(outfilename)
            if not os.path.exists(outdir):
                os.makedirs(outdir)
            outfile = open(outfilename, 'wb')
            outfile.write(self.archive.getmember(name).read())
            outfile.close() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T23:01:46.157

这是我在这里找到的两个代码片段[http://www.linuxplanet.org/blogs/?cat=3845](http://www.linuxplanet.org/blogs/?cat=3845)

```
# Compress the input file (as a stream) to a file (as a stream)
i = open(source_file, 'rb')
o = open(compressed_file, 'wb')
i.seek(0)
s = pylzma.compressfile(i)
while True:
    tmp = s.read(1)
    if not tmp: break
    o.write(tmp)
o.close()
i.close()

# Decomrpess the file (as a stream) to a file (as a stream)
i = open(compressed_file, 'rb')
o = open(decompressed_file, 'wb')
s = pylzma.decompressobj()
while True:
    tmp = i.read(1)
    if not tmp: break
    o.write(s.decompress(tmp))
o.close()
i.close() 
```

# java - 需要工作解决方案才能在自定义应用程序中使用 Android 模式锁定屏幕（而不是源代码重定向）

> ID：10701532
> 
> 赞同：11
> 
> 时间：2012-05-22T11:53:56.153
> 
> 标签：java, android

我想在打开应用程序时在我的自定义应用程序中使用 Android 锁屏模式。我搜索了很多，但每个人都要求使用源代码中的 LockScreenUtils.java 类。我很难做到这一点。

stackoverflow 上的一篇文章要求在每个单元格上使用一个按钮制作自定义 3x3 矩阵并听取选择模式，但这看起来并不美观 :)

关于如何实现这一点的任何想法或建议？

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T12:43:45.927

在与那些自定义按钮苦苦挣扎之后，花时间从 AOSP 中挖掘出 LockPattern Source，我偶然发现了这个很棒的库，它解决了我的问题。希望它也能帮助你。

[Android 锁模式库](http://code.google.com/p/android-lockpattern/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T11:42:45.030

手动完成，你可以只用一个`View`，然后在你想要的 9 个点上手动绘制一些漂亮的图形。然后只听任何`MotionEvent`; 如果它位于以前未触摸过的“按钮区域”内，请将其标记为已按下（并更改图形），并添加一条漂亮的线将其连接到最后触摸的“按钮”到要绘制的内容。

所以你只需要：

*   带有`View`一些简单的自定义渲染代码和漂亮的按钮“开”/“关”图形。
*   带有坐标和“开”/“关”状态的“按钮区域”列表。
*   到目前为止按下的按钮列表，用于存储输入的模式并为到目前为止的序列绘制线条。

这应该比表格中的按钮更容易改善外观。

# windows-phone-7 - 带有 itemTemplate wp7 的列表框

> ID：10701534
> 
> 赞同：-3
> 
> 时间：2012-05-22T11:54:12.757
> 
> 标签：windows-phone-7

如何在图像前面显示项目？

我希望图像 images/bl_cell.png 与列表项重复.. 此代码用项重复照片，但它没有显示图像前面的项目，任何人都可以通过这样做来提供帮助？

```
<Grid x:Name="ContentPanel" Margin="0,128,0,0" HorizontalAlignment="Right" Width="480">
    <TextBlock x:Name="TextBlock3" Margin="233,440,7,83" TextWrapping="Wrap" Text="" Visibility="Collapsed"/>
    <ScrollViewer Margin="-7,0,0,0" x:Name="ss">
        <Grid Height="933" Width="487">
            <ListBox Margin="8,0,0,0" Name="listb" SelectionChanged="listb_SelectionChanged" >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid Background="{Binding Source=images/bl_cell.png}">
                            <StackPanel>
                                <Image Height="45" Source="images/bl_cell.png" Stretch="Fill" Width="479"  />
                            </StackPanel>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid>
    </ScrollViewer>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:13:17.493

不要将它们放在 StackPanel 中。将它们全部放在同一 Grid 行和列中。当他们渲染时，他们会从头到尾渲染，从后到前，所以像这样的东西会在图像上显示文本：

```
<Grid>
   <Image Source="..." />
   <TextBox Text="This is caption text on the bottom."  VerticalAlignment="Bottom" />
</Grid> 
```

# javascript - 通过在文本框中输入多个产品 ID 将多个产品添加到购物车

> ID：10701538
> 
> 赞同：2
> 
> 时间：2012-05-22T11:54:18.827
> 
> 标签：javascript, magento, jquery, e-commerce

我正在 Magento 中开发一个选项，客户可以在文本框中输入多个产品 ID 并将它们添加到购物车。我只能为一个产品 ID 执行此操作，使用以下 jquery 在输入框中输入它，

```
$(document).ready(function(){
        $("#submit").click(function(){
            var id = $("#nam").val();
            $.post("....../checkout/cart/add", { product:id },
            function(data) {
                alert("The Product is added to your shopping cart.");
                window.location.reload(true);
            });
        });
    }); 
```

var id 获取输入框的值。

在输入框中，我使用了一个产品 ID，因此使用 jquery.post() 获取值并将其传递到添加产品页面没有问题。但是，如果我在文本框中输入多个用逗号分隔的产品 ID，我将如何获取每个产品 ID 并将其发送到添加产品页面以进行更新？除了使用 jquery.post() 方法之外，还有什么更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:03:54.027

您可以通过分隔符拆分您的 Id，并遍历生成的数组，将商品添加到购物卡中。就像是：

```
$(document).ready(function(){
        $("#submit").click(function(){
            var ids = $("#nam").val().split(' '); // SPACE seperated Ids
            for(i = 0; i < ids.length; i++){
              var id = ids[i];
              $.post("....../checkout/cart/add", { product:id },
              function(data) {
                //alert("The Product is added to your shopping cart.");
                //window.location.reload(true);
              });
            }
        });
    }); 
```

在这样做之前，您必须清理您的文本框值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:36:17.960

```
 $(document).ready(function () {
                $("#submit").click(function () {
                    var productIds = [];

                    $.each($("#nam").val().split(','), function (i, value) {
                        if (value.length > 0) {
                            productIds.push(value);
                        }
                    });

                    $.post("....../checkout/cart/add", { productIds: productIds },
                                                          function (data) {
                                                              alert('The' + (productIds.length == 1 ? 'Product' : 'Products') + ' is added to your shopping cart.');
                                                              window.location.reload(true);
                                                          });
                });
            });

            public ActionResult add(int[] productIds)
            {
                return Json(true, JsonRequestBehavior.AllowGet);
            } 
```

您需要返回产品 ID 数组来发布操作，然后才能实现。

# jquery - 在 jQuery 中附加回调

> ID：10701542
> 
> 赞同：0
> 
> 时间：2012-05-22T11:54:21.817
> 
> 标签：jquery, callback, append

我有一个解决方案：

```
var addContent = {
...
append: function (obj, data, callBack) {
        "use strict";
        obj.append(data);
        callBack();
    }
} 
```

“addContent.append()”函数将它的数据参数值添加到它的obj并调用它的callBack()，它也能正常工作！但是“obj 参数”还没有在 DOM 中，那么那些在“数据参数”中找到它的元素不可用。

例如：

```
var to = jQuery('<div>');
addContent.append(to, '<div id="element1"></div>', function () {
    alert(jQuery('#element1').length);
}); 
```

此代码显示“0”。

你有什么解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:00:50.040

如果我正确理解了您的问题，则问题是所引用的元素`to`不在 DOM 中，因此当您尝试选择已附加到它的元素时，找不到它们（因为它们的父级不在DOM）。

我认为您可能想要的是上下文参数：

```
alert(jQuery('#element1', to).length); 
```

这将选择`#element1`与`to`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:08:09.673

使用文档准备功能

```
jQuery(document).ready(function(){
    var addContent = {
    append: function (obj, data, callBack) {
            "use strict";
            obj.append(data);
            callBack();
        }
    }
    var to = jQuery('div');
    addContent.append(to, '<div id="element1">545</div>', function () {
        alert(jQuery('#element1').length);
    });
}); 
```

# php - 在预印纸上打印来自 Web 应用程序的数据

> ID：10701544
> 
> 赞同：6
> 
> 时间：2012-05-22T11:54:32.440
> 
> 标签：php, javascript, jquery, mysql

有人有从网页打印的经验吗？

我有一些预印本。在这些论文上，必须根据通过网络表单填写或从 MySQL 数据库调用的数据来检查一些复选框。

所有这些数据都可以从 PHP Web 应用程序中获得。现在我正在寻找在我的预印文件上打印这些数据的解决方案。

所以我必须在这些位于指定位置的文档上打印一些十字。

有没有人知道如何处理这个问题的想法和例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:13:17.100

如果你想打印一个网页的所有内容一样，你应该使用 php fpdf 库。我开发了一个网站，我需要打印一个表单的所有内容。而 fpdf 是一个有效的解决方案。[您可以在http://www.fpdf.org](http://www.fpdf.org)获得所有支持、下载和教程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:55:41.973

您可能应该生成用户可以下载和打印的 PDF。

浏览器在打印时呈现的 HTML 非常不同。您需要对页面上的位置进行精细控制，以使输出适合预印纸。

我的 php 经验为零，但谷歌搜索[php generate pdf](https://www.google.com/search?q=php+generate+pdf)看起来很有希望。另请参阅[此 SO 搜索](https://stackoverflow.com/search?q=php+pdf)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T12:02:29.800

我已经使用 PHP、FOP (http://xmlgraphics.apache.org/fop/) 和 CUPS (http://www.cups) 创建了类似的系统（点击网页后自动打印到打印机）。组织/）。

我也建议使用 PDF 进行格式化，因为对齐似乎对您的需求至关重要。

如果我现在做这样的系统，我可能会使用 fPDF (http://www.fpdf.org/)，然后使用系统调用或某种作业队列（Gearman 等）将文件打印到网络打印机。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-22T12:01:49.800

使用pdf选项打印很好:)

# ado.net - 在 ADO.NET 中检索生成的 id 的独立于数据库的方法

> ID：10701546
> 
> 赞同：2
> 
> 时间：2012-05-22T11:54:48.963
> 
> 标签：ado.net

ADO.NET 中是否有办法在执行 INSERT 语句后检索自动生成的 ID？我知道`SELECT @@IDENTITY`Sql Server 和`SELECT last_insert_id()`MySQL，但我需要的是一种独立于数据库的方式来检索 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T10:37:56.050

我认为没有办法存在，因为获取最后插入的 id 的命令是特定于供应商的。您可以做的是合并查询以在您的主查询中获取最后插入的 id（我理解这不是您想要的），然后编写一个 C# 函数来读取它，而不考虑您的数据库（不依赖于特定的 ADO.NET 类型但是在接口上指定的方法上`IDbDataReader`或`IDbCommand`）

否则你将不得不依赖一些像实体框架这样的 ORM 解决方案，它会为你处理所有这些，让你免于手动获取最后插入的 id 的麻烦，尽管实现将是非常特定于 db 的。你可以在这里看到一个很好的讨论：

[使用 ADO.NET Entity 获取标识行值](https://stackoverflow.com/questions/5831894/getting-identity-row-value-using-ado-net-entity)

您可以看到[这个链接](http://msdn.microsoft.com/en-us/library/ks9f57t0.aspx)，这将使您对直接访问依赖数据适配器的记录有一些了解（但我不喜欢它）。

# android - Android 知道文件是文件（.jpg 等）还是文件夹并压缩文件（.png 等）和文件夹

> ID：10701548
> 
> 赞同：0
> 
> 时间：2012-05-22T11:54:51.053
> 
> 标签：android, file, compression, zip, directory

我目前正在创建一个使用 java.util.zip 包压缩文件的程序。它运作良好，但我注意到压缩文件夹/目录与压缩文件不同（如果我错了，请纠正我）。在我的程序中，我必须知道所选文件是文件夹还是文件（例如 .jpg、.png、.apk 等）。我已经尝试了一些实验让我知道，这是我的文件选择器活动中的示例代码：（currentDir is a File）

```
 if(currentDir.isDirectory())Toast.makeText(this,"Directory",Toast.LENGTH_LONG).show();
    if(currentDir.isFile())Toast.makeText(this, "File", Toast.LENGTH_LONG).show(); 
```

插入后，我在活动中选择的每个文件都会输出一个“目录”而不是“文件”，即使我选择了一个图像。有人可以帮助我如何知道android中的文件是否是文件夹吗？谢谢！（第一个问题）

正如我之前所说，我注意到压缩文件夹与压缩文件不同（如果我错了，请纠正/教我）。在压缩文件夹时我已经完成了，但是在压缩文件（例如图像等）时，它仍然会压缩目录，但我相信必须只压缩我选择的文件。这是我的示例代码。（第二个问题）

```
public void onClick(View v) {
    try{
        ZipOutputStream zos = new ZipOutputStream( new FileOutputStream(new File(currentDir.getPath()+".zip")) );
        zip( currentDir, currentDir, zos );
        zos.close();    
        Toast.makeText(this, "File successfully compressed!", Toast.LENGTH_LONG).show();
    }catch (IOException e) {
        Toast.makeText(this, e.getMessage(), Toast.LENGTH_LONG).show();}
}

private static final void zip(File directory, File base,ZipOutputStream zos) throws IOException {
    File[] files = directory.listFiles();
    byte[] buffer = new byte[8192];
    int read = 0;
    for (int i = 0, n = files.length; i < n; i++) {
      if (files[i].isDirectory()) {
        zip(files[i], base, zos);
      } else {
        FileInputStream in = new FileInputStream(files[i]);
        ZipEntry entry = new ZipEntry(files[i].getPath().substring(base.getPath().length() + 1));
        zos.putNextEntry(entry);
        while (-1 != (read = in.read(buffer))) {
          zos.write(buffer, 0, read);
        }
        in.close();
      }
    }
  } 
```

需要任何意见、帮助、建议、反应，我们将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:04:57.903

```
public void createZipFile(String path) {
        File dir = new File(path);
        String[] list = dir.list();
        String name = path.substring(path.lastIndexOf("/"), path.length());
        String _path;

        if(!dir.canRead() || !dir.canWrite())
            return;

        int len = list.length;

        if(path.charAt(path.length() -1) != '/')
            _path = path + "/";
        else
            _path = path;

        try {
            ZipOutputStream zip_out = new ZipOutputStream(
                                      new BufferedOutputStream(
                                      new FileOutputStream(_path + name + ".zip"), BUFFER));

            for (int i = 0; i < len; i++)
                zip_folder(new File(_path + list[i]), zip_out);

            zip_out.close();

        } catch (FileNotFoundException e) {
            Log.e("File not found", e.getMessage());

        } catch (IOException e) {
            Log.e("IOException", e.getMessage());
        }
    } 
```

尝试使用此代码。

# ruby-on-rails - Rails 3.1 - 奇怪的 Heroku 错误

> ID：10701552
> 
> 赞同：0
> 
> 时间：2012-05-22T11:54:55.940
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我在 Heroku 上得到以下内容，但不是在本地，看起来很奇怪，有什么想法吗？

```
2012-05-22T11:49:53+00:00 app[web.1]: ActionView::Template::Error (undefined method `<=>' for nil:NilClass):
2012-05-22T11:49:53+00:00 app[web.1]:     1: <h3>Product Tracklisting</h3>
2012-05-22T11:49:53+00:00 app[web.1]:     2: 
2012-05-22T11:49:53+00:00 app[web.1]:     3:    <ol id="track-list" data-update-url=<%= sort_producttracklistings_url %>>
2012-05-22T11:49:53+00:00 app[web.1]:     4:    <% @product.producttracklistings.sort_by { |producttracklisting| producttracklisting.position }.each  do |products_track| %>
2012-05-22T11:49:53+00:00 app[web.1]:     5:    
2012-05-22T11:49:53+00:00 app[web.1]:     6:    <%= content_tag_for :li, products_track do %>
2012-05-22T11:49:53+00:00 app[web.1]:     7: 
2012-05-22T11:49:53+00:00 app[web.1]:   app/views/products/_tracklisting.html.erb:4:in `_app_views_products__tracklisting_html_erb___857430611_70068520180420'
2012-05-22T11:49:53+00:00 app[web.1]:   app/views/products/show.html.erb:32:in `_app_views_products_show_html_erb___556626077_70068514945180'
2012-05-22T11:49:53+00:00 app[web.1]:   app/controllers/products_controller.rb:91:in `show' 
```

我认为这可能是因为`data-update-url=<%= sort_producttracklistings_url %>`以前是`data-update-url="<%= sort_producttracklistings_url %>"`，但这根本没有区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:57:17.823

它来自`@product.producttracklistings.sort_by { |producttracklisting| producttracklisting.position }.each`（第 4 行）。

每个`producttracklisting`都有`position`吗？

The`<=>`是用于排序的通用比较运算符，用于返回`-1`或者`0`取决于`+1`它的接收者是小于、等于还是大于它的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:26:07.440

它在行中

```
<% @product.producttracklistings.sort_by { |producttracklisting| producttracklisting.position }.each  do |products_track| %> 
```

并且由于一些`producttracklisting`具有`position`as `nil`。

# java - 如何使用java修改文件的某些内容并保存在同一个文件中

> ID：10701555
> 
> 赞同：-1
> 
> 时间：2012-05-22T11:55:01.440
> 
> 标签：java

我有一个单词及其频率计数的文本文件。当我给出任何与文本文件中的单词匹配的单词时，我需要增加它的频率计数。如何更改文本文件中的值？如何在 Java 中执行此过程。请提出任何想法。提前致谢。

```
myfile.txt

word    4
self    5
defence 3
argue   7 
```

当我给出“self”这个词时，在“myfile.txt”的同一个文本文件中，它需要覆盖为

```
word    4
self    6
defence 3
argue   7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:57:02.783

您不能在文本文件中插入字符，只能*替换*或*附加*数据。

换句话说，如果您从`9`到`10`，您必须将所有字符`9`向右移动一步，以便为 . 腾出空间`10`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:00:40.147

虽然不直接回答您`java.lang.Properties`的问题，但请考虑使用来管理文件：

*   每个*单词*都是唯一的值，可以用作属性名称（键）
*   频率计数是与每个*单词关联的值*
*   `Properties`has`load()`和`store()`方法用于读取和写入文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T12:28:52.447

用一个

```
Map<String,Integer> words = new HashMap<String,Integer>(); 
```

存储所有单词计数。然后，您可以轻松地将所有密钥以您喜欢的格式保存到文件中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T12:09:02.683

您可以通过填写一些空白来读取/写入文件，如果您将使用足够的空间来写入增加的值，例如：

```
word    4___
self    11__
defence 3___
argue   7___ 
```

但是你需要一个上限才能提前知道。

您可以使用二进制表示并将 32 位整数存储在 4 个字节中，但是您将失去文件的人类可读性。

您的问题的典型解决方案是为此类工作而设计的数据库 - 它可能看起来过大，但今天，有许多小型内存数据库可用。我最后一次使用它是几年前的 hsqldb。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T11:58:44.097

恕我直言，最好的方法是使用第三方 API 来处理所有的读写。我最喜欢的是[http://commons.apache.org/io/](http://commons.apache.org/io/) 查看 FileUtils 类。我认为它包含您需要的所有方法。

# javascript - 客户端的 Javascript 调试 - IE

> ID：10701556
> 
> 赞同：3
> 
> 时间：2012-05-22T11:55:03.507
> 
> 标签：javascript, asp.net, debugging

是否可以在 Internet Explorer 的开发人员工具中跳过 Javascript 语句（我的意思是不执行）？

Visual Studio 调试器中的“设置下一条语句”之类的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:08:58.197

因此没有设置下一个语句，但你可以在你想去的地方设置一个断点，然后按 F5

有关详细信息 [http://msdn.microsoft.com/en-us/library/dd565625(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/dd565625(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:06:37.650

开始调试 ( **F5** ) 后，您可以使用**F10**跳过一行。

您可以通过单击相关行的边距来设置要停止的断点。

# grid - 如何在 extjs4 的网格中创建动态列？

> ID：10701561
> 
> 赞同：0
> 
> 时间：2012-05-22T11:55:27.437
> 
> 标签：grid, extjs4

在表单面板中，我有我想要的表单和网格，当我单击表单中的搜索按钮时，它应该只显示网格中的特定列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:12:19.780

首先，您必须使用 a 获取对列的引用`columnheader`，然后您可以调用`setVisible`以显示或隐藏它，例如：

```
// hide all columns except the one with a dataIndex of 'foo_data'

grid.getView().getHeaderCt().items.each(function(column) {
    var isFooColumn = column.dataIndex == 'foo_data';
    column.setVisible(isFooColumn);
}); 
```

# html - 如何使表格的所有行与最大的行高度相同

> ID：10701562
> 
> 赞同：2
> 
> 时间：2012-05-22T11:55:28.370
> 
> 标签：html, css, css-tables

我正在尝试使表格的所有行与其中包含最长文本的行具有相同的高度，并相应地扩展。

但我所做的只是在阅读后给它们一个固定的高度： [如何强制表格中的所有行具有相同的高度](https://stackoverflow.com/questions/5671098/how-can-i-force-all-rows-in-a-table-to-have-the-same-height)

这意味着我需要预测我应该在其中放入多少文本，这显然是不可预测的。是否可以使用 CSS 或者我需要使用 Javascript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:00:44.690

纯 CSS 是不可能的。

可以用javascript来做到这一点。例如，使用 jQuery，您可以编写类似

```
var maxHeight = null;
$(<MY LINES>).each(function() {
    var thisHeight = $(this).height();
    if(maxHeight == null || thisHeight > maxHeight) maxHeight = thisHeight;
}).height(maxHeight); 
```

不要忘记处理边界情况并在线条中包含最大和最小高度。

# java - 如何在没有迭代的情况下使用 jstl 从 hashmap 获取 jsp 中的值？

> ID：10701564
> 
> 赞同：0
> 
> 时间：2012-05-22T11:55:30.807
> 
> 标签：java, model-view-controller, jsp, spring-mvc, jstl

我是一个新手我有一个哈希映射声明为

```
 HashMap map = new HashMap();

    map.put("code", code);
    map.put("url", evaluationTSRCode); 
```

我正在像这样在我的模型和视图控制器中传递这张地图

```
return new ModelAndView("purchaseProduct","map","map"); 
```

如何在不使用迭代的情况下使用 jstl 在 jsp 中访问值代码、评估 TSRCode 我尝试这样但我无法获取值。

```
<c:choose>
<c:when test="(${map.code} != null && ${map.code}=!"" )" >
<td>You can purchase<a href='<c:url value="${map.url}"/>'>Directly</a></td>
</c:when>
<c:otherwise>
td>You can purchase Directly</td>
</c:otherwise>
</c:choose> 
```

请帮我解决这个问题

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:42:55.943

您在 JSP 中访问映射值的方式是完全错误的。

在您的代码中，我有一个假设

```
return new ModelAndView("purchaseProduct","map","map"); 
```

是错的，应该是

```
return new ModelAndView("purchaseProduct","map",map); 
```

您不需要遍历地图值。

例如。访问代码的值。`${map.code}`在任何地方的jsp就足够了。

或者你可以使用像

```
return new ModelAndView("purchaseProduct", map); 
```

当您在 JSP 中执行此操作时，您只需要通过其名称访问映射值。

例如。访问代码的值。`${code}`在任何地方的jsp就足够了。

希望这对您有所帮助。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-01T07:34:07.343

我认为一个更正确的答案仍然是按照建议使用地图，但是将其添加到 ModelMap，在控制器方法的输入中声明并仅返回带有视图名称的字符串（我总是使用这种方式来引用 spring 控制器中的视图):

```
public String themethod(ModelMap model) {
  ...
  model.addAttribute("map",map);
  return "purchaseProduct"; 
```

这样你就可以在你的jsp中使用${map.code}。

更有趣的是，如果需要，您可以将复杂的数据结构打包在地图中，然后在列表中

```
 List<Map<String, Object>> lcli = new ArrayList<Map<String, Object>>();
  for(Cliente c:cli) {
        Map <String,Object>map  = new HashMap<String, Object>();
        int nord    = userDao.nord(c);
        map.put("cli", c);
        map.put("nord", nord);

        lcli.add(map);
    }
    mo.addAttribute("lcli", lcli); 
```

通过这种方式，在 jsp 中，您可以迭代列表中标记为 lcli 的每个元素，它是一个映射，从该映射中提取其键/值，如下所示

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
...
<c:forEach var="itemcli" items="${lcli}">
        <a href="<c:url value='edit-client.html?id=${ itemcli.cli.id }'/>" >   ${itemcli.cli.nome}  </a>            
        ${itemcli.cli.citta}
</c:forEach> 
```

# c - 使用 openssl 和 C 从 *.pfx 文件中获取密钥和证书

> ID：10701566
> 
> 赞同：3
> 
> 时间：2012-05-22T11:55:39.227
> 
> 标签：c, openssl, certificate, key

我有这个代码：

```
int importKey(){

FILE *fp=NULL;
RSA *pkey=NULL;
R_RSA_PRIVATE_KEY prk; //special structure

fp = fopen("sslcert/key.pem", "r");

fseek(fp, 0, SEEK_SET);
PEM_read_RSAPrivateKey(fp, &pkey, NULL, NULL);

if (!pkey)
{
    fseek(fp, 0, SEEK_SET);
    d2i_RSAPrivateKey_fp(fp, &pkey);
}

prk.bits=BN_num_bits(pkey->n);
return pkey; //check if pkey==0 or something else
} 
```

当我将`.pem`文件提供给我从命令行使用`openssl -pkcs12 -in file.pfx -out key.pem`. 但我需要的是使用该 pfx 文件`fp = fopen()`并以某种方式在代码中“提取”私钥并将其保存到该 RSA *pkey 中，并从同一个 pfx 文件中提取证书并将其保存到 X509 *px509 变量中。有什么帮助吗？

这意味着我实际上需要一些 openssl 函数来执行一些例程作为该命令行命令

# c# - 如何将 oauth 与 Google.GData.Analytics 一起使用

> ID：10701575
> 
> 赞同：0
> 
> 时间：2012-05-22T11:56:12.550
> 
> 标签：c#, oauth, client, gdata

我想使用 oauth 创建一个 AnalyticsRequest 对象。一切正常，接受回调页面。使用 youtube 的客户端库，我的代码如下所示；

```
 settings = new YouTubeRequestSettings(appName, clientID, developerKey(string)Session["token"]);
            YouTubeRequest request = new YouTubeRequest(settings); 
```

并用于分析

```
gt.request = new AnalyticsRequest(new RequestSettings()); 
```

但我似乎无法找到 RequestSettings 构造函数的正确重载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:09:35.107

查看[google-gdata .Net library](http://code.google.com/p/google-gdata/ "GData .NET 客户端库提供了一个库和源代码，可以通过 Google 数据 API 轻松访问数据。")的 svn ，有一个[完整的 AnalyticsRequest 示例](http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/?r=936#cs%2Fsamples%2Fanalytics)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:13:07.897

该库包含一个 OAuth 2.0 示例，该示例同时使用服务类 (GroupsService) 和请求类 (ContactsRequest)，并且应该很容易适应使用 Analytics API：

[http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/oauth2_sample/oauth2demo.cs](http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/oauth2_sample/oauth2demo.cs)

我不是 Analytics API 方面的专家，但我知道它支持 OAuth 2.0，因为它也在 OAuth 2.0 Playground 中列出：

[https://code.google.com/oauthplayground/](https://code.google.com/oauthplayground/)

# listview - 在黑莓列表字段中动态添加项目

> ID：10701577
> 
> 赞同：0
> 
> 时间：2012-05-22T11:56:17.993
> 
> 标签：listview, blackberry

我对黑莓很陌生，我想将项目动态添加到列表视图中，我在列表字段中静态添加项目，但我想在我的代码中动态添加一些项目

ListCallBack.java

```
import java.util.Vector;

import net.rim.device.api.system.Display;
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.component.ListField;
import net.rim.device.api.ui.component.ListFieldCallback;

public class ListCallBack implements ListFieldCallback{

private Vector listElements = new Vector();
public void drawListRow(ListField listField, Graphics graphics, int index,
        int y, int width) {
    // TODO Auto-generated method stub
    String text = (String)listElements.elementAt(index);
    graphics.drawText(text, 0, y, 0, width);
 // Draw a line separator above each field except the first one
    if (index != 0) {
        graphics.setColor(Color.BLACK);
        graphics.drawLine(0, y, width, y);
    }

}

public Object get(ListField listField, int index) {
    // TODO Auto-generated method stub
    return listElements.elementAt(index);
}

public int getPreferredWidth(ListField listField) {
    // TODO Auto-generated method stub
    return Display.getWidth();
}

public int indexOfList(ListField listField, String prefix, int start) {
    // TODO Auto-generated method stub
    return listElements.indexOf(listField);
}

public void insert(String toInsert, int index) {
    listElements.insertElementAt(toInsert, index);
}

public void erase() {
    listElements.removeAllElements();
} 
```

}

和 ListView.java

```
listItem = new ListField();
listCallBack =new ListCallBack();
listItem.setCallback(listCallBack);

listItem.insert(0);
listCallBack.insert("Can't Text Now Driving", 0);       
listItem.insert(1);
listCallBack.insert("Going to school", 1);    
listItem.insert(2);
listCallBack.insert("Picking Up the Kids", 2);
add(listItem); 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:53:51.647

您可以在 ListField 对象上调用 invalidate() 或 invalidate(int index) 来验证更改。只需尝试以下

```
// after calling insert(int index) call 
listItem.invalidate(index);

// and after calling erase call 
listItem.invalidate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T21:00:17.143

if you want to show new items to the List field then add the item to the vector(in your case add to listElements) then call setsize() method on listfield object with the size of the increased vector.

```
listItem.setSize(listElements.size()); 
```

you dont directly add items to the listfield. you add it to your collection or array. when ever drawlist will be called for a row it read the data from the collection and render itself.

so simple do the following steps,

```
listElements.add(Object);

listItem.setSize(listElements.size()); 
```

you can then call invalidate over itemlist.

I hope i could give you have an idea so that you can find a way...

let me know if you have any doubt.

# jquery - JSON.stringify 数组导致双括号

> ID：10701579
> 
> 赞同：1
> 
> 时间：2012-05-22T11:56:20.427
> 
> 标签：jquery, ajax, json

```
var DTO = [];

$.each(data.Foobars, function(i, val){
    DTO.push(val);
});

//example of a stringified object in the array:
// var val = {"a":"1","b":"2","c":"3"};

var jsonString = JSON.stringify(DTO); 
```

如果数组中有一个对象，“jsonString”将如下所示：

```
[{"a":"1","b":"2","c":"3"}] 
```

不止一个：

```
[[{"a":"1","b":"2","c":"3"}, {"a":"1","b":"2","c":"3"}]] 
```

导致出现双括号，这导致我在服务器端出现一些问题。

我怎样才能摆脱双括号？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:14:19.840

您确定`val`对象本身不是数组吗？

在我的小测试中：[http://jsfiddle.net/NatJS/](http://jsfiddle.net/NatJS/)， JSON.stringify 工作得很好。

**更新：**如果`val`是数组，需要适当对待，如：http: [//jsfiddle.net/NatJS/1/](http://jsfiddle.net/NatJS/1/)

```
var a = [{ a: 1, b: 2, c: 3},{ d: 10, e: 11, f: 12}];
//var a = { a: 1, b: 2, c: 3}
var j = [];

if (a.length) { // cheap way to check if a an an array; implement something like mooTools.typeOf if you want something more robust
    while (a.length > 0) {
        j.push(a.pop());               
    }
}
else {
    j.push(a);
}

console.log(JSON.stringify(j));​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:11:46.033

这个评论区太小了。

看一下您的问题的以下简化：

```
var DTO = [];

DTO.push({"a":"1","b":"2","c":"3"});
DTO.push({"a":"1","b":"2","c":"3"});

console.log(JSON.stringify(DTO)); 
```

它将显示：

```
[{"a":"1","b":"2","c":"3"},{"a":"1","b":"2","c":"3"}] 
```

结论：无论您认为`val`应该包含什么，它都不是；-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T07:50:07.230

检查是否在您的对象上定义了 toJSON。如果它被定义，它可以修改 stringify 的行为。

# android - Android中的自定义标题和setTitle

> ID：10701583
> 
> 赞同：0
> 
> 时间：2012-05-22T11:56:46.403
> 
> 标签：android, title

我创建了一个显示完美的简单自定义标题。但是，我不确定要为我的 TextView 提供什么 id 才能使 setTitle 方法发挥其魔力。

我的第一选择是@android:id/title，但这不起作用。

示例 我在 xml 中定义了一个自定义标题布局并将其添加到我的活动中。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/custom_title"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/transparent" >

    <ImageView
        android:id="@+id/logo"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="5dp"
        android:scaleType="centerInside"
        android:onClick="home"
        android:src="@drawable/logo" />

    <TextView
        android:id="@android:id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:textSize="18dp"
        android:textStyle="bold"
        android:layout_centerVertical="true"
        android:text="TextView" />
</RelativeLayout> 
```

TextView 现在是“标题”容器。我想要的是清单中的 android:label 值自动放入这个新标题 TextView 中。

IE。默认方法 setTitle 必须将此值添加到某些已定义的视图 ID - 我只需要该 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:58:18.950

setTitle 设置活动的标题，它与TextView 无关，您需要使用setText() 来设置TextView 的文本：

((TextView)findViewById(R.id.text_view_id)).setText("TextView text");

编辑：检查此解决方案->[如何在 android 中动态设置自定义标题栏 TextView 值？](https://stackoverflow.com/questions/2416844/how-to-set-custom-title-bar-textview-value-dynamically-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:03:21.837

我必须创建一个带有自定义标题的类似功能。我非常怀疑您是否能够通过匹配 id 来做到这一点，如果 Android 允许这样做，那将是一个巨大的安全漏洞。我所做的是扩展 Activity，然后以类似...的方式覆盖 setTitle 方法

```
TextView mCustomTitle;

@Override
public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.myLayout);
     mCustomTitle = (TextView)findViewById(R.id.title);
}

@Override
public void setTitle(CharSequence title) {
    //you can override the other setTitle as well if you need it
    mCustomTitle.setText(title);        
} 
```

# wpf - WPF 中的动态主题

> ID：10701585
> 
> 赞同：0
> 
> 时间：2012-05-22T11:56:54.390
> 
> 标签：wpf, dynamic, themes, wpftoolkit

我将使用 WPF 在 .net 中开发一个 Windows 应用程序。那么，我们如何在运行时实现动态主题。我已经对此进行了很多搜索，但我无法理解这件事。如果我在 app.xaml 中添加以下行，则会显示错误，因为我们如何可以直接添加事物行。虽然不存在名为“ExpressionDark”的文件。

```
<ResourceDictionary Source="Themes/ExpressionDark.xaml"/>
***or*** 
<ResourceDictionary Source="ExpressionDark.xaml"/> 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:07:01.630

您可以像这样在 App.Xaml 中合并主题：

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="defaulttheme.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

defaulttheme.xaml 文件必须位于项目的根目录中。如果您想为主题构建自己的项目，您可以像这样合并资源：

```
 <ResourceDictionary Source="/MyThemeProject;component/defaulttheme.xaml" /> 
```

这里的 defaulthteme.xaml 也必须位于根目录的 MyThemeProject 中，并且不要忘记从主项目添加对该项目的添加引用。

要构建结构，您可以根据需要添加文件夹。

```
<ResourceDictionary Source="/MyThemeProject;component/Folder1/Folder2/defaulttheme.xaml" /> 
```

要切换主题，请先清除 MergedDictionaries，然后添加新主题

```
NewTheme = new Uri(@"/MyThemeProject;component/folder1/Folder2/bluetheme.xaml", UriKind.Relative);

Application.Current.Resources.MergedDictionaries.Clear();
Application.Current.Resources.MergedDictionaries.Add(NewTheme); 
```

问候

吹嘘

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:58:52.780

假设`DynamicThemes`，您的意思是将主题放在运行时，这是加载资源字典的最佳方式，将控件样式充满到主应用程序或任何控件的资源中。

```
 public static ResourceDictionary GetThemeResourceDictionary(Uri theme)
    {
        if (theme != null)
        {
            return Application.LoadComponent(theme) as ResourceDictionary;
        }
        return null;
    }

    public static void ApplyTheme(this ContentControl control /* Change this to Application to use this function at app level */, string theme)
    {
        ResourceDictionary dictionary = GetThemeResourceDictionary(theme);

        if (dictionary != null)
        {
            // Be careful here, you'll need to implement some logic to prevent errors.
            control.Resources.MergedDictionaries.Clear();
            control.Resources.MergedDictionaries.Add(dictionary);
            // For app level
            // app.Resources.MergedDictionaries.Clear();
            // app.Resources.MergedDictionaries.Add(dictionary);

        }
    } 
```

# iphone - 使用 ObjectiveC 的 AES 解密

> ID：10701590
> 
> 赞同：1
> 
> 时间：2012-05-22T11:57:10.680
> 
> 标签：iphone, objective-c, ios, encryption

我使用以下代码来解密加密的文件，该文件是使用 JAVA 应用程序加密的。

密码.h 文件

```
#import <Foundation/Foundation.h>
#import <CommonCrypto/CommonCryptor.h>
#import <CommonCrypto/CommonDigest.h>

@interface Cipher : NSObject {
    NSString *cipherKey;
}

@property (retain) NSString *cipherKey;

- (Cipher *) initWithKey:(NSString *) key;

- (NSData *) encrypt:(NSData *) plainText;
- (NSData *) decrypt:(NSData *) cipherText;

- (NSData *) transform:(CCOperation) encryptOrDecrypt data:(NSData *) inputData;  

+ (NSData *) md5:(NSString *) stringToHash; 

@end 
```

密码.m 文件

```
#import "Cipher.h"

@implementation Cipher 

@synthesize cipherKey;

- (Cipher *) initWithKey:(NSString *) key {  
    self = [super init];  
    if (self) {  
        [self setCipherKey:key];  
    }  
    return self;  
} 

- (NSData *) encrypt:(NSData *) plainText {  
    return [self transform:kCCEncrypt data:plainText];  
}  

- (NSData *) decrypt:(NSData *) cipherText {  
    NSData *returnData = [[NSData alloc] init];
    returnData = [self transform:kCCDecrypt data:cipherText];

    return returnData;  
}  

- (NSData *) transform:(CCOperation) encryptOrDecrypt data:(NSData *) inputData {  

    // kCCKeySizeAES128 = 16 bytes  
    // CC_MD5_DIGEST_LENGTH = 16 bytes  
    NSData* secretKey = [Cipher md5:cipherKey];  

    CCCryptorRef cryptor = NULL;  
    CCCryptorStatus status = kCCSuccess;  

    uint8_t iv[kCCBlockSizeAES128];  
    memset((void *) iv, 0x0, (size_t) sizeof(iv));  

    status = CCCryptorCreate(encryptOrDecrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,  
                             [secretKey bytes], kCCKeySizeAES128, iv, &cryptor);  

    if (status != kCCSuccess) {  
        return nil;  
    }  

    size_t bufsize = CCCryptorGetOutputLength(cryptor, (size_t)[inputData length], true);  

    void * buf = malloc(bufsize * sizeof(uint8_t));  
    memset(buf, 0x0, bufsize);  

    size_t bufused = 0;  
    size_t bytesTotal = 0;  

    status = CCCryptorUpdate(cryptor, [inputData bytes], (size_t)[inputData length],  
                             buf, bufsize, &bufused);  

    if (status != kCCSuccess) {  
        free(buf);  
        CCCryptorRelease(cryptor);  
        return nil;  
    }  

    bytesTotal += bufused;  

    status = CCCryptorFinal(cryptor, buf + bufused, bufsize - bufused, &bufused);  

    NSLog(@"Status-3: %d", status);
    if (status != kCCSuccess) {
        free(buf);  
        CCCryptorRelease(cryptor);  
        return nil;  
    }  
    bytesTotal += bufused;  

    CCCryptorRelease(cryptor);  

    return [NSData dataWithBytesNoCopy:buf length:bytesTotal];  
}  

+ (NSData *) md5:(NSString *) stringToHash {  

    const char *src = [stringToHash UTF8String];  

    unsigned char result[CC_MD5_DIGEST_LENGTH];  

    CC_MD5(src, strlen(src), result);  

    return [NSData dataWithBytes:result length:CC_MD5_DIGEST_LENGTH];  
} 

@end 
```

这就是我解码加密数据的方式：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory1 = [paths objectAtIndex:0];
    NSString *getImagePath = [documentsDirectory1 stringByAppendingPathComponent:@"Blue.jpg"];
    NSData *objNSData1 = [NSData dataWithContentsOfFile:getImagePath];

    Cipher *objCipher= [[Cipher alloc] initWithKey:@"1234567891234567"];

    NSData *decryptedData = [[NSData alloc] init];

    decryptedData = [objCipher decrypt:objNSData1];

    NSLog(@"%@", decryptedData);

    myImage.image = [UIImage imageWithData:decryptedData];

} 
```

解密未成功并返回`4304`错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:41:27.453

我知道这是由 Java 代码生成的。如果您对该代码有任何控制权，那么您应该了解它使用的协议是高度不安全的。它不能正确生成密钥（MD5 不是好的 PBKDF），也不能正确生成 IV。再加上缺少 HMAC，它会受到多种攻击。有关如何正确设置这些的完整详细信息，请参阅[使用 CommonCrypto 正确加密，RNCryptor](http://robnapier.net/blog/aes-commoncrypto-564)[在此处输入链接描述](https://github.com/rnapier/RNCryptor)以获取示例实现。

对于您的具体问题，您是否无法解密此加密的内容，或者您​​是否无法解密 Java 加密的内容？您可能与 Java 不匹配。

您应该检查错误是否出现在更新或最终步骤中。如果是更新步骤，那么您的配置不正确。如果是最后一步，您应该首先确保您的填充是正确的。文档的结尾应该是 PKCS#7 填充。这意味着它应该以以下序列之一结束（除非解密后的大小可以被 16 整除）：

```
01
02 02
03 03 03
04 04 04 04
... 
```

整个加密数据的最终大小应该能被 16 整除。

# asp.net - 使用asp.net读取excel时出错

> ID：10701591
> 
> 赞同：1
> 
> 时间：2012-05-22T11:57:15.907
> 
> 标签：asp.net, asp.net-mvc, excel, oledb

在我的要求中，我成功地从 Asp.net OLEDB 打开和读取 Excel（2003 和 07）数据。

**但它只有当 Excel 表在我们的 PC 中保持打开时才有效**，否则它会给出“外部表格格式错误”。到底是什么问题？。谁能告诉我。**这是访问权限有什么问题吗？**

确定它与连接字符串无关。我的代码

```
protected void Page_Load(object sender, EventArgs e)
        {
            string path = @"C:\Users\abcd\Desktop\raj.xls";
            connStr = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + absoluteDir + ";Extended Properties=\"Excel 8.0;HDR=YES;\"";

            OleDbConnection oledbConn = new OleDbConnection(connStr);
            try
            {

                oledbConn.Open();
                OleDbCommand cmd = new OleDbCommand("SELECT * FROM [Sheet1$]", oledbConn);
                OleDbDataAdapter oleda = new OleDbDataAdapter();
                oleda.SelectCommand = cmd;
                DataSet ds = new DataSet();
                oleda.Fill(ds);
                GridView1.DataSource = ds.Tables[0].DefaultView;
                GridView1.DataBind();
            }
            catch (Exception err)
            {

            }
            finally
            {
                // Close connection
                oledbConn.Close();
            } 
        } 
```

*提前致谢*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:15:51.740

问题在于访问问题。这意味着工作表受密码保护。

# iphone - 目标 c - 引用计数

> ID：10701597
> 
> 赞同：6
> 
> 时间：2012-05-22T11:57:30.957
> 
> 标签：iphone, objective-c, ios, reference-counting, retaincount

直到五分钟，我才确信我对 Objective c 引用计数的理解非常好，但是当我开始检查对象的 retainCount 时，我很惊讶地看到我所看到的。

例如 myViewController 有一个 UITableview：

.h 文件

```
@interface RegularChatViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>
{
     UITableView *_tableView;
}
@property (nonatomic, retain) IBOutlet UITableView *tableView; 
```

.m 文件

```
@synthesize tableView = _tableView;

- (void)loadView
{
    _tableView = [[UITableView alloc] init];  // STEP ONE
    NSLog(@"tableView retain count: %d",[_tableView retainCount]);

    self.tableView.frame = CGRectMake(0, 0, 320, tableHeight); // STEP TWO
    NSLog(@"tableView retain count: %d",[_tableView retainCount]);  

    [self.view addSubview:self.tableView]; // STEP THREE
    NSLog(@"tableView retain count: %d",[_tableView retainCount]); 
} 
```

令我惊讶的是，输入是：

```
tableView retain count: 1
tableView retain count: 2
tableView retain count: 3 
```

显然 STEP ONE 将保留计数增加 1`alloc`

我也知道第三步将保留计数增加 1`addSubview`

但是第二步发生了什么？？？为什么它增加了保留数？？？
和ARC有关系吗？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T12:02:19.320

根据该方法的[NSObject 协议参考](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/retainCount)`retainCount`上的 Apple 文档：

***重要****此方法在调试内存管理问题时通常没有价值。因为任何数量的框架对象可能已经保留了一个对象以保存对它的引用，而同时自动释放池可能在一个对象上保存了任何数量的延迟释放，所以您不太可能从中获得有用的信息方法。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:06:46.427

一旦您与*任何框架方法或函数*进行交互，该`retainCount`方法就变得完全无用，因为您不知道这些东西在它们的黑匣子中做了什么（它们可以将您的对象添加到自动释放池或其他任何东西）并且您不应该关心它。

用于`retainCount`调试内存管理问题总是一个坏主意。有关避免它的更多理由，请参阅[此答案。](https://stackoverflow.com/a/4636477/573626)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T12:15:17.327

我在这里有一个方便的指南：[何时使用retainCount？](http://whentouseretaincount.com/)

简而言之，retainCount 很少会像您认为的那样。在不知道如何实现`UITableView`和`UIView`实现的情况下，您*无法*知道保留计数应该是多少。而且我们甚至没有考虑自动释放...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T12:50:44.583

在第二步中：- 通过使用 self. tableView，tableview 属性的getter（设置为retain）将被调用。因此，当您的财产被分配和保留时，保留计数分别增加。

每当你必须分配一个保留属性时，你应该覆盖它的 getter 方法，这称为惰性实例化。

更好地在它的吸气剂中分配你的表视图，例如

```
-(UITableView *) tableView
{
     if(!_tableView) {
          _tableView  =  [[UITableView alloc]init];
     }

    return _tableView;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T13:00:17.193

`self.tableView.frame`将`retain`和`autorelease`何时`tableView`从 getter 返回。

# c# - 打开 Chrome 选项卡并关闭它

> ID：10701599
> 
> 赞同：2
> 
> 时间：2012-05-22T11:57:36.060
> 
> 标签：c#, winforms

我想打开 Google Chrome 标签或默认浏览器。然后在用户选择关闭它之后关闭它。

我在用

```
Process.Start("HTTP://www.MySite.Com"); 
```

打开浏览器，但我没有关闭它的句柄。我也不想关闭整个浏览器，只想关闭我打开的选项卡。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T12:10:50.777

这在 Firefox 中对我有用：

```
var proc = Process.Start("firefox.exe", "http://www.google.nl");
proc.Kill(); 
```

因为我将 Firefox 设置为单窗口模式，所以它会打开一个选项卡。当我发出 Kill() 方法时，此选项卡被终止（但不是主窗口）。在这种情况下， Close() 方法对我不起作用。

您可以尝试使用 Chrome 进行相同的操作。您必须将 URL 作为参数提供给实际程序，而不是 URL 本身，否则 proc 为空。

这是使用默认浏览器的完整示例：

```
 string browser = string.Empty;
        RegistryKey key = null;
        try
        {
            key = Registry.ClassesRoot.OpenSubKey(@"HTTP\shell\open\command");

            //trim off quotes
            if (key != null)
            {
                browser = key.GetValue(null).ToString().ToLower().Trim(new[] { '"' });
            }
            if (!browser.EndsWith("exe"))
            {
                //get rid of everything after the ".exe"
                browser = browser.Substring(0, browser.LastIndexOf(".exe", StringComparison.InvariantCultureIgnoreCase) + 4);
            }
        }
        finally
        {
            if (key != null)
            {
                key.Close();
            }
        }
        Process proc = Process.Start(browser, "http://www.google.nl");
        if (proc != null)
        {
            proc.Kill();
        } 
```

# facebook - Facebook 页面访问令牌，无需创建应用程序

> ID：10701606
> 
> 赞同：1
> 
> 时间：2012-05-22T11:58:00.557
> 
> 标签：facebook, facebook-page, facebook-access-token

我对从 facebook 页面获取帖子的 facebook 部分有点困惑，例如 [http://www.facebook.com/pages/Favourite-Tv-Shows/448925518469095](http://www.facebook.com/pages/Favourite-Tv-Shows/448925518469095) 对于这个 url，我正在尝试从 Graph Api 生成访问令牌资源管理器，但它给了我一个小时内过期的令牌，因为我没有使用应用程序，所以有什么办法不为上面的页面生成访问令牌而不添加应用程序。

请帮助我摆脱困境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:04:19.387

`access_token`如果不使用应用程序，您将无法获得任何信息。`access_token`绑定到应用程序，没有一个就不能存在......

实际上`access_token`，您使用的是[Graph Api Explorer](https://developers.facebook.com/tools/explorer)，属于 Application #145634995501895 （又名[Graph Api Explorer](https://www.facebook.com/apps/application.php?id=145634995501895)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:54:06.203

我尝试创建应用程序，然后为它创建令牌，并将该令牌直接用于我的 Facebook 页面，它就像一个魅力，非常感谢您的帮助

# c# - MvcSiteMapProvider 和带有连字符的 url

> ID：10701609
> 
> 赞同：1
> 
> 时间：2012-05-22T11:58:14.203
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing, mvcsitemapprovider

我有一个 MVC 站点，它使用带连字符的 URL（用于 SEO 优化），例如：

```
www.domain.com/about-us/know-our-services 
```

现在我已经实现了`MvcSiteMapProvider`生成动态面包屑，但是对于带有连字符的 URL，它不起作用（在站点地图上找不到）。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T05:57:55.380

生成自定义 URL 的推荐方法是调整路由以构建 URL 方案。为了让 MvcSiteMapProvider 生成正确的 URL，您必须确保可以解析您的传出路由。

路线是 2 向映射。传入路由在`GetRouteData`RouteBase 类的方法中确定。传出路由由`GetVirtualPath`RouteBase 类的方法确定。传入路由是 MVC 用来确定与给定控制器和操作匹配的 URL。MVC 和 MvcSiteMapProvider 用于解析 URL的`GetVirtualPath`方法，因此必须实现它才能使 MvcSiteMapProvider 与自定义 URL 一起工作。

查看[ASP.NET MVC 中的自定义路由，](http://www.dotnetcurry.com/showarticle.aspx?ID=970)了解如何通过子类化 RouteBase 来实现这些方法。这些相同的想法在注册 Route 类时适用 - 您必须确保 2 路解析才能使其工作。

# c# - 有没有办法使用 C# 代码仅在面板内编写 ASP.NET 代码？

> ID：10701610
> 
> 赞同：1
> 
> 时间：2012-05-22T11:58:15.020
> 
> 标签：c#, asp.net, panel, dynamically-generated

我有一个带有面板的页面。我想知道的是，有什么方法可以直接在运行时（动态）的 asp:panel 标记中编写 ASP.NET 代码？任何方式使用AJAX或什么？实际上，我有一个面板，其中包含一些控件，并且要在父面板中动态写入多次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:03:01.773

您可以使用`<% %>`标签并将代码放入其中。

例如，您可以使用以下方法动态设置面板宽度：

```
<asp:Panel ID="Panel1" runat="server" 
       BorderColor="#990000" 
       BorderStyle="Solid" 
       BorderWidth="1px" 
       Height="116px" 
       ScrollBars="Both" 
       Width=<% YourWidthFunction() %>> 
```

编辑：我现在看到你想要实现的目标。根据您的评论，我不建议使用`Response.Write()`.

我会使用：

```
var newPanel = new Panel();
var myLabel = new Label();

newPanel.Controls.Add(myLabel); 
```

您可以通过调用向面板添加任意数量的控件：`newPanel.Controls.Add(control);`

# android - 在android中为sqlite创建一个用户定义的函数

> ID：10701615
> 
> 赞同：2
> 
> 时间：2012-05-22T11:58:28.887
> 
> 标签：android, sqlite, android-ndk

我想在sqlite for android中创建一个用户定义的函数，正如我之前读到的，如果你想使用`sqlite3_create_function`你必须这样做来创建函数`NDK`，但你需要在lib文件夹中包含[SQLite C库。](http://www.sqlite.org/download.html)但我有一个问题。例如，如果我在我的文件夹中包含 3.7 的 SQLite C 库，`lib`如果目标设备使用较低的 SQLite 版本，该功能是否可能有效？

# c# - C# 索引器和 Linq

> ID：10701617
> 
> 赞同：2
> 
> 时间：2012-05-22T11:58:29.693
> 
> 标签：c#, linq, indexer

我在一个类中有一个属性：

```
public int this[int index]
        {
            get { return _desk[index]; }
            set { _desk[index] = value; }
        } 
```

但我不能在 Linq 中使用这个类。怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T12:01:15.487

如果您的类没有实现[IEnumerable<T>](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)但具有索引器和*Count*属性，则可以使用[Enumerable.Range 方法创建索引的 IEnumerable ，并使用](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)[Enumerable.Select 扩展方法](http://msdn.microsoft.com/en-us/library/bb548891)将每个索引投影到集合项：

```
var query = Enumerable.Range(0, obj.Count)
                      .Select(index => obj[index])
                      ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T12:17:27.983

索引器不会自动为您提供枚举。为了能够调用 LINQ 方法，您需要[`IEnumerable<int>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)在您的类上实现。

我假设您的`_desk`对象是一个简单的数组 - 如果我在这里错了并且`_desk`是其他具有索引器的类，您可能也需要使该类实现`IEnumerable<int>`。

然后你需要做这样的事情：

```
public class Position : IEnumerable<int>
{
    private int[] _desk;

    public int this[int index]
    {
        get { return _desk[index]; }
        set { _desk[index] = value; }
    }

    /* the rest of your class */

    public IEnumerator<int> GetEnumerator()
    {
        return ((IEnumerable<int>)_desk).GetEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return _desk.GetEnumerator();
    }
} 
```

我不知道`GetEnumerator()`包装数组时的实现是否是最佳实践，但它们应该可以工作。

# asana - 工作区：类型不正确

> ID：10701619
> 
> 赞同：2
> 
> 时间：2012-05-22T11:58:34.170
> 
> 标签：asana

我正在尝试通过 api 创建一个新任务。

电话是：

**curl -u my_token: [https://app.asana.com/api/1.0/tasks](https://app.asana.com/api/1.0/tasks) -d "name=demo_task" -d "workspace=875236917006"**

这是回应：

**{"errors":[{"message":"workspace: Not the correct type"}]}**

我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T14:14:49.097

（我在 Asana 工作）

您为 a 提供的 ID`workspace`不是指工作区，而是指其他东西。也许您正在向它传递一个项目 ID？

尝试运行`curl -u my_token: https://app.asana.com/api/1.0/workspaces`，它将为您提供您所在的所有工作区的列表。您传入的 ID 必须是其中之一。

# javascript - 无法从模板中的 with 访问 Backbone.js 集合/模型

> ID：10701620
> 
> 赞同：3
> 
> 时间：2012-05-22T11:58:38.993
> 
> 标签：javascript, backbone.js

我正在努力将 Backbone.js 中的模型集合传递到模板中。每次我尝试访问模型（即 this.collection.models）时，我都会得到一个空数组，即使我知道该集合包含两个 Contact 类型的模型。我确定我在这里遗漏了一些基本的东西。将模型传递给 Backbone.js 模板的标准方法是什么？

以下是模型、集合和视图定义（实际视图是从 Backbone.js 路由器函数中调用的 - 为简洁起见，此处不包括路由器的源代码）：

```
var Contact = Backbone.Model.extend({
  urlRoot: '/contacts.json',
  idAttribute: '_id',
  parse: function(response) {
    return response;
  }
});

var Contacts = Backbone.Collection.extend({
  model: Contact,
  url: '/contacts.json',
  parse: function(response) {
    return response.data;
  }
});

var ListContactsView = Backbone.View.extend({
  el: $('#content'),
  template: _.template($('#list-contacts-tpl').html()),
  initialize: function() {
    this.collection = new Contacts();
    this.collection.fetch();
    this.render();
  },
  render: function() {
    console.log(this.collection);
    this.$el.html(this.template({ contacts: this.collection.models }));
  }
}); 
```

模板定义如下：

```
<script id="list-contacts-tpl" type="text/template">
  <% console.log(contacts); %> 
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T12:15:43.797

如果您的代码确实如您的问题所示，那么问题是您在`fetch`返回之前渲染视图，这就是您的集合为空的原因。返回需要时间，`fetch`但您在调用`render`后立即调用`fetch`。

要么调用`render`函数的成功处理程序`fetch`，要么绑定`render`到`reset`集合的事件。

# android - 互联网没有在android中连接

> ID：10701623
> 
> 赞同：1
> 
> 时间：2012-05-22T11:58:53.520
> 
> 标签：android

我在 android 中创建了一个应用程序，它需要通过互联网传输一些数据。我已经编写了代码，但在我的设备上看不到任何数据传输。我错过了什么吗？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:29:37.887

您必须添加权限才能在您的应用程序中使用 Internet

将此添加到您的 Manifest.xml 文件中

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:00:16.890

您需要在 android Manifest 文件中添加权限才能连接互联网。您是否在android清单文件中添加了这些代码？

```
<uses-permission android:name="android.permission.INTERNET" >
</uses-permission> 
```

# ruby-on-rails - 错误：NilClass:Class 的未定义方法“model_name”

> ID：10701625
> 
> 赞同：0
> 
> 时间：2012-05-22T11:58:58.400
> 
> 标签：ruby-on-rails, ruby

如果我想在我的 ruby​​ 应用程序中编辑某些内容，我的 edit.html.erb 有问题，然后会出现以下错误：

**NilClass:Class 的未定义方法“model_name”**

```
<%- model_class = @mytime.class -%>
<h1><%=t '.title', :default => t('helpers.titles.edit', :model =>model_class.model_name.human,
:default => "Edit #{model_class.model_name.human}") %></h1>
<%= render :partial => 'form' %> 
```

**我的全跟踪：**

```
app/views/mytimes/edit.html.erb:3:in `_app_views_mytimes_edit_html_erb___308492073099851536_70125215393580'
actionpack (3.2.3) lib/action_view/template.rb:143:in `block in render'
activesupport (3.2.3) lib/active_support/notifications.rb:125:in `instrument'
actionpack (3.2.3) lib/action_view/template.rb:141:in `render'
actionpack (3.2.3) lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
actionpack (3.2.3) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.3) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
actionpack (3.2.3) lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
actionpack (3.2.3) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
actionpack (3.2.3) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
actionpack (3.2.3) lib/action_view/renderer/template_renderer.rb:18:in `render'
actionpack (3.2.3) lib/action_view/renderer/renderer.rb:36:in `render_template'
actionpack (3.2.3) lib/action_view/renderer/renderer.rb:17:in `render'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:110:in `_render_template'
actionpack (3.2.3) lib/action_controller/metal/streaming.rb:225:in `_render_template'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:103:in `render_to_body'
actionpack (3.2.3) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
actionpack (3.2.3) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:88:in `render'
actionpack (3.2.3) lib/action_controller/metal/rendering.rb:16:in `render'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
activesupport (3.2.3) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/sinaoberle/.rbenv/versions/1.9.3-p0/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
activesupport (3.2.3) lib/active_support/core_ext/benchmark.rb:5:in `ms'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
activerecord (3.2.3) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:39:in `render'
actionpack (3.2.3) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
actionpack (3.2.3) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.3) lib/active_support/callbacks.rb:425:in `_run__1584935368947607784__process_action__332388991620009023__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
activerecord (3.2.3) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.3) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.3) lib/journey/router.rb:68:in `block in call'
journey (1.0.3) lib/journey/router.rb:56:in `each'
journey (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__344157926311310900__call__3627087792160188865__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/Users/sinaoberle/.rbenv/versions/1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/sinaoberle/.rbenv/versions/1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/sinaoberle/.rbenv/versions/1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

**编辑.html.erb**

```
<%- model_class = @mytime.class -%>
<h1><%=t '.title', :default => t('helpers.titles.edit', :model => model_class.model_name.human,
                                 :default => "Edit #{model_class.model_name.human}") %></h1>
<%= render :partial => 'form' %> 
```

我很感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:56:15.703

正如[Highcode](https://stackoverflow.com/users/1252918/highcode)上面在评论中所说的那样 - 似乎**@mytime**没有设置，当你得到它的**类**时，它会给你**NilClass**。当然，它根本没有**model_name**方法。

# ide - 编译sencha项目以检查错误

> ID：10701632
> 
> 赞同：0
> 
> 时间：2012-05-22T11:59:16.103
> 
> 标签：ide, compilation, editor, extjs, sencha-architect

我对 sencha 真的很陌生，我很难确定项目是否有错误。唯一的方法是检查 firebug 。我想在运行它之前检查它是否有错误。

任何的想法？煎茶的任何 IDE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:34:27.327

Sencha 有自己的 IDE：[http ://www.sencha.com/products/architect/](http://www.sencha.com/products/architect/)

# javascript - 在 Knockout.js 中选择更改时参考当前模型项调用函数

> ID：10701635
> 
> 赞同：0
> 
> 时间：2012-05-22T11:59:30.003
> 
> 标签：javascript, knockout.js

我在处理选择更改时遇到了困难，就像在跨度/按钮/淘汰赛中所做的任何事情上的“点击”处理程序中的构建一样。简单的场景，当当前选定的项目发生变化时，我想调用一个函数来引用 foreach 中的相应项目：

```
<ul id="storeList" data-bind="foreach: $data">
<li>
<span data-bind="text: StaticName, click: $root.storeModel.editStore"></span>
</li>
</ul> 
```

在 editStore 中，store 是对完整当前 store 对象的引用：

```
p.editStore = function(store, event) {
            location.hash = 'Butiker/Edit/' + ko.utils.unwrapObservable(store.StoreId);
            var el = event.target;

            p.currentEditItem(store);
            p.currentEditElement(el);
        } 
```

现在我想用一个选择来代替：

```
<select data-bind="options: $data, optionsText: 'StaticName', optionsValue: 'StoreId', optionsCaption: 'Choose store', event : { change: $root.storeModel.editStore }"></select> 
```

这可行，但在 editStore 函数中，没有任何内容作为第一个参数传递。

我可以在选择上做 value: currentEditItem，但是当该 observable 的数据更新时，我想做额外的事情。我不能订阅它，因为那只会给我那个特定属性的新字符串值……而不是对象本身。

为什么 click 必须给我我需要的一切，而 select change 让我处理我感兴趣的对象的一小部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:55:16.030

编辑：你是对的，我对`selectedOptions`.

不过，这似乎可行：http: //jsfiddle.net/8pVuV/2/[返回](http://jsfiddle.net/8pVuV/2/)`console.log`对象，而不是字符串。

# iis-7 - IIS 中的 URL 重写

> ID：10701637
> 
> 赞同：0
> 
> 时间：2012-05-22T11:59:36.233
> 
> 标签：iis-7, url-rewriting

每当一个请求

```
http://localhost:9000/Content/PDF/ABC.pdf 
```

来（在 IIS 中），我希望 URL 重写模块来处理该请求并将其重定向到

```
http://localhost:9000/User/GetPdf 
```

这样我的控制器和操作方法就会被调用，并且在向最终用户显示 pdf 文件之前执行我的代码。

这里 User 是 UserController 而 GetPdf 是我的应用程序中的 ActionMethod。

任何人都可以告诉我创建此 URL 重写的步骤。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:29:38.100

我假设您使用的是 IIS 7.x 并且您已经安装了[URL Rewrite 2.0 模块](http://www.microsoft.com/en-us/download/confirmation.aspx?id=7435)。

在应用程序的**web.config**文件中，添加`<rewrite>`类似于以下内容的元素：

```
<system.webServer>
   <rewrite>
      <rules>
        <rule name="PDF Rewrite">
          <match url="Content/PDF/([\w-]+)\.pdf" />
          <action type="Rewrite" url="User/GetPdf/{R:1}" logRewrittenUrl="true" />
        </rule>
      </rules>
    </rewrite>
</system.webServer> 
```

的`([\w-]+)`部分`url="Content/PDF/([\w-]+)**\.pdf"`将“捕获”没有文件扩展名的 PDF 的名称（在您的示例中为“ **ABC ”）。**的`{R:1}`部分`<action type="Rewrite" url="User/GetPdf/{R:1}" logRewrittenUrl="true" />`然后将插入捕获的字符串。最终结果是：

```
http://localhost:9000/Content/PDF/ABC.pdf 
```

变成：

```
http://localhost:9000/User/GetPDF/ABC 
```

我假设您需要将 PDF 的名称传递给您的 Action 方法，因此如果您实现标准路由模式`{Controller}/{Action}/{id}`，那么`id`将设​​置为“ **ABC** ”。

我发现的对 URL Rewrite 模块的最佳介绍实际上是[URL Rewrite 1.1 配置参考](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-configuration-reference)。尽管它适用于 v.1.1 而不是 2.0，但它提供了比[v.2.0 配置参考](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-20-configuration-reference)更好的概述。从一开始就值得一读。特别是，必须理解“<em>从重写规则访问 URL 部分”部分。

要调试 URL 重写模块，您可以使用 IIS 7.x“失败请求跟踪”，与其名称相反，它可用于跟踪成功和失败的请求。这个[www.iis.net 条目](http://www.iis.net/learn/extensions/url-rewrite-module/using-failed-request-tracing-to-trace-rewrite-rules)说明了如何配置它以及可用的详细调试信息的数量。

另请注意，该`logRewrittenUrl="true"`属性意味着重写的 URL 将记录到标准 IIS 日志*而不是*原始 URL。（它不能用于记录原始 URL 和重写 URL --- 你只能获取其中一个。）

# javascript - 我需要为手机的两个方向编写不同的代码集吗？

> ID：10701638
> 
> 赞同：-1
> 
> 时间：2012-05-22T11:59:38.603
> 
> 标签：javascript, jquery, html

我正在为手机设计一个应用程序。我是否需要为移动设备的两个方向编写不同的代码集？请提出一些想法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:05:02.890

您必须使用媒体查询 css 来设计方向并查看此 url

[CSS-Tricks：标准设备的媒体查询](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:08:32.967

如果您正在为 PC 开发 Web 应用程序，则无需担心与应用程序相关的代码。PC 版本的所有代码也将在移动设备上激活。但您需要担心页面布局-为此您可以构建一个单独的移动版本，或者您可以使用单独的样式表构建一个移动兼容的网站。

我会建议你建立一个单独的移动版页面。但是你仍然不需要修改与应用程序相关的代码。

对于移动页面，您可以使用[jquery 移动框架](http://jquerymobile.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T12:08:59.880

很高兴看到您可以[在这里参考的一些方法！](http://designwoop.com/2012/03/15-detailed-responsive-web-design-tutorials/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T12:03:53.167

如果您以像素为单位制作样式表，则有两种方法，那么您必须制作单独的样式表，但如果您使用百分比，那么您的样式表可以在两个方向上工作

# iphone - 何时使用@property？

> ID：10701645
> 
> 赞同：0
> 
> 时间：2012-05-22T12:00:24.357
> 
> 标签：iphone, objective-c, ipad, properties

> **可能重复：**
> [我为什么要使用@properties？](https://stackoverflow.com/questions/5602968/why-should-i-use-properties)
> [何时在目标 C 中使用属性？](https://stackoverflow.com/questions/8194281/when-to-use-properties-in-objective-c)

我已经用 Objective-c 编程一年多了，我一直觉得使用 @property 和 @synthesize 是一种惯例。但它们真正服务的目的是什么？它们是否仅用于在类之间进行交流？因此，例如，如果我仅在声明它的类的范围内使用 NSMutableDictionary，那么省略是否可以？

另一个问题：

如果我设置 NSMutableDictionary 的属性，它会被保留，对吗？所以，在我的课堂上，我不必调用 alloc() 和 init()，对吗？使用属性的规则是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T12:17:57.267

> 但它们真正服务的目的是什么？

对 iVar 的访问控制以及表示和底层数据之间的抽象。

> 它们是否仅用于在类之间进行交流？

不，它们适用于当您想要控制对 iVar 的访问而不是直接访问它们时，或者当您将来可以更改底层数据结构但希望保留当前表示时。

> 因此，例如，如果我仅在声明它的类的范围内使用 NSMutableDictionary，那么省略是否可以？

这取决于。您想控制对 iVar 的访问吗？您的代码是否可以更改以便获取字典而不是直接 iVar。通常，答案是肯定的。

> 如果我设置 NSMutableDictionary 的属性，它会被保留，对吗？

取决于您如何声明财产。

> 所以，在我的课堂上，我不必调用 alloc() 和 init()，对吗？

你这里的措辞很草率。我想你是在问你是否还需要构造一个属性的实例。是的，您需要以某种方式构造属性的实例。有很多方法可以做到这一点。

注意：谈论方法的惯例是使用它们的签名。您将使用 -alloc 代替 alloc()。

> 使用属性的规则是什么？

这你需要阅读[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:19:03.360

就像在其他语言中一样，当我们想让我们的变量全局或公共时，我们使用 public 访问修饰符。在目标 c 中，当我们想要访问另一个类中的另一个类变量时，我们使用 @property 和 @synthesize 它们。基本上@synthesize 是编译器为该变量创建setter 和getter 方法的方式。您可以手动创建它们，但不能使用 @synthesize。通过创建该类的对象，您可以访问其他类中的属性变量。通过使用保留，您可以清除发生内存并且在该容器类不被处置或释放之前不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T12:26:51.857

物业只是让您的生活更轻松。

如今，在内存管理、代码风格和节省时间方面尽可能多地使用属性。

`@property`s做什么？
他们可以创建 getter 和 setter 方法（取决于给定的参数）。

通常，您在头文件中声明实例变量（如在 c++ 中）。
现在您只需让它成为，而不是为实例变量声明您想要的属性。

属性可以获取多个参数。
对于普通的objective-c对象，你需要一个指针（*）你会写。
`@property (nonatomic,retain,...)`

当你`@synthesize`创建它时，它会创建一个 getter 和一个 setter。
setter 会自动执行诸如释放旧对象、变量保留和保留新对象之类的操作。
因此，您不必手动执行此操作（通常情况下应该如此）。那很重要。
你也可以给它参数（readonly，readwrite）来决定是否设置一个setter。
您甚至可以`@property`在头文件中以只读方式声明 a 并在实现文件中使用扩展名（没有名称的类别）覆盖它。

要深入了解这一点，请阅读非常有效的苹果开发者手册。希望那些对你有帮助。

舒尔它只是冰山一角，但它几乎可以满足您的一切需求。

# xaml - 如何在 Windows 8 xaml C# 应用程序中播放音频文件时添加频谱

> ID：10701650
> 
> 赞同：0
> 
> 时间：2012-05-22T12:00:38.403
> 
> 标签：xaml, windows-8, winrt-xaml

我在 Windows 8 xaml 应用程序中使用媒体元素创建了一个播放器。我想在播放音频文件时向我的媒体元素添加频谱。如何在 windows 8 中使用 xaml C# 向媒体元素添加频谱？

如何使用 C# 在 Windows 8 xaml 应用程序中向媒体元素添加频谱时诊断音频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:23:51.360

您是在谈论音频可视化器吗？[在此处](http://salusemediakit.codeplex.com/)和[此处](http://wpfsvl.codeplex.com/)尝试这些示例。

# c# - Linq - 使用总和计算进行分组

> ID：10701654
> 
> 赞同：2
> 
> 时间：2012-05-22T12:00:43.423
> 
> 标签：c#, linq

Linq 菜鸟在这里。我该如何纠正？

```
 var result = (from row in rulestable.AsEnumerable()
                         let sup = row.Field<int>("Supplier")
                         let amo = row.Field<decimal>("Amount")
                         let adv = row.Field<decimal>("Advance")
                         let bal = row.Field<decimal>("Balance")
                         let vat = row.Field<decimal>("VatRate")
                         group row by new { sup, vat } into grp
                         select new
                         {
                             Supplier = grp.Key.sup,
                             Amount = grp.Sum(grp => grp["amo"]),
                             Advance = grp.Sum(grp => grp["adv"]),
                             Balance = grp.Sum(grp => grp["bal"]),
                             VatRate = grp.Key.vat
                         }).ToList(); 
```

我想将我的数据表“rulestable”分组为 2 列，Supplier 和 VatRate。结果的金额、预付款和余额必须设置为分组的任何列的总和。

我收到一个错误 - grp.Sum 上的“无法从用法中推断出类型参数”。但是，我认为这个表达式都是错误的——我认为它将对结果列求和，而不是像我想要的那样对源列求和。

例子：

输入数据表：
Supplier, Amount, Advance, Balance, VatRate
S1, 10, 5, 5, 1
S1, 10, 5, 5, 1

预期输出：
S1、20、10、10、1

* * *

最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:34:01.937

在 lambda 内部`grp`（我已将其重命名`r`为 row 以区别于组本身）将是一个`DataRow`. 编译器不知道 grp[string] 返回什么数据类型，因为它只返回一个`object`. 试试这个：

```
DataTable rulestable = new DataTable();
rulestable.Columns.Add("Supplier");
rulestable.Columns.Add("Amount", typeof(decimal));
rulestable.Columns.Add("Advance", typeof(decimal));
rulestable.Columns.Add("Balance", typeof(decimal));
rulestable.Columns.Add("VatRate", typeof(decimal));
rulestable.Rows.Add("S1", 10M, 5M, 5M, 1M);
rulestable.Rows.Add("S1", 10M, 5M,  5M, 1M);

var result = (from row in rulestable.AsEnumerable()
              let sup = row.Field<string>("Supplier")
              let amo = row.Field<decimal>("Amount")
              let adv = row.Field<decimal>("Advance")
              let bal = row.Field<decimal>("Balance")
              let vat = row.Field<decimal>("VatRate")
              group row by new { sup, vat } into grp
              select new
              {
                  Supplier = grp.Key.sup,
                  Amount   = grp.Sum(r => r.Field<decimal>("Amount")),
                  Advance  = grp.Sum(r => r.Field<decimal>("Advance")),
                  Balance  = grp.Sum(r => r.Field<decimal>("Balance")),
                  VatRate  = grp.Key.vat
              }).ToList(); 
```

```
输入：
供应商 | 金额 | 前进 | 余额 | 增值税
-----------------------------------------------------------
   S1 | 10 | 5 | 5 | 1
-----------------------------------------------------------  
   S1 | 10 | 5 | 5 | 1

结果：
供应商 | 金额 | 前进 | 余额 | 增值税
-----------------------------------------------------------
   S1 | 20 | 10 | 10 | 1

```

使用您提供的输入，这将给出您在上面所期望的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T14:36:45.640

当我运行此查询时，我在 Visual Studio 中失败了。在更多搜索中发现以下内容并在我的系统中运行良好。

```
var result = (from row in rulestable.AsEnumerable() 
             group row by new {sup= row.Field<string>("Supplier"), 
                              vat=row.Field<decimal>("VatRate")} into grp = Group 
             select new With 
             {.Supplier = sup, 
              .Amount = grp.Sum(r => r.Field<decimal>("Amount")),
              .Advance  = grp.Sum(r => r.Field<decimal>("Advance")),
              .Balance  = grp.Sum(r => r.Field<decimal>("Balance")),
              .VatRate  = vat
              }
             ).ToList(); 
```

# php - 如何将不同的域指向不同的模块？

> ID：10701656
> 
> 赞同：0
> 
> 时间：2012-05-22T12:00:47.840
> 
> 标签：php, zend-framework

我有一个包含多个模块的应用程序。每个模块都是其中的不同网站。
我想用不同的主机/域/子域名指向每个模块。
有可能这样做吗？
如果是的话怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T20:10:28.727

我找到了解决方案

```
[routes]

;; Domain config
routes.site1.type = "Zend_Controller_Router_Route_Hostname"
routes.site1.abstract = true
routes.site1.route = "site1.localhost"
routes.site1.defaults.module = "default"

routes.site2.type = "Zend_Controller_Router_Route_Hostname"
routes.site2.abstract = true
routes.site2.route = "site2.localhost"
routes.site2.defaults.module = "default2"

;; Home Page
routes.inicial.type = "Zend_Controller_Router_Route"
routes.inicial.abstract = true
routes.inicial.route = "inicio"
routes.inicial.defaults.controller = index
routes.inicial.defaults.action = index

routes.site1-inicial.type = "Zend_Controller_Router_Route_Chain"
routes.site1-inicial.chain = "site1,inicial"
routes.site2-inicial.type = "Zend_Controller_Router_Route_Chain"
routes.site2-inicial.chain = "site2,inicial" 
```

# html - 如何定位溢出div边缘（右下角）的图像？

> ID：10701659
> 
> 赞同：0
> 
> 时间：2012-05-22T12:00:52.910
> 
> 标签：html, css, ios, cordova, position

在 div 填充了未定义数量的文本之后，有什么方法可以将图像定位在 div 的底部（溢出 div 边缘）？

图像应该位于 div 内部的一半和 div 外部的一半 - 溢出边缘（如果你知道我的意思） - 我已经设法通过使用相对位置和静态布局（以像素为单位）来做到这一点）。但是，当 div 高度是动态的 (height=auto;) 时，这不起作用。

我有一个这样的html结构：

```
<div class="container">
    <div class="box">
        <p>X amount of text</p>
    </div>
    <img class="button" src="../images/image.png"></img>
</div> 
```

我的 CSS：

```
.button
{
    position:relative;
    right: 30px;
    #bottom:-103px;
    #bottom: 70%;
    z-index:1;
} 
```

此外，当单击图像时，框会展开。这是通过以下代码完成的（并且可以完美运行）：

```
var boxHeight = $('.box').height();
var boxHeightOffset = 5 - boxHeight;
$('.button').css('bottom', boxHeightOffset + "px"); 
```

我尝试过使用 bottom: % 但这显然什么也没做。我试图在视图加载时运行我的小 javascript 函数，但是我尝试实现它 - 我得到高度 = 0。

这个问题可能有点复杂，但我想知道是否有任何方法可以在正确的时间运行 javascript（在 div 加载时 - 不知何故）或编辑我的 css 使其更具动态性？

哦，我在 iOS 上使用 PhoneGap。（网络套件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:04:24.020

怎么样：

```
#container {
  position:relative;
}         

.button { 
  position:absolute;
  bottom:-20px;
  right:-20px;
} 
```

如果这不起作用，那么使用负的右边距和下边距如何？

# c# - WinRT：用于枚举库和已知文件夹之外的文件的应用程序

> ID：10701660
> 
> 赞同：6
> 
> 时间：2012-05-22T12:00:53.067
> 
> 标签：c#, windows-8, windows-runtime, enumeration, .net-4.5

我正在开发一个 Metro 应用程序，该应用程序在 ListView 控件中显示给定文件夹的内容。MS 决定开发人员不需要 System.IO.Directory 类并将其完全从框架中删除。

我正在寻找在 Metro 风格应用程序中枚举 C# 文件的替代品。我检查了 MS 提供的所有枚举示例，它们似乎都只使用`KnownFolders`该类枚举 Windows 库，例如：

```
StorageFolder picturesFolder = KnownFolders.PicturesLibrary; 
```

并根据您的需要调用`GetFilesAsync()`or方法。`GetFoldersAsync()`如果我只想在图片或音乐库中列举这些都是黄金。但是，我希望枚举未包含在库中的目录上的文件。

任何人都知道这在 WinRT 中是如何实现的？？？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-22T12:10:46.260

根据设计，您在 Metro 应用程序的这一领域受到极大限制。这个想法是，Metro 应用程序只能访问受信任的内容，因此您可以：

1.  访问本地存储，特定于您的应用程序
2.  访问少数著名的存储位置，或
3.  访问特定授予的位置。

查看[http://msdn.microsoft.com/en-us/library/windows/apps/hh464959.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh464959.aspx)以了解您可以访问的内容。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-22T12:06:48.600

来自[http://tirania.org/blog/archive/2011/Sep-15.html](http://tirania.org/blog/archive/2011/Sep-15.html)：

> 当您使用 C# 和 VB 时，您使用的是完整的 .NET 框架。但他们选择向开发人员公开一小部分 API，以推动 Windows 8 的新愿景。
> 
> 这个新愿景包括安全/沙盒系统和异步编程。这就是为什么您没有获得直接文件系统访问或套接字访问以及为什么您习惯使用的同步 API 没有公开的原因。
> 
> 现在，你注意到我说的是“暴露”而不是“消失”。
> 
> 他们所做的是，当您以 Metro 配置文件为目标时，他们只向编译器公开了一组 API。因此，例如，您的应用程序不会意外调用 File.Create。但在运行时，CLR 将加载完整的类库，即包含 File.Create 的类库，因此在内部，CLR 可以调用类似 File.Create 的东西，只有您无权访问它。
> 
> 这种拆分类似于过去使用 Silverlight 所做的事情，不是每个 API 都被公开，并且 mscorlib 被授予您的应用程序不必确保系统安全的权利。
> 
> 您可能认为可以使用一些技巧（引用 GAC 库而不是编译器引用或使用反射来访问私有 API，或 P/Invoking 进入 Win32）。但是所有这些用途都将被 AppStore 审查应用程序捕获，您将无法通过 Microsoft 的商店发布您的应用程序。
> 
> 你仍然可以在你的系统上做你喜欢的任何丑陋的黑客攻击。只是不可能通过 AppStore 发布它。

所以可能没有官方的方式，如果有非官方的方式，很可能不会被应用商店接受。

总的来说，这是有道理的：我不想下载一个看似合法的应用程序，只是为了让它扫描我的硬盘并找到我的“budget.xls”电子表格，其中包括我的银行/信用信息。

编辑：可以通过 WinRT 的文件选择器授予对安全文件/文件夹的临时访问权限，但必须由用户明确调用和选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T12:07:30.990

您可以使用[StorageFolder.GetFolderFromPathAsync](http://StorageFolder.GetFolderFromPathAsync)方法从路径中获取[StorageFolder](http://msdn.microsoft.com/library/windows/apps/BR227230)实例。

```
StorageFolder folder = await StorageFolder.GetFolderFromPathAsync(@"C:\..."); 
```

请注意，您可能无权对计算机上的所有路径执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-16T22:01:00.717

类似的情况。想要访问 chrome 书签文件进行解析。最初必须使用 FileOpenPicker，但它返回的文件可以“缓存”在 futureaccesslist(?) 中以供后续检索。

# asp.net - 定义 ASP.NET SOAP Web 服务响应

> ID：10701661
> 
> 赞同：2
> 
> 时间：2012-05-22T12:00:57.850
> 
> 标签：asp.net, web-services, soap, asmx

抱歉，如果这是一个业余问题。我必须修改现有的 ASMX Web 服务。问题是，我需要修改 Web 服务生成的响应。以下是当前响应的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" mlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <InsertCaseShortResponse xmlns="http://website.com/Service/">
      <InsertCaseShortResult>50314</InsertCaseShortResult>
    </InsertCaseShortResponse>
  </soap:Body>
</soap:Envelope> 
```

如果成功，InsertCaseShortResult 返回唯一的参考号，如果失败则返回错误消息。我需要做的是添加另一个响应标记，该标记给出关于插入是否成功的真或假标志。我无法在任何地方找到很多关于如何构建 Web 服务响应的信息，我想我在这里缺少一个基本元素。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:30:00.050

我假设您所说的“遗留”是指 ASMX Web 服务。

根据您的 WSDL，您的 Web 服务服务器端代码中似乎有这样的内容：

```
[WebMethod]
public int InsertCaseShort(/* params here */)
{
    int result;

    /* Code here */

    return result;
} 
```

要添加附加字段，您需要返回类引用而不是整数值。

**例子：**

```
public class InsertCaseShortResult
{
    public int StatusCode { get; set; }
    public bool Successful { get; set; }
} 
```

在您的 WebMethod 中：

```
[WebMethod]
public InsertCaseShortResult InsertCaseShort(/* params here */)
{
    var result = new InsertCaseShortResult();

    /* Code here */

    return result;
} 
```

随时提出任何其他问题。

# ruby-on-rails-3 - 使用 Accept_nested_attributes_for 时，Rails 无法批量分配受保护的属性错误

> ID：10701662
> 
> 赞同：2
> 
> 时间：2012-05-22T12:01:08.323
> 
> 标签：ruby-on-rails-3

我有一个`business`has_one 模型，`address`我正在尝试构建一个在创建业务时接受地址属性的表单。我收到错误

无法批量分配受保护的属性：地址

这是我的模型

**商业**

```
class Business<ActiveRecord::Base
  has_one :address, :as => :addressable
  attr_accessible :name, :email, :address_attributes, :password, :password_confirmation
  validates_presence_of :address
  validates_associated :address
  accepts_nested_attributes_for :address
end 
```

**地址**

```
class Address<ActiveRecord::Base
  attr_accessible :line1, :city, :zip
  validates_presence_of :line1, :city, :zip

  belongs_to :addressable, polymorphic: true
end 
```

**看法**

```
%h2 Sign up
= form_for(:business, :url => business_registration_path) do |f|
  = devise_error_messages!
  %div
    = f.label :name
    %br/
    = f.text_field :name
  %div
    = f.label :email
    %br/
    = f.email_field :email
  %div
    = f.label :password
    %br/
    = f.password_field :password
  %div
    = f.label :password_confirmation
    %br/
    = f.password_field :password_confirmation
  %div
    =f.fields_for :address do |address|
      =render :partial => 'businesses/shared/address', :locals => {:f => address}
  %div= f.submit "Sign up"
= render :partial => "devise/shared/links" 
```

**局部视图**

```
%div
  = f.label :line1, 'Address 1'
  %br/
  =f.text_field :line1
%div
  = f.label :city
  %br/
  = f.text_field :city
%div
  = f.label :zip, 'Postal Code'
  %br/
  = f.text_field :zip 
```

**原始 POST 数据 这就是我认为问题所在**

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"/h17NgMDr4VCTDd+FxGlAI4RWmfAat9guU9q00hYIA4=", "business"=>{"name"=>"hello", "email"=>"hello@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "address"=>{"line1"=>"this is line1",  "city"=>"Andra", "country"=>"Jama", "zip"=>"123123"}}, "commit"=>"Sign up"} 
```

地址字段不应该这样吗

```
"address_attributes"=>{"line1"=>"this is line1",  "city"=>"Andra", "country"=>"Jama", "zip"=>"123123"} 
```

为什么它生成地址而不是 address_attributes ？这可能是导致问题的原因。有任何想法吗？我已经为此苦苦挣扎了大约2个小时。感谢任何建议或解决方案。

**更新1：**

如果我在视图中进行更改并使用

```
 =f.fields_for :address_attributes do |address| 
```

代替

```
 =f.fields_for :address do |address| 
```

Everythings 开始工作，但这不是所有教程和文档都在谈论的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:21:15.137

您应该将对象（`Business`类的实例）传递给`form_for`而不是符号：

```
= form_for(@business, :url => business_registration_path) do |f| 
```

想必，你`@business = Business.new`在控制器中会有动作。

该类`Business`包含所有验证和关联逻辑。当你想要一个无模式的表单时使用一个符号（Rails 不会推断它`:business`引用`Business`类，即使它们共享相同的名称）。

# css - 垂直堆叠的 div 之间有空间（firefox）

> ID：10701664
> 
> 赞同：4
> 
> 时间：2012-05-22T12:01:08.963
> 
> 标签：css, internet-explorer, firefox, html

一个我在 SO 上找不到的小 css 问题 - 虽然我认为它之前已经被问过，但很抱歉。

所以，这里是html：

```
<html>
    <body style="color:white">
        <div class="a" style="width: 70%; background: blue;"><p>helloes helloes helloes</p></div>
        <div class="b" style="width: 70%; background: pink;"><p>talk talk talk</p></div>
        <div class="a" style="width: 70%; background: blue;"><p>yay! yay! yay!</p></div>
    </body>
</html> 
```

迷人的。

如果我在 ff 中打开它，我会得到三个垂直堆叠的 div - 但它们之间有空格！这不是我想要的！戏剧拉玛！

即按照我的预期呈现这个，这引起了一些警钟。

即是9，ff是11

干杯，安德鲁！

更新很多提到“p”标签-为什么/如何p标签影响任何东西？不是被div包裹了，而且div应用了背景色吗？实际上，不应该 div 只是*内部更大*，但相邻 div 之间没有空间？

更新：

所以我尝试了这个html：

```
<html style="margin:0px; padding:0px;"> 
```

这没有解决问题，还有这个：

```
<body style="color: white; margin:0px; padding:0px;"> 
```

这也没有解决问题 - 在这两种情况下，css不应该被“p”标签继承吗？有趣的是，我还用 firebug 检查了生成的 css，并且 p 标签的边距和填充都为 0...

想法？

更新：很多回复要求我将填充设置为 0。这不起作用。任何更多的答案说明这一点，我会否决他们。

更新：这个问题是关于使用内联 css 的。我自己实际上并不关心内联 css，但为什么每个人都为他们的答案提供 css 样式表？

更新：有人提到-webkit，虽然我根本没有使用谷歌浏览器，但这是一个有趣的想法。我看不到任何可能导致此问题的与 ff 相关的额外 css，有人有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:08:58.127

我用 Chrome 试了一下，看到了同样的行为。查看底层 CSS (F12) 后，Chrome 将以下两行应用于 <p> 标签：

```
-webkit-margin-before: 1em;
-webkit-margin-after: 1em; 
```

如果我将以下内容添加到 css 中，空白行就会消失：

```
-webkit-margin-before: 0px;
-webkit-margin-after: 0px; 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T12:11:04.777

基本上，默认情况下，P 标签会占用保证金。添加CSS

```
p{margin:0px; padding:0px;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T12:09:28.267

这是因为`<p>`元素的自动生成边距。

Firefox（和其他）与 IE 的做法不同。您可以通过
`p{margin: 0}`在您的 css 中简单地“重置”它。

`* { margin: 0; padding: 0;}`您可以通过简单地添加您的 css来一次对所有元素执行相同的操作（我推荐） 。

小提示：安装一个浏览器扩展来检查你的元素的行为，比如 Firebug。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-26T20:24:52.543

我解决了这个问题，指定了一个 CSS 'line-height' 我只是将它设置为与字体大小相同，然后我在所有浏览器中获得了一致的 DIV 间距。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T17:15:10.260

您的`<p>`标签有垂直边距。CSS 中的垂直边距折叠，因此子边距有时可以应用于父级。见[http://www.w3.org/TR/CSS21/box.html#collapsing-margins](http://www.w3.org/TR/CSS21/box.html#collapsing-margins)

# capybara - 从 Rspec 文件访问 rails_admin url 帮助程序

> ID：10701668
> 
> 赞同：3
> 
> 时间：2012-05-22T12:01:24.357
> 
> 标签：capybara, rspec2, ruby-on-rails-3.2, rails-admin

我正在使用 Rails 3.2、RailsAdmin 0.0.3、Rspec 和 Capybara。

我尝试从我的规范文件中调用 RailsAdmin url 帮助程序，如 RailsAdmin wiki 中所述。`rails_admin.new_path(:model_name => :user)`

当我从控制器或视图中以这种方式使用帮助器时，它工作得很好，但是当尝试从规范文件中使用它时，它会出现此错误：

> #RSpec::Core::ExampleGroup::Nested_2:0xbe04948 的未定义局部变量或方法“rails_admin”>

我想我必须在我的 spec_helper.rb 文件中添加一些东西才能加载 rails_admin。但是在谷歌搜索了一段时间并查看 rails_admin gem 的 spec_helper 之后，我无法弄清楚是什么......

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T14:38:53.747

我在[rails_admin](https://github.com/sferik/rails_admin/blob/master/spec/spec_helper.rb)的 spec_helper.rb 中找到了它。

将以下代码包含到 spec_helper.rb 中。

```
RSpec.configure do |config|
  ...
  config.include RailsAdmin::Engine.routes.url_helpers
end 
```

我使用调试器进行了测试。它可以称为

```
> new_path(:model_name => :user)
=> "/admin/user/new" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-14T14:46:59.643

我将此行添加到需要 rails_admin url 的各个规范中，它允许我参考之前帖子中提到的方法，但不会干扰我的非管理员 url。

```
include RailsAdmin::Engine.routes.url_helpers 
```

规范中的方法示例

```
index_path(:model_name => :client) 
```

我正在使用 Rails 5.0、Rspec 3.5 和 Capybara 2.10.1

# authentication - 需要 Spring Surf 服务索引或控制台身份验证

> ID：10701671
> 
> 赞同：0
> 
> 时间：2012-05-22T12:01:48.803
> 
> 标签：authentication, indexing, explorer, alfresco

在工作中，我们安装了 Alfresco Explorer，当我们发现 Spring Surf Web 脚本的新可能性时，我们尝试访问**/service/console**或**/service/index**，以便我们可以管理 Web 脚本、启用 JavaScript 调试器等。

但是，要访问该 URL，它需要进行身份验证，但它不接受用户/传递我们用于登录资源管理器 Web 应用程序的内容。

[由于我们在文档](http://wiki.alfresco.com/wiki/Web_Scripts)中没有找到任何相关内容，我们不得不问它：有人知道服务索引需要什么类型的身份验证吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:57:48.817

`/service/?`只能由管理员用户访问。

# ruby-on-rails - facebook API 节流预算

> ID：10701673
> 
> 赞同：2
> 
> 时间：2012-05-22T12:01:56.883
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api

任何人都知道什么是 facebook api 油门预算。在他们的见解中，当你超过他们所谓的预算时，他们会告诉你，但他们没有说预算是多少？我们在 RoR 中有一个画布应用程序，它有时会受到限制，为了管理它并保持效率，我们需要知道他们的预算是多少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:10:12.493

Facebook 没有宣布或记录对 Graph API 请求的任何限制。

# maven - JBoss maven archtype：webapp-ear 部署问题

> ID：10701675
> 
> 赞同：0
> 
> 时间：2012-05-22T12:02:07.727
> 
> 标签：maven, deployment, jboss7.x, ear

我使用 maven 原型“org.jboss.spec.archetypes:jboss-javaee6-webapp-ear-archetype”来生成代码。我启动了 JBoss 7，然后尝试从项目根目录进行部署。

```
mvn package
mvn jboss-as:deploy 
```

包装成功。

但是，我在部署阶段收到以下错误消息：

> [错误] 无法在项目 myProject-web 上执行目标：无法解析项目 com.example:myProject-web:war:1.0-SNAPSHOT 的依赖项：找不到工件 com.example:myProject-ejb:jar:1.0-SNAPSHOT -> [帮助 1]

我尝试从项目根目录和 myProject-ear 文件夹中打包。

我的环境：ubuntu 12.04、Oracle JDK 7、JBoss 7.1、Maven 3

非常感谢！

这是我打包后的项目结构（部分省略）

```
.
├── myProject-ear
│   ├── pom.xml
│   ├── src
│   │   └── main
│   │       └── application
│   │           └── META-INF
│   │               └── myProject-ds.xml
│   └── target
│       ├── application.xml
│       ├── maven-archiver
│       │   └── pom.properties
│       ├── myProject
│       │   ├── META-INF
│       │   │   ├── application.xml
│       │   │   └── myProject-ds.xml
│       │   ├── myProject-ejb-1.0-SNAPSHOT.jar => *** EJB JAR HAS GENERATED ***
│       │   └── myProject-web-1.0-SNAPSHOT.war => *** WAR HAS GENERATED ***
│       └── myProject.ear                      => *** EAR HAS GENERATED (contains other 2 archives) ***
├── myProject-ejb
│   ├── pom.xml
│   ├── src
│   └── target
│       ├── classes
│       │   ├── com
│       │   ├── import.sql
│       │   └── META-INF
│       │       ├── beans.xml
│       │       └── persistence.xml
│       ├── generated-sources
│       │   ├── annotations
│       │   └── test-annotations
│       ├── maven-archiver
│       │   └── pom.properties
│       ├── myProject-ejb-1.0-SNAPSHOT.jar    => *** EJB JAR HAS GENERATED ***
│       └── test-classes
│           ├── arquillian.xml
│           ├── com
│           │   └── example
│           │       └── test
│           │           └── MemberRegistrationTest.class
│           ├── META-INF
│           │   └── test-persistence.xml
│           └── test-ds.xml
├── myProject-web
│   ├── pom.xml
│   ├── src
│   └── target
│       ├── classes
│       │   └── com
│       ├── generated-sources
│       │   └── annotations
│       ├── maven-archiver
│       │   └── pom.properties
│       ├── myProject-web-1.0-SNAPSHOT
│       │   ├── index.html
│       │   ├── META-INF
│       │   ├── resources
│       │   └── WEB-INF
│       │       ├── beans.xml
│       │       ├── classes
│       │       │   └── com
│       │       │       └── example
│       │       ├── faces-config.xml
│       │       └── templates
│       │           └── default.xhtml
│       ├── myProject-web-1.0-SNAPSHOT.war => ***WAR HAS GENERATED***
│       └── surefire
├── pom.xml
└── README.md
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:03:01.393

在尝试了更多之后，我发现了以下作品：

```
mvn clean package jboss-as:deploy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-18T12:57:56.640

**在 .m2 目录的 setting.xml 文件中添加以下行，然后重新启动 IDE。**

```
<profiles>        
    <profile>
        <id>maven-profile</id>
        <repositories>
            <repository>
                <id>MavenCentral-1</id>
                <name>Maven Central Repository 1</name>
                <releases>
                    <updatePolicy>never</updatePolicy>
                </releases>
                <snapshots>
                    <enabled>false</enabled>
                </snapshots>                    
                <url>https://repo1.maven.org/maven2/</url>
            </repository>
            <repository>
                <id>MavenCentral-2</id>
                <name>Maven Central Repository 2</name>
                <releases>
                    <updatePolicy>never</updatePolicy>
                </releases>
                <snapshots>
                    <enabled>false</enabled>
                </snapshots>                    
                <url>https://repo.maven.apache.org/maven2/</url>
            </repository>
            <repository>
                <id>jboss-public-repository-group-1</id>
                <name>JBoss Public Maven Repository Group</name>
                <releases>
                    <updatePolicy>never</updatePolicy>
                </releases>
                <snapshots>
                    <updatePolicy>never</updatePolicy>
                </snapshots>                    
                <url>https://repository.jboss.org/nexus/content/groups/public</url>
            </repository>
        </repositories>
    </profile>
</profiles> 
```

# java - 国际字符问题

> ID：10701677
> 
> 赞同：0
> 
> 时间：2012-05-22T12:02:13.933
> 
> 标签：java, android

我有一个带值的字符串：

`'Reserva de Usos M\xfaltiples de la Cuenca del Lago de Atitl\xe1n-RUMCLA (Atitl\xe1n Watershed Multiple Use Reserve)'`

如何让`\xfa`and`\xe1`显示为字符？

谢谢埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:03:34.813

如果要在 TextView 或类似内容中显示它，可以使用以下内容解析为 html textView.setText(Html.fromHtml("Text here"));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:15:10.460

你从哪里得到这个文本？来自互联网或 blahblah 或存储在应用程序中。

在最后一种情况下，不要对其进行硬编码，只需将其保存`Strings.xml`为“Múltiples”并稍后从那里拉出。我没有遇到任何语言/字符问题，我使用西班牙字符没有任何问题。干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T22:25:28.040

这是我为解决此问题所做的：

```
protected String FixHexValuesInString(String str) {

    Matcher matcher = Pattern.compile("\\\\x([0-9a-f]{2})").matcher(str);    
    StringBuffer sb = new StringBuffer();
    while (matcher.find()) {
        int codepoint = Integer.valueOf(matcher.group(1), 16);
        matcher.appendReplacement(sb, String.valueOf((char) codepoint));
    }
    return matcher.appendTail(sb).toString();
} 
```

# c# - 如何在 Visual C# 2008 中使用 sql 将数据插入 dbf 格式数据库？

> ID：10701678
> 
> 赞同：0
> 
> 时间：2012-05-22T12:02:17.887
> 
> 标签：c#, sql, dbf

如何`.dbf`在 Visual c# 中使用 SQL 将数据插入格式数据库？

和使用 MS Access 时一样吗？

```
OleDbConnection dbConn = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\wz\Desktop\UBS\onetimecapture\onetimecapture\onetimecapture\bin\Debug\;Extended Properties=dBase IV;");

try
{
   // Open connection.
   dbConn.Open();
   //string queryCutting = "INSERT INTO cuttingstatus.dbf ([Status]) VALUES(adddate)";
   string queryCutting = "INSERT INTO cuttingstatus.dbf VALUES(adddate)";
   OleDbCommand command_cutting = new OleDbCommand(queryCutting, dbConn);

   command_cutting.Parameters.AddWithValue("adddate", "123");
   command_cutting.ExecuteNonQuery();
   dbConn.Close();
}
catch
{
    MessageBox.Show("Error", "SCADA system", MessageBoxButtons.OK);
} 
```

但它返回一个错误说

> Microsoft Jet 数据库引擎找不到对象'cuttings'。
> 确保对象存在并且正确拼写其名称和路径名。

数据库被调用`cuttingstatus.dbf`，它只包含一个列`Status`。

感谢您的帮助 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:08:32.557

中表的名称是`cuttingstatus.dbf`什么？

该声明应类似于：

```
INSERT INTO TABLE_NAME
VALUES(adddate) 
```

作为变量的值`queryCutting`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:37:47.750

使 OleDbConnection 使用数据库文件时，您希望连接源指向表所在的逻辑路径...而不是实际表。

```
Connection dbConn = new OleDbConnection(@"Data ource=C:\SomePath\WhereAreAllTables;Provider=Microsoft.Jet.OLEDB.4.0;Extended Properties=dBase IV;"); 
```

然后，您的插入查询不引用 .dbf 扩展名......它是由连接暗示的。此外，即使它可能是单列，最好显式显示列和值，例如：

```
string queryCutting = "INSERT INTO cuttingstatus ( YourColumnName ) VALUES ( @adddate )"; 
```

接下来……真的是DBase IV系统吗？FoxPro 表？快船？我会确保适当的提供者。如果数据实际上来自 Foxpro，我会去微软下载 Visual Foxpro OleDb 提供程序。

最后一个想法......是错误是指最多8个字符“cuttings”的截断表名，这意味着旧的DOS 8.3文件命名约定。不知道这是否也是您遇到的问题。

# jquery - 日期选择器和时间选择器不适用于附加元素

> ID：10701682
> 
> 赞同：2
> 
> 时间：2012-05-22T12:02:26.790
> 
> 标签：jquery

我正在使用`datepicker`和`timepicker`我的领域是这样的：

```
<input class="datepicker" name="sugg_date[]" type="text" value="" />
<input class="tp" name="sugg_time[]" type="text" value="" /> 
```

我也在使用这个函数来添加更多行：

```
<script>
    function add_next_row(e, row_a) {
        curr_row = $(row_a).prev('p');
        curr_row.append('<input class="datepicker" name="sugg_date[]" type="text" value="" />');
        curr_row.append('<input class="tp" name="sugg_time[]" type="text" value="" />');

        if (e.preventDefault) {
            e.preventDefault();
        } else {
            e.returnValue = false;
        }
    }
</script> 
```

但是新行不适用于`timepicker`and `datepicker`。有人可以告诉我为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:08:12.673

您需要为添加的每个新元素初始化`datepicker`和`timepicker`。尝试这个：

```
function add_next_row(e, row_a) {
    e.preventDefault();

    var $datefield = $('<input class="datepicker" name="sugg_date[]" type="text" value="" />').datepicker();
    var $timefield = $('<input class="tp" name="sugg_time[]" type="text" value="" />').timepickr({convention:12}); 

    curr_row = $(row_a).prev('p');
    curr_row.append($datefield);
    curr_row.append($timefield);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T11:28:38.843

```
 function add_next_row(e, row_a) {

    if (e.preventDefault) {
        e.preventDefault();
    } else {
        e.returnValue = false;
    }
    curr_row = $(row_a).prev('p');
    var $datefield = $('<input class="datepicker" name="sugg_date[]" type="text" value="" />').datepicker();
    var $timefield = $('<input class="timepickr" name="sugg_time[]" type="text" value="" />');
    curr_row.append($datefield);
    curr_row.append($timefield);
    curr_row.append("<br/>");

    $(".timepickr").timepickr().timepickr({convention:12});

} 
```

# xslt - 仅向一个元素添加名称空间

> ID：10701684
> 
> 赞同：1
> 
> 时间：2012-05-22T12:02:33.193
> 
> 标签：xslt

如何仅将命名空间添加到根元素？

我的 XML：

```
<Envelope>
    <from>
        <contents />
    </from>
</Envelope> 
```

我想要的输出：

```
<Envelope xmlns:tns="Foo">
    <from>
        <contents />
    </from>
</Envelope> 
```

我只能用这个得到“xmlns='Foo'”，而不是“xmlns:tns=..”：

```
<xsl:element name="{local-name()}" namespace="Foo" >
        <xsl:copy-of select="attribute::*"/>
        <xsl:apply-templates />
</xsl:element> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:08:27.753

**这是一个完整的转换**：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:tns="Foo">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:template match="node()|@*">
         <xsl:copy>
           <xsl:apply-templates select="node()|@*"/>
         </xsl:copy>
     </xsl:template>

     <xsl:template match="/*">
      <xsl:element name="{name()}">
       <xsl:copy-of select=
        "document('')/*/namespace::*[name()='tns']"/>
       <xsl:apply-templates/>
      </xsl:element>
     </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<Envelope>
    <from>
        <contents />
    </from>
</Envelope> 
```

**产生了想要的正确结果：**

```
<Envelope xmlns:tns="Foo">
   <from>
      <contents/>
   </from>
</tns:Envelope> 
```

# extjs - Sencha 应用程序构建错误

> ID：10701689
> 
> 赞同：1
> 
> 时间：2012-05-22T12:02:42.483
> 
> 标签：extjs, sencha-touch-2

我正在尝试使用该`sencha app build`命令构建我的应用程序，但出现此错误：

> [错误] TypeError：'未定义'不是对象堆栈跟踪：
> file:////public/m/app/controller/Nearby.js?_dc=1337687749349：62：App.controller.Nearby#notify

这是我的 notify() ：

```
notify: function(title, message){
  var view = this.getView();

  view.setItems({
    xtype: 'panel',
    html: '<h2>' + title + '</h2><p>' + message + '</p>',
    styleHtmlContent: true
  });
} 
```

该视图是这样的参考

```
refs: { view: 'nearbyview' }, 
```

并且`App.view.Nearby`已添加到另一个视图的所需视图中。

我正在运行最新版本的 SDK 工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:12:46.560

我终于找到了问题出在哪里。

在控制器中，我使用的是这条路线：

```
routes:{
  '':      'home',
} 
```

我删除了它，现在一切正常。

# linq - 如何使用非泛型 Lambda2 生成子查询

> ID：10701690
> 
> 赞同：0
> 
> 时间：2012-05-22T12:02:42.800
> 
> 标签：linq

我对 LINQ 很陌生？请帮助我如何将以下通用 Lambda 函数转换为 lambda 表达式：

```
objects.Where(objects=>values.Contains(objects.DistrictId) ); 
```

我正在尝试创建一个完整的 lambda 表达式，而无需任何或直接调用。就像是 ：

```
var innerItem = Expression.Parameter(typeof(Objects), "objects");
var innerProperty = Expression.Property(innerItem, "ID");
var innerMethodExpression = Expression.Call(innerProperty,null);
var innerLambda = Expression.Lambda<Func<Objects, bool>>(innerMethodExpression, innerItem);

var outerItem = Expression.Parameter(typeof(int[]), "item");
var containsMethod = typeof(string).GetMethod("Contains", new[] { typeof(int) });

var containsMethodExpression = Expression.Call(innerMethodExpression, containsMethod, innerLambda);
var outerLambda = Expression.Lambda<Func<Objects, bool>>(containsMethodExpression, outerItem);

collection = collection.AsQueryable<Objects>().Where(outerLambda); 
```

但我不明白出了什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:33:36.603

在你的例子中，

Lambda 函数是

```
objects.Where(objects=>values.Contains(objects.DistrictId) ); 
```

所以你的 lambda 表达式应该是

```
Expression<Func<Objects, int>> ObjectsExp = objects=>values.Contains(objects.DistrictId); 
```

假设 DistrictId 是您的输出结果的整数类型。

# javascript - 在 jQuery 中处理数组

> ID：10701698
> 
> 赞同：0
> 
> 时间：2012-05-22T12:03:18.003
> 
> 标签：javascript, jquery, arrays

我被困在 jQuery 中的数组上。我从 php 返回一个数组在 php 文件中，我在循环中添加这样的数组：

```
$table_data[]= array("id"=>mysql_result($query,$i,"id"),"name"=>trim(mysql_result($query,$i,"name"))); 
```

在 php 文件的末尾：

```
echo json_encode($table_data); 
```

在我的 jquery 上：

```
 $.ajax({
   type: "POST",
   url: "phpfilename.php",
   data: ({
     newtask: "grab"
   }),
   dataType: "json",
   success: function(data){
     alert("value - "+data.length);
   }
 }); 
```

（这会返回正确的记录计数）

```
$.each(data, function(key, value) {
 alert( "The key is '" + key + "' and the value is '" + value + "'" );
}); 
```

（上面的循环返回我：0,1,2 作为键，对象作为值）

我需要帮助了解如何将数组从 php 传递到 jquery 以及如何处理它们。也许我完全走错了路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:05:47.240

要访问对象的任何属性，过程是：

```
ObjectName.property 
```

或者

```
ObjectName[''+ property +'']; 
```

[在这里](https://developer.mozilla.org/en/JavaScript/Guide)阅读

```
$.each(data, function(key, value) {

  // try

  console.log(value.id);
  console.log(value.name);

}); 
```

# c - gdb 意外行为：在嵌套 if

> ID：10701700
> 
> 赞同：1
> 
> 时间：2012-05-22T12:03:23.080
> 
> 标签：c, gdb

我在用

```
 p12user@ubuntu:~$ uname -a
    Linux ubuntu 2.6.32-40-generic #87-Ubuntu SMP Tue Mar 6 00:56:56 UTC 2012 x86_64 GNU/Linux

    p12user@ubuntu:~$ gdb -v
    GNU gdb (GDB) 7.1-ubuntu
    Copyright (C) 2010 Free Software Foundation, Inc.
    License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
    This is free software: you are free to change and redistribute it.
    There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
    and "show warranty" for details.
    This GDB was configured as "x86_64-linux-gnu".
    For bug reporting instructions, please see:
    <http://www.gnu.org/software/gdb/bugs/>.

    p12user@ubuntu:~/programming$ gcc --version
    gcc (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3
    Copyright (C) 2009 Free Software Foundation, Inc.
    This is free software; see the source for copying conditions.  There is NO
    warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

在 gdb 中调试此程序时，编译为`gcc -g program.c`：

```
#include <stdio.h>
int main()
{
   int condition1 = 1;
   if(condition1)
   {
      if(!condition1)
      {
         printf("The control shouldn't come here.\n");
      }
   }
   else
   {
      printf("in else\n");
   }
   return 0;
} 
```

行为是：

```
Breakpoint 1, main () at program.c:4
4               int condition1 = 1;
(gdb) n
5               if(condition1)
(gdb) n
7                       if(!condition1)
(gdb) n
9                               printf("The control shouldn't come here.\n");
(gdb) n
16              return 0;
(gdb) n
17      }
(gdb) 
```

第 9 行的行为在 gdb 中是意外的。但是，print 语句只显示在 gdb 中，不执行。而且，如果我将匹配的 ELSE（带有一些打印语句）与 inner-IF 一起放置，则不会发生这种情况，如果删除了与 outer-IF 匹配的 ELSE，则不会发生这种情况。我在这里错过了一些微不足道的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:09:23.290

确保您在构建程序*时没有进行*任何类型的优化，因为您展示的程序似乎很容易优化，这可能导致源代码语句无法进入可执行文件。

在 GCC 你会使用：

```
gcc -O0 ... 
```

或者

```
g++ -O0 ... 
```

为了这。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:00:12.660

在

```
2.6.18-164.el5 #1 SMP Tue Aug 18 15:51:48 EDT 2009 x86_64 x86_64 x86_64 GNU/Linux
gcc version 4.1.2 20080704 (Red Hat 4.1.2-46)
GNU gdb Fedora (6.8-37.el5) 
```

没关系！

# iphone - 有什么办法可以清除 NSLog 输出？

> ID：10701703
> 
> 赞同：11
> 
> 时间：2012-05-22T12:03:40.180
> 
> 标签：iphone, nslog

过去几个小时我一直在谷歌搜索，发现有没有办法使用代码清除 NSLog 输出？

就像我们`clrscr()`在c中一样。因此，如果我们尝试打印我们最想关注的内容，并且那里有很多日志打印，我们可以将代码放在那里，并将我们的愿望日志放在顶部以便于搜索。这可以通过在我的`NSLog`行上放置断点然后单击来完成`clear console`。但问题是有没有办法以编程方式实现这一目标？

我发现很少有关于堆栈溢出的问题，但我不满意这样的答案[是](https://stackoverflow.com/questions/4780376/how-to-clear-nslog-output-from-code)说我可以禁用发布模式的日志等。

或者我可以使用 DLog、ALog 或 ULog 作为要求，但我的问题不同..

任何人都可以帮助我吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T12:31:24.563

您可以使用**条件断点**来模拟它。在代码中定义这样的函数：

```
int clear_console()
{
    NSLog(@"\n\n\n\n\n\n\n\n");
} 
```

然后，当您想清除控制台时，只需**在 NSLog 之前添加一个断点，条件**如下：

*   条件：**1 > 0**
*   行动：调试器命令`expr (int) clear_console()`
*   选项：**评估后自动继续**检查它以跳过暂停。

![在此处输入图像描述](../Images/75a8f004bc9b6c026484e5a7deb638cd.png)

使用 Xcode 4.3.2 和 lldb 测试。

**上一个答案：**

AFAIK，不，没有。

万一您还没有这样做，您可以创建自定义宏来格式化输出以突出显示您想要的内容。

像这样定义宏：

```
#define CLEAR(...)          NSLog(@"\n\n\n\n\n\n") /* enough \n to "clear" the console */
#define WTF(...)            CLEAR();NSLog(@"!!!!!!!!!!!!!!");NSLog(__VA_ARGS__)
#define TRACE(__message__)  NSLog(@">>>>>>>>>>>>>>> %@ <<<<<<<<<<<<<<<<<<<", __message__) 
```

然后：

```
WTF(@"This should't be here object: %@", theObject);
...
TRACE(@"Start Encoding");
... 
```

这不是你想要的，但它几乎可以解决问题。您最终会得到您自己的一组带有自定义前缀的宏，这些自定义前缀可以在控制台输出中轻松扫描。

# c++ - signal() 覆盖其他信号处理程序

> ID：10701713
> 
> 赞同：7
> 
> 时间：2012-05-22T12:04:47.680
> 
> 标签：c++, dll, sigint

该函数是否会`signal()`覆盖进程可能设置的其他信号调用？即，如果一个`SIGINT`处理程序已由一个进程设置，并且一个 DLL 调用`signal(SIGINT,xxx)`来处理它自己的终止代码，那么原始`SIGINT`处理程序会被禁用吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T12:18:45.003

`signal()`来电：

1.  安装您指定的处理程序作为新的信号处理程序，并且
2.  告诉你旧的处理程序是什么。

将调用新的处理程序而不是旧的处理程序。如果要链接它们，则需要执行以下操作：

```
 typedef void (*Handler)(int signum);

    static Handler old_int_handler = SIG_IGN;

    static void int_handler(int signum)    /* New signal handler */
    {
        /* ...do your signal handling... */
        if (old_int_handler != SIG_IGN && old_int_handler != SIG_DFL)
            (*old_int_handler)(signum);
    }

    static void set_int_handler(void)  /* Install new handler */
    {
        Handler old = signal(SIGINT, SIG_IGN);
        if (old != SIG_IGN)
        {
            old_int_handler = old;
            signal(SIGINT, int_handler);
        }
    }

    static void rst_int_handler(void)    /* Restore original handler */
    {
        Handler old = signal(SIGINT, SIG_IGN);
        if (old == int_handler)
        {
            signal(SIGINT, old_int_handler);
            old_int_handler = SIG_IGN;
        }
    }

    void another_function()
    {
        /* ... */
        set_int_handler();
        /* ... */
        rst_int_handler();
        /* ... */
    } 
```

如果中断被忽略，这会使它们被忽略。如果中断由用户定义的中断处理程序处理，那么这将调用您的信号处理代码和原始信号处理代码。

请注意，[Christian.K](https://stackoverflow.com/users/21567/christian-k)关于不在DLL（共享库）中处理信号的[建议](https://stackoverflow.com/a/10701889/15168)也是相关且有效的。上面的描述假设您决定忽略该建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:17:09.093

这不是对您问题的“字面”答案，而是建议：您不应该在 DLL 中执行此操作。

对于使用 DLL 的应用程序来说，这是出乎意料的并且经常令人讨厌。DLL 应该（通常）是“被动的”并且只提供应用程序调用的函数。

因此，宁愿从您的 DLL 中提供一个公共函数，应用程序需要调用它，例如`MyDllCleanup()`. 然后让应用程序决定它如何调用该函数（通过信号处理程序或其他）。顺便说一句，初始化也是如此：而不是依赖`DllMain`（或`_init`/`_fini`在`libdl`UNIX 上）提供显式函数供应用程序调用。

# jquery - 如何在模板内循环 jQote2 中的数据？

> ID：10701714
> 
> 赞同：1
> 
> 时间：2012-05-22T12:04:57.760
> 
> 标签：jquery, jquery-plugins

我想开始使用 jQote2 进行 javascript 模板，我已经阅读了 api 的官方文档，但我仍然不知道你如何循环遍历我的模板中的数据？

我的js代码：

```
$(function() {
    var data, tmpl, html;

    data = {
        header: "Header for template",
        list:   ["Item 1", "Item 2", "Item 3"]
    }

    $.ajax({
        url: 'js_templates/first.html',
        async: false
    }).done(function(d){
        tmpl = d;
    });

    html = $.jqote(tmpl, data);

    console.log(html);

}); 
```

我的模板 first.html：

```
<div>
    <h1><%=this.header%></h1>
    // I want to loop trough list here??
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:12:36.040

好吧，我不知道您的 Json 数据是什么样的，但这是我的一个 jqote 模板文件中的一个片段，它循环并呈现表行：

```
<table>
    <% for(d=0;d<this.Vehicles.length;d++) { %>
        <tr>
            <td><%= this.Vehicles[d].Info.Year %></td>
            <td><%= this.Vehicles[d].Info.Make %></td>
            <td><%= this.Vehicles[d].Info.Model %></td>
            <td><%= this.Vehicles[d].Info.Vin.Number %></td>
        </tr>
    <% } %>
</table> 
```

# c# - 使用 .NET 正则表达式查找括号之间的字符

> ID：10701722
> 
> 赞同：1
> 
> 时间：2012-05-22T12:05:34.153
> 
> 标签：c#, regex

如何使用*Regex*`98`从表达式中获取信息？`$RetailTransaction.IsContainsTender(98)`

 ** * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T12:08:01.510

像往常一样，在这种情况下，您应该首先问自己数据会是什么样子（有多个示例）以及对它的期望。

最简单的路线可能只是正则表达式

```
\d+ 
```

但是，如果该行中的数字多于您想要的数字，这将失败。

您可以考虑括号：

```
(?<=\()\d+(?=\)) 
```

这使用后向和前瞻断言，以便数字是完全匹配的（而不是隐藏在捕获组中）。

您还可以使用其他上下文，例如方法名称：

```
(?<=IsContainsTender\()\d+(?=\)) 
```

所有这些都可以使正则表达式对可能意外匹配的不需要的数据更加健壮，但这是一个只有你可以做出的权衡，因为出于某种原因，我在这里只有一个示例可以使用。如果您只需要匹配 a `98`, then`98`就是一个有效的正则表达式，并且可以按照上面的示例执行您想要的操作。因此，我请求您应该更加仔细地考虑您*想要*匹配的案例以及可能会给您带来麻烦的过于简单的方法的案例。*

# java - 实例与对象

> ID：10701727
> 
> 赞同：2
> 
> 时间：2012-05-22T12:06:11.403
> 
> 标签：java, class, object, instance

当我们在java中有基类和子类，并且我们实例化子类时，我们得到一个实例还是两个实例？如果我们得到两个对象，我们得到多少个实例？一个实例包含基类和子类的两个对象还是两个单独的实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:08:50.480

如果你实例化一个子类，你只会得到一个对象/实例。这个单一实例将包含子类的所有字段（包括由其父类定义的字段）。

请记住，子类意味着您正在定义一个从现有父类*派生的新类，即它继承了这些定义。*因此，如果父类声明了一个名为 的字段`id`，则子类也将有一个名为 的字段`id`，因此该子类的实例化将包含一个`id`字段。该字段在父类中*声明*，但它确实属于子类。

如果实例化子类，则不会实例化父类。不存在其运行时类是父类的对象。

（我不确定您的问题中“对象”和“实例”之间的区别是什么。您以暗示它们不同的方式使用它们，但通常它们的含义完全相同。对象是实例特定类别的。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T12:10:51.940

您会得到一个属于两个类的单个实例 - 基类和子类。

试着用这个例子来理解它：有一个类 Mammal 和一个类 Human。你属于他们俩——尽管如此，你只有一个实例。如果房间里有两个人，您将拥有两个类的两个实例！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T12:10:03.790

Instance == object ...两者都是相同的，只是两个不同的名称。如果您创建一个对象（可能是子类），您将获得一个对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T12:22:18.933

> 那么实例和对象之间的逻辑区别是什么？

在您使用这些词的上下文中，没有区别。（类的）实例是对象，反之亦然。

但是，在更广泛的上下文中，（类型的）实例不一定是对象 - 它取决于类型。例如，您*可以*说这`42`是该`int`类型的“实例”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T12:23:19.483

> 当我们在java中有基类和子类，并且我们实例化子类时，我们得到一个实例还是两个实例？

我们得到一个实例，因为每个 Java 类实例都包含在一个对象中。

> 如果我们得到两个对象，我们得到多少个实例？

术语“实例”是对象的同义词。说一个实例只是说一个对象的另一种方式。

> 一个实例包含基类和子类的两个对象还是两个单独的实例？

不会。Java 编译器创建的类字节码包含基本功能和扩展功能，因此实例化该类会生成单个对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-14T00:35:57.797

```
new classA();  //Here you create an instance of a class
classA ob      //create object named "ob" and datatype "classA" 
```

现在我们将实例分配给对象

```
 classA ob = new classA(); 
```

喜欢

```
int num = 10 
```

# forms - Symfony2 表单小部件容器属性

> ID：10701728
> 
> 赞同：3
> 
> 时间：2012-05-22T12:06:12.060
> 
> 标签：forms, symfony, attributes, widget

我需要为小部件容器设置一个类，但不知道 Symfony 如何将属性传递给“widget_container_attributes”块

小部件容器模板：

```
{% block form_widget %}
{% spaceless %}
    <div {{ block('widget_container_attributes') }}>
        {{ block('field_rows') }}
        {{ form_rest(form) }}
    </div>
{% endspaceless %}
{% endblock form_widget %} 
```

示例结果：

```
<div class="MY-CLASS">
    <label class="required" for="page_title">Title</label>
    <input type="text" value="Next subpage" maxlength="500" required="required" name="page[title]" id="page_title">
</div> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:30:04.963

尝试

```
 {% extends 'form_div_layout.html.twig' %}

    {% block field_rows %}
    {% spaceless %}
        {% for child in form %}
        {{ form_row(child) }}
    {% endfor %}
    {% endspaceless %}
    {% endblock field_rows %}

    {% block field_row %}
    {% spaceless %}
        <div class="myclass">
          {{ form_label(form, label|trans) }}
          {{ form_widget(form) }}
          {{ form_errors(form) }}                            
       </div>
    {% endspaceless %}
    {% endblock field_row %} 
```

# sql - 查找早于指定日期的最新值

> ID：10701730
> 
> 赞同：2
> 
> 时间：2012-05-22T12:06:26.070
> 
> 标签：sql, sql-server-2008, tsql

我有汇率表，其中有多个日期明智的汇率记录。

```
Date           Rate
17/05/2012     5
23/05/2012     6
27/05/2012     7 
```

现在我想要在传递任何日期时进行评分，例如，如果我通过 20/05/2012 那么评分 5 应该返回，因为 20/05/2012 已在 2012 年 5 月 17 日至 23 日的日期范围内过去。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:08:25.717

假设您有正确的数据类型（也就是说，不是 varchar 来存储日期值......）

```
SELECT TOP 1
  Rate
FROM
  MyTable
WHERE
  DateColumn <= '20120520'
ORDER BY
  DateColumn DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:08:33.040

像这样的东西会起作用：

```
select Rate from tablename where Date in (
  select max(Date) as Date
  from tablename
  where Date <= convert(datetime, '20/05/2012', 103)
  ) 
```

# android - Android 和 ListView 的滚动非常糟糕和缓慢

> ID：10701743
> 
> 赞同：0
> 
> 时间：2012-05-22T12:07:46.120
> 
> 标签：android, performance, listview

我有一个自定义的列表视图。在这个列表中，我有 15 个项目。当我尝试滚动时，滚动非常缓慢且不流畅。

这是我的列表视图：

```
 <ListView
  android:id="@+id/AnnouncementsList"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:layout_marginTop="25dp"
  android:cacheColorHint="#00000000"
  android:fastScrollEnabled="true"
  android:scrollingCache="true"
  android:smoothScrollbar="true" 
  android:layout_marginLeft="5dp"
  android:layout_marginRight="5dp"/> 
```

这是我的列表适配器：

```
public class AnnouncementsListAdapter extends BaseAdapter {

private static ArrayList<NewsAnnouncements_Database> announcementsArrayList;

private LayoutInflater mInflater;

public AnnouncementsListAdapter(Context context, ArrayList<NewsAnnouncements_Database> searchResults) {
     announcementsArrayList = searchResults;
     mInflater = LayoutInflater.from(context);
 }

 public int getCount() {
  return announcementsArrayList.size();
 }

 public Object getItem(int position) {
  return announcementsArrayList.get(position);
 }

 public long getItemId(int position) {
  return position;
 }

 public View getView(int position, View convertView, ViewGroup parent) {
  ViewHolder holder;
  if (convertView == null) {     
       convertView = mInflater.inflate(R.layout.announcements_customisation, null);
       holder = new ViewHolder();
       holder.AnnouncementsTitle = (TextView) convertView.findViewById(R.id.AnnouncementsTitle);
       holder.AnnouncementsContent = (TextView) convertView.findViewById(R.id.AnnouncementsContent);
       convertView.setTag(holder);
  }
  else {
   holder = (ViewHolder) convertView.getTag();
  } 
  holder.AnnouncementsTitle.setText(Html.fromHtml(announcementsArrayList.get(position).getTitle()));
  holder.AnnouncementsContent.setText(Html.fromHtml(announcementsArrayList.get(position).getContent()));
  return convertView;
}

 static class ViewHolder {
  TextView AnnouncementsTitle;
  TextView AnnouncementsContent;
 } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:08:06.837

尝试在 XML 布局中删除 cacheColorHint 属性。

# php - PHP - 按名称在循环中取消设置变量

> ID：10701746
> 
> 赞同：0
> 
> 时间：2012-05-22T12:08:03.463
> 
> 标签：php

假设我声明了一些变量 - 但我不知道具体是哪个，我只有一个带有变量名的数组。

```
$variable_list = array('var1', 'var2', 'var3', 'var4'); 
```

我们继续并分配一些值。

```
foreach($variable_list as $var_name){
$$var_name = rand(100,1000);
} 
```

现在我想以类似的方式取消设置这些变量。不要从列表中删除它们，而是取消设置 ACTUAL 变量。

```
foreach($variable_list as $var_name){
unset($var_name);
} 
```

这不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T12:09:01.060

```
foreach($variable_list as $var_name){
unset($$var_name);
} 
```

[PHP 手册](http://php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:12:40.607

为什么要使用变量变量 ( `$$var_name`) 设置它们而不像那样取消设置它们？这应该有效：

```
foreach($variable_list as $var_name){
    unset($$var_name);
} 
```

但是，既然你说：

> 现在我想 [...] 不要从列表中删除它们，而是取消设置 ACTUAL 变量。

只需使用：

```
foreach($variable_list as $var_name){
    $$var_name = null;
} 
```

# java - 在 Spring IoC 中注入基于实体的类的正确方法是什么

> ID：10701758
> 
> 赞同：4
> 
> 时间：2012-05-22T12:08:44.243
> 
> 标签：java, spring, dependency-injection, inversion-of-control

请多多包涵：

我们有一个*Hibernate*和*Spring IoC*的设置，其中每个实体（`User`、`Customer`、`Account`、`Payment`、`Coupon`等）都有一堆“单例”接口和支持它的实现类。
例如：对于`Customer`：

```
@Entity
public class Customer extends BaseEntity {
  ...
  public name();
}

/* base API */
public interface Service {
  public create();
  public list();
  public find();
  public update();
  public delete();
}

/* specific API */
public interface CustomerService extends Service {
  public findByName();
}

/* specific implementation */
public class CustomerServiceImpl extends BaseService implements CustomerService {
  ...
} 
```

这种模式一直在继续（`CustomerManager`、`CustomerDataProvider`、`CustomerRenderer`等）。

最后，为了针对特定 API 的实例（例如`CustomerService.findByName()`）工作，一个静态全局持有者已经进化 - 这使得如下引用可用：

```
public class ContextHolder {
  private static AbstractApplicationContext appContext;

  public static final CustomerService getCustomerService() {
      return appContext.getBean(CustomerService.class);
  }
  //... omitting methods for each entity class X supporting class 
}

@Configuration
public class ServicesConfiguration {
  @Bean(name = "customerService")
  @Lazy(false)
  public CustomerService CustomerService() {
      return new CustomerServiceImpl();
  }
  //... omitting methods for each entity class X supporting class 
} 
```

## 所以，问题是：

**注入这些支持类的正确方法是什么**，例如`CustomerService`，**给定一个实体实例**，用于以下用途：

1.  我有一个特定的实体（例如 a `Customer`），并且想要获得服务并调用特定的 API（例如`findByName()`）？
2.  我有一个实体（不关心具体是哪一个），并且想调用一个通用 API（例如`find()`）

**所有这一切，同时避免了全局静态引用**（因此，在例如测试中交换实现，并简化调用者代码）。

因此，如果我有实体实例，我可以获得任何支持类

```
BaseEntity entity = ... // not injected
Iservice service = ...// should be injected
service.create(entity); 
```

或者，获取给定实体类型所需的所有支持类

```
/* specific implementation */
public class CustomerServiceImpl extends BaseService implements CustomerService {
  // inject specific supporting classes
  @Autowire CustomerManager manager;
  @Autowire CustomerDataProvider provider; 
  @Autowire CustomerRenderer renderer; 
  @Autowire CustomerHelper helper; 
  ...
} 
```

并且，在其他情况下稍微更改配置

```
// how to configure Spring to inject this double?
Class CustomerManagerDouble extends CustomerManager {...}

@Autowired @Test public void testSpecificAPI(CustomerService service) {
  service.doSomethingSpecific();
  assert ((CustomerManagerDouble) service.getManager()).checkSomething();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T21:02:16.173

我不完全确定你在问什么，但我*认为*你想用服务注入实体对象（由 Hibernate 创建），对吧？

如果是这种情况，请使用 Spring 3.1 文档中描述的 @Configurable 注解：

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-atconfigurable](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-atconfigurable)

请注意，您必须使用 AspectJ 来编织实体类（加载时或编译时）才能使其工作。

# javascript - reCAPTCHA 自定义表单参数名称

> ID：10701760
> 
> 赞同：12
> 
> 时间：2012-05-22T12:08:50.830
> 
> 标签：javascript, forms, http, captcha, recaptcha

是否可以自定义 reCAPTCHA 表单参数（**recaptcha_challenge_field**和**recaptcha_response_field**）以便以不同方式调用它们？

基本上，我希望将表单参数**recaptcha_challenge_field**称为**captchaId**，并将**recaptcha_response_field**称为**captchaUserResponse**。

我希望它们重命名，以便我可以**抽象验证码实现**......当请求到达时

> 发布 /mysite/userSignup

我不想打扰验证码的实现（reCaptcha，或者将来的其他东西）——为正确的验证码实现提取正确的参数，我想统一这些参数名称。

**现在我的请求如下所示**：

```
POST /mysite/userSignup HTTP/1.1
Host: localhost:80
Connection: keep-alive
Content-Length: 416
Cache-Control: max-age=0
Origin: http://localhost:80
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5
Content-Type: application/x-www-form-urlencoded
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Referer: http://localhost:8080/mysite/signup/form.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8,hr;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

email:testUser%40gmail.com
username:testUser
password:test
password2:test
forename:Test
surname:User
recaptcha_challenge_field:<google generated challange>
recaptcha_response_field:<user typed captcha answer>
submit:Submit 
```

**但我希望它看起来像这样：**

```
POST /mysite/userSignup HTTP/1.1
Host: localhost:80
Connection: keep-alive
Content-Length: 416
Cache-Control: max-age=0
Origin: http://localhost:80
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5
Content-Type: application/x-www-form-urlencoded
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Referer: http://localhost:8080/mysite/signup/form.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8,hr;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

email:testUser%40gmail.com
username:testUser
password:test
password2:test
forename:Test
surname:User
captchaId:<google generated challange>
captchaUserResponse:<user typed captcha answer>
submit:Submit 
```

一种优雅的方法是指定这些表单参数名称，如下所示：

```
<script>
   var RecaptchaOptions = {
      recaptcha_challenge_field_formparam_name : 'captchaId',
      recaptcha_response_field_formparam_name: 'captchaUserResponse'
   };
</script> 
```

* * *

如果这是不可能的，你建议什么解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:05:05.637

不需要额外的字段。您所要做的就是用 id 标识表单元素并在提交之前更改它们的相对名称。

假设您有以下表格：

```
<div id="captcha" class="item recaptcha">
...
<textarea id=custom1 name="recaptcha_challenge_field" rows="3" cols="40"></textarea>
<input id=custom2 name="recaptcha_response_field" value="manual_challenge" type="hidden" />
<input type="submit" name="submit" value="Submit">
</div> 
```

您可以使用更改名称

```
document.captcha.custom1.name='captchaId'
document.captcha.custom2.name='captchaUserResponse' 
```

这些更改可以使用 onclick 事件直接或间接（调用另一个方法）包含在提交按钮中。

因此，对于直接更改，您的提交将是：

```
<input type="submit" name="submit" value="Submit" onclick="document.captcha.custom1.name='captchaId';document.captcha.custom2.name='captchaUserResponse';return true"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T15:16:02.860

由于 OP 尚未接受任何答案，因此我提供了这个答案。这正是 OP 在这篇文章的评论中寻找的确切内容：[答案之一](https://stackoverflow.com/a/10947629/1055628)

创建一个 PHP 脚本并将其放在某处。我假设创建页面的 URI 是`DESIRED_URI`. 将此代码放入其中：

```
<?php
    header("Content-type: text/javascript");
    /*
    * These are the script parameters
    * You can change them by including desired ones in script's URL (as GET params)
    * challenge_field_original: original name of captcha challenge field
    * response_field_original: original name of captcha response field
    * to_challenge_field: the name of the challenge field you want
    * to_response_field: the name of the response field you want
    */
    $params = array(
        /*
        * Defining the defaults of the parameters
        */
        "challenge_field_original" => "recaptcha_challenge_field",
        "response_field_original" => "recaptcha_response_field",
        "to_challenge_field" => "captchaId",
        "to_response_field" => "captchaUserResponse",
    );
    /*
    * Checking for passed GET params to re-fill the parameters with non-default ones (if any)
    */
    if(isset($_GET['challenge']) && $_GET['challenge'] != "") {
        $params["to_challenge_field"] = $_GET['challenge'];
    }
    if(isset($_GET['response']) && $_GET['response'] != "") {
        $params["to_response_field"] = $_GET['response'];
    }
    if(isset($_GET['challenge_original']) && $_GET['challenge_original'] != "") {
        $params["challenge_field_original"] = $_GET['challenge_original'];
    }
    if(isset($_GET['response_original']) && $_GET['response_original'] != "") {
        $params["response_field_original"] = $_GET['response_original'];
    }
?>
/*
* I'm going to find the index of this script tag in the whole document
* So I can find its previous sibling node (the captcha form node)
*/
var scripts = document.getElementsByTagName( 'script' );
var thisScriptTag = scripts[ scripts.length - 1 ];

//now we have the index, good, I'm going to find its previous sibling node
var targetFormTag = (function(element) {
    if(typeof(element.previousElementSibling) == "undefined") {
        var p = element;
        do p = p.previousSibling;
        while (p && p.nodeType != 1);
        return p;
    } else {
        return element.previousElementSibling;
    }
})(thisScriptTag);

//Changing names...
(function(targetForm) {
    var a = targetForm.getElementsByTagName('input');
    var attr = '';
    var toAttr = '';
    for (var i in a) {
        try {
            attr = a[i].getAttribute('name')
        } catch(e) {
            continue;
        }
        switch(attr) {
            case '<?php echo $params["challenge_field_original"]; ?>':
            {toAttr='<?php echo $params["to_challenge_field"]; ?>';break;}
            case '<?php echo $params["response_field_original"]; ?>':
            {toAttr='<?php echo $params["to_response_field"]; ?>';break;}
        }
        a[i].setAttribute('name',toAttr);
    }
})(targetFormTag) 
```

***用法：***

就像***在表单后面***包含脚本一样简单（！这非常重要！）。像这样：

```
<form><!--form elements--></form>
<script type="text/javascript" src="DESIRED_URI"></script> 
```

您可以在一段时间后更改字段的名称，为此，请阅读代码文档。

***旁注：***

*   该脚本可笑地跨浏览器（IE5+、Chrome、FF、Android）
*   您可以将它用于任何验证码脚本，只需在脚本的`src`.
*   该脚本**尝试**更改字段，失败时不会引发任何错误

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T05:18:05.553

这应该是不可能的。可能的解决方案 AFAIU 是添加新的 DOM 元素，这些元素在表单提交之前复制原始元素的值，例如：

```
<!-- the HTML part -->
<input type="hidden" id="captchaId">
<input type="hidden" id="captchaUserResponse">

// the JavaScript (jQuery) part
$('form').submit(function(){
  $('input#captchaId').
    val($('input#recaptcha_response_field').val());
  $('input#captchaUserResponse').
    val($('input#recaptcha_challenge_field').val());
  return true;
}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-09T11:08:52.453

给你，我和你有同样的情况，这就是我的做法：

**简短版：**
在这里，将此属性添加到您的表单中，这就是您所需要的：

**EDIT2 - 添加纯 Javascript 代码**：

*纯 Javascript 方法*
在 IE8、FF12 和 Chrome 上测试：

```
onsubmit="javascript:(function(p){var a=p.getElementsByTagName('input');var attr='';var toAttr='';for (var i in a){try {attr=a[i].getAttribute('name')} catch(e) {continue;}switch(attr){case 'recaptcha_challenge_field':{toAttr='captchaId';break;}case 'recaptcha_response_field':{toAttr='captchaUserResponse';break;}}a[i].setAttribute('name',toAttr);}p.submit();})(this)" 
```

*jQuery方法：*

```
onsubmit="javascript:(function(p){var f=$(p);$('input[name=recaptcha_challenge_field]',f).attr('name','captchaId');$('input[name=recaptcha_response_field]',f).attr('name','captchaUserResponse');f.submit();})(this)" 
```

例如：

```
<form method="post" action="verify.php" onsubmit="javascript:(function(p){var f=$(p);$('input[name=recaptcha_challenge_field]',f).attr('name','captchaId');$('input[name=recaptcha_response_field]',f).attr('name','captchaUserResponse');f.submit();})(this)">
    <?php
    require_once('recaptchalib.php');
    $publickey = "your_public_key"; // you got this from the signup page
    echo recaptcha_get_html($publickey);
    ?>
    <input type="submit" />
</form> 
```

* * *

**长版：**
这是我正在做的事情：

**1-**这是负责替换输入名称的实际javascript函数，这里没什么特别的：

```
function(param){
    var form = $(param);
    $('input[name=recaptcha_challenge_field]',form).attr('name','captchaId');
    $('input[name=recaptcha_response_field]',form).attr('name','captchaUserResponse');
    form.submit();
} 
```

**2-**我将把提到的函数设为匿名函数，这样我就可以通过内联 HTML 事件（`onsubmit`事件）调用它：

```
(function(param){...function code...})(this) 
```

*   注意到了`(this)`吗？在我们的匿名函数结束时？这样，我可以将表单的句柄传递给函数。

**3-**由于您需要尽可能少的客户端修改（或您所说的干预？），我将从 HTML 内联事件处理程序调用此匿名函数。在我们的例子中，最好的处理程序是`onsubmit`.

好吧，老实说，我自己很喜欢这个解决方案，希望它对你也有用：D

**编辑1：**

顺便说一句，我没有注意到你的评论，如果你想这样做的话：

```
<form><!--blah blah--></form>
<script type="text/js" src="somewhere"></script> 
```

这些是缺点：

1.  您正在添加一个额外的 HTTP 请求！为什么？
2.  你使它与表单的 load-complete 事件异步，这使得它不准确
3.  你有没有想过**也许**你的网络服务器在那个特定的时间拒绝了你客户的请求？那么会发生什么？它破坏了您的服务器端脚本！
4.  如果您在服务器端打印表单，为什么不在服务器端进行这些更改？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T23:40:35.583

您需要一种处理验证码的通用方式，因此，如果您决定使用 reCAPTCHA 以外的其他方法，您可以以同样的方式处理它。我觉得你的想法很好，但是你抽象的太深了。

理想情况下，您需要一些黑盒验证码系统，它只是做它的事情，而您不必担心盒子里有哪个验证码插件。您唯一需要摆脱该框的就是用户输入的内容是否正确。

如果您试图指示黑匣子如何进行此项检查，那么您就是在搞砸黑匣子。此外，如果您最终切换到不同的验证码插件，您也将不得不使用该插件。

由于这些原因，我建议你只抽象出一件事：一个`is_human_user`方法（或任何你想调用的方法）。您需要做的就是为您决定使用的每个验证码插件实现此方法。对于 reCAPTCHA，听起来这个方法会返回`recaptcha_challenge_field == recaptcha_response_field`. 然后，检查只是调用`is_human_user`什么，并且对实现是什么视而不见。

如果这不是您正在寻找的答案，我很抱歉，但退后一步并提醒自己为什么会陷入困境总是很重要的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-11T23:53:49.393

我相信你不能抽象太多的验证码实现，因为每个验证码都使用它自己的验证功能，无论如何更改客户端验证码字段的名称这不是最好的解决方案，因为如果客户端没有启用 JavaScript它根本行不通。

考虑到这一点，我认为抽象字段名称的最佳方法是在服务器端使用变量，在您收到表单的帖子后，您可以执行以下操作：

```
$captchaId = $_POST["recaptcha_challenge_field"];
$captchaUserResponse = $_POST["recaptcha_response_field"]; 
```

然后将它传递给一个通用的验证函数，如下所示：

```
recaptcha_generic_check ("PrivateKey", $_SERVER["REMOTE_ADDR"], $captchaId, $captchaUserResponse); 
```

理想情况下，这样您只需要更改帖子中收到的字段的名称（当然还有功能），一切都将保持不变。

# jquery - iPad 上的 jQuery 工具验证器消息位置

> ID：10701764
> 
> 赞同：1
> 
> 时间：2012-05-22T12:09:00.257
> 
> 标签：jquery, forms, ipad, validation

我正在使用 jQuery 工具验证器来验证我网站上的表单，在 Firefox、Chrome 和 IE 中一切正常。我也在 iPhone 上测试过，一切正常，直到我在 iPad 上测试！

当您单击提交时，会出现错误工具提示，但它似乎位于页面顶部，并且与表单元素无关，就像在所有其他浏览器上一样！

我正在使用最新的完整版 jQuery Tools 1.2.7

有谁知道修复？

这是我的HTML...

```
 <form id="myform" action="/cgi-bin/mailer.pl" method="post">
    <fieldset>
      <h3>Enquire About This Holiday</h3>
      <p>Please fill in the form below, items marked with a * require completing.</p>
      <p>
        <label><strong>Full Name *</strong></label>
        <input name="name" id="name" type="text" required="required" class="full" pattern="[a-zA-Z ]{3,}" data-message="Error Please Complete" maxlength="30" autocomplete="off"/>
      </p>
      <p>
        <label><strong>Telephone Number *</strong></label>
        <input name="telephone" id="telephone" type="tel" class="full" autocomplete="off"/>
      </p>
      <p>
        <label><strong>E-Mail Address *</strong></label>
        <input name="email" id="email" type="email" required="required" class="full" data-message="Error Please Complete" autocomplete="off" />
      </p>
      <p>
        <label><strong>Which date &amp; ship are you interested in?  *</strong></label>
        <input name="date" id="date" type="text" required="required" class="full" data-message="Error Please Complete" autocomplete="off" />
      </p>
      <p>
        <label><strong>If applicable which airport will you require?</strong></label>
        <input name="airport" id="airport" type="text" class="full" autocomplete="off" />
      </p>
      <p>
        <label><strong>Passengers *</strong></label>
        <input name="adults" id="adults" type="text" required="required" class="passengers" data-message="Error Please Complete" size="4" autocomplete="off" />
        Adults
        <input name="kids" id="kids" type="text" class="passengers" size="4" autocomplete="off" />
        Children
      </p>
      <p id="terms"> Please check this box if you do NOT wish to be added to our e-mail list
        <input type="checkbox" name="nomail" id="nomail" value="No" />
      </p>
      <button type="submit">Submit Details</button>
      <button type="reset">Reset</button>
          <input type="hidden" value="callback-thanks.phtml" name="redirect" />
          <input type="hidden" name="mailerid" value="7" />
          <input type="hidden" name="enquiry" id="enquiry" value="Lewis Test" />
          <input type="hidden" name="affiliate" id="affiliate" value="[INC:displayphoneno("143")]" />
    </fieldset>
  </form>
  <script>
        $("#myform").validator({ 
        position: 'center left',
        offset: [0, -151],
        });
  </script> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-31T10:10:14.303

jquerytools 错误跟踪器中已经存在问题

[https://github.com/jquerytools/jquerytools/issues/464](https://github.com/jquerytools/jquerytools/issues/464)

也许你会在那里找到更多帮助

# c++ - 使用具有多种对象类型的模板

> ID：10701767
> 
> 赞同：2
> 
> 时间：2012-05-22T12:09:12.743
> 
> 标签：c++

我需要编写一个容器模板类`<T, R>`，其中 T 是一个对象，R 可以是`vector<T*>`or `list<T*>`。我需要支持像 insert(T) size() 等常见操作...

我持有一个名为`T data`列表或向量的类成员。问题是，我如何编写代码，以便在运行时我知道从哪个操作调用`std::list`或`std::vector`？

例如，要获取容器中的第一个元素，我必须`data[0]`在向量情况和`data.front()`列表情况下调用。我应该只使用`typeid`运算符吗？

```
if (typeid(R) ==  typeid(vector<T*>))
  then ...
else if (typeid(R) == typeid(list<T*>))
 then ... 
```

或者，还有更好的方法 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:12:05.917

您应该使用模板专业化。[你可以在这里](http://www.cprogramming.com/tutorial/template_specialization.html)阅读一篇关于它的好文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:13:19.560

您可以使用迭代器——它们是 STL 中的标准习惯用法。用于`begin()`获取指向集合开头的迭代器并`end()`获取结尾（更准确地说，指向集合中最后一个元素“之后”的迭代器）。您还可以同时使用`push_back()`和`list<>`将`vector<>`元素添加到集合的末尾，将`insert()`元素添加到特定位置以及`erase`从集合中删除元素。查看参考（[矢量](http://www.cplusplus.com/reference/stl/vector/)、[列表](http://www.cplusplus.com/reference/stl/list/)）以了解更常见的功能。

这个想法是模板中的方法调用直到实例化点才被检查（特别是直到模板函数的调用），因此上述调用将绑定到您在模板中指定的确切集合类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T12:14:22.150

如果集合是如此有限，您可以执行以下操作：

```
#include <vector>
#include <list>
using namespace std;

template < typename T, typename V >
class X;

class XImpl {};

template < typename T >
class X< T, vector<T*> > : XImpl {};

template < typename T >
class X< T, list<T*> > : XImpl {};

int main()
{
    X< int,vector<int*> > a;
    X< double, list<double*> > b;
    X<int, int> c; // error
} 
```

并将您的实现放入`XImpl`.

编辑： XImpl 也很可能被模板化。这段代码只是演示了对除向量或列表之外的任何其他容器的防护。当然，还要提防像`X<int, vector<double*> >`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T12:14:30.887

答案是 mfontanini 给出的，使用专业化。不过，对于您的具体示例，vector 也支持 front ，并且 vector 和 list 尽可能具有相同的功能

# matlab - bwmorph 分支点如何工作？

> ID：10701777
> 
> 赞同：5
> 
> 时间：2012-05-22T12:09:49.030
> 
> 标签：matlab, image-processing, pixel

我正在使用图像处理工具箱在 MATLAB 中编写一段代码，其中我使用 Skel=bwmorph(BM,'skel') 来获取河流的骨架。我想使用 BP=bwmorph(Skel,'branchpoints') 来获取汇合点和支流存在的点。每当骨架看起来像时，我都会在 BP 中得到很多误报

```
oQo
Q
o 
```

它将 Q 像素与实际的预期分支点一起标记为分支点。有很多这样的误报。

我注意到一个真正的分支点作为一个孤立的像素出现在 BP 中，而 fals 分支点总是成对形成。

**谁能告诉我分支点算法如何找到这些点？** 如果我知道这一点，我可以满意的是，误报是成对出现的，而真正的肯定是单独的，而不是幸运的巧合，这是有实际原因的。

我有一种感觉，它着眼于像素周围的 8 连接，但我认为这还不是全部。

为了澄清，我标记了输出的裁剪图像。它给出的积极因素以红色显示。可以看出，这些像素中只有一个实际上是一个分支点。我想知道该算法是如何工作的，以便我可以给出一个逻辑上的原因来解释为什么误报成对出现（如果它们确实如此的话）。

[图片](http://i.imgur.com/w5udH.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:24:41.587

您的像素不是最小（8-）连接，尝试使用

```
Thin = bwmorph(Skel,'thin');
BP = bwmorph(Thin,'branchpoints'); 
```

去除不必要的像素。（您也可以使用薄而不是骨架）。

如果至少 3 个像素（不包括中心）是“1”，我认为分支点的基本算法会查看 3,3 个邻域像素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T13:39:38.713

```
BW = (rgb2gray(imread('w5udH.jpg')) > 50);
[i,j] = ind2sub(size(BW), find(bwmorph(bwmorph(BW,'thin',Inf),'branchpoint') == 1));
imshow(BW); hold on; plot(j,i,'rx'); 
```

（这里上传的图片有一些奇怪的伪影）

![在此处输入图像描述](../Images/485682b663679f6a9c6a3965cf2f471d.png)

# javascript - Javascript 中的完整 url 共享点项目

> ID：10701778
> 
> 赞同：3
> 
> 时间：2012-05-22T12:09:49.470
> 
> 标签：javascript, sharepoint

我试图在 sharepoint 中获取项目的 ContentTypeId 以获取项目的完整 url 以获取它的二进制文件，然后将其发送到另一个平台。

所以在这里我把这段代码放在 element.xml 中以获取我正在选择的项目的列表 ID 和文档 ID，然后我将它们发送到 Sharepoint 对话框中的 ASPX 页面以定义项目的目标，然后在此之后在回发中，流式传输二进制文件并将其发送到另一个平台。问题是：要获取我的项目的完整 url，我需要 ListId、ItemId 和 ContentTypeId。因为我在这里找到了流式传输二进制文件的代码： [如何以编程方式从共享点文档库下载文件](https://stackoverflow.com/questions/6608317/how-to-programatically-download-files-from-sharepoint-document-library)

我需要我的物品的完整网址。

任何的想法？

谢谢

```
var iddocs ='';
var listId ='';
function geturl()
{
  var context = SP.ClientContext.get_current();
  this.web = context.get_web();
  listId = SP.ListOperation.Selection.getSelectedList(); 
  var list = this.web.get_lists().getById(listId);
  var ok = false;
  try
  {
    if ( SP.ListOperation.Selection.getSelectedItems(context) !== false)    
    {
      var items = SP.ListOperation.Selection.getSelectedItems(context);
      var url='listId:'+listId+ ' Number of selected items: ' + items.length ;
      var i = 0;
      if(items.length==0)
      {
      }else{
        while( i != items.length )
        {
          url += ' Doc' + i + ': ' + items[i].id;
          if(i>0){iddocs += '-'};
          iddocs += items[i].id;
          i++;
        };
        ok = true;
        alert(url+' Id of clicked item:'+{ItemId});
        };
    };
  }
  catch(err)
  {
  };
return ok;
};        
function OpenDialog(pidliste) {
    var options = SP.UI.$create_DialogOptions();
    options.width = 600;
    options.height = 600;
    options.title = 'Envoyer vers Nuxeo';
    options.url ='/_Layouts/SPTest.CustomMenuItem/index.aspx?click={ItemId}';
    if(pidliste){options.url += '&amp;ids='+pidliste +'-'+ iddocs;};
    options.dialogReturnValueCallback = Function.createDelegate(null, CloseCallback);
    SP.UI.ModalDialog.showModalDialog(options);
}
function CloseCallback(result, target) {
    if (result == SP.UI.DialogResult.OK) {
    }
    if (result == SP.UI.DialogResult.cancel) {
        SP.UI.Notify.addNotification('Opération canceled', false, '', null);
    }
}
if(geturl())
{
    OpenDialog(listId);
}else{
    alert('Please select an item');
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:50:01.437

我找到了解决方案。实际上，可以通过以下方式访问项目：

```
{SiteUrl}+{ItemUrl} 
```

下载功能链接在我的第一篇文章中。但它不适用于多个项目，使用此方法您只能访问您选择的项目的属性。

您必须注意，如果您想访问 SP 文件，您必须通过以下方式设置您的 request.credential：

```
request.Credentials = System.Net.CredentialCache.DefaultCredentials; 
```

这将采用您正在使用的当前凭据。

希望能帮助到你。

# facebook-graph-api - 从我的网站中的用户那里获取电子邮件

> ID：10701787
> 
> 赞同：0
> 
> 时间：2012-05-22T12:10:23.023
> 
> 标签：facebook-graph-api, oauth

我需要帮助才能从我的网站上的用户那里获取电子邮件。我无法在 OAuth 对话框中更改权限。

我尝试在经过身份验证的推荐选项和用户和朋友权限中请求电子邮件权限，但是当我单击预览当前对话框时，我只能获得用户的基本信息。

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:48:33.303

首先，你使用什么语言，或者什么框架？`scope`当您检索 oAuth 2.0 访问令牌时，您是否将权限作为逗号分隔项的数组传递给URL 请求参数？它应该如下所示：

```
https://www.facebook.com/dialog/oauth?client_id=1657658326532836257&redirect_uri=https://www.google.com/&response_type=token&scope=publish_stream+user_about_me+user_activities+user_birthday+user_checkins+user_educa 
```

您调用哪个 URL 来检索电子邮件地址？你应该能够使用：

```
https://graph.facebook.com/me 
```

JSON 字段名称很简单`email`。

# ios - 像轮子动画一样旋转图像，并在随机位置停止

> ID：10701788
> 
> 赞同：-1
> 
> 时间：2012-05-22T12:10:28.157
> 
> 标签：ios, objective-c, animation, uiimageview

我正在创建一个游戏，其中骰子动作显示在一个圆圈中。当用户单击轮子时，它会旋转并停在随机位置。我搜索并找到了一些我尝试实现的代码，例如：-

```
 [UIView beginAnimations:@"RotationAnimation" context:nil];
 CALayer *myLayer = diceCircle.layer;
    CABasicAnimation *fullRotationAnimation;
    fullRotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
    fullRotationAnimation .fromValue = [NSNumber numberWithFloat:0];
   // fullRotationAnimation.toValue = [NSNumber numberWithFloat:((360*M_PI)/180)];
    fullRotationAnimation.toValue = [NSNumber numberWithFloat:angle];

    fullRotationAnimation.duration = 0.5;          // speed for the rotation. Smaller number is faster
    fullRotationAnimation.repeatCount = 1;  // number of times to spin. 1 = once
    [myLayer addAnimation:fullRotationAnimation forKey:@"360"];

    [UIView commitAnimations]; 
```

角度来自：-

```
-(IBAction)diceButtonClicked:(id)sender
{
    float angle=arc4random()%360;
    NSLog(@"%f",angle);
    float rad=radians(angle);
    NSLog(@"%f",rad);
    [self rotateDiceMethod:rad];
} 
```

但是轮子每次都停在同一个位置，也不总是动画。请建议我一些方法或示例代码来实现所需的功能。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-26T13:57:43.650

这是我用于同一任务的旧代码：

```
CGFloat randValue= arc4random() % 10;
self.angleRotate =  (randValue+30);
CABasicAnimation *spinAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
spinAnimation.fromValue = [NSNumber numberWithFloat:self.angle];
spinAnimation.toValue = [NSNumber numberWithFloat:self.angle+self.angleRotate];
spinAnimation.duration = 2.0f;
spinAnimation.cumulative = YES;
spinAnimation.additive = YES;
spinAnimation.removedOnCompletion = NO;
spinAnimation.delegate = self;
spinAnimation.timingFunction = [CAMediaTimingFunction
             functionWithName:kCAMediaTimingFunctionEaseOut];
spinAnimation.fillMode = kCAFillModeForwards;
[self.arrow.layer addAnimation:spinAnimation forKey:@"spinAnimation"]; 
```

当旋转停止

```
- (void)animationDidStop:(CAAnimation *)spinAnimation finished:(BOOL)flag{
    self.angle += self.angleRotate;
    while (self.angle >= M_PI*2.0) {
        self.angle -=  M_PI*2.0;
    }
    NSLog(@"angleRotate value is: %f", self.angleRotate);
    NSLog(@"angle value is: %f", self.angle);
    self.angleRotate = 0;
} 
```

# pagination - Doctrine2：使用左连接/分页进行限制 - 最佳实践

> ID：10701792
> 
> 赞同：7
> 
> 时间：2012-05-22T12:10:46.267
> 
> 标签：pagination, doctrine-orm, subquery, database-performance, query-builder

我有一个大查询（在我的查询生成器中）和很多左连接。所以我得到带有评论和标签等的文章。假设我有以下 dql：

```
$dql = 'SELECT blogpost, comment, tags 
FROM BlogPost blogpost 
LEFT JOIN blogpost.comments comments
LEFT JOIN blogpost.tags tags'; 
```

现在假设我的数据库有 100 多篇博文，但我只想要前 10 篇，但要包含这 10 篇的所有评论及其所有标签（如果存在）。如果我使用 setMaxResults 它会限制行数。所以我可能会收到前两个帖子，但最后一个缺少一些评论或标签。所以以下不起作用。

```
$result = $em->createQuery($dql)->setMaxResults(15)->getResult(); 
```

使用doctrine2.2附带的几乎没有记录的[分页](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/pagination.html)解决方案对我来说也不是很有效，因为它太慢了，我也可以加载所有数据。

我尝试了[Stackoverflow 文章](https://stackoverflow.com/q/10962802/532495)中的解决方案，但即使该文章仍然缺少最佳实践，并且提出的解决方案非常缓慢。

没有关于如何做到这一点的最佳实践吗？没有人在生产模式下使用 Doctrine2.2 吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T00:42:46.130

使用这样的查询获得正确的结果是有问题的。Doctrine 网站上有一个教程解释了这个问题。

[分页](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/pagination.html)

本教程更多的是关于分页而不是获得前 5 个结果，但总体思路是您需要执行“SELECT DISTINCT a.id FROM article a ... LIMIT 5”而不是正常的 SELECT。它比这更复杂一些，但该教程中的最后 2 点应该让您走上正轨。

**更新：**

这里的问题不是 Doctrine 或任何其他 ORM。问题完全在于数据库能够返回您要求的结果。这就是连接的工作方式。

如果您对查询进行 EXPLAIN，它将为您提供有关正在发生的事情的更深入的答案。将结果添加到您的初始问题中将是一个好主意。

基于分页文章中讨论的内容，您似乎需要至少 2 个查询才能获得所需的结果。将 DISTINCT 添加到查询中可能会显着减慢查询速度，但只有在其中有联接时才真正需要它。您可以编写另一个查询，只检索按创建日期排序的前 10 个帖子，而不需要连接。获得这 10 个帖子的 ID 后，使用您的联接执行另一个查询，然后将`WHERE blogpost.id IN (...) ORDER BY blogpost.created`. 这种方法应该更有效。

```
SELECT 
    bp 
FROM 
    Blogpost bp 
ORDER BY 
    bp.created DESC
LIMIT 10 
```

由于您在第一个查询中只关心 ID，因此您可以将 Doctrine 设置为使用 Scalar Hydration。

```
SELECT 
    bg 
FROM 
    Blogpost bp 
LEFT JOIN 
    bp.comments c 
LEFT JOIN 
    bp.tags t 
WHERE 
    bp.id IN (...) 
ORDER BY 
    bp.created DESC 
```

您也可以使用相关子查询在一个查询中执行此操作。子查询总是不好的神话是不正确的。有时它们比连接更快。您需要进行试验以找出最适合您的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T23:42:26.447

**根据已澄清的问题进行**编辑：****

 **您可以使用 FROM 子句中的子查询在本机 MySQL 中执行您想要的操作，如下所示：

```
SELECT * FROM 
 (SELECT * FROM articles ORDER BY date LIMIT 5) AS limited_articles, 
 comments, 
 tags 
WHERE
 limited_articles.article_id=comments.article_id
 limited_articles.article_id=tags.article_id 
```

据我所知，DQL 不支持这样的子查询，所以可以使用 NativeQuery 类。**

# javascript - 根据某一列中的值将颜色设置为 FlexiGrid 行

> ID：10701796
> 
> 赞同：2
> 
> 时间：2012-05-22T12:10:52.153
> 
> 标签：javascript, jquery, flexigrid

我有一个客户希望根据特定列中的值使 FlexiGrid 中的每一行具有不同的颜色。该列是状态列，状态将为“打开”或“关闭”。

这可能吗？如果是这样，有人可以给我一些关于如何去做的指导吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:29:47.693

```
function StyleRows(){
    $("tr").each(function() {
        var st = $(this).find("td").eq(0).text();
        if (st != "0" && st != "1"){ $(this).css("color", "black");}
        else if (st == "1")  { $(this).css("color", "green");}
        else if (st == "0")  { $(this).css("color", "red");}
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:26:13.410

正如我在评论中提到的，这是更改列中文本颜色的代码..而不是行颜色..

```
foreach (LeaveModel e in _employeeLeaves)
                {

                    if (e.State.Equals("Approved", StringComparison.CurrentCultureIgnoreCase))
                    {
                        e.State =
                         String.Format("<font color='green'>{0}</font>", e.State);
                    }
                    else if (e.State.Equals("Pending", StringComparison.CurrentCultureIgnoreCase))
                    {
                        e.State =
                          String.Format("<font color='red'>{0}</font>", e.State);
                    }
                } 
```

# android - 如何从库项目中的 AndroidManifest.xml 获取版本？

> ID：10701804
> 
> 赞同：3
> 
> 时间：2012-05-22T12:11:35.503
> 
> 标签：android, version, android-manifest, manifest

如何从库项目中的 AndroidManifest.xml 获取版本？因为在那里，我没有任何活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:26:53.817

```
PackageManager m = getPackageManager();
String app_ver = "";
try {
    app_ver = m.getPackageInfo(this.getPackageName(), 0).versionName;
} 
catch (NameNotFoundException e) {
    // Exception won't be thrown as the current package name is
    // safe to exist on the system.
    throw new AssertionError();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-01T23:36:28.227

如果您想要特定版本的库（而不是使用该库的应用程序），请使用：

```
BuildConfig.VERSION_NAME
BuildConfig.VERSION_CODE 
```

只需确保为您的库导入 BuildConfig（因为实际上每个 android 库/应用程序在其包路径上都有自己的 BuildConfig）。Android Studio 的 Gradle 构建系统表明它始终是从 0.7.0 版开始生成的（请参阅[更改日志](http://tools.android.com/tech-docs/new-build-system)）。这作为生成的类持续存在到托管应用程序/库中。

# google-maps - 基于谷歌地图的旗帜游戏停止工作

> ID：10701806
> 
> 赞同：0
> 
> 时间：2012-05-22T12:11:44.677
> 
> 标签：google-maps, google-maps-api-3

我的网站 Guesstheflag.com 有问题。该网站基于一个游戏，人们需要在该游戏中猜测哪些旗帜属于哪些国家。该网站使用谷歌地图在地图上显示国家。

两年前我从开发游戏的人那里买了这个网站。不幸的是，我不是开发人员，我对构建网站知之甚少。过去两年一切顺利，我从来没有遇到过问题，但几天后，如果您访问该网站，您会在游戏屏幕（在所有浏览器中）出现白屏。我无法联系到游戏的开发者，我试图自己找到解决方案，但我不知道我在做什么，所以这很难。;)

Google Maps API 最近是否发生了变化（我找不到），是否有简单的解决方案？如果没有，这里有没有人可以帮助我解决问题，但需要支付少量费用？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:29:52.700

是的，Google Maps JavaScript API 只是将小版本增量升级到 3.9[^(更改日志)](http://code.google.com/p/gmaps-api-issues/wiki/JavascriptMapsAPIv3Changelog)，默认版本从 3.6 升级到 3.7。其他一些人遇到了问题。[**开发人员指南的版本控制**部分](https://developers.google.com/maps/documentation/javascript/basics#Versioning)提供了有关您应该使用哪个版本的信息。

开始的 Google Maps JavaScript API v3 文档是：

*   常见[问题解答](https://developers.google.com/maps/faq)
*   开发者[指南](https://developers.google.com/maps/documentation/javascript/tutorial)
*   API参考[文档](https://developers.google.com/maps/documentation/javascript/reference)
*   示例[代码示例](https://developers.google.com/maps/documentation/javascript/examples/)

# java - 遍历Java中按关系属性排序的Neo4J节点

> ID：10701808
> 
> 赞同：3
> 
> 时间：2012-05-22T12:11:53.583
> 
> 标签：java, neo4j, traversal

是否可以遍历由 Java API 中关系给出的属性排序的节点？

```
Source node *--- 4 ---> * Node 1
            |
            +--- 3 ---> * Node 2
            |
            +--- 2 ---> * Node 3
            |
            '--- 1 ---> * Node 4 
```

其中 * 是节点，- 之间的数字是关系属性。这样以上将给出节点 4、3、2 和 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:51:39.200

您必须先获取所有这些关系并对其进行排序。如果您在遍历中使用它，那么可以在RelationshipExpander 中对这种行为进行编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T08:48:37.067

您可以在[http://docs.neo4j.org/chunked/snapshot/tutorial-traversal-java-api.html#_relationshipexpander](http://docs.neo4j.org/chunked/snapshot/tutorial-traversal-java-api.html#_relationshipexpander)中使用一些示例。这有帮助吗？你可以去 GIThub 源并从那里开始工作吗？

# xslt - 在 XSLT 转换期间在输出文档的特定点插入元素

> ID：10701810
> 
> 赞同：3
> 
> 时间：2012-05-22T12:12:06.500
> 
> 标签：xslt, xslt-2.0

我想知道您是否可以在处理过程中访问结果文档。

我问的原因是我正在转换一个输入文档，并且想根据某些条件插入元素，但是当我遍历树并且我即将创建它时，这将不得不发生。

转换后的 xml 看起来与此类似：

```
<xform>
    <xforms>
        <model>
            <instance>
                <data />
                <data />
            </instance>
        </model>
        <bind />
        <bind />
        <bind />
    </xforms>
</xform> 
```

我打算在转换期间（在上述 xml 被序列化之前）访问`<instance>`标签并插入其他`<data>`元素。

**注意** 输入文档与上面的 xml 不同——上面的 xml 是转换应该产生的。

同样，我想访问`<xform>`元素并插入其他`<bind>`节点。

所以最终的文档看起来像这样（假设我添加了 2 个数据节点和 2 个绑定节点）：

```
<xform>
    <xforms>
        <model>
            <instance>
                <data />
                <data />
                <data>new data node</data>
                <data>second new data node</data>
            </instance>
        </model>
        <bind />
        <bind />
        <bind />
        <bind>new bind node</bind>
        <bind>second new bind node</bind>
    </xforms>
</xform> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:30:10.557

不，您不能访问结果文档，但是您可以在变量中创建临时树，然后再次处理它们，如果需要使用具有不同模式的模板。所以而不是例如

```
<xsl:template match="/">
  <xsl:result-document href="example.xml">
<xform>
 <xforms>
  <model>
   <instance>
    <data>
    </data>
   </instance>
  </model>
  <bind />
  <bind />
  <bind />
 </xforms>
</xform>
  </xsl:result-document>
</xsl:template> 
```

您将在变量中创建第一个结果，然后进一步处理它，例如

```
<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="/">
  <xsl:variable name="temp1">
<xform>
 <xforms>
  <model>
   <instance>
    <data>
    </data>
   </instance>
  </model>
  <bind />
  <bind />
  <bind />
 </xforms>
</xform>
</xsl:variable>
  <xsl:result-document href="example.xml">
    <xsl:apply-templates select="$temp1/*"/>
  </xsl:result-document>
</xsl:template>

<xsl:template match="instance">
  <xsl:copy>
    <xsl:apply-templates/>
    <data>...</data>
  </xsl:copy>
</xsl:template> 
```

该示例不使用模式，但我经常将它们与变量和不同的处理步骤一起使用，以将每个步骤的模板与其他步骤完全分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:27:31.910

**是的，这样做的方法是使用*多通道*处理**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*" mode="#default pass2">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*" mode="#current"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/">
  <xsl:variable name="vPass1">
    <xsl:apply-templates/>
  </xsl:variable>

  <xsl:apply-templates select="$vPass1/node()" mode="pass2"/>
 </xsl:template>

 <xsl:template match="instance" mode="pass2">
  <instance>
    <xsl:apply-templates mode="pass2"/>
    <data>2</data>
    <data>3</data>
  </instance>
 </xsl:template>

 <xsl:template match="model" mode="pass2">
  <model>
   <xsl:apply-templates mode="pass2"/>
   <bind>1</bind>
   <bind>2</bind>
   <bind>3</bind>
  </model>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<xform>
    <xforms>
        <model>
            <instance>
                <data>
                </data>
            </instance>
        </model>
        <bind />
        <bind />
        <bind />
    </xforms>
</xform> 
```

**它使用身份规则将其转换为自身，并且第一次传递的结果被捕获在变量中`$vPass1`。然后第二遍处理当前的结果，在元素下`$vPass1`添加两个新`data`的子元素，在`instance`元素下添加三个`bind`子`model`元素——所以最终的结果是：**

```
<xform>
   <xforms>
      <model>
         <instance>
            <data/>
            <data>2</data>
            <data>3</data>
         </instance>
         <bind>1</bind>
         <bind>2</bind>
         <bind>3</bind>
      </model>
      <bind/>
      <bind/>
      <bind/>
   </xforms>
</xform> 
```

# .net - 为什么 WebHttpRequest.ResponseUri 没有在 C# 中返回正确的 url

> ID：10701811
> 
> 赞同：-2
> 
> 时间：2012-05-22T12:12:06.987
> 
> 标签：.net

这是我通过“HttpWebRequest”和“HttpWebResponse”从浏览器获取url的代码。

```
{
    string link="http://g.microsoftonline.com/0BXPS00id-id/1250";

    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(link);

    HttpWebResponse response = (HttpWebResponse)request.GetResponse();

    string responseurl = response.ResponseUri.ToString();

    Console.WriteLine(responseurl);
} 
```

当我执行上面的代码时，url返回是

**“https://mocp.microsoftonline.com/Site/Error.aspx?Err=NotSupported”**

但是当我在浏览器中手动打开链接时，它会重定向到

**“https://mocp.microsoftonline.com/Site/Support.aspx”**

为什么 response.ResponseUri.ToString() 返回错误的 url？

你能为此提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:49:19.450

通过 request.UserAgent 属性，您可以充当受支持的浏览器。以下对我有用

```
string link = "http://g.microsoftonline.com/0BXPS00id-id/1250";
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(link);
request.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)";
HttpWebResponse response = (HttpWebResponse)request.GetResponse();

string responseurl = response.ResponseUri.ToString();
Console.WriteLine(responseurl) 
```

我不是 UserAgent-value 方面的专家。[我从https://stackoverflow.com/a/702110/455904](https://stackoverflow.com/a/702110/455904)慷慨地为 UserAgent 提供了上述值

# c# - 如何在数据列表中找到对下拉列表的控制

> ID：10701812
> 
> 赞同：0
> 
> 时间：2012-05-22T12:12:08.003
> 
> 标签：c#, asp.net

我有一个 DataList，里面有一个 DropDownList：

```
 <asp:DataList ID="dlconfigureItem" runat="server">
    <ItemTemplate>
    <asp:DropDownList CssClass="config-select" ID="ddlitem    runat="server"></asp:DropDownList>
  </ItemTemplate>
  </asp:DataList> 
```

如何在服务器端获取 DropDownList 的 selectedindexchanged 事件？我试过这个：

```
 public void ddlitem_selectedindexchanged (object sender, EventArgs e)
    {

    } 
```

但它不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:15:30.950

注册事件并设置`AutoPostBack="true"`

```
<asp:DropDownList CssClass="config-select" 
    ID="ddlitem" 
    AutoPostBack="true"
    OnSelectedIndexChanged="ddlitem_selectedindexchanged"    
    runat="server">
</asp:DropDownList> 
```

事件（在选定的索引更改上，您可以获得选定的值）

```
 protected void ddlCategory_SelectedIndexChanged(object sender, EventArgs e)
    {
        var ddlList = (DropDownList)sender;
        string selectedValue = ((DropDownList)ddlList.NamingContainer.FindControl("ddlitem")).SelectedValue;   
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:16:06.910

从`SelectedIndexChanged`事件中最简单的是`sender`将`DropDownList`

```
var ddl = (DropDownList)sender; 
```

*发送者*始终是作为事件源的控件。

为了完整起见，`ItemDataBound`来自`DataList`：

```
protected void dlconfigureItem_ItemDataBound(object sender, DataListItemEventArgs e) 
{
    DropDownList ddlitem = e.Item.FindControl("ddlitem") as DropDownList;
    if (ddlitem != null)
    {
        // ...
    }
} 
```

**编辑**：您忘记注册活动了吗？

```
<asp:DropDownList CssClass="config-select" 
    ID="ddlitem" 
    OnSelectedIndexChanged="ddlitem_selectedindexchanged"    
    runat="server">
</asp:DropDownList> 
```

请注意，您不应在回发时将 DataList 绑定到它的 DataSource，否则不会触发事件。所以检查`IsPostBack`页面的属性。

例如在`page_load`：

```
if(!IsPostBack)BindDataList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T12:21:18.510

您已经定义了服务器端方法：

```
public void ddlitem_selectedindexchanged (object sender, EventArgs e)
{

} 
```

但你还没有告诉客户端有一个事件给你，所以在 html 代码中告诉它：

```
 onselectedindexchanged="ddlitem_selectedindexchanged" 
```

并将 AutoPostBack 属性设置为 true。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T12:16:17.927

不确定您是否无法在服务器上获取所选项目，或者您找不到处理事件的方法。如果您的问题与事件处理有关，请尝试此操作

```
 <asp:DataList ID="dlconfigureItem" runat="server">
    <ItemTemplate>
    <asp:DropDownList CssClass="config-select" ID="ddlitem" 
       OnSelectedIndexChanged="ddlitem_selectedindexchanged" 
       AutoPostBack="true" runat="server"></asp:DropDownList>
  </ItemTemplate>
  </asp:DataList> 
```

# oracle - 从数据库中读取整数返回浮点数

> ID：10701815
> 
> 赞同：4
> 
> 时间：2012-05-22T12:12:17.723
> 
> 标签：oracle, delphi, floating-point

我们在 Oracle DB 中有一个表，定义为：

```
CREATE TABLE AVALUES
(
  ACODE   VARCHAR2(4) NOT NULL,
  ATYPE   NUMBER NOT NULL,
  ANAME   VARCHAR2(50),
  CREATED DATE DEFAULT SYSDATE
) 
```

在 Delphi 中，我们在 ADOQuery 组件中有一个类似于此的查询，它将值返回给我们的应用程序：

```
with qryComp do
begin
  Close;
  SQL.Text := 
    'SELECT ATYPE FROM AVALUES ORDER BY CREATED';
  Open;
  while not EOF do
  begin
    AddComponents('NAME' + FieldByName('ATYPE').AsString);
    Next;
  end;
  Close;
end; 
```

部署在许多不同的客户端 PC 上多年来一直运行良好，我们的代码中没有任何变化。但是，在一些客户端 PC 上，它最近开始返回*1.999999999969*而不是*2*，这会导致应用程序崩溃。我们已经尝试寻找问题，但它非常断断续续 - 通过远程桌面连接到客户端计算机，我们根本无法复制它。

对于我可以做些什么来进一步调查这个问题有什么建议吗？由于它是间歇性的，并且仅在少数计算机上发生，因此很难调试。我认为这可能是 Oracle 客户端的问题，但我不确定我们如何才能真正验证这一点。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T12:33:57.600

我唯一能看到的可能是客户端机器上 FPU 控制字之间的差异，导致精度处理方式不同，因为处理浮点类型时存在固有的舍入问题。（请参阅Delphi 文档中的[Set8087CW](http://docwiki.embarcadero.com/Libraries/en/System.Set8087CW)；该链接用于 XE2 的文档，但我知道最近没有重大变化，因此它们应该可以工作。）

有四种方法可以修复它（一种不太可能，三种相当容易）：

*   将数据库列更改为实际`integer`类型而不是`NUMBER`

*   直接求一个`integer`值，自己转换

    `AddComponent('Name' + IntToStr(FieldByName('ATYPE').AsInteger));`

*   在使用点更改使用该列的代码：

    `AddComponents(Format('NAME%d', [FieldByName('ATYPE').AsInteger]));`

或`AddComponents`本身：

```
procedure AddComponents(Prefix: string; Value: Integer);
begin
  DoWhateverIDo(Prefix + IntToStr(Value));
end;

// calling code
AddComponents('Name', FieldByName('ATYPE').AsInteger); 
```

*   在使用数据库之前显式设置 8087CW 的值，并在完成后将其设置回来。这对我来说似乎是最糟糕的选择；在我上面发布的文档链接中有一个这样做的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T15:20:40.567

**我在数据类型Currency**上遇到了类似的问题（博客文章：[“ **Why 1.99 突然不再等于 1.99** ”](http://mikejustin.wordpress.com/2009/05/04/why-is-199-199/)）。看起来有些 DLL 修改了 FPU（处理器）控制字。这就解释了为什么问题与机器有关。我还发现Delphi包含一个`SafeLoadLibrary`函数，可以恢复控制字。但这并没有太大的帮助，因为在加载 DLL 之后，任何 DLL 函数的调用仍然可能再次弄乱控制字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T12:27:34.753

Oracle NUMBER 数据类型是浮点数据类型，所以你有浮点/双近似的问题。请务必阅读[每个计算机科学家都应该了解的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

# java - 如何从android中的url获取图像的高度？

> ID：10701827
> 
> 赞同：0
> 
> 时间：2012-05-22T12:13:09.763
> 
> 标签：java, android

我想从android中的url获取图像的高度，我已经能够在java中找到很多这样的例子，但不幸的是它需要导入java类，如awt和swing，我发现我不能使用android项目，有谁知道在android中可以做到这一点的方法吗？

# python - Django 如何比较对象？

> ID：10701834
> 
> 赞同：2
> 
> 时间：2012-05-22T12:13:34.903
> 
> 标签：python, django, pydev

我有一个这样的链接和书签模型：

```
class Link(models.Model):
    url = models.URLField(unique=True)        
    def __unicode__(self):
        return self.url

class Bookmark(models.Model):
    title=models.CharField(max_length=200)
    user=models.ForeignKey(User)
    link=models.ForeignKey(Link)        
    def __unicode__(self):
        return u'%s, %s' % (self.user.username, self.link.url) 
```

现在在一个视图中，我查看具有给定 url 的链接是否已经存在。然后将此对象与用户名一起传递给 Bookmarks 集合，以查看是否已存在具有此用户名的书签和 Link 实例是否已存在。

```
def bookmark_save_page(request):
    if request.method == 'POST':
        form = BookmarkSaveForm(request.POST)
        if form.is_valid():
            # Create or get Link
            link, dummy = Link.objects.get_or_create(url=form.cleaned_data['url'])
            # Create or get bookmark
            bookmark, created = Bookmark.objects.get_or_create(user=request.user, link=link)

            # Save bookmark to database
            bookmark.save()
            return HttpResponseRedirect('/user/%s/' % request.user.username) 
```

这是我不明白的一点。它如何知道如何将 Link 模型中的 url 字段作为比较的方式？是不是因为我在 Link 模型中这样定义的？

```
def __unicode__(self):
        return self.url 
```

我来自 .NET，您必须为该类定义 GetHash()，以指定如何将实例相互比较。

Python 是如何知道这一点的？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T12:20:05.460

我想您是在问“Django 如何在过滤时比较实例”，而不是“python 如何比较对象”。

使用以下代码行，

```
bookmark, created = Bookmark.objects.get_or_create(user=request.user, link=link) 
```

Django 正在过滤链接对象的主键。`__unicode__`方法无所谓。

有关更多信息，请参阅 Django 文档以[比较对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#comparing-objects)和[对相关对象的查询](https://docs.djangoproject.com/en/dev/topics/db/queries/#queries-over-related-objects)。

# vbscript - 以管理员身份运行 VBS

> ID：10701835
> 
> 赞同：2
> 
> 时间：2012-05-22T12:13:40.823
> 
> 标签：vbscript

我有一个需要以管理员身份运行的 VBScript。

是否可以在脚本中添加一些有助于解决此问题的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:28:23.037

海伦，看看微软的提升命令 powertoy

[http://technet.microsoft.com/en-us/magazine/2007.06.utilityspotlight.aspx](http://technet.microsoft.com/en-us/magazine/2007.06.utilityspotlight.aspx)

发布您要运行的代码，然后我们可以提供更多建议。

来自上述评论的 VbScript 中的 anwser [Bypass UAC也有效，但有它的缺点，我还使用来自 systernals 的工具 RUNAS 和 PSEXEC。](https://stackoverflow.com/questions/5344021/bypass-uac-in-vbscript)

# cloud - 什么是云容器？它与数据中心有什么不同？

> ID：10701836
> 
> 赞同：0
> 
> 时间：2012-05-22T12:13:48.723
> 
> 标签：cloud

是否只有两种类型的云容器 - 联合和共享。设置云容器需要什么。设置云容器而不是数据中心总是好的选择吗？

通过云容器，我知道它适用于更大的设置，但我发现一些文档只提到数据中心而不是云容器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-02T08:30:05.923

云容器只是描述虚拟环境的术语，例如 LXC 或 OpenVZ 创建的容器。它们比虚拟机重量轻且效率更高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-23T16:09:36.973

容器包含运行应用程序文件、环境变量和库所必需的组件，并且由于主机操作系统还限制容器对物理资源（例如 CPU 和内存）的访问，因此单个容器不能消耗主机的所有物理资源。相反，多个隔离系统、“容器”在单个控制主机上运行并访问单个内核。

# performance - 如何分析外部服务的性能？

> ID：10701838
> 
> 赞同：0
> 
> 时间：2012-05-22T12:13:54.013
> 
> 标签：performance, logging, analytics

我有一个 PHP 应用程序，它将每个 HTTP 请求的多个性能指标收集到一个日志文件中。其中包括与外部服务器的连接、数据库查询和长时间运行的代码块。现在我有一堆数据要分析如下：

*   识别最慢的部分
*   绘制平均聚合数据图

我不能依赖像 NewRelic 这样的外部服务。我只能解析日志文件。目前，我将日志数据放入数据库中，以便能够查询并使用 RRDTool 绘制聚合图形。但这对我来说似乎非常“低级”。有没有其他软件可以创建汇总统计和查询数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:37:38.093

您可能会发现[statsd 和石墨](http://mat.github.com/statsd-railscamp2011-slides/)是一个有用的工具。Etsy 使用它来跟踪这样的“低级”统计数据：http:
[//codeascraft.etsy.com/2011/02/15/measure-anything-measure-everything/](http://codeascraft.etsy.com/2011/02/15/measure-anything-measure-everything/)

# css - CSS中的'/'符号是什么意思

> ID：10701840
> 
> 赞同：6
> 
> 时间：2012-05-22T12:14:00.330
> 
> 标签：css

> **可能重复：**
> [CSS 中带斜线的大小](https://stackoverflow.com/questions/701732/size-in-css-with-slash)

我刚刚看到一些这样的CSS代码。有人可以告诉我“/”符号是什么意思吗？是否有任何最佳实践来管理它的使用？

```
font: 2px/3px; 
```

**编辑：**

这是整个代码块（提供上下文）

```
.funky {
  font: 2px/3px;
    font-family: fantasy;
    font-size: 30em;
    font-weight: bold; } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T12:15:28.540

在该示例中，它表示`font-size:2px`, 和`line-height:3px`。尽管我不确定在没有其余字体规则的情况下是否可行。
[http://www.impressivewebs.com/css-font-shorthand-property-cheat-sheet/](http://www.impressivewebs.com/css-font-shorthand-property-cheat-sheet/)

# javascript - 没有列过滤器的 primefaces 全局过滤器

> ID：10701841
> 
> 赞同：13
> 
> 时间：2012-05-22T12:14:04.723
> 
> 标签：javascript, filter, datatable, primefaces

我正在研究 primefaces[展示](http://www.primefaces.org/showcase/ui/data/datatable/filter.xhtml)中提到的示例。我正在尝试为数据表创建一个全局过滤器。
目前该表如下所示： ![在此处输入图像描述](../Images/d0373a74c1c3391cc839fcab0b8311e0.png)

我想要做的是删除单个列过滤器并且只有全局过滤器。像这样： ![在此处输入图像描述](../Images/ccbf480f1f8051381fe16e1c4cf33cd0.png)
为此，我删除`filterBy`了列定义上的属性。但在这样做时，我收到一个 javascript 警告 -`Error in parsing value for`过滤器`, declaration dropped`和全局过滤器不起作用。
有人可以告诉我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-22T12:33:03.497

确保你有`filterBy="#{myRowVar.sonmeField}"`每个`p:column`（因为全局过滤器需要它）

并`filterStyle="display:none"`在每个中`p:column`添加（添加`filterStyle="display:none"`将使其不可见......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-16T15:37:53.563

或者你可以把：

```
.ui-column-filter{
     display: none !important;
} 
```

在您的 .css 中隐藏所有列过滤器

# asp.net - vs2010在哪里保存网站属性值？

> ID：10701843
> 
> 赞同：2
> 
> 时间：2012-05-22T12:14:14.943
> 
> 标签：asp.net, .net, visual-studio-2010

经过大量搜索，我试图找到： vs2010*在哪里*保存网站属性的值：

![在此处输入图像描述](../Images/da1b5859e06812c7f8cc46898c99e28b.png)

它不在 SLN 中，也不在 PROJ ...

我听说过`C:\Users\royi\AppData\Local\Microsoft\WebsiteCache\Websites.xml`

但是经过更改测试后，我看不到反映的更改...（即使重新启动后-用于冲洗...）

那么vs2010在哪里保存呢？

*ps我也试过FileMon ......但没有......*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:24:19.240

更新 ：

它确实将其保存在`C:\Users\royi\AppData\Local\Microsoft\WebsiteCache\Websites.xml`

我正在通过文件内部的总指挥官进行搜索，但应该选择了 unicode 复选框......

这是一个数据样本：

```
<?xml version="1.0" encoding="utf-16"?>
<DesignTimeData>
    <Website RootUrl="C:\Projects\PersonalBranches\RoyiN\Ensure_Solution\Surveys_Mediator\" CacheFolder="Surveys_Mediator(2)" targetframeworkmoniker=".NETFramework,Version=v4.0" sccprovider="SAK" enablesilverlightdebugging="false" scclocalpath="SAK" customserverurl="http://localhost/Surveys_Mediator" addnewitemlang="Visual C#" sccauxpath="SAK" sccprojectname="SAK" vwdport="50006" enablevswebserver="false" _LastAccess="22/05/2012 17:10:20"/>
    <Website RootUrl="C:\Projects\PersonalBranches\RoyiN\Ensure_Solution\Web_ERP_Finance\" CacheFolder="Web_ERP_Finance(2)" targetframeworkmoniker=".NETFramework,Version=v4.0" sccprovider="SAK" enablesilverlightdebugging="false" scclocalpath="SAK" customserverurl="http://localhost/Web_ERP_Finance/" addnewitemlang="Visual C#" sccauxpath="SAK" sccprojectname="SAK" vwdport="49995" enablevswebserver="false" _LastAccess="22/05/2012 17:10:16"/>
    <Website RootUrl="C:\Projects\Ensure_Solution\GD_OnlineApplication\" CacheFolder="GD_OnlineApplication(1)" sccprovider="MSSCCI:Microsoft Visual SourceSafe" scclocalpath=".." customserverurl="http://localhost/GD_OnlineApplication" sccauxpath="" addnewitemlang="Visual C#" sccprojectname="&quot;$/Ensure_Solution&quot;, IARCAAAA" vwdport="59009" enablevswebserver="false" _LastAccess="08/11/2011 13:22:03"/>
    <Website RootUrl="C:\Projects\Ensure_Solution\TrafficTesterWeb\" CacheFolder="TrafficTesterWeb(1)" sccprovider="MSSCCI:Microsoft Visual SourceSafe" scclocalpath=".." customserverurl="http://localhost/TrafficTesterWeb" sccauxpath="" addnewitemlang="Visual C#" sccprojectname="&quot;$/Ensure_Solution&quot;, IARCAAAA" vwdport="59021" enablevswebserver="false" _LastAccess="08/11/2011 13:22:05"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:06:50.487

在我的一个项目中，我在 .csproj 中找到了它。如果您在那里没有看到它，请使用我使用的工具 Windows Grep 2.3 并搜索您保存的值。它是一个非常方便的工具，可以在 VS 搜索功能可能无法发现的文件中查找特定字符串。

# windows-phone-7 - 如何将pagestack删除到windows phone 7中？

> ID：10701849
> 
> 赞同：1
> 
> 时间：2012-05-22T12:14:46.273
> 
> 标签：windows-phone-7

我有一个包含 5 页的应用程序，最后一页将被称为注销，因此一旦我单击注销，它将删除所有页面堆栈并开始从第 1 页导航。

例如：page-1 MainMenu

第 2 页的项目列表。

page-3 哪些常用共享选项（Facebook 和 twitter 的）

page-4 点显示列表中获得的最高点。

第 5 页登出。

单击退出后，它将转到登录页面。并且一旦登录，它将重定向到我的页面-5。

所以我的问题是我想重定向到第 2 页。所以我该怎么做。

我试过

> ```
>  foreach (var journalEntry in ((PhoneApplicationFrame)Application.Current.RootVisual).BackStack)
>         {
>             ((PhoneApplicationFrame)Application.Current.RootVisual).RemoveBackEntry(); 
> ```

```
 } 
```

但它不会解决我的问题。

谢谢..！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:20:21.140

您可以使用该方法从[BackStack](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.backstack%28v=vs.92%29)中删除条目[`NavigationService.RemoveBackEntry`](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.removebackentry%28v=vs.92%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:21:24.913

您可能有兴趣阅读以下“解决 Windows Phone Silverlight 应用程序中的循环导航”：-

[http://windowsteamblog.com/windows_phone/b/wpdev/archive/2010/12/13/solving-circular-navigation-in-windows-phone-silverlight-applications.aspx](http://windowsteamblog.com/windows_phone/b/wpdev/archive/2010/12/13/solving-circular-navigation-in-windows-phone-silverlight-applications.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T15:22:13.247

我创建了这个方法来从页面堆栈中删除多个页面（“任务”）。

```
/// <summary>
        /// Decreases the back stack entry count, leaving the amount of items on the stack equilivent to the <param name="leaveAmount">leaveAmount</param>.
        /// </summary>
        /// <exception cref="NotSupportedException">A value less than 0 is provided</exception>
        /// <param name="leaveAmount">The leave amount.</param>
        /// <param name="whenFinished"> </param>
        public static void DecreaseBackStackEntryCount(int leaveAmount, Action whenFinished = null)
        {
            if (leaveAmount < 0)
            {
                throw new NotSupportedException("cannot remove every item on stack");
            }
            Deployment.Current.Dispatcher.BeginInvoke(() =>
                                                          {
                                                              try
                                                              {
                                                                  while (((PhoneApplicationFrame)Application.Current.RootVisual).BackStack.Count() > leaveAmount)
                                                                  {
                                                                      try
                                                                      {
                                                                          ((PhoneApplicationFrame) Application.Current.RootVisual).RemoveBackEntry();
                                                                      }
                                                                      catch (InvalidOperationException)
                                                                      {
                                                                          return;
                                                                      }
                                                                  }

                                                              }
                                                              catch
                                                              {
                                                              }
                                                              finally
                                                              {
                                                                  if (whenFinished != null)
                                                                  {
                                                                        whenFinished.Invoke();
                                                                  }
                                                              }
                                                          });
        } 
```

在第 5 页上，您会像这样使用它：（我认为您正在尝试在注销后返回主菜单。如果没有，请阅读方法签名）

```
DecreaseBackstackEntryCount(1,() => NavigationService.GoBack()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T18:00:32.453

您的部分问题可能是您正在修改`foreach`循环中的集合，而这不起作用。

这是一个[SO question，](https://stackoverflow.com/questions/3232485/going-through-a-foreach-when-it-can-get-modified)它在一般情况下为您提供了一些选项。要点是使用 for 循环倒退或调用`.ToArray()`or`.ToList()`并`foreach`在这些单独的集合上执行您的操作。

但是，在这种情况下我会做的是：

```
while (NavigationService.CanGoBack)
{
  NavigationService.RemoveBackEntry();
} 
```

# blackberry - 刷新表适配器屏幕：黑莓

> ID：10701850
> 
> 赞同：0
> 
> 时间：2012-05-22T12:14:48.563
> 
> 标签：blackberry, blackberry-eclipse-plugin

有什么方法可以在单击按钮时刷新表适配器屏幕。如果我在单击按钮时再次调用表格方法，那么它将在旧的下方添加一个新的表格适配器屏幕.....我有什么方法可以刷新现有屏幕。按钮正在从表格中删除元素，之后我想要刷新它。

```
 public static void richlistshow(){
        int ik = target_list.size()-1;
       while(ik > 0 )
       {
           Bitmap logoBitmap = Bitmap.getBitmapResource("delete.png");       

           City aCity = (City)target_list.elementAt(ik);
           String modelNumber = aCity.get_city_name().toString();
           String modelName = " X ";
           //String ne = String.valueOf(ik);
           String date_time = "  Date-Time";

           Object[] row = {modelName, modelNumber,date_time,logoBitmap};
           _tableModel.addRow(row);
           ik--;
       }

     TableView tableView = new TableView(_tableModel);
     tableView.setDataTemplateFocus(BackgroundFactory.createLinearGradientBackground(Color.YELLOWGREEN, Color.LIMEGREEN, Color.SEAGREEN, Color.SANDYBROWN));
     TableController tableController = new TableController(_tableModel, tableView);
     tableController.setFocusPolicy(TableController.ROW_FOCUS);
     tableView.setController(tableController);

     // Specify a simple data template for displaying 3 columns
     DataTemplate dataTemplate = new DataTemplate(tableView, NUM_ROWS, NUM_COLUMNS)
     {
         public Field[] getDataFields(int modelRowIndex)
         {
             //final int i =modelRowIndex;
             Object[] data = (Object[]) (_tableModel.getRow(modelRowIndex));

             final String cname = (String)data[1];

             /****** Declaring button for deletion of record from database ******/
             ButtonField delete =new ButtonField("X",ButtonField.CONSUME_CLICK);

             /*******  Setting change listener and defining field change within *******/
             delete.setChangeListener(new FieldChangeListener() {

             /*******  defining what should happen when button is clicked ********/
                public void fieldChanged(Field field, int context) {

                    DatabaseHandler delete_row = new DatabaseHandler();
                    delete_row.deletetarget(cname);

            /****calling function to retrieve values from the databasse table.***/
                    delete_row.retrieveTarget();
            /****************calling method again to show the updated values*************/      
                richlistshow();//for showing refreshed data after deletion of a record

                }
            });

             Field[] fields = {delete, new LabelField((String) data[1]), new LabelField((String) data[2]),new BitmapField((Bitmap)data[3])};
             return fields;

         }

     };

     dataTemplate.useFixedHeight(true);
     // Define regions and row height
     dataTemplate.setRowProperties(0, new TemplateRowProperties(ROW_HEIGHT));

     for(int i = 0; i < NUM_COLUMNS; i++)
     {
         dataTemplate.createRegion(new XYRect(i, 0, 1, 1));
         dataTemplate.setColumnProperties(i, new TemplateColumnProperties(Display.getWidth() / NUM_COLUMNS));
     }

     // Apply the template to the view

     tableView.setDataTemplate(dataTemplate);

     mainManager.add(tableView);

}

public final static class MyCity
{
    private String _name;
    private String _datetime;
    private String _button;
    private Bitmap _bitmap;

    MyCity(String name, String datetime, String button, Bitmap bitmap)
    {
        _name = name;
        _datetime = datetime;
        _button = button;
        _bitmap = bitmap;
    }

    public String getName()
    {
        return _name;
    }
    public String getDatetime()
    {
        return _datetime;
    }
    public String getButton()
    {
        return _button;
    }
    public Bitmap getBitmap()
    {
        return _bitmap;
    }
}

/****************TABLE CONTROLLER CLASS ******************/
 private class CityTableModelAdapter extends TableModelAdapter
    {
        public int getNumberOfRows()
        {
            return _cities.size();
        }
        public int getNumberOfColumns()
        {
            return NUM_COLUMNS;
        }
        protected boolean doAddRow(Object row)
        {
            Object[] arrayRow = (Object[]) row;

            System.out.println("! : "+arrayRow[0]+" @: "+arrayRow[1]+" #: "+arrayRow[2]);

            _cities.addElement(new MyCity((String) arrayRow[0], (String) arrayRow[1], (String) arrayRow[2], (Bitmap) arrayRow[3]));
            return true;
        }
        protected Object doGetRow(int index)
        {
            MyCity mycity = (MyCity) _cities.elementAt(index);

            Object[] row = {mycity.getName(),mycity.getDatetime(),mycity.getButton(),mycity.getBitmap()};

            return row;

        }

    } 
```

# objective-c - 为 UITabBar 设置活动图像

> ID：10701857
> 
> 赞同：3
> 
> 时间：2012-05-22T12:15:13.487
> 
> 标签：objective-c, xcode, ios5

我已经以`UITabBar`编程方式定义了一个，但是当项目处于活动状态时如何设置自定义`UITabBar`图标？

这是我声明`UITabBar`按钮的代码，但是当它处于活动状态时如何设置自定义图像？

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) {
        self.title = NSLocalizedString(@"Free", @"Free");
        self.tabBarItem.image = [UIImage imageNamed:@"Free.png"];
    }

    return self;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-21T02:44:05.933

iOS7 中的新功能，现在执行此操作的方法是使用`selectedImage`on 属性`tabBarItem`：

```
self.tabBarItem.selectedImage = [UIImage imageNamed:@"Free_Selected.png"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:34:39.100

您需要为每个标签栏项目设置正常和选定状态：

```
UIImage *normalImg = [UIImage imageNamed:@"Free.png"];
UIImage *selectedImg = [UIImage imageNamed:@"Free_Selected.png"];

[self.tabBarItem setBackgroundImage:normalImg forState:UIControlStateNormal]; //Normal
[self.tabBarItem setBackgroundImage:selectedImg forState:UIControlStateSelected]; //Selected 
```

# hadoop - 是否可以将 map-reduce 的输出定向到多个 Map 文件？

> ID：10701861
> 
> 赞同：0
> 
> 时间：2012-05-22T12:15:22.633
> 
> 标签：hadoop, mapreduce, nutch

**这是用例：**

我有一个 nutch crawldb（它是一个 hadoop 地图文件），其中包含有关 url 的数据，其中包括其已访问和未访问的状态。我想根据 url 的状态将其拆分为 2 个 crawldb（地图文件）。

直到现在我尝试使用[MultipleOutputFormat](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/lib/MultipleOutputFormat.html)但我读到它适用于序列文件或文本文件而不是映射文件。

（仅供参考：我正在使用 hadoop v20.2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:48:53.963

而是查看[MultipleOutputs](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/lib/MultipleOutputs.html)，您必须编写一个自定义减速器来为每种类型调用 MultipleOutputs.getCollector() 方法，javadocs中有示例用法。

**在您的工作配置中：**

```
 MultipleOutputs.addMultiNamedOutput(conf, "map",
   org.apache.hadoop.mapred.MapFileOutputFormat.class,
   LongWritable.class, Text.class); 
```

# php - 处理 $_POST[] 和 $_GET[] 变量

> ID：10701868
> 
> 赞同：2
> 
> 时间：2012-05-22T12:15:50.913
> 
> 标签：php, mysql, security

目前我使用这个策略：

在提交 HTML 表单或使用 jQuery 发送的数据后，`$.get()`或者`$.post()`我需要知道发生了什么，然后在此基础上应用逻辑。

假设，我有`$_POST['username'],` `$_POST['password']`和`$_POST['login_submit_button']`。在我的处理脚本文件中，我这样做：

```
if(isset($_POST['login_submit_button']) && isset($_POST['username']) && $_POST['username'] != "" && isset($_POST['password']) && $_POST['password'] != "") {
  // calling a common function safe_vars() which does
  // mysql_real_escape_string(stripslashes(trim($any_variable_need_to_become_safe)))
  // and now using the above variables for different purposes like
  // calculation, insertion/updating old values in database etc.
} 
```

我知道所有这些逻辑都是错误的或存在严重问题，所以我想要一个非常安全和完美的解决方案来代替这个。我欢迎在我的策略中找出漏洞和严重的安全漏洞。这个问题也可以帮助其他人，如果答案更具解释性，这可以是信息丰富的社区 wiki。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:25:14.507

没有办法制作一个通用的超级“让事情安全”功能。

> `mysql_real_escape_string`

你根本不应该使用它。它使用旧的 mysql API，并假设您将手动将字符串组合在一起以生成 SQL。不要那样做。使用 PDO 或 mysqli 以及处理准备好的查询和绑定参数的函数。

> `stripslashes`

这是魔术引语的解毒剂。如果没有魔术引号，它将破坏数据。不要使用它。改为关闭魔术引号。

> `trim`

这会破坏数据。除非您真的想删除字符串开头和结尾的空格，否则不要使用它。

* * *

在将数据插入目标语言之前*立即*转义目标语言的数据。

对于 SQL，[使用绑定参数和准备好的查询](https://stackoverflow.com/questions/60174/best-way-to-stop-sql-injection-in-php)。

对于 HTML，请使用`htmlspecialchars`为您转义的模板语言，例如 mustache。

或者，（如果你想允许 HTML）解析它，生成一个 DOM，使用白名单过滤它，然后将它序列化回 HTML。

对于 JSON，请使用`encode_json`

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:24:43.683

*   如果您启用了magic_quotes，您只需要使用stripslashes（使用[get_magic_quotes_gpc](http://uk3.php.net/manual/en/function.get-magic-quotes-gpc.php)来检查）
*   [您应该使用filter_var](http://php.net/manual/en/function.filter-var.php)或[ctype_*](http://php.net/manual/en/book.ctype.php)或[preg_match](http://php.net/manual/en/function.preg-match.php)过滤您的 POST 变量白名单（以及检查约束条件，例如长度和存在）
*   为您的查询使用准备好的语句/ [PDO](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGoQFjAA&url=http://php.net/manual/en/book.pdo.php&ei=E4W7T-DvIcjw8QOtn_XXDQ&usg=AFQjCNFIwSE1mNG_k_lj0510AL_SsZs5Vg)以确保正确转义
*   [使用htmlentities](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGoQFjAA&url=http://php.net/manual/en/book.pdo.php&ei=E4W7T-DvIcjw8QOtn_XXDQ&usg=AFQjCNFIwSE1mNG_k_lj0510AL_SsZs5Vg)转义任何 html 输出

没有什么是万无一失的，但是以上是避免 SQL 注入/XSS 的良好做法。

# javascript - Javascript 模块声明 - 性能

> ID：10701869
> 
> 赞同：0
> 
> 时间：2012-05-22T12:16:01.223
> 
> 标签：javascript, performance

我正在尝试在以下编写 JS 模块的方式之间做出决定。在内存和 CPU 上编写模块有什么影响。第二个会在浏览器中占用更多内存吗？

使用函数声明

```
function MyModule () {
    this.getOperation1 =  operation1;
    function operation1() {
        return "XYZ"
    }
} 
```

使用变量定义

```
 var MyModule = {
     getOperation1: function() {
        return "XYZ"
     }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:32:43.437

内存方面它们*大致*相同 - 都创建一个对象。

然而：

1.  您只能`new`与基于函数的模块格式一起使用。后者只创建一个对象，而不是可用于创建其他实例的构造函数。

2.  使用函数，您可以将私有局部变量包含在范围内。

但是，在*大多数*情况下，更好的方法是：

```
function MyModule () {
}

MyModule.prototype.getOperation1 = function() {
    ...
} 
```

这确保了如果您创建多个实例，它们都只共享该函数的*一个*副本。`getOperation1`

也就是说，如果您要做的只是命名函数，并且它们不会自然地形成“对象”（在 OOP 意义上），那么您不妨使用对象文字语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:44:52.597

请参阅此[yui-blog](http://www.yuiblog.com/blog/2006/11/13/javascript-we-hardly-new-ya/)以获取与内存相关的参数

来自同一个

> 通过使用 new 调用函数，对象持有一个毫无价值的原型对象。这会浪费内存而没有抵消优势。如果我们不使用新的，我们就不会将浪费的原型对象保留在链中

正如@Alnitak 所提到的，使用`prototype`对象以防您要实现`constructor`功能，以便所有实例共享同一个对象。

要检查 CPU 方面的 [速度]，请使用 www.jsperf.com 并进行性能测试。一些已经可用的测试 [Function Invocation](http://jsperf.com/function-invocation-regular-call-apply-new/3) , [Object.create vs new](http://jsperf.com/object-create-vs-new-ctor/3) , [Generic](http://jsperf.com/search?q=new)

# asp.net - Favicon 不适用于特定服务器，但适用于其他服务器

> ID：10701871
> 
> 赞同：0
> 
> 时间：2012-05-22T12:16:08.800
> 
> 标签：asp.net, iis-6, favicon

我有一个问题，这是在 IT 世界中似乎经常发生的那些神秘事件之一。

当然，必须有一个简单的解决方案，所以我解决了伟大的 SO：

**从特定服务器浏览我们的网站时，我** `<link rel="shortcut icon" href="favicon.ico" />` **的不会出现，但适用于其他服务器。**

服务器使用 IIS 6，并且始终使用 SSL 浏览站点。

如果您直接请求，服务器可以提供图标，但不会出现。

在本地和所有其他测试服务器都按预期运行，在某些情况下与 IIS 7 不同，而在其他情况下则完全不同。

我们已经尝试了我们能想到的一切，甚至检查服务器上的策略以防它们被禁止`.ico`。我不想详细说明我们尝试了什么，因为我也不想给出任何可能的答案。

该机器位于客户区域，因此我们的访问权限有限，并且我们的测试运行并不像我们希望的那样彻底。

蒂亚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:31:20.360

清除浏览器缓存。

也许似乎是一个愚蠢的建议，但我遇到了这个问题。像 Chrome 这样的浏览器会一直缓存 Favicon... 永远 :)

# hash - 使用 golang 生成字符串的 SHA 哈希

> ID：10701874
> 
> 赞同：72
> 
> 时间：2012-05-22T12:16:14.193
> 
> 标签：hash, go

有人可以向我展示一个工作示例，说明如何`myPassword := "beautiful"`使用 Go 1 生成我拥有的字符串的 SHA 哈希值吗？

文档页面缺少示例，我在 Google 上找不到任何工作代码。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-05-22T12:22:08.053

一个例子 ：

```
import (
    "crypto/sha1"
    "encoding/base64"
)

func (ms *MapServer) storee(bv []byte) {
    hasher := sha1.New()
    hasher.Write(bv)
    sha := base64.URLEncoding.EncodeToString(hasher.Sum(nil))
        ...
} 
```

在这个例子中，我从一个字节数组中创建了一个 sha。您可以使用获取字节数组

```
bv := []byte(myPassword) 
```

当然，如果您不需要，您不需要在 base64 中对其进行编码：您可以使用 Sum 函数返回的原始字节数组。

下面的评论似乎有些混乱。因此，让我们为下一个用户阐明转换为字符串的最佳实践：

*   您永远不会将 SHA 作为字符串存储在数据库中，而是作为原始字节存储
*   当您想向用户显示 SHA 时，常用的方式是[十六进制](https://en.wikipedia.org/wiki/Hexadecimal)
*   当您需要字符串表示因为它必须适合 URL 或文件名时，通常的解决方案是[Base64](https://en.wikipedia.org/wiki/Base64)，它更紧凑

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2015-02-05T17:18:30.363

[Go By Example](https://gobyexample.com/sha1-hashes)有一个关于 sha1 散列的页面。

```
package main

import (
    "fmt"
    "crypto/sha1"
    "encoding/hex"
)

func main() {

    s := "sha1 this string"
    h := sha1.New()
    h.Write([]byte(s))
    sha1_hash := hex.EncodeToString(h.Sum(nil))

    fmt.Println(s, sha1_hash)
} 
```

你可以[在 play.golang.org 上运行这个例子](http://play.golang.org/p/dPr9lt1uIS)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-05-22T20:11:40.463

[http://golang.org/pkg/crypto/sha1/](http://golang.org/pkg/crypto/sha1/)上的包文档确实有一个示例来说明这一点。它是作为 New 函数的示例，但它是页面上唯一的示例，并且它在页面顶部附近有一个链接，因此值得一看。完整的例子是，

> 代码：

```
h := sha1.New()
io.WriteString(h, "His money is twice tainted: 'taint yours and 'taint mine.")
fmt.Printf("% x", h.Sum(nil)) 
```

> 输出：
> 
> 59 7f 6a 54 00 10 f9 4c 15 d7 18 06 a9 9a 2c 87 10 e7 47 bd

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2015-02-25T20:01:45.367

您实际上可以以更简洁和惯用的方式执行此操作：

```
// Assuming 'r' is set to some inbound net/http request
form_value := []byte(r.PostFormValue("login_password"))
sha1_hash := fmt.Sprintf("%x", sha1.Sum(form_value))

// Then output optionally, to test
fmt.Println(sha1_hash) 
```

在这个包含 login_password 字段的[http.Request](http://golang.org/pkg/net/http/#Request) POST 的简单示例中，值得注意的是，调用[fmt.Sprintf()](http://golang.org/pkg/fmt/#Sprintf)`%x`将哈希值转换为十六进制，而无需包含`import "encoding/hex"`声明。

（我们使用[fmt.Sprintf()](http://golang.org/pkg/fmt/#Sprintf)而不是[fmt.Printf()](http://golang.org/pkg/fmt/#Printf)因为我们将字符串输出到变量赋值，而不是[io.Writer](http://golang.org/pkg/io/#Writer)接口。）

同样值得参考的是[sha1.Sum()函数以与](http://golang.org/src/crypto/sha1/sha1.go?s=2235:2267#L115)[sha1.New()](http://golang.org/src/crypto/sha1/sha1.go?s=900:920#L41)定义相同的方式详细实例化：

```
func New() hash.Hash {
    d := new(digest)
    d.Reset()
    return d
}

func Sum(data []byte) [Size]byte {
    var d digest
    d.Reset()
    d.Write(data)
    return d.checkSum()
} 
```

这适用于 Golang 标准加密集中的 Sha 库变体（至少在发布时），例如[Sha512](http://golang.org/src/crypto/sha512/sha512.go)。

最后，如果愿意，他们可以遵循 Golang 的 [to]String() 实现，使用类似`func (h hash.Hash) String() string {...}`封装流程的方法。

这很可能超出了原始问题的预期范围。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-04-03T11:33:12.283

```
h := sha1.New()
h.Write(content)
sha := h.Sum(nil)  // "sha" is uint8 type, encoded in base16

shaStr := hex.EncodeToString(sha)  // String representation

fmt.Printf("%x\n", sha)
fmt.Println(shaStr) 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-12-04T12:23:20.417

这里有一些很好的例子：

*   [http://golang.org/src/pkg/crypto/hmac/hmac_test.go](http://golang.org/src/pkg/crypto/hmac/hmac_test.go)
*   [http://www.jokecamp.com/blog/examples-of-creating-base64-hashes-using-hmac-sha256-in-different-languages/#go](http://www.jokecamp.com/blog/examples-of-creating-base64-hashes-using-hmac-sha256-in-different-languages/#go)

第二个示例针对 sha256，要执行 sha1 十六进制，您将执行以下操作：

```
// Calculate the hexadecimal HMAC SHA1 of requestDate using sKey                
key := []byte(c.SKey)                                                           
h := hmac.New(sha1.New, key)                                                    
h.Write([]byte(requestDate))                                                    
hmacString := hex.EncodeToString(h.Sum(nil)) 
```

（来自[https://github.com/soniah/dnsmadeeasy](https://github.com/soniah/dnsmadeeasy)）

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-11-12T00:29:36.610

这是一个可用于生成 SHA1 哈希的函数：

```
// SHA1 hashes using sha1 algorithm
func SHA1(text string) string {
    algorithm := sha1.New()
    algorithm.Write([]byte(text))
    return hex.EncodeToString(algorithm.Sum(nil))
} 
```

我在这里汇总了一组这些实用程序哈希函数：[https ://github.com/shomali11/util](https://github.com/shomali11/util)

你会发现`FNV32`, `FNV32a`, `FNV64`, `FNV65a`, `MD5`, `SHA1`,`SHA256`和`SHA512`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-13T10:10:21.617

```
// Get sha1 from string
func Hashstr(Txt string) string {
    h := sha1.New()
    h.Write([]byte(Txt))
    bs  := h.Sum(nil)
    sh:= string(fmt.Sprintf("%x\n", bs))
    return sh
} 
```

# linux - 在 tty 之间移动作业

> ID：10701877
> 
> 赞同：4
> 
> 时间：2012-05-22T12:16:20.950
> 
> 标签：linux, background, tty

有人知道是否可以在 tty 之间转移工作？

示例：在 ttys004 开始作业，按 Ctrl+Z 将其分离，键入 bg 1 将其移至背景。然后我想从示例 ttys002 中找到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:21:44.737

不要认为这是可能的。如果您希望进程解除（附加），您可以使用**屏幕。**[欲了解更多信息](http://linux.die.net/man/1/screen)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-14T16:59:55.367

`retty`或者`reptyr`可以帮助你。

关于 serverfault的[这个答案有更多信息。](https://serverfault.com/questions/55880/moving-an-already-running-process-to-screen)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T12:48:18.677

在开始工作之后，这是不可能的，但如果你将它作为一个守护进程启动，也许你可以在切换 tty 时对其进行 fg （因为它是由你继承的`init`，没有理由你不能）

# javascript - HandleBar js和Mustache js的关系

> ID：10701878
> 
> 赞同：12
> 
> 时间：2012-05-22T12:16:23.077
> 
> 标签：javascript, handlebars.js, mustache

我对 Handlebar js 很陌生。在每篇关于 HandleBar js 的文章中，都有一个词叫做（mustache js）。那么，
1、Handllebar js和Mustache js是什么关系？
2\. 车把js之前有必要读小胡子js吗？
3\. HandleBar js 相对于 Mustache js 有什么优势？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-22T12:20:52.297

Handlebars.js 是 Mustache.js 的超集。它提供了将 JSON 插入模板的所有相同功能以及执行一些基本 if/then 等的附加功能。总的来说，我发现使用 Handlebars 进行模板化要容易得多。

Mustache 非常强调模板中根本没有任何逻辑。插入其中的每一块都应该预先咀嚼，因此不需要任何逻辑。我觉得这根本不现实。

刚刚意识到我没有回答你的一个问题。不，在使用 Handlebars 之前无需阅读有关 Mustache 的信息。Handlebars 文档本身就足够了。

PS 我们最喜欢的 Handlebars 功能之一是“帮助程序”，它允许您使用语言为特定事物创建新的关键字（例如，我们使用 1 来格式化数字，有时用“N/A”替换它们以表示零值）。

PPS 试用 Handlebars 并查看一些正在运行的模板（以及使用您自己的模板和 JSON）的好方法是[http://www.tryhandlebarsjs.com/](http://www.tryhandlebarsjs.com/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T12:20:43.370

根据[这个](http://sorescode.com/2010/09/12/benchmarks.html)网站（这也提供了两者之间的基准）

> handlebars.js 是一个编译后的 mustache 实现，具有一些附加功能

# java - 矿物 = 0 后图像消失

> ID：10701879
> 
> 赞同：2
> 
> 时间：2012-05-22T12:16:23.237
> 
> 标签：java

在我的程序中，如果您有所需的矿物质，您可以在小程序上放置图片

你从 400 开始，每个是 100 矿物，所以你放置 3，然后在第 4 天它会删除所有其他矿物

```
public int Minerals

    //Pylons
    int xCoord[];
    int yCoord[];
    int numSquare;
    boolean firstPaint;

public void init()
    {   

        Minerals = 400;

        pylon = getImage(getDocumentBase(),"image/pylon.png");
    //pylons
        xCoord = new int[100];
        yCoord = new int[100];
        numSquare = 0;
        firstPaint = true;
}

public void paint(Grapics g)
{

            pylons(g);
}

    public void pylons(Graphics g)
    {
        //Building the pylons
        if(Minerals >= 100)
        {

            for (int k = 0; k < numSquare; k++)
            {
                    g.drawImage(pylon,xCoord[k],yCoord[k],85,85,this);
                    //Makes cursor normal.
                    setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
            }

        }

        //Checks if buildPylon is 1 if so it will draw the infoScreen and then set the cursor to pylon
        if(buildPylon == 1)
        {
            g.drawImage(pylon,510,820,100,100,this);
            //Use the custom cursor  
            setCursor(cursor);  
        }
    }

    private void handlePylonPlacement()
    {
        //This takes away 100 minerals and will add 9 population and make buildPylon 0 again
        if(decrementMinerals(100))
            addPopMax(9);
            buildPylon = 0;

    } 

    private boolean decrementMinerals(int amount)
    { 
        //This Is where it takes away the minerals
        if(Minerals - amount >= 0) // prevent situation where you go into negative minerals
        {
             Minerals -= amount;
             return true;
        }
        else
             return false;
    }

    private void addPopMax(int amount)
    {
        //Add the population (9)
        if(popMax + amount <= 72) // restrict addition to pop-max to a sane upper bound
             popMax += amount;
    }

public boolean mouseDown(Event e, int x, int y) {
        //Makes the ints xCoord2 to equal x and same for the other
        xCoord2 = x;
        yCoord2 = y;
        repaint();

        if (numClicks == 10) {//Title screen        
            numClicks++;
            repaint();
        }

    //Checks to see if buildPylon == 1 then builds the pylon if its in the correct place.

    if(buildPylon == 1)
    {
        if(x > 1 && x < 1275 && y > 711 && y < 948) // Checks to see if the person clicked in this area
        {}
        else if(x > 378 && x < 876 && y < 568 && y < 705) // Checks to see if the person clicked in this area
            {}else if (Minerals >= 100) 
            {
            xCoord[numSquare] = x;
            yCoord[numSquare] = y;
            numSquare++;
            handlePylonPlacement(); // call your new handler
            repaint();
             }  
        }

        return true;
    } 
```

而不是删除它们，我希望塔继续画在屏幕上......有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:29:24.893

在`handlePylonPlacement()`，你的意思是

```
 private void handlePylonPlacement()
    {
        //This takes away 100 minerals and will add 9 population and make buildPylon 0 again
        if (decrementMinerals(100)) {
            addPopMax(9);
            buildPylon = 0;
        }    
    } 
```

?

# java - 线程“主”java.lang.NoClassDefFoundError 中的异常：设置 PATH 和 CLASSPATH 后

> ID：10701880
> 
> 赞同：0
> 
> 时间：2012-05-22T12:16:26.393
> 
> 标签：java

我试图编写一个程序，我想在 jar 中访问类。

我使用 netbeans 作为 ide，Windows 7 操作系统，并在库中添加了 jar。但我不断收到错误。

```
Exception in thread “main” java.lang.NoClassDefFoundError:after setting PATh and CLASSPATH

I have set the PATh variable to my <jdk directory>/bin;
CLASSPATH to %CLASSPATH%;
and JAVA_HOME to <jdk directory>

<jdk directory> =C:\Program Files\Java\jdk1.7.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:26:01.660

您刚刚学到了重要的一课：Java 忽略 CLASSPATH 环境变量。

为方便起见，您需要 JAVA/bin 的 PATH，但 CLASSPATH 没有用。我使用的任何机器上都没有。

您可以看到原因：它们是如此特殊且特定于给定项目。

您应该学习如何在 javac.exe 和 java.exe 上使用 -cp 选项进行设置。您可以使用 Ant 构建更复杂的项目。如果您部署到 Java EE 应用服务器，则需要了解类加载器层次结构。

如果您坚持使用 NetBeans，我建议您查看帮助以了解它希望您如何设置 CLASSPATH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:26:43.900

您应该在类路径中有 jar 文件以访问其中的类。此外，当您从 IDE 运行程序时，它会覆盖您在系统级别所做的任何类路径设置。请在 IDE 中检查您的构建路径。

# php - 如何在php中制作iframe

> ID：10701881
> 
> 赞同：-1
> 
> 时间：2012-05-22T12:16:27.530
> 
> 标签：php, html, iframe

我有一个关于 iframe 的问题，但我真的不知道如何开始。我认为最好立即提供网址。[http://www.nielsjansen.be/project/saved.php](http://www.nielsjansen.be/project/saved.php)

当您单击文章的正文时，文章会在同一窗口中打开，这很好，但我想保留我的菜单等。这怎么可能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:45:50.600

这取决于您在 PHP 和 HTML 方面的专业水平，但我不会使用 IFRAME，因为它们往往会被弃用。

正如@Aziz 所说，IFRAME 位于 HTML 中，而非 PHP 域中。

如果您可以编辑您的代码并且能够使用 PHP 进行编程，那么一个非常基本的技术就是编写一个函数来输出您的菜单广告，并在每个页面（包括文章页面）中使用它。这是穴居人的解决方案，要变得更复杂，应该考虑布局、内容管理等。

如果你不能用 PHP 编程，事情会变得更加困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T21:44:42.093

您实际上是在这里问一个 HTML 问题。由于我没有您的代码示例，因此我将对其进行尝试：

```
<a href="mylink.html" target="myframe">
<iframe name="myframe" src="mypage.html"></iframe> 
```

那应该让你开始。您需要做的就是`name`为您的 iframe 赋予一个属性，并`target`为您的链接赋予一​​个属性。

注意：我强烈建议*不要*使用 iframe，因为它们在 HTML5 中已被弃用，但*一直*（恕我直言）是不好的做法。只有一个案例是我在一个项目中使用它们，如果我真的下定决心，完全可以避免这种情况。

希望有帮助。

# android - Android：以编程方式更改语言

> ID：10701882
> 
> 赞同：2
> 
> 时间：2012-05-22T12:16:27.973
> 
> 标签：android, button, locale, onclicklistener

我有 3 个按钮来更改语言。所以我需要制定方法，在其中我可以将侦听器设置为按钮，每次按下它们时都会改变语言。我试过这个[https://stackoverflow.com/a/2900144/1088229](https://stackoverflow.com/a/2900144/1088229)但这样它只改变了一次语言环境，似乎这不再起作用（如果我再次点击，它甚至没有响应）。所以我`changeLanguageListener()`在监听器的末尾添加了，所以监听器被刷新了。

没关系，我是如何解决的还是有其他方法？

```
private void changeLanguageListener() {
    final Button butEn = (Button) findViewById(R.id.button_language_en);
    final Button butLt = (Button) findViewById(R.id.button_language_lt);
    final Button butRu = (Button) findViewById(R.id.button_language_ru);
    OnClickListener listener = new OnClickListener() {

        public void onClick(View v) {
            Button but = (Button) v;
            Resources res = getResources();
            String current = res.getConfiguration().locale.getCountry();
            Log.i("Current", current);
            String localeString = new String(current);
            if (but.equals(butEn)) {
                localeString = "en";
            } else if (but.equals(butLt)) {
                localeString = "lt";
            } else if (but.equals(butRu)) {
                localeString = "ru";
            }
            Log.i("Clicked", localeString);

            if (!current.equalsIgnoreCase(localeString) && localeString.length() > 0) {
                // Change locale settings in the app.
                DisplayMetrics dm = res.getDisplayMetrics();
                android.content.res.Configuration conf = res.getConfiguration();
                conf.locale = new Locale(localeString.toLowerCase());
                res.updateConfiguration(conf, dm);  
                //refresh menu
                setGridView();
                //added this line to get refreshed listener
                changeLanguageListener();
            }               
        }
    };
    butEn.setOnClickListener(listener);
    butLt.setOnClickListener(listener);
    butRu.setOnClickListener(listener);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:03:09.593

因此，由于我只允许更改语言环境的两个活动（两种菜单模式），我只是在更改语言环境后立即重新启动 Activity，所以一切都被刷新了。没有找到其他更好的解决方案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-11T05:28:48.950

```
Resources res = context.getResources();
// Change locale settings in the app.

DisplayMetrics dm = res.getDisplayMetrics();

android.content.res.Configuration conf = res.getConfiguration();

conf.locale = new Locale(language_code.toLowerCase());
res.updateConfiguration(conf, dm); 
```

如果您有特定语言的内容 - 您可以根据设置进行更改。## 标题 ##

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T08:20:42.453

我不建议在您的应用程序中更改语言。更好的解决方案是打开系统区域设置的按钮。您可以为此使用以下意图。

```
startActivityForResult(new Intent(android.provider.Settings.ACTION_LOCALE, 0); 
```

有关区域设置的更多信息：http: [//developer.android.com/reference/android/provider/Settings.html#ACTION_LOCALE_SETTINGS](http://developer.android.com/reference/android/provider/Settings.html#ACTION_LOCALE_SETTINGS)

# php - 使用复选框和 JQuery 过滤内容

> ID：10701884
> 
> 赞同：1
> 
> 时间：2012-05-22T12:16:38.987
> 
> 标签：php, jquery

我在使此代码正常工作时遇到问题：

```
 $(function(){
        $('div.tags').delegate('input:checkbox', 'change', function() {
            var $lis = $('.results > li').hide();
            //For each one checked
            $('input:checked').each(function() {
                    $lis.filter('.' + $(this).attr('rel')).show();
            });
        });
    }); 
```

使用 HTML 如下：

```
 <div class="tags">
        <label><input type="checkbox" rel="arts" /> Arts </label>
        <label><input type="checkbox" rel="computers" /> Computers </label>
        <label><input type="checkbox" rel="health" /> Health </label>
        <label><input type="checkbox" rel="video-games" /> Video Games </label>
      </div>
      <ul class="results">
         <li class="arts computers">Result 1</li>
         <li class="video-games">Result 2</li>
         <li class="computers health video-games">Result 3</li>
         <li class="arts video-games">Result 4</li>
      </ul> 
```

我已经在 IE、FF 和 Opera 中尝试过，但没有得到预期的结果。也就是说，点击复选框后内容没有被过滤？我正在尝试复制与此类似的内容：

[http://www.houseoffraser.co.uk/Jeans+for+Women/302,default,sc.html](http://www.houseoffraser.co.uk/Jeans+for+Women/302,default,sc.html)

注意页面左侧栏的手风琴效果。我不太担心手风琴本身，我现在关注的是复选框功能。在页面加载时，所有查询结果（大约 1300 条左右）都会显示给用户。

然后，用户可以通过单击复选框来过滤或细化结果。我假设这是某种 Jquery/Ajax 脚本，但不完全确定？我在正确的轨道上吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:42:09.267

您在[评论](https://stackoverflow.com/questions/10701884/filter-content-using-checkboxes-jquery/10701958#comment13894230_10701958)中提到您正在使用 jQuery 1.3

jQuery 的[`delegate()`方法](http://api.jquery.com/delegate/)是在 1.4.2 中引入的，所以不可用。您将不得不使用更高版本的 jQuery（为什么要使用这么旧的版本？）。

如果您打开开发者控制台（Chrome 中的 F12 快捷方式），您应该会看到一条错误消息：`TypeError: Object [object Object] has no method 'delegate'`

如果您*需要*使用 jQuery 1.3，请尝试：

```
$(function() {
    $('div.tags').bind('change', function(e) {
        var that = e.originalEvent.target;

        if ($(that).is('input:checkbox')) {
            var $lis = $('.results > li ').hide();
            //For each one checked
            $('input:checked ').each(function() {
                $lis.filter('.' + $(that).attr('rel')).show();
            });
        }
    });
}); 
```

你可以[在这里看到它的工作原理](http://jsfiddle.net/X3aTz/3) </p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:07:27.460

```
$(document).ready(function () {
            $('.results > li').hide();

            $('div.tags').find('input:checkbox').live('click', function () {
                $('.results > li').hide();
                $('div.tags').find('input:checked').each(function () {
                    $('.results > li.' + $(this).attr('rel')).show();
                });
            });
        });      ​ 
```

对于现场演示，请参阅此链接：http: [//jsfiddle.net/nanoquantumtech/Ddnuh/](http://jsfiddle.net/nanoquantumtech/Ddnuh/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-22T12:22:44.427

试试这个

```
 $(function(){
        $('div.tags').delegate('input:checkbox', 'change', function() {
            var $lis = $('.results > li').hide();
            //For each one checked
            $('input[type="checked"]:checked').each(function() {
                    $lis.filter('.' + $(this).attr('rel')).show();
            });
        });
    }); 
```

# f# - 如何将 OpenXML SDK 与 F# 和 MemoryStreams 一起使用

> ID：10701885
> 
> 赞同：2
> 
> 时间：2012-05-22T12:16:41.810
> 
> 标签：f#, openxml

[本文](http://msdn.microsoft.com/en-us/library/ee945362%28v=office.11%29.aspx#InMemory_UsingMemoryStream)说使用 OpenXML SDK 时需要使用可调整大小的 MemoryStreams，并且示例代码可以正常工作。

但是，当我将示例 C# 代码翻译成 F# 时，文档保持不变：

```
open System.IO
open DocumentFormat.OpenXml.Packaging
open DocumentFormat.OpenXml.Wordprocessing

[<EntryPoint>]
let Main args =
    let byteArray = File.ReadAllBytes "Test.docx"

    use mem = new MemoryStream()
    mem.Write(byteArray, 0, (int)byteArray.Length)

    let para = new Paragraph()
    let run = new Run()
    let text = new Text("Newly inserted paragraph")
    run.InsertAt(text, 0) |> ignore
    para.InsertAt(run, 0) |> ignore

    use doc = WordprocessingDocument.Open(mem, true)
    doc.MainDocumentPart.Document.Body.InsertAt(para, 0) |> ignore

    // no change to the document
    use fs = new FileStream("Test2.docx", System.IO.FileMode.Create)
    mem.WriteTo(fs)

    0 
```

当我使用时它工作正常`WordprocessingDocument.Open("Test1.docx", true)`，但我想使用`MemoryStream`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T16:44:37.127

在您关闭之前，您所做的更改`doc`不会反映在 MemoryStream 中。放置如下`mem``doc``doc.Close()`

```
...
doc.MainDocumentPart.Document.Body.InsertAt(para, 0) |> ignore 
doc.Close()
... 
```

解决了问题，您将`Newly inserted paragraph`在`Test2.docx`.

此外，您的代码段缺少一个必需的参考：

```
open DocumentFormat.OpenXml.Packaging 
```

从`WindowsBase.dll`.

**编辑**：正如 ildjarn 指出的那样，更多的 F# 惯用语将是以下重构：

```
open System.IO
open System.IO.Packaging
open DocumentFormat.OpenXml.Packaging 
open DocumentFormat.OpenXml.Wordprocessing 

[<EntryPoint>] 
let Main args = 
    let byteArray = File.ReadAllBytes "Test.docx" 

    use mem = new MemoryStream() 
    mem.Write(byteArray, 0, (int)byteArray.Length) 

    do
        use doc = WordprocessingDocument.Open(mem, true) 
        let para = new Paragraph() 
        let run = new Run() 
        let text = new Text("Newly inserted paragraph") 
        run.InsertAt(text, 0) |> ignore     
        para.InsertAt(run, 0) |> ignore
        doc.MainDocumentPart.Document.Body.InsertAt(para, 0) |> ignore 

    use fs = new FileStream("Test2.docx", FileMode.Create) 
    mem.WriteTo(fs) 

    0 
```

# java - 如何在eclipse之后执行代码：maven中的eclipse？

> ID：10701886
> 
> 赞同：1
> 
> 时间：2012-05-22T12:16:41.927
> 
> 标签：java, eclipse, maven, groovy, eclipse-plugin

我想在 eclipse 插件 (eclipse:eclipse) 的 eclipse 目标运行后运行一些代码。

eclipse 插件的文档说 generate-resources 阶段是在 eclipse 目标之前执行的，但它没有提到任何**在**. 我想在 gmaven-plugin 中包含代码，但找不到正确的配置：

```
<execution>
    <id>delete_generated_sources_from_cp</id>
    <phase>generate-resources</phase>
    <goals>
        <goal>execute</goal>
    </goals>
    <configuration>
        <providerSelection>1.7</providerSelection>
        <source>
            modifyClasspath.groovy
        </source>
    </configuration>
</execution> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:39:54.107

eclipse:eclipse 不是执行代码的好方法。我的意思是如果你想将项目导入 Eclipse，你应该使用 'eclipse:eclipse' 否则你不应该。

执行代码取决于您的代码；如果这是基于 Web 的，您应该将其部署在您的应用程序服务器中。如果它有可执行的主类，你应该用'java'命令执行它。

> 我想在 gmaven-plugin 中包含代码，但我找不到正确的配置

我不明白你的意思。你能解释更多..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:23:40.777

只需将要执行的插件添加到项目中即可。如果您将插件的执行添加到阶段，如果您运行（或流程资源之后的任何阶段）`process-resources`，它将在 eclipse 插件之后执行`mvn process-resources`

你也可以直接调用它们：`mvn eclipse:eclipse otherplugin:goal`

# php - Twig & PHP ActiveRecord - 无法从连接表访问字段

> ID：10701888
> 
> 赞同：1
> 
> 时间：2012-05-22T12:16:46.987
> 
> 标签：php, codeigniter, twig, phpactiverecord

我无法使用 PHPActiveRecord/Twig 访问连接表。这是简化的代码。它有两个模型（代码和用户），每个代码都属于一个用户，所以我想用代码作者的名字列出代码。

## php

```
// model
class Code extends ActiveRecord\Model {
    static $belongs_to = array(
        array('user'),
    );
}

class User extends ActiveRecord\Model {
    static $has_many = array(
        array('code'),
    );
}

// controller
$codes = Code::all(array('include' => 'user'));
var_dump($codes);      //-> successfully displayed codes list and their authors

$this->twig->display('codelist.twig', $codes); 
```

## 模板.twig

```
{% for code in codes %}
{{ code.name }}        //-> successfully displayed code's name
{{ code.user.name }}   //-> failed to output user's name with error
{% endfor %}
// error:
// An exception has been thrown during the rendering of a template ("Call to undefined method: user") in "inc/template.twig" at line **. 
```

我看到了这个页面： [http ://twig.sensiolabs.org/doc/templates.html](http://twig.sensiolabs.org/doc/templates.html)

> 执行
> 
> 为方便起见， foo.bar 在 PHP 层做了以下事情：
> 
> 检查 foo 是否为数组并且 bar 是否为有效元素；如果不是，并且 foo 是一个对象，则检查 bar 是否是一个有效属性；如果不是，并且如果 foo 是一个对象，请检查 bar 是一个有效的方法（即使 bar 是构造函数 - 使用 __construct() 代替）；如果不是，并且如果 foo 是一个对象，请检查 getBar 是一个有效的方法；如果不是，并且如果 foo 是一个对象，则检查 isBar 是一个有效的方法；如果不是，则返回一个空值。另一方面， foo['bar'] 仅适用于 PHP 数组：
> 
> 检查 foo 是否为数组并且 bar 是否为有效元素；如果不是，则返回一个空值。

虽然我可以通过 $codes[0]->user 访问用户属性，但为什么我不能访问 twig 模板文件中的用户属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:40:41.617

感谢greut，我解决了这个问题。我在 PHPActiveRecord 的 lib/Model.php 中替换了函数 __isset。

```
/**
 * Determines if an attribute exists for this {@link Model}.
 *
 * @param string $attribute_name
 * @return boolean
 */
public function __isset($name)
    {
        // check for getter
        if (method_exists($this, "get_$name"))
        {
            $name = "get_$name";
            $value = $this->$name();
            return $value;
        }

        return $this->read_attribute($name);
    } 
```

[https://github.com/kla/php-activerecord/issues/156](https://github.com/kla/php-activerecord/issues/156)

# objective-c - 通过 libssh2 向设备发送数组

> ID：10701892
> 
> 赞同：0
> 
> 时间：2012-05-22T12:17:14.460
> 
> 标签：objective-c, ios, ssh, libssh2

我正在玩 libssh2 并设法让这个测试应用程序在我的 iPhone 上运行（运行 5.1.1）

[http://www.x2on.de/2011/02/02/libssh2-for-ios-iphone-and-ipad-example-app-with-ssh-connection/#comment-1281](http://www.x2on.de/2011/02/02/libssh2-for-ios-iphone-and-ipad-example-app-with-ssh-connection/#comment-1281)

应用程序连接得很好，但问题是我要连接的设备将接收一组十六进制值。我的问题是我无法弄清楚如何做到这一点，因为通过 SSH 发送数据的两个可用函数是

**int libssh2_channel_exec(LIBSSH2_CHANNEL *channel, const char *command);**

或者

**ssize_t libssh2_channel_write(LIBSSH2_CHANNEL *channel, const char *buf, size_t buflen);**

我想发送的数据是例如

**字符 buf[6] = {0x00、0x03、0x14、0x02、0x00、0x00}；**

谁能帮我一把？我对 iOS 平台比较陌生，如果这是一个非常简单的问题，我很抱歉 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:32:07.110

libssh2_channel_write() 将准确发送您要求的字节，这很可能是您在此处显示的那 6 个字节。

# wpf - 可见性动画从隐藏到折叠，反之亦然

> ID：10701898
> 
> 赞同：15
> 
> 时间：2012-05-22T12:17:49.937
> 
> 标签：wpf, animation, mvvm, styles

我正在尝试实现类似于 iPhone 消息视图的功能。单击按钮时，每条消息都会滑出删除按钮，单击“完成”时，删除按钮会滑入。除了**滑动**效果外，我已经能够使用 mvvm 实现这一点。以下是我可以用我有限的知识写的风格：

```
<Style TargetType="Border">
    <Style.Triggers>
        <DataTrigger Binding="{Binding ShowDeleteButton}" Value="false">
            <Setter Property="Visibility" Value="Collapsed"/>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

这里“ShowDeleteButton”是视图模型中的布尔属性。这工作正常。但是崩溃和“变得可见”正在突然而非常迅速地发生。我需要一些滑动动画。请注意，当删除按钮消失时，其余控件应占用其余空间，并且当按钮出现时，现有控件应缩小并为按钮留出空间。我尝试了故事板动画，但即使几个小时后我也无法弄清楚它抛出的奇怪错误。这是代码：

```
<DataTrigger Binding="{Binding ShowDeleteButton}" Value="false">
     <DataTrigger.EnterActions>
          <BeginStoryboard>
               <Storyboard BeginTime="0:0:1">
                  <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visiblity">
                     <DiscreteObjectKeyFrame Value="{x:Static Visibility.Collapsed}" />
                  </ObjectAnimationUsingKeyFrames>
                </Storyboard>
           </BeginStoryboard>
      </DataTrigger.EnterActions>
      <DataTrigger.ExitActions>
            <BeginStoryboard>
               <Storyboard BeginTime="0:0:1">
                 <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visiblity">
                     <DiscreteObjectKeyFrame Value="{x:Static Visibility.Visible}" />
                 </ObjectAnimationUsingKeyFrames>
               </Storyboard>
            </BeginStoryboard>
      </DataTrigger.ExitActions>
</DataTrigger> 
```

有人可以帮助陷入困境的灵魂吗？

问候

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-22T17:22:54.990

老问题……嗯……

无论如何...忘记能见度。诀窍是对`Width/Height`放置在宽度设置为自动的控件`Grid's Column/Row`进行`Column/Row`动画**处理。**呜呜 :)

所以这里是一个`Grid`命名的“容器”，有两列。在第一列中可以放置任何你想要的东西，但你应该将它对齐到右，因为你希望它在显示删除按钮时移动。在第二列中有一个控件*（代表您的 DeleteButton）*请注意，第一列有`Width="*"`，第二列有`Width="Auto"`

```
<Grid Background="Purple" Width="350" Height="100">
    <CheckBox Content="Show" IsChecked="{Binding Path=ShowDeleteButton}" Height="16" HorizontalAlignment="Left" Margin="12,12,0,0" Name="checkBox1" VerticalAlignment="Top" />
    <Grid x:Name="container" Margin="40,0,0,0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Grid Name="content" Margin="0">
            <Label Content="Look I'm flyin'!" Margin="0,30,10,0" VerticalAlignment="Top" HorizontalAlignment="Right"/>
        </Grid>
        <Control Grid.Column="1" Margin="0">
            <Control.Template>
                <ControlTemplate>
                    <ControlTemplate.Triggers>
                        <DataTrigger Binding="{Binding ShowDeleteButton}" Value="true">
                            <DataTrigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation 
                                Storyboard.TargetName="flyout"
                                Storyboard.TargetProperty="(Grid.Width)" 
                                From="0" To="120" Duration="0:0:1" AutoReverse="False"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.EnterActions>
                            <DataTrigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation 
                                Storyboard.TargetName="flyout"
                                Storyboard.TargetProperty="(Grid.Width)" 
                                From="120" To="0" Duration="0:0:1" AutoReverse="False"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.ExitActions>
                        </DataTrigger>
                    </ControlTemplate.Triggers>
                    <Grid x:Name="flyout" Width="0">
                        <Rectangle Fill="Green"/>
                        <Label Content="I'm DELETE button" Margin="10,30,0,0" VerticalAlignment="Top"/>
                    </Grid>
                </ControlTemplate>
            </Control.Template>
        </Control>
    </Grid>
</Grid> 
```

并且`Control`网格的第二列`DataTrigger`基于您的 ViewModel 的属性*“ShowDeleteButton”*

由于放置`Width`的列`Control`是`Auto`您可以更改`Control`using simple的宽度`DoubleAnimation`并获得所需的行为。

**编辑**

如果您希望弹出窗口覆盖其他所有内容，请查看此内容。

```
<Grid x:Name="LayoutRoot">
    <Grid x:Name="container" Width="120" HorizontalAlignment="Right">
            <Button x:Name="button" Content="In" Margin="0,13,7.5,0" VerticalAlignment="Top" HorizontalAlignment="Right" d:LayoutOverrides="HorizontalAlignment">
                <Button.Triggers>
                    <EventTrigger RoutedEvent="Button.Click">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation 
                                    Storyboard.TargetName="flyout"
                                    Storyboard.TargetProperty="(Grid.Width)" 
                                    From="0" To="120" Duration="0:0:1" AutoReverse="False"/> 
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Button.Triggers>
            </Button>
    </Grid>
    <Grid x:Name="flyout" Width="120" Margin="0" HorizontalAlignment="Right">
            <Rectangle Fill="Green"/>
            <Label Content="This is some label" Margin="6.038,27,1.006,0" VerticalAlignment="Top"/>
            <Button Content="Out" Margin="11.917,58,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" Width="80.083">
                <Button.Triggers>
                    <EventTrigger RoutedEvent="Button.Click">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation 
                                    Storyboard.TargetName="flyout"
                                    Storyboard.TargetProperty="(Grid.Width)" 
                                    From="120" To="0" Duration="0:0:1" AutoReverse="False"/> 
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Button.Triggers>
            </Button>
        </Grid>
</Grid> 
```

请注意，按钮“Out”可以在移动时单击。它可能应该被禁用。我只是这样做是因为我想在 xaml 中简单地完成它。当然你可以使用mahapps。或者你可以让它像在 MahApps 中一样快，并且不可能点击两次。:) 我看过 MahApps FlyOutDemo，我的解决方案对我来说看起来要简单得多。而且我不需要第三方库。

# c++ - C++ Checkbox 的行为类似于单选按钮 WINAPI（无 MFC）

> ID：10701900
> 
> 赞同：0
> 
> 时间：2012-05-22T12:17:58.033
> 
> 标签：c++, winapi, radio-button, checkbox

我试图在我的应用程序中获得 2 个复选框以充当单选按钮。IE - 当一个被勾选时，另一个按钮将自行取消。我不相信这可以通过属性菜单来实现，所以我试图在代码中做到这一点。

我根本不知道如何做到这一点，所以我有点迷路了。这是我到目前为止所拥有的（这不起作用）

```
 case BN_CLICKED:
    if(BN_CLICKED == IDC_CHECK_MW){
        SendMessage(GetDlgItem(hDlg,IDC_CHECK_MW), BM_GETCHECK, (WPARAM)0 ,(LPARAM)0) == BST_CHECKED;
    } 
```

我可能很笨，但任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:23:20.413

如果您有把手或方便的东西，只需发送`BM_SETCHECK`：

```
int checkState = SendMessage (otherHwnd, BM_GETCHECK, 0, 0);
SendMessage (otherHwnd, BM_SETCHECK, checkState == BST_CHECKED ? BST_UNCHECKED : BST_CHECKED, 0); 
```

这当然假设它只能被选中或未被选中，而不是处于中间状态。我也真的会重新考虑你的想法，因为复选框就是这样的，而单选按钮是这种行为的正确工具。

此外，在您的消息切换中，您可能希望这样：

```
case WM_COMMAND:
{
    if (HIWORD (wParam) == BN_CLICKED)
    {
        switch (LOWORD (wParam))
        {
            case IDC_CHECK_MW:
                //check this, uncheck that
                break;

            case IDC_OTHER_CHECK:
                //check other, uncheck first
                break;

            default:
                //something went wrong
        }
    }    
} 
```

# jquery - jquery 循环插件响应不好

> ID：10701902
> 
> 赞同：1
> 
> 时间：2012-05-22T12:18:16.813
> 
> 标签：jquery, plugins, cycle

我已经使用 jquery 循环插件实现了幻灯片：幻灯片的问题是它显示远离其容器的第一张图像，然后正确显示所有幻灯片图像，第一张图像需要时间加载，直到它保持在最右边的角落我的网站让我的网站看起来很脏......请帮忙

链接在[这里](http://tripmaker.co/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:32:13.720

在css下面添加

```
.slideshow img{top:0; left:0; position:absolute; display:none;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:23:46.547

`.slideshow {`为您的元素添加一些 CSS 定位属性

# scope - SSAS：多维数据集中的计算

> ID：10701904
> 
> 赞同：1
> 
> 时间：2012-05-22T12:18:19.470
> 
> 标签：scope, expression, ssas, mdx

我需要将我的计算分为三组： - 仅适用于基本单元格（叶子） - 适用于所有单元格 - 仅适用于合并单元格（更高层次结构级别的单元格） 例如，我有层次结构：Year-Quarter -月。此层次结构的基本单元格在“月”中，并在“年”和“季度”中合并单元格。

对于基本单元，我可以写这个“范围”：

```
SCOPE (
   [Measures].[Value] ,
   [DimProducts].[Name].[Donut] , 
   [DimTime].[Month].CHILDREN       // month only
      );
THIS = [Measures].[Value]*2+100500;
END SCOPE; 
```

而且我不知道如何编写合并单元格的“范围”？我不能为每个层次结构级别创建一个“范围”，例如：

```
SCOPE (
   [Measures].[Value] ,
   [DimProducts].[Name].[Donut] , 
   [DimTime].[Quarter].CHILDREN    // quarter only
      );
...
END SCOPE;
SCOPE (
   [Measures].[Value] ,
   [DimProducts].[Name].[Donut] , 
   [DimTime].[Year].CHILDREN       // year only
      );
...
END SCOPE; 
```

因为有许多维度和层次结构级别，所以必须对所有这些进行计算。也许有一种简单的方法可以解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:12:00.180

`SCOPE`您可以在的子立方体表达式中使用 MDX 函数。

假设您的*Year-Quarter-Month*用户层次结构具有*Year*、*Quarter*和*Month*级别，您可以使用以下表达式来处理高于*Month*级别的级别。

```
SCOPE ( [Measures].[Value]
      , [DimProducts].[Name].[Donut]
      , Descendants( [DimTime].[Year-Quarter-Month].[All]
                   , [DimTime].[Year-Quarter-Month].[Quarter]
                   , SELF_AND_BEFORE
                   )
      );
...
END SCOPE; 
```

参考：

*   [`Descendants`MDX 功能](http://msdn.microsoft.com/en-us/library/ms146075.aspx)
*   [`SCOPE`MDX 声明](http://msdn.microsoft.com/en-us/library/ms145989.aspx)

# android - How to dismiss a ContextMenu without the Back button?

> ID：10701912
> 
> 赞同：3
> 
> 时间：2012-05-22T12:19:07.753
> 
> 标签：android, android-activity, contextmenu, clicklistener

The application has a contextmenu opened and I want to close/dismiss it without using the back button. Is it possible to receive a click event somewhere so I can call close?

```
closeContextMenu () 
```

Or can I call

```
setCancelOnTouchOutside() 
```

somewhere like I can on a Dialog? Alternative for me is to refactor all my context menu's to PopupWindows which can also do

```
setOutsideTouchable() 
```

Anyone a good hint/idea?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:33:28.370

dispatch a key event (back)and you're done.

```
myView.getRootView().dispatchKeyEvent(new KeyEvent (KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_BACK)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:09:55.917

It sounds like you're describing a cancel listener type of behavior like you'd use in a dialog, but why not just use the back button?

# iphone - 更改界面方向时 UIScrollView 上的奇怪跳转（ATPagingView）

> ID：10701915
> 
> 赞同：1
> 
> 时间：2012-05-22T12:19:10.683
> 
> 标签：iphone, ios, ipad, uiscrollview

Github 上的项目：[https ://github.com/OmidH/ATPagingMod](https://github.com/OmidH/ATPagingMod)

在最后一行的节点中旋转时，我在 ATPagingView 中有一个奇怪的跳跃。该模块以 UITableView 的方式很好地处理 UIScrollview 的视图加载。我对其进行了修改，使其能够垂直滚动，而每一行又是一个 ATPagingView，它水平滚动，而不是在第一个分支中，防止在垂直方向滚动。到目前为止一切正常，但如果你在最后一行

```
currentPageIndex 
```

设置错误，我无法确定它发生的地方。

我真的很感激任何帮助。

要重现该错误：转到节点 9.x，其中 x > 0 并更改界面方向，您将看到除 9.x 之外的任何其他页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:53:29.597

我试图在这里解决您的问题。

我还根据您的需要上传了示例代码。

请从[这里](http://code.google.com/p/sugartin-info/downloads/detail?name=ScrollHV.zip)找到它。

# mysql - 如何使用mysql检查字段中的整数值

> ID：10701916
> 
> 赞同：0
> 
> 时间：2012-05-22T12:19:24.337
> 
> 标签：mysql

我在表中有一个类型为 varchar 的字段，它们的值看起来类似于

1.  red-chief-men-245-brown-94581
2.  adidas-men-agora-93945
3.  童鞋

在这种情况下，我只需要获取以连字符结尾的值，然后是整数 ex ("-94581" ， "-93945") ..

mysql中有什么方法可以得到它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:24:00.323

使用[`RLIKE`](http://dev.mysql.com/doc/refman/5.0/en/regexp.html#operator_regexp)运算符代替`LIKE`. 这应该有效：

```
SELECT * FROM table WHERE foo RLIKE '.*-[[:digit:]]*$' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:28:44.717

大概是这样的：

```
select  substr(searchfield,locate('_',searchfield)) as extractedfield from 
mytable where substr(searchfield,locate('_',searchfield)) > 0; 
```

# google-app-engine - Google App Engine 上 JPA 中的简单一对多关系

> ID：10701918
> 
> 赞同：2
> 
> 时间：2012-05-22T12:19:42.353
> 
> 标签：google-app-engine, jpa, orm, relational-database, one-to-many

即使在阅读[文档](https://developers.google.com/appengine/docs/java/datastore/transactions)之后，我似乎对 Google App Engine 的实体组也存在根本性的误解。我的目标是 ORM 的一个简单示例：我将一些员工分配到部门。一个员工只能分配到一个部门，但一个部门可以有多个员工。这是标准的一对多关系。

给定员工的密钥（电子邮件）和部门名称，我想同时查找员工和部门对象，如果它们不存在，则创建它们。

*下面是伪代码，不是用来编译的。*如果生成可以编译的代码可以帮助您帮助我，我很乐意这样做，但我认为我的问题是概念性的。

**数据对象：**

```
@Entity
public class Department {
  private Key key;
  private String name;
  // getters and setters
}

@Entity
@NamedQuery(name="getEmployeesInDept", query="SELECT a from Employee a WHERE a.dept=:dept")
public class Employee {
  private Key key;
  private String firstName;
  @ManyToOne
  private Department dept;
  // getters and setters
} 
```

**查找或创建**

```
Key employeeKey = KeyFactory.createKey("Employee", email);
Employee employee = entityManager.find(Employee.class, employeeKey);
if(employee == null)
{
  Key deptKey = KeyFactory.createKey("Department", deptName);
  Department dept = entityManager.find(Department.class, deptKey);
  if(dept == null)
  {
    dept = new Department();
    dept.setKey(deptKey);
    dept.setName(deptName);
    entityManager.persist(dept);
  }
  employee = new Employee();
  employee.setKey(employeeKey);
  employee.setFirstName(firstName);
  employee.setDept(dept);
  entityManager.persist(employee);
}
entityManager.close();
print("Found employee " + employee.getFirstName() + " from " + dept.getName() + " department!"); 
```

在我尝试迁移到 Google App Engine 之前，当我使用古老的通用 ORM 时，这就是完美的逻辑。

但是，在 GAE 上，我得到一个例外，例如：

> javax.persistence.PersistenceException：检测到尝试将 Employee("bob@mycompany.com") 建立为 Department(14) 的父级，但 Department(14) 标识的实体已在没有父级的情况下持久化。一旦对象被持久化，就不能建立或更改父对象。

虽然我知道为了让 Employee 和 Department 进入同一个实体组（我更喜欢），我必须让其中一个成为另一个的父级，但他们的关系并不是真正适合父子关系的关系我心中的范式。

我曾尝试在`entityManager.getTransaction().begin()`和之间包装各个部分`entityManager.getTransaction().end()`，但无济于事。

我可以通过将部门的密钥作为员工密钥的一部分来解决这个问题（从而使部门成为员工的父级），但是我不知道如何根据他们的电子邮件查找员工并弄清楚他们所在的部门，或者，相反，如何查找给定部门的所有员工。

这有意义吗？我应该如何在 GAE 中构建这种关系？当然，这是一种非常常见的模式，它有一个简单的解决方案，只是让我望而却步。

我确信我遗漏了这个难题的一些基本部分，因为在 GAE 的 ORM 中无法轻松表示简单的多对一外键似乎相当荒谬。

干杯!

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-22T12:34:06.103

因此，如果它不适合拥有的关系，则将其设为无主，[这在 GAE JPA 插件的 v2.x 中受支持](http://datanucleus.blogspot.co.uk/2011/11/gaej-and-datanucleus-v3-part-2.html)。

# c# - 为什么 Azure 表存储在使用 ResolveName 时不保留类型名称？

> ID：10701921
> 
> 赞同：3
> 
> 时间：2012-05-22T12:19:57.100
> 
> 标签：c#, azure, odata, azure-table-storage

我试图控制 Azure 表实体的序列化，作为[如何使用单个查询来检索多种类型的实体到 Azure 表存储？](https://stackoverflow.com/questions/10697752/how-do-i-retrieve-multiple-types-of-entities-using-a-single-query-to-azure-table)并且遇到了（对我而言）意想不到的行为。

> **检索项目时，名称始终为“ `<myaccountname>.Pets`”，无论我在保存实体时将其设置为什么。为什么不保留类型名？**

*根据 MSDN：*

[DataServiceContext.ResolveType](http://msdn.microsoft.com/en-us/library/system.data.services.client.dataservicecontext.resolvetype%28v=vs.100%29.aspx)

> 获取或设置一个函数，该函数用于覆盖客户端库在从开放数据协议 (OData) 服务接收实体时使用的默认类型解析选项。

[DataServiceContext.ResolveName](http://msdn.microsoft.com/en-us/library/system.data.services.client.dataservicecontext.resolvename.aspx)

> 当您将实体发送到数据服务时，获取或设置一个函数以覆盖客户端库使用的默认类型解析策略。

而[这个博客条目](http://blogs.msdn.com/b/phaniraj/archive/2008/12/23/working-with-inheritance-in-ado-net-data-services.aspx)不应该是这样。

**这是一个简单的测试：**

```
public class Pet : TableServiceEntity { }
    public class Cat : Pet { }
    public class Dog : Pet { }

    public class Test
    { 

        public void RunTest()
        {
            //this.Create();
            this.Read();
        }

        public TableServiceContext GetTableServiceContext()
        {
            CloudStorageAccount storageAccount = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("StorageConnectionString"));
            CloudTableClient tableClient = storageAccount.CreateCloudTableClient();
            tableClient.CreateTableIfNotExist("Pets");

            TableServiceContext serviceContext = tableClient.GetDataServiceContext();

            serviceContext.ResolveName = (entityType) =>
            {
                return entityType.FullName;
            };

            serviceContext.ResolveType = (s) =>
            {
                return Type.GetType(s);
            };

            return serviceContext;
        }

        public void Create()
        {

            var serviceContext = this.GetTableServiceContext();

            // Create entries
            var cat = new Cat() { PartitionKey = "cats", RowKey = "1" };
            serviceContext.AddObject("Pets", cat);

            var dog = new Dog() { PartitionKey = "dogs", RowKey = "1" };
            serviceContext.AddObject("Pets", dog);

            serviceContext.SaveChangesWithRetries();
        }

        public void Read()
        {
            var serviceContext = this.GetTableServiceContext();

            var pets = serviceContext.CreateQuery<Pet>("Pets").AsTableServiceQuery<Pet>().ToArray();

            foreach (var pet in pets)
            {
                Console.WriteLine(pet.GetType());
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:01:29.760

经过一些挖掘和讨论后，我发现天**蓝色**表（无模式）从未见过类型名。相反，所有公共属性都被序列化，并简单地将属性的有效负载发送到服务。

如果您需要确定需要在有效负载中存储/检查属性的类型。这可以利用读/写实体事件来完成。

Is your goal to return a heterogeneous collection at once, or limit it down to just one type. If it the latter then it would be good to store the type in the **Primary Key ,Row key** if possible, or in a separate field and query based on that.

# jquery-ui - 如何在选择第一个日期而不是关闭时打开第二个 UI Datepicker？

> ID：10701925
> 
> 赞同：1
> 
> 时间：2012-05-22T12:20:15.080
> 
> 标签：jquery-ui, jquery-ui-datepicker

我正在尝试使用 JQuery UI 的 Datepicker 向表单添加一些功能。1\. 当我在开始日期选择器中选择一个日期时，它应该在结束日期选择器中显示下一个日期。2\. 当我选择结束日期小于开始日期时，它应该显示结束日期的前一个日期并显示开始日期选择器。当我单击开始日期选择器中的清除按钮时，我在日期选择器中有清除按钮，它会打开结束日期选择器。我不想这样。我想通过选择开始日期的日期来打开结束日期选择器

```
$( "#start").datepicker({
    minDate: new Date(currentYear, currentMonth, currentDate),
    showButtonPanel: true,
    beforeShow: function( input ) {
        setTimeout(addclearbutton, 1 );
    },
    beforeShowDay: highlightDays,
    onChangeMonthYear: function( input ) {
        setTimeout(addclearbutton, 1 );
    },
    onSelect: function (dateStr,input) { 
        daterangevalidation(dateStr,input);
    },
    onClose:function() {
        $("#end").datepicker('show');  
    }                
});    

$( "#end").datepicker({
    minDate: new Date(currentYear, currentMonth, currentDate),
    showButtonPanel: true,
    beforeShow: function( input ) {
        setTimeout(addclearbutton, 1 );
    },
    beforeShowDay: highlightDays,  
    onChangeMonthYear: function( input ) {
        setTimeout(addclearbutton, 1 );
    },
    onSelect: function (dateStr,input) { 
        daterangevalidation(dateStr,input);
    }
}); 
```

# hibernate - Hibernate 在每次合并时保存一个新对象

> ID：10701928
> 
> 赞同：0
> 
> 时间：2012-05-22T12:20:23.343
> 
> 标签：hibernate, object, merge, persist

我有一个特殊的问题。每次，我在会话上调用合并，Hibernate 都会保留一个全新的对象。我在 Spring MVC 应用程序中使用 Hibernate 3.6。

请在下面找到我的代码：

**我的 hibernate.cfg.xml**

```
<hibernate-configuration>
    <session-factory>
        <property name="dialect">org.hibernate.dialect.Oracle10gDialect </property>

        <!-- this will show us all sql statements -->
        <property name="hibernate.show_sql"> true   </property>
        <property name="connection.pool_size">1</property>

        <!--  <property name="hbm2ddl.auto">create</property>-->

        <!-- mapping files -->

        <mapping resource="com/hibernate/hbm/employee.hbm.xml"></mapping>
        </session-factory>
</hibernate-configuration> 
```

我的**员工.hbm.xml**

```
<hibernate-mapping default-lazy="true">
    <class name="com.spring.model.Employee" table="employee">
        <id name="empId" type="long" column="empId" unsaved-value="null">
            <generator class="sequence">
                <param name="sequence">hibernate_sequence</param>
            </generator>
        </id>
        <version name="version" column="version" unsaved-value="null"
            type="long" />

        <component name="identity" class="com.spring.model.Identity">
            <property name="firstname" column="firstname" not-null="true" />
            <property name="lastname" column="lastname" not-null="true" />
            <property name="email" column="emailid" not-null="true" />
        </component>

        <!--    <property name="birthday" column="birthday"/>       -->
        <property name="fileDataBytes" column="filedata" />

        <property name="fileName" column="fileName" />
        <property name="fileContentType" column="fileContentType" />

    </class>
</hibernate-mapping> 
```

我的**模型课**

```
 public class Employee  extends BaseModel{
   private CommonsMultipartFile fileData;

private byte[] fileDataBytes;
private String fileName;
private String fileContentType;

private Identity identity;

private long empId;
      //getters,setters /equals() on empId field 

       @Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + (int) (empId ^ (empId >>> 32));
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    Employee other = (Employee) obj;
    if (empId != other.empId)
        return false;
    return true;
}

       public class BaseModel implements Serializable{
       private Long version;

       //gettes,setters

      public class Identity {
       protected String firstname;   
protected String lastname;   
  protected String email;    
        //getters.setters 
```

我**的employeeDAOImpl.java 的save**方法

```
public long saveEmployee(Employee employee) throws Exception {
        public Employee getEmployeeById(long empId) {
        // TODO Auto-generated method stub
        return (Employee) getSessionFactory().getCurrentSession().load(Employee.class,empId);
                       }
    }
        // TODO Auto-generated method stub
        if(employee.getEmpId() == 0){
             return  (Long)getSessionFactory().getCurrentSession().save(employee);
        }else{
            Employee empInSession = getEmployeeById(employee.getEmpId());
            getSessionFactory().getCurrentSession().merge(employee);
            return  employee.getEmpId();

        }
    } 
```

注意：我已经在 GET 循环中加载了对象，但是为了确保将对象加载到缓存中，我仍然在调用 merge() 之前加载它。理想情况下，根本不需要合并，随着对象变得持久。为什么会发生这种情况？Hibernate 使用更改的属性保存一个新对象并保存它。它不应该通过equals检查中的empId字段检查吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:36:48.680

尝试将等号和哈希码添加到您的员工类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:14:16.237

好吧，这似乎是一个春天的问题。通过将 @SessionAttributes 添加到我的 Controller 类来解决。看起来无害，但实际上是问题的根源。春季论坛上的 Marten 在[这里帮助了我](http://forum.springsource.org/showthread.php?126692-Spring-Hibernate-MVC-application-merge%28%29-saves-a-new-object-every-time&p=413506#post413506)

# iis-7 - IIS 处理静态文件？

> ID：10701929
> 
> 赞同：0
> 
> 时间：2012-05-22T12:20:34.303
> 
> 标签：iis-7, url-rewriting

IIS 是否处理静态文件的请求，例如：

```
http://localhost:9000/Content/ABC.pdf 
```

如果没有，那么我们可以添加一些设置，以便 .pdf 请求也由 IIS 处理并通过 URLRewite 模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:26:26.787

Asp.net 只接收对 aspx、asmx、ashx 的请求。

如果文件扩展名尚未映射到 ASP.NET，则 ASP.NET 将不会收到请求。

如果创建自定义处理程序来为特定文件扩展名提供服务，则必须将扩展名映射到 IIS 中的 ASP.NET，并在应用程序的 Web.config 文件中注册处理程序。有关更多信息，请参阅[HTTP 处理程序和 HTTP 模块概述](http://msdn.microsoft.com/en-us/library/bb398986.aspx)。

如果可能，将您的网址更改为 ashx 文件。如果没有，您可以映射 pdf 以被 asp.net 识别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:22:17.690

是的，IIS 可以很好地处理静态内容（它确实提供图像，对吗？）。

默认情况下，它将绕过任何动态处理并直接返回内容。

如果您的设置不能正确自动处理 PDF 文件，您可能只需[将正确的 mime 类型添加](http://technet.microsoft.com/en-us/library/cc725608%28v=ws.10%29.aspx)到配置中。

# php - MongoDB PHP 电子邮件唯一

> ID：10701935
> 
> 赞同：0
> 
> 时间：2012-05-22T12:21:08.440
> 
> 标签：php, email, mongodb, unique

我有一个 beta 注册表单，我需要知道如何检查以确保电子邮件地址不在数据库中，如果没有添加，是否返回消息。

我希望我不必先进行查找，然后再进行 if 再插入，但有些事情告诉我我必须这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:28:05.707

您可以在电子邮件上创建唯一索引，然后在安全模式下执行插入。如果使用电子邮件，您将收到错误消息。如果没有唯一索引或操作不在安全模式下，您将不会收到此错误。

我个人会做一个简单的`find`. 例如，在此注册表单上，当用户输入他的电子邮件并移至下一个字段时，我会向服务器发出一个快速的 ajax 请求，并查明此电子邮件是否被接收，并在表单中显示此检查的结果。当然，这并不能取代对唯一索引和安全模式（谷歌竞争条件）的需求。

# asp.net - 在asp.net中进行facebook身份验证后的无限重定向循环

> ID：10701938
> 
> 赞同：1
> 
> 时间：2012-05-22T12:21:16.100
> 
> 标签：asp.net, facebook-graph-api, user-controls

我正在尝试在我的 asp.net 应用程序上使用 facebook 身份验证。

为此，我正在使用 Facebook JavaScript SDK 调用。

就我而言，我从我的正常 Default.aspx 页面调用 facebook javascript SDK，然后它进行身份验证，然后将 uid 和访问令牌发送到我创建的数据处理程序。在数据处理程序中，我正在创建会话。然后我从数据处理程序重定向到父页面。

当我使用普通的 ASPX 页面（不是任何用户控件）时，所有这些都可以正常工作。但是，当我在任何用户控件中使用相同的逻辑并从 default.aspx 页面调用用户控件时（在这种情况下，facebook 身份验证和 facebook 登录按钮在我的用户控件内），在身份验证和调用数据处理程序之后，当我重定向时从我的数据处理程序到我的 default.aspx，这个循环无限地进行。

我的页面继续进行身份验证并继续调用数据处理程序，然后再次调用 default.aspx

请提出任何好的方法，我可以在其中对用户进行身份验证并在具有用户控制权时返回到我的 default.aspc。

我按照本教程创建了我的 facebook 身份验证逻辑（仅使用了 javascript 和数据处理程序逻辑）：http: [//csharpsdk.org/docs/web/getting-started](http://csharpsdk.org/docs/web/getting-started)

如果需要，我也可以附上代码。

# java - android：旋转高分辨率图片会产生内存不足错误

> ID：10701942
> 
> 赞同：7
> 
> 时间：2012-05-22T12:21:37.473
> 
> 标签：java, android, jpeg, android-camera

我尝试在“onPictureTaken”中旋转图片

```
public void onPictureTaken(byte[] data, Camera camera) {
    String fileName = "last"+Calendar.getInstance().getTimeInMillis();
    String finalFilePath=null;
    File temp= Environment.getExternalStorageDirectory();
    String destination=temp.getAbsolutePath()+"/pictureTest/";
    Bitmap bitmap1 = BitmapFactory.decodeByteArray(data, 0, data.length);
    Matrix mat = new Matrix();
    mat.postRotate(90); // degree j'pense que t'as une methode qui te dit de combien tu veux faire t'as rotation.
    Bitmap bBitmapRotate = Bitmap.createBitmap(bitmap1, 0, 0, bitmap1.getWidth(), bitmap1.getHeight(), mat, true);
    try {
        FileOutputStream fos = null;
        finalFilePath=destination +"/" + fileName + ".jpg";
        fos = new FileOutputStream(finalFilePath);
        BufferedOutputStream bos = new BufferedOutputStream(fos);                   
        bBitmapRotate.compress(CompressFormat.JPEG, 80, bos);
        bos.flush();
        bos.close();
    } 
    catch (FileNotFoundException e) {
        e.printStackTrace();
    } 
    catch (IOException e) {
        e.printStackTrace();
    } 
```

如果我使用 2Mp 图片，它可以正常工作，但如果我使用 12Mp 图片，我会收到内存不足错误。

```
 05-22 11:08:41.180: D/dalvikvm(29694): GC_FOR_MALLOC freed 674K, 51% free 3015K/6087K, external 18826K/19988K, paused 33ms
05-22 11:08:41.190: I/dalvikvm-heap(29694): Grow heap (frag case) to 25.641MB for 2070498-byte allocation
05-22 11:08:41.230: D/dalvikvm(29694): GC_CONCURRENT freed 133K, 40% free 4903K/8135K, external 17940K/19988K, paused 1ms+2ms
05-22 11:08:41.700: D/dalvikvm(29694): GC_EXTERNAL_ALLOC freed 19K, 40% free 4884K/8135K, external 33575K/35623K, paused 24ms
05-22 11:08:41.710: E/dalvikvm-heap(29694): 24000000-byte external allocation too large for this process.
05-22 11:08:41.710: E/GraphicsJNI(29694): VM won't let us allocate 24000000 bytes
05-22 11:08:41.720: D/dalvikvm(29694): GC_FOR_MALLOC freed <1K, 40% free 4884K/8135K, external 33575K/35623K, paused 14ms
05-22 11:08:41.720: D/AndroidRuntime(29694): Shutting down VM
05-22 11:08:41.720: W/dalvikvm(29694): threadid=1: thread exiting with uncaught exception (group=0x2aac8578)
05-22 11:08:41.720: E/AndroidRuntime(29694): FATAL EXCEPTION: main
05-22 11:08:41.720: E/AndroidRuntime(29694): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
05-22 11:08:41.720: E/AndroidRuntime(29694):    at android.graphics.Bitmap.nativeCreate(Native Method)
05-22 11:08:41.720: E/AndroidRuntime(29694):    at android.graphics.Bitmap.createBitmap(Bitmap.java:477)
05-22 11:08:41.720: E/AndroidRuntime(29694):    at android.graphics.Bitmap.createBitmap(Bitmap.java:444)
05-22 11:08:41.720: E/AndroidRuntime(29694):    at com.android.cocoatweet.TestTweetPictureActivity.onPictureTaken(TestTweetPictureActivity.java:143)
05-22 11:08:41.720: E/AndroidRuntime(29694):    at android.hardware.Camera$EventHandler.handleMessage(Camera.java:529)
05-22 11:08:41.720: E/AndroidRuntime(29694):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-22 11:08:41.720: E/AndroidRuntime(29694):    at android.os.Looper.loop(Looper.java:138)
05-22 11:08:41.720: E/AndroidRuntime(29694):    at android.app.ActivityThread.main(ActivityThread.java:3701)
05-22 11:08:41.720: E/AndroidRuntime(29694):    at java.lang.reflect.Method.invokeNative(Native Method)
05-22 11:08:41.720: E/AndroidRuntime(29694):    at java.lang.reflect.Method.invoke(Method.java:507)
05-22 11:08:41.720: E/AndroidRuntime(29694):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
05-22 11:08:41.720: E/AndroidRuntime(29694):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
05-22 11:08:41.720: E/AndroidRuntime(29694):    at dalvik.system.NativeStart.main(Native Method) 
```

我试图从相机参数中设置“setRotation()”，但它没有做任何事情。

```
public void onClick(View v) {
                sendPicturedTweet();
            }
        });
    }

    protected void sendPicturedTweet() {
        if(camera!=null){
            camera.stopPreview();
            Camera.Parameters camParams=this.camera.getParameters();            
            List<Size> sizes=camParams.getSupportedPictureSizes();
            SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
            int prefSize=Integer.parseInt(preferences.getString(getString(R.string.picture_quality_key), "0"));
            camParams.setPictureSize(sizes.get(prefSize).width, sizes.get(prefSize).height);
            camParams.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);
            camParams.setFlashMode(Camera.Parameters.FLASH_MODE_AUTO);
            camParams.setWhiteBalance(Camera.Parameters.WHITE_BALANCE_AUTO);
            camParams.setPictureFormat(ImageFormat.JPEG);
            camParams.setJpegQuality(100);
            camParams.setRotation(90);
            camera.setParameters(camParams);
            try{
                this.camera.setPreviewDisplay(surfaceHolder);
                this.camera.startPreview();
                this.camera.takePicture(null, null, null, this);
            }catch (Exception e) {
                Log.e(LOG_TAG_VIDEO_PREVIEW, "ERROR IO on set preview display for camera.");
            }
        }

    } 
```

如何旋转大图片而不会出现此错误并尽可能获得最佳图片质量？可能吗？

我正在使用 Android 2.3.7 开发 Sony Xperia S。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:59:16.013

当你到达这条线

```
Bitmap bBitmapRotate = Bitmap.createBitmap(bitmap1, 0, 0, bitmap1.getWidth(), bitmap1.getHeight(), mat, true); 
```

您已经在内存中有两次图像，分别是字节 [] 数据和位图 bitmap1。我认为您应该在尝试转换图像之前找到一种清除 byte[] 数据的方法（例如，通过直接发送位图作为参数）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:17:58.967

使用 BitmapFactory.Option 减小图像大小

```
BitmapFactory.Options option = new BitmapFactory.Options();
            option.inSampleSize = 2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T20:56:30.127

您可以使用 JNI（使用 NDK）来克服 android 对应用程序施加的最大堆大小的限制。

在这种情况下，您可以执行以下操作：

1.  将位图传递给 JNI 函数。
2.  在 JNI 函数中，读取位图的字节。
3.  回收位图。
4.  创建一个新的位图并将您存储的像素放入其中。
5.  将位图返回给 java 代码。

如果您愿意，我在[这里](https://stackoverflow.com/questions/14398670/android-rotating-a-bitmap-using-jni-ndk#comment20033361_14398670)创建了一个示例代码。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-21T06:36:19.190

这个怎么样：

```
bitmap1 = Bitmap.createBitmap(bitmap1, 0, 0, bitmap1.getWidth(), bitmap1.getHeight(), mat, true); 
```

您可以使用的内存有限，因此当您必须处理如此大的图片时，您必须考虑节省内存。

# php - foreach 中的两个不同的动态变量

> ID：10701945
> 
> 赞同：-3
> 
> 时间：2012-05-22T12:21:45.100
> 
> 标签：php

我有两个变量 $items 和 $stuff[0]

我想通过这样的foreach循环循环每个变量

```
foreach($items as $i)
// do stuff

foreach($stuff[0] as $i)
// do same stuff as above 
```

是否可以将 de foreach 变量动态设置为

```
foreach(($items = isset($items) ? $items : $stuff[0]) as $key) { 
```

所以我不必写 'do stuff' 2 次...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:25:38.993

一个功能怎么样？

```
foreach($a as $b) { 
    dosomething($b);
}
foreach($c as $d) {
    dosomething($d);
}
function dosomething($e) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:31:46.413

也许这个（如果 $items 和 $stuff[0] 具有相同的键；无论如何都没有理由合并它）

```
$merged = array($items,$stuff[0]);
foreach((array)$merged as $i=>v) {
   // do stuff
   // $v["key-of-items-or-stuff0"]
} 
```

# android - 图像显示在每一行？

> ID：10701947
> 
> 赞同：0
> 
> 时间：2012-05-22T12:21:50.260
> 
> 标签：android, image

我正在我的活动中实现列表视图。我只在第一行显示图像。当我从那个 Activity 移动到另一个 Activity 并按 Back 时，这个图像会显示在所有行中吗？该怎么办？任何帮助将不胜感激。代码是这样的。我正在从远程服务器检索图像。if (convertView == null) {

```
 LayoutInflater inflater = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.shop_list_items_row, null);
        viewHandler = new ListingViewHandler(convertView);
        convertView.setTag(viewHandler);
        convertView
                .setBackgroundResource((position % 2) == 0 ? R.color.listViewAlternateColor1
                        : R.color.listViewAlternateColor2);
    }

    viewHandler = (ListingViewHandler) convertView.getTag();

    ImageView image = viewHandler.getImage();
     Bitmap a = downloadFile(imageUrl);

    if (position==0) {
        image.setImageBitmap(a);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:27:27.200

这是 的正常行为`ListView` `Adapter`，这是因为，作为row`ListView`重用。因此，位置 0 被重新使用，它保存图像，因此您必须删除该图像以用于其他位置，为此，还要设置一个条件，以删除其他位置的图像，如下所示：`View``converView``View``else`

```
if (position==0) {
   image.setImageBitmap(a);
}
else
   image.setImageDrawable(null);  //to remove the image for all other rows 
```

# authentication - Symfony 2 & FOSUserBundle：重置密码后验证用户

> ID：10701949
> 
> 赞同：1
> 
> 时间：2012-05-22T12:22:00.283
> 
> 标签：authentication, symfony, fosuserbundle

当覆盖 FOSUserBundle 重置密码控制器时，会调用“authenticateUser”方法（第 104 行）：

[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Controller/ResettingController.php#L104](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Controller/ResettingController.php#L104)

```
....
$this->authenticateUser($user);
.... 
```

我的问题是我已经覆盖了 Symfony 身份验证处理程序，并且在用户登录时有我自己的逻辑。

**编辑** 这是我的身份验证处理程序：

```
<?php

/* ... all includes ... */

class AuthenticationHandler implements AuthenticationSuccessHandlerInterface, LogoutSuccessHandlerInterface
{
    private $router;
    private $container;

    public function __construct(Router $router, ContainerInterface $container)
    {
        $this->router = $router;
        $this->container = $container;
    }

    public function onAuthenticationSuccess(Request $request, TokenInterface $token)
    {
        // retrieve user and session id
        $user = $token->getUser();

        /* ... here I do things in database when logging in, and dont want to write it again and again ... */

        // prepare redirection URL
        if($targetPath = $request->getSession()->get('_security.target_path')) {
            $url = $targetPath;
        }
        else {
            $url = $this->router->generate('my_route');
        }

        return new RedirectResponse($url);
    }

} 
```

那么，如何从 ResettingController 中的身份验证处理程序调用“onAuthenticationSuccess”方法？为了避免重写相同的代码...

谢谢你的帮助 ！

奥雷尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:06:20.570

您应该调用 onAuthenticationSuccess 方法将其作为服务加载。在您的 config.yml 中：

```
authentication_handler:
    class: Acme\Bundle\Service\AuthenticationHandler
    arguments:
        container: "@service_container" 
```

然后，在 authenticateUser 函数中调用它：

```
protected function authenticateUser(UserInterface $user) {
      try {
        $this->container->get('fos_user.user_checker')->checkPostAuth($user);
      } catch (AccountStatusException $e) {
          // Don't authenticate locked, disabled or expired users
          return;
      }

      $providerKey = $this->container->getParameter('fos_user.firewall_name');
      $token = new UsernamePasswordToken($user, null, $providerKey, $user->getRoles());
      $this->container->get('security.context')->setToken($token);
      $request = $this->container->get('request');
      $this->container->get('authentication_handler')->onAuthenticationSuccess($request, $token);
} 
```

这可以解决问题并通过您的自定义身份验证处理程序。[更多信息](http://blog.logicexception.com/2011/10/symfony2-securitybundle-and.html)。

# google-maps - Google 地图信息窗口中的 Facebook 评论流

> ID：10701950
> 
> 赞同：2
> 
> 时间：2012-05-22T12:22:06.740
> 
> 标签：google-maps, facebook-comments, infowindow

我目前正在做一个谷歌地图项目，显示我当地城镇的名胜古迹。我的计划是在地图上使用多个标记来识别不同的地点，点击这些标记会打开一个信息窗口，列出有关该地点的更多详细信息……我还认为允许访问者使用 Facebook 发表评论和体验会很好InfoWindow 中的评论插件。

然而，在进一步的研究和阅读其他一些人的努力试图让 Facebook 评论进入 InfoWindows 时，这似乎是不可能的......我见过的壁橱是一个设法让相同的评论流出现在每个无论选择了地图上的哪个标记/点，InfoWindow 都不是我想要的！他的结论是用 PHP 构建您自己的评论流。

这是上述文章的链接，其中包含工作地图的链接； [https://groups.google.com/forum/#!msg/google-maps-js-api-v3/4wvBdVxPHJ0/vxuYP93N-lgJ](https://groups.google.com/forum/#!msg/google-maps-js-api-v3/4wvBdVxPHJ0/vxuYP93N-lgJ)

我对 Facebook 开发还很陌生，但当然不介意爬上学习曲线来实现我想要的，但我认为明智的做法是与 stackoverflow 的专家核实，以防我想要实现的目标是非首发！

任何建议、意见和指点将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:41:51.740

我最近设法做到了。诀窍是

*   将信息窗口的内容插入页面末尾的隐藏 div 中。
*   解析这个 div`FB.XFBML.parse`
*   得到`innerHTML`你的 div
*   `infowindow.setContent()`用你之前得到的 innerHTML调用

如果您想在每个信息窗口中使用不同的评论，您必须为每个信息窗口的评论插件设置不同的 url：like`http://localhost?infowindow=content1`和`http://localhost?infowindow=content2`for another。

希望有帮助！

# ios5 - 关闭模型视图控制器

> ID：10701963
> 
> 赞同：0
> 
> 时间：2012-05-22T12:23:12.247
> 
> 标签：ios5, uinavigationcontroller, modalviewcontroller

我有一个场景，我正在使用“presentModalViewController”呈现视图控制器（比如来自管理联系人视图控制器）

```
[self presentModalViewController:nc animated:YES]; 
```

这将我带到地址簿选择地址簿后，我需要将用户推送到一个表单，他可以在该表单中查看所选用户的详细信息并保存它。

现在它不知道如何将其推送到表单视图控制器（我正在使用表单）。而且我不知道如何为后退按钮编码是同一个视图控制器。这让我回到父视图控制器（管理联系人视图控制器）

我不知道在哪里解雇控制器

```
[self dismissModalViewControllerAnimated: YES]; 
```

需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:27:04.803

一旦用户选择了联系人，您将不得不关闭，然后代理必须返回到视图控制器，该视图控制器向 MANAGE CONTACTS VIEW CONTROLLER 呈现用户选择的联系人

对您的问题的其他解释可能会有所帮助

# binary - 作为二元运算的加法

> ID：10701970
> 
> 赞同：0
> 
> 时间：2012-05-22T12:23:37.270
> 
> 标签：binary, numbers, primitive-types, boolean-operations

我正在添加一对无符号 32 位二进制整数（包括溢出）。加法是表达性的，而不是实际计算的，因此不需要有效的算法，但是由于每个组件都是根据单个位手动指定的，因此我需要一个具有紧凑表示的组件。有什么建议么？

编辑：就布尔运算符而言。所以我`carry = a & b; sum = a ^ b;`首先是这么想的，但是其他 31 位呢？

哦，还有减法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:26:43.377

或许您可以先声明两个 1 位数字的加法，并带有溢出（=进位）：

```
A | B | SUM | CARRY
===================
0   0    0      0
0   1    1      0
1   0    1      0
1   1    0      1 
```

为了进一步概括这一点，您需要一个“[全加器](http://en.wikipedia.org/wiki/Adder_%28electronics%29)”，它也将前一阶段的进位作为输入。然后，您可以将 32 位加法表示为 32 个这样的全加器链（第一级的进位输入绑定到 0）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:17:47.423

*   关于数据结构部分来表示这些数字。有4种方式

1)`Bit Array`
位数组是一种紧凑地存储各个位的数组数据结构。
它们也称为位图、位集或位串。

2)`Bit Field`
位域是计算机编程中常用的习惯用法，用于将多个逻辑值紧凑地存储为短系列位，其中每个位都可以单独寻址。

3)`Bit Plane`
数字离散信号（如图像或声音）的位平面是与表示信号的每个二进制数中的给定位位置相对应的一组位。

4)`Bit Board`
位板或位域是一种将一组相关的布尔变量填充到同一个整数中的格式，通常表示棋盘游戏中的位置。

*   关于实施，您可以检查在每个步骤中，我们有以下
    `S = a xor b xor c`

S 是当前位 a 和 b 之和的结果
c 是输入进位

Cout - 输出进位是`(a & b) xor (c & (a xor b))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T13:38:05.260

您不能使用简单的布尔运算符执行加法，您需要一个加法器。（当然，加法器可以使用一些更复杂的布尔运算符来构建。）加法器将两位加进位相加，并将进位传递给下一位。

伪代码：

```
carry = 0
for i = 31 to 0
  sum = a[i] + b[i] + carry
  result[i] = sum & 1
  carry = sum >> 1
next i 
```

这是使用 VEDIT 文本编辑器的宏语言的实现。要添加的两个数字以 ASCII 字符串的形式给出，每行一个。结果插入第三行。

```
Reg_Empty(10)                       // result as ASCII string
#0 = 0                              // carry bit
for (#9=31; #9>=0; #9--) {
    #1 = CC(#9)-'0'                 // a bit from first number
    #2 = CC(#9+34)-'0'              // a bit from second number
    #3 = #0+#1+#2                   // add with carry
    #4 = #3 & 1                     // resulting bit
    #0 = #3 >> 1                    // new carry
    Num_Str(#4, 11, LEFT)           // convert bit to ASCII
    Reg_Set(10, @11, INSERT)        // insert bit to start of string
}
Line(2)
Reg_Ins(10) IN
Return 
```

示例输入和输出：

```
00010011011111110101000111100001
00110110111010101100101101110111
01001010011010100001110101011000 
```

*编辑：*
这是用布尔运算实现加法器的伪代码：

```
carry = 0
for i = 31 to 0
  sum[i] = a[i] ^ b[i] ^ carry
  carry = (a[i] & b[i]) | (a[i] & carry) | (b[i] & carry)
next i 
```

# jquery - 更改输入值不会反映在萤火虫上

> ID：10701977
> 
> 赞同：3
> 
> 时间：2012-05-22T12:23:55.430
> 
> 标签：jquery

只是尝试使用 jQuery 更改输入的值。似乎可以工作，但是，当我使用 Firebug 查看#input 的值时，它仍保持在原始值。这是正常的，还是我做错了什么？谢谢

[http://jsfiddle.net/tsfSg/](http://jsfiddle.net/tsfSg/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" /> 
<title>Testing</title> 
<script src="http://code.jquery.com/jquery-latest.js"></script> 
<script> 

$(function(){
    $("#DoIt").click(function()
    {
        $('#input').val('final');
        console.log($('#input'));
        alert($('#input').val());
    });
});

</script>
</head>

<body>
<a href="#" id="DoIt">DoIt</a>
<input id="input" type="text" value="original" />
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T12:25:34.470

使用`.val()`：`console.log( $('#input').val() );`

```
$(function(){
    $("#DoIt").click(function(){
        $('#input').val('final');
        console.log($('#input').val());  // the fixed line!
        alert($('#input').val());
    });
}); 
```

[演示](http://jsfiddle.net/roXon/tsfSg/1/)

* * *

**编辑**

现在我明白了你在看什么：在 Firebug 中的元素源（检查元素）内部。
好吧，如果你想看到实际发生的变化，你必须使用：

```
$('#input').attr('value','final'); 
```

代替：

```
$('#input').val('final'); 
```

否则更改将由浏览器存储（无需担心），但不会由 Firebug 更新。

```
in this demo you can see it working: 
```

## *[演示](http://jsfiddle.net/roXon/tsfSg/3/)*

```
$("#DoIt").click(function(e){
    $('#input').attr('value','final');     // use .attr() to see the change happen in Firebug!
    // $('#input').val('final');           //  but rather use this
    // $('#input').prop('value','final');  // or better THIS one!
    console.log( $('#input').val() );
    alert( $('#input').val() );
    return false;
}); 
```

# android - 添加新布局时我的 Android 崩溃

> ID：10701980
> 
> 赞同：1
> 
> 时间：2012-05-22T12:24:03.727
> 
> 标签：android, android-layout, xml-layout

大家好，我目前正在尝试解决一个奇怪的问题。我尽可能地减少了我的应用程序，以便清楚地向您展示问题。

我可以像这样使用主布局启动我的应用程序：

```
public class AndroidReaderActivity extends Activity {
     @Override
     public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
} 
```

有了这个 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
</ListView> 
```

如果我在布局目录中添加一个名为 list.xml 的新布局，我的应用程序崩溃了……我不明白。这是日志（一旦我添加了新的 xml，程序就找不到 main.xml 资源）

```
05-16 03:00:14.631: E/AndroidRuntime(4399): FATAL EXCEPTION: main
05-16 03:00:14.631: E/AndroidRuntime(4399): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.infotel/com.infotel.AndroidReaderActivity}: android.content.res.Resources$NotFoundException: Resource ID #0x7f030001
05-16 03:00:14.631: E/AndroidRuntime(4399):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at android.os.Looper.loop(Looper.java:137)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at java.lang.reflect.Method.invokeNative(Native Method)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at java.lang.reflect.Method.invoke(Method.java:511)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at dalvik.system.NativeStart.main(Native Method)
05-16 03:00:14.631: E/AndroidRuntime(4399): Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x7f030001
05-16 03:00:14.631: E/AndroidRuntime(4399):     at android.content.res.Resources.getValue(Resources.java:1018)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:2105)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at android.content.res.Resources.getLayout(Resources.java:857)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at android.view.LayoutInflater.inflate(LayoutInflater.java:394)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at android.app.Activity.setContentView(Activity.java:1835)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at com.infotel.AndroidReaderActivity.onCreate(AndroidReaderActivity.java:92)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at android.app.Activity.performCreate(Activity.java:4465)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-16 03:00:14.631: E/AndroidRuntime(4399):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

谢谢你们的帮助：D

编辑

这是我的 list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="100dip" >
    <ImageView 
        android:id="@+list/thumb"
        android:layout_width="60dip"
        android:layout_height="60dip"
        android:layout_centerVertical="true"
        android:layout_alignParentLeft="true"
        />
    <TextView
        android:id="@+list/text"
        android:layout_toRightOf="@+list/thumb"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="18dip"
        android:layout_marginLeft="10dip"
        android:layout_centerVertical="true"
        android:singleLine="true"
        android:ellipsize="end"
        android:textStyle="bold" 
        />
</RelativeLayout> 
```

还有我的 manifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.infotel"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".AndroidReaderActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:41:12.783

没有问题一切都很好，请清理你的项目然后再次运行，因为你的资源 java 文件没有正确构建。

或者

检查您的项目包名称在清单文件中是否应该相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:32:30.927

检查您的 gen/R.java 文件并搜索 0x7f030001 查看它是哪个资源，它可能会给您一个问题提示。正如 Kalaji 建议的那样，在清单中添加活动不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T12:34:36.853

检查项目的**AndroidManifest.xml**文件。确保`<activity>`开始标签设置为：

```
<activity android:name=".AndroidReaderActivity" android:label="@string/app_name"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T13:23:28.823

您在 AndroidReaderActivity 的第 92 行有一个错误，因为我看到您的错误日志只需检查一下，如果它们在您的代码中没有错误，那么只需清理您的项目

# ios - 在 iOS 上，一个 ViewController 的 viewDidLoad 中，子视图的数量是 0？哪种方法可以显示填充的数字？

> ID：10701982
> 
> 赞同：1
> 
> 时间：2012-05-22T12:24:20.823
> 
> 标签：ios, uiview, uiviewcontroller, uikit, uiwindow

使用 Xcode 4.3.2，在 ViewController 中启动一个全新的 Single View App

```
- (void)viewDidLoad
{
    // ...

    UIWindow *window = [[[UIApplication sharedApplication] delegate] window];
    NSLog(@"How many subviews %i", window.subviews.count);
} 
```

计数实际上是`0`......如果我在点击事件处理程序中打印出数字，那么我确实看到`1`了，这是应用程序的主视图。所以我想知道如何进入`viewDidLoad`， `[subviews count]`是否`0`有一个 init 或 begin 方法，就像`viewDidLoad`它`1`已经打印的那样（不需要在点击事件处理程序中打印它）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:33:26.313

尝试 NSLog 中的子视图计数 - (void)viewDidAppear:(BOOL)animated

viewDidLoad 在控制器的视图加载到内存后调用。viewDidAppear：通知视图控制器其视图已添加到视图层次结构中。

# mime-types - Markdown 的 MIME 类型是什么？

> ID：10701983
> 
> 赞同：127
> 
> 时间：2012-05-22T12:24:23.003
> 
> 标签：mime-types, markdown, mime, plaintext

有谁知道 Markdown 是否存在 MIME 类型？我想是的`text/plain`，但有更具体的吗？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2014-09-12T15:51:30.897

## tl;博士：`text/markdown`自 2016 年 3 月起

2016 年 3 月，在 IETF`text/markdown`注册为[RFC7763](https://www.rfc-editor.org/rfc/rfc7763)。

以前，应该是`text/x-markdown`。下面的文字描述了 2016 年 3 月之前的情况，当时 RFC7763 还是一个草案。

* * *

没有官方推荐[Gruber 的定义，但是](http://daringfireball.net/projects/markdown/)[官方邮件列表](http://six.pairlist.net/pipermail/markdown-discuss/2007-June/thread.html#640)上的讨论相当激烈，最终选择了`text/x-markdown`.

这一结论[后来受到质疑](http://six.pairlist.net/pipermail/markdown-discuss/2008-February/000960.html)，得到了证实，并且可以被 IMO 视为共识。

这是缺乏官方 mime 类型的唯一合乎逻辑的结论：`text/`几乎在任何地方都将提供适当的默认值，`x-`因为我们没有使用官方类型，`markdown`而不是`gruber.`或其他什么，因为该类型现在如此普遍。

不过，关于 Markdown 的不同“风味”仍然存在[未知数。](http://six.pairlist.net/pipermail/markdown-discuss/2007-June/000652.html)我想有人应该注册一个官方类型，这应该[很容易](https://www.rfc-editor.org/rfc/rfc4288#section-3.4)，但我怀疑除了 John Gruber 之外还有人敢这样做，因为他最近[证明](http://blog.codinghorror.com/standard-markdown-is-now-common-markdown/)了他对 Markdown 的依恋。

IETF 上有一个[草稿](https://datatracker.ietf.org/doc/draft-ietf-appsawg-text-markdown/)`text/markdown`，但内容似乎根本没有描述 Markdown，所以在它变得更完整之前我不会使用它。

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2012-05-31T15:50:23.660

没有*官方*标准类型，但`text/markdown`似乎是最常见的*事实上的*类型。大多数浏览器和其他相当复杂的客户端可能会看到该`text/`部分并默认为`text/plain`无论如何，因此没有太大区别。

不过需要注意的是：层次结构下的所有类型在相关 RFC 标准中的字符类型`text/`默认为*ISO-8859-1*。从那以后，世界上大部分地区都转向了*UTF-8*。因此，除非您确定不会使用任何有趣的字符（或生活在旧的 Windows 世界中），否则您可能希望按如下方式指定它：

```
text/markdown; charset=UTF-8 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-03-27T07:53:16.347

看起来**text/markdown**将成为标准。

*   [http://www.iana.org/go/draft-ietf-appsawg-text-markdown](http://www.iana.org/go/draft-ietf-appsawg-text-markdown)

*   [https://www.iana.org/assignments/media-types/media-types.xhtml](https://www.iana.org/assignments/media-types/media-types.xhtml)

    搜索`markdown`。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2021-02-03T14:46:34.090

根据[2016 年的 RFC7763 “The text/markdown type”</a>，一般的 MIME 类型是](https://www.rfc-editor.org/rfc/rfc7763)

 [```
text/markdown; charset=UTF-8 
```

其中`charset`参数是必需的，但不是必需的`UTF-8`。](https://www.rfc-editor.org/rfc/rfc7763) 

[该 RFC 还指定了一个可选`variant`参数，并且 Internet 编号分配机构维护了一个](https://www.rfc-editor.org/rfc/rfc7763)[Markdown 变体注册表，](https://www.iana.org/assignments/markdown-variants/markdown-variants.xhtml) 通过该注册表可以指定 Markdown 的特定变体，例如，

```
text/markdown; charset=UTF-8; variant=Original
text/markdown; charset=UTF-8; variant=GFM
text/markdown; charset=UTF-8; variant=CommonMark 
```

一些变体允许更多参数，如 [RFC7764“降价指南”</a> 中所述，例如，您可以添加变`extensions=-startnum`体`pandoc`以指定对方言的调整，尽管我不知道 pandoc 如何/是否实际解释它。](https://www.rfc-editor.org/rfc/rfc7764)

 [### 为什么需要字符集？](https://www.rfc-editor.org/rfc/rfc7764) 

[RFC2046 “MIME Part Two”</a> 从 1996 年开始将 US-ASCII 设置为默认字符集，但也表示](https://www.rfc-editor.org/rfc/rfc2046)

 [> 任何未来的“文本”子类型的规范必须指定它们是否也将使用“字符集”参数，并且可能还会限制其值。](https://www.rfc-editor.org/rfc/rfc2046) 

[然后](https://www.rfc-editor.org/rfc/rfc2046)[RFC2616 “HTTP/1.1”</a> 从 1999 年开始指定 ISO-8859-1 作为`text/*`通过 HTTP 传输的默认字符集，并且随着 Web 成为主要的通信模式，这成为`text/*`媒体类型的假定默认编码。](https://www.rfc-editor.org/rfc/rfc2616)

 [如果没有明确的字符集或注册的 mime-type-specific 默认值，`text/*`则被认为是 US-ASCII，除非所述文本通过 HTTP 传输，在这种情况下，它被认为是 ISO-8859-1。](https://www.rfc-editor.org/rfc/rfc2616) 

[RFC 6657“关于文本媒体类型中“字符集”参数处理的 MIME 更新”</a> 试图通过要求所有新媒体类型注册明确指定如何确定字符集来澄清这种差异，最好将其包含在有效负载中由于 HTML 允许使用 `<meta charset=UTF-8>`.](https://www.rfc-editor.org/rfc/rfc6657)

[](https://www.rfc-editor.org/rfc/rfc6657)

[`text/markdown` 注册](https://www.iana.org/assignments/media-types/text/markdown)[将](https://www.rfc-editor.org/rfc/rfc6657)参数 指定`charset` 为“必需”。因此，使用 content-type of `text/markdown`在技术上是无效的，并且此类内容的字符集可以合法地解释为 undefined、invalid、US-ASCII、ISO-8859-1 或 UTF-8 中的任何一种，实际上它几乎一直是。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-22T12:36:19.143

从 2008 年发现这个线程：http: [//www.mail-archive.com/markdown-discuss@six.pairlist.net/msg00973.html](http://www.mail-archive.com/markdown-discuss@six.pairlist.net/msg00973.html)

似乎mime类型`text/vnd.daringfireball.markdown`应该由Markdown的作者注册，在此之前可以将Markdown mime类型指定为`text/x-markdown`.

# asp.net - 在按钮和子 vb.net 之间传递变量

> ID：10701985
> 
> 赞同：1
> 
> 时间：2012-05-22T12:24:25.740
> 
> 标签：asp.net, vb.net

您好，我正在尝试将参数从 asp LinkBut​​ton 传递给子例程，但它不起作用

这是链接按钮

```
<asp:LinkButton runat="server" ID="linkId" OnClick="doSomething(10)">ID
</asp:LinkButton> 
```

这是我的潜艇

```
 Public Sub doSomething(ByVal mon As Integer)
      MsgBox("this is the number : " & mon)
   End Sub 
```

有人可以告诉我如何在 VB.net 中进行这项工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:31:37.387

`[CommandArgument](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.commandargument.aspx)`用属性试试

```
 <asp:LinkButton runat="server" ID="linkId" OnClick="doSomething"
    CommandArgument="10">ID</asp:LinkButton> 
```

和

```
 Public Sub doSomething(sender As Object, e As EventArgs)
      Dim btn As LinkButton = DirectCast(sender, LinkButton )
      Dim msg As String = "this is the number : " & Int32.Parse(btn.CommandArgument)
  End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:32:40.797

您不能将任何内容直接传递给事件处理程序。但是你可以使用`LinkButton`'[`CommandArgument`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.commandargument.aspx)属性：

```
<asp:LinkButton runat="server" 
       ID="linkId" 
       OnClick="LinkButton_Click"
       CommandArgument="10">ID
</asp:LinkButton> 
```

在您的代码隐藏中（使用此事件的正确签名）：

```
Protected Sub LinkButton_Click(sender As Object, e As EventArgs) 
     Dim lb = DirectCast(sender, LinkButton)
     Dim ID As String = lb.CommandArgument;
End Sub 
```

请注意，不应在 ASP.NET 环境中使用 MessageBox，因为它将显示在服务器上而不是浏览器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T00:20:13.547

您不必使用 DirectCast 方法。您的潜艇看起来像这样可能更有意义：

```
Public Sub doSomething(sender As Object, e As CommandEventArgs)
  Dim msg As String = "this is the number : " & e.CommandArgument
End Sub 
```

您还可以在控件的 CommandName 属性中存储第二个值并以相同的方式使用它。

编辑：对您的控件稍作更改，使用 OnCommand 而不是 OnClick：

```
<asp:LinkButton runat="server" ID="linkId" OnCommand="doSomething"
CommandArgument="10" Text="ID" /> 
```

# mysql - MySQL存储过程出错

> ID：10701987
> 
> 赞同：1
> 
> 时间：2012-05-22T12:24:46.480
> 
> 标签：mysql, stored-procedures, temp-tables

谁能帮我解释为什么我不能在存储过程上创建临时表。

这是我的存储过程脚本

```
DELIMITER $$

DROP PROCEDURE IF EXISTS getProductionItem$$
CREATE DEFINER=pvtuser@`%` PROCEDURE getProductionItem(projectID BIGINT(20))

BEGIN

  CREATE TEMPORARY TABLE tempProdItem(
    prodType SET('JOB','BATCH','DOCGROUP'),
    taskQueueId BIGINT(20),
    jobBatchDocId BIGINT(20),
    jobBatchDocName VARCHAR(255),
    lockStatus SET('LOCKED','OPEN')
  );

  DECLARE done INT DEFAULT 0;

  DECLARE prodType VARCHAR(10);
  DECLARE taskQueueId BIGINT(20);
  DECLARE jobBatchDocId BIGINT(20);
  DECLARE jobBatchDocName VARCHAR(255);
  DECLARE lockStatus VARCHAR(10);

  DECLARE docCursor CURSOR
      FOR SELECT 'DOCGROUP',
                 jq.taskqueueid,
                 jq.documentgroupid,
                 dgd.documentGroupName,
                 COALESCE(jql.lockStatus,'OPEN')
            FROM jobdetails jd
           INNER JOIN jobqueue jq
              ON jd.jobid=jq.jobid
           INNER JOIN documentgroupdetails dgd
              ON jq.documentgroupid=dgd.documentgroupid
            LEFT JOIN jobqueuelocked jql
              ON jq.taskqueueid=jql.taskqueueid
           GROUP BY jq.taskqueueid;

  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done=1;

  OPEN docCursor;

  Loop1: LOOP
    FETCH docCursor INTO prodType,taskQueueId,jobBatchDocId,jobBatchDocName,lockStatus;
    IF done=1 THEN
      LEAVE Loop1;
    ELSE
       /* TODO INSERT HERE IN TEMP TABLE */
    END IF;

  END LOOP;

  CLOSE docCursor;

  SELECT * FROM tempProdItem;

END

$$
DELIMITER; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:00:24.530

```
DELIMITER $$

DROP PROCEDURE IF EXISTS getProductionItem$$
CREATE DEFINER=pvtuser@`%` PROCEDURE getProductionItem(projectID BIGINT(20))

BEGIN

  DECLARE done INT DEFAULT 0;
  DECLARE prodType VARCHAR(10);
  DECLARE taskQueueId BIGINT(20);
  DECLARE jobBatchDocId BIGINT(20);
  DECLARE jobBatchDocName VARCHAR(255);
  DECLARE lockStatus VARCHAR(10);

  DECLARE docCursor CURSOR
      FOR SELECT 'DOCGROUP',
                 jq.taskqueueid,
                 jq.documentgroupid,
                 dgd.documentGroupName,
                 COALESCE(jql.lockStatus,'OPEN')
            FROM jobdetails jd
           INNER JOIN jobqueue jq
              ON jd.jobid=jq.jobid
           INNER JOIN documentgroupdetails dgd
              ON jq.documentgroupid=dgd.documentgroupid
            LEFT JOIN jobqueuelocked jql
              ON jq.taskqueueid=jql.taskqueueid
           GROUP BY jq.taskqueueid;

  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done=1;

  CREATE TEMPORARY TABLE tempProdItem(
    prodType SET('JOB','BATCH','DOCGROUP'),
    taskQueueId BIGINT(20),
    jobBatchDocId BIGINT(20),
    jobBatchDocName VARCHAR(255),
    lockStatus SET('LOCKED','OPEN')
  );

  OPEN docCursor;

  Loop1: LOOP
    FETCH docCursor INTO prodType,taskQueueId,jobBatchDocId,jobBatchDocName,lockStatus;
    IF done=1 THEN
      LEAVE Loop1;
    ELSE
      INSERT INTO tempProdItem
             (prodType,taskQueueId,jobBatchDocId,jobBatchDocName,lockStatus)
      VALUES (prodType,taskQueueId,jobBatchDocId,jobBatchDocName,lockStatus);
    END IF;

  END LOOP;

  CLOSE docCursor;

  SELECT * FROM tempProdItem;

END

$$
DELIMITER; 
```

# sql - 删除类别及其子/孙

> ID：10701988
> 
> 赞同：0
> 
> 时间：2012-05-22T12:24:46.933
> 
> 标签：sql, sql-server, entity-framework

使用对象上下文。我想通过 ExecuteStoreCommand 传递一个 SQL 查询来做到这一点，因为我不想仅仅为了在之后删除它们而检索所有相关实体。

类别表如下：

```
CatID | CatName | ParentID 
```

其中 CatID 是 ParentID FK 的主键

我希望删除一个类别以及该类别下的所有类别。可以是 2+ 级别的子猫，所以不同的 ParentID

以为我可以按如下方式进行操作，只需在数据库中的外键的删除选项上设置“级联”，但它不会让我，而且它似乎不想通过使用 CatID - ParentID 关系来级联删除和查询被这个非常 FK 约束停止。

```
public RedirectToRouteResult DelCat(int CatID)
{
    if (CatID != 0)
    {
        _db.ExecuteStoreCommand("DELETE FROM Categories WHERE CatID={0}", CatID);
        _db.SaveChanges();
    }

    return RedirectToAction("CatManage");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:58:11.300

递归 CTE allCategories 生成层次结构中所有类别的列表。显然，删除部分会将它们全部删除。

```
; with allCategories as (
 select CatID
   from Categories
  where CatID = @CatID_to_delete
  union all
 select Categories.CatID
   from allCategories
  inner join Categories 
     on allCategories.CatID = Categories.ParentID
)
delete Categories
  from Categories 
 inner join allCategories
    on Categories.CatID = allCategories.CatID 
```

但是，请先尝试`select * from allCategories`检查。

有[TEST @Sql Fiddle](http://sqlfiddle.com/#!3/f883f/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:39:51.143

为什么不在批处理中发送两个语句？

```
DELETE Categories WHERE ParentID = {0};
DELETE Categories WHERE CatID = {0}; 
```

如果您使用的框架“不允许您”这样做，那么请正确执行：将您的逻辑放在存储过程中，然后调用存储过程。

# c# - 向绑定到表的 DGV 添加一行

> ID：10701989
> 
> 赞同：0
> 
> 时间：2012-05-22T12:24:47.777
> 
> 标签：c#, winforms, datagridview

我使用以下内容将表格添加到 WinForm 上的 DataGridView：

```
 void PopulateGridView() {
        conn = new SqlConnection(ConfigurationManager.ConnectionStrings["IMS"].ConnectionString);
        myAdapt = new SqlDataAdapter("SELECT * FROM FrontDesk.dbo.tb_xxx", conn);
        mySet = new DataSet();
        myAdapt.Fill(mySet, "AvailableValues");
        myTable = mySet.Tables["AvailableValues"];

        this.uxChargeBackDataGridView.DataSource = myTable;
        this.uxChargeBackDataGridView.Columns["RefKey"].Visible = false; 
    } 
```

表中有 5 行，其中只有 2 个字段 - 该字段`RefKey`对 DGV 是隐藏的，并且是基础表的主键。

为什么以下不起作用？`Add`似乎是用于添加行的 DGV 的 Rows 集合的属性：

```
 private void button1_Click(object sender, EventArgs e)
    {
        uxChargeBackDataGridView.Rows.Add(6, "dre");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:22:58.570

因为网格使用 DataTable 作为源，所以您必须将行添加到表中。网格应*自动*反映：

```
DataTable table = (DataTable)uxChargeBackDataGridView.DataSource;
DataRow row = table.NewRow();
row[0] = 6;
row[1] = "dre";
table.Rows.Add(row); 
```

使用`NewRow()`数据表上的函数来获取具有数据表使用的架构的 DataRow 对象。

`table`如果您将`mySet`and变量移动到表单级别范围，则不必创建引用`myTable`，那么您就可以改为使用`myTable.Rows.Add(row);`。

# php - 由于不区分大小写（utf8_general_ci），无法使用俄语 lang 进行 mysql 搜索

> ID：10701991
> 
> 赞同：0
> 
> 时间：2012-05-22T12:24:53.423
> 
> 标签：php, mysql

我尝试在 mysql 查询中使用 UPPER/LOWER func，但它仍然没有帮助...甚至尝试将它与 mb_strtoupper/lower 一起使用...我的数据库所有字段和表都是 utf8_general_ci

当我用俄语输入“关键字”时，它什么也找不到，因为在数据库中它就像“关键字”，当我输入“关键字”时，它会显示结果

这是我的查询命令： SELECT * FROM `catalog_product`WHERE `name`LIKE \'%'.$id.'%\' OR `brand`LIKE \'%'.$id.'%\' OR `manufacturer`LIKE \'%'.$id.'%\ ' OR `model`LIKE \'%'.$id.'%\''

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:40:25.257

将排序规则更改为 utf8-general-bin 并重试。

# c# - WPF 窗口大小有监视器大小

> ID：10701998
> 
> 赞同：5
> 
> 时间：2012-05-22T12:25:18.533
> 
> 标签：c#, wpf, window, monitor

我是 WPF 的新手，我想制作一个具有最大尺寸（显示器尺寸）的窗口。

Window 的 XAML 代码是这样的：

```
<Window x:Class="WpfApplication1.Stop"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Stop" Height="{Binding}" Width="{Binding}" Background="Black" WindowStartupLocation="CenterScreen" WindowStyle="None" ResizeMode="NoResize" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" d:DesignHeight="260" d:DesignWidth="348" SizeToContent="WidthAndHeight">
    <Grid>
        <Button Content="Ok" Height="25" HorizontalAlignment="Left" Margin="194,36,0,0" Name="button1" VerticalAlignment="Top" Width="38" Click="button1_Click" />
        <TextBlock Height="17" HorizontalAlignment="Left" Margin="18,16,0,0" Name="textBlock1" Text="Introduceti parola:" VerticalAlignment="Top" Width="246" FontSize="14" Foreground="White" />
        <PasswordBox Height="25" HorizontalAlignment="Left" Margin="12,36,0,0" Name="passwordBox1" VerticalAlignment="Top" Width="176" />
    </Grid>
</Window> 
```

打开此窗口的 C# 代码如下：

```
Stop a = new Stop();                   
a.Show();
a.Width = System.Windows.SystemParameters.PrimaryScreenWidth;
a.Height = System.Windows.SystemParameters.PrimaryScreenHeight; 
```

如何将窗口大小设置为监视器大小？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T12:46:18.363

在代码隐藏中使用它：

```
a.WindowState = WindowState.Maximized; 
```

并`SizeToContent`从您的`XAML`.

使用此代码：

```
a.Width = System.Windows.SystemParameters.PrimaryScreenWidth;
a.Height = System.Windows.SystemParameters.PrimaryScreenHeight; 
```

使用不同分辨率的辅助屏幕时会出现问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-29T09:18:44.363

以上评论有效。我在下面做了：- 写在 mainwindow.xaml.cs 中：-

```
public MainWindow()
        {
            this.WindowState = WindowState.Maximized;
            InitializeComponent();
        } 
```