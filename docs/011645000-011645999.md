# StackOverflow 问答 11645000-11645999

# jquery - IE改变div内容

> ID：11645000
> 
> 赞同：-1
> 
> 时间：2012-07-25T07:48:10.723
> 
> 标签：jquery, internet-explorer-8

我需要在 div 上显示动态内容。内容每秒更新一次。我尝试了这些代码，它们不适用于 IE：

```
jQuery('#test').html("end"); // this works normal with opera , with html tags
// or
document.getElementById('test').innerHTML = "End"; // this doesnt work normal in opera with html tags
// or
$('test').text('end'); 
```

我正在使用 IE 8 进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:56:28.523

如果您将第三个更改为`$('#test').text('end');`，则所有三个都应该在 IE8 中正常工作。

# jquery - Cycle jQuery，如何在第二个循环后停止幻灯片放映？

> ID：11645003
> 
> 赞同：0
> 
> 时间：2012-07-25T07:48:17.507
> 
> 标签：jquery, jquery-cycle

你好朋友，我正在开发 jQuery 循环插件，它很酷，但是当我的客户希望它在第二次循环后停止时我被卡住了，然后我去谷歌找出方法然后我找到`nowrap : 1`方法，但它不能帮助我在第二次循环后停止幻灯片放映循环它在 1 个循环后停止我的循环请帮助我跟随我的代码。

**脚本**

```
<script>
$(document).ready(function(e) {

    $('#slider_home').cycle({
            fx:'fade',
         speed:400,
        timeout:3000,
        nowrap:  2,
        cleartypeNoBg:true,
        pager:'#nav_slider',
        pagerAnchorBuilder: function paginate(idx, el) {
            return '<li><a class="service' + idx + '" href="#" >&bull;</a></li>';
}
})
});
</script> 
```

请帮我

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:01:58.703

您必须使用`after`选项来计算周期，当您处于循环的第二次迭代时，请执行以下操作：

```
$('#slider_home').cycle('stop'); 
```

# javascript - 在函数参数中实例化对象

> ID：11645004
> 
> 赞同：-1
> 
> 时间：2012-07-25T07:48:18.200
> 
> 标签：javascript

如何将实例化对象的属性作为参数传递给 JavaScript 函数。我想这样做，以便我被迫始终使用对象的相同属性。

我该怎么做呢？

```
//object
var house = {
    bed:"",
    chair:"",
    tv,""

};

//function
var doThis = function(OBJ){

    //pass this OBJ to something
    alert(OBJ.bed);
    alert(OBJ.chair);
    alert(OBJ.tv);

};

//call function
doThis({new house.bed = "a", new house.chair="c", new house.tv = "f"});

doThis({new house.bed = "dd", new house.chair="gg", new house.tv = "jjjh"});

doThis({new house.bed = "ff", new house.chair="hh", new house.tv = "hhh"});

doThis({new house.bed = "gg", new house.chair="jjj", new house.tv = "hh"}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T07:51:09.697

不是很明白这个问题，但是你的代码有语法错误，函数的调用应该是这样的：

```
doThis({bed: "a", chair: "c", house: "f"}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T07:52:55.093

您的代码与 javascript 相差甚远，但您可以这样做：

```
function House(bed, chair, tv) {
    this.bed = bed;
    this.chair = chair;
    this.tv = tv;
}
doThis(new House("a", "c", "f"));
doThis(new House("dd", "gg", "asd")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T07:57:07.633

Like Esailija said except that doThis is not defined, so use something like this:

```
function House(bed,chair,tv){
    var obj = {};
    obj.bed = (bed) ? bed : "";
    obj.chair = (chair) ? chair : "";
    obj.tv = (tv) ? tv : "";
    return obj;
  }

  var myHouse = new House('water bed'); 
```

# jquery - 为什么当我使用包含下划线的序列化数据运行 jquery.post 时，会出现内部服务器错误？

> ID：11645007
> 
> 赞同：1
> 
> 时间：2012-07-25T07:48:26.810
> 
> 标签：jquery, serialization

如上面的标题，我使用包含数据 __VIEWSTATE 的序列化数据执行 jquery.post，它失败并引发错误：内部服务器错误。如果我删除双下划线，它会正常发送。即使我用 &5F 替换下划线仍然无法工作。任何人都可以帮助我吗？

这是示例序列化数据：`__VIEWSTATE=2FwEPDwUKMjA0MjMxNTU1OGRk3d3uA8978xJJp2BpibvGI2FYCqRgvt007Iub3qwQb9cKk3D&newFlag=1&cfunction=save&cfunctionlist=1BB57B21-04EC-4B89-87CE-DA10AAE9429E&csortAsc=&csortDesc=&csort=&ischangecombo=0&lastPageNo=6&PageSel=1&cid=1BB57B21-04EC-4B89-87CE-DA10AAE9429E&ParameterCode=11&ParameterDescription=11&SystemMode=`

# android - Android 4.0的触摸屏压力

> ID：11645008
> 
> 赞同：1
> 
> 时间：2012-07-25T07:48:40.410
> 
> 标签：android, touch, pressure

**当我点击Android 4.0**的屏幕时， 的值`getPressure()`总是`1.0`。该值在**Android 2.1**上是可以的。有什么问题吗？测试设备为**三星 Galaxy S III**。代码是这样的：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    super.onTouchEvent(event);

    float allWidth = this.getWidth();
    float allHeight = this.getHeight();

    calculate(event.getX(), event.getY(), allWidth, allHeight,
            event.getPressure());   
    return true;
} 
```

# serial-port - Arduino - 需要大量的 0 才能使 LED 持续 3 秒

> ID：11645009
> 
> 赞同：0
> 
> 时间：2012-07-25T07:48:41.847
> 
> 标签：serial-port, arduino

我正在用 arduino 做一个项目来制作铃声，当我第一次尝试时，它按照我想要的方式工作（`wait(Serial.read())`），但现在我需要`0`通过串行端口发送超过 100 个，只是为了让它显示4 秒。这是我的 Java 代码： *为长做准备*

```
Main.ringBell("100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");

public static void ringBell(String length) throws Exception {
     output.write(length.getBytes());
     output.flush();
} 
```

这是Arduino草图：

```
int ledPin = 13;

void setup() {
    pinMode(ledPin, OUTPUT);
    Serial.begin(9600);
}

void loop() {
    if(Serial.available() > 0) {
        digitalWrite(ledPin, HIGH);
        delay(Serial.read());
        digitalWrite(ledPin, LOW);
    }
} 
```

有人在我的代码中看到错误吗？如果是这样，请让我知道出了什么问题，我会修复它。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T10:20:41.093

您不是向 arduino 发送一个大数字，而是向 arduino 发送几个 ASCII 字节。Arduino 会看到这个序列：

```
49, 48, 48, 48, 48, 48, ... 
```

在每个循环中，它将读取一个字节并等待该**毫秒**数。49 或 48 毫秒不是很长的时间。因此，您所拥有的是 LED 的持续闪烁，这是用肉眼快速看到的。

接下来是：您正在一次刷新中发送字节。但是 Arduino 只有一个 64 字节的内部缓冲区（参见[可用](http://arduino.cc/en/Serial/Available)的文档）。其余的就简单地忘记了。

让我们粗略计算一下：64 字节 *（每字节 48 毫秒延迟）为 3072 毫秒。是的，这听起来很合理。

接下来的事情是：`delay`只能处理`unsigned long`32 位类型的参数，这意味着您可以等待约 4,000,000,000 毫秒。你的论点`Main`远远超出了这个限制。

所以：最简单的方法是使用`parseInt`而不是`read`. 并且`Main`仅供应正数范围内的数字`int`（0.. 32767）。`Main`并且在你发送下一个之前也做一些延迟`ringBell`。

# objective-c - 将两个图像添加到一个表格视图单元格

> ID：11645011
> 
> 赞同：0
> 
> 时间：2012-07-25T07:48:55.650
> 
> 标签：objective-c, uitableview

我是 Objective-C 编程的新手，我正在编写使用 XML 文件作为数据源的应用程序。我有 init 的班级分数：

```
- (id)initWithPlayer1Name:(NSString *)name1 Player2Name:(NSString *)name2 Player1Url:(NSString *)url1 Player2Url:(NSString *)url2 Player1FrameScore:(NSString *)frame1 Player2FrameScore:(NSString *)frame2 Player1InFrameScore:(NSString *)score1 Player2InFrameScore:(NSString *)score2
{
    if(self = [super init])
    {
        self.name1 = name1;
        self.name2 = name2;
        self.url1 = url1;
        self.url2 = url2;
        self.image1 = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:url1]]];
        self.image2 = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:url2]]];
        self.frame1 = frame1;
        self.frame2 = frame2;
        self.score1 = score1;
        self.score2 = score2;
    }
    return self;
} 
```

我想在表格视图中显示分数列表。当应用程序启动时，我的自定义单元格中有一些示例数据和表格视图（每行显示 2 个名称和 2 个来自 score 类的图像）工作正常。当我从 XML 更新数据时，问题就开始了（我正在使用 XMLParser - 效果很好）。球员姓名已更新，但图像消失。在其他表格视图中，我有自定义单元格中的玩家列表，但只有一张图片，它工作正常。

这是分数表视图类的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ScoresCell";
    ScoresCell *cell = (ScoresCell*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {
        cell = (ScoresCell*) [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    Score *score = [self.scores objectAtIndex:indexPath.row];
    cell.player1Name.text = score.name1;
    cell.player1Image.image = score.image1;
    cell.player2Name.text = score.name2;
    cell.player2Image.image = score.image1;
    return cell;
} 
```

我正在以多种方式对其进行测试，但我还没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:52:51.757

下次我将首先检查我自己的 XML 文件。一个文件中有白色字符，这是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:01:50.657

首先，如果您重用单元格，则必须考虑 cellForRowAtIndexPath 中的两种情况：

1.  `dequeueReusableCellWithIdentifier`返回一个单元格
2.  `dequeueReusableCellWithIdentifier`返回零。在这种情况下，您必须分配一个新单元格。

在这个 if 块之外（所以当你有一个重复使用的单元格或一个新的单元格时）你将设置每个元素的值，例如标签和图像。对于您的代码，`dequeueReusableCellWithIdentifier`代码行下的所有代码。

按照这个其他stackoverflow线程中写的内容：[question] [initWithFrame：reuseIdentifier：已弃用](https://stackoverflow.com/questions/6967506/initwithframe-reuseidentifier-is-deprecated)，您将在其中找到 if(cell == nil) 代码块...

之后，如果您仍然有问题，请再次发布:)

# java - PMD Eclipse 复制粘贴工具，只勾选一个类

> ID：11645012
> 
> 赞同：0
> 
> 时间：2012-07-25T07:48:55.353
> 
> 标签：java, pmd

我正在使用 PMD 工具，我可以在项目级别检查“查找可疑复制和粘贴”。

问题是，我只想检查课堂。

有谁知道只检查一个类的方法？我可以检查一类罚款的违规行为，但不能检查可疑的复制和粘贴。

有没有人有这方面的经验或他们可以提供的例子？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T07:51:23.377

如果您使用 maven pmd 插件，您可以指定排除和包含模式，让您挑选出您的类。如果没有 maven，我想你应该能够运行插件 raw。我不知道如何直接从 eclipse 中做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T07:55:59.567

Suspect Copy&Paste 通常跨类工作 - 它检测可避免的代码重复。因此，如果您从验证中排除所有其他代码单元，它不应该按预期工作。（并且检查班级级别相当于排除所有其他班级）

# c# - 在 Twitter api 中获取直接消息回复

> ID：11645019
> 
> 赞同：0
> 
> 时间：2012-07-25T07:49:43.857
> 
> 标签：c#, twitter

我想从我登录的 Twitter 帐户中获取直接消息……当我使用“

```
https://api.twitter.com/1/direct_messages.json?count=50&since_id=228011290508013568&include_entities=true 
```

我收到错误：-

> {"error":"无法验证您的身份。","re​​quest":"/1/direct_messages.json?count=50&since_id=228011290508013568&include_entities=true"}

我无法验证我的请求，请帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:05:42.600

你按照特伦斯·伊登说的做了吗？您是否遵循 Twitter 验证请求的流程：[https](https://dev.twitter.com/docs/auth/authorizing-request) ://dev.twitter.com/docs/auth/authorizing-request ？

# c - c查询txt记录

> ID：11645020
> 
> 赞同：0
> 
> 时间：2012-07-25T07:49:47.810
> 
> 标签：c, dns, libresolv

每个人，我都编写了程序来读取dns txt记录，但是它有一些问题，谁能告诉我为什么？以下是我的源代码

```
char blockItem[512];
bzero(blockItem,512);
/*Temp Save the txt record value*/
int responseLength;
/*The Length of response*/
int i;
/*For Loop Controller*/
ns_msg query_parse_msg;
/*List of response message
 * For txt record , It sould only one response!
 * */
ns_rr query_parse_rr;
/*One response message*/
u_char responseByte[512];
/*Variable that for storage query answer.*/
bzero(responseByte,512);
/*Clear variable*/
if ((responseLength = res_query(host,C_IN,T_TXT,responseByte,512)) < 0)
{
    /*Query DNS Server*/
    return HOSTNOTFIND;
}
else
{
    if (ns_initparse(responseByte,responseLength,&query_parse_msg) < 0)
    {
        /*Pass the answer to ns_msg(May be it mean cut the dns header)*/
        printf("%s\n","Cannot Read response Message");
        return NOTSUCCESSFUL;
    }
    else
    {
        for (i =0;i < ns_msg_count(query_parse_msg,ns_s_an);i++)
        {
        /*Count the toolly response*/
            if (ns_parserr(&query_parse_msg,ns_s_an,i,&query_parse_rr))
            {
            /*Pass the msg list to rr.*/
                printf("%s\n","Parse failed!");
                return NOTSUCCESSFUL;
            }
            else
            {
                u_char const *rdata = (u_char*)(ns_rr_rdata(query_parse_rr) );
                char *blockItem;
                blockItem=(char*)rdata;
                blockItem[strlen((char*)rdata)-2] = '\0';
                /*Pass the ns_rr to char data type.*/
                printf("Normal:%s\n",(u_char *)blockItem);
            }
        }
    } 
```

输出：`Fv=spf1 redirect=_spf.google.com`

但是原始的txt记录应该是`v=spf1 redirect=_spf.google.com`

我的问题是`u_char const *rdata = (u_char*)(ns_rr_rdata(query_parse_rr) )`

如果我将其更改为`u_char const *rdata = (u_char*)(ns_rr_rdata(query_parse_rr) +1)`

输出将变为：`v=spf1 redirect=_spf.google.com`

另外，我参考了如何查询MX记录，我发现有+2，有什么可以告诉我为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:39:45.920

TXT 记录 RDATA 格式为

```
length, 1 byte
string, <length bytes>
length2, 1 byte
string2, <length2 bytes>
etc. 
```

MX 记录 RDATA 格式为

```
priority, 2 bytes
domain name, the rest of the message 
```

（[RFC 1035](https://www.rfc-editor.org/rfc/rfc1035)，第 3.3.14 和 3.3.9 段）

# iphone - 当应用程序在iPhone的特定时间处于后台时如何激活应用程序？

> ID：11645021
> 
> 赞同：1
> 
> 时间：2012-07-25T07:49:47.897
> 
> 标签：iphone, background

在特定时间，我想要在后台运行的应用程序？但我不知道。实际上，我正在做一个闹钟应用程序，当准时，这个应用程序会自动显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T07:54:47.520

这是不可能的，你可以做的是安排一个LocalNotification。当通知被触发时，用户会收到通知提示。然后用户可以决定打开应用程序或忽略通知。

# android - 一个自定义适配器，在列表中显示来自网络的不同图像

> ID：11645026
> 
> 赞同：0
> 
> 时间：2012-07-25T07:50:17.153
> 
> 标签：android, listview, imageview, custom-adapter

我制作了一个自定义 ArrayAdapter，但它没有在列表的每一行中显示不同的图像。它只显示文本而不显示来自服务器的图像。这是代码：自定义适配器：

```
package com.findadoc;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class doctorslistAdapter extends ArrayAdapter<Doctors> {
    Context context;
    int layoutResource;
    Doctors[]objects=null;
    public doctorslistAdapter(Context context, int resource, Doctors[] objects) {
        super(context, resource, objects);
        this.context=context;
        this.layoutResource=resource;
        this.objects=objects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v=convertView;
        DoctorsHolder holder;
        if(v==null){
            LayoutInflater inflater=((Activity)context).getLayoutInflater();
            v=inflater.inflate(layoutResource, parent, false);
            holder=new DoctorsHolder();
            holder.doc_icon=(ImageView)v.findViewById(R.id.imageViewdocimg);
            holder.doc_name=(TextView)v.findViewById(R.id.textViewdocname);
            holder.specialization=(TextView)v.findViewById(R.id.textViewspecialization);
            v.setTag(holder);
        }
        else
        {
            holder=(DoctorsHolder)v.getTag();
        }
        Doctors doc=objects[position];
        holder.doc_icon.setImageBitmap(doc.bitmap);
        holder.doc_name.setText(doc.doc_name);
        holder.specialization.setText(doc.specialization);
        return v;
    }
    static class DoctorsHolder{
        ImageView doc_icon;
        TextView doc_name,specialization;
    }
} 
```

医生班：

```
package com.findadoc;

import java.io.BufferedInputStream;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;

public class Doctors {
    public String doc_name,specialization;
    public Bitmap bitmap;
    public Doctors(String icon,String doc_name,String specialization){
        this.doc_name=doc_name;
        this.specialization=specialization;
        (new bitmapclass(icon)).execute();
    }
    class bitmapclass extends AsyncTask<Void, Void, Void>{
        public String icon_url;
        public Bitmap bm = null;
        public bitmapclass(String icon_url){
            this.icon_url=icon_url;
        }
        @Override
        protected Void doInBackground(Void... arg0) {
             try {
                    URL aURL = new URL("http://10.0.2.2/findadoc/images/"+this.icon_url);
                    URLConnection conn = aURL.openConnection();
                    conn.connect();
                    InputStream is = conn.getInputStream();
                    BufferedInputStream bis = new BufferedInputStream(is, conn.getContentLength());
                    bm = BitmapFactory.decodeStream(bis);
                    bis.close();
                    is.close();
               } catch (Exception e) {
                    e.printStackTrace();
               }
            return null;
        }
        @Override
        protected void onPostExecute(Void result) {
            Doctors.this.bitmap=bm;
            super.onPostExecute(result);
        }
    }
} 
```

主要课程：

```
package com.findadoc;

import java.io.BufferedInputStream;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;

import com.findadoc.Doctors.bitmapclass;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.ImageView;
import android.widget.ListView;

public class doctorsActivity extends Activity {
    ListView listviewdocs;
    ImageView imageview;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.doctorsactivity);
        imageview=(ImageView)findViewById(R.id.imageViewtest);
        Doctors d=new Doctors("doc1.png", "", "");
        imageview.setImageBitmap(d.bitmap);
        listviewdocs=(ListView)findViewById(R.id.listViewDoctors);
        Doctors doctors_data[]=new Doctors[]{
                new Doctors("doc1.png", "Dr. Sammy Kulova","Gyaenacologist"),
                new Doctors("doc2.png","Dr.Joan Kulova","Paediatrician"),
                new Doctors("doc3.png","Dr. John Kulova","Pharmacist")
        };
        listviewdocs.setAdapter(new doctorslistAdapter(doctorsActivity.this, R.layout.doctors_list_item_row, doctors_data));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:59:55.747

你的 XML 文件在哪里，你必须使用一个 xml 文件，你必须在其中将 listview 的内容指定为 ImageView 和 TextView。并且该 XML 文件进入`getView()`适配器类中的这一行

（假设是 list_row.xml）

```
v=inflater.inflate(R.layout.list_row, parent, false); 
```

# c# - 同时加载 2 个 iframe

> ID：11645038
> 
> 赞同：1
> 
> 时间：2012-07-25T07:50:57.527
> 
> 标签：c#, asp.net, html, iframe, iis-7

我已经开始在 IIS 7 上的 .Net 4 中开发网络聊天。聊天主页包含 2 个 IFRAME。第一帧用于保留消息并逐步加载（它在用户连接到聊天时加载并传递消息以聊天）。第二个 iframe 用于发送消息。当第一帧加载第二帧无法加载但如果第一帧停止加载时，我有一个问题，秒数以毫秒为单位执行。

1.  我已经尝试过：
2.  使用 AJAX 发送消息。
3.  第一帧和第二帧的脚本使用不同的名称。它有时会有所帮助，但并非总是如此。
4.  检查用户刷新聊天主页或关闭后脚本是否仍在运行。
5.  在 IIS 中设置连接超时。
6.  使用流式响应/文本响应。
7.  连接保持活动/不保持活动指令。
8.  交换主聊天页面的 iframe 标签。
9.  以不同的方式为聊天的主页添加 CSS JS 文件，即 @import CSS。
10.  去除踩踏使用。

***我找到了一个解决方案，但我认为这不是使用许多域的好解决方案，因为域访问 javascript 限制。 [iFrame 未并行执行](https://stackoverflow.com/questions/3389086/iframes-not-executing-in-parallel)***

下面是 Test.aspx 和 Test.aspx.cs 页面代码：

```
<%@ Page Title="Home Page" Language="C#"  AutoEventWireup="true" CodeBehind="Test.aspx.cs" Inherits="Test._Default" %>

using System;
using System.Web;
using System.Threading;

namespace Test
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
        string p = (Request.QueryString["p"] != null)?Request.QueryString["p"]:"";
        if(Request.QueryString["data"] == null)
        {
            Response.Write(@"<html><head></head><body>12<iframe src=""Test.aspx?data="" height=""900px""></iframe><iframe src=""http://localhost/Test"+p+@".aspx?data=""  height=""900px""></iframe></body></html>");   
        }
        else
        {
            System.IO.File.AppendAllText(Server.MapPath(".")+ @"\test.log", DateTime.Now.ToString()+ "\t" + "Data script started\r\n");
            Response.Write(new String(' ', 1024));
            int i=0;
            while (Response.IsClientConnected)
            {
                Response.Write((++i).ToString() + " ");
                Response.Flush();
                Thread.Sleep(1000);
                System.IO.File.AppendAllText(Server.MapPath(".")+ @"\test.log", DateTime.Now.ToString()+ "\t" + "Data script Runned\r\n");

            }
            System.IO.File.AppendAllText(Server.MapPath(".")+ "test.log", DateTime.Now.ToString()+ "\t" + "Data script stoped\r\n");
        }
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:55:33.073

您是否考虑过查看 NuGet 中的 SignalR（测试版）包 - 它是为编写此类应用程序而定制的，并且与 Node.js 有相似之处。我强烈建议您考虑研究这项技术来解决这个问题。

它可以在 git hub [https://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)和 Nuget [http://nuget.org/packages/SignalR](http://nuget.org/packages/SignalR)上找到。

# performance - Derby：表中的行越多，查询越快？

> ID：11645041
> 
> 赞同：1
> 
> 时间：2012-07-25T07:51:24.323
> 
> 标签：performance, optimization, benchmarking, derby

在使用 Apache Derby DB 进行性能测试时，我注意到一些奇怪的行为：

我为性能测试做了五次测试。在每次运行之前，我都会在表中插入一些数据，这样我就可以进行第一次运行，例如在表中使用 500k 元组，第二次运行 1000k，第五次运行 2500k 元组。

查询的执行时间是这样的：200ms、450ms、700ms、500ms、550ms

也就是说，第四次运行比第三次运行快，尽管在第四次运行中必须扫描和获取更多数据。这很奇怪。

我能想象的唯一原因是，Derby 会不时优化一些内部结构或物理布局，或者一旦表中的数据超过某个阈值。无论如何，可以手动触发此优化以获得单调不递减的执行时间测量吗？

或者您知道这种行为的确切原因吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:03:52.150

您可能必须学习如何阅读查询计划输出来弄清楚发生了什么，但我还是大胆猜测一下：当向表中添加行时，Derby 服务器会定期注意到该表的大小发生了很大变化，并且它会自动重新计算优化器用于查询计划的统计信息，这可能会导致完全不同的查询计划。

为了确认这一点，您可以尝试在每次数据加载后自己重新计算统计信息，看看是否可以获得最佳查询计划：[http ://db.apache.org/derby/docs/10.8/tuning/ctunperfstatistics.html](http://db.apache.org/derby/docs/10.8/tuning/ctunperfstatistics.html)

# html - ubuntu 中的 css @font-face 不起作用

> ID：11645046
> 
> 赞同：1
> 
> 时间：2012-07-25T07:51:37.010
> 
> 标签：html, css, linux, font-face

我在Windows下开发了网页。它有这样的文件夹：

```
wwwroot
wwwroot/css
wwwroot/fonts 
```

和文件

```
wwwroot/css/main.css
wwwroot/fonts/fontaaa.otf 
```

main.css 文件中有这样一段代码：

```
@font-face
{
    font-family : 'fontaaa';
    src         : url("../fonts/fontaaa.otf");
} 
```

它会在我的本地主机上看到 Windows 下的字体。一切都很完美，所以我将我的项目上传到了 linux 服务器。一切正常（页面加载，样式正常），但字体`fontaaa.otf`不**显示**。问题是什么？花了很多时间弄清楚。

PS我从来没用过`@font-face`。

PSS 字体是从 Internet 下载的（不在 Windows 字体文件夹中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:17:08.703

尝试了所有答案，没有运气，但找到了问题。这是字体文件夹的权限。谢谢大家。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T07:53:38.400

字体是这样声明的：

```
@font-face {
  font-family: 'Font name';
  font-style: normal;
  font-weight: 400;
  src: local('Font name'), local('Font name-Regular'), url(fontname.woff) format('woff');
} 
```

要应用这些字体，您必须这样做：

```
<style>
h1 {
font-family: 'Font Name', Arial/* Just in case if your web fonts didn't load */;
}
</style>

<h1>this will be font-face fonts</h1> 
```

更多[网页字体](http://www.google.com/webfonts/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T08:00:10.660

尝试：

```
@font-face
{
 font-family : 'fontaaa';
 src         : url("../fonts/fontaaa.otf");
}

p, html, body {
 font-family:fontaaa;
 src: url('../fonts/fontaaa.otf');
}

@font-face {
 font-family: 'Font name';
 font-style: normal;
 font-weight: 400;
 src: local('Font name'), local('Font name-Regular'), url(fontname.woff) format('woff');
} 
```

这对我有用（你可以放另一个标签而不是 p）

# javascript - 在嵌套控制器+动作的情况下Emberjs内存泄漏？

> ID：11645048
> 
> 赞同：1
> 
> 时间：2012-07-25T07:51:42.560
> 
> 标签：javascript, ember.js

我在 emberjs 中使用嵌套的 ArrayController。基本上我有一个父 ArrayController，其内容由子 ArrayController 组成。每个子 ArrayController 的内容是一个简单的 emberjs 对象列表。使用时间线工具和 Chrome 的分析工具监控我的应用程序的内存使用情况，删除子 ArrayController 时似乎存在内存泄漏。我正在使用最新的 emberjs 大师。

简化的代码和演示可以在这里找到[http://jsfiddle.net/qVNtv/22/](http://jsfiddle.net/qVNtv/22/)。单击“添加”会添加 20 个子 ArrayController，每个子 ArrayController 有 40 个简单的 emberjs 对象作为子对象。单击“全部删除”将删除所有子 ArrayController。随着“添加”和“全部删除”的每个循环，整体内存使用量都会增加。如果我不使用任何`{{action}}`内存，则整体内存使用量保持不变。

我做错什么了吗？可以以某种方式避免这种内存使用量的增加吗？

该演示使用一个简单的模板，由两个嵌套`{{#each}}`

```
<script type="text/x-handlebars">
  <input type="button" value="Add" onClick="Demo.containerController.addController();"/>
  <input type="button" value="Remove all" onClick="Demo.containerController.removeAll();"/>

  {{#each Demo.containerController.content tagName="ul"}}
    <li>{{#each content}}<a {{action "test"}}></a> {{prop}}{{/each}}</li>
  {{/each}}
</script> 
```

代码是

```
 Demo = Ember.Application.create();

  Demo.Model = Ember.Object.extend({
    prop : ''
  });

  Demo.Controller = Ember.ArrayController.extend({
    content: []
  });

  Demo.containerController = Ember.ArrayController.create({
    content : [],

    addController : function() {
      for (var i = 0; i < 20; i++) {
        var cnt = [];

        for (var j = 0; j < 40; j++) {
            cnt.pushObject(Demo.Model.create({prop: 'test' + j}));                
        }            

        this.pushObject(
        Demo.Controller.create({
            content: cnt
        }));
      }
    },

    removeAll : function() {          
      this.clear();
    }
  }); 
```

# hibernate - hibernate - 条件查询的虚拟列

> ID：11645053
> 
> 赞同：1
> 
> 时间：2012-07-25T07:52:13.933
> 
> 标签：hibernate, hibernate-mapping, hibernate-criteria, usertype

我创建了一个名为 Person 的实体。它实现了生命周期接口。onLoad 方法设置部门属性。有时一个部门是未知的（== null）。

```
@Entity
@Table(name = "PERSON")
public class Person implements Lifecycle {

   @Column(name = "NAME", length = 128, columnDefinition = "VARCHAR2(128)")
   String name;

   @Transient
   Department department;

   public void onLoad(Session s, Serializable id) {
      // some logic resolving department
   }
} 
```

有没有办法使部门属性成为虚拟列（或类似的东西） - 从未在数据库中创建。

```
@Entity
@Table(name = "PERSON")
public class Person {

   @Column(name = "NAME", length = 128, columnDefinition = "VARCHAR2(128)")
   String name;

   @Type(type = "DepartmentType") // UserType for resolving a department
   //@Transcient
   //@Column(insertable = false, updatable = false)
   //@NotFound(action = NotFoundAction.IGNORE)
   // ... don't have a clue
   Department department;
} 
```

我想有能力使用标准。

```
Criteria criteria = session.createCriteria(Person.class);
criteria.add(Restrictions.isNotNull("department"));
List<Person> list = criteria.list(); 
```

我了解 Criteria 在找到部门之前执行，因此无法解决属性“部门”。

我已经看到我可以从 UserType 的 nullSafeGet 中删除一行

```
public Object nullSafeGet(ResultSet rs, String[] names, SessionImplementor session, Object owner) throws HibernateException, SQLException {
   rs.deleteRow();
} 
```

但我不想从数据库中删除该行（它是只读的！）。

总结一下我的问题是：

1）是否可以创建一个虚拟列？

2）有没有更有效的方法来做到这一点？

```
Criteria criteria = session.createCriteria(Person.class);
// ... some restrictions ...
List<Person> list = criteria.list();
Iterator<EbamLogMessageEntity> it = list.iterator();
while(it.hasNext()) {
    Person p = it.next();
    Department d = resolveDepartment(p)
    if(d == null) {
    it.remove();
} else {
        p.setDepartment(d);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:04:01.660

如果您可以使用`@Formula`注释将虚拟列的内容表示为 SQL 公式，这是可能的。有关更多详细信息，请参阅[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e6481)。如果虚拟列是虚拟连接列，也可以使用[`@JoinFormula`注解](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/annotations/JoinFormula.html)。

# php - 在文本框中自动生成值

> ID：11645056
> 
> 赞同：-1
> 
> 时间：2012-07-25T07:52:33.170
> 
> 标签：php, javascript, jquery, html

我有一个名为 number 的文本框，我希望自动生成这些值。

```
<label>Number</</label>
<input id="numb" name="number" type="text"/> 
```

此处文本框中的字段值必须自动生成。比如1、2等等。

我有一个文本框，其中的值必须从 1 开始自动填充，单击保存按钮时，新值应填充到文本框中，依此类推。

如何填写这些值？

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:04:38.560

您可以使用[jQuery 文本功能](http://api.jquery.com/text/)！在给定时间填充文本框，您可以使用**setInterval**定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:34:41.727

```
<html>
<head>
<title></title>
</head>
<script type="text/javascript">
var t, max, i;
function Increase(amount) {
max = amount;
i = parseInt(document.getElementById("count").value);
t = setInterval("SetIncrease()", 1000);
}
function SetIncrease() {
document.getElementById("count").value = ++i;
if(i == max) {
clearTimeout(t);
}
}
</script>
<body onLoad="Increase(36);">
<input id="count" type="text" value="1"  >
</body>
</html> 
```

**如果不需要最大限制，您可以删除该条件**

# zend-framework - 在 Zend 中定义角色的最佳选项（ACL 除外）

> ID：11645058
> 
> 赞同：0
> 
> 时间：2012-07-25T07:52:41.097
> 
> 标签：zend-framework

> 除了acl之外，还有其他方法可以在zend中定义角色吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:56:32.660

终于得到了解决方案。用 ACl 和一半自己的代码来实现这个概念。宾果游戏

# c# - 使用“where”：无法将 lambda 表达式转换为“bool”类型

> ID：11645059
> 
> 赞同：2
> 
> 时间：2012-07-25T07:52:41.267
> 
> 标签：c#, .net, linq

我有如下所示的实体框架代码。在 where 条件下出现以下错误。

> 无法将 lambda 表达式转换为类型“bool”，因为它不是委托类型

如何克服这个错误？这个错误的原因是什么？

```
 static void Main(string[] args)
    {

        ClubCreation();
        List<Club> selectedClubs = GetClubs("club1");

    }

    public static void ClubCreation()
    {

        string connectionstring = "Data Source=.;Initial Catalog=NerdDinners;Integrated Security=True;Connect Timeout=30";
        using (var db = new NerdDinners(connectionstring))
        {

            Club club1 = new Club();
            club1.ClubName = "club1";

            Club club2 = new Club();
            club2.ClubName = "club2";

            Club club3 = new Club();
            club3.ClubName = "club3";

            db.Clubs.Add(club1);
            db.Clubs.Add(club2);
            db.Clubs.Add(club3);

            int recordsAffected = db.SaveChanges();

        }
    }

    public static List<Club> GetClubs(string clubName)
    {
        string connectionstring = "Data Source=.;Initial Catalog=NerdDinners;Integrated Security=True;Connect Timeout=30";
        using (var db = new NerdDinners(connectionstring))
        {

            Club club1 = new Club();
            Club club2 = new Club();
            Club club3 = new Club();

            var query = from o in db.Clubs
                        where (p => p.ClubName == "club1")
                        select o;

            return query.ToList();

        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T07:54:01.737

而不是`where (p => p.ClubName == "club1")`使用：

```
var query = from o in db.Clubs
            where  o.ClubName == "club1"
            select o; 
```

可能你对方法链感到困惑：

```
var query = db.Clubs.Where(p => p.ClubName == "club1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T07:55:55.603

该`=>`语法用于方法链表示法。您可能还想使用`clubName`变量而不是`"club1"`.

```
var query = db.Clubs.Where (p => p.ClubName == clubName); 
```

这与此相同（这是您查询的正确语法）：

```
var query = from o in db.Clubs
            where o.ClubName == clubName
            select o; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T07:54:17.567

```
 var query = from o in db.Clubs
                    where o.ClubName == "club1"
                    select o; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-21T10:46:25.287

在我尝试的时候在 asp mvc Razor 中：

```
@if (modelItem => item.Id == 1)
 {

<span class="badge progressbar-success">Approved</span> 

 } 
```

> 无法将 lambda 表达式转换为类型“bool”，因为它不是委托类型

**解决方案：**

```
@if (Model.FirstOrDefault().Id == 1)
{

<span class="badge progress-bar-success">Approved</span>

} 
```

希望能帮助某人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T07:55:17.303

```
var query = from o in db.Clubs
            where o.ClubName == "club1"
            select o; 
```

# html - Jquery mobile 仅在 DOM 中加载第一页，而不使用 page hide() show() 加载其他页面的 css

> ID：11645064
> 
> 赞同：2
> 
> 时间：2012-07-25T07:53:00.360
> 
> 标签：html, jquery-mobile

Jquery mobile 仅加载 DOM 中的第一页我正在通过 hide() 和 show() 实现页面导航，但现在我正在使用 google map 和 navbar 之类的 jquery 对象，现在它停止工作并且在我的代码中不显示第 3 页，直到我放第 3 页位于页面顶部，但第 1 页停止显示带有正确 jquery css 的 jquery 导航栏。目前我正在开发 html5、jquery mobile、phonegap、android 模拟器。HTML 代码

```
<div data-role="page" id="page1">
        <div data-role="header"  class="pageheader" style="float:left;">
        <div class="back"><a href="#" class="backhomelink">Back</a></div>
        </div>
        <div data-role="fieldcontain" style="width:100%;float:left;"><input type="search" name="password" id="search" value="" data-theme="c" /></div>

        <div data-role="content" style="width:100%; float:left; padding:0;">
        <div data-role="navbar" style="width:100%; float:left;">
        <ul >
        <li><a href="#" data-href="list-tab"class="ui-btn-active" >Main</a></li>
        <li><a href="#" data-href="map-tab" >Map</a></li>
        </ul>
        </div><!-- /navbar -->
        <div id="list-tab" class="content_div listing" >
        <ul id="tab-List" >
        <li class="lilogin first" > LINK 1  </li>
        <li class="lilogin second" > LINK 2  </li>
        <li class="lilogin third" > LINK 3  </li>
        </ul>

        </ul>
        </div>
        <div id="map-tab" class="content_div"><div id="map-container"><div id="map_canvas" ></div></div></div>
        </div>
        </div>

        <div id="page2" data-role="page">
        <div data-role="header" class="pageheader" >
        <div class="logo"><a href="#" ><img src="images/logo.png" alt="logo" /></a></div>
        </div>  

        <div class="main">
        <fieldset>

        <ul>
        <li class="lilogin first" > LINK 1  </li>
        <li class="lilogin second" > LINK 2  </li>
        <li class="lilogin third" > LINK 3  </li>
        </ul>
        </fieldset>
        </div><!-- main -->
        </section><!-- wrapper -->
        </div>

        <div data-role="page" id="page3">
        <div data-role="header"  class="pageheader" style="float:left;">
        <div class="back"><a href="#" class="backhomelink">Back</a></div>
        </div>

        <div data-role="fieldcontain" style="width:100%;float:left;">
        <input type="search" id="newsearch" value="" data-theme="c" />
        </div>

        <div data-role="content" style="width:100%; float:left; padding:0;">
        <div data-role="navbar" style="width:100%; float:left;">
        <ul >
        <li><a href="#" data-href="list-tab"class="ui-btn-active" >Main</a></li>
        <li><a href="#" data-href="map-tab" >Map</a></li>
        </ul>
        </div><!-- /navbar -->
        <div id="new-list-tab" class="content_div listing" >
        <ul id="new-tab-List" >
        <li class="lilogin first" > LINK 1  </li>
        <li class="lilogin second" > LINK 2  </li>
        <li class="lilogin third" > LINK 3  </li>
        </ul>

        </ul>
        </div>

        <div id="new-map-tab" class="content_div"><div id="map-container"><div id="new-map_canvas" ></div></div></div>
        </div>
        </div>

Javascript Code

        $(document).ready(function() {
        var map;
        hide();
        $('#page1').show();
        $('.ui-loader').hide();

        function hide(){
        $('#page1').hide(); 
        $('#page2').hide();
        $('#page3').hide();
        }

        $(document).delegate('[data-role="navbar"] a', 'click', function () {
        $(this).addClass('ui-btn-active');
        $('.content_div').hide();
        $('#' + $(this).attr('data-href')).show();
        google.maps.event.trigger(map, 'resize');
        });

        $('#first').click(function() {
        hide();
        $('#page1').show();
        LoadMap("map_canvas");
        return false;
        });

        $('#second').click(function() {
        hide();
        $('#page2').show();
        return false;
        });

        $('#third').click(function() {
        hide();
        $('#page3').show();
        LoadMap("new-map_canvas");
        return false;
        });

        function LoadMap(divcanvas) {

        var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
        var myOptions = {
        center: myLatlng,
        zoom:10,
        mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById(divcanvas),
        myOptions);

        }

        }); 
```

我什至尝试使用触发器，但我认为我不知道在这种情况下它们将如何实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:23:32.560

首先，您的 HTML 结构无效，需要修复。请参阅[此页面](http://jquerymobile.com/demos/1.1.1/docs/pages/multipage-template.html)以了解如何`page`在单个 HTML 文档中定义多个 JQM。

使用 JQM，您无需显式显示/隐藏页面。JQM 为您处理。您可以使用[本页](http://jquerymobile.com/demos/1.1.1/docs/pages/page-links.html)中描述的链接链接到您`page`的 s 。`<a>`

最后，为学习如何 JQM 可以提供你的自定义 JS；阅读[此帮助页面](http://jquerymobile.com/demos/1.1.1/docs/pages/page-scripting.html)。

# log4net - 带有日期时间戳的文件名

> ID：11645065
> 
> 赞同：1
> 
> 时间：2012-07-25T07:53:02.327
> 
> 标签：log4net

我有以下 RollingFileAppender 配置：

```
 <appender name="appender.VTBGPRS" type="log4net.Appender.RollingFileAppender">
    <rollingStyle value="Size" />
    <file value="mylog" />
    <staticLogFileName value="false" />
    <appendToFile value="true" />
    <maximumFileSize value="100KB" />
    <maxSizeRollBackups value="20" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%date [%thread] %logger{1} - %message%newline" />
    </layout>
  </appender> 
```

我有名为 mylog、mylog.1、mylog.2 等的文件。
我想在文件名中添加日期时间戳。例如 mylog-2012-07。

我不能使用 datePattern，因为 rollingStyle 设置为 Size。

如何在文件名中添加日期时间戳？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-24T04:30:55.323

你可以使用`rollingStyle`as `Composite`。它将根据大小和日期拆分日志。

```
 <appender name="appender.VTBGPRS" type="log4net.Appender.RollingFileAppender">
    <rollingStyle value="Composite" />
    <datePattern value="-yyyyMMdd'.txt'" />
    <file value="mylog" />
    <appendToFile value="true" />
    <maximumFileSize value="100KB" />
    <maxSizeRollBackups value="20" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%date [%thread] %logger{1} - %message%newline" />
    </layout>
  </appender> 
```

这将生成日志为：`myLog.1, mylog.2, ...` **在当天**，它们将`myLog-20141024.txt.1, myLog-20141024.txt.2, ...` **在一天结束时**更改为。您可以通过将系统日期更改为未来来尝试查看此日志滚动机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:19:46.380

如果您可以在运行时更改内容，则可以使用以下内容：

```
<file type="log4net.Util.PatternString" value="%property{FileName}" /> 
```

在代码中：

```
log4net.GlobalContext.Properties["FileName"] = somethingWithADateInIt; 
```

并使用与您的语言相关的任何内容格式化 somethingWithADateInIt 字符串。

# java - eclipse 错误 - org/eclipse/ui/internal/util/SWTResourceUtil

> ID：11645070
> 
> 赞同：0
> 
> 时间：2012-07-25T07:53:33.737
> 
> 标签：java, eclipse, hibernate, jakarta-ee, eclipse-plugin

在创建 hibernat 的 reveng 文件时出现此错误。

```
An error has occurred. See error log for more details.
org/eclipse/ui/internal/util/SWTResourceUtil 
```

如果有人对此有想法，请指导我？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:06:43.603

在将 Eclipse Juno 与 JBoss Tools 一起使用时，我在 Eclipse 上看到了类似的问题（Juno 的夜间构建和 Indigo 的稳定构建）。我的解决方案是使用 Eclipse Indigo 和稳定的 JBoss Tools for Indigo。

由于 JBoss Tools 包含一些 Hibernate 插件，这也可能是您的问题的原因。

# sugarcrm - 有没有办法在 Sugar Pro 6 的自定义模块的编辑视图中添加隐藏字段

> ID：11645075
> 
> 赞同：0
> 
> 时间：2012-07-25T07:54:05.040
> 
> 标签：sugarcrm, hidden-field, editview

有没有办法在 Sugar Pro 6 的自定义模块的编辑视图中添加隐藏字段，然后为该字段分配一个值，并通过 REQUEST 变量例如 $_REQUEST[' 在 before_save 逻辑挂钩中使用该值隐藏字段名']。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:11:52.323

您可以像这样使用 editviewdefs 元数据中的“隐藏”条目：

```
 $viewdefs ['ModuleName'] =
array (
  'EditView' =>
  array (
    'templateMeta' =>
    array (
      'maxColumns' => '2',
      'form' =>
      array (
        'hidden' =>
        array (
          0 => '<input type="hidden" name="MyFiedlName" id="MyFiedlName" value="MyFieldValue">',
        ),
        'buttons' =>
        array ( 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-29T01:44:20.883

在你的输入项定义上试试这个： value="{$smarty.request.MyFiedlName}"

# c# - 无法使用反射获取泛型类型的属性

> ID：11645080
> 
> 赞同：1
> 
> 时间：2012-07-25T07:54:19.740
> 
> 标签：c#, .net, reflection

我在这里只是简单地提出这个问题，所以这个例子对现实世界没有任何意义。

```
public class BusinessEntity<T>
{
    public int Id {get; set;}
}

public class Customer : BusinessEntity<Customer>
{

    public string FirstName { get; set;}
    public string LastName { get; set;}
} 
```

当我尝试通过反射获取客户类属性时，我无法获取通用基类的属性。如何从 BusinessEntity 获取 ID？

```
Type type = typeof(Customer);

PropertyInfo[] properties = type.GetProperties(); 
// Just FirstName and LastName listed here. I also need Id here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T07:58:59.240

不，这肯定会返回所有 3 个属性。在你的*真实*代码中检查是否`Id`是`internal`// `protected`etc（即非公开）。如果是，则需要传入`BindingFlags`，例如：

```
PropertyInfo[] properties = type.GetProperties(
    BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance); 
```

（默认为公共+实例+静态）

还要检查它是否不是您实际代码中的**字段**；如果是：

```
public int Id; 
```

那么它是一个字段，你应该~~使用`GetFields`~~ ***make`Id`一个属性***；p

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:00:41.933

为了获得基本属性，您必须使用 Type 的 BaseType 属性

```
PropertyInfo[] baseProperties = typeof(Customer).BaseType.GetProperties(BindingFlags.DeclaredOnly);
PropertyInfo[] properties = typeof(Customer).GetProperties(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T08:01:40.637

有什么问题，您的代码非常好并且返回正确的属性

```
Type type = typeof(Customer);
PropertyInfo[] properties = type.GetProperties(); 
foreach(var prop in properties)
{ Console.WriteLine(prop) } 
```

结果

```
System.String FirstName 
System.String LastName 
Int32 Id 
```

# javascript - 如何使用 jQuery 构建简单的选项卡？

> ID：11645081
> 
> 赞同：22
> 
> 时间：2012-07-25T07:54:20.367
> 
> 标签：javascript, jquery, html, css, tabs

我有以下代码：[**小提琴**](http://jsfiddle.net/AJBweb1986/vRqcb/6/)

这在我创建自己的网站中效果很好，并且没有 JS，标签充当相关部分的跳转链接。当放置在定制的 CMS 中时，我现在被迫使用跳转链接不起作用。我已经尝试向选项卡添加更多相对链接，这使得它可以在没有 JS 的情况下工作，但使用 JS 选项卡式内容不会显示。

我错过了什么吗？

**html:**

```
<ul id="tabs">

      <li><a href="#tab1">test1</a></li>
      <li><a href="#tab2">test2</a></li>
      <li><a href="#tab3">test3</a></li>
      <li><a href="#tab4">test4</a></li>

</ul>
      <div class="container" id="tab1">Some content</div>
      <div class="container" id="tab2">Some content</div>
      <div class="container" id="tab3">Some content</div>
      <div class="container" id="tab4">Some content</div> 
```

**jQuery：**

```
$('#tabs li a:not(:first)').addClass('inactive');
$('.container').hide();
$('.container:first').show();
$('#tabs li a').click(function(){
    var t = $(this).attr('href');
    $('#tabs li a').addClass('inactive');        
    $(this).removeClass('inactive');
    $('.container').hide();
    $(t).fadeIn('slow');
    return false;
})

if($(this).hasClass('inactive')){ //this is the start of our condition 
    $('#tabs li a').addClass('inactive');         
    $(this).removeClass('inactive');
    $('.container').hide();
    $(t).fadeIn('slow');    
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-25T08:00:27.350

我猜您的网站在使用 href 方面存在问题，我认为当用户单击 href 时，网站会自动清除自身。

[这是新解决方案的 jsFiddle。](http://jsfiddle.net/vRqcb/11/)

我有一个新的解决方案给你：

更新的jQuery：

```
$('#tabs li a').click(function(){
  var t = $(this).attr('id');

  if($(this).hasClass('inactive')){ //this is the start of our condition 
    $('#tabs li a').addClass('inactive');           
    $(this).removeClass('inactive');

    $('.container').hide();
    $('#'+ t + 'C').fadeIn('slow');
 }
}); 
```

* * *

新的 html 标记：

```
<ul id="tabs">

      <li><a id="tab1">test1</a></li>
      <li><a id="tab2">test2</a></li>
      <li><a id="tab3">test3</a></li>
      <li><a id="tab4">test4</a></li>

</ul>
<div class="container" id="tab1C">1Some content</div>
<div class="container" id="tab2C">2Some content</div>
<div class="container" id="tab3C">3Some content</div>
<div class="container" id="tab4C">4Some content</div> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-07T18:17:07.013

```
$(document).ready(function() {
$("#content div").hide(); // Initially hide all content
$("#tabs li:first").attr("id","current"); // Activate first tab
$("#content div:first").fadeIn(); // Show first tab content
$('#tabs li a').click(function(e) {
    e.preventDefault();
    if ($(this).attr("id") == "current"){ //detection for current tab
     return       
    }
    else{             
    $("#content div").hide(); //Hide all content
    $("#tabs li").attr("id",""); //Reset id's
    $(this).parent().attr("id","current"); // Activate this
    $( $(this).attr('href')).fadeIn(); // Show content for current tab
    }
}); 
```

});

见演示：http: [//jsfiddle.net/pradeepk00786/5ezT3/](http://jsfiddle.net/pradeepk00786/5ezT3/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-13T02:53:04.297

**解决方案 JSFiddle::** [https://jsfiddle.net/incorelabs/mg6e4ren/74/](https://jsfiddle.net/incorelabs/mg6e4ren/74/)

实现选项卡非常简单，我针对您的问题稍微修改了 HTML。删除了锚标签，因为它们不需要。

> HTML

```
<ul>
    <li class="tab-switcher" data-tab-index="0" tabindex="0">
        Tab 1
    </li>
    <li class="tab-switcher" data-tab-index="1" tabindex="0">
        Tab 2
    </li>
    <li class="tab-switcher" data-tab-index="2" tabindex="0">
        Tab 3
    </li>
    <li class="tab-switcher" data-tab-index="3" tabindex="0">
        Tab 4
    </li>
</ul>
<div id="allTabsContainer">
    <div class="tab-container" data-tab-index="0">
        Some content for Tab - 1
    </div>
    <div class="tab-container" data-tab-index="1" style="display:none;">
        Some content for Tab - 2
    </div>
    <div class="tab-container" data-tab-index="2" style="display:none;">
        Some content for Tab - 3
    </div>
    <div class="tab-container" data-tab-index="3" style="display:none;">
        Some content for Tab - 4
    </div>
</div> 
```

> HTML 揭秘

1.  将“tab-switcher”类添加到每个“li”元素以及 tabindex="0" 以使其可访问。
2.  给每个“li”一个“data-tab-index”属性。
3.  将“选项卡容器”类添加到每个选项卡式容器。还为每个容器提供一个“data-tab-index”属性，该属性对应于“li”元素上的“data-tab-index”属性。
4.  仅显示您希望可见的容器，使用“display:none”隐藏其他容器。
5.  为选项卡式容器的所有内容提供一个父容器。在此示例中，这是“allTabsContainer” div。

> jQuery

```
$(document).ready(function () {
    var previousActiveTabIndex = 0;

    $(".tab-switcher").on('click keypress', function (event) {
        // event.which === 13 means the "Enter" key is pressed

        if ((event.type === "keypress" && event.which === 13) || event.type === "click") {

            var tabClicked = $(this).data("tab-index");

            if(tabClicked != previousActiveTabIndex) {
                $("#allTabsContainer .tab-container").each(function () {
                    if($(this).data("tab-index") == tabClicked) {
                        $(".tab-container").hide();
                        $(this).show();
                        previousActiveTabIndex = $(this).data("tab-index");
                        return;
                    }
                });
            }
        }
    });
}); 
```

> jQuery 揭秘

1.  “tab-switcher”上的点击和按键监听器在“document.ready”上初始化。（注：按键只注册“Enter”键）
2.  变量“previousActiveTabIndex”跟踪前一个活动选项卡，因此如果我们一次又一次地按下同一个选项卡，它可以被忽略。
3.  我们在“标签容器”上运行一个 EACH 循环。这样做是为了知道应该显示哪个选项卡。如果每个匹配的“data-tab-index”数据属性，我们将显示该选项卡。
4.  我们保留保存在“previousActiveTabIndex”中的“data-tab-index”的值，这有助于我们跟踪上一个被单击的选项卡。

**如果有疑问或有人有建议，请在帖子上发表评论。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-20T10:22:24.957

包括jquery：

```
https://code.jquery.com/jquery-3.1.1.min.js 
```

HTML：

```
<br>
<div align="center" >
  <button data-toggle="tab" data-tabs=".gtabs.demo" data-tab=".tab-1" class="btn btn-info" >Tab 1</button>
  <button data-toggle="tab" data-tabs=".gtabs.demo" data-tab=".tab-2" class="btn btn-info" >Tab 2</button>
  <button data-toggle="tab" data-tabs=".gtabs.demo" data-tab=".tab-3" class="btn btn-info" >Tab 3</button>
</div>
<br />
<div class="gtabs demo" >
  <div class="gtab active tab-1">
    <h1>Gtab 1</h1>
  <button data-toggle="tab" data-tabs=".gtabs.demo" data-tab=".tab-2" class="ui button" >Tab 2</button>
  </div>

  <div class="gtab tab-2">
    <h1>Gtab 2</h1>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nisi minima fugit, est facere molestiae quod pariatur. Consectetur natus, blanditiis laborum possimus doloremque harum adipiscelit. Nisi minima fugit, est facere molestiae quod pariatur. Consectetur natus, blanditiis laborum possimus doloremque harum adipisci debitis similique, nostrum provident ut dolelit. Nisi minima fugit, est facere molestiae quod pariatur. Consectetur natus, blanditiis laborum possimus doloremque harum adipisci debitis similique, nostrum provident ut dolelit. Nisi minima fugit, est facere molestiae quod pariatur. Consectetur natus, blanditiis laborum possimus doloremque harum adipisci debitis similique, nostrum provident ut doli debitis similique, nostrum provident ut dolore.
    </p>
  </div>

  <div class="gtab tab-3">
    <h1>Gtab 3</h1>
  </div>
</div>
<p>
  Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nisi consequatur qui nostrum deleniti, quaerat. Voluptate quisquam nulla, sit error, quas mollitia sint veniam at rem corporis dolore, eaque sapiente qui.
</p> 
```

CSS：

```
.gtabs {
  position: relative;
  .gtab {
    background: #eee;
    position: absolute;
    width: 100%;
    opacity: 0;
    visibility: hidden;
    padding: 10px;
    top: 5px;
    transition: all 0.4s;
    &.active {
      opacity: 1;
      visibility: visible;
      top: 0;
      transition: all 0.4s;
    }
  }
} 
```

JS：

```
$("[data-toggle='tab']").click(function () {
  var tabs = $(this).attr('data-tabs');
  var tab = $(this).attr("data-tab");
  $(tabs).find(".gtab").removeClass("active");
  $(tabs).find(tab).addClass("active");
}); 
```

演示：[http ://codepen.io/iksdatoo/pen/NjOZrm](http://codepen.io/iksdatoo/pen/NjOZrm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-02T11:30:06.867

```
 <script>
 $('.tabheading li').click(function () {
        var tabid = $(this).attr("rel");
        $(this).parents('.tabcontainer').find('.active').removeClass('active');
        $('.tabbody').hide();
        $('#' + tabid).show();
        $(this).addClass('active');

        return false;
    });
</script> 
```

点击[这里](http://waybloggy.blogspot.com/2014/09/how-to-make-simple-javascript-tab-with.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-21T15:23:45.207

**具有**自动播放功能的****响应式标签**。这些不需要任何插件**

 ****[演示链接](https://freakyjolly.com/demo/jquery/custom-responsive-tabs/verticle-tabs-auto-slider-jquery.html)**

**[来源链接](https://www.freakyjolly.com/responsive-tabs-in-jquery-without-any-plugin/)**

[![在此处输入图像描述](../Images/1630f09ab1b004a8e7706a0fc6253e5a.png)](https://i.stack.imgur.com/5WJAd.png) [![在此处输入图像描述](../Images/ed3efdfd7c5c3983246785fe60f78bef.png)](https://i.stack.imgur.com/V4wfu.png)

**HTML**

```
 <div class="row responsive-tab-wrapper">
        <div class="col-md-3 tab-items-list">
            <ul class="resp-tabs-list">
                <li class="resp-tab-item">TAB 1</li>
                <li class="resp-tab-item">TAB 2</li>
                <li class="resp-tab-item">TAB 3</li>
            </ul>
        </div>
        <div class="col-md-9 resp-tabs-container">
            <div class="resp-tabs-container-item">
                <div class="prod-tab-content">
                    <h4>TAB 1 TITLE</h4>
                    <p>
                        TAB 1 CONTENT
                    </p>

                </div>
            </div>
            <div class="resp-tabs-container-item">
                <div class="prod-tab-content">
                    <h4>TAB 2 TITLE</h4>
                    <p>
                        TAB 2 CONTENT
                    </p>
                </div></div>
            <div class="resp-tabs-container-item">
                <div class="prod-tab-content">
                    <h4>TAB 3 TITLE</h4>
                    <p>
                        TAB 3 CONTENT
                    </p>
                </div>
            </div>
        </div>
    </div> 
```

**CSS**

```
 .responsive-tab-wrapper{
        -webkit-box-shadow: 0px 3px 25px -5px rgba(0,0,0,0.75);
        -moz-box-shadow: 0px 3px 25px -5px rgba(0,0,0,0.75);
        box-shadow: 0px 3px 25px -5px rgba(0,0,0,0.75);
        margin-top: 50px;
        padding: 15px
    }
    .resp-tabs-container{
        padding: 30px;

    }    
    .resp-tabs-list {
        padding: 0;
    }

    .resp-tabs-list i {
        margin-right: 15px;
        font-size: 24px;
    }

    .resp-tabs-list li {
        cursor: pointer;
        border-bottom: solid 1px #e4eae1;
        line-height: 55px;
        padding-left: 15px;
        font-weight: 300;
        font-size: 18px;
        /* transition: all 0.5s ease; */
        -webkit-transition: all 0.5s ease;
        -moz-transition: all 0.5s ease;
        -o-transition: all 0.5s ease;
        font-family: 'Hammersmith One', sans-serif;
        text-transform: uppercase;
        border-left: solid 2px #fff;
        list-style: none;
        white-space: nowrap; 
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .resp-tabs-list li:hover,
    .resp-tabs-list li.resp-tab-active,
    h3.resp-accordion:hover {
        background-color: #ffffff;
        /* border-bottom: 1px solid #BFE1B1; */
        border-left: solid 2px #3bc500;

    }

    h3.resp-tab-active,
    h3.resp-tab-active:hover {
        border-bottom: 1px solid #e7edee;
    }

    h3.resp-accordion {
        cursor: pointer;
        font-size: 18px;
        display: none;
        font-weight: 300;
        border-bottom: 1px solid #e7edee;
        margin: 0;
        line-height: 66px;
        transition: all 0.7s ease;
        -webkit-transition: all 0.7s ease;
        -moz-transition: all 0.7s ease;
        -o-transition: all 0.7s ease;
    }

    h3.resp-accordion:hover {}

    .resp-tab-content {
        display: none;
    }

    .resp-content-active,
    .resp-accordion-active {
        display: block;
    }

    /*-----------Vertical tabs-----------*/
    .resp-arrow {
        width: 0;
        height: 0;
        float: right;
        margin-top: 27px;
        margin-right: 15px;
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 7px solid;
    }

    h3.resp-tab-active span.resp-arrow {
        border: none;
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-bottom: 7px solid;
    }

    /*-----------Accordion styles-----------*/
    h3.resp-tab-active {
        background: #dbfdcc;
        /* !important;*/
        border-color: #d3efc8;
    }

    .resp-easy-accordion h3.resp-accordion {
        display: block;
    }

    .resp-jfit {
        width: 100%;
        margin: 0px;
    }

    .resp-tab-content-active {
        display: block;
        background: #e7edee;
        padding: 0 25px 25px;
    }

    .prod-tab-content img{
        width: 300px;
        float: right;
    }

    /*Here your can change the breakpoint to set the accordion, when screen resolution changed*/
    @media only screen and (max-width: 980px) {
        ul.resp-tabs-list {
            display: none;
        }

        h3.resp-accordion {
            display: block;
            padding-left: 25px;
        }
        .resp-accordion-closed {
            display: none !important;
        }
        .prod-tab-content{
            padding: 10px;
        }
    } 
```

**jQuery**

```
 $(function () {
        var startItemIndex = 0;
        var tabItemContainer = ".resp-tabs-container";
        var tabItemList = $(".resp-tabs-list");
        var tabInterval;
        var tabIntervalTime = 3000; //In milliseconds
        var stopOnHover = true;

        tabItemList.find(".resp-tab-item").each(function(index,val){
            var itemHeading = $(this).html();
            $(tabItemContainer).find(".resp-tabs-container-item").eq(index).before('<h3 class="resp-accordion" data-listindex="'+index+'"><span class="resp-arrow"></span>'+itemHeading+'</h3>');
        });

        $(tabItemContainer).find(".resp-tabs-container-item h3.resp-accordion").on("click", function () {
                var itemIndex = $(this).index();
                changeIndex(itemIndex);
                clearInterval(tabInterval);
                startAutoTab();
            });

        function changeIndex(itemIndex) {
            tabItemList.find(".resp-tab-item").removeClass("resp-tab-active");
            tabItemList.find(".resp-tab-item:eq(" + itemIndex + ")").addClass("resp-tab-active");

            if($(window).width()<980){
                $(tabItemContainer).find(".resp-tabs-container-item").slideUp();
                $(tabItemContainer).find(".resp-tabs-container-item:eq(" + itemIndex + ")").stop().slideDown();
            }else{
                $(tabItemContainer).find(".resp-tabs-container-item").hide();
                $(tabItemContainer).find(".resp-tabs-container-item:eq(" + itemIndex + ")").stop().fadeIn();
            }

            $(tabItemContainer).find("h3.resp-accordion").removeClass("resp-tab-active");
            $(tabItemContainer).find("h3.resp-accordion").eq(itemIndex).addClass("resp-tab-active");

        }
        changeIndex(startItemIndex);
        tabItemList.find(".resp-tab-item").on("click", function () {
            var itemIndex = $(this).index();
            changeIndex(itemIndex);
            clearInterval(tabInterval);
            startAutoTab();
        });

        $(document).find(tabItemContainer).find("h3.resp-accordion").on("click", function () {
            var itemIndex = $(this).attr("data-listindex");
            changeIndex(itemIndex);
            clearInterval(tabInterval);
            startAutoTab();
        });
        function startAutoTab() {
            tabInterval = setInterval(function () {
                var isHovered = false;
                if(stopOnHover)
                isHovered = ($('ul.resp-tabs-list').is(":hover") || $('div.resp-tabs-container').is(":hover"));
                if (!isHovered) {
                    var totalTabs = tabItemList.find(".resp-tab-item").length;
                    if (totalTabs == ($("ul.resp-tabs-list .resp-tab-item.resp-tab-active").index() + 1)) {
                        $(".resp-tab-item").eq(0).trigger("click");
                    } else {
                        $(".resp-tab-item.resp-tab-active").next().trigger("click");
                    }
                }
            }, tabIntervalTime);
        }
        startAutoTab();
    }); 
```**

# embedded - 如何为 ppc 交叉编译 linux

> ID：11645083
> 
> 赞同：0
> 
> 时间：2012-07-25T07:54:25.060
> 
> 标签：embedded

我想为 ppc 交叉编译 LINUX 2.6.26 Kernel

我使用的步骤是

```
1\. make arch=ppc menuconfig
2\. make arch=ppc cross_compile=ppc_74xx- 
```

在执行第二步时我得到

VDSO32 错误。

我无法删除该错误，

实际上我想创建一个板支持配置文件，但我找不到合适的注释。

请任何人在下面帮助我。

1.  为 powerpc 7410 即 MPC7410 编译 linux 内核 2.6
2.  为 MPC7410 板创建板支持
3.  为 powerpc 或 ppc 正确编译 linux 内核。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:15:21.740

我不记得，现在，如果 2.6.26 使用 ppc 或 powerpc，所以我会尝试：

```
make menuconfig ARCH=powerpc CROSS_COMPILE=ppc_xyz- 
```

据我所知，没有教程可以做到这一点。我想每个人都只是边做边学。

[DENX](http://www.denx.de/wiki/ELDK-5/WebHome)提供了一个完整的解决方案，包括工具链、引导加载程序、基本二进制文件、内核和磁盘映像构建工具。我建议先下载他们的软件包并使用它。

他们的邮件列表也是提出更具体问题的好地方。

当我必须为新板添加支持时，我会尝试找到一个使用相同处理器的板，然后复制文件、更改名称、选项和功能。拥有一个已经受支持的开发板会有所帮助，这样您就有了一个已知的良好起点。

# android - 单击另一个应用程序时，我的应用程序会自动销毁吗？

> ID：11645084
> 
> 赞同：0
> 
> 时间：2012-07-25T07:54:28.320
> 
> 标签：android, ondestroy

我的应用程序在我可以选择另一个应用程序的同时运行，我的应用程序被自动销毁。如何避免破坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:00:40.003

没有必要，仅当应用程序完成或操作系统需要资源时才会销毁应用程序。 [此页面](http://developer.android.com/reference/android/app/Activity.html)使用显示活动生命周期的状态图更好地解释它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:05:12.540

您的意思是当您在android中切换应用程序并希望您的应用程序在后台运行时？

android 中的想法是，当您“关闭”您的应用程序时，它实际上并没有关闭，而是移到了后台，并且调用了 onPause()、onStop() 和 onDestroy 函数。这些是您可以用来处理应用程序保持运行方式的回调。有关如何处理 android 活动生命周期的信息，请参见以下链接：

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

使应用程序的一部分在后台运行的一种方法是在活动的单独线程中运行要运行的部分。例如，在我的一个应用程序中，我们有一个蓝牙接收器在我在 onCreate() 函数中启动的 thread() 中运行。然后，当我退出应用程序时，在 onDestroy() 中，我有一个特定的 if 调用列表，当您真的想终止应用程序时会终止线程，否则它会在后台运行。

让应用程序运行的概念以及如何实现它在很大程度上取决于您要完成的具体事情，根据您提供的信息，我真的无法给您一个好的答案。

# ruby - 如何在 Mac OSX Lion 下使用 macrubyc？

> ID：11645086
> 
> 赞同：0
> 
> 时间：2012-07-25T07:54:39.617
> 
> 标签：ruby, gcc, macruby, macrubyc

我想知道你们中是否有人`macrubyc`在Lion上使用过。

我的问题是，这`macrubyc`取决于 gcc 编译器。Lion 发货时没有 gcc。是否可以`macrubyc`与随附的 llvm 编译器一起使用？

是否有其他替代方法可以从我的 ruby​​ 脚本创建二进制文件。看起来，`macruby`不支持编译所有必需的 gem，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:12:57.930

Don't know what exactly is the problem. I'm using the [Mac Ruby Installer](https://github.com/downloads/MacRuby/MacRuby/MacRuby%200.12.zip) which works fine for me on Mountain Lion.

I you need gcc for Lion+ you may use the installer [Kenneth Reitz's custom gcc installer](https://github.com/kennethreitz/osx-gcc-installer/).

# postgresql - PostgreSQL volatile 表达式和子查询

> ID：11645087
> 
> 赞同：5
> 
> 时间：2012-07-25T07:54:42.030
> 
> 标签：postgresql, generate-series

在 Bruce Momjian 的博客文章[通过 SQL 生成随机数据](http://momjian.us/main/blogs/pgblog/2012.html#July_24_2012)中，他使用以下代码生成 5 个随机字符串：

```
SELECT
(
        SELECT string_agg(x, '')
        FROM (
                SELECT chr(ascii('a') + floor(random() * 26)::integer)
                FROM generate_series(1, 40 + b * 0) as f(g)
        ) AS y(x)
) AS result
FROM generate_series(1,5) as a(b);

              result                  
------------------------------------------
 plwfwcgajxdygfissmxqsywcwiqptytjjppgrvgb
 sjaypirhuoynnvqjdgywfsfphuvzqbbilbhakyhf
 ngtabkjfqibwahlicgisijatliuwgbcuiwujgeox
 mqtnyewalettounachwjjzdrvxbbbpzogscexyfi
 dzcstpsvwpefohwkfxmhnlwteyybxejbdltwamsx
(5 rows) 
```

我想知道为什么需要第 6 行的“b * 0”。当我删除它时，结果变为 5 个完全相同的字符串，这意味着 Postgres 缓存了外部选择表达式（结果）！

我找不到表达式缓存在 Postgres 中是如何工作的。根据[文档](http://www.postgresql.org/docs/9.1/static/xfunc-volatility.html)random() 函数被标记为 VOLATILE，所以，我希望任何表达式都依赖于它也是 volatile 的。

Postgres 中的表达式缓存是如何工作的？它在任何地方都有记录吗？为什么 'b*0' 禁用了 random() 没有的缓存？

更新：

为了研究这个问题，我将 'b * 0' 移动到 floor() 调用内部，使其与 random() 处于相同的位置/级别：

```
...
                SELECT chr(ascii('a') + floor(random() * 26 + b * 0)::integer)
                FROM generate_series(1, 40) as s(f)
... 
```

结果仍未缓存；不同的字符串。

更新：显示问题的另一个示例

```
create sequence seq_test;

SELECT (SELECT nextval('seq_test')) FROM generate_series(1,5);

 ?column? 
----------
        1
        1
        1
        1
        1
(5 rows) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T11:09:53.170

好吧，`random()`它本身是易变的，因此你不会得到相同字符的字符串重复到最后。

如果您查看有无查询的计划，`b*0`您将看到：

与`b*0`：

```
 Function Scan on generate_series a  (cost=0.00..37530.00 rows=1000 width=4)
   SubPlan 1
     ->  Aggregate  (cost=37.51..37.52 rows=1 width=32)
           ->  Function Scan on generate_series  (cost=0.01..25.01 rows=1000 width=0) 
```

没有`b*0`：

```
 Function Scan on generate_series a  (cost=37.52..47.52 rows=1000 width=0)
   InitPlan 1 (returns $0)
     ->  Aggregate  (cost=37.50..37.51 rows=1 width=32)
           ->  Function Scan on generate_series  (cost=0.00..25.00 rows=1000 width=0) 
```

如果 PostgreSQL 确定内部聚合不依赖于`a`，则将其评估为 一次`InitPlan`，并且其中表达式的易变性与否无关紧要。通过引入子查询对 的依赖性`a`，即使其成为相关子查询，必须对 的每一行重新进行评估`a`。

# r - 使用先前调用的结果反复重新应用 2 个参数函数

> ID：11645090
> 
> 赞同：1
> 
> 时间：2012-07-25T07:54:53.137
> 
> 标签：r

我想重复应用一个函数，它需要两个参数到一个列表，使用第一次调用的结果和第二次调用的第三个参数等等。

例如，如果列表有 4 个元素，并且给定一个函数 f，我希望结果是`f(f(f(1,2),3),4)`. 有这样的功能吗？

一个例子是有一个数据框列表，它们都应该合并到一个特定的列上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T08:30:20.717

递归调用函数的一种方法是使用`Reduce`. 来自`?Reduce`：

> 'Reduce' 使用二元函数来连续组合给定向量的元素和可能给定的初始值。

您可以从这样的列表中合并几个 data.frame：

```
# some dummy data
a <- list(data.frame(a=1:10, b=rnorm(10)), data.frame(a=1:10, b=rnorm(10)), data.frame(a=1:10, b=rnorm(10)))

Reduce(function(u, v)  cbind(u, v$b) , a)
    a          b        v$b         v$b
1   1 -1.2968741 -0.4186869  0.29888504
2   2 -0.2680551  0.3315939  2.05348116
3   3 -0.5188585  0.5125005  1.95103927
4   4 -0.7447659 -1.2982199  0.80582874
5   5  0.2391337 -0.6818633 -0.75994882
6   6 -0.6391927  0.3584701  1.50356731
7   7  1.0117809 -0.1060888  0.07402643
8   8 -1.8877719 -0.4380313  0.49141877
9   9 -0.7392668  1.1527095  1.40168828
10 10 -1.0318087  0.1889492  1.39867700 
```

# java - 将 Hibernate 与 Postgres 一起使用需要哪些配置设置？

> ID：11645091
> 
> 赞同：-2
> 
> 时间：2012-07-25T07:54:57.480
> 
> 标签：java, hibernate, postgresql

hibernate连接postgresql的配置是什么？

## 代码是

```
import org.hibernate.cfg.Configuration;
public class StudentHibernate {
    public static void main(String[] args) {
        Configuration config = new Configuration();
        config .setProperty("hibernate.dialect","org.hibernate.dialect.PostgreSQL");
        config.setProperty("hibernate.connection.driver_class","");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T07:59:51.030

尝试这个：

```
config .setProperty("hibernate.dialect","org.hibernate.dialect.PostgreSQLDialect");
config.setProperty("hibernate.connection.driver_class"," org.postgresql.Driver"); 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T07:58:51.997

我通常使用这个：

```
hibernate.connection.username=user
hibernate.connection.password=password
hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
hibernate.connection.url=url
hibernate.connection.driver_class=org.postgresql.Driver 
```

# php - 如何将选项的选定值作为参数发送到 PHP 函数

> ID：11645092
> 
> 赞同：0
> 
> 时间：2012-07-25T07:54:56.633
> 
> 标签：php, html, codeigniter

我想将所选索引的值发送到一个函数，其中所有选项值都来自数据库。

```
<select onchange="get_api_key();" name="service">
    <option value="">Select your Service</option>
    <optgroup label="Apple Iphone">
        <option value="53">Apple </option>
        <option value="72">Ipad </option>
        <option value="77">iPhone</option>
        <option value="24">Iphone</option>
    </optgroup>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:59:31.017

更新：您不能在 PHP 函数中使用 javascript 变量。但是，您可以使用 Ajax 将 javascript 变量更改为 PHP 变量，然后将其用于您的目的。

```
<script type="text/javascript">
$(function(){

     var selVal = $('select[name="service"]').val();

     // send selVal as a PHP variable using Ajax
     $.ajax({
         type:'post',
         url:'getvalue.php',
         data:'selVal='+selVal,
         success:function(data){
               //do something if you want to with returned data
         }
     });    

});
</script> 
```

然后在 getvalue.php 页面中，

```
$val = $_POST['selVal'];
// proceed to use $val for whatever purpose you want in this page 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:04:25.827

对于选定的索引，使用 this.selectedIndex 而不是 this.value

见[http://jsfiddle.net/corinnekm/FZY2v/2/](http://jsfiddle.net/corinnekm/FZY2v/2/)

# authentication - 用于从 wso2 IS 中提取特定用户名密码的 ESB 服务

> ID：11645093
> 
> 赞同：2
> 
> 时间：2012-07-25T07:55:04.590
> 
> 标签：authentication, wso2, wso2esb, esb, wso2is

是否可以通过 wso2 ESB 公开 wso2 Identity Server 管理服务？

我想要做的是有一个 ESB 服务，它从身份服务器中提取某个用户名的密码（例如使用管理员凭据）。我知道 wso2 Identity Server 有我可以使用的管理服务，但是我在哪里可以找到这些服务的详细描述以及如何实现这个场景？

任何博客或教程都会很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:47:52.783

[这里](http://blog.facilelogin.com/2008/10/wsas-hiddedn-services.html)有一个描述管理服务的博客条目。

但是，我不希望您能够找回密码。纯文本密码可能不会存储在 WSO2 服务器中，而是存储密码的哈希值 - 请参见[此处](http://wso2.org/forum/thread/11958)

# html - 制作全站点 HTTPS / SSL？2012 年仍然适用哪些性能/SEO 问题和最佳实践？

> ID：11645099
> 
> 赞同：10
> 
> 时间：2012-07-25T07:55:20.327
> 
> 标签：html, performance, forms, ssl, https

**注意：**存在看起来像重复的问题（链接如下），但其中大部分来自几年前。我想得到一个明确而明确的答案，无论哪种方式都可以证明事情。

## 从最佳实践和性能/SEO 的角度来看，让整个网站在 HTTPS 中运行现在不是问题吗？

**更新：我正在寻找更多的信息来源，尤其是。围绕对 SEO 的影响。添加了赏金**

**背景：** 当我们想要引入一些按钮来生成带有表单的灯箱时，对话就出现了，其中包含收集个人信息的表单（其中一些甚至允许用户登录）。这是在构成网站很大一部分的页面上。由于表单需要安全地收集和提交信息，并且表单不在它们自己的页面上，我们可以看到的最简单的方法是使页面本身成为 HTTPS。

我想要的是一个涵盖将长期运行的流行站点切换到 HTTPS 的问题的答案，例如下面列出的那些：

1.  每次请求都会协商握手吗？
2.  所有资产都需要加密吗？
3.  浏览器不会缓存 HTTPS 内容，包括资产吗？
4.  不缓存 HTTPS 内容（包括资产（css、js 等））的下游透明代理是否仍然是个问题？
5.  所有外部资产（跟踪像素、视频等）都需要 HTTPS 版本吗？
6.  HTTPS 和 gzip 在一起可能不开心？
7.  反向链接和有机链接将始终是 HTTP，因此您将一直处于 301 状态，这会影响 SEO / 性能吗？在整个站点范围内更改此对 SEO 的任何其他影响？

一些大玩家采取了始终运行 HTTPS 的举措，请参阅[Always on SSL](https://otalliance.org/resources/AOSSL/index.html)，这是开创先例/最佳实践吗？

**重复/相关问题：**
[强制整个站点使用 HTTPS 的好做法还是坏做法？](https://stackoverflow.com/questions/987239/good-practice-or-bad-practice-to-force-entire-site-to-https)
[跨整个站点使用 SSL 在整个站点上使用 SSL](https://stackoverflow.com/questions/4515283/using-ssl-across-entire-site)
[还是仅在其中一部分上使用？](https://stackoverflow.com/questions/1211638/ssl-on-entire-site-or-just-part-of-it)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-25T08:16:49.347

不确定我是否可以通过参考文献一次性回答所有问题，但这里可以。请酌情编辑：

> 每次请求都必须协商握手吗？

不，SSL 连接通常被重复用于多个连续请求。曾经与 SSL 相关的开销如今已基本消失。计算机也变得更快了。

> 所有资产都需要加密吗？

是的，否则浏览器不会认为整个站点是安全的。

> 浏览器不会缓存 HTTPS 内容，包括资产吗？

我不这么认为，缓存应该可以正常工作。

> 不缓存 HTTPS 内容（包括资产（css、js 等））的下游透明代理是否仍然是个问题？

对于缓存 SSL 加密连接/资产的代理，代理需要解密连接。这在很大程度上否定了 SSL 的优势。所以是的，代理*不会*缓存内容。

代理有可能成为客户端和服务器的 SSL 端点，因此它与每个都有单独的 SSL 会话，并且可以看到正在传输的明文。一个 SSL 连接将在代理和服务器之间，代理和客户端将具有使用代理证书签名的单独 SSL 连接。这要求客户端信任代理的证书并且代理信任服务器证书。这可以在公司环境中以这种方式设置。

> 所有外部资产（跟踪像素、视频等）都需要 HTTPS 版本吗？

是的。

> HTTPS 和 gzip 在一起可能不开心？

在不同级别的协议上，应该没问题。在将 SSL 层放在 TCP 流上之后协商 gzip。对于表现良好的服务器和客户端来说，应该没有问题。

> 反向链接和有机链接将始终是 HTTP，因此您将一直处于 301 状态，这会影响 SEO 吗？

为什么反向链接总是 HTTP？这不一定是给定的。它如何影响 SEO 在很大程度上取决于所讨论的 SE。智能 SE 可以识别出您只是在切换协议，而不是因此而惩罚您。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T12:01:17.753

> 1- 每次请求都会协商握手吗？

这里有两个问题：

*   大多数浏览器不需要在对同一站点的请求之间重新建立新连接，即使使用纯 HTTP 也是如此。HTTP 连接可以保持活动状态，因此，不，您无需在每次 HTTP 请求/响应后关闭连接：您可以将单个连接重新用于多个请求。
*   当需要并行或后续 SSL/TLS 连接时，您还可以避免执行多次握手。谷歌工程师编写的[*ImperialViolet - Overclocking SSL*](http://www.imperialviolet.org/2010/06/25/overclocking-ssl.html) （与此问题绝对相关）中解释了多种技术，特别是会话恢复和错误启动。据我所知，大多数现代浏览器至少支持会话恢复。

    这些技术并没有完全摆脱新的握手，而是降低了它们的成本。除了会话重用之外[，当需要完美的前向保密时，还可以使用 OCSP 装订（检查证书吊销状态）和椭圆曲线密码套件来减少握手期间的密钥交换开销](http://vincent.bernat.im/en/blog/2011-ssl-perfect-forward-secrecy.html)。这些技术也依赖于浏览器的支持。

    仍然会有开销，如果你需要大规模的网络农场，这仍然是一个问题，但现在这样的部署是可能的（一些大公司也这样做），而几年前这被认为是不可想象的.

> 2- 所有资产都需要加密吗？

是的，一如既往。如果您通过 HTTPS 提供页面，则它使用的所有资源（iframe、脚本、样式表、图像、任何 AJAX 请求）都需要使用 HTTPS。这主要是因为无法向用户显示页面的哪些部分可以信任，哪些不可以。

> 3- 浏览器不会缓存 HTTPS 内容，包括资产吗？

是的，他们会的，您可以`Cache-Control: public`明确地使用来服务您的资产，或者假设[浏览器会这样做](https://stackoverflow.com/a/174510/372643)。（实际上，您应该防止对敏感资源进行缓存。）

> 4- 不缓存 HTTPS 内容（包括资产（css、js 等））的下游透明代理是否仍然是个问题？

HTTP 代理服务器只是中继 SSL/TLS 连接而不查看它们。但是，一些 CDN 还提供 HTTPS 访问（[Google Libraries API](https://developers.google.com/speed/libraries/devguide)上的所有链接都可以通过 获得`https://`），结合浏览器内缓存，可以提高性能。

> 5- 所有外部资产（跟踪像素、视频等）都需要 HTTPS 版本吗？

是的，这与第 3 点有关。[YouTube 支持 HTTPS 访问](http://apiblog.youtube.com/2011/02/https-support-for-youtube-embeds.html)这一事实有所帮助。

> 6- HTTPS 和 gzip 可能不在一起？

他们是独立的。HTTPS 是基于 TLS 的 HTTP，gzip 压缩发生在 HTTP 级别。请注意，您可以直接压缩[SSL/TLS 连接](https://stackoverflow.com/a/4203402/372643)，但这[很少使用](http://www.belshe.com/2010/11/18/ssl-compression-and-you/)：如果需要，您也可以在 HTTP 级别使用 gzip 压缩（压缩两次没有什么意义）。

> 7- 反向链接和自然链接将始终是 HTTP，因此您将一直处于 301 状态，这会影响 SEO 吗？

我不确定为什么这些链接应该使用`http://`. 如果这就是您所指的，那么对于 SEO，URL 缩短服务通常是一个问题。我想我们会看到越来越多的[HTTP Strict Transport Security](http://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security)使用，所以`https://`默认情况下会有更多的 URL。

# php - Zend_Cache：在集群中使用哪个缓存后端？

> ID：11645100
> 
> 赞同：1
> 
> 时间：2012-07-25T07:55:25.950
> 
> 标签：php, zend-framework, magento, caching

我们目前在网络服务器集群中使用基于文件的缓存，导致 Magento 在每个网络服务器上都有不同的缓存。因此，自动缓存清除 - 例如，如果您偶然在后端进行配置设置 - 不起作用。

您推荐哪种缓存系统：

*   它应该支持标记
*   网络短工

memcached 的 PHP 模块似乎有问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T08:42:33.687

您可以将 Redis 与 Colin Mollenhour 的新 Zend 缓存适配器一起使用。该适配器支持标记并且可以通过 TCP/IP 访问。

您可以在这里找到该项目：

[https://github.com/colinmollenhour/Cm_Cache_Backend_Redis](https://github.com/colinmollenhour/Cm_Cache_Backend_Redis)

该项目附带一个magento安装教程。

# .net - .NET 是否利用了多核？

> ID：11645101
> 
> 赞同：2
> 
> 时间：2012-07-25T07:55:26.760
> 
> 标签：.net, multithreading, multicore

如果我实现了一个具有不同线程工作的程序，我可以依靠 .Net 框架来负责利用（可能的）多核硬件架构来执行线程吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:01:01.767

操作系统应该管理它并在它认为合适的时候分配线程。

如果您正在使用 .NET 4 并希望利用多核 CPU，您还可以查看[Tasks Parallel Libary](http://msdn.microsoft.com/en-us/library/dd460717.aspx)，它是专门为使并行计算任务更易于实现而创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T07:59:28.790

这是操作系统的责任，是的，在常见情况下它将使用多个内核。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:03:17.937

如果您想利用该架构，您必须使用 .NET Framewrok 4.0 和 Task Parallel Library

*System.Threading* *System.Threading.Tasks*

您必须使用任务而不是线程，因为任务会动态计算是否需要创建不同的执行线程。

看看这个[链接](http://www.codeproject.com/Articles/362996/Multi-core-programming-using-Task-Parallel-Library)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T08:04:23.340

操作系统负责为线程提供执行。该框架是普通 API 调用之上的一层，可以提供额外的多线程功能或更简单的访问。

# asp.net-mvc - 重载asp.net MVC + Web API应用和异步消息总线的设计考虑

> ID：11645102
> 
> 赞同：5
> 
> 时间：2012-07-25T07:55:31.950
> 
> 标签：asp.net-mvc, asynchronous, asp.net-web-api, signalr, message-bus

我计划构建一个相当大的应用程序（在并发用户/请求数量方面很大，而不是在功能方面）。

基本上，我会在某处提供服务，即等待命令执行它们，并在稍后确认完成。在发出确认消息之前，该服务将使用服务总线进行通信，最终执行。

此服务的使用者可以是任何类型的应用程序（WPF、SL、...），但我的主要（也是第一个）客户端将是一个 asp.net MVC 应用程序 + WebApi (.Net 4.5) 或仅 MVC (.Net 4.0) ) 与 ajax 控制器动作。

Web 应用程序将依赖 Ajax 调用来保持用户友好的响应式应用程序。

我对这种成熟的异步架构很陌生，我有一些问题可以避免未来的头痛：

*   我的 web api 调用可能需要一些时间。我应该如何正确设计 api 以支持长时间运行的操作（某种异步？）。我已经阅读了新的 async 关键字，但为了知识，我想了解其背后的内容。
*   我对服务的调用将包括发布消息并等待确认消息。如果我将它包装在一个方法中，我应该如何编写这个方法？我应该“阻止”直到收到确认（我想我不应该）？我应该返回一个 Task 对象并让消费者决定吗？
*   我也想知道 SignalR 是否可以帮助我。使用 signalR，我想我可以使用真正的“即发即弃”命令发出，并路由到客户端以确认消息。
*   我是否完全脱离主题，我应该采取另一种方法吗？

在实现细节/框架方面，我想我会使用：

*   Rabbitmq 作为消息系统
*   Masstransit 抽象消息系统
*   asp.MVC 4 构建 UI
*   Webapi 隔离从 UI 控制器发出的命令，并允许其他类型的客户端发出命令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-24T09:18:27.210

> 我的 web api 调用可能需要一些时间。我应该如何正确设计 api 以支持长时间运行的操作（某种异步？）。我已经阅读了新的 async 关键字，但为了知识，我想了解其背后的内容。

关于异步，我看到在 stackoverflow 上的另一个问题上推荐了这个链接：

[http://msdn.microsoft.com/en-us/library/ee728598(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ee728598(v=vs.100).aspx)

它表示当向 ASP .NET 应用程序发出请求时，会分配一个线程来处理来自有限线程池的请求。

异步控制器操作将线程释放回线程池，以便准备好接受附加请求。在动作中，需要异步执行的操作被分配给回调控制器动作。

异步控制器操作使用 Async 作为后缀命名，回调操作具有 Completed 后缀。

```
public void NewsAsync(string city) {}
public ActionResult NewsCompleted(string[] headlines) {} 
```

关于何时使用异步：

> 通常，当满足以下条件时，使用异步管道：
> 
> *   这些操作是网络绑定或 I/O 绑定的，而不是 CPU 绑定的。
> *   测试表明阻塞操作是站点性能的瓶颈，并且 IIS 可以通过
>     对这些阻塞调用使用异步操作方法来服务更多请求。
> *   并行性比代码的简单性更重要。
> *   您希望提供一种机制，让用户取消长时间运行的请求。

我认为使用带有 Web API 的 ASP .NET MVC 开发您的服务并在需要时使用异步控制器将是开发高可用性 Web 服务的好方法。

使用像 ServiceStack 这样的基于消息的服务框架看起来也不错：

[http://www.servicestack.net/](http://www.servicestack.net/)

其他资源：

[http://msdn.microsoft.com/en-us/magazine/cc163725.aspx](http://msdn.microsoft.com/en-us/magazine/cc163725.aspx) [http://www.codethinked.com/net-40-and-systemthreadingtasks](http://www.codethinked.com/net-40-and-systemthreadingtasks) [http://dotnet.dzone.com/news/net-区域进化](http://dotnet.dzone.com/news/net-zone-evolution) [http://www.aaronstannard.com/post/2011/01/06/asynchonrous-controllers-ASPNET-mvc.aspx](http://www.aaronstannard.com/post/2011/01/06/asynchonrous-controllers-ASPNET-mvc.aspx) [http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-荷兰/2287](http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2287) [http://www.dotnetcurry.com/ShowArticle.aspx?ID=948](http://www.dotnetcurry.com/ShowArticle.aspx?ID=948) // 还显示了性能测试的设置 [http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-方法-in-aspnet-mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4) [http://visualstudiomagazine.com/articles/2013/07/23/async-actions-in-aspnet-mvc-4.aspx](http://visualstudiomagazine.com/articles/2013/07/23/async-actions-in-aspnet-mvc-4.aspx) [http://hanselminutes.com/327/everything-网络程序员知道异步编程是错误的](http://hanselminutes.com/327/everything-net-programmers-know-about-asynchronous-programming-is-wrong) [http://www.hanselman.com/blog/TheMagicOfUsingAsynchronousMethodsInASPNET45PlusAnImportantGotcha.aspx](http://www.hanselman.com/blog/TheMagicOfUsingAsynchronousMethodsInASPNET45PlusAnImportantGotcha.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-25T07:29:18.570

> 我的 web api 调用可能需要一些时间。我应该如何正确设计 api 以支持长时间运行的操作（某种异步？）。

我不是 100% 确定你要去哪里。你问了关于异步的问题，但也提到了消息队列，包括 RabbitMQ 和 MassTransit。消息队列默认是异步的。

您还提到执行命令。如果您指的是 CQRS，则将命令和查询分开。但是我不是 100% 提到的是你在提到“长时间运行的进程”时所指的内容。

*   当您查询数据时，数据应该已经存在。最好以手头问题所需的方式。
*   查询数据时，不应启动长时间运行的进程
*   当您执行命令时，可以启动一个长时间运行的进程。但这就是您应该使用消息队列的原因。指定一个任务来启动长时间运行的进程，为它创建一条消息，把它扔到队列中，完全忘记它。后台的其他一些进程将接收它。
*   执行命令后，可以启动长时间运行的进程。
*   执行命令时，可以使用数据更新数据库
*   如果有人请求数据，API 可以使用此数据

使用此模型时，长时间运行的过程可能需要长达 10 分钟才能完成并不重要。我不会详细说明实际上有一个线程最多需要 10 分钟才能完成，包括数据库锁定，但我希望你明白这一点。将消息扔到队列后，您的 API 几乎会立即免费。那里不需要异步。

> 我对服务的调用将包括发布消息并等待确认消息。

我不明白这个。.NET Framework 和您的排队平台会为您解决这个问题。为什么要等待确认？

在公共交通中

```
Bus.Instance.Publish(new YourMessage{Text = "Hi"}); 
```

在 NServiceBus 中

```
Bus.Publish(new YourMessage{Text = "Hi"}); 
```

> 我也想知道 SignalR 是否可以帮助我。

我应该这么认为！由于消息传递的异步特性，用户必须“等待”更新。如果您可以通过 SignalR 向用户“推送”更新来提供这些数据，那就更好了。

> 我是否完全脱离主题，我应该采取另一种方法吗？

也许，我仍然不确定你要去哪里。也许阅读以下资源。

资源：

[http://www.udidahan.com/2013/04/28/queries-patterns-and-search-food-for-thought/](http://www.udidahan.com/2013/04/28/queries-patterns-and-search-food-for-thought/) [http://www.udidahan.com/2011/10/02/why-you-应该使用 cqrs-almost-everywhere%E2%80%A6/](http://www.udidahan.com/2011/10/02/why-you-should-be-using-cqrs-almost-everywhere%E2%80%A6/) [http://www.udidahan.com/2011/04/22/when-to-avoid-cqrs/](http://www.udidahan.com/2011/04/22/when-to-avoid-cqrs/) [http://www.udidahan。 com/2012/12/10/面向服务的API实现/](http://www.udidahan.com/2012/12/10/service-oriented-api-implementations/)

[http://bloggingabout.net/blogs/dennis/archive/2012/04/25/what-is-messaging.aspx](http://bloggingabout.net/blogs/dennis/archive/2012/04/25/what-is-messaging.aspx) [http://bloggingabout.net/blogs/dennis/archive/2013/07/30/partitioning-data -through-events.aspx](http://bloggingabout.net/blogs/dennis/archive/2013/07/30/partitioning-data-through-events.aspx) [http://bloggingabout.net/blogs/dennis/archive/2013/01/04/databases-and-coupling.aspx](http://bloggingabout.net/blogs/dennis/archive/2013/01/04/databases-and-coupling.aspx)

# sockets - 在完成端口通知的Solaris上取消非阻塞套接字操作的正确方法是什么？

> ID：11645106
> 
> 赞同：2
> 
> 时间：2012-07-25T07:55:46.447
> 
> 标签：sockets, solaris

在 Linux/epoll 和 FreeBSD/kqueue 上，shutdown() 的工作方式如下。

```
shutdown(connection, SHUT_RDWR); 
```

不幸的是，取消 connect() 操作在 Solaris/port 上不起作用。我尝试了 ioctl() 的工作原理。

```
ioctl(connection, I_SETSIG, S_HANGUP); 
```

这是正确的方法吗？

# iphone - ASIHTTPRequest 和 NSTask

> ID：11645108
> 
> 赞同：0
> 
> 时间：2012-07-25T07:55:54.403
> 
> 标签：iphone, asihttprequest, nstask

我正在尝试 ASIHTTPRequest 以使下载文件更容易，但现在我收到有关使用未声明标识符“NSTask”的错误。

我以为 NSTask 只适用于 Mac 而不是 iOS？框架不检查这个吗？

# c# - 发送后将数据保存在表格中

> ID：11645112
> 
> 赞同：0
> 
> 时间：2012-07-25T07:55:59.663
> 
> 标签：c#, asp.net, razor

我有一个表格，您可以在其中输入数据，它会对其进行计算并给出答案。我想要做的是将数据保留在表单中，以便您可以快速重新发布，这样您就不必更改所有数据。但我不能一直想出它不存在的错误，我认为在表格发布之前这是正确的！

```
@{
  var total = 0m;
  var totalMessage = "";

    if (IsPost)
    {
        var age = Request["frmage"].AsInt(0);
        var weight = Request["frmweight"].AsDecimal();
        var SerCre = Request["frmSerCre"].AsDecimal();
        var sexfactor = Request["frmGender"]== "M" ? 1.23m : 1.04m;

        total =Convert.ToDecimal ((((140 - age)*weight)* sexfactor )/SerCre ) ;

        totalMessage =  total.ToString("0.00") + "(ml/min) ";
    }

}
<div class="memberRegistration">
<form method="post">

<p>
    <label class="formLabel">Age:</label> in years
    <input class="formTextField" type="text" name="frmAge" size="3" value="@age"/>
</p>
<p>
    <label class="formLabel">Weight:</label> in Kg (1st = 6.35kg)
    <input class="formTextField" type="text" name="frmWeight" value="@weight"/>
</p>
<p>
    <label class="formLabel">Serum Creatinine:</label> in μmol/L
    <input class="formTextField" type="text" name="frmSerCre" value="@SerCre"/>

</p>
<p>

<label class="fieldLabel">Gender:</label>
    <select name="frmGender" id="select" value="@sexfactor">
        <option value="M">Male</option>
        <option value="F">Female</option>
    </select>

</p>
<p><input type="submit" value="Calculate" /></p>
</form>
<p>Calculated creatinine clearance <b>@totalMessage</b></p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:01:39.840

尝试这个

```
var age = 0;

    if (IsPost)
    {
        age = Request["frmage"].AsInt(0);

    }

<input class="formTextField" type="text" name="frmAge" size="3" value="@age"/> 
```

* * *

但通常最好使用模型来保存您的值，然后在您的控制器中将这些值再次传递回您的表单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:06:03.437

我并不真正理解这个问题，因为默认情况是网页保持其视图状态，因此回发后数据仍然相同，但这是解决方案：

你可以简单地使用 ASP 控件，因为它保持它的视图状态，或者你可以给它们的每个控件它在 C# 中的值，你可以将它的值分配给每个控件

希望我有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:04:37.433

启用页面和控件的 ViewState 并使用 aspx 控件，而不是 HTML。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T08:10:44.450

由于您使用的是 ASP.NET MVC Razor，因此您可以做的是，不要使用 提交表单`<input type="submit" value="Calculate" />`，而是将其更改为一个简单的按钮，例如

```
 <input type="button" value="Calculate" onclick="javascript:Submitform();" /> 
```

并使用 Jquery POST.eg 提交表单，如下所示

```
 function SubmitForm(){
      var formData = $("form").serialize() ;
      var submitUrl = 'yourURL' ;
      $.ajax({
           type : 'POST' , 
           url : submitUrl , 
           data : formData , 
           success : function (data ){ alert ("Request successful") ;}
           error : function (jqXHR, status , errorthrown) { alert ("error Occured");}
        });

   } 
```

# javascript - 在 Trigger.io 移动应用中启用缩放

> ID：11645113
> 
> 赞同：1
> 
> 时间：2012-07-25T07:56:00.483
> 
> 标签：javascript, mobile, jquery-mobile, trigger.io

我们正在使用 Trigger.io 和 Jquery Mobile 1.1.1 开发一个应用程序。我们知道修改了 JM 中的 viewport 元标记以启用或禁用缩放，但在另一个关于 Trigger.io 的 Stack 问题中，他们的一位开发人员提到他们在 webview 级别禁用缩放：[Preventing zoom with trigger.io forge](https://stackoverflow.com/questions/10487884/preventing-zoom-with-trigger-io-forge)

我们想在页面上显示大图像时启用缩放 - 这可以使用触发器框架吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:36:43.587

是的，我们确实禁用了 WebView 中的缩放：如果您在 HTML 中包含一个未缩放的大图像，用户将能够滚动查看完整图像，但捏合将不起作用。

当然，您可以先将图像缩小，然后在用户单击图标时将其放大到全尺寸？[iScroll4 之](http://cubiq.org/iscroll-4)类的库在这里也可能有所帮助。

此外，我们将能够使 WebView 的缩放行为在某种程度上可配置（尽管我们始终默认使其不可缩放）。如果您绝对需要不同的行为，请与 support@trigger.io 联系。

# jquery - 关于使用变量的简单 jQuery 代码

> ID：11645114
> 
> 赞同：0
> 
> 时间：2012-07-25T07:55:59.983
> 
> 标签：jquery

```
$(document).ready(function(){
        $(".role").change(function(){
            var userId=$(this).attr('name');
            return $("form[id=userId]").submit(); 
        });
    }) 
```

在上面的代码中，我已经检查了`'userId'`通过打印它的值来获得一个适当的值`'alert'`。另外，我已经检查过`$("form[id='1']").submit();`没问题。

但是，上面的代码不起作用。我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T07:58:21.470

The string should be concatenated

```
$(document).ready(function(){
    $(".role").change(function(){
        var userId=$(this).attr('name');
        return $("form[id=" + userId + "]").submit(); 
    });
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T07:58:46.053

```
$(document).ready(function(){
        $(".role").change(function(){
            var userId=this.name;
            return $("form[id='"+userId+"']").submit(); 
        });
    }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:00:35.870

用户 id 是一个变量...试试下面的代码

```
$(document).ready(function(){         
$(".role").change(function(){             
var userId=$(this).attr('name'); 
        return $("form[id=" +userId+ "]").submit();
      });    
 }) 
```

# jquery - 捕获jquery点击事件冒泡

> ID：11645120
> 
> 赞同：1
> 
> 时间：2012-07-25T07:56:50.903
> 
> 标签：jquery

我正在处理的网页是一个`candidate-tile`看起来像这样的 s 列表（这实际上是一个`mustache`模板：

```
<div class="candidate-tile">
    <div class="candidate-image">
        <img src="<%= candidate.image %>" width="50px" height=auto />
    </div>
    <div class="details">
        <h3 class="candidate-name"><%= candidate.name %></h3>
        <h6 class="candidate-dept"><%= candidate.dept %></h6>
        <span class="label label-info"><%= candidate.hostel %></span>
    </div>
    <div class="checkbox">
        <span class="check">&#10003;</span>
    </div>
</div> 
```

我想在单击复选框时切换一个类。像这样的东西：

```
$('.checkbox').click(function(){
    $(this).parent().toggleClass("candidate_selected");
}); 
```

但这似乎不起作用。如何捕获`checkbox`并确保可以处理单击事件？

## 更新

`mustache`我刚刚测试了模板中的点击事件存在一些问题。我正在使用`sammy.js`加载模板。在页面的其余部分（已修复且未使用 mustache / sammy 呈现）单击事件工作正常。但由于某种原因，点击事件不适用于 mustache / sammy 渲染的部分。有谁知道发生了什么？我能做些什么来更好地解释这种情况吗？sammy 是在监听事件而不是让 jquery 处理它吗？

## 另一个更新

据我所知，问题是在`candidate-tile`加载包含处理程序的 js 文件时未加载 s `click`。项目稍后加载，但到那时，我猜，所有事件注册都已经发生，因此没有事件绑定到生成的新 DOM 元素。我这样想对吗？如果是，出路是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:00:17.303

您的代码应该可以正常工作。它将`candidate_selected`在`div`with class上切换类`candidate-tile`。尝试将 a`console.log`放入闭包中以查看点击是否触发。

如果您使用 AJAX 动态创建图块，则可能需要使用以下命令：

`$('#container').on('click', '.checkbox', function(){....`

`container`将`div`高于`candidate-tile divs`.

# python - How do I get the URL of the active Google Chrome tab in Windows?

> ID：11645123
> 
> 赞同：12
> 
> 时间：2012-07-25T07:56:55.647
> 
> 标签：python, winapi, google-chrome

How can my Python script get the URL of the currently active Google Chrome tab in Windows? This has to be done without interrupting the user, so sending key strokes to copy/paste is not an option.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-25T07:56:55.647

First, you need to download and install [pywin32](http://sourceforge.net/projects/pywin32/files/). Import these modules in your script:

```
import win32gui
import win32con 
```

If Google Chrome is the currently active window, first get the window handle by:

```
hwnd = win32gui.GetForegroundWindow() 
```

(Otherwise, find the Google Chrome window handle by using [`win32gui.FindWindow`](http://docs.activestate.com/activepython/2.5/pywin32/win32gui__FindWindow_meth.html). [Windows Detective](http://sourceforge.net/projects/windowdetective/) is handy when finding out class names for windows.)

It seems the only way to get the URL is to get the text in the ["omnibox" (address bar)](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95440). This is usually the tab's URL, but could also be any partial URL or search string that the user is currently typing.

Also, the URL in the omnibox won't include the "http://" prefix unless the user has typed it explicitly (and not yet pressed enter), but it will in fact include "https://" or "ftp://" if those protocols are used.

So, we find the omnibox child window inside the current Chrome window:

```
omniboxHwnd = win32gui.FindWindowEx(hwnd, 0, 'Chrome_OmniboxView', None) 
```

This will of course break if the Google Chrome team decides to rename their window classes.

And then we get the "window text" of the omnibox, which doesn't seem to work with [`win32gui.GetWindowText`](http://docs.activestate.com/activepython/2.5/pywin32/win32gui__GetWindowText_meth.html) for me. Good thing there's an alternative that does work:

```
def getWindowText(hwnd):
    buf_size = 1 + win32gui.SendMessage(hwnd, win32con.WM_GETTEXTLENGTH, 0, 0)
    buf = win32gui.PyMakeBuffer(buf_size)
    win32gui.SendMessage(hwnd, win32con.WM_GETTEXT, buf_size, buf)
    return str(buf) 
```

This little function sends the [WM_GETTEXT](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632627%28v=vs.85%29.aspx) message to the window and returns the window text (in this case, the text in the omnibox).

There you go!

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-04T09:06:20.343

克里斯蒂安的回答对我不起作用，因为 Chrome 的内部结构完全改变了，你不能再使用 win32gui 访问 Chrome 窗口的元素了。

我设法找到的唯一可能的方法是通过 UI 自动化 API，它有[这个 python 包装器](https://github.com/yinkaisheng/Python-UIAutomation-for-Windows)和一些使用示例

运行此命令并切换到您要从中获取地址的 Chrome 窗口：

```
from time import sleep
import uiautomation as automation

if __name__ == '__main__':
    sleep(3)
    control = automation.GetFocusedControl()
    controlList = []
    while control:
        controlList.insert(0, control)
        control = control.GetParentControl()
    if len(controlList) == 1:
        control = controlList[0]
    else:
        control = controlList[1]
    address_control = automation.FindControl(control, lambda c, d: isinstance(c, automation.EditControl) and "Address and search bar" in c.Name)
    print address_control.CurrentValue() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-12T22:15:28.447

我对 StackOverFlow 很陌生，所以如果评论格格不入，我深表歉意。

看完之后：

*   硒，
*   直接启动 chrome://History，
*   做一些键盘模拟：用 Pywinauto 复制/粘贴，
*   根据 DevTool 的 Network 选项卡尝试使用 SOCK_RAW 连接来捕获标头（这个非常有趣），
*   试图获取综合/搜索栏窗口元素的文本，
*   关闭并重新打开 chrome 以读取历史记录表，....

当窗口标题（使用 hwnd + win32 检索）从“我的" 网址表。即使 sqlite db 被锁定并且不会干扰用户体验，也可以这样做。

非常基本的解决方案，需要：sqlite3、psutil、win32gui。希望有帮助。

# magento - How to use custom customer variables in transactional email templates in magento?

> ID：11645127
> 
> 赞同：2
> 
> 时间：2012-07-25T07:57:05.963
> 
> 标签：magento

I have added some custom variables to customer and I want to use them in email template.

Here's example how I have added a variable to customer in my installer:

```
$setup->addAttribute('customer', 'companyname', array(
    'input'         => 'text',
    'type'          => 'varchar',
    'label'         => 'Company name',
    'visible'       => 1,
    'required'      => 1,
    'user_defined' => 1,
));

$setup->addAttributeToGroup(
 $entityTypeId,
 $attributeSetId,
 $attributeGroupId,
 'companyname',
 '999'  //sort_order
);

$oAttribute = Mage::getSingleton('eav/config')->getAttribute('customer', 'companyname');
$oAttribute->setData('used_in_forms', array('adminhtml_customer','customer_account_create'));
$oAttribute->save(); 
```

I try to use this variable in email template:

```
{{var order.getCustomer().getCompanyname()}} 
```

But it's not showing. How to make it work?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:22:34.597

我用如下代码完成了类似的任务：

```
$setup->addAttribute('customer', 'attr_name', array(
    'type'      => 'int',
    'input'     => 'select',
    'label'     => 'Attr label',
    'global'    => 1,
    'visible'   => 1,
    'required'  => 1,
    'default'   => '0',
    'user_defined'      => 1,
    'visible_on_front'  => 1,
));
if (version_compare(Mage::getVersion(), '1.6.0', '<='))
{
      $customer = Mage::getModel('customer/customer');
      $attrSetId = $customer->getResource()->getEntityType()->getDefaultAttributeSetId();
      $setup->addAttributeToSet('customer', $attrSetId, 'General', 'attr_name');
}
if (version_compare(Mage::getVersion(), '1.4.2', '>='))
{
    Mage::getSingleton('eav/config')
        ->getAttribute('customer', 'attr_name')
        ->setData('used_in_forms', array('customer_account_create'))
        ->save();
} 
```

接下来在“订购新”电子邮件中（现在）对其进行了测试，`{{var order.getCustomer().getAttrName()}}`并获得了正确的值。
试试看，可能对你有帮助。

# c# - MSMQ, Message is put on queue and disapears but is never picked up by service contract

> ID：11645131
> 
> 赞同：2
> 
> 时间：2012-07-25T07:57:11.113
> 
> 标签：c#, asp.net-mvc, wcf, msmq, msmqintegrationbinding

I have a local private queue. I also have a WCF-service inside an MVC-application that listens to the queue using msmqIntegrationBinding. The problem is that the service contract is never invoked when a message is queued but the message disapears the moment after. The message is not in the poison queue. Here is the config-part where i declare the binding to the queue:

```
<services>
  <service name="SkruvInfo.Web.Service.QueueMessageReceiver">
    <endpoint address="msmq.formatname:DIRECT=OS:LEIA\private$\screwinfo_autotests_messagequeue"
                      binding="msmqIntegrationBinding"
                      bindingConfiguration="MsmqBinding"
                      contract="SkruvInfo.Web.Service.IQueueMessageReceiver" />
  </service>
</services> 
```

And here is the contract:

```
[ServiceContract(Namespace = "http://localhost/SkruvWeb/Service")]
public interface IQueueMessageReceiver
{
    [OperationContract(IsOneWay = true, Action = "*")]
    void PutScrewInfoMessage(MsmqMessage<string> msg);
} 
```

And here is the method in the service:

```
 [OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = true)]
    public void PutScrewInfoMessage(System.ServiceModel.MsmqIntegration.MsmqMessage<string> msg)
    {
        log4net.Config.XmlConfigurator.Configure();
        var log = LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);
        try
        {
            log.Debug("Message from queue: " + msg.Body.ToString(CultureInfo.InvariantCulture));
            var xDoc = new XmlDocument();
            xDoc.LoadXml(msg.Body);
            CacheScrewInfoModelFromScrewInfoXmlDoc(xDoc);
        }
        catch (Exception e)
        {
            log.Error("Error parsing message from queue",e);
            EventLog.WriteEntry("Application","Message error for screws");
        }
    } 
```

Any suggestions to why the message disapears but does not invoke the service?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:16:20.370

尝试使用 ServiceKnownType 属性修改您的服务合同：

```
[ServiceContract(Namespace = "http://localhost/SkruvWeb/Service")]
[ServiceKnownType(typeof(String))]
public interface IQueueMessageReceiver
{
    [OperationContract(IsOneWay = true, Action = "*")]
    void PutScrewInfoMessage(MsmqMessage<string> msg);
} 
```

**更新**

如果您使用的是 MsmqIntegrationBinding 我假设您的队列客户端是像 VB6 客户端这样的遗留应用程序？如果是这样，您将需要在服务绑定配置中指定序列化格式。例如：

```
 <msmqIntegrationBinding>
    <binding name="MsmqBinding" serializationFormat="ActiveX">
      <security mode="None" />
    </binding>
  </msmqIntegrationBinding> 
```

[此处](http://msdn.microsoft.com/en-us/library/system.servicemodel.msmqintegration.msmqmessageserializationformat.aspx)记录了允许值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T12:27:05.623

以我的经验，这种行为是由序列化失败或消息太大（64KB 是默认的最大消息大小）引起的。这会导致 WCF*静默*崩溃（是的，我也不理解该设计选择），但仍会从队列中删除消息。

只需启用跟踪，您将很快在 WCF 中看到导致此问题的异常。

将此添加到您的 web.config（我在 </system.webServer> 下方）以进行粗略的跟踪设置。确保 AppPool 用户对日志文件夹具有写入权限。

```
<system.diagnostics>
    <trace autoflush="true" indentsize="4" />
    <sources>
      <source name="System.ServiceModel" switchValue="Warning">
        <listeners>
          <add name="textLogger" />
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add name="textLogger"
           type="System.Diagnostics.TextWriterTraceListener"
           initializeData="C:\logs\webbackend_wcf_log.txt" />
</system.diagnostics> 
```

# php - print difference between 2 strings in php

> ID：11645137
> 
> 赞同：0
> 
> 时间：2012-07-25T07:57:39.927
> 
> 标签：php

I have an output stream that is saved in a string called $output1, this is displayed to the user. now if I have another stream called $output2 that is identical to $output1 plus a few lines, how can I output only the part of $output 2 that is not in $output1.

For example:

```
$output1="this cat is";  
$output2="this cat is mine"; 
```

I want to output:

> this cat is mine

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:13:08.147

有两种方法可以做到这一点 -

1) `<?php echo $output2; ?>`- 你会输出 This cat is mine。

2)`<?php echo $output1.str_replace($output1, "", $output2); ?>`

我建议你使用第一个例子。

无论如何，请描述更多您想要实现的目标。

目前您正在指定两个几乎相同的变量。您可以只指定一个变量，您将使用该变量。

这是类似的东西 -

你有两篇论文，一篇写着“这只猫是”，另一篇写着“这只猫是我的”。你将从第二张纸上剪下“这只猫是”，只留下“我的”。所以你拿胶水把第一张纸和“我的”粘在一起。= 你会浪费时间，让事情变得复杂。

如果您只想获得“我的”，请使用 -`str_replace($output1, "", $output2);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:12:53.170

```
$output1="this cat is";  
$output2="this cat is mine";
$min=(strlen($output1)<strlen($output2)) ? $output1 : $output2 ;
$max=(strlen($output1)>strlen($output2)) ? $output1 : $output2 ;
$pos= strpos($max,$min);
//if you want "this cat is mine", maxima string
if($pos!==FALSE) echo $max;
//if you want " mine", part of the string only in the maxima one.
if($pos !==FALSE) echo substr($max,strlen($min)); 
```

## 编辑：

```
//if you want "this cat is" from shortest string and " mine" from the other one.
if($pos !==FALSE) echo $min.substr($max,strlen($min)); 
```

# recursion - SQL Server 2000 with statement and recursive with

> ID：11645138
> 
> 赞同：1
> 
> 时间：2012-07-25T07:57:44.867
> 
> 标签：recursion, sql-server-2000, common-table-expression

I have a problem in SQL Server 2000\. I cannot send a recursive `WITH` query because CTE was introduced in SQL Server 2005.

My question is the following:

how can I retrieve the answer of a hierarchy if I do not want to use a procedure but I can send 2 queries in which case I can include the answer of the first query in the second.

This is the query for SQL Server 2005:

```
WITH recursive_back (SOACTION,SOACTIONS) AS
(SELECT child.SOACTION,child.SOACTIONS
   FROM  soaction child
  WHERE child.soaction ={id to search}
  UNION ALL
 SELECT parent.SOACTION,parent.SOACTIONS
   FROM recursive_back child,soaction parent
  WHERE child.soactions = parent.soaction ),
recursive_ahead (SOACTION,SOACTIONS) AS
(SELECT parent.SOACTION, parent.SOACTIONS
   FROM soaction parent,recursive_back
  WHERE parent.soaction=recursive_back.soaction
  UNION ALL
 SELECT child.SOACTION, child.SOACTIONS
   FROM recursive_ahead parent, soaction child
  WHERE child.soactions = parent.soaction)

SELECT R.SOACTION,R.SOACTIONS
  FROM recursive_back R, SOACTION A
 WHERE R.SOACTION=A.SOACTION
 UNION
SELECT R.SOACTION,R.SOACTIONS
  FROM recursive_ahead R, SOACTION A
 WHERE R.SOACTION=A.SOACTION;

GO 
```

# javascript - Share URL of video in lightbox, instead of page's URL

> ID：11645142
> 
> 赞同：0
> 
> 时间：2012-07-25T07:58:04.567
> 
> 标签：javascript, video, youtube, share, prettyphoto

I have a page with a series of links to YouTube videos that display in a lightbox when clicked. I'm using prettyPhoto.

On the lightbox are share links - Facebook, Twitter, and such. Unfortunately the default behaviour of these share links is to share the whole page - I want to share the URL of the YouTube video specifically.

The HTML output is customisable, as a variable in the prettyPhoto JS, so I think what I need to do is take the URL you've just clicked on (which obviously PP knows, because it can play the video) and stick it in the share link.

I'm not great at JS, so hopefully this is a relatively simple thing! I'm even hoping PP has a variable somewhere in the code already that stores this info, and I can somehow just add it into the HTML variable... but don't know how!

Thanks :)

# c# - 如何在 Compact Framework 3.5 中确定 dll 文件的文件版本

> ID：11645143
> 
> 赞同：3
> 
> 时间：2012-07-25T07:58:08.320
> 
> 标签：c#, dll, compact-framework, assemblyfileversion

当指定路径时，我想确定 'c#' 中 dll 文件的文件版本。假设 path = "\x\y\z.dll" 。

**给出路径时如何查找 z.dll 的文件版本？**

注意：我使用 Compact Framework 3.5 SP1

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T08:00:42.503

```
// Get the file version for the notepad.
FileVersionInfo myFileVersionInfo = FileVersionInfo.GetVersionInfo(Environment.SystemDirectory + "\\Notepad.exe");

// Print the file name and version number.
Console.WriteLine("File: " + myFileVersionInfo.FileDescription + '\n' +
                  "Version number: " + myFileVersionInfo.FileVersion); 
```

来自：http: [//msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.fileversion.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.fileversion.aspx)

所以对你来说：

```
FileVersionInfo myFileVersionInfo = FileVersionInfo.GetVersionInfo(@"\x\y\z.dll"); 
```

如果 dll 是 .net 或 Win32，则此方法有效。反射方法仅在 dll 为 .net 时才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T08:02:28.477

**正常框架**

如果它是一个 .NET DLL，您可以使用反射。

```
using System.Reflection;

Assembly assembly = Assembly.LoadFrom("\x\y\z.dll");
Version ver = assembly.GetName().Version; 
```

如果没有，您可以使用 System.Diagnostics：

```
using System.Diagnostics;

static string GetDllVersion(string dllPath)
{
  FileVersionInfo myFileVersionInfo = FileVersionInfo.GetVersionInfo(dllPath);
  return myFileVersionInfo.FileVersion;
}

// Sample invokation
string result = GetDllVersion(@"C:\Program Files (x86)\Google\Chrome\Application\20.0.1132.57\chrome.dll");
// result value **20.0.1132.57** 
```

**紧凑的框架**

如果您使用的是**.NET Compact Framework**，则您无权访问**FileVersionInfo**

您可以检查这个[stackoverflow 问题](https://stackoverflow.com/questions/3812966/getting-file-version-info-in-the-compact-framework)。在唯一答案中，您有一个博客[链接](http://blog.opennetcf.com/ctacke/2010/09/28/GettingNativeFileInfoInTheCompactFramework.aspx)，其中包含解决您问题的代码。

# php - PHP: php mail(), how to setup php mail function without smtp on my own linux server?

> ID：11645145
> 
> 赞同：0
> 
> 时间：2012-07-25T07:58:09.367
> 
> 标签：php

I would like to know is there a way to setup php mail() so that it works when I use mail() function? I only have the right to use ftp in my server for me to transfer files, is there a way to use some type of php file or code to help me use/setup mail() function. I am using this function for my website contact us form. Perhaps, is there another to send free email to myself as user clicks the submit button? Because I only purchase a domain account with other people's server available for ftp.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T07:59:52.440

在大多数服务器上，sendmail 或 postfix（或类似的东西）默认启用 AFAIK，因此它可能已经工作。

如果它不要求您的主机为您启用它。

# javascript - JavaScript: extract column headers from table configuration string

> ID：11645147
> 
> 赞同：0
> 
> 时间：2012-07-25T07:58:15.060
> 
> 标签：javascript, regex, string

I need help grabbing some string operation in Javascript. I have a sample string as

```
var str = 'Supplier^supp^left^string*Spend (USD MM)^spend^right^number^5'; 
```

The string is basically a configuration for a portlet for two columns as Supplier and Spend..I have to get the column names from this string. Each star follows a new column config. In this case there are configs for only 2 columns and hence only 1 star exists in my string. Supposedly if there are 2 columns the string will look like

```
var str = 'Supplier (Name)^Supplier^left^string*Spend (USD MM)^Spend^right^number^5*Location (Area)^Loc^right^string^*Category ^Categ^right^string'; 
```

So from the above string i had written a logic to get the desired string as after the 2nd caret i want 'Supplier'(1stcolumn data name and not 'Supplier (Name) which is a display name) ,(Moving to 2nd column after the star)after the 2nd caret 'Spend'.Similarly 'Loc' (3rd column) and 'Categ' (4th column). Can anybody help me achieve this? Here is what i had written

```
 function getColNamesfromConfig(str) {
        var i = str.indexOf('^');
        var tmpCatStr = str.slice(i + 1);
        var catField = tmpCatStr.slice(0, tmpCatStr.indexOf('^'));

        var j = tmpCatStr.indexOf('*');
        var tmpStr = tmpCatStr.slice((j + 1));
        var k = tmpStr.slice(tmpStr.indexOf('^') + 1);
        var valField = k.slice(0, k.indexOf('^'));
        return { categoryField: catField, valueField: valField };
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:13:30.260

您可以使用`split()`

```
str.split('*')[0].split('^')[1] 
```

上面的代码会给你

```
Supplier 
```

检查以下[链接](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:32:42.110

或者使用正则表达式：

```
 function headers(s) {
      var re = /([^^]+)(?:[^*]+[*]?)?/g, names=[];
      while (match = re.exec(s)) {
        names.push(match[1]);
      }
      return names;
   } 
```

输出 `["Supplier","Spend (USD MM)","Location (Area)","Category "]` 和 `["Supplier (Name)","Spend (USD MM)","Location (Area)","Category "]` 你的两个例子

看这个实际操作（[JSFiddle](http://jsfiddle.net/YjCn3/1/)）。

# php - 安全的 php 脚本执行

> ID：11645150
> 
> 赞同：0
> 
> 时间：2012-07-25T07:58:32.593
> 
> 标签：php, mysql, database, crash, cron

我正在使用 php 文件在我的 mysql 数据库中执行数千个“插入”。如果 php 在完成之前崩溃，为了确保我的更新失败，我不想在 10 000 上完成 5000 次“插入”，而是 0。

你能告诉我这怎么可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T08:01:11.003

您可以通过使用事务来做到这一点。实现因数据库而异。正如您所描述的，事务将确保完成整个任务，或者没有完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T08:02:27.353

将您的操作包装到[Transactions](http://dev.mysql.com/doc/refman/5.1/en/commit.html)中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T08:02:53.553

在单个[事务](https://stackoverflow.com/search?q=%5bphp%5d+mysql+transaction)中执行所有插入。

# ruby-on-rails - 在 rails 中使用 link_to 提交表单

> ID：11645153
> 
> 赞同：13
> 
> 时间：2012-07-25T07:58:47.640
> 
> 标签：ruby-on-rails, link-to

我正在尝试使用 link_to 提交表单，如下所示：

```
 <%= form_for(@post,  :url=> '/post/action', :method=> 'post', :html => {:id=>'form_id'} ) do |f| %>
  ....

 <%= link_to 'submit', "/post/action", :onclick=>"document.getElementById('form_id').submit()" %>

  .... 
```

但它没有发布表单，它只是将我的表单重定向到指定的 url。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-20T19:29:05.717

您可以使用：

```
<%= link_to 'submit', "#", :onclick => "$('#form_id').submit()" %> 
```

如果您使用的是 JQuery 和更高版本的 rails。

上面会起作用，但如果你有一个很长的页面，它会因为“#”导航到页面顶部，所以如果你想避免这种情况，你可以这样做：

```
<%= link_to 'submit', "", :onclick => "$('#form_id').submit()" %> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-25T08:20:36.243

我认为这两种情况都会发生。浏览器开始提交表单，但它也遵循链接的`href`. `#`您可以通过链接到而不是`/post/action`...来修复它

...但是，我不建议这样做。有一些更好的方法：

首先，您可以使用按钮而不是链接。您必须对其进行样式设置以使其看起来像一个链接，但这应该不是问题。它会更好，因为它不会违反最小惊喜原则（阅读代码的人希望表单提交带有按钮）并且您不需要 JavaScript。

如果您坚持使用链接，您至少应该将 JavaScript 代码从视图移动到 JavaScript 文件。然后以不显眼的方式添加此行为（尽管您不会对链接有很好的回退）。假设您使用的是 jQuery，它应该很简单：

```
$(document).on('click', '[data-submit-form]', function(e) {
  e.preventDefault();
  $(this).closest('form').submit()
} 
```

# windows-phone-7 - 到达配置文件需要 TextureAddressMode 来钳制，但我已经设置了

> ID：11645155
> 
> 赞同：0
> 
> 时间：2012-07-25T07:58:53.610
> 
> 标签：windows-phone-7, xna, texture-mapping

我现在正在使用**XNA Framework 4.0在****WP7**上编写游戏。

 **有些图片需要平铺。

因此，我在渲染这些图片之前将其设置为`SamplerState[0]`，然后在完成后将`LinearWrap`其切换回`LinearClamp`。

但是，当游戏完成所有平铺图片并即将`VertexBuffer`为第一个非平铺（即未包装）图片创建一个时，游戏仍然会抛出异常。

我在该行添加了一个断点，并确认 GraphicsDevice`Samplerstates[0]`的`LinearClamp`. 所有其他 15 个 SamplerState 都是，`LinearWrap`但我没有使用任何多纹理功能，所以我认为这不是原因。（坦率地说，我什至不知道如何在 XNA 中使用多纹理，也许`DualTextureEffect`吧？）

顺便说一句，我拼命地将所有 16 个采样器设置为`LinearClamp`，但问题仍然存在。

有没有人遇到过类似的问题或者有解决办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T16:24:57.760

@Blau 在他的评论中有它。只需选择您正在使用的图像，打开属性窗口，展开内容处理器，然后将“调整大小为 2 的幂”切换为 true。**

# sql - 在 select 语句中从 SUM 返回前 5

> ID：11645156
> 
> 赞同：2
> 
> 时间：2012-07-25T07:58:55.560
> 
> 标签：sql, sql-server, tsql

我需要返回以下语句，但我只想返回每个销售值的 TOP 5 ......不是所有的记录。

```
Select ID, Code, sum(Sale) as Sale from TableName
Where Code = 11
Group By ID, code 
```

**我不想要这个！**

```
Select TOP 5 ID, Code, sum(Sale) as Sale from TableName
Where Code = 11
Group By ID, code 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:02:07.730

```
With Cte as 
( Select  ID, Code, sale as Sales ,
  row_number() over (partition by ID,code order by sale desc) as row_num 
  from TableName where code=11
)
Select Id,code,sum(sales) from cte 
GROUP BY ID, code
WHERE row_num < 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:08:07.510

```
WITH TopSales AS (
  SELECT *, RANK() OVER (PARTITION BY ID, Code ORDER BY Sale DESC) saleRank
  FROM TableName
)
SELECT ID, Code, SUM(Sale) AS Sale
  FROM TopSales
  WHERE (Code = 11) AND (saleRank <= 5)
  GROUP BY ID, code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:03:43.240

可能你需要类似的东西：

```
;WITH sales (
SELECT
 id, 
 code,
 sale,
 ROW_NUMBER() OVER (PARTITION BY id, code ORDER BY sales DESC) n
FROM
 TableName
WHERE
 Code = 11
)
SELECT
 id, code, sum(sale) sale
FROM
 sales
WHERE
 n <= 5
GROUP BY
 id,
 code 
```

`ROW_NUMBER()`并`PARTITION BY`帮助找到最后 5 次销售。然后你`SUM`只顶（最高）5。

此查询返回每个（id、code）组的前 5 个销售额的总和。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T08:05:39.097

```
select id, code, SUM (sale) 
from
(
    select id, code, sale, 
        ROW_NUMBER() over(partition by id, code order by sale desc) rn 
    from tablename
) v
where rn<=5
group by id, code 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T08:39:37.777

如果您只想返回每个组的前 5 个结果，您可以这样做：

```
with cte as 
(ID, Code, Sale,ROW_NUMBER() over(partition by  ID,
Code order by (select 0)) rownum
from TableName)
Select ID, Code, sum(Sale) as Sale from cte
Where Code = 11
and rownum<=5
Group By ID, code 
```

如果您想返回每个组薪水最高的前 5 个结果，您可以这样做：

```
with cte as 
(ID, Code, Sale,ROW_NUMBER() over(partition by  ID,
Code order by Sale desc) rownum
from TableName)
Select ID, Code, sum(Sale) as Sale from cte
Where Code = 11
and rownum<=5
Group By ID, code 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-25T08:02:26.110

```
select id, code, sum(sale) as sale from tablename
where code = 11
group by id, code
order by sum(sale) desc
limit 5 
```

# html - 文本通过css div

> ID：11645159
> 
> 赞同：-1
> 
> 时间：2012-07-25T07:59:01.377
> 
> 标签：html, css, css-float

当我使窗口非常小时，为什么“红色”文本会通过底部的 div？

jsfiddle.net/cdraT/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:03:59.200

嘿，现在定义你的红框`min-height:100%;`并删除`height :100%`

[**现场演示**](http://jsfiddle.net/cdraT/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:14:56.080

为了防止这种行为，你可以添加`overflow: hidden`到 div 中，这样你会得到这样的东西：

[http://jsfiddle.net/PeeHaa/cdraT/5/](http://jsfiddle.net/PeeHaa/cdraT/5/)

那就是如果我正确理解了您的问题:-)

**编辑**

带垂直滚动条：http: [//jsfiddle.net/PeeHaa/cdraT/6/](http://jsfiddle.net/PeeHaa/cdraT/6/)

# android - 具有不同布局的 ListView 行

> ID：11645160
> 
> 赞同：2
> 
> 时间：2012-07-25T07:59:05.650
> 
> 标签：android, android-listview, android-arrayadapter

我想要实现的是为每一行设置不同的布局。我的代码`ArrayAdapter`如下：

```
@Override
    public int getCount() {
        return contentList.size();
    }

    @Override
    public MyContents getItem(int position) {
        return content.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public int getViewTypeCount() {
        // TODO Auto-generated method stub
        return 2;
    }

    @Override
    public int getItemViewType(int position) {
        // TODO Auto-generated method stub
        return super.getItemViewType(position);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final MyContents entry = content.get(position);

        View row = convertView;
        LayoutInflater inflater = null;
        boolean _haschild_ = entry.testBoolean();
        if (row == null) {
            if (entry.testBoolean()) {
                inflater = (LayoutInflater) context
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                row = inflater
                        .inflate(R.layout.contents_layout, null);
            } else {
                inflater = (LayoutInflater) context
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                row = inflater.inflate(R.layout.test_layout, null);
            }
        } 

        if (entry.testBoolean()) {
            TextView txtView = (TextView) row
                    .findViewById(R.id.txtView);
            //.....
        } else {
            ((TextView) row.findViewById(R.id.txtView_test)) //**LOE**
                    .setText("test: " + position); //**LOE**
        }

        return row;
    } 
```

*test_layout.xml* 的布局文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_test"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="12dp"
    android:background="@color/grey_five"
    android:orientation="vertical"
    android:padding="@dimen/padding_small" >

    <TextView
        android:id="@+id/txtView_test"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="@string/lorem__ipsum"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/grey" />

</RelativeLayout> 
```

但是每当我执行它时，它都会抛出一个`NullPointerException`（检查带有注释的行 // **LOE**）。

有什么建议该怎么做吗？过去一天我一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T08:12:46.553

发生这种`NullPointerException`情况是因为您没有实现`getItemViewType`. 现在您无论如何都返回第一种类型的行布局，这是一个没有 *txtView_test* 的布局`TextView`。你的代码应该是这样的：

```
// some fields
public static final int FIRST_TYPE = 0;
public static final int SECOND_TYPE = 1;

@Override
public int getItemViewType(int position) {
     MyContents item = getItem(position);
     if (item.testBoolean()) {
          return FIRST_TYPE;
     } else {
          return SECOND_TYPE; 
     } 
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    final MyContents entry = content.get(position);
    View row = convertView;
    LayoutInflater inflater = null;
    int type = getItemViewType(position);
    boolean _haschild_ = entry.testBoolean();
    if (row == null) {
        if (type == FIRST_TYPE) {
            inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater
                    .inflate(R.layout.contents_layout, null);
        } else {
            inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.test_layout, null);
        }
    } 
    if (type == FIRST_TYPE) {
        TextView txtView = (TextView) row
                .findViewById(R.id.txtView);
        //.....
    } else {
        ((TextView) row.findViewById(R.id.txtView_test)) //**LOE**
                .setText("test: " + position); //**LOE**
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:05:45.733

采用，

```
LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View row = inflater.inflate(R.layout.test_layout, parent, false); 
```

愿它解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:09:09.657

试试这个 ：：：

```
convertView = getLayoutInflater().inflate(R.layout.my_row_layout, null);

TextView txtName = (TextView)convertView.findViewById(R.id.txtMyTextView);

txtName.setText("Hi,,,,. Hows You..."); 
```

# tfs - 如何处理未完成的工作，但保持图表的形状？

> ID：11645161
> 
> 赞同：1
> 
> 时间：2012-07-25T07:59:14.327
> 
> 标签：tfs, scrum

我们最近完成了前几个冲刺，提出了一些我们不太知道答案的问题。

这两个问题都与：我们应该如何处理在 sprint 结束时未完成的积压项目、任务和错误？某个动作将如何影响燃尽图或速度图？

如果我们有一个 20 天的 sprint，我的猜测是我们应该从第 1 天开始，在第 20 天停止，为下一次 sprint 会议（第 21 天）留出一天，并在第 22 天开始下一个 sprint。

假设我们有一个 PBI，它有 3 个任务。一项任务已完成，一项正在进行中，一项已放回待办事项。PBI 的努力为 6。如果我们在 sprint 期间将项目移入或移出 sprint，这会对 Sprint Burndown 和速度图产生影响。但是一旦 sprint 结束，我们移动这些项目，它仍然会影响图表吗？或者我们应该如何处理这些物品？我们应该关闭 PBI（将其设置为 Done，即使它不是）还是只是移动它并保留在前一个 sprint 中完成的任务？我们是否应该将所有任务都设置为完成，即使有些不是？每项任务都已完成，因此使用了数小时。我们需要跟踪这些，或者至少，速度图表应该仍然可以。

一个类似的问题出现了一个错误。我们添加了一个测试状态，因此开发人员没有将状态设置为完成，而是将其设置为测试，因此测试团队知道要测试哪些 PBI 或错误，并在完成后将其设置为完成。如果错误来自 PBI，我们会关闭 PBI 并为其打开错误。但如果这是一个错误，并且没有修复，他们会重新打开它。通过将其设置为 Approved 或 Committed，但是分配给它的工作会发生什么？如果 sprint 结束时 bug 没有修复，我们应该将其设置为 Done 并打开一个新的，还是将其移至下一个 sprint？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:22:49.513

随着时间的推移，Scrum 进行了轻微的修改和澄清；最新版本或多或少在[The Scrum Guide (2011)中指定](http://www.scrum.org/Scrum-Guides)

*   Sprint 计划会议是 Sprint 的一部分，通常在 sprint 的第一天（第 1 天）进行。第 20 天将包含 Sprint 回顾和回顾。第 21 天实际上是后续 Sprint 的第 1 天。

*   关于您关于未完成产品待办事项 (PBI) 的问题：您的目标是随着时间的推移为您的团队建立一个速度。**一致性**是这一点的关键。所以最重要的是，你应该*建立一种在每个 Sprint 中都一样的方法*. 我看到团队处理这种情况的方式不同；您需要根据已完成的工作来确定您是否实际交付了 Sprint Backlog 项目。如果未交付该值，则可以将其保留为未完成，并可选择更新任务的最终工作。您还可以在 Sprint Backlog 项目的历史记录和/或描述中添加关于已完成的内容和达到的验收标准的注释。如果物品的价值在一定程度上交付了，那么您可能会做一个类似的笔记并计算该物品。您无需准确了解 Sprint 中涵盖的点，因为它们会随着时间的推移而平均化，因此您只需要使用您的判断即可。任何未完成的事情都可以作为产品待办事项项目并相应地进行优先级排序。您的产品负责人可能会决定将其放在产品待办列表中的较低位置，具体取决于其中未完成的内容的价值。当 PBI 代表未完成的工作时，您将为它创建一组新的任务（您可以从未完成的 Sprint 中复制未完成的任务以节省时间）。这里同样重要的是讨论事情的进展情况，以及在 Sprint Review 和 Sprint Retrospective 期间如何处理这一进展，以便您的团队可以相应地进行调整。

*   关于 Bug，您可以考虑与 PBI 类似地处理它来规划和优先级以及完成/未完成；你的团队需要一个完成的定义；如果这包括测试，则应仅在测试后将其视为完成。如果它没有完成，那么你应该以一致的方式处理它。开箱即用的 Scrum 1.0 版本的 Bug 工作项有一个名为 Committed 的状态，表明 Bug 已准备好进行测试，因此您不需要该测试状态。一旦通过测试，它就会从 Committed 状态变为 Done 状态。您可以[在 Microsoft 站点上找到 Scrum 1.0 模板的流程指南](http://msdn.microsoft.com/en-us/library/ff731587)。它或多或少是关于如何使用模板的说明。

# c# - 旋转图像和拇指

> ID：11645169
> 
> 赞同：0
> 
> 时间：2012-07-25T07:59:35.480
> 
> 标签：c#, asp.net, image-processing, rotation, thumbnails

我想旋转图像。我将我的图像保存在数据库中

```
var fileInDB = GetFileFromDB();
var inputStream = new MemoryStream(fileInDB.FileData); // fileInDB.FileData is Byte[]
var image = Image.FromStream(streamInput);
image.RotateFlip(RotateFlipType.Rotate90FlipNone);
image.Save(streamOut, ImageFormat.Jpeg);
SaveFileToDB(streamOut.ToArray()); 
```

图像正确旋转。但它的缩略图不旋转。它是创建拇指的代码：

```
var fileInDB = GetFileFromDB();
var mainImage = Image.FromStream(new MemoryStream(fileInDB.Filedata));
int thumbWidth = 100;
int thumbHeight = (thumbWidth * mainImage.Height) / mainImage.Width;
var thumbImage = mainImage.GetThumbnailImage(thumbWidth, thumbHeight, null, IntPtr.Zero); 
```

# entity-framework - EF 4 连接字符串元数据

> ID：11645170
> 
> 赞同：1
> 
> 时间：2012-07-25T07:59:39.640
> 
> 标签：entity-framework, connection-string

我遇到了 Entity Framework 4 的一个非常烦人的问题。我基本上将实体框架 EDMX 文件从一个程序集移动到另一个程序集，但是当我的连接字符串元数据在运行时得到解析时，某些东西仍然会将旧的 DLL 名称插入到元数据中连接字符串。连接字符串当前定义为

```
<add name="HNMTEntities" connectionString="metadata=res://*/Data.HNMTModel.csdl|res://*/Data.HNMTModel.ssdl|res://*/Data.HNMTModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=machine\Database;initial catalog=HN18;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

但是在它的元数据部分，* 被旧的 DLL 名称而不是新的名称替换。我已经阅读了一些关于此的帖子，并尝试将连接字符串移动到应用程序 app.config 文件并删除并重新创建模型，但它仍然不起作用，并且旧 DLL 的名称被插入到连接字符串中。

有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:45:37.770

我发现了问题，我们在代码中传递了一个硬编码的 DLL 名称:(

# mysql - MySql 索引表中的固定 preprendet 字符串是否会导致性能问题？

> ID：11645171
> 
> 赞同：0
> 
> 时间：2012-07-25T07:59:50.160
> 
> 标签：mysql, database, optimization, indexing, query-optimization

我有一个 MySql InnoDB 表，其中包含一个`source`大约十亿行的字段。所有源字段值都是 url，所以它们都以`http://`(No https) 开头。

`source`如果我从值中删除所有`http://`开头，它会提高现场的选择性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:37:46.857

这取决于。

我假设你在你的`source`领域有一个索引。MySQL 中 varchar 字段的索引仅适用于前缀，即它们只能在搜索整个值 ( `... where source = "some value"`) 或从位置 0 ( `... WHERE source LIKE "some value%"`) 开始的值的子字符串时使用。如果查询任意子字符串（即`... WHERE source LIKE "%some value%"`），MySQL 不能使用索引。

在 varchar 或 text 列上创建索引时，您可以选择指定索引长度 ( `KEY indexName (source(10))`)。如果这样做，索引将仅覆盖（在此示例中）URL 最左边的 10 个字符。如果您不指定索引长度，则会对整个字段值进行索引 - 这会使索引更大，但更具*选择性*（索引选择性是索引中不同值的数量除以索引值的总数。这个比率越接近 1 越好）。如果您使用的是 TEXT 或 BLOB 类型，则需要索引长度。现在，如果您有索引，已设置索引长度并查询 URL 前缀，那么是的，从 URL 中删除“http://”将使您的索引更具选择性，从而更快。速度快多少取决于您的数据、索引长度以及您的索引变得更具选择性，因此您应该真正衡量它。不过，我怀疑它最终是否会产生很大的不同，如果确实如此，您可能会通过修改索引获得更多收益。

如果您不查询 URL 前缀或完整的 URL，您可能希望对 URL 进行预处理，以便能够创建适用于您的查询的索引。如果您根本没有索引，那么创建一个有效的索引应该是您的第一个优化步骤。

# php - 多维数组中的PHP Select键

> ID：11645178
> 
> 赞同：1
> 
> 时间：2012-07-25T08:00:10.630
> 
> 标签：php, multidimensional-array

我正在做一个项目，我从数据库中选择多个项目（比如 20 个）并将它们存储在数组中的缓存中。然后，当用户单击该项目时，我需要从数组中删除该项目。

而不是每次发生这种情况时都删除缓存并重新触发查询（这是同事建议的），我想简单地从缓存中删除该项目，并且仅在项目数量有限时重新触发查询缓存（比如 5）

来自缓存的数组如下所示：

```
[
    [
      'item_id' => 10001,
      'item_name' => "super-cool item",
      'item_description' => "This item is awesome"
    ],
    [
      'item_id' => 10002,
      'item_name' => "super-cool item",
      'item_description' => "This item is awesome"
    ],
    [
      'item_id' => 10003,
      'item_name' => "super-cool item",
      'item_description' => "This item is awesome"
    ]
] 
```

在选择三个项目并向用户显示之前，数组会被打乱。

显然，我需要做的是根据 选择一个项目`item_id`，取消设置该项目的键并重置缓存中的字段。

让我绊倒的部分是根据 选择项目`item_id`，那么最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:08:15.203

为了删除数组中的索引，您可以使用该`unset()`函数。因为你的值太少了，所以你可以遍历数组并查找数组键以获取项目 id：

```
<?php
$todeleteId=15;
foreach ($cache as $key=>$value) {
  if ($value['item_id']==$todeleteId) {
    unset($cache($key);
    break;
  }
} 
```

您也可以将数组键设置为项目 ID，然后只需：

```
unset($todeleteId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-24T14:05:13.573

几年有多大的不同！万一其他人正在寻求解决与此类似的问题，处理它的最佳方法是这样的方法：

```
$toDelete = 1234;

$cache = array_filter($cache, function ($item) use ($toDelete) {
    return (int) $item['id'] !== $toDelete;
}); 
```

# google-apps-script - Google App Script / Spreadsheet - 如何获取过滤条件？

> ID：11645180
> 
> 赞同：5
> 
> 时间：2012-07-25T08:00:17.123
> 
> 标签：google-apps-script

是否可以获得我的数据集的过滤条件。例如，如果我的一列是“部门”，并且我过滤了数据以仅显示“IT”。我们如何获得过滤条件“IT”。我需要将过滤后的标准放入我的 GAS 中以进行其他操作。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T21:16:28.670

**试试这个例子来做一个简单的过滤器。它将从第一列过滤信息（将 XXX 更改为有意义的内容）：**

```
 function onOpen(){

  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var filterMenuEntries = [{name: "filter Column1", functionName: "filter"}];
  ss.addMenu("choose filter", filterMenuEntries);

  }

 function filter(){

 var sheet = SpreadsheetApp.getActiveSheet();
 var rows = sheet.getDataRange();
 var numRows = rows.getNumRows();
 var values = rows.getValues();

 for (var i=1; i <=numRows -1; i++){

   var row =values[i];

   // Column value
   var myValue = row[0];

   // filter value 
   if (myValue == "XXX"){

     sheet.hideRows(i+1);

     }

  }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T10:02:31.223

谷歌电子表格已经有一个过滤器公式（[我总是用这个页面来提醒我怎么做](http://woorkup.com/2010/02/19/10-useful-google-spreadsheet-formulas-you-must-know/)）。例如，如果您的数据看起来像这样

```
 A
1 Department
2 IT Department (Edinburgh)
3 Department of IT
4 Other Department 
```

要获得过滤列表，您可以使用公式

```
=FILTER(A:A;FIND("IT",A:A)>0) 
```

（[这里的工作示例](https://docs.google.com/spreadsheet/ccc?key=0AqGkLMU9sHmLdHRWV3hPNWdlWWhuVDlucE1RTGtlZXc#gid=0)）

如果你想完全在 Apps 脚本中做某事，Romain Vialard 编写了一个带有过滤功能的[托管库。](https://developers.google.com/apps-script/guide_libraries)以下是[安装和使用 2D Array2 库的说明](https://sites.google.com/site/scriptsexamples/custom-methods/2d-arrays-library)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-09T16:11:13.170

过滤器现在可与最近推出的高级表格服务一起使用：这是[文章的链接](https://gsuite-developers.googleblog.com/2017/04/using-google-sheets-filters-in-add-ons.html?m=1)

这是如何做的一个小片段：

```
function setSheetBasicFilter(ssId, BasicFilterSettings) {
  //requests is an array of batchrequests, here we only use setBasicFilter
  var requests = [
    {
      "setBasicFilter": {
        "filter": BasicFilterSettings
      }
    }
  ];
  Sheets.Spreadsheets.batchUpdate({'requests': requests}, ssId);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-04T13:59:46.060

为了寻找这个问题的答案，我想出了下一个解决方法：

*   在工作表中应用过滤器；
*   为过滤（因此可见）的单元格着色（在 F 列中的示例代码中为红色）；
*   运行脚本：
    *   以数组颜色读取（F列的）背景颜色
    *   迭代这个数组
    *   建立新的可见行号数组。

最后一个数组可用于进一步操作工作表数据。为了使脚本的效果更加生动，我使脚本将使用的单元格的背景设置为绿色。

对于最终用户来说，这是一项额外的小工作，但恕我直言，这是使仅使用过滤数据成为可能的唯一方法。

```
function getFilterdData(){  
   var s = SpreadsheetApp.getActive();
   var sheet= s.getSheetByName('Opdrachten en aanvragen');//any sheet
   var rows = new Array();
   var colors = sheet.getRange(1, 6, sheet.getLastRow(), 1).getBackgrounds();
   for(var i = 0; i < colors.length; i++){
       if(colors[i] == "#ff0000"){
         var rowsIndex = rows.length;
         rows[rowsIndex] = i+1;
         sheet.getRange(i+1, 6).setBackground("#d9ead3")
         }
       }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-20T13:08:17.660

这在 Google 的问题跟踪器中作为[问题 #36753410 提出](https://issuetracker.google.com/issues/36753410)。

截至[2018-04-12](https://issuetracker.google.com/issues/36753410#comment189)，他们发布了解决方案：

> 昨天我们发布了一些新功能，可以使用 Apps 脚本操作过滤器：
> 
> *   [https://developers.google.com/apps-script/reference/spreadsheet/range#createFilter()](https://developers.google.com/apps-script/reference/spreadsheet/range#createFilter())
> *   [https://developers.google.com/apps-script/reference/spreadsheet/sheet#getfilter](https://developers.google.com/apps-script/reference/spreadsheet/sheet#getfilter)
> *   [https://developers.google.com/apps-script/reference/spreadsheet/filter](https://developers.google.com/apps-script/reference/spreadsheet/filter)
> 
> 不幸的是，Apps 脚本仍然没有方法来确定给定的行或列是否被过滤器隐藏。有关使用表格高级服务的解决方法，请参阅[评论 #157](https://issuetracker.google.com/issues/36753410#comment157)。

[Filter](https://developers.google.com/apps-script/reference/spreadsheet/filter)类允许您依次获取每列的[FilterCriteria](https://developers.google.com/apps-script/reference/spreadsheet/filter-criteria)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-12T00:12:56.647

基于 mhawksey 的回答，我编写了以下函数：

```
//
function celdasOcultas(ssId, rangeA1) {  
  // limit what's returned from the API
  var fields = "sheets(data(rowMetadata(hiddenByFilter)),properties/sheetId)";
  var sheets = Sheets.Spreadsheets.get(ssId, {ranges: rangeA1, fields: fields}).sheets;
  if (sheets) {
    return sheets[0].data[0].rowMetadata;
  }
}
```

然后这样称呼它：

```
 // i.e. : ss = spreadsheet, ranges = "Hoja 2!A2:A16"
    Logger.log(range.getA1Notation());
    var ocultas = celdasOcultas(ss.getId(), sheetName + "!" + range.getA1Notation());
    // Logger.log(ocultas);
    var values = range.getValues();
    for (var r = 0; r < values.length; r++) {
      if (!ocultas[r].hiddenByFilter) {
        values[r].forEach( function col(c){
          Logger.log(c);
        });
      }
      //range.setBackground("lightcoral");
    }
```

比防止隐藏行的日志。您可以在以下位置看到它的实际效果： [Prueba 脚本](https://docs.google.com/spreadsheets/d/1Ita-dhrDKs8FsXrWlsKlSASAdd7QTD95lPslffQtanU/edit#gid=0)，注意项目必须在 Google API 控制台上启用 Google Sheets API。 [![在此处输入图像描述](../Images/a49c25756b7d2514fa82c0080d2111ca.png)](https://i.stack.imgur.com/HS0Us.png)

希望能帮助到你。谢谢！

# c++ - C++ 从文本文件中过滤内容

> ID：11645185
> 
> 赞同：0
> 
> 时间：2012-07-25T08:00:33.457
> 
> 标签：c++, filter

一旦找到 [1],[2] ... [n]，我一直想提取一行文本。但似乎我无法将一行存储到以 [1] 开头的字符中。

```
void ExtractWebContent::filterContent(){
    char str [10];
    ifstream reading;
    reading.open("file_Currency.txt");

    while (!reading.eof()){
        reading.get(str,10,'[1]');
        cout << str << endl;
    }
    cout << str;
    reading.close(); 
} 
```

这是我要从中提取的文件..

```
标题：货币

          名称 价格变化 % Chg
       [80]美元/新加坡元
                  1.2606 -0.00 -0.13%

                                           美元/新加坡元 [81]USDSGD=X
       [82]欧元/新加坡元
                  1.5242 0.00 +0.11%

                                           欧元/新加坡元 [83]EURSGD=X

```

我正在使用 linux，C++ 编程。这是为了过滤从 HTML 文本文件中获得的图形。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:09:52.450

您遇到的最大错误是将单个字符视为字符串。第三个参数应该是单个字符*分隔符*，即分隔文件中记录的字符。如果在编译`-Wall`时添加编译器选项，您将收到有关单字符文字中包含多个字符的警告。

做你想做的事情的一种方法是使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expressions)。

# jquery - JQuery 'Hide' 函数行为异常

> ID：11645187
> 
> 赞同：1
> 
> 时间：2012-07-25T08:00:36.867
> 
> 标签：jquery, html

我正在尝试建立一个使用 Jquery 来制作许多动画的微型网站。页面上有 4 个链接，每个链接都打开一个灯箱。

我希望灯箱在背景变暗后使用“显示”功能出现 - 目前这工作正常。但是，当灯箱关闭时，我希望它在深色背景消失之前隐藏起来。由于某种原因，当执行'hide'功能时，灯箱面板在缩小之前延伸到页面底部，背景同时淡出，而不是等到隐藏功能完成（尽管淡出已经写入隐藏回调）

我是 Jquery 的新手，所以我知道我在某处弄错了，但如果有人可以提供帮助，我将不胜感激。

灯箱面板之一的 Jquery 代码如下所示。要查看当前的微型站点并查看 HTML 源代码，请访问：

[http://testing.xenongroupadmin.com/whatis/pfi](http://testing.xenongroupadmin.com/whatis/pfi)

到目前为止，我只为其中一个灯箱编写了代码——单击左上角标题为“谁需要知道”的框。

非常感激任何的帮助！

谢谢！

**jQuery 代码**

```
$(document).ready(function(){

$("a#show-whopanel").click(function(){
 $("#lightbox, #who-panel").fadeIn(300, function(){
  $("div#animation1").show(600);
  })
 })

$("a#close-panel").click(function(){
 $("div#animation1").hide(600, function(){
  $("#lightbox, #who-panel").fadeOut(300);
  }
 );
}) 
```

})

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:14:21.277

在更一般的层面上，在调试 jQuery 时，删除回调函数并查看基本效果是否有效是值得的。

因此，您的关闭如下：

```
$("a#close-panel").click(function(){
   $("div#animation1").hide(600, function(){
       $("#lightbox, #who-panel").fadeOut(300);
   });
}); 
```

它基本上说：点击时，（1）隐藏动画1，隐藏完成后，（2）淡出灯箱和面板。

要调试，您要检查它的作用：

```
$("a#close-panel").click(function(){
   $("div#animation1").hide(600);
}); 
```

然后检查这是做什么的：

```
$("a#close-panel").click(function(){
       $("#lightbox, #who-panel").fadeOut(300);
}); 
```

然后你就会知道什么在做什么，以及哪种效果使 div 在消失之前增大了大小。

您还缺少一些分号，尽管这应该没问题。

编辑：仔细观察，你为什么要使用回调？你不想摆脱灯箱和面板吗？你为什么隐藏动画1？如果 who-panel 淡出，你无论如何都看不到animation1！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:03:30.240

尝试这个：

```
$(document).ready(function(){
  $("a#show-whopanel").click(function(){
   $("#lightbox, #who-panel").fadeIn(300, function(){
    $("div#animation1").show(600);
    })
   })
  $("a#close-panel").click(function(){
   $("#lightbox, #who-panel").fadeOut(300, function(){
    $("div#animation1").fadeOut(600);
    }
   );
  })
}); 
```

# java - 如何获取对象字符串并将其添加到字符串数组

> ID：11645199
> 
> 赞同：0
> 
> 时间：2012-07-25T08:01:17.323
> 
> 标签：java

我有一个`ArrayList`自己的班级`Case`。类案例提供了`getCaseNumber()`我想将所有案例案例编​​号添加到`String[] caseNumber`. 我试过这个

```
public String[] getCaseNumberToTempList(ArrayList<Case> caseList) {

    String[] objectCaseNumber = null; 

    for(int i = 0; i < caseList.size(); i++) {
        objectCaseNumber[i] = caseList.get(i).getCaseNumber();  
    }

    return objectCaseNumber;

} 
```

但是我的编译器抱怨`objectCaseNumber`for 循环内部的那一点是空的。我怎样才能完成这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:02:33.280

好吧，您需要先创建一个数组，然后使用对该数组的引用来初始化变量。（有关更多信息，请参阅[数组的 Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)。）例如：

```
String[] objectCaseNumber = new String[caseList.size()]; 
```

或者，改为构建一个`List<String>`（例如使用`ArrayList`）。这更灵活 - 在这种情况下，它很简单，因为您预先知道大小，但在其他情况下，能够只*添加*到列表中，让生活变得更简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T08:07:45.853

1.  在惯用的 Java 中，您不会将`ArrayList`其用作参数类型。使用`List`.
2.  开销稍大，但更简单，更易读的代码是在另一个中累积`List`，然后转换为一个数组：

* * *

```
public String[] getCaseNumberToTempList(List<Case> caseList) {
  final List<String> r = new ArrayList<String>();
  for (Case c : caseList) r.add(c.getCaseNumber());
  return r.toArray(new Case[0]);
} 
```

`ArrayList`在您的代码中，由于通过 随机访问的性能影响，坚持这样做是有意义的`get`，但是如果您使用这种代码（我建议养成它的习惯），那么您可以使用任何`List`具有相同结果的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:08:20.837

好吧，我认为您可能将数组误解为原始类型。java中的数组是对象，在访问它之前需要对其进行初始化。

# php - 将文件发送给齿轮工

> ID：11645200
> 
> 赞同：1
> 
> 时间：2012-07-25T08:01:19.093
> 
> 标签：php, gearman

我目前正在将网页的视频转换部分（有点像 youtube，用户上传视频，我们将它们转换为 flv/mp4）到不同的服务器。我已经让系统在同一台机器上与[gearman一起运行。](http://gearman.org/)因此，当用户将视频文件上传到服务器 A 时，同一服务器 A 上的齿轮工会选择其中的内容。

现在我将worker移动到服务器B。所以服务器B上的worker需要访问服务器A上上传的文件。目前我使用SCP将文件从A复制到B然后处理它。这种方法有效，但我觉得应该有一种更干净的方法，但我还没有找到任何关于将文件（或大文件）发送给 gearman 工作人员的信息。你会如何处理这个问题？

最好客户端将视频文件作为命令的一部分发送以启动后台作业，因此我不必担心文件实际上来自工作人员内部的哪个位置。这样我就可以毫不费力地添加更多的转换服务器。

我的网页和工作人员都在使用 PHP（带有 Gearman[扩展](http://pecl.php.net/package/gearman)）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T09:42:58.073

As was suggested in the comments, having a shared FS is the (usual) way to implement this, and simply pass the path around in the job request from gearman. Gearman is not well-suited for passing around large blobs of data, as it has to keep all of the information for a job in memory. It was never designed for handling the transfer and distribution of large files. Since MogileFS was also initially developed at Danga, there simply was no need to also incorporate file transfer and handling in Gearman (and that's a good thing, there's quite a few technologies that solve that problem better than Gearman would ever do).

We're using NFS for handling distributed workers when videos arrive, and the encoder puts the encoded video back onto the NFS share that's available to the public when it's done. Haven't had a serious issue yet, NFS is stable and it's problems are well known and already solved for the kind of loads you'll see.

# javascript - 确保用户在继续之前完成给定的单词

> ID：11645203
> 
> 赞同：0
> 
> 时间：2012-07-25T08:01:30.913
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop

在我的拖放游戏中，字母被拖到网格中的单词上，目的是完成所有单词并显示背后的图像。用户通过单击“点击我！”来选择要拼写的单词。按钮。然后，这会使用名为“.spellword”的样式随机标记一个单词。

我需要它，以便字母从其他单词中恢复，而不是它们当前所在的单词 - 通过单击我按钮突出显示。

这是使按钮随机选择一个单词并赋予其“.spellword”样式的脚本。

```
 $('#pickNext').click(function() {
// remove the class from all td's
$('td').removeClass('spellword');
// pick a random word
rndWord = shuffledWords.sort(function() {
    return 0.8 - Math.random();
})[0];
// apply class to all cells containing a letter from that word
$('td[data-word="' + rndWord + '"]').addClass('spellword');
}); 
```

这是我已经应用到我的可拖动对象的还原...

```
$('.drag').draggable({

     helper: 'clone',
     snap: '.drop',
     grid: [60, 60],
     revert: function(droppable) {
         if (droppable === false) {
             return true;
         }

         else {

             return false;
         }
    }
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:46:33.213

[http://jsfiddle.net/bmgonzal/uu99V/](http://jsfiddle.net/bmgonzal/uu99V/)

这个小提琴将字母还原，除非它被放入要拼写的单词的第一个单元格并且是正确的字母。

我已经通过像这样创建变量**“validDrop”**来完成它..

```
var validDrop = $('.drop-box.spellword[data-letter='+ $(this).attr('data-letter') +']');
        validDrop.addClass('drop'); 
```

希望能帮助到你

# ruby-on-rails - OAuth2 RACK - 基于 Sinatra 和 Rails 应用程序？

> ID：11645212
> 
> 赞同：0
> 
> 时间：2012-07-25T08:01:56.737
> 
> 标签：ruby-on-rails, ruby, sinatra, oauth-2.0, rack

是否可以在 Rack 中实现一次 OAuth2 安全代码并同时在 Sinatra 和 Rails 应用程序上使用它？

我对 ruby​​ 开发相对较新，但在我看来，基于 Rack 的开发对于这种情况是有益的。

我目前是 sinatra 的粉丝，这就是我将用于我的 ruby​​ 开发的 Web 框架，但我喜欢按照最佳实践编写代码。

如果我想为我的所有 sinatra 应用程序和 Rails 应用程序开发共享的 OAuth2 代码，请告知。这在技术上可行吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:49:10.073

是的，以[Omniauth](https://github.com/intridea/omniauth/)为例。许多提供商，如 Facebook、Twitter 和 Google（通过[google-api-omniauth](http://rubygems.org/gems/google-api-omniauth)）使用 OAuth 2.0

# java - 连接到本地主机数据库

> ID：11645214
> 
> 赞同：0
> 
> 时间：2012-07-25T08:01:58.870
> 
> 标签：java, android, mysql, sql, database

我有一个关于数据库和安卓的小问题。我得到了这个代码：

```
sampleDB =  this.openOrCreateDatabase(SAMPLE_DB_NAME, MODE_PRIVATE, null);

            sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                    SAMPLE_TABLE_NAME +
                    " (LastName VARCHAR, FirstName VARCHAR," +
                    " Country VARCHAR, Age INT(3));");

            sampleDB.execSQL("INSERT INTO " +
                    SAMPLE_TABLE_NAME +
                    " Values ('Makam','Sai Geetha','India',25);"); 
```

并阅读：

```
if (c != null ) {
    if  (c.moveToFirst()) {
        do {
            String firstName = c.getString(c.getColumnIndex("FirstName"));
            int age = c.getInt(c.getColumnIndex("Age"));
            results.add("" + firstName + ",Age: " + age);
        }while (c.moveToNext());
    } 
} 
```

使用此代码，我创建并读取数据库，并在其中插入一些信息。并将其打印在屏幕上，这一切都有效:)

现在我无法弄清楚的部分：
我使用`myPHPadmin (with xampp)`,

我像在代码中一样制作了确切的数据库。

但是我该如何连接，所以我的代码会读取该数据库。

它现在是一个本地数据库`(127.0.0.1)`。

是否可以连接本地数据库？（如果是的话，你能告诉我怎么做吗）

您需要 PHP，还是可以在 (Android) Java 代码中完成所有操作？

我对数据库完全陌生，所以有时它让我感到困惑。

请把我引向好的方向。

如果您需要有关该问题的更多信息或其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:08:03.997

> 它现在是一个本地数据库（`127.0.0.1`）。

在 Android 中，您必须使用`10.0.2.2`or **System's Static IP**。

编写一个 PHP 脚本（您也可以使用其他，但 PHP 易于实现）来管理数据库并使用来自 Android 系统的 HTTP 协议运行此脚本。

这些教程可能会帮助您：

*   [循序渐进的方法访问来自 Andr 的 Web 服务](http://www.codeproject.com/Articles/112381/Step-by-Step-Method-to-Access-Webservice-from-Andr)

*   [Web 服务 - Android 的 XML-RPC 客户端](http://www.anddev.org/web_services_-_an_xml-rpc_client_for_android-t646.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:11:09.197

据我所知，没有适用于 android 的 MySQL 库。但是您可以使用 HttpPost 将数据发送到服务器端脚本（例如 PHP），然后以您可以在 Android 应用程序中解析的格式返回它。

这里有一个关于如何实现这一点的很好的教程：[http ://www.helloandroid.com/tutorials/connecting-mysql-database](http://www.helloandroid.com/tutorials/connecting-mysql-database)

这是 HttpPost 文档的链接：http: [//developer.android.com/reference/org/apache/http/client/methods/HttpPost.html](http://developer.android.com/reference/org/apache/http/client/methods/HttpPost.html)

希望这会有所帮助，这是让您开始在 Android 应用程序中与外部 MySQL 数据库通信的好方法。

# java - org.eclipse.jdt.core.refactoring.descriptors 包在哪里

> ID：11645215
> 
> 赞同：1
> 
> 时间：2012-07-25T08:02:01.970
> 
> 标签：java, eclipse, refactoring, eclipse-jdt

我想使用 org.eclipse.jdt.ui.refactoring.RenameSupport 类

```
RenameSupport renameSupport = RenameSupport.create(packageFragment, newName,
                    RenameSupport.UPDATE_REFERENCES); 
```

在这里我收到一个错误“*无法解析类型 org.eclipse.jdt.core.refactoring.descriptors.RenameJavaElementDescriptor。它是从所需的 .class 文件中间接引用的*”。看起来很奇怪。我认为它应该在同一个罐子里。帮助说 RenameJavaElementDescriptors 在包 org.eclipse.jdt.core.refactoring.descriptors 中声明。但我找不到这个包裹。我在哪里可以找到它？日食 3.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:07:44.040

您要查找的包位于**org.eclipse.jdt.core.manipulation**项目中。

# sql-server - 在 SQL Server 中查询最小值比查询所有行要长得多

> ID：11645223
> 
> 赞同：3
> 
> 时间：2012-07-25T08:02:51.597
> 
> 标签：sql-server, performance, aggregate-functions, sql-server-2012, database-partitioning

当我在包含大约一亿行的表中查询特定日期的最小 ID 时，我目前在我的数据库中遇到了一个奇怪的行为。查询很简单：

```
SELECT MIN(Id) FROM Connection WITH(NOLOCK) WHERE DateConnection = '2012-06-26' 
```

这个查询永远不会结束，至少我让它运行了几个小时。DateConnection 列不是索引，也不包含在其中。所以我会理解这个查询可以持续很长时间。但我尝试了以下在几秒钟内运行的查询：

```
SELECT Id FROM Connection WITH(NOLOCK) WHERE DateConnection = '2012-06-26' 
```

它返回 300k 行。

我的表定义如下：

```
CREATE TABLE [dbo].[Connection](  
    [Id] [bigint] IDENTITY(1,1) NOT NULL,  
    [DateConnection] [datetime] NOT NULL,  
    [TimeConnection] [time](7) NOT NULL,  
    [Hour]  AS (datepart(hour,[TimeConnection])) PERSISTED NOT NULL,  
    CONSTRAINT [PK_Connection] PRIMARY KEY CLUSTERED   
    (  
        [Hour] ASC,  
        [Id] ASC  
    )  
) 
```

它具有以下索引：

```
CREATE UNIQUE NONCLUSTERED INDEX [IX_Connection_Id] ON [dbo].[Connection]  
(  
    [Id] ASC  
)ON [PRIMARY] 
```

我发现使用这种奇怪行为的一种解决方案是使用以下代码。但在我看来，这样一个简单的查询有点沉重。

```
create table #TempId
(
    [Id] bigint
)
go

insert into #TempId
select id from partitionned_connection with(nolock) where dateconnection = '2012-06-26'

declare @displayId bigint
select @displayId = min(Id) from #CoIdTest

print @displayId 
go

drop table #TempId
go 
```

有没有人遇到过这种行为，它的原因是什么？最小聚合是扫描整个表吗？如果是这种情况，为什么简单的选择不呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T06:30:11.913

问题的根本原因是未对齐的非聚集索引，以及 Martin Smith[指出](https://stackoverflow.com/questions/11645223/querying-minimum-value-in-sql-server-is-a-lot-longer-than-querying-all-the-rows/11677589#comment15488029_11645223)的统计限制（有关详细信息，请参阅[他](https://stackoverflow.com/questions/7481818/sql-why-is-select-count-mincol-maxcol-faster-then-select-mincol-max/7482342#7482342)对另一个问题的回答）。

您的表`[Hour]`按照以下方式进行分区：

```
CREATE PARTITION FUNCTION PF (integer)
AS RANGE RIGHT
FOR VALUES (1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23);

CREATE PARTITION SCHEME PS
AS PARTITION PF ALL TO ([PRIMARY]);

-- Partitioned
CREATE TABLE dbo.Connection
(
    Id              bigint IDENTITY(1,1) NOT NULL,
    DateConnection  datetime NOT NULL,
    TimeConnection  time(7) NOT NULL,
    [Hour]  AS (DATEPART(HOUR, TimeConnection)) PERSISTED NOT NULL,

    CONSTRAINT [PK_Connection]
    PRIMARY KEY CLUSTERED
    (  
        [Hour] ASC,  
        [Id] ASC  
    )
    ON PS ([Hour])
);

-- Not partitioned
CREATE UNIQUE NONCLUSTERED INDEX [IX_Connection_Id]
ON dbo.Connection
(  
    Id ASC
)ON [PRIMARY];

-- Pretend there are lots of rows
UPDATE STATISTICS dbo.Connection WITH ROWCOUNT = 200000000, PAGECOUNT = 4000000; 
```

查询和执行计划是：

```
SELECT 
    MinID = MIN(c.Id)
FROM dbo.Connection AS c WITH (READUNCOMMITTED) 
WHERE
    c.DateConnection = '2012-06-26'; 
```

![选择的计划](../Images/d9dd2519bb45cf56f55331e44f1ffded.png)

优化器利用索引（ordered on `Id`）将`MIN`聚合转换为`TOP (1)`- 因为根据定义，最小值将是有序流中遇到的第一个值。（如果非聚集索引也被分区，优化器将不会选择此策略，因为所需的排序将丢失）。

稍微复杂的是，我们还需要在`WHERE`子句中应用谓词，这需要查找基表以获取`DateConnection`值。Martin 提到的统计限制解释了为什么优化器估计它只需要检查有序索引中的 119 行，然后才能找到`DateConnection`与`WHERE clause`. `DateConnection`和值之间隐藏的相关性`Id`意味着这个估计还有很长的路要走。

*如果您有兴趣*，Compute Scalar 会计算执行 Key Lookup 的分区。对于非聚集索引中的每一行，它计算一个表达式，如`[PtnId1000] = Scalar Operator(RangePartitionNew([dbo].[Connection].[Hour] as [c].[Hour],(1),(1),(2),(3),(4),(5),(6),(7),(8),(9),(10),(11),(12),(13),(14),(15),(16),(17),(18),(19),(20),(21),(22),(23)))`，并将其用作查找查找的前导键。嵌套循环连接上有预取（预读），但这需要是有序的预取，以保留`TOP (1)`优化所需的排序。

## 解决方案

`Id`我们可以通过找到每个`Hour`值的最小值，然后取每小时最小值中的最小值来避免统计限制（不使用查询提示） ：

```
-- Global minimum
SELECT 
    MinID = MIN(PerHour.MinId)
FROM 
(
    -- Local minimums (for each distinct hour value)
    SELECT 
        MinID = MIN(c.Id)
    FROM dbo.Connection AS c WITH(READUNCOMMITTED) 
    WHERE
        c.DateConnection = '2012-06-26' 
    GROUP BY
        c.[Hour]
) AS PerHour; 
```

执行计划是：

![系列计划](../Images/ad53ac53fbe4fc8a298ca3094d9d47b2.png)

如果启用了并行性，您将看到一个更像以下的计划，它使用并行索引扫描和多线程流聚合来更快地生成结果：

![平行计划](../Images/ef33516840c7130da37cefef3dd7646f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T21:46:31.733

尽管以不需要索引提示的方式解决问题可能是明智的，但快速的解决方案是：

```
SELECT MIN(Id) FROM Connection WITH(NOLOCK, INDEX(PK_Connection)) WHERE DateConnection = '2012-06-26' 
```

这会强制进行表扫描。

或者，试试这个，尽管它可能会产生同样的问题：

```
select top 1 Id
from Connection
WHERE DateConnection = '2012-06-26'
order by Id 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T08:29:31.933

找到最小值比浏览所有记录需要更长的时间，这是有道理的。找到未排序结构的最小值比遍历它一次需要更长的时间（未排序，因为 MIN() 没有利用标识列）。由于您使用的是标识列，因此您可以做的是有一个嵌套选择，您可以在其中从具有指定日期的记录集中获取第一条记录。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-26T20:33:55.933

NC 索引扫描在你的情况下是个问题。它使用唯一的非聚集索引扫描，然后对于每一亿行的行，它将遍历聚集索引，因此它会导致数百万的 io （通常说你的索引高度是 4那么它可能会导致 100,000,000*4 IO 的 +index 扫描非聚集索引叶页）。优化器必须选择这个索引以避免 strem 聚合得到最小值。要找到最小值有 3 种主要技术，一个是在我们想要 min 的列（如果有索引，这是有效的，在这种情况下，只要你得到它返回的行就不需要计算），第二个它可以使用散列聚合（但它通常发生在你有分组依据时）和第三个是流聚合在这里它将扫描所有合格的行并始终保持最小值并在扫描所有行时返回最小值..

然而，当没有 min 的查询使用聚集索引扫描时，它会很快，因为它必须读取更少的页面数，因此更少的 io。

现在的问题是为什么优化器会在非聚集索引上进行索引扫描。我确信这是为了避免流聚合中涉及的计算，以使用流聚合找到最小值，但在这种情况下，不使用流聚合的成本要高得多。这取决于估计，所以我猜表中的统计数据不是最新的。

所以首先检查你的统计数据是否是最新的。统计数据最后一次更新是什么时候？

因此要避免这个问题。请执行以下操作 1\. 首先更新表统计信息，我相信它必须解决您的问题。2.如果你不能使用update stats或者update stats没有改变计划并且仍然使用NC索引扫描，那么你可以强制聚集索引扫描，以便它使用更少的IO，然后使用流聚合来获得最小值。

# magento - Magento EE 1.12 中的慢速索引

> ID：11645225
> 
> 赞同：0
> 
> 时间：2012-07-25T08:02:58.757
> 
> 标签：magento, indexing

我们有 4000 种产品，4 家商店和大约 80 个类别。我们正在运行具有 SSD 的专用 DB 服务器，并遵循优化 DB 和 App Server 的白皮书。每个产品还有 12 个自定义选项。现在索引非常慢。有什么建议么。减少商店中的类别数量等会有什么不同吗？

问候，

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:13:18.643

Reduce Catalog price rules if in use Reduce all attributes not required for Search Index - the default Magento install includes attributes like "Tax Status" in the Search Index and then this is multiplied 4x for your multi stores Same can be said for URL rewrites - 4x increase

12 custom options per product ? Could common attributes be used instead ?

Run indexing from SSH rather than from the Magento admin In the web root in the shell/ folder you will find indexer.php php indexer.php --help will give you some options You can then time each of the nine indexes to see which is taking the most time which may help narrow the problem down By running from command line you can increase the php memory limit just for that one process which may improve results

I set up a cron job to re-index the site in off peak times and in Magento admin, change to Manual Update only

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:10:15.423

使用多存储设置时，索引会显着减慢。在我们的一台服务器上，单个商店设置中的 3000 种产品需要大约 60 秒来索引所有内容。但是多商店设置（7 家商店）中的 3000 种产品可能需要长达 10 分钟。我们将其设置为仅手动索引。您可以将索引设置为在 cron 上运行，这可能会对您有所帮助。（在服务器上投入更多资源显然也会有所帮助）。

# windows - 选择编号最高的文件 - 批处理文件

> ID：11645226
> 
> 赞同：9
> 
> 时间：2012-07-25T08:03:00.737
> 
> 标签：windows, batch-file

我有一个充满 .jar 文件的目录，逐步命名如下：

```
 version-1.jar
 version-2.jar
 version-3.jar 
```

我正在尝试选择编号最高的文件。有什么真正简单的方法吗？因为doing`.\version*.jar`导致错误，大概是由于多个文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T08:09:59.213

我们需要延迟扩张

```
setlocal enabledelayedexpansion 
```

只是最大值的一个变量：

```
set max=0 
```

然后遍历文件：

```
for %%x in (version-*.jar) do ( 
```

我们需要不带扩展名的文件名

```
 set "FN=%%~nx" 
```

并`version-`从一开始就删除：

```
 set "FN=!FN:version-=!" 
```

现在`FN`应该只包含数字，我们可以比较：

```
 if !FN! GTR !max! set max=!FN!
) 
```

我们完成了：

```
echo highest version: version-%max%.jar 
```

完整的批处理文件：

```
@echo off
setlocal enabledelayedexpansion
set max=0
for %%x in (version-*.jar) do (
  set "FN=%%~nx"
  set "FN=!FN:version-=!"
  if !FN! GTR !max! set max=!FN!
)
echo highest version: version-%max%.jar 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T15:25:00.580

这是一个比 Joey 的代码稍微简单的版本。

```
@echo off
setlocal enableDelayedExpansion
set max=0
for /f "tokens=1* delims=-.0" %%A in ('dir /b /a-d version-*.jar') do if %%B gtr !max! set max=%%B
echo higest version: version-%max%.jar 
```

只要版本号从不为 0（零），即使版本号前缀为零，此代码也将起作用。指定 tokens=1* 并包含 0 作为分隔符会导致从版本号中去除前导零，同时保留第一个非零数字之后的所有零。

如果所有版本都为零前缀为恒定宽度，则有一个更简单的解决方案。但是这个解决方案在有和没有零前缀的情况下都有效。

如果出现前导零，Joey 的代码将失败，因为这表示八进制表示法。带有前导零的无效八进制数字将被视为字符串，导致比较给出错误结果。这可能不是问题，因为原始问题暗示不存在前导零。但安全总比后悔好。

# java - 在课堂外刷新可绘制背景

> ID：11645228
> 
> 赞同：0
> 
> 时间：2012-07-25T08:03:17.247
> 
> 标签：java, android, eclipse, drawable

我一直在修改游戏的代码，以包含一个功能，用户可以在手机上选择自己的图像作为背景。我正在使用的当前文件中有两个类称为`GameActivity`和`GameView`。我有一个活动，`GameActivity`可以打开手机的图库，并让用户在屏幕上按下按钮后选择图像。然后假设图像的位置作为`Drawable`对象的路径传递。该`setBackgroundDrawable()`函数是`View`类（`GameView`扩展）的一部分，因此我无法在 Activity Result 函数中直接访问它以进行图像选择。原件`setBackgroundDrawable()`是`GameView's`构造函数的一部分。

这是构造函数：

```
public GameView(Context context, AttributeSet attrs) {
    super(context, attrs);
    requestFocus();

    mDrawableBg = getResources().getDrawable(R.drawable.lib_bg);        //Mod 1

    setBackgroundDrawable(mDrawableBg);

    mBmpPlayer1 = getResBitmap(R.drawable.lib_cross);
    mBmpPlayer2 = getResBitmap(R.drawable.lib_circle);

    if (mBmpPlayer1 != null) {
        mSrcRect.set(0, 0, mBmpPlayer1.getWidth() -1, mBmpPlayer1.getHeight() - 1);
    }

    mBmpPaint = new Paint(Paint.ANTI_ALIAS_FLAG);

    mLinePaint = new Paint();
    mLinePaint.setColor(0xFFFFFFFF);
    mLinePaint.setStrokeWidth(5);
    mLinePaint.setStyle(Style.STROKE);

    mWinPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
    mWinPaint.setColor(0xFFFF0000);
    mWinPaint.setStrokeWidth(10);
    mWinPaint.setStyle(Style.STROKE);

    for (int i = 0; i < mData.length; i++) {
        mData[i] = State.EMPTY;
    }

    if (isInEditMode()) {
        // In edit mode (e.g. in the Eclipse ADT graphical layout editor)
        // we'll use some random data to display the state.
        Random rnd = new Random();
        for (int i = 0; i < mData.length; i++) {
            mData[i] = State.fromInt(rnd.nextInt(3));
        }
    }
} 
```

有什么办法可以调整背景`GameActivity`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:26:35.073

是的，在 GameActivity 类中创建一个 set 方法来设置 mDrawableBg。

```
public void setBackground(URL url){
GameViewClassInstance.mDrawableBg = url
} 
```

# grails - 如何使用 config.groovy 中定义的属性初始化域类的变量

> ID：11645230
> 
> 赞同：3
> 
> 时间：2012-07-25T08:03:17.903
> 
> 标签：grails, groovy, grails-2.0

我在 Config.groovy 中定义了一个变量，如下所示

```
environments {
    development {
        training.defaultStartTime = "09:00"

    }
    production {
        training.defaultStartTime = "09:00"
    }
} 
```

现在**我想使用 grailsApplication.config .defaultStartTime 在我的域类中初始化变量 startTime**。我正在做如下

```
class Training {
    def grailsApplication
    String startTime = grailsApplication.config.training.defaultStartTime
} 
```

但是出现错误

> *“由 BeanCreationException 引起：创建名为 'sessionFactory' 的 bean 时出错：调用 init 方法失败；嵌套异常是 org.hibernate.InstantiationException：无法实例化测试对象 com.Training”*

**使用config.groovy（grailsapplication）中定义的属性初始化域类变量的最佳方法是什么**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T08:41:40.407

问题在于注入的工作方式。bean（如果是域类实例）是使用其默认构造函数创建的，然后将 DI 字段设置为相应的 bean。但是该`startTime`字段是在构造函数中初始化的——在 DI 发生之前——所以`grailsApplication`是 null。

一种解决方法是创建一个自定义构造函数 -有关详细信息，请参阅[http://burtbeckwith.com/blog/?p=1003](http://burtbeckwith.com/blog/?p=1003)

# php - 将 301 Apache 重定向到新站点 - 文件夹

> ID：11645232
> 
> 赞同：0
> 
> 时间：2012-07-25T08:03:27.463
> 
> 标签：php, apache, .htaccess, redirect

我不想重定向

```
www.site123.com/images/folder01/img01.jpg 
```

到

```
www.site456.com/images/folder02/img01.jpg 
```

我想将文件夹分别重定向到文件夹。每个文件夹一行。

进入：

```
www.site123.com/images/folder01/sub01/sub02/999.xyz 
```

应重定向 (301) 到：

```
www.site456.com/images/folder01/sub01/sub02/999.xyz 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:15:38.500

由于从 site123 到 site456 的目录结构看起来相同，您是否尝试过以下全局重定向？

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule (.*) http://www.site456.com/$1 [R=301,L] 
```

* * *

如果目录/特定然后将您的规则更改为如下所示：

```
RewriteRule ^/folder/(.*) http://www.site456.com/folder/$1 [R=301,L] 
```

如果您也想要子文件夹：

```
RewriteRule ^Images/?(.*) http://www.site456.com/Images/$1 [R=301,L] 
```

为您希望匹配的每个模式创建一行并更改相应的重定向 URL/文件夹路径。通过重写，有时也需要反复试验，因此请尝试一下，然后根据需要进行调整。

# css - 字体家族：继承；特定于 Mozilla firefox

> ID：11645238
> 
> 赞同：0
> 
> 时间：2012-07-25T08:03:59.783
> 
> 标签：css, firefox

如果我的CSS是：

```
font-family: inherit; 
```

是否有任何 Mozilla firefox 特定属性为：

```
-moz-border-radius-bottomright: 20px; 
```

哪个只能用于 Mozilla 浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:09:16.160

没有 Firefox 特定的编写方式`font-family: inherit;`。[Mozilla 支持](https://developer.mozilla.org/en/CSS/inherit)像任何其他浏览器一样继承，如果这就是你的意思吗？

供应商前缀属性（如用于某些 CSS3 属性的属性）仅用于仍处于“实验性”或不断发展的属性。该`inherit`关键字已经存在了很长时间，因此 Firefox 与任何其他浏览器一样，按照 CSS 规范规定的方式实现它，没有供应商前缀。

如果您只想针对具有某些特定 CSS 的 Firefox，[此 SO 答案](https://stackoverflow.com/questions/952861/targeting-only-firefox-with-css)指出您可以使用[`@-moz-document`](https://developer.mozilla.org/en/CSS/@-moz-document)规则包装 Mozilla 特定属性。由于只有 Mozilla 将其识别为有效的 CSS，所有其他浏览器都会忽略它。也许有点“hacky”，但这听起来像是你最好的选择。

**编辑：**

要仅针对具有特定 CSS 的 IE，一种方法是将其放在特定于 IE 的样式表文件中，然后对 IE 使用条件注释。除 IE 之外的所有浏览器都会将此视为 HTML 注释，因此忽略它，但 IE 将在该文件中应用样式。

```
<!--[if IE]>
<link rel="stylesheet" href="ie.css" type="text/css" />
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:09:42.947

我知道您可以仅针对 Firefox 执行此操作，唯一的问题是它不在 CSS 中，我不确定是否有办法在 CSS 中为 font-family 执行此操作。

```
<html>
...
<head>
    <style type="text/css">
    @-moz-document url-prefix() {
        font-family: inherit;
    }
    </style>
</head>
...
</html> 
```

# c# - 带有图像的 RadioButtonList 在回发时抛出 XXS 错误

> ID：11645245
> 
> 赞同：0
> 
> 时间：2012-07-25T08:04:12.543
> 
> 标签：c#, asp.net, .net, radio-button

我设法通过以下代码将图像添加到单选按钮

```
themeRadioButtonList.Items.Add(
    new ListItem(String.Format("<img src='ThemeImages/blue.png'>","fsd")));
themeRadioButtonList.Items.Add(
    new ListItem(String.Format("<img src='ThemeImages/green.png'>")));
themeRadioButtonList.Items.Add(
    new ListItem(String.Format("<img src='ThemeImages/red.png'>"))); 
```

工作正常。然而，由于 html 提供了跨侧脚本警报。无论如何围绕这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:13:55.447

你可以尝试：

```
themeRadioButtonList.Items.Add(
    new ListItem(String.Format("<img src='{0}'>", "ThemeImages/blue.png") ,"fsd"));

themeRadioButtonList.Items.Add(
    new ListItem(String.Format("<img src='{0}'>", "ThemeImages/green.png") ));

themeRadioButtonList.Items.Add(
    new ListItem(String.Format("<img src='{0}'>", "ThemeImages/red.png") )); 
```

# sql-server - 将 JIRA 连接到 SQL Server 2008

> ID：11645252
> 
> 赞同：2
> 
> 时间：2012-07-25T08:04:38.297
> 
> 标签：sql-server, jira

我正在尝试将 Jira 连接到外部数据库。主要目标是从 Visual Studio 连接到 Jira 的数据库。

[当我完成 JIRA 演练 ( https://confluence.atlassian.com/display/JIRA/Connecting+JIRA+to+SQL+Server+2008](https://confluence.atlassian.com/display/JIRA/Connecting+JIRA+to+SQL+Server+2008) )中的整个步骤序列时，我在浏览器窗口中收到以下消息：

> 糟糕 - 发生错误
> 系统错误
> 原因：
> com.google.common.util.concurrent.UncheckedExecutionException: java.lang.NullPointerException。

之后有堆栈跟踪、构建信息、服务器信息等（完整报告在我的 goo-docs 上：[https](https://docs.google.com/open?id=0BwJaBRG-2a9gNGNwY2ZESlMzT0E) ://docs.google.com/open?id=0BwJaBRG-2a9gNGNwY2ZESlMzT0E ）

我在谷歌搜索过，但没有找到任何相关的东西。

我还尝试将 Jira 连接到 MySQL 5.5，并尝试在另一台机器上进行（使用 win 7），结果完全相同。这是我正在遵循的过程：

1.  在 SQL Server Management Studio 中创建数据库“jiradb”
2.  创建登录名“jiradbuser”，禁用密码策略，将默认数据库设置为“jiradb”，设置用户映射，如文档中所示：jiradbuser 具有角色：public、db_owner
3.  在服务器上启用 tcp/ip
4.  在服务器上设置混合身份验证
5.  使用 Jira 配置工具配置 Jira，测试连接（成功）。

此外，我安装了新的 Jira 副本并在安装时设置了 SQL Server 2008 数据库（而不是内部 hsql db），没有效果，与 mySQL 一样。

我的系统设置：

*   赢xp sp3
*   吉拉 5.1

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:43:34.747

好的，这个问题解决了。原因是 MS SQL 数据库的自定义错误。例如，我为新用户设置默认数据库 - jiradb，但需要 master。另外，用户映射中不应该有角色db_owner，应该是datareader和datawriter。我很乐意帮助任何需要有关此问题的更多信息的人

# iphone - iOS 动态表 - 将数据分类为行和部分

> ID：11645253
> 
> 赞同：0
> 
> 时间：2012-07-25T08:04:43.427
> 
> 标签：iphone, ios, dynamic, uitableview

我已经有一个字典数组（用于贷款项目），示例如下：

```
(
    {
    BIBNo = 291054;
    date = "10/08/2012";
    itemSequence = 000010;
    name = "iPhone application development for IOS 4 / Duncan Campbell.";
    noOfRenewal = 1;
    number = 000291054;
    status = "Normal Loan";
    time = "24:00";
    type = Loans;
},
    {
    BIBNo = 187883;
    date = "13/08/2012";
    itemSequence = 000010;
    name = "Positive thinking / Susan Quilliam.";
    noOfRenewal = 2;
    number = 000187899;
    status = "Normal Loan";
    time = "24:00";
    type = Loans;
},
    {
    BIBNo = 290408;
    date = "13/08/2012";
    itemSequence = 000010;
    name = "Sams teach yourself iPhone application development in 24 hours / John Ray.";
    noOfRenewal = 1;
    number = 000290408;
    status = "Normal Loan";
    time = "24:00";
    type = Loans;
}) 
```

现在我需要将它们插入到表格中，日期作为部分，行根据日期分类到部分中。我已经阅读了许多教程，但是，大多数教程只使用部分和行的静态硬代码，看起来像这样：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
if (section == 0){
    return 1;
}
else if (section == 1){
    return 5;
} } 
```

因为贷款项目数组是动态的，所以我不能硬编码行或部分来返回某些值。任何人都可以向我强调我应该如何继续，以便我可以返回动态值？如果可能，示例将不胜感激！谢谢大家:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:12:54.757

在这种情况下，我编写了一个 NSOperation 按日期过滤项目（一个字典，其键是日期，每个值是一个项目数组）然后您将通过获取字典 allkeys 数组来获取部分，对于每个部分，您将获得行数组使用 objectForKey 和日期。

要进行过滤，您可以使用许多方法，例如使用 NSPredicate ...

当 NSOperation 完成并且代码收到字典准备就绪的通知时，您调用 reloadData 并且您可以根据需要组织表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:25:26.753

我假设您有一个可变字典数组，根据您的问题中显示的数据，例如：arrayOfMydata

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
   return 8;

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView  
 {
     return [arrayOfMydata count];

 }

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{

     NSDictionary *tempDictionary  =  [arrayOfMydata objectAtIndex:section];
     NSString *sectionString       =  [tempDictionary objectForKey:@"date"];
     return sectionString;
 } 
```

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:42:59.353

以下代码供您参考。这`array`是您发布的数组，`mutDic`是@Esses77 提到的字典

```
NSArray *array;

NSMutableArray *dateArr = [NSMutableArray array];

// dateArr is used to collect all the date in your array
for (NSDictionary *dic in array) {
    [dateArr addObject:[dic valueForKey:@"date"]];
}

//the following code is used to remove all the duplicate date
NSArray *copy = [dateArr copy];

NSInteger index = [copy count] - 1;

for (id object in [copy reverseObjectEnumerator])
{

    if ([dateArr indexOfObject:object inRange:NSMakeRange(0, index)] != NSNotFound)

    {
        [dateArr removeObjectAtIndex:index];

    }

    index--;
}

//group all the dictionaries with the same date in mutDic. and key is the date, object is the array of dictionaries with the same date
NSMutableDictionary *mutDic = [NSMutableDictionary dictionary];

for (NSString *date in dateArr) {

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"date like %@", date];

    [mutDic setValue:[array filteredArrayUsingPredicate:predicate] forKey:date];

 } 
```

您的部分数是 mutDic 中的键数，行数是相应的对象（它是一个数组）.count。

# php - Couchdb 多个附件

> ID：11645254
> 
> 赞同：0
> 
> 时间：2012-07-25T08:04:45.780
> 
> 标签：php, couchdb

我正在使用“PHP On Couch”插件通过 php 访问 couchDB。而且我不知道如何在文档中添加多个附件

```
$client = new couchClient($couch_dsn,$couch_db);
$doc = $client->getDoc('meantime');

$res1 = $client->storeAttachment($doc,'files/file1.html','text/html', 'file1.html');
$res2 = $client->storeAttachment($doc,'files/file2.html','text/html', 'file2.html'); 
```

只有一个附件与文档相关联，而第二个则没有？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:03:35.893

每次附加文件时revision id都会更改，因此第二次出现文档更新冲突，调试将帮助您解决问题的响应

# c - 用于服务器侦听功能的 C 中的测试单元。避免监听阻塞呼叫

> ID：11645257
> 
> 赞同：0
> 
> 时间：2012-07-25T08:04:53.120
> 
> 标签：c, unit-testing, sockets, portability, signal-handling

我正在为名为 pkg_getclient () 的函数编写一个测试单元。基本上，它是一个为客户端无限监听的函数。
这是实现： [http](http://slexy.org/view/s21RBuOUOu) ://slexy.org/view/s21RBuOUOu （粘贴在那里以保持问题文本大小合理）

这是客户端-服务器测试的示例： http: [//slexy.org/view/s2fS5hBkgI](http://slexy.org/view/s2fS5hBkgI)

这是我的单元测试的当前状态：

```
int test_pkg_getclient (char* portname) {
int netfd;
struct pkg_conn *result;
netfd = pkg_permserver(portname, "tcp", 0, 0);

/* validate_port(port); */
printf("TESTING PKG_GETCLIENT...\n");

result = pkg_getclient(netfd,callbacks, NULL, 0);

printf("TESTING VALID FILE DESCRIPTOR\n");
if (result  == PKC_ERROR)  {printf ("\t[ FAILED ]\n");
} else  { printf ("\t[ PASSED ]\n");
}
return 0;
}

int main (int argc, char* argv[]) {
test_pkg_getclient(argv[1]);
printf("%d",argc);
return 0;
} 
```

我需要中断 pkg_getclient() 阻塞调用。它还需要移植到 Windows，而不仅仅是基于 unix 的系统。我无法修改 pkg_getclient() 函数。阻塞函数*在*getclient() 内部。

有没有办法使用信号处理来中断阻塞调用？或者有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:55:09.560

老实说，我不认为这真的有资格作为*单元测试*，因为您还涉及整个网络堆栈。

我建议采用不同的测试策略：更改您的代码，使其允许[Dependency Injection](http://en.wikipedia.org/wiki/Dependency_injection)。也就是说，应该可以**在运行时**将引用传递给网络堆栈以供使用。对于生产代码，您当然会使用真实的代码，但出于单元测试的目的，您使用模拟堆栈来实现覆盖您想要测试的内容所需的最小行为。

如果你想让你的测试也延伸到真正的网络堆栈（在这种情况下，我们处理*集成*而不是*单元*测试）我个人发现创建小程序并通过更高级别的脚本将它们粘合在一起更简单（bash ，蟒蛇等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:21:57.333

首先，您可能想在调用*之前*调用[fork(2)](http://linux.die.net/man/2/fork) （假设 pkg_getclient 被阻塞）。其次，我不会使用阻塞调用，而是使用非阻塞套接字或[select(2)](http://linux.die.net/man/2/select)。*`pkg_getclient`*

 *至于可移植性，fork() 和 pthread 可以跨大多数 unice 移植。至于Windows，它有pthreads 的实现，但只有fork() 的模拟（例如Cygwin 实现了这个）。*

# c - C中没有足够的内存错误

> ID：11645264
> 
> 赞同：0
> 
> 时间：2012-07-25T08:05:14.797
> 
> 标签：c, memory, file-io

我对 C 很陌生。我在 C 中创建了一个文件。但是当我尝试在代码下面运行时，我收到内存不足错误。我无法理解这个问题。我清除了我的临时文件夹，但仍然存在错误。请提供任何帮助。

```
File *logfile;
logfile = fopen ("sample.txt","a+");
printf("\n logfile=%d\n",logfile);
if (!logfile)
 {
  perror("Error");
  exit(EXIT_FAILURE);
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T08:12:32.427

您应该始终要求您的编译器向您提供所有可能的警告。这`gcc`意味着将`-Wall -Wextra`选项传递给`gcc`编译器。

如果你这样做了，你的编译器会发现很多错误（通过发出警告或错误消息）：

1.  您缺少`#include <stdio.h>`指令
2.  您应该声明`FILE* logfile;`not`File *logfile;`标识符中的案例很重要。
3.  您的调用`printf`是错误的，因为不是`logfile`格式说明符想要的。它是一个指针（指向一个抽象数据结构），所以如果你想要它，请使用. 请注意，您不会从其地址中对-ed句柄了解太多（对您而言唯一重要的是结果是否为is ）。`int``%d``printf``%p``fopen``FILE*``fopen``NULL`

一般建议是改进您的源代码，直到您不再收到来自编译器的警告。

您还应该学习使用调试器（如`gdb`）。然后使用调试信息进行编译，例如`gcc -Wall -Wextra -g yoursource.c -o yourprog`

如果您使用的是 Linux 系统（在该系统上`gcc`和`gdb`是非常常用的工具），`valgrind`和`strace`实用 `ltrace`程序通常很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:08:28.557

`logfile`应该是类型`FILE *`- 更改：

```
File *logfile; 
```

至：

```
FILE *logfile; 
```

并改变：

```
printf("\n logfile=%d\n",logfile); 
```

至：

```
printf("\n logfile=%p\n",logfile); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:33:27.917

我假设您实际上想要输出文件的内容，但如果您真的想查看指针，Paul R 的帖子可能更适合您。话虽如此，我已经有一段时间没有用 C 语言做了这个了，但我认为你会想要一些类似的东西：

```
#include <stdio.h>
#include <stdlib.h>

#define BUFFER 1000

int main(void)
{
  FILE *logfile = fopen("sample.txt", "r");
  char buffer[BUFFER];

  if (!logfile)
  {
    printf("Error\n");
    exit(EXIT_FAILURE);
  }

  while (fgets(buffer, BUFFER, logfile) != NULL)
  {
    printf("%s", buffer);
  }

  printf("\n");
  fclose(logfile);

  return 0;
} 
```

# ruby - 红宝石中3位数字的最高回文

> ID：11645265
> 
> 赞同：-1
> 
> 时间：2012-07-25T08:05:16.693
> 
> 标签：ruby

我想找到红宝石中三位数字乘积的最高回文数。基本的伪代码将是：

从 999 开始，下降到 100

将每个数字相乘

如果数字的反面与数字相同，则停止。

这是我写的 ruby​​ 代码，似乎不起作用，有什么问题

```
start = 100; stop = 999;
stop.downto(start) do |i|
  stop.downto(start) do |j|
    nm = i*j
    nms = nm.to_s
    if nms == nms.reverse
      puts nms
    end
    break
  end
end 
```

**更新**

感谢大家指出漏洞。以下是我想出的，它的工作原理：

```
def top_down_palin
  maxi = -999
  arr = []
  start = 100; stop = 999;
  stop.downto(start) do |i|
    i.downto(start) do |j|
      nm = i*j
      nms = nm.to_s
      if nms == nms.reverse
        if nm > maxi
          maxi = nm
        end
      end
    end
  end
  puts maxi
end 
```

对我来说，自上而下似乎比自下而上（塞尔吉奥的方法）更快，因此我做了时间分析：

```
def time
  start = Time.now
  yield
  puts Time.now - start
end 
```

在我的系统上，自上而下的方法需要**0.614742 秒**，而自下而上的方法需要**0.839568 秒**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T08:15:05.393

您的代码不一定找到最大的数字。您需要找到它们，然后选择最大的。这是我的看法。它似乎工作:)

```
from = 100
to = 999

highest = (from..to).map do |i|
  (i..to).map do |j|
    i * j
  end.select{|n| n.to_s == n.to_s.reverse}
end.flatten.max

highest # => 906609 
```

此代码还避免了重复比较（`10*100`并且`100*10`是多余的）。

## 更新：

您的代码的问题是`break`只会破坏内部循环。它不会破坏外部的。例如，您可以从中创建一个函数并使用`return`.

```
def find_highest_palindrome start, stop
  stop.downto(start) do |i|
    stop.downto(start) do |j|
      nm = i*j
      nms = nm.to_s
      if nms == nms.reverse
        puts "i: #{i}, j: #{j}, nms: #{nms}"
        return nms
      end
    end
  end
end

find_highest_palindrome 100, 999 # => "580085"
# >> i: 995, j: 583, nms: 580085 
```

这并不能改变逻辑有缺陷的事实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T08:45:13.447

上面的答案很好，但我只需要加入我的单线；）

```
res=0; [*100..999].combination(2).each{|x,y| n=x*y; res=n if n.to_s == n.to_s.reverse and n>res } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T09:23:14.313

这是另一个版本，但它将所有数字保留在内存中：

```
[*100..999].combination(2).map { |x, y| x * y }.max_by do |n| 
  n.to_s == n.to_s.reverse ? n.to_i : -Float::INFINITY 
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T08:14:21.383

请澄清什么不起作用？通过包含 break 你只是在第一场比赛结束，那么为什么不添加到一个数组然后打印最大值呢？

```
start = 100; stop = 999;
arr = []
stop.downto(start) do |i|
  stop.downto(start) do |j|
    nm = i*j
    nms = nm.to_s
    if nms == nms.reverse
      arr << nms
    end
  end
end
puts arr.max 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T14:42:27.010

或者，以更红宝石的方式

```
(100..999).to_a.combination(2).map{|a,b| a*b}.select{|x| x.to_s==x.to_s.reverse}.max 
```

一个优化是在选择之后移动地图，因为地图返回一个数组而不是一个枚举器

```
(100..999).to_a.combination(2).select{|a,b| (a*b).to_s==(a*b).to_s.reverse}.map{|a,b| a*b}.max 
```

# kotlin - Kotlin 中的 Java 注释参数

> ID：11645266
> 
> 赞同：10
> 
> 时间：2012-07-25T08:05:17.167
> 
> 标签：kotlin

我正在尝试使用 Kotlin，并且我有以下 Java 注释

```
@Target( { TYPE })
@Retention(RUNTIME)
public @interface View {
    String[] url() default "";
    Class<? extends Component> parent() default Component.class;
} 
```

在Java代码中，它以下列方式使用

```
@View(url="/", parent=RootView.class)
public class FrontView extends Component {
} 
```

这在 Kotlin 中是如何表达的？我试过了

```
[View(url=Array<String>("/"), parent=Class<RootView>)]
class FrontView : Component() {
} 
```

但它不编译。我只收到类型不匹配错误。

```
Type mismatch.  
Required: jet.Array<jet.String?>?  
Found: jet.Array<T> 
```

和

```
Type mismatch
Required: java.lang.Class<out net.contextfw.web.application.component.Component?>?
Found: java.lang.Class<T> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T11:25:59.440

我找到了解决方案。语法似乎是这样的：

```
[View(url=array("/"), parent=javaClass<RootView>())]
class FrontView() : Component() {
} 
```

# c# - 如何订购/反转 xml 数据或在转发器中？

> ID：11645268
> 
> 赞同：1
> 
> 时间：2012-07-25T08:05:32.207
> 
> 标签：c#, asp.net, xml, dataset, repeater

我一直在尝试找出如何简单地反转我从 xml 获得的数据/按日期排序，或者我是否可以使用转发器来做到这一点，它将它们呈现在页面上。

所以这就是我所拥有的：

只需**页面读取一个 xml** ...

```
if (!Page.IsPostBack)
        {
            DataSet messages = new DataSet();
            try
            {
                messages.ReadXml(MapPath("~/_xml/messages.xml"));
                myMessages.DataSource = messages;
                myMessages.DataBind();
            } 
```

...并将日期放入数据集中。

在页面上，**转发器呈现数据**......

```
<asp:Repeater ID="myMessages" runat="server">
                <HeaderTemplate>
                    <table border="0">
                </HeaderTemplate>
                <ItemTemplate>
                    <div class="message">
                        <div class="messageHeader">
                            <span><p><b><%# DataBinder.Eval(Container.DataItem, "name") %></b> wrote <%# DataBinder.Eval(Container.DataItem, "date") %>:</p></span>
                        </div>
                        <div class="splitLine"></div>
                        <br />
                        <div class="messageText">
                            <span><p><%# DataBinder.Eval(Container.DataItem, "message") %></p></span>
                        </div>
                    </div>
                </ItemTemplate>
                <FooterTemplate>
                    </Table>
                </FooterTemplate>
            </asp:Repeater> 
```

也许也可以以不同的顺序写入数据，例如不将新条目放在文件末尾，而是将它们放在开头。但我认为这并不是真正的解决方案。

所以这就是我**将数据写入 xml 的**方式：

```
var file = Server.MapPath("~/_xml/messages.xml");

var message = new XElement("contact",
new XElement("Name", s_name.Trim()),
new XElement("message", s_message.Trim()),
new XElement("date", DateTime.Now.ToString()));
var doc = new XDocument();

if (ckeckFileExistance(file))
{
     doc = XDocument.Load(file);
     doc.Element("messages").Add(message);
}
else
{
     doc = new XDocument(new XElement("messages", message));
}
doc.Save(file); 
```

It's a quick and small project. It should be **as simple as possible**. And again. What I want to do is to **make the newest entries appear on the top of the page**. *Now they appear on the bottom*. Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:09:41.903

```
XDocument messages = XDocument.Load(MapPath("~/_xml/messages.xml"));
myMessages.DataSource = 
    messages.Elements("messages")
    .Elements("contact")
    .OrderByDescending(m => DateTime.Parse(m.Element("date").Value))
myMessages.DataBind(); 
```

and change the repeater bindings to

```
<%# DataBinder.Eval(((XElement)Container.DataItem).Element("date"), "Value")%> 
```

etc

# oracle - 通过 getNamedQuery 休眠时调用 oracle 过程错误

> ID：11645269
> 
> 赞同：1
> 
> 时间：2012-07-25T08:05:38.260
> 
> 标签：oracle, hibernate, stored-procedures

使用休眠调用过程时出现以下异常

```
Exception in thread "main" org.hibernate.MappingException: Named query not known: loadUserByRank
    at org.hibernate.impl.AbstractSessionImpl.getNamedQuery(AbstractSessionImpl.java:70)
    at org.hibernate.impl.SessionImpl.getNamedQuery(SessionImpl.java:1260)
    at dto.TestHB.main(TestHB.java:22) 
```

以下是 Oracle 程序：

```
create or replace procedure SELECT_USERS_BY_RANK
(
    OUT_RESULT out SYS_REFCURSOR,
    IN_RANK in int
) as
begin
    open OUT_RESULT for
    select
        u.user_id as user_id,
        u.name as name,
        u.rank as rank
    from
        AppUser u
    where
        u.rank >= IN_RANK;
end; 
```

映射配置代码：

```
<sql-query name="loadUserByRank" callable="true">
    <return class="core.AppUser">
        <return-property name="id" column="USER_ID"/>
        <return-property name="name" column="NAME"/>
        <return-property name="rank" column="RANK"/>
    </return>
    { call SELECT_USERS_BY_RANK(?, :rank) }
</sql-query> 
```

执行代码

```
Query query = session.getNamedQuery("selectAllEmployees_SP"); 
```

# android - 获取用户地理点

> ID：11645273
> 
> 赞同：1
> 
> 时间：2012-07-25T08:05:48.833
> 
> 标签：android

我正在尝试使用此代码获取用户地理点

```
LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

        LocationListener locationListener = new LocationListener() {
            public void onLocationChanged(Location location) {
               GeoPoint test = new GeoPoint((int)location.getLatitude()*1000000, (int)location.getAltitude()*1000000);
               MapView mapview = (MapView) findViewById(R.id.mvmap);
               MapController mapcontrol = mapview.getController();
               mapcontrol.animateTo(test);
               mapview.setStreetView(true);
               mapview.setSatellite(true);
                mapview.setBuiltInZoomControls(true);
            }

            public void onProviderDisabled(String provider) {
                // TODO Auto-generated method stub

            }

            public void onProviderEnabled(String provider) {
                // TODO Auto-generated method stub

            }

            public void onStatusChanged(String provider, int status, Bundle extras) {
                // TODO Auto-generated method stub

            }
        };
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener); 
```

但我收到一个这样的错误。

```
 07-25 16:02:42.525: E/AndroidRuntime(7262): FATAL EXCEPTION: main
07-25 16:02:42.525: E/AndroidRuntime(7262): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.frux.kfcmobile/com.frux.kfcmobile.MapViewActivity}: java.lang.IllegalArgumentException: requested provider network doesn't exisit
07-25 16:02:42.525: E/AndroidRuntime(7262):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at android.os.Looper.loop(Looper.java:137)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at android.app.ActivityThread.main(ActivityThread.java:4745)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at java.lang.reflect.Method.invokeNative(Native Method)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at java.lang.reflect.Method.invoke(Method.java:511)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at dalvik.system.NativeStart.main(Native Method)
07-25 16:02:42.525: E/AndroidRuntime(7262): Caused by: java.lang.IllegalArgumentException: requested provider network doesn't exisit
07-25 16:02:42.525: E/AndroidRuntime(7262):     at android.os.Parcel.readException(Parcel.java:1429)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at android.os.Parcel.readException(Parcel.java:1379)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at android.location.ILocationManager$Stub$Proxy.requestLocationUpdates(ILocationManager.java:646)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at android.location.LocationManager._requestLocationUpdates(LocationManager.java:660)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at android.location.LocationManager.requestLocationUpdates(LocationManager.java:482)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at com.frux.kfcmobile.MapViewActivity.onCreate(MapViewActivity.java:56)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at android.app.Activity.performCreate(Activity.java:5008)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
07-25 16:02:42.525: E/AndroidRuntime(7262):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
07-25 16:02:42.525: E/AndroidRuntime(7262):     ... 11 more 
```

任何人都可以找出导致错误的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:20:50.990

看来您正在使用模拟器进行测试，如果是，您在这里遇到异常。

```
 locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener); 
```

我不认为你不能在模拟器上测试网络提供商。你可以像这样用 gps 测试它

```
 locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:11:57.340

采用

```
GeoPoint test = new GeoPoint((int)location.getLatitude()*1000000, (int)location.getLongitude()*1000000); 
```

代替

```
 GeoPoint test = new GeoPoint((int)location.getLatitude()*1000000, (int)location.getAltitude()*1000000); 
```

即使用`getLongitude()`而不是`getAltitude()`.

要显示确切的位置使用，

```
int lat = (int) (location.getLatitude() * 1E6);
          int lng = (int) (location.getLongitude() * 1E6);
          GeoPoint test= new GeoPoint(
        lat,lng); 
```

这个对我有用。

# c++ - 抛出异常时是否需要 va_end ？

> ID：11645282
> 
> 赞同：9
> 
> 时间：2012-07-25T08:06:08.060
> 
> 标签：c++, exception-handling, variadic-functions, printf

我有一个基于`printf`-style 格式的日志框架：

```
void Logger::debug(const char *fmt, ...) {
    va_list args;
    va_start(args, fmt);
    this->output(DebugLevel, fmt, args);
    va_end(args);
} 
```

如果`Logger::output`抛出，编译器会正确展开堆栈，还是我需要`va_end(args)`在 catch 子句中添加一个 try/catch 块？这可以改为 RAII'ed，还是太神奇`va_end`了？如果可能，请包括对标准的引用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T08:35:45.063

不，他们不能。他们不能因为它们是宏的原因是愚蠢的。宏可以从构造函数和析构函数中使用，没有任何问题。但是，`va_start`并且`va_end`有特定的要求，它们必须从同一个函数中调用。将它们移动到单独的函数是无效的。C++ 指的是 C 标准，C 标准说“每次调用`va_start`和`va_copy`宏都应与`va_end`同一函数中相应的宏调用相匹配”。(7.15.1) 如果您确实`va_end`从帮助类的析构函数中调用，它可能有效，也可能无效。由于它不符合标准的要求，因此行为未定义。

编辑：至于另一个问题，`va_end`当抛出异常时你是否需要，可以提出一个合法的论点，即“调用`va_end`宏”实际上并不要求代码到达调用该宏的位置（因为宏调用严格来说是仅编译时的操作），但它强烈建议您确实需要它。所以是的，使用`try`/`catch`如果例外是可能的。C99 的基本原理在其描述中简要说明了`va_copy`可能`va_start`会分配内存。（我知道它实际上没有实现。）在这样的实现中，`va_end`然后会释放该内存，因此跳过`va_end`会导致内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:13:32.920

不`va_start`，`va_end`是宏。因此，它们不能被`RAII`编辑。此外，对于例外情况也不需要特别注意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:19:08.560

是的，这可以使用 Boost.ScopeExit 进行[RAII](http://www.boost.org/doc/libs/1_50_0/libs/scope_exit/doc/html/index.html)，即使 va_start/va_end 是宏。

# java - 正确的图形参考方法？

> ID：11645283
> 
> 赞同：0
> 
> 时间：2012-07-25T08:06:09.647
> 
> 标签：java, oop, graphics

将除 (Graphics g) 之外的其他参数传递给将对象绘制到 gui 的方法是不是一个坏主意？例如，如果您有：

```
A a = new A()

paintComponent(Graphics g) {
  a.draw(g, something);
}

public class A {
  draw(Graphics g, Something something) {
    g.drawImage(something.getSomething(somethingElse), 0, 0, null);
  }
} 
```

这合适吗？不知道为什么，但我觉得处理图形的方法应该被简化为只处理图形，在这种情况下，“draw”方法必须放在“Something”类中，这样它就可以直接引用必要的东西作为一个字段或没有额外参数的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:26:16.147

这取决于您尝试存档的是什么。通常在绘制时，我会设置我想要重复调用的上下文/支持绘制方法以构建最终图像（想想层），这允许我根据需要添加/删除层并隔离每个部分。

例如，绘画亮点。您通常不太关心外部环境，但需要知道如何应用它们

我也`painters`像 SwingX 项目中那样使用过

只是我对这个问题的看法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:33:04.663

如果“某物”可能是 A 的一个属性或一组属性可能会更好，但如果它与对象没有任何关系，那么可能没有更好的方法来解决问题。

# android - 九个补丁图像在TextView周围绘制1像素边框

> ID：11645284
> 
> 赞同：4
> 
> 时间：2012-07-25T08:06:12.970
> 
> 标签：android, nine-patch

![在此处输入图像描述](../Images/15ab595451c392a32a86d40c667fc920.png) <--**这是一个 3x3 图像。对不起。**

我使用以下 3x3 图像。

因此，当我使用**draw9patch.bat**打开并分别在顶部和左侧添加 2 个像素时，我得到以下图像。

![在此处输入图像描述](../Images/c50a53ad2d674ccc768b5f1a515ba141.png)

我希望如果我将此图像应用于`TextView`，我的整个图像`TextView`将在其周围有 1 个像素宽度的边框。

但是，我只能设法获得“半边界”。缺少右侧和底部的边框。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_horizontal|center_vertical"
    android:orientation="vertical"
    android:background="#ffffff" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView"
        android:background="@drawable/border" />

</LinearLayout> 
```

![在此处输入图像描述](../Images/2460dd8ad03f4da4786b6408460e808b.png)

我的 9 补丁图像有什么问题吗？

![在此处输入图像描述](../Images/782ba7077ef537e6be613f428f033b10.png)<-- **9 个补丁图像供您测试。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:52:59.307

尝试在其周围添加 1px 空白空间。见附图。

![带衬垫的 bg](../Images/bf7e179ccf4f1cf1268b03fbbdafcf91.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:12:13.993

您是否尝试添加与内容对应的 2 个像素，如下所示：

![在此处输入图像描述](../Images/7fa9142cf93c10e795a446cc4cc65d6a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:57:27.627

对不起，astroturf，但我建议你看看我对这个问题的回答：[how create Gradient like Iphone Edittext box in android](https://stackoverflow.com/q/11644429/517561)

简短的回答：尽量不要猜测平台。稍微长一点的答案：在您的背景中[绘制的形状](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)可能会产生更好的结果。链接的答案显示了如何做到这一点。

# python - 为什么 cProfile 模块不适用于 unittest？

> ID：11645285
> 
> 赞同：26
> 
> 时间：2012-07-25T08:06:14.110
> 
> 标签：python, macos, unit-testing, cprofile

我会使用 cProfile 模块来分析我的单元测试。但是当我跑步时

```
python -mcProfile mytest.py 
```

我得到了“在 0.000 秒内运行 0 次测试”。这是 mytest.py 的源代码

```
import unittest

class TestBasic(unittest.TestCase):
    def testFoo(self):
        assert True == True

if __name__ == '__main__':
    unittest.main() 
```

我也用其他更复杂的单元测试进行了测试。如果我使用 cProfile 运行它，总是得到“运行 0 次测试”。请帮忙。

**更新：**我的操作系统是带有内置 python 2.7 的 MacOS 10.7。相同的代码在 ubuntu 上也能正常工作。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-11-27T19:29:17.423

您必须在测试的构造函数中初始化 cProfiler，并在析构函数中使用配置文件数据——我这样使用它：

```
from pstats import Stats
import unittest

class TestSplayTree(unittest.TestCase):
    """a simple test"""

    def setUp(self):
        """init each test"""
        self.testtree = SplayTree (1000000)
        self.pr = cProfile.Profile()
        self.pr.enable()
        print "\n<<<---"

    def tearDown(self):
        """finish any test"""
        p = Stats (self.pr)
        p.strip_dirs()
        p.sort_stats ('cumtime')
        p.print_stats ()
        print "\n--->>>"

    def xtest1 (self):
        pass 
```

如果测试等待输入，则需要在该调用`self.pr.disable()`之前调用，然后重新启用它。

如果您更喜欢`pytest`方法名称有点不同：

```
import cProfile
import time

class TestProfile:
    """ test to illustrate cProfile usage """

    def setup_class(self):
        self.pr = cProfile.Profile()
        self.pr.enable()

    def teardown_class(self):
        self.pr.disable()
        self.pr.print_stats(sort="tottime")

    def test_sleep(self):
        time.sleep(2) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-05-15T21:30:49.167

明确指定模块为我解决了这个问题。也就是说，换...

```
 unittest.main() 
```

...（它试图自动发现它应该运行哪些测试）...

```
 unittest.main(module='mytest')  # if in 'mytest.py', or as appropriate for your filename/module 
```

...允许正确分析为`python -m cProfile mytest.py`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-03-15T04:15:04.537

我不确定为什么，但明确地创建和运行测试套件似乎有效。我添加`time.sleep(2)`以在统计数据中显示一些明确的内容。

```
import time
import unittest

class TestBasic(unittest.TestCase):
    def testFoo(self):
        time.sleep(2)
        assert True == True

if __name__ == '__main__':
    suite = unittest.TestLoader().loadTestsFromTestCase(TestBasic)
    unittest.TextTestRunner(verbosity=2).run(suite) 
```

在 bash 中运行，只保留前 10 行，我们可以看到`{time.sleep}`运行时间最长的调用：

```
~ $ python -m cProfile -s tottime so.py | head -n10
testFoo (__main__.TestBasic) ... ok

----------------------------------------------------------------------
Ran 1 test in 2.003s

OK
         1084 function calls (1072 primitive calls) in 2.015 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    2.003    2.003    2.003    2.003 {time.sleep}
        1    0.002    0.002    0.003    0.003 case.py:1(<module>)
        1    0.002    0.002    0.003    0.003 collections.py:11(<module>)
        1    0.001    0.001    2.015    2.015 so.py:1(<module>)
        1    0.001    0.001    0.010    0.010 __init__.py:45(<module>) 
```

# grails - 如何从 config.groovy 中的 message.properties 读取消息

> ID：11645289
> 
> 赞同：2
> 
> 时间：2012-07-25T08:06:25.560
> 
> 标签：grails, groovy, internationalization, grails-2.0

我不想在 config.groovy 中硬编码 'training.defaultStartTime' 值相反我必须从 message.properties 中读取它，结果将是这样的

在**message.properties**

```
dev.training.defaultStartTime = 09:00
prod.training.defaultStartTime = 10:00 
```

在**config.groovy**

```
 environments {
        development {
            training.defaultStartTime = message of  code 'dev.training.defaultStartTime' in message.properties 

        }
        production {
            training.defaultStartTime = message of code 'prod.training.defaultStartTime' in message.properties 
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:50:39.297

只是想读吗？如果你想在 gsp 中显示它，请使用,（你可以[在这里](http://grails.org/doc/latest/ref/Tags/message.html)`<g:message code="dev.training.defaultStartTime"/>`找到一些有用的东西）。

如果您在控制器中并想在那里使用它，请使用：

```
message(code: 'dev.training.defaultStartTime') 
```

# hadoop - 如何使用 Mahout 的 sequencefile API 代码？

> ID：11645294
> 
> 赞同：3
> 
> 时间：2012-07-25T08:06:46.337
> 
> 标签：hadoop, mahout, sequencefile

Mahout 中存在用于将序列文件创建为`bin/mahout seqdirectory -c UTF-8 -i <input address> -o <output address>`. 我想将此命令用作代码 API。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:16:19.420

你可以这样做：

```
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.SequenceFile;
import org.apache.hadoop.io.Text;

Configuration conf = new Configuration();
FileSystem fs = FileSystem.get(conf);

Path outputPath = new Path("c:\\temp");

Text key = new Text(); // Example, this can be another type of class
Text value = new Text(); // Example, this can be another type of class

SequenceFile.Writer writer = new SequenceFile.Writer(fs, conf, outputPath, key.getClass(), value.getClass());

while(condition) {

    key = Some text;
    value = Some text;

    writer.append(key, value);
}

writer.close(); 
```

[您可以在此处](http://hadoop.apache.org/common/docs/r0.20.2/api/org/apache/hadoop/io/SequenceFile.html)和[此处](http://wiki.apache.org/hadoop/SequenceFile)找到更多信息

此外，您可以通过使用`org.apache.mahout.text.SequenceFilesFromDirectory`

然后调用看起来像这样：

```
ToolRunner.run(new SequenceFilesFromDirectory(), String[] args //your parameters); 
```

`ToolRunner`来自_`org.apache.hadoop.util.ToolRunner`

希望这有帮助。

# .net - 运行时的 SSIS 配置文件

> ID：11645296
> 
> 赞同：0
> 
> 时间：2012-07-25T08:06:56.823
> 
> 标签：.net, ssis, etl, dts

我想从另一个 SSIS 包中执行一个 SSIS 包作为子包。我在子包中设置了两个配置；其中一个是父包变量，一个是 XML 配置文件。在我的父包中，我需要同时使用**这两种**配置。

这可能是一个新手问题，但 SSIS 步骤“执行包任务”不允许您指向`dtsConfig`文件。我知道父包变量会起作用，但是如何让子包`dtsConfig`在这种情况下使用该文件？如果我想要一些`dtsConfig`文件并且想在它们之间进行选择怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:27:39.117

您不能使用`Execute Package Task`.

一种可能的解决方案是以编程方式执行包并使用`ImportConfigurationFile`包对象上的方法来附加您的 XML 配置。您将在`Script Task`.

[以编程方式执行包的示例代码](http://msdn.microsoft.com/en-us/library/ms136090.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:28:49.653

您不必将执行包任务指向配置文件。当您运行“pkg Parent”时，它将按照您在开发中指定的方式读取其配置文件。当它调用“pkg child”时，子进程会从父进程读取变量，然后读取它自己的配置文件，你可以像在父进程上一样设置

# c# - 从路径字符串中获取特定文件夹

> ID：11645300
> 
> 赞同：1
> 
> 时间：2012-07-25T08:07:01.697
> 
> 标签：c#, string, path, directory

考虑这样的文件的路径：

“\\Tests\Results\knowles\project\LU\D15\RUN1\Results.xml”

如何创建一个新字符串，在上面的字符串中给出“项目”文件夹的路径？我尝试使用`FirstIndexOf("project")`但总是失败！

类中是否有静态方法或其他`Directory`东西`Path`？

我想要一个新字符串，其中包含“项目”文件夹的路径，来自类似的字符串，如上面的示例，类似于

`var newPath = "\\\\Tests\\Results\\knowles\\project"`

请注意，“项目”文件夹只是一个示例，它可以是任何名称，我要说的是，我想获取在我的示例中假设代替项目的文件夹的路径。

同样，我猜我的错误，原始字符串并不总是带有固定数量的文件夹，它肯定在“项目”文件夹之后至少有一个或两个文件夹......我需要一种从左到右的方法对，我猜

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T08:09:18.553

您可以使用[FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)和[DirectoryInfo](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.directoryinfo.aspx)类。

执行从右到左的搜索，如下所示：

```
var fi = new FileInfo(""\\Tests\Results\knowles\project\LU\D15\RUN1\Results.xml"");
var di = fi.Directory;
var find = "project";

while (di.Name.ToLower() != find.ToLower() && di != null)
{
    di = di.Parent;
}

if (di == null)
{
    throw new Exception(string.Format("Directory with name '{0}' was not found.", find));
} 
```

使用递归解决方案进行从左到右的搜索。像这样的东西：
**注意**这是未经测试的，所以可能不完全正确，但我认为这通常是您想要实现的目标。

```
var fi = new FileInfo(""\\Tests\Results\knowles\project\LU\D15\RUN1\Results.xml"");
var di = fi.Directory;
var find = "project";

di = GetGreatestParent(di, find);

if (di == null)
{
    throw new Exception(string.Format("Directory with name '{0}' was not found.", find));
}

public DirectoryInfo GetGreatestParent(DirectoryInfo Dir, string Find)
{
    if (Dir != null)
    {
        var p = GetGreatestParent(Dir.Parent, string Find);

        if (p != null)
        {
            return p;
        }
        else if (Dir.Name.ToLower() == Find.ToLower())
        {
            return Dir;
        }
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:17:02.100

试试这个，对于这个例子。

```
string path = @"\\Tests\Results\knowles\project\LU\D15\RUN1\Results.xml";
string folderToSearch = "project";
int index = path.IndexOf(folderToSearch);
if (index != -1)
  Console.WriteLine(path.Substring(0, index + folderToSearch.Length));
else
  Console.WriteLine("Folder not found in given string.");
Console.Read(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T08:55:54.893

使用正则表达式：

```
var projectName = "project";
var inputString = @"\\Tests\Results\knowles\project\LU\D15\RUN1\Results.xml";

var yourProjectDir = Regex.Match(inputString, 
                                 String.Format(@"\\.+{0}\\", projectName),
                                 RegexOptions.IgnoreCase).Value; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-25T08:16:51.650

你可以使用`Path`类，它有很多帮助方法，试着找到一个适合你需要的。

您可以尝试使用以下代码来获取路径中的文件夹，它会给您最后一个。

```
string folder = Path.GetDirectoryName(@"C:\\Abc\test.xml"); 
```

举个`C:\\ABC`例子。

# linux - 如何在 BSD 或 Linux 中控制程序的默认堆栈设置？

> ID：11645301
> 
> 赞同：1
> 
> 时间：2012-07-25T08:07:14.213
> 
> 标签：linux, stack, freebsd, memory-model

假设我有一个正在运行的程序，我查看BSD中的**/proc/[pid]/map （或 linux 中的****/proc/[pid]/maps**），我会看到如下一行：

```
0xbfbe0000 0xbfc00000 3 0 0xc74c4198 rwx 1 0 0x3000 COW NNC default - CH 1001 
```

这是堆栈。我所有的 PC-BSD 程序都使用相同的堆栈边界 0xbfc00000。在 Linux 上，关闭 ASLR 后，也会发生类似的事情。

我想在某些程序上使用这些设置，但堆栈似乎甚至没有在 elf 程序头或节头中指定。

因此，如果我想更改设置，例如：

*   更改堆栈的执行权限
*   将堆栈边界设置为另一个值

有没有办法更改单个程序的“堆栈设置”？系统范围如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T23:14:46.000

对于 FreeBSD：

在 amd64、i386 和 powerpc 上，您可以控制堆栈是否可以使用 sysctls`kern.elf32.nxstack`和`kern.elf64.nxstack`（从 FreeBSD 9.0 开始）执行。

您可以`limits(1)`用来启动具有不同堆栈*大小*的程序，或用来`login.conf(5)`为不同类别的用户设置限制。堆栈*边界*在内核中看起来是硬编码的。查看适合您架构`sv_usrstack`的领域。`struct sysentvec`

**编辑** 您的程序可以通过使用请求更大的最大堆栈大小`setrlimit(2)`。

GNU 链接器支持一个`--stack`选项，但根据手册页；

> 此选项特定于链接器的 i386 PE 目标端口

所以这只适用于Windows。

# linux - Git 建议在 Linux 上的 Windows 主机上开发

> ID：11645302
> 
> 赞同：0
> 
> 时间：2012-07-25T08:07:16.640
> 
> 标签：linux, git

git克隆windows进入linux窗口克隆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:25:34.817

如果您克隆，您将在本地主机上创建一个单独的存储库。一个简单的方法是在 GitHub 上创建一个存储库，将远程添加到本地主机和服务器上的存储库，并根据需要推送/获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:03:40.303

*当我克隆时，它会占用所有文件吗？* `YES. It copies all files, but except the files under '.git' folder.`

在 GIT 中，有很多方法可以忽略特定文件。

其中之一是将它们添加到`.gitignore`文件中。但是已经跟踪的文件不会被忽略。

正如您所提到的，您想回到这些文件的先前版本，您不能将它们添加到`.gitignore`.

要仅在本地计算机中忽略跟踪文件，而不是在中央存储库中：

```
git update-index --assume-unchanged  <filename> 
```

在任何时候，您都可以通过设置 --no-assume-unchaged 标志再次跟踪

```
git update-index --no-assume-unchanged  <filename> 
```

这些命令不会影响远程存储库。

# java - 如何禁用自动重新连接到 oracle DB？

> ID：11645303
> 
> 赞同：0
> 
> 时间：2012-07-25T08:07:23.687
> 
> 标签：java, hibernate, jakarta-ee

我使用休眠连接到我的应用程序中的 oracle 数据库。当 oracle 数据库的密码被更改时，并且当应用程序使用过期密码继续访问数据库以连接时，数据库在 3 次尝试失败后被锁定。有没有办法禁用从应用程序自动重新连接到数据库？就像我们如何使用 MySql 一样`autoReconnect=true`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:16:21.463

进入休眠配置文件，您可以使用以下代码。我认为它会解决您的问题

```
<property name="connection.autoReconnect"> false</property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:33:24.733

您有两个不同的配置文件，因此您可以为这两个配置文件使用配置

# c - 关于 charset、vi(vim) 和 secureCRT 的复杂性

> ID：11645307
> 
> 赞同：1
> 
> 时间：2012-07-25T08:07:47.917
> 
> 标签：c, character-encoding, vi, sys

在编程时，关于 charset 的问题总是让我感到困惑，尤其是当我的编程环境与生产环境不同时。我使用secureCRT 作为我的终端工具。只有与内容的字符集一致时，我才能调整`Options → Session options → Appearance → Character encoding`以正确显示内容。但是当使用 vi 在secureCRT 中输入/编辑/创建一些东西时，它变得复杂了。

### 有3个变量：

1.  我的 linux 服务器的`$LANG`环境变量
2.  `$LANG`我的工作计算机 的环境变量
    *   windows和secureCRT正在上面运行
3.  安全 CRT 设置
    *   `Options → Session options → Appearance → Character encoding`

如果这 3 个变量不统一，那么我在 vi(vim) 中输入的任何汉字都会显示为一团糟（即 A=UTF-8,B=GBK,C=GBK（GBK 表示中文））。这是相当复杂的。vi 接受来自我的 IME（即谷歌中文 IME）的字节，这些字节对于 GBK（变量 B）中的中文字符是正确的。但是，secureCRT 根据 GBK（变量 C）将这些字节显示为字符。我的问题是为什么它显示不正确？

如果我绕过 vi(vim) 但使用同一组 A、B、C 变量（即，如果我在 Windows 中创建一个 GBK 文件并将其上传到我的服务器）然后 vi（或 more/less/cat）该文件，所有字符显示正确。使用 vi 创建一些中文内容和使用 vi 仅显示文件内容有什么区别？当我使用 IME 输入 vi 时发生了什么？

我认为这个问题对我们彻底理解字符集/字体非常有用。非常感谢您对此有所了解。

# c# - 如何在代码隐藏中访问 Button.Content 中的控件？

> ID：11645314
> 
> 赞同：1
> 
> 时间：2012-07-25T08:08:17.310
> 
> 标签：c#, wpf, button, controls

在 XAML 中，我创建了一个这样的按钮：

```
<Button MouseEnter="Button_MouseEnter">
    <Button.Content>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition/>
                <RowDefinition/>
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" Text="asd"/>
            <Label Grid.Row="1" Content="xxx"/>
            <Label Grid.Row="2" Content="yyy"/>
        </Grid>
    </Button.Content>
</Button> 
```

现在我需要在代码隐藏中访问 Button 的 Content 中的这些控件之一。可以说我需要 TextBlock 之一。

```
private void Button_MouseEnter(object sender, MouseEventArgs e)
    {
        Button button = (Button)sender;
        // ? 
    } 
```

我怎样才能做到这一点？此外，我还有多个像这样使用数据绑定自动创建的按钮。我需要访问这些控件的原因是我想在某些情况下为其中一个设置动画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:29:57.880

```
 private void Button_MouseEnter(object sender, MouseEventArgs e)
    {
        Button b = sender as Button;
        TextBox textBox = null;
        if (b != null)
        {
            foreach (var frameworkElement in ((Grid)b.Content).Children)
            {
                if (frameworkElement is TextBox)
                {
                    textBox = (TextBox)frameworkElement;
                    break;
                }
            }

        }
    } 
```

这只是为了说明如何提取作为按钮内容的 Grid 的子项。我希望这能帮助你理解这个想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T09:17:59.840

Your **button.Content** should be a **Grid**, right? you can **cast** it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:34:02.150

如果你想改变这些东西，我建议使用 MVVM 模式和 DataBinding！

=> 为文本创建一个属性并将文本框绑定到该文本，而不是您只需更改此属性，按钮就会更改其文本。请参阅 MVVM 的 PropertyChanged 事件！

# cassandra - 通过 java 模块动态创建计数器列

> ID：11645316
> 
> 赞同：-1
> 
> 时间：2012-07-25T08:08:25.683
> 
> 标签：cassandra, hector

我想在列族中创建反列。需要动态创建列族和计数器列（以及索引，如果需要）。我需要一个java代码来做到这一点。我可以用赫克托或任何其他方法做到这一点吗？请给我有用的链接..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:30:13.570

Kundera 2.0.7 后版本支持计数器列系列。详情请访问：

[https://github.com/impetus-opensource/Kundera/wiki/Cassandra-Specific-Features](https://github.com/impetus-opensource/Kundera/wiki/Cassandra-Specific-Features)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T06:25:09.760

以下是我找到的相关链接：

1.  [https://github.com/Netflix/astyanax/wiki/Examples](https://github.com/Netflix/astyanax/wiki/Examples)
2.  [http://comments.gmane.org/gmane.comp.db.hector.user/4723](http://comments.gmane.org/gmane.comp.db.hector.user/4723)
3.  [http://pastebin.com/ixPX3fwq](http://pastebin.com/ixPX3fwq)
4.  [http://comments.gmane.org/gmane.comp.db.hector.user/4705](http://comments.gmane.org/gmane.comp.db.hector.user/4705)
5.  [https://groups.google.com/forum/?fromgroups#!topic/hector-users/EtY46VjsbM0](https://groups.google.com/forum/?fromgroups#!topic/hector-users/EtY46VjsbM0)
6.  [https://github.com/rantav/hector/blob/master/core/src/test/java/me/prettyprint/cassandra/model/MutatorTest.java#L214](https://github.com/rantav/hector/blob/master/core/src/test/java/me/prettyprint/cassandra/model/MutatorTest.java#L214)
7.  [https://github.com/impetus-opensource/Kundera/tree/kundera-2.0.7/kundera-cassandra/src/test/java/com/impetus/client/crud/countercolumns](https://github.com/impetus-opensource/Kundera/tree/kundera-2.0.7/kundera-cassandra/src/test/java/com/impetus/client/crud/countercolumns)
8.  [https://github.com/Netflix/astyanax/blob/5c05d118e22eef541a7a201adf7c1c610da13f5b/src/test/java/com/netflix/astyanax/thrift/ThrifeKeyspaceImplTest.java](https://github.com/Netflix/astyanax/blob/5c05d118e22eef541a7a201adf7c1c610da13f5b/src/test/java/com/netflix/astyanax/thrift/ThrifeKeyspaceImplTest.java)

# iphone - 如果值大于 10，则使用一个函数按每 10 处理该值，并使用另一个函数处理该值的其余部分

> ID：11645324
> 
> 赞同：0
> 
> 时间：2012-07-25T08:08:55.817
> 
> 标签：iphone, objective-c, ios, c, xcode

我正在寻找解决这个问题的方法：我想检查一个值是否大于 10，然后用一个函数按每 10 个处理该值，然后用一个函数处理该值的其余部分，然后小于 10，用另一个功能。它必须将每 10 个以及其余部分记入帐户；（最好没有四舍五入，所以它的精确和精确；最好是尽可能快的 CPU）。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:11:36.883

```
int tens = n / 10;             // get number of 10s in n
int units = n % 10;            // get remainder (0..9)

for (i = 0; i < tens; ++i)
    do_tens_stuff();

for (i = 0; i < units; ++i)
    do_units_stuff(); 
```

# javascript - Raphael JS 中的动画字体大小是否有流畅的过渡可能性？

> ID：11645326
> 
> 赞同：6
> 
> 时间：2012-07-25T08:08:59.647
> 
> 标签：javascript, jquery, animation, fonts, raphael

到目前为止，它似乎**不是流利**的，而是波涛汹涌的。例如，如果您有一个具有 font-size: 14 的状态属性并且想要使用 font-size: 16 进行动画处理，则过渡看起来并不平滑。

**它分两步跳跃。首先更改为 15，然后更改为 16px。**

可以强制看起来更平滑吗？

我正在使用**Firefox 14**进行测试。

**我当前的代码：**

```
 var fillerText = {
        "fill" : "#00738f",
        "font-size": 14,
        "font-family": "Arial, Helvetica, sans-serif"
        }
    var fillerTextHover = {
        "fill" : "#00738f",
        "font-size": 16,
        "font-family": "Arial, Helvetica, sans-serif",
        "cursor": "pointer"
        }

text.hover(function () {
       text.animate(fillerTextHover, 500);
               },
  function () {
       text.animate(fillerText, 500);
          }
); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-29T14:01:29.523

这是一个已知问题，与 Raphael 无关，但与[亚像素渲染](http://ie.microsoft.com/testdrive/Performance/TextSizeAnimated/Default.html)有关：

> 在不支持 GPU 驱动的子像素定位的浏览器中查看时，文本会出现跳跃，因为需要使用 CPU 创建文本，并且每个字母的位置会四舍五入到最接近的整个像素。

尽管使用新的[CSS 3 动画](http://www.the-art-of-web.com/css/css-animation/#animation)是可能的，但您可以看到它只是放大字体，直到动画完成然后重新绘制。

很抱歉，我没有为您提供解决方案，但直到现在我还没有看到使用 CSS 实现平滑的跨浏览器字体大小动画。

* * *

但是你可以做一些伪装这种效果的方法是减少动画间隔时间并扩大字体大小的差距。然后这些步骤出现在更快的时间范围内，并且看不到单个步骤。

[看到这个小提琴](http://jsfiddle.net/JVYhy/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T23:55:26.770

我知道没有使用 font-size 来修改文本元素的解决方案，但无论如何我可能不会采用这种方法。相反，我会简单地使用与相关文本相对应的 cufónized 路径并手动缩放它。 *请注意*，这比手动缩放文本元素要平滑得多，至少在 Firefox 中是这样。

1.  访问[Cufón](http://cufon.shoqolate.com/generate/)并将我喜欢的字体转换为等效的矢量字体，选择 Raphael.registerFont 作为自定义选项；

2.  [`paper.print`](http://raphaeljs.com/reference.html#Paper.print)使用而不是生成我的文本`paper.text`。这将返回一个路径元素而不是文本元素。

3.  使用转换而不是字体大小来缩放生成的路径元素。由于`paper.print`接受字体大小作为参数，因此很容易计算出与目标字体大小相对应的所需比例。

这是一个[粗略的演示](http://jsfiddle.net/kevindivdbyzero/M6nms/)，展示了它是如何工作的（我将文本放在背景上以便于悬停）。我希望你能原谅它的许多不足之处；它的制作有点仓促。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T14:28:44.270

我认为扩大路径会更容易和更顺畅，例如：

```
text.hover(function() {
    text.animate({transform: "s1.5 1.5 "}, 400);
}, function() {
    text.animate({transform: "s1.0 1.0 "}, 400);
}); 
```

有关详细信息，请参阅[http://jsfiddle.net/SeeG2/40/](http://jsfiddle.net/SeeG2/40/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T16:00:06.797

查看[http://www.zachstronaut.com/posts/2009/08/07/jquery-animate-css-rotate-scale.html](http://www.zachstronaut.com/posts/2009/08/07/jquery-animate-css-rotate-scale.html)

您将能够看到一个演示并下载一个可缩放元素的插件。需要注意的是，您无法明确选择目标字体大小，但是，通过一些数学运算，您可以编写一个小插件来将目标大小转换为要按比例缩放的数字。

如果你想看另一个演示，我的[个人主页在欢迎页面上使用了这个插件。](http://www.zacharykniebel.com)

祝你好运！:)

# android - Android：一个视图的顶部，另一个视图的中心水平

> ID：11645328
> 
> 赞同：0
> 
> 时间：2012-07-25T08:09:10.290
> 
> 标签：android, android-layout

我有三个水平放置的 ImageView。一个在左边，一个在右边，一个在中间。我想将中间视图的顶部边缘与其他的水平中心对齐，以查看如何在 android 中实现这一点。请告诉我上述问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:18:50.840

尝试使用`android:layout_alignBaseline = <left or right imageview's id>`中间 ImageView 的属性。

# php - 即使 SMTP 服务器正在运行并且 PHP mail() 返回 true，邮件也无法在 PHP 中传递

> ID：11645329
> 
> 赞同：1
> 
> 时间：2012-07-25T08:09:11.210
> 
> 标签：php, xampp

我正在尝试使用 PHP 发送一封简单的邮件。我尝试使用 telnet 来检查 Mercury 是否正在运行，它的回答是肯定的。mail() 也返回 true，因此我的脚本应该没问题，但是仍然无法发送邮件，这可能是什么原因造成的？

这是我的PHP代码：

```
$subject = "Simple mail";
$message = "Here is a test mail";
$to = "me@gmail.com";
$from = "me@test.com";
$header = "From: ".$from;

if(mail($to, $subject, $message, $header))
   print "success<br>";
else
   print "fail<br>"; 
```

下面是我的 PHP.ini：

```
[mail function]
; XAMPP: Comment out this if you want to work with an SMTP Server like Mercury
; SMTP = localhost
; smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
;sendmail_from = postmaster@localhost  

; XAMPP IMPORTANT NOTE (1): If XAMPP is installed in a base directory with spaces (e.g. c:\program filesC:\xampp) fakemail and mailtodisk do not work correctly.
; XAMPP IMPORTANT NOTE (2): In this case please copy the sendmail or mailtodisk folder in your root folder (e.g. C:\sendmail) and use this for sendmail_path.  

; XAMPP: Comment out this if you want to work with fakemail for forwarding to your mailbox (sendmail.exe in the sendmail folder)
;sendmail_path = "\"C:\xampp\sendmail\sendmail.exe\" -t"

; XAMPP: Comment out this if you want to work with mailToDisk, It writes all mails in the C:\xampp\mailoutput folder
sendmail_path = "C:\mailtodisk\mailtodisk.exe"

; Force the addition of the specified parameters to be passed as extra parameters
; to the sendmail binary. These parameters will always replace the value of
; the 5th parameter to mail(), even in safe mode.
;mail.force_extra_parameters =

; Add X-PHP-Originating-Script: that will include uid of the script followed by the filename
mail.add_x_header = Off

; Log all mail() calls including the full path of the script, line #, to address and headers
;mail.log = "C:\xampp\php\logs\php_mail.log" 
```

因此，如果邮件服务器运行正常，并且脚本正确，那么导致邮件无法投递的唯一问题应该是邮件从未到达服务器，那么我该怎么做才能找出错误所在并解决它呢？

我已按照重要通知进行了一​​些更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-13T13:56:07.043

在您的 XAMPP 中，您使用的是“C:\mailtodisk\mailtodisk.exe”而不是邮件服务器。它将所有邮件写入 C:\xampp\mailoutput 文件夹中，而不是将它们发送到 Internet。

# windows - 启动时 Windows 服务在源 (.NET 运行时 4.0 错误报告) 错误中引发事件 ID (5000)

> ID：11645337
> 
> 赞同：0
> 
> 时间：2012-07-25T08:09:36.997
> 
> 标签：windows, windows-services

我遇到了一个问题，需要知道是否有人遇到过。我编写了 ac# windows 服务，它调用 Web 服务 (asmx) 来执行某些功能。该服务在本地机器上部署时似乎运行良好。但是当它在远程开发测试环境（Win server 2003）中部署和运行时，它会抛出一个错误，捕获为下面的事件日志。

" 找不到源 (.NET 运行时 4.0 错误报告) 中事件 ID (5000) 的描述。本地计算机可能没有必要的注册表信息或消息 DLL 文件来显示来自远程计算机的消息。您可以使用 /AUXSOURCE= 标志来检索此描述；有关详细信息，请参阅帮助和支持。以下信息是事件的一部分：clr20r3, yllddkcpf0zkiftk0gcwtfigwkqck35d, 1.0.0.0, 50069cd9, tpplc.intranet.applications.incidentreporting.emailingservice, 1.0.0.0 , 50069cd9, d, 18a, system.nullreferenceexception, NIL。”

以下是代码片段的剥离但相关版本。

服务的启动 -</p>

```
 protected override void OnStart(string[] args)
      {

      try

       {           
         //Some initialization code
            …
            …

        //Start the thread to notify email recipients.
            emailThread = new Thread(NotifyRecipients);
            emailThread.Start();
        }
 }

 private void NotifyRecipients()

 {          
 //Now call the web service to fetch the execution time which is actually set from the web app.

       GetEmailSchedule();           

        while (true)
        {                
            // Some Logic               

            //Send email only on the scheduled time of the day AND if the current time matches the 
            //email scheduled time OR if the current hour is greater than the scheduled hour.
            if ((DateTime.Now.TimeOfDay >= executionTime) && (!EmailSent))
            {
                SendMail();// In this method call Email is sent and the EmailSent flag is set to true.
            }
        }
    }

    private void GetEmailSchedule()

     {            
      try
          {                
            LogModule.LogDebug("Calling WebMethod instance to get Email Schedule");

            EmailService.IncidentDetails emailSchedule = new EmailService.IncidentDetails();// Place of error

            emailSchedule.UseDefaultCredentials = true;
            LogModule.LogDebug("Calling WebMethod to get Email Schedule");
            string schedule = emailSchedule.GetEmailSchedule();
            if (string.IsNullOrEmpty(schedule.Trim()))
            {
                //Get the default time from the app.config file to send emails to recipients.

            }
            else
            {
                //Get the individual time components
                string[] scheduleSplit = schedule.Split(',');
                executionHour = Convert.ToInt32(scheduleSplit[0].Trim());
                executionMinute = Convert.ToInt32(scheduleSplit[1].Trim());
            }

            executionTime = new TimeSpan(executionHour, executionMinute, 0);

            //Check if the retrieved exeuction hour or minute has changed from its last execution so that
            //emailsent flag can be reset and email can be sent in the new schedule again.
            if (executionHour != ExecutedHour || executionMinute != ExecutedMinute)
            {
                EmailSent = false;
            }
        }
        catch (Exception ex)
        {
            LogModule.LogError("Error Occurred: " + ex.Message + " ; Inner Exception: " + ex.InnerException.ToString());
            LogEvent("Error Occurred: " + ex.Message + " ; Inner Exception: " + ex.InnerException.ToString(), EventLogEntryType.Error);
            SendExceptionMail(ex);
        }
    } 
```

通过添加自定义日志进行调试后，我意识到这发生在实例化 Web 服务以调用 GetEmailSchedule() 方法中的 Web 方法时，即 EmailService.IncidentDetails emailSchedule = new EmailService.IncidentDetails();

不知道为什么会这样。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:36:35.763

它看起来不是您的 Web 服务的问题。在 LogEvent 方法中发布记录事件的代码。此错误是由于将事件记录在不可用的日志源中。

# css - 使用 CSS 显示渐变以及图像

> ID：11645346
> 
> 赞同：3
> 
> 时间：2012-07-25T08:10:11.723
> 
> 标签：css, png, background-image

基于我在这里找到的非常简单的示例：`<dead link removed>`.

css 应该同时显示透明 png 和其背后的渐变。我想知道这个问题是否与 css 的构造方式有关。

```
body {
background-image:url('Clouds.png');
background-image: linear-gradient(bottom, #9B7698 24%, #4447AB 63%);
background-image: -o-linear-gradient(bottom, #9B7698 24%, #4447AB 63%);
background-image: -moz-linear-gradient(bottom, #9B7698 24%, #4447AB 63%);
background-image: -webkit-linear-gradient(bottom, #9B7698 24%, #4447AB 63%);
background-image: -ms-linear-gradient(bottom, #9B7698 24%, #4447AB 63%);

background-image: -webkit-gradient(
linear,
left bottom,
left top,
color-stop(0.24, #9B7698),
color-stop(0.63, #4447AB));} 
```

如果我只有图像：url，它会很好地加载云。但否则它只显示渐变而不是图像。

我也很好奇我是否可以在底部添加一个渐变为白色的额外渐变，以便在页面滚动时它与静态云图像啮合，但我对渐变不太熟悉。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:12:29.617

您需要编写一个**单一** `background(-image)`的声明，并将单个组件（图像，渐变）分开`,`

```
background: url('Clouds.png'), linear-gradient(bottom, #9B7698 24%, #4447AB 63%); 
```

在您的情况下，第二个背景图像定义（渐变）将覆盖第一个（您的图像）。
请记住，顺序很重要！您必须先声明图像，使其出现在渐变顶部。
你可以省略旧的 webkit 语法，它不再需要了。

另请注意，并非每个浏览器都支持多个背景图像！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:15:39.527

在支持的浏览器中，可以使用多种背景：

```
background-image: -webkit-linear-gradient(bottom, #9B7698 24%, #4447AB 63%), url('Clouds.png');
background-image: -moz-linear-gradient(bottom, #9B7698 24%, #4447AB 63%), url('Clouds.png');
background-image: -o-linear-gradient(bottom, #9B7698 24%, #4447AB 63%), url('Clouds.png');
background-image: linear-gradient(bottom, #9B7698 24%, #4447AB 63%), url('Clouds.png'); 
```

这会将云图像放置在渐变上方。另请注意，我删除了旧的 webkit 语法和`-ms-`前缀，并更改了顺序。`-ms-`不需要前缀，因为没有稳定版本的 IE 仅支持前缀渐变。

# nhibernate - 如何在 nHibernate 中使用 IQueryOver 的连接从多个表中获取记录？

> ID：11645347
> 
> 赞同：0
> 
> 时间：2012-07-25T08:10:13.327
> 
> 标签：nhibernate

我有三张桌子：

```
User -> UserId, username

UserGroup -> UserGroupId, GroupName

UserGroupMember -> UserId, UserGroupId 
```

我已经使用 nHibernate 创建了相应的映射，但是当我尝试搜索组名并检索属于特定组的用户列表时，我收到错误并且无法检索结果。

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:49:21.990

我不太确定您的问题，但我假设您想选择具有特定名称的组的所有用户。

我会这样做：

```
var users = Session.QueryOver<UserGroupMember>()
      .Fetch(x => x.User).Eager
      .JoinQueryOver(x => x.UserGroup).Where(x => x.GroupName == groupName)
      .List().Select(x => x.User) 
```

使用该查询，SQL 将是这样的：

```
Select m.*, u.* 
from UserGroupMember m 
         inner join UserGroup g on m.UserGroupId=g.UserGroupId 
         inner join User u on m.UserId = u.UserId 
where g.GroupName='groupName' 
```

# grails - 如何通过 GSP 的内部 g:each 调用控制器操作？

> ID：11645349
> 
> 赞同：0
> 
> 时间：2012-07-25T08:10:23.343
> 
> 标签：grails, gsp

我有一个名为**Student**的域类。它包含一些变量，例如**student_name,student_address,student_class**。实际上我想按**student_class**的顺序显示学生详细信息。

我有一个名为 list.gsp 的 GSP 页面。 **列表.gsp：**

```
<g:each in="${std}" status="v" var="stdInstance"> //All Class eg:1..10.
<h3>${stdInstance.std_class}</h3>                   
 //Innerloop     
//here i want to display students details depending on the value of stdInstance.std_class.
</g:each> 
```

我想知道如何通过内部 g:each 调用控制器动作并传递参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:30:48.107

在我的项目中，我使用以下内容在需要时将登录部分包含到我的 GSP 页面中：

```
<g:include controller="user" action="login"/> 
```

其中controller 是控制器名称，action 是控制器中的方法。您可以使用`params="..."`此标记中的属性来传递参数。我相信你可以在你的情况下做同样的事情。例如

```
<g:include controller="user" action="login" params="..."/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:12:02.057

我宁愿对控制器中的 std 列表进行排序并传递已经排序的列表。您唯一要更改的不是传递列表，而是传递`list.sort{/*the order you want*/}`

如果没有，请使用 g:each 中的排序...我想它可能是模棱两可的。看一下[排序闭包](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#sort%28groovy.lang.Closure%29)。

# android - 适用于 Android 的 3D 音频库

> ID：11645352
> 
> 赞同：4
> 
> 时间：2012-07-25T08:10:50.393
> 
> 标签：android, audio, openal, audiotrack

我在互联网上到处寻找解决方案，但似乎找不到明确的答案。

基本上，我希望在 android 平台上实现 3D 音频环境。我正在寻找的是一个 android 库，它能够使用坐标系之类的东西将声音放置在虚拟空间中。

我知道 iOS 有 OpenAL，但是否有 Android 等价物？我也知道这个`AudioTrack`类的存在，但我正在寻找一些不那么原始的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T03:52:29.427

谢谢大家的建议。

我在网上搜索，发现了这个使用 NDK 的 Android OpenAL 库：[OpenAL4Android](http://pielot.org/2011/11/10/openal4android-2/)。

它有足够的功能来满足我的需要，允许您构建一个相当复杂的 3D 音频场景。

如果有人正在寻找有关如何获取和使用 NDK 的说明，请查看此处：[Android NDK](http://developer.android.com/tools/sdk/ndk/index.html)。（我建议阅读全文）

澄清一下，让它工作起来很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T17:49:12.940

[Cricket Audio](http://www.crickettechnology.com)在 Android 上工作，可以做一些简单的 3D 声音放置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-28T23:02:50.573

Android 上还没有真正的 3D 声音解决方案。OpenAL4Android 和 Cricket Audio 工作正常，但它们只能根据与声源的距离为左右耳设置不同的音量。并且在用户前面和后面移动声源没有区别。真正的 3D 声音是使用 HRT 函数 (HRT) 产生的，它可以欺骗你的大脑，让你认为声源在后面。[您可以在Wikipedia](http://en.wikipedia.org/wiki/Head-related_transfer_function/ "维基百科")中阅读有关它的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T08:18:13.793

不确定这会有多大帮助，但我知道 SDL 在某些情况下可用于 Android 开发。SDL 然后有 SDL-Mixer，它支持非常基本的软件 3D 音频，如果我记得的话，以距离和角度的形式。

# android - 安卓位置视图

> ID：11645353
> 
> 赞同：0
> 
> 时间：2012-07-25T08:10:55.593
> 
> 标签：android, overlay, positioning, android-relativelayout

在一个应用程序中，我有一个包含一些内容的相对布局。我需要的是在此内容上放置一个按钮，使其始终堆叠到显示器的底部和底部边框的中心。有人可以就如何做到这一点提出任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:37:03.440

将这两行添加到您的按钮视图 xml：

android:layout_centerHorizo​​ntal="true" android:layout_alignParentBottom="true"

# javascript - 用 jQuery 修改类

> ID：11645354
> 
> 赞同：0
> 
> 时间：2012-07-25T08:10:55.903
> 
> 标签：javascript, jquery, html, regex

```
<span class="here one-two-del-del other1">test</span>
<span class="here one-two-aaa o2ther">test</span>
<span class="here one-two-dsf other3">test</span>
<span class="here one-two-213 o4ther">test</span>
<span class="here one-two-sdf other5">test</span>
<span class="here one-two-sdff o6ther">test</span>

<span class="set one-two-aaaa">set 1</span> <br />
<span class="set one-two-bb-fff">set 2</span> <br />
<span class="set one-two-vcvc">set 3</span> <br />
<span class="set one-two-fgdfg-dfgfd-fgf">set 4</span> <br />​

​$('.set').click(function(){
  $('#here').???
})​ 
```

我想 - 如果我点击 .set 那么这应该得到自己的类并替换所有 .here。

例如，如果我单击*set 2*，则所有具有类的跨度 .here 应该是：

```
​&lt;span class="here one-two-bb-fff other1">test</span>
<span class="here one-two-bb-fff o2ther">test</span>
<span class="here one-two-bb-fff other3">test</span>
<span class="here one-two-bb-fff o4ther">test</span>
<span class="here one-two-bb-fff other5">test</span>
<span class="here one-two-bb-fff o6ther">test</span> 
```

我不能使用 removeClass，因为我不知道当前的课程如何。如果我使用 .attr('class', 'new') 那么这会替换所有类，但我仍然必须有类 other1、o2ther 等

[http://jsfiddle.net/NNhDd/](http://jsfiddle.net/NNhDd/)

也许我必须使用正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:31:39.600

**HTML**

```
<span class="here one-two-del-del other1">test</span>
<span class="here one-two-aaa o2ther">test</span>
<span class="here one-two-dsf other3">test</span>
<span class="here one-two-213 o4ther">test</span>
<span class="here one-two-sdf other5">test</span>
<span class="here one-two-sdff o6ther">test</span>

<br />

<span class="set one-two-aaaa">set 1</span> <br />
<span class="set one-two-bb-fff">set 2</span> <br />
<span class="set one-two-vcvc">set 3</span> <br />
<span class="set one-two-fgdfg-dfgfd-fgf">set 4</span> 
```

**JavaScript**

```
$('.set').click(function () {
    var replaceWith = $(this).attr('class');
    // Remove the "set " from replaceWith
    replaceWith = replaceWith.replace(/set ?/g, '');

    $('.here').each(function () {
        var newClass = $(this).attr('class');
        newClass = newClass.replace(/one-two-[^ $]+/, '');
        newClass = newClass + ' ' + replaceWith;
        // Now set the new class
        $(this).attr('class', newClass);
    });
}) 
```

这是一个小提琴：http: [//jsfiddle.net/NNhDd/3/](http://jsfiddle.net/NNhDd/3/)

# spring - 使用本地属性文件覆盖 Spring 3.1 中的属性

> ID：11645360
> 
> 赞同：3
> 
> 时间：2012-07-25T08:11:05.223
> 
> 标签：spring, deployment, properties

我正在尝试使用我正在部署的盒子上的本地属性文件覆盖在我的 war 文件中找到的默认值。

```
<context:property-placeholder
  location="classpath*:*.properties, file:/var/myfolder/local.properties"
  ignore-resource-not-found="true"
  ignore-unresolvable="true" /> 
```

我已经看到这可以通过提供一个文件作为第二个位置（逗号分隔）来实现。不幸的是，它似乎没有覆盖属性。

我曾尝试使用属性定义 bean 和设置位置，但这也不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T08:15:36.067

一种方法是将它们分成两部分并使用顺序

```
<context:property-placeholder
  location="classpath*:*.properties"
  ignore-resource-not-found="true"
  ignore-unresolvable="true"
  order ="0" />

<context:property-placeholder
  location="file:/var/myfolder/local.properties"
  ignore-resource-not-found="true"
  ignore-unresolvable="true"
  order="-1"/> 
```

最低顺序优先

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T09:20:06.563

发现了问题。出于某种原因，系统中有 2 个应用程序上下文。我需要调查这是否有合理的原因。一旦我将属性文件添加到其他应用程序上下文中，它就起作用了。

谢谢你的帮助！

# ruby-on-rails - 没有路由匹配错误，因为实例变量正在评估为 nil

> ID：11645362
> 
> 赞同：0
> 
> 时间：2012-07-25T08:11:16.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我陷入了一个简单的问题。我有一个表单标签和选择标签。在更改时，我希望用户导航到所选类别。

此表单在标题上可用，我在类别控制器中定义了 change_category 操作。

这是它的外观：-

应用程序.html.haml

```
=render :partial => "categories/category" 
```

类别控制器.rb

```
def change_category
  @categories = Category.all
  @category_name = params[:main]
  @category = Category.find(params[:main])
end 
```

_category.html.haml

```
=form_tag(change_category_category_path(@category),:method => "get", :remote => true) do
    =select_tag(:main, options_for_select(Category.all.collect {|p| [p.name,p.id]}), :prompt => "Select Category", :onchange => 'this.form.submit();') 
```

路由.rb

```
resources :categories do
    member do
      get :change_category
    end
  end 
```

错误 ：-

```
No route matches {:action=>"change_category", :controller=>"categories", :id=>nil} 
```

我认为问题是@category 评估为零，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:59:47.503

你的问题是当你局部渲染的时候`@category`可能没有设置布局。此外，您无法真正知道将其设置为什么，因为您希望用户更改为的类别是下拉列表中选择的类别。

我会`change_category`改为进行收集操作（我还重命名了该操作以使其读起来更好一点）：

```
resources :categories do
  collection do
    get :change
  end
end 
```

然后您的表格应更改为

```
= form_tag(change_categories_path(),:method => "get", :remote => true) do
  = select_tag(:main, ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:39:37.933

首先，您需要检查您的路由规则。转到应用程序根目录并键入“rake routes”然后您可以找到您的路由规则。

```
 metrics     GET        /metrics(.:format)             metrics#index
             POST       /metrics(.:format)             metrics#create
 new_metric  GET        /metrics/new(.:format)         metrics#new
 edit_metric GET        /metrics/:id/edit(.:format)    metrics#edit
 metric      GET        /metrics/:id(.:format)         metrics#show
             PUT        /metrics/:id(.:format)         metrics#update
             DELETE     /metrics/:id(.:format)         metrics#destroy 
```

1.  当您使用“资源”生成路由规则时，它总是包含“：id”，但您似乎没有提供它。

解决方案 1\. 制定您的自定义路由规则。你可以在这里找到一种方法[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

解决方案 2\. 在表单中添加“id”输入标签以将 :id 发送到您的控制器。然后改变“params[:main]”=>“params[:id]”

# sql - 使用 Doctrine Record 设置外键

> ID：11645363
> 
> 赞同：0
> 
> 时间：2012-07-25T08:11:21.747
> 
> 标签：sql, orm, doctrine-orm, codeigniter-2, foreign-key-relationship

场景：A`client`可以做很多`requests`，

在`Request`我的模型中：

```
public function setTableDefinition() {

        $this->hasColumn('ref_no', 'varchar', 20);
        $this->hasColumn('client_id', 'int', 11);

    }

    public function setUp() {
        $this -> setTableName('Request');
    } 
```

在数据库`client_id`中是客户端表中的外键引用 `id`。

在客户端模型和请求模型中，如何`one to many`在方法中建立与客户端的关系？`setUp()`

谢谢，

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:49:45.427

嗯，在客户端模型上尝试这样的事情：

```
public function setUp() {
    parent::setUp(); 
    $this->hasMany('Request as requests', 
        array( 
            'refClass' => 'Request', 
            'local' => 'id', 
            'foreign' => 'client_id'
        )
    ); 

} 
```

# ruby-on-rails - RefineryCMS - 导入 tumblr 提要

> ID：11645365
> 
> 赞同：0
> 
> 时间：2012-07-25T08:11:24.320
> 
> 标签：ruby-on-rails, feed, tumblr, refinerycms

我需要将所有帖子从 tumblr 导入到 refinerycms 博客。我应该怎么做？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T10:55:48.530

您可以使用[FeedJira](https://github.com/feedjira/feedjira) gem。gem 允许您导入 RSS 提要。观看此[railscast](http://railscasts.com/episodes/168-feed-parsing/)了解更多详情。

```
Feedjira::Feed.fetch_and_parse("http://www.foozzz.com/rss").entries.each do |entry|
  # update refinery blog here
  Refinery::Blogs::Post.create(:title => entry.title, ....)
end 
```

# c# - OpenGL C# (OpenTK) 加载和绘制图像函数不起作用

> ID：11645368
> 
> 赞同：8
> 
> 时间：2012-07-25T08:11:50.747
> 
> 标签：c#, opengl, textures, opentk

我正在尝试在屏幕上加载和显示纹理，但是我收到了一个要显示的黑框。

两种主要方法是“LoadTexture”和“Draw Image”，我假设错误出在其中之一。

```
using System;
using System.Diagnostics;
using OpenTK;
using OpenTK.Graphics;
using OpenTK.Graphics.OpenGL;
using System.Drawing;
using System.Drawing.Imaging;

namespace FailRender
{
    public class FailRender: GameWindow
    {
        public FailRender() : base(800, 600, GraphicsMode.Default, "Hoard of Upgrades")
        {
            GL.ClearColor(0, 0.1f, 0.4f, 1);

            texture = LoadTexture("sand.jpg");
        }

        private int texture;

        public int LoadTexture(string file)
        {
            Bitmap bitmap = new Bitmap(file);

            int tex;
            GL.Hint(HintTarget.PerspectiveCorrectionHint, HintMode.Nicest);

            GL.GenTextures(1, out tex);
            GL.BindTexture(TextureTarget.Texture2D, tex);

            BitmapData data = bitmap.LockBits(new System.Drawing.Rectangle(0, 0, bitmap.Width, bitmap.Height),
                ImageLockMode.ReadOnly, System.Drawing.Imaging.PixelFormat.Format32bppRgb);

            GL.TexImage2D(TextureTarget.Texture2D, 0, PixelInternalFormat.Rgba, data.Width, data.Height, 0,
                OpenTK.Graphics.OpenGL.PixelFormat.Rgba, PixelType.UnsignedByte, data.Scan0);
            bitmap.UnlockBits(data);

            GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureMinFilter, (int)TextureMinFilter.Linear);
            GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureMagFilter, (int)TextureMagFilter.Linear);

            return tex;
        }

        public static void DrawImage(int image)
        {
            GL.MatrixMode(MatrixMode.Projection);
            GL.PushMatrix();
            GL.LoadIdentity();

            GL.Ortho(0, 800, 0, 600, -1, 1);

            GL.MatrixMode(MatrixMode.Modelview);
            GL.PushMatrix();
            GL.LoadIdentity();

            GL.Disable(EnableCap.Lighting);

            GL.Enable(EnableCap.Texture2D);

            GL.Color4(1, 0, 0, 1);

            GL.BindTexture(TextureTarget.Texture2D, image);

            GL.Begin(BeginMode.Quads);

            GL.TexCoord2(0, 0);
            GL.Vertex3(0, 0, 0);

            GL.TexCoord2(1, 0);
            GL.Vertex3(256, 0, 0);

            GL.TexCoord2(1, 1);
            GL.Vertex3(256, 256, 0);

            GL.TexCoord2(0, 1);
            GL.Vertex3(0, 256, 0);

            GL.End();

            GL.Disable(EnableCap.Texture2D);
            GL.PopMatrix();

            GL.MatrixMode(MatrixMode.Projection);
            GL.PopMatrix();

            GL.MatrixMode(MatrixMode.Modelview);
        } 

        protected override void OnRenderFrame( FrameEventArgs e )
        {
            GL.Clear( ClearBufferMask.ColorBufferBit | ClearBufferMask.DepthBufferBit );

            DrawImage(texture);

            SwapBuffers();
        }
    }

    public class Program
    {
        [STAThread]
        public static void Main()
        {
            using (FailRender win = new FailRender())
            {
                win.Run();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T15:35:05.837

删除“GL.Color4(1, 0, 0, 1);”行

并将加载纹理函数更改为：

```
public int LoadTexture(string file)
{
    Bitmap bitmap = new Bitmap(file);

    int tex;
    GL.Hint(HintTarget.PerspectiveCorrectionHint, HintMode.Nicest);

    GL.GenTextures(1, out tex);
    GL.BindTexture(TextureTarget.Texture2D, tex);

    BitmapData data = bitmap.LockBits(new System.Drawing.Rectangle(0, 0, bitmap.Width, bitmap.Height),
        ImageLockMode.ReadOnly, System.Drawing.Imaging.PixelFormat.Format32bppArgb);

    GL.TexImage2D(TextureTarget.Texture2D, 0, PixelInternalFormat.Rgba, data.Width, data.Height, 0,
        OpenTK.Graphics.OpenGL.PixelFormat.Bgra, PixelType.UnsignedByte, data.Scan0);
    bitmap.UnlockBits(data);

    GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureMinFilter, (int) TextureMinFilter.Linear);
    GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureMagFilter, (int) TextureMagFilter.Linear);
    GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureWrapS, (int) TextureWrapMode.Repeat);
    GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureWrapT, (int) TextureWrapMode.Repeat);

    return tex;
} 
```

修复问题。`System.Drawing.PixelFormat.Argb`采用 OpenGL 格式`Bgra`。

# cpu-usage - BSD/达尔文 CPU 统计

> ID：11645369
> 
> 赞同：0
> 
> 时间：2012-07-25T08:11:51.460
> 
> 标签：cpu-usage, bsd, sysctl

是否所有的 BSD 都有一个通用的方法来获取 CPU 统计信息（在内核中花费的时间、空闲、用户等），就像 Linux 的第一行一样`/proc/stats`？

我正在尝试检测负载下的系统，并且在它处于活动状态（超过某个阈值）时不执行计算。我已经想出了如何在 Windows/Linux 上做到这一点。

我想我需要以某种方式使用 sysctl 。我发现了这个：

[http://osdir.com/ml/darwin-kernel/2009-06/msg00036.html](http://osdir.com/ml/darwin-kernel/2009-06/msg00036.html)

这是跨平台吗？我正在尝试特别针对这些 BSD：

*   Mac OS 10.6+
*   FreeBSD 8+
*   OpenBSD 5+

我对 BSD 只是稍微熟悉（我在十几岁的时候就玩过 FreeBSD），所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:39:30.690

不——这些东西不是那么便携。尽管

```
 sysctl vm.loadavg 
      vm.loadavg: { 0.98 1.39 1.50 } 
```

恰好适用于上述集合，并且具有可比性。

如果您需要一些简单而广泛的东西 - 我会考虑解析命令正常运行时间（幕后依赖于平台之间略有不同的 sysctl） - 并提取负载数字：

```
 uptime
      11:38AM  up 18 days, 15:50, 2 users, load averages: 0.04, 0.01, 0.00 
```

那是非常跨平台的 - 并且具有非常相似的语义。

如果这还不够好 - 您可以做的是确保系统运行一个 SNMP 代理，该代理会公开主机资源 MIB。这为您提供了一种简单的平台独立方式来获取负载。如果您真的想从您的代码中执行此操作 - 考虑从 net-snmp 获取这段代码 - 因为它具有适用于许多平台的各种风格的 /proc 和 sysctl。

# c - 访问 NULL 指针

> ID：11645371
> 
> 赞同：0
> 
> 时间：2012-07-25T08:11:55.617
> 
> 标签：c, gcc

这是我的代码的一部分......我有几个主要问题，我坚持......好吧，到目前为止我可以看到的大部分问题都已修复......但我仍然不知道在哪里释放内存。这是我结束程序时的错误消息：S

```
 HEAP SUMMARY:
==15468==     in use at exit: 20 bytes in 1 blocks
==15468==   total heap usage: 1 allocs, 0 frees, 20 bytes allocated
==15468== 
==15468== 20 bytes in 1 blocks are definitely lost in loss record 1 of 1
==15468==    at 0x4025BD3: malloc (vg_replace_malloc.c:236)
==15468==    by 0x8048601: newnode (myassignment.c:27)
==15468==    by 0x804885E: insertavl (myassignment.c:88)
==15468==    by 0x8048B33: main (myassignment.c:156)
==15468== 
==15468== LEAK SUMMARY:
==15468==    definitely lost: 20 bytes in 1 blocks
==15468==    indirectly lost: 0 bytes in 0 blocks
==15468==      possibly lost: 0 bytes in 0 blocks
==15468==    still reachable: 0 bytes in 0 blocks
==15468==         suppressed: 0 bytes in 0 blocks
==15468== 
==15468== For counts of detected and suppressed errors, rerun with: -v
==15468== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 13 from 8)
typedef struct node *tree;

struct node {
   int data;
   char name;
   int height;
   struct node *left;
   struct node *right;
};

static tree newnode(int d,char n){    
   tree t = malloc(sizeof(struct node));
   t->data = d;
   t->name=n;
   t->left = NULL;
   t->right = NULL;
   memoize(t);
   return t;
}

static tree modnode(int d, char n,tree t){
   if (d > t->data){
       t->data=d;
       t->name=n;
       t->right = t->right;}
   else{
       t->data=t->data;
       t->name=t->name;
       t->right = t->right;}
  return t;
}

tree insertavl(tree t, int d,const char *n){                 
   if (t == NULL) return newnode(d,*n);
   else if (t->name==*n) return modnode(d,*n,t->right);// <=========(1)
   else {                                                
      printf("went right");
      setright(t, insertavl(t->right, d,n));
   }
   return t;
}

int main(void) {
  int i = 0;
  char foo[11];
  int c;
  tree t= NULL;
  for(c=0;c<=1000;c++) {
    i = readstring(foo,10);
    if(i == 0) break;
    if (strcmp("score",foo)==0){
   int a=0;
   int point;
   char n[21];
   printf ("Enter name \n");
   a=readstring (n,20);
   printf ("Enter score \n");
   scanf("%d", &point);
   t=insertavl(t,point,n);}
   if (strcmp("highscore",foo)==0){
       printf ("%d \n", highsc(t));}

   if (t==NULL){
      printf ("false");}
    }
   return 0;
 } 
```

我知道我的程序效率不高，但我想先修复错误。，感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:22:46.717

您突出显示的行：

```
else if (t->name==*n) return modnode(d,*n,t->right);// <=========(1) 
```

想想当`t`一个新节点同时设置`t->left`和`t->right`设置为时会发生什么`NULL`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:37:02.263

那么检查 malloc 的返回值呢？

# ruby-on-rails - 如何使用 ruby 删除注册商标符号？

> ID：11645377
> 
> 赞同：0
> 
> 时间：2012-07-25T08:12:25.223
> 
> 标签：ruby-on-rails

我正在尝试从 Xpath 查询的输出中删除注册商标符号，但我的代码无法删除该符号。从在线教程我相信它可以使用 ruby​​s 内置函数来完成？

这是我输入的页面：

[http://h10010.www1.hp.com/wwpc/ie/en/ho/WF06b/321957-321957-3329742-89318-89318-5186820-5231694.html?dnr=1](http://h10010.www1.hp.com/wwpc/ie/en/ho/WF06b/321957-321957-3329742-89318-89318-5186820-5231694.html?dnr=1)

我尝试了以下方法：

```
csv << clues.map{|clue| doc.at("//td[text()='#{clue}']/following-sibling::td").text.strip.gsub(/\u2122/, '')} 
```

谁能发现我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:43:53.577

通过强制编码删除所有非 UTF-8 字符解决了这个问题

# maven-plugin - 使用 maven 插件生成报告

> ID：11645381
> 
> 赞同：0
> 
> 时间：2012-07-25T08:12:37.677
> 
> 标签：maven-plugin

我正在为 2.1 创建一个 Maven 插件，以在远程服务器上执行 Fitnesse 测试（现有的 Fitnesse 插件对我不起作用）。您能否让我知道我们如何生成报告，例如生成单元测试用例报告？您能否也请告诉我，一旦遇到错误，我该如何构建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:26:08.427

也许你想看看[我在 2012 年写的这个插件](http://code.google.com/p/fitnesse-launcher-maven-plugin/)？

生成的报告和失败都由 处理`VerifyMojo`，使用`org.apache.maven.surefire.failsafe.model.FailsafeSummary`由 生成`RunTestsMojo`。

# for-loop - 批量文件大小输出重定向

> ID：11645383
> 
> 赞同：1
> 
> 时间：2012-07-25T08:12:41.843
> 
> 标签：for-loop, batch-file, filesize, output-redirect

我正在尝试创建一个批处理文件以遍历文件夹并将指定文件夹中每个文件的所有文件大小输出到 .txt

到目前为止，我有以下内容：

```
@echo off
setlocal
set size=
FOR /R (F:\mediav3) %%A IN (*) DO set size=%%~zA 
```

我对实际输出有疑问。我尝试过使用 echo`%size% > temp.txt`和其他一些变体。基于我在这里找到的其他输出重定向帖子，但还没有设法提出一个可行的解决方案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:21:57.870

这有效

```
@echo off
setlocal enabledelayedexpansion
for /r F:\mediav3 %%a in (*) do (
set size=%%~za
echo !size! >>C:\sizes.txt
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T04:27:42.043

对于任何感兴趣的人，我的最终批处理文件如下：

```
@echo off
setlocal
echo ^<fileinfo^>
FOR /R F:\MEDIAV3 %%A IN (*) DO echo ^<filename^>%%~fA^</filename^>>>fileinfo.xml & echo      ^<bytes^>%%~zA^</bytes^>>>fileinfo.xml & echo.>>fileinfo.xml
echo ^</fileinfo^>>>fileinfo.xml 
```

批处理输出经过格式化，可以轻松地将文件名和文件大小转换为 xml 列表。可能有一种更清洁的方法，但这确实有效。

# mysql - MySQL/PDO 截断数据

> ID：11645385
> 
> 赞同：5
> 
> 时间：2012-07-25T08:12:43.047
> 
> 标签：mysql, pdo, mysqlnd

`$book`是一个 7kb 的字符串。如果使用 PHP PDO 执行此查询`exec`，则`monograph`列 (LONGTEXT) 数据在 6765 个字符处被截断：

```
echo strlen($book); // output 7157

$db->exec("UPDATE `chemicals` SET `monograph` = {$db->quote($book)} WHERE `id` = {$db->quote($c['id'])};"); 
```

但是，如果我打印查询并使用 SQL 客户端（绕过 PHP）执行它，它会将所有数据插入数据库。这让我觉得这是我还不熟悉的 PHP 设置。

请注意，如果我使用准备好的语句（包括使用 PDO::PARAM_LOB），也会发生同样的情况。

`$book``exec` [在https://gist.github.com/79d5fe1050bbb0e2fac8](https://gist.github.com/79d5fe1050bbb0e2fac8) (7157)之前转储的值。最终在数据库中的实际数据[https://gist.github.com/df49d4a9707660b8b60b](https://gist.github.com/df49d4a9707660b8b60b) (6765)。我不明白这种数据截断在技术上是如何可能的，因为整个查询都传递给了 MySQL（否则会弹出 SQL 语法错误）。

```
echo "UPDATE `chemicals` SET `monograph` = {$db->quote($book)} WHERE `id` = {$db->quote($c['id'])};"; 
```

如果我使用 SQL 客户端执行输出 (https://gist.github.com/a05fe4c033e74897b82b)，这是最终在数据库中的数据[https://gist.github.com/88870fe26a3ae40e991e](https://gist.github.com/88870fe26a3ae40e991e) (7157，预期)。

PDO 使用 UTF8 连接启动。

```
new PDO('mysql:dbname=[..];host=localhost;charset=utf8', 'root', '[..]', array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'utf8' COLLATE 'utf8_unicode_ci';")); 
```

* * *

**更新 2012 年 7 月 25 日 04:11 EST**

现在我知道这是编码问题。

```
$db->exec("UPDATE `chemicals` SET `monograph` = {$db->quote(utf8_decode($book))} WHERE `id` = {$db->quote($c['id'])};"); 
```

但是，我不确定该怎么做。我与 MySQL 的连接已经是 unicode。

`/etc/my.cnf`配置为在服务器范围内使用以下设置。

```
[mysqld]
character-set-server=utf8
collation-server=utf8_general_ci 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:35:13.473

这里有两点需要说明。一是理想情况下，所有字符编码都必须是`UTF8`- 即服务器、客户端、连接和表。二是PHP的`strlen`函数计算字节数，而不是字符数。

您的表格字符集可能未设置为`UTF8`. 你可以做

```
SHOW CREATE TABLE chemicals; 
```

检查。您还应该将这些添加到您的`my.cnf`：

```
[mysqld]
character-set-client=utf8
character-set-results=utf8 
```

在此处阅读有关 MySQL 字符集的更多信息：

[MySQL 字符集](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:28:36.503

原来是编码问题。这是两个解决方案。最明显的是修复编码以匹配数据库/连接设置。就我而言，我得到一个`iso-8859-1`字符串并将其解释为 unicode。

但是，无论如何，这应该不是问题。我进一步发现`PDO::ATTR_EMULATE_PREPARES`默认情况下设置为 TRUE。

*   您会发现这个主题是一个有用的总结，可以帮助您理解后一种设置的含义， [PDO MySQL：使用 PDO::ATTR_EMULATE_PREPARES 还是不使用？](https://stackoverflow.com/questions/10113562/pdo-mysql-use-pdoattr-emulate-prepares-or-not).
*   本主题将解释为什么编码搞砸了查询， [PDO 参数化查询的工作方式](https://stackoverflow.com/questions/3727186/the-way-pdo-parametrized-query-works)。

# mysql - mysql用count()比较列

> ID：11645386
> 
> 赞同：2
> 
> 时间：2012-07-25T08:12:45.733
> 
> 标签：mysql, count

我有两张桌子。一个用于客户，另一个用于房间。我想使用具有以下要求的 mysql 检索房间..

1.  特定房间中的客户数量少于房间表中的头部
2.  房间不在客户表中

您可以查看此粘贴 [http://pastebin.com/WgTtkQvD](http://pastebin.com/WgTtkQvD)

如您所见，只有房间 1 不在预期结果中，因为它的“头部”和该房间的总客户数相等

房间 2 有 3 个顾客，比房间 2 的“头”少

房间 3 和 4 处于预期结果中，因为还没有人占用它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T08:23:34.580

```
SELECT   Rooms.id AS room_id,
         COUNT(Customer.id) AS occupied,
         Rooms.head AS total_head,
         Rooms.head - COUNT(Customer.id) AS remaining_head
FROM     Rooms LEFT JOIN Customer ON Customer.room_id = Rooms.id
GROUP BY Rooms.id
HAVING   remaining_head > 0 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/45a59/1/0)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:22:26.830

以下应该可以解决问题：

```
SELECT r.id, COUNT(c.id), r.head, r.head - COUNT(c.id) FROM Rooms AS r LEFT JOIN Customer AS c ON r.id = c.room_id WHERE r.head <= COUNT(c.id) GROUP BY r.id 
```

我没有完全理解你的问题，而且我还没有在真正的数据库上尝试过这个，所以可能会有一些小故障需要解决。评论它任何更多的问题出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:24:54.757

让我知道这个是否奏效

```
select r.id,c.occ_cnt as occupied,r.head as total_head,r.head - c.occ_cnt as       remaining_head
from room r,
(
select room_id,count(id) as occ_cnt
from customer
group by room_id
) c
where r.id = c.room_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T08:28:30.613

试试这个

```
select 
    r.id,coalesce(ct.counting,0) as occupied,r.head as total_head,
    r.head-coalesce(ct.counting,0)  as remaining_head
from
    rooms as r left join
(
    select room_id,count(id) as counting from customer as ct 
    group by room_id
) as ct on r.id=ct.room_id
where r.head-coalesce(ct.counting,0)>0 
```

# c# - 在页面重新加载ASP.Net c#之前从文本框中保存数据

> ID：11645400
> 
> 赞同：0
> 
> 时间：2012-07-25T08:14:06.243
> 
> 标签：c#, asp.net, textbox, save, reload

我在从文本框中保存数据时遇到了一点问题，因此当页面重新加载时，数据不会进入空白。

**场景：**在页面加载时，一些数据从 SQL 表中提取并显示在 TextBoxes 和 GridView 中。现在，当客户端单击一个按钮时，一些不同的日期会加载到 TextBoxes 和 GridView 中。最后，客户端单击第二个按钮，需要对最后在 TextBoxes 中的数据进行一些计算。

**问题：**每次单击按钮时，页面都会重新加载，并且 page_load 事件中的数据会显示并用于计算，而不是输入的新数据。

我曾尝试使用 ajax 更新面板，也曾尝试将数据保存到会话中，但无济于事。

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:18:36.827

听起来您需要将在文本框上进行初始加载的逻辑包装在

```
if(!Page.IsPostBack)
{
} 
```

以确保这只发生一次。

# c# - LINQ to XML !StartWith

> ID：11645401
> 
> 赞同：0
> 
> 时间：2012-07-25T08:14:10.400
> 
> 标签：c#, linq

我试图从值不以某些文本开头的 xml 文件中获取所有属性值

我有这个代码

```
IEnumerable<XElement> elements =
    (from el in xmlFile.Root.Elements(elementName)
     where (string)el.Attribute(attributeName)  !StartWith("abc")
     select el); 
```

我怎样才能解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:15:29.630

您需要使用有效的表达式，例如

```
where !el.Attribute(attributeName).Value.StartsWith("abc") 
```

重要的是要了解进入 LINQ`where`子句的内容不是“魔术”语法 - 它只是一个普通表达式，它可以使用查询表达式声明的*范围变量*`el`（在这种情况下）。所以你应该问自己，“如果我不是在 LINQ 中编写的，并且我有一个变量称为`el`引用元素，我将如何编写一个`if`条件来检查属性值不是以 开头`abc`？”

（当属性可能丢失并且我只想得到一个空值时，我使用显式转换，但是在这种情况下，无论如何当属性丢失时你都会崩溃，你只需要字符串值，所以你可以好好利用`Value`物业。）

请注意，由于您在这里*只有*一个`where`子句（和一个微不足道的`select`），因此使用非查询表达式形式可能更具可读性：

```
var elements = xmlFile.Root.Elements(elementName)
                      .Where(el => !el.Attribute(attributeName).Value.StartsWith("abc")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:16:17.630

试试这个（调整你的开始）

```
IEnumerable<XElement> elements = 

from el in xmlFile.Root.Elements(elementName) 
where ! el.Attribute(attributeName).Value.StartWith("abc") 
select el; 
```

# solr - Lucene max term 查询限制

> ID：11645409
> 
> 赞同：3
> 
> 时间：2012-07-25T08:14:50.823
> 
> 标签：solr, lucene, query-parser

Lucene（或 Solr）是否仍然有 1024 个最大术语查询限制？我在 3.6 lucene 版本中找不到此信息，我需要使用大量术语进行查询。

谢谢你， - 丹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:56:39.740

[`BooleanQuery.setMaxClauseCount`](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/search/BooleanQuery.html)您可能想要调用并提高此限制。

# r - 使用 AND 或 OR 折叠布尔向量

> ID：11645410
> 
> 赞同：4
> 
> 时间：2012-07-25T08:14:53.243
> 
> 标签：r

真的很简单，但我很难折叠一个布尔向量。`AND(c(T,T,F))`似乎对AND有用，但`OR(c(T,T,F))`不存在。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T08:17:29.293

`all()`并且`any()`似乎在做这个把戏。

# php - php joomla 中的错误链接 url JPATH_SITE？

> ID：11645415
> 
> 赞同：0
> 
> 时间：2012-07-25T08:15:14.323
> 
> 标签：php, joomla

我有一个错误：

```
http://www.test.com/downloads/ 
```

在 Joomla 我调用函数

```
$savepath = JPATH_SITE.DS.'downloads'; 
```

但是当将 $savepath 放在标签上时，链接 url 变为：

```
<a href="<?php echo savepath?>">test</a> 
```

=> firebug is url is `test.com/home/test/public_html/downloads/` How to fix this error to result 是：

```
test.com/downloads 
```

或者

```
/home/test/public_html/downloads/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:20:39.863

改变这个：

```
<a href="<?php echo savepath ?>">test</a> 
```

对此：

```
<a href="<?php echo $savepath ?>">test</a> 
```

或者您可以始终使用相对路径，例如：

```
$savepath = JURI::root() . "/downloads"
<a href="<?php echo $savepath ?>">test</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:57:49.113

`JPATH_SITE`不是您网站的 URL，而是您安装的文件系统路径。而是使用这个：

```
$savepath = JUri::root() . 'downloads';
<a href="<?php echo $savepath?>">test</a> 
```

# perl - 在 Unix 中排序日期/时间

> ID：11645416
> 
> 赞同：4
> 
> 时间：2012-07-25T08:15:28.857
> 
> 标签：perl, bash, shell, sed, awk

**输入**

```
2012-07-24 10:05:08 AM
2012-07-26 10:13:58 AM
2012-07-24 10:13:58 AM
2012-07-24 10:57:50 AM
2012-07-24 11:15:03 AM
2012-07-24 11:26:08 PM
2012-07-25 11:26:08 PM 
```

**期望的输出**

```
2012-07-24 10:05:08 AM
2012-07-24 10:13:58 AM
2012-07-24 10:57:50 AM
2012-07-24 11:15:03 AM
2012-07-24 11:26:08 PM
2012-07-25 11:26:08 PM
2012-07-26 10:13:58 AM 
```

**我试过的代码**

```
 sort -t ":" -k 1 -k 2 -k 3 Input.txt | sort -t " " -k 3 
```

但我没有得到想要的输出。

任何人都可以提出任何建议吗？

* * *

我写了一个代码......但问题仍然存在......

**代码**

```
 sed 's/ 12:/00:/g' Input.txt | sort -k 1,1 -k 3,3 -k 2,2 | sed 's/00:/12:/g' 
```

首先将**12:43:01 AM**更改为**00:43:01 AM** ....然后应用排序命令。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:15:13.813

### 转换为纪元秒进行排序

假设您的数据存储在 /tmp/foo 中，您可以使用 GNU 日期将时间戳转换为可数字排序的格式。例如：

```
date -f /tmp/foo '+%s' | sort |
while read; do
    date -d "@$REPLY" "+%F %I:%M:%S %p"
done 
```

这应该在所有情况下正确处理排序，尤其是在同一日期所有上午时间都应该在所有下午时间之前的情况。例如，现在在晚上 10:00 之前列出了 12:01 AM。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T10:10:15.733

除了 12 小时时间之外，字符串可以简单地按词法排序。

此解决方案使用[*Schwartzian 变换*](http://en.wikipedia.org/wiki/Schwartzian_transform)来更改用于对字符串进行排序的键。它只是将 12 添加到任何以该结尾的字符串的小时字段中`PM`并按其排序。

```
use strict;
use warnings;

my @data = <DATA>;
chomp @data;

my @sorted = map $_->[0],
sort { $a->[1] cmp $b->[1] }
map { (my $dt = $_) =~ s/(\d\d)(?=:\d\d:\d\d PM)/$1+12/e; [$_, $dt] } @data;

print "$_\n" for @sorted;

__DATA__
2012-07-24 10:05:08 AM
2012-07-26 10:13:58 AM
2012-07-24 10:13:58 AM
2012-07-24 10:57:50 AM
2012-07-24 11:15:03 AM
2012-07-24 11:26:08 PM
2012-07-25 11:26:08 PM 
```

**输出**

```
2012-07-24 10:05:08 AM
2012-07-24 10:13:58 AM
2012-07-24 10:57:50 AM
2012-07-24 11:15:03 AM
2012-07-24 11:26:08 PM
2012-07-25 11:26:08 PM
2012-07-26 10:13:58 AM 
```

* * *

**更新**

正如 steffen 所指出的，即使在调整了上午/下午、午夜和中午的时间之后，仍然会阻止简单的字符串排序工作。

该程序使用核心[`Time::Piece`](http://p3rl.org/Time%3a%3aPiece)模块以 ISO 8601 格式重新格式化日期/时间`2000-02-29T12:34:56`，*可以*按词法排序。

```
use strict;
use warnings;

use Time::Piece;

my @data = <DATA>;
chomp @data;

my @sorted = map $_->[0],
sort { $a->[1] cmp $b->[1] }
map { [ $_, toISO8601($_) ] } @data;

sub toISO8601 {
  Time::Piece->strptime(@_, '%Y-%m-%d %I:%M:%S %p')->datetime;
}

print "$_\n" for @sorted;

__DATA__
2012-07-24 10:05:08 AM
2012-07-26 10:13:58 AM
2012-07-24 10:13:58 AM
2012-07-24 10:57:50 AM
2012-07-24 11:15:03 AM
2012-07-24 11:26:08 PM
2012-07-25 11:26:08 PM
2012-08-01 01:00:00 PM
2012-08-01 12:30:00 PM
2012-08-01 12:00:00 PM
2012-08-01 11:30:00 AM
2012-08-01 01:00:00 AM
2012-08-01 12:30:00 AM
2012-08-01 12:00:00 AM 
```

**输出**

```
2012-07-24 10:05:08 AM
2012-07-24 10:13:58 AM
2012-07-24 10:57:50 AM
2012-07-24 11:15:03 AM
2012-07-24 11:26:08 PM
2012-07-25 11:26:08 PM
2012-07-26 10:13:58 AM
2012-08-01 12:00:00 AM
2012-08-01 12:30:00 AM
2012-08-01 01:00:00 AM
2012-08-01 11:30:00 AM
2012-08-01 12:00:00 PM
2012-08-01 12:30:00 PM
2012-08-01 01:00:00 PM 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T09:11:56.580

有点`awk`病房，我承认...

~~猫输入.txt | \ awk 'BEGIN{FS="[: -]"}{if($7 == "PM") $4+=12; print $1"-"$2"-"$3" "$4":"$5":"$6" "$7}'|\ sort|\ awk 'BEGIN{FS="[: -]"}{if($7 == "下午") $4-=12; 打印 $1"-"$2"-"$3" "$4":"$5":"$6" "$7}'~~

 ~~**编辑：**

```
cat Input.txt |\
awk 'BEGIN{FS="[: -]"}{if(length($4)==1) $4="0"$4 ;if($7 == "PM") $4+=12; else if($4 ==12)$4-=12; print $1"-"$2"-"$3" "$4":"$5":"$6" "$7}'|\
sort|\
awk 'BEGIN{FS="[: -]"}{if($7 == "PM") $4-=12; else if($4 ==0)$4+=12; print $1"-"$2"-"$3" "$4":"$5":"$6" "$7}' 
```

但它的工作...

解释：我使用 将时间格式转换为 24 小时`awk`，对其进行排序并转换回来。

**编辑：**我在一个小时前加上一个数字，`0`以便正确排序。也适用于 AM。`1:0:0``12:0:0`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T12:52:21.900

使用 [夏兹变换](http://en.wikipedia.org/wiki/Schwartzian_transform)和[Date::Parse](http://search.cpan.org/~gbarr/TimeDate-1.20/lib/Date/Parse.pm)：

```
use strict;
use warnings;
use 5.010;
use Date::Parse;

my @data = <DATA>;
chomp @data;

my @sorted = 
    map  { $_->[0] }
    sort { $a->[1] <=> $b->[1] }
    map  { [$_, str2time($_)] } @data;

say for @sorted;

__DATA__
2012-07-24 11:15:03 AM
2012-07-24 11:26:08 PM
2012-07-25 01:26:08 PM
2012-07-25 12:26:08 PM
2012-07-25 01:26:08 AM
2012-07-25 12:26:08 AM
2012-07-25 11:26:08 AM
2012-07-25 11:26:08 PM 
```

**输出：**

```
2012-07-24 11:15:03 AM
2012-07-24 11:26:08 PM
2012-07-25 12:26:08 AM
2012-07-25 01:26:08 AM
2012-07-25 11:26:08 AM
2012-07-25 12:26:08 PM
2012-07-25 01:26:08 PM
2012-07-25 11:26:08 PM 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T08:32:50.423

12:01 AM 早于 1:01 AM，所以我看不出使用 just sort 会有什么帮助。

您需要转换为其他一些格式，例如 ISO 8601 或 seconds since，以获得可以作为文本或数字进行比较的内容。perl oneliner 可以做到这一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-25T22:14:40.487

你可以使用这个：

```
sed 's/ 12:/ 00:/'| LC_ALL="C" sort -k 1,1 -k 3 | sed 's/ 00:/ 12:/' 
```

它应该是非常快速的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-25T09:43:29.787

有我的变种：

```
$sed 's|\([0-9]\+\)-\([0-9]\+\)-\([0-9]\+\) \([0-9]\+\):\([0-9]\+\):\([0-9]\+\) \([A-Z]\+\)|\1 \2 \3 \4 \5 \6 \7 \0|' input.txt | awk '{if($7=="AM"){$7="1";if($4==12){$4 = 0}}else{$7="0"};print}' | sort -n -k1 -k2 -k3 -k4 -k5 -k6 -k7 | cut -d' ' -f 8-
2012-07-24 10:05:08 PM
2012-07-24 10:13:58 AM
2012-07-24 10:57:50 AM
2012-07-24 11:15:03 AM
2012-07-24 11:26:08 PM
2012-07-25 11:26:08 PM
2012-07-26 10:13:58 AM 
```

添加额外字段的主要思想，按它们排序，排序后我摆脱它们。对数字进行排序很简单，但为了对 AM/PM 进行排序，我将其转换为 1/0 数字以简化排序。

更新：`sed`+`awk`用法可以替换为`awk`：

```
awk -F'[-: ]' '{printf("%d %d %d %d %d %d %d %s\n", $1, $2, $3, ($4 == 12 && $7 == "AM" ? 0 : $4), $5, $6, $7 == "AM", $0)}' input.txt |
sort -n -k1 -k2 -k3 -k4 -k5 -k6 -k7 |
cut -d' ' -f 8- 
```

更新：修复上午/下午问题

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-25T15:24:59.713

这可能对您有用（GNU sed）：

```
sed 's/.*/echo -e "$(date -d"&" +%s)\t&"/e' file | sort -n | sed 's/.*\t//' 
```

或者：

```
date -f file +%s | paste - file | sort -n | sed 's/\S\+\s\+//' 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-07-27T07:01:18.797

最后，我在不使用任何外部模块的情况下进行了编码。虽然它很长，但适用于任何日期格式。

**使用的技术：**

1.  首先将文件中的每个日期转换为其时间戳
2.  按数字对时间戳进行排序。
3.  再次使用标量本地时间将时间戳转换为日期。

**代码**

```
my @input = `cat Input.txt`;

    open (ts,">","tt.txt");
    foreach my $i (@input)
    {
            chomp($i);
            my $timestamp = `date --date "$i" +\%s`;
            chomp($timestamp);
            push (@time,$timestamp);
            print ts "$timestamp\n";
    }
    close(ts);

    open (ts,">","sort_time.txt");
    my @sorted_time = join "\n",sort {$a<=>$b} @time;
    chomp(@sorted_time);
    print ts "@sorted_time\n";
    close(ts);

    my @input1=  `cat sort_time.txt`;
    open (ts,">","sort_timestamp.txt");
    foreach my $st1 (@input1)
    {
            chomp($st1);
            my $st2 = scalar localtime($st1);
            chomp($st2);
            print ts "$st2\n";
    }
    close(ts);

    @input2 = `cat sort_timestamp.txt`;
    open (ts,">","Output.txt");
    foreach my $st2 (@input2)
    {
            chomp($st2);
            $pro_time = `date --date "$st2" +\%Y-\%m-\%d~\%r | sed 's/~/ /g'`;
            chomp($pro_time);
            print ts "$pro_time\n";
    }
    close(ts);

    `rm tt.txt sort_time.txt sort_timestamp.txt`; 
```~~

# android - 在 ImageView 中绘制文本

> ID：11645417
> 
> 赞同：1
> 
> 时间：2012-07-25T08:15:29.333
> 
> 标签：android, canvas

我在 ImageView 中有一个九补丁图像，并且想将文本绘制到图像的内容区域中。Android 会拉伸图像，并且在不同的屏幕上我无法使用 dp 或 px 等单位。这太不准确了。

如何完成这个使命？=)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:22:02.670

您可以编写自定义`ImageView`，并在该`onDraw(Canvas canvas)`方法中您可以通过以下方式在其上绘制文本：

```
Paint paint = new Paint()
paint.setStyle(Paint.Style.STROKE);
paint.setStrokeWidth(1);
paint.setColor(Color.BLACK);
paint.setTextSize(11);
canvas.drawText("your text", x, y, paint); 
```

您可以将文本居中放在`ImageView`例如：

```
int imgWidth = getMeasuredWidth();
int imgHeight = getMeasuredHeight();
float txtWidth = paint.measureText("your text");

int x = imgWidth/2 - txtWidth/2;
int y = imgHeight/2 - 6; // 6 is half of the text size 
```

# ios - 旋转时 UIWebView 大小不正确

> ID：11645424
> 
> 赞同：0
> 
> 时间：2012-07-25T08:15:56.000
> 
> 标签：ios, webview, frame

我有一个 UIWebView 只覆盖屏幕右侧的大部分。为此，我使用 frame 属性指定纵向的框架大小和位置。 `webView.frame=CGRectMake(220,100,548,875);`

当设备旋转到横向时，我为横向指定了一个新框架： `webView.frame=CGRectMake(300,73,724,638);`

问题是当我将 webView 从纵向旋转到横向再到纵向时，我将框架更改为原始框架，它的宽度只有以前的一半..

这是我调用来调整框架大小的代码和函数：

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if(toInterfaceOrientation==UIInterfaceOrientationPortraitUpsideDown)
    {
    }
    else if(self.interfaceOrientation==UIInterfaceOrientationPortrait)
    {
        [self showLandscape];
    }
    else if(toInterfaceOrientation==UIInterfaceOrientationPortrait)
    {
        [self showPortrait];
    }
}

-(void)showLandscape
{
.
.
.
webView.frame=CGRectMake(300,73,724,638);
.
.
.
}

-(void)showPortrait
{
.
.
.
webView.frame=CGRectMake(220,100,548,875);
.
.
.
} 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:59:25.513

这就是我所做的，**它运行良好**：

```
- (void)viewDidLoad {
    UIWebView *_webView = [[UIWebView alloc] init];
    // when I add these line it is also working well (!!!) on my device
    //_webView.autoresizingMask=UIViewAutoresizingFlexibleWidth;
    //_webView.autoresizesSubviews=YES;
    //_webView.contentMode=UIViewContentModeScaleAspectFit; 
    [self.view addSubview:_webView];
    [_webView setFrame:CGRectMake(220.f, 100.f, 548.f, 875.f)];
} 
```

我还添加了以下代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    for (UIView *_temporaryView in self.view.subviews) {
        if ([_temporaryView isKindOfClass:[UIWebView class]]) {
            if (UIInterfaceOrientationIsPortrait(interfaceOrientation)){
                [_temporaryView setFrame:CGRectMake(220.f, 100.f, 548.f, 875.f)];
            } else {
                [_temporaryView setFrame:CGRectMake(300.f, 73.f, 724.f, 638.f)];
            }
        }
    }

    return true;
} 
```

*如果您不想提供代码片段来查找异常，请将其与您的代码进行比较并找出差异。*

# oracle - 第 1 行出现错误：ORA-00933：SQL 命令未正确结束

> ID：11645427
> 
> 赞同：1
> 
> 时间：2012-07-25T08:16:05.177
> 
> 标签：oracle

嗨，我有下表，我正在其中运行以下查询。

表名：MMC

我正在运行的命令是

```
SELECT REM_Q FROM MMC  where CLIENTQ = AJIT AND SENDER_SYSTEM = NEWYORK; 
```

我得到了上述错误。有人可以告诉我我在这里做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T08:19:14.210

AJIT 和 SENDER_SYSTEM 是哪些列？如果是，`VARCHAR`那么您应该将参数用引号括起来，例如`'AJIT'`和`'NEWYORK'`。

# java - Android：ArrayList没有被清除

> ID：11645431
> 
> 赞同：0
> 
> 时间：2012-07-25T08:16:19.563
> 
> 标签：java, android, arraylist

我正在使用意图将 arrayList 从活动发送到子活动。在我发送意图的活动中，arrayList 的大小和项目是正确的。代码是

```
 intent.putStringArrayListExtra("IMAGE_URLS", imageUrls); 
```

当我点击返回按钮并再次将arraylist 发送到 subAcitivity 时，它会发送正确的arrayList。但是在 subActivity 数组列表中，“**图像**”包含以前的项目，尽管我每次都用“新”创建它。

```
 @Override
        protected void onResume() {
            super.onResume();
            load_image();
        }

        private void load_image() {
                **image = new ArrayList<String>();**
                Intent intent = getIntent();
                Bundle b = intent.getExtras();
                image =  b.getStringArrayList("IMAGE_URLS");

                    for (int i = 0; i < image.size(); i++) {
                    infoLog("URL--->>"+image.get(i));
                }

             } 
```

我也试过**image.clear();** 在后退按钮中。

```
OnClickListener backButtonListener = new OnClickListener() {

        @Override
        public void onClick(View v) {
            image.clear();
                    finish();
              }
  } 
```

它没有用。我没有找到原因。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:18:23.543

`ArrayList`返回的不一定`b.getStringArrayList(...)`是*backing* `ArrayList`，它很可能是一个副本。换句话说，对返回列表的修改不会影响存储在`Bundle`.

我建议你这样做

```
b.putStringArrayList("IMAGE_URLS", new ArrayList<String>()); 
```

# c# - 如何只有一个程序实例运行计划任务？

> ID：11645434
> 
> 赞同：-1
> 
> 时间：2012-07-25T08:16:36.477
> 
> 标签：c#, multithreading, scheduled-tasks

我的软件针对单个数据库在多台机器上运行。

我希望每天在软件中执行一项任务 - 例如。在中午。

我怎样才能确保这个任务是：

*   每天只执行一次，
*   无论当天哪台机器/用户碰巧运行该软件，都执行，并且
*   没有与软件的任何其他实例同时执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:20:47.283

在客户端这样做的问题是您的用户可能一天都不会运行该软件，或者他们可能在运行过程中遭受硬件故障（例如断电），从而导致永久锁定行。你不能保证任务的完整性，你甚至不能保证任务会运行。

如果您需要确保无论用户每天实际使用您的软件如何，它都能运行，这适用于数据库服务器上的计划任务（适用于[Windows](http://en.wikipedia.org/wiki/Windows_Task_Scheduler)和[Linux / UNIX ）。](http://en.wikipedia.org/wiki/Cron)

创建执行任务的可执行文件，然后创建计划任务以每天运行它。这样，只要数据库机器启动，您就有一个*始终*运行的实例，并且您不必担心跨客户端跟踪作业执行。

* * *

好的，所以您现在说由于公司规则，您无法在数据库框上运行计划任务。这是我要使用的方案：

1.  为作业调度创建一个表。为每个作业指定运行日期/时间、作业开始时间（如果未开始则为空）、进度字段，以及任务所需的名称和其他信息。
2.  让每个客户每 5 分钟左右轮询一次，以运行查询以查找具有过去日期的作业。选择行未锁定的第一个作业。
3.  锁定该行并将“作业开始时间”字段更新为当前时间。
4.  执行任务，在作业完成时更新进度字段。
5.  删除成功的行，否则将该行标记为“失败”。

重要的部分是“作业开始时间”字段，它允许客户端检查作业是否在很久以前（例如 3 小时）开始但从未完成，因此可以重试或提醒用户，具体取决于进度值.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:21:41.307

您可以在数据库中使用具有单行的表。使用事务来锁定包含最后更新日期的行。

每 X 分钟：

*   如果记录被锁定，则意味着有人正在执行该工作。没做什么。
*   如果记录已过时且未锁定，请将其锁定并执行此工作。如果失败，解锁记录。如果成功，则使用当前日期更新记录。
*   如果记录包含当前日期，则不执行任何操作。

* * *

**使用 SQL Server 的示例**

如果您在事务中运行它，它将锁定其他客户端的行

```
UPDATE Test WITH (ROWLOCK)
SET UpdateDate = yourDate
WHERE PrimaryKey = yourkey 
```

# spring - spring log service and transactions

> ID：11645435
> 
> 赞同：1
> 
> 时间：2012-07-25T08:16:42.490
> 
> 标签：spring, spring-transactions

in my app which is based on struts2, spring IoC and Transasctions, jpa, Hibernate i want to introduce an "audit log function" which will log all the important events, such as : a user has been created/updated, or a ticket was opened by somebody...
I want to keep this log in the database so for this i will have a DAO. I created also a service class for this purpose 'AuditLogService' which will have transactional behavior " propagation="REQUIRES_NEW" due to the fact that i want to log the event no matter if the logged event was successful or not.
The problem is that if i have something like this in my user service :

```
@Override
public boolean saveUser(UserDto userDto) {

    User u = new User();        
    u.setFirstName(userDto.getFirstName());
    u.setLastName(userDto.getLastName());
    u.setUserName(userDto.getUserName());       
    u.setPassword(userDto.getPassword());
    u.setIsLdapUser(userDto.getIsLdapUser());
    u.setId(userDto.getId());
    u.setAgentId(userDto.getAgentId());

    Boolean eventStatus = true;
        String event="";
    try{        
        if (u.getId()!=null){           
            dao.update(u);
            event = "UPDATE_USER";
        }else{
            dao.create(u);
            event = "CREATE_USER";          
        }           
    }catch (Exception e) {
        e.printStackTrace();
        eventStatus = false;
        return false;
    }
    finally {
        AuditLogEvent ale = auditLogEventDao.getAuditLogEvent(event);
        auditLogService.addAuditLogEvent(ale, eventStatus,u.toString());
    }

    return false;
} 
```

the audit log method is executed before committing the save user method and reports that the event was true, but in fact the event was false.
Any idea how can i solve this ? or maybe this approach is not the best... ?

*   updates !
    After Michael`s advices i have transformed my Service also into an Aspect

    ```
    @Aspect  
    @Service
    class AuditLogAspectImpl implements AuditLogAspect {
        @Autowired
        private AuditLogDao dao;

    @Autowired
    private UserDao userDao;

    @Override
    @AfterReturning(pointcut = "execution(* xxx.yy.services..*.save*(..))", returning = "retVal")   
    public boolean afterLogEvent(JoinPoint joinPoint,Object retVal){
    } 
    ```

    }

and now i have my method signature like here. everything works ok, i can detect if a operation failed or was successful and i can log this into a log file, but if i want to log this into a table from database via a dao class, when the operations fail and the transaction is rolled back my audit entry is not inserted.
First i thought that this is happening because the both operations, the actual method that need to be audited and the audit event are running in the same transactional context, and if one of them is rolled back the entire transaction is, and i have created a new transaction for the aspect logging part. But this seems not to work.

Any ideea why ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:27:21.963

The approach is not correct, because the declarative transaction are implemented through an around advice (AOP) so the whole method executes, including your finally block with the audit, then returns and the transaction is committed.

I'd recommend to write your own auditing Aspect as something like auditing or logging is a prime example for cross cutting concerns.

Have a look at [Aspect Oriented Programming with Spring](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html)

I'd go with the [After (finally) advice](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-advice-after-finally) so you can audit failed and successful stuff.

It's actually not that complicated… You won't need AspectJ, Spring Aspects will be enough for the given purpose.

# java - 您可以排除特定 PMD 规则的源文件吗？

> ID：11645443
> 
> 赞同：12
> 
> 时间：2012-07-25T08:17:07.513
> 
> 标签：java, pmd

在定义 PMD 规则集时，是否可以从特定规则中排除源文件？

我想做如下的事情：

```
<rule ref=rulesets/java/logging-java.xml>
  <exclude name="Ignore.java" />
</rule> 
```

规则名称似乎只支持排除。源文件有类似的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-09-26T18:41:01.713

如果您使用该`maven-pmd-plugin`工具运行 PMD，那么您可以包含一个列出要忽略的类和规则的属性文件。

## 排除-pmd.properties

```
org.apache.maven.ClassA=UnusedPrivateField,EmptyCatchBlock
org.apache.maven.ClassB=UnusedPrivateField,UnusedFormalParameter,UnusedPrivateMethod 
```

## pom.xml

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-pmd-plugin</artifactId>
        <version>3.8</version>
        <executions>
          <execution>
            <goals>
              <goal>check</goal>
            </goals>
            <configuration>
              <excludeFromFailureFile>exclude-pmd.properties</excludeFromFailureFile>
            </configuration>
          </execution>
          <execution>
            <goals>
              <goal>cpd-check</goal>
            </goals>
            <configuration>
              <excludeFromFailureFile>exclude-cpd.properties</excludeFromFailureFile>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

更多详细信息：[https ://maven.apache.org/plugins/maven-pmd-plugin/examples/violation-exclusions.html](https://maven.apache.org/plugins/maven-pmd-plugin/examples/violation-exclusions.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T20:18:34.157

并非没有编写自定义规则，该规则添加了按文件名排除的逻辑。

我认为在您的场景中，最好的方法是两次运行 PMD - 一次使用针对所有代码的更大规则集。还有一个针对您想要额外检查的代码的一组较小的规则。

这确实有生成两个报告的缺点。但这比您提出的问题（或创建自定义规则）更容易解决。PMD 可以生成 XML 输出。您可以通过编程方式合并这些，然后调用 PMD 的代码在最后生成 HTML 报告。或者您可以只拥有两个报告并立即完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-15T02:30:06.493

PMD 似乎只支持排除`RuleSet level`.

我们有相同的要求，即排除`Rule level`..

最后我们自己写了一个客户`wrapper lab`和控制器文件遍历逻辑来解决这个问题。

但是对于正常的 PMD 任务.. 我们可以将相同的规则一起作为一个规则集，并在规则集级别将其排除。

更新：我们发现扩展`net.sourceforge.pmd.lang.rule.XPathRule`和添加排除文件很简单。对于`Java Code Rule`，我们可以使用相同的方式在规则定义中排除文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-23T16:29:16.147

试试这个：

```
<rule ref="category/java/bestpractices.xml/UnusedPrivateField">
    <properties>
      <!--Ignore UnusedPrivateField on classes where the class name ends with DTO-->
      <property name="violationSuppressXPath" value="//ClassOrInterfaceDeclaration['.*DTO']"/>
    </properties>
  </rule> 
```

您还可以排除文件夹。例如，您要排除具有“样本”名称的文件夹，在这种情况下，值将类似于：

```
value="//ClassOrInterfaceDeclaration['.*/sample/.*']" 
```

有关更多详细信息，请在此处查看[https://github.com/pmd/pmd/issues/1142](https://github.com/pmd/pmd/issues/1142)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-12T22:21:07.123

是的你可以。
在您的代码/规则中，使用以下语法：

```
<rule ref=rulesets/java/logging-java.xml>
   <property name="violationSuppressXPath" 
      value="./ancestor::ClassOrInterfaceDeclaration[matches(@SimpleName, 'Ignore')]" />
</rule> 
```

**说明：**
来自[官方文档](https://pmd.github.io/latest/pmd_userdocs_suppressing_warnings.html#the-property-violationsuppressxpath)：

> 此属性定义要使用违规节点作为上下文节点执行的 XPath 查询。如果 XPath 查询匹配任何内容，则违规将被禁止

***笔记：***

1.  官方文档提供了按模式使用`contains`和`matches`排除文件的示例。
2.  官方文档警告使用`//`.

> 注意使用 . 引用上下文节点。应避免在表达式的开头使用 //，因为它会测试文件中的所有节点，并抑制比预期更多的违规行为。

3.  有关可以使用的 XPath 规则的更多信息，请查看[此页面](https://pmd.github.io/latest/pmd_userdocs_extending_writing_xpath_rules.html)。

# c# - 如何在 WPF 中自定义标题栏

> ID：11645446
> 
> 赞同：-2
> 
> 时间：2012-07-25T08:17:25.363
> 
> 标签：c#, wpf

> **可能重复：**
> [如何在标题栏中添加图像？](https://stackoverflow.com/questions/11642552/how-to-add-an-image-in-the-title-bar)

我想在 WPF (C#) 中自定义标题栏。您能告诉我如何添加 3 个图像而不是最大化按钮（正常、结束、按下）吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-25T10:59:41.820

请为此使用**Bland**。更改该按钮的图像并更改其事件代码。

# performance - Netty 数据流性能 + websocket 性能

> ID：11645450
> 
> 赞同：3
> 
> 时间：2012-07-25T08:17:34.607
> 
> 标签：performance, websocket, netty

我想查看一些特定的 netty 性能数据，并查看了netty 网站上[相关文章部分中的各种链接。](https://netty.io/Main/Related+Articles)

但他们中的大多数人都在谈论同时连接到 netty 服务器的数量，而不是关于**数据传输率或**我希望查看的类似内容。

此外，任何**专门针对 netty websocket 服务器的**性能数据？（我知道它可能在某种程度上也取决于使用的 websocket 协议，是吗？）

如果有人在这两个领域中的任何一个方面完成了一些工作/在网络上看到了一些链接，他们能否分享一些数据编号/见解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T22:57:44.640

您可以针对 Netty 运行 AutoBahn 测试。它包括一些性能测试。

有关说明，请参阅[此处](https://github.com/netty/netty/blob/master/example/src/main/java/io/netty/example/http/websocketx/autobahn/package-info.java)的 netty 4 和[此处](https://github.com/netty/netty/blob/3/src/main/java/org/jboss/netty/example/http/websocketx/autobahn/package-info.java)的 netty 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:24:14.117

模糊的数字在这里不会有太大帮助。涉及的参数数量如此之多，只有更具体的案例才能给你合理的数字。你需要达到什么目标？您可以通过一次又一次地向已连接的客户端发送相同的字节（或字节块）来测试最大传输速度。这为您提供了一个上限（针对硬件、操作系统和协议栈版本和设置）。

# python - Windmill-无浏览器

> ID：11645451
> 
> 赞同：1
> 
> 时间：2012-07-25T08:17:34.973
> 
> 标签：python, selenium, windmill, browser-testing

在 selenium 测试中，有 htmlunitdriver 可以在没有浏览器的情况下运行测试。我也需要用风车做这个。有没有办法在风车中做到这一点？

感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:53:04.603

如果您希望以无头模式（无显示器）运行 Windmill，您可以通过运行

Xvfb :99 -ac &

DISPLAY=:99 风车 firefox -e test=/path/to/your/test.py

# javascript - xml文件中的Javascript querySelector CDATA

> ID：11645452
> 
> 赞同：0
> 
> 时间：2012-07-25T08:18:02.290
> 
> 标签：javascript, xml, cdata

我有我的 xml 文件的这个路径：

```
<description>
    <![CDATA[<p class="image"><img width="250" height="83" src="http://www.mydomain.com/picture/pic01.png" class="post-image" alt="Post 01 Image" title="The Demo Post" /></p>My Content
    ]]>
</description> 
```

如何使用 querySelector (Javascript) 在 CDATA 中选择**标签 img的****src 属性。**

 **谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:25:03.143

```
var description = xmldoc.getElementsByTagName("description")[0],
    html = description.innerText || description.textContent,
    root = document.createElement("div"),
    imgsrc;

root.innerHTML = html;
imgsrc = root.querySelector("img").src; 
```**

# linux - 将端口 80 绑定到非 root 用户。中央操作系统

> ID：11645453
> 
> 赞同：1
> 
> 时间：2012-07-25T08:18:09.407
> 
> 标签：linux, centos, iptables, shoutcast

我需要允许端口 80 访问我的 CentO 上的非特权用户。我在我的服务器上运行 Shoutcast 和 Centova Cast 来托管音频流。在过去的几个月里，我一直在使用端口 80，使用以下命令没有问题.....

```
iptables -A PREROUTING -t nat -p tcp -d 5.10.69.104 --dport 80 -j DNAT --to 10.70.106.130:8000
iptables -A PREROUTING -t nat -p tcp -d 5.10.69.105 --dport 80 -j DNAT --to 10.70.106.130:8002
iptables -A PREROUTING -t nat -p tcp -d 5.10.69.106 --dport 80 -j DNAT --to 10.70.106.130:8004
iptables -A PREROUTING -t nat -p tcp -d 5.10.69.107 --dport 80 -j DNAT --to 10.70.106.130:8006 
```

我目前正在使用列出的最后一个 IP 地址 (5.10.69.107) 测试我的新 Centova Cast 控制面板。我无法通过端口 80 使用 Centova Cast 访问我的音频流。其他 3 个流正在使用 root 访问。

使用此页面上的建议[https://secure.centova.com/pages/faqs/display/using_port_80_for_streaming_121](https://secure.centova.com/pages/faqs/display/using_port_80_for_streaming_121)我尝试了 setcap 与以下

```
 setcap 'cap_net_bind_service=+ep' /home/centovacast/shoutcast/sc_serv
and 

    setcap 'cap_net_bind_service=+ep' /home/centovacast/vhosts/bcr64k/etc/server.conf
and
     setcap 'cap_net_bind_service=+ep' /home/centovacast/system/runascc/castd 
```

没有效果。我错过了什么吗？在服务器上运行的 Centova cast 的实际测试过程如下所示。

/home/centovacast/system/runascc/castd
/home/centovacast/shoutcast/sc_serv /home/centovacast/vhosts/bcr64k/etc/server.conf

如果工作正常，您应该能够在使用 5.10.69.107 的媒体播放器中听到音乐。它目前适用于 5.10.69.104、105 和 106。所有地址都在同一服务器上，音频来自同一来源。任何建议都会有所帮助。谢谢-鲍勃·斯瓦格蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:49:33.563

解决

我需要从 Iptables 中删除

```
iptables -A PREROUTING -t nat -p tcp -d 5.10.69.104 --dport 80 -j DNAT --to 10.70.106.130:8000
iptables -A PREROUTING -t nat -p tcp -d 5.10.69.105 --dport 80 -j DNAT --to 10.70.106.130:8002
iptables -A PREROUTING -t nat -p tcp -d 5.10.69.106 --dport 80 -j DNAT --to 10.70.106.130:8004
iptables -A PREROUTING -t nat -p tcp -d 5.10.69.107 --dport 80 -j DNAT --to 10.70.106.130:8006 
```

并替换为

```
iptables -A PREROUTING -t nat -p tcp -d 5.10.69.104 --dport 80 -j REDIRECT --to-port 8000
iptables -A PREROUTING -t nat -p tcp -d 5.10.69.105 --dport 80 -j REDIRECT --to-port 8002
iptables -A PREROUTING -t nat -p tcp -d 5.10.69.106 --dport 80 -j REDIRECT --to-port 8004
iptables -A PREROUTING -t nat -p tcp -d 5.10.69.107 --dport 80 -j REDIRECT --to-port 8006 
```

# ajax - 用户输入完输入标签后如何在数据库中搜索

> ID：11645455
> 
> 赞同：-1
> 
> 时间：2012-07-25T08:18:13.677
> 
> 标签：ajax

当用户输入他的手机号码时，我想在数据库中搜索相关信息。我想在用户输入其手机号码的最后一位后立即开始搜索

我只想知道如何触发 AJAX。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:21:59.737

所有你需要知道的都在[jQuery ajax() 文档中描述](http://api.jquery.com/jQuery.ajax/)

# asp.net-mvc-3 - MVC3 DropDownList - 如果仅显示 1 个项目，则不进行验证

> ID：11645461
> 
> 赞同：0
> 
> 时间：2012-07-25T08:18:47.640
> 
> 标签：asp.net-mvc-3

我有一个我在下拉列表中显示的项目列表....当我在视图中使用下面的代码时 (htmlattribute size = "4")

```
@Html.DropDownListFor(x => x.SelectedOptions, new SelectList(Model.Options, "Id", "Value", Model.SelectedOptions), new { size = "4", style = "width: 160px" }) 
@Html.ValidationMessageFor(modelItem => Model.SelectedOptions) 
```

验证工作...即整个列表以红色突出显示，并显示验证错误消息。

但是，当我使用下面的这一行时（htmlattribute size = "1"）

```
@Html.DropDownListFor(x => x.SelectedOptions, new SelectList(Model.Options, "Id", "Value", Model.SelectedOptions), new { size = "1", style = "width: 160px" }) 
@Html.ValidationMessageFor(modelItem => Model.SelectedOptions) 
```

验证不起作用，并且在控制器中触发了发布操作。

有什么想法可以让验证与在任何时候显示的单个项目（如下拉菜单）一起工作吗？

# javascript - 防止在 knockout.js 中运行计算属性（dependentobservable）

> ID：11645463
> 
> 赞同：0
> 
> 时间：2012-07-25T08:18:51.043
> 
> 标签：javascript, knockout.js

我想在构造时防止同步器属性，因为我可以将persistedObject 发送到X 类。

```
 function X(persistanceObject) {
        var self = this;

        self.xid = -1;
        self.syncer = ko.computed(function () {
            // if  object construction in progress then return 

            // persist properties....
        }, self);
        self.y = ko.observable(43);

        if (typeof persistanceObject !== 'undefined') {
            ko.mapping.fromJS(persistanceObject, {}, self.y);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:19:21.790

`deferEvalaution`您可以通过使用该选项来防止计算的 observable 立即评估。

它看起来像：

```
self.syncer = ko.computed(function () {
            // if  object construction in progress then return 

            // persist properties....
}, self, { deferEvaluation: true }); 
```

现在它不会评估，直到它的值被访问。`self.syncer()`如果您没有在您的 UI 中绑定它，那么您可能希望在所有属性都准备好之后至少调用一次 ( )。

# visual-studio-2010 - Visual Studio 2010 抱怨缺少 DLL

> ID：11645464
> 
> 赞同：0
> 
> 时间：2012-07-25T08:19:02.990
> 
> 标签：visual-studio-2010, dll

我创建了一个应该使用第三方库的项目。我分别指定了包含和 lib 文件的包含路径和链接器路径。我在链接器中添加了所有库（.lib 文件）-> 项目属性下的输入。现在一切都很好地编译和链接，但是当我启动我的程序时，它抱怨缺少一个 dll。我检查了 lib 文件夹，并且 dll 在那里。所以，现在我不明白 VS2010 怎么会抱怨这个。复制项目文件夹中的dll即可解决问题。但我不想在我的项目文件夹中复制我需要的所有 dll。这里有解决方案吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-03T13:47:04.447

尝试将 .dll 文件夹添加到您的项目属性 > 调试 > 环境中，例如

```
PATH=C:\PATH_TO_SOMETHING\DLL;%PATH% 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T08:26:31.417

我通常使用 Windows 资源管理器将所有第三方 dll 复制到我的项目中的 bin 文件夹中。然后只需在 vs. 所有引用的 dll 中添加对每个文件的引用，无论如何，即使它被编译和发布，它最终也会出现在你的 bin 文件夹中。

这样我就可以将我的项目的所有第三方 dll 放在一个地方。这种方式感觉更干净，尤其是当您在不同的服务器、硬盘驱动器、计算机等上备份、移动或复制项目时。

![在此处输入图像描述](../Images/bf7b2f067c4ede59cdf63b5dd998f50e.png)

# php - 如何使用我通过在 HTML 5 画布上绘制创建的 src 保存图像文件

> ID：11645468
> 
> 赞同：1
> 
> 时间：2012-07-25T08:19:13.567
> 
> 标签：php, javascript, image, html, html5-canvas

在我完成绘图后，我使用 HTML 5 画布在其上绘制了一些东西，我必须将该画布保存在硬盘中。我可以使用以下方法获取图像src：

```
var img = canvas.toDataURL(); 
```

在此之后，img 变量包含类似于以下值的内容

> 数据：图像/ PNG; BASE64，iVBORw0KGgoAAAANSUhEUgAAAfQAAABkCAYAAABwx8J9AAAP / UlEQVR4Xu2dX4wV1R3HZwSCkbWIRpA + UMqfatwArqyKVSMUbENbGx8KafvQxDaRYKMvbdPyxPWlaNK + 1FSDD / WptsEXUkWaytY1aK2y65YlS1SQrDR2Xa2KZTEQwNvvb51LLtvdvXPnnjt / znxucjJ3984553c + 5zfznd + cM2fCgA8EIAABCEAAAoUnEB ............

我可以像这样使用这个图像 src

```
<img id=myimage" src=img /> 
```

并且图像在网络浏览器中完美显示。

我想要做的是将此图像保存在硬盘上。有什么方法可以用 PHP 或 javascript 保存它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T08:51:30.677

对于 PHP >=5.2.0，您可以使用`data://`流包装器：

```
file_put_contents("file.png",file_get_contents("data://".$var_containing_the_data_uri)); 
```

where`$var_containing_the_data_uri`应替换为包含数据 URI 的变量，例如`$_POST['image']`.

您可以使用 AJAX post 发送数据。如果您使用 GET 方法，请注意 URL 长度限制。

或者，如果您想让客户端下载/保存图像，只需`<img>`使用数据 URI 创建一个元素`src`并告诉客户端右键单击并保存它。您还可以参考@Kode-Plus 声明的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T09:10:59.000

我最近这样做了，这是代码。

HTML 代码：

```
<form id="frm" method="post" action="php/saveimg.php" style="display:none">
<input type="submit"  value="submit"/>
<textarea name="data" id="data"></textarea>
</form> 
```

JS 代码：这里的“saveimg”是我的 html 中的一个按钮。

```
$("#saveimg").click(function(){
var dataurl=document.getElementById('mycanvas').toDataURL();
$("#data").val(dataurl);
$("#frm").trigger("submit");
}); 
```

PHP代码：

```
<?php
$data = $_POST['data'];
//removing the "data:image/png;base64," part
$uri =  substr($data,strpos($data,",")+1);
file_put_contents('wow.png', base64_decode($uri));
if(file_exists('wow.png')){
header("Content-Type: application/force-download");
header('Content-Disposition: attachment; filename="wow.png"');
readfile('wow.png');
}
?> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T08:25:35.370

您可以通过表单将数据发送到服务器。例如：

```
var img = canvas.toDataURL();
// store in (hidden) element of a form
document.forms["storeImgForm"].elements["imgSrc"].value = img;
document.forms["storeImgForm"].submit();

<form action="http://www.example.com/storeme.php" Method="POST" name="storeImgForm">
 <input type="hidden" name="imgSrc" value="">
</form> 
```

并从 PHP 中获取 $_POST["imgSrc"];

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T08:38:09.637

```
var data = canvas.toDataURL().split(",")[1],
    xhr = new XMLHttpRequest;

xhr.open( "POST", "file.php", true );
xhr.send(data); 
```

PHP：

```
file_put_contents( "somefile.png", base64_decode( file_get_contents( "php://input" ) ); 
```

# php - 如何在 kohana phpframework 中使用“HMVC”？

> ID：11645471
> 
> 赞同：0
> 
> 时间：2012-07-25T08:19:23.347
> 
> 标签：php, kohana, hmvc

我有一个项目想使用 kohana 框架，这个项目的组成如下：

test1（这是我项目中的一个模块）
    类
        控制器
        模型
    视图

test2（这是我项目中的另一个模块）
    类
        控制器
        模型
    视图

....更多的

我想要这样的网址：
[http](http://example.com/test1/controller/action/) ://example.com/test1/controller/action/ ...
[http://example.com/test2/controller/action/](http://example.com/test2/controller/action/) ...

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:36:26.163

您可以使用基本的 Kohana 结构，但使用两个应用程序文件夹而不是一个：

```
test1
    application
    index.php
test2
    application
    index.php
modules
system 
```

test1 和 test2 都将共享模块和系统目录。

然后确保更新 index.php 中的应用程序、模块和系统路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T12:49:44.153

我会选择做两个网站： /var/www/sites/site1/ 和 /var/www/sites/site2/

然后将模块和系统目录设置为 /var/www/kohana/system 和 /var/www/kohana/modules 并将 bootstrap.php 中的 SYSDIR/MODDIR 变量更改为相应的目录。

祝你好运！

# java - 如何用java语言命名java hashmap local var？

> ID：11645474
> 
> 赞同：0
> 
> 时间：2012-07-25T08:19:46.767
> 
> 标签：java

如标题：

如何用java语言命名java hashmap local var？

```
private static volatile Map<String, Session> ip_Session_Map = new ConcurrentHashMap<String, Session>(); 
```

关键是ip，价值是会话？

如何命名地图？

ipSessionMap？ip_Session_Map? ipToSessionMap？还是其他人？哪个最好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:23:11.473

这取决于您的组使用的命名约定。如果您使用大写和小写驼峰式大小写，那么由于这是一个类的实例，您将使用 LCC；

ipSessionMap

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:26:25.150

Java 程序中通常使用的命名约定是 CamelCase，内部变量以小写开头，类名以大写开头。见：[http ://www.oracle.com/technetwork/java/codeconv-138413.html](http://www.oracle.com/technetwork/java/codeconv-138413.html)

这意味着该变量应命名为“ipSessionMap”之类的名称。

我个人的偏好是省略“to”。有些人更愿意从变量名中省略类型信息（“Map”）。我从来不喜欢匈牙利符号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T08:28:00.467

Java 命名约定选择驼峰式：

1.  类名总是以大写开头：MyClassName
2.  变量和函数名将以小写开头：myNewVariable, myFunction()

在变量名中使用 '_' 是 PHP 约定。

[在这里](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)查看更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T08:28:40.730

Java Style 的元素说，

> 第一个单词使用小写，变量名中出现的每个后续单词的首字母仅大写。

另请参阅[Sun Java 编码约定](http://java.sun.com/docs/codeconv/CodeConventions.pdf)

根据那些文件，ipSessionMap 看起来不错。甚至 Sun Java Source Code 在大多数地方都遵循同样的标准。但是是否遵循这个约定完全取决于你的团队的兴趣。所以要遵守你团队的编码约定。

# node.js - 带有 node.js 的 Websockets 插件

> ID：11645476
> 
> 赞同：0
> 
> 时间：2012-07-25T08:19:57.780
> 
> 标签：node.js, websocket

我正在使用 websockets 开发一个应用程序，并希望使用 node.js 作为后端。我用谷歌搜索，发现节点本身不支持 websockets，因此需要插件。

我将注意力集中在 socket.IO 上是否有更好的选择？此外，使用 socket.IO 是否安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:22:32.137

还有其他选项，例如 sockjs，但 socket.io 更成熟，并且有更多的信息/积极的开发。

# java - 如何在 Spring 的属性文件中以加密形式存储密码

> ID：11645477
> 
> 赞同：17
> 
> 时间：2012-07-25T08:19:57.067
> 
> 标签：java, spring, encryption, properties

我是 Spring 框架的新手，我正在使用 Spring 框架来管理我的数据库连接等等。应用程序从属性文件中读取我的数据库连接参数。我需要的是将我的连接密码加密存储在属性文件中。这是我的数据源 xml 文件

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd">

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location">
            <value>file:${DBConfigFile}</value>
        </property>
    </bean>

    <bean id="myDataSource"   class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
        <property name="driverClass" value="${jdbc.driverClassName}" />
        <property name="jdbcUrl" value="${jdbc.url}" />
        <property name="user" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
        <property name="initialPoolSize"><value>3</value></property>
        <property name="minPoolSize"><value>3</value></property>
        <property name="maxPoolSize"><value>50</value></property>
        <property name="idleConnectionTestPeriod"><value>200</value></property>
        <property name="acquireIncrement"><value>1</value></property>
        <property name="maxStatements"><value>0</value></property>
        <property name="numHelperThreads"><value>3</value></property>
    </bean>

</beans> 
```

我想将加密的密码写入属性文件，我想知道 Spring 是否可以使用算法自动解密它。是否可以通过配置。先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T08:45:14.607

据我所知，Spring 不支持此功能，但其他一些项目可能会有所帮助：

*   [Jasypt 库](http://www.jasypt.org/)提供对加密应用程序配置的支持（并且还与 Spring 集成）。查看详细信息：[http ://www.jasypt.org/encrypting-configuration.html](http://www.jasypt.org/encrypting-configuration.html)

*   [OWASP 项目](https://www.owasp.org/index.php/Main_Page)提供了带有[DefaultEncryptedProperties](https://github.com/ESAPI/esapi-java-legacy/blob/develop/src/main/java/org/owasp/esapi/reference/crypto/DefaultEncryptedProperties.java)和[ReferenceEncryptedProperties实现的](https://github.com/ESAPI/esapi-java-legacy/blob/develop/src/main/java/org/owasp/esapi/reference/crypto/ReferenceEncryptedProperties.java)[EncryptedProperties](https://github.com/ESAPI/esapi-java-legacy/blob/develop/src/main/java/org/owasp/esapi/EncryptedProperties.java)接口，这些实现可以在您的应用程序中使用。另见：[https ://www.owasp.org/index.php/How_to_encrypt_a_properties_file](https://www.owasp.org/index.php/How_to_encrypt_a_properties_file)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-19T17:43:39.023

我正在使用 spring 4 和 jasypt 1.9。Jasypt 文档没有为 spring 4 提供明确的支持。我也找不到以依赖项命名`EncryptablePropertyPlaceholderConfigurer`的`org.jasypt:jasypt:1.9.2`类。

我编写了一个简单的静态加密实用程序 java 类（它使用 jasypt API）。

```
public class EncryptionUtil {
    static PooledPBEStringEncryptor encryptor = null;
    static {
        encryptor = new PooledPBEStringEncryptor();
        encryptor.setPoolSize(4); 
        //  There are various approaches to pull this configuration via system level properties. 
        encryptor.setPassword("parashar");
        encryptor.setAlgorithm("PBEWITHMD5ANDDES");
    }

    public static String encrypt(String input) {
        return encryptor.encrypt(input);
    }

    public static String decrypt(String encryptedMessage) {
        return encryptor.decrypt(encryptedMessage);
    }

} 
```

我使用这个实用程序来加密我打算保存在我的属性文件中的密码。

然后我简单地使用 spring EL 将属性解密回我的 spring config xml 中。

```
<property name="password" value="#{T(amit.parashar.EncryptionUtil).decrypt('${db.password}')}" /> 
```

编辑：回答如何隐藏加密密码：

```
Use system args while bringing up your java process. 
```

> 例如：java -Dwhatismyencpawd="parashar"

并像使用它一样

```
encryptor.setPassword(java.lang.System.getProperty("whatismyencpawd")); 
```

这样只有应用管理员知道密码。这种方式密码将作为 ps 命令的一部分在 UNIX 机器上可见。

或者您也可以配置和读取操作系统级别的环境变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T08:43:22.267

这没有任何意义，因为如果 Spring 可以解密它，那么其他人也可以。这种加密不会有任何区别，它不会保护任何东西。它只会带来危险的东西——虚假的保护感。

也许您可以使用其他数据库身份验证方式，例如 MS SQL 服务器允许使用 Windows 安全性而不是密码身份验证。Postgres 也是如此（它通过用户帐户或使用 SSL 证书提供访问权限）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-10T17:52:38.673

可以使用spring cloud config提供的[加解密](https://cloud.spring.io/spring-cloud-config/spring-cloud-config.html#_encryption_and_decryption)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-24T22:17:47.980

您可以编写一个 bean 来解密您的密码，然后将 bean 注入任何需要密码的地方

# java - 如何在java中自定义格式数字？

> ID：11645480
> 
> 赞同：0
> 
> 时间：2012-07-25T08:20:06.810
> 
> 标签：java, format, number-formatting

我有一个用户输入的字符串`25|35|40`。我已将以下任何数字`100=25+35+40`格式化为这种格式。例如，

```
5  --> 05|00|00
30 --> 25|05|00
65 --> 25|35|05 
```

应保持 25|35|40 的顺序。这类似于日期格式 MM:dd:yyyy，因为我们知道月份不能超过 12 并且日期不能超过 31。但是这里可以出现任何值。其位置的值确定最大值。另一个例子，

如果用户字符串是`40|110|2500|350`

```
5    --> 05|000|0000|000
100  --> 40|060|0000|000
450  --> 40|110|0300|000
2900 --> 40|110|2500|250 
```

如果数量超过总数`3000=40+110+2500+350`，我可以将其设为`number -= 3000`。目前我正在尝试使用自定义代码对其进行格式化，该代码将检查数字并创建所需的输出字符串。java中有没有可用的内置格式API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:29:56.757

没有针对此类特定用例的公共 API。这是解决它的一种方法：

```
int num = 65;
int i1 = num > 25 ? 25 : num;
int i2 = num < 25 ? 0 : num > 60 ? 35 : num - 25;
int i3 = num < 60 ? 0 : num - 60;
System.out.format("%02d|%02d|%02d", i1, i2, i3); 
```

印刷

```
25|35|05 
```

或者，概括一下：

```
public static String format(String format, int num) {
    String[] split = format.split("\\|");
    int numLeft = num;
    StringBuilder result = new StringBuilder();
    for (int i = 0; i < split.length; i++) {
        int boundary = Integer.parseInt(split[i]);
        int number = Math.min(numLeft, boundary);
        if (result.length() > 0) {
            result.append('|');
        }
        result.append(leftPad(number, split[i].length()));
        numLeft = Math.max(0, numLeft - boundary);
    }
    return result.toString();
}

private static String leftPad(int number, int length) {
    StringBuilder sb = new StringBuilder();
    sb.append(number);
    while (sb.length() < length) {
        sb.insert(0, '0');
    }
    return sb.toString();
}

public static void main(String[] args) {
    String result = format("25|35|40", 65);
    System.out.println(result);
} 
```

# java - 根据jsp形式创建对象

> ID：11645483
> 
> 赞同：3
> 
> 时间：2012-07-25T08:20:17.303
> 
> 标签：java, jsp, servlets, request

我有类`Person`：

```
package Model;

import java.util.Set;

public class Person {
    private String firstName ; 
    private String lastName ; 
    private int id ; 

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }
    public void setLastName(String lastName) {
        this.lastName = lastName;
    }
    public void setId(int id) {
        this.id = id;
    }

} 
```

我创建了带有以下详细信息的jsp表单`Person` ：

```
<fieldset>
        <legend>Create new customer</legend>
        <form action="CreatePersonServlet" method="GET">
            ID : <input type="text" name="id" /> <br /> 
                        First Name : <input type="text" name="firstName" /> <br /> 
                        Last Name : <input type="text" name="lastName " /><br /> 
        </form>
</fieldset> 
```

我有`CreatePersonServlet`servlet 的方法：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        Person newPerson= new Person () ; 

    } 
```

我应该写什么，以便根据从 jsp 表单发送的`newPerson`对象将填充他的所有成员。`request`在jsp中我是这样知道的

```
<jsp:useBean id="newPerson" class="Person" scope="session"/>
<jsp:setProperty name="newPerson" property="*"/> 
```

但现在该成员的详细信息不在，`session`而是在`request`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:46:14.607

scope 属性用于决定 bean 的生命周期和 bean 的可见性。

有四个属性，`scope`它们是`page, request, session, application`

默认值为`page`.

我认为这就是你想要的：

`<jsp:useBean id="newPerson" class="Model.Person" scope="request"/>`

与问题无关：建议使用小写的包名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T08:48:40.610

您可以使用从**请求**对象中检索**会话对象**

 **```
HttpSession session = request.getSession(false); 
```**

# asp.net - 从多个控制器的操作输出中编写页面

> ID：11645484
> 
> 赞同：2
> 
> 时间：2012-07-25T08:20:18.930
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, architecture

这是一个建筑哲学问题:)

您想要创建非常简单的基于 MVC 的模块化“CMS”的图像。实际上，您唯一希望它做的事情就是您可以使用以下内容（伪语言）指定（例如 XML）每个页面的结构：

```
使用布局：Subpage.cshtml
对于“标题”部分（布局中的占位符）渲染控制器“标题”，操作“子页面标题”
对于“LeftCol”部分渲染控制器“菜单”操作“MainMenu”
对于“内容”部分渲染控制器“文章”操作“列表”
等等

```

那么，什么是优雅和推荐的方法呢？我现在可以想到两种方法：

选项1：

定义自己的路由，它将捕获所需的 URL 并为此请求创建自己的 MyMvcHandler。在此处理程序中，处理不会实例化控制器（没有一个“主”），而是会读取“页面结构配置”（上面的示例），实例化所有必需的控制器..但我不确定，该做什么这一点 - 如何收集动作的结果并将它们放入布局中？

选项 2：让默认的 MvcHandler 存活，并始终使用一些默认操作调用一些“MasterController”，这只会返回 View(layoutPage); 在布局页面中，实现“页面部分”（内容的占位符）作为我自己的辅助方法，类似于 Html.RenderAction - 仅定制为查看“页面结构配置”并呈现正确的控制器+动作。但是这样一来，MasterController 在管道中对我来说似乎真的没用，有什么办法可以摆脱他吗？

你能想出更好的办法吗？你能看到这些方法的一些基本起伏吗？你能给我指出一些关于这个主题的好资源吗？（我找不到任何）。

非常感谢 MVC 忍者 ;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:57:43.153

这当然是可能的，因为你提到的方法（这比部分方法更灵活）：

```
Html.RenderAction("AnyAction", "AnyController") 
```

我认为这个概念的最大问题是状态。如果您走这条路，并且“AnyController”需要维护状态，则需要将其形式化。否则：谁将拥有查询字符串和 post 变量的权威？如果变量名发生冲突，你会怎么做？

请注意，ASP.NET 经典已经通过其回发状态字段以某种方式“解决”了这个问题。它为所有页面元素分配唯一 ID，并将其放入树中。最大的缺点是它很快就会变得臃肿和低效，就像 ASP.NET 经典的情况一样。

您还可以查看其他 CMS 是如何解决此问题的，例如 N2CMS（免责声明：我对任何其他 CMS 几乎没有经验）。我认为它的实现在某种程度上类似于您的第二个选择。您在 CMS 中指定哪些块进入哪个区域，然后系统调用所有视图。不同之处在于，对于子视图，视图的内容模型是由系统而不是特定控制器计算出来的，尽管您可以通过调用 RenderAction 而不是 RenderView 从概念上改变它（不确定在实践中有多可行）。但在那种情况下，你又要参加州讨论了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:48:39.447

由于您想要不同的控制器并且焦点类似于 CMS，因此我建议以下内容：

1.  有 1 个控制器来处理用户看到的主要 URL 和布局（如您的选项 2）

2.  对于每个部分，让 Ajax 回调以获取每个部分的 HTML（标题/菜单/文章/等）

是的，这打了 4 次电话，...但权衡是巨大的。

例如一些好处：

1.  每个部分现在可以有独立的缓存头。（例如，布局可以缓存几天/几周，而不是修改）

2.  每个部分都可以独立刷新，而无需客户端导航或刷新页面。

3.  由于每个部分都是独立处理的，因此如果需要，可以使用 SignalR 处理实时更新。

4.  这些部分（假设它们也可能进一步划分）可以跨页面共享。（例如，文章可以在适用的情况下在多个屏幕上重复使用，......并且也属于与好处＃1相同的缓存好处）

5.  如果需要，可以在刷新每个内容片段时通过参数对每个部分进行更改。

6.  如果需要，可以轻松操作每个部分/控制器/动作以传回 Json 而不是 HTML，以便客户端可以增强功能体验。（这是假设您没有使用诸如淘汰赛之类的框架进行客户端 MVC）

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:21:01.103

母版页是实现目标的更简单方法。母版页可用于在应用程序的多个页面之间共享公共内容。这是 ASP.net MVC 网页的链接，用于[使用查看母版页创建页面布局](http://www.asp.net/mvc/tutorials/older-versions/views/creating-page-layouts-with-view-master-pages-cs)

希望这可以帮助。

# cmake - 必须如何定义我自己的 cmake 函数

> ID：11645485
> 
> 赞同：1
> 
> 时间：2012-07-25T08:20:21.780
> 
> 标签：cmake

我使用 cmake 2.8.8。我想让函数获取源文件列表检查它们是否存在并将存在的文件放在另一个我必须在我的 CMakeList.txt 中使用的变量中。这是我的函数

```
function(SetSources SourceList Sourceses )

message(STATUS "Sourcelist " ${SourceList})

foreach(SRC ${SourceList})

FILE(GLOB Sourceses ${SRC})

message(STATUS "Sources " ${Sourceses})

endforeach(SRC)

endfunction(SetSources) 
```

这是我所说的函数以及我向其推送的参数

```
set(SourceList plugincustomresourcemgr.cpp PluginCustomResourceDLL.cppextendedarchive.cpp)

set(Sourceses)

SetSources(SourceList Sourceses) 
```

输出形式

```
message(STATUS "Sourcelist " ${SourceList}) 
```

是

```
--SourceList SourceList 
```

这不是传递值。我做错了什么以及我必须如何处理函数参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:42:31.093

我发现 cmake 中的函数具有固定数量的参数（如 c/c++）当我定义变量时，我必须将他的值与 ${} 传递给函数。如果变量有多个值并且函数只有一个参数，函数将获取最后一个值。如果我不通过引用传递变量（${}）函数将获得变量的名称，如值。

为了解决我的问题，我定义了没有参数的宏

```
macro(checkSources)

foreach(SRC ${SourceList})

file(GLOB Sources ${SRC})

endforeach(SRC)

endmacro(checkSources) 
```

如果我知道在当前 CMakeList.txt 中定义了变量“SourceList”和“Sources”，则此工作正常，使用

```
file(GLOB Sources ${SourceList}) 
```

但这是我测试cmake的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-27T08:45:41.360

一个简单的解决方案是使用 ARGV 和 ARGC 相互配合。它们的含义就像C/C++中main的argv和argc，分别代表参数个数和参数个数。例如：

```
function(showSrcList srcList)
message("ARGC = "${ARGC})
message("ARGV = "${ARGV})

set(i 0)
while(i LESS ${ARGC})
    message("ARG = "${ARGV${i}}) #ARGV0、ARGV1...
    math(EXPR i "${i} + 1")
endwhile()
endfunction()
showSrcList (a.c b.c c.c d.c)

==== output ====
ARGC = 4
ARGV = a.c b.c c.c d.c
ARG = a.c
ARG = b.c
ARG = c.c
ARG = d.c 
```

# c# - IDisposable 字段

> ID：11645489
> 
> 赞同：0
> 
> 时间：2012-07-25T08:20:43.320
> 
> 标签：c#, .net-4.0, garbage-collection, idisposable

> **可能重复：**
> [何时实施 IDisposable 的一般规则](https://stackoverflow.com/questions/1125693/general-rule-for-when-to-implement-idisposable)

我正在寻找释放一次性物品的正确方法。在这种情况下，有上述`obj1`方法。`Close()``Dispose()`

```
 class Test{
      private DisposableObject1 obj1;
      public void Method1(){
        //creating obj1
      }

      public void Method2(){
        //using obj1
      }

       public void Method3(){
        //releasing obj1
        obj1.Close();
        obj1.Dispose();
        obj1 = null;
      }

    } 
```

那么上面 ( `Method3()`) 的方法是处理 的正确方法`obj1`吗？请注意，它在许多方法中都使用过，那`using`不是正确的方法。

# android - 如何获取数据库模式的版本？

> ID：11645491
> 
> 赞同：1
> 
> 时间：2012-07-25T08:20:48.537
> 
> 标签：android, database, sqlite, sqliteopenhelper

我想将数据库架构升级到新版本。在我这样做之前，首先我需要从现有数据库中获取一些数据。问题在于，如果我尝试使用这些读取数据库：

```
DatabaseHelper dbHelper = new DatabaseHelper(context, DB_VERSION);
SQLiteDatabase database = dbHelper.getReadableDatabase(); 
```

它可能会被升级（in `DatabaseHelper.onUpgrade()`），这是一种不受欢迎的行为，因为我只想从旧版本中提取一些记录，而不是升级版本。我想我可以通过在 DB_VERSION 中传递当前版本来做到这一点，但是如何获取数据库的当前版本（请记住，我正在将整个应用程序升级到下一个版本）？

还是有另一种方法可以从数据库中获取一些记录而不会导致升级？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:20:18.657

直接使用`SQLiteDatabase`并执行查询获取版本。它不会尝试升级或以其他方式修改它。以只读方式打开以获得额外保护:)

# python - 如何标准化 hexbin 图？

> ID：11645494
> 
> 赞同：7
> 
> 时间：2012-07-25T08:20:56.513
> 
> 标签：python, matplotlib

我在 hexbin 图中有两个分布，如图所示： ![在此处输入图像描述](../Images/646ebaf2da59747a1becbeddcb2705d9.png)

一种分布的最大值约为 4000，而另一种分布的最大值约为 2500。因此绘图颜色不同。

我想如果我知道 hexbin 图的最大值，我可以将其标准化。除了查看颜色条之外，我如何知道最大 hexbin 中有多少点？我正在使用 matplotlib.pyplot.hexbin

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T22:41:40.987

您可以获得用于标准化颜色拾取数据的规范的最小值和最大值。

```
hb = plt.hexbin(x, y)
print hb.norm.vmin, hb.norm.vmax 
```

然后，您可以继续将包含此信息的规范传递给第二个情节。这样做的问题是第一个图的范围必须比第二个更大，否则第二个图不会全部着色。

或者，最好，您可以构造一个范数，将其传递给两个图的 hexbin 函数：

```
norm = plt.normalize(min_v, max_v)
hb1 = plt.hexbin(x1, y1, norm=norm)
hb2 = plt.hexbin(x2, y2, norm=norm) 
```

高温下，

# coldfusion - 元素未定义错误

> ID：11645496
> 
> 赞同：1
> 
> 时间：2012-07-25T08:21:02.257
> 
> 标签：coldfusion, coldfusion-9, coldfusion-10

我正在尝试向我的 cfgrid 添加搜索功能。但我得到一个“元素名称在 FORM 中未定义。错误”。第一次加载页面时，它会显示网格。但是在我按下搜索按钮后，就会出现错误。这是代码：

```
 <form name="DropDown" method="post">
    <!--- query DB for the first drop down list --->
    <cfquery name="Getprocedures" datasource="caselogs">
        SELECT distinct procedures.procedure_name, procedures.procedure_id 
        FROM case_logs inner join procedures 
                     on procedures.procedure_id=case_logs.procedure_id
        WHERE case_logs.trainee_id=#form.name#
    </cfquery>

    <cfform action="#cgi.script_name#" method="post"> 
        <select name="Ddl_form" size="1">
        <cfoutput query="Getprocedures">
            <option value="#procedure_id#" <cfif isDefined('form.Ddl_form')> <cfif form.Ddl_form eq "#procedure_id#">selected</cfif> </cfif>> #procedure_name#</option>
        </cfoutput>
        </select>

        Status 
        <select name="Ddl_status" size="1">
            <option value="P"<cfif isDefined('form.Ddl_status')> <cfif form.Ddl_status eq "P">selected</cfif> </cfif>>In Progress</option>
            <option value="S"<cfif isDefined('form.Ddl_status')> <cfif form.Ddl_status eq "S">selected</cfif> </cfif>>Submitted</option>
            <option value="R"<cfif isDefined('form.Ddl_status')> <cfif form.Ddl_status eq "R">selected</cfif> </cfif>>Reviewed</option>
            <option value="-1" <cfif isDefined('form.Ddl_status')> <cfif form.Ddl_status eq "-1">selected   </cfif> </cfif>>All</option>
        </select>
        <input type="submit" name="search" value="Search">
    </cfform>

    <cfif isdefined('form.search')>
          <cfquery name="qGetBooks" datasource="caselogs">
                 SELECT CASE_LOGS.performed_dt,CASE_LOGS.submitted_dt,procedures.procedure_name,hospitals.hospital_code,case_logs.status 
                 FROM  case_logs
                        inner join procedures on procedures.procedure_id = case_logs.procedure_id
                        inner join hospitals on hospitals.hospital_id = case_logs.hospital_id
                 WHERE case_logs.trainee_id=2 and case_logs.status='#Form.Ddl_status#' and case_logs.procedure_id=#FORM.Ddl_form#
       </cfquery>
   <cfelse>
          <cfquery name="qGetBooks" datasource="caselogs">
                 SELECT CASE_LOGS.performed_dt,CASE_LOGS.submitted_dt,procedures.procedure_name,hospitals.hospital_code,case_logs.status 
                 FROM   case_logs
                        inner join procedures on procedures.procedure_id = case_logs.procedure_id
                        inner join hospitals on hospitals.hospital_id = case_logs.hospital_id
                 WHERE  case_logs.trainee_id=2 and case_logs.status='P' 
          </cfquery>
   </cfif>  

   <cfform name="gridform"> 
          <cfgrid name="BooksGrid" 
                 format="HTML" 
                 selectmode="row"
                 query="qGetBooks" 
                 title="Students"
                 insert="true"
                 insertbutton="Insert Book"
                 width="500">
              <cfgridcolumn name="performed_dt" header="DatePerformed" />
              <cfgridcolumn name="submitted_dt" header="SubmitedDate" />
              <cfgridcolumn name="procedure_name" header="Procedure" />
              <cfgridcolumn name="hospital_code" header="Hospital" />
              <cfgridcolumn name="status" header="Status" />
          </cfgrid> 
   </cfform> 
```

这是错误：

```
The error occurred in C:/ColdFusion10/cfusion/wwwroot/Caselogs/Trainee/caselogs.cfm: line     10

   8 :     select distinct procedures.procedure_name, procedures.procedure_id from case_logs 
  9 :     inner join procedures on procedures.procedure_id=case_logs.procedure_id
 10 :      where case_logs.trainee_id=#form.name#
 11 :   </cfquery>
 12 : 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T12:27:50.937

您需要`cfparam`该表单字段，或者除非表单已提交，否则不要运行搜索。页面首次加载时，该`FORM.NAME`字段不存在，因为表单尚未提交。尝试这个：

```
<cfparam name="FORM.name" default="0" />
<cfset FORM.Name = Val(FORM.Name) /> 
```

这将确保该`FORM.name`值存在，并且它是一个数值。您还应该`cfqueryparam`在您的 SQL 语句中使用以确保您没有任何 SQL 注入漏洞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T01:02:16.007

在您的搜索中，您没有传递 name 元素，只需将其作为隐藏元素添加到搜索表单中：

```
<input type="hidden" name="name" value="#form.name#"> 
```

# java - 是否可以查看您的应用在所有设备中的外观？

> ID：11645499
> 
> 赞同：0
> 
> 时间：2012-07-25T08:21:31.323
> 
> 标签：java, android, user-interface

我正在开发一个应用程序，它在我的安卓手机上看起来不错。我如何确定它在其他 Android 设备（智能手机、平板电脑等）中也看起来不错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:28:23.310

观看 Google I/O 2012 的这段视频，该视频展示了 Eclipse 中的一项新功能，该功能可在不同设备的不同屏幕上显示您的应用程序。

[http://www.youtube.com/watch?v=Erd2k6EKxCQ（~](http://www.youtube.com/watch?v=Erd2k6EKxCQ)分钟 19:00）

# javascript - Bootstrap：手风琴不会自动折叠先前打开的面板

> ID：11645501
> 
> 赞同：12
> 
> 时间：2012-07-25T08:21:34.410
> 
> 标签：javascript, asp.net, asp.net-mvc, twitter-bootstrap

我需要创建一个引导手风琴。下面的标记工作正常，但它不会自动折叠先前打开的元素。例如，打开 panel1，然后单击 panel2.. panel1 应该会自动关闭，但它不会。我曾尝试从引导站点 (http://twitter.github.com/bootstrap/javascript.html#collapse) 完全复制标记，但它不起作用。我错过了什么？

```
<h3>ACCORDION DEMO</h3>
<div class="accordion" id="accordion1">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" data-parent="accordion1" data-toggle="collapse" href="#panel1">Panel 1</a>
        </div>
        <div class="accordion-body collapse" id="panel1">
            <div class="accordion-inner">
                <p>This is accordion panel 1 content</p>
            </div>
        </div>
    </div>
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" data-parent="accordion1" data-toggle="collapse" href="#panel2">Panel 2</a>
        </div>
        <div class="accordion-body collapse" id="panel2">
            <div class="accordion-inner">
                <p>This is accordion panel 2 content</p>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-25T12:03:46.563

只需替换`data-parent="accordion1"`为`data-parent="#accordion1"`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-13T18:34:48.153

对于后代，我刚刚发现可以防止手风琴面板自动折叠的另一个原因是，如果`.panel`元素不是手风琴（`.panel-group`元素）的直接子元素。我将面板内容包装`div`在我的内部`.panel-group`，而手风琴不喜欢这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T09:01:56.653

我遇到了同样的行为，我删除了引导转换模块并且它起作用了。还修复了弹出框消失的问题。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-08-06T16:27:34.587

我遇到了同样的问题，并根据预感做了一些改变。它奏效了，现在我想分享我的发现，以防它对某人有帮助。我在多个页面上使用手风琴折叠功能，这使得它们行为奇怪.. 为不同的面板提供独特的 href 和面板 ID 有所帮助。

# asp.net-mvc-3 - 如何在 MVC3 上创建动态角色和授权

> ID：11645503
> 
> 赞同：1
> 
> 时间：2012-07-25T08:21:47.997
> 
> 标签：asp.net-mvc-3, asp.net-roles

我使用 C#-MVC3（用于网络）。

我想创建一个要在站点中执行的操作列表（例如 - 打开一篇新文章、评论一篇文章等），并且站点的管理员将创建角色（管理员、文章管理员、编辑器、访客等）。 .) 并且对于每个角色 - 选择它可以执行的操作（从列表中）。

我想使用“角色”和“授权”属性，但它不是动态的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:23:40.253

您可以创建一个 AuthorizationFilter 并实现它以包括对您的角色的动态检查。

使用此示例：http: [//geekswithblogs.net/brians/archive/2010/07/08/implementing-a-custom-asp.net-mvc-authorization-filter.aspx](http://geekswithblogs.net/brians/archive/2010/07/08/implementing-a-custom-asp.net-mvc-authorization-filter.aspx)

请注意，上面的示例使用了静态角色列表，但显示了 AuthorizationFiter 的基本设置。这可以通过修改 OnAuthorization() 方法轻松调整。

# linux - Linux内核内存管理，它是否一直使用连续的内存页面？

> ID：11645513
> 
> 赞同：1
> 
> 时间：2012-07-25T08:22:02.843
> 
> 标签：linux, memory-management, kernel

linux内核是否连续分配内存，例如从`malloc`？如果没有大的部分可用，但较小的部分可以作为一个整体，Linux 会使用它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:25:46.827

**我假设在问题中，“连续”是指物理内存。**

您在进程执行时看到的所有地址，例如当您使用`gdb`or时`addr2line`，都是虚拟地址。到物理内存的映射保留在底层。

`malloc`通常**不是**系统调用。它是围绕特定平台的系统调用（例如`mmap`or `brk`）的包装器。当被进程调用时，它会导致调用进程的内存被扩展。

例如，`malloc(40960)`可以请求 10 页内存，假设 4KB 页大小。[内存管理单元](https://en.wikipedia.org/wiki/Memory_management_unit)(MMU) 不会立即在物理内存中分配 10 页。而是将新条目（本例中为 10 个）添加到调用进程的地址空间，即在该进程的*页表*中添加新条目。此虚拟内存将是连续的。

现在假设在稍后的执行过程中，进程尝试使用这块新分配的内存，此时，由于进程触及了未分配的内存，因此调用了页面错误。然后，MMU 将在 RAM 中分配一个实际的物理页（4096 个连续字节），更新页表并恢复进程的执行。

所以我们唯一可以确定的是，40960 字节中的 4096 字节（一页）在物理内存 (RAM) 中是连续的，尽管整个 40960 字节（10 页）在虚拟内存中显示为连续的。这 10 个页面中的任何一个或所有页面都可以映射到分散在 RAM 中的页面。

虚拟内存隐藏了这一点，并为进程提供了一个干净、连续的空间。MMU 使用页表通过将虚拟内存映射到物理内存来提供后端支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T05:57:16.200

在 linux 内核中，内存分配是使用 kmalloc 或 vmalloc 完成的。kmalloc 分配物理上连续的内存，而 vmalloc 分配物理上不连续的内存。kmalloc 和 vmalloc 都会为您提供连续的虚拟内存空间。这是使用页表完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:03:52.780

我相信使用 malloc() 分配内存的物理映射可以是不连续的，并且确实是操作系统的责任。它可能是连续的，也可能不是连续的。

想到一个名为 kmalloc() 的函数，如果可用，它将分配连续的“物理”内存。

# java - 如何在摇摆中找到异常

> ID：11645515
> 
> 赞同：1
> 
> 时间：2012-07-25T08:22:10.930
> 
> 标签：java, swing, exception, event-dispatching, repaintmanager

我对 java swing 有疑问。我有时会在随机时间得到这个 NullPointerException（也许在某些绘画方法？）：（该项目有超过 100 个类，所以在这里发布代码没有意义，此外我对找到这种 excp 的正确方法感兴趣。这不在我的源代码中）

> javax.swing.plaf.basic.BasicTextUI$RootView.paint(Unknown Source) at javax.swing.plaf.basic.BasicTextUI.paintSafely(Unknown Source) 的线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常javax.swing.plaf.basic.BasicTextUI.paint(Unknown Source) at javax.swing.plaf.basic.BasicTextUI.update(Unknown Source) at javax.swing.JComponent.paintComponent(Unknown Source) at javax.swing.JComponent。在 javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(Unknown Source) 在 javax.swing.RepaintManager$PaintManager.paint(Unknown Source) 在 javax.swing.在 javax.swing.JComponent._paintImmediately(Unknown Source) 在 javax.swing.JComponent 的 RepaintManager.paint(Unknown Source)。在 javax.swing.RepaintManager.paintDirtyRegions(Unknown Source) 在 javax.swing.RepaintManager.seqPaintDirtyRegions(Unknown Source) 在 javax.swing.RepaintManager.paintDirtyRegions(Unknown Source) at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source) 在 javax.swing.SystemEventQueueUtilities$ComponentWorkRequest。在 java.awt.EventQueue.dispatchEventImpl(Unknown Source) at java.awt.EventQueue.access$000(Unknown Source) at java.awt.EventQueue at java.awt.event.InvocationEvent.dispatch(Unknown Source) run(Unknown Source) $1.run(Unknown Source) at java.awt.EventQueue$1.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source) at java.awt。 java.awt 中的 EventQueue.dispatchEvent(Unknown Source)。EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread。 java.awt.EventDispatchThread.run（未知源）上的 pumpEvents（未知源）

现在我的问题是，我应该如何/从哪里开始搜索？我不知道为什么这个 excp。出现。例外。随机出现，这也使定位变得更加困难。

那么，有人知道从哪里开始（或者可能不是我自己造成的挥杆问题）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:53:04.583

如果错误偶尔发生并且与 Swing 相关，我的第一个猜测始终是 Swing 线程问题，例如修改或访问另一个线程上的 Swing 组件，然后是 EDT。这可能会导致 EDT 中的异常，因为 Swing 不是线程安全的（更多信息在[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程中）。

检查 Swing 线程违规的一个好的开始是安装一个自定义的`RepaintManager`，如[本文所述](http://weblogs.java.net/blog/alexfromsun/archive/2006/02/debugging_swing.html)

[我在对相关问题的回答](https://stackoverflow.com/questions/11012831/exception-with-stacktrace-containing-only-java-library-calls/11013016#11013016)中概述了更多方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T08:36:23.757

当我在确定哪个组件引发异常时遇到问题时，我在 Eclipse 中放置了一个 ExceptionBreakpoint，当出现异常时，我分析调用堆栈。

这有助于我确定问题，但我在 Java EE 上下文中使用此技术，我不知道是否可以在 Swing 中应用。

# servlets - 为 Servlet 过滤器提供多个 URL 模式

> ID：11645516
> 
> 赞同：82
> 
> 时间：2012-07-25T08:22:18.063
> 
> 标签：servlets, servlet-filters, url-pattern

我在我的 JSF 应用程序中使用 Servlet 过滤器。我的应用程序中有三组网页，我想在我的 Servlet 过滤器中检查这些页面的身份验证：

我的文件夹

```
/Admin/ *.xhtml

/Supervisor/*.xhtml
/Employee/*.xhtml 
```

我写`web.xml`的像

```
<filter>
    <filter-name>LoginFilter</filter-name>
    <filter-class>com.ems.admin.servlet.LoginFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>LoginFilter</filter-name>
    <url-pattern>/Employee/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>LoginFilter</filter-name>
    <url-pattern>/Admin/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>LoginFilter</filter-name>
    <url-pattern>/Supervisor/*</url-pattern>
</filter-mapping> 
```

但要求像

```
http://localhost:8080/EMS2/faces/Html/Admin/Upload.xhtml 
```

没有进入过滤器。

我必须为这 3 个文件夹提供安全保护。

如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-08-04T15:41:06.993

如果 URL 模式以 开头`/`，那么它是相对于上下文根的。`/Admin/*`URL 模式只会匹配页面 on `http://localhost:8080/EMS2/Admin/*`（假设这是`/EMS2`上下文路径），但实际上它们是 on `http://localhost:8080/EMS2/faces/Html/Admin/*`，因此您的 URL 模式永远不会匹配。

您需要`/faces/Html`像这样为您的 URL 模式添加前缀：

```
<url-pattern>/faces/Html/Admin/*</url-pattern> 
```

您也可以只重新配置您的 Web 项目结构/配置，以便您可以摆脱`/faces/Html`URL 中的路径，以便您可以通过例如`http://localhost:8080/EMS2/Admin/Upload.xhtml`.

您的过滤器映射语法一切正常。但是，指定多个 URL 模式的一种更简单的方法是只使用一个`<filter-mapping>`具有多个`<url-pattern>`条目的模式：

```
<filter-mapping>
    <filter-name>LoginFilter</filter-name>
    <url-pattern>/faces/Html/Employee/*</url-pattern>
    <url-pattern>/faces/Html/Admin/*</url-pattern>
    <url-pattern>/faces/Html/Supervisor/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-09-17T19:59:41.363

如果您使用注解方法来定义过滤器（而不是在 中定义它们`web.xml`），您只需在`@WebFilter`注解中放置一个映射数组即可：

```
/**
 * Filter implementation class LoginFilter
 */
@WebFilter(urlPatterns = { "/faces/Html/Employee","/faces/Html/Admin", "/faces/Html/Supervisor"})
public class LoginFilter implements Filter {
    ... 
```

仅供参考，同样的事情也适用于使用 servlet 注释的 servlet：

```
/**
 * Servlet implementation class LoginServlet
 */
@WebServlet({"/faces/Html/Employee", "/faces/Html/Admin", "/faces/Html/Supervisor"})
public class LoginServlet extends HttpServlet {
    ... 
```

# ajax - ajax on aui:select liferay

> ID：11645517
> 
> 赞同：2
> 
> 时间：2012-07-25T08:22:18.107
> 
> 标签：ajax, jsp, liferay, scriptlet, liferay-aui

我知道这是不可能将参数从 javascript 传递到 jsp 页面中的 scriptlet 代码所以我想使用 ajax 将我选择的值发布到服务器，然后通过我使用的请求对象在 scriptlet 代码中获取它

```
<aui:select label="My Selection" name="ms" id="ms" onchange="<%= updateItem()%>" >
    <%
    for(String item : itemList){            
    %>
    <aui:option selected="<%= item.equals(selItem) %>" value="<%=item%>"><%=item%></aui:option>         
    <%}%>
</aui:select>

<%! 
private Object updateItem() throws Exception{
    //to do something with selected value
return null;
}%> 
```

请告诉我如何在这个标签中执行 ajax 帖子，或者任何标签都可以在我的场景中使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:02:44.277

您似乎根本没有意识到 HTTP 和 Web 应用程序是如何工作的。您必须了解请求/响应周期。

AJAX 对您来说是正确的选择，但顾名思义，AJAX 是异步*JavaScript* - 您尝试将 java 方法调用放在 onchange 属性中。这行不通。

要首先执行您的要求，您必须找到您的 Portlet 类并实现`serveResource(ResourceRequest req, ResourceResponse resp)` 方法，您将在其中接收选定的值 ( `String selectedVal = req.getParameter("selectedVal")`) 并根据该值返回一些内容。

```
String result = null; 
if ("blah".equals(selectedVal))
  { result = "Something"; } 
else 
  { result = "Something Else"; } 
resourceResponse.getPortletOutputStream().write(result.getBytes("UTF-8")); 
```

然后，您必须对该方法进行 AJAX 调用。大致应该是这样的：

```
<portlet:resourceUrl var="resourceUrl">
<portlet:param name="selectedVal" value="PARAM_PLACEHOLDER_SELECTED_VAL" />
</portlet:resourceUrl>
<aui:script use="io">
function ajax<portlet:namespace />MySelect(selectedVal) {
        A.io(
            '${resourceUrl}'.replace("PARAM_PLACEHOLDER_SELECTED_VAL", selectedVal),
            {
                on: {
                    success: <portlet:namespace />processResponse(select, response);
                }
            }
        );

function <portlet:namespace />processResponse(response) {
alert("Here's what java code returned:"+response+". Do whatever you want with it - with javascript");
}
</aui:script>

...

<aui:select label="My Selection" name="ms" id="ms" onchange="ajax<portlet:namespace>MySelect(this.values[this.selectedIndex])" >
    <%
    for(String item : itemList){            
    %>
    <aui:option selected="<%= item.equals(selItem) %>" value="<%=item%>"><%=item%></aui:option>         
    <%}%>
</aui:select> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T12:26:02.593

假设我们有两个选择，一个是选择主题，另一个是根据主题选择自动填充主题： 这个例子我用 Ajax 尝试过并且成功了！

****在 JSP 中：****

```
1\. declare this in your jsp

    <portlet:resourceURL var="fetchTopicsResourceURL" />
after 
        <portlet:defineObjects /> 
```

2.  首先选择主题选择选项

    ```
     <aui:select id="subject" name="subject" label="Subject"
        inlineField="true" onChange='<%= renderResponse.getNamespace() + "fetchTopics();"%>'>
        <aui:option selected="true" value="">
            <liferay-ui:message key="Please select one.." />
        </aui:option>
        <%
            int totalsubject = SubjectLocalServiceUtil
                            .getSubjectsCount();
                    List<Subject> subjectList = SubjectLocalServiceUtil
                            .getSubjects(0, totalsubject);
                    for (Subject subject : subjectList) {
        %>
        <aui:option value="<%=subject.getSubjectId()%>"><%=subject.getSubjectName()%></aui:option>

        <%
            }
        %> 
    ```

3.  第二个选择选项，用于根据上面的主题选择自动填充主题。

4.  编写一个javascript函数，该函数将在主题值的更改上执行，如下所示：

    ```
    Liferay.provide(
        window,
        '<portlet:namespace />fetchTopics',
        function() {

            var A = AUI();

            var fetchTopicsURL = '<%= fetchTopicsResourceURL.toString() %>';

            // selecting the sourceSelect drop-down to get the current value
            var sourceElement = A.one("#<portlet:namespace />subject");

            // selecting the targetSelect drop-down to populate values
            var targetElement = A.one("#<portlet:namespace />topic");

            A.io.request (
                // the resource URL to fetch words
                fetchTopicsURL, {
                data: {
                    // request parameters to be sent to the Server
                    <portlet:namespace />subject: sourceElement.val()
                },
                dataType: 'json',
                on: {
                        failure: function() {
                            // if there was some error at the server
                            alert("Ajax failed! There was some error at the server");
                        },
                        success: function(event, id, obj) {

                            // JSON Data recieved from Server

                            var topicsArray = this.get('responseData');

                            // crude javascript magic to populate the drop-down

                            //clear the content of select
                            targetElement.html("");

                            for (var j=0; j < topicsArray.length; j++) {

                                targetElement.append("<option value='" + topicsArray[j] + "'>" + topicsArray[j] + "</option>");
                            }
                        }
                    }
                }
            ); 
        },
        ['aui-io']
    ); 
    ```

这就是你所有的jsp编码！:)

**下一部分是为您的 portlet 类编写一个方法，如下所示：**

```
 @Override
    public void serveResource(ResourceRequest resourceRequest,
            ResourceResponse resourceResponse) throws IOException,
            PortletException {

        String subject = ParamUtil.getString(resourceRequest, "subject");

        // build the JsonArray to be sent back
        JSONArray jsonArray = JSONFactoryUtil.createJSONArray();

        //put some topics
        if(subject.equals("Maths")){
        jsonArray.put("Math1");
        jsonArray.put("Math2");
        jsonArray.put("Math3");
        }
        if(subject.equals("Science")){
        jsonArray.put("science1");
        jsonArray.put("science2");
        jsonArray.put("science3");
        }

        // set the content Type
        resourceResponse.setContentType("text/javascript");

        // using printWrite to write to the response
        PrintWriter writer = resourceResponse.getWriter();

        writer.write(jsonArray.toString());
    } 
```

这就是你所有的编码.. :)

# asp.net-mvc-3 - 在 mvc3 iframe 下运行经典 asp 页面显示编译器错误

> ID：11645522
> 
> 赞同：1
> 
> 时间：2012-07-25T08:22:31.573
> 
> 标签：asp.net-mvc-3, asp-classic, iis-6

我们有一个大型的经典 asp 站点，现在我们必须使用 iframe 从 mvc3 调用它。因此，当我们在 iis6 上部署 mvc3 项目时，我们在经典的 asp 页面上得到编译器错误：

**编译错误** 描述：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

**编译器错误消息**：JS1004：应为 ';'

**源错误**：

第 1 行：<% 选项显式
第 2 行：Session("LoggedOn") = True
第 3 行：%>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:04:45.713

您的站点已将 JScript 指定为其默认语言。因此，在没有标题的情况下：

```
 <%@ Language="VBScript" %> 
```

<% %> 中的代码将被假定为在 JScript 中。更改默认语言（IIS 管理器 | 站点属性 | 主目录 | 应用程序配置 | 选项）或将此标题添加到所需页面。

# jquery - Jquery 滚动条插件和文本输入过滤器

> ID：11645523
> 
> 赞同：0
> 
> 时间：2012-07-25T08:22:35.570
> 
> 标签：jquery, jquery-plugins

我正在使用[这个例子的](http://www.designchemical.com/blog/index.php/jquery/live-text-search-function-using-jquery/)[小滚动条插件](http://baijs.nl/tinyscrollbar/)和实现。一切都很好，但我现在遇到了一个问题。

#filteredlist ul 是固定高度。当您在没有过滤器的情况下滚动时，它很好，但是一旦您使用过滤器，滚动条保持相同的大小，您可以滚动空白区域。

*   过滤列表后，我想调整滚动条的大小。
*   此外，如果原始计数 < 4 而不是过滤计数，我还希望能够隐藏文本输入#filter

    ```
    $(document).ready(function() { 
       $('#scrollbar').tinyscrollbar({size: 'auto', sizethumb: 'auto' });

            $("#filter").keyup(function(){

                // Retrieve the input field text and reset the count to zero
                var filter = $(this).val(), count = 0;
                // Loop through the comment list
                $(".filteredlist li").each(function(){
                    // If the list item does not contain the text phrase fade it out
                    if ($(this).text().search(new RegExp(filter, "i")) < 0) {
                        $(this).fadeOut();
                    // Show the list item if the phrase matches and increase the count by 1
                    } else {
                        $(this).show();
                        count++;
                    }
                });
             });        
            });

        <form id="live-search" action="" class="styledsearch" method="post">
        <input type="text" class="text-input" id="filter" value="" />
        </form>

              <ul class="filteredlist">
              <li>Dynamic list 1</li>
              <li>Dynamic list 2</li>
              <li>Dynamic list 3</li>
              <li>Dynamic list 4</li>
              <li>Dynamic list 5</li>
              </ul> 
    ```

任何帮助指导都会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:43:51.543

你必须打电话

```
 $('#scrollbar').tinyscrollbar({size: 'auto', sizethumb: 'auto' }); 
```

再次更新列表时。

就像是：

```
 $("#filter").keyup(function(){

        // Retrieve the input field text and reset the count to zero
        var filter = $(this).val(), count = 0;
        // Loop through the comment list
        $(".filteredlist li").each(function(){
            // If the list item does not contain the text phrase fade it out
            if ($(this).text().search(new RegExp(filter, "i")) < 0) {
                $(this).fadeOut();
            // Show the list item if the phrase matches and increase the count by 1
            } else {
                $(this).show();
                count++;
            }
        });
        $('#scrollbar').tinyscrollbar({size: 'auto', sizethumb: 'auto' });
     }); 
```

编辑：

不确定我是否理解您的其他问题，但这是您的意思吗？

```
if ($("ul.filteredlist li").size() < 4 ){ 
  $("#filter").hide();
} else {
  $("#filter").show();
} 
```

您可以在就绪状态下运行它。[http://jsfiddle.net/LSSTB/1/](http://jsfiddle.net/LSSTB/1/)

# shell - 通过unix脚本/命令从xml文件中提取xml标签

> ID：11645525
> 
> 赞同：1
> 
> 时间：2012-07-25T08:22:42.270
> 
> 标签：shell, unix

这是我的示例文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
 <testjar>
 <testable>
  <trigger>Trigger1</trigger>
  <message->2012-06-14T00:03.54</message>
 <sales-info>
  <san-a>no</san-a>
  <san-b>no</san-b>
  <san-c>no</san-c>
  </sales-info>
  </testable>
  </testjar> 
```

我需要从中提取xml标签-

例如上述文件的输出应该是

```
testjar
testable
trigger
message
sales-info
.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:27:13.407

```
$> cat ./text
<?xml version="1.0" encoding="UTF-8" ?>
 <testjar>
 <testable>
  <trigger>Trigger1</trigger>
  <message>2012-06-14T00:03.54</message>
 <sales-info>
  <san-a>no</san-a>
  <san-b>no</san-b>
  <san-c>no</san-c>
  </sales-info>
  </testable>
  </testjar> 
```

和

```
$> grep -P -o "(?<=\<)[^>?/]*(?=\>)" ./text
testjar
testable
trigger
message
sales-info
san-a
san-b
san-c 
```

正则表达式`(?<=\<)[^>?/]*(?=\>)`由3部分组成：

*   `(?<=\<)`:`(?<=)`是后向运算符，所以它的意思是“在<之后”；

*   `[^>?/]*`: 不是`>`, `?`, `/`0 次或更多次；

*   `(?=\>)`:`(?=)`是前瞻运算符，所以它的意思是“之前>”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:44:32.490

```
awk -F">" '{print $1}' xmlfile | sed -e '/<\//d' -e '/<?/d' -e 's/<//g' 
```

# javascript - SlickGrid：如何在列标题中查看全文？

> ID：11645530
> 
> 赞同：5
> 
> 时间：2012-07-25T08:22:54.380
> 
> 标签：javascript, jquery, mouseover, slickgrid

我正在使用 SlickGrid，现在，如果我有很长的列标题，SlickGrid 会用省略号 (...) 缩短标题。

我的问题是：有没有办法在鼠标悬停时查看整个文本？

顺便说一句，我可以通过注册这个很酷的插件 [https://github.com/mleibman/SlickGrid/blob/master/plugins/slick.autotooltips.js](https://github.com/mleibman/SlickGrid/blob/master/plugins/slick.autotooltips.js)来完成长单元格条目：

`mygrid.registerPlugin(new Slick.AutoTooltips());`

这是使用该插件的 jsFiddle：http: [//jsfiddle.net/crystality/h5ZLP/1/](http://jsfiddle.net/crystality/h5ZLP/1/)

请注意，如果您将鼠标悬停在具有长值的单元格上，则可以查看完整条目，但对于长列标题则不会这样做。

我在想我可以编辑该插件以允许该行为。还有其他建议吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T14:39:37.370

好的 - 我明白了。在最新版本的 SlickGrid 中，似乎对在列标题上设置标题属性的方式进行了更改。以前，列的名称属性将设置为标题。现在我们需要在列定义中添加一个新参数——称为**`toolTip`**. 我用这个编辑了你的小提琴，现在工具提示工作正常。

[http://jsfiddle.net/100thGear/6sGXx/](http://jsfiddle.net/100thGear/6sGXx/)

我像这样更改了您的列定义：

```
{ id: "long-val", name: "Really Really Really Long Title", 
field: "longVal", sortable:true, 
toolTip: "Really Really Really Long Title" } 
```

请注意，您不需要 slick.autotooltips.js 来完成这项工作。这只是针对数据的工具提示。

让我知道这是否有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-13T00:53:47.733

*自动工具提示*插件现在可以选择为标题单元格添加工具提示：

[https://mleibman.github.io/SlickGrid/examples/example-autotooltips.html](https://mleibman.github.io/SlickGrid/examples/example-autotooltips.html)

建议用法：

```
<script src="../plugins/slick.autotooltips.js"></script>

var options = {
    explicitInitialization: true,
};

grid.registerPlugin( new Slick.AutoTooltips({ enableForHeaderCells: true }) );
grid.init(); 
```

# c++ - Alphablend 函数

> ID：11645532
> 
> 赞同：3
> 
> 时间：2012-07-25T08:23:00.473
> 
> 标签：c++, winapi, gdi, alphablending

是否可以使用 alphablend 功能使图像的某些部分透明？

我可以创建一个包含 RGB(0,0,255) 的特定区域的图像，当我绘制该图像时，只有该区域应该是透明的。是否可以使用 AlphaBlend 函数。是的，那么如何？

我正在阅读有关 alphablend 的信息，但我仍然不清楚。我想我们需要在创建图像时指定 alphachannel。如果 alphachannel 不存在特定像素，那么该像素不能透明？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T09:19:02.880

> 我想我们需要在创建图像时指定 alphachannel。如果 alphachannel 不存在特定像素，那么该像素不能透明？

是的，该[`AlphaBlend`功能](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183351.aspx)旨在绘制已经保存了 Alpha 通道信息的图像。这些将是每像素 32 位 (bpp) 图像，这意味着它们包含红色、绿色、蓝色和 alpha 通道信息。您可以认为该`AlphaBlend`函数类似于`BitBlt`，除了它保留图像可能包含的任何透明或半透明像素。

这个函数的关键是它的最后一个参数，它是一个[`BLENDFUNCTION`结构体](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183393.aspx)。文档有这样的说法：

> **`ftn`[在]**  源位图和目标位图的 alpha 混合功能、要应用于整个源位图的全局 alpha 值以及源位图的格式信息。源和目标混合功能目前仅限于`AC_SRC_OVER`.

所以这意味着您的图像被假定已经包含一个预乘的 Alpha 通道。该`AlphaBlend`函数在绘制图像时会考虑这些值，但您可以通过为结构`SourceConstantAlpha`成员指定 0 到 255 之间的值来调整其不透明度`BLENDFUNCTION`。如果将此值设置为 255，则仅使用位图的每像素 Alpha 值。如果将其设置为 0，则假定您的图像是透明的。将其设置为介于两者之间的值会导致您的图像以某种程度的半透明绘制。

> 是否可以使用 alphablend 功能使图像的某些部分透明？

我可以创建一个包含 RGB(0,0,255) 的特定区域的图像，并且当我绘制该图像时，只有该区域应该是透明的。

在我看来，您正在尝试做的事情（正如[kolenda 建议](https://stackoverflow.com/a/11645713/366904)的那样）是一种称为颜色键控的东西。基本上，您在图像中任何您想要透明的地方使用特定颜色（如 RGB(0,0,255)），然后告诉 Windows 以 RGB(0,0,255) 作为透明键颜色来绘制图像，这意味着原始图像中 RGB(0,0,255) 的每个像素在绘制的图像中都是透明的。

是的，这是可能的，而且它实际上在 Windows 中很常见，用于工具栏按钮图标等。通常，他们会使用紫红色 (RGB(255,0,255))，因为这是一种很难看的颜色，没有人会使用它通常在图像中。

对此负责的函数是[`TransparentBlt`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145141.aspx)（同样，类似于`BitBlt`，甚至以相同的模式命名）。重要的是它允许您指定颜色键，即您希望它在绘制图像时将其视为透明的特定颜色。这是最后一个参数，`crTransparent`。在您的情况下，您需要指定`RGB(0,0,255)`.

如果你想变得*非常*花哨，你可以结合 和 的`TransparentBlt`效果`AlphaBlend`。基本上，您`TransparentBlt`首先调用将图像绘制到临时设备上下文 (DC) 中，并将所有关键颜色视为透明，然后使用该`AlphaBlend`函数将该临时 DC 的内容混合到具有任何透明度效果的目标 DC你渴望。

但即使这是可能的，而且一旦你编写了代码让它工作就很酷，[RED SOFT ADAIR](https://stackoverflow.com/a/11645988/366904)仍然有道理，他说 GDI 不是为透明而设计的。除了这里描述的简单透明效果之外，你不能走得更远，而且这当然不容易做到。

如果您需要使用透明度进行大量绘图，您可能希望改用[GDI+ API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms533798.aspx)。这些对透明度有更好的支持，并且它们实际上被设计为 C++ API（尽管它们具有 C 回退），因此它们被结构化为类，这使得它们更容易使用。

对 GDI+ 的唯一警告是，它仅在 Windows XP 和更新版本上受本机支持。如果您的客户端仍在运行 Windows 2000 或更早版本，则需要重新分发 GDI+ DLL ( `Gdiplus.dll`) 以便它们运行您的程序。如今，进入门槛越来越低，但仍然值得考虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:34:23.997

当您有单独`alpha`的通道作为透明度数据时，使用 Alpha 混合作为一种技术。

你在寻找什么可能`color keying`意味着你使用某种特定的颜色作为一个颜色`transparent`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T08:51:41.573

WinGdi 函数本身无法进行字母混合。这可以通过 GDI+ 等较新的 API 来完成。

可以在此处找到有关不同 Windows grahic API 的概述：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ee663279%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663279%28v=vs.85%29.aspx) http://msdn.microsoft.com/en-us/library/windows/desktop /ee417756%28v=vs.85%29.aspx

如果您只想要透明绘图（指定颜色将导致透明度），您可以使用[TransparentBlt](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145141%28v=vs.85%29.aspx)。

# php - 使用php编程更新mysql表中的字段值

> ID：11645537
> 
> 赞同：1
> 
> 时间：2012-07-25T08:23:17.093
> 
> 标签：php, mysql

```
$id = $_REQUEST["Uid"];

$query = "update prd set name='".$_POST['nm']."', char='".$_POST['ch']."', price='".$_POST['pr']."', sp_pri='".$_POST['spr']."', is_eli='".$_POST['enb']."', upd='".$_POST['ud']."', img='".$_FILES['img']['name']."', c_id='".$_POST['cid']."' where id=".$id;

$r = mysql_query($query) or die(mysql_error());
if ($r == 1)
    echo "Record Updated"; 
```

我从这个查询中得到以下错误，但我不知道如何解决它 - SQL 对我来说看起来不错！我究竟做错了什么？

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'char='b', price='150', sp_pri='100', is_eli='Yes', upd='Mon Jul 23 2012 17 附近使用正确的语法:23:24' 在第 1 行

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T08:27:01.507

`char`是 SQL 中的保留字。如果您使用此类关键字作为列名，则必须将它们括在反引号中（就像您应该始终使用列名一样）！

```
$query="update prd set `name`='".$_POST['nm']."', `char`='".$_POST['ch']."', `price`='".$_POST['pr']."', `sp_pri`='".$_POST['spr']."', `is_eli`='".$_POST['enb']."', `upd`='".$_POST['ud']."', `img`='".$_FILES['img']['name']."', `c_id`='".$_POST['cid']."' where `id`=".$id; 
```

此外，通过将`$_POST`变量直接添加到查询中而无需事先对其进行清理，您的系统就会受到任何类型的攻击，从而危及您的数据和网站。

看看[mysqli](http://php.net/manual/en/book.mysqli.php)和[PDO](http://php.net/manual/en/book.pdo.php)来规避这些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:32:13.607

除了 Sirko 的建议之外，在分配给`upd`日期的字段中 - 您应该使用[STR_TO_DATE](http://www.java2s.com/Tutorial/MySQL/0280__Date-Time-Functions/STRTODATEstrformat.htm)

# python - 如何使用 xmlfeedspider 抓取 xml 提要

> ID：11645538
> 
> 赞同：0
> 
> 时间：2012-07-25T08:23:29.957
> 
> 标签：python, xml, scrapy, web-crawler

我正在尝试使用以下格式抓取 xml 文件

**文件样本.xml：**

```
<rss version="2.0">
 <channel>
   <item>
       <title>SENIOR BUDGET ANALYST (new)</title>
       <link>https://hr.example.org/psp/hrapp&SeqId=1</link>
       <pubDate>Wed, 18 Jul 2012 04:00:00 GMT</pubDate>
       <category>All Open Jobs</category>
   </item>
   <item>
       <title>BUDGET ANALYST (healthcare)</title>
       <link>https://hr.example.org/psp/hrapp&SeqId=2</link>
       <pubDate>Wed, 18 Jul 2012 04:00:00 GMT</pubDate>
       <category>All category</category>
   </item>
 </channel>
</rss> 
```

下面是我的**spider.py**代码

```
class TestSpider(XMLFeedSpider):
    name = "testproject"
    allowed_domains = {"www.example.com"}
    start_urls = [
        "https://www.example.com/hrapp/rss/careers_jo_rss.xml"
        ]
    iterator = 'iternodes'
    itertag = 'channel'

    def parse_node(self, response, node):
        title = node.select('item/title/text()').extract()
        link  = node.select('item/link/text()').extract()
        pubdate  = node.select('item/pubDate/text()').extract()
        category  = node.select('item/category/text()').extract()
        item = TestprojectItem()
        item['title'] = title
        item['link'] = link
        item['pubdate'] = pubdate
        item['category'] = category
        return item 
```

**结果：**

```
2012-07-25 13:24:14+0530 [testproject] DEBUG: Scraped from <200 https://hr.templehealth.org/hrapp/rss/careers_jo_rss.xml>
    {'title': [u'SENIOR BUDGET ANALYST (hospital/healthcare)',
               u'BUDGET ANALYST'],
     'link': [u'https://hr.example.org/psp/hrapp&SeqId=1',
               u'https://hr.example.org/psp/hrapp&SeqId=2'] 
     'pubdate': [u'Wed, 18 Jul 2012 04:00:00 GMT',
               u'Wed, 18 Jul 2012 04:00:00 GMT'] 
     'category': [u'All Open Jobs',
               u'All category'] 
      } 
```

在这里，您可以从上面的结果中观察到，来自相应标签的所有结果都合并到单个列表中，但是我想根据它们各自的项目标签进行映射，如下所示，就像我们为 html 抓取所做的那样。

```
 {'title': u'SENIOR BUDGET ANALYST (hospital/healthcare)'
     'link': u'https://hr.example.org/psp/hrapp&SeqId=1'
     'pubdate': u'Wed, 18 Jul 2012 04:00:00 GMT'
     'category': u'All Open Jobs'
      }
    {'title': u'BUDGET ANALYST'
     'link': u'https://hr.example.org/psp/hrapp&SeqId=2' 
     'pubdate': u'Wed, 18 Jul 2012 04:00:00 GMT'
     'category': u'All category'
      } 
```

我们如何根据上面的 item 标记等单独的主标记来抓取 xml 标记数据。

提前致谢.............

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-05T17:57:55.160

尝试将您的**itertag**从更改`itertag = 'channel'`为`'itertag = 'item'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-27T17:51:29.753

只需更改 itertag = 'item'。

如果您参考[parse_node](http://doc.scrapy.org/en/latest/topics/spiders.html#scrapy.contrib.spiders.XMLFeedSpider.parse_node)方法的文档，它声明该方法是为与提供的标记名称（itertag）匹配的节点调用的。在您的情况下，它是“项目”（“通道”根节点的子节点）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:27:17.057

我推荐使用[feedparser](http://packages.python.org/feedparser/)：

```
feedparser.parse(url) 
```

结果是

```
{'bozo': 1,
 'bozo_exception': xml.sax._exceptions.SAXParseException("EntityRef: expecting ';'\n"),
 'encoding': u'utf-8',
 'entries': [{'link': u'https://hr.example.org/psp/hrapp&SeqId=1',
   'links': [{'href': u'https://hr.example.org/psp/hrapp&SeqId=1',
     'rel': u'alternate',
     'type': u'text/html'}],
   'tags': [{'label': None, 'scheme': None, 'term': u'All Open Jobs'}],
   'title': u'SENIOR BUDGET ANALYST (new)',
   'title_detail': {'base': u'',
    'language': None,
    'type': u'text/plain',
    'value': u'SENIOR BUDGET ANALYST (new)'},
   'updated': u'Wed, 18 Jul 2012 04:00:00 GMT',
   'updated_parsed': time.struct_time(tm_year=2012, tm_mon=7, tm_mday=18, tm_hour=4, tm_min=0, tm_sec=0, tm_wday=2, tm_yday=200, tm_isdst=0)},
  {'link': u'https://hr.example.org/psp/hrapp&SeqId=2',
   'links': [{'href': u'https://hr.example.org/psp/hrapp&SeqId=2',
     'rel': u'alternate',
     'type': u'text/html'}],
   'tags': [{'label': None, 'scheme': None, 'term': u'All category'}],
   'title': u'BUDGET ANALYST (healthcare)',
   'title_detail': {'base': u'',
    'language': None,
    'type': u'text/plain',
    'value': u'BUDGET ANALYST (healthcare)'},
   'updated': u'Wed, 18 Jul 2012 04:00:00 GMT',
   'updated_parsed': time.struct_time(tm_year=2012, tm_mon=7, tm_mday=18, tm_hour=4, tm_min=0, tm_sec=0, tm_wday=2, tm_yday=200, tm_isdst=0)}],
 'feed': {},
 'namespaces': {},
 'version': u'rss20'} 
```

# dataset - 获取免费的历史股票市场/交易所数据（例如标准普尔 500 指数、纽约证券交易所）？

> ID：11645541
> 
> 赞同：14
> 
> 时间：2012-07-25T08:23:36.543
> 
> 标签：dataset, stocks, stockquotes

我正在开发一个依赖股市信息的应用程序。目前，我使用[Yahoo Finance CSV API](http://cliffngan.net/a/13)。不幸的是，OpenTick 停止了它的服务，[Google Finance API](https://developers.google.com/finance/)也将很快停止。

我有一个我感兴趣的*股票代码*`CSV`列表并下载并解析它。我**不需要**“实时”和“合法”数据，因为我想测试我的应用程序如何处理高频股票事件流。理想情况下，至少应该包含几个 100k 报价，越多越好（在一定程度上）。

数据应该在某种程度上类似于这个[站点](http://pages.swcp.com/stocks/)，但我需要更多的数据。唯一需要注意的是，它必须包含典型的股票代码，数据本身不需要太详细（日期/时间、最高价、最低价、EOD、成交量都可以）。

有谁知道，我可以从哪里获取历史数据（例如大量的 CSV），我可以将其输入到我的应用程序中？

为这些数据付费不是一种选择。如果有人可以分享他的经验/知识，从哪里获得这些数据，那就太好了。我知道 xignite、[NxCore](http://www.nanex.net/NxCore/NxCore.htm)等，但由于这是一个学术项目，它必须是免费使用的数据。我不能希望有一些免费的 NxCore 等价物，但可能你们可以帮助我提供一些建议和提示......

如果我过于乐观并且基本上没有免费资源，我将不得不“随机化”股票报价，但这是最后的选择。静态历史数据集的一大优势是，我可以真正比较我的应用程序在相同输入数据方面的性能。

我已经搜索过 StackOverflow，但大多数线程都很旧，并且在[这个问题](https://stackoverflow.com/questions/281263/where-can-i-get-free-real-time-stock-data)中不再引用存在的灵魂。

* * *

**编辑：**

相关问题中提到的这个网站[EODdata.com](http://www.eoddata.com/Products/HistoricalData.aspx)已接近关闭 - 但不幸的是，他们的数据不是免费的，但至少价格似乎合理。

可以在[这里](https://stackoverflow.com/questions/754593/source-of-historical-stock-data?lq=1)找到另一个相关的 SO 问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T09:41:06.953

在[西南数码港](http://pages.swcp.com/stocks/#historical%20data)的网站上，可以下载一些*历史股票市场数据集*。

我已将**标准普尔 500 历史数据**下载为*“每日更新”*，并获得了大约。11 MB 未压缩的 txt 文件。每个文件大小为 25 *KB*，可以轻松连接成一个大文件。

格式 is`CSV`和 a 对应于：
`Date, Company, Open, High, Low, Close, Volume`

小样本可以在下面找到：

```
20080306,A,30.51,30.7,30.1,30.14,21131
20080306,AA,38.85,39.28,38.26,38.37,112800
20080306,AAPL,124.9,127.5,120.81,120.93,526320
20080306,ABC,41.24,41.26,40.26,40.26,13738
20080306,ABI,34.18,34.21,33.59,33.63,21597
20080306,ABK,7.99,8.5,7.25,7.42,195953
20080306,ABT,52.83,52.98,52.05,52.09,60385
20080306,ACAS,34.75,34.86,32.57,32.65,27887
.... 
```

# sql-server - 在视图上强制主键

> ID：11645543
> 
> 赞同：1
> 
> 时间：2012-07-25T08:23:42.187
> 
> 标签：sql-server, entity-framework, tsql, view, primary-key

我有以下架构：![在此处输入图像描述](../Images/aabf4d6ee621ac1c25957ec8cc4e5bc9.png)
我尝试创建一个视图并尽一切努力获取`IDStore_CardStore`列`NOT NULL`，以使其成为我 EF 实体中的主键，但没有成功：我的目标是选择表中的所有内容，`StockCard`即使它没有存在，`StockCardStores`但我需要保持`IDStore_CardStore`不为空且唯一

```
SELECT  ISNULL(dbo.StockCardsStores.IDStore_CardStore, NEWID()) AS IDStore_CardStore ,
        NULLIF(dbo.StockCard.IDStockCardIndex, NEWID()) AS IDStockCardIndex ,
        dbo.Stores.StoreName ,
        dbo.StockCardsStores.IDPurchaseInvoice ,
        NULLIF(dbo.StockCard.Designation,'')
FROM    dbo.Stores
        INNER JOIN dbo.StockCardsStores ON dbo.Stores.IDStore = dbo.StockCardsStores.IDStore
        RIGHT OUTER JOIN dbo.StockCard ON dbo.StockCardsStores.IDStockCardIndex = dbo.StockCard.IDStockCardIndex 
```

有没有其他的解决方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:33:09.830

我认为 IDStore_CardStore 已经不能为空，因为它是 StockCardStores 表中的主键。也许问题是 IDStore_CardStore 可能在您的视图中有重复的值，从而不可能成为视图的主键。

我不知道您的要求，但您可以为您的视图伪造主键，在查询中进行如下操作：

```
SELECT  ROW_NUMBER() OVER (ORDER BY dbo.StockCardsStores.IDStore_CardStore DESC) AS Id_PK, ISNULL(dbo.StockCardsStores.IDStore_CardStore, NEWID()) AS IDStore_CardStore ,
        NULLIF(dbo.StockCard.IDStockCardIndex, NEWID()) AS IDStockCardIndex ,
        dbo.Stores.StoreName ,
        dbo.StockCardsStores.IDPurchaseInvoice ,
        NULLIF(dbo.StockCard.Designation,'')
FROM    dbo.Stores
        INNER JOIN dbo.StockCardsStores ON dbo.Stores.IDStore = dbo.StockCardsStores.IDStore
        RIGHT OUTER JOIN dbo.StockCard ON dbo.StockCardsStores.IDStockCardIndex = dbo.StockCard.IDStockCardIndex 
```

然后 ID_PK 可以是他在 EF 中查看的 PK。

# c# - 暂停更新进度条

> ID：11645546
> 
> 赞同：2
> 
> 时间：2012-07-25T08:24:17.117
> 
> 标签：c#, winforms, progress-bar

*（抱歉标题不太好，我不确定如何解决我的问题，因此我需要问什么问题:)*

# 语境

我使用进度条来通知用户任务的进度。该任务实际上分两个步骤完成，每个步骤大约需要执行总时间的一半。我只知道第二个任务在开始之前的长度（因为它取决于上一个任务的结果），所以我无法知道一开始的最大进度。这就是为什么我在第二个任务之前更改进度条的最大进度。

这基本上是我的做法：

```
// 1st step
progressBar.Maximum = step1Objects.Count * 2; // "2" because the step will take 
                                              // half of the total process
progressBar.Value = 0;
foreach (SomeObject step1Object in step1Objects) {
    // Build step2Objects
    progressBar.Value = ++progress;
}
// At this moment, the progress bar is half filled

// 2nd step
progressBar.Maximum = step2Objects.Count * 2;
progressBar.Value = step2Objects.Count;
// When we start this step, the progress bar is already half filled
foreach (SomeObject step2Object in step2Objects) {
    // Do something
    progressBar.Value = ++progress;
}
// At this moment, the progress bar is totally filled 
```

# 问题

当我到达这条线时：

```
progressBar.Maximum = step2Objects.Count * 2; 
```

...进度条有一小会儿不再填满一半，因为`step1Objects.Count`与 相比非常少`step2Objects.Count`。所以进度条做了类似的事情（这就是用户看到的）：

```
>          |
=>         |
==>        |
===>       |
====>      |
=====>     |  End of step 1
=>         |  progressBar.Maximum = step2Objects.Count * 2;
=====>     |  progressBar.Value = step2Objects.Count;
======>    |
=======>   |
========>  |
=========> |
==========>| 
```

# 问题

如何避免这种“故障”？

我认为要做的是在两个步骤之间停止刷新进度条。我在[想像 BeginUpdate](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.beginupdate.aspx) / [EndUpdate](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.endupdate.aspx)这样的东西，但进度条似乎不存在......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:29:24.187

您写道，这两项任务大约是要执行的总时间的一半。

```
progressBar.Maximum = 100;

var stepPercentage = 50 / step1Objects.Count;
foreach(SomeObject step1Object in step1Objects)
{
    progressBar.Progress += stepPercentage;
}

progressBar.Progress = 50;
stepPercentage = 50 / step2Objects.Count;
foreach(SomeObject step2Object in step2Objects)
{
    progressBar.Progress += (stepPercentage + 50);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:38:01.297

将进度条的最大值设置为 step1Objects.Count * step2Objects.Count * 2

```
progressBar.Maximum = step1Objects.Count * step2Objects.Count * 2; 
```

然后在你的循环中，尝试：

```
progressBar.Value = 0;
//phase 1
foreach (SomeObject step1Object in step1Objects) {
    // Build step2Objects
    progress = progress + step2Objects.Count;
    progressBar.Value = progress;
}

//phase 2
foreach (SomeObject step2Object in step2Objects) {
    // Do something
    progress = progress + step1Objects.Count;
    progressBar.Value = progress;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:29:45.773

使用标准值，例如 100 或 200。现在除以 2。第一步一半，第二步一半。现在您知道第一步有多少项目，因此将 50% 除以该数量以获得第一步中每个对象完成的数量。这意味着一旦第一步完成，进度条的 50% 就已满。现在接下来的 50% 除以您拥有的第 2 步对象的数量，然后将每个对象的 x 数量添加到您已经填充的 50% 中。

# c# - 如何从大文件中从特定行读取到特定行

> ID：11645547
> 
> 赞同：1
> 
> 时间：2012-07-25T08:24:30.037
> 
> 标签：c#, .net, winforms, visual-studio-2010, file-io

并将这些行添加到 ListBox。（Windows 窗体）

我会使用：

```
String file_name = @"x:\....";
int first_line = 24536;
int last_line = 25536;

for ( int i = first_line; i <= last_line; i++)
{
  this.listBox.Items.Add(File.ReadLines(this.file_name).ElementAt(i));
} 
```

但这需要大量时间来加载 1000 行。

我怎样才能更有效（更快）地做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T08:28:08.520

目前您`ElementAt`每次都在调用 - 这意味着*从头开始*读取每个新行的文件。

试试这个：

```
string[] lines = File.ReadLines(fileName)
                     .Skip(firstLine - 1) // Assuming 1-based line numbers
                     .Take(lastLine - firstLine)
                     .ToArray();
listBox.Items.AddRange(lines); 
```

（请注意，我已从您的变量名中删除了非常规的下划线。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:52:16.547

您可以在列表中传递文件行，然后通过索引 id 调用它

```
IEnumerable<string> = File.ReadLines(@"c:\test.txt")
                      .Take(NumberOfLines); 
```

# c# - 数据源错误：“无法绑定到属性或列”

> ID：11645551
> 
> 赞同：11
> 
> 时间：2012-07-25T08:24:48.343
> 
> 标签：c#, dataset

当我点击显示按钮时，我正在使用 C# 处理数据库，但出现错误：

> 错误：
> 无法绑定到 DataSource 上的属性或列 LastName。参数名称：dataMember

代码：

```
private void Display_Click(object sender, EventArgs e)
{
    Program.da2.SelectCommand = new SqlCommand("Select * From Customer", Program.cs);
    Program.ds2.Clear();
    Program.da2.Fill(Program.ds2);
    customerDG.DataSource = Program.ds2.Tables[0];

    Program.tblNamesBS2.DataSource = Program.ds.Tables[0];

    customerfirstname.DataBindings.Add(new Binding("Text", Program.tblNamesBS2, "FirstName"));
    customerlastname.DataBindings.Add(new Binding("Text", Program.tblNamesBS2, "LastName")); //Line Error occurs on.
} 
```

不知道这意味着什么，任何人都可以提供帮助，如果我注释掉最后两行，它将正确显示。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-04-29T03:07:12.010

如果绑定到 NULL 对象，也会遇到此错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-25T08:31:16.493

这意味着您的数据表没有找到数据库中的列名 LastName ..

在您的情况下，您使用 ds2.. 填充数据集

```
 Program.da2.Fill(Program.ds2); 
```

然后你将你的数据源绑定到这样的“程序”..

```
Program.tblNamesBS2.DataSource = Program.ds.Tables[0]; 
```

应该是这样的。。

```
Program.tblNamesBS2.DataSource = Program.ds2.Tables[0]; 
```

因为在下面的行中，您正在从绑定到“ds”的 Program.tblNamesBS2 中查找值，这就是为什么列不在“ds”中的原因。

```
 customerfirstname.DataBindings.Add(new Binding("Text", Program.tblNamesBS2, "FirstName"));    
  customerlastname.DataBindings.Add(new Binding("Text", Program.tblNamesBS2, "LastName")); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-03-17T16:14:43.220

此错误的另一个原因是您绑定的属性是否是私有的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-02-21T12:19:53.130

另一个可能的原因（如果您绑定到一个对象）是您尝试绑定到一个字段，而不是一个属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-21T22:29:13.813

我遇到了同样的问题，这是因为我的两个表中的列具有相同的列名。例如：

1.  我的数据库名称是`Assets`；
2.  第一个表名是`Property`，第二个表名是`Plants`；
3.  两个表中的第一列名称是`asset_number`; 它给出了你上面描述的错误，但我的说`asset_number`。

解决方法：我把表中的列名改成了`Plants`，`asset_number1`然后就没有问题了。（我确实必须删除所有旧列`Plants`才能重做新列。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-30T04:42:13.580

我遇到了同样的问题，我必须更改表中的名称，但我没有更改数据绑定文件中的列名。解决方案是通过替换更改后的名称来更改名称。

# java - 结合类和方法参数化类型

> ID：11645555
> 
> 赞同：4
> 
> 时间：2012-07-25T08:25:02.270
> 
> 标签：java, generics

我有一个这样的界面：

```
public interface BatchSynchronisedPool<R extends Runnable> {
    void execute(R runnable, Object batchIdentifier);
    public <T> Future<T> submit(Callable<T> callable, Object batchIdentifier);
} 
```

我想推断 Callable 的上限，但仍希望能够将`<T>`参数保留在方法上：

```
public interface BatchSynchronisedPool<R extends Runnable, C extends Callable> {
    void execute(R runnable, Object batchIdentifier);
    public <T> Future<T> submit(C<T> callable, Object batchIdentifier);
} 
```

显然这不起作用，因为`C`我指定的类型可能只需要特定范围的`T`参数。但是，现在您对我正在尝试做的事情有了大致的了解，是否有可能的解决方案，或者我是否总是不得不提交一个可调用的？（或者完全删除泛型并执行不安全的强制转换）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:40:56.110

我不是 100% 确定，但不要认为你可以在这里做你想做的事情。由于`C`不是通用的，因此您不能使用`C<T>`. 下面有很多代码，但 tl;dr**采用选项 3**。最终真正改变的是你需要创建多少`BatchSynchronisedPool`个对象，这并不是一个相当大的开销......

* * *

**1.**保留`<T>`方法上的泛型类型参数，**提交一个`Callable<T>`并执行类型的运行时检查**，就像您的原始解决方案一样，在实现此接口的类中。

```
public interface BatchSynchronisedPool<R extends Runnable> {
    void execute(R runnable, Object batchIdentifier);
    public <T> Future<T> submit(Callable<T> callable, Object batchIdentifier);
}

public class MyBSP<R, C> implements BatchSynchronisedPool<R, C> {
    void execute(R runnable, Object batchIdentifier) { ... }
    public <T> Future<T> submit(Callable<T> callable, Object batchIdentifier) {
        // Check types.
        if (!(callable instanceof MyDesiredCallableClass)) {
            throw new IllegalArgumentException("Types don't match.");
        }

        // Do work.
        T result = callable.call();

        ...
    }
}

public class MyUsageClass {
     public static void main(String[] args) {
         // Submit string.
         MyBSP<Runnable> bsp = new MyBSP<Runnable>();
         bsp.submit(new StringCallable(), someObject1);

         // Submit integer.
         bsp.submit(new IntegerCallable(), someObject2);
     }
} 
```

* * *

**2.**保留`<T>`方法上的泛型类型参数，**提交 a`C`并执行强制转换**，就像您建议的那样，在实现此接口的类中。

```
public interface BatchSynchronisedPool<R extends Runnable, C extends Callable> {
    void execute(R runnable, Object batchIdentifier);
    public <T> Future<T> submit(Class<T> cls, C callable, Object batchIdentifier);
}

public class MyBSP<R, C> implements BatchSynchronisedPool<R, C> {
    void execute(R runnable, Object batchIdentifier) { ... }
    public <T> Future<T> submit(Class<T> cls, C callable, Object batchIdentifier) {
        // Do work... with a cast.
        T result = cls.cast(callable.call());

        ...
    }
}

public class MyUsageClass {
     public static void main(String[] args) {
         // Submit string.
         MyBSP<Runnable, Callable> bsp = new MyBSP<Runnable, Callable>();
         bsp.submit(new StringCallable(), someObject1);

         // Submit integer.
         bsp.submit(new IntegerCallable(), someObject2);
     }
} 
```

* * *

**`BatchSynchronisedPool``T`**`T`3\. 通过指定为类的泛型类型参数，为您尝试提交的**每种类型****创建一个新类型。**然后每次你想调用`submit`不同的类型时，你需要生成一个新的`BatchSynchronisedPool`.

```
public interface BatchSynchronisedPool<T, R extends Runnable, C extends Callable<T>> {
    void execute(R runnable, Object batchIdentifier);
    public Future<T> submit(C callable, Object batchIdentifier);
}

public class MyBSP<T, R, C> implements BatchSynchronisedPool<T, R, C> {
    void execute(R runnable, Object batchIdentifier) { ... }
    public Future<T> submit(C callable, Object batchIdentifier) {
        // Do work.  Types are okay; no checking or casting needed!
        T result = callable.call();

        ...
    }
}

public class MyUsageClass {
     public static void main(String[] args) {
         // Submit string.
         MyBSP<String, Runnable, Callable<String>> stringBsp = new MyBSP<String, Runnable, Callable<String>>();
         stringBsp.submit(new StringCallable(), someObject1);

         // Submit integer.
         MyBSP<Integer, Runnable, Callable<Integer>> integerBsp = new MyBSP<Integer, Runnable, Callable<Integer>>();
         integerBsp.submit(new IntegerCallable(), someObject2);
     }
} 
```

# linux - Linux内核中的realloc()是否有以下限制？

> ID：11645557
> 
> 赞同：1
> 
> 时间：2012-07-25T08:25:18.643
> 
> 标签：linux, memory-management

当您尝试使用 扩展内存分配时`realloc()`，Linux 是否会安排一部分内存，复制并销毁旧内存？如果是这样，realloc() 的最大大小被限制为小于总非内核内存的一半。

我是对的，还是目前正在应用什么算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:34:27.983

glibc realloc 实现利用内核的 mremap 接口在进程的虚拟地址空间中扩展或重定位分配的区域，而无需在物理内存中制作额外的副本。当 glibc 认为分配“大”时，这种行为就会出现，我上次检查时分配的大小超过 128K。对于较小的分配，它将制作一个副本。

如果进程的虚拟内存映射在其当前地址或任何其他未使用区域中没有足够的连续空间可用于新分配，则 mremap 可能会失败，但它不需要足够的空间来保存旧分配和新分配同时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:33:27.190

一般来说，堆段是从低地址向高地址增长的。一定量的堆空间被分配给进程，并且只能由进程管理。

当你扩展你的内存空间时，如果有空间可以直接扩展它而不移动旧内容，它就会这样做。否则，它将旧内容复制到它找到的新空间，然后从该新空间扩展它。旧的内存区域被“释放”，如果需要，可以在进一步的分配中使用。但是，旧空间不会返回给内核。

因此，realloc() 可以分配的空间量仅受分配给进程的堆空间量（堆段大小）的限制。

此外，许多 Linux 实现使用 sbrk() 系统调用来更改进程的段大小。您可能想查看此链接以更好地理解 - [如何在 Linux 中实现 sbrk/brk？](https://stackoverflow.com/questions/997425/how-are-sbrk-brk-implemented-in-linux)

# javascript - 表单的jQuery验证，除了一个div

> ID：11645570
> 
> 赞同：2
> 
> 时间：2012-07-25T08:26:18.563
> 
> 标签：javascript, jquery, jquery-ui, validation, jquery-selectors

我想验证我的表单的完整内容，除了特定 div 中的所有输入，`<div class="noValid">`例如。

所以我想要做的是这样的事情`$("myForm").valid()`，它将对所有表单输入执行 jQuery 验证，除了我的特定 div 中的输入。

你能告诉我如何从全局表单选择器中排除这个特定的 div 吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:31:51.717

您可以将选项中的选择器传递`ignore`给`validate()`：

```
$("#myForm").validate({
    // your options,
    ignore: ":hidden, #yourDiv :input"
}); 
```

从那里开始，`$("#myForm").valid()`将忽略里面的表单控件`#yourDiv`。

# linux - 将 CMake 项目导入 Eclipse CDT

> ID：11645575
> 
> 赞同：44
> 
> 时间：2012-07-25T08:26:35.437
> 
> 标签：linux, eclipse, cmake

我有一个本机[CMake](http://en.wikipedia.org/wiki/CMake)项目，我想将[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29) IDE 与它一起使用，以便通过提供自动完成和其他功能使我的开发更容易。我似乎找不到如何在 Eclipse 中导入 CMake 项目。

PS：我愿意为其他与 CMake 配合良好的 IDE 提供建议。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-26T09:09:27.580

[KDevelop](http://kdevelop.org/)是一个很棒的 IDE，具有出色的 CMake 支持。

至于 Eclipse - 运行这个：

```
cd <project_dir>
cmake -G "Eclipse CDT4 - Unix Makefiles" ./ 
```

这将为您生成 Eclipse 项目。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-10-02T08:08:22.497

详细说明箭头对 Eclipse 的回答：

首先，为 CMake 文件选择一个目录。我更喜欢将我的 Eclipse 工作区`~/workspaces`和源代码保存在`~/src`. 我需要构建或测试项目的数据位于项目工作区目录的子目录中，因此我建议对 CMake 执行相同的操作。

假设您的工作区和源文件夹都命名为`someproject`，请执行以下操作：

```
cd ~/workspaces/someproject
mkdir cmake
cd cmake
cmake -G "Eclipse CDT4 - Unix Makefiles" ~/src/someproject 
```

然后，在您的 Eclipse 工作区中，执行以下操作：

**文件 > 导入... > 常规 > 现有项目到工作区**

检查**选择根目录**并选择`~/workspaces/someproject/cmake`。确保未选中**将项目复制到工作区。**

单击**完成**，您的工作区中有一个 CMake 项目。

有两点需要注意：

*   我用于`cmake`工作区子目录，但您可以使用您选择的名称。
*   如果您对构建配置进行任何更改（例如编辑`Makefile.am`），您将需要重新运行最后一个命令，以便 Eclipse 获取更改。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-05-23T15:30:35.047

我刚刚了解到，CMake 的 CDT 项目生成器[似乎没有维护](https://bugs.eclipse.org/bugs/show_bug.cgi?id=534971)，并导致了各种问题——尤其是似乎在 Eclipse 的更高版本（我也分享了其中的版本）中。

建议使用 cmake4eclipse（可从 Eclipse Marketplace 获得），它`CMakeLists.txt`用作其唯一的事实来源。它还允许您将源代码树与您的工作区分开。

*   在 Eclipse 中，选择**File > New > C Project**。
*   输入项目名称并选择源代码树的根作为项目位置。
*   选择**Executable > Empty Project**作为项目类型，并接受默认工具链。
*   单击**Finish**，您的工作区中有一个 CMake 项目。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-09-22T18:33:02.863

简而言之，目前只有 CDT 生成器是可行的选择。为什么？仅仅是因为 Eclipse 必须从某个地方获取预处理器定义、包含路径以及构建中包含的文件。否则，我们最终会索引所有内容，而且很糟糕，没有定义正确的宏。如果您的 repo 或中型或大型树有提升，那么索引所有内容在现实世界中根本无法正常工作 - 无论如何，Eclipse 索引器的速度和可靠性都不会。由于现在大多数人可能都想使用 Ninja 进行构建（谁想等待 30 多秒的热构建只是为了看看什么是脏的？），这排除了通过当前支持的 makefile 导入此信息的唯一方法，除非您希望每次配置时都必须生成两个单独的构建系统，

在 Eclipse Photon 中有一个直接导入 cmake 项目的新选项。但是，在这个阶段，我想说它对于除了琐碎的项目之外的任何东西看起来几乎没有用，因为似乎没有任何方法可以导入已经配置的构建目录，或者任何地方来设置传递给的变量和参数制作。我还不知道这个功能实际上是如何工作的，但似乎 Eclipse 必须通过 CMakeLists 的层次结构进行解析，按照逻辑查看进行了哪些 add_subdirectory() 调用，以及设置了哪些预处理器定义，这似乎是一种没有未来的方法，因为我们有 cmake 服务器模式来解决这个问题，毫无疑问，它需要在 Eclipse 中重新实现几乎所有的 cmake 语言解析器才能完成这项工作。

到目前为止，似乎满足现实世界要求的唯一可行解决方案似乎是使用 cmake CDT 生成器。它可以直接从cmake内部获取上述信息，并将其写入.cproject文件。如前所述，它并没有真正维护，并且依赖于 .cproject 的过时模板，这会导致一些问题。

我自己对 cmake 支持的最低要求是：

*   能够导入已配置的项目。大型构建系统通常使用脚本在命令行上将大量变量传递给 cmake。
*   只有构建系统的一部分才应该被索引。
*   它必须与源代码树之外的构建一起使用。
*   必须使用预处理器定义并包含来自构建系统的路径才能进行工作索引。
*   必须使用 Ninja 生成器（即不生成生成文件）。

目前，除了 CDT 生成器之外，我看不到如何用任何东西执行上述任何操作，而实现有效和完善的解决方案的唯一方法需要对 cmake 的生成器进行一些黑客攻击，或者对生成的 .cproject 进行后处理选择索引的内容（即不是所有的 CMAKE_SOURCE_DIRECTORY）。这是另一个 hack（因为 cmake 没有任何方法将配置后的任务附加到配置步骤中，我们必须分叉一个进程，并监视父 cmake 的终止。这是代表 cmake 的深思熟虑的决定开发人员显然，也许是正确的）

我当然非常感谢任何更好方法的信息。对于一个应该用于 C++ 开发的工具来说，Eclipse 中对 cmake 的支持状态相当糟糕。索引器（至少当它没有被需要重新启动 Eclipse 的常规锁定所困扰时）实际上是最好的，而 Eclipse 是一个非常好的代码跳转环境。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-01-13T13:42:23.887

执行以下操作：

`mkdir debug` （或发布，或任何其他名称）

```
cd debug
cmake -G "Eclipse CDT4 - Unix Makefiles" -DCMAKE_BUILD_TYPE=Debug -DCMAKE_ECLIPSE_GENERATE_SOURCE_PROJECT=TRUE -DCMAKE_ECLIPSE_MAKE_ARGUMENTS=-j3 -DCMAKE_ECLIPSE_VERSION=4.1 ../ 
```

确保设置正确的 Eclipse 版本

然后从 Eclipse 中打开文件夹（打开项目）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-20T12:26:06.503

我桌面上的一个简单解决方案：

1.  在 eclipse:`New -> New C/C++ Project -> Empty or Existing CMake Project`中，选择一个项目名称（例如项目）。
2.  将旧目录的所有文件复制到新目录（项目路径）。

# sql - 将今天特定数据到次日数据和其余数据的数据相加

> ID：11645576
> 
> 赞同：1
> 
> 时间：2012-07-25T08:26:38.193
> 
> 标签：sql, sql-server

我想从包含日期、小时和数据的表中计算数据..表中有很多数据..小时是数据库中的 int 数据类型，其他（DATE.etc）是数据类型 varchar。 . 示例如下：

```
DATE       hour  data1  data2
-------------------------------
01/01/2010  1    10860  1234    
01/01/2010  2    10861  1234    
01/01/2010  3    10862  1234    
01/01/2010  4    10863  567   
01/01/2010  5    10864  458    
02/01/2010  1    10865  3467    
02/01/2010  2    10866  7890    
02/01/2010  3    10867  863    
02/01/2010  4    10868  0    
02/01/2010  5    10868  698  
03/01/2010  1    10868  4693  
03/01/2010  2    10868  7853  
03/01/2010  3    10868  5987
....................etc 
```

并根据上述数据。我想总结日期的数据：01/01/2010，小时：2 到第二天日期：02/01/2010，小时：1，当然还有日期：02/01/2010，小时：2 到日期:03/01/2010, hour:1 和其余数据 .. 表示数据结果的输出如下：

```
DATE           sdata1  sdata2
-------------------------------
01/01/2010     54315   6960    
02/01/2010     54337   14144    
03/01/2010     21736   13840
...................etc 
```

date、data1 和 data2 的数据类型是 varchar，除了时间是数据类型 int...

sdata1 和 sdata2 是数据的总和，是否有任何其他方法可以总结从今天 hour:2 到第二天 hour:2 的条件下的这些数据？非常感谢大家..谢谢..

这些数据是由批量插入PLC数据产生的......

这是我自己的解决方案，但它永远不会成功！

从表中选择 SUM(CONVERT(int,data1)) AS sdata1,SUM(CONVERT(int,data2)) AS sdata2 where (CONVERT(datetime, date, 105) >= CONVERT(datetime,date,105) 和 CONVERT(int ,hour) >= 2) and (CONVERT(datetime, date, 105) <= DATEADD(day, 1,CONVERT(datetime,date,105)) and CONVERT(int,hour) < 2) and month(CONVERT(datetime ,Date,103))= '01' 和年份(CONVERT(datetime,Date,103))= '2010'

请有人帮我解决这个问题......我的大脑已经爆裂了......@@

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:42:03.383

干得好

```
set dateformat dmy
declare @t table(DATE  date,     hour int,  data1  int, data2 int)
insert into @t
select '01/01/2010',  1,    10860,  1234     union all
select '01/01/2010',  2,    10861,  1234     union all
select '01/01/2010',  3,    10862,  1234     union all
select '01/01/2010',  4,    10863,  567    union all
select '01/01/2010',  5,    10864,  458     union all
select '02/01/2010',  1,    10865,  3467     union all
select '02/01/2010',  2,    10866,  7890     union all
select '02/01/2010',  3,    10867,  863     union all
select '02/01/2010',  4,    10868,  0     union all
select '02/01/2010',  5,    10868,  698   union all
select '03/01/2010',  1,    10868,  4693   union all
select '03/01/2010',  2,    10868,  7853   union all
select '03/01/2010',  3,    10868,  5987 

select dateadd(day,case when hour>1 then 1 else 0 end,date),
sum(data1),sum(data2) 
from @t
group by dateadd(day,case when hour>1 then 1 else 0 end,date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:23:12.417

愿望的结果应该是这样的

## 日期 sdata1 sdata2

2010 年 1 月 1 日54315 6960
2010 年 2 月 1日 54337 14144 2010 年 3 月 1
日 21736 13840
......等

但是从您的查询中，它运行良好...谢谢，最终结果如下：

## 日期 sdata1 sdata2

02/01/2010 54315 6960
03/01/2010 54337 14144
04/01/2010 21736 13840
....................

这意味着查询总结了从 01/01/2010 到 02/01/2010 的数据并输出 02/01/2010..hehe ..

# python - Selenium webdriver find_element_by_xpath 需要时间

> ID：11645577
> 
> 赞同：2
> 
> 时间：2012-07-25T08:26:39.827
> 
> 标签：python, selenium, webdriver

如果页面上不存在元素会`find_element_by_xpath()`花费太多时间挂起测试执行。有没有办法设置超时以`find_element_by_xpath()`在 python 中运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:52:20.463

您可以使用此代码设置[隐式等待-](http://seleniumhq.org/docs/04_webdriver_advanced.html#implicit-waits)

```
ff = webdriver.Firefox()
ff.implicitly_wait(10) # seconds 
```

当您尝试在网页上查找元素时，这会使 WebDriver 在引发错误之前等待 10 秒。

# java - 使用 CollectionUtils 在 Collection 中搜索返回 NullPointerException

> ID：11645581
> 
> 赞同：0
> 
> 时间：2012-07-25T08:27:05.447
> 
> 标签：java, apache, collections, nullpointerexception

我正在尝试搜索集合中的项目，但最终出现 NullPointerException，即使我知道这些项目在那里。这是我搜索集合的代码：

```
Collection<Item> newnetSWLicense = CollectionUtils.select(sortedItems, new Predicate() {
        public boolean evaluate(Object o) {
            Item item = (Item)o;
            return item.getVendor().equals("NewNet") && item.getItemType().equals("SW") && item.getDescription().contains("Connect7") || 
                    item.getVendor().equals("NewNet") && item.getItemType().equals("SW") && item.getDescription().contains("C7");
        }
    }); 
```

当项目的描述如下时，一切正常：

```
Connect7 Simplex SGC License 
```

或者

```
Connect7 Redundant SGC License 
```

但是当描述包含“ `C7 3.0 core TCAP 8K dialogs simplex`”时，它会返回一个 NullPointerException：

```
10:19:41,664 ERROR [STDERR] java.lang.NullPointerException
10:19:41,664 ERROR [STDERR]     at org.apache.jsp.View.bom.ListBom_jsp$3.evaluate(ListBom_jsp.java:286)
10:19:41,664 ERROR [STDERR]     at org.apache.commons.collections.CollectionUtils.select(CollectionUtils.java:517)
10:19:41,664 ERROR [STDERR]     at org.apache.commons.collections.CollectionUtils.select(CollectionUtils.java:498)
10:19:41,664 ERROR [STDERR]     at org.apache.jsp.View.bom.ListBom_jsp._jspService(ListBom_jsp.java:283)
10:19:41,664 ERROR [STDERR]     at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
10:19:41,664 ERROR [STDERR]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
10:19:41,664 ERROR [STDERR]     at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
10:19:41,664 ERROR [STDERR]     at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
10:19:41,664 ERROR [STDERR]     at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
10:19:41,664 ERROR [STDERR]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
10:19:41,664 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
10:19:41,664 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
10:19:41,664 ERROR [STDERR]     at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
10:19:41,664 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
10:19:41,664 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
10:19:41,664 ERROR [STDERR]     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
10:19:41,664 ERROR [STDERR]     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
10:19:41,665 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
10:19:41,665 ERROR [STDERR]     at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)
10:19:41,665 ERROR [STDERR]     at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
10:19:41,665 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
10:19:41,665 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
10:19:41,665 ERROR [STDERR]     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
10:19:41,665 ERROR [STDERR]     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
10:19:41,665 ERROR [STDERR]     at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
10:19:41,665 ERROR [STDERR]     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
10:19:41,665 ERROR [STDERR]     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
10:19:41,665 ERROR [STDERR]     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
10:19:41,665 ERROR [STDERR]     at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
10:19:41,665 ERROR [STDERR]     at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
10:19:41,665 ERROR [STDERR]     at java.lang.Thread.run(Thread.java:722) 
```

知道如何避免这种异常吗？顺便提一句。供应商和项目类型是 100% 正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:34:08.890

问题必须与您的代码有关：

```
 return item.getVendor().equals("NewNet") && item.getItemType().equals("SW") && 
    item.getDescription().contains("Connect7") || 
    item.getVendor().equals("NewNet") && item.getItemType().equals("SW") && 
    item.getDescription().contains("C7"); 
```

不要将所有内容都放在一个返回语句中；首先提取本地变量以获取供应商和描述。检查 vars 的`null`.

```
if (item == null) return false;
final String v = item.getVendor(), d = item.getDescription(), 
             t = item.getItemType();
return d != null && "NewNet".equals(v) && "SW".equals(t) && 
    (d.contains("C7") || d.contains("Connect7")); 
```

# jquery - 在 ASP.NET 应用程序中使用 jQuery 异步加载面板

> ID：11645582
> 
> 赞同：1
> 
> 时间：2012-07-25T08:27:08.000
> 
> 标签：jquery, asp.net, asynchronous, highcharts

我有一个 ASP.net 应用程序，其中包含一个仪表板界面，该界面由各种数量的面板组成。每个 Panel 都包含一个 HighChart 控件并从不同的数据源加载。一些数据源可能需要一些时间来执行，因此我不想因为一个加载缓慢的数据源而减慢整个页面的执行速度。

我希望页面加载，然后每个面板在数据准备好时出现。

当我使用高图表来显示数据时，我的 jQuery 代码类似于：

```
 $(document).ready(function () {

        var panelIDList = dashID.Get("panelList");

        for (var i = 0; i < panelIDList.length; i++) {
            addpanel(panelIDList[i]);
        }            
    }); 

    function addpanel(panelID)
    {
        $.ajax({
            type: "POST",
            url: "Data.aspx/GetData",
            data: "{val:'" + panelID + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                var myObject = eval('(' + msg.d + ')');

                var options = {
                    chart: {
                        renderTo: myObject.renderTo,
                        type: myObject.chartVal,
                        height: 300,
                        width: 600
                    },
                xAxis: {
                        categories: myObject.xaxis.Categories,
                },
                series: myObject.serList
            };

            var chart = new Highcharts.Chart(options);

        }
    }); 
```

从 $(document).ready 中可以看出，我对服务器进行了 Ajax 回调，以检索用于构造图表数据的 JSON 数据结构。

这一切都很好，除了调用似乎不是真正的异步，如果第一个面板加载缓慢，那么在第一个面板加载缓慢之后才会加载后续面板。为了演示，我在其中一个面板 DataSource 中添加了 Thread.Sleep。

我不会有这种情况，因为我正在使用 Ajax 调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:08:26.177

好吧，一旦我遇到类似的问题

首先尝试添加

```
async: true,
cache: false 
```

给你`ajax`打电话

如果这不能解决您的问题，那么您需要禁用`Session`页面上的

```
<%@ Page EnableSessionState="False" .... 
```

欲了解更多信息：

[如何在 asp.netweb 应用程序中显示第一个异步结果？](https://stackoverflow.com/q/11080860/1268570)

[REST WCF 服务在 ASP.Net 站点中使用 AJAX 调用时锁定线程](https://stackoverflow.com/q/11250109/1268570)

# java - 寻找模拟针运动的物理模型

> ID：11645586
> 
> 赞同：2
> 
> 时间：2012-07-25T08:27:14.853
> 
> 标签：java, android, game-physics

我正在为速度计（或 rpm）应用程序构建一个 Android 应用程序。输入信号（目标值）会有很大差异，我当前的实现是基于[这个模拟速度计示例的想法](http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/)

然而，这个例子中的调节非常粗糙，并且给出了生涩/不自然的运动。我正在寻找可以改变速度和加速度常数的针的物理模型。一个模型，您可以感觉到针的惯性，仍然没有超调。

对此的任何帮助表示赞赏。我自己的尝试并不是很成功。

提前致谢

# c# - ImageMagick 无法在 Windows 服务器上运行

> ID：11645594
> 
> 赞同：0
> 
> 时间：2012-07-25T08:27:38.940
> 
> 标签：c#, web-applications, imagemagick, windows-server-2008-r2

我在 C# 中创建了一个 Web 应用程序，以便通过命令行`converting PDF to JPG`使用。`ImageMagick`

这在本地工作正常，但是当我将它上传到服务器上时它不起作用。

```
public string appPath = "C:\\Program Files\\ImageMagick-6.5.3-Q16"; 

Process myProcess = new Process();
myProcess.StartInfo.FileName = appPath + @"\convert";
myProcess.StartInfo.Arguments = (@"-type truecolor -quality " + tbQuality.Text + " -colorspace " + cbColourSpace.SelectedValue.ToString().ToLower() + " -density " + tbDPI.Text + @" " + currentFile + resizeString + @" " + outputFile);
myProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
myProcess.StartInfo.CreateNoWindow = true;
myProcess.Start();
myProcess.WaitForExit(); 
```

这成功运行，没有任何异常，但没有生成任何`JPG`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:37:14.863

```
Imagemagick requires you to install ghostscript.

It's required by ImageMagick to interpret Postscript and PDF. 
```

现在它可以在任何系统上正常工作。

# c++ - 数组的 C++ 对齐未对齐属性

> ID：11645596
> 
> 赞同：0
> 
> 时间：2012-07-25T08:27:54.897
> 
> 标签：c++, arrays, alignment, memory-alignment

编辑：这是我的一个工作项目。在职的。我在 .cpp 文件的开头声明了一些 char 数组（甚至在 #include 部分之前）。然后我可以将这些数组与“16 字节对齐变量的指令”一起使用。

问题：如果我在另一个 .cpp 文件中使用这个 .cpp 文件作为包含会发生什么？我也可以在其他项目中使用该数组进行对齐操作吗？

问题2：这有捷径吗？我不想把我所有的变量都放在开头。

一些代码：（我在一些 16 字节对齐的数组上工作）

```
 //I put these arrays at the beginning, so they are aligned
//for the movaps instructions(x2 speed for reading and writing memory)
float v1[16];
float v2[16];
char counters[32];
char array_of_ones[32];
char source_array[4096];
char destination_array[4096];   
struct bit_field
{
    bf1:32; 
    bf2:32;
    bf3:32;
    bf4:32;
}some_area;
struct bit_mask_x
{
    bf1:32;
    bf2:32;
    bf3:32;
    bf4:32;
}some_mask;
float var_fast[16];
char alignment_purge[5];    //for the unalignment tests
char unaligned_source_array[4096];
char unaligned_destination_array[4096];

#include <math.h>
#include<stdlib.h>
#include<stdio.h>
#include<time.h>
.....
..... 
```

如果我将这个程序包含在另一个这样的程序中会发生什么：

```
#include <math.h>
#include<my_aligned.h> <-------- or my_aligned.cpp
#include<stdio.h>
#include<time.h> 
```

我必须为此使用 .h 文件吗？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:53:05.910

如果这可以正确对齐您的变量，您是否真的尝试过？当你编译时，可执行文件总是有一个标题，其大小可能不是 16 的倍数。此外，`alignment_purge`可能不会真正让它后面的变量不对齐，因为编译器可能会添加填充。最后，标题不会引入变量，因此如果您将变量放在标题上方或下方，这不会改变任何内容。

您可以查看[this question](https://stackoverflow.com/q/3839922/912144)以了解如何请求对齐的内存。

作为旁注，通常您不希望将源文件包含到另一个文件中。请参阅有关此主题的此[问题](https://stackoverflow.com/q/232693/912144)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:52:10.137

*不需要*将变量声明放在文件的顶部来强制执行任何特定的对齐。您可能只是在这里走运了，或者这可能是您的编译器的一个特质。

如果您使用的是 gcc，则可以使用*对齐* [属性](http://gcc.gnu.org/onlinedocs/gcc-3.1/gcc/Variable-Attributes.html)来请求正确的对齐方式——其他编译器可能具有等效的扩展名或`#PRAGMA`s。

例如。带有 gcc 扩展名的变量声明如下所示：

```
float v1[16] __attribute__ ((aligned (16)));
float v2[16] __attribute__ ((aligned (16))); 
```

如果您需要它完全可移植，我认为您唯一的解决方案是动态分配一大块内存，然后自己管理其中分配的块的对齐方式。

* * *

请注意，仅需要在 .cpp 文件中实际存储变量的位置强制执行对齐。您可以在标头中前向声明它们，这样您就可以在其他文件中引用它们。 `#include`配置 .cpp 文件不仅没有必要，而且会导致链接错误，因为每个文件都有自己的同名变量副本。

* * *

OP 正在使用 Digital Mars（如果你马上提到这个，我会查一下）。

搜索*数字火星对齐*，第一个命中是[pragma 文档](http://www.digitalmars.com/ctg/pragmas.html)。我首先查看了[align](http://www.digitalmars.com/ctg/pragmas.html#align)，它让我使用[pack](http://www.digitalmars.com/ctg/pragmas.html#pack)。

使用它，您的代码将如下所示：

```
#pragma pack(push, 16)
float v1[16];
float v2[16];
// ... any other aligned variables defined here
#pragma pack(pop) 
```

但是，*pack*会影响结构内成员的对齐方式——尚不清楚它对全局变量的作用。

我认为，可以肯定的是，您需要编写一个对齐的分配器：例如，从搜索 _aligned allocation C++` 开始，如果您无法弄清楚，请发布一个专门的问题。

# exception - 如何在工作流基础4中保留堆栈跟踪

> ID：11645600
> 
> 赞同：0
> 
> 时间：2012-07-25T08:28:15.193
> 
> 标签：exception, workflow-foundation-4

我在 WF4 中有一个工作流（xaml），并且有一个调用外部模块（例如映射器）的代码活动。所有异常都在第一层（例如服务层）中捕获。服务层通过调用 WorkflowInvoker 上的 Invoke 来执行工作流。当映射器抛出异常时，该异常在服务层中被捕获，但我丢失了映射器的堆栈跟踪。堆栈跟踪来自 WorkflowInvoker.Invoke..

有什么办法可以让映射器的堆栈跟踪保持不变？

这是层的架构：

服务层 -> Worklfow.Invoke ->（XAML：代码活动 -> 映射器）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:54:33.980

查看[http://neovolve.codeplex.com/SourceControl/changeset/view/87888#1420890](http://neovolve.codeplex.com/SourceControl/changeset/view/87888#1420890)

我在那里运行“hack”以获取抛出的异常以保留堆栈跟踪。

# php - Symfony 1.4 SF 认证路由

> ID：11645603
> 
> 赞同：0
> 
> 时间：2012-07-25T08:28:23.397
> 
> 标签：php, symfony1, symfony-1.4, sfguard

是否知道如何为 symfony 1.4 编写 sfAuth 路由？这类似于

```
homepage:
 url:   /
 param: { module: default, action: index }

default_index:
  url:   /:module
  param: { action: index }

default:
  url:   /:module/:action/* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:30:06.480

为 symfony 编写 sfAuth 很简单，只需按照您定义默认路由的类似方式即可

```
sf_guard_signin:
 url:   /login
 param: { module: sfGuardAuth, action: signin }

sf_guard_signout:
 url:   /logout
 param: { module: sfGuardAuth, action: signout }

sf_guard_password:
 url:   /request_password
 param: { module: sfGuardAuth, action: password } 
```

希望这能给你一些见解。

# phpstorm - 阻止 phpstorm 完成 ` `

> ID：11645605
> 
> 赞同：1
> 
> 时间：2012-07-25T08:28:32.820
> 
> 标签：phpstorm

每次我在插入符号位于末尾时按 Enter 键`<?php`，phpstorm 都会`?>`在标记后添加。

我一直在寻找并关闭我能找到的每个“自动完成”或“关闭标签”设置，但我的代码仍然被 extra 溢出`?>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:35:18.887

请[为](http://youtrack.jetbrains.com/issue/WI-7230)YouTrack 中有关此问题的未解决问题投票。

# css - >在css中有什么用？

> ID：11645606
> 
> 赞同：-2
> 
> 时间：2012-07-25T08:28:35.957
> 
> 标签：css

> **可能重复：**
> [CSS 规则中的“>”是什么意思？](https://stackoverflow.com/questions/3225891/what-does-mean-in-css-rules)

>在css中有什么用？像这样***ul li:hover > ul***或***ul li > li***。>_<，我还是网络开发新手。可以告诉我何时以及如何使用这个>？它叫什么？像呃大于？大声笑我很抱歉我真的很新。

```
#navMenu li > ul
{
    display:none;
    position:absolute;
}

#navMenu li:hover > ul
{
    display:block;
    width:100px;
}

#navMenu li > ul li > ul
{
    left:100%;
    top:0;
    width:100px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T08:30:34.213

### 儿童和后代选择器！

简单来说，`>`角色选择直接孩子并应用样式。

### 有关更多信息，请查看[子选择器和兄弟选择器](http://css-tricks.com/child-and-sibling-selectors/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T08:31:28.867

它是直接子选择器。在 CSS 2.1 中引入。

您可以在这个问题中找到更多信息： [“>”（大于号）CSS 选择器是什么意思？](https://stackoverflow.com/questions/3225891/what-does-mean-in-css-rules)

# python - 一种在 python 中显示缺乏可选依赖的信息方式

> ID：11645609
> 
> 赞同：0
> 
> 时间：2012-07-25T08:28:41.593
> 
> 标签：python, exception, import, dependencies

我正在 python 中创建一个包，它有一些可选的依赖项。核心功能不需要这些依赖项，但缺少它们会禁用某些类（它是一个提供用于存储 html 的字段的 orm。lxml 用于存储和检索值）。

显然，如果无法导入依赖项，我可能只是不创建类。但这可能会让用户感到困惑，因为他得到“模块 x 没有属性 y”，这不是真正的问题。

如果有人想要导入或使用一个类，有什么方法可以发出有意义的错误消息（我也在考虑创建一个`__getattribute__`引发错误的类）。有什么推荐的方法吗？一些有趣的方式是在一些高质量的包装中完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:31:16.417

并不真地。但是，如果可选导入失败，那么您可以提供“存根”类来解释实例化时的错误。

# ruby-on-rails - Rails 3.1 - 创建多个记录然后编辑

> ID：11645612
> 
> 赞同：0
> 
> 时间：2012-07-25T08:28:53.353
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一种情况，我希望用户指定他们想要创建的记录数，然后让应用程序在数据库中创建这些空白条目，然后显示“编辑”视图以用他们的数据填充它们。我知道这可能是不好的做法，但任何人都可以就如何解决这个问题提供一些指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:57:57.350

更好的方法是在循环/部分配置中创建 x 个新对象（例如 Post.new）。执行 Post.new 会创建相应 db 行的新实例，但它将该信息存储在内存中，并且在您发出 Post.save 命令之前不会在 db 中创建该对象。这些虚拟数据库字段具有所有适当的列，因此您可以将它们传递给编辑表单，并且一切正常。它唯一缺少的是一个 id，它将在您保存后分配给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:36:51.690

为什么要在数据库上创建空白记录？你可以这样做：

*   用户选择他想要的新记录数，然后提交
*   您显示创建表单 X 次
*   在一般提交时，您将每个表单提交到您的创建操作

我不知道你是否知道 phpmyadmin，但他们也是这样做的。

# .net - 多线程中列表上的 SyncLock 仍然抛出 ArgumentException

> ID：11645613
> 
> 赞同：2
> 
> 时间：2012-07-25T08:28:54.217
> 
> 标签：.net, vb.net, multithreading, locking, synclock

我需要从（后台）线程上的列表中读取，而它可能会从另一个（主线程）更新。因此，我尝试仅制作一个临时列表以不访问原始对象。由于更新可能发生在多个位置，因此将 SyncLock 放在读取逻辑上会很方便。这本身就是错误的吗？我有哪些选项可以正确锁定它，或者以其他方式在多线程条件下获取列表的可访问副本？

```
 ' In Main thread: 
 Public SomeList = New List(Of SomeClass) 
 ' ..edit list

 ' In other thread: 
  Dim tempList As List(Of SomeClass)
  SyncLock SomeList
      tempList = SomeList.ToList
  End SyncLock 
```

*SomeList.ToList*抛出：

> ArgumentException，目标数组不够长。检查 destIndex 和长度，以及数组的下限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:25:27.787

经过审查`.ToList`，因此`New List(Of SomeClass)(.)`，在 Reflector 中，异常必须来自刚刚设置为的`is2.CopyTo(Me._items, 0)`位置。`Me._items``New T(count - 1) {}`

这意味着输入集合中的项目数（转换为`ICollection(Of T)`in ）在检索`is2`后必须增加。`is2.Count`

因此，我在现在已删除的答案中重新提出假设：主线程中的所有位置是否`' ..edit list`也在`SyncLock SomeList`修改列表时使用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:33:28.667

不确定VB中的等价物是什么，但你不能做这样的事情吗？

```
IList<string> roDinosaurs = dinosaurs.AsReadOnly(); 
```

或者

```
tempList.AddRange(SomeList); 
```

# wpf - ItemsControl WPF中如何实现ItemSelection和IsMouseOver效果？

> ID：11645614
> 
> 赞同：0
> 
> 时间：2012-07-25T08:28:55.450
> 
> 标签：wpf, user-controls, itemscontrol

我`ItemsControl`在我的应用程序中使用，`ItemTemplate`并`ItemsPanelTemplate`以一种`ScrollViewer`风格应用于它。一切皆好。绑定工作得很好，但问题在这里：我想选择一个项目，`ItemsControl`但我不能像我们在触发器中`ListBox`使用属性那样做。`IsSelected`

我怎样才能实现项目选择，`IsMouseOver`类似于`ItemsControl`，`ListBox`有什么办法，因为我没有在网上找到任何有用的资源，所以想在这里寻求帮助。

# c# - 基于 Session 值的 MVC OutputCache

> ID：11645615
> 
> 赞同：6
> 
> 时间：2012-07-25T08:29:13.243
> 
> 标签：c#, .net, asp.net-mvc, outputcache

是否可以根据会话中的某些值来改变 MVC 中的输出缓存？我已经阅读了很多关于在 Global.asax 中使用 varybycustom 功能和覆盖 GetVaryByCustomString 的内容，但此时会话不可用。

```
public override string GetVaryByCustomString(HttpContext context, string custom)
{
     if (custom == "somekey") 
         //Want to check the session here (but it isn't available).

     return base.GetVaryByCustomString(context, custom);
} 
```

我知道这是因为 Session 直到稍后在请求管道中才创建。

我担心的是，在不根据用户会话更改缓存的情况下，页面（根据用户在会话中的内容而更改，具有特定于该用户的其他 HTML 等）将被缓存（因为 URL 是相同的）和由我们的负载均衡器、代理服务器等提供服务，然后在页面上使用其他人的会话信息服务于其他请求！

URL 相同的原因是用户作为“访客”进入，输入一些信息（POST），经过验证并存储在会话中，然后他们被重定向回同一页面（现在应该根据会话数据特定于用户）。

页面本身应该被正常缓存，因为如果“访客”访问相同的 URL，它应该每次都提供相同的“标准”页面。

是否可以以这种方式改变缓存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-09T10:07:04.723

如果您想个性化每个用户的缓存输出，最好将 Location 设置`OutputCacheLocation.Client`为如下所示。更多信息[在这里](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)

```
 [OutputCache(Duration=3600, VaryByParam="none", Location=OutputCacheLocation.Client, NoStore=true)]
   public string GetName()
   {
         return "Hi " + User.Identity.Name;
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:12:48.063

您应该查看“甜甜圈缓存”，但这不受 ASP.NET MVC 3 的支持，至少不是开箱即用的。幸运的是，有人已经为您解决了这个问题，请参阅[MvcDonutCaching](http://www.devtrends.co.uk/blog/donut-output-caching-in-asp.net-mvc-3)

我读到 ASP.NET MVC 4 将包括开箱即用的“甜甜圈孔缓存”，但我不知道它是否在当前的 RC 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:40:44.277

[输出缓存 ActionFilter](http://blog.maartenballiauw.be/post/2008/06/26/Creating-an-ASPNET-MVC-OutputCache-ActionFilterAttribute.aspx)会有帮助吗？

或者，也许您可​​以将视图重构为布局页面以及匿名和经过身份验证部分的部分视图，然后使用[Partial Caching](http://blog.stevensanderson.com/2008/10/15/partial-output-caching-in-aspnet-mvc/)。

# r - Opera 和 RCurl 中的 HTTP 404，但 Firefox 中没有

> ID：11645617
> 
> 赞同：1
> 
> 时间：2012-07-25T08:29:23.227
> 
> 标签：r, http, firefox, opera, rcurl

向 localhost 上的 Web 服务发送请求时收到 HTTP 404：

```
http://localhost/my-ws/Test 
```

在 Firefox 中，我得到一个 HTTP 200 OK：

```
GET /my-ws/Test HTTP/1.1
Host: localhost
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: de-de,de;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
Cache-Control: max-age=0 
```

在歌剧中：

```
GET /my-ws/Test HTTP/1.1 
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; en; rv:2.0) Gecko/20100101 Firefox/4.0 Opera 12.00
Host:   localhost
Accept: text/html, application/xml;q=0.9, application/xhtml+xml, image/png, image/webp, image/jpeg, image/gif, image/x-xbitmap, */*;q=0.1
Accept-Language:    en,de-DE;q=0.9,de;q=0.8
Accept-Encoding:    gzip, deflate
Pragma: no-cache
Cache-Control:  no-cache
Connection: Keep-Alive 
```

这里有什么问题？为 RCurl 提供哪些参数以获得与 Firefox 中相同的结果？

# nhibernate - NHibernate 避免 N+1 深层次

> ID：11645626
> 
> 赞同：1
> 
> 时间：2012-07-25T08:29:34.117
> 
> 标签：nhibernate

我有以下对象：A -> B -> IList -> D -> IList 等等..

如果我获取 A 的列表，NHibernate 会在 B 上进行内部连接。没关系。但是 C 是通过 N+1 问题获取的。

我试过这个：

```
var query = session.Query<A>()
    .Fetch(x => x.B)
    .ThenFetchMany(x => x.C)
    .Distinct(); 
```

但后来他做了 117 次取回，而不是之前的 5 次。例如 E 现在没有急切地加载。或者 C 在 B 中是十次而不是一次。

对于这种情况，最好的方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T22:35:21.453

看看 Ayende 的文章[Solving the Select N+1 Problem](http://ayende.com/blog/3732/solving-the-select-n-1-problem)，开始使用 NHibernate Profiler，它可以检测 N+1 个问题[Alert: Select N+1](http://nhprof.com/Learn/Alerts/SelectNPlusOne)

# java - 为每个新线程执行代码？

> ID：11645627
> 
> 赞同：2
> 
> 时间：2012-07-25T08:29:40.000
> 
> 标签：java, multithreading

是否可以在每次创建新线程时告诉 JVM（或一些适当的对象）执行给定的代码块？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T08:31:24.543

不，不使用标准 Java。

看看面向方面的编程，例如[AspectJ](http://www.eclipse.org/aspectj/)。您应该能够为 Thread 构造函数创建一个切入点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T08:54:44.197

不是每次都创建一个新线程。**但是，如果您使用 ThreadPoolExecutor 创建新线程，则可以指定一个 ThreadFactory，它可以在该工厂**每次创建线程时运行特定的代码块。一个简单的示例（运行的代码块打印线程的名称）如下所示：

```
public static void main(String[] args) {
    ExecutorService executor = Executors.newCachedThreadPool(new ThreadFactory() {

        @Override
        public Thread newThread(Runnable r) {
            Thread t = new Thread(r);
            System.out.println("New thread created: " + t); //Your block of code
            return t;
        }
    });

    Runnable r = new Runnable() {

        @Override
        public void run() {
            try {
                Thread.sleep(150);
            } catch (InterruptedException ex) {
                Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    };

    for (int i = 0; i < 5; i++) {
        executor.submit(r);
    }

    executor.shutdown();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T11:02:00.103

这取决于您的用例，但您也可以执行 Java 字节[码检测](http://en.wikipedia.org/wiki/Instrumentation_%28computer_programming%29)。然而，这通常用于测量、错误跟踪、分析等，因为它具有明显的性能影响。

这可以通过[ASM](http://asm.ow2.org/index.html)完成，他们有一个入门[教程](http://asm.ow2.org/doc/tutorial-asm-2.0.html)或查看指南[Add Logging at Class Load Time with Java Instrumentation](http://today.java.net/pub/a/today/2008/04/24/add-logging-at-class-load-time-with-instrumentation.html)，他们解释了如何以某种方式修改 Java 代码，每次添加该代码方法进入和退出。

在您的情况下，您只会对特殊方法执行此操作，无论是`Thread()`构造函数还是调用`Thread.start()`.

# batch-file - 要删除 *.vcproj.* 的批处理文件，例如 code.vcproj.user1 但没有 *.vcproj

> ID：11645628
> 
> 赞同：0
> 
> 时间：2012-07-25T08:29:41.873
> 
> 标签：batch-file, vcproj

如何编写批处理文件以`*.vcproj.*`仅删除 VisualStudioUserFile（）而不删除 VisualStudioProject（`*.vcproj`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:36:29.433

这可以以交互方式运行`cmd`：

```
for %x in (*.vcproj.*) do if not "%~xx"==".vcproj" del "%x" 
```

如果你想要一个批处理文件，那么你需要

```
for %%x in (*.vcproj.*) do if not "%%~xx"==".vcproj" del "%%x" 
```

不过，这不会删除类似`blah.vcproj.vcproj`的文件。我不知道在你的情况下这些可能性有多大。

# eclipse - Eclipse CDT：无法从方法声明导航到实现

> ID：11645632
> 
> 赞同：3
> 
> 时间：2012-07-25T08:29:55.417
> 
> 标签：eclipse, navigation, implementation, declaration, eclipse-cdt

我正在 Windows 7 上的 Eclipse Indigo 下开发 C++。

我注意到我无法轻松地从方法声明导航到相应的实现。我看过以下帖子，并安装了Implementors插件，但似乎没有任何区别： [在eclipse中， ctrl-click 转到我单击的方法的声明。对于具有一种实现的接口，我如何才能直接访问该实现？](https://stackoverflow.com/questions/2105979/in-eclipse-ctrl-click-goes-to-the-declaration-of-the-method-i-clicked-for-inte) 编辑：我刚刚检查过，它没有包含在已安装插件的列表中。我重试了，它似乎没有安装到 Windows 下的注册表中。

从其他地方谷歌搜索，我读到另一个选项应该是将鼠标悬停在方法声明上，然后选择 F2 使实现成为焦点，但这会显示一个带有相同方法声明的 opo-up，而不是它的实现。

右键单击 .h 文件中的方法声明，我可以选择 Toggle Source/Header，这会在另一个选项卡中打开 .cpp 文件，但它不会导航到方法实现。

任何人都可以帮忙吗？

# jquery - 选择除所选选项之外的所有选项

> ID：11645646
> 
> 赞同：0
> 
> 时间：2012-07-25T08:30:36.133
> 
> 标签：jquery

除了被选中的选项之外，我将如何访问选择的每个选项？

我正在尝试，但没有成功：

```
$('select[id^="buyingSupplierRef"]').live('mouseleave', function()
{
    $(this+' option:not(option:selected)').each(function(){
    $(this).detach() ;
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:32:14.137

你不能用`this + ' ...'`它来做这个，`this`是一个 DOM 元素。相反，使用`find`：

```
$(this).find('option:not(:selected)').each(function(){ ... 
```

（您的选择器`option:not(option:selected)`很好，您不必重复该位，它没有效果；因此上面。*）*`option`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:32:09.247

尝试以下操作：

```
$('option:not(:selected)', this).each(function(){
   // ...
}) 
```

请注意，`live()`已弃用，您可以`on()`改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:32:44.963

```
$( "option:not(:selected)", this).detach(); 
```

不需要`.each`,`.detach`无论如何都会对所有元素进行操作。

# android - 使用共享偏好保存切换状态

> ID：11645647
> 
> 赞同：1
> 
> 时间：2012-07-25T08:30:40.033
> 
> 标签：android, toggle, sharedpreferences

我尝试在我的应用程序中保存切换状态。这是我的代码

```
 boolean on;
public SharedPreferences spref;
ToggleButton tb;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.fb_intermidiate);
    spref = getPreferences(MODE_PRIVATE);
    tb = (ToggleButton) findViewById(R.id.toggleButton1);
    on = spref.getBoolean("On", true);  //default is true
    if (on = true) 
    {
      tb.setChecked(true);
    }       else
    {
      tb.setChecked(false);
    }
    back = (Button)findViewById(R.id.button_back); 
    //back.setText(R.string.back_button_in_settings);
    back.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            finish();
        }
    }); 
} 

public void onToggleClicked(View view) {

    on = ((ToggleButton) view).isChecked();
    if (on) {
        Toast.makeText(this, "On : Notification will be Enabled", Toast.LENGTH_SHORT).show();
        SharedPreferences.Editor editor = spref.edit();
        editor.putBoolean("On", true); // value to store
        editor.commit();

    } else {
    Toast.makeText(this, "Off : Notification will be Disabled", Toast.LENGTH_SHORT).show();
        SharedPreferences.Editor editor =spref.edit();
        editor.putBoolean("Off", false); // value to store
        editor.commit();
    }  
} 
```

但它的力量越来越近了。:(

这是我的日志猫

```
07-25 09:02:23.317: E/AndroidRuntime(640): java.lang.RuntimeException: Unable to start       activity ComponentInfo{com.ace.gugulog/com.ace.gugulog.activities.FacebookIntermidiate}: java.lang.NullPointerException

07-25 09:02:23.317: E/AndroidRuntime(640):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)

07-25 09:02:23.317: E/AndroidRuntime(640):  at java.lang.reflect.Method.invokeNative(Native Method)

07-25 09:02:23.317: E/AndroidRuntime(640):  at java.lang.reflect.Method.invoke(Method.java:491)

07-25 09:02:23.317: E/AndroidRuntime(640):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)

07-25 09:02:23.317: E/AndroidRuntime(640):  at dalvik.system.NativeStart.main(Native Method)
07-25 09:02:23.317: E/AndroidRuntime(640): Caused by: java.lang.NullPointerException

07-25 09:02:23.317: E/AndroidRuntime(640):  at  com.ace.gugulog.activities.FacebookIntermidiate.onCreate(FacebookIntermidiate.java:32)

07-25 09:02:23.317: E/AndroidRuntime(640):  at android.app.Activity.performCreate(Activity.java:4397)

07-25 09:02:23.317: E/AndroidRuntime(640):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:55:26.053

我认为最可能的错误来源是，您没有正确使用共享首选项，请将代码更改为：您应该使用 getSharedPreferences 而不是 getPreferences 方法。

```
 boolean on;
public SharedPreferences spref;
final String PREF_NAME="preferences";
ToggleButton tb;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.fb_intermidiate);
    spref = getSharedPreferences(PREF_NAME, MODE_PRIVATE);
    tb = (ToggleButton) findViewById(R.id.toggleButton1);
    on = spref.getBoolean("On", true);  //default is true
    if (on = true) 
    {
      tb.setChecked(true);
    }       else
    {
      tb.setChecked(false);
    }
    back = (Button)findViewById(R.id.button_back); 
    //back.setText(R.string.back_button_in_settings);
    back.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            finish();
        }
    }); 
} 

public void onToggleClicked(View view) {

    on = ((ToggleButton) view).isChecked();
    if (on) {
        Toast.makeText(this, "On : Notification will be Enabled", Toast.LENGTH_SHORT).show();
        SharedPreferences.Editor editor = spref.edit();
        editor.putBoolean("On", true); // value to store
        editor.commit();

    } else {
    Toast.makeText(this, "Off : Notification will be Disabled", Toast.LENGTH_SHORT).show();
        SharedPreferences.Editor editor =spref.edit();
        editor.putBoolean("Off", false); // value to store
        editor.commit();
    }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:38:15.960

您应该检查 if 条件 if(on) 或 if (on == true)。我不是导致问题的原因，但它是其中之一

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:03:45.417

你可以试试这个方法

```
SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
SharedPreferences.Editor editor = sharedPreferences.edit();

Boolean checkforFirstTime = sharedPreferences.getBoolean("checkforFirstTime", true);

    //Checking whether application is launched first time
    if (checkforFirstTime) {
        // Make boolean value "checkforFirstTime" to false
        editor.putBoolean("checkforFirstTime", false);
        editor.commit();
    }
    } else {
              // else part
    } 
```

# asp.net-mvc - 实体框架与集合对象，使用 Automapper，更新时异常

> ID：11645648
> 
> 赞同：1
> 
> 时间：2012-07-25T08:30:58.023
> 
> 标签：asp.net-mvc, entity-framework, orm, entity-framework-4, automapper

我有一个 EF 4.1 模型，从我的数据库中生成了 PERSON 和 ADDRESS 两个表。

//这个方法有效

```
public void Update(IPerson person)
{
    var personDb = _dataContext.PERSON.SingleOrDefault(x => x.ID == person.Id);
    Mapper.Map<Person, PERSON>((Person)person, personDb);
    _dataContext.SaveChanges();
} 
```

但是当我在 Automapper 映射中删除 .Ignore() 时，我得到了这个异常：

*无法初始化 EntityCollection，因为 EntityCollection 所属对象的关系管理器已附加到 ObjectContext。InitializeRelatedCollection 方法只能在对象图的反序列化过程中被调用来初始化一个新的 EntityCollection。*

我想在向现有地址添加新地址时保存人员和地址。

任何想法 ？

谢谢，

```
public void AutomapperInit()
{
    Mapper.CreateMap<Person, PERSON>()
        .ForMember(x => x.ADDRESS, opt => opt.Ignore());
    Mapper.CreateMap<PERSON, Person>()
        .ForMember(dest => dest.Address, option => option.MapFrom(src => src.ADDRESS.Select(address => Mapper.Map<ADDRESS, Address>(address)).ToList()));
    Mapper.CreateMap<Address, ADDRESS>();
    Mapper.CreateMap<ADDRESS, Address>()
        .ForMember(dest => dest.Rue, option => option.MapFrom(src => src.STREET));
}

public interface IPerson
{
    int Id { get; set; }
    string FirstName { get; set; }
    string LastName { get; set; }
    ICollection<IAddress> Address { get; set; }
}

public interface IAddress
{
    string Rue { get; set; }
    string Number { get; set; }
    int PersonId { get; set; }
}

class Person : IPerson
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public ICollection<IAddress> Address { get; set; }
}

 class Address : IAddress
{
    public string Rue { get; set; }
    public string Number { get; set; }
    public int PersonId { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:26:10.667

做

```
var personDb = Mapper.Map<Person, PERSON>((Person)person, personDb); 
_dataContext.Attach(personDb);
_dataContext.SaveChanges(); 
```

给出您期望的结果，还是我误解了您的问题？

# facebook - 是否可以在没有弹出窗口的情况下实现 facebook 身份验证

> ID：11645650
> 
> 赞同：1
> 
> 时间：2012-07-25T08:31:05.630
> 
> 标签：facebook, authentication, popup

我们正在将应用程序集成为工作中的 facebook 应用程序。我希望能够检测用户是否已登录 facebook，如果没有，则提示进行身份验证。

到目前为止，我们已经成功使用了 facebook SDK 和它提供的登录功能。但是，这会导致我们的应用程序创建一个身份验证弹出窗口，并且它被大多数浏览器阻止，因此我们的首要任务是重新实现身份验证逻辑以不使用弹出窗口。

根据 facebook 文档中的[本](https://developers.facebook.com/docs/authentication/client-side/)教程，可以通过对用户状态更改请求使用事件订阅（在用户注销时不起作用）或通过获取访问令牌来完成。问题是令牌作为请求参数返回到顶部窗口（我在用户验证后指定为返回 url 的 url）。由于存在一些跨域和浏览器限制，我无法使用客户端脚本来获取值，并且我被卡住了。

此处已提出相关问题，常见问题是大多数应用程序正在运行`localhost`。但是，我们的应用程序的情况是，我们已将应用程序部署到本地网络服务器，该服务器由公共域公开，但仍然存在跨域限制问题。它在 facebook 应用程序配置中被其公共域名引用。我完全相信这些域可以从外部完全访问。

一般来说，我们的情况是，我们希望在 Facebook 用户使用该应用程序时托管该应用程序。也许这种方法可能与我们的要求不兼容？是否可以配置跨域通信以避免该问题？还有其他方法可以避免 facebook 登录弹出窗口吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:06:40.103

首先，现代浏览器中弹出窗口阻止程序的默认设置是，它们只阻止在没有用户交互的情况下调用的弹出窗口。如果您在页面加载时自动调用 FB.login，它可能会被阻止。但是，如果您向用户提供一个链接/按钮说“在此处登录”并且仅在单击该链接/按钮时调用 FB.login，那么弹出窗口很可能会显示而不是阻止。

如果您不愿意这样做——那么您的另一个选择是使用服务器端身份验证流程。您可以将用户重定向到身份验证对话框，这将发生在*同一*窗口中，之后他将被引导回您的应用程序。

# android - 如何通过 WIFI 提高 Android 上的连接速度

> ID：11645653
> 
> 赞同：1
> 
> 时间：2012-07-25T08:31:12.770
> 
> 标签：android, httpurlconnection

```
 URL url = new URL(URL path);
                HttpURLConnection connection = (HttpURLConnection)url.openConnection();
                connection.setConnectTimeout(30000);
                connection.setReadTimeout(30000);
                connection.setDoInput(true);
                connection.setUseCaches(true);
                connection.connect();
                InputStream is = connection.getInputStream(); 
```

以上代码是我的Android代码。
我尝试连接一个 URL 路径并获取 InputStream 的信息。
我尝试通过 Android 手机和 iPhone 使用相同的 wifi 连接相同的 URL 路径。
Android 手机在 moto 手机或 HTC 手机上花费大约 10 秒。
但 iPhone 只用了不到 3 秒。
我认为这可能不仅是由于wifi速度造成的。（因为我尝试使用相同的wifi）。
所以我想问一下是否可以通过代码改进？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:49:37.347

尝试使用 apache`HttpClient`而不是`URL.openConnection()`

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpGet get = new HttpGet("http://your.url");

HttpResponse response;
try {
    response = httpClient.execute(get);
    InputStream is = response.getEntity().getContent();
} catch(Exception e){
    e.printStackTrace();
} 
```

**编辑：**

在 API 级别 22 (Android M) 中，Apache HttpClient 将被移除，因此该方法已被弃用。

有关更多信息，请参阅：http: [//developer.android.com/preview/behavior-changes.html#behavior-apache-http-client](http://developer.android.com/preview/behavior-changes.html#behavior-apache-http-client)

推荐的方法是使用`HttpUrlConnection`（[http://developer.android.com/reference/java/net/HttpURLConnection.html](http://developer.android.com/reference/java/net/HttpURLConnection.html)）：

```
URL url = new URL("http://your.url");
HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
try {
    InputStream in = new BufferedInputStream(urlConnection.getInputStream());
    readStream(in);
} finally {
    urlConnection.disconnect();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-12T16:57:08.507

使用 volley 它是一个 HTTP 库，可以让 Android 应用程序的网络更轻松、更快捷。Volley 在 GitHub 上可用。Volley 或许能够帮助您简化和提高应用程序网络操作的性能。

# jsf - PrimeFaces selectOneListBox

> ID：11645656
> 
> 赞同：2
> 
> 时间：2012-07-25T08:31:17.923
> 
> 标签：jsf, primefaces, selectonelistbox

我将 JSF 与 Primefaces 一起使用。当我使用

```
<h:selectOneListbox> 
```

所有对象都正确列出，但是当我用 p 替换 h 时，

```
<p:selectOneListbox> 
```

没有任何作用。

错误在哪里？我已经列出了下面的代码。

```
<p:selectOneListbox id="cmbProvince1" value="#{mohController.current.superArea}" disabled="#{mohController.modifyControlDisable}" style="size:5;height: 200px;">
    <f:selectItems value="#{mohController.dpdhsAreas}" var="p" itemValue="#{p}" itemLabel="#{p.name}" />
</p:selectOneListbox>

<h:selectOneListbox id="cmbProvince" value="#{mohController.current.superArea}" disabled="#{mohController.modifyControlDisable}" style="size:5;height: 200px;">
    <f:selectItems value="#{mohController.dpdhsAreas}" var="p" itemValue="#{p}" itemLabel="#{p.name}" />
</h:selectOneListbox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:07:10.560

原因是使用的集合的类型是 DataModel，它适用于 JSF，但不适用于 PrimeFaces。将类型更改为 List 解决了这个问题。

# python - 如何自动自动回答我的 python 脚本？

> ID：11645658
> 
> 赞同：0
> 
> 时间：2012-07-25T08:31:18.040
> 
> 标签：python, bash, automation

我有一个安装脚本会问我一些问题。

或者我可以在不使用 pexpect 的情况下解决这个[问题吗？](https://stackoverflow.com/questions/10191113/using-pexpect-to-automate-a-manage-py-syncdb-dialogue)

在我的 Django 项目中

```
python manage.py syncdb

....
....
....
Would you like to create a default user (yes/no)?
What is the username?
What is the password?
....
.... 
```

我想通过键入 yes 、 root 和 12345 来自动化这个过程。

我可以自动完成吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:33:40.790

是的...但是您*应该*通过传递绕过超级用户创建并提供固定装置的选项来做到这一点。

# wpf - 如何将 wpf contentstringformat 用于多种格式？

> ID：11645662
> 
> 赞同：0
> 
> 时间：2012-07-25T08:31:33.680
> 
> 标签：wpf, format, tooltip

有没有办法在工具提示中将 ContentStringFormat 用于多种格式？

```
ContentStringFormat="{}{0:N0}{0:P}"

<Slider.ToolTip> <ToolTip Content="{Binding Path=PlacementTarget.Value, RelativeSource={RelativeSource Mode=Self}}" ContentStringFormat="{}{0:N0}" /> </Slider.ToolTip> 
```

事情就是这样。当我像这样更改 ContentStringFormat 时：

```
ContentStringFormat="{}{0:N0} {0:P}" 
```

它显示 505,000.00 % 而不是 50 %

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:14:42.390

这里存在三个问题：

*   如果显示的是 505 而不是 50，则您输入的数字是 5.05 但应该是 0.505
*   其次，如果您希望 0.505 显示为 50%，则必须先对其进行舍入
*   最后，你必须使用`P0`

所以总结一下：

```
//code
public partial class MainWindow : Window
{
  public MainWindow()
  {
    InitializeComponent();
    DataContext = this;
  }

  private double MyActualNumber
  {
    get { return 0.505; }
  }

  public double Number
  {
    get { return System.Math.Round( 100.0 * MyActualNumber ) / 100.0; }
  }
}

//xaml
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Label Content="{Binding Path=Number}" ContentStringFormat="{}{0:P0}"/>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:11:12.543

当您使用[标准数字格式](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx) `P`或`p`显示的数字首先乘以 100，然后格式化为带有尾随百分比符号的浮点数。紧跟在 之后的精度说明符`P`，例如`P2`控制小数位数。见[这里](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#PFormatString)。

`0.5`因此，用格式格式化一个值会`P2`产生字符串“50.00 %”：

您似乎要做的是将值 50 显示为数字 ( `N0`)，后跟百分比 ( `P`)。结果是字符串“50 5,000.00 %”（因为默认精度为`P`2）。

# c++ - Qt 小部件何时获得paintEvent？

> ID：11645667
> 
> 赞同：21
> 
> 时间：2012-07-25T08:31:54.990
> 
> 标签：c++, qt, paintevent

我想知道小部件在哪些情况下会收到它的绘制事件，以及它如何随操作系统而变化。

paintEvent 的 Qt 文档只说

> 绘制事件是重新绘制全部或部分小部件的请求。它可能由于以下原因之一发生：
> 
> 调用了 repaint() 或 update()，
> 
> 小部件被遮挡，现在已被发现，或者
> 
> 许多其他原因。

到目前为止，我已经在paintEvent中添加了一些痕迹，

```
void Widget::paintEvent(QPaintEvent *e)
{
    static int count = 0;
    qDebug("paintEvent, %d", count++);
} 
```

这就是我发现的（至少在 Windows 7 上）：

当小部件失去/获得焦点时调用paintEvent。当另一个小部件经过我们的小部件时*，不会调用*绘制事件。我不知道这是否是因为 Windows 7 合成。当最小化的窗口被恢复时，paintEvent 也会被调用。调整大小时调用paintEvent。

那么行为是否依赖于操作系统？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-25T08:49:02.453

是的，在您描述的意义上，它取决于操作系统。

桌面窗口管理器 (DWM)，位于 Windows Vista 和 7 中，负责桌面组合、Aero 玻璃效果和其他各种吸引人的小工具，其工作方式与以前版本的 Windows 中使用的模型略有不同. 正如您所怀疑的那样，它会为您的窗口缓存位图，即使它们不可见，因为它们被另一个窗口遮挡。这意味着它不需要您重新绘制它们（因此它不会引发绘制事件），因为它可以从缓存的位图中对它们进行 blit。这不仅是对每个应用程序自身重绘的潜在优化，它还允许 DWM 实现诸如 Aero Flip 之类的东西，为此它使用其缓存的位图。

一个例外是，例如，`CS_SAVEBITS`班级风格一直如此。如果 DWM 缓存的位图已失效（例如，因为您的窗口图像已更改），它将丢弃它并要求您重新绘制窗口。

通过关闭 DWM 组合（切换到“Windows 经典”主题）来测试这个理论，然后遮盖您的窗口以查看您是否收到绘制事件。您应该，就像您在所有以前版本的 Windows 中所做的那样。

但更重要的一点是，您不应依赖以任何特定顺序接收绘制事件。**关于绘制事件，您应该假设的*唯一*一件事是，当操作系统需要您重新绘制窗口时，您会收到一个。**否则，它不会打扰你。我确信这就是文档满足于在这一点上含糊其辞的原因，超出了可能的技术限制。

这就是为什么逻辑不应该进入绘制事件处理程序内部的原因。该方法应该负责的*唯一事情是**按当前状态*重新绘制窗口。该状态需要保存在其他地方。此规则也是可交换的：您不应在绘制事件处理程序*之外进行任何绘制。*

当然，您始终可以通过使窗口无效来*强制*引发绘制事件（我确定 Qt 有一个`invalidate`or`refresh`方法，请查看文档），但这并不意味着放置应用程序逻辑的好模式在处理此事件的方法中。

# r - 排除 aprstable{aprstable} 中的重要“星星”？

> ID：11645668
> 
> 赞同：0
> 
> 时间：2012-07-25T08:31:59.723
> 
> 标签：r

默认情况下，`aprstable()`打印出表示重要性级别的“星”。有没有办法完全放弃它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:02:33.113

`aprstable()`手册并没有特别提及，但你可以用它来`stars=FALSE`摆脱星星。默认情况下，它只查找`1`or `default`，因此甚至可以输入类似的`stars=3`内容并仍然得到一个没有重要星号的表格。

如果您输入类似`stars=NULL`的内容，您将收到以下错误消息，这使我得到了答案：

```
Error in if (signif.stars && stars == "default") { : 
  missing value where TRUE/FALSE needed 
```

# java - 有没有办法将 Class 转换为 IJavaElement

> ID：11645671
> 
> 赞同：0
> 
> 时间：2012-07-25T08:32:05.397
> 
> 标签：java, class

有没有办法做到这一点？还是我必须创建一个类并实现 IJavaElement？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:39:16.660

您不能将任意类型的任何对象强制转换为任何其他任意类或接口类型。

强制转换（从一种非原始类型到另一种非原始类型）不会进行任何神奇的自动转换。当你将一个类型的对象强制`A`转换为 type`B`时，这意味着你告诉编译器“看，我`A`这里有一些类型的对象，我希望你把它当作一个`B`; 不要给我一个类型错误，因为我知道得更好”。

类型检查仍将完成，但在运行时而不是编译时进行。如果在运行时，对象结果不是 a `B`，您将得到 a `ClassCastException`。

假设您在谈论 class `java.lang.Class`，那么不，您不能将其强制转换为`IJavaElement`（无论它来自哪里），因为`IJavaElement`它不是 的超类，也不是由`java.lang.Class`. 如果你尝试做演员，你会`ClassCastException`在你运行你的程序时得到一个。

# jquery - highcharts：Internet Explorer 忽略了我的 div 容器的宽度

> ID：11645678
> 
> 赞同：1
> 
> 时间：2012-07-25T08:32:16.613
> 
> 标签：jquery, html, css, internet-explorer, highcharts

我正在尝试使用[HighCharts](http://www.highcharts.com/ "高图")渲染图形，尽管它是一个很棒的库，但我遇到了 IE 问题（奇怪...:()，因为该库忽略了我在我的 div 容器的样式属性并溢出了预期的大小。

```
<div id="graficoVolumi" style="width: 100%; height: 400px">

</div> 
```

我在 Firefox 或 Chrome 中没有这个问题，其中图表实际上符合 style 属性中设置的尺寸。

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T09:36:23.653

我有同样的问题，我解决它的方法是强制图表的宽度和高度。

默认情况下，宽度是根据包含元素的偏移宽度计算的。

[HighCharts 宽度参考](http://api.highcharts.com/highcharts#chart.width)

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:35:39.283

我也遇到过 highcharts 和 IE 的问题。奇怪的是，当我添加 HTML5 doctype 标签时，这个问题得到了修复

```
<!DOCTYPE html> 
```

在我的页面顶部。

# python - Python中的递归类定义

> ID：11645680
> 
> 赞同：3
> 
> 时间：2012-07-25T08:32:21.933
> 
> 标签：python, class, recursion, fluent-interface, python-2.x

我正在尝试使用 Python 中的流畅接口。

流畅的 sql 查询生成器的示例在使用中看起来像这样：

```
sql.select('foo').select('bar').from('sometable').tostring() 
```

我很快意识到递归定义嵌套类的能力可能会有所帮助。

```
class sql:
    class select:        
        class select   # <--  HERE
        def __init__(self, dbcolumn, astype=None, asname=None):
            self.dbcolumn = dbcolumn
            self.astype = astype
            self.asname = asname 
```

在标有注释“# <-- HERE”的行中：
我希望这个嵌套类引用引用包含类的相同“选择”类定义。

这有可能吗？也许使用一些我不知道的关键字？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T08:36:22.763

不需要“递归类定义”。要允许链接，您需要做的就是`self`在您的方法中返回（或者如果您的对象不可变或某些方法不应修改输入对象，则返回同一类的实例）。

例子：

```
>>> class SQL(object):
...     def __init__(self):
...         self.columns = []
...     def select(self, col):
...         self.columns.append(col)
...         return self
...
>>> s = SQL()
>>> s.select('foo').select('bar').columns
['foo', 'bar'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:07:36.570

正如问题的标题所示，我真的很想知道如何递归地嵌套类定义。我相信有很多方法可以“给 fluent-interface-in-python 猫换皮”。

我找到了一种使用装饰器递归嵌套类定义的方法：

```
# class decorator
def recursiveclass(decorated_class):
    decorated_class.__dict__[decorated_class.__name__] = decorated_class
    return decorated_class     

#fluent interface
class sql:
    @recursiveclass
    class select:        
        def __init__(self, dbcolumn, astype=None, asname=None):
            self.dbcolumn = dbcolumn
            self.astype = astype
            self.asname = asname 
```

请注意，我并不是说这是在 Python 中实现流畅接口的最佳方式。我只是在做实验。

验证：

```
dir(sql.select.select.select.select)
['__doc__', '__init__', '__module__', 'select'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:36:24.010

您将*类*与*方法*混淆了。

`select`是 的实例上的方法`class sql`，而不是嵌套类。它可以返回另一个实例。

```
class SelectStatement(object):
    def select(self, tablename):
        return SelectStatement()

class SQL(object):
    def select(self, tablename):
        return SelectStatement() 
```

看一下[SQLAlchemy](http://www.sqlalchemy.org/)的源代码；它正是这样做的；从结构 python 类生成 SQL，您可以通过以这种方式调用实例上的方法来优化查询。例如，可以链接一系列连接：

```
q = session.query(User).join(User.orders).join(Order.items).join(Item.keywords) 
```

# c# - 代码契约和接口实现——1-1关系有哪些原因

> ID：11645682
> 
> 赞同：1
> 
> 时间：2012-07-25T08:32:34.420
> 
> 标签：c#, code-contracts

更多地了解代码合约，它们似乎是我想在我的项目中使用的东西。

鉴于我构建 Web 服务层（从 MVC 控制器访问的服务层的抽象）的方式，我发现自己想知道为什么不能为接口实现的各种排列指定不同的合同。

具体来说，我对在给定通用接口方法的情况下只能以 1-1 方式指定合同的原因感兴趣。

这是我的代码结构的一个示例，我的目标是确定我想如何使用代码合同。我相信有更多经验的人能够将我推向正确的方向。

我正在使用 CQRS 风格的方法，例如：

```
public interface IQuery<in TInput input,out TOutput output>
{
     TOutput Invoke(TInput request)
}

public interface IGetSomeUnicornsFromAMagicalLand : 
                                             IQuery<int, IEnumerable<Unicorn>>{}

 // Implementation
public class GetSomeUnicornsFromMagicLand : IGetSomeUnicornsFromAMagicalLand
{
    public IEnumerable<Unicorn> Invoke(int numberOfUnicornsToReturn)
    {
       // Here I'd like to specify some preconditions on the input, 
       // specific to type int

       return _wizardry
                 .GetMagicCreature<Unicorn>(numberOfUnicornsToReturn)
                 .DoMagicalConversionToEnumerable()
    }

} 
```

鉴于这种情况，希望在实现级别而不是在设计用于在接口上应用合同的抽象类（作为通用机制）中指定合同似乎是合理的。

*   无法做到这一点的一些原因是什么？
*   还有其他方法可以解决这个问题吗？
*   如果我想使用代码合同，这不是一个好的结构吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:48:29.853

根据[Liskov Substitution Principle](http://en.wikipedia.org/wiki/Liskov_substitution_principle)，总的来说，我会说在接口级别指定这些合同确实更有意义。

LSP 基本上说抽象概念的每个实现都应该是可互换的，而抽象概念的用户不必知道它们的区别。换句话说，您的代码不应该因为您切换到某个接口的另一个实现而开始中断。

通过对输入参数施加特定于实现的附加要求，您可以有效地将调用代码（在您的情况下，这很可能是处理 的一般概念的框架级代码`IQuery`）与特定实现耦合。

对于您的具体情况，推理可能适用也可能不适用（这就是为什么它是一个原则，它不是一成不变的），但显然像代码合同这样的一般框架只能考虑一般原则:-)

编辑：在考虑了更多之后，在我看来，派生接口可能是“真正的”接口，而不是通用接口`IQuery<TInput, TOutput>`。通用基础接口似乎更像是一个“实现细节”，您确实不能对这个通用基础接口做出任何有意义的假设（合同）。只有在具体的层面上，你才能对这些输入和输出参数做出任何有意义的推理。

也许我们需要 C# 中 C++ 的私有继承（或实现继承）来对消费者“隐藏”这个接口。[阅读相关问题的出色答案](https://stackoverflow.com/a/675451/20047)。它还谈到 Liskov 可替代性在这种情况下是“谎言”，我倾向于同意这一点。

# java - 无法在 Windows 机器中通过 VFS 下载文件？

> ID：11645687
> 
> 赞同：1
> 
> 时间：2012-07-25T08:32:48.973
> 
> 标签：java, vfs, apache-commons-vfs

我正在使用以下内容从 FTP 服务器下载文件

StandardFileSystemManager -> resolveFile 和 copyFrom(fileobject, Selectors.SELECT_SELF)

本地文件夹是自动创建的，文件已成功下载到 LINUX 机器上。

当我在 windows 机器上执行相同的操作时，我得到了以下异常，因为它是一个相对路径，并且没有提供基本 URI

org.apache.commons.vfs.FileSystemException：找不到具有 URI“/mnt/shared/\test\sample\files\monday\34.csv”的文件，因为它是相对路径，并且没有提供基本 URI。

你能告诉我你的想法和建议吗？

谢谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-06T00:15:26.907

请同时使用正斜杠指定您的 Windows 路径。resolveFile() 期望 URI 不是本地文件。`fo = manager.toFileObject(new File("test\\bla.txt"))`如果您坚持使用 Windows 本机（在这种情况下是相对）路径，则可以使用而不是 resolveFile。

# wpf - 图像不显示在按钮上

> ID：11645689
> 
> 赞同：0
> 
> 时间：2012-07-25T08:32:54.553
> 
> 标签：wpf, image, xaml, button, fluent

我使用 Fluent 功能区 (fluent.codeplex.com)。我想并排排列四个按钮。我使用以下代码：

```
<Fluent:RibbonGroupBox Header="Some Header">
    <Fluent:RibbonToolBar>
        <Fluent:RibbonToolBar.LayoutDefinitions>
            <Fluent:RibbonToolBarLayoutDefinition Size="Small">
                <Fluent:RibbonToolBarRow>
                    <Fluent:RibbonToolBarControlGroupDefinition>
                        <Fluent:RibbonToolBarControlDefinition Target="buttonFirst" />
                        <Fluent:RibbonToolBarControlDefinition Target="buttonPrevious" />
                        <Fluent:RibbonToolBarControlDefinition Target="buttonNext" />
                        <Fluent:RibbonToolBarControlDefinition Target="buttonLast" />
                    </Fluent:RibbonToolBarControlGroupDefinition>
                </Fluent:RibbonToolBarRow>
            </Fluent:RibbonToolBarLayoutDefinition>
        </Fluent:RibbonToolBar.LayoutDefinitions>
        <Fluent:Button Size="Small" Icon="/WpfApplication1;component/Resources/First_16.png" x:Name="buttonFirst" />
        <Fluent:Button Size="Small" Icon="/WpfApplication1;component/Resources/Previous_16.png" x:Name="buttonPrevious" />
        <Fluent:Button Size="Small" Icon="/WpfApplication1;component/Resources/Next_16.png" x:Name="buttonNext" />
        <Fluent:Button Size="Small" Icon="/WpfApplication1;component/Resources/Last_16.png" x:Name="buttonLast" />
    </Fluent:RibbonToolBar>
</Fluent:RibbonGroupBox> 
```

按钮正确对齐，但按钮没有图像。问题出在哪里？ ![在此处输入图像描述](../Images/89c631c9df3c5852bc3cbdad5ef3276a.png) （图像文件可用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T19:27:59.157

有时您需要更改“复制到输出目录”设置。我通常使用“始终”。或者如果您有很多并且不希望重建不断擦除和重新复制，则使用 IfNewer。

# mysql - Wordpress sql：获取帖子的所有类别

> ID：11645691
> 
> 赞同：2
> 
> 时间：2012-07-25T08:33:01.453
> 
> 标签：mysql, sql, wordpress

我有一个帖子，它有多个类别，我如何通过 sql 查询获取该帖子的所有类别？非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-23T21:29:18.457

您可以使用以下 SQL 获取帖子类别：

```
SELECT wt.* FROM wp_posts p
 INNER JOIN wp_term_relationships r ON r.object_id=p.ID
 INNER JOIN wp_term_taxonomy t ON t.term_taxonomy_id = r.term_taxonomy_id
 INNER JOIN wp_terms wt on wt.term_id = t.term_id
WHERE p.ID=1 AND t.taxonomy="category" 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-25T08:37:00.777

检查此代码 -

```
$post_categories = wp_get_post_categories( $post_id );
$cats = array();

foreach($post_categories as $c){
    $cat = get_category( $c );
    $cats[] = array( 'name' => $cat->name, 'slug' => $cat->slug );
} 
```

参考：[http](http://codex.wordpress.org/Function_Reference/wp_get_post_categories) ://codex.wordpress.org/Function_Reference/wp_get_post_categories --

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-25T08:40:18.817

尝试

```
select c.*
from wp_categories c
inner join wp_post2cat pc on pc.category_id = c.cat_ID
inner join wp_posts p on pc.post_id = p.id
where p.id = 1 
```

# asp.net-mvc - 在控制器中实现依赖注入以创建松散耦合系统

> ID：11645692
> 
> 赞同：1
> 
> 时间：2012-07-25T08:33:03.307
> 
> 标签：asp.net-mvc, asp.net-mvc-3, dependency-injection, unity-container

我有一个 HomeController 和一个类型类的引用。如果我创建一个新的类对象，它对我来说很好。但我不想在控制器中创建新对象，而是想通过 HomwController 的构造函数传递类的引用。这是我的代码。我需要在这里实现 DI。

```
//private readonly UnitOfWork<Student> _unitOfWork = new UnitOfWork<Student>();
    private readonly UnitOfWork<Student> _unitOfWork;

    //TODO ??
    public HomeController(UnitOfWork<Student> unitOfWork)
    {
        _unitOfWork = unitOfWork;
    }

    public ActionResult Index()
    {

        return View(_unitOfWork.GenericRepository.GetAll());
    } 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:56:12.800

首先，如果你想使用依赖注入，你必须通过第三方依赖注入容器——例如 NInject 或 Unity 等等（或者如果你正在寻找一些挑战，也可以构建自己的）。

其次，您的 HomeController 应该将工作类型的抽象单元（接口或抽象类）作为参数。您实际上在 HomeController 构造函数中使用了具体类型，这不是在依赖注入世界中的工作方式（当使用“构造函数注入”时，您的依赖容器负责根据容器配置为抽象提供具体实现）。

第三，你`UnitOfWork<Student>`的意义不大。A`Repository<Student>`会有些道理，但工作单元不是在单一“类型”上工作，而是在不同数据集的“集合”上工作（一个工作单元可能在一个存储库集合上工作）。这里有意义的是`IUnitOfWork unitOfWork`在您的 HomeController 构造函数中指定一个参数，并配置您的依赖容器以传入一个具体`UnitOfWork`对象，您可以`Repository<Student>`在您的操作方法中对它进行 do 操作（以及可能在从 UnitOfWork 访问的其他存储库上）对象），然后通过调用`UnitOfWork`对象上的关联方法来提交所有修改。

如果您正在处理 UnitOfWork 和 Repository 模式（并且如果数据由数据库支持），您应该围绕 NInject 与 ASP.NET MVC3 一起使用进行一些搜索，并查看 EntityFramework。

**编辑**

回应您处理`(IUnitOfWork<Student>`和`IUnitOfWork<Course>`) 的评论。

正如我之前所说，这没有多大意义：

UnitOfWork 可以粗略地视为存储库的“容器”，可以访问这些存储库并在这些存储库上协调操作（如提交所有更改）。您应该拥有一个抽象的非泛型类型`IUnitOfWork`，提供对诸如`IRepository<Student>`or之类的泛型存储库的访问`IRepository<Course>`，并且还包含一个 Commit 方法，该方法将提交到 DB（或文件、内存或任何 unitofwork/repository 实现的目标是持久化数据）。

这样，您无需在控制器构造函数中注入`IRepository<Student>`和/或`IRepository<Course>`（或者如果您的控制器需要在 10 个不同的存储库上工作，那么，传递 10 个参数：S），您只需接受抽象类型 IUnitOfWork 的单个参数（具体实例是由 DI 容器注入），然后任何操作方法都可以通过从 UnitOfWork 获取它们来处理任何存储库集，并且一旦完成所有更改，它就可以在 unitOfWork 上调用 Commit 来处理所有已在存储库中进行的修改。

这就是理论和总体思路。

现在更具体地说是关于 ASP.NET MVC 中的 DI，“管道”DI 容器的更常见方法（还有其他方法）是创建一个继承自`IDependencyResolver`使用 DI 容器来解析类型的类，并在`Application_Start`调用中`DependencyResolver.SetResolver`调用这个类的实例。这样，当 ASP.NET MVC 被要求创建一个控制器（最终用户请求）时，它会通过这个依赖解析器来请求一个控制器的实例，这个依赖解析器会转向 DI 容器来创建一个实例通过照顾所有需要的注射来控制控制器。您应该查看特定 DI 容器的网站/论坛，因为它们都显示了使用 ASP.NET MVC 检测它的方法。

这只是一个非常高的概述，有很多棘手的细节，但这是粗略的想法。

**编辑2**

刚刚在我的博客上发布了一篇文章（我的第一篇），解释了如何在 ASP.NET MVC 项目中正确使用 Repository 和 UnitOfWork 模式。

[http://codefizzle.wordpress.com/2012/07/26/correct-use-of-repository-and-unit-of-work-patterns-in-asp-net-mvc/](http://codefizzle.wordpress.com/2012/07/26/correct-use-of-repository-and-unit-of-work-patterns-in-asp-net-mvc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:39:02.947

你说的是 ASP.NET MVC 吗？

我已经与 Ninject 合作了一段时间，对此我感到非常满意！查看此存储库中的示例应用程序，了解如何在 ASP.NET MVC 3 中使用它：

[https://github.com/ninject/ninject.web.mvc/tree/master/mvc3](https://github.com/ninject/ninject.web.mvc/tree/master/mvc3)

为了扩展回复，这是我设置 Ninject 绑定的代码片段

```
kernel.Bind(typeof(IUnitOfWork<>).To(typeof(UnitOfWork<>)); 
```

我的控制器：

```
public class MyController : Controller {
    private readonly IUnitOfWork<Student> uowStudent;
    public MyController(IUnitOfWork<Student> uowStudent) {
        this.uowStudent = uowStudent;
    }
} 
```

然后，您需要做的就是确保 UnitOfWork 类的构造函数中的所有参数也绑定在内核中。

# perl - Perl 的 Chomp：Chomp 正在删除整个单词而不是换行符

> ID：11645696
> 
> 赞同：4
> 
> 时间：2012-07-25T08:33:18.350
> 
> 标签：perl

我正面临 perl chomp 函数的问题。我有一个**test.csv**如下：

```
col1,col2
vm1,fd1
vm2,fd2
vm3,fd3
vm4,fd4 
```

我想打印这个 csv 的第二个字段。这是我的代码：

```
#!/usr/bin/perl -w
use strict;

my $file = "test.csv";
open (my $FH, '<', $file);
my @array = (<$FH>);
close $FH;

foreach (@array)
{
    my @row = split (/,/,$_);
    my $var = chomp ($row[1]);     ###   <<< this is the problem
    print $var;
} 
```

aboe 代码的输出是：

```
11111 
```

我真的不知道“1”是从哪里来的。实际上，最后一个文件可以打印如下：

```
foreach (@array)
{
    my @row = split (/,/,$_);
    print $row[1];     ###  << Note that I am not printing "\n"
} 
```

输出是：

```
vm_cluster
fd1
fd2
fd3
fd4 
```

现在，我使用这些字段值作为 DB 的输入，并且 DB INSERT 语句由于这个不可见的换行符而失败。所以我认为 chomp 会在这里帮助我。而不是咀嚼，它给了我“11111”。

你能帮我理解我在这里做错了什么吗？

谢谢。

阅读 loldop 的回复后添加更多信息：

如果我写如下，那么它不会打印任何东西（甚至不是上面提到的“11111”输出）

```
foreach (@array)
{
    my @row = split (/,/,$_);
    chomp ($row[1]); 
    my $var = $row[1]; 
    print $var;
} 
```

意思是， chomp 正在删除最后一个字符串和尾随的新行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T09:29:39.060

您只看到一串`1`s 的原因是您正在打印的值`$val`是从`chomp`. `chomp`不返回修剪后的字符串，它就地修改其参数并返回从末尾删除的字符数。由于它总是只删除一个`"\n"`字符，因此您会`1`为数组的每个元素获得一个输出。

你真的应该`use warnings`代替`-w`命令行选项，这里没有理由将整个文件读入数组。但是在使用具有三参数形式的词法文件句柄时做得很好`open`。

这是您的程序的快速重构，它将执行您想要的操作。

```
#!/usr/bin/perl
use strict;
use warnings;

my $file = 'test.csv';
open my $FH, '<', $file or die qq(Unable to open "$file": $!);

while (<$FH>) {
    chomp;
    my @row = split /,/;
    print $row[1], "\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:41:30.737

虽然，一开始是我的错。
`chomp`function `return 1`<- 使用这个函数的结果。
另外，您可以在下面找到这个不好的示例。但它会起作用，如果你使用数字。有时我使用这个作弊（不要那样做！这是我的坏黑客代码！）
`map{/filter/ && $_;}@all_to_filter;`
而不是这个，使用
`grep{/filter/}@all_to_filter;`

```
foreach (@array)
{
    my @row = split (/,/,$_);
    my $var = chomp ($row[1]) * $row[1];     ###   this is bad code!
    print $var;
}

foreach (@array)
{
    my @row = split (/,/,$_);
    chomp ($row[1]);
    my $var = $row[1];  
    print $var;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T08:44:32.337

如果您只是想摆脱新行，可以使用正则表达式：

```
my $var = $row[1];
$var=~s/\n//g; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T17:09:15.877

所以，我对这个看似简单的任务整天困扰着我感到非常沮丧。我真的很感谢所有回复的人。

最后，我最终使用 Text::CSV perl 模块，然后将每个 CSV 字段调用为数组引用。使用 Text::CSV 后无需再运行 chomp。

这是代码：

```
#!/usr/bin/perl 
use warnings;
use strict;
use Text::CSV;

 my $csv = Text::CSV->new ( { binary => 1 } )  # should set binary attribute.
                  or die "Cannot use CSV: ".Text::CSV->error_diag ();

open my $fh, "<:encoding(utf8)", "vm.csv" or die "vm.csv: $!";

<$fh>;  ## this is to remove the column headers.

while ( my $row = $csv->getline ($fh) )
{
    print $row->[1];
} 
```

这是hte输出：

```
fd1fd2fd3fd4 
```

后来我被拉出这些单独的值并插入到数据库中。

谢谢大家。

# php - 如何在 mysql 中使用存储在 unix_timestamp 中的日期进行提醒

> ID：11645706
> 
> 赞同：0
> 
> 时间：2012-07-25T08:34:00.063
> 
> 标签：php, mysql

请我提醒您开始为 7 天或更短时间内开始的活动发送邮件。即仅在 0 到 7 天后向参加者发送邮件。

我需要帮助的地方在这条线上：

```
...WHERE event_start_date > '$current_time' //currently sends to all attendees for all events starting in future

$current_time = time(); 
```

我怎样才能改变它以反映我的需要？请注意日期存储在 unix_timestamp 中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:01:20.660

您也可以只在 MySQL 中执行此操作，而无需先确定 PHP 中的时间。我不认为它更快，但它更具可读性。：

```
...WHERE FROM_UNIXTIME(event_start_date) <= DATE_ADD(CURDATE(), INTERVAL 1 WEEK) 
```

但是，这也会返回从今天之前开始的事件。如果你不想这样，你可以使用：

```
...WHERE FROM_UNIXTIME(event_start_date) BETWEEN CURDATE() AND DATE_ADD(CURDATE(), INTERVAL 1 WEEK) 
```

（改编自[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html "MySQL 文档")）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:36:44.290

获取当前的 unix 时间戳。

```
$current_time = time(); 
```

由于它以秒为单位存储，因此您可以通过添加 60 秒 * 60 分钟 * 24 小时 * 7 天来获得一周内的 unix 时间戳。

```
$weekFromNow=$current_time+(60*60*24*7); 
```

现在只需找到`event_start_date`小于或等于它的事件。

```
...WHERE event_start_date <= '$weekFromNow' 
         and event_start_date > '$current_time'
//sends to all attendees for all events starting in future 
```

编辑：就像`$weekFromNow`未来一周一样，查询需要找到小于或等于该值的所有时间，这就是查询所做的。如果您`event_start_date`持有除事件开始时间的 unix 时间戳之外的其他值，请告诉我。

# jquery - 将画布和图像添加到动态创建的 li 元素

> ID：11645712
> 
> 赞同：0
> 
> 时间：2012-07-25T08:34:21.137
> 
> 标签：jquery, image, html, canvas

我用 jquery 动态创建 li 元素。这是我的代码

```
for ( i = 0; i < 100; i++) {
    $("#sortable").append("<li style='width:"+Size+"px;height:"+Size+"px;' class='ui-state-default' id="+"Image" + i + ">" + "IMAGE" + i + "</li>");
} 
```

现在我想在每个 li 元素内添加带有画布的图像，并使用画布再次编写一些文本。可能吗？

这是我到目前为止编写的代码，但它只将图像添加到最后一个 li 元素

```
for ( i = 0; i < 100; i++) {
    var canvas1 = document.getElementById('canvas'+i).getContext("2d");
    var img = new Image();
    img.src = "/img/test.png";
    img.onload = function() {
      canvas1.drawImage(img, 0, 0,Size,Size);
     };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:42:13.693

闭包应该可以解决问题：

```
for ( i = 0; i < 100; i++) {
    (function(i){   //added line
        var canvas1 = document.getElementById('canvas'+i).getContext("2d");
        var img = new Image();
        img.src = "/img/test.png";
        img.onload = function() {
            canvas1.drawImage(img, 0, 0,Size,Size);
        };
    })(i);   //added line
} 
```

事情是当`.onload`事件被触发时，`for`循环已经结束，并且`img`只会引用最后一个`Image`对象。一般来说，如果变量用 定义`var`，它们具有函数作用域（用`let`，`const`它们是块作用域），并且通过使用立即调用函数执行（IIFE），变量变成某种块作用域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:03:02.373

您可以尝试以下两种解决方案中的一些：

*   结合相对（li），绝对（跨度）和静态（img）位置 - [jsfiddle](http://jsfiddle.net/lalatino/gtauB/)

```
var i, Size = 240;
for (i = 0; i < 10; i++) {
    $("#sortable").append('<li style="position:relative; color:white"> <span style="position:absolute; top:20px; left:20px;">text '+i+'</span> <img src="/img/test.png" style="width:'+Size+'px;height:'+Size+'px; border:1px solid black" id="img'+i+'"/> </li>');
} 
```

*   或在画布上绘制图像 - [jsfiddle](http://jsfiddle.net/lalatino/dsz5v/)

```
var i, Size = 240;
for (i = 0; i < 10; i++) {
    $("#sortable").append('<li> Canvas'+i+'<br/><canvas style="width:'+Size+'px;height:'+Size+'px; border:1px solid black" id="canvas'+i+'"/></li>');
}

var img = new Image();
img.src = "/img/test.png";
img.onload = draw_image;

function draw_image() {
    $('canvas').each(function(i){
        var context = this.getContext("2d");
        context.drawImage(img, 0, 0,Size,Size);
        context.font = "40pt Calibri";
        context.fillStyle = "green";
        context.fillText("text "+i, 30, 40);
    });
} 
```

[第一个解决方案在这里](http://www.barelyfitz.com/screencast/html-training/css/positioning/)得到了很好的解释，第二个是基于[这个 html5 画布教程](http://www.html5canvastutorials.com/tutorials/html5-canvas-images/)。

# python - 如何在 PyGTK 中使用从 XML 文件中提取的非 ASCII 字符？

> ID：11645716
> 
> 赞同：0
> 
> 时间：2012-07-25T08:34:30.323
> 
> 标签：python, xml, unicode, gtk, pygtk

我正在使用 Python-GTK，我想在 GTK 条目中使用 permille 字符——看起来像 ‰ o/oo。GTK 使用 Unicode，或更准确地说是 UTF-8。

我实际上做的是以这种方式从 XML 中读取字符串：

```
self.xdb = ElementTree.parse("myfile.xml")
xmap = self.xdb.getiterator(tag="map") 
for x in xmap:
    unit = x.get("unit","") 
```

XML 文件是这样写的：

```
<map idx='398' unit='\u2030' /> 
```

然后我以这种方式将字符串（在本例中为 '\u2030'）转换为 Unicode：

```
 unistring = ""
    for s in unit:
         unistring += unichr(ord(s)) 
```

然后我用转换后的字符串设置 gtk-entry 的文本：

```
entry.set_text(unistring) 
```

但条目中的文本显示 '\u2030' 而不是预期的字符。

有谁知道如何处理这个？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T22:05:08.277

```
<map idx='398' unit='\u2030' /> 
```

`\u`转义用于 Python 字符串文字，而不是 XML。XML 文件应使用原始字符本身：

```
<map idx='398' unit='‰' /> 
```

如果您真的不能在编辑器中支持直接的非 ASCII 字符或生成文件的任何其他内容，则可以使用字符引用：

```
<map idx='398' unit='&#x2030;' /> 
```

# python - 拆分一个庞大的 WSDL 文件

> ID：11645723
> 
> 赞同：2
> 
> 时间：2012-07-25T08:34:57.797
> 
> 标签：python, web-services, wsdl, suds, netsuite

我正在使用 Python 与 Netsuite Web 服务层进行交互。使用 suds 解析 WSDL 大约需要两分钟。我能够使用 redis 编写一个缓存层，一旦客户端被解析，它就解决了一些加载问题，但第一次仍然需要大量时间。

```
>>> # Takes several minutes to load
>>> client = suds.Client(huge_four_mb_wsdl_file) 
```

由于我只使用一小部分服务，有没有办法只从 WSDL 中提取这些服务并将它们放入我自己的较小的 WSDL 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T15:37:43.117

如果您查看[wsdl 源代码的 v2013_2 版本，](https://webservices.na1.netsuite.com/wsdl/v2013_2_0/netsuite.wsdl)您会发现它实际上导入了 38 个其他 xsd 文件。

您可以通过以下方式加快您的流程：

*   创建一个仅导入一些 xsd 文件的本地 wsdl。（节省下载/解析时间）
*   [使用pickle](http://docs.python.org/2/library/pickle.html)序列化现成的客户端并在启动时加载它（节省解析时间）

还要确保在应用程序生命周期中只需要创建一次客户端。

# sql-server-2005 - 无法从链接服务器中删除记录

> ID：11645724
> 
> 赞同：0
> 
> 时间：2012-07-25T08:35:03.207
> 
> 标签：sql-server-2005, linked-server, openrowset, sqlncli

在过去的两天里，我一直在到处寻找解决问题的方法，但没有任何运气。

我有这个从远程服务器删除记录的查询：

```
delete from OPENROWSET('SQLNCLI', 'Server=AB01S\SQLEXPRESS;Database=ShopData;Trusted_Connection=yes', 'Select receipt_n,action_in, action_ty, action_field_name,action_field_type,action_field_data, terminal from tblData where receipt_n= 1 and terminal = 1'); 
```

我收到了这个错误：

```
OLE DB provider "SQLNCLI" for linked server "(null)" returned message "Multiple-step OLE DB operation generated errors. Check each OLE DB status value, if available. No work was done.".
Msg 7202, Level 11, State 1 
```

它还建议使用`sp_addlinkedserver`添加链接服务器。

一些注意事项：

1.  这只发生在这台特定的计算机 + 远程服务器上。在 2 个不同的站点（计算机+服务器）上它工作得很好。
2.  插入到 OpenRowSet 工作正常。
3.  从 OpenRowSet 中选择 * 工作正常。=> 将删除更改为选择 * 工作正常。
4.  在查询的计算机上启用了 Ad hok
5.  通过 openrowset 查询的计算机上启用了远程连接
6.  我可以 ping 服务器 (AB01S)

到目前为止，我已经尝试通过 GUI 和`sp_addlinkserver`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:22:58.430

我发现问题了！！

服务器名称（出于某种原因）不正确。 `@@servername`返回 AB01S_88

解决方案是：运行以下代码，然后重新启动服务：

```
exec sp_dropserver @@servername
exec sp_addserver 'AB01S', local
exec sp_serveroption 'AB01S', 'data access' , 'true' 
```

# ios - 如何理解和解决崩溃报告：SIGSEGV、SEGV_ACCERR

> ID：11645728
> 
> 赞同：14
> 
> 时间：2012-07-25T08:35:17.453
> 
> 标签：ios, crash-reports, segmentation-fault

我有时会收到此崩溃报告：

```
Name: SIGSEGV
Reason: SEGV_ACCERR
Stack Trace:

0 MyApp 0x00070456 0x1000 + 455766
1 MyApp 0x0007a34d 0x1000 + 496461
2 MyApp 0x0007a4f1 0x1000 + 496881
3 MyApp 0x000d31dd 0x1000 + 860637
4 MyApp 0x00067f0f 0x1000 + 421647
5 MyApp 0x0005ad69 0x1000 + 367977
6 MyApp 0x000081e3 0x1000 + 29155
7 MyApp 0x00008ae9 0x1000 + 31465
8 CoreFoundation 0x35a547e4 __invoking___ + 68
9 CoreFoundation 0x359af7b1 -[NSInvocation invoke] + 160
10 Foundation 0x3556268f -[NSInvocationOperation main] + 114
11 Foundation 0x354fb393 -[__NSOperationInternal start] + 862
12 Foundation 0x35564793 __block_global_6 + 102
13 libdispatch.dylib 0x348dec59 _dispatch_call_block_and_release + 12
14 libdispatch.dylib 0x348e1817 _dispatch_worker_thread2 + 258
15 libsystem_c.dylib 0x32e0edfb _pthread_wqthread + 294 
```

我不明白这个崩溃报告。我也不知道这是什么时候发生的。

有没有办法了解有关此崩溃的更多信息？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T09:49:34.627

您需要符号化崩溃报告，它将第 0 到第 7 行中的地址转换为有意义的类、方法和行号。通常，如果您仍然拥有导致崩溃的构建二进制文件，Xcode 会自动执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-13T15:06:34.343

问题很旧，但有比约翰史密斯回答更好的方法。

目前最好的方法是使用分析器（在 XCode：产品/配置文件中）使用相应的模板运行。
很可能您需要使用设备现在也支持的“僵尸”模板：）不仅在模拟器上。使用此工具时，您有更大的机会发现内存的不正确使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:43:23.350

SIGSEV 错误是当您尝试获取不允许触摸的内存时发送的信号

解决此问题的最佳方法是在每行放置一个断点和跳转行，以便找到问题所在的行

或者你也可以放一些Debug Logs来看看是不是问题

要了解 SIGSEV 或 SEGV_ACCERR 的含义，您可以在互联网上搜索更多信息；）

# android - 在 sqlite 数据表中插入值时出现空指针异常 - Android

> ID：11645731
> 
> 赞同：0
> 
> 时间：2012-07-25T08:35:25.740
> 
> 标签：android, sqlite

我一直在尝试开发一个应用程序，在其中我在数据库中添加项目的数组列表并将它们显示在列表视图中，但是在尝试插入数据库时​​出现空指针异常。这是日志

```
 07-25 13:41:22.826: E/DB ERROR(306): java.lang.NullPointerException
07-25 13:41:22.826: W/System.err(306): java.lang.NullPointerException
07-25 13:41:22.936: W/System.err(306):  at com.demo.itemscanner.ItemScannerDatabaseManager.addRow(ItemScannerDatabaseManager.java:91)
07-25 13:41:22.936: W/System.err(306):  at com.demo.itemscanner.ItemScannerDatabaseManager$CustomSQLiteOpenHelper.onCreate(ItemScannerDatabaseManager.java:64)
07-25 13:41:22.936: W/System.err(306):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:106)
07-25 13:41:22.936: W/System.err(306):  at com.demo.itemscanner.ItemScannerDatabaseManager.<init>(ItemScannerDatabaseManager.java:38)
07-25 13:41:22.936: W/System.err(306):  at com.demo.itemscanner.ItemScannerActivity.onCreate(ItemScannerActivity.java:33)
07-25 13:41:22.936: W/System.err(306):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-25 13:41:22.936: W/System.err(306):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-25 13:41:22.936: W/System.err(306):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-25 13:41:22.946: W/System.err(306):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-25 13:41:22.946: W/System.err(306):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-25 13:41:22.946: W/System.err(306):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-25 13:41:22.946: W/System.err(306):  at android.os.Looper.loop(Looper.java:123)
07-25 13:41:22.946: W/System.err(306):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-25 13:41:22.946: W/System.err(306):  at java.lang.reflect.Method.invokeNative(Native Method)
07-25 13:41:22.946: W/System.err(306):  at java.lang.reflect.Method.invoke(Method.java:521)
07-25 13:41:22.946: W/System.err(306):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-25 13:41:22.946: W/System.err(306):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-25 13:41:22.946: W/System.err(306):  at dalvik.system.NativeStart.main(Native Method) 
```

以下是与之相关的代码：

ItemScannerDatabaseManager.java

```
package com.demo.itemscanner;

import java.util.ArrayList;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class ItemScannerDatabaseManager {

    // the Activity or Application that is creating an object from this class.
    Context context;

    // a reference to the database used by this application/object
    private SQLiteDatabase db;

    // These constants are specific to the database. They should be
    // changed to suit your needs.
    private final String DB_NAME = "item_scanner";
    private final int DB_VERSION = 1;
    // These constants are specific to the database table. They should be
    // changed to suit your needs.
    private final String TABLE_NAME = "item_table";
    private final String ITEM_ID = "id";
    private final String ITEM_NAME = "item_name";
    private final String ITEM_PRICE = "item_price";
    private final String CURRENT_STOCK = "current_stock";
    private final String IMAGE = "image";

    public ItemScannerDatabaseManager(Context context) {
        this.context = context;
        // create or open the database
        CustomSQLiteOpenHelper helper = new CustomSQLiteOpenHelper(context);
        this.db = helper.getWritableDatabase();
    }

    private class CustomSQLiteOpenHelper extends SQLiteOpenHelper {

        public CustomSQLiteOpenHelper(Context context) {
            super(context, DB_NAME, null, DB_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // This string is used to create the database. It should
            // be changed to suit your needs.

            String newTableQueryString = " create table " + TABLE_NAME
                    + "(" 
                    + ITEM_ID + " integer primary key autoincrement, " 
                    + ITEM_NAME + " text not null, " 
                    + ITEM_PRICE + " integer," 
                    + CURRENT_STOCK + " integer," 
                    + IMAGE + " text "
                    + ");";
            // execute the query string to the database.
            db.execSQL(newTableQueryString);
            addRow();

        }

         @Override
            public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
                db.execSQL("DROP TABLE IF EXISTS "+TABLE_NAME);
                onCreate(db);
            }
    }

    /**********************************************************************
     * ADDING A ROW TO THE DATABASE TABLE
     * 
     * the key is automatically assigned by the database
     * @param name the value for the item name and so on..
     */
    public void addRow()
    {
        try{// this is a key value pair holder used by android's SQLite functions
        ContentValues values = new ContentValues();
        values.put(ITEM_NAME, "Ivory Silk Clutch");
        values.put(ITEM_PRICE, "999");
        values.put(CURRENT_STOCK, "50");
        values.put(IMAGE, R.drawable.ivory_silk);
        db.insert(TABLE_NAME, null, values);

        values.put(ITEM_NAME, "Gold Clutch");
        values.put(ITEM_PRICE, "799");
        values.put(CURRENT_STOCK, "10");
        values.put(IMAGE, R.drawable.gold);
        db.insert(TABLE_NAME, null, values);

        values.put(ITEM_NAME, "Bridal Clutch");
        values.put(ITEM_PRICE, "899");
        values.put(CURRENT_STOCK, "20");
        values.put(IMAGE, R.drawable.bridal);
        db.insert(TABLE_NAME, null, values);

        values.put(ITEM_NAME, "Black Clutch");
        values.put(ITEM_PRICE, "799");
        values.put(CURRENT_STOCK, "20");
        values.put(IMAGE, R.drawable.black);
        db.insert(TABLE_NAME, null, values);

        values.put(ITEM_NAME, "evening Clutch");
        values.put(ITEM_PRICE, "999");
        values.put(CURRENT_STOCK, "20");
        values.put(IMAGE, R.drawable.evening_clutch);
        db.insert(TABLE_NAME, null, values);

        values.put(ITEM_NAME, "grey Clutch");
        values.put(ITEM_PRICE, "699");
        values.put(CURRENT_STOCK, "20");
        values.put(IMAGE, R.drawable.grey);
        db.insert(TABLE_NAME, null, values);

        values.put(ITEM_NAME, "cream Clutch");
        values.put(ITEM_PRICE, "999");
        values.put(CURRENT_STOCK, "15");
        values.put(IMAGE, R.drawable.cream);
        db.insert(TABLE_NAME, null, values);

        values.put(ITEM_NAME, "White Tubular Clutch");
        values.put(ITEM_PRICE, "999");
        values.put(CURRENT_STOCK, "25");
        values.put(IMAGE, R.drawable.white_tubular_clutch);
        db.insert(TABLE_NAME, null, values);

        values.put(ITEM_NAME, "Party Clutch");
        values.put(ITEM_PRICE, "999");
        values.put(CURRENT_STOCK, "20");
        values.put(IMAGE, R.drawable.party);
        db.insert(TABLE_NAME, null, values);
        }

        catch(Exception e)
        {
            Log.e("DB ERROR", e.toString());
            e.printStackTrace();
        }
    }

    /**********************************************************************
     * RETRIEVING ALL ROWS FROM THE DATABASE TABLE
     * the key is automatically assigned by the database
     */

    public ArrayList<Item> getAllItemsAsArrays()
    {
        // create an ArrayList that will hold all of the data collected from
        // the database.
        ArrayList<Item> dataArrays = new ArrayList<Item>();
        Item item = new Item();
        // this is a database call that creates a "cursor" object.
        // the cursor object store the information collected from the
        // database and is used to iterate through the data.
        Cursor cursor;

        try
        {
            // ask the database object to create the cursor.
            cursor = db.query(
                    TABLE_NAME,
                    new String[] { ITEM_ID, ITEM_NAME, ITEM_PRICE, CURRENT_STOCK,IMAGE},
                    null, null, null, null, null
            );

            // move the cursor's pointer to position zero.
            cursor.moveToFirst();

            // if there is data after the current cursor position, add it
            // to the ArrayList.
            if (!cursor.isAfterLast())
            {
                do
                {

                    item.setId(cursor.getLong(0));
                    item.setTitle(cursor.getString(1));
                    item.setPrice(cursor.getLong(2));
                    item.setCurrentStock(cursor.getLong(3));
                    item.setProductImage(Integer.parseInt(cursor.getString(4)));

                    dataArrays.add(item);
                }
                // move the cursor's pointer up one position.
                while (cursor.moveToNext());
            }

            cursor.close();
        }
        catch (SQLException e)
        {
            Log.e("DB Error", e.toString());
            e.printStackTrace();
        }

        // return the ArrayList that holds the data collected from
        // the database.
        return dataArrays;
    }
} 
```

ItemScannerActivity.java

```
package com.demo.itemscanner;

import java.util.ArrayList;

import android.app.Activity;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class ItemScannerActivity extends Activity {

    ItemScannerDatabaseManager db;
    TableLayout dataTable;
    //ArrayList<Item> itemList = new ArrayList<Item>();
    private ArrayAdapter<Item> listAdapter ; 
    @Override
    public void onCreate(Bundle savedInstanceState) {
        try {
            // Android specific calls
            super.onCreate(savedInstanceState);
            setContentView(R.layout.dataview);
            ListView list = (ListView)findViewById(R.id.ListViewCatalog);

            // create the database manager object
            db = new ItemScannerDatabaseManager(this);
            for(int i=0; i<db.getAllItemsAsArrays().size();i++){
            listAdapter.add(db.getAllItemsAsArrays().get(i));
            }
            list.setAdapter(listAdapter);
        } catch (Exception e) {
            Log.e("ERROR", e.toString());
            e.printStackTrace();
        }
    }

    @Override
    public void onResume() {
        super.onResume();
    }

    @Override
    public void onPause() {
        super.onPause();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }
} 
```

项目.java

```
package com.demo.itemscanner;

public class Item {
    private long id;
    private String title;
     private int productImage;
     private double price;
     private boolean selected;
     private double currentStock;

     public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public int getProductImage() {
        return productImage;
    }

    public void setProductImage(int productImage) {
        this.productImage = productImage;
    }

    public double getPrice() {
        return price;
    }

    public void setPrice(double price) {
        this.price = price;
    }

    public boolean isSelected() {
        return selected;
    }

    public void setSelected(boolean selected) {
        this.selected = selected;
    }

    public double getCurrentStock() {
        return currentStock;
    }

    public void setCurrentStock(double currentStock) {
        this.currentStock = currentStock;
    }

     /*public Item(String title, Drawable productImage, double currentStatus,
       double price) {
      this.title = title;
      this.productImage = productImage;
      this.currentStatus = currentStatus;
      this.price = price;
     }*/
} 
```

xml文件，dataview.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ffffff"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/TextView01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:text="Product Catalog"
        android:textColor="#000000"
        android:textSize="24sp" >
    </TextView>

    <ListView
        android:id="@+id/ListViewCatalog"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#ffffff"
        android:cacheColorHint="#ffffff"
        android:clickable="true" >
    </ListView>

</LinearLayout> 
```

看起来该表没有在数据库中创建，它在 db.insert(TABLE_NAME, null, values); 行中返回空指针异常；

请告诉我哪里出错了，任何帮助将不胜感激。- 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:03:55.697

被`NullPointerException`抛出是因为数据库`db`（您在`addRow`方法中使用的）`ItemScannerDatabaseManager`在`null`那个时刻。如果我是你，我会添加另一个`addRow`这样的方法：

```
public void addRow(SQLiteDatabase theDb) {
     // Setup the ContentValues object
     ContentValues values = new ContentValues();
     //.. add stuff to values
     // insert in to the database
     theDb.insert(TABLE_NAME, null, values);
} 
```

然后你**只能**在`onCreate`你`SQLiteOpenHelper`喜欢的方法中使用这个方法：

```
 // ...
   // execute the query string to the database.
   db.execSQL(newTableQueryString);
   addRow(db); // the only valid SQLiteDatabase  at your disposal is the one you get in the onCreate method
} 
```

# python - 列表理解未能过滤列表（可能的日期比较问题？）

> ID：11645732
> 
> 赞同：0
> 
> 时间：2012-07-25T08:35:26.773
> 
> 标签：python

我有一个字典列表。每个字典都包含一个时间戳字段。我试图只提取具有指定**日期时间戳的字典**

我正在使用这段代码来提取行，但它不匹配任何行：

```
def extract_rows_for_date(datarows, specified_date):
    date_match_pattern = '%Y-%m-%d %H:%M:%S'
    extracted_timestamps = [datetime.strptime(x['ts'], date_match_pattern)
                            for x in datarows
                            if datetime.strptime(x['ts'], date_match_pattern).date() == specified_date.date()]
    # ... more logic 
```

例如，如果“行”包含“2012-05-14 08:24:00”的时间戳，那么如果将“2012-05-14”的日期指定为日期，我希望它是模式匹配的匹配。但是，目前，它没有使用上面的列表理解和日期比较逻辑进行匹配。

上面的片段有什么问题？

# java - 从迭代器获取键值

> ID：11645733
> 
> 赞同：3
> 
> 时间：2012-07-25T08:35:27.393
> 
> 标签：java, hashmap

我有一个 HashMap，其中包含另一个 HashMap。我想遍历第一个 HashMap 并使用其中的 Key 值。然后，当我迭代第一个 HashMap 时，我想开始一个内部循环迭代第二个 HashMap，获取所有值。

到目前为止我遇到的问题是我无法弄清楚如何从迭代器中获取密钥。

```
HashMap<String, HashMap<Integer, String>> subitems = myHashMap.get("mainitem1");

Collection c = subitems.values();
Iterator itr = c.iterator();

while(itr.hasNext())
{
    // Get key somehow? itr.getKey() ???

    // contains the sub items
    HashMap productitem = (HashMap)itr.next();
} 
```

我得到的数据`subitems`是这样的：

```
{Item1{0=sub1, 1=sub2}, Item2{0=sub3, 1=sub4}} 
```

然后，在 while 循环`productitem`中包含“子项”。但我不知道从哪里可以得到键值“Item1”和“Item2”。

我怎样才能得到那些？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T08:36:55.333

您无法从`values().iterator()`.

你需要使用[`entrySet().iterator()`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#entrySet%28%29). 这将返回[`Map.Entry<K,V>`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html)您可以调用的对象[`getKey()`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html#getKey%28%29)和[`getValue()`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html#getValue%28%29)。

```
for (Map.Entry<Integer,Key> entry : subitems.keySet()) {
  Integer key = entry.getKey();
  String value = entry.getValue();

  // do stuff
} 
```

我还想补充一点，地图列表的深度嵌套通常表明您确实想要编写自定义类来保存您的数据。**尤其是**当映射具有要使用的预定义键并且列表中的值的解释取决于列表中的位置时！我将此代码气味称为[“对象拒绝”](https://stackoverflow.com/a/3725728/40342)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T08:36:24.807

您不能在地图中从值转到键。（可能有多个键映射到相同的值！）

您可以使用 迭代映射条目，也可以迭代键，并在每次迭代中通过 检索关联的值。`subitems.`[`entrySet()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#entrySet%28%29)`.iterator()``subitems.get(key)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T08:40:26.283

你可以做这样的事情（使用迭代器）：

```
Set<Entry<String, HashMap<Integer, String>>> c = subitems.entrySet();
Iterator<Entry<String, HashMap<Integer, String>>> iterator = c.iterator();

while(iterator.hasNext())
{
    Entry<String, HashMap<Integer, String>> entry = iterator.next();
    System.out.println("key:" + entry.getKey());
    HashMap<Integer, String> innerMap = entry.getValue();
    if (innerMap == null) {
        continue;
    }
    Iterator<Entry<Integer, String>> innerIterator = innerMap.entrySet().iterator();
    while (innerIterator.hasNext()) {
        Entry<Integer, String> innerEntry = innerIterator.next();
        System.out.println("key:" + innerEntry.getKey() + " value: " + innerEntry.getValue());
    }
} 
```

或者像这样使用 foreach 结构：

```
for (Entry<String, HashMap<Integer,String>> entry : subitems.entrySet())
{
    System.out.println("key:" + entry.getKey());
    HashMap<Integer, String> innerMap = entry.getValue();
    if (innerMap == null) {
        continue;
    }
    for (Entry<Integer, String> innerEntry : innerMap.entrySet())
        System.out.println("key:" + innerEntry.getKey() + " value: " + innerEntry.getValue());
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T08:40:28.750

java Collections 提供了`EntrySet`. 这是一个包含单个键和值作为其属性的对象列表。您可以从此列表中取出一个迭代器。

您可以按如下方式获取密钥。

```
Iterator i= subitems.entrySet().iterator();

while(i.hasNext()){

String key= i.next().getkey();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T08:37:37.037

`entrySet().iterator()`您可以使用第一个`HashMap`或获取键并迭代它们来迭代条目：而不是`subitems.values().iterator()`使用`subitems.keys().iterator()`并使用下一个键来获取内部哈希图。

# c++ - 可变长度字符串

> ID：11645737
> 
> 赞同：-3
> 
> 时间：2012-07-25T08:35:53.270
> 
> 标签：c++, visual-studio

我有一个数据包结构，它有一个用于字符串示例的变量 len：

```
BYTE StringLen;
String MyString; //String is not a real type, just trying to represent an string of unknown size 
```

我的问题是如何在不知道成员大小（在本例中为字符串）的情况下在结构内实现此数据包。这是我希望它“看起来像”的示例

```
void ProcessPacket (PacketStruct* packet)
{
     pointer = &packet.MyString;
} 
```

我认为这是不可能的，因为编译器直到运行时才知道字符串的大小。那么怎样才能让它看起来高级又通俗易懂呢？

我需要构造它以记录每个数据包的原因，而用户实际上必须查看任何分析数据包的函数。

所以我可以将问题恢复到：**有没有办法声明一个未定义大小成员的结构或类似结构的东西？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:39:58.713

您可以将字符串复制到高级 std::string 中（至少，如果我的猜测`String`是 typedef for`const char*`是正确的）：

```
void ProcessPacket( const PacketStruct& packet )
{
  std::string highLevelString( packet.MyString,
                               static_cast< size_t >( packet.StringLen ) );
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:42:56.663

我会推荐一个只解释数据包数据的 shell 类。

```
struct StringPacket {
    char *data_;
    StringPacket (char *data) : data_(data) {}
    unsigned char len () const { return *data_; }
    std::string str () const { return std::string(data_+1, len());
}; 
```

正如评论中提到的，您想要一种方法来处理可变大小的数据包，如`struct`. 旧的 C 方法是创建一个`struct`如下所示的：

```
struct StringPacketC {
    unsigned char len_;
    char str_[1]; /* Modern C allows char str_[]; but C++ doesn't */
}; 
```

然后，转换数据（记住，这是 C 代码）：

```
struct StringPacketC *strpack = (struct StringPacketC *)packet; 
```

但是，您正在输入未定义的行为，因为要访问 中的全部数据`strpack`，您必须读取超出中`1`定义的字节数组边界`struct`。但是，这是 C 语言中常用的技术。

但是，在 C++ 中，您不必求助于这种 hack，因为您可以定义访问器方法来适当地处理可变长度数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:12:41.310

根据您的帖子，一个简单的变体是：

```
struct PacketStruct {
   std::string MyString;
   size_t length () const { return MyString.length(); }
   const char* operator & () const { return MyString.c_str(); }
}; 
```

这可以（几乎）根据您的需要使用：

```
 void ProcessPacket (const PacketStruct& packet)
{
  const char * pointer = &packet;
  size_t length = packet.length();
  std::cout << pointer << '\t' << length << std::endl;
} 
```

应该像这样调用：

```
 int main()
{
 PacketStruct p;
 p.MyString ="Hello";
 ProcessPacket(p);
} 
```

# java - 使用 JPA 的用户生成查询

> ID：11645739
> 
> 赞同：1
> 
> 时间：2012-07-25T08:36:07.053
> 
> 标签：java, database, hibernate, jpa, eclipselink

我有以下情况，用户应该能够看到所有可用表的概览。然后用户可以选择他想要使用的表。在第二步中，用户应该从所有表中选择几列。如果用户选择了所有表格和列，则应显示收集的数据（例如在表格中）。

我的问题是，如果 JPA 可以做到这一点。我主要担心的是我不知道用户会选择哪些表和列，所以我需要一个非常通用的类结构。

例如：

`UserBuildDataQuery == has many ==> tables == has many ==> columns`

我考虑了将用户配置的数据查询存储在数据库中的可能性。根据存储的数据，将执行用户生成的查询，以便我可以呈现收集的数据。

我不确定 JPA 是否是解决该问题的完美选择。

也许你可以给我一些你自己的建议或经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:50:53.683

JPA 显然是关于类和字段，而不是表和列，并且是关于存储这些类的对象。然而，JDBC 是关于数据存储中的内容（即表/列）。它甚至提供了获取数据存储结构的方法。

# node.js - 在 node.js 中使用 express 进行本地化

> ID：11645740
> 
> 赞同：25
> 
> 时间：2012-07-25T08:36:13.683
> 
> 标签：node.js, localization

您使用哪个包在 node.js 中使用 express 进行本地化？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T12:10:39.543

[node-localize](https://github.com/AGROSICA/node-localize)可以和 express 一起工作。

根据您想要本地化的位置，[jqtpl-express-i18n](http://ricardo.cc/2011/04/28/localization-on-nodejs-express-jquery-templates.html)可以完成模板工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-19T02:22:13.937

[https://github.com/jeresig/i18n-node-2](https://github.com/jeresig/i18n-node-2)

John Resig 的实现

他关于它的博客文章

[http://ejohn.org/blog/i18n-module-for-node-and-express-js/](http://ejohn.org/blog/i18n-module-for-node-and-express-js/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-05T10:29:53.347

实际上我使用这个 NPM 包[i18n](https://www.npmjs.com/package/i18n)

它与 Express 框架有一个非常简单的用法......创建语言环境文件夹（it.json、en.json 等......）

```
// load modules at bootstrap
var app = express();
var i18n = require("i18n");

//set configuration
i18n.configure({
  locales:['en', 'de'],
  directory: __dirname + '/server/locales'
});
app.use(i18n.init);

// and then, in controller we can use response
res__('YOUR_KEY') 
```

前端只是将 HTTP 标头设置为`Accept-Language`值 'en'、'it' 等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-11T19:20:51.290

您可以使用[语言翻译](https://github.com/hkaraoglu/language-translator)库。它使用 json 文件来加载文本。你可以定义任何你想要的语言。

*   它支持参数化请求。（包含：参数）
*   它支持路由文件和视图文件的输出文本。
*   它是完全可定制的。
*   它使用和管理 cookie 来了解用户偏好。
*   它通过匹配您的路由路径和语言文件在中间件​​功能中加载语言文件。无需在每个路由文件中都需要语言文件。
*   它使用 Yandex 翻译 API 翻译默认语言的 json 文件的文本。（自由的）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-27T08:19:01.297

我在自己的项目中使用了[localizify](https://github.com/noveogroup-amorgunov/)库，它很轻。

```
const localizify = require('localizify');

// ...

app.configure(() => {
    app.use((request, response, next) => {
        const lang = request.headers['accept-language'] || 'en';
        localize.setLocale(lang);
        next();
    });
}); 
```

# iphone - Xcode 4.3.3 iPhone 5.1 模拟器经常挂起

> ID：11645747
> 
> 赞同：3
> 
> 时间：2012-07-25T08:36:25.323
> 
> 标签：iphone, ios, xcode, crash, ios-simulator

我一直在四处寻找最近是否有人有类似的问题，但找不到太多信息。

大多数情况下，在模拟器中启动应用程序都可以正常工作。但是每天一两次模拟器挂起，我不得不强制退出它。XCode 说“在模拟器上运行 xyz”。当您尝试在 XCode 中“停止”时，什么也没有发生。然后我必须强制退出 XCode。

令人讨厌的是除非我重新启动机器，否则模拟器将无法再次工作！

当我直接在 iPhone 上运行应用程序时，这种情况永远不会发生。对我来说，无论是示例应用程序还是我自己的应用程序，都曾多次发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:55:56.970

转到编辑方案 - > 使用 GDB 调试器而不是 LLDB - 这对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T11:14:31.563

这发生在我身上，但不是最近（我留在 4.3.2）。也就是说，Xcode 4.4 将于今天发布（几乎可以肯定，因为今天 Mt Lion 即将发布）。得到它，看看问题是否消失！

编辑：我确实升级到 4.4，然后是 4.5，然后是 4.6。自从离开 4.3 以来，我没有遇到过一次挂起，使用了几台机器，我的同事也没有。当然是 YMMV。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-01T19:21:00.697

多年来，这让我感到沮丧，但偶然发现了似乎让我重新开始的事情：

隐藏模拟器（iOS Simulator -> Hide iOS Simulator）或 Cmd-H，然后重新打开模拟器。

当我的旧 2 核 MacBook 上的后台发生 CPU 密集型的事情（如 Time Machine 备份）时，问题似乎发生了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T11:37:45.777

今天向苹果支持社区[报告](https://discussions.apple.com/thread/4160869?tstart=0)了该问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T11:33:29.440

你可以重置 iphone 模拟器的内容和设置而不是检查它。有时如果我们在模拟器中运行这么多应用程序而不重置它，就会发生这种问题。

# .net - 手机上的 MVC4 BrowserOverride.Desktop 问题

> ID：11645749
> 
> 赞同：2
> 
> 时间：2012-07-25T08:36:27.267
> 
> 标签：.net, asp.net-mvc, mobile, browser-detection

我使用 ASPNET.MVC4 RC 创建了一个网站。对于每个视图，我创建了 2 个文件，例如 index.cshtml 和 index.Mobile.cshtml，它们代表桌面和移动视图。开箱即用一切正常 - 移动设备获得移动视图，非移动设备获得完整的桌面视图。但是，我在尝试将桌面视图强制到移动设备上时遇到了问题（即当用户单击“完整站点”链接时） - 视图不会改变，移动视图仍然会被渲染。我使用以下代码覆盖浏览器（从全局过滤器调用）：

```
 filterContext.RequestContext.HttpContext.SetOverriddenBrowser(BrowserOverride.Desktop); 
```

我可以看到以下 cookie 被设置：.ASPXBrowserOverride=[Mozilla%2f4.0+(compatible%3b+MSIE+6.1%3b+Windows+XP)] 作为此调用的结果，但显然由于某种原因它被忽略了。在桌面浏览器上强制移动视图可以正常工作，即其他方式。任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:47:14.707

此解决方案工作正常。

控制器：

```
public class ViewSwitcherController : Controller
{
    //
    // GET: /ViewSwitcher/
    public RedirectResult SwitchView(bool mobile, string returnUrl)
    {
        if (Request.Browser.IsMobileDevice == mobile)
        {
            HttpContext.ClearOverriddenBrowser();
        }
        else
        {
            HttpContext.SetOverriddenBrowser(mobile ? BrowserOverride.Mobile : BrowserOverride.Desktop);
        }
        return Redirect(returnUrl);
    }
} 
```

看法：

```
<% if (ViewContext.HttpContext.GetOverriddenBrowser().IsMobileDevice)
   {%>
  <%= Html.ActionLink("Desktop - Version", "SwitchView", "ViewSwitcher", 
      new {  mobile = false, returnUrl = Request.Url.PathAndQuery }, 
      new {  target = "_self" })%>
 <% }
    else
    {%>
  <%= Html.ActionLink("Mobile - Version", "SwitchView", "ViewSwitcher", 
      new { mobile = true, returnUrl = Request.Url.PathAndQuery }, 
      new {  target = "_self" })%>
 <%}%> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T03:57:43.983

我找到了我的问题所在。万一有人落入同一个陷阱，它是这样的：

[当我创建我的项目时，我从我在Microsoft 支持论坛上](http://forums.asp.net/t/1776463.aspx/1)找到的支持答案中获取了我的设备配置类的内容，该类将移动 DefaultDisplayMode 添加到 DisplayModeProvider 。

该代码在 Request.UserAgent 中寻找移动设备特定的字符串。然而 SetOverriddenBrowser() 方法只改变被覆盖的用户代理，Request.UserAgent 保持不变。

因此解决方案是在分析客户请求时替换`Request.UserAgent`为。`Context.GetOverriddenUserAgent()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:54:56.843

由于您还没有说明您已经尝试过什么或您正在使用什么来设计您的网站，请允许我建议您安装 jquery mobile（您可以从 Nuget 获得）并查看它自动为您安装的视图切换器看看它是怎么做的。这应该是一个很好的起点

# c++ - 为什么函数参数中的 const 限定符用于重载解析？

> ID：11645751
> 
> 赞同：10
> 
> 时间：2012-07-25T08:36:30.877
> 
> 标签：c++, overloading, overload-resolution

> **可能重复：**
> [带有 const 参数和重载的函数](https://stackoverflow.com/questions/3682049/functions-with-const-arguments-and-overloading)

我对重载和 const 声明规则感到很困惑。这里有两件事让我感到困惑，也许你可以帮助我找到我脑海中更深层次的误解，导致他们对我感到困惑。;)

首要问题：

我的编译器允许这样做：

```
void f(int & x) {
  std::cout << "plain f" << std::endl;
}
void f(const int & x) {
  std::cout << "const f" << std::endl;
} 
```

但是以下会导致编译错误（函数已经有一个主体）：

```
void f(int x) {
  std::cout << "plain f" << std::endl;
}
void f(const int x) {
  std::cout << "const f" << std::endl;
} 
```

我认为这是有道理的，因为我认为 const 只是在那里告诉编译器正在传递的对象没有改变，而在第二种情况下它无论如何都会被复制。但如果这是正确的，那么为什么我可以使用 const 重载函数？

换句话说，为什么如果我使用编译版本并调用这样的函数：

```
 int x1 = 5;
  const int x2 = 5;
  f(x1);
  f(x2); 
```

我得到“plain f”和“const f”而不是“const f”两次？显然现在我也使用 const 来告诉编译器调用哪个函数，不仅引用不会改变。这变得更加令人困惑，因为如果我删除“普通”版本，它就可以正常工作并两次调用“const”版本。

现在我的实际问题是什么？我想知道这种行为背后的想法是什么，因为否则很难记住它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T08:46:16.070

n3337 13.1

> [注：如 8.3.5 所述，具有等效参数声明的函数声明声明相同的函数，因此不能重载：仅在存在或不存在时提供
> 
> — const 和/或 volatile 的 di3 的参数声明是等价的。也就是说，在确定声明、定义或调用哪个函数时，将忽略每个参数类型的 const 和 volatile 类型说明符。[ 例子：
> 
> ```
> typedef const int cInt;
> int f(int);
> int f(const int); // redeclaration of f(int)
> int f(int) { /* ... */ } // definition of f(int)
> int f(cInt) { /* ... */ } // error: redefinition of f(int) 
> ```
> 
> — 结束示例] 只有在参数类型规范最外层的 const 和 volatile 类型说明符以这种方式被忽略；隐藏在参数类型规范中的 const 和 volatile 类型说明符很重要，可用于区分重载的函数声明。 124 特别是，对于任何类型 T，“指向 T”、“指向 const T”和“指向volatile T”被认为是不同的参数类型，“reference to T”、“reference to const T”和“reference to volatile T”也是如此。</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T09:39:29.793

> 我认为 const 只是在那里告诉编译器正在传递的对象没有改变，在第二种情况下它无论如何都会被复制

你是对的。因为在第二种情况下它无论如何都会被复制，因此`const`对调用者没有影响，标准定义了它`void f(const int x)`并`void f(int x)`具有相同的签名。因此它们发生碰撞，您试图定义相同的函数两次。

因为在第一种情况下，它无论如何*都不会被*复制，`void f(const int &x)`并且`void f(int &x)`具有*不同的*签名。因此它们超载。

在您的第一种情况下，禁止将with的`int&`版本称为参数，因为这会创建对 const 对象的非常量引用，而不会看到任何显式强制转换。这样做违背了 const 系统的目的（也就是说，如果你想破坏 const-safety，你必须通过强制转换明确地这样做）。因此，使用引用参数对函数进行 const 和非 const 重载是有意义的。`f``x2`

在您的第二种情况下，副本源的 const-ness 与目标的 const-ness 之间没有关系。您可以从一个非常量变量初始化一个常量变量，或者从一个常量变量初始化一个非常量变量。这不会导致任何问题，也不会破坏 const-safety。`f`这就是为什么该标准通过定义您的两个“不同”版本实际上是相同的功能来帮助明确这一点。

# objective-c - 使用 EXC_BAD_ACCESS 阻止回调崩溃

> ID：11645755
> 
> 赞同：6
> 
> 时间：2012-07-25T08:36:44.760
> 
> 标签：objective-c, cocoa, objective-c-blocks

我有一个自定义的 NSOperation 子类，用于发出 HTTP 请求。它接受在 NSOperation 完成时执行的基于块的回调。一切都相应地工作，但我在尝试执行我的完成回调时遇到了奇怪的间歇性崩溃。我读过很多基于块的 EXEC_BAD_ACCESS 问题是由于在将块传递给其他方法时未正确复制块引起的。

我相信我的问题与我如何使用块有关。我将在下面包含我的应用程序的标准用例。我的问题的根源可能在于涉及区块的所有权误解。

```
// Perform a HTTP request to a specified endpoint and declare a callback block
[self performRequestToEndpoint:@"endpoint" completion:^(HTTPResponse *response) {
    NSLog(@"Completed with response: %@", response);
}];

// A helper function to avoid having to pass around too many parameters
- (void)performRequestWithEndpoint:(NSString *)endpoint completion:(void (^)(HTTPResponse *response))completionBlock
{
    // Make our HTTP request and callback our original completion block when done
    [self requestWithMethod:@"GET" path:endpoint completion:^(HTTPResponse *response) {
        if(![response error])
        {
            // Call our original completion block
            completionBlock(response);
        }
    ];
} 
```

当通过 requestWithMethod:path:completion: 方法分配回调块时，它被复制如下：

```
@property (nonatomic, copy) void (^operationCompletionBlock)(HTTPResponse *response); 
```

这是崩溃的重点：

```
- (void)callCompletionBlockWithResponse:(id)response
{
    if(self.operationCompletionBlock && !self.isCancelled)
    {
        self.operationCompletionBlock(response); // crashes here (intermittently)
    }

    [self finish];
} 
```

下面附上堆栈跟踪：

```
* thread #1: tid = 0x2403, 0x0000000000000000, stop reason = EXC_BAD_ACCESS (code=1, address=0x0)
    frame #0: 0x0000000000000000
    frame #1: 0x00007f946b53ed01
    frame #2: 0x0000000102da7cf7 Project`-[HTTPRequest callCompletionBlockWithResponse:] + 215 at HTTPRequest.m:402
    frame #3: 0x0000000102da79e7 Project`__44-[HTTPRequest connectionDidFinishLoading:]_block_invoke_0 + 423 at HTTPRequest.m:381
    frame #4: 0x00007fff956fea86 libdispatch.dylib`_dispatch_call_block_and_release + 18
    frame #5: 0x00007fff957008f6 libdispatch.dylib`_dispatch_main_queue_callback_4CF + 308
    frame #6: 0x00007fff8f07ce7c CoreFoundation`__CFRunLoopRun + 1724
    frame #7: 0x00007fff8f07c486 CoreFoundation`CFRunLoopRunSpecific + 230
    frame #8: 0x00007fff94f1a4d3 HIToolbox`RunCurrentEventLoopInMode + 277
    frame #9: 0x00007fff94f21781 HIToolbox`ReceiveNextEventCommon + 355
    frame #10: 0x00007fff94f2160e HIToolbox`BlockUntilNextEventMatchingListInMode + 62
    frame #11: 0x00000001032a6e31 AppKit`_DPSNextEvent + 659
    frame #12: 0x00000001032a6735 AppKit`-[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 135
    frame #13: 0x00000001032a3071 AppKit`-[NSApplication run] + 470
    frame #14: 0x000000010351f244 AppKit`NSApplicationMain + 867
    frame #15: 0x0000000102d69512 Project`main + 34 at main.m:13
    frame #16: 0x0000000102d694e4 Project`start + 52 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-10T21:23:40.957

This is a shot in the dark. You have two completion blocks, only one of which you explicitly copy (using the property). My mental model says that the `completionBlock` passed to `performRequestWithEndpoint:completion:` *should be* captured in the scope of the block you pass on. But I know some paranoid people who might try this:

```
- (void)performRequestWithEndpoint:(NSString *)endpoint 
                        completion:(void (^)(HTTPResponse *response))completionBlock
{
    void (^copiedBlock)(HTTPResponse *response) = [completionBlock copy];

    [self requestWithMethod:@"GET" path:endpoint completion:^(HTTPResponse *response) {
        if(![response error] && copiedBlock) {
            copiedBlock(response);
        }
    ];
} 
```

# python - Django 1.4 - 手动导入管理模型

> ID：11645757
> 
> 赞同：0
> 
> 时间：2012-07-25T08:36:51.487
> 
> 标签：python, django, django-admin

与[我之前关于扩展 Django 的 AdminSite 的问题](https://stackoverflow.com/questions/11341663/django-override-admin-sites-login-form/11347302)相关，我已经成功地将 AdminSite 子类化并且可以完美登录。但是，我的管理站点中没有应用程序模型！admin.autodiscover() 函数不再起作用，而且我对 Python 的熟练程度不足以找出我做错了什么！

长话短说，如果我不能使用 AdminSite.autodiscover()，我如何将我 verious Django 应用程序中的所有模型加载到我的子类 AdminSite 实例中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:19:50.590

没有理由不使用[`django.contrib.admin.autodiscover`](https://github.com/django/django/blob/master/django/contrib/admin/__init__.py)，即使您将`AdminSite`. 这是`admin`从您注册的所有 Django 应用程序导入模块的实际工具`settings.INSTALLED_APPS`，有效地将模型注册到您的管理站点实例。

回顾一下您是否有子类的`project.admin.foo_site`实例`project.admin.FooAdminSite`：

```
# project/urls.py
from django.conf.urls import url
from django.contrib import admin

from project.admin import foo_site

admin.autodiscover()

urlpatterns = patterns('',
    url(r'^admin/', include(foo_site.urls)),
)

#project/app/admin.py
from project.admin import foo_site
from project.app.models import Bar

foo_site.register(Bar) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:45:25.923

您需要[设置一个 admin.py 并注册您的模型](https://docs.djangoproject.com/en/dev/intro/tutorial02/#make-the-poll-app-modifiable-in-the-admin)。这是 Django 教程中的释义版本：

> 为此，请在您的应用程序目录中创建一个名为 admin.py 的文件，并将其编辑为如下所示：

```
from django.contrib import admin
from app.models import Model1, Model2, Model3

admin.site.register(Model1)
admin.site.register(Model2)
admin.site.register(Model3) 
```

# objective-c - macbook pro 上的 Retina 显示和屏幕截图

> ID：11645763
> 
> 赞同：3
> 
> 时间：2012-07-25T08:37:04.353
> 
> 标签：objective-c, macos, retina-display

在我的颜色选择器应用程序中，我使用 CGWindowListCreateImage 创建一个图像，它是当前用户屏幕的一部分，然后我放大图像直到显示像素。

这是我用来捕获图像的代码

```
img = CGWindowListCreateImage(CGRectMake(point.x,fd ,width ,height),
                                  kCGWindowListOptionOnScreenBelowWindow, 
                                  (CGWindowID)winNum, 
                                  kCGWindowImageDefault); 
```

这是我在 drawRect 中使用的代码来缩放它。

```
CGContextScaleCTM (ctx, ZOOM, ZOOM);
CGContextDrawImage(ctx, image_position, img);   
CGContextRestoreGState(ctx); 
```

我无法在带有视网膜显示屏的 macbook pro 上测试此代码，我真的很想知道它是否正常工作！

我对比例部分有些怀疑......因为我无法理解双倍像素的外观。你觉得这段代码怎么样？有视网膜显示器的人刚刚尝试以这种方式使用比例尺？

# c# - C# Web 参考 - 在 app.config 中设置超时

> ID：11645767
> 
> 赞同：0
> 
> 时间：2012-07-25T08:37:31.983
> 
> 标签：c#, timeout, web-reference

我有一个程序使用 Web 参考来连接到服务器。Web 引用在 app.config 文件中配置如下：

```
 <applicationSettings>
        <blala.Properties.Settings>
          <setting name="blablaClient_AppexScan_Service1" serializeAs="String">
            <value>http://www.apex.com/CxWS/Service1.asmx</value>
          </setting>
        </blabla.Properties.Settings>
  <applicationSettings> 
```

我想在设置中添加超时属性。我想将默认超时从 100000 毫秒更改为其他值，我想在 app.config 中进行。

当我尝试添加时：

```
<setting name="Timeout" serializeAs="String">

       <value>30</value>

</setting> 
```

它没有更改默认超时。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:41:13.920

调整 Web 服务的代理

```
var timeout = System.Configuration.ConfigurationSettings.AppSettings["Timeout"];

WebReference.ProxyClass myProxy = new WebReference.ProxyClass();
myProxy.Timeout = timeout; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T23:53:00.433

初始化 Web 服务后尝试设置超时。

```
WSName.WSClass refWS = WSMng.Initialize(ServerName, ServerPort, ServerInstance, ServerCompanyName);
refWS.Timeout = 200000; 
```

# ios5 - 从 xcode4.3 调用 wcf 服务

> ID：11645768
> 
> 赞同：0
> 
> 时间：2012-07-25T08:37:36.053
> 
> 标签：ios5, xcode4.3, wsdl2objc

我是 .Net 程序员和 Xcode 的初学者。我想在 UITableViewController 中显示 iPad 上 WCF 服务的结果。我已经使用 wsdl2objc 成功地为服务创建了存根。创建的 SOAP 消息如下：

```
2012-07-25 14:02:37.169 TestWCF[5280:fb03] OutputHeaders:
{
  "Content-Length" = 572;
  "Content-Type" = "text/xml; charset=utf-8";
  Host = "XXX.XXX.XXX";
  SOAPAction = "http://tempuri.org/IDocSync/getAllCategories";
  "User-Agent" = wsdl2objc;
}
2012-07-25 14:02:37.172 TestWCF[5280:fb03] OutputBody:
<?xml version="1.0"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"          xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xsi="http://www.w3.org/2001/XMLSchema-   instance" xmlns:xs="http://www.w3.org/2001/XMLSchema"      xmlns:iPadDocSyncServiceSvc="http://tempuri.org/" xmlns:ns1="http://tempuri.org/Imports" xmlns:tns1="http://schemas.datacontract.org/2004/07/DocSyncService"   xmlns:tns2="http://schemas.microsoft.com/2003/10/Serialization/" xsl:version="1.0">
<soap:Body>
<iPadDocSyncServiceSvc:getAllCategories/>
</soap:Body>
</soap:Envelope>
2012-07-25 14:03:03.119 TestWCF[5280:fb03] ResponseStatus: 200
2012-07-25 14:03:03.120 TestWCF[5280:fb03] ResponseHeaders:
{
  "Cache-Control" = private;
  "Content-Encoding" = gzip;
 "Content-Length" = 421;
 "Content-Type" = "text/xml; charset=utf-8";
  Date = "Wed, 25 Jul 2012 06:03:02 GMT";
 Server = "Microsoft-IIS/7.5";
 "Set-Cookie" = "ASP.NET_SessionId=55w4noiub50zqtqclwdx3ral; path=/; HttpOnly";
  Vary = "Accept-Encoding";
  "X-AspNet-Version" = "4.0.30319";
  "X-Powered-By" = "ASP.NET";
}
2012-07-25 14:03:03.121 TestWCF[5280:fb03] ResponseBody:
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Body>
    <getAllCategoriesResponse xmlns="http://tempuri.org/">
        <getAllCategoriesResult        xmlns:a="http://schemas.datacontract.org/2004/07/DocSyncService"    xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
                <a:Category>
                    <a:categoryId>4</a:categoryId>
                    <a:categoryName>IT</a:categoryName>
                    <a:categoryType>0</a:categoryType>
                    <a:docCount>3</a:docCount>
                    <a:subCategoryId>0</a:subCategoryId>
                </a:Category>
                <a:Category>
                    <a:categoryId>6</a:categoryId>
                    <a:categoryName>CPG</a:categoryName>
                    <a:categoryType>0</a:categoryType>
                    <a:docCount>1</a:docCount>
                    <a:subCategoryId>0</a:subCategoryId>
                </a:Category>
        </getAllCategoriesResult>
    </getAllCategoriesResponse>
</s:Body>
</s:Envelope> 
```

Appdelegate.m 中的代码是：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
   BasicHttpBinding_IDocSyncBinding *myBinding = [iPadDocSyncServiceSvc    BasicHttpBinding_IDocSyncBinding];
myBinding.logXMLInOut = YES;

//iPadDocSyncServiceSvc_getAllCategories *allCate =     [[iPadDocSyncServiceSvc_getAllCategories new]autorelease];
iPadDocSyncServiceSvc_getAllCategories *allCate = [[iPadDocSyncServiceSvc_getAllCategories     alloc]init];

BasicHttpBinding_IDocSyncBindingResponse *response = [myBinding getAllCategoriesUsingParameters:allCate];

for(id bodyPart in response.bodyParts)
{
    //if([bodyPart isKindOfClass:[BasicHttpBinding_IDocSyncBindingResponse class]])
    //{
    //tns1_ArrayOfCategory *cateClass = (tns1_ArrayOfCategory *) bodyPart;
    //[self.tableView reloadData];

    //categories  = (NSMutableArray *) cateClass;
    //tns1_ArrayOfCategory *cateClass = [bodyPart getAllCategoriesResult];

    self.categories = (NSMutableArray *) [bodyPart getAllCategoriesResult];
    //}
}

return YES;
} 
```

当我运行它时，模拟器中没有显示任何内容......它显示一个空白屏幕。我缺少一些非常明显的东西。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T12:21:46.583

不久前，我使用 Wsdl2Objc 编写了一些教程；也许他们可以提供帮助。

[http://brismith66.blogspot.com/search/label/iPhone%20Development](http://brismith66.blogspot.com/search/label/iPhone%20Development)

# clojure - 无法加载和编译外部 clojure 文件

> ID：11645770
> 
> 赞同：2
> 
> 时间：2012-07-25T08:37:49.280
> 
> 标签：clojure, compilation, load, libraries

我正在尝试从另一个 .clj 文件中加载和/或编译 .clj 文件。我这样做是因为我试图加载的文件只包含一堆地图，我打算最终用一个 xml 文件替换它们。我可以只是`:use`该文件，它会工作，但我正在尝试通过加载外部数据束的练习。

通过对 repl 的一些随机黑客攻击（通过 emacs 等），我能够以`(load "default_libs")`某种`(compile...)`方式（使用命名空间限定符、`'`和的不同组合`"`）并获得对地图的访问权限，但是在重新启动 repl 后它没有任何工作更多，无论如何我不得不使用完整的命名空间名称来获取数据。

这是 lib_manager.clj：

```
(ns mycad.lib-manager
  (:use [clojure repl]
        [mycad utils]))

(compile 'mycad.default-libs)
(println mycad.default-libs/default-symbols) 
```

这是我要加载的文件，`default_libs.clj`. 这里的数据最终会是一些 xml 文件，但我还是很陌生，所以现在我只是直接写了一堆 clojure 映射。

```
(ns mycad.default-libs)
(def default-symbols {.... }) 
```

所以问题是我怎样才能从一个文件中加载一堆数据`.clj`而不真正将其加载到命名空间中，`(ns...)`而是使用`load`or将其视为数据源`compile`？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:04:52.453

如您在问题前面所述`compile`，将示例中的更改为 a 。`load`然后该示例将起作用。

`compile`用于命名空间的 AOT 编译。所以这不是你需要的。

如果只定义了一个地图，您可以使用`load-file`.

```
(def default-symbols (load-file "/file/path.clj")) 
```

如果“文件”实际上位于类路径中的某个位置或其他一些非本地流中，则存在`load-string`.

```
(def default-symbols (load-string (slurp (io/reader stream)))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:40:52.137

Lisp 是非常动态的语言。Clojure 是 Lisp，允许您执行以下操作：

```
user=> (eval (read-string "(def a 10)"))
#'user/a
user=> a
10 
```

`read-all`所以你可以从[这里](https://stackoverflow.com/a/6840646/788207)加载你的文件，例如使用一个函数，然后`(eval`是所有表单：

```
(use 'clojure.java.io) ; for (reader ..) function
(import 'java.io.PushbackReader)
....
(doseq [f (read-all (PushbackReader. (reader "your/file.clj")))] (eval f)) 
```

然后，如果您仅`file.clj`包含`(def`初始值，它们将位于您当前的命名空间中，那么您可以将它们用作简单变量。但是，如果您`file.clj`包含一些更改名称空间的表单（`(ns..)`, `(in-ns ..)`），那么事情可能会很复杂，因为当前的名称空间会发生变化。如果此类声明是强制性的并且不能在文件本身中删除，您可以尝试过滤它们，`(eval`仅当它是定义时才使用表单。

**更新**：嗯，我发现`(eval`+`(read-all`在某种意义上等同于`(load-file`：

```
(load-file "your/file.clj") 
```

但是在`load-file`命名空间不会改变的情况下，即使有命名空间更改命令 - 这些命名空间只是加载到内存中，您可以像往常一样引用其中的符号。看来这就是您所需要的。

# asp.net-mvc-3 - returnUrl 参数未传递给 LogOn 操作的 Post 方法

> ID：11645772
> 
> 赞同：0
> 
> 时间：2012-07-25T08:37:57.580
> 
> 标签：asp.net-mvc-3, razor

当用户尝试访问经过身份验证的页面时，它会被重定向到登录页面。以下是登录操作：

**控制器动作**

```
 [HttpPost]
  public ActionResult LogOn(LogOnModel model, string returnUrl)
  {
    //Authentication codes goes here .......
  } 
```

**登录视图**：

```
 @using (Html.BeginForm("LogOn", "Account", FormMethod.Post, new {  @class = "jmenu" }))
   {
     // Form for login codes goes here......
  } 
```

**问题：** 在 LogOn View 中，当我没有将参数放入 Html.BeginForm() 时，它可以正常工作。该页面在登录后被重定向到用户被重定向到登录以进行身份​​验证的页面。但是如果我像上面一样传递参数，登录后它会被重定向到主页。在这里，可能是由于 returnUrl 没有传递给 LogOn 操作。如何在 Html.BeginForm 中为 LogOn 操作传递 returnUrl 参数。或者，是否可以不更改视图并在 LogOn 操作中进行修改，这样我就不必更改其他视图的代码。谢谢你的时间...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:14:23.273

您需要将返回 url 定义为表单的一部分。需要注意的一件事是，您不能总是依赖 url 引荐来源网址。在某些情况下，它可能为空。

```
@{
    string url = "";
    if (ViewContext.HttpContext.Request.UrlReferrer != null)
    {
        url = ViewContext.HttpContext.Request.UrlReferrer.PathAndQuery;
    } 
}

@using (Html.BeginForm("Logon", "Account", new { model = this.Model, returnUrl = url }))
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:08:20.497

您可以`Request.UrlReferrer`在您的操作中使用以获取最后一个请求的 URL。

# android - 在android应用程序中应用验证时出错

> ID：11645774
> 
> 赞同：0
> 
> 时间：2012-07-25T08:38:01.933
> 
> 标签：android, android-edittext, android-button

我正在开发一个 android 应用程序，其中 iIhave 4 edittext 和一个按钮下方。我想对每个字段应用验证，这样任何字段都不会留空。我尝试了很多样本​​并应用了相同的逻辑，但它不起作用。

我已经为此编码了。我的java类是 [http://pastebin.com/ZdeYZPxX](http://pastebin.com/ZdeYZPxX)

但问题是，当我输入第一个 edittext 然后单击按钮时，它可以工作。谁能帮我摆脱这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:43:47.673

看我在课堂上做了这个功能

```
 public boolean checkForEmpty(String fieldString) {
    if (fieldString.equalsIgnoreCase("")
            || fieldString.equalsIgnoreCase(null))
        return true;
    else
        return false;
    } 
```

然后

```
 username = editUserName.getText().toString().trim();
    if (checkForEmpty(username)) {
        Showalert("Please enter User ID");
        editUserName.requestFocus();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:14:08.877

```
public boolean checkForEmpty(String fieldStr) {
    if (fieldStr.length() == 0 )
        return true;
    else
        return false;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:47:31.420

在`Toast`告诉用户其中一个`EditText`是空的之后，您应该添加一条`return`语句来停止其余代码（开始一个新的`Activity`）正在运行，直到用户填写所有`EditTexts`：

```
if (un.equals("") || pw.equals("")) {
    if (un.equals("")) {
        Toast.makeText(BloodPressureScreen.this, "FirstName is empty", Toast.LENGTH_SHORT).show();
        return;
    } else {
        Toast.makeText(BloodPressureScreen.this, "LastName is empty", Toast.LENGTH_SHORT).show();
        return;
    }
}

if (cn.equals("") || em.equals("")) {
    if (cn.equals("")) {
        Toast.makeText(BloodPressureScreen.this, "Contact is empty", Toast.LENGTH_SHORT).show();
        return;
    } else {
        Toast.makeText(BloodPressureScreen.this, "Email is empty", Toast.LENGTH_SHORT).show();
        return;
    }
} 
```

# php - PHP 需要帮助来过滤日志文件

> ID：11645776
> 
> 赞同：0
> 
> 时间：2012-07-25T08:38:06.893
> 
> 标签：php, mysql

所以我的问题是，我得到了一个通过 loggfile 循环的代码，然后将它们与树结构进行比较，然后给它们一个与结构中的 id 相对应的 id。为了不引起很多不良流量，我整理了所有 302 及更高版本。

现在的问题是我想要一些特定的 302 来计算结构中具有特定页面类型的。这不是一个大问题，因为我可以将 loggfile 中的 url 与树结构中的 url 进行匹配，但是当结构位于友好 url 中时，一些 loggfile 不使用友好 url，这会产生问题，但我可以匹配 id结构中带有 id 的查询参数。然后，我创建一个与我想要的特殊页面类型匹配的所有 id 的字符串。

问题是我无法让 Mysql 语句工作，它看起来像这样。

```
$sqlQ1 = "SELECT `lid` FROM logfile WHERE date = '$date' AND ´query´ IN '$check'"; 
```

示例查询可能看起来像这样“id=4&epslanguage=sv”，所以我只想检查 id=X 部分。

这是一个简单的问题，我真的只是卡住了，无法让它工作，感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:01:57.200

我认为您的问题是：如何从行的那一部分中提取 id ？

> “..所以我只想检查 id=X 部分。”

隔离该字符串后，您可以使用：

```
$string = "id=4&abclang=sv";

parse_str($string);

echo $id; // 4 
```

编辑鉴于其他回应：

```
$strings[] = "id=4&abclang=sv";
$strings[] = "id=45&abclang=en";

$vals = array();

foreach( $strings as $string){
parse_str($string);
$vals[] = $id ;
}

$in_clause = join(",", $vals) ;
 $sql = "SELECT lid FROM logfile WHERE something  IN ($in_clause) ";
echo $sql; // SELECT lid FROM logfile WHERE something IN (4,45) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:50:14.303

所以你已经有了 ID 并且想要过滤 MySQL 查询以获取这些行？

```
$check = Array(1, 2, 3, 4);
$check = implode(",", $check);
$sqlQ1 = "SELECT `lid` FROM logfile WHERE date = '$date' AND ´query´ IN ($check)"; 
```

# c# - Win XP 中 ListView 中的错误图像渲染

> ID：11645780
> 
> 赞同：0
> 
> 时间：2012-07-25T08:38:22.230
> 
> 标签：c#, winforms, listview, rendering, thumbnails

我在基于 .NET 3.5 的 winforms 应用程序的 ListView 中渲染图像时遇到问题。

在 ListView 控件中，我使用 LargeImageList 作为缩略图。

应用程序在 Win 7 中正常工作 - 缩略图中的图像正常，但如果应用程序在 Win XP 中运行，缩略图中的图像会呈现错误。

Win 7 和 Win Xp 中渲染的区别就在于此![图片](../Images/098de5fdff8b6605def5971280088f07.png)。

什么会导致这种行为？

已编辑：谢谢大家的回复和建议。它已经解决了。我使用另一个控件而不是 winforms listview。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T08:49:46.397

为此，您可以尝试使用**免费的 ObjectListView 控件。**您可以从[http://objectlistview.sourceforge.net](http://objectlistview.sourceforge.net)下载它。

### 基本实现

1.  用 ObjectListView 替换您的常规 ListView 控件。
2.  创建一个包含要在 ObjectListView 上显示的字段的类。
    这是必要的，因为 OLV 不直接使用*ListViewItem*来显示元素。
3.  在 OLV 中创建列（在代码中）并指定将为该列显示的属性（来自步骤 2）。
4.  将`ImageGetter`要显示图像的列（通常是第一列）的属性设置为返回 的函数`Image`，`string`或者`int`与要为项目显示的图像相对应的函数。
    如果函数返回`string`or `int`，则 OLV 中的图像`LargeImageList`or`SmallImageList`将为项目显示。
5.  创建`Enumerable`要显示的项目的集合，并使用`SetObjects`or`AddObjects`方法将其附加到 OLV。
6.  在用于返回要为项目显示的图像的函数中，使用 GDI（或任何您想要的方式）渲染图像并将其返回以在 OLV 中显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T00:39:36.380

您可以查看[Better ListView](http://www.componentowl.com/better-listview)组件。我们做出了巨大的努力来启用任意大小的缩略图：

![在此处输入图像描述](../Images/78f49d952c2f22467129c011740617fb.png)

渲染使用 GDI+，因此结果在 XP 和 Windows 7 上看起来相同（当然，基于 Windows 主题的选择除外）。

.NET ListView 是一个 Win32 控件包装器，因此外观很大程度上取决于操作系统，我们制作了一个完全用托管代码编写的控件来避免这些问题。

# actionscript-3 - AS3：鼠标拖动或按键移动

> ID：11645781
> 
> 赞同：0
> 
> 时间：2012-07-25T08:38:25.133
> 
> 标签：actionscript-3, drag-and-drop, move

我有 6 个具有拖放和 hitTest 功能的对象。很明显，当我将一个对象拖到他们的 hitTest 区域时，它是正确的。

但我的问题是我想通过鼠标和键盘键控制这 6 个对象。如果我不想拖动它们，那么我可以通过键箭头移动它们。

第二个问题是，如果我想按键移动一个对象，那么当这两种方法完成时，我会抓住第一个不是“hitTested”的空闲对象

我可以在 AS3 中做这些事情吗？这些项目中的解决方案非常奇怪，但我需要知道是否可行。

这是我的拖放功能代码

```
package {
import flash.display.Sprite;
import flash.events.MouseEvent;
import flash.events.KeyboardEvent;
import flash.display.MovieClip;

public class Main extends MovieClip
{
    var xPos:int;
    var yPos:int;
    var errors:int;
    var wins:int;

    public function Main():void
    {
        addListeners(objectone,objecttwo,objectthree,objectfour,objectfive);
        errors = 1;
        wins = 1;
    }

    private function getPosition(target:Object):void
    {
        xPos = target.x;
        yPos = target.y;
    }

    private function dragObject(e:MouseEvent):void
    {
        info.text = "";
        getPosition(e.target);

        e.target.startDrag(true);
    }

    private function stopDragObject(e:MouseEvent):void
    {
        if (e.target.hitTestObject(getChildByName(e.target.name + "Target")))
        {
            e.target.x = getChildByName(e.target.name + "Target").x;
            e.target.y = getChildByName(e.target.name + "Target").y;
            info.text = "Bingo!";
            wins++;
        }
        else
        {
            e.target.x = xPos;
            e.target.y = yPos;
            bledy.text = "Wrong: " + errors++;

        }
        if(errors == 4) {
            errors = 1;
            gotoAndPlay(2);
        }

        if(wins == 9) {
            wins = 1;
            gotoAndStop(3);
        }
        e.target.stopDrag();
    }

    private function addListeners(... objects):void
    {
        for (var i:int = 0; i < objects.length; i++)
        {
            objects[i].addEventListener(MouseEvent.MOUSE_DOWN, dragObject);
            objects[i].addEventListener(MouseEvent.MOUSE_UP, stopDragObject);
        }
    }
}
} 
```

请给我一些代码提示！干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:47:39.373

当然这是可能的......并且肯定有几种选择可以实现这一目标。

对于键盘交互，我建议您检查 FocusManager 类，这样您就可以了解如何使用选项卡在选定对象中循环，并获取焦点对象。然后监听舞台键盘事件以使用箭头移动对象。

关于拖动移动检查 DragManager 类相关示例，如果使用 Flex，或者查找 google 以获取 Flash 中的教程。

# google-chrome - chrome中的HTTP服务流（XMLHttpRequest到长寿服务器）：高抖动

> ID：11645782
> 
> 赞同：2
> 
> 时间：2012-07-25T08:38:30.157
> 
> 标签：google-chrome, xmlhttprequest, streaming

我正在尝试使用 Chrome 的 XMLHttpRequest 对象作为客户端来实现[服务流模式](http://ajaxpatterns.org/HTTP_Streaming)，以便沿服务器实时确定的路径显示动画。如“[谷歌浏览器和流式 HTTP 连接？](https://stackoverflow.com/questions/237553/google-chrome-and-streaming-http-connections)“我确保在初始连接时发送了大量数据，并且我能够逐行从服务器接收数据。但是，当服务器定期发送数据时（每 300 毫秒 +- 大约 20 毫秒）我在 chrome 中出现不可接受的大量抖动（偶尔行高达 +200 毫秒）。服务器在 localhost 上运行，所以这不是网络延迟。任何可能导致它的想法，或者我如何修复它（缺少缓冲比我现在更多的动画，这是不可接受的，因为这是一个交互式应用程序）？

# jquery - jQuery调用两次函数

> ID：11645783
> 
> 赞同：0
> 
> 时间：2012-07-25T08:38:35.227
> 
> 标签：jquery

当我单击 .kontrahent div 时，我想使用另一个 jquery 函数来加载 xml 文档并将其附加到 #info div，但是当我单击它时，它会被调用两次，我不知道它为什么不起作用。我已经检查了委托、直播、点击和方法。

jQuery代码：

```
$("#dane").on('click',".kontrahent",function(){
   console.log($(this));
   var konh_id = $(this).data("konhid");
   show_info(konh_id);
   $('#info').show();
}); 
```

html代码

```
<div class="row">
  <div id="dane" class="span6">
    <div class="kontrahent">
    </div>
    <div class="kontrahent">
    </div>
    <div class="kontrahent">
    </div>
  </div>
  <div id="info" class="span8">TESTOWE INFORMACJE O KLIENCIE</div>
</div> 
```

然后在控制台中我有两次选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T12:35:13.633

这绝对是一个错误，特别是当它是 FireFox 时。我搜索了很多，最后被许多专家认为是错误的。所以，我终于通过声明变量想出了这个想法

```
var called = false;
$("#ColorPalete li").click(function() {
    if(called ===false)
    {
             called = true;
             setTimeout(function(){ //<-----This can be an ajax request but keep in mind to set called=false when you get response or when the function has successfully executed.
                 alert('I am called');
                 called = false;
             },3000);

    }
}); 
```

通过这种方式，它首先检查该函数之前是否被调用过。

# jsfl - 如何在 Flash CS5 中停止 JSFL 进程？

> ID：11645785
> 
> 赞同：2
> 
> 时间：2012-07-25T08:38:45.910
> 
> 标签：jsfl

我写了一个JSFL脚本，有一个很长的循环，当这个脚本运行时，我无法停止它。只能使用 Alt-F4 杀死 Flash CS5，然后重新启动它。这太疯狂了。如何在不杀死 Flash 的情况下停止 JSFL 脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T14:56:59.873

这是一个更好的方法：在你的循环中，设置一个条件来检查是否按下了一个键。如果按键被按下，则中断循环。

```
if(fl.tools.shiftIsDown)
{
    stopScript = true;
    return;
} 
```

我使用了“stopScript”变量，因为我需要打破一个以上的循环来停止脚本。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:47:25.287

有几个建议：

*   优化您的脚本。
*   限制输入
*   将脚本逻辑划分为功能块，您可以在每个 EnterFrame 事件中连续调用它们。您可以嵌入该脚本信息 WindowsSWF 并将其用作 EnterFrame 事件信标（每个帧 WindowSWF 面板调用 JSFL 中的函数）。您可以在每帧停止调用 JSFL 函数的面板中添加一个按钮。

# python - 页面加载完所有搜索结果后如何使用python urlopen抓取？

> ID：11645786
> 
> 赞同：5
> 
> 时间：2012-07-25T08:38:50.107
> 
> 标签：python, web-scraping, beautifulsoup, urlopen

我正在尝试使用 python3 和 BeautifulSoup从[http://flight.qunar.com/](http://flight.qunar.com/)抓取机票信息（包括飞机信息和价格信息等） 。下面是我正在使用的 python 代码。在这段代码中，我试图在 2012 年 7 月 25 日从北京（北京）到丽江（丽江）抓取航班信息。

```
import urllib.parse
import urllib.request
from bs4 import BeautifulSoup
url = 'http://flight.qunar.com/site/oneway_list.htm'
values = {'searchDepartureAirport':'北京', 'searchArrivalAirport':'丽江', 'searchDepartureTime':'2012-07-25'}
encoded_param = urllib.parse.urlencode(values)
full_url = url + '?' + encoded_param
response = urllib.request.urlopen(full_url)
soup = BeautifulSoup(response)
print(soup.prettify()) 
```

我得到的是提交请求后的初始页面，该页面仍在加载搜索结果。我想要的是完成加载搜索结果后的最后一页。那么如何使用 python 实现这个目标呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T11:01:21.320

这个问题实际上是相当困难的——该站点使用通过 JavaScript 加载的动态生成的内容，但是`urllib`基本上只能在禁用 JavaScript 的情况下获得您在浏览器中获得的内容。所以，我们能做些什么？

采用

*   [硒](http://seleniumhq.org/)或
*   [PhantomJS](http://phantomjs.org)或
*   [撬棍](http://simile.mit.edu/wiki/Crowbar)

完全呈现网页（它们本质上是用于测试和抓取的无头自动浏览器）

或者，如果您想要（半）纯 Python 解决方案，请使用`PyQt4.QtWebKit`来呈现页面。它的工作原理大致如下：

```
import sys
import signal

from optparse import OptionParser
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import QWebPage

url = "http://www.stackoverflow.com"

def page_to_file(page):
    with open("output", 'w') as f:
        f.write(page.mainFrame().toHtml())
        f.close()

app = QApplication()
page = QWebPage()
signal.signal( signal.SIGINT, signal.SIG_DFL )
page.connect(page, SIGNAL( 'loadFinished(bool)' ), page_to_file)
page.mainFrame().load(QUrl(url))
sys.exit( app.exec_() ) 
```

**编辑：**这里有一个很好的解释这是如何工作[的](http://blog.motane.lu/2009/07/07/downloading-a-pages-content-with-python-and-webkit/)。

Ps：您可能想查看[请求](https://github.com/kennethreitz/requests)而不是使用`urllib`:)

# jetspeed2 - 如何填充 PORTLET_APPLICATION 表

> ID：11645787
> 
> 赞同：0
> 
> 时间：2012-07-25T08:38:57.123
> 
> 标签：jetspeed2

PORTLET_APPLICATION 表如何在 jetspeed 中填充？

我的一个 Web 应用程序未部署，并且该应用程序不包含 jetspeed 表 PORTLET_APPLICATION 中的相应条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:02:39.693

没有条目 PORTLET_APPLICATION 表这意味着你的应用程序没有注册到 jetspeed。JetspeedContainerServlet 负责向 jetspeed 发送信号以部署您的应用程序。请将您的应用程序战争放在“jetspeed/WEB-INF/deploy”文件夹中。

在此之后，jetspeed 部署服务将添加容器 servlet 并将其移动到 webapps 文件夹。

# android - 将应用程序从 eclipse/adb 安装到 LG Optimus Hub 时出现“没有剩余空间”

> ID：11645795
> 
> 赞同：0
> 
> 时间：2012-07-25T08:39:24.890
> 
> 标签：android

运行调试时出现此错误：

```
[2012-07-25 14:53:49 - myprogram] Uploading myprogram.apk onto device '80A358688043073949'
[2012-07-25 14:54:12 - myprogram] Failed to install myprogram.apk on device '80A358688043073949': No space left on device
[2012-07-25 14:54:12 - myprogram] com.android.ddmlib.SyncException: No space left on device 
```

当此应用程序已安装在智能手机上时会弹出错误（调试 - 修复 smth - 再次调试）只有手动卸载以前的应用程序才有帮助。

我在我的 AndroidManifest 中指定了 android:installLocation="preferExternal"，但这并没有帮助（SD 卡有大量可用空间）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:35:38.880

即使您只使用外部设备，apk 也会使用内部存储来保存数据/dalvik 缓存等，您可以使用 link2SD，或者只是卸载一些其他未使用的 apk。

# objective-c - 在 ObjectiveC 中使用相机扫描 QRCode 或 BarCode

> ID：11645799
> 
> 赞同：2
> 
> 时间：2012-07-25T08:39:44.033
> 
> 标签：objective-c, qr-code, barcode-scanner

我想构建一个应用程序来扫描 QRCode 和 Barcode。我想使用相机扫描图像包含代码（QRCode 或 BarCode）但不拍照。现在我不知道该怎么做。
哪位大神，给个参考吧！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T08:40:52.747

你应该看看：http: [//zbar.sourceforge.net/](http://zbar.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:54:13.673

下载 ZBarSDK 并将其导入 pch 文件，然后使用此代码

```
// BarCodeView.h
@interface BarCodeView : UIViewController  < ZBarReaderDelegate > {
UIImageView *resultImage;
UITextView *resultText;
  }
@property (nonatomic, retain) IBOutlet UIImageView *resultImage;
@property (nonatomic, retain) IBOutlet UITextView *resultText;
- (IBAction) scanButtonTapped;

    // BarCodeView.m
  @synthesize resultImage, resultText;
   - (IBAction) scanButtonTapped
 {
NSLog(@"TBD: scan barcode here...");
// ADD: present a barcode reader that scans from the camera feed
ZBarReaderViewController *reader = [ZBarReaderViewController new];
reader.readerDelegate = self;
reader.supportedOrientationsMask = ZBarOrientationMaskAll;

ZBarImageScanner *scanner = reader.scanner;
// TODO: (optional) additional reader configuration here

// EXAMPLE: disable rarely used I2/5 to improve performance
[scanner setSymbology: ZBAR_I25
               config: ZBAR_CFG_ENABLE
                   to: 0];

// present and release the controller
[self presentModalViewController: reader
                        animated: YES];
[reader release];
  }
 - (void) imagePickerController: (UIImagePickerController*) reader didFinishPickingMediaWithInfo: (NSDictionary*) info
  {
// ADD: get the decode results
id<NSFastEnumeration> results =
[info objectForKey: ZBarReaderControllerResults];
ZBarSymbol *symbol = nil;
for(symbol in results)
    // EXAMPLE: just grab the first barcode
    break;

// EXAMPLE: do something useful with the barcode data
resultText.text = symbol.data;

// EXAMPLE: do something useful with the barcode image
resultImage.image =
[info objectForKey: UIImagePickerControllerOriginalImage];

// ADD: dismiss the controller (NB dismiss from the *reader*!)
[reader dismissModalViewControllerAnimated: YES];
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T03:12:09.160

最活跃的两个项目是[ZBar](http://zbar.sourceforge.net/)和[ZXing](https://code.google.com/p/zxing/)。

你没有提到你的目标是 iOS 还是 OS X。我不相信 ZBar 支持 OS X。ZXing 支持。我相信 ZBar 对一维代码的支持比 ZXing 基于 C++ 的端口更好。

（FWIW，我是 ZXing 的 C++/OS X/iOS 端口的积极贡献者。）

# mongodb - mongodb日志中的“fastmod”是什么意思

> ID：11645800
> 
> 赞同：3
> 
> 时间：2012-07-25T08:39:47.857
> 
> 标签：mongodb

我认为 fastmod 指定了一些操作，例如就地更新。在我的应用程序中，我正在使用 '$' 修饰符通过 _id 进行更新，例如：

```
$colleciton->update(
    array('_id' => $id),
    array(
        '$inc' => array('hits' => new MongoInt32(1)),
        '$set' => array(
                      'times.gen' => gettimeofday(true),
                      'http.code' => new MongoInt32(200)
         )
    ),
    array('safe'=>false,'multiple'=>false,'upsert'=>false)
); 
```

我有这样的日志：

```
Wed Jul 25 11:08:36 [conn7002912] update mob.stat_pages query: { _id: BinData } update: { $inc: { hits: 1 }, $set: { times.gen: 1343203715.684896, http.code: 200 } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:342973 342ms 
```

如您所见，在日志中我没有任何“fastmod”标志。没有“移动”标志，因为我在插入时设置了字段“times.gen”和“http.code”，所以填充因子为 1.0。

我做错了什么，还是我误解了 fastmod 的含义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:06:57.247

您是正确的，日志中的“fastmod”表示就地更新。省略记录的 fastmod/in-place 操作的一些可能原因：

1.  您实际上是在设置或增加一个不存在的字段，因此必须添加它，而不是就地操作
2.  日志只显示慢查询（默认 >100 毫秒），因此就地查询可能发生得太快而无法记录
3.  从日志来看，您似乎使用的是 2.1 或 2.2 - 如果/当您切换到新版本时，这些消息是否消失了？

就进一步研究而言：

查看[分析器](http://www.mongodb.org/display/DOCS/Database+Profiler#DatabaseProfiler-EnablingProfiling)，尝试使用不同的设置，注意：分析会增加负载 - 因此请谨慎使用。

您也可以尝试将 slowms 值设置得较低，无论是在启动时还是：

```
> db.setProfilingLevel(0,20) // slow threshold=20ms 
```

# python - pythons BIF zip() 和 unzip() 的项目顺序和类型转换

> ID：11645801
> 
> 赞同：0
> 
> 时间：2012-07-25T08:39:50.360
> 
> 标签：python, list

我有一个这样的列表列表：

```
a = d[:3]
>>> a
[[90, 26.7328829998, 131075.449348, 473898.809493],
 [90, 78.2985549184, 131116.812991,473929.491012],
 [90, 132.4760969, 131157.881628, 473964.821961]] 
```

要更改它的顺序，我将 BIF`zip`与`*`-operator 结合使用。这给了我一个元组列表：

```
>>> b =zip(*a)
>>> b
[(90, 90, 90),
 (26.7328829998, 78.2985549184, 132.4760969),
 (131075.449348, 131116.812991, 131157.881628),
 (473898.809493, 473929.491012, 473964.821961)] 
```

我不仅想恢复项目的原始顺序，例如：

```
>>> c = zip(*b)
>>> c
[(90, 26.7328829998, 131075.449348, 473898.809493),
 (90, 78.2985549184, 131116.812991, 473929.491012),
 (90, 132.4760969, 131157.881628, 473964.821961)] 
```

但也想取回原始类型，例如**list of lists**。但是这个技巧`zip(*list(b))`也没有`list(zip(*b))`（我没想到第二个片段会）。有谁知道如何在不遍历列表的情况下到达那里！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:42:21.963

`izip`返回一个生成器，因此您在创建时不会循环两次`c`。在 Python 3 `zip`(also `map`, `filter`, etc.) 中默认返回一个生成器并`izip`已被删除。

```
>>> from itertools import izip
>>> a = [[90, 26.7328829998, 131075.449348, 473898.809493], [90, 78.2985549184, 131116.812991,473929.491012], [90, 132.4760969, 131157.881628, 473964.821961]]
>>> b = zip(*a)
>>> c = map(list, izip(*b))
>>> c
[[90, 26.7328829998, 131075.449348, 473898.809493], [90, 78.2985549184, 131116.812991, 473929.491012], [90, 132.4760969, 131157.881628, 473964.821961]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:43:50.170

请尝试以下任一方法：

使用地图：

```
c = map(list, zip(*b)) 
```

或列表理解：

```
c = [list(i) for i in zip(*b)] 
```

# jquery - 即使页面上的某些内容无法加载，如何运行 $(window).load()

> ID：11645802
> 
> 赞同：0
> 
> 时间：2012-07-25T08:39:50.503
> 
> 标签：jquery

我正在`$(window).load()`根据页面加载时更改的各种其他高度来重新调整文本字段的最小高度。我的脚本工作正常，但是，如果页面上的另一个脚本无法加载（由于某种未知原因），`$(window).load()`则不会运行。

`$(window).load()`即使发生错误（可能使用），有没有办法让运行`.error()`，即绕过错误的脚本？

如果这有帮助，我当前的`load()`活动脚本如下：

```
$(window).load(function() { 
var imageArea = $('.imageArea').height();
var productDetail = $('.productDetail').height();
var productText = (imageArea - productDetail) - 110; //-110 is the height of another element
$('.productText').css('min-height', productText);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:44:47.133

如果您希望您的页面响应，您应该考虑在您的 CSS 中使用媒体查询和代码中的元视口标记。

对于您的图像，您可以将其添加到您的 CSS 中：

```
img {
    max-width: 100%;
    height: auto;
} 
```

一些浏览器需要更多帮助：

```
@media \0screen {
  img { 
    width: auto; /* for ie 8 */
  }
} 
```

* * *

其他文章：

*   [不同的背景图像取决于屏幕分辨率？](https://stackoverflow.com/questions/7699442/different-background-image-depending-on-screen-resolution)

与背景图像类似：

```
@media (min-width:800px) { background-image: url(bg-800.jpg) }
@media (min-width:1024px) { background-image: url(bg-1024.jpg) }
@media (min-width:1280px) { background-image: url(bg-1280.jpg) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:43:31.380

你可以试试：

```
window.onerror = function(){
    var imageArea = $('.imageArea').height();
    var productDetail = $('.productDetail').height();
    var productText = (imageArea - productDetail) - 110; //-110 is the height of another element
    $('.productText').css('min-height', productText);
} 
```

希望 jQuery 被加载...</p>

# asp.net-mvc-3 - 当点击提交按钮调试指向 [httpget] 而不是 [httppost]

> ID：11645804
> 
> 赞同：0
> 
> 时间：2012-07-25T08:39:59.097
> 
> 标签：asp.net-mvc-3

我使用 MVC3 创建了一个页面。我已经填写了所有细节，当我点击提交按钮时，它没有插入，只是回发，所有细节都丢失了。

这是控制器

```
[HttpGet]
public ActionResult MyAccountIndex()
{
    return View();
}

[HttpPost]
public ActionResult MyAccountIndex(MyAccount myacc)
{
    MyAccount ma = new MyAccount();
    var objview = ma.GetCustInfo(myacc);
    return View();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:23:34.030

将 View 中的表单更改为：

```
<form action="MyAccountIndex" method="POST">
    <input type="submit" />
</form> 
```

# java - 在没有#ifdef 预处理器的情况下定义一个变量

> ID：11645806
> 
> 赞同：1
> 
> 时间：2012-07-25T08:40:07.343
> 
> 标签：java

我有 C++ 背景。在我的 java 项目中间的某个地方，我需要定义一个变量，其类型取决于布尔值（我之前定义过）我可以这样做：

```
if(Main.NEW_STYLE)
            ArrayList<LogFileLine> lineBuffer = new ArrayList<LogFileLine>();
        else
            ArrayList<String> lineBuffer = new ArrayList<String>(); 
```

如果没有，请问有什么解决方案？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:43:16.307

您*可以*使用原始类型（仅`ArrayList`），但我**强烈**反对这种做法，因为原始类型的存在只是为了与前通用代码向后兼容。

适当的解决方案可能是将该列表封装到一个接口中并具有两个单独的实现类（并根据布尔值选择实现类）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:49:04.533

你可以这样做，但对你帮助不大。因为那些范围`ArrayList`是 if 语句的主体。

您可以执行以下操作：

```
ArrayList<Object> lineBuffer;
if(Main.NEW_STYLE) lineBuffer = new ArrayList<LogFileLine>();
else lineBuffer = new ArrayList<String>(); 
```

然后相应地投射你的对象。另一种方法是创建一个容器接口，然后它将是您的类型`ArrayList`：

```
ArrayList<LogInterface> lineBuffer = new ArrayList<LogInterface>();
lineBuffer.add(new LogInterface_LogFileLine(aLogFileLine));
lineBuffer.add(new LogInterface_String("lalelu")); 
```

然后，您将实现两个版本的`LogInterface`，一个持有`String`( `LogInterface_String`)，另一个持有`LogFileLine`( `LogInterface_LogFileLine`)。

但是，既然你命名了你的 boolean `NEW_STYLE`，我想它会在某个时候完全取代“旧风格”，所以我建议你做我的第一个建议。然后，您必须`if (Main.NEW_STYLE) ; else ;`在访问`lineBuffer`. 但是一旦你不再需要它，将旧东西踢出去会容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:43:28.367

Java 没有编译器预处理器。

我相信您正试图在此语句的末尾添加一个 ArrayList。所以你应该这样做：

```
ArrayList lineBuffer;
if (...)
    lineBuffer = new ArrayList<String>();
else
    lineBuffer = new ArrayList<LogFileLine>();

lineBuffer.add(something); 
```

但是`add`可能会导致运行时问题，所以你为什么不这样做

`ArrayList lineBuffer = new ArrayList<Object>()`

这基本上可以保留任何东西？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T08:42:36.227

我建议您创建一个接口来捕获您依赖的方法 from`String`和 from `LogFileLine`。调用它`LogLine`什么的，由两个不同的类实现，`StringLogLine`and `FileLogLine`，然后做

```
List<LogStyle> lineBuffer = new ArrayList<LogLine>(); 
```

# git - git aws.push 返回错误

> ID：11645807
> 
> 赞同：0
> 
> 时间：2012-07-25T08:40:14.523
> 
> 标签：git, amazon-web-services, amazon-elastic-beanstalk

我最近在 AWS 上注册了一个免费使用等级帐户，发现它的功能非常有用。这实际上是我第一次管理 Web 服务器，所以这对我来说是一个挑战，因为我从小就只是一名开发人员。我阅读了文档并被带到了弹性豆茎。我设法创建了我的第一个 PHP 应用程序。

但是，当我尝试将提交推送到我的网络应用程序时，总是出现 http 请求失败错误 400。我什至关注此线程上的用户交互[https://forums.aws.amazon.com/thread.jspa?messageID=332711Ꭷ](https://forums.aws.amazon.com/thread.jspa?messageID=332711&#332711)但也失败了。

我什至创建了一个仅限于 beanstalk 管理的新用户，将其访问权限和密钥复制到 aws.config。

看来我的所有凭据都是正确的，因为我没有看到任何“身份验证失败”错误，所以我认为这主要是在请求部分。

错误：请求的 URL 返回错误：访问时 400

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:41:24.887

您似乎遇到了身份验证失败，因为您的时钟与服务器不同步，导致您计算的签名无效。分钟似乎是正确的，但时间已关闭（未来 15 小时），这可能指向时区问题。

请验证您推送的系统上的时间和时区是否正确。

希望这可以帮助。

# c++ - 为什么要使用字符串的复制构造函数？

> ID：11645817
> 
> 赞同：2
> 
> 时间：2012-07-25T08:40:35.447
> 
> 标签：c++

我有以下代码：

```
class TestClass
{
public:
  TestClass(){};

  std::string GetTestString()
  {
    return (mTestString);
  }
  void SetTestString(const std::string& rTestString)
  {
    mTestString = rTestString;
  }

private:
  std::string mTestString;
};

TestClass* pGlobalVar;

void SomeFunction(TestClass MyClass)
{
  pGlobalVar->SetTestString("cba");
  std::cout << "Changed string:  " << pGlobalVar->GetTestString() << std::endl;
  std::cout << "Copied string:   " << MyClass.GetTestString() << std::endl;

}

int main()
{
  pGlobalVar = new TestClass();
  pGlobalVar->SetTestString("abc");
  std::cout << "Original string: " << pGlobalVar->GetTestString() << std::endl;
  SomeFunction(*pGlobalVar);
  delete (pGlobalVar);
} 
```

这将输出以下内容：

```
原始字符串：abc
更改字符串：cba
复制字符串：abc

```

由于我没有为我的类定义复制构造函数，我希望会制作一个平面副本，包括`std::string`. 显然，虽然使用了`std::string`复制构造函数，因为对原始字符串的更改并没有更改副本。

谁能向我解释为什么它没有制作平面副本？

我正在使用带有 GCC 4.4.6 的 Linux。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T08:45:08.280

> 由于我没有为我的类定义复制构造函数，我希望会制作一个平面副本

由于您没有定义复制构造函数，因此 C++ 为您做了。

自动生成的复制构造函数调用其所有成员变量（如果有的话）的构造函数。

类似地，自动生成的构造函数调用其所有成员的构造函数，而析构函数调用其所有成员的析构函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T08:46:28.710

> 由于我没有为我的类定义复制构造函数，因此我希望制作一个平面副本，包括 std::string 中的指针。

不，隐式生成的复制构造函数将使用其复制构造函数复制每个数据成员（和基本子对象）（如果有的话）。

> 谁能向我解释为什么它没有制作平面副本？

因为那会被严重破坏。一个类定义了一个复制构造函数，因为它必须以某种方式被复制；在 的情况下`std::string`，它必须创建一个新的缓冲区。如果新字符串只是简单地保存了对方指针的副本，那么两者都会认为他们拥有相同的缓冲区，并且在它们被销毁时都会尝试释放它。

# php - Python 等价于 PHP 的 date()

> ID：11645818
> 
> 赞同：2
> 
> 时间：2012-07-25T08:40:42.420
> 
> 标签：php, python

对于简单的格式，很容易找到等价物

PHP：

```
date("Y-m-d") === "2012-07-25"; 
```

Python：

```
date.strftime("%Y-%m-%d") == "2012-07-25" 
```

但是 Python 的等价物是什么

```
date("jS F Y") === "25th July 2012"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:51:11.367

恐怕我认为您必须自己解决后缀：

```
>>> t = time.localtime()
>>> suffix = 'st' if t.tm_mday in [1,21,31] else 'nd' if t.tm_mday in [2, 22] else 'rd' if t.tm_mday in [3, 23] else 'th'
>>> time.strftime('%d%%s %B %Y', t) % suffix
'25th July 2012' 
```

对于编程语言功能来说，它有点以英语为中心，所以你可以看到为什么他们没有包含它。

*编辑为第 3 和第 23 增加了“rd”后缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:51:47.707

标准库仅支持[标准 C 库 strftime 格式代码](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)，在本地化方面相当薄弱。`%B`为您提供程序正在运行的语言环境中的完整月份名称；如果这是英语语言环境，它会给您“April”，但如果您在法国计算机上运行，​​它也可以给您“Avril”。

对于 Web 应用程序，您确实希望使用像[Babel](http://babel.edgewall.org/)这样的外部库来代替；Babel 为您提供了额外的例程来格式化`datetime`不同语言的 python 实例：

```
>>> from babel.dates import format_date
>>> format_date(d, format='long', locale='en')
u'April 1, 2007' 
```

where`format='long'`被定义为特定于语言的模式。

Babel 使用[Unicode 语言环境数据标记语言](http://unicode.org/reports/tr35/#Date_Format_Patterns)来定义这些模式，让您可以访问为您定义这些模式的大型预定义语言环境库。请注意，[语法正确的方法是在格式化日期时使用基数，*而不是*](http://grammar.quickanddirtytips.com/writing-dates.aspx)序数；英式英语允许序数日期和基数日期。因此，Unicode 标准不包括日期的序号后缀。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T08:51:01.540

```
import datetime
print datetime.datetime.now().strftime("%dth %B %Y") 
```

有关更多详细信息，请参阅 [http://docs.python.org/library/datetime.html#strftime-strptime-behavior](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)

# mysql - 如何从 VBA 向 MySQL 发送大请求

> ID：11645820
> 
> 赞同：0
> 
> 时间：2012-07-25T08:40:50.750
> 
> 标签：mysql, excel, vba, adodb

我在 VBA 中使用 ADODB 向我的 MySQL 服务器发送请求。

```
conn.Open
conn.Execute Command
conn.Close 
```

它适用于小请求，但是当 Command 的大小大于 255 个字符时，它会被截断为前 255 个字符。

有某种限制吗？有没有办法扩展它？

有没有更有效的方式向 MySQL 发送大型查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:30:03.040

使用 MySQL ODBC 驱动程序 5.1.11 我已经向 MySQL 发送了几个长度超过 1024 字节的命令，没有任何问题。您正在运行什么版本的 ADODB，您将“命令”变量定义为什么？

# asp.net - 提供程序：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例

> ID：11645822
> 
> 赞同：0
> 
> 时间：2012-07-25T08:40:54.953
> 
> 标签：asp.net, visual-studio-2008, sql-server-express, mdf

我有一个 asp .net 2.0 web 应用程序。它在我的本地机器上运行良好。我将该网站发布给了我的托管服务提供商，但它给出了以下错误：

```
A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified) 
```

我的 web.config 文件中的设置如下：

```
 <membership>
  <providers>
    <clear/>
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="LocalSqlServer" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="true" applicationName="/" requiresUniqueEmail="true" passwordFormat="Hashed" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="7" minRequiredNonalphanumericCharacters="1" passwordAttemptWindow="10" passwordStrengthRegularExpression=""/>
  </providers>
</membership> 
```

和

```
<add name="classifiedsConnection" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\CLASSIFIEDSDB.mdf;Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient"/> 
```

所有 mdf ldf 文件都上传到主机。我在 stackoverflow 上检查了许多类似的问题，但解决方案对我没有帮助。以这种方式使用 sqlexpress 有错吗？我该如何解决这个问题？

任何帮助将不胜感激。谢谢，谢谢。

编辑：

web.config 文件中没有 LocalSQLServer 连接字符串。但要确保我尝试添加此连接字符串

```
<add name="LocalSqlServer" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\ASPNETDB.MDF;Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient"/> 
```

但结果没有改变。

编辑2：

我更新了提供者的连接字符串，现在我的 web.config 文件如下：

```
<?xml version="1.0"?>
<configuration xmlns="http://schemas.microsoft.com/.NetConfiguration/v2.0">
  <location path="Admin">
    <system.web>
      <authorization>
        <allow roles="Administrators"/>
        <deny users="*"/>
      </authorization>
    </system.web>
  </location>
  <location path="PostAd.aspx">
    <system.web>
      <authorization>
        <deny users="?"/>
      </authorization>
    </system.web>
  </location>
  <location path="EditPhotos.aspx">
    <system.web>
      <authorization>
        <deny users="?"/>
      </authorization>
    </system.web>
  </location>
  <location path="MyAds.aspx">
    <system.web>
      <authorization>
        <deny users="?"/>
      </authorization>
    </system.web>
  </location>
  <location path="MyProfile.aspx">
    <system.web>
      <authorization>
        <deny users="?"/>
      </authorization>
    </system.web>
  </location>
  <system.web>
    <customErrors mode="Off"/>
    <pages styleSheetTheme="Red"/>
    <authentication mode="Forms"/>
    <membership>
      <providers>
      <clear/>
      <add name="AspNetSqlMembershipProvider"
           type="System.Web.Security.SqlMembershipProvider, System.Web,     Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
           connectionStringName="membershipConnection"
           enablePasswordRetrieval="false"
           enablePasswordReset="true"
           requiresQuestionAndAnswer="true"
           applicationName="/"
           requiresUniqueEmail="true"
           passwordFormat="Hashed"
           maxInvalidPasswordAttempts="5"
           minRequiredPasswordLength="7"
           minRequiredNonalphanumericCharacters="1"
           passwordAttemptWindow="10"
           passwordStrengthRegularExpression=""/>
    </providers>
    </membership>
    <profile enabled="true">
      <properties>
        <add name="FirstName" type="System.String"/>
        <add name="LastName" type="System.String"/>
        <add name="MemberId" defaultValue="0" type="System.Int32"/>
        <group name="Core"/>
      </properties>
    </profile>
    <roleManager enabled="true"/>
    <compilation debug="true"/>
    <siteMap defaultProvider="RoleEnabled_AspNetXmlSiteMapProvider" enabled="true">
      <providers>
        <clear/>
        <add name="RoleEnabled_AspNetXmlSiteMapProvider" type="System.Web.XmlSiteMapProvider, System.Web, Version=2.0.3600.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" siteMapFile="web.sitemap" securityTrimmingEnabled="true"/>
      </providers>
    </siteMap>
  </system.web>
  <connectionStrings>
    <add name="classifiedsConnection" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\CLASSIFIEDSDB.mdf;Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient"/>
<add name="membershipConnection" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\ASPNETDB.mdf;Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient"/>
  </connectionStrings>      
</configuration> 
```

我在可能的 app_data 文件夹中有 aspnetdb.mdf 和分类文件.mdf 文件，但它仍然无法正常工作。我得到的错误的全文是：

*`A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)`"*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T04:39:32.667

@BrianR 的建议很好（成员资格配置指向一个不存在的连接字符串）。

但是，除此之外，这个问题对于您的托管服务提供商来说实在太具体了，因此与堆栈溢出无关。*您应该通过技术支持直接联系您的托管服务提供商。*

您看到的错误意味着 IIS/ASP.net 找不到 SqlServer。这将是您的连接字符串或主机 Web 服务器配置错误的结果。这就是为什么这个问题特定于您的主机，不适用于可能通过谷歌找到这个问题的其他用户。不同的主机会有所不同。

*   一些主机将安装完整的 SqlServer，一些主机将安装 SqlExpress。完整版 SqlServer 不使用相同的默认实例名称安装，可能存在其他配置差异。
*   出于安全原因或其他系统管理原因，某些主机可能会从默认值（如“SQLEXPRESS”）更改实例名称。（即使安装了SqlExpress，也不一定意味着可以通过'./SQLEXPRESS'访问）
*   一些主机使用独立的数据库服务器（与您的网站不在同一个 windows 服务器实例上），您可能需要包含机器路径、IP 地址、端口号、安全凭据或其他详细信息才能访问它。如果是这种情况，您的房东会向您提供此信息。有时它会记录在案，一些较小的主机可能会要求您提交支持票（如果有疑问，请获取支持票！）。

由于从一台主机到另一台主机的这些潜在配置差异，您确实需要联系他们。您可能为此目的提供了技术支持！

## 编辑#1

您对问题的后续编辑并未更改上述信息。您仍然遇到提示您无法连接到 SqlServer 的错误。您仍然需要向**您的托管服务提供商**验证是否安装了 SqlExpress，您是否具有访问 SqlServer 的正确凭据/权限，并且您的两个数据库文件确实存在于具有正确权限的正确位置。

即使您的数据库架构不正确，您也不会收到此特定错误。所以它必须与SqlServer/SqlExpress的配置、你的数据文件和你的web/config有关。这些设置特定于您的主机，而不是通常可以在 stackoverflow 上回答的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T21:00:39.430

在您的会员提供者信息中，您需要将 connectionStringName 更改为“classifiedsConnection”。还要确保您的 CLASSIFIEDSDB.mdf 文件实际上位于主机上的 App_Data 文件夹中。

```
<membership defaultProvider="AspNetSqlMembershipProvider">
   <providers>
      <clear/>
      <add name="AspNetSqlMembershipProvider"
           type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
           connectionStringName="classifiedsConnection"
           enablePasswordRetrieval="false"
           enablePasswordReset="true"
           requiresQuestionAndAnswer="true"
           applicationName="/"
           requiresUniqueEmail="true"
           passwordFormat="Hashed"
           maxInvalidPasswordAttempts="5"
           minRequiredPasswordLength="7"
           minRequiredNonalphanumericCharacters="1"
           passwordAttemptWindow="10"
           passwordStrengthRegularExpression=""/>
    </providers>
</membership> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T21:09:05.193

您的托管服务提供商可能没有安装 SQLExpress。（SQLExpress 不是 dot.net 框架的一部分，它是一个不同的产品。）

# android - 从数据库显示列表视图时出错

> ID：11645823
> 
> 赞同：0
> 
> 时间：2012-07-25T08:40:56.930
> 
> 标签：android, database, sqlite, android-listview

我试图从数据库中显示一个列表视图项目。但我的应用程序不断崩溃。我使用我过去的项目代码来指导我，但仍然没有运气。

**模块.java**

```
 @Override
protected void onResume() {
    super.onResume();
    ArrayList<String> labels = new ArrayList<String>();
    ListView lstDine = (ListView) this.findViewById(R.id.lst_module);
    dbhelper.onCreate(null);
    Cursor dinners = (Cursor) dbhelper.getAllLabels();
    dinners.close();
    lstDine.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, labels));
    lstDine.setOnItemClickListener(this);

} 
```

**DBHelper.java**

```
public class DBHelper extends SQLiteOpenHelper {
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "spinnerExample";

// Labels table name
private static final String TABLE_LABELS = "labels";

// Labels Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";

public DBHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    // Category table create query
    String CREATE_CATEGORIES_TABLE = "CREATE TABLE " + TABLE_LABELS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT)";
    db.execSQL(CREATE_CATEGORIES_TABLE);
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_LABELS);

    // Create tables again
    onCreate(db);
}

/**
 * Inserting new lable into lables table
 * */
public void insertLabel(String label){
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, label);

    // Inserting Row
    db.insert(TABLE_LABELS, null, values);
    db.close(); // Closing database connection
}

/**
* Removing label
* */
public void removeLabel(String label){
SQLiteDatabase db = this.getWritableDatabase();

ContentValues values = new ContentValues();
values.put(KEY_NAME, label);

// Removing Row
db.delete(TABLE_LABELS, KEY_NAME + "=?", new String[] {label});
db.close(); // Closing database connection
}

/**
 * Getting all labels
 * returns list of labels
 * */
public List<String> getAllLabels(){
    List<String> labels = new ArrayList<String>();

    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_LABELS;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            labels.add(cursor.getString(1));
        } while (cursor.moveToNext());
    }

    // closing connection
    cursor.close();
    db.close();

    // returning lables
    return labels;
}
} 
```

**错误日志**

```
07-25 08:36:37.007: D/dalvikvm(463): GC_EXTERNAL_ALLOC freed 600 objects / 48072 bytes in 58ms
07-25 08:36:40.347: D/dalvikvm(463): GC_EXTERNAL_ALLOC freed 321 objects / 15992 bytes in 104ms
07-25 08:36:42.907: D/AndroidRuntime(463): Shutting down VM
07-25 08:36:42.907: W/dalvikvm(463): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
07-25 08:36:42.937: E/AndroidRuntime(463): FATAL EXCEPTION: main
07-25 08:36:42.937: E/AndroidRuntime(463): java.lang.RuntimeException: Unable to resume activity {sg.edu.tp.iit.mns/sg.edu.tp.iit.mns.Module}: java.lang.NullPointerException
07-25 08:36:42.937: E/AndroidRuntime(463):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3128)
07-25 08:36:42.937: E/AndroidRuntime(463):  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3143)
07-25 08:36:42.937: E/AndroidRuntime(463):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2684)
07-25 08:36:42.937: E/AndroidRuntime(463):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-25 08:36:42.937: E/AndroidRuntime(463):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-25 08:36:42.937: E/AndroidRuntime(463):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-25 08:36:42.937: E/AndroidRuntime(463):  at android.os.Looper.loop(Looper.java:123)
07-25 08:36:42.937: E/AndroidRuntime(463):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-25 08:36:42.937: E/AndroidRuntime(463):  at java.lang.reflect.Method.invokeNative(Native Method)
07-25 08:36:42.937: E/AndroidRuntime(463):  at java.lang.reflect.Method.invoke(Method.java:521)
07-25 08:36:42.937: E/AndroidRuntime(463):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-25 08:36:42.937: E/AndroidRuntime(463):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-25 08:36:42.937: E/AndroidRuntime(463):  at dalvik.system.NativeStart.main(Native Method)
07-25 08:36:42.937: E/AndroidRuntime(463): Caused by: java.lang.NullPointerException
07-25 08:36:42.937: E/AndroidRuntime(463):  at sg.edu.tp.iit.mns.DBHelper.onCreate(DBHelper.java:36)
07-25 08:36:42.937: E/AndroidRuntime(463):  at sg.edu.tp.iit.mns.Module.onResume(Module.java:50)
07-25 08:36:42.937: E/AndroidRuntime(463):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149)
07-25 08:36:42.937: E/AndroidRuntime(463):  at android.app.Activity.performResume(Activity.java:3823)
07-25 08:36:42.937: E/AndroidRuntime(463):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3118)
07-25 08:36:42.937: E/AndroidRuntime(463):  ... 12 more 
```

我不确定哪个部分出了问题。感谢您的帮助。如果您可以为我编辑代码，我们将不胜感激。我已经有好几次头疼了。由于这个原因，我无法继续进行下一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:48:15.960

```
dbhelper.onCreate(null); 
```

**在上面的行中，您传递的是空引用，因此您得到了由以下原因** ***引起的：***

```
java.lang.NullPointerException
07-25 08:36:42.937: E/AndroidRuntime(463):  at sg.edu.tp.iit.mns.DBHelper.onCreate(DBHelper.java:36) 
```

你可以传递**DBHelper**类对象

```
dbhelper.onCreate(dbhelper); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:55:58.923

首先，您应该打开数据库 - 您将获得数据库中的数据：

```
db=openOrCreateDatabase(DATABASE_NAME, MODE_WORLD_WRITEABLE, null); 
```

# php - 在 htaccess apache 服务器中压缩 html 网站（未启用 mod_delflate）托管服务器不会这样做）

> ID：11645826
> 
> 赞同：0
> 
> 时间：2012-07-25T08:41:04.800
> 
> 标签：php, apache, .htaccess

我在压缩我的 html 网站时遇到问题。我已经和我的托管公司谈过了，询问是否启用了 mod_gzip 和/或 Apache 模块 mod_deflate。他们的回复 他们没有安装，没有 - 因为我们的主机是围绕 PHP 设计的，所以我们宁愿花费 CPU 时间来执行它而不是压缩输出。我也尝试在我的网页顶部添加它，但没有任何反应

```
<?php
ob_start("ob_gzhandler");
?> 
```

我不是程序员，但我知道如何编辑 .htaccess 和网页。

任何人都可以建议压缩我的网站以获得更好的加载时间的最佳方法，我使用了 pagespeed 并且压缩似乎是一个主要因素。我什至考虑过更换托管公司。

任何急需的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:06:55.920

使用`ob_start`可以做到，但更可靠的方法是使用`php.ini`文件。该文件将包括以下内容。这只有`zlib`在服务器上启用时才有效，大多数都有。

```
; Enable GZIP compression at the default level
zlib.output_compression = On
zlib.output_compression_level = 6 
```

# python - 在 Python 中使用正则表达式从字符串中提取 IP 和单词

> ID：11645832
> 
> 赞同：-1
> 
> 时间：2012-07-25T08:41:16.883
> 
> 标签：python, regex

如何使用 Python 正则表达式从以下字符串中提取单词`Connected`和。`14.10.9.24`

输入：

```
Connected,abc,hhjj,kkll,14.10.9.24,out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:47:31.720

用逗号分割并取数组的第一个和第五个元素，假设输出的格式总是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:48:49.377

以下应该做的工作：

```
^(connected)(,\w+)+,([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})(,\w+)$/im 
```

必填字段位于第 1 组和第 3 组中。

[演示](http://regexr.com?31ko8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:45:48.787

`str.split`使用和`operator.itemgetter`...的示例：

```
from operator import itemgetter

line = 'Connected,abc,hhjj,kkll,14.10.9.24,out'

word, ip = itemgetter(0, 4)(line.split(',')) 
```

# c++ - 在 C++ 中替换删除，错误信息

> ID：11645834
> 
> 赞同：9
> 
> 时间：2012-07-25T08:41:29.413
> 
> 标签：c++, replace, delete-operator, static-cast

我正在尝试（并已解决）包含 SSE 优化成员的类的 16 字节对齐问题。但困扰我的是我在网上找到的大部分示例都包含一行代码，在我看来这些代码完全是多余的，但在许多地方却重复出现。

```
public:
void* operator new (size_t size)throw (std::bad_alloc)
{
    void * p = _aligned_malloc(size, 16);
    if (p == 0)  throw std::bad_alloc();
    return p; 
}

void operator delete (void *p)
{
    Camera* pC = static_cast<Camera*>(p);
    _aligned_free(p);
} 
```

有问题的行是

```
Camera* pC = static_cast<Camera*>(p); 
```

由于 pC 从未被引用并且在函数末尾超出范围，那么这样做有什么意义呢？我试过把这条线拿出来，它似乎根本没有什么区别，但这条线出现在很多例子中！我是否遗漏了一些非常明显的东西，或者是否有异常的代码行被盲目地从一个示例复制到另一个示例，并在许多“教程”中变得普遍？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:07:23.427

一旦进入析构函数，对象就结束了它的生命周期，所以你不能用这个指针做很多事情。该行`Camera* pC = static_cast<Camera*>(p);`可以安全地删除，它存在于教程中的唯一原因是许多人只是在这里和那里复制粘贴代码，而没有真正考虑它是如何工作的。

干净且正确的代码`delete()`如下所示：

```
void operator delete (void *p)
{
    _aligned_free(p);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:54:17.810

正如您对问题的许多评论中所讨论的那样，以下行确实是多余的：

```
Camera* pC = static_cast<Camera*>(p);  // Just an unused variable 
```

即使`p`是 之前的类型`Camera*`（其他可能性是子类，如`Canon*`, `Sony*`, `Nikon*`），您仍然无法对 做太多事情`pC`，因为`Camera::~Camera()`应该已经调用了 。`operator delete`之后调用。

PS：我还没有遇到过这种将指针指向特定类的做法，但是如果您在教程中遇到这样的建议，那么您可能需要更改它。

# php - 用于警报功能的php javascript与字符串之间的连接

> ID：11645838
> 
> 赞同：0
> 
> 时间：2012-07-25T08:41:36.183
> 
> 标签：php, javascript, alert

我正在为用户进行社交网络工作。像脸书。或推特。到目前为止，我有这段代码，让我告诉你我想要做什么。

```
 <button id="welcome">Welcome user</button>
 <?php
     function dal(){
         alert("Hello user, welcome to my big social network")
     }
 ?> 
```

我做这样的javascript

```
 <script>
     document.byID('welcome').onclick = dal();
 </script> 
```

代码目前不工作。

如果你有任何建议，我真的很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:44:53.403

删除 php 并将其写在`script`标签内

```
<script> 
window.addEventListener("DOMContentLoaded",
  function(){ 
    document.getElementById('welcome').onclick=dal;
  },false);
function dal(){
  alert("Hello user, welcome to my big social netowkr")
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:45:35.167

您不能在 javascript 中调用 php 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T08:46:06.320

```
 <button id="welcome" onclick="dal()">Welcome user</button>

<script type="text/javascript">
  function dal()
  {
    alert("Hello user, welcome to my big social network")
  }
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T08:46:22.283

这个问题确实需要改写。老实说，我不知道从哪里开始纠正错误……但是，要使警报对您的按钮起作用，您需要以下内容：

```
<button id="welcome">Welcome user</button>

<script>
  document.getElementbyID('welcome').onclick = function(){
   alert("Hello user, welcome to my big social network");
  }

 </script> 
```

你也不能在 JavaScript 中调用或访问 PHP。

请注意邮件中的拼写`alert`错误

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T09:06:58.513

在头部而不是内联中不显眼地添加处理程序被认为是最佳实践

我建议

```
<?php ... ?>
<html>
<head>
<script>
window.onload=function() {
  document.getElementById('welcome').onclick=function() {
     alert("Hello user, welcome to my big social network")
  }
}
</script>
</head>
<body>
<div id="content">
  <button id="welcome">Welcome user</button>
</div>
</body>
</html> 
```

# java - 在运行时动态输入类文字作为方法参数

> ID：11645841
> 
> 赞同：1
> 
> 时间：2012-07-25T08:42:02.420
> 
> 标签：java, json, jackson

我有一个使用外部库（杰克逊）的应用程序，我需要的方法需要一个类文字作为参数。因此，如果我希望将我的 JSON 字符串解析为 User 对象：

```
ObjectMapper mapper = new ObjectMapper();
User user = mapper.readValue(new File("user.json"), User.class); 
```

现在，我希望动态地使用此方法（即使用同一行代码解析不同的 JSON 字符串）。例如：

```
String json1 = "{"type":"jacket",...}";
String json2 = "{"type":"sweater",...}";

Object object = mapper.readValue(json1/json2, ???); 
//returns a Jacket object OR Sweater object based on the "type" key
//i.e. use Jacket.class as the 2nd argument if "type" is "jacket"
//OR Sweater.class if "type" is "sweater"

//After getting the deserialized object,
//if object is Jacket, cast as a Jacket
//if object is Sweater, cast as a Sweater 
```

当然，有问题的 JSON 字符串可以用于*任何*类，所以我不能简单地硬编码 if-else 循环。我已经查看了自定义序列化程序，但坦率地说，我对它在谈论什么感到很迷茫，并且希望得到一些帮助来解决这个问题。

总之，我需要一些方法来首先从 String 定义一个类文字，然后将生成的 Object 转换为特定的类（但我的重点是`readValue`动态地工作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:02:27.497

看起来您需要在 JSON 类型变量和 Java 类类型之间进行映射。

通常结果应该是这样的地图：

```
Map<String, Class<? extends YourSupertype>> map = new HashMap<>();
map.put("sweater", Sweater.class);
map.put("jacket", Jacket.class); 
```

只需将可能的服装类型存储在文件中的某个位置，然后执行以下操作：

```
String clothingType = nextEntryFromFile();
String className = constructClassNameFromClothingType(clothingType);
map.put(clothingType, Class.forName(className)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:28:16.677

由于版本 1.5 Jackson 支持多态类型处理，请在此处查看[http://www.cowtowncoder.com/blog/archives/2010/03/entry_372.html](http://www.cowtowncoder.com/blog/archives/2010/03/entry_372.html) 有关于在这些情况下如何正确处理反序列化的示例。

# php - 实时服务器上的 406 Not Acceptable 错误 - JSON

> ID：11645844
> 
> 赞同：0
> 
> 时间：2012-07-25T08:42:07.603
> 
> 标签：php, json, .htaccess, http-headers

我刚刚移动了一个站点，并且在使用 jquery 向 php 脚本发出 ajax 请求时收到 406 Not Acceptable 错误。我的测试服务器上没有出现错误，所以我只是想找出解决此问题的正确方法。AJAX 请求如下，并期望 JSON 响应，而我的 php 脚本只是用`json_encode()`.

```
$.ajax({
        type: "POST",
        contentType: "application/json",
        data: "{}",
        url: "server/php/progress.php",
        dataType: "json", 
```

编辑：这是我的 php 脚本的症结所在（也尝试过不设置标题）：

```
header('Content-type: application/json');
echo json_encode($val);
exit; 
```

关于应该做些什么来解决这个问题的任何想法？htaccess 指令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:03:39.950

不可接受将基于 Accept、Accept-Charset、Accept-Language 标头触发。因此，如果您的代码相同，则很可能那里打开了与内容协商相关的一些设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:21:18.813

啊。只需将其切换到 GET 即可解决问题。我不确定我到底为什么要使用 POST 进行检索。

仍然不确定为什么问题没有发生在我的本地 wamp 服务器上，某些地方的 apache 设置有所不同。

# java - 我如何在 Jboss AS 7 上查看来自 DLQ 的消息？

> ID：11645850
> 
> 赞同：2
> 
> 时间：2012-07-25T08:42:35.370
> 
> 标签：java, jboss7.x, hornetq

我正在使用 Jboss AS 7.1.1，我需要查看 DLQ（死信队列）中的消息。

我尝试为它编写一个简单的 MDB：

```
@MessageDriven(messageListenerInterface = MessageListener.class, activationConfig = {
        @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
        @ActivationConfigProperty(propertyName = "destination", propertyValue = "java:/queue/DLQ"),
        @ActivationConfigProperty(propertyName = "maxSession", propertyValue = "1") })
public class DLQMDB implements MessageListener{
public void onMessage(Message message) {
    try {
        process(message);
    } ...
}
} 
```

我编写了另一个引发错误的 MDB，因此消息将对 DLQ 执行，但从未触发 DLQ MDB。

不知道是不是因为DLQ中没有消息还是MDB定义不正确。

我究竟做错了什么？是否有另一种方式来查看 DLQ 中的消息（如日志记录、管理界面）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:05:18.667

终于让它工作了，我有一个配置问题：

```
<address-setting match="jms.queue.MetricEvents">
      <dead-letter-address>jms.queue.MyQueue</dead-letter-address>
      <expiry-address>jms.queue.ExpiryQueue</expiry-address>
      <redelivery-delay>0</redelivery-delay>
      <max-delivery-attempts>0</max-delivery-attempts>
      <max-size-bytes>10485760</max-size-bytes>
      <address-full-policy>BLOCK</address-full-policy>
      <message-counter-history-day-limit>10</message-counter-history-day-limit>
 </address-setting> 
```

一旦我删除：

```
<max-delivery-attempts>0</max-delivery-attempts> 
```

一切正常。

# algorithm - 有没有标签匹配算法？

> ID：11645851
> 
> 赞同：4
> 
> 时间：2012-07-25T08:42:38.417
> 
> 标签：algorithm, search, data-structures, tags

我的系统类似于stackoverflow。基本上，一个帖子可以有多个标签，并且有一个搜索功能可以找到与查询标签匹配的帖子（所有标签必须匹配）

我想知道是否有任何算法/数据结构可以有效地解决帖子标记/搜索问题？就速度（时间复杂度）而言，哪一个效率最高？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:52:55.897

在过去，我没有为此使用任何专门的 DS。事实上，如果你想用 RDBMS 来做这件事，请阅读[Wordpress 如何使用分类法做这件事](http://codex.wordpress.org/Taxonomies)的详细信息。大多数情况下，您将拥有一个单独的标签表，然后各个帖子可以链接多个标签（使用键）。

另一种流行的方法是将您的问题视为一个刻面问题。您必须使用全文索引框架并在此基础上开发分面浏览。[这是来自 Lucene/Solr 的创建者的一篇出色的文章，](http://www.lucidimagination.com/devzone/technical-articles/faceted-search-solr)它解释了这种情况。有了分面浏览，您将能够显示 stackoverflow 所做的一些事情：

```
algorithm × 21165
search × 8863
data-structures × 5867
tags × 2886
stackoverflow × 721 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:52:36.607

存储此类数据以进行搜索的最省时的方法通常是在[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)中。这也恰好是最常见的搜索引擎/信息检索系统所围绕的内容。

对于这个的实际实现，我建议你看看[Apache Lucene](http://lucene.apache.org)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-15T10:47:25.673

对于这个问题，答案是肯定的。我正在开发一个学生内部网作为我的作业项目，实现的算法因数据库设计而异。

在我的例子中，有一个算法用大约 140 行编码。

```
tag     (tagID*, tagName)
tagMap  (tagSetID*, tagID*)
tagSet  (tagSetID*)
announce    (announceID*, tagSetID, title, content) 
```

如上所述，我自己开发了多个标签匹配算法。以防万一认为我的算法不够高效，现在我意外地了解了@joel 和@abhinav 提到的倒排索引。

# ruby-on-rails-3 - 使用 Railties 将路由从 gem 注入到 rails 3 routes.rb（设计问题）

> ID：11645852
> 
> 赞同：4
> 
> 时间：2012-07-25T08:42:46.610
> 
> 标签：ruby-on-rails-3, gem, railtie

我想使用 railtie 自动注入从我的 gem 到主机应用程序的路由。到目前为止，我有这样的事情：

```
module Fabes
  class FabesRailtie < ::Rails::Railtie
    ActionController::Base.send :include, Fabes::Helper
    ActionController::Base.helper Fabes::Helper

    initializer 'fabes.routes', after: :after_initialize do |app|
      app.routes.draw do
        match '/fabes' => Fabes::Admin, as: :fabes_admin
      end
    end
  end
end 
```

这是有效的（正在从主机应用程序调用）但是当我尝试访问`/fabes`路由或仅列出路由时，它因设计错误而失败：

```
fuzzyalej@fuzzyalej:~/code/fabes-rails-example (master *)$ rake routes --trace
** Invoke routes (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
undefined method `failure_app=' for nil:NilClass
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/devise-2.1.2/lib/devise.rb:406:in `configure_warden!'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/devise-2.1.2/lib/devise/rails/routes.rb:20:in `finalize_with_devise!'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/routing/route_set.rb:261:in `draw'
/Users/fuzzyalej/code/fabes/lib/fabes/railtie.rb:7:in `block in <class:FabesRailtie>'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `run'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:55:in `block in run_initializers'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `each'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:136:in `initialize!'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/fuzzyalej/code/fabes-rails-example/config/environment.rb:5:in `<top (required)>'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `block in require'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:103:in `require_environment!'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:292:in `block (2 levels) in initialize_tasks'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/bin/rake:23:in `load'
/Users/fuzzyalej/.rbenv/versions/1.9.3-p194/bin/rake:23:in `<main>'
Tasks: TOP => routes => environment 
```

我不知道我是否可以像这样直接注入路由，或者我必须使用生成器..

对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T22:54:13.633

在您的 gem 的 route.rb 文件中定义您的路线，然后安装引擎是在这种情况下要走的路。

“官方指南”： [http ://edgeguides.rubyonrails.org/engines.html](http://edgeguides.rubyonrails.org/engines.html)

当然，还有一个 RailsCast 剧集涵盖了您可能需要的内容： [http ://railscasts.com/episodes/277-mountable-engines](http://railscasts.com/episodes/277-mountable-engines)

希望这可以帮助。

# java - java - 如何在多台机器上分发Java程序？

> ID：11645853
> 
> 赞同：1
> 
> 时间：2012-07-25T08:42:55.243
> 
> 标签：java, distributed-computing

我用java编写了一个处理大数据的代码。我想将其分发给多台机器以处理部分数据并更快地完成处理。我以前从未从事过分布式计算。有没有工具可以完成这项工作？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:54:41.010

[Gridgain](http://www.gridgain.org)工作得相当好。[Hadoop](http://hadoop.apache.org/)是一个伟大的，但需要更多的开发。[Hazelcast](http://www.hazelcast.com)可能是一个很好的局外人

我也可以引用其他人，但如果不知道涉及哪些类型的数据和处理，很难回答您的问题。进程是 I/O 密集型还是 CPU 密集型？

问题之一是“您的数据集有多大？”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:48:10.220

好像你想做一个[map-reduce](http://en.wikipedia.org/wiki/MapReduce)算法。

[Hadoop](http://hadoop.apache.org/ "Hadoop")是一个开源项目，它提供了一个框架来做到这一点。

# gdb - 使用 gdb 进行调试：为什么 this=0x0？

> ID：11645857
> 
> 赞同：4
> 
> 时间：2012-07-25T08:43:05.880
> 
> 标签：gdb

我正在使用 gdb 来调试程序。我看到的有点奇怪：

```
(gdb) bt

0xb59656f8 in globalCallStubClass::addCallContext (**this=0x0**)
    at /ccase_enodeb/callp/build_callp/src/test/framework/shared/src/shared_call_context.cc:1962

0xb5b52e64 in rrcStubClass::process_scenario_spontaneous_trigger_RRC_CONNECTION_REQUEST (gcppMsgCtx=...)
    at /ccase_enodeb/callp/build_callp/src/test/framework/rrc/src/rrc_connection_request.cc:90

0xb6c3be4c in Gcpp::routeMessage (this=0xb392e9d0) at /ccase_enodeb/callp/build_callp/src/callp_services/gcpp/src/gcpp.cc:1095

0xb6c3b3b0 in Gcpp::loop (this=0xb392e9d0, Default_Method_Ptr=0)
    at /ccase_enodeb/callp/build_callp/src/callp_services/gcpp/src/gcpp.cc:925

0xb58d2ae0 in stubBthdEntryPoint () at /ccase_enodeb/callp/build_callp/src/test/framework/root/src/stub_root.cc:314

0x000191f8 in lxb_thd_entry (pCtx=0x68c0f8) at /vobs/onepltf/ltefdd/core/src/lxbase/lxbase.c:3289

0xb575602e in start_thread () from /lib/arm-linux-gnueabi/libpthread.so.0

0xb56d6ab8 in ?? () from /lib/arm-linux-gnueabi/libc.so.6

0xb56d6ab8 in ?? () from /lib/arm-linux-gnueabi/libc.so.6
Backtrace stopped: previous frame identical to this frame (corrupt stack?)

(gdb) print pCallStub
$1 = (globalCallStubClass *) **0x7a1da8**

(gdb) print this
$2 = (globalCallStubClass * const) **0x0** 
```

chrash 出现在标有 (-->) 的行处：

```
if (pCallStub != NULL) {

-->callStubClass* pCallInst =  pCallStub->addCallContext();

} 
```

`addCallContext`为对象调用函数`pCallStub`（`pCallStub`已实例化但未实例化`NULL`）。当我打印时`pCallStub`，我可以看到它有一个地址：

```
(gdb) print pCallStub
    $1 = (globalCallStubClass *) 0x7a1da8 
```

但是，`this`（应该是`pCallStub`）是`0x0`：

```
(gdb) print this
    $2 = (globalCallStubClass * const) 0x0 
```

谁能帮我？

谢谢， 盖塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:06:44.187

`pCallStub`是`0x0`，所以它指向`NULL`。在使用指针之前，您必须使用`pCallStub = new globalCallStubClass()`或创建者函数来实例化对象。`pCallStub = createGlobalCallStubClass()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:16:32.030

```
(gdb) print pCallStub
$1 = (globalCallStubClass *) **0x7a1da8**

(gdb) print this
$2 = (globalCallStubClass * const) **0x0** 
```

您需要显示更多代码以便我们了解您的问题。这里没有上下文我们可以看到 this == pCallStub 另外，如果您打开了优化，您可能看不到您认为您看到的内容（例如编译器优化了函数调用和堆栈，因此 gdb 不会报告正确的变量，因为它在堆栈中搜索它。通常，在 x86 系统上，您会在 ecx 寄存器中找到“this”。

由于您有多个线程，您可能会遇到“多线程单例问题”，即一个线程在单例实例中分配和存储，但其他线程还没有看到它。

例如，尝试使用原子比较和交换来设置单例实例。

# php - 如何在 codeigniter 中创建管理面板？

> ID：11645868
> 
> 赞同：2
> 
> 时间：2012-07-25T08:43:26.943
> 
> 标签：php, codeigniter

我想为我的小型应用程序构建一个管理面板，我应该使用什么方法？

1.  我应该在应用程序控制器文件夹中编写另一个管理控制器吗？
2.  还是我应该采用其他对大型项目也有好处的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T08:55:21.240

[这](https://stackoverflow.com/questions/7511425/seperate-admin-and-front-in-codeigniter)是相关问题[这里有](http://philsturgeon.co.uk/blog/2009/07/Create-an-Admin-panel-with-CodeIgniter)两种创建管理区域的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:55:02.313

拥有另一个控制器很好——我通常创建一个`Admin_Controller`扩展的基本管理控制器`CI_Controller`，然后我所有与管理相关的控制器都扩展该基本管理控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:57:24.297

如果您已经在使用 MVC 架构，那么坚持使用它是有意义的，不是吗？我认为您的“管理面板”的管理操作没有理由不适合它。

但是，我会说“管理员控制器”对于一个控制器来说听起来像是一个很大的责任！理想情况下，我认为您的控制器应该又好又瘦，几乎没有责任。很难说不知道你在做什么，但我肯定会看看你的管理面板将包含什么，并将职责分成许多类别、操作、职责或其他东西；创建一个包含其中几个控制器的管理区域。也许他们都可以扩展一个基本的 AdminController 类？

# php - 重定向 301 Apache PHP 文件

> ID：11645871
> 
> 赞同：0
> 
> 时间：2012-07-25T08:43:31.327
> 
> 标签：php, apache, redirect, http-status-code-301

我想重定向这个：

```
www.site1.com/downs/pafiledb.php?action=download&id=NUMBER-OF-DOWNLOAD 
```

到

```
www.site2.com/downloads/NUMBER-OF-DOWNLOAD 
```

例如，我输入：

```
www.site1.com/downs/pafiledb.php?action=download&id=795 
```

并通过 301 重定向转到此地址：

```
www.site2.com/downloads/795 
```

我使用服务器 Apache 并希望通过 PHP 文件或 RewriteRule 执行此操作，但我尝试了几种方法并失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:48:27.317

不确定问题出在哪里，但是添加到 pafiledb.php 末尾的这两行应该可以解决问题：

```
header('Location: http://site2.com/downloads/'.$_GET['id'], true, 301);
exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:50:52.870

试试下面的代码。

```
if( isset( $_GET[id] )
   {
    header( "HTTP/1.1 301 Moved Permanently" );
    header( "location:www.site2.com/downloads/" . $_GET[id]);
    } 
```

# python - 如何有效地将新行附加到大文件的开头？

> ID：11645876
> 
> 赞同：3
> 
> 时间：2012-07-25T08:43:53.413
> 
> 标签：python, python-3.x, file-handling

我想在 2GB+ 文件的开头添加一个新行。我尝试了以下代码，但代码 OUT of MEMORY 错误。

```
myfile = open(tableTempFile, "r+")
myfile.read() # read everything in the file
myfile.seek(0) # rewind
myfile.write("WRITE IN THE FIRST LINE ")
myfile.close(); 
```

1.  在不将整个文件放入内存的情况下写入文件文件的方法是什么？
2.  如何在文件开头追加新行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T08:45:07.687

请注意，Python 中的任何内置函数都无法做到这一点。

您可以使用 tail / cat 等在 LINUX 中轻松完成此操作。

对于通过 Python 执行此操作，我们必须使用辅助文件，并且对于非常大的文件执行此操作，我认为这种方法是可能的：

```
def add_line_at_start(filename,line_to_be_added):
    f = fileinput.input(filename,inplace=1)
    for xline in f:
        if f.isfirstline():
            print line_to_be_added.rstrip('\r\n') + '\n' + xline,
        else:
            print xline 
```

笔记：

1.  在处理大文件时，切勿尝试使用 read() / readlines() 函数。这些方法尝试将完整的文件加载到您的内存中

2.  在您给定的代码中，seek 函数将带您进入起点，但您编写的所有内容都会**覆盖**当前内容

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T08:54:49.467

如果您有能力一次将整个文件存储在内存中：

```
first_line_update = "WRITE IN THE FIRST LINE \n"
with open(tableTempFile, 'r+') as f:
  lines = f.readlines()
  lines[0] = first_line_update
  f.writelines(lines) 
```

除此以外：

```
from shutil import copy
from itertools import islice, chain 
# TODO: use a NamedTemporaryFile from the tempfile module
first_line_update = "WRITE IN THE FIRST LINE \n"
with open("inputfile", 'r') as infile, open("tmpfile", 'w+') as outfile:
  # replace the first line with the string provided:
  outfile.writelines(
    (line for line in chain((first_line_update,), islice(infile,1,None)))
  # if you don't want to replace the first line but to insert another line before
  # this simplifies to:
  #outfile.writelines(line for line in chain((first_line_update,), infile))
copy("tmpfile", "infile")
# TODO: remove temporary file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T09:21:33.093

一般来说，你不能这样做。文件是字节序列，而不是行序列。此数据模型不允许在任意点插入 - 您可以将一个字节替换为另一个字节，也可以在末尾附加字节。

您可以：

*   替换文件中的前 X 个字节。如果您可以确保第一行的长度永远不会改变，这可能对您有用。
*   截断文件，写第一行，然后重写它之后的所有其余部分。如果您无法将所有文件放入内存中，则：
    *   创建一个临时文件（该`tempfile`模块将为您提供帮助）
    *   写下你的台词
    *   打开您的基本文件`r`并将其内容复制到第一行之后的临时文件，分段
    *   关闭两个文件，然后用临时文件替换输入文件

（请注意，追加到文件的末尾要容易得多 - 您需要做的就是以追加`a`模式打开文件。）

# java - 使用java删除文本文件中的一行

> ID：11645881
> 
> 赞同：1
> 
> 时间：2012-07-25T08:44:27.000
> 
> 标签：java, file, file-io, delete-row

我很难删除文本文件中的一行行，我使用了这段代码，但我最终删除了所有行，需要一些帮助。

```
 try //vacation leave/
{
    File inputFile = new File("Adlawan" + code1);
    File tempFile = new File("AdalwanTempFile");

    BufferedReader reader = new BufferedReader(new FileReader(inputFile));
    BufferedWriter writer = new BufferedWriter(new FileWriter(tempFile));

    String lineToRemove = "AdlawanJan2012";
    String currentLine;

    while((currentLine = reader.readLine()) != null)
    {
        //trim newline when comparing with lineToRemove
        String trimmedLine = currentLine.trim();
        if(trimmedLine.equals(lineToRemove)) 
        {
         writer.write(currentLine); 
        }
    }   
    writer.close();
    reader.close();

    if(!inputFile.delete())
    {
        JOptionPane.showMessageDialog(null, "Could not rename file");
        return;
    }
    if(!tempFile.renameTo(inputFile))
        JOptionPane.showMessageDialog(null, "Could not rename file");

}
catch(Exception e)
{
    JOptionPane.showMessageDialog(null, " ");
} 
```

文件中的数据如下所示：

AdlawanJan2012 假期假期积分 -0.6875
AdlawanFeb2012 假期假期积分 -0.6875
AdlawanMar2012 假期假期积分 -0.6875

修剪线条后的理想结果：

AdlawanFeb2012 假期休假积分 -0.6875
AdlawanMar2012 假期休假积分 -0.6875

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:04:43.717

**如果行以“lineToRemove”**变量开头，我认为您正在尝试删除文件中的行，在这种情况下，您可能希望使用**“startsWith”**方法而不是**“equal”**方法。

```
while((currentLine = reader.readLine()) != null)
{
    //trim newline when comparing with lineToRemove
    String trimmedLine = currentLine.trim();
    if(!trimmedLine.startsWith(lineToRemove)) 
    {
        // if current line not start with lineToRemove then write to file
        writer.write(currentLine); 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:09:14.820

`trim()`方法只删除前导和尾随空格，而不是空格后的字符。

```
String lineToRemove = "AdlawanJan2012"; 
```

……

```
String trimmedLine = currentLine.trim();
if(trimmedLine.substring(0, 14).equals(lineToRemove)) {
    //Your deletion logic
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T05:52:57.193

逐行读取文件内容并将它们复制到另一个文件（临时文件）最好是随机访问文件并省略要删除的行是一个好主意。只需将其余部分复制到临时文件并省略要删除的行。然后将文件重命名为原始名称。没有样品请。我需要你自己做这件事，这样你就可以自己学习了。祝你好运

# php - 什么是定时任务？我该如何使用它？

> ID：11645882
> 
> 赞同：-4
> 
> 时间：2012-07-25T08:44:27.483
> 
> 标签：php, cron

[http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)

我已经从这个网站下载了代码。如何使用 Cron 作业发送邮件？我正在使用 Windows XP。请帮助我。我是 PHP 新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T08:48:23.373

cron 是类 Unix 计算机操作系统中基于时间的作业调度程序。cron 使用户能够安排作业（命令或 shell 脚本）在特定时间或日期定期运行。它通常用于自动化系统维护或管理，尽管它的通用性质意味着它可以用于其他目的，例如连接到 Internet 和下载电子邮件。

[**见参考**](http://en.wikipedia.org/wiki/Cron)

请参阅这篇文章[**如何通过 cron 作业使用 php mysql 发送电子邮件**](https://stackoverflow.com/questions/3368307/how-to-send-emails-via-cron-job-usng-php-mysql)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T08:49:32.333

Cron 是一个按计划运行命令的实用程序。它是大多数 UNIX 和类 UNIX 系统的标准配置，但 Windows 没有。

您可以[为 windows 获取 cron](https://www.google.co.uk/search?q=cron+for+windows&oq=cron+for+windows&sugexp=chrome,mod=8&sourceid=chrome&ie=UTF-8)或使用[计划任务](http://support.microsoft.com/kb/308569)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:47:12.373

将其设置为 Windows 计划任务，而不是 cron 作业。

[您可以从命令行](http://php.net/manual/en/install.windows.commandline.php)运行 PHP，例如：

```
C:\PHP5\php.exe -f "C:\PHP Scripts\script.php" 
```

编辑：您提供的链接是一个用于管理 cron 作业的 PHP 工具。您需要安装 Windows 版本的 cron，其他答案之一指出了这一点。如果您只想定期运行任务，请使用 Windows 调度程序来执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T12:52:09.777

1）创建批处理文件

打开记事本。粘贴行
"C:\xampp\php\php.exe" "C:\xampp\htdocs\test\mail.php"
点击 "File" -> "Save As"
确保 "Save as type:" 设置为 "所有文件”
将文件另存为“cron.bat”到您的 C 盘

/*注意：test 是一个文件夹名称*/

2）安排批处理文件运行

打开命令提示符
粘贴以下 SchTasks /Create /SC DAILY /TN “My Task” /TR “C:cron.bat” /ST 09:00
Press Enter 这将使脚本每天早上 9 点运行。

注意：尝试此链接以获取更多信息 [http://www.howtogeek.com/51236/how-to-create-modify-and-delete-scheduled-tasks-from-the-command-line/](http://www.howtogeek.com/51236/how-to-create-modify-and-delete-scheduled-tasks-from-the-command-line/)

3）邮件.php

```
 <?php      
          $to = "test@yourmailid.com";            
          $subject = "Test mail PHP";            
          $message = "This to Inform You that  Mr.name";         
          $headers  = "MIME-Version: 1.0\n";
          $headers .= "Content-Type: text/html; charset=UTF-8\n";
          $headers .= "From: yourmailid.com <info@example.com>\n";
          mail($to,$subject,$message,$headers);
          echo "Mail Sent.";
          ?> 
```

# amazon-ec2 - 如何禁用 Amazon EC2 收费？

> ID：11645886
> 
> 赞同：29
> 
> 时间：2012-07-25T08:44:36.667
> 
> 标签：amazon-ec2, amazon-web-services

我目前尝试实施 amazon ec2，我读到一年后他们会向你收费。我之前使用过谷歌应用引擎（使用 java），并且有一个可以启用/禁用充电的功能。我只是想尝试免费的 ec2 实例，所以这是我的问题：

*   Amazon EC2 是否会在一年后自动向您收费？
*   如何禁用自动充电功能？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-04-08T13:04:58.647

我最终通过访问[帐户页面关闭了我的帐户](https://console.aws.amazon.com/billing/home?#/account)

在页面底部您会找到“关闭帐户”

![在此处输入图像描述](../Images/22d37c4e29c8ba7c5e129321bb5f34bd.png)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-07-25T11:39:47.573

目前无法**禁用充电**。您可能需要**超过免费层**（例如，如果您设置了生产环境，您可能不希望它被亚马逊自动杀死）。Google App 引擎有点不同，因为如果您的 http 请求为零，它是免费的，因此它将**停止为您的应用程序提供服务**。

如果您删除[帐户中](https://www.amazon.com/gp/css/account/cards/view.html)[的信用卡](https://forums.aws.amazon.com/message.jspa?messageID=221554)，如果有未付余额，亚马逊仍会收取费用。

亚马逊**不会提醒您**将超过免费套餐，因此我建议您在一年内的日历上放**一点提醒，不要忘记关闭您的服务器。**

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-03T18:46:27.057

无法控制您在 AWS 上需要支付多少费用，这就是我不使用它的原因。

亚马逊在免费套餐上确实含糊不清（例如，不太清楚实例附带的存储量是否计入免费 EB2 存储配额）。您可以通过多种方式获得使用免费套餐的账单。

是的，如果您不终止所有实例并分离所有存储卷，您将在 12 个月后付费。

很多人抱怨亚马逊的计费做法。亚马逊从未改变。我想这就是亚马逊决定赚钱的方式。让您“免费”进入，但您很可能会不小心花一些钱。如果您决定使用它，您将不知道需要支付多少费用。如果您有能力使用托管/专用服务器，您可能会发现使用固定的每月付款而不是根据使用情况计费实际上要便宜得多。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-26T04:35:46.423

使用 Amazon EC2，您按使用小时数计费。如果您是新用户，您的帐户将获得 8,760 小时 (24*365) 之类的免费时间，这些时间将在 1 年后到期。（我在这里从模糊的记忆中工作，所以仔细检查官方条款，而不是相信我的话。）

在您的免费时间到期或以其他方式用完后，Amazon EC2 将开始按正常时间计费（可能低至每小时 2 美分 - [http://ec2instances.info](http://ec2instances.info)）。没有所谓的“免费”EC2 实例。

所以，回答你的问题：

> *   Amazon EC2 是否会在一年后自动向您收费？

一旦您的免费时间用完或到期，您将自动按正常小时使用收费。

> *   如何禁用自动充电功能？

你不能。所有 EC2 实例都需要花钱。您有责任密切关注您的帐户，并确保在您不想支付任何费用时不会超出您的空闲时间。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-01T18:59:46.250

我被收取了一项实际上我从未使用过的服务的费用。

a) 亚马逊确实从未告诉您免费套餐已完成。但是，亚马逊会及时向您收费。这是我的错误，但我承认一点建议并没有什么坏处，特别是因为实际上每个人都这样做。

b) 即使是免费套餐，我对性能也没有印象。我拥有一个更强大的共享主机。

c) 正如一些评论所说，您不能删除您的信用卡，也不能取消服务。它真的很低。

d）最后，正如一些评论所说，我关闭了我的帐户。据我所知，它与您的亚马逊（不是云）帐户无关。

该服务如此复杂且过于复杂，充满了付费陷阱，我一点也不印象深刻。感谢亚马逊，但不感谢，我会坚持使用 VPS/Dedicated。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T10:56:18.360

您可以免费使用 1 年[http://aws.amazon.com/free/](http://aws.amazon.com/free/)。

尝试阅读 AWS 免费使用套餐：[http](https://rads.stackoverflow.com/amzn/click/com/B007Q4JESC) ://www.amazon.com/Getting-Started-Guide-Usage-ebook/dp/B007Q4JESC/ref=sr_1_1?ie=UTF8&qid=1343213452&sr=8-1&keywords=aws+free+tier .

# android - 限制对服务器后端的访问

> ID：11645888
> 
> 赞同：2
> 
> 时间：2012-07-25T08:44:39.533
> 
> 标签：android, ios, security, xamarin.ios, xamarin.android

我正在 Monodroid/MonoTouch 上制作一个跨平台应用程序，我的应用程序应该与服务器端部分联系以从中获取数据。数据是敏感的，是应用程序的基础。

我将如何保护它以限制其他人/应用程序使用服务器端，假设人们可以获得正确的请求语法，或者如果我使用密钥对我的查询进行编码，他们可以通过调试获得该密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:54:34.660

您需要在数据传输中**保密**，例如使用 SSL/TLS，如 HTTPS，但仅此还不够。默认情况下，这意味着客户端可以确保它信任服务器，而不是服务器可以信任客户端（这不包括您的*调试*案例）。

因此，您还需要**身份验证**。这几乎与拥有*密钥*相同，只是它需要基于*用户*（或您信任的实体），而不是*硬编码*到应用程序本身（不可信）。

让用户注册并获取密码（或保存到设备存储中的用户令牌）是开始此操作的一种方法。它将保护您免受*其他人*使用您的数据。

您可以通过创建某种用户/设备关联来增强这一点，这样**用户机密**就不能在多个设备之间共享......这可能会限制同一（受信任）用户使用替代（不受信任）应用程序的可能性，例如在不同的设备上。

# ios - UIBarButtonItem：针对目标操作调用与 performSelector:withObject: 对帧的处理方式不同：

> ID：11645895
> 
> 赞同：0
> 
> 时间：2012-07-25T08:44:57.610
> 
> 标签：ios, uibarbuttonitem, performselector

我有一个 UIBarButtonItem *按钮。这个想法是用户按下按钮，然后弹出一个窗口。这是在按钮的目标/动作中声明的（即点击按钮调用

```
(void)showMyWindow:(id)sender 
```

其中发送者是 UIBarButtonItem。

在showMyWindow:方法中，弹窗的绘制需要发送者的框架。现在， UIBarButtonItem 通常不允许您访问它的框架。作为一个 hack，我将发送者转换为 UIView，然后访问这个 UIView 的框架。我不认为这会起作用，但令人惊讶的是，它会起作用。

但是，我也想在别处调用 showMyWindow: 方法。所以我有这行代码：

```
[self performSelector:@selector(showMyWindow:) withObject:self.button]; 
```

在这里，我的应用程序崩溃了。我已经准确地指出了这个问题：

```
(void)showMyWindow:(id)sender 
{
    //I should be checking before the cast here, but it helps illustrate the problem
    UIView *senderAsView = (UIView *)sender
    CGRect frame = senderAsView.frame;
    ...
} 
```

关键是：当我使用 target-action 调用该方法时，我可以以某种方式执行此强制转换+访问框架，但当我使用 performSelector:withObject 时不能：

为什么有区别？为什么这种演员可以在一种情况下进行，而不能在另一种情况下进行？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:06:10.877

> 作为一个 hack，我将发送者转换为 UIView，然后访问这个 UIView 的框架。我不认为这会起作用，但令人惊讶的是，它会起作用。

UIBarButtonItem 继承自 NSObject，而不是 UIView，并且没有 frame 属性。在这种情况下，发送者很可能不是您的条形按钮项，而是属于它的私有视图（如果您使用的是系统项）或它的自定义视图属性。

当您“手动”调用它时，您实际上*是在*发送 UIBarButtonItem 实例，该实例没有框架，并且当您将其转换为 UIView 并要求它提供 frame 属性时会崩溃。

`sender`您可以通过检查调试器中的对象来阐明真正发送的内容。在第一个实例中它将是一个视图子类，在第二个实例中将是一个 UIBarButtonItem（或子类）。

# android - “系统服务在 onCreate() 之前对活动不可用”错误消息？

> ID：11645906
> 
> 赞同：18
> 
> 时间：2012-07-25T08:45:35.680
> 
> 标签：android, methods, oncreate

当用户在我的应用程序中点击一个图标时，我希望应用程序首先检查设备是否连接到互联网，然后根据它收到的结果做一些事情（知道它只是弹出一个对话框，通知设备是否连接与否）。所以我写了这段代码：

```
public class MainActivity extends Activity {

// SOME CONSTANTS WILL BE DEFINED HERE

AlertDialog.Builder builder = new AlertDialog.Builder(this);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    findViewById(R.id.icoMyIcon).setOnClickListener(listener);
}

private OnClickListener listener = new OnClickListener() {

    public void onClick(View v) {
        if (isNetworkConnected()) {
            builder.setMessage("Internet connected!").setCancelable(false)
            .setPositiveButton("OK", null);
            builder.create().show();
        } else {
            builder.setMessage("Internet isn\'t connected!")
            .setCancelable(false)
            .setPositiveButton("OK", null);
            builder.create().show();
        }

    }
};

// Check if the device is connected to the Internet
private boolean isNetworkConnected() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo ni = cm.getActiveNetworkInfo();
    if (ni == null) {
        // There are no active networks.
        return false;
    } else
        return true;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

当我尝试在模拟器上运行此应用程序时，它会一直崩溃，并且我在 LogCat 中收到以下错误消息：

```
07-24 22:59:45.034: E/AndroidRuntime(894): FATAL EXCEPTION: main
07-24 22:59:45.034: E/AndroidRuntime(894): java.lang.RuntimeException: Unable to 
    instantiate activity ComponentInfo{com.my.app/com.my.app.MainActivity}: 
    java.lang.IllegalStateException: System services not available to Activities before onCreate()
07-24 22:59:45.034: E/AndroidRuntime(894):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
07-24 22:59:45.034: E/AndroidRuntime(894):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-24 22:59:45.034: E/AndroidRuntime(894):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-24 22:59:45.034: E/AndroidRuntime(894):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-24 22:59:45.034: E/AndroidRuntime(894):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-24 22:59:45.034: E/AndroidRuntime(894):  at android.os.Looper.loop(Looper.java:123)
07-24 22:59:45.034: E/AndroidRuntime(894):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-24 22:59:45.034: E/AndroidRuntime(894):  at java.lang.reflect.Method.invokeNative(Native Method)
07-24 22:59:45.034: E/AndroidRuntime(894):  at java.lang.reflect.Method.invoke(Method.java:521)
07-24 22:59:45.034: E/AndroidRuntime(894):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-24 22:59:45.034: E/AndroidRuntime(894):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-24 22:59:45.034: E/AndroidRuntime(894):  at dalvik.system.NativeStart.main(Native Method)
07-24 22:59:45.034: E/AndroidRuntime(894): Caused by: java.lang.IllegalStateException: System services not available to Activities before onCreate()
07-24 22:59:45.034: E/AndroidRuntime(894):  at android.app.Activity.getSystemService(Activity.java:3526)
07-24 22:59:45.034: E/AndroidRuntime(894):  at com.android.internal.app.AlertController$AlertParams.<init>(AlertController.java:743)
07-24 22:59:45.034: E/AndroidRuntime(894):  at android.app.AlertDialog$Builder.<init>(AlertDialog.java:273)
07-24 22:59:45.034: E/AndroidRuntime(894):  at com.my.app.MainActivity.<init>(MainActivity.java:24)
07-24 22:59:45.034: E/AndroidRuntime(894):  at java.lang.Class.newInstanceImpl(Native Method)
07-24 22:59:45.034: E/AndroidRuntime(894):  at java.lang.Class.newInstance(Class.java:1429)
07-24 22:59:45.034: E/AndroidRuntime(894):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
07-24 22:59:45.034: E/AndroidRuntime(894):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
07-24 22:59:45.034: E/AndroidRuntime(894):  ... 11 more 
```

为什么会发生，我该如何解决？我是这方面的新手，所以...请温柔一点！:)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-25T08:48:03.403

我认为这是因为您在创建之前实例化了一个 onClick 侦听器。尝试在方法内实例化 onClick 侦听器`onCreate()`。

这可能是也可能不是这种情况`AlertDialog`，但我不完全确定。

从技术上讲，我认为是以下行导致了问题：

```
ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE); 
```

但是，因为这是在方法中调用的，而该`isNetworkConnected()`方法又在您的 onClick 方法中调用，所以移动 onClick 的实例化可以解决问题。

**线索在 onCreate() 之前**的异常System services not available to Activities 中

 *** * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-25T08:49:32.550

错误是由于创建这个对象创建的。

```
AlertDialog.Builder builder = new AlertDialog.Builder(this); 
```

您应该在调用 onCreate 之后执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-21T10:02:40.873

要调用系统服务，我们必须使用正在运行的活动。这意味着我们需要`onCreate`继承到`super`. 所以要确定我们必须使用当前的应用程序上下文来调用系统服务。

采用

```
ConnectivityManager cm = (ConnectivityManager) getBaseContext().getSystemService(Context.CONNECTIVITY_SERVICE); 
```

或者如果我们有`context`引用的对象`Context`，我们可以如下使用它

```
ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-28T17:04:22.390

正确答案是

> ```
>  AlertDialog.Builder builder = new AlertDialog.Builder(this); 
> ```

jeet 已经提到了这一点，原因是您在`AlertDialog`使用逻辑上不正确的 Activity 上下文执行的任何活动生命周期方法之前进行了初始化。

您的问题的解决方案是：

```
private OnClickListener listener = new OnClickListener() {

    public void onClick(View v) {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
        if (isNetworkConnected()) {
            builder.setMessage("Internet connected!").setCancelable(false)
            .setPositiveButton("OK", null);
            builder.create().show();
        } else {
            builder.setMessage("Internet isn\'t connected!")
            .setCancelable(false)
            .setPositiveButton("OK", null);
            builder.create().show();
        }

    }
}; 
```

需要显示时初始化警报对话框。向这个旧线程发布答案的原因是已接受的答案，即使您将 onclick 侦听器移出`onCreate()`仍然存在的问题，Jeet 的答案也没有解决问题。

今天我遇到了与 kotlin 相同的问题，如果互联网不可用，则显示错误对话框，我的愚蠢错误是

我没有将上下文传递为“this”，而是将其传递为`MainActivity()`

> 正确的 R.string.error.errorDialog(this) //

> 错误的 R.string.error.errorDialog(MainActivity())

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T11:49:01.540

将以下权限添加到*AndroidManifest.xml*文件。

我认为您忘记添加此权限。

```
android.permission.ACCESS_NETWORK_STATE 
```

它会帮助你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-11T22:51:42.190

问题是您将“侦听器”定义为全局变量。因为它在错误消息中给出：系统服务在 onCreate() 之前对活动不可用。

你的 onCreate 方法应该是这样的：

```
private OnClickListener listener = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    listener = new OnClickListener() {

    public void onClick(View v) {
        if (isNetworkConnected()) {
            builder.setMessage("Internet connected!").setCancelable(false)
            .setPositiveButton("OK", null);
            builder.create().show();
        } else {
            builder.setMessage("Internet isn\'t connected!")
            .setCancelable(false)
            .setPositiveButton("OK", null);
            builder.create().show();
        }

    }
};

    findViewById(R.id.icoMyIcon).setOnClickListener(listener);

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-28T04:05:41.253

此外，如果有一个内部类，比如说`class MyAdapter extends ArrayAdapter<myModel>`或类似的，它有助于***不***实例化它 - ( `MyAdapter = new mAdapter<mModel>()`)***在***活动的`onCreate()`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-14T08:45:42.107

就我而言，我收到错误消息：“系统服务在 onCreate() 之前对活动不可用”

当我使用如下上下文初始化类属性时

```
 class MainActivity : AppCompatActivity() {

        // this line below
        private val notificationManager: NotificationManagerCompat = NotificationManagerCompat.from(this) 

        override fun onCreate(savedInstanceState: Bundle?) {
            super.onCreate(savedInstanceState)
            setContentView(R.layout.activity_main)
        }

    } 
```**

# version-control - 列出 TFS 中更改的文件，但按应用的更改数量排序

> ID：11645911
> 
> 赞同：1
> 
> 时间：2012-07-25T08:46:05.427
> 
> 标签：version-control, tfs

有没有办法列出项目中所有已更改的文件，但按每个文件的更改次数排序？

我想进行代码审查，但只能从最活跃的文件中选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:12:41.510

您可以尝试使用 Excel 作为 TFS 报告工具，如此博客文章中所示：

[http://www.woodwardweb.com/vsts/getting_started.html](http://www.woodwardweb.com/vsts/getting_started.html)

附言。[我在这个问题](https://stackoverflow.com/questions/5977244/how-to-get-git-like-statistics-from-tfs)中找到了那个链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-20T07:45:37.917

我搜索了不同的方法，最后我发现最好的方法是使用 TFS API
这里是代码：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.VersionControl.Client;

namespace VControl
{
    class Program
    {
        class SourceElement
        {
            public string filename;
            public int numberOfModification;

        }
        static void Main(string[] args)
        {
             TfsTeamProjectCollection projectCollection = new 
            TfsTeamProjectCollection(new Uri("http://server:8080/tfs/ProjectCollection/"),
                new System.Net.NetworkCredential("username", "password"));
              projectCollection.EnsureAuthenticated();
            Workspace workspace = null;
            Boolean createdWorkspace = false;
            String newFolder = String.Empty;
             VersionControlServer versionControl = projectCollection.GetService<VersionControlServer>();
             var teamProjects = new List<TeamProject>(versionControl.GetAllTeamProjects(false));
             String workspaceName = String.Format("{0}-{1}", Environment.MachineName, "TestWorkspace");
            try
            {
                workspace = versionControl.GetWorkspace(workspaceName, versionControl.AuthorizedUser);
            }
            catch (WorkspaceNotFoundException)
            {
                workspace = versionControl.CreateWorkspace(workspaceName, versionControl.AuthorizedUser);
                createdWorkspace = true;
            }
            var serverFolder = String.Format("$/{0}", teamProjects[0].Name) + "/solutionFolder/";
            var localFolder = Path.Combine(Path.GetTempPath(), "localFolder") + "/solutionFolder/";
            var workingFolder = new WorkingFolder(serverFolder, localFolder);
            // Create a workspace mapping.
            workspace.CreateMapping(workingFolder);
            if (!workspace.HasReadPermission)
            {
                throw new SecurityException(
                    String.Format("{0} does not have read permission for {1}",
                    versionControl.AuthorizedUser, serverFolder));
            }

            // Get the files from the repository.
            workspace.Get();
            string[] directories = Directory.GetDirectories(workspace.Folders[0].LocalItem);
            FileStream outputFile = new FileStream("result.txt", FileMode.Create);
            StreamWriter  writer = new StreamWriter(outputFile);     
            List<SourceElement> fileLiset = new List<SourceElement>();
            foreach (string dir in directories)
            {
                foreach (string file in Directory.GetFiles(dir))
                {
                    string filenamae = System.IO.Path.GetFileName(file);
                    Item source = versionControl.GetItem(file);
                    System.Collections.IEnumerable history = versionControl.QueryHistory(file,
                    VersionSpec.Latest, 0, RecursionType.Full, null, null, null, 300, true, true, false, false);
                    int numberOfModification = 0;
                    foreach (var item in history)
                        numberOfModification++;
                    SourceElement fileElement = new SourceElement();
                    fileElement.filename = filenamae;
                    fileElement.numberOfModification = numberOfModification;
                     fileLiset.Add(fileElement);
                }
                }
         var sortedList = fileLiset.OrderBy(x=> x.numberOfModification);
                    // Loop through keys.
            foreach (var key in sortedList)
            {
                writer.WriteLine("{0}: {1}", key.filename, key.numberOfModification);
            }
            writer.Close();
        }
    }
 } 
```

# lift - Liftweb eager_eval 并从 db 插入 html

> ID：11645920
> 
> 赞同：0
> 
> 时间：2012-07-25T08:46:49.677
> 
> 标签：lift

我需要执行如下代码片段：

```
<div class="lift:firstSnippet.content?eager_eval=true">
   <p>Some text</p>
   <div class='lift:secondSnippet.showAddNewForm>'></div>
</div> 
```

所以在我的模板中我有 `<div class="lift:firstSnippet.content?eager_eval=true"></div>`

FirstSnippet 从 db 插入一些 html： `def content = "*" #> Unparsed(page.open_!.content.is)` 该 html 看起来像： `<p>Some text</p><div class='lift:secondSnippet.showAddNewForm>'></div>` 但是 SecondSnippet 不执行。我也尝试使用`S.eagerEval(Unparsed(page.open_!.content.is))` ，但结果是一样的。我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:53:39.467

我不知道您是复制模板代码还是重新键入它，但存在语法错误：

```
<div class="lift:firstSnippet.content?eager_eval=true">
   <p>Some text</p>
   <div class='lift:secondSnippet.showAddNewForm>'></div>
</div> 
```

注意`>`末尾的`secondSnippet.showAddNewForm>`

我认为它应该是：

```
<div class="lift:firstSnippet.content?eager_eval=true">
   <p>Some text</p>
   <div class='lift:secondSnippet.showAddNewForm'></div>
</div> 
```

请尝试一下，看看它是否有所作为。

# .net - 在 SharePoint 中“手动”解锁 InfoPath 表单

> ID：11645921
> 
> 赞同：0
> 
> 时间：2012-07-25T08:46:56.403
> 
> 标签：.net, sharepoint, office-interop, infopath

我们有一个解决方案，我们使用 SharePoint 2007 在 FormLibrary 中“存储”InfoPath 表单。我们创建了一个 .NET 客户端应用程序，它使用 InfoPaths FormControl 打开表单并将其显示给最终用户。

当应用程序正常关闭时，我们 close() FormControl 并将 HTTP 204（解锁）发送到 SharePoint，这可能会释放它对相关表单的锁定。但是，当应用程序没有正常关闭时（例如某种崩溃），我们发现表单无法再打开，因为它“被另一个用户锁定”。

顺便说一句，这把锁不是“正常”的退房类型！

我怎样才能绕过这个问题，或者我怎样才能释放锁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:31:32.187

MS 建议等待 10 分钟或重新启动服务器。
[http://support.microsoft.com/kb/899709/en-us](http://support.microsoft.com/kb/899709/en-us)

有时（大多数情况下）这不起作用，所以试试这段代码。
[http://www.codeproject.com/Articles/93965/Force-SharePoint-Document-Unlocked-Checked-In](http://www.codeproject.com/Articles/93965/Force-SharePoint-Document-Unlocked-Checked-In)

# python - 在pygame中堆叠不同类型的透明度

> ID：11645926
> 
> 赞同：3
> 
> 时间：2012-07-25T08:47:14.617
> 
> 标签：python, pygame

我有一个自定义 GUI 模块，它使用树中的对象来管理界面，并以正确的顺序将它们相互叠加。

现在在我的对象中，我有一些只是具有每像素透明度的表面，而其他的则使用颜色键。

我的问题是，当在另一个填充有颜色键的表面上对具有每像素透明度的表面进行 blitting 时，第一个表面会改变第二个表面中某些像素的颜色，这意味着它们不再透明。我怎样才能混合这些而不必摆脱每像素透明度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T11:58:17.793

您可以将`Surfaces`使用颜色键的方法转换为使用每像素透明度，然后再`Surface`使用[`convert_alpha`](http://www.pygame.org/docs/ref/surface.html#Surface.convert_alpha).

* * *

**例子：**

```
COLORKEY=(127, 127, 0)
TRANSPARENCY=(0, 0, 0, 0)
import pygame
pygame.init()
screen = pygame.display.set_mode((200, 200))
for x in xrange(0, 200, 20):
  pygame.draw.line(screen, (255, 255, 255), (x, 0),(x, 480))

# create red circle using a colorkey
red_circle = pygame.Surface((200, 200))
red_circle.fill(COLORKEY)
red_circle.set_colorkey(COLORKEY)
pygame.draw.circle(red_circle, (255, 0, 0), (100, 100), 25)

#create a green circle using alpha channel (per-pixel transparency)
green_circle = pygame.Surface((100, 100)).convert_alpha()
green_circle.fill(TRANSPARENCY)
pygame.draw.circle(green_circle, (0, 255, 0, 127), (50, 50), 25)

# convert colorkey surface to alpha channel surface before blitting
red_circle = red_circle.convert_alpha()
red_circle.blit(green_circle, (75, 75))

screen.blit(red_circle, (0, 0))

pygame.display.flip() 
```

* * *

**结果：**

![在此处输入图像描述](../Images/05a4cc7819d1fe902383a660dec9f7b7.png)

# c# - 对于对象 #2 的所有现有属性，将对象 #1 合并到对象 #2

> ID：11645927
> 
> 赞同：1
> 
> 时间：2012-07-25T08:47:14.707
> 
> 标签：c#

我有一个相当冗长的对象，其中包含许多用于将数据传输到 SQL 数据库的属性。我现在想提供这个对象的“轻量级”版本，它只使用详细对象的一些属性。

我使用轻对象通过 REST api 提供，并使用详细对象来传输数据，因此理想情况下我也可以反转该过程（使用轻对象的现有属性覆盖详细对象的属性，然后保存到数据库） .

所有这些属性都将具有相同的数据类型，只要它们存在于灯光对象中。

简单的例子：

```
class Verbose {
  public string email;
  public Guid id;
}

class Simple {
  public string email;
  // don't show Guid
} 
```

现在我想将 Verbose 类型的所有对象转换为 Simple 类型，放弃所有不必要的属性 - 有没有一种简单的方法可以做到这一点？

理想情况下，这也应该是可逆的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:00:29.930

您可以使用反射来遍历对象并读取它们的属性值。在您的班级中添加此功能

```
private IEnumerable<PropertyInfo> GetValidInfoes()
{
    foreach (PropertyInfo info in GetType().GetProperties())
    {
         if (info.CanWrite)
            yield return info;
    }
} 
```

将此循环添加到对您有意义的地方。

```
foreach (var item in GetValidInfoes())
{
     var source = myobject.GetType().GetProperty(item.Name);
     if (source != null)
        item.SetValue(this, source.GetValue(item.Name, item.PropertyType), null);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T08:58:12.613

您可以编写一个接受详细对象的构造函数，反之亦然。

```
public Verbose(Simple simple)
{
    this.id = Guid.NewGuid();
    this.email = simple.email;
}

public Simple(Verbose verbose)
{
    this.email = verbose.email;
} 
```

这样，您将所有转换都集中在一个地方，至少每个转换方向。

您可能会对这里的这个问题感兴趣： [如何编写转换器类？如何高效编写映射规则？](https://stackoverflow.com/questions/11214401/how-to-write-a-converter-class-how-to-efficiently-write-mapping-rules)

**编辑对 OP 很重要**

详细 => 简单

如果`Simple`是 的子集`Verbose`，则仅派生`Verbose`自`Simple`。这里不需要转换。

那么详细***是***一个简单的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T08:52:30.280

试试[AutoMapper](http://automapper.org/)。如果您不使用展平，它可以是可逆的。

# jquery - jQuery 悬停事件（以及附加和分离）以触发动态加载的内容

> ID：11645928
> 
> 赞同：0
> 
> 时间：2012-07-25T08:47:18.590
> 
> 标签：jquery, html, ajax, hover

早晨。

我正在尝试向动态加载的图像添加悬停事件，此外，我还必须附加我悬停的元素，然后将其从悬停函数中分离出来。

该事件将在最初加载的内容上第一次起作用，但在此之后不会触发。

这是我的jQuery：

```
$(document).ajaxComplete(function(){
    $('#rightImageContent img').mouseover(function() {
        $('a.spy_glass').show().appendTo('#rightImageContent');
    });
    $('#rightImageContent img').mouseout(function() {
        $('a.spy_glass').hide().detach();
    });
}); 
```

所有代码都可以[在这里](http://dev.slackwise.org.uk/photography/)找到，但如果你想要更多的 html 或 jquery，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:53:21.783

尝试进出。`mouseover`_`mouseout``ajaxComplete`

`$('#rightImageContent img')`无论是否由 ajax 加载，正确的图像将始终存在

```
 $('#rightImageContent img').mouseover(function() {
        $('a.spy_glass').show().appendTo('#rightImageContent');
    });
    $('#rightImageContent img').mouseout(function() {
        $('a.spy_glass').hide().detach();
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:56:16.383

假设`"#rightImageContent`总是存在：

```
$(function() {
    $('a.spy_glass').appendTo('#rightImageContent').hide();
    $("#rightImageContent").on({
        mouseenter: function() {
            $('a.spy_glass').show();
        },
        mouseleave: function() {
            $('a.spy_glass').hide();
        }
    }, "img");
}); 
```

我也改变了事件，因为“悬停”不是`mouseover mouseout`，但是`mouseenter mouseleave`

您还将它从 dom 中删除，因此选择器一旦被删除就无法找到它。你可以像我一样切换显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:47:46.037

好的，让它工作，完成工作：

```
$(function() {
        $("#rightImageContent").on({
            mouseenter: function() {
                $('a#spyGlass').show().appendTo('#rightImageContent');
            },
            mouseleave: function() {
                $('a#spyGlass').hide().appendTo('body');
            }
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T08:51:57.290

使用 .on()

```
 $(document).on({mouseenter:function(){
                                        $('a.spy_glass').show().appendTo('#rightImageContent');
                                        },
                  mouseleave:function() {
                                        $('a.spy_glass').hide().detach();
                                        }},'#rightImageContent img'); 
```

# asp.net-mvc-3 - 下拉客户端验证 MVC3 不起作用

> ID：11645934
> 
> 赞同：1
> 
> 时间：2012-07-25T08:47:35.393
> 
> 标签：asp.net-mvc-3, html.dropdownlistfor, client-side-validation

```
public class Encapsulated
{
    [Required]
    public string CategoryId { get; set; }
}

 public class Category
{
    public string ID { get; set; }
    public string CategoryName { get; set; }

}

  public class Test
{

    public Encapsulated encapsulated { get; set; }

    private IEnumerable<Category> categories;

    public IEnumerable<Category> Categories
    {
        get { return 
            new List<Category>{new Category{ID="1",CategoryName="abc"}}; }
        set { categories = value; }
    }
}

@using (Ajax.BeginForm(new AjaxOptions { HttpMethod = "Post" }))
{

@Html.DropDownListFor(
x => x.encapsulated.CategoryId,
    new SelectList(Model.Categories, "ID", "CategoryName"),
"-- Please select a category --"
)
@Html.ValidationMessageFor(x => x.encapsulated.CategoryId)

<input type="submit" value="Submit Form" />
}} 
```

为什么客户端验证不适用于 dropDownList。如果我放置

```
[Required]
public string CategoryId { get; set; } 
```

直接在我的测试类中并将视图更改为

```
 @Html.DropDownListFor( x => x.CategoryId,
 new SelectList(Model.Categories, "ID", "CategoryName"), "-- Please select a category --" ) @Html.ValidationMessageFor(x => x.CategoryId) 
```

客户端验证开始工作...

# spring - 幕后的 Spring Controller 和 Dispatcher Servlet

> ID：11645938
> 
> 赞同：0
> 
> 时间：2012-07-25T08:48:05.370
> 
> 标签：spring, spring-mvc

Dispatcher Servlet 在内部是如何工作的？

1.  我已经看到**控制器及其方法（由我们定义）**可以用*@RequestMapping*和许多其他属性进行注释。这些控制器的方法具有**不同的签名（Thay 可以采用我们喜欢的任何参数）。

    Dispatcher servlet 是如何知道如何在我们定义的方法中传递这些参数的？我的意思是 Dispatcher Servlet 如何准备我们在控制器方法中需要的这些对象？

2.  幕后 WebApplicationContext 中实际发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:49:18.663

建议阅读第[15.2](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html)节，这描述了关于 spring mvc 框架的内部。

# django - Django：在表单中初始化小部件时获取当前网址

> ID：11645939
> 
> 赞同：0
> 
> 时间：2012-07-25T08:48:07.810
> 
> 标签：django, forms, url, widget

当我初始化表单以在其中找到我要检查的字符串时，我想获取当前 url。根据这个字符串，我想更改我放入 radioselect 小部件的数据。我想根据 url 显示不同的 radioselect 选项。

```
class FunctionForm(forms.ModelForm):

def __init__(self, *args, **kwargs):

    # get url
    url=request.get_full_path
    # treat url
    string = treat_url(url)

    if (string=='ATC'):
        self.fields['function_name'].queryset= FUNCTION_ATC_CHOICES
    if (string=='ATS'):
        self.fields['function_name'].queryset= FUNCTION_ATS_CHOICES

    super(FunctionForm,self).__init__(*args,**kwargs)
    #function_name = forms.ChoiceField(widget=RadioSelect,choices=FUNCTION_ATC_CHOICES) 

class Meta :
    model = Function
    exclude =('session_number') 
```

我的观点 ：

```
def add_function (request)
if request.method == 'POST': # If the form has been submitted...
    function_form = FunctionForm(request.get_full_path,request.POST) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:50:53.023

当您实例化表单时，您只需将请求对象作为 kwarg 传递。

# c# - 如何以编程方式在加密的pdf上输入密码？

> ID：11645941
> 
> 赞同：1
> 
> 时间：2012-07-25T08:48:12.197
> 
> 标签：c#, asp.net-mvc, pdf, itextsharp

我将在 iframe 上打开 pdf。PDF 被加密以禁用打印。用户将输入 pdf 的密码，但我想以编程方式执行此操作。有没有办法在不解密或创建新pdf的情况下输入密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:59:14.133

有一个名为 PDFSharp 的开源 pdf 库：

[http://pdfsharp.codeplex.com/](http://pdfsharp.codeplex.com/)

您可以在项目中使用此库以编程方式打开加密的 pdf 文件。

# unix - 如何将日志文件的行转换为列？

> ID：11645950
> 
> 赞同：0
> 
> 时间：2012-07-25T08:48:40.327
> 
> 标签：unix, awk

考虑如下的日志文件

```
Operation=someOperation
RequestId=giufiudf-fdsfdsg0-314243-df45
RemoteIpAddress=192.168.1.1
Time=151010.473 ms
EndTime=Tue, 24 Jul 2012 22:23:46 UTC
StartTime=1343168475.480
EOE
------------------------------------------------------------------------

Operation=someOtherOperation
RequestId=giufiu2323df-fdssadasfdsg0-31424sdesa3-df45
RemoteIpAddress=192.168.1.1
Time=1210.473 ms
EndTime=Tue, 24 Jul 2012 22:23:46 UTC
StartTime=1342128475.480
EOE
------------------------------------------------------------------------ 
```

……

我想要这种格式的输出

```
Operation          RequestId     RemoteIpAddress    Time          EndTime    StartTime
someOperation         <req id>      192.168.1.1     151010.473 ms  <end Time>  <start time>
someOtherOperation    <req id>      192.168.1.1     1210.473 ms    <end Time>  <start time> 
```

提前致谢.. ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:16:45.457

[http://www.gnu.org/software/gawk/manual/html_node/Field-Separators.html](http://www.gnu.org/software/gawk/manual/html_node/Field-Separators.html)
[http://www.gnu.org/software/gawk/manual/html_node/Concatenation.html](http://www.gnu.org/software/gawk/manual/html_node/Concatenation.html)

```
BEGIN {
    FS="="
}

$0~/^EOE/ {
    if (!f) {
    print header
    f = 1
    }
    print data
    data = ""
}

NF==2 {
   data = data " " $2
}

!f {
    header = header " " $1
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:29:39.167

一种使用方式`awk`：

```
awk -F= 'BEGIN { RS=""; OFS="\t" } { for (i = 1; i < NF - 1; i++) { if (i%2==1 && NR == 1) header = (header ? header OFS : "") $i; else if (i%2==0) line = (line ? line OFS : "") $i; } if (header != "") { print header; } print line; header = line = "" }' file.txt 
```

分成多行：

```
BEGIN {
    RS = ""
    FS= "="
    OFS = "\t"
}

{
    for (i = 1; i < NF - 1; i++) {
        if (i%2==1 && NR == 1) {
            header = (header ? header OFS : "") $i
        }
        else if (i%2==0) {
            line = (line ? line OFS : "") $i
        }
    }

    if (header != "") { print header }
    print line; header = line = ""
} 
```

输出：

```
Operation   RequestId   RemoteIpAddress Time    EndTime StartTime
someOperation   giufiudf-fdsfdsg0-314243-df45   192.168.1.1 151010.473 ms   Tue, 24 Jul 2012 22:23:46 UTC   1343168475.480
someOtherOperation  giufiu2323df-fdssadasfdsg0-31424sdesa3-df45 192.168.1.1 1210.473 ms Tue, 24 Jul 2012 22:23:46 UTC   1342128475.480 
```

# c - C程序编译错误

> ID：11645955
> 
> 赞同：3
> 
> 时间：2012-07-25T08:49:05.213
> 
> 标签：c, visual-studio-2010

我是编程新手，并选择了 C 语言作为我的第一门计算机语言。我正在做一个示例转换程序，当我编译代码时，出现以下错误。

这是什么意思，我该如何解决？

谢谢！

```
1>------ Build started: Project: ConversionProgram, Configuration: Debug Win32 ------
1>Build started 24-07-2012 20:58:37.

1>InitializeBuildStatus:

1> Touching "Debug\ExcerciseProgram1.unsuccessfulbuild".
1>ClCompile:
1> conversion.cpp
1>c:\my documents\visual studio 2010\projects\excerciseprogram1\excerciseprogram1\question2.cpp(12): warning C4996: 'scanf': This function or variable may be unsafe. Consider using scanf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
1> c:\program files\microsoft visual studio 10.0\vc\include\stdio.h(304) : see declaration of 'scanf'
1>c:\my documents\visual studio 2010\projects\excerciseprogram1\excerciseprogram1\question2.cpp(18): warning C4244: '=' : conversion from 'double' to 'float', possible loss of data
1>c:\my documents\visual studio 2010\projects\excerciseprogram1\excerciseprogram1\question2.cpp(32): error C2857: '#include' statement specified with the /YcStdAfx.h command-line option was not found in the source file
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:00.1 
```

我使用 VB 2010 作为我的 IDE

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T08:53:07.150

这里提到了您遇到编译错误的原因：

> 错误 C2857：在源中找不到使用 /YcStdAfx.h 命令行选项指定的“#include”语句

这意味着编译器正在`StdAfx.h`强制包含。您可以通过添加`#include <StdAfx.h>`到源代码来解决此问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T08:51:59.793

您的源文件似乎不包括预编译的头文件。`"stdafx.h"`如果您使用的是预编译头文件，则所有源文件都必须作为第一个非注释包括在内。

# python - 用于谷歌应用引擎代码的 Python

> ID：11645958
> 
> 赞同：0
> 
> 时间：2012-07-25T08:49:31.017
> 
> 标签：python

朋友们，我正在使用python，我如何在response.out.write中传递一个html文件......我觉得在每一行都写“response.out.write”有困难。我只想编写一个单独的 html 文件并将其作为响应传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:46:27.923

我会跟进更多的研究让你看看；适用于 Python 的 Google App Engine“入门”指南有两个连续的页面[Using Templates](https://developers.google.com/appengine/docs/python/gettingstarted/templates "使用模板")和[Using Static Files](https://developers.google.com/appengine/docs/python/gettingstarted/staticfiles "使用静态文件")。这些将向您展示如何在您的应用程序代码中使用静态 HTML 文件，以及如何使用**jinja**库使用模板动态生成这些静态文件的一小部分。

如果您以前没有看过这些页面，我强烈建议您阅读整个入门指南，如果您对如何使用 App Engine 感到有点不安 - 对于 Python，从[这里开始](https://developers.google.com/appengine/docs/python/gettingstarted/introduction "Python介绍")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:14:26.097

您应该使用**jinja**模板库。

```
# Load Jinja
jinja = jinja2.Environment(loader=jinja2.FileSystemLoader("Page directory here"))
# Get your template
template = jinja.get_template('yourPage.html')
# Respond to a request with your template.
self.response.out.write(template.render()) 
```

它不仅仅提供静态页面，因此您应该在这里进行更多[*研究*。](http://jinja.pocoo.org/)

# javascript - javascript 表单验证无法正常工作

> ID：11645964
> 
> 赞同：1
> 
> 时间：2012-07-25T08:49:59.510
> 
> 标签：javascript, html, validation

我正在尝试验证 joinUs 表单

```
<form id="frmReg" method="post" onsubmit="return valRegs()" action="memb_area/register.php">  
//js:
function valRegs(user, pass) {
    if (!user || !pass) {
        document.getElementById('labInfo').innerHTML = "* White fields required !";
        return false;
    }
    var x = document.forms["frmReg"]["mail"].value;
    var atpos = x.indexOf("@");
    var dotpos = x.lastIndexOf(".");
    if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= x.length) {
        document.getElementById('labInfo').innerHTML = "Incorrect mail !";
        return false;
    }
}; 
```

无论填写与否，无论邮件字段的内容是什么 - 结果始终是：“*需要白色字段！”。请问怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:52:00.053

永远不会为函数提供`user`and`pass`参数。您必须在 javascript 中手动查找这些元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T08:54:13.330

`onsubmit="return valRegs()"`遗漏参数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T08:59:50.867

你如何将参数传递给js函数。尝试

```
function valRegs() {
        var user = document.getElementById('user').value;
         var pass = document.getElementById('pass').value;
    if (!user || !pass) {
        document.getElementById('labInfo').innerHTML = "* White fields required !";
        return false;
    }

}; 
```

# php - php mysql 错误尝试获取电子邮件验证 - phpmyadmin

> ID：11645968
> 
> 赞同：-2
> 
> 时间：2012-07-25T08:50:37.467
> 
> 标签：php, mysql, email, phpmyadmin, verification

[http://www.phpeasystep.com/phptu/24.html](http://www.phpeasystep.com/phptu/24.html) **我正在按照上面的指南进行操作。**

**我在制作正确的表格后输入了这些代码**

```
Table "temp_members_db"
CREATE TABLE `temp_members_db` (
`confirm_code` varchar(65) NOT NULL default '',
`name` varchar(65) NOT NULL default '',
`email` varchar(65) NOT NULL default '',
`password` varchar(15) NOT NULL default '',
`country` varchar(65) NOT NULL default ''
) ENGINE=MyISAM DEFAULT CHARSET=latin1;` 
```

* * *

```
`Table "registered_members"
CREATE TABLE `registered_members` (
`id` int(4) NOT NULL auto_increment,
`name` varchar(65) NOT NULL default '',
`email` varchar(65) NOT NULL default '',
`password` varchar(65) NOT NULL default '',
`country` varchar(65) NOT NULL default '',
PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

**我的注册.php：**

```
<table width="350" border="0" align="center" cellpadding="0" cellspacing="0">
<tr>
<td><form name="form1" method="post" action="signup_ac.php">
<table width="100%" border="0" cellspacing="4" cellpadding="0">
<tr>
<td colspan="3"><strong>Sign up</strong></td>
</tr>
<tr>
<td width="76">Name</td>
<td width="3">:</td>
<td width="305"><input name="name" type="text" id="name" size="30"></td>
</tr>
<tr>
<td>E-mail</td>
<td>:</td>
<td><input name="email" type="text" id="email" size="30"></td>
</tr>
<tr>
<td>password</td>
<td>:</td>
<td><input name="password" type="password" id="password" size="30"></td>
</tr>
<tr>
<td>Country</td>
<td>:</td>
<td><input name="country" type="text" id="country" size="30"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input type="submit" name="Submit" value="Submit"> &nbsp;
<input type="reset" name="Reset" value="Reset"></td>
</tr>
</table>
</form></td>
</tr>
</table> 
```

**我的 signup_ac.php：**

```
<?php

include('config.php');

// table name
$tbl_name=temp_members_db;

// Random confirmation code
$confirm_code=md5(uniqid(rand()));

// values sent from form
$name=$_POST['name'];
$email=$_POST['email'];
$country=$_POST['country'];

// Insert data into database
$sql="INSERT INTO $tbl_name(confirm_code, name, email, password, country)VALUES('$confirm_code', '$name', '$email', '$password', '$country')";
$result=mysql_query($sql);

// if suceesfully inserted data into database, send confirmation link to email
if($result){

// ---------------- SEND MAIL FORM ----------------

// send e-mail to ...
$to=$email;

// Your subject
$subject="Your confirmation link here";

// From
$header="from: your name <your email>";

// Your message
$message="Your Comfirmation link \r\n";
$message.="Click on this link to activate your account \r\n";
$message.="http://www.yourweb.com/confirmation.php?passkey=$confirm_code";

// send email
$sentmail = mail($to,$subject,$message,$header);

}

// if not found
else {
echo "Not found your email in our database";
}

// if your email succesfully sent
if($sentmail){
echo "Your Confirmation link Has Been Sent To Your Email Address.";
}
else {
echo "Cannot send Confirmation link to your e-mail address";
}

?> 
```

**我的确认.php：**

```
<?php

include('config.php');

// Passkey that got from link
$passkey=$_GET['passkey'];

$tbl_name1="temp_members_db";

// Retrieve data from table where row that match this passkey
$sql1="SELECT * FROM $tbl_name1 WHERE confirm_code ='$passkey'";
$result1=mysql_query($sql1);

// If successfully queried
if($result1){

// Count how many row has this passkey
$count=mysql_num_rows($result1);

// if found this passkey in our database, retrieve data from table "temp_members_db"
if($count==1){

$rows=mysql_fetch_array($result1);
$name=$rows['name'];
$email=$rows['email'];
$password=$rows['password'];
$country=$rows['country'];

$tbl_name2="registered_members";

// Insert data that retrieves from "temp_members_db" into table "registered_members"
$sql2="INSERT INTO $tbl_name2(name, email, password, country)VALUES('$name', '$email', '$password', '$country')";
$result2=mysql_query($sql2);
}

// if not found passkey, display message "Wrong Confirmation code"
else {
echo "Wrong Confirmation code";
}

// if successfully moved data from table"temp_members_db" to table "registered_members" displays message "Your account has been activated" and don't forget to delete confirmation code from table "temp_members_db"
if($result2){

echo "Your account has been activated";

// Delete information of this user from table "temp_members_db" that has this passkey
$sql3="DELETE FROM $tbl_name1 WHERE confirm_code = '$passkey'";
$result3=mysql_query($sql3);

}

}
?> 
```

**最后是我的 config.php：**

```
<?php

$host="localhost"; // Host name
$username=""; // Mysql username
$password=""; // Mysql password
$db_name=""; // Database name

//Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect to server");
mysql_select_db("$db_name")or die("cannot select DB");

?> 
```

我在 signup_ac.php 上收到的错误：

```
Warning: mysql_connect() [function.mysql-connect]: Access denied for user 'vhostswww'@'MYIP I THINK' (using password: NO) in /www/kkk.org/k/k/k/kkkhits/htdocs/config.php on line 12
cannot connect to server 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:54:59.993

使用需要做这样的事情，看星星；）——

编辑 -

```
<?php

$host="localhost"; // Host name
$username=""; // Mysql username
$password=""; // Mysql password
$db_name=""; // Database name

//Connect to server and select database.
$con = mysql_connect("$host", "$username", "$password")or die("cannot connect to server");
mysql_select_db("$db_name",$con)or die("cannot select DB");

?> 
```

# vim - Vim 中 Nano 的长线处理？

> ID：11645971
> 
> 赞同：3
> 
> 时间：2012-07-25T08:50:48.170
> 
> 标签：vim, nano

我是一个铁杆 VIM 用户。但是，我想知道是否可以将 VIM 配置为像 Nano 一样提供单行处理。想象以下文本文件：

```
1 This is a short line
2 This is a much much much much much much much (...) much longer line 
```

当我在 VIM 中打开它，并且想到达第二行的末尾时，它会显示如下（其中 ■ 是光标所在的位置）：

```
1 ort line
2 ch much much much much much much (...) much longer line■ 
```

当我在 Nano 中打开并导航到第二行的末尾时，只有该特定行显示为“移位”，如下所示：

```
1 This is a short line
2 >h much much much much much much (...) much longer line■ 
```

我也可以用 VIM 做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:18:27.343

Vim 是一个固定宽度的文本编辑器。您建议的可视化的问题在于，当移动到上一行/下一行（例如通过`k`/ `j`）时，光标会在屏幕上水平“跳跃”，而不是直接向上。

人们可能会习惯这一点（当新行较短时光标已经跳动（除非`'virtualedit'`已设置）），但是如何表示逐块视觉选择？两边有锯齿状边缘？

这就是为什么它不太可能被接受的原因，但不要让这阻止任何人编写（非平凡的）补丁:-)

# ios - 为 RestKit 创建一个包装器

> ID：11645974
> 
> 赞同：1
> 
> 时间：2012-07-25T08:50:53.240
> 
> 标签：ios, objective-c, restkit, objective-c-blocks, grand-central-dispatch

我正在尝试为 编写一个包装器`RestKit`，以便所有请求都调用一个函数，该函数又会通过`RestKit`.

这是我到目前为止所拥有的：

一个函数将调用我的包装器，如下所示：

NSDictionary *response = [包装器 sendRequestWithURLString:url 方法:@"GET"];

我的包装方法：

```
+ (NSDictionary *)sendRequestWithURLString:(NSString *)request method:(NSString *)method
{    
    RKRequestDidFailLoadWithErrorBlock failBlock;

    if ([method isEqualToString:@"GET"])
        return [self sendGETRequestWithURLString:request withFailBlock:failBlock];

    else if ([method isEqualToString:@"POST"])
        return [self sendPOSTRequestWithURLString:request withFailBlock:failBlock];

    return nil;
}

   + (NSDictionary *)sendGETRequestWithURLString:(NSString *)request withFailBlock:(RKRequestDidFailLoadWithErrorBlock)failBlock {

        RKObjectManager *manager = [RKObjectManager sharedManager];

        __block NSDictionary *responseDictionary;

        [manager loadObjectsAtResourcePath:request usingBlock:^(RKObjectLoader *loader) {

            loader.onDidLoadResponse = ^(RKResponse *response) {

                [self fireErrorBlock:failBlock onErrorInResponse:response];

                RKJSONParserJSONKit *parser = [RKJSONParserJSONKit new]; 
                responseDictionary = [[NSDictionary alloc] initWithDictionary:[parser objectFromString:[response bodyAsString] error:nil]];
            };
        }];

        return responseDictionary;
    }

+ (void)fireErrorBlock:(RKRequestDidFailLoadWithErrorBlock)failBlock onErrorInResponse:(RKResponse *)response {

    if (![response isOK]) {

        id parsedResponse = [response parsedBody:NULL];
        NSString *errorText = nil;

        if ([parsedResponse isKindOfClass:[NSDictionary class]]) {
            errorText = [parsedResponse objectForKey:@"error"];
        }

        if (errorText)
            failBlock([self errorWithMessage:errorText code:[response statusCode]]);
    }
}

+ (NSError *)errorWithMessage:(NSString *)errorText code:(NSUInteger)statusCode {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" 
                                                    message:@"Please make sure you are connected to WiFi or 3G." 
                                                   delegate:nil
                                          cancelButtonTitle:@"OK" 
                                          otherButtonTitles:nil];
    [alert show];

    return nil;
} 
```

这里的问题是当`responseDictionary`返回时，该值为 nil，因为`onDidLoadResponse`它同时运行时尚未处理。

在这种情况下，设置的最佳方法是`responseDictionary`什么？我试图避免调用另一个类的 setter 方法。在这种情况下，我唯一的选择是使用委托，这违背了创建包装类的全部目的，因为 RestKit 调用需要使用委托方法来返回响应？

我能否将我的包装器传递给一个`success`可以更新某些本地 ivar 的块？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:05:04.463

正如你所说，你通过了一个成功的障碍。以下是如何执行此操作的示例：

。H

```
typedef void (^kServiceCompleteBlock)(NSDictionary* responseDictionary);

...
+ (NSDictionary *)sendGETRequestWithURLString:(NSString *)request withFailBlock:(RKRequestDidFailLoadWithErrorBlock)failBlock completion: (kServiceCompleteBlock) completion ;

... 
```

.m

```
+ (NSDictionary *)sendGETRequestWithURLString:(NSString *)request withFailBlock:(RKRequestDidFailLoadWithErrorBlock)failBlock completion: (kServiceCompleteBlock) completion {

...

loader.onDidLoadResponse = ^(RKResponse *response) {

            [self fireErrorBlock:failBlock onErrorInResponse:response];

            RKJSONParserJSONKit *parser = [RKJSONParserJSONKit new]; 
            responseDictionary = [[NSDictionary alloc] initWithDictionary:[parser objectFromString:[response bodyAsString] error:nil]];

            if( completion )
               completion(responseDictionary);
        };

...

} 
```

但是，让我警告您潜在的设计缺陷。您应该设计您的应用程序，以便 UI 由您的数据而不是您的 Web 服务驱动。这意味着您的 UI 应该在您的数据模型更新时自动更新，而不是在您的 Web 服务返回时自动更新。请注意如何使用此响应字典。如果要更新 UI，那么您将走在危险的道路上。

# paypal - 如何在paypal中验证用户名

> ID：11645976
> 
> 赞同：0
> 
> 时间：2012-07-25T08:50:58.043
> 
> 标签：paypal

有没有办法使用一些贝宝 api 来验证贝宝中的用户名？

谷歌没有给出太多:(并且使用[这种](https://www.x.com/developers/paypal/documentation-tools/api/addressverify-api-operation-nvp)方法不舒服，因为请求的参数太多（例如，我知道用户的电子邮件，但我什至不想知道他的地址等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:28:53.787

PayPal 没有提供这样的 API，这是**有充分理由**的。

请记住——世界各地的骗子一直在承受着巨大的压力，他们试图窃取别人的钱。试想一下，通过预先验证电子邮件地址以查看他们是否真的是当前的 PayPal 用户，然后对他们进行有针对性的电子邮件攻击，可能会获得网络钓鱼的力量……

出于安全原因，这样的 API（查看随机电子邮件地址是否已向 PayPal 帐户持有人注册）不会也永远不会存在。可能有一个例外 - “受信任的合作伙伴”，PayPal 与一个大型且已建立的实体合作，并允许特殊的 API 权限（基于安全凭证），但这不是凡人所希望的。

此外，如果发现允许这样做的解决方法 - 请放心，PayPal 将尽快修补该漏洞以避免安全漏洞。

# sql - SQL查找日期上还没有收到任何订单

> ID：11645981
> 
> 赞同：0
> 
> 时间：2012-07-25T08:51:17.737
> 
> 标签：sql, sql-server, sql-server-2005, join, null

我有几张桌子。我只想写一个查询，它给了我没有下订单的日期。我正在使用左连接来获得 null 的结果，但问题是：使用它后我无法获得日期。

请帮助我，我的代码是这样的：

```
SELECT DAY(o.OrderDate) AS 'HavntRecivedOrder'
  FROM Products p
 INNER JOIN Suppliers sup   ON p.SupplierID = sup.SupplierID
 INNER JOIN OrderDetails od ON p.ProductID = od.ProductID
  LEFT JOIN Orders o        ON (od.OrderID = o.OrderID
                                AND o.OrderDate BETWEEN '1/1/1997' AND '1/31/1997')
 WHERE sup.CompanyName='Tokyo Traders'
   AND o.OrderDate IS  NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:20:24.350

请发布所需的表结构以更好地理解问题。

尽管如此，从您的问题描述中，我了解到您希望有几天没有发布订单，对吗？那我不明白你为什么要写这么复杂的查询。也许就足以做到这一点......编辑......

如果您的 Orders 表有一个 SupplierID 列，那么

```
DECLARE @firstdate DATETIME='19970101 00:00:00', 
        @lastdate DATETIME= '19970131 00:00:00'
DECLARE @datetable TABLE (auxDate DATE)

;WITH CTE_DatesTable
  AS
  (
    SELECT @FirstDate AS auxDate
    UNION ALL
    SELECT DATEADD(dd, 1, auxDate)
    FROM CTE_DatesTable
    WHERE DATEADD(dd, 1, auxDate) <= @LastDate
  )
  INSERT INTO @datetable ([auxDate])
  SELECT [auxDate] FROM CTE_DatesTable
  OPTION (MAXRECURSION 0);

SELECT auxDate AS 'HavntRecivedOrder'
      FROM @datetable auxTB
     WHERE DAY(auxTB.auxDate) NOT IN (SELECT DAY(OrderDate)
                                   FROM Orders, Supplier
                                  WHERE OrderDate = BETWEEN @firstdate AND @lastdate
                                    AND Supplier.SupplierID = Orders.SupplierID) 
```

# asp.net - = 有什么用？在链接中？

> ID：11645982
> 
> 赞同：-2
> 
> 时间：2012-07-25T08:51:26.293
> 
> 标签：asp.net, css, linq

我看到我的朋友在做一些 Web 开发，他的代码之一引起了我的注意，即 Response.Redirect。

有什么用`Home?=`，不是`LogIn.aspx`页面的名称吗？如果有，它仍然会重定向`Home?=`。有人可以回答我的这个问题，并解释得很好。

```
String url = "LogIn.aspx?Home?=" + Username;
Response.Redirect(url); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:54:20.437

**更新**

根据您的所有评论，答案是：查询字符串参数名称（键）实际上是`"Home?"`，而不仅仅是`"Home"`。详细信息（包括生成技术上不正确的代码的原因）如下。

> 如果它有 Home，它怎么还在重定向？=？

因为没有理由它不应该重定向。假设 URL 无效（`?`是一个保留字符，它不能在查询字符串中出现未编码，因此`?`URL 中的第二个是不正确的），但是浏览器很适合处理无效 URL。

另外，除非`Username`已经进行了 URL 编码，否则 URL 可能有其他错误，具体取决于`Username`. （所有查询字符串参数都必须是 URL 编码的，在 .Net 中您可以使用[`HttpUtility.UrlEncode`](http://msdn.microsoft.com/en-us/library/system.web.httputility.urlencode.aspx).）

回复您的评论：

> 我的意思是我不知道他为什么使用 Home？= 它有什么用

它没有用，这是一个错误。~~他*可能*只是意味着~~ *（不，显然不是，请在您的下一条评论后见下文）*

```
String url = "LogIn.aspx?Home=" + Username; 
```

...更正确的是：

```
String url = "LogIn.aspx?Home=" + HttpUtility.UrlEncode(Username); 
```

（从技术上讲，您必须对键和值 [both `"Home"`and `Username`] 都进行 URL 编码，但是 URL 编码的形式`"Home"`是`"Home"`，因此我们可以在不调用键的情况下逃脱。如果键需要任何其中的 URL 保留字符。）

重新评论您完全包含此代码的进一步评论：

> ```
> string retrieveValue;
> protected void Page_Load(object sender, EventArgs e) {
>     this.lblUsername.Text = Request.QueryString["Home?";
>     retrieveValue = this.lblUsername.Text;
> } 
> ```

假设上面的语法错误是固定的（`]`第 3 行缺失），看起来他实际上是`"Home?"`在用作键（参数名称）。这意味着重定向应该是：

```
String url = "LogIn.aspx?" + HttpUtility.UrlEncode("Home?") + "=" + HttpUtility.UrlEncode(Username); 
```

...因为密钥中有一个保留字符（`?`）。因为这将在收到时为您解码，所以上面的代码应该可以工作。

请注意，大多数浏览器可能会让您摆脱他指定的字符串。这是不正确的，但在某种程度上浏览器可能允许。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:02:47.773

不管 TJ 涵盖了哪些错误，他的意图是加载页面 LogIn.aspx，并将变量“Home”设置为访问者用户名。这允许页面“获取”变量并使用它。它基本上是一种将数据从一个页面发送到另一个页面的方式。

# c# - Windows 8 Release VS2012 中的 Facebook C# SDK

> ID：11645984
> 
> 赞同：0
> 
> 时间：2012-07-25T08:51:31.240
> 
> 标签：c#, windows, facebook, sdk, microsoft-metro

我在此处下载了有关用于 Metro 应用程序的 FB SDK C# 的示例：
[https ://github.com/facebook-csharp-sdk/facebook-metro-sample](https://github.com/facebook-csharp-sdk/facebook-metro-sample)

但是，当我们在 VS 2012 express + Windows 8 Release Preview 上运行它时，它无法在记录完成后将状态发布到墙上。

我们收到此错误消息：

> “Facebook.DLL 中发生类型的第一次机会异常`'System.TypeLoadException'`Facebook.DLL 中发生类型异常，`'System.TypeLoadException'` 但未在用户代码中处理附加信息：无法`'System.Text.Encoding'`从程序 集中加载类型`'System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'`。”

有没有人知道如何让它与 VS2012 一起运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:31:38.650

我找到了解决方案，

[从https://github.com/facebook-csharp-sdk/facebook-csharp-sdk/tree/565cc5306486bc188771fddebe40861783f2a5b7](https://github.com/facebook-csharp-sdk/facebook-csharp-sdk/tree/565cc5306486bc188771fddebe40861783f2a5b7)下载新版本 （版本 6.0.20）

在发行版中构建它，并在您的项目中引用新的 facebook.dll

它对我有用

# amazon-web-services - 使用 EC2 实例将 AWS Route 53 Zone Apex 重定向到 AWS S3

> ID：11645985
> 
> 赞同：1
> 
> 时间：2012-07-25T08:51:31.897
> 
> 标签：amazon-web-services, dns, amazon-route53

我有一个裸域，我打算与 QR 码一起使用（因此希望尽可能短 - 例如 qrc.me

我想将此域名重定向到 AWS S3 存储桶（最终是 Cloudfront 分配），但 AWS Route 53 不允许我添加 CNAME 记录作为顶点区域。

我知道有一个名为[http://arecord.net](http://arecord.net)的服务，它看起来可以满足我的需求（给我一个 IP 地址，它将映射到 CNAME），但我有一个完整的完全可定制的 EC2 实例池供我使用所以我想自己做点什么。

那么我的问题是，如何最好地构建一个运行非常精简、接收请求并简单地重定向到 S3 存储桶上的等效 URL 的 EC2 实例。

我是一个 Windows 人，所以在 IIS 方面做得更好，但如果 Apache 能以更好的性能完成同样的工作，我很乐意这样做。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:52:49.413

**这对我有用：**

鉴于 Route 53 的记录：

```
www.foobles.com CNAME foobles.herokuapp.com 
```

我想输入“foobles.com”并被重定向到“www.foobles.com”

1.  **我用 Ubuntu 12.04 创建了一个 EC2 微实例，并将它链接到一个弹性 IP，比如说`11.55.21.22`。然后我为`foobles.com`**

    `foobles.com A 11.55.21.22`

2.  **我设置了一个基本的 Apache 服务器：**

    *（来自我的本地机器）*

    ```
    ssh -i ~/.ssh/cert.pem ubuntu@foobles.com 
    ```

    *（从这里开始，所有命令都在 foobles 服务器上）*

    ```
    sudo apt-get install apache2 
    ```

3.  **我创建了一个重写规则**

    ```
    sudo touch /etc/apache2/sites-available/foobles_zone_apex 
    ```

    并在其中放入以下规则：

    ```
    RewriteEngine On
    RewriteCond %{HTTP_HOST} !^www\.
    RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 
    ```

4.  **我启用了 apache2 重写模块**

    ```
    sudo a2enmod rewrite 
    ```

5.  **并启用该网站**

    ```
    sudo a2ensite foobles_zone_apex 
    ```

6.  **最后，删除了默认主机**

    ```
    sudo a2dissite default 
    ```

7.  **瞧**

    ```
    sudo service apache2 reload 
    ```

如果一切顺利，您应该可以这样做：

```
curl localhost/blargh 
```

看看这个：

```
<html><head>
<title>302 Found</title>
</head><body>
<h1>Found</h1>
<p>The document has moved <a href="http://www.localhost//blargh">here</a>.</p>
<hr>
<address>Apache/2.2.22 (Ubuntu) Server at localhost Port 80</address>
</body></html> 
```

即使在微型实例上，它似乎也很快。不过，我不会过多地公开此 URL，因此在您的情况下，您必须进行性能测试或将其移至更大的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-22T22:34:48.883

作为记录，由于这篇文章在搜索结果中显示得相当高，让我添加一个更新：

此后已在 Amazon S3 中实现了对此的支持，因此您现在也可以在 S3 中托管区域顶点 - 请参阅[http://aws.typepad.com/aws/2012/12/root-domain-website-hosting-for-亚马逊-s3.html](http://aws.typepad.com/aws/2012/12/root-domain-website-hosting-for-amazon-s3.html)

# ssh - SSH 源代码示例

> ID：11645994
> 
> 赞同：1
> 
> 时间：2012-07-25T08:52:02.790
> 
> 标签：ssh

我想编写我自己的*不*基于 OpenSSL 的 SSH 守护程序的实现。它应在非 Linux-oid 环境中使用。

是否有任何可用的 SSH 域（可能不是全功能）的公共域源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:00:50.737

存在许多可以适应您的环境的小型 SSH 守护程序。

如果您关心的是许可问题，请选择非 GPL 的示例代码，您可以随意使用它。（请注意，OpenSSH 使用 BSD 许可证，因此您可以随意使用它。） [Dropbear](https://matt.ucc.asn.au/dropbear/dropbear.html)是一个不错的小型服务器，通常用于嵌入式环境。

另外，请查看 Wikipedia 的[SSH 服务器比较](http://en.wikipedia.org/wiki/Comparison_of_SSH_servers)。它并不完整，但它提供了一些思考的食物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:58:10.533

如果你的目标是编写你自己的守护进程，你不能只阅读OpenSSH的源代码，如果它太复杂，那么你可以看看：

[http://plan9.bell-labs.com/sources/contrib/blstuart/ssh/](http://plan9.bell-labs.com/sources/contrib/blstuart/ssh/)

我认为这个是在 Lucent Public License Version 下发布的，写的是 i Plan 9 C，与 C89 或 C99 有点不同。但是应该很容易理解。

[http://www.gnu.org/licenses/license-list.html#lucent102](http://www.gnu.org/licenses/license-list.html#lucent102)

或者看看 SSH 的 Erlang 实现。

[https://github.com/erlang/otp/tree/maint/lib/ssh/src](https://github.com/erlang/otp/tree/maint/lib/ssh/src)

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:48:54.970

emil 和 ghoti 已经有指向源代码示例的指针。

但我认为要开始这样的项目，您应该阅读[底层协议](http://en.wikipedia.org/wiki/Secure_Shell)的文档。