# StackOverflow 问答 11953000-11953999

# flash - 如何在 Haxe 中打开已有的 flash 项目？

> ID：11953001
> 
> 赞同：1
> 
> 时间：2012-08-14T13:10:28.917
> 
> 标签：flash, haxe, fla

谁能告诉我，如何将现有的 fla 或 swf 转换为 Haxe 可读（.hx 和 .nmml）？我想将它部署在 ios 设备上。并且可以编辑源代码（我知道在 ios 设备中部署 Haxe 项目的过程，但想知道如何使用现有的 flash 项目创建一个 haxe 项目）。请建议我，提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:18:48.633

首先，你做不到。

您可以通过某些工具将 as3 代码转换为 haxe。写一个很容易，我前一段时间就这样做了。此外，至少有[一个开源工具](https://github.com/geekrelief/as3tohaxe)可以做到这一点。我不确定它有多好。

另一件事是你的图形。我几乎可以肯定您无法将 .fla 转换为可以在 iOS 上自动使用的图形。但是我们有一个类似于 flash API 的框架，用于在非 flash 平台上部署图形，因此可能存在一些工具可以将 flash 矢量图形转换为该框架可以理解/从 .fla 中提取的格式，如果框架可以理解它的话自己的。我会对这个问题的评论感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:11:01.643

这比仅仅打开一个 Flash 项目并使用 Haxe 编译它更复杂——它们是两种不同的语言，如果你的目标是 iOS，则需要两种不同的环境。

但是，AS3（闪存）和 Haxe 之间存在相似之处，因此您可以复制一些代码。以下是一些有用的链接：

*   [在 Haxe 中使用 AS3 类](http://haxe.org/doc/flash/usingas3classes)- 包括指向可以帮助自动将“.as”类转换为“.hx”类的工具的链接。它不是 100% 完美，但比手工完成要好。

*   [在 NME 中使用 SWF 资产 - 跨平台](http://www.joshuagranick.com/blog/2012/01/02/use-swf-assets-in-nme-cross-platform/)- Joshua Granick 有一篇关于在 Haxe/NME 中使用已编译的 SWF 资产的博客文章，它编译为 C++ 目标，包括 iOS。

在将 ActionScript 类转换为 Haxe 和使用 SWF 资源之间，您可以让相当多的项目在 iPhone 上运行。不要指望它只是一个简单的点击按钮。如果您遇到更多问题，我建议您在[Haxe 邮件列表](http://groups.google.com/group/haxelang?hl=en)或[NME 论坛](http://www.haxenme.org/forums/)上提问。

# css - 使用 @font-face 和使用 IcoMoon 创建的自定义图标字体时，pc 上的 chrome 与 mac 上的不同垂直对齐方式

> ID：11953003
> 
> 赞同：1
> 
> 时间：2012-08-14T13:10:34.057
> 
> 标签：css, svg, font-face, custom-font

在 PC 版 Chrome 上，自定义字体似乎总是定位到基线（这可能是正确的，但是对于其他浏览器来说是坚持的）

这是 JS 小提琴：

[http://jsfiddle.net/hLVZU/12/](http://jsfiddle.net/hLVZU/12/)

虽然已解决（正如您从小提琴中看到的那样）......将在答案中详细说明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:10:34.057

这似乎与最高的角色有关。为了解决这个问题，我创建了一个一直到 IcoMoon 提供的网格底部的字符（我不太了解字体，但如果你想创建一个带有实际加音器）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T15:22:32.793

我注意到您的 @font-face 规则中的 SVG 字体 ID 不正确。使用正确的字体 ID 查看这个 jsfiddle：http: [//jsfiddle.net/hLVZU/13/](http://jsfiddle.net/hLVZU/13/)

不管怎样，我试图找出导致不同格式之间差异的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T17:51:56.910

我现在已经更新了应用程序，当您只选择小字形时，生成的字体应该不再有这个问题。

# php - PHP Sendmail 放弃

> ID：11953005
> 
> 赞同：0
> 
> 时间：2012-08-14T13:10:37.553
> 
> 标签：php, sendmail

因此，当我们的体育俱乐部邮件列表被新成员淹没（发生在新学年）时，它又一次迎来了一年中的时间。

去年我们尝试使用 php 的`mail()`函数发送电子邮件。

这在前 50 个左右工作正常（并且一次发送一封电子邮件继续正常工作）。然而，大约 50 岁之后，`mail()`声称它已经发送了邮件，但在另一端没有人收到它们。

我应该指出，在我的实现中，它只是循环遍历我们数据库中的所有电子邮件并运行以下函数：

```
function sendMail($from,$fromname,$to,$subject,$body){
    $subject = stripslashes($subject);
    $body = nl2br(stripslashes($body));
    $headers = '';
    $headers .= "From: $fromname <$from>\n";
    $headers .= "Reply-to: $fromname <$from>\n";
    $headers .= "Return-Path: $fromname <$from>\n";
    $headers .= "Message-ID: <" . md5(uniqid(time())) . "@" . $_SERVER['SERVER_NAME'] . ">\n";        
    $headers .= "MIME-Version: 1.0\n";
    $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
    $headers .= "Date: " . date('r', time()) . "\n";
    return mail($to,$subject,$body,$headers);
} 
```

有谁知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:24:14.817

您可能被 SMTP 中继上的 ratelimit 阻止。

我建议不要发送单独的电子邮件，而是将每个人都设置为该字段，并且该`BCC`字段中没有人。`TO``CC`

```
$headers .= 'Bcc: ' . implode(",", $email_array) . "\r\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:52:05.237

使用不带“To:”-Header 的 Bcc 会使电子邮件“To:”-Header “未公开的收件人”，这些邮件通常会被严格的服务器阻止。我不建议将其用于时事通讯，'您将被列入黑名单。如果您将此邮件发送给同一 ISP 的几个用户，您肯定会被列入黑名单。

我会推荐一个每 30 分钟左右发送大量邮件的脚本。

# shell - shell script to update a set of txt files

> ID：11953007
> 
> 赞同：1
> 
> 时间：2012-08-14T13:10:46.317
> 
> 标签：shell

I would like using shell or any script to modify all txt files available in myfolder as follow

```
 test = data(x, y); 
```

with

```
test = data(z,x,y);  // by adding z 
```

and :

```
 test.value(f1, "directory_1/directory_2/directory_3/file"); 
```

with

```
test.value(f1, "/directory_3/file"); // by removing directory_1/directory_2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:18:42.293

```
cd myfolder
for FILE in *txt ; do
    sed -i 's/test = data(x,\s*y);/test = data(z,x,y);/;/test.value(f1, "/s="[^/]*/[^/]*\(/[^/]*/[^/]*");\)$=\1=;' "$FILE"
done 
```

if your sed isn't GNU, then use

```
cd myfolder
for FILE in *txt ; do
    sed 's/test = data(x, y);/test = data(z,x,y);/test.value(f1, "/s="[^/]*/[^/]*\(/[^/]*/[^/]*");\)$=\1=;' "$FILE" > "$FILE.tmp"
    mv "${FILE}.tmp" "$FILE"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:18:06.893

将 sed 与 bash 一起使用：

```
for i in *.txt; do
  if [ -f $i ]; then
    sed -i 's!test = data(\s*x,\s*y)!test = data(z,x,y)!' "$i"
    sed -i 's!test.value(f1, "[^/]*/[^/]*\(/[^"]*\)");!test.value(f1, "\1");!' "$i"
  fi  
done 
```

# .htaccess - Revising my ReWrite Code

> ID：11953009
> 
> 赞同：0
> 
> 时间：2012-08-14T13:11:04.147
> 
> 标签：.htaccess, mod-rewrite

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule (.*)\.html$ fetch.php?id=$1 
```

I have this in my htaccess file and it works fine, but I want to know if there is a way to rewrite this so that instead of just pulling the id # i can pull the category and title up instead or will i need to do something like this

```
RewriteRule (.*)/(.*)/(.*)\.html$ fetch.php?id=$1&category=$2&title=$3 
```

Also if this is what I need to do, how will I go about changing my title to have no spaces and only have dashes inbetween them? I heard that urls don't like spaces. I have read somewhere else they used a php code where the spaces were turned into "-" or "_" to be read into the page but reverted back to be read in sql. Let me know if you need to know more about my situation. Thanks.

UPDATE!

```
RewriteRule (.*)/(.*)/(.*)\.html$ fetch.php?id=$1&category=$2&title=$3 
```

This is the htaccess rule

```
<a href="<?php echo $row_getDisplay['id']; ?>/<?php echo $row_getDisplay['category']; ?>/<?php echo urlencode($row_getDisplay['title']); ?>"> 
```

that is my link .. this method I get it to pull up with id/category/title with no spaces but it has no css or images displaying. i'm pulling by ID because that's how my fetch.php is pulling it i don't know how to set it so it pulls by category and title.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:17:16.250

我建议不要这样做，因为这不是很可扩展，您可能想尝试以下方法：

在您的 htaccess 中添加以下内容：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* fetch.php/%{REQUEST_URI} [QSA,L] 
```

这会将您的整个 url 放入 path_info 环境变量中，然后您可以在后端代码中使用它。

RewriteCond 部分确保只有在请求的文件实际上不存在时才会重写 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:38:44.583

> 这种方法我得到它以没有空格的 id/category/title 拉起，但它没有显示 css 或图像。我按 ID 拉，因为这就是我的 fetch.php 拉它的方式，我不知道如何设置它，所以它按类别和标题拉。

这可能是因为您的所有链接都是相对的，并且基本 URI 已从`/something.html`(ie `/`)更改为 ( `/something/foo/bar.html`ie `/something/foo/`)，因此所有相对链接现在都已断开。尝试将其添加到页面的标题中：

```
<base href="/"> 
```

# c# - DriveInfo 在当前上下文中不存在？

> ID：11953014
> 
> 赞同：2
> 
> 时间：2012-08-14T13:11:24.523
> 
> 标签：c#, linq, driver

为什么我在下面的 C# LINQ 代码中收到以下错误

`DriveInfo does not exist in current context`?

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var drives = DriveInfo.GetDrives()
             .Where(drive => drive.IsReady && drive.DriveType == DriveType.Removable);
        }
    }
} 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T13:12:58.480

你需要一个`using`指令：

```
using System.IO; 
```

... 导入[`System.IO.DriveInfo`](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.aspx).

# teechart - Returning the y value of a drawline

> ID：11953017
> 
> 赞同：0
> 
> 时间：2012-08-14T13:11:28.613
> 
> 标签：teechart

Is there any way to get the y value of a drawline. I can get the only start and end position.

I try to catch the chance when a candle of moving financial series breaks through a drawline.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:48:20.457

您可以在大多数 TeeChart 版本的功能演示中包含的*所有功能\欢迎！\图表样式\标准\线（条）\插值线系列中执行一些操作。*此示例基于我在此处制作的插值示例：

TeeChart VCL 和 Delphi：[http](http://www.teechart.net/support/viewtopic.php?t=2828) ://www.teechart.net/support/viewtopic.php?t= 2828 TeeChart ActiveX * VB6：[http ://www.teechart.net/support/viewtopic.php?t=4161](http://www.teechart.net/support/viewtopic.php?t=4161)

如果需要更具体的信息，请告诉我们您使用的 TeeChart 版本。

# php - PHP中的拓扑排序

> ID：11953021
> 
> 赞同：7
> 
> 时间：2012-08-14T13:11:36.080
> 
> 标签：php, algorithm

我为 PHP 找到了这个拓扑排序函数：

来源： http: [//www.calcatraz.com/blog/php-topological-sort-function-384/](http://www.calcatraz.com/blog/php-topological-sort-function-384/)

```
function topological_sort($nodeids, $edges) {
    $L = $S = $nodes = array();
    foreach($nodeids as $id) {
        $nodes[$id] = array('in'=>array(), 'out'=>array());
        foreach($edges as $e) {
            if ($id==$e[0]) { $nodes[$id]['out'][]=$e[1]; }
            if ($id==$e[1]) { $nodes[$id]['in'][]=$e[0]; }
        }
    }
    foreach ($nodes as $id=>$n) { if (empty($n['in'])) $S[]=$id; }
    while (!empty($S)) {
        $L[] = $id = array_shift($S);
        foreach($nodes[$id]['out'] as $m) {
            $nodes[$m]['in'] = array_diff($nodes[$m]['in'], array($id));
            if (empty($nodes[$m]['in'])) { $S[] = $m; }
        }
        $nodes[$id]['out'] = array();
    }
    foreach($nodes as $n) {
        if (!empty($n['in']) or !empty($n['out'])) {
            return null; // not sortable as graph is cyclic
        }
    }
    return $L;
} 
```

我看起来又漂亮又矮。无论如何，对于一些输入 - 我在输出中得到重复的行 - 请参阅[http://codepad.org/thpzCOyn](http://codepad.org/thpzCOyn)

一般来说，如果我删除重复项，排序似乎是正确的`array_unique()`

我用两个例子检查了这个函数，排序本身看起来是正确的。

我应该只打电话`array_unique()`给结果吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-28T19:51:19.317

我是原始拓扑排序函数的作者。感谢 Alex 提醒我注意重复边缘问题。我更新了函数以正确删除重复的边和节点。更新版本在这里：

[http://www.calcatraz.com/blog/php-topological-sort-function-384](http://www.calcatraz.com/blog/php-topological-sort-function-384)（与原始链接相同）

我添加了以下内容来实现重复数据删除：

```
// remove duplicate nodes
$nodeids = array_unique($nodeids);  

// remove duplicate edges
$hashes = array();
foreach($edges as $k=>$e) {
    $hash = md5(serialize($e));
    if (in_array($hash, $hashes)) { unset($edges[$k]); }
    else { $hashes[] = $hash; }; 
} 
```

我必须序列化边缘以确保正确删除重复项。我还稍微整理了其余的功能并添加了一些评论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T13:53:44.943

你会得到重复的线条，因为有重复的边缘。我不是图论暴徒，但我很确定这是不合法的：

```
0 => 
array (
  0 => 'nominal',
  1 => 'subtotal',
),
2 => 
array (
  0 => 'nominal',
  1 => 'subtotal',
),
... 
```

您可以在构造节点的部分添加测试，如下所示：

```
if ($id==$e[0] && !in_array($e[1], $nodes[$id]['out']))
{
  $nodes[$id]['out'][]=$e[1];
}
if ($id==$e[1] && !in_array($e[0], $nodes[$id]['in'])) // Not needed but cleaner
{
  $nodes[$id]['in'][]=$e[0];
} 
```

...或者只是确保您没有将重复的边缘传递给函数。:P

# c# - multiple responses to client of WCF service

> ID：11953026
> 
> 赞同：0
> 
> 时间：2012-08-14T13:11:49.250
> 
> 标签：c#

I need your guidance.The scenario is, client c1 send request to WCF service.Then WCF service start one EXE EXE1 at server side.EXE1 writes some data in PIPE,then WCF Service will read that data and send response to client c1. But if EXE1 again writes some data in Pipe then WCF service read that data and again send it to client C1 and so on....in this case client not sending new request but still getting multiple responses from WCF service.
client may be in c# or in c language,so it should not be dependent on client

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:14:36.053

我认为您正在寻找的是[DUPLEX](http://msdn.microsoft.com/en-us/library/ms731064.aspx)服务。MSDN 文章有一个很好的 Calculator Duplex 服务示例

# iphone - NSInvalidArgumentException reason:-[CLLocation distanceFromLocation:]

> ID：11953030
> 
> 赞同：0
> 
> 时间：2012-08-14T13:11:59.983
> 
> 标签：iphone, objective-c, ios, ios-3.x

I have this code to get only cafes that are within a radius of 10 km :

```
for (NSString *ndlog in log) {
    NSString *name = [names objectAtIndex:i];
    NSString *city = [citys objectAtIndex:i];
    NSString *chain = [chains objectAtIndex:i];
    NSString *street = [streets objectAtIndex:i];
    NSString *ndlig = [lig objectAtIndex:i];
    dlog = [ndlog doubleValue];
    dlig = [ndlig doubleValue];
    NSLog(@"%@,%@,%@,%@,%f,%f,%@,%@", name, city, chain, street, dlog, dlig, ndlog, ndlig);
    CLLocation *location = [[CLLocation alloc] initWithLatitude:dlog longitude:dlig];
    double meters = [userLocation distanceFromLocation:location];
    if (meters < 10000) {
        NSString *data = [NSString stringWithFormat:@"%@,%@,%@,%@", name, city, chain, street];
        [tableData addObject:data];
    }
    i++;
} 
```

it runs on the iOS Simulator but Crashes on iPhone 2G. (iOS 3.1.3)

what is not right in my code?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:43:13.577

该方法`distanceFromLocation`仅适用于 iOS 3.2 及更高版本。从[文档中](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html)：

> 在 iOS 3.2 及更高版本中可用。在 CLLocation 中声明。

我猜你的模拟器是更新版本的iOS。

# java - 如何将 jsse.enableSNIExtension 设置为 false

> ID：11953032
> 
> 赞同：6
> 
> 时间：2012-08-14T13:12:04.480
> 
> 标签：java

我正在尝试将 jsse.enableSNIExtension 属性设置为 false，但每次尝试时我都会获得 java 手册。

```
java -Djsse.enableSNIExtension=false 
```

我在这里提到了[SSL 握手警报中提到的问题：unrecognized_name error since upgrade to Java 1.7.0](https://stackoverflow.com/questions/7615645/ssl-handshake-alert-unrecognized-name-error-since-upgrade-to-java-1-7-0)

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-05T18:44:28.610

邪恶的晚了，但在这里：

```
System.setProperty ("jsse.enableSNIExtension", "false"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-28T10:33:11.730

在命令行中执行以下命令以运行“c:\Jenkins”中存在的 Jenkins war 文件

```
java -Djsse.enableSNIExtension=false -jar c:\Jenkins\jenkins.war 
```

# css - Moz 填充在按钮上的行为不同

> ID：11953040
> 
> 赞同：0
> 
> 时间：2012-08-14T13:12:24.320
> 
> 标签：css, firefox, cross-browser

在我所有的按钮上，填充在 Firefox 中的行为不同。从研究中我知道这是因为 FF 在默认样式表中有一些奇怪的设置，但我已将一般修复添加到我的样式表中。没关系，我可以忍受，除了一个按钮不适合 Firefox 的工具栏，因为填充使它太大。

Jsfiddle[在这里](http://jsfiddle.net/QRbUv/)。

常规修复；

```
input[type=button]::-moz-focus-inner{padding:0; border:0;} 
```

删除了一些东西的按钮的 css；

```
.buttonBlue {background-color:#008abd; border-radius:0.2em; 
             font-family:inherit; 
             color:white; border: 1px solid black;
             cursor:pointer; 

             filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#008abd', endColorstr='#036b91');
             background: -webkit-gradient(linear, left top, left bottom, from(#008abd), to(#036b91));
             background: -moz-linear-gradient(top,  #008abd,  #036b91);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:37:40.173

如果将元素的外观属性设置为无，任何表现良好的浏览器都会放弃其 gui 风格。
[https://developer.mozilla.org/en-US/docs/CSS/-moz-appearance](https://developer.mozilla.org/en-US/docs/CSS/-moz-appearance)

对于按钮，外观的默认值为“按钮”。明确地将其设置为“无”应该覆盖浏览器的内置平台原生样式，包括奇怪的填充。

Firefox 不是唯一对此属性做出反应的浏览器：Safari 和 Chrome 监听 -webkit-appearance 变体，而 Opera 监听 -o-appearance 变体。我不知道 MSIE9 或 10。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:25:14.830

我通过使用 css 前缀定位 moz 找到了解决方法。这并不理想，但它有效，我需要转移到其他事情上，而不是担心一个按钮！反正就是这里。

```
@-moz-document url-prefix(){
                           .buttonBlue 
                             { padding:0px 7px 0px 4px !important;} 
                            } 
```

# android - Android，RoboGuice 2.0，ActivityInstrumentationTestCase2 在 Eclipse 上因 NoClassDefFoundError 而失败，可与 maven 一起使用

> ID：11953041
> 
> 赞同：0
> 
> 时间：2012-08-14T13:12:25.350
> 
> 标签：android, eclipse, maven, integration-testing, roboguice

在我们的应用程序上使用 RoboGuice 2.0 时，我们在 Eclipse 中运行集成单元测试时遇到问题。

当我们尝试在模拟器上运行单元测试类（作为 Android JUnit 测试）时，我们得到以下异常，因此测试甚至没有运行：

```
junit.framework.AssertionFailedError: Exception in constructor: testAddNote (java.lang.NoClassDefFoundError: br.org.certi.android.pgpsip.client.measure.activity.MeasureActivity
at br.org.certi.android.pgpsip.client.test.MeasureActivityTest.<init>(MeasureActivityTest.java:14)
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
at junit.runner.BaseTestRunner.getTest(BaseTestRunner.java:103)
at android.test.AndroidTestRunner.getTest(AndroidTestRunner.java:127)
at android.test.AndroidTestRunner.setTestClassName(AndroidTestRunner.java:55)
at android.test.suitebuilder.TestSuiteBuilder.addTestClassByName(TestSuiteBuilder.java:81)
at android.test.InstrumentationTestRunner.parseTestClass(InstrumentationTestRunner.java:418)
at android.test.InstrumentationTestRunner.parseTestClasses(InstrumentationTestRunner.java:399)
at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:364)
... 
```

这是测试类的相关部分，我希望它足够了：

```
public class MeasureActivityTest extends ActivityInstrumentationTestCase2<MeasureActivity> {

public MeasureActivityTest() {
    super(MeasureActivity.class);
} 
```

使用 maven ( `mvn clean install`) 测试运行完美。

一件重要的事情是，如果活动类不依赖于 RoboGuice，它也可以在 eclipse 上正常工作。

的相关部分`pom.xml`：

```
<dependency>
    <groupId>org.roboguice</groupId>
    <artifactId>roboguice</artifactId>
    <version>2.0</version>
</dependency>
<dependency>
    <groupId>com.google.inject.extensions</groupId>
    <artifactId>guice-multibindings</artifactId>
    <version>3.0</version>
    <exclusions>
        <exclusion>
            <groupId>com.google.inject</groupId>
            <artifactId>guice</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

我们注意到，当我们将 roboguice、guice 和注入依赖项复制到应用程序的 libs 文件夹（并将依赖项标记为 pom.xml 中提供的）时，测试在 eclipse 上运行良好。所以这似乎是在 ADT 中运行的 android 单元测试无法识别 maven 依赖项的问题。

它似乎与这个问题非常相似： [Android/RoboGuice/Maven: ClassNotFoundException in Eclipse, but not from Maven command line](https://stackoverflow.com/questions/7303836/android-roboguice-maven-classnotfoundexception-in-eclipse-but-not-from-maven-c)，而是在运行单元测试而不是实际应用程序时。

任何有关如何解决此问题的想法将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-17T22:32:25.743

我们似乎找到了问题所在。

我们在 Eclipse 上使用了两个项目，实际上是三个：一个父项目，一个用于应用程序，一个用于测试。

NoClassDefFoundError 问题来自于从 Eclipse 内部运行测试时从错误的依赖项加载 RoboGuice 的类。

我们注意到这样的消息：“... has used a different Lroboguice/util/RoboContext; during pre-verification ...”，略高于 LogCat 视图上的错误。

似乎已经解决了这个问题的是从测试项目中删除（不需要的）依赖项，并将其仅保留在实际的应用程序项目中，现在一切都可以在 Maven 和 Eclipse 中正常工作。

这似乎表明使用 eclipse 的 dex 生成不止一次处理 RoboGuice jar，在运行要测试的应用程序时生成不同的引用。如果确实需要依赖项，我不知道如何解决这个问题。

以为我会在这里回答这个问题，希望它可以帮助其他人......

# html - Symfony2 和 Twitter 引导程序

> ID：11953043
> 
> 赞同：22
> 
> 时间：2012-08-14T13:12:30.587
> 
> 标签：html, css, symfony, twitter-bootstrap, twig

我今天刚刚在 SO 上遇到了 Twitter Bootstrap。我**浏览**了一些在线教程，如果到目前为止我的理解是正确的，那么使用 TB 基本上包括：

1.  下载 TB，提取 CSS 文件等
2.  在您的 HTML 文档中引用所需的 CSS、JS 文件并使用定义的 CSS 模式

我想将 Twitter Bootstrap 与 Symfony2 一起使用。鉴于我对如何使用 TB 的理解，我认为将它与 Symfony 一起使用会相对容易，所以我很惊讶地看到有（实际上有几个）Bundles 可以与 Symfony 一起使用。

所以我的问题是：

1.  为什么需要 Bundle 才能将 Twitter Bootstrap 与 Symfony2 一起使用？- 我上面解释的方法会不起作用（即直接在树枝模板中添加引用）吗？

2.  由于有几个 Twitter Bootstrap Bundles 可用（最后计数有 3 个），这是最容易使用的（它必须是最近提交积极支持的一个，而不是一个死项目）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-14T13:23:25.823

我很确定这些捆绑包很棒，但它们各有优缺点。你也可以直接在你的项目中使用没有 Bundle 的 TB。这就是我个人所做的，这样：

*   git clone TB in web/（获取最新更新并保持更新）
*   我使用 Assetic 和 less 过滤器直接在我的树枝模板中调用 bootstrap.less。这样，我可以创建自己的 .less 文件，例如 @imports TB 并使用他们惊人的 mixin。

这种方式真的很强大。再加上 yui-compressor，当我在无调试模式下使用 Assetic 时，我所有的 js 和 less 文件都被编译成一个 .css 输出和一个 .js 输出。您可以从所有 TB 功能中受益，使用 .less，而不是 .css

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-21T08:01:40.007

有 2 个主要的包提供 symfony 与 Twitter Bootstrap 的集成：

*   [MopaBootstrapBundle](https://github.com/phiamo/MopaBootstrapBundle)
*   [BcBootstrapBundle](http://knpbundles.com/braincrafted/bootstrap-bundle)

在我看来：

**MopaBootstrapBundle**更复杂，提供自己的布局结构（因为你也可以创建自己的）和许多定义的功能、额外的资产、表单和其他集成

**BcBootstrapBundle**更简单，更清晰，您使用自己的布局结构，并且有很多定义的功能，额外的资产，表单和其他集成

**不要使用任何 intergtaion 捆绑包**也是一种选择，但你会松散与表单、资产、更少等的集成（正如@Acyra 在他的评论中提到的那样）

我更喜欢使用具有额外集成功能的 BcBootstrapBundle 并使用我自己的自定义布局结构。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T13:37:49.723

您可以使用 Twitter Boostrap (TB) 仅将 css 添加到您的项目中。然后，你就有了一个起点，可以做一些比从头开始更直观的事情。正如你在第一部分中描述的那样。

但是，您还可以从处理与 TB 的模板集成的 Bundle 中检索更多有趣的东西。例如：

*   [具有设置一些基本列的默认布局](https://github.com/toaotc/ToaTwitterBootstrapBundle/blob/master/Resources/views/layout.html.twig)
*   [crud 生成的集成](https://github.com/toaotc/ToaTwitterBootstrapBundle/tree/master/Resources/skeleton/crud/views)
*   [有一个基本的表单元素](https://github.com/ruian/TwitterBootstrapBundle/blob/master/Resources/views/Form/bootstrap_v2.html.twig)

例如，使用 symfony 1.4（*我知道这篇文章谈论的是 sf2*），你有一个插件可以向管理生成器添加一个新主题，以实现一个很好的 TB 集成，而不是默认的。我知道 sf2 中没有官方的管理生成器，但它可以用于 CRUD。

自 symfony 1.0 以来，另一件事是正确的，并不是所有的包都很好地实现、开发、维护、测试、记录等。（除了来自核心团队的那些（FOS* Bundle、Doctrine、Propel 等..） ）。所以我建议你对它们都进行测试，看看其中一个是否符合你的需要，否则会受到启发来改进它们（它们几乎都在 github 上）或构建你自己的。

顺便说一句，有[很多 Bundle](http://knpbundles.com/search?q=twitter) ..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-21T17:18:15.400

**Symfony 和 Bootstrap 的更新：** Symfony 的文档细节似乎总是有点落后，所以这里是 Symfony 的更新。2.6 及更高版本现在包括与 Twitter Bootstrap 的基本集成。

[http://symfony.com/blog/new-in-symfony-2-6-bootstrap-form-theme](http://symfony.com/blog/new-in-symfony-2-6-bootstrap-form-theme)

希望这可以节省一些人的时间，并且可以按照他们在上面的 Symfony 文档中解释的那样让它工作！

# php - cakephp SQL 帮助！在哪里？

> ID：11953044
> 
> 赞同：1
> 
> 时间：2012-08-14T13:12:31.510
> 
> 标签：php, mysql, cakephp

我正在尝试在 CakePHP 中执行 SQL 更新。这是我的代码：

```
$sql = "
  UPDATE carts 
  SET
    qty = ".$this->data['Cart']['qty'].",
    process = 'UnPaid'
  WHERE ct_session_id = '".$this->data['Cart']['ct_session_id']."'
    AND product_id = '".$this->passedArgs['pd_id']."'
    AND key = '".$this->Session->read('Cart.key', $newCartkey)."'
";      
$this->Cart->query($sql); 
```

我收到此错误：

```
SQL Error: 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'key = 'bwfgkxms'' at line 3 
```

我的代码产生的查询是：

```
UPDATE carts
SET
  qty = 111,
  process = 'UnPaid'
WHERE ct_session_id = '3254430f577669bb8ecdb8b8aadf1b96'
  AND product_id = '51'
  AND key = 'bwfgkxms' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T13:13:27.593

`key`是 MySQL 中的[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，需要在列名中用反引号括起来。

```
$sql = "
 UPDATE carts 
 SET qty = ".$this->data['Cart']['qty'].", process = 'UnPaid'
 WHERE ct_session_id = '".$this->data['Cart']['ct_session_id']."'
   AND product_id = '".$this->passedArgs['pd_id']."'
   AND `key` = '".$this->Session->read('Cart.key', $newCartkey)."'
"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:42:25.467

养成使用 CakePHP 约定的习惯对您大有裨益。这样做有很多好处，当你做一些事情，比如手写一个可以用 CakePHP 轻松完成的查询时，你会让自己变得更加困难，同时也会让自己面临许多问题/安全问题。未来。

**CakePHP 方式（具有以下约定中包含的所有优点）：**

```
$this->Cart->updateAll(
    array(
        'Cart.qty' => $this->data['Cart']['qty'],
        'Cart.process' => 'UnPaid'),
    array(
       'Cart.ct_session_id' => $this->data['Cart']['ct_session_id'],
       'Cart.product_id' => $this->passedArgs['pd_id'],
       'Cart.key' => $this->Session->read('Cart.key', $newCartkey)
    )
); 
```

有关更新数据（和/或一般保存数据）的更多详细信息：http: [//book.cakephp.org/2.0/en/models/saving-your-data.html#model-updateall-array-fields-array -条件](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-updateall-array-fields-array-conditions)

# c# - SQL Server 连接字符串：Web 托管服务提供的连接字符串似乎不正确

> ID：11953048
> 
> 赞同：1
> 
> 时间：2012-08-14T13:12:35.940
> 
> 标签：c#, asp.net, sql-server-2008, connection-string, membership-provider

我有一个带有 SQL Server 2008 R2 数据库的 ASP.NET C# 应用程序，该数据库具有整合的成员资格提供程序和应用程序数据库。我正在尝试根据网络托管服务提供商提供的说明修改我的网络配置，但我认为我遗漏了一些东西。

这是我当前的 web.config 连接字符串：

```
<connectionStrings>
<add name="RestaurantDB" connectionString="data source=SFP\SFP_SQL_SVR;attachdbfilename=C:\Users\Susan\Documents\Databases\Restaurants.mdf;Integrated Security=SSPI;"/>

<add name="RestaurantsEntities" connectionString="metadata=res://*/Restaurant.csdl|res://*/Restaurant.ssdl|res://*/Restaurant.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=SFP\SFP_SQL_SVR;attachdbfilename=C:\Users\Susan\Documents\Databases\Restaurants.mdf;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />

</connectionStrings> 
```

这是网络托管服务给我的连接字符串：

```
Data Source=RESTAURANT.db.9319451.hostedresource.com; Initial Catalog=RESTAURANT; User ID=your username; Password='your password'; 
```

如何根据上述情况修改我当前的连接字符串？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:19:54.970

只需更换`data source=SFP\SFP_SQL_SVR;attachdbfilename=C:\Users\Susan\Documents\Databases\Restaurants.mdf;Integrated Security=SSPI;`

到

`Data Source=RESTAURANT.db.9319451.hostedresource.com; Initial Catalog=RESTAURANT; User ID=your username; Password='your password';`

像 ：

```
<add name="RestaurantDB" connectionString="data source=RESTAURANT.db.9319451.hostedresource.com; 
Initial Catalog=RESTAURANT; User ID=your username; Password='your password'> 

<add name="RestaurantsEntities" connectionString="metadata=res://*/Restaurant.csdl|res://*/Restaurant.ssdl|res://*/Restaurant.msl;
provider=System.Data.SqlClient;provider connection string=&quot;Data Source=RESTAURANT.db.9319451.hostedresource.com; 
Initial Catalog=RESTAURANT; User ID=your username; Password='your password;
multipleactiveresultsets=True;App=EntityFramework&quot;" 
providerName="System.Data.EntityClient" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:22:49.933

我不知道如何处理这个问题，但我只是给你一个想法。试试看可能行得通首先像这样修改您的**RestaurantDB**连接字符串

```
<add name="RestaurantDB" connectionString="RESTAURANT.db.9319451.hostedresource.com;Initial Catalog=RESTAURANT; User ID=your username; Password='your password';"/> 
```

和**餐厅**这样的实体

```
<add name="RestaurantsEntities" connectionString="metadata=res://*/Restaurant.csdl|res://*/Restaurant.ssdl|res://*/Restaurant.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=RESTAURANT.db.9319451.hostedresource.com;Initial Catalog=RESTAURANT;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

如果上述方法不起作用，那么还要在 RestaurantsEntities 连接字符串中添加用户 ID 和密码

# c# - iOS 和 Android 中的 AES 加密，以及 C#.NET 中的解密

> ID：11953053
> 
> 赞同：13
> 
> 时间：2012-08-14T13:12:46.430
> 
> 标签：c#, android, ios, aes

先说第一件事。前段时间，我需要在 Android 中使用简单的 AES 加密来加密密码并将其作为参数发送给密码被解密的 .net Web 服务。

以下是我的安卓加密：

```
 private static String Encrypt(String text, String key)
        throws Exception {
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        byte[] keyBytes= new byte[16];
        byte[] b= key.getBytes("UTF-8");
        int len= b.length;
        if (len > keyBytes.length) len = keyBytes.length;
        System.arraycopy(b, 0, keyBytes, 0, len);
        SecretKeySpec keySpec = new SecretKeySpec(keyBytes, "AES");
        IvParameterSpec ivSpec = new IvParameterSpec(keyBytes);
        cipher.init(Cipher.ENCRYPT_MODE,keySpec,ivSpec);

        byte[] results = cipher.doFinal(text.getBytes("UTF-8"));
        String result = Base64.encodeBytes(results);
        return result;
        } 
```

然后我用 C# 解密它：

```
 public static string Decrypt(string textToDecrypt, string key)
    {
        System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();

        RijndaelManaged rijndaelCipher = new RijndaelManaged();
        rijndaelCipher.Mode = CipherMode.CBC;
        rijndaelCipher.Padding = PaddingMode.PKCS7;

        rijndaelCipher.KeySize = 0x80;
        rijndaelCipher.BlockSize = 0x80;

        string decodedUrl = HttpUtility.UrlDecode(textToDecrypt);
        byte[] encryptedData = Convert.FromBase64String(decodedUrl);
        byte[] pwdBytes = Encoding.UTF8.GetBytes(key);
        byte[] keyBytes = new byte[0x10];
        int len = pwdBytes.Length;
        if (len > keyBytes.Length)
        {
            len = keyBytes.Length;
        }
        Array.Copy(pwdBytes, keyBytes, len);
        rijndaelCipher.Key = keyBytes;
        rijndaelCipher.IV = keyBytes;
        byte[] plainText = rijndaelCipher.CreateDecryptor().TransformFinalBlock(encryptedData, 0, encryptedData.Length);
        return encoding.GetString(plainText);
    } 
```

这就像一个魅力，但是当我尝试在 iOS 中做同样的事情时问题就来了。我是 iphone/ipad 的新开发应用程序，所以我用谷歌搜索了它，几乎所有提供的代码示例如下：

```
- (NSData *)AESEncryptionWithKey:(NSString *)key {
char keyPtr[kCCKeySizeAES128]; // room for terminator (unused)
bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

// fetch key data
[key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

NSUInteger dataLength = [self length];

size_t bufferSize = dataLength + kCCBlockSizeAES128;
void *buffer = malloc(bufferSize);

size_t numBytesEncrypted = 0;

CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                      keyPtr, kCCKeySizeAES128,
                                      NULL /* initialization vector (optional) */,
                                      [self bytes], [self length], /* input */
                                      buffer, bufferSize, /* output */
                                      &numBytesEncrypted);
if (cryptStatus == kCCSuccess) {
    //the returned NSData takes ownership of the buffer and will free it on deallocation
    return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
}

free(buffer); //free the buffer;
return nil; 
```

}

也许我有点太乐观了，当我希望在这里平稳过渡时，因为当 Android 向我抛出类似的东西时：

`"EgQVKvCLS4VKLoR0xEGexA=="`

然后iOS给了我：

```
"yP42c9gajUra7n0zSEuVJQ==" 
```

希望这只是我忘记的东西，或者某些设置有误？

[更新] 现在在 base64 编码后显示结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T15:32:05.533

首先要注意的是，您在此代码中存在重大安全问题。您正在获取字符串密码，然后将其放入密钥中。如果该字符串是人类可键入的，那么您的密钥空间就会大大受限（将 AES-128 变成更像 AES-40 或 AES-50，甚至可能更糟）。您需要使用 PBKDF2 对密钥进行加盐和拉伸。有关更全面的讨论，请参阅[使用 CommonCrypto 使用 AES 正确加密。](http://robnapier.net/blog/aes-commoncrypto-564)

您还有一个严重的安全问题，因为您使用您的密钥作为您的 IV（请参阅下文；这实际上是您的症状的原因）。这不是选择 IV 并使您的密文可预测的正确方法。使用相同密钥加密的相同明文将给出相同的结果。这类似于根本没有静脉注射。IV 必须是随机的。有关更多讨论，请参见上面的链接。

现在到你的实际症状。问题是您在 Java 和 C# 中使用密钥作为 IV，但在 iOS 上使用 0 (NULL) 作为 IV（IV 不是可选的；您只是传递 0）。您需要在所有情况下使用相同的 IV。

# javascript - 出乎意料；在我的 javascript 中，我不明白为什么

> ID：11953059
> 
> 赞同：1
> 
> 时间：2012-08-14T13:13:24.130
> 
> 标签：javascript, jquery

我添加了这段代码，现在我得到了一个意外的令牌“;” 错误。

代码：

```
var i = 0;
var tabs = "";    
while(i < idArray.length){
tabs = tabs + "<a href='#' onclick='tabs('"+ idArray[i] +"')'>"+ idArray[i] +"</a> &nbsp; &nbsp;";
alert(tabs);
i++;
}
$("#editme").html(tabs); 
```

我不明白为什么。

有任何想法吗？？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:15:26.640

tabs() 中的转义字符串：

```
tabs = tabs + "<a href='#' onclick='tabs(\""+ idArray[i] +"\")'>"+ idArray[i] +"</a> &nbsp; &nbsp;";
                                          ^                ^
                                        here              here 
```

# java - 将子类型的 HashMap 转换为超类型的 HashMap

> ID：11953064
> 
> 赞同：2
> 
> 时间：2012-08-14T13:13:40.983
> 
> 标签：java, generics, casting, hashmap

我确实在操作哈希图时遇到了麻烦。我的问题很简单，但我无法让它工作......

我有一个名为`MultilineWritable`. 我确实需要在平面文件上编组的类确实实现了这个接口，它定义了一个`String toFlatFormat()`函数及其相反的`init(String flatFormat)`.

现在假设`Contract`该类确实实现`MultilineWritable`并由整数标识，而`Person`该类也实现了此接口但由字符串标识。

我编组合同和人员的 HashMap 的功能如下：

```
public void marshall(HashMap<Object, MultilineWritable>){} 
```

我的问题是我找不到将 a`HashMap<String, Person>`转换为 a 的方法`HashMap<Object, MultilineWritable>`，即使`String`extends`Object`和`Person`extends也是如此`MultilineWritable`。对于 a `HashMap<Integer, Contract>`... 的铸造也是如此，因此我不能调用我的通用函数。

感谢有关此问题的任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T13:15:39.557

假设您的`marshall`方法*只读*取值，您应该将声明更改为：

```
public void marshall(HashMap<?, ? extends MultilineWritable> map) 
```

问题是，如果允许现有方法调用，它可能会尝试将*任何* `MultilineWritable`方法放入映射中——即使它是错误的映射类型：

```
Map<String, Person> map = new HashMap<String, Person>();

// What would you want map.put("foo", new Contact()) to do inside marshall?
marshall(map); 
```

编辑：有关通配符的更多详细信息，请参阅[Java 泛型常见问题解答](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#What%20is%20a%20wildcard%20instantiation?)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:25:04.480

您要做的是将 a 传递给`specific type`a `generic type`。你需要使用java的`generics`特性。泛型提供`compile time safety only`，因此虽然您可以将特定类型传递给采用遗传类型的函数，但不允许修改集合或映射。

所以简而言之，你的分析器是：

```
public void marshall(HashMap<? extends Object, ? extends MultilineWritable> map) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:32:44.453

在 Java 中，泛型[不是协变](http://conway.rutgers.edu/~ccshan/wiki/blog/posts/Unsoundness/)的。所以你不能做以下

```
 List<Integer> numList = new ArrayList<Integer>();
    List<Number> numList = new ArrayList<Number>();
    numList = numList; //Error
    numList = (List<Number>)intList; //error 
```

编译器使用泛型来进行类型安全。实际类型信息（集合的，即这是整数列表）等在运行时丢失。

# c# - 优化自定义控件的javascript

> ID：11953065
> 
> 赞同：2
> 
> 时间：2012-08-14T13:13:42.250
> 
> 标签：c#, javascript, asp.net, web, custom-controls

有没有办法对具有相同设置的自定义控件的 javascript 进行分组？

示例：

我将 3 个自定义控件放在一个页面上。每个人都写一个类似的javascript

```
ucx.initialize( controlID, settings ); 
```

所以我得到...

```
ucx.initialize("txtValue1", { sync: true, mask: '0 km' });
ucx.initialize("txtValue2", { sync: true, mask: '0 km' });
ucx.initialize("txtValue3", { sync: true, mask: '0 mm'}); 
```

如我们所见，“txtValue1”和“txtValue2”具有相同的设置。

所以我想将它们分组：

```
ucx.initialize(["txtValue1", "txtValue2"], { sync: true, mask: '0 km'});
ucx.initialize("txtValue3", { sync: true, mask: '0 mm'}); 
```

有可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:18:07.060

这完全取决于你的`initialize`功能做什么。

至少，您可以使用默认的通用设置对象：

```
var initialize = function (controlID, settings) { 
    ...
    settings = settings || { sync: true, mask: '0 km'};
    ... 
}; 
```

然后，如果您在不传递设置对象的情况下调用该函数，则默认为常见的：

```
ucx.initialize("txtValue1");
ucx.initialize("txtValue2");
ucx.initialize("txtValue3", { sync: true, mask: '0 mm'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:27:18.707

您可以创建自己的类似工作的方法：

```
ucx.initializeMultiple = function() {
    var settings = arguments[arguments.length - 1];
    for (var i = 0; i < arguments.length - 1; i++) {
        ucx.initialize(arguments[i], settings);
    }
} 
```

然后，您可以调用：

```
ucx.initializeMultiple("txtValue1", "txtValue2", { sync: true, mask: '0 km'}); 
```

您可以根据需要在参数中放置任意数量的字段名称。最后一个参数是设置对象。它之前的所有参数都被解释为每个都应该获取该设置的字段名称。

* * *

请记住，设置不必是内联的。如果不创建这个新方法，您也可以这样做以避免重复设置：

```
var settings1 = { sync: true, mask: '0 km'};
ucx.initialize("txtValue1", settings1);
ucx.initialize("txtValue2", settings1); 
```

# javascript - 如何使用 Handlebars 迭代数组并访问地图？

> ID：11953068
> 
> 赞同：1
> 
> 时间：2012-08-14T13:13:45.137
> 
> 标签：javascript, handlebars.js

我有类似于下面的代码的数据结构，我想用 Handlerbars 进行迭代。虽然可以执行此迭代的 javascript 代码很清楚，但我无法弄清楚如何在把手中执行此操作。

```
var keys = ['key1','key2','key3'] 
var map = {'key1':{...}, 'key2':{...}, 'key3':{...}, .... 'keyN': {...}} 
```

我想要在车把中做的是迭代键数组并使用键数组中的值从地图中查找对象。这可以在不编写助手的情况下完成吗？

**更新**我知道如何用javascript编写代码，我想做的是“我可以在原始js中使用handlebarJS表达式做些什么”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:17:58.047

尝试这个 ：

```
for(var i=0; i<keys.length; i++){
   console.log(map[keys[i]])
}

Handlebars.registerHelper('list', function(keys, maps) {
  var out = "<ul>";

  for(var i=0, i=keys.length; i++) {
    out = out + "<li>" + map[keys[i]] + "</li>";
  }

  return out + "</ul>";
}); 
```

# .net - TCP 捕获 + 编辑

> ID：11953078
> 
> 赞同：0
> 
> 时间：2012-08-14T13:14:26.800
> 
> 标签：.net, vb.net

如何制作代理和透明修改 TCP/IP 流量的程序？

我想在[endarkorbit.primochka.net](http://endarkorbit.primochka.net/)上制作类似程序的东西？我猜那个是用java制作的，但我想知道如何在.net中做到这一点。

该程序所做的是它在本地 ip ( 127.0.0.1 ) 上创建一种侦听器，然后将浏览器代理设置为该侦听器并打开游戏。该程序读取这些数据包/发送/操作等。它当然使用了一些 tcp 东西，不知道全部是什么以及如何。

我尝试使用 tcplistener，我从网站获取数据到侦听器，但我无法查看网站或做任何事情。

我希望有人知道我指的是什么。

如果它有任何用处，有些人使用[http://www.privoxy.org/](http://www.privoxy.org/)其他应用程序来获得与上面提到的相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:18:11.107

我认为这有点复杂。这不仅仅是捕获 A 并将其编辑为 B。这是一个机器人。我知道这些（也玩过 DO）。您必须了解很多编程知识，并且需要很长时间才能做到这一点。

# sql - JPA + Cloud SQL：如何设计persistence.xml

> ID：11953079
> 
> 赞同：2
> 
> 时间：2012-08-14T13:14:28.647
> 
> 标签：sql, xml, google-cloud-sql

我阅读了[Cloud-SQL JPA 教程](https://developers.google.com/eclipse/docs/cloudsql-jpatools)。

当我单击“连接”时，我与云和本地 mysql 数据库的连接确实有效。但是我的EntityManagerFactory 无法读取persistence.xml。

当我想连接到本地 mysql 数据库时，我不清楚我的 persistence.xml 应该是什么样子。

在本教程中，它听起来像persistence.xml-File 是自动生成的，我只需要添加我的类。那是对的吗？如果是，我该怎么做才能触发自动生成？

否则，它会是什么样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T16:00:29.717

我让它工作。这些步骤帮助我修复它，以便我可以连接到我的本地 mysql 数据库：

*   在`Project -> Properties -> JPA`我必须将连接设置为 MyApp.MySQL.DevInstance

*   在`Project -> Properties -> Google -> App Engine`您需要激活使用“MySQL 实例”

*   在 appengine-java-sdk-xxx/lib/impl 中删除 mysql .jar。（请参阅[Java Google App Engine 和 Google Cloud SQL running on local dev server](https://stackoverflow.com/questions/8952696/java-google-app-engine-and-google-cloud-sql-running-on-local-dev-server)）

你可以在下面看到我的 persistence.xml。

注释：

*   不要实验性地将 com.mysql.Driver 设置为驱动程序，它不会起作用。

*   设置Eclipselink的MySQL属性

希望这可以帮助某人；）

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="transactions-optional" transaction-type="RESOURCE_LOCAL">
        <class>com.MyClass</class>
        <properties>
            <property name="javax.persistence.jdbc.driver" value="com.google.appengine.api.rdbms.AppEngineDriver"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:google:rdbms://myapp:instance1/test"/>
            <property name="javax.persistence.jdbc.user" value="root"/>
            <property name="javax.persistence.jdbc.password" value=""/>
            <property name="eclipselink.target-database" value="MySQL"/>
            <property name="eclipselink.platform.class.name" value="org.eclipse.persistence.platform.database.MySQLPlatform" />
        </properties>
    </persistence-unit>
</persistence> 
```

我的 EntityManagerFactory 看起来像这样：

```
package de.compareyourrace.system.server;

/*
 * Copyright 2010 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy of
 * the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */

import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;

/**
 * Factory for creating EntityManager.
 */
public final class EMF {
    private static final EntityManagerFactory emfInstance =
        Persistence.createEntityManagerFactory("transactions-optional");

    public static EntityManagerFactory get() {
        return emfInstance;
    }

    private EMF() {
      // nothing 
    }
} 
```

# wordpress - 从帖子编辑页面上的自定义帖子类型中选择

> ID：11953081
> 
> 赞同：0
> 
> 时间：2012-08-14T13:14:39.027
> 
> 标签：wordpress, custom-post-type

在 WordPress 中，我有一个自定义的帖子类型“视频”。现在在编辑（常规）帖子页面上，我想要一个“精选视频”字段，允许我从自定义帖子类型“视频”的所有视频中选择一个视频。

我从哪里开始？

PS：请不要使用插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:13:14.617

**简单的方法**：

创建一个自定义字段（通过单击编辑页面右上角的屏幕选项启用自定义字段）并将其命名为“featuredVideo”，其值是您要链接到的视频的 ID。

然后像这样调用您的单个帖子模板：

```
<?php
$fvID = get_post_meta(get_the_ID(), 'featuredVideo', true);
?>
<a href="<?php echo get_permalink($fvID); ?>">Check out the Featured Video!</a> 
```

**最佳方式**：

您可以使用简单的下拉菜单将[元框添加](http://codex.wordpress.org/Function_Reference/add_meta_box)到您的帖子编辑器，以从所有视频类型的帖子中进行选择。这将需要在您的functions.php中有相当大的代码块，您仍然需要将信息存储为元数据，但它为您提供了一个干净的界面来使用，您不再需要跟踪ID来制作它工作。

*函数.php* -

```
add_action('add_meta_boxes', 'add_featured_video_meta');
add_action('save_post', 'save_featured_data');

function add_featured_video_meta()
{
    add_meta_box( 
        'featured_video_meta',
        'Add Featured Video',
        'featured_video_inner',
        'post',
        'side'
    );
}

function featured_video_inner($post)
{
    wp_nonce_field(basename(__FILE__), 'featured_video_nonce');
    $q = new WP_Query(array('post_type'=>'video', 'posts_per_page'=>-1));
?>
    <label for="featuredVideo">Select a Video: </label>
    <select name="featuredVideo">
    <option value="0">Select a Video</option>
<?php
    if($q->have_posts()) : while($q->have_posts()) : $q->the_post();
        $selected = get_post_meta($post->ID, 'featuredVideo', true) === get_the_ID() ? ' selected="selected"' : '';
        echo '<option value="'.get_the_ID().'"'.$selected.'>'.get_the_title().'</option>';
    endwhile;endif;
?>
    </select>
<?php
}

function save_featured_data($post_id)
{
    if(defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) 
        return;
    if(!wp_verify_nonce($_POST['featured_video_nonce'], basename(__FILE__)))
        return;
    if(!current_user_can('edit_post', $post_id))
        return;

    update_post_meta($post_id, 'featuredVideo', $_POST['featuredVideo']);
} 
```

上面的例子是未经测试的，所以我不能保证它会直接工作，但如果这是你想要采取的方法，那么困难的部分基本上已经为你完成了。一旦您的自定义 Meta Box 正常工作，您就可以按照我在第一个示例中使用的完全相同的方式在单个帖子模板中引用帖子元数据。

随便玩玩，看看什么最适合你。

# iphone - 在照片上绘图

> ID：11953083
> 
> 赞同：0
> 
> 时间：2012-08-14T13:14:48.203
> 
> 标签：iphone, objective-c, drawing

我是 iPhone 开发的新手。我有一个任务，我需要用手指在照片上画画。没什么花哨的，只有一种颜色和一种宽度（签名）。谁能指出我实现这一点的最佳方式？tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:18:40.413

Refer this link .... though this question is closed the solution is right. [https://stackoverflow.com/questions/11828200/writing-with-finger-on-iphone/11828810#11828810](https://stackoverflow.com/questions/11828200/writing-with-finger-on-iphone/11828810#11828810)

Please see this code. I have used UITouch

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
  {
mouseSwiped = NO;
UITouch *touch = [[event touchesForView:baseView]anyObject];
lastPoint = [touch locationInView:drawingView];

 }

 // Handles the continuation of a touch.
 - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
 mouseSwiped = YES;

 UITouch *touch = [[event touchesForView:baseView] anyObject];
CGPoint currentPoint = [touch locationInView:drawingView];
//currentPoint.y -= 20;

UIGraphicsBeginImageContext(drawingView.frame.size);
[drawingView.image drawInRect:CGRectMake(0, 0, drawingView.frame.size.width, drawingView.frame.size.height)];
CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextSetLineWidth(UIGraphicsGetCurrentContext( ), 5.0);
if (eraserSelected)
{
    CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeClear);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext( ), 10.0);
}
[self changeBrushColor];
//[self changeBrushColor:segmentedControl];
//CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 0.0, 0.0, 1.0);
CGContextBeginPath(UIGraphicsGetCurrentContext());
CGContextMoveToPoint(UIGraphicsGetCurrentContext() , lastPoint.x, lastPoint.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
CGContextStrokePath(UIGraphicsGetCurrentContext()) ;
drawingView.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

lastPoint = currentPoint;
}

 // Handles the end of a touch event when the touch is a tap.
 - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
 {
//UITouch *touch = [[event touchesForView:self.view] anyObject];
/*
 if ([touch tapCount] == 2)
 {
 imgView.image = nil;
 return;
 }
 */

if(!mouseSwiped) {
    UIGraphicsBeginImageContext(drawingView.frame.size);
    [drawingView.image drawInRect:CGRectMake(0, 0, drawingView.frame.size.width, drawingView.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext( ), 5.0);
    [self changeBrushColor];
    //[self changeBrushColor:segmentedControl];
    //CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 0.0, 0.0, 1.0);
    CGContextMoveToPoint(UIGraphicsGetCurrentContext() , lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext()) ;
    CGContextFlush(UIGraphicsGetCurrentContext());
    drawingView.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
}
}

- (void)changeBrushColor
 {
switch (selectedColor) {
    case 1:
        CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 0.0, 0.0, 1.0);
        break;
    case 2:
        CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.45, 0.87, 0.04,            1.0);
        break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:39:04.380

我创建了你想要的演示，下面是它的代码。

```
CGPoint midPoint(CGPoint p1, CGPoint p2)
{
    return CGPointMake((p1.x + p2.x) * 0.5, (p1.y + p2.y) * 0.5);
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch = [touches anyObject];

    previousPoint1 = [touch previousLocationInView:self];
    previousPoint2 = [touch previousLocationInView:self];
    currentPoint = [touch locationInView:self];

    [self touchesMoved:touches withEvent:event];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch  = [touches anyObject];

    previousPoint2  = previousPoint1;
    previousPoint1  = [touch previousLocationInView:self];
    currentPoint    = [touch locationInView:self];

    // calculate mid point
    CGPoint mid1    = midPoint(previousPoint1, previousPoint2); 
    CGPoint mid2    = midPoint(currentPoint, previousPoint1);

    CGMutablePathRef path = CGPathCreateMutable();
    CGPathMoveToPoint(path, NULL, mid1.x, mid1.y);
    CGPathAddQuadCurveToPoint(path, NULL, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);
    CGRect bounds = CGPathGetBoundingBox(path);
    CGPathRelease(path);

    CGRect drawBox = bounds;

    //Pad our values so the bounding box respects our line width
    drawBox.origin.x        -= self.lineWidth * 2;
    drawBox.origin.y        -= self.lineWidth * 2;
    drawBox.size.width      += self.lineWidth * 4;
    drawBox.size.height     += self.lineWidth * 4;

    UIGraphicsBeginImageContext(drawBox.size);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    curImage = UIGraphicsGetImageFromCurrentImageContext();
    [curImage retain];
    UIGraphicsEndImageContext();

    [self setNeedsDisplayInRect:drawBox];

}

- (void)drawRect:(CGRect)rect
{

    [curImage drawAtPoint:CGPointMake(0, 0)];
    CGPoint mid1 = midPoint(previousPoint1, previousPoint2); 
    CGPoint mid2 = midPoint(currentPoint, previousPoint1);

    CGContextRef context = UIGraphicsGetCurrentContext(); 

    [self.layer renderInContext:context];

    CGContextMoveToPoint(context, mid1.x, mid1.y);
    CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y); 
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, self.lineWidth);
    CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);

    CGContextStrokePath(context);

    [super drawRect:rect];

    [curImage release];

} 
```

[您还可以下载 Here 的源代码。](http://bit.ly/OgfPwa)

我认为这很有帮助。

快乐编码。

# function - 在 Fortran 中正确使用模块

> ID：11953087
> 
> 赞同：6
> 
> 时间：2012-08-14T13:14:55.130
> 
> 标签：function, module, fortran, subroutine

我经常使用 FORTRAN，但我从未接受过以正确方式编写源代码的正式指导。我目前使用模块来存储全局变量，但我知道您也可以使用它们来存储子例程和函数。我使用的代码有很多子例程，因为它们非常庞大且复杂。所有函数和子程序都应该在模块中吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-14T13:37:28.960

一般来说，您的第一个问题的答案是*肯定*的，稍后我会回答您的第二个问题。首先请注意，这是对一般问题的一般答案，围绕 SO Fortran 问题的明亮火花很可能会提出模块不适用的特殊情况。我提前反驳说，这个答案是针对模块的新手。一旦您不再是新手，您就可以制定自己的问题答案。

模块对程序员最有用，可帮助组织和构建程序或程序套件。它们提供了一种机制来封装用户定义类型的定义以及对这些类型进行操作的函数/子例程。在 Fortran 90 和 95 中，这种封装有点特别，因为它依赖于程序员关于如何将程序分解为多个部分的想法。随着 Fortran 2003 中面向对象工具的引入，现在有了更清晰的“规则”来识别每个模块中属于哪些元素。

例如，您可以设想一个用于有理算术的类型和过程的模块。通过将所有实现您伟大想法的代码保留在一个模块中，您可以隐藏程序其他部分的实现（不需要知道细节）并只公开您希望公开的部分（查看`PRIVATE`和`PUBLIC`关键字） . 您可以立即看到将代码组织成模块的另一个优势；`USE`在一个新程序中你的理性算术模块比将代码从你的巨型源文件剪切并粘贴到另一个巨型源文件中要容易得多。当你想处理你的有理算术时，你在一个模块中处理代码，而不是在你的文件中散布的代码。

模块还允许您管理名称冲突。例如，您的有理算术模块可能定义了一个名为 的运算`add`，并且您可能还有一个多精度整数算术模块，该模块定义了一个名为 的运算`add`。如果您尝试`USE`在一个程序（或另一个模块）中同时使用这两个模块，那么编译器将警告（可能引发错误）相同的名称在使用模块的范围内定义了两次。使用关联模块实体时可以使用重命名。您还可以使用`ONLY`子句仅导入用户需要的那些模块实体。

请注意，模块`USE`是可传递的，如果 A 使用 B 并且 B 使用 C，则您不必还声明 A 使用 C（尽管如果您已重命名实体或指定`ONLY`子句，则必须确保在特定的案子）。

简而言之，模块是处理程序复杂性的主要 Fortran 机制，通过将它们分成可管理的块。Fortran 2008，当该功能由编译器实现时，`SUBMODULE`也引入了 s，它承诺更好地支持以这种方式处理复杂性。

模块也很有用，因为语言标准要求编译器为模块中定义的过程生成显式接口，以便在编译时对参数进行类型检查。请注意，这些接口（您从未真正看到）被称为显式接口，以与隐式接口形成对比，隐式接口是未在模块内部定义（或`CONTAIN`在使用它们的程序单元中编辑）具有的过程。当然，您可以为此类过程编写显式接口，但在短期和长期运行中，让编译器为您完成几乎总是更容易。

正如@Telgin 已经指出的那样，模块也有助于增量编译。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T13:37:44.570

使用模块的主要好处之一是您的编译器将自动对`use`来自模块的任何函数或子例程执行接口检查，以确保您使用适当的参数类型调用例程。关于这个主题的一篇好文章是[Fortran 博士变得明确 - 再次！](http://software.intel.com/en-us/blogs/2012/01/05/doctor-fortran-gets-explicit-again/). 从这篇文章：

> 有几种方法可以提供显式接口。最简单和最好的方法是将过程放在一个模块中，或者使其成为调用程序或过程的 CONTAINed 过程。这样做的好处是不需要您将信息写两次，从而增加了在其中一个地方出错的机会。当您有一个模块过程或包含的过程时，它的接口自动对模块或父范围内的所有其他内容可见。假设名称尚未声明为 PRIVATE，则该接口也可用于您使用包含模块过程的模块的地方。

我建议将所有*相关*例程放在同一个模块中。对我来说，模块相当于其他语言中的类。模块是一种对相关数据和例程（可以对这些数据进行操作）进行分组的方法。因此，如果您的例程按逻辑分组到模块中，并为您的函数和子例程调用添加类型检查，则模块提供了一种使您的代码更易于导航的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T15:13:01.313

模块通过自动提供显式接口来帮助 Fortran 程序，正如其他一些答案中已经描述的那样。这允许编译器检查过程调用和过程声明中的参数之间的一致性，这会发现很多错误——这里有一些 Stackoverflow 答案，显示了模块的这种好处：[Computing the cross product of two vectors in Fortran 90](https://stackoverflow.com/questions/6511711/computing-the-cross-product-of-two-vectors-in-fortran-90/6512578) , [FORTRAN指针数组中的函数](https://stackoverflow.com/questions/11816351/fortran-functions/11818298)和[Fortran 分段错误](https://stackoverflow.com/questions/11876134/fortran-segmentation-fault-in-pointer-array)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T13:19:53.690

将相关的函数、子程序和变量移到它们自己的模块中可以提高程序的可维护性。稍后当你必须更新它的一部分时，你不必去挖掘具有数万（或数百）数千行代码的单个源文件，只需打开相关文件即可。

当然，您可能认为您可以只使用编辑器的搜索功能来查找相关的子程序，但是在让代码单独放置几个月后，您可能很快就会发现您记不起名字了子程序或它们如何组合在一起。将它们分组很好地对此有很大帮助。

如果编译器只需重建单个模块而不是整个程序，则将子例程和函数移动到模块中也可以提高编译速度。

# c++ - 模板和访问者模式

> ID：11953088
> 
> 赞同：1
> 
> 时间：2012-08-14T13:15:04.163
> 
> 标签：c++, templates, boost, c++11

我有一些带有访问功能的类，如下所示：

```
struct Person {
   std::string name;
   unsigned age;

  template<class Visitor>
  void visit(Visitor& c)
  {
      c("name", name);
      c("age", age);
  }

  template<class Visitor>
  void visit(Visitor& c) const
  {
      c("name", name);
      c("age", age);
  }
}; 
```

我有一个访客，例如：

```
struct PrintVisitor
{
    PrintVisitor(std::ostream& stream)
        : m_stream(stream)
    {}

    template<class T>
    void operator()(const std::string& name, const T& v)
    {
        m_stream << name << ": " << v << std::endl;
    }

private:
    std::ostream& m_stream;
}; 
```

对于每个访问者，我想定义一个流操作符：

```
std::ostream& operator<<(std::ostream& stream, const Person& p)
{
    PrintVisitor printer(stream);
    p.visit(printer);
    return stream;
} 
```

是否可以提供一个接受任何 Visitable 类的 operator<<？

（现在，我只是在尝试打印，但我实际上想实现 json 序列化、反序列化，也许还有相等和小于运算符。

**更新**

我使用大卫解决方案：

CRTP 的基类：

```
template <class T>
struct Visitable {}; 
```

所有可访问的类都从那里继承：

```
struct Person : Visitable<Person> { ... } 
```

运算符和函数是这样模板化的，并使用静态转换来访问类：

```
template<class T> 
std::ostream& operator<<(std::ostream& stream, const Visitable<T>& p) 
{ 
    PrintVisitor printer(stream); 
    static_cast<const T&>(p).visit(printer); 
    return stream; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:32:38.677

您采用的方法类似于 boost 序列化库的实现方式，不同之处在于在它们的情况下它们是重载`operator&`（二进制而不是地址）以与库交互。然后访问者将对该类型使用单个`serialize`操作。

现在，问题是我不太明白这个问题：

> 是否有可能不必在模板函数中只实现一次运算符？

你的意思是提供一个`operator<<`可以接受任何访问者（序列化器）类型的单曲吗？如果这是问题所在，并且无需详细说明，您可以尝试使用继承和 CRTP 来解决此问题。将运算符实现为所有访问者的模板库中的成员函数，该模板将具体访问者作为参数。

我不太确定这将如何应用于比较运算符，虽然对于序列`operator<<`化`operator>>`来说看起来很自然，但对于任何其他操作来说它们都会令人惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:41:19.007

你的意思是你想做这样的事情吗？

```
template<class Visitable>
std::ostream& operator<<(std::ostream& stream, const Visitable& v)
{
    PrintVisitor printer(stream);
    v.visit(printer);
    return stream;
} 
```

这当然会引起歧义。你想要的是这样的：

```
template<class Visitable implements visit>
std::ostream& operator<<(std::ostream& stream, const Visitable& v)
{
    PrintVisitor printer(stream);
    v.visit(printer);
    return stream;
} 
```

我不知道这是否可能。

你也可以这样做：

```
class Visitable { ... }
class Person : public Visitable { ... } 
```

然后实现一个正常的功能：

```
std::ostream& operator<<(std::ostream& stream, const Visitable& v) 
```

但是你有一个虚函数调用的小开销。

# ruby-on-rails - 如何使用无论何时 gem 创建文件，我可以在 Windows 上运行它吗？

> ID：11953091
> 
> 赞同：1
> 
> 时间：2012-08-14T13:15:15.343
> 
> 标签：ruby-on-rails, whenever

我在 Windows 上使用 RoR，所以第一个问题是：**我可以随时在 Windows 上使用吗？**

目前它根本不起作用。我试过这段代码：

```
 set :output, "#{path}/log/cron.log"
   set :environment, 'development'

  every 2.minutes do 
   command "rm '#{path}/log/text.txt'", environment => "development"
 end 
```

这是我的控制台，无论何时运行命令：

```
 whenever
 0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,5
 6,58 * * * * /bin/bash -l -c 'rm '\''E:/mus/RailsCasts PRO/164-cron-in-ruby-revi
 sed/164-cron-in-ruby-revised/schedules-after/log/text.txt'\'' >> E:/mus/RailsCas
 ts PRO/164-cron-in-ruby-revised/164-cron-in-ruby-revised/schedules-after/log/cro
  n.log 2>&1'

 ## [message] Above is your schedule file converted to cron syntax; your crontab
 file was not updated.
 ## [message] Run `whenever --help' for more options. 
```

并且每当-i：

```
 whenever -i

 [fail] Couldn't write crontab; try running `whenever' with no options to ensure
 your schedule file is valid. 
```

第二个问题：**我需要创建 txt 文件或 xls 并在其中添加信息 - 将其发送到 PayPal（Mass Pay）。**

如何使用此 gem 创建文件？

我已经设法将数据导出为 xls 格式。

# c# - 将 linq 查询结果转换为枚举

> ID：11953093
> 
> 赞同：3
> 
> 时间：2012-08-14T13:15:17.893
> 
> 标签：c#, linq, enums, linq-to-objects

我有一个类似对象的列表。此列表中的对象都有一个名为的属性`Name`和一个名为`Mk2Result`但属于枚举类型的枚举类型`Mk2TestResult`。

现在在 for 循环中，我查看当前迭代器整数是否作为对象名称存在于列表中：

```
for(......
{
//    
    var query = 
        from pin in _pins 
        where pin.Name == i.ToString() 
        select pin.Mk2Result;

    Mk2TestResult result = (Mk2TestResult)query;

    //Do some more stuff
} 
```

但是编译器抱怨以下消息：

```
Cannot convert type 'System.Collections.Generic.IEnumerable<DataModels.Mk2TestResult>' to 'DataModels.Mk2TestResult' 
```

如何正确返回查询结果为枚举类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:16:50.077

尝试

```
Mk2TestResult result = (Mk2TestResult)query.FirstOrDefault(); 
```

因为您正试图将列表转换为一个对象。但是你只会得到第一个对象。您可以在 FirstOrDefault 函数参数中使用函数来获取所需的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:17:31.210

查询的结果是元素的集合，而不是单个元素。这就是编译器试图告诉你的。如果你想从这个集合中获取第一个值，你应该使用[Enumerable.First Method](http://msdn.microsoft.com/en-us/library/bb291976.aspx)。如果你想叠加`Mk2TestResult`你可以使用[Enumerable.Aggregate Method](http://msdn.microsoft.com/en-us/library/bb549218.aspx)。或者您可以简单地遍历集合并根据具体`Mk2TestResult`值执行一些操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:18:46.543

您正在尝试将 Mk2TestResult 对象的集合转换为一个，因此要么获取 FirstOrDefault 要么转换为 IEnumerable

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T13:19:29.250

您的查询实际上返回您的`Enum`类型的集合。如果您只想要一个结果，则必须使用`Single`、`SingleOrDefault`、`First`或`FirstOrDefault`扩展方法。

**注意：**当您认为查询可能不返回任何结果时，请使用名为**OrDefault的方法。**`Single`调用或时，空结果集会导致异常`First`。

```
var query = 
    from pin in _pins 
    where pin.Name == i.ToString() 
    select pin.Mk2Result;

// If pin.Mk2Result is strongly typed, the cast is not necessary
Mk2TestResult result = query.FirstOrDefault(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T13:17:45.227

Linq 返回 IEnumerable，因此您必须遍历它：

```
var query = 
    (from pin in _pins 
    where pin.Name == i.ToString() 
    select pin.Mk2Result).ToList();

foreach(var result in query)
  ... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T13:17:57.580

您返回的 Type 是 Mk2TestResul 的集合，因此您需要将其存储在 List 或 Array 或任何实现 IEnumerable 的东西中。

例子：

```
List<Mk2TestResult> result = query.ToList(); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-22T13:15:34.180

要将新的 Enum 类型添加到 Dynamic linq，您必须添加以下代码：

```
typeof(Enum),
typeof(T)

T : Enum Type. 
```

到动态的预定义类型属性。

这对我有用

# c# - VSPackage 中的 OnEnterRunMode 不起作用

> ID：11953094
> 
> 赞同：4
> 
> 时间：2012-08-14T13:15:18.330
> 
> 标签：c#, debugging, events, vspackage

我正在开发一个扩展（VSPackage），我正在订阅 VSPackage.cs 的构造函数中的 2 个调试器事件

```
public sealed class ComboBoxPackage : Package
{
....
 public ComboBoxPackage()
        {
            Trace.WriteLine(string.Format(CultureInfo.CurrentCulture, "Entering constructor for: {0}", this.ToString()));
            _dte = (DTE)Package.GetGlobalService(typeof(DTE));
            _events = _dte.Events;
            _debuggerEvents = _events.DebuggerEvents;

            _debuggerEvents.OnEnterRunMode += _debugEvents_OnEnterRunMode;
            _debuggerEvents.OnContextChanged +=_debuggerEvents_OnContextChanged;      
        }

        void _debuggerEvents_OnContextChanged(EnvDTE.Process NewProcess, Program NewProgram, Thread NewThread, EnvDTE.StackFrame NewStackFrame)
        {
            throw new NotImplementedException();
        }

        private void _debugEvents_OnEnterRunMode(dbgEventReason Reason)
        {
            return;
        }

} 
```

当我运行它（strating run an application）时，只调用 _debuggerEvents_OnContextChanged，不调用 _debugEvents_OnEnterRunMode。

如果我对 Addin 项目做同样的事情，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-12T20:59:44.647

我希望它还不够晚......您是否直接从您的代码中保留对 DebuggerEvents 的引用并从那里处理事件。

它发生在我身上，我以这种方式修复它。

# objective-c - textRectForBounds：未在从 Nib 加载的自定义 UITextFields 上调用

> ID：11953099
> 
> 赞同：0
> 
> 时间：2012-08-14T13:15:50.993
> 
> 标签：objective-c, ios, uitextfield

我创建了 UITextField 的一个子类，它覆盖了 [text|editing|placeholder]RectForBounds: （全部具有完全相同的实现）。从代码实例化时一切正常，但从 nib 加载时却不行。在从笔尖加载的文本字段上，既不绘制文本也不绘制占位符。

我注意到在用户点击文本字段之前，不会调用任何 RectForBounds 方法；点击时，editing & placeholderRectForBounds 使用正确的边界大小 ({{0, 0}, {300, 39}}) 调用，而 textRectForBounds 使用 ({{0, 0}, {100, 100}}) 调用。

那么，为什么从未绘制文本（并且仅在从笔尖加载的字段上）？我做错了什么，或者这是 UITextField 的错误？

编辑：

这是代码：

```
#import "SearchTextField.h"
#import <QuartzCore/QuartzCore.h>

#define BUTTON_WIDTH 50
#define MAX_LABEL_WIDTH 200

@interface SearchTextField ()

@property(retain, nonatomic) UILabel *label;
@property(retain, nonatomic) UIButton *button;

- (void)i_baseInit;

@end

@implementation SearchTextField

@synthesize title = _title;
@synthesize label = label_;
@synthesize button = button_;
@synthesize showButton = _showButton;
@synthesize backgroundView = _my_backgroundView;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
        _showButton = YES;
        [self i_baseInit];
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder
{
    if (self = [super initWithCoder:aDecoder])
    {
        [self i_baseInit];
    }
    return self;
}

- (void)i_baseInit
{
    self.opaque = NO;
    self.textAlignment = UITextAlignmentRight;
    self.leftViewMode = UITextFieldViewModeAlways;
    self.rightViewMode = UITextFieldViewModeAlways;
    self.backgroundColor = [UIColor clearColor];

    _my_backgroundView = [[MyView alloc] init];
    self.backgroundView.backgroundColor = [UIColor whiteColor];

    self.label = [[[UILabel alloc] init] autorelease];
    self.label.font = [UIFont fontWithName:@"HelveticaNeue-CondensedBold" size:15];
    self.label.textColor = [UIColor darkGrayColor];
    self.label.textAlignment = UITextAlignmentRight;
    self.label.backgroundColor = [UIColor clearColor];
    self.label.text = _title;
    self.leftView = self.label;

    self.button = [UIButton buttonWithType:UIButtonTypeCustom];
    [self.button setBackgroundImage:[UIImage imageNamed:@"button_sm"]
                           forState:UIControlStateNormal];
    [self.button setBackgroundImage:[UIImage imageNamed:@"button_sm_pressed"]
                           forState:UIControlStateHighlighted];
    self.button.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleLeftMargin;
    self.button.hidden = !_showButton;
    self.rightView = self.button;
}

- (void)drawRect:(CGRect)rect
{
    self.backgroundView.frame = CGRectMake(self.bounds.origin.x,
                                           self.bounds.origin.y,
                                           self.bounds.size.width-1, // Without this, the background sticks out 1 pt from the button
                                           self.bounds.size.height);
    [self.backgroundView drawRect:rect];
}

- (id)copy
{
    SearchTextField *copy = [[self.class alloc] initWithFrame:self.frame];
    copy.text = self.text;
    copy.textAlignment = self.textAlignment;
    copy.textColor = self.textColor;

    copy.placeholder = self.placeholder;

    copy.background = self.background;
    copy.backgroundColor = self.backgroundColor;

    copy.borderStyle = self.borderStyle;
    copy.font = self.font;
    copy.showButton = self.showButton;
    copy.title = self.title;

    copy.delegate = self.delegate;

    copy.secureTextEntry = self.secureTextEntry;

    copy.returnKeyType = self.returnKeyType;
    copy.keyboardType = self.keyboardType;

    return copy;
}

#pragma mark - UITextField Positioning -

- (CGRect)textRectForBounds:(CGRect)bounds
{
    CGSize labelSize = [self.label.text sizeWithFont:self.label.font constrainedToSize:CGSizeMake(MAX_LABEL_WIDTH, bounds.size.height)];
    CGSize textSize = [@"Test" sizeWithFont:self.font];
    CGRect rect = CGRectMake(10 + labelSize.width,
                      (bounds.size.height-textSize.height)/2,
                      bounds.size.width - (20 + labelSize.width + ((self.showButton) ? BUTTON_WIDTH : 0)),
                      textSize.height);
    return rect;
}

- (CGRect)placeholderRectForBounds:(CGRect)bounds
{
    return [self textRectForBounds:bounds];
}

- (CGRect)editingRectForBounds:(CGRect)bounds
{
    return [self textRectForBounds:bounds];
}

- (CGRect)leftViewRectForBounds:(CGRect)bounds
{
    return CGRectMake(10,
                      0,
                      [self.label.text sizeWithFont:self.label.font constrainedToSize:CGSizeMake(MAX_LABEL_WIDTH, bounds.size.height)].width,
                      bounds.size.height);
}

- (CGRect)rightViewRectForBounds:(CGRect)bounds
{
    if (!self.showButton) { return CGRectZero; }

    return CGRectMake(bounds.size.width-BUTTON_WIDTH,
                      0,
                      BUTTON_WIDTH,
                      bounds.size.height);
}

#pragma mark -

- (void)setTitle:(NSString *)title
{
    [_title release];
    _title = [title retain];
    self.label.text = title;
    [self setNeedsLayout];
}

- (UIImage *)imageForState:(UIControlState)state
{
    return [self.button imageForState:state];
}

- (void)setImage:(UIImage *)image forState:(UIControlState)state
{
    [self.button setImage:image forState:state];
}

- (void)addTarget:(id)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents
{
    [self.button addTarget:target action:action forControlEvents:controlEvents];
}

- (void)setShowButton:(BOOL)showButton
{
    self.button.hidden = !showButton;
    _showButton = showButton;
    [self setNeedsLayout];
}

- (MyView *)backgroundView
{
    [self setNeedsDisplay];
    return _my_backgroundView;
}
- (void)dealloc
{
    [_my_backgroundView release];
    [label_ release];
    [button_ release];

    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:40:29.500

问题在于，对于 Apple 的代码，initWithCoder 和 initWithFrame 的路径略有不同，因此它调用此方法一次与占位符字符串无关。

所以在我的测试中，我有两个标签，一个是在代码中创建的，一个是在笔尖中创建的，它们都有一个相当长的占位符字符串。

核心问题与“textRectForBounds:”有关，因为有一条与显示的占位符无关的附加消息。不仅如此，而且边界很大，这会导致您返回一个超出控件边界的矩形。我不太了解您的代码，无法提出解决方案，但至少您现在知道要修复什么。

有了这个额外的日志记录：

```
- (CGRect)textRectForBounds:(CGRect)bounds
{
    CGRect rect ;
    rect = [super textRectForBounds:bounds];
    NSLog(@"REAL textRectForBounds %@", NSStringFromCGRect(rect) );

    CGSize labelSize = [self.label.text sizeWithFont:self.label.font constrainedToSize:CGSizeMake(MAX_LABEL_WIDTH, bounds.size.height)];
    CGSize textSize = [@"Test" sizeWithFont:self.font]; 

    NSLog(@"labelSize=%@ textSize=%@ bounds=%@", NSStringFromCGSize(labelSize), NSStringFromCGSize(textSize), NSStringFromCGRect(bounds));

    rect = CGRectMake(10 + labelSize.width,
                      (bounds.size.height-textSize.height)/2,
                      bounds.size.width - (20 + labelSize.width + ((self.showButton) ? BUTTON_WIDTH : 0)),
                      textSize.height);

NSLog(@"%@: textRectForBounds %@", type, NSStringFromCGRect(rect) );
    return rect;
} 
```

我看到的是这样的：

```
labelSize={0, 100} textSize={28, 18} bounds={{0, 0}, {100, 100}}
textRectForBounds {{10, 41}, {80, 18}} 
```

因此，系统出于某种原因传入了 100x100 边界，然后您的代码创建了一个矩形，其 y 偏移量低于 textField 10 点。您需要考虑到这一点。

# python - NumPy：如何过滤矩阵线

> ID：11953111
> 
> 赞同：5
> 
> 时间：2012-08-14T13:15:20.963
> 
> 标签：python, numpy

我是 numpy 新手，在尝试过滤样本子集时遇到了麻烦。

我有一个形状为的矩阵`(1000, 12)`。也就是说，一千个样本，每个样本有 12 个数据列。我愿意创建两个矩阵，一个包含样本中的所有异常值，另一个包含所有不是异常值的元素；生成的矩阵应具有以下形状：

```
norm.shape     = (883, 12)
outliers.shape = (117, 12) 
```

为了识别异常值，我使用了这个条件：

```
cond_out  = (dados[0:,RD_EVAL] > _max_rd) | (dados[0:,DUT_EVAL] > _max_dut) 
```

也就是说，对于矩阵中的每一行，我都在寻找两列的值。如果其中一个高于某个阈值，则该线被视为异常值。关键是，这个条件有一个 shape `(1000,)`，所以当我压缩原始矩阵时，我得到了一个`(117,)`结果。我怎样才能过滤矩阵，所以结果是`(117,12)`，也就是说，一个包含所有异常值行的矩阵，但每个行都包含所有数据列？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T13:30:15.213

```
import numpy as np

d=np.random.randn(4,4)

array([[ 1.16968447, -0.07650322, -0.30519481, -2.09278839],
       [ 0.53350868, -0.8004209 ,  0.38477468,  1.31876924],
       [ 0.06461366,  0.82204993,  0.42034665,  0.30473843],
       [ 1.13469745, -1.47969242,  2.36338208, -0.33700972]]) 
```

让我们过滤第二列中所有小于零的行：

```
d[:,1]<0
array([ True,  True, False,  True], dtype=bool) 
```

你看，你得到一个逻辑数组，你可以用它来选择所需的行：

```
d[d[:,1]<0,:]

array([[ 1.16968447, -0.07650322, -0.30519481, -2.09278839],
       [ 0.53350868, -0.8004209 ,  0.38477468,  1.31876924],
       [ 1.13469745, -1.47969242,  2.36338208, -0.33700972]]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T13:29:36.460

也许这样的事情会起作用？

```
>>> import numpy
>>> m = numpy.random.random(size=(1000,12))
>>> RD_EVAL = 7
>>> _max_rd = 0.9
>>> DUT_EVAL = 11
>>> _max_dut = 0.95
>>> cond_out = (m[:,RD_EVAL] > _max_rd) | (m[:,DUT_EVAL] > _max_dut)
>>> cond_out.shape
(1000,)
>>> 
>>> norm = m[~cond_out, :]
>>> outliers = m[cond_out,:]
>>> 
>>> norm.shape
(846, 12)
>>> outliers.shape
(154, 12) 
```

请参阅有关[高级索引](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#advanced-indexing)的文档。

# .net - 检测实体框架 EntityObject 上更改了哪些属性

> ID：11953113
> 
> 赞同：5
> 
> 时间：2012-08-14T13:16:31.803
> 
> 标签：.net, entity-framework, entity-framework-4

我想阅读其中的更改`EntityObject`以包含在报告中。

例如：

> **名称：** ~~之前~~之后
> 
> **地点：** ~~之前~~之后

有没有通用的方法来做到这一点？我将 EF4 与默认实体类生成（不是 POCO）一起使用。

这些实体将被附加，因此应跟踪它们的更改。我看不到通过`IEntityWithChangeTracker`界面执行此操作的方法。

遍历导航属性会很好，但是仅仅报告更改的原始属性就足够了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T14:06:48.080

您可以检索`ObjectStateEntry`您的实体并检查 和 的`CurrentValues`内容`OriginalValues`。试试这个（未经测试）：

```
ObjectStateEntry entry = objectContext.ObjectStateManager.GetObjectStateEntry(entity);
foreach (string property in entry.GetModifiedProperties()) {
    object oldValue = entry.OriginalValues[property];
    object newValue = entry.CurrentValues[property];
} 
```

这不会处理导航属性，我不确定它如何处理复杂类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:20:35.180

除了 Ladislav Mrnka 的建议：不是很通用，但至少是一个*可能的*解决方案：[代码生成和 T4 文本模板](http://msdn.microsoft.com/en-us/library/bb126445.aspx)。这允许您在生成模型时向每个实体添加自己的自定义逻辑。

在您的情况下，您可以实现所需的遍历功能来检查导航属性。

# c# - 在 Metro 应用程序中的权限更改时收到通知

> ID：11953115
> 
> 赞同：0
> 
> 时间：2012-08-14T13:16:35.383
> 
> 标签：c#, geolocation, windows-8, windows-runtime

我正在使用 c# 在 Win 8 Metro App 上工作。

在我的应用程序中，我使用地理定位服务来获取用户位置的当前坐标。第一次启动应用程序时，系统会要求您提供权限。这一切都很好，我得到坐标没有问题。

现在，我想在权限更改后立即给用户一条消息。这该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T09:01:38.337

检查此文档：http: [//msdn.microsoft.com/en-us/library/windows/apps/Hh465148](http://msdn.microsoft.com/en-us/library/windows/apps/Hh465148)

**提供用于重新启用位置服务的 UI**

让您的应用提供用于重新启用位置服务的 UI——例如，重新实例化 Geolocator 对象并尝试再次获取位置信息的刷新按钮。

*   **如果用户在禁用后重新启用位置访问，则不会通知应用程序**。status 属性没有改变，也没有 statusChanged 事件。您的应用应创建一个新的 Geolocator 对象并调用 getGeopositionAsync 以尝试获取更新的位置数据，或再次订阅 positionChanged 事件。如果状态随后表明位置已重新启用，请清除您的应用先前通知用户位置服务已禁用的任何 UI，并对新状态做出适当响应。

*   **Your app should also try again to get location data upon activation**, or when the user explicitly tries to use functionality that requires location info, or at any other scenario-appropriate time.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:24:51.603

StatusChanged 事件可用于此目的。

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.geolocation.statuschangedeventargs.status.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.geolocation.statuschangedeventargs.status.aspx)

```
case Windows.Devices.Geolocation.PositionStatus.disabled:
     // The app doesn't have permission to access location,
     // either because location has been turned off.
     return "Your location is currently turned off. " +
         "Change your settings through the Settings charm " +
         " to turn it back on.";
     break; 
```

# perl - 执行 bash 命令并捕获输出

> ID：11953116
> 
> 赞同：0
> 
> 时间：2012-08-14T13:16:36.643
> 
> 标签：perl

我有一个在 perl 中执行的 bash 命令，如下所示

```
 @args = ( "bash" , "-c",  "diff <(ssh  -o \"StrictHostKeyChecking no\" user-db01 'mysql -uuser -ppass --execute=\"show databases\"') <(ssh  -o \"StrictHostKeyChecking no\" user-db02 'mysql -uuser -ppass --execute=\"show databases\"')");
system(@args); 
```

但这不允许我将输出获取到字符串变量。如果我用反引号执行完全相同的操作

```
 $cmd = "bash -c diff <(ssh  -o \"StrictHostKeyChecking no\" user-db01 'mysql -uuser -ppass --execute=\"show databases\"') <(ssh  -o \"StrictHostKeyChecking no\" user-db02 'mysql -uuser -ppass --execute=\"show databases\"')";
 my $res = `$cmd`; 
```

它抛出一个错误`sh: -c: line 0: syntax error near unexpected token`（'`我该怎么做才能执行命令并在变量中获取结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:21:28.400

您可以使用常用的 CPAN 模块之一，例如[`IPC::System::Simple`](http://search.cpan.org/perldoc?IPC%3a%3aSystem%3a%3aSimple)具有`capture()`方法的模块；或更有可能出现[`IPC::Open2`](http://perldoc.perl.org/IPC/Open2.html)。

您的反引号问题是您没有引用 diff 命令，因此将其作为 bash 的参数：

```
BREAKS: bash -c diff <( cmd2 ) <( cmd1 )
GOOD  : bash -c "diff <( cmd2 ) <( cmd1 )" 
```

您的代码将每个“单词”视为系统 shell 的单独参数（而不是 bash），例如，它与调用相同`system("bash", "-c", "diff", " <(ssh" ...)`

# java - 在 LWuiT 组件上绘制动画和图像

> ID：11953121
> 
> 赞同：1
> 
> 时间：2012-08-14T13:16:57.080
> 
> 标签：java, java-me, lwuit

我无法理解如何在容器中绘制多个图像，以及如何在组件上绘制动画。首先，我想在组件背景上绘制例如两个图像。这是代码：

公共类 CountryInteriorContainer 扩展组件 {

```
private PainterChain backgroundPainterChain;

public CountryInteriorContainer () {
    super();

    backgroundPainterChain = new BackgroundPainterChain(new GroundPainter("CountryBackgroundLand"));
    backgroundPainterChain.addPainter(new CastlePainter("CastleBrown"));

    getStyle().setBgPainter(backgroundPainterChain);
} 
```

}

在这里，我正在创建绘画队列。但是容器上只有一个第一张图像。

公共类 CastlePainter 扩展 BasePainter {

```
public CastlePainter(String imageId) {
    super(imageId);
}

public CastlePainter(Image image) {
    super(image);
}

public void paint(Graphics g, Rectangle rect) {
    g.drawImage(getImage(), rect.getX() + 40, rect.getY());
} 
```

}

BasePainter 只是从缓存或资源中初始化图像。

请帮助我理解为什么只有第一个画家才能正常工作。以及如何在 LWuiT 中戏剧性地创建动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:54:04.953

我建议你只是覆盖`paint()`或`paintComponent()`而不是进入画家的复杂性。在尝试构建动画效果时，这一点更为重要。

查看 LWUIT 演示和[Codename One](http://www.codenameone.com/)演示中的动画，您无需太多代码即可重现该风格的动画。

# http - 实施 CORS 时未获得响应

> ID：11953132
> 
> 赞同：1
> 
> 时间：2012-08-14T13:17:43.480
> 
> 标签：http, http-headers, xmlhttprequest, cross-domain, cors

我在我的网站上使用 CORS 进行跨域对话。虽然图片中显示的响应标头对我来说似乎很好，但是我没有收到任何响应。它仍然是空白或返回响应。看到附图，谁能预测我的方法中的错误？

在服务器端，我正在使用这个片段

```
 header("Access-Control-Allow-Origin: *");
    header("Access-Control-Allow-Credentials: true ");
    header("Access-Control-Allow-Methods: GET, POST");
    header("Access-Control-Allow-Headers: Content-Type, Depth, User-Agent, X-File-Size, X-Requested-With, If-Modified-Since, X-File-Name, Cache-Control"); 
```

在客户端，我有：-

```
function getXMLHTTPRequest() {
try {
req = new XMLHttpRequest();
} catch(err1) {
try {
req = new ActiveXObject("Msxml2.XMLHTTP");
} catch (err2) {
try {
req = new ActiveXObject("Microsoft.XMLHTTP");
} catch (err3) {
req = false;
}
}
}
return req;
}

var http899 = getXMLHTTPRequest();

http899.open("GET", modurl, true);
http899.setRequestHeader('Content-Type', 'text/html');
http899.onreadystatechange = useHttpResponse899;
http899.send(null); 
```

![在此处输入图像描述](../Images/feb7eb6581b5582806735f789ac853ab.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:05:50.660

不一定是完整的答案，但我认为某些浏览器不接受“Access-Control-Allow-Origin”标题中的多个条目。我不知道 Firefox 是否是其中之一。

如果它在您想要接受的来源列表中，也许尝试将请求的“Origin”标头复制到响应的“Access-Control-Allow-Origin”中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:28:16.777

我的服务器有问题。当我在不同的服务器上尝试相同的代码时，它起作用了！我使用的是共享主机，但服务提供商已将其禁用。

# oracle - 如何获取两个日期之间的工作日或小时数

> ID：11953134
> 
> 赞同：1
> 
> 时间：2012-08-14T13:17:42.630
> 
> 标签：oracle, oracle10g

如何在 oracle 10g 中计算两个日期之间的营业时间或天数？

例如我们有两个日期；14/08/2012 9:30 和 16/08/2012 12:00 我们工作日的工作时间为 09:30 至 18:30。

如何使用 oracle 10g 计算不包括国定假日、周六和周日的工作时间或天数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:23:44.427

你不能。就这么简单。世界各地的国定假日各不相同，每年都有所不同，并且可以随时增加或取消额外的假期。此外，一些司法管辖区会将周末的国定假日延续到下周；其他人没有。

您需要在此创建一个日历表并标记国定假日/周末等。

例如

```
create table calender
  ( day date
  , weekend varchar2(1)
  , holiday varchar2(1)
    ); 
```

然后在其中插入一些数据...

```
 insert into calender (day, weekend)
 select trunc(sysdate + level)
      , case when to_date(sysdate + level,'fmDAY') in ('SATURDAY','SUNDAY') 
                  then 'Y' else 'N' end
   from dual
connect by level <= 365 
```

最后，手动更新您认为是国定假日的内容。

然后，您可以选择工作日，具体取决于您使用以下内容填充它的方式：

```
select count(*)
  from calender
 where day between :startdate and :enddate
   and weekend = 'N'
   and holiday = 'N' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:55:11.947

在表格中找到了计算除周末和节假日之外的营业时间的解决方案。

[https://forums.oracle.com/forums/thread.jspa?messageID=9322860](https://forums.oracle.com/forums/thread.jspa?messageID=9322860)

```
 create or replace
        FUNCTION business_hours(
              in_start_dt IN DATE DEFAULT SYSDATE ,
              in_end_dt   IN DATE DEFAULT SYSDATE )
            RETURN NUMBER DETERMINISTIC
          IS
            --  business_hours returns the number of work hours (9.30 am through 6.30 pm,
            --  Monday through Friday) between in_start_dt and in_end_dt.
            --  If in_start_dt > in_end_dt, the results will be <= 0.
            d          NUMBER;                                    -- Hours of either start_dt or end_dt after midnight
            end_dt     DATE := GREATEST (in_start_dt, in_end_dt); -- In case dates were in wrong order
            return_val NUMBER;                                    -- Total number of working hours
            start_dt   DATE := LEAST (in_start_dt, in_end_dt);    -- In case dates were in wrong order
          BEGIN
          WITH all_days AS
            (SELECT TRUNC(start_dt) + LEVEL - 1 AS a_dt
            FROM dual
              CONNECT BY LEVEL <= 1 + TRUNC (end_dt) - TRUNC (start_dt)
            MINUS
            SELECT hol_dt FROM holiday
            )
          SELECT SUM (9)
          INTO return_val
          FROM all_days
          WHERE TO_CHAR ( a_dt , 'Dy' , 'NLS_DATE_LANGUAGE = ''ENGLISH''' ) NOT IN ('Sat', 'Sun');
          -- Adjust hours from start_dt, if necessary
          IF TO_CHAR ( start_dt , 'Dy' , 'NLS_DATE_LANGUAGE = ''ENGLISH''' ) NOT IN ('Sat', 'Sun') THEN
            d := 24 * (start_dt - TRUNC (start_dt));
            IF d >= 18.5 THEN -- Don't count start_dt itself
              return_val := return_val - 9;
            ELSIF d > 9.5 THEN -- Don't count part of start_dt
              return_val := return_val - (d - 9.5);
            END IF;
          END IF;
          -- Adjust hours from end_dt, if necessary
          IF TO_CHAR ( end_dt , 'Dy' , 'NLS_DATE_LANGUAGE = ''ENGLISH''' ) NOT IN ('Sat', 'Sun') THEN
            d := 24 * (end_dt - TRUNC (end_dt));
            IF d <= 9.5 THEN -- Don't count end_dt itself
              return_val := return_val - 9;
            ELSIF d < 18.5 THEN -- Don't count part of end_dt
              return_val := return_val - (18.5 - d);
            END IF;
          END IF;
          IF in_start_dt > in_end_dt THEN
            return_val  := -return_val;
          END IF;
          RETURN return_val;
        END business_hours ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T09:05:54.540

我只是做了类似的事情。这是一个 sql 代码段，用于计算表 T 中员工在 stime 和 etime 之间完成的工作

```
create table t ( NAME varchar(50), stime date, etime date, clockin number,clockout number );
insert into t values ( 'JOHN', to_date( '18/12/2003 11:40','dd/mm/yyyy hh24:mi'), to_date( '22/12/2003 14:00', 'dd/mm/yyyy hh24:mi'),8, 17 );
insert into t values ( 'JOHN', to_date( '19/12/2003 13:40','dd/mm/yyyy hh24:mi'), to_date( '21/12/2003 15:00', 'dd/mm/yyyy hh24:mi'),8, 17 );
insert into t values ( 'TOM', to_date( '19/12/2003 13:40','dd/mm/yyyy hh24:mi'), to_date( '21/12/2003 15:00', 'dd/mm/yyyy hh24:mi'),8, 17 );

with oo as (SELECT LEVEL-1 rn FROM dual CONNECT BY LEVEL <= 365) --JUST A TABLE WITH INTEGER RECORDS FROM 1 To 365 
select
t.NAME ,sum(least( trunc(stime)+18.5/24+rn, etime )-greatest( stime, trunc(stime)+9.5/24+rn))*24 as WorkHours -- Get workhours between 09:30-18:30 
from oo
inner join t on oo.rn < (trunc(etime)-trunc(stime)+1) 
      and to_char(stime+rn,'Dy') not in ( 'Sat', 'Sun' )  --For eliminating Weekends
      and to_char(trunc(stime)+rn,'DD.MM')  != '04.07'   -- For eliminating Holidays
group by t.NAME 
```

您可以逐行删除组并删除 sum 函数，以通过为每一天生成行来查看它是如何工作的。

# javascript - 获取 NaN 而不是值

> ID：11953140
> 
> 赞同：0
> 
> 时间：2012-08-14T13:17:48.137
> 
> 标签：javascript, jquery, html-table, nan

我一直在编写一些 Javascript 代码来对 HTML 表执行一些数学运算。它首先计算一行的平均值，然后计算菜单中具有相同选择的所有行的平均值的总和。

平均计算工作正常，但我已经用平均值的总数打破了一些东西。我已经设置了一个示例 JSFiddle：

[http://jsfiddle.net/fmdataweb/c4gJU/3/](http://jsfiddle.net/fmdataweb/c4gJU/3/)

 `如果您从菜单中选择“中等”作为风险并为每周的小时数和每年的周数输入一些数字，它将计算平均值，但它应该将平均值放入“中等”单元格的总数中。如果您将菜单选择更改为“高”，则相同。

感谢有人能指出我哪里出错了——我是现阶段的 Javascript 新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T13:23:53.497

选择器`$('#lastYear tr:has(.risk)').eq(i).find('td:last input')`不匹配任何元素。

**测试**：

如果您在该行`alert($('#lastYear tr:has(.risk)').eq(i).find('td:last input').length)`下方插入该行`var qty = parseFloat(...)`，将显示弹出窗口`0`。

**编辑**：

```
var qty = parseFloat($('#lastYear tr:has(.risk)').eq(i).find('td:last').prev().find('input').val()); 
```

正如@Diego 指出的那样，您的原始代码匹配具有按钮的单元格，而不是`input`. 上面的代码选择最后一个单元格之前的单元格，然后获取其输入。但是，我建议您使用自定义类或 id 来使您的选择器更短且更易于阅读。`

# ruby - 如何通过逗号将数组元素拆分为其他内容，例如新数组

> ID：11953152
> 
> 赞同：0
> 
> 时间：2012-08-14T13:18:18.267
> 
> 标签：ruby

到目前为止，我已经将整个文件加载到一个数组中（每个数组元素 1 行）。然后我学会了如何搜索所需的正确行。现在我需要拆分这些行以便我可以使用数据。

1个数组元素（文件中的1行）：数据，数据，数据，数据，数据

第一个数据列是文本，其他是数字。我如何从这里将这些数据拆分成一些东西，这样我就可以只对其中一列或加 2 列进行数学运算，等等？

作为一个次要说明。我有一个包含数千行的文件。但我一次选择 20 个元素。所以我需要对彼此相邻的 20 个元素执行此操作。所以数组 [56],57,58 等。

所以我可以在第 1 行第 2 列 - 第 3 行第 4 列上进行数学运算。等等。（如果这是在 excel 中设置的，它会是这样的 - 但你明白了 - 但只要我知道如何获取个人数据，它就可以以任何方式设置）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:29:50.423

您可以只使用[String::split](http://ruby-doc.org/core-1.9.3/String.html#method-i-split)。

```
"1,2,3,4,a,b,c,d".split(',')         #=> ["1", "2", "3", "4", "a", "b", "c", "d"] 
```

然后，您可以根据需要将数组元素转换为整数或浮点数，如

```
str = "1,2,3,4,a,b,c,d"
arr = str.split(",")

i = arr[0].to_i
f = arr[1].to_f 
```

此外，如果您正在处理 CSV 文件，您可能会考虑使用[Ruby 的 CSV 库](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:31:33.153

您描述的文件结构类似于[`csv`](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)文件。要在 ruby​​ 中解析 csv 文件，您可以使用*惊喜*... CSV 库，它是 ruby​​ 标准库的一部分。

```
require 'CSV'
data = CSV.read(path_to_your_csv_file) 
```

现在，您已加载数据。每次可以使用时迭代大块[`each_cons`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_cons)

```
data.each_cons(20) do |rows| 
  #do something
end 
```

# c# - 使用 IEnumerable 和多继承时出现 BadImageFormatException

> ID：11953153
> 
> 赞同：4
> 
> 时间：2012-08-14T13:18:19.577
> 
> 标签：c#, generics, yield, il

今天我遇到了一个非常奇怪的问题，我能够解决，但我仍然不明白为什么会这样。这是场景：

## 编辑

我将场景更改为更简单：我有一个执行代码的程序和 2 个导入器，一个具有泛型类型的基类和另一个仅调用基方法并对其进行迭代的类 (ImplementingImporter)。这是完整的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace IEnumeratorLoadProblem {
    class Program {
        static void Main(string[] args) {

            var importer = new ImplementingImporter();
            try {
                var data = importer.GetData().ToArray();
            } catch (BadImageFormatException ex) {                
                Console.WriteLine("Why does this fail? " + ex.ToString());
            }

            Console.WriteLine("Press enter to quit");
            Console.ReadLine();
        }
    }

    class BaseClassImporter<T> {

        public virtual IEnumerable<T> GetData() {
            yield break;
        }
    }

    class ImplementingImporter : BaseClassImporter<int> {
        public override IEnumerable<int> GetData() {
            // iterating seems to cause the problem
            foreach(var dataByBaseImpl in base.GetData()) {
                yield return dataByBaseImpl;
            }
        }
    }
} 
```

我收到以下错误：

> System.BadImageFormatException：试图加载格式不正确的程序。（来自 HRESULT 的异常：0x8007000B）

当我将代码从使用过的导入器更改为它**时**：

```
class ImplementingImporter : BaseClassImporter<int> {
    protected override IEnumerable<int> GetData() {
        return base.GetData();
    }
} 
```

不幸的是，我无法查看生成的 IL 代码，因为 ILSpy 和 Reflector.NET（版本 6）都显示了一个内部错误（我认为这是一个 ArgumentOutOfRangeException）。我害怕使用 ildasm，所以没有尝试直接看 IL Code。

我想这与生成的 IL 代码有关，但我想不出导致问题的场景。

有什么想法吗？如果场景不够清楚，请发表评论，我会尽量让它更清楚。

## 编辑：

使用的 .NET 版本：4.0。该应用程序是使用 VS 2010 SP1 的 ConsoleApplication。构建平台目标是 AnyCPu，但使用 x86 时也会出现问题。我的机器有一个 64 位系统（Windows 7）。使用 .NET 4.0 客户端配置文件时也会发生异常。

该示例是单个项目，没有使用外部/非托管库，因此不应出现建议的问题（例如，在运行 64 位时引用 32 位程序集）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:09:45.917

这似乎是`yield return`语句的一个错误：

[https://connect.microsoft.com/VisualStudio/feedback/details/677532/an-attempt-was-made-to-load-a-program-with-an-incorrect-format-exception-from-hresult-0x8007000b#细节](https://connect.microsoft.com/VisualStudio/feedback/details/677532/an-attempt-was-made-to-load-a-program-with-an-incorrect-format-exception-from-hresult-0x8007000b#details)

他们声明它已在 VS2012（或“VS 2010 之后的版本”）中修复。

我正在使用 VS2010 SP1 运行针对 .NET Framework 4 的控制台应用程序，并且可以确认我得到了与您相同的错误。我没有可用于尝试的 VS2012 安装。

这里提出了一个类似的问题：

[迭代器块和继承](https://stackoverflow.com/questions/2432821/iterator-blocks-and-inheritance)

另一个可疑的类似示例（这次是异步，但`MoveNext`再次触发）：

[C#5 AsyncCtp BadImageFormatException](https://stackoverflow.com/questions/6283644/c5-asyncctp-badimageformatexception)

其他资源：

*   [德语连接条目。](https://connect.microsoft.com/VisualStudio/feedback/details/757873/issue-yield-if-generic-base-class-c-net4-0)
*   [从上面链接的 MSFT 论坛帖子](http://social.msdn.microsoft.com/Forums/de-DE/dotnetframeworkde/thread/26f429bb-a754-4176-8ac2-b476996e7618/)（使用翻译）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:26:48.103

确保所有项目都使用相同的编译选项（AnyCPU、x86 或 x64）。

如果您使用任何外部 dll，请确保它们兼容（即 x86 机器上为 32 位，x64 机器上为 64 位）。

如果你想在 x64 机器上使用 32 位 dll，那么你需要将你的 main .exe 设置为编译为“x86”而不是“任何 CPU”——这将强制整个应用程序作为 32 位进程运行在 64 位 PC 上。（如果您不这样做，您的 exe 将在 x64 机器上被 JIT 编译为 64 位应用程序，然后尝试调用您的 32 位 dll，这将引发您得到的异常）

# git - 如何清除状态条目

> ID：11953162
> 
> 赞同：0
> 
> 时间：2012-08-14T13:18:46.343
> 
> 标签：git, github

我暂存了一堆文件，然后在提交到存储库之前删除了它们。当我这样做时，`git status`我看到了：

```
# deleted: filename.fileext 
```

我已经能够提交新的更改，但这些已删除的文件仍出现在状态检查中。有人可以解释为什么吗？我该如何摆脱它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:20:21.667

```
git add -u
git commit -m "Deleted files manually" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:20:56.480

如果您使用`rm`命令删除文件，请运行`git rm <file_path_to_be_removed>`以告诉 git 这些文件已被删除。

`rm`命令仅删除物理文件。然后你需要通知 git。

```
kevin@kevin-dev:/tmp/git$ touch a.txt
kevin@kevin-dev:/tmp/git$ git add a.txt
kevin@kevin-dev:/tmp/git$ git commit -m"m"
[master (root-commit) 03f6743] m
 0 个文件更改，0 个插入 (+)，0 个删除 (-)
 创建模式 100644 a.txt
kevin@kevin-dev:/tmp/git$ git 状态
# 在分支master上
没有什么可提交的（工作目录干净）
kevin@kevin-dev:/tmp/git$ rm a.txt
kevin@kevin-dev:/tmp/git$ git 状态
# 在分支master上
# 未为提交暂存的更改：
# (使用 "git add/rm ..." 更新将要提交的内容)
# (使用 "git checkout -- ..." 丢弃工作目录中的更改)
#
# 删除：a.txt
#
没有添加到提交的更改（使用“git add”和/或“git commit -a”）
kevin@kevin-dev:/tmp/git$ git rm a.txt
rm'a.txt'
kevin@kevin-dev:/tmp/git$ git 状态
# 在分支master上
# 要提交的更改：
# （使用“git reset HEAD ...”取消暂存）
#
# 删除：a.txt
#
kevin@kevin-dev:/tmp/git$

```

牵引`deleted`状态**不同**。第一个是**Changes not staged for commit:**，第二个是**Changes to becommited:** 所以，只需运行`git commimt -m"Message"`，然后一切就干净了。

# c# - 将数据从 LIST 保存到文本文件

> ID：11953164
> 
> 赞同：2
> 
> 时间：2012-08-14T13:18:53.230
> 
> 标签：c#, list, text-files

我正在使用这个库[http://www.codeproject.com/Articles/28064/Global-Mouse-and-Keyboard-Library](http://www.codeproject.com/Articles/28064/Global-Mouse-and-Keyboard-Library)来录制宏。我想知道如何将“事件”保存在文本文件中以便以后加载？

所以，这里是列表：

```
List<MacroEvent> events = new List<MacroEvent>(); 
```

我需要做什么才能将数据放入文本文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:35:03.703

您有 3 个选项：

1.  使用 ToString() 方法将 MacroEvent 导出为格式化文本。您可能需要覆盖默认实现。确保输入您需要的所有信息，否则您以后将无法检索它们。然后需要读取和解析文件以加载数据。

2.  使用内置的 .net XML 序列化功能。写/读操作很简单。

    [http://msdn.microsoft.com/en-us/library/ms950721.aspx](http://msdn.microsoft.com/en-us/library/ms950721.aspx)

    [http://support.microsoft.com/kb/815813](http://support.microsoft.com/kb/815813)

3.  如果您不打算在另一个应用程序上使用数据，为什么不使用 BinarySerializer？到目前为止，最好的方法，但生成的文件不会是文本格式。

    [http://www.codeproject.com/Articles/1789/Object-Serialization-using-C](http://www.codeproject.com/Articles/1789/Object-Serialization-using-C)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:22:38.740

如果`MacroEvent`有`ToString()`可用的方法，您可以简单地遍历列表并打印到您的文本文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:23:48.483

```
TextWriter tw = new StreamWriter("myFile.txt");
foreach (MacroEvent item in events)
{
    tw.WriteLine(item.ToString());   
}
tw.Close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T13:25:37.307

我建议使用扩展方法。我对此一无所知`MacroEvent`，也不打算从 Code Project 下载代码只是为了看看，但这就是它的样子。

```
public static class MacroEventExtensions
{
    public static void WriteToFile(this List<MacroEvent> events, string path)
    {
        StringBuilder fileContents = new StringBuilder();
        foreach (var e in events)
        {
            fileContents.AppendLine("{0}::{1}",
                [some event id from the object],
                [some event message from the object]);
        }

        File.WriteAllText(path, fileContents.ToString());
    }
} 
```

然后在上面的代码中你只需调用：

```
events.WriteToFile([some path]) 
```

# c# - 执行 HttpWebRequests 时检测到防病毒威胁

> ID：11953165
> 
> 赞同：1
> 
> 时间：2012-08-14T13:18:54.360
> 
> 标签：c#, security, httpwebrequest, antivirus

我只是为了练习而创建爬虫，每隔几千个站点就会得到类似的东西：

## ![在此处输入图像描述](../Images/c2db8a5e40ff0739defbd06e14c67fdd.png)

什么样的恶意软件/脚本可以通过这种方式在我的 PC 上执行，有什么方法可以直接保护自己免受代码影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:30:25.920

您正在爬取的网站包含 Blackhole Exploit Kit。AVG 宣传其发现的所有 Web 漏洞利用类型中的[59%](https://en.wikipedia.org/wiki/Blackhole_exploit_kit)（[Sophos 占 28% ）属于 Blackhole Exploit Kit。](http://nakedsecurity.sophos.com/exploring-the-blackhole-exploit-kit-14/)由于您的程序正在像浏览器一样下载网页，因此 AVG 中的监控服务会提醒您即将到来的威胁，而不会意识到它被无害地丢弃了。假设您没有在加载/执行 JavaScript 的过程中渲染您正在下载的内容，那么您是绝对安全的。

# regex - 使用正则表达式进行 Grep

> ID：11953174
> 
> 赞同：3
> 
> 时间：2012-08-14T13:19:33.703
> 
> 标签：regex, linux, bash, grep

考虑这个文本文件：

```
TEST FILE : test                         #No match
                                         #No match
Run grep "1133*" on this file            #Match
                                         #No match
This line contains the number 113\.       #Match
This line contains the number 13\.        #No match
This line contains the number 133\.       #No match
This line contains the number 1133\.      #Match
This line contains the number 113312\.    #Match
This line contains the number 1112\.      #No match
This line contains the number 113312312\. #Match
This line contains no numbers at all.    #No match 
```

该命令如何`grep`评估`1133*`正则表达式？

```
echo "Consider this text file:

TEST FILE : test                         #No match
                                         #No match
Run grep \"1133*\" on this file          #Match
                                         #No match
This line contains the number 113\.       #Match
This line contains the number 13\.        #No match
This line contains the number 133\.       #No match
This line contains the number 1133\.      #Match
This line contains the number 113312\.    #Match
This line contains the number 1112\.      #No match
This line contains the number 113312312\. #Match
This line contains no numbers at all.    #No match" | grep "1133*" 
```

输出：

```
Run grep "1133*" on this file            #Match
This line contains the number 113\.       #Match
This line contains the number 1133\.      #Match
This line contains the number 113312\.    #Match
This line contains the number 113312312\. #Match 
```

为什么该行包含`113`正数？

正则表达式是否`1133*`意味着除了查找包含单词的所有行之外的任何其他内容`1133+anything else`？

此示例可在[tldp regexp](https://www.tldp.org/LDP/abs/html/x17129.html)文档页面上找到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T13:23:37.817

你正在考虑一个 shell 通配符，它​​可以`*`匹配任何东西。在[正则表达式](http://regular-expressions.info)中，a`*`是一个[量词](http://www.regular-expressions.info/repeat.html)，表示它之前的任何内容的“零个或多个”，在这种情况下是`3`.

所以你的表达意味着`113`后跟零个或多个`3`s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T15:28:12.947

尝试 grep "1133$" 或 grep "^1133$"

其中 ^ 是行首， $ 是行尾

如果您的行假设 3 列：aaa 113 bbbb

cat file.txt|awk '{print $2}'|grep "^1133$"|wc -l

确保您只查看特定列

# jquery - jquery找到最近的类并将其删除

> ID：11953177
> 
> 赞同：12
> 
> 时间：2012-08-14T13:19:43.647
> 
> 标签：jquery

`list_product`如果单击该特定`delete`类，我将尝试删除整个块。我对 jquery 很陌生，还在学习。

```
<div class='list_product'>
    <div class='row'>
        <div class='delete'>x</div>
        <div class='title'>Standing Fan</div>
     </div>
</div>
<div class='list_product'>
    <div class='row'>
        <div class='delete'>x</div>
        <div class='title'>Standing Fan 2</div>
     </div>
</div>
<div class='list_product'>
    <div class='row'>
        <div class='delete'>x</div>
        <div class='title'>Standing Fan 3</div>
     </div>
</div>
<div class='list_product'>
    <div class='row'>
        <div class='delete'>x</div>
        <div class='title'>Standing Fan 4</div>
     </div>
</div> 
```

查询：

```
$('.delete').click(function() {
   $(this).find('.list_product').remove();
}); 
```

不管用。我可以知道为什么以及如何解决它吗？谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-14T13:21:21.037

做吧`$(this).closest('.list_product').remove()`。
API ref: [http://api.jquery.com/closest/](http://api.jquery.com/closest/)
`find`搜索当前元素的子元素。在这种情况下，`.delete`元素没有任何子元素。相反，通过`closest`DOM*向上*，寻找具有 class 的第一个祖先`list_product`。希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T13:26:14.813

试试这个：

```
$(document).on('click', '.delete', function(e) {
   e.preventDefault();
   $(this).closest('.list_product').remove();
   return false;
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T13:25:03.563

您可以在父元素上使用[事件委托或使用](http://fooberry.com/2009/01/03/jquery-and-event-delegation/)[Closest](http://api.jquery.com/closest/)方法

最近很容易使用：

```
var id = $("button").closest("div").attr("id"); 
```

# windows-8 - 如何将内容分享到社交网络

> ID：11953184
> 
> 赞同：1
> 
> 时间：2012-08-14T13:19:56.467
> 
> 标签：windows-8, microsoft-metro

我对 Metro 应用程序中的共享模型感到困惑。我们正在尝试遵循 Windows 设计方法，并决定研究 Share 魅力。

[本文](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh871368(v=win.10).aspx)介绍如何在应用程序之间共享内容。但我们希望允许用户分享到 Twitter 和 Facebook，如果系统中没有安装这些应用程序，则此功能将不可用。

所以问题更多是在概念层面上：如果我们提供分享到社交网络的可能性，我们是否需要在我们的应用程序中实现 UI 和逻辑而忘记分享魅力？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:21:05.210

您是正确的，共享魅力仅使您的应用程序能够与其他应用程序共享数据，如果未安装这些应用程序，则可能无法共享到这些网络。请记住，可能会安装其他可以完成相同任务的“非官方”应用程序。FlipToast 就是一个例子。

如果分享到 Twitter 和 Facebook 是您的应用程序的重要方面，至少在用于 Release Preview 的 SDK 中，您需要自己实现该逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:51:46.343

你说：

> 但我们希望允许用户分享到 Twitter 和 Facebook

问题不是您想要的，至少不是在 Windows 应用商店应用程序的上下文中。这是关于用户想要做什么，如果用户希望通过 Twitter 或 Facebook 分享，将会有很多应用程序供他们安装，这使得这成为可能。

作为 Windows 8 应用程序的开发人员，您的目标应该是提供您希望应用程序共享的信息，并让用户决定在何处共享该信息。

您可以通过包含多种格式（纯文本、HTML、图像、缩略图等）来改善用户体验，以确保无论实现 Share 目标合同的应用程序首选哪种格式，您都可以使用它。

在 Twitter 和 Facebook 上添加您自己独特的分享功能在短期内似乎是个好主意，但是当下一个伟大的社交媒体网络出现，而 Twitter/Facebook 开始消退时会发生什么？您是否也打算将该功能添加到您的应用程序中？

同时，对分享不感兴趣的用户将在您的应用程序中拥有额外的东西，这些东西不会给他们带来任何好处。

试试 Share 合约……IMO，它提供了一种很好的方式，让您的用户可以轻松地与各种应用程序和社交网络分享，甚至是那些尚未创建的应用程序和社交网络。

# bash - Counting the number of dots in a string

> ID：11953185
> 
> 赞同：14
> 
> 时间：2012-08-14T13:19:58.160
> 
> 标签：bash

How do I count the number of dots in a string in BASH? For example

```
VAR="s454-da4_sd.fs_84-df.f-sds.a_as_d.a-565sd.dasd"

# Variable VAR contains 5 dots 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T13:32:23.310

您可以结合`grep`和`wc`命令来做到这一点：

```
echo "string.with.dots." | grep -o "\." | wc -l 
```

解释：

```
grep -o   # will return only matching symbols line/by/line
wc -l     # will count number of lines produced by grep 
```

或者您只能`grep`用于该目的：

```
echo "string.with.dots." | grep -o "\." | grep -c "\." 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-15T10:31:30.457

`awk`选择：

```
echo "$VAR" | awk -F. '{ print NF - 1 }' 
```

输出：

```
5 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-14T13:23:43.443

```
VAR="s454-da4_sd.fs_84-df.f-sds.a_as_d.a-565sd.dasd"
echo $VAR | tr -d -c '.' | wc -c 
```

tr`-d`从输入中删除给定的字符。`-c`取给定字符的倒数。一起，这个表达式删除了非 '.' 字符并使用 . 计算结果长度`wc`。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-14T13:45:20.397

纯解决方案`bash`：

```
VAR="s454-da4_sd.fs_84-df.f-sds.a_as_d.a-565sd.dasd" 
VAR_TMP="${VAR//\.}" ; echo $((${#VAR} - ${#VAR_TMP})) 
```

甚至就像 chepner 提到的那样：

```
VAR="s454-da4_sd.fs_84-df.f-sds.a_as_d.a-565sd.dasd" 
VAR_TMP="${VAR//[^.]}" ; echo ${#VAR_TMP} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-20T23:55:28.633

临时设置`IFS`，纯Bash，无子进程：

```
IFS=. VARTMP=(X${VAR}X) # avoid stripping dots
echo $(( ${#VARTMP[@]} - 1 )) 
```

输出：

```
5 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-14T14:06:21.933

```
VAR="s454-da4_sd.fs_84-df.f-sds.a_as_d.a-565sd.dasd"
dot_count=$( IFS=.; set $VAR; echo $(( $# - 1 )) ) 
```

这可以通过将字段分隔符设置为“。”来实现。在子shell中并通过对字符串进行分词来设置位置参数。有 N 个点，就会有 N+1 个位置参数。最后，我们从子shell 中的位置参数数量中减去 1 并回显要在`dot_count`.

# javascript - Import external URL content without an iframe

> ID：11953189
> 
> 赞同：1
> 
> 时间：2012-08-14T13:20:16.023
> 
> 标签：javascript, jquery, html, url

I am working on a project for a client who would like their own dynamic latest news feed embedded on to the right hand side of our site. It's a fairly custom module with videos and links, not just RSS or Twitter.

The client has uploaded this content on to their servers as a page specially for us to grab, and have provided us with the URL.

I could embed the content using an iFrame, but they haven't got target="_parent" in their links, so if a link is clicked the new content is loaded within the iframe which isn't what we want. We want it to open in a new tab. We can't change their content or ask them to for 2 weeks unfortunately - which will be too late! To make it even more annoying, we're not on the same domain.

Our system is build on asp.net which I have no knowledge of (I'm more PHP!). It's also worth mentioning that I am a front-end developer in this role and can't access or modify any asp.net code.

I have tried using jQuery .load() without success. Being a bit of a newbie I am unsure of the correct way to go about this, or if it's even possible at all using front-end technologies?

It seems that similar questions to mine are all old and dated so it would be good to get the latest and best approach.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:40:47.323

好吧，如果你用 拉入他们的内容`.load()`，它有一个完成时的回调函数。只需循环浏览`<a>`该部分中的所有链接并将其更改`target=`为在新选项卡中打开！

`css: target-new: tab ! important`（不幸的是，这仅与 css3 兼容）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:44:48.677

使用**jQuery .load()**您需要提取页面上的所有 JS 代码并使其针对此部分，因为它只会加载 DOM 元素。这有点棘手，但在改变了一些东西和路径之后，你就可以让它工作了。

另一种可能更简单的方法，但只有**当您在同一个域上时**它才会起作用：

```
$("#iFrame").contents().find("a").on("click",function(e)
{
    e.preventDefault();
    // then use the href to virtualy create a link click event :-)
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:43:25.520

如果您可以确保`<head>`正在加载的页面中包含：

```
<base target="_blank" /> 
```

然后所有链接将在新窗口中打开。如果您无法确保页面中包含该内容`<head>`，则可以选择通过服务器端 HTTP 请求下载页面数据，并在将页面嵌入您的框中之前手动添加该标签。如果你不想做任何服务器端的工作，你还不如在客户端做。这是如何完成的简化版本：

```
$.get("http://exampleurl.com/", function (data) {
    var pos = data.indexOf("<head>");
    if(pos == -1) {
        //pretty impossible
        return;
    }
    data = data.substr(0, pos + 5) + '<base target="_blank" />' + data.substr(pos + 6, data.length - (pos + 6));
    //display data
}); 
```

# jquery - 如何在 Rails 3 表单中使用 jquery 执行客户端验证

> ID：11953194
> 
> 赞同：0
> 
> 时间：2012-08-14T13:20:27.760
> 
> 标签：jquery, ruby-on-rails, validation, client-side-validation

我想在 rails 3表单**中使用 jquery执行****客户端**验证

 **对于以下表格

字段可能是电子邮件、手机号码等

```
<%= form_for(@user) do |f| %>
<div class="field">
  <%= f.label :Name %><br />
  <%= f.text_field :name %>
</div>

<div class="field">
  <%= f.label :Contact_number %><br />
  <%= f.text_field :contact_number %>
</div>
<div class="field">
  <%= f.label :Licence_type %><br />
  <%= f.text_field :licence_type %>
</div>

<div class="actions">
 <%= f.submit %>
</div>
<% end %> 
```

请帮助我进行上述验证

或您可能为我建议的任何其他客户端验证

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:24:49.673

client_side_validations gem 应该[可以](https://github.com/bcardarella/client_side_validations)帮助您解决问题。它将检测标准 Rails 验证器，并将它们应用到 javascript 中，并允许您在必要时添加自己的自定义验证器。

免责声明：我与 bcardarella 合作**

# jquery - 选择给出错误的值

> ID：11953195
> 
> 赞同：2
> 
> 时间：2012-08-14T13:20:28.530
> 
> 标签：jquery, html, select

我正在为一所学校创建一个数据输入表单。学校将在该数据库中输入 5 至 12 年级学生的数据。现在五年级有4个部分，其他年级有3个部分。10年级只有一节。

表单已准备就绪，使用 jquery 我可以根据用户选择的等级使部分选择元素显示或隐藏。我的问题是当用户选择第 5 个标准时，显示部分选择元素并且用户选择说“A”并提交。但我得到的值为 0。如果用户选择部分为“D”，则发送的值为“B”。

The section select for all other grades are working fine, this problem arises only when the grade selected is 5th.

**脚本**

```
<script type='text/javascript' src='scripts/jquery-1.5.2.js'></script>
<script type="text/javascript">//<![CDATA[ 
$(window).load(function(){
$("#std").change(function() {
        var value = $(this).val();
        if(parseInt(value)==0) {
           $("#sec5").hide();
           $("#sec6").hide();
        }
        if(parseInt(value)==5) {
            $("#sec5").show();
            $("#sec6").hide();
        }
        if(parseInt(value)==6) {
           $("#sec5").hide();
           $("#sec6").show();
        }
        if(parseInt(value)==7) {
           $("#sec5").hide();
           $("#sec6").show();
        } 
    if(parseInt(value)==6) {
       $("#sec5").hide();
       $("#sec6").show();
    }
    if(parseInt(value)==8) {
       $("#sec5").hide();
       $("#sec6").show();
    }
    if(parseInt(value)==9) {
       $("#sec5").hide();
       $("#sec6").show();
    }
    if(parseInt(value)==10) {
       $("#sec5").hide();
       $("#sec6").hide();
    }
    if(parseInt(value)==11) {
       $("#sec5").hide();
       $("#sec6").show();
    }
    if(parseInt(value)==12) {
       $("#sec5").hide();
       $("#sec6").show();
    }
});

});//]]> 
</script> 
```

**HTML 部分**

```
<form action="check.php" method="post">
    <fieldset>
      <legend>DBMS</legend>
      <label for="roll">Roll:
        <input name="roll" type="text" id="roll" value="" size="8" maxlength="10" />
      </label>
      &nbsp;
      <label for="marks">Total Marks:
        <input name="marks" type="text" id="marks" value="" size="3" maxlength="3" />
      </label>
      &nbsp;
      <label for="std">Std</label>
      <select id="std" name="std">
        <option value="0">--Select--</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
      </select>
      <span id="sec5" class="hide">
      &nbsp;
      <label for="sec">Section</label>
      <select id="sec" name="sec">
        <option value="0">--Select--</option>
        <option value="A">Sec A</option>
        <option value="B">Sec B</option>
        <option value="C">Sec C</option>
        <option value="D">Sec D</option>
      </select>
      </span> <span id="sec6" class="hide">
      &nbsp;
      <label for="sec">Section</label>
      <select id="sec" name="sec">
        <option value="0">--Select--</option>
        <option value="A">Sec A</option>
        <option value="B">Sec B</option>
        <option value="C">Sec C</option>
      </select>
      </span>
      <p align="center">
        <input type="submit" name="nlogin" id="nlogin" value="Submit" />
        &nbsp;
        <input type="reset" name="nreset" id="nreset" value="Reset" />
      </p>
    </fieldset>
  </form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T13:29:29.710

当您`show()`或`hide()`表单的一个区域时，它不会被删除 - 只是隐藏在视线之外。因此，您的表单实际上是提交了两个名称为`sec`. 您的问题是由第二个选择的值覆盖第一个引起的。

可以通过选择其中一个下拉菜单来解决这个问题`remove()`，但这不可逆，我不推荐它。

相反，您可能会更改这些选择下拉列表中的至少一个的名称/ID - 比如说，`sec1`并且`sec2`- 并添加一些服务器端代码以查看应该处理哪一个。

第二种解决方案可能是在您的 HTML 中只选择一个并使用 jQuery 来修改其选项。这将需要重写大部分 JavaScript 代码，但它会消除对服务器端编码的需要。（但是，在这些情况下，服务器端验证总是一个好主意，作为一种冗余，无论如何都应该实施。）类似于：

```
<select id="sec" name="sec">
    <option value="0">--Select--</option>
    <option id="sec-a" value="A">Sec A</option>
    <option id="sec-b" value="B">Sec B</option>
    <option id="sec-c" value="C">Sec C</option>
    <option id="sec-d" value="D">Sec D</option>
  </select> 
```

JS：

```
$("#std").change(function() {
    var v = parseInt($(this).val(), 10); // always use a radix
    if(v==0) {
        $('#sec').hide();
    } else if(v==5) {
        $('#sec').show();
        $('#sec-d').hide();
    } else if(v==6) {
        $('#sec').show();
        $('#sec-d').show();
    }  // etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:36:11.217

这里只是代码的缩小版：

```
$("#std").change(function() {
      var value = parseInt(this.value, 10);
      $("#sec5").hide();
      if (value == 0 || value == 10) {
           $("#sec6").hide();
      } else {
           $("#sec6").show();
      }
}) 
```

* * *

您可以更改`name`可见选择元素的属性，并在表单提交时删除隐藏的属性：

```
$('form').submit(function(){
   $('select').filter(':hidden').remove();
   $('select:eq(1)').attr('name', 'theChosenOne') // if the second select is visible
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:33:42.873

1.  用例

    switch (value) {
    case 6:
    case 7:
    case 8:
    case 9: $("#sec5").hide(); $("#sec6").show(); 休息;
    }

2.  如果加倍

    如果（parseInt（值）==6）{

# php - 在 Twitter Bootstrap 中使用药丸导航

> ID：11953196
> 
> 赞同：2
> 
> 时间：2012-08-14T13:20:36.080
> 
> 标签：php, twitter-bootstrap, nav

我正在尝试使用 Twitter Bootstrap 的药丸导航，但它无法正常工作。

我确实在我的标签内容中添加了“活动”类。然而，这就是发生的一切——我实际上并没有看到内容有任何变化。所有内容都只是按顺序显示，而不是包装到选项卡窗格中。

这是PHP。请注意，我只是在标题中包含 bootstrap.js。

```
<section id="about" class="section tabbable">
    <!-- Section Title -->
    <?php echo '<h2>' . $section->post_title . '</h2>'; ?>

    <!-- Subsection Title Navigation -->
    <?php if (!empty($section_children)){ //if other sections exist, add them
            echo '<ul class="nav nav-pills" id="an">';
            echo '<li class="active">' . '<a data-toggle="pill" href="#' . $section->post_name . '-content">' . $section->post_title . '</a></li>';

            foreach($section_children as $subsection){
                echo '<li>' . '<a data-toggle="pill" href="#' . $subsection->post_name . '">' . $subsection->post_title . '</a></li>';
            }
            echo '</ul><!--"/.nav-pills"-->';   
          }?>

    <div class="contentArea tab-content">
  <?php echo '<article class="contents tab-pane active" id="' . $section->post_name . '-content">' . apply_filters('the_content', $section->post_content) . '</article><!-- /.contents -->';?>

  <?php if (!empty($section_children)){ //if other sections exist, add them
            foreach($section_children as $subsection){
                echo '<div class="contents tab-pane" id="' . $subsection->post_name . '">';
                echo '<h2>' . $subsection->post_title . '</h2>';
                echo '<article>' . apply_filters('the_content', $subsection->post_content) . '</article></div><!-- /.contents -->';
            }   
        }?>
    </div><!-- /.contentArea -->
</section><!-- /.section --> 
```

知道为什么我的内容总是可见并且不包含在选项卡窗格中吗？

编辑：查看生成的 HTML 可能更容易：

```
<section id="about" class="section tabbable" style="height: 743px; ">
    <!-- Section Title -->
    <h2>About</h2>      
    <!-- Subsection Title Navigation -->
    <ul class="nav nav-pills" id="an">
        <li class=""><a data-toggle="pill" href="#about-content">About</a></li>
        <li class="active"><a data-toggle="pill" href="#execs">Your Executives</a></li>
        <li class=""><a data-toggle="pill" href="#governing-documents">Governing Documents</a></li>
    </ul><!--"/.nav-pills"-->   
    <div class="contentArea tab-content">
        <div class="contents tab-pane" id="about-content" style="width: 1019px; padding-left: 0px; ">
            <!-- …contents… -->
        </div><!-- /.contents -->     
        <div class="contents tab-pane active" id="execs" style="width: 1019px; padding-left: 0px; ">
            <!-- …contents… -->       
        </div><!-- /.contents -->
        <div class="contents tab-pane" id="governing-documents" style="width: 1019px; padding-left: 0px; ">
            <!-- …contents… -->
        </div><!-- /.contents -->       
    </div><!-- /.contentArea -->
</section> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:47:07.377

如果您没有正确加载**bootstrap.css**文件，您将得到此行为。或者可能来自 LESS 的编译不包括**navs.less**文件。

否则，您的代码对我有用：

### [JSFiddle](http://jsfiddle.net/mmfansler/zKQTX/)

# java - 创建我自己的文档查看器

> ID：11953199
> 
> 赞同：1
> 
> 时间：2012-08-14T13:20:42.377
> 
> 标签：java, javascript, document-view

我想用 Java Servlet 和 JavaScript 创建一个文件查看器。我在我的服务器中托管各种文档格式，我想通过浏览器提供文件查看选项。我想支持 MS Docs、Open office Docs、PDF 文件、文本文件等。我一直在使用 Zoho Viewer，它将被停止使用。所以我想开始创建我自己的文件查看器。（我计划提供编辑选项，也像谷歌文档）。希望我必须使用 XML 模式来打开不同的二进制文档（例如：http://en.wikipedia.org/wiki/Microsoft_Office_XML_formats#Word_XML_Format_example）。有人可以指出我从..开始的正确方向吗？

PS：我已经用谷歌搜索和“Stackd”，但我找不到任何有用的提示。这就是我发布这个问题的原因。我知道 StackOverFlow 中的 Doc Viewer 已经有一个问题，但它是关于将文件作为 Flash 内容查看，我想将文件作为 HTML 内容查看/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:43:24.103

您可以先在 FCKEditor 等 WYSIWYG 编辑器中查看代码。除非许可证与您项目的许可证兼容，否则不要使用任何其他人的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:31:01.233

您可以使用/调整工具，例如[LibreOffice Sdk](http://www.libreoffice.org/download/)或[OpenOffice SDK](http://www.openoffice.org/development/)

# c++ - 在 C++ 中连接字符串和布尔值？

> ID：11953200
> 
> 赞同：1
> 
> 时间：2012-08-14T13:20:47.060
> 
> 标签：c++, string, char, boolean, concatenation

我想做类似以下的事情：

```
bool b = ...
string s = "Value of bool is: " + b ? "f" : "d"; 
```

我见过的所有例子都使用了`cout`，但我不想打印字符串；只是存储它。

我该怎么做？如果可能的话，我想要一个分配给 a`char *`和一个分配给 a 的示例`std::string`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T13:25:11.503

~~如果你的编译器足够新，它应该有[`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)：~~

 ~~```
string s = "Value of bool is: " + std::to_string(b); 
```~~ 

~~这当然会附加`"1"`(for `true`) 或`"0"`(for `false`) 到您的字符串，而不是`"f"`或`"d"`根据您的需要。原因是没有`std::to_string`需要`bool`类型的重载，因此编译器将其转换为整数值。~~

您当然可以分两步进行，首先声明字符串，然后附加值：

```
string s = "Value of bool is: ";
s += b ? "f" : "d"; 
```

或者像现在一样做，但明确地将第二个创建为`std::string`：

```
string s = "Value of bool is: " + std::string(b ? "f" : "d"); 
```

**编辑：**如何`char`从`std::string`

这是通过[`std::string::c_str`](http://en.cppreference.com/w/cpp/string/basic_string/c_str)方法完成的。但正如 Pete Becker 所指出的，您必须小心如何使用此指针，因为它指向字符串对象内的数据。如果对象被销毁，数据也会被销毁，如果保存，指针现在将无效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T13:23:26.777

使用[`ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)：

```
std::ostringstream s;
s << "Value of bool is: " << b;
std::string str(s.str()); 
```

并且您可以使用[`std::boolalpha`](http://en.cppreference.com/w/cpp/io/manip/boolalpha)to`"true"`或`"false"`代替`int`表示：

```
s << std::boolalpha << "Value of bool is: " << b; 
```

* * *

注意发布的代码几乎是正确的（不可能是`+`两个`char[]`）：

```
std::string s = std::string("Value of bool is: ") + (b ? "t" : "f"); 
```

* * *

要分配给`char[]`您可以使用`snprintf()`：

```
char buf[1024];
std::snprintf(buf, 1024, "Value of bool is: %c", b ? 't' : 'f'); 
```

或者只是`std::string::c_str()`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T13:32:33.970

很简单：

```
std::string s = std::string("Value of bool is: ") + (b ? "f" : "d"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T13:23:17.177

我会使用`std::stringstream`：

```
std::stringstream ss;
ss << s << (b ? "f" : "d");
std::string resulting_string = ss.str(); 
```

[字符串流参考](http://www.cplusplus.com/reference/iostream/stringstream/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-14T13:25:54.293

分两步执行操作：

```
bool b = ...
string s = "Value of bool is: ";
s+= b ? "f" : "d"; 
```

这是必要的，因为否则您将尝试将两个相加`const char *`，这是不允许的；相反，这种方式依赖于`+=`运算符 for`std::string`和 C 字符串的重载。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-14T13:26:09.930

简单点：

```
bool b = ...
string s = "Value of bool is: ";
if (b)
  s += "f";
else
  s += "d"; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-14T13:37:25.480

封装：

```
std::string toString(const bool value)
{
    return value ? "true" : "false";
} 
```

然后：

```
std::string text = "Value of bool is: " + toString(b); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-14T13:26:26.777

你也可以使用 strcat()

```
char s[80];
strcpy(s, "Value of bool is ");
strcat(s, b?"f":"d"); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-14T13:46:12.050

对于这个简单的用例，只需将一个字符串附加到另一个字符串：

```
std::string text = std::string("Value of bool is: ").append( value? "true" : "false" ); 
```

现在，对于更通用的解决方案，您可以创建一个字符串构建器类：

```
class make_string {
   std::ostringstream st;
   template <typename T>
   make_string& operator()( T const & v ) {
       st << v;
   }
   operator std::string() {
       return st.str();
   }
}; 
```

它可以很容易地扩展以支持操纵器（添加几个额外的重载），但这足以满足大多数基本用途。然后将其用作：

```
std::string msg = make_string() << "Value of bool is " << (value?"true":"false"); 
```

（同样，在这种特殊情况下，这是矫枉过正，但如果你想组成一个更复杂的字符串，这将是有帮助的）。

# c++ - 可变参数模板和参数推导

> ID：11953204
> 
> 赞同：1
> 
> 时间：2012-08-14T13:20:59.490
> 
> 标签：c++, c++11, variadic-templates

鉴于以下来自[Anthony Williams](http://www.devx.com/cplus/Article/41533/1954)的代码片段。一个非常基本的元组示例，这里的所有内容都按预期工作。

```
#include <iostream>

template<typename ... Types>
class simple_tuple;

template<>
class simple_tuple<>
{};

template<typename First,typename ... Rest>
class simple_tuple<First,Rest...>:
        private simple_tuple<Rest...>
{
        First member;
public:
        simple_tuple(First const& f,Rest const& ... rest):
          simple_tuple<Rest...>(rest...),
                  member(f)
          {}
          First const& head() const
          {
                  return member;
          }
          simple_tuple<Rest...> const& rest() const
          {
                  return *this;
          }
};

template<unsigned index,typename ... Types>
struct simple_tuple_entry;

template<typename First,typename ... Types>
struct simple_tuple_entry<0,First,Types...>
{
        typedef First const& type;
        static type value(simple_tuple<First,Types...> const& tuple)
        {
                return tuple.head();
        }
};

template<unsigned index,typename First,typename ... Types>
struct simple_tuple_entry<index,First,Types...>
{
        typedef typename simple_tuple_entry<index-1,Types...>::type type;
        static type value(simple_tuple<First,Types...> const& tuple)
        {
                return simple_tuple_entry<index-1,Types...>::value(tuple.rest());
        }
};
template<unsigned index,typename ... Types>
typename simple_tuple_entry<index,Types...>::type
        get_tuple_entry(simple_tuple<Types...> const& tuple)
{
        std::cout << "SizeofArgs == " << sizeof...(Types) << std::endl;
        return simple_tuple_entry<index,Types...>::value(tuple);
}

int main()
{
        simple_tuple<int,char,double> st(42,'a',3.141);
        std::cout<<get_tuple_entry<0>(st)<<","
                <<get_tuple_entry<1>(st)<<","
                <<get_tuple_entry<2>(st)<<std::endl;
} 
```

但我想知道这个`get_tuple_entry`功能。
我认为每次调用的可变参数模板参数的数量会有所不同，但 sizeof 总是返回 3。
所以该函数在某种程度上等同于以下（伪代码）

```
template<unsigned index, <int,char,double> >
typename simple_tuple_entry<index, <int,char,double> >::type
        get_tuple_entry(simple_tuple<int,char,double> const& tuple)
{
        std::cout << "SizeofArgs == " << sizeof...(<int,char,double>) << std::endl;
        return simple_tuple_entry<index,<int,char,double> >::value(tuple);
} 
```

但这意味着它`get_tuple_entry`仅被返回值重载，这是不可能的。为什么每次通话的签名都不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T13:50:48.747

> 但这意味着 get_tuple_entry 仅被返回值重载，这是不可能的。

`get_tuple_entry`不是函数，它是函数模板。您所说的相同函数的三个重载仅在返回类型上有所不同，这并不相同。它们是函数模板的不同实例：

```
get_tuple_entry<0, int, char, double>
get_tuple_entry<1, int, char, double>
get_tuple_entry<2, int, char, double> 
```

哪些功能不一样。

> 我以为每次调用的可变参数模板参数的数量会有所不同，但 sizeof 总是返回 3

当然。每次调用该函数模板的实例化时，都会传递相同的 type 参数`simple_tuple<int,char,double>`，因此每次模板参数包都被推断为`int, char, double`大小为 3。调用之间的区别在于您调用了不同的实例化，而`get_tuple_entry<0>`不是相同`get_tuple_entry<1>`，并且每个不同的实例化返回元组的不同元素。

这真的没有什么不同

```
#include <iostream>

template<int N>
void func()
{
    std::cout << N << '\n';
}

int main()
{
    func<0>();
    func<1>();
    func<2>();
} 
```

这调用了三个不同的函数来打印不同的东西，但是相同的签名没有问题，因为`func<0>()`and`func<1>()`和`func<2>()`都是不同的函数。如果您查看损坏的名称，您会发现它们具有不同的签名，例如，我得到的 G++和`_Z4funcILi0EEvv`哪些不是相同的签名。`_Z4funcILi1EEvv``_Z4funcILi2EEvv`

# asp.net - 使用 ASP.NET 和 SQL Server 数据库的 Json 和 Ext JS 3.4

> ID：11953205
> 
> 赞同：1
> 
> 时间：2012-08-14T13:21:07.130
> 
> 标签：asp.net, json, web-services, sql-server-2008, extjs

我有一个名为 movie_genres 的表：

| 流派 ID | 流派名称 |

我将从数据库中填充这些类型的组合框（Ext js）

```
...
/* Remote data store */
    var movie_genres = new Ext.data.Store({
        reader: new Ext.data.JsonReader({
            fields: ['genre_id', 'genre_name'],
            root: 'rows'
        }),
        proxy: new Ext.data.HttpProxy({
            url: '../GenresWebService.asmx/GetGenres'
        })
    });

var movie_form = new Ext.FormPanel({
    url: 'movie-form-submit.aspx',
    renderTo: 'myform',
    frame: true,
    title: 'Movie Information Form',
    width: 400,
    defaults: {
        anchor: '100%'
    },
    items: [{
        xtype: 'combo',
        hiddenName: 'genre',
        fieldLabel: 'Genre',
        mode: 'remote',
        store: movie_genres,
        displayField: 'genre_name',
        valueField: 'genre_id'
    },
    ... 
```

我在 ASP.NET 中使用 WebService 从数据库中以 json 格式的字符串获取流派。

```
public class GenresWebService : System.Web.Services.WebService
    {
        [WebMethod]
        public string GetGenres()
        {
            SqlConnection con = new SqlConnection(connectionString);
            con.Open();

            String sql = "SELECT genre_id, genre_name FROM movie_genres";
            SqlDataAdapter da = new SqlDataAdapter(sql, con);
            DataSet genres = new DataSet();
            da.Fill(genres, "movie_genres");

            JavaScriptSerializer jss = new JavaScriptSerializer();
            string json = jss.Serialize(genres);
            con.Close();

            return "{rows:" + json + "}";
        }
    } 
```

什么也没有发生，我的组合框是空的，没有流派，没有错误，没有响应，什么都没有......任何想法，我的代码有什么问题？

谢谢

**编辑** 我`autoLoad: true`像@allie提到的那样添加到商店定义中，现在我在萤火虫上得到一个错误说：

```
Get http://localhost:12345/GenresWebService.asmx/GetGenres?_dc=1344964138589 500 Internal Server Error 17 ms. 
```

firebug 上的响应将错误解释如下：

System.InvalidOperationException：在序列化“System.Globalization.CultureInfo”类型的对象时检测到循环引用。在 System.Web.Script.Serialization.JavaScriptSerializer.SerializeValueInternal(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat)....

我试图调试 GenresWebService 并且我在这一行得到了上面的错误：

```
string json = jss.Serialize(genres); 
```

我不知道这实际上意味着什么:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:59:06.830

如果没有回应，也没有请求？

如果将**autoLoad:true**添加到商店定义中是否有帮助？

# android - 在 android 主屏幕小部件中添加 Seekbar

> ID：11953208
> 
> 赞同：3
> 
> 时间：2012-08-14T13:21:25.207
> 
> 标签：android, widget, seekbar, homescreen

如何将搜索栏添加到 mi 主屏幕小部件？当我这样做时，它说它不能充气，我[在这里](http://developer.android.com/guide/topics/appwidgets/index.html)读到你只能使用进度条而不是 seekBar，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:43:26.767

`SeekBar`应用小部件不支持，抱歉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:45:36.770

我很抱歉这么说——但你不能。android 让您在 AppWidget 中只使用最少的视图类型。我真的不明白他们为什么要这样做。您唯一能做的就是修改和自定义 appWidget 允许的视图之一（例如进度条），方法是创建自己的扩展原始视图的类，并更改/添加行为和外观，然后在 appWidget xml 布局文件中 -使用此自定义视图。这就是为什么您可以操纵 android appWidget 限制来显示您派生的自定义视图的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:24:43.600

您不能使用 SeekBar，但可以使用 ProgressBar。不知道你的情况，但对我来说已经足够了。

# php - 如何通过 PHP（Yii 或 CI 或纯 PHP）开发低资源需求的 RSS 阅读器

> ID：11953213
> 
> 赞同：0
> 
> 时间：2012-08-14T13:21:36.730
> 
> 标签：php, codeigniter, rss, yii, rss-reader

我想阅读新闻机构网站的 RSS 提要，并在我自己的网站上使用 ajax 向它们展示。

我想知道我应该如何开发它以使用最少的服务器资源。该网站包含近 150 个 rss 链接，因此它应该为每个链接每 20~30 秒更新一次 mysql 数据库。然后通过 APC 在缓存中保存更多可用的 rss 值。

当一个ajax请求来自用户时，如果它存在于APC变量中，则回显它，或者如果不存在，则从mysql数据库中读取并保存在APC中。

我想和 Yii 一起做。

有什么办法可以用低资源来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:50:12.953

最好的方法是在数据库中设置一个 RSS 表，然后使用调度程序每隔几分钟轮询一次（cron 通常是最容易设置的）。

这样，当您的用户机器上运行的 javascript 轮询 RSS 时，您就不会无意中对 RSS 提供程序进行 DDOS（我很难学到这一点）。

# excel - Excel - 如果可能，如何在不使用宏的情况下锁定单元格

> ID：11953214
> 
> 赞同：1
> 
> 时间：2012-08-14T13:21:44.890
> 
> 标签：excel

我已经使用宏实现了解决方案，但如果可以的话，我想删除它。所以这里的问题

我在单元格上使用验证规则实现了下拉菜单。我希望该单元格是只读的，具体取决于同一张表上第二个单元格中的值。

我尝试使用另一个验证来锁定它，但它不允许我。

任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T13:41:44.153

我假设数据验证在单元格`A2`中，您正在检查的值在单元格中`A1`

当您将 cell 的值更改`A1`为 "Blah Blah" 时，代码将运行然后锁定 cell `A2`。在实际运行之前，请花点时间阅读代码中的注释。

代码必须粘贴在工作表代码区域中。

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)

    If Target.Cells.Count > 1 Then Exit Sub

    Application.EnableEvents = False

    Dim mypassword As String, StringToCheck As String

    On Error GoTo Whoa

    '~~> Change the password here to protect/unprotect the sheet
    mypassword = "password"

    '~~> Change it to the relevant string with which you want to compare
    StringToCheck = "Blah Blah"

    If Not Intersect(Target, Range("A1")) Is Nothing Then
        '~~> Check for the cell value
        If Target.Value = StringToCheck Then
            '~~> Un-Protect the sheet
            ActiveSheet.Unprotect mypassword

            '~~> Lock the cell
            Range("A2").Locked = True

            '~~> Re-Protect the sheet
            ActiveSheet.Protect mypassword
        End If
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T14:06:54.930

您可以阻止用户仅使用`Data Validation`

**编辑：在列表中使用公式**

感谢[餐饮主管](https://stackoverflow.com/users/138938/head-of-catering)的评论，值得记住的是，您可以将公式与数据验证/列表一起使用。

请参阅他对另一个线程的回答以查看此操作：[https ://stackoverflow.com/a/11902463/138938](https://stackoverflow.com/a/11902463/138938)

**原帖**

Excel 2007 演练：

*   功能区 > 数据 > 数据验证
*   授权：个性化（或类似，我的 Excel 不是英文对不起）
*   在字段中输入此公式：
    *   `=IF(A1="",FALSE,TRUE)`

因此，如果 A1 仍为空，则无法在单元格中输入值

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T20:12:03.373

让它工作，但你只能在它工作到下拉列表时实际设置值

我使用名称管理器将名称设置`test`为值`=IF(Sheet1!$A$1=1,"",Sheet1!$E$1:$E$5)`

这意味着如果`A1`是 1，我什么也得不到，如果`A1`是其他，我得到 E1:E5

然后我将数据验证设置为`List`，源为`=test`
*您只能在**测试**返回列表时设置值*

当我这样做时，当 A1 为 1 时，我在验证下拉列表中得到一个空列表，并且我无法更改该值。如果 A1 不是 1，我会得到 E1:E5 的列表，我可以更改值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-29T07:58:10.977

这是一篇旧帖子，但我找到了一个解决方案，该解决方案会引发错误并防止窥视者在不使用 VBA 的情况下输入他们想要的任何内容（使用 Excel 2010）。

在用户界面 (SHEET1) 上，我有以下字段：

*   字段 1 是一个是/否验证下拉列表。
*   字段 2 是百分比验证下拉列表，其值为 1% - 100%。

**我需要什么：**

*   When "Yes" is selected, I can choose or type 1%-100% in field 2\. It is also "available".

*   When "No" is selected, field 2 becomes "grayed out" and user can no longer enter some random value.

**我是怎么做到的：**

1.  对于字段 2，我使用了条件格式（='SHEET2'!$I$2="No" 的公式）并将其设置为灰色字体和背景。

2.  在 SHEET2 中，我将一个字段（第 I 列）设置为等于 SHEET1 中的字段 1，因此它是“是”或“否”，具体取决于在 SHEET1 的字段 1 中选择的内容。然后我简单地在它下面添加了 99 行，将它们设置为等于它正上方的单元格。所以我有 100 行“是”或“否”。

3.  在 SHEET2 中，我有另一列 (R)，第一个单元格值为： =IF(I2="Yes", 0.01, 1)

4.  在它下面，我有： =IF(I3="Yes", R2+0.01, 1)

5.  然后，我将值下方的值预填写，直到我拥有1％的100％（选择“是”），并将验证设置在Sheet1字段2上以基于这些值。这允许我手动输入 % 值，或从下拉值中选择 1% 到 100%。

**结果：**

当我选择“否”时，它会使字段 2 变灰，并保留 % 之前的值，因为没有 VBA 就无法更改显示的值。例如，它可能仍显示 30%。但是，如果用户看到它变灰并尝试在其中输入一些值，例如 31%，它会抛出一个错误，因为我在该字段的数据验证中的“错误警报”选项卡上设置了一个错误。如果他们选择下拉菜单，他们只会看到 100 个 100% 的选项。这是唯一的缺点，但我想我可以将所有内容都删除，除了 1 个显示 100% 的单个字段。

当我选择“是”时，它会使字段 2 变为灰色，我可以再次从 1-100 之间的 doprdown 列表值中自由选择。

**我需要对这些值做些什么：**

对于我需要完成的任何事情，如果选择“否”，我会根据 100% 设置我正在使用的公式，如果选择“是”，则设置字段 2 的百分比。

# c# - 翻译过程中字符转换不准确

> ID：11953221
> 
> 赞同：6
> 
> 时间：2012-08-14T13:21:54.873
> 
> 标签：c#, asp.net, encryption, iis-7.5, informix

当我尝试对用户进行身份验证时，我经常遇到以下错误：

```
ERROR [HY000] [Informix .NET provider]Inexact character conversion during translation. 
```

* * *

```
 public static int IsValidPortalUser(string p_u, string p_p)
        {
            int ret = 0;
            using (IfxConnection conn = new IfxConnection(connectionString))
            {
                IfxCommand DBCmd = new IfxCommand();
                String p = My_Decryption_2(p_p);
                try
                {
                    if (conn.State == ConnectionState.Closed)
                        conn.Open();
                    DBCmd = new IfxCommand();
                    DBCmd.Connection = conn;
                    DBCmd.CommandText = "SELECT nvl(emp_num,0) FROM emp_mas_queue WHERE username = ? AND DECRYPT_CHAR(password, 'XXXXXX') = ? ";
                    DBCmd.Parameters.Add("user_name", p_u);
                    DBCmd.Parameters.Add("password", p);
                    using (IfxDataReader dataReader = DBCmd.ExecuteReader())
                    {
                        if (dataReader.Read())
                        {
                            if (dataReader[0] != null && !string.IsNullOrEmpty(dataReader[0].ToString()))
                            {
                                ret = int.Parse(dataReader[0].ToString());
                            }
                        }
                        dataReader.Close();

                    }
                }
                catch (ThreadAbortException e)
                {

                }
                catch (ApplicationException e)
                {

                }
                conn.Close();

                return ret;
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:00:00.570

我相信这可能是编码的问题。

我找到了这篇文章（通过谷歌翻译翻译）

[关联](http://translate.google.co.nz/translate?hl=en&sl=es&u=http://www.ibm.com/developerworks/ssa/local/im/evitar-problemas-de-acentos-y-caracteres-especiales-del-espanol-en-informix/index.html&prev=/search%3Fq%3DInexact%2Bcharacter%2Bconversion%2Bduring%2Btranslation%26num%3D100%26hl%3Den%26safe%3Dactive%26client%3Dfirefox-a%26hs%3DaZq%26rls%3Dorg.mozilla:en-GB:official%26prmd%3Dimvns&sa=X&ei=HYI-UPaRA6eviQfK34DoCQ&ved=0CCoQ7gEwAQ)

它通常是由人们从具有不同编码的来源复制+粘贴他们的详细信息引起的。在处理之前尝试将字符串转换为您正在使用的任何代码页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-20T11:20:44.157

由于这是 stackoverflow 中唯一提到此错误的地方，我将补充说，我通过在连接字符串级别指定 DB_LOCALE 和 CLIENT_LOCALE 解决了类似的问题，确保两者相同并且对应于数据库 DB_LOCALE。

修改环境变量不起作用。

我必须说它是在具有以下客户端版本的 Windows 10 系统上：clientsdk.4.10.TC6DE.WIN

# ios - 弹出 uivuewcontroller 时的通知

> ID：11953224
> 
> 赞同：0
> 
> 时间：2012-08-14T13:22:05.890
> 
> 标签：ios, cocoa-touch

In my app I push a viewcontroller on top of an other when a uitableviewcell gets selected. 当我从顶部弹出新的视图控制器时，我会回到我开始使用的那个。发生这种情况时，我想执行刷新操作，但我不知道如何捕获此事件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T13:25:55.033

尝试其中之一：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    BOOL pushed = [self isMovingToParentViewController];

    printf("viewWillAppear     %d\n", pushed);

}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];

    BOOL popped = [self isMovingFromParentViewController];

    printf("viewWillDisappear     %d\n", popped);

} 
```

来自 Apple 文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:26:14.563

使用 UIViewController viewWillAppear 委托方法

# android - android app backstack的行为是什么？

> ID：11953227
> 
> 赞同：0
> 
> 时间：2012-08-14T13:22:13.890
> 
> 标签：android, back-stack

假设我们有三个活动：A、B、C。进入顺序是A -> B -> C。通常从C回来的顺序是C -> B -> A。但是在Activity C时，我按Home键进入主屏幕。应用时间长了会被杀掉吗？如果它会被杀死，当我返回应用程序时，返回顺序仍然正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:31:08.900

您需要阅读此处找到的文档：

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

如果您的应用程序被终止，重新启动时它将在没有任何历史记录的情况下启动，并且不会有回栈，并且您的应用程序将转到 Activity A，前提是这是清单中设置的默认活动，如下所示：

```
 <activity
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:label="@string/app_name"
        android:name=".SplashScreen" >

        <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
  </activity> 
```

（上面在我的一个应用程序中启动了一个启动画面，如果它被终止，那么这就是启动的活动）

为了进一步帮助，我附上了生命周期图：

![Android 活动生命周期](../Images/9154e4f1559104614fa3796575c27efe.png)

如您所见，如果`onDestroy()`被调用，则应用程序的生命周期结束。当它再次开始时，我们将开始一个新的生命周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:31:08.583

在您启动应用程序后，它被杀死后它会打开主要活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:31:17.620

当应用程序被杀死时，它将从您在清单中声明的​​主要活动开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T13:35:18.813

**1.** `Activity`始终**处于**以下状态之一：

**一世。** `Resumed:`该**活动在 Foreground 中**。

**ii.** `Paused :` **另一个活动在 Foreground 中**，但`this activity`仍然**可见**

**iii.** `Stopped:`这个停止的活动是完全隐藏的。

**2.**你的情况是`Stopped`状态。系统**可以**通过调用方法杀死这个停止活动`finish()`，或者干脆杀死它的进程。

所以你**从一开始就开始**，你的 Back-Stack 中**只有一个活动**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T13:32:26.750

**不**，因为当您的应用程序被杀死时，您的应用程序的任务状态不会被保存，并且在您的情况下将返回到主要活动，这将是 A

# birt - 在 Birt 中从 SQL 查询中设置参数默认值

> ID：11953228
> 
> 赞同：1
> 
> 时间：2012-08-14T13:22:23.007
> 
> 标签：birt

有没有办法从 SQL 查询中设置参数默认值？我有一个报告，它接受带有 id、fromDate 和 toDate 的参数。而且我想从数据库中获取 fromDate 参数默认值（它应该是第一个参数中具有 id 的对象的创建日期）。那么任何提示如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:45:06.183

您可以创建一个从数据集中检索日期的动态报告参数。然后将您的新数据集参数链接到报告参数。

# html - 解析多个 HTML 分支 hpple

> ID：11953230
> 
> 赞同：0
> 
> 时间：2012-08-14T13:22:44.300
> 
> 标签：html, objective-c, ios, hpple

我要做的是解析网站上页面的多个部分。这是我正在做的事情：

```
NSURL *tutorialsUrl = [NSURL URLWithString:@"http://www.cetsp.com.br/"];
NSData *tutorialsHtmlData = [NSData dataWithContentsOfURL:tutorialsUrl];

TFHpple *tutorialsParser = [TFHpple hppleWithHTMLData:tutorialsHtmlData];

NSArray *holder;

NSString *tutorialsXpathQueryString = @"//div[@class='info oeste']/a/h4";
NSString *tutorialsXpathQueryString2 = @"//div[@class='info norte']/a/h4";
NSString *tutorialsXpathQueryString3 = @"//div[@class='info centro']/a/h4";
NSString *tutorialsXpathQueryString4 = @"//div[@class='info leste']/a/h4";
NSString *tutorialsXpathQueryString5 = @"//div[@class='info sul']/a/h4";

NSArray *oeste = [tutorialsParser searchWithXPathQuery:tutorialsXpathQueryString];
NSArray *norte = [tutorialsParser searchWithXPathQuery: tutorialsXpathQueryString2];
NSArray *centro = [tutorialsParser searchWithXPathQuery:tutorialsXpathQueryString3];
NSArray *leste = [tutorialsParser searchWithXPathQuery:tutorialsXpathQueryString4];
NSArray *sul = [tutorialsParser searchWithXPathQuery: tutorialsXpathQueryString5];

holder = [[NSArray alloc] initWithObjects:norte, oeste, centro,leste,sul, nil];

for (NSArray *array in holder) {

    for (TFHppleElement *element in array) {

        NSLog([[element firstChild] content]);
    }
} 
```

控制台记录了 5 个不同的正确结果，但正如您所见，我的代码非常乏味。那么如何获取多个标签的所有内容呢？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T14:12:35.250

Hpple 使用 XPathQuery 来解析 HTML。如果你想搜索任何类，你可以使用：

```
@"//div[@class=*]/a/h4" 
```

或者，如果您只想要那些特定的课程，您可以尝试：

```
@"//div[@class='info oeste']/a/h4 | //div[@class='info norte']/a/h4 | //div[@class='info centro']/a/h4" 
```

语法记录[在这里](http://www.w3schools.com/xsl/xpath_syntax.asp)

# html - HTML 电子邮件表格与背景图像对齐

> ID：11953231
> 
> 赞同：0
> 
> 时间：2012-08-14T13:22:44.707
> 
> 标签：html, email

我创建了一个 html 电子邮件，需要图像“clipboard3.png”显示在图像的背景中，然后所有表格内容都应该位于图像的顶部。现在，没有图像，表格内容对齐到中心，但是当我将图像添加到正文中时，表格及其内容都被推到了左边。

我该如何解决这个问题？我试图在所有表格上“对齐：居中”等，但似乎没有任何效果。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Email Template - Classic</title>
<style type="text/css">
a:hover { text-decoration: underline !important; }

</style>
</head>

<body marginheight="0" topmargin="0" marginwidth="0" style="background:url(clipboard3.png); background-repeat: no-repeat; height:100px; width: 684px;">
<!--100% body table-->
<table cellspacing="0" border="0" cellpadding="0" width="100%" bgcolor="#ffffff" style="margin: 0px auto";>
 <tr>
   <td align="center">
  <!--top links-->
  <table  width="600" border="0" cellspacing="0" cellpadding="0" bgcolor="#ffffff" align="center";>
  <tr>
      <td valign="middle" align="center" height="45">
      <p style="font-size: 14px; line-height: 24px; font-family: Georgia, 'Times New Roman', Times, serif; color: #b0a08b; margin: 0px;">
      Is this email not displaying correctly? <webversion style="color: #c88b04; text-decoration: none;" href="#">Try the web version.</webversion></p></td>
  </tr>
 </table>
 <!--header-->
 <table style="background-color: #fffdf9;" width="684" border="0" align="center" cellpadding="0" cellspacing="0" >
 <tr>
  <td>
  <table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
      <td valign="top" width="173">
      <!--ribbon-->
      <table border="0" cellspacing="0" cellpadding="0">
  <tr>
      <td height="120" width="45"></td>
        <td background="#c88b04" valign="top" bgcolor="" height="120" width="80"><img src="dateRibbon2.png" width="81" height="121">
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
      <td valign="bottom" align="center" height="35">
      <p style="font-size: 14px; font-family: Georgia, 'Times New Roman', Times, serif; color: #ffffff; margin-top: 0px; margin-bottom: 0px;">ISSUE</p>
      </td>
  </tr>
  <tr>
      <td valign="top" align="center">
      <p style="font-size: 36px; font-family: Georgia, 'Times New Roman', Times, serif; color: #ffffff; margin-top: 0px; margin-bottom: 0px; text-shadow: 1px 1px 1px #333;">31</p>
      </td>
  </tr>
  </table>
      </td>
  </tr>
  </table><!--ribbon-->
      </td>
      <td valign="middle" width="493"><table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
              <td height="60">

              </td>
          </tr>
          <tr>
              <td>
              <h1 style="color: #333; margin-top: 0px; margin-bottom: 0px; font-weight: normal; font-size: 48px; font-family: Georgia, 'Times New Roman', Times, serif">FirstPoint USA <em>Newsletter</em></h1>
              </td>
              <td><img src="FPFinger.png" width="102" height="186"></td>
          </tr>
          <tr>
              <td height="40">
              </td>
          </tr>
      </table>
      <!--date-->
      <table border="0" cellspacing="0" cellpadding="0">
     </table>

      </td>
    </tr>
    </table><!--/date-->
      </td>
      <td width="18"></td>
      </tr>
   </table>
   </td>
   </tr>
  </table><!--/header-->
  <!--email container-->
  <table bgcolor="#fffdf9" cellspacing="0" border="0" align="center" cellpadding="30" width="684">
  <tr>
  <td >
  <!--email content-->
  <table cellspacing="0" border="0" id="email-content" cellpadding="0" width="624">
  <tr>
  <td>
  <!--section 1-->
  <table cellspacing="0" border="0" cellpadding="0" width="100%">
  <tr>
  <td valign="top" align="center">

  <img src="images/img1.jpg" alt="image dsc" style="border: solid 1px #FFF; box-shadow: 2px 2px 6px #333; -webkit-box-shadow: 2px 2px 6px #333; -khtml-box-shadow: 2px 2px 6px #333; -moz-box-shadow: 2px 2px 6px #333;" width="622" />
  <!--line break-->
  <table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
      <td valign="bottom" height="50"><img src="lineBreak.png" width="600" height="1"></td>
  </tr>
  </table><!--/line break-->
  <h1 style="font-size: 36px; font-weight: normal; color: #333333; font-family: Georgia, 'Times New Roman', Times, serif; margin-top: 0px; margin-bottom: 20px;">Lorem ipsum <em>dolor sit amet</em></h1>
  <p style="font-size: 16px; line-height: 22px; font-family: Georgia, 'Times New Roman', Times, serif; color: #333; margin: 0px;">Consectetur adipiscing elit. <a style="color: #bc1f31; text-decoration: none;" href="#">Phasellus</a> a ipsum a risus volutpat placerat in nec mauris. Fusce sit amet enim erat, in sagittis arcu. <a style="color: #bc1f31; text-decoration: none;" href="#">Aliquam dolor dolor</a>, semper id tempor et, varius pulvinar tellus. Maurtis commodo urna at dui bibendum quis euismod velit egestas. Vestibulum ante ipsum primis in faucibus orci luctus et.</p>
  </td>
   </tr>
  </table><!--/section 1-->
  <!--line break-->
  <table cellspacing="0" border="0" cellpadding="0" width="100%">
  <tr>
  <td height="72"><img src="lineBreak.png" width="600" height="1"></td>
  </tr>
 </table><!--/line break-->
  <!--section 2-->
  <table cellspacing="0" border="0" cellpadding="0" width="100%">
   <tr>
  <td>
  <table cellspacing="0" border="0" cellpadding="8" width="100%" style="margin-top: 10px;">
    <tr>
  <td valign="top"><p style="font-size: 17px; line-height: 22px; font-family: Georgia, 'Times New Roman', Times, serif; color: #333; margin: 0px;"><img src="images/img2.jpg" height="108" alt="img2" style="border: solid 1px #FFF; box-shadow: 2px 2px 6px #333; -webkit-box-shadow: 2px 2px 6px #333; -khtml-box-shadow: 2px 2px 6px #333; -moz-box-shadow: 2px 2px 6px #333;" width="138" /></p>
  <p style="color: #333333; font-size: 18px; font-family: Georgia, 'Times New Roman', Times, serif; margin: 12px 0px; font-weight: bold;">Lorem ipsum dolor sit amet</p>
  <p style="font-size: 16px; line-height: 24px; font-family: Georgia, 'Times New Roman', Times, serif; color: #333; margin: 0px;">Consectetur adipiscing elit. Phasellus a ipsum a risus volutpat placerat in nec mauris. Fusce sit</p>
   </td>

  <td valign="top"><p style="font-size: 17px; line-height: 22px; font-family: Georgia, 'Times New Roman', Times, serif; color: #333; margin: 0px;"><img src="images/img3.jpg" height="108" alt="img3" style="border: solid 1px #FFF; box-shadow: 2px 2px 6px #333; -webkit-box-shadow: 2px 2px 6px #333; -khtml-box-shadow: 2px 2px 6px #333; -moz-box-shadow: 2px 2px 6px #333;" width="138" /></p>
   <p style="font-size: 18px; font-family: Georgia, 'Times New Roman', Times, serif; color: #333333; margin: 12px 0px; font-weight: bold;">Lorem ipsum dolor sit amet</p>
  <p style="font-size: 16px; line-height: 24px; font-family: Georgia, 'Times New Roman', Times, serif; color: #333; margin: 0px;">Consectetur adipiscing elit. Phasellus a ipsum a risus volutpat placerat in nec mauris. Fusce sit</p>
  </td>

  <td valign="top"><p style="font-size: 17px; line-height: 22px; font-family: Georgia, 'Times New Roman', Times, serif; color: #333; margin: 0px;"><img src="images/img4.jpg" height="108" alt="img4" style="border: solid 1px #FFF; box-shadow: 2px 2px 6px #333; -webkit-box-shadow: 2px 2px 6px #333; -khtml-box-shadow: 2px 2px 6px #333; -moz-box-shadow: 2px 2px 6px #333;" width="138" /></p>
   <p style="font-size: 18px; font-family: Georgia, 'Times New Roman', Times, serif; color: #333333; margin: 12px 0px; font-weight: bold;">Lorem ipsum dolor sit amet</p>
   <p style="font-size: 16px; line-height: 24px; font-family: Georgia, 'Times New Roman', Times, serif; color: #333; margin: 0px;">Consectetur adipiscing elit. Phasellus a ipsum a risus volutpat placerat in nec mauris. Fusce sit</p>
  </td>

  <td valign="top"><p style="font-size: 17px; line-height: 22px; font-family: Georgia, 'Times New Roman', Times, serif; color: #333; margin: 0px;"><img src="images/img5.jpg" height="108" alt="img5" style="border: solid 1px #FFF; box-shadow: 2px 2px 6px #333; -webkit-box-shadow: 2px 2px 6px #333; -khtml-box-shadow: 2px 2px 6px #333; -moz-box-shadow: 2px 2px 6px #333;" width="138" /></p>
   <p style="font-size: 18px; font-family: Georgia, 'Times New Roman', Times, serif; color: #333333; margin: 12px 0px; font-weight: bold;">Lorem ipsum dolor sit amet</p>
  <p style="font-size: 16px; line-height: 24px; font-family: Georgia, 'Times New Roman', Times, serif; color: #333; margin: 0px;">Consectetur adipiscing elit. Phasellus a ipsum a risus volutpat placerat in nec mauris. Fusce sit</p>
    </td>
    </tr>
   </table>
   </td>
   </tr>
   </table><!--/section 2-->
  <!--section 3-->
  <table cellspacing="0" border="0" cellpadding="0" width="100%">
  <tr>
  <td>
 <!--line break--><!--/line break--><!--line break--><!--/line break-->
 <table cellspacing="0" border="0" cellpadding="0" width="100%">
<tr>
</tr>
 </table>
  <!--line break--><!--/line break--><!--line break--><!--/line break-->
  </td>
 </tr>
 </table><!--/section 3-->
  </td>
  </tr>
 </table><!--/email content-->
  </td>
  </tr>
 </table><!--/email container-->
 <!--footer-->
  <table width="600" border="0" align="center" cellpadding="30" cellspacing="0">
  <tr>
  <td valign="top">
  <p style="font-size: 14px; line-height: 24px; font-family: Georgia, 'Times New Roman', Times, serif; color: #b0a08b; margin: 0px;">
  You’re receiving this newsletter because you’ve subscribed to our newsletter<br> 
  Not interested anymore? <unsubscribe style="color: #bc1f31; text-decoration: none;" href="#">Unsubscribe instantly.</unsubscribe></p>
  </td>
  <td valign="top"><p style="font-size: 14px; line-height: 24px; font-family: Georgia, 'Times New Roman', Times, serif; color: #b0a08b; margin: 0px;">145 North Street, Glasgow, G*****</p></td>
   </tr>
   <tr>
  <td height="30"></td>
  <td height="30"></td>
  </tr>
  </table><!--/footer-->
  </td>
  </tr>
  </table><!--/100% body table-->
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:38:08.400

与其尝试将单元格放在背景之上，不如将背景图像定义为一个单元格。您可能必须将其分成几个单元格以适应您的布局，但是在 Photoshop 中进行一些切片应该会使其变得非常容易。

# c# - AutoResetEvent 与布尔值来停止线程

> ID：11953234
> 
> 赞同：13
> 
> 时间：2012-08-14T13:22:53.080
> 
> 标签：c#, multithreading, autoresetevent

我在工作线程中有一个对象，我可以指示它停止运行。我可以使用 bool 或 AutoResetEvent 来实现它：

布尔值：

```
private volatile bool _isRunning;

public void Run() {
    while (_isRunning)
    {
        doWork();
        Thread.Sleep(1000);
    }
} 
```

自动复位事件：

```
private AutoResetEvent _stop;

public void Run() {
    do {
        doWork();
    } while (!_stop.WaitOne(1000));
} 
```

然后该`Stop()`方法将设置`_isRunning`为 false，或调用`_stop.Set()`.

除此之外，使用 AutoResetEvent 的解决方案可能会停止得更快一些，这些方法之间有什么区别吗？这个比那个好吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T13:45:21.437

C# *volatile*不提供所有保证。它*可能*仍会读取过时的数据。最好使用底层操作系统同步机制，因为它提供了更强大的保证。

所有这些都由 Eric Lippert 深入[讨论](https://blogs.msdn.com/b/ericlippert/archive/2011/06/16/atomicity-volatility-and-immutability-are-different-part-three.aspx?Redirected=true)（真的值得一读），这里是简短的引用：

> 在 C# 中，*“volatile”不仅意味着“确保编译器和抖动不会对此变量执行任何代码重新排序或注册缓存优化”*。这也意味着*“告诉处理器做他们需要做的任何事情，以确保我正在读取最新的值，即使这意味着停止其他处理器并使它们与它们的缓存同步主内存”*。
> 
> 实际上，最后一点是谎言。volatile 读写的真正语义比我在这里概述的要复杂得多。事实上**，它们实际上并不能保证每个处理器都会停止它正在做的事情**并更新缓存到主内存/从主内存更新。相反，**它们提供了较弱的保证，即可以观察到读取和写入之前和之后的内存访问如何相对于彼此进行排序。** 某些操作（例如创建新线程、进入锁或使用 Interlocked 系列方法之一）会为观察排序引入更强的保证。如果您想了解更多详细信息，请阅读 C# 4.0 规范的第 3.10 和 10.5.3 节。
> 
> 坦率地说，**我不鼓励你创建一个 volatile field**。易失性字段表明您正在做一些彻头彻尾的疯狂事情：您试图在两个不同的线程上读取和写入相同的值而没有设置锁定。锁保证观察到锁内的内存读取或修改是一致的，锁保证一次只有一个线程访问给定的内存块，等等。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-15T01:17:03.547

Volatile 还不够好，但实际上它总是可以工作，因为操作系统调度程序最终总是会锁定。并且将在具有强大内存模型的内核上运行良好，例如 x86，它消耗大量资源来保持内核之间的缓存同步。

所以真正重要的是线程响应停止请求的速度有多快。很容易测量，只需在控制线程中启动一个Stopwatch，并在工作线程中记录while循环后的时间。我通过重复采集 1000 个样本并取平均值，重复 10 次测量的结果：

```
volatile bool, x86:         550 nanoseconds
volatile bool, x64:         550 nanoseconds
ManualResetEvent, x86:     2270 nanoseconds
ManualResetEvent, x64:     2250 nanoseconds
AutoResetEvent, x86:       2500 nanoseconds
AutoResetEvent, x64:       2100 nanoseconds
ManualResetEventSlim, x86:  650 nanoseconds
ManualResetEventSlim, x64:  630 nanoseconds 
```

请注意，在 ARM 或 Itanium 等内存模型较弱的处理器上，volatile bool 的结果不太可能看起来那么好。我没有一个要测试。

显然，您似乎想要支持 ManualResetEventSlim，提供良好的性能和保证。

这些结果的一个注意事项是，它们是在工作线程运行热循环时测量的，不断测试停止条件而不做任何其他工作。这与实际代码并不完全匹配，线程通常不会经常检查停止条件。这使得这些技术之间的差异在很大程度上无关紧要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T13:25:38.160

恕我直言，`AutoResetEvent`更好，因为在这种情况下您不能忘记关键`volatile`关键字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T13:36:26.047

在使用`volatile`关键字之前，您应该阅读[这篇](http://www.albahari.com/threading/part4.aspx#_The_volatile_keyword)文章，我想，在研究多线程时，您可以阅读整个[http://www.albahari.com/threading/](http://www.albahari.com/threading/)文章。

它解释了`volatile`关键字的微妙之处以及为什么它的行为可能出乎意料。

* * *

您会注意到，在使用 时`volatile`，读取和写入可能会重新排序，这可能会导致在密切并发的情况下进行额外的迭代。在这种情况下，您可能需要额外等待大约一秒钟。

* * *

看了之后，我不认为你的代码有几个原因，

"boolean:" 片段总是休眠大约一秒钟，这可能不是您想要的。

“AutoResetEvent:”片段不会实例化`_stop`，并且总是`doWork()`至少运行一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T13:29:16.023

这取决于上面的代码片段是否就是你所做的一切。AutoReset 事件，顾名思义，在 WaitOne 传递后被重置。这意味着您可以立即再次使用它，而不是使用 bool，而必须将其设置回 true。

# asp.net-mvc-3 - 未提供强制性数据时的验证错误

> ID：11953236
> 
> 赞同：2
> 
> 时间：2012-08-14T13:22:52.913
> 
> 标签：asp.net-mvc-3

我有一个带有自定义 DateRange 验证属性的模型

```
public class Step1ViewModel
{
    [DataType(DataType.Date)]
    [DateRange(ErrorMessage="Date must be between blabla")]
    public DateTime? BirthDate1 { get; set; }
} 
```

当我使用 View 显示此模型时，**即使我在未提供 date 的情况下提交，**它也会从自定义 Validation Attribute 引发错误。我没有用 [Required] 标记此属性，并且该属性可以为空（DateTime？）。我不明白这种行为。

我希望能够在不引发错误的情况下提供日期。

这是自定义验证属性：

```
 public class DateRangeAttribute : ValidationAttribute
 {
        public DateTime FirstDateYears { get; set; }
        public DateTime SecondDateYears { get; set; }

        public DateRangeAttribute()
        {
            FirstDateYears = Convert.ToDateTime("1801-01-01");
            SecondDateYears = Convert.ToDateTime("2101-01-01");
        }

        public override bool IsValid(object value)
        {
            DateTime date = Convert.ToDateTime(value); // assuming it's in a parsable string format

            if (date > FirstDateYears && date < SecondDateYears)
                return true;

            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:27:26.260

试试这个：

```
public override bool IsValid(object value)
{
    if(value == null){
        return true;
    }
    DateTime date = Convert.ToDateTime(value); 

    if (date > FirstDateYears && date < SecondDateYears)
        return true;

    return false;
} 
```

我认为如果您想要自定义验证器，您需要具体说明如何处理空值。这应该告诉验证器没有任何值是有效的。

希望这可以帮助！

# mod-rewrite - .htaccess / mod-rewrite 代码以匹配结果

> ID：11953241
> 
> 赞同：0
> 
> 时间：2012-08-14T13:23:05.567
> 
> 标签：mod-rewrite

我有一个关于 mod-rewrite 的问题。我正在将网站从 wordpress 博客重新构建为自定义 CMS。

他们目前的博客文章是 XX.com/this-is-my-post。问题是他们也有以下页面：xx.com/contact-us

我已经建立了我的内容页面（IE：xx.com/why-us）并在 htaccess 中使用了以下内容：

```
RewriteRule ^([^/\.]+)/?$ content.php?c=$1 [L] 
```

我做了 301 重定向来预测博客文章并将它们创建为 xx.com/blog/this-is-my-post - 但他们不想要这个。

那么，我怎样才能创建类似以下的内容：

如果搜索

```
RewriteRule ^([^/\.]+)/?$ content.php?c=$1 [L] 
```

没有匹配 - 移动到文章/博客页面，看看那里是否有匹配：

```
RewriteRule ^([^/\.]+)/?$ article.php?c=$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:25:55.457

重写引擎无法知道是随意加载内容`content.php?c=$1`还是不会为`$1`. 您最好的选择可能是通过自定义脚本来路由所有内容，该脚本确定是否包含`content.php`或`article.php`取决于是什么`c`，并使用重写规则并通过该脚本路由所有内容。

# php - PHP - 另一种存储 $_POST 数据的方法？

> ID：11953248
> 
> 赞同：1
> 
> 时间：2012-08-14T13:23:33.330
> 
> 标签：php

我正在尝试存储从表单发送的 $_POST 数据。我目前有以下内容：

> ```
>  for($x = 0; $x <= $count; $x++){
>           $f.$x = $_POST['add'.$x];
>     } 
> ```

我试图让 f1 存储字段 add1 的 $_POST 数据。

是否有另一种方法来执行相同的功能？这似乎不起作用，它占用了我在托管服务上的所有 CPU 使用率。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T13:26:51.060

您正在尝试创建 N 个变量（使用不正确的语法）。相反，您应该使用数组：

```
$add_data = array();
for($x = 0; $x <= $count; $x++) {
    $add_data['add'.$x] = $_POST['add'.$x];
} 
```

现在所有元素都存在于`$add_data`数组中。

请注意，您最初尝试完成的“正确”语法是：

```
 ${'f' . $x} =  $_POST['add'.$x]; 
```

这称为[变量 variables](http://us.php.net/manual/en/language.variables.variable.php)，通常是不必要的。

但是，更好的方法是使用数组来指定表单元素的名称属性：

```
<input name="add[]" type="text" />
<input name="add[]" type="text" /> 
```

然后，您可以 pull `$_POST['add']`，它已经是一个包含所有`add`元素的数组。

# asp.net - asp.net WindowsImpersonationContext 函数

> ID：11953262
> 
> 赞同：3
> 
> 时间：2012-08-14T13:24:13.117
> 
> 标签：asp.net, authentication, iis, impersonation, windows-identity

谁能解释一下下面几行的功能：

```
WindowsIdentity wId = (WindowsIdentity)HttpContext.Current.User.Identity;
WindowsImpersonationContext wIdCon = wId.Impersonate(); 
```

这用于具有 IIS 基本身份验证的 POST 方法并且工作正常。但是，如果将 IIS 身份验证设置为 windows，则上述内容不再有效。

例如，要转储的代码太多了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:40:03.150

从那时起，对 的调用`Impersonate()`使 IIS 伪装成请求用户。出于多种原因，这很有用，主要是后续代码仅在请求用户未被拒绝访问时才有效。

这适用于基本，因为网站被赋予了用户名和密码，因此可以作为用户登录。Windows 身份验证失败，因为它使用了 kerberos，并且只给出了一张引用用户的票证 - 而不是用户密码。

要使 Windows 身份验证正常工作，您需要允许网站帐户（即您的应用程序的应用程序池标识）模拟用户。这是在 Active Directory 中其帐户的委派选项卡中完成的。

如果他们没有委托选项卡，您首先需要添加一个 SPN（服务主体名称）。SPN 允许客户知道哪个帐户正在运行网站，因此如何加密到 kerberos 票证以便网站可以打开它。只要客户端和服务器都信任第 3 方（标准 MS 实现中的 AD 服务器），这完全是一种允许客户端和服务器进行交谈的方式，而无需彼此告知他们的密码。

这都是被称为 kerberos 双跳的常见问题的一部分。这一切都源于从客户端到网站的 Kerberos 有效（网站对客户端用户凭据以提供页面等有足够的了解），但是从网站到需要 Web 用户凭据的资源的第二跳没有给出他们作为网站帐户是不允许的。有关详细信息，请参阅[msdn 上的理解-kerberos-double-hop](http://blogs.technet.com/b/askds/archive/2008/06/13/understanding-kerberos-double-hop.aspx)

**编辑：**

尝试运行`setspn /q http/machine_name_or_fqdn`例如

> `setspn /q http/mywebbox`
> `setspn /q http/mywebbox.my.domain.com`

这些 spn 的对象是哪些用户？IIS 需要让网站的 appPool 以与 SPN 相同的用户身份运行。

确认后，我建议使用[fiddler](http://fiddler2.com/fiddler2/)工具检查客户端和服务器之间传递的内容 - 确认收到 401 错误响应（即您需要进行身份验证）并立即重试具有有效的 kerberos 标头。

一旦您通过 kerberos 让客户端与服务器对话，您需要确保已在 AD 中将 appPool 帐户设置为允许代表用户进行委派。

# javascript - 在javascript中动态更新内容

> ID：11953264
> 
> 赞同：1
> 
> 时间：2012-08-14T13:24:17.937
> 
> 标签：javascript, html

我想知道这个是如何工作的。基本上，我将创建两个下拉列表。

```
<select id="dropdown1">
 <option value="v1">value1</option>
 <option value="v2">value2</option>
 <option value="v3">value3</option>
</select>
<select id="dropdown2">
 <option value="apple">apple</option>
 <option value="orange">orange</option>
</select>

<label id="value1">Value 1:</label>
<div id="showDropDown2"></div>

<label id="value2">Value 2:</label>
<div id="showDropDown2"></div>

<label id="value3">Value 3:</label>
<div id="showDropDown2"></div> 
```

例如，当用户从下拉列表 1 中选择“value2”并从下拉列表 2 中选择“橙色”时，它将更新 Value 2 部分的 div 内容。当用户选择“value3”时，从下拉列表 2 中选择“apple”。然后它将更新 Value 3 部分的 div 内容。等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:30:47.817

您可能会发现[Jquery](http://jquery.com/)是一个有用的库。查看 jquery 的显示和隐藏功能。例子

```
$('#value1').hide() 
```

隐藏需要隐藏的内容后，使用 .on 函数将事件挂钩到清单。这些函数可以在 Jquery 网站上找到。

# wordpress - search.php 文件没有指向它应该指向的位置

> ID：11953266
> 
> 赞同：0
> 
> 时间：2012-08-14T13:24:31.690
> 
> 标签：wordpress, wordpress-theming

嗨，我昨天开始创建我的第一个 wordpress 模板，今天我已经到了必须创建搜索页面结果的地步。从我在网上找到的应该是 search.php 文件。但由于某种原因，它似乎是 Wordpress当我尝试搜索时没有指向该页面。我还创建了 searchform.php。这是我的代码：

```
 <form id="searchform" method="get" action="<?php bloginfo('url'); ?>">
     <input type="text" value="type your search"/>

</form> 
```

我在做什么错？我必须在functions.php中激活搜索页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:33:23.293

调用`get_search_form();`您的模板以添加搜索功能。

在 search.php 中，您可以显示结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:45:21.167

我似乎在我忘记在输入中添加 name="s" 的搜索表单中发现了问题，所以而不是：

```
<input type="text" value="type your search"/> 
```

我应该有：

```
<input type="text" value="type your search" name="s"/> 
```

# python - `heroku pgbackups:capture` 在服务器上运行什么命令来执行备份？

> ID：11953272
> 
> 赞同：2
> 
> 时间：2012-08-14T13:24:55.667
> 
> 标签：python, postgresql, heroku

自从 Heroku 迁移到他们的新数据库层后，我发现自己没有`pgbackups`插件提供的自动备份计划，因为我只有一个基本计划。

如果我知道当我通过工具带在我端运行时在远程端实际执行了哪些命令，我​​会很乐意`pgbackups`使用插件运行每日备份。`cron``heroku pgbackups:capture --expire`

我的应用程序都是使用 Cedar 堆栈的 Python 应用程序，因此我不确定[其他问题](https://stackoverflow.com/questions/6019352/heroku-automatic-db-backup-via-cron-job)中提到的基于 gem 的自动备份选项是否可供我使用（其中一些还提到备份到 S3，而我想尽可能使用本机备份存储机制）。

我只想`heroku pgbackups:capture --expire`从 cron 运行，但 Heroku 命令在服务器端不可用。

任何提示将不胜感激。谢谢阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:14:56.020

`$ PGPASSWORD=mypassword pg_dump -Fc --no-acl --no-owner -h myhost -U myuser mydb > mydb.dump`

# asp.net - Windows Azure 基于角色的身份验证 (ACS)

> ID：11953277
> 
> 赞同：0
> 
> 时间：2012-08-14T13:25:01.070
> 
> 标签：asp.net, asp.net-mvc-3, azure, acs

我已经在 Windows Azure 云上运行了一个 Asp.net mvc4 项目。但到目前为止，它还没有任何用户管理的东西。任何人都可以登录（我有一个 Windows Live 单点登录）。但现在我需要做最简单的基于角色的身份验证。

1.我想注册用户角色（管理员、用户、内容管理员）/可以手动完成。2.我需要在用户登录时根据角色对用户进行身份验证。

任何人都可以给我一个提示，或链接到一个清晰的教程或建议我任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:38:50.610

最简单的实际上是在 ACS 颁发的令牌中添加“角色”声明。既然您说您现在可以手动执行此操作，那么您将使用 ACS 门户来创建这些规则。

在您的应用程序中，您将执行通常的操作，例如使用“Authorize”属性装饰操作，包括角色：

```
[Authorize(Roles="Administrator")]
public ActionResult Index()
{
  var b = User.IsInRole("Manager");
...
} 
```

只要您使用“角色”声明类型，一切正常。（这也可以自定义，但它是开箱即用的）。

您将面临的唯一挑战是 LiveID。LiveID 只为您提供一个唯一标识符。您需要一种将该标识符与已知用户（例如电子邮件或姓名）进行映射的方法。这通常需要两步过程。您首先进行身份验证并获取唯一 ID，然后向用户询问其信息并验证它（例如通过发送电子邮件）。

使用任何其他身份提供者，您都不会遇到这个问题，因为它们都会给您一个电子邮件和一个姓名。

编写上述规则很简单：

*   电子邮件：joy@mail.com -> 角色：管理员
*   电子邮件：someone@mail.com -> 角色：经理 ...

如果您有更多用户或更多规则，那么门户通常不再实用，您将需要其他东西（例如，使用应用程序中的 API、使用脚本、使用[auth10](http://www.auth10.com)等工具）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T21:46:51.157

我为我的项目解决它的方法是添加一个`ClaimsAuthenticationManager`并将用户的角色添加到那里的身份中。

```
namespace Claims
{
  public class RoleClaimsAuthenticationManager : ClaimsAuthenticationManager

    public override ClaimsPrincipal Authenticate(string resourceName, ClaimsPrincipal incomingPrincipal)
    {
        if (incomingPrincipal != null && incomingPrincipal.Identity.IsAuthenticated)
        {
            var identity = (ClaimsIdentity)incomingPrincipal.Identity;
            var roles = getRolesForIdentity(identity); //Get the roles for your identity here
            foreach (var r in roles)
            {
                 identity.AddClaim(new Claim(ClaimTypes.Role, r.Name));
            }
        }

        return base.Authenticate(resourceName, incomingPrincipal);
    }
} 
```

然后我将它连接到该`system.identityModel -> identityConfiguration`部分的配置中

```
<claimsAuthenticationManager type="Claims.RoleClaimsAuthenticationManager, Claims" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:44:27.073

您可能已经注意到 ACS 负责身份验证而不是授权，因此您需要自己处理。

最简单的做法是每次新用户连接时在您的应用程序中创建一个“配置文件”。在为特定用户创建配置文件时，您需要将身份提供者和该用户的名称与配置文件一起存储。存储此信息将允许您在该用户下次连接时获取该用户的配置文件（您将从声明中获取此信息，但这取决于您如何配置 ACS）。

对于一个完整的工作示例，您应该查看[BlobShare](http://blobshare.codeplex.com/)应用程序的源代码（它使用身份验证和授权）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T15:47:10.223

ACS 以外的一个选项是会员服务。

[会员介绍](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)

通过会员服务，您拥有身份验证和授权。成员身份具有角色，您甚至可以在 web.config 中使用角色。

ACS 不是一个糟糕的选择。我只是提出另一种选择。

# c# - 如何使用 XsdDataContractExporter 架构验证 DataContract？

> ID：11953283
> 
> 赞同：1
> 
> 时间：2012-08-14T13:25:16.340
> 
> 标签：c#, xml, wcf, xml-serialization, xsd

我有一个使用 DataContractSerializer 生成的配置文件，然后使用 XsdDataContractExporter 生成架构，但架构不会验证我的 xml。如何生成可用于从外部验证我的 XML 的有效 XSD？

我的 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
<ConfigProfile xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/ConfigurationUtilityFunctions">
  <ConfigSections xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
    <d2p1:anyType i:type="IISSection">
      <AnonymousUser xmlns:d4p1="http://schemas.datacontract.org/2004/07/ConfigurationUtilityFunctions.Section.User">
        <d4p1:UserDescription i:nil="true" />
        <d4p1:UserGroup i:nil="true" />
        <d4p1:UserName>Anon</d4p1:UserName>
        <d4p1:UserPassword>testpass</d4p1:UserPassword>
        <d4p1:UserType>Anonymous</d4p1:UserType>
      </AnonymousUser>
      <ApplicationPoolName>AppPool</ApplicationPoolName>
      <Port>8080</Port>
      <VirtualDirectoryAlias>/virtdir</VirtualDirectoryAlias>
      <WebsiteName>Default</WebsiteName>
      <WebsiteRoot>C:\SomePath</WebsiteRoot>
    </d2p1:anyType>
    <d2p1:anyType xmlns:d3p1="http://schemas.datacontract.org/2004/07/ConfigurationUtilityFunctions.Section.WebConfig" i:type="d3p1:WebConfigSection">
      <d3p1:CommonItems>
        <d3p1:WebConfigItem>
          <d3p1:Data>
            <add key="serverurl" value="http://myserverurl" xmlns="" />
          </d3p1:Data>
          <d3p1:Name>serverurl</d3p1:Name>
          <d3p1:XPath>//add[@key='serverurl']</d3p1:XPath>
        </d3p1:WebConfigItem>
        <d3p1:WebConfigItem>
          <d3p1:Data>
            <authentication mode="Forms" xmlns="">
              <forms loginUrl="login.aspx" name=".ASPXFORMSAUTH" protection="All" timeout="4800" path="/" />
            </authentication>
          </d3p1:Data>
          <d3p1:Name>Authentication</d3p1:Name>
          <d3p1:XPath>//system.web/authentication[@mode]</d3p1:XPath>
        </d3p1:WebConfigItem>
        <d3p1:WebConfigItem>
          <d3p1:Data>
            <pages theme="AvantGarde" clientIDMode="AutoID" xmlns="" />
          </d3p1:Data>
          <d3p1:Name>Pages</d3p1:Name>
          <d3p1:XPath>//system.web/pages</d3p1:XPath>
        </d3p1:WebConfigItem>
      </d3p1:CommonItems>
      <d3p1:FileLocation>C:\my\web.config</d3p1:FileLocation>
      <d3p1:OverRideItems i:nil="true" />
      <d3p1:UserDifference>
        <d3p1:WebConfigItem>
          <d3p1:Data>
            <add key="serverurl" value="http://myserverurl" xmlns="" />
          </d3p1:Data>
          <d3p1:Name>add</d3p1:Name>
          <d3p1:XPath i:nil="true" />
        </d3p1:WebConfigItem>
        <d3p1:WebConfigItem>
          <d3p1:Data>
            <identity impersonate="true" userName="Worker" password="password" xmlns="" />
          </d3p1:Data>
          <d3p1:Name>identity</d3p1:Name>
          <d3p1:XPath i:nil="true" />
        </d3p1:WebConfigItem>
      </d3p1:UserDifference>
      <d3p1:WebConfig>
        <configuration xmlns="">
          <appSettings>
            <!-- EXAMPLE Server URL to post to -->
            <add key="serverurl" value="http://myserverurl" />
            <!-- USDemoUserDetailManuScript The ManuScript ID to edit advanced user details -->
            <add key="UserDetailsManuScriptID" value="" />
            <!-- The ManuScript ID to edit advanced agency details -->
            <add key="AgencyDetailsManuScriptID" value="" />
            <!-- The return address for emails sent -->
            <add key="MailTo" value="support@mycompany.com" />
            <!-- SMTPServer name to use while sending emails -->
            <add key="SMTPServer" value="" />
            <add key="TimeOut" value="300000" />
            <add key="OnAddDuplicateEntity" value="Error" />
            <!-- The expected behavior when entered entity data is identical to an existing entity - options: Error, Continue -->
            <add key="StatesXML" value="States" />
          </appSettings>
          <connectionStrings />
          <system.web>
            <authentication mode="Forms">
              <forms loginUrl="login.aspx" name=".ASPXFORMSAUTH" protection="All" timeout="4800" path="/" />
            </authentication>
            <authorization>
              <deny users="?" />
            </authorization>
            <compilation debug="false" strict="false" explicit="true" targetFramework="4.0" />
            <pages theme="AvantGarde" clientIDMode="AutoID" />
            <sessionState mode="InProc" stateConnectionString="tcpip=127.0.0.1:42424" sqlConnectionString="data source=127.0.0.1;Trusted_Connection=yes" cookieless="false" timeout="200" />
            <xhtmlConformance mode="Legacy" />
            <globalization requestEncoding="utf-8" responseEncoding="utf-8" />
            <identity impersonate="true" userName="Worker" password="password" />
          </system.web>
          <system.webServer>
            <security>
              <requestFiltering>
                <hiddenSegments>
                  <add segment="App_XSLT" />
                </hiddenSegments>
              </requestFiltering>
            </security>
          </system.webServer>
          <location path="scripts">
            <system.web>
              <authorization>
                <allow users="*,?" />
              </authorization>
            </system.web>
          </location>
          <location path="App_Themes">
            <system.web>
              <authorization>
                <allow users="*,?" />
              </authorization>
            </system.web>
          </location>
        </configuration>
      </d3p1:WebConfig>
      <d3p1:WorkerProcessUser xmlns:d4p1="http://schemas.datacontract.org/2004/07/ConfigurationUtilityFunctions.Section.User">
        <d4p1:UserDescription i:nil="true" />
        <d4p1:UserGroup i:nil="true" />
        <d4p1:UserName>Worker</d4p1:UserName>
        <d4p1:UserPassword>password</d4p1:UserPassword>
        <d4p1:UserType>WorkerProcess</d4p1:UserType>
      </d3p1:WorkerProcessUser>
    </d2p1:anyType>
  </ConfigSections>
  <InstanceName i:nil="true" />
  <ProfileDesc>Current Settings</ProfileDesc>
  <ProfileId i:nil="true" />
  <ProfileName>validate</ProfileName>
  <ProfileType>CustomSettings</ProfileType>
</ConfigProfile> 
```

以及生成的我的架构：

```
 <?xml version="1.0" encoding="utf-16"?>
<xs:schema xmlns:tns="http://schemas.datacontract.org/2004/07/ConfigurationUtilityFunctions" elementFormDefault="qualified" targetNamespace="http://schemas.datacontract.org/2004/07/ConfigurationUtilityFunctions" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:import namespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays" />
  <xs:import namespace="http://schemas.datacontract.org/2004/07/ConfigurationUtilityFunctions.Section.User" />
  <xs:complexType name="ConfigProfile">
    <xs:sequence>
      <xs:element minOccurs="0" name="ConfigSections" nillable="true" xmlns:q1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" type="q1:ArrayOfanyType" />
      <xs:element minOccurs="0" name="InstanceName" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="ProfileDesc" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="ProfileId" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="ProfileName" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="ProfileType" type="tns:ConfigProfile.ProfileTypeEnum" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ConfigProfile" nillable="true" type="tns:ConfigProfile" />
  <xs:simpleType name="ConfigProfile.ProfileTypeEnum">
    <xs:restriction base="xs:string">
      <xs:enumeration value="CurrentSettings" />
      <xs:enumeration value="CustomSettings" />
      <xs:enumeration value="DefaultSettings" />
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="ConfigProfile.ProfileTypeEnum" nillable="true" type="tns:ConfigProfile.ProfileTypeEnum" />
  <xs:complexType name="IISSection">
    <xs:sequence>
      <xs:element minOccurs="0" name="AnonymousUser" nillable="true" xmlns:q2="http://schemas.datacontract.org/2004/07/ConfigurationUtilityFunctions.Section.User" type="q2:User" />
      <xs:element minOccurs="0" name="ApplicationPoolName" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="Port" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="VirtualDirectoryAlias" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="WebsiteName" nillable="true" type="xs:string" />
      <xs:element minOccurs="0" name="WebsiteRoot" nillable="true" type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="IISSection" nillable="true" type="tns:IISSection" />
</xs:schema> 
```

# android - Android AudioTrack 缓冲不足时如何获得通知？

> ID：11953288
> 
> 赞同：1
> 
> 时间：2012-08-14T13:25:31.973
> 
> 标签：android, audio, audiotrack

我试图弄清楚如果 AudioTrack 对象缓冲不足，我如何获得回调或其他东西，以便我可以暂停播放直到它重新填充。我猜这对我以外的其他人会有用！

我能想到的唯一方法是在每次写入缓冲区后调用 Systemclock.elapsedRealtime() 并将其与我写入 AudioTrack 的毫秒数进行比较，我认为这会给我缓冲区中剩余的数量. 但是测量的时间差（显示在日志中）随着时间的推移逐渐增加或减少，而不是保持不变。谁能明白为什么？

这就是我所拥有的。首先初始化：

```
msWritten = SystemClock.elapsedRealtime(); 
```

然后写一个缓冲区：

```
track.write(samples, 0, length);

// convert stereo samples to ms
msWritten += length/88.2;

if (SystemClock.elapsedRealtime() > msWritten) {
    Log.e("UNDERRUN", String.valueOf(SystemClock.elapsedRealtime()-msWritten));
} else {
    Log.e("GOOD", String.valueOf(SystemClock.elapsedRealtime()-msWritten));
} 
```

# google-chrome - 打包的应用程序：来自 http://developer.chrome.com 的示例错误

> ID：11953298
> 
> 赞同：1
> 
> 时间：2012-08-14T13:26:06.913
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试创建这里描述的我的第一个你好世界：

[http://developer.chrome.com/trunk/apps/first_app.html](http://developer.chrome.com/trunk/apps/first_app.html)

但我收到错误尝试安装此扩展程序时出现警告：权限“app.window”未知或 URL 模式格式错误。

另外，我必须在我的 chrome 快捷方式中添加 --enable-platform-apps ...

我做错什么了？

谢谢编辑：这是 manifest.json

```
{
  "name": "Hello World!",
  "description": "My first packaged app.",
  "manifest_version": 2,
  "version": "0.1",
  "app": {
    "background": {
      "scripts": ["background.js"]
    }
  },
  "permissions": ["experimental", "app.window"],
  "icons": { "16": "calculator-16.png", "128": "calculator-128.png" }
} 
```

铬是 21.0.1180.88

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:51:00.177

您正在使用当前的稳定版本——Chrome 21——它不包含`app.*`API。如果您想在将这些 API 并入稳定版本之前使用它们，您可以使用[Chrome Canary](https://tools.google.com/dlpage/chromesxs/)开发您的应用程序，它比稳定版本早了几个版本。

请注意，您引用的 URL 包含`/trunk`在其中，表明它是 Chrome 的最新（不稳定）版本的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:36:32.507

[当我根据此链接http://developer.chrome.com/extensions/apps.html](http://developer.chrome.com/extensions/apps.html)中显示的清单文件更改示例中的清单文件时，我可以在 chrome 稳定版本中安装此示例应用程序，即 21.0.1180.83。

我的最终清单文件内容是

```
{
  "name": "Hello World!",
  "description": "My first packaged app.",
  "version": "1",
  "app": {
    "launch": {
      "local_path": "window.html"
    }
  },
  "icons": {
    "16": "calculator-16.png",
    "128": "calculator-128.png"
  }
} 
```

# ios - 如何在 iOS 应用程序的 Spree 中使用 API 上传产品图像并设置产品属性

> ID：11953303
> 
> 赞同：3
> 
> 时间：2012-08-14T13:26:25.390
> 
> 标签：ios, spree

在我的 iOS 应用程序中，我使用 spree API 创建产品。产品已成功创建，现在我想上传该产品的图片。但我无法将图像传递给 spree 服务器。我使用 url "http://serverAddress:3000/api/images.json?token=" 但不知道如何以及要传递的参数是什么。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-08T12:58:52.920

你可以用 API 做到这一点：

1.  您必须将图像调整为通常的狂欢尺寸：大、迷你、原始、产品、小。
2.  您可以为您的变体发出 POST 请求，并获取有关所有图像的信息作为响应。新图像的主要信息`<id>`。请注意，您的服务器必须从您的客户端获取一个大字符串。
3.  您必须将此图像上传到文件夹`../public/spree/products/<id>`

# c# - 继承类输出的替代或好方法

> ID：11953306
> 
> 赞同：4
> 
> 时间：2012-08-14T13:26:35.120
> 
> 标签：c#

正如你们从代码中看到的那样，我创建了三类汽车，新模型，主要。所有基本方法都在汽车类中，我创建了继承类来尝试（继承）。正如你所看到的，我正在做的只是输出 car 类的 wheel() 方法和 newmodel 继承类的 newrims() 方法来做一个完整的句子。需要建议使代码更准确。

```
namespace ConsoleApplication4
{
   public class car
   {
    public static void wheel()
    {
        Console.WriteLine("The wheels are rolling");
    }
    public static void doors()
    {
        Console.WriteLine("The Doors are automatic");
    }
    public static void engine()
    {
        Console.WriteLine("The engine of car is runing");
    }
    public static void oil()
    {
        Console.WriteLine("the oil is full in tank");
    }
   }
   public class newmodel : car
   { 
    public static void newrims()
    {
        car.wheel();
        Console.WriteLine("And The new rims are rocking");
    }

  }

  class Program
  {
      static void Main()
      {
         while (true)
         {
            Console.WriteLine("Press A to Roll the Wheels baby");
            Console.WriteLine("Press B to Open/Close the Doors");
            Console.WriteLine("Press C to Start the Car Engine");
            Console.WriteLine("Press D to Check the Oil in tank");
            Console.WriteLine("Press E to Rims/wheels");
            Console.WriteLine("Press F to Exit the vehicle");
            char c = Convert.ToChar(Console.ReadLine());
            switch (c)
            {
                case 'a':
                    {
                        car.wheel();
                        break;
                    }
                case 'b':
                    {
                        car.doors();
                        break;
                    }
                case 'c':
                    {
                        car.engine();
                        break;
                    }
                case 'd':
                    {
                        car.oil();
                        break;
                    }
                case 'e':
                    {
                        newmodel.newrims();
                        break;
                    }
                case 'f':
                    {
                        Environment.Exit(0);
                        break;
                    }
                default:
                    {
                        Console.WriteLine("Please Enter the Correct Input");
                        break;
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:37:52.160

在你的情况下继承的一个例子是这样的

```
namespace ConsoleApplication4
{
    public class car
    {
        //note the absence of static keyword..it means it is an instance method
        //note the virtual keyword..it means derived classes can override the behavior
        public virtual void wheel()
        {
            Console.WriteLine("The wheels of car are rolling");
        }

    }

    public class newmodel : car
    {
        //note the override keyword....it means newmodel overrides the wheel function
        public override void wheel()
        {
            //depending on your needs you may or maynot 
            // need to call the base class function first
            base.wheel();
            Console.WriteLine("And The new rims are rocking");
        }

    }

    class Program
    {
        static void Main()
        {
            //Instead of static methods you create a car object on
            //on which you invoke member functions
            car currentcar = new car();
            while (true)
            {
                Console.WriteLine("Press A to Roll the Wheels baby");
                Console.WriteLine("Press N to switch to new model");
                char c = Convert.ToChar(Console.ReadLine());
                switch (c)
                {
                    case 'a':
                        {
                            currentcar.wheel();
                            break;
                        }
                    case 'n':
                        {
                            currentcar = new newmodel();
                            break;
                        }
                    default:
                        {
                            Console.WriteLine("Please Enter the Correct Input");
                            break;
                        }

                }
            }
        }
    }
} 
```

您会注意到，按下`a`会调用轮子功能，但取决于您的车是普通旧车还是新车型，它会在控制台上打印不同的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:37:11.627

删除所有静态...从类中创建 Car 和/或 NewModel 实例并使用这些实例。

我没有实际的参考资料，但是需要考虑一些事项：

*   如果您在大多数功能上使用静态，则可能是您犯了设计缺陷。
*   您已经创建了一个很好的基类和继承类
*   而不是使用静态函数，而是创建一个汽车对象（即 currentCar = new Car() 并创建一个 newModel 实例）
*   在这些实例上使用函数而不是类，然后您可以删除静态关键字。
*   当使用单个变量（即 currentVehicle，您可以从汽车创建：即 currentVehicle = new car()）时，您可以稍后将其更改为新模型并使用新模型的函数，例如 currentVehicle = new newmodel()
*   通常类是用大写的，所以 Car 和 NewModel，以及没有大写的类的变量/实例：即 car = Car(), newModel = NewModel()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:44:49.713

我不确定您到底要做什么，因为您使用 switch 语句来确定要调用哪些方法，并且您并没有真正按照预期的方式使用继承或多态性。但是，让我在下面向您展示一个示例，说明您可以如何以不同的方式构建它。

```
namespace ConsoleApplication4 
{ 
   public abstract class car 
   { 
    public virtual void wheel() 
    { 
        Console.WriteLine("The wheels are rolling"); 
    } 
    public virtual void doors() 
    { 
        Console.WriteLine("The Doors are automatic"); 
    } 
    public virtual void engine() 
    { 
        Console.WriteLine("The engine of car is runing"); 
    } 
    public virtual void oil() 
    { 
        Console.WriteLine("the oil is full in tank"); 
    } 
   } 

   public class standardmodel : car
   {
   }

   public class newmodel : car 
   {  
    public override void wheel() 
    { 
        base.wheel();
        Console.WriteLine("And The new rims are rocking"); 
    } 

  } 

  class Program 
  { 
      static void Main() 
      { 
         while (true) 
         { 
            Console.WriteLine("Press A to Roll the Wheels baby"); 
            Console.WriteLine("Press B to Open/Close the Doors"); 
            Console.WriteLine("Press C to Start the Car Engine"); 
            Console.WriteLine("Press D to Check the Oil in tank"); 
            Console.WriteLine("Press E to Rims/wheels"); 
            Console.WriteLine("Press F to Exit the vehicle"); 
            char c = Convert.ToChar(Console.ReadLine()); 

            Car standard = new standardcar(),
                newModel = new newmodel();

            switch (c) 
            { 
                case 'a': 
                    { 
                        standard.wheel(); 
                        break; 
                    } 
                case 'b': 
                    { 
                        standard.doors(); 
                        break; 
                    } 
                case 'c': 
                    { 
                        standard.engine(); 
                        break; 
                    } 
                case 'd': 
                    { 
                        standard.oil(); 
                        break; 
                    } 
                case 'e': 
                    { 
                        newModel.wheel(); 
                        break; 
                    } 
                case 'f': 
                    { 
                        Environment.Exit(0); 
                        break; 
                    } 
                default: 
                    { 
                        Console.WriteLine("Please Enter the Correct Input"); 
                        break; 
                    } 
                } 
            } 
        } 
    } 
} 
```

但是，总的来说，这并不是一个很好的例子，因为不清楚您要做什么。您可以在上面的代码中添加一些使其更像 OO 的东西是使用工厂来确定`car`要创建哪种类型，然后您就可以拥有一辆汽车。我希望这回答了你的问题。

# oracle - Oracle：将现有数据库置于版本控制中

> ID：11953316
> 
> 赞同：5
> 
> 时间：2012-08-14T13:27:13.030
> 
> 标签：oracle, svn, version-control, oracle-sqldeveloper

我有现有的 oracle 数据库。我想将它置于源代码控制（Subversion）之下。我知道的唯一解决方案 - 创建“DROP/CREATE/INSERT”文本脚本并将它们存储到 SVN。

可能有更好的方法来管理模式和数据吗？我正在使用 Oracle SQL Developer，我已经看到了迁移/存储库管理功能。我应该使用它们吗？以及如何使用它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-02T17:59:41.647

免责声明：我为红门工作

Source Control for Oracle 可以将您现有的模式链接到 Subversion（仅限 Windows）： [http ://www.red-gate.com/source-control-for-oracle/](http://www.red-gate.com/source-control-for-oracle/)

这允许您签入 CREATE 文件的基线，以及对这些文件的任何更改。它还允许您将更改从源代码控制应用到您的模式，将更改作为 ALTER 语句处理，从而在修改表时保留数据。这还允许您为每个开发人员创建私有/专用模式，创建沙盒环境（如果您在团队中工作）。

我们目前不支持将您的静态/参考数据添加到源代码管理，但我们计划这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T14:40:10.437

我不确定我是真的在这里回答你的问题还是只是随意吐出一些东西:)

首先，我首先要说的是，我非常反对将数据放入源代码控制中——您的数据库是您维护数据的地方。我使用 SCM 来跟踪对象更改，并使用数据库中的存档策略来跟踪数据更改。

我没有使用 SQL Developer 的版本控制，主要是因为我们的部署与我们的 Jenkins CI 服务器集成在一起，所以它可能完全符合您的需求。

组织代码需要一个基本结构，我认为这应该尽可能接近您的实际数据库。

```
<database>
    |_____<schema>
    |         |____<DDL>
    |         |____<DML>
    |         |____<PLSQL>
    |         |____<Indexes>
    |         |____<Constraints>
    |____<schema>
    ... 
```

以上模拟了 Oracle 中的命名空间边界。PLSQL 和 DDL 对象确实共享相同的命名空间，但由于 PLSQL 具有业务逻辑，我将它们分开。

我使用 OBJECTNAME.TYPEEXTENSION 的命名模式托管这些文件夹中的所有对象，并使用（或多或少）标准化的文件扩展名：

```
Table           .tbl
Package Spec    .pks
Package Body    .pkb
Trigger         .trg
View            .vw
... 
```

我找到的这些脚本的内容取决于您的部署工具和对象类型。

*   您可以在文件对象之间创建依赖关系还是知道要运行什么？
*   它可以处理可重运行性还是您需要将其构建到您的脚本中？
*   该工具可以回滚到以前的版本吗？

考虑到这一点，您可以找出您需要在这些文件中具有的结构。

我们的工具目前无法处理可重运行性，即我们没有 CREATE OR REPLACE 对象或用户定义对象之间存在紧密耦合的依赖关系。

对于这些，我们必须编写一个 PLSQL 块来检查系统表，以查看，例如，是否添加了索引，如果添加了，它会引发异常，该工具会捕获并知道丢弃并继续执行下一个脚本。

我只希望在持续集成期间应用数据库中的增量，因此我们不使用 DROP/CREATE/INSERT 脚本。这使我们能够独立跟踪每个更改，并使用我们的回滚逻辑恢复到特定的构建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:49:02.117

我希望当您需要将更改从 Subversion 存储库传递到 Oracle 数据库时，我的命令行工具会很有用。请试一试：[www.dbapply.com](http://www.dbapply.com)。

它适用于 Windows 和 Linux。一般来说，我这样使用它：

```
dbapply --paths <本地 svn 存储库> <本地 SVN 存储库> ... --database <数据库连接字符串>
```

例子：

```
dbapply --paths /space/svn/oracle/scripts --database scott/tiger@localhost/orcl
```

DbApply 分析所有脚本，对它们进行排序（以避免依赖错误）并执行。

它还在数据库模式中创建了几个表来跟踪应用脚本的修订。每次运行 DbApply 时，它都会比较修订并仅应用更改的脚本。

此外，您所有来自 SVN 存储库的脚本都可以导出到批处理或 shell 命令文件中。此命令文件仅适用于 SQL*Plus，并且可以在未安装 DbApply 的服务器上执行。

最后，您可以指定 SQL 命令可以忽略的错误列表：

```
/* ignore_error(955) */ CREATE TABLE a (n NUMBER); 
```

使用这种类型的注释，您可以为脚本添加“可重新运行性”。如果出现问题并且上面示例中的表已经存在，DbApply 将忽略“ORA-00955”错误并继续使用其他脚本。

该工具的先前版本在一家公司中运行了好几年。可能您也会发现它很有用。对于任何反馈，我们都表示感谢。

谢谢！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-30T09:56:01.097

查看[oracle-ddl2svn](https://code.google.com/p/oracle-ddl2svn/) - 用于在 SVN 中自动存储 oracle DDL 模式的工具集。

# java - 终于在 Java Junit 4 中

> ID：11953317
> 
> 赞同：4
> 
> 时间：2012-08-14T13:27:13.980
> 
> 标签：java, junit, junit4

在我的测试中，我正在使用与数据库的连接，我打开连接`@Before` 并在`@After`.

我的问题是如果在测试期间抛出异常会发生什么？

我将如何关闭连接？

我正在寻找与`finally`try and catch 块之后等效的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T08:23:33.513

`@After`会做你想做的。根据其[文档](http://junit.sourceforge.net/javadoc/org/junit/After.html)：

> 即使 Before 或 Test 方法抛出异常，所有 @After 方法也保证运行。

（这对我来说很直观，因为我认为测试方法被包装在一个`try`块中，该块将捕获任何异常并将其转换为测试失败。因此测试失败，然后拆解块运行。）

请注意，它没有指定如果**`Error`**抛出 an 则该方法将运行。通常虽然您只使用该`@After`方法来维护测试状态，但这不会出现问题，因为在这种情况下无论如何都不会运行更多测试。如果您确实在测试中使用了绝对必须清理的任何资源（例如本机挂钩），那么最好`try-finally`在测试方法本身的一个块中执行此操作。

# java - Servicemix 和捆绑包名称/符号名称

> ID：11953323
> 
> 赞同：0
> 
> 时间：2012-08-14T13:27:25.510
> 
> 标签：java, osgi, bundle, apache-servicemix

我遇到了一个错误，或者我忘记了一个东西，但 servicemix 不想放置正确的包名称/符号名称：

```
Command list : 
[ 221] [Active ] [] [] [   60] mvn:org.emp.idewe.ipsi/esb-precube/1.2.2-SNAPSHOT

Instead of : 
[ 221] [Active ] [] [] [   60] Idewe:Esb-PreCube (1.2.2-SNAPSHOT)

and command list -s : 
[ 221] [Active ] [] [] [   60] no symbolic name 
```

我的清单.mf：

```
Manifest-Version: 1.0
Export-Package: ...
Tool: Bnd-0.0.357
Bundle-Name: Idewe:Esb-PreCube
Created-By: Apache Maven Bundle Plugin
Bundle-Vendor: ...
Build-Jdk: 1.6.0_29
Bundle-Version: 1.2.2.SNAPSHOT
Bnd-LastModified: 1344950093005
Bundle-ManifestVersion: 2
Bundle-Description: ...
Import-Package: ...
Bundle-SymbolicName: org.emp.idewe.ipsi.esb-precube 
```

和我的 feature.xml ：

```
<feature name="Esb-PreCube.1.2.2-SNAPSHOT" version="1.2.2-SNAPSHOT">
  <feature>camel-spring</feature>
  <bundle>mvn:org.emp.idewe.ipsi/esb-precube/1.2.2-SNAPSHOT</bundle>
</feature> 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:15:35.710

看起来很像您的捆绑包配置不正确，因为捆绑包符号名称未解析。如果这得到纠正，Karaf/Servicemix 将立即使用正确的名称部署它。

# .net - 使用 = 时更新所有值的类的多个实例

> ID：11953326
> 
> 赞同：2
> 
> 时间：2012-08-14T13:27:27.567
> 
> 标签：.net, vb.net, class

我有如下自定义类；

```
Public MyClass
  Public Property MyText() As String
End Class 
```

然后在我的代码页中，我有以下 VB.NET 代码；

```
Dim obj1 As New MyClass
Dim obj2 As New MyClass

obj1 = obj2
obj1.MyText = "Test" 
```

我的问题是，当执行下面的代码时，obj2.MyText 也会更新。我怎样才能避免这种情况？

```
obj1.MyText = "Test" 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:30:53.143

这就是问题：

```
obj1 = obj2 
```

复制`obj2`to的值`obj1`。该值*不是*对象 - 它是对对象的*引用*。所以现在`obj1`并`obj2`引用同一个对象，因此您通过一个变量所做的任何更改都*将*被另一个变量看到。

我意识到这是 VB 而不是 C#，但您可能仍然会发现我[关于引用类型和值类型](http://pobox.com/~skeet/csharp/references.html)的文章很有用。从根本上说，您需要了解引用类型的行为方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:31:12.003

原因是 obj1 不是 obj2 的副本，而是一个引用。更改 obj1 时，obj2 也会自动更改，因为它指向相同的内存位置/实例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T13:34:11.780

这发生了，因为 .NET 是基于指针的。

所以你分配一个**指针**。不是**价值**。

您必须使用函数将数据从**obj2**复制 到**obj1**

例如：http: [//msdn.microsoft.com/en-us/library/system.string.copy.aspx#Y100](http://msdn.microsoft.com/en-us/library/system.string.copy.aspx#Y100)

# symfony - 在 symfony2 表单中使用 isValid() 不验证子类型

> ID：11953327
> 
> 赞同：4
> 
> 时间：2012-08-14T13:27:29.600
> 
> 标签：symfony, symfony-forms

我有一个关于表单子项验证的问题。我有一个类型，它包含另一种类型的几种类型。在这些子类型中，我需要一个字段，一个不需要的恶魔。但即使两者都是空的，表单也已验证这是我的课程

```
 class PassengerList {

/**
 * @Assert\Valid() //If it's an array of objet, should validate all the object of the list *traverse
 */
protected $passengers;
/**
 * @Assert\Valid
 */
protected $passengers_child;
/**
 * @Assert\Valid
 */
protected $passengers_baby;
} 
```

**乘客列表类型**

```
class PassengerListType extends AbstractType
 {
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('passengers','collection', array(
            'type' => new PassengerType(),
            'allow_add' => false,
            'required'=> true,
            'allow_delete' => false));
    $builder->add('passengers_child','collection', array(
            'type' => new PassengerChildType(),
            'allow_add' => true,
            'allow_delete' => false));
    $builder->add('passengers_baby','collection', array(
            'type' => new PassengerBabyType(),
            'allow_add' => true,
            'allow_delete' => false));

}
function getName()
{
    return 'passenger_list';
}

} 
```

**乘客类型**

```
class PassengerType extends AbstractType
{

public function buildForm(FormBuilder $builder, array $options)
{
    $date_params = array("widget"=>"single_text","input"=>"datetime",'format' => 'dd-MM-yyyy',);
    $builder
    ->add('civility', 'choice', array("choices"=>Passenger::getCivilityList()))
    ->add('birthdate','date',$date_params)
    ->add('last_name','text',array('required'=>true))
    ->add('first_name','text',array('required'=>false))
    ->add('type','hidden');
}
function getName()
{
    return 'passenger';
}
public function getDefaultOptions(array $options)
{
    return array(
            'data_class' => 'Travelyo\CoreBundle\Entity\Passenger',
    );
}
} 
```

这给了我这个表格：

![在此处输入图像描述](../Images/76dc55e46250bd2f5faed3745a91ae91.png)

但是当使用 $form->isValid() 验证表单时，尽管我将两个字段都留空，但返回的值是 true。

我觉得问题是在儿童类型中没有任何验证。

你有任何可以帮助我的利兹吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:59:09.957

你用的是2.1吗？

您需要指定[验证组](http://symfony.com/doc/current/book/validation.html#validation-groups)或启用[`cascade_validation`](https://github.com/symfony/symfony/commit/0c70a410e539486c1901e96201a9a863458034a6)，类似于[此问题](https://stackoverflow.com/questions/9233547/symfony2-how-can-i-disable-form-cascade-validation)。

# python - 在函数内绑定对象值（闭包）

> ID：11953330
> 
> 赞同：3
> 
> 时间：2012-08-14T13:27:51.040
> 
> 标签：python, closures, sml

在 SML（我在 Python 之前学习的一种函数式编程语言）中，我可以执行以下操作：

```
val x = 3;
fun f() = x;
f();
>>> 3
val x = 7;
f();
>>> 3 
```

然而，在 Python 中，第一次调用将给出 3，第二次调用将给出 7。

```
x = 3
def f(): return x
f()
>>> 3
x = 7
f()
>>> 7 
```

如何将变量的值绑定到 Python 中的函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T13:29:41.787

您可以使用关键字参数：

```
x = 3
def f( x=x ): 
    return x

x = 7
f()  # 3 
```

关键字参数是*在创建函数时分配的*。*当函数运行时，会*在函数的作用域中查找其他变量。（如果在函数的作用域中找不到它们，python 会在包含函数的作用域中查找变量等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T13:32:03.320

你可以这样做：

```
 x = 3
   f = lambda y=x: y
   f()
   >>> 3
   x = 7
   f()
   >>> 3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T14:04:31.370

与 mgilson 和 Neal 一样，最直接的方法是在定义时使用默认参数`f`。

一个更大的问题是这里的哲学不匹配。Python 确实有闭包，但它们的操作方式与您对 SML（我不是特别熟悉）或 Haskell 或 Clojure 或其他东西（我都更熟悉）的预期不同。这是因为 Python 处理闭包的方式，也因为它以不同的方式定义匿名函数并允许副作用。

通常，在函数式方法不能很好地工作的地方，在 Python 中你使用一个类，在这种情况下是为了捕获 x 的值。

```
class F(object):
    def __init__(self, x):
        self.x = x
    def __call__(self):
        return self.x
x = 3
f = F(x)
f()
# 3
x = 7
f()
# 3 
```

对于这个例子来说，这种方式太过分了，我显然不会在这里推荐它。但通常在 Python 中，答案是使用一个类。（*这是一个严重的过度陈述，我的大脑产生异常的速度比我输入它们的速度要快。但是当你来自功能背景时，我认为这个陈述是一个很好的启发式，因为你正在学习用 Python 处理问题.* )

顺便说一句，这也很有趣，这明确了在函数参数定义中捕获变量的隐含作用：它创建了一个函数对象，该对象挂在`x`对象创建点的值上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T21:40:07.217

这个问题似乎是关于如何在创建闭包时捕获（而不是引用）外部变量的值。从这个意义上说，通常的答案是使用默认参数：

```
def f(x=x): 
    return x
# or
f = lambda x=x: x 
```

（但是，如果您想要一个带有可变数量参数的函数，这将不起作用）。或者更一般地说（即使在可变参数情况下也可以）但不太漂亮，使用立即执行的显式包装函数：

```
f = (lambda x: lambda: x)(x) 
```

但是，我只是想指出**您的问题的前提是无效的**——在 SML 中，您永远不能*分配*给变量（我不是在谈论修改可变数据结构，例如`ref`；我在谈论分配到变量）；语言中甚至没有语法可以做到这一点。

您在 SML 代码中所做的是创建一个新范围并在新范围中定义一个具有相同名称的*不同*`x`变量，从而隐藏以前的`x`. 您始终可以简单地将第二个变量重命名为不同的名称，并且对程序没有影响。现在，Python 只有函数作用域，而函数内部的代码块没有内部作用域。但是您可以应用相同的解决方案——只需将第二个变量重命名为不同的名称，您就不会遇到这个问题。

# batch-file - 批处理脚本：Robocopy 排除文件不起作用

> ID：11953332
> 
> 赞同：0
> 
> 时间：2012-08-14T13:27:59.737
> 
> 标签：batch-file, robocopy

以下是我创建和使用排除文件列表的方式：

```
:: Pull out parameters
set srcDir=%1 
set destDir=%2

:: Create exclude file
Set excludeFile=%temp%\exclude_list.txt

:: Populate exclude file
Echo.%srcDir%\web.config > %excludeFile%
Echo.%srcDir%\bin\*.* >> %excludeFile%
Echo.%srcDir%\custom\*.* >> %excludeFile%
Echo.%srcDir%\dataentry\custom\*.* >> %excludeFile%
Echo.%srcDir%\images\custom\*.* >> %excludeFile%

:: do a robust copy from source to dest
robocopy %srcDir% %destDir% /e /xf %excludeFile% 
```

但是这些东西都没有被排除在最终副本中；难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:46:40.417

/XD 和 /XF 选项期望排除的路径列表，而不是包含要排除的路径的文件的名称。

```
:: Pull out parameters
set srcDir=%1
set destDir=%2

:: do a robust copy from source to dest
robocopy %srcDir% %destDir% /e /xd .\bin .\custom .\dataentry\custom .\images\custom /xf .\web.config 
```

如果您想在另一个文件中指定参数，我相信您需要使用 /JOB 或 /IF 选项，尽管我没有使用这些选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:29:43.403

您是否考虑过使用 xcopy？有了它，您可以制作一个排除列表，而且效果很好。

# sql-server - Perf Mon 指标分析

> ID：11953340
> 
> 赞同：0
> 
> 时间：2012-08-14T13:28:21.830
> 
> 标签：sql-server, performance

我正在阅读“SQL Server 2008 Query Performance Tuning Distilled”一书，发现它对 perf mon 指标的描述在某些情况下有点含糊。我将列出它涵盖的所有指标，以及我对每个指标的理解。我想在必要时进行澄清。正如我的评论所暗示的，主要是我正在寻求帮助的项目#2、6 和 7。

1.  **可用字节数**：可用物理内存。不言自明
2.  **页面/秒和页面错误/秒**：99% 清除。唯一的问题是为什么页面可能会在内存中从一个位置交换到另一个位置（软故障）。
3.  **Buffer Cache Hit Ratio**：新请求的内存立即可用的频率。似乎很清楚，虽然可能名字不好。我想知道它是否应该被称为“缓冲池免费命中率”。
4.  **Page Life Expectancy**：此缓冲池缓存指标由缓存命中频率和可用内存控制。似乎比较清楚。
5.  **Lazy writes/sec**：将脏缓冲区写入磁盘的速率。似乎比较清楚。
6.  **Memory Grants Pending**：“SQL Server 内存中等待内存授予的进程数”。奇怪的。不应该只有一个进程与 SQL Server 内存相关联吗？不清楚！
7.  **目标/总服务器内存**：据说“如果总服务器内存远小于目标服务器内存……那么可能是最大服务器内存配置参数设置得太低。” 有点不清楚。为什么有两个设置 -`target server memory`和`max server memory`- 控制 SQL Server 内存使用量的总和？是因为“total”是针对所有数据库实例的组合，而“max”是针对每个单独的数据库吗？

我的一个总体问题可能与第 7 项有关，当每个数据库实例配置为（几乎）所有可用物理内存的最大内存使用量时会发生什么？我认为 SQL Server 不会向它托管的每个实例授予那么多，并且会根据需要自行平衡？它比这更复杂吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:38:12.237

> 唯一的问题是为什么页面可能会在内存中从一个位置交换到另一个位置（软故障）。

软故障不会真正移动页面。进程工作集被连续修剪，页面处于“待机”*状态*。它们保留完全相同的物理位置，但它们在内核中的描述符被标记为“备用”。引用此页面的进程将引发“软故障”，这意味着页面描述符得到“固定”并且页面返回到进程工作集中。在整个修整和软故障的过程中，从来没有真正移动过物理 RAM 中的页面内容。

> Buffer Cache Hit Ratio：新请求内存立即可用的频率

不，这意味着有多少对*DB*页面的请求在内存中找到了该页面，并且不必发出 IO 来从磁盘获取它。

> Memory Grants Pending：“在 SQL Server 内存中等待内存授予的进程数”。

这是一个完全不同的话题。阅读此处：[了解 SQL 服务器内存授予](http://blogs.msdn.com/b/sqlqueryprocessing/archive/2010/02/16/understanding-sql-server-memory-grant.aspx)。

> 目标/总服务器内存

阅读[SQLOS 的内存管理器和 SQL Server 的缓冲池](http://blogs.msdn.com/b/slavao/archive/2005/02/11/371063.aspx)。有点旧，但仍然相当准确，特别是 SQL Server 2012 之前的版本。

> 当每个数据库实例配置为最大内存使用量（几乎）总计所有可用物理内存时会发生什么

这是 SQL Server 的预期操作模式。它旨在捕获主机上的**所有**内存，然后自行管理。这就是为什么没有指示与 SQL Server 一起托管*任何其他进程（例如，没有 IIS、没有 Exchange、没有 AD 域控制器、没有 SSIS、没有 RS、没有 AS 等）。*这也是为什么最好为每台主机托管一个实例的原因。

# css - 如何在调整寡妇大小时锁定导航位置？

> ID：11953341
> 
> 赞同：0
> 
> 时间：2012-08-14T13:28:26.383
> 
> 标签：css, browser, navigation

我的下拉菜单遇到了这个问题，我试图将导航设置为位置：绝对，但是当我这样做时，它搞砸了....有人知道如何解决这个问题吗？

这是我的页面：[http ://calibredesign.com/clients/harmony/](http://calibredesign.com/clients/harmony/)

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:41:23.657

将以下内容添加到`nav bar`将可以解决问题：

```
min-width: 900px; 
```

# java - 如何使用 ListActivity 在 android 中列出数据库中的帖子？

> ID：11953342
> 
> 赞同：0
> 
> 时间：2012-08-14T13:28:39.577
> 
> 标签：java, php, android, mysql

我正在尝试从数据库中检索数据并在 android 中列出它们，但我很困惑如何做到这一点，所以我使用了 listavtivity 和其他一些 php 代码，但它不能作为应用程序工作。崩溃我只想问这是正确的方法吗？

php代码：

```
<?php
    //turn off error reporting
    error_reporting(E_ALL ^ E_NOTICE ^ E_WARNING);

    //Create fields for the database
    //server, username, password, database
    $dbhost = "mysql8.000webhost.com";
    $dbuser = "a3399702_hassoba";
    $dbpass = "password";
    $dbdb = "a3399702_sa3dni";

    //connect to mySQL
    $connect = mysql_connect($dbhost, $dbuser, $dbpass) or die("connection error");
    //Select the database
    mysql_select_db($dbdb, $connect) or die("database selection error");
    //Query the table android login
    $query = mysql_query("SELECT * FROM signup_db");
    //Create a while loop that places the returned data into an array
    while ($list = mysql_fetch_assoc($query))
    //Store the returned data into a variable
        $output[] = $list;
    //encode the returned data in JSON format
    Print(json_encode($output));
    //close the connection
    mysql_close();
?> 
```

爪哇代码：

```
package com.listposts;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.content.Intent;
import android.net.ParseException;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class SeeRequests extends ListActivity {
    InputStream is = null;
    StringBuilder sb = null;
    String result = null;
    String classes[];

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        getData();
        setListAdapter(new ArrayAdapter<String>(SeeRequests.this,
                android.R.layout.simple_list_item_1, classes));
    }

    private void getData() {
        // TODO Auto-generated method stub
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(
                    "http://sa3dnishokran.netne.net/getrequests.php");
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        } catch (Exception e) {
            Log.e("log_tag", "Error:  " + e.toString());
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            sb = new StringBuilder();
            String line = "0";
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }

            is.close();
            result = sb.toString();
        } catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        try {
            JSONArray jArray = new JSONArray(result);

            JSONObject json_data = null;
            for (int i = 0; i < jArray.length(); i++) {
                json_data = jArray.getJSONObject(i);
                classes[i] = json_data.getString("firstname");
            }

        } catch (JSONException e1) {
            Toast.makeText(getBaseContext(), "Wrong ID or Password",
                    Toast.LENGTH_LONG).show();
        } catch (ParseException e1) {
            e1.printStackTrace();
        }
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        String cheese = classes[position];
        try {
            Class ourClass = Class.forName("com.sa3dnishokran." + cheese);
            Intent ourIntent = new Intent(AddProfileActivity.this, ourClass);
            startActivity(ourIntent);
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:43:24.763

这种方法对我来说似乎很好。另一种方法是实现 SOAP Web 服务而不是 JSON，但是，在这种情况下，您需要手动解析 SOAP 响应或使用其他工具/库来解析 SOAP 响应。这些工具目前对于 Android 来说还不够成熟。我个人更喜欢 JSON 方式，您的应用程序崩溃的原因似乎是特定于 Android 框架的其他一些问题，与您从数据库中获取数据的方法无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:34:37.987

要在 a 中显示数据，`ListView`您需要使用`ListAdapter`. 这是一个可能对您有所帮助的教程：[http ://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

# mysql - Mysql语法错误1064使用if语句

> ID：11953345
> 
> 赞同：0
> 
> 时间：2012-08-14T13:28:49.803
> 
> 标签：mysql, sql, mysql-error-1064

我正在尝试运行以下查询：

```
 (IF(book.book_type_id = "1", IF(inventory.cost < (follette_title.usedbuyingprice *1.37), follette_title.usedbuyingprice*1.37)), inventory.cost) AS Cost, 
```

这是试图查看书籍类型是否为 1，然后检查成本是否小于 follette used 购买价格 * 1.37，如果是则将价格设置为 follette used 购买价格 * 1.37，如果不是，则成本为成本。我不断收到此错误：

```
[Err] 1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')), inventory.cost) AS Cost,
        (concat(IFNULL(buyer_type.buyer_type, ""),IFNUL' at line 11 
```

我不知道为什么。手册没有给出明确的原因，在这之前我有很多行相似，没有错误。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:35:00.127

我认为你有一个错误的')'

你需要的是

```
(IF(book_type.book_type_id = "1", IF(inventory.cost < follette_title.usedbuying_price *1.37, follette_title.usedbuying_price*1.37, ""), inventory.cost)) AS Cost 
```

代替

```
(IF(book.book_type_id = "1", IF(inventory.cost < (follette_title.usedbuyingprice *1.37), follette_title.usedbuyingprice*1.37)), inventory.cost) AS Cost, 
```

# angularjs - AngularJS：渲染后的回调（渲染后使用 DOM）

> ID：11953348
> 
> 赞同：31
> 
> 时间：2012-08-14T13:29:05.697
> 
> 标签：angularjs

`$scope.myWork()`渲染模板后如何运行方法？我想设置，`$scope.value`然后我需要用 JQuery 改变一些东西（例如在模板内容的 DOM 中）。`$scope.$watch('value', function (){....})`正在“在”渲染之前工作（模板的 DOM 尚不可用）。谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-14T13:48:16.603

创建一个在链接函数中运行代码的[指令。](http://docs.angularjs.org/guide/directive)建立模板后调用链接函数。

请参阅[ng-click](http://docs.angularjs.org/api/ng.directive:ngClick)以获得一个想法。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-05T16:49:44.263

我在属性指令中使用`terminal`and`transclude`在更新模型并呈现视图后调用作用域方法（在我的情况下，在 $Resource.query 之后调整 iframe 的大小）：

```
.directive('postRender', [ '$timeout', function($timeout) {
var def = {
    restrict : 'A', 
    terminal : true,
    transclude : true,
    link : function(scope, element, attrs) {
        $timeout(scope.resize, 0);  //Calling a scoped method
    }
};
return def;
}]) 
```

$timeout 是黑魔法。*应该*可以将 JS 方法声明为属性值并 $parse 它。

所以我在 a 中使用它`ng-repeat`（在我的例子中，树是递归渲染的）：

```
<div post-render ng-repeat="r in regions | orderBy:'name'" ng-include="'tree_region_renderer.html'"> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-02-10T21:33:38.937

我也有这个问题，其他解决方案对我来说效果不佳，而且看起来 Protractor 必须解决的那种事情。[对Protractor 的客户端脚本的](https://github.com/angular/protractor/blob/63e330d24f75162a8a603bdde6d0a68a8af555ca/lib/clientsidescripts.js#L64)快速回顾表明它用于`angular.getTestability(element)`知道何时实际运行测试。该方法一直等待，直到没有挂起的超时或 http 请求，然后运行您的回调。这是我的指令：

```
export function afterRender ($timeout) {
"ngInject";
  return {
      restrict: 'A',
      terminal: true,
      link: function (scope, element, attrs) {
        angular.getTestability(element).whenStable(function() {
          console.log('[rendered]');
        });
      }
  };
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-18T09:53:24.257

Jens 上面的回答会起作用，但请注意，在较新的 AngularJS 版本（例如 1.2.3）上，您不能将 postRender 指令与 ng-repeat 结合为同一标签上的属性，因为它们都具有 transclude: true。在这种情况下，您必须删除 transclude 或使用带有 postRender 指令属性的单独标记。
使用终端时还要注意属性的优先级：true，因为您可能最终使属性无效，因为同一标签上的优先级更高。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-03-09T22:21:22.183

我在寻找一种分析 DOM 渲染的方法时发现了这个页面。我找到了一个非常简单的解决方案，它适用于我的用例。

将 ng-init 处理程序附加到 DOM 元素并在处理程序函数中，使用 $timeout 来产生执行。例子：

HTML：

```
<div ng-init="foo()"> 
```

JS：

```
$scope.foo = function() {
    $timeout(function() {
        // This code runs after the DOM renders
    });
}); 
```

# assembly - 为什么 IA32 不允许内存到内存 mov？

> ID：11953352
> 
> 赞同：17
> 
> 时间：2012-08-14T13:29:23.343
> 
> 标签：assembly, x86, cpu-architecture, instruction-set

在 Intel 体系结构 IA32 中，movl、movw 等指令不允许同时作为内存位置的操作数。例如，指令 movl (%eax), (%edx) 是不允许的。为什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-14T17:28:46.663

答案涉及对 RAM 的更全面了解。简单地说，RAM 只能处于两种状态，读模式或写模式。如果您希望将 ram 中的一个字节复制到另一个位置，则当您从读取切换到写入时，您*必须*在 RAM 之外有一个临时存储区域。

架构当然有可能拥有这样的 RAM 到 RAM 指令，但这将是一条高级指令，在微码中将转换为将数据从 RAM 复制到寄存器然后再复制回 RAM。或者，可以将 RAM 控制器扩展为具有这样一个临时寄存器*，仅*用于这种数据复制，但它不会为 CPU/硬件交互的增加复杂性提供太多好处。

**编辑：**值得注意的是，最近的进步，如混合内存立方体和高带宽内存是其中 RAM 拓扑变得更像 PCI-e 和直接 RAM 到 RAM 传输现在可能的架构，但这是由于支持逻辑对于技术，而不是 RAM 本身。在 CPU 架构中，这将是一次巨大的 RAM 块的形式，如 DMA，而不是单条指令的形式，加上 CPU 缓存的行为类似于传统 RAM，因此架构必须将其抽象为按照我原来的解释

**编辑2：**根据@PeterCordes 的评论，我最初的理解并不完全正确；x86 实际上确实有一些内存到内存指令。它们不适用于大多数指令（例如 movl 和 movw）的真正原因是保持指令编码复杂度较低，但它们本可以实现它们。但是，我最初的答案中的基本想法是，在 RAM 之外有一个以锁存器或寄存器形式存在的临时存储位置是正确的，但认为这就是这些指令不存在的原因的想法是不正确的。即使是 1970 年代的较旧芯片（例如 6502 和 8086）也具有内存到内存指令，您可以轻松地直接在 RAM 位置执行诸如 INC 之类的操作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-07-17T04:27:05.573

ia32 是 x86，x86 是从 intel 8086 (iAPX 86) 演变而来的。它是基于 8 位指令集的小型廉价芯片，没有带有两个显式内存操作数的“mov”。

维基百科的作者对 8086 的指令编码给出了这样的解释：

> 由于受 8 位处理器启发的紧凑编码，大多数指令是单地址或双地址操作，这意味着结果存储在操作数之一中。最多一个操作数可以在内存中，但是这个内存操作数也可以是目标，而另一个操作数，源，可以是寄存器或立即数。单个内存位置通常也可以用作源和目标，除其他因素外，这进一步促成了与当时大多数 8 位机器相当（并且通常优于）的代码密度。

有一些带有内存-内存指令的 CISC（单指令操作两个内存操作数）。讲座[https://www.cis.upenn.edu/~milom/cis501-Fall05/lectures/02_isa.pdf](https://www.cis.upenn.edu/~milom/cis501-Fall05/lectures/02_isa.pdf)说 VAX 可以编码记忆记忆指令：

> DEC VAX（PDP-11 的虚拟地址扩展）：1977
> 
> *   • 可变长度指令：1-321 字节！！！
> *   • 14 个 GPR + PC + 堆栈指针 + 条件代码
> *   • 数据大小：8、16、32、64、128 位、十进制、字符串
> *   •适用于所有数据大小**的内存-内存指令**
> *   • 特殊insns：crc、insque、polyf 和数百个演员表

这是 VAX 的 OpenBSD memcpy 源（指令集手册[http://h20565.www2.hpe.com/hpsc/doc/public/display?docId=emr_na-c04623178](http://h20565.www2.hpe.com/hpsc/doc/public/display?docId=emr_na-c04623178)）：

[https://es.osdn.jp/projects/openbsd-octeon/scm/git/openbsd-octeon/blobs/master/src/sys/lib/libkern/arch/vax/memcpy.S](https://es.osdn.jp/projects/openbsd-octeon/scm/git/openbsd-octeon/blobs/master/src/sys/lib/libkern/arch/vax/memcpy.S)

```
 movq    8(ap),r1        /* r1 = src, r2 = length */
         movl    4(ap),r3        /* r3 = dst */
... 
 1:      /* move forward */
         cmpl    r2,r0
         bgtru   3f              /* stupid movc3 limitation */
         movc3   r2,(r1),(r3)    /* move it all */ 
```

这里的“movc3”指令有两个内存操作数，地址存储在寄存器中。

x86 有几个“字符串”指令将执行内存操作（*s，尤其是 movs - [http://x86.renejeschke.de/html/file_module_x86_id_203.html](http://x86.renejeschke.de/html/file_module_x86_id_203.html)），但该指令将使用预定义的寄存器 SI 和 DI 作为地址（隐式操作数），并且两个内存操作数仍然无法在 x86 中编码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T13:40:52.563

据我所知，作为这种架构的一般规则，每条指令只允许一次内存访问。这是因为每条指令处理两次内存访问会使处理器的执行流水线复杂化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T13:41:12.017

RAM 支持输入和输出，但不支持复制。因此，内存到内存的移动实际上是内存到 CPU 到内存的移动。理论上可以实现这样的指令，但可能不是，因为它不是很实用。

以下是实施此类指令需要考虑的一些事项：

*   我们使用什么临时存储位置？寄存器？

*   如果我们使用寄存器，我们会劫持哪个寄存器？

不提供这样的指令将上述问题留给程序员。

# blackberry - 黑莓中的光学字符识别？

> ID：11953358
> 
> 赞同：1
> 
> 时间：2012-08-14T13:29:45.293
> 
> 标签：blackberry, ocr

我正在研究需要执行 OCR 任务的黑莓核心应用程序。

直到现在我已经搜索并发现很少有像ABBY这样允许读取图像并返回文本文件的在线API，但它们不是免费的，经过几次尝试后它们会收取一定的费用。

我可以通过服务器实现在设备端完全执行光学字符识别吗？请建议我完成这项任务。

**编辑：**我正在使用以下代码

```
public String serverUrl = "http://cloud.ocrsdk.com";
    static final String BOUNDARY = "----------V2ymHFg03ehbqgZCaKO6jy";

    public byte[] send() throws Exception
    {
        HttpConnection hc = null;

        InputStream is = null;

        ByteArrayOutputStream bos = new ByteArrayOutputStream();

        byte[] res = null;

        try
        {
            hc = (HttpConnection) Connector.open(serverUrl+"/processImage/"+"language=en&exportFormat=txt");

            hc.setRequestProperty("Content-Type", "multipart/image-JPG; boundary=" + BOUNDARY);
            /*hc = (HttpConnection) Connector.open(SERVICE_URL);
            hc.setRequestProperty("Content-Type", "multipart/form-data; boundary=" + BOUNDARY);
            hc.setRequestProperty(PARAM_IMAGE, "");
            hc.setRequestProperty(PARAM_LANGUAGE, lang);
            hc.setRequestProperty(PARAM_APIKEY, key);*/

            hc.setRequestMethod(HttpConnection.POST);

            OutputStream dout = hc.openOutputStream();

            dout.write(raw);

            dout.close();

            int ch;
            StringBuffer sb= new StringBuffer();
            is = hc.openInputStream();

            while ((ch = is.read()) != -1)
            {
                bos.write(ch);
                sb.append(ch);
            }
            System.out.println(sb);
            res = bos.toByteArray();
        }
        catch(Exception e){
            e.printStackTrace();
        }
        finally
        {
            try
            {
                if(bos != null)
                    bos.close();

                if(is != null)
                    is.close();

                if(hc != null)
                    hc.close();
            }
            catch(Exception e2)
            {
                e2.printStackTrace();
            }
        }
        return res;
    } 
```

但即使使用此代码也无法正常工作。发出 HTTP 请求后，我得到 200 作为响应代码。但没有像预期的那样得到完美的回应。作为回应，我收到 ABBYY 的错误页面。 [http://cloud.ocrsdk.com/GenericError.htm?aspxerrorpath=/processImage/language=English&exportFormat=txt;connectionhandler=httpc](http://cloud.ocrsdk.com/GenericError.htm?aspxerrorpath=/processImage/language=English&exportFormat=txt;connectionhandler=httpc)

请建议我:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:35:22.187

如果我对您的理解正确，您想为 BlackBerry 设备实现自己的 OCR 应用程序，并且您想将图像发送到服务器，识别它并将文本文件发送回设备。

有一个开源 OCR 实现，请查看此链接：[http ://en.openocr.org/](http://en.openocr.org/)

使用此信息来实现 OCR 服务器功能。黑莓客户端功能将是微不足道的。只需使用`HTTPConnection`类和流类向服务器上传/下载文件即可。

**编辑**：

注意到 openocr.org 没有直接的源代码下载。他们需要向 cuneiform@cognitive.ru 发送电子邮件请求，他们会考虑。我认为这不是一种方便的方式。

让我们检查另一个来源，例如[Tesseract OCR](http://code.google.com/p/tesseract-ocr/)。通过该链接，您可以下载源代码并构建 OCR 应用程序。然后为这个通过 HTTP 工作的应用程序实现 server-wrapper，并编写通过 HTTP 将图像文件上传到该服务器的黑莓客户端，并获取结果文本文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:06:50.187

我完成了 OCR 任务。

我从 GitHub 获得的 Java 代码不完整，或者在我这边可能无法正常工作。我已经在我的 PHP 服务器上执行了 OCR 功能。并且它的工作成功。

# android - 在 Android 中使用 WallpaperManager 设置壁纸

> ID：11953359
> 
> 赞同：4
> 
> 时间：2012-08-14T13:29:45.780
> 
> 标签：android, wallpaper

以下是我的代码，我想使用壁纸管理器设置为壁纸。我正在使用[Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader)，但我不知道如何实现墙纸管理器。我的 setWall() 不工作，有点混乱。

```
 import android.graphics.Bitmap;
    import android.os.Bundle;
    import android.os.Parcelable;
    import android.support.v4.view.PagerAdapter;
    import android.support.v4.view.ViewPager;
    import android.view.LayoutInflater;
    import android.view.Menu;
    import android.view.MenuItem;
    import android.view.View;
    import android.view.animation.Animation;
    import android.view.animation.AnimationUtils;
    import android.widget.ImageView;
    import android.widget.ProgressBar;
    import android.widget.Toast;

    import com.nostra13.universalimageloader.core.DisplayImageOptions;
    import com.nostra13.universalimageloader.core.assist.FailReason;
    import com.nostra13.universalimageloader.core.assist.ImageLoadingListener;
    import com.nostra13.universalimageloader.core.assist.ImageScaleType;

    public class ImageActivity extends BaseActivity {

        private DisplayImageOptions imageoptions;

        private ViewPager imagepager;

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.imagepager);

            Bundle bundle = getIntent().getExtras();
            String[] imageUrls = bundle.getStringArray(Extra.IMAGES);
            int pagerPosition = bundle.getInt(Extra.IMAGE_POSITION, 0);
            imageoptions = new DisplayImageOptions.Builder()
                .showImageForEmptyUri(R.drawable.noimage)
                .cacheOnDisc()
                .imageScaleType(ImageScaleType.EXACT)
                .build();

            imagepager= (ViewPager) findViewById(R.id.imagepager);
            imagepager.setAdapter(new ImagePagerAdapter(imageUrls));
            imagepager.setCurrentItem(pagerPosition);
        }

 public void setWall() {

    WallpaperManager myWallpaperManager
     = WallpaperManager.getInstance(getApplicationContext());
    try {
     myWallpaperManager.setResource(R.drawable.app_icon); //<--My app just set my app icon image as wallpaper, this is not I wanted. I wanted to set my selected image as wallpaper 
    } catch (IOException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
    }

}

@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main_menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.setWall:
                setWall();
                return true;
            default:
                return false;
        }
    }

@Override
    protected void onStop() {
        imageLoader.stop();
        super.onStop();
    }

    private class ImagePagerAdapter extends PagerAdapter {

        private String[] images;
        private LayoutInflater inflater;

        ImagePagerAdapter(String[] images) {
            this.images = images;
            inflater = getLayoutInflater();
        }

        @Override
        public void destroyItem(View container, int position, Object object) {
            ((ViewPager) container).removeView((View) object);
        }

        @Override
        public void finishUpdate(View container) {
        }

        @Override
        public int getCount() {
            return images.length;
        }

        @Override
        public Object instantiateItem(View view, int position) {
            final View imageLayout = inflater.inflate(R.layout.item_pager_image, null);
            final ImageView imageView = (ImageView) imageLayout.findViewById(R.id.image);
            final ProgressBar spinner = (ProgressBar) imageLayout.findViewById(R.id.loading);

            imageLoader.displayImage(images[position], imageView, imageoptions, new ImageLoadingListener() {
                public void onLoadingStarted() {
                    spinner.setVisibility(View.VISIBLE);
                }

                public void onLoadingFailed(FailReason failReason) {
                    String message = null;
                    switch (failReason) {
                        case IO_ERROR:
                            message = "Input/Output error";
                            break;
                        case OUT_OF_MEMORY:
                            message = "Out Of Memory error";
                            break;
                        case UNKNOWN:
                            message = "Unknown error";
                            break;
                    }
                    Toast.makeText(ImagePagerActivity.this, message, Toast.LENGTH_SHORT).show();

                    spinner.setVisibility(View.GONE);
                    imageView.setImageResource(android.R.drawable.ic_delete);
                }

                public void onLoadingComplete(Bitmap loadedImage) {
                    spinner.setVisibility(View.GONE);
                    Animation anim = AnimationUtils.loadAnimation(ImagePagerActivity.this, R.anim.fade_in);
                    imageView.setAnimation(anim);
                    anim.start();
                }

                public void onLoadingCancelled() {
                    // Do nothing
                }
            });

            ((ViewPager) view).addView(imageLayout, 0);
            return imageLayout;
        }

        @Override
        public boolean isViewFromObject(View view, Object object) {
            return view.equals(object);
        }

        @Override
        public void restoreState(Parcelable state, ClassLoader loader) {
        }

        @Override
        public Parcelable saveState() {
            return null;
        }

        @Override
        public void startUpdate(View container) {
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T13:34:01.363

而`myWallpaperManager.setResource(0);`不是你为什么不使用`myWallpapaerManager.setResource(R.drawable.yourimage)`

看看[Wallpapaer Manager 示例。](http://android-er.blogspot.in/2011/03/set-wallpaper-using-wallpapermanager.html)希望这对你有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-11T03:11:51.747

您应该将您的转换`Drawable`为a `Bitmap`，然后使用`setBitmap()`壁纸管理器的功能来设置您想要的壁纸

**将 Drawable 转换为位图**

```
private Bitmap getBitmapFromDrawable(Drawable d){
         Bitmap bitmap = 
                 ((BitmapDrawable) d).getBitmap();
         return bitmap;
} 
```

**设置为墙纸**

```
public void setWall() { 
    WallpaperManager myWallpaperManager = 
         WallpaperManager.getInstance(getApplicationContext()); 
 try { 
    myWallpaperManager.setBitmap(getBitmapFromDrawable(R.drawable.app_icon); 
 } catch (IOException e) { 
    // TODO Auto-generated catch block e.printStackTrace(); 
 } 
} 
```

希望这可以帮助

# sql - 将带函数的sql语句转换为Oracle存储过程

> ID：11953361
> 
> 赞同：0
> 
> 时间：2012-08-14T13:29:52.370
> 
> 标签：sql, oracle, function, stored-procedures

科尔斯，你好。谁能告诉我如何将下一个“非常规”选择转换为存储过程。

```
SELECT * FROM TABLE
                (parallel_dump –- this is a pipelined function which helps to create a huge file using UTL
                    (
                    CURSOR(
                    SELECT /*+ PARALLEL(s,4)*/
                    to_clob(B1)||to_clob(B2)||to_clob(B3)||to_clob(B4) AS cvs  
FROM 
(select 
(A1||…||A200) as B1,
(A201||…||A400) as B2, 
(A401||…||A600) as B3,
(A601||…||A839) as B4 from 
(
Select blabla from Dual

Union all 

select * from anytable

union all

select blablaba from DUAL  

union all

select blabla from DUAL  

)

) s),
                    'filename',
                    'DIRECTORY_NAME'
                    )
                ) nt; 
```

我不明白在哪里以及如何使用“into”。我尝试了一些变体，但无法编译 proc。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:24:30.690

```
create or replace procedure my_proc 
IS
begin
for rec in (
SELECT                     *
FROM TABLE (parallel_dump –- this IS a pipelined FUNCTION which helps TO CREATE a huge file USING UTL ( CURSOR
  (SELECT
    /*+ PARALLEL(s,4)*/
    to_clob(B1)
    ||to_clob(B2)
    ||to_clob(B3)
    ||to_clob(B4) AS cvs
  FROM
    (SELECT (A1
      ||…
      ||A200) AS B1,
      (A201
      ||…
      ||A400) AS B2,
      (A401
      ||…
      ||A600) AS B3,
      (A601
      ||…
      ||A839) AS B4
    FROM
      ( SELECT blabla FROM Dual
      UNION ALL
      SELECT * FROM anytable
      UNION ALL
      SELECT blablaba FROM DUAL
      UNION ALL
      SELECT blabla FROM DUAL
      )
    ) s
  ), 'filename', 'DIRECTORY_NAME' ) ) nt
  )
  LOOP
   -- do whatever you want with the data for example:
   dbms_output.put_line('value of col1 ' || rec.col1);
  END LOOP;
END;
/ 
```

# c - wchar_t 无符号或有符号

> ID：11953363
> 
> 赞同：8
> 
> 时间：2012-08-14T13:29:55.713
> 
> 标签：c, winapi, unicode, wchar-t

在此[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374131.aspx) `unsigned wchar_t`中`typedef`编辑为`WCHAR`. `winnt.h`但我在我的 SDK或 mingw中找不到这种 typedef `winnt.h`。

`wchar_t`是签名还是未签名？

我在 C 语言中使用 WINAPI。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T13:32:48.417

的签名`wchar_t`是未指定的。该标准只说（3.9.1/5）：

> 类型`wchar_t`应具有与其他整数类型之一相同的大小、符号和对齐要求 (3.11)，称为其*基础类型*。

（相比之下，类型`char16_t`和`char32_t`是明确无符号的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:35:09.907

请注意，类型的长度会因平台而异。

Windows 使用 UTF-16 并且 wchar_t 是 2 个字节。Linux 使用 4 字节的 wchar_t。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-04-09T12:17:46.313

我只是在几个平台上进行了测试，没有进行优化。

```
1) MinGW (32-bit) + gcc 3.4.4:
---- snip ----
#include<stdio.h>
#include<wchar.h>
const wchar_t BOM = 0xFEFF;
int main(void)
{
    int c = BOM;
    printf("0x%08X\n", c+0x1000);
    return 0;
}
---- snip ---- 
```

它打印`0x00010EFF`。`wchar_t`未签名。相应的汇编代码说`movzwl _BOM, %eax`。不是`movSwl`，但是`movZwl`。

```
2) FreeBSD 11.2 (64-bit) + clang 6.0.0:
---- snip ----
#include<stdio.h>
#include<wchar.h>
const wchar_t INVERTED_BOM = 0xFFFE0000;
int main(void)
{
     long long c = INVERTED_BOM;
     printf("0x%016llX\n", c+0x10000000LL);
     return 0;
}
---- snip ---- 
```

它打印`0x000000000EFF0000`。`wchar_t`已签署。相应的汇编代码说，`movq $-131072, -16(%rbp)`. 32 位`0xFFFE0000`升级为 64 位有符号`-131072`.

3) 与 2) 相同的代码，在 RedHat（版本未知）+ gcc 4.4.7 上：它再次打印`0x000000000EFF0000`. `wchar_t`已签署。

我既没有测试`printf`'s 的实现也没有测试 WinAPI 的`WCHAR`定义，而是编译器内置`wchar_t`类型的行为（没有关于它在任何头文件上的签名的规范）和 C-to-ASM 编译器引擎。

请注意，1) 和 3) 上的编译器由同一供应商提供，即 GNU 项目。答案肯定取决于平台。（有人会在 Visual C++ 上进行测试吗？）

# c# - 为什么加载后命令提示符消失？

> ID：11953364
> 
> 赞同：0
> 
> 时间：2012-08-14T13:29:59.013
> 
> 标签：c#, linq, command-prompt

使用下面的代码，命令提示符在出现后几乎立即消失。此代码不应该显示所有正在使用的可移动驱动器吗？

```
using System.Linq;
using System.IO;
using System;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var drives = DriveInfo.GetDrives()
             .Where(drive => drive.IsReady && drive.DriveType == DriveType.Removable);
            Console.WriteLine("Removable drives being used:", drives);
        } 
    }
} 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:31:13.710

最后尝试a `Console.ReadLine()`。一旦正在运行的应用程序终止，Windows 就会关闭命令窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T13:32:22.593

因为它执行你的命令并且存在。你可以给它一个指令，让它在关闭之前等待任何按键。

例如：

```
Console.ReadKey(); 
```

更新：

```
using System.Linq;
using System.IO;
using System;

class Program
{
    static void Main(string[] args)
    {
        DriveInfo[] drives = DriveInfo.GetDrives()
         .Where(drive => drive.IsReady && drive.DriveType == DriveType.Removable);
         foreach(DriveInfo di in drives)
         {
             Console.WriteLine("Removable drives being used:", di.Name);
         {

    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:41:51.547

试试这个...

```
 DriveInfo[] allDrives = DriveInfo.GetDrives();
 foreach(DriveInfo dv in drives)          
 {              
        Console.WriteLine("drive Name:{0}", dv.Name);      
 }    
Console.ReadLine(); 
```

# vb.net - 计算每个工作日的日期

> ID：11953369
> 
> 赞同：0
> 
> 时间：2012-08-14T13:30:33.747
> 
> 标签：vb.net, visual-studio-2010, date, datetime

好的，所以我有以下代码来获取文件夹名称中的最后 4 个字符，它始终是日期，格式为 MMDD。该日期也将始终是星期一。

下面修剪的文件夹名称示例：C:\Temp\Textfiles\20120813

```
Dim MMDD_Date As String = Microsoft.VisualBasic.Right(TextBox1_Path.Text, 4) 
```

我不确定的是如何计算那一周的剩余天数，以星期五结束。很明显，您不能将字符串转换为 int 并添加 1，因为某些月份有 29、30 或 31，具体取决于闰年。

最终结果将是这样的：

> 周一：0813
> 
> 周二：0814
> 
> 周三：0815
> 
> 周四：0816
> 
> 周五：0817

有什么建议可以为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:43:31.117

使用年、月和日创建 DateTime。使用该创建日期轻松获取后续日期。

```
 ' Parse Y, M and D (Integers) from folder name
   ' ...

    Dim X As DateTime
    X = New DateTime(Y, M, D) 

    Dim Tue As String = X.AddDays(1).ToString("MMDD")
    Dim Wen As String = X.AddDays(2).ToString("MMDD")
    Dim Thr As String = X.AddDays(3).ToString("MMDD")
    Dim Fri As String = X.AddDays(4).ToString("MMDD") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:28:49.650

看起来你想要这样的东西。我不完全确定。这是在 C# 中，我假设您可以将其转换为 VB.NET。

```
var folderName = @"C:\Temp\Textfiles\20120813"; //Test input
var dateString = folderName.Substring(folderName.Length - 8);
var date = DateTime.ParseExact(dateString, "yyyyMMdd", CultureInfo.InvariantCulture);

var counter = date.DayOfWeek; //OP says this is always a Monday, but is not hardcoded
var mmdd = int.Parse(folderName.Substring(folderName.Length - 4));
var myDates = new List<string>();

do
{
  myDates.Add(string.Format("{0}: {1:0000}", counter.ToString().Substring(0, 3), mmdd++)); //E.g. "Mon: 0813"
} while (counter++ < DayOfWeek.Friday); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:38:59.333

好吧，这就是我想出的。听取了@channs 和@Dusan 的建议，并结合了这些努力。

```
 Dim FolderDate As String = TextBox1_Path.Text
    Dim DateString = FolderDate.Substring(FolderDate.Length - 8)
    Dim d = DateTime.ParseExact(DateString, "yyyyMMdd", CultureInfo.InvariantCulture)

    Dim Mon As String = d.ToString("MMdd")
    Dim Tue As String = d.AddDays(1).ToString("MMdd")
    Dim Wed As String = d.AddDays(2).ToString("MMdd")
    Dim Thu As String = d.AddDays(3).ToString("MMdd")
    Dim Fri As String = d.AddDays(4).ToString("MMdd")

    'test output
    MsgBox(Mon)
    MsgBox(Tue)
    MsgBox(Wed)
    MsgBox(Thu)
    MsgBox(Fri) 
```

# liquid - Shopify Liquid 元字段：访问描述

> ID：11953371
> 
> 赞同：2
> 
> 时间：2012-08-14T13:30:45.953
> 
> 标签：liquid, shopify

我可以像这样访问我的元字段信息：

```
{% assign mf =  product.metafields.Specs %}

{% unless mf == empty %}
   {% for mf in product.metafields.Specs %}
       {{ mf.first }}: {{ mf.last }} <br />
   {% endfor %}
{% endunless %} 
```

但这并没有让我得到任何东西，除了关键：价值。我如何获得其他信息？我努力了：

```
{% assign mf =  product.metafields.Specs %}

{% unless mf == empty %}
   {% for mf in product.metafields.Specs %}
       {{ mf.key }}: {{ mf.value }} : {{ mf.description }} <br />
   {% endfor %}
{% endunless %} 
```

但这只是给了我一个“：”列表，没有任何文字。我在那里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:57:04.223

如何使用这个：

```
 {% assign mf = product.metafields.Specs %}
  {% unless mf == empty %}
    {% for f in product.metafields.Specs %}
      {{ f.first }}: {{ f.last }} : {{ mf[f.first].description }} <br />
    {% endfor %}
  {% endunless %} 
```

# java - 类路径问题：使用 Maven Antrun 插件运行 ant java 任务

> ID：11953377
> 
> 赞同：3
> 
> 时间：2012-08-14T13:30:56.290
> 
> 标签：java, maven, ant, classpath

从 maven ant run 插件运行 ant 任务时，我可以将 maven 类路径设置为 ant 属性。但是，当我尝试运行`<ant:java`设置此确切类路径的任务时，我收到无法找到引用的错误。好像整个类路径被解释为一个 jar。有没有办法以某种方式将此类路径设置为 ant java 任务？

（来自行家）

```
<plugin>
   <artifactId>maven-antrun-plugin</artifactId> 
     ....
   <property name="compile_classpath" refid="maven.compile.classpath"/>
   .... 
```

（来自蚂蚁）...

```
<path id="classpath">
   <path refid="${compile_classpath}"/>
</path>
...
<java   classname="..." classpathref="classpath">
...
</java> 
```

maven ant run插件的版本是1.7

如果无法做到这一点，ant 中是否有某种方法可以迭代此类路径字符串（带有 ';' 分隔符的 jar 文件的位置）并将 jar 位置的值设置为 '

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-15T13:47:59.340

我想我在沮丧了一段时间后找到了解决方案：受此[线程的启发](http://maven.40175.n5.nabble.com/antrun-classpaths-td66717.html)

`ant`antrun 插件正确地构造了类路径引用，但在调用任务时没有将它们传递给外部构建文件。

因此，解决方案是显式传入您想要使用该`<reference>`元素访问的任何类路径引用。

```
 <!-- antrun plugin execution -->
        <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>1.7</version>
            <executions>
                <execution>
                    <id>build</id>
                    <phase>compile</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                    <configuration>
                        <target>
                            <ant antfile="${basedir}/build.xml">
                                <!-- This is the important bit -->
                                <reference torefid="maven.compile.classpath" refid="maven.compile.classpath"/>
                            </ant>
                        </target>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

并在您的 ant build 任务中正常使用它们

```
<!-- External ant build referencing classpath -->
 <java classname="net.nhs.cfh.ebook.Main" fork="true" failonerror="true">
     <arg value="-b"/>
     <arg value="${dist.dir}"/>
     <arg value="-o"/>
     <arg value="${xml.dir}/treeindex"/>
     <arg value="tree.xml"/>
     <jvmarg value="-Dstrategy=treeParser"/>
     <!-- reference to the passed-in classpath reference -->
     <classpath refid="maven.compile.classpath"/>
 </java> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-25T01:20:52.610

在 Maven 中：

```
<plugin>
   <artifactId>maven-antrun-plugin</artifactId> 
     ....
   <property name="compile_classpath" refid="maven.compile.classpath"/>
.... 
```

在 Ant 中使用 pathelement 而不是 path refid

```
<path id="classpath">
    <pathelement path="${compile_classpath}"/>
</path> 
```

然后它工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T18:31:40.273

Sorry to rebump an old thread, but after running into this myself today, I noticed that the Maven documentation has a bug in it. As you've discovered

```
<property name="compile_classpath" refid="maven.compile.classpath"/> 
```

doesn't work. However,

```
<property name="compile_classpath" value="${maven.compile.classpath}"/> 
```

should work. Of course, you can also use `${maven.compile.classpath}` directly.

The Maven bugtracker claims that this documentation bug was [fixed 4 years ago](http://jira.codehaus.org/browse/MANTRUN-110), but as of today's date, it [still exists](http://maven.apache.org/plugins/maven-antrun-plugin/examples/classpaths.html) in the last documentation pushed (in late 2011).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T20:35:01.897

您在这里遇到的问题是 compile_classpath 是一个 Ant 属性。表达式 ${compile_classpath} 解析为属性的值。

而 path 元素上的 refid 属性需要对路径的引用。基本上，您会遇到运行时类型错误，其中需要路径 ref，但您提供的是字符串。

您真正想要做的是将 maven.compile.classpath 直接传递到您的 Ant 路径元素中。因为两者都在处理路径对象。但这不起作用。

所以我想出的解决方法是将各个 jar 的路径作为属性从 Maven 传递到 Ant 构建文件。

在 Maven 中：

```
<plugin>
<artifactId>maven-antrun-plugin</artifactId>
...
    <property name="example.jar" 
        value="${org.example.example:example-artifact:jar}"/> 
    ... 
```

在蚂蚁中：

```
<path id="classpath">
    <path location="${example.jar}"/>
</path> 
```

这可行，但如果您在 Maven 类路径中有多个依赖项或想要传递传递依赖项，则显然很糟糕。我认为 Ant Ivy 可能是我获取构建文件的方式。

# java - Eclipse - 默认情况下未激活 Java 智能编辑器

> ID：11953378
> 
> 赞同：3
> 
> 时间：2012-08-14T13:30:57.107
> 
> 标签：java, eclipse, editor

我的 Eclipse 安装有问题。我最近对其进行了一些更新（最值得注意的是我安装了一系列插件，我不记得完整的列表，但可以肯定我已经安装了代码检查器 Findbugs、PMD 和 Checkstyle）。但是现在，当我尝试通过在任何资源管理器视图（无论是包资源管理器、项目资源管理器、导航器等）上双击它来打开一个 Java 文件时，它不是使用通常的 Java 智能编辑器打开的，而是通过一个奇怪的编辑器打开的。 Java 编辑器和文本编辑器。特别是，类内导航操作（如 Ctrl + o - 打开成员）按预期工作，但类间导航（如 F3 - 打开声明）不起作用。我收到一条错误消息“资源不在 Java 项目的构建路径上”。

但是，如果我通过 Open Type 菜单（Ctrl + Shift + t）打开该类，我将获得功能齐全的 Java 智能编辑器，所有功能都按预期工作。

然后，如果我尝试通过在 Explorer 视图中导航到 Java 类文件来打开它，然后右键单击并选择 Open With -> Java Editor，我会得到同样奇怪的编辑器，而不是 Java 智能编辑器。

我尝试卸载代码检查器插件：Findbugs、PMD、Checkstyle，但无济于事。

我不确切知道这种行为是在哪里/如何触发的，让我感到困惑的是它适用于 Open Type 但不是通过双击或上下文菜单。我也查看了 Eclipse 日志，但没有看到与此行为相关的任何信息。因为我不是 Eclipse 内部的专家，所以我问你这个问题......

最好的问候，弗洛林。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:51:00.167

尝试重新设置 Java 文件的默认编辑器，方法是转到`Preferences -> General -> Editors -> File Associations`

这是我的设置方式：

![在此处输入图像描述](../Images/11e971d2ded90aa93ac04ad4abeb2097.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T18:55:33.613

我遇到了同样的问题——谷歌的 Eclipse 插件导致了一些编辑器冲突。卸载所有 Google 的 GPE 和 SDK 包解决了这个问题。我还没有解决方案。

# validation - SpringMVC 可以为所需的表单字段显示星号吗？

> ID：11953380
> 
> 赞同：2
> 
> 时间：2012-08-14T13:31:02.940
> 
> 标签：validation, spring-mvc, bean-validation

有没有办法在 Spring MVC 中内置，在表单的必填字段旁边显示一个“*”符号？

我发现了如何在 JSP 中显示缺少所需值的错误消息。但是在用户提交任何东西之前，有没有办法直观地告诉他“这个字段是必需的”？

我可以在 JSP 中手动添加一个“*”符号。但我更喜欢 Spring 的自定义标签来为我做这件事，基于 @NotEmpty 验证注释。

谢谢。约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:42:37.747

不，如果提交且为空，您将得到的最接近的是错误消息。但我只是推出我自己的 css 类，将文本附加到标签元素。

弹簧形式选项： [http ://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/spring-form.tld.html#spring-form.tld.option](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/spring-form.tld.html#spring-form.tld.option)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:07:04.570

除了 Nim 的回答之外，您还可以绑定一个

```
onsubmit="return validateForm();" 
```

在该函数中，您可以检查不同必填字段的内容并附加到 Nim 所说的那个标签上。只要该函数在有字段错误时返回false，表单就不会提交。

# eclipse - 从没有库的 Eclipse 中导出可运行的 jar

> ID：11953381
> 
> 赞同：0
> 
> 时间：2012-08-14T13:31:03.513
> 
> 标签：eclipse, executable-jar

我正在尝试从一个更大的项目中导出一个单独的可运行类。这个特定的类不依赖于项目库。

其中`Export->Java->Runnable JAR file -> Library handling`有提取、打包或复制所需库的选项，但不能简单地省略它们。

我真的不需要它们，而且在我的情况下库导出失败。

如何在没有库的情况下导出它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:37:22.860

[far jar 插件](http://fjep.sourceforge.net/)支持这一点。

当您使用 导出包含 jars 的 java 项目时`File -> Export -> Other -> One Jar Exporter`，在`Select files for Fat Jar`向导的页面中您可以选择不包含库，如下所示：

![在此处输入图像描述](../Images/88642b794606a90d328ced237a64793e.png)

因此导出的罐子工作正常。

# java - Java NAL 到 H264

> ID：11953385
> 
> 赞同：1
> 
> 时间：2012-08-14T13:31:09.880
> 
> 标签：java, h.264, rtp

有没有人使用过允许 NAL > H264 转换的优秀开源 Java 库？

我见过很多库，但其中大多数不完整或很难使用（没有文档等）。

我想要的是传递 NAL 有效载荷并获得实际的 H.264 原始视频。下一步是将其放入 MP4 容器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:46:07.747

从评论中的讨论中，我改写了您的问题并将其分为两部分：

## 我想从纯 java 中的 H264 RTP 数据包中提取 NAL 单元并将它们转储到附件 B H264 文件中。

我怎么做？有图书馆吗？

这些数据包的有效负载在[RFC3984](http://www.ietf.org/rfc/rfc3984.txt)中指定。

我不知道任何开箱即用的 Java 库。但是只要包装类型不交错，实现就相当简单：

RFC3984 允许三种封装类型

*   单 NAL 单元模式
*   非交错模式
*   交错模式

只要您的数据包源以单个 NAL 单元模式或非交错模式发送，您就可以提取 NAL 单元而无需从数据包中进行任何进一步处理，并将它们转储到磁盘，其中 0x00,0x00,0x00,0x01 作为它们之间的分隔符。

如果包装类型是交错的，您需要做更多的工作，因为您必须查看 NAL 并将它们重新排序为解码顺序。

## 我将原始附件 B H264 文件混合到纯 Java 中的 MP4 容器中

您可以使用我的[mp4parser](https://github.com/sannies/mp4parser)项目从附件 B 格式生成 MP4。看看[H264Example](https://github.com/sannies/mp4parser/blob/master/examples/src/main/java/com/googlecode/mp4parser/muxformats/H264Example.java) - 它应该让您了解如何使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T06:21:43.440

这是我在 JCodec ( [http://jcodec.org](http://jcodec.org) ) 示例中找到的内容：

```
public class AVCMP4Mux {
    private static AvcCBox avcC;

    public static void main(String[] args) throws Exception {
        if (args.length < 2) {
            System.out.println("Syntax: <in.264> <out.mp4>\n" + "\tWhere:\n"
                    + "\t-q\tLook for stream parameters only in the beginning of stream");
            return;
        }

        File in = new File(args[0]);
        File out = new File(args[1]);

        SeekableByteChannel file = writableFileChannel(out);
        MP4Muxer muxer = new MP4Muxer(file);
        CompressedTrack track = muxer.addTrackForCompressed(TrackType.VIDEO, 25);

        mux(track, in);

        muxer.writeHeader();

        file.close();
    }

    private static void mux(CompressedTrack track, File f) throws IOException {
        MappedH264ES es = new MappedH264ES(NIOUtils.map(f));

        ArrayList<ByteBuffer> spsList = new ArrayList<ByteBuffer>();
        ArrayList<ByteBuffer> ppsList = new ArrayList<ByteBuffer>();
        Packet frame = null;
        while ((frame = es.nextFrame()) != null) {
            ByteBuffer wrap = frame.getData().duplicate();
            H264Utils.encodeMOVPacket(wrap, spsList, ppsList);
            MP4Packet pkt = new MP4Packet(new Packet(frame, wrap), frame.getPts(), 0);
            System.out.println(pkt.getFrameNo());
            track.addFrame(pkt);
        }
        addSampleEntry(track, es.getSps(), es.getPps());
    }

    private static void addSampleEntry(CompressedTrack track, SeqParameterSet[] spss, PictureParameterSet[] ppss) {
        SeqParameterSet sps = spss[0];
        Size size = new Size((sps.pic_width_in_mbs_minus1 + 1) << 4, getPicHeightInMbs(sps) << 4);

        SampleEntry se = MP4Muxer.videoSampleEntry("avc1", size, "JCodec");

        avcC = new AvcCBox(sps.profile_idc, 0, sps.level_idc, write(spss), write(ppss));
        se.add(avcC);
        track.addSampleEntry(se);
    }

    private static List<ByteBuffer> write(PictureParameterSet[] ppss) {
        List<ByteBuffer> result = new ArrayList<ByteBuffer>();
        for (PictureParameterSet pps : ppss) {
            ByteBuffer buf = ByteBuffer.allocate(1024);
            pps.write(buf);
            buf.flip();
            result.add(buf);
        }
        return result;
    }

    private static List<ByteBuffer> write(SeqParameterSet[] spss) {
        List<ByteBuffer> result = new ArrayList<ByteBuffer>();
        for (SeqParameterSet sps : spss) {
            ByteBuffer buf = ByteBuffer.allocate(1024);
            sps.write(buf);
            buf.flip();
            result.add(buf);
        }
        return result;
    }
} 
```

我从这里拿了它：[https ://github.com/jcodec/jcodec/blob/master/samples/main/java/org/jcodec/samples/mux/AVCMP4Mux.java](https://github.com/jcodec/jcodec/blob/master/samples/main/java/org/jcodec/samples/mux/AVCMP4Mux.java)

# javascript - 从引用返回错误的对象

> ID：11953386
> 
> 赞同：0
> 
> 时间：2012-08-14T13:31:10.377
> 
> 标签：javascript, backbone.js, coffeescript

有谁知道为什么对象文字中的代码“@”（this）引用封闭对象而不是直接对象？

```
class Example extends Backbone.View
  render: ->
    test =
      num: 10
      nextNum: @num + 1 # References "Example" not "test" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:41:05.187

您正在调用 Hash 构造函数，并将参数发送到构造函数。我看到此代码与此代码相似（可能不一样）：

```
var test = new Hash({ num: 10, nextNum: this.num + 1 }); 
```

我认为在上面的示例中，您可以清楚地看到`this`引用外部对象而不是`test`实例本身，除其他外，因为`test`实例仍未创建。

在上面的示例中，您将解决这样的问题：

```
var num = 10;
var test = new Hash({ num: num, nextNum: num + 1 }); 
```

因此，将其转移到您的案例中，我认为您应该以类似的方式解决它：

```
class Example extends Backbone.View
  render: ->
    num = 10

    test =
      num: num
      nextNum: num + 1 
```

# iphone - 付款 iOS InApp 购买

> ID：11953392
> 
> 赞同：-1
> 
> 时间：2012-08-14T13:31:23.100
> 
> 标签：iphone, ios, in-app-purchase

我将使用我的应用程序实施 IAP（InApp 购买）来购买一些虚拟商品。我已经通过文档将其实现到应用程序中。但我有一个问题，用户如何使用这种方式付款？

非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:34:26.103

您应该彻底阅读[In App Purchase Programming Guide 。](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html#//apple_ref/doc/uid/TP40008267-CH100-SW1)您需要的所有信息都在里面。

所有货币交易均通过用户的 iTunes 帐户处理。

# javascript - 使用 jasmine 和骨干测试表单提交。

> ID：11953393
> 
> 赞同：2
> 
> 时间：2012-08-14T13:31:26.117
> 
> 标签：javascript, backbone.js, jasmine

我想使用 jasmine 测试表单提交。
该表单在主干视图中定义，如下所示 (1)。
我实现了以下测试（2），但我不确定它是如何有效的。
例如，如果 textarea 为空，则应调用 onError 函数。
在这种情况下，使用茉莉花测试表单提交的最佳方法有什么想法吗？

* * *

(1)

```
var MyView = Backbone.View.extend({

    events: {
        'focus [data-tid="message"]' : 'focusForm',
        'blur [data-tid="message"]' : 'blurForm',
        'submit   form' : 'submitForm'
    },

    focusedClass: 'is-form-focused',

    focusForm: function () {
        this.$el.find('form').addClass(this.focusedClass);
    },

    blurForm: function () {
        this.$el.find('form').removeClass(this.focusedClass);
    },

    submitForm: function (event) {
        event.preventDefault();

        var formElement =  event.currentTarget,
            message = this.$el.find('.message');

        if (formElement.checkValidity && !formElement.checkValidity()) {
            this.onError();
        } else {
            // makes a POST ajax call
            backendController.submitFeedback(message.val()).done(this.onSuccess).fail(this.onError);

        }
    },

    onError: function () {
        this.$el.find('.message').focus();
    },

    onSuccess: function () {
        this.$el.find('.message').val('');
        this.$el.find('form').removeClass(this.focusedClass);
    }
}); 
```

* * *

(2)

```
describe('When Submit button handler fired', function () {
    beforeEach(function () {
        this.popupSpy = sinon.spy();
        this.view.render();
        this.view.$el.find('form').on('submit', this.popupSpy);
        this.view.$el.find('form').trigger('submit');
    });
    it('submitForm should be called', function () {
        expect(this.popupSpy.callCount).toBe(1);
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:52:38.687

在您的示例中，您正在测试自己的测试。

我宁愿提出这样的建议：

```
// code simplified and no tested
describe("When Submit button handler fired", function () {
  it("submitForm should be called", function () {
    this.view.render();
    spyOn( this.view, "submitForm" );
    this.view.$el.find("form").submit();
    expect( this.view.submitForm ).toHaveBeenCalled();
  });
}); 
```

### 更新

可能我上面的代码行不通，因为就像[监视路由器方法](https://stackoverflow.com/questions/11847339/spying-on-backbone-js-route-calls-with-jasmine/11849364#11849364)一样，处理程序是在初始化时设置的，因此`spy`不会再调用任何进一步的代码。

您应该在类级别和实例化视图之前进行间谍活动：

```
// code simplified and no tested
describe("When Submit button handler fired", function () {
  it("submitForm should be called", function () {
    spyOn( MyView.prototype, "submitForm" );

    this.view = new MyView();
    this.view.render();

    this.view.$el.find("form").submit();

    expect( MyView.prototype.submitForm ).toHaveBeenCalled();
  });
}); 
```

# subsonic - 如何从 Subsonic 2.0 中的表中获取主键

> ID：11953395
> 
> 赞同：0
> 
> 时间：2012-08-14T13:31:37.983
> 
> 标签：subsonic, subsonic2.2

我有一个像下面这样的方法，给定一个表名和条件（列和值），想法是获取这个条件的主键值

```
 public static int getid(string table, string wherecolumn, string wherevalue) {
        SubSonic.TableSchema.Table t = new TableSchema.Table(table);
        SubSonic.Select s1 = new SubSonic.Select(t.PrimaryKey);
        s1.From(t);
        s1.Where(wherecolumn).IsEqualTo(wherevalue);
        return s1.ExecuteScalar<int>();
    } 
```

我的表“t”创建时没有错误，但 t.PrimaryKey 和其他成员始终为空，如何使用 subsonic 2.x 解决此问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:56:51.250

试试这个：

```
var t = DataService.GetSchema(table, providername); 
```

提供商名称在您的亚音速网络配置部分中。

# javascript - 在javascript中的onbeforeunload事件之后提交表单

> ID：11953398
> 
> 赞同：1
> 
> 时间：2012-08-14T13:31:59.460
> 
> 标签：javascript, javascript-events

我试图在 javascript 中的 onbeforeunload 事件之后提交表单，但它似乎并不完全正常。或者可能是我在代码中做得不好。

在我的 javascript 中，这是我的代码

```
function setPopUpWindow(submitForm){
window.onbeforeunload = function () {
    if (submitForm == false ) {
    return "Unsaved Data would be lost";
    document.getElementById("popUpForm").submit();
    }

} 
```

}

用户在尝试关闭浏览器后会看到一个警告框。在他们单击警报框中的“确定”后，我希望表单将被提交。

我想在他们点击关闭按钮后提交表单是有原因的。我想获得一个退出状态，我将在我的代码中使用它（我知道我将如何实现它）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:45:35.290

你将不得不做一些丑陋的事情来实现你想要的：

```
var saveBeforeUnload = false;
setInterval(function() {
  if (saveBeforeUnload) {
    saveBeforeUnload = false;
    document.getElementById("popUpForm").submit();  
  }
}, 500);

window.onbeforeunload = function() {
  if (submitForm == false) {
    saveBeforeUnload = true;
    return "Don't you want to save before leaving this page?";
  }
}; 
```

# iphone - UIButton 选择器在嵌套的 UIView 中不起作用

> ID：11953402
> 
> 赞同：2
> 
> 时间：2012-08-14T13:32:13.653
> 
> 标签：iphone, ios, uiview, uiscrollview

我有这个问题让我发疯。我花了几十年的时间来弄清楚为什么会这样。

我**在**. `UIScrollView`_ _ 在这个滚动视图中，我有三个在运行时创建的不同的 s。在这三个中的一个中，我创建了一个按钮。这是我的代码。**`UIView``UIView``UIView`**

 **```
 UIButton *buttonLike = [UIButton buttonWithType:UIButtonTypeRoundedRect ] ;
        buttonLike.frame =CGRectMake(scrollViewWidth +200, 30,36, 16);
        buttonLike.imageView.image = [UIImage imageNamed:@"like.png"];
        [buttonLike addTarget:self action:@selector(buttonLikePressed:) forControlEvents:UIControlEventTouchUpInside] ; 
```

**scrollViewWidth**也是一个定义和初始化的常量。
而且，我将此**buttonLike**添加为其中一个中的子视图`UIViews`。但是，无论我做什么，**buttonLikePressed**方法都不会调用。我已经搜索了这个问题并提出了这些解决方案。

[Iphone UIButton 在嵌套的 UIViews](https://stackoverflow.com/questions/818739/iphone-uibutton-not-working-in-nested-uiviews)
[iPhone SDK 2 中不起作用： UIButton 在从 nib 文件加载的嵌套视图中不起作用](https://stackoverflow.com/questions/957671/iphone-sdk-2-uibutton-not-working-in-nested-views-loaded-from-nib-file?rq=1)

他们描述了同样的问题。但是，作为一种解决方案，他们使用方法初始化他们的视图
`-(id)initWithFrame:(CGRect)aRect`。好吧，我已经使用 方法初始化了我的**UIViews**`initWithFrame`。你们知道我该如何解决这个问题吗？

谢谢你们

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T14:17:47.647

你的按钮甚至对触摸有反应吗？按下时会突出显示吗？

因为听起来您将此按钮添加到该视图边界之外的视图中，这会阻止触摸传播到按钮。您必须将该视图的宽度增加到`scrollViewWidth + 200 + 36`或更多，或者您需要将按钮放在视图的边界内。向我们展示如何创建添加按钮的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:39:22.033

您应该使用 initWithFrame 初始化所有这些视图，并且应该传入有效的框架矩形。试试这个，你喜欢的按钮会起作用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:01:08.370

我认为 UIButton 应该首先获得触摸事件，但我遇到了类似的问题，即按钮没有被按下。我最终做的是在父视图的 touchesBegan 方法中运行检查，以查看它是否触及按钮区域。这对我来说也很有帮助，因为我可以指定更大的区域，这样按钮更容易按下。然后我刚刚触发了按钮的触摸事件。

另一种更容易的方法是将按钮的父视图的 isUserInteractionEnabled 设置为 false，当然前提是您不需要它们响应触摸。

这些只是解决您的问题的想法，不知道如何实际解决它。**

# python - Python 中的谷歌分析 API

> ID：11953405
> 
> 赞同：2
> 
> 时间：2012-08-14T13:32:20.303
> 
> 标签：python, google-analytics

我正在尝试使用 Python 查询 Google Analytics API。我已经按照文档中的示例进行操作。（我做了非常小的改动来帮助我调试我遇到的问题）。我不断得到一个“NoneType”对象没有属性“ **__ *getitem* __** ”，我似乎无法解释。我只是按照 Google 提供的文档中的示例尝试获取 2012 年 3 月 3 日的 ga:visits 数据。

我正在运行的代码是：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import sys

# import the Auth Helper class
import hello_analytics_api_v3_auth

from apiclient.errors import HttpError
from oauth2client.client import AccessTokenRefreshError

def main(argv):
  # Step 1\. Get an analytics service object.
  print "I got here twice"
  service = hello_analytics_api_v3_auth.initialize_service()

  try:
    # Step 2\. Get the user's first profile ID.
    profile_id = get_first_profile_id(service)
    print profile_id

    if profile_id:
      # Step 3\. Query the Core Reporting API.
      results = get_results(service, profile_id)
      print "I got the results"

      # Step 4\. Output the results.
      print_results(results)
      print "I printed the results"

  except TypeError, error:
    # Handle errors in constructing a query.
    print ('There was an error in constructing your query : %s' % error)

  except HttpError, error:
    # Handle API errors.
    print ('Arg, there was an API error : %s : %s' %
           (error.resp.status, error._get_reason()))

  except AccessTokenRefreshError:
    # Handle Auth errors.
    print ('The credentials have been revoked or expired, please re-run '
           'the application to re-authorize')

def get_first_profile_id(service):
  # Get a list of all Google Analytics accounts for this user
  print "I am trying to get first profile ID"
  accounts = service.management().accounts().list().execute()

  if accounts.get('items'):
    # Get the first Google Analytics account
    firstAccountId = accounts.get('items')[0].get('id')

    # Get a list of all the Web Properties for the first account
    webproperties = service.management().webproperties().list(accountId=firstAccountId).execute()

    if webproperties.get('items'):
      # Get the first Web Property ID
      firstWebpropertyId = webproperties.get('items')[0].get('id')

      # Get a list of all Profiles for the first Web Property of the first Account
      profiles = service.management().profiles().list(
          accountId=firstAccountId,
          webPropertyId=firstWebpropertyId).execute()

      if profiles.get('items'):
        # return the first Profile ID
        return profiles.get('items')[0].get('id')

  return None

def get_results(service, profile_id):
  # Use the Analytics Service Object to query the Core Reporting API
  return service.data().ga().get(
      ids='ga:' + profile_id,
      start_date='2012-03-03',
      ##The start date dates range is hard coded here
      ##We have to change this so it becomes an input parameter
      end_date='2012-03-03',
      ##The end date is also hard coded in
      ##Change this to be an input parameter
      ##If you run out of ideas, read the start date off a txt file
      ##And then have the user change the text file before running
      ##the program
      metrics='ga:visits').execute()

def print_results(results):
  # Print data nicely for the user.
  print results
  if results:
    print 'First Profile: %s' % results.get('profileInfo').get('profileName')
    print 'Total Visits: %s' % results.get('rows')[0][0]

  else:
    print 'No results found'

##if __name__ == '__main__':
main(sys.argv) 
```

这将返回以下结果：

```
I got here twice
I am trying to get first profile ID
REDACT PROFILE ID
I got the results
{u'kind': u'analytics#gaData', u'containsSampledData': False}, u'itemsPerPage': 1000, u'totalsForAllResults': {u'ga:visits': u'0'}, u'columnHeaders': [{u'dataType': u'INTEGER', u'columnType': u'METRIC', u'name': u'ga:visits'}], u'query': {u'max-results': 1000, u'start-date': u'2012-03-03', u'start-index': 1, u'ids': u'ga:REDACTED', u'metrics': [u'ga:visits'], u'end-date': u'2012-03-03'}, u'totalResults': 0, u'id': u'https://www.googleapis.com/analytics/v3/data/ga?ids=ga:4159539&metrics=ga:visits&start-date=2012-03-03&end-date=2012-03-03&start-index=1&max-results=1000', u'selfLink': u'https://www.googleapis.com/analytics/v3/data/ga?ids=ga:4159539&metrics=ga:visits&start-date=2012-03-03&end-date=2012-03-03&start-index=1&max-results=1000'}
First Profile: H - REDACTED
There was an error in constructing your query : 'NoneType' object has no attribute '__getitem__' 
```

任何人都可以通过解释出了什么问题并向我们展示我们需要解决的问题来帮助我们吗？:)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-24T13:37:31.753

对你来说为时已晚，但也许有人会有类似的问题。

是的，首先错误是因为

```
 `service.management().profiles().list(
      accountId=firstAccountId,
      webPropertyId=firstWebpropertyId).execute()` 
```

正在返回无。但可读的答案是，**您在给定日期没有任何会话**。这就是我的情况，因为我想从 2012 年获取数据，而 API 没有返回`('rows')`结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T13:40:44.473

在调用 get 函数之前确保对象不是 None 。也许

```
service.management().profiles().list(
          accountId=firstAccountId,
          webPropertyId=firstWebpropertyId).execute() 
```

正在返回 None 并且`profiles.get('items')`失败了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-26T16:02:56.260

就我而言，只是在提到的日期之间我没有会议。所以返回了相同的“NoneType”对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-11T23:05:55.873

是的，我遇到了同样的问题。默认日期范围是“过去 7 天”，因为没有会话，我收到错误消息。但是一旦我增加了日期范围，我就得到了想要的输出

# c# - Hot/Cold Observable，增加订阅者

> ID：11953406
> 
> 赞同：1
> 
> 时间：2012-08-14T13:32:22.477
> 
> 标签：c#, system.reactive

我如何将`MainEngine`Observable 转换为 Cold ？从这个例子：

```
 public IObservable<int> MainEngine
    {
        get
        {
            Random rnd = new Random();
            int maxValue = rnd.Next(20);
            System.Diagnostics.Trace.TraceInformation("Max value is: " + maxValue.ToString());

            return (from sinlgeInt in Enumerable.Range(0, maxValue)
                    select sinlgeInt).ToObservable();
        }
    }

    public void Main()
    {
        // 1
        MainEngine.Subscribe(
                onNext: (item) => { System.Diagnostics.Trace.TraceInformation("Value is: " + item.ToString()); }
        );

        // 2
        MainEngine.Subscribe(
                onNext: (item) => { System.Diagnostics.Trace.TraceInformation("Gonna put it into XML: " + item.ToString()); }
        );
    } 
```

问题 1：在订阅者 1 和订阅者 2 上，我得到不同的结果，但我希望他们都收到相同的结果。

问题2：从我添加**第二个**订阅者的时间点开始，他们都继续收到相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:40:46.363

关于您的第一个问题，问题在于观察者没有订阅相同的`IObservable`内容，因为您两次调用吸气剂。

将 分配`IObservable`给局部变量似乎可以解决问题：

```
IObservable<int> mainEngine = MainEngine;

mainEngine.Subscribe(onNext: (item) => { /* ... */ });
mainEngine.Subscribe(onNext: (item) => { /* ... */ }); 
```

关于你的第二个问题，如果你想分享一个单一的订阅`IObservable`，你可以使用以下`Publish`方法：

```
IConnectableObservable<int> published = MainEngine.Publish();

published.Subscribe(onNext: (item) => { Console.WriteLine(item + " on observer 1"); });
published.Subscribe(onNext: (item) => { Console.WriteLine(item + " on observer 2"); });

published.Connect(); 
```

然后，两个订阅者将以`IObservable`交错的方式查看结果：

```
0 on observer 1
0 on observer 2
1 on observer 1
1 on observer 2
etc. 
```

您还可以在调用订阅后订阅新的观察者，之后所有订阅者将看到相同的事件。您可以通过在新线程上运行您的 observable 并引入延迟来修改您的示例来测试这一点：

```
public static void Main()
{
    Random rnd = new Random();
    int maxValue = rnd.Next(20);

    /* Zip with Observable.Interval to introduce a delay */
    IObservable<int> mainEngine = Observable.Range(0, maxValue, Scheduler.NewThread)
        .Zip(Observable.Interval(TimeSpan.FromMilliseconds(100)), (a, b) => a);

    /* Publish the observable to share a subscription between observers */
    IConnectableObservable<int> published = mainEngine.Publish();

    /* Subscribe the first observer immediately, events are not yet being observed */
    published.Subscribe(onNext: (item) => { Console.WriteLine(item + " on observer 1"); });

    /* Start pushing events to the first observer */
    published.Connect();

    /* Wait one second and then subscribe the second observer */
    Thread.Sleep(1000);
    published.Subscribe(onNext: (item) => { Console.WriteLine(item + " on observer 2"); });

    Console.ReadKey();
} 
```

您将仅在第一个观察者上看到一秒钟的事件，然后两个观察者将同时看到每个事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T01:55:04.477

你的 observable 已经**很冷**了。如果您每次订阅 observable 时都获取一个实例，那么您将获得相同的值。

它看起来**很热**的唯一方法是，如果你多次调用`MainEngine`你会得到**不同的**可观察实例。但这并不能使它们真正**热**起来。

实际上，您已经创建了一个**冷的可观察工厂**。

要使该`MainEngine`方法真正变热，您需要添加一个`Defer`调用，如下所示：

```
public IObservable<int> MainEngine
{
    get
    {
        return Observable.Defer(() =>
        {
            Random rnd = new Random();
            int maxValue = rnd.Next(20);

            System.Diagnostics.Trace.TraceInformation(
                "Max value is: " + maxValue.ToString());

            return Observable.Range(0, maxValue);
        });
    }
} 
```

另请注意，我更改`Enumerable.Range`为`Observable.Range`并删除了对`.ToObservable()`.

为了现在真正让它变热，这里是做什么的：

```
var hotObservable = MainEngine.Publish().RefCount(); 
```

这实际上意味着当您同时订阅多个 observable 时，它​​们将共享底层 observable。当没有订阅者时，底层的 observable 就会消失，只有在新的观察者订阅时才会创建。

请记住，您的`MainEngine`默认实现是使用运行的，`Scheduler.Immediate`因此在您将可观察对象更改为在不同的线程上运行之前，您不会看到此代码的好处。

我希望这有帮助。

# java - App Engine servlet 生命周期

> ID：11953408
> 
> 赞同：0
> 
> 时间：2012-08-14T13:32:22.827
> 
> 标签：java, google-app-engine, p2p

考虑到使用 AppEngine 的 webapps 的生命周期，我有疑问。让我们考虑以下情况：我希望 servlet 成为我的 p2p 网络中的超级对等点，它提供有关当前连接用户的信息，以及使用 p2p 协议时有用的所有其他细节。

我决定使用 Datastore Java API 存储这些数据。当请求到达应用程序时，将从数据库中检索数据并将其发送给用户。简单的。事情是这样的——数据检索似乎有些多余。我想知道是否可以在应用程序启动时检索一次数据，然后将其发送给用户。

我知道 60 秒的请求和响应限制，并且基于这个主题[Google App Engine Instance Life Cycle](https://stackoverflow.com/questions/11391194/google-app-engine-instance-life-cycle)，我猜每个用户请求都会创建另一个 servlet 实例，并且每次用户都必须检索所有数据发送请求。我对吗？有什么办法可以摆脱冗余的数据库访问？使用 Google 提供的 Backend 怎么样？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:04:14.250

不，你不对。Servlet - 即实例 - 为多个请求持续存在。但是寿命是不可预测的，你不应该依赖它。

您应该使用 memcached 来存储此类数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:07:37.930

1.  不是为每个请求启动一个新实例。

2.  当 GAE 认为它需要更多的计算能力来服务请求时，就会启动实例。

3.  您永远无法知道哪个实例将服务请求。

4.  后端是固定实例（=您配置运行的数量），因此它们非常适合保存共享数据。请记住：后端不是永久存储，它们可以随时重新启动（根据我的经验，这种情况每天发生一次）。所以你需要保存你的数据

5.  您可以使用 memcache（=易失性，但又快又便宜）来保存共享数据和数据存储作为后备（=可靠，但速度较慢且昂贵）。

# javascript - Phonegap + Android：禁用反弹和滚动高亮效果

> ID：11953412
> 
> 赞同：2
> 
> 时间：2012-08-14T13:32:32.093
> 
> 标签：javascript, android, cordova

我已经按照本指南使用 Phonegap 开始了一个 Adroid 项目：http: [//docs.phonegap.com/en/2.0.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/2.0.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

滚动较长页面时会出现令人不快的效果：滚动结束时突出显示（覆盖页眉和页脚）和小反弹（这使得固定位置的页眉和页脚也反弹）。

有没有办法使用Phonegap的这种实现来防止Android上的弹跳和突出显示？我只看到了嵌入式 WebView 的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T16:19:23.767

好吧，您可以添加以下几行：

```
if(android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.GINGERBREAD) {
    this.appView.setOverScrollMode(appView.OVER_SCROLL_NEVER);
} 
```

对于从 DroidGap 扩展的 Java 类的 onCreate 方法，它至少应该摆脱突出显示，也可能摆脱反弹。

# javascript - 搜索 childNodes 返回 undefined

> ID：11953413
> 
> 赞同：1
> 
> 时间：2012-08-14T13:32:33.170
> 
> 标签：javascript

我的 html 页面中有这个：

```
<nav>
    <a></a>
    <a></a>
</nav> 
```

但是当我运行`var menuitem = document.getElementsByTagName('nav').childNodes;` 它时返回“未定义”。

这是整个 javascript 文件，最后是相关部分：http: [//pastebin.com/bVj2Ug4e](http://pastebin.com/bVj2Ug4e)

我做错什么了？

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T13:35:06.090

这可能对你有用

```
var menuitem = document.getElementsByTagName('nav')[0].childNodes; 
```

因为 document.getElementsByTagName('nav') 将返回 nodeList，并确保您在 dom 准备好后运行 javascript。

# c# - 在 C# if 语句中使用 ASP Container.ItemIndex

> ID：11953420
> 
> 赞同：4
> 
> 时间：2012-08-14T13:32:57.993
> 
> 标签：c#, asp.net, repeater

我在没有任何经验的情况下遇到了关于 ASP 和 C# 的问题，并且在我访问受限且看不到正确错误日志的服务器上。因此，请为一个可能令人困惑的问题做好准备:)

我们在 HTML 模板中有一个循环（一个 ASP 中继器），模板中的一部分 HTML 应该只包含在循环的第一次迭代中。不幸的是，我不能只隐藏其他迭代的 html，我需要将其删除。

所以本质上想要这样做：

```
<% if (Container.ItemIndex == 0) { %>
    Lots of HTML here
<% } %> 
```

问题是这会产生一个错误（而且我看不到日志，所以我不知道确切的原因......）。我知道 if 语句本身可以工作（设置 0 == 0 作为示例），并且我可以正常获取索引，只是不在这里。

所以问题是，如何做这样的事情？我可以访问 C# if 语句中的索引，还是可以使用中继器中内置的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T16:10:08.850

我不会使用 If 语句，而是将“仅 0 索引”内容嵌套在 ASP.NET `Placeholder`Web 控件中，并且`visible=true`只为第一项设置。

正如[@Amiram](https://stackoverflow.com/questions/11953420/using-asp-container-itemindex-in-c-sharp-if-statement/11956444#comment15927607_11953420)所说，您可以这样做：

```
<asp:Placeholder id="ph" runat="server" visible="<%# (bool)(Container.ItemIndex==0) %>">
    ...0 Index only content
</asp:Placeholder> 
```

或者，`visible="false"`在事件中设置和更改此值`ItemDataBound`：

```
if (e.Item.ItemIndex == 0){
   (placeholder)e.Item.FindControl("ph").visible = true;
} 
```

# jsf - 在 JSF2.x 中，如何使用 DI 将请求对象传递给托管 Bean？

> ID：11953421
> 
> 赞同：1
> 
> 时间：2012-08-14T13:33:14.323
> 
> 标签：jsf, jsf-2, request

我知道如何在处理 bean 方法时请求对象：

```
@ManagedBean        
public class HomeAction {
    ....
    public String getHtmlFormattedCookiesInfo(){
        FacesContext facesCtx = FacesContext.getCurrentInstance();
        ExternalContext extCtx = facesCtx.getExternalContext();
        HttpServletRequest req = (HttpServletRequest) extCtx.getRequest();
        ....
        // now do something with the req object such as read cookie
        //    or pass req object to another another function 
        //    that knows nothing about JSF
        ....
        }
    }
} 
```

但是，我不喜欢将 Faces 特定的代码放在我的 bean 对象中。

**有没有办法使用 DI 和 faces-config.xml 传递请求？**

当您想传递请求对象上的某些内容时，[问题编号 9337433开始回答它。](https://stackoverflow.com/questions/9337433/how-to-set-or-inject-request-parameters-in-a-managed-bean)但是，我想要整个请求对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:55:16.590

在`FacesContext`EL 范围内可用`#{facesContext}`。

因此，只要托管 bean 本身也是请求范围的，就应该这样做。

```
@ManagedProperty("#{facesContext.externalContext.request}")
private HttpServletRequest request; 
```

* * *

**但是**，`javax.servlet`在您的 JSF 代码中导入更多地表明代码有异味，并且特定的功能需求也可以通过 JSF 方式来解决。根据评论，您似乎对收集请求 cookie 感兴趣。为此，您应该使用`ExternalContext`该类的非 Servlet-API 特定方法。有关完整概述，请参阅[javadoc](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html)。Cookie 也可以通过以下方式获得[`ExternalContext#getRequestCookieMap()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getRequestCookieMap%28%29)：

```
Map<String, Object> cookies = externalContext.getRequestCookieMap(); 
```

在 EL中也可以使用它`#{cookie}`（同样在这里，托管 bean 必须是请求范围的）：

```
@ManagedProperty("#{cookie.cookieName}")
private String cookieValue; 
```

或者，您可以查看[`Faces`](http://omnifaces.org/docs/javadoc/current/org/omnifaces/util/Faces.html)JSF 实用程序库[OmniFaces](http://omnifaces.org)的类来保存一些常见的样板文件。

```
String cookieValue = Faces.getRequestCookie("cookieName"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:52:53.650

假设 bean 是请求范围的，您可以使用托管属性注入另一个请求范围的值。例如：

```
@ManagedBean
@RequestScoped
public class Alfa {
  @ManagedProperty("#{paramValues.foo}")
  private String[] foo;

  public String[] getFoo() {
    return foo;
  }

  public void setFoo(String[] foo) {
    this.foo = foo;
  }

// remainder elided 
```

这也可以通过 指定`faces-config.xml`。要将请求范围的人工制品注入更广泛的范围，您必须采用一定[程度的间接性](http://illegalargumentexception.blogspot.co.uk/2011/12/jsf-mocking-facescontext-for-unit-tests.html#mockFacesScopes)。

# c# - PropertyInfo.GetValue 返回枚举常量名而不是值

> ID：11953423
> 
> 赞同：4
> 
> 时间：2012-08-14T13:33:15.913
> 
> 标签：c#, reflection

我正在构建一个使用反射来构建序列化数据的序列化组件，但是我从枚举属性中得到了奇怪的结果：

```
enum eDayFlags
{
    Sunday = 1,
    Monday = 2,
    Tuesday = 4,
    Wednesday = 8,
    Thursday = 16,
    Friday = 32,
    Saturday = 64
}

public eDayFlags DayFlags { get; set; } 
```

现在进行真正的测试

```
Obj Test = new Obj();
Test.DayFlags = eDayFlags.Friday; 
```

序列化的输出是：

> DayFlags=星期五

但是如果我在我的变量中设置两个标志：

```
Obj Test = new Obj();
Test.DayFlags = eDayFlags.Friday;
Test.DayFlags |= eDayFlags.Monday; 
```

序列化的输出是：

> DayFlags=34

我在序列化组件中所做的非常简单：

```
//Loop each property of the object
foreach (var prop in obj.GetType().GetProperties())
{

     //Get the value of the property
     var x = prop.GetValue(obj, null).ToString();

     //Append it to the dictionnary encoded
     if (x == null)
     {
          Properties.Add(HttpUtility.UrlEncode(prop.Name) + "=null");
     }
     else
     {
          Properties.Add(HttpUtility.UrlEncode(prop.Name) + "=" + HttpUtility.UrlEncode(x.ToString()));
     }
} 
```

谁能告诉我如何从 PropertyInfo.GetValue 获取变量的真实值，即使它是一个枚举并且只有一个值？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:40:35.480

你*得到*了真正的价值——它只是转换成一个没有达到你期望的字符串。返回的值`prop.GetValue`将是装箱的`eDayFlags`值。

你想要来自枚举的数值吗？将其转换为`int`. 您可以将枚举值拆箱为其基础类型。

请注意，鉴于它*是*一个标志枚举，您的枚举（可能应该被调用`Days`）应该应用于它。`[Flags]`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:46:38.523

这是预期的行为。

您没有`Flags`在枚举上设置属性，因此`.ToString()`返回枚举的字符串表示形式作为其基础类型（`int`默认情况下）。

添加`[Flags]`将强制您`.ToString()`返回您的预期值，即`"Monday, Friday"`

* * *

如果您反编译`Enum`该类，您将在实现中看到如下所示的代码`ToString()`：

```
//// If [Flags] is NOT present
if (!eT.IsDefined(typeof (FlagsAttribute), false))
//// Then returns the name associated with the value, OR the string rep. of the value
//// if the value has no associated name (which is your actual case)
    return Enum.GetName((Type) eT, value) ?? value.ToString();
else
//// [Flags] defined, so return the list of set flags with
//// a ", " between
    return Enum.InternalFlagsFormat(eT, value); 
```*

# c - char *p =NULL 占用内存？

> ID：11953428
> 
> 赞同：2
> 
> 时间：2012-08-14T13:33:26.357
> 
> 标签：c, pointers, memory, heap-memory

我的问题是关于 4GB 可寻址系统的内存管理
`char *p = NULL;`
它是否占用任何内存？
如果是这样，堆或堆栈在哪里，有多少？也说说`char **p=NULL;`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T13:35:46.730

在典型的 32 位系统上，它占用 4 个字节。

假设您的示例是某个函数中局部变量的定义，则这些字节是从堆栈中获取的。虽然：

*   如果变量没有在其他地方使用，编译器可能会从生成的代码中完全删除它；
*   如果该变量仅在本地使用并且不占用其地址，则可以将其放入寄存器中，因此它不会占用“常规”内存。

相反，如果它是一个全局变量（或者，一般来说，一个具有*静态存储持续时间*的变量），那么在大多数系统上都有一个特殊的内存区域（与堆栈和所谓的堆分开）用于它们。通常它只是在写时复制模式下直接从可执行映像映射的内存区域。所以这里的 4 个字节都在这个特定的内存区域中，在可执行文件内部的空间中。

这同样适用于`char **p`，根据原则，它没有理由比 更大或不同`char *`。

* * *

顺便说一句，如果`char * p`或者`char ** p`是聚合数据类型（通常是 a `struct`）的一部分，它们占用的空间来自`struct`分配的任何地方 - 如果`struct`变量是局部变量，它来自堆栈，如果它是动态分配`malloc`的堆，如果它是全局的，它来自全局的特殊内存区域。请记住，在谈论`struct`s 占用的空间时，有关填充的其他考虑因素也会发挥作用。

* * *

请注意，所有这些都是对“典型”32 位系统有效的考虑因素；没有什么能阻止一些奇怪的建筑`char **`在尺寸上有所不同`char *`（尽管我认为没有任何理由这样做）。不过，您可以使用`sizeof`运算符执行直接检查。

就标准而言，我认为对指针大小施加的唯一限制是任何指向数据的指针都可以在`void *`不丢失信息的情况下相互转换（实际上，该标准从未提及堆栈或寄存器）。此外，请记住，只要“可观察行为”与标准要求的内容一致，编译器就可以做任何它想做的事情，因此标准规定的这些实现细节并不能真正保证，尽管有更多细节可以在您使用的编译器的文档中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:36:41.737

如果没有上下文，变量的两个版本`p`通常会分别占用一个`char*`和一个`char**`的内存，这要么是自动（“堆栈”），要么是静态（“全局”）存储。所需的大小不大于 a 的大小`void*`（通常是一个机器字）。

总是允许编译器表现得“好像”这个变量存储在内存中，但如果它可以直接替换它的值，它可能会完全删除该变量。从这个意义上说，不能绝对保证您的 C 构造会产生任何特定的具体机器代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:40:36.757

指针只是一个可以保存地址的普通变量。无论在哪里`char *`创建变量，它都会使用内存，无论变量的值是什么。在 32 位系统上，指针的典型大小是 32 位，在 64 位机器上是 64 位。喜欢`int`或`long`。

# pdf - 在PhoneGap android应用程序中生成并保存pdf文件

> ID：11953433
> 
> 赞同：0
> 
> 时间：2012-08-14T13:33:54.197
> 
> 标签：pdf, jquery-mobile, cordova, pdf-generation

我正在使用一个生成各种类型发票的移动应用程序（使用 Jquery Mobile 和 PhoneGap），我想升级它以将发票存储为 pdf。

我试图为[http://snapshotmedia.co.uk/blog/jspdf](http://snapshotmedia.co.uk/blog/jspdf)制作一个插件，但这似乎很困难并且需要时间。

我还发现了[http://alivepdf.bytearray.org/](http://alivepdf.bytearray.org/)但同样的问题：它在手机（Android）中不起作用。

从非恒定数据生成 pdf 或将预可视化页面转换为 pdf 的任何想法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:58:17.907

You might want to look at these options: iText, droidText, Docmosis (Cloud). These tools will help you build PDFs, but not with conversion from page->pdf.

# macos - mac：如何使用 --component 选项将 License.txt 添加到使用 productbuild 构建的 pkg 中？

> ID：11953439
> 
> 赞同：7
> 
> 时间：2012-08-14T13:34:16.367
> 
> 标签：macos, installation, licensing, productbuild

我们目前使用 productbuild --component 将我们的 mac 安装程序构建为 pkg 文件（根据以下帖子：[Mac app store productbuild](https://stackoverflow.com/questions/8038788/mac-app-store-productbuild)）。

这很好用，但我也希望在这个安装程序中添加一个许可证文件。

使用 packagemaker，您可以指定选项 --resources [path_to_resources_file]。如果您将 License.txt 放在指定的资源文件夹中，安装程序会神奇地包含一个许可步骤。

虽然 productbuild 的手册页也描述了 --resources 选项，但实际上这似乎不适用于 --component 选项。它似乎完全忽略了这个选项。

根据 productbuild 手册页， --component 选项显然只需要一个产品定义 plist（我查看了 plist 选项，似乎没有一个适用于许可证文件）、一个组件、一个可选的安装路径和一个输出路径. 尽管 --sign 选项也有效。

有谁知道在使用 productbuild --component 时是否可以（如果可以，如何）包含安装程序的许可证文件？

提前致谢。

伊恩

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T12:03:33.977

在作为参数传递给 productbuild 的分发文件中，包含一个 license 元素，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<installer-gui-script minSpecVersion="1">
    <title>My Awesome App</title>
    <welcome file="welcome.html" />
    <readme file="readme.html" />
    <license file="license.html" />
    <conclusion file="conclusion.html" />

    <options customize="never" />
    <choices-outline>
        <line choice="install"/>
    </choices-outline>
    <choice id="install" visible="true" title="Install" description="Installation description goes here">
        <pkg-ref id="com.prosc.RemoteExecution.install.pkg">#installer.pkg</pkg-ref>
    </choice>
</installer-gui-script> 
```

这些文件需要存在于您在传递给 productbuild 的 --resources 参数中指定的任何目录中，如下所示：

```
productbuild --distribution distribution.xml --resources building/ "Mac Installer.pkg" 
```

# c# - Filtering DataTable based on column data and assign it to DataGridView in C#

> ID：11953444
> 
> 赞同：0
> 
> 时间：2012-08-14T13:34:31.583
> 
> 标签：c#, database, sqlite, datagridview, filter

I have a sqlite database connected to a `DataTable` and the `DataTable` is bound to a datagridview.

I have a column named Event Type and i want to separate the Event Types into two different datagridviews.

The first datagridview will contain all rows that have an Event Type other than "Exam" and the second datagridview will have ONLY rows that contain the Event Type "Exam".

I have been reading on filters but haven't got anything to work and am not sure the best way to approach this problem.

The datagridviews are both bound to the same `DataTable`. I am fairly new to programming and am working on a personal app just trying to get used to c# and .NET.

Does anyone have any ideas on how to solve this problem?

This code gave me the most progress, except that it makes all the current rows just go to blanks. It doesn't save it to the database or anything.

```
 public void EventTypeFilter()
    {
        var myDataView = dataSourceDataSet.Event.DefaultView;
        EventsDataGridView.DataSource = myDataView;
        myDataView.RowFilter = string.Format("EventType <> '{0}'", "Exam");   
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:07:56.723

Update:

```
public void EventTypeFilter()
{
    DataTable table = dataSourceDataSet.Tables["TableName"];        
    table.DefaultView.RowFilter = string.Format("EventType <> '{0}'", "Exam");
    EventsDataGridView.DataSource = table;           
} 
```

# rally - 我如何使用 Rally APIs for Java 来获得花费在任务上的时间？请指教

> ID：11953445
> 
> 赞同：0
> 
> 时间：2012-08-14T13:34:31.110
> 
> 标签：rally

我如何使用 Rally APIs for Java 来获得花费在任务上的时间？我尝试了任务查询请求但不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:32:41.480

查询结果将只包含最少的信息，因此您需要执行读取。循环遍历结果集并对每个对象进行完整读取

```
tasks[i] = (Task)service.read(tasks[i]); 
```

然后您将可以访问所有属性

# asp.net - 通过 301 永久重定向将 url 数据传递到新站点

> ID：11953447
> 
> 赞同：2
> 
> 时间：2012-08-14T13:34:40.790
> 
> 标签：asp.net, asp.net-mvc-3, url-rewriting, url-routing

我已经为我的旧站点启用了 IIS 6 上的 301 重定向，如本文所述，在 IIS 中启用了传递查询字符串的选项。

[http://www.developerfusion.com/code/4678/permanent-301-redirect-with-querystring-in-iis/](http://www.developerfusion.com/code/4678/permanent-301-redirect-with-querystring-in-iis/)

我的旧站点基于 webforms，而我的新站点基于 asp.net mvc 3。

我在重定向的站点上获得了查询字符串，但是对于一个特定的 url 重定向有问题。

此链接[http://oldsite.com/blog/123-this-is-a-title.aspx](http://oldsite.com/blog/123-this-is-a-title.aspx)的重定向转到 [http://newsite.com/blogpost.aspx?blogpostid=888&/blogpost.aspx](http://newsite.com/blogpost.aspx?blogpostid=888&/blogpost.aspx.I) 。我松了我的旧网站的标题。

我需要旧站点的帖子标题以 url 进入我的新站点，以便我的 asp.net mvc 应用程序中的自定义路由可以从 url 读取标题并获取标题的博客帖子 ID。

请让我知道为什么在重定向发生时我没有在我的新网站上获得帖子的标题以及如何将标题从旧网址获取到我的新网站网址。

谢谢。S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:41:29.713

我认为查询字符串不正确。它应该是它的形式

```
http://server/path/?name1=value1&name2=value2 see [wikipeadia][1] or [w3c][2] 
```

标题没有名称标签。它应该是

```
http://newsite.com/blogpost.aspx?blogpostid=888&title=/blogpost.aspx 
```

# python - 运行 python mox 测试时从未调用过预期的方法

> ID：11953448
> 
> 赞同：1
> 
> 时间：2012-08-14T13:34:45.460
> 
> 标签：python, mox

我正在尝试编写一个读取电子表格（4 列）、获取提要并将特定列（2 列）写入 CSV 文件的 mox 测试。我试图通过第一步，即获取列表提要，我的代码如下：

```
class SpreadsheetReader(mox.MoxTestBase):

  def setUp(self):
    mox.MoxTestBase.setUp(self)
    self.mock_gclient = self.mox.CreateMock(
                                            gdata.spreadsheet.service.SpreadsheetsService)
    self.mock_spreadsheet_key = 'fake_spreadsheet_key'
    self.mock_worksheet_id = 'default'
    self.test_data = [{'str_col':'col1', 'str_col':'col2', 'str_col':'col13'}]

  def testGetFeed(self):

    self.mock_gclient.GetListFeed(self.mock_spreadsheet_key,
                                  self.mock_worksheet_id).AndReturn(self.test_data)

    self.mox.ReplayAll()
    self.mox.Verify()

  def tearDown(self):
    mox.MoxTestBase.tearDown(self) 
```

当我运行它时，我收到以下错误：

```
ExpectedMethodCallsError: Verify: Expected methods never called:
  0\.  SpreadsheetsService.GetListFeed('fake_spreadsheet_key', 'default') -> [{'str_col': 'col13'}] 
```

知道如何解决此错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T23:53:55.240

您需要实际触发调用 GetListFeed 的函数。直到您调用`self.mox.ReplayAll()`时，您只是在“记录” mox 进入重播模式后应该看到的内容。将 mox 置于重放模式后，您需要实际调用将调用的任何函数`GetListFeed`。在您的情况下，这似乎是`testGetFeed`或其父功能是什么。

此外，由于您`mox.MoxTestBase()`在类定义中进行子类化，因此您不需要`self.mox.Verify()`在最后调用 - 根据[docs](http://code.google.com/p/pymox/wiki/MoxDocumentation)，

> 你可以让你的测试用例成为 mox.MoxTestBase 的子类；这将在 self.mox 中自动创建一个模拟对象工厂，并在每次测试结束时自动验证所有模拟对象和未设置的存根。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T16:17:29.103

```
self.mox_gclient = self.mox.CreateMock(gdata.spreadsheet.service.SpreadsheetsService)
self.mox_gclient.StubOutWithMock(ActualClass,"method_to_be_tested").AndReturn(retValue)
self.mox_gclient.VerifyAll() 
```

# at-command - AT指令完成输出

> ID：11953449
> 
> 赞同：0
> 
> 时间：2012-08-14T13:34:52.907
> 
> 标签：at-command, modem, gprs

我想知道如何获得 AT 命令的完整输出？

我通过集线器向*Telit UC864-G*发送 AT 命令，命令如下所示：

```
echo "*AT COMMAND*" > /dev/ttyUSB0 
```

例如，当我发出：

```
echo "AT+CGQREQ=?" > /dev/ttyUSB0 
```

我通常应该得到一些输出，例如：

```
+CGQREQ: <PDP_Type>,(list of supported <precedence>s), (list of supported <delay>s),(list of supported <reliability>s), (list of supported <peak>s),(list of supported <mean>s) 
```

相反，我只得到**"OK"**。

那么如何获得完整/完整的输出呢？

# asp.net-mvc - 无法将视图模型传递给 MVC 中的视图

> ID：11953450
> 
> 赞同：1
> 
> 时间：2012-08-14T13:34:54.373
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

我在 Return View(viewModel) 上收到一个错误，上面写着“'View' 是一种类型，不能用作表达式。” 我怎样才能解决这个问题？

```
Function ShowFeed() As ActionResult

    Dim feedUrl = "somefeedurl"
    Dim feed As SyndicationFeed = GetFeed(feedUrl)

    ' build a view model
    Dim viewModel = New RssModel()
    viewModel.Title = feed.Title.ToString
    viewModel.Description = feed.Description.ToString
    viewModel.Link = feed.Links.ToString

    Return View(viewModel)

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:36:35.060

该`View()`函数在`Controller`类中定义。
如果您的类不继承，则会发生此错误`Controller`。

# sql - 在 Oracle 中替换一列电子邮件中的多个字符

> ID：11953462
> 
> 赞同：0
> 
> 时间：2012-08-14T13:35:26.380
> 
> 标签：sql, oracle, email-validation, data-cleaning

所以基本上我有一列多封电子邮件，其中一些是无效的，并且包含不允许的不同字符/回车。

以下是我如何在选择语句中查找无效电子邮件，但我不知道如何单独替换它们，例如，如果找到回车，我知道我会使用替换语句。与任何特殊字符相同。但这将涉及为每个可能的情况编写单独的查询？

基本上，我要求的是最有效的方法来遍历我的表，替换电子邮件地址中与这些案例语句之一匹配的任何字符

```
select /*+  parallel(a,12) full(a) */  a.row_id, a.par_row_id, a.attrib_01,     a.created_by, a.last_upd_by from s_contact_xm a 
where a.type = 'Email' and (a.attrib_01 IS NULL
or a.attrib_01 like '% %'
or a.attrib_01 like '%@%@%'
or a.attrib_01 like '%..%'
or a.attrib_01 like '%;%'
or a.attrib_01 like '%:%'
or attrib_01 not like '%@%'
or a.attrib_01 like '%/%'
or a.attrib_01 like '%\%'
or a.attrib_01 like '%|%'
or a.attrib_01 like '%@.%'
or a.attrib_01 like '%@'
or a.attrib_01 like '%.'
or a.attrib_01 like '%(%'
or a.attrib_01 like '%)%'
or a.attrib_01 like '%<%'
or a.attrib_01 like '%>%'
or a.attrib_01 like '%#%'
or a.attrib_01 like '%"%'
or a.attrib_01 like '%.@%'
or a.attrib_01 like '%..%'
or a.attrib_01 like '.%'
or a.attrib_01 IS NULL
or INSTR(a.attrib_01, CHR(13)) > '0'
or INSTR(a.attrib_01, CHR(10)) > '0') and a.created_by = ‘1-XAAX5P’ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:01:08.783

你会发现很多关于验证电子邮件的链接，这并不意味着是复制/粘贴解决方案或涵盖电子邮件的所有情况，*只是展示了方法*。

我会使用 regexp_replace，寻找任何不是字母数字或其他可接受的字符列表（如 @ 或 .）

根据您的规则修改它。它显示了对带有奇怪或不可打印字符的字符串的清理：

```
select regexp_replace('A^b\c@de' || chr(9) || 'f.com', '[^[:alnum:]@.]','') from dual; 
```

> Abc@def.com

在更新声明中：

```
update my_table
set email = regexp_replace(email, '[^[:alnum:]@.]',''); 
```

完整示例（11gr2）：

```
SQL> create table t1
(
email varchar2(100)
)
Table created.
SQL> insert into t1 values ('a^bc@#.com')
1 row created.
SQL> insert into t1 values ('a\*bc' || chr(10) || '.net')
1 row created.
SQL> commit
Commit complete.
SQL> select * from t1

EMAIL                                                                          
--------------------------------------------------------------------------------
a^bc@#.com                                                                     
a\*bc                                                                          
.net                                                                           

2 rows selected.

SQL> update t1 set email = regexp_replace(email, '[^[:alnum:]@.]','')
2 rows updated.

SQL> commit
Commit complete.
SQL> select * from t1

EMAIL                                                                           
--------------------------------------------------------------------------------
abc@.com                                                                       
abc.net                                                                         

2 rows selected. 
```

请注意，这不会强制执行任何严格的电子邮件规则，它只是删除可接受的字符范围之外的字符（您的 OP 所要求的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:25:36.407

问题是，您有几种不同类别的潜在错误。有些是可修复的错别字；有些是无法修复的错别字；有些是错误的。现在，是否有可能提出一些*防弹*规则来确定任何给定错误的类别？

也许。

例如，您可以将每次出现的 '%..%' 转换为 '%.%'。同样，您可以将回车替换为 null。这些是可修复的错别字。

但是，如果某人包含`"`在一个电子邮件地址中，您无法确定他们实际上是要输入：您是否认为他们输入`2`了并且没有注意到他们也在按`[shift]`，或者您是否将其替换为 null（即删除它）？这不是一个可修复的错字（但您可能会认为猜测就足够了）。

如果电子邮件地址不包含 a`@`那么它不是一个有效的电子邮件地址并且没有办法修复它。

因此，您可能需要几个单独的 UPDATE 语句。您将运行一个来翻译您将尝试一对一替换的字符串。这是您想用 null 替换的东西的技术，例如那些回车。

```
translate(attrib_01, '()"'||chr(13), '902') 
```

您需要多次通过来转换多字符串，例如

```
replace(attrib_01, '..', '.') 
```

然后你可能想要修剪前导点或尾随点

```
trim(both '.' from attrib_01 ) 
```

最后，您需要报告所有无法修复的地址，例如没有（或多个）馅饼的值。

您可以使用[REGEXP_REPLACE](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions130.htm#i1305521)将其中一些规则压缩为更少的步骤。正则表达式会变得非常复杂。使用旧的 skool Oracle 替换功能更容易使事情正确。如果你真的需要性能，我建议你只使用正则表达式。即使这样，您仍然需要对数据进行多次传递。

* * *

> "'()"' 这是否意味着空值和括号？"

Oracle 文档全面、免费且在线。您可以阅读有关[REPLACE()](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions141.htm#i78608)的所有信息。[TRANSLATE()](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions204.htm#i1501659)和[TRIM()](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions207.htm#i79689)那里。

但我会多解释一下 REPLACE() 调用。此函数将第一个字符串中的每个字符替换为第二个字符串中的匹配字符。任何缺少匹配的字符都将被丢弃。因此`(`被替换为`9`，`)`被替换为`0`，`"`被替换为`2`。（查看 QWERTY 键盘以了解原因）。 `chr(13)`(回车) 不匹配，因此被丢弃（如果您更愿意这样想，也可以用 NULL 代替）。

* * *

考虑一下，您可以在 UPDATE 集合子句中部署 CASE 语句，以在一次执行中应用不同的 REPLACE()、TRIM() 和 TRANSLATE() 调用。这取决于你希望你的代码有多难以理解:)

# c - 检查是否定义了宏

> ID：11953466
> 
> 赞同：5
> 
> 时间：2012-08-14T13:35:50.070
> 
> 标签：c, macros

我们如何检查是否定义了宏，如果定义了，那么它的值是什么？我尝试做 gdb，但我们看不到 GDB 中的宏，因为宏仅在预编译时被替换。

在 GCC 编译器中有什么方法可以让我们看到预编译文件，该文件是在创建目标文件 (*.o) 之前由编译器创建的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T13:38:02.587

您可以使用`-E`gcc 的标志来获取预处理的输出。此输出将包含扩展的宏而不是它们的名称。您可以在此处找到[更多信息](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Preprocessor-Options.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T14:14:00.163

在 C 源文件中，您可以使用`#ifdef`宏来检查是否定义了宏。

```
#include <stdio.h>

#ifdef MY_MACRO
char msg[] = "My macro is defined";
#else
char msg[] = "My macro is NOT defined";
#endif

int main(int argc, char **argv) {
    printf("%s\n", msg);

    return 0;
} 
```

# iphone - iphone中textview内的html /图像

> ID：11953472
> 
> 赞同：0
> 
> 时间：2012-08-14T13:36:21.670
> 
> 标签：iphone

数据来自 json 字段，例如，

**“描述”：“ [http://a1.twimg.com/profile_images/850960042/elandroidelibre-logo_300x300_normal.jpg](http://a1.twimg.com/profile_images/850960042/elandroidelibre-logo_300x300_normal.jpg)你好世界”**

图像将在随机位置。

那么可以在 textview 中显示 html / image 吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:48:24.377

不，你不能在`UITextView`

您可以使用`UIWebView`它来代替它，它提供了您在问题中提出的所有功能。

希望对你有帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:00:23.900

使用[bctextview](http://www.cocoacontrols.com/platforms/ios/controls/bctextview)链接进行 html 显示。

# nginx - 在 nginx 提供的 HTML 文件中包含主机名

> ID：11953473
> 
> 赞同：6
> 
> 时间：2012-08-14T13:36:24.133
> 
> 标签：nginx

nginx 是否提供了一种在 HTML 文件中添加主机名（和端口）的方法（不使用其他解决方案，例如 PHP）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T13:39:47.870

可能是您正在寻找的[SSI ？](http://nginx.org/en/docs/http/ngx_http_ssi_module.html)

所有变量，在 core 模块中可用，在 ssi 模块中也可用。

使用示例：

```
<!--# echo var="host" default="unknown_host" -->:<!--# echo var="server_port" default="unknown_port" --> 
```

我已将此字符串放入 test.html 并通过调用此页面`[http://localhost/test.html](http://localhost/test.html)`

结果我得到以下字符串：

```
本地主机:80
```

# ruby - 使用 Ruby 创建包含 UTF-8 编码“文件”的 ZIP 存档，而不使用文件系统

> ID：11953479
> 
> 赞同：0
> 
> 时间：2012-08-14T13:36:34.467
> 
> 标签：ruby, xml, utf-8, zip, rubyzip

使用[zipruby](https://bitbucket.org/winebarrel/zip-ruby/wiki/Home)，无需写入磁盘即可轻松创建 ZIP 存档。可以获取字符串并将它们添加为存档条目，最后将整个存档作为字符串获取。然后，我可以将其作为附件发送到需要此类存档的 Web 服务。这正是我所需要的，但有一个例外：事实证明，存档中的文件是 US-ASCII 编码的，而 Web 服务对 UTF-8 编码的文件非常严格。

有没有办法让 zipruby （或一些等效的工具，虽然我还没有找到一个能够不使用临时文件的 Ruby 工具）将这些存档条目编码为 UTF-8？

```
zipped_data = ''
Zip::Archive.open_buffer zipped_data, Zip::CREATE do |archive|
  archive.add_buffer 'file1.xml', xml1.encode('UTF-8')
  archive.add_buffer 'file2.xml', xml2.encode('UTF-8')
end 
```

为了测试，我将它写入`zipped_data`一个文件，然后解压缩，然后我可以很好地看到编码错误：

```
$ file -bi file1.xml
application/xml; charset=us-ascii 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:10:55.643

这可能只是意味着文件中没有多字节字符将其标识为 utf8。换句话说，一个只有 ascii 字符的 utf8 编码文件应该被识别为 ascii。

# jquery - 为什么以下 jquery 可以在 jsfiddle 中工作，但不能在任何浏览器上工作？

> ID：11953488
> 
> 赞同：1
> 
> 时间：2012-08-14T13:36:59.537
> 
> 标签：jquery

我尝试在 FF 和 chrome 中打开以下代码，没有任何反应。但是当我在 jsfiddle 中加载了确切的代码时，它就起作用了。

[jsfiddle链接](http://jsfiddle.net/Nuh9w/)

HTML：

```
<!doctype html>

<html>
<head>
<link rel="stylesheet" type="text/css" media="screen" href="fgerg.css" />
<script type="text/javascript" src="jquery-1.7.2.js"></script>

<script type="text/javascript">
                $(document).ready(function() {

                    $('#showButton').click(function() {
                        $('#x2').css('visibility','visible');

                    });     
                });​

            </script>   
</head>

<body>
 <input type="button" id="showButton" value="show" />
    <p id="x"> gergreg</p>
    <p id="x2"> sadeijnfciu </p>        
</body>
    </html> 
```

CSS：

```
#x {
display:none;
 }

 #x2 {
visibility: hidden;
} 
```

对于任何感兴趣的人，最后一个矩形之后的矩形`});`导致了整个混乱。有谁知道那是什么？ ![奇怪的特殊字符](../Images/3124db90e3f98e59d312ae6c6b4d8042.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:38:20.513

javascript 代码看起来有效。

您确定该`jquery-1.7.2.js`文件与您的 index.html 位于同一目录中吗？

```
+my webpage
-----jquery-1.7.2.js
-----index.html
-----....... 
```

你的目录看起来像这样吗？

我建议您使用由谷歌托管的 jQuery 库，如下所示：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:01:11.180

错误：*Uncaught SyntaxError: Unexpected token ILLEGAL*通常意味着您的页面/JavaScript 源代码中某处有一些奇怪的编码字符。最好的办法是打开[显示特殊字符](https://stackoverflow.com/questions/767545/does-notepad-show-all-hidden-characters)的文件编辑器，或者创建一个新文件并复制代码部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:41:30.283

很可能您的 jquery 链接已损坏，或者您使用的是损坏的版本。尝试从 CDN 中包含 jQuery：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

代替

```
<script type="text/javascript" src="jquery-1.7.2.js"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T13:39:11.957

除非您有特定的使用原因，否则`visibility`我更愿意使用`.show()`：http: [//jsfiddle.net/Nuh9w/3/](http://jsfiddle.net/Nuh9w/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T13:39:43.747

当您在 FF 或 Chrome 中运行代码时，您是否有在与 HTML 文件相同的相对路径中引用的 jQuery 文件？当您在 jsfiddle 中执行此操作时，jsfiddle 站点正在加载 jQuery 库。

# c# - 检查是否使用 iTextSharp 在 PDF 上启用了“快速 Web 视图”属性

> ID：11953493
> 
> 赞同：4
> 
> 时间：2012-08-14T13:37:16.417
> 
> 标签：c#, itextsharp

我正在编写一些集成测试来验证转换为 PDF 操作的正确性。在其中一项测试中，我想检查 PDF 是否启用了“快速 Web 视图”。我虽然这将是一个直接的测试，但是我没有找到任何提供该信息的属性。我正在使用 iTextShap 并编写我的测试 C#。

由于代码总是有助于可视化问题，下面是我正在尝试做的一个简单示例

```
using System;
using System.Collections;
using iTextSharp.text.pdf;

namespace ValidationTools
{
    public class PDFValidator
    {
        readonly PdfReader _readerInstance;

        /// <summary>
        /// Constructor taking a path to a PDF as string
        /// </summary>
        /// <param name="pdfPath"></param>
        public PDFValidator(string pdfPath)
        {
            _readerInstance = new PdfReader(pdfPath);
        }

        //THIS IS WHAT I AM TRYING TO DO
        public bool VerifyIfFastWebViewIsEnabled() {
            return (bool)_readerInstance["FASTWEBVIEW"];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:12:17.960

正如评论者提到的，基于[iText 论坛](http://support.itextpdf.com/node/142)，iText 不直接直接支持任何“线性化 PDF”（又名“快速 Web 视图”）功能，因此没有说明 PDF 是否被线性化。

也就是说，您可以查看[PDF 规范](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/PDF32000_2008.pdf)附录 F（从第 675 页开始）并使用其中描述的信息来实施您自己的检查，以检查 PDF 是否被线性化。

根据这个规范，令牌`/Linearized`应该出现在文件的开头附近 - 你所要做的就是检查它是否存在。

# ios - 从另一个类实例更新一个类中定义的 UIProgressView

> ID：11953494
> 
> 赞同：1
> 
> 时间：2012-08-14T13:37:18.843
> 
> 标签：ios, iphone, objective-c, uiprogressview

如果我的术语不正确，我深表歉意——我学习 Objective C 才几天，所以我还是有点陌生​​。

我有`ViewController`一个进度条 ( `UIProgressView`) 与`IBOutlet`使用 Xcode 的故事板“快速拖动”功能相连。ViewController 实例化了我编写的自定义类的对象。它将消息传递给该对象的选择器，该选择器执行长时间的工作，大约需要 15-20 秒。我希望能够随着工作的进行更新进度条，但我不知道如何访问调用类`UIProgressView`来执行此操作。我不需要使用计时器，因为对象的方法运行一个我知道其限制的长循环，并且可以根据循环中的当前位置更新进度条。

我确信这是目标 C 编程中一个非常基本的概念，但是朝着正确的方向或文档方向发展真的会帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:42:33.253

使用委托模式。

为您的 ProgressBar 更新创建一个协议：

```
@protocol MyProgressBarDelegate

- (void) onUpdateProgress:(NSInteger)progress;

@end 
```

您的 ViewController 实现了委托并包含此 onUpdateProgress 方法。

您的自定义类有一个您在其初始化程序中设置的委托变量，它设置为 ViewController 实例。

```
id <MyProgressBarDelegate> delegate; 
```

更新您的 CustomClass 指定初始化程序以将 delegate:(id)delegate 作为参数传递。

```
- (void) initWithDelegate:(id<MyProgressBarDelegate>)delegate
{
    self.delegate = delegate;
} 
```

初始化您的 CustomClass 时，[[CustomClass alloc] initWithDelegate:self];

或将委托设置为可设置的@property，并通过 [mCustomClass setDelegate:self] 进行更新；

然后您可以从您的自定义类中调用 onUpdateProgress 方法。

```
if (delegate != nil)     
 [delegate onUpdateProgress:int]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:40:56.260

您可以将视图控制器分配为自定义类的委托，并使自定义类向视图控制器报告其进度。首先，为自定义类的委托定义一个协议，然后使您的视图控制器符合该协议，并在您创建自定义类的实例后分配委托。

# forms - 如何在 Grails 中为单个表单设置多个操作按钮

> ID：11953501
> 
> 赞同：0
> 
> 时间：2012-08-14T13:37:28.203
> 
> 标签：forms, grails, grails-2.0

我有一个表单和操作按钮如下

```
<g:form  controller="mail"  enctype="multipart/form-data" method="post" id="mailComposer" name="mailComposer">
    <g:submitButton action="sendMail" name="send"  id="send" value="Send" />
    <g:submitButton action="save"  name="save" id="save" value="Save Now" />    
</g:form> 
```

在 MailController 中，我已经定义了`save()`动作`sendMail()`。

当我单击任何按钮时，该操作未正确调用，而是转到此 URL `"http://localhost:8080/myapp/mail/index/mailComposer"`。

`submitToRemote`作品很好。

**我们可以在单一形式中拥有不同控制器的多个动作吗？**

*我以前在 Grails 1.3.x 版本中这样做过，但在 Grails 2.0.4 中，它是这样做的。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T13:44:54.580

不应该使用[actionSubmit](http://www.grails.org/doc/latest/ref/Tags/actionSubmit.html)吗？：

```
<g:form  controller="mail"  enctype="multipart/form-data" method="post" id="mailComposer" name="mailComposer">
    <g:actionSubmit action="sendMail" value="Send" />
    <g:actionSubmit action="save" value="Save Now" />    
</g:form> 
```

# mysql - 如何从 2x LEFT JOIN 计算字段数据

> ID：11953502
> 
> 赞同：1
> 
> 时间：2012-08-14T13:37:36.940
> 
> 标签：mysql, sql, left-join

我需要计算我们工厂的燃料消耗量。我的查询是 LEFT JOIN，第一个“qry1”计算工厂当月运行的总小时数，“qry2”计算每个工厂使用的总柴油。

这些可以自己正常工作，但是添加“qry3”，它应该将“qry2”的答案与“qry1”分开并给出平均柴油消耗量，但我不知道如何使用这些 LEFT 的输出加入并使用结果进行（应该很容易）计算：

```
SELECT 
 `plant`.`plant_id`,
 `qry1`.`total_hrs`, 
 `qry2`.`total_d`, 
 `qry3`.`consumption`

FROM `plant` 

  LEFT JOIN ( 
   SELECT (MAX(`plant_hrs_stop`)- MIN(`plant_hrs_start`) ) AS total_hrs, `plant_id` 
   FROM`plant_hrs`  
   WHERE MONTH(`plant_hrs_date`)= MONTH( CURRENT_DATE )  
   GROUP BY`plant_id` 
  ) AS `qry1` ON `plant`.`plant_id`=`qry1`.`plant_id` 

  LEFT JOIN ( 
   SELECT (SUM(`diesel_qty`) ) AS total_d, `diesel_vehicle_no` AS `plant_id` 
   FROM`diesel`  
   WHERE MONTH(`diesel_date`)= MONTH( CURRENT_DATE )  
   GROUP BY `diesel_vehicle_no` 
  ) AS `qry2` ON `plant`.`plant_id`=`qry2`.`plant_id` 

  LEFT JOIN ( 
   SELECT (`qry2`.`total_d` / `qry1`.`total_hrs`) AS consumption,    
   FROM `qry1`, `qry2`  
   GROUP BY `plant_id` 
  ) AS `qry3` ON `plant`.`plant_id`=`qry3`.`plant_id`

ORDER BY `plant`.`plant_id` 
```

我不断收到错误，我尝试了一些搜索，但一直出现空...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:48:33.457

您不需要最后一次加入。 **并确保`qry1.total_hrs <> 0`**：

```
SELECT 
 `plant`.`plant_id`,
 `qry1`.`total_hrs`, 
 `qry2`.`total_d`, 
 `qry3`.`consumption`,
  if(COALESCE(`qry1`.`total_hrs`,0)<>0,'qry2`.`total_d` / `qry1`.`total_hrs`,NULL) AS consumption

FROM `plant` 

  LEFT JOIN ( 
   SELECT (MAX(`plant_hrs_stop`)- MIN(`plant_hrs_start`) ) AS total_hrs, `plant_id` 
   FROM`plant_hrs`  
   WHERE MONTH(`plant_hrs_date`)= MONTH( CURRENT_DATE )  
   GROUP BY`plant_id` 
  ) AS `qry1` ON `plant`.`plant_id`=`qry1`.`plant_id` 

  LEFT JOIN ( 
   SELECT (SUM(`diesel_qty`) ) AS total_d, `diesel_vehicle_no` AS `plant_id` 
   FROM`diesel`  
   WHERE MONTH(`diesel_date`)= MONTH( CURRENT_DATE )  
   GROUP BY `diesel_vehicle_no` 
  ) AS `qry2` ON `plant`.`plant_id`=`qry2`.`plant_id` 

ORDER BY `plant`.`plant_id` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:40:31.640

您不需要另一个连接来进行最终计算，您可以这样做：

```
select `plant`.`plant_id`,
    `qry1`.`total_hrs`,
    `qry2`.`total_d`,
    (`qry2`.`total_d` / `qry1`.`total_hrs`) as consumption
from `plant`
left join (
    select (MAX(`plant_hrs_stop`) - MIN(`plant_hrs_start`)) as total_hrs,
        `plant_id` 
    FROM`plant_hrs`
    where MONTH(`plant_hrs_date`) = MONTH(current_date)
    group by `plant_id`
    ) as `qry1` on `plant`.`plant_id` = `qry1`.`plant_id`
left join (
    select (SUM(`diesel_qty`)) as total_d,
        `diesel_vehicle_no` as `plant_id`
    from `diesel`
    where MONTH(`diesel_date`) = MONTH(current_date)
    group by `diesel_vehicle_no`
    ) as `qry2` on `plant`.`plant_id` = `qry2`.`plant_id`
order by `plant`.`plant_id` 
```

请注意，仅在 where 子句中使用 MONTH 意味着您将获得超过一年的数据。如果这不是预期的，也请使用 YEAR()。

# xml - windows phone 7 xml响应处理

> ID：11953505
> 
> 赞同：1
> 
> 时间：2012-08-14T13:37:49.910
> 
> 标签：xml, windows-phone-7, rest, serialization

我有一个使用网站 API 的应用程序。它返回这个 xml：

```
<xml>
  <id>48</id>
  <name>Nuno Horta</name>
  <user_lvl>2</user_lvl>
</xml> 
```

我的代码是这个：

```
client.ExecuteAsync(request, response => {
                            var value = response.Content;
                            XElement loadedData = XElement.Parse(value);
                            var data = from query in loadedData.Descendants("xml")
                                       select new 
                                       {
                                           id = (int)query.Element("id"),
                                           name = (string)query.Element("name"),
                                       };
                            listBox.ItemsSource = data;
}); 
```

我想获取这两个值，id 和 name，以将它们保存在应用程序设置中，所以我试图在这里显示它们：

```
<TextBlock Text="XML Data:"/>
                <ListBox x:Name="listBox">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Margin="10" >
                                <TextBlock Text="{Binding name}"/>
                                <TextBlock Text="{Binding id}"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                   </ListBox> 
```

顺便说一句，我正在使用 restsharp 使请求没有成功......有什么想法可以得到这些值吗？我需要使用其他 3 个 api 方法请求来执行此操作。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:24:28.140

您需要修改数据绑定以使用 Path，因为您要绑定到项目的属性。

所以你的xaml应该是

```
<TextBlock Text="XML Data:"/>  
            <ListBox x:Name="listBox">  
                <ListBox.ItemTemplate>  
                    <DataTemplate>  
                        <StackPanel Margin="10" >  
                            <TextBlock Text="{Binding Path=name}"/>  
                            <TextBlock Text="{Binding Path=id}"/>  
                        </StackPanel>  
                    </DataTemplate>  
                </ListBox.ItemTemplate>  
               </ListBox> 
```

有关路径绑定的更多信息在[这里](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.path%28v=VS.95%29.aspx)

# c# - 我可以使用什么算法在 C# 中对这个分支列表进行排序？

> ID：11953507
> 
> 赞同：1
> 
> 时间：2012-08-14T13:37:51.673
> 
> 标签：c#, algorithm, list, sorting, branch

我正在尝试创建一个有序的类别分支列表，这样我就可以找到任何子类别并`"-"`在开始时添加；以及该类别可能具有和添加的任何子类别`"--"`等。

我的测试类属性如下所示：

```
 public int Id { get; set; }
    public int OrderInList { get; set; }
    public int ParentId { get; set; }
    public IList<TestCategories> Subcategories { get; set; } 
```

例子：

```
Books
-Special Offers
--Fiction
-eBooks 
--Pdf
--Mobi
Maps
-United Kingdom
--Cumbria
--West Yorkshire 
```

我有一个默认的根级别类别，其中`Id: 1`,`ParentId: 1`和`OrderInList: 1`.
所以上面的顺序看起来像：

```
Id   | ParentId  |  OrderInList   
 2         1             1      //Books
 3         2             1      //-Special Offers
 4         3             1      //--Fiction
 5         2             2      //-eBooks
 6         5             1      //--Pdf
 7         5             2      //--Mobi
 8         1             2      //Maps
 9         8             1      //-United Kingdom
 10        9             1      //--Cumbria
 11        9             2      //--West Yorkshire 
```

如何对完全无序列表进行排序，使其看起来像上面那样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:42:39.130

这种排序称为[*拓扑排序*](http://en.wikipedia.org/wiki/Topological_sorting)。对列表进行拓扑排序的最简单方法是使用深度优先递归搜索：离开节点的顺序是反向拓扑的。如果您需要知道树中节点的深度以便知道在名称前放置多少个破折号，您可以`int level`在深度优先递归方法中添加一个变量。

[您可以从Rosetta Code](http://rosettacode.org/wiki/Topological_sort)中借用一个实现——它在 C# 中没有实现，但在 Java 中应该很容易翻译。

# php - 带有for循环PHP的非常奇怪的错误

> ID：11953511
> 
> 赞同：2
> 
> 时间：2012-08-14T13:37:58.110
> 
> 标签：php, loops, for-loop, scope

所以这个错误对我来说似乎很奇怪。我有一个带有两个必需参数的方法，但是当脚本进入第一个 for 循环时，两个参数之一似乎不再存在。

这是一段代码：

```
public function getOptionsForParameters($params, $product){
    // here the value of $product is 105
    for($i = 0; $i<count($params); $i++){
        // but here, $product no longer exists, so in the SQL query, it is empty

        $sql = "SELECT *
                FROM [table_name]
                WHERE prm_id = ".(int)$params[$i]['prm_id']."
                  AND prd_id = ".(int)$product."
                  AND opt_status = 'active'";
    } 
// ... 
} 
```

我真的不明白为什么，因为在方法的开头和 for 循环之间绝对没有脚本。

另外，如果我在所有 for 循环之后打印变量，就在方法的“返回”之前，它的值是 105 ......在我看来，PHP 以某种方式为我的变量提供了一个范围，这很奇怪......

我已经为此苦苦挣扎了太久，在 Google 或 PHP.net 上我没有找到任何与此相关的内容

有人知道为什么我的脚本会这样做吗？

顺便说一句：我的 PHP 版本是 5.3.10

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:41:43.217

它不应该发生。你100%确定它已经消失了吗？isset($product) 能给你什么？

下面的代码有什么作用？

```
public function getOptionsForParameters($params, $product){
    var_dump($product);
    for($i=0; $i<4; $i++){
        var_dump(isset($product));
    }
} 
```

如果这仍然导致外部函数中设置了 $product 而内部循环中未设置 $product ，那么 PHP 本身就出现了一些非常错误的问题，并且可能是一些错误......

另一个注意事项：

```
$i<count($params); 
```

在您的 for 循环语句中效率低下，因为它*每次*迭代都会执行一次 count($params) 。最好计算一次并使用该计算值

```
$count = count($params);
$i<$count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:40:10.567

根据正常的数组声明，您是否尝试过：

```
WHERE prm_id = ".(int)$params['prm_id'][$i]." 
```

因为至少根据我提出的关于数组声明语法的问题，这似乎是[声明数组的正常方式？](https://stackoverflow.com/questions/11532598/best-practice-how-to-structure-arrays-standards-and-naming-conventions)

# javascript - jquery javascript - 将脚本标签添加到dom会导致奇怪的行为 - 多次调用的方法

> ID：11953515
> 
> 赞同：1
> 
> 时间：2012-08-14T13:38:03.103
> 
> 标签：javascript, jquery

我有以下 jQuery 源代码 (modalConnect()) 用于加载表单并通过 boostrap [modal](http://twitter.github.com/bootstrap/javascript.html#modals)呈现它。它基本上阻止了 href 标记的默认行为，而是提交了一个 ajax get 调用。这工作正常。

现在我必须将另一个 .js 脚本标签添加到我从服务器接收的 dom 中。这也适用于第一次点击，对于每一次后续点击，该方法执行的次数是它已经执行的次数 + 1。这很奇怪。

因此，对于第一次单击，我会在控制台中收到以下信息：

> 执行的函数 执行的附加 JS

这很好。

对于第二次点击（相同或另一个 - 没有区别），我收到以下信息：

> 执行的函数 执行的附加 JS
> 
> 执行的函数 执行的附加 JS

现在在控制台中总共打印了三次文本，而我只希望打印两次。

```
<script type="text/javascript">
    function modalConnect()
        {
            $(".editItem").click(function(ev) { // for each edit item <a>
                ev.preventDefault(); // prevent navigation
                var url = ($(this)[0].href); //get the href from <a>
                $.get(url, function(results){
                  var itemForm = $("#ajax_form_modal_result", results);
                  console.log("function executed");
                  //update the dom with the received results
                  $('#itemFormModal').html(itemForm);
                  //add a new js script to the document. Repeated method calling effect only occurs if I add the following two lines
                  scriptText = "console.log('Additional JS executed')";
                  appendScriptTag(scriptText);
                  //show a bootstrap modal with the loaded form
                  $("#itemFormModal").modal('show');
                }, "html");
                return false; // prevent the click propagation
            })
        }
</script> 
```

自卫队

```
 <script type="text/javascript">
    function appendScriptTag(scriptText)
    {
        //create a script tag and append it to the dom
        var script = document.createElement( 'script' );
        script.type = 'text/javascript';
        script.text  = scriptText;
        //the following lines seem to have no effect.
        //the "method called more often" effect is not influenced by these lines
        document.body.appendChild(script);
        document.body.removeChild(document.body.lastChild);
        delete UnusedReferencedObjects; // replace UnusedReferencedObject with any object you created in the script you load.
    }

</script> 
```

此外，如果有人能解释我如何正确删除我用 appendScriptTag() 添加的最后一个 js 脚本标签，我会很高兴。我想我最终会包含多个 js，这实际上很糟糕。

不确定我在那里做的是否正确，我从这篇[文章](https://stackoverflow.com/questions/610995/jquery-cant-append-script-element)中遵循了 Hendra Uzia 的解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:45:33.947

解析并加载脚本后，删除脚本标记*不会*删除脚本。所以这就是为什么这些行没有效果。

如果您在整个代码中多次调用 modalConnect()，按钮上的事件侦听器也会重复，因此单击一次将触发 5 个事件侦听器，从而产生 5 条消息。可能就是这样...

# android - 在 View.getDrawingCache() 中获取空指针异常

> ID：11953517
> 
> 赞同：3
> 
> 时间：2012-08-14T13:38:06.933
> 
> 标签：android, view, bitmap

我正在尝试将视图转换为位图。在模拟器中，我的程序工作正常并按预期运行，但是当我在 Device 中运行相同的代码时，它会在特定行给出空指针异常：

```
Bitmap b = Bitmap.createBitmap(view.getDrawingCache()); 
```

其中 view 是具有当前 Activity 布局的 RelativeLayout 对象。有人可以指导我如何解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:46:32.840

`measure`在`layout`使用`getDrawingCache()`. _ 否则它将返回 null。

# c - 在 Linux 中开发 C 应用程序时重要且方便的工具和命令

> ID：11953518
> 
> 赞同：7
> 
> 时间：2012-08-14T13:38:07.470
> 
> 标签：c, linux

到目前为止，我有使用 Visual Studio 的经验。但我打算使用一些 Linux 工具来开发和维护用 C 编写的应用程序。

我彻底解决了这个[问题](https://stackoverflow.com/questions/17228/what-tools-do-you-use-to-develop-c-applications-on-linux)，但它谈论了太多关于 IDE 的内容。我很高兴使用它们，但我想知道还有哪些其他工具对上述练习很方便且很重要。我也想知道是否有任何命令可以让事情变得简单。谢谢！

编辑：我使用过 vim 并且熟悉 gcc 及其重要标志。任何进一步的事情都会有所帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T13:40:41.673

您需要熟悉 linux 命令行工具。尤其：

*   学习一个好的编辑器，例如`vim`或`emacs`
*   使用脚本编写您的构建`make`
*   编译使用`gcc`
*   调试使用`gdb`
*   源代码控制：如果您有选择的余地，我推荐使用现代 DVCS，例如 git 或 mercurial。否则，您的团队已经使用的任何工具都应该没问题。

这只是触及基本要素的表面，但它可能会帮助您入门。

* * *

这些工具也非常有用：

*   `grep`- 您需要一种搜索​​源文件的好方法。此命令与 vim 和 emacs (?) 集成在一起，因此在大多数情况下，您可能希望直接从编辑器中使用它。
*   `ctags`- 正如其他人所说，这将使您在编辑器中浏览源代码变得更加容易*。*同样，请咨询您的编辑以了解如何使用 ctags。
*   `valgrind`- 在您的应用程序中查找内存泄漏。
*   `lint`- 一种静态分析工具，如[夹板](http://www.splint.org/)，用于查找 C 代码中的编码错误。
*   `rpm`或其他打包系统 - 根据您部署应用程序的方式，您可能希望使用包管理器来帮助进行版本控制、安装/升级脚本等。
*   `screen`- 终端多路复用器允许您拆分终端，以便（例如）在一个窗格中查看源代码并在另一个窗格中调试/执行/搜索日志。如果您必须连接到您支持的任何远程计算机，这也很方便，因为如果您碰巧断开连接，您可以稍后重新连接到远程屏幕会话，而不必担心您的所有命令都被终止。例如，如果您处于 a 中间，`yum update`您不必担心它会因为您的连接被切断而在事务中终止。
*   `ssh`// `sftp`etc - 如有必要，将文件安全地复制到您的测试/生产机器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T14:21:07.200

在 Linux 下使用 C 语言开发时，此工具很有用：

1.  IDE：`Vim`带有`solarized`主题（[http://ethanschoonover.com/](http://ethanschoonover.com/)）。`Ctgas`并`Taglist`轻松浏览您的代码（[http://www.thegeekstuff.com/2009/04/ctags-taglist-vi-vim-editor-as-sourcece-code-browser/](http://www.thegeekstuff.com/2009/04/ctags-taglist-vi-vim-editor-as-sourece-code-browser/)）
2.  用于编译和调试`gcc`, `gdb`,`make`
3.  对于大型项目：`AUTOCONF`、、`AUTOMAKE`和`LIBTOOL`
4.  检查所有与内存相关的东西：`Valgrind` 检查函数 CPU 时间消耗`Callgrind`( [http://valgrind.org/info/tools.html](http://valgrind.org/info/tools.html) ) 全局`Valgrind's Tool Suite`(http://valgrind.org/info/tools.html) 是一个很棒的工具
5.  对于高质量代码：（`GNU gcov`测试覆盖率），这是一篇关于代码测试和高质量 C 代码的精彩文章（[http://aleccolocco.blogspot.fr/2009/08/sqlite-lesson-in-low-defect-software。 html](http://aleccolocco.blogspot.fr/2009/08/sqlite-lesson-in-low-defect-software.html) )
6.  `GNU locate`：轻松查找所有文件
7.  `Git`用于源代码配置
8.  `Doxygen`：为代码生成文档
9.  如果您开发网络程序：`wireshrak`，`tcpdump`
10.  `LXR`使用(http://lxr.linux.no) ( [http://www.ittc.ku.edu/~niehaus/classes/800-s04/notes/setup_lxr.txt](http://www.ittc.ku.edu/~niehaus/classes/800-s04/notes/setup_lxr.txt) )轻松浏览内核代码
11.  `Strace`跟踪系统调用（它始终是调试打开配置文件的程序的好工具）

`MAN PAGES`是最好的工具

还有很多其他好东西：-

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T13:43:35.900

在使用 processus 或 htop 时使用终止符进行多术语和轻松切换。

我推荐 emacs (-nw) 或 vi

Gcc 来编译你的 C 代码。

您还想使用 GDB 进行调试。

Valgrind 检查泄漏和内存转储

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T13:42:31.490

你需要能够在你的代码库中找到东西，为此我建议：

1.  [确认](http://www.betterthangrep.com)。它就像一个`find`/`grep`组合，但更容易使用，更有用并且直接面向程序员。
2.  [标记](http://ctags.sourceforge.net/)。它将帮助您通过编辑器（vi/emacs 等）以与 IDE 类似的方式浏览代码库（将代码视为一组超链接）

# design-patterns - 观察者模式 - 奇异数据点与大集合

> ID：11953522
> 
> 赞同：2
> 
> 时间：2012-08-14T13:38:20.660
> 
> 标签：design-patterns

我试图了解观察者模式，并且从概念上讲 - 我明白了，它似乎对很多东西真的有益......

但是...在所有示例和阅读中，我正在做的-似乎所有示例都使用“单个”数据点和单个类来管理该数据点，所以当然如果“x”发生变化，请通知其他人（注册）类...

当一个类中有多个方法可以更改多个数据点时该怎么办？- 是否应该为特定的“方法”注册“观察者” - 或者您是否添加了“onchange”方法 -

以 USER 对象为例，它具有一些普通的 CRUD 方法，“插入”、“更新”、“删除”……这些方法中的每一个都会“更改”数据。

如果我有 2 个观察者 - 一个“日志记录”对象，一个 UI 对象与用户名相关联......显然，日志记录对象会想知道任何数据更改，而 UI 对象可能只关心用户名。

一个人如何处理这些多个数据点 - 你会（希望）不要编写代码来分别更新每个数据点 - 并注册以“观看”每个！那太荒谬了。

为了争论 - 假设用户的“属性”是100个数据点 - （第一，中间，最后，dob，用户名，电子邮件，密码，lastlogin等......）并且“updateUser”方法触发 - 仅更改lastlogin ...“通知”是否处理决定不提醒 UI 的条件逻辑 - 或者 UI 是否被提醒（因为它是“用户”的观察者 - 并且 UI 对象具有处理通知的方法，而 IT 负责判断“lastlogin”对它不感兴趣的条件逻辑。？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T16:22:30.107

您不必为每种方法都注册观察者。您可以对观察者进行分类，例如：

```
 private Observer[] updateObservers;
 private Observer[] usernameUpdateObservers; 
```

当观察者注册自己时，它必须知道将自己放入哪个组。然后您的 User 类将通知适当的组；

```
 public void setUsername(String username) {
    this.username = username;
    notify(updateObservers);
    notify(usernameUpdateObservers);
  }

  public void setEmail(String email) {
    this.email = email;
    notify(updateObservers);
  } 
```

但是，当您观察对象的每个动作时，代理可能更合适。我会给你一个小的 java 例子（现在有一些方法可以在 java 中动态地做到这一点，但为了说明这一点，这里是长版本）。

```
 public interface User {
   void setUsername(String username);
   void setEmail(String email);
 }

 public class LoggingUserProxy implements User {
   private User user;

   public LoggingUserProxy(User user) { this.user = user; }

   public void setUsername(String username) {
     user.setUsername(username);
     log("updated username to " + username);
   }

   public void setEmail(String email) {
     user.setEmail(email);
     log("updated emailto " + email);
   } 
```

现在当我创建我的用户时，我将它包装在代理中

```
 User user = new LoggingUserProxy(realUser); 
```

接口未更改，并且您的 User 对象不会被所有 notify() 调用污染。

# android - Android上的jQuery .hover - 防止点击

> ID：11953524
> 
> 赞同：0
> 
> 时间：2012-08-14T13:38:29.663
> 
> 标签：android, jquery

以下代码可以很好地在桌面和 iOS 上显示下拉菜单，但在 Android 上，它会创建一个点击事件并刷新页面。我怎么能阻止它？我还没有找到任何简单的方法来解决这个问题？

jQuery：

```
$('nav li').hover(
    function () {
        $('ul', this).fadeIn(100);

    }, 
    function () {
        $('ul', this).fadeOut(100);         
    }
); 
```

HTML：

```
<nav>
    <ul>
        <li><a href="">Products</a></li>
    </ul>
</nav> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:24:58.563

不确定这是否是最好的方法，但这会阻止页面在 Android 中刷新，同时仍然使用悬停代码来显示下拉列表（它们只是 nav ul li 的 ul 子级。

```
$('nav li').hover(
    function () {
        $('ul', this).fadeIn(100);
    }, 
    function () {
        $('ul', this).fadeOut(100); 
    }
);

$('nav a[href=""]').click(function(){
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:43:52.930

这是因为它将悬停转换为点击。您没有要在代码中加载的页面，因此 # 将被修改为您的 URL，显示链接成功。

# sharepoint - Sharepoint 网站不工作？

> ID：11953525
> 
> 赞同：1
> 
> 时间：2012-08-14T13:38:30.450
> 
> 标签：sharepoint, ms-access, windows-server-2008, sharepoint-designer, sharepointfoundation2010

好的; 对不起，我知道这不是一个编程问题，但它对我来说太笼统了，任何特定的论坛都关闭了 stackexchange。

微软软件开始感觉越来越像乏味的 RPG 获取任务。

我已经创建了一个 Access 2010 数据库，并希望生成某种用于协作的前端。显然，Sharepoint 是一个很好的基础。

使用 Sharepoint Workspace 2010 - 但这似乎与 Access 集成无关。

事实证明，Access 需要一个 Sharepoint 站点——它只能通过 Sharepoint Designer 创建。很公平，下载.install.run Sharepoint Designer 2010。

Designer 要求安装 Sharepoint Foundation 以创建 Sharepoint 站点。甚至在本地。显然，我有权访问的服务器没有安装 Sharepoint Foundation，所以我开始在本地安装它，所以至少我会有一个工作的基础。

Sharepoint Foundation 2010 抱怨它无法安装，因为没有安装 Windows Server 2008 SP2（你是认真的吗？）。所以我努力地去安装 Windows 2008 SP2。

Windows 2008 SP2 拒绝安装，因为它“不适用于此计算机上运行的 Windows 版本”。显然它只能安装在 Windows Vista 上，而我正在运行 Windows 7。

所以我去寻找一个Windows 7版本。我的意思是，很明显，在这个阶段我被引导到花园小径上，但我必须用尽所有选择，你知道的。

所以我能找到的最近的是 Windows Server Update Services 3.0 SP2 。是的，这可以正常工作，安装良好，并且可以预见，Sharepoint Foundation 2010 仍然拒绝安装。

![共享点服务器安装错误](../Images/b178ba4af59989a273ecd77bcd7d49cc.png)

（抱歉 png 的大小 - 如果可以的话，我会编辑 html 标记）

以上有什么建议吗？我的意思是与 Access 的在线协作有关，还是与安装 Sharepoint Foundation 的错误有关？

（Sharepoint Foundation 上的“安装先决条件”按钮也会返回错误）

编辑：按照 HansUp 的建议，我安装了 Microsoft FilterPack 2.0。& 微软同步框架

我无法安装 SQL Server Native Client 或 Windows Identity Foundation (Windows6.1-KB974405-x64.msu)，因为它们已经安装。

Sharepoint Foundation 安装提示产生相同的错误。我不介意这是我正在使用的一些过时技术——（无论是软件还是我的硬件），还是有缺陷的免费软件。我的意思是，这是最先进的 Microsoft 专有产品……来吧！;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:39:14.830

刚刚遇到同样的问题，谷歌找到了解决方案

[http://spradip.wordpress.com/2011/01/08/installing-sharepoint-2010-in-windows-7-64-bit/](http://spradip.wordpress.com/2011/01/08/installing-sharepoint-2010-in-windows-7-64-bit/)

这提供了一个至少在安装之前对我有用的更新。希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:14:17.513

您希望允许与您的 Access 数据库进行协作，以便尝试将 SharePoint 安装到您的本地 Windows 7 桌面？这听起来不是一个好主意，而且会让人头疼。SharePoint 需要 Windows 7 无法处理的大量开销。

当您将 SharePoint 2010 安装到 Windows 7 时，它实际上只用于开发，即开发人员可以在其工作站上构建自定义 SharePoint 解决方案，而无需安装 Windows Server。此外，此 SP 安装将仅允许

您应该做的是将 SharePoint 2010 安装到 Windows 2008 服务器，然后将公开提供给所有将在您的 Access 数据库上进行协作的人。

# mysqli - 连接结果（多表） php, mysqli INNER JOIN

> ID：11953526
> 
> 赞同：0
> 
> 时间：2012-08-14T13:38:40.067
> 
> 标签：mysqli, inner-join

（在每个结果中包含多对多结果的最佳实践？）

每个帖子都有许多资源。我试图向他们展示。它单独工作，如下所示：

资源和帖子之间的所有连接：

```
 $result = $mysqli->query("SELECT *
        FROM kopplaKontorsplatsResurser
        INNER JOIN resurser
        ON kopplaKontorsplatsResurser.resurs_id=resurser.id
        ");

    $num_results = mysqli_num_rows($result);
    for($i=0; $i<$num_results; $i++) {
    $row = $result->fetch_array(MYSQLI_ASSOC);
    echo 'Resource with id: '.$row[resurs_id];
    echo '<br>';
    echo 'Is connected to the post: '.$row[kontorsplats_id];
    echo '<br>';
    echo 'What resource is this? '.$row[resurs];;
    echo '<br><br>';
    } 
```

这就是我获取每个帖子信息的方式（kontorsplats）

```
 $result = $mysqli->query("SELECT *
                 FROM kontorsplatser
                 INNER JOIN geo_orter
                 ON kontorsplatser.ort_id=geo_orter.ort_id
                 ");
    $num_results = mysqli_num_rows($result);

    for($i=0; $i<$num_results; $i++) {
    $row = $result->fetch_array(MYSQLI_ASSOC);

    echo '<div class="kontorsplats">';
    $arbetsplatsensID = $row[id];
    $rubriken = $row[rubrik];
    $ort_id = $row[ort_id];
    $ort = $row[ortnamn];

    echo '<h4>'.$rubriken.'</h4>';
    echo '<h5><a href="">'.$ort.'</a></h5>';

       ---> Show the connected resources here. :D <------

    echo '</div>'; 
```

我正在考虑创建一个包含所有资源及其连接的数组，并为每个 div 循环遍历它，但这会是最有效的方法吗？

有趣的是包含别名： [devshed](http://forums.devshed.com/oracle-development-96/alias-in-inner-join-query-512683.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:40:42.417

我是这样解决的，仍然有挥之不去的感觉，它不是最佳的，但它有效！

首先将所有连接和资源保存到一个数组中

```
 $result = $mysqli->query("SELECT *
        FROM kopplaKontorsplatsResurser
        INNER JOIN resurser
        ON kopplaKontorsplatsResurser.resurs_id=resurser.id
        ");
    $num_results = mysqli_num_rows($result);
    for($i=0; $i<$num_results; $i++) {
    $row = $result->fetch_array(MYSQLI_ASSOC);

        $dennaKontorsplats = $row[kontorsplats_id];
        $resursens_id = $row[resurs_id];
        $resurskopplingar[$dennaKontorsplats][$resursens_id] = $row[resurs];
    } 
```

然后为每个帖子循环遍历它

```
//Leta upp alla resurskopplingar: 
    foreach ($resurskopplingar as $kontoretsid => $lvl1) {
        if($arbetsplatsensID == $kontoretsid){
        foreach ($lvl1 as $lvl2) {
            echo $lvl2;
        }
        }
    } 
```

# ruby-on-rails - 通过关系分配具有 has_many 的属性

> ID：11953528
> 
> 赞同：0
> 
> 时间：2012-08-14T13:38:52.120
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我只是想知道是否有人可以向我解释如何在两个对象之间创建关系（编程示例会有所帮助，因此我可以在 Rails 控制台中进行测试），其中关系定义为 has_many :through 具有附加属性。对象定义如下：

```
class Item < ActiveRecord::Base
  has_many :collections, :through => :collection_items
end 
```

* * *

```
class Collection < ActiveRecord::Base
  has_many :items, :through => :collection_items
end 
```

* * *

```
class CollectionItem < ActiveRecord::Base
  belongs_to :collection
  belongs_to :item

  attr_accessible :collection_id, :item_id, :quantity
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:42:08.797

尝试这个：

```
CollectionItem.create(item_id: Item.first, collection_id: Collection.first, quantity: 999) 
```

只需用任何逻辑替换“ `Item.first`”和“ `Collection.first`”即可获得正确的项目和收藏。

# tinymce - 集成 AngularJS 和 tinyMCE

> ID：11953532
> 
> 赞同：2
> 
> 时间：2012-08-14T13:39:14.200
> 
> 标签：tinymce, angularjs

见：http: [//jsbin.com/udayah/2/edit](http://jsbin.com/udayah/2/edit)

修改与 tinyMCE 文本区域关联的数据模型会引发 Javascript 错误：

"$digest 已经在进行中"

~~在我的应用程序中，与 JS Bin 示例不同，当我更改关联的数据模型并引发相同的错误时，tinyMCE 中的文本不会更改。我正在使用其他几个 AngularUI 指令，Codemirror 和 JQueryUI 对话框，这可能会使问题复杂化。~~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T03:46:40.907

我认为 textarea 实际上并不是 TinyMCE 正在编辑的文本的工作副本，编辑器只是偶尔将文本转储到那里。因此，对于一个干净的解决方案，您可能必须使用 TinyMCE 的[setContent](http://www.tinymce.com/wiki.php/API3%3amethod.tinymce.Editor.setContent)和[getContent](http://www.tinymce.com/wiki.php/API3%3amethod.tinymce.Editor.getContent)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T18:40:54.733

“$digest already in progress”错误不再显示在控制台中。我相信这个问题在新版本的 AngularUI 中得到了纠正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:17:14.127

这是我使用 angularJS、TinyMCE 和 Angular UI 的方法

脚本标签：

```
 <!-- JQUERY -->
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <!-- JQUERY UI -->
    <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
    <!-- ANGULAR JS -->
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular-resource.min.js"></script>
    <!-- ANGULAR UI -->
    <script src="lib/angular-ui/angular-ui.js"></script>
    <!-- TINYMCE -->
    <script type="text/javascript" src="lib/tiny_mce/jquery.tinymce.js"></script>
    <script type="text/javascript" src="lib/tiny_mce/tiny_mce_src.js"></script> 
```

看法：

```
<input type="text" ng-model="nota.fechaPub" ui-date ui-date-format required >
<textarea ui-tinymce="{theme:'simple'}" ng-model="nota.entradilla"></textarea>
...
<button ng-click="read()" class="btn btn-primary">Read</button> 
```

控制器：

```
...
// Read the note function inside the controller
$scope.read= function () {
    var nota = $scope.nota;
    // In nota model I get two fields: entradilla (a text) and fechaPub ( a date)

}
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-21T17:20:28.117

使用 angular-ui-tinymce 两种方式与 AngularJS 和 TinyMCE 绑定

Plnkr： [http ://plnkr.co/edit/04AFkp?p=preview](http://plnkr.co/edit/04AFkp?p=preview)

希望有帮助:-)

# android - ViewFlipper 有“巨大”的延迟

> ID：11953533
> 
> 赞同：8
> 
> 时间：2012-08-14T13:39:15.553
> 
> 标签：android, animation

我有一个 ViewFlipper，它在调用 showPrevious 时运行视图动画。动画效果很好。但问题是它以超过 1 秒的延迟开始。现在这看起来并不多，但它严重延迟了应用程序的使用。

我的动画是这样的；

```
Animation inFromLeft = new TranslateAnimation(
    Animation.RELATIVE_TO_PARENT, -1.0f,
    Animation.RELATIVE_TO_PARENT, 0.0f,
    Animation.RELATIVE_TO_PARENT, 0.0f,
    Animation.RELATIVE_TO_PARENT, 0.0f);
inFromLeft.setDuration(350);
inFromLeft.setInterpolator(new LinearInterpolator());   

Animation outtoRight = new TranslateAnimation(
    Animation.RELATIVE_TO_PARENT, 0.0f,
    Animation.RELATIVE_TO_PARENT, +1.0f,
    Animation.RELATIVE_TO_PARENT, 0.0f,
    Animation.RELATIVE_TO_PARENT, 0.0f);
outtoRight.setDuration(350);
outtoRight.setInterpolator(new LinearInterpolator()); 
```

`setInAnimation`我使用and设置动画`setOutAnimation`；

```
setInAnimation(inFromLeft);
setOutAnimation(outtoRight); 
```

然后我只是使用启动动画`showPrevious`

动画以超过 1 秒的延迟开始，动画的 startTime 为 -1 且 startOffset 为 0，是否有任何原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:30:58.870

两个建议。首先，如果可能，改用 ViewPager。其次，如果第一个不可行，则使用基于 XML 的动画。将东西从代码中推到资源中通常是一种胜利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T17:18:13.213

您确定动画中发生了延迟吗？您是否尝试过添加一些日志记录，包括 AnimationListener 的 startAnimation 方法？

如果您确定在启动动画后会出现延迟，您可以尝试在启动动画之前和完成之后使用[traceview](http://developer.android.com/tools/help/traceview.html)（再次使用 AnimationListener）。这将告诉您 Android 在此期间在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T20:46:49.013

面临与@MrThys 相同的问题，但只能在 Gingerbread 设备上看到。JellyBean 设备上没有此类问题。

# java - 在 STS 中安装 Spring 示例

> ID：11953534
> 
> 赞同：0
> 
> 时间：2012-08-14T13:39:18.617
> 
> 标签：java, spring

我正在使用 STS 进行 Spring 开发，我想将位于[https://src.springframework.org/svn/spring-samples/](https://src.springframework.org/svn/spring-samples/)的项目导入IDE。我不确定该怎么做，我也不熟悉 SVN。SVN 是安装这些项目的唯一方法还是有不同/更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:45:35.850

这是我知道的最简单的方法。转到[svn](http://tortoisesvn.net/downloads.html)，下载并安装 svn。

创建源目录 => 右键单击​​目录 => 单击 SVN 签出 => 将存储库 URL 提供为[https://src.springframework.org/svn/spring-samples/](https://src.springframework.org/svn/spring-samples/) => 单击确定

您的代码将被下载。和大多数 IMP 一样，熟悉 CVS、SVN 等版本控制工具。

# jquery - 传递给链接后运行脚本（jquery mobile）

> ID：11953540
> 
> 赞同：0
> 
> 时间：2012-08-14T13:39:32.720
> 
> 标签：jquery, mobile, load

我想在出现新页面后运行脚本。这样做：在 index.html（链接）中：

```
<a href="games.html" data-transition="slide"><img src="./images/1.jpg" alt="" width='100'/></a> 
```

在games.html中，但这段代码不会运行：

```
$(document).ready(function(){
            update_list_games();
        }); 
```

和功能：

```
function update_list_games(gamer_id)
{
            requestToServer(prefix_server + 'load_games_list.php?gamer_id=' + gamer_id, function(response){
                if (response.data != null)
                {
                    if (games_list == "")
                    {
                        for (i = 0; i < response.data.length; ++i)
                        {
                            games_list += "<li class='my_li' onClick=get_game("+i+")><a href='#page3'><img align='left' src='images/"+response.data[i].icon+"' height='45' width='45' style='padding:10px;'/><h3>"+response.data[i].name+"</h3><p>"+response.data[i].description+"</p></li>";
                        }
                        $("#games_list").append(games_list); 
                        $('#games_list').listview('refresh');
                        $('#games_list').addClass('my_li');
                    }
                }
                else
                {
                    alert(MES_ERR_SERVER_ACCESS);
                }
    });

} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:15:02.977

您的函数需要一个参数 (gamer_id)，但您在没有参数的情况下调用它。还有其他使用的变量（fe prefix_server）和函数中调用的函数（requestToServer）似乎在不同的范围（全局？）中声明，所以在不知道它们的情况下，我无法更好地回答。

# javascript - 让一个元素随页面滚动并沿途“捕捉”到锚点？

> ID：11953550
> 
> 赞同：1
> 
> 时间：2012-08-14T13:39:51.380
> 
> 标签：javascript, jquery, css

我需要创建一个效果，最好是在 jQuery 中，其中一个元素随着页面向下滚动并捕捉到不同的“锚点”。

就我而言，我必须为网上商店构建产品列表，其中“添加到购物车”按钮紧挨着每种产品的价格，当用户向下滚动时，在某个点上，从当前产品中脱离并滚动向下并捕捉到下一个。

我一直在谷歌搜索解决方案和插件，但没有找到任何相关内容。

任何建议都非常感谢。我猜这至少在之前完成过一次和/或作为插件或教程存在:)

编辑：

为了说明我的意思，我在这里做了一个页面：

[http://retype.se/temp/scrolltest.html](http://retype.se/temp/scrolltest.html)

我需要的是当用户向下滚动浏览产品时，黄色 div 将在下一个产品成为焦点时的某个点，松开并向下滚动并捕捉到下一个产品。

我认为糟糕的设计，但我只是想取悦:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:26:17.033

[这是有史以来最脏的 5 分钟示例。](http://jsfiddle.net/kzWwD/)

我将省略 CSS 和 HTML，因为它们真的无关紧要，只要您了解移动元素需要`position:absolute;`并且`first container with a position:anything will be the offset() container we use`.

```
//log each x,y coordniate into an array
var theCoords = [];
$.each($('.price'), function(i,obj){
  theCoords.push({
    'ele' : $(obj),
    'top' : $(obj).offset().top,
    'left' : $(obj).offset().left});
}); 
```

在上面，我们将一些关于我们想要捕捉到的元素的信息推送到一个数组中。我们将文字元素引用存储在“ele”的参数中。

```
$(window).on('scroll', function(){
  $.each(theCoords, function(i, arr){
    if($(window).scrollTop() > arr.top - 75){
      $('#addToCart').css({
        'top': arr.top
      });
      $('#addToCart').prop('rel', arr.ele);
    }
  });  
}); 
```

在上面，我们捕获了窗口滚动事件，我们在每次页面滚动时迭代每个坐标。我刚刚使用了一些肮脏的数学来使示例流程以我认为可以接受的间隔进行；欢迎您更改此设置。我们用作`#addToCart`我们的`position:absolute`元素，每次我们根据数组评估窗口的位置时，我们都会根据与数组最接近的匹配来移动“顶部”。我们还将对“price”对象的引用推送到购物车的“rel”属性中。

```
$('#addToCart').click(function(){
  console.log($($(this).prop('rel')).text());
}); 
```

在这里，如果您单击，您将获得我们捕捉到的 div 的文本。

希望这能让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:26:44.620

您可以获取第一个可见元素的顶部，然后将购买 div 移到那里：

```
$(document).scroll(function () {
    // Get the top position of the first product which has a visible top.
    var newTop = $('.product').filter(function() {
         return $(this).offset().top >= $(window).scrollTop()
    }).first().offset().top;

    $(".buy").stop().animate({top: newTop}, 500);
});
​ 
```

小提琴：http: [//jsfiddle.net/johnkoer/Kzn6B/20/](http://jsfiddle.net/johnkoer/Kzn6B/20/)

# ios - 如何在#define 语句中放置对象

> ID：11953552
> 
> 赞同：1
> 
> 时间：2012-08-14T13:39:54.827
> 
> 标签：ios, objective-c, iphone, c-preprocessor

如何在 #define 语句中放置一个对象，如下所示：

```
#define PlacesURL @"https://maps.googleapis.com/maps/api/place/search/xml?location=34.0522222,-118.2427778&radius=500&types=**bar**&sensor=false&key=MyAPIKey" 
```

因此，代替**bar**我想做 %@ 之类的操作，但不确定如何存储 %@ 对象。另外，我将在哪里存储对象 - 在#define 指令上方？我想存储酒吧、餐馆、咖啡店等...以便从 iOS 应用程序进行 Google Places Api 搜索。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:51:42.430

据我了解，您有两种选择：

```
#define PLACES     @"bar,restaurants"
#define PlacesURL  ([NSString stringWithFormat: @"https://maps.googleapis.com/maps/api/place/search/xml?location=34.0522222,-118.2427778&radius=500&types=%@&sensor=false&key=MyAPIKey", PLACES]) 
```

或者

```
#define PlacesURL( places ) ([NSString stringWithFormat: @"https://maps.googleapis.com/maps/api/place/search/xml?location=34.0522222,-118.2427778&radius=500&types=%@&sensor=false&key=MyAPIKey", places]) 
```

第二个可能是您想要的，尽管两者都没有意义...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:50:50.290

你应该遵循代码：

```
#define PlacesURL(value) ([NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/xml?location=34.0522222,-118.2427778&radius=500&types=%@&sensor=false&key=MyAPIKey", value]) 
```

> `#define`语句必须有括号。让我们看看下面的例子。您必须返回预期的结果是 900，但会出现 230。这只是一种示例。你一定不要忘记括号。括号中的句子的开头和结尾，以及每个句子的结尾必须在适当的位置。

```
#define A 10
#define B 20
#define C A+B
// not 900, result value is 230\. 'Cause, proceed as follows: A+B*A+B
NSLog(@"value:%d", C*C); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:51:06.913

在 C 中，任何两个一起列出的常量字符串都被认为是一个字符串，因此以下任何一个都是等价的：

```
a = "abc123xyz";

b = "abc" "123" "xyz";

#define FOO "123"
c = "abc" FOO "xyz"; 
```

所以，你可以像这样做你想做的事：

```
#define BAR "whatever"
#define PlacesURL "https://maps.googleapis.com/maps/api/place/search/xml?location=34.0522222,-118.2427778&radius=500&types=" BAR "&sensor=false&key=MyAPIKey" 
```

但是，这似乎是一件很奇怪的事情？您是否尝试在运行时粘贴栏名称？如果是这样，您需要使用 sprintf 来完成（注意`%s`中的`PlacesURL`）：

```
#define PlacesURL "https://maps.googleapis.com/maps/api/place/search/xml?location=34.0522222,-118.2427778&radius=500&types=%s&sensor=false&key=MyAPIKey"

char *get_url(char *bar) {
  char url[1000];

  sprintf (url, PlacesURL, bar);
  return strdup(url);
} 
```

然后调用函数必须`free(url)`在它完成时。

# r - 使用 gWidgetsWWW 上传文件的首选方式是什么？

> ID：11953569
> 
> 赞同：0
> 
> 时间：2012-08-14T13:40:55.093
> 
> 标签：r, gwidgets

`gWidgetsWWW`manual 表示该`gfilebrowse`小部件仅用于本地安装。

在我的本地原型中，`gWidgets`我使用了[此处](http://4dpiecharts.com/2010/10/06/creating-guis-in-r-with-gwidgets/)描述的技术，但是当我尝试构建一个位于 Web 服务器上的应用程序时，那么选择文件并将其上传到服务器（使用`gWidgetsWWW`）的最佳方法是什么？加工？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:50:22.113

在`gWidgetsWWW2`示例中`gfile`显示了如何做到这一点。(https://github.com/jverzani/gWidgetsWWW2) 尽管存在可扩展性问题，但最好通过 Rook 完成远程服务。我对如何改进这一点有一些想法，但它们现在还只是一个概念证明。

# java - 无法在自定义 ViewGroup 上进行垂直对齐

> ID：11953571
> 
> 赞同：2
> 
> 时间：2012-08-14T13:40:56.457
> 
> 标签：java, android, android-layout, android-linearlayout

我有以下类，它扩展了 ViewGroup 类。

我表示我希望文本对齐 'BOTTOM | RIGHT' 如果 Button 位于 LinearLayout 中，它可以正常工作，但在我的自定义派生中，它只考虑了 'RIGHT' 参数。

我已经大大简化了我的课程，使其更易于阅读。

我有什么明显的遗漏吗？

谢谢丰富

```
public class LayoutManager extends ViewGroup
{
    private Button b1;
    public LayoutManager(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
        LocalInit(context);
    }

    public LayoutManager(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        LocalInit(context);
    }

    public LayoutManager(Context context)
    {
        super(context);
        LocalInit(context);
    }
    private void LocalInit(Context context)
    {
        b1=new Button(context);
        b1.setText("hello button 1");
        b1.setGravity(Gravity.BOTTOM | Gravity.RIGHT);
        super.addView(b1);
    }
    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b)
    {
        b1.layout(100, 100, 300, 300);
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T18:56:04.283

您必须使用[`View.measure(int widthMeasureSpec, int heightMeasureSpec)`](http://developer.android.com/reference/android/view/View.html#measure%28int,%20int%29)告诉您`Button`它将是 200 x 200，无论它想要多大。将此添加到`LayoutManager`：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    b1.measure(MeasureSpec.makeMeasureSpec(200, MeasureSpec.EXACTLY), MeasureSpec.makeMeasureSpec(200, MeasureSpec.EXACTLY));
} 
```

# ajax - 保护经典的 asp ajax 调用

> ID：11953572
> 
> 赞同：1
> 
> 时间：2012-08-14T13:41:00.177
> 
> 标签：ajax, asp-classic, security

我需要能够将 javascript 添加到现有的经典 asp 页面，该页面对远程服务进行 ajax 查询。我的理论是 javascript 会调用一个实际调用服务的代理 asp 页面（隐藏调用的实际 url）。

如何确保只能从特定页面调用代理？

现有页面是不在我们服务器上的站点的一部分，因此无法对 IIS 等进行更改。

**修正案**

我正在向电子商务服务网站的“输入地址”页面添加一个按钮（这是在经典 ASP 中）。该按钮执行查询以从 Web 服务获取详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:47:17.253

您可以检查集合中的`HTTP_REFERER`变量。[`Request.ServerVariables`](http://www.w3schools.com/asp/coll_servervariables.asp)确保此值与您希望请求来自的 URL 匹配。

这仍然可能被欺骗，但在大多数情况下是相当安全的。取决于您需要它的安全程度。

# maven-2 - 从 Java 代码执行 Maven 插件

> ID：11953573
> 
> 赞同：0
> 
> 时间：2012-08-14T13:41:00.533
> 
> 标签：maven-2

嗨朋友我正在使用 maven 开发一个项目。我想从 java 代码执行 maven 插件。请让我知道是否有任何 Api 可以从 java 代码配置和执行 maven 插件....

谢谢库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:01:37.810

查看[MavenCli 源代码](http://maven.apache.org/ref/3.0.4/maven-embedder/xref/index.html)，了解它如何初始化所需的组件并执行所需的目标。

# windows-phone-7.1 - 如何在 Windows Phone 中使用正则表达式 InputScope

> ID：11953579
> 
> 赞同：1
> 
> 时间：2012-08-14T13:41:18.650
> 
> 标签：windows-phone-7.1

我注意到 Windows Phone 7 中 TextBox 的 60 多个 InputScope 之一是 RegularExpression，我想使用它。我找不到有关谁设置实际常规表达式的任何信息。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:43:02.897

我喜欢你的想法，但根据[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh393998(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh393998(v=vs.92).aspx)。Windows Phone 应用程序不支持以下输入范围：ApplicationEnd、EnumString、PhraseList、Private、RegularExpression、Srgs、Xml。

![在此处输入图像描述](../Images/414328064df8ffbe8319a6d827ee7426.png)

# php - UTF-8 数据的主键重复问题

> ID：11953583
> 
> 赞同：3
> 
> 时间：2012-08-14T13:41:27.603
> 
> 标签：php, mysql, character-encoding

我们有一个`site_tags`由 2 个字段组成的主键调用的表 -`id`和`tag`.

一些`tag`字段采用 UTF-8 格式，我们希望将其转换为 ISO-8859-1。

在此表中有 2 个标签`Seany`，`seÃ¡ny`我们希望将后者从 UTF-8 转换。

当我们尝试使用...

```
DELETE FROM site_tags WHERE id = '1325133476' AND tag = 'seÃ¡ny'

INSERT INTO site_tags (id, tag, active) VALUES ('1325133476', 'seány', '0') 
```

MySQL 在插入时给出错误：

```
Duplicate entry '1325133476-seány' for key 'PRIMARY' 
```

这似乎是因为它正在查找`Seany`标签，因此认为它是重复的，MySQL 对字符集不敏感（即使删除对正确的记录起作用）。

数据库使用`latin1_swedish_ci`排序规则，MySQL 是 v5.1 (InnoDB)

关于我们如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:33:33.573

它必须是 PHP 将连接的字符串传递给 MySql 的方式。请调试，使用 echo 而不是 mysqli.query （或其他）并确保（至少出于调试目的）您在标头和连接上使用相同的字符集

```
mysqli.query(SET CHARACTER SET latin1;);     // latin1 matches ISO-8859-1 on mysql connection
header('Content-Type: text/html; charset=iso-8859-1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:01:18.240

我希望 UPDATE 语句能够工作，但我可能会遗漏一些东西。（我不必过多处理字符集。）如果需要，可以更改外键以进行级联更新。未经测试。. .

```
update site_tags 
set tag = 'seány'
where id = '1325133476' AND tag = 'seÃ¡ny'; 
```

但我认为**更安全的方法**可能是创建一个具有正确编码的新列，通过[MySQL 的 convert() 函数](http://dev.mysql.com/doc/refman/5.6/en/charset-convert.html)对其进行更新，然后修复密钥。（创建一个新列，在 {id, new_column} 上创建一个唯一约束——这是对现有约束的补充——更新新列等）

```
update site_tags
set new_column = convert(tag using latin2)
where new_column is null; 
```

我不确定 latin2 是否正确；[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/charset-charsets.html)将其描述为“ISO 8859-2 中欧”。

如果您仍然遇到重复键错误，我希望发现 UTF8 中的两个不同值映射到 ISO-8859-1 中的单个值。

# javascript - RequireJS 模块的依赖没有被评估

> ID：11953585
> 
> 赞同：1
> 
> 时间：2012-08-14T13:41:33.817
> 
> 标签：javascript, backbone.js, coffeescript, requirejs

我在 CoffeeScript 中有以下（非常简单的）模块定义：

```
# backbone/routers/appointments_router.js.coffee
define ["app", "underscore", "backbone"], (App, _, Backbone) ->
  console.log(Backbone) 
```

这是我的配置和东西：

```
# application.js.coffee
requirejs.config
  paths:
    underscore: "lodash.min"
    backbone: "backbone"
    appointmentsRouter: "backbone/routers/appointments_router"
    "backbone-relational": "backbone-relational"

requirejs ["app", "underscore", "backbone", "appointmentsRouter"], (App, _, Backbone, AppointmentsRouter) -> 
```

这是发生了什么：当我加载我的页面时，我进入`undefined`了控制台，即使 Backbone 被列为依赖项。更令人费解的是，如果我`Backbone`在控制台输入，Backbone*就被*定义了。

**Backbone 怎么会最终得到评估，但我`appointments_router.js.coffee`不知道 Backbone？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:51:04.080

Underscore 或 Backbone 不符合 AMD 标准，因此定义路径是不够的。幸运的是 Require.js 提供了 -functionality[`shim`来](http://requirejs.org/docs/api.html#config-shim)解决这个问题。

所以你必须添加这样的东西

```
requirejs.config( // shouldn't this be just require?
  paths: ..., // don't change these
  shim: {
    "underscore": {
      exports: "_" // define the export
    },
    "backbone": {
      deps: ["underscore"], // define dependencies for backbone
      exports: "Backbone"
    }
  }
); 
```

希望这可以帮助！

# c# - 将字符串转换为 int (2)

> ID：11953587
> 
> 赞同：0
> 
> 时间：2012-08-14T13:41:43.097
> 
> 标签：c#, asp.net-mvc

我正在使用以下操作来保存使用内容管理系统的管理员编辑的导航栏项目：

```
 [HttpPost]
    public ActionResult aSaveNavs()
    {
        aLoggedIn();

        NavItemsDataContext navDB = new NavItemsDataContext();
        Nav n = navDB.Navs.Select(row => row.ID == Convert.ToInt32(Request.Form["ID"]));

        n.NavName = Request.Form["NavName"];
        n.NavURL = Request.Form["NavURL"];
        n.NavEnabled = (Request.Form["NavEnabled"] == "true" ? true : false);
        navDB.SubmitChanges();

        return Redirect("/Admin/aHome");
    } 
```

我正在使用以下视图：

```
@{
List<Nav> navList = HtmlHelpers.GetNavList();
}

@foreach (Nav item in navList)
{
    <tr>
        <td style="width: 150px; text-align: center;">
            @item.NavName
        </td>
        <td style="width: 150px; text-align: center;">
            <input id="NavName" name="NavName" type="text" value="@item.NavName" />
        </td>
        <td style="width: 150px; text-align: center;">
            <input id="NavURL" name="NavURL" type="text" value="@item.NavURL" />
        </td>
        <td>
            <input id="ID" name="ID" type="text" readonly="readonly" value="@item.ID" />
        </td>
    </tr>
} 
```

显然，视图中还有其他一些内容，但这是有问题的部分。

当我尝试保存更改时，我收到“System.FormatException：输入字符串格式不正确”。并突出显示以下行：

```
Nav n = navDB.Navs.FirstOrDefault(row => row.ID == Convert.ToInt32(Request.Form["ID"])); 
```

提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:07:08.010

人们已经回答了如何进行转换并修复该错误。我会谈点别的。

正如 SLaks 所提到的，您最好考虑使用 MVC [ModelBinding](http://odetocode.com/blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx)。MVC 团队创建它是为了让我们的生活更美好。所以我们应该利用这个很好的特性。

模型绑定依赖于强类型视图。因此，让我们为您的视图创建一个`ViewModel`（只是一个普通的类）。

```
public class NavigationViewModel
{
  public int ID { set;get;}
  public string Name { set;get;}
  public string URL{ set;get;}
  public bool IsEnabled{ set;get;}
} 
```

从您的`GET`操作中，创建此类的一个对象并将其传递给您的视图。

```
public ActionResult aSaveNavs()
{
  NavigationViewModel vm=new NavigationViewModel();
  return View(vm); 
} 
```

现在我们将视图更改为强类型视图。

```
@model NavigationViewModel
@using(Html.BeginForm())
{
  @Html.LabelFor(x=>x.Name) 
  @Html.TextBoxFor(x=>x.Name)

  @Html.LabelFor(x=>x.URL)
  @Html.TextBoxFor(x=>x.URL)

  @Html.LabelFor(x=>x.IsEnabled)
  @Html.CheckBoxFor(x=>x.IsEnabled)

  @Html.HiddenFor(x=>x.ID)
  <input type="submit"  />
} 
```

现在在您的`POST`操作中，从我们的模型/视图模型的属性中读取表单值

```
[HttpPost]
public ActionResult aSaveNews(NavigationViewModel model)
{
 if(ModelState.IsValid)
 {
    //Now you will have the Value inside the model Properties
    string name=model.Name;
    string url=model.URL;
    bool isEnabled=model.IsEnabled;

    //now save to your Data base and Redirect (PRG pattern)

 }
 return View(model);
} 
```

还要尽量避免在视图中调用你的方法（你在`GetNavList`视图中调用）。这种方法（混合代码和 UI）会使你的视图变得丑陋。**MVC 框架的主要目标之一是关注点分离**。所以让我们保持 UI 和功能分开（和干净）。

为您的列表设置一个操作方法并在那里获取项目并将其传递给您的强类型视图。

```
public ActionResult aHome()
{
  List<Nav> navList = HtmlHelpers.GetNavList();
  return View(navList);
} 
```

并将视图更改为

```
@model IEnumerable<Nav>
@foreach (Nav item in navList)
{
  <p>@item.Name</p>      
} 
```

如果您有一个页面要更新多条记录，也可以考虑使用[EditorTemplates](https://stackoverflow.com/questions/10609788/mvc3-how-to-post-a-list-within-a-class-in-controller/10610357#10610357)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T13:44:19.960

尝试检查，如果您可以使用将字符串转换为 int`int.TryParse`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T13:49:40.537

Convert.ToInt32 可能仍会抛出错误，例如当它为空时，因此使用以下命令：

```
int result=0;
Int32.TryParse(Request.Form["ID"].ToString(), out result); 
```

然后在您的代码中：

```
Nav n = navDB.Navs.FirstOrDefault(row => row.ID == result); 
```

# html - 强制空块元素具有宽度

> ID：11953590
> 
> 赞同：1
> 
> 时间：2012-08-14T13:41:45.847
> 
> 标签：html, css

我正在使用需要块元素的就地编辑插件，以便知道单击时哪个元素是可编辑的。我已经在 ASP .NET 中这样做了：

```
<div class="editable-alias" style="background-color: red; width: 100%;"><%# ViewModel.Alias %></div> 
```

但是如果`ViewModel.Alias`为空，则周围`<div>`为空，因此其宽度为0，无法点击。有没有办法让 div （或者可能与 inline-block 跨越）具有宽度，即使它没有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:44:38.957

尝试;

```
<div class="editable-alias" style="display:block; background-color: red; width: 100%;"><%# ViewModel.Alias %>&nbsp;</div> 
```

你也可以指定一个`min-height`连同这个

# java - 向 JSP 发送请求并接收响应

> ID：11953595
> 
> 赞同：1
> 
> 时间：2012-08-14T13:41:58.900
> 
> 标签：java, jsp, servlets, response

我有以下将第三方应用程序集成到我的 java 应用程序中的场景。第三方应用程序运行在与我的 java 应用程序不同的上下文中。它提供了一个 JSP，需要使用某些参数（例如身份验证信息）调用该 JSP，并根据该参数生成 cookie 值并将其设置在标头中。我需要从我的 java 应用程序中调用此 JSP，然后使用 cookie 值从响应中检索标头，并将其设置为将在我的应用程序中创建的新 cookie。

我能够使用调用 JSP

```
response.sendRedirect("http://<host>:<port>/<context>/authn.jsp"). 
```

authn.jsp 能够检索所有发送的验证值并生成 cookie 值。然后它执行

```
response.setHeader(attr,val). 
```

但是，我不确定如何在我的 servlet 中读取此响应标头。request.sendRedirect 是正确的方法吗？我是否需要使用 HTTPURLConnection 类来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:41:04.093

您需要使用`HTTPURLConnection`来读取标题。你不能使用`response.sendRedirect(..)`. 收到标头后，您可以`response.setHeader(attr,val)`在代码中进行设置。

```
URL url = new URL("JSPURL");
URLConnection conn = url.openConnection();
for (int i = 0;; i++) {
  String headerName = conn.getHeaderFieldKey(i);
  String headerValue = conn.getHeaderField(i);
  System.out.println(headerName + "===");
  System.out.println(headerValue);
  if (headerName == null && headerValue == null) {
    break;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T18:59:28.307

如果您使用的是 Tomcat 并且两个应用程序都部署到同一个服务器实例中，那么您可以将两个 servlet 应用程序配置为接受来自彼此的传入请求。这是通过[context configuration](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Attributes)`crossContext`中的属性完成的。

然后，从您的 servlet 中，您可以`RequestDispatcher`对其他 Web 应用程序使用 a：

```
RequestDispather dispatcher = request.getRequestDispatcher("/<context>/authn.jsp");
dispatcher.forward(request, response);
// Process the headers
Enumeration<String> headerNames = response.getHeaderNames();
while(headerNames.hasMoreElements()) {
   Collection<String> values = response.getHeaders(headerNames.nextElement());
   // do whatever with the header values.
} 
```

**注意**：其他 servlet 容器具有类似的配置跨上下文功能的方法，您应该查看容器的配置文档。

# objective-c - Objective C Segues - 递归场景

> ID：11953602
> 
> 赞同：0
> 
> 时间：2012-08-14T13:42:28.477
> 
> 标签：objective-c, recursion, storyboard, scene

我有一个带有 tableview 场景的 Storyboard，它显示类别列表。这些类别包含更多子类别，甚至更多。问题是，类别的级别可能是无限的，但我不能在情节提要中真正拥有无限数量的场景。

我已设法将其缩减为 2 个相互引用的场景，但我需要知道是否有办法将其缩减为一个场景。在这个具体的项目中，这种情况至少会再出现7次，而且每次有变化都做两次是相当麻烦的。

问候， EZFrag

# java - 如何在具有多种所有者类型的实体上设计映射

> ID：11953603
> 
> 赞同：2
> 
> 时间：2012-08-14T13:42:29.977
> 
> 标签：java, mysql, hibernate

由于缺乏经验，我遇到了设计困境

我有一个名为 Server 的表。在一个专栏中，我需要持有一个外键作为该服务器的“所有者”。但是，所有者可以是供应商或客户。所以有3种可能：

1）为每种类型的所有者放置一列

```
Server_Id | Server_Address | Vendor_Id | Customer_Id 
```

2）为每种类型的所有者创建一个表

```
VendorServer_Id | Server_Address

CustomerServer_Id | Server_Address 
```

如您所见，问题是表或列的数量随着所有者类型的数量而增加。什么是常规解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:49:15.387

以下是您的方法的缺点
`Sol 1.`如果是这种情况，如果明天出现新的所有者类型，则需要创建一个新列来维护其 id。同样在所有行中，它可能是 vendor_id 或 customer_id，它们看起来不会被规范化。
`Sol 2.`需要为将来引入的新所有者类型创建一个新表。这确实很贵，但比`Sol 1`.
我建议你维护两个表如下

`Server_Detail`：

```
Server_Id | Server_Address | Owner_Id 
```

`Owner_Detail`：

```
Owner_Id | Owner_Id_Type 
```

`Owner_Id`in`Server_Detail`与in表中 `foreign key`。 您可以在代码中定义为今天和. 需要根据值来解释值。为如下 创建一个表也是明智之举`Owner_Id``Owner_Detail`

`Owner_Type``enum``Vendor``Customer``Owner_Id``Owner_Type`
`Owner_Type`

```
Owner_Id_Type | Description 
```

并介绍一个`foreign key`带`Server`表。这确保了只`Owner_Type`允许一个受限的。

# php - Codeigniter 帖子不起作用

> ID：11953607
> 
> 赞同：1
> 
> 时间：2012-08-14T13:42:34.517
> 
> 标签：php, codeigniter

这是我第一次使用 codeigniter 来构建我的学校项目。

让我直接走。

我可以得到我的 POST 请求，除了 form_upload();

这是我的示例表格：

```
<?php
echo form_open('admin/test_upload');
    echo form_input(array('name' => 'title'));?><br/><?
    echo form_upload(array('name' => 'file'));
    echo form_submit(array('name' => 'submit', 'value' => 'submit'));
echo form_close();
?> 
```

这是我的控制器：

```
function test_upload(){
    $data['header'] = "TEST UPLOAD";
    var_dump($_POST) ; //basically, this is function echoes back the post array.
    $this->load->view('admin/dashboard_view', $data);
} 
```

这是输出

```
array(2) {
["title"]=>
string(3) "asd"
["submit"]=>
string(6) "submit"
}

//The ["file"] is missing.... wHAT!?> 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:45:33.497

文件上传需要有一个`enctype="multipart/form-data"`表单标签，所以你应该使用它来打开表单：

```
echo form_open_multipart('admin/test_upload'); 
```

此外，正如其他人所提到的，上传的文件将在`$_FILES`而不是`$_POST`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:47:09.257

您正在寻找错误的超全局 ( `$_POST`)。检查`$_FILES`并确保表单`enctype`是“多部分/数据”。

# javascript - jQuery 可调整大小移动我的 div

> ID：11953608
> 
> 赞同：0
> 
> 时间：2012-08-14T13:42:35.137
> 
> 标签：javascript, jquery, html, resizable

我正在尝试使用 3 个可调整大小的 div 构建一个页面。第一个在左边，叫做“middle_explorer” 第二个在底部，叫做“middle_console” 最后一个在左边，叫做“middle_info”

问题是，当我尝试调整第二个和最后一个的大小时，它们仍然不在应有的位置...自己看一下[这里](http://atomcodepad.com/newui/)

这是我的页面：

```
<header>
        <div id="header_logo">header_logo</div>
        <div id="header_controls">header_controls</div>
    </header>
    <section id="middle">
        <div id="middle_controls">middle_controls</div>
        <div id="middle_workarea">
            <div id="middle_explorer" class="sidebar">middle_explorer</div>
            <div id="middle_main">
                <div id="middle_codecontainer">middle_codecontainer</div>
                <div id="middle_console">middle_console</div>
            </div>
            <div id="middle_info" class="sidebar">middle_info</div>
        </div>
    </section>
    <footer>
        <div id="footer_date"></div>
    </footer> 
```

一些css属性是由js设置的，例如#middle_main的宽度。这是我的CSS：

```
#middle_info{
    width: 150px;
    max-width: 250px;
    float: left;
}
#middle_codecontainer{
    /* Width is determined by acpUi.js */
}
#middle_console{
    width: 100%;
    height: 25px;
    background: white;
    padding: 2px;
}
#middle_main{
    /* Width is determined by acpUi.js */
    height: 100%;
    float: left;
    background-image: url('res/bkg02.png');
    background-attachment:fixed;
}
#middle_workarea{
    /* Height is determined by acpUi.js */
}
#middle_explorer{
    width: 200px;
    max-width: 400px;
    float: left;
} 
```

这是我刚刚谈论的代码：

```
/* Adjust the #middle height according to the header and the footer */
function middleHeight () {
    $("#middle").height($(document).height() - $("header").height() - $("footer").height());
}
/* Adjust the #middle_workarea height according to the #middle_controls div height (37px) */
function workareaHeight () {
    $("#middle_workarea").height($("#middle").height() - 37);
}
/* Adjust the #code_main width according to the #middle_explorer, #middle_info */
function mainWidth () {
    var width = ($("#middle_workarea").width() - $("#middle_explorer").width() - $("#middle_info").width());
    $("#middle_main").width(width);
}
/* Adjust the #middle_codecontainer height */
function codecontainerHeight (){
    var height = ($("#middle_workarea").height() - $("#middle_console").height());
    $("#middle_codecontainer").height(height);
} 
```

这是我用来使我的 div 可调整大小的代码：

```
$("#middle_explorer").resizable({ handles: "e"});
$("#middle_info").resizable({ handles: "w"});
$("#middle_console").resizable({ handles: "n", maxHeight: $("#middle_codecontainer").height()}); 
```

如您所见，#middle_explorer 在调整大小时保持在左侧，但另外两个没有，我真的不明白我做错了什么。

# c# - 使用 ConnectedComponentsLabeling 获取连接项

> ID：11953613
> 
> 赞同：0
> 
> 时间：2012-08-14T13:43:06.813
> 
> 标签：c#, image-processing, aforge, blobs

有没有办法使用 aforge.net 中的连接组件标签获取连接对象？我知道如何标记对象，但是有没有一种方法可以遍历特定图像中的每个连接的组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:24:06.633

正如我发现的那样，您可以按特定顺序对对象进行排序，然后遍历它们。这已经在文档中提供

# paypal - 多个卖家的 PayPal 支付链接加密

> ID：11953614
> 
> 赞同：1
> 
> 时间：2012-08-14T13:43:07.027
> 
> 标签：paypal, paypal-ipn, paypal-sandbox

因此，对于我正在处理的项目，客户希望通过 PayPal 直接向在网站上销售的人付款（我们将卖家的 paypal 电子邮件存储在我们的数据库中针对用户）

似乎很容易开始 - 一个指向 paypal _cart 端点的链接，通过我的退货 url 传递卖家的 paypal 电子邮件，获取 IPN 通知并更新数据库，以便我们知道付款成功。

问题是这是不安全的，因为任何人都可以在我的网站上使用 IPN 回调 url，因此为了解决这个问题，您应该使用证书加密所有内容。

我的问题是，证书是每个卖家帐户的 - 而不是每个网站，所以我必须要求我的卖家完成证书生成，将公钥上传到贝宝，并将私钥上传到我的客户网站。

还是我做错了什么？还有比这更好的解决方案吗？我知道从一个网站结帐向许多不同的贝宝电子邮件发送付款可能不是正常功能。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T17:26:37.280

您的用例正是 PayPal 目前提供自适应链式/并行支付的原因，您可以是 API 调用者，但接收者可以是完全不同的人。
此外，使用此设置还可以让您分享最终销售的份额（例如，将接收者设置为 90% 的主要接收者，并将自己设置为次要接收者，并获得 10% 的销售分成）。

查看[https://www.x.com/developers/paypal/products/adaptive-payments](https://www.x.com/developers/paypal/products/adaptive-payments)了解更多信息。

**平行支付**
![自适应并行支付](../Images/98e2efe6ac42826a546e45c7d20d6146.png)

**连锁支付**
![自适应链式支付](../Images/36bf7856cb5cc0abf588d27ba118a706.png)

另请查看[Introducing Adaptive Payments和我在](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro)[Multiple PayPal Transactions 中的](https://stackoverflow.com/questions/10109007/multiple-paypal-transactions-at-once/10116464#10116464)回答

# javascript - JavaScript 对象实例委托/转发

> ID：11953617
> 
> 赞同：5
> 
> 时间：2012-08-14T13:43:16.570
> 
> 标签：javascript, node.js

我想在这里变得聪明。假设我编写了一个类，它包装了某个其他类的实例，覆盖了一个或两个方法，但将所有其他方法调用直接传递给了委托对象。

```
function Wrapper(delegate) {
  this._delegate = delegate;
}

Wrapper.prototype.example = function() {
  console.log('Doing something in wrapper');
  this._delegate.example();
}; 
```

如果委托有 100 个其他方法（夸大，授予），远没有在我的 Wrapper 中为每个方法定义一个方法，那么在 JavaScript 中是否有一种优雅的方法来做到这一点？

我只考虑了实际实例上的方法调配/代理，即

```
Wrapper.wrap = function(delegate) {
    var example = delegate.example;
    delegate.example = function() {
      example.call(this, arguments);
      console.log('Forwarded an overridden method call!');
    };
    return delegate;
}; 
```

但如果可以避免的话，我宁愿不修改实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:59:51.750

在 javascript 中扩展对象的一般方法不是按照您所做的方式包装它，这需要您将每个方法调用转发到实际对象。因此，除非您有特定的理由被迫这样做，否则最好向现有对象添加新方法和属性。然后，所有现有的方法和属性“正常工作”，而无需您做任何特别的事情。如果您想替换某些方法，您可以提供自己的实现，但所有以前存在的方法都将继续工作。

假设您有一个名为的现有对象`foo`，并且您想要覆盖其上命名`create()`的一个方法。你可以这样做：

```
foo.origCreate = foo.create;
foo.create = function(x, y) {
    // do whatever you want here in the override
    // including calling the origCreate method if you want
} 
```

# python - PyInstaller“ImportError：没有名为 Pyinstaller 的模块”

> ID：11953618
> 
> 赞同：11
> 
> 时间：2012-08-14T13:43:18.890
> 
> 标签：python, pyinstaller

这是我运行 python configure.py 时生成的代码。

```
dan@Q430-Q530:~/pyinstaller-2.0/PyInstaller$ python configure.py
Traceback (most recent call last):
  File "configure.py", line 28, in <module>
    from PyInstaller import HOMEPATH, PLATFORM
ImportError: No module named PyInstaller 
```

因此，目前，由于缺少名为... PyInstaller 的模块，我什至无法运行 PyInstaller。这是 PyInstaller 2.0，您可以分别[在此处](https://i.imgur.com/94k1d.png)和[此处](https://i.imgur.com/bEyVM.png)找到 /pyinstaller-2.0 和 /pyinstaller-2.0/PyInstaller 目录内部的一些屏幕。

这里有人知道发生了什么吗？我尝试将 /pyinstaller-2.0 目录中的 pyinstaller.py 文件复制到 /pyinstaller-2.0/PyInstaller 目录中，但我没有运气。

这可能会是一些非常容易解决的问题，但是......这让我很难过。如果需要更多信息，请询问，我会尽力提供。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T18:38:27.713

使用 PyInstaller 2.0，您不需要运行配置或 pyinstaller 文件。（阅读安装文件附带的 PyInstaller 2.0 文档。）

构建您的项目；在 /your/path/to/pyinstaller/ 目录中，只需运行：

“python pyinstaller.py [选择] yourprogram.py”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T15:22:23.787

我不认为`configure.py`,`makespec.py`和`build.py`文件应该直接在 PyInstaller 2.0 中运行。

在下载`pyinstaller.py`中，顶层有一个文件 - 运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:05:22.793

看起来`configure.py`期望`.`在您的[PYTHONPATH](http://docs.python.org/using/cmdline.html#envvar-PYTHONPATH)上。您应该能够`python`在`/pyinstaller-2.0`和中运行`import PyInstaller`。这应该像在脚本中那样失败。您可以`.`在您的环境变量中添加`~/.bashrc`（确保获取它或启动新的终端会话以获取更改）。这将是这样的：

```
export PYTHONPATH=.:$PYTHONPATH 
```

或者，您可以添加到配置脚本的顶部：

```
import sys
sys.path.append('.') 
```

无论哪种方式，您都应该能够在其中运行脚本`/pyinstaller-2.0`并导入`PyInstaller`模块。

# visual-studio-2010 - 使用 Visual Studio 2010 运行选择性单元测试

> ID：11953621
> 
> 赞同：0
> 
> 时间：2012-08-14T13:43:21.643
> 
> 标签：visual-studio-2010, vs-unit-testing-framework

我刚刚开始研究一个具有现有单元测试的现有项目。单元测试需要一分钟多的时间来构建和运行。

我有一种方法可以选择性地运行单元测试，这样我就可以运行自己的单元测试，但没有过去进行的单元测试？

-谢谢

# c++ - 重载流插入运算符？

> ID：11953629
> 
> 赞同：2
> 
> 时间：2012-08-14T13:43:32.487
> 
> 标签：c++, operator-overloading, iostream

我正在用 c++ 制作一个三维矢量类（称为`Vector3`）。现在，我正在尝试重载流插入运算符 ( `<<`)，以便我可以一次直接打印所有向量的组件。[我从MSD](http://msdn.microsoft.com/en-us/library/1z2f6c2k%28v=vs.80%29.aspx)复制了 sintax ，但出现 3 个错误。

> 错误：将“const Vector3”作为“float Vector3:: **getX()** ”的“this”参数传递会丢弃限定符 [-fpermissive]
> 错误：将“const Vector3”作为“float Vector3:: **getY()** ”的“this”参数传递丢弃限定符 [-fpermissive]
> 错误：将 'const Vector3' 作为 'float Vector3:: **getZ** ()' 的 'this' 参数传递丢弃限定符 [-fpermissive]

^(（差异以粗体标记）)

在`Vector3.h`public 下，我输入了这个函数声明：

```
friend ostream& operator<<(ostream &os, const Vector3 &vector); 
```

在`Vector3.cpp`中，我实现了它：

```
ostream& operator<<(ostream& os, const Vector3& vector)
{
    os << "(" << vector.getX() << ", " << vector.getY() << ", " << vector.getZ() << ")" << endl;
    return os;
} 
```

`(x, y, z)`它应该根据 x、y 和 z 变量打印出类似的内容。

附带说明一下，`vector.getX()`行不应该使用`->`点而不是点，因为向量对象是地址指针吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T13:46:02.207

为您的函数添加`const`限定符。`get...`

```
class Vector3
{
    public:
        float getX() const {return x;};
}; 
```

一个-qualified 函数只是意味着您可以在类的实例上`const`调用它。`const`在这里，吸气剂不会改变任何东西。但是，如果您不指定，编译器不知道，因此不允许调用可能会更改`const`变量上的某些内容的函数。

[您可以在此处](http://www.parashift.com/c++-faq/const-correctness.html)阅读有关`const`- 正确性的信息。

并且点表示法是正确的，`vector`不是*指针*，而是*引用*（即其他名称的另一个名称`Vector3`。我认为这种`&`表示法对于初学者来说可能有点混乱。粗略地说：当你将它应用于变量时，它需要它的地址，当它是类型的一部分时，表示该类型是一个引用。例如，请参见[此处](http://www.dgp.toronto.edu/~patrick/csc418/wi2004/notes/PointersVsRef.pdf)或[此处](http://www-numi.fnal.gov/offline_software/srt_public_context/WebDocs/Companion/cxx_crib/pointers.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T13:48:08.307

我怀疑您没有将 getX、getY 和 getZ 函数声明为 const。编译器不会让你使用它们，因为它不能确定它们不会改变对象的状态。

您应该能够将他们的声明更改为以下形式：

```
float Vector3::getX() const 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:47:15.777

```
float Vector3::getX() 
```

必须改为

```
float Vector3::getX() const 
```

# jquery - 使用 JQuery .hide() 函数进行 URL 查询不起作用。为什么？

> ID：11953632
> 
> 赞同：1
> 
> 时间：2012-08-14T13:43:39.633
> 
> 标签：jquery, url, hide

*在我完全理解我在问什么后，我会更新这个问题的标题*

我正在使用 vimeo api 使用 JSON 显示视频数组并将标签用作类。这工作正常。

但是，在脚本的末尾，我想隐藏与 url 中的查询不匹配的任何元素。

```
var query = location.href.split('/#/').pop().split('/').join(" "); 
```

我从 url (http://website.com/link/to/page/#/tag/tag/tag/tag = "tag tag tag tag") 获取查询，然后对照每个结果项的类检查它。

```
// Find Parent & checks for query classes
var thisTile = tile.parent().parent(),
    matchesClass = thisTile.hasClass(query);

// If does hot have query as class then hides
if (matchesClass === false) {
    $(this).hide();
} 
```

**注意：如果没有查询类，除了应该隐藏结果项的部分之外，一切正常。**

JSFiddle：http: [//jsfiddle.net/JamesKyle/Rt4pt/](http://jsfiddle.net/JamesKyle/Rt4pt/)

测试查询：http: [//jsfiddle.net/JamesKyle/Rt4pt/show/#/basketball](http://jsfiddle.net/JamesKyle/Rt4pt/show/#/basketball)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:50:50.570

这是一个 Javascript 对象（来自 $.getJSON），而不是 HTML DOM 元素。

```
console.log($(this));

Object
accepts: Object
async: true
cache: false
contentType: "application/x-www-form-urlencoded; charset=UTF-8"
contents: Object
converters: Object
crossDomain: true
dataType: "json"
dataTypes: Array[2]
flatOptions: Object
global: false
hasContent: false
isLocal: false
jQuery1800318833630066365_1344952134351: true
jsonp: "callback"
jsonpCallback: undefined
processData: true
responseFields: Object
success: function (json) {
type: "GET"
url: "http://vimeo.com/api/v2/video/47175713.json?callback=jQuery1800318833630066365_1344952134351&_=1344952134490"
xhr: function createStandardXHR() {
__proto__: Object 
```

我发现通过添加两个调试语句：http: [//jsfiddle.net/Rt4pt/6/](http://jsfiddle.net/Rt4pt/6/)

我不确定你想隐藏什么，但试试这个

```
$('#' + json[0].id ).hide(); 
```

# php - Wordpress“阅读更多”按钮

> ID：11953636
> 
> 赞同：1
> 
> 时间：2012-08-14T13:44:03.013
> 
> 标签：php, html, css, wordpress

我正在写我的 Wordpress 博客。

```
 the_excerpt(); & 
<a href="<?php the_permalink(); ?>">Read more</a> 
```

如果我给 Wordpress 标准可以添加像“阅读更多”这样的摘录帖子。我的代码如下所示：

```
<a href="<?php the_permalink() ?>
   "rel="bookmark" title="Read more on 
   <?php the_title_attribute(); ?>"><?php the_title(); ?></a> 
```

我的问题是如何在阅读更多内容中添加图标？有什么插件吗？或者我们可以手动添加它吗？请帮助我找到解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T13:53:11.200

您可以像这样向链接添加一个类；

```
 <a class="readmore" href="<?php the_permalink() ?>" rel="bookmark" title="Read more on <?php the_title_attribute(); ?>"></a> 
```

然后您将使用 CSS 将您的图标应用到该类，如下所示；

```
a.readmore {
width: 20px;
height: 20px
display: block;
background: url(../images/myicon.png) no-repeat 0 0;
} 
```

这些是示例，您可以根据相对于样式表的位置更改图像文件夹的 url 路径，然后上传您的图标。

希望这可以帮助。

# sql - 根据另一个表中的条件更新表

> ID：11953651
> 
> 赞同：0
> 
> 时间：2012-08-14T13:44:53.600
> 
> 标签：sql, sql-server-2008

我有一张桌子`ATMStatusHistory`。我想要一个`IF`条件，即如果`Resolved`特定票证的所有列值都是 1，则更新`Ticket`表以`Closed = 1`包含与该票证相关的所有代码。

```
Code    RawFeed   Resolved  Ticket
2341283 2350426   0         205656
2341460 2350603   1         205656
2341597 2350740   1         205656
2341689 2350832   1         205656
2341825 2350968   0         205656 
```

我写了一个`IF`条件，但它不起作用：

```
 If Not Exists (Select * From ATMStatusHistory Where Ticket = @OriginalTicket
         AND Resolved=0 And RawFeed = 0)
        {
Insert InTo TicketFollowUp(Ticket, FollowUpText, FollowUpBy, FollowUpOn) 
  Select Code, Comments, UpdatedBy, UpdatedOn 
  From Ticket Where Code = @OriginalTicket                  

          Update Ticket Set Closed=1, ClosedOn=GetDate(), UpdatedBy=0, 
           UpdatedOn=GetDate(), Comments=' Ticket Closed by System as all Faults cleared. ' 
           Where Code = @OriginalTicket         
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:52:42.913

添加插入语句的新要求：

```
IF NOT EXISTS 
(
  SELECT 1 FROM dbo.ATMStatusHistory 
    WHERE Ticket = @OriginalTicket
    AND Resolved = 0 AND RawFeed = 0
)
AND EXISTS
(
  -- want to be sure we only "close" a ticket once
  SELECT 1 FROM dbo.Ticket
    WHERE Ticket = @OriginalTicket
    AND Closed = 0
)
BEGIN
  INSERT dbo.TicketFollowUp(Ticket, FollowUpText, FollowUpBy, FollowUpOn) 
    SELECT Code, Comments, UpdatedBy, UpdatedOn
    FROM dbo.Ticket WHERE Code = @OriginalTicket;

  UPDATE dbo.Ticket
   SET Closed   = 1, 
      ClosedOn  = GETDATE(), 
      UpdatedBy = 0, 
      UpdatedOn = GETDATE(),
      Comments  = ' Ticket Closed by System as all Faults cleared. ' 
  WHERE Code = @OriginalTicket;
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:19:13.013

你可以试试这个演示：

```
CREATE TABLE #ATMStatusHistory  (Code  INT,  RawFeed  
    INT, Resolved INT, Ticket INT)
INSERT #ATMStatusHistory VALUES
(2341283 ,2350426   ,0         ,205656),
(2341460 ,2350603   ,1         ,205656),
(2341597 ,2350740   ,1         ,205656),
(2341689 ,2350832   ,1         ,205656),
(2341825 ,2350968   ,0         ,205656)

CREATE TABLE #Ticket (Code INT, Closed INT, ClosedOn 
    DATETIME, UpdatedBy INT, UpdatedOn DATETIME, 
    Comments VARCHAR(1000))
INSERT #Ticket VALUES
(2341283 ,1, '20120101', 1, '20120101', 'test'),
(2341460 ,1, '20120101', 1, '20120101', 'test'),
(2341597 ,1, '20120101', 1, '20120101', 'test'),
(2341689 ,1, '20120101', 1, '20120101', 'test'),
(2341825 ,1, '20120101', 1, '20120101', 'test')

DECLARE @OriginalTicket INT = 205656

UPDATE  #Ticket
SET     Closed = 1,
        ClosedOn = GETDATE(), 
        UpdatedBy = 0,
        UpdatedOn = GETDATE(),
        Comments = 'Ticket Closed by System as all Faults cleared.'
FROM    #Ticket a
JOIN    #ATMStatusHistory b ON
        b.Code = a.Code
        AND 1 = ALL(
            SELECT  x.Resolved 
            FROM    #ATMStatusHistory x 
            WHERE   x.Ticket = @OriginalTicket
            AND     x.RawFeed <> 0      
        )

SELECT  *
FROM    #Ticket

DROP TABLE #ATMStatusHistory
DROP TABLE #Ticket 
```

# asp.net - 是否有任何用于休息 api 的 ASP MVC 3 框架？

> ID：11953654
> 
> 赞同：0
> 
> 时间：2012-08-14T13:45:06.163
> 
> 标签：asp.net, asp.net-mvc-3, rest, frameworks

我一直在网上进行一些挖掘，但我发现的要么是不完整的指南，要么是自己完成的指南，要么是 MVC 第一版的指南。

是否有任何获取 RESTful API 的框架？

如果没有，是否有为所有模型添加全局解决方案（扩展模型或 MVC 自身路由），因为我读过的内容涉及将 REST 逻辑添加到应用程序的每个模型/控制器（哪个不看起来不是采用 REST 的好解决方案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:03:25.677

[MVC3 的 WCF Web API](http://wcf.codeplex.com/wikipage?title=Getting%20started%3a%20Building%20a%20simple%20web%20api)

[向 MVC3 应用程序添加 WebAPI 支持](http://www.dotnetcurry.com/ShowArticle.aspx?ID=788)

这两个都应该让您了解所涉及的内容。

您可以开始使用 MVC4 了吗？

# javascript - 在嵌入标签中开始/暂停音频？(IE8+)

> ID：11953656
> 
> 赞同：8
> 
> 时间：2012-08-14T13:45:13.303
> 
> 标签：javascript, html, internet-explorer, audio, embed

我正在为一个必须播放一些背景音乐的小型网络游戏创建页面。这些页面应该与大多数桌面浏览器兼容，包括 IE8（但我们可以忽略移动浏览器）。

当然我想让用户停止音乐。这就是棘手的地方。

这是我目前使用的（使用 jQuery）：

```
<audio id="main_audio" autoplay="autoplay" preload="auto" loop="loop">
    <source src="sounds/bgmusic.mp3" type="audio/mpeg" />
    <source src="sounds/bgmusic.ogg" type="audio/ogg" />
    <embed hidden="true" autostart="true" loop="true" src="sounds/bgmusic.mp3" />
</audio>
<div id="controls" class="controls">
    <a id="playpause" class="play">Play/Pause</a>
</div>
<script>
    function isPlaying(audio) {return !audio.paused;}
    var a = document.getElementById('main_audio');
    $('#playpause').on('click', function() {
        if (isPlaying(a)) {
            a.pause();
        } else {
            a.play();
        }
    });
</script> 
```

这适用于所有浏览器，但 IE。（我在 Windows XP 上，所以目前在 IE8 上进行测试。）在 IE8 上，音频开始播放（这很好），但控件不执行任何操作，因此无法停止音乐（并重新启动它）。

我怎样才能使这个脚本也适用于 IE？换句话说，与嵌入标签交互（但只在 IE 中）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T15:39:21.977

尝试下一个代码：

```
<audio id="main_audio" autoplay="autoplay" preload="auto" loop="loop">
    <source src="sounds/bgmusic.mp3" type="audio/mpeg" />
    <source src="sounds/bgmusic.ogg" type="audio/ogg" />
    <embed id="main_audio_ie8" hidden="true" autostart="true" loop="true" src="sounds/bgmusic.mp3" />
</audio>
<div id="controls" class="controls">
    <a id="playpause" class="play">Play/Pause</a>
</div>
<script>
    var isPlaying = function(audio) {return !audio.paused;}
    var a = document.getElementById('main_audio');
    if(!(a.play instanceof Function)){
        a = document.getElementById('main_audio_ie8');
        isPlaying = function(audio) {return audio.playState==2;}
    }
    $('#playpause').on('click', function() {
        if (isPlaying(a)) {
            a.pause();
        } else {
            a.play();
        }
    });
</script> 
```

另一种变体（如果系统上存在 WMPlayer.OCX，则代码必须工作；在 Win2K+IE6SP1+WMP7、WinXP+IE6SP1+WMP9、WinXP+IE8+WMP11 上检查）：

```
<audio id="main_audio" autoplay="autoplay" preload="auto" loop="loop" volume="1.0">
    <source src="sounds/bgmusic.mp3" type="audio/mpeg" />
    <source src="sounds/bgmusic.ogg" type="audio/ogg" />
    <object id="main_audio_ie8" classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6" style="display:none;"> 
        <param name="URL" value="sounds/bgmusic.mp3" />
        <param name="uiMode" value="invisible" /> 
        <param name="autoStart" value="true" />
        <param name="volume" value="100" />
        <param name="playCount" value="2147483647" /> <!-- (Int32) 2^31-1==2147483647 - maximum allowed count (for 1 second length audio is equals to 68+ years) -->
    </object> 
</audio>
<div id="controls" class="controls">
    <a id="playpause" class="play">Play/Pause</a>
</div>
<script type='text/javascript'>
window.onload=function(){
    var isPlaying,a=document.getElementById('main_audio');
    if(a.play instanceof Function)isPlaying=function(audio){return !audio.paused;};
    else{
        a=document.getElementById('main_audio_ie8');
        isPlaying=function(audio){return audio.playState==3;};
        a.play=function(){this.controls.play();}
        a.pause=function(){this.controls.pause();}
    }
    document.getElementById('playpause').onclick=function() {
        if (isPlaying(a)) {
            a.pause();
        } else {
            a.play();
        }
    };
};
</script> 
```

# android - 如何从“android”控制 USB HID 键盘的大写锁定？

> ID：11953660
> 
> 赞同：0
> 
> 时间：2012-08-14T13:45:20.157
> 
> 标签：android, keyboard, usb, controls

我有一个连接到我的 android 设备的 usb hid 键盘。现在我有一种单向通信，从键盘到安卓。但我正在寻找从安卓设备控制键盘的相反方式。现在我找到[了一种](http://www.developerfeed.com/awt/snippet/programmatically-toggle-function-keys)在java中控制大写锁定、数字锁定和滚动锁定的方法。
但我不知道如何为 android 做这件事。

我正在寻找的不是改变输入法。所以[这个](https://stackoverflow.com/questions/7746027/can-i-control-the-keyboard-from-code-on-android-in-particular-the-caps-lock)或[那个](https://stackoverflow.com/questions/3821440/control-caps-lock-of-android-softkeypad)解决方案对我不起作用。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:20:57.323

如果你正在开发一个带有 USB Host API 的 Android 版本（听起来像你），你应该能够编写一些代码来临时从内核中获取键盘接口，发送适当的数据来设置大写锁定然后释放接口，以便 HID 驱动程序将其拾取。

# robots.txt - 使 PHP Web Crawler 尊重任何网站的 robots.txt 文件

> ID：11953667
> 
> 赞同：0
> 
> 时间：2012-08-14T13:45:57.287
> 
> 标签：robots.txt, robot

我已经开发了一个网络爬虫，现在我想尊重我正在爬取的网站的 robots.txt 文件。

我看到这是 robots.txt 文件结构：

```
User-agent: *
Disallow: /~joe/junk.html
Disallow: /~joe/foo.html
Disallow: /~joe/bar.html 
```

我可以逐行阅读，然后使用带空格字符的爆炸作为分隔符来查找数据。

有没有其他方法可以加载整个数据？

这种文件是否有一种语言，就像 XPath 一样？

还是我必须解释整个文件？

欢迎任何帮助，甚至链接，如果找到重复...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:49:14.003

结构非常简单，所以你能做的最好的事情可能就是自己解析文件。我会逐行阅读，如您所说，查找诸如 User-agent、Disallow 等关键字。

# android - android 3.1中的横向方向

> ID：11953669
> 
> 赞同：0
> 
> 时间：2012-08-14T13:46:08.790
> 
> 标签：android, android-orientation

应用程序在 android 3.2 中运行良好，但在 android 3.1 中无法运行

我的应用程序处于横向模式，我有明显的说法

```
 <activity
             android:name=".GameActivity"
             android:screenOrientation="landscape"
             android:configChanges="orientation|keyboardHidden"
       > 
```

并覆盖了我在横向模式下设置的 onConfigchanges。

```
@Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);

        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    } 
```

现在的问题是当我在 3.1 中运行我的应用程序时，发生了一些奇怪的问题。当我按下主屏幕时..使其处于 potrait 模式并再次返回时，我的应用程序启动了活动，但显示了我当前活动的半屏和其他 isingleTop 活动。

我当前活动的半屏和旧活动的顶部

很奇怪，我不知道为什么会这样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:13:12.000

请参阅有关[android:configChanges](http://developer.android.com/guide/topics/manifest/activity-element.html#config)的有关 value的文档`screenSize`。

> 当前可用的屏幕尺寸已更改。这表示当前可用尺寸相对于当前纵横比的变化，因此当用户在横向和纵向之间切换时会发生变化。但是，如果您的应用程序以 API 级别 12 或更低级别为目标，那么您的 Activity 始终会自行处理此配置更改（此配置更改不会重新启动您的 Activity，即使在 Android 3.2 或更高版本的设备上运行时也是如此）。

所以在 android 3.2 setting:`android:configChanges="orientation"`被有效地忽略，因为 screenSize 导致活动的重新创建。在 android 3.1 上，当方向更改时，您会阻止重新创建 Activity。
所以删除`orientation`价值应该没问题，显然自动重新创建活动对你有好处。或者增加`screenSize`价值并为两个版本中都存在相同的错误感到高兴。

这是 android 的一种有趣的错误，即在不同方向的活动之间切换会导致具有固定方向的活动的配置发生变化。

# c# - 仅在富文本框中段落的第二行缩进（c#）

> ID：11953670
> 
> 赞同：2
> 
> 时间：2012-08-14T13:46:10.337
> 
> 标签：c#, winforms, richtextbox

我怎样才能只在第二行缩进，成为段落第一个单词下的空格。
像这样：
![在此处输入图像描述](../Images/791dfbd2b5d74a640e147c431febdd07.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T18:04:37.123

如果您可以将每一行读入一个数组，则遍历该数组，如果 index = 1 然后将“\t”添加到行的开头，然后将其添加到输出字符串。让我们看看我是否可以写一个例子。

假设您已经将每一行读入 String[] 行。

```
String[] lines = readFromTextFileLineByLine();
String output = "";
int index = 0;
foreach(String line in lines)
{
    if(index==1)
        line = "\t" + line;
    output += line;
    index++;
} 
```

我希望这有帮助。

现在对于richtextbox 中的每个段落都会有所不同。也许你可以用“\n”分割文本，而不是逐行读取文件，然后运行它来改变你的输出。但是，您会遇到新行出现在哪里以及文本框的宽度有多大的问题。

# spring - 无法使用 spring 获得 eclipselink 的 EntityManager 的活动会话

> ID：11953673
> 
> 赞同：3
> 
> 时间：2012-08-14T13:46:12.533
> 
> 标签：spring, persistence, jpa-2.0, eclipselink, aop

我有一个负责执行存储过程的类，当我使用 JTA 时它工作正常......但是由于我在重新部署时遇到了一些问题，我删除了 JTA，并且我正在使用带有 spring 的本地实体管理器：

```
 <bean id="entityManagerFactoryErp" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="erpPU"/>
</bean>
<bean id="entityManagerErp" class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
    <property name="entityManagerFactory" ref="entityManagerFactoryErp"/>
</bean> 
```

现在，当我尝试获取活动会话时，我得到了 NullPointerException：

```
public class ExecutadorProcedimentoArmazenado extends BaseDao implements IExecutadorProcedimentoArmazenado {

    public boolean executar(String nomeProcedimento) {
        DataReadQuery query = configurarQuery(nomeProcedimento);
        registro = executarProcedimento(query);
        int resultado = Integer.parseInt(recuperarValorDeSaida("RESULTADO"));
        mensagem = recuperarValorDeSaida("MSGERRO");
        return resultado == 0;
    }
    .
    .
    private Session configurarSessao() {
        JpaEntityManager jpaEntityManager = JpaHelper.getEntityManager(entityManager);
        return jpaEntityManager.getActiveSession();
    }
    .
    .
    .
} 
```

**添加**

问题可能是 entityManager 没有事务。我正在尝试使用 spring aop 创建事务，它适用于所有其他类，但不适用于接口 IExecutadorProcedimentoArmazenado：

```
<bean id="entityManagerFactoryErp" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="erpPU"/>
</bean>

<bean id="entityManagerErp" class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
    <property name="entityManagerFactory" ref="entityManagerFactoryErp"/>
</bean>

<bean id="transactionManagerErp"
      class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactoryErp"/>
</bean>

<tx:advice id="txExecutadorProcedimento" transaction-manager="transactionManagerErp">
    <tx:attributes>
        <tx:method name="executar" rollback-for="Exception" propagation="REQUIRED"/>
    </tx:attributes>
</tx:advice>

<aop:config>
    <aop:pointcut id="operacoesExecutadorProcedimento" expression="execution(* com.hrgi.persistencia.IExecutadorProcedimentoArmazenado.executar(..))"/>
    <aop:advisor advice-ref="txExecutadorProcedimento" pointcut-ref="operacoesExecutadorProcedimento"/>
</aop:config> 
```

有人可以解释一下为什么我不能为我调用存储过程获取会话吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T16:57:17.577

这样做的弹簧方式是简单地注入`EntityManager`注释`@PersistenceContext`并返回委托......

```
public class ExecutadorProcedimentoArmazenado extends BaseDao implements IExecutadorProcedimentoArmazenado {

  @PersistenceContext
  private EntityManager entitymanager

  private Session configurarSessao() {
    return ((JpaEntityManager) entityManager.getDelegate()).getActiveSession();
  } 
```

如果活动会话为空，则表示**没有活动会话**。我在事务之外对此进行了测试，它给出了 NPE。在事务中，上面的代码有效。使用 Spring 3.1 / Eclipselink 2.0 测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:12:41.000

在这种情况下，您的容器是 Spring，并且可能会从 entityManager.getDelegate() 返回 null，从而导致 jpaEntityManager.getActiveSession() 上出现 NPE。尝试启动事务，或者直接从未包装的 EclipseLink EntityManagerFactory 获取 EntityManager。

# android - 如何使用 ADT 20.0.X 和 SDK r20 在 eclipse 中从现有源创建一个 android 项目

> ID：11953681
> 
> 赞同：1
> 
> 时间：2012-08-14T13:46:38.060
> 
> 标签：android, eclipse

晕，那里，请任何人帮助我如何从现有源代码在 Eclipse 中创建一个新的 android 项目，我的 Eclipse 配置了 ADT 20.0.2 和 SDK r20，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T13:48:23.790

文件->新建->项目...->Android选项卡->“来自现有代码的Android项目”

# android - 如何让我的应用程序将数据保存到 Kindle Fire 存储？

> ID：11953683
> 
> 赞同：0
> 
> 时间：2012-08-14T13:46:59.220
> 
> 标签：android, sd-card, kindle-fire

目前，我正在开发一个将文件下载并保存到 /sdcard 的应用程序。但是我有一个检测当前 sd 卡状态的功能说当我在 Kindle Fire 模拟器上运行它时没有检测到 sd 卡。我的问题是：如何将这些文件保存到 Kindle Fire 的存储中，因为它似乎没有 /sdcard 目录可以保存？

# javascript - 如何遍历页面上的所有复选框？

> ID：11953684
> 
> 赞同：2
> 
> 时间：2012-08-14T13:47:01.533
> 
> 标签：javascript, jquery

如何使用 JQuery 遍历页面上的所有复选框？

即我有`checkboxes`上面的那些......

```
<div>
<input checked="checked" type="checkbox" name="option_1" id="checkbox_1" value="1" />35 MM                  
<input checked="checked" type="checkbox" name="option_2" id="checkbox_2" value="2" />  DIGITAL                    
<input type="checkbox" name="option_3" id="checkbox_3" value="3" /> 3D DIGITAL
</div> 
```

我用过吗

```
 $('input[id^="checkbox_"]').each(function() {

 }); 
```

这是对的吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T13:50:24.747

```
$("input[type='checkbox']").each(function(){
  var name = $(this).attr('name'); // grab name of original
  var value = $(this).attr('value'); // grab value of original
  var ischecked = $(this).is(":checked"); //check if checked
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T13:57:35.073

您可以使用它来遍历复选框：

```
$("input:checkbox").each(function() {
    alert($(this).val());
   }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T13:48:54.537

jQuery supports a selector `:checkbox` that is just for selecting checkboxes on the page so if you want all checkboxes on the page that's the simplest way to do it:

```
$(":checkbox").each(function(index, element) {
    // put your code here
}); 
```

In the [jQuery doc for `:checked`](http://api.jquery.com/checkbox-selector/), they recommend that this selector might perform slightly faster:

```
$("input[type='checkbox']").each(function(index, element) {
    // put your code here
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T13:48:44.413

```
$('input[type="checkbox"]').each(function() {
  ...
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-14T13:49:06.820

It seem alright but you can add further type check to ensure not other control type with mataching id comes in selector.

```
$('input[type=checkbox][id^="checkbox_"]').each(function() {

 }); 
```

# jquery - cfcomponent 中的 cfquery 未在 Coldfusion 9 中返回最新结果

> ID：11953688
> 
> 赞同：1
> 
> 时间：2012-08-14T13:47:16.000
> 
> 标签：jquery, coldfusion, cfc, cfquery

我是 ColdFusion 的新手。我遇到了coldfusion组件的问题。我有一个功能，我通过 jquery ajax 调用调用 cfcomponent 函数，并且在 cffunction 中我正在执行查询并以字符串格式发送结果 html 作为响应。

一切正常，但由于某种原因，我没有从数据库中获取最新记录，我在 cfquery 标记中尝试了 cachedwithin = "0" 但没有运气。有人可以解释为什么cfcomponents会出现这种行为吗？我的猜测是缓存。

**编辑：**

问题已解决，谢谢大家的回复。问题是我们在 cfqueryparam 值中使用了空间，如下所示。

```
<cfqueryparam list="yes" separator="," cfsqltype="CF_SQL_VARCHAR" value="A, B, C, D"> 
```

我觉得应该是这样的

```
<cfqueryparam list="yes" separator="," cfsqltype="CF_SQL_VARCHAR" value="A,B,C,D"> 
```

这使得查询排除了一些结果，因为 cfqueryparam 在将列表转换为 varchar 时包含了空间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:02:42.547

Make sure you prevent the ajax results from being cached.

```
$.ajaxSetup ({
    // Disable caching of AJAX responses
    cache: false
}); 
```

from: [Stop jQuery .load response from being cached](https://stackoverflow.com/questions/168963/stop-jquery-load-response-from-being-cached)

# c# - 将日期时间转换为日期时间？在asp.net中导致错误

> ID：11953689
> 
> 赞同：0
> 
> 时间：2012-08-14T13:47:16.323
> 
> 标签：c#, asp.net, datetime

在我后面的 c# 代码中，当我转换
`public DateTime custDOB { get; set; }`
为
`public DateTime? SubDOB { get; set; }`

我的代码行之一出现错误
`tboxDateOfBirth.Text = oCust.custDOB.ToShortDateString();`

并且消息显示**“System.Nullable”不包含“ToShortDateString”的定义，并且找不到接受“System.Nullable”类型的第一个参数的扩展方法“ToShortDateString”**

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T13:48:14.443

将该行更改为

```
tboxDateOfBirth.Text = oCust.custDOB.HasValue? oCust.custDOB.Value.ToShortDateString() : string.Empty; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:48:24.907

如果您始终 100% 确定它将有一个值并且不会为空，请执行此操作

```
tboxDateOfBirth.Text = ((DateTime)(oCust.custDOB)).ToShortDateString(); 
```

或者，如果它有可能为空，您可以寻求 Andre Calil 的答案。

您还应该阅读有关[空合并运算符 (??)](http://msdn.microsoft.com/en-us/library/ms173224.aspx)的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:49:32.507

有可以为空的类型——比如 int? 或 DateTime?，因此您可以检查它们是否具有任何值`.HasValue` 访问实际值使用

```
oCust.custDOB.Value.ToShortDateString(); 
```

# javascript - phonegap + websocket：onOpen 不会触发

> ID：11953695
> 
> 赞同：2
> 
> 时间：2012-08-14T13:47:27.197
> 
> 标签：javascript, android, cordova, websocket

我开始使用 phonegap + websocket + android 。我试图执行这个例子，但我做不到。 [http://anismiles.wordpress.com/2011/02/03/websocket-support-in-android%E2%80%99s-phonegap-apps/](http://anismiles.wordpress.com/2011/02/03/websocket-support-in-android%E2%80%99s-phonegap-apps/)

我在服务器中收到的只是这条消息：

* **GET / HTTP/1.1 升级：WebSocket 连接：升级主机：192.168.1.21:10008 来源：* Sec-WebSocket-Key1：1 4113 76776 Sec-WebSocket-Key2：26 8P 2 2x 4#8 54c m' !7 ó ¥Þâtuv***

但我想收到我自己的消息（一开始是一个简单的你好世界）。任何人都可以提供帮助:)

# windows-phone-7 - 将 TextBlock 文本绑定到资源

> ID：11953696
> 
> 赞同：1
> 
> 时间：2012-08-14T13:47:28.267
> 
> 标签：windows-phone-7, binding

如何将 TextBlock 文本绑定到资源文件中的字符串？（我的应用应该支持多种语言）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:23:35.193

Microsoft 有一个很好的例子来本地化您将在 XAML 中使用的字符串。

[如何：使 XAML 内容本地化](http://msdn.microsoft.com/en-us/library/dd882554%28v=VS.95%29.aspx)

# python - 如何在 Tkinter 标签中使用下标？

> ID：11953697
> 
> 赞同：3
> 
> 时间：2012-08-14T13:47:33.087
> 
> 标签：python, tkinter

如何在 Tkinter 标签中使用下标？

我发现了很多这样的帖子[，](http://www.daniweb.com/software-development/python/threads/169455/superscript-in-a-tkinter-label)但这对我没有帮助......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T15:24:18.237

对于丰富的格式，请使用小文本小部件而不是标签。然后，您可以将各种格式添加到信息中。例如，您可以使用`offset`文本标签上的属性来创建上标和下标。

只需`disabled`在配置小部件后将状态设置为，就所有意图和目的而言，它看起来就像一个标签。主要区别在于您必须手动设置大小，因为文本小部件不会像标签那样扩展以适应其内容。

例如：

```
import Tkinter as tk
class SampleApp(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        l = tk.Text(self, width=5, height=2, borderwidth=0, 
                    background=self.cget("background"))
        l.tag_configure("subscript", offset=-4)
        l.insert("insert", "H", "", "2", "subscript", "O")
        l.configure(state="disabled")
        l.pack(side="top")

if __name__ == "__main__":
    app = SampleApp()
    app.mainloop() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-06T18:35:45.263

如果您只需要几个下标（例如，对于一个等式），使用 unicode 下标字符可能更简单。

```
import Tkinter as Tk
root = Tk.Tk()
Tk.Label(root, text=u'% Change = (y\u1d62-y\u2080)/y\u2080 \u00d7100').pack()
root.mainloop() 
```

# android - Android App Spinner 导致应用程序在单击时崩溃

> ID：11953698
> 
> 赞同：0
> 
> 时间：2012-08-14T13:47:36.620
> 
> 标签：android, nullpointerexception, spinner

我有一个 android 应用程序，用 java 编写，其中包含一个微调器，在 layout.xml 中显示如下：

```
<Spinner
    android:id="@+id/sprDeviceType"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" /> 
```

它在活动类中初始化如下：

```
public class AddDevice extends Activity
{
    private Spinner deviceTypeSpinner;

    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.add);  //Set the layout

        populateDeviceTypeSpinner();
    }

    private void populateDeviceTypeSpinner()
    {
        String device_type_spinner[];

        device_type_spinner = new String[2];
        device_type_spinner[0] = "FTP";
        device_type_spinner[1] = "QAF";

        deviceTypeSpinner = (Spinner) findViewById(R.id.sprDeviceType);

        ArrayAdapter deviceTypeArrayAdapter = new ArrayAdapter(this, android.R.layout.simple_spinner_item, device_type_spinner);

        deviceTypeSpinner.setAdapter(deviceTypeArrayAdapter);
    }
} 
```

但是，当我运行程序时，它会很好地打开活动，但是当我单击微调器以获取下拉项目时，它会使程序崩溃，并抛出 NullPointerException。

有人看到我做错了什么吗？

LogCat 显示：

```
08-14 14:57:02.034: D/AndroidRuntime(1612): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
08-14 14:57:02.034: D/AndroidRuntime(1612): CheckJNI is OFF
08-14 14:57:02.074: D/AndroidRuntime(1612): --- registering native functions ---
08-14 14:57:05.004: D/AndroidRuntime(1612): Shutting down VM
08-14 14:57:05.014: I/AndroidRuntime(1612): NOTE: attach of thread 'Binder Thread #3' failed
08-14 14:57:05.184: D/AndroidRuntime(1637): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<
08-14 14:57:05.184: D/AndroidRuntime(1637): CheckJNI is OFF
08-14 14:57:05.224: D/AndroidRuntime(1637): --- registering native functions ---
08-14 14:57:05.524: D/AndroidRuntime(1637): Shutting down VM
08-14 14:57:05.544: I/AndroidRuntime(1637): NOTE: attach of thread 'Binder Thread #3' failed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:22:15.670

使用 a`SpinnerAdapter`而不是`ArrayAdapter`..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:37:05.047

我从使用我编程的数组更改为使用保存在值 xml 中的数组。

```
private void populateDeviceTypeSpinner()
{
    deviceTypeSpinner = (Spinner) findViewById(R.id.sprDeviceType);

    ArrayAdapter<CharSequence> deviceTypeArrayAdapter = ArrayAdapter.createFromResource(this, R.array.deviceType, android.R.layout.simple_spinner_item);

    deviceTypeArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    deviceTypeSpinner.setAdapter(deviceTypeArrayAdapter);
}

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="deviceType">
        <item >FTP</item>
        <item >QAF</item>
    </string-array>
</resources> 
```

# spring - 在应用程序上下文中对 bean 所做的热部署更改不显示

> ID：11953699
> 
> 赞同：1
> 
> 时间：2012-08-14T13:47:47.960
> 
> 标签：spring, dependency-injection, javabeans, applicationcontext

在扩展我的应用程序功能的过程中，我在 applicationContext 中的现有 bean 定义中添加了一些额外的 bean 引用。我在我的 java 类中包含了他们的 getter 和 setter。A类现在新引用了B类和C类，在A类中，我为B和C添加了getter和setter，并在A类内部的方法中使用了这些getter。Bean B和C无非是Maps，还有一个D类我将值放入这些 bean 中。现在，我没有在生产机器上再次生成整个战争文件，而是在我的本地副本中生成了战争文件。从这场战争中，我选择了 A 类和 D 类，并用这些新类替换了生产机器上的类。另外，我替换了 applicationContext.xml。在生产机器上重新启动tomcat后，我在A类中得到了一个N​​PE，这是因为bean B的getter。

我能做些什么来解决这个问题？我不想在我的生产机器上重新部署整个战争。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:57:37.423

如果你重新启动 tomcat，它将解压所有存在的 war 文件，覆盖你*手动*完成的任何更改。如果我理解正确，您正试图将类文件复制到您的爆炸战争中。不是一个特别好的主意。

您不必在部署战争文件的同一台机器上生成战争文件（实际上这很不寻常）。您可能需要注意应用特定的设置。

# android - 如何在 Android 应用程序上进行聊天？

> ID：11953704
> 
> 赞同：2
> 
> 时间：2012-08-14T13:48:03.713
> 
> 标签：android, chat

好吧，我需要用 Android 构建一个应用程序，我也需要在其中建立一个聊天。在那个聊天中，我将有一些“房间”，用户将能够谈论那个房间里的其他人。我在 php 中有一个服务器，我可以在其中保留我的套接字和那些东西......顺便说一句，我以前从未做过，所以我搜索了一些教程或一些关于如何构建它以及如何与我的 android 通信的信息与服务器的应用程序以及如何向所有连接的用户发送消息...例如，我还考虑过创建一个应用程序，该应用程序每 15 秒请求一次数据库以获取新消息。但我知道这是一个不好的方法......有人知道一些网站可以清楚地显示如何进行聊天，或者知道一些可以帮助我的API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:59:15.153

[MQTT](http://dalelane.co.uk/blog/?p=1599)是 XMPP 在 Android 上聊天的流行替代品，也是 Facebook 用于其聊天应用程序的替代品。

# guice - guice 3.0 注入

> ID：11953706
> 
> 赞同：0
> 
> 时间：2012-08-14T13:48:08.607
> 
> 标签：guice, code-injection

我有一个具有字段的 LoginController：@Inject ILoginService loginservice。

Google Guice 的配置如下：

1.  这会创建 ILoginService 的注入

    ```
    bind(ILoginService.class).to(LoginService.class);
    bind(LoginController.class).toInstance(new LoginController()); 
    ```

2.  这不会创建 ILoginService 的注入

    ```
    bind(ILoginService.class).to(LoginService.class);
    bind(LoginController.class); 
    ```

3.  这不会创建 ILoginService 的注入

    ```
    bind(ILoginService.class).to(LoginService.class);
    bind(LoginController.class).toProvider(new Provider<LoginController>() {

        public LoginController get() {
            return new LoginController();
        }
    }); 
    ```

4.  不起作用... ILoginService 未注入

    ```
    @Provides
    public ILoginService loginService() {
        System.out.println("loginService");
        return new LoginService();
    }

    @Provides
    public LoginController loginController() {
        System.out.println("loginService controller");
        return new LoginController();
    } 
    ```

使用以下方法调用注入器：`injector.getInstance(LoginController.class);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:22:01.857

我将假设 1 和 2 是错误的方式。

如果您`new LoginController()`在 Guice 模块（或代码中的其他任何地方）中有，那么 Guice 不知道注入它，除非您通过调用[Injector.injectMembers](http://google-guice.googlecode.com/git/javadoc/com/google/inject/Injector.html#injectMembers%28java.lang.Object%29)或[AbstractModule.requestInjection](http://google-guice.googlecode.com/git/javadoc/com/google/inject/AbstractModule.html#requestInjection%28java.lang.Object%29)告诉 Guice 这样做。

现在你为什么要调用`new`你的代码？你想要什么？如果仅`LoginController`存在一个实例，则使用 Singleton 范围。

# java - 二分查找列表但不查找集合

> ID：11953710
> 
> 赞同：5
> 
> 时间：2012-08-14T13:48:14.697
> 
> 标签：java, collections

其中`Collection`是：

```
binarySearch(List list, Object key) 
```

为什么二进制搜索不适用于`Set`？为什么它只用于`List`？

有什么具体原因吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T13:50:23.490

二分查找意味着一个已排序的容器。一个集合要么是无序的（`HashSet`），在这种情况下不能执行二分查找，要么是有序的（`TreeSet`），在这种情况下它的查找操作已经和二分查找一样有效（即`O(Log2(N))`）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T13:51:31.963

二进制搜索适用于有序集合。套装未订购。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T13:50:47.597

在这种情况下，二进制搜索仅在 List 已排序和排序时才有效。即它不适用于所有列表，仅适用于预先排序的列表。

一个集合没有排序，也可能没有排序。

如果 Set 已排序，可以使用 NavigableSet 的方法之一

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-14T13:49:58.747

A set is unordered, and doesn't have indexes for the elements it contains. Therefore a binarySearch() method that returns the index of the element does not make sense.

# ruby-on-rails-3.1 - 在 Twitter API 中使用 object.entities 的私有方法错误

> ID：11953718
> 
> 赞同：4
> 
> 时间：2012-08-14T13:48:30.787
> 
> 标签：ruby-on-rails-3.1, twitter, private-methods

尝试在我的 twitter 提要控制器中调用 tweet.entities 时出现以下错误。

调用#Twitter::Status:0x94d4bf4 的私有方法“实体”

我在代码中没有称为实体的方法，我什至进行了完整的文件搜索来检查。

我要么需要重命名对象的实体部分，要么以某种方式找到这个所谓的私有方法在哪里，或者以某种方式绕过它。我在 twitter_feeds 控制器中的方法如下：

```
 def hometimeline
@user = User.find(current_user.id)

tweets = @user.tweeting.user_timeline(count: '10', include_entities: true)

parsed_tweets = []
i = 0

tweets.each do |tweet| 

  more = Hash.new
  more['test'] = tweet
  internal_hash = Hash.new
  mappings = {"source" => "fixed"}

  another = more['test']

  boo = Array(tweet)

  #newhash = Hash[twee.map {|k, v| [mapping[k], v] }]
  #newhash = Hash[more.map {|k, v| [mappings[k], v] }]
  #newhash = Hash[tweet.map {|k, v| [mappings[k] || k, v] }]

  internal_hash['parsed_text'] = tweet.entities

  internal_hash['id'] = tweet.id
  internal_hash['raw_text'] = tweet.text

  internal_hash['name'] = tweet.user.name
  internal_hash['screen_name'] = tweet.user.screen_name
  internal_hash['user_id'] = tweet.user.id
  internal_hash['user_image_url'] = tweet.user.profile_image_url
  parsed_tweets << internal_hash
  i = i + 1
end

respond_to do |format|
  format.json { render json: parsed_tweets }
end 
```

结尾

本质上，我正在向客户端发送一组解析的推文，并希望在服务器上实现链接包装等。

有什么方法可以找到代码认为此方法在哪里，或者有没有办法使它不是私有的或忽略它，以便我可以调用 tweet.entities。

编辑：需要注意的一点是，我确实有一个实体模型和实体控制器，但已经删除它们并且仍然得到它。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T13:19:54.140

原来这个错误是由 Twitter gem 引起的，他们有调用实体对象的方法，即 tweet.urls、tweet.user_mentions 等，而不是我想象的 tweet.entities.user_mentions。

文档在这里[http://rdoc.info/gems/twitter/Twitter/Tweet](http://rdoc.info/gems/twitter/Twitter/Tweet)

# regex - Match a specific string with several constants using Regex

> ID：11953721
> 
> 赞同：1
> 
> 时间：2012-08-14T13:48:39.010
> 
> 标签：regex

There are now different requirements to the regex I am looking for, and it is too complex to solve it on my own.

I need to search for a specific string with the following requirements:

1.  String starts with "fu: and ends with "

2.  In between those start and end requirements there can be any other string which has the following requirements:

    2.1\. Less than 50 characters

    2.2\. Only lower case

    2.3\. No trailing spaces

    2.4\. No space between "fu: and the other string.

The result of the regex should be cases where case no' 1 matches but cases no' 2./2.1/2.2/2.3/2.4 don't.

At the moment I have following regex: `"fu:([^"]*?[A-Z][^"]*?)"`, which finds strings with start with `"fu:` and end with `"` with any upper case inbetween like this one:

```
"fu:this String is wrong cause the s from string is upper case" 
```

I hope it all makes sense, I tried to get into regex but this problem seems to complex for someone who is not working with regex every day.

[Edit]

Apparently I was not clear enough. I want to have matches which are "wrong". I am looking for the complement of this regex: "fu:(?:[a-z][a-z ]{0,47}[a-z]|[a-z]{0,2})"

some examples:

Match: "fu: this is a match"

Match: "fu:This is a match"

Match: "fu:this is a match "

NO Match: "fu:this is no match"

Sorry, its not easy to explain :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:02:17.117

Try the following:

```
"fu:([a-z](?:[a-z ]{0,48}[a-z])?)" 
```

This will match any string that begins with `"fu:` and ends with a `"` and the string between those will contain 1-50 characters - only lower-case and not able to begin with a space nor have trailing spaces.

```
"fu:                    # begins with "fu:
(                       # group to match
    [a-z]               # starts with at least one character
    (?:                 # non-matching sub-group
        [a-z ]{0,48}    # matches 0-48 a-z or space characters
        [a-z]           # sub-group must end with a character
    )?                  # group is not required
)
"                       # ends with " 
```

**EDIT**: In the event that you need an empty-string to match too, i.e. the full string is `"fu:"`, you can add another `?` to the end of the matching-group in the regex:

```
"fu:([a-z](?:[a-z ]{0,48}[a-z])?)?" 
```

I've kept the two regexes separated (one that allows 1-50 characters in the string and one that allows 0-50) to show the minor difference.

**EDIT #2**: To match the inverse of the above, i.e. - to find all strings that do not match the required format, you can use:

```
^((?!"fu:([a-z](?:[a-z ]{0,48}[a-z])?)?").)*$ 
```

This will explicitly match *any* line that does not match that pattern. This will consequently also match lines that do not contain `"fu:` - if that matters.

The only way I can figure out to truly match the opposite of the above and still include the anchors of `"fu:` and `"` are to explicitly attempt to match the rules that fail:

```
"fu:([^a-z].*|[^"]{51,}|[a-z]([^"]*?[A-Z][^"]*?)+|[a-z ]{0,49}[ ])" 
```

This regex will match anything that starts with *not* a lowercase `a-z` character, any string that's longer than 50 characters, any string that contains an uppercase letter, or any string that has trailing whitespace. For each additional rule, you'll need to update the regex to match the opposite of what's needed.

My recommendation is, in whatever language you're using, to match all input strings that actually follow your requirements - and if there are no matches then that string must violate your rules.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:02:09.947

```
"fu:([^A-Z" ](?:[^A-Z"]{0,48}[^A-Z" ])?)" 
```

The above regex should match the specified requirements.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:12:33.923

这可能就是你需要的

```
"fu:([a-z](?:[a-z ]{,48}[a-z])?)" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:01:29.753

尝试这个：

```
"fu:(?:[a-z][a-z ]{0,47}[a-z]|[a-z]?)" 
```

# concurrency - How to reduce CUDA synchronize latency / delay

> ID：11953722
> 
> 赞同：8
> 
> 时间：2012-08-14T13:48:40.620
> 
> 标签：concurrency, cuda, latency, synchronize, cuda-streams

This question is related to using cuda streams to run many kernels

In CUDA there are many synchronization commands cudaStreamSynchronize, CudaDeviceSynchronize, cudaThreadSynchronize, and also cudaStreamQuery to check if streams are empty.

I noticed when using the profiler that these synchronize commands introduce a large delay to the program. I was wondering if anyone knows any means to reduce this latency apart from of course using as few synchronisation commands as possible.

Also is there any figures to judge the most effecient synchronisation method. that is consider 3 streams used in an application and two of them need to complete for me to launch a forth streams should i use 2 cudaStreamSyncs or just one cudaDeviceSync what will incur less loss ?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T01:26:57.197

同步方法之间的主要区别是“轮询”和“阻塞”。

“轮询”是驱动程序等待 GPU 的默认机制——它等待 32 位内存位置达到 GPU 写入的某个值。它可能会在等待解决后更快地返回等待，但在等待时，它会烧毁查看该内存位置的 CPU 内核。

可以通过调用或调用`cudaSetDeviceFlags()`来请求“阻止” 。阻塞等待导致驱动程序将命令插入 DMA 命令缓冲区，当缓冲区中的所有先前命令都已执行时，该命令会发出中断信号。然后，驱动程序可以将中断映射到 Windows 事件或 Linux 文件句柄，使同步命令能够等待而不会像默认轮询方法那样不断地烧毁 CPU。`cudaDeviceScheduleBlockingSync``cudaEventCreate()``cudaEventBlockingSync`

查询基本上是手动检查用于轮询等待的 32 位内存位置；所以在大多数情况下，它们非常便宜。但是如果启用了 ECC，查询将进入内核模式检查是否有任何 ECC 错误；在 Windows 上，任何挂起的命令都将刷新到驱动程序（这需要内核 thunk）。

# .net - Is there a control in .NET WPF analogous to Java's javax.swing.Box Strut?

> ID：11953726
> 
> 赞同：0
> 
> 时间：2012-08-14T13:48:44.727
> 
> 标签：.net, wpf, layout, visibility

I have a view in my .NET4 WPF application that consists of a TextBlock, a button, and another TextBlock arranged vertically. They are on three different rows of a Grid. When the user clicks the button, I'm hiding (collapsing) my button and displaying output to the lower TextBlock. When processing is finished, a different button is then made visible in the same place as the first.

This ends up causing the lower TextBlock to jump up slightly to take up the space once reserved for the button before it collapses, then jump back down to make room for the new button.

My solution now is to disable the button instead of collapsing it.

I've used a Strut before when working with Java - this is a control that is invisible and is just there to reserve some space from the layout system. Does something like this exist in WPF?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:27:15.527

使用 Visibility.Hidden 而不是 Visibility.Collapsed。然后预留空间。

# php - preventing the form submission with javascript and php

> ID：11953727
> 
> 赞同：2
> 
> 时间：2012-08-14T13:48:51.103
> 
> 标签：php, javascript, html

I am working on a project , the situation is , the client has to enter the details , and after he enters the details , with java script ( confirm dialogue ) , i m showing all the important details for verification , then when he press ok, the form get submitted.

this is what i have made , but seems it is not working... need help ...

( after pressing cancel .. the dialog box keeps on coming .. and worst part is finally the form get submitted even if i have selected cancel )

( i have removed other details ...)

```
 <script type="text/javascript">
function validateMyForm()
{
    var X=confirm("ARE DETAILS CORRECT ??");
  if(!X)
  { 
    alert("validation failed false");
    returnToPreviousPage();
    return false;
  }
else
 {alert("validations passed");
  return true;}
}
</script>

<form name="frm" action=<?php print "new_update_attendence.php"; ?> method="POST"    
id="content" onsubmit="return validateMyForm();"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:50:28.503

大写很重要！

```
var x=confirm("ARE DETAILS CORRECT ??");
if(!X) // change to if(!x) 
```

对于问题的第二部分，您可以这样做：

```
<script type="text/javascript">
    function validateMyForm()
    {
        var X=confirm("ARE DETAILS CORRECT ??");
        if(!X)
        { 
            setTimeout((function(){ window.location.reload(); }), 500);
            return false;
        }
        else
        {
            return true;
        }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T13:50:16.423

`X`必须是小写：

```
 if(!x)
  { ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T14:14:03.593

我猜你过去使用过 jQuery。在 jQuery`return false`中会阻止表单一起提交。这是因为 jQuery 捕获了返回值 ( `false`) 并将其转换为`eventObject.preventDefault(); eventObject.stopPropagation();`while `return false`，没有 jQuery 只会执行第一个（阻止该事件的默认操作）。该事件仍然冒泡/传播。

将您的 HTML 更改为`onsubmit="return validateMyForm(event);">`以访问事件对象。然后，在 JavaScript 中：

```
function validateMyForm(e)//e should hold the event
{
    e = e || window.event;//except for older IE versions(?), which we correct here
    //do whatever, if the form shouldn't be submitted:
    if (!confirm("ARE DETAILS CORRECT ??"))
    {
        if (e.preventDefault)
        {//chrome, FF, opera, ...
            e.preventDefault();
            e.stopPropagation();//<-- important line here
            return false;
        }//cruddy IE clients
        e.returnValue = false;
        e.cancelBubble = true;//<-- stop event in its tracks
        return false;
    }
} 
```

那应该这样做。

# c++ - design of class inheritance/compostion

> ID：11953729
> 
> 赞同：2
> 
> 时间：2012-08-14T13:48:55.593
> 
> 标签：c++, inheritance, abstract-class

I do have two classes: a reader and a writer. For both classes I have an abstract interface since the data source/target should be flexible:

```
class abstract_reader {
...
};

class concrete_reader : public abstract_reader {
   DATATYPE m_data;
...
};    
class abstract_writer {
...
};

class concrete_writer : public abstract_writer {
   DATATYPE m_data;
...
}; 
```

The writer shall have both functionalities, to read and to write The implementation of the reading part of the concrete_writer is the same as the implementation of the concrete_reader. What would be a good way to combine these classes?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:53:34.053

您想要的有点令人困惑，但是有多种方法：

*   从两个抽象类派生作者
*   在 writer 中持有指向具体 reader 的指针
*   在 writer 中保存具体 reader 的实例
*   从 writer 中删除读取功能，并创建一个可以读写的第三类。

就个人而言，我会遵循最后一种方式，那么你将拥有一整套只读、只写和两者兼有的课程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:22:48.897

首先，如果它只是一个`writer`，它不应该知道如何阅读。当你在屏幕上实现一个作家时会发生什么？尽管如此， `ReaderWriter`除了`Reader`and之外，还有一个`Writer`, 是一个非常合理的选择，这会产生同样的问题。

我这样做的方法是首先将 定义`ReaderWriter`为继承自`Reader`和的接口`Writer`：

```
class Reader
{
private:
    //  Pure virtual functions to the implementation...
public:
    virtual ~Reader() {}
    //  Interface...
};

class Writer
{
private:
    //  Pure virtual functions to the implementation...
public:
    virtual ~Writer() {}
    //  Interface...
};

class ReaderWriter : public virtual Reader, public virtual Writer
{
    //  Just joins the two; adds nothing new of its own
}; 
```

注意虚拟继承。当您扩展接口时，这通常应该是默认设置。一旦你明白了，你可以（通常）使用 mixins 来实现：

```
class ConcreteReader : public virtual Reader
{
    //  Overrides for the pure virtual functions, + any data needed.
public:
    ConcreteReader();   //  Or with parameters, as needed.
};

class ConcreteWriter : public virtual Writer
{
    //  Overrides for the pure virtual functions, + any data needed.
public:
    ConcreteWriter();   //  Or with parameters, as needed.
};

class ConcreteReaderWriter : public ReaderWriter, public ConcreteReader, public ConcreteReaderWriter
{
}; 
```

接收`Reader*`可读的客户端代码；接收到`Writer*`can write 的客户端代码；接收 a 的客户端代码 `ReaderWriter`也可以。当然，如果客户端有 a `Reader*`，它总是可以尝试到`dynamic_cast`a`Writer*`或 a `ReaderWriter*`，如果 dynamic_cast 成功，它也可以写。

编辑：我忘了提：这种技术被称为 mixins。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:51:25.407

为什么作家想知道如何阅读？也许你应该考虑第三课，结合阅读和写作功能。

如果您确信它没问题，只需从`abstract_reader`和派生作者即可`abstract_writer`。只要它们是正确实现的接口（例如，没有字段），一切都应该正常工作。

哦，也许合并模板会很好（我注意到了神秘的`DATATYPE`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T13:54:15.707

```
class concrete_writer : public abstract_writer, public abstract_reader {
public:
    void read() { // or whatever the proper override is for abstract_reader
        reader.read();
    }
private:
    concrete_reader reader;
}; 
```

但是，正如@Bartek 指出的那样，有一个名为“writer”的类也可以读取似乎很奇怪。

# jquery - Coverflow with jQuery and css3

> ID：11953731
> 
> 赞同：1
> 
> 时间：2012-08-14T13:49:07.347
> 
> 标签：jquery, css, coverflow

I know this questions has been asked previously, but the questions I saw were about the Apple coverflow and this one isnt.

I am trying to replicate this behaviour: [http://cl.ly/image/1s0L1O3M2401](http://cl.ly/image/1s0L1O3M2401) (screen shot)

Does anyone know if there is a plugin or something? I can use CSS perpective and rotate to achieve the "skewed" look but it's not working... haha difficult to explain.

Anyway if anyone knows a plugin that would do that for me, I'd really appreciate it.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:30:30.367

以下是 CSS3 (webkit) 轻量级解决方案的两种选择：http:
[//jbkflex.wordpress.com/2012/02/13/coverflow-animation-using-css3-3d-transformations-part1](http://jbkflex.wordpress.com/2012/02/13/coverflow-animation-using-css3-3d-transformations-part1)
[http://scottgale.com /blog/coverflow-css-3d-transforms/2011/05/24/](http://scottgale.com/blog/coverflow-css-3d-transforms/2011/05/24/)

这里有另外两种 jQuery 方法：
[http ://www.webappers.com/2012/05/30/apple-coverflow-design-with-coverscroll-jquery-plugin/](http://www.webappers.com/2012/05/30/apple-coverflow-design-with-coverscroll-jquery-plugin/)
[http://www.artviper.net/wp/convenient -page-design/apple-coverflow-design-with-coverscroll-jquery-plugin/](http://www.artviper.net/wp/convenient-page-design/apple-coverflow-design-with-coverscroll-jquery-plugin/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:53:13.253

您可以查看 Addy Osmani 的 Jquery UI Coverflow 2.0

[http://addyosmani.com/blog/jqueryuicoverflow/](http://addyosmani.com/blog/jqueryuicoverflow/)

# java - JMS Messages in Eclipse and Maven - is there any difference?

> ID：11953735
> 
> 赞同：0
> 
> 时间：2012-08-14T13:49:08.793
> 
> 标签：java, maven, log4j, jms

I've created two projects: first sends logs using log4j JMSAppender, second receives them from topic and puts into a file. When I compile my project using `Eclipse compiler` everything works OK - I can find logs in created file.

When I compile projects using `Maven` there are no logs. But also there are no errors during compilation, no exceptions and my "welcome messages" (e.g. `System.out.println("Server is ready.");`) are displayed correctly from each main.

Do you have any idea what should I do?

# java - MVP with CDI; avoiding circular dependency

> ID：11953740
> 
> 赞同：9
> 
> 时间：2012-08-14T13:49:18.450
> 
> 标签：java, cdi

I try to build a Webapp with the MVP paradigm. Because I want the API to be clean and make everything easy testable I try to inject everything possible via Contructor Injection. Now I came to a point where I have a view with multiple Textfields. These Textfields get filled by the presenter when there are values for it in the DB so my presenter needs a reference of the view but the vie obviously needs a reference of the Presenter, too. CDI tells me that injection of Presenter into the view and otherwise is not possible because of circular dependencies. Ist it possible to avoid setteing the presenter in the view via a setter method? The code looks something like this:

**View:**

```
public Class ViewImpl implements view {

private PresenterImpl presenter;
private User user;

@Inject
public ViewImpl(PresenterImpl presenter, User user) {
   super();
   this.presenter = presenter;
   this.user = user;
}

public void attach() {
   super.attach();

   presenter.fetchNames();

   showUser();
   }

public void setUser(User user) {
   this.user = user;
   }
} 
```

**Presenter:**

```
public Class PresenterImpl implements Presenter {

private ViewImpl view;
private User user;

@Inject
public PresenterImpl(ViewImpl view, User user) {
   this.view = view;
   this.user = user;
}

public void fetchNames() {
   fetchFromDB();
   view.setUser(user);
}
} 
```

Here I get the cyclic dependency. To avoid that I tried to use the Instance Interface and changed the presenter to this:

**Presenter:**

```
public Class PresenterImpl implements Presenter {

private ViewImpl view;
private Instance<ViewImpl> instanceView;
private User user;

@Inject
public PresenterImpl(Instance<ViewImpl> instanceView, User user) {
   this.instanceView = instanceView;
   this.user = user;

   bind();
}

public void bind() {
   this.view = instanceView.get();
}

public void fetchNames() {
   fetchFromDB();
   view.setUser(user);
}
} 
```

But when I do that I get an java.lang.NoClassDefFoundError: org/jboss/weld/injection/Exceptions

**Update: Here is the stack trace**

```
[com.vaadin.Application] (http-localhost-127.0.0.1-8080-2) Terminal error:: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_05]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_05]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_05]
at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_05]
at com.vaadin.terminal.gwt.server.ServerRpcManager.applyInvocation(ServerRpcManager.java:141) [vaadin-7.0.0.alpha3.jar:7.0.0.alpha3]
at com.vaadin.terminal.gwt.server.ServerRpcManager.applyInvocation(ServerRpcManager.java:89) [vaadin-7.0.0.alpha3.jar:7.0.0.alpha3]
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleBurst(AbstractCommunicationManager.java:1660) [vaadin-7.0.0.alpha3.jar:7.0.0.alpha3]
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariables(AbstractCommunicationManager.java:1543) [vaadin-7.0.0.alpha3.jar:7.0.0.alpha3]
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleUidlRequest(AbstractCommunicationManager.java:577) [vaadin-7.0.0.alpha3.jar:7.0.0.alpha3]
at com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:461) [vaadin-7.0.0.alpha3.jar:7.0.0.alpha3]
at com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:350) [vaadin-7.0.0.alpha3.jar:7.0.0.alpha3]
at de.me.main.web.MEAppServlet.service(MEAppServlet.java:60) [classes:]
at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_05]
Caused by: com.vaadin.event.ListenerMethod$MethodException: Invocation of method click in de.me.login.view.LoginViewImpl$1 failed.
at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:530) [vaadin-7.0.0.alpha3.jar:7.0.0.alpha3]
at com.vaadin.event.EventRouter.fireEvent(EventRouter.java:164) [vaadin-7.0.0.alpha3.jar:7.0.0.alpha3]
at com.vaadin.ui.AbstractComponent.fireEvent(AbstractComponent.java:1035) [vaadin-7.0.0.alpha3.jar:7.0.0.alpha3]
at com.vaadin.ui.Embedded$1.click(Embedded.java:97) [vaadin-7.0.0.alpha3.jar:7.0.0.alpha3]
... 30 more
Caused by: java.lang.NoClassDefFoundError: org/jboss/weld/injection/Exceptions
at org.jboss.weld.injection.ConstructorInjectionPoint.newInstance(ConstructorInjectionPoint.java:125) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean.createInstance(ManagedBean.java:333) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget.produce(ManagedBean.java:200) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean.create(ManagedBean.java:289) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.context.unbound.DependentContextImpl.get(DependentContextImpl.java:61) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:616) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:681) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.injection.ParameterInjectionPoint.getValueToInject(ParameterInjectionPoint.java:120) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.injection.ConstructorInjectionPoint.getParameterValues(ConstructorInjectionPoint.java:170) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.injection.ConstructorInjectionPoint.newInstance(ConstructorInjectionPoint.java:117) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean.createInstance(ManagedBean.java:333) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget.produce(ManagedBean.java:200) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean.create(ManagedBean.java:289) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.context.unbound.DependentContextImpl.get(DependentContextImpl.java:61) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:616) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:681) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.injection.ParameterInjectionPoint.getValueToInject(ParameterInjectionPoint.java:120) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.injection.ConstructorInjectionPoint.getParameterValues(ConstructorInjectionPoint.java:170) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.injection.ConstructorInjectionPoint.newInstance(ConstructorInjectionPoint.java:117) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean.createInstance(ManagedBean.java:333) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget.produce(ManagedBean.java:200) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean.create(ManagedBean.java:289) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.context.unbound.DependentContextImpl.get(DependentContextImpl.java:61) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:616) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:681) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.injection.ParameterInjectionPoint.getValueToInject(ParameterInjectionPoint.java:120) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.injection.ConstructorInjectionPoint.getParameterValues(ConstructorInjectionPoint.java:170) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.injection.ConstructorInjectionPoint.newInstance(ConstructorInjectionPoint.java:117) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean.createInstance(ManagedBean.java:333) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget.produce(ManagedBean.java:200) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean.create(ManagedBean.java:289) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.context.unbound.DependentContextImpl.get(DependentContextImpl.java:61) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:616) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:681) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.injection.ParameterInjectionPoint.getValueToInject(ParameterInjectionPoint.java:120) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.injection.ConstructorInjectionPoint.getParameterValues(ConstructorInjectionPoint.java:170) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.injection.ConstructorInjectionPoint.newInstance(ConstructorInjectionPoint.java:117) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean.createInstance(ManagedBean.java:333) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget.produce(ManagedBean.java:200) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean.create(ManagedBean.java:289) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.context.unbound.DependentContextImpl.get(DependentContextImpl.java:61) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:616) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:681) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.injection.ParameterInjectionPoint.getValueToInject(ParameterInjectionPoint.java:120) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.injection.ConstructorInjectionPoint.getParameterValues(ConstructorInjectionPoint.java:170) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.injection.ConstructorInjectionPoint.newInstance(ConstructorInjectionPoint.java:117) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean.createInstance(ManagedBean.java:333) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget.produce(ManagedBean.java:200) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.ManagedBean.create(ManagedBean.java:289) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.context.AbstractContext.get(AbstractContext.java:107) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:90) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:79) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at de.me.main.layout.MainLayouter$Proxy$_$$_WeldClientProxy.go(MainLayouter$Proxy$_$$_WeldClientProxy.java) [MainService-0.0.5-SNAPSHOT.jar:]
at de.me.controller.MainController.showMainView(MainController.java:81) [MainService-0.0.5-SNAPSHOT.jar:]
at de.me.controller.MainController.access$0(MainController.java:80) [MainService-0.0.5-SNAPSHOT.jar:]
at de.me.controller.MainController$1.onLogin(MainController.java:48) [MainService-0.0.5-SNAPSHOT.jar:]
at de.me.presenter.LoginPresenterImpl.doLogin(LoginPresenterImpl.java:69) [UserManagement-0.0.5-SNAPSHOT.jar:]
at de.me.view.LoginViewImpl$1.click(LoginViewImpl.java:60) [UserManagement-0.0.5-SNAPSHOT.jar:]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_05]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_05]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_05]
at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_05]
at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:510) [vaadin-7.0.0.alpha3.jar:7.0.0.alpha3]
... 33 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T06:47:26.400

我现在开始工作了。Nikita Beloglazov 的提示很有帮助，因为据我了解，问题确实是实例化完成的那一刻。因为我想继续使用构造函数注入，所以我选择了第二种方法：

```
public Class PresenterImpl implements Presenter {

private ViewImpl view;
private Instance<ViewImpl> instanceView;
private User user;

@Inject
public PresenterImpl(Instance<ViewImpl> instanceView, User user) {
   this.instanceView = instanceView;
   this.user = user;

   bind();
}

public void bind() {
   this.view = instanceView.get();
}

public void fetchNames() {
   fetchFromDB();
   view.setUser(user);
}
} 
```

为了让它工作，我必须在构造函数注入时只注入一个代理对象，并在对对象执行第一个操作时获取真实实例。这是正常作用域 bean 的正常行为。所以我制作了演示者和视图@SessionScoped，并从Serializable 扩展了接口。现在构造函数注入工作并且 ViewImpl 是“惰性注入”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T20:05:43.167

尝试将注入点从构造函数移动到属性。所以用@Injection 注释属性，而不是构造函数。我认为这种方式焊接首先创建类的实例，然后才注入依赖项。并将您的构造函数替换为默认值。
如果您在创建 Presenter 时注释构造函数焊接需要有 View 的实例，但要创建 View 他需要 Presenter。使用默认构造函数和带注释的属性，它可以创建 View 和 Presenter，然后才能将它们相互注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:57:06.137

有一些解决循环依赖的方法，但是当抛出这种异常时，请注意您的架构可能有问题。

但考虑看看[这个答案](https://stackoverflow.com/a/15301179/1113510)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T08:04:22.390

在我看来，Vaadin 与这个问题无关。

可能（可能）存在循环依赖注入问题，但问题在于`ClassNotFoundException`. 您要部署到哪个应用程序服务器？它是成熟的 Java EE 6 AS 吗？如果没有，您的部署中可能缺少一些库。

# msbuild - Appharbor fails to publish asp.net mvc 4 application

> ID：11953741
> 
> 赞同：3
> 
> 时间：2012-08-14T13:49:21.353
> 
> 标签：msbuild, appharbor

Trying to launch my project on appharbor and it fails with this:

> "D:\temp\cijsrn4n.1kq\input\TinyBlogMvc4.sln" (default target) (1) -> "D:\temp\cijsrn4n.1kq\input\TinyBlogMvc4\TinyBlogMvc4.csproj" (default target) (2) -> (_CopyWebApplicationLegacy target) -> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\WebApplica tions\Microsoft.WebApplication.targets(178,5): **error MSB3021: Unable to copy file "obj\Debug\build.force"** to "D:\temp\cijsrn4n. 1kq\output_PublishedWebsites\TinyBlogMvc4\obj\Debug\build.force". Could not find a part of the path 'obj\Debug\build.force'. [D:\temp\cijsrn4n.1kq\input\TinyBlogMvc4\TinyBlogMvc4.csproj] C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\WebApplica tions\Microsoft.WebApplication.targets(178,5): **error MSB3021: Unable to copy file "obj\Debug\DesignTimeResolveAssemblyReferencesInput.cache"** to "D:\temp\cijsrn4n. 1kq\output_PublishedWebsites\TinyBlogMvc4\obj \Debug\DesignTimeResolveAssemblyReferencesInput.cache". Could not find a part of the path 'obj\Debug\DesignTimeResolveAssemblyReferencesInput.cache'. [D:\temp\cijsrn4n. 1kq\input\TinyBlogMvc4\TinyBlogMvc4.csproj]

```
 0 Warning(s) 2 Error(s) 
```

It builds on my pc just fine, any ideas what I'm missing?

.NET Framework version is 4.0

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T07:46:00.423

我从头开始创建项目，然后比较并发现：

> ```
> <Content Include="obj\Debug\build.force" /> 
> ```

它是如何出现在那里的，不知道，但这就是原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-17T21:58:31.823

我有同样的问题，我解决了从**.csproj**文件中删除这些行：

```
<Content Include="obj\Debug\AqAUI.csproj.FileListAbsolute.txt" />
<Content Include="obj\Debug\AqAUI.csprojResolveAssemblyReference.cache" />
<Content Include="obj\Debug\build.force" />
<Content Include="obj\Debug\DesignTimeResolveAssemblyReferencesInput.cache" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:53:55.727

看起来`_CopyWebApplicationLegacy`您的项目文件中的目标正在引起问题。如果您不需要它，请考虑将其删除。或者，您应该修复路径问题。看起来生成了无效路径：`output_PublishedWebsites`应该是`output\_PublishedWebsites`. [常见问题解答](http://support.appharbor.com/kb/getting-started/frequently-asked-questions/)中有关于如何调试此类内容的建议

# iphone - 想要目标c中的代码

> ID：11953746
> 
> 赞同：-3
> 
> 时间：2012-08-14T13:49:57.233
> 
> 标签：iphone

我将三个字符串定义为 s1="@$100",s2="@$50",s3="@$150"。现在我想要存储在 S4="@$300" 中的三个字符串，其中所有内部函数方法都在目标 c 代码中的单个方法中执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:32:22.267

首先，对于字符串文字赋值，您`@""`不需要`"@"`. 其次，要将整数相加，您应该使用`ints`. 然后您可以使用`stringWithFormat:`. 但是由于您从字符串开始，只需将它们转换为整数，然后将它们相加即可。

```
sFourString = [S4 intValue]; //Do this for all of your strings 
```

然后将你的整数加在一起：

```
resultingValue = sFourString + allOtherInts; 
```

然后转换`resultingValue`回字符串：

```
NSString *resultString = [NSString stringWithFormat:@"%i", resultingValue]; 
```

因此，将它们放在一个重要的声明中：

```
NSString *completeString = [NSString stringWithFormat:@"%i", [S4 intValue] + [anotherString intValue]]; 
```

# sharepoint-2010 - Close popup modal dialog on clicking the submit button in sharepoint custom form

> ID：11953750
> 
> 赞同：2
> 
> 时间：2012-08-14T13:50:07.517
> 
> 标签：sharepoint-2010

I have a custom form and I would like to add some functionality in my submit button. When I click on Submit button, I would like to close the popup and refresh the parent page.

I used this code in my button but there is a problem. It does not validate the controls and it makes a postback and even does not save any data.

```
OnClientClick="javascript:window.frameElement.commitPopup();" 
```

Can you help me with some working code?

Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:21:05.267

您需要`OnClientClick`在要执行的代码之后设置属性。

```
 protected void btnAdd_Click(object sender, EventArgs e)
    {

                //Your Code here(some functionality)

                Context.Response.Write(@"<script type='text/javascript'>window.frameElement.commitPopup(); return false</script>");
                Context.Response.Flush();
                Context.Response.End();
    } 
```

# java - 为什么我要使用枚举，而不仅仅是一个类？

> ID：11953751
> 
> 赞同：5
> 
> 时间：2012-08-14T13:50:10.760
> 
> 标签：java, enums

前几天我在帮助一个朋友使用 Java，他们在询问 Enums。我解释了（类似的）的C语法

```
enumeration Difficulty{
    BEGINNER= 1;
    PRO=5;
    EXPERT = 11;
} 
```

不是要走的路，Java 语法是`something(1);`您创建了一个接受 int 的构造函数，然后执行此操作...等等。

但他们拦住了我，问我“如果我们使用构造函数等等，为什么要使用枚举，为什么不直接创建一个新类？”

而我无法回答。那么在这种情况下为什么要使用枚举而不是类呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T13:53:07.033

枚举受到严格限制。在指定值之外定义枚举值是不可能的（而您可以调用一个类`new`来创建一个新值）。

至少大多数 JVM 也对枚举进行了大量优化，并且还有新的类和语言特性可以利用枚举的紧凑性和速度。例如，创建了新类[`EnumSet`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/EnumSet.html)和[`EnumMap`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/EnumMap.html)，它们分别使用位集和数组实现了一个枚举键集或映射（这可能是那些抽象数据类型的最快实现）。

此外，枚举类型可以在`switch`语句中使用。如果您是 Java1.7 之前的版本，这是自定义`switch`语句的最佳选择（并且由于类型安全性可能仍然优于使用`String`值；错误输入枚举值会导致编译时错误，但错误输入字符串会导致一个更隐蔽的运行时错误——或者更糟糕的是，一个在你真正盯着代码并看到错字之前你无法理解的逻辑错误）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T13:54:26.050

枚举有许多普通类没有的特性。

*   它们具有固定数量的实例，您可以在一个位置定义这些实例。
*   它们可以在 switch 语句中使用。
*   获取完整的枚举列表
*   从它的字符串中查找一个枚举。
*   可以获得枚举的名称。
*   可以对单个枚举值进行子类化。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-14T14:02:29.810

好吧，实际上 Java 中的 Enum 只是用于声明整个类层次结构的语法糖。

写作：

```
public enum MyEnum {
   FOO, BAR
} 
```

大致相当于写

```
public abstract class MyEnum {
    public static final MyEnum FOO = new MyEnum(){};
    public static final MyEnum BAR = new MyEnum(){};

    private MyEnum(){}
} 
```

乍一看，这似乎有点矫枉过正，但您意识到您可以做所有类可以做的事情，例如：

```
public enum Operators {
    ADD("+"){ 
        public double apply(double lhs, double rhs){ return lhs + rhs; }
    },

    SUBTRACT("-"){ 
        public double apply(double lhs, double rhs){ return lhs - rhs; }
    },

    MULTIPLY("*"){ 
        public double apply(double lhs, double rhs){ return lhs * rhs; }
    },

    DIVIDE("/"){ 
        public double apply(double lhs, double rhs){ return lhs / rhs; }
    };

    private final String symbol;

    Operators(String symbol){
        this.symbol = symbol;
    }

    public abstract double apply(double lhs, double rhs);
} 
```

现在相当于（加上一些额外的便利方法）：

```
public abstract class Operators {
    public static final Operators ADD = new Operators("+"){ 
        public double apply(double lhs, double rhs){ return lhs + rhs; }
    };

    public static final Operators SUBTRACT = new Operators("-"){ 
        public double apply(double lhs, double rhs){ return lhs - rhs; }
    };

    public static final Operators MULTIPLY = new Operators("*"){ 
        public double apply(double lhs, double rhs){ return lhs * rhs; }
    },

    public static final Operators DIVIDE = new Operators("/"){ 
        public double apply(double lhs, double rhs){ return lhs / rhs; }
    };

    private final String symbol;

    private Operators(String symbol){
        this.symbol = symbol;
    }

    public abstract double apply(double lhs, double rhs);
} 
```

我相信我们可以同意它比非常基本的 C 版本更强大。当然，使用枚举可以保证枚举的每个成员都是单例。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-14T13:53:16.163

以下是使用枚举的原因 -

1）枚举是类型安全的，除了预定义的枚举常量之外，您不能将任何其他内容分配给枚举变量。

2) Enum 有自己的命名空间。

3) Enum 的最大特点是您可以在 Java 中的 Switch 语句中使用 Enum，如 int 或 char 原始数据类型。但是在 java 7 中，我们可以在 switch 语句中使用 String。

4) 在 Java 中的 Enum 上添加新常量很容易，您可以在不破坏现有代码的情况下添加新常量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T16:08:06.423

Enum 还为 Java 提供了一个很棒的单例：

[http://en.wikipedia.org/wiki/Singleton_pattern#The_Enum_way](http://en.wikipedia.org/wiki/Singleton_pattern#The_Enum_way)

我想这是您可以使用枚举而不是类的另一种情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T13:52:34.617

如果您有一组固定的值，则使用枚举，枚举在 ... ehhm ... enum :)

如果您想要类描述的任何数量的实例，您可以使用类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T13:53:41.137

因为一个类可以有任意数量的实例，而在“枚举”中，实例的数量仅限于枚举本身的元素（这就是为什么构造函数必须是私有的），并且可以静态访问这些实例。

# asp.net-mvc-3 - 部署asp.net mvc3网站时出现问题

> ID：11953760
> 
> 赞同：1
> 
> 时间：2012-08-14T13:50:25.503
> 
> 标签：asp.net-mvc-3, deployment, web-deployment

**安全异常**

***说明：***应用程序试图执行安全策略不允许的操作。要授予此应用程序所需的权限，请联系您的系统管理员或在配置文件中更改应用程序的信任级别。

***异常详细信息：*** System.Security.SecurityException：请求“System.Configuration.ConfigurationPermission，System.Configuration，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”类型的权限失败。

*源错误：*

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

***堆栈跟踪：***

```
[SecurityException: Request for the permission of type 'System.Configuration.ConfigurationPermission, System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' failed.]
   System.Security.CodeAccessSecurityEngine.Check(Object demand, StackCrawlMark& stackMark, Boolean isPermSet) +0
   System.Security.CodeAccessSecurityEngine.Check(CodeAccessPermission cap, StackCrawlMark& stackMark) +31
   System.Security.CodeAccessPermission.Demand() +46
   System.Configuration.BaseConfigurationRecord.CheckPermissionAllowed(String configKey, Boolean requirePermission, Boolean isTrustedWithoutAptca) +99 
```

[在www.getservice.in](http://www.getservice.in)上查看异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:50:15.687

您有权访问 IIS 管理器吗？

如果是这样，请尝试将站点应用程序池更改为完全信任模式

在此处尝试以下建议。[http://forums.asp.net/t/1719340.aspx/2/10](http://forums.asp.net/t/1719340.aspx/2/10)

# .net - 事件 ID (0) 的描述

> ID：11953761
> 
> 赞同：0
> 
> 时间：2012-08-14T13:50:26.560
> 
> 标签：.net, logging, windows-services, system.diagnostics

找不到源 (.NET 运行时) 中事件 ID (0) 的描述。本地计算机可能没有必要的注册表信息或消息 DLL 文件来显示来自远程计算机的消息。您可以使用 /AUXSOURCE= 标志来检索此描述；有关详细信息，请参阅帮助和支持。以下信息是事件的一部分： ProcessName: MyService

ProcessId: 7600 无法初始化跟踪源..

* * *

我只在一台服务器上得到这个，它无法登录磁盘，权限是用户“完全控制”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:35:46.080

解决了评论这个错误..它是配置文件中的“源”。

```
<source name="System.Transactions" switchValue="None">
    <listeners>
      <add name="tx" type="System.Diagnostics.." initializeData="C:\Temp\trace.log" />
    </listeners>
  </source> 
```

# windows-8 - 从使用 WinJS 读取的文件中返回值以在页面中使用

> ID：11953771
> 
> 赞同：2
> 
> 时间：2012-08-14T13:50:50.010
> 
> 标签：windows-8, windows-runtime, winjs, winrt-async

我目前在 Windows 8/WinRT 应用程序中读取文件时遇到问题。我有一个简单的导航风格应用程序，多个页面可以访问相同的数据，并且我有一个 data.js 文件，该文件定义了一个包含多个成员的命名空间（数据）。应用程序的一部分将项目保存到存储在应用程序本地数据文件夹中的 txt 文件中。但是在其他一些页面上，我需要阅读此内容或检查以前保存的项目列表中是否存在项目。为此，我在 data.js 文件中添加了另一种方法。问题是，当我调用此方法来检查项目是否存在时，由于异步性质，它不会立即返回值，但页面特定 js 文件中的其余代码似乎仍然在它之前执行跳回解析。这意味着检查项目的逻辑不 t 似乎工作。我觉得这取决于我对 .done 或 .then 的使用，但我的代码如下：

```
 DATA.JS
   var doesItemExist= function(item_id){

    var appFolder = Windows.Storage.ApplicationData.current.localFolder;
   //note I've tried this with and without the first "return" statement
   return  appFolder.getFileAsync(dataFile).then(function (file) {
        Windows.Storage.FileIO.readTextAsync(file).done(function (text) {
            try {
                var json = JSON.parse(text);
                if (json) {
                    for (var i = 0; i < json.items.length; i++) {
                        var temp_item = json.items[i];
                        if (temp_item.id === item_id) {
                            return true;
                            break;
                        }
                    }
                } else {
                    return false;
                }
            } catch (e) {
                return false;
                console.log(e);
            }
        }, function (e) { return false;console.log(e); });
    }, function (e) { // error handling
        return false;
        console.log(e);

    });
}
 WinJS.Namespace.define("Data", {
    doesItemExist: doesItemExist
}); //all of the above is wrapped in a self executing function 
```

然后在 Page.js 我有以下内容：

```
 var add = document.getElementById('add');
        if (Data.doesItemExist(selected_item.id)) {
            add.style.display = 'block';
        } else {
            add.style.display = 'none';
        } 
```

这里的所有变量都已分配，调试不会产生任何错误，控制似乎只是在它到达 getFileAsync 之后但在它甚至通过 for 循环之前返回到 if/else 语句。但随后它确实进入了 for 循环，但在 if 语句完成之后。我猜这取决于这一切的异步性质，但我不知道如何解决它。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T15:59:19.330

Promise 应该在这里工作。

我创建了一个新的导航应用程序，并添加了一个包含以下代码的 Data.js 文件：

```
(function () {
    var appData = Windows.Storage.ApplicationData;

    function doesItemExist(item_id) {
        return new WinJS.Promise(
            function (completed, error, progress) {
                var exists = false;
                appData.current.localFolder.createFileAsync("data.txt", Windows.Storage.CreationCollisionOption.openIfExists).then(
                    function (file) {
                        Windows.Storage.FileIO.readTextAsync(file).then(
                            function (fileContents) {
                                if (fileContents) {
                                    if (fileContents = "foo!") {
                                        completed(true);
                                    }
                                    else {
                                        completed(false);
                                    }
                                }
                                else {
                                    completed(false);
                                }
                            }
                        );
                    },
                    function (e) {
                        error(e);
                    }
                );
            }
        );
    }

    WinJS.Namespace.define("Data", {
        doesItemExist: doesItemExist
    });
})(); 
```

请注意，我已经简化了用于检索和解析文件的代码，因为这与问题并不真正相关。重要的部分是，一旦您确定了该项目是否存在，您调用**completed(exists)**会触发您返回的 Promise 的 .then 或 .done 。请注意，如果发生异常，您将调用 error(e)，就像我正在做的那样，如果调用 createFileAsync 有异常（当我希望能够创建文件时，我使用此调用而不是 getFileAsync不存在，如果存在则返回现有文件，使用 openIfExists 选项）。

然后，在 Home.js 中，我将以下代码添加到就绪处理程序中：

```
var itemExists;

var itemExistsPromise = Data.doesItemExist(42);
itemExistsPromise = itemExistsPromise.then(function (exists) {
    itemExists = exists;
    var content = document.getElementById("content");
    content.innerText = "ItemExists is " + itemExists;
});

itemExistsPromise.done(function () {
    var a = 42;
});

var b = 0; 
```

上面的代码将变量 itemExistsPromise 设置为从 Data.js 中的函数返回的 Promise，然后使用 Promise 的 .then 函数中的匿名函数将变量 itemExists 设置为从 doesItemExist Promise 返回的布尔值，并抓取来自 Home.html的`<p>`标签（我添加了一个 id 以便我可以从代码中获取它）并设置其文本以指示该项目是否存在）。因为我调用的是 .then 而不是 .done，所以该调用返回另一个 promise，它被传递到 itemExistsPromise 变量中。

接下来，我调用 itemExistsPromise.done 来完成任何必须等到它上面的 .then 中执行的工作之后的工作。

如果您在“var a = 42”和“var b = 0”行（仅用于设置断点的目的）以及“itemExists = exists”行上设置断点，您应该会发现这给了您执行各个部分时所需的控制。

希望有帮助！

# javascript - 如何使用 ON 而不是 LIVE

> ID：11953772
> 
> 赞同：1
> 
> 时间：2012-08-14T13:50:54.963
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [jQuery 1.7 - 将 live() 变成 on()](https://stackoverflow.com/questions/8021436/jquery-1-7-turning-live-into-on)

我有 jQuery：

```
 $(".house td[red]").live("click", function() {
              alert('ok');
          }); 
```

但函数**live**已被弃用。我如何使用？

```
 $(".house td[red]").on("click", function() {
              alert('ok');
          }); 
```

不工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:52:04.677

```
 $(".house").on("click", 'td[red]', function() {
              alert('ok');
          }); 
```

你试过这个吗？您可以查看[文档](http://api.jquery.com/on/)以获取详细信息。那里的例子：

```
$("#dataTable tbody").on("click", "tr", function(event){
    alert($(this).text());
}); 
```

所以你基本上为包装器传递了一个“容器”。不推荐live的原因是它可以写​​成这样的“on”语法：

```
$(document).on("click", '.house td[red]', function() {
              alert('ok');
          }); 
```

你可以看到效率不是很高。可能还有更多:) 所以你想改变它是件好事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T13:52:45.483

将其用作 -

```
$(document).on("click", ".house td[red]", function() {
  alert('ok');
}); 
```

更有效的方法是使用`.on()`元素的直接父级 -

```
$('.house').on("click", "td[red]", function() {
      alert('ok');
}); 
```

阅读[此处](https://stackoverflow.com/questions/8065305/whats-the-difference-between-on-and-live-or-bind)`live`以更好地理解和之间的区别`on`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T13:53:01.727

`on()`是一个万事俱备的功能，可以以不同的方式工作——包括直接事件和委托事件。`live()`是实现委托事件的一种手段。这是`on()`通过将过滤器作为参数 2 传递并将回调传递到参数 3 来实现的：

```
$(".house").on("click",  'td[red]', function() {
    alert('ok');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T13:56:04.840

```
$(".house td[red]").live("click", function() {
    alert('ok');
}); 
```

将直接转换为：

```
$(document).on("click", ".house td[red]", function() {
    alert('ok');
}); 
```

但是您可以通过指定绑定时已知的最近的容器来获得一些性能：

```
$('#someContainer').on("click", ".house td[red]", function() {
    alert('ok');
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T13:52:08.670

```
$(document).on('click', '.house td[red]', function(){
    alert('ok');
}); 
```

Document 是我们希望将处理程序附加到的静态元素。

第一个参数是事件

第二个参数是选择器

第三个参数是您希望在触发事件时针对选择器运行的函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-14T13:52:27.377

这是一个三参数变体，您可以选择“气泡”点：

```
$('body').on('click', '.house td[red]', function() { alert("ok"); }); 
```

不同之处在于，*实际*事件处理程序的放置点在您的控制之下（就像使用also-deprecated 一样`.delegate()`）。您可以选择您喜欢的任何父元素，这在复杂页面中是一个不错的功能。（例如，在您的情况下，您可以将处理程序放在所有“.house”元素而不是主体上。）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-14T13:52:29.267

尝试这个，

```
$(document).on("click", ".house td[red]", function() {
     alert('ok');
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-14T13:52:58.853

```
$(document).on("click",".house td[red]",function(){
     alert('ok');
}); 
```

# node.js - 500 错误：ENOENT，打开 'C:\Users\Gilbert\WebstormProjects\games\views\layout.hbs

> ID：11953778
> 
> 赞同：3
> 
> 时间：2012-08-14T13:51:19.613
> 
> 标签：node.js, handlebars.js, webstorm

我收到此错误：

```
500 Error: ENOENT, open 'C:\Users\Gilbert\WebstormProjects\games\views\layout.hbs 
```

但我的项目没有引用这个文件。当尝试使用 HBS 呈现一个简单的测试页面时，我使用了一个预生成的快速应用程序，该应用程序创建了一个 layout.jshtml 文件但删除了该文件。

应用程序.js：

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'hbs');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(require('less-middleware')({ src: __dirname + '/public' }));
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

路线/index.js：

```
/*
* GET home page.
*/

exports.index = function(req, res){
  res.render('hi.hbs', { title: 'Express' });
}; 
```

意见/hi.hbs：

```
<h1>IT WORKS</h1> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T20:42:37.517

使用 HBS，您必须手动禁用对布局的需求，`layout:false`这应该在应用程序中完成`view options`以使其成为全局应用程序。

# visual-studio-2010 - VS 2010 从网络驱动器调试

> ID：11953783
> 
> 赞同：1
> 
> 时间：2012-08-14T13:51:34.040
> 
> 标签：visual-studio-2010, debugging, remote-debugging

我正在构建的 WPF 应用程序有问题。所有开发文件都位于网络驱动器上。不，没有选择将它们移动到我的开发机器（我有一个小型 SSD ......请不要开玩笑;-)）。

我遇到的问题是让 VS 调试应用程序。我点击调试，它通过构建过程，然后停止。我在底部的状态中看到“构建成功”消息，但仅此而已......没有调试发生，应用程序没有启动，等等......是的，应用程序工作，我只需运行即可验证/bin/debug 位置的应用程序。

我尝试添加：

```
<loadFromRemoteSources enabled="true"> 
```

到 devenv.exe.config。

我还尝试了其他帖子（http://stackoverflow.com/questions/974612/edit-and-run-net-projects-from-network-shares）中所述的 caspol 东西，以启用 FullTrust to -allcode，以及作为网络驱动器本身，没有任何变化。

请帮助...我真的需要能够调试！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:38:34.463

答案正盯着我的脸。出于某种原因，所有开发文件都是符号链接。我需要启用 FullTrust：

```
fsutil behavior set SymlinkEvaluation L2L:1 R2R:1 L2R:1 R2L:1 
```

# php - 如何让 Zend Framework 项目在 IIS 上运行？

> ID：11953784
> 
> 赞同：0
> 
> 时间：2012-08-14T13:51:34.580
> 
> 标签：php, zend-framework, iis

我正在尝试让 Zend Framework (ver 9 Studio) 在我的本地 IIS 服务器上部署并实际运行。

我使用内置向导创建了一个非常简单的小应用程序。如果我在 Zend 附带的 Apache 服务器上运行它，它工作得很好。但我试图复制文件并在 IIS 上运行它，但我得到了错误。

似乎它缺少库的链接。我尝试手动隔离并获取丢失的库并将它们放入 /library 文件夹。这是一个好的开始，但我仍然会遇到其他错误。

我在那里找到了一个教程，其中包含在 IIS 中运行的 Zend 项目的示例。但是，它几乎与我创建的项目存在相同的问题。更多缺失的库。本教程包括一些巧妙的新技巧，例如 web.config，它应该取代 Apache 使用的 .htaccess 的需要。

这就是我做到了。这一切都非常令人沮丧。有没有人有一个像那个教程承诺的简单例子？如果没有，只是一些好的信息会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:17:35.373

你需要重写模块，[Rob Allen 有一个小教程](http://akrabat.com/winphp-challenge/zend-framework-url-rewriting-in-iis7/)可以帮助你。最大的问题通常是重写模块，因为你必须单独安装它。

# wpf - TabControl 和 MVVM

> ID：11953792
> 
> 赞同：0
> 
> 时间：2012-08-14T13:52:01.867
> 
> 标签：wpf, mvvm, wpf-controls, tabcontrol

我很难让 TabControl 在 MVVM 架构中完美运行。目前我正在做的是将 TabControl 的 ItemsSource 属性绑定到 ObservableCollection Screens 属性。每次我想添加新选项卡时，我都会创建足够的 ViewModel，将其添加到 Screens，然后通过数据模板显示足够的 View。

问题：

1) 似乎我的 ViewModel 的析构函数在完整的应用程序关闭之前不会被触发。我不确定数据模板是否是造成这种情况的原因。当我从 Screens 集合中删除 ViewModel 时，它应该可用于 GC，因为我所做的只是将它添加到显示视图的 Screens 集合中，然后当发出关闭视图的命令时，我将其从集合中删除。之后我尝试强制 Gc.Collect，但 dctor 仍然只在应用程序关闭时触发。我不确定为什么会这样……

1) 在某些数据结构中，无法通过 ElementName 绑定到 ViewModel 的属性，因此一种解决方法是使用 RelativeSource 绑定。但是，当元素（例如视图）被关闭时，这会产生很多绑定异常。这里描述了与我的类似问题：

[删除父级时如何避免绑定错误](https://stackoverflow.com/questions/11474351/how-to-avoid-binding-error-when-parent-is-removed)

在我的情况下，TargetNullValue 和 FallbackValue 没有帮助，我发现的唯一方法是将 ViewModel 作为 StaticResource。这种方法的问题在于，当使用 Screens 集合和数据模板连接 Views 和 ViewModels 时，您不能以通常的方式创建 viewmodels：

```
<UserControl.Resources>
    <vm:SomeViewModel x:Key="someViewModel" />
</UserCpntrol.Resources> 
```

那么，是否有在 MVVM 场景中使用 TabControl 的替代方法，或者我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:13:31.887

关于析构函数部分，不应该使用析构函数。这是实现[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)接口的推荐方法。这将帮助您自动清理对象并让 GC 为您完成脏活：

> 使用此方法关闭或释放实现此接口的类的实例所持有的非托管资源，例如文件、流和句柄。按照惯例，此方法用于与释放对象持有的资源或准备对象以供重用相关的所有任务。

我最喜欢的 MVVM 教程使用 Tabcontrol 作为中央 UI 控件：[具有模型-视图-视图模型设计模式的 WPF 应用程序](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)。这可能会为您提供一种不错且可行的方法的提示。

# c# - 静态线程安全

> ID：11953799
> 
> 赞同：1
> 
> 时间：2012-08-14T13:52:19.613
> 
> 标签：c#, static, race-condition

我遇到了一些这样的代码。

```
public class ConnectionUtility
{
    private static SqlConnection con;

    public static SqlConnection GimmeConnection()
    {
        if(con==null)
            con = new SqlConnection();
        return con;
    }
} 
```

这是在 ASP.NET Web 应用程序中。是否可以期望存在竞争条件，其中一个请求/页面尝试打开/关闭连接上的执行操作，而其他请求也尝试执行这些操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:55:00.850

是的，那里绝对有可能出现竞争条件。多个线程可能同时调用`GimmeConnection()`并创建一个新连接，因此在初始化`con`.

在 .NET 中执行此操作的正确方法实际上相当简单：

```
public class ConnectionUtility
{
    private static SqlConnection con = new SqlConnection();

    public static SqlConnection GimmeConnection()
    {
        return con;
    }
} 
```

这保证工作，没有任何竞争条件。

当然，还有另一种可能的竞态条件，这不是固定的：

因为您创建了一个全局可访问的连接，所以多个线程很容易同时使用它，这是不安全的。

如果连接被多个线程使用，则这些访问必须显式序列化，例如通过锁定。

当然，*最好*的做法仍然是首先[避免单例](http://jalf.dk/singleton/)......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:54:29.463

是的...您不应该沿着多个线程共享单个静态连接。这不仅是一个竞争条件问题 - 您将有许多网页试图同时使用相同的连接，但这是行不通的。

您可以在“con”上使用 [ThreadStatic] 属性，这将使其在线程范围内具有全局性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:55:14.470

是的，你可以期待这样的竞争条件。好点子！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T14:29:09.537

两种竞争条件，一种可能无害，一种可怕。还有一个逻辑错误。

潜在无害的是在构造函数逻辑中：

```
if(con==null)
  con = new Thing(); 
```

如果您想使用单个对象作为优化，这可能是无害的，但是有一段时间使用多个对象仅仅是次优而不是错误的（并非每场比赛都是世界末日）。这取决于它是什么`Thing`以及如何使用它。

灾难性的比赛是：

```
return con; 
```

因为在这种情况下类型是`SqlConnection`，它不是线程安全的，所以每次使用该属性都是一场正在招致灾难的竞赛。

逻辑错误在于让单例缓存一个对象，该对象生成起来很轻，并且它处理自己的线程安全池的重部分。由于这种汇集，你不应该坚持`SqlConnection`超过绝对必要的时间。事实上，如果你在一次使用和另一次使用之间存在差距（虽然本身就是一种难闻的气味），你应该关闭它并重新打开它。这使得`SqlConnection`为​​您提供的线程安全池在使用之间以最佳状态工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T13:56:24.520

每当编写单例时，您应该使它们成为线程安全的：

```
 class Singleton 
  {
    private Singleton() { }
    private static volatile Singleton instance;

    public static Singleton GetInstance() 
    {
       // DoubleLock
       if (instance == null) 
       {
          lock(m_lock) {  
             if (instance == null) 
             { 
                instance = new Singleton();
             }   
          }
       }
       return instance;
    }

    // helper
    private static object m_lock = new object();
  } 
```

# asp.net - Asp.net c#，多个进程后回滚或提交

> ID：11953800
> 
> 赞同：1
> 
> 时间：2012-08-14T13:52:22.907
> 
> 标签：asp.net, asp.net-mvc, advantage-database-server

我想在多个进程后使用 Rollback() 或 commit() 函数。

没有错误，但它不会 commit() 来更新数据库。

这是我的示例代码，

```
public void startTransaction(){
    using(Ads_A_Connection = new AdsConnection(Ads_A_connection_string))
    using(Ads_B_Connection = new AdsConnection(Ads_B_connection_string))
    {
        Ads_A_Connection.Open();
        Ads_B_Connection.Open();

        AdsTransaction aTxn = Ads_A_Connection.BeginTransaction();
        AdsTransaction bTxn = Ads_B_Connection.BeginTransaction();

        try{
            string aResult = this.process1(Ads_A_Connection);       
            this.process2(Ads_B_Connection, aResult);       
            this.process3(Ads_A_Connection. Ads_B_Connection);

            aTxn.Commit();
            bTxn.Commit();
            // there is no error, but it couldn't commit.
        }catch(Exception e){
            aTxn.Rollback();
            bTxn.Rollback();
        }
    }
}

public string process1(conn){
    // Insert data
    return result;
}

public void process2(conn. aResult){
    // update
}

public void process3(aConn, bConn){
    // delete
    // update
} 
```

我想，这是因为超出了使用范围。因为我试图将所有代码放入 startTransaction() 方法中，所以它可以工作。但它看起来太脏了。

在多个（METHOD）过程之后如何使用 rollback() 或 commit()？

有人知道，请给我建议。

谢谢！

[编辑]

我只是在连接之前添加 TransactionScope，

```
using (TransactionScope scope = new TransactionScope())
{
   using(Ads_A_Connection = new AdsConnection(Ads_A_connection_string))
   using(Ads_B_Connection = new AdsConnection(Ads_B_connection_string))
   {
     .
     . 
```

但它会出错，它说“**错误 5047：事务命令不在有效序列中。** ”

我需要更多提示：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:29:23.327

为了扩展 Etch 提到的内容，它们是手动管理连接上的事务的几个问题：

*   您需要围绕您的方法传递 SQL 连接
*   完成后需要手动记住提交或回滚
*   如果您在一个事务下管理多个连接，您应该真正使用 DTC 或 XA 将事务注册到分布式/2 阶段事务中。

[Advantage 数据库服务器支持](http://devzone.advantagedatabase.com/dz/webhelp/advantage8.1/mergedProjects/ads-dotnet/base_ado_net_doc/transaction_support_in_the_advantage_net_data_provider.htm)TransactionScope ，但您需要启用[MSDTC 服务](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679938%28v=vs.85%29.aspx)，并且可能还需要启用 XA 合规性。

请注意，我假设 .NET 客户端具有某种连接池机制的优势——这使得获取连接的成本非常轻。

最终，这意味着您的代码可以重构为以下内容，更易于维护：

```
private void Method1()
{
    using(Ads_A_Connection = new AdsConnection(Ads_A_connection_string))
    {
        Ads_A_Connection.Open();
        string aResult = this.process1(Ads_A_Connection);       
    } // Can logically 'close' the connection here, although it is actually now held by the transaction manager
}

private void Method2()
{
    using(Ads_B_Connection = new AdsConnection(Ads_B_connection_string))
    {
        Ads_B_Connection.Open();
        this.process2(Ads_B_Connection, aResult);       
    } // Can logically 'close' the connection here, although it is actually now held by the transaction manager
}

public void MyServiceWhichNeedToBeTransactional(){
    using(TransactionScope ts = new TransactionScope()) { // NB : Watch isolation here. Recommend change to READ_COMMITTED
        try{
           Method1();
           Method2();
           ts.Complete();
        }
        catch(Exception e){
          // Do Logging etc. No need to rollback, as this is done by default if Complete() not called
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:54:38.237

TransactionScope 是您的朋友！

[交易范围](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)

# vb.net - 如何在 Visual Studio 中更改菜单条文本的前景色？

> ID：11953805
> 
> 赞同：5
> 
> 时间：2012-08-14T13:52:28.183
> 
> 标签：vb.net, visual-studio-2008

默认颜色是黑色，我找不到相关的属性来改变前景色。你能建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T14:18:31.373

ForeColor 可以更改，但我认为您必须在运行时执行此操作：

```
ToolStripMenuItem1.ForeColor = Color.BlanchedAlmond 
```

# sql - 保持 RSS 提要在 sql 数据库中唯一的最佳实践

> ID：11953807
> 
> 赞同：3
> 
> 时间：2012-08-14T13:52:31.980
> 
> 标签：sql, rss, unique, feed

我正在开发一个显示来自不同站点的 RSS 提要的项目。我将它们保存在数据库中，我的程序每 3 小时提取一次并将它们插入到 sql 数据库中。我希望提供者的唯一记录不显示重复的内容。

但问题是一些提供者不提供 GUID 字段，而另一些提供者提供 GUID 字段但不提供 pubdate。还有一些提供者甚至不提供 GUID 或 PubDate 只是标题和链接。

那么要在 sql server 中保持 rss 提要的唯一性，最好的方法是什么？

我应该检查第一个 guid，然后是 pubbdate，然后是链接，然后是标题吗？比较 SQL 中的链接字段以检查唯一性是否是一种好习惯？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:59:24.623

我会开发一个例程，它采用某些关键参数，如标题、来源和正文，然后将它们组合起来创建一个 CRC 哈希。然后将散列存储为提要的属性，并在添加新提要之前检查匹配的散列。

我不确定您的环境限制是什么，但这里有一个在 C# 中计算 CRC-32 的示例：http: [//damieng.com/blog/2006/08/08/calculating_crc32_in_c_and_net](http://damieng.com/blog/2006/08/08/calculating_crc32_in_c_and_net)

# php - 无法从 Google Analytics 核心报告结果 JSON 对象中检索 query.start-index 变量

> ID：11953809
> 
> 赞同：0
> 
> 时间：2012-08-14T13:52:33.803
> 
> 标签：php, json, google-analytics

我正在构建一个谷歌分析仪表板并且已经完成了，但我完全被这件真正让我挂断的事情难住了。

当我查询数据集的 GA Core Reporting API 时，我成功获得并能够显示结果，并且一切正常，除了我无法查询 JSON 对象的“start-index”。也就是说，它将显示的第一行（默认 = 1，但 GA 一次只返回 10k 行，因此如果您有一个超过 10k 行的数据集，这将变得至关重要！）。

为了尝试获取这个整数，我使用

```
$start = $results->query.start-index; 
```

作为检查以确保我没有发疯，“max-results”就在 JSON 对象中的“start-index”旁边，这很好用：

```
$max = $results->totalResults; 
```

这是 GA JSON 对象（根据[https://developers.google.com/analytics/devguides/reporting/core/v3/reference#startIndex](https://developers.google.com/analytics/devguides/reporting/core/v3/reference#startIndex)）

```
{
"kind": "analytics#gaData",
 "id": string,
"selfLink": string,
"containsSampledData": boolean,
"query": {
  "start-date": string,
  "end-date": string,
  "ids": string,
  "dimensions": [
    string
  ],
  "metrics": [
    string
  ],
  "sort": [
    string
  ],
  "filters": string,
  "segment": string,
  "start-index": integer,
  "max-results": integer
},
"itemsPerPage": integer,
"totalResults": integer,
"previousLink": string,
"nextLink": string,
"profileInfo": {
  "profileId": string,
  "accountId": string,
  "webPropertyId": string,
  "internalWebPropertyId": string,
  "profileName": string,
  "tableId": string
},
"columnHeaders": [
  {
    "name": string,
    "columnType": string,
    "dataType": string
  }
],
"rows": [
  [
    string
  ]
],
"totalsForAllResults": [
  {
    metricName: string,
    ...
  }
]
} 
```

帮助！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:02:37.350

Property names in PHP can contain neither `.` nor `-`. Your code is interpreted as a string concatenation of an array with the result of a mathematical subtraction of two strings (don't even begin to try and understand this if you don't see what I mean from that description).

PHP is actually a complete pain in the rear-end when it comes to this point, you have to force it to convert the decoded data to associative arrays instead of objects by passing `TRUE` to the second argument of `json_decode()`. You can then access the data by array key:

E.g.

```
$results = json_decode($jsonString, TRUE);
$start = $results['query']['start-date']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:30:45.753

所以我仍然不完全确定*为什么*它会这样工作，但我已经使用以下函数成功地提取了正确的起始索引号：

```
function getStartIndex(&$results) {
  $query = $results->getQuery();

  foreach ($query as $paramName => $value) {
    if($paramName == "start-index")
    $startIndex = $value;
  }
  return $startIndex;
} 
```

这实质上是遍历整个 $query 关联数组，直到找到参数与“start-index”匹配的数组，然后返回该值。

# java - 如何从 JAVA 程序中的套接字获得响应延迟？

> ID：11953815
> 
> 赞同：-1
> 
> 时间：2012-08-14T13:53:00.183
> 
> 标签：java, multithreading, sockets

```
inputstream is;

is.read()

{
    perform a function
} 
```

写入同一个套接字

我想要阅读和写作之间的延迟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:56:36.767

您可以 read() 数据和`Thread.sleep(millis);`要添加的时间量。

这只是一个近似值，WAN 模拟器最适合用于专业测试（而且价格昂贵；）

# qooxdoo - Qooxdoo 和 JS-Ctypes 生成源码

> ID：11953818
> 
> 赞同：0
> 
> 时间：2012-08-14T13:53:09.237
> 
> 标签：qooxdoo, jsctypes

我`JS-Ctypes`在我的`Qooxdoo`项目中使用。当我尝试生成源代码时，出现以下错误：

> 扫描库 -Unknown operator u'import

使用以下函数时会出现此错误：

`Components.utils.import("resource://gre/modules/ctypes.jsm");`

有谁知道如何让 qooxdoo 识别 js-ctypes 和这个操作符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:09:55.873

是这个词的用法`import`。根据 ECMA 规范，这是一个“未来的保留字”，您不应该使用它们（标识符不允许与保留字匹配）。这就是生成器退出的原因。解决方案只是为此方法选择另一个标识符，例如`import_`就足够了。

但至少可以说，错误信息很糟糕。如果您想提供帮助，请为此打开[错误报告](http://bugzilla.qooxdoo.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:45:37.210

这个问题的解决方案是：

Components.utils["import"];

有关更多信息，请点击此链接：http: [//qooxdoo.678.n2.nabble.com/Qooxdoo-and-JS-Ctypes-problem-while-generating-source-tc7580977.html](http://qooxdoo.678.n2.nabble.com/Qooxdoo-and-JS-Ctypes-problem-while-generating-source-tc7580977.html)

# c++ - boost::program_options“有时”挂在手臂上

> ID：11953822
> 
> 赞同：8
> 
> 时间：2012-08-14T13:53:21.303
> 
> 标签：c++, boost, arm, boost-program-options

目前我正在使用`boost::program_options`解析 BeagleBoard（基于 ARM 的处理器）上的配置文件。我的程序是多线程的并与`boost 1.45 multithreaded`库链接。

我的程序在解析配置文件时似乎只是挂起

```
namespace po = boost::program_options;
po::options_description desc("Options");
uint32_t option1=0;
std::vector<std::string> optionsString;
std::cout<<"Before adding options"<<std::endl;
desc.add_options()
    ("option1",
     po::value<uint32_t>(&option1), "...")
    ("finaloption",
     po::value<std::vector<std::string> >(&optionsString)->multitoken(), "string of options");
//Never gets here
std::cout<<"After adding options"<<std::endl; 
po::variables_map vm;
std::cout<<"Starting program"<<std::endl; 
```

程序在打印出“添加选项后”之前挂起。如果我通过 gdb 运行程序并停止它并进行回溯，它只会显示它在“永远不会到达这里”评论之前就在线。回溯的顶部只是在

```
#0 ??
#1 __lll_lock_wait lowlevellock.c:47
#2 __pthread_mutex_lock pthread_mutex_lock.c:61
#3 in boost::shared_ptr<boost::program_options::option_description>* std::__uninitialized_move_a<boost::shared_ptr<boost::program_options::option_description>*, boost::shared_ptr<boost::program_options::option_description>*, std::allocator<boost::shared_ptr<boost::program_option::option_description> > >(boost::shared_ptr<boost::program_optionns::option_description>*, boost::shared_ptr<boost::program_options::option_description>*, std::allocator<boost::shared_ptr<boost::program_options::option_description> >&) () from /usr/local/lib/libboost_program_options-mt.so.1.45.0
#4 in std::vector<boost::shared_ptr<boost::program_options::option_description>, std::allocator<boost::shared_ptr<boost::program_options::option_description> > >::_M_insert_aux(__gnu_cxx::__normal_iterator<boost::shared_ptr<boost::program_options::option_description>, std::vector<boost::shared_ptr<boost::program_options::option_description>, std::allocator<boost::shared_ptr<boost::program_options::option_description> const&)() from /usr/local/lib/libboost_program_options-mt.so.1.45.0
#5 in boost::program_options::options_description::add(boost::shared_ptr<boost::program_options::option_description>) () from /usr/local/lib/libboost_program_options-mt.so.1.45.0 
```

...（如果您想要更多，请告诉我）

有什么想法吗？该程序在 x86 机器上运行良好

编辑：更多信息，这似乎不会在优化关闭时发生（使用 -O2 编译，这将相当一致地发生）。

Edit2：进一步的分析表明，这仍然会在优化关闭时发生，-O0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:24:52.453

这可能是与您如何构建 boost 和您的应用程序有关的问题。如果为 thumb 和没有 thumb 编译，互斥锁实现是不同的。确保使用相同的拇指设置编译应用程序和 boost 库。

`user-config.jam`这是我用来编译的示例`boost`：

```
if [ os.name ] = CYGWIN || [ os.name ] = NT
{
    HOST_TAG = windows ;
}
else if [ os.name ] = LINUX
{
    HOST_TAG = linux-x86 ;
}
else if [ os.name ] = MACOSX
{
    HOST_TAG = darwin-x86 ;
}

modules.poke : NO_BZIP2 : 1 ;
modules.poke : NO_GZIP : 1 ;

LIB_ROOT = /home/user/lib ;

NDK_ROOT = $(LIB_ROOT)/android-ndk-r8c ;

LLVM_VERSION = 3.1 ;
LLVM_NAME = llvm-$(LLVM_VERSION) ;
LLVM_TOOLCHAIN_ROOT = $(NDK_ROOT)/toolchains/$(LLVM_NAME) ;
LLVM_TOOLCHAIN_PREBUILT_ROOT = $(LLVM_TOOLCHAIN_ROOT)/prebuilt/$(HOST_TAG) ;
LLVM_TOOLCHAIN_PREFIX = $(LLVM_TOOLCHAIN_PREBUILT_ROOT)/bin/ ;

TOOLCHAIN_VERSION = 4.6 ;
TOOLCHAIN_NAME = arm-linux-androideabi-$(TOOLCHAIN_VERSION) ;
TOOLCHAIN_ROOT = $(NDK_ROOT)/toolchains/$(TOOLCHAIN_NAME) ;
TOOLCHAIN_PREBUILT_ROOT = $(TOOLCHAIN_ROOT)/prebuilt/$(HOST_TAG) ;
TOOLCHAIN_PREFIX = $(TOOLCHAIN_PREBUILT_ROOT)/bin/arm-linux-androideabi- ;

using clang : $(TOOLCHAIN_VERSION) :
$(LLVM_TOOLCHAIN_PREFIX)clang :
<compileflags>"-gcc-toolchain $(TOOLCHAIN_PREBUILT_ROOT)"
<compileflags>"-isystem $(LLVM_TOOLCHAIN_PREBUILT_ROOT)/lib/clang/$(LLVM_VERSION)/include"
<compileflags>"-isysroot $(NDK_ROOT)/platforms/android-9/arch-arm/usr/include"
<compileflags>-std=gnu++11
<compileflags>-stdlib=libc++
<compileflags>-fomit-frame-pointer
<compileflags>-ffast-math
<compileflags>"-target armv7-none-linux-androideabi"
<compileflags>-march=armv7-a
<compileflags>-mfloat-abi=softfp
<compileflags>-mfpu=neon
<compileflags>-DPAGE_SIZE=sysconf\\(_SC_PAGESIZE\\)
<compileflags>-I$(NDK_ROOT)/boost/include
<compileflags>-I$(NDK_ROOT)/sources/cxx-stl/gnu-libstdc++/$(TOOLCHAIN_VERSION)/include
<compileflags>-I$(NDK_ROOT)/sources/cxx-stl/gnu-libstdc++/$(TOOLCHAIN_VERSION)/libs//armeabi-v7a/include
<compileflags>-I$(NDK_ROOT)/platforms/android-9/arch-arm/usr/include
<linkflags>-s
<archiver>$(TOOLCHAIN_PREFIX)ar
<ranlib>$(TOOLCHAIN_PREFIX)ranlib
; 
```

请注意，在此示例中，我没有在启用 thumb 的情况下进行编译。

# javascript - HTML5 模板上未显示希伯来语字符

> ID：11953823
> 
> 赞同：5
> 
> 时间：2012-08-14T13:53:21.883
> 
> 标签：javascript, html, encoding, cufon, right-to-left

我一直在尝试在[Thom Sander 的](http://demo.html5xcss3.com/demo.php?cat=html5themes&host=templatesmonster&temp=thomsander)免费 html5 模板（[下载链接](http://download.html5xcss3.com/down.php?cat=html5themes&host=templatesmonster&temp=thomsander)）中嵌入一些希伯来语字符。

例如，我尝试将左侧菜单项文本更改为希伯来语，即

```
Home Page => עמוד הבית 
```

由于某种原因，根本没有显示希伯来字符。

当我在文档的其他位置添加希伯来语时，它显示正确。起初我认为这可能是一个编码问题，但`head`编码似乎是有效的：`UTF-8`. 我认为可能有一些 JS 代码忽略了希伯来语文本，但我不确定。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:00:32.307

您无法将希伯来语字符嵌入您的网站的原因是该模板使用的是[cufon](https://github.com/sorccu/cufon/wiki/)技术，该技术不支持从右到左的语言。

> [计划特点](https://github.com/sorccu/cufon/wiki/Known-bugs-and-issues)：
> 
> *   支持从右到左和双向文本

但是，看起来有一种解决方法：

[将 Cufon 与从右到左的文本一起使用](http://www.isthatthetime.com/code/using-cufon-with-right-to-left-text/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:21:21.880

似乎有人已经找到了解决方案。我没有尝试实施整个解决方案，而是使用您的文件对其进行了测试，并且可以正常工作。

你可以在[这里找到解决方案](http://www.htm.co.il/2009/09/20/%D7%A9%D7%99%D7%9E%D7%95%D7%A9-%D7%91%D7%A4%D7%95%D7%A0%D7%98%D7%99%D7%9D-%D7%91%D7%9C%D7%AA%D7%99-%D7%A8%D7%92%D7%99%D7%9C%D7%99%D7%9D-%D7%94%D7%A4%D7%A2%D7%9D-cufon/)

基本上你只需要使用 CufonRTL.js 就可以同时使用希伯来语和 Cufon.js。您可以在博客文章的开头找到 CufonRTL.js 或从[此处下载文件](http://www.htm.co.il/lab/cufon/cufon.rar)

然后你必须加载 CufonRTL.js 并执行类似的东西：

```
 CufonRTL.RTL('#menu a'); 
```

因此，在使用 Cufon 库和自定义字体时，菜单链接将支持希伯来语。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:08:49.957

尝试将此规则添加到 CSS

```
html { unicode-bidi: embed;  } 
```

[http://www.w3schools.com/jsref/prop_style_unicodebidi.asp](http://www.w3schools.com/jsref/prop_style_unicodebidi.asp)

> unicodeBidi 属性与 direction 属性一起使用来设置或返回是否应覆盖文本以支持同一文档中的多种语言。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-14T13:56:29.537

请务必使用：

```
<meta http-equiv='Content-Type' content='Type=text/html; charset=utf-8'> 
```

或者（作为新的 HTML5 标准）：

```
<meta charset='utf-8'> 
```

并尝试在您的 CSS 中添加此属性：

```
unicode-bidi: embed; 
```

您还可以尝试使用[HTML 实体](http://www.danshort.com/HTMLentities/index.php?w=hebrw)而不是 Unicode 字符来显示某些内容：`&#1425;` `&#1426;` `#1427;`

# python - 如何读取文件夹中的文件名并按字母顺序和递增数字顺序访问它们？

> ID：11953824
> 
> 赞同：2
> 
> 时间：2012-08-14T13:53:25.367
> 
> 标签：python, list, filenames, glob

我想问一下如何以正确的顺序（字母顺序和数量增加）有效地处理对文件夹中文件名的访问。

例如，我在一个文件夹中有以下文件：apple1.dat、apple2.dat、apple10.dat、banana1.dat、banana2.dat、banana10.dat。我想读取文件的内容，以便首先读取apple1.dat，最后读取banana10.dat。

谢谢。

这就是我到目前为止所做的。

```
from glob import glob
files=glob('*.dat')
for list in files
# I read the files here in order 
```

但正如所指出的，apple10.dat 出现在 apple2.dat 之前

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T13:57:07.500

```
from glob import glob
import os

files_list = glob(os.path.join(my_folder, '*.dat'))
for a_file in sorted(files_list):
  # do whatever with the file
  # 'open' or 'with' statements depending on your python version 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:00:00.120

试试这个。

```
import os

def get_sorted_files(Directory)
    filenamelist = []
    for root, dirs, files in os.walk(Directory):
        for name in files:
            fullname = os.path.join(root, name)
            filenamelist.append(fullname)
    return sorted(filenamelist) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:00:45.923

您必须先将数字转换为 int。这样做需要将名称分解为字符串和数字，将数字转换为 int 并排序。也许其他人有更短或更有效的方法。

```
 def split_in_two(str_in):
        ## go from right to left until a letter is found   
        ## assume first letter of name is not a digit
        for ctr in range(len(str_in)-1, 0, -1):
            if not str_in[ctr].isdigit():
                return str_in[:ctr+1], str_in[ctr+1:]  ## ctr+1 = first digit
        ## default for no letters found
        return str_in, "0"

    files=['apple1.dat', 'apple2.dat', 'apple10.dat', 'apple11.dat', 
           'banana1.dat', 'banana10.dat', 'banana2.dat']
    print sorted(files)   ## sorted as you say

    sort_numbers = []
    for f in files:
        ## split off '.dat.
        no_ending = f[:-4]
        str_1, str_2 = split_in_two(no_ending)
        sort_numbers.append([str_1, int(str_2), ".dat"])
    sort_numbers.sort()
    print sort_numbers 
```

# graphics - 光线追踪中的区域照明

> ID：11953825
> 
> 赞同：3
> 
> 时间：2012-08-14T13:53:26.453
> 
> 标签：graphics, area, raytracing, lighting

我有一个关于光线追踪中区域照明的快速问题。我正在[从地面上的光线追踪中](http://www.raytracegroundup.com/index.html)学习这个主题，当没有应用抗锯齿时，我的区域光的结果是这样的：![没有 AA](../Images/6495e75dbb4915c4e0a746c140658165.png)

如您所见，图像中有很多噪点。当我应用抗锯齿时，它看起来很好，并且在应用 256x AA 时看起来像这样：

![AA 256 倍](../Images/7d10da89fa86a8aee76bbd2928d0dec9.png)

[阴影颜色的改变是微不足道的，我改变了阴影的一些属性]

我的问题，这是区域灯的行为方式还是我做错了什么？因为渲染第一个只需要 4*秒*，但后一个需要将近 20*分钟*。感觉好像有什么不对劲。

我的点光源类和面光源类之间的唯一区别是`get_direction`功能。

**点光源的`get_direction`作用：**

```
virtual Vec get_direction(ShadeRec& sr)
{
return Vec(position.x-sr.hit_point.x, position.y-sr.hit_point.y, position.z-sr.hit_point.z).norm();
} 
```

**区域光的`get_direction`作用：**

```
virtual Vec get_direction(ShadeRec& sr)
{
    Vec newLocation;
    newLocation.x = position.x + radius * (2.0 * rand_float() - 1.0);
    newLocation.y = position.y + radius * (2.0 * rand_float() - 1.0);
    newLocation.z = position.z + radius * (2.0 * rand_float() - 1.0);
    return ((newLocation - sr.hit_point).norm());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T08:36:41.893

您发布的渲染时间对我来说非常有意义：

```
4 seconds * 256 ~= 17 minutes 
```

随机数生成器引入的开销加起来就是其余部分。

# visual-studio-2008 - OpenCV - cvLoadImage() 无法加载 JPG 图像

> ID：11953832
> 
> 赞同：2
> 
> 时间：2012-08-14T13:53:52.713
> 
> 标签：visual-studio-2008, opencv, jpeg

我是 OpenCV 的新手，想问一个关于加载图像的基本问题。

我在 windows7 上使用 OpenCV2.0 和 Visual Studio 2008。

根据我的阅读和理解，有“cvLoadImage()”函数可以在 OpenCV 中加载图像。

我目前正在尝试非常基本的程序来在 Windows 中加载和显示图片。

这是我的代码：

```
#include "stdafx.h"
#include <cv.h>
#include <highgui.h>

int _tmain(int argc, _TCHAR* argv[])
{
  IplImage* img = cvLoadImage("C:/hello.jpg");

  if (!img)
    printf("Image can NOT Load!!!\n");

  cvNamedWindow("myfirstwindow");
  cvShowImage("myfirstwindow", img);

  cvWaitKey(0);
  cvReleaseImage(&img);

return 0;
} 
```

结果是我可以得到灰色的窗口，但没有显示图像。我尝试过其他解决方案，例如将图像放在项目文件夹中然后调用它，但仍然有相同的结果。

但是，当我尝试使用其他类型的图像（例如 .png）时，它会成功加载。

有没有人以前有同样的问题或知道解决这个问题的任何解决方案？

谢谢，

-jwiil-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:51:15.467

这是因为您为程序提供的路径实际上并没有指向任何东西。

如果您将图像放在同一个文件夹中，那么您需要调用

```
cvLoadImage("hello.jpg"); 
```

如果图像在其他任何地方，那么正如@vasile 评论的那样，您需要调用

```
cvLoadImage("C:\\hello.jpg"); 
```

我还编辑了您的代码，因此如果图像未正确加载，它将退出

```
#include "stdafx.h"
#include <cv.h>
#include <highgui.h>

int _tmain(int argc, _TCHAR* argv[])
{
  IplImage* img = cvLoadImage("C:/hello.jpg");

  if (!img)
  {
    printf("Image can NOT Load!!!\n");
    return 1;
  }

  cvNamedWindow("myfirstwindow");
  cvShowImage("myfirstwindow", img);

  cvWaitKey(0);
  cvReleaseImage(&img);

return 0;
} 
```

# android - 移动背景，前面的静止图像，使用视图

> ID：11953834
> 
> 赞同：0
> 
> 时间：2012-08-14T13:54:06.107
> 
> 标签：android, background

我想要一个视图（不使用surfaceview）背景，它是一个移动的道路/树木背景，前面有一辆静止的车辆（车辆图像将是静止的，但给人的印象是它正在移动）。重复滚动背景磁贴的最优雅方法是什么？

PS 用户不会与之交互，尽管我需要更改前面的图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:46:47.333

答案是无限滚动的滚动视图，背景被分成至少两块。对于前面行驶的车辆，我根据[Mixing Android Views 和 GLSurfaceView](https://stackoverflow.com/questions/8128896/mixing-android-views-and-glsurfaceview)使用了框架视图。

PS 在[https://github.com/blessenm/SlideshowDemo](https://github.com/blessenm/SlideshowDemo)上相对未记录的示例代码为我提供了滚动视图所需的大部分内容。

# iphone - 如何绘制带有巨大 y 轴的 coreplot 条形图？

> ID：11953839
> 
> 赞同：1
> 
> 时间：2012-08-14T13:54:25.590
> 
> 标签：iphone, ios, core-plot

我正在使用 CorePlot 创建一个小型 iPhone 应用程序。该图由 10 个条形图组成。不幸的是，y 值可能在 0 到 100 万之间有所不同，因此我创建的绘图空间具有相当大的 yRange

```
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(yAxisStart)
                                                length:CPTDecimalFromDouble(yAxisLength)]; 
```

我遇到的是我的应用程序在加载图表时真的很慢，我可以将此问题定位为 yAxisLength 的相当大的值。我已经删除了 y 轴上刻度线的创建，但性能仍然很差。谁能给我一个提示如何提高性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T23:50:57.440

确保更新标签参数，即使您不需要任何标签或刻度。默认标签策略会创建刻度线并将标签分开一个单位。这就是为什么大轴范围会大大降低您的应用程序的速度。它还为每个标签创建一个单独的核心动画层。创建 100 万个标签需要很长时间并且会占用大量内存。

如果您不需要任何刻度或标签，请将标签策略设置为`CPTAxisLabelingPolicyNone`. 否则，对各种标签属性进行必要的调整（使用哪些取决于您选择的策略），以便在轴范围内有合理数量的刻度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T06:43:43.917

```
 y.labelingPolicy        = CPTAxisLabelingPolicyAutomatic;
    y.majorGridLineStyle    = nil;
    y.minorGridLineStyle    = nil;
    y.axisConstraints       = [CPTConstraints constraintWithLowerOffset:0.0];
    y.majorIntervalLength = CPTDecimalFromDouble(maxRange/2.0); 
```

为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:52:01.540

我没有使用过CorePlot，但也许您可以在尝试绘制数据之前对其进行缩放。

如果 y 尺度范围高达一百万，则将 y-max 和所有 y 值除以 100,000。然后只需将“（x100,000）”之类的内容添加到y轴标签。

# css - 使用 positon:fixed 时指定左右度量；

> ID：11953846
> 
> 赞同：-1
> 
> 时间：2012-08-14T13:54:41.557
> 
> 标签：css, position, responsive-design

我正在制作一个需要针对不同屏幕宽度调整宽度的导航菜单，我不希望菜单向下滚动页面，所以我设置了它，`position:fixed;`但是当我尝试设置左右测量以使其与边缘有一些间距时屏幕似乎只想遵循第一条指令..无论是向左还是向右，哪一个在css中都排在第一位

有什么我可以不使用左右做的吗，我可以在使用位置时使用边距：固定吗？和宽度：自动；?

我解决了下面的问题

[http://jsfiddle.net/6cbvE/1/](http://jsfiddle.net/6cbvE/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:59:15.470

我不是 100% 确定我理解你的问题。但是有一个宽度会覆盖你设置左右（并且只需要一个）。如果您只是一起删除宽度，它将在中间排列（或者至少是左右的正确值）。

[演示](http://jsfiddle.net/scispear/fsn3n/)

如果您实际上正在寻找固定宽度并固定在页面上，我会这样做：

[演示](http://jsfiddle.net/scispear/fsn3n/1/)

如果那不是你想要的，请告诉我。

# asp.net-mvc - 如何循环通过类型 SyndicationFeed 将 RSS 输出到视图？

> ID：11953847
> 
> 赞同：0
> 
> 时间：2012-08-14T13:54:41.493
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

我想在我的视图中输出我的 RSS 提要，如下所示：

```
@ModelType IEnumerable(Of MyBlog.RssModel)

<table>
    <tr>
        <th>
            Title
        </th>
        <th>
            Description
        </th>
        <th>
            Link
        </th>
        <th></th>
    </tr>

@For Each item In Model
    Dim currentItem = item
    @<tr>
        <td>
            @Html.DisplayFor(Function(modelItem) currentItem.Title)
        </td>
        <td>
            @Html.DisplayFor(Function(modelItem) currentItem.Description)
        </td>
        <td>
            @Html.DisplayFor(Function(modelItem) currentItem.Link)
        </td>
        <td>
        </td>
    </tr>
Next

</table> 
```

这是我的代码：

```
Function ShowFeed() As ActionResult

    Dim feedUrl = "http://www.nytimes.com/services/xml/rss/nyt/HomePage.xml"
    Dim feed As SyndicationFeed = GetFeed(feedUrl)

    Dim model As IList(Of RssModel) = New List(Of RssModel)()

    For Each item As SyndicationItem In feed.Items
        Dim rss As New RssModel()
        rss.Title = item.Title.ToString
        rss.Description = item.Summary.ToString
        rss.Link = item.Links.ToString

        model.Add(rss)
    Next

    Return View(model)

End Function 
```

产生意想不到的结果：

> 标题 描述 链接
> System.ServiceModel.Syndication.TextSyndicationContent
> System.ServiceModel.Syndication.TextSyndicationContent
> System.ServiceModel.Syndication.NullNotAllowedCollection 1[System.ServiceModel.Syndication.SyndicationLink] System.ServiceModel.Syndication.TextSyndicationContent System.ServiceModel.Syndication.TextSyndicationContent System。 ServiceModel.Syndication.NullNotAllowedCollection`1[System.ServiceModel.Syndication.SyndicationLink]`1[System.ServiceModel.Syndication.SyndicationLink]
> System.ServiceModel.Syndication.TextSyndicationContent
> System.ServiceModel.Syndication.TextSyndicationContent
> System.ServiceModel.Syndication.NullNotAllowedCollection`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:58:28.927

您`Return View(viewModel)`返回的是单个 RssModel，而不是 RssModel 列表。您应该创建一个 IEnumerable(of RssModel) 并将其填充到 For Each 循环中，然后将 IEnumerable 返回给视图。

> > 编辑：使用从 c# 到 vb 的代码转换器，但这应该会告诉你进步。

```
Dim model As IList(Of RssModel) = New List(Of RssModel)()

For Each item As var In feed
    Dim rss As New RssModel()
    rss.Something = item.Something

    model.Add(rss)
Next

Return View(model.AsEnumerable(Of RssModel)()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:51:10.640

答案是这样的：

```
Function ShowFeed() As ActionResult

        Dim feedUrl = "http://www.nytimes.com/services/xml/rss/nyt/HomePage.xml"
        Dim feed As SyndicationFeed = GetFeed(feedUrl)

        Dim model As IList(Of RssModel) = New List(Of RssModel)()

        For Each item As SyndicationItem In feed.Items
            Dim rss As New RssModel()
            rss.Title = item.Title.Text
            rss.Description = item.Summary.Text
            rss.Link = item.Links.First.Uri.ToString

            model.Add(rss)
        Next

        Return View(model)

    End Function 
```

# apache-flex - 从错误的 URL 加载 Textlayout RSL

> ID：11953848
> 
> 赞同：0
> 
> 时间：2012-08-14T13:54:49.047
> 
> 标签：apache-flex, flex4, flex4.5

我有一个 Flex 应用程序。它通过执行以下操作加载一个 swf，该 swf 代表包含一些嵌入字体的已编译 CSS：

```
FlexGlobals.topLevelApplication.styleManager.loadStyleDeclarations("assets/css/fontCSS/Interstate.swf"); 
```

发生这种情况时，flex 应用程序也会尝试加载 assets/css/fontCSS/textLayout_2.0.0.232.swf

我了解我需要文本布局 RSL。但我想从与 flex 应用程序相同的目录加载它，而不是模块的目录。我在那个位置有几个应用程序，我希望它们都共享同一个 RSL。

关于如何强制 RSL 从我的应用 URL 加载的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:10:28.333

原来我的 CSS swf 是在调试模式下编译的，但应用程序处于发布模式。因此，该应用程序正在使用缓存的 swz，然后该模块试图加载调试 swf 版本。

如果编译选项匹配，它不会尝试双重加载，一切都会很高兴。

此外，使用发布版本适用于应用程序的调试和发布版本，所以这就是我为简化部署所做的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:43:06.117

首先，我们在 mxmlc 任务中添加了一些属性：

```
enter code here
              static-rsls="false"
              static-link-runtime-shared-libraries="false"
              verify-digests="false" 
```

然后，必须添加每个库的 RSL 路径。或者，由于所有的 ant 文件都使用一个公共库，我们在 ant-build 项目中创建一个新的 xml 文件（请参阅：[在 ANT 文件中折射类似代码片段](https://stackoverflow.com/questions/11105285/refractor-smiliar-code-snippet-in-ant-files)）

最后，最好在 build.properties 文件中初始化 RSL 的 swf/swz 文件的版本。

# delphi - 如何进行 Indy 10 TIdTCPClient 阻塞调用？

> ID：11953850
> 
> 赞同：0
> 
> 时间：2012-08-14T13:55:03.903
> 
> 标签：delphi, indy10

我有一个非常简单的应用程序，有 10 个客户端和 2 个服务器。每个客户端每 10 秒向两台服务器发送一次心跳。它也可能每隔几分钟，由外部事件触发，向服务器上的 TIdCmdTCPServer 发送另一个字符串并等待响应。

我是网络新手。为了简单起见，我想进行一个阻塞调用（因为系统是如此简单） - 客户端向服务器发送一条消息并阻塞，等待回复（或超时）。

我可以这样做吗？还是我需要缓冲我的消息，并在发送下一条之前在客户端等待回复（或超时）？

Windows 7 专业版、印地 10、德尔福 XE2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:42:09.143

Indy 仅使用阻塞 I/O，因此您要求的是可行的，实际上这正是 Indy 在大多数情况下的工作方式。只需执行写操作并等待它返回，然后您就可以立即执行读取操作。事实上，由于您已经`TIdCmdTCPServer`在服务器端使用，您可以`TIdTCPClient.SendCmd()`在客户端使用发送命令并在单个操作中等待其响应。

请注意，由于 Indy 正在阻塞，因此`TIdTCPClient`如果您不想阻塞主线程，则应在工作线程中使用，这会使 UI 在`TIdTCPClient`忙碌时无响应。

# asp.net-mvc-3 - ASP.NET MVC3：私有资源

> ID：11953854
> 
> 赞同：2
> 
> 时间：2012-08-14T13:55:13.580
> 
> 标签：asp.net-mvc-3, resources, private

有没有办法将资源设为私有。

我有一个视频内容网站。他们上传。文件存储在网络服务器上。

文件被嵌入回网站。

现在，如果我在 google chrome 中查看“源代码”，我会看到：

```
<object classid="clsid:6BF52A52-394A-11D3-B153-00C04F79FAA6" height="400" width="600" >
<param name="URL" value="/Videos/Tree%20Felling.wmv" />
<param name="autoStart" value="False" />
<param name="uiMode" value="full" />
<param name="stretchToFit" value="True" />
<param name="volume" value="75" />
<embed src="/Videos/Tree%20Felling.wmv" width="600" height="400" type="application/x-mplayer2" autoStart="False" uiMode="full" stretchToFit="True" volume="75" />
</object> 
```

如您所见，**该位置现已公布。**将此附加到站点地址，嘿，您可以直接访问视频吗？这意味着您可以保存文件或从其他无法登录的位置访问它。

**什么可以阻止他们使用 URL 并将其嵌入到他们的网站等中。**

还是我想错了？

我该如何防止这种事情发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:18:08.167

[在此之后，我发现了另一个问题。](http://msdn.microsoft.com/en-us/library/wce3kxhd.aspx)

解决方案是将 web.config 添加到您希望拒绝访问的文件夹中。

```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <authorization>
            <allow users="*"/>
            <deny users="?" />              
        </authorization>
    </system.web>
</configuration> 
```

这意味着他们必须登录到您的网站才能被授予访问媒体的权限。因此，不能窃取视频/内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:16:50.070

这是一个棘手的问题。我的解决方案是创建一个自定义 HttpHandler ( [msdn article](http://msdn.microsoft.com/en-us/library/ms228090.aspx) ) 并将其分配给一些自定义扩展名***.zzz，**因此当您为嵌入元素生成 src 时，它看起来像这样：/Videos/uploaded.zzz?id= {someId}。然后在 HttpHandler 中，我会将 id 解析为被请求的视频并返回作为响应。如果您担心有人直接链接到 /Videos/uploaded.zzz 网址，您可以让处理程序代码（**ProcessRequest**方法）在返回媒体文件之前检查用户是否已获得授权（在请求期间登录）。您可以随心所欲，根据对文件的请求数量添加限制等。

我还没有编写代码来测试它，但它应该很简单。

# python - 在 pygtk 上打开和关闭子窗口

> ID：11953864
> 
> 赞同：2
> 
> 时间：2012-08-14T13:56:01.720
> 
> 标签：python, gtk, window, pygtk

我正在尝试使用 pygtk 创建一个打开子窗口的应用程序，但是我在此窗口的创建/显示和销毁/隐藏过程中遇到了一些问题。作为测试，我制作了一个简单的应用程序，它打开一个带有一个按钮的主窗口，单击该按钮时，会打开一个带有三个按钮的子窗口。我用glade来设计界面。我的代码如下：

主文件

```
import gobject
import pygtk
import gtk.gtkgl
import gtk.glade
from interface import *

if __name__ == "__main__":
    gtk.gdk.threads_init()
    settings = gtk.settings_get_default()
    settings.props.gtk_button_images = True
    intf = interface()
    gtk.main() 
```

和 interface.py

```
import pygtk
import gtk.gtkgl
import gtk.glade

class interface(object):

    def __init__(self):

        self.builder = gtk.Builder()
        self.builder.add_from_file("web-interface.glade")

        self.main_window = self.builder.get_object("main_window")
        self.camera_window = self.builder.get_object("cam_window")
        self.main_window.show()

        self.builder.connect_signals(self)

    def on_main_window_destroy(self, widget):
        gtk.main_quit()

    def on_camera_clicked(self, widget):
        self.camera_window.show()

    def on_bt1_clicked(self, widget):
        self.camera_window.hide()

    def on_cam_window_destroy(self, widget):
        self.camera_window.hide()
        return 
```

其中'bt1'是camera_window上的一个按钮来隐藏它，'camera'是主窗口上的一个按钮，它可以打开子窗口。

现在，当我尝试用“相机”打开子窗口并用“bt1”关闭它时，它工作得很好。但是，如果我尝试使用“X”按钮关闭子窗口，下次打开它时，我会得到一个灰色的空窗口，即使我将销毁事件更改为仅隐藏窗口。我究竟做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T16:06:21.237

连接到`delete-event`信号而不是`destroy`. `destroy`信号不能被屏蔽。

另外，请确保您`return True`来自您的`delete-event`处理程序。这意味着您已经处理了该事件，进一步的处理将被阻止。如果你不这样做，那么默认处理程序仍将在你之后调用，因此窗口将被隐藏然后仍然被销毁。

# decimal - 压缩十进制（但不是 Comp-3）

> ID：11953865
> 
> 赞同：1
> 
> 时间：2012-08-14T13:56:02.160
> 
> 标签：decimal, reverse-engineering, packed

我在这个数据文件中遇到了一系列数字字段。字段为 6 字节（12 个半字节）

第一个半字节 - 到目前为止，在所有情况下都是“4” 第二个半字节表示小数点左侧的位数。剩余的半字节是该字段的值。

所以 - 例如，4327 0000 0000 = 270.0 和 4260 0000 0000 = 60.0 和 4026 3000 0000 = 0.263

我的问题是：“4”重要吗？（如何/为什么？）

第一个半字节是否有可能也包含符号位？（我目前拥有的所有示例都是正值 - 所以我没有参考框架。）

如果这是一个更长的字段——比如一个有 16 个半字节的字段——小数点左侧的数字值是否有可能高于 9——这将如何表示？（第二个半字节为 'A'/'B'/etc 或增加第一个半字节使其显示为 '5'？

有没有人见过这种特殊的模式——并且知道发生了什么？

（我不知道用于创建文件的编程语言。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:42:50.113

我认为 4 是一种类型的半字节。类型指示如何解释其余的半字节。

# python - 如何找出与矩阵的特定特征值相对应的特征向量？

> ID：11953867
> 
> 赞同：7
> 
> 时间：2012-08-14T13:56:09.070
> 
> 标签：python, numpy, scipy, eigenvector, eigenvalue

如何找出对应于特定特征值的特征向量？

我有一个随机矩阵（P），其中一个特征值为 1。我需要找到与特征值 1 对应的特征向量。

scipy 函数[**scipy.linalg.eig**](http://docs.scipy.org/doc/scipy/reference/generated/scipy.linalg.eig.html)返回特征值和特征向量的数组。

```
D, V = scipy.linalg.eig(P) 
```

这里 D（值数组）和 V（向量数组）都是向量。

一种方法是在 D 中进行搜索并在 V 中提取相应的特征向量。有没有更简单的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T15:19:52.810

```
import numpy as np
import numpy.linalg as linalg

P = np.array([[2, 0, 0], [0, 1, 0], [0, 0, 3]])

D, V = linalg.eig(P)
print(D)
# [ 2\.  1\.  3.] 
```

特征向量是 V 的列：

```
V = V.T

for val, vec in zip(D, V):
    assert np.allclose(np.dot(P, vec), val*vec) 
```

所以特征值1.0对应的特征向量为

```
def near(a, b, rtol = 1e-5, atol = 1e-8):
    return np.abs(a-b)<(atol+rtol*np.abs(b))

print(V[near(D, 1.0)])
# [[ 0\.  1\.  0.]] 
```

由于可以有多个具有相同特征值的特征向量，因此`V[near(D, 1.0)]`返回一个二维数组——数组的每一行都是一个特征值为 1.0 的特征向量。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T15:30:14.793

[如果您正在寻找与一个特征值对应的一个特征向量，则使用eig 函数的 scipy.sparse.linalg 实现](http://docs.scipy.org/doc/scipy/reference/sparse.linalg.html#matrix-factorizations)可能会更有效。它允许查找固定数量的特征向量并围绕特定值移动搜索。例如，您可以这样做：

```
values, vectors = scipy.sparse.linalg.eigs(P, k=1, sigma=1) 
```

# java - Java二进制移位操作

> ID：11953868
> 
> 赞同：1
> 
> 时间：2012-08-14T13:56:13.757
> 
> 标签：java, bit-shift

我在互联网上发现了这个 java 问题，并对此有一些疑问。

哪些陈述是准确的：

*   a) >> 执行有符号移位，而 >>> 执行无符号移位。
*   b) >>> 执行有符号移位，而 >> 执行无符号移位。
*   c) << 执行有符号移位，而 <<< 执行无符号移位。
*   d) <<< 执行有符号移位，而 << 执行无符号移位。

我有点不确定带符号的移位是什么，这是否意味着它保留二进制数的符号而不管移位本身发生了什么（这对我来说最有意义）还是意味着 MSB 确实除非在移位操作本身中被覆盖，否则不会更改。

所以

*   a) 正确：无论您使用 >> 进行多少次轮班，MSB 始终保留为其原始因此已签名？而 >>> 将始终用 0 覆盖 MSB，因此无符号？
*   b) 错误，因为上面的解释
*   c) 不确定，因为第一位可以用 << 移位操作覆盖，因此不保留其符号？
*   d) 再次不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:01:37.647

另一种描述： [http ://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)

来自文章：“无符号右移运算符>>>”将零移到最左边的位置，而“>>”之后的最左边的位置取决于符号扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:06:19.657

">>" 执行有符号移位，用最左边的位填充新位。最左边的位确定数字是负数还是正数。0 表示正，1 表示负。例如，

```
>> 1
10111100 becomes 11011110
the leftmost bit is a 1, so the new bits after the shift become ones

>> 1
01110011 becomes 00111001 since the leftmost bit is a 0 
```

>>>>" 执行无符号移位，这意味着新位在移位后总是用零填充。例如，

```
>>> 1
10111100 becomes 01011110
the new bits are filled in as zeroes no matter what the leftmost bit is

enter code here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:00:14.283

查看 Java 语言规范： [http ://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.19](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.19)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:01:08.870

> 这是否意味着它保留二进制数的符号，无论移位本身发生什么（这对我来说最有意义）还是意味着 MSB 不会改变，除非它在移位操作本身中被覆盖。

那是一样的。;)

> 而 >>> 将始终用 0 覆盖 MSB，因此无符号

如果你这样做`-1 >>> 0`，它仍然是负面的，但它基本上是正确的；）

左移没有符号或无符号，只是左移，正如你所说，它可能会也可能不会改变符号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T14:01:16.750

```
<<  Signed left shift      op1 << op2 
>>  Signed right sift      op1 >> op2 
>>> Unsigned right shift   op1 >>> op2 
```

# c++ - DirectX 11：空交换链

> ID：11953873
> 
> 赞同：1
> 
> 时间：2012-08-14T13:56:28.150
> 
> 标签：c++, directx, directx-11

所以我正在学习 DirectX 11，我正在制作东西，我遇到了一个调试错误（试图从交换链访问 0x00000000），我认为 CreateDeviceAndSwapChain 应该解决这个问题，但它没有。这是我的代码：

```
 #include <windows.h>
 #include <d3d11.h>
 #include <d3dx11.h>
 #include <dxgi.h>
 #include "types.h"  

 //globals
 RECT dimensions;
 HWND hwnd;

 //width and height of the window
 uint width;
 uint height;

//create the driver types
D3D_DRIVER_TYPE dt[] = {
    D3D_DRIVER_TYPE_HARDWARE, D3D_DRIVER_TYPE_WARP, D3D_DRIVER_TYPE_SOFTWARE
};

//create the feature level
D3D_FEATURE_LEVEL fl[] = {
    D3D_FEATURE_LEVEL_11_0, D3D_FEATURE_LEVEL_10_0, D3D_FEATURE_LEVEL_10_1  
};

//create the selected drivertype
D3D_DRIVER_TYPE selectedDT;

//create the selected feature level
D3D_FEATURE_LEVEL* selectedFL;

//create driver types and feature level uints
uint totalDTs = ARRAYSIZE(dt);
uint totalFLs = ARRAYSIZE(fl); 

//create the swap chain description
DXGI_SWAP_CHAIN_DESC scd;

//create the swap chain
IDXGISwapChain* swapchain; 

//create the device
ID3D11Device* dev;

//create the context
ID3D11DeviceContext* context;

//create the render target view
ID3D11RenderTargetView *rtv;

//functions
void init();
void initswapchaindesc();
void createDevice();
void close();

// the WindowProc function prototype
LRESULT CALLBACK WindowProc(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam);

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
    // window handler
    HWND hwnd;
    // this struct holds information for the window class
    WNDCLASSEX wc;

    ZeroMemory(&wc, sizeof(WNDCLASSEX));

    // fill the struct
    wc.cbSize = sizeof(WNDCLASSEX);
    wc.style = CS_HREDRAW | CS_VREDRAW;
    wc.lpfnWndProc = WindowProc;
    wc.hInstance = hInstance;
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)COLOR_WINDOW;
    wc.lpszClassName = "WindowClass1";

    // register the window class
    RegisterClassEx(&wc);

    hwnd = CreateWindowEx(NULL,
                          "WindowClass1",    // name of the window class
                          "Our First Windowed Program",   // title of the window
                          WS_OVERLAPPEDWINDOW,    // window style
                          300,    // x-position of the window
                          300,    // y-position of the window
                          800,    // width of the window
                          600,    // height of the window
                          NULL,    // we have no parent window, NULL
                          NULL,    // we aren't using menus, NULL
                          hInstance,    // application handle
                          NULL);    // used with multiple windows, NULL

    // display the window
    ShowWindow(hwnd, nCmdShow);

    // enter the main loop:
    init();
    close();
    MessageBox(hwnd, "Success!", "A message for you", NULL);

    // this struct holds Windows event messages
    MSG msg;

    // wait for the next message in the queue
    while(GetMessage(&msg, NULL, 0, 0))
    {
        TranslateMessage(&msg);

        DispatchMessage(&msg);
    }

    return msg.wParam;
}

LRESULT CALLBACK WindowProc(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch(message)
    {
        // the quit message
        case WM_DESTROY:
            {
        //quit
                PostQuitMessage(0);
                return 0;
            } 
        break;
    }

    // def message
    return DefWindowProc (hwnd, message, wParam, lParam);
} 

void init() {
    GetClientRect(hwnd, &dimensions);
    width = dimensions.right - dimensions.left;
    height = dimensions.bottom - dimensions.top;

    //initialize the swap chain description
    ZeroMemory(&scd, sizeof(scd));
    scd.BufferCount = 1;
    scd.BufferDesc.Width = width;
    scd.BufferDesc.Height = height;
    scd.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;
    scd.BufferDesc.RefreshRate.Denominator = 60;
    scd.BufferDesc.RefreshRate.Numerator = 1;
    scd.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;
    scd.OutputWindow = hwnd;
    scd.Windowed = true;
    scd.SampleDesc.Count = 1;
    scd.SampleDesc.Quality = 0;

    uint creationflags;

#ifdef _DEBUG
    creationflags |= D3D11_CREATE_DEVICE_DEBUG;
#endif

    HRESULT devcreateres;
    uint driver = 0;

    for(driver = 0; driver < totalDTs; ++driver) {
        devcreateres = D3D11CreateDeviceAndSwapChain(0, dt[driver], 0, creationflags, fl, totalFLs, 
            D3D11_SDK_VERSION, &scd, &swapchain, &dev, 
            selectedFL, &context);

        if(SUCCEEDED(devcreateres)) {
            selectedDT = dt[driver];
        }
    }

    //create the back buffer image
    ID3D11Texture2D* backbuffer;

    //error here - line 175
    swapchain->GetBuffer(0, __uuidof(ID3D11Texture2D), (LPVOID*)&backbuffer);
    dev->CreateRenderTargetView(backbuffer, NULL, &rtv);
    backbuffer->Release();
    context->OMSetRenderTargets(1, &rtv, NULL);

    // Set the viewport
    D3D11_VIEWPORT viewport;
    ZeroMemory(&viewport, sizeof(D3D11_VIEWPORT));

    viewport.TopLeftX = 0;
    viewport.TopLeftY = 0;
    viewport.Width = 800;
    viewport.Height = 600;

    context->RSSetViewports(1, &viewport);
}

void close() {
    if(swapchain)
        swapchain->Release();
    if(dev)
        dev->Release();
    if(context)
        context->Release();
    if(rtv)
        rtv->Release();
} 
```

（顺便说一句，数据类型 uint 被定义为 unsigned int。）

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T15:20:25.223

如果仍然适用，我注意到它`close()`被放置在`while`（主）循环开始之前。它在之后被放置。这是您的代码部分：

```
// enter the main loop:
init();
close();
MessageBox(hwnd, "Success!", "A message for you", NULL);

// this struct holds Windows event messages
MSG msg;

// wait for the next message in the queue
while(GetMessage(&msg, NULL, 0, 0))
{
    TranslateMessage(&msg);

    DispatchMessage(&msg);
}

return msg.wParam;
} 
```

您需要`close()`在循环关闭后发生。请注意，将某些内容“放在循环内”意味着将某些内容从字面上放置在 while 循环内。在这里，你想要它`TranslateMessage(&msg);`，那么`DispatchMessage(&msg);`while`(GetMessage(&msg, NULL, 0, 0)`是真的。此外，您希望在此循环中运行您自己的函数。

随着循环一次又一次地发生，您希望每次都绘制框架。为此，您可以添加`else`, 并在其中运行函数。

IE：

```
// enter the main loop:
init();
MessageBox(hwnd, "Success!", "A message for you", NULL);

// this struct holds Windows event messages
MSG msg;

// wait for the next message in the queue
while(GetMessage(&msg, NULL, 0, 0))
{
    TranslateMessage(&msg);

    DispatchMessage(&msg);
}
else
{
    render(); //Your render function.
}
close(); //If this is run, the while loop has closed. This is a good opportunity 
         //to run close() before the function returns msg.wParam
return msg.wParam;
} 
```

您可能会遇到违规，因为 COM 对象在循环开始之前已被释放。

# android - “getView” - 项目位置的不断变化，我必须点击两次“项目”

> ID：11953875
> 
> 赞同：1
> 
> 时间：2012-08-14T13:56:32.150
> 
> 标签：android, android-arrayadapter

我有一个实现`ArrayAdapter`（extends `ArrayAdapter`），getView 方法不断重绘屏幕，不断改变位置项的`ListView.`但这不是唯一的问题。当我想进行文本更改时 -**重新排序**。除了通过`setOnClickListener`我必须**单击两次来激活该行**

我的来源

```
public View getView(int position, View convertView, ViewGroup parent) {

        UrlItem urlItem = (UrlItem) this.getItem(position);
        ViewHolder viewHolder = null;

        if (convertView == null) {

            convertView = inflater.inflate(R.layout.database_table_item, null);
            viewHolder = new ViewHolder();

            viewHolder.text = (TextView) convertView
                    .findViewById(R.id.editText1);

            viewHolder.text.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {                   

                    int getPosition = (Integer) v.getTag();
                }
            });

            convertView.setTag(viewHolder);

            convertView.setTag(R.id.editText1, viewHolder.text);
            viewHolder.text.setTag(position);
            viewHolder.text.setText(urlItem.getUrl());
        } else {
            viewHolder = (ViewHolder) convertView.getTag();
        }

        return convertView;

    } 
```

![在此处输入图像描述](../Images/516ada630b84d46bfb14338cbe57f47f.png)

帮我打开了[这个链接。](http://vikaskanani.wordpress.com/2011/07/27/android-focusable-edittext-inside-listview/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:06:29.863

当视图被回收时（即当 convertView != null 时），您不会对视图做任何事情。获取 viewHolder 后，您需要执行任何特定于位置的操作。沿着这些思路尝试更多的东西：

```
if (convertView == null) {

    convertView = inflater.inflate(R.layout.database_table_item, null);
    viewHolder = new ViewHolder();

    viewHolder.text = (TextView) convertView
            .findViewById(R.id.editText1);

    viewHolder.text.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {                   

            int getPosition = (Integer) v.getTag();
        }
    });

    convertView.setTag(viewHolder);

} else {
    viewHolder = (ViewHolder) convertView.getTag();
}

viewHolder.text.setTag(position);
viewHolder.text.setText(urlItem.getUrl());

return convertView; 
```

# jquery - 使用 Jquery 和 codeigniter 的 RSS 提要阅读器

> ID：11953877
> 
> 赞同：-1
> 
> 时间：2012-08-14T13:56:36.580
> 
> 标签：jquery, codeigniter, rss, rss-reader

嘿，我想在我的主页上创建一个 RSS 提要阅读器。我想让它像一个新闻自动收报机，其中新闻一张一张地滑动。是否有任何提供此功能的 Jquery 插件，我遇到了一个插件，但它可以从同一个域而不是其他域中提取提要，我想从这里获取提要

```
http://www.spiegel.de/schlagzeilen/tops/index.rss 
```

任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:49:25.100

我认为你可以结合各种 JQuery 插件来做你想做的事。例如（在 Google 中进行快速搜索），有一个名为[jGFeed](http://jquery-howto.blogspot.com.es/2009/05/google-feeds-api-jquery-plugin.html)的插件，它返回有关特定提要的所有信息（您可以阅读提供的链接上的文档）。

使用所有这些信息，您可以提取您想要的内容（帖子内容、帖子标题、日期等）并使用其他一些插件（如[Compact News Previewer](http://tympanus.net/codrops/2010/10/03/compact-news-previewer/) [[示例](http://tympanus.net/Tutorials/CompactNewsPreviewer/)]）来显示帖子。

# hibernate - Hibernate envers, post-delete 事件抛出约束冲突异常

> ID：11953879
> 
> 赞同：7
> 
> 时间：2012-08-14T13:56:44.410
> 
> 标签：hibernate, hibernate-envers

项目使用 Hibernate 3.5、Spring Webflow 2 和 Hibernate Envers 进行审计。Envers 在 hibernate.cfg.xml 中配置。我在实体“ArticleGroup”和“Article”之间有一对多的关系映射。表 'articles' 有一个外键 'article_group_id' 引用表 'article_groups' 中的 id。在前端，当我删除一篇文章时，Hibernate Envers 会为 post-delete 事件抛出约束冲突异常。如果我不使用 Envers，删除操作可以正常工作。两个实体定义如下

```
 @Entity
    @Table(name="article_groups")
    @Audited
    public class ArticleGroup implements Serializable {

        @OneToMany(mappedBy="articleGroup", fetch = FetchType.EAGER, cascade = CascadeType.ALL)
        @OrderBy("id")
        private List<Article> articles;

        // other fields, getters and setters
    }

    @Entity 
    @Table(name="articles")
    @Audited
    public class Article implements Serializable {

        @ManyToOne
        @JoinColumn(name = "article_group_id")
        private ArticleGroup articleGroup;

        // other fields, getters, setters
    } 
```

文章删除编码如下：

```
 @Service("articleManager")
    public class ArticleManagerImpl implements ArticleManager {
            // inject dao
            @SuppressWarnings("unchecked")
            @Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)
            public void deleteArticle(Article article, Object articles) {
            articleDao.delete(article);
            ((List<Article>)  ((OneSelectionTrackingListDataModel)articles).getWrappedData()).remove(article);
        }
    } 
```

约束违反异常：

```
Hibernate: delete from live.articles where id=?
Hibernate: select nextval ('hibernate_sequence')
Hibernate: insert into audit.REVINFO (REVTSTMP, REV) values (?, ?)
Hibernate: insert into audit.articles_AUD (REVTYPE, content, language, name, order_number, title, article_group_id, id, REV) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
82828 [http-bio-8080-exec-2] DEBUG   org.springframework.orm.hibernate3.HibernateTransactionManager  - Initiating transaction rollback after commit exception
org.springframework.dao.DataIntegrityViolationException: Could not execute JDBC batch update; nested exception is org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update
...
Caused by: java.sql.BatchUpdateException: Batch entry 0 insert into audit.articles_AUD (REVTYPE, content, language, name, order_number, title, article_group_id, id, REV) values ('2', NULL, NULL, NULL, NULL, NULL, NULL, '14', '17') was aborted.  Call getNextException to see the cause.
at org.postgresql.jdbc2.AbstractJdbc2Statement$BatchResultHandler.handleError(AbstractJdbc2Statement.java:2619) 
```

如您所见，当 Envers 插入表“audit.articles_AUD”时，article_group_id 为空，导致违反约束。有人知道如何解决吗？非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T15:20:02.797

知道了。在配置文件中设置此属性：

```
<prop key="org.hibernate.envers.store_data_at_delete">true</prop> 
```

参考： [http](http://docs.jboss.org/hibernate/envers/3.6/reference/en-US/html/configuration.html) ://docs.jboss.org/hibernate/envers/3.6/reference/en-US/html/configuration.html 表 3.1。Envers 配置属性 org.hibernate.envers.store_data_at_delete

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T14:12:53.850

如果您正在执行后删除，并且在此操作期间对您要删除的任何其他条目`articles_AUD`有任何限制`articles`或任何其他条目，那么您将尝试`articles_AUD`使用不再存在的引用添加条目。

根据经验，我们将引用保留在审计表之外，以便更好地保留修订历史记录。如果审计表包含对非审计表的约束，那么如果从审计表中删除任何条目，修订历史可能会中断。

* * *

在设置时参考您的解决方案`org.hibernate.envers.store_data_at_delete`。

> 删除实体时是否应将实体数据存储在修订版中（**而不是仅将 id 和所有其他属性存储为 null**）。这通常不需要，因为数据存在于最后一个版本中。然而，有时，在最后一个修订版中访问它更容易、更有效（然后实体在删除之前包含的数据被存储两次）。

这告诉我审计表中有列`NOT NULL`，因此违反约束，因为 Envers 试图插入`null`。您可能希望在审计表中允许 null。

# restful-url - 如何在restful webservice中读取xml值作为查询参数

> ID：11953882
> 
> 赞同：0
> 
> 时间：2012-08-14T13:56:59.740
> 
> 标签：restful-url

我无法在 mule 中使用 restful 服务从 @QueryParam 读取 xml 值。

```
@Path("/hello")
public class Resttest {
@GET
@Produces("text/xml")
public String sayHelloWithUri(@QueryParam("body") String g) {
System.out.println("............................wdwedfwfw2"+g);
return g;
} 
```

请求 xml : **http://<mydomain>:8080/jersey/hello/?body=< ?xml version="1.0" encoding="UTF-8" ?>< Options>< Option>car</Option>< Option >自行车< /选项></选项>**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:35:18.163

您使用的 Mule 配置是什么？

它适用于这个：

```
<flow name="TesstFlow">
    <http:inbound-endpoint address="http://localhost:8080/jersey/" method="GET" />
    <jersey:resources>
        <component class="Resttest" />
    </jersey:resources>
    <logger level="WARN"/>
</flow> 
```

# objective-c - UISlider - 当拇指触地时选择

> ID：11953885
> 
> 赞同：0
> 
> 时间：2012-08-14T13:57:12.097
> 
> 标签：objective-c, cocoa, uikit

为了“抓住”一个 ui 滑块的手柄，必须在它上面触碰。我对修改行为感兴趣，以便用户只需要在 uislider 中的任何位置着陆。触地时，手柄会跳到用户触摸的任何位置。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:19:03.823

我通过在 UISlider 的子类中覆盖 touchesBegan:withEvent: 来做到这一点。您不必检查触摸与滑块的距离有多近，因为只有在滑块上方时您才会收到触摸事件。此代码适用于设置为默认 0 到 1 比例的滑块。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    float xPoint = [[[event allTouches]anyObject]locationInView:self].x;
    [self setValue:xPoint/self.frame.size.width];
    [super touchesBegan:touches withEvent:event];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-18T14:17:54.557

我知道这是一个老问题，但我只想提一下，我最近想出了一种不同的方法来做到这一点。简而言之：

```
- (BOOL)beginTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event {
    BOOL ignored = [super beginTrackingWithTouch:touch withEvent:event];
    return YES;
}

- (BOOL)continueTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event {
    BOOL ignored = [super continueTrackingWithTouch:touch withEvent:event];
    return YES;
} 
```

我认为这是解决问题的一种更安全的方法，因为您不必手动生成滑块的值。你永远不知道苹果什么时候会引入整数/定位滑块等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:37:16.947

在我的脑海中，我会说你应该注意视图上的触摸。当检测到触摸时，检查它与`UISlider`. 如果在一定范围内，做（伪）

```
sliderValue = sliderMinValue + (sliderMaxValue-sliderMinValue)/(xCoordOfTouch - sliderLeftSideXCoord)/sliderLength 
```

所以基本上你是根据用户相对于滑块框架触摸的位置来计算滑块应该具有的值。

你提到这个很有趣，因为我今天也在考虑做同样的事情。如果我启动并运行某些东西，我会发布它（但不要屏住呼吸）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T19:47:31.577

如果您有最小值或最大值图像，则 rdelmar 的答案不起作用。我修改了 rdelmar 的 touchesBegan:withEvent: 方法以仅查看轨道上的触摸而不是边缘的触摸。

希望这可以帮助

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    float xPoint = [[touches anyObject] locationInView:self].x;
    float trackWidth = [self trackRectForBounds:self.bounds].size.width;
    float margin = (self.bounds.size.width - trackWidth) / 2;
    float xOffset = xPoint - margin;

    if (xOffset >= 0.0 && xOffset <= trackWidth) {
        float newValue = xOffset / trackWidth;
        [self setValue:newValue animated:YES];
        [super touchesBegan:touches withEvent:event];
    }
} 
```

# android - CursorAdapter 中断 CHOICE_MODE_MULTIPLE 选项

> ID：11953888
> 
> 赞同：2
> 
> 时间：2012-08-14T13:57:24.613
> 
> 标签：android, listview, android-arrayadapter, android-cursoradapter

我有一个`ListFragment`，我在其中添加一个`CursorAdapter`到我的`ListView`，我希望能够单击几行，以使用上下文操作栏。我使用 SherlockActionbar，当我使用简单的`ArrayAdapter`. 但是当我切换到 时`CursorAdapter`，它会中断。我不能选择多行，只能选择一个。知道为什么会发生吗？

在`onActivityCreated`我设置列表中：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mActionMode = null;
    mListView = getListView();
    FinTracDatabase database = mDatabaseProvider.get();
    Cursor cursor = database.getTransactionCursor(false);
    mCursorAdapter = new TransactionListAdapter(getSherlockActivity(), cursor);
    mListView.setAdapter(mCursorAdapter);
    mListView.setItemsCanFocus(false);
    mListView.setOnItemClickListener(this);
    mListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
} 
```

这是我的`Adapter`：

```
private class TransactionListAdapter extends CursorAdapter {

    public TransactionListAdapter(Context context, Cursor cursor) {
        super(context, cursor, 0);
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        bindToExistingView(view, cursor);
    }

    private void bindToExistingView(View view, Cursor cursor) {
        CheckedTextView amountView = (CheckedTextView) view;
        amountView.setText(cursor.getString(cursor.getColumnIndex(Transactions.TITLE)));
    }

    @Override
    public View newView(Context arg0, Cursor arg1, ViewGroup arg2) {
        LayoutInflater layoutInflater = getSherlockActivity().getLayoutInflater();
        View view = layoutInflater.inflate(android.R.layout.simple_list_item_multiple_choice, arg2, false);
        bindToExistingView(view, arg1);
        return view;
    }

} 
```

最后是 onClickListener：

```
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    SparseBooleanArray checked = mListView.getCheckedItemPositions();
    boolean hasCheckedElement = true;
    for (int i = 0; i < checked.size() && !hasCheckedElement; i++) {
        hasCheckedElement = checked.valueAt(i);
    }

    if (hasCheckedElement) {
        if (mActionMode == null) {
            mActionMode = getSherlockActivity().startActionMode(new SelectingActionMode());
        }
    } else {
        if (mActionMode != null) {
            mActionMode.finish();
        }
    }
} 
```

如果我将 Adapter 切换为 simple `ArrayAdapter`，它可以正常工作。

```
new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_multiple_choice, new String[]{"A", "B", "C"}) 
```

我绝望了，我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:29:07.873

为了使`ListView.CHOICE_MODE_MULTIPLE`模式正常工作，适配器中的每个项目都必须从`getItemId()`方法中返回一个唯一值。

您用于适配器的光标是在以下几行中生成的：

```
 FinTracDatabase database = mDatabaseProvider.get();
  Cursor cursor = database.getTransactionCursor(false); 
```

您能否检查它是否在每行的“_id”列上具有唯一值？我怀疑他们都有相同的价值观，导致你看到的行为。

# iphone - 提交前测试IOS app的程序？

> ID：11953893
> 
> 赞同：3
> 
> 时间：2012-08-14T13:57:34.827
> 
> 标签：iphone, ios, testing, submission

我正在寻找一个可以在任何地方模拟一些点击的程序，在我的 iphone 应用程序中的每个按钮和东西上，在提交应用程序之前找到一些崩溃。

我不知道这样的事情是否真的存在。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:43:37.413

在 iOS 4 中，Apple 开始提供 UIAutomation 框架，允许您自动测试您的应用程序。它利用了可访问性。

[博客示例](http://blog.manbolo.com/2012/04/08/ios-automated-tests-with-uiautomation)

[苹果文档](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Reference/UIAutomationRef/_index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:02:33.097

试试[fonemonkey](http://www.gorillalogic.com/testing-tools/fonemonkey)。

您可以以编程方式创建脚本或记录屏幕上的动作和点击，如 Selenium 风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:59:55.400

您可以试用[Telerik Test Studio for iOS](http://www.telerik.com/automated-testing-tools/ios-testing/ios-application-testing.aspx)。我还没有尝试过，但它似乎很有希望。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T15:02:40.777

您正在搜索的可能是验收测试框架。我不知道它们中的任何一个可以自动识别您的应用程序中的 UIControls 并执行随机操作，但您可以参考[此线程](https://stackoverflow.com/questions/4114083/ios-tests-specs-tdd-bdd-and-integration-acceptance-testing)以概述执行 UI 自动化测试的可用技术（在验收测试部分）。

# css - 如何将n个div垂直堆叠到n个宽度？

> ID：11953898
> 
> 赞同：2
> 
> 时间：2012-08-14T13:58:01.180
> 
> 标签：css

我得到了一个设计，其中一些可变高度的项目垂直堆叠在一个固定高度的容器中，宽度可变。所以想法是项目可以滚动到屏幕外（将在包装器中），以便它们可以水平滚动到屏幕上。

我很难想出一种组织 div 的可靠方法，以便它们可靠地堆叠。这是我想要实现的目标。

![垂直堆叠可变高度项目](../Images/3b5834112b859a50f2f7c2afddd1c6c2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:12:14.470

试试这个 -[**演示**](http://jsfiddle.net/uNwFM/8/)

**HTML**

```
<section>
    <div style="height: 100px;"> 1 </div>
    <div style="height: 50px;"> 2 </div>
    <div style="height: 150px;"> 3 </div>
    <div style="height: 300px;"> 4 </div>
    <div style="height: 50px;"> 5 </div>
    <div style="height: 100px;"> 6 </div>
    <div style="height: 100px;"> 7 </div>
    <div style="height: 70px;"> 8 </div>
</section> 
```

**CSS**

```
section {
    -webkit-column-count: 3;
       -moz-column-count: 3;
            column-count: 3;

    height: 400px;
    background: beige;
}

div {
    width: 200px;
    margin: 0 10px 10px;
    background: orange;
    display: inline-table;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:41:09.530

我以前遇到过这种情况，除了使用 Javascript 之外我找不到任何解决方案。**遵循一个使用jQuery**的示例脚本，该脚本假定最初所有`<div>`的 s 都堆叠在一个表格单元格中。

```
var maxH = 600; //can be anything
function fix() {
    var row = document.getElementById("tbl").rows[0];
    for(var i = 0; i < row.cells.length; i ++) {
        var cur = row.cells[i];
        if($(cur).height() > maxH) {
            var newcell = row.insertCell(row.cells.length);
            newcell.vAlign = "top";
            newcell.style.paddingLeft = "10px";
            while($(cur).height() > maxH) {
               $(cur).children().last().detach().appendTo(newcell);
            }
        }
    }
} 
```

工作演示：[JSFiddle](http://jsfiddle.net/NYQMe/15/)。

# c# - 在不引入额外的构造函数或公共设置器的情况下序列化对象树的正确方法

> ID：11953899
> 
> 赞同：0
> 
> 时间：2012-08-14T13:58:07.763
> 
> 标签：c#, .net, serialization

我想将树序列化为人类可读的文本格式（所需的存储空间越少越好）。我想在不实现 XmlSerializer 类所要求的无参数构造函数和公共设置器的情况下实现这一点。实现这一目标的标准方法是什么？

我的模型看起来像这样：

```
public interface ISpecification<T>
{ //some stuff here }

// The tree will have some nodes like this
public abstract class CompositeSpecificationBase<T>
{
    public ISpecification<T> Left { get; private set; }

    public ISpecification<T> Right { get; private set; }

    protected CompositeSpecificationBase(ISpecification<T> left, ISpecification<T> right)
    {
        Left = left;
        Right = right;
    }
}

public class AndSpecification<T> : CompositeSpecificationBase<T>, ISpecification<T>
{
    public AndSpecification(ISpecification<T> left, ISpecification<T> right)
        : base(left, right)
    {} 
    // some stuff here
}

// At least one more implementation of CompositeSpecificationBase...

// There will be many leaf types like this
public class ExampleSpec : ISpecification<SomeEntity>
{
    public int SomeProperty {get; private set;}

    public ExampleSpec (int someProperty)
    { 
        SomeProperty = someProperty;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:03:19.050

我建议使用 Json，例如使用 Json.NET 序列化程序：http: [//json.codeplex.com/](http://json.codeplex.com/)

# hibernate - Spring Roo 多对多的搜索对象引用了一个未保存的瞬态实例

> ID：11953900
> 
> 赞同：1
> 
> 时间：2012-08-14T13:58:08.047
> 
> 标签：hibernate, annotations, many-to-many, spring-roo

我正在使用 spring roo 生成控制器。映射定义如下。

```
Class users 
    private String username;
    private String password;

 @ManyToMany( fetch = FetchType.EAGER) 
   @Cascade( org.hibernate.annotations.CascadeType.SAVE_UPDATE)
   @JoinTable(name = "user_roles", 
        joinColumns = { @JoinColumn(name = "users_id") }, 
        inverseJoinColumns = { @JoinColumn(name = "roles_id") })
    private Set<Authority> roles = new HashSet<Authority>();

Class Authority 
    private String roles
    private String descricao;

@ManyToMany( fetch = FetchType.EAGER ,  mappedBy = "roles") 
    @Cascade( org.hibernate.annotations.CascadeType.SAVE_UPDATE )
    private Set<Users> users = new HashSet<Users>(); 
```

这种关系正在起作用，即填充此表“用户”和表服务“用户角色”，而不是真正期望权限的表。

数据的持久化进行得很顺利，它是由 Spring roo 生成的，控制器的用户以这种方式工作。

```
 Users users = Users.fromJsonToUsers(json);
    users.persist(); 
```

尝试通过使用关系的方法执行搜索时出现问题。

```
StringBuilder queryBuilder = new StringBuilder("SELECT o FROM Users AS o WHERE LOWER(o.username) LIKE LOWER(:username)  AND LOWER(o.password) LIKE LOWER(:password)");
        queryBuilder.append(" OR");
        for (int i = 0; i < roles.size(); i++) {
            if (i > 0) queryBuilder.append(" AND");
            queryBuilder.append(" :roles_item").append(i).append(" MEMBER OF o.roles");
        }
        TypedQuery<Users> q = em.createQuery(queryBuilder.toString(), Users.class);
        q.setParameter("username", username);
        int rolesIndex = 0;
        for (Authority _authority: roles) {
            q.setParameter("roles_item" + rolesIndex++, _authority);
        }
        q.setParameter("password", password);
        return q; 
```

形成这样的查询：

```
(
  SELECT o
  FROM Users AS o 
  WHERE LOWER(o.username) LIKE LOWER(:username)
  AND LOWER(o.password) LIKE LOWER(:password)
  OR :roles_item0 MEMBER OF o.roles
) 
```

例外：

```
org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.Transi
entObjectException: **object references an unsaved transient instance - save the t
ransient instance before flushing:** br.teste.carro.domain.Authority; neste
d exception is java.lang.IllegalStateException: org.hibernate.TransientObjectExc
eption: object references an unsaved transient instance - save the transient ins
tance before flushing: br.teste.carro.domain.Authority 
```

我怀疑问题出在我的储蓄方式上，但不确定。如果有人可以使用Force，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T09:29:02.013

您需要在 relp 的两侧指定连接列，并且它们应该在另一侧反转：

```
Class users 
@JoinTable(name = "user_roles", 
    joinColumns = { @JoinColumn(name = "users_id") }, 
    inverseJoinColumns = { @JoinColumn(name = "roles_id") })

Class Authority 
@JoinTable(name = "user_roles", 
    joinColumns = { @JoinColumn(name = "roles_id") }, 
    inverseJoinColumns = { @JoinColumn(name = "users_id") }) 
```

# .net - 运行 EF 4.x DbContext Fluent 生成器时出错

> ID：11953901
> 
> 赞同：1
> 
> 时间：2012-08-14T13:58:07.967
> 
> 标签：.net, entity-framework, entity-framework-4, ef-code-first

尝试生成基于代码的实体和映射时，我的模型出现以下错误。这是错误：

```
Error 1  Running transformation: System.InvalidOperationException: Sequence contains no elements
   at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source)
   at Microsoft.VisualStudio.TextTemplating5FBD4EDD9EACD746112871E64F81C5D3.GeneratedTextTransformation.TransformText()
   at Microsoft.VisualStudio.TextTemplating.TransformationRunner.RunTransformation(TemplateProcessingSession session, String source, ITextTemplatingEngineHost host, String& result)
1 1 
```

我认为我的模型中没有它所期望的东西。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:14:40.890

发生错误是因为模板中的 LINQ 查询使用 .Single() ，当查询没有返回结果时会引发异常。如果将 .Single() 切换为 .SingleOrDefault() 它不会抛出异常。

该模板包含对 .Single() 的多次调用，但通过反复试验，我发现罪魁祸首 .Single()（在我的例子中）位于第 124 行：

```
NavigationProperty navPropertyBackReference = navProperty.ToEndMember.GetEntityType().NavigationProperties
    .Where(npBack => npBack.RelationshipType == navProperty.RelationshipType && npBack != navProperty)
    .SingleOrDefault(); 
```

你的罪魁祸首 .Single() 可能不同。我根本不懂这种模板语言，所以不知道让代码继续空序列会有什么后果。它可能只会导致您的输出丢失一些您必须手动修复的数据，但至少这样不会发生异常并且您会获得所有文件。

您可以将所有 .Single() 替换为 .SingleOrDefault() 而不会发生意外，但为了安全起见，我只替换了导致异常的那个。

# iphone - 我现有的 Approved App 会从 AppStore 中删除吗？

> ID：11953902
> 
> 赞同：-1
> 
> 时间：2012-08-14T13:58:08.350
> 
> 标签：iphone, app-store

如果我不更新我的付费 IOS 开发者计划（来自 Apple），我现有的批准的 APPS 会发生什么。

我知道我将无法使用此帐户提交新应用程序并且无法更新我现有的应用程序，对此我感到非常困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:01:48.177

> 如果我不续订会员资格，新客户能否从 App Store 购买我的应用程序？
> 
> 不可以。一旦您的会员资格到期，您的应用将从 App Store 中删除，新客户将无法再购买您的应用。

没有经历过自己，但我不会抓住机会。支付 99 美元

[苹果开发者计划续订](https://developer.apple.com/support/ios/program-renewals.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:10:03.620

如果您不续订付费开发者计划，您的应用程序将无法在 App Store 上下载。但是，如果您再次开始付款，您的帐户可以恢复到以前的状态。这种情况曾经发生在我们公司的一位客户身上。

以下是 Apple 关于如果您不付款会发生什么的信息：

[https://developer.apple.com/support/ios/program-renewals.html](https://developer.apple.com/support/ios/program-renewals.html)

# php - 如何从非实例化类调用对象

> ID：11953905
> 
> 赞同：2
> 
> 时间：2012-08-14T13:58:10.887
> 
> 标签：php, object, overloading

在有关超载的手册上，我无法掌握其中一个线程。代码如下：

```
<?php

class a
{
   function __get($v)
   {
       $this->$v = new $v;
       return $this->$v;
   }
}

class b
{
    function say($word){
        echo $word;
    }
}
$a = new a();
$a->b->say('hello world');

// echos 'hello world'
?> 
```

正如在注释行中指出的那样，它与 hello world 相呼应。但是即使 b 没有被实例化，它是如何被调用的？请帮忙，手册的链接在[这里](http://www.php.net/manual/en/language.oop5.overloading.php)，条目属于**gmail dot com 上名为垃圾80 的用户**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T14:01:41.710

它能做什么：

`$a->b`：

```
function __get('b'){
    $this->b = new b;
    return $this->b;
} 
```

`$a->b->say('hello world')`：

```
function say('hello world'){
    echo 'hello world';
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T14:01:24.683

它是在 A 的 __get 方法中构造的。Get 是一种神奇的方法，当您尝试检索属性时会调用它，请参阅：[文档](http://php.net/__get)。__get 获取作为字符串访问的属性名称。由于该字符串用于实例化一个类，然后将其返回，因此这是可行的。

以下内容也可以：

```
class a
{
   function __get($v)
   {
       $this->$v = new $v;
       return $this->$v;
   }
}

class b
{
    function say($word){
        echo $word;
    }
}

class c
{
    function say($word){
        echo 'c: ' . $word;
    }
}
$a = new a();
$a->b->say('hello world');

// echos 'hello world'

$a->c->say('hello world');

// echos 'c: hello world' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T14:02:14.380

但是 b*已经*被实例化了！

在 class`a`的魔术 getter 方法中：

```
function __get($v)
{
    $this->$v = new $v;
    return $this->$v;
} 
```

稍后调用时的值为`$v`'b' `$a->b`。这意味着该行`$this->$v = new $v;`实际上被评估为等效于：`$this->b = new b;`，然后`return $this->b;`。

因此，回顾一下，您的 getter 的调用时评估将如下所示：

```
function __get($v)
{
    $this->b = new b;
    return $this->b;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T14:02:58.770

$b 实际上是实例化的，因为 $a 的属性 $b 是未定义的，并且在调用 $a->$b ... 时，它会使用参数 $v = $b 调用魔术方法 __get，所以行

```
$this->$b = new $b; 
```

被执行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T14:02:17.493

__get 方法是一种神奇的方法。每当您尝试在 PHP 中访问对象的属性并且该属性未定义时，都会调用 __get 方法，并将属性名称作为参数。

因此，在这种情况下，您有：

```
$a->b 
```

b 还不是 $a 的成员，因此以 b 作为参数调用 __get。然后运行：

```
function __get($v) {
     $this->$v = new $v;
     return $this->$v;
 } 
```

用 b 代替 $v，得到：

```
$this->b = new b; 
```

这使得 $a->ba 成为 b 的新实例，然后调用 say 成员函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-14T14:03:21.077

它在这里被实例化：`$this->$v = new $v;`

细分：

创建 A 对象 $a = new a();

```
$b = $a->b; 
```

这动态调用`a::__get`

```
function __get($v)
{
   $this->$v = new $v;
   return $this->$v;
} 
```

这将返回一个`b`对象，因此您可以有效地执行以下操作：

```
$b->say('hello world'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T14:01:52.953

[您应该在PHP 文档](http://php.net/manual/en/language.oop5.magic.php)中查找魔术功能。里面的逻辑`__get()`是创建并返回一个新的实例`b`

# mysql - 合并单个表上多个选择语句的结果

> ID：11953912
> 
> 赞同：0
> 
> 时间：2012-08-14T13:58:38.757
> 
> 标签：mysql, sql, select, join

我有两个选择语句

```
SELECT username, password FROM users WHERE username='$Uname' 
```

和

```
SELECT email_address FROM users WHERE email_address='$email' 
```

我可以使用什么语句，以便我立即获得所有结果，即

用户名作为结果 [0]，密码作为结果 [1]，电子邮件地址作为结果 [2]

为了更好地解释。

我想检查我的数据库中是否已经有用户名的记录，如果有，然后获取密码，然后检查密码是否还有 email_address 的记录，以确保不允许用户拥有重复的用户名或电子邮件地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:25:38.803

我认为你想要一个“或”条件：

```
SELECT username, password, email_address 
FROM users
WHERE username='$Uname' or email_address='$email' 
```

您可以使用相关子查询检查电子邮件是否存在：

```
SELECT username, password, email_address
       (select (case when count(*) > 0 then 'SHARED' else 'UNIQUE' end)
        from users u2
        where u.email_address = u2.email_address and
              u.username <> u2.user_name
      ) as SharedOrUnique
FROM users u
WHERE username='$Uname' or email_address='$email' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-15T05:29:36.177

> 联合查询结合了多个选择查询的结果。

```
SELECT name, price, warranty_available, exclusive_offer
FROM Products
UNION ALL
SELECT name, price, guarantee_available, exclusive_offer
FROM Services; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:02:15.603

I have no idea what you're attempting to do but...

```
SELECT u1.username, u1.password, u2.email_address 
from users u1, users u2
where u1.username='$UName'
and u2.email_address == '$email' 
```

Given that your second query is just going to return the value you pass in....

```
SELECT username, password, '$email' as email_address FROM users WHERE username='$Uname' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:00:46.837

如果您已经知道电子邮件地址（第二个语句变量），那么您为什么希望您的语句再次返回它？

# jquery - Separate .css in JQuery plugin? Or embedded in JS?

> ID：11953916
> 
> 赞同：2
> 
> 时间：2012-08-14T13:59:02.047
> 
> 标签：jquery, jquery-plugins

I've somewhat recently started building my own jQuery plugins to modularize some ideas I find myself using frequently. I've noticed many jQuery plugins have a separate `js` and `css` files to include, but I've begun to question that logic.

My question is, should I just be embedding the `css` in my `JavaScript`?

**The Pros I can think of:**

*   Reduced http requests
*   Plugin specific CSS isn't loaded if js is disabled
*   Ease of use - can be as easy as one copy-paste and the deed is done.

**Cons?**:

*   No seperation of concerns
*   More difficult to organize code how you want to
*   Confusing or difficult to edit core css for the uninitiated
*   can cause difficulty when releasing plugin updates

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:08:53.417

I believe it is always better to `separate` the base plugin CSS file from your Javascript.

Mainly because if someone wants to make additions & changes to your CSS, they can do so in *their own* separate file, changing/replacing your css rulings easily. (That way if you made updates to the base CSS in a plugin update, it wouldn't conflict with theirs).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T15:34:39.017

I'd definitely separate any non-trivial amount of CSS from your JS.

Let's go through the pros you have there:

**Reduced http requests**

*`If someone uses your plugin they will concat and minfiy all CSS files to one. If not, they're doing it wrong. So still one request for one main CSS file.`*

**Plugin specific CSS isn't loaded if js is disabled**

*`Really? They're already saving the requests for the JS files. I wouldn't care.`*

**Ease of use - can be as easy as one copy-paste and the deed is done.**

*`Well, I guess you can't, physically, disagree with that. But does it really matter? What if your plugin needs images? You can't include them as well.*`*

*yes, I know about data URI...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:05:11.323

I myself have created few small plugins (just for fun) and i like the idea of embedding my CSS in the js file itself as its very much specify to what i am trying to do in the plugin. + the fear of plugin might now working properly if css is not loaded properly. Having said that, i guess we can really get good answers from this question which might make me change my coding styling.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-03T14:58:03.210

If you want embedded CSS in JS, I found this lib helpful:

[https://github.com/cssobj/cssobj](https://github.com/cssobj/cssobj)

for use with jQuery:

[https://github.com/cssobj/cssobj/wiki/Work-with-popular-JS-Lib](https://github.com/cssobj/cssobj/wiki/Work-with-popular-JS-Lib)

# c++ - 哪个玩家类是由更好的层次结构创建的？

> ID：11953917
> 
> 赞同：1
> 
> 时间：2012-08-14T13:59:03.903
> 
> 标签：c++, class-hierarchy

哪个类更适合未来的实现？突击掠食者（多重继承）还是女王（多层次等级）？

```
#include "stdafx.h"
#include<stdlib.h> 

class living
{
public:
    int hitpoints;
    int adaptation;
};

class alien:public living
{
public:
    bool tail;
    bool claws;
    bool legs;
    bool secondary_jaws;
    bool acid_blood;
    alien(){adaptation=1000;hitpoints=50;}
};

class queen:public alien
{
public:
    bool ovipositor;
    bool tertiary_jaws;
};

class predator
{
public:
    bool legs;
    bool arms;
    bool glowstick_blood;

};

class assault_predator:public living,public predator
{
public:
    bool plasma_caster;
    bool infrared_vision;
    assault_predator(){hitpoints=150;adaptation=33;}
};

int main()
{
    assault_predator player1;
    queen player2;

    getchar();
    return 0;
  } 
```

正如所见，攻击性捕食者分别来自**生活**和**捕食者**。女王来自**外星人**，外星人来自**生活**。

**问题：就****编程和类层次结构**而言，哪一个更合乎逻辑。

这些球员的优缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:05:42.977

他们只是不同。多重继承允许您将单独的对象组合为一个。多级继承允许进一步指定类型。

# android - 如何使用monkeyrunner和Android ViewClient点击包含指定文本的视图？

> ID：11953927
> 
> 赞同：0
> 
> 时间：2012-08-14T13:59:29.870
> 
> 标签：android, monkeyrunner, android-monkey

我正在尝试使用 Monkey Runner 和 Android ViewClient 模拟对 Android 平板电脑的点击。我想单击具有特定文本的区域/视图。这是我正在尝试做的一个例子：

*   我有一个脚本，我在其中导入 MonkeyRunner、MonkeyDevice、ViewClient
    `from com.dtmilano.android.viewclient import ViewClient`
    `from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice`

*   连接平板电脑并创建 MonkeyDevice 对象
    `device = MonkeyDevice.waitForConnection()`

*   然后使用设备创建一个 Android ViewClient 对象
    `vc = ViewClient(device)`

*   我在平板电脑上打开“设置”应用 `device.startActivity('com.android.settings/.Settings')`

*   然后我使用以下方法找到所需的视图：
    `displayView = findViewWithAttribute('text:mText', 'Display')`

*   然后我尝试单击该视图（通过模拟触摸事件）：
    `displayView.touch()`

问题是这个脚本触及了屏幕的另一部分，即设置应用程序中 WiFi 行左侧的某处。

我查看了 ViewClient 的源代码，发现 touch() 方法返回视图的 (x,y) 坐标，然后使用 MonkeyDevice.touch() 方法。但是返回的 (x,y) 坐标是相对于视图的父级的。

有人知道如何获得视图对象的正确 (x,y) 坐标吗？
或者至少是一种获得视图父母的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:35:20.687

问题解决了。最新版本的 AndroidViewClient 解决了我的视图问题。

我可以用：

```
view = vc.findViewWithText('Dsiplay')
view.touch() 
```

# asp.net-mvc-3 - MVC3 Aspx 引擎中的 DropDownListFor

> ID：11953928
> 
> 赞同：0
> 
> 时间：2012-08-14T13:59:46.227
> 
> 标签：asp.net-mvc-3, selectlist, viewdata, html.dropdownlistfor, selectlistitem

我正在使用 aspx 视图引擎。我使用 SelectList 和 Html.DropDownList 完成了它，但填充应该来自模型，而不是控制器，并且我需要获取所选项目的值，所以我需要 DropDownListFor。我已经看到了答案，但我无法从那里得到使用了什么样的参数。

模型：

```
public List<SelectListItem> food = new List<SelectListItem>(); 
```

控制器：

```
food.Add(new SelectListItem() { Text = "Banana Cake", Value = "BC" });
food.Add(new SelectListItem() { Text = "Apple Waffle", Value = "WF" });
ViewData[" Desserts "] = new SelectList(foodsample.Food); 
```

看法：

```
<%= Html.DropDownListFor(x => x.food, ViewData["Desserts"] as SelectList)%> 
```

尽管 DropDownList 使用此文本“System.Web.Mvc.SelectListItem”显示所有值，但运行前后没有错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:13:27.240

我想你的意思是说`ViewData["Desserts"] = food;`

# php - 简单的 PDO 包装器不起作用

> ID：11953931
> 
> 赞同：1
> 
> 时间：2012-08-14T13:59:56.260
> 
> 标签：php, pdo, wrapper

我正在尝试这个 Wrapper，无论如何，当我在 index.php 文件中使用 var_dump($row) 时，我总是会得到“布尔错误”。

这是我的数据库类：

```
<?php
// database.php
class DB {
protected $_connection = array();  // to map the connection
protected $_dbh;                   // property which keeps the database handler
protected $_database;              // property to keep the database name
protected $_table;                 // property to keep the table name
protected $_query;                 // property to keep a query statement

public function __construct() {

    // require the database configurations as an array from config.php
    $this->_connection = require_once 'config.php';
    // define which database driver to use (mysql?) and extract the values as 
    // variables
    extract($this->_connection['connection']['mysql']);

    // make the database and table name available to the class
    $this->_database = $database;
    $this->_table    = $table_name;

    // Check for PDO driver and create the connection to the database.
    try {
        $this->_dbh = new PDO($driver.":host=".$host, $username, $password);
    } catch (PDOException $e) {
        die ('Connection failed: ' . $e->getMessage());
    }
}

public function input_query($query) {
    $this->_query = $this->_dbh->prepare($query);
    return $this;
}

public function execute() {
    return $this->_query->execute();
}

public function single() {
    $this->execute();
    return $this->_query->fetch();
}

public function result_set() {
    $this->execute();
    return $this->fetchAll();
}    
} 
```

然后在我的 index.php 文件中：

```
<?php
// index.php
require_once 'database.php';

$db = new DB();

$db->input_query("SELECT `name` FROM `names` WHERE `id`=1");
$r = $db->single();

var_dump($r); 
```

如果我这样做

```
<?php
// index.php 
require_once 'database.php';

$db = new DB();
var_dump($db); 
```

我得到一个对象：

```
object(DB)[1]
  public '_connection' => 
    array (size=1)
      'connection' => 
        array (size=4)
          'sqlite' => 
            array (size=3)
              ...
          'mysql' => 
            array (size=6)
              ...
          'pgsql' => 
            array (size=6)
              ...
          'sqlsrv' => 
            array (size=6)
              ...
  protected '_dbh' => 
    object(PDO)[2]
  protected '_database' => string 'pagination_demo' (length=15)
  protected '_table' => string 'names' (length=5)
  protected '_query' => null 
```

但是**var_dump($r)**总是返回 boolean false ，有时当我使用代码尝试不同的事情时，我会得到**'Call to an undefined method DB::single()'**或**'method on a non-object'**类型的消息。

谁能帮我解决这个问题？

非常感谢。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:18:12.587

好的，现在它完美地工作了。这是代码：

```
<?php // database.php
class DB extends PDO {

    protected $_connection = array();         // to map the connection

    protected $_dbh;                        // property which keeps the database handler

    protected $_database;                   // property to keep the database name

    protected $_table;                      // property to keep the table name

    protected $_query;                       // property to keep a query statement

    public function __construct() {

        // require the database configurations as an array from config.php
        $this->_connection = require_once 'config.php';
        // define which database driver to use (mysql?) and extract the values as variables
        extract($this->_connection['connection']['mysql']);

        // make the database and table name available to the class
        $this->_database = $database;
        $this->_table    = $table_name;

        // build the dsn string value for the PDO connection
        $dsn = $driver.":host=".$host.";dbname=".$database;

        // Check for PDO driver and create the connection to the database.
        try {
            parent::__construct($dsn, $username, $password, array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
        } catch (PDOException $e) {
            die ('Connection failed: ' . $e->getMessage());
        }
    }

    public function input_query($query) {
        $this->_query = parent::prepare($query);
        return $this;
    }

    public function execute() {
        return $this->_query->execute();
    }

    public function single() {
        $this->execute();
        return $this->_query->fetch();
    }

    public function result_set() {
        $this->execute();
        return $this->_query->fetchAll();
    }
} 
```

和 index.php 文件：

```
<?php
require_once 'database.php';

$db = new DB();

$db->input_query("SELECT `name` FROM `names`");

try {
    $r = $db->result_set();
} catch (PDOException $e) {
    die ($e->getMessage());
}
var_dump($r); 
```

var_dump($r) 给了我一大堆名字。

非常感谢你们的帮助！

# android - 将带有图像的字节数组转换为字符串

> ID：11953933
> 
> 赞同：0
> 
> 时间：2012-08-14T14:00:00.283
> 
> 标签：android, bytearray

在我的程序中，我收到一个字节数组。第一部分实际上是一个字符串，第二部分是转换为字节数组的图片。
像这样：

```
<STX>1<US>length of picture<ETX> here are the bytes... 
```

目前我有这个来分割 ETX 之前和之后的部分

```
string incomingMessage = incomingBytes.toString();

String messagePart = incomingMessage.substring(0, firstETX);
String dataPart = incomingMessage.substring(firstETX, incomingMessage.length()); 
```

之后我使用

```
dataPart.getBytes(); 
```

将其转换回字节数组。

但我认为转换包含图像的字节会导致一些问题，因为我的程序不会将字节转换为图像。

那么如何在不将其转换为字符串的情况下获取 ETX 之后的字节呢？或者我如何保留原始字节以便我可以使用它们？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:32:13.000

您需要`<ETX>`在字节数组中找到 的位置。然后，您可以将其用作偏移量`BitmapFactory.decodeByteArray`

我无法测试这段代码，但你应该明白了。

```
 final byte[] etxBytes = {'<','E','T','X','>'};
    int i =0 ;
    boolean found = false;
    for (i = 0; !found && (i < (incomingBytes.length-etxBytes.length)); i++){
        found = true;
        for (int j=i; (j-i) < etxBytes.length && found; j++){
            if (etxBytes[j-i]!=incomingBytes[j]){
                found = false;
                break;
            }
        }
    }
    if (found){
        int offset = i + etxBytes.length;
        Bitmap image = BitmapFactory.decodeByteArray(incomingBytes, offset, incomingBytes.length-offset);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:03:30.383

Encode the bytes to a string using base 64 encoding as per this [answer](https://stackoverflow.com/a/4838491/32090) and then decode them back to the image.

# autocomplete - Aptana 远程文件代码辅助

> ID：11953939
> 
> 赞同：0
> 
> 时间：2012-08-14T14:00:14.283
> 
> 标签：autocomplete, aptana

我是 Zend Studio 的长期用户，正在尝试过渡到 Aptana。

我从事的许多项目实际上并不是 Zend 内部的项目，我只是使用 Zend 的远程文件部分并在远程文件系统上使用 git/svn（这样做是有原因的，而不是将其存储在本地，但仅此而已与我的问题无关）。

是否有任何原因我无法在 Aptana 中获得代码辅助/自动完成功能，特别是对于自定义类/函数？例如，如果我有以下内容：

```
文件1.php
函数 myTestFunction($var) {......

文件2.php
$test = myTes{ctrl+space}
```

我没有得到任何代码辅助弹出窗口来自动完成函数名称（即使 file1 当前在另一个选项卡中打开）。

Zend 中确实存在此功能，我没有在 Eclipse/PDT 中尝试过，但知道它在独立的 Aptana 或 Eclipse 插件中都不起作用。

我错过了什么，还是没有办法做到这一点？如果这是不可能的，那么这对我来说几乎是一个交易破坏者。我们离开始使用“项目”还差得很远，而代码辅助是您真正开始依赖的东西之一:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:19:56.367

Aptana Studio 以不同的方式处理远程文件。与工作区项目中的文件不同，远程文件不会被索引，因此，您不会从 file2 获取 file1 上的功能的 Content-Assist。

主要原因是性能。索引项目涉及读取项目中每个文件的内容，因此在项目位于远程的情况下，性能损失是有问题的。

# fortran77 - 如何在fortran中求解指数方程？

> ID：11953940
> 
> 赞同：0
> 
> 时间：2012-08-14T14:00:15.673
> 
> 标签：fortran77

谁能告诉我如何在 FORTRAN 中求解指数方程（方程有两个未知数，指数包含一个未知数）。我想找到两个未知数：

```
exp(w)*w+(exp(w)+exp(2w)+exp(3w))*(k^4+k^2)+k^2+k^4=0 
```

未知数是`w`和`k`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:12:37.677

Fortran 无法立即求解此方程。

在 fortran 中，你必须重新发明轮子来解决这个问题：你必须找到一种已知的算法来处理这种形式的方程并实现它。当然它是可以完成的，一旦你完成它，它可能会超过大多数其他工具，但你将不得不花费大量时间对其进行编程，这将毫无意义。

为什么要使用 fortran 而不是 maxima、matlab、mathematica 或其他东西？其中任何一个都可以用一个命令解决这个方程，并且（如果需要）非常容易地绘制结果。

# netsuite - NetSuite 根据角色隐藏表单选项卡

> ID：11953943
> 
> 赞同：0
> 
> 时间：2012-08-14T14:00:18.710
> 
> 标签：netsuite

我一直在寻找 NetSuite 的帮助，但我一无所获。是否可以使用 SuiteScript 隐藏表单上的选项卡？我看到您可以拉回一个表单并从中获取该选项卡 (form.getTab('info');) 但与字段不同的是 form.getTab('info').setDisplayType('hidden'); 没有选项 或任何类似的东西。有人对此有什么建议吗？我们有多个组织使用此表单，并且某些字段与某些组织无关。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:45:34.040

我们（TNO 团队）为您调查了这个问题。经 NetSuite 确认，没有可以隐藏 customb 选项卡的直接 API。但是，可以做的是隐藏您想要隐藏的选项卡中存在的所有字段。通过它，选项卡将不会显示。

在 nlobjfield 下，您可以使用 setDisplayType() 并将类型设置为隐藏。

作为参考，您可以查看 SuiteAnswers 中的以下链接：

*   [https://netsuite.custhelp.com/app/answers/detail/a_id/10263/kw/nlobjField#N917407985-10](https://netsuite.custhelp.com/app/answers/detail/a_id/10263/kw/nlobjField#N917407985-10)

希望这可以帮助！如果您需要任何其他帮助，请告诉我们。如前所述，我们是*The New Office (TNO)*，一家帮助公司采用 NS 和其他云应用程序的 NetSuite 咨询和经销商。我们正在开发我们的新站点 ([thenewoffice.com)，但我们以前的站点在这里 [http://vconstruct.com/]。我们还有一个数据迁移工具的产品网站，[http://www.muvdata.com/](http://www.muvdata.com/)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:56:48.510

没有命令可以隐藏已经显示的子选项卡。

您是否考虑过默认为所有用户隐藏子选项卡，然后如果用户的角色（或组或您想要使用的任何内容）在您的允许列表中，则使用 form.insertSubTab() ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:42:16.397

这是可能的，虽然不是通过`SuiteScript`或只是一个自定义字段官方支持。没有`SuiteScript API`s 可以做到这一点；你需要进行`DOM`操作。

主要的缺点，应该`NetSuite`决定改变他们的`DOM`元素，你的标签隐藏很可能不起作用。

使用类似`Firebug`或`Chrome debugger`来查找`ID`要隐藏`HTML`的选项卡，并在屏幕上的选项卡之后的某个位置添加自定义字段（需要加载选项卡）并包括：

```
document.getElementById("tabID").style.display="none"; 
```

# php - 显示 PHP Mysql 数组的内容

> ID：11953944
> 
> 赞同：0
> 
> 时间：2012-08-14T14:00:24.153
> 
> 标签：php, mysql, arrays

简单的问题（我认为）。

我有以下 PHP / MySQL 脚本：

```
$risksql="select risk from jobsrisks where job='$job'";
$executerisks=mysql_query($risksql);
$test=mysql_fetch_array($executerisks);
$riskrows=mysql_num_rows($executerisks); 
```

我想用代码打印数组的值（用于测试）：

```
print_r($test); 
```

这会产生以下输出：

![](../Images/a18041280e81816488f183c2d9225cf9.png)

php 中的查询实际上输出了 3 条记录，而不仅仅是重复的一条。有什么想法我做错了吗？其他记录在哪里，为什么不在数组中？mysql_fetch_array 是要使用的正确代码吗？

然后我想在另一个 mysql 查询中使用 PHP 数组：

```
$ids = join(',',$test);   
$sql = "SELECT * FROM table WHERE risk IN ($ids)"; 
```

那么这会是正确的吗？

一如既往地感谢您的帮助。

谢谢，R

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:03:46.390

you need to fetch each row, ie:

```
while ($row = mysql_fetch_assoc($result)) {
    echo $row['firstname'];
    echo $row['lastname'];
    echo $row['address'];
    echo $row['age'];
} 
```

check the [manual](http://php.net/manual/en/function.mysql-query.php)

```
$ids = join(',',$test);   
$sql = "SELECT * FROM table WHERE risk IN ('$ids')"; 
```

almost right. don't forget about quotes

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:04:31.363

为什么不加入选择？

```
$sql = "SELECT * FROM table WHERE risk IN (SELECT risk FROM jobsrisks WHERE job='$job')"; 
```

# c# - 提高使用 Windows 服务将 1000 万条记录写入文本文件的性能

> ID：11953945
> 
> 赞同：0
> 
> 时间：2012-08-14T14:00:24.207
> 
> 标签：c#, .net, .net-4.0, io, task-parallel-library

我正在从数据库中获取超过 1000 万条记录并写入文本文件。完成此操作需要数小时的时间。这里有使用 TPL 功能的选项吗？

如果有人能让我开始用 TPL 实现它，那就太好了。

```
using (FileStream fStream = new FileStream("d:\\file.txt", FileMode.OpenOrCreate,     FileAccess.ReadWrite))
{
    BufferedStream bStream = new BufferedStream(fStream);
    TextWriter writer = new StreamWriter(bStream);
    for (int i = 0; i < 100000000; i++)
    {
        writer.WriteLine(i);
    }
    bStream.Flush();
    writer.Flush(); // empty buffer;
    fStream.Flush();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:37:06.370

代码示例只是将整数写入文件，不访问数据库。如果这不快的话，你的硬件就有问题了。您最可能的瓶颈是从数据库中获取数据。慢查询或慢连接。如果您指定数据库类型并显示我们可以放大的查询...

# jquery - 加载页面时设置复选框

> ID：11953946
> 
> 赞同：-1
> 
> 时间：2012-08-14T14:00:26.620
> 
> 标签：jquery, asp.net-mvc-3

我尝试设置复选框并且无法获得工作简单的代码。

有什么线索吗？

谢谢！

```
@{
    ViewBag.Title = "Web Reports - Peliculas";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script type="text/javascript">
$(document).ready(function () {

        $("input[type='checkbox']").each(function(){
            var name = $(this).attr('name'); // grab name of original
            var value = $(this).attr('value'); // grab value of original

            alert(name); // It doesn't work at all :(
        });
    })​;
});
</script> 
```

=================== 更新=============================

生成的代码

```
<!DOCTYPE html>
<html>
<head>
    <title>MySite</title>
    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />

    <link href="/Scripts/jquery-ui-1.8.18/css/flick/jquery-ui-1.8.18.custom.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/jquery-ui-1.8.18/js/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="/Scripts/jquery-ui-1.8.18/js/jquery-ui-1.8.18.custom.min.js" type="text/javascript"></script>
    <script src="/Scripts/jquery-ui-1.8.18/development-bundle/ui/i18n/jquery.ui.datepicker.js"   type="text/javascript"></script>

      <script src="/Scripts/jquery-ui-1.8.18/development-bundle/ui/i18n/jquery.ui.datepicker-es.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(function () {
            $('.datepicker').datepicker({
            });
        });

        $(document).ready(function () {
            $("#startDate").keyup(function () {
                $('#endDate').val($('#startDate').val());
            });
        });

    </script>
</head>
<body>
    <div class="page">
        <div id="header">
            <div class="user">
                    <span style="text-align: right;">Bienvenido, <strong>mobile
                    </strong>! <a href="/Home/LogOff">LogOff</a></span>
            </div>
            <div id="title" style="display: table-row; vertical-align: top;">
                <div style="display: table-cell; vertical-align: top;">
                    <a href="/">
                        <img src="/Images/b-default.jpg" width="370px"  alt=""  /></a>
                </div>
                <div style="display: table-cell; vertical-align: middle; width: 100%;">
                    <h1 style="text-align: right;">
                        Web Reports</h1>
                </div>
            </div>
        </div>
        <div id="main">
            <div class="clear">
            </div>
            <script type="text/javascript">
    $(document).ready(function () {

        $("input[type='checkbox']").each(function(){
            var name = $(this).attr('name'); // grab name of original
            var value = $(this).attr('value'); // grab value of original

            alert(name);
        });

})​;
    });
</script>
<h2> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:03:06.123

您的代码中有错误`})`，请尝试以下操作：

```
$(document).ready(function () {
        $("input[type='checkbox']").each(function(){
            var name = $(this).attr('name'); 
            var value = $(this).attr('value'); 

            alert(name); 
        });
     // })​;
}); 
```

作为*旁注*，您可以使用`val()`获取/设置复选框值的方法：

```
var value = $(this).val(); 
```

# jquery-plugins - jQuery Cycle 插件中的手动转换

> ID：11953948
> 
> 赞同：1
> 
> 时间：2012-08-14T14:00:44.970
> 
> 标签：jquery-plugins, jquery-cycle

我想为每张幻灯片添加一个自定义数据属性，并在之前的事件中，获取属性的值并手动设置 Cycle 插件到下一张幻灯片的过渡。这可以使用 jQuery Cycle 插件来完成吗？

# formstack - 将表单数据发布到 FormStack

> ID：11953951
> 
> 赞同：0
> 
> 时间：2012-08-14T14:00:59.393
> 
> 标签：formstack

有谁知道是否可以向某人发送 PDF 之类的表单，然后将该表单数据提交给 FormStack？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:13:30.950

FormStack 确认这是不可能的。

# mapping - 带有 JVectorMap 的带有自己的文本的弹出窗口

> ID：11953952
> 
> 赞同：2
> 
> 时间：2012-08-14T14:01:01.990
> 
> 标签：mapping, jvectormap

是否可以使用 JVectorMap 启用弹出窗口，其中不仅包含国家名称，还包含一些附加文本（例如，地址、电话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:20:24.970

`onRegionLabelShow`是的，您为事件绑定处理程序。传递给回调的第二个参数将是标签 jQuery 元素。请参阅[文档](http://jvectormap.com/documentation/javascript-api-v1/jvm-worldmap/)。例子：

```
onRegionLabelShow: function(e, label, code){
  label.html(label.html()+' (GDP - '+gdpData[code]+')');
} 
```

# c++ - 使用 atexit 调用 pthread_exit

> ID：11953955
> 
> 赞同：-4
> 
> 时间：2012-08-14T14:01:08.583
> 
> 标签：c++, pthreads, posix, language-lawyer

`atexit`打电话合法`pthread_exit`吗？没有它，`main()`返回时所有线程都将终止。（简单的解决方案是修改`main()`为调用`pthread_exit()`自身，但在这个最小示例派生的实例中这是不可能的）。

```
#include <unistd.h>
#include <cstdlib>
#include <iostream>
#include <pthread.h>

void *foo(void *data) {
  for (int i = 0; i < 10; ++i) {
    std::cout << i << "\n";
    sleep(1);
  }
  return NULL;
}

void foo_init() {
  std::atexit([](){
    pthread_exit(NULL);
  });
}

int main() {
  foo_init();
  pthread_attr_t attr;
  pthread_attr_init(&attr);
  pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_DETACHED);
  pthread_t thr;
  pthread_create(&thr, &attr, foo, NULL);
} 
```

状态的联机帮助页`pthread_exit`：

> 线程终止不会释放任何应用程序可见的进程资源，包括但不限于互斥锁和文件描述符，也不会执行任何进程级别的清理操作，包括但不限于调用任何可能存在的 atexit() 例程。

这似乎排除了疯狂递归破坏事物的风险。

它还指出：

> 如果从作为对 pthread_exit() 的隐式或显式调用的结果而调用的取消清理处理程序或析构函数调用 pthread_exit() 的行为是未定义的。

这表明在某些地方调用 是未定义的`pthread_exit`，但是（除非 main 需要 > 10 秒才能返回，让我们假设在“真实”情况下是不可能的）不适用。

这个例子“对我有用”但是 POSIX 需要它工作吗？如果不是，它是未定义的还是未指定的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T15:02:42.443

就 POSIX 而言，存在一些问题：

*   [文档`pthread_exit()`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_exit.html)说：“在最后一个线程终止后，进程以退出状态 0 退出。行为就像在线程终止时调用 exit() 的参数为零”
*   [文档`exit()`](http://pubs.opengroup.org/onlinepubs/000095399/functions/exit.html)说，“如果通过调用 atexit() 注册的函数未能返回，则不应调用剩余的注册函数，并且不应完成其余的 exit() 处理。如果调用 exit() 更多不止一次，行为是未定义的”。

所以严格来说，当`pthread_exit()`最后一个线程被调用时，其行为就好像`exit()`被调用了不止一次，也就是说它是未定义的行为。

也就是说，我想最糟糕的情况是应用程序在最后一个线程退出时会崩溃或死锁。由于该过程无论如何都会退出，因此风险可能是可以接受的，具体取决于您的应用程序的性质以及您的测试表明风险可能有多低。

如果您可以安排知道哪个线程将是最后一个退出，我认为您可以在`atexit()`回调中阻塞信号量、条件变量或互斥锁，而不是调用`pthread_exit()`. 当它即将调用`pthread_exit()`（或返回）时，让最后一个线程释放该块。

# windows - 记录进程加载的 DLL

> ID：11953960
> 
> 赞同：5
> 
> 时间：2012-08-14T14:01:20.300
> 
> 标签：windows, dll, profiling

我想将日志记录添加到我们的单元测试中，以记录它们使用的 DLL 以及它们的加载位置。

我可以从 Sysinternals ListDLLs 获得我需要的信息，但我需要在测试过程运行时运行它，我最终会遇到竞争条件：例如，ListDLLs 可能运行得太早，错过了一个 DLL在测试运行中途加载；或 ListDLLs 可能在测试进程退出后运行得太晚。

同样，我可以从 Visual Studio 调试器的输出和模块窗口中获取我需要的信息，但我想在我们的构建服务器上自动执行此操作。

是否有任何命令行工具可以运行任意 EXE、跟踪它使用的 DLL 并将信息记录到文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:01:36.780

您可以编写自己的工具，该工具将使用“调试”功能。这个工具必须

1.  启动新进程暂停
2.  作为调试器附加到创建的进程
3.  处理调试事件，我记得，你需要 LOAD_DLL_DEBUG_EVENT

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms679302(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679302(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:03:32.327

好消息：使用 Detours 自己编写并不难。挂钩 LoadLibraryA/W 函数并将 DLL 名称记录到文件中（针对实际 LoadLibrary 返回的值使用 GetModuleFileName）。还挂钩 CreateProcess，以便您可以记录子进程加载的 DLL。

坏消息：我希望能够发布我使用的源代码，但它是一个我无法共享的内部工具。

**编辑：**我不相信这个工具的 Detours 挂钩是完全可靠的，因为在我的测试过程中，它错过了一些 DLL。这是使用调试器 API 的替代工具：[https ://github.com/timrobinson/logdlls](https://github.com/timrobinson/logdlls)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T03:20:10.613

请注意，SysInternals（现为 MSFT：[http](http://technet.microsoft.com/en-US/sysinternals) ://technet.microsoft.com/en-US/sysinternals ）有一个很好的工具来跟踪加载应用程序时发生的各种事件：进程监视器。您必须过滤掉与您正在检查的应用程序无关的任何内容。此外，您可能需要设置 Operation="Load Image" 过滤器。

尝试了 Tim Robinson 的工具，但它似乎只会跟踪与 Windows 相关的 dll，因此在我的情况下没有用。

# c# - 可能吗？（wpf 或 Windows 窗体程序甚至 asp.net 应用程序中的 Visual Studio 资源）

> ID：11953961
> 
> 赞同：0
> 
> 时间：2012-08-14T14:01:22.417
> 
> 标签：c#, visual-studio

我有这样的想法：创建一个模拟 Visual Studio 的程序来帮助人们学习 C#。这将类似于 w3schools.com 的“亲自尝试”功能

会有一个文本框，用户可以在其中放入一些代码，例如：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
        }
    }
} 
```

但现在有一个棘手的部分：例如，如果用户犯了一个合成错误，我想像视觉工作室一样显示错误，或者当用户点击“验证”按钮时，如果代码错误，我d 得到与视觉工作室出现的相同的错误。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:49:48.953

感谢您的回答。我找到了我一直在寻找的东西。我想做的是允许用户在文本框中输入一些代码，当他/她点击“生成”按钮时，代码将被编译并生成一个.exe。经过一番研究，我发现了这个类：

```
CSharpCodeProvider codeProvider = new CSharpCodeProvider(); 
```

您可以设置一些参数来生成 .exe 或 dll，然后发送一个字符串作为要编译的代码。如果它有错误，您可以通过执行以下操作来捕获它们：

```
 if (results.Errors.Count > 0)
{
                {
                    foreach (CompilerError CompErr in results.Errors)
                    {
                        txtErro.Text = txtErro.Text +
                            "Line number " + CompErr.Line +
                            ", Error Number: " + CompErr.ErrorNumber +
                            ", '" + CompErr.ErrorText + ";" +
                            Environment.NewLine + Environment.NewLine;
                    }
                }
} 
```

我希望这对其他人也有用。非常感谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:04:10.727

我认为这是可能的，但你必须使用反射。有了它，您可以动态创建可以编译运行时的 C# 代码。然而，它非常先进，但据我所知，这是可能的。

以下链接可能有用：

[在运行时动态生成 DLL 程序集](https://stackoverflow.com/questions/604501/generating-dll-assembly-dynamically-at-run-time)

你真正想要的是：

[编译器即服务有什么好处](https://stackoverflow.com/questions/2975164/what-are-the-benefits-of-compiler-as-a-service)

但是 afaik 现在不可用。您也没有获得调试功能。您可能可以通过调试等运行新的 VS 实例，但这可能有点矫枉过正。

# c# - 如何使用 pinvoke 在另一个传递给 C DLL 的内部编组结构

> ID：11953967
> 
> 赞同：2
> 
> 时间：2012-08-14T14:01:38.417
> 
> 标签：c#, c, dll, struct, pinvoke

我试图弄清楚如何将一个简单的结构嵌入到另一个从 c# 传递给 C dll 的结构中。你如何编组嵌入式结构？精简到必需品。

```
//The C code
typedef struct {
       int a;
       int b;
} A;
typedef struct {
      int c;
      A myStruct;
} B;

//The c# code:
using System.Runtime.InteropServices;

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
    public class A{
        int a;
        int b;
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
    public class B{
          int c;
          public IntPtr A;
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:45:53.123

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public class B{
      int c;
      public A a;
    } 
```

仅当 B 定义为时才需要 IntPtr：

```
typedef struct {
      int c;
      A* myStruct;
} B; 
```

# api - SugarCRM - 添加具有自动递增 ID 的潜在客户

> ID：11953969
> 
> 赞同：1
> 
> 时间：2012-08-14T14:01:43.160
> 
> 标签：api, soap, sugarcrm

我使用 SOAP API 向 SugarCRM 添加新的潜在客户。此外，每当创建新潜在客户时，我都会使用一个插件来分配一个自动递增的潜在客户 ID (http://www.sugarforge.org/projects/autoincrement/)。

现在，如果我通过前端创建新的潜在客户，插件工作正常。但是，如果我使用 SOAP API，将自动递增 ID 分配给前导的模块中的函数不会触发。

我通过创建潜在客户

```
 $module = 'Leads'; 

    $params = array(
        'session'           =>  $session,
        'module_name'       =>  $module,
        'name_value_list'   =>  array(
            array('name' => 'id',               'value' => ''),
            //array('name' => 'int_lead_id_c',  'value' => ''),             
            array('name' => 'first_name',       'value' => $_POST["first_name"]),
            array('name' => 'last_name',        'value' => $_POST["last_name"]),
            array('name' => 'phone_home',       'value' => $_POST["phone"]),
            array('name' => 'email1',           'value' => $_POST["email"]),
            array('name' => 'assigned_user_id', 'value' => '1'),
            )
        );  

    //Create the Lead record
    $lead_result = $soapclient->call('set_entry', $params); 
```

模块中的功能是这样的：

```
class SugarFieldAutoincrement extends SugarFieldBase {

    /**
     * Override the SugarFieldBase::save() function to implement the logic to get the next autoincrement value
     * and format the saved value based on the attributes defined for the field.
     *
     * @param SugarBean bean - the bean performing the save
     * @param array params - an array of paramester relevant to the save, most likely will be $_REQUEST
     * @param string field - the name of the field
     */
    public function save(&$bean, $params, $field, $properties, $prefix = '') {
    }
} 
```

通过 SOAP API 添加潜在客户时，如何确保也触发了此功能？

非常感谢你的帮助！:-)

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:52:38.760

您需要在该字段的 vardef 记录中将字段类型设置为“autoincrement”，并将 dbType 设置为“int”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:51:41.657

如果我没记错的话，对于大多数表，数据库在插入时都有一个 UUID() 触发器，因此您应该能够完全删除 id 字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:10:02.560

如果要在保存前触发函数，可以使用 beforeSave 逻辑钩子。

# aggregate-functions - SAP BO XI Desktop Intelligence Aggregate Calculations

> ID：11953973
> 
> 赞同：0
> 
> 时间：2012-08-14T14:02:01.590
> 
> 标签：aggregate-functions, business-objects, calculated-columns

I am new to Business Objects and more specifically Desktop Intelligence. We are trying to use it as a reporting tool for our scientific data but running into issues when performing calculations to "create" objects and then trying to perform statistical or aggregate functions on them. For example I run a query that pulls the columns subject name, result day, parameter, and result value. In a table it would look like this:

```
SUBJECT    DAY    PARAM      RV
10001      0      Length     5.32
10001      0      Width      4.68
10002      0      Length     3.98
10002      0      Width      1.64
10001      7      Length     8.89
10001      7      Width      7.30
10002      7      Length     4.17
10002      7      Width      2.19 
```

We then use the equation for Volume: L*W^2*0.52 in the report defined as measure variable. Using a cross tab with days across the top and subjects down the side I display Length Width and Tumor Volume like such:

```
 0                           7
SUBJECT     L        W        V         L        W        V
10001       5.32     4.68     60.59     8.89     7.30     246.35
10002       3.98     1.64     5.57      4.17     2.19     10.40
COUNT                           #                           #
MEAN                            #                           # 
```

Within the footers I'd like to display aggregates such as count, standard deviation, percent change from day zero but they are all screwed up. It's not that it's also doubling the n by two either to account for the fact that Length and Width make up Volume. I have no clue and am at a loss. Any advice suggestions or guidance would be welcomed.

Thanks in advance, Jeff

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:03:46.620

我假设您的交叉表在 Slice and Dice 中如下所示：

```
            ¦ <DAY>（休息）
            ¦ <参数>
  --------------------
  <主题> ¦ <RV>

```

所以你的桌子应该看起来像：

```
        0 7        
        长度 宽度 体积 长度 宽度 体积
10001 5.32 4.68 60.59 8.89 7.30 246.35
10002 3.98 1.64 5.57 4.17 2.19 10.40

```

使用`<DAY>`'s break footer 具有音量变量。对于您的体积计算，我使用了以下公式：`=(<RV> Where (<PARAM>="Length"))*(Power(<RV> Where (<PARAM>="Width") , 2))*0.52`

右键单击交叉选项卡边缘并选择`Format Crosstab...`然后选中选项卡部分中的`Show Footer`复选框。如果需要，在页脚中添加额外的行。`Down Edge Display``General`

`=Count(<VOLUME>)`然后手动添加计数和平均值的公式`=Average(<VOLUME>)`

对我来说，决赛桌现在看起来像这样（数值四舍五入为 2dp）：

```
        0 7        
        长度 宽度 体积 长度 宽度 体积
10001 5.32 4.68 60.59 8.89 7.30 246.35
10002 3.98 1.64 5.57 4.17 2.19 10.40
计数 2.00 2.00
平均 33.08 128.37

```

诀窍是确保计算发生在正确的上下文中（即，相对于表不同部分中的标题变量）。您可以使用和函数添加和删除变量和`In`上下文。虽然我不需要在这张桌子上使用它们。`ForAll``ForEach`

# zend-framework - zend Framework quickstart A table must have a primary key, but none was found

> ID：11953974
> 
> 赞同：3
> 
> 时间：2012-08-14T14:02:02.937
> 
> 标签：zend-framework, primary-key, wamp

I am following the: [http://framework.zend.com/manual/en/learning.quickstart.create-model.html](http://framework.zend.com/manual/en/learning.quickstart.create-model.html).

Keep hitting wall after wall of issues. My current one is the following error:

```
An error occurred

Application error

Exception information:

Message: A table must have a primary key, but none was found

Stack trace:

#0 C:\wamp\www\zendtest\quickstart\library\Zend\Db\Table\Abstract.php(982): Zend_Db_Table_Abstract->_setupPrimaryKey()
#1 C:\wamp\www\zendtest\quickstart\library\Zend\Db\Table\Select.php(100): Zend_Db_Table_Abstract->info()
#2 C:\wamp\www\zendtest\quickstart\library\Zend\Db\Table\Select.php(78): Zend_Db_Table_Select->setTable(Object(Application_Model_DbTable_Guestbook))
#3 C:\wamp\www\zendtest\quickstart\library\Zend\Db\Table\Abstract.php(1018): Zend_Db_Table_Select->__construct(Object(Application_Model_DbTable_Guestbook))
#4 C:\wamp\www\zendtest\quickstart\library\Zend\Db\Table\Abstract.php(1326): Zend_Db_Table_Abstract->select()
#5 C:\wamp\www\zendtest\quickstart\application\models\GuestbookMapper.php(58): Zend_Db_Table_Abstract->fetchAll()
#6 C:\wamp\www\zendtest\quickstart\application\controllers\GuestbookController.php(14): Application_Model_GuestbookMapper->fetchAll()
#7 C:\wamp\www\zendtest\quickstart\library\Zend\Controller\Action.php(516): GuestbookController->indexAction()
#8 C:\wamp\www\zendtest\quickstart\library\Zend\Controller\Dispatcher\Standard.php(295): Zend_Controller_Action->dispatch('indexAction')
#9 C:\wamp\www\zendtest\quickstart\library\Zend\Controller\Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#10 C:\wamp\www\zendtest\quickstart\library\Zend\Application\Bootstrap\Bootstrap.php(97): Zend_Controller_Front->dispatch()
#11 C:\wamp\www\zendtest\quickstart\library\Zend\Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#12 C:\wamp\www\zendtest\quickstart\public\index.php(26): Zend_Application->run()
#13 {main}  
Request Parameters:

array (
  'controller' => 'guestbook',
  'action' => 'index',
  'module' => 'default',
) 
```

But I am sure my table has a primary key code for table:

```
CREATE TABLE guestbook (
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    email VARCHAR(32) NOT NULL DEFAULT 'noemail@test.com',
    comment TEXT NULL,
    created DATETIME NOT NULL
);

CREATE INDEX "id" ON "guestbook" ("id"); 
```

Don't understand why getting error

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:36:01.583

在 Zend Framework 中，所有表都应该有主键列。在您的模型中，您应该设置主列的名称。

例如，表用户：

```
class Application_Model_TableUser extends Zend_Db_Table_Abstract
{
    protected $_name = 'user'; // table name
    protected $_primary = 'id'; // primary column name
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T14:40:53.723

我遇到了同样的错误。我发现 Zend 缓存了数据库元数据（显然是出于性能原因）。就我而言，我删除并创建了一个同名的表。新表有一个主列，而旧表没有。删除 Zend 缓存为我解决了这个问题。

# jquery - disable all the links in my slider panes using jquery?

> ID：11953976
> 
> 赞同：0
> 
> 时间：2012-08-14T14:02:09.440
> 
> 标签：jquery

How do i disable all the links in my slider panes using jquery?

Basically every single `<a href...` within my parent div

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:03:28.313

```
$('.classname-of-parent-div').on('click', 'a', function (e) {
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:11:16.487

试试看。

```
$(document).ready(function() {
    $("#slider").on('click', 'a', function(event) {
        event.preventDefault();
        alert('no navigation');
    });
});​ 
```

[**现场演示**](http://jsfiddle.net/Ha4pR/)

更多关于 jQuery PreventDefault[的信息在这里](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T14:04:16.330

```
//You could alse use $('a') if you want to disable ALL links
$('.sliding-pane a').click(function(e) {
    e.preventDefault();
}); 
```

# vb6 - .NET Type Library for VB 6

> ID：11953980
> 
> 赞同：1
> 
> 时间：2012-08-14T14:02:14.480
> 
> 标签：vb6, typelib

I currently am using a .NET type library with vb 6 via a reference to it via Project -> References. I would like to make it more independent. I am curious whether I can access this library via a statement like this:

```
Public Declare Function Encode Lib "typelibrary.tlb" (ByVal intfilename As String,_
ByVal outfilename As String) As Integer 
```

I haven't been able to find any reference to this and I haven't been able to get it to work myself. When I try it says: Error:53, File not found: typelibrary.tlb.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:07:02.977

不，您不能使用`Declare Function`. 使用 COM 对象时，您可以在添加对类型库/DLL 的引用的地方使用早期绑定，或者在不使用的地方使用后期绑定`CreateObject("AssemblyName.ClassName")`，但会丢失智能感知等。

或者，您可以`[DllExport]`在 .Net 中使用，然后您可以使用 VB6 进行调用`Declare Function`，但是您需要手动转换您需要进行的每个调用。

# internet-explorer - 为什么在IE的左边出现border-top-right-radius

> ID：11953984
> 
> 赞同：1
> 
> 时间：2012-08-14T14:02:26.983
> 
> 标签：internet-explorer, css

我正在修改一个网站以适应 IE。

该网站基于drupal 7，使用希伯来语。

四舍五入的年龄是使用指南针编译的

```
/* line 28, ../sass/boxshadow.scss */

#border-radius {
    -moz-border-radius-topright: 8px;
    -webkit-border-top-right-radius: 8px;
    border-top-right-radius: 8px;
    -moz-border-radius-bottomright: 8px;
    -webkit-border-bottom-left-radius: 8px;
    border-bottom-right-radius: 8px;
} 
```

在现代浏览器中一切正常，但在 IE 上，角落在左侧是圆形的。当我将属性更改为左侧时。它适用于ie，但在其他浏览器上变得疯狂。

[如果你想自己看看](http://www.logtech.co.il "网站") 上面的块是从罗盘上取下来的。这就是我在网站上使用的。

```
#block-menu-menu-navigation-tabs li:first-child a,li:first-child{
 -moz-border-radius-topright: 8px;
  -webkit-border-top-right-radius: 8px;
    border-top-left-radius: 8px;
     -moz-border-radius-bottomright: 8px;
      -webkit-border-bottom-right-radius: 8px;
        border-bottom-left-radius: 8px; 
```

}

**使用指南针

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:10:49.863

最简单的方法是针对 IE 并仅提供已更改的属性。

```
<!--[if IEMobile 7]><html class="iem7"  lang="he" dir="rtl"><![endif]-->
<!--[if lte IE 6]><html class="lt-ie9 lt-ie8 lt-ie7"  lang="he" dir="rtl"><![endif]-->
<!--[if (IE 7)&(!IEMobile)]><html class="lt-ie9 lt-ie8"  lang="he" dir="rtl"><![endif]-->
<!--[if IE 8]><html class="lt-ie9"  lang="he" dir="rtl"><![endif]--> 
```

例如，您可以编写如下内容：

```
.iem7 {
    border-left:1px
} 
```

等等。您应该选择不起作用的 IE 版本。

如果您想针对所有 IE，您可以调整您的条件注释：

```
<!--[if IEMobile 7]><html class="ie iem7"  lang="he" dir="rtl"><![endif]-->
<!--[if lte IE 6]><html class="ie lt-ie9 lt-ie8 lt-ie7"  lang="he" dir="rtl"><![endif]-->
<!--[if (IE 7)&(!IEMobile)]><html class="ie lt-ie9 lt-ie8"  lang="he" dir="rtl"><![endif]-->
<!--[if IE 8]><html class="ie lt-ie9"  lang="he" dir="rtl"><![endif]--> 
```

现在您可以为所有 IE 编写 css：

```
.ie {
    border-left:1px
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:38:46.820

我猜你想让它在 IE9 及更高版本中工作。因为低于 IE9，border-radius 不起作用。

您是否尝试过这样做：

```
#block-menu-menu-navigation-tabs li:first-child a,li:first-child{
  border-radius : 8px 0 0 8px;/* top-left top-right bottom-right bottom-left*/
  /* no need for browser prefixes */
} 
```

# jquery - jQUery - insert   inside label

> ID：11953989
> 
> 赞同：35
> 
> 时间：2012-08-14T14:02:53.417
> 
> 标签：jquery

I want to hide a label using the `fadeOut` effect but when it is completed I want to insert inside it a `&nbsp;`

```
 $('label.alert').fadeOut('slow',function(){$(this).text('&nbsp;');}); 
```

but it produces a `&nbsp;` as a raw text. Any ideas ?

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-14T14:05:11.590

使用`.html()`而不是`.text()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-07-22T18:06:48.453

`.html()`使用或使用其他框架/库（例如`v-html`在 Vue.js 中）的相同方法时要小心，因为它具有 XSS 漏洞。[从此答案](https://stackoverflow.com/a/15928704/2160038)中阅读有关 XSS 的更多信息。

**通过 .text() 的工作方式：**
您可以简单地替换`&nbsp;`为`\xa0`文本消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:05:17.330

`replaceWith`成功了

```
$('label.alert').fadeOut('slow',function(){$(this).replaceWith('<label class="alert">&nbsp;</label>');}); 
```

# pointers - Use std::map with pointer

> ID：11953991
> 
> 赞同：-1
> 
> 时间：2012-08-14T14:02:57.777
> 
> 标签：pointers, stl, c++-cli, clr

i try to use std::map as property in my class. I use Visual Studio 2012, and my class is like:

```
public ref class MyClass
{
    std::map<std::wstring,MyType> * mpMyMap;
    MyClass()
{
mpMyMap = new std::map<std::wstring,MyType>();
}
~MyClass()
{
delete mpMyMap;
}
Get(std::wstring name)
{
    return mpMyMap[name];
} 
} 
```

At return mpMyMap[name]; I get error, what there is no operator[] for this type. What should I do?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:04:48.603

括号运算符在地图上，而不是在地图的指针上......

尝试：return (*mpMyMap)[name];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:05:04.807

`mpMyMap`是一个指针（我看不出有什么原因），所以你需要取消引用它：

```
return (*mpMyMap)[name]; 
```

如果`mpMyMap`必须`delete`在析构函数中动态分配记住它，并防止复制`MyClass`或实现复制构造函数和赋值运算符。

注意`Get()`缺少返回类型（应该是`MyType`or `MyType&`）。将参数设置为`Get()`a`const std::wstring&`以避免不必要的复制，并且`const`as`Get()`不会修改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T14:05:08.377

正确的语法是

```
MyType Get(std::wstring name)
{
    return (*mpMyMap)[name];
} 
```

您还可以使地图成为实例成员而不是指针

```
std::map<std::wstring,MyType> mMyMap; 
```

那么你的原始代码`Get`就可以工作了，你就可以摆脱构造函数和析构函数中的内存管理了`MyClass`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T14:05:21.427

利用

```
return (*mpMyMap)[name]; 
```

或者

```
return mpMyMap->operator[]( name ); 
```

PS这是什么

```
 public ref class MyClass
//^^^^^^^^^^ 
```

`Get`此外，为(`MyType`在您的情况下)添加返回类型

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T14:06:08.920

因为`mpMyMap`是指针第一个变体是

```
Get(std::wstring name)
{
    return (*mpMyMap)[name];
} 
```

第二个

```
Get(std::wstring name)
{
    return mpMyMap->operator[](name);
} 
```

Get 应该有返回类型。

# javascript - How to call some Objective C code in a PhoneGap app on startup?

> ID：11953993
> 
> 赞同：2
> 
> 时间：2012-08-14T14:02:58.443
> 
> 标签：javascript, iphone, objective-c, cordova

I have a PhoneGap app up and running using JavaScript and HTML.

On app startup I need to run some Objective C code (I don't know anything about Objective C. I just have some code that I need to copy + paste so it runs when the app starts).

Where do I put that code in my Phonegap project? Is there some kind of event listener or a main function?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:30:56.157

在您的 AppDelegate.m 文件中查找名为：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    //ADD YOUR OBJECTIVE-C CODE HERE
    return YES;
} 
```

**另一种可能的选择：**

您可能还有其他类，例如 XXXViewController.h/.m。如果是这种情况，请检查是否有一个方法称为：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    //INSERT YOUR OBJECTIVE-C CODE HERE.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:06:04.170

您需要使用插件。通过这样做，您可以创建本机目标 C 类，然后从 PhoneGap 中的 Javascript 调用它们。

看看这里： http: [//www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-ios.html](http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-ios.html)

# c# - Getting and displaying network signal strength on a windows form

> ID：11953994
> 
> 赞同：3
> 
> 时间：2012-08-14T14:02:59.653
> 
> 标签：c#, statusbar, signal-strength

Is there a way to acquire and display the current wireless signal strength of an application's device in C#? I have an application that detects whether there is connectivity via a timer, however I need to know the current signal strength, then display it graphically in a status bar. Below is my current code to detect basic connectivity every few seconds. What can I add to display the strength as well? Thank you. The timer code was given by S.O. user :parapura rajkumar

```
 private void Form1_Load(object sender, EventArgs e)
    {                                  
        //create an object to hold app settings FIRST

        appsetting apps = new appsetting();
        apps.getsetting();
        netMessage.Clear();  

        //creates a timer for refresh rate on connectivity check

         var timer = new Timer();
         timer.Tick += new EventHandler(timer_Tick);
         timer.Interval = 2000; //2 seconds
         timer.Start();            
    }

    //starts the timer
 void timer_Tick(object sender, EventArgs e)
 {
    //if connection is not detected
    if (System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable() ==f
    false)
    {
        //clear the buffer
        netMessage.Clear();

        //turn RED indicator on and display message
        netConnect.BackColor = Color.Red;
        this.netMessage.Text = ("No Connection");
        noConn = true;//set "No connection" to true
        conn= false;

    }
    else
        //turn GREEN indicator on and display message
        netConnect.BackColor = Color.Lime;
        this.netMessage.Text = ("Connected");
        conn = true;// set connection to "true
        noConn = false;

            //if box is red but connection is established, turn it back to green  

            if (noConn == true && 
            System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable() == 
            true)
            {
                 netConnect.BackColor = Color.Lime;
                 this.netMessage.Text = ("Connected");
                 conn = true;
                 noConn = false;
             }

}              

    //need to display signal strength in a text box with color codes or status bar HERE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:42:41.910

经过一些研究和参考其他一些问题后，我能够通过以下提供的开源 API 解决我的问题：**managedwifi.codeplex.com**

只需下载 api，然后通过 add->csproj 将其添加到您的项目中。

使用 WlanClient 类中给出的“public int RSSI”。

干杯

# mysql - Does the limit on the maximum number of SQL join tables apply to the whole query, or are subqueries counted separately?

> ID：11953995
> 
> 赞同：7
> 
> 时间：2012-08-14T14:03:04.603
> 
> 标签：mysql, sql, join

I have read about the [61 table join limit](http://dev.mysql.com/doc/refman/5.0/en/joins-limits.html) in MySQL 5, but I'm not sure how it would apply to the folllowing:

```
SELECT * FROM (

    SELECT * FROM tableA JOIN // Lots of other joins here...

    UNION

    SELECT * FROM tableB JOIN // Lots of other joins here...

    UNION

    SELECT * FROM tableC JOIN // Lots of other joins here...

    // etc...
) 
```

Would I hit the limit with 61 tables in total across all the subqueries, or would it be 61 per UNIONed subquery?

Does this vary across DBs e.g. PostgreSQL, MSSQL, Oracle?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-21T23:59:36.897

每个子查询似乎是 61 个。这是一个证明这一点的小提琴。

[http://sqlfiddle.com/#!2/2b219/5](http://sqlfiddle.com/#!2/2b219/5)

我有一个简单的表格，只有一行：

```
id    | value
1     | testvalue 
```

第一个查询只是表。

第二个查询将表与自身连接 61 次。它工作正常。

第三个查询有一个包含 61 个连接的子查询，它本身又与表连接了一次。它工作正常。

第四个查询连接表 62 次。它失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:02:39.283

是的，它适用于整个查询。我遇到了这个。在 SQL 2005 中，限制是 256。我们刚刚升级到 2008，我不确定是否有限制。在此处查看官方限制：http: [//msdn.microsoft.com/en-us/library/ms143432.aspx](http://msdn.microsoft.com/en-us/library/ms143432.aspx) 但是，最好的做法是将查询分成两部分或更改其编写方式。

# ruby-on-rails - Rails 3.2.8 attr_accessor not seemingly working with form_tag

> ID：11953998
> 
> 赞同：1
> 
> 时间：2012-08-14T14:03:09.910
> 
> 标签：ruby-on-rails, ruby

I've got a few problems with an attr_accessor when using a form_tag in one my views.

```
<%= form_tag set_location_locations_path, :method => "post" do %>
  <%= collection_select(:location, :location_id, Location.all, :id, :location_name) %>
  <%= submit_tag "Go" %>
<% end %> 
```

And in my location model I have this:

```
 attr_accessor :location, :location_id 
```

And I've also tried attr_writer for good measure.

When I submit the form, I can see this in my console:

```
 ActionView::Template::Error (undefined method `location_id' for "1":String): 
```

And the post looks like this:

```
 Parameters: {"utf8"=>"✓", "authenticity_token"=>"oY+jSCV9Mz9iVJnJItADnHdpGhct5DhKpQ+w6JUvgNQ=", "location"=>{"location_id"=>"1"}, "commit"=>"Go"} 
```

I can't figure out why this doesn't work? Previously I've used attr_accessor without problems. Is there something I'm missing?

---- EDIT ----

Controller (not much there)

```
def set_location
  @location = params[:location][:location_id]      
end 
```

View not much here either:

```
 = @location 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:19:30.310

您的 collection_select 需要一个具有方法 location_id 的 Location 实例。您正在分配`'1'`给您的 @location 变量，因此它会尝试`'1'.location_id`并抱怨。将您的 set_location 方法更改为：

```
def set_location
  @location = Location.new(params[:location])
end 
```