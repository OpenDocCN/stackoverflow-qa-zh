# StackOverflow 问答 10512000-10512999

# jquery - JQuery ui对话框打开后调整大小

> ID：10512003
> 
> 赞同：1
> 
> 时间：2012-05-09T07:54:40.490
> 
> 标签：jquery, jquery-ui, resize, jquery-ui-dialog, customdialog

我有一个 JQuery 对话框，用于向用户显示消息。该对话框有 2 个按钮：“确定”和“详细信息”。这个想法是在对话框打开时显示用户友好的消息，当用户单击“详细信息”按钮时，我想在用户友好的消息下显示用户友好的消息以及更详细的消息。“详细信息”按钮使用切换功能来显示/隐藏详细信息。

对话框定义如下：

```
function showNewDocumentDialog(dialogTitle, dialogMessage, dialogDetailMessage) {
            var dialog$ = $('#dialogId');
            var dialogDetail$ = $('#dialogDetailId')
            var showDetailContent = false;            

            dialog$.dialog({
                autoOpen: false,
                title: dialogTitle,
                modal: true,
                width: 'auto',
                height: 'auto',
                zIndex: 39000,
                open: function (type, data) {
                    $('#dialogContentId').text(dialogMessage);
                    $('#dialogDetailContentId').text(dialogDetailMessage);
                    $(this).parent().appendTo($('form:first'));

                },
                buttons: [
                                {
                                    text: "Ok",
                                    click: function () { $(this).dialog("close"); }
                                },
                                {
                                    text: "Details",
                                    click: function () {
                                        dialogDetail$.toggle(showDetailContent);
                                        showDetailContent = !showDetailContent;
                                    }
                                }
                            ]
            });

            if (dialogDetailMessage == '') {
                $(":button:contains('Details)").attr("disabled", "disabled").addClass('ui-state-disabled');
            }
            dialog$.dialog('open');
        }
    </script>   
    <div id="dialogId" title="Title" style="display: none">        
        <p id="dialogContentId">Content</p>
        <div id="dialogDetailId" style="display: none">
            <p id="dialogDetailContentId">DetailContent</p>        
        </div>
    </div> 
```

当用户单击“详细信息”按钮时，如何调整对话框的大小以适应用户友好消息和详细消息？并在用户单击“详细信息”按钮以隐藏详细消息时再次缩小对话框大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:38:44.963

尝试通过获取制作为dailog的div的宽度来调整详细信息按钮上的叠加层点击如下

```
var width = $("selector").width();
var height = $("selector").height();

    if (width > 450) {
        $(".ui-widget-content").css("width", width);

    }
 if (height > 450) {
        $(".ui-widget-content").css("height", height);

    }

    $("#dvNotesPopup").dialog('option', 'position', 'center'); 
} 
```

# javascript - 检测用户的浏览器

> ID：10512004
> 
> 赞同：-1
> 
> 时间：2012-05-09T07:54:40.910
> 
> 标签：javascript, browser

> **可能重复：**
> [使用 javascript 确定正在使用的浏览器](https://stackoverflow.com/questions/10505966/determine-what-browser-being-used-using-javascript)

我正在尝试在 JavaScript 中实现一个方法，该方法将检测用户的浏览器以供初学者使用并打印它。

我已经知道 JavaScript 中的导航器对象，但我不想使用它。还有其他方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T07:56:28.707

如果您不想使用 navigator 属性，那么您就不走运了，因为这是在 javascript 中检测用户代理的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:30:44.820

在某些情况下，您可以直接测试您需要使用的方法。例如，虽然所有浏览器的当前版本都支持该`window.addEventListener`方法，但您可能希望检测该方法是否存在，如果不存在，则尝试其他方式来监听您想要的事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:57:29.037

您可以使用[jQuery.browser](http://api.jquery.com/jQuery.browser/)（我猜它间接使用导航器对象，但您不必触摸它）

例子：

```
<!DOCTYPE html>
<html>
<head>
  <style>
  p { color:green; font-weight:bolder; margin:3px 0 0 10px; }
  div { color:blue; margin-left:20px; font-size:14px; }
  span { color:red; }
  </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

<p>Browser info:</p>

<script>
    jQuery.each(jQuery.browser, function(i, val) {
      $("<div>" + i + " : <span>" + val + "</span>")
                .appendTo( document.body );
    });</script>

</body>
</html> 
```

输出：

```
浏览器信息：
网络套件：是的
版本：536.10
野生动物园：真的
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T07:57:34.247

您可以使用 jQuery 的`$.browser`[1] 功能。

或类似 CSS 浏览器选择器 [2] 来将 CSS 类添加到`<html>`元素

[1] [http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)

[2] [http://rafael.adm.br/css_browser_selector/](http://rafael.adm.br/css_browser_selector/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T07:59:24.420

如果您不想使用 Navigator，那么用户 jquery Here is detaied about it。

[jQuery.browser](http://api.jquery.com/jQuery.browser/)

# scala - 将类及其伴随对象作为类型参数的泛型特征

> ID：10512009
> 
> 赞同：6
> 
> 时间：2012-05-09T07:55:22.883
> 
> 标签：scala, generics

因此，我希望有一个通用特征将一个类作为类型参数，该类具有从特定基类继承的伴随对象，并同时引用伴随对象和类本身。所以，

```
abstract class BaseModel[T] {
  def all: Seq[T]
}

case class Customer(email: String, password: String)

object Customer extends BaseModel[Customer]

// This trait is my issue
trait BaseCrud[T] { 
  def table[T](f: T => String): String = {
    T.all.map(f _).mkString("")
  }
}

object Controller with BaseCrud {
  def foo = table(_.email)
} 
```

我有一些更接近该特征的解决方案，但我将其提炼出来，以便您可以看到我正在尝试做什么。

谢谢

**更新**

所以我从下面的弗兰克那里得到了解决方案，但我确实设法解决了我最初的难题。不过，在这种情况下，解决方案有点难看，为了完整起见，我将在此处包含它。

```
abstract class BaseModel[T] {
  def all: Seq[T] = Seq()
}

case class Customer(email: String, password: String)

object Customer extends BaseModel[Customer]

trait BaseCrud[T, U <: BaseModel[T]] { 
  def table(f: T => String)(implicit obj: U): String = {
    obj.all.map(f(_)).mkString("")
  }
}

object Controller extends BaseCrud[Customer, Customer.type] {
  implicit val model = Customer
  def foo = table(_.email)
} 
```

因此类型参数更改为 BaseCrud，隐式添加到 BaseCrud.table 并在 Controller.model 中实现。我还修正了我所有的错别字。我发现它很有趣 Customer.type 似乎是伴生对象的类型。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T08:16:07.057

您的代码中有一堆问题..让我们一个接一个地解决它：

*   `def table[T](...`请注意，这会`T`覆盖方法范围的原始类型参数。不是你真正想要的，所以省略它并做这个`def table(...`
*   `object Controller with BaseCrud {`包含另外两个错误：
    1.  它必须`extends`不是`with`。后者仅在您已经从某些基类/特征扩展后使用。
    2.  `BaseCrud`需要您必须在此处指定的类型参数，因此类似于`BaseCrud[Customer]`
*   *最后，回答您的实际问题：类型*参数`T`和伴随*对象*之间存在巨大差异。它们本质上是不同的东西，所以你不能通过`T.something`. 相反，您需要以其他方式在您的 trait 中提供伴随对象，例如作为抽象字段。

这是我认为您想要做的一个版本：

```
abstract class BaseModel[T] {
  def all: Seq[T]
}

case class Customer(email: String, password: String)

object Customer extends BaseModel[Customer] {
  def all = List[Customer]() // have to define this
}

trait BaseCrud[T] {
  val companion : BaseModel[T]
  def table(f: T => String): String = {
    companion.all.map(f).mkString("")
  }
}

object Controller extends BaseCrud[Customer] {
  val companion = Customer
  def foo = table(_.email)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T08:11:16.513

我认为，您可以在 trait 中使用 scala`self`类型`BaseCrud`来指定应该混入的类。有关详细信息，请参阅[链接问题](https://stackoverflow.com/questions/1990948/what-is-the-difference-between-scala-self-types-and-trait-subclasses)。

```
trait BaseCrud[T] {
  self: BaseModel[T] =>
  def table(f: T => String): String =
    all.map(f).mkString("")
}

object Controller extends BaseModel[Customer] with BaseCrud[Customer]{
  def foo = table(_.email)
} 
```

# php - 将元标记与 PHP 一起用于搜索引擎

> ID：10512011
> 
> 赞同：-3
> 
> 时间：2012-05-09T07:55:31.393
> 
> 标签：php, mysql, html, seo

我有一个站点，有 100 多个文件夹和文件。对于搜索引擎来说，元标签非常重要。所以，而不是使用元标记作为 html 像：

```
 <meta name="keywords" content="html,php,seo" /> 
```

我可以将它与 PHP 一起使用吗，例如：

```
 <?php 
   $sql ="SELECT keywords FROM database";
   $result = mysql_query($sql);
    while ($row=mysql_fetch_array($result)) {
   echo "<meta name='keywords' content='{$row['keywords']}' />" . ","; 
```

对于搜索引擎，两个代码是否相同被索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:58:31.610

搜索引擎看不到 php 代码，只有 html 结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:00:43.130

使用您的代码，我们有：

```
<meta name='keywords' content='html' />,
<meta name='keywords' content='php' />,
<meta name='keywords' content='seo' />, 
```

我建议：

```
<?php 
   $sql ="SELECT keywords FROM database";
   $result = mysql_query($sql);
   $keywords = '';
   while ($row=mysql_fetch_array($result)) {
     $keywords .= $row['keywords'].',';
   }
   echo "<meta name='keywords' content='$keywords' />"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:00:52.620

这两个代码将向用户的浏览器发送完全相同的 HTML 文本，因此答案是：是的，从 SEO 的角度来看，这两个代码是相同的。

# orchardcms - 将字段添加到 Orchard ContentPart 并且记录不起作用

> ID：10512013
> 
> 赞同：2
> 
> 时间：2012-05-09T07:55:34.167
> 
> 标签：orchardcms

在我的模块中，我有一个`EventPart`and `EventPartRecord`。一切正常，直到我决定`Address2`在零件和记录中添加一个新字段。我认为这很容易，我修改了我的记录如下

```
public virtual String Address2 { get; set; } 
```

然后作为

```
public String Address2
{
    get { return Record.Address2; }
    set { Record.Address2 = value; }
} 
```

现在要在表中添加列，我在 Migration 类中添加了如下方法

```
public int UpdateFrom3()
{
   this.SchemaBuilder.AlterTable(typeof(SupportedEmploymentEventPartRecord).Name
            , table => table.AddColumn("Address2", System.Data.DbType.String, c => c.Nullable().Unlimited()));
   return 4;
} 
```

我运行应用程序并在表中添加了列。到目前为止一切看起来都不错。

但奇怪的是，果园在更新和插入查询中不包括这个新字段。我可以看到该部分正在`Address2`从发布的数据中更新该字段，但不知何故 Orchard 查询生成机制忽略了该字段。

有人可以帮我弄清楚出了什么问题。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T14:29:22.797

删除缓存的 NHibernate 映射 ( **App_Data\Sites\YourSiteName\mappings.bin** ) 并重新启动您的应用程序。那应该有帮助。

# ms-access - 版本控制是让用户及时了解重要数据更改的一种方式？

> ID：10512015
> 
> 赞同：2
> 
> 时间：2012-05-09T07:55:39.937
> 
> 标签：ms-access, version-control, ms-office, auto-update

好的，不是严格的编程，但我们开始了。

情况。我们有 30 多名员工使用我们无法完全控制的 2 个软件包。操作系统是win7。

一个（a 部分）是第 3 方包，我们可以在其中对访问 .mdb 数据库和文本文件的文件树进行许多更改。

另一个（b 部分）是为我们的母公司开发的，可以作为几个 .mdb 文件和十几个 .doc 和 .xls 文件访问。我们可以并且确实更改了这些（主要是 vba 代码和表格更改）

这两个部分每隔几天或至少每周都会更改或更新。当我们有 10 名员工时，这不是什么大问题，但现在我们有 30 多名员工，而母公司希望我们向 100 名员工迈进。

我想让更新自动而不是手动（目前我们更新并要求工作人员手动复制旧文件的新文件）。

我曾想过在 Windows 登录的启动中使用版本控制设置和脚本。这对于文本文件树来说很容易，但对于访问 .mdb 和文档/电子表格？

我们真的不需要版本控制（但它对文本文件树会很好），只是一种只更新已更改文件的方法？那就是在服务器上只保留最新版本的二进制文件，并对文本文件进行版本控制，但最好能控制 .doc 和 xls 文件的版本。访问文件是工具，文本和 .doc/xls 是我们需要和使用的数据。

任何帮助表示赞赏，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:33:46.847

这是我所做的。我有类似数量的 MS Access 应用程序用户 - 到目前为止它运行良好。

1.  我在我的网络上创建了一个 .bat 文件，它基本上是 MS Access 应用程序的更新脚本。此 .bat 文件的快捷方式位于每个用户的桌面上。
2.  我在 MS Access 应用程序中添加了一个常量来指示它是什么版本。
3.  我在配置表中添加了一个条目，指示了预期的数据库版本。

当 MS Access 应用程序连接到它的数据库（这可能是 SQL-Server 或网络上的共享 MDB）时，它启动其主窗体（在 Autoexec 宏中）时做的第一件事就是比较数据库到应用程序部分中的常量。

如果它们不同，则会提示用户运行更新脚本 - 然后从应用程序启动它们。包含一些检查应用程序是否比数据库新或旧的检查是微不足道的。

然后，当我部署一个新版本时，我会增加常量，并将我编译的 MDE 部署到网络上更新脚本所期望的位置。最后，我增加了数据库中的常数——我们开始比赛了。

如果您真的想要，在线记录的方法也可以强制您的用户退出应用程序 - 以防他们没有听从您的指示退出应用程序以进入更新窗口。

# asp.net - 如何重定向除一个文件夹和一页之外的整个asp网站

> ID：10512020
> 
> 赞同：0
> 
> 时间：2012-05-09T07:56:06.740
> 
> 标签：asp.net, iis, web-config

我需要重定向我的整个网站，除了一个文件夹和一页。我正在使用带有 web.config 的 asp.net c# 环境

我想重定向除 www.mydomain.com/account 中的页面和 www.mydomain.com/inloggen.aspx 中的页面之外的所有页面

我可以通过对我的完整站点进行重定向来实现这一点，但这两条路径除外？

还是我必须为我要重定向的每个页面进行单独的重定向。

注意：所有需要重定向的页面都可以重定向到同一个新页面：www.myotherdomain.com

提前致谢

# colors - 理解 Go 标准库中的一些魔法

> ID：10512021
> 
> 赞同：4
> 
> 时间：2012-05-09T07:56:09.507
> 
> 标签：colors, go, bit-manipulation, bitmapdata, rgba

所以我一直在筛选 Go 标准库中的一些代码，试图理解它们的图像和颜色包，但发现了一些我无法理解的代码。来自[http://golang.org/src/pkg/image/color/color.go?s=794:834#L14](http://golang.org/src/pkg/image/color/color.go?s=794:834#L14)

据我了解，它应该将 8 位预 alpha 乘法 RGB 值转换为 16 位值，保存在 32 位变量中，以防止它们在图像算法中相乘时溢出。

我无法理解的是像`r |= r << 8`我理解的那样的行，这相当于`r = r*2^8+r`因为`r << 8`在右侧插入零并且它们与旧的 r 进行或运算。

对于 r=255 的输入，计算结果为 65535=2^16 - 1，这与预期的一样，但对于中间的值没有意义，它们并没有真正映射到更大范围内的比例. 例如，127 get 映射到 32639，而我希望 32767 代表 127。我错过了什么？我认为这与预阿尔法乘法有关......

```
 func (c RGBA) RGBA() (r, g, b, a uint32) {
    r = uint32(c.R)
    r |= r << 8
    g = uint32(c.G)
    g |= g << 8
    b = uint32(c.B)
    b |= b << 8
    a = uint32(c.A)
    a |= a << 8
    return
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T08:03:41.233

不，您所看到的实际上是有道理的。

考虑一个（例如红色）值。它指示像素中的红色量，作为 8 位量，它介于 0 和 255 之间。因此，您可以表示该范围内的所有红色值。

如果您只是将其位移 8 位（或乘以 256）以获得 16 位颜色值，那么您最终会在 0 到 255*256 (65280) 之间的某个位置得到 256 的倍数。

虽然这可以相对较好地放大红色，但它并没有在整个 16 位范围内正确分布。

例如，8 位范围内的 255 表示最大红度。简单地将其乘以 256 并不能得到 16 位尺度上的最大红色量，即 65535。

通过乘以 256*然后*加上原始值（实际上乘以 257），它在 0..65535 范围内正确分布。

这与将个位数整数按比例放大`0..9`到 range相同`0..99`。乘以 10 是一种方法，但更好的方法是乘以 10 并加上原始值（或乘以 11）：

```
n     n*10     n*10+n
-     ----     ------
0        0          0
1       10         11
2       20         22
3       30         33
4       40         44
5       50         55
6       60         66
7       70         77
8       80         88
9       90         99 
```

# version - 使 Quartz.net 与 log4net 1.2.11.0 一起工作

> ID：10512023
> 
> 赞同：2
> 
> 时间：2012-05-09T07:56:23.437
> 
> 标签：version, log4net, quartz.net, common.logging

我将 Quartz.net 用于一个依赖于 Common.Logging 2.0 的项目。问题是，Common.Logging 2.0 仅适用于 log4net 1.2.10.0，我们得到了依赖于 log4net 1.2.11.0 的库。

有人遇到过这个问题吗？我真的找不到很多关于 Common.Logging 2.0 与 log4net 1.2.11.0 的信息。任何想法如何解决它，或者我是 SOL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:02:37.423

尝试进行[程序集重定向](http://msdn.microsoft.com/en-us/library/7wd6ex19%28v=vs.100%29.aspx)。这应该允许您使用版本 1.2.11 并将版本 1.2.10 的所有请求重定向到 1.2.11。

# sql-server - 如何在 SQL Server 中动态设置顺序？

> ID：10512024
> 
> 赞同：1
> 
> 时间：2012-05-09T07:56:27.360
> 
> 标签：sql-server, dynamic, sql-order-by

我想动态设置 order by 子句。我已经尝试过使用`case`.

但是在少数情况下它对我不起作用，我不明白为什么会这样。我尝试了以下链接[http://www.sqlteam.com/article/dynamic-order-by](http://www.sqlteam.com/article/dynamic-order-by)这仅适用于 5-6 种情况，之后我收到转换错误。

```
ORDER BY CASE WHEN @OrderBY = 1 THEN Pla_BattingAverage
          WHEN @OrderBY = 2 THEN Pla_HomeRuns
          WHEN @OrderBY = 3 THEN Pla_RBIs
          WHEN @OrderBY = 4 THEN Pla_StolenBases
          END DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:00:39.227

例如，您不能在 case 表达式的结果中混合字符串和整数。

你可以尝试这样的事情：

```
ORDER BY CASE WHEN @OrderBY = 1 THEN Pla_BattingAverage END DESC,
         CASE WHEN @OrderBY = 2 THEN Pla_HomeRuns END DESC,
         CASE WHEN @OrderBY = 3 THEN Pla_RBIs END DESC,
         CASE WHEN @OrderBY = 4 THEN Pla_StolenBases END DESC 
```

请注意，这会很慢，因为无法使用索引。动态生成查询可以提供更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:18:17.187

[Mark Byers](https://stackoverflow.com/users/61974/mark-byers)提出了一种[解决方案](https://stackoverflow.com/a/10512081/1483)。

您还可以使用函数`ROW_NUMBER()`的结果并按结果排序（每种类型的订单`ROW_NUMBER()`仍然一个）。`ROW_NUMBER()`

另一种是将第一次查询的结果（我假设没有`TOP`子句）保存在临时表中，然后用于`IF`返回结果。

就像是：

```
INSERT INTO #results
SELECT
  a, b, c
FROM
  table
...

IF @OrderBY = 1 THEN
  SELECT * FROM #results ORDER BY Pla_BattingAverage DESC
END

IF @OrderBY = 2 THEN
  SELECT * FROM #results ORDER BY Pla_HomeRuns DESC
END

... 
```

但是，如果性能很重要，我会尝试动态生成查询。

# python - 在 Python 中从文件中读取数据块

> ID：10512026
> 
> 赞同：6
> 
> 时间：2012-05-09T07:56:32.250
> 
> 标签：python, numpy, block

我是 python 新手，正在尝试从文件中读取“块”数据。该文件是这样写的：

```
# Some comment
# 4 cols of data --x,vx,vy,vz
# nsp, nskip =           2          10

#            0   0.0000000

#            1           4
 0.5056E+03  0.8687E-03 -0.1202E-02  0.4652E-02
 0.3776E+03  0.8687E-03  0.1975E-04  0.9741E-03
 0.2496E+03  0.8687E-03  0.7894E-04  0.8334E-03
 0.1216E+03  0.8687E-03  0.1439E-03  0.6816E-03

#            2           4
 0.5056E+03  0.8687E-03 -0.1202E-02  0.4652E-02
 0.3776E+03  0.8687E-03  0.1975E-04  0.9741E-03
 0.2496E+03  0.8687E-03  0.7894E-04  0.8334E-03
 0.1216E+03  0.8687E-03  0.1439E-03  0.6816E-03

#          500  0.99999422

#            1           4
 0.5057E+03  0.7392E-03 -0.6891E-03  0.4700E-02
 0.3777E+03  0.9129E-03  0.2653E-04  0.9641E-03
 0.2497E+03  0.9131E-03  0.7970E-04  0.8173E-03
 0.1217E+03  0.9131E-03  0.1378E-03  0.6586E-03

and so on 
```

现在我希望能够从这些块中指定和读取一个数据块。我`numpy.loadtxt('filename',comments='#')`用来读取数据，但它一次性加载整个文件。我在网上搜索，有人为 numpy io 例程创建了一个补丁来指定读取块，但它不在主流 numpy 中。

在 gnuplot 中选择数据块要容易得多，但我必须编写例程来绘制分布函数。如果我能弄清楚阅读特定的块，那么在 python 中会容易得多。此外，我正在将我所有的可视化代码从 IDL 和 gnuplot 转移到 python，因此将所有内容都放在 python 中而不是将东西分散在多个包中会很好。

我想过从 python 中调用 gnuplot，将一个块绘制到一个表中，并将输出分配给 python 中的某个数组。但我还在开始，我无法弄清楚这样做的语法。

解决这个问题的任何想法，指针都会有很大帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T17:23:57.517

快速基本阅读：

```
>>> def read_blocks(input_file, i, j):
    empty_lines = 0
    blocks = []
    for line in open(input_file):
        # Check for empty/commented lines
        if not line or line.startswith('#'):
            # If 1st one: new block
            if empty_lines == 0:
                blocks.append([])
            empty_lines += 1
        # Non empty line: add line in current(last) block
        else:
            empty_lines = 0
            blocks[-1].append(line)
    return blocks[i:j + 1]

>>> for block in read_blocks(s, 1, 2):
    print '-> block'
    for line in block:
        print line

-> block
 0.5056E+03  0.8687E-03 -0.1202E-02  0.4652E-02
 0.3776E+03  0.8687E-03  0.1975E-04  0.9741E-03
 0.2496E+03  0.8687E-03  0.7894E-04  0.8334E-03
 0.1216E+03  0.8687E-03  0.1439E-03  0.6816E-03
-> block
 0.5057E+03  0.7392E-03 -0.6891E-03  0.4700E-02
 0.3777E+03  0.9129E-03  0.2653E-04  0.9641E-03
 0.2497E+03  0.9131E-03  0.7970E-04  0.8173E-03
 0.1217E+03  0.9131E-03  0.1378E-03  0.6586E-03
>>> 
```

现在我想你可以使用 numpy 来阅读这些行......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:05:03.927

以下代码应该可以帮助您入门。您可能需要 re 模块。

您可以使用以下命令打开文件进行阅读：

```
f = open("file_name_here") 
```

您可以使用一次一行读取文件

```
line = f.readline() 
```

要跳转到以“#”开头的下一行，您可以使用：

```
while not line.startswith("#"):
    line = f.readline() 
```

要解析看起来像“# i j”的行，可以使用以下正则表达式：

```
is_match = re.match("#\s+(\d+)\s+(\d+)",line)
if is_match:
    i = is_match.group(1)
    j = is_match.group(2) 
```

有关这方面的更多信息，请参阅“re”模块的文档。

要解析一个块，您可以使用以下代码：

```
block = [[]] # block[i][j] will contain element i,j in your block
while not line.isspace(): # read until next blank line
    block.append(map(float,line.split(" "))) 
    # splits each line at each space and turns all elements to float
    line = f.readline() 
```

然后，您可以根据需要将块转换为 numpy 数组：

```
block = np.array(block) 
```

前提是您已将 numpy 导入为 np. 如果要读取 i 和 j 之间的多个块，只需将上面读取一个块的代码放入一个函数中并多次使用即可。

希望这可以帮助！

# java - 为父类的可见属性生成委托方法

> ID：10512027
> 
> 赞同：5
> 
> 时间：2012-05-09T07:56:37.790
> 
> 标签：java, eclipse, delegates, code-generation, eclipse-indigo

在 Eclipse 中有方便的命令

```
Source -> Generate Delegate Methods … 
```

不幸的是，这只适用于当前类的属性，不适用于其父类之一的可见属性。

你知道我可以为从父类继承的属性自动创建委托方法的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:40:33.147

在父类中生成它们，然后使用剪切和粘贴将它们移动到正确的位置。

# iphone - 跟踪电子邮件

> ID：10512032
> 
> 赞同：0
> 
> 时间：2012-05-09T07:56:59.703
> 
> 标签：iphone, email, mfmailcomposer

出于技术原因，我不是使用`MFMailComposer`向某些用户发送邮件，而是我自己的网络服务。这样做不会在我的发件箱中留下已发送电子邮件的跟踪。有没有办法以编程方式将我的邮件副本放在发件箱中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:04:36.723

不幸的是，您将无法在“已发送邮件”文件夹中人为地插入某些内容（我假设这就是您的意思，而不是发件箱）。这是因为 MFMailComposer 只是邮件客户端的一个视图，而“已发送邮件”文件夹反映了通过您的电子邮件提供商实际发送的内容。

# android - 替换默认主屏幕 Android

> ID：10512033
> 
> 赞同：0
> 
> 时间：2012-05-09T07:57:03.657
> 
> 标签：android, android-intent, launcher, intentfilter

在我的应用程序中，我实现了我的应用程序是我的平板电脑启动时启动的 Home Activity 之一。
android Manifest 中的代码如下：

```
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.HOME" />
<category android:name="android.intent.category.DEFAULT" /> 
```

我想要实现的结果是用户无法选择要启动的第一个活动应该是矿山活动还是默认家庭活动。
我将永远是我的活动。
为了删除用户选择开始活动的可能性，我必须做另一件事？
提前致谢。
马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:08:41.663

Afaik 你不能这样做，因为这将是一个安全问题。如果您的应用是“普通”应用，则不应该这样做。

也许如果您是 root 或者您的应用程序是系统的，那么您可以更改它（例如通过将您的应用程序设置为 home 操作的默认值），但这会非常非常混乱

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:06:20.977

> 我将永远是我的活动。

欢迎您构建自己的固件，您的固件是唯一的主屏幕。

# java - 重构嵌套切换到对象

> ID：10512040
> 
> 赞同：2
> 
> 时间：2012-05-09T07:57:46.167
> 
> 标签：java, design-patterns, refactoring

我想要一些关于重构以下方法的建议：

```
public boolean makeDecision(String group, int level, int primaryAmount, int secondaryAmount)
{
    if (group.equals("A"))
    {
        switch (level)
        {
            case 0 : return primaryAmount > 10000;break;
            case 1 : return primaryAmount > 20000;break;
            default : return secondaryAmount > 30000; break;
        }
    }
    else if (group.equals("B"))
    {
         switch (level)
         {
              case 0 : return primaryAmount > 40000;break;
              case 1 : return primaryAmount > 50000;break;
              default : return secondaryAmount > 60000; break;
         }

    }
    else if (group.equals("C"))
    {
        switch(level)
        {
            case 0 : return primaryAmount > 70000;break;
            case 1 : return primaryAmount > 80000;break;
            default : return secondaryAmount > 90000; break;
        }

    }
    return false;
} 
```

我想达到的目标：

*   允许代码遵循开放/封闭原则，因为及时会有更多的组/级别。
*   删除“级别”开关语句中的重复项。
*   理想情况下删除“组”顶级 switch 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:59:39.703

由于每种情况都是通过简单的比较来计算的，因此您也可以使用任何一种方式进行所有比较。

所以这里有一个建议：

```
boolean[] aSol = { primary > 10000, primary > 20000, secondary > 30000 };
boolean[] bSol = { primary > 40000, primary > 50000, secondary > 60000 };
boolean[] cSol = { primary > 70000, primary > 80000, secondary > 90000 };

level = Math.min(level, 2);
return group.equals("A") ? aSol[level] :
       group.equals("B") ? bSol[level] :
       group.equals("C") ? cSol[level] :
       false; 
```

我认为它具有相当的可读性和可维护性。

这是另一个稍微不同的公式：

```
boolean[][] result = {
        { primary > 10000, primary > 20000, secondary > 30000 },
        { primary > 40000, primary > 50000, secondary > 60000 },
        { primary > 70000, primary > 80000, secondary > 90000 } };

int groupId = Arrays.asList("A", "B", "C").indexOf(group);

if (groupId == -1)
    return false;

boolean[] groupResult = result[groupId];
return groupResult[Math.min(level, groupResult.length-1)]; 
```

另一种选择是使用方法创建接口

```
makeDecision(int level, int primaryAmount, int secondaryAmount) 
```

然后`Map<String, GroupDecision>`用决策程序填充一个，

```
groupMap.put("A", new GroupDecision() { ... });
groupMap.put("B", new GroupDecision() { ... });
groupMap.put("C", new GroupDecision() { ... }); 
```

然后打电话

```
return groupMap.get(group).makeDecision(level, primaryAmount, secondaryAmount); 
```

这种方法可能是最具扩展性和可读性的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:19:13.130

群体看起来像是有行为的。您可以将字符串组提升为一流类型。您还可以在类上放置方法来表示您拥有的逻辑。我把愚蠢的名字放在变量上，他们可以用更好的名字。

```
public class Group {
    public static Group A = new Group(10000,20000,30000);
    public static Group B = new Group(40000,50000,60000);
    public static Group C = new Group(70000,80000,90000);

    private int primaryMin;
    private int primaryMid;
    private int secondaryMax;

    private Group(int min, int mid, int max) {
        primaryMin = min;
        primaryMid = mid;
        secondaryMax = max;
    }

    public boolean getLevel(int level, int primaryAmount, int secondaryAmount) {
       if (level == 0)
         return primaryAmount > primaryMin;
       else if (level == 1) 
         return primaryAmount > primaryMid;
       else 
         return secondaryAmount > secondaryMax;
    }
} 
```

因此，现在您可以将顶级语句减少到

```
public boolean makeDecision(Group group, int level, int primaryAmount, int secondaryAmount) {
  return group.getLevel(level, primaryAmount, secondaryAmount);
} 
```

您可能希望考虑使用[空对象模式](http://en.wikipedia.org/wiki/Null_Object_pattern)来处理未知组。

如果您说级别会随着时间的推移而增长，那么我会考虑再次做几乎完全相同的操作来引入`Level`该类并将 if/else 链作为另一层 polymorphshim 推入其中。这将成为[双重分派模式](http://en.wikipedia.org/wiki/Double_dispatch)，因为首先您将分派 of 的类型，`Group`然后分派 . 的类型`Level`。这应该意味着您可以添加新代码而无需修改现有代码。

# jquery - 如何在拖动期间修复 jQuery UI 对话框大小？

> ID：10512044
> 
> 赞同：2
> 
> 时间：2012-05-09T07:58:10.707
> 
> 标签：jquery, jquery-ui

这是一个简单的对话框，如下代码所示，只要拖动对话框，它的高度就会降低。当我设置对话框的 resizable = false 时，它​​的高度值甚至发生了变化。最后，我通过在 dragStop 事件处理程序中重新更新对话框高度来修复它。

我发现[这里](http://extremedev.blogspot.com/2011/10/jquery-dialog-height-problem.html)报告了一个类似的问题，但它与 IE 相关，作者建议不要设置高度值，恕我直言并不适合所有用例。

我正在使用 Chrome 和 jQuery UI 1.8.19

```
<p><a id="edit" href="#">Open Editor</a></p>
<div id="editor"></div>

$(document).ready(function ()
    {
        $("#edit").on("click", function ()
        {
                var $dialog = $("#editor")
                .dialog(
                {
                    title: "HTML Editor",
                    modal: true,
                    autoOpen: false,
                    width: 600,
                    height: 350,
                    minWidth: 300,
                    minHeight: 200,
                    closeOnEscape: true,
                    resizable: false,
                    open: function ()
                    {
                    },
                    buttons:
                    {
                        "Save": function ()
                        {
                            $(this).dialog("close");
                        },
                        "Cancel": function ()
                        {
                            $(this).dialog("close");
                        }
                    },
                    dragStop: function (e, ui)
                    {
                        $(this).dialog("option", "height", "377px");
                    }
                });
            }

            $dialog.dialog("open");
            return false;
        });
    }); 
```

更新 1：我刚刚创建了一个新项目（ASP.NET MVC 4），发现当我使用以下 CSS 规则时出现了问题，为什么？

```
*
{
    margin: 0;
    padding: 0;

    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:37:56.160

jQuery 在使用 box-sizing:border-box （使用默认模板）时错误地计算对话框大小。我通过在 open 事件中存储对话框的高度进行了修复，并在 dragStart/dragStop 事件中手动设置了对话框高度：

```
 dragStart: function (e, ui)
                    {
                        $(this).parent().height(height);
                    },
                    dragStop: function (e, ui)
                    {
                        $(this).parent().height(height);
                    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-25T07:39:08.283

我通过使用简单的 css 修复了它：

```
 .ui-dialog {
              height:auto !important;
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T05:23:43.273

jQuery 1.8 终于彻底理解了 box-sizing，我们不再需要调整它了 :)

[文档](http://blog.jquery.com/2012/08/16/jquery-1-8-box-sizing-width-csswidth-and-outerwidth/)

# mysql - 在 SQL 触发器中插入用户 ID

> ID：10512046
> 
> 赞同：2
> 
> 时间：2012-05-09T07:58:26.150
> 
> 标签：mysql, sql, triggers

我一直在网上寻找答案，但大多数人使用编程语言来回答。我目前正在运行一个 MySQL 服务器并且想要跟踪一个`staff`表，当一个工作人员的位置被更新时，触发器应该将值插入到`staff_audit`表中。现在最大的问题是如何访问用户 ID？

到目前为止的代码：

```
CREATE TRIGGER staff_aft_update 
  AFTER UPDATE ON staff 
  FOR EACH ROW 
    INSERT INTO staff_audit 
      ( sau_st_staffno, sau_st_position_before, 
        sau_st_position_after, sau_user_id, ts) 
    VALUES 
      ( old.st_staffno, old.st_position, 
        new.st_position, userid); 
```

那`userid`是我想要插入 ID 的地方。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:50:45.497

如果我理解正确，您想要`userid`执行`UPDATE`? 如果那`userid`是 MySQL 用户名，只需使用`SUBSTRING_INDEX(USER(),'@',1)`; 否则，您将需要`userid`从您的应用程序代码中提供。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T09:39:41.430

以下链接应该可以帮助您找到答案。这给出了 MySQL 中的信息函数列表..

[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html)

实际上，您需要使用信息函数 USER() 需要根据您需要实现的逻辑从应用程序代码中传递用户 ID。

对于您的要求，您确实需要截断从“@”符号开始的所有内容，因为如果您使用的是信息功能，则功能用户的格式是 user@localhost ....希望这会有所帮助

# java - Java中的多线程处理

> ID：10512049
> 
> 赞同：1
> 
> 时间：2012-05-09T07:58:40.183
> 
> 标签：java, multithreading

我只是在解决这个问题时遇到了一些问题。任何帮助将不胜感激。

该程序必须读取一个文本文件，它将计算每个输入数字的除数之和。例如，数字 20 的和为 1+2+4+5+10=22。然后将这些总和逐行相加。然后找到除数之上的这些总和中的每一个，然后最后将它们相加。

例如初始文件 1 2 4 6 15 20

25 50 100 125 250 500

16 8 3

然后计算除数之和。

1 1 3 6 9 22

6 43 117 31 218 592

15 7 1

一行一行总结

42

1007

23

然后计算上述总和。

54

73

1

然后终于凑齐回来了。

128

我需要通过线程池完成每一行来完成该过程。

我的逻辑如下。

```
 5.2\. For each input line (Add each line to an ArrayBlockingQueue, 
Then add each item in the Queue to an ExecutorService Which will run the follow)   

               5.2.1\. Parse the current input line into integers 

               5.2.2\. For each integer in the current input line 

                   5.2.2.1\. Compute the sum-of-divisors of this integer 

                   5.2.2.2\. Add this to the cumulated sum-of-divisors 

               5.2.3\. Compute the sum-of-divisors of this cumulated sum

               5.2.4\. Add this to the grand total 
```

我在 5.2 之后卡住了，我是创建一个实现可运行接口的新类，然后将累积总和添加到 atomicArray，还是最好创建一个实现可调用接口的类，然后让它返回累积总和？还是有完全不同的方式。

到目前为止，这是我所拥有的，它返回了所需的结果，但是是按顺序进行的。

[http://pastebin.com/AyB58fpr](http://pastebin.com/AyB58fpr)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:38:57.520

利用

```
java.util.concurrent.Future 
```

和一个

```
java.util.concurrent.Executors.newFixedThreadPool(int nThreads) 
```

这将很容易做到。

如果您不熟悉 Executors，请遵循[Oracle 教程。](http://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:39:31.867

我更喜欢这个`Callable`接口，因为它不会创建处理输入的代码对如何收集输出的依赖。

通常的方法是将任务收集到一个`Future`s 列表中。有关示例，[请参见此答案。](https://stackoverflow.com/a/1150101/34088)

# c# - CSS、图像、JS 未在 IIS 中加载

> ID：10512053
> 
> 赞同：138
> 
> 时间：2012-05-09T07:58:46.180
> 
> 标签：c#, asp.net-mvc, iis

我的所有应用程序都运行良好，但突然 IIS 下的所有站点都没有加载 css、图像、脚本。它重定向到登录页面。

如果我登录它工作正常。例如 mysite.com/Account/LogOn?ReturnUrl=%2fpublic%2fimages%2ficons%2f41.png

在我的本地计算机上，无需登录即可正常工作。

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2014-02-12T04:45:09.473

问题可能是 IIS 不提供静态内容，您可以在此处进行设置： ![在此处输入图像描述](../Images/211cb667921cbe5a1bdf25c93d009c02.png)

来源：[http ://adilmughal.com/blog/2011/11/iis-7-not-loading-css-and-image/](http://adilmughal.com/blog/2011/11/iis-7-not-loading-css-and-image/)

视窗 10：

[![上述对话框的 windows 10 版本](../Images/4ffce66c4330531fc4c163613ea9cf5a.png)](https://i.stack.imgur.com/WjJaE.png)

* * *

## 回答 #2

> 赞同：197
> 
> 时间：2015-04-02T10:53:40.873

我遇到了同样的问题，当我在 Windows Server 2012 R2 上的 IIS 8.5 中的 ASP.Net 4.5 中安装我的 Web 应用程序时，未经身份验证的页面不会加载 CSS、JS 和图像。

1.  我安装了静态内容角色
2.  我的 Web 应用程序位于 IIS 的 wwwroot 文件夹中，并且所有 Windows 文件夹权限都完好无损（默认权限，包括 IIS_IUSRS）
3.  我为所有包含 CSS、JS 和图像的文件夹添加了授权。
4.  我在 Windows 共享上有 Web 应用程序文件夹，所以我按照@imran-rashid 的建议删除了共享

**然而，似乎没有什么能解决问题。最后我尝试将匿名用户的身份设置为 App Pool Identity 并开始工作。**

![单击身份验证功能](../Images/b4c5025439ad4da88819655cfd318332.png) ![编辑匿名身份验证](../Images/6efdb49a34fb25c58f69a0bb4eca4517.png) ![更改应用程序池标识](../Images/998746ecbb980e1c1284fe480685d3ac.png)

我敲了几个小时的头，希望这个回应能为我的开发者伙伴们省去痛苦。

我真的很想知道为什么这是有效的。有什么想法吗？

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-11-14T13:27:14.507

我有一个类似的错误，我的控制台看起来像这样：

[![错误](../Images/56ea961183c70af407bc9e9b10d3fcae.png)](https://i.stack.imgur.com/fkWcS.png)

我的问题是我在一个子文件夹中运行我的网站，因为该公司使用一个顶级域而没有子域。像这样：

host.com/app1

host.com/app2

我的代码看起来像这样，包含在 localhost 上运行良好但在 app1 或 app2 中运行良好的脚本：

```
<link rel="stylesheet" type="text/css" href="/Content/css/font-awesome.min.css" /> 
```

向 src添加了一个波浪号`~`，然后一切正常：

```
<link rel="stylesheet" type="text/css" href="~/Content/css/font-awesome.min.css" /> 
```

`~`vs的解释`/`：

*   `/`- 网站根
*   `~/`- 应用程序的根目录

`/`将返回站点的根目录 ( `http://host.com/`)，

`~/`将返回应用程序的根 ( `http://host.com/app1/`)。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2016-06-29T13:34:54.943

尝试从您的**web.config中删除****staticContent**部分。

 **```
<system.webServer>
    <staticContent>
        ...
    </staticContent>
</system.webServer> 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-07-30T17:17:01.323

这可能无法回答您的问题，但我一直在用新的 IIS 安装遇到相同的症状。CSS、JS 和图像没有出现。是由于 IIS 7.5 中未安装“静态内容”角色。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-05-09T08:06:14.010

您可能在 web.config 中启用了 Windows 身份验证。在本地计算机上，您的 Windows 凭据会自动传递并且可以正常工作。在实时站点上，您被视为匿名用户（IE 设置可以控制这一点，但除非您真的知道自己在做什么，否则不要修改它）。

这会导致以下情况：

*   您需要显式登录。
*   由于您未通过身份验证，因此不会在登录页面上提供脚本和 CSS 等资源。

这没有被破坏，只是按预期工作，而是“修复”这个：

*   如果您不想登录，请更改 web.config 中的身份验证类型。
*   和/或在包含 CSS、图像、脚本等的目录中添加 web.config，指定授权规则。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-11-28T22:59:47.370

这是Windows权限问题，我移动了它继承错误权限的文件夹。当我移动到 wwwroot 文件夹并向 iis 用户添加权限时，它开始正常工作。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-05-09T08:15:39.433

将此添加到您的 web.config

```
<location path="Images">
    <system.web>
        <authorization>
            <allow users="*" />
        </authorization>
    </system.web>
</location> 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2012-05-09T08:19:51.583

在 web.config 文件的配置部分使用它：

```
<location path="images">
<system.web>
  <authorization>
    <allow users="*"/>
  </authorization>
</system.web>
</location>
<location path="css">
<system.web>
  <authorization>
    <allow users="*"/>
  </authorization>
</system.web>
</location>
<location path="js">
<system.web>
  <authorization>
    <allow users="*"/>
  </authorization>
</system.web>
</location> 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2020-01-12T06:14:13.800

这是一个身份验证问题。就我而言，它通过以下步骤解决： 1- 转到 IIS 管理器，在左侧窗格中，展开服务器根目录并从站点节点中选择您的 Web 应用程序。2- 在主屏幕中，转到 IIS 部分并选择身份验证。3-启用匿名身份验证。4- 然后，选择 Edit 并将 Edit Anonymous Authentication Credentials 设置为 Application pool identity。

[![匿名身份验证凭证](../Images/14dc3119c5a158195963aa3a85df5a75.png)](https://i.stack.imgur.com/ZirjN.png)

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2020-04-09T07:39:39.770

当 IIS 不呈现静态内容（如 JS、CSS、图像文件）时，会出现此问题。

要解决此问题，您需要执行以下步骤：

转到控制面板 > 打开或关闭 Windows 功能 > Internet 信息服务 > 万维网服务 > 通用 HTTP 功能 > 静态内容。

确保打开静态内容。

答对了。你完成了。硬重新加载页面，您将能够看到所有静态内容。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-01-17T15:49:15.750

对我来说添加这个`web.config`解决了问题

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true" >
      <remove name="UrlRoutingModule"/>    
    </modules>
</system.webServer> 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-07-29T22:49:19.197

我一小时的痛苦是由于在 web.config 中定义 MIME 类型。我需要这个用于开发服务器，但本地 IIS 讨厌它，因为它重复了 MIME 类型……一旦我从 web.config 中删除了这些，js、css 和图像未加载的问题就消失了。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-05-07T07:02:24.490

过去，在使用生产站点的副本时，在 localhost 测试环境中开发站点时，我发现一个建议很有帮助。确保注释掉规范标签：

```
 <!--<base href="http://www.example.com/">//--> 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-12-17T11:04:39.703

就我而言，

IIS 可以加载所有内容`localhost`，但无法加载我的模板`app.tag`文件`192.168.0.123`

因为`.tag`扩展名不在列表中。

[![IIS MIME 类型](../Images/be2467be4ce4c327cedf685a669d8f47.png)](https://i.stack.imgur.com/HHmvu.png)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-01-06T14:29:24.073

要解决这个问题：

转到 Internet 信息服务 (IIS)

单击您尝试加载图像的网站

在 IIS 部分下，打开身份验证菜单并启用 Windows 身份验证。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-06-07T17:47:00.193

如果您尝试了以上所有解决方案，仍然有问题，请考虑使用 ASP.NET 的 ResolveClientUrl() 方法。

Example 的脚本：

而不是使用

```
<script src="~/dist/js/app.min.js" ></script> 
```

使用方法

```
<script src="<%= ResolveClientUrl("~/dist/js/app.min.js") %>" ></script> 
```

这是我的解决方案，适用于我正在帮助的朋友！

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-02-01T09:02:07.743

我有同样的问题。对我来说，这是由于在 IIS 的服务器级别将 Cache-Control 标头设置为无缓存、无存储。因此，对于我的应用程序，我必须将以下内容添加到我的 web.config 中：

```
<httpProtocol>
    <customHeaders>
        <remove name="Cache-Control" />
    </customHeaders>
</httpProtocol> 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-03-09T15:55:12.583

造成这种情况的一个可能原因是您的应用程序希望在端口 443（标准 SSL 端口）上运行，而端口 443 已在使用中。我曾多次遇到过这种情况，开发人员试图在 Skype 在他们的计算机上运行时运行我们的应用程序。

令人难以置信的是，Skype 在端口 443 上运行。在我看来，这是一个可怕的设计缺陷。如果您看到您的应用程序试图在 444 而不是 443 上运行，请关闭 Skype，问题就会消失。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-10-31T06:16:37.887

我 `app.UseStaticFiles();`在 Configure 方法的 starup.cs 中添加了这段代码，而不是固定的。

并检查您对此文件夹的权限。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-02-19T17:13:12.750

在我的情况下，当我的 javascript、png 或 css 文件都没有被加载时，我尝试了上面的大部分答案，但似乎没有一个能解决问题。

我终于找到了“**请求过滤器**”，实际上必须添加 .js、.png、.css 作为启用/接受的文件类型。

一旦我做了这个改变，所有文件都被正确地提供了。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-11-21T15:02:58.023

对于图像使用

```
@Url.Content("~/assets/bg4.jpg") 
```

在 Style 上使用这个

```
style="background-image:url(@Url.Content("~/assets/bg4.jpg")) 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-03-26T23:14:21.223

如果您在浏览器控制台中看到 403 错误，请检查您的 MVC 捆绑配置。捆绑包名称不应与项目中的任何现有文件夹名称匹配。

例如。

```
bundles.Add(new StyleBundle("~/Content/css")... 
```

**...如果文件夹结构$(ProjectDir)\Content\css**存在于您的项目中，则会导致 IIS 出现问题，因为它会尝试在现有文件夹中查找不存在的捆绑内容。

相反，只需使用类似的东西：

```
bundles.Add(new StyleBundle("~/Content/cssbundle")... 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-04-20T05:13:31.123

我遇到了完全相同的问题，尝试了所有建议，但一无所获。打扰了我几个小时。原来我的 ISP 由于某些原因阻止了端口 80。

建议：检查您的流量。确保端口 80 在本地（即防火墙）和外部都有效。**

# ssis - 如何压缩 xls 文件并将其发送到 SSIS 中的电子邮件

> ID：10512054
> 
> 赞同：3
> 
> 时间：2012-05-09T07:58:50.523
> 
> 标签：ssis, ssrs-2008

嗨，任何人都可以帮助我有一个每天发送 xls 文件的 ssis 包，但文件太大，因此无法发送。我如何压缩文件并自动化 ssis 以每天发送它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T08:53:59.807

没有本地支持可以做到这一点。最简单的方法是下载一个像[这样为您执行此操作的组件](http://www.cozyroc.com/ssis/zip-task)

或者您可以在脚本任务上编写自己的代码。[在这里](http://www.sqlservercentral.com/articles/Integration+Services+%28SSIS%29/64028/)，您有一个示例来压缩和通过电子邮件发送文件，这正是您所需要的

# linux - 如何测试使用 crontab 部署的脚本

> ID：10512058
> 
> 赞同：0
> 
> 时间：2012-05-09T07:59:11.763
> 
> 标签：linux, shell, cron

我有一个脚本，我需要`01.00 am`每个月每天运行一次。这就是我使用 cron 选项卡所做的事情

```
#housekeeping
0 1 1 * * sh /product/abc/tools/housekeeper.sh -t ABC 
```

如何检查它是否`script`正在运行？我是否必须等到它运行或者是否有一个进程正在为此脚本运行，以便我可以确认它正在运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:33:56.337

测试 crontab 脚本的常用方法遵循以下准则：

1.  将时间模式设置为“从现在开始十分钟”。等十分钟。检查`cron`您的脚本/应用程序的日志文件和日志文件是否有错误。

2.  设置所需的时间模式

这样，您可以确保脚本有效。如果有什么东西坏了，那一定是因为时间模式。

您还应该将脚本的所有输出重定向到日志文件。`cron`将发送一封邮件，其中包含脚本产生的任何输出，但这是很少需要的。

如果您总是将“${timestamp} Started”之类的条目添加到日志中，您可以在闲暇时检查脚本是否按预期工作。

如果你想要两者，那么你必须让你的脚本/应用程序自己编写日志文件（即在 中没有输出重定向`crontab`）并将任何错误打印到`stdout`；这将`cron`发送一封电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:34:04.530

我使用的简单方法是在所需命令之前和之后将某些内容附加到特定文件，例如

`*/2 * * * * (echo "Starting" >> ~/monitorCron.log; <Actual operation>; echo "End" >> ~/monitorCron.log;) > ~/cron.log 2>&1`

这每 2 分钟运行一次，并将字符串附加到`~/monitorCron.log`.

这与我在编程中所做的事情是一样的，无论何时何地我都会有疑问时编写打印语句。

# .htaccess - 尽管从 htaccess 中的条目拒绝访问

> ID：10512060
> 
> 赞同：0
> 
> 时间：2012-05-09T07:59:25.160
> 
> 标签：.htaccess

我使用 htaccess 阻止了一个 IP：

```
order allow,deny
deny from dynamicip-176-212-139-222.pppoe.barnaul.ertelecom.ru
allow from all 
```

但似乎 IP 仍然可以访问，因为我的访问日志文件仍然显示该 IP 的许多条目，代码为 200。

对于其他 IP，它工作得非常好（在 htaccess 中有大约 700 个拒绝条目）。

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:05:46.237

`dynamicip-176-212-139-222.pppoe.barnaul.ertelecom.ru.`不解决任何问题：

```
;; QUESTION SECTION:
;dynamicip-176-212-139-222.pppoe.barnaul.ertelecom.ru. IN A

;; AUTHORITY SECTION:
barnaul.ertelecom.ru.   3595    IN      SOA     ns6.ertelecom.ru. noc.ertelecom.ru. 2012042601 86400 1800 604800 86400 
```

您可以简单地添加 IP 地址而不是域名：

```
deny from 176.212.139.222 
```

# java - Java 小程序在 .php 文件中显示一个白色方块

> ID：10512062
> 
> 赞同：0
> 
> 时间：2012-05-09T07:59:27.423
> 
> 标签：java, php, applet

我使用 Netbeans 为我的网站开发了一个 Java 小程序。但是，虽然我可以让它在 .html 文件上工作，但在 .php 文件中这样的事情不起作用......

我正在使用 Wamp 服务器。

这是某事之间的常规冲突，还是我的代码中的问题？它看起来像这样：

```
<applet codebase="modules/progresso/applet/build/classes" code="progression/Progression.class" width=350 height=200></applet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:10:51.667

我认为您正面临绝对和相对 URL 的问题。

可能您的 PHP 位于不同的位置，浏览器会尝试`modules/progresso/applet/build/classes`从那里获取。

尝试使用绝对 URL ( `/modules/progresso/applet/build/classes`)

# java - Tomcat Web 应用程序中的单例和类加载器

> ID：10512066
> 
> 赞同：3
> 
> 时间：2012-05-09T07:59:39.890
> 
> 标签：java, mysql, tomcat, classloader

我在网上做了很多研究，但似乎无法找到我的问题的明确答案，这就是为什么我求助于这个网站上的专家。

使用 java 和 Tomcat 开发时，我有一个 Singleton 类来处理我的数据库连接。所以问题是当不同的用户连接到我的 web 应用程序，并且我的服务器端 java 代码执行时，它是否有自己的单例类？

例如：
用户 A 登录到我的站点。创建了我的单例实例。
用户 B 登录到我的站点，在 Java 代码的两次执行之间是否存在相同的对象（单例）？还是用户 A 和用户 B 的每次执行都得到不同的单例？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T08:37:14.213

存储在静态字段中的单例对于每个类加载器都是唯一的。因此，您的 web 应用程序在 tomcat 实例上的所有用户都将使用相同的单例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:33:42.157

单例是指每个 JVM 的单个实例（准确地说是每个类加载器）。Tomcat 没有每个用户单独的环境。相反，它为每个 Web 应用程序提供了单独的类加载器（因此也是单独的环境）。因此，无论连接了多少用户，服务器端都是一个环境，并且该环境具有您的单例类的单个实例，该实例由该环境中加载的所有类共享。

# jquery - 自定义 jquery 选项卡

> ID：10512068
> 
> 赞同：0
> 
> 时间：2012-05-09T07:59:44.693
> 
> 标签：jquery, jquery-ui, jquery-tabs

我想自定义 jQuery 默认选项卡。我在导航栏中添加了“**添加选项卡”按钮。**

我想在该按钮之前添加较新的选项卡：我该怎么做？

HTML：

```
<!DOCTYPE html>
<html>
<head>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

  <script>
  $(document).ready(function() {
    $("#tabs").tabs();
  });
  </script>
</head>
<body style="font-size:62.5%;">

<div id="tabs">
    <ul>
        <li><a href="#fragment-1"><span>One</span></a></li>
        <li><a href="#fragment-2"><span>Two</span></a></li>
        <li><input type='button' id='addTab' value='Add Tab'></li>
    </ul>

    <div id="fragment-1">
        <p>First tab is active by default:</p>
        <pre><code>$('#example').tabs();</code></pre>
    </div>
    <div id="fragment-2">
        Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.
    </div>
</div>

    <input type='button' id='removeTab' value='RemoveTab'>
</body>
</html> 
```

JS：

```
$('#addTab').live('click', function() {
    $("#tabs").tabs("add", "http://google.com", "A newTab", [2])
});
$('#removeTab').live('click', function() {
    $("#tabs").tabs("remove", "http://google.com", "A newTab", [2])
});​ 
```

​jsFiddle：http: [//jsfiddle.net/6VrwD/14/](http://jsfiddle.net/6VrwD/14/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:12:11.437

我有同样的问题。我找到了一种避免它的棘手方法。我不确定它是否适用于所有浏览器环境，但如果您喜欢，请尝试以下方式：

`<li>`首先，为放置“添加选项卡”按钮的最后一个标签指定一个类名。

```
<ul id="mytabs">
    <li><a href="#fragment-1"><span>One</span></a></li>
    <li><a href="#fragment-2"><span>Two</span></a></li>
    <li class='list_btn'><input type='button' id='addTab' value='Add Tab'></li>
</ul> 
```

接下来，在点击功能中，只需在最后一个位置添加一个标签。并且在最后一个位置添加新标签后，可以切换最后一个标签的顺序和“添加标签”按钮。

```
$('#addTab').live('click', function() {
    // add a tab to the last position.
    $("#tabs").tabs("add", "http://google.com", "A newTab");

    // switch the order of the last tab and the "Add Tab" button.
    $(".list_btn").clone().appendTo("#mytabs");
    $(".list_btn:first").remove();
}); 
```

You will be able to rewrite the code more sophisticated way, especially at the last part where switching the order of the tabs. Thank you.

# ruby-on-rails - 无法使用everyize在ruby中运行cronjob

> ID：10512075
> 
> 赞同：2
> 
> 时间：2012-05-09T08:00:12.910
> 
> 标签：ruby-on-rails, cron

我已经按照这个链接[https://github.com/javan/whenever](https://github.com/javan/whenever)但我试图在开发模式下运行 cronjob 它不起作用。我想知道以下几行：

```
every 3.hours do
  runner "MyModel.some_process"       
  rake "my:rake:task"                 
  command "/usr/bin/my_great_command"
end 
```

是什么`MyModel.some_process`？

如果我想运行我这样写的 ruby​​ 文件

```
every 1.minute do
  runner "cronjob.rb",:environment => "development"
end 
```

...这是正确的方法还是我必须指定`cronjob.rb`文件的路径，例如：

```
runner "app/controllers/cronjob.rb" 
```

我在哪里可以看到 rake 和 command 的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:21:05.537

在此处查看有关跑步者的更多信息[http://guides.rubyonrails.org/command_line.html#rails-runner](http://guides.rubyonrails.org/command_line.html#rails-runner)。

根据它，它在应用程序的上下文中运行 Ruby 代码。或者可以说你可以为模型执行一些方法（每当文档试图显示时）。这在 Rails-2 中会略有不同。此外，如果您看到默认 job_types 的任何文档，例如对于 job_type runner，它会执行以下操作 -

```
"cd :path && script/rails runner -e :environment ':task' :output" 
```

因此，当您执行此操作时`runner "MyModel.some_process"`，`schedule.rb`它会转到应用程序路径并执行`script/rails runner -e <development specified by you> MyModel.some_process`，简而言之，它会执行`MyModel.some_process`。希望这可以帮助！

# javascript - 如何在每个 ajax 请求上调用特定函数

> ID：10512078
> 
> 赞同：5
> 
> 时间：2012-05-09T08:00:26.910
> 
> 标签：javascript, html, ajax, jquery

我有一个问题，我的项目中有几个页面，并且在我的项目中使用了很多 ajax 请求，但是现在我认为每当调用 ajax 请求时都会调用一个函数，并且每当该请求结束时会调用另一个函数。我怎样才能在全球范围内做到这一点我知道我可以把它放在每个 ajax 请求中，但我需要一个解决方案，我在一个地方做，它适用于整个项目。

```
$(document).read(function(){
 // Suppose this document load function is written on layout page and every page is  inherited from this page
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T08:11:32.120

使用[ajaxSetup](http://api.jquery.com/jQuery.ajaxSetup/)，例如

```
$.ajaxSetup({
    beforeSend: function() {
        console.log('test');
    },
    complete: function() {
        console.log('completed');
    }
}); 
```

**将为每个**ajax 请求设置`beforeSend`处理程序。请注意，可以采取任何可以的选项。**`ajaxSetup``$.ajax`**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T08:07:06.333

您应该为您的 ajax 创建一个包装函数，然后使用该函数。这样，您就可以“集中”控制 ajax 调用。就像是：

```
//fast and crude way to extend jQuery
$.fn.customAjax = function(params){

    //contains defaults and predefined functions
    var defaults = {
        complete : function(){...default complete hander...},
        beforeSend : function (){...default beforeSend handler}
        ...
    }

    //merge settings
    var finalParams = $.extend({},defaults,params);

    //call ajax and return the deferred
    return $.ajax(finalParams);
}

//use it like
$.customAjax({
   url : ...,
   method : ...,
   data: ...,
   complete : function(){...} //redefining in the call will override the defaults
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T08:07:22.650

.ajaxStart

注册第一个 Ajax 请求开始时要调用的处理程序。

.ajax成功

附加一个在 Ajax 请求成功完成时执行的函数。

详细文档： [http ://api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T08:05:13.357

尝试这样的事情：

```
$.ajax({
  url: "test.html",
  context: document.body
}).done(function() { 
   $.ajax({
     url: "anotherMethod.html",
     context: document.body
   });
});
}); 
```

这意味着每当 ajax 调用成功完成时，就会调用您想要的调用。**

# c++ - 与 nsRunnable 链接时对 typeinfo 的未定义引用

> ID：10512079
> 
> 赞同：1
> 
> 时间：2012-05-09T08:00:33.020
> 
> 标签：c++, gecko

由于 firefox 12 sdk 删除了“代理”对象，我想通过 nsRunnable使用[跨线程调用。](https://developer.mozilla.org/en/XPCOM/Making_cross-thread_calls_using_runnables)我基本上做了代码的复制和粘贴：

```
class NotifyTask : public nsRunnable
{
public:
  NotifyTask(nsISupports *subject, const char *topic, bool remref)
    : mWorkerThread(do_GetCurrentThread())
  {
    MOZ_ASSERT(!NS_IsMainThread()); // This should be running on the worker thread
  }

  NS_IMETHOD Run() {
    MOZ_ASSERT(NS_IsMainThread()); // This method is supposed to run on the main thread!

    mWorkerThread->Shutdown();
    return NS_OK;
  }

private:
  nsCOMPtr<nsIThread> mWorkerThread;
}; 
```

我试图编译它。我收到以下错误：

```
g++ -std=gnu++0x -Wall -O2 -c  -DUSE_LIBUSB -fPIC -DHAVE_CRYPTO -fpermissive -DCRYPTPP -fshort-wchar -I../../xulrunner-sdk/include -o gipsy.o gipsy.cpp
gipsy.cpp:74:7: warning: ‘NotifyTask’ declared with greater visibility than the type of its field ‘NotifyTask::<anonymous>’ [-Wattributes]
gipsy.cpp:74:7: warning: ‘NotifyTask’ declared with greater visibility than its base ‘nsRunnable’ [-Wattributes]
g++ -std=gnu++0x -Wl,-z,defs -Wall -Os -o gipsy.so -shared gipsy.o gipsymodule.o tracklog.o gpslib/data.o gpslib/garmin.o gpslib/gps.o gpslib/phys.o gpslib/igc.o gpslib/aircotec.o cp1250.o prefparser.o gpslib/foreignigc.o gpslib/mlr.o gpslib/flymaster.o gpslib/compeo.o gpslib/iq.o ../libs/libcryptopp.a -lusb -L../../xulrunner-sdk/lib -lxpcomglue_s -lxul -lxpcom -lplds4 -lplc4 -lnspr4 -lpthread -ldl -lmozalloc
gipsy.o:(.data.rel.ro._ZTI10NotifyTask[typeinfo for NotifyTask]+0x10): undefined reference to `typeinfo for nsRunnable'
collect2: ld returned 1 exit status 
```

根据[g++ undefined reference to typeinfo](https://stackoverflow.com/questions/307352/g-undefined-reference-to-typeinfo)，可能是 gecko sdk 是使用 -fvisibility=hidden 和一些奇怪的“不同 .so 中的关键方法”构建的。这是 Gecko sdk 中的错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:28:54.343

gecko SDK 没有与 RTTI 链接 - 将“-fno-rtti”参数添加到特定的 .o 文件修复了问题。

# vb.net - 未填充组合框

> ID：10512086
> 
> 赞同：0
> 
> 时间：2012-05-09T08:01:06.693
> 
> 标签：vb.net, winforms

我有一个带有主窗体的 Windows 窗体项目。有一个文本框离开事件会打开一个新表单。在那个新的表单加载事件中，我有一个组合框项循环来填充组合框项。如果在主窗体上运行，它工作得很好，但在第二个窗体上不起作用。当通过主窗体中的 textbox_leave 事件打开该窗体时，为什么辅助窗体上的组合框不填充？这是请假活动

```
 Private Sub tbChartTitle_Leave(sender As Object, e As System.EventArgs) Handles tbChartTitle.Leave
    If Not tbChartTitle.Text = Nothing Then
        frmTitleAttributes.Show()
    End If
End Sub 
```

这是填充第二个表单上的组合框之一的代码（如果在主表单上的组合框上运行，它可以工作）

```
 Private Sub frmTitleAttributes_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    InitializeComponent()
    AddFonts()
End Sub
Private Sub AddFonts()
    ' Get the installed fonts collection.
    Dim allFonts As New Drawing.Text.InstalledFontCollection
    ' Get an array of the system's font familiies.
    Dim fontFamilies() As FontFamily = allFonts.Families

    ' Display the font families.
    For i As Integer = 0 To fontFamilies.Length - 1
        cbxTitleFonts.Items.Add(fontFamilies(i).Name)
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:06:49.410

确保`Load`在显示表单后点击处理程序（使用断点）

你也可以尝试在`Shown`事件中调用它

```
Private Sub frmTitleAttributes_Shown(sender as Object, e as EventArgs) _ 
     Handles frmTitleAttributes.Shown

   AddFonts()

End Sub 
```

# javascript - JavaScript 闭包和 this 对象

> ID：10512087
> 
> 赞同：5
> 
> 时间：2012-05-09T08:01:07.577
> 
> 标签：javascript, object, closures, this

我以为我对`this`JavaScript 中的对象有一个合理的理解。在处理对象、回调以及事件和处理程序时，自古以来我就没有遇到过问题。然而现在，一切都变了。

我已经完全爱上了 JavaScript。纯 JS，即不是 jQuery、prototype.js、dojo……所以自然而然地，我开始使用闭包。不过，在某些情况下，这`this`让我措手不及。以这个片段为例：

```
function anyFunc(par)
{
    //console.log(par);
    console.log(this);
}

function makeClosure(func)
{
    return function(par)
    {
        return func(par);
    }
}
var close = makeClosure(anyFunc);
close('Foo');

var objWithClosure = {cls:makeClosure(anyFunc),prop:'foobar'};
objWithClosure.cls(objWithClosure.prop);

var scndObj = {prop:'Foobar2'};
scndObj.cls = makeClosure;
scndObj.cls = scndObj.cls(anyFunc);
scndObj.cls(scndObj.prop); 
```

在所有三种情况下，都`this`将日志记录为窗口对象。当然，这很容易解决：

```
function makeClosure(func)
{
    return function(par)
    {
        return func.call(this,par);
    }
} 
```

*这个修复有效，我把它放在这里是为了避免人们回答这个问题，没有解释我需要知道的：为什么它的行为方式在这里？*

确保调用者实际上是闭包所属的对象。我不明白的是：果然，`this`在第一种情况下指向窗口对象，但在其他情况下，它不应该。`this`我在返回之前尝试登录makeClosure 函数，它确实记录了对象本身，而不是`window`对象。但是当实际使用闭包时，`this`又是回到指向窗口对象。为什么？

我唯一能想到的是，通过将`anyFunc`函数作为参数传递，我实际上是在传递`window.anyFunc`. 所以我尝试了这个快速修复：

```
function makeClosure(func)
{
    var theFunc = func;
    return function(par)
    {
        theFunc(par);
    }
} 
```

有了预期的结果，`this`现在指向对象，但又一次：为什么？我有一些想法（`theFunc`是对本地范围内的函数的引用 [ `this > private: theFunc`]？），但我敢肯定这里有人对 JS 有更多的专业知识，所以我希望得到一些更多解释或链接到值得阅读的文章...

谢谢

**更新**

[这是一个小提琴](http://jsfiddle.net/3chdp/)，可能是我遗漏了一些东西，但是这里记录了各种各样的东西；）

**编辑/更新 2**

[让我困惑的案例](http://jsfiddle.net/7Skbc/1/)就在这里。

**最终编辑**

好的，这是一个相当混乱的帖子。所以澄清一下：我所期待的是与此类似的行为：

```
function makeClosure()
{
    function fromThisFunc()
    {
        console.log(this);
    }
    return fromThisFunc;
}

var windowContext = makeClosure();
windowContext();
var objectContext = {cls:makeClosure()};
objectContext.cls(); 
```

引起我注意的是该函数`anyFunc`没有在正确的范围内声明，因此`this`指向了窗口对象。我通过阅读我在网上某处找到的[古代卷轴发现了这一点。](http://jibbering.com/faq/notes/closures/#clEncap)

> 但是发生了一些更复杂的事情，因为现在由 globalVar 引用的函数对象是使用 [[scope]] 属性创建的，该属性引用了一个范围链，该范围链包含属于创建它的执行上下文的 Activation/Variable 对象（并且全局对象）。现在 Activation/Variable 对象也不能被垃圾回收，因为 globalVar 引用的函数对象的执行需要将整个作用域链从其 [[scope]] 属性添加到为每次调用创建的执行上下文的作用域中它。

所以我需要做的是简化而不是复杂化：

```
function fromThisFunc()
{
    console.log(this);
}

function makeClosure(funcRef)
{
    //some code here
    return funcRef;
} 
```

那应该有效，对吧？

PS：我会排除 Alnitak 的回答，但特别感谢 Felix Kling 提供的所有耐心和信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T08:07:02.740

只要你打电话：

```
return func(par); 
```

您正在创建一个新范围（具有自己的`this`），在这种情况下，因为您没有指定对象，`this === window`通常或在严格模式下*未定义。*被调用的函数**不会**继承`this`调用范围内的任何内容。

为此设置值的方法*是*：

```
myobj.func(par);  // this === myobj 
```

或者

```
func.call(myobj, ...)  // this === myobj 
```

还有：

*   [*申请*](http://www.ecma-international.org/ecma-262/6.0/index.html#sec-function.prototype.apply)
*   [*绑定*](http://www.ecma-international.org/ecma-262/6.0/index.html#sec-function.prototype.bind)
*   [*箭头函数*](http://www.ecma-international.org/ecma-262/6.0/index.html#sec-arrow-function-definitions)，这里*设置*为与外部执行上下文相同的值（另见[*MDN：箭头函数*](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:19:59.120

的值`this`仅取决于您将函数作为方法调用还是作为函数调用。

如果将其作为方法调用，`this`将是该方法所属的对象：

```
obj.myFunction(); 
```

如果您将其作为函数调用，`this`则将是`window`对象：

```
myFunction(); 
```

请注意，即使你在一个属于某个对象的方法中，你仍然必须使用方法语法调用该对象中的其他方法，否则它们将被作为函数调用：

```
this.myOtherFunction(); 
```

如果你把一个方法引用放在一个变量中，你会把它从对象中分离出来，它会作为一个函数被调用：

```
var f = obj.myFunction;
f(); 
```

[`call`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)and方法用于将[`apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)函数作为方法调用，即使它不是对象中的方法（或者如果它是不同对象中的方法）：

```
myFunction.call(obj); 
```

# jpa - JPA 分离实体在合并期间作为托管实体的一部分

> ID：10512088
> 
> 赞同：1
> 
> 时间：2012-05-09T08:01:14.337
> 
> 标签：jpa, ejb-3.1

我有一些简单的实体 bean（EJB 3.1、Glassfish、EclipseLink）的应用程序内缓存，因此我不必每次都使用 findById 在数据库中查找它们，因为应用程序需要快速。这些实体 bean 是只读的。

因此，例如实体 bean Country 或 Currency 位于本地缓存中。

Java EE 应用程序中的某些进程希望更新复杂的实体 bean（即客户），它使用上面的简单 bean（国家、货币...）。

然后发生的情况是，由于简单实体 bean 与 JPA 上下文的连接丢失，当在 Customer bean 上尝试 .merge() 时，JPA 希望将简单实体 bean 作为新记录保存在数据库中，尽管这些记录存在数据库中已经 100%，所以我猜这是一个“分离实体”问题。

例子。

```
Country country = getFromCacheByName("GB"); // detached entity, but exists in database
Customer customer = getCustomerFromJPA(); // existing JPA attached entity
customer.setCountry(country);
EntityManager.merge(customer); // pseudo code 
```

如何修复最后一行或 bean (Customer) 本身，以便它不会尝试将依赖对象 (Country) 保存在 .merge() 上？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:51:32.467

在将其设置在客户中之前，您应该在国家/地区执行 find() 或 merge()。此外，请确保它具有正确的 ID。

Merge on Customer 也应该可以工作，如果它的 Id 存在，它会尝试插入国家，这很奇怪，但这可能取决于您如何配置事物。您是否正在对国家关系进行级联合并？

请注意，EclipseLink 有自己的缓存。因此，您的应用程序缓存可能不需要。

# xcode - ld：找不到 -lFlurryWithLocation 的库

> ID：10512090
> 
> 赞同：0
> 
> 时间：2012-05-09T08:01:18.500
> 
> 标签：xcode, clang, mach-o

我刚刚从 SVN 签出了一个旧项目以进行我的工作，当我尝试构建它时，我遇到了 6 个错误。我无法解决其中的 2 个问题。所以第一个是关于 Flurry 库的。

这是错误：“我替换了应用程序购买APPNAME的名称”

```
Ld /Users/MYNAME/Library/Developer/Xcode/DerivedData/APPNAME-ewdtviqnemaxivekjlajlxqanwvm/Build/Products/Debug-iphonesimulator/APPNAME.app/APPNAME normal i386
    cd "/Users/MYNAME/Documents/Projects/APPFOLDER/APPNAME"
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/MYNAME/Library/Developer/Xcode/DerivedData/APPNAME-ewdtviqnemaxivekjlajlxqanwvm/Build/Products/Debug-iphonesimulator -F/Users/MYNAME/Library/Developer/Xcode/DerivedData/APPNAME-ewdtviqnemaxivekjlajlxqanwvm/Build/Products/Debug-iphonesimulator -F/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/Applications/Xcode.app/Contents/Developer/Library/Frameworks -filelist /Users/MYNAME/Library/Developer/Xcode/DerivedData/APPNAME-ewdtviqnemaxivekjlajlxqanwvm/Build/Intermediates/APPNAME.build/Debug-iphonesimulator/APPNAME.build/Objects-normal/i386/APPNAME.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=30100 -framework Foundation -framework UIKit -framework CoreGraphics -lsqlite3.0 -framework AddressBook -framework AddressBookUI -framework CoreLocation -framework SystemConfiguration -framework QuartzCore -framework MessageUI -lFlurryWithLocation -o /Users/MYNAME/Library/Developer/Xcode/DerivedData/APPNAME-ewdtviqnemaxivekjlajlxqanwvm/Build/Products/Debug-iphonesimulator/APPNAME.app/APPNAME

ld: warning: directory not found for option '-F/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/Applications/Xcode.app/Contents/Developer/Library/Frameworks'
ld: library not found for -lFlurryWithLocation
clang: error: linker command failed with exit code 1 (use -v to see invocation)

I tried to find a solution anywhere on the web but I don't...
Then, the next error is : 
GenerateDSYMFile /Users/MYNAME/Library/Developer/Xcode/DerivedData/APPNAME-ewdtviqnemaxivekjlajlxqanwvm/Build/Products/Debug-iphonesimulator/APPNAME.app.dSYM /Users/MYNAME/Library/Developer/Xcode/DerivedData/APPNAME-ewdtviqnemaxivekjlajlxqanwvm/Build/Products/Debug-iphonesimulator/APPNAME.app/APPNAME
    cd "/Users/MYNAME/Documents/Projects/APPFOLDER/APPNAME"
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/dsymutil /Users/MYNAME/Library/Developer/Xcode/DerivedData/APPNAME-ewdtviqnemaxivekjlajlxqanwvm/Build/Products/Debug-iphonesimulator/APPNAME.app/APPNAME -o /Users/MYNAME/Library/Developer/Xcode/DerivedData/APPNAME-ewdtviqnemaxivekjlajlxqanwvm/Build/Products/Debug-iphonesimulator/APPNAME.app.dSYM

error: unable to open executable '/Users/MYNAME/Library/Developer/Xcode/DerivedData/APPNAME-ewdtviqnemaxivekjlajlxqanwvm/Build/Products/Debug-iphonesimulator/APPNAME.app/APPNAME' 
```

有人可以帮我吗..？我没有更多的想法。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:14:16.683

除非 SVN 专门包含 libflurryanalytics.a 库（它可能没有，因为 svn 将 .a 文件视为二进制文件并忽略它们）。

从他们的网站下载并包含 libFlurryAnalytics.a 并将其包含在您的目标中。[http://www.flurry.com/product/analytics/index.html](http://www.flurry.com/product/analytics/index.html)

然后，您可以使用以下方法将文件添加到 SVN：

```
svn add "libFlurryAnalytics.a" --no-ignore 
```

# c# - 在具有相同基类的两个数据类型之间创建扩展方法检查值

> ID：10512092
> 
> 赞同：2
> 
> 时间：2012-05-09T08:01:29.283
> 
> 标签：c#, extension-methods

我有一个变量，其值在运行时填充。我想使用扩展方法检查该值是否介于两个不同的数据类型值（例如最低和最高）之间。

这两个值（最低和最高）可以是相同的数据类型（没问题）。然后就像

```
public static bool Between<T>(this T actual, T lower, T upper) 
    where T : IComparable<T>
{
    return actual.CompareTo(lower) >= 0 && actual.CompareTo(upper) <= 0;
} 
```

礼貌我之前提出的问题[如何创建之间的扩展方法](https://stackoverflow.com/questions/10511034/how-to-create-a-between-extension-method)

但是，如果它们具有不同的数据类型但具有相同的基类怎么办。

说

我想检查一下

```
byte a = 2; //here static but is can be changed at runtime

if(a.Between(0,8.0))
   DoSomething();
else
   DoNothing(); 
```

在上面的代码片段中，我正在检查 int 值和 double 值之间的字节值。这种情况下怎么办。我想创建一个扩展方法，例如

```
public static bool Between<T1, T2, T3>(this T1 actual, T2 lowest, T3 highest) 
     where T1: ???? 
     where T2: ????
     where T3: ????
{
     What code to write here???? 
} 
```

对于上面的片段，我的 EM 应该返回`true`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:36:32.017

刚试了一下，我得到的最接近的是：

```
public static bool Between<T1, T2, T3>(this T1 actual, T2 lowest, T3 highest) 
     where T1: IComparable 
     where T2: IConvertible
     where T3: IConvertible
{
     return actual.CompareTo(lowest.ToType(typeof(T1), null)) >= 0 && 
            actual.CompareTo(highest.ToType(typeof(T1), null)) <= 0;
} 
```

这会将`T2`and转换`T3`为`T1`，然后将它们进行比较。如果`lowest`or`highest`类型的转换`T1`失败，你会得到一个异常（例如 if `T1`is `byte`and `lower`or `highest`are greater than `255`）。因此，您可能需要检查`T1`，并在需要时转换`actual`为更大的数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:06:16.587

如果您对数字类型（它们是 CLR 中的一等公民）进行操作，那么您自然不能将合同/接口应用于它们。我想到的是将所有这些都带入更大的通用数字类型并在之后进行比较，例如（*伪代码*）：

```
public static bool Between(this byte actual, decimal lowest)   
{
    ...
} 
```

并在使用后像：

```
if(a.Between(0,(decimal)8.0)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T08:06:32.693

```
public static bool Between<T1, T2, T3>(this T1 actual, T2 lowest, T3 highest) 
 where T1: T,  IComparable<T> 
 where T2: T
 where T3: T>
{
 return actual.CompareTo(lower) >= 0 && actual.CompareTo(upper) <= 0;
} 
```

仅在 T1 上需要 IComparable，因为只有实际（T1 的实例）正在调用 CompareTo。

检查基类约束：-> [http://msdn.microsoft.com/en-us/library/d5x73970.aspx](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T08:09:03.840

IComparable 要求被比较的对象与`Type`被比较对象相同。因此，您将需要与和相同。`Type``Type``Type``actual``lowest``highest`

这意味着做这样的事情：

```
byte a = 2;
decimal toCompare = (decimal)a;

if(toCompare.Between(0.0, 8.0))
{
   DoSomething();
}
else
{
   DoNothing();
} 
```

如果您尝试跨类型进行比较，您将在运行时遇到异常。

```
Console.WriteLine(1.CompareTo(2.0)); 
```

将导致抛出异常并显示消息“对象必须是 Int32 类型。”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T08:14:16.067

不是那么优雅，但我会做一个具体的数字比较方法

```
 public static bool BetweenNumeric<T1, T2, T3>(this T1 actual, T2 lowest, T3 highest)
            where T1 : IConvertible
            where T2 : IConvertible
            where T3 : IConvertible
        {
            try
            {
                var actualDouble = Convert.ToDouble(actual);
                var lowestDouble = Convert.ToDouble(lowest);
                var highestDouble = Convert.ToDouble(highest);
                return (actualDouble).CompareTo(lowestDouble) >= 0 && actualDouble.CompareTo(highestDouble) <= 0;
            }
            catch
            {
                return false;
            }
        } 
```

顺便说一下，如果其中一个类型是布尔值，例如，它将被转换为 1.0... 而不是被捕获。

不完美，但你会避免大量的“类型检查”。

# eclipse - 在 Eclipse 中以编程方式选择工作集

> ID：10512093
> 
> 赞同：3
> 
> 时间：2012-05-09T08:01:35.003
> 
> 标签：eclipse, working-set

我想实现以编程方式选择工作集的功能。我尝试使用以下代码：

```
IWorkingSetManager wsMgr = PlatformUI.getWorkbench().getWorkingSetManager();
IWorkingSet ws = wsMgr.getWorkingSet("custom");

IWorkbenchPage page = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();
IWorkingSet[] windowset = new IWorkingSet[]{ws};
page.setWorkingSets(windowset); 
```

但是上面的代码不起作用，Project Explorer 没有显示工作集。

为什么上面的代码不起作用，上面的解决方案是什么？

为了使用工作集更新 ProjectExplorer 视图，我尝试了以下代码

```
IWorkingSetManager wsMgr = PlatformUI.getWorkbench().getWorkingSetManager();
IWorkingSet ws = wsMgr.getWorkingSet("custom"); 
```

ProjectExplorer pView = (ProjectExplorer)page.findView(IPageLayout.ID_PROJECT_EXPLORER); pView.getCommonViewer().setInput(ws);

上面的代码在 ProjectExplorer 中显示了工作集的内容，但这不是持久化的。我的意思是一旦 Eclipse 重新启动，而不是工作集，所有项目都会显示出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-28T14:01:32.117

这是我创建的一个示例处理程序，它可以在项目资源管理器中以编程方式设置工作集，如果尚未打开顶级工作集，则打开它：

```
public Object execute(ExecutionEvent event) throws ExecutionException {
    IWorkbenchWindow workbenchWindow = HandlerUtil
            .getActiveWorkbenchWindowChecked(event);
    IWorkbenchPage page = workbenchWindow.getActivePage();
    IWorkingSetManager manager = workbenchWindow.getWorkbench()
            .getWorkingSetManager();
    ProjectExplorer projExplorer = (ProjectExplorer) page
            .findView(IPageLayout.ID_PROJECT_EXPLORER);

    // This is just a test, to ensure we got hold on the correct object for
    // Project Explorer.
    // The project explorer will get focus now.
    projExplorer.setFocus();

    // Obtain list of all existing working sets.
    // This assumes that the debug workspace used have some working sets
    // prepared.
    IWorkingSet[] allExistingSets = manager.getWorkingSets();
    IWorkingSet workingSet = null;

    // The prints information about all working sets.
    for (IWorkingSet myset : allExistingSets) {
        workingSet = myset;
        IAdaptable[] elems = myset.getElements();
        System.out.println("Working set " + myset.getName() + " has "
                + elems.length + " projects.");
        for (IAdaptable elem : elems) {
            System.out.println("Working set " + myset.getName()
                    + " contains " + elem.toString());
        }
    }

    page.setWorkingSets(allExistingSets);
    NavigatorActionService actionService = projExplorer
            .getNavigatorActionService();
    CommonViewer viewer = (CommonViewer) projExplorer
            .getAdapter(CommonViewer.class);
    INavigatorContentService contentService = viewer
            .getNavigatorContentService();
    try {
        IExtensionStateModel extensionStateModel = contentService
                .findStateModel(WorkingSetsContentProvider.EXTENSION_ID);
        extensionStateModel.setBooleanProperty(
                WorkingSetsContentProvider.SHOW_TOP_LEVEL_WORKING_SETS,
                true);
        projExplorer.setRootMode(ProjectExplorer.WORKING_SETS);

        WorkingSetActionProvider provider = (WorkingSetActionProvider) getActionProvider(
                contentService, actionService,
                WorkingSetActionProvider.class);
        IPropertyChangeListener l = provider.getFilterChangeListener();
        PropertyChangeEvent pevent = new PropertyChangeEvent(this,
                WorkingSetFilterActionGroup.CHANGE_WORKING_SET, null,
                page.getAggregateWorkingSet());
        l.propertyChange(pevent);

        viewer.refresh();

    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

public static CommonActionProvider getActionProvider(
        INavigatorContentService contentService,
        NavigatorActionService actionService, Class cls) throws Exception {

    CommonActionProvider provider = null;
    CommonActionProviderDescriptor[] providerDescriptors = CommonActionDescriptorManager
            .getInstance().findRelevantActionDescriptors(contentService,
                    new ActionContext(new StructuredSelection()));
    if (providerDescriptors.length > 0) {
        for (int i = 0; i < providerDescriptors.length; i++) {
            provider = actionService
                    .getActionProviderInstance(providerDescriptors[i]);
            if (provider.getClass() == cls)
                return provider;
        }
    }
    return null;
} 
```

但是，它不会重置顶级元素的视图菜单中的单选按钮。它还必须使用内部结构才能工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:16:05.793

将新的工作集设置到活动页面后。您是否将项目浏览器视图更改为工作集模式？

请找到项目资源管理器视图并设置模式。

```
ProjectExplorer projExplorer = (ProjectExplorer) page.findView(IPageLayout.ID_PROJECT_EXPLORER);
projExplorer.setRootMode(ProjectExplorer.WORKING_SETS); 
```

# jquery - 使用 JQuery 验证插件

> ID：10512097
> 
> 赞同：1
> 
> 时间：2012-05-09T08:02:05.867
> 
> 标签：jquery, jquery-plugins

**[更新]**

我正在使用 JQuery Validate 插件来验证一个简单的表单。它是 HTML 格式：

```
<form id="commentForm">
<div id="ContactUsDIV">
    <div id="right">
        <div class="ContactFormInput">Subject:</div>
        <input id="ContactFormSubject" name="ContactFormSubject" type="text" class="input"/>
        <label for="ContactFormSubject" class="validationMessage"></label>

        <div class="ContactFormInput">Full Name:</div>
        <input id="FullName" name="FullName" type="text" class="input"/>
        <label for="FullName" class="validationMessage"></label>

        <div class="ContactFormInput">EMail:</div>
        <input id="EmailAddress" name="EmailAddress" type="text" class="inputLTR"/>
        <label for="EmailAddress" class="validationMessage"></label>

        <div>
            <input id="SendMessage" type="submit" value="Send" class="ContactFormSubmit"/>
        </div>
    </div>
    <div id="left">
        <div class="ContactFormInput">Message:</div>
        <textarea id="UserComment" cols="20" rows="2"></textarea>
        <label for="UserComment" class="validationMessage"></label>
    </div>

</div>
</form> 
```

Java 脚本：

```
<script type="text/javascript">
    $.validator.setDefaults({
        submitHandler: function () { alert("submitted!"); }
    });

    $().ready(function () {

        // validate signup form on keyup and submit
        $("#commentForm").validate({
            rules: {
                ContactFormSubject: "required",
                FullName: "required",
                username: "required",
                EmailAddress: {
                    required: true,
                    email: true
                },
                UserComment: "required"
            },
            messages: {
                ContactFormSubject: "blah blah",
                FullName: "blah blah",
                username: "blah blah",
                email: "blah blah",
                UserComment:"blah blah"
            }
        });

    });
</script> 
```

但是当我单击发送按钮时，什么也没有发生。

可在此处获得：http: [//tinkerbin.com/wRh09opb](http://tinkerbin.com/wRh09opb)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T08:11:46.270

试试这个以获得正确的电子邮件验证消息

```
<script type="text/javascript">
    $.validator.setDefaults({
        submitHandler: function () { alert("submitted!"); }
    });

    $(document).ready(function () {

        // validate signup form on keyup and submit
        $("#commentForm").validate({
            rules: {
                ContactFormSubject: "required",
                FullName: "required",
                username: "required",
                EmailAddress: {
                    required: true,
                    email: true
                },
                UserComment: "required"
            },
            messages: {
                ContactFormSubject: "blah blah",
                FullName: "blah blah",
                username: "blah blah",
                EmailAddress: {required:"blah blah", email:"blah blah"},
                UserComment:"blah blah"
            }
        });

    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:12:40.317

而不是 ContactFormSubject：“必需”

像这样使用

规则：

```
 ContactFormSubject: {
                required: true } 
```

留言：

```
ContactFormSubject: { required : "Please fill the field" } 
```

样本：

```
$("#AdditionalDetailsForm").validate({
    rules: {
        ignore: ":not(:visible)",
        Account_Number: {
            required: true
        },
        BaseJurisdiction: {
            required: true
        }
    },
    messages: {
        Account_Number: {
            required: "<br/> Please enter the field"
        },
        BaseJurisdiction: {
            required: "<br/> Please enter the field"
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:06:37.723

试试这个 Javascript：

```
<script type="text/javascript">
    $.validator.setDefaults({
        submitHandler: function () { alert("submitted!"); }
    });

    $.ready(function () {

        // validate signup form on keyup and submit
        $("#commentForm").validate({
            rules: {
                ContactFormSubject: "required",
                FullName: "required",
                username: "required",
                EmailAddress: {
                    required: true,
                    email: true
                },
                UserComment: "required"
            },
            messages: {
                ContactFormSubject: "blah blah",
                FullName: "blah blah",
                username: "blah blah",
                email: "blah blah",
                UserComment:"blah blah"
            }
        });

    });
</script> 
```

# asp.net-mvc-3 - 在 MVC3 中的 POST 上查看模型属性为空

> ID：10512104
> 
> 赞同：1
> 
> 时间：2012-05-09T08:02:32.027
> 
> 标签：asp.net-mvc-3, c#-4.0

我的视图存在问题，在 HTTP POST 上，视图模型`null`为我的所有属性返回。

下面是我的视图模型。

```
public class CustomerVM
{
    public List<CustomerCDTO> customerCDTO { get; set; }
} 
```

在上面的视图模型中，我创建了一个`List<CustomerCDTO>`属性。类`CustomerCDTO`定义如下。

```
public class CustomerCDTO
{
    public string Name { get; set; }
    public bool Active { get; set; }
    public bool? IsChecked { get; set; }
} 
```

以下是我的看法：

```
<%foreach (var item in Model.customerCDTO) {%>
<tr>
    <td style="text-align: center; width: 10%;" class="table-content-middle">
        <%if (item.Active == true)
        {%>
            <%=Html.CheckBoxFor(m=>item.Active)%>
        <%}
        else
        { %>
            <%=Html.CheckBoxFor(m=>item.Active)%>
        <%}%>
    </td>
    <td class="table-content-middle" align="center" style="width: 80%;">
        <%: item.Name%>
    </td>
</tr>
<%} %> 
```

当我执行 HTTP GET 时，一切都按预期工作，但在 POST 上我得到`null`了`CustomerVM.customerCDTO`.

请建议我应该怎么做才能使它工作。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T08:07:51.633

那是因为您没有`CustomerCDTO`使用包含它是`List`.

改用`for`循环：

```
<%for (var i = 0; i < Model.customerCDTO.Count; ++i) 
```

并使用以下表达式引用元素

```
<%=Html.CheckBoxFor(m => m.customerCDTO[i].Active)%> 
```

基本上，您需要将表达式`m => ...`解析为您感兴趣的属性`m`，而不是从其他变量开始。

# c++ - C++ BOOL (typedef int) vs bool 性能

> ID：10512108
> 
> 赞同：7
> 
> 时间：2012-05-09T08:02:58.210
> 
> 标签：c++, performance, typedef, boolean

我在某处读到使用 BOOL (typedef int) 比使用标准 c++ 类型 bool 更好，因为 BOOL 的大小是 4 个字节（即 4 的倍数），并且它将变量的对齐操作保存到寄存器或类似的东西中。 .

有没有道理呢？我想即使您使用 bool（1 字节），编译器也会填充堆栈帧以保持 4 的倍数对齐？

我绝不是对齐、寄存器等基本工作原理的专家，所以如果我完全错了，我提前道歉。我希望得到纠正。:)

干杯!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T08:05:25.273

首先，`sizeof(bool)`不一定`1`。它是[实现定义](https://stackoverflow.com/questions/5067492/why-the-sizeofbool-is-not-defined-to-be-one-by-the-standard-itself)的，让编译器编写者可以自由选择适合目标平台的大小。

另外，`sizeof(int)`也不一定`4`。

有多个问题可能会影响性能：

*   结盟;
*   内存带宽；
*   CPU 有效加载比机器字窄的值的能力。

对特定代码段的影响（如果有的话）只能通过分析该段代码来确定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T11:42:09.510

您可以在 C++ 中获得的唯一保证大小是 with `char`、`unsigned char`和`signed char` ^(2))，它们总是正好是一个字节，并为每个平台定义。^(0)) ^(1))

* * *

^(0) 虽然一个字节没有定义的大小。`sizeof(char)`总是`1 byte`，但实际上可能是 40 个二进制位)

^(1) 是的，有`uint32_t`朋友，但不，他们的定义对于实际的 C++ 实现是可选的。使用它们，但如果它们不可用，您可能会遇到编译时错误（编译时错误总是好的）)

^(2) `char`, `unsigned char`, 和`signed char`是不同的类型，没有定义是否`char`是`signed`。在重载函数和编写模板时请记住这一点。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:21:50.540

关于布尔值，有三种普遍接受的性能驱动实践：

1.  在 if 语句中，检查表达式的顺序很重要，需要注意它们。
2.  如果对布尔表达式的检查导致很多分支错误预测，那么它应该（如果可能的话）用一些小技巧来代替。
3.  由于 boolean 是最小的数据类型，因此 boolean 变量应该在结构体和类中最后声明，这样填充就不会在结构体内存布局中添加明显的漏洞。

但是，我从未听说过用（无符号？）整数替换布尔值会带来任何性能提升。

# assembly - 为什么汇编指令可以在“lea”指令中包含乘法？

> ID：10512109
> 
> 赞同：13
> 
> 时间：2012-05-09T08:03:02.403
> 
> 标签：assembly, x86, disassembly, machine-instruction

我正在处理应用程序的一个非常低级别的部分，其中性能至关重要。

在调查生成的程序集时，我注意到以下说明：

```
lea eax,[edx*8+8] 
```

我习惯于在使用内存引用时看到加法（例如 [edx+4]），但这是我第一次看到乘法。

*   这是否意味着 x86 处理器可以在 lea 指令中执行简单的乘法运算？
*   这种乘法是否会影响执行指令所需的周期数？
*   乘法是否仅限于 2 的幂（我假设是这种情况）？

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T08:17:54.247

要扩展我的评论并回答其余问题...

是的，它仅限于二的幂。（特别是 2、4 和 8）所以不需要乘数，因为它只是一个转变。它的重点是从索引变量和指针快速生成地址 - 其中数据类型是简单的 2、4 或 8 字节字。（尽管它也经常被滥用于其他用途。）

至于所需的周期数：根据[Agner Fog 的表格](http://www.agner.org/optimize/instruction_tables.pdf)，看起来该`lea`指令在某些机器上是恒定的，而在其他机器上是可变的。

在 Sandy Bridge 上，如果它是“复杂的或相对撕裂的”，则会受到 2 个循环的惩罚。但它并没有说明“复杂”是什么意思……所以我们只能猜测，除非你做一个基准测试。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-09T08:38:46.140

实际上，这不是特定于`lea`指令的内容。

This type of addressing is called [`Scaled Addressing Mode`](http://en.wikipedia.org/wiki/Addressing_mode#Scaled). The multiplication is achieved by a bit shift, which is trivial:

![A Left Shift](../Images/7e75ebe143751bd7d2f499150c6ccb1b.png)

You could do 'scaled addressing' with a `mov` too, for example (note that this is not the same operation, the only similarity is the fact that `ebx*4` represents an address multiplication):

```
 mov edx, [esi+4*ebx] 
```

(source: [http://www.cs.virginia.edu/~evans/cs216/guides/x86.html#memory](http://www.cs.virginia.edu/~evans/cs216/guides/x86.html#memory))

For a more complete listing, see [this Intel document](http://www.intel.com/design/intarch/manuals/243191.htm). Table 2-3 shows that a scaling of 2, 4, or 8 is allowed. Nothing else.

Latency (in terms of number of cycles): I don't think this should be affected at all. A shift is a matter of connections, and selecting between three possible shifts is the matter of 1 multiplexer worth of delay.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-09T21:37:41.903

To expand on your last question:

> Is the multiplication limited to powers of 2 (I would assume this is the case)?

Note that you get the result of `base + scale * index`, so while `scale` has to be 1, 2, 4 or 8 (the size of x86 integer datatypes), you can get the equivalent of a multiplication by some different constants by using the same register as `base` and `index`, e.g.:

```
lea eax, [eax*4 + eax]   ; multiply by 5 
```

This is used by the compiler to do strength reduction, e.g: for a multiplication by 100, depending on compiler options (target CPU model, optimization options), you may get:

```
lea    (%edx,%edx,4),%eax   ; eax = orig_edx * 5
lea    (%eax,%eax,4),%eax   ; eax = eax * 5 = orig_edx * 25
shl    $0x2,%eax            ; eax = eax * 4 = orig_edx * 100 
```

# mysql - 在交叉引用表中创建具有两个外键的 MySQL 表

> ID：10512113
> 
> 赞同：5
> 
> 时间：2012-05-09T08:03:31.903
> 
> 标签：mysql, database-design, foreign-keys, mysql-workbench

这可能来自缺乏知识或愚蠢，但我想了解如何在交叉引用表中创建外键：

例如，我有两个表，项目和图像

```
CREATE TABLE `item` (
    `id` INT(11) UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    `name` VARCHAR(30) NOT NULL,
    `description` MEDIUMTEXT
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `image` (
    `id` INT(11) UNSIGNED AUTO_INCREMENT,
    `file` VARCHAR(255) UNIQUE NOT NULL,
    `caption` VARCHAR(255),
    PRIMARY KEY(`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

我想将任何图像引用到任何项目，所以我创建了一个这样的交叉引用表：

```
CREATE TABLE `item_image` (
    `item` INT(11) UNSIGNED NOT NULL,#foreign key
    `img` INT(11) UNSIGNED NOT NULL,#foreign key
    PRIMARY KEY(`item`,`img`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

但是 item_image 表包含作为外键的列，所以我尝试像这样约束它们

```
CREATE TABLE `item_image` (
    `item` INT(11) UNSIGNED NOT NULL,
    `img` INT(11) UNSIGNED NOT NULL,
    PRIMARY KEY(`item`,`img`),
    FOREIGN KEY(`item`)
        REFERENCES `item` (`id`) 
        ON DELETE CASCADE,
    FOREIGN KEY(`img`)
        REFERENCES `image` (`id`) 
        ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

因此，如果图像或项目被删除，数据库也会删除交叉引用。

我在网上看了很多资源，还有stackoverflow，经常有人建议做我想做的事情应该没有问题在 [一个表中定义多个外键到多个表](https://stackoverflow.com/questions/4050784/defining-multiple-foreign-keys-in-one-table-to-many-tables)

但 MySQL 给了我这个一般性错误

> 错误代码：1005。无法创建表“test.item_image”（错误号：150）

我需要一些帮助来了解 MySQL 到底在抱怨什么。

**编辑：**

如果这很重要，我会在 MySQL Workbench 5.2.39 CE 中执行查询...

MySQL 版本：5.5.16

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:10:14.520

我在`item_image`表之前创建`image`表，这导致我得到 MySQL 错误 150

我现在觉得很傻：）

该错误也可能是由其他原因引起的，在这种情况下您应该检查

[MySQL使用外键创建表，给出错误号：150](https://stackoverflow.com/questions/1457305/mysql-creating-tables-with-foreign-keys-giving-errno-150)

[http://verysimple.com/2006/10/22/mysql-error-number-1005-cant-create-table-mydbsql-328_45frm-errno-150/](http://verysimple.com/2006/10/22/mysql-error-number-1005-cant-create-table-mydbsql-328_45frm-errno-150/)

# .net - maxRequestLength 和 Message：系统资源不足，无法完成请求的服务

> ID：10512114
> 
> 赞同：2
> 
> 时间：2012-05-09T08:03:38.037
> 
> 标签：.net

我已将我的 maxRequestLength 设置为我的 IIS 6 ASP.NET Web 应用程序上的 Web.Config 中的最大长度，当我收到以下错误时，我试图读取大约 5 或 6 兆字节的文件：

> 系统资源不足，无法完成请求的服务。

我是否缺少任何重要的配置或我应该在文件中阅读的任何特定方式？目前我正在使用“ReadAllBytes”方法。

网上的一切似乎都表明它与配置有关，仅此而已，但我确保这是正确的，问题仍然存在。

任何帮助将不胜感激

谢谢伊恩

# python - Python：访问/保存仅由指针给出的内存块而无需复制

> ID：10512120
> 
> 赞同：0
> 
> 时间：2012-05-09T08:04:00.290
> 
> 标签：python, memory, ctypes

这是我尝试做的一个例子：

```
import ctypes
MEM_SIZE = 1024*1024*128

# allocate memory (this is Windows specific)
ptr = ctypes.cdll.msvcrt.malloc(MEM_SIZE)

# make memory accessible to Python calls
mem = ctypes.string_at(ptr, MEM_SIZE)
# BAD: string_at duplicates memory

# store it to disk
open(r'test.raw', 'wb').write(mem) 
```

简而言之：我有一个普通的内存指针，我知道块的大小并希望将其存储在磁盘上或将其作为 numpy 数组重用。

如何在不生成内存块副本的情况下做到这一点？

* * *

相关问题：[stackoverflow：填充 python ctypes 指针](https://stackoverflow.com/questions/10730841/fill-python-ctypes-pointer)（感谢 Brian Larsen 的提示）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:11:03.147

```
ctypes_array = (ctypes.c_char * MEM_SIZE).from_address(ptr)
with open('test.raw', 'wb') as f:
    f.write(ctypes_array)

numpy_array = numpy.frombuffer(ctypes_array, dtype=numpy.byte)
numpy_array.tofile('test.raw') 
```

# c# - 如何通过另一个dll的反射方法使用公共方法？

> ID：10512123
> 
> 赞同：0
> 
> 时间：2012-05-09T08:04:11.763
> 
> 标签：c#, .net, reflection

我想在 dll 中使用运行执行方法。我有 2 个 dll 我可以访问我的启动 dll'RUN 方法：

下面的代码无法运行另一个 DLL(NetworkProcessor) 的 Execute 方法。我想调用 NetworkProcessor.IpPing 类的执行方法。但是我不能。如何使用反射？

```
public void RUN(string uri, string serverGuid)
{
    //something...
    //something...
    //something... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:32:12.783

如果您指定`BindingFlags.Public`，您还需要指定一个`BindingFlags.Instance`或`BindingFlags.Static`，或同时指定两者：

```
MethodInfo minfo = instance.GetType().GetMethod("Execute", BindingFlags.Public | BindingFlags.Instance); 
```

目前两者都没有指定，导致`GetMethod`返回 null。

# java - 完成课程并从课程完成到主课程

> ID：10512124
> 
> 赞同：0
> 
> 时间：2012-05-09T08:04:12.750
> 
> 标签：java, android, android-intent

我有一个 MainClass，其中一个是完整的应用程序，当我单击一个按钮时，我会转到另一个类（PopupValores），我让它看起来像一个弹出窗口。在这个类中，我有一个 EditText，您可以在其中键入一个整数和一个按钮来关闭这个类。我的问题是如何在 PopupClass 中输入 int 并在 MainClass 中使用它。这是 PopupValores 的代码。

```
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class PopupValores extends Activity implements OnClickListener {

TextView texto;
String mensaje;
EditText editable;
Button ok;
public static int cantidad;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.popupvalores);

    ok = (Button) findViewById (R.id.Bok);
    texto = (TextView) findViewById (R.id.textView1);
    editable = (EditText) findViewById (R.id.editText1);
    mensaje = editable.getText().toString();
    ok.setOnClickListener(this);

    ok.setOnLongClickListener(new View.OnLongClickListener() {
        public boolean onLongClick(View arg0) {
            finish();
            return true;
        }
    });

}

public void onClick(View v){
    switch(v.getId()){
    case R.id.Bok:

    String mensaje;
    mensaje = editable.getText().toString();

    cantidad = Integer.parseInt(mensaje);

    texto.setText("New value " + cantidad + ".");

    }
}
} 
```

然后在我的 MainClass 我单击一个按钮，它显示 int

```
int id, vaas = PopupValores.cantidad;
public void onClick (View v)
{   
posicion = (ImageCell) v;
seleccion = posicion.mCellNumber;

if (seleccion == -1){
    ....
    toast (id + " " + vaas);
    ....
}
} 
```

但不是显示在 PopupValores 中声明的值，而是显示 0。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:24:23.393

1.  您需要调用弹出活动`Activity.startActivityForResult()`
2.  完成弹出活动后，通过设置请求的结果`Activity.setResult()`（您可以将数据保存在意图的包中）
3.  在您的主要活动中，覆盖`onActivityResult`并检索数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:22:11.320

它被称为 startActivityforResult 并且在stackoverflow上已经被回答了很多次 这是[一个](https://stackoverflow.com/questions/7473941/startactivityforresult)

# android - 将倾角转换为产生相同值的像素

> ID：10512127
> 
> 赞同：4
> 
> 时间：2012-05-09T08:04:15.853
> 
> 标签：android, pixel, density-independent-pixel

我需要在我的活动中将与密度无关的像素转换为像素。我尝试在我的 onCreate 中使用此方法

```
float pix = dipValue * getResources().getDisplayMetrics().density;
pixel = Math.round(pix); 
```

我尝试了另一种方法

```
Resources r = getResources();
float pix = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 35,r.getDisplayMetrics());
value = Math.round(pix); 
```

两者都产生相同的价值。我认为问题不在于方法，而在于资源。我是否应该在清单文件中进行任何更改，例如

```
<supports-screens android:resizeable=["true"| "false"]
              android:smallScreens=["true" | "false"]
              android:normalScreens=["true" | "false"]
              android:largeScreens=["true" | "false"]
              android:xlargeScreens=["true" | "false"]
              android:anyDensity=["true" | "false"]
              android:requiresSmallestWidthDp="integer"
              android:compatibleWidthLimitDp="integer"
              android:largestWidthLimitDp="integer"/> 
```

有一个与我类似的[问题](https://stackoverflow.com/questions/4037114/dip-to-pixel-conversion-results-in-the-exact-same-value)。但这并不能解决我的问题。帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T08:12:35.997

你有没有尝试过

```
px = dp * (dpi / 160) 
```

> 与密度无关的像素相当于 160 dpi 屏幕上的一个物理像素，这是系统为“中等”密度屏幕假定的基线密度。在运行时，系统会根据使用中屏幕的实际密度，根据需要透明地处理 dp 单位的任何缩放。dp 单位到屏幕像素的转换很简单：px = dp * (dpi / 160)。例如，在 240 dpi 的屏幕上，1 dp 等于 1.5 个物理像素。在定义应用程序的 UI 时，您应该始终使用 dp 单位，以确保您的 UI 在不同密度的屏幕上正确显示。

请检查[此链接](http://developer.android.com/guide/practices/screens_support.html)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-09T11:22:18.590

您可以在 dimen.xml 中添加 dp 值并使用

`int pixels = getResources().getDimensionPixelSize(R.dimen.idDimension);`

这更容易...

# blackberry - 如何将黑莓应用程序从 OS 5 移植到 OS 6

> ID：10512132
> 
> 赞同：0
> 
> 时间：2012-05-09T08:04:55.547
> 
> 标签：blackberry, blackberry-os6, blackberry-os5, blackberry-os-v5

我已经为 BlackBerry OS 5 开发了应用程序，现在我想将它移植到 BB OS 6

在移植应用程序时，我面临以下问题 -

我在 OS 5 中添加了单独的 org.json.me 包，它内置在 OS 6 中

当我在应用程序中添加 BB OS 6 库而不是 OS 5 时，它给了我错误

请建议在两个平台上运行相同应用程序的可能解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:46:28.017

您可以将 json 包的包名重命名为 com.yourcompany.json，而不是将其保留为 org.json.me。这是您问题的简单解决方案，也可能有更好的解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T10:40:01.123

我已经回答了我的问题

我使用 BlackBerry OS 5 库来编译我的应用程序，该应用程序在 OS 6 设备上也运行良好

# php - MongoDB 在找到空白条目时显示错误

> ID：10512134
> 
> 赞同：2
> 
> 时间：2012-05-09T08:05:01.053
> 
> 标签：php, mongodb

我有一个项目，它在特定列中搜索特定条目，然后返回该列中包含该条目的所有文档。它几乎可以完美地工作，除非该输入字段为空时会出错。下面我试着说明一下。

**我的数据库：**

```
A|B|C|D
1|1|5|5
2|1| |6
3|2|7|7
4|2|8|8 
```

**我的PHP：**

```
$query = array( "B" => 1);
$cursor = $collection->find( $query );

foreach ($cursor as $obj) {
    echo $obj["A"] . $obj["B"] . $obj["C"]  .$obj["D"] . "<br />";
} 
```

**我的输出是：**

```
1155
21Notice: Undefined index: C6 
```

我怎样才能不给出任何错误。只需将其视为一个空白字段。我不确定这是否是一个常见问题，但是我对 PHP 还是很陌生，对 MongoDB 还是很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:09:59.633

在尝试使用它进行索引之前，使用 isset() 找出该键是否存在于数组中

```
foreach ($cursor as $obj) {
    echo $obj["A"] . $obj["B"]. (isset($obj["C"]) ? $obj["C"] : '' ) .$obj["D"]."<br />";
   //It will replace each blank with an ''
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:21:24.763

我相信那与mongodb无关。它是灵活的文档模式的工作原理。它不会返回该字段，因为`C`特定文档中不存在该键。

我对 PHP 没有任何经验。但我确信 php 会引发错误，因为您正在尝试访问特定文档中不存在的键“C”。

`ODM` [但我相信如果你使用一些(Object document mappers)](http://www.mongodb.org/display/DOCS/PHP+Libraries,+Frameworks,+and+Tools#PHPLibraries,Frameworks,andTools-MongoDbPHPODM)可以很容易地解决这些问题。它通过根据字段的数据类型分配默认值来解决问题。

希望能帮助到你

# php - 如何在 Google Chrome 中正常显示 HTML“文件”字段？

> ID：10512136
> 
> 赞同：0
> 
> 时间：2012-05-09T08:05:11.873
> 
> 标签：php, html, google-chrome

有一个`PHP`包含公式的文件，`<form`其中包含一个`file`字段：

`<input type="file" name="doc_fichier" maxlength="255" size="50">`.

当我打开页面时，`Firefox`该字段会很好地显示，如下图所示：

![在此处输入图像描述](../Images/793977dd32887166d885ab58b87549e4.png)

但是当我打开页面时，`Google Chrome`我得到了这个：

![在此处输入图像描述](../Images/ff48c0d2a6a684f5f24db364a49be744.png)

那么如何`Google Chrome`正确显示元素呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T08:07:48.317

没有“正确”的方式来显示文件字段，它取决于浏览器。

您的屏幕截图是在 Chrome 中显示文件字段的标准方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T20:24:48.710

如果您使用的是 jQuery，请查看此插件 - [https://github.com/ajaxray/bootstrap-file-field](https://github.com/ajaxray/bootstrap-file-field)

这个小插件会将文件输入字段显示为引导按钮（带有可配置的类），在所有浏览器中都类似，并且会漂亮地显示选定的文件名（或选择错误）。

此外，您可以使用简单的数据属性或 JS 设置来设置各种限制。例如，`data-file-types="image/jpeg,image/png"`将限制选择除 jpg 和 png 图像之外的文件类型。

# ios - 如何在IOS中做反馈表？

> ID：10512148
> 
> 赞同：0
> 
> 时间：2012-05-09T08:06:14.440
> 
> 标签：ios, radio-button, feedback

我想在我的 IOS 应用程序的视图中放置一个反馈表。

![在此处输入图像描述](../Images/31c321131985e765bdd825fddc91d5a8.png)

将有 2-3 个笑脸图像。最初它们将是灰色的。当您点击其中一个时，它将被着色，其余的保持灰色。它们将像 HTML 中的单选按钮一样工作。

并且会有5个问题。

那么，在原生 IOS 应用程序中处理这种反馈表单的最佳方式是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:14:40.283

在我看来，最好和最简单的方法是使用嵌入的 html 页面。如果您已经有这样的网页版页面，那就太好了。

另一种方法是在 xib 中使用自定义按钮定制表单，但为了让您真正收到反馈，您需要以某种方式通过脚本页面（php、asp 或任何您喜欢的）发送数据。

我做过类似的事情，我使用了我给你的第二个建议，但在我的情况下它是不同的，因为该表单必须通过动画等呈现在现有视图上。我推荐你的是第一个，带有网页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:35:55.687

我认为您可以使用 xib 创建带有问题文本和答案选项按钮的视图。按钮可以将笑脸图像作为背景图像。然后，您可以更改所选按钮状态的按钮单击时笑脸的图像。并且可能有另一个按钮来确认答案并移至下一个问题，该问题是使用新问题文本刷新视图。希望这可以帮助。

# php - 如何在 PHP 中包含命名空间文件？

> ID：10512155
> 
> 赞同：2
> 
> 时间：2012-05-09T08:06:35.880
> 
> 标签：php, apache2, doctrine-orm, xampp

我在 PHP 中开发时遇到问题。首先我必须说我不是这个星球上经验丰富的 PHP 开发人员。

我的代码/问题如下：

在文件中`Controllers\TestController.php`：

```
 <?php
  namespace My\Test\Controllers;

  class TestController
  {
     public function HelloTest()
     {
          echo 'Hello!';
     } 
  }
?> 
```

当我想将此类包含在另一个像这样的 php 文件中时

文件`Models\TestModel.php`：

```
<?php
     namespace My\Test\Models;
     use My\Test\Controllers;         

     class TestModel
     {
       public function TestModelFunction()
       {
         $control = new TestClass();
         $control->HelloTest();
       }
     } 
?> 
```

文件`index.php`_

```
 <?php
      use My\Test\Models;

      $model = new TestModel();
      $model->TestModelFunction();
  ?> 
```

那是行不通的......我总是会收到以下错误：

> 找不到类“TestModel”！

当我现在添加：

`include_once 'Models/TestModel.php'`在index.php
中 然后它可以工作......
`include_once '..Controllers/TestController.php'``TestModel.php`

文件夹结构：

```
Project
|-Models
|  TestModel.php
|-Controllers
|  TestController.php
|index.php 
```

但是我真的必须指定文件所在的每个时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:18:03.733

是的，您将始终必须包含定义您的类的文件。

命名空间只是一种将类打包在一起的方法，而不是一种自动包含 PHP 文件的方法。

如果您正在寻找一种在需要时自动包含 PHP 文件的方法，请查看[autoload](http://us.php.net/manual/en/language.oop5.autoload.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:13:50.340

另一种方法是使用自动加载器（[http://php.net/manual/en/language.oop5.autoload.php](http://php.net/manual/en/language.oop5.autoload.php)）。你可以在那里找到一些好的开源自动加载器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:17:31.710

命名空间在*逻辑上将*代码分成不同的......好吧，*命名空间*。它与包含包含该名称空间代码的文件无关。*所以是的，除了*命名空间之外，您确实需要以`include`某种方式（例如自动加载器）来处理文件。

# python - Cx_Freeze - 如何包含模块

> ID：10512160
> 
> 赞同：5
> 
> 时间：2012-05-09T08:06:59.557
> 
> 标签：python, include, cx-freeze

我在将东西包含到我的 cx_Freeze 脚本中时遇到了这个问题，我试图做的是包含 easygui 和 sys，因为我在我的程序中使用它们。任何帮助，将不胜感激！

继承人的代码：

```
import sys
from cx_Freeze import setup, Executable

build_exe_options = {"packages": ["os"], "excludes": ["tkinter"] }

base = None
if sys.platform == "win32":
base = "Win32GUI"

setup(  name = "ProgramGUI",
        version = "0.1",
        description = "My GUI application!",
        options = {"build_exe": build_exe_options},
        executables = [Executable("ProgramGUI.py", base=base)]) 
```

所以我真正需要知道的就是如何将 Includes[“sys”，“easyGUI”] 合并到设置脚本中：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-07-14T09:54:12.510

说真的，我认为您只是错过了告诉 cx_freeze 导入 easy_gui 的小事：

```
import sys
from cx_Freeze import setup, Executable

build_exe_options = {
    "packages": ["os", "sys"], 
    "excludes": ["tkinter"],
    "includes": ["easy_gui"] # <-- Include easy_gui
}

base = None
if sys.platform == "win32":
base = "Win32GUI"

setup(  name = "ProgramGUI",
        version = "0.1",
        description = "My GUI application!",
        options = {"build_exe": build_exe_options},
        executables = [Executable("ProgramGUI.py", base=base)]) 
```

# android - 通过java代码改变相对布局

> ID：10512167
> 
> 赞同：0
> 
> 时间：2012-05-09T08:07:15.837
> 
> 标签：android, android-layout, android-relativelayout

我浏览了几个链接，但我无法找到是否可以通过 java 代码设置相对布局的其他属性，例如 android:gravity、android:orientation。我想通过java代码而不是通过xml来改变一些视图的位置。

例如，我想通过 java 代码为特定视图设置这些属性。android:gravity="center_vertical" android:orientation="vertical"

我该怎么做？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:41:19.307

正如Daan所说，您可以在android中使用布局参数进行相对布局

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
params.alignWithParent = true;
params.bottomMargin = 5;
params.height = 50;
params.leftMargin = 50; 
```

但是正如您所说，您想为特定视图设置以下属性，您不能将这些属性分配给 RelativeLayout，因为它们属于 LinearLayout 和其他视图

```
android:gravity="center_vertical" android:orientation="vertical" 
```

要为任何视图设置重力，请遵循代码

```
tv = (TextView)findViewById(R.id.tv01);
tv.setGravity(Gravity.CENTER_VERTICAL); 
```

您不能设置任何视图的方向。相反，您可以将方向设置为 LinearLayout

像这样

```
LinearLayout linearLayout = new LinearLayout(this);
linearLayout.setOrientation(LinearLayout.VERTICAL); 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:19:13.223

在相对布局中，您必须使用其他布局参数： [相对布局内的布局参数](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)

# java - 有人告诉我，直接使用数字而不是静态最终 int 字段可以节省内存，这是真的吗？

> ID：10512175
> 
> 赞同：1
> 
> 时间：2012-05-09T08:07:50.797
> 
> 标签：java, android, memory-management, constants, magic-numbers

在我的 Android 项目中，有许多常量来表示捆绑额外键、处理程序的消息参数、对话框 id ant 等。我团队中的某个人使用一些正常的数字来执行此操作，例如：

```
handler.sendMessage(handler.obtainMessage(MESSAGE_OK, 1, 0));
handler.sendMessage(handler.obtainMessage(MESSAGE_OK, 2, 0));
handler.sendMessage(handler.obtainMessage(MESSAGE_OK, 3, 0)); 
```

在处理程序中：

```
switch (msg.arg1) {
case 1:
    break;
case 2:
    break;
case 3:
    break;
} 
```

他说太多的静态最终常量会消耗大量内存。但我认为他的解决方案使代码难以阅读和重构。

我已经阅读了这个问题并用谷歌搜索了很多，但没有找到答案。 [java: 使用 final static int = 1 是否比普通的 1 更好？](https://stackoverflow.com/questions/2070669/java-is-using-a-final-static-int-1-better-than-just-a-normal-1)

我希望有人可以告诉我静态决赛的内存成本。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T08:12:01.683

您不必费心将其更改为文字，它会使您的代码可读性和可维护性降低。

从长远来看，您将受益于这种“失忆”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T08:25:16.137

从技术上讲，他是对的——静态 int 字段确实需要一些额外的内存。

但是，成本可以忽略不计。它是一个 int，加上反射支持的相关元数据。使用有意义的名称的好处使您的代码更具可读性，并确保该数字的语义是众所周知的，并且无论在哪里使用都是一致的，显然超过了成本。

你可以做一个简单的测试。编写一个使用不同数字文字调用`handler.sendMessage`1000 次的小应用程序，构建它并记下 .dex 文件的大小。然后用 1000 个静态 int 常量替换 1000 个文字，并执行相同操作。比较这两种大小，您将了解您的应用程序需要的额外内存的数量级。（为了完整起见，请在此处发布数字作为评论:-)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T03:11:23.543

它节省了非常少的内存——基本上只是在相关类中记录额外常量并从其他类中引用它所需的额外元数据。

**除非您的内存非常有限，否则不必**担心这一点。

从长远来看，使用**命名良好的静态最终常量**而不是神秘的幻数对于您的代码可维护性和健全性要好得多。

# regex - 对最后 5 位数字使用 regexp_replace 函数

> ID：10512177
> 
> 赞同：0
> 
> 时间：2012-05-09T08:07:55.443
> 
> 标签：regex, postgresql

我在“07960/WR”、“27163/WR”等列中有值。我需要从中选择所有数字。所以我创建了sql：

> 从...中选择 CAST (regexp_replace(object_index, '\D', '', 'g') as integer) 作为数字

没关系，但是当有人输入 [number] / <- slash / .... 例如：“99/27163/WR”

我的查询不起作用。

如何仅对值的最后 5 位使用 regexp_replace？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:35:10.647

我不了解 PostgreSQL，但在 RegexBuddy 的帮助下，我拼凑了一些希望可以工作的东西：

```
select CAST (REGEXP_REPLACE(object_index, $$(?p)^.*(\d{5})\D*$$$, $$\1$$, 'g') as integer) as number from ... 
```

这个正则表达式的想法是匹配并捕获`\d{5}`字符串中的最后五位数字（即那些后面只有非数字: 的数字`\D*$`）并删除它们周围的所有内容。

# jsp - ava.lang.IllegalStateException: getOutputStream() 已为此响应调用

> ID：10512179
> 
> 赞同：-1
> 
> 时间：2012-05-09T08:07:58.253
> 
> 标签：jsp, servlets

```
 String contenttype = rs.getString("contentType");
    String filename = rs.getString("fileName");

    response.setContentType(contenttype);
    response.setHeader("Content-disposition","attachment;filename=" + filename.replace('"', ' '));

    java.io.InputStream instream = rs.getBinaryStream("fileData");
    byte[] b = new byte[1000];
    while (instream.read(b) > 0) {
        try {
            response.getOutputStream().write(b);
        }
        catch(Exception e) {}
    }

    try {
        response.getOutputStream().flush();
    }
    catch(Exception e) {} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:26:28.880

通常，它应该允许调用`response.getOutputStream()`任意次数。我认为您同时调用`response.getOutputStream()`and `response.getWriter()`。

请检查您是否在`response.getWriter()`任何地方调用，或者请求是否登陆 JSP 写入`response.getWriter()`.

# java - 适用于 Android 的 JAVA 宏（是否存在？）

> ID：10512180
> 
> 赞同：0
> 
> 时间：2012-05-09T08:08:00.220
> 
> 标签：java, android, arrays, json, foxpro

我使用 VFP 8.0 已经有一段时间了，我最喜欢它的一件事就是宏功能；

```
name = "Paul James"
age = 25
result = My name is &name, I am &age years old. 
```

我也可以，

```
dimension x[5];
x[0] = "box"
x[1] = "area"
text.&x[0]..text = "textbox" ---> textbox.text="textbox"
text.&x[1]..text = "textarea" ---> textarea.text="textarea" 
```

这就是 FoxPro 的事情，我似乎已经对它产生了浓厚的兴趣，并且有点倾向于希望像 Java 这样的面向对象语言存在（或者确实如此，我只是错过了一些额外的研究？），无论如何，我想要类似的东西这是我的问题；

我有一个 JSON 数组，我使用 android 代码工厂中提供的“names()”方法获取响应的所有名称并将其存储在一个临时数组中。

有意地，我想为从该方法创建的临时数组中的每个名称创建一个数组；

为了显示;

```
JSONArray response = 
[{"name":"a","middlename":"aa","surname":"aaa"},{"name":"b","middlename":"bb","surname":"bbb"},{"name":"c","middlename":"cc","surname":"ccc"}]

temp[] = [{name,middlename,surname}]; 
```

期望的输出：

```
String[] name = new String[response.firstobject.length];
String[] middlename = new String[response.firstobject.length];
String[] surname =  new String[response.firstobject.length]; 
```

这是我的实际代码；JSON 解析器

```
 @SuppressWarnings("null")
public ArrayList<String> parseJson(JSONArray ja) throws JSONException{
    ArrayList<String> listItems = new ArrayList<String>();
    String[] temp = null;       
    //Get all the fields first
    for (int i=0; i<=0; ++i){
        JSONObject jo = ja.getJSONObject(i);
        if(jo.length()>0){
            temp = new String[jo.names().length()];
            for(int x=0; x<jo.names().length(); ++x){
                temp[x] = jo.names().getString(x);
            }
        }
    }
     } 
```

所以我有点卡在所需的输出中，这首先可能吗？为什么我这样做，是因为我想创建一个通用的 JSON 响应方法；这样我就不必为了使用它们而记住所有响应的名称。我正在寻找一种 java/android 解决方案（很可能是适用于 android 的解决方案）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:13:19.143

我不一定会尝试复制您在 Visual FoxPro 中可以做的事情，因为在该语言中避免宏替换通常是一个好主意，除非您绝对*必须*使用它，并且您不能使用名称表达式来代替。

以下是名称表达式的示例：

```
STORE 'city' TO cVarCity
REPLACE (cVarCity) WITH 'Paris' 
```

这要快得多，尤其是在循环中。

在 Java 方面，您可能正在考虑使用[反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/index.html)API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-18T13:12:40.813

我也使用 vfp 并且我有一些例程。也许这些功能为您服务 STRTRAN、CHRTRAN：

```
//--------- ejemplos :
// STRTRAN("Hola * mundo","*", "//") ==> "Hola // mundo"
public String STRTRAN(String cExpression, String cFindString, String cReplacement){        
    return cExpression.replace(cFindString, cReplacement);
}

//------------------ ejemplos:
// miToolkit.CHRTRAN("ABCDEF", "ACE", "XYZ"); // muestra XBYDZF. ok
// miToolkit.CHRTRAN("ABCDEF", "ACE", "XYZQRST");  // muestra XBYDZF. ok
// miToolkit.CHRTRAN("ABCD", "ABC", "YZ"); // muestra YZCD.  No es como fox
public String CHRTRAN(String cString, String cFindChars, String cNewChars){
    String cResult = cString;       
    char[] aFindChars; 
    char[] aNewChars;  
    int nLength = cFindChars.length();

    aFindChars = cFindChars.toCharArray();
    aNewChars  = cNewChars.toCharArray();
    if(cNewChars.length() < nLength){
        nLength = cNewChars.length() ;
    }
    for(int i=0; i < nLength; i++){
        cResult = cResult.replace( aFindChars[i], aNewChars[i] );
    }
    return cResult;
} 
```

Saludos, César Gómez, 利马-秘鲁

# c++ - 如何使我的应用程序不链接到某个库？`QT-=`？

> ID：10512181
> 
> 赞同：3
> 
> 时间：2012-05-09T08:08:08.707
> 
> 标签：c++, qt, visual-c++, linker, qmake

所以我尝试静态编译我的应用程序。anf 我没有将我的应用程序链接到 `QtScript.lib`我的专业文件中。但有些事情确实如此。我使用 MSVC 编译器进行编译。我想知道如何在`.pro`文件中说我的应用程序不应链接到某个库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:13:49.553

QtScript 是许多其他 Qt 库的依赖项，例如 WebKit，显然还有 QtScriptTools。如果我没记错的话，QtDeclarative 也依赖于 QtScript。

# ssrs-2008 - 从服务器接收结果时发生传输级错误（提供者：TCP Provider，错误：0-信号量超时期限已过）

> ID：10512182
> 
> 赞同：1
> 
> 时间：2012-05-09T08:08:09.457
> 
> 标签：ssrs-2008, k2

我们有一个具有以下规格的应用程序服务器：

• Windows 2008 R2 操作系统。

• 所有先决条件均已成功且正确配置：Windows 角色、MSDTC 和与 SQL DB 服务器的连接。

• MS Reporting Services 2008 R2 已成功安装和配置，所有报表均已部署和呈现，没有任何问题。

应用程序服务器连接到不同服务器上的 SQL Server 2008 R2 DB - 两台服务器之间没有防火墙，并且使用 UDL 文件，在 SQL Server 上使用 Windows 身份验证或 SQL 身份验证始终成功连接。

当我们安装“K2 blackpearl 4.5 (4.10060.1.0) with Update KB001040”时，安装成功完成，但是当我们打开工作列表、打开 K2 安装管理器进行重新配置以及在报告管理器上呈现任何报告时出现以下异常： “从服务器接收结果时发生传输级错误。（提供者：TCP 提供者，错误：0 - 信号量超时期限已过。）”尽管在 K2 的安装过程中成功创建了所有 DB。此外，K2 的所有其他功能（管理控制台中的任何功能）和报告管理器（报告部署、数据源管理和文件夹/报告设置）都可以完美运行。

当我们从服务器中删除 K2 组件时，报告服务会再次成功运行，无需重新配置。

我们尝试将服务器移动到新环境以检查服务器本身是否存在问题，所有安装和配置都已完成，没有问题并且错误消息消失了。

我们确实检查了以下所有要点：

• MSDTC 配置。

• 两台服务器之间的所有端口都是开放的。

• 两台服务器之间的 SQL 连接始终成功。

• 我们有第三台安装了MOSS 2007 的服务器，它完美地解决了与数据库连接的问题。

• 用于windows 服务和SQL windows 连接的所有用户都处于活动状态且配置正确。

o 使用 dbcreator 和 SecurityAdmin 角色进行 SQL 登录。

o 在应用程序服务器上添加为管理员。

• 我们尝试过Windows 身份验证和SQL 身份验证，它们都给出了同样的问题。

• 我们使用了较新版本的K2 安装文件“K2 blackpearl 4.5 (4.10060.1.0) with KB001320”，但在安装的最后一步失败并出现同样的问题。

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:56:56.573

（完全披露我为 K2 工作）并查看了我们的系统以及支持论坛，但找不到此错误的参考。从我与之交谈的人看来，这似乎是一个普遍的网络问题，有很多可能的原因，包括像网卡这样简单的问题。尽管我对您提出的几点不是 100% 清楚。当你说

“当我们打开工作清单时出现以下异常”您从哪里打开工作清单？

当您说“当我们从服务器中删除 K2 组件时，报告服务会再次成功运行，无需重新配置。”

您是否在 SQL Reporting Services 中收到此错误？

您也可以在[http://k2underground.com](http://k2underground.com)上发布问题，其他人可能已经看到了。

**编辑**我四处询问，目前似乎没有任何好的答案。您是否愿意打开 K2 支持票并让我们查看 K2 日志或通过 livemeeting 查看配置？谢谢！

# java - 在 xml 中附加节点时出现错误的文档错误

> ID：10512183
> 
> 赞同：4
> 
> 时间：2012-05-09T08:08:09.950
> 
> 标签：java, xml

```
public static Node createNodeFromXMLString(String xml) throws SAXException,
        IOException {
    return builder.parse(new ByteArrayInputStream(xml.getBytes()))
            .getDocumentElement();
}

public static void main(String args[]){
   Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse("server.xml");
   XPath xpath = XPathFactory.newInstance().newXPath();
   Node element = (Node)xpath.evaluate("/Server/Service/Connector[2]",document,XPathConstants.NODE);
   String newNode = nodeToString(element).replace("port=\"8443\"", "port=\"8453\"");
   Node parent = element.getParentNode();
   Node node = createNodeFromXMLString(newNode);
   parent.removeChild(element);
   document.importNode(node,true);
   parent.appendChild(node);       
} 
```

它在线程“main”org.w3c.dom.DOMException 中引发异常：WRONG_DOCUMENT_ERR：节点在与创建它的文档不同的文档中使用。在 org.apache.xerces.dom.ParentNode.internalInsertBefore(Unknown Source) at org.apache.xerces.dom.ParentNode.insertBefore(Unknown Source) at org.apache.xerces.dom.NodeImpl.appendChild(Unknown Source)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-09T08:11:09.773

`Document.importNode`不会更改调用它的节点。你应该改变这一行：

```
document.importNode(node,true); 
```

至

```
node = document.importNode(node,true); 
```

或者，使用不同的变量：

```
Node importedNode = document.importNode(node, true);
parent.appendChild(importedNode); 
```

# java - 无法使用 Java 删除文件

> ID：10512186
> 
> 赞同：-2
> 
> 时间：2012-05-09T08:08:45.213
> 
> 标签：java, file, file-io

我已经编写了以下代码来合并和删除源文件，但不知何故源文件没有被删除。任何人都可以说明我在这里缺少什么。

```
 public void doDelete(List<String> dID)throws  IOException {

        String DID=null;

        try{
            for( ListIterator<String> iterator = dID.listIterator(); iterator.hasNext();)
            {

                DID= (String) iterator.next();

                System.out.println("Deleting PDF" +DID);
                File f =new File("E:\\TestFolder"+ "\\" +DID+".pdf");
                 if (!f.exists()) {
                        System.err.println("File " + f
                            + " not present to begin with!");
                        return;
                      }
                System.out.println(f.length());
                System.out.println(f.getAbsolutePath());
                boolean success = f.delete();
                if (!success){
                    System.out.println("Deletion failed.");               
                }else{
                    System.out.println("File deleted."+DID);
                }
            }
        }catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();             
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:18:15.220

TL;DR 但文件删除失败通常是由于文件仍处于打开状态。特别是当您在 Windows 上运行它时。如果您想获取删除失败的原因，您可以使用 Java 7 文件 API，它会将删除失败的原因作为例外提供给您。

```
java.nio.Files.delete(...) 
```

[http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#delete(java.nio.file.Path](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#delete(java.nio.file.Path) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:27:06.453

在您的 createFileFromBlob 方法中，您正在打开多个 FileOutputStreams（对于 dID.listIterator() 的每个元素），但只关闭 finally 块中的最后一个。这将为除最后一个文件之外的所有文件留下一个打开的句柄，防止它们按照 Pulsar 的回答被删除。

# c# - 使用帮助脚本在 WebBrowser 中播放 YouTube 上的视频

> ID：10512191
> 
> 赞同：3
> 
> 时间：2012-05-09T08:09:04.897
> 
> 标签：c#, youtube, browser, playback

我需要帮助...我需要使用脚本在组件 WebBrowser (C#) 中播放视频 (YouTube)。我找到了一个运行播放的脚本：

```
 yt.player.playerReferences_.player1.api.playVideo() 
```

但此脚本不会在 WebBrowser 组件中运行视频。编码：

```
HtmlElement head = webBrowser1.Document.GetElementsByTagName("head")[0];  
HtmlElement scriptEl = webBrowser1.Document.CreateElement("script");  
IHTMLScriptElement element = (IHTMLScriptElement)scriptEl.DomElement;  
element.text = "function playV() { yt.player.playerReferences_.player1.api.playVideo(); }";  
head.AppendChild(scriptEl);  
webBrowser1.Document.InvokeScript("playV()"); 
```

请帮我。也许还有另一种方式？

# javascript - “模糊”事件是否仅针对 HTML 表单对象触发？

> ID：10512194
> 
> 赞同：3
> 
> 时间：2012-05-09T08:09:24.697
> 
> 标签：javascript, jquery, events, onblur

我正在开发一个交互式 Web 应用程序，目前在[http://picselbocs.com/projects/goalcandy](http://picselbocs.com/projects/goalcandy)上设置（用户：demo@demo.com，密码：demo）。它允许您将包含图像和/或文本的项目从左侧边栏中拖到右侧的工作区，并调整它们的大小/编辑它们等等。

我已经设置了一个`onblur`事件处理程序，以在新创建的对象失去焦点时触发（至少在理论上），并且出于测试目的，该处理程序只需进行`alert()`调用。问题是处理程序根本没有被触发。Bellow 是用于创建这些新对象的一段代码：

```
obj.id = 'mesh-obj-'+current_object_id;
jqObject
    .attr('id',obj.id)
    .attr('item_no', current_object_id)
    .removeClass('dragged transparent tpl-obj no-user-select')
    .addClass('mesh-obj')
    .css({
        'z-index' : current_z_index,
        'left' : obj.position.left - mesh.position.left - mesh.borderWidth,
        'top' : obj.position.top - mesh.position.top - mesh.borderWidth,
        'right' : 'auto'
    })
    .on("focusout blur", function(event){
        alert('object lost focus'); 
    })
    .appendTo('#mesh'); 
```

模糊事件是否仅触发表单输入或任何 HTML 标记？如果是后者，那我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T08:16:57.023

您需要将 tabindex 分配给您的 html 元素以捕获模糊事件

html:

```
<div id="box1" class="box" tabindex="1">div 1</div>
<div id="box2" class="box" tabindex="2">div 2</div> 
```

js：

```
$('.box').blur(function(){
   console.log(this)
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T08:15:52.563

模糊事件不仅可以用于表单元素。

阅读[本文](http://quirksmode.org/dom/events/blurfocus.html)了解更多信息。

# r - R包相当于Matlab的贝叶斯网络工具箱，用于使用时间数据进行网络结构学习

> ID：10512205
> 
> 赞同：3
> 
> 时间：2012-05-09T08:10:09.590
> 
> 标签：r, time, bayesian

我正在研究蛋白质磷酸化事件的时间序列数据，我想使用动态贝叶斯网络来学习网络结构。我发现你的贝叶斯网络工具箱对我的学习很有帮助。但是我对R更熟悉。有没有和Matlab的贝叶斯网络工具箱相当的R包，可以使用时间序列数据学习网络结构？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:17:35.043

尝试以下 R 包来执行动态贝叶斯网络推理：

[http://cran.r-project.org/web/packages/G1DBN/index.html](http://cran.r-project.org/web/packages/G1DBN/index.html)

和

[http://cran.r-project.org/web/packages/ebdbNet/index.html](http://cran.r-project.org/web/packages/ebdbNet/index.html)

请享用！

# proxy - Amazon S3 客户端通过代理连接 - putObject 获取 NullPointerException

> ID：10512210
> 
> 赞同：10
> 
> 时间：2012-05-09T08:10:24.357
> 
> 标签：proxy, amazon-s3, amazon-web-services

我有这段简单的代码，它试图通过代理将文件上传到 Amazon S3。这是代码：

```
 BasicAWSCredentials basicCred = new BasicAWSCredentials("my_access_key", "my_secret_key");
    ClientConfiguration clientCfg = new ClientConfiguration();
    clientCfg.setProtocol(Protocol.HTTP);

    //setup proxy connection:
    clientCfg.setProxyHost("192.168.2.12");
    clientCfg.setProxyPort(80);

    AmazonS3 s3 = new AmazonS3Client(basicCred, clientCfg);

    String bucketName = "mybucket";
    String key = "/test/Capture.JPG";
    File file = new File("d:/Test_Data/Capture.JPG");

    System.out.println("Uploading a new object to S3 from a file");
    s3.putObject(new PutObjectRequest(bucketName, key, file)); 
```

然而，这是我从运行程序中得到的错误：

```
Exception in thread "main" java.lang.NullPointerException
    at com.amazonaws.util.BinaryUtils.fromHex(BinaryUtils.java:69)
    at com.amazonaws.services.s3.AmazonS3Client.putObject(AmazonS3Client.java:1066)
    at javaapplication8.JavaApplication8.main(JavaApplication8.java:48)
Java Result: 1 
```

我正在使用来自亚马逊的最新 aws 1.3.8 sdk。代理设置在我旁边的另一台 PC 上，它只是一个简单的 Javascript 代理 (http://www.catonmat.net/http-proxy-in-nodejs/)

我不知道为什么。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-07-26T17:50:08.453

这是另一种方法，

```
ClientConfiguration config = new ClientConfiguration();
config.setProtocol(Protocol.HTTPS);
config.setProxyHost("YOUR_PROXY_IP");
config.setProxyPort(YOUR_PROXY_PORT);

BasicAWSCredentials creds = new BasicAWSCredentials("YOUR_KEY", "YOUR_SECRET"); 
s3Client = AmazonS3ClientBuilder.standard()
                .withClientConfiguration(config)
                .withRegion(Regions.US_EAST_2)
                .withCredentials(new AWSStaticCredentialsProvider(creds))                   
                .build(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-01T20:56:48.207

我也遇到了这个问题。我在调试器中逐步检查了所有内容，发现问题的原因是 Amazon S3 客户端代码需要一个名为的标头标签`"ETag"`，但响应包含`"Etag"`，带有小写字母`"t"`。

标头被放入 a `Map<String,String>`，因此当 Amazon S3 客户端代码调用`get("ETag")`时，它会返回`null`，然后将其馈入`hexData()`方法并炸毁。

这似乎发生在许多使用非 Amazon S3 服务或通过 Web 代理访问 Amazon 的 AWS S3 服务的人身上。

`Headers.ETAG`除了获取 Amazon 客户端源、将值更改为`"Etag"`并自己构建之外，我不知道有什么解决方法`JAR`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-11T14:25:52.667

将协议更改为 HTTPS。

$clientCfg.setProtocol(Protocol.HTTPS);

# eclipse - 在 Eclipse 编辑器中计算所选行

> ID：10512211
> 
> 赞同：4
> 
> 时间：2012-05-09T08:10:27.113
> 
> 标签：eclipse

如何在 Eclipse IDE 的编辑器底部获取所选行的计数？

我想知道我在编辑器中选择了多少行，这将有助于计算类中定义的参数数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:55:16.553

看看`AbstractTextEditor.getCursorPosition()`。它从源查看器、插入符号和文档中获取行号。

```
 StyledText styledText= fSourceViewer.getTextWidget();
 int caret= widgetOffset2ModelOffset(fSourceViewer, styledText.getCaretOffset());
 IDocument document= fSourceViewer.getDocument();
 int line= document.getLineOfOffset(caret); 
```

# jquery - 如何同时使用live和trigger？

> ID：10512212
> 
> 赞同：4
> 
> 时间：2012-05-09T08:10:34.203
> 
> 标签：jquery

我正在通过 Ajax 加载一些内容。加载完成后，我想`click`在锚元素上触发一个事件。但这似乎不起作用。我怎样才能使用`trigger`和`live`在一起？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T08:19:01.533

你可以像这样触发它：

```
<div id="test">CLICK</div>​ 
```

* * *

```
$('#test').live('click', function() {
    window.alert("works");            
});

$(document).trigger({ 
    type:   'click',
    target: $('#test')[0]
}); 
```

​ 基本上，实时处理程序绑定到文档元素，因此您需要发送事件

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T08:15:31.440

**绑定现场活动：**

```
$('PARENT_OF_SOME_ELEMENT').on('EVENT_NAME', 'SOME_ELEMENT', function() {

    // SOME_ELEMENT will be the target

}); 
```

或使用委托（）；

```
$('PARENT_OF_SOME_ELEMENT').delegate('SOME_ELEMENT', 'EVENT_NAME', function() {

    // SOME_ELEMENT will be the target

}); 
```

**触发：**

```
$('SOME_ELEMENT').EVENT_NAME(); //eg. $('SOME_ELEMENT').click(); 
```

或者

```
$('SOME_ELEMENT').trigger('EVENT_NAME'); //eg. $('SOME_ELEMENT').trigger('click'); 
```

**在事件中触发事件**

```
$('AN_EVENT_HOLDER').EVENT_NAME(function() {

   $('SOME_ELEMENT').EVENT_NAME();  // or $('SOME_ELEMENT').trigger('EVENT_NAME'); as illustrated above

}); 
```

例如

```
$('.i_have_an_event').on('click', function() {
   $('SOME_ELEMENT').click();
}); 
```

***笔记***

1.  这里`SOME_ELEMENT`和`PARENT_OF_SOME_ELEMENT`是有效的选择器。

2.  不要使用`.live()`，因为它已被弃用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T08:13:48.100

至于`.live()`从 jQ 1.6.8 弃用的方法，请使用以下`.on()`方法：

```
$(document).on('click','a.myAnchor', function(){
    // do your stuff
});

$('#yourElement').on('click', function(){
  $('a.myAnchor').click(); // trigger the dynamically created 'anchor' stuff
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T08:25:14.467

```
$(function() {
    $('<parent element selector>').on('click', '<target element selector>', function () {
        // do your stuff
        $('<anchor selector>').trigger('click'); 
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T08:16:09.443

用这个：

```
$('a#achTest').live('click', function(){
 // some code
});

$('a#achTest').trigger('click'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-18T08:00:24.177

这是另一种对我有用的方法。

```
$('#test').live('click', function() {
    alert("It works!");            
});

$('#test')[0].click(); 
```

**这里的重要部分是：**

```
$('#test')[0].click(); 
```

# parameters - jenkins：如何根据其他参数评估参数值

> ID：10512218
> 
> 赞同：0
> 
> 时间：2012-05-09T08:11:02.633
> 
> 标签：parameters, continuous-integration, jenkins

我想创建一个 jenkins 作业，它将具有以下参数定义：

```
iteration=13
folder_name=iter_${iteration} 
```

我希望在运行时 folder_name 将根据迭代的值获得它的值。

不幸的是，詹金斯似乎没有根据另一个参数评估参数值。

你知道可以做到这一点的好插件吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:19:12.570

你可以试试[EnvInject 插件](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)。尝试设置一个新的构建步骤，在其中放置第二个变量：

> 文件夹名称=iter_${迭代}

不过，我不能 100% 确定这是否有效。

# c# - 在 C# 中的线程之间切换

> ID：10512223
> 
> 赞同：3
> 
> 时间：2012-05-09T08:11:27.007
> 
> 标签：c#, multithreading

我有一个多标签软件。在每个选项卡中，我想运行不同的线程。当我从一个选项卡切换到另一个选项卡时，我会暂停相关线程，然后为新选项卡启动一个新线程。

有时当我快速更改选项卡时，我的线程停止运行并且没有给我异常或错误。我通过调试了解这种情况。对于这种情况，我看到“线程窗口”中出现了许多相同的线程，但它们都没有运行。

我认为暂停和启动线程不是编程的好主意，但我应该怎么做才能避免这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:14:39.123

通常的设计是拥有一个 UI 线程和多个工作线程：

*   当有要执行的任务时启动，然后在任务完成时“消失”
*   正在后台永久运行以响应某些事件（即添加到队列中的项目）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T09:27:54.787

“我有一个多标签软件。”

好的。

'在每个选项卡中，我都想运行不同的线程'

我假设您的意思是每个选项卡都有自己的线程实例，它单独与该选项卡交互。好的，好的，这不是一个不寻常的设计。也许您在每个选项卡上与不同的网站进行交互，类似这样。没关系。

“当我从一个选项卡切换到另一个选项卡时，我会暂停相关线程，然后为新选项卡启动一个新线程”

不好！你为什么做这个？你不能只切换标签吗？其他线程可以在不可见页面上继续更新/任何组件（使用 Invoke/BeginInvoke），并且当您切换回时，将显示更改。

嘿！编码器！别管那些线程！

'有时当我快速更改标签时，我的线程停止运行并且没有给我异常或错误。我通过调试了解这种情况。对于这种情况，我看到“线程窗口”中出现了许多相同的线程，但它们都没有运行'

我不惊讶。为每个选项卡启动一个线程，不管它做什么，只要让它继续下去。

“我认为暂停和启动线程不是编程的好主意，但我应该怎么做才能避免这个问题？”

别干了！用户级别的微管理线程几乎总是以灾难告终。

# java - 创建 Log4j xml 日志文件

> ID：10512224
> 
> 赞同：0
> 
> 时间：2012-05-09T08:11:32.203
> 
> 标签：java, xml, log4j

我将 log4j 用于我的日志记录目的，我的所有日​​志文件都采用 .log 格式，其结构简单如下：

> INFO [2012-05-08 09:57:57,919] [main] 创建表员工通过。

我听说日志文件可以以 xml 格式输出，但找不到确切的配置。

> log4j.rootCategory=信息，C，R
> 
> log4j.appender.C = org.apache.log4j.ConsoleAppender
> 
> log4j.appender.C.layout = org.apache.log4j.PatternLayout
> 
> log4j.appender.C.layout.ConversionPattern = %5p [%d] [%t] %m%n
> 
> log4j.appender.R = org.apache.log4j.DailyRollingFileAppender
> 
> log4j.appender.R.layout=org.apache.log4j.PatternLayout
> 
> log4j.appender.R.layout.ConversionPattern= [%d] [%t] %5p %c %x - %m%n
> 
> log4j.appender.R.File = 日志/test_suite.log
> 
> log4j.appender.R.DatePattern = '.'yyyyMMdd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:22:00.243

[`org.apache.log4j.xml.XMLLayout`](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/xml/XMLLayout.html)用作 appender 布局。这会在`<log4j:event />`标签中创建日志条目。

我相信这`Layout`是从 Log4J 4.2.16 及更高版本引入的，但我可能错了。

# sql-server-2008 - 全文搜索返回排名包含查询

> ID：10512228
> 
> 赞同：3
> 
> 时间：2012-05-09T08:11:39.327
> 
> 标签：sql-server-2008, full-text-search

我已经在 Sql Server 2008 表之一上实现了全文搜索。使用包含搜索某些单词时，查询工作正常。

我想根据全文搜索的排名功能过滤掉结果。我正在写以下查询

```
SELECT rank, * FROM Mas_text
 WHERE CONTAINS(text, 'Wanted and Engineers') 
```

此查询无法编译并给我“无效的列名'RANK'”错误

请建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T08:18:00.893

**rank**函数不适用于 CONTAINS 查询。您必须使用 CONTAINSTABLE 才能获得排名。见[这里](http://msdn.microsoft.com/en-us/library/cc879245.aspx)。

应该看起来像这样：

```
SELECT Mas_text.*, k.rank
FROM Mas_text 
    INNER JOIN CONTAINSTABLE(Mas_text, text, 'Wanted and Engineers') k
    ON Mas_text.primarykey = k.[Key] 
```

# asp.net - User.Identity.IsAuthenticated 在通用 asp.net 处理程序中的使用

> ID：10512229
> 
> 赞同：2
> 
> 时间：2012-05-09T08:11:40.520
> 
> 标签：asp.net, httphandler, wif

我已经使用 WIF 设置了 STS，并希望公开用户是否已登录，以便 RP 可以确定用户是否已登录，而无需用户重定向到 STS 并返回。如果用户已登录，RP 上将发生不同的流程，因此在此过程中了解但不强制登录很重要。

我的计划是在 STS 上创建一个简单的通用处理程序，当通过 HttpWebRequest 命中时，返回 context.User.Identity.IsAuthenticated 的输出（其中 context 是传递给 ProcessRequest 方法的 HttpContext ：

```
public void ProcessRequest(HttpContext context)
{
    context.Response.ContentType = "text/plain";

    if (context.User != null && context.User.Identity.IsAuthenticated)
        context.Response.Write("True");
    else
        context.Response.Write("False");
} 
```

我的问题是，如果用户已登录并且我直接点击此处理程序，它会返回 True，但如果我以编程方式从 RP 中点击处理程序，它会返回 False（实际上 Identity 为空）。我这样做是完全错误的吗？从 RP 中点击处理程序将返回 RP 上用户的状态，还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:49:34.970

此处理程序仅在您随请求发送 STS 身份验证 cookie 时才有效（返回 true）。只有您的网络浏览器可能有这些 cookie。因此它不能通过 HttpWebRequest 来完成。当您直接从浏览器调用处理程序时，这也是它起作用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T16:38:13.757

我知道这是一个有点旧的线程，但答案可能会帮助其他登陆此页面的人。

身份验证背后的神奇之处在于会话和身份验证 cookie，它们从您的 STS 应用程序发送到用户的客户端（例如浏览器）。我不确定您的 STS 和 RP 应用程序是如何设计和通信的，所以我将保持通用的答案。要将身份验证状态通知您的 RP 应用程序，您需要：

1）要么以某种方式在用户的客户端和您的 RP 应用程序之间共享 cookie。在这种情况下，恐怕您将不得不构建自己的客户端并让您的用户使用它来访问 STS 应用程序。这是因为您无法从标准浏览器获取 cookie。您构建的客户端将 cookie 发送到您的 RP 应用程序可以获取它们的地方，并将它们放置在 HttpWebRequest.CookieContainer 中，然后可以成功获取处理程序的结果。我只是解释这种方法是说它是可行的，并说明它是多么复杂和扭曲。

2) 否则您将不得不跟踪用户的登录状态。您的处理程序必须从调用 RP 应用程序获取用户 ID，然后检查该用户是否已登录（即该用户有一个活动会话），而不是检查 context.User。例如，您可以在数据库中跟踪或存储会话，或者查看以下线程以了解访问活动会话的一些方法：

[列出所有活动的 ASP.NET 会话](https://stackoverflow.com/questions/1470334/list-all-active-asp-net-sessions)

# android - 使用客户经理获取 OAuth 令牌

> ID：10512230
> 
> 赞同：2
> 
> 时间：2012-05-09T08:11:41.423
> 
> 标签：android, oauth

我正在尝试使用 AccountManager 通过以下代码获取 Auth 令牌：

```
Account account = ...;
accountManager.getAuthToken(account, "ah", false,
            new AuthTokenCallback(), null);
accountManager.getAuthToken() 
```

此令牌对 OAuth 有效吗？或者它是一个不同的令牌？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T22:37:31.130

我认为对于 OAuth，您必须使用“oauth2:URL_OF_THE_SERIVE”而不是“ah”。

服务的可能 URL（用于获取电子邮件地址等用户信息）是：[https ://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)

# c++ - CGAL：法线和加权 3D 三角测量之间的差异

> ID：10512237
> 
> 赞同：2
> 
> 时间：2012-05-09T08:12:29.160
> 
> 标签：c++, geometry, triangulation, cgal

对于一组 3D 点，它们都由它们的笛卡尔坐标指定，CGAL 的 3D Delaunay 三角剖分与其加权（如此[处](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Triangulation_3_ref/Class_Regular_triangulation_3.html#Cross_link_anchor_1366)所述）或常规 3D 三角剖分之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T09:02:28.490

如您所知，给定一组点，在这组点上定义了许多三角剖分。Delaunay 三角剖分是这样一种，对于每个四面体，外接球体不包含任何其他点，而是包含四面体的顶点。如果不超过 4 个点是同球的，则它是唯一的。常规三角测量使用与每个点相关的权重来定义类似的空虚标准，如[本页](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Triangulation_3/Chapter_main.html#Section_39.3)所述，使用加权点的幂。特别是，在常规三角剖分中，如果一个点不在凸包上并且其权重与其邻居相比太小，则它可能会被隐藏（不会出现在具有关联顶点的三角剖分中）。

# javascript - javascript 单击并隐藏问题 firefox

> ID：10512241
> 
> 赞同：0
> 
> 时间：2012-05-09T08:12:40.377
> 
> 标签：javascript, jquery, hide

我正在尝试创建一个菜单，当您单击页面上的其他任何位置时，div 将被隐藏。这适用于除 Firefox 之外的所有应用程序。在 Firefox 中，当您单击该部分中的一个链接时，它不会转到该链接，它只会关闭 div。

代码：

```
$(document).mouseup(function(e){//removes menu when clicked on any other part of page
    if($(".menuone:visible").length > 0  ){
        $('.menuone').hide();
    }
}); 
```

HTML：

```
<div class="menuone">
<div class="col1">
<ul><li>Example link</li></ul>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:23:49.443

您应该设置一个变量来跟踪 .menuone div 的悬停状态。

那么你的 if 语句将是：

```
if($(".menuone:visible").length > 0 && !menuHover ) 
```

这应该够了吧。

希望能帮助到你 ：）

**编辑：**

```
var menuHover = false;

$(".menuone").bind('mouseenter mouseleave',function(e){
    menuHover = e.type == 'mouseenter';
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:28:45.870

[我喜欢John Resig](http://ejohn.org/blog/learning-from-twitter/)网站上提到的想法：

```
var outerPane = $details.find(".details-pane-outer"),
    didScroll = false;
$(window).scroll(function() {
    didScroll = true;
});

setInterval(function() {
    if ( didScroll ) {
        didScroll = false;
        // Check your page position and then
        // Load in more results
    }
}, 250); 
```

# django - 什么时候使用 Django 模板标签“with”是个好主意？

> ID：10512242
> 
> 赞同：0
> 
> 时间：2012-05-09T08:12:46.470
> 
> 标签：django, django-templates

我知道[`with`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#with)标签的最大目的之一是在模板中“缓存复杂的变量名”。

但是什么时候使用它是个好主意呢？

我假设如果我曾经使用`count()`, `all()`,`filter()`或`get()`使用相同的模板变量访问数据库，那么我应该使用`with`.

但是对于简单的字段查找`user.username`呢？在一个特定的模板中，我会调用`user.username`很多次。

我应该使用`with`for`user.username`或者甚至可以通过字典从视图中传递一个简单的字符串吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:52:51.417

使用`with`for的唯一原因`user.username`是您不喜欢每次都输入长名称。该查找几乎没有开销，因此尝试缓存它是没有意义的。

即使是前向外键和一对一关系，如`user.userprofile.name`，在您第一次使用它们时也会被 ORM 自动缓存，因此使用它们也没有什么意义`with`。

# asp.net-mvc-3 - 使用 MvcSite 映射 Mvc3 动态创建子菜单

> ID：10512244
> 
> 赞同：0
> 
> 时间：2012-05-09T08:13:07.470
> 
> 标签：asp.net-mvc-3, submenu, asp.net-mvc-sitemap

我创建了一个包含菜单项的 MvcSite 地图，此站点地图使用 @Html.MvcSiteMap.Menu(false,true,true) 显示在共享布局页面上

> > 我在 MenuHelpModel.cshtml 文件中有一个自定义代码现在我想在用户登录时创建一些菜单项我正在获取用户所属的组织数量，这是动态的“用户可以是 n 个组织的成员”

有什么方法可以在 MenuHelpModel 中编写动态菜单，还是需要在布局中编写代码并使用 Jquery 来填充菜单？

有什么方法可以在 jQuery 中使用 ViewBag 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:59:15.050

这可以按照您需要的方式完成。首先，您需要创建一个“授权”布局页面。在此页面中，您可以按照上面的代码设置 MvcSiteMap。授权页面加载此母版页。您使用 DynamicNodeProvider 类来加载基于 Authenticated UserID 的组织。

# iphone - 如何动态更改正在访问的属性

> ID：10512246
> 
> 赞同：0
> 
> 时间：2012-05-09T08:13:22.243
> 
> 标签：iphone, objective-c, ios, cocoa-touch, cocos2d-iphone

我正在编写一个有 40 个关卡的游戏，并且我将所有关卡数据存储在一个 .plist 中。这很好用，但是现在我正在尝试实现多个级别，我正在寻找一种方法来基于级别调用单例上的属性，而无需手动编写开关/案例之类的代码。我想做类似以下的事情：

这是我用来提取数据的代码，但如您所见，我已经硬编码了“dictionaryLevel1Data”属性。

```
int capacity = [[sharedDataManager.dictionaryLevel1Data objectForKey:@"typeWarrior"] intValue]; 
```

我想设置一个变量，并根据我知道这样行不通的方法调用单例的属性。注意我是如何替换“dictionaryLevel1Data”的

```
NSString level = @"1";

int capacity = [[sharedDataManager.[NSString stringWithFormat:@"dictionaryLevel%@Data", level] objectForKey:@"typeWarrior"] intValue]; 
```

任何关于我如何实现这一点的建议将不胜感激。我总是可以为每个级别手动设置一个开关/案例，但是每个级别有 40 个级别和 50 多种不同的对象类型，这会很粗糙，似乎必须有更好的方法。我讨厌硬编码值，喜欢通过对通过泛型类和方法运行的变量进行简单更新来简化我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:27:18.207

你为什么不这样做；

使用2级数据图；

```
//sharedDataManager.levelData is a NSDictionary that contains lots of NSDictionarys
NSDictionary *levelData = [sharedDataManager.levelData objectForKey:[NSString stringWithFormat:@"dictionaryLevel%@Data", level]];

int capacity = [levelData objectForKey:@"typeWarrior"] intValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:30:46.967

如果您想这样做，那么您可以使用 Key-Value-Coding 从字符串中获取属性值。这篇文章中接受的答案显示了如何使用它（非常简单）：[Objective-C get a class property from string](https://stackoverflow.com/questions/6179427/objective-c-get-a-class-property-from-string)

对于您的任务，它看起来像这样：

```
int capacity = [[[sharedDataManager valueForKey:[NSString stringWithFormat:@"dictionaryLevel%@Data", level]] objectForKey:@"typeWarrior"] intValue]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:34:02.227

您可以使用 ：

```
NSString level = @"dictionaryLevel1Data"
SEL methodSelector = NSSelectorFromString(level);
if ([sharedDataManager conformsToSelector:@selector(methodSelector)]) {
    NSDictionary *levelData = [sharedDataManager performSelector:methodSelector];
    // Do whatever you need here
} 
```

我假设所有的 dictionaryLevelData 都是合成的，并且有 getter 作为他们的名字。

（请注意，我没有编译它，但它应该可以工作）

# versioning - “旧版”和“稳定版”有什么区别？

> ID：10512247
> 
> 赞同：22
> 
> 时间：2012-05-09T08:13:23.293
> 
> 标签：versioning

我正在使用 JQuery Mobile，有两个可用版本：稳定版和旧版。我对后一种不熟悉。

什么是旧版？或者与稳定版有什么区别？

推荐在生产现场使用哪一个？

非常感谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-09T08:19:49.307

遗留版本是仍然可用（并且可能受支持）的旧稳定版本，因为有人可能需要它（例如，插件依赖项不适用于最新版本），而稳定版本是最新的稳定版本（它将最终成为旧版）。

所以如果没有理由不这样做，就选择稳定版。

# macos - 未知的伪操作：.global

> ID：10512248
> 
> 赞同：4
> 
> 时间：2012-05-09T08:13:24.270
> 
> 标签：macos, assembly

我正在尝试编译我们在 OS 类上获得的简单操作系统代码。它在 Ubuntu 下运行良好，但我想在 OS X 上编译它。我得到的错误是：

```
[compiling] arch/i386/arch/startup.S ...
arch/i386/arch/startup.S:8:Unknown pseudo-op: .extern
arch/i386/arch/startup.S:8:Rest of line ignored. 1st junk character valued 107 (k).
arch/i386/arch/startup.S:11:Expected comma after segment-name
arch/i386/arch/startup.S:13:Unknown pseudo-op: .global
arch/i386/arch/startup.S:13:Rest of line ignored. 1st junk character valued 97 (a). 
```

这是 [那个文件的源代码，](http://pastebin.com/r2MEbp0f)这里是[makefile](http://pastebin.com/mL4LA9dE)

因此，如果有人知道该怎么做，我将不胜感激:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T14:44:23.077

当您使用 OS/X 进行编译时，您将使用 X-Code 的旧版本`as`. 这意味着您将不得不忍受一些稍旧的语法。这个[其他答案](https://stackoverflow.com/questions/2904597/building-arm-assembler-vorbis-decoder-lib-tremolo-for-iphone)涵盖了其中一些问题。

至少你需要`.global`用`.globl`. 您可以删除`.extern`，因为默认情况下所有符号都被视为外部符号。对于部分定义，您应该查阅[`gas`手册](http://linux.web.cern.ch/linux/scientific4/docs/rhel-as-en-4/section.html)；我相信汇编程序要求您定义节标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:04:15.310

我认为它应该是“.globl”而不是“.global”

# google-visualization - 一页中有多个谷歌图表 - 奇怪的事情正在发生

> ID：10512249
> 
> 赞同：0
> 
> 时间：2012-05-09T08:13:25.067
> 
> 标签：google-visualization

这是我的代码：

```
 <html>
  <title>report</title>
  <head>

  <script type="text/javascript" src="https://www.google.com/jsapi"></script>

  <script type="text/javascript">
     google.load("visualization", "1", {packages:["corechart"]});

     function soso(){
       var data_flow = new google.visualization.DataTable();
       data_flow.addColumn('string', 'Version');
       data_flow.addColumn('number','flow');
       data_flow.addRows([['20120125',466.0],['20120130',173.0],['20120203',160.0],['20120208',529.0],['20120213',210.0]]);
       var options = {width: 2200, height: 540,title: ''}; 
       var chart_flow= new google.visualization.LineChart(document.getElementById('checkin-column'));
       chart_flow.draw(data_flow, options);
     }
     function loveu()
     {
        var data_flow_1 = new google.visualization.DataTable();
       data_flow_1.addColumn('string', 'Version');
       data_flow_1.addColumn('number','flow');
       data_flow_1.addRows([['20120125',466.0],['20120130',173.0],['20120203',160.0],['20120208',529.0],['20120213',210.0]]);
       var options5 = {width: 2200, height: 540,title: ''};
       var chart_flow_1= new google.visualization.LineChart(document.getElementById('redemption-table'));
       chart_flow_1.draw(data_flow_1, options5);
     }
     function drawChart() {
       soso();
       loveu();

     }
      google.setOnLoadCallback(drawChart);
   </script>
   </head>
   <body>
  <h4>dfs</h4><br>
  <br><br>
  <div id="checkin-column"></div>
    <p></p>
    <div id="redemption-table"></div>
   </body>
   </HTML> 
```

当我删除：“< h4 > dfs </ h4 >”时，我的图表在 iexplorer 中工作正常，但是当我不删除它时，第一个图表工作正常，但第二个图表的轴没有出现！ ！试试看，你会看到（在 Internet Explorer 上）。我需要帮助来解决这个问题，当同一页面中有多个图表时，我会面临这些图表的奇怪行为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:12:48.820

问题：我在一页上有 3 个图表，但第 3 个图表的轴未在 IE 中显示

解决方案：我将 3 个 div 作为表格中的单独行，所有 3 个图表现在都显示了它们的轴！

希望这可以帮助。干杯

# windows - 从 Windows 批处理文件立即重新启动 - 绕过系统设置更改对话框

> ID：10512250
> 
> 赞同：1
> 
> 时间：2012-05-09T08:13:25.613
> 
> 标签：windows, batch-file

我不确定这是否更适合 stackoverflow 或 serverfault，昨天将相同的问题发布到 serverfault 但没有收到回复。

我编写了一个批处理文件来在第一次启动时检测显卡类型，静默安装其驱动程序，然后在用户看不到任何东西的情况下强制重启。

```
if exist "firstboot.dat" (
start /wait "" "DetectGPU.exe"
del "firstboot.dat"
)

// ...same as below for each possible graphics card in the field
if exist "NVIDIA GeForce 9300 GE.dat" (
Drivers\9300\setup.exe /s /hide_progress /hide_splash
del "NVIDIA GeForce 9300 GE.dat"
shutdown -r -f -t 0
) 
```

检测到卡并成功安装了驱动程序，但在 PC 可以重新启动之前，系统设置更改对话框出现，警告我 Windows 已安装新设备，我必须重新启动才能使设置生效。这会停止执行关机命令。如何在出现此消息之前让 PC 重新启动，或者如果我可以在安装驱动程序后处理对话框并选择在那里重新启动，那也很棒。

谢谢，

账单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:27:41.157

如果您使用的是 Win7 或可能是 Vista（虽然不确定），您可以尝试

```
shutdown /r /p /f 
```

这被描述为在没有超时或警告的情况下关闭系统。这结合起来`/f`可能足以让它关闭。

# android - 在textView中显示基本操作结果android

> ID：10512254
> 
> 赞同：0
> 
> 时间：2012-05-09T08:13:34.193
> 
> 标签：android, textview

我必须在Android中展示一些操作，，，

但我有一些菜鸟问题，

```
public void calculateButtonPressed() {
        // TODO Auto-generated method stub
        Button button = (Button) findViewById(R.id.result);

        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Log.d("myTag",  "result biatch");

                String text=et.getText().toString();

                //toast msg
                //Toast msg = Toast.makeText(getBaseContext(),text, Toast.LENGTH_LONG);
                // msg.show();

                //set Text
                tv.setText(text);

                //result_tv.setText("copao");

                int total = 1+2+3;

                result_tv.setText(total);

            }

        });

    } 
```

所以应用程序崩溃了，因为我没有正确使用变量？？

如果我打印`result_tv.setText("copao");`它工作正常

但在我的基本操作中，应用程序崩溃了，

```
int total = 1+2+3;

result_tv.setText(total); 
```

所以我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:16:06.873

它假设您的**总**价值为*字符串资源 Id* ，该资源 Id在类中可能无法`R`作为有效资源 Id 使用，从而导致应用程序崩溃。

改变：

```
result_tv.setText(total); 
```

至：

```
result_tv.setText(String.valueOf(total));
//OR
result_tv.setText(total + ""); //to parse it as string 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T08:19:11.867

利用

```
 result_tv.setText(total+""); or result_tv.setText(String.valueOf(total)); 
```

# ios - 字符串IOS中的上标字符

> ID：10512255
> 
> 赞同：1
> 
> 时间：2012-05-09T08:13:43.783
> 
> 标签：ios, xcode, character-encoding, tableview, superscript

我在 xcode 中的应用程序有一个带有一些产品数据的表格视图。我的一款产品的名称中有一个上标 e。如何在字符串中使用上标字符，例如： text ^e

我可以让它处理数字： text\u2070 -> text ⁰或 text\u2071 -> text ¹。但是如何处理其他角色呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:49:08.707

tl;dr: NSString 不支持超级/子脚本的概念。这或多或少是一个 UI 格式问题。

一种可能的解决方案是在代码中动态添加 UILabel 而不是界面构建器。您可以添加第二个 UILabel，其字体大小较小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-16T07:41:56.770

添加 CoreText 框架，导入 CoreText.h，并使用 UIlabel.attributedText - 它完全支持 NSAttributedString。已经在SO上反复询问和回答。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-27T11:08:05.450

> 对于下标，使用 kCTSuperscriptAttributeName 的值为@-1。
> 
> 根据文件
> 
> @discussion 值必须是 CFNumberRef。默认值为 int 值 0。如果指定字体支持，值 1 启用上标，值 -1 启用下标。
> 
> extern const CFStringRef kCTSuperscriptAttributeName CT_AVAILABLE(10_5, 3_2);

```
Example- [lblHeader setText:@“Headers [Alpha1 – text”];

        NSMutableAttributedString *headerSubscript = [[NSMutableAttributedString alloc]initWithAttributedString: lblHeader.attributedText];

        [headerSubscript addAttribute:(NSString *)kCTSuperscriptAttributeName value:@-1 range:NSMakeRange(14,1)];      

        [lblHeader setAttributedText:headerSubscript]; 
```

# web-services - 如何在 Windows Phone 7 中访问安全的肥皂网络服务基本身份验证

> ID：10512260
> 
> 赞同：0
> 
> 时间：2012-05-09T08:14:15.830
> 
> 标签：web-services, windows-phone-7, windows-phone, basic-authentication

1.  我创建了一个网络服务“http://service.mydomain.com/MobileService.asmx”
2.  我创建了一个 Windows 移动应用程序
3.  我添加了对此 Web 服务的引用
4.  我开始编码并完成了 WP7 应用程序并部署了 we 服务
5.  然后我使用 IIS 7.5 禁用匿名身份验证并使用基本身份验证来保护我的 Web 服务。
6.  使用基本身份验证后，我添加了对我的服务的新引用，VS 2010 询问身份验证，我使用了我的用户名和密码
7.  然后，当我尝试使用新服务时，我遇到了异常。

    **Reference.cs 上的错误：**

    公共 System.IAsyncResult BeginGetArticle(MyWP7App.MyService.GetArticleRequest 请求，System.AsyncCallback 回调，对象 asyncState) { object[] _args = new object[1]; _args[0] = 请求；System.IAsyncResult _result = base.BeginInvoke("GetArticle", _args, callback, asyncState); 返回_结果；}

CommunicationException：{“远程服务器返回错误：NotFound。”}
状态描述：未经授权

```
at System.Net.Browser.ClientHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)
   at System.Net.Browser.ClientHttpWebRequest.<>c__DisplayClass2.<EndGetResponse>b__1(Object sendState)
   at System.Net.Browser.AsyncHelper.<>c__DisplayClass4.<BeginOnUI>b__0(Object sendState)
   at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
   at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
   at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
   at System.Delegate.DynamicInvokeOne(Object[] args)
   at System.MulticastDelegate.DynamicInvokeImpl(Object[] args)
   at System.Delegate.DynamicInvoke(Object[] args)
   at System.Windows.Threading.Dispatcher.<>c__DisplayClass4.<FastInvoke>b__3()
   at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
   at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
   at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
   at System.Delegate.DynamicInvokeOne(Object[] args)
   at System.MulticastDelegate.DynamicInvokeImpl(Object[] args)
   at System.Delegate.DynamicInvoke(Object[] args)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority)
   at System.Windows.Threading.Dispatcher.OnInvoke(Object context)
   at System.Windows.Hosting.CallbackCookie.Invoke(Object[] args)
   at System.Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args)
   at System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam& pResult) 
```

这就是我尝试连接到我的网络服务的方式：
在 ParsingHelper.cs 中：

```
using System;
using System.Text.RegularExpressions;
using System.Xml.Serialization;
using System.Collections.ObjectModel;
    namespace MyWP7App
    {
    [XmlRoot("root")]
    public class Categories
    {
        [XmlArray("Categories")]
        [XmlArrayItem("Category")]
        public ObservableCollection<Category> Collection { get; set; }
    }
    }
    public class Category
    {
        [XmlAttribute("ID")]
        public int ID { get; set; }
        [XmlAttribute("SubCategories")]
        public int SubCategoriesCount { get; set; }
        [XmlElement("Name")]
        public string Name { get; set; }
        [XmlArray("SubCategories")]
        [XmlArrayItem("SubCategory")]
        public ObservableCollection<SubCategory> Collection { get; set; }
    } 
```

在 MyPage.xaml.cs 中：

```
using System;
using System.Collections.ObjectModel;
using System.Linq;
using System.Windows;
using System.Windows.Controls;
using System.Xml.Serialization;
using Microsoft.Phone.Controls;
using System.Xml.Linq;

    namespace MyWP7App
    {
        public partial class CategoriesPage : PhoneApplicationPage
        {
        private ObservableCollection<Category> itemsSource;
        public ObservableCollection<Category> ItemsSource
        {
            get
            {
                return this.itemsSource;
            }
            set
            {
                this.itemsSource = value;
            }
        }

        private static MyService.MobileServiceSoapClient Service = null;

        public PanoramaMainPage()
        {
            InitializeComponent();
            if (null == ItemsSource)
                GetCategories();
            else
                imtListBox.ItemsSource = this.ItemsSource;
        }

        private void GetCategories()
        {
            Service = new MyService.MobileServiceSoapClient();

            // I tried to do the following when the service is secure, but I had the same error:
            // Service.ClientCredentials.UserName.UserName = "Username";
            // Service.ClientCredentials.UserName.Password = "Password";

            Service.GetCategoriesCompleted += new EventHandler<MyService.GetCategoriesCompletedEventArgs>(Service_GetCategoriesCompleted);
            Service.GetCategoriesAsync();
        }
        void Service_GetCategoriesCompleted(object sender, MyService.GetCategoriesCompletedEventArgs e)
        {
            try
            {
                if (e.Result == null || e.Error != null)
                {
                    MessageBox.Show("There was an error downloading the XML-file!");
                }
                if (!e.Cancelled)
                {
                    XmlSerializer serializer = new XmlSerializer(typeof(Categories));
                    XDocument document = XDocument.Parse("<root>" + e.Result.ToString() + "</root>");
                    Categories arts = new Categories();
                    arts = (Categories)serializer.Deserialize(document.CreateReader());
                    this.ItemsSourceListBox = arts.Collection;
                    imtListBox.ItemsSource = this.Items1Source;
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
            Service.Abort();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:19:42.537

看看这篇文章 [http://msdn.microsoft.com/en-us/library/ff637320(VS.96).aspx](http://msdn.microsoft.com/en-us/library/ff637320(VS.96).aspx)

这篇文章详细介绍了如何传递用户名/密码。这是页面中的一个片段

```
using (OperationContextScope contextScope = new OperationContextScope(svc.InnerChannel))
{
    byte[] bc = System.Text.Encoding.UTF8.GetBytes(@"username" + ":" + "password"); // the string passed after basic:
    HttpRequestMessageProperty httpProps = new HttpRequestMessageProperty();
    httpProps.Headers[HttpRequestHeader.Authorization] = "Basic " + Convert.ToBase64String(bc);
    OperationContext.Current.OutgoingMessageProperties[HttpRequestMessageProperty.Name] = httpProps;
    // call the service.
} 
```

# mysql - INSERT 的 MySQL 语法错误

> ID：10512263
> 
> 赞同：0
> 
> 时间：2012-05-09T08:14:19.577
> 
> 标签：mysql, c, insert, syntax-error

这个精确的代码以前在我的旧机器上工作过，但我收到了这个错误（在 Mac OSX 10.7 上）。

C代码是：

```
printf("%s\n",query);

if (mysql_query(conn,query)){
    fprintf(stderr, "%s\n", mysql_error(conn)); 
} 
```

输出是：

```
INSERT INTO comment (unum,cat_subject,cat_major,cat_minor,unmod) 
 VALUES (1,1,1,0,'The cat was lazy.') 

You have an error in your SQL syntax; 
 check the manual that corresponds to your MySQL server version 
 for the right syntax to use near ','The cat was lazy.')' at line 1 
```

原始`printf`语句创建了两行文本，但为了便于阅读，我将它们包装起来。

在我看来一切都很好！以下在 PHP 中适用于同一个表（使用正确的`bindParam`语句）：

```
$STH=$DBH->prepare("INSERT INTO comment (unum,cat_subject,cat_major,cat_minor,unmod) VALUES (:u,:s,:ma,:mi,:t)"); 
```

怎么了？

（顺便说一句：我试过用`"`代替`'`但没有区别。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:22:58.570

（*升级到答案*）

看来您可能在字符`query`之后有不可打印的`0`字符。尝试对字符串的字节进行十六进制转储，看看是否有任何可疑之处：

```
char* c;
for (c=query; *c; c++) printf("%02x",*c); 
```

如果您将变量的未知内容连接到 SQL 中，我强烈建议使用 MySQL 的[预处理语句 API](http://dev.mysql.com/doc/en/c-api-prepared-statements.html)将变量作为参数传递给 MySQL，以避免 SQL 注入；这还将执行此类参数到目标列类型的基本类型转换 - 如果您需要更多地控制变量的清理，则需要在将参数传递给 MySQL 之前在应用程序中执行此操作。

# git - 通过 git-tfs 使用成熟的 git 而不是 tfs 的原因

> ID：10512268
> 
> 赞同：3
> 
> 时间：2012-05-09T08:14:43.353
> 
> 标签：git, version-control, tfs, git-tfs

对我来说，使用纯 git 似乎是完全显而易见的，但我不得不阐明为什么使用纯 git 是通过 git-tfs 使用 TFS 的更好解决方案。

我工作的公司有使用 TFS 的“政策”，尽管我团队中的开发人员已成功游说使用 git-tfs 桥。

我想提倡开发团队不要使用 git-tfs（我对此知之甚少），而是使用纯 git 来对抗托管在网络上的 git repo。然后，托管 git 存储库的服务器上的计划任务将定期将主分支的内容拉入 TFS 存储库，以安抚企业 TFS 之神。

谁能帮我阐明我的论点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T22:58:48.037

在我看来，实际使用托管在网络上的 git repo 的主要优点是您将有一个共同的地方来推送分支和请求拉取。

[我是GitHub Flow](http://scottchacon.com/2011/08/31/github-flow.html)（GitHub 员工使用的工作流程）的忠实粉丝。基本上，每个功能/错误都应该有自己的分支。您将该分支与远程存储库同步，在其上运行测试，然后`git request-pull`创建一个发送给团队成员的拉取请求。团队成员审查更改，批准它，然后它就会上线。

如果您经常使用分支，拥有一个远程 git 存储库会非常好。它为您提供了一个在将更改与主分支合并之前共享更改的地方。

我使用了 git-tfs 一段时间后停止了，因为我的 TFS 工作区都搞砸了。这可能是可以纠正的，但我没有花时间去弄清楚。我想我的问题不是您可能遇到的唯一问题，但我不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:21:53.540

可以让管理人员满意并拥有 git 的所有功能。这是我们一直在考虑做的事情，因为我们团队的一部分人喜欢 TFS，一部分人喜欢 git。我们考虑过在本地服务器的某个地方创建一个“祝福”的 git 存储库，并使其自动化，以便推送到祝福的 repo 将自动签入到 TFS ......或者，如果您更喜欢拥有祝福的 repo 需要手动运行的看门人`git-tfs checkintool`

当然，您必须编写一些脚本等才能使其自动运行，但这意味着您可以在日常工作中使用 vanilla git。

# c++ - 在 C++ 中用三个线程退出两个并发队列

> ID：10512269
> 
> 赞同：2
> 
> 时间：2012-05-09T08:14:57.837
> 
> 标签：c++, multithreading, boost, concurrency, queue

我在退出多线程、多队列 C++ 程序时遇到问题。该图显示了队列和线程结构。图表在这里：http: [//i.stack.imgur.com/JGhXs.png](http://i.stack.imgur.com/JGhXs.png)

简而言之，我有三个线程和两个并发队列。second_handler(second_thread) 从第一个队列中弹出并推送到第二个队列。一切（似乎）工作正常，直到我想通过按键盘键退出程序。我收到此错误：

在抛出 'boost::exception_detail::clone_impl >' 的实例后调用终止 what(): boost::lock_error Aborted

这是我的代码： *主要*

```
int main() {
        startMultiThreading();
        cout <<"I"<<endl;
    } 
```

*开始多线程*

```
void startMultiThreading() {
    boost::thread_group someVar_workers;
    boost::thread_group someOtherVar_workers;

    concurrent_queue<someVar* > someVar_queue(&someVar_workers);
    concurrent_queue<someOtherVar*> someOtherVar_queue(&someOtherVar_workers);

    boost::thread *first_thread = new boost::thread(first_handler, &someVar_queue);
    boost::thread *second_thread = new boost::thread(second_handler, &someVar_queue, &someOtherVar_queue);
    boost::thread *third_thread = new boost::thread(third_handler, &someOtherVar_queue);

    someVar_workers.add_thread(first_thread);
    someVar_workers.add_thread(second_thread);

    someOtherVar_workers.add_thread(second_thread);
    someOtherVar_workers.add_thread(third_thread);

    while (true) {
        if (thread_should_exit) {
            cout << "threads should be killed" << endl;
            while (!someVar_queue.empty()) {
                usleep(1000);
            }
            someVar_workers.remove_thread(second_thread);
            while (!someOtherVar_queue.empty()) {
                usleep(1000);
            }
            someOtherVar_queue.cancel();
            someVar_workers.join_all();
            someOtherVar_workers.remove_thread(second_thread);
            someOtherVar_workers.join_all();
            break;
        }
        usleep(10000);
    }
    cout << "H" << endl;
} 
```

我想要的是完成两个队列然后正常终止的程序。我希望在程序终止之前看到“I”打印出来。这是输出：

```
 End of first_handler
    threads should be 
    second_handler is canceled
    End of second_handler
    H
terminate called after throwing an instance of 'concurrent_queue<someOtherVar*>::Canceled'
Aborted
    Press [Enter] to close the terminal ... 
```

关闭线程和队列时我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:16:07.553

首先，请参阅 KillianDS 的评论 - 您的示例太长了。

另一件事是：**永远不要直接调用析构函数！！**

析构函数是一种特殊的东西，语言保证在变量范围的末尾调用它。如果您手动调用它，它将被第二次调用，这很可能会导致未定义的行为。

[手动调用析构函数](http://www.parashift.com/c++-faq-lite/dtors.html#faq-11.5)

# javascript - 插入符号位置没有跟踪？

> ID：10512272
> 
> 赞同：2
> 
> 时间：2012-05-09T08:15:17.127
> 
> 标签：javascript, mootools, mootools-events

我想做的是将关键代码放在一个数组中，以便以后做一些有趣的事情。因此，我捕获击键，获取插入符号位置并将键代码放入数组中（在 MooTools 的帮助下）：

```
var keyArray = [];
$('form').addEvent('keyup', function(event) {
    var pos = document.activeElement.getCaretPosition();

    keyArray[pos] = event.code;
}); 
```

一般来说，这很好用。`undefined`但是，在控制台中显示完整数组时，我注意到数组中有一些值。进一步探索这一点，我发现当快速打字时，插入符号的位置似乎失去了轨道，或者反应快/慢。我制作了一个 jsfiddle 来证明这一点：http: [//jsfiddle.net/HQVR8/1/](http://jsfiddle.net/HQVR8/1/)

如果您在此示例中快速键入，您将看到一个插入符号位置序列，如

```
- 1 - 2 - 3 - 5 - 6 - 6. 
```

但是打字慢的时候

```
- 1 - 2 - 3 - 4 - 5 - 6\. 
```

当然，现在快速输入的问题是我的数组中有一个`undefined`值，我覆盖了一个数组项。所以结果是不一样的。

我的问题是我是否可以以某种方式让插入符号位置保持跟踪。我尝试过使用“本机” `selectionStart`，但结果是一样的。我还尝试在事件中捕获插入符号位置`keydown`并将其放入事件中的数组中`keyup`。没有不同。我想知道是否使用小暂停（即强制用户输入速度较慢）可以解决它，但这感觉就像一个黑客，我更喜欢一个“适当的”解决方案。希望有一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:04:53.807

您基本上是通过使用数组而不是对象来制造混乱。

数组索引是狡猾的，`sparse arrays`如果你不小心就可以创建。例如：

```
var foo = [];
foo[0] = "one!"; // foo.length = 1;
foo[2] = "two!"; // foo.length = 3, foo[1] = undefined 
```

所以如果你输入得太快而跳过返回值，它可能就是这样做的。此外，粘贴等可以将插入符号进一步向下推......

您可能可以使用一个对象，尽管在所有浏览器中都不能保证键的顺序与键的顺序 - 特别是 webkit，他们倾向于重新排序并将数字键放在对象键循环的顶部......但是如果您为键添加前缀像 "pos" + caretIndex，你应该得到 FIFO

解决您需要提取未定义的实际代码的一种方法是通过 Array.filter。

例如。

```
retArray = Array.filter(retArray, function(el) {
    return el !== undefined;
}); 
```

有了一个对象，你可以这样做：

```
console.log(Object.values(foo)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:43:55.723

经过更多测试后，它似乎是特定于`keyup`. 当我使用时，`keydown`我*确实*得到了一致的序列：http: [//jsfiddle.net/HQVR8/3/](http://jsfiddle.net/HQVR8/3/)

一个缺点是，当你在做我正在做的“价值收集”时，`keydown`它落后了一步，但在我的环境中，这只是一个小问题。`keyup`

行为上的差异对我来说似乎很奇怪：当您一次按下四个键时，`keyup`所有这些键都显示相同的插入符号位置，而`keydown`显示四个单独的插入符号位置。这看起来很奇怪，因为您一次按下它们，但同时又按下它们，所以插入符号的“读数”应该是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-29T23:30:44.620

去 JSfiddle 并摆弄这个：

a) 按下“q”，然后按下“w”，然后释放“q”，然后释放“w”（足够快以避免自动重复）。当您用一个以上的手指“快速”键入时，这种顺序经常发生:)。

b) 将任何键按下足够长的时间，以便自动重复启动。

差异显而易见

基本上，`keyUp`在释放物理键时触发，但是

*   在释放前一个键之前可以按下另一个键
*   `keyDown`在自动重复的情况下被调用，而`keyUp`不是

由于 carret 位置和任何文本区域的更新保持同步`keyDown`，因此您在监视时只会错过中间步骤`keyUp`。

在情况 (a) 中，`keyUp`处理程序看到 carret pos 从 0 跳转到 2，因为 'q' 被释放，因为在释放第一个键之前已经键入了两个字符。'w' 的释放不会改变 carret 位置，因此处理程序最终将 q 和 w 都存储在位置 2 处。

在情况 (b) 中，处理程序完全错过了重复，并且只存储了键的最后一个实例。

作为结论，使用`KeyUp`永远不会达到预期的含义。

`keyDown`可以，但就我个人而言，我宁愿钩住这个`changed`事件。

我认为检测填充该字段的机器人同样可靠（毕竟，合法用户也可能想要粘贴密码），而且您不必费心使用退格键或任何其他非键盘手段等控制键清除输入。

`keyUp`只要您不期望重建确切的输入，您就可以将其用作额外的偏执检查。例如，您可以简单地检查释放的键是否与当前光标位置的字符匹配。但坦率地说，我不确定这是否值得。

# c# - 如何使用 StructureMap 将不同的依赖项注入 WebApi 控制器

> ID：10512277
> 
> 赞同：3
> 
> 时间：2012-05-09T08:15:43.653
> 
> 标签：c#, asp.net-mvc, dependency-injection, structuremap, asp.net-web-api

目前我有一个 MVC 应用程序，它还包含 WebApi 控制器。

我已经设置了 StructureMap 以使用默认约定进行初始化，该约定处理 MVC 和 WebApi 的服务依赖项。这一切都完美无缺。

但是，我有一个身份验证服务依赖项，应该为 WebApi 注入一个不同的 MVC 实现。由于 StructureMap 具有相同的初始化引导代码，如何根据传入的请求是 WebApi 端点还是 Mvc 控制器端点进行切换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:37:45.447

不知道这是否是实现这一目标的最佳方式，但我使用 ObjectFactory.Configure 方法在启动时覆盖初始化注册表，但在 Mvc 的 DependencyResolver.SetResolver 和 WebApi 的 GlobalConfiguration.Configuration.ServiceResolver 上的每个 SetResolver 中执行此操作。设置解析器。

例如

```
 ObjectFactory.Configure(x => x.For<IAuthenticationService>() 
                        .Use(s => s.GetInstance<IMvcAuthenticationService>())); 
```

和

```
 ObjectFactory.Configure(x => x.For<IAuthenticationService>() 
                        .Use(s => s.GetInstance<IWebApiAuthenticationService>())); 
```

# android - Android：在设置 WebViewCore 之前不支持 EventHub.removeMessages(int what = 107)

> ID：10512282
> 
> 赞同：15
> 
> 时间：2012-05-09T08:16:02.617
> 
> 标签：android, android-widget, android-webview, webviewclient

我已经在 Dialog Activity 中实现了 WebView，并且正在将简单的 url 加载到 webview 中。

我的 Webview 设置为

```
wbView = (WebView) findViewById(R.id.wbView);
        wbView.setKeepScreenOn(true);
        wbView.getSettings().setJavaScriptEnabled(true);
        wbView.getSettings().setDomStorageEnabled(true);
        wbView.getSettings().setBuiltInZoomControls(true);
        wbView.setInitialScale(100);
        // wbView.getSettings().setUseWideViewPort(true);
        wbView.setScrollBarStyle(View.SCROLLBARS_OUTSIDE_OVERLAY);
        wbView.setWebViewClient(new MyWebViewClient()); 
```

和 MyWebViewClient() 包含

```
private class MyWebViewClient extends WebViewClient {
        @Override
        public void onPageFinished(WebView view, String url) {
            super.onPageFinished(view, url);
            prgBar.setVisibility(View.GONE);
        }

        @Override
        public void onReceivedSslError(WebView view, SslErrorHandler handler,
                SslError error) {
            Log.e("Error VAGARO", error.toString());
            prgBar.setVisibility(View.GONE);
            handler.proceed();
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return false;
        }
    } 
```

我在同一个 webview 中从 Asset 加载两个 HTML 文件，它工作正常，但无法加载动态 url。

[我谷歌并在http://code.google.com/p/android/issues/detail?id=21177](http://code.google.com/p/android/issues/detail?id=21177)上找到一些帖子

我的 logcat 向我展示

```
05-09 13:33:30.187: W/webcore(20054): java.lang.Throwable: EventHub.removeMessages(int what = 107) is not supported before the WebViewCore is set up.
05-09 13:33:30.187: W/webcore(20054):   at android.webkit.WebViewCore$EventHub.removeMessages(WebViewCore.java:1683)
05-09 13:33:30.187: W/webcore(20054):   at android.webkit.WebViewCore$EventHub.access$7900(WebViewCore.java:926)
05-09 13:33:30.187: W/webcore(20054):   at android.webkit.WebViewCore.removeMessages(WebViewCore.java:1795)
05-09 13:33:30.187: W/webcore(20054):   at android.webkit.WebView.sendOurVisibleRect(WebView.java:2917)
05-09 13:33:30.187: W/webcore(20054):   at android.webkit.ZoomManager.setZoomScale(ZoomManager.java:593)
05-09 13:33:30.187: W/webcore(20054):   at android.webkit.ZoomManager.access$1700(ZoomManager.java:49)
05-09 13:33:30.187: W/webcore(20054):   at android.webkit.ZoomManager$PostScale.run(ZoomManager.java:984)
05-09 13:33:30.187: W/webcore(20054):   at android.os.Handler.handleCallback(Handler.java:605)
05-09 13:33:30.187: W/webcore(20054):   at android.os.Handler.dispatchMessage(Handler.java:92)
05-09 13:33:30.187: W/webcore(20054):   at android.os.Looper.loop(Looper.java:137)
05-09 13:33:30.187: W/webcore(20054):   at android.app.ActivityThread.main(ActivityThread.java:4424)
05-09 13:33:30.187: W/webcore(20054):   at java.lang.reflect.Method.invokeNative(Native Method)
05-09 13:33:30.187: W/webcore(20054):   at java.lang.reflect.Method.invoke(Method.java:511)
05-09 13:33:30.187: W/webcore(20054):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-09 13:33:30.187: W/webcore(20054):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-09 13:33:30.187: W/webcore(20054):   at dalvik.system.NativeStart.main(Native Method) 
```

建议我应该做出的改变。

**更新**

我发现如果我传递任何像“www.facebook.com”这样的网址，那么它会给我这个错误，但如果我用“https://www.facebook.com”替换它，那么它工作正常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T10:04:46.323

我发现的问题是因为 url 没有`http://`or `https://`。因此，如果 url 不包含`http://`or ，我会附加此标签`https://`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T10:43:45.337

就我而言，我通过更改顺序来修复它。我将**loadUrl**放在**getSettings()**

下面的工作片段之前，

```
mWebView = (WebView) findViewById(R.id.web_view);

// load file
mWebView.loadUrl(SERVER_URL);
mWebView.getSettings().setJavaScriptEnabled(true); 
```

希望这可以帮助某人..

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T01:36:41.033

在我的 LogCat 的最后几天里，我有时会看到这个堆栈，但直到现在它并没有阻止我的开发。但我怀疑这与我的 WebView 有时所做的挣扎有关。这似乎是一个不仅影响我们的 Bug：

*   [Android：当 url 包含 http 时，在设置 WebViewCore 之前不支持 removeMessages(int what = 107)](https://stackoverflow.com/questions/11010939/android-removemessagesint-what-107-is-not-supported-before-the-webviewcore)
*   [在设置 WebViewCore 之前不支持 android EventHub.removeMessages(int what = 107)](https://stackoverflow.com/questions/13140338/android-eventhub-removemessagesint-what-107-is-not-supported-before-the-webv)
*   [http://code.google.com/p/android/issues/detail?id=21305](http://code.google.com/p/android/issues/detail?id=21305)
*   [http://code.google.com/p/android/issues/detail?id=21177](http://code.google.com/p/android/issues/detail?id=21177)

* * *

[android.webkit.WebViewCore.removeMessages(int):void](http://code.metager.de/source/xref/android/4.0.3/frameworks-base/core/java/android/webkit/WebViewCore.java#removeMessages)

```
1675        private synchronized void removeMessages(int what) {
1676            if (mBlockMessages) {
1677                return;
1678            }
1679            if (what == EventHub.WEBKIT_DRAW) {
1680                mDrawIsScheduled = false;
1681            }
1682            if (mMessages != null) {
1683                Throwable throwable = new Throwable(
1684                        "EventHub.removeMessages(int what = " + what + ") is not supported " +
1685                        "before the WebViewCore is set up.");
1686                Log.w(LOGTAG, Log.getStackTraceString(throwable));
1687            } else {
1688                mHandler.removeMessages(what);
1689            }
1690        } 
```

队列`mMessages`必须为 NULL 以避免异常。

```
// Message queue for containing messages before the WebCore thread is ready. 
```

所以这很简单：有些东西导致 WebCore 需要更多的时间来设置。根据 107 是 `SET_SCROLL_OFFSET' 并且堆栈跟踪显示 ZoomManger 我将检查我的代码中的某些内容是否导致视图在启动设置时以某种方式激活。

* * *

**解答**： 如果您调用`requestWindowFeature(Window.FEATURE_NO_TITLE)`然后等待太长时间调用，则会引发此异常`setContentView()`。你能等多久我想不通。所以这两个将是`onCreate()`从现在开始的第一行。如果我是对的，时间会告诉我的。

好消息是这个警告标记`webcore`只是一个警告，它本身不会对应用程序的其余部分造成影响。

坏消息是，我的问题似乎与它无关，而是来自其他地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T16:27:45.063

该问题通常与指向未找到的 URL 有关。它是 404（即未找到的 URL）。修改网址

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T08:23:12.007

我打电话`finish()`并重新启动后遇到同样的问题`Activity`。因此，也许它不能简单地以`WebView`. 我在完成活动之前做了以下事情并且它有效。

```
try{
        webView.stopLoading();
        ViewGroup parent = (ViewGroup)webView.getParent();
        parent.removeView(webView);
        webView.destroy();
}catch(Exception e){
        Log.e(TAG, "clear webView fail");
        e.printStackTrace();
}
 finish(); 
```

# sql-server - 如何直接插入 SQL Server 2008 服务代理队列

> ID：10512293
> 
> 赞同：2
> 
> 时间：2012-05-09T08:16:30.447
> 
> 标签：sql-server, tsql, service-broker

我正在研究 SQL Server 2008 Service Broker。我想从 Web 服务获取数据并将其插入队列。我了解从一个队列向另一个队列发送消息，但首先如何将数据放入第一个队列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:59:45.290

当您[`SEND`](http://msdn.microsoft.com/en-us/library/ms188407.aspx)收到一条消息时，它会直接进入传输队列并从传输队列进入目标服务队列。

如果您想在整个对话期间保留消息，那么您可以[`ALTER QUEUE`](http://msdn.microsoft.com/en-us/library/ms189529.aspx)使用`RETENTION = ON`. 在这种情况下，当会话结束时，消息将从发件人队列中删除。

# svn - SVN 说文件夹已被修改

> ID：10512294
> 
> 赞同：2
> 
> 时间：2012-05-09T08:16:30.540
> 
> 标签：svn, tortoisesvn

使用 SVN，当我提交或“检查修改”（或命令行中的 svn 状态）时，我会列出几个文件夹。
为什么我会看到其中没有任何更改文件的文件夹？（有些文件的更改被设置为被忽略）
有没有办法改变这种行为？

编辑：
svn 状态输出：

```
>svn状态
 米。
 M src\com\proj\server
M src\com\proj\server\DataAccessManager.java
M src\com\proj\server\hibernate.cfg.xml
 战争
 M战争\WEB-INF

```

并查看战争文件夹的差异

```
>svn 差异战
索引：战争
==================================================== ==================
--- 战争（修订版 171）
+++ 战争（工作副本）

属性变化：战争
___________________________________________________________________
添加：svn：忽略
## -0,0 +1 ##
+mycrm
索引：战争/WEB-INF
==================================================== ==================
--- 战争/WEB-INF（修订版 171）
+++ 战争/WEB-INF（工作副本）

属性更改：war/WEB-INF
___________________________________________________________________
添加：svn：忽略
## -0,0 +1,2 ##
+课程
+部署

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T08:22:39.510

首先，提供输出和日志以避免那些试图理解您的问题的人猜测总是一个好主意。

也就是说，有三种可能性：

(1) 您更改了文件夹 SVN 属性（例如，在合并期间）。在这种情况下，您将`M`在**第二**列中看到（不是第一次进行常规更改）。

(2) 更改的文件是版本化的（已经在存储库中）。您不能忽略版本化文件（仅限未版本化文件）。未版本化的文件将用 标记`?`，如果不`?`存在 - 文件是版本化的。

(3) 的默认行为`svn status`是显示未版本控制的文件。要禁用 - 使用`-q`选项（即`svn status -q`）运行它。

**更新：**通过提供的日志，很明显情况 (1) - 文件夹上的 SVN 属性已更改。`svn diff --depth=empty`在列表中出现的每个目录上运行 以查看哪些属性已更改（简单`svn diff`也可以解决问题，但过滤掉您真正想要的信息会更加困难）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T09:20:20.807

你用什么客户端？

If use tortoiseSVN, and you add a file to ignore list - then the folder must be comitted (it's properties has changed).

# c - Openssl：RSA nedpq 参数代表什么？

> ID：10512295
> 
> 赞同：2
> 
> 时间：2012-05-09T08:16:31.110
> 
> 标签：c, linux, openssl, rsa

`n, e, d, p, q`openssl 下面的 RSA 结构中表示的参数是什么？

```
struct rsa_st
    {
    /* The first parameter is used to pickup errors where
     * this is passed instead of aEVP_PKEY, it is set to 0 */
    int pad;
    long version;
    const RSA_METHOD *meth;
    /* functional reference if 'meth' is ENGINE-provided */
    ENGINE *engine;
    BIGNUM *n;
    BIGNUM *e;
    BIGNUM *d;
    BIGNUM *p;
    BIGNUM *q;
    BIGNUM *dmp1;
    BIGNUM *dmq1;
    BIGNUM *iqmp;
    /* be careful using this if the RSA structure is shared */
    CRYPTO_EX_DATA ex_data;
    int references;
    int flags;

    /* Used to cache montgomery values */
    BN_MONT_CTX *_method_mod_n;
    BN_MONT_CTX *_method_mod_p;
    BN_MONT_CTX *_method_mod_q;

    /* all BIGNUM values are actually in the following data, if it is not
     * NULL */
    char *bignum_data;
    BN_BLINDING *blinding;
    BN_BLINDING *mt_blinding;
    }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T08:27:45.937

这些是 RSA 算法的参数：

p 和 q 是两个大素数，n 由 p*q 计算得出。e 是公共指数，d 是 e mod (p-1)(q-1) 的乘法倒数。

私钥是对 (p, q)。公钥是对 (n, e)

您可以[在此处](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)了解更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T08:26:16.457

从openssl官方页面可以看到，它们的数字在计算密文时具有特定作用，[OpenSSL官方文档](https://www.openssl.org/docs/man1.0.2/crypto/rsa.html)

我建议你看一看，再见！

编辑 2018-07-27：更新 url Linuxatico

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T08:37:01.103

在Linux中，`man 3 rsa`会给你一个详细的解释。

# c# - 在 c# 中更改后从数据集中更新数据库

> ID：10512296
> 
> 赞同：0
> 
> 时间：2012-05-09T08:16:31.773
> 
> 标签：c#, dataset

我试图将值插入数据集，并且我希望相应的变化反映在数据库中。我正在使用这段代码：

```
_MyDatabase_1DataSet obj = new _MyDatabase_1DataSet();
MyDatabase_1DataSetTableAdapters.t1TableAdapter mytable = new testingconnection._MyDatabase_1DataSetTableAdapters.t1TableAdapter(); 
     mytable.Fill(obj.t1);
     obj.t1.Rows.Add("new value");
     mytable.Update(obj); 
```

但是这种变化反映在数据集中而不是数据库中。当我使用数据集的另一个实例时，我可以获得新行，但更新未反映在数据库中（.sdf）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:34:44.727

你能试试吗

```
 _MyDatabase_1DataSet obj = new _MyDatabase_1DataSet();
 MyDatabase_1DataSetTableAdapters.t1TableAdapter mytable = new testingconnection._MyDatabase_1DataSetTableAdapters.t1TableAdapter(); 
 mytable.Fill(obj.t1);
 DataRow dr=obj.t1.NewRow();
 dr[0]="new value";
 obj.t1.Rows.Add(dr);
 mytable.Update(obj.t1); 
```

也试试这个

[TableAdapter 的插入方法不起作用？](https://stackoverflow.com/questions/4550437/insert-method-of-tableadapter-not-working)

# doctrine-orm - 使用 Doctrine2 选择单个记录

> ID：10512297
> 
> 赞同：0
> 
> 时间：2012-05-09T08:16:38.967
> 
> 标签：doctrine-orm

我正在尝试从表中检索单行。该行包含将外键保存到另一个表中的字段，该表又与另一个表相关。我试图只返回一行，但问题是，它不仅返回该行，还返回与该表共同相关的所有对象。由于我必须处理相当大量的数据，返回的对象非常麻烦，因为它还包含所有相关数据。在某些情况下，我的脚本只是超时，因为要抓取的数据太多了。

我的问题是；有没有办法只检索一条记录而没有相关的绒毛？我基本上是通过存储库中的 entityManager 访问表，然后尝试使用 ->find($id) 方法获取我的记录。

我确信这是非常简单的事情，但我似乎无法弄清楚。提前感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:20:56.183

Doctrine 2 使用“延迟加载”，这意味着当您不尝试访问它们时，关联的对象并没有真正从数据库中检索到。

所以`find($id)`就好了。

# c# - XmlSerializer 不使用由 sgen 创建的 XmlSerializers.dll

> ID：10512299
> 
> 赞同：7
> 
> 时间：2012-05-09T08:16:48.373
> 
> 标签：c#, .net, xml-serialization, sgen

在我的 Visual Studio 2010 项目中，我使用以下 Post-Build 事件命令行来使用 sgen 创建 XmlSerializers.dll。

构建后事件：

```
"$(ProgramFiles)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools\sgen.exe" /a:"$(TargetPath)" /c:/keyfile:"c:\myproject\mykey.snk" /f 
```

我的项目是强命名的，所以使用相同的键来强命名“XmlSerializers.dll”。VS 在输出文件夹中创建 XmlSerializers.dll。

但是，我注意到使用 ProcessMonitor，.NET 仍然在运行时调用 CSC.exe。我遇到了这篇[文章](https://stackoverflow.com/questions/4851626/serialize-not-using-xmlserializers-dll-produced-with-sgen)，用户有类似的问题并通过使用 XmlSerializer(Type) 构造函数解决。

我在代码中使用了相同的技术，但它仍然调用 csc.exe：

```
var fs = new FileStream(SettingsFilePath, FileMode.Open);
try
{
var serializer = new XmlSerializer(typeof(AppSettings));
settings = (AppSettings)serializer.Deserialize(fs);
}
finally
{
fs.Close();
} 
```

由于性能原因，我需要使用预编译的 XML 序列化，而且我有时会在 Windows 关闭时看到 csc.exe 错误。我的应用程序在 Form 关闭时保存数据，在关机期间它失败了，因为 Windows 不允许在关机序列期间启动新进程。我已经看到通过预编译 XML 序列化来解决这个问题的建议。

关于为什么 XmlSerializer 不使用由 sgen 创建的 XmlSerializers.dll 的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T02:08:29.277

问题可能是不同的目标平台：默认情况下`sgen`使用“任何 CPU”（MSIL），如果包含要反序列化或序列化的类型的程序集是为 x86 或 x64 编译的，它不会加载`.XmlSerializers.dll`

更一般地说，我查看了加载序列化程序集的 .NET 代码 - 这是一些重现与单元测试相同行为的代码：

```
/// <summary>Generates an identifier for the assembly of a specified type</summary>
/// <remarks>Code copied from the .NET serialization classes - to emulate the same bahavior</remarks>
/// <param name="type">The type</param>
/// <returns>String identifying the type's assembly</returns>
static string GenerateAssemblyId(Type type) 
{ 
  Module[] modules = type.Assembly.GetModules();
  ArrayList list = new ArrayList();
  for (int i = 0; i < modules.Length; i++) {
    list.Add(modules[i].ModuleVersionId.ToString()); 
  }
  list.Sort(); 
  StringBuilder sb = new StringBuilder(); 
  for (int i = 0; i < list.Count; i++) {
    sb.Append(list[i].ToString()); 
    sb.Append(",");
  }
  return sb.ToString();
} // GenerateAssemblyId

/// <summary>Verifies that the serialization assembly for the specified type can be loaded</summary>
/// <remarks>Code copied from the .NET serialization classes - to emulate the same behavior and tests</remarks>
/// <param name="type">The type</param>
static void AssertCanLoadXmlSerializers(Type type)
{
  if (type == null)
    throw new ArgumentNullException("type");
  Assembly serializerAssembly = null;
  // Create the name of the XML serilizers assembly from the type's one
  AssemblyName name = type.Assembly.GetName(true); 
  name.Name = name.Name + ".XmlSerializers"; 
  name.CodeBase = null;
  name.CultureInfo = CultureInfo.InvariantCulture;
  try {
    serializerAssembly = Assembly.Load(name);
  } catch (Exception e) {
    Assert.Fail("Unable to load XML serialization assembly for type '{0}': {1}", type.FullName, e.Message);
  }
  object[] attrs = serializerAssembly.GetCustomAttributes(typeof(XmlSerializerVersionAttribute), false);
  if (attrs == null || attrs.Length == 0) {
    Assert.Fail(
      "Unable to use XML serialization assembly '{1}' for type '{0}': it does not contain XmlSerializerVersionAttribute", 
      type.FullName, 
      serializerAssembly.FullName
    );
  }
  if (attrs.Length > 1) {
    Assert.Fail(
      "Unable to use XML serialization assembly '{1}' for type '{0}': it contains multiple XmlSerializerVersionAttribute", 
      type.FullName, 
      serializerAssembly.FullName
    );
  }
  XmlSerializerVersionAttribute assemblyInfo = (XmlSerializerVersionAttribute)attrs[0];
  string assemblyId = GenerateAssemblyId(type);
  if (assemblyInfo.ParentAssemblyId != assemblyId) {
    Assert.Fail(
      "Unable to use XML serialization assembly '{1}' for type '{0}': it does not match assembly id '{2}'", 
      type.FullName, 
      serializerAssembly.FullName,
      assemblyId
    );
  }
} // AssertCanLoadXmlSerializers 
```

只需调用`AssertCanLoadXmlSerializers()`传递类型而不是需要序列化/反序列化。如果未加载序列化程序集，您可以从错误消息中很好地了解原因。

我将它添加到我们的单元测试中，以便我可以合理地确定序列化程序集是好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:16:53.357

您是否尝试过在生成的 dll 上运行[ngen.exe](http://msdn.microsoft.com/en-us/library/6t9t5wcf%28v=vs.100%29.aspx "恩根")？

跑步

```
ngen.exe install myproject.XmlSerializers.dll 
```

将在图像缓存中安装 dll 的本机图像，该图像应在运行时使用，而不是调用 JIT 编译器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:04:55.033

您确定序列化程序集已正确签名吗？通常你需要转义引号。请参阅[此处](http://blog.mediawhole.com/2008/10/sgenexe-compilerkeyfile-doesnt-allow.html)了解更多信息。

您还可以检查 ID 是否匹配。如果您在构建序列化程序集后修改源程序集，则 ID 将不再匹配，并且将不会使用序列化程序集。请参阅[此处](http://blog.bits-in-motion.com/2009/11/xmlserializers-moduleversionid-ilmerge.html)了解更多信息。

如果一切正确：禁用工具->选项->调试->“仅启用我的代码”并启用调试->异常->公共语言运行时异常->抛出。然后将您的应用程序调试到完成序列化的地步。将抛出第一次机会异常，说明为什么不能使用序列化程序集。

# macos - 加载pdf时，如何禁用从webview自动显示的“在外部查看器中打开”和“下载”菜单？

> ID：10512302
> 
> 赞同：0
> 
> 时间：2012-05-09T08:17:06.330
> 
> 标签：macos, cocoa, pdf, webview

我想禁用可可 WebView 中此菜单的“打开”端“下载”功能，或者禁用整个菜单。

[![](../Images/a3e3bfb0d9cec1b46efdc15cb8caa8de.png)](https://i.stack.imgur.com/SUCsz.png)
[（来源：[federicocappelli.net](http://www.federicocappelli.net/filehost/webview_menu.png)）]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:16:10.803

如果您实现一个 WebUIDelegate 的实现`webView:contextMenuItemsForElement:defaultMenuItems:`过滤器的实现`WebMenuItemTagOpenWithDefaultApplication`，`WebMenuItemTagDownloadImageToDisk`那么这将阻止 Web 视图在叠加层中显示这两个选项的可能性很小。

否则，您可以尝试继承`WebView`和覆盖`-mouseMoved:`这些事件。不过，这可能会干扰正常功能。

或者，也许您可​​以覆盖`-addTrackingArea:`以防止添加用于显示覆盖的任何跟踪区域。

# sqlite - gosqlite（golang）中的奇怪sqlite错误

> ID：10512318
> 
> 赞同：0
> 
> 时间：2012-05-09T08:18:37.110
> 
> 标签：sqlite, go

我遇到了一个奇怪的错误，无法找出问题所在。我使用这个函数来保存传入的消息：

```
func (mdb *MailDB) SaveMail(mail *Mail){
    conn, err := sqlite.Open("maildb.db")
    if err != nil {
        log.Print("Unable to open the database: ", err)
        return
    }
    defer conn.Close()
    insertsql := fmt.Sprintf(`INSERT INTO mails (sender,subject,text,time) VALUES ("%v", "%v", "%v", %v) ;`,
                    mail.Sender,mail.Subject,mail.Text,time.Now().Unix())
    err = conn.Exec(insertsql)
    if err!=nil {
        log.Print("maildb insert fail @exec: ",err)
        log.Print(insertsql)
        return
    }
} 
```

我收到此错误：

```
2012/05/09 10:10:20 maildb insert fail @exec: SQL error or missing database: unrecognized token: """
2012/05/09 10:10:20 INSERT INTO mails (sender,subject,text,time) VALUES ("wLrOBizTcmS1MlqeXydUK9U6YJQ=", "abc", "321
", 1336551020) ; 
```

（在 321 之后是一个 '\n' 我不知道为什么在这里省略它）

奇怪的是，我可以毫无问题地在 sqlite 控制台中发送 copy'n'pasteed 查询。

有人看到出了什么问题吗？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:21:24.553

我认为您的问题是`"`用于分隔字符串文字，而这不是标准的 SQL 语法，并且 sqlite 也不支持。引用[其手册](http://sqlite.org/lang_expr.html)：

> 通过将字符串括在单引号 (') 中形成字符串常量。字符串中的单引号可以通过将两个单引号放在一行中来编码 - 就像在 Pascal 中一样。不支持使用反斜杠字符的 C 样式转义，因为它们不是标准 SQL

所以明显的修复应该是使用

```
insertsql := fmt.Sprintf(`INSERT INTO mails (sender,subject,text,time) VALUES ('%v', '%v', '%v', %v) ;`, ...) 
```

另请注意，像您这样构建 SQL 语句是幼稚的，并且容易受到[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)。正确的方法是首先[创建一个准备好的语句](http://sqlite.org/c3ref/prepare.html)，然后[将其参数绑定到实际值](http://sqlite.org/c3ref/bind_blob.html)，然后执行它。我没有将 Go 绑定到 sqlite 的经验，所以我不知道它们是否支持我提到的 API，但我认为您应该尝试对此进行调查。

# openssl - 如何在 openssl 1.0.1 中加载 CRL 路径？

> ID：10512320
> 
> 赞同：4
> 
> 时间：2012-05-09T08:18:38.823
> 
> 标签：openssl

由于我已更新到 openssl 1.0.1，因此我的应用程序中的吊销检查功能已损坏。在“apps/verfiy.c”的帮助下，我发现 CRL 文件的加载发生了变化，直到现在我一直这样做：

```
X509_LOOKUP *lookup;
const char *crl_path = "/path/to/crls"

X509_VERIFY_PARAM *param = X509_VERIFY_PARAM_new();
X509_VERIFY_PARAM_set_flags(param, X509_V_FLAG_CRL_CHECK);
SSL_CTX_set1_param(ctx, param);

lookup = X509_STORE_add_lookup(ctx->cert_store, X509_LOOKUP_hash_dir());
if (lookup == NULL) {
  return "CRL path initialization error: X509 lookup initialization failed.";
}
if(!X509_LOOKUP_add_dir(lookup, crl_path, X509_FILETYPE_PEM)) {
  return "CRL path initialization error: path addition failed.";
}

X509_VERIFY_PARAM_free(param); 
```

现在这样做我总是收到错误“无法加载证书 CRL”。

但是，在“apps/verify.c”中，最近通过以下代码一次加载一个 CRL 文件：

```
STACK_OF(X509_CRL) *crls;
char *crlfile = "/path/to/single/crl"

crls = load_crls(bio_err, crlfile, FORMAT_PEM, NULL, e, "other CRLs");
X509_STORE_CTX_set0_crls(csc, crls); 
```

有谁知道如何通过使用查找例程（例如 X509_LOOKUP_add_dir）并通过 CRL 路径的规范一次性加载 CRL 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:22:08.980

我知道一些使用存储添加 CRL 文件的方法 方法 1：使用此 API 表单 x509_vfy.h 文件。 `int X509_load_crl_file(X509_LOOKUP *ctx, const char *file, int type);` 这里的类型可以是以下任何一个值

X509_FILETYPE_PEM -- 用于 PEM/B64 编码的 CRL 文件

X509_FILETYPE_ASN1 -- 用于 DER 编码的 CRL 文件

方法2。

步骤 1 . 将文件转换为 X509_CRL 格式（要转换使用`X509.h`文件中的以下任何一种 API：

```
 //If the CRL file is DER encoded 
         X509_CRL *d2i_X509_CRL_fp(FILE *fp,X509_CRL **crl);  
      //If the CRL file is PEM encoded 
        PEM_read_X509_CRL_fp();

    ) 
```

第 2 步：创建 CRL 堆栈

         STACK_OF(X509_CRL) mCRLStack;

第 3 步：

```
 X509_STORE_CTX_set0_crls(lStoreCtx,mCRLStack); 
     /* or */
     lStoreCtx->crls = mCRLStack; 
```

# html - CSS到PDF，飞碟中的css：-fs-table-paginate导致border-collapse：collapse无效

> ID：10512324
> 
> 赞同：17
> 
> 时间：2012-05-09T08:18:55.800
> 
> 标签：html, css, flying-saucer, xhtmlrenderer

现在我正在使用**xhtmlrenderer**将 html 转换为 PDF。我的maven依赖如下：

```
 <dependency>
        <groupId>org.mvel</groupId>
        <artifactId>mvel2</artifactId>
        <version>2.1.0.drools2</version>
        <scope>compile</scope>
        <optional>true</optional>
    </dependency>
    <dependency>
        <groupId>org.xhtmlrenderer</groupId>
        <artifactId>core-renderer</artifactId>
        <version>R8</version>
        <scope>compile</scope>
        <optional>true</optional>
    </dependency>
    <dependency>
        <groupId>com.lowagie</groupId>
        <artifactId>itext</artifactId>
        <version>2.0.8</version>
        <scope>compile</scope>
        <optional>true</optional>
    </dependency> 
```

我试图在每个 PDF 的页面中重复表头。所以我使用 css：

```
table {
        -fs-table-paginate: paginate;
    }` 
```

CSS 的解释在[这里](http://flyingsaucerproject.github.com/flyingsaucer/r8/guide/users-guide-R8.html#xil_43)。

```
-fs-table-paginate 
```

*   当与 value 一起使用时`-fs-table-paginate: paginate`，修改表格布局算法以在后续页面上重复表格页眉和页脚，并改善跨页单元格的外观（例如通过关闭和重新打开边框），但仅此而已。如果表格的最小宽度比页面宽，它将被切掉。

*   添加上面的 css 时，我的表格边框被分离。

![在此处输入图像描述](../Images/7ff7c723b9562692698ce0a4cc0d9665.png)

*   在我添加 css 之前，表格的边框被折叠成单边框。

![在此处输入图像描述](../Images/2b7c8b53e157fd48d4173da2b34a487a.png)

所以我认为这`table { -fs-table-paginate: paginate; }`使我的表`border-collapse:collapse`无效。

**那么我能做些什么来修复这个错误，让表格的边框崩溃呢？**

我的表格应用 CSS 如下

```
table{
    border:1px solid #000000;
    border-collapse:collapse;
    -fs-table-paginate: paginate;
}
table td{
    border:1px solid #000000;
    word-wrap:break-word;
    white-space:normal;
    overflow:hidden;
    text-align:left;
    line-height:16px;
    height:16px;

}
table tr{
    page-break-inside:avoid;
}
table thead tr th{
    background:#f2f2f2;
    border:1px solid #000000;
    text-align:center;
}

table tr th{
    background:#f2f2f2;
    border:1px solid #000000;
    text-align:center;
} 
```

并且`-fs-table-paginate: paginate;` 有时添加时表头会不正常。标题将**无法正确显示**。而下面的表头会增加一个**额外的空行**。如下： ![在此处输入图像描述](../Images/64ebcdc2be2f4697602cf28368edd3fd.png)

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T11:37:04.043

对于同样的问题，我使用了这个解决方法：

```
table {
  -fs-table-paginate: paginate;
  border-spacing: 0;
} 
```

它对我有用，我`thead`在每一页上都重复了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T07:03:23.860

是的，你是对的...

border-collapse:collapse 和 -fs-table-paginate:paginate 不能一起使用。当 -fs-table-paginate 设置为 paginate 时，border-collapse 被重置为分离...

因此，实现表格标题的更好方法是使用 thead...[这可能对您有所帮助](http://www.w3.org/TR/html4/struct/tables.html#edef-THEAD)...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-03T14:34:19.123

对我有用的解决方法：

`th`将边框设置为 0px并`td`一一初始化：`border: 0px;`

然后像这样在需要它们的地方应用边框：

`<td style="border: 0px; border-left: 1px solid #ddd;">some texte</td>`

当然，我让`-fs-table-paginate: paginate;`表格样式。

工作示例 html：[https ://gist.github.com/laguiz/5509461](https://gist.github.com/laguiz/5509461)

这是结果：

![在此处输入图像描述](../Images/ec702071816c1ea1b3075c82659282cc.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-21T07:21:15.090

您可以设置边框左宽度和边框顶部宽度 0，只需使用此 css

```
 table {
        -fs-table-paginate:paginate;
    }

    table * {
        border-collapse: collapse;
        border-color: #000;
    }

    table thead tr:first-child th {
        border-top-width: 1px;
        border-top-style: solid;
    }

    table tr th:first-child,
    table tr td:first-child {
        border-left-width: 1px;
        border-left-style: solid;
    }

    table tr th,
    table tr td {
        border-top-width: 0px;
        border-right-width: 1px;
        border-bottom-width: 1px;
        border-left-width: 0px;
        border-bottom-style: solid;
        border-right-style: solid;
    } 
```

# ios - 播放电影的片段

> ID：10512329
> 
> 赞同：0
> 
> 时间：2012-05-09T08:19:06.093
> 
> 标签：ios, mpmovieplayercontroller

是否可以在不使用计时器进行暂停和取消暂停的情况下播放电影的某些部分？例如，我将电影加载到 MPMoviePlayerController 中，用户点击并播放电影的第一部分，然后暂停电影，在第二次点击时播放另一部分，依此类推。设置 MPMoviePlayerController 的 initialPlayBackTime 和 endPlayBackTime 无济于事，因为 endPlayBackTime 仅在调用停止时才更新（可能是错误吗？），但停止会导致烦人的闪烁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:37:55.473

我不这么认为...您需要计时器，仅此而已。

# asp.net - 发布后 server.mappath 在 asp.net 中不起作用

> ID：10512332
> 
> 赞同：0
> 
> 时间：2012-05-09T08:19:12.550
> 
> 标签：asp.net, iis

我在我的应用程序中使用了 server.mappath()。它在调试模式下工作正常，但在发布到 IIS 后它无法正常工作。

```
string filePath=Path.Combine(HttpContext.Server.MapPath("/calendar"),
                             "MonthCalendarTest.exe");
Process.Start(filePath, Convert.ToString(LoggedInUserKey)); 
```

尝试使用绝对路径，

```
"../../calendar/MonthCalendarTest.exe" 
"~/calendar/MonthCalendarTest.exe". 
```

请让我知道我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:35:43.773

我想这可能是通配符问题，因为在将网站发布到 IIS 之后，它只允许运行那些映射到 IIS 中的扩展。请检查相同。

# ruby-on-rails - Rails：绑定到对象的嵌套表单 - 选择框的问题

> ID：10512337
> 
> 赞同：1
> 
> 时间：2012-05-09T08:19:19.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, drop-down-menu, form-helpers

我的 Rails 应用程序中有一个嵌套表单模型。当我去编辑模型中的一个对象时，我的所有字段（text_area、check_box 等）都填充了数据库中的数据，除了选择框。当我使用表单编辑模型中的现有数据时，如何让我的选择框也被填充？

```
<%= form_for @test do |f| %>

  <%= f.fields_for :questions do |builder| %>
    <%= render 'question_fields', f: builder %>
  <% end %>

<% end %> 
```

**_question_fields.html.erb**

```
<fieldset>

  <%= f.text_area :question_text %>

  <%= f.select :correct_answer, options_for_select([['A', 1], ['B', 2], ['C', 3], ['D', 4], ['E', 5]]), :prompt => 'Choose the correct answer' %>

  <%= f.check_box :question_check %>

</fieldset> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T09:17:38.877

您需要在 options_for_select 函数调用中发送选定的参数。

```
<%= f.select :correct_answer, options_for_select([['A', 1], ['B', 2], ['C', 3], ['D', 4], ['E', 5]], :selected => f.object.correct_answer), :prompt => 'Choose the correct answer' %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:17:21.040

尝试为`selected`.

参考：[http ://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)

**编辑：**现在无法测试它，但我很确定`select`自己会采用一系列选项。所以你不应该`options_for_select`在这里需要 - 然后`select`应该设置*选定*的选项。试试这个并参考：[http ://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select)

# git - 如何删除名称中带有点的远程分支

> ID：10512339
> 
> 赞同：0
> 
> 时间：2012-05-09T08:19:30.177
> 
> 标签：git, github

分支存在，但命名似乎引起了麻烦

```
manu-mac:culture-hub manu$ git push origin :12.05.1
error: dst refspec 12.05.1 matches more than one.
error: failed to push some refs to 'git@github.com:delving/culture-hub.git' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T08:29:51.940

您可能有一个名称相同的标签，您需要使用远程命名的显式引用来消除歧义：

```
git push origin :refs/heads/12.05.1 
```

# button - 按钮不显示动画效果

> ID：10512345
> 
> 赞同：0
> 
> 时间：2012-05-09T08:19:59.120
> 
> 标签：button, uibutton, extjs

我正在使用一个面板，其中包含一个带有三个按钮的工具栏。

此面板加载在 2 个差异文件中。

它加载的第一个文件在按下或释放按钮时显示适当的渐变效果，但另一个面板根本没有显示任何效果。按钮仍然有效，但样式不存在。

它被其他文件覆盖了吗？

我的面板是：

```
config:{
        navigationBar: {
            hidden:'true'

        },
        items:[
            {
                xtype:'toolbar',
                layout:'hbox',
                height:70,
                width:310,
                activeItem:2,
                items:[
                    {
                        xtype:'button',
                        iconCls:'note_black',
                        iconAlign:'top',
                        text:'Workitems',
                        iconMask:true,
                        ui:'normal',
                        id:'workitem',
                       // enableToggle:true,
                        enabled:true,
                        disabled:false,
                        top:5,
                        height:60,
                        handler:function () {
                        //  Ext.getCmp('workitem').setUi('toggle');
                        //  Ext.getCmp('workitem').toggle(true,true);
                            //Ext.getCmp('workitem').toggle(false,true);
            //              Ext.getCmp('workitem').setPressed(0);
                            //Ext.getCmp('workitem').addCls('button_pressed');
                        }

                    },
                    {
                        xtype:'button',
                        iconCls:'inbox2',
                        iconAlign:'top',
                        text:'Inbox Queue',
                        iconMask:true,
                        ui:'normal',
                        id:'inbox',
                        top:5,
                        height:60,
                        enabled:true,
                        disabled:false,
                        left:93,
                        handler:function () {

                        }

                    },
                    {
                        xtype:'button',
                        iconCls:'doc_drawer',
                        iconAlign:'top',
                        text:'File Cabinet',
                        enabled:true,
                        disabled:false,
                        iconMask:true,
                        ui:'normal',
                        id:'filecabinet',
                        top:5,
                        height:60,
                        left:200,
                        handler:function () {
                        }

                    }]
            }]
    } 
```

并且 m 使用相同的代码将其加载到 2 个差异文件中

```
{
      xtype:'bottomBarPanel'
 }, 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:33:22.973

这是因为我试图在 2 个不同的地方使用同一个面板。显然你不能那样做。所以我为这两个文件创建了单独的面板，现在它工作正常。

# c# - String.Format - 它是如何工作的以及如何实现自定义格式字符串

> ID：10512349
> 
> 赞同：80
> 
> 时间：2012-05-09T08:20:07.923
> 
> 标签：c#, .net, vb.net, string, string-formatting

例如，可以以许多不同的方式`String.Format()`格式化`DateTime`对象。每次我在寻找所需的格式时，我都需要在 Internet 上进行搜索。我几乎总是能找到一个我可以使用的例子。例如：

```
String.Format("{0:MM/dd/yyyy}", DateTime.Now);          // "09/05/2012" 
```

但我不知道它是如何工作的以及哪些类支持这些“神奇”的附加字符串。

所以我的问题是：

1.  如何`String.Format`将附加信息映射`MM/dd/yyyy`到字符串结果？
2.  是否所有 Microsoft 对象都支持此功能？
    这是在某处记录的吗？
3.  是否有可能做这样的事情：
    `String.Format("{0:MyCustomFormat}", new MyOwnClass())`

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-05-09T08:27:42.170

`String.Format`将字符串 ( `{0}`etc) 中的每个标记与相应的对象匹配：[https ://docs.microsoft.com/en-us/dotnet/api/system.string.format#overloads](https://docs.microsoft.com/en-us/dotnet/api/system.string.format#overloads)

可以选择提供格式字符串：

`{ index[,alignment][ : formatString] }`

如果`formatString`提供了，则对应的对象必须实现[IFormattable](https://docs.microsoft.com/en-us/dotnet/api/system.iformattable)，特别`ToString`是接受`formatString`并返回对应格式化字符串的方法：[https ://docs.microsoft.com/en-us/dotnet/api/system.iformattable.tostring](https://docs.microsoft.com/en-us/dotnet/api/system.iformattable.tostring)

An`IFormatProvider`也可用于捕获基本格式标准/默认值等。[此处](https://stackoverflow.com/questions/2382154/how-to-create-and-use-a-custom-iformatprovider-for-datetime)和[此处](https://www.codeproject.com/Articles/6533/Custom-String-Formatting-in-NET)的示例。

因此，按顺序回答您的问题：

1.  它在对象上使用`IFormattable`接口的`ToString()`方法`DateTime`并传递`MM/dd/yyyy`格式字符串。正是那个实现返回了正确的字符串。

2.  任何实现的对象都`IFormattable`支持此功能。你甚至可以自己写！

3.  是的，见上文。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-09T08:26:09.570

据我了解，您需要在您的班级中实现 IFormattable 以支持这一点。然后有一个方法 ToString，它将您传递给 String.Format 的参数。

这是一个例子。

```
// Define other methods and classes here
public class Sample : IFormattable
{
     public string ToString(string format, IFormatProvider provider)
     {
         return String.Concat("Your custom format was ", format);
     }
}

String.Format("{0:MyCustomFormat}", new Sample()) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-09T08:28:21.237

1.  查看官方 MSDN 文档，这里有 DateTime 格式字符串的完整列表：http: [//msdn.microsoft.com/en-us/library/az4se3k1.aspx](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)。确实有不少“神奇”的字符串。

2.  据我所知，并非所有类型都有“有趣”的格式，但所有类型都支持`ToString()`. 如果您需要格式化内置对象，您可以添加一个扩展方法来执行此操作，但*通常*在需要它的任何地方都提供格式化（或者换句话说，我只为我自己的类型编写了自定义格式化程序） .

3.  是的，您可以自己编写，如果您有可以以不同方式格式化的数据，您可能应该通过实现 IFormattable 编写自定义格式化程序，再次查看此处的文档：http: [//msdn.microsoft.com/en-us/库/system.iformattable.aspx](http://msdn.microsoft.com/en-us/library/system.iformattable.aspx)。这相当简单，您只需检查提供的字符串并根据这些字符串写出您的数据，幕后没有魔法:-)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-09T08:32:22.577

在幕后 String.Format 做了如下的事情，

```
IFormattable formattable = objectToFormat as IFormattable;
if (formattable != null)
{
    formattable.ToString(objectToFormat);
}
else
{
    objectToFormat.ToString();
} 
```

对于您的问题，

1.  *String.Format 如何将附加信息 MM/dd/yyyy 映射到字符串结果？*

    如上所述，它只调用 IFormattable .ToString(string format, IFormatProvider provider)。提供者通常会告诉您系统的文化是什么。通常为空，因为人们没有像您在案例中那样传递它 String.Format() 。

2.  *是否所有 microsoft 对象都支持此功能？这是在某处记录的吗？*

    任何实现 IFormattable 的东西都可以。

3.  *是否有可能做这样的事情：`String.Format("{0:MyCustomFormat}, new MyOwnClass())`*

    本质上，如果您希望自己的对象使用您实现的格式执行某些操作[`IFormattable`](http://msdn.microsoft.com/en-us/library/System.IFormattable.aspx)。

有大量的支持类和枚举器来确保格式字符串在*很大程度上*相似。 [更多在这里](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T08:24:42.383

是的，这是可能的——它可以完全定制。在日期和时间自定义格式上查看[此内容。](https://docs.microsoft.com/en-us/dotnet/standard/base-types/custom-date-and-time-format-strings)

如果您有自己的对象，则由您决定覆盖`ToString()`方法并输出您认为合适的表示形式。一旦你这样做了，你就可以使用`String.Format("{0:MyCustomFormat}", new MyOwnClass())`因为 this 隐式调用`MyOwnClass.ToString()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T08:26:22.323

日期的文档可以在这里找到：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

这应该可以准确地告诉您像 MM 这样的所有日期格式字符的含义。

如果要更改自定义类的字符串输出方式，可以重写 ToString 方法，如下所示：

```
public class User
{
     public string Name { get; set; }
     public int Age { get; set; }

     public override string ToString()
     {
         return this.Name + " is " + this.Age + " years old.";
     }
} 
```

然后你可以做类似的事情`myUser.ToString()`并得到你指定的输出。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-09T08:29:45.110

并回答您的第三个问题：使用这种语法是不可能的，但是您可以为您没有创建的类型提供实例，或者在您的类型中实现`IFormatProvider`（尽管基本上是 extends ）。`ICustomFormatter``IFormattable``ToString`

# python - 用于从文件中选择单个 Python 函数的 Bash 脚本

> ID：10512351
> 
> 赞同：3
> 
> 时间：2012-05-09T08:20:33.967
> 
> 标签：python, bash, parsing, awk, git-diff

对于[git 别名问题](https://stackoverflow.com/questions/10478210/limit-git-diff-to-one-or-more-functions)，我希望能够按名称从文件中选择单个 Python 函数。例如：

```
 ...
  def notyet():
      wait for it

  def ok_start(x):
      stuff
      stuff
      def dontgettrickednow():
         keep going
  #stuff
      more stuff

  def ok_stop_now(): 
```

在算法方面，以下将足够接近：

1.  当您找到匹配的行时开始过滤`/^(\s*)def $1[^a-zA-Z0-9]/`
2.  继续匹配，直到找到*不是* `^\s*#`或的行`^/\1\s]`（即，可能缩进的注释，或者比前一个长的缩进）

（我真的不在乎以下函数之前的装饰器是否被拾取。结果是供人类阅读的。）

我试图用 Awk（我几乎不知道）来做到这一点，但这比我想象的要难一些。对于初学者，我需要一种将缩进长度存储在原始`def`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T08:39:43.550

为什么不让python来做呢？我认为`inspection`模块可以打印出函数的来源，所以你可以导入模块，选择函数并检查它。不挂断。正在为您寻找解决方案...

好的。事实证明，该`inspect.getsource`函数不适用于交互定义的内容：

```
>>> def test(f):
...     print 'arg:', f
...
>>> test(1)
arg: 1
>>> inspect.getsource(test)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\inspect.py", line 699, in getsource
    lines, lnum = getsourcelines(object)
  File "C:\Python27\lib\inspect.py", line 688, in getsourcelines
    lines, lnum = findsource(object)
  File "C:\Python27\lib\inspect.py", line 529, in findsource
    raise IOError('source code not available')
IOError: source code not available
>>> 
```

但是对于您的用例，它将起作用：对于保存到磁盘的模块。`test.py`以我的文件为例：

```
def test(f):
    print 'arg:', f

def other(f):
    print 'other:', f 
```

并与此交互式会话进行比较：

```
>>> import inspect
>>> import test
>>> inspect.getsource(test.test)
"def test(f):\n    print 'arg:', f\n"
>>> inspect.getsource(test.other)
"def other(f):\n    print 'other:', f\n"
>>> 
```

所以......您需要编写一个简单的python 脚本，它接受python 源文件的名称和函数/对象名称作为参数。然后它应该导入模块并检查函数并将其打印到 STDOUT。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T09:56:06.157

一种使用方式`awk`。代码注释很好，所以我希望它很容易理解。

内容`infile`：

```
 ...
  def notyet():
      wait for it

  def ok_start(x):
      stuff
      stuff
      def dontgettrickednow():
         keep going
  #stuff
      more stuff

  def ok_stop_now(): 
```

内容`script.awk`：

```
BEGIN {
        ## 'f' variable is the function to search, set a regexp with it.
        f_regex = "^" f "[^a-zA-Z0-9]"

        ## When set, print line. Otherwise omit line.
        ## It is set when found the function searched.
        ## It is unset when found any character different from '#' with less
        ## spaces before it.
        in_func = 0
}

## Found function.
$1 == "def" && $2 ~ f_regex {

        ## Get position of first 'd' in the line.
        i = index( $0, "d" )

        ## Sanity check. Never should success because the condition was
        ## checked before.
        if ( i == 0 ) {
                next
        }

        ## Get characters until matched index before, check that all of
        ## them are spaces, and get its length.
        indent = substr( $0, 0, i - 1 )
        if ( indent ~ /^[[:space:]]*$/ ) {
                num_spaces = length( indent )
        }

        ## Set variable, print line and read next one.
        in_func = 1
        print
        next
}

## When we are inside the function, line doesn't begin with '#' and
## it's not a blank line (only spaces).
in_func == 1 && $1 ~ /^[^#]/ && $0 ~ /[^[:space:]]/ {

        ## Get how many characters there are until first non-space. The result
        ## is the position of first non-blank, so substract one to get the number
        ## of spaces.
        spaces = match( $0, /[^[:space:]]/ )
        spaces -= 1

        ## If current indent is less or equal that the indent of function definition, then
        ## end of function found, so end processing.
        if ( spaces <= num_spaces ) {
                in_func = 0
        }
}

## Self-explanatory.
in_func == 1 { 
        print
} 
```

像这样运行它：

```
awk -f script.awk -v f="ok_start" infile 
```

具有以下输出：

```
 def ok_start(x):
      stuff
      stuff
      def dontgettrickednow():
         keep going
  #stuff
      more stuff 
```

# c# - 无法在 Metro 应用程序中读取文本文件？

> ID：10512355
> 
> 赞同：1
> 
> 时间：2012-05-09T08:20:59.320
> 
> 标签：c#, windows-8, windows-runtime

我可以第一次阅读文本文件。当我下次尝试读取相同的文本文件时，它会退出函数并返回空值。

```
 static string configData = "";
    async public void readtextFile(string folder, string file)
    {
        StorageFolder storageFolder = await Package.Current.InstalledLocation.GetFolderAsync(folder);
        StorageFile storageFile = await storageFolder.GetFileAsync(file);
        configData = await FileIO.ReadTextAsync(storageFile);
    } 
```

请建议我，如何解决这个问题..

感谢谢赫阿卜杜拉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T08:26:05.997

不要忘记这`readtextFile`是一个异步方法。当您调用它时，它实际上在到达 first 时返回`await`，因此此时`configData`尚未设置。您应该从该方法返回值，并等待该方法：

```
async public Task<string> readtextFile(string folder, string file)
{
    StorageFolder storageFolder = await Package.Current.InstalledLocation.GetFolderAsync(folder);
    StorageFile storageFile = await storageFolder.GetFileAsync(file);
    string configData = await FileIO.ReadTextAsync(storageFile);
    return configData;
}

...

string configData = await readTextFile(folder, file); 
```

即使你想存储`configData`在一个字段中，你仍然需要`await readtextFile`在读取值之前。

# cakephp - cakePHP 有很多没有加入 SQL 查询

> ID：10512372
> 
> 赞同：0
> 
> 时间：2012-05-09T08:22:43.970
> 
> 标签：cakephp, model, controller

我无法为我的分页器做一个简单的条件。我有一个调查和竞选模型。Campaigns 在 Campaign 模型中设置了许多调查。

我想选择一个调查，并且分页器应该显示活动链接到，但我不断得到一个未知列 Survey.id - 检查时我看到调查没有加入到活动模型中，仅在 WHERE 子句中。我还发现 hasMany 不会将表加入查询。

我还能怎么做上面的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T09:37:57.330

我找不到答案。似乎 hasMany 不会自动添加到查询中。我曾建议使用 cake 中的可包含功能可能会有所帮助。

# java - Mockito：使用泛型列出匹配器

> ID：10512374
> 
> 赞同：185
> 
> 时间：2012-05-09T08:22:58.197
> 
> 标签：java, generics, warnings, mockito, matcher

Mockito 提供：

```
when(mock.process(Matchers.any(List.class))); 
```

`process`如果取而代之，如何避免警告`List<Bar>`？

* * *

## 回答 #1

> 赞同：303
> 
> 时间：2012-05-09T08:34:44.733

对于 Java 8 及更高版本，这很容易：

```
when(mock.process(Matchers.anyList())); 
```

对于 Java 7 及更低版本，编译器需要一些帮助。使用`anyListOf(Class<T> clazz)`：

```
when(mock.process(Matchers.anyListOf(Bar.class))); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-09-22T10:16:03.933

除了`anyListOf`上述之外，您始终可以使用以下语法显式指定泛型：

```
when(mock.process(Matchers.<List<Bar>>any(List.class))); 
```

Java 8 新允许基于参数的类型推断，所以如果您使用的是 Java 8，这也可以工作：

```
when(mock.process(Matchers.any())); 
```

请记住，既`any()`不会也`anyList()`不会应用任何检查，包括类型或空值检查。在 Mockito 2.x 中，`any(Foo.class)`改为表示“任何`instanceof`Foo”，但`any()`仍表示“任何值，包括`null`”。

注意：以上已在较新版本的 Mockito 中切换到[ArgumentMatchers](https://static.javadoc.io/org.mockito/mockito-core/2.7.21/org/mockito/ArgumentMatchers.html)，以避免与`org.hamcrest.Matchers`. 旧版本的 Mockito 将需要继续使用`org.mockito.Matchers`如上。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-06-18T12:41:21.697

在 Java 8（版本 7 或 6）之前，我使用新方法 ArgumentMatchers.anyList：

```
import static org.mockito.Mockito.*;
import org.mockito.ArgumentMatchers;

verify(mock, atLeastOnce()).process(ArgumentMatchers.<Bar>anyList()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-14T13:50:34.260

我需要`anyList()`一个类型化的 ArrayList，以下工作：

```
(ArrayList<Bar>) ArgumentMatchers.<Bar>anyList() 
```

# ruby-on-rails - 在资产管道中加载多个应用程序样式表

> ID：10512376
> 
> 赞同：1
> 
> 时间：2012-05-09T08:23:19.133
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的应用程序中有几个公司主题特定的样式表，并根据登录用户加载了一个特定的样式表。这是通过在“application.html.erb”中加载特定版本的应用程序文件来完成的：

```
<% if current_user %>
    <% stylesheet_link_tag "application_" + current_user.company.code.downcase %>   
<% else %>
    <%= stylesheet_link_tag "application" %>
<% end %> 
```

这在本地工作正常，但在生产中（在“rake assets:precompile”之后），它不起作用，因为似乎只有原始的“application.css.scss”被编译，而不是其他的，例如“application_sal.css” .scss'。我在这里做错了什么？

这是要走的路吗？当用户登录时，加载特定的应用程序文件，其中包含公司特定的样式表：

```
@import "_variables.css.scss";
@import "_mixins.css.scss";
@import "_reset.css.scss";
@import "_layout.css.scss";
@import "_skeleton.css.scss";

@import "_theme_sal.css.scss";

@import "_form.css.scss";
@import "base.css.scss";
@import "print.css.scss";
@import "_modules.css.scss"; 
```

当用户未登录时，将加载默认应用程序文件：

```
@import "_variables.css.scss";
@import "_mixins.css.scss";
@import "_reset.css.scss";
@import "_layout.css.scss";
@import "_skeleton.css.scss";
@import "_form.css.scss";
@import "base.css.scss";
@import "print.css.scss";
@import "_modules.css.scss"; 
```

有没有更好的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:41:57.353

尝试更新`environments/production.rb`. 虽然`application.css`是自动预编译的，但其他人不会没有这个配置项。

```
# Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
config.assets.precompile += %w( search.css ) 
```

只需将每个公司特定的 css 清单文件放在数组中即可。

这个配置项可能已经在你的`production.rb`注释中，这取决于你运行的 Rails 版本`rails new`。

# c# - 记录应用程序块未记录到文件

> ID：10512378
> 
> 赞同：2
> 
> 时间：2012-05-09T08:23:28.680
> 
> 标签：c#, logging, enterprise-library, logging-application-block

我有以下配置和代码，`writer.logentry`没有抛出异常但没有创建文件。

更新 1：我更改了侦听器，删除了事件日志并添加了平面文件日志。我仍然看不到创建的 .log 文件

我想我在配置中遗漏了一些东西？

```
<loggingConfiguration name="" tracingEnabled="true" defaultCategory="General">
    <listeners>
      <add name="Flat File Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        fileName="AskAndTrack.log" traceOutputOptions="LogicalOperationStack, DateTime, Timestamp, Callstack" />
    </listeners>
    <formatters>
      <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        template="Timestamp: {timestamp}{newline}&#xA;Message: {message}{newline}&#xA;Category: {category}{newline}&#xA;Priority: {priority}{newline}&#xA;EventId: {eventid}{newline}&#xA;Severity: {severity}{newline}&#xA;Title:{title}{newline}&#xA;Machine: {localMachine}{newline}&#xA;App Domain: {localAppDomain}{newline}&#xA;ProcessId: {localProcessId}{newline}&#xA;Process Name: {localProcessName}{newline}&#xA;Thread Name: {threadName}{newline}&#xA;Win32 ThreadId:{win32ThreadId}{newline}&#xA;Extended Properties: {dictionary({key} - {value}{newline})}"
        name="Text Formatter" />
    </formatters>
    <categorySources>
      <add switchValue="All" name="General">
        <listeners>
          <add name="Flat File Trace Listener" />
        </listeners>
      </add>
    </categorySources>
    <specialSources>
      <allEvents switchValue="All" name="All Events" />
      <notProcessed switchValue="All" name="Unprocessed Category" />
      <errors switchValue="All" name="Logging Errors &amp; Warnings">
        <listeners>
          <add name="Flat File Trace Listener" />
        </listeners>
      </errors>
    </specialSources>
  </loggingConfiguration> 
```

```
 catch(Exception ex)
    {
        var logEntry = new LogEntry();
        logEntry.Message = ex.Message;
        Logger.Write(logEntry);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T22:26:05.420

发布的配置看起来不错。如果发生错误记录，Enterprise Library 不会抛出异常——它将尝试将失败记录到错误特殊源（如果已配置）。您尚未为错误添加跟踪侦听器，但我建议您这样做。

您的问题看起来可能是权限。您能否验证该进程是否有权创建名为 的文件`AskAndTrack.log`？或者可能提前创建文件或写入明确授予权限的文件夹（例如，Everyone Full Control（仅用于测试！））。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:15:28.890

在我看来，您缺少类别和优先级，这是我的片段。忽略辅助方法，它们只返回一个类别，例如您的“General”和一个优先级，例如“Error”。

```
 if (!Logger.Writer.IsLoggingEnabled()) return;

            var logEntry = new LogEntry { Severity = GetTraceEventTypeFromPriority(severity) };
            logEntry.Categories.Add(GetLogCategory(app_name, severity)); // CHANGED TO NONE BECAUSE SITECORE SUCKS
            logEntry.Priority = (int)severity;

            if (!Logger.ShouldLog(logEntry)) return;

            logEntry.Message = message;
            logEntry.Title = GetLogTitle(RequestDataManager.RequestData.blah, message, severity);

            lock (_locker)
            {
                Logger.Write(logEntry);
            } 
```

# java - 在java中使用遗传算法生成时间表

> ID：10512381
> 
> 赞同：0
> 
> 时间：2012-05-09T08:23:47.793
> 
> 标签：java, genetic-algorithm

我正在尝试使用遗传算法（GA）寻找时间表生成的解决方案。在我的场景中，我查看了 6 天的时间表。周一到周六。

每天分为讲座数/时间段。（每天最多6次讲座/每个时间段如果1小时，这意味着一天6小时）

我试图代表一个由教师、学生组（组）和讲座组成的班级。我维护着一个可能的教师、可能的科目和可能的学生群体。我随机将它们分配给这些类。

所以一个类是所有这些引用的集合。所以对于每个时隙，我们都有 Class 对象表示。同样，一天是由讲座的数量组成的类对象表示。以此类推，一周由 6 天组成。

我拥有的一组可能的约束是：

> 1.一位老师在一个时间段内只能上一
> 节课 2.一位老师可以上一组科目（有限）
> 3.一位老师可以在某一天不上课
> 4.一位老师可以在某个时段不上课

以及最近可能包含的其他限制。

谁能给我一个关于如何表示这些约束或处理这些约束的想法？以及如何根据约束计算适应度分数？

**编辑：实现在这里** [https://github.com/shridattz/dynamicTimeTable](https://github.com/shridattz/dynamicTimeTable)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T04:30:21.583

**更新：**

> **代码可以在这里找到**
> 
> [github.com/shridattz/dynamicTimeTable](http://github.com/shridattz/dynamicTimeTable)

在我的时间表生成中，我使用了时间表对象。该对象由 ClassRoom 对象和每个它们的时间表时间表以及时间表的适合度分数组成。适合度分数对应于时间表相对于各种课程的其他时间表的冲突次数。

ClassRoom 对象由周对象组成。周对象由天组成。Days 由时隙组成。TimeSlot 有一个讲座，其中一个科目、参加讲座的学生群体和教授该科目的教授相关联

通过这种方式，我将时间表表示为一条染色体。

在进一步讨论约束时，我使用了复合设计模式，它可以很好地扩展以添加或删除尽可能多的约束。

在每个约束类中，我的问题中指定的条件在两个时间表对象之间进行检查。如果满足条件，即存在冲突，则分数加一。

这样，分数最低的时间表就是我们能得到的最好的时间表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T10:01:58.327

对于这个问题，没有*有效的*解决方案。我想你也明白了，因为你使用了遗传算法。一个月前，我自己编写了一个遗传算法框架。
我想你错过了：每节课都有每周的课程清单，一次只能上一节课。现在，您可以随机组合时间段的教师和班级。
在 fitnes 功能中，如果一堂课一周内有所有课程要做，我会加分不少。如果教师没有类似的负荷（例如，a 老师每周有两节课，b 老师 12 节课），则将是一个很大的减号。如果老师每周只需要工作 20 小时（使用 %），您可能会对此有所了解。
总而言之，这并非微不足道，您可能会寻找有经验的同事或导师来帮助您解决这个问题。
如果您需要更具体的建议，请说明您的问题。

# java - Android C2DM 注册失败 INVALID_PARAMETERS

> ID：10512383
> 
> 赞同：1
> 
> 时间：2012-05-09T08:23:52.707
> 
> 标签：java, android, parameters, android-c2dm

嗨，我做对了所有事情，获得​​了所有权限，注册了我的应用程序。当我调用 com.google.android.c2dm.intent.REGISTER 时，我什至得到了谷歌的回复。谷歌服务器有问题吗？我只收到一封来自：noreply@google.com 的邮件，主题：AC2DM 邀请。

*   我需要另一封激活邮件吗？我一天前签了表格...
*   无论如何要测试谷歌c2dm方面吗？

    ```
    Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
    registrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
    registrationIntent.putExtra("sender", "mail@gmail.com");
    this.startService(registrationIntent); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:33:42.913

要回答您的 2 个问题：

*   我需要另一封激活邮件吗？我一天前签了表格...

    您不需要其他激活邮件。如果您仔细阅读您的电子邮件，它并不能保证它会在一天内工作（我花了将近 2 天的时间来工作）。

    根据电子邮件：*...您应该能够在第二天左右开始使用它向 Android 2.2 设备发送消息。*

*   无论如何要测试谷歌c2dm方面吗？

    尝试注册您的应用程序是测试它的最佳方式。如果您在接收器的`onReceive`函数中收到响应，则意味着 Google 的服务器端工作正常。

# sockets - 是否可以在一个程序上打开多个端口？

> ID：10512386
> 
> 赞同：1
> 
> 时间：2012-05-09T08:24:22.013
> 
> 标签：sockets, bots, ports

我正在编写一个机器人来模拟一个站点上的不同用户。如果都在同一个端口上，我不知道如何识别哪个虚拟用户应该接收数据包。我想在一个程序上打开多个端口，用谷歌搜索，但我找不到信息。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:43:45.903

是的，您可以打开多个套接字，每个套接字都侦听不同的端口。

问题是，你需要吗？

> 如果都在同一个端口上，我不知道如何识别哪个虚拟用户应该接收数据包。

您可以将其构建到协议中，例如消息首先包含用户的标识符（固定字节数），然后是消息的大小（例如：使用 int32_t 存储），然后是实际消息。

# android - 在另一个 textView 下添加一个 textView

> ID：10512393
> 
> 赞同：0
> 
> 时间：2012-05-09T08:24:50.337
> 
> 标签：android, views, textview, android-linearlayout

目前我想用 java 代码制作一个自定义 UI，而不用担心 xml 文件。我现在想在我的 linearLayout 中已经存在的 textView 下添加一个 textView。这是我到目前为止所拥有的。

```
View linearLayout = findViewById(R.id.rockLayout);
        ImageView mineralPicture = new ImageView(this);
        TextView mineralName = new TextView(this);
        TextView mineralProperties = new TextView(this);
        mineralProperties.setText("The properties are: " + Statics.rockTable.get(rockName).getDistinctProp());
        mineralProperties.setId(2);
        mineralName.setText("This mineral is: " + rockName);
        mineralName.setId(1);
        mineralName.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.MATCH_PARENT));
        mineralProperties.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.MATCH_PARENT));
        /** Need to figure out the picture....
         * mineralPicture.setId(2);
         * mineralPicture.setImageResource(R.drawable.rocks);
         * mineralPicture.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT));
         */

            ((LinearLayout)linearLayout).addView(mineralName);
        ((LinearLayout)linearLayout).addView(mineralProperties); 
```

问题是它只添加了矿物名称文本视图，而不是矿物属性文本视图。我希望它是最顶部的 MineralName textView，然后是它下方的 MineralProperties textView。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:31:01.060

默认情况下，LinearLayout 中的子视图将水平堆叠。尝试用`linearLayout.setOrientation(LinearLayout.VERTICAL)`.

此外，您应该将文本视图布局参数更改为：

```
mineralName.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

mineralProperties.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT)); 
```

否则，其中一个视图可能会覆盖另一个视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:39:03.810

您的代码正在进行小的更改，希望它可以帮助您。

```
View linearLayout = findViewById(R.id.rockLayout);
       ImageView mineralPicture = new ImageView(this);
        TextView mineralName = new TextView(this);
        TextView mineralProperties = new TextView(this);
        mineralProperties.setText("The properties are: " + Statics.rockTable.get(rockName).getDistinctProp());

        mineralProperties.setId(2);
        mineralName.setText("This mineral is: " + rockName);
        mineralName.setId(1); 
```

**将 MATCH_PARENT 更改为 WRAP_CONTENT**

```
 mineralName.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
        mineralProperties.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
        /** Need to figure out the picture....
         * mineralPicture.setId(2);
         * mineralPicture.setImageResource(R.drawable.rocks);
         * mineralPicture.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT));
         */

        ((LinearLayout)linearLayout).addView(mineralName);
        ((LinearLayout)linearLayout).addView(mineralProperties); 
```

# html - 下拉菜单中的WordPress菜单？

> ID：10512394
> 
> 赞同：0
> 
> 时间：2012-05-09T08:24:58.790
> 
> 标签：html, wordpress, menu

我在 wordpress 中有一个代码，它生成一个水平菜单。代码是

```
<? php wp_nav_menu (array ('theme_location' => 'header-menu'));?> 
```

我想要一个下拉菜单，并尝试了以下代码，但它不起作用。

```
<select name="blog-dropdown" onChange='document.location.href=this.options[this.selectedIndex].value;'>
<option value="">Navigering</option><?php wp_nav_menu( array( 'theme_location' => 'header-menu' ) ); ?></select> 
```

怎么了？我得到一个空的下拉列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:35:04.287

它在您的浏览器中是空的，但请检查代码（或阅读 html 源代码）。该`wp_nav_menu`函数创建一个`ul>li>a`标签。 [http://codex.wordpress.org/Function_Reference/wp_nav_menu](http://codex.wordpress.org/Function_Reference/wp_nav_menu)。

选项标签需要这样的东西：

```
<select>
  <option>Volvo</option>
  <option>Saab</option>
  <option>Mercedes</option>
  <option>Audi</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:47:45.067

通过使用这个 WordPress 功能，我能够满足类似的要求`wp_dropdown_pages($args);`

下拉选项包含页面 ID 作为值，因此我使用它们通过 jquery 重定向用户。我的 jquery 代码如下所示：

```
$("nav select").change(function() {
    var pageID  = $(this).find("option:selected").val();
    window.location = siteurl + '?p=' + pageID;
}); 
```

这里 siteurl 包含我的主页 URL（这是 WordPress 博客 URL）你可以在 footer.php 中保留一些像下面这样的 div

```
<div id="wordpress_blog_url" style="display:none;"><?php bloginfo('template_url'); ?></div> 
```

进而

```
var siteurl = $('#WordPress').html(); 
```

# asp.net - 扩展 GridView 的删除方法

> ID：10512396
> 
> 赞同：0
> 
> 时间：2012-05-09T08:25:02.733
> 
> 标签：asp.net, sql-server, linq-to-sql, gridview

我有一个页面，`GridView`通过 Linq-to-SQL 从 SQL Server 数据库中提取一些数据。

我利用自动生成的按钮进行删除。但是，为了使删除命令正常工作，我需要以某种方式确保与我要删除的那些记录相关的一张表也被修改（其中的相关记录也被查找和删除）。

最简单的方法是什么？

谢谢， Ondrej

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:41:36.590

使用级联删除定义外键[约束。](http://msdn.microsoft.com/en-us/library/ms188066%28v=sql.105%29.aspx)

## 删除规则

指定如果用户尝试删除包含外键关系中涉及的数据的行时会发生什么：

*   **无操作**错误消息告诉用户不允许删除并且回滚删除。
*   **Cascade**删除包含外键关系中涉及的数据的所有行。
*   **Set Null**如果表的所有外键列都可以接受空值，则将该值设置为空。

# asp-classic - ASP 中的结果与 VBScript 中的结果不同

> ID：10512397
> 
> 赞同：0
> 
> 时间：2012-05-09T08:25:07.323
> 
> 标签：asp-classic, vbscript

如果我在 VBScript 中运行以下代码，一切都按预期工作，如果我在 ASP (IIS 7) 中运行它，我会得到这个错误的结果。有谁知道为什么？

```
mumber = "027609366"
WScript.Echo Left(number, 2) & " " & _
             Mid(number, 3, 2) & " " & _ 
             Mid(number, 5, 2) & " " & _
             Right(number, 3)

' vbs => 03 76 09 366 (right)
' asp => 03 76 09 66  (wrong) 
```

我现在使用以下方法：

```
Left(number, 2) & " " & _
Mid(number, 3, 2) & " " & _
Mid(number, 5, 2) & " " & _
Mid(number, 7) 
```

但我想知道为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:39:55.603

ASP 代码是使用 VBScript 编写的，因此结果不会不同，因为它们在技术上是相同的。

您的某个数字的末尾是否有多余的空格，这可能导致数字显示不正确？

# c++ - 最大缓冲区数

> ID：10512399
> 
> 赞同：4
> 
> 时间：2012-05-09T08:25:12.003
> 
> 标签：c++, opengl, buffer

`glGenBuffers`我可以使用函数生成多少个缓冲区？我可以尝试生成 8192（或更多）缓冲区吗？

我只渲染一个缓冲区，但我需要存储许多缓冲区。

```
int i = 0;
glGetIntegerv(GL_MAX_DRAW_BUFFERS, &i); 
```

返回`8`。这是缓冲区的最大计数，即同时渲染。

我对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T08:54:02.923

该值与片段着色器可以写入的缓冲区`GL_MAX_DRAW_BUFFERS`无关（参见 参考资料）。`glGenBuffers`[`glDrawBuffers`](http://www.opengl.org/sdk/docs/man4/xhtml/glDrawBuffers.xml)

标准中对缓冲区的数量没有限制，您可以创建任意数量的缓冲区。但是，您受到内存的限制，因此如果您计划存储大量数据，则类似的调用[`glBufferData`](http://www.opengl.org/sdk/docs/man4/xhtml/glBufferData.xml)可能会失败`GL_OUT_OF_MEMORY`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T08:53:20.667

> 我可以使用 glGenBuffers 函数生成多少个缓冲区？

glGenBuffers 不分配任何存储，它只获取缓冲区的名称/ID。对此的限制纯粹是特定于实现的，但理论上仅受可用内存和管理结构大小的限制。更多的限制因素是您分配的缓冲存储量。

问题当然是：为什么需要这么多缓冲区？为什么你是像素缓冲对象或颜色缓冲附件？纹理不是更适合您的数据的存储对象吗？

> 返回 8。这是缓冲区的最大计数，同时渲染。

是的，这是多目标渲染中目标缓冲区的最大计数。

# .htaccess - 使 .php 文件在地址栏中显示为子目录，隐藏实际的文件类型/名称？

> ID：10512401
> 
> 赞同：0
> 
> 时间：2012-05-09T08:25:14.890
> 
> 标签：.htaccess, mod-rewrite

好的，我能够为我之前的问题找到一个解决方案，但现在我遇到了各种各样的障碍。我的网站计划在许多不同的页面上包含内容，我想知道是否有办法让每个 .php 文件显示 domain.com/filename/ 显示子目录而不是 filename.php

我知道下面会这样 test.php 显示为 domain.com/test/ 但这样做我需要为每个我希望显示为子目录的文件编辑 .htaccess 。

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^test/?$ test.php [L,NC] 
```

哦，子目录中没有内容（如果它们甚至作为服务器上的文件夹存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:47:43.510

一些没有 RewriteCond 的递归尝试：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On

RewriteRule (.*\.php)$ $1 [L]
RewriteRule (.*) $1.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:36:14.307

您可以使用此代码隐藏 .php 扩展名：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# To externally redirect /dir/foo.php to /dir/foo/
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1/ [R,L]

# To internally redirect /dir/foo/ to /dir/foo.php
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(.*?)/?$ $1.php [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:41:21.223

我假设您对 PHP 中的面向对象编程有一定的了解。要实现这样的 URL，您需要一个调度模式，最适合您的情况是前端控制器。

下面是一个类控制器的例子：

```
class ControllerIndex {
    public $urlmap = array(
        'welcome' => 'WelcomePage'
        );
} 
```

使用前端控制器，所有请求都经过全局映射机制，然后委托给处理程序。然后，处理程序将具有类的形式，而不是文件。

前端控制器提供更有意义/漂亮的 URL。你会有类似[http://domain.com/welcome/](http://domain.com/welcome/)而不是[http://domain.com/welcome.php](http://domain.com/welcome.php)

# django - 如何在 django 中每页仅检索 10 个项目

> ID：10512403
> 
> 赞同：0
> 
> 时间：2012-05-09T08:25:20.803
> 
> 标签：django, django-models, query-optimization, django-queryset

我正在尝试在我的网页中使用分页。所以我在 [这里](https://docs.djangoproject.com/en/1.0/topics/pagination/#using-paginator-in-a-view)的 django 文档中找到了一个示例。

```
from django.core.paginator import Paginator, InvalidPage, EmptyPage

def listing(request):
    contact_list = Contacts.objects.all()
    paginator = Paginator(contact_list, 25) # Show 25 contacts per page

    # Make sure page request is an int. If not, deliver first page.
    try:
        page = int(request.GET.get('page', '1'))
    except ValueError:
        page = 1

    # If page request (9999) is out of range, deliver last page of results.
    try:
        contacts = paginator.page(page)
    except (EmptyPage, InvalidPage):
        contacts = paginator.page(paginator.num_pages)

    return render_to_response('list.html', {"contacts": contacts}) 
```

示例中的问题是他一次加载所有项目以进行分页。但是在我的数据库中有`20000`条目并且它们都不能一次加载。那么，有没有办法优化查询呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:32:17.940

如果它确实一次将所有对象加载到内存中，那么它就是一个错误。只要您在将`QuerySet`s 提供给 s 之前不将它们显式转换为列表`Paginator`，分页器只会获取与 using 一个查询匹配的行数，`QuerySet`然后`QuerySet`适当地限制仅获取要显示的那些行。

如果您真的怀疑它正在加载所有对象，要验证这一点，请使用[django-debug-toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)并查看已执行的查询。如果它确实加载了所有内容，那么请在 Django 的 trac 中提交一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:13:35.547

`DEBUG`在 settings.py中设置`False`，这将显着提高您的性能。调试模式（除其他外）会打开 SQL 缓存，这会大大减慢速度。

# android - java.beans.VetoableChangeListener 无法解析

> ID：10512404
> 
> 赞同：0
> 
> 时间：2012-05-09T08:25:22.530
> 
> 标签：android, class, graph, compiler-errors, jfreechart

```
The type java.beans.VetoableChangeListener cannot be resolved. It is indirectly referenced from required .class files 
```

我正在尝试在我的 Android APP 中使用`XYDataset`with `XYSeriesCollection`from`JFreeChart`但在 eclipse 中出现此错误。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:32:26.250

一个常见的错误是认为仅仅因为 Android 使用 Java 语言，任何 Java 代码都可以在其上运行。

Android 只实现了 JavaBeans API 的一个子集。查看官方 Android[`java.beans`](http://developer.android.com/reference/java/beans/package-summary.html)文档，JFreeChart 所依赖的类并未在其中列出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T11:16:43.793

在 Android 上开发时，您应该使用[AFreeChart](http://code.google.com/p/afreechart/)，它是一个受 JFreeChart 启发的 Android 图表库。

# asp.net-mvc - 如何像绘制 Ember.TextField 一样绘制密码字段？

> ID：10512410
> 
> 赞同：7
> 
> 时间：2012-05-09T08:25:38.170
> 
> 标签：asp.net-mvc, ember.js

在 ember 视图把手中，我可以将文本字段绘制为 {{view Em.TextField}} 但绘制密码输入字段的方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T08:45:54.040

对于当前版本的 Ember：

`{{input type="password"}}`

旧答案，适用于 Ember 1.0 之前的版本：

`{{view Ember.TextField type="password"}}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-24T16:49:20.217

一切都晚了，但对于其他找到这个答案的人来说，这适用于较新的 ember 版本：

```
{{input type="password"}} 
```

# ruby-on-rails - 如果缺少翻译，如何使用默认语言环境

> ID：10512411
> 
> 赞同：3
> 
> 时间：2012-05-09T08:26:02.753
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我有翻译成 en 和 ru 的页面。如果用户将使用其他语言环境来页面，我希望在语言环境中使用它。可以通过吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T11:01:09.963

> config.i18n.fallbacks = true
> 
> config.i18n.default_locale = "en"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:30:52.223

您可以创建一个辅助方法，您可以在其中执行以下操作：

```
def trans(key)
  I18n.t(key, :default => I18n.t(key, :locale => :en))
end 
```

# python - 在发布-django 时过滤 csrfmiddlewaretoken

> ID：10512419
> 
> 赞同：1
> 
> 时间：2012-05-09T08:26:32.237
> 
> 标签：python, django, forms, csrf, django-piston

我打算使用 django-piston 制作通用 CRUD。我的示例代码之一有以下

```
class TaskHandler(BaseHandler):
allowed_methods = ('GET','POST',)
model = Task

def read(self, name=None):
    return self.model.objects.all()

def create(self, request, *args, **kwargs):
    if not self.has_model():
        return rc.NOT_IMPLEMENTED

    attrs = self.flatten_dict(request.POST)
    if attrs.has_key('data'):
        #  rest.POST.get('data') has csrfmiddlewaretoken as a hiddenfield
        #  i need to exclude it from post as my ORM is giving error message
        ext_posted_data = simplejson.loads(request.POST.get('data'))
        attrs = self.flatten_dict(ext_posted_data)

    try:
        inst = self.model.objects.get(**attrs)
        return rc.DUPLICATE_ENTRY
    except self.model.DoesNotExist:
        inst = self.model(**attrs)
        inst.save()
        return inst
    except self.model.MultipleObjectsReturned:
        return rc.DUPLICATE_ENTRY 
```

下面是错误日志

```
Piston/0.2.2 (Django 1.4) crash report:
  Traceback (most recent call last): 
   File "C:\Python27\Lib\site-packages\django\bin\sumit\sumit\handler.py", line 27,
      in create inst = self.model.objects.get(**attrs) 
   File "C:\Python27\lib\site-packages\django\db\models\manager.py", line 131, 
      in get return self.get_query_set().get(*args, **kwargs)
   File "C:\Python27\lib\site-packages\django\db\models\query.py", line 358,
      in get clone = self.filter(*args, **kwargs) 
   File "C:\Python27\lib\site-packages\django\db\models\query.py", line 621,
      in filter return self._filter_or_exclude(False, *args, **kwargs)
   File "C:\Python27\lib\site-packages\django\db\models\query.py", line 639,
      in _filter_or_exclude clone.query.add_q(Q(*args, **kwargs))
   File "C:\Python27\lib\site-packages\django\db\models\sql\query.py", line 1250,
      in add_q can_reuse=used_aliases, force_having=force_having)
   File "C:\Python27\lib\site-packages\django\db\models\sql\query.py", line 1122,
      in add_filter process_extras=process_extras)
   File "C:\Python27\lib\site-packages\django\db\models\sql\query.py", line 1316,
      in setup_joins "Choices are: %s" % (name, ", ".join(names))) 

    FieldError: **Cannot resolve keyword 'csrfmiddlewaretoken' into field.
      Choices are:  complete, id, name** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T08:36:51.547

简而言之：不要那样做。

任何用户都可以发送他们想要的任何 POST 参数。您根本无法保证他们不会添加任何随机 POST 参数，即使您的表单不包含它。

与其尝试过滤`csrfmiddlewaretoken`掉您的参数，不如尝试将您想要包含的参数列入白名单。这意味着，只选择与您的模型字段相对应的那些，**并且**您希望用户能够过滤它们。

**更新：**
好的，那么，如何过滤掉它，只是为了满足你的好奇心。`flatten_dict`返回一个常规的 Python 字典，这意味着您可以简单`del attrs['csrfmiddlewaretoken']`地将其从字典中删除。

**更新（2）：**
要列入白名单，应该可以使用以下内容：

```
allowed_keys = ['complete', 'id', 'name']
attrs = dict((key, value) for key, value in ext_posted_data if key in allowed_keys) 
```

# java - 引用具有数组内容的图像

> ID：10512420
> 
> 赞同：0
> 
> 时间：2012-05-09T08:26:34.873
> 
> 标签：java, android

如何在图像名称的末尾引用具有数组索引的图像？这是我想要工作的代码（虽然...:()

```
for (int i = 0; i < melodiToner.length; i++)

setImageResource(R.drawable.gronpil+melodiToner[i]); 
```

即我想在第一个循环中加载图像`gronpil1.png`，在第二个循环`gronpil2.png`中。这与数组内容无关，我需要一些其他文件名结尾，所以我不能使用 i 变量，它必须来自数组。

感谢大家的帮助！

安德烈亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:31:49.673

这种方式（短版）：

```
for (int i = 0; i < melodiToner.length; i++) {
    int resId = getResources().getIdentifier("gronpil"+melodiToner[i], "drawable", getPackageName());
    setImageResource(resId);
} 
```

在每个循环中不调用 getResources 和 getPackageName 的更长版本：

```
Resources resources = getResources();
String packageName = getPackageName();
for (int i = 0; i < melodiToner.length; i++) {
    int resId = resources.getIdentifier("gronpil"+melodiToner[i], "drawable", packageName);
    setImageResource(resId);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:29:38.683

创建整数数组

```
int[] img = new int[5];

img[0] = R.drawable.no1;
img[1] = R.drawable.no2;
img[2] = R.drawable.no3;
img[3] = R.drawable.no4;
img[4] = R.drawable.no5;

(int i = 0; i < 5; i++){
    imgView.setImageResource(img[i]);
} 
```

# android - 异步中的多线程

> ID：10512422
> 
> 赞同：0
> 
> 时间：2012-05-09T08:26:55.577
> 
> 标签：android, multithreading, asynchronous, android-asynctask

1.  我有一个名为“A 类”的类 a) 我有一个名为 verify b) onClick of verify 我调用 auth.authenticate() 它返回布尔值 c) 为真 - 我必须调用一个意图

2.  验证函数在另一个类中（auth 是一个参考）

3.  验证函数如下（）

> 布尔验证（）{
> 
> ```
>  new AsyncTask<String, String, String>() {      
> 
>     preExecute()
>     {
>        --starting a progress bar--
>     }
>     doInBackground(String )
>     {
>         ----  huge authentication code-----
>         ------ returns true or false -------isVerified
> 
>     }
>     onPostExecute(String)
>     {
>             ---   dismiss progress bar-----------
>     }       
>     }.execute();
>     }
> 
>   --------end of AsynTask block----
> 
>   synchronized (this) {
> 
>         try {
>             this.wait();
>         } catch (InterruptedException e) {
>             // TODO Auto-generated catch block
>             e.printStackTrace();
>         }
> 
> return isVerified; ---- this should return to MyClass - after async finishes 
> ```

- 但这是在异步完成之前返回的。实际上它是正确的 - 因为这些是线程 - 并行运行，所以为了使其工作 - 我一直等到异步完成使用该同步块 - 但这会阻塞我的主线程 - （也没有进度条）

我可以在执行后成功调用我的下一个活动 - 因为我正在制作一个库类..我认为不应该......请帮助

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:16:46.067

AsyncTasks 也是线程。因此，您可以创建一个`AuthenticateAsyncTask<Void,Void,Void>`用于身份验证的新类，并通过覆盖该`onPostExecute`方法，您可以使用参数调用函数`isVerified`

例如：

```
boolean isVerified;

// Async Task
class AuthenticateAsyncTask extends AsyncTask<Void, Void, Void>{
    @Override
    protected Void doInBackground(Void... params) {
        // Authentication
        isVerified = returningValue // set your isVerified variable
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        // you can here call a function that indicates the authenticaion value is returned
    }

    @Override
    protected void onPreExecute() {}

} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:33:06.890

您可以从那里覆盖`onPostExecute()`并返回您的值，如果任务被取消，它将不会被调用。

# c# - C# log4net：带空格的 DateTimeFormat

> ID：10512424
> 
> 赞同：0
> 
> 时间：2012-05-09T08:27:02.753
> 
> 标签：c#, log4net, datetime-format

我正在使用 RollingFileAppender(log4net) 在文件中记录 24/7 应用程序的事件。文件名必须如下：

“blabla-2012-3-6.txt”或“blabla-2012-13-6”或“blabla-2012-3-12.txt”

问题是我不知道 DateTime 格式，它会使用空格而不是零。

```
RollingFileAppender appender = new RollingFileAppender ();
                 appender.Name = String.Format ("{0} appender_", name);
                 appender.File = string.Format ("{0} {1} {2} {3}", logPath, @ "\", file, name, extension);
                 appender.AppendToFile = true;
                 appender.LockingModel = new FileAppender.MinimalLock();
                 appender.StaticLogFileName = false;
              ->> Appender.DatePattern = string.Format ("yyyy-M-d");
.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:30:19.800

您可以将文字放在格式字符串中：

```
Appender.DatePattern = "yyyy- M- d"; // don't need string.Format 
```

那不行吗？

编辑：我现在明白了：你想要 MM，但你想要“5”而不是“05”。DateTime 格式没有办法促进这一点。您可以创建自己的衍生 RollingFileAppender 来尝试处理这种特殊情况格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:56:17.307

Log4net 使用以下内容来确定滚动文件附加程序中的文件名：

```
m_scheduledFilename = 
CombinePath(File, m_now.ToString(m_datePattern, System.Globalization.DateTimeFormatInfo.InvariantInfo)); 
```

你猜 m_now 是当前日期时间。所以你可以使用所有 DateTime[可用的自定义格式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)，我认为你需要的格式不是开箱即用的。因此，如果您绝对需要这种格式，您可以通过从该方法派生`RollingFileAppender`并覆盖该`RollOverTime`方法来编写自定义附加程序。

# python - 使用matplotlib我怎么能用python中的给定数据绘制直方图

> ID：10512425
> 
> 赞同：1
> 
> 时间：2012-05-09T08:27:05.187
> 
> 标签：python, plot, matplotlib, histogram

这是数据：

```
111, 3  
122, 4  
155, 3  
192, 5  
11,  9  
123, 10  
120, 23 
```

现在我怎么能用这两组数据绘制直方图`matplotlib`。请帮忙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T08:52:22.470

您可以像这样创建条形图：

```
from matplotlib.pyplot import *
x = [111,122,155,192,11,123,120,]
y = [3,4,3,5,9,10,23]
bar(x,y)
show() 
```

给出： 为您![在此处输入图像描述](../Images/5b87df4494e7e8150a16eccfaa616b92.png) 使用`hist()`数据箱，因此您可以将原始数据传递给它，即。它看起来像这样：

```
data = [111, 111, 111, 122, 122, 122, 122, 155, ...] 
```

# java - 如何存根获取/设置简单类型

> ID：10512428
> 
> 赞同：4
> 
> 时间：2012-05-09T08:27:15.400
> 
> 标签：java, mockito, setter, getter, stub

我是 Mockito 的新手，我想知道如何存根获取/设置对。

例如

```
public interface Order {
     public short getStatus();
     public void setStatus(short status);
} 
```

我怎样才能让他们行为正常：

如果在某个测试中我调用`setStatus(4);`我想`getStatus()`返回`4`. 如何才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T08:31:51.167

你是在[嘲讽还是嘲讽](https://stackoverflow.com/questions/2536551/rhino-mocks-difference-between-generatestubt-generatemockt/2536570#2536570)？

区别在于您是在验证行为还是为测试提供数据。你说：

> 如果在某个测试中我调用 setStatus(4); 我希望 getStatus() 返回 4。

这意味着两者同时存在。您要么想验证`setStatus()`是用参数 4 调用的。

```
verify(mockObject).setStatus(4); 
```

或者你想将你的模拟对象设置为在`getStatus()`被调用时返回 4。

```
when(mockObject.getStatus()).thenReturn(4); 
```

Mockito 有[一些教程](http://mockito.googlecode.com/svn/branches/1.5/javadoc/org/mockito/Mockito.html)解释了如何在每种情况下使用它。我怀疑你可以在你的测试中做这两个（但没有检查），但这对我来说是一种气味，因为理想情况下你应该只在测试中检查一个单一的东西，其他所有东西都应该被存根。但是，与以往一样，上下文就是一切，因此您可能需要存根对象的一部分，以便验证另一部分的行为，在这种情况下就可以了。

遵循[AAA 语法](http://c2.com/cgi/wiki?ArrangeActAssert)并安排您的测试（即进行设置并拥有`when`子句）然后采取行动（即在被测对象上调用方法）然后进行断言（即拥有您的`verify`语句）

**编辑**

似乎在 mockito 的较新版本（1.8+）中，它可能可以做你想做的事，尽管不推荐。您可以使用 Spy 创建对象的部分模拟。在这种情况下，您应该能够为您的实际对象创建一个 Spy，让`getStatus()`and`setStatus()`方法不被存根（因此它们实际上被调用和使用）并且只是存根其他方法（或者只是验证它们可能被调用）。您可以[在此页面上的第 13 节“监视真实对象”](http://mockito.googlecode.com/svn/branches/1.5/javadoc/org/mockito/Mockito.html)中了解它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-14T00:20:13.627

您可以设置 setStatus 方法的行为，以便它更新 getStatus 方法的行为，如下所示：

```
 Mockito.doAnswer(invocation -> {
        short status = invocation.getArgumentAt(0, Short.class);
        Mockito.when(mockOrder.getStatus()).thenReturn(status);
        return null;
    }).when(mockOrder).setStatus(Mockito.anyShort()); 
```

# macos - Mac OSX 上的 Oracle，从虚拟机访问

> ID：10512431
> 
> 赞同：0
> 
> 时间：2012-05-09T08:27:25.393
> 
> 标签：macos, oracle, osx-snow-leopard, virtualization, virtual-machine

我已经按照[Raimonds Simanovskis 的指南](http://blog.rayapps.com/2009/09/14/how-to-install-oracle-database-10g-on-mac-os-x-snow-leopard/)在 Mac OSX Snowleopard 上安装了 Oracle ，据我所知，这是 Snowleopard 的唯一有效安装指南。

只要我只在 MacOX 下的 Mac 上使用 Oracle，它就可以正常工作，没有问题。

现在我在 Mac (Parallels Desktop 5) 上有一个虚拟机，并且在这个 VM 中运行 Windows XP。我想从 Windows 下的 VM 访问在 Mac OSX 上运行的 Oracle 数据库。从逻辑上讲，它就像从另一台计算机访问一样。但总是当我尝试从 XP 访问时，例如使用 sqlplus

```
sqlplus iwes/iwes@192.168.3.2:1521/dbname 
```

（192.168.3.2 它是使用“仅主机网络”的 MacOS 的地址。此地址在其他应用程序中运行良好。）
然后我收到错误消息

```
ERROR:
ORA-12541: TNS: Kein Listener    [German for: "no listener"] 
```

（在 Mac OSX 上，Oracle 和侦听器都已启动并正常工作）

我的 Oracle 安装有什么问题或缺少什么？

这是我的 listener.ora

```
SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = PLSExtProc)
      (ORACLE_HOME = /opt/oracle/product/10.2.0/db_1)
      (PROGRAM = extproc)
    )
    (SID_DESC =
      (SID_NAME = dbname)
      (ORACLE_HOME = /opt/oracle/product/10.2.0/db_1)
      (GLOBAL_DBNAME = dbname)
  )

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    )
  ) 
```

和我的 tnsnames.ora

```
dbname =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = dbname)
    )
  )

EXTPROC_CONNECTION_DATA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC0))
    )
    (CONNECT_DATA =
      (SID = PLSExtProc)
      (PRESENTATION = RO)
    )
  ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:55:07.643

您的 listener.ora 应该指定 192.168.3.2 作为主机，而不是 localhost。

您的 tnsnames.ora 应指定 192.168.3.2 作为别名 dbname 的主机（如果您使用 tnsnames.ora） 在您的示例中，您不使用 tnsnames.ora 而是直接跳转到 mac 的 IP 地址。还要检查mac上的防火墙。

# syntax-error - 如何在不退出 shell 的情况下停止在特定条件下获取 (t)csh 脚本？

> ID：10512435
> 
> 赞同：3
> 
> 时间：2012-05-09T08:27:48.870
> 
> 标签：syntax-error, exit, csh, tcsh

我必须获取一个 tcsh 脚本来修改环境变量。

需要进行一些测试，如果任何测试失败，采购将停止*而不*退出外壳。我不想将脚本作为子进程运行，因为我需要在父进程中修改子进程无法执行的环境变量。这与作者实际上可以将脚本作为子进程运行的[这个问题](https://stackoverflow.com/questions/3041576/how-to-run-a-tcsh-shell-command-and-selectively-ignore-the-status)相似但不同。

通常的解决方法是创建一个运行脚本 (csh/bash/perl/python/...) 的别名，该脚本使用所有 env var 设置写入一个临时文件，并在最后源并删除该临时文件。[这里有更多信息供感兴趣的人使用（演示 bash 的解决方案）](https://stackoverflow.com/a/496776/923794)。对于我非常简单和简短的东西，我不需要额外的别名。

所以我的解决方法是引发语法错误，停止任何`source`执行。这是一个例子：

```
test $ADMIN_USER = `filetest -U: $SOME_FILE` || "Error: Admin user must own admin file" 
```

在好的情况下，短路`||`会导致错误文本被忽略。在测试失败时，错误文本被解释为命令，未找到，源停止并产生合理的错误消息：

```
Error: Admin user must own admin file: Command not found. 
```

有没有更好的方法来做到这一点？我忽略了一些内置的 csh/tcsh？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:10:19.587

感谢与[用户 shellter](https://stackoverflow.com/users/620097/shellter)的讨论，我刚刚验证了我的假设

```
test $ADMIN_USER = `filetest -U: $SOME_FILE` || \
  echo "Error: Admin user must own admin file" && \
    exit 
```

实际上会退出封闭的交互式外壳。但事实并非如此。

所以我上面的问题的答案实际上是：

只需使用正常`exit`的，`source`将停止获取脚本，同时保持调用交互式 shell 运行。

# content-management-system - 内网网站内容管理

> ID：10512437
> 
> 赞同：0
> 
> 时间：2012-05-09T08:27:57.150
> 
> 标签：content-management-system, intranet, content-management

我目前正在为小型企业 Intranet（5 页）设计我的第一个网站。谁能推荐管理公司新闻部分内容的最佳方式？我真的不想参与日常内容更新，所以对于营销人员来说，创建和上传**简单**的新闻文章（可能是在 MS Word 中创建的）很简单，假设作者没有 html 技能。

我读过内容管理系统，但是，

A. 我不会获得任何购买资金
B. 认为对于一个只有 5 页的小型内部网站来说这有点矫枉过正。

这是我计划中的一个意外障碍，因为我认为这是一个相当常见的功能，但我似乎无法找到任何确定的文章来满足我的需求。
我愿意接受建议（即使确认 CMS 是唯一可行的方法）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T01:22:09.030

您的要求是：小型网站，没有预算，并且需要让营销人员轻松上传新闻项目。

我的建议是使用多合一的 CMS，例如 wordpress，它具有您所说的开箱即用的功能。

我的猜测是这个组织刚刚进入“内部网”，所以如果价值得到回报，可以用来证明支出合理的快速简单的东西是关键。也许看看一个每周一次自动将博客文章摘要通过电子邮件发送给所有员工的插件会很有用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-09T07:22:48.957

有很多选项，您可以使用以下任何一种：

*   Joomla
*   银条 CMS
*   模组X
*   轻松的 CMS
*   青蛙CMS
*   德鲁巴

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-09T10:54:56.027

除了 Mckinnon 先生所说的之外，您必须记住，如果您不想参与将要使用该平台的人的每日更新，您应该考虑以下事项：

*   你想显示什么样的数据
*   谁可以查看/修改该数据
*   谁可以创建/删除数据
*   您将如何组织所有这些数据

您的 Intranet 不应仅限于显示或创建数据，最终所有数据都可以变成您公司的漂亮知识库 (KB)，最终您的同事可以分享他们对公司最终可能出现的常见和罕见问题的解决方案。这个知识库很棒又省时，建议尽快上手，让公司的新人可以访问它，看到最常见的问题，他们可以尽快投入生产（我们都知道时间是一种奢侈品每个公司的规模）。

请记住，所有这些知识和数据对您和您的同事来说都没有价值，因此您还应该考虑一些额外的登录凭据，以便您的公司系统管理员可以管理这些凭据并最终审核未经授权的访问（如果适用） .

我希望这从管理的角度来看会有所帮助

# symfony - KnpSnappyBundle 在响应中使用图像

> ID：10512438
> 
> 赞同：0
> 
> 时间：2012-05-09T08:28:04.040
> 
> 标签：symfony

有谁知道是否可以在网页内使用由 KnpSnappyBundle 生成的图像？我能够从 html 渲染图像并将其作为响应发送给客户端：

```
 $html = $this->renderView('YOPYourOwnPoetBundle:thePoet:poemJPG.html.twig', array(
      'poem'  => $customizedPoem,
    ));

    $data = $this->get('knp_snappy.image')->getOutputFromHtml($html); 
```

但我似乎无法找到如何在 html 响应中使用此图像。我应该如何使用“$data”？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:47:02.550

您可以将图像存储在文件系统上并像往常一样引用它。

如果您不想存储图像，您可以随时编写一个控制器：

*   创建一个新的响应对象
*   设置内容类型（任何图像内容类型）
*   将内容设置为 $data 的内容
*   返回该响应

这样您就可以即时生成图像。

# hadoop - Hadoop 守护进程没有停止

> ID：10512441
> 
> 赞同：4
> 
> 时间：2012-05-09T08:28:25.493
> 
> 标签：hadoop, hdfs

我试图通过 ./stop-all.sh 脚本停止 hadoop 中的守护进程，但它给出了以下消息：

没有jobtracker停止localhost：没有tasktracker停止没有namenode停止localhost：没有datanode停止localhost：没有secondarynamenode停止

我尝试使用 jps 查看 hadoop 是否在此之后运行，它显示：

27948 SecondaryNameNode 27714 NameNode 28136 TaskTracker 27816 DataNode 28022 JobTracker 8174 Jps

也就是说，它正在正确运行所有守护进程。我还检查了 hadoop dfs -ls / 以查看我是否能够连接到 hdfs。它正在工作。

我正在按超级组用户的意思运行 stop-all.sh 脚本，权限没有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T10:36:25.027

如果启动/停止脚本在 $HADOOP_PID_DIR 文件夹（默认为 /tmp）中找不到 pid 文件，则会显示此消息。

如果：

*   这些文件已被删除（由某人或某事），或
*   环境变量 $HADOOP_PID_DIR 自您启动守护程序以来已更改，或者
*   停止守护进程的用户不是启动它们的用户

然后 hadoop 将显示您看到的错误消息。

从 hadoop-daemon.sh 文件中选择的部分（对于 1.0.0）：

```
#   HADOOP_IDENT_STRING   A string representing this instance of hadoop. $USER by default

if [ "$HADOOP_IDENT_STRING" = "" ]; then
  export HADOOP_IDENT_STRING="$USER"
fi

# ....

if [ "$HADOOP_PID_DIR" = "" ]; then
  HADOOP_PID_DIR=/tmp
fi    

# ....

pid=$HADOOP_PID_DIR/hadoop-$HADOOP_IDENT_STRING-$command.pid

# ....

(stop)

  if [ -f $pid ]; then
    if kill -0 `cat $pid` > /dev/null 2>&1; then
      echo stopping $command
      kill `cat $pid`
    else
      echo no $command to stop
    fi
  else
    echo no $command to stop
  fi
  ;; 
```

# ipad - kiwiViewer 的灯光选项

> ID：10512443
> 
> 赞同：0
> 
> 时间：2012-05-09T08:28:37.290
> 
> 标签：ipad, opengl-es, 3d, shader, vtk

我试图向 kiwiviewer 添加灯光选项以可视化医疗 3D 模型，在我的例子中是头部的表面模型。我几个小时都找不到起点，因为当我删除所有 glsl 着色器时，我仍然得到控制台输出“INFO：编译着色器：”而没有错误，并且 3D 模型的视图正确显示

我将不胜感激任何帮助。曼努埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:48:23.283

在构建时，每个着色器都被编码成一个 cpp 文件并编译到名为 libvesShaders.a 的库中。如果您修改了着色器，但没有重新编译库并重新链接应用程序，则应用程序将继续使用先前版本的着色器进行操作。

如果您想避免重新编译步骤，您可以创建一个新的着色器文件并将其添加到 xcode 项目中，以便该文件与应用程序一起打包。然后在运行时从 iOS 文件系统上的文件中读取着色器源。

将来您可能想尝试[VES 邮件列表](http://public.kitware.com/cgi-bin/mailman/listinfo/ves)来解决 VES 和 KiwiViewer 问题。

# android - 从服务中控制 Galaxy Nexus 和 Note 上的相机闪光灯

> ID：10512444
> 
> 赞同：1
> 
> 时间：2012-05-09T08:28:42.323
> 
> 标签：android, android-camera

我想控制 Galaxy Nexus 和 Note 上的摄像头。我已经设法在这里使用开源应用搜索灯控制它：[http ://code.google.com/p/search-light/](http://code.google.com/p/search-light/)

我唯一的问题是我想控制从服务而不是从活动中闪烁 LED，似乎他们让它工作的方式是使用 SurfaceView 并将一个可见点渲染到屏幕上。

如果需要，我不介意启动活动，只要有某种方法可以阻止它干扰屏幕上当前活动的内容。

有什么建议么？谢谢

# objective-c - 资源子文件夹中的文件数

> ID：10512446
> 
> 赞同：1
> 
> 时间：2012-05-09T08:28:47.287
> 
> 标签：objective-c

我必须知道资源文件夹的每个子文件夹中有多少张图片。我发现了这个：

```
NSMutableString* bundlePath = [NSMutableString stringWithCapacity:4];
[bundlePath appendString:[[NSBundle mainBundle] bundlePath]];

[bundlePath appendString:@"/MyFolder"];
NSArray *directoryContent  = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:bundlePath error:nil];
int numberOfFileInFolder = [directoryContent  count]; 
```

和这个：

```
int pants = [[[NSFileManager defaultManager] contentsOfDirectoryAtPath:@"/your/path/here" error:NIL] count]; 
```

什么是最好的方法 ？

解决方案：

```
int numberOfFileInFolder = [[[NSFileManager defaultManager] contentsOfDirectoryAtPath:[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"/Angry"] error:Nil] count]; 
```

复制文件时要注意！！！不要忘记检查“为任何添加的文件夹创建文件夹引用”

# android - 为什么我会收到此错误：“默认”不是任何设备/区域设置组合的最佳匹配？

> ID：10512447
> 
> 赞同：10
> 
> 时间：2012-05-09T08:28:47.723
> 
> 标签：android, console, locale

我的项目已编译并正确运行，但是当我打开布局活动时，我在控制台中收到此错误：

```
[2012-05-09 12:54:21 - order] 'default' is not a best match for any device/locale combination.
[2012-05-09 12:54:21 - order] Displaying it with 'Locale Language ___Region __, sw800dp, w1280dp, h800dp, Extra Large Screen, Long screen aspect ratio, Landscape Orientation, Normal, Day time, Medium Density, Finger-based touchscreen, Soft keyboard, No keyboard, Exposed navigation, No navigation, Screen resolution 1280x800' which is compatible, but will actually be displayed with another more specific version of the layout. 
```

我该如何解决？

# php - PHP：在双引号内使用变量

> ID：10512452
> 
> 赞同：27
> 
> 时间：2012-05-09T08:29:10.840
> 
> 标签：php

请检查以下代码。

```
$imagebaseurl = 'support/content_editor/uploads/$name'; 
```

这`$imagebaseurl`是一个变量，其中包含指向我的图像文件夹（上传）的链接，并且在该文件夹中，我还有一些以我的用户名命名的其他文件夹。例如：我有一个名叫 john 的用户，所以链接应该看起来像 this-> `support/content_editor/uploads/john`。

主要想法是当任何用户登录并浏览他的图片库时，我想带他到他自己的画廊，该画廊基本上是以他的名字命名的。

当他访问画廊时`$name`，链接中的值将来自用户的登录名（来自会话）。现在的问题是，您可能已经了解`$name`上述链接中的放置位置是错误的，这就是它不起作用的原因。我得到了整个 URL> (support/content_editor/uploads/$name) 而不是 (support/content_editor/uploads/john)

现在你能告诉我如何`$name`在这个中使用`$imagebaseurl = 'support/content_editor/uploads/$name';`

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-09T08:30:23.953

```
$imagebaseurl = 'support/content_editor/uploads/' . $name; 
```

或者

```
$imagebaseurl = "support/content_editor/uploads/{$name}"; 
```

注意，如果你使用双引号，你也可以把上面的写成：

```
$imagebaseurl = "support/content_editor/uploads/$name"; 
```

`{$...}`养成使用双引号而不是 only的习惯是很好的`$...`，因为有时您需要将变量插入字符串中，而 PHP 不知道哪一部分是变量，哪一部分是字符串。

如果您想要最佳性能，请使用带单引号的字符串连接。

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2017-05-09T20:59:58.917

我不能更不同意之前的帖子。

我几乎可以称其为不好的做法

```
$varname = 'EXAMPLE';

$fulltext = "This is an $varname"; 
```

根据我的经验，使用我的一个好朋友 sprintf() 更易于维护；

```
define('CONST_NAME', 'This is an example of a better %s');
define('EXAMPLE', sprintf(CONST_NAME, 'practice'));

echo EXAMPLE; 
```

为什么？第一个可能看起来更清晰，但第二个更可重用。我建议使用 sprintf 而不是 php 魔术双引号无意义，从字面上看，没有其他语言存在。

[http://php.net/manual/en/function.sprintf.php](http://php.net/manual/en/function.sprintf.php)

这也是与 C# 和许多其他语言非常相似的做法。

另请参阅：[https ://msdn.microsoft.com/en-us/library/system.string.format(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.string.format(v=vs.110).aspx)

# c# - 从 Infopath 调用 Sharepoint Webservice 时出现 SecurityException

> ID：10512457
> 
> 赞同：0
> 
> 时间：2012-05-09T08:29:38.603
> 
> 标签：c#, sharepoint-2010, infopath

我正在尝试创建一个 Infopath-formular，当正确填写时，它应该调用 lists.asmx webservice 以将数据添加到某个列表。但是，对 web 服务的调用不能正常工作，我得到了一个 SecurityException。

但是，在调试之后，在创建用于登录的 NetworkCredential 时，我体验到 SecurityException 被更早地抛出。我所做的只是

```
NetworkCredential x = new NetworkCredential();
x.UserName = "myUser";
x.Domain = "myDomain";
x.Password = "myPasword"; 
```

监控 x.Domain 或 x.Password 时出现以下异常：

```
Message: Fehler bei der Anforderung des Berechtigungstyps "System.Security.Permissions.SecurityPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089".
Source: mscorlib
Stack:
   bei System.Security.CodeAccessSecurityEngine.Check(Object demand, StackCrawlMark& stackMark, Boolean isPermSet)
   bei System.Security.CodeAccessPermission.Demand()
   bei System.Net.NetworkCredential.get_Password() 
```

我应该怎么办？我的猜测是我必须设置 Infopath 中的某种信任级别。但不知道如何做到这一点。

提前致谢！

编辑：我确实找到了这个网站：[http](http://www.gleamtech.com/support/forums/2458/net-permission-problem) ://www.gleamtech.com/support/forums/2458/net-permission-problem 不幸的是这对我没有帮助（信任级别已经设置为最高）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:53:16.427

您需要使 InfoPath 表单完全信任（与您引用的文章中的建议不同，该建议使 ASP.Net 网站以完全信任的方式运行）。

对于 InfoPath 2010：文件-> 信息-> 表单选项-> 安全和信任-> 完全信任。

请注意，启用 Web 的完全信任表单必须由管理员部署到 SharePoint，您不能将它们发布为沙盒表单。

# android - 如何使用android中的上下文菜单删除联系人

> ID：10512461
> 
> 赞同：1
> 
> 时间：2012-05-09T08:30:06.890
> 
> 标签：android

我尝试以下代码使用按名称选择的上下文菜单项删除联系人。

```
public static boolean deleteContact(Context ctx, String phone, String name) {

    Uri contactUri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(phone));
    Cursor cur = ctx.getContentResolver().query(contactUri, null, null, null, null);
    try {
        if (cur.moveToFirst()) {
            do {
                if (cur.getString(cur.getColumnIndex(PhoneLookup.DISPLAY_NAME)).equalsIgnoreCase(name)) {
                    String lookupKey = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
                    Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_LOOKUP_URI, lookupKey);
                    ctx.getContentResolver().delete(uri, null, null);
                    return true;
                }

            } while (cur.moveToNext());
        }

    } catch (Exception e) {
        System.out.println(e.getStackTrace());
    }
    return false;
} 
```

但我不知道如何将此代码放入我选择的上下文菜单项中

```
public boolean onContextItemSelected(MenuItem item)
{
    switch (item.getItemId()) 
    {
    case 0:

        return true;
    }
    return super.onContextItemSelected(item);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:06:42.173

这取决于您的代码。如果 onContextItemSelected 在您的活动中：

ContactManager.deleteContact(MyActivity.this.getContext(), MyActivity.this.phone, MyActivity.this.name);

# jquery - 带有 jQ uery 动画的 div 上的 iScroll 问题

> ID：10512462
> 
> 赞同：0
> 
> 时间：2012-05-09T08:30:06.877
> 
> 标签：jquery, iscroll4

我在使用 iScroll 和实现它的 div 时遇到了一些问题。

除了一件事，一切都很好。

```
<div class="previous"></div>
<div style="width: 100%; position: relative;" id="wrapper">
    <div class="container" style="width: 300%; position: absolute;">
        <div style="width: 33.3333%; float: left;">content block one</div>
        <div style="width: 33.3333%; float: left;">content block two</div>
        <div style="width: 33.3333%; float: left;">content block three</div>
    </div>
</div>
<div class="next"></div> 
```

我有一个 jQuery 函数，可以根据您按下的按钮将 '.container' div 向左或向右 100% 移动。“上一个”或“下一个”。

现在问题出现在 iScroll 更改中。它将新样式插入到“#wrapper”div 的子 div 中，以便在手指滑动时移动它。因此，当您单击下一个和上一个时，它不会拾取它，因此当您在最后一个 div 上时，您仍然可以滑动到 div 的“.next”区域......其中不包含任何内容。

我希望这是有道理的。我想改变 iScroll.js 或其他东西来改变 '.container' div 的绝对位置。

提前致谢。

这是我的 jQuery 代码，用于使用按钮为移动设置动画。

```
<script type="text/javascript">
var counter = 1;
// Previous arrow function
$(".previous").click(function(){

if (counter === 1) {
    counter = 3;
    $(".container").animate({"left": "-=200%"}, "slow");
} else {
    counter --;
    $(".container").animate({"left": "+=100%"}, "slow");
}
return counter;
});

//Next arrow function
$(".next").click(function(){

if (counter === 3){
    counter = 1;
    $(".container").animate({"left": "+=200%"}, "slow");
} else {
    counter ++;
    $(".container").animate({"left": "-=100%"}, "slow");
}
return counter;
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:38:02.093

好的，

我已经想好该怎么做了。

在我的函数中，我添加了 iScroll 函数。

```
<script type="text/javascript">
var counter = 1;
// Previous arrow function
$(".previous").click(function(){

if (counter === 1) {
    counter = 3;
    myScroll.scrollToElement('div:nth-child(' + counter + ')', 500);
    } else {
        counter --;
        myScroll.scrollToElement('div:nth-child(' + counter + ')', 500);
    }
        return counter;
    });

//Next arrow function
$(".next").click(function(){

    if (counter === 3){
        counter = 1;
        myScroll.scrollToElement('div:nth-child(' + counter + ')', 500););
    } else {
        counter ++;
        myScroll.scrollToElement('div:nth-child(' + counter + ')', 500);
    }
        return counter;
    });

</script> 
```

# javascript - 在 setTimeout() 中使用 $(this);

> ID：10512465
> 
> 赞同：6
> 
> 时间：2012-05-09T08:30:23.173
> 
> 标签：javascript, jquery

我想在 jQuery 中动态设置超时。动态设置的超时函数需要使用 $("this")，但我似乎无法让它工作。

一个例子：

```
$("div").each(function(){
    var content = $(this).attr('data-content')
    setTimeout("$(this).html('"+content+"')",$(this).attr('data-delay'));
});​ 
```

[http://jsfiddle.net/qmhmQ/](http://jsfiddle.net/qmhmQ/)

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-09T08:30:52.623

```
$("div").each(function(){
    var content = $(this).attr('data-content'),
        $this = $(this); // here $this keeps the reference of $(this)
    setTimeout(function() {

      // within this funciton you can't get the $(this) because
      // $(this) resides within in the scope of .each() function i.e $(this)
      // is an asset of .each() not setTimeout()
      // so to get $(this) here, we store it within a variable (here: $this) 
      // and then using it

        $this.html(content);
    }, $this.attr('data-delay'));
});​ 
```

**[演示](http://jsfiddle.net/thecodeparadox/qmhmQ/6/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T08:36:28.280

您的代码应如下所示：

1.  传递一个函数而不是一个字符串。说明：将字符串传递给 setTimeout 时会出现问题，因为它在与原始范围不同的范围内运行，因此会出现错误。

2.  使用 jQuery`data()`方法

    ```
    $("div").each(function(){
         var content = $(this).attr('data-content'),
             $el = $(this),
             setContent = function(){
                $el.html(content);
             }
         setTimeout(setContent,$el.data('delay'));
    });​ 
    ```

您可以将函数分配给变量并将该变量作为参数传递给 setTimeout，这是最干净的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T08:36:45.420

使用闭包（[一些](https://developer.mozilla.org/en/JavaScript/Guide/Closures) [教程](http://msdn.microsoft.com/en-us/magazine/ff696765.aspx)）。

使用字符串 with`setTimeout`不是一个好主意。还要注意，因为如果在闭包内使用`this`它可以更改其上下文（[即 call-site ）。](https://github.com/getify/You-Dont-Know-JS/blob/master/this%20%26%20object%20prototypes/ch2.md#call-site)

如果使用数据属性，您可以使用 jQuery 数据函数。

```
$("div").each(function() {
  var instance = $(this);
  var content = instance.data('content');
  var method = function() {
    instance.html(content);
  };
  setTimeout(method, instance.data('delay'));
});
```

```
div {
  border: 1px solid black;
  margin: 5px;
  height: 1.5em;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div data-content="fus" data-delay="1000"></div>
<div data-content="ro" data-delay="2000"></div>
<div data-content="dah" data-delay="5000"></div>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T08:46:05.093

我只是在扩展上面的答案之一，

1.  在 JavaScript 中使用 class 或 id 来引用 div。这将避免页面中进一步的标签名称冲突。

所以你更新的 HTML 是，

```
<div data-content="fus" data-delay="1000" class="dv"></div>
<div data-content="ro" data-delay="2000" class="dv"></div>
<div data-content="dah" data-delay="5000" class="dv"></div>​ 
```

现在你更新的 JavaScript 代码是，

```
$(".dv").each(function(){
    var content = $(this).attr('data-content'),
    $this = $(this);
    setTimeout(function() {
       $this.html(content);
    }, $this.attr('data-delay'));
});​ 
```

主线在哪里

> $这个 = $(这个);

我们将当前元素分配给 setTimeout 函数中使用的变量。

请参考这个[链接](http://jsfiddle.net/qmhmQ/7/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T19:11:17.340

以下似乎是空白、可读性和揭示意图的良好折衷。

```
$('div').each(function(){
    var element = $(this)
    var content = element.attr('data-content')
    var delayms = element.attr('data-delay')
    var action = function() { element.html(content) }

    setTimeout(action, delayms)
}) 
```

见：http: [//jsfiddle.net/wilmoore/LSs6g/](http://jsfiddle.net/wilmoore/LSs6g/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-09T08:35:49.520

从 settimeout 中取出 $(this) 并将其保存在*$("div").each(function(){*这一行之后的局部变量 say 'self' 中

```
var self=$(this); 
```

并进一步使用那个*自我*。

# arrays - 将阻塞数据的一维索引转换为整个数据的一维索引

> ID：10512470
> 
> 赞同：0
> 
> 时间：2012-05-09T08:30:45.723
> 
> 标签：arrays, algorithm, indexing

我将体积（3D 图像）分为 16x16x16 块。整个体积为 128x128x128。数据存储在线性存储器中。对于每个块，我将起始索引存储在整个数据的线性内存中。现在，我需要将索引从 16x16x16 块重新计算为 128x128x128 数据的索引。每个块都使用索引 0、1、2、3、...4096 进行迭代，我需要将其更改为全局线性索引。

例如。：

```
Block 1, index [2] => convert to index [18]
Block 1, index [18] => convert to index [146] 
```

2D 示例在图像中进行了说明。我想将红点（索引 135）转换为整个图像中的索引。这意味着它将是 1040 + 的东西。块角中的数字是图像内的线性偏移。我需要 3D 数据的公式。 ![二维示例](../Images/c793f5afce628cbbe326c42e521caba7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:57:54.967

块中的坐标：（索引 div 256，（索引 div 16）mod 16，索引 mod 16）

方块原点坐标：(16 * (Block div 64), 16 * ((Block div 8) mod 8), 16 * (Block mod 8))

整卷坐标：(16 * (Block div 64) + (Index div 256),(16 * ((Block div 8) mod 8) + ((Index div 16) mod 16)), 16 * (Block mod 8) + (索引 mod 16))

所以全局索引是

128*128*(16 * (块 div 64) + (索引块 256)) + 128 * (16 * ((块块 8) mod 8) + ((索引块 16) mod 16)) + 16 * (块mod 8) + (索引 mod 16)

# mongodb - mongoid destroy_all 后跟 count 结果在缓存结果中

> ID：10512472
> 
> 赞同：1
> 
> 时间：2012-05-09T08:30:50.597
> 
> 标签：mongodb, mongoid

我使用 MongoId 阅读我理解的[问题的给定答案 Mongoid](https://stackoverflow.com/questions/6112420/mongoid-query-caching)

不缓存任何查询

现在运行以下查询时

> PartPriceRecord.destroy_all
> 
> PartPriceRecord.count() ==> 31721

这怎么可能我只是删除所有记录，这让我感觉 mongo 正在缓存某些查询

在我的 mongoid 查询日志中，我可以看到每删除两个查询操作

```
MONGODB (0ms) decisiv_staging['system.indexes'].insert([{:name=>"part_number_1", :ns=>"decisiv_staging.part_price_records", :key=>{"part_number"=>1}, :unique=>true}])
MONGODB (0ms) decisiv_staging['part_price_records'].remove({:_id=>BSON::ObjectId('4fa39b35edd7f4306b0042bf')}) 
```

表示已创建索引并删除记录。

那么 mongo 是如何缓存查询的有没有办法从 mongoid 清除 mongo 缓存 如果 mongo 正在缓存查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:48:06.600

警告：我不是 mongoid 用户。

> 那么mongo是如何缓存查询的

Mongo 本身不做任何这样的缓存。

如果您查看在 db 上执行的查询：

```
$ mongodb viren
> db.setProfilingLevel(0); 
> db.system.profile.drop();  
> db.setProfilingLevel(2); 
```

然后执行你的代码，你会在日志中看到类似这样的内容：

```
> db.system.profile.find()
{ "ts" : ISODate("2012-05-09T08:39:21.657Z"), "op" : "insert", "ns" : "viren.part_price_records", "millis" : 0, "client" : "127.0.0.1", "user" : "" }
{ "ts" : ISODate("2012-05-09T08:39:26.553Z"), "op" : "remove", "ns" : "viern.part_price_records", "query" : { }, "millis" : 0, "client" : "127.0.0.1", "user" : "" } 
```

直接查看数据库将使您能够准确了解/了解发出了哪些查询以及是否存在缓存 - 它在哪里（它不会在数据库本身中）。

**但是**，上面与您在问题中显示的查询日志的最大区别是最多会删除一个对象，上面的条件 ( *)*将截断集合。`.remove({:_id=>BSON::ObjectId('4fa39b35edd7f4306b0042bf')})``{}`

查看[destroy all](http://mongoid.org/docs/persistence/standard.html#destroy_all)的文档，它在每个已删除的行上运行回调 - 这可能意味着它一次删除一个（这需要 30k 行将花费大量时间）。您可以使用[delete all](http://mongoid.org/docs/persistence/standard.html#delete_all)它会（我假设）直接发出查询以删除所有行（`db.part_price_records.remove({})`）。如果您需要销毁回调，则需要调查为什么您的代码显然只找到要删除的一行，或者哪个回调正在中止对其他现有行的删除。

# ruby-on-rails - 在 Rails 中限制属性

> ID：10512476
> 
> 赞同：0
> 
> 时间：2012-05-09T08:30:55.160
> 
> 标签：ruby-on-rails

我有一个需要 0、1 或 2 个联系人的锦标赛模型。我创建了一个 Contact 模型并设置`has_many :contacts`在 Tournament 和`belongs_to :tournament`Contact 上。锦标赛`accepts_nested_attributes_for :contacts`。

但是，当我为锦标赛构建表单时，我不太明白应该如何做。我正在考虑要两个`fields_for :contacts`，但感觉很乱。我还考虑过在 Tournament 模型上有两个特定属性（类似于`primary_contact`和`secondary_contact`），但我不确定如何做到这一点。

有没有“正确”的方法来做到这一点？有什么建议么？

我在 Rails 3.1 顺便说一句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:45:56.870

`fields_for :contacts`是正确的方法。

利用这样一个事实，如果`tournament.contacts`有多个项目，那么一个项目`fields_for :contacts`将显示多个字段集。

然后利用`tournament.contacts.build`将创建未保存`Contact`并将其添加到`contacts`集合的事实。如果您在显示表单之前在控制器中执行此操作，那么您`fields_for`将显示此空联系人并使用其嵌套属性正确使用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:37:43.227

我认为您不应该限制 2 个字段的联系人，因为我认为您应该保留以后为锦标赛添加更多联系人的灵活性

我在 Project 和用户之间做了一个小例子（通过使用复选框），你可能会明白

[https://github.com/sameera207/HABTMsample](https://github.com/sameera207/HABTMsample)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:36:49.430

我建议您添加一个非持久性`contact_list`属性，然后您可以在一个字段中输入所需数量的联系人，用逗号分隔：

```
has_many :contacts
attr_accessor :contact_list

def contact_list=value
  value.split(',').each do |email|
    self.contacts.build(:email => email).save
  end
end

def contact_list
  self.contacts.join(',')
end 
```

如果您需要为每个联系人输入更多信息（不仅仅是姓名、电子邮件或电话号码），那么您将需要更多字段。

以下 railscast 可能会对您有所帮助：

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

# primefaces - 删除 primefaces 按钮上的多余填充

> ID：10512478
> 
> 赞同：1
> 
> 时间：2012-05-09T08:31:08.617
> 
> 标签：primefaces

我在设置 primefaces 3 应用程序的命令按钮时遇到了一些问题。

我常见的 CSS 有这种风格

```
body {
    font-size: small;
} 
```

我的 primefaces 按钮有这个

```
<p:commandButton value="Search" ajax="false"  style="padding:0px;"/> 
```

我想删除按钮本身的一些填充，所以我设置了它的样式如上。

但什么都没有发生？

有没有办法删除命令按钮上的多余填充？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T08:52:08.467

负责填充的 css 类是`.ui-button-text`. 您可以使用 Firebug 或其他工具对其进行验证。

您可以使用以下代码片段覆盖此默认样式。将其放在页面的标题部分：

```
<style type="text/css">
  .ui-button-text {
         padding: 0px !important;
  }
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:54:41.463

不知道为什么，但就我而言，这不起作用。

另一种方法是使用`display:none;`如下所示。

```
<style type="text/css">
    .ui-button-text {
        display:none;
    }
</style> 
```

# sas - 如何在不安装 SAS 服务器的情况下使用 Talend 读取/写入 SAS 文件？

> ID：10512480
> 
> 赞同：2
> 
> 时间：2012-05-09T08:31:27.580
> 
> 标签：sas, talend

我想使用 Talend 来操作 SAS 文件；但是，SAS 插件需要某种服务器身份验证。我的机器上没有 SAS 服务器，如果可能，我不想安装一台。有没有办法在不安装服务器的情况下读/写 SAS 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:20:51.933

不容易！最简单的方法是购买 BASE SAS 的副本并将其用作本地服务器 - 请参阅下面的线程。

[如何读取 SAS 数据集？](https://stackoverflow.com/questions/2374193/how-can-i-read-a-sas-dataset)

更便宜的方法是购买 WPS 产品的许可版本：

[http://en.wikipedia.org/wiki/World_Programming_System](http://en.wikipedia.org/wiki/World_Programming_System)

一种免费但不太可靠的方法是使用开源阅读器，例如：

[http://kasper.eobjects.org/2011/06/sassyreader-open-source-reader-of-sas.html](http://kasper.eobjects.org/2011/06/sassyreader-open-source-reader-of-sas.html)

希望这可以帮助。

# web-services - GWT：将服务实现类公开为 Web 服务

> ID：10512482
> 
> 赞同：0
> 
> 时间：2012-05-09T08:31:35.427
> 
> 标签：web-services, gwt, web

问题场景是：我正在写一个谷歌小工具。小工具中显示的数据将来自我部署的 GWT 应用程序。我打算从 Java 脚本调用 Web 服务来显示所需的数据。

我需要知道如何将像 GreetingServiceImpl 这样的服务实现类（默认生成为 Eclipse GWT 项目中的示例）作为 Web 服务公开。

我确实尝试使用此处建议的方法公开逻辑（http://igorshare.wordpress.com/2009/05/20/building-gwt-web-clients-part-2-how-to-expose-rest-full -jax-rs-service-with-jersey-on-tomcat-server/)。

但我没有创建动态 Web 项目，而是在 Eclipse 中创建了 Google Web 项目。我得到了 404 异常。

有什么建议为什么我会收到 404 错误？

问候，维克拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:25:28.127

检查这个：[检索 JSON 数据](https://developers.google.com/web-toolkit/doc/latest/tutorial/JSON)

# silverlight - WP7 HttpWebRequest 如何知道多个请求何时完成？

> ID：10512483
> 
> 赞同：2
> 
> 时间：2012-05-09T08:31:43.800
> 
> 标签：silverlight, windows-phone-7, httpwebrequest

**描述：** 我有多个连续的图像下载并使用 HttpWebRequest 保存在 IsolatedStorage 中。在所有图像下载完成后，我需要将用户导航到另一个页面，其中图像显示在来自隔离存储的图像控件中。

**问题：** 我如何知道何时完成所有下载以运行导航？

我尝试在保存图像后的最后一次 foreach 循环迭代中将重定向传递给请求回调函数（requestImage_BeginGetResponse()），但图像大小不同，有时最后一张图像下载速度比以前快，这导致在所有下载之前重定向完成。

编码：

```
private HttpWebRequest request;

private void downloadDataFile()
{
        ...
        foreach (Gallery image in gallery)
        {
            request = (HttpWebRequest)WebRequest.Create(image.url);
            request.BeginGetResponse(new AsyncCallback(requestImage_BeginGetResponse), new object[] { request, image.name });
        }
    }, request);
}

private void requestImage_BeginGetResponse(IAsyncResult r)
{
    object[] param = (object[])r.AsyncState;
    HttpWebRequest httpRequest = (HttpWebRequest)param[0];
    string filename = (string)param[1];

    HttpWebResponse httpResoponse = (HttpWebResponse)httpRequest.EndGetResponse(r);
    System.Net.HttpStatusCode status = httpResoponse.StatusCode;
    if (status == System.Net.HttpStatusCode.OK)
    {
        Stream str = httpResoponse.GetResponseStream();
        Deployment.Current.Dispatcher.BeginInvoke(new Action(() =>
        {
            saveImage(str, filename);
        }));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:36:44.933

您应该准备一个int类型的变量来记录您将要下载的图像。每当下载图像时，使变量减1直到其值为0，并通知导航操作。

# cassandra - 如何有效地相交 2 个或更多 cassandra 切片？

> ID：10512484
> 
> 赞同：3
> 
> 时间：2012-05-09T08:31:48.347
> 
> 标签：cassandra

我正在使用 Posts 和 TaggedPosts 列族，如[本例所示](http://arin.me/blog/wtf-is-a-supercolumn-cassandra-data-model)

我希望能够找到带有标签“A”、“B”和“C”的帖子（例如）

问题是我必须使用键 A 完全阅读 TaggedPosts，而不仅仅是获取前 10 个结果，如示例中所示，然后与所有使用键 B 的 TaggedPosts 相交，以免错过一个等等

它的效率非常低，您的建议离子命令是什么？

我正在考虑更改 TaggedPosts 结构：并将 Posts ids 作为 Rows 键和

```
create colmun familty TaggedPosts with ... and column_metadata=[
    {column_name: tag1, ..., index_type: KEYS},
    {column_name: tag2, ..., index_type: KEYS},
    {column_name: tag3, ..., index_type: KEYS}, 
```

并做：

```
get TaggedPosts where tag1=A and tag2=B and tag3=C; 
```

但不确定它会比交叉/过滤客户端更有效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:31:52.943

我认为适合您的情况的理想模式取决于您需要执行该相交查询的频率，以及您是否需要能够为任意一对标签或任意一组*N*个标签获得快速结果，或者是否您只需要使用某些有限的标签来执行此操作。

如果，正如我所怀疑的那样，您希望能够查询与任意一组标签匹配的帖子，那么可能没有比拥有这样的架构（cql3）更好的解决方案了：

```
CREATE COLUMNFAMILY TaggedPosts (
    tag text,
    post uuid,
    blog_rowentries_rowkey text,
    PRIMARY KEY (tag, post)
) WITH COMPACT STORAGE;

-- (note that this is the same actual data layout used in the "wtf is a supercolumn" article) 
```

然后像这样查询“A 的帖子”、“B 的帖子”等：

```
SELECT * FROM TaggedPosts WHERE tag = 'A' LIMIT 100;
SELECT * FROM TaggedPosts WHERE tag = 'B' LIMIT 100; 
```

..所以他们被单独查询，然后你在客户端合并结果。100 的限制可能不适合您的数据；理想值取决于您的标签重叠的可能性。它并不是为了保证你得到你想要的所有结果，显然，它只是一个批量大小。如果您没有找到与所有标签匹配的足够帖子，则从具有最低 uuid 时间的标签中查询更多批次，直到找到为止。

您可以在效率和使用 Solr 索引的易编码性方面做得更好，因为这更像是一个全文搜索问题，但您需要 Datastax Enterprise 或其他方式自己集成 Solr。（免责声明：我为 Datastax 工作。）

不过，我能就该主题给出的最佳建议是不要使用超级列。

# android - EditText 和 TextView 上的 setText 不起作用

> ID：10512489
> 
> 赞同：0
> 
> 时间：2012-05-09T08:32:13.957
> 
> 标签：android, textview

我们有一个更大的 Android 2.1 项目，由于某种原因，只有在两个地方调用`setText()`一个`EditText`或一个`TextView`对象是行不通的。它不会崩溃，不会抛出异常，只有`TextView`/`EditText`没有更新。

下面是设置文本的代码：

```
EditText etzip_a = (EditText)activity.findViewById(R.id.editTextZip_a);
etzip.setText(m_addressA.zip);
etzip.addTextChangedListener(new onInputChanged(120)); 
```

*   此代码在 GUI 线程上运行
*   `R.id.editTextZip_a`它从布局中成功解析对象
*   其他数十个完全相似的代码`EditText`工作正常

有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T08:34:38.520

尝试使用此代码：

您已经创建了`etzip_a` EditText 的对象。现在，您正在使用不同的 object `etzip`。

```
EditText etzip_a = (EditText)activity.findViewById(R.id.editTextZip_a);
etzip_a.setText(m_addressA.zip);
etzip_a.addTextChangedListener(new onInputChanged(120)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:36:42.300

```
EditText etzip = (EditText)activity.findViewById(R.id.editTextZip_a); 
```

替换这行代码

# iphone - 如何在 ios sdk 中了解网络详细信息和用途

> ID：10512490
> 
> 赞同：2
> 
> 时间：2012-05-09T08:32:14.647
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我对我的新应用程序有一个要求，我必须计算数据使用情况、网络类型、剩余使用情况以及所有数据使用情况应用程序所做的事情。任何人都可以帮助我如何开始。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:33:35.813

如果你想知道网络的类型

看看[Reachability](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)，它是官方的！

Reachability 示例应用程序演示了如何使用 SystemConfiguration 框架来监视 iPhone 或 iPod touch 的网络状态。特别是，它演示了如何知道何时可以路由 IP，以及何时通过无线广域网 (WWAN) 接口（如 EDGE 或 3G）路由流量。

# permissions - 如何检查用户对 Salesforce 中对象的 CRUD 权限？

> ID：10512491
> 
> 赞同：10
> 
> 时间：2012-05-09T08:32:17.313
> 
> 标签：permissions, salesforce, crud, apex-code

根据要求，如果用户没有对第三个对象的读取权限，我必须更改帐户的所有者。

我需要一个类似于`isAccessible()`描述字段结果的方法的功能，但它仅适用于当前登录的用户。

有没有其他方法可以检查用户对 Apex 代码中对象的 CRUD 权限？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T17:48:52.247

我在我的博客上写了一篇关于这个的文章。刚刚在 API 24.0 版（春季发布）中发布了一项功能，可让您在逐条记录的基础上为当前用户执行此操作。

这是该博客条目的链接，其中包含详细信息：[如何判断用户是否有权访问记录](http://www.iterativelogic.com/how-to-tell-if-a-user-has-access-to-a-record/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-25T22:04:45.697

不要将记录级别访问与 CRUD 混淆 - 后者是用户**创建**、**读取**、**更新**或**删除**对象的能力，而不管共享规则等可能会影响用户对特定记录的访问。

要检查用户是否可以创建（例如联系人），只需使用

```
Schema.sObjectType.Contact.isCreateable() 
```

（返回`true`或`false`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:06:29.950

从文档。听起来您想匿名使用执行。

Apex 通常在系统上下文中运行；也就是说，在代码执行过程中不会考虑当前用户的权限、字段级安全性和共享规则。此规则的唯一例外是使用 executeAnonymous 调用执行的 Apex 代码。executeAnonymous 始终使用当前用户的完全权限执行。有关 executeAnonymous 的更多信息，请参阅匿名块。

虽然 Apex 默认不强制执行对象级和字段级权限，但您可以通过显式调用 sObject 描述结果方法（Schema.DescribeSObjectResult）和字段描述结果方法（Schema.DescribeFieldResult）在代码中强制执行这些权限) 检查当前用户的访问权限级别。通过这种方式，您可以验证当前用户是否具有必要的权限，只有当他或她具有足够的权限时，您才能执行特定的 DML 操作或查询。

例如，您可以调用 Schema.DescribeSObjectResult 的 isAccessible、isCreateable 或 isUpdateable 方法来分别验证当前用户是否具有对 sObject 的读取、创建或更新访问权限。同样，Schema.DescribeFieldResult 公开了这些访问控制方法，您可以调用这些方法来检查当前用户对字段的读取、创建或更新访问权限。另外，您可以调用Schema.DescribeSObjectResult提供的isDeletable方法来检查当前用户是否有权限删除特定的sObject。

[http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#StartTopic=Content/apex_classes_perms_enforcing.htm#kanchor431](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#StartTopic=Content/apex_classes_perms_enforcing.htm#kanchor431)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T14:19:01.207

您是否尝试过[runAs()](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_testing_tools_runas.htm "运行方式")方法？

类似的东西（未验证）：

```
User u = [SELECT Id FROM User WHERE Name='John Doe'];

System.runAs(u) {
  if (Schema.sObjectType.Contact.fields.Email.isAccessible()) {
    // do something
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-05T18:30:58.427

DescribeSObjectResult 类具有检查 CRUD 的方法。

例如，这允许您测试当前用户是否可以更新一般的帐户对象。

```
Schema.DescribeSObjectResult drSObj = Schema.sObjectType.Account;
Boolean thisUserMayUpdate = drSObj.isUpdateable(); 
```

@John De Santiago：您的文章涵盖了记录级别访问而不是对象 CRUD（= 对象级别访问）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-22T18:53:59.657

很老的帖子。此后 SF 添加了查询对象权限的选项：

```
 Select SobjectType ,ParentId, PermissionsEdit, PermissionsRead 
From ObjectPermissions
Order by ParentID, SobjectType ASC 
```

基本上，您将需要获取要检查的用户的配置文件和权限集以及相关对象。所以它会是这样的：

```
Select SobjectType ,ParentId, PermissionsEdit, PermissionsRead 
From ObjectPermissions
where parentId IN :UserProfileIdAndPermission
AND sObjectType=:objectType
Order by ParentID, SobjectType ASC 
```

# plsql - PL/SQL 函数

> ID：10512495
> 
> 赞同：0
> 
> 时间：2012-05-09T08:32:30.440
> 
> 标签：plsql, oracle11g

> **可能重复：**
> [关于 PL/SQL FUNCTIONS](https://stackoverflow.com/questions/10521906/homework-on-pl-sql-functions)
> [plsql 函数的作业](https://stackoverflow.com/questions/10524625/plsql-functions)

功能：

1.  函数`Display_Employee_Name_In_Uppercase`接受表中`Employee_ID`的`Empoyees`并以大写形式返回员工的名字和姓氏。
2.  `Employee_IDs`编写一个小型 PL/SQL 程序来显示107、200 和 205员工的姓名 。

这就是我所做的我不知道如何完成它可以帮助吗？

```
CREATE OR REPLACE FUNCTION disp (emp_id in  varchar20) return emp_name
select into emp_name 
fname||lname 
from employees 
where employee_id=emp_id
END disp ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:49:19.707

像这样的东西...

```
CREATE OR REPLACE 
FUNCTION Fn_Display(p_empId IN VARCHAR2)
RETURN VARCHAR2

IS

empName VARCHAR2(100);    

BEGIN

 BEGIN
  SELECT UPPER(first_name || ' ' || last_name)
  INTO  empName
  FROM Employees
  WHERE employee_id = p_empId; 
 EXCEPTION 
    WHEN NO_DATA_FOUND THEN
       RAISE NO_DATA_FOUND                
 END;

 RETURN empName;

END Fn_Display; 
```

你可以在任何你想要的地方调用这个函数。这是一个样本...

```
 DECLARE

    empId VARCHAR2(100);
    empName VARCHAR2(100);

  BEGIN

    empId := &ENTER_EMPLOYEE_ID;
    empName := Fn_Display(empId);

    DBMS_OUTPUT.PUT_LINE('Employee Name: '||empName);

  END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:49:59.867

你可以试试这段代码，也许这个对你有用：

```
CREATE OR REPLACE FUNCTION disp (emp_id in  varchar2) return varchar2 IS
emp_name varchar2(256);
BEGIN
  select UPPER(fname || ' ' || lname) 
  into emp_name  
  from employees 
  where employee_id = emp_id;
  return emp_name;
END disp; 
```

# sql-server-2008 - 如何在 SQL Server 2008 中显示特殊字符？

> ID：10512496
> 
> 赞同：2
> 
> 时间：2012-05-09T08:32:36.507
> 
> 标签：sql-server-2008

我正在使用 SQL Server 2008 并将表中的列设置为 nvarchar。带有特殊字符的数据被错误地存储在此表中。例如：这是一个条目

需要检查是否没有像它本身那样来，也不像它本身那样来，并确保关闭问题。

垃圾 - 实际上应该是撇号 (')。我检查了我的排序规则字符串。在数据库级别是 SQL_Latin1_General_CP850_BIN2，在服务器级别是 SQL_Latin1_General_CP1_CI_AS。

我确定我的应用程序中其他任何地方的编码集都是 UTF-8。

如何将数据正确存储在我的表中？我是否需要更改我的 SQL 查询或数据库中的任何设置？

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:53:14.390

你需要确保你正在观察两件事：

1.  始终`NVARCHAR`用作列的数据类型

2.  `N'....'`在处理字符串文字时（例如在您的`INSERT`or`UPDATE`语句中）始终确保使用前缀

有了这两件事，SQL Server 就可以毫无困难地存储您可能扔给它的所有 Unicode 字符......

# spring - 从 Hazelcast 中的 Map 返回克隆的对象

> ID：10512503
> 
> 赞同：0
> 
> 时间：2012-05-09T08:33:12.640
> 
> 标签：spring, distributed-caching, hazelcast

我在 Hazelcast 2.1 和 Spring 3.1 中使用 Spring @Cacheable 注释。

```
@Cacheable("testCache")
public MyObject testMethod(int testParam);

//After method call
MyObject test = Hazelcast.getMap("testCache").get("key")
test.setSomeProp()   //This line causes an update to the cache since it is reference. 
```

是否可以从映射返回缓存值的克隆/副本，而不是从**Hazelcast.getMap()**引用 ？

即我想要一个像 EhCache 中的 copyOnRead 功能。请参阅[EhCache 文档](http://www.ehcache.org/documentation/user-guide/configuration#copyonread-and-copyonwrite-cache-configuration)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:12:34.387

如果您不使用近缓存并禁用缓存值。前任：

```
 <hz:map name="map"
            backup-count="1"
            max-size="0"
            read-backup-data="true"
            cache-value="false"/> 
```

那么 Hazelcast 无论如何都会返回实际值的副本。

如果您保持 cache-value = true ，那么 Hazelcast 将缓存该值的对象版本，并在本地读取时返回相同的副本。本地读取是指启动读取的成员并且密钥的所有者是相同的。

# delphi - 使用运行时包构建时如何解决“需要导入的数据引用”

> ID：10512504
> 
> 赞同：6
> 
> 时间：2012-05-09T08:33:15.380
> 
> 标签：delphi, delphi-xe2, runtime-packages, resourcestring

为了帮助我们模块化单体应用程序，我们正在设置用于调试构建的软件包，同时仍编译为单个 exe 用于发布构建。

我们的一个包（EAUtils）包含一个现在正在生产的单元`[DCC Error] E2201 Need imported data reference ($G) to access 'SMsgDlgWarning' from unit 'SystemUtils'`。

这发生在构建 EAUtils 包本身时。我还没有构建依赖于 EAUtils 的软件包。EAUtils 仅依赖于 rtl/vcl 包和我为 Jedi WinApi 单元创建的包。

这是以下行的结果：

```
// This is a TaskDialog override, with the same args as the old MessageDlg.
function TaskDialog(const aContent: string; const Icon: HICON = 0; 
  const Buttons: TTaskDialogCommonButtonFlags = TDCBF_OK_BUTTON): Integer;
const
  Captions: array[TMsgDlgType] of Pointer = (@SMsgDlgWarning, @SMsgDlgError, @SMsgDlgInformation, @SMsgDlgConfirm, nil);
var
  aMsgDlgType: TMsgDlgType;
  aTitle: string;
begin
  aMsgDlgType := TaskDialogIconToMsgDlgType(Icon);
  if aMsgDlgType <> mtCustom then
    aTitle := LoadResString(Captions[aMsgDlgType])
  else
    aTitle := Application.Title; 
```

更具体地说，这是引用`SMsgDlgWarning`、和的结果`SMsgDlgError`，它们都在 中声明。`SMsgDlgInformation``SMsgDlgConfirm``Vcl.Const`

请注意，当我们构建单个可执行文件时，此代码编译不会出错。

作为一种优化手段，我们的包含文件确实包含`{$IMPORTEDDATA OFF}`，因为这允许更快地访问（全局）变量和常量。请参阅[http://hallvards.blogspot.com/2006/09/hack13-access-globals-faster.html](http://hallvards.blogspot.com/2006/09/hack13-access-globals-faster.html)。

根据有关错误的文档（[http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/devcommon/cm_package_varref_xml.html](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/devcommon/cm_package_varref_xml.html)）这是原因，它说“为了缓解问题，它通常最容易打开 $IMPORTEDDATA 开关并重新编译产生错误的单元。”

因此，我已经`{$IMPORTEDDATA ON}`在我们的包含文件中进行了设置，并通过在项目选项部分中将设置`Use imported data references`为 true 来确保。`Delphi Compiler | Compiling | Debugging`

不幸的是，与文档相反，这并没有缓解问题。即使直接在有问题的代码上方设置此编译器指令并重新构建包也不能消除错误。

我还需要做什么来解决这个 E2201 错误？不确定，但 SMsgDlgWarning 及其朋友是资源字符串可能很重要？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T09:52:54.437

错误消息是，恕我直言，误导，它是`Vcl.Consts`用它编译的`$G-`，这就是导致问题的原因。作为一种解决方法，您可以使用以下方法：

```
function Captions(AType: TMsgDlgType): Pointer;
begin
  Result := nil;

  case AType of
    TMsgDlgType.mtWarning:
      Result := @SMsgDlgWarning;
    TMsgDlgType.mtError:
      Result := @SMsgDlgError;
    TMsgDlgType.mtInformation:
      Result := @SMsgDlgInformation;
    TMsgDlgType.mtConfirmation:
      Result := @SMsgDlgConfirm;
  end;
end; 
```

使用 const 字符串数组也可以编译（尽管它会破坏本地化）：

```
const
  Captions: array[TMsgDlgType] of string = (SMsgDlgWarning, SMsgDlgError, SMsgDlgInformation, SMsgDlgConfirm, ''); 
```

或者您可以构建自己的包含 Vcl.* 单元的包，使用`{$G+}`并使用它而不是标准`vcl`包。我更喜欢第一种解决方案；后者可能会在以后的部署中产生更多问题（所谓的“DLL 地狱”）。

# ruby - Ruby 表单自动提交 Mechanize::ResponseCodeError

> ID：10512505
> 
> 赞同：1
> 
> 时间：2012-05-09T08:33:17.233
> 
> 标签：ruby, error-handling, mechanize

```
submit_form = agent.get("http://sample.com/NewTask.aspx").form("aspnetForm") do |f|
    f["ctl00$ContentPlaceHolder1$txtNumber"] = "1234",
    f["ctl00$ContentPlaceHolder1$cmbText"] = "test",
    f["ctl00$ContentPlaceHolder1$FUpload$fu"] = "",
    f["ctl00$ContentPlaceHolder1$btn"] = "test"
    f.submit(f.button_with(:name => "ctl00$ContentPlaceHolder1$btnOK"))
end 
```

这是我使用 Ruby 的机械化库为表单自动提交编写的代码，它返回`Mechanize::ResponseCodeError`如下。我真的没有在我的代码中看到任何错误，任何人都可以让我知道这是代码错误还是服务器端的问题（比如服务器阻止表单自动提交）？

C:/Ruby193/lib/ruby/gems/1.9.1/gems/mechanize-2.4/lib/mechanize/http/agent.rb:29 1:in `fetch': 500 => Net::HTTPInternalServerError for http://sample.com/NewTask.aspx -- unhandled response (Mechanize::ResponseCodeError) from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mechanize-2.4/lib/mechanize.rb:1207:in`post_form' 来自 C:/Ruby193/lib/ruby/gems/1.9 .1/gems/mechanize-2.4/lib/mechanize.rb:515:in `submit' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mechanize-2.4/lib/mechanize/form.rb:178:in`submit' from auto_post.rb:27:in `block in <main>' from (eval):23:in`form_with' from auto_post.rb:13:in `'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:25:19.793

您需要通过 fiddler 或 charles 等调试代理进行代理：

```
agent.set_proxy 'localhost', 8888 
```

然后类似地代理您的浏览器并比较请求

# mysql - 如何获得接下来的 12 个未来日期

> ID：10512508
> 
> 赞同：2
> 
> 时间：2012-05-09T08:33:31.720
> 
> 标签：mysql, date

我有一些代码可以告诉您何时不会联系联系人，并在日历上突出显示当天。即，如果您最后一次联系该人是昨天，则突出显示的日期将在下个月页面上的一个月后出现。

我想做的是每个月到一年都这样做。因此，在前面的示例中，如果我在突出显示的日期之后移动了一个月，它将是“两个月内没有联系”、三个月、四个月等等，直到 12 个月。

这是我现在用于“一个月未联系”查询的内容：

```
SELECT DATE_FORMAT(DATE(DATE_ADD(date, INTERVAL 1 MONTH)), '%Y-%c-%d') AS overDate
    FROM contact_method_history
WHERE DATE(DATE_ADD(date, INTERVAL 1 MONTH)) = '$SQLDate'
AND entityRef = ".$this->entityId."
ORDER BY date DESC
LIMIT 1 
```

$this->entityId 可能是 153 或 9045，它只是对联系人的引用。

$SQLDate 的格式为“2012-05-09”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:23:01.653

我不同意评论：如果您执行循环，那么您将运行 12 个查询而不是 1 个，这会降低性能。另一方面，“一体式”查询的语句并不简单：

```
SELECT date
, i.m
, DATE_FORMAT(DATE(DATE_ADD(cmh.date, INTERVAL i.m MONTH)), '%Y-%c-%d') AS overDate
FROM contact_method_history AS cmh
, (
    SELECT 1 as m
    UNION ALL SELECT 2 as m
    UNION ALL SELECT 3 as m
    UNION ALL SELECT 4 as m
    UNION ALL SELECT 5 as m
    UNION ALL SELECT 6 as m
    UNION ALL SELECT 7 as m
    UNION ALL SELECT 8 as m
    UNION ALL SELECT 9 as m
    UNION ALL SELECT 10 as m
    UNION ALL SELECT 11 as m
    UNION ALL SELECT 12 as m
) AS i
WHERE ( DATE(DATE_ADD(cmh.date, INTERVAL i.m MONTH)) = '$SQLDate' )
AND (entityRef = ".$this->entityId.")
GROUP BY i.m, DATE(DATE_ADD(cmh.date, INTERVAL i.m MONTH)) 
```

# javascript - 打开包含 XML 的 iframe

> ID：10512525
> 
> 赞同：1
> 
> 时间：2012-05-09T08:34:43.117
> 
> 标签：javascript, jquery, xml

```
var iframe = $('#auditframe').get(0).contentWindow;

iframe.document.open("text/xml", "replace");
iframe.document.write(xml); 
```

这行得通。我的 iframe 填充了有效的 xml 字符串。但是有什么方法可以在新窗口中打开 iframe 吗？我希望用户看到已添加到框架中的 XML 文档。有没有办法解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:41:42.227

类似的技术，只是你打开一个空白窗口，在窗口中创建一个新文档，然后编写你想要的内容。请参阅此小提琴以获取工作示例：http: [//jsfiddle.net/2v3Gr/](http://jsfiddle.net/2v3Gr/)

# python - Python MySQLdb 游标上的提交是否会影响另一个游标中正在进行的事务？

> ID：10512528
> 
> 赞同：0
> 
> 时间：2012-05-09T08:34:55.583
> 
> 标签：python, mysql, google-app-engine, mysql-python, google-cloud-sql

如果我有多个从同一个数据库连接生成的游标（例如，每个游标在不同的线程中），一个游标上的提交（例如在 Python 中：cursor.execute('COMMIT')）是否会影响另一个游标上正在进行的事务相同的连接？如果是这样，我是否应该总是每个数据库连接只有一个游标，以避免这样的交叉游标问题？（另外，如果您知道，这是否也适用于 Google Cloud SQL？）

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T08:45:02.440

大概。`MySQLdb`将 - 属性指定[`threadsafety`](http://www.python.org/dev/peps/pep-0249/)为 1，这意味着您不应该在没有手动同步的情况下在多个线程上共享连接（以及游标）。

你最好使用某种形式的连接池。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T16:26:35.637

在 Google Cloud SQL 中，每个数据库连接一次应该只有一个光标。在服务器端，每个连接都有一个数据结构来跟踪当前的事务/查询。如果您有多个光标，它们将相互踩踏。

我建议在每个 http 请求的开头打开一个连接并在最后关闭它。这是[一些示例代码](https://stackoverflow.com/questions/10158805/whats-a-good-approach-to-managing-the-db-connection-in-a-google-cloud-sql-gae/10438622#10438622)。

# html - 如何获取 html5 视频元素的宽度和高度

> ID：10512529
> 
> 赞同：15
> 
> 时间：2012-05-09T08:35:03.133
> 
> 标签：html, video, height, width

我有一个简单的 html5 视频标签：

```
 <video autobuffer="true" id="video" controls="true">
        <source src="some_url"></scource>
  </video> 
```

我没有在视频标签或css中定义明显的宽度和高度，视频包装器会根据源视频大小进行调整，问题是，我怎样才能获得视频当前的宽度和高度？我试过jquery

```
$('video').css('width'); 
```

但它返回我原来的大小：300px

我在页面中看到的是800px！

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-09T10:32:07.923

```
$(function () {

    $("#video").bind("loadedmetadata", function () {
        var width = this.videoWidth;
        var height = this.videoHeight;
        // ...

    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T15:52:04.260

刚刚发现我们可以得到视频的宽度和高度：

```
$("#video").innerHeight();
$("#video").innerWidth(); 
```

这两个函数由 jQuery 公开。

jQuery 摇滚的另一个原因！！！

# facebook - 如何避免为每个页面询问 FB.api('/me', function (user))

> ID：10512530
> 
> 赞同：0
> 
> 时间：2012-05-09T08:35:04.067
> 
> 标签：facebook

我正在开发一个使用 Facebook-connect 登录的网站。我的网站有几个页面，在每个页面中我都需要做

> FB.api('/me', 函数(用户))

来获取用户。但是这样在每个页面中我都必须等待 Facebook 来回答。

最好的方法是在第一页记录用户并在其他页面之间传递信息？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:28:21.467

我建议您使用 FB.api 代码在所有页面中创建一个名为的标题，然后更改页面的内容（子页面排序）

# jquery - 用于 Android 移动网站的对象上的 Jquery Swipe 检测

> ID：10512536
> 
> 赞同：3
> 
> 时间：2012-05-09T08:35:13.973
> 
> 标签：jquery, jquery-mobile, swipe

任何人都可以向我指出一个可以通过 jquery 检测对象上的滑动动作的体面的 Jquery 库的方向吗？

干杯

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:45:51.673

[这](http://www.queness.com/post/11755/11-multi-touch-and-touch-events-javascript-libraries)是可以处理触摸事件（包括滑动和多指滑动）的 Javascript/JQuery 库的完整列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:39:33.210

我将此脚本用作我自己的触摸库的参考（我想要更多功能并增加我的移动体验）： http: [//www.netcu.de/jquery-touchwipe-iphone-ipad-library](http://www.netcu.de/jquery-touchwipe-iphone-ipad-library)

当然，还有[jQuery mobile](http://jquerymobile.com/)，它有很长的[触摸/滑动/手势事件](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)列表。

# jquery - jquery google map 插件，添加事件监听器

> ID：10512537
> 
> 赞同：3
> 
> 时间：2012-05-09T08:35:18.280
> 
> 标签：jquery, google-maps-api-3, callback, addeventlistener, jquery-ui-map

有人可以解释在[google jquery.ui.map](http://code.google.com/p/jquery-ui-map/)插件`jQuery.fn[name]`中找到的以下代码片段 () 的含义：

```
jQuery.each(('click mousedown rightclick dblclick mouseover mouseout drag dragend').split(' '), function(i, name) {
    jQuery.fn[name] = function(a, b) {
        return this.addEventListener(name, a, b);
    };
}); 
```

以及我们如何将回调函数绑定到地图对象上的点击事件，我尝试了以下但`event`没有`latLng`属性：

```
$('#map_canvas').gmap().click(function(event) {
        alert(event.latLng);
    }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T20:35:58.783

该代码片段覆盖了一些 jQuery 方法，以便可以在*某些*Google Maps 对象上使用它。例如

```
 var map = $('#map_canvas').gmap('get', 'map')
    $(map).click(function() {
        var self = this; // this is the map object
    });

    $('#map_canvas').gmap('addMarker', { ... }).click(function() {
        var self = this; // this refers to the marker object
    }).hover(function() {
         var self = this; // this refers to the marker object
    }); 
```

如果您需要绑定其他事件，例如 zoom_changed，那么只需

```
var map = $('#map_canvas').gmap('get', 'map');
$(map).addEventListener('zoom_changed', function() {

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:03:30.883

你已经回答了你自己的问题 :) 如果你想将事件绑定到你的谷歌地图，你必须使用`this.addEventListener(name, a, b);`（这实际上是允许你对某些事件执行函数的代码位。见下文）

例子：

```
 google.maps.event.addListener(my_map_object, 'click', function() {
    my_map_object.setZoom(8);
    alert("I've just zoomed by clicking the map!");
 }); 
```

您可以将事件添加到地图对象或放置在地图上的任何标记。

有关完整说明，请参阅[https://developers.google.com/maps/documentation/javascript/events](https://developers.google.com/maps/documentation/javascript/events)。Google Maps API 有很好的使用示例，您可以从中学到很多东西 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T10:05:51.920

```
google.maps.event.addListener(marker, 'mouseover', function() {
 $('.hover_div').html('<a target="_blank" href="'+marker.url+'">'+marker.hover + marker.title +'</a>').show();
}); 
```

或者

```
 google.maps.event.addListener(marker, 'click', function() {
      window.open(
  marker.url,
  '_blank' // <- This is what makes it open in a new window.
); 
```

我不会使用插件，因为它会限制你的工作。尝试阅读如何自己创建地图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-10T14:47:06.477

我发现从页面中窃取所有事件并将它们重新分配给地图会导致委托事件不再起作用。例如，如果您尝试`trigger()`单击另一个元素，它就不起作用。例如 - 在设置事件侦听器`on("click")`仍然有效的情况下，它将不再侦听以编程方式触发的点击。

我已经更改了我自己的文件副本上的代码。这是以防万一有人感兴趣。它将函数的“名称”更改为在前面添加“map”，并将原始方法的第一个字母大写：

`click()`更改`mapClick`,`dragend`更改`mapDragend`等

```
jQuery.each(('click rightclick dblclick mouseover mouseout drag dragend').split(' '), function (i, name) {
        jQuery.fn["map" + name[0].toUpperCase() + name.substr(1)] = function (a, b) {
            return this.addEventListener(name, a, b);
        }
}); 
```

# html - 删除视频上的 YouTube 上观看标志

> ID：10512544
> 
> 赞同：6
> 
> 时间：2012-05-09T08:35:55.083
> 
> 标签：html, youtube

我在互联网上寻找了一种从他们的 iFrame 播放器中删除 YouTube 徽标的方法。

我在用

```
<iframe width="550" height="314" src="https://www.youtube.com/embed/vidid?modestbranding=1&amp;rel=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe> 
```

它从底部操作面板中删除了“在 YouTube 上观看”按钮，但是它在视频的右下角添加了 YouTube 徽标水印，当我将鼠标悬停在它上面时，它说在 YouTube 上观看。

我尝试将 'embed' 更改为 'v' 将其删除，但它在 iPad/手机上不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T04:28:25.643

据我所知，您最多可以将`modestbranding=1`选项添加到 URL，但这只会去掉播放器顶部的标题和 youtube 链接。

我认为您无法摆脱悬停时出现的右下角。

来源：[https ://developers.google.com/youtube/player_parameters#modestbranding](https://developers.google.com/youtube/player_parameters#modestbranding)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T17:34:44.793

你可以从谷歌驱动上传它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-25T02:19:13.570

如果您使用moderatebranding=1，则不能使用showinfo=0。您只能使用 1 或其他。此外，如果您使用moderatebranding=1，它必须紧跟在url 之后。

例子：

```
 https://youtube.com/embed/vidid?modestbranding=1 
```

# sql - 如何在 Squirrel SQL 客户端 3 中定义/声明和使用变量

> ID：10512548
> 
> 赞同：5
> 
> 时间：2012-05-09T08:36:23.843
> 
> 标签：sql, oracle, squirrel-sql

我使用软件 SQuirreL SQL Client Version 3.2.1，我想声明变量，如

```
define dateFrom = '13/04/2012';
define dateTo = '13/04/2012' 
```

并像这样在我的 sql 查询中使用它

```
SELECT * FROM table_name WHERE TRUNC(column_name) BETWEEN to_date('&dateFrom','YYYY-MM-DD') AND to_date('&dateTo','YYYY-MM-DD'); 
```

但它不起作用。如何在 SQuirreL 中定义和使用变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-10T09:54:24.380

也许不是你想要的，但你试过加载插件'sqlparam'吗？它提供变量替换，例如

```
SELECT * FROM table_name WHERE TRUNC(column_name) BETWEEN :dateFrom and :dataTo 
```

运行此查询时，Squirrel 将询问值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-26T07:20:58.333

我知道这个问题真的很老，但它帮助我找到了解决方案，我想我会分享它。使用 SquirrelSQL 3.8.1 这在针对 oracle 数据库运行时有效。

```
SELECT * FROM table_name WHERE TRUNC(column_name) BETWEEN to_date( :dateFrom ,'YYYY-MM-DD') AND to_date( :dateTo,'YYYY-MM-DD'); 
```

注意：函数调用和绑定变量冒号之间的空格是必需的——没有它你会得到一个错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-16T21:40:54.893

“SQuirreL（就像 Oracle 的 SQL-Plus）需要知道你什么时候完成了你的匿名过程。这通常是通过在你的过程末尾添加一个带有单斜杠 (/) 字符的行来完成的。例如：”

```
DECLARE
v1  NUMBER(3);

BEGIN
  v1 := 3;
  select 1 from dual
END;
/ 
```

请看这里：http: [//sourceforge.net/p/squirrel-sql/mailman/message/28580491/](http://sourceforge.net/p/squirrel-sql/mailman/message/28580491/)

现在，当您选择包含斜杠的 SQL 时，您将能够使用 Ctrl+Enter 运行它。

# scala - ScalaQuery 没有创建 DDL？

> ID：10512553
> 
> 赞同：0
> 
> 时间：2012-05-09T08:36:45.297
> 
> 标签：scala, scalaquery

我在 scala 对象中有一个示例数据库，但未创建表。

如果我调用初始化然后调用 addEntries，我会得到 JDBC 层的 Table notexisting 异常。我哪里错了？

```
object ExampleCompanyH2TestDb {
    val Companies = new Table[(Int, Int, String, String, String, Double,Double)]("COMPANIES") {

       def id = column[Int]("COMPANY_ID", O.PrimaryKey)

       // This is the primary key column
       def id2 = column[Int]("COMPANY_ID2")

       def name = column[String]("COMPANY_NAME")

       def country = column[String]("COUNTRY")

       def city = column[String]("CITY")

       def latitude = column[Double]("LATITUDE")

       def longitude = column[Double]("LONGITUDE")

       // Every table needs a * projection with the same type as the
       table's type parameter
       def * = id ~ id2 ~ name ~ country ~ city ~ latitude ~ longitude
   }
// Connect to the database and execute the following block within a session

val db = Database.forURL("jdbc:h2:mem:test1", driver = "org.h2.Driver")

def initialize = {
    db withSession {
        // The session is never named explicitly. It is bound to the current
       // thread as the threadLocalSession that we imported
         (Companies.ddl).create

    }
}

// Create the tables, including primary and foreign keys
def addEntries(entries: Iterable[ExampleCompany]) {
   val asTuples = entries.map {
     ExampleCompany.unapply
   }.collect {
     case Some(entry) => entry
   }.toSeq
    db withSession {
      Companies.insertAll(asTuples: _*)
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:56:34.757

我发现了问题：内存驱动程序中的 h2 不会在会话之间存储数据，除非：

jdbc:h2:mem:test;DB_CLOSE_DELAY=-1。

被指定

（见[http://www.h2database.com/html/features.html](http://www.h2database.com/html/features.html)）

# excel - 将嵌入的 Word Doc 保存为 PDF

> ID：10512560
> 
> 赞同：9
> 
> 时间：2012-05-09T08:37:12.097
> 
> 标签：excel, vba, macos, applescript

**设想**

Word 文档嵌入在 Excel 2011 文件中。我需要将它保存为pdf。

如果是 Excel 2010 那么它就不会成为问题，因为 Win Pcs 中的 MS-Office 支持 OLE 自动化。

**我尝试了什么？**

这是我在 Excel 2010 中尝试的有效代码。

```
Option Explicit

Sub Sample()
    Application.ScreenUpdating = False

    Dim shp As Shape
    Dim objWord As Object
    Dim objOLE As OLEObject

    Set shp = Sheets("Sheet1").Shapes("Object 1")

    shp.OLEFormat.Activate

    Set objOLE = shp.OLEFormat.Object

    Set objWord = objOLE.Object

    objWord.ExportAsFixedFormat OutputFileName:= _
            "C:\Users\Siddharth Rout\Desktop\Sid.pdf", ExportFormat:= _
            17, OpenAfterExport:=True, OptimizeFor:= _
            0, Range:=0, From:=1, To:=1, _
            Item:=0, IncludeDocProps:=True, KeepIRM:=True, _
            CreateBookmarks:=0, DocStructureTags:=True, _
            BitmapMissingFonts:=True, UseISO19005_1:=False

    objWord.Application.Quit

    Set objWord = Nothing
    Set shp = Nothing
    Set objOLE = Nothing

    Application.ScreenUpdating = True
End Sub 
```

显然我不能在 MAC 中使用它。并不是说我没有在 MAC 中尝试过这个……我做了：-/（*我猜是基本的人性？*）。它按预期失败了。:)

对于 Excel 2011，我试过这个。它可以工作，但不会创建 pdf，也不会给出任何错误消息。我尝试调试它，但没有任何乐趣。

```
'~~> Reference set to MS Word Object Library
Option Explicit

Sub Sample()
    Dim oWord As Word.Application, oDoc As Word.Document

    Application.ScreenUpdating = False

    Sheets("Sheet1").Shapes.Range(Array("Object 1")).Select

    Selection.Verb Verb:=xlPrimary

    Set oWord = GetObject(, "word.application")

    For Each oDoc In oWord.Documents
        Debug.Print oDoc.FullName & ".pdf"

        oDoc.SaveAs Filename:=oDoc.FullName & ".pdf", FileFormat:=wdFormatPDF
        oDoc.Close savechanges:=False
    Next oDoc

    oWord.Quit

    Set oworddoc = Nothing

    Set oWord = Nothing
    Application.ScreenUpdating = True
End Sub 
```

我相信这也可以使用 AppleScript 来完成。所以我也用 Applescript 进行了测试。在这里，我正在尝试将 word 文档直接转换为 pdf。如果我得到这部分，那么我可以在我的代码中绕道:)

```
Sub tester()
    Dim scriptToRun As String

    scriptToRun = "set pdfSavePath to  " & Chr(34) & "Users:siddharth:Documents:Sid.pdf" & Chr(34) & Chr(13)
    scriptToRun = scriptToRun & "set theDocFile to choose file with prompt " & Chr(34) & "Please select a Word document file:" & Chr(34) & Chr(13)
    scriptToRun = scriptToRun & "tell application " & Chr(34) & "Microsoft Word" & Chr(34) & Chr(13)
    scriptToRun = scriptToRun & "open theDocFile" & Chr(13)
    scriptToRun = scriptToRun & "set theActiveDoc to the active document" & Chr(13)
    scriptToRun = scriptToRun & "save as theActiveDoc file format format PDF file name pdfSavePath" & Chr(13)
    scriptToRun = scriptToRun & "end tell" & Chr(13)

    Debug.Print scriptToRun
    'Result = MacScript(scriptToRun)
    'MsgBox Result
End Sub 
```

但是我得到了运行时错误，`MacScript(scriptToRun)`所以我确信我的 Applescript 失败了。

**快照**

![在此处输入图像描述](../Images/6039ace20130f3a530c15573520027c5.png)

Applescript 错误

![在此处输入图像描述](../Images/e8c5cd2e3054ce88e14ce3bcddee0877.png)

**问题**

如何在 Excel 2011 中保存嵌入的 word 文档？我对 VBA 和 Applescript 持开放态度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T11:42:00.367

好吧，我会被诅咒的！

感谢 Pradeep 的建议。似乎您所指的应用程序已被新的 MAC 版本过时。所以我搜索了 MAC Store 并找到了另一个名为[SMILE](http://macupdate.com/app/mac/12735/smile)的应用程序。

我在 SMILE 中测试了**原始脚本。**它没有任何问题，而且效果很好！！！

```
set pdfSavePath to "Users:siddharth:Documents:Sid.pdf"
set theDocFile to choose file with prompt "Please select a Word document file:"
tell application "Microsoft Word"
    open theDocFile
    set theActiveDoc to the active document
    save as theActiveDoc file format format PDF file name pdfSavePath
end tell 
```

所以我尝试了我之前测试的代码，令我惊讶的是，这次它在我没有对原始代码进行任何更改的情况下工作！！！所以我很困惑可能是什么问题......是否`Smile`安装了使脚本在 Excel 中工作的东西？我想我永远不会发现。

```
Option Explicit

Sub tester()
    Dim scriptToRun As String

    scriptToRun = "set pdfSavePath to  " & Chr(34) & "Users:siddharth:Documents:Sid.pdf" & Chr(34) & Chr(13)
    scriptToRun = scriptToRun & "set theDocFile to choose file with prompt " & Chr(34) & "Please select a Word document file:" & Chr(34) & Chr(13)
    scriptToRun = scriptToRun & "tell application " & Chr(34) & "Microsoft Word" & Chr(34) & Chr(13)
    scriptToRun = scriptToRun & "open theDocFile" & Chr(13)
    scriptToRun = scriptToRun & "set theActiveDoc to the active document" & Chr(13)
    scriptToRun = scriptToRun & "save as theActiveDoc file format format PDF file name pdfSavePath" & Chr(13)
    scriptToRun = scriptToRun & "end tell" & Chr(13)

    Debug.Print scriptToRun
    Result = MacScript(scriptToRun)
    MsgBox Result
End Sub 
```

**微笑快照**

![在此处输入图像描述](../Images/8689df2f10f5c8829eb4581dbd0f286d.png)

**编辑：发现错误**

经过仔细检查，我发现我的原始脚本有一个额外的行。我设置了两次 PDF 路径。可以在快照中看到。

# jquery - 如何在单击旁边的图标时仅访问特定的文本框

> ID：10512562
> 
> 赞同：0
> 
> 时间：2012-05-09T08:37:15.537
> 
> 标签：jquery, jquery-ui, jquery-plugins

如何在单击旁边的图标时仅访问特定的文本框。我知道我必须使用 $this，但是作为新手我无法做到。帮助表示赞赏。:)

JS：

```
jQuery(document).ready(function($) {
    $('#plus').click( function(event) {
        if($('.abc').val() == ''){
            $('.abc').val(10);
        }else{
            $inc = parseInt($('.abc').val()) + 10;
            $('.abc').val($inc);
        }
    });
}); 
```

HTML：

```
<form class="chkform" id="chkform" name="chkform" method=post action="">
<input type="text" class="abc" id="abc" name="abc" value="">
<img src="plus.png" id="plus" name="plus" class="plus" >
<br><br>
<input type="submit" value="submit" name="submit" >
</form>

<form class="chkform" id="chkform" name="chkform" method=post action="">
<input type="text" class="abc" id="abc" name="abc" value="">
<img src="plus.png" id="plus" name="plus" class="plus" ><img src="minus.png" id="minus" name="minus" class="minus">
<br><br>
<input type="submit" value="submit" name="submit" >
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:46:21.213

您的表单没有很好的编码，您不能有重复的 ID，而您有几个。

我已经更改了要查找的函数`.plus`，它现在获取之前的输入字段并对其执行操作，而不是两者：

```
jQuery(document).ready(function($) {
    $('.plus').click( function(event) {
        var textArea = $(this).prev('input[type="text"]');
        if(textArea.val() == ''){
            textArea.val(10);
        }else{
            $inc = parseInt(textArea.val()) + 10;
            textArea.val($inc);
        }
    });
});​ 
```

在这里看到它的工作：http: [//jsfiddle.net/ccana/wQc8U/](http://jsfiddle.net/cchana/wQc8U/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:43:12.360

```
$(function() {
    $('<yourselctor>').click(function(e) {
        var parent = $(this).closest('<parent container selector>');
        var target = parent.find('<your desired textbox selector>');
    });
}); 
```

在*目标*中，您可以拥有所需的文本框。

# ruby-on-rails - 如何在 Rails 的 Home#index 中解决这个 NoMethodError？

> ID：10512566
> 
> 赞同：0
> 
> 时间：2012-05-09T08:37:41.380
> 
> 标签：ruby-on-rails, session

我在会话中存储了一些值，这是我在会话中存储值的控制器：

```
def callback
    client = LinkedIn::Client.new("ssssssssssss", "444444444444")
    if session[:atoken].nil?
      pin = params[:oauth_verifier]
      atoken, asecret = client.authorize_from_request(session[:rtoken], session[:rsecret], pin)
      session[:atoken] = atoken
      session[:asecret] = asecret
    else
      client.authorize_from_access(session[:atoken], session[:asecret])
    end
    @loggedin_linkedin_userinfo = client.profile(:fields => [:id,:summary, :headline, :first_name, :last_name, :picture_url])
    @loggedin_linkedin_education = client.profile(:fields => [:educations])
    @loggedin_linkedin_position = client.profile(:fields => [:positions])
    @loggedin_linkedin_connections = client.connections

    session[:link_total] = @loggedin_linkedin_connections["total"]
    session[:link_headline] = @loggedin_linkedin_userinfo["headline"]
    session[:link_first_name] = @loggedin_linkedin_connections["first_name"]
    session[:link_last_name] = @loggedin_linkedin_connections["last_name"]
    session[:link_summary] = @loggedin_linkedin_connections["summary"]
    session[:picture_url] = @loggedin_linkedin_connections["picture_url"]

    redirect_to  :controller => 'home', :action => 'index'  
  end 
```

这是我的看法：

```
<div class="datainfo profile">
                        <h2 class="inner">Welcome, 
                            <% if session[:user].nil? 
                                session[:link_first_name] + " " + session[:link_last_name]
                            else
                                session[:user].first_name + " " + session[:user].last_name
                            end %>
                            </h2>
                        <p class="loc">
                            <%  
                            if session[:user].nil? 
                                Linkedinuser
                             else
                             @countryDetails = Country.find(:all, :conditions => {:id => session[:user].country_id})    
                            end
                                #for c in countryDetails
                                #c.country_name  #loop
                            %>
                            <% if session[:user].nil? 
                               Linkedinuser 
                             else
                                session[:user].city + "," + @countryDetails[0].country_name.to_s    
                            end
                            %>
                        </p>
                        <p class="job">

                        </p>
                        <p class="status">
                            <spam>
                                <% if session[:user].nil? 
                                        Linkedinuser
                                    else
                                        link_to "Complete Profile", session[:user], :class=>"small-btn" 
                                end
                            %>
                            </spam>
                            - Profile Completed %.
                        </p>
                    </div> 
```

但是当我运行它时，我收到以下错误，请帮助我。

```
undefined method `+' for nil:NilClass

Extracted source (around line #35):

32:                     <div class="datainfo profile">
33:                         <h2 class="inner">Welcome, 
34:                             <% if session[:user].nil? 
35:                                 session[:link_first_name] + " " + session[:link_last_name]
36:                             else
37:                                 session[:user].first_name + " " + session[:user].last_name
38:                             end %> 
```

我从早上起就在苦苦挣扎，但找不到解决办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:39:52.213

`:link_first_name`您的会话（或它）中没有键，`nil`这就是为什么它说`+`方法没有为 nil 定义。

在执行此操作之前检查您的会话：

```
<% if session[:user].nil? && !session[:link_first_name].nil?
  session[:link_first_name] + " " + session[:link_last_name]
else ... 
```

# python - 如何从歌曲中找到情绪

> ID：10512569
> 
> 赞同：0
> 
> 时间：2012-05-09T08:38:06.343
> 
> 标签：python, python-2.6

我的实际工作是找到歌曲的情绪，即悲伤的歌曲或快乐的歌曲。我尝试使用 fft 查找 mp3 文件的频率，但它只给出小文件的频率，例如铃声。您能否指导我使用哪种音频功能（例如音高、音色、响度、速度）来查找当前播放列表中歌曲的情绪？这是否有必要找到频率？我正在使用模块 tkinter 在 python 2.6 中工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T08:54:28.400

这是一种方法——在网上找到歌词并训练分类器来确定歌词是悲伤还是快乐。即使您无法通过这种方式获得足够好的准确性，您也可以将其作为解决方案的一部分与和声/旋律分析一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:05:04.387

检查[这个](http://www.experienceproject.com/music_search.php)

...好吧，我发现的只是那个显示您想要的特定心情的音乐的网站。我猜意味着音乐被标记了。所以我认为你不能仅仅因为它的频率或速度就说一首歌是快乐/悲伤/愤怒的……有些民谣真的很好听，但也有很多悲伤的……其他流行音乐，有些音乐听起来很棒，让你跳舞并吓坏了，但上下文/歌词很悲伤。这也取决于很多事情......

1.  听者（他喜欢什么，他对一种特殊的音乐有什么感觉，他对一首特殊的歌曲的诠释如何？）

2.  歌曲本身（它是如何制作的、歌词、速度以及谁在听它？）

3.  歌手。你喜欢他吗？你喜欢你听到的声音吗？歌手的语气是不是对你来说意味着“悲伤”？或者这听起来对你来说“快乐”？取决于你的耳朵学到了什么！

4.  你身边的人。你听一首歌...你会开始跳舞，因为它听起来很高兴，即使你周围的每个人都哭了？我不信！;)

...

所以我可以在接下来的两年里写下关于这一点的文章，我们将以一些关于心理学和广告/营销效果的讨论结束，你和我自己！

最好的解决方案，以及有多少其他人这样做，是......标记你的歌曲......获取一个大数据库，就是这样！我不认为你可以找到一种方法来使这个自动化。

哦，我忘了说，一首歌大多就像一本书......你有“我在这里”......“出了什么问题”部分，然后是如何解决问题的结论......所以让我们定义一样开心吗？伤心？:D 取决于，取决于！

这是一个页面，其中分析歌曲是否是热门歌曲。也许您应该联系他们并询问他们是如何做到的。[乌普拉亚](http://uplaya.com/)

试试这个 -> [Moodbar](http://wiki.ubuntuusers.de/Moodbar) (Ubuntu / Linux) 这是一个情绪栏，可以显示歌曲当前位置的情绪。也许你可以使用它。

但事实上，您正在寻找的是一件大事，是的，可能需要很长时间才能获得好的结果！:D

PS：祝你一切顺利！:)

# java - Web 应用程序开发到 Java 中的桌面应用程序开发

> ID：10512574
> 
> 赞同：0
> 
> 时间：2012-05-09T08:38:30.743
> 
> 标签：java, swing

我计划在`Java`. 我正在为 GWT、ZKOSS、Vaadin 等 Web 应用程序工作。我知道这`Swing`很好，但我不确定如何使用样式或自定义它。我们是否有其他框架可以使用 css 进行自定义？

注意：我的开发环境是 ubuntu 64 位系统，所以我不能使用`JavaFX`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:40:23.563

Java FX 2 非常适合这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:05:45.610

如果您不喜欢 Swing，您可以使用[SWT 库](http://www.eclipse.org/swt/)创建带有本机控件的应用程序。它由 Eclipse 开发环境使用。您也可以尝试使用[Apache Pivot](http://pivot.apache.org/)，它有自己的标记语言来定义 UI。

您还可以考虑使用成熟的框架，例如[Eclipse RCP](http://wiki.eclipse.org/index.php/Rich_Client_Platform)或[Netbeans Platform](http://netbeans.org/features/platform/index.html)。我认为这些都不允许使用 CSS

# matlab - 大数与小数的乘法

> ID：10512578
> 
> 赞同：1
> 
> 时间：2012-05-09T08:38:57.643
> 
> 标签：matlab, math, numbers, largenumber

我正在尝试使用 MATLAB 计算一个相当难看的积分。我遇到的问题是我将一个非常大的数字（> 10 ^ 300）与一个非常小的数字（< 10 ^ -300）相乘。MATLAB 为此返回“inf”，即使它应该在 0-0.0005 的范围内。这就是我所拥有的

```
 besselFunction = @(u)besseli(qb,2*sqrt(lambda*(theta + mu)).*u);
    exponentFuncion = @(u)exp(-u.*(lambda + theta + mu)); 
```

其中 qb = 5，lambda = 12，theta = 10，mu = 3。我想找到的是

```
 besselFunction(u)*exponentFunction(u) 
```

对于 u 的所有真实值。问题是，每当 u>28 时，它都会被评估为“inf”。我听说过并尝试过使用 MATLAB 函数“vpa”，但是当我想使用函数时它似乎效果不佳......

在这一点上，任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T09:58:48.543

我会使用对数。

让`x = Bessel function of u`和`y = x*exp(-u)`（比你的方程简单，但类似）。

既然`log(v*w) = log(v) + log(w)`，那么`log(y) = log(x) + log(exp(-u))`

这简化为

```
log(y) = log(x) - u 
```

这将在数​​字上表现得更好。

另一个关键是*不要*评估变成大数的贝塞尔函数并将其传递给数学函数以获取日志。最好自己编写，直接返回 Bessel 函数的对数。查看像 Abramowitz 和 Stegun 这样的参考文献，尝试找到一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:39:54.843

如果您正在进行积分，请考虑使用[Gauss–Laguerre 求积](http://en.wikipedia.org/wiki/Gauss%E2%80%93Laguerre_quadrature)。基本思想是，对于形式 的方程，`exp(-x)*f(x)`从 0 到 inf 的积分可以近似为`sum(w(X).*f(X))`其中的值`X`是拉盖尔多项式的零点并且`W(X)`是特定的权重（参见 Wikipedia 文章）。有点像一个非常先进的辛普森规则。由于您的方程式已经有`exp(-x)`一部分，因此它特别适合。

为了找到多项式的根，MATLAB Central 上有一个名为[LaguerrePoly](http://www.mathworks.com/matlabcentral/fileexchange/4912-laguerrepoly-m)的函数，从那里计算权重非常简单。

# android - 直接从 WebView 调用 Kindle Fire 上的视频播放器应用程序

> ID：10512580
> 
> 赞同：0
> 
> 时间：2012-05-09T08:39:03.670
> 
> 标签：android, kindle-fire

在我的应用程序中，我有一个 WebView，可用于显示 www.youtube.com 或 m.youtube.com 内容。我在 onLoadResource 回调中有以下代码：

```
@Override
public void onLoadResource (WebView view, String url)
{
    if(matchYouTubeWatchUrl(url))
    {
        invokeYouTubePlayer(m_context,url);
    }
} 
```

invokeYouTubePlayer 函数如下所示：

```
private static void invokeYouTubePlayer(Context c, String url)
{
    try
    {
        Uri uri = Uri.parse(url);
        String videoId = uri.getQueryParameter("v");
        if(videoId != null)
        {
            Intent youtubeIntent = new Intent(Intent.ACTION_VIEW);
            youtubeIntent.setData(Uri.parse("vnd.youtube://"+videoId));
            try
            {
                c.startActivity(youtubeIntent);
            }
            catch(ActivityNotFoundException e)
            {
                Log.e(TAG,"No handler for native youtube - expanding scope");
                // Try an alternate approach if there's no youtube app installed
                youtubeIntent = new Intent(Intent.ACTION_VIEW);
                youtubeIntent.setData(Uri.parse("http://www.youtube.com/watch?v="+videoId));
                try
                {
                    c.startActivity(youtubeIntent);
                }
                catch(ActivityNotFoundException e2)
                {
                    e2.printStackTrace();
                }
            }
        }
    }
    catch(NullPointerException e)
    {
        e.printStackTrace();
    }        
 } 
```

我发现在大多数 Android 设备上，第一个 startActivity 调用调用 YouTube 应用程序，但是在 KF 上，我看到的是它调用浏览器，然后调用视频播放器应用程序。

我自己没有 KF，我想知道是否有一个 URI 可以传递给 startActivity，它将直接调用 Kindle Fire 上的视频播放器，而无需通过浏览器作为中间步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:11:11.180

只是一个观察。有更好的方法来检测是否可以调用 Intent

```
private boolean isCallable(Intent intent) {
        List<ResolveInfo> list = getPackageManager().queryIntentActivities(intent, 
            PackageManager.MATCH_DEFAULT_ONLY);
        return list.size() > 0;
} 
```

好的，只是为了清楚 KF 它永远不会触发第一个活动，然后它会触发第二个，然后 KF 接管并将您带到 YouTube 应用程序。

如果是这样，我只能认为您在第一个 Intent 中的详细信息不正确，或者对于 KF，它与其他手机/标签中的不同

# c# - 比较 C# 中的两个列表

> ID：10512583
> 
> 赞同：2
> 
> 时间：2012-05-09T08:39:28.457
> 
> 标签：c#, asp.net, list

我有两个列表，我在这些列表中有值，

```
List1                  List2
-----                  -----
 1                      1
 2                      2
                        3 
```

我必须将第二个列表与第一个列表进行比较，并且我必须返回不在`List1`（此处为“3”）中的值，我们如何比较这样的两个列表？

谁能帮我？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T08:40:39.747

使用 LINQ 和[`Except`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)扩展方法。

```
var list1 = new List<int> { 1, 2 };
var list2 = new List<int> { 1, 2, 3 };
var remaining = list2.Except(list1); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T08:41:33.890

试试这个：

```
var result = list2.Except(list1); 
```

请注意，在变量名上使用首字母大写被认为是不好的风格（除非它们实际上是属性）:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:44:13.953

给你：http: [//msdn.microsoft.com/en-us/library/bb300779.aspx](http://msdn.microsoft.com/en-us/library/bb300779.aspx)

我发现有用的 msdn 上最稀有的例子。

# php - PHP：将德语日期格式 (%d.%m.%Y) 转换为有效的 unix 时间戳？

> ID：10512587
> 
> 赞同：3
> 
> 时间：2012-05-09T08:39:38.900
> 
> 标签：php, wordpress, date, unix-timestamp

> **可能重复：**
> [在 PHP 中将一种日期格式转换为另一种日期格式](https://stackoverflow.com/questions/2167916/convert-one-date-format-into-another-in-php)

我知道那里有很多帖子，但是没有任何经过验证或接受的答案可以很好地解释这一点！

我正在使用 Wordpress 并使用它来将日期保存到数据库中……</p>

`update_post_meta($post->ID, "event_date", $_POST["_wr_event_date"]);`

我只是将我想要的日期（如 08.05.2012）输入到`_wr_event_date`字段中，它成功地存储到数据库中。然而，对于更多的东西，我需要这个日期是可排序的，我想把它转换成一个 unix 时间戳。

如何将我输入的日期值“08.05.2012”（德国日期格式：%d.%m.%Y）转换为代表这个时间的 unix 时间戳？

我想过使用`pdate_post_meta($post->ID, "event_date", strtotime($_POST["_wr_event_date"]));`，但我想知道这是否是正确的方法，因为我想不出为什么`strtotime()`应该自动知道我输入的日期格式！？

对此有什么想法吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:51:35.077

只需使用 DateTime（strtotime，工作方式类似，但我更喜欢 DateTime）：

```
$a = new DateTime('08.05.2012');
echo $a->getTimestamp(); 
```

strtotime 和 DateTime 库编写得非常好，它们几乎可以检测每种情况，所以你很高兴。

否则，只需在数据库中选择一个 DATE 字段，然后您也可以在那里对其进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:50:19.943

您还可以使用该`mktime`功能 - [mktime](http://php.net/manual/en/function.mktime.php)

# java - 如何定义一个应该扩展 Map 或 Collection 的泛型参数？

> ID：10512588
> 
> 赞同：2
> 
> 时间：2012-05-09T08:39:40.227
> 
> 标签：java, generics

我想定义一个通用参数，它应该扩展 Map 或 Collection，但我不知道该怎么做：

```
public <T> void test(T t) {} 
```

我可以这样写：

```
public <T extends Map> void test(T t) {} 
```

或者

```
public <T extends Collection> void test(T t) {} 
```

但我不知道是否可以让 T 在单个方法中扩展 Map 或 Collection。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T08:45:38.140

简短的回答：没有。

您打算如何处理`t`方法中的参数？由于`Map`and `Collection`have 仅`Object`作为它们的共同超类型，因此您可以调用的唯一方法`t`将是那些 on `Object`。（即使两个接口上的方法，例如`size()`，也会被编译器拒绝。）

考虑到这一点，在这种情况下您是否有任何理由不能*重载*该方法？也就是说，为每个所需的参数类型定义一个实现：

```
public void test(Map<?,?> t) { ... }
public void test(Collection<?> t) { ... } 
```

如果您出于某种原因不想这样做，那么您似乎同样可以声明要采用的方法`Object`并执行该类的运行时类型检查。这在语义上是等效的，因为无论如何您都必须强制转换为 call`Map`或`Collection`-specific 方法，尽管这确实意味着类型检查是在编译时而不是运行时完成的。Java 的类型系统不允许您表达这种联合类型的依赖关系，所以我看不到任何其他选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T08:44:44.253

不，这是不可能的，但您可以创建两个单独的方法：

```
public <T extends Map> void test(T t) {
  // do the map part
}

public <T extends Collection> void test(T t) {
  // do the collection part
} 
```

如果你想将它们混合在一个处理方法中，你也可以这样写：

```
private void mixedTest(Object t) {
  if (t instanceof Map) {
    // map part
  } else if (t instanceof Collection) {
    // collection part
  } else {
    throw new RuntimeException("Unknown object");
  }
} 
```

并致电：

```
public <T extends Map> void test(T t) {
  mixedTest(t);
}

public <T extends Collection> void test(T t) {
  mixedTest(t);
} 
```

但我不确定它是否会导致一个很好的代码。对于不同类型的对象，我会坚持使用不同实现的第一部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T08:45:39.497

关于什么

```
public <T extends Map> void test(Map t) {} 
```

和

```
public <T extends Collection> void test(Collection t) {} 
```

...然后让 Java 选择正确的使用？

# php - PHP 文件手动运行良好但在 Cron 作业上表现出意外

> ID：10512595
> 
> 赞同：1
> 
> 时间：2012-05-09T08:40:17.180
> 
> 标签：php, cron

我有一个 Dreamhost Web 面板，我正在设置一个 cronjob 来运行我的 php 脚本，但它显示了奇怪的错误，看起来它没有执行文件，但它正在读取文件。错误如下所示，它作为电子邮件发送给我

> ?php: 没有这样的文件或目录 [somesessionvariable]=1573: command not found line 3: 意外标记附近的语法错误 `"include/mydb.php"' line 3:`require_once("include/mydb.php");

这是邮件的主题：

> cron /usr/local/bin/setlock -n /tmp/cronlock.3782446772.128284 sh -c $'/path /to/file/cases_cron.php'

该文件的权限是 755，我已经从其他完美运行的 cronjobs 复制了路径，因此文件路径没有问题，因为它正在获取文件内容。我没有找到问题所在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:44:39.570

我应该尝试使用包含文件的绝对路径。

我确定问题在于文件调用和 cron 调用中的包含路径未设置相同。

你可以这样做：

```
require_once dirname(__FILE__)."/include/mydb.php"; 
```

`__FILE__`是执行此行的文件的路径，`dirname()`返回文件所在的绝对路径。

当然，你可以随心所欲地使用`require`, `require_once`, `include`,`include_one`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:44:51.560

您的路径可能已关闭。尝试避免相对路径（include/file.php 而不是 /var/www/project/include/file.php）或使用[chdir()](http://se.php.net/manual/en/function.chdir.php)更改您的工作目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:52:13.347

您还可以将“cd”命令放入您的 cronjob 中，即：

```
cd /path/to/phpfile && php -f file.php 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T04:37:12.443

好的，伙计们，谢谢大家的支持，我终于可以解决问题了。

我在文件顶部缺少以下行

`#!/usr/local/bin/php`

在 php 文件的顶部添加这一行，对我的问题进行了排序。但我不知道这一行对脚本意味着什么。但是我从其他工作的 crons 中复制了它。

# android - 设备中已安装 Android Fetch 和默认浏览器

> ID：10512597
> 
> 赞同：5
> 
> 时间：2012-05-09T08:40:29.120
> 
> 标签：android, android-intent, launcher

我能够在`Intent.CATEGORY_LAUNCHER`.

所以为了测试我创建了一个测试活动，这个活动包含一个按钮，如果我按下按钮，它应该显示设备中的应用程序

```
NOTE: `it should not display specific. for example i needed only Browser it should display all browser applications.` 
```

我以这种方式尝试了一个小代码：

```
btn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.addCategory(Intent.CATEGORY_APP_BROWSER);

            List<ResolveInfo> mainLauncherList = getPackageManager().queryIntentActivities(intent, 0);
            System.out.println("the list iss = " +mainLauncherList);
        }
    }); 
```

该列表仅返回一个浏览器，即单个浏览器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T09:03:27.183

代替类别，给意图一个动作并查询可以`ACTION_VIEW`是 url 的动作，如下所示：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse("http://www.google.com"));

List<ResolveInfo> mainLauncherList = getPackageManager().queryIntentActivities(intent, 0);
Log.e("Browsers","the list iss = " +mainLauncherList); 
```

它返回如下内容：

```
[ResolveInfo{44e9d350 com.android.browser.BrowserActivity p=0 o=0 m=0x208000}] 
```

假设您安装了多个浏览器，它将包含所有浏览器。也许我误解了您的问题，但从技术上讲，如果您尝试启动打开 url 的意图，这会返回相同的应用程序。

至于获取这些应用程序的启动器活动，因为您已经知道如何获取所有主要应用程序，并且通过我提供的代码，您所追求的那个，您可以匹配包名称（大概）以找到启动器之一（ ?)

**更新**

```
ArrayList<String> allLaunchers = new ArrayList<String>();

Intent allApps = new Intent(Intent.ACTION_MAIN);
List<ResolveInfo> allAppList = getPackageManager().queryIntentActivities(allApps, 0);
for(int i =0;i<allAppList.size();i++) allLaunchers.add(allAppList.get(i).activityInfo.packageName);

Intent myApps = new Intent(Intent.ACTION_VIEW);
       myApps.setData(Uri.parse("http://www.google.es"));
List<ResolveInfo> myAppList = getPackageManager().queryIntentActivities(myApps, 0);
for(int i =0;i<myAppList.size();i++){
    if(allLaunchers.contains(myAppList.get(i).activityInfo.packageName)){
        Log.e("match",myAppList.get(i).activityInfo.packageName+"");
    }
} 
```

正如我所说，您从启动器中获取所有软件包，并将它们与能够执行操作的软件包进行匹配，无论是拍照还是浏览网页。你应该能够让这件事继续下去。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-22T20:09:08.063

在 API 版本 30 以上，我需要在`queries`AndroidManifest.xml 中添加一个部分，因为新的[包可见性规则](https://developer.android.com/preview/privacy/package-visibility)（除了`PackageManager.MATCH_ALL`上面提到的使用）。

```
<manifest ...>
    <application ... />
    <queries>
        <intent>
            <action android:name="android.intent.action.VIEW" />
            <data android:scheme="http" />
        </intent>
    </queries>
</manifest> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-05T05:59:30.103

如果其他人需要答案：

```
public static void getBrowserApps(Context mcontext) {
        PackageManager packageManager = mcontext.getPackageManager();
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setData(Uri.parse("http://www.google.com"));
        List<ResolveInfo> list = packageManager.queryIntentActivities(intent,
        PackageManager.MATCH_ALL);} 
```

`list`将包含所有浏览器的包信息。

# javascript - Jquery 无法正常运行（不等待？）

> ID：10512599
> 
> 赞同：1
> 
> 时间：2012-05-09T08:40:33.287
> 
> 标签：javascript, jquery

这是我的javascript：

```
 $('#Service').val("2");
  $("#Service").change(); // Sets new options in subservice.
  $('#Subservice').val("5");
  //EDIT:
  alert($('#Subservice').length); // Returns 1, when there are far more in it. 
```

服务和子服务是下拉框。

在服务更改时，将填充新的子服务列表。

这是设置要编辑的记录的字段。它在我单击编辑按钮时执行。它设置服务下拉框，然后填充子服务下拉框，然后尝试为其设置正确的下拉选择。

但是，它没有正确设置子服务框。选项正确，`.change()`工作和服务设置也正确。但是没有设置子服务。其中有一个值为 5 的条目。

我唯一的理由是 .change 正在触发，但在完成之前继续设置 .val 。因此在设置时不存在任何选项。但是我也不明白为什么它会成为线程。所以我不确定发生了什么或如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:42:43.457

你把你的代码放在准备好的函数中了吗？

```
$(function () {
  $('#Service').val("2");
  $("#Service").change(); // Sets new options in subservice.
  $('#Subservice').val("5");
}); 
```

这将等待整个 DOM 准备就绪，然后再执行函数中的代码，从而使 #service 可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:43:34.707

将代码中的最后一行更改为

```
setTimeout(function(){ 
    $('#Subservice').val("5");
}, 10); 
```

# r - 什么时候可以从 R 中执行垃圾收集中受益

> ID：10512602
> 
> 赞同：6
> 
> 时间：2012-05-09T08:40:40.913
> 
> 标签：r, garbage-collection

> **可能重复：**
> [使用 gc() 命令强制垃圾收集在 R 中运行](https://stackoverflow.com/questions/1467201/forcing-garbage-collection-to-run-in-r-with-the-gc-command)

我想知道我的一些代码是否会从执行垃圾收集中受益——即

```
> gc() 
```

从 gc 帮助中，我读到“调用 gc 会导致垃圾收集发生。这也将自动发生而无需用户干预，调用 gc 的主要目的是报告内存使用情况”。

在不再需要大型对象后，我会非常小心地删除它们，但我觉得我的操作速度在会话期间继续降低。我没有注意到通过定期使用 gc() 有实质性的改进——从上面的描述中可以看出，这个操作会不时自动发生。有人对它的正确应用有什么建议吗？

干杯

# java - Java/Android API 理解

> ID：10512606
> 
> 赞同：0
> 
> 时间：2012-05-09T08:40:56.180
> 
> 标签：java, android

我开始研究 Android 应用程序，我发现很难理解这段代码：

```
LineNumberReader(new FileReader("/proc/tty/drivers")); 
```

我怎么知道*LineNumberReader*函数接受*FileReader*作为类的新实例？我浏览了*LineNumberReader* API 的 Java 文档，它没有提及有关*FileReader*类的任何内容。我必须考虑 Java API 解释中的问题，你们中的任何人都可以帮助我理解如何在 Java 中使用 API 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T08:42:58.687

我怀疑你真的看到了：

```
new LineNumberReader(new FileReader("...")) 
```

该[`LineNumberReader`文档](http://developer.android.com/reference/java/io/LineNumberReader.html)显示了一个带有[参数的](http://developer.android.com/reference/java/io/LineNumberReader.html#LineNumberReader%28java.io.Reader%29)[构造`Reader`](http://developer.android.com/reference/java/io/LineNumberReader.html#LineNumberReader%28java.io.Reader%29)函数，并`FileReader`扩展了`Reader`。所以这样想：

```
Reader reader = new FileReader("/proc/tty/drivers");
LineNumberReader lineNumberReader = new LineNumberReader(reader); 
```

这对你来说更清楚吗？

# c# - 究竟什么是 ListView.RetrieveVirtualItem 事件 - C#

> ID：10512607
> 
> 赞同：2
> 
> 时间：2012-05-09T08:41:00.380
> 
> 标签：c#, winforms, listview, .net-3.5

对于 Winforms 应用程序中的虚拟 ListView 控件，RetrieveVirtualItem 事件的**所有功能是什么？**

场景：有一个 Dictionary 对象充当我的 ListView 缓存。它的项目显示在 ListView 上。单击列时，缓存字典在内存中排序，ListView 被 Refresh()ed。UI上的效果，ListView排序不错。:)

但我想了解 RetrieveVirtualItem 事件的作用是什么，它在 Refresh() 上触发。

在 RetrieveVirtualItem 事件处理程序 [ 别人的代码，:( ] 中，完成了以下操作：

1.  基于`RetrieveVirtualItemEventArgs.ItemIndex`, 从 Cache 中获取消息
2.  Set `RetrieveVirtualItemEventArgs.Item`= 上面检索到的项目

似乎在事件处理程序中所做的事情很重要，因为如果我把它拿出来，ListView 会哭。这次活动的意义何在？

**编辑** 或者让我重新表述这个问题......我担心的是，为什么在排序（和`RetrieveVirtualItem`事件处理程序）之后，所选项目仍保留在排序前的位置。即，如果我选择项目#5 并排序，并且如果排序使该项目成为最后一项，我希望在排序之后选择最后一项。但在我的情况下，排序后选择了第 5 个项目。那么`RetrieveVirtualItem`WRT 选中项的默认行为是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T22:28:32.417

虚拟 ListView 应该只为屏幕上当前可见的行调用 RetreiveVirtualItem。

例如，当您在 ListView 中导航时，按下 page down 键，ListView 将计算现在应该是顶行的索引，然后调用 RetrieveVirtualItem 以便您的代码可以提供要在每个行索引处使用的项目.

除非您缓存或以其他方式存储您通过 RetrieveVirtualItem 提供的项目，否则一旦它们被滚动出列表视图，它们将不再存在。

这就是 VirtualListView 中的 Virtual 的含义——没有任何真实的行，这些行是虚拟的。这就是它如何显示包含数十万行的列表的方式 - 因为它实际上只会包含屏幕上可见的行数。

实际上，ListView 就像一个窗口，在您的内部数据列表中上下移动 - RetreiveVirtualItem 方法是它调用的方法，以便在移动时将项目移动到该窗口中。它说，嘿，我刚搬到第 15 行 - 给我该行的项目。它将继续为每个可见的行索引调用 RetreiveVirtualItem。如果 ListView 在屏幕上的高度为 5 行，您将收到 5 次对 RetrieveVirtualItem 的调用 - 即使支持 listview 的实际数据有 3000 个项目。每次 ListView 的顶行发生变化（由于导航），您将收到 5 次 RetrieveVirtualItem 调用（并非总是如此，但这是正确的想法 - 例如，如果您向下滚动一行，

我想如果我们假设 ListView 在显示器上只有一行高（这意味着在屏幕上实际上只有一行是可见的），解释起来可能会更容易 - 当您上下移动 ListView 数据列表时（即用户导航 ListView），它每次移动到新行时都会准确地调用一次 RetrieveVirtualItem。

希望有帮助......祝你好运

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T09:23:45.670

RetrieveVirtualItem 事件仅在 ListView 进入虚拟模式时使用。它不是在 Items 集合中保留 ListViewItems（当不在虚拟模式下时），而是在需要时动态创建 ListViewItems。

如果您不处理 RetrieveVirtualItem 事件，则不会将任何 ListViewItems 添加到您的 ListView。我附上了一些用于处理事件的典型方法的示例代码：

```
 //Dynamically returns a ListViewItem with the required properties; in this case, the square of the index.
void listView1_RetrieveVirtualItem(object sender, RetrieveVirtualItemEventArgs e)
    {
        //Check if cache has been instantiated yet, and if so, whether the item corresponding to the index requested has been added to the cache already
        if (myCache != null && e.ItemIndex >= firstItem && e.ItemIndex < firstItem + myCache.Length)
        {
            //Return cached item for index
            e.Item = myCache[e.ItemIndex - firstItem];
        }
        else
        {
            //When item not in cache (or cache not available) return a new ListViewItem
            int x = e.ItemIndex * e.ItemIndex;
            e.Item = new ListViewItem(x.ToString());
        }
    } 
```

此示例取自 MSDN ( [http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.virtualmode(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.virtualmode%28v=vs.90%29.aspx) )，可以找到更多详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T05:59:52.727

虚拟列表视图仅处理索引。因此，如果在排序之前选择了第 5 项，则在排序之后仍然会选择第 5 项。控件本身无法知道以前在第 5 行的数据现在在第 1 行。

您必须在排序方法中为自己编程：

1.  `SelectedItems`记住选择了哪些项目（记住：在虚拟模式下不能使用属性）
2.  做排序
3.  找到以前选择的项目的索引现在生效
4.  选择那些索引

[您可以在ObjectListView](http://objectlistview.sourceforge.net/)中看到所有这些操作——标准 .NET ListView 的包装器。

# for-loop - 在compojure的网页上显示来自两个并行序列的数据

> ID：10512609
> 
> 赞同：0
> 
> 时间：2012-05-09T08:41:03.763
> 
> 标签：for-loop, clojure, sequence, compojure

我正在尝试在网页上显示两个序列的内容。其中第一个包含图片的名称，第二个包含图片的 URL。当我尝试遍历这两个列表（使用类似 foreach 的 for 循环）时，问题就开始了——这会导致多个图片名称或多个图片（简而言之，一团糟）。这是我的页面渲染代码示例（使用 将序列转换为矢量`(vec(flatten (sequence)))`）：

```
 (defn view-output []
  (view-layout
   [:h2 "default images"]

   [:form {:method "post" :action "/"}
     ( for [manganame ["image1" "image2"]]
       [:input {:type "text" :value manganame}]) 

       (for [manga-image["image1URL" "image2URL"]]
         [:img {:src manga-image}[:br] [:br][:br]])  ] )) 
```

此代码将首先显示名称，然后是图片。任何人都可以建议一种将这些值彼此相邻插入的方法，而不是在彼此之上（也许像表格一样的实现）

```
 Image_name1
                               Picture1

                             Image_name2
                               Picture2 
```

或者

```
 Image_name1      Image_name2
                      Picture1         Picture2 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:20:28.313

我刚刚意识到正确的代码是：

```
(defn view-output []
  (view-layout
    [:h2 "default images"]
    [:form {:method "post" :action "/"}
    (interleave 
      (for [manga-name ["image1" "image2"]]
           [:input {:type "text" :value manga-name}]) 
      (for [manga-image["image1URL" "image2URL"]]
           [:img {:src manga-image}[:br] [:br][:br]]))])) 
```

你想要一个 [:input][:img][:input][:img] 的列表。

我之前的回答是返回 [:input :img][:input :img]：

```
(defn view-output []
  (view-layout
    [:h2 "default images"]
    [:form {:method "post" :action "/"}
    (for [[manganame manga-img] (map vector ["image1" "image2"] ["image1URL" "image2URL"]))]
      (concat 
         [:input {:type "text" :value manganame}] 
         [:img {:src manga-image} [:br ] [:br ] [:br ]]))])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T05:51:57.480

```
(mapcat (fn [manganame mangaimage]
          [[:input {:type "text" :value manganame}]
           [:img {:src mangaimage}]
           [:br] [:br] [:br]])
        ["image1" "image2"]
        ["image1URL" "image2URL"]) 
```

给

```
([:input {:type "text", :value "image1"}]
 [:img {:src "image1URL"}]
 [:br] [:br] [:br]
 [:input {:type "text", :value "image2"}]
 [:img {:src "image2URL"}]
 [:br] [:br] [:br]) 
```

# ruby-on-rails - Rails rake db:schema:dump 错误

> ID：10512615
> 
> 赞同：6
> 
> 时间：2012-05-09T08:41:20.077
> 
> 标签：ruby-on-rails

当我跑`rake db:schema:dump`

我收到以下错误：

> 耙中止！(): 在第 18 行第 3 列扫描一个简单键时找不到预期的 ':'
> 
> 任务：TOP => db:schema:dump => db:load_config
> 
> （通过使用 --trace 运行任务查看完整跟踪）

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T13:56:08.280

我发现“：”分隔符必须在值之前跟一个空格。例如，这会使 rake`db:create`命令崩溃：

在 database.yml 文件中：

```
development:
adapter: mysql2
encoding: utf8
reconnect: true
database: Some_Silly_Database_development
pool: 5
username: Jobs
password:anythingapple
socket: /tmp/mysql.sock 
```

*只需在冒号分隔密码*和*anyapple*之间插入一个空格，如下所示：`password: anythingapple` Rake db:create 运行良好。一个被忽视的空间使差异。希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T13:46:04.070

检查你的 database.yml 文件。听起来您缺少一行：

# xcode - 将应用程序转移到 iPad 2

> ID：10512616
> 
> 赞同：0
> 
> 时间：2012-05-09T08:41:20.017
> 
> 标签：xcode, ipad

我在将应用程序转移到 ipad 2 时遇到问题。起初我使用的是带有 xcode 4.2 的 Mac 10.6.8，然后它说 ipad 2 是 5.1 的 IOS，但 xcode 4.2 只能达到 IOS 5.0。所以现在我使用 Mac 10.7.8 和 Xcode 4.3。我已经单击了钥匙串的证书。然后我下载了配置文件，双击它，但组织者说“找不到有效身份”。我去了构建设置并尝试更改代码签名，但除了 iphone 开发人员、iphone 分发和其他“配置文件与默认密钥链中的任何有效证书/私钥对不匹配”之外，我无法选择。

我无法转移我所有的应用程序。请帮忙。:o

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:43:47.730

仔细检查您是否有以下内容：

1.  您的开发者证书的私钥（签入钥匙串访问）
2.  开发者证书（签入钥匙串访问）
3.  有效的配置文件（团队配置文件，或绑定到您的应用程序 ID 的配置文件，如果您创建了它，请检查 xCode > Organizer > 配置文件）

# .net - 依赖属性错误

> ID：10512629
> 
> 赞同：9
> 
> 时间：2012-05-09T08:41:55.063
> 
> 标签：.net, wpf, dependency-properties

我正在学习依赖属性。我读了很多帖子和书籍，但我仍然不清楚。

下面显示的程序是我写来学习的。里面有一些错误，请帮忙解决。我有问题。

1.  自定义 Dependency 属性元素的主要用途是用于通知更改？
2.  我在 WPF 教科书中找到了**Button**的“IsDefaultProperty”代码。这意味着“ **IsDefault** ”属性是依赖属性吗？
3.  为什么他们显示该代码？这意味着，在内部，在 Button 类中，它是这样定义的？（他们展示了内部代码？）或者他们展示了如何定义为自定义？

这是我的代码：

```
namespace DependencyProperties
{
    public class Contact
    {
        private int id=100;
        private string name="shri";
        public static readonly DependencyProperty IsPresentProperty;

        public int ID
        {
            get { return id; }
        }
        public string NAME
        {
            get { return name; }
        }

        static Contact()
        {
            IsPresentProperty = DependencyProperty.Register("IsPresent", typeof(bool),typeof(Contact),new FrameworkPropertyMetadata(false,new PropertyChangedCallback(OnIsPresentChanged)));
        }

        public bool Present
        {
            get { return (bool)GetValue(Contact.IsPresentProperty); }
            set { SetValue(Contact.IsPresentProperty, value); }
        }

        private static void OnIsPresentChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {  

        }
    }
} 
```

我看到了错误：

```
> Error: GetValue and SetValue does not exist in the current context 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-09T08:49:33.063

`DependencyProperty`实例必须在 的实例上定义`DependencyObject`。因此，您的类必须派生自`DependencyObject`或其子类之一。WPF 中的许多类型都由此派生，包括`Button`.

因此，要让您的代码在这种情况下工作，您必须使用：

```
public class Contact : DependencyObject
{
    // ... 
```

这就是您收到错误的原因`GetValue`-`SetValue`它们是在`DependencyObject`.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-09T08:49:19.650

> 自定义 Dependency 属性元素的主要用途是用于通知更改？

不，这也可以通过实现类来安排`INotifyPropertyChanged`。提供更改通知的依赖属性，但真正的理由是不同的。请参阅[为什么依赖属性？](https://stackoverflow.com/questions/1723756/why-dependency-properties)以及[WPF 属性系统如何经济？](https://stackoverflow.com/q/5552943/50079)

> 我在 WPF 教科书中找到了 Button 的“IsDefaultProperty”代码。这意味着“IsDefault”属性是依赖属性吗？

是的。命名字段“FooBarProperty”是定义依赖属性的 WPF 约定；您可以检查文档[`IsDefaultProperty`](http://msdn.microsoft.com/en-us/library/system.windows.controls.button.isdefaultproperty.aspx)以查看它确实是一个依赖属性，甚至[`IsDefault`](http://msdn.microsoft.com/en-us/library/system.windows.controls.button.isdefault.aspx)文档也有一个名为“依赖属性信息”的部分。

> 为什么他们显示该代码？这意味着，在内部，在 Button 类中，它是这样定义的？（他们展示了内部代码？）或者他们展示了如何定义为自定义？

我不确定“那个”代码是什么，但是是的，该属性几乎肯定是这样定义的`Button`（“几乎”，因为我不确定您指的是什么）。

> 错误：当前上下文中不存在 GetValue 和 SetValue

那是因为你不是从[`DependencyObject`](http://msdn.microsoft.com/en-us/library/system.windows.dependencyobject.aspx).

# git - Git：无法识别的分支名称

> ID：10512633
> 
> 赞同：4
> 
> 时间：2012-05-09T08:42:23.430
> 
> 标签：git, git-branch, branching-and-merging

在 git 中，我命名了一个分支：parse()

该名称已被接受，但在合并时出现错误：

> git merge parse() bash：意外标记'('附近的语法错误

是否可以重命名分支？还有其他方法可以解决此问题吗？

谢谢！

平台：Linux、bash

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T08:43:29.480

尝试通过在分支名称周围加上引号来合并，例如：

```
git merge 'parse()' 
```

您可以重命名一个分支，但这并不那么简单。无论您想在哪里使用分支名称，只需使用引号（单引号或双引号！）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:57:13.197

您可以使用以下命令重命名分支：

```
git branch -m 'parse()' your_new_branch_name 
```

（请参阅[在 git 中切换分支名称](https://stackoverflow.com/questions/21848/switch-branch-names-in-git)）

您还应该注意，在分支名称（或任何特殊的 bash 字符）中使用括号只会给您带来问题。我建议只使用`[-_a-zA-Z0-9]`字符。

# mysql - 使用 Security::Cipher 在数据库中存储加密数据

> ID：10512634
> 
> 赞同：2
> 
> 时间：2012-05-09T08:42:31.667
> 
> 标签：mysql, cakephp, cakephp-2.0

我正在使用以下代码来加密一些字符串：

```
$value = 'somevalue';
$key = Configure::read('Security.salt');

$encrypted = Security::cipher($value,$key);
$decrypted = Security::cipher($encrypted,$key); 
```

它工作正常，它可以正确加密/解密。但我无法在数据库中保存加密值 - 我将字段 encrypted_data 的值设置为数据库中此字段中没有任何内容`$encrypted`之后。`save()`当我将 $encrypted 更改为例如 'string' 时，它会将 'string' 正确保存到`'encrypted_data'`.

所以问题可能是加密字符串包含一些数据库不接受的奇怪字符 - 我该如何解决？（使用带有 utf-8 的 mysql 数据库）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-09T22:52:47.723

您也许可以`base64_encode($encrypted)`在加密之后、存储到数据库`base64_decode($encrypted)`之前以及解密之前使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T17:28:54.967

问题是您`VARCHAR`不支持这些字符。相反，您应该将列更改[`VARBINARY`](http://dev.mysql.com/doc/refman/5.0/en/binary-varbinary.html)为支持 UTF 字符集之外的字符。

# javascript - 如何检查phonegap是否可以使用

> ID：10512635
> 
> 赞同：2
> 
> 时间：2012-05-09T08:42:39.793
> 
> 标签：javascript, android, cordova, dom-events, phonegap

因为我是phonegap的新手。我想知道“如何检查 phonegap 是否可以使用”。我在 www 目录中创建了两个文件夹“scripts and css”。我在脚本文件夹中创建了 common.js 文件。我在 common.js 中编写了以下代码

```
var isPhoneGapReady = false; 
function init() { 
document.addEventListener("deviceready",onDeviceReady, false); 
var intervalID = window.setInterval(function() { 
if (PhoneGap.available) { 
onDeviceReady(); 
} 
}, 500); 
} 
function onDeviceReady() { 
window.clearInterval(intervalID); 
isPhoneGapReady = true; 
alert('The device is now ready'); 
} 
window.onload = init; 
```

我不知道如何在 index.html 中使用此代码。我使用eclipse编辑器。

伸出援助之手受到高度赞赏。

# objective-c - 按值传递与按引用传递

> ID：10512636
> 
> 赞同：0
> 
> 时间：2012-05-09T08:42:39.963
> 
> 标签：objective-c, nsstring, pass-by-reference

在过去的几天里，我一直在研究一些基础知识，我意识到我从来没有真正理解为什么 NSString/NSMutableString 的传递引用不起作用。

```
- (void)testing{    

NSMutableString *abc = [NSMutableString stringWithString:@"ABC"];
[self testing:abc];
NSLog(@"%@",abc); // STILL ABC
}

-(void)testing:(NSMutableString *)str {
str = [NSMutableString stringWithString:@"HELP"];
} 
```

我该怎么做？我希望我的测试方法能够从 main 方法操作字符串。我一直在将它与可变数组、字典等一起使用，并且工作正常。感觉很奇怪，我从来没有意识到它是如何与字符串一起工作的。

但是值会以这样的方式发生变化，这是对第一个字符串的引用

```
NSMutableString *string1;
NSMutableString *string2;

string1 = [NSMutableString stringWithString: @"ABC"];
string2 = string1;

[string2 appendString: @" HELP"];

NSLog (@"string1 = %@", string1); // ABC HELP
NSLog (@"string2 = %@", string2); // ABC HELP 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T18:07:23.720

和 Java 一样，Objective-C 也只有按值传递和赋值。也像 Java 一样，对象总是在指针后面（你永远不会将对象本身放入变量中）。

当您分配或传递对象指针时，该指针被复制并指向与原始指针相同的对象。这意味着，如果对象是可变的（即它有一些改变其内容的方法），那么您可以通过一个指针改变它并通过另一个指针查看效果。突变总是通过调用方法或直接分配给字段来实现。

```
-(void)testing:(NSMutableString *)str {
  [str setString:@"HELP"];
} 
```

分配给指针永远不会改变它指向的对象；相反，它使指针指向另一个对象。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-28T16:19:05.140

我不能有意识地让这个错误的答案在互联网上徘徊。

在目标 c 中通过引用传递是可能的；这就是为什么它比 Java 更好。

就是这样：

```
- (void)testing
{    
    NSMutableString *abc = [NSMutableString stringWithString:@"ABC"];
    [self testingHelper:&abc];
    NSLog(@"%@", abc); // NOW HELP
}

- (void)testingHelper:(NSMutableString **)str {
    *str = [NSMutableString stringWithString:@"HELP"];
} 
```

# java - 如何封装参数化消息的逻辑？

> ID：10512640
> 
> 赞同：1
> 
> 时间：2012-05-09T08:43:04.090
> 
> 标签：java, jakarta-ee, properties, jstl, message

我正在使用 java.util.resourcebundle 来格式化我的 JSTL 消息，这很好用：

我使用你可以在这里看到的 MessageFormat 类。现在我想把它封装成一个方法，`getParametrizedMessage(String key, String[]parameters)`但我不知道该怎么做。现在有很多工作要显示一两条带参数的消息：

```
UserMessage um = null;   
ResourceBundle messages = ResourceBundle.getBundle("messages");
String str = messages.getString("PF1");
Object[] messageArguments = new String[]{nyreg.getNummer()};
MessageFormat formatter = new MessageFormat("");
formatter.applyPattern(messages.getString("PI14"));
String outputPI14 = formatter.format(messageArguments);
formatter.applyPattern(messages.getString("PI15"));
String outputPI15 = formatter.format(messageArguments)
if(ipeaSisFlag) 
if(checkIfPCTExistInDB && nyreg.isExistInDB()) {            
//um = new ExtendedUserMessage(MessageHandler.getParameterizedMessage("PI15", new String[]{nyreg.getNummer()}) , UserMessage.TYPE_INFORMATION, "Info");
um = new ExtendedUserMessage(outputPI15 , UserMessage.TYPE_INFORMATION, "Info"); 
```

…等等。现在我可以将此逻辑移动到一个静态类 MessageHandler.getParameterizedMessage 中，该类现在不起作用并且看起来像这样：

```
private final static String dictionaryFileName="messages.properties";

public static String getParameterizedMessage(String key, String [] params){
        if (dictionary==null){
            loadDictionary();
        }
        return getParameterizedMessage(dictionary,key,params);
    }

    private static void loadDictionary(){       
        String fileName = dictionaryFileName;   
                try {
            dictionary=new Properties();
            InputStream fileInput = MessageHandler.class.getClassLoader().getResourceAsStream(fileName);
            dictionary.load(fileInput);
            fileInput.close();
        }
        catch(Exception e) {
            System.err.println("Exception reading propertiesfile in init "+e);
            e.printStackTrace();
            dictionary=null;
        }
    } 
```

我怎样才能使使用我的参数化消息像调用带有键和参数的方法一样简单？

谢谢你的帮助

## 更新

逻辑来自 this 扩展的抽象类中的继承方法。该方法如下所示：

```
 protected static String getParameterizedMessage(Properties dictionary,String key,String []params){
        if (dictionary==null){
            return "ERROR";
        }
        String msg = dictionary.getProperty(key);
        if (msg==null){
            return "?!Meddelande " +key + " saknas!?";
        }
        if (params==null){
            return msg;
        }
        StringBuffer buff = new StringBuffer(msg);
        for (int i=0;i<params.length;i++){
            String placeHolder = "<<"+(i+1)+">>";
            if (buff.indexOf(placeHolder)!=-1){
                replace(buff,placeHolder,params[i]);
            }
            else {
                remove(buff,placeHolder);
            }
        }
        return buff.toString();
    } 
```

我认为我必须重写上述方法，以使其像资源包一样工作，而不仅仅是字典。

## 更新 2

似乎有效的代码在这里

```
public static String getParameterizedMessage(String key, Object [] params){

    ResourceBundle messages = ResourceBundle.getBundle("messages");
    MessageFormat formatter = new MessageFormat("");
    formatter.applyPattern(messages.getString(key));
    return formatter.format(params);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:23:43.067

我不确定您要达到什么目标，这是我过去所做的：

```
public static final String localize(final Locale locale, final String key, final Object... param) {
    final String name = "message";
    final ResourceBundle rb;

    /* Resource bundles are cached internally,
       never saw a need to implement another caching level
     */
    try {
        rb = ResourceBundle.getBundle(name, locale, Thread.currentThread()
                .getContextClassLoader());
    } catch (MissingResourceException e) {
        throw new RuntimeException("Bundle not found:" + name);
    }

    String keyValue = null;

    try {
        keyValue = rb.getString(key);
    } catch (MissingResourceException e) {
        // LOG.severe("Key not found: " + key);
        keyValue = "???" + key + "???";
    }

    /* Message formating is expensive, try to avoid it */
    if (param != null && param.length > 0) {
        return MessageFormat.format(keyValue, param);
    } else {
        return keyValue;
    }
} 
```

# c++ - 调用的对象已与其客户端断开连接

> ID：10512641
> 
> 赞同：0
> 
> 时间：2012-05-09T08:43:09.073
> 
> 标签：c++, visual-studio-2010, exception

在 VS2010 SP1、Windows 7 64 下调试 32 位 MFC C++ 应用程序时，我开始遇到以下异常。虽然我可以很容易地忽略它，但我只是想知道它是什么。

> SCCW.exe 中 0x751eb9bc 处的第一次机会异常：0x80010108：调用的对象已与其客户端断开连接。

一个[类似的问题](https://stackoverflow.com/questions/6661005/error-the-object-invoked-has-disconnected-from-its-clients-automate-ie-8-wit)和[谷歌搜索](http://www.google.ie/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#hl=en&gs_nf=1&pq=0x751eb9bc&cp=52&gs_id=f&xhr=t&q=The%20object%20invoked%20has%20disconnected%20from%20its%20clients&pf=p&safe=off&sclient=psy-ab&oq=The%20object%20invoked%20has%20disconnected%20from%20its%20clients&aq=0&aqi=g4&aql=&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=ca91e5c879985e65&ion=1&biw=1280&bih=899)表明它与自动化相关，虽然我的应用程序支持自动化，但它当时并没有做任何与自动化相关的事情。活动线程的堆栈帧没有显示太多，所有系统 DLLS (ntdll.dll,rpcrt4.dll,ole32.dll)。我在同一个系统上调试同一个应用程序很长时间了，最​​近才开始看到这个，所以想知道为什么。任何想法，可以安全地忽略它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:04:09.593

这将是其他一些被加载的可执行文件。它可能是具有 Windows 钩子等的东西，例如病毒扫描程序，或者它可能是一个 shell 扩展。查找 SCCW 是什么。如果它是您系统上不需要的东西，请将其卸载。

忽略它应该是安全的，您可以通过添加异常类型并告诉 VS 不要停止它来防止应用程序在调试器中停止。

调试 | 例外...

然后在 Win32 Exceptions 下取消勾选“80010108 Server Disconnected from clients”。

# ruby-on-rails - 如何为 pg_search 多搜索启用 :tsearch 字典？

> ID：10512642
> 
> 赞同：4
> 
> 时间：2012-05-09T08:43:09.503
> 
> 标签：ruby-on-rails, pg-search

我正在将 pg_search 添加到 Rails 应用程序中。我正在按照 github 和此[railscast](http://railscasts.com/episodes/343-full-text-search-in-postgresql)上的说明进行操作，但遇到了问题。

我正在建立一个多模型搜索，并且我有一个基本的实现工作。但我想扩展 pg_seach 以使用它的英语词典。

我已经有一个初始化程序：

```
PgSearch.multisearch_options = {
  :using => [:tsearch,:trigram],
  :ignoring => :accents
} 
```

所以，从我读过的内容来看，添加字典应该很简单

```
PgSearch.multisearch_options = {
  :using => [:tsearch => [:dictionary => "english"],:trigram],
  :ignoring => :accents
} 
```

但是当我启动我的服务器时

```
...config/initializers/pg_search.rb:2: syntax error, unexpected ']', expecting tASSOC (SyntaxError)
  :using => [:tsearch => [:dictionary => "english"],:trigram], 
```

我尝试将方括号换成大括号，以及我能想到的所有其他语法排列，但没有运气。

这里的正确语法是什么？为什么我的尝试无效，因为我遵循了范围搜索的语法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T00:11:48.720

您发布的内容不是有效的 Ruby 语法。

你想要这样的东西：

```
PgSearch.multisearch_options = {
  :using => {
    :tsearch => {
      :dictionary => "english"
    },
    :trigram => {}
  },
  :ignoring => :accents
} 
```

原因是如果你想拥有键值对，你必须使用哈希。所以本质上，pg_search 允许 2 种语法：

```
:using => someArray # such as [:tsearch, :trigram] 
```

这意味着“使用 tsearch 和 trigram，两者都带有默认选项”

或者

```
:using => someHash # such as {:tsearch => optionsHash1, :trigram => optionsHash2} 
```

这意味着“将 tsearch 与 optionsHash1 中的某些选项一起使用，并将 trigram 与 OptionsHash2 中的某些选项一起使用”

让我知道是否有什么可以澄清的。这是非常基本的 Ruby 语法，但我知道 pg_search 接受这两种格式的事实可能会让那些不熟悉的人感到困惑。

# php - 增加模板精简版中的值

> ID：10512647
> 
> 赞同：0
> 
> 时间：2012-05-09T08:43:31.883
> 
> 标签：php, template-lite

我写了下面的代码，

我想要的是当变量为 4 时，创建一个新的`<li>`. 在下面的代码中，{$counter} 总是 1 为什么？我不能增加它

```
 <div id="slider">
            <ul>
                <li>
                {foreach from=$books value=book}
                {counter start=0 print=false assign=mycounter}
            { math equation="x + 1" x=$mycounter assign="counter" }

                {$counter}

                     <div class="video2">

                        <div class="thumb">
                            <div class="kitap"><a href="http://cmkzl.nokta.com/kitaplar/{$book.title}"><img src="{$imageUrl}/{$book.image}" width="145" height="205"></a></div>
                            <div class="kitap_baslik"><strong>{$book.title}</strong></div>

                            <div class="alt_baslik"><em>{$book.description|truncate:65:"..."}</em></div>
                            <div class="yorumlar_btn"><a href="b_u_tirmanirken"><img src="{$imageUrl}/yorumlar_btn.jpg" width="145" height="50"></a></div>
                        </div>
                    </div>
                </li>
                {if $counter is div by 4}
                <li>
                    {/if}
            {/foreach}

             </ul>

      </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:59:18.637

不如我用 PHP 给你答案

```
<div id="slider">
<ul>
    <li>
<?php
    $counter = 0;
    foreach( $book in $books)
    { ?>              
         <div class="video2">

            <div class="thumb">
                <div class="kitap"><a href="http://cmkzl.nokta.com/kitaplar/<?= $book.title ?>"><img src="<?=$imageUrl?>/<?=$book.image?>" width="145" height="205"></a></div>
                <div class="kitap_baslik"><strong><?=$book.title?></strong></div>

                <div class="alt_baslik"><em><?= truncateString($book.description,65,true,"...")?></em></div>
                <div class="yorumlar_btn"><a href="b_u_tirmanirken"><img src="<?=$imageUrl?>/yorumlar_btn.jpg" width="145" height="50"></a></div>
            </div>
        </div>

    <?php 
        $counter++;
        if($counter == 4){
            $counter = 0; ?>
            </li>
            <li>
    <?php
        }

    }

 function truncateString($str, $chars, $to_space, $replacement="...") {
   if($chars > strlen($str)) return $str;

   $str = substr($str, 0, $chars);

   $space_pos = strrpos($str, " ");
   if($to_space && $space_pos >= 0) {
      $str = substr($str, 0, strrpos($str, " "));
   }

   return($str . $replacement);
 }

    ?>
    </li>
 </ul> 
```

# jquery - 单击鼠标按钮时未从自动完成中选择值

> ID：10512648
> 
> 赞同：0
> 
> 时间：2012-05-09T08:43:32.270
> 
> 标签：jquery, autocomplete, dojo, jquery-autocomplete, buttonclick

我有一个`Jquery Autocomplete`. 它工作正常。当我从键盘箭头键上下移动或将鼠标悬停在特定值上时，会选择值。但是当我按下按钮将我选择的值放在文本框中时它不起作用，相反，如果我在键盘上按下回车键，值就会输入到文本框中。

让我给我我`code`的自动完成::

```
$(document).ready(function hello(){
var myVar2 = <%=request.getAttribute("variable1")%>
      $("input#assignedtoid").autocomplete({
  source: myVar2
 });
});

<input dojoType="dijit.form.ValidationTextBox" id="assignedtoid" name="assignedtoname"  required="true" onfocus="hello()" value=<%=session.getAttribute("Username")%> onblur="valassignedtoid()"> 
```

在上面的代码`myVar2`中是我的`Json`表单数据，它被分配了一个自动完成的源。自动完成中的值很好。我调用函数`OnFocus`中的事件。为什么这个值没有被选中。但是，我从中获取代码的站点。该值在鼠标单击和输入时被选中。这是 ::`input tag``hello()``mouse button click``site`

```
http://jqueryui.com/demos/autocomplete/ 
```

这里唯一的区别是 Source 是静态的，我以`Json`thru的形式从数据库中获取它`myVar2`。我正在使用 IE。用作`dijit.form.ValidationTextBox`我的`input`

请帮忙。谢谢 ..

编辑部分::

我已经导入了以下 js 文件::

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
<script type="text/javascript" src="http://dev.jquery.com/view/trunk/plugins/autocomplete/jquery.autocomplete.js"></script>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script> 
```

当我运行它时，`Google chrome`我没有得到任何自动完成。我确实得到了一个`error`::

```
<script type="text/javascript" src="http://dev.jquery.com/view/trunk/plugins/autocomplete/jquery.autocomplete.js"></script> 
```

没有找到。确实它不再有效。但是当我在 IE 上运行它时，我的自动完成效果很好。这可能是原因吗？你也可以告诉我从上面导入的哪些 Jquery 导入，如果其中任何一个是额外的，我应该删除它们。有点困惑。

我从这里获取了代码::

```
http://jqueryui.com/demos/autocomplete/ 
```

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:14:40.323

`onfocus="hello()"`从您的标记中删除，并修复 javascript ：

```
dojo.require("dijit.form.ValidationTextBox");

dojo.ready(function () {
  var myVar2 = <%=request.getAttribute("variable1")%>;
  $("input#assignedtoid").autocomplete({
    source: myVar2
  });
}); 
```

顺便说一句，您为什么不想使用`dijit.form.ComboBox`纯 dojo 解决方案？

**更新**

如果你想使用 google cdn，你需要这些导入：

```
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.19/themes/base/jquery-ui.css" type="text/css" media="all" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.19/jquery-ui.min.js" type="text/javascript"></script> 
```

# jquery - jquery从下拉列表中获取选定的值？不是文字

> ID：10512651
> 
> 赞同：7
> 
> 时间：2012-05-09T08:43:45.520
> 
> 标签：jquery

如何获取所选下拉列表的值。

前任。

```
" 文本="---选择---" 值="0">"
```

我需要值“0”。

谢谢，

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-09T08:46:45.613

要获得价值：

```
$('#YourdropDownId').val(); 
```

要获取文本：

```
$('#YourdropDownId :selected').text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T11:21:09.133

尝试

```
$('[name="YourdropDownName"] option:selected').val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T10:08:55.003

已经看到类似的答案，但`$('#YourdropDownId').val()`从来没有为我工作过 jQuery 1.10.2

相反，我必须`$("select[id*=ddlurgency]").val()`用于：

```
<select name="urgency" id="ddlurgency" class="form-control" runat="server">
   <option value="970200000">Not very urgent</option>
   <option value="970200001">Urgent</option>
   <option value="970200002">Very urgent</option>
</select> 
```

# excel - 用于计算 VBA 中总行数的 Excel 文件

> ID：10512654
> 
> 赞同：1
> 
> 时间：2012-05-09T08:43:48.587
> 
> 标签：excel, vba

我正在编写一个 VBA 宏来计算`sheet2`Excel 文件中的行数

```
Dim cnt As Integer 
Dim i As Integer

cnt = Range("Sheet2").Rows.Count ' giving error at this row
For i = 2 To cnt
    t1 = "A" + CStr(i)
    t2 = "B" + CStr(i)
Next i 
```

但它给出了错误：

> 对象“_global”的方法“范围”失败

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T09:21:52.243

`Range`用于*Cell Range*而不是**Excel Sheets**。

尝试以下操作：

1.  要获取已**用行数**：

    ```
    cnt = Worksheets("Sheet2").Cells.SpecialCells(xlCellTypeLastCell).Row 
    ```

2.  要获取**工作表所有行的计数**：

    ```
    cnt = Worksheets("Sheet2").Rows.Count 
    ```

3.  要获取**特定的行数`Range`**：

    ```
    cnt = Worksheets("Sheet2").Range("A1:A6500").Rows.Count 
    ```

我认为您正在寻找使用过的单元格范围。将变量定义为 Long 以解决溢出问题

```
Dim cnt As Long 
Dim i As Long 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:57:29.773

Sheet2 是工作表，而不是范围。

```
Worksheets("Sheet2").Rows.Count 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-12-08T00:45:38.457

尝试使用以下代码：

```
Dim crb1 As Long

'Count Rows

    Range("B2").Select
    Selection.End(xlDown).Select
    crb1 = ActiveCell.Row

    MsgBox ("Number of rows are ") & Str(crb1) 
```

# proxy - Helicon ISAPI 重写代理不转发请求

> ID：10512655
> 
> 赞同：0
> 
> 时间：2012-05-09T08:43:49.757
> 
> 标签：proxy, isapi-rewrite

我的 helicon 文件中定义了以下规则：

```
RewriteEngine on
RewriteCond %{HTTP:Host} ^current.mydomain.com$ [NC]
RewriteRule /reg http://another.mydomain.com/registration [NC, P] 
```

当我导航到 URL [http://current.mydomain.com/reg](http://current.mydomain.com/reg)时，我只收到一个空白页。Helicon 似乎没有将请求转发到其他站点。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:22:48.170

尝试使用以下内容：

```
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP:Host} ^current\.mydomain\.com$ [NC]
RewriteRule ^reg http://another.mydomain.com/registration [NC,P] 
```

# android - 街景是否收费？我可以在 Windows Phone 系统上使用它吗？

> ID：10512656
> 
> 赞同：0
> 
> 时间：2012-05-09T08:43:51.167
> 
> 标签：android, ios, windows-phone-7, licensing, google-street-view

我想为 Android、Ios 和 Windows Phone 开发一个应用程序。此应用程序大量使用街景/增强现实..

所以我的问题是：

*   在我的应用中使用街景需要付费还是免费使用？
*   可以在 Windows Phone / IOS 上使用它吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:51:27.793

是的，有可能

Android：免费，只需要使用 Map Api（通过电子邮件注册）

对于 IOS：我认为您不需要额外的费用来使用 api，过程可能会有所不同 [http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKit_Framework_Reference/_index.html](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKit_Framework_Reference/_index.html)

对于 WINDOWS 手机 7 [http://dotnetbyexample.blogspot.in/2010/10/google-maps-for-windows-phone-7.html](http://dotnetbyexample.blogspot.in/2010/10/google-maps-for-windows-phone-7.html)

请接受回答，如果有帮助有任何问题，请告诉我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:52:30.893

在 Windows Phone 7 中，您可以免费使用 Bing 地图，但您必须首先在 bing 上拥有一个开发人员帐户 :)，这非常容易。此链接将指导您如何获取 bing 地图密钥，它是免费[的 Getting a Bing Maps Key](http://msdn.microsoft.com/en-us/library/ff428642.aspx)

在 Android 谷歌地图将实现这项工作，但在 IOS 我不知道 :) 这是一个链接将帮助您使用谷歌地图以及如何获取关键的 [Android 谷歌地图教程](http://www.javacodegeeks.com/2011/02/android-google-maps-tutorial.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T19:46:55.770

请注意，根据 Bing 开发人员的博客，MS 将很快开始收费以使用 Bing 搜索 API：http: [//www.bing.com/community/site_blogs/b/developer/archive/2012/04/12 /bing-dev-update.aspx](http://www.bing.com/community/site_blogs/b/developer/archive/2012/04/12/bing-dev-update.aspx)

# javascript - 按时使用布尔逻辑（javascript）

> ID：10512668
> 
> 赞同：0
> 
> 时间：2012-05-09T08:44:52.993
> 
> 标签：javascript, boolean-logic

Javascript有内置的时间函数

```
 var date = new Date();
    d.getHours() //gets the hour in integer 0-23
    d.getMinutes() //gets the minute in integer 0-59 
```

我希望函数（例如`A()`）在 0:35 到 4:35 之间运行

`&&`仅使用简单的逻辑运算（ ，`||`）可以做到这一点吗？我认为这是不可能的，但我想知道实现它的优雅方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:56:09.927

```
var date = Date.now();     // ES5 - or new Date().getTime()
var sec = (date / 1000);   // seconds since epoch
sec = sec % 86400;         // seconds since midnight
var mins = sec / 60;       // minutes since midnight

if (mins >= 35 && mins < 4*60+35) {
    A();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T09:06:18.913

您可以使用时间戳进行比较。

```
var date = new Date();
var year = date.getFullYear();
var month = date.getMonth();
var day = date.getDate();
var start = new Date(year, month, day, 0, 35);
var end = new Date(year, month, day, 4, 35);

if (date.getTime() >= start.getTime() && date.getTime() <= end.getTime()) {
  //...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:06:41.963

这应该有效：

```
function foo(){
    var now = new Date();
    if( (now.getHours() < 1 && now.getMinutes() < 35) 
       || (now.getHours() > 3 && now.getMinutes() > 35) ){
         return false; //if it isn't in your time, return false
    }

    //put your code here. this will run between the hours of 12:35AM and 4:35AM local time

} 
```

我希望这就是你要找的。如果没有，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T09:07:51.523

从技术上讲这是可能的，但是您绝对正确，因为这不是一个优雅的解决方案：

```
var h = d.getHours();
var m = d.getMinutes();
if ((h == 0 && m >= 35) || (h > 0 && h < 4) || (h == 4 && m <=35)) {
    A();
} 
```

# jenkins - Jenkins 简单主题插件示例或教程

> ID：10512670
> 
> 赞同：7
> 
> 时间：2012-05-09T08:45:04.760
> 
> 标签：jenkins, jenkins-plugins

我在我的 Jenkins 实例上安装了 Simple Theme 插件，并设法进行了一些（非常）基本的主题更改。

有人对 Jenkins 主题有更好的参考吗？

[插件页面](https://wiki.jenkins-ci.org/display/JENKINS/Simple+Theme+Plugin)的信息非常低...

如果我想覆盖样式属性，我必须深入研究生成的 html 并进行大量试验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-11-25T14:19:08.300

您可以使用 .css 文件自定义您已知的简单主题。确保您有 .png 徽标图像，我已添加 'Jenkins_home/usercontent/mytheme.css' 文件 'Jenkins_home/usercontent/logo.png' 作为我的徽标。并按照下面的CSS：

```
@charset “utf-8”;
    #header .logo { 
        height: 36px;
    } 
    /* Custom style for my Jenkins Platform */
    .logo {
        background: url(/userContent/logo.png) no-repeat 10px center; 
    }

    .logo img { 
        display: none; 
    }

    .logo:after {
        content: 'Jenkins my instance';
        font-weight: bold;
        white-space: nowrap;
    } // Content after logo
```

只需检查 Jenkins 配置主题必须是 CSS URL，并且您必须添加上面的“mytheme.css”文件的路径。& 刷新您的 Jenkins 页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-26T19:54:51.950

在这里找到一个简单的教程开始：

[http://www.techgaun.com/2013/06/customizing-jenkins-layout.html](http://www.techgaun.com/2013/06/customizing-jenkins-layout.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-08T16:10:54.203

在 Chrome 或 FireFox 中打开 Jenkins，然后按 F12。右键单击要更改的 UI 元素并选择检查元素。在调试窗口中，html 中的行被突出显示。记录 UI 元素的 id 和/或类。打开 style.css 并搜索 id/class。复制 css 代码并将其粘贴到您保存在 css 目录中的 .css 中。在配置页面的主题部分中，输入 css/.css 作为主题 CSS 的 URL。现在开始修改 .css 以获得您想要的外观。启用自动刷新以查看更改，Ctrl-F5 也有帮助

# objective-c - 在后台工作的计时器

> ID：10512671
> 
> 赞同：1
> 
> 时间：2012-05-09T08:45:12.780
> 
> 标签：objective-c, ios, cocoa, nsdate, nstimer

为了学习，我正在制作一个计时器。使用了 NSTimer，但它似乎在进入后台时停止。想用 NSDate 代替。这在后台有效吗？我是否将当前时间与设定时间进行比较以使计时器正常运行？一些想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:20:01.630

如果您正在寻找在后台处理基于时间的事件的东西，请查看`UILocalNotification`. 通过本地通知，操作系统将在指定时间提醒用户安排通知的应用程序是否正在运行。

如果您正在寻找应用程序启动时发生的事情，您可以使用`NSUserDefaults`并存储一个包含当前时间戳的值。在 AppDelegate 内部`applicationWillResignActive`方法中时将其关闭。然后，您可以在`applicationDidBecomeActive`.

# php - 如果时间和日期在 php 之前

> ID：10512675
> 
> 赞同：2
> 
> 时间：2012-05-09T08:45:46.270
> 
> 标签：php, date, time

我在这里找到了这个片段。

```
$resttimefrom = 50000; // 5am
$resttimeto   = 170000; // 5pm
$currentTime  = (int) date('Gis'); // time now

if ($currentTime > $resttimefrom && $currentTime < $resttimeto)
{
  // its before 5pm lets do something
}
else
{
  // after 5pm sorry
} 
```

这工作得很好，但我想限制它的日期也为我正在工作的网站我希望它检查时间戳如果交付 = 明天然后他们必须在前一天下午 5 点之前取消订单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:57:28.070

```
$timestamp = time();

$date = date("Y-m-d", $timestamp);
$time = date("G", $timestamp);

$tomorrow = date('Y-m-d', strtotime('tomorrow'));

if ($date == $tomorrow && $time > 5 && $time < 17) {
    // It is in-between 5am and 5pm tomorrow.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:57:52.263

```
if (time() >= strtotime(date('Y-m-d', time()).' 5:00:00') && time() <= strtotime(date('Y-m-d', time()).' 17:00:00'))    {
    //  today between 5AM and 5PM
}
    else {

    } 
```

# jqgrid - 所以搜索只适用于 loadonce:true？

> ID：10512678
> 
> 赞同：0
> 
> 时间：2012-05-09T08:45:56.843
> 
> 标签：jqgrid

对于 NavGrid 或 filterToolbar，这是我可以让它工作的唯一方法。重新加载对服务器端没有影响，即使我确定生成的 json 数据是正确的。我错了吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:20:46.670

如果您已在服务器端实现搜索，则无需使用`loadonce: true`. 例如，高级搜索的实现包括分析`filters`参数，这些参数可以作为请求的一部分发送到服务器以填充网格。参数的格式在[这里](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aadvanced_searching#options)`filters`描述。如果您将使用[filterToolbar](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3atoolbar_searching#calling_convention)的参数，那么您将在高级搜索和工具栏过滤中拥有相同格式的输入数据。`stringResult: true`

# matlab - 如何应用傅里叶变换功能？

> ID：10512691
> 
> 赞同：-4
> 
> 时间：2012-05-09T08:47:09.730
> 
> 标签：matlab, image-processing, matlab-figure

我想知道如何将“傅里叶变换函数”应用于图像，然后根据傅里叶变换的相位信息重建图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:50:34.120

重塑图像，使每个通道都有自己的二维矩阵。

标准化图像，使其值在 0 到 1 的范围内。

I ~= FFTSHIFT(IFFT(FFT(I))

# sql - MS Access 中的多个（左、交叉？）JOIN

> ID：10512693
> 
> 赞同：3
> 
> 时间：2012-05-09T08:47:15.097
> 
> 标签：sql, ms-access, join

我有以下 MS access (2010) 数据库：

![数据库图](../Images/508f6c36e4c04b992b3f50961cd49bea.png)

Employee、Period 和 Operation 表已填充，而 UnitOfWork 表为空白。

基本上，我有一些物品是由多名工人（员工）生产的。每个项目都需要多次操作（每个工人可以对任何项目进行任意次数的任何操作）。所有操作都有一些成本，我需要生成每个员工“本月”赚了多少、他是否完成了计划等的报告。

我想做一个 SELECT 来查看以下内容：UnitOfWorks，适用于 Employee、Period 和 Operation 的每个可用组合。

换句话说，**我想在结果中选择 Employee、Period 和 Operation 和 LEFT JOIN UnitOfWork 的所有可能组合，因此我可以为每个 UnitOfWork 输入 OperationsDone**。我将添加 WHERE 子句和 ORDER 以及稍后

我认为 CROSS JOIN 会有所帮助（在 MS Access 中，它只是用逗号进行枚举），如下所示：

```
SELECT * FROM (Employee, Period, Operation)
LEFT JOIN UnitOfWork on UnitOfWork.OperationId=Operation.OperationId 
```

但是当我执行这个查询时，我得到一个“JOIN 操作中的语法错误”错误。

我也试过这样：

```
SELECT * FROM Employee AS e LEFT JOIN
(Period AS p LEFT JOIN UnitOfWork AS uow ON p.PeriodId=uow.PeriodId)
on e.EmployeeId=uow.EmployeeId 
```

这些只是我需要的 3 个联接中的 2 个，但是已经有了这个我得到“不支持 JOIN 表达式”错误。

任何数据库设计建议也值得赞赏 - 这是我正在设计的一个新数据库，我是一个 SQL 新手。

提前致谢！

更新：我也在想，也许我应该尝试一个子查询？就像在一个查询中进行交叉连接（操作、员工和期间），然后将 UnitOfWork 左连接到查询结果......但是如何“通过多个字段”进行 JOIN？以及如何在访问中实现子查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:55:37.250

试试这种方式：

```
SELECT * FROM (Employee AS e LEFT JOIN UnitOfWork AS uow ON e.EmployeeId=uow.EmployeeId)
              LEFT JOIN Period AS p on p.PeriodId=uow.PeriodId 
```

# iphone - 在 Objective C 中的视图控制器之间传递对象

> ID：10512696
> 
> 赞同：0
> 
> 时间：2012-05-09T08:47:45.223
> 
> 标签：iphone, objective-c, xcode, oop

我有3类A类，B类，C类。

我将变量从 ClassB 传递到 ClassA，然后弹出 ClassB（视图控制器）

//ClassB.m

```
 ClassA *obj = [[ClassA alloc]init];
    [obj passValue:value];
    [obj release];

[self.navigationController popViewControllerAnimated:YES]; //It will pop and show ClassC View Controller. 
```

//ClassA.h

```
NSString* storeValue;
-(void)passValue:(NSString*)getValue; 
```

//ClassA.m

```
-(void)passValue:(NSString*)getValue
{
   NSLog(@"Value is %@",getValue); // I am Getting Value Here
   storeValue = getValue; 
} 
```

在 C 类。我正在推送 ClassA 视图控制器

C类.m

```
ClassA *objA = [[ClassA alloc]init];
[self.navigationController pushViewController:objA animated:YES];
[objA release]; 
```

现在在 A 类。内部视图 Didload。我试图打印 storeValue。但它返回null。我在这里做错了什么。任何人都可以指导我使用示例代码以正确的方式进行操作。

我尝试使用属性来访问变量。但它返回空值。

谢谢， 阿尼什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:58:32.533

我考虑过以下类的层次结构 - C -> A -> B 你不需要为 A 类创建任何对象，因为它已经在导航堆栈上。利用 -

```
NSMutableArray *activeControllerArray = [self.navigationController.viewControllers mutableCopy];
for(int i = 0, i <[activeControllerArray  count], i++) {
    if([[activeControllerArray objectAtIndex:i] isKindOfClass:[ClassA class]) {
        //Set Property and instance variable here
        ClassA *obj = [activeControllerArray objectAtIndex:i];
        obj.someVariable = somevalue; //you can use in any way that you want

        break;
     }
}
//Pop to previous view now 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:57:33.240

您实际上指的是 ClassA 的多个实例。在 ClassB 中，您创建一个新 ClassA 的对象并设置一个值。

在 classC 中，您正在创建 ClassA 的不同实例，然后检查为前一个实例设置的值。

如果声明为静态，您可以在所有实例中访问“storeValue”中设置的值。

Else 实例变量属于类的实例，并由每个实例单独管理。

* * *

我认为你这次完全错了。

1.  您可以实现委托方法以在弹出之前将对象传回，然后使用它。
2.  如果您使用静态变量，则该类的所有实例都是通用的。这可能是不可取的。
3.  或者你可以发布一个 NSNotification。并将对象与它一起传递。这些通知的侦听器可以捕获它并以不同的方式处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:11:46.913

正如@JS Rodrigues 所说，您并没有指向ClassA 的现有实例，您只是在创建另一个ClassA 实例。

要获取 ClassA 的现有实例，您可以控制导航控制器的堆栈（此代码类似于 @rishi 代码，但使用快速枚举）：

```
for (UIViewController *obj in self.navigationController.viewControllers) {
    if ([obj isKindOfClass:[ClassA class]]) {
        ClassA *ca=(ClassA *)obj;
        [ca passValue:value];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T09:44:25.290

不要打印 viewDidLoad 中的值

viewDidLoad 在分配之后和传递变量之前触发，因此，您的变量返回 NULL

如果确实需要这种方式传递，请在 header 中设置变量，然后使用传递方法

例如 ：

您想将字符串 myString 从 A 传递到 B，然后转到 B 并打印字符串

在A上，导入B然后执行以下功能

```
self.bViewController = [[BVIEWCONTROLLER alloc]init];

[self.bViewController setmyString:myString];

//if u're running OS lower than 5.0, include this
[self.bViewController viewDidAppear]; 
```

之后，您在 viewDidAppear 方法的 b 视图控制器中打印 myString 变量。

祝你好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T08:49:10.913

当你跳到 C 类时改变你的类：

```
ClassC *obj = [[ClassC alloc]init];
[obj passValue:value];
[self.navigationController popViewControllerAnimated:YES]; 
[obj release]; 
```

# c# - c# 枚举常量映射到唯一的整数值

> ID：10512697
> 
> 赞同：0
> 
> 时间：2012-05-09T08:47:45.883
> 
> 标签：c#, enums

c# 中有什么方法可以确保枚举常量映射到唯一的整数值。

```
public enum Color
{
None =0,
red = 1,
blue= 2,
white = 3
} 
```

在这里，如果我确实将“白色从 3 更改为 2”的数值，我应该得到编译错误。

在我的项目中，我将 DB 中的枚举整数值保存为常量。我需要一个枚举约束，就像有人在枚举中添加一个新常量（例如黑色）。用户必须提供具有枚举常量的唯一数值。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:49:39.520

最好不要在`enum`定义中明确设置值。在定义中添加注释，`enum`告诉任何添加它的人，以确保他们只添加到末尾。

例如：

```
public enum Color
{
    None,
    red,
    blue,
    white,
    // **NEW ENTRIES MUST ONLY BE ADDED AT THE END OF THE ENUM**
} 
```

或者使用内置`Color`结构及其`ToArgb( )`方法。或者确实是[`KnownColor`](http://msdn.microsoft.com/en-us/library/system.drawing.knowncolor.aspx)枚举。

# javascript - HTML & JQuery：如何将数组添加到 displayBox

> ID：10512698
> 
> 赞同：0
> 
> 时间：2012-05-09T08:48:04.197
> 
> 标签：javascript, jquery, html, arrays

我正在使用 JavaScript 和 Html 创建一个 iPad 应用程序。用于页面设计的 HTML 和用于功能的 JavaScript。我有一个使用 Html 创建的 displayBox，我想使用 javascript 用一系列国家/地区填充它。

它当前仅将数组中的第一项添加到 displayBox 但是当我使用 firefox 调试应用程序时出现以下错误

编辑：

我得到了它的工作，我不得不脱掉它的末端

前：

```
$('#countrySelection').append('<option value="' + this.id + '">' + this.name + '</option>').selectmenu('refresh'); 
```

后

```
$('#countrySelection').append('<option value="' + this.id + '">' + this.name + '</option>'); 
```

.selectmenu('refresh') 导致错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:59:13.483

我做了一些更新，比如添加 $(document).ready() 处理程序等。

```
var arrayOfCountries = [{"name":"USA","id":1,"active":"Y"},{"name":"CANADA","id":2,"active":"Y"},{"name":"AALAND ISLANDS","id":270,"active":"Y"},{"name":"AFGHANISTAN","id":236,"active":"Y"},{"name":"ALBANIA","id":109,"active":"Y"},{"name":"ALGERIA","id":17,"active":"Y"},{"name":"AMERICAN SAMOA","id":307,"active":"Y"},{"name":"AMMAN","id":111,"active":"Y"},{"name":"ANDORRA","id":112,"active":"Y"},{"name":"ANGOLA","id":54,"active":"Y"},{"name":"ANGUILLA","id":22,"active":"Y"},{"name":"ANTARTICA","id":308,"active":"Y"},{"name":"ANTIGUA","id":113,"active":"Y"}];

$(document).ready(function(){

if ( $('#countrySelection').find('option').length == 0 ){

    $.loadingMessage = "Retrieving Countries";
    $.showPageLoadingMsg();

        $.each(arrayOfCountries, function() {
            $('#countrySelection').append('<option value="' + this.id + '">' + this.name + '</option>');//.selectmenu('refresh');
        });
       $.mobile.hidePageLoadingMsg();
}

});​ 
```

# java - 将二进制补码中的带符号二进制字符串转换为int？

> ID：10512699
> 
> 赞同：1
> 
> 时间：2012-05-09T08:48:04.667
> 
> 标签：java

我有一个二进制字符串如下：

```
String bin = "1101"; 
```

我希望我的 int 值`-3`是`13`

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T08:54:57.477

使用`if (i >= k) i -= 2 * k;`Where`k`是您的方案无法表示的最小正数。（在这种情况下是 8，因为`0111`是 7 并且`1000`是负数。）

`13`大于`8`，所以你会减去`16`，`13`给`-3`。

# qt - QPropertyAnimation：动画窗口从直线到全尺寸

> ID：10512701
> 
> 赞同：0
> 
> 时间：2012-05-09T08:48:08.753
> 
> 标签：qt, animation

似乎您只能将 QPropertyAnimation 与下拉样式动画一起使用，我错了吗？

我希望窗口从直线可见，全尺寸，两侧展开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:31:03.047

看起来您想为小部件的 size 属性设置动画。因此，QPropertyAnimation 可用于动画小部件的任何属性。

为了您的目的，您可以使用 QWidget 的几何属性。以下代码将动画几何更改，您可以修改开始值和结束值以获得所需的效果。

```
 QPropertyAnimation *animation = new QPropertyAnimation(myWidget, "geometry");
 animation->setDuration(10000);
 animation->setStartValue(QRect(0, 0, 100, 30));
 animation->setEndValue(QRect(250, 250, 100, 30));

 animation->start(); 
```

# linux-kernel - 从启动器名称获取 iSCSI ip

> ID：10512705
> 
> 赞同：0
> 
> 时间：2012-05-09T08:48:41.280
> 
> 标签：linux-kernel, iscsi

在 Linux 中，如果我以编程方式或通过读取 /sys 文件系统知道启动器名称，我如何获得 iscsi 目标 IP。即不使用 iscsiadm 或读取 /etc/iscsi/node/* 链接。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:28:17.453

找到了：

```
initiator ip: /sys/class/scsi_host/$host/device/iscsi_host/${host}/ipaddress 
target    ip: /sys/class/scsi_host/$host/device/session${s}/connection*/iscsi_connection/connection*/address 
```

其中 $host 是 scsi 主机名

# android - 如何检查 Android 设备的 GPU 使用情况？

> ID：10512706
> 
> 赞同：12
> 
> 时间：2012-05-09T08:48:43.730
> 
> 标签：android

我想计算 GPU 使用率。是否有任何 GPU 文件类似于将 cpu 统计信息保存在 /proc/stat 的方式？

获取 GPU 详细信息（如频率等）的方法可能是什么

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-13T12:16:21.060

[从 Android 4.3](http://developer.android.com/about/versions/jelly-bean.html) (Jelly Bean) 开始，您可以通过 Dev Options 中的工具对其进行监控。

设置 > 更多 > 开发人员选项 > 配置 GPU 渲染。

您可能需要在 Android 4.2 上启用开发人员选项，因为默认情况下它是隐藏的。通过在设置 > 关于手机 > 内部版本号上点击 7 次来启用此功能。

Profile GPU Rendering 有几个选项，“在屏幕上显示为条形”是一种快速直观地了解正在发生的事情的好方法。

![在此处输入图像描述](../Images/13c956ab00f6df0ee6aa3068aff0ae1d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-17T09:25:21.420

[Google 的AGI (Android GPU Inspector)](https://gpuinspector.dev/)目前处于开放测试阶段，仅支持以下[设备](https://gpuinspector.dev/docs/devices)：

```
DEVICE NAME GPU NAME
Google Pixel 4 (standard and XL)    Qualcomm® Adreno™ 640
Google Pixel 5  Qualcomm® Adreno™ 620
Google Pixel 4a 5G  Qualcomm® Adreno™ 620

These devices do not support AGI yet but will offer support in the future:
DEVICE NAME GPU NAME
Google Pixel 4a Qualcomm® Adreno™ 618
Samsung Galaxy S10 series   Qualcomm® Adreno™ 640 and Arm® Mali™ G76
Samsung Galaxy S20 series   Qualcomm® Adreno™ 650 and Arm® Mali™ G77
Samsung Galaxy Note 10 series   Qualcomm® Adreno™ 640 and Arm® Mali™ G76
Samsung Galaxy Note 20 series   Qualcomm® Adreno™ 650 and Arm® Mali™ G77 
```

这将允许您分析应用程序的 GPU 使用情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-25T15:45:48.200

对于 Arm Mali GPU，您可以使用 Streamline，它是 Arm Mobile Studio 的一部分的性能分析器：[https ://developer.arm.com/tools-and-software/graphics-and-gaming/arm-mobile-studio/components /流线性能分析器](https://developer.arm.com/tools-and-software/graphics-and-gaming/arm-mobile-studio/components/streamline-performance-analyzer)

Mobile Studio 是免费的，并且有一些很好的视频教程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-03T20:33:22.733

在此视频中，您可以看到一些不错的 PC，例如性能叠加： [https ://www.youtube.com/watch?v=ViCA--Wi26s&t=892s](https://www.youtube.com/watch?v=ViCA--Wi26s&t=892s)

但我没有找到任何细节，也许是它的特定设备。

更新：应用程序被命名为 CPU float，可以从 Google Play 商店下载： [https ://play.google.com/store/apps/details?id=com.waterdaaan.cpufloat&hl=en&gl=US](https://play.google.com/store/apps/details?id=com.waterdaaan.cpufloat&hl=en&gl=US)

以下是如何使其运行的视频： [https](https://www.youtube.com/watch?v=dAH9ywQQKD8) ://www.youtube.com/watch?v=dAH9ywQQKD8 下载、启动应用程序、启动游戏或应用程序并查看统计信息。

一组统计数据取决于您的设备以及应用程序和应用程序未来更新的支持方式。到目前为止，只有某些 GPU 的 GPU 统计数据，并且没有 % CPU，而只有 CPU 内核频率（以 MHz 为单位），但它仍然是我发现的最好的 Android OSD。

[展示案例](https://i.stack.imgur.com/za4LO.gif)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-03T21:31:28.463

如果您想优化您的 GL 管道代码，您可能会发现 Fencing 是一个简单的替代或补充工具。这是 Kotlin 中的一个示例：

```
 override fun onDrawFrame(unused: GL10) {

        if(glPipelineFence != null) { // if it's the first pass then ignore
            // block until the GPU has reached the pipeline fence
            val result = glClientWaitSync(glPipelineFence!!, 0, 1000000000)
            if (result == GL_TIMEOUT_EXPIRED) Log.v("myinfo", "gl fence error: expired")
            if (result == GL_WAIT_FAILED) Log.v("myinfo", "gl fence error: failed")
            glDeleteSync(glPipelineFence!!)
        }

        // YOUR OPEN GL ES STUFF GOES HERE

        glPipelineFence = glFenceSync(GL_SYNC_GPU_COMMANDS_COMPLETE, 0)
    } 
```

`System.currentTimeMillis()`然后，您可以在例如整个函数范围的任一侧`glClientWaitSync`或整个函数范围内使用增量来查看您的管道需要多长时间。将`glClientWaitSync`阻塞直到 OpenGL ES 管道在最后执行栅栏命令。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-08T01:16:38.297

[GPUz](http://www.techpowerup.com/gpuz/)将帮助您跟踪任何图形应用程序的 GPU 使用情况。它可以简单地显示内存使用情况和 GPU 负载，并且可能适用于大多数硬件。

# linux - 监控目录内容变化

> ID：10512707
> 
> 赞同：1
> 
> 时间：2012-05-09T08:48:51.040
> 
> 标签：linux, bash

我正在编写一个 bash 脚本，我想监控文件更改到目录（添加、删除和重命名）并相应地执行不同的操作。

有没有办法直接从我的脚本中做到这一点（除了定期`ls`目录和 make `diff`s）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T08:56:58.743

您可以使用该`inotifywait`命令（假设您的发行版支持 inotify，大多数都支持）：

```
inotifywait -m -r --format '%f' -e modify -e move -e create -e delete ~/test | while read line
do
    echo "File: $line"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:57:59.390

只是一个想法。如果仅允许在**bash**中执行此操作，则可以在目录内容上生成 md5sum。可能您可以在该目录中拥有文件名、修改时间、索引节点修改时间等。

# php - MongoDB 无法从游标/数组中成功提取“列”名称

> ID：10512708
> 
> 赞同：1
> 
> 时间：2012-05-09T08:49:06.653
> 
> 标签：php, arrays, mongodb, multidimensional-array

所以，我试图在我的 MongoDB~~项目~~文档中获取~~列属性的名称。~~我似乎找不到将姓名转发给我所需的方法。任何帮助/建议表示赞赏。

 ~~**我的代码：**

```
$cursor = $collection->find( $query );
foreach ($cursor as $obj) {
print_r ($obj);
echo $obj;
} 
```

**print_r 返回：**

```
Array ( [Favorite] => 1171 [Desc] => EGG [Name] => MyThing ) 
```

**回声返回：**

```
Array 
```

我希望能够提取“Favorite”、“Desc”和“Name”，但是，每当我搜索这些字段时，我都会得到值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:52:40.923

MongoDB 中没有列。每个文档本质上都是一个 JSON 对象。每个文档可以具有完全不同的结构。

我不使用 PHP，但我猜对象会作为 PHP 的关联数组返回。因此，使用[适当的 PHP 函数来获取](http://php.net/manual/en/function.array-keys.php)**此具体文档的**字段名称。同样，您无法获得整个集合的“列列表”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T15:09:23.907

```
$data  = iterator_to_array( $collection->find($query) );
foreach($data as $d)
   $names[] = array_keys($d); 
```~~

# android - Android：退出应用程序

> ID：10512716
> 
> 赞同：0
> 
> 时间：2012-05-09T08:49:35.587
> 
> 标签：android, button, exit

我已经开发了一个安卓应用程序。在那个应用程序中，我有退出按钮，当我按下退出按钮时，我想退出我的应用程序。请有人给我一个示例代码或教程链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:47:33.013

阅读[（何时在 Android 应用程序中包含退出按钮（提示：从不））](http://blog.radioactiveyak.com/2010/05/when-to-include-exit-button-in-android.html)，这篇文章解释了你需要做什么和不需要做什么。

一些提取物

> 那么，您的应用何时应该包含退出按钮？
> 
> **简短的回答**
> 
> 绝不。
> 
> **长答案**
> 
> 您的应用不需要退出按钮。它真的没有。相反的论点通常可以概括为：
> 
> *   用户期待它。
>     
>     
> *   这是一种让用户说“停止做所有事情并停止喝果汁”的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:51:35.187

调用按钮`finish()`的方法`onClick()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:51:45.977

在按钮单击事件上设置 finish() 方法，例如..

```
 btn.setOnClickListener(new OnClickListener() {    
        @Override
        public void onClick(View v) {
                    finish();
             }
      }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T08:52:34.840

Android 的设计不支持选择退出应用程序。而是由操作系统管理它，您可以通过其相应的 Intent 调出 Home 应用程序：

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

跳这个帮助！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-09T09:20:38.703

如果您想关闭特定活动，请使用完成，或者如果您想从 Android 进程中删除堆栈，请使用以下代码：

```
 android.os.Process.killProcess(android.os.Process.myPid());
            super.onDestroy();

    protected void onCreate(Bundle savedInstanceState) { 

    this.setContentView(R.layout.layoutxml); 

    this.ExitButton = (Button)this.findViewById(R.id.close); 

    this.ExitButton.setOnClickListener(new OnClickListener() { 

    @Override 

    public void onClick(View v) { 

    finish(); // for stopping Current Activity 

    } 

    });

    // add this line forStoping Entire Application  to Close 
    @Override
        protected void onDestroy() {
    // closing Entire Application
            android.os.Process.killProcess(android.os.Process.myPid());
            super.onDestroy();
        }
    } 
```

# android - 如何将 Android 手机与微芯片控制器设备连接？

> ID：10512719
> 
> 赞同：0
> 
> 时间：2012-05-09T08:49:49.723
> 
> 标签：android

我想制作一个应用程序，通过它我可以通过 USB 发送消息，以便控制 8 位控制器上的端口引脚 - 一个支持 Microchip USB 的设备。你能提供任何链接吗？提供了将Android手机连接到微芯片的示例示例

lz帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:33:26.080

我建议你看看 Android Accessories Development Kit。原始套件基于 Arduino（ATMega MCU），但 Microchip 有自己的基于 PIC 24F 的版本：http: [//www.microchip.com/stellent/idcplg? IdcService=SS_GET_PAGE&nodeId=1406&dDocName=en553673](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=1406&dDocName=en553673)

# java - 如何实例化 java.lang.reflect.Method？

> ID：10512721
> 
> 赞同：4
> 
> 时间：2012-05-09T08:50:00.607
> 
> 标签：java, reflection

我的方法接受一个`Method`对象作为参数。因此，我需要创建一个`java.lang.reflect.Method`. 事实证明，该类是`final`并且没有公共构造函数。好的。所以......我需要使用一些工厂还是什么......？该类`java.lang.reflect.ReflectAccess`是包范围的，它似乎是我正在寻找的那种工厂（除了我不能使用它的事实）。这是怎么回事……？

是的，我总是可以得到一些实例`Class`并选择一个 random `Method`，但我想有一个更明智的方法......？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T08:59:20.397

尝试使用反射。

```
Constructor c = Method.class.getDeclaredConstructor(Class.class, String.class, Class[].class, Class.class, Class[].class, int.class, int.class, String.class, byte[].class, byte[].class, byte[].class);
c.setAccessible(true);
c.newInstance(....); // send correct arguments 
```

这应该有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T08:52:07.933

> 是的，我总是可以得到某个类的实例并选择一个随机方法，但我想有一个更明智的方法......？

不，这*是*明智的做法。没有其他任何意义。拥有一个不属于类的方法甚至意味着什么？当你调用它时会发生什么？

如果这是为了测试，我建议您专门为此目的创建一个包含适当方法的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T08:52:32.060

方法总是与类（或实例）相关，那么不从类中获取方法有什么用呢？

# php - 字谜 - 找到单词求解器

> ID：10512724
> 
> 赞同：0
> 
> 时间：2012-05-09T08:50:16.120
> 
> 标签：php, algorithm, anagram

> **可能重复：**
> [如何从字母矩阵中找到可能的单词列表 [Boggle Solver]](https://stackoverflow.com/questions/746082/how-to-find-list-of-possible-words-from-a-letter-matrix-boggle-solver)

我正在做一个解谜者。到目前为止，我正在做这个词的所有排列，但是有很多！对于一个 12 字母的单词，有 479001600 次烫发......这个游戏是一个 16 字母的拼图（4x4）

```
 [A][B][C][D]
 [E][F][G][H]
 [I][J][K][L]
 [M][N][X][O] 
```

只能用所选字母周围的字母组成一个单词。我的意思是，例如我不能选择 AIM 这个词，因为我不在 A 周围……但我可以创建“AFI”这个词。您选择 A，然后选择 F（是 A 的诊断），然后选择 I

我的置换代码是

```
 function permute( $tmp, $word, $level )
  {
      if ( strlen( $word ) > 2)
      {
          $this->display( $word );
          //return ;
      } 

      for ( $i = 0 ; $i < $this->original_word_length ; $i++ )
      {
          if ( $this->bOne_bond == true and $this->bonds[$level] != -1 and $i != $this->bonds[$level] and $level < $this->max_bonds ) continue ;

              if ( strcmp( $tmp{$i}, "N" ) == 0 )
              {
                  $word_tmp = $word ;
                  $word_tmp .= $this->original_word{$i};

                  $flags_tmp = $tmp ;
                  $flags_tmp{$i} = "Y";

                  $this->permute( $flags_tmp, $word_tmp, $level+1 );
              }
      } 
  } 
```

如何根据相邻字母进行计算？

编辑：解决方案在[这里](https://stackoverflow.com/questions/746082/how-to-find-list-of-possible-words-from-a-letter-matrix-boggle-solver#757165)。谢谢

# dynamic-language-runtime - NancyFX：如何检查查询字符串/表单值是否已正确传递给我的处理程序？

> ID：10512727
> 
> 赞同：7
> 
> 时间：2012-05-09T08:50:24.700
> 
> 标签：dynamic-language-runtime, nancy

Nancy 通过一个`dynamic`变量将我的查询字符串和表单值传递给我的处理程序。下面的示例显示了通过 Nancy 请求传递给 POST 处理程序的表单值，例如`Request.Form.xxx`。

**处理程序**

```
Post["/"] = _ =>
    {
        var userId = (string) Request.Form.userid;
        if (userId.IsEmpty()) return HttpStatusCode.UnprocessableEntity;
        return HttpStatusCode.OK;
    }; 
```

您可以看到我将`userid`转换为字符串，然后使用字符串扩展方法检查值是 null 还是空字符串（相当于`string.IsNullOrEmpty()`）。

我更喜欢在动态类型上使用扩展方法，这样我就可以在做任何其他事情之前执行我的健全性检查。我想要这样的代码：

```
if(Request.Form.userid.IsEmpty()) return HttpStatusCode.UnprocessableEntity; 
```

但是，您不能拥有`dynamic`类型的扩展方法。此外，您无法通过反射检查属性是否存在。欢迎来到 DLR。

**问题**

执行预检查以确保已将预期的查询/表单值传递给我的 Nancy 处理程序的最简单、最安全的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T09:18:33.647

```
Request.Form.userid.HasValue 
```

适用于所有 DynamicDictionary 成员，例如 Form、Query 和路由参数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T23:29:20.837

您可以使用 Bind 即 ModelBinder 将您的模型绑定到表单，其中模型类的属性对应于您的 HTML 控件名称。

```
var course = this.Bind<Course>(); // Course is our model class 
if(course != null) {
    // your codes go here
} 
```

# java - android ndk 构建问题（..ld.exe: ./jni: 没有这样的文件：权限被拒绝）

> ID：10512731
> 
> 赞同：1
> 
> 时间：2012-05-09T08:50:45.053
> 
> 标签：java, android, build, java-native-interface

我尝试构建我的项目。但是，它给出了错误：

```
C:\svn\my-ndk-project>c:\development\android-ndk-r8\ndk-build.cmd
SharedLibrary  : libsprat-jni.so
c:/development/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/wi
ndows/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androidea
bi/bin/ld.exe: ./jni: No such file: Permission denied
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi/libsprat-jni.so] Error 1 
```

我用的是win7 64位。我将 android-ndk 路径的所有权限授予用户。我还检查`libstlport_static.a`了 的许可。但我无法解决问题。我该怎么办 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:07:27.337

在 Windows 上运行时，我遇到了类似的问题。

我通过给 .so 文件一个完全控制权限来解决它

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-05T09:22:10.290

1.  找到 ./obj/local/armeabi/libstlport_static.a 并删除它
2.  再次运行ndk-build，将不会成功构建，忽略错误
3.  在./obj/local/armeabi/路径下找到新的libstlport_static.a，执行chmod 777 libstlport_static.a
4.  重建你的图书馆，它会成功。

# unit-testing - c# 中的装饰器模式如何进行单元测试？

> ID：10512735
> 
> 赞同：1
> 
> 时间：2012-05-09T08:51:12.603
> 
> 标签：unit-testing, c#-4.0, nunit

c# 中的装饰器模式如何进行单元测试？

我将装饰器模式用于设计存储库、渴望、CURD 操作、兑现。那么我如何为该存储库类编写单元测试。

什么是好的单元测试工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:50:42.767

在测试装饰器（或代理）时，您通常希望测试交互而不是状态。例如，对于缓存，您希望确保第一次调用会导致对后面服务的调用，而第二次调用不会。

我建议使用模拟框架，因为它们通常非常擅长测试交互。有[很多选择](https://stackoverflow.com/questions/37359/what-c-sharp-mocking-framework-to-use)。

# layout - 如何删除primefaces中的布局滚动条？

> ID：10512736
> 
> 赞同：7
> 
> 时间：2012-05-09T08:51:13.493
> 
> 标签：layout, primefaces

我正在处理 primefaces，我想使用 p:layout 而不是我自己的布局。但是 p:layoutUnit 组件默认是可滚动的。当我想删除滚动条时，我尝试过：

```
 <style type="text/css">
            .ui-layout-center {                    
                overflow:hidden !important;
            }

            .ui-layout-center .ui-layout-unit-content {
                overflow:hidden !important;
            }     
        </style> 
```

它删除了滚动条，但现在我看不到整个页面（网页变得不可滚动）。我该如何解决这个问题，我必须使用自己的布局吗？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T14:58:42.863

而不是使用溢出使用溢出-x 这对我有用，水平滚动条消失了，保持垂直滚动条

# android - 如何解决 NoClassDefFoundError 前置条件？

> ID：10512739
> 
> 赞同：0
> 
> 时间：2012-05-09T08:51:28.467
> 
> 标签：android, nfc

我在运行时创建 NFC 阅读器已停止并且 logcat 显示 java.lang.NoClassDefFoundError: com.google.common.base.Precondition

如何解决？请支持我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:52:23.123

听起来您正在使用或修改其中一个 SDK 示例并需要这些库：

[http://code.google.com/p/guava-libraries/](http://code.google.com/p/guava-libraries/)

# r - 当我在 R 终端中按 Control-C 时会发生什么？

> ID：10512743
> 
> 赞同：1
> 
> 时间：2012-05-09T08:51:35.563
> 
> 标签：r, terminal

我打开一个 Windows 命令提示符。我运行 R `R`。当我在 R 终端中按 Control-C 时，发生了一些奇怪的事情。它似乎退出 R 并带我回到命令提示符，但是现在当我键入命令时，它们被命令提示符和隐藏在后台的 R 终端争夺。这是怎么回事？

```
C:\Users\hickfordm>R

R version 2.15.0 (2012-03-30)

> ^C
c:\users\hickfordm>dir
'ir' is not recognized as an internal or external command, operable program or batch file.

c:\users\hickfordm>
Error: object 'd' not found 
```

编辑：只有当我运行时才会发生这种情况`R`。如果我运行`Rterm`， control-C 什么都不做，这是合理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:53:35.100

我的朋友能够在 Windows 上重现这个`R`，但不能`Rterm`。在 Linux 上不会发生。这一定是 R 中的一个错误。我会努力报告它[https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=14948](https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=14948)

* * *

修复上游，期望修复使 R 2.16

* * *

同时，修复了 R*补丁*2.15.1 [http://cran.r-project.org/bin/windows/base/rpatched.html](http://cran.r-project.org/bin/windows/base/rpatched.html)（不是原版 2.15.1）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:12:38.957

在 R 终端中，试试这个：

```
>while(1){} 
```

然后键入 control + c。

我在 Linux 上试试。当我键入 control + c 时，循环终端。但是 R 终端没有退出。我没有在 Windows 上尝试过。

# jquery - 重新初始化在用户单击 div 时触发 keyup 事件的代码？

> ID：10512744
> 
> 赞同：2
> 
> 时间：2012-05-09T08:51:38.163
> 
> 标签：jquery

我有一个列表，当您输入输入时会对其进行过滤。以下是负责的javascript：

```
$("#filter").keyup(function () {
    var filter = $(this).val(), count = 0;
    $(".filtered:first li").each(function () {    
        if ($(this).text().search(new RegExp(filter, "i")) < 0) {
            $(this).addClass("hidden");
        } else {
            $(this).removeClass("hidden");
            count++;
        }
    });
    $('.li-group').each(function(){
        if($(this).children(':visible').length == 0) {
           $(this).prev().addClass('hidden');
        }
        else {
            $(this).prev().removeClass('hidden');
        }
    }); 
}); 
```

我想要一个关闭“按钮”，当你点击它时，它会清空所有文本的输入。我已经用下面的代码做到了这一点。但是，由于上面的代码在 keyup 事件上触发，它不会重新初始化，因此不会显示隐藏的结果。谢谢

```
$('#filter-close').click(function(){
        $('input#filter').val('');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:55:32.657

`keyup`您应该手动调用其处理程序。因此，首先您设置空值，然后调用将根据新值执行的处理程序：

```
$('#filter-close').click(function(){
        $('input#filter').val('').keyup();
}); 
```

这是[触发](http://api.jquery.com/trigger/)事件的快捷语法`keyup`：

```
$('#filter-close').click(function(){
        $('input#filter').val('').trigger('keyup');
}); 
```

如果您`keyup`在输入框中有其他不想运行的事件处理程序（简单触发将运行所有这些事件处理程序），您可以为您的事件指定一个[命名空间](http://docs.jquery.com/Namespaced_Events)（使用`bind()`而不是`on()`用于 1.7 之前的 jQuery）。

```
$("#filter").on('keyup.doSearch', function () {
    var filter = $(this).val(), count = 0;
    /* the rest of your keyup handler code */
}); 
```

然后你可以像这样触发它：

```
$('#filter-close').click(function(){
        $('input#filter').val('').trigger('keyup.doSearch');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:55:41.813

非常简单的解决方案是：

```
$('#filter-close').click(function(){
    $('input#filter').val('');
    $("#filter").keyup();
}); 
```

# c - 伯克利 DB SIGBUS 错误

> ID：10512746
> 
> 赞同：0
> 
> 时间：2012-05-09T08:51:42.537
> 
> 标签：c, berkeley-db

我有以下创建 Berkeley DB 环境的程序。

```
#include <db.h>
#include <stdio.h>

int main()
{
DB_ENV *env=NULL;
DB* m_db=NULL;

if(db_env_create(&env,0)==-1) printf("fail create\n");
env->set_lk_max_locks(env, 100000);
env->set_lk_max_lockers(env, 100000);
env->set_lk_max_objects(env, 100000);

if(env->open(env,"/tmp/cc", DB_INIT_MPOOL | DB_INIT_CDB, 0)!=0) 
{
    printf("No env, creating one\n");
    if(env->open(env, "/tmp/cc", DB_CREATE | DB_INIT_MPOOL | DB_INIT_CDB, 0) == -1)
        printf("Failed creating env\n");
}

env->close(env,0);  

return 0;
} 
```

如果你删除 /tmp/cc/__db.002 文件（这是 Berkeley DB 创建的索引之一），然后重新运行程序，它会在打开环境时得到一个 SIGBUS（尝试映射一个不存在的文件）。有没有办法使用他们的 API 来避免这种情况，或者这是一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T16:40:06.543

florinp，我认为这是 Berkeley DB 的错误。在继续之前，确实应该检查环境中的文件是否完好无损。

当然，对于像这样被破坏的 CDP 数据库，除了删除它并重新开始之外，您无能为力。如果这是您必须处理的常见故障类型，您可以使用查找退出状态 135 的 shell 脚本来包装您的程序，然后烘烤旧数据库并重新启动程序……但这可能会有风险，具体取决于您的应用程序.

您还可以迁移到事务性数据存储。这会给你更多的恢复选项，而且可能更少的 SIGBUS。:)

# security - 使用 AbstractAuthenticationListener 实现自定义身份验证提供程序

> ID：10512748
> 
> 赞同：0
> 
> 时间：2012-05-09T08:51:47.663
> 
> 标签：security, symfony, symfony-forms

我正在研究 Symfon2 并且我已经阅读了文档，我偶然发现了一个属于“安全”部分的问题。我需要一个由我制作的自定义身份验证提供程序，它可以在会话中保留令牌，以便我可以在后续请求中获取它，如果用户没有提供正确的凭据，它会将他重定向到登录表单，如果他提供一个正确的凭据，他将被重定向到另一个页面。

1.【访问欢迎页面（受保护页面）】

用户------------------------------------------------ ------> [用户重定向到登录表单页面] ----> [用户提供错误凭据] -----> [用户返回登录表单页面]

2\. [访问欢迎页面（受保护页面）]
用户 -------------------------------------- ------------------> [用户重定向到登录表单页面] ----> [用户提供正确的凭据] -------> [用户访问欢迎页面]

我希望自定义身份验证提供程序制作一些东西（使用 ldap、db ...等验证用户），然后提供一个令牌并将其保存到安全上下文中，并记住我的登录表单重定向工作正常（如果用户凭据错误，然后用户将被重定向到登录表单页面，如果他们是正确的，那么他将被重定向到欢迎页面）。

在说明书中有一篇关于“[如何创建自定义身份验证提供程序](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)”的文章，它正在谈论“如何为 WSSE 身份验证创建自定义身份验证提供程序”。

在文章的后面写了一个注释：上面没有使用的类， **AbstractAuthenticationListener**类，是一个非常有用的基类，它为安全扩展提供了常用的功能。这包括在会话中维护令牌、提供成功/失败处理程序、登录表单 url 等等。由于 WSSE 不需要维护身份验证会话或登录表单，因此不会在本示例中使用它。

在食谱中提到的示例中，使用了**ListenerInterface**，但它不能与登录表单页面一起使用。

如果有人解决了这个问题，我将非常感谢得到解决方案。

最好的问候，
丹妮

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:44:29.947

我认为如果您想从 db 以外的来源验证用户，则不需要创建自定义身份验证提供程序。您可以创建自定义用户提供程序并在防火墙中设置该提供程序。检查[此](http://symfony.com/doc/current/cookbook/security/custom_provider.html)食谱条目。

**编辑**

假设您已经创建了自定义令牌和`AuthenticationProviderInterface`支持令牌的自定义以及自定义用户提供程序，请创建一个实现`AbstractAuthenticationListener`类和实现`attemptAuthentication`方法的类。例如

```
protected function attemptAuthentication(Request $request)
{
    $param = trim($request->get('parameter', null, true));// auth parameters

    // other processing
    // authenticate method ultimatly calls your custom auth provider that supports your custom token. 
    return $this->authenticationManager->authenticate(new YourCustomToken($username, $password, $this->providerKey));
} 
```

[在此处](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Http/Firewall/UsernamePasswordFormAuthenticationListener.php#L56)检查实现。服务定义在[这里](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/SecurityBundle/Resources/config/security_listeners.xml#L105)

**再次编辑：**

有两件事，用户提供者和身份验证提供者。用户提供者根据用户对象的唯一字段（在本例中为用户名）从数据源加载用户对象。唯一字段可以是电子邮件或唯一令牌。另一方面，身份验证提供程序使用给定的凭据进行身份验证，并在经过身份验证后返回适当的令牌。所以它首先从源加载用户对象，在你的情况下是 ldap。然后使用用户输入的密码检查该对象的密码。希望能消除您的困惑。

是的，您可以使用防火墙设置您的 ldap 提供程序。例如

```
#app/config/security.yml
firewalls:
    main:
        pattern: ^/
        form_login:
            provider: your_custom_provider 
```

# java - 多次实例化默认类加载器

> ID：10512750
> 
> 赞同：1
> 
> 时间：2012-05-09T08:51:55.613
> 
> 标签：java, spring, classloader

我在一个非常大的 java spring 项目的一小部分中有两个版本的依赖 java 库，我真的必须结合使用一段时间，但是：

- 新版本不向后兼容旧版本

- 两个版本都使用相同的类 uri

因此，我最终试图以某种方式分别实例化两个库版本，因为默认类加载器一直保留第一个实例，事情变得疯狂。我搜索了几个小时，很多人推荐 OSGi，但我不想仅仅为了这点就集成所有的框架。另外，我通过 maven 尝试了 jarjar，但我似乎没有为目标依赖 jar 工作（我认为它们无论如何都被混淆了）。所以，我试图简单地建立一个单独的 ClassLoader 来解决这个问题。你们中有人知道这样做的简单方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:52:57.810

没关系，问题很容易解决。我联系了图书馆作者，他们为我重构了他们的旧版本包。所以不再需要类加载器黑客了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:11:33.637

您能否将框架的使用封装到可以由接口描述的一小组功能中？

如果是这样，并且如果您处于应用程序服务器环境中，则可以执行以下操作：

定义您的接口并使用两个工厂方法将其放入应用服务器的 lib-Folder 中。您的应用程序转到版本 1 中的 WebArchive1 框架转到 WebArchive2 并从您的 lib-Folder 中填充 factory-method1 版本 2 中的框架转到 WebArchive3 并从您的 lib-Folder 中填充 factory-method2

```
--> lib
public interface MyInterface {
   // do Stuff
}

public class MyFactory {
  private static MyInterface v1;
  private static MyInterface v2;

  public MyInterface getV1() {...}
  public MyInterface getV1() {...}
}

--> WebArchive2
MyFactory.setV1(new Lib());

--> WebArchive3
MyFactory.setV2(new Lib()); 
```

# android - 确保两个线程在执行一段代码之前完成执行

> ID：10512752
> 
> 赞同：1
> 
> 时间：2012-05-09T08:52:02.667
> 
> 标签：android

当满足两个条件时，我需要执行一段代码。

1.  使用后台线程从数据库中成功查询到主题文本。
2.  使用主线程成功检索 View 的维度。主题文本和视图维度都存储为 Activity 的成员变量。

对于 1)，我只需在 Activity 的 onCreate() 中启动 AsyncTask，然后在 doInBackground 中查询 DB 以获取主题文本并将其存储在 Activity 的成员变量中。

对于 2)，我向 UI 线程发布了一个 Runnable，在 run() 中，我查询视图的维度并将其存储在 Activity 的成员变量中。也在 onCreate() 中完成。

无法保证哪个（1 或 2）会先完成。

因此我的问题是，在执行一段代码之前等待 1 和 2 完成的推荐模式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:58:12.333

我认为您可以使用[CountDownLatch](http://developer.android.com/reference/java/util/concurrent/CountDownLatch.html)

它旨在解决此类问题。

首先，您需要在代码中的某处创建一个闩锁，在 1) 和 2) 之前的某处

```
CountDownLatch latch = new CountDownLatch(2); // wait for 2 threads; 
```

在您的每个操作中，当它完成时，调用一个`countDown`on`latch`实例

```
latch.countDown(); 
```

在某些时候，您的两个线程都必须完成，请`await`调用`latch`实例

```
latch.await(); // Will block. Will resume after both thread are completed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:45:48.673

我认为当您在其 onPostExecute 中使用 Async 完成您的第一个任务时（因为它将在您的第一个任务完成时被调用），您可以在 UI 线程上发布可运行文件，或者直接获取视图的度量维度，然后执行您想要的代码.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:53:00.233

我之前做的方法很简单。当线程完成时，我只是设置了一个布尔值。然后我从每个线程调用一个方法来检查两个值是否为真。有点像这样：

```
onPostExecute(){

    queryComplete = true;

    checkThreadCompleted();

}

onPostExecute(){

    viewMeasured = true;

    checkThreadCompleted();

}

private void checkThreadCompleted(){

     if(queryComplete && viewMeasured){
         //Do something
     }
} 
```

# javascript - 带有 jquery datepicker 的 Javascript 使用敲除

> ID：10512766
> 
> 赞同：2
> 
> 时间：2012-05-09T08:52:36.987
> 
> 标签：javascript, datepicker, format, knockout.js

我有一个基于数据绑定的问题，来自[jQuery UI datepicker 更改事件中的敲除和 jquery datepicker 未被 KnockoutJS 捕获](https://stackoverflow.com/questions/6612705/knockout-with-jquery-ui-datepicker)

只要日期格式为 dd-mm-yy，它就可以正常工作。一旦我将日期格式更改为 MM-yy，数据绑定就不再更新。无论我在列表框中选择什么，日期都设置为今天的日期。关于如何完成这项工作的任何提示？我在多个级别上有多个控件，所以我更不想使用这个解决方案：[Knockout with Jquery UI datepicker, MM/YY only](https://stackoverflow.com/questions/8988072/knockout-with-jquery-ui-datepicker-mm-yy-only)

提前致谢。

Javascript：

```
ko.bindingHandlers.datepicker = {
    init: function (element, valueAccessor, allBindingsAccessor) {
        $(element).datepicker({
            dateFormat: "dd-mm-yy",
            //dateFormat: "MM-yy",
            changeYear: true,
            changeMonth: true
        });

        //handle the field changing
        ko.utils.registerEventHandler(element, "change", function () {
            var observable = valueAccessor();
            observable($(element).datepicker("getDate"));
        });

        //handle disposal (if KO removes by the template binding)
        ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
            $(element).datepicker("destroy");
        });

    },
    update: function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor()),
            current = $(element).datepicker("getDate");

        if (value - current !== 0) {
            $(element).datepicker("setDate", value);
        }
    }
}; 
```

html:

```
 <td><input class="dateField" data-bind="datepicker: plannedStartDate" /></td> 
```

视图模型：

```
...
self.plannedStartDate = ko.observable();
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:18:48.257

这似乎是 jquery datepicker 的错误。每当使用该格式时，getDate 都不会返回正确的值。

我有一个可能对您有用的部分解决方案，它可以重新创建您在链接中指定的解决方案。

[http://jsfiddle.net/madcapnmckay/tKxAT/](http://jsfiddle.net/madcapnmckay/tKxAT/)

它使用 datejs 来解析从 datepicker 返回的 datetext。不是很好，因为当天信息丢失了，但这取决于你是否想要。如果不是，我建议您可能必须找到另一个日期选择器或更改格式以包含日期。

希望这可以帮助。

# java - Javascript中未终止的字符串常量错误

> ID：10512769
> 
> 赞同：0
> 
> 时间：2012-05-09T08:52:48.027
> 
> 标签：java, google-calendar-api, dom-events

我正在研究谷歌日历 API。每当我创建任何事件并输入具有新行的该事件的描述时，它都会给我如下错误：

> “未终止的字符串常量”。

我将事件描述从 Java 传递到 Javascript。那么如何格式化具有新行的字符串呢？

我的代码是：

```
 var EventDescription='<% =eventDetails.getEventDescription(eventIndex)%>'

    eventDetails -java class 
    getEventDEscription -Method to get the Description of event.
    eventIndex - no of the event whoes Description is needed . 
```

否则它工作正常。只有在描述有新行时才会出错。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T10:04:03.927

试着把自己想象成 JSP 容器，然后想象成 JavaScript 解释器。或者简单的看一下生成的 HTML 页面的源代码。

线

```
var EventDescription='<% =eventDetails.getEventDescription(eventIndex)%>' 
```

由 JSP 容器解释。so`eventDetails.getEventDescription(eventIndex)`被执行，并且这个方法调用的结果被放入响应中。假设结果由两行组成：

```
line 1
line 2 
```

所以生成的 JavaScript 代码是：

```
var EventDescription='line1
line 2' 
```

这是无效的 JavaScript 代码。正确的 JavaScript 代码是

```
var EventDescription='line1\nline 2' 
```

因此，您需要在将 Java 方法调用的结果放入响应之前对其进行 JavaScript 转义。查看 Apache commons-lang [StringEscapeUtils.escapeEcmaScript()](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringEscapeUtils.html#escapeEcmaScript%28java.lang.String%29)方法。

# wordpress - 自定义页面与插件蛞蝓

> ID：10512771
> 
> 赞同：3
> 
> 时间：2012-05-09T08:52:52.380
> 
> 标签：wordpress

我目前正在将来自第三方 API 的信息集成到 wordpress 站点中。我需要做的是创建一个“动态页面”，其中显示来自 API 的特定记录的详细信息。由于有 1000 条记录，我不想在 wordpress 中为每个记录详细信息视图创建一个单独的页面。

我一直在环顾四周，似乎有两个主要的解决方案（我已经放弃了自定义帖子类型选项，因为我认为它不符合我的需求，但我愿意重新评估）。首先是在 wordpress pages admin 中创建一个页面，然后为该页面设置一个调用 API 方法的自定义模板，然后构建模板。第二个是以某种方式使用我创建的插件，为我使用的 URL 注册一个钩子，然后让插件处理显示（不知道我是怎么做的）。

我想知道这里的人认为什么是最好的方法。先决条件是：

1.  为了能够处理 URL 以检索要显示的记录的 ID（必须支持标准 URL 参数以及自定义 slug）。
2.  拥有一个自定义模板（能够调用 get_sidebar() 函数作为它的小部件）
3.  在某些时候，我将添加一个管理面板，以向每个记录详细信息显示添加其他内容，例如相关图像，外部 CMS 不支持这些内容。

任何建议或最佳方向的观点将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:14:08.600

这周我在为我正在开发的 WordPress 网站编写自定义 API（REST + JSON）时遇到了这个问题。我的解决方案是使用页面模板并将其用作 API 的入口点。那是我遇到[https://stackoverflow.com/a/4975004/1386140](https://stackoverflow.com/a/4975004/1386140)的时候。但是，一个问题是它需要用户（网站管理员）为页面命名以匹配插件检查的参数

```
$wp->query_vars["pagename"] == 'YOUR_PAGE_NAME' 
```

就我的目的而言，这已经绰绰有余了，特别是因为我们重定向了不相关的流量。这允许在 URL 中添加额外的查询参数，但对 slug 不友好。因为它仍然会被称为典型的页面方法，比如 get_sidebar() 仍然可以工作。

为了让它与蛞蝓一起工作，我会看这篇文章（[https://stackoverflow.com/a/2487407/1386140](https://stackoverflow.com/a/2487407/1386140)）以朝着正确的方向开始（看起来合法，但我没有使用自定义重写规则和之前的插件）。

# excel - 如何在不在 VBA 中硬编码其名称的情况下引用 Excel 工作表？

> ID：10512772
> 
> 赞同：1
> 
> 时间：2012-05-09T08:52:56.207
> 
> 标签：excel, vba

我正在为 excel 创建一个宏，用于将一个 excel 表复制到另一个 excel 表。

*这是有效的：*

```
Function CopyFile()

   Dim Wb1 As Workbook
   Dim Wb2 As Workbook
   Dim ws1 As Worksheet
   Dim ws2 As Worksheet

   Set Wb1 = ActiveWorkbook   
   Set ws1 = Wb1.Worksheets("Task")
   Set Wb2 = Workbooks.Open("D:\Outlook\dest.xlsx")

   ws1.Copy Wb2.Worksheets(1)

   Wb2.Save
   Wb2.Close
   Wb1.Activate   

End Function 
```

但我不想使用硬编码字符串来获取工作表名称 **Set ws1 = Wb1.Worksheets("Task")**。而是想使用函数参数。

以下代码不起作用：

```
Function CopyFile(name As String)

   Dim Wb1 As Workbook
   Dim Wb2 As Workbook
   Dim ws1 As Worksheet
   Dim ws2 As Worksheet

   Set Wb1 = ActiveWorkbook

   Set ws1 = Wb1.Worksheets(name)
   Set Wb2 = Workbooks.Open("D:\Outlook\dest.xlsx")
   ws1.Copy Wb2.Worksheets(1)

   Wb2.Save
   Wb2.Close
   Wb1.Activate

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:28:26.443

这个对我有用。如果你传递一个不存在的名字，你会得到一个错误。也许

```
Function CopyFile(sSheetName As String)

    Dim wbSource As Workbook
    Dim wbDest As Workbook
    Dim wsSource As Worksheet
    Dim wsDest As Worksheet

    Set wbSource = ActiveWorkbook

    On Error Resume Next
        Set wsSource = wbSource.Worksheets(sSheetName)
    On Error GoTo 0

    If Not wsSource Is Nothing Then
        Set wbDest = Workbooks.Open("D:\Outlook\dest.xlsx")
        wsSource.Copy wbDest.Worksheets(1)

        wbDest.Save
        wbDest.Close
        wbSource.Activate
    End If

End Function 
```

作品“名称”是 VBA 中的保留字。您仍然可以将其用作变量/参数名称，但您可能不应该这样做。

# filesystems - 是否有可用的开源云文件系统？

> ID：10512773
> 
> 赞同：0
> 
> 时间：2012-05-09T08:53:07.433
> 
> 标签：filesystems, cloud, hard-drive, disk-io

我当前的项目需要一个云文件系统（确切地说是一个云 FTP）。

有没有可用的开源实现？如果是的话，请你给我一些参考。如果有一些与实施相关的技术报告，那就再好不过了:)

由于我还没有找到一个，我正在考虑从头开始实施一个。然后我又出现了一个问题：类似于本地文件系统，`block`我认为最好引入基本存储单元的概念，以减少Internet上小对象传输的开销。那么如何在传输成本和云存储使用量之间做出折衷，在本地 fs 场景下，如果块大小太大，磁盘使用量会急剧下降？我应该设置多大的块大小？

我向一位资深人士寻求上述权衡，他建议可以使用可变块大小。然后我很好奇为什么像 minix 或 ext3 这样的经典文件系统不采用这种策略（如果我犯了错误，请纠正我）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:13:16.563

S3 可用 [如何在我的主机上创建 Amazon S3 克隆？](https://stackoverflow.com/questions/8061454/how-can-i-create-an-amazon-s3-clone-on-my-host)

ubuntu 还能够将一堆计算机云化并设置分布式文件系统。 [http://www.ubuntu.com/cloud](http://www.ubuntu.com/cloud)

您是否主要尝试防止数据丢失或提高下载速度？

你有多少硬件？

您是否将 ZFS 视为文件系统？这很有趣，但我从未设置过。

# bash - 无法将 echo 命令的输出通过管道传输到 ls

> ID：10512777
> 
> 赞同：1
> 
> 时间：2012-05-09T08:53:14.897
> 
> 标签：bash

大家，我今天下午发现了这个奇怪的问题（也许是一个功能）。在我当前的工作目录中，有5个文件，分别是a,b,c,d,e

如果我发出以下命令

```
echo "a" | ls -l 
```

我所期望的只是列出了文件 a 的详细信息。但从输出中，列出了文件 a、b、c、d、e 的详细信息。似乎管道之前的命令不起作用，例如，以下命令将完全输出，就好像只`ls -l`执行了一样。

```
echo "whatever_you_type" | ls -l 
```

我很困惑，有人可以帮助解释这个问题吗？我知道我可以通过使用来解决这个问题`xargs`，比如`echo "a" | xargs ls -l` 但我想知道为什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T09:03:00.687

当您将某些内容通过管道传输到另一个进程时，它将被推送到其`STDIN`流中。由于 ls 不从标准输入读取，它只是忽略了这一点。你想要的是将参数传递给`ls`. 这可以通过使用这样的东西来实现：

```
my_file="a"
ls -l "$my_file" 
```

或者，您可以使用可用于从标准输入构造命令行参数的[xargs 。](http://unixhelp.ed.ac.uk/CGI/man-cgi?xargs)在您的情况下，您可以像这样使用它

```
echo "a" | xargs ls -l 
```

它将`ls -l [filename]`为每个空格分隔的 stdin 输入字符串执行一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T08:59:57.027

`ls`不接受来自`stdin`. `xargs`之所以有效，是因为它`ls`使用从其输入组装的参数调用一次或多次。实现您的示例的另一种方法是：

`ls -l $(echo "a")`

只要确保您没有任何带有空格的文件名。

# java - 为什么在进行双重检查锁定时将易失性字段复制到局部变量

> ID：10512782
> 
> 赞同：5
> 
> 时间：2012-05-09T08:53:37.080
> 
> 标签：java, multithreading, concurrency, synchronization, effective-java

我正在阅读有关从`Effective Java`. 该代码执行以下操作：

```
private volatile FieldType field;  
FieldType getField() {  
    FieldType result = field;  
    if (result == null) { // First check (no locking)  
        synchronized(this) {   
        result = field;  
        if (result == null) // Second check (with locking)  
            field = result = computeFieldValue();  
        }  
    }  
    return result;  
} 
```

它说 using`result`似乎不需要，但实际上确保`field`在它已经初始化的常见情况下只读取一次。

但我不明白这一点。和直接做有什么区别`if(field == null)`？我不明白为什么`if (result == null)`会有所不同，更不用说如上所述了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T09:01:20.517

解释在下一页（我强调）：

> 这个变量的作用是确保该字段在已经初始化的常见情况下只读取一次。虽然不是绝对必要的，**但这可以提高性能**，并且通过应用于低级并发编程的标准更加优雅。在我的机器上，上面的方法比没有局部变量的明显版本快大约 25%。

作为参考，引用来自 p。第 71 条的 284：在 Effective Java 2nd Edition 中*明智地使用延迟初始化。*

**更新**：读取本地变量和易失变量之间的区别在于前者*可能会*得到更好的优化。易失性变量不能存储在寄存器或缓存中，也不能对它们进行重新排序的内存操作。此外，读取 volatile 变量可能会触发不同线程之间的内存同步。

有关更多详细信息，请参阅*Java 并发实践*，第 3.1.4 节：*可变变量*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T09:02:47.433

该示例中的想法是，我猜结果/字段将被多次使用。访问`result`更便宜（它不是易变的）。

否则，您在返回时会进行第二次易失性读取。

如果您需要这样做，请改用按需初始化持有者模式。 [http://en.wikipedia.org/wiki/Initialization_on_demand_holder_idiom](http://en.wikipedia.org/wiki/Initialization_on_demand_holder_idiom)

在对答案本身的评论中添加我的一些澄清......为了清楚起见：

简短版本：局部变量只能位于 cpu（一个）中的寄存器中（如果有多个，则位于 cpu 的核心之一中）。这是最快的速度。必须检查 volatile 变量是否有其他内核/缓存/cpus/内存中的更改，但细节可能非常特定于硬件（缓存行、内存屏障等）。但也是 jvm 特定的，（例如，热点服务器编译器可能会提升非易失性变量）并且它也对重新排序指令施加了限制，以获得可能的性能提升

# c# - String.Contains 在 c# 中不需要参数吗？

> ID：10512788
> 
> 赞同：7
> 
> 时间：2012-05-09T08:54:04.717
> 
> 标签：c#, vb.net, string, contains

我偶然发现了这段代码：

```
var knownSeparators = new[] { "\\", "/", "|", "." };
return knownSeparators.FirstOrDefault(path.Contains); 
```

其中 path 是一个字符串，返回值也应该是一个字符串。

尽管 path.Contains 的智能感知建议了一个参数，但没有它也可以正常工作。

这究竟是如何工作的？有没有办法在 vb.net 中复制这种行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T08:55:32.067

`FirstOrDefault`接受一个委托（a `Func<T, bool>`），这个调用是从*方法组*创建一个委托。它相当于：

```
Func<string, bool> predicate = path.Contains;
return knownSeparators.FirstOrDefault(predicate); 
```

我怀疑在 VB.NET 中你可以这样做：

```
Return knownSeparators.FirstOrDefault(AddressOf path.Contains) 
```

...但如果不尝试，我无法确定。

# ios4 - iOS - “输出文件的多个构建命令” - 有人可以帮我调试吗？

> ID：10512791
> 
> 赞同：4
> 
> 时间：2012-05-09T08:54:08.803
> 
> 标签：ios4

我想我已经把我的第一个项目打结了，通过链接到一个不在主文件夹结构中但位于其他地方的图像 - 为了解决这个问题，我现在收到了这些警告：

```
[WARN]Warning: Multiple build commands for output file /Users/davebennett/Library/Developer/Xcode/DerivedData/The_Dogs-djvmthbassvcpifzucvcjpgktemi/Build/Products/Debug-iphonesimulator/GBGB.app/dashboard-button.png 
```

有人可以指出我如何追踪这些问题并处理它们的正确方向吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T13:42:15.110

Heyyy 答案很简单..

见 Xcode，

然后单击构建阶段选项卡，然后转到“复制捆绑资源”并搜索错误警告消息中显示的此图像文件名。如果您看到同一文件的多个条目，请删除重复的文件。

现在构建它，您将看到警告已删除..

# c# - 从客户的网络摄像头上传照片

> ID：10512792
> 
> 赞同：1
> 
> 时间：2012-05-09T08:54:11.600
> 
> 标签：c#, jquery

如何在我的网站中创建网络摄像头快照按钮，以便用户可以拍照并将拍摄的照片上传到我的服务器？

我正在使用 C# Web 应用程序；请帮助我提供一些链接或代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:55:54.467

您可以使用 Flash 访问网络摄像头。这是一个您可以使用的[jquery 插件](http://www.xarg.org/project/jquery-webcam-plugin/)，它极大地简化了使用 javascript 的操作。

# ios - NSMutableArray 中的块泄漏 (ARC)

> ID：10512793
> 
> 赞同：5
> 
> 时间：2012-05-09T08:54:11.710
> 
> 标签：ios, nsurlconnection, automatic-ref-counting, objective-c-blocks

我有一些在块内的操作。此操作，仅更新`UIImage`如下：

```
^(UIImage *image) {
            self.myImage = image;
        }]; 
```

我的图像是通过使用`NSURLConnection`. 当我从 Internet 收到图像时，我称该块位于`NSMutableArray`. 到现在为止还挺好。我的问题是，当我有多个具有相同 URL 的图像时，我只需在`NSMutableArray`处理连接的类内部添加一个新块，而不是进行多次调用。这样，我只打了一个电话，就可以更新多个共享 URL 的图像。一切正常，问题是我正在泄漏块。我将这样的块添加到`NSMutableArray`：

```
 if( (self = [super init]) ) 
    {
        self.connectionURL=url;
        self.arrayOfBlocks=[NSMutableArray array];
        [arrayOfBlocks addObject:completion];
    }
    return self; 
```

这是初始化连接类的时候。这是我需要添加一个新块的时候`NSMutableArray`（我只添加它，就是这样）：

```
[arrayOfBlocks addObject:completion]; 
```

这是我终于收到回电并开始执行块的时候：

```
 for (MyBlock blockToExecute in arrayOfBlocks)
    {
        blockToExecute([UIImage imageWithData:data]);
    } 
```

问题是这以某种方式泄漏。因为我在 ARC 环境中，所以我无法使用发布或自动发布来抵消。那么有什么解决办法呢？

* * *

![在此处输入图像描述](../Images/ba41210b871f50b114d54de5180f42ce.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T16:46:34.653

这是 Apple 框架中众所周知的漏洞。这不是由您使用块引起的。

这是关于它[的先前问题和](https://stackoverflow.com/questions/9762995/memory-leak-every-time-uiscrollview-is-released/9763144)[错误报告](http://openradar.appspot.com/11081198)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:22:45.270

该块保留“自我”，我猜“自我”保留了块（通过“arrayOfBlocks”属性）。如果保留该属性，则您有循环引用和泄漏。我不认为 ARC 处理循环引用，所以你应该在完成后清空块数组（或将属性设置为 nil），并确保没有其他引用块。

# mysql - 邻接模型，给定一个 id 返回叶节点

> ID：10512794
> 
> 赞同：1
> 
> 时间：2012-05-09T08:54:12.457
> 
> 标签：mysql

这是用于存储类别/子类别站点导航的表：

```
 $query = "CREATE TABLE categories (
    id int(11) NOT NULL auto_increment,
    name varchar(100) NOT NULL,
    parentid int(11) NOT NULL,
     PRIMARY KEY  (id)
)"  ; 
```

并说这些是表内的条目

```
id  name    parentid
1   animal  NULL
2   vegetable NULL
3   mineral NULL
4   doggie  1
5   kittie  1
6   horsie  1
7   gerbil  1
8   birdie  1
9   carrot  2
10  tomato  2
11  potato  2
12  celery  2
13  rutabaga    2
14  quartz  3 
```

我想要的是这样一个 sql 查询，对于给定的 id ，返回所有叶节点，如果给出叶节点的 id，则返回叶节点本身。

因此，如果设置了 id 2，则返回的行是 - 胡萝卜、番茄、马铃薯、芹菜、大头菜。如果给出 id 为 9 ，则返回的行是 - 9 本身

可能的？

我的子类别不会超过 3 个级别。

我尝试了[此页面上](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)给出的代码，但如果给出了叶节点 ID，它没有给出叶节点。

谢谢

我尝试了一些查询..

```
 SELECT distinct t1.name FROM
categories AS t1 LEFT JOIN categories as t2
ON t1.id = t2.parent
 LEFT JOIN categories as t3
ON t2.id = t3.parent
WHERE  t1.parent = ? OR t1.id = ? 
```

但我根本无法理解连接。

编辑：如果叶节点 id 给定 part ，我可以放弃返回叶节点。现在我只需要一个返回所有叶子节点的查询，给定一个类别/子类别节点。再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:55:03.710

所以我使用的最终查询如下所示：

```
SELECT distinct t2.id , t2.name FROM
    categories AS t1 LEFT JOIN categories as t2
    ON t1.id = t2.parent
     LEFT JOIN categories as t3
    ON t2.id = t3.parent
    WHERE  t1.parent = $id OR t1.id = $id and t2.visible = 1 
```

如果返回一个空的结果集，这意味着提供了一个结束节点，我只需返回提供的 $id。它的工作。希望它会继续这样做，因为我在这里有点猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:44:45.897

试试这个代码：

```
select * from `categories` where id=something and parentid is not null 
union all
select * from `categories` where parentid=something; 
```

并告诉我它是否有效（用所需的值替换一些东西）。

# excel - 任何人都有解决方法来解决保存和发送Outlook插件的错误？

> ID：10512796
> 
> 赞同：3
> 
> 时间：2012-05-09T08:54:13.757
> 
> 标签：excel, outlook, vsto, outlook-addin

我不确定这是否可以通过编程方式解决，但我在使用 Outlook 插件时遇到以下问题。重现：

```
1) Create a new Outlook add in
2) Add a ribbon to the solution
3) Set the RibbonType to Microsoft.Outlook.Mail.Compose
4) Run the solution
5) Open a workbook in Excel
6) Click File > Save and Send > Send as Attachment > Then send or close the mail
7) Click file Save As - The dialog box appears behind the excel window. 
```

以附件形式发送窗口关闭后，您将无法访问 Excel 中的任何对话框。

是否有人对此错误有修复或有意义的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T12:51:50.203

显然罪魁祸首是微软的功能区设计师：http: [//blogs.msdn.com/b/dhruvkh/archive/2012/05/14/outlook-ribbon-woes-on-performing-send-as-e-mail-via- other-office-2010-apps.aspx](http://blogs.msdn.com/b/dhruvkh/archive/2012/05/14/outlook-ribbon-woes-on-performing-send-as-e-mail-via-other-office-2010-apps.aspx)

但是，请注意：我在创建的 Outlook 加载项中看到了同样的问题，它直接使用 RibbonXML（直到昨天我才听说过 Ribbon Designer）所以我目前正在尝试找出更多关于根本问题到底是什么。

# asp.net - 无法加载文件或程序集“应用程序名称”或其依赖项之一。该模块应包含程序集清单

> ID：10512802
> 
> 赞同：2
> 
> 时间：2012-05-09T08:54:34.470
> 
> 标签：asp.net, visual-studio-2010

我们制作了一个运行平稳的 .net 应用程序，但是当我们尝试在另一台机器上执行 .exe 时遇到错误

> 应用程序无法正确启动（oxcOOOOO7b）

我们尝试在 Visual Studio 2010 中重建解决方案，但遇到错误：

> 无法加载文件或程序集“*爬虫*”或其依赖项之一。
> 该模块应包含程序集清单。

可能是什么原因？这可能是因为没有 .net framework 3.5 吗？我们在 Windows 7 上安装了 .net framework 4.0 和 3.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T09:08:51.227

> 这是一个低级程序集加载问题。CLR 找到了一个具有正确名称的文件，但是当它尝试加载程序集时，它发现该文件不包含正确的清单。.NET 程序集必须包含清单，它包含描述程序集的元数据，列出程序集中的类型等。

我做了一些调查，发现这些解决方案可能会有所帮助。

1.  确保 2 个 .exe/dll 具有相同的名称。

2.  确保无论您的目标 .NET 框架是什么，它都安装在您的机器上。

3.  以 .NET Framework 4 而非 .NET Framework 4 客户端配置文件为目标。

4.  检查所有构建选项是否设置为 x86 或 x64，具体取决于您的系统架构或 AnyCPU。

5.  可能是因为某些病毒。尝试使用防病毒软件扫描您的机器并重新构建项目。

有关更多详细信息，[请参阅此线程](https://stackoverflow.com/questions/12135925/error-while-trying-to-run-projectthe-module-was-expected-to-contain-an-assembly)。

# objective-c - Xcode 4.3 停止构建 XIB 文件

> ID：10512807
> 
> 赞同：3
> 
> 时间：2012-05-09T08:54:59.187
> 
> 标签：objective-c, ios, xcode

我的 iOS 项目中有几个用于各种自定义表格单元格的 XIB 文件。我刚刚添加了另一个，但由于某种原因，Xcode 不会将此（或任何后续）XIB 构建到项目中！

在文件检查器中设置了适当的标志以包含 XIB，并且 XIB 出现在正确的构建阶段。到目前为止，所有 XIB 都按预期工作，并且项目中没有更改任何设置

![项目设置](../Images/cf4df25bd7028033897d309fb5bf2d74.png)

我已经尝试添加更多具有不同名称的 XIB，但它们都没有内置到项目中（通过检查构建应用程序的 NIB 文件进行验证）。

![看妈妈，没有笔尖！](../Images/0e86d16f421a27c4f2923564768ec526.png)

到底是怎么回事 ？这是 Xcode 中的错误吗？有人知道如何解决吗？

**更新**

我删除了派生的数据目录，你瞧，NIB 现在出现在构建产品中——所以我将把它归为一个神秘的 Xcode 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:09:43.793

我知道这会创建更多的类和额外的文件，它并不能解决为什么会发生这种情况，但作为一种解决方法，您可以尝试：

创建一个 BlahCell 类并将 nibs 文件的所有者设置为它 - 如果将 BlahCell.m 设置为编译，这可能会编译您的 nib。

我在其他新闻中将其视为直接清洁和构建并不能解决任何问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:56:58.307

在当前版本的 Xcode 中，当事情变得奇怪并且退出 + 重新启动并不能解决问题时，通常会删除您的 DerivedData 文件夹。

您甚至可以将其作为构建脚本的一部分或作为 cron 作业来执行：

`rm -rf ~/Library/Developer/Xcode/DerivedData`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:36:08.190

我删除了派生的数据目录，你瞧，NIB 现在出现在构建产品中——所以我将把它归为一个神秘的 Xcode 错误。

# javascript - 当 mp3 播放完毕时更改 a 的类名

> ID：10512809
> 
> 赞同：0
> 
> 时间：2012-05-09T08:55:17.853
> 
> 标签：javascript, jplayer

我正在使用jplayer。mp3 播放完毕后，我想将类名从“stop”更改为“play”。我怎么能在jplayer中做到这一点？

```
<div id="topid">
    <a class="stop" onclick="play('test1.mp3');" href="javascript:;"></a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:13:31.187

您可以使用该`$.jPlayer.event.ended`事件。我的意思是，来吧，阅读[文档](http://jplayer.org/latest/developer-guide/#jPlayer-events)。

来自同一链接的用法示例：

```
$("#repeat-on").click( function() {
  $("#jpId").bind($.jPlayer.event.ended + ".jp-repeat", function(event) { // Using ".jp-repeat" namespace so we can easily remove this event
    $(this).jPlayer("play"); // Add a repeat behaviour so media replays when it ends. (Loops)
  });
  return false;
}); 
```

# sql-server - 与 sql server 中的 LIKE 运算符比较时，VARCHAR 文本不等于 Char 文本

> ID：10512811
> 
> 赞同：1
> 
> 时间：2012-05-09T08:55:25.840
> 
> 标签：sql-server

我有以下代码，它返回 false 以`"@B LIKE @A"`在最后一个语句中进行比较。

我想知道为什么 Like 会以这种方式表现，因为据我所知 Like 是基于文本而不是基于数据类型的比较。

```
DECLARE @Var1 Char(20)
DECLARE @Var2 VarChar(20)

SET @Var1 = 'X'
SET @Var2 = 'X'

SELECT 
@Var1 AS A,
@Var2 AS B,
LEN(@Var1) AS 'A Length',
LEN(@Var2) AS 'B Length',
CASE WHEN @Var1 = @Var2 THEN 'Yes' ELSE 'No' END AS 'A = B',
CASE WHEN @Var1 LIKE @Var2 THEN 'Yes' ELSE 'No' END AS 'A LIKE B',
CASE WHEN @Var2 LIKE @Var1 THEN 'Yes' ELSE 'No' END AS 'B LIKE A' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:20:28.360

CHAR 值包含尾随空格，即使您看不到它们并且 LEN() 也不报告它们。

试试这个来验证：

```
DECLARE @Var1A Char(40) 
DECLARE @Var2A VarChar(40) 

SELECT @Var1A = @Var1 + 'x', @Var2A = @Var2 + 'x'

SELECT LEN(@Var1A), LEN(@Var2A), '"' + @Var1A + '"', '"' + @Var2A + '"'

21  2   "X                   x                   "  "Xx" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:33:34.460

@A 是 CHAR(20) 类型，因此它的值在右侧用空格填充以将其填充到 20 的长度。

Len() 函数不包括尾随空格，因此 @A 和 @B 都显示长度为 1，即使 @A 已用空格填充。

对于比较，SQL Server 遵循 ansi 标准，该标准要求在比较之前将字符串填充到相同的长度，因此 @A 和 @B 显示为相等。

一个例外是 LIKE 谓词，如果尾随空格在右侧，它不会将字符串填充到相同的长度。

[参考：SQL Server 如何将字符串与尾随空格进行比较](http://support.microsoft.com/kb/316626)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:00:14.460

看一下这个

```
DECLARE @Var1 Char(20)
DECLARE @Var2 VarChar(20) 
 SET @Var1 = 'X' 
 SET @Var2 = 'X' 
  SELECT  
  @Var1 AS A,
   @Var2 AS B, 
   LEN(@Var1) AS 'A Length', 
   LEN(@Var2) AS 'B Length', 
   DataLength(@Var1) AS 'A DataLength', 
   DataLength(@Var2) AS 'B DataLength', 
   CASE WHEN @Var1 = @Var2 THEN 'Yes' ELSE 'No' END AS 'A = B', 
   CASE WHEN ltrim(rtrim(@Var1)) LIKE ltrim(rtrim(@Var2)) THEN 'Yes' ELSE 'No' END AS 'A LIKE B', 
   CASE WHEN ltrim(rtrim(@Var2)) LIKE ltrim(rtrim(@Var1)) THEN 'Yes' ELSE 'No' END AS 'B LIKE A' 
```

# apache2 - Apache2 默认没有选择正确的 index.html

> ID：10512818
> 
> 赞同：0
> 
> 时间：2012-05-09T08:55:52.280
> 
> 标签：apache2, virtualhost

我正在设置一个网络服务器。我添加了一个虚拟主机来测试它。当我浏览到服务器的 IP 地址时，我按预期看到了默认的 Apache 欢迎页面。我已经在我的主机文件中添加了一个示例 URL，并且我在网络服务器中为该域设置了一个虚拟主机。我在该虚拟主机的根目录中放置了一个 index.html 文件。现在，如果我浏览到那个 url，我仍然会看到默认的 Apache 欢迎页面。但是，如果我将“index.html”添加到 url，那么我会得到我期望看到的页面。我已经用谷歌搜索了这个（我现在还在寻找），但还没有找到答案。有没有人见过这个？

我在 Debian 下运行 apache2。

根据要求，这是我的虚拟主机文件：

```
<VirtualHost *:80>
  ServerName www.example.com
  DocumentRoot "/home/me/www/example.com"
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:18:03.723

[我在Server Fault](https://serverfault.com/questions/25250/apache2-displaying-root-index-html-instead-of-virtualhosts-index-html "服务器故障")上找到了答案。事实证明这不是错误，只是我的浏览器缓存需要刷新。

# debugging - 服务器端 RequestFactory 相关错误，没有堆栈跟踪或任何其他详细信息

> ID：10512819
> 
> 赞同：0
> 
> 时间：2012-05-09T08:55:52.830
> 
> 标签：debugging, gwt, gwt2, requestfactory

如果我在日志中看到的所有错误报告都是：有人可以告诉我如何从 GWT 应用程序中提取更多信息：

客户端：`Caused by: java.lang.RuntimeException: Server Error 500...`

服务器端：（`[ERROR] 500 - POST /gwtRequest (127.0.0.1) 1420 bytes`红色字体）

（我通过 gwt:run 从 Maven 以开发模式运行应用程序，因此它在 Jetty 上运行）

除了它与 RequestFactory (/gwtRequest) 相关之外，我完全不知道发生了什么。它可能与无效的 Entity-Proxy 或 Request-Service 合同有关，但我已经在 Eclipse 和 Maven 中正确配置了 RequestFactory-apt 验证器，并且我没有从中得到任何错误（通常这种验证对我来说很好）。

有什么想法我可以做些什么来更多地了解一个问题以及为什么 GWT 不只是给我一个服务器堆栈跟踪来显示服务器端出了什么问题？

编辑：我发现错误：我`@Enumerated(EnumType.STRING)`的 JPA 实体中有枚举字段。在数据库中有与枚举的任何值都不匹配的 varchar 值。但我的问题仍然是为什么我没有得到堆栈跟踪。如果我得到它，我会在 1 分钟内解决它，而不是半天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:01:18.297

与此处相同： [RequestFactory: error.getExceptionType() 在 Receiver#onFailure 中返回 null](https://stackoverflow.com/questions/10471294/requestfactory-error-getexceptiontype-returns-null-in-receiveronfailure/10478177#10478177)

您必须通过扩展 RequestFactoryServlet 来提供自己的 ExceptionHandler

实施此操作，您将获得 StackTrace 并找到问题：[http ://cleancodematters.com/2011/05/29/improved-exceptionhandling-with-gwts-requestfactory/](http://cleancodematters.com/2011/05/29/improved-exceptionhandling-with-gwts-requestfactory/)

只需五分钟，为您现在和将来节省大量时间。

# java - 这是如何运作的？x<<=3 = -8 其中（字节）x = 127？

> ID：10512822
> 
> 赞同：1
> 
> 时间：2012-05-09T08:56:00.067
> 
> 标签：java, c, logic, unsigned

**为什么我得到这个输出？**

字节 x ; x = 127; x<<=3;//同 x = x <<3 println(x)

**输出：-8**

当我在纸上记下它并旋转我得到的位时 - **11111000 那就是= 248**？

我想字节占用1个字节（8位）。不知道它是有符号的还是无符号的？我假设它是有符号的？

**因为下面给出的 C 代码也给了我-8：**

有符号字符 x = 127; x<<=3; printf("x = %d \n " , x);

为什么-8？？rgd软

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T08:57:33.203

这是因为它是一个使用[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)`byte`的有符号数据类型。并且等于。`248-256``-8`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:14:12.257

因为您使用的是有符号字符，其范围是 -128 到 127。有符号字符的最高有效位 (MSB) 仅限于其有符号字符。0 表示正数，1 表示负数。

如果为正.. 该值正常计数。

但如果是负数.. 值为 count [normal_value] - [max_value] 例如：

129 = 1000 0001 [位]

所以签名的值 = 129 - 256 = -127

CMIIW

# android - 从 Android 中的可绘制对象或布局创建自定义图标

> ID：10512823
> 
> 赞同：0
> 
> 时间：2012-05-09T08:56:04.470
> 
> 标签：android, layout, icons, drawable

我正在尝试创建自定义快捷方式图标，通过 Intents 在我的应用程序中调用活动。问题是我想通过修改我的应用程序的一个可绘制对象或（最好）我的一个布局来创建它们。

对于drawables，我试过这个

```
Drawable iconDrawable = getResources().getDrawable(iconResource);                       
iconDrawable.mutate();                      
iconDrawable.setColorFilter(0xff00ff00, PorterDuff.Mode.SRC_ATOP);                      
BitmapDrawable bd = (BitmapDrawable) iconDrawable;
bd.mutate();
bd.setColorFilter(0xff00ff00, PorterDuff.Mode.SRC_ATOP);
putShortCutIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON, bd.getBitmap()); 
```

但它不起作用，可绘制对象按原样显示，而不修改其颜色。

至于从自定义布局创建图标，这是我真正想要做的......我根本不知道从哪里开始。

谁能告诉我该怎么做或至少指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:25:01.787

好的，我通过研究 AnyCut 源代码找到了答案，“诀窍”是使用 Canvas：

[http://code.google.com/p/apps-for-android/source/browse/AnyCut/src/com/example/anycut/CreateShortcutActivity.java](http://code.google.com/p/apps-for-android/source/browse/AnyCut/src/com/example/anycut/CreateShortcutActivity.java)

（更准确地说，generatePhoneNumberIcon 函数）。

# hibernate - hibernate 控制台向导中的 type 选项有什么作用？

> ID：10512824
> 
> 赞同：0
> 
> 时间：2012-05-09T08:56:05.323
> 
> 标签：hibernate, hibernate-tools

Hibernate 工具有一个 Hibernate 控制台向导，它有一个 type 选项，其中包含三个可能的值可供选择：core、annotations 和 jpa。官方文档没有说明选择这些值中的任何一个的结果。

如果我在这里选择注释有什么不同？我一直在查看所有文档，文档和 Google 查询都没有返回任何有用的信息。我在这里遗漏了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:36:32.613

据我所知，**“类型”**选项将告诉您将如何在代码中使用 Hibernate。例如：

*   如果您选择**“核心”**，则意味着您的项目将包含 Java 文件，其映射定义在 XML 文件中。
*   如果您选择**“注释”**，则意味着您将使用注释直接在类中映射属性。

对于注释和 JPA 注释之间的差异，我首先找到了以下链接：http: [//www.coderanch.com/t/422576/ORM/java/difference-between-jpa-Annotations-Hibernate](http://www.coderanch.com/t/422576/ORM/java/difference-between-jpa-Annotations-Hibernate)

# php - MySql：映射表或同一表中的所有数据？

> ID：10512828
> 
> 赞同：2
> 
> 时间：2012-05-09T08:56:43.267
> 
> 标签：php, mysql, data-structures

我正在做一个项目，该项目使用一个表将所有餐厅数据存储在同一个表中。有一个单独的表格用于包含`area_id`和的区域`area_name`

有六个领域对我来说是问题的根源。他们是：

```
delivery_area_1 , delivery_area_2, delivery_area_3
minimum_order_1, minimum_order_2 and minimum_order_3 
```

`delivery_area_1`字段包含一个逗号 (',') 分隔的所有`area_id`' 列表，其中餐厅以最低订单 1 交付，依此类推，用于交付区域 2 和 3。

当用户搜索`area_id`并且结果包含在该 area_id 中提供的所有餐厅时，相应的最小订单将与其他详细信息一起显示在结果中。

我建议将此交付区域数据移动到一个单独的映射表中，该表将包含：

`restaurant_id, area_id and the minimum order`.

但是这样做会导致 20,000 家餐厅的映射表中的条目数超过 1000,000。目前有 1000 家餐厅，但从现在开始，这个数字将迅速增加。每家餐厅在大约 30-80 个区域提供服务。

这是个好举动吗？这将是一个重大决定。所以请帮我解决这个问题。

有没有更好的方法来简化和优化搜索？

它是一个 PHP 网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:00:57.560

简短而简单：**是**的，改变它（这称为[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)）。

仅包含 3 个列的表中的一百万行并不是什么大问题。您可以选择添加两个表，而不仅仅是一个：

```
minimum_order (restaurant_id, minimum_order_id, amount)

delivery_area (restaurant_id, area_id, minimum_order_id) 
```

这将为您带来优势，即一组区域的数量发生变化，只需`minimum_order`更新 at 的数量，而不是 at 的多行（每个区域一个）`minimum_order`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:15:41.343

这绝对是一个好举措。不建议对数据库进行非规范化以减少行数。这样做会有几个缺点。目前您似乎正在存储 Area Id 逗号分隔。在这种情况下，您无法在按区域 ID 搜索时使用索引。或者，您可能对 delivery_area_1、delivery_area_2、delivery_area_3 字段使用了“全文索引”。

如果行数在增加，那么您可以尝试分区技术。

请参考[http://dev.mysql.com/tech-resources/articles/partitioning.html](http://dev.mysql.com/tech-resources/articles/partitioning.html)

# sql - 如何在 Rails3 中从没有模型的数据库中查询？

> ID：10512831
> 
> 赞同：2
> 
> 时间：2012-05-09T08:57:07.603
> 
> 标签：sql, ruby-on-rails-3, model

如果我不在控制器中使用注入 sql 命令，我该如何解决这个问题？

更多细节![在此处输入图像描述](../Images/f8ec6242b752d01b229bb978dafef1c4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:09:18.717

我认为您不会（或至少不应该）至少使用 ActiveRecord 模型并使用`find_by_sql`.

参考：[http ://api.rubyonrails.org/classes/ActiveRecord/Querying.html#method-i-find_by_sql](http://api.rubyonrails.org/classes/ActiveRecord/Querying.html#method-i-find_by_sql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:16:53.033

看到这个问题：

[http://www.stackoverflow.com/questions/4727470/how-to-make-rails-external-database-calls](http://www.stackoverflow.com/questions/4727470/how-to-make-rails-external-database-calls)

基本上，重点是您可以在 database.yml 中定义与其他数据库的连接。默认情况下，ActiveRecord::Base 将从一个继承，但您可以使用该`establish_connection`方法连接到为给定模型配置的另一个数据库。

然后您可以使用 ActiveRecord API（例如 find_by_sql）来查询其他数据库。

# c# - 如何用另一个差异覆盖一个 XML 元素？

> ID：10512832
> 
> 赞同：0
> 
> 时间：2012-05-09T08:57:11.143
> 
> 标签：c#, xml, linq-to-xml

根据我连接到的面板类型，我有不同的 XML 配置。

大多数面板具有相同的配置，但差异在于较新的版本。

例如

1.0版面板有以下

```
 <panel version="1.0">
    <options opt1="1823" opt2="7" opt3="127"/>
    <timers>
      <t1 min="0" max="99" />
      <t2 min="0" max="99" />      
    </timers>
  </panel> 
```

和版本 1.1 具有完全相同的配置，除了它具有不同的值`opt1`。

```
 <panel version="1.1">
    <options opt1="7967" /> <!-- opt2 and opt3 are exactly the same -->
    <!-- the timer values are all exactly the same -->
  </panel> 
```

**问题** 有没有办法让我加载面板 1.0 的配置并自动覆盖面板 1.1 的差异？即.net 框架中是否有一些东西可以比较 2 个 xml 文件并将 1 与另一个文件的差异覆盖？

如果没有，我可以将配置从面板 1.0 复制到面板 1.1，但这会复制大量数据，我正试图避免这种情况。

我也可以先加载面板 1.0，然后搜索 1.1 中必须被覆盖的任何元素。但如果那个轮子已经被发明了，我不想重新发明它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:43:30.620

这成功了：

```
foreach (var el in panelV11.Descendants())
{
    var elName = el.Name;
    foreach (var attrib in el.Attributes())
    {
        var attrName = attrib.Name;

        panelV10.Element(elName).Attribute(attrName).Value = attrib.Value;
    }
} 
```

然后只用`panelV10`作主配置文件，旧值被 1.1 文件中的新值覆盖。

# php - 为什么 CodeIgniter 会在它的 cookie 中存储这么多数据？

> ID：10512833
> 
> 赞同：1
> 
> 时间：2012-05-09T08:57:14.690
> 
> 标签：php, codeigniter, cookies

我将[CodeIgniter](http://www.codeigniter.com "代码点火器")设置为在数据库中存储会话，但它仍然坚持以下内容在 cookie 中：

```
a:4:{
 s:10:"session_id";s:32:"191668b039f27f1a4fa25586aaaf708e";
 s:10:"ip_address";s:14:"123.12.123.123";
 s:10:"user_agent";s:50:"Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko";
 s:13:"last_activity";i:1336549698;
}9fed5a2005d9df3ccedff9589aa7d36f 
```

所有这些也都在，`default_ci_sessions`所以我不知道为什么它也在 cookie 中！我之所以问，是因为关于本地存储用户身份数据的新欧盟 cookie 立法。我不完全确定这是否属于立法范围，但已经提出了担忧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:22:48.813

这来自 CodeIgniter 会话库的逻辑（因为 PyroCMS 是用 CI 构建的）。我目前无法告诉您为什么会这样，但我也认为不需要将此类数据单独存储在 cookie 本身中。我将就此展开讨论，并在此处发布链接以进行跟踪。

编辑：[https ://github.com/EllisLab/CodeIgniter/issues/1344](https://github.com/EllisLab/CodeIgniter/issues/1344)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:35:21.157

我很确定这与 CI Session 类和您可以设置的首选项有关。

当脚本检查 cookie 的有效性时，它（可能）根据 Input 类中的当前用户代理数据检查 IP 地址和 UA 字符串，无论您是否使用 DB 会话（in `sess_read()`）来验证 cookie . 如果您使用的是数据库，它还会根据 cookie 数据检查数据库数据。

该脚本这样做是为了防止黑客攻击 - 理论上有人可以猜测或嗅探正确的 session_id、IP 地址或 UA 字符串，但所有这三个都会更难。

更多在这里[http://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html)

# sorting - 自定义排序顺序 - mongoDB 中的配置

> ID：10512834
> 
> 赞同：2
> 
> 时间：2012-05-09T08:57:17.260
> 
> 标签：sorting, mongodb, configuration

我想知道如何为自定义排序顺序配置数据库

今天，MongoDB 按以下顺序对 String 数据进行排序：（用于对字符串列表进行排序的模式是 -> [Symbols][0-9][AZ][az] ）

示例：当前排序顺序将是这样的。

1.  ＆％姓名
2.  123应用程序名称
3.  应用名称
4.  哨兵名称
5.  **应用名称**
6.  **样品名称**

但是我们想要这种方式是不同的。模式可以是-> [符号][0-9][Aa-Zz]

示例：预期的排序顺序应该是这样的

1.  ＆％姓名
2.  123应用程序名称
3.  应用名称
4.  **应用名称**
5.  哨兵名称
6.  **样品名称**

我的问题是，您是否知道如何在 mongoDB 中配置以自定义正则表达式模式，以按照我们预期的顺序进行排序。?

我希望它很清楚，如果有不清楚的地方，请让我知道以更详细地解释。

PS：我想在数据库级别进行此更改，以便在我对其进行排序时它对任何字符串都保持相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T10:12:02.387

目前，MongoDB 还没有实现排序规则。实施[Unicode 排序标准](http://unicode.org/reports/tr10/)是解决这个问题的*最佳*方法，但正如您在浏览该文档时所看到的那样，这不会是一项简单的任务。此外，它会使排序变慢，索引变大。所以现在，最好在你的应用程序中进行排序，或者添加一个带有你建议的排序值的字段——如果你足够疯狂，你可以自己实现 TR10 中的排序算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:11:35.713

您为什么不添加一个默认按您想要的顺序排序的键。例如

```
> db.foo.insert({name: "&%name"})
> db.foo.insert({name: "123AppName"})
> db.foo.insert({name: "AppName"})
> db.foo.insert({name: "appsname"})
> db.foo.insert({name: "SentinnelName"})
> db.foo.insert({name: "sampleName"})

> db.foo.find().forEach(function(row) { db.foo.update({_id: row._id}, {$set: {sname: row.name.toLowerCase()}}); });

> db.foo.find()> db.foo.find({}, {name: 1}).sort({sname: 1})
{ "_id" : ObjectId("4faa32e2a1454519983b116e"), "name" : "&%name" }
{ "_id" : ObjectId("4faa32e8a1454519983b116f"), "name" : "123AppName" }
{ "_id" : ObjectId("4faa330ba1454519983b1170"), "name" : "AppName" }
{ "_id" : ObjectId("4faa3310a1454519983b1171"), "name" : "appsname" }
{ "_id" : ObjectId("4faa331aa1454519983b1173"), "name" : "sampleName" }
{ "_id" : ObjectId("4faa3315a1454519983b1172"), "name" : "SentinnelName" } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T09:09:01.160

MongoDB 不使用正则表达式对字符串进行排序。它按字典顺序对它们进行排序。恰好“%”<“0”、“0”<“A”和“A”<“a”（基于它们的字符代码）。

但是，“@”在数字和大写字母之间按字典顺序*。它就是这样排序的。

```
% mongo
MongoDB shell version: 2.1.0
connecting to: test
> db.sort.insert({s: '777'})
> db.sort.insert({s: 'AAA'})
> db.sort.insert({s: '@@@'})

> db.sort.find().sort({s: 1})
{ "_id" : ObjectId("4faa33a07758e53f27a9896a"), "s" : "777" }
{ "_id" : ObjectId("4faa33b67758e53f27a9896c"), "s" : "@@@" }
{ "_id" : ObjectId("4faa33ad7758e53f27a9896b"), "s" : "AAA" } 
```

所以，从我的脑海中，我不知道如何改变 MongoDB 的行为。您应该改为在应用程序中排序。

**假设 ASCII 或 UTF-8 编码*

# jquery - 使用 setInterval 在鼠标悬停上连续动画

> ID：10512835
> 
> 赞同：0
> 
> 时间：2012-05-09T08:57:19.717
> 
> 标签：jquery, jquery-animate, setinterval

我已经被这个问题困扰了很长一段时间了，我在谷歌上搜索了无数个小时来想出一个解决方案，但无济于事。

**这是我的问题**

我想知道轮播背后的逻辑，并希望当用户将鼠标悬停在相应的按钮上时让它从右向左滑动，反之亦然。

如何让它在 mouseenter 上连续动画？

任何帮助将不胜感激。谢谢你 ：）

**这是 JSFIDDLE：http:** [//jsfiddle.net/neoragex/qXseV/](http://jsfiddle.net/neoragex/qXseV/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T09:09:20.670

我已经更新了你的版本，看看:) [http://jsfiddle.net/qXseV/2/](http://jsfiddle.net/qXseV/2/)

我所做的是将以下内容添加到 .mid 类的 CSS 中：

```
position:absolute;
top:20px; 
```

我将您的 setInterval 更改为：

```
timer = setInterval(function() {slide();}, 400); 
```

编辑：左右移动的额外jsfiddle [http://jsfiddle.net/qXseV/7/](http://jsfiddle.net/qXseV/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:24:45.547

[我对您的计时器实现](http://jsfiddle.net/zuul/dn62c/)进行了一些调整，并修复了要滑动的元素上缺少的 css [position:relative ，因为您正在操作](http://www.w3schools.com/css/css_positioning.asp)[left value](http://www.w3schools.com/cssref/pr_pos_left.asp)，因此只能在元素具有位置时使用。

**HTML**

```
<div id="leftarrow">HOVER</div>
<div class="mid"></div> 
```

**CSS**

```
.mid {
    clear: both;
    border: 1px solid black;
    background-color: green;
    width: 100px;
    height: 100px;    
    position: relative;
}
#leftarrow {
    float: left;
    border: 1px solid black;
    margin-bottom: 4px;
    cursor: pointer;
} 
```

**查询**

```
// declare variables
var timer;
var speed = 400;

// slide function
function slide() {
    return setInterval(function() {
        $(".mid").animate({
            'left': '+=20px'
        }, 200);
    }, speed);
}

// hover event for the button
$("#leftarrow").hover(function() {
    timer = slide();
}, function() {
    clearInterval(timer);
}); 
```

看[这里的小提琴！](http://jsfiddle.net/zuul/dn62c/)

# silverlight - Silverlight 4 和 VisualSVN 问题

> ID：10512841
> 
> 赞同：0
> 
> 时间：2012-05-09T08:57:39.650
> 
> 标签：silverlight, visualsvn

我最近开始使用 VisualSVN 将我的解决方案同步到我的 Dropbox 文件夹。但在 Silverlight 解决方案中，尝试运行时出现错误。

“您要调试的 Silverlight 项目使用 WCF RIA 服务。WCF RIA 服务将失败，除非 Silverlight 项目托管在包含 WCF RIA 服务的同一个 Web 项目中并从该项目启动。”

我不确定，但我想问题在于它在我的 Dropbox 文件夹中，虽然我不太确定，因为自从我安装了 VisualSVN 以来，解决方案没有任何改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:40:31.990

确保您的启动项目是 YourProject.Web

# javascript - 为 jQuery Sparklines 插件的每个值添加字符串标签

> ID：10512842
> 
> 赞同：25
> 
> 时间：2012-05-09T08:57:41.300
> 
> 标签：javascript, jquery, sparklines

我正在为我正在开发的 Web 应用程序实现[jQuery Sparklines插件。](http://omnipotent.net/jquery.sparkline/#s-about)我想为饼图值添加标签，因此当您将鼠标悬停在该特定图表上时，您将看到“ **Automotive** (25%)”而不是默认的 int 值“ **1** (25%)”。

关于如何做到这一点的任何想法？

这是我的代码：

```
 $(function(){
        var myvalues = [10,8,5,7,4,4,1];
        $('#sparkline').sparkline(myvalues, {
            type: 'pie',
            width: '200px',
            height: '200px',
            sliceColors: ['#5d3092', '#4dc9ec', '#9de49d', '#9074b1', '#66aa00', '#dd4477', '#0099c6', '#990099'],
            borderWidth: 7,
            borderColor: '#f5f5f5'
        });
    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-09T22:29:23.373

使用 tooltipPrefix 或编写自己的格式化程序的更好替代方法是使用 tooltipFormat 和 tooltipValueLookups 来将值数组中的索引映射到名称：

```
 $(function() {
    var myvalues = [10,8,5,7,4,4,1];
    $('#sparkline').sparkline(myvalues, {
        type: 'pie',
        width: '200px',
        height: '200px',
        sliceColors: ['#5d3092', '#4dc9ec', '#9de49d', '#9074b1', '#66aa00', '#dd4477', '#0099c6', '#990099'],
        borderWidth: 7,
        borderColor: '#f5f5f5',
        tooltipFormat: '<span style="color: {{color}}">&#9679;</span> {{offset:names}} ({{percent.1}}%)',
        tooltipValueLookups: {
            names: {
                0: 'Automotive',
                1: 'Locomotive',
                2: 'Unmotivated',
                3: 'Three',
                4: 'Four',
                5: 'Five'
                // Add more here
            }
        }
    });
}); 
```

这是上述方法的 Sparkline 文档的链接：http: [//omnipotent.net/jquery.sparkline/#tooltips](http://omnipotent.net/jquery.sparkline/#tooltips)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-06T15:01:07.887

我也使用引导程序，遇到了看不到工具提示的问题：

将 box-sizing 全局设置为 border-box 会导致工具提示显示不正确。这可以在引导后通过以下 css 修复。这可能会成为一个问题，因为 box-sizing 被更频繁地使用。

```
.jqstooltip { box-sizing: content-box;} 
```

这是链接。 [https://github.com/gwatts/jquery.sparkline/issues/89](https://github.com/gwatts/jquery.sparkline/issues/89)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-08T17:11:32.653

这是带有自定义标签的饼图的工作示例

[http://jsfiddle.net/gwatts/ak4JW/](http://jsfiddle.net/gwatts/ak4JW/)

```
// jsfiddle configured to load jQuery Sparkline 2.1
// http://omnipotent.net/jquery.sparkline/
// Values to render
var values = [1, 2, 3];

// Draw a sparkline for the #sparkline element
$('#sparkline').sparkline(values, {
    type: "pie",
    // Map the offset in the list of values to a name to use in the tooltip
    tooltipFormat: '{{offset:offset}} ({{percent.1}}%)',
    tooltipValueLookups: {
        'offset': {
            0: 'First',
            1: 'Second',
            2: 'Third'
        }
    },
}); 
```

# c# - 如何使用电子邮件模板c#发送电子邮件

> ID：10512845
> 
> 赞同：27
> 
> 时间：2012-05-09T08:57:50.693
> 
> 标签：c#, email-templates

假设我需要向客户发送包含客户详细信息和订单详细信息的邮件。我在 html 文件中有模板 html 数据。客户数据在那里，订单详细信息也在同一个 html 模板文件中。我的 html 看起来像

```
<html>
<body>
Hi {FirstName} {LastName},

Here are your orders: 
{foreach Orders}
    Order ID {OrderID} Quantity : {Qty} <strong>{Price}</strong>. 
{end}

</body>
</html> 
```

现在我想用实际值填写所有用 {} 包围的示例关键字，并迭代和填写订单。

我搜索谷歌，发现微软提供了一个名为**MailDefinition**的类 ，我们可以通过它动态生成邮件正文。我也有一个示例代码

```
MailDefinition md = new MailDefinition();
md.From = "test@domain.com";
md.IsBodyHtml = true;
md.Subject = "Test of MailDefinition";

ListDictionary replacements = new ListDictionary();
replacements.Add("<%Name%>", "Martin");
replacements.Add("<%Country%>", "Denmark");

string body = "
Hello <%Name%> You're from <%Country%>.";

MailMessage msg = md.CreateMailMessage("you@anywhere.com", replacements, body, new    System.Web.UI.Control()); 
```

通过上面的代码，我们可以用实际值替换伪值，但我不知道如何迭代订单详细信息并填充订单数据。

因此，如果可以使用 MailDefinition 类，那么请用代码指导我如何在循环中迭代并为订单详细信息生成正文。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-09T09:12:46.563

作为 MailDefinition 的替代方案，请查看 RazorEngine [https://github.com/Antaris/RazorEngine](https://github.com/Antaris/RazorEngine)。

> RazorEngine 是围绕 Microsoft 的新 Razor 解析引擎构建的简化模板框架，用于 ASP.NET MVC3 和网页。**RazorEngine 提供围绕解析引擎构建的包装器和附加服务，以允许在其他项目类型中使用解析技术**。

它允许您在 ASP.NET MVC 之外使用 razor 模板，然后编写类似这样的内容（*未经测试*）：

```
string template =
@"<html>
<body>
Hi @Model.FirstName @Model.LastName,

Here are your orders: 
@foreach(var order in Model.Orders) {
    Order ID @order.Id Quantity : @order.Qty <strong>@order.Price</strong>. 
}

</body>
</html>";

var model = new OrderModel {
    FirstName = "Martin",
    LastName = "Whatever",
    Orders = new [] {
        new Order { Id = 1, Qty = 5, Price = 29.99 },
        new Order { Id = 2, Qty = 1, Price = 9.99 }
    }
};

string mailBody = Razor.Parse(template, model); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:07:49.757

您不能使用默认替换内容来执行这种“复杂”的逻辑（占位符处理仅用于简单变量，例如名称或值）。

您必须自己进行解析。根据复杂性（例如带有循环的循环），这可能会有些棘手。

如果您不想要或不需要这些东西，那就更微不足道了。例如，使用正则表达式`\{foreach (.*?)\}(.*?)\{end\}`查找此类循环，然后按照您需要的方式解析内容/匹配的组。完成该部分后，您可以替换其他值或使用默认替换功能。

这种方法的唯一缺点是您必须为每个收件人重新创建邮件（即，您不能使用 群发邮件`MailDefinition`）。

# c# - 可以从 C# 类库返回 Json 数据

> ID：10512848
> 
> 赞同：0
> 
> 时间：2012-05-09T08:57:56.367
> 
> 标签：c#, jquery, asp.net-mvc, json, class-library

我正在创建一个需要将列表和 Json 数据返回到网页的报告。我正在使用多层应用程序。Web 项目是使用 MVC 创建的，但繁重的工作是在单独项目的类库中完成的。

我正在从类库将报表对象返回到我的控制器，但我想知道是否可以在模型中返回 Lists 和 Json 的混合？理想情况下，我希望报告模型类似于以下内容：

```
public class Report
{
    public List<TopSellers> TopSellers { get; set; }
    public List<MonthlySales> MonthlySales { get; set; }
    public Json ShopSales { get; set; }

} 
```

这样，列表内容可以正常呈现，但 jQuery 可以获取返回的 Json 以呈现我正在使用的图形。

这可能吗？

我试图声明它与此类似，但是我得到的唯一选择是'JsonReaderWriterFactory'。

到目前为止，我对 Json 的曝光是空的，所以如果有人可以帮助我，或者指出我正确的方向，我将非常感激！

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T09:01:17.067

您可以使用 JSON.net 库将您的对象序列化为 json 字符串并将其设置为您的 ShopSales 属性。

[http://json.codeplex.com/](http://json.codeplex.com/)

```
report.OriginalList = objectToSerialize;

var jsonStr = JsonConvert.Serialize(objectToSerialize);
report.ShopSales = jsonStr;

return report; 
```

在客户端上，您可以将 ShopSales 属性与 jQuery 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:04:33.843

我在这里看到的唯一方法（我也采用过一次）是在您的类库中创建一个**HTTP 处理程序，它拦截某些请求并将 JSON 直接写入响应（** [JSON.net](http://json.codeplex.com/)值得一看）。

除了 HTTP 处理程序，您还可以查看是否可以直接利用[内置的 ASP.net 路由机制](http://msdn.microsoft.com/en-us/library/cc668201.aspx)。

然后，您的类库必须添加为对前端项目（即 ASP.net MVC / WebForms）的引用，并且必须在那里注册处理程序。

# wordpress - wordpress 允许用户改变他们的角色

> ID：10512849
> 
> 赞同：0
> 
> 时间：2012-05-09T08:57:57.930
> 
> 标签：wordpress

我有一个正在开发的 wordpress 会员网站。

如果他们不再希望使用它，我希望能够让用户能够关闭那里的帐户。

我会使用 wp_delete_user 但我们希望保留用户的数据以供将来营销。

我的想法是让他们选择关闭那里的帐户，但是当这样做时，它实际上所做的只是将他们的角色更改为“待定”或类似的东西。

是否有我可以使用的 wordpress 功能/钩子允许用户在其个人资料区域的网站前端执行此操作？

干杯丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:18:23.353

设法弄清楚这一点，所以我想我会把它贴出来以防其他人有同样的问题：

```
<?php $user_id = $current_user->ID ; $new_role = 'pending'; wp_update_user( array ('ID' => $user_id, 'role' => $new_role ) ) ; ?> 
```

# jsfiddle - jsfiddle.net 和 html iframe（html textarea）

> ID：10512851
> 
> 赞同：2
> 
> 时间：2012-05-09T08:58:02.097
> 
> 标签：jsfiddle

从昨天开始，我无法在 jsfiddle 中读写 html，字段为空……我尝试使用 chrome、ff、safari，并在私有模式下得到相同的结果。我尝试对此进行谷歌搜索，但一无所获。我在 mac os x 10.6.8 上。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-10T11:01:18.773

[http://jsfiddle.net/E4mz9/25/](http://jsfiddle.net/E4mz9/25/)

他们说他们正在执行维护，这就是该框不可编辑的原因：

```
// Hi there,
//
// We're moving and improving the jsFiddle servers to create a better
// service for everyone.
//
// While that's happening - there is read only access only.
// You will be able to view fiddles but any editing will be lost.
//
// When migration of the site is complete, this temporary version of
// the database will be deleted to avoid misunderstandings. Your
// fiddles are safe, you just can't edit them right now.
//
// TL;DR
//   - jsFiddle is moving servers.
//   - For the next couple of hours:
//      - Save is disabled
//      - Registration is disabled
//
// Thanks for your patience,
//
// jsFiddle team.
//
// :D 
```

# xamarin.ios - 如何在 MvvmCross 中指定要作为模态推送的视图？

> ID：10512853
> 
> 赞同：4
> 
> 时间：2012-05-09T08:58:09.100
> 
> 标签：xamarin.ios, mvvmcross

我在使用 MvvmCross 框架的 MonoTouch 应用程序中有一个视图，我想显示模态 (NavigationController.PresentModalViewController)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T09:10:43.500

MvvmCross 从所有 ViewModel 只是“普通页面”的前提开始 - 所以在 iOS/MonoTouch 中，这意味着 UIViewControllers 使用 UINavigationController 呈现。

要摆脱这个前提——转向选项卡式显示、模式显示、拆分控制器、弹出窗口等——然后你可以在你的 MonoTouch 应用程序中调整 Presenter 逻辑。

演示者的工作是实现：

```
public interface IMvxTouchViewPresenter
{
    void Show(MvxShowViewModelRequest view);
    void Close(IMvxViewModel viewModel);
    void CloseModalViewController();
    void ClearBackStack();
    bool PresentModalViewController(UIViewController controller, bool animated);
    void NativeModalViewControllerDisappearedOnItsOwn();
} 
```

在 AppDelegate 构造中选择用于您的应用程序的演示者 - 例如，查看[TwitterSearch](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20TwitterSearch/TwitterSearch.UI.Touch/AppDelegate.cs)如何为 iPhone 和 iPad 构建不同的演示者。

* * *

幸运的是，对于简单的模态支持，可用的标准演示器之一是[MvxModalSupportTouchViewPresenter.cs](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/Touch/Views/Presenters/MvxModalSupportTouchViewPresenter.cs)

该演示者查看正在呈现的视图是否具有`IMvxModalTouchView`标记界面 - 它进行测试`view is IMvxModalTouchView`。如果存在此界面，则它使用模式表示视图而不是“正常导航”。

要使用它，请将您的 AppDelegate 代码更改为：

```
 public override bool FinishedLaunching(UIApplication app, NSDictionary options)
    {
        window = new UIWindow(UIScreen.MainScreen.Bounds);

        // initialize app for single screen iPhone display
        var presenter = new MvxModalSupportTouchViewPresenter(this, window);
        var setup = new Setup(this, presenter);
        setup.Initialize();

        // start the app
        var start = this.GetService<IMvxStartNavigation>();
        start.Start();

        window.MakeKeyAndVisible();

        return true;
    } 
```

然后将标记界面添加到您的模态视图中：

```
 public class MyView : MvxBindingTouchViewController<MyViewModel>, IMvxModalTouchView
 {
      // ....
 } 
```

# iphone - 如何使用 ASIFormDataRequest 压缩请求？

> ID：10512854
> 
> 赞同：0
> 
> 时间：2012-05-09T08:58:09.570
> 
> 标签：iphone, ios, ipad, asihttprequest

我正在尝试使用 ASIHttp 库从 iPad 应用程序向 Apache 服务器发送一些发布数据。

实际上我需要向服务器发送大量数据，这意味着我需要压缩请求正文，所以我编写了一些代码来发送数据并压缩请求但是服务器上没有收到任何参数！！！

iOS代码是：

```
 NSURL * URL = [NSURL URLWithString:myURL];  
        ASIFormDataRequest *ASIRequest = [ASIFormDataRequest requestWithURL:URL];
        ASIRequest.shouldCompressRequestBody=YES;
        ASIRequest setPostValue:data forKey:@"data"];
        [ASIRequest startSynchronous];
        NSError *error = [ASIRequest error];
        if (!error) {
            NSString *response = [ASIRequest responseString];
            NSLog(@"response %@" , response);
        } 
```

PS：如果我删除了 ASIRequest.shouldCompressRequestBody=YES; 一切正常，我可以看到数据，但是使用它时，我在服务器上什么也看不到

1.  请求可以在服务器上看到，但没有参数
2.  无法通过 GET 方法发送此类数据。
3.  服务器配置很好。

任何解决方案？任何评论或想法可以提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:12:27.937

默认情况下，大多数 Web 服务器不支持 POST 压缩。这里接受的答案很好地解释了它：[为什么浏览器不能发送 gzip 请求？](https://stackoverflow.com/questions/424917/why-cant-browser-send-gzip-request)

根据官方文档，此功能仅在 Apache 服务器上进行过测试。

编辑：

这是一个压缩实际发布数据的代码片段：

```
if ([self shouldCompressRequestBody]) {
    NSError *err = nil;
    NSData *compressedBody = [ASIDataCompressor compressData:[self postBody] error:&err];
    if (err) {
        [self failWithError:err];
        return;
    }
    [self setCompressedPostBody:compressedBody];
    [self setPostLength:[[self compressedPostBody] length]];
} 
```

来源：[http ://forums.three20.info/discussion/77/tturlrequest-vs-asihttprequest/p1](http://forums.three20.info/discussion/77/tturlrequest-vs-asihttprequest/p1)

# android - 带有透明背景的android书页滚动

> ID：10512856
> 
> 赞同：0
> 
> 时间：2012-05-09T08:58:15.547
> 
> 标签：android, android-widget

我想做一个如下图的书页滚动效果。

这是 Acer Liquid 中的待机屏幕。

它显示了一个可滑动的透明布局，上面有许多视图，左下角显示了书页卷起效果。滚动的角是可拖动且透明的。

如果我滑动视图，滚动的角会显示视图的透明移动。

这就是我不知道该怎么做。

我用截图位图滚动了角落。截取屏幕并将其卷起来......这就是我所做的。这意味着如果我滑动视图，滚动的角落不会改变......因为它是一张图片！

有人知道该怎么做吗？

![Acer Liquid e - 待机屏幕](../Images/e95ff3a68ffd55581e9dfe6d7b45cf29.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:22:52.307

您可以使用一个开源库。[https://github.com/harism/android_page_curl](https://github.com/harism/android_page_curl)

# php - php删除无效字符

> ID：10512857
> 
> 赞同：4
> 
> 时间：2012-05-09T08:58:20.273
> 
> 标签：php, regex, dom, character

当我使用`$dom->loadHTML('<?xml version="1.0" encoding="UTF-8"?>' . $html);`.

```
Warning: DOMDocument::loadHTML() [domdocument.loadhtml]: Char 0xD860 out of allowed range in Entity, line: 1 in D:\xampp\xampp\htdocs\xampp\similarity\functions.php on line 438
Warning: DOMDocument::loadHTML() [domdocument.loadhtml]: Char 0xDEE2 out of allowed range in Entity, line: 1 in D:\xampp\xampp\htdocs\xampp\similarity\functions.php on line 438
Warning: DOMDocument::loadHTML() [domdocument.loadhtml]: Invalid char in CDATA 0x3 in Entity, line: 1 in D:\xampp\xampp\htdocs\xampp\similarity\functions.php on line 438 
```

如何使用 php 定位和删除那些“无效”字符？

安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:23:01.900

未经测试，但这应该有效：

```
$buffer = ob_get_clean();
$tidy = new tidy();
$myHTML = $tidy->repairString('<?xml version="1.0" encoding="UTF-8"?>' . $html);

$dom->loadHTML($myHTML); 
```

# login - 使用spring security获取当前登录用户

> ID：10512858
> 
> 赞同：0
> 
> 时间：2012-05-09T08:58:25.957
> 
> 标签：login, spring-security, extjs4

我在我的 spring-extjs 应用程序中获取登录用户时遇到问题。我使用的是 spring security 2.0.4。这是我尝试过的详细信息。

控制器类：

```
@RequestMapping(value="/StaffingApplication/index.action", method = RequestMethod.GET)
public String printUser(ModelMap model) {
  Authentication auth = SecurityContextHolder.getContext().getAuthentication();
  String name = auth.getName(); //get logged in username    
  System.out.println(name);
  model.addAttribute("username", name);
  return "index.jsp";
} 
```

login.js 文件

```
var login = new Ext.FormPanel({
    labelWidth:80,
    url:'j_spring_security_check',
    frame:true,
    title:'Please Login',
    defaultType:'textfield',
    width:300,
    height:130,
    monitorValid:true,
    // Specific attributes for the text fields for username / password.
    // The "name" attribute defines the name of variables sent to the server.

    items:[{
        fieldLabel:'Username',
        name:'j_username',
        allowBlank:false
    },{
        fieldLabel:'Password',
        name:'j_password',
        inputType:'password',
        allowBlank:false
    }],

    // All the magic happens after the user clicks the button
    buttons:[{
        text:'Login',
        formBind: true,
        // Function that fires when user clicks the button
        handler:function(){
        login.getForm().submit({

            method:'POST', 

            // Functions that fire (success or failure) when the server responds.
            // The server would actually respond with valid JSON,
            // something like: response.write "{ success: true}" or

            // response.write "{ success: false, errors: { reason: 'Login failed. Try again.' }}"
            // depending on the logic contained within your server script.
            // If a success occurs, the user is notified with an alert messagebox,

            // and when they click "OK", they are redirected to whatever page
            // you define as redirect. 

            success:function(){
            Ext.Msg.alert('Status', 'Login Successful!', function(btn, text){
                if (btn == 'ok'){
                      window.location = 'index.action';
                }
            });

        },

        // Failure function, see comment above re: success and failure.
        // You can see here, if login fails, it throws a messagebox
        // at the user telling him / her as much.  

        failure:function(form, action){
            if(action.failureType == 'server'){
                obj = Ext.util.JSON.decode(action.response.responseText);

                Ext.Msg.alert('Login Failed!', obj.errors.reason);
            }else{
                Ext.Msg.alert('Warning!', 'Authentication server is unreachable : ' + action.response.responseText);
                //window.location='loginFailure.html'+action.response.responseText; 
            }
            login.getForm().reset();
        } 

        });
    }
    }]
}); 
```

在我的 jsp 页面上，我像这样访问它。

```
<div id="header" class="header">Options Staffing Application
    <div style="" id="user-status">
        <a href='<c:url value="j_spring_security_logout"/>'>Logout</a>
        <h3>Username : ${username}</h3>
    </div>
</div> 
```

但我只是得到一个空白代替用户名。当我尝试在控制器中打印它时，我得到了打印的值，但似乎没有显示在 jsp 页面上。通过其他线程但没有帮助。任何帮助将不胜感激

感谢萨钦的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:47:21.160

您不需要将用户名放入对象模型中，因为您可以像在控制器类中那样从 jsp 访问它：

```
<h3>Username <%=SecurityContextHolder.getContext().getAuthentication().getName(); =></h3> 
```

甚至更好：

```
<h3>Username <sec:authentication property="name" /></h3> 
```

但我不确定您是否可以在 Spring Security 2 中使用该标记库

# objective-c - GHUnit 在 iOS 项目中转换为 ARC 后给出 allocate_pages() 错误

> ID：10512863
> 
> 赞同：2
> 
> 时间：2012-05-09T08:58:46.497
> 
> 标签：objective-c, ios, automatic-ref-counting, gh-unit

我最近将我的 iOS 项目转换为 ARC。我的项目中有两个目标。一个是应用程序本身，另一个是一组 GHUnit 测试。我有大约 200 个测试，它们在创建和修改 Core Data 对象方面做了很多工作。测试使用的核心数据存储是内存存储，一旦测试完成就会被丢弃（即它不会在任何地方持久化）。

当我的测试已经运行了一段时间（在抛出错误之前它们永远不会到达完全相同的点，但它总是围绕相同的测试）应用程序崩溃并出现 EXC_BAD_ACCESS（代码=2，地址=...）

控制台中的输出如下： ![控制台输出](../Images/93873f705f9cb9bed03115105888cc8b.png)

我已按照[此答案中](https://stackoverflow.com/a/10249362/525448)的说明进行操作，并将我的 GHUnit 目标的 main.m 文件设置为使用`-fno-objc-arc`编译器标志，但这似乎没有帮助。

我真的不明白这些错误是什么意思，搜索它们似乎没有帮助。我唯一的猜测是我的内存不足，但我不确定为什么或如何，考虑到 ARC 应该为我释放对象。

我真的很感谢任何人可以给我解决这个问题的任何帮助！如果您有任何问题，请给我留言，我会尽快回复您！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:15:11.613

克里斯，

首先，由于您有内存耗尽问题，您应该查看在 Instruments 分配工具下运行的测试。记得开启虚拟机自动快照。然后你应该在测试执行时多次标记堆。

其次，虽然这可能与 ARC 有关，但很可能不是。一般来说，ARC 应用程序由于可以更快地自动释放对象，因此比 MRR 应用程序占用的空间更小。迁移到具有不同选项的新编译器可能只是发现了一个预先存在的问题。

第三，因为您使用的是内存数据库，所以我的第一个测试是将其更改为 SQLite 数据库。它的占用空间要小得多。（虽然您可能会选择稍后返回到内存 DB，但我们正在尝试找出内存耗尽的原因。内存 DB 可以使用大量 RAM。因此，让我们考虑一下。

完成上述第 1 项和第 3 项任务后，请报告您的结果。

安德鲁

# xml - Powershell 中的 CSV 到 XML

> ID：10512866
> 
> 赞同：0
> 
> 时间：2012-05-09T08:59:15.730
> 
> 标签：xml, powershell, csv

我在将 CSV 文件写入 XML 时遇到问题。

CSV 文件

```
[Folder];;;;;
[Folder\Subfolder1];;;;;
[Folder\Subfolder1\Subfolder2];;;;;
"Descriptive stuff";"its a password";"user or something";"a URL";"if anyone has a comment"
[Folder\Subfolder1\Subfolder3];;;;;
"Descriptive stuff";"its a password";"user or something";"a URL";"if anyone has a comment" 
```

XML 输出

```
 <?xml version="1.0" encoding="utf-8"?>
<PASSWORDFILE xmlns="http://www.password-depot.de/schemas/passwordfile/6.0/passwordfile.xsd">
    <PASSWORDS>
        <GROUP NAME="Folder">
            <GROUP NAME="Subfolder1">
                <GROUP NAME="Subfolder2">
                    <ITEM>
                        <DESCRIPTION>Descriptive stuff</DESCRIPTION>
                        <PASSWORD>its a password</PASSWORD>
                        <USERNAME>user or something</USERNAME>
                        <URL>a URL</URL>
                        <COMMENT>if anyone has a comment</COMMENT>
                    </ITEM>
                </GROUP>
                <GROUP NAME="Subfolder3">
                    <ITEM>
                        <DESCRIPTION>Descriptive stuff</DESCRIPTION>
                        <PASSWORD>its a password</PASSWORD>
                        <USERNAME>user or something</USERNAME>
                        <URL>a URL</URL>
                        <COMMENT>if anyone has a comment</COMMENT>
                    </ITEM>
                </GROUP>
            </GROUP>
        </GROUP>
    </PASSWORDS>
</PASSWORDFILE> 
```

我的问题只是，我不知道在使用后如何关闭 GROUP 标签。目前，我只是在 XML 的最后关闭 GROUP 标记，从而形成一棵巨大的树。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:43:14.743

首先，您的文本不是 CSV，但是如果您使用这种格式固定，您肯定可以通过编写自定义 DLL 转换为 XML。您只需要了解 CSV 文件的详细信息，然后使用 XElement/XAttribute 创建 XML。

我只是使用以下代码转换为 DLL，然后另存为 XML（请注意，XML 创建代码是绑定下面链接中提供的 CSV 文件：

[http://msdn.microsoft.com/en-us/library/bb387090.aspx](http://msdn.microsoft.com/en-us/library/bb387090.aspx)

这是我的自定义 DLL 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Xml.Linq;

namespace CSVtoXML
{
public class Actions
 {
    public Actions()
    {

    }

    public static void convertCSVtoXML(string csvPath)
    {

        string[] source = File.ReadAllLines(csvPath);
        XElement cust = new XElement("Root",
            from str in source
            let fields = str.Split(',')
            select new XElement("Customer",
                new XAttribute("CustomerID", fields[0]),
                new XElement("CompanyName", fields[1]),
                new XElement("ContactName", fields[2]),
                new XElement("ContactTitle", fields[3]),
                new XElement("Phone", fields[4]),
                new XElement("FullAddress",
                    new XElement("Address", fields[5]),
                    new XElement("City", fields[6]),
                    new XElement("Region", fields[7]),
                    new XElement("PostalCode", fields[8]),
                    new XElement("Country", fields[9])
                )
            )
        ); 
        cust.Save("result.xml");
    }
 }
} 
```

以下是我在 powershell 中使用此 DLL 的方式：

*   PS> [Reflection.Assembly]::LoadFile(“CSVtoXML.dll”)
*   PS> [CSVtoXML.Actions]::convertCSVtoXML("data.csv")

这将生成“Result.xml”

# c# - C#.Net 中的文件复制

> ID：10512868
> 
> 赞同：2
> 
> 时间：2012-05-09T08:59:37.527
> 
> 标签：c#, .net

我正在尝试构建一个复印机，以便您使用 openFileDialog 选择一个文件，然后使用 folderBrowserDialog 选择要将其复制到的位置。

我遇到的问题是，当我使用 File.Copy(copyFrom,copyTo) 时，它给了我一个无法复制到目录的异常。

无论如何，这是否存在，或者我只是错过了一些愚蠢和愚蠢的东西。我已经尝试使用 openFD 来选择这两个位置，并且刚刚尝试使用 folderBD 来查看它是否有所作为。

我知道那里应该有 if 语句来捕获异常，但这是开始工作的代码的粗略草案。

提前感谢您的帮助，附上代码。

```
 // Declare for use in all methods
    public string copyFrom;
    public string copyTo;
    public string rootFolder = @"C:\Documents and Settings\cmolloy\My Documents";

    private void btnCopyFrom_Click(object sender, EventArgs e)
    {
        // uses a openFileDialog, openFD, to chose the file to copy
        copyFrom = "";

        openFD.InitialDirectory = rootFolder;
        openFD.FileName = "";

        openFD.ShowDialog();

        // sets copyFrom = to the file chosen from the openFD
        copyFrom = openFD.FileName;

        // shows it in a textbox
        txtCopyFrom.Text = copyFrom;
    }

    private void btnCopyTo_Click(object sender, EventArgs e)
    {
        //uses folderBrowserDialog, folderBD, to chose the folder to copy to
        copyTo = "";

        this.folderBD.RootFolder = System.Environment.SpecialFolder.MyDocuments;
        this.folderBD.ShowNewFolderButton = false;
        folderBD.ShowDialog();
        DialogResult result = this.folderBD.ShowDialog();

        // sets copyTo = to the folder chosen from folderBD
        copyTo = this.folderBD.SelectedPath;

        //shows it in a textbox.
        txtCopyTo.Text = copyTo;
    }

    private void btnCopy_Click(object sender, EventArgs e)
    {
        // copys file
        File.Copy(copyFrom, copyTo);
        MessageBox.Show("File Copied"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:01:20.303

您必须将文件名附加到目录路径。做这个：

```
string destinationPath = Path.Combine(copyTo, Path.GetFileName(copyFrom));
File.Copy(copyFrom, destinationPath); 
```

（这样，您会将所选文件复制到与原始文件同名的另一个目录，如果该目录中已存在相同的文件，则会引发异常）

**编辑**
旁注：不要在源代码中硬编码路径，使用这个：

```
rootFolder = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments) 
```

获取当前用户的文档文件夹的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:04:47.870

做这个：

```
File.Copy(copyFrom, Path.Combine(copyTo, Path.GetFileName(copyFrom))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:02:33.190

File.Copy 需要知道你想要的新文件的完整路径，包括文件名。如果您只想使用相同的文件名，可以使用它来将文件名附加到路径：

```
copyTo = Path.Combine(copyTo, Path.GetFileName(copyFrom)); 
```

# java - 将其写入文本文件后出现意外字符

> ID：10512869
> 
> 赞同：0
> 
> 时间：2012-05-09T08:59:39.283
> 
> 标签：java, file, fileoutputstream

当我尝试从文档中获取文本时，如果它后跟一些特殊字符，例如 TM 或 C（用于版权）等，在将其写入文本文件后，它会添加一些意想不到的内容。例如，我们可以考虑以下内容：

如果我们有`Apache™ Hadoop™!`，然后如果我们尝试写入文本，`FileOutputStream`那么结果将是这样`Apacheâ Hadoopâ`的，这`â`对我来说是无意义的，通常我想要一种方法来检测文本中的这些字符并跳过它们来编写它们，有没有解决方案到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:19:04.243

原因是字符编码问题。在将字符串写入文件之前，您需要对字符串字符进行编码。
你可以使用如下：

```
 Writer out = new OutputStreamWriter(new FileOutputStream(   
                        new File("D://helloWorld.txt")), "UTF8");
    String tm ="Apache™ Hadoop™";
    out.write(tm);
    out.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:04:56.073

我最初误读了这个问题，没有注意到你想跳过它们。我暂时把它留在这里，如果有人发布更好的东西，我会删除它。

* * *

要正确处理字符，您可以将字符集显式设置为 ISO-8859-1。为此，您需要使用类似`OutputStreamWriter`.

```
final OutputStreamWriter writer;

writer = new OutputStreamWriter(new FileOutputStream(file),
                                Charset.forName("ISO-8859-1"));
writer.write(string);
writer.close(); 
```

这不会跳过它们，但应该正确编码它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:23:25.740

如果您只想要可打印的 ASCII 范围，那么逐个字符地迭代您的字符串以构建一个新字符串。仅当字符在 to 范围内时才包含该`0x20`字符`0x7E`。

```
final StringBuilder buff = new StringBuilder();
for (char c : string.toCharArray())
{
  if (c >= 0x20 && c <= 0x7E)
  {
    buff.append(c);
  }
}

final FileWriter w = new FileWriter(...);
w.write(buff.toString());
w.close(); 
```

如果要保留回车和换行符，还需要考虑`0x0A`and `0x0D`。

# c - C：#define 指令是全球性的吗？

> ID：10512870
> 
> 赞同：15
> 
> 时间：2012-05-09T08:59:53.483
> 
> 标签：c

我对`#define`陈述有些困惑。在库中，它们似乎是一种跨不同文件的通信方式，有很多`#ifdef`s 和`#ifndef`s。

话虽如此，我现在有两个文件`file1.c`并`file2.c`一起编译，`#define TEST 10`里面有`file2.c`. 然而，当我在编译器`TEST`内部使用时`file2.c`，会出现以下错误消息：

```
'TEST' undeclared (first use in this function) 
```

`#define`指令是全球性的吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-09T09:02:02.160

`#define`s 不是全局的，它们只是使用它们的地方的替换（如果在同一个编译单元中声明）

它们**不是**全局变量，它们**不是**符号，它们与链接**无关**，它们仅在**预编译**时相关。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-09T09:26:22.407

`#define`d 宏是全局的，因为它们不遵循正常的 C 范围规则。宏的文本替换将（几乎）应用于宏名称*出现*在其`#define`. （值得注意的例外是宏名称是注释的一部分或字符串文字的一部分。）

如果您在头文件中定义宏，则该头文件的任何文件`#include`都将继承该宏（无论是否需要），除非该文件随后使用`#undef`.

在您的示例中，`file2.c`不了解`TEST`宏。`#define`它怎么会知道从哪里取货`file1.c`？用魔法？由于宏对源代码执行文本替换，因此在生成的目标文件中没有它们的表示。`file2.c`因此需要知道替换规则本身，如果你想在多个文件之间共享它，它`#define`需要存在于你的文件的公共头文件`.c`中`#include`。

如果您特别询问`#ifdef`您在库中看到的 s 有多少工作，其中许多可能会检查编译环境提供的*预定义*宏名称。例如，C99 编译器定义了一个`__STDC_VERSION__`指定语言版本的宏；Microsoft 编译器定义了一个`_MSC_VER`宏。（通常这些预定义的宏以前导下划线开头，因为这些名称是为编译器保留的。）

此外，大多数编译器允许将简单的宏定义为命令行参数。例如，您可以通过`gcc -DNDEBUG file1.c`to compile `file.c`with `NDEBUG`defined to disable编译您的代码`assert`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-12T13:59:22.367

以防有人稍后阅读此内容，并添加一些实用信息：

*   一些环境，如 atmel、vs 或 iar，允许您定义全局 #define 指令。它们基本上以某种命令行格式将这些定义的值传递给预编译器。
*   您可以在批处理命令或 makefile 等中执行相同的操作。
*   Arduino 总是在所有编译中添加一个板变体（通常位于 hardware\arduino\variants）。此时，您可以创建一个包含全局定义指令的新板，并以这种方式使用它。例如，您可以在包含一些调试指令的原始 mega2560 之外定义一个 mega2560（调试）板。您将在“boards.txt”中添加对该变体的引用，方法是复制粘贴一些文本并正确修改它。

归根结底，您将不得不以一种或另一种方式将该全局 hfile 或全局指令提供给编译器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T09:29:13.370

你应该制作一个 file1.h 并将你的定义放在那里。然后在file2.c

```
#include "file1.h" 
```

像馅饼一样容易:)

# objective-c - 编辑时更改 returnButton 将键盘冻结 1 次

> ID：10512880
> 
> 赞同：5
> 
> 时间：2012-05-09T09:00:32.770
> 
> 标签：objective-c, ios, uitextfield

我正在为我的应用程序制作一个登录屏幕，当有一个尚未填写的字段时，我希望返回按钮说“下一步”，并且当所有字段都已填写时它会说“开始”（我说的是UITextFields）。

下面的代码运行良好，因为它在正确的时刻显示 Next 和 Go。但是，每当它从“下一步”变为“开始”时，键盘上的下一次点击就会被忽略。当它说“Go”并且我通过退格清空文本字段时，没有这样的问题，它应该显示 Next。几乎就像旧键盘仍然存在并在被点击后消失一样。

我的问题是：这个问题的根源是什么，更重要的是我如何摆脱键盘的冻结？

```
UITextField *theSender = (UITextField *)sender;
if (allTextFieldsAreFilled) {
    if (theSender.returnKeyType!=UIReturnKeyGo) {
        theSender.returnKeyType = UIReturnKeyGo;
        [theSender resignFirstResponder];
        [theSender becomeFirstResponder];
    }
} else {
    if (theSender.returnKeyType!=UIReturnKeyNext) {
        theSender.returnKeyType = UIReturnKeyNext;
        [theSender resignFirstResponder];
        [theSender becomeFirstResponder];
    }
} 
```

每次更改三个 UITextField 之一的值时都会调用此代码，因此它是一个连接到 Editing Changed 事件的 IBAction。

在此先感谢您的帮助！

**编辑**

我发现只有当文本字段设置为安全（密码）时才会发生这种情况。当它未设置为安全时，它不会冻结，我的代码可以完美运行！问题是“开始”按钮的更改通常会在“安全”文本字段是第一响应者时发生。所以这不会改变任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:27:51.767

我创建了一个新的*Single View Application*项目来测试它；并在`ViewController.m`

```
#import "ViewController.h"

@interface ViewController () <UITextFieldDelegate>
{
    @private
    IBOutlet UITextField* m_fieldA;
    IBOutlet UITextField* m_fieldB;
    IBOutlet UITextField* m_fieldC;
}

@end

@implementation ViewController

// connected to Editing Did Begin
- (IBAction) onFocus:(UITextField*)_textField
{
    [self updateKeyboardFor:_textField];
}

// connected to Editing Changed
- (IBAction) onChanged:(UITextField*)_textField
{
    [self updateKeyboardFor:_textField];
}

- (void) updateKeyboardFor:(UITextField*)_textField
{
    bool allTextFieldsAreFilled = [m_fieldA.text length] && [m_fieldB.text length] && [m_fieldC.text length];

    if (allTextFieldsAreFilled)
    {
        if (_textField.returnKeyType != UIReturnKeyGo)
        {
            _textField.returnKeyType = UIReturnKeyGo;
            //[_textField resignFirstResponder];
            //[_textField becomeFirstResponder];
            [_textField reloadInputViews];
        }
    }
    else
    {
        if (_textField.returnKeyType != UIReturnKeyNext)
        {
            _textField.returnKeyType = UIReturnKeyNext;
            //[_textField resignFirstResponder];
            //[_textField becomeFirstResponder];
            [_textField reloadInputViews];
        }
    }
}

// A part of UITextFieldDelegate
- (BOOL) textFieldShouldReturn:(UITextField*)_textField
{
    if (_textField.returnKeyType == UIReturnKeyGo)
    {
        [_textField resignFirstResponder];

        // go off and perform 'go'
    }
    else
    {
        if(_textField == m_fieldA) [m_fieldB becomeFirstResponder];
        if(_textField == m_fieldB) [m_fieldC becomeFirstResponder];
        if(_textField == m_fieldC) [m_fieldA becomeFirstResponder];
    }

    return true;
}

@end 
```

然后在 XIB 中创建三个`UITextFields`并将它们连接到`IBOutlets`, `IBActions`，并将此视图控制器设置`delegate`为所有字段。

~~无论安全领域如何，一切似乎都可以正常工作。~~

~~我的猜测是您的问题出在您移至“下一个”字段的代码中；而不是在您发布的代码中。还要确保您的所有网点和代表都正确连接。~~

* * *

**更新**：我已经编辑了上面的代码。注释掉的行是问题所在，您应该使用它`reloadInputViews`来更新按钮。

似乎它没有锁定键盘；但它所做的是在您输入第一个字母并发出辞职/成为电话以刷新按钮之后，第二次按下将覆盖第一次。这似乎是 iOS 中的一个错误……如果在第一个字母后键入空格，则更明显。当我注意到我添加了一个标签，该标签使用密码字段的内容更新了它的内容时，发生了什么就更加清楚了。

# iphone - 通过代码访问 iphone 联系人列表中每个联系人的所有电子邮件 ID

> ID：10512883
> 
> 赞同：0
> 
> 时间：2012-05-09T09:00:46.797
> 
> 标签：iphone

我是 iphone 的新手。目前我正在从事项目工作，但由于不知道如何通过编码从 iphone 联系人列表中访问每个联系人的所有电子邮件 ID，因此我在项目中间遇到了麻烦。如果有人知道这一点概念你能帮我吗....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:03:20.130

此代码也为您提供电子邮件以及他们的显示名称和联系人姓名
-(NSMutableArray*)getEmailAndPhoneOfPhoneContacts {

```
 NSLog(@"getPhoneContacts");

    NSAutoreleasePool *pool= [[NSAutoreleasePool alloc] init];

    NSMutableArray *tempArray=[[NSMutableArray alloc] init];
    ABAddressBookRef iPhoneAddressBook=ABAddressBookCreate();
    if(!iPhoneAddressBook)
    {
        DLog(@"unable to open addressBook");
    }
    //ABPerson *newPerson;

    NSAutoreleasePool *innerPool=nil;

    CFArrayRef allPeople=ABAddressBookCopyArrayOfAllPeople(iPhoneAddressBook);
    NSMutableArray *peopleArray=[NSMutableArray  arrayWithArray:(NSMutableArray*)allPeople];

    BOOL shouldReleasePool=NO;

    NSInteger i;

    for(i=0;i<[peopleArray count];i++)
    {

        if((i&255)==0)
        {
            innerPool= [[NSAutoreleasePool alloc] init];
            shouldReleasePool=YES;
        }

        ABRecordRef record=[peopleArray objectAtIndex:i];

        Contact *objPhoneContact=[[Contact alloc] init];
        objPhoneContact.contactType=STATIC_CONTACT;

    CFStringRef prefixName=ABRecordCopyValue(record, kABPersonPrefixProperty);
    CFStringRef firstName=ABRecordCopyValue(record, kABPersonFirstNameProperty);
    CFStringRef middleName=ABRecordCopyValue(record, kABPersonMiddleNamePhoneticProperty);
    CFStringRef lastName=ABRecordCopyValue(record, kABPersonLastNameProperty);
    CFStringRef suffixName=ABRecordCopyValue(record, kABPersonSuffixProperty);
    NSMutableString *contactname =[[NSMutableString alloc] init];

    // concating all the names
    if (prefixName) {
        [contactname appendString:[NSString stringWithString:(NSString*)prefixName]];
        CFRelease(prefixName);
    }
    if (firstName) {
        [contactname appendString:[NSString stringWithString:(NSString*)firstName]];
        CFRelease(firstName);
    }
    if (middleName) {
        [contactname appendString:[NSString stringWithString:(NSString*)middleName]];
        CFRelease(middleName);
    }
    if (lastName) {
        [contactname appendString:[NSString stringWithString:(NSString*)lastName]];
        CFRelease(lastName);
    }
    if (suffixName) {
        [contactname appendString:[NSString stringWithString:(NSString*)suffixName]];
        CFRelease(suffixName);
    }
    // if emty then get the organization property
    if (contactname == nil || [contactname length]<1) {
        CFStringRef orgName=ABRecordCopyValue(record, kABPersonOrganizationProperty);
        if (orgName) {
            [contactname appendString:[NSString stringWithString:(NSString*)orgName]];
            CFRelease(orgName);
        }

    }
    //if still empty then assign (no name) to it
    if (contactname == nil || [contactname length]<1)
        [contactname setString:@"(no name)"];

        objPhoneContact.mContactName = [contactname stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];

        [contactname release];
        contactname = nil;
        ABMutableMultiValueRef multi;
        int multiCount=0;

        multi=ABRecordCopyValue(record,kABPersonEmailProperty);

        NSUInteger emailIndex_home=301;
        NSUInteger emailIndex_work=321;
        NSUInteger emailIndex_other=341;  //~400

        multiCount=ABMultiValueGetCount(multi);
        if(multiCount ==0)
        {
            //objPhoneContact.mEmailId=@"";
        }
        else 
        {
            for( int i=0; i < multiCount; i++)
            {
                ContactProperty* objEmailContactProperty=[[ContactProperty alloc] init];

                objEmailContactProperty.mContactPropertyString=(NSString*)ABMultiValueCopyValueAtIndex(multi, i);
                objEmailContactProperty.mDisplayName=(NSString*)ABMultiValueCopyLabelAtIndex(multi, i);
                objEmailContactProperty.mDisplayName=[objEmailContactProperty.mDisplayName stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"_$!<>"]];

                if([objEmailContactProperty.mDisplayName caseInsensitiveCompare:@"home"]==NSOrderedSame)
                {
                    objEmailContactProperty.mContactPropId=emailIndex_home;
                    emailIndex_home++;
                }
                else if([objEmailContactProperty.mDisplayName caseInsensitiveCompare:@"work"]==NSOrderedSame)
                {
                    objEmailContactProperty.mContactPropId=emailIndex_work;
                    emailIndex_work++;
                }
                /*
                 else if([objEmailContactProperty.mDisplayName caseInsensitiveCompare:@"other"]==NSOrderedSame)
                 {
                 objEmailContactProperty.mContactPropId=[NSString stringWithFormat:@"%d",emailIndex_other];
                 emailIndex_other++;
                 }
                 */
                else 
                {
                    objEmailContactProperty.mContactPropId=emailIndex_other;
                    emailIndex_other++;
                }

                objEmailContactProperty.mContactDataType=@"Email";

                [objPhoneContact.mPropertyArray addObject:objEmailContactProperty];
                [objEmailContactProperty release];
            }
        }

        if(multi)
            CFRelease(multi);

        [tempArray addObject:objPhoneContact];
        [objPhoneContact release];

        if(shouldReleasePool)
        {
            [innerPool drain];
            shouldReleasePool=NO;
        }

    }
    self.mPhoneContactArray=tempArray;
    CFRelease(iPhoneAddressBook);
    CFRelease(allPeople);

    [pool drain];
    return [tempArray autorelease];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:14:08.443

确保导入这两个文件：

```
#import <AddressBook/AddressBook.h>
#import <AddressBookUI/AddressBookUI.h>

-(IBAction)showPeoplePickerController
{

    ABAddressBookRef addressBook = ABAddressBookCreate();

    CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressBook);
    CFIndex nPeople = ABAddressBookGetPersonCount(addressBook);
    [menuArray removeAllObjects];
    if(menuArray ==nil)
        menuArray = [[NSMutableArray alloc] init];

    for (int i = 0; i < nPeople; i++) 
    {
        NSMutableDictionary *localDic=[[NSMutableDictionary alloc]init];
        ABRecordRef ref = CFArrayGetValueAtIndex(allPeople, i);

        ABRecordID recordId = ABRecordGetRecordID(ref);
        [localDic setObject:[NSString stringWithFormat:@"%d",recordId] forKey:@"Record_Id"];

        //get firstname
        CFStringRef firstName = ABRecordCopyValue(ref, kABPersonFirstNameProperty);
        [localDic setObject:[NSString stringWithFormat:@"%@",firstName] forKey:@"first_name"];

        //get lastname
        CFStringRef lastName = ABRecordCopyValue(ref, kABPersonLastNameProperty);
        [localDic setObject:[NSString stringWithFormat:@"%@",lastName] forKey:@"last_name"];

        NSString *contactFirstLast = [NSString stringWithFormat: @"%@ %@",firstName,lastName];
        [localDic setObject:contactFirstLast forKey:@"FullName"];

        //get EmailIds
        ABMutableMultiValueRef EmailIds = ABRecordCopyValue(ref, kABPersonEmailProperty);
        CFTypeRef EmailId;
        NSString *EmailLabel;

        for (CFIndex i = 0; i < ABMultiValueGetCount(EmailIds); i++) {
            EmailLabel=[NSString stringWithFormat:@"%@",ABMultiValueCopyLabelAtIndex(EmailIds,i)];

            if([EmailLabel isEqualToString:@"_$!<Home>!$_"])
            {
                EmailId = ABMultiValueCopyValueAtIndex(EmailIds,i);
                [localDic setObject:[NSString stringWithFormat:@"%@",EmailId] forKey:@"Email_Home"];

            }
            else if([EmailLabel isEqualToString:@"_$!<Work>!$_"])
            {
                EmailId = ABMultiValueCopyValueAtIndex(EmailIds,i);
                [localDic setObject:[NSString stringWithFormat:@"%@",EmailId] forKey:@"Email_Work"];
                break;
            }
        }

        [menuArray addObject:localDic];

    }
    NSLog(@"%@",menuArray);

} 
```

通过这种方式，您可以获得每个人的所有 EmailId。

并在您的项目中添加这两个框架：

```
AddressBook.framework
AddressBookUI.framework 
```

# asp.net-mvc - 如何在我的 GET 操作方法中使用 viewmodel 属性而不将其填充到 MVC 中的 POST 操作方法中？

> ID：10512886
> 
> 赞同：1
> 
> 时间：2012-05-09T09:01:05.063
> 
> 标签：asp.net-mvc, asp.net-mvc-3, viewmodel

我的 GET 操作方法中有这两行：

```
var model = new CreateNKIphase1ViewModel();
model.SubjectTypeName = goalcard.SubjectType.Name; 
```

在我看来，我正在这样做并将其用于 IF 语句。这就是为什么我有这个 ViewModel 属性。我不想在我的 POST 操作方法中填写我的 Model.SubjectTypeName。但是当我调试并尝试发布我的表单时，我收到以下错误，它指向我在 Model.SubjecTypeName 上的 if 语句。

你调用的对象是空的。

任何类型的解决方案都值得赞赏。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:11:21.680

我之前遇到过这个问题，我通过在我的发布操作中重定向到另一个视图来解决它。将您的`Post`重定向到另一个视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:39:03.070

一种优雅的方法是从绑定中忽略此属性。如下所示在您的 Post 操作方法中

```
[HttpPost]
public ActionResult Save([Bind(Exclude= "SubjectTypeName")] CreateNKIphase1ViewModel model)
{
 ....
} 
```

# android - 在 Android 中，如何在不获取之前的订单商品的情况下将已订购商品入围？

> ID：10512888
> 
> 赞同：1
> 
> 时间：2012-05-09T09:01:06.730
> 
> 标签：android, listview

在我的应用程序中，当我选择要订购的商品时，所选商品会在已订购页面中入围。当我单击“订购”按钮时，选定的项目将存储在数据库中。这里的问题是当我选择一个项目并再次订购时，如果我选择要订购的项目，以前订购的项目也会在“已订购”页面中列入候选名单。请帮我解决这个问题。

```
public class SelectedItem extends Activity {
    private ListView lv;
    private CustomAdapter adapter;
    int tableid;
    String id;
    ArrayList<String> arr = new ArrayList<String>();
    ArrayList<String> price = new ArrayList<String>();
    ArrayList<Bitmap> image = new ArrayList<Bitmap>();
    Double amountvalue;
    TextView totalamount;
    Button order;
    String dtotalamount;

    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        arr = getIntent().getStringArrayListExtra("itemname");
        price = getIntent().getStringArrayListExtra("itemprice");

        image = getIntent().getExtras().getParcelableArrayList("itemimage");

        setContentView(R.layout.selecteditem);
        lv = (ListView) findViewById(R.id.selecteditemlist);
        adapter = new CustomAdapter(this, arr, price, image);
        lv.setAdapter(adapter);
        amountvalue = CustomAdapter.x;

        System.out.println(amountvalue);
        totalamount = (TextView) findViewById(R.id.amount);
        totalamount.setText(String.valueOf(amountvalue));
        order = (Button) findViewById(R.id.order);
        order.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                try {
                    tableid = Login.tableid;
                    id = Integer.toString(tableid);
                    System.out.println(id);
                    String x = amountvalue.toString();
                    System.out.println(x);
                    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                    nameValuePairs
                            .add(new BasicNameValuePair("tableid", id));
                    nameValuePairs.add(new BasicNameValuePair(
                            "totalamount", amountvalue.toString()));
                    nameValuePairs.add(new BasicNameValuePair("itemnames",
                            arr.toString()));
                    nameValuePairs.add(new BasicNameValuePair("price",
                            price.toString()));
                    System.out.println(arr.toString());
                    System.out.println(price.toString());
                    HttpClient httpclient = new DefaultHttpClient();
                    HttpPost httppost = new HttpPost("http://...........");

                    httppost.setEntity(new UrlEncodedFormEntity(
                            nameValuePairs));
                    HttpResponse response = httpclient.execute(httppost);
                    HttpEntity entity = response.getEntity();
                    Toast.makeText(getApplicationContext(),
                            "Saved Sucessfully", Toast.LENGTH_SHORT).show();
                    String responseBody = EntityUtils.toString(response
                            .getEntity());
                    System.out.println("Responce is :: " + responseBody);
                    lv.clearTextFilter();

                } catch (Exception e) {
                    // TODO: handle exception
                    Toast.makeText(getApplicationContext(),
                            "Network Error", 3000).show();
                }
            }
        });
    }
} 
```

# ms-media-foundation - 如何在 MFT 中输出 PCM 数据

> ID：10512889
> 
> 赞同：0
> 
> 时间：2012-05-09T09:01:09.850
> 
> 标签：ms-media-foundation, windows-media-player

现在我已经在媒体基础中创建了一个 ogg 解码器。

我已将 ogg 数据解码为 IMFTransform::ProcessOutput 中的 PCM 数据。

但我无法播放 PCM 数据，那么现在如何播放 pcm 数据？

这是我的 ProcessOutput 代码：

```
HRESULT OggDecoder:: ProcessOutput( 
DWORD dwFlags, DWORD cOutputBufferCount,
MFT_OUTPUT_DATA_BUFFER  *pOutputSamples, // one per stream
DWORD *pdwStatus  )
{   
   if (dwFlags != 0)
    {
        return E_INVALIDARG;
    }

    if (pOutputSamples == NULL || pdwStatus == NULL)
    {
        return E_POINTER;
    }

    // Must be exactly one output buffer.
    if (cOutputBufferCount != 1)
    {
        return E_INVALIDARG;
    }

    // It must contain a sample.
    if (pOutputSamples[0].pSample == NULL)
    {
        return E_INVALIDARG;
    }

    EnterCriticalSection(&m_critSec);

    HRESULT hr = S_OK;
    DWORD cbData = 0;

    IMFMediaBuffer *pOutput = NULL;

    // If we don't have an input sample, we need some input before
    // we can generate any output.
    if (!HasPendingOutput())
    {
        hr = MF_E_TRANSFORM_NEED_MORE_INPUT;
    }

    // Get the output buffer.

    if (SUCCEEDED(hr))
    {
        hr = pOutputSamples[0].pSample->GetBufferByIndex(0, &pOutput);
    }

    if (SUCCEEDED(hr))
    {
        hr = pOutput->GetMaxLength(&cbData);
    }

    if (SUCCEEDED(hr))
    {
                    BYTE* pPCM=NULL;
                    pOutputBuffer->Lock(&pPCM,NULL,NULL);
                    GetPCMData(&pPCM); // decode audio data here
                    pOutputBuffer->SetCurrentLength(nLength);
                    pOutputSamples[0].pSample->SetSampleTime(sampleTime);
                    pOutputSamples[0].pSample->SetSampleDuration(sampleDuration);
                    pOutputBuffer->Unlock();
    }

    SafeRelease(&pOutput);
    LeaveCriticalSection(&m_critSec);
    return hr;
} 
```

我是否遗漏了什么或这段代码有什么问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:56:16.567

如果使用 topoedit.exe 进行调试，它可以自动添加一个重采样器 DMO，这是一个用于将 pcm 转换为浮点格式的 DMO。您可以编写播放器应用程序，并自己创建拓扑，然后添加 resamplyer dmo 节点。

# iphone - UITableView 到 UIScrollView

> ID：10512894
> 
> 赞同：0
> 
> 时间：2012-05-09T09:01:20.350
> 
> 标签：iphone, ios, xcode

```
if ([cell.imageView.image isEqual:[UIImage imageNamed:@"1.png"]]) {
// Do something 1
} else {
// Do something 2
} 
```

此代码可以转换为 UIIScrollView 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:04:38.213

这取决于，你是否有一个指向你想要与之合作的滚动视图内的项目的指针。如果是这样，您可以像这样更改它（假设滚动视图的所有子视图都是 UIImageViews）：

```
for (int i = 0; i < [scrollView.subviews count]; i++) {
    UIImageView *imageView = [scrollView.subviews objectAtIndex:i];

    if ([imageView.image isEqual:[UIImage imageNamed:@"1.png"]]) {
        // Do something 1
    } else {
        // Do something 2
    }
} 
```

# jquery - jQuery触发鼠标点击

> ID：10512897
> 
> 赞同：0
> 
> 时间：2012-05-09T09:01:39.713
> 
> 标签：jquery, triggers

我有标签设置，悬停动画。我想要做的是在 mouseOut 上，触发单击具有“home”类的选项卡。

我当前的 jQuery 如下：

```
$('div.vertical_tabs ul.st_tabs li a').hover(
        function() {
            $(this).trigger('click');
        }, function() {
            $(this).trigger('click');
}); 
```

我想在 mouseOut 上触发的类是：**div.vertical_tabs ul.st_tabs li a.home**

这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:04:53.837

Hiya**演示** [http://jsfiddle.net/g97D8/](http://jsfiddle.net/g97D8/) **或** [http://jsfiddle.net/g97D8/1/](http://jsfiddle.net/g97D8/1/)

对于鼠标移出，您可以使用`mouseout`事件。

如果我遗漏了什么，请告诉我。

**jQuery代码**

```
$('.tag').mouseout(function() {
         alert('foo');
            $('.tag1').trigger('click');

});​ 
```

# c# - 使用 jquery Post 将数组传递给控制器

> ID：10512898
> 
> 赞同：1
> 
> 时间：2012-05-09T09:01:42.130
> 
> 标签：c#, javascript, jquery, asp.net-mvc-3

```
var sc = new Array();
var i =0;
el.find(".colorable").each(function () {
    sc[i++] = $(this).attr("src");
});
$.post("/Edit/ChangeImageColor", { src : sc , s: source, t: target }, function () {
    alert("done");
}); 
```

我正在尝试将数组传递`( sc )`给服务器，但它在 src 中显示为 null

```
 public JsonResult ChangeImageColor(string[] src, string s, string t)
    { 
```

谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:16:02.273

如果您使用的是 ASP.NET MVC 3，您可以将其作为 JSON 请求发送：

```
var sc = new Array();
var i = 0;
el.find(".colorable").each(function () {
    sc[i++] = $(this).attr("src");
});
$.ajax({
    url: '/Edit/ChangeImageColor',
    type: 'POST',
    contentType: 'application/json',
    data: JSON.stringify({ src: sc, s: source, t: target }),
    success: function() {
        alert("done");
    }
}); 
```

如果您使用的是旧版本的 ASP.NET MVC，您可以查看[以下博客文章](http://haacked.com/archive/2010/04/15/sending-json-to-an-asp-net-mvc-action-method-argument.aspx)，该文章说明了如何集成自定义 json 提供程序工厂，允许您将 JSON 请求发送到控制器操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:00:09.103

尝试如下更改您的操作方法

```
 public JsonResult ChangeImageColor(IEnumerable<string> src, string s, string t)
{ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:09:24.053

尽管您的（可能是服务器端）参数传递错误，我认为您可能会发现这很有用：

```
var sc = el.find(".colorable").map(function() {
    return this.src;
}).get(); 
```

这是收集数组中一组元素的属性的一种更简单的方法。

# objective-c - 客观的c正则表达式

> ID：10512899
> 
> 赞同：1
> 
> 时间：2012-05-09T09:01:45.110
> 
> 标签：objective-c, regex

我在读取字符串的图像路径时遇到问题 -> background-image:url(/assets/test.jpg)

我想让括号内的字符串没有括号self。

这是我使用的代码：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\bbackground-image:url\(.*\)\\b" options:NSRegularExpressionCaseInsensitive error:nil];

        thumbnail = [regex stringByReplacingMatchesInString:thumbnail options:0 range:NSMakeRange(0, [thumbnail length]) withTemplate:@"$1"]; 
```

我得到的是（/assets/test.jpg）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:20:24.783

使用以下模式来获得预期的结果：

```
background-image:url\\((.*)\\) 
```

应用于您的代码：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"background-image:url\\((.*)\\)" options:NSRegularExpressionCaseInsensitive error:nil]; 
```

使用它，结果将是“/assets/test.jpg”，就像你想要的那样。

你的代码应该给你一个关于“\(”的未知转义序列的警告。你必须使用“\\(”来转义一个“(”。还要去掉开头和结尾的“\\b”你的模式。

但请注意，这种模式仅在您的字符串仅包含“background-image:url(somevaluehere)”时才有效

编辑：

\\b 是什么意思？

\\b 是单词边界，通常表示为\b。在 NSString 中，您需要编写 \\b 因为您需要转义 \，因此它将被视为真正的反斜杠。

这里有一些关于单词边界匹配的信息：

> 有资格作为单词边界的三个不同位置：
> 
> *   在字符串的第一个字符之前，如果第一个字符是单词字符。
> *   在字符串的最后一个字符之后，如果最后一个字符是单词字符。
> *   在字符串中的两个字符之间，其中一个是单词字符，另一个不是单词字符。
> 
> 简单地说：\b 允许您使用 \bword\b 形式的正则表达式执行“仅整个单词”搜索。“单词字符”是可用于构成单词的字符。所有不是“单词字符”的字符都是“非单词字符”。

取自[http://www.regular-expressions.info/wordboundaries.html](http://www.regular-expressions.info/wordboundaries.html)

我希望这能澄清一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:20:36.457

我相信您应该将您的正则表达式更改为`\\bbackground-image:url\((.*)\)\\b`. 我在 .* 周围添加了 () 来捕捉你想要的匹配。

# c# - 实体框架代码优先默认命名约定列表

> ID：10512900
> 
> 赞同：9
> 
> 时间：2012-05-09T09:01:49.770
> 
> 标签：c#, entity-framework

我正在尝试查找Entity Framework 的默认**命名约定的****示例**列表。我收集表是 例如用户...外键是 User_Id 但我想查看所有开箱即用约定的列表 - IE 什么实体框架将调用我的对象。**`<Entity>+s`**

 ****我不是在寻找**约定的类型——我明白了。我正在寻找 Entity Framework 的**默认约定**将命名我的数据库对象的定义/示例。需要明确的是，我没有添加或删除任何约定。EF 带有许多用于生成数据库对象的默认约定——我想知道 EF 的开箱即用默认约定将如何命名我的数据库对象。

我需要这个的原因是因为虽然我使用的是 CodeFirst，但我将手动创建我的数据库对象，而不是让 EntityFramework 为我生成它（我的同事坚持这样做）。因此我需要知道我应该为我的表、列、外键命名什么......以便实体框架无需显式映射即可找到/映射它们。

例如

```
EF Default TableName Convention
      <Entity> + 's' (e.g ***Users***) 

EF Default Foreign Key Convention
      <Entity> + 'Id' (e.g ***UserId***)   

EF Default Primary Key Convention
      ***Id*** 
```

我在哪里可以找到这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T09:20:33.320

EF 不提供检索所使用的约定集的机制。你只能[删除](http://msdn.microsoft.com/en-us/library/gg679253%28v=vs.103%29.aspx)预先配置的约定。

您可以在以下位置找到记录在案的约定列表[您可以在MSDN](http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.conventions%28v=vs.103%29.aspx)

最初 EF 允许您自定义约定，但现在该部分已从 API 中删除。

**编辑**

```
Convention: Table Name
Default: Entity + s (e.g Users) 
```

[复数表名约定](http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.conventions.pluralizingtablenameconvention%28v=vs.103%29.aspx)

```
Convention: Foreign Key Relation
Default: Entity + Id (e.g UserId) 
```

[NavigationPropertyNameForeignKeyDiscoveryConvention](http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.conventions.navigationpropertynameforeignkeydiscoveryconvention%28v=vs.103%29.aspx)

```
Convention: Primary Key
Default: Id 
```

[IdKeyDiscovery 约定](http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.conventions.idkeydiscoveryconvention%28v=vs.103%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T01:01:23.817

Maybe the [System.Data.Entity.ModelConfiguration.Conventions](http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.conventions.aspx) namespace is what you're looking for.
This namespace contains all naming conventions.**

# javascript - 用 Raphael.js 听右键单击 svg 元素

> ID：10512902
> 
> 赞同：11
> 
> 时间：2012-05-09T09:02:01.333
> 
> 标签：javascript, svg, raphael

当用户右键单击使用 Rapahel.js 创建的元素时，我需要做出响应。我读到您应该只附加一个单击事件处理程序，然后确定用户单击了哪个鼠标按钮。我不能让它工作。

```
<!DOCTYPE html>
<html>
<head>
<script src="http://raphaeljs.com/raphael.js"></script>
<script>
    window.onload = function() {
       var r = Raphael('demo', 640, 480);
       r.rect(10, 10, 400, 400).attr({fill: 'red'}).click(function(){
          alert('test');
       });;
    };
</script>
</head>
<body>
    <div id="demo"></div>
</body>
</html> 
```

只有单击鼠标左键时才会显示警告框。关于单击右键时如何显示警告框的任何建议？

我用 jQuery 看到了这个小技巧：

```
$(r.rect(10, 10, 400, 400).attr({fill: 'red'}).node).bind('contextmenu', function(){
            alert('test');
        }); 
```

但也阅读了关于它的[评论](http://groups.google.com/group/raphaeljs/browse_thread/thread/d38ede7e6918e0f1?pli=1)：

> 是的，这也有效，但仅适用于 jQuery，而且最好不要使用 .node，因为 Raphael 有时会重新创建节点 - 所以你会丢失事件处理程序。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T12:43:58.250

您可以使用`mousedown`和测试`e.which`. 这适用于 FF 和 Chrome：

```
var r = Raphael('demo', 640, 480);
r.rect(10, 10, 400, 400).attr({fill: 'red'}).mousedown(function(e){
    if (e.which == 3)
        alert("hi")
}); 
```

对于跨浏览器解决方案，您可能还想看看`e.button`：
[http ://www.quirksmode.org/js/events_properties.html#button](http://www.quirksmode.org/js/events_properties.html#button)

# sql - 如何在表中插入混合查询

> ID：10512905
> 
> 赞同：3
> 
> 时间：2012-05-09T09:02:06.117
> 
> 标签：sql, ms-access, join, insert

我正在尝试执行一个复杂的问题，我的查询结构如下：

```
Select 
       (
        SELECT     a.CD_MAD, b.* FROM 
                                  (
                                   SELECT '0' & [CD_SOC] & [CT_OPR] & [CD_MVT] & [CT_MVT] & [CD_RGL_FIN] & [CD_MODEPAIE] AS p, 
                                          [table3].CD_MAD FROM table3
                                  )  AS a 
        RIGHT JOIN (
                    SELECT trim([CODECIE]) & trim([TPOPER]) & trim([MVNT]) & trim([TPMVNT]) & trim([MODEPAIE]) & trim([MODEPAIE1]) AS p, 
                           tbl1.CODEENR, tbl1.CODECIE, tbl1.TPOPER, tbl1.MVNT,
                           tbl1.TPMVNT, tbl1.DTCOMPT, tbl1.DTDEBEF, tbl1.SIGNE,
                           tbl1.TTTCF, tbl1.TTTCG, tbl1.DEVISEF, tbl1.DEVISEG,
                           tbl1.CODEPDT, tbl1.NOCTR, tbl1.NOPIECE, tbl1.CATMIN, 
                           tbl1.NOCPT, tbl1.MODEPAIE, tbl1.THTF, tbl1.THTG, 
                           tbl1.TAXE_F, tbl1.TAXE_G, tbl1.FRAC, tbl1.APPORT, 
                           tbl1.VENDEUR, tbl1.MODEPAIE1, tbl1.TPEVNT, 
                           tbl1.FAITGEN, tbl1.DTSURV, tbl1.DURPR, tbl1.NOPIECE1,
                           tbl1.ANNEE, tbl1.MNTCOMCO, tbl1.MNTCOMAP, tbl1.ID 
                   FROM    tbl1
                  )  AS b ON b.p=a.p
        ); 
```

该查询基本上在两个现有表的两个子集之间创建连接，而无需通过临时表的构建（这是我的目标！）；该查询工作得很好。但现在我想将查询结果插入表中；我已经尝试过“插入”语句，但似乎失败了；特别是在执行 insert into 语句时，我用来创建查询的别名“a”和“b”似乎无法识别。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:44:35.560

```
INSERT INTO table (user, column1, column2) 
SELECT      a.CD_MAD, b.* FROM 
                               (
                                SELECT '0' & [CD_SOC] & [CT_OPR] & [CD_MVT] & [CT_MVT] & [CD_RGL_FIN] & [CD_MODEPAIE] AS p, 
                                       [table3].CD_MAD FROM table3
                               )  AS a 
RIGHT JOIN (
            SELECT trim([CODECIE]) & trim([TPOPER]) & trim([MVNT]) & trim([TPMVNT]) & trim([MODEPAIE]) & trim([MODEPAIE1]) AS p, 
                   tbl1.CODEENR, tbl1.CODECIE, tbl1.TPOPER, tbl1.MVNT,
                   tbl1.TPMVNT, tbl1.DTCOMPT, tbl1.DTDEBEF, tbl1.SIGNE,
                   tbl1.TTTCF, tbl1.TTTCG, tbl1.DEVISEF, tbl1.DEVISEG,
                   tbl1.CODEPDT, tbl1.NOCTR, tbl1.NOPIECE, tbl1.CATMIN, 
                   tbl1.NOCPT, tbl1.MODEPAIE, tbl1.THTF, tbl1.THTG, 
                   tbl1.TAXE_F, tbl1.TAXE_G, tbl1.FRAC, tbl1.APPORT, 
                   tbl1.VENDEUR, tbl1.MODEPAIE1, tbl1.TPEVNT, 
                   tbl1.FAITGEN, tbl1.DTSURV, tbl1.DURPR, tbl1.NOPIECE1,
                   tbl1.ANNEE, tbl1.MNTCOMCO, tbl1.MNTCOMAP, tbl1.ID 
             FROM  tbl1
              )  AS b ON b.p=a.p; 
```

基本上摆脱第一个括号并选择应该会有所帮助

# objective-c - 将图片上传到我的应用

> ID：10512908
> 
> 赞同：0
> 
> 时间：2012-05-09T09:02:11.533
> 
> 标签：objective-c, xcode, ipad

我正在为 iPad 设计一个新的应用程序。此应用程序将与条形码扫描仪一起使用，当它扫描代码时，它将显示相关的图像。

我正在考虑将条形码与图像名称相关联，例如： - 条形码 09090909 将显示 09090909.png 图片 - 条形码 19191919 将显示 19191919.png 图片....

我认为这没有问题，但是当我需要向应用程序添加新的条形码/图片时，问题就来了。如何将新图片发送到我的应用程序？我看到当你在 XCode 上开发并构建你的 App 时，所有的数据都会进入 de App。

任何帮助或线索？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:27:36.090

您可以简单地从服务器上即时加载它们，但随后需要网络连接。要从服务器异步加载它们，您可以使用以下代码：

```
dispatch_queue_t image_queue = dispatch_queue_create("com.company.app.imageQueue", NULL);
dispatch_queue_t main_queue = dispatch_get_main_queue();

dispatch_async(image_queue, ^{
  NSString *URLString = @"http://example.com/images/19191919.png";
  NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:URLString];
  UIImage *image = [UIImage imageWithData:imageData];
  dispatch_async(main_queue, ^{
    [imageView setImage:image];
  });
}); 
```

如果你愿意，你也可以将图片保存到缓存目录（不推荐使用文档目录，因为它会与[Apples iOS Data Storage Guidelines](https://developer.apple.com/icloud/documentation/data-storage/)冲突）并在下载图像之前检查两次，那么代码将如下所示：

```
NSString *fileName = @"19191919.png";
NSString *URLBaseString = @"http://example.com/images/";
NSString *URLString = [URLBaseString stringByAppendingString:fileName];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *cachePath = [paths  objectAtIndex:0];
NSString  *dataPath = [cachePath stringByAppendingPathComponent:fileName];
NSFileManager *fileManager = [NSFileManager defaultManager];

if ( [fileManager fileExistsAtPath:dataPath] )
{
   UIImage *image = [UIImage imageWithContentsOfFile:dataPath];
   [imageView setImage:image];
}
else
{
  dispatch_async(image_queue, ^{
    NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:URLString];
    UIImage *image = [UIImage imageWithData:imageData];
    [UIImagePNGRepresentation(image) writeToFile:dataPath atomically:YES];
    dispatch_async(main_queue, ^{
      [imageView setImage:image];
    });
  });
} 
```

**此代码尚未经过测试，但应该可以工作。请注意，我依靠 ARC 来管理内存。**

# c# - 如何在没有循环的情况下读取可枚举而不丢失其范围？

> ID：10512909
> 
> 赞同：0
> 
> 时间：2012-05-09T09:02:15.953
> 
> 标签：c#, scope, ienumerable

我正面临一个非常奇怪的结构。一旦枚举结束，IEnumerable 中返回的 Foo 类型就会丢失其数据。这意味着我不能进行 enumeration.First() 因为数据会立即丢失。

对其进行循环有效，但因为我知道它只会包含一个奇怪的元素。

```
int Test(out int something)
    IEnumerable<Foo> enumeration = ...
    for (var foo in enumeration) {
        something = foo.GetSomething ();
        return foo.GetAnInt ();
    }
    something = 42;
    return 0;
} 
```

我想到的另一种方法是滥用 Linq Select，但这同样可怕。

有没有办法解决这个限制？解决根本原因显然是优越的，但在这种情况下很难。

**编辑：**`IEnumerable<IDataRecord>`它来自`yield returned`事务 SQL 数据阅读器。

```
public IEnumerable<IDataRecord> ExecuteReader (SqlCommand cmd)
{
    using (var con = GetConnection()) {
        con.Open ();

        using (var tr = con.BeginTransaction ()) {
            cmd.Connection = con;

            var reader = cmd.ExecuteReader ();
            while (reader.Read ()) {
                yield return reader;
            }

            tr.Commit ();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T09:41:45.310

问题是您的`ExecuteReader`方法确实只是返回`SqlDataReader`本身（实现`IDataRecord`），而不是返回数据块。所以当你这样做时：

```
var list = ExecuteReader(...).ToList(); 
```

在这种情况下，列表的所有元素都将是同一个`SqlDataReader`实例，但在`ToList`执行之后，阅读器已关闭。我有点惊讶你没有得到`ObjectDisposedException`.

为此，您需要在`IDataRecord`. 您认为可以迭代数据记录中的元素。另一种选择是将其更改`ExecuteReader`为以下内容：

```
public IEnumerable<T> ExecuteReader<T>(SqlCommand cmd, 
    Func<IDataRecord, T> recordCreator)
{
    using (var con = GetConnection()) {
        con.Open ();

        using (var tr = con.BeginTransaction()) {
            cmd.Connection = con;

            var reader = cmd.ExecuteReader();
            while (reader.Read()) {
                yield return recordCreator(reader);
            }

            tr.Commit();
        }
    }
} 
```

这样，您可以执行以下操作：

```
var list = ExecuteReader(command, record => new
{
    Item1 = record.GetInt("id"),
    Item2 = record.GetString("name")
}); 
```

注意：我不确定您为什么需要为此进行交易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:25:29.060

怎么样

```
int Test(out int something)
{
    IEnumerable<Foo> enumeration = ...
    var values = enumeration
        .Select(foo => new
                {
                    something = foo.GetSomething(),
                    anInt = foo.GetAnInt()
                })
        .FirstOrDefault();
    if (values != null)
    {
        something = values.something;
        return values.anInt;
    }
    else
    {
        something = 42;
        return 0;
    }
} 
```

`GetSomething`并且`GetAnInt`在枚举内部被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:34:26.757

另一个想法可能是将方法的结果类型从 IEnumerable 转换为 IEnumerator。这样，范围控制就容易多了，而且返回单个结果也不需要任何（假）循环。

**编辑：**我想我找到了一种重构整个问题的方法。这通过使用包含以前在方法中找到的逻辑的新的一次性类来规避最初的问题。它非常易读，甚至更少的代码。

```
public TransactedConnection GetConnection (string text)
{
    return new TransactedConnection (_ConnectionString, text);
}

public class TransactedConnection : IDisposable
{
    private readonly SQLiteCommand _Cmd;
    private readonly SQLiteConnection _Con;
    private readonly SQLiteTransaction _Tr;

    public TransactedConnection (string connection, string text)
    {
        _Cmd = new SQLiteCommand (text);
        _Con = new SQLiteConnection (connection);
        _Con.Open ();
        _Cmd.Connection = _Con;
        _Tr = _Con.BeginTransaction ();
    }

    public void Dispose ()
    {
        _Tr.Commit ();
        _Tr.Dispose ();
        _Con.Dispose ();
        _Cmd.Dispose ();
    }

    public SQLiteParameterCollection Parameters
    {
        get
        {
            return _Cmd.Parameters;
        }
    }

    public int ExecuteNonQuery ()
    {
        return _Cmd.ExecuteNonQuery ();
    }

    public object ExecuteScalar ()
    {
        return _Cmd.ExecuteScalar ();
    }

    public SQLiteDataReader ExecuteReader ()
    {
        return _Cmd.ExecuteReader ();
    }
}

public void Test (string match)
{
    var text = "SELECT * FROM Data WHERE foo=@bar;";

    using (var cmd = GetConnection (text)) {
        cmd.Parameters.Add ("@bar", DbType.String).Value = match;

        using (var reader = cmd.ExecuteReader ()) {
            while (reader.Read ()) {
                Console.WriteLine (reader["foo"]);
            }
        }
    }
} 
```

# c# - 带有 get 属性的 vala 接口 - 编译错误

> ID：10512910
> 
> 赞同：3
> 
> 时间：2012-05-09T09:02:19.837
> 
> 标签：c#, vala

我对[Vala](https://live.gnome.org/Vala/Tutorial#Interfaces)比较陌生，我正在尝试手动将一些 C# 代码移植到 vala 中，我从一个简单的示例开始对其进行测试。

C# 编码人员会将下面的代码片段识别为与 C# 的 1-1 映射。

这是测试 vala 文件 Universe.vala：

```
namespace Universe
{
    public interface Planet
    {
        string Name { get; }
    }
} 
```

我得到编译错误：

> Universe.vala：错误：属性获取器必须有一个主体

Vala 似乎不支持接口中的 get(set)ter 属性——或者我错过了什么？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:16:58.300

在 Vala 中，接口仍然可以包含非抽象属性和方法（但没有变量）。这意味着如果你想定义一个抽象属性或方法，你仍然需要使用`abstract`关键字，就像在抽象类中一样。

由于您没有在`abstract`此处使用关键字，因此编译器认为您正在尝试定义非抽象属性。然而，接口中的非抽象属性需要显式主体（因为默认实现需要使用变量，这是不允许的）。这就是为什么错误消息抱怨缺少正文的原因。

只需添加`abstract`关键字，它就可以正常工作。

# objective-c - UINavigationController 的 addChildViewController 和 topViewController 之间的相互作用

> ID：10512911
> 
> 赞同：4
> 
> 时间：2012-05-09T09:02:22.457
> 
> 标签：objective-c, ios, cocoa-touch, uinavigationcontroller

我有一个类似于模态视图控制器的东西，我需要显示在我的其他视图控制器上方。我没有使用常规的模态控制器功能（`presentViewController:`和朋友），因为我需要更好地控制该过程。相反，我使用的是视图控制器包含功能（`addChildViewController:`方法组）。

包含功能使代码相当简单。当我需要呈现“模态”视图控制器时，我将它作为子视图添加到视图控制器层次结构中，一切都按预期工作。一个小问题是常规视图控制器包装在导航控制器中。因此，我必须将模态控制器添加为导航控制器的子节点，否则它将被导航栏和工具栏覆盖。

现在的问题是调用`addChildViewController:`导航控制器也会将新控制器设置为`topViewController`，就好像控制器是使用常规`pushViewController:`方法推送的一样。这意味着当模态控制器显示时，它下面的常规控制器不会收到外观和旋转回调。

这感觉像是一个错误，还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:39:46.200

我有同样的问题。我通过编写自己的自定义视图控制器解决了这个问题，其中包含一个`UINavigationController`（通过添加`addChildViewController:`），然后将其公开`UINavigationController`为只读属性。然后，您可以将模态视图控制器添加为新自定义视图控制器的子级，而不是`UINavigationController`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:17:44.540

我错过了文档中的这句话`addChildViewController:`

> 此方法仅供自定义容器视图控制器的实现调用。

所以我想这是我的错，根本不支持这种情况。这很糟糕，因为将任何模态事物设计为常规视图控制器并将它们像适当的一等公民一样连接到层次结构非常方便。我可能不得不自己重写导航控制器以获得对此的内置支持。

# javascript - 从设置中将 Javascript 注入 UIWebView 时，我只得到数字？

> ID：10512915
> 
> 赞同：0
> 
> 时间：2012-05-09T09:02:34.173
> 
> 标签：javascript, iphone, ios, uitextfield, settings

好的，这里，

这个我觉得解释起来很复杂，但是如果你想测试一下我想说的话，我已经附上了这个项目:-)

我有 1 个应用程序 - 2 个视图。1 个带有本地 html 文件的 UIWebView 和一个表单 1 个 ViewController 带有 2 个按钮和 2 个标签以与视图交互，然后 2 个标签显示按下按钮时的结果。

现在，当我使用该方法`stringByEvaluatingJavaScriptFromString`并在设置包中设置要导入的内容时，我只能注入数字，当我在设置应用程序中设置字母时，它们不会被注入。但是，当我直接从应用程序注入它时，没有问题。

在视图控制器上，我可以检索字母和数字。

这会让我相信问题出在`stringByEvaluatingJavaScriptFromString`方法上。

现在我不确定错误出在哪里，因为使用该注入方法并在 ViewController 中设置字母或文本可以正常工作。

我需要 webView，但是从设置包中提取内容时，它只会显示 textField 中的数字。但是，如果您查看控制台，您会看到字母和数字正在被识别。

如果我遗漏了任何内容，我很乐意提供任何其他详细信息。请如果有人愿意下载该项目并查看一下，看看我想说的话是否有意义，我将不胜感激。

它是用 5.1 SDK 编写的

亲切的问候，杰夫

[下载项目](http://dl.dropbox.com/u/61711378/Field_testing.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:01:53.273

好的，拔掉我所有的头发后，我找到了答案：

```
%@", field01]; 
```

我有上面的代码，但由于某种原因，它只允许通过数字或者它们可能是整数，没有字母被允许通过，但它们是标签。

所以我将硬编码字符串与我需要的动态字符串进行了比较，并注意到它们的硬编码字符串的值介于 ' & ' 之间，所以我将 %@ 放在它们之间，它解决了问题。

所以`'%@'", field01];`解决了这一切:-)

干杯

# matlab - 在 Matlab 中删除尾随零并使用 6 个小数点

> ID：10512918
> 
> 赞同：2
> 
> 时间：2012-05-09T09:02:43.990
> 
> 标签：matlab, printing, printf

我希望在我的 fprintf 中使用 %f 和 %g 的某种组合。如果有 6 个小数不为零，我希望删除尾随零并使用 6 个小数点。%g 删除零，但这里的精度不影响小数点的数量。该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:16:15.720

因此，如果这是您想要的行为：

0.123456789 -> 0.123457（四舍五入到小数点后第 6 位）

999.123456789 -> 999.123457（小数点后六位，与有效数字位数无关）

1.123000000 -> 1.123（删除尾随零）

那么你可以使用 %f:

```
fprintf('%.6f', number); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:58:28.263

您可以使用`%.<n>g`，其中 n 定义要使用的最大位数。

```
>> fprintf('%.6g\n', 4087.145678);
4087.15

>> fprintf('%.6g\n', 45.2);
45.2 
```

# macos - Mac Sandbox：测试文件是否可访问

> ID：10512920
> 
> 赞同：10
> 
> 时间：2012-05-09T09:02:49.767
> 
> 标签：macos, cocoa, mac-app-store, sandbox

有谁知道是否有办法找出在沙箱下是否可以访问特定文件系统位置？

我想测试在正常的 Powerbox 规则下是否可以访问特定文件；已经使用打开/保存对话框等添加到电源盒中。

我可以在触发沙盒异常**之前执行此操作吗？**

我可以**捕获**沙盒异常吗？

最好的祝福，

坦率

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T10:46:57.830

您可以使用 OS`access()`系统调用进行快速简单的测试，来自`man access`：

> #include <unistd.h>
> 
> int access(const char *path, int amode);
> 
> access() 函数检查由 path 命名的文件的可访问性，以获得 amode 指示的访问权限。amode 的值是要检查的访问权限（R_OK 表示读取权限，W_OK 表示写入权限，X_OK 表示执行/搜索权限）或存在性测试 F_OK 的按位或。检查路径名路径的所有组件的访问权限（包括 F_OK）。
> 
> 如果找不到路径或任何所需的访问模式不会被授予，则返回 -1 值并设置全局整数变量 errno 以指示错误。否则，返回 0 值。

您可以使用以下内容为 Objective-C 美化这个：

```
typedef enum
{
   ReadAccess = R_OK,
   WriteAccess = W_OK,
   ExecuteAccess = X_OK,
   PathExists = F_OK
} AccessKind;

BOOL isPathAccessible(NSString *path, AccessKind mode)
{
   return access([path UTF8String], mode) == 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-10T05:37:18.597

一些东西。当您需要路径字符串时，请始终使用 fileSystemRepresentation。此外，如果您只想知道指定路径的沙箱中是否存在漏洞，R_OK 就足够了。

```
-(BOOL)isAccessibleFromSandbox:(NSString*)path
{
    return( access( path.fileSystemRepresentation, R_OK) == 0 );
} 
```

# c# - 为什么我的数据库导航按钮在 C# 中不起作用？

> ID：10512923
> 
> 赞同：1
> 
> 时间：2012-05-09T09:02:57.577
> 
> 标签：c#, winforms, methods, parameters, dataset

我有一个简单的表单，它连接到访问数据库并显示记录，这段代码显示了发生了什么，为什么我试图编码的按钮不起作用？我猜它与我没有正确清除的变量有关？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;
namespace MediaPlayer
{
public partial class Media : Form
{

    // Use this connection string if your database has the extension .accdb
    private const String access7ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\MediaDatabase.accdb";
    // Use this connection string if your database has the extension .mdb
    private const String access2003ConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory|\MediaDatabase.mdb";

    // Data components
    private OleDbConnection myConnection;
    private DataTable myDataTable;
    private OleDbDataAdapter myAdapter;
    private OleDbCommandBuilder myCommandBuilder;

    // Index of the current record
    private int currentRecord = 0;

    private void FillDataTable(String selectCommand)
    {
        try
        {
            myConnection.Open();
            myAdapter.SelectCommand.CommandText = selectCommand;
            // Fill the datatable with the rows reurned by the select command
            myAdapter.Fill(myDataTable);
            myConnection.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error in FillDataTable : \r\n" + ex.Message);
        }
    }

    private void DisplayRow(int rowIndex)
    {
        // Check that we can retrieve the given row
        if (myDataTable.Rows.Count == 0)
            return; // nothing to display
        if (rowIndex >= myDataTable.Rows.Count)
            return; // the index is out of range

        // If we get this far then we can retrieve the data
        try
        {
            DataRow row = myDataTable.Rows[rowIndex];
            textBox1.Text = row["FilePath"].ToString();
            textBox2.Text = row["Subject"].ToString();
            textBox3.Text = row["Title"].ToString();
            textBox4.Text = row["Keywords"].ToString();
            textBox5.Text = row["MediaType"].ToString();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error in DisplayRow : \r\n" + ex.Message);
        }

    }

    public Media()
    {
        InitializeComponent();

    }

    private void Form1_Load(object sender, EventArgs e)
    {
        {
            String command = "SELECT * FROM Media";
            try
            {
                myConnection = new OleDbConnection(access7ConnectionString);
                myAdapter = new OleDbDataAdapter(access7ConnectionString, myConnection);
                myCommandBuilder = new OleDbCommandBuilder(myAdapter);
                myDataTable = new DataTable();
                FillDataTable(command);
                DisplayRow(currentRecord);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }

        }

    }

    int m_rowPosition = 0; 

    private void label2_Click(object sender, EventArgs e)
    {

    }

    private void button2_Click(object sender, EventArgs e)
    {
        //if not at the first row, go back one row and show the record.
        if (m_rowPosition !=0)
        {
            m_rowPosition---;
            this.DisplayRow();
        }
    }

    private void button6_Click(object sender, EventArgs e)
    {
        //move to first row of data and show data
        m_rowPosition = 0;
        this.DisplayRow();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:10:55.947

如果我明白你想在调用 DisplayRow 方法时这样做：

```
DisplayRow(m_rowPosition); 
```

或者您可以将方法更改为：

```
private void DisplayRow()
{
    // Check that we can retrieve the given row
    if (myDataTable.Rows.Count == 0)
        return; // nothing to display
    if (rowIndex >= myDataTable.Rows.Count)
        return; // the index is out of range

    // If we get this far then we can retrieve the data
    try
    {
        DataRow row = myDataTable.Rows[m_rowPosition];//<- here you using index which value is changed on button click
        textBox1.Text = row["FilePath"].ToString();
        textBox2.Text = row["Subject"].ToString();
        textBox3.Text = row["Title"].ToString();
        textBox4.Text = row["Keywords"].ToString();
        textBox5.Text = row["MediaType"].ToString();
    }
    catch (Exception ex)
    {
        MessageBox.Show("Error in DisplayRow : \r\n" + ex.Message);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:05:30.450

这正在讨论

[为什么我的按钮在 c# 应用程序中不起作用](https://stackoverflow.com/questions/10514161/why-arent-my-buttons-working-in-c-sharp-application)

# python - Python：“foo() for i in range(bar)”是什么意思？

> ID：10512925
> 
> 赞同：16
> 
> 时间：2012-05-09T09:03:09.603
> 
> 标签：python

以下语句在 Python 中究竟是什么意思？

```
randrange(10**10) for i in range(100) 
```

我知道这`randrange`是一个随机数生成器，但无法真正弄清楚该语句的效果。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-09T09:05:57.277

你发布它的方式，它是一个[`SyntaxError`](http://docs.python.org/library/exceptions.html#exceptions.SyntaxError)。
但我猜该声明在里面`[]`。然后它是一个[**列表推导**](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)，它创建一个包含 100 个随机数的列表。它等效于以下代码：

```
whatever = []
for i in range(100):
    whatever.append(randrange(10**10)) 
```

如果代码在里面`()`而不是`[]`它，那将是一个[**生成器表达式**](http://docs.python.org/reference/expressions.html#generator-expressions)，即一个迭代，其项目不是立即创建而是按需创建。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-09T09:06:14.460

就其本身而言，这将是一个语法错误。括在括号中，它是一个[生成器表达式](http://docs.python.org/reference/expressions.html#generator-expressions)：

```
(randrange(10**10) for i in range(100)) 
```

返回一个生成器，该生成器将产生 100 次调用的结果`randrange(10**10)`，一次调用一次。

在方括号内，它是一个[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
[randrange(10**10) for i in range(100)] 
```

返回一个由 100 个号码组成的列表，这些号码来自对`randrange(10**10)`每个号码的调用。

生成器表达式优于列表推导式的优点是它的评估是惰性的，因此您不必构建整个列表并将其保存在内存中（这与非常大的、可能无限的生成器尤其相关）。

# arrays - 在特定属性上过滤对象数组的有效方法？

> ID：10512926
> 
> 赞同：1
> 
> 时间：2012-05-09T09:03:11.133
> 
> 标签：arrays, actionscript-3, flash

我有一组具有不同属性的对象，我需要以不重复特定属性的方式过滤数组。

例如：

```
var array:Array = [{foo:"a1", bar:"b1", baz:"c1"},
                   {foo:"a2", bar:"b2", baz:"c2"},
                   {foo:"a3", bar:"b1", baz:"c3"},
                   {foo:"a1", bar:"b4", baz:"c2"},
                   {foo:"a0", bar:"b3", baz:"c1"}]; 
```

现在假设我想过滤属性上的对象`baz`。过滤数组的最有效方法是什么，以便`baz`在操作后没有两个元素具有相同的值？

在我的示例中，结果应仅包含：

```
var result:Array = [{foo:"a1", bar:"b1", baz:"c1"},
                    {foo:"a2", bar:"b2", baz:"c2"},
                    {foo:"a3", bar:"b1", baz:"c3"}] 
```

因为其他对象将具有该`baz`属性的重复条目。

结果数组的顺序并不重要，具有相同值的对象中的哪个对象进入结果数组也不重要`baz`。

* * *

### 更新：

对象数组用作数据提供者来填充`s:Datagrid`有关聊天室的信息。数组中的对象携带相关信息（如服务器上的房间 ID 和其他一些配置设置）。

`baz`我在示例中使用的属性实际上是聊天室配置为使用的语言的 ID，我想创建一个`s:DropDownList`用于过滤`Datagrid`各个语言的 ID（例如，显示所有使用“德语”的房间）。

很可能有许多具有相同语言 ID 的对象，但我只希望每个语言 ID 在`DropDownList`.

我需要从数据提供者（源数组）中提取该信息，`Datagrids's`并且无法直接检索我的语言，因为它是用于许多不同数据`DropDownList`的泛型的一部分。`DatagridHeaderRenderer``Datagrids`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:42:29.633

```
private var array:Array = [{foo:"a1", bar:"b1", baz:"c1"},
               {foo:"a2", bar:"b2", baz:"c2"},
               {foo:"a3", bar:"b1", baz:"c3"},
               {foo:"a1", bar:"b4", baz:"c2"},
               {foo:"a0", bar:"b3", baz:"c1"}];

private var filteredArray:Array;
private var keys:Object = {};

private function filterArray():void{
    filteredArray = arr.filter(removeDupes);
}

private function removeDupes(item:Object, idx:uint, arr:Array):Boolean {
    if (keys.hasOwnProperty(item.baz)){
        return false;
    } else {
        keys[item.baz] = item;
        return true;
    }
}

private function resetFilter():void{
    filteredArray = new Array();
    keys = {};
} 
```

从多个来源修改但主要是：http: [//blog.flexexamples.com/2007/08/05/removing-duplicate-items-from-an-array-using-the-arrayfilter-method/](http://blog.flexexamples.com/2007/08/05/removing-duplicate-items-from-an-array-using-the-arrayfilter-method/)

或者您可以只使用 arrayCollection 及其内置的 filterFunction。请参阅：[http ://cookbooks.adobe.com/post_Using_the_to_ArrayCollection_s_filterFunction-5441.html](http://cookbooks.adobe.com/post_Using_the_to_ArrayCollection_s_filterFunction-5441.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:38:44.980

从表面上看，它应该可以工作。使用 Array.filter 通常是在循环中执行相同操作的时间的两倍。

我认为'Dom 的`removeDupes`函数并不能完全满足要求，尽管它可能是一种更通用的方法（例如，如果`===`不是一个好的比较函数，那么这为您提供了一种扩展它的方法。）但是使用`hasOwnPropery`是一个很大的禁忌。你永远不应该碰它——这个功能只存在于 ES 兼容性。否则它是邪恶的 - 潜在的安全漏洞（因为它被定义`Object.prototype`，因此很容易为外部代码覆盖）并且速度很慢（出于同样的原因 - 在原型上定义的函数的查找比在原型上定义的函数要慢一类）。

```
 public function Test()
    {
        super();
        var array:Array = [{foo:"a1", bar:"b1", baz:"c1"},
            {foo:"a2", bar:"b2", baz:"c2"},
            {foo:"a3", bar:"b1", baz:"c3"},
            {foo:"a1", bar:"b4", baz:"c2"},
            {foo:"a0", bar:"b3", baz:"c1"}];
        this.removeDuplicates(array, "baz").map(this.objectTracer);
        // { foo : a3, baz : c3, bar : b1 }
        // { foo : a1, baz : c2, bar : b4 }
        // { foo : a0, baz : c1, bar : b3 }
    }

    private function objectTracer(object:Object, index:int, all:Array):void
    {
        var result:String = "";
        for (var p:String in object)
            result += ", " + p + " : " + object[p];
        if (result) result = result.substr(2);
        trace("{ " + result + " }");
    }

    private function removeDuplicates(array:Array, on:String):Array
    {
        var result:Array = array.concat();
        // note that since we use `Dictionary' the 
        // the comparison between objects is the same as `==='
        // if all values are strings, you can use `Object' to
        // save some space.
        var hash:Dictionary = new Dictionary();
        var temp:Object;

        for (var i:int, j:int = result.length - 1; j >= i; j--)
        {
            temp = result[j][on];
            if (temp in hash)
            {
                result[j] = result[i];
                j++; i++;
            }
            else hash[temp] = true;
        }
        // note that we could `shift()` until we get to `i'
        // but when we do it, we actually reallocate the array every time
        // so `slice()' must, in theory, be more efficient
        return result.slice(i);
    } 
```

# java - 使用 OpenCl 与 java 的异构计算

> ID：10512927
> 
> 赞同：1
> 
> 时间：2012-05-09T09:03:15.437
> 
> 标签：java, parallel-processing, opencl, heterogeneous

Java 和 OpenCL 都支持异构计算；具有多个架构的系统并行协作（任务和数据并行）。

便携性是这两种情况下的主要目标，并且都在很大程度上实现了这一目标。事实上，OpenCl 仍然无法在 FPGA 和 DSP 上运行，因为这些工具不可用。JVM 可以为 GPU FPGA、ARM 等开发。

两者都生成中间代码。

尽管有这么多相似之处，为什么以及何时应该更喜欢 OpenCL 而不是 Java 来进行异构计算？

**已编辑**

请具体回答我的问题：尽管有很多相似之处，为什么以及何时应该更喜欢 OpenCL 而不是 Java 来进行异构计算？为什么我选择 OpenCL 而不是 Java？如果您说 openCl 具有更好的性能，那么我的直接问题将是为什么会这样（因为两者都生成需要转换为特定硬件的二进制文件的中间代码）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T09:20:20.297

OpenCL 通常用于处理大量并行操作（计算等）。这就是 OpenCL 蓬勃发展的地方，它确实增加了程序的吞吐量。

Java 是一种通用语言，用于编写在各种平台/设备上运行的应用程序。

它们作为工具有不同的用途，但您可以使用[JOCL](http://www.jocl.org/)从 Java 程序中使用 OpenCL 。我还使用了 AMD 的一个名为[Aparapi](http://developer.amd.com/zones/java/aparapi/pages/default.aspx)的工具。因为我希望我的应用程序执行一些计算，我的 ASUS AMD 6970 卡似乎比我的 6 核 AMD 1090T Phenom Black Edition 完成得更快。

只是为了让您知道 Aparapi 是什么（取自[谷歌代码网站](http://code.google.com/p/aparapi/)）：

> Aparapi 允许 Java 开发人员通过在 GPU 上执行数据并行代码片段而不是局限于本地 CPU 来利用 GPU 和 APU 设备的计算能力。它通过在运行时将 Java 字节码转换为 OpenCL 并在 GPU 上执行来实现这一点，如果由于某种原因 Aparapi 无法在 GPU 上执行，它将在 Java 线程池中执行。

* * *

> 尽管有这么多相似之处，为什么以及何时应该更喜欢 OpenCL 而不是 Java 来进行异构计算？

人们会选择 OpenCL 来处理并行处理任务，否则这些任务将花费大量时间在 CPU 上执行。这种情况下的缺点是额外的热量和功耗成本。还要记住，有些任务在 CPU 上执行得更快。这完全取决于应用程序，大多数情况下需要对两种类型的芯片进行试验，以确定哪一种芯片做得最好。

> 为什么我选择 OpenCL 而不是 Java？

对于面向并行处理的任务，人们会选择 OpenCL 而不是 Java。OpenCL 是为此目的而构建的工具。OpenCL 不是用于构建企业或桌面应用程序的东西。Java 是一种编程语言，适用于在许多平台上运行的几乎所有领域。如果有人知道使用 OpenCL 可以为他们节省 24 小时的 Java 计算时间；当然，Java 将被排除在外，而 OpenCL 将是可行的方法，或者可以通过 Java 应用程序简单地使用 OpenCL。

> 如果您说 openCl 具有更好的性能，那么我的直接问题将是为什么会这样（因为两者都生成需要转换为特定硬件的二进制文件的中间代码）。

由于 GPU 的内核比 CPU 多，因此它在特定应用程序上具有更好的性能。虽然它们的频率非常低，所以这意味着它们在并行任务上比顺序任务更好。您必须记住，OpenCL 用于基本计算，而不是用于构建完整的应用程序……至少据我所知。

# c++ - 在win32，c ++中的2个进程之间共享相同的标准输出

> ID：10512930
> 
> 赞同：0
> 
> 时间：2012-05-09T09:03:38.230
> 
> 标签：c++, stdout, win32-process

我的 Win32 控制台应用程序中有 2 个进程。1 个进程 - 主程序 1 个进程 - cli 进程。

这两个进程通过 UDP 数据包（套接字）进行通信。Cli 向主程序中的特定实体发出 DUMP 请求。

我希望将转储打印在 CLI 的标准输出上（使用 printf 在主程序标准输出中打印它）。

我该怎么做？我想传递 FILE* 或类似的....传递要转储到的输出设备。

如何做呢？如果可能的话

谢谢 yoav

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:05:09.993

只需将 DUMP 信息返回到 CLI 程序并让它打印到 stdout ！

# c# - 使用动态添加方法？

> ID：10512936
> 
> 赞同：11
> 
> 时间：2012-05-09T09:04:17.027
> 
> 标签：c#, .net, dynamic, .net-4.0, dynamic-language-runtime

我试图在运行时添加功能，比如：

```
static void Main()
{
 dynamic d = new Duck();
 d.Quack =(Action) (() => Console.WriteLine("1")); //decalre a new method on runtime ??
 d.Quack(); 

}

public class Duck : System.Dynamic.DynamicObject
{
   //...
} 
```

*“UserQuery.Duck”不包含“Quack”的定义*

动态不应该允许我这样做吗？

全新`ExpandoObject`是唯一的解决方案吗？

我已经有我的鸭子课**了**。我怎样才能使它展开？- 我可以让鸭子表现得像expando吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-09T09:16:33.663

您不能将任何类型的属性（甚至函数）添加到**现有类型。**

```
dynamic d = new Duck();
d.Quack = "Quack";//fails because there is no such property on duck 
```

您可以使用[ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)：

```
dynamic d = new ExpandoObject();
d.Quack = (Action)(() => System.Console.WriteLine("1"));
d.Quack(); 
```

* * *

不要与动态类型的作用相混淆。

```
void speak(dynamic d)
{
 d.Quack();//this is NOT checked at compile time
} 
```

现在我可以`speak(new Duck());`这样做了 （你得到的同一个）`speak(new Goose());``Duck``Goose``Quack()`

当您在类型上调用方法/属性时`dynamic`，它仅在运行时解决该问题并且不进行编译器检查。

ExpandoObject 允许您动态创建属性。

* * *

要回答您对评论的问题，我认为是，如果您需要自己的类，该类需要能够创建可以从[DynamicObject](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.aspx)继承的新属性。像这样（改编自[这个msdn页面](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.aspx)）：

```
class DynamicDuck : DynamicObject 
{
      Dictionary<string, object> dictionary
           = new Dictionary<string, object>();
    public int Count
    {
        get
        {
           return dictionary.Count;
        }
     }
    public override bool TryGetMember(
          GetMemberBinder binder, out object result)
    {
          string name = binder.Name.ToLower();
            return dictionary.TryGetValue(name, out result);
    }
    public override bool TrySetMember(
         SetMemberBinder binder, object value)
    {
          dictionary[binder.Name.ToLower()] = value;
          return true;
    }
 } 
```

**然后**你可以这样做：

```
dynamic d = new DynamicDuck();
d.firstname = "Gideon";
d.Quack = (Action)(() => System.Console.WriteLine("Quack")); 
```

# c# - 如何滚动到 GridView 中的选定行

> ID：10512937
> 
> 赞同：4
> 
> 时间：2012-05-09T09:04:29.490
> 
> 标签：c#, asp.net, gridview

我有一个 PageSize = 20（20 行）的 GridView，但它只能显示 10 行而没有出现垂直滚动条。

我的问题是，当回发发生时，即使我选择了不同的行，它也会跳到网格的第一行。我想滚动到选定的行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:11:30.200

添加`MaintainScrollPositionOnPostback` 您的页面指令。

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" MaintainScrollPositionOnPostback ="true"%> 
```

另一种方法是使用包装 GridView 的 DIV 的 scrollTop 方法：

```
private void ScrollGrid()
{
    int intScrollTo = this.gridView.SelectedIndex * (int)this.gridView.RowStyle.Height.Value;
    string strScript = string.Empty;
    strScript += "var gridView = document.getElementById('" + this.gridView.ClientID + "');\n";
    strScript += "if (gridView != null && gridView.parentElement != null && gridView.parentElement.parentElement != null)\n";
    strScript += "  gridView.parentElement.parentElement.scrollTop = " + intScrollTo + ";\n";
    ScriptManager.RegisterClientScriptBlock(this.Page, this.GetType(), "ScrollGrid", strScript, true);
} 
```

**编辑：** 这不起作用有几个原因：

1) 如果 gridView 在 NamingContainer 控件内，比如 Panel，因为客户端的 Id 不会是`ClientId`. 您需要改用`UniqueId`of teh 控件。

2）你不能相信行高来计算滚动位置。如果任何列中的文本换行超过一行，或者任何行包含高于样式的内容，则该行的大小将不同

3）不同的浏览器可以有不同的行为。你最好使用 jQuery`scrollTop()`和`scroll()`函数。要使用它们，您必须`scrollTop`在客户端使用并设置`HiddenControl`可以在服务器端读取的值以重置位置。在客户端呈现之前，您无法获取浏览器中行的高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-17T16:26:02.473

gridview 的 RowDataBound 事件处理程序中的这段代码对我有用：

```
protected void dgv_usersRowDatabound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowIndex == intEditIndex)
    {
        DropDownList drpCategory = e.Row.FindControl("drpCategory") as DropDownList;
        drpCategory.Focus();
    }
 } 
```

Gridview 在每一行中都包含一个下拉列表作为 EditItemTemplate。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-19T01:05:33.700

This worked for me, and required no ASP.NET AJAX, UpdatePanel or cookie, and a lot less JavaScript than other solutions I've seen.

```
<input type="hidden" runat="server" id="hdnScroll" value="0" />
<div style="height:600px; overflow-x:hidden; overflow-y:scroll">
  <asp:GridView runat="server" ID="myGridView" OnRowDataBound="myGridView_RowDataBound" OnSelectedIndexChanged="myGridView_SelectedIndexChanged">
...
</asp:GridView>
</div> 
```

Then

```
protected void myGridView_SelectedIndexChanged(object sender, EventArgs e) {
    //if(gr != null) gr.SelectedRow.Cells[0].Focus(); // Only works on an editable cell

    hdnScroll.Value = (myGridView.SelectedIndex * (int)myGridView.RowStyle.Height.Value).ToString();
} 
```

Finally back in the .aspx, to run upon postback

```
<script type="text/javascript">
$(function() {
  document.getElementById('<%=myGridView.ClientID%>').scrollTop = $('#hdnScroll').val();
}); 
```

# iphone - 选框和静态 UILabel 文本

> ID：10512939
> 
> 赞同：1
> 
> 时间：2012-05-09T09:04:37.137
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uilabel

在我的应用程序中，我有两个选项可以在 UILabel 中显示文本。首先是使用类似字幕的效果，以便长文本可以沿其宽度滚动。我使用 350 的大小作为选框。其他选项称为静态。无论多么长的文本，它都不应该在 UILabel 中选中并显示整个文本。UIlabel 应调整其字体和大小以适合 uiview 的框架，即横向模式下的宽度 = 480 和高度 = 320。我已经完成了选取框动画，但我无法弄清楚如何在 uilabel 中显示静态 tex，以便它根据文本的长度改变其大小和字体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:08:51.273

作为替代方案，您可以使用 UIView 和 Timer 创建相同的东西。请参考以下网址

[https://github.com/jeffhodnett/JHTickerView](https://github.com/jeffhodnett/JHTickerView)

[https://github.com/MugunthKumar/MKTickerViewDemo](https://github.com/MugunthKumar/MKTickerViewDemo)

[https://github.com/caydenliew/CLTickerView](https://github.com/caydenliew/CLTickerView)

[HTML 选取框在 iOS 5.1 中不起作用](https://stackoverflow.com/questions/10459861/html-marquee-not-working-in-ios-5-1/10459957#10459957)

# c++ - 如何在存储文件之前找到可用内存？

> ID：10512943
> 
> 赞同：0
> 
> 时间：2012-05-09T09:04:51.173
> 
> 标签：c++, memory-management, file-io

我想使用 C++ 代码将一些文件保存在特定文件夹 (/tmp/) 中。存储文件之前

1.  我需要检查是否有足够的内存可用。如果没有，我需要从存储中删除最旧的文件，然后我需要存储一个新文件。
2.  我还需要知道代码中存储的文件详细信息才能访问它们。

我的实现是：

```
std::map<string IfileName, int iDetail> 
```

我创建了一个 Map 实例，每当我创建文件数据时，我都会将详细信息存储在地图中。地图的问题是：

1.  地图自动对文件名进行排序。所以我无法识别最旧的文件。
2.  假设，文件在存储中被删除，那么 map 也有关于该文件的详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:32:41.343

首先，您的问题尝试在[这里](http://msdn.microsoft.com/en-us/library/822zd880.aspx)阅读。关于你问题的第二部分。为什么你不想使用成对向量。在这种情况下，您可以使用 push_back。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:25:53.283

在某些时候，我使用 map 和 deque 的组合来解决类似的问题。诀窍是每个 value_type（在 map 和 deque 中）都需要使用交叉指针进行扩展。因此，当您使用某个键运行 map.find() 时，您收到的值具有指向双端队列中元素的指针。反之亦然。要找到最旧的 (LRU) 文件，您只需执行 deque.pop_back()，取消引用您进入地图的指针，查看详细信息并决定是否需要再删除一个文件。

# ruby-on-rails - 如何在 Rails 中的关联模型上配置 pg_search 多重搜索？

> ID：10512945
> 
> 赞同：8
> 
> 时间：2012-05-09T09:04:53.843
> 
> 标签：ruby-on-rails, pg-search

我正在将 pg_search 添加到 Rails 应用程序中。我并不完全了解配置，希望能在正确的方向轻轻推动。

首先，我已经或多或少地在我的应用程序上设置并运行了一个多模型站点。但我想将其扩展为也搜索相关模型。

例如，我有制造商、汽车、模型类。目前，如果我搜索“福特”，则只返回制造商。我还想退回所有关联的汽车（属于制造商）和模型（属于汽车）。

我可以看到如何将其作为范围搜索

```
class Car
  pg_search_scope :manufactured_by, :associated_against => {
    :manufacturer => [:name]
  }
end 
```

但是，如果我尝试在多重搜索上执行此操作，它就行不通

```
class Car
  include PgSearch
  multisearchable :against => [:name], 
    :associated_against => {
        :manufacturer => [:name]
      }
end 
```

它不会产生错误，它只是不会拾取关联的记录。

我有一种感觉，在我理解这一切如何结合在一起时，我缺少一些基本的东西。如果有人能帮助我理解这一点，或者为我指出一个好的信息来源，我将不胜感激。我已经浏览了 github 上的信息和相关的 Railscast，但我仍然缺少一些东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-11T00:14:35.163

由于多态关联在 Rails 和 SQL 中的工作方式，不可能使用多重搜索来搜索关联记录。

我将添加一个错误来解释这种情况，以便将来不会那么混乱。

对困惑感到抱歉。

您可以做的是在 Car 上定义一个方法，该方法返回您希望搜索的文本。

```
class Car < ActiveRecord::Base
  include PgSearch
  multisearchable :against => [:name, manufacturer_name]
  belongs_to :manufacturer

  def manufacturer_name
    manufacturer.name
  end
end 
```

或者更简洁，您可以委托：

```
class Car < ActiveRecord::Base
  include PgSearch
  multisearchable :against => [:name, manufacturer_name]
  belongs_to :manufacturer
  delegate :name, :to => :manufacturer, :prefix => true
end 
```

但是，如果您对制造商实例进行名称更改，您必须确保 pg_search_documents 表得到更新，因此您应该添加`:touch => true`到它的关联中：

```
class Manufacturer < ActiveRecord::Base
  has_many :cars, :touch => true
end 
```

这样，当制造商更新时，它将在所有 Car 记录上调用 Active Record 回调，这将触发 pg_search 回调以更新存储在相应 pg_search_documents 条目中的可搜索文本。

# jquery - 将 Jquery 插件添加到 Backbone + require.js 代码

> ID：10512950
> 
> 赞同：4
> 
> 时间：2012-05-09T09:05:02.317
> 
> 标签：jquery, jquery-plugins, backbone.js, requirejs

我有一个 BackboneJs + jquery 代码，现在我正在尝试使用 requireJs 对其进行模块化。在我的代码中，我使用了额外的 jquery 插件，如[nanoscroller](http://jamesflorentino.com/jquery.nanoscroller/)等。

早些时候只调用脚本就足够了：

```
<script type="text/javascript" src="../javascript/jquery.nanoscroller.js"></script> 
```

现在我试图通过以下方式调用脚本：

```
define([
  'jQuery',
  'Underscore',
  'Backbone',
  'text!templates/landingTemplate.html',
  'library/jquery/jquery.nanoscroller.js'
], function($, _, Backbone, LandingTemplate){
var LandingView = Backbone.View.extend({ 
```

但我收到以下错误：

```
Error: jQuery is not defined
Source File: http://localhost:8080/sample/Main%20App/Backbone%20+%20Require.js%20Impl/js/library/jquery/jquery.nanoscroller.js 
```

我尝试了几件事：使用“require”而不是“define”，但它没有用。我不确定我在这里错过了什么。请帮助。

谢谢，科马尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:58:57.873

The error was not because the Jquery was not properly defined. It was because the nanoscroller library was getting loaded before jQuery was. The solution was use the "order" plugin to make sure jQuery is loaded before the nanoscroller library is loaded. Following is how the issue got resolved for me:

```
require(['order!jQuery', 'order!library/jquery/jquery.nanoScroller'], function ($) {
     $("#myFields").nanoScroller();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T09:57:31.510

jQuery 实际上将自己定义为一个命名模块：

```
define( "jquery", [], function () { return jQuery; } ); 
```

通常[不鼓励](http://requirejs.org/docs/api.html#modulename)您添加自己的模块名称，但对于 jQuery，您只需使用**路径**配置告诉 RequireJS 在哪里可以找到库：

```
require.config({
    paths: {
        jquery: 'lib/jquery',
    }
}); 
```

这应该允许你只`jquery`在你的`require`和`define`调用中使用。

配置 RequireJS 的方法不止一种，您可以[在 API 文档中阅读](http://requirejs.org/docs/api.html#config)。

# gcc - 使用静态链接的 libstdc++ 创建共享库时失败

> ID：10512954
> 
> 赞同：1
> 
> 时间：2012-05-09T09:05:11.827
> 
> 标签：gcc, libstdc++, fpic

在 64 位 x86 机器上使用 gcc 4.5.1，我首先创建 ao 如下： g++ -fPIC -c a.cc -o ao

然后尝试创建 liba.so 如下： g++ -static-libstdc++ -shared -W1,-soname,liba.so -o liba.so.1.0.0 ao

但失败了，信息如下：relocation R_X86_64_32S against `vtable for __gnu_cxx::stdio_filebuf >' can not be used when making a shared object; 使用 -fPIC 重新编译

我尝试重新编译 libstdc++ 库，添加了 -fPIC，但它还是失败了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:04:25.443

我希望*静态*libstdc++ 库*不是*用 构建的`-fPIC`，因此不能链接到共享库中。

从理论上讲，您可以将非 PIC 编译代码放入动态库中，但它不可共享（使用它的每个程序都必须有自己的副本），因此通常不会实现。

您将需要链接到共享的 C++ 库，使您自己的库成为静态库，或者自己重新构建 libstdc++ 并从构建目录中获取 .o 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:39:36.180

[stackoverflow上有](https://stackoverflow.com/questions/6917413/how-to-statically-link-libstdc)一个关于这个主题的类似问题，它指的是一个关于libstdc++静态链接的[外部站点。](http://www.trilithium.com/johan/2005/06/static-libstdc/)

# c++ - 如何将 C++ 游戏嵌入网页？

> ID：10512959
> 
> 赞同：4
> 
> 时间：2012-05-09T09:05:18.633
> 
> 标签：c++, embed

无需在 Flash 中重新编码或将其制成 Java 小程序！*将其保留为 C++ 应用程序*，有没有办法将其嵌入到网页中，以便网站访问者可以玩游戏？

我们可以假设它是一款小型游戏，与普通 Flash 游戏一样大，甚至更薄。

有问题的游戏是用 Allegro 库编写的，代码不到 1000 行。

是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T09:07:43.020

快速回答：**不**，你不能。

C++ 应用程序不能嵌入到网页中，它们需要被下载并且用户必须在客户端机器上运行它们。

详细信息：这在某种程度上是可能的，但绝对**不能跨浏览器移植**。例如，Internet Explorer 具有**ActiveX**组件（它们可以是 C++ 应用程序，它将被下载、安装并在网页内运行）。其他浏览器有不同的机制来实现这一点（例如，Chrome 有它的**Native Client**），但你不能写出真正可移植的东西，而且无论你使用什么，都会有很多限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T09:09:02.287

有可能的

[http://doom.pdox.net/](http://doom.pdox.net/)

[http://code.google.com/p/nativeclient/](http://code.google.com/p/nativeclient/)

其实这已经是旧闻了……

[http://www.engadget.com/2010/05/13/googles-native-client-sdk-developer-preview-provides-helpful-re/](http://www.engadget.com/2010/05/13/googles-native-client-sdk-developer-preview-provides-helpful-re/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-29T15:52:39.577

试试 emscripten 项目，它是一个基于 LLVM Clang 的 C++ 编译器，将 C++ 文件编译成 JS 文件，然后可以在浏览器中运行。

```
#include <iostream>

int main()
{
    using namespace std;

    cout << "Hello World" << endl;
    return 0;
} 
```

假设您`helloWorld.cpp`在安装 Emscripten 后将其保存在使用中。

```
$ emcc helloWorld.cpp -o helloWorld.html 
```

您将完成，`helloWorld.html`现在在浏览器中打开并亲自查看。Emscripten 的好处是它支持广泛的桌面库，包括 SDL 等，

[http://kripken.github.io/emscripten-site/](http://kripken.github.io/emscripten-site/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T09:07:50.567

它只能作为 Google Chrome 浏览器的插件作为原生扩展。

# mercurial - Mercurial如何为repo中的一个文件创建补丁

> ID：10512961
> 
> 赞同：6
> 
> 时间：2012-05-09T09:05:42.057
> 
> 标签：mercurial, export

我的仓库中有一个名为 some/work/file.py 的文件。

我一直在 repo 中工作（除了 file.py 之外的其他文件）并提交我的更改，并且已经从修订版 20 到 30。

我将如何仅为修订版 20 到 30 的 file.py 创建一个补丁，而不包括其他文件？

就像是：

```
hg export 20:30 file.py > new.patch 
```

已尝试该命令但不起作用。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T11:32:52.243

`hg export`将单个变更集导出为单独的实体。

如果我理解正确，您需要回答“`file.c`修订版 20 和修订版 30 之间发生了哪些变化？”这个问题，即您只需要一个差异文件。

以下是您的操作方法：

```
hg diff file.c -r 20:30 > new.diff 
```

作为一种更通用的方法，您可以使用`-I`（包含文件模式）/ `-X`（排除）。

# postgresql - 在 postgresql 9.1 中找不到 adminpack.sql

> ID：10512964
> 
> 赞同：10
> 
> 时间：2012-05-09T09:05:58.633
> 
> 标签：postgresql, ubuntu, postgresql-9.1

我正在尝试安装它并在 ubuntu 中使用。正在关注[此](https://help.ubuntu.com/community/PostgreSQL)页面以安装其他仪器包。

```
Install Server Instrumentation for Postgresql 8.4
To install Server Instrumentation for Postgresql 8.4 you may use the command line and type:
 sudo apt-get install postgresql-contrib

Run the adminpack.sql script, simply type:
 sudo -u postgres psql < /usr/share/postgresql/8.4/contrib/adminpack.sql 
```

但我在 9.1 版本中找不到 adminpack.sql。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-18T22:57:21.153

在 PostgreSQL 9.1 及更高版本中，可以通过以下`CREATE EXTENSION`命令安装扩展：

```
sudo -u postgres psql
CREATE EXTENSION "adminpack"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-28T23:13:39.960

Looks like this is old and comments are closed, so I'm opening another answer.

ldalonzo's answer is correct once you have all the components, but I found I also had to run:

```
sudo apt-get install postgresql-contrib-9.1 
```

Looks like the bare postgresql package doesn't include the additional modules.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-09T09:35:42.420

试试`locate adminpack`。但首先，运行`updatedb`以确保`locate`数据库是最新的。

```
sudo updatedb
locate adminpack 
```

输出是：

```
/usr/lib/postgresql/9.1/lib/adminpack.so
/usr/share/postgresql/9.1/extension/adminpack--1.0.sql
/usr/share/postgresql/9.1/extension/adminpack.control 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-10T03:34:57.620

使用以下命令安装 postgresql-contrib 后

```
sudo apt-get install postgresql-contrib 
```

Adminpack 位于以下路径

```
/usr/share/postgresql/9.1/extension/adminpack--1.0.sql 
```

要加载 adminpack，请使用以下命令

```
sudo su postgres -c psql < /usr/share/postgresql/9.1/extension/adminpack--1.0.sql 
```

然后

```
sudo /etc/init.d/postgresql restart 
```

# python - jython 文件中的包导入问题

> ID：10512965
> 
> 赞同：0
> 
> 时间：2012-05-09T09:06:06.980
> 
> 标签：python, jython, wlst

我有一个函数（比如method1）在python文件（比如file1.py）中导入hashmap，它在另一个没有导入但method2使用hashmap的py文件（file2.py）中调用另一个方法（比如method2）。在 WLST.sh 中调用 method1 时，没有问题。但是当我调用它时`$MW_HOME/oracle_common/bin/wlst.sh file1.py`

*名称错误：哈希映射*

注意：我无法修改 file2.py，因为它已经发送给客户。

谢谢，阿肖克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:09:41.657

当变量的名称用于执行诸如打印之类的操作或在其他表达式中使用而没有在定义变量之前为其分配值时，WLST/Python 将引发 NameError。

检查您的 HashMap 变量是否分配了值，然后发送给其他 Python 脚本。

# jquery - fancyBox 2：格式化标题

> ID：10512967
> 
> 赞同：1
> 
> 时间：2012-05-09T09:06:13.153
> 
> 标签：jquery, fancybox

对于fancyBox 1.x，有一个关于如何格式化标题的信息。我错过了这个新版本...

我想添加一个标题，例如“x 的图像 1。您可以在此处找到孔库 [=link]”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T15:55:28.390

对于fancybox v2.0.x，您可以`title`使用以下`beforeShow`选项自定义/格式化：

```
$(".fancybox").fancybox({
   beforeShow : function() {
    this.title = (this.title ? '' + this.title + '' : '') + 'Image ' + (this.index + 1) + ' of ' + this.group.length + '. You can find the whole gallery  <a href="/parth/to/gallery">here</a>';
   }
}); // fancybox 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:09:57.993

你看到[文档](http://fancyapps.com/fancybox/#docs)页面了吗

选项称为

`title`- 覆盖标题内容，接受任何 HTML

# forms - 使用 Spring MVC 进行表单验证后保留 File 字段的值

> ID：10512969
> 
> 赞同：3
> 
> 时间：2012-05-09T09:06:14.733
> 
> 标签：forms, spring, model-view-controller, spring-mvc

我尝试使用 Spring MVC 制作一个涉及验证器的表单。

该表单包含一些文件字段，但如果验证失败，我会丢失这些值。

我的模型属性包含类型的对象`MultipartFile`：

```
private MultipartFile docFile;
private MultipartFile pictFile; 
```

和 JSP：

```
<input type="file" id="docFile" name="docFile" />
<input type="file" id="pictFile" name="pictFile" /> 
```

如果验证失败，有什么方法可以保留这些值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:52:43.910

您需要 ModelAttribute...在控制器中创建 ModelAttribute

```
@ModelAttribute("prj")
public ProjektSuche projektSearchForm() {
    if (searchForm == null) {
        searchForm = new ProjectSearch();
    }
    return searchForm;
} 
```

并且表单具有属性 modelAttribute，例如：

```
<form:form method="get" modelAttribute="prj" action="${urlStartSearch}">
    ...
</form> 
```

prj是您从上一步中选择的名称**。**请求处理程序方法（同一个控制器）是这样的：

```
public ModelAndView startProjektSuche(@Valid @ModelAttribute("prj") ProjektSuche prjSearch, BindingResult result) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:11:51.360

多部分文件类型对象永远不会从代码中更新。它们只能通过用户操作的浏览按钮进行更新。

# django - 文档（Sphinx）和 Django 应用程序之间的链接

> ID：10512971
> 
> 赞同：2
> 
> 时间：2012-05-09T09:06:18.597
> 
> 标签：django, python-sphinx

我有使用 Sphinx 编写的应用程序用户的文档。到目前为止，文档都是用户可以访问的静态 HTML 页面。

我想在应用程序和文档之间创建链接。当然，我可以使用脆弱的`<a href="..">`链接来做到这一点，但我想使用`reverse()`从 Sphinx 链接到视图和 sphinx-reference 来从应用程序链接到文档。

如果有更好的方法，我可以替换 sphinx。但我想将文档保存在文件系统（而不是数据库）中的修订控制中。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:13:49.980

查看 readthedocs.org。您可以让他们托管您的文档，或者您可以从 GitHub 下载他们的应用程序并将其集成到您的应用程序中。(https://github.com/rtfd/readthedocs.org)

# facebook - 使用经典 ASP 获取和解析 Facebook Graph API 的 JSON

> ID：10512974
> 
> 赞同：0
> 
> 时间：2012-05-09T09:06:26.747
> 
> 标签：facebook, facebook-graph-api, asp-classic

我目前正在使用经典 ASP 进行编码（由于我的客户端服务器上的 PHP 和 ASP.NET 不可用）。所以我的客户有一个 Facebook 页面，我想用 JQuery 在他的网站上显示他的最新帖子。

我现在的问题是 Facebook 最近更改了程序，因此您甚至需要一个 Auth 代码才能访问公共提要，所以我想知道如何才能完成它，只需使用 ASP 读出他的 Facebook 页面的第一个提要。

也许这里有人已经尝试过，我的意思是我已经在 PHP5.3 中这样做了一百次，但我对优秀的经典 ASP 还是很陌生。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:16:46.267

如果您已经使用 php 完成了它，那么使用 asp（Classic 或 .net）应该非常容易，因为 facebook api 基于简单的 http 请求。

另一件事是，谷歌搜索“facebook 经典 asp”将返回足够的信息，让您*至少*可以开始使用。仅排名靠前的结果：

*   [经典 ASP 和 Facebook 图形 API](http://www.codeproject.com/Articles/333706/Classic-ASP-and-Facebook-Graph-API)
*   [使用经典 ASP 发布到 facebook 墙上](https://stackoverflow.com/questions/8890751/post-to-facebook-wall-with-classic-asp)

# iphone - 如何在表格视图上显示从 iPhone 中的 Web 服务获取的数据

> ID：10512975
> 
> 赞同：1
> 
> 时间：2012-05-09T09:06:30.207
> 
> 标签：iphone, objective-c, web-services, uitableview, ios5

我正在使用以下代码从 Web 服务中获取数据，

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    recordResults = FALSE;

    NSString *soapMessage = [NSString stringWithFormat:
                             @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                             "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
                             "<soap:Body>\n"
                             "<GetContacts xmlns=\"http://tempuri.org/\">\n"
                             "<loginid>nareshreddyyaradla.net@gmail.com</loginid>\n"
                             "</GetContacts>\n"
                             "</soap:Body>\n"
                             "</soap:Envelope>\n",loginId.text
    ];

    NSLog(soapMessage);

    NSURL *url = [NSURL URLWithString:@"http://www.xxxxxx.net/services/contacts.asmx"];
    NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
    NSString *msgLength = [NSString stringWithFormat:@"%d",[soapMessage length]];

    [theRequest addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [theRequest addValue:@"http://tempuri.org/GetContacts" forHTTPHeaderField:@"SOAPAction"];
    [theRequest addValue:msgLength forHTTPHeaderField:@"Content-Length"];
    [theRequest setHTTPMethod:@"POST"];
    [theRequest setHTTPBody:[soapMessage dataUsingEncoding:NSUTF8StringEncoding]];

    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    NSHTTPURLResponse *urlResponse = nil;
    NSError *error = [[NSError alloc] init];
    NSData *responseData = [NSURLConnection sendSynchronousRequest:theRequest returningResponse:&urlResponse error:&error];

    NSString *result = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    NSLog(@"Response Code: %d",[urlResponse statusCode]);
    if([urlResponse statusCode] >= 200 && [urlResponse statusCode] < 300)
    {
        NSLog(@"Response: %@", result);
    }

    if( theConnection )
    {
        webData = [NSMutableData data];
    }
    else
    {
        NSLog(@"theConnection is NULL");
    }
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSURLResponse *)response
{
    [webData setLength:0];
}
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"ERROR with theConnection");
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"DONE. Received Bytes: %d", [webData length]);
    NSString *theXML = [[NSString alloc] initWithBytes:[webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
    NSLog(theXML);

    if( xmlParser )
    {

    }

    xmlParser = [[NSXMLParser alloc] initWithData:webData];
    [xmlParser setDelegate:self];
    [xmlParser setShouldResolveExternalEntities:YES];
    [xmlParser parse];
}

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if([elementName isEqualToString:@"GetContactsResult"])
    {
        if(!soapResults)
        {
            soapResults = [[NSMutableString alloc] init];
        }
        recordResults = TRUE;
    }
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if( recordResults )
    {
        [soapResults appendString:string];
    }
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if([elementName isEqualToString:@"GetContactsResult"])
    {
        recordResults = FALSE;
        greeting.text = soapResults;
        soapResults = nil;
    }
} 
```

以下是我在控制台中获取的数据，

```
&lt;normalcontacts&gt;
    &lt;table_id&gt;1788&lt;/table_id&gt;
    &lt;table_name&gt;nareshaug11&lt;/table_name&gt;
    &lt;total_contact&gt;48&lt;/total_contact&gt;
    &lt;created_date&gt;2011-08-11T01:24:00-07:00&lt;/created_date&gt;
  &lt;/normalcontacts&gt;
  &lt;normalcontacts&gt;
    &lt;table_id&gt;1730&lt;/table_id&gt;
    &lt;table_name&gt;nareshtodayjuly28&lt;/table_name&gt;
    &lt;total_contact&gt;2&lt;/total_contact&gt;
    &lt;created_date&gt;2011-07-27T23:01:00-07:00&lt;/created_date&gt;
  &lt;/normalcontacts&gt;
  &lt;normalcontacts&gt;
    &lt;table_id&gt;1685&lt;/table_id&gt;
    &lt;table_name&gt;naresh2&lt;/table_name&gt;
    &lt;total_contact&gt;0&lt;/total_contact&gt;
    &lt;created_date&gt;2011-07-07T22:12:00-07:00&lt;/created_date&gt;
  &lt;/normalcontacts&gt;
  &lt;normalcontacts&gt;
    &lt;table_id&gt;1596&lt;/table_id&gt;
    &lt;table_name&gt;todaymay26&lt;/table_name&gt;
    &lt;total_contact&gt;0&lt;/total_contact&gt;
    &lt;created_date&gt;2011-05-26T03:24:00-07:00&lt;/created_date&gt;
  &lt;/normalcontacts&gt;
  &lt;normalcontacts&gt;
    &lt;table_id&gt;667&lt;/table_id&gt;
    &lt;table_name&gt;my contacts&lt;/table_name&gt;
    &lt;total_contact&gt;1&lt;/total_contact&gt;
    &lt;created_date&gt;2010-07-19T23:13:00-07:00&lt;/created_date&gt;
  &lt;/normalcontacts&gt; 
```

我需要在 UITableView 中显示 table_name，我遵循以下示例， [http://wwwiphoneresourcesbyemme-rajesh.blogspot.in/2012/04/web-services-example-using-nsxml-parser.html](http://wwwiphoneresourcesbyemme-rajesh.blogspot.in/2012/04/web-services-example-using-nsxml-parser.html) 但我无法将其显示在 tableView 上。

表视图代码，

```
- (void)parserDidEndDocument:(NSXMLParser *)parser{

    UITableView *tab = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 480) style:UITableViewStylePlain];

    tab.delegate = self;
    tab.dataSource = self;

    [self.view addSubview:tab];

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

    return [namedata count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [[UITableViewCell alloc] init];    
    cell.textLabel.text=[arrareasdata objectAtIndex:indexPath.row];
    cell.imageView.image=[array objectAtIndex:indexPath.row];
    tableView.separatorColor=[UIColor greenColor];
    cell.textLabel.textColor=[UIColor blackColor];

    return cell;

} 
```

任何建议或链接将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:02:30.150

`[tableview reloadData];`尝试从 Web 服务获取数据时重新加载 uitableview

# windows-phone-7 - Windows Phone 中的独立存储异常

> ID：10512976
> 
> 赞同：0
> 
> 时间：2012-05-09T09:06:38.197
> 
> 标签：windows-phone-7, stack-trace, isolatedstorage

我收到了一个堆栈跟踪报告，上面说有一个 IsolatedStorageException。

“帧图像函数偏移
量 0 coredll.dll xxx_RaiseException
1 mscoree3_7.dll
2 mscoree3_7.dll
3 mscoree3_7.dll
4 TransitionStub
5 System.IO.IsolatedStorage.IsolatedStorageSettings.Save
6 System.IO.IsolatedStorage.IsolatedStorageSettings.Clear
7 AppName.CycleManager.WriteToIsolatedStorage
8 AppName.SettingsPage.OnNavigatedFrom
9 Microsoft.Phone.Controls.PhoneApplicationPage.InternalOnNavigatedFrom
10 System.Windows.Navigation.NavigationService.RaiseNavigated
11 System.Windows.Navigation.NavigationService.CompleteNavigation 12 System.Windows.Navigation.NavigationService.ContentLoader_BeginLoad_Callback
13 System.Windows.Navigation.PageResourceContentLoader.BeginLoad_OnUIThread 14 ._ *c* _DisplayClass4._BeginLoad_b__0
15 mscoree3_7。 dll
16 mscoree3_7.dll
17 mscoree3_7.dll
18 System.Reflection.RuntimeMethodInfo.InternalInvoke 19 System.Reflection.RuntimeMethodInfo.InternalInvoke "

所以我认为异常是由 WriteToIsolatedStorage() 引发的。

```
public void WriteToIsolatedStorage()
    {
        IsolatedStorageSettings dataStorage = IsolatedStorageSettings.ApplicationSettings;
        dataStorage.Clear();

        dataStorage.Add("firstLaunchDate", App.LaunchedDateTime);

        dataStorage.Add("weekStart", m_bWeekStart);

        dataStorage.Add("iHistCount", m_iHistCount);

        // All the variables i need to store

        dataStorage.Add("noteCount", m_noteCount);

        WriteNotesToFile();

        dataStorage.Add("weightCount", m_iWeightCount);

        WriteWeightToFile();

        dataStorage.Add("tempCount", m_iTempCount);

        WriteTempToFile();

        dataStorage.Save();
    } 
```

**更新：**

```
 public void WriteNotesToFile()
    {
        if (m_noteCount > 0)
        {
            try
            {
                using (IsolatedStorageFile storagefile = IsolatedStorageFile.GetUserStoreForApplication())
                {
                    if (storagefile.FileExists("NotesFile"))
                    {
                        using (IsolatedStorageFileStream fileStream = storagefile.OpenFile("NotesFile", FileMode.Open, FileAccess.ReadWrite))
                        {
                            StreamWriter writer = new StreamWriter(fileStream);

                            for (int i = 0; i < m_noteCount; i++)
                            {
                                //writer.Write(m_arrNoteDate[i].ToShortDateString());
                                writer.Write(m_arrNoteDate[i].ToString("d", CultureInfo.InvariantCulture));
                                writer.Write(" ");
                                writer.Write(m_arrNoteString[i]);
                                writer.WriteLine("~`");
                            }
                            writer.Close();
                        }
                    }
                    else
                    {
                        storagefile.CreateFile("NotesFile.txt");
                        using (IsolatedStorageFileStream fileStream = storagefile.OpenFile("NotesFile", FileMode.Create, FileAccess.ReadWrite))
                        {
                            StreamWriter writer = new StreamWriter(fileStream);

                            for (int i = 0; i < m_noteCount; i++)
                            {
                                //writer.Write(m_arrNoteDate[i].ToShortDateString());
                                writer.Write(m_arrNoteDate[i].ToString("d", CultureInfo.InvariantCulture));
                                writer.Write(" ");
                                writer.Write(m_arrNoteString[i]);
                                writer.WriteLine("~`");
                            }
                            writer.Close();
                        }
                    }
                }
            }
            catch { }
        }
    } 
```

谁能告诉我在什么情况下抛出异常。我在某处读到，当空间不足时，会抛出这样的异常。

最后，我有 4 个独立的存储文件，我在其中写入值。以下方法是否会删除所有 4 个？

```
IsolatedStorageFile storagefile = IsolatedStorageFile.GetUserStoreForApplication();
storagefile.Remove(); 
```

如果有人能澄清这些，我将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:48:21.370

[`Save`](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings.save%28v=vs.95%29.aspx)如果没有足够的空间，调用将失败。
由于我们看不到这些`WriteXxxxToFile()`方法在做什么，它们可能正在做一些可能导致这个问题的事情。

它也可能与您有多个线程尝试访问设置或应用程序关闭或墓碑但您的保存方法花费太长时间的问题有关。

`WriteToIsolatedStorage()`确定真正原因的最佳选择是添加一些处理以支持调用引发此类异常的场景，然后根据您的应用程序/需求记录并报告它。

关于`Remove`，根据[MSDN](http://msdn.microsoft.com/en-us/library/7ay840d1%28v=vs.95%29.aspx)

> “这种方法不可撤销地删除了当前用户应用程序及其所有目录和文件的整个隔离存储。”

# c# - 以简单列表为源的 DataGridView 虚拟模式

> ID：10512981
> 
> 赞同：7
> 
> 时间：2012-05-09T09:06:51.700
> 
> 标签：c#, list, datagridview, virtual

以前我问了一个关于我的 dataGridView 性能的问题，因为它显示了大量基于传入流添加的行。给出了多种解决方案，其中之一启用了虚拟模式。MSDN 有一篇关于该主题的文章，但感觉比我需要的更复杂，因为它使用数据库和可编辑字段。我的 DataGridView 仅用于显示，我显示的数据放在 List 中。

在我接受答案后，我收到了这个链接： http: [//www.codeproject.com/Articles/23937/Paging-Data-with-DataGridView-in-VirtualMode](http://www.codeproject.com/Articles/23937/Paging-Data-with-DataGridView-in-VirtualMode)。即使使用了数据库示例，它也更适合我的需要。我的列表将包含我要显示的数据，声明如下：

```
List<ResultRow> captureResults = new List<ResultRow>(); 
```

ResultRow 对象定义如下：

```
/* Simplified */
public class ResultRow
{
    private int first = 0;
    private string second = "";
    private UInt64 third = 0;
    private IPAddress fourth = null;
    /* etc */

    public ResultRow()
    {
    }

    public void Set (<the values>) //In actuallity a KeyValuePair
    {
        //field gets set here
    }

    public UInt64 Third
    {
        get { return third; }
        set { third = value; }
    }

    /* etc. */ 
```

}

按照上面提到的文章，我创建了一个 ResultRowCache。对象制作如下：

```
/* Page size set to 100\. */
ResultRowCache _cache   = new ResultRowCache(PAGE_SIZE, captureResults); 
```

在我的表单加载事件中，我执行以下操作（与此问题相关。我还添加了一个事件处理程序，尽管这是使用 IDE 完成的，因此未直接显示在此代码中。定义如下！））：

```
dataGrid.VirtualMode = true;

_cache = new ResultRowCache(PAGE_SIZE, captureResults);

dataGrid.Columns.Add("FirstColumn"  , "First column header");
dataGrid.Columns.Add("Second Column", "Second column header");
/* Etc. Adding all columns. (Every member or ResultRow has it's own column. */

dataGrid.RowCount = (int)_cache.TotalCount; 
```

我想知道的一件事是如何在这里初始化 RowCount 。它可能是 0（由于 ResultRowCache 的构造函数调用（见下文）），但它似乎永远不会再次更改。这个作业算作参考吗？它如何自我更新？

无论如何，继续我所拥有的，ResultRowCache 定义如下：

```
public class ResultRowCache
{
    public int  PageSize    = 100;
    public long TotalCount;
    public List<ResultRow> CachedData = null;
    private List<ResultRow> FullData;

    int _lastRowIndex = -1;

    public ResultRowCache (int pageSize, List<ResultRow> total)
    {
        PageSize = pageSize;
        FullData = total;

        LoadPage( 0 );
    }

    public void LoadPage (int rowIndex)
    {
         int lastRowIndex = rowIndex - ( rowIndex % PageSize );

         /* Page already loaded */
         if( lastRowIndex == _lastRowIndex ) return;

         /* New page */
         _lastRowIndex = lastRowIndex;

         /* Create a new cashes data object */
         if( CachedData == null ) CachedData = new List<ResultRow>();

         /* If cached data already existed, clear */
         CachedData.Clear();

         /* The index is valid (there is data */
         if (lastRowIndex < FullData.Count)
         {
             /* Not a full page */
             if (lastRowIndex + PageSize > FullData.Count)
             {
                 CachedData = FullData.GetRange(lastRowIndex, ((lastRowIndex + PageSize) - 1) - FullData.Count);

             }
            /* Full page */
            else
            {
                CachedData = FullData.GetRange(lastRowIndex, PageSize);
            }
        }

        TotalCount = CachedData.Count;
    }
    }
} 
```

最后，我的数据网格的 CellValueNeeded 事件定义如下：

```
void DataGridCellValueNeededEvent(object sender, DataGridViewCellValueEventArgs e)
{
    _cache.LoadPage(e.RowIndex);

    int rowIndex = e.RowIndex % _cache.PageSize;

    switch (dataGrid.Columns[e.ColumnIndex].Name)
    {
        /* Not actual names, example */
    case "FirstColumn":   e.Value = _cache.CachedData[rowIndex].First;  break;
        case "SecondColumn":  e.Value = _cache.CachedData[rowIndex].Second; break;
        /* Rest of the possibly columns/ResultRow values */
    }
} 
```

问题：即使“captureResults”列表被填满，我的数据网格仍然为空。这是我到目前为止所尝试的：

*   在事件中切换后更新数据网格的 RowCount 成员。
*   用缓存中的结果总量声明列表，以确保它始终是最新的。（我担心“外部修改”不会通过我在缓存构造函数中传递的 List，即使它是一个引用。（C# 相当新）
*   在表单的加载事件中将数据网格的 RowCount 设置为 100（硬值）。
*   在将某些内容添加到 captureResults 列表后，向数据网格添加了“Update()”调用。（这发生在一个特殊的线程中，该线程调用了一个向列表添加内容的函数）

以上都没有改变任何东西。网格保持为空。我想我在这里遗漏了一些非常明显的东西。有什么建议么？

-edit- 添加了一些我试图让它工作的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:01:36.617

我觉得缓存的使用在某种程度上使过程复杂化（尽管在将链接发送给以这种方式实现的 msdn 之后，我确实感到有责任）。

我建议的起点是：

1.  丢弃缓存（如果您遇到内存问题，这可能会在以后有用，但现在让您的数据网格填充）

2.  将您的存储`List<ResultsRow>`在实例变量中。

3.  确保`dataGrid.VirtualMode = true;`（或等效）

4.  实现 CellValueNeeded 如下：

    ```
     private void gridContacts_CellValueNeeded(object sender,  DataGridViewCellValueEventArgs e)
        {
           ResultRow dataObject = resultRows[e.RowIndex];

           switch(e.ColumnIndex)
           {
               case 0:
                   e.Value = dataObject.First;
                   break;
               case 1 :
                   e.Value = dataObject.Second;
                   break;
               //etc..
           }
        } 
    ```

注意：您需要在 DataObject 中公开一些额外的公共属性，以便可以在方法中将它们设置为值。

See how you get on with that. If you set some breakpoints within the CellValueNeeded method that should help with debugging any further unexpected behavior. Good luck.

# algorithm - 计算不同增量的循环迭代次数

> ID：10512984
> 
> 赞同：4
> 
> 时间：2012-05-09T09:06:57.247
> 
> 标签：algorithm, optimization

```
for (; i < limit; i += x) {
  x += 100;
} 
```

是否有一个优雅的解决方案来计算`i`而不`x`使用循环结构？

**我的想法：**

我可以使用流行的高斯求和公式`1+2+3+4+...+n = (n*(n+1))/2`和二分搜索将复杂度从 O(N) 降低到 O(log N)。

```
Assume i = 0, x = 0 then:
i = 0*100 + 1*100 + 2*100 + 3*100 + ... + (n-1)*100 = ((n-1)*n)/2*100

if (i != 0 && x != 0) then:
i = i + x+0*100 + x+1*100 + x+2*100 + ... + x+(n-1)*100 = i+x*n + ((n-1)*n)/2*100

Thus (i < limit) = (i+x*n+((n-1)*n)/2*100 < limit) 
```

现在使用某种二进制搜索来找到`n`满足上述不等式的最大值。

```
if (i < limit)
    for (n = 1; i+x*n+((n-1)*n)/2*100 < limit; n -= j, n += 1)
        for (j = 1; i+x*n+((n-1)*n)/2*100 < limit; n += j, j += j); 
```

现在我找到了`n`初始 for 循环的迭代次数，`i`可以`x`使用以下方法计算：

```
i += x*n+((n-1)*n)/2*100
x += 100*n 
```

有什么建议么？有更快的 O(1) 解决方案吗？

**O(1) 解决方案：**

```
const int d = 100;
while (i < limit) { i += x; x += d; } 
```

在 Daniel 的回答的帮助下，这里是如何计算迭代次数，`n`然后在 O(1) 步骤中计算。（见上文）因此我们现在可以解决：`i``x``i = i+x*n+((n-1)*n)/2*d`

```
i < limit
= i+x*n+(n*(n+1))/2*d < limit
= d*n^2 + (2*x-d)*n - 2*(limit-i) < 0 
```

上面的公式是一个二次不等式，可以使用[二次公式](http://en.wikipedia.org/wiki/Quadratic_equation#Quadratic_formula)求解：

```
(-b ± (b^2-4ac)^0.5) / 2a 
```

因此迭代次数`n`为：

```
a = d
b = 2*x-d
c = -2*(limit-i)
n = ceil((-b + sqrt(b*b-4*a*c)) / (2*a)) 
```

现在我们找到了`n`初始 while (for) 循环的迭代次数，我们可以计算`i`并`x`使用两个公式（见上文）：

```
i += x*n+((n-1)*n)/2*d
x += d*n 
```

我使用一个简单的 C 程序测试了这些公式，它们给出了与 while (for) 循环相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:08:59.503

这是一个二次不等式，因此如果您可以在 O(1) 中计算平方根，则可以在 O(1) 中解决它。根据所涉及号码的类型，这可能是可能的，也可能是不可能的。

如果`i >= limit`一开始，您很容易没有迭代，`n = 0`. 所以让我们假设`i < limit`在开始时，我们假设它在每一步`x`中增加一个固定的正数。`d`

你要解决的不等式是

```
n*(n+1)*d/2 + n*x >= limit - i 
```

通过标准方法求解得到

```
n >= sqrt( (1/2 + x/d)^2 + 2*(limit - i)/d ) - (1/2 + x/d) 
```

`n > 0`具有该属性的最小的是

```
ceiling( sqrt( (1/2 + x/d)^2 + 2*(limit - i)/d ) - (1/2 + x/d) ) 
```

如果所有的量都可以以足够的精度表示为`double`s，那就是 O(1) 计算。但是，如果任何数量很大，则浮点计算可能会有些偏差。那你就得调整了。对于中等大小的数量，一步就足够了。

但是，如果所有数量的大小都适中，那么二进制搜索实际上也是 O(1) - 对数是有界的并且相当小 - 并且可能会更快。

# c++ - 在远程 pc 中执行 exe - C++

> ID：10512985
> 
> 赞同：0
> 
> 时间：2012-05-09T09:07:04.143
> 
> 标签：c++, visual-c++, remote-access

我正在寻找一种方法来从另一个管理服务器（Win2003）在远程 pc（Win2003）中执行我的 exe 并收集该 exe 生成的输出。

我的 app.exe（例如）将执行并将信息写入文本文件。我还想从管理服务器读取这个文本文件（这是在远程服务器中）。

我知道远程系统中 exe 的路径，也知道将生成的文本文件路径。但我不知道如何使用 VC++/C++ 从远程服务器执行 app.exe。

寻求帮助。

谢谢拉古

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:14:21.133

您应该在 IIS 上托管的目标机器上创建一些服务（例如 WCF 服务），或者最好在窗口服务中创建一些服务，确保该服务具有运行可执行文件所需的所有权限，然后对其进行 shell 并[收集标准输出，如下所示这里的例子](https://stackoverflow.com/questions/285760/how-to-spawn-a-process-and-capture-its-stdout-in-net)。然后你可以从远程机器调用服务，它就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T09:15:16.330

我不确定，但也许[**WinRM**](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384468%28v=vs.85%29.aspx)（*Windows 远程管理*）对您的目的有用。[你可以在这里](http://blogs.technet.com/b/askperf/archive/2010/09/24/an-introduction-to-winrm-basics.aspx)阅读介绍。

[msdn.microsoft.com 上的“Windows 远程管理”](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384426%28v=vs.85%29.aspx)。

至于我，几年前我正在使用这项技术。但我使用的是 C# 而不是 C++（别担心，我提供的链接是关于 C++ API 的）。在那里我实现了远程 RS232（comport）处理。WinRM 允许您做许多很酷的事情（例如，您可以控制远程计算机上的进程）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T03:31:29.930

如果应用程序（可执行文件）已经安装在远程机器上，您可以使用 WMI 在远程机器上生成进程。

使用 Win32_Process 并执行 Create 方法。

# c - O_DIRECT 标志不起作用

> ID：10512987
> 
> 赞同：2
> 
> 时间：2012-05-09T09:07:13.563
> 
> 标签：c, linux, io

**板子介绍：**

我正在开发一块板上装有 ST40 芯片的板，它基本上用于捕获 DVB 流并将其显示在电视上。该板在 Linux 操作系统上运行。

**问题描述：**

我正在尝试使用 O_DIRECT 标志从 USB 上的大文件（大约 2 GB）中读取数据。这是相关的代码片段：

```
char subblk[BLKSIZE];
open (filename2,O_CREAT|O_WRONLY|O_DIRECT,S_IRWXU|S_IRWXG|S_IRWXO);
read (fp,subblk,BLKSIZE); 
```

它说读取失败，错误号为 22 -`"EINVAL 22 /* Invalid argument"`

为了澄清这是一个编程问题还是一些依赖于架构的问题，我在我的桌面系统上运行了相同的代码，它运行得非常好，并且我能够打印我刚刚读到的字符。我的 ST40 板上出现故障的原因是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T14:16:22.157

您应该按文件系统块边界对齐缓冲区。为此，您**不应**在堆栈上使用缓冲区（如您的示例中），也不应调用`malloc(BLKSIZE)`，但您应该使用[memalign](http://linux.die.net/man/3/memalign) ()。所以你的代码将是：

```
/* make sure BLKSIZE is defined as 512 */
char *subblk = memalign(BLKSIZE, BLKSIZE);
open (filename2,O_CREAT|O_WRONLY|O_DIRECT,S_IRWXU|S_IRWXG|S_IRWXO);
read (fp,subblk,BLKSIZE); 
```

为什么您的代码在桌面上运行可能是意外对齐**或**不同的文件系统类型（无对齐要求）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T09:31:42.920

从手册页引用：

> O_DIRECT 标志可能会对用户空间缓冲区的长度和地址以及 I/O 的文件偏移量施加对齐限制。在 Linux 中，对齐限制因文件系统和内核版本而异，并且可能完全不存在。然而，目前没有独立于文件系统的接口供应用程序发现给定文件或文件系统的这些限制。一些文件系统为此提供了自己的接口，例如 xfsctl(3) 中的 XFS_IOC_DIOINFO 操作。
> 
> 在 Linux 2.4 下，传输大小，以及用户缓冲区和文件偏移的对齐方式都必须是文件系统逻辑块大小的倍数。在 Linux 2.6 下，对齐到 512 字节边界就足够了。

你的`subblk`块对齐了吗？两个系统是否具有相同的文件系统和/或内核版本？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T11:21:02.343

O_DIRECT 标志在内部使用 DMA，在我的内核中，未启用 DMA。这就是它在我的台式电脑上工作但在主板上不起作用的基本原因。他们有不同的内核，一个启用了 DMA，另一个没有启用 DMA。

# jaxb - JAXB maven 插件 两个声明导致 ObjectFactory 类发生冲突

> ID：10512988
> 
> 赞同：1
> 
> 时间：2012-05-09T09:07:19.923
> 
> 标签：jaxb, jaxb2, maven-jaxb2-plugin

我正在使用 jaxb maven 插件从模式生成类。我有 3 个模式，它们在 3 个 Maven 模块中分开。

a.jar 中的架构 A

b.jar 中的模式 B

c.jar 中的模式 C 导入 a.jar 和 c.jar 并使用它们。

A & B 有一些具有相同名称和相同类型的声明。

```
<xs:element name="elementName" type="elementType" /> 
```

生成 C 类时，出现错误

```
[ERROR] Error while generating code.Location [ file:/path/to/schema/A/a.xsd{7,58}].com.sun.istack.SAXParseException2: Two declarations cause a collision in the ObjectFactory class.

[ERROR] Error while generating code.Location [ file:/path/to/schema/B/b.xsd{7,58}].com.sun.istack.SAXParseException2: Two declarations cause a collision in the ObjectFactory class. 
```

有没有人有解决这个问题的想法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:36:09.120

使用两个具有相同名称的导入元素将导致此错误，因为 JAXB 将尝试在 Java 类中生成两个具有相同名称的属性，这是不允许的。

# header - DotNetNuke - 页眉、内容和页脚

> ID：10512989
> 
> 赞同：8
> 
> 时间：2012-05-09T09:07:25.843
> 
> 标签：header, dotnetnuke, footer

有什么办法，就像 WordPress 一样，创建 header.php、theme-file.php 和 footer.php，然后使用钩子将它们组合起来？对我来说仍然复​​制皮肤文件似乎很疯狂，尤其是当您需要对页眉或页脚的内容进行细微更改时。

非常感谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T15:11:58.100

皮肤只是一个 ascx 控件，因此您可以像封装任何其他 WebForms 视图一样封装它的一部分。您可以将页眉/页脚内容放入他们自己的 ascx 文件中，然后将它们包含在皮肤中。唯一会遇到问题的地方是我认为 DNN 不支持在单独的控件中使用窗格。其他一切都应该是公平的游戏。

您需要将它们放在单独的目录中，以免 DNN 将它们视为其他皮肤。

```
-MySkin
--Controls
---Header.ascx
---Footer.ascx
--Home.ascx
--Home.doctype.xml
--Interior.ascx
--Interior.doctype.xml 
```

然后，在皮肤中，通过在标题中注册控件来包含控件：

```
<%@ Register TagPrefix="myskin" TagName="Header" Src="Controls/Header.ascx" %>
<%@ Register TagPrefix="myskin" TagName="Footer" Src="Controls/Footer.ascx" %> 
```

并通过控制语法包含它：

```
<myskin:Header runat="server" />
....
<myskin:Footer runat="server" /> 
```

该控件不会自动从皮肤访问任何上下文，因此如果您需要使用`SkinPath`或`PortalId`类似的东西，您需要手动将其传递给控件。在控件中，定义一个属性来接收值（使用`<script runat="server">`节写代码【为此设置`Language`控件中的属性为C#】）：

```
<script runat="server">
public string SkinPath { get; set; }
</script> 
```

然后在皮肤中传递值：

```
<myskin:Header runat="server" SkinPath="<%# SkinPath %>" /> 
```

# javascript - 通过 jQuery 在最后一项之后插入

> ID：10512991
> 
> 赞同：1
> 
> 时间：2012-05-09T09:07:42.640
> 
> 标签：javascript, jquery, insertafter

这是我的全部脚本，我知道这很长，但只有一行很重要，我将其全部添加为保险：

```
//Add new Addable div
$('.AddNewE').click(function () {

    var RemoveAddableButton = $('<input type="button" class="RemoveE button red" value="remove" />');

    $(RemoveAddableButton).click(function () {
        $(this).closest('.Addable').remove();
    });

    var TargetId = $(this).attr('id');
    TargetId = TargetId.substring(3);
    var Target = $('.Addable#' + TargetId + ':first');
    var Count = $('.Addable#' + TargetId).size();
    var CloneTarget = $(Target).clone();
    CloneTarget.find('input').val('');
    CloneTarget.insertAfter('.Addable#' + TargetId + ':last'); // ***importantOne
    var TargetName = $(Target).find('input').attr('name');

    if (Count == 1) {

        var CloneName = TargetName + '[1]';
        TargetName = TargetName + '[0]';

        $(Target).find('input').attr('name', TargetName);
        $(Target).find('span[class*="field-validation"]').attr('data-valmsg-for', TargetName);
        $(CloneTarget).find('input').attr('name', CloneName);
        $(CloneTarget).append($(RemoveAddableButton));

        if ($(CloneTarget).find('span[class*="field-validation"]').size() > 0) {
            $(CloneTarget).find('span[class*="field-validation"]').remove();
            $(CloneTarget).append(
                        $('<span class="field-validation-valid invalid-side-note" data-valmsg-replace="true" data-valmsg-for="' + CloneName + '"></span>')
            );
        }

    } else {

        var indx = TargetName.length - 3;
        var CloneTargetName = TargetName.substring(0, indx);
        CloneTargetName = CloneTargetName + '[' + Count + ']';
        $(CloneTarget).find('input').attr('name', CloneTargetName);
        $(CloneTarget).append($(RemoveAddableButton));

        if ($(CloneTarget).find('span[class*="field-validation"]').size() > 0) {

            $(CloneTarget).find('span[class*="field-validation"]').remove();
            $(CloneTarget).append(
                        $('<span class="field-validation-valid invalid-side-note" data-valmsg-replace="true" data-valmsg-for="' + CloneTargetName + '"></span>')
            );

        }

    }

    (function ($) {
        $.fn.updateValidation = function () {
            var form = this.closest("form").removeData("validator").removeData("unobtrusiveValidation");
            $.validator.unobtrusive.parse(form);
            return this;
        };
    })(jQuery);

    $(Target).updateValidation();
    $(CloneTarget).updateValidation();

}); 
```

如果我单击`.AddNewE`按钮然后`div`添加一个新的，但作为我的脚本，我想将此新添加`div`到末尾，`divs`所以我使用

```
CloneTarget.insertAfter('.Addable#' + TargetId + ':last'); 
```

但总是新`div`添加的第二个`div`它意味着总是`:first`和`:last`div 是相同的，并且是第一个也是我检查过的：

```
$('.Addable#' + TargetId).css('border', '');
    $('.Addable#' + TargetId + ':last').css('border', '3px dotted green');
    $('.Addable#' + TargetId + ':first').css('border', '3px dotted red'); 
```

那么问题出在哪里？为什么 jQuery 不能识别 last `div`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T22:20:13.483

问题出在 jQuery 选择器中： $('.Addable#' + TargetId + ':last')

当您有多个具有相同 id (#TargetId) 的元素时，它不是有效的 HTML。ID 是唯一的，您不应拥有超过 1 个具有相同 ID 的元素。

jQuery 选择器假定您使用有效的正确 HTML 标记，因此它不会费心收集具有该 ID 的所有元素。一旦 jQuery 在 DOM 中找到具有该 ID 的第一个元素，它就会停止并在此之后立即附加您的新元素。

尝试将您的 jQuery 选择器简单地更新为： $('.Addable:first') 和 $('.Addable:last') 并查看它是否有效。

# c++ - C++ 流中的无效输入

> ID：10512998
> 
> 赞同：3
> 
> 时间：2012-05-09T09:08:00.250
> 
> 标签：c++, stream

考虑下面的代码，它接受一个整数输入，然后打印 cin 流状态：

```
#include <iostream>  
using namespace std;

int main()
{
    int number;
    cout<<"Enter a number \n";
    cin>>number;
    cout<<cin.rdstate()<<endl;
    return 0;
} 
```

如果输入的数字是“zzzz”，则 rdstate 返回值 4。
如果输入的数字是“10zzzz”，则 rdstate 返回值 0，数字的值为 10，输入流中的“zzzz”它。

我的问题是：
1\. 为什么不将“10zzzz”的输入视为无效输入（至少应该设置一个故障位。）
2\. 检测和处理这种情况的优雅解决方案是什么。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:18:21.307

首先，我想问一下您要做什么：

```
cout<<cin.rdstate()<<endl; 
```

阅读此页面以正确使用 rdstate() [http://www.cplusplus.com/reference/iostream/ios/rdstate/](http://www.cplusplus.com/reference/iostream/ios/rdstate/)

第二：要检查输入是字符串类型还是整数类型，您可能需要添加一些额外的东西，将输入字符串转换为整数数据，并在输入无效输入时响应错误消息。

因此，这将帮助您：

```
int main() {

 string input = "";

 // How to get a string/sentence with spaces
 cout << "Please enter a valid sentence (with spaces):\n>";
 getline(cin, input);
 cout << "You entered: " << input << endl << endl;

 // How to get a number.
 int myNumber = 0;

 while (true) {
   cout << "Please enter a valid number: ";
   getline(cin, input);

   // This code converts from string to number safely.
   stringstream myStream(input);
   if (myStream >> myNumber)
     break;
   cout << "Invalid number, please try again" << endl;
 }
 cout << "You entered: " << myNumber << endl << endl;

 // How to get a single char.
 char myChar  = {0};

 while (true) {
   cout << "Please enter 1 char: ";
   getline(cin, input);

   if (input.length() == 1) {
     myChar = input[0];
     break;
   }

   cout << "Invalid character, please try again" << endl;
 }
 cout << "You entered: " << myChar << endl << endl;

 cout << "All done. And without using the >> operator" << endl;

 return 0;
} 
```