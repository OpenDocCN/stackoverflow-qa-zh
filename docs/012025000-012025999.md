# StackOverflow 问答 12025000-12025999

# java - 为什么 JConsole 上的某些方法被禁用

> ID：12025003
> 
> 赞同：10
> 
> 时间：2012-08-19T07:37:38.983
> 
> 标签：java, jmx, jconsole, mbeans

我可以看到*jconsole*上的某些方法被禁用。

下面给出的是截图`com.sun.management.ThreadMXBean`

![jconsole 截图](../Images/99afbc857983e2100e1aab29ac9fb5cc.png)

这些 MBean 方法的[javadocs](http://docs.oracle.com/javase/7/docs/jre/api/management/extension/com/sun/management/ThreadMXBean.html)没有指定任何关于可访问性部分的内容。

我认为这是一项安全功能，但我无法为此获得具体答案。

这个问题明显的第二部分是如何创建可以在 jconsole 上选择性禁用的自定义 MBean 实现。

下面给出的是系统配置：

> JConsole 版本“1.7.0-b147”
> 
> Java(TM) SE 运行时环境（内部版本 1.7.0-b147）
> 
> Java HotSpot(TM) 64 位服务器 VM（内部版本 21.0-b17，混合模式）

**编辑**：

禁用的方法可以从一个独立的进程中调用。

```
 MBeanServer server = ManagementFactory.getPlatformMBeanServer();
    ObjectName name = new ObjectName("java.lang", "type", "Threading");
    String operationName = "getThreadAllocatedBytes";
    //1 is main thread
    Object[] params = {1};
    String[] signature = new String[]{"long"};
    Object result = server.invoke(name, operationName, params, signature);
    //Result is 682760 on my machine
    System.out.println(result); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-19T08:51:17.263

原因更温和一些，它们仅适用于采用简单类型的操作 - int 或 string。禁用的操作接受更复杂的类型，如数组（没有接受复杂类型的工具，也没有什么可以将字符串转换为复杂类型的 Spring 属性编辑器）

这是一个相关的问题：[Websphere 7.X。JMX，如何启用 JConsole 中的所有操作？](https://stackoverflow.com/questions/11928535/websphere-7-x-jmx-how-to-enable-all-operations-in-jconsole)

**更新：这是基于从 OpenJDK 站点**[http://hg.openjdk.java.net/jdk7u/jdk7u](http://hg.openjdk.java.net/jdk7u/jdk7u)查看 JConsole 的源代码，根据方法签名启用或禁用操作，这封装在方法—— `sun.tools.jconsole.inspector.Utils.isEditable(String type)`。允许的类型是基元、基元包装器、基元数组、

# ruby - 如何在 Ruby 中检查参数“param [：some_value]”

> ID：12025009
> 
> 赞同：7
> 
> 时间：2012-08-19T07:38:45.330
> 
> 标签：ruby, ruby-on-rails-3.2

我知道一些方法来检查参数是否不为零

```
if param[:some_value]
if param[:some_value].present?
if !param[:some_value].nil?    #unless param[:some_value].nil? 
if !param[:some_value].blank?  #unless param[:some_value].blank? 
```

哪一个是正确的和最受欢迎的？它们之间有什么区别？我宁愿使用`if param[:some_value]`它，因为它最简单、最短。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-19T09:51:19.907

以下是和之间`nil?`的一些区别：`blank?``present?`

```
>> "".nil?
=> false
>> "".blank?
=> true
>> "".present?
=> false
>> " ".nil?
=> false
>> " ".blank?
=> true
>> " ".present?
=> false 
```

请注意，`present?`转换为`not nil and not blank`. 另请注意，while`nil?`由 Ruby 提供，`blank?`并且`present?`是 Rails 提供的帮助程序。

那么，该选择哪一个呢？当然，这取决于您想要什么，但是在评估 params[:some_value] 时，您通常不仅要检查它是否为 nil，还要检查它是否为空字符串。这两个都被`present?`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T12:30:37.670

相关案例有：

1.  散列缺少键（及其值）
2.  哈希具有`nil`键的值
3.  散列的值为空字符串 ( `""`) 或空数组 ( `[]`) 的键
4.  哈希对键有一些其他值

根据您要绘制线条的位置，使用适当的方法。

*   1 对 2、3、4：`!param.key?(:some_value)`
*   1、2 对 3、4：`param[:some_value].nil?`
*   1、2、3 对 4：`param[:some_value].blank?`
*   2、3、4 对 1：`param.key?(:some_value)`
*   3、4 对 1、2：`param[:some_value]`
*   4 对 1、2、3：`param[:some_value].present?`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T18:36:32.660

`if param[:some_value]`是最常见的一种。

但是，如果您使用的是布尔数据 ( `true`, `false`)，最好的方法是`if !param[:some_value].nil?`，因为：

```
>> hash = {foo:false, bar:nil}

>> !! hash[:foo]
=> false
>> !! hash[:bar]
=> false

>> !! !hash[:foo].nil?
=> true
>> !! !hash[:bar].nil?
=> false 
```

(`!!` returns the boolean value, which would be tested in an if-statement)

Also it could be important to test if the value is really nil, or if the key-value combo isn't defined. `key?(key)` does that for you.

```
>> hash ={foo:nil}

>> hash[:foo]
=> nil
>> hash[:not_there]
=> nil

>> hash.key?(:foo)
=> true
>> hash.key?(:not_there)
=> false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T07:51:03.147

这取决于你想做什么，但我通常使用这些形式：

```
if param[:some_value]
  ...
end

# and
param[:some_value] && something
# or
param[:some_value] || somethinn 
```

当然，所有这些都只有在参数不能为时才有效`false`。在那种情况下，我会选择`unless param[:some_value].nil?`版本。

# c# - 复制或克隆 DataRow 的简单方法？

> ID：12025012
> 
> 赞同：124
> 
> 时间：2012-08-19T07:39:29.390
> 
> 标签：c#, datatable, datarow

我正在寻找一种简单的方法来克隆 DataRow。有点像拍摄该行的快照并保存它。然后原始 Row 的值可以自由更改，但我们还有另一个未更改的保存副本。这是正确的方法吗？

```
DataRow Source, Destination;
// Assume we create some columns and fill them with values
Destination.ItemArray = Source.ItemArray; 
```

这是否只是将 Snapshot 的 ItemArray 引用设置为指向 Source 中的引用，还是实际上制作了单独的副本？我应该这样做吗？

```
Destination.ItemArray = Source.ItemArray.Clone(); 
```

编辑：我认为第二个代码片段实际上并没有编译。

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-08-19T07:54:26.510

您可以使用[`ImportRow`方法](https://msdn.microsoft.com/en-us/library/system.data.datatable.importrow%28v=vs.110%29.aspx)将 Row 从 DataTable 复制到具有相同架构的 DataTable：

```
var row = SourceTable.Rows[RowNum];
DestinationTable.ImportRow(row); 
```

**更新：**

通过您的新编辑，我相信：

```
var desRow = dataTable.NewRow();
var sourceRow = dataTable.Rows[rowNum];
desRow.ItemArray = sourceRow.ItemArray.Clone() as object[]; 
```

将工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-11T16:38:07.290

^(注意：[cuongle 的 helfpul 答案](https://stackoverflow.com/a/12025072/45375)包含所有要素，但可以简化解决方案（不需要`.ItemArray`），并且可以重新构建以更好地匹配所提出的问题。)

**要创建给定`System.Data.DataRow`实例**的（隔离）克隆，您可以执行以下操作：

```
// Assume that variable `table` contains the source data table.

// Create an auxiliary, empty, column-structure-only clone of the source data table.
var tableAux = table.Clone();
// Note: .Copy(), by contrast, would clone the data rows also.

// Select the data row to clone, e.g. the 2nd one:
var row = table.Rows[1];

// Import the data row of interest into the aux. table.
// This creates a *shallow clone* of it.
// Note: If you'll be *reusing* the aux. table for single-row cloning later, call
//       tableAux.Clear() first.
tableAux.ImportRow(row);

// Extract the cloned row from the aux. table:
var rowClone = tableAux.Rows[0]; 
```

注意：执行***浅*克隆**，它对作为*值类型*实例的列值按原样工作，但还需要做更多的工作来创建包含*引用类型*实例的列值的独立副本（并且创建这样的独立副本并不总是可能的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-24T15:10:02.000

似乎您不想将整个 DataTable 保留为副本，因为您只需要一些行，对吗？如果您有一个 creteria，您可以在表上使用 select 指定，您可以将这些行复制到 DataRow 的额外备份数组中，例如

```
DataRow[] rows = sourceTable.Select("searchColumn = value"); 
```

.Select() 函数有几个选项，例如可以将这个选项读取为 SQL

```
SELECT * FROM sourceTable WHERE searchColumn = value; 
```

然后您可以如上所述导入所需的行。

```
targetTable.ImportRows(rows[n]) 
```

...对于您喜欢的任何有效 n，但每个表中的列必须相同。

关于 ImportRow 你应该知道的一些事情是在使用主键时运行时会出现错误！

首先，我想检查是否已经存在由于缺少主键而失败的行，但是检查总是失败。最后我决定完全清除现有行并再次导入我想要的行。

第二个问题确实有助于理解发生了什么。我使用导入功能的方式是在一列中复制具有交换条目的行。我意识到它总是在变化，它仍然是对数组中行的引用。我首先必须导入原件，然后更改我想要的条目。

该参考资料还解释了当我第一次尝试导入该行时出现的主键错误，因为它实际上是加倍的。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-04-04T19:03:02.220

但要确保您的新行可以在新表中访问，您需要关闭该表：

```
DataTable destination = new DataTable(source.TableName);
destination = source.Clone();
DataRow sourceRow = source.Rows[0];
destination.ImportRow(sourceRow); 
```

# c++ - 如何唤醒休眠的 pthread？

> ID：12025015
> 
> 赞同：6
> 
> 时间：2012-08-19T07:40:18.597
> 
> 标签：c++, linux, pthreads, sleep

我正在用 C++ 编写一个程序。我注意到它获得了许多线程，其目的是每隔一段时间做一些事情，其中​​有 3 或 4 个。我决定通过编写一个调度程序服务进行重构，使用这些线程的其他地方可以订阅该服务，这应该可以将我在任何时候运行的额外事件线程的数量减少到只有一个。

我还没有任何使用它的代码；在我开始写它之前，我想知道它是否可能，并获得一些关于我的设计的反馈。我想要完成的简要描述是这样的：

**添加事件**

1.  调用者提供事件和时间表
2.  时间表提供事件的下一次发生
3.  (event, schedule) 对被添加到事件队列中
4.  *中断睡眠事件线程（即唤醒它）*

**事件线程主循环**

1.  尝试获取事件队列中的下一个事件
2.  如果没有待处理的事件，直接跳到 4
3.  获取下一个事件应该发生的时间
4.  休眠直到下一个事件（如果没有等待事件，则永远休眠）
5.  如果睡眠因任何原因被中断，则循环回 1
6.  如果睡眠成功完成，则执行当前事件
7.  更新队列（删除事件，如果是重复事件则重新插入）
8.  跳回 1

我做了一些研究，知道有可能中断一个睡眠线程，我相信只要防止同时访问事件队列，就不应该有任何危险的行为。我想唤醒一个线程是可能的，java 的 Thread 的 sleep() 调用在某些情况下会抛出一个 InterruptedException ，除非它不依赖于操作系统的底层 sleep 调用，否则它必须以某种方式成为可能。

# 问题

任何人都可以评论我的方法吗？这是一个我最好不要重新发明的轮子吗？具体来说，您如何中断睡眠线程以便在下一条指令处恢复执行，并且是否可以从中断的线程中检测到这一点？

**关于提升的说明**

我敢打赌，你可以编写一个带有 boost 的调度程序，但是由于缺乏更好的短语，它可以在一台机器上编译和运行，这是一堆废话。我之前已经编译过 boost 程序，每个拉入 boost 的文件通常需要 30 秒以上的时间来编译。如果我能避免这个恼人的发展障碍，我非常愿意。

# 附录 - 工作代码 [根据 caf 的建议修改]

这是我生成的有效代码。它已经过初步测试，但可以正确处理具有不同延迟的单个和重复事件。

这是事件线程的主体：

```
void Scheduler::RunEventLoop()
{
    QueueLock();                   // lock around queue access
    while (threadrunning)
    {
        SleepUntilNextEvent();     // wait for something to happen

        while (!eventqueue.empty() && e.Due())
        {                          // while pending due events exist
            Event e = eventqueue.top();
            eventqueue.pop();

            QueueUnlock();         // unlock
            e.DoEvent();           // perform the event
            QueueLock();           // lock around queue access

            e.Next();              // decrement repeat counter
                                   // reschedule event if necessary
            if (e.ShouldReschedule()) eventqueue.push(e);
        }
    }
    QueueUnlock();                 // unlock
    return;                        // if threadrunning is set to false, exit
} 
```

这是睡眠功能：

```
void Scheduler::SleepUntilNextEvent()
{
    bool empty = eventqueue.empty();  // check if empty

    if (empty)
    {
        pthread_cond_wait(&eventclock, &queuelock); // wait forever if empty
    }
    else
    {
        timespec t =                  // get absolute time of wakeup
            Bottime::GetMillisAsTimespec(eventqueue.top().Countdown() + 
                                         Bottime::GetCurrentTimeMillis());
        pthread_cond_timedwait(&eventclock, &queuelock, &t); // sleep until event
    }
} 
```

最后，添加事件：

```
void Scheduler::AddEvent(Event e)
{
    QueueLock();
    eventqueue.push(e);
    QueueUnlock();
    NotifyEventThread();
} 
```

相关变量声明：

```
bool threadrunning;
priority_queue<Event, vector<Event>, greater<Event> > eventqueue;
pthread_mutex_t queuelock; // QueueLock and QueueUnlock operate on this
pthread_cond_t eventclock; 
```

为了处理泛型事件的问题，每个事件都`Event`包含一个指向抽象类型对象的指针，其`action`子类覆盖`action::DoEvent`。这个方法是从内部调用的`Event::DoEvent`。 `actions`由他们的事件“拥有”，即如果不再需要重新安排事件，它们会被自动删除。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-19T07:56:06.387

您正在寻找的是`pthread_cond_t`对象`pthread_cond_timedwait`和`pthread_cond_wait`功能。您可以创建条件变量*isThereAnyTaskToDo*并在事件线程中等待它。添加新事件时，您只需使用`pthread_cond_signal()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T08:01:28.090

在 *NIX 平台和 Windows 上都有多种可能性。您的计时器线程应该在事件/条件变量对象上使用某种定时等待来等待。在 POSIX 平台上，您可以使用[`pthread_cond_timedwait()`](http://www.freebsd.org/cgi/man.cgi?query=pthread_cond_timedwait&apropos=0&sektion=0&manpath=FreeBSD%209.0-RELEASE&arch=default&format=html). 在 Windows 上，您可以选择计算必要的时间增量并用于`WaitForSingleObject()`事件句柄，或者您可以将事件对象与[`CreateTimerQueueTimer()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682485%28v=vs.85%29.aspx)或结合使用[`CreateWaitableTimer()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682492%28v=vs.85%29.aspx)。Boost 也有一些同步原语，您可以使用它们通过类似 POSIX 的原语来实现这一点，但可移植。

**更新：**

POSIX 也有一些计时器功能，请参阅[`create_timer()`](http://www.freebsd.org/cgi/man.cgi?query=timer_create&apropos=0&sektion=0&manpath=FreeBSD%209.0-RELEASE&arch=default&format=html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-19T09:19:52.777

我同意[Greg](https://stackoverflow.com/a/12025076/134633)和[wilx](https://stackoverflow.com/a/12025111/134633) -`pthread_cond_timedwait()`可用于实现您所追求的行为。我只是想补充一点，您可以简化事件线程主循环：

1.  尝试获取事件队列中的下一个事件
2.  如果没有待处理的事件，直接跳到 4
3.  获取下一个事件应该发生的时间
4.  等待条件变量，`pthread_cond_timedwait()`直到下一个事件（或`pthread_cond_wait()`如果没有预定事件）
5.  尝试获取事件队列中的下一个事件
6.  如果还没有过期的事件，返回4
7.  更新队列（删除事件，如果是重复事件则重新插入）
8.  跳回 5

因此，您不必关心*自己为什么*醒来 - 每当您醒来时，您都会检查当前时间并运行任何已过期的事件，然后返回等待。在大多数情况下，当添加新事件时，您当然会发现没有任何事件过期 - 您只需重新计算等待时间。

您可能希望将队列实现为优先级队列，以便下一个到期事件始终位于最前面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T03:15:15.083

您当前的解决方案包含竞争条件 - 例如，这里：

```
QueueLock();                      // lock around queue access
bool empty = eventqueue.empty();  // check if empty
QueueUnlock();                    // unlock

pthread_mutex_lock(&eventmutex);  // lock event mutex (for condition)
if (empty)
{
    pthread_cond_wait(&eventclock, &eventmutex); // wait forever if empty
} 
```

考虑一下如果队列最初是空的，但另一个线程与之竞争并在其间推送一个新值会发生什么`QueueUnlock()`-`pthread_mutex_lock(&eventmutex)`新事件的唤醒将被错过。另请注意，在`SleepUntilNextEvent()`您访问`eventqueue.top()`时无需持有队列锁。

传递给的互斥锁`pthread_cond_wait()`应该是保护与信号相关的共享状态的互斥锁。在这种情况下，“共享状态”是队列本身，因此您可以通过仅使用一个保护队列的互斥体来解决这些问题：

```
void Scheduler::RunEventLoop()
{

    pthread_mutex_lock(&queuemutex);
    while (threadrunning)
    {
        while (!eventqueue.empty() && e.Due())
        {                          // while pending due events exist
            Event e = eventqueue.top();
            eventqueue.pop();

            pthread_mutex_unlock(&queuemutex);
            e.DoEvent();           // perform the event
            e.Next();              // decrement repeat counter
            pthread_mutex_lock(&queuemutex);
                                   // reschedule event if necessary
            if (e.ShouldReschedule()) eventqueue.push(e);
        }

        SleepUntilNextEvent();     // wait for something to happen
    }
    pthread_mutex_unlock(&queuemutex);

    return;                        // if threadrunning is set to false, exit
}

/* Note: Called with queuemutex held */
void Scheduler::SleepUntilNextEvent()
{
    if (eventqueue.empty())
    {
        pthread_cond_wait(&eventclock, &queuemutex); // wait forever if empty
    }
    else
    {
        timespec t =                  // get absolute time of wakeup
            Bottime::GetMillisAsTimespec(eventqueue.top().Countdown() + 
                                         Bottime::GetCurrentTimeMillis());
        pthread_cond_timedwait(&eventclock, &queuemutex, &t); // sleep until event
    }
} 
```

请注意，`pthread_cond_wait()`并`pthread_cond_timedwait()`在它们等待时释放互斥锁（互斥锁被释放并且等待相对于正在发出信号的互斥锁以原子方式开始），因此调度程序在睡眠时不会持有互斥锁。

# java - 通过选择模式在 ListView 中添加条目

> ID：12025020
> 
> 赞同：1
> 
> 时间：2012-08-19T07:41:43.627
> 
> 标签：java, android, arraylist, android-listview, selection

我有一个包含电影的列表视图。该列表在 strings.xml 中声明。用户可以将电影添加到此列表视图，可以编辑条目并可以删除条目。

我正在实现一个新的“插入”方法，它允许用户突出显示（即，使用火箭头，使用鼠标的轨迹球）每个条目，并在所选条目的正下方插入一个新电影。我的问题是，当我从插入活动中设置结果时，我的代码中出现了 arrayindexoutofbounds 错误：

我的 OnActivityResult 案例之一：

```
 case INSERT_MOVIE:
            Lab8_082588FetchDetails insertMovie = new Lab8_082588FetchDetails();
            ListView list = getListView();
            list.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
            NumberFormat formatterInsert = new DecimalFormat("###,###,###");

            insertMovie.setTitle(data
                    .getStringExtra(Lab8_082588Insert.TITLE_STRING));
            insertMovie.setGross("$"
                    + formatterInsert.format(Double.parseDouble(data
                            .getStringExtra(Lab8_082588Insert.GROSS_STRING))));
            insertMovie.setDate(data
                    .getStringExtra(Lab8_082588Insert.DATE_STRING));
            results.add(insertMovie);
            adapter.notifyDataSetChanged(); 
```

我的 OnOptionsItemSelected：

```
 @Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection using item.getItemId()
    switch (item.getItemId()) {
    case R.id.add:
        add();
        break;
    case R.id.insert:
        insert(item);
        break;
    }
    return true;
}

private void insert(MenuItem item) {
    // TODO Auto-generated method stub
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
            .getMenuInfo();
    Intent insertData = new Intent(Lab8_082588.this,
            Lab8_082588Insert.class);
    insertData.putExtra(Lab8_082588.CURRENT_ROW, info.position); //nullPointerException
    startActivityForResult(insertData, Lab8_082588.INSERT_MOVIE);
} 
```

我的插入类：

```
 public class Lab8_082588Insert extends Activity {

public static final String TITLE_STRING = "TITLE_STRING";
public static final String GROSS_STRING = "GROSS_STRING";
public static final String DATE_STRING = "DATE_STRING";
public static final String PASSED_ROW = "PASSED_ROW";

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.addeditinsert);
    Intent rowNumber = getIntent();
    results.add(data.getIntExtra(Lab8_082588Insert.PASSED_ROW, 0) + 1, insertMovie);
            adapter.notifyDataSetChanged();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu3, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection using item.getItemId()
    switch (item.getItemId()) {
    case R.id.insert2:
        next();
        break;
    }
    return true;
}

private void next() {
    // TODO Auto-generated method stub
    EditText movieTitle = (EditText) findViewById(R.id.etTitle);
    EditText movieGross = (EditText) findViewById(R.id.etGross);
    EditText movieDate = (EditText) findViewById(R.id.etDate);

    String title = movieTitle.getText().toString();
    String gross = movieGross.getText().toString();
    String date = movieDate.getText().toString();

    if ((title.length() > 0) && (gross.length() > 0)
            && (date.length() == 4)) {

        Intent data = getIntent();
        int rowNumber = getIntent().getIntExtra(Lab8_082588.CURRENT_ROW, 0);
        data.putExtra(Lab8_082588Insert.TITLE_STRING, title);
        data.putExtra(Lab8_082588Insert.GROSS_STRING, gross);
        data.putExtra(Lab8_082588Insert.DATE_STRING, date);
        data.putExtra(Lab8_082588Insert.PASSED_ROW, rowNumber);
        setResult(RESULT_OK, data);
        finish();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T09:55:27.040

我不完全理解您的代码，但您为什么使用该`getCheckedItemPosition()`方法的重新运行作为新插入项目的索引？

如果您只想在用户选择的行*之后*插入它们，那么只需传递用户单击的项目的位置（到`insertData`，我在上一个问题中看到您知道如何执行此操作）并将其传递给为插入收集数据的活动。在插入活动中，然后沿着用户插入的数据，返回行的位置（将其增加一，以便您可以在下一个位置插入）并将其用作列表添加中的索引`onActivityResult`。

你不是很明白我说的话。在`insert`方法中：

```
private void insert(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
            .getMenuInfo();
    Intent insertData = new Intent(Lab8_082588.this,
            Lab8_082588Insert.class);
    insertData.put("CURRENT_ROW", info.position);// there is no need for extra data, you're going to insert it anyway
    startActivityForResult(insertData, Lab8_082588.INSERT_MOVIE);
} 
```

然后在插入活动中简单地获取该行号并在返回结果时将其添加到意图中：

```
//
super.onCreate(savedInstanceState);
setContentView(R.layout.addeditinsert);
rowNumber = getIntent().getExtra("CURRENT_ROW"); 
```

然后将其传递到终点`Intent`：

```
 hobby.putExtra(TITLE_STRING, title);
    hobby.putExtra(GROSS_STRING, gross);
    hobby.putExtra(DATE_STRING, date);
    hobby.putExtra("PASSED_ROW", rowNumber);
    setResult(RESULT_OK, hobby);
    finish(); 
```

在`onActivityResult`：

```
results.add(data.getIntExtra("PASSED_ROW") + 1, insertMovie); 
```

# ruby-on-rails - 启动 Rails 服务器时的 Gem::LoadError

> ID：12025023
> 
> 赞同：1
> 
> 时间：2012-08-19T07:42:16.720
> 
> 标签：ruby-on-rails, ruby, gem

我昨天重新安装了 Ubuntu 12.04，并且第一次在这个环境中使用 Ruby/Rails，并直接从我的 Windows 机器上复制了这个项目。我安装了 ruby​​gems，然后`cd`'d 到项目目录并运行`bundle install`，它没有任何错误。

当尝试启动服务器时 ( `rails s`) ，服务器永远不会启动，我得到一个异常：

> /usr/lib/ruby/vendor_ruby/1.8/rubygems/dependency.rb:247:in `to_specs': 在 [] (Gem::LoadError) 中找不到 railties (>= 0)
> 
> 来自 /usr/lib/ruby/vendor_ruby/1.8/rubygems/dependency.rb:256:in gem' 来自 /usr/local/bin/rails:18`to_spec'
> from /usr/lib/ruby/vendor_ruby/1.8/rubygems.rb:1208:in`

我的 Gemfile 如下：

```
source 'http://rubygems.org'

gem 'rails', '3.2.6'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'
gem 'execjs'
gem 'therubyracer'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'devise'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

一切都是生成器留下的大部分内容。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:05:54.963

终于让它工作了。对于任何想要完整的 shell 日志的人，这里是：[link](http://pastie.org/private/ujx4uh7umdwmrrwqljhw)

问题是我相信版本。使用 RVM 时，您必须将终端设置为作为登录 shell 运行命令。由于出于某种原因，一切都需要作为 sudo 运行才能正常工作（我是 Linux 新手），所以我运行了`sudo gem install rails`, then `sudo bundle install`，现在它似乎可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T09:29:32.613

也许，这个错误是由 rvm 环境引起的。

我们可以通过使用 rvm 在特定的 rails 应用程序中使用特定的 ruby​​ 和 gems。

试试下面的。

```
rvm gemset 创建 [gemset_name]
cd ~/Documents/Programming/Web/threexortwo
rvm 使用 ruby​​-1.9.3-p[XXX]@[gemset_name]
捆绑安装（不使用 sudo）
rails -v（不使用 sudo）
rails s（不使用 sudo）
```

# regex - 使用 AWK 正则表达式

> ID：12025029
> 
> 赞同：0
> 
> 时间：2012-08-19T07:43:35.223
> 
> 标签：regex, parsing, awk

我有一个文件，其中具有以下格式的值-

```
20/01/2012 01:14:27;UP;UserID;User=bob email=abc@sample.com 
```

我想从此文件中选择每个值（不是标签）。说标签，我的意思是说对于 string `email=abc@sample.com`，我只想挑选`abc@sample.com`和对于 sting `User=bob`，我只想 pic `bob`。所有空格分隔的值都很容易选择，但我无法选择用分号分隔的值。下面是我使用的命令`awk`-

```
awk '{print "1=",$1} /;/{print "2=",$2,"3=",$3}' sample_file 
```

在`$2`，我得到了完整的字符串，直到字符串`bob`的其余部分被分配给`$3`。虽然我可以使用`substr`提供`awk`但我想安全起见，字符串长度可能会有所不同。有人可以告诉我如何设计这样`regex`来解析我的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T07:57:27.063

您可以使用以下方式设置多个分隔符`awk -F`：

```
awk -F "[ \t;=]+" '{ print $1, $2, $3, $4, $5, $6, $7, $8 }' file.txt 
```

结果：

```
value1 value2 value3 value4 label1 value5 label2 value6 
```

**编辑：**

您可以使用 删除等号之前的任何内容`sub (/[^=]*=/,"", $i)`。这将允许您只打印“值”：

```
awk 'BEGIN { FS="[ \t;]+"; OFS=" " } { for (i=1; i<=NF; i++) { sub (/[^=]*=/,"", $i); line = (line ? line OFS : "") $i } print line; line = "" }' file.txt 
```

结果：

```
20/01/2012 01:14:27 UP UserID bob abc@sample.com 
```

# c# - WCF 用户身份验证最佳实践

> ID：12025032
> 
> 赞同：1
> 
> 时间：2012-08-19T07:43:50.857
> 
> 标签：c#, .net, wcf

我正在编写一个使用 WCF 与 Web 服务通信的应用程序。数据库还用于存储与用户相关的数据，例如凭据。数据库中的密码是散列+加盐的。

用户必须使用提供给他的用户名和密码手动登录。然后，应用程序使用代理与负责身份验证的 Web 服务进行通信。Web 服务然后检查用户是否存在并将数据返回给客户端，然后客户端显示数据。否则，如果凭据无效或服务器无法访问，则会显示错误。

我的问题：

*   为了减少 Web 服务完成的工作量，我希望由客户端完成身份验证过程。换句话说，客户端将用户名发送到 Web 服务，然后 Web 服务检查数据库中是否存在“用户”表中该用户名的条目。如果是，Web 服务将散列和加盐的密码（来自数据库）返回给客户端。然后客户端将用户输入的密码与获得的哈希/加盐密码进行比较。没有解密，输入的密码只是使用相同的盐字节进行哈希处理，然后比较密码。

    这是可以接受的行为吗？

*   如果在数据库中找不到提供的用户名，我应该如何处理？服务器是否应该抛出异常，然后由客户端处理？或者我应该将身份验证部分分为两个步骤：

    1）确保用户存在。

    2）从数据库中获取加密密码。

    然后，第一步将返回一个特定的值，客户端将其理解为“用户不存在”（例如：布尔值“False”）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T07:59:00.697

我对您的方法的**主要反对意见**是您想让**客户**决定他是否经过身份验证。

**不要那样做！**

因为在这种情况下，任何恶意攻击者都可以始终声明自己已通过身份验证（基本上忽略服务器对第一次调用的响应），然后访问您的系统！

关于是否应该让敲门的客户的决定**必须掌握在您手中**- 例如，这是您**绝对必须**在后端/服务器端做的事情。

永远不要让客户做出这个决定！

# .htaccess - .htaccess 文件在 aptana studio 3 中不可见

> ID：12025034
> 
> 赞同：-1
> 
> 时间：2012-08-19T07:44:03.107
> 
> 标签：.htaccess, aptana3

我使用 aptana studio 3，当我创建新的 php 项目时，在窗口“项目资源管理器”中 .htaccess 文件是不可见的，（我可以看到的所有其他文件）。有人可以告诉我，如何让这个文件在 aptana 项目中可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T08:01:05.717

我认为this other stackoverflow post会帮助你。.htaccess 文件也是一个隐藏文件，因为 . 在所有 Unix 系统中的名称前面：

[如何在 Aptana 的项目视图中显示隐藏文件？](https://stackoverflow.com/questions/2166755/how-to-show-hidden-files-in-aptanas-project-view)

看看这个！

# javascript - 使用 sinon.js 使用基于真实构造函数/原型的 spy 方法创建“间谍对象”

> ID：12025035
> 
> 赞同：11
> 
> 时间：2012-08-19T07:44:43.603
> 
> 标签：javascript, node.js, mocha.js, sinon

我使用 sinon.js 作为在我的 Mocha 测试中排除依赖项的一种方式。我更喜欢 'spy' 方法而不是经典的 mock 方法，因为 spy 的内省似乎比经典的 mock 对象有点落后的想法更清晰，并且提供了更大的灵活性。

也就是说，我想知道在为整个对象创建测试间谍时我是否使用不正确。假设我有一个测试依赖项，上面有 4 个方法，我想存根这些方法中的每一个，并对其中的一个或两个进行断言。目前我正在这样做：

```
var spyObj = {
  aMethod: sinon.spy(),
  otherMethod: sinon.spy(),
  whatever: sinon.spy()
}; 
```

然后我只问诸如`spyObj.aMethod.calledWith(a, b, c)`.

有没有比在测试套件本身中重复方法名称更好的方法来模拟整个类？看起来 sinon.stub() 试图遍历给定对象的所有成员，但这似乎不能作为在更现代的 JS 运行时（如 V8）中获取大多数对象的所有方法的一种方式，除非对象实际上是可枚举的东西。它还尝试对实际对象进行修补，而不是返回等效对象，这在某种程度上是不可取的。我只需要一个符合接口的对象，但行为类似于空对象，除非我另有说明。

能够执行以下操作会很好：

```
var spyObject = sinon.spy(MyClass.prototype); 
```

如何在 Node.js 中找到构造函数/原型的所有方法，以便制作像上面这样的包装器？

这更多是关于排除逻辑，而不是测试对许多方法的调用（我试图限制为一个，或者推送两个）。例如，可能会执行不需要的 I/O 或执行时需要额外的复杂夹具的事情。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-26T13:16:36.290

从 Sinon 1.6.0 开始，您可以：

```
var stub = sinon.createStubInstance(MyClass) 
```

请参阅[Stub API 部分](http://sinonjs.org/docs/#stubs-api)或[源代码](https://github.com/cjohansen/Sinon.JS/blob/master/lib/sinon.js#L300)`sinon.stub`中的文档。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-20T12:12:48.773

我找到了一种方法来做到这一点：

```
/** Accept a prototype and return a full stub object */
function stub(obj, target) {
  var cls = (typeof obj == 'function') ? obj.prototype : obj;
  target = target || {};

  Object.getOwnPropertyNames(cls).filter(function(p){
    return typeof cls[p] == 'function';
  }).forEach(function(p) { target[p] = sinon.stub() });

  return cls.__proto__ ? stub(cls.__proto__, target) : target;
}; 
```

像这样使用它：

```
var response = stub(http.ServerResponse);
response.getHeader.withArgs('X-Foo').returns('bob');
response.getHeader.withArgs('X-Bar').returns('barry');

console.log(response.getHeader('X-Foo')); // bob
console.log(response.getHeader('X-Bar')); // barry 
```

# mysql - SQL Server 数据类型

> ID：12025036
> 
> 赞同：0
> 
> 时间：2012-08-19T07:45:30.670
> 
> 标签：mysql, sql-server

请查看例如。

![在此处输入图像描述](../Images/36eee14b3d708bd89128a7aa09dd6d13.png)

我不懂`SQL Server`数据类型。它有一个`nvarchar`数据类型列。

我想将该数据导入`MySql`.

这是什么专栏。`Md5`还是`Base64`？

你有想法吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T07:53:08.093

根据 msdn 可变长度 Unicode 字符串数据。`n`定义字符串长度，可以是 1 到 4,000 之间的值。`max`表示最大存储大小为 2^31-1 字节（2 GB）。存储大小（以字节为单位）是输入数据实际长度的两倍 + 2 个字节。`nvarchar`are`national char varying`和的 ISO 同义词`national character varying`。

所以它是一个支持 Unicode 的纯字符串数据类型。我希望现在您可以轻松地在 MySQL 中找到匹配的数据类型。

# jquery - 如何将：id传递给jquery可排序函数

> ID：12025038
> 
> 赞同：0
> 
> 时间：2012-08-19T07:46:36.550
> 
> 标签：jquery, ruby-on-rails

我是 Jquery 的新手。将参数传递给 Jquery 函数时出现问题。我的应用程序有嵌套资源。

```
class Post < ActiveRecord::Base
  has_many :votes 
```

路线是

```
sort_votes_post POST   /posts/:id/sort_votes(.:format)    posts#sort_votes 
```

可排序功能是

```
$(function() {  
$("#sortable").sortable({
    update: function() {
        $.ajax({
            type: 'post',
            data: $('#sortable').sortable('serialize'),
            url: '/posts/[not sure how to pass :id here]/sort_votes'})
    }
});
$("#sortable").disableSelection();
}); 
```

不知道如何将 :id 传递给 url 选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T07:58:20.273

如果您的代码在资产管道中，我不确定您是否可以，因为管道是预编译的，因此任何动态细节都不起作用。

这有点 hacky 但我建议从视图中传递一个变量，所以在添加 application.js 之前添加

```
<script>
   var url = [your url]
</script> 
```

然后在js中

```
$(function() {  
$("#sortable").sortable({
    update: function() {
        $.ajax({
            type: 'post',
            data: $('#sortable').sortable('serialize'),
            url: url
    }
});
$("#sortable").disableSelection();
}); 
```

# java - php 和 java hmac_sha1 哈希不一样

> ID：12025040
> 
> 赞同：0
> 
> 时间：2012-08-19T07:47:16.710
> 
> 标签：java, php, base64, hashcode, hmacsha1

我正在尝试将一条消息散列到用 php 编写并由 HMAC_SHA1 算法编码的服务器端（我无法更改他的代码）。我正在用 Java 编写代码。php代码如下：

```
$utf8Str = mb_convert_encoding($strToSign, "UTF-8");
$hmac_sha1_str = base64_encode(hash_hmac("sha1", $utf8Str, KEY));
$signature = urlencode($hmac_sha1_str); 
```

我的Java代码是：

```
private static String HashStringSign(String toHash){
try {
    String afterUTF = new String(toHash.getBytes(), "UTF-8");
    String res = hmac_sha1(afterUTF, SecretAccessKey);
    String signature = new String(Base64.encode(res.getBytes()));
    String result = URLEncoder.encode(signature);
        return result;
    } catch (UnsupportedEncodingException e) {
        throw new RuntimeException(e);
    }
}

private static String hmac_sha1(String value, String key) {
    try {
        // Get an hmac_sha1 key from the raw key bytes
        byte[] keyBytes = key.getBytes();           
        SecretKeySpec signingKey = new SecretKeySpec(keyBytes, "HmacSHA1");

        // Get an hmac_sha1 Mac instance and initialize with the signing key
        Mac mac = Mac.getInstance("HmacSHA1");
        mac.init(signingKey);

        // Compute the hmac on input data bytes
        byte[] rawHmac = mac.doFinal(value.getBytes());

        // Convert raw bytes to Hex
        byte[] hexBytes = new Hex().encode(rawHmac);
        return new String(hexBytes, "UTF-8");
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
} 
```

我遵循了 php 代码中使用的每种散列方法，并且按照您所看到的相同顺序。也许java中有一个函数在php中工作不同？

我正在使用 - com.sun.org.apache.xml.internal.security.utils.Base64 java.net.URLEncoder、javax.crypto 和 org.apache.commons.codec.binary

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T09:49:30.683

在您的`hash_hmac`函数中，您需要将第四个参数设置为 true。

## PHP 代码不负责，仅限 Java：

所以现在你说你不能改变 PHP 端，你可以对你的 Java 代码执行以下操作。

在 Java 代码的最后一步中，您将原始字节数组转换为十六进制。但是，PHP 会生成 base64 编码的十六进制，而不仅仅是十六进制。

因此，在您的 Java 步骤结束时，只需对您的十六进制进行 base64 编码，您将获得相同的值。[https://stackoverflow.com/questions/9845767/base64-encoder-java#](https://stackoverflow.com/questions/9845767/base64-encoder-java#)

# javascript - DRY way to stack multiple metrics with d3.layout.stack()

> ID：12025046
> 
> 赞同：1
> 
> 时间：2012-08-19T07:48:00.607
> 
> 标签：javascript, d3.js

I'm using a d3.js [Streamgraph](http://mbostock.github.com/d3/ex/stream.html) to show sales over time. Then I've got a transition to show profit over the same period. The data looks like this:

```
var data = [{
    "name": "apples",
    "sales": [{
        "x": 0,
        "y": 941
    }, {
        "x": 1,
        "y": 490
    }],
    "profit": [{
        "x": 0,
        "y": 6
    }, {
        "x": 1,
        "y": 3
    }]
}, {
    "name": "oranges",
    "sales": [{
        "x": 0,
        "y": 344
    }, {
        "x": 1,
        "y": 425
    }],
    "profit": [{
        "x": 0,
        "y": 3
    }, {
        "x": 1,
        "y": 2
    }]
}]; 
```

It works, but I'm currently generating the stacked data in a somewhat ham-fisted way, applying [stack.values](https://github.com/mbostock/d3/wiki/Stack-Layout#wiki-values) twice:

```
var stack_sales = d3.layout.stack()
    .offset("wiggle")
    .values(function(d) { return d.sales; });

var stack_profit = d3.layout.stack()
    .offset("wiggle")
    .values(function(d) { return d.profit; });

stack_sales(data);
stack_profit(data); 
```

I've been getting into [JavaScript Patterns](http://shop.oreilly.com/product/9780596806767.do) but can't see the DRY way to do this. Can you help?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:49:47.657

One option is to define the values function dynamically:

```
var stack = d3.layout.stack().offset("wiggle");
["sales", "profit"].forEach(function(metric) {
  stack.values(function(d) { return d[metric]; })(data);
}); 
```

Another option would be to transpose your data so that the metrics are on the outside and the series are on the inside:

```
var metrics = [
  {
    "name": "sales",
    "series": [
      {
        "name": "apples",
        "values": [
          {"x": 0, "y": 941}, 
          {"x": 1, "y": 490}
        ]
      }, 
      {
        "name": "oranges",
        "values": [
          {"x": 0, "y": 344}, 
          {"x": 1, "y": 425}
        ]
      }
    ]
  }, {
    "name": "profits",
    "series": [
      {
        "name": "apples",
        "values": [
          {"x": 0, "y": 0}, 
          {"x": 1, "y": 6}
        ]
      }, 
      {
        "name": "oranges",
        "values": [
          {"x": 0, "y": 1}, 
          {"x": 1, "y": 3}
        ]
      }
    ]
  }
]; 
```

Then you can access the values statically:

```
var stack = d3.layout.stack()
    .offset("wiggle")
    .values(function(d) { return d.values; });

metrics.forEach(function(metric) {
  stack(metric.series);
}); 
```

# iphone - 如何使用phonegap开发iphone应用程序？

> ID：12025049
> 
> 赞同：1
> 
> 时间：2012-08-19T07:48:15.587
> 
> 标签：iphone, html, cordova

我是 iPhone 开发的新手。我正在使用该`phonegap`框架开发一个 iPhone 应用程序。我使用 HTML 代码创建了一个表格视图。该 HTML 代码在 Xcode4.3 中不起作用。但是，它确实在浏览器中工作。

如何使用 phonegap 在 xcode 中运行 HTML 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T08:17:37.393

希望这会帮助你。

对于最新的cordova-2.0 - [http://docs.phonegap.com/en/2.0.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/2.0.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

对于科尔多瓦 1.9 - [http://docs.phonegap.com/en/1.9.0rc1/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/1.9.0rc1/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

为手机设计网页布局[http://codiqa.com/](http://codiqa.com/)这个网站可以帮助你

谢谢

# mongodb - 如何映射来自另一个集合的键

> ID：12025053
> 
> 赞同：4
> 
> 时间：2012-08-19T07:49:57.143
> 
> 标签：mongodb, mapreduce

假设我有一组这样的用户：-

```
{
  "_id" : "1234",
  "Name" : "John",
  "OS" : "5.1",
  "Groups" : [{
      "_id" : "A",
      "Name" : "Group A"
    }, {
      "_id" : "C",
      "Name" : "Group C"
    }]
} 
```

我有一系列这样的事件：-

```
{
  "_id" : "15342",
  "Event" : "VIEW",
  "UserId" : "1234"
} 
```

我可以使用 mapreduce 来计算每个用户的事件数，因为我可以发出“UserId”并从中算出，但是我现在要做的是按组计算事件数。

如果我的事件文档中有一个“组”数组，那么这很容易，但是我没有，这只是一个例子，它的实际应用要复杂得多，我不想复制所有这些数据进入事件文档。

我在[http://tebros.com/2011/07/using-mongodb-mapreduce-to-join-2-collections/](http://tebros.com/2011/07/using-mongodb-mapreduce-to-join-2-collections/)看到了一个例子，但我看不出它在这种情况下是如何应用的，因为它是聚合值从两个地方......我真正想做的就是执行查找。

在 SQL 中，我只需将扁平化的 UserGroup 表加入事件表，然后 GROUP BY UserGroup.GroupName

我会对 mapreduce 的多次传递感到满意...首先通过 UserId 计数到类似 { "_id" : "1234", "count" : 9 } 但我在下一次传递时卡住了...如何包含组 ID

我考虑过的一些潜在方法：-

*   在活动文档中包含群组信息（不可行）
*   弄清楚如何“加入”用户集合或从 map 函数中查找用户组，这样我也可以发出组 ID（不知道该怎么做）
*   弄清楚如何将事件和用户集合“加入”到我可以运行 mapreduce 的第三个集合中

什么是可能的，每种方法的好处/问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T00:40:34.963

您的第三种方法是要走的路：

> 弄清楚如何将事件和用户集合“加入”到我可以运行 mapreduce 的第三个集合中

为此，`J`您需要使用 map-reduce 所需的“已连接”数据创建一个新集合。您可以为此使用多种策略：

1.  更新您的应用程序以`J`在正常业务过程中插入/更新。这在您需要非常频繁地运行 MR 并使用最新数据的情况下是最好的。它可以大大增加代码的复杂性。从实现的角度来看，您可以直接（通过写入`J`）或间接（通过将更改写入日志集合`L`，然后将“新”更改应用于`J`）来执行此操作。如果您选择日志收集方法，您将需要确定更改内容的策略。常见的有两种：high-watermark（基于`_id`时间戳）和使用日志集合作为队列的[`findAndModify`](http://www.mongodb.org/pages/viewpage.action?pageId=6914054)命令。

2.  以批处理模式创建/更新`J`。在高性能系统的情况下，上述策略的多次更新会影响性能，这是要走的路。如果您不需要非常频繁地运行 MR 和/或您不必保证最新的数据准确性，这也是可行的方法。

如果您选择 (2)，您将不得不遍历您需要加入的集合中的文档——正如您所知道的，Mongo map-reduce 在这里帮不了您。有很多可能的方法可以做到这一点：

1.  如果您没有很多文档并且它们很小，则可以通过直接连接到数据库来在数据库之外进行迭代。

2.  如果您不能执行 (1)，您可以使用`db.eval()`. 如果文档数量不多，请确保默认使用`nolock: true`as `db.eval`is blocking。这通常是我选择的策略，因为我倾向于处理非常大的文档集，并且我无法通过网络移动它们。

3.  如果您不能执行 (1) 并且不想执行 (2)，您可以将集合克隆到具有临时数据库的另一个节点。Mongo 为此提供了一个方便的[cloneCollection](http://www.mongodb.org/display/DOCS/cloneCollection+Command)命令。请注意，如果数据库需要身份验证，这将不起作用（不要问为什么；这是一个奇怪的 10gen 设计选择）。在这种情况下，您可以使用`mongodump`和`mongorestore`。一旦您拥有新数据库的本地数据，您就可以在您认为合适的时候使用它。完成 MR 后，您可以更新生产数据库中的结果集合。我将这种策略用于一次性 map-reduce 操作，并进行大量预处理，以免加载生产副本集。

祝你好运！

# java - 我应该如何在javaFx中为卡拉OK之类的应用程序定时突出显示带有音频的文本

> ID：12025055
> 
> 赞同：2
> 
> 时间：2012-08-19T07:50:02.207
> 
> 标签：java, audio, sync, javafx, javafx-2

我正在构建一个 JavaFx 应用程序，其中有一个文本文件和一个音频 mp3 文件，可以将其读出。当我使用[MediaPlayer](http://docs.oracle.com/javafx/2/api/javafx/scene/media/MediaPlayer.html)对象播放音频并显示文本文件中的文本时。有没有办法在播放每个单词时突出显示它们？我知道字幕是如何编码并保存在一个单独的文件中的，但在这里必须为每个单词完成。即文本文件上的每个单词都应该有元数据，它应该从 mp3 文件的开头突出显示偏移多长时间。

另一种方法是使用公式和文本和音频文件的长度进行计算，并找到每个世界应该保持突出显示的大致时间，但是这个凸轮会使突出显示不同步。

是否有任何标准方式或标准元数据格式可以在其中对信息进行编码，当旁白音频播放时，一个单词应保持突出显示多少时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:05:21.730

我为此使用了直接的逻辑。这些东西不能是自动的（可以，但需要无尽的努力），所以首先你需要让用户设置时间。显示 .txt 文件，并在后台播放歌曲。借助此功能，用户可以突出显示单词，现在您可以借助 System.Current 时间（以毫秒为单位）获取时间，并将时间存储在数组或列表中。完成后，现在您可以播放卡拉 OK。根据时间高亮显示单词。按下 ESC 键时，单词将高亮显示。根据需要更改 .txt 文件。请忽略我糟糕的编码风格：p

这是 Swing 中的演示：

```
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.lang.reflect.InvocationTargetException;
import java.util.Scanner;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.UnsupportedAudioFileException;
import javax.swing.*;
import javax.swing.text.*;
import javax.swing.event.*;
import javax.swing.GroupLayout.*;

public class newh extends JFrame
                       implements DocumentListener {
 public static int[] arry=new int[1000];

static int first=0,last=0,scan=0,acount=0;int flag=1,point=0,j=0;long value,stat;
private JTextField entry;private boolean fir=true;
private JLabel jLabel1;
private JScrollPane jScrollPane1;
private JLabel status;
private JTextArea textArea;
private  JFrame frame;
long start;
final static Color  HILIT_COLOR = Color.YELLOW;
final static Color  ERROR_COLOR = Color.PINK;
final static String CANCEL_ACTION = "cancel-search";
final static String SMALL_ICON = "cancel-search";
final Color entryBg;
final Highlighter hilit;
final Highlighter.HighlightPainter painter;
private long start2;
JButton startButton;

public newh() throws FileNotFoundException {
    initComponents();
String[] a=new String[1000];
    InputStream in = getClass().getResourceAsStream("lyri.txt");
    try {
    textArea.read(new InputStreamReader(in), null);

    } catch (IOException e) {
    e.printStackTrace();
    }

   hilit = new DefaultHighlighter();
    painter = new DefaultHighlighter.DefaultHighlightPainter(HILIT_COLOR);
    textArea.setHighlighter(hilit);

    entryBg = entry.getBackground();
    entry.getDocument().addDocumentListener(this);

   InputMap im = entry.getInputMap(JComponent.WHEN_FOCUSED);
    ActionMap am = entry.getActionMap();

     im.put(KeyStroke.getKeyStroke("ESCAPE"), CANCEL_ACTION);
   am.put(CANCEL_ACTION, new CancelAction());

  }

/** This method is called from within the constructor to
 * initialize the form.
 */

  private void initComponents() {

    entry = new JTextField();
    textArea = new JTextArea();
    textArea.setBackground(Color.ORANGE);
    status = new JLabel();
    jLabel1 = new JLabel();
    frame = new JFrame();

  setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    setTitle("TextFieldDemo");

    textArea.setColumns(20);
    textArea.setLineWrap(true);
    textArea.setRows(5);
    textArea.setWrapStyleWord(true);
    textArea.setEditable(false);
    jScrollPane1 = new JScrollPane(textArea);
 final JFrame jar=new JFrame();

    jLabel1.setText("Enter text to search:");
startButton = new JButton("Start");jar.add(startButton);
jar.setVisible(true);jar.pack();
    startButton.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            try {
                ColoredTextTest.start();
            } catch (InterruptedException ex) {
                Logger.getLogger(newh.class.getName()).log(Level.SEVERE, null, ex);
            } catch (InvocationTargetException ex) {
                Logger.getLogger(newh.class.getName()).log(Level.SEVERE, null, ex);
            }
           setVisible(false);
           jar.setVisible(false);

            }
    });
    GroupLayout layout = new GroupLayout(getContentPane());
    getContentPane().setLayout(layout);

//Create a parallel group for the horizontal axis
ParallelGroup hGroup = layout.createParallelGroup(GroupLayout.Alignment.LEADING);

//Create a sequential and a parallel groups
SequentialGroup h1 = layout.createSequentialGroup();
ParallelGroup h2 = layout.createParallelGroup(GroupLayout.Alignment.CENTER);

//Add a container gap to the sequential group h1
h1.addContainerGap();

//Add a scroll pane and a label to the parallel group h2
h2.addComponent(jScrollPane1, GroupLayout.Alignment.LEADING, GroupLayout.DEFAULT_SIZE, 600, Short.MAX_VALUE);
h2.addComponent(status, GroupLayout.Alignment.LEADING, GroupLayout.DEFAULT_SIZE, 900, Short.MAX_VALUE);

//Create a sequential group h3
SequentialGroup h3 = layout.createSequentialGroup();
h3.addComponent(jLabel1);
h3.addPreferredGap(LayoutStyle.ComponentPlacement.RELATED);
h3.addComponent(entry, GroupLayout.DEFAULT_SIZE, 900, Short.MAX_VALUE);

//Add the group h3 to the group h2
h2.addGroup(h3);
//Add the group h2 to the group h1
    h1.addGroup(h2);

h1.addContainerGap();

//Add the group h1 to the hGroup
hGroup.addGroup(GroupLayout.Alignment.TRAILING, h1);
//Create the horizontal group
layout.setHorizontalGroup(hGroup);

//Create a parallel group for the vertical axis
ParallelGroup vGroup = layout.createParallelGroup(GroupLayout.Alignment.LEADING);
//Create a sequential group v1
SequentialGroup v1 = layout.createSequentialGroup();
//Add a container gap to the sequential group v1
v1.addContainerGap();
//Create a parallel group v2
ParallelGroup v2 = layout.createParallelGroup(GroupLayout.Alignment.BASELINE);

v2.addComponent(jLabel1);
v2.addComponent(entry, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE);
//Add the group v2 tp the group v1

v1.addGroup(v2);
v1.addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED);
v1.addComponent(jScrollPane1, GroupLayout.DEFAULT_SIZE, 900, Short.MAX_VALUE);
v1.addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED);
v1.addComponent(status);
v1.addContainerGap();

//Add the group v1 to the group vGroup
vGroup.addGroup(v1);

layout.setVerticalGroup(vGroup);
pack();
}

@SuppressWarnings("empty-statement")
public void search() throws BadLocationException {

int i;
    start=System.currentTimeMillis();

    arry[point]=(int) (start - start2-10);
    point++;

    if(fir==true)
    {fir=false;point=0;}
    start2=start;

    String s = textArea.getText();

    char[] words=s.toCharArray();

    for(i=last;words[i]!=' '&&words[i]!='\n';i++,last=i)
    {

    }
  try {
           hilit.addHighlight(first, last, painter);

      last++;   first=last;

      } catch (BadLocationException ex) {
           Logger.getLogger(newh.class.getName()).log(Level.SEVERE, null, ex);
    }

  }

void message(String msg) {

 }

// DocumentListener methods

public void insertUpdate(DocumentEvent ev) {
   // search();
}

public void removeUpdate(DocumentEvent ev) {
   // search();
}

public void changedUpdate(DocumentEvent ev) {
}

public void keyTyped(KeyEvent e) throws BadLocationException {

}

public void keyReleased(KeyEvent e) {
    throw new UnsupportedOperationException("Not supported yet.");
}

class CancelAction extends AbstractAction {
    public void actionPerformed(ActionEvent ev) {
        try {
            search();
        } catch (BadLocationException ex) {
            Logger.getLogger(newh.class.getName()).log(Level.SEVERE, null, ex);
        }

    }
 }

 public static void main(String args[]) throws UnsupportedAudioFileException, IOException, LineUnavailableException, InterruptedException {
 start();

}
   public void setvisiblet()
{
setVisible(true);

}
public void setvisiblef()
{
setVisible(false);

}
public static void start()
{

SwingUtilities.invokeLater(new Runnable() {
        public void run() {

            UIManager.put("swing.boldMetal", Boolean.FALSE);
            try {
                new newh().setVisible(true);
            } catch (FileNotFoundException ex) {
                Logger.getLogger(newh.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    });
 }

}
class ColoredTextTest extends javax.swing.JFrame {
private String[] words=new String[1000];
private JScrollPane sc;
String sentence="";
int stringIndex = 0;
 int index = 0;
 Timer timer;
StyledDocument  doc;
/** Creates new form textdisplay */
@SuppressWarnings("static-access")

public ColoredTextTest() throws FileNotFoundException, IOException {
    initComponents();
     doc = new DefaultStyledDocument();
jTextPane1.setDocument(doc);
 javax.swing.text.Style style = jTextPane1.addStyle("Red", null);
StyleConstants.setForeground(style, Color.RED);

    File file = new File("lyri.txt");
 BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(file)));
String line = null;
while( (line = br.readLine())!= null ){
sentence+=line;
sentence+='\n';
}

br.close();
int j=0;
Scanner input = new Scanner(new File("lyri.txt"));
file = new File("lyri.txt");
br = new BufferedReader(new InputStreamReader(new FileInputStream(file)));
while(input.hasNext()) {
words[j] = input.next(); System.out.println(words[j]);j++;words[j]=" ";j++;
}

jTextPane1.setText(sentence);

}

@SuppressWarnings("unchecked")

private void initComponents() {

    jPanel1 = new javax.swing.JPanel();
    jButton1 = new javax.swing.JButton();
    jButton2 = new javax.swing.JButton();
    jButton3 = new javax.swing.JButton();
    jButton4 = new javax.swing.JButton();
    jSeparator1 = new javax.swing.JSeparator();
    jScrollPane1 = new javax.swing.JScrollPane();
    jTextPane1 = new javax.swing.JTextPane();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setBackground(new java.awt.Color(0, 0, 0));
    setUndecorated(true);

    jPanel1.setBackground(new java.awt.Color(0, 0, 0));
    jPanel1.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(0, 204, 204)));
    jPanel1.setInheritsPopupMenu(true);

    jButton1.setBackground(new java.awt.Color(255, 255, 0));
    jButton1.setFont(new java.awt.Font("Virtual DJ", 0, 14));
    jButton1.setForeground(new java.awt.Color(0, 255, 255));
    jButton1.setText("Back");
    jButton1.setOpaque(false);

    jButton2.setBackground(new java.awt.Color(255, 255, 0));
    jButton2.setFont(new java.awt.Font("Virtual DJ", 0, 14));
    jButton2.setForeground(new java.awt.Color(0, 255, 255));
    jButton2.setText("Pause");
    jButton2.setOpaque(false);

    jButton3.setBackground(new java.awt.Color(255, 255, 0));
    jButton3.setFont(new java.awt.Font("Virtual DJ", 1, 14));
    jButton3.setForeground(new java.awt.Color(0, 255, 255));
    jButton3.setText("Play");
    jButton3.setOpaque(false);
    jButton3.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton3ActionPerformed(evt);
        }
    });

    jButton4.setBackground(new java.awt.Color(255, 255, 0));
    jButton4.setFont(new java.awt.Font("Virtual DJ", 0, 14));
    jButton4.setForeground(new java.awt.Color(0, 255, 255));
    jButton4.setText("close");
    jButton4.setOpaque(false);
    jButton4.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton4ActionPerformed(evt);
        }
    });

    jSeparator1.setBackground(new java.awt.Color(51, 255, 255));

    jTextPane1.setBackground(new java.awt.Color(0, 0, 0));
    jTextPane1.setFont(new java.awt.Font("Tahoma", 0, 36)); // NOI18N
    jTextPane1.setForeground(new java.awt.Color(0, 255, 255));
    jTextPane1.setVerifyInputWhenFocusTarget(false);
    jScrollPane1.setViewportView(jTextPane1);

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jButton3, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jButton2, javax.swing.GroupLayout.PREFERRED_SIZE, 101, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 114, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jButton4, javax.swing.GroupLayout.DEFAULT_SIZE, 611, Short.MAX_VALUE)
            .addGap(23, 23, 23))
        .addComponent(jSeparator1, javax.swing.GroupLayout.DEFAULT_SIZE, 982, Short.MAX_VALUE)
        .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 982, Short.MAX_VALUE)
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
            .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 645, Short.MAX_VALUE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jButton3, javax.swing.GroupLayout.PREFERRED_SIZE, 37, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jButton2, javax.swing.GroupLayout.PREFERRED_SIZE, 36, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jButton4, javax.swing.GroupLayout.PREFERRED_SIZE, 37, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 36, javax.swing.GroupLayout.PREFERRED_SIZE)))
    );

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jPanel1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
    );

    java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
    setBounds((screenSize.width-988)/2, (screenSize.height-710)/2, 988, 710);
  }// </editor-fold>

 private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {

    setVisible(false);
}

 private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {
    this.sc=jScrollPane1;
    JScrollBar verticalScrollBar = sc.getVerticalScrollBar();
    JScrollBar horizontalScrollBar = sc.getHorizontalScrollBar();
    verticalScrollBar.setValue(verticalScrollBar.getMinimum());
    horizontalScrollBar.setValue(horizontalScrollBar.getMinimum());

 dotimer();
  }

 public void dotimer()
 {

 ActionListener actionListener = new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent actionEvent) {

             System.out.println("index"+stringIndex);
            doc.setCharacterAttributes(stringIndex, 1, jTextPane1.getStyle("Red"), true);

            stringIndex++;

                try {
                    if (stringIndex >= doc.getLength() || doc.getText(stringIndex, 1).equals(" ")|| doc.getText(stringIndex, 1).equals("\n")) {
                        index++;
                    }
                } catch (BadLocationException ex) {
                    Logger.getLogger(ColoredTextTest.class.getName()).log(Level.SEVERE, null, ex);
                }
                if (index < 600) {

                    double delay = newh.arry[index];
                    timer.setDelay((int) (delay / words[index].length()));
                } else {
                    timer.stop();
                    System.err.println("Timer stopped");
                }

            }

    };
    timer = new Timer(newh.arry[index], actionListener);
    timer.setInitialDelay(0); System.out.println("done.........");
    timer.start();

 }
 public static void main(String args[]) throws InterruptedException, InvocationTargetException {
    start();

 }
 public static void start() throws InterruptedException, InvocationTargetException
 {
 SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            try {
                new ColoredTextTest().setVisible(true);
            } catch (FileNotFoundException ex) {
                Logger.getLogger(ColoredTextTest.class.getName()).log(Level.SEVERE, null, ex);
            } catch (IOException ex) {
                Logger.getLogger(ColoredTextTest.class.getName()).log(Level.SEVERE, null, ex);
            }
            ColoredTextTest y = null;
            try {
                y = new ColoredTextTest();
            } catch (FileNotFoundException ex) {
                Logger.getLogger(ColoredTextTest.class.getName()).log(Level.SEVERE, null, ex);
            } catch (IOException ex) {
                Logger.getLogger(ColoredTextTest.class.getName()).log(Level.SEVERE, null, ex);
            }

        }
    });

   }

private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
private javax.swing.JButton jButton3;
private javax.swing.JButton jButton4;
private javax.swing.JPanel jPanel1;
private javax.swing.JScrollPane jScrollPane1;
private javax.swing.JSeparator jSeparator1;
private javax.swing.JTextPane jTextPane1;

} 
```

# css - 文本位置以不同的分辨率移动

> ID：12025061
> 
> 赞同：3
> 
> 时间：2012-08-19T07:52:39.750
> 
> 标签：css, position, screen-resolution

我想知道是否有人可以帮助我？我是 CSS 和 HTML 的超级新手，下面的 CSS 在 1280 X 800 的屏幕尺寸上看起来不错，但任何更小或更大的东西，位置都会移动。我怎样才能解决这个问题？我尝试将其定位为“修复”和“相对”，但它无法正常工作。提前致谢！！

```
margin: 0;
padding: 0;
width: 230px;
height: auto;
text-align: right;
position: absolute;
top: 62px;
right: 180px;
float:right;
clear:both; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T07:56:52.710

我认为它的主要容器，看起来你已经设计了 1280 X 800 分辨率的网站。你已经设置了位置 `top: 62px; right: 180px;`

不要那样做，因为它只能在 1280 X 800 上`margin:0 auto;`运行

如果它不是主要容器，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T08:26:31.683

我不确定我是否正确理解你，但一个快速的技巧可能是为身体指定一个固定的宽度。例子：

```
body {
    width: 1280px;
} 
```

# c# - C# 使用 htmlagility 抓取 url

> ID：12025069
> 
> 赞同：0
> 
> 时间：2012-08-19T07:54:17.370
> 
> 标签：c#, html, url, html-agility-pack

好的，所以我在这个网页上有这个 URL 列表，我想知道如何获取 URL 并将它们添加到 ArrayList？

[http://www.animenewsnetwork.com/encyclopedia/anime.php?list=A](http://www.animenewsnetwork.com/encyclopedia/anime.php?list=A)

我只想要列表中的 URL，查看它以了解我的意思。我自己尝试过，无论出于何种原因，它都需要所有其他 URL，除了我需要的 URL。

```
 http://pastebin.com/a7hJnXPP 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:03:28.640

使用[HTML 敏捷包](http://htmlagilitypack.codeplex.com/)

```
using (var wc = new WebClient())
{
    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
    doc.LoadHtml(wc.DownloadString("http://www.animenewsnetwork.com/encyclopedia/anime.php?list=A"));
    var links = doc.DocumentNode.SelectSingleNode("//div[@class='lst']")
        .Descendants("a")
        .Select(x => x.Attributes["href"].Value)
        .ToArray();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T08:36:00.557

如果您只想要列表中的那些，那么下面的代码应该可以工作（假设您已经将页面加载到了`HtmlDocument`）

```
List<string> hrefList = new List<string>(); //Make a list cause lists are cool.

foreach (HtmlNode node animePage.DocumentNode.SelectNodes("//a[contains(@href, 'id=')]"))
{
    //Append animenewsnetwork.com to the beginning of the href value and add it
    // to the list.
    hrefList.Add("http://www.animenewsnetwork.com" + node.GetAttributeValue("href", "null"));
} 
```

`//a[contains(@href, 'id=')]`将此 XPath 分解如下：

*   `//a`选择所有`<a>`节点...
*   `[contains(@href, 'id=')]`...包含`href`包含文本的属性`id=`。

这应该足以让你继续前进。

*顺便说一句，考虑到该页面上大约有 500 个链接，我建议不要在其自己的消息框中列出每个链接。500 个链接 = 500 个消息框 :(*

# javascript - 使用 JCanvasScript 加载图像的 Html5 画布

> ID：12025073
> 
> 赞同：0
> 
> 时间：2012-08-19T07:55:22.877
> 
> 标签：javascript, image, html, canvas, load

大家好，我想在 html5 画布中使用 JCanvasScript 加载多个图像，但我做不到。我想在每一行中并排加载图像。为此，我有函数 loadx(numX, numY) numX - 是一行中的图像数，而 numY 是行数。例如 loadX(5,4) 或 loadX(10,3) 给我同样的结果只有 1 图像。

这是一个代码

```
 <script>
        function init(){
            loadx(5, 4);
        }

        function loadx(numX, numY){
            var numTotal = numX * numY;
            var imgBMPs = [];
            var sliceImg = new Image();
            sliceImg.src = "abstract.jpg";
            var sliceBmp;
            var imgBmp = [];
            imgBmp['width'] = sliceImg.width / numX;
            imgBmp['height'] = sliceImg.height / numY;
            imgBmp['row'] = 0;
            imgBmp['y'] = 0;

            sliceImg.onload = function(){
                for (i = 0; i < numY; i++){
                imgBmp['y'] = i * imgBmp['height'];
                    for (a = 0; a < numX; a++){
                        jc.start('canvas');
                        imgBmp = new jc.image(sliceImg, a * imgBmp['width'], imgBmp['y'], imgBmp['width'], imgBmp['height']);
                        imgBMPs.push(imgBmp);
                        jc.start('canvas');
                    }

                }
            }
        }
    </script> 
```

当我尝试调试代码时，我发现了一些东西：

在这之后

```
 sliceImg.onload = function(){
                    for (i = 0; i < numY; i++){
                    imgBmp['y'] = i * imgBmp['height']; 
```

我添加了代码

```
alert (imgBmp['height']); 
```

当我刷新页面时，第一个结果是数字，但其他结果是“未定义”，所以出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:01:15.680

在您的内部 for 循环中，您将变量重新分配`imgBmp`给`js.image`. 这意味着原始对象的属性在循环第二次迭代时丢失。

尝试按如下方式更新您的代码：

```
<script>
    function init(){
        loadx(5, 4);
    }

    function loadx(numX, numY){
        var numTotal = numX * numY;
        var imgBMPs = [];
        var sliceImg = new Image();
        sliceImg.src = "abstract.jpg";
        var sliceBmp;

        /*
           // imgBmp is being used as an object not an array 
           // so the following syntax is usually preferred
           var imgBmp = {
               width: sliceImg.width / numx,
               height: sliceImg.height / numy
           }

           // and to retrieve a property:
           console.log(imgBmp.width);
        */

        var imgBmp = [];
        imgBmp['width'] = sliceImg.width / numX;
        imgBmp['height'] = sliceImg.height / numY;
        imgBmp['row'] = 0;
        imgBmp['y'] = 0;

        sliceImg.onload = function(){
            for (i = 0; i < numY; i++){
            imgBmp['y'] = i * imgBmp['height'];
                for (a = 0; a < numX; a++){
                    jc.start('canvas');
                    // create a new variable to hold the instance of jc.image
                    // so the original object reference is preserved 
                    var jcImage = new jc.image(sliceImg, a * imgBmp['width'], imgBmp['y'], imgBmp['width'], imgBmp['height']);
                    imgBMPs.push(jcImage);                        
                    //imgBmp = new jc.image(sliceImg, a * imgBmp['width'], imgBmp['y'], imgBmp['width'], imgBmp['height']);
                    //imgBMPs.push(imgBmp);
                    jc.start('canvas');
                }

            }
        }
    }
</script> 
```

# c - 这段代码是如何工作的 'printf("%d %d %d\n",(a,b,c));'

> ID：12025081
> 
> 赞同：2
> 
> 时间：2012-08-19T07:56:35.903
> 
> 标签：c

```
#include "stdio.h"
int main()
{
    int a=3,b=4,c=5;
    printf("%d %d %d\n",(a,b,c));
} 
```

结果是：

```
5 2280760 2281472 
```

谁能解释一下？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T07:59:14.267

您导致了未定义的行为：

这 -`(a,b,c)`被评估为最后一个参数，例如`c`，所以第一个打印的数字是 5 ( `c = 5`) 其他两个是未初始化的参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T07:58:53.253

它不起作用。它会产生未定义的行为。

您提供了三个格式说明符`printf`并只提供了一个可变参数，因为在 C`(a,b,c)`中是一个表达式，其计算结果为`c`（阅读有关*逗号运算符*）的值

由于参数的数量与格式说明符的数量不匹配，因此行为未定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T08:01:46.950

`printf`您的调用只有两个参数：`"%d %d %d"`以及评估的结果`(a,b,c)`。

的结果`(a,b,c)`只是列表中的最后一项：`c`，即 5。它被传递给 printf，它显示`5`第一个 %d。

由于没有更多参数，剩下的 %d 只显示调用堆栈上的任何垃圾，从而导致您看到奇怪的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T08:06:22.643

我认为您缺少逗号表达式，逗号表达式包含两个由逗号分隔的任何类型的操作数，并且具有**从左到右的**关联性。左操作数被完全评估，可能产生副作用，如果有，它的值将被丢弃。然后评估右操作数。在通常的一元转换之后，逗号表达式结果的类型和值是其右操作数的类型和值。

逗号表达式的结果不是左值。

所以你得到上述结果

正如 IBM 在[其文档](http://publib.boulder.ibm.com/infocenter/comphelp/v101v121/index.jsp?topic=/com.ibm.xlcpp101.aix.doc/language_ref/co.html)中所述：

> 逗号运算符的主要用途是在以下情况下产生副作用：
> 
> 1.  调用函数
> 2.  进入或重复一个迭代循环
> 3.  测试条件
> 4.  其他需要副作用但并不立即需要表达式结果的情况

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-10T03:20:53.697

MByD 说：

> 这 - (a,b,c) 被评估为最后一个参数，例如 c，所以第一个打印的数字是 5 (c = 5)，另外两个是未初始化的参数。

但是 a 和 b 不是未初始化的。（试试下面的代码）

```
int a=3,b=4,c=5;
printf("%d %d %d\n",a,(a,b,c),b); 
```

由于括号，它被假定为一个参数，并且由于**从左到右**解析（如用户空指针所说），它发现 c 是它的值。

上面的代码输出`3 5 4`。

# facebook - facebook like box 不适用于 FB Group

> ID：12025083
> 
> 赞同：0
> 
> 时间：2012-08-19T07:56:50.493
> 
> 标签：facebook, facebook-likebox

我正在尝试将 facebooke like-box 用于我正在为其创建网站的 FB 组。我收到以下错误。错误来自哪里？谢谢

```
https://www.facebook.com/groups/tapmichiana/

Could not retrieve the specified page. Please verify correct href was passed in. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:39:09.383

尽管 Facebook 鼓励其所有用户在访问平台时使用“安全浏览”，因此使用 HTTPS ……在这个问题上，点赞按钮本身似乎有点落后。

尝试将您的点赞按钮指向`http://www.facebook.com/groups/tapmichiana/`Facebook 上您群组页面的非 SSL 版本——然后它应该可以工作。

# oracle - 如何将数据表作为输入传递给 C# 中的过程？

> ID：12025085
> 
> 赞同：0
> 
> 时间：2012-08-19T07:57:05.610
> 
> 标签：oracle, c#-4.0

我编写了将数据插入数据库表的存储过程，但我不知道如何将数据表传递给存储过程，请告诉如何使用它。

## 下面是我的存储过程

```
CREATE OR REPLACE PROCEDURE PR_SREE_TEST(p_recordset In SYS_REFCURSOR) IS

Contrac_rc SREE_TEST%rowtype;
BEGIN

   Loop
   Fetch p_recordset Into Contrac_rc;
   EXIT WHEN p_recordset%NOTFOUND;
       Insert into SREE_TEST(CT,DESC,FLAG)
       Values(Contrac_rc.CT,Contrac_rc.DESC,Contrac_rc.FLAG);

   End Loop;

   EXCEPTION
     WHEN NO_DATA_FOUND THEN
       NULL;
     WHEN OTHERS THEN
       -- Consider logging the error and then re-raise
       RAISE;
END PR_SREE_TEST;
/ 
```

## 和cs页面

```
 public DataSet sreetest(DataTable dt)
        {
            DataSet dsRegularIndentdtl = new DataSet();
            try
            {
                OracleConnection OraConn = new OracleConnection(strDBConnection);
                OraConn.Open();

                OracleCommand OraCmd = new OracleCommand();
                OraCmd.Connection = OraConn;
                OraCmd.CommandText = "PR_SREE_TEST";
                OraCmd.CommandType = CommandType.StoredProcedure;
                OracleParameter parameter = new OracleParameter();

                var recordSet1 = new DataTable();
                recordSet1 = dt;
               OraCmd.Parameters.Add("p_recordset", OracleDbType.RefCursor, recordSet1, ParameterDirection.Input);
                 OraCmd.ExecuteNonQuery();
            }
            catch (Exception ex)
            {
                throw ex;
            }
            return dsRegularIndentdtl;
        }
    } 
```

以上是我的代码，它说 p_recordset 无效。请告诉我如何执行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:15:57.097

确保您使用的是正确的 OraCmd.Parameters.Add() 重载，

根据[msdn](http://msdn.microsoft.com/en-us/library/t52t0485%28v=vs.90%29.aspx)，第四个参数不是参数方向，如下

```
public OracleParameter Add(
    string parameterName,
    OracleType dataType,
    int size,
    string srcColumn
) 
```

# html - 如何在行之间的分隔符上添加一些文本？

> ID：12025087
> 
> 赞同：1
> 
> 时间：2012-08-19T07:57:41.697
> 
> 标签：html, css, twitter-bootstrap, responsive-design, interface-design

示例（以“OR”作为文本）：

![示例（与](../Images/e0be6b90d3e21211cde7eddcc4f7aa94.png)

`submit`这个想法是，在列折叠时 - 即：在移动大小的屏幕上查看 - 它会出现在`Click me`.

**如何在行之间的分隔符上添加一些文本？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T08:28:03.617

```
<style>
.wrapper{
width:900px;
margin:0 auto;}

.left{
min-height:300px;
width:400px;
background-color:#9F0;
float:left;} 

.right{
min-height:300px;
width:400px;
background-color:#9F0;
float:right;}

.mid{
padding-top:150px;
padding-left:40px;
min-height:150px;
width:60px;
float:left;
background-color:#C00;}
</style>

<body>
<div class="wrapper">
    <div class="left">SUBMIT CONTENT HERE</div>
    <div class="mid">OR</div>
    <div class="right">CLICK ME CONTENT HERE</div>   
</div> 
```

我认为这可以帮助你。现在，如果您想在上面添加垂直条，`mid`您可以设置它的样式，您可以将该条添加为背景图像，然后您可以设置它的样式或添加任何 DIV 标签，这是您的愿望.. ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T09:16:04.917

为什么不在`.span`两个表格之间使用 a ？

```
<div class="container">
    <div class="row">
        <div class="span5">
            form 1
        </div>
        <div class="span2">OR</div>
        <div class="span5">
            form 2
        </div>
    </div>
</div> 
```

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/QygFS/)

# ajax - JQuery ajax 使用 Play 调用碰撞！框架

> ID：12025088
> 
> 赞同：0
> 
> 时间：2012-08-19T07:57:49.340
> 
> 标签：ajax, jquery, playframework

当在我的页面中调用某些操作时，我对服务器上的两个不同方法进行了两次 ajax 调用（A、B）。大多数情况下，每个请求都会得到匹配的响应，但有时两个请求都会得到相同的响应！（其中一项请求 - A、A 或 B、B）

Ajax 调用是使用 JQuery 进行的，服务器方法是使用 Play 实现的！框架（在java中）。

有谁知道为什么会发生以及如何解决它？

谢谢！

阿贾克斯呼叫 A：

```
var renderTypePreviewPageRoute = jsRoutes.com.eyeview.connectad.controllers.solutions.FeedLibrary.getFeedTypePreviewPage(feedHashId, feedType);

    // Makes an ajax call that gets the rendered solution page
    $.ajax({

        // Sets the route (URL) of the server call
        url:renderTypePreviewPageRoute.url,

        // Sets the method (GET / POST) of the server call
        type:renderTypePreviewPageRoute.method,

        //data:{ hashId: feedHashId, feedType: feedType, withPreview: withPreview }-->

        // In case of success
        success:function(result) {

            var typePreviewElement = $('#typePreviewSection');

            // Set the feed preview section html content to the rendered content got from the server
            typePreviewElement.html(result);

            typePreviewElement.removeClass('hidden');

            $('#feedPreviewGrid tr:eq(1)').removeClass('hidden');

            if ($('#feedPreviewSection').is(':visible')){

                typePreviewElement.show('blind');
            }

            var feedURL = urlEle.val();
            if (waitForFileTypePreview && feedURL != "") {
                feedEditNS.renderFilePreviewSection(true);
            }
        },

        // In case of failure
        error:function(xhr, ajaxOptions, thrownError) {

            // Shows the error message
            showError(xhr.responseText);

            // Clears the preview section
            feedEditNS.clearTypePreviewSection();

            var feedURL = urlEle.val();
            if (waitForFileTypePreview && feedURL != "") {
                feedEditNS.renderFilePreviewSection(true);
            }
        } 
```

Ajax 调用 B：

```
var renderFilePreviewPageRoute = jsRoutes.com.eyeview.connectad.controllers.solutions.FeedLibrary.getFeedFilePreviewPage(feedHashId);

    // Makes an ajax call that gets the rendered solution page
    $.ajax({

        // Sets the route (URL) of the server call
        url:renderFilePreviewPageRoute.url,

        // Sets the method (GET / POST) of the server call
        type:renderFilePreviewPageRoute.method,

        // In case of success
        success:function(result) {

            // Set the feed preview section html content to the rendered content got from the server
            $('#filePreviewSection').html(result);

            // Shows the feed preview section
            $('#verticalLine').show('blind');
            $('#leftShadow').show('blind');
            $('#rightShadow').show('blind');
            $('#feedPreviewSection').show('blind');

            feedEditNS.createDataTable(withHeaders);

            waitForFileTypePreview = false;
        },

        // In case of failure
        error:function(xhr, ajaxOptions, thrownError) {

            // Shows the error message
            showError(xhr.responseText);

            // Clears the preview section
            feedEditNS.clearFilePreviewSection();

            waitForFileTypePreview = false;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:30:30.310

我无法解决问题。因此，我最终将两个调用组合到一个对单个服务器端方法的调用。此方法返回一个包含两个调用答案的 JSON 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T04:34:00.190

我遇到了这个确切的问题（3 年后......）我仍然不确定真正的问题是什么，但作为一种解决方法，我最终`setTimeout()`在我的 Angular 控制器中使用。

```
myApp.controller('myCtrl', function($scope, myRestApi) {

    $scope.restCallOne = function() {
        myRestApi.callOne().then(
            // handle result one
        );
    };

    $scope.restCallTwo = function() {
        myRestApi.callTwo().then(
            // handle result two
        );
    };

    // loads each time the view is shown
    // *** race condition when calling consecutively without a delay ***
    //$scope.restCallOne();
    setTimeout($scope.restCallOne, 100);
    $scope.restCallTwo();

}); 
```

# asp.net - 带有单声道fastcgi的nginx坏网关502

> ID：12025090
> 
> 赞同：1
> 
> 时间：2012-08-19T07:58:06.813
> 
> 标签：asp.net, razor, mono, nginx, fastcgi

您好，所以我一直试图让我的网站在单声道（在 ubuntu 服务器上）上运行，并且我几乎完全按照[这些教程](http://sourcecodebean.com/archives/serving-your-asp-net-mvc-site-on-nginx-fastcgi-mono-server4/1617)进行操作：

但是，当我的目录不是空白时，fastcgi 日志会显示：

```
 Notice  Beginning to receive records on connection.
    Error   Failed to process connection. Reason: Exception has been thrown by the target of an invocation. 
```

我不太确定这意味着什么，根据我的操作，我可能会收到另一个错误，告诉我找不到资源：

无法找到该资源。

```
 Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.   Please review the following URL and make sure that it is spelled correctly. 
```

请求的 URL：/Default.aspx/ 版本信息：Mono 运行时版本：2.10.8（tarball Thu Aug 16 23:46:03 UTC 2012）ASP.NET 版本：4.0.30319.1

如果我应该提供更多信息，请告诉我。

编辑：

我现在收到 nginx 网关错误。

我的 nginx 配置文件如下所示：

```
server {
    listen   2194;
    server_name localhost;
    access_log $HOME/WWW/nginx.log;

    location / {
      root $HOME/WWW/dev/;
      index index.html index.html default.aspx Default.aspx Index.cshtml;
      fastcgi_index Views/Home/; 
      fastcgi_pass 127.0.0.1:8000;
      include /etc/nginx/fastcgi_params;
    }
} 
```

使用 xsp4 运行整个过程，我发现了“调用目标引发了异常”。

> 处理异常类型 TargetInvocationException 消息是异常已被调用的目标抛出。IsTerminating 设置为 True System.Reflection.TargetInvocationException：调用目标已引发异常。
> 
> 服务器堆栈跟踪：在 System.Reflection.MonoCMethod.Invoke (System.Object obj, BindingFlags invokeAttr,
> System.Reflection.Binder binder, System.Object[] 参数,
> System.Globalization.CultureInfo 文化) [0x00000] in :0 在 System .Reflection.MethodBase.Invoke (System.Object obj, System.Object[] 参数) [0x00000] in :0
> 在 System.Runtime.Serialization.ObjectRecord.LoadData (System.Runtime.Serialization.ObjectManager 管理器, ISurrogateSelector 选择器, StreamingContext 上下文) [0x00000] 在 System.Runtime.Serialization.ObjectManager.DoFixups () [0x00000] 在 System.Runtime.Serialization.Formatters.Binary.ObjectReader.ReadNextObject (System.IO.BinaryReader 阅读器) [0x00000] 处的 [0x00000]在 :0
> 在 System.Runtime.Serialization.Formatters.Binary.ObjectReader.ReadObjectGraph (BinaryElement elem, System.IO.BinaryReader reader, Boolean readHeaders, System.Object& result, System.Runtime.Remoting.Messaging.Header[]& headers) [0x00000]在 System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.NoCheckDeserialize (System.IO.Stream serializationStream, System.Runtime.Remoting.Messaging.HeaderHandler 处理程序) [0x00000] 处的 0 处，在 System.Runtime.Serialization.Formatters 处的 0 处.Binary.BinaryFormatter.Deserialize (System.IO.Stream serializationStream) [0x00000] in :0 at System.Runtime.Remoting.RemotingServices.DeserializeCallData (System.Byte [] array) [0x00000] in :0 at (wrapper xdomain-dispatch ) System.AppDomain:DoCallBack (object,byte[]&,byte[]&)
> 
> [0] 处重新抛出异常：---> System.ArgumentException：无法绑定到方法“SetHostingEnvironment”。在 System.Delegate.GetCandidateMethod（System.Type 类型，System.Type 目标，System.String 方法，BindingFlags bflags，布尔 ignoreCase，布尔 throwOnBindFailure）[0x00000] 在 System.Delegate.CreateDelegate（System.Type 类型，System .Type 目标，System.String 方法，Boolean ignoreCase，Boolean throwOnBindFailure) [0x00000] 在 System.Delegate.CreateDelegate (System.Type 类型，System.Type 目标，System.String 方法) [0x00000] in :0 at System.DelegateSerializationHolder+DelegateEntry.DeserializeDelegate (System.Runtime.Serialization.SerializationInfo info) [0x00000] in :0 在 System.DelegateSerializationHolder..ctor (System.Runtime.Serialization.SerializationInfo info,
> 在 (wrapper xdomain-invoke) System.AppDomain:DoCallBack (System.CrossAppDomainDelegate) 在 (wrapper remoting-invoke-with-check) System.AppDomain:DoCallBack (System.CrossAppDomainDelegate) 在 System.Web.Hosting.ApplicationHost.CreateApplicationHost (System .Type hostType, System.String virtualDir, System.String physicalDir) [0x00000] in :0 at Mono.WebServer.VPathToHost.CreateHost (Mono.WebServer.ApplicationServer server, Mono.WebServer.WebSource webSource) [0x00000] in :0 at Mono.WebServer.XSP.Server.RealMain (System.String[] args, Boolean root, IApplicationHost ext_apphost, Boolean quiet) [0x00000] in :0 at Mono.WebServer.XSP.Server.Main (System.String[] args) [0x00000] 在：0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T03:30:45.023

在您的 nginx 配置中，执行此操作

```
fastcgi_index   /; 
```

而不是这个：

```
fastcgi_index Default.aspx; 
```

而不是这个：

```
fastcgi_index Views/Home/; 
```

您希望 mono fastcgi 服务器查看基本请求。在 mvc3-land 中，没有 Default.aspx，因为一切都是通过路由完成的。因此，还要删除此行：

```
index index.html index.html default.aspx Default.aspx Index.cshtml; 
```

另一件真正让您感到困扰的事情是，存在对运行时 2 .dll 的底层程序集引用，这些引用已在您的项目引用的库中编译。

当我发现来自 nuget 的 nhibernate 引用实际上是 3.5 个 .dll 时，我自己发现了这一点。这使得在一个库中，只有某些类型能够被加载，而其他类型则抛出了与实际发生的事情无关的疯狂异常。我通过使用 csharp 控制台发现了这一点。

让我了解潜在问题的第一个例外是：

```
System.TypeLoadException: Could not load type
    at (wrapper managed-to-native) System.Type:type_is_assignable_from (System.Type,System.Type) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:55:53.420

404 网址是“/Default.aspx/”

因为它有它/最后它正在寻找一个目录，我猜你希望它寻找一个文件 Default.aspx 代替？

fastcgi 连接的 nginx 配置块是什么样的？

**更新**（在添加了请求的信息后）：

[http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_index](http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_index)解释了 fastcgi_index 指令。你设置它的方式有点奇怪，你将 Views/Home/ 添加到任何目录的 $fastcgi_script_name 中。

您可能希望将您的 fastcgi_index 设置为 Default.aspx （然后它将对目录的任何请求作为 directory/default.aspx 传递，我认为这是您想要的）

您也没有设置您的 script_filename，mono 可能使用它来知道要运行哪个文件（无论如何，这就是它与 php/ruby fastcgi 一起使用的方式）。

对于 location 块中的 nginx 参数，您可能需要以下内容：

```
fastcgi_index Default.aspx;
fastcgi_param SCRIPT_FILENAME $HOME/WWW/dev/home/$fastcgi_script_name;
fastcgi_pass 127.0.0.1:8000;
include /etc/nginx/fastcgi_params; 
```

（如果我正确阅读了您的教程，则 SCRIPT_FILENAME 可能只是 $fastcgi_script_name ）

顺便说一句，通常你会在 serverblock 级别设置一次 index 和 root 指令，这样你就不必为每个 location 块重复它，尽管因为你只有一个 location 块，这并不重要。

# qt - 使用 fitinview 和 Qt:KeepAspectRatio 时图像质量下降

> ID：12025092
> 
> 赞同：0
> 
> 时间：2012-08-19T07:58:40.650
> 
> 标签：qt, qt4

我正在使用 Qt，我想显示一个图像，我在 QGraphicsView 中显示它，因为图像大于我使用的 QGraphicsView 框的尺寸

```
ui->graphicsView->fitInView(viewraw->itemsBoundingRect() ,Qt::KeepAspectRatio); 
```

其中viewraw包含我的图像的像素图地址，我的图像过大的问题已经解决了，但我现在的新问题是Qt自动调整大小后的图像现在显示质量非常非常差，非常非常模糊

我该怎么办？

有什么方法可以显示适合盒子的图像并且没有质量损失？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T11:29:53.723

您应该尝试启用抗锯齿：

```
ui->graphicsView->setRenderHints(QPainter::Antialiasing 
        | QPainter::SmoothPixmapTransform 
        | QPainter::TextAntialiasing); 
```

* * *

您可以[`QLayout::setSizeConstraint(QLayout::SetFixedSize)`](http://qt-project.org/doc/qt-4.8/qlayout.html#SizeConstraint-enum)在包含视图的布局上使用，以调整父小部件的大小以适应视图。大小将是视图`sceneRect()`函数返回的大小。

例如，以下代码将调整大小`QMainWindow`（并锁定大小），以便两个项目都可见：

```
#include <QtGui>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QMainWindow mainWindow;
    QGraphicsView *view = new QGraphicsView(&mainWindow);
    QGraphicsScene *scene = new QGraphicsScene(view);
    view->setScene(scene);

    mainWindow.layout()->setSizeConstraint(QLayout::SetFixedSize);
    mainWindow.setCentralWidget(view);
    mainWindow.show();

    scene->addRect(-100,-100,10,10, QPen(), Qt::red );
    scene->addRect(600,450,10,10, QPen(), Qt::blue );

    return a.exec();
} 
```

或者，由于您使用的是设计器，

*   在小部件树中，转到图形视图的父项，它应该有一个布局，
    *   如果没有（如果图标是这个：）![没有布局图标](../Images/36e1b2145cba965e0375d82235536c9a.png)，通过左键单击项目名称添加一个，然后在“布局”菜单中选择一种布局（如果您只有一个小部件，布局类型无关紧要，只需选一个），
*   然后转到同一项目的属性面板中的最后一个选项，应该是“layoutSizeConstraint”并选择选项“SetFixedSize”。

# postgresql - 性能调优：为布尔列创建索引

> ID：12025094
> 
> 赞同：30
> 
> 时间：2012-08-19T07:58:55.573
> 
> 标签：postgresql, indexing, database-performance, database-replication

我编写了一个守护进程处理器，它将从一个数据库中获取行并将它们插入另一个数据库以进行同步。它将根据`boolean`指示标志获取行`sync_done`。

我的表有数十万行。当我选择所有行时 `sync_done is false`，会导致任何数据库性能问题吗？我是否应该为该`sync_done`列应用索引以提高性能，因为仅获取`sync_done`值为 的行`false`？

说，我有 10000 行。其中，9500 个已经同步（`sync_done is true`），不会被选中。

请建议我如何进行。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-19T12:47:52.733

对于这样的查询，仅覆盖未同步行的[部分索引将提供最佳服务。](https://www.postgresql.org/docs/current/indexes-partial.html)

```
CREATE INDEX ON tbl (id) WHERE sync_done = FALSE; 
```

但是，对于这样的用例，其他同步方法可能更适合从以下开始：

*   看看[`LISTEN`/`NOTIFY`](https://www.postgresql.org/docs/current/sql-listen.html)。
*   或者将[触发器](https://www.postgresql.org/docs/current/triggers.html)与[dblink](https://www.postgresql.org/docs/current/dblink.html)或外部数据包装器[`postgres_fdw`](https://www.postgresql.org/docs/current/postgres-fdw.html)（最好）结合使用。
*   或[许多可用的复制方法](https://www.postgresql.org/docs/current/different-replication-solutions.html)之一。
    [流复制](https://www.postgresql.org/docs/current/warm-standby.html#STREAMING-REPLICATION)是在 Postgres 9.0 中添加的，并且变得越来越流行。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-19T14:39:32.300

我建议您**不要**索引表（布尔值是一个低基数字段），而是根据布尔值对其进行分区。

见：[http ://www.postgresql.org/docs/9.1/static/ddl-partitioning.html](http://www.postgresql.org/docs/9.1/static/ddl-partitioning.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T08:05:12.923

带有记录和布尔字段的表应该是这样做的方法。

这是我认为可能对您有所帮助的东西...

[位图索引](http://en.wikipedia.org/wiki/Bitmap_index)

[PostgreSQL 中位图索引的替代方案](https://stackoverflow.com/questions/3824751/alternative-to-bitmap-index-in-postgresql)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T09:07:19.013

如果您的数据库被大量使用，索引肯定会有所帮助，但如果轮询可能会带来负载和并发问题，那么可能值得考虑使用通知方法，例如[amqp](http://www.slideshare.net/postwait/postgresql-meet-your-queue)或基于触发器/数据库队列的方法，而不是像[Slony](http://slony.info/)或[Skytools Londiste](https://github.com/markokr/skytools)。我已经将 Slony 和 Londiste 用于基于触发器的复制，并且发现它们都非常出色。我更喜欢 Londiste，因为它的设置和管理要简单得多（如果你有一个简单的用例，请坚持使用旧的 2\. 分支）。

# python - 如何将新的默认包添加到 virtualenv？

> ID：12025100
> 
> 赞同：9
> 
> 时间：2012-08-19T07:59:26.970
> 
> 标签：python, virtualenv, ipython

当我创建一个 virtualenv 时，它会安装 setuptools 和 pip。是否可以将新包添加到此列表中？

示例用例：

*   按照[这个](http://blog.ufsoft.org/2009/1/29/ipython-and-virtualenv)在 virtualenv 中使用 ipython 的解决方案（来自[这个问题](https://stackoverflow.com/questions/7335992/ipython-and-virtualenv-ignoring-site-packages)）需要在每个 virtualenv 中安装 ipython（除非我允许 system-site-packages）。
*   或者，如果我只进行烧瓶/pygame/framework 开发，我希望在每个 virtualenv 中都使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-07-20T06:08:00.903

你可以编写一个 python 脚本，比如`personalize_venv.py`扩展`EnvBuilder`类并覆盖它的`post_setup()`方法来安装你需要的任何默认包。

您可以从[https://docs.python.org/3/library/venv.html#an-example-of-extending-envbuilder](https://docs.python.org/3/library/venv.html#an-example-of-extending-envbuilder)获取基本示例。

这不需要钩子。`dirs`使用指向您的 venv 目录的命令行参数直接运行脚本。钩子是类的`post_setup()`方法本身`EnvBuilder`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-02T19:29:36.573

我采取了与选择正确答案不同的方法。

我选择了我的目录，喜欢`~/.virtualenv/deps`并在其中安装了软件包

```
pip install -U --target ~/.virtualenv/deps ... 
```

接下来`~/.virtualenv/postmkvirtualenv`我输入以下内容：

```
# find directory
SITEDIR=$(virtualenvwrapper_get_site_packages_dir)
PYVER=$(virtualenvwrapper_get_python_version)

# create new .pth file with our path depending of python version
if [[ $PYVER == 3* ]];
then
    echo "$HOME/.virtualenvs/deps3/" > "$SITEDIR/extra.pth";
else
    echo "$HOME/.virtualenvs/deps/" > "$SITEDIR/extra.pth";
fi 
```

[基本上说同样的话的帖子](http://www.pygopar.com/how-to-add-default-packages-to-a-virtualenv)。

# android - Galaxy Nexus 上的 Android 4.1 隐形视图

> ID：12025102
> 
> 赞同：1
> 
> 时间：2012-08-19T08:00:04.547
> 
> 标签：android, android-view, invisible, android-4.2-jelly-bean

我收到了几份来自用户的报告，称我的应用程序中的大部分 UI 在他们的 Galaxy Nexus 上使用 Android 4.1 时不可见，但它们仍然可以点击。我无法在任何 Android 4.1 模拟器上重现它。

那么问题来了，谷歌这次搞砸了什么？这是一个已知的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:30:02.683

我自己遇到了这个。我的问题是在某些布局中使用 layerType="software" 。摆脱它修复了它。

# php - PHP/Codeigniter - 在文本中的任意位置添加多个图像

> ID：12025103
> 
> 赞同：0
> 
> 时间：2012-08-19T08:00:08.997
> 
> 标签：php, codeigniter

我想做的是创建一个包含多个图像的添加/编辑文章，比如博客。现在，假设在我的 add_article 页面/视图中，我有一个表单：一个 input type="text"、一个 textarea、3 个 input type="file"（用于 3 张不同的照片）和一个提交按钮。

有什么方法可以将这些图像插入文本中我想要的任何位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:45:46.463

对我来说，听起来您想要实现的是，当您添加一篇文章时，您希望有机会上传最多 3 张图片，并在文本区域中指定您希望在哪里显示这些图片。

[这可以使用 php 函数vsprintf](http://www.php.net/manual/en/function.vsprintf.php)轻松实现。无论您想在哪里放置只需`%s`在 textarea 中添加的图像。只要确保`%s`没有被转义并且`%s`数量与图像数量匹配。

输出示例：

```
$body = 'Image #1: %s<br />
    Image #2: %s<br />
    Image #3: %s';

$images = array('<img src="img1.jpg" />', 
    '<img src="img2.jpg" />', 
    '<img src="img3.jpg" />'
);
echo vsprintf($body, $images); 
```

# jquery - 从 html5 会话存储中读取值并在动画中使用不起作用

> ID：12025105
> 
> 赞同：0
> 
> 时间：2012-08-19T08:00:41.923
> 
> 标签：jquery, html

我在动画方面遇到了这个琐碎的问题，想知道我是否以正确的方式插入东西。如果您能就此分享您的想法，我将不胜感激。在 JQuery 初始化时，我通过“sessionStorate()”将值保存为字符串，然后我试图用它来为 div 设置动画。这是我的代码：

```
 $(document).ready(function()
  {
     sessionStorage.setItem('topVal','200');

     $("#myDiv").animate({

         'top' : sessionStorage.topVal
      },1000, function()
      {
          alert("ANIMATION DONE");
      });   
  }); 
```

如果我对值进行硬编码而不是调用“sessionStorage.topVal”，则 div 动画不会出现任何问题，否则不会。我最大的想法是事情进展得太快了，因此 animate() 函数无法捕捉到“sessionStorage.topVal”。我想知道我应该使用 setTimeOut() 来延迟还是只使用 delay()。我不确定这些是好的做法还是有其他方法可以让它继续下去。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T08:05:39.993

对我来说效果很好。

见[http://jsfiddle.net/GuHdf/](http://jsfiddle.net/GuHdf/)

# python - 如何从 django 视图发送 json 并在 HTML 上接收它

> ID：12025110
> 
> 赞同：2
> 
> 时间：2012-08-19T08:01:25.997
> 
> 标签：python, openlayers, geodjango

我正在使用 GeoDjango 进行 GIS 项目，为此我必须使用 OpenLayers 渲染地图。我的代码片段接受 JSON 在 OpenLayers 中创建图层。我想将我的 GeoDjango 的“管理”模型作为 JSON 发送到我的 HTML 页面，并在 HTML 上接收它作为 JSON 以呈现我的地图。

请就如何在 OpenLayers 地图中渲染我的 GeoDjango 模型提出另一个建议。

我的管理模式：

```
class UPAdministrative(models.Model):
    name=models.CharField(max_length=51)
    admin_leve=models.CharField(max_length=5)   
    ls=models.LineStringField()
    objects=models.GeoManager()

    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T08:17:51.150

我认为你必须在你的模型中实现 CRUD 并在 html 中使用它。为了显示地理对象，我只使用了 django 管理页面。要编写 CRUD，请参阅

[好吃的派](http://django-tastypie.readthedocs.org/en/latest/index.html)

[Django REST 框架](http://django-rest-framework.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T18:17:49.437

您可以在视图中将模型序列化为 OpenLayers 支持的格式。例如，此视图仅将几何图形作为 geojson 发送：

```
from django.http import HttpResponse
from models import UPAdministrative

def upadministrative_geometry_json(request, upadmin_id):
    up_admin = UPAdministrative.objects.get(pk=upadmin_id)
    geojson = up_admin.ls.geojson
    return HttpResponse(geojson, mimetype='application/json') 
```

问题[在 GeoDjango 的自定义视图中渲染 GeoQuerySet 的空间数据](https://stackoverflow.com/questions/3034482/)有一个更详细的示例，说明如何将数据与 OpenLayers 集成。

# android - 音频模拟输入（电压）和麦克风数字数据之间的“映射”是什么？

> ID：12025115
> 
> 赞同：1
> 
> 时间：2012-08-19T08:02:06.217
> 
> 标签：android, audio

我想通过 Android 手机的音频插孔实现 232 通信。>当我想将音频电压转换为数字数据时遇到了一个问题，我不知道音频电压将转换为的数字值是多少，换句话说它是指音频模拟和数字之间的“映射”数据;

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T01:05:24.220

伏特和“数字”之间没有标准映射。对于专业装备，已经提出了几个标准。我经常在 0 dBu = -10 dBFS 进行校准，但是很多（绝不是全部！）现代专业模拟设备在 +10 dBu 以上的线性度非常好，所以我不确定校准是否有意义。

该映射由每个单独的 A/D 转换器芯片定义，并受相关电子电路的影响，该电子电路可以增加或减少信号增益。原则上，给定的 A/D 转换器会将其完整的输入模拟范围（无论是什么）转换为其完整的输出范围（无论是什么）。如果我没记错的话（我可能没有记错），几种流行的 16 位模拟设备 A/D 转换器的范围为 +/- 2.2 V，而其他的可以根据所提供的产品在不同的范围内工作。在 2.2 V 的情况下，这意味着 0V in 接近数字 0，+2.2 V 接近数字 32767，-2.2 V 接近数字 32768。我说“接近”两者是因为在数字方面，以及温度、噪声、频率等不那么明显的影响。

一旦信号通过硬件从伏特转换为“数字”，它可以通过软件进一步转换为浮点表示。这也没有标准的方法。请参阅：[http](http://blog.bjornroche.com/2009/12/int-float-int-its-jungle-out-there.html) ://blog.bjornroche.com/2009/12/int-float-int-its-jungle-out-there.html至少各种方法可以接近。

# c++ - GTK 与 Visual Studio 有问题

> ID：12025117
> 
> 赞同：0
> 
> 时间：2012-08-19T08:02:39.103
> 
> 标签：c++, visual-studio, gtk

我是 C++ 东西和视觉工作室的新手。不知何故，我设法添加了 GTK 库并包含在附加包含目录中！这是我添加的方式

```
C:\gtk\include\atk-1.0;C:\gtk\include;C:\gtk\include\gdk-pixbuf-2.0;C:\gtk\include\pango-1.0;C:\gtk\include\cairo;C:\gtk\lib\gtk-2.0\include;C:\gtk\lib\glib-2.0\include;C:\gtk\include\glib-2.0;C:\gtk\include\gtk-2.0;%(AdditionalIncludeDirectories) 
```

所有文件设置正确，链接没有错误。

但是当我编译代码时，我得到了这个错误！这是图像！

![在此处输入图像描述](../Images/c93a43081b67902d9e1ddd7730469976.png)

这对我来说是无法识别的错误，任何人都知道这是怎么回事！这是代码（这是我从互联网教程中获得的基本代码）

```
 #include<gtk\gtk.h>

int main(int argc,char* argv[]){

    gtk_init(&argc,&argv);
    GtkWidget* window;
    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    g_signal_connect(window,"delete-event",G_CALLBACK(gtk_main_quit),NULL);
    gtk_widget_show(window);
    gtk_main();
    return 0;
} 
```

感谢帮助！和你的时间

# windows-7 - 设置多个环境变量

> ID：12025118
> 
> 赞同：3
> 
> 时间：2012-08-19T07:42:26.267
> 
> 标签：windows-7, java, environment-variables, .net

我已经为我的 .net 4 框架设置了一个名为 PATH 的变量。我想为 JAVA 设置一个变量，但是当我使用 PATH 以外的变量名时，它不会让 Java 工作，如果我将默认的 .net 变量名 PATH 更改为其他 .net 框架会出现问题。有什么解决办法？

问候， Sanket

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T13:15:43.850

（来自上面的评论）

您始终可以在启动脚本中设置变量。我很困惑为什么你需要不同的 PATH 值来运行 .NET 和 Java。您的 PATH 通常会告诉操作系统在哪里查找要运行的可执行文件。如果这真的是你要改变的，那么你应该把两者结合起来。在 Windows 上，您只需用分号分隔 PATH 中的每个路径。

# linux - Beaglebone gpio 输入不起作用

> ID：12025119
> 
> 赞同：3
> 
> 时间：2012-08-19T08:02:51.133
> 
> 标签：linux, embedded-linux, beagleboard, gpio, sysfs

我正在使用 beaglebone 使用 sysfs 接口从特定引脚访问数字输入。而且我可以更改输出状态，但不能更改输入:(。我所做的是，我有两个引脚 pinA 和 pinB。pinA 我使它输出，pinB 我输入。将 pinA 连接到 pinB。通过发送将 pinA 配置为输出引脚通过传入将 sysfs 和 pinB 中的方向属性作为输入。我将 PinA 的值更改为 1，它给出 1 作为输出（我使用 LED 测试）。但是当我读取 PinB 的值时，它只给出 0，即使我将 0 传递给 pinA 的值。可能是什么原因？

谢谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T11:07:42.060

据我了解，您遵循的步骤：

```
echo 7 > /sys/kernel/debug/omap_mux/gpmc_ad6
echo 38 > /sys/class/gpio/export
echo in > /sys/class/gpio/gpio38/direction
cat /sys/class/gpio/gpio38/value 
```

我也犯了同样的错误，花了我几个小时，但答案很简单：以“echo 7”开头的第一行就是问题所在。看看复用位：

```
Bit 5: 1 - Input, 0 - Output

Bit 4: 1 - Pull up, 0 - Pull down

Bit 3: 1 - Pull disabled, 0 - Pull enabled

Bit 2 \

Bit 1 |- Mode

Bit 0 / 
```

您输入的是 echo 7 --> 0 0 0111，这意味着：位 0,1 和 2 为 1，因此设置了模式。没问题。但是，您只是忘记设置它是输入还是输出。它应该是这样的：

```
echo 0x27 > /sys/kernel/debug/omap_mux/gpmc_ad6 
```

你的位现在是：1 0 0111 二进制，即 0x27（十六进制）。

当你在输入时写下“cat /sys/class/gpio/gpio38/value”，你会看到一个美妙的 1 :) 我相信你会和我一样开心:)

此外，还有一件事，您对 1.8V 左右的模拟输入是正确的，但 GPIO 以 3.3v 运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:15:40.297

几种可能的原因：

1）你设置了输入管脚的IO方向吗？

例如。`echo "in" > /sys/class/gpio/gpioN/direction`

2）（不太可能）您用作输入的 GPIO 引脚是否复用为 GPIO 线并且方向正确？OMAP SoC 上的大多数 GPIO 引脚都是多功能的。您的内核可能已将其设置为备用功能。

您可以通过以下方式进行检查：

`cat /sys/kernel/debug/omap_mux/board/core`

它会转储所有 IO 引脚的配置。输出如下所示：

```
OMAP4_MUX(CSI22_DY1, OMAP_PIN_INPUT | OMAP_MUX_MODE0),
/* gpio_81 */
OMAP4_MUX(CAM_SHUTTER, OMAP_PIN_OUTPUT | OMAP_MUX_MODE3),
OMAP4_MUX(CAM_STROBE, OMAP_PIN_OUTPUT | OMAP_MUX_MODE0),
/* gpio_83 */ 
```

在这种情况下，`CAM_SHUTTER`设置一个输出，并路由到 GPIO 模块 ( `OMAP_MUX_MODE3`)

[警告：这是来自我的 OMAP4 板 - 手头没有 OMAP3 数据表 - 会有相当多的相似之处]

您无法通过 sysfs 更改它 - 相反，您需要修改您的内核（或者如果内核使用它设置的配置，则可能是引导加载程序）。

在您系统的板文件中 - 我认为在您的情况下将在其中`<linux_source_root>/arch/arm/mach-omap2/board-omap3beagle.c`- 您会找到 MUX 表的初始化程序。您将需要电路板的原理图、内核源代码树和 SoC 数据表来获取引脚的主要功能名称（在我上面的示例中`CAM_SHUTTER`）和 GPIO 编号。

*3）即使我将 0 传递给 pinA 的值，*我也有点困惑- 我想知道你是不是这个意思？然而，这确实指出了另一件需要注意的事情——每个 IO 引脚上都有可编程的上拉或下拉。这些是使用 MUX 设置进行设置的。可以想象还有一个外部的——同样你需要确定原理图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:45:17.483

是的。内部上拉和下拉配置在与多路复用模式相同的寄存器中 - 因此您可能可以以与设置多路复用模式相同的方式进行配置。获取 AM335x TRM（对于 OMAP4，该章称为*控制模块*）。

在内核的术语中，查看`<linux_source_root>/arch/arm/mach-omap2/mux.h`定义了一堆宏的位置

作为一个使用示例，我在我的板文件中有：

```
/* PIC -> OMAP4 interrupt line 2 - GPIO81 */
OMAP4_MUX(CAM_SHUTTER, OMAP_MUX_MODE3 | OMAP_PIN_INPUT_PULLUP), 
```

和

```
OMAP4_MUX(GPMC_AD11, OMAP_MUX_MODE0 | OMAP_PIN_INPUT_PULLDOWN), 
```

根据记忆，您可以选择上拉或下拉，但不能选择两者。

# javascript - 如何仅使用 JavaScript 将 Base64 图像更改为常规图像？

> ID：12025125
> 
> 赞同：0
> 
> 时间：2012-08-19T08:04:43.360
> 
> 标签：javascript, jquery, image, canvas, html5-canvas

假设我拥有动态生成的图像的整个 Base64 字符串。我怎样才能转换这样的东西：

```
<img src="data:image/jpeg;base64,/9j/blah blah blah........." /> 
```

至

```
<img src="mypic.jpg" /> 
```

甚至可以在不将图像下载到服务器的情况下在客户端进行操作吗？有没有办法将 Base64 图像临时缓存到内存中并接收实际的图像文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T08:10:30.237

> 甚至可以在不将图像下载到服务器的情况下在客户端进行操作吗？

不。

假设页面是从服务器加载的，那么像这样更改`src`属性会将其指向该服务器上的 URI。浏览器会尝试从那里加载图像，因此它必须返回图像而不是 404。

网站无法将任意 URI 的内容注入浏览器缓存。

# cakephp - 在组件中返回带有变量的渲染视图

> ID：12025128
> 
> 赞同：3
> 
> 时间：2012-08-19T08:05:03.103
> 
> 标签：cakephp

我想在我的`MessageComponent`. 它的`send`方法应该获取在视图（布局）中使用的变量数组并用它们渲染消息，然后发送它..

问题是：

如何使用组件中的变量数组渲染视图（布局）？并获取渲染内容而不是打印它（也在组件中）

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T08:30:46.367

（编辑：误读你的问题）

如果你想获取渲染视图的 HTML，只需执行以下操作：

```
$view = new View($this, false);
$view->set(compact('foo', 'bar')); // set variables
$view->viewPath = 'elements'; // render an element
$html = $view->render('message'); // get the rendered markup 
```

这应该在控制器和组件中工作。

# actionscript-3 - dispatchEvent 在piecemaker 2中不起作用

> ID：12025130
> 
> 赞同：0
> 
> 时间：2012-08-19T08:05:20.770
> 
> 标签：actionscript-3, dispatchevent

我试图研究这个问题，但作为一个新手，我很难涉足这些术语......

我在我的[BudeStrings Dev Site](http://www.dev.budestrings.co.uk)的登录页面上使用了piecemaker 2 滑块。滑块共包含 5 张幻灯片；第一个是包含多个帧的影片剪辑，接下来的四个是动画文本剪辑，每个剪辑仅包含一个帧。

根据我在互联网上找到的说明，我在第一个（多帧）剪辑的最后一帧之后添加了一个关键帧，并添加了以下代码：

```
dispatchEvent(new Event(Event.COMPLETE));
stop(); 
```

停止剪辑循环并启用滑块的自动播放行为。这对第一个（多帧）影片剪辑非常有效，但是当我尝试将相同的代码添加到其他四个（单帧）剪辑时，它没有达到预期的效果。

这四个剪辑使用以下代码：

```
var myString:String = "Sample text "
var myArray:Array = myString.split("");
addEventListener(Event.ENTER_FRAME, frameLooper);
function frameLooper(event:Event):void {    
if (myArray.length > 0){
TextField.appendText(myArray.shift())­; 
}   
else {  
removeEventListener(Event.ENTER_FRAME, frameLooper);    
}
} 
```

显示一些带有动画打字效果的文本。如果我像在第一个剪辑上那样添加带有 dispatchEvent 代码的关键帧，它将停止工作，并且当我将 dispatchEvent 代码附加到上述动作脚本时，它没有任何效果，并且当它到达幻灯片编号 2 时，piecemaker 2 停止自动播放。

除此之外，我不知道是什么导致了这个问题。请帮忙。

问候，扬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:09:22.877

首先，您应该在文本字段实例上使用 appendText 方法，而不是类本身（编译器应该给您一个错误）。因此，如果您舞台上的文本字段称为“txt”，它将变为“txt.appendText..”。其次，您应该在 else 部分中定义事件调度，因为在它运行时，您的动画将完成。

[编辑] 确保在发布设置中启用严格模式 ![在此处输入图像描述](../Images/40f6e2c4efacc2781a2fa0dd95aca526.png)

# c - 从多个套接字中选择 - 正确的 NFDS 值？

> ID：12025133
> 
> 赞同：4
> 
> 时间：2012-08-19T08:06:14.453
> 
> 标签：c, linux, sockets

我认为**select()**`fd_set`中的 NFDS 决定了该函数将在 READFDS 和其他s中检查多少个套接字。因此，如果我们在 中设置 3 个套接字`fd_set`，但我只想检查第一个，我必须调用 select(1 + 1,...)。这是正确的吗？

或者“ *nfds 是三个集合中任何一个中编号最高的文件描述符，加上 1* ”在[linux select man](http://linux.die.net/man/2/select "选择人")中是否意味着不同的东西？另外为什么我们需要加+1？

**示例代码 - 已修复**

```
int CLIENTS[max_clients];//Clients sockets

int to_read;
FD_ZERO(&to_read);

int i;
int max_socket_fd = 0;

for (i = 0 ; i < max_clients ; i++)
{
 if(CLIENTS[i] < 0)
    continue;

 int client_socket = CLIENTS[i];
 if(client_socket > max_socket_fd)
    max_socket_fd = client_socket;
 FD_SET(client_socket , &to_read);
}

struct timeval wait;

wait.tv_sec = 0;
wait.tv_usec = 1000;

int select_ret = select(max_socket_fd + 1, &read_flags, NULL, NULL, &wait);
... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T08:09:57.543

> ```
> int select_ret = select(current_clients + 1, &read_flags, NULL, NULL, &wait); 
> ```

你的代码是错误的。您不需要传递监视的文件描述符的数量。您需要选择您感兴趣的最大描述符并添加 1。

[标准](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pselect.html)说：

> nfds 参数指定要测试的描述符范围。应在每组中检查第一个 nfds 描述符；也就是说，应检查描述符集中**从零到 nfds-1的描述符**

所以这只是`select`:的预期语义，`nfds`不是文件描述符的数量（正如它的名字所暗示的那样），而是监视范围的上限。

引用中的粗体部分还解释了为什么需要将 1 添加到`nfds`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-19T08:10:51.687

" *nfds 是三组中编号最高的文件描述符，加 1* "

每个文件描述符都由一个**整数值**表示。因此，他们不是在要求`x-th`您要检查的描述符，而是在要求您的+1中描述符的**最高整数值。**`READFDS`

顺便说一句，你应该检查[`poll(2)`和`ppoll(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-19T08:10:43.870

基本上，您放入 FD_SET() 和类似调用的“fd”是整数。select 所需的“nfds”是所有这些值的 max() 加上 1。

# qt - 在 Qt 中读取 MS Word 文件

> ID：12025137
> 
> 赞同：0
> 
> 时间：2012-08-19T08:08:14.500
> 
> 标签：qt, qt4

如何在 Qt 中读取 Word (.doc) 文件？我希望文本的格式与 Word 文档完全一样，没有任何损失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:00:20.710

看看[这篇 Microsoft 知识库文章](http://support.microsoft.com/kb/222101)，它描述了 ActiveX 对象的文档在哪里可以找到。ActiveX Widgets 可以通过 Qt 访问`QAxWidget`，查询是使用`QAxBase::querySubObject()`.

编辑：[看看这个答案](https://stackoverflow.com/questions/3177268/generating-word-documents-doc-odt-through-c-qt)。它在我的答案中添加了一些代码示例。

# c# - 将 JSON 反序列化为字符串

> ID：12025140
> 
> 赞同：2
> 
> 时间：2012-08-19T08:08:52.880
> 
> 标签：c#, javascript, .net, json, serialization

我怎样才能反序列化：

```
{
    "data": [
        {"ForecastID":8587961,"StatusForecast":"Done"},
        {"ForecastID":8588095,"StatusForecast":"Done"},
        {"ForecastID":8588136,"StatusForecast":"Done"},
        {"ForecastID":8588142,"StatusForecast":"Pending"}
    ]
} 
```

至

```
class RawData
{
    public string data { get; set; }
} 
```

所以，我只想拥有

```
[
  {"ForecastID":8587961,"StatusForecast":"Done"},
  {"ForecastID":8588095,"StatusForecast":"Done"},
  {"ForecastID":8588136,"StatusForecast":"Done"},
  {"ForecastID":8588142,"StatusForecast":"Pending"}
] 
```

作为`RawData`类实例的属性数据的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T08:20:48.673

使用[Json.Net](http://json.codeplex.com/)

```
var obj = (JObject)JsonConvert.DeserializeObject(json);
var newJson = obj["data"].ToString(); 
```

或使用内置的[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer%28v=vs.100%29.aspx)

```
var dict = new JavaScriptSerializer().Deserialize<Dictionary<string, object>>(json);
var newjson = new JavaScriptSerializer().Serialize(dict["data"]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T09:06:25.153

将这个 JSON 结构反序列化为：

```
public class Forecast
{
    public IEnumerable<ForecastData> Data { get; set; }
}

public class ForecastData
{
    public int ForecastID { get; set; }
    public string StatusForecast { get; set; }
} 
```

这对于框架中内置的[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)类来说非常简单：

```
string json = "your JSON data here";
IEnumerable<ForecastData> data = new JavaScriptSerializer()
    .Deserialize<Forecast>(json)
    .Data; 
```

或者如果您不想定义模型，您可以这样做：

```
dynamic result = new JavaScriptSerializer().DeserializeObject(json);
foreach (var item in result["data"])
{
    Console.WriteLine("{0}: {1}", item["ForecastID"], item["StatusForecast"]);
} 
```

# google-chrome - 捕获屏幕区域

> ID：12025153
> 
> 赞同：1
> 
> 时间：2012-08-19T08:11:21.103
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-os

有没有办法在新的打包应用程序中捕获屏幕区域？由于这个 Chrome 错误[http://code.google.com/p/chromium/issues/detail?id=68568&q=is%3Astarred&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary](http://code.google.com/p/chromium/issues/detail?id=68568&q=is%3Astarred&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary)用户无法将其 SVG 文件下载为 PNG (vector-paint.com)。我知道有 chrome.tabs.captureVisibleTab 功能，但打包的应用程序无法访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:15:18.860

现在在 API 中没有办法做到这一点，虽然我已经在[一个错误中报告了这一点](https://code.google.com/p/chromium/issues/detail?id=143866)

同时，您可能想尝试这篇 Eric Bidelman 的[HTML5Rocks 帖子](http://www.html5rocks.com/en/tutorials/streaming/screenshare/)中描述的变通方法。不过，我不确定这些选项是否能很好地满足 CSP 限制。

# ruby-on-rails - RSpec 测试因“未知属性”而失败

> ID：12025159
> 
> 赞同：2
> 
> 时间：2012-08-19T08:13:58.490
> 
> 标签：ruby-on-rails, ruby, rspec, attr-accessible

我正在我的模型中测试属性响应：

```
it { should respond_to(:password) }
it { should respond_to(:password_confirmation) } 
```

这些属性不是数据库的一部分，只是在我的模型中声明为`attr_accessible`. 当我不声明它们并运行我的测试时，我得到：

```
ActiveModel::MassAssignmentSecurity::Error:
  Can't mass-assign protected attributes: password, password_confirmation 
```

但是在我声明它们之后，我得到：

```
ActiveRecord::UnknownAttributeError:
  unknown attribute: password 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T00:47:19.140

@8vius 因为您正在关注本教程，但还不够密切。您需要添加以下行：

```
has_secure_password 
```

在 attr_accessible 下：email、：name、：role、：password、：password_confirmation

这允许您将纯文本密码和 password_confirmation 保存到内存中，以便您可以在加密和保存到数据库之前比较字符串并强制相等。您不想将密码以纯文本形式保存在数据库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T08:51:54.577

`attr_accessible`告诉 Rails 你允许对属性进行所谓的批量赋值。

但是属性必须存在于 db 中，否则您应该创建 getter/setter，最简单的方法是：

```
attr_accessor :password_confirmation, :password 
```

无论如何，您不存储密码听起来很奇怪。

# ios - UIPopoverController 显示空框

> ID：12025160
> 
> 赞同：0
> 
> 时间：2012-08-19T08:14:32.200
> 
> 标签：ios, uitableview, uipopovercontroller

所以我试图使用下面显示的代码显示一个`UITableView`内部`UIPopoverController`

```
vc = [[ActionsViewController alloc] init];
initWithContentViewController:vc];
actionsController = [[UIPopoverController alloc] initWithContentViewController:vc];
actionsController.delegate = self;
NSLog(@"Try to sho it ");
[actionsController presentPopoverFromBarButtonItem:(UIBarButtonItem*)sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

这是 ActionsViewController.m 的子类`UITableViewController`

```
- (void)viewDidLoad 
{
    [super viewDidLoad];
    NSMutableArray* list = [[NSMutableArray alloc] initWithCapacity:4];
    self.actionList = list;
    self.clearsSelectionOnViewWillAppear = NO;
    self.contentSizeForViewInPopover = CGSizeMake(320.0, 400.0);
    [self.actionList addObject:@"Print as book"];
    [self.actionList addObject:@"Print page"];
    [self.actionList addObject:@"Save Page"];
    [self.actionList addObject:@"Share"];
}
- (int)numberOfSectionsInTableView:(UITableView *)tableView
{
    NSLog(@"in number of section");
    return 1;
}

- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    NSString* lab = [self.actionList objectAtIndex:indexPath.row];
    NSLog(@"here in there");
    cell.textLabel.text = lab;
    return cell;
}

- (NSInteger)numberOfRowsInSection:(NSInteger)section
{
    return [self.actionList count];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (self.delegate != nil) {
        [self.delegate actionSelected:indexPath.row];
    }
} 
```

对应的.h文件

```
#import <UIKit/UIKit.h>

@protocol KLActionsViewControllerDelegate
- (void)actionSelected:(NSInteger)index;
@end

@interface KLActionsViewController : UITableViewController <UITableViewDataSource,UITableViewDelegate>
@property (nonatomic, retain) NSMutableArray* actionList;
@property (nonatomic, assign) id<KLActionsViewControllerDelegate> delegate;

@end 
```

另外，我不认为这些函数`cellForRowAtIndexPath`会`numberOfSectionsInTableView`被调用，因为我没有看到任何控制台输出。

编辑：这就是我在弹出窗口中看到的

：![在此处输入图像描述](../Images/a014c8509cb3c471436c6a16a39b805c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:51:38.237

我想，问题出在这一行：

```
vc = [[ActionsViewController alloc] init]; 
```

如果你有一个 NIB 文件，你应该`UIViewController`使用它来加载。

```
vc = [[ActionsViewController alloc] initWithNibName:@"ActionViewController" bundle:nil];
// the NibName must be the exact name of XIB file without extension. 
```

* * *

**或/与**

你应该设置`popoverContentSize`：

```
[actionController setPopoverContentSize:vc.view.frame.size]; 
```

我希望它对你有点帮助。

* * *

**更新：**

看来这不是`UIPopoverController`问题，只是一个简单的`UITableViewController`委托问题。

在那一行：

```
actionsController.delegate = self; 
```

您应该将该类设置为实现`UITableViewDelegate`. 基本上它`UITableViewController`本身就像

```
actionsController.delegate = actionController; 
```

因此，如果您尚未在新委托类所在的地方实现委托回调方法，则**不应在这种情况下替换它。**`self`您只是从真正被委托回答回调的类中窃取机会，而在您的新委托类中，您不回答回调。

这就是您看到没有数据的空表的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T13:13:17.263

UITableViewController 是隐式设置数据源和委托，不需要显式设置数据源和委托。

从 .h 文件中删除 UITableViewDataSource、UITableViewDelegate

```
 #import <UIKit/UIKit.h>

@protocol KLActionsViewControllerDelegate
 - (void)actionSelected:(NSInteger)index;
@end

  @interface KLActionsViewController : UITableViewController 
 @property (nonatomic, retain) NSMutableArray* actionList;
 @property (nonatomic, assign) id<KLActionsViewControllerDelegate> delegate;

 @end 
```

并删除此行****actionsController.delegate = self;**

```
 vc = [[ActionsViewController alloc] init];
 actionsController = [[UIPopoverController alloc] initWithContentViewController:vc];
  [actionsController presentPopoverFromBarButtonItem:(UIBarButtonItem*)sender  permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T05:23:16.880

在`viewDidLoad`我添加`self.tableView = [[UITableView alloc] init]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-24T08:45:18.800

您需要通过（最后一行 viewdidload 加载表格视图：

```
 [self.tableView reloadData]; 
```

*   这将触发表视图方法采取行动。在各种 tableview 方法中放置断点，特别是在 - (NSInteger)numberOfRowsInSection:(NSInteger)section { return [self.actionList count]; 如果这没有被调用，你的 tableview 就没有加载。

# jquery - 如何在jQuery中确定字符串的“宽度”

> ID：12025168
> 
> 赞同：-1
> 
> 时间：2012-08-19T08:16:22.353
> 
> 标签：jquery

我有一个用于电子邮件帐户的输入框，它的 bg-image 是位于右侧的“@mydomain.com”，用户可以在我的系统中创建自己的电子邮件帐户。

在他们输入用户后，例如“behzad”，我希望输入的 bg-image 出现在左侧并填充空白区域（如果有）。

例如，有人输入“x”作为用户名，由于“@mydomain.com”位于右侧，“x”和“@mydomain.com”之间有很多可用空间，就像“x( SPACE SPACE SPACE SPACE SPACE...)@mydomain.com" 我想要那个输入框的模糊，它就像这样 "x@mydomain.com"。

```
$('#email-input').blur(function(){
    $(this).css('background', 'new_position')
}); 
```

如何根据用户输入的字符串宽度确定“new_position”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T08:22:43.977

我个人喜欢 Twitter Bootstrap 解决这个问题的方法：http: [//jsfiddle.net/QvR6f/2/](http://jsfiddle.net/QvR6f/2/)

不要使用背景图像，只需将另一个元素粘贴到文本框的末尾即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T08:21:52.433

您可以使用与输入框具有相同字体、大小等的隐藏页面元素来执行此操作。您将其内容设置为用户编写的文本，然后读取其宽度。

**编辑：**

这是这种技术的一个例子：[http ://www.easyjquery.com/onload-fit-input-size-to-length-of-text/](http://www.easyjquery.com/onload-fit-input-size-to-length-of-text/)

```
 function resizeIt(field) {
    var measure = $("#measure");
    measure.text(field.val());
    field.css("width", (measure.width() + 16) + "px");
  } 
```

`measure`将是您文档中的一个跨度，其格式与输入框相同。`field`是你的输入框。

另外我在想也许不是使用输入框的背景图像，而是将它放在输入框旁边，这样如果用户写了一个很长的字符串，它就不会“覆盖”域名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T08:30:48.470

这是我想出来的方法：

```
$('#username').blur(function(){
    var user_input = $('#username').val();
    $(this).removeClass('email-input');
    $('#username').val(user_input+'@mydomain.com');
}); 
```

没有可用空间，而且我在没有确定字符串宽度的情况下得到了我想要的东西。

谢谢大家。

# javascript - 如何在 IE CORS 中发送 POST 数据（使用 XDomainRequest）

> ID：12025169
> 
> 赞同：5
> 
> 时间：2012-08-19T08:16:47.520
> 
> 标签：javascript, jquery, cors

我一直在寻找一个简单的例子，说明如何在 IE 的跨域请求中发送 POST 数据（使用 XDomainRequest 对象）。

我已经能够发出一个简单的 POST 请求，但无法向其中添加 POST 数据。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-02T02:47:30.143

尝试这样的事情：

```
var xdr;
function err() {
    alert('Error');
}
function timeo() {
    alert('Time off');
}
function loadd() {
    alert('Response: ' +xdr.responseText);
}
function stopdata() {
    xdr.abort();
}   
xdr = new XDomainRequest();
if (xdr) {
    xdr.onerror = err;
    xdr.ontimeout = timeo;
    xdr.onload = loadd;
    xdr.timeout = 10000;
    xdr.open('POST','http://example.com');
    xdr.send('foo=12345');
    //xdr.send('foo=<?php echo $foo; ?>'); to send php variable
} else {
    alert('XDR undefined');
} 
```

服务器端（php）：

```
header('Access-Control-Allow-Origin: *');

if(isset($HTTP_RAW_POST_DATA)) {
  parse_str($HTTP_RAW_POST_DATA); // here you will get variable $foo
  if($foo == 12345) {
    echo "Cool!"; // This is response body
  }
} 
```

# c# - 如何向我的 Linq 选择添加唯一的行号？

> ID：12025170
> 
> 赞同：1
> 
> 时间：2012-08-19T08:16:53.837
> 
> 标签：c#, linq

我有以下代码：

```
 public IEnumerable<Content.Grid> DetailsBase(string pk)
    {
        var data = contentRepository.GetPk(pk);
        var refType = this.GetRefType(pk);
        var refStat = this.GetRefStat(pk);
        var type = referenceRepository.GetPk(refType);
        var stat = referenceRepository.GetPk(refStat);
        var dataOut =
        from d in data
        join s in stat on d.Status equals s.RowKey into statuses
        from s in statuses.DefaultIfEmpty()
        join t in type on d.Type equals t.RowKey into types
        from t in types.DefaultIfEmpty()
        select new Content.Grid
        {
            PartitionKey = d.PartitionKey,
            RowKey = d.RowKey,
            Order = d.Order,
            Title = d.Title,
            Status = s == null ? "" : s.Value,
            StatusKey = d.Status,
            Type = t == null ? "" : t.Value,
            TypeKey = d.Type
        };
        return dataOut;
    } 
```

和这个类：

```
 public class Grid
    {
        public string PartitionKey { get; set; }
        public string RowKey { get; set; }
        // Counter
        public int Row { get; set; }
        //
        public int Order { get; set; }
        public string Title { get; set; }
        public string Status { get; set; }
        public string StatusKey { get; set; }
        public string Type { get; set; }
    } 
```

有没有办法可以将 Row 的值设置为递增。在另一个选择中，我使用了这个：

```
 return dataIn
            .OrderBy(item => item.Order)
            .Select((t, index) => new Content.Grid()
            {
                PartitionKey = t.PartitionKey,
                RowKey = t.RowKey,
                Row = index + 1, 
```

有没有办法可以在我的第一个选择中使用类似的东西？

**更新：**

我有以下似乎可行但不确定如何加入这两个选择的方法：

```
 public IList<Content.Grid> GetContentGrid(string pk)
    {
        var data =
        from d in contentRepository.GetPk(pk)
        join s in referenceRepository.GetPk(this.GetRefStat(pk)) 
        on   d.Status equals s.RowKey into statuses
        from s in statuses.DefaultIfEmpty()
        join t in referenceRepository.GetPk(this.GetRefType(pk))
        on   d.Type equals t.RowKey into types
        from t in types.DefaultIfEmpty()
        select new Content.Grid
        {
            PartitionKey = d.PartitionKey,
            RowKey = d.RowKey,
            Order = d.Order,
            Title = d.Title,
            Status = s == null ? "" : s.Value,
            StatusKey = d.Status,
            Type = t == null ? "" : t.Value,
            TypeKey = d.Type,
            Link = d.Link,
            Notes = d.Notes,
            TextLength = d.TextLength,
            // AuditableTable
            Created = d.Created ?? new DateTime(2012, 1, 1),
            CreatedBy = d.CreatedBy ?? "n/a",
            Modified = d.Modified ?? new DateTime(2012, 1, 1),
            ModifiedBy = d.ModifiedBy ?? "n/a" 
        };
        return data
            .OrderBy(item => item.Order)
            .Select((t, index) => new Content.Grid()
            {
                PartitionKey = t.PartitionKey,
                RowKey = t.RowKey,
                Row = index + 1,
                Order = t.Order,
                Title = t.Title,
                Status = t.Status,
                StatusKey = t.StatusKey,
                Type = t.Type,
                TypeKey = t.TypeKey,
                Link = t.Link,
                Notes = t.Notes,
                TextLength = t.TextLength,
            })
            .ToList();
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T08:21:51.857

您不能在查询表达式中指定与索引相关的投影，但您可以执行以下操作：

```
 var dataOut = from d in data
                  join s in stat on d.Status equals s.RowKey into statuses
                  from s in statuses.DefaultIfEmpty()
                  join t in type on d.Type equals t.RowKey into types
                  from t in types.DefaultIfEmpty()
                  select new { d, s, t };
    return dataOut.Select((x, index) => new Content.Grid {
                PartitionKey = x.d.PartitionKey,
                RowKey = x.d.RowKey,
                Order = x.d.Order,
                Title = x.d.Title,
                Status = x.s == null ? "" : x.s.Value,
                StatusKey = x.d.Status,
                Type = x.t == null ? "" : x.t.Value,
                TypeKey = x.d.Type,
                Row = index
           }; 
```

但是请注意，如果不指定任何顺序，这可能会失败 - 或者只是给出不可靠的顺序。

# dns - dig 返回 SERVFAIL 但 +trace 有效

> ID：12025173
> 
> 赞同：35
> 
> 时间：2012-08-19T08:17:31.777
> 
> 标签：dns, bind

这是主要问题：

```
dig maktabkhooneh.info +trace 
```

工作得很好，并返回正确的答案。

```
dig maktabkhooneh.info 
```

（没有 +trace）返回：

```
; <<>> DiG 9.8.1-P1 <<>> maktabkhooneh.info

;; global options: +cmd

;; Got answer:

;; ->>HEADER<<- opcode: QUERY, status: SERVFAIL, id: 58716

;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 0 
```

可能是什么原因？我正在读[这个](https://serverfault.com/questions/65499/dig-trace-resolves-while-without-doesnt)。这是我 12 小时前更改域数据的唯一可能原因吗？难道没有其他可能的原因`SERVFAIL`吗？

**额外信息：**

我有两台 BIND 服务器在 168.144.251.73（主）和 168.144.92.50（从）上工作。

在主人身上我有：

```
$TTL 300

maktabkhooneh.info.        IN    SOA     ns1.maktabkhooneh.info.   
admin.maktabkhooneh.info. (

2012060201    ; Serial

86400    ; Refresh

7200     ; Retry

3600000    ; Expire

300 )  ; Minimum

maktabkhooneh.info.        IN    A       168.144.97.83

maktabkhooneh.info.        IN    NS      ns1.maktabkhooneh.info.

maktabkhooneh.info.        IN        NS      ns2.maktabkhooneh.info.

ns1     IN    A   168.144.251.73

ns2     IN    A   168.144.92.50

www     IN    CNAME   maktabkhooneh.info. 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-20T08:51:10.920

`dig +trace`从一开始就遵循整个链 - 它查询根服务器，然后是 .info 服务器，然后是您的 namservers。因此，它避免了任何缓存解析器，也避免了传播问题。

`dig +notrace`（默认）查询您的默认 DNS 解析器（在 Linux 上，无论在 中指定什么`/etc/resolv.conf`）。

该解析器存在一些问题 - 可能配置错误，可能缓存中有旧数据，可能无法访问您的权威名称服务器等。

# jquery - 如果提交表单时未使用 data: 怎么办？

> ID：12025179
> 
> 赞同：0
> 
> 时间：2012-08-19T08:20:02.423
> 
> 标签：jquery

使用 post 提交表单时，如果我不希望它序列化（或作为字符串，我觉得不安全）并希望它以与不使用 jquery 时相同的方式提交怎么办？我怎么能那样做？

```
$.ajax({
        type: "POST",
        data: $("#sform").serialize(), //don't want to use this part. Want it go just like it would without using jquery 
```

这些数据是“必须”使用的吗？有什么替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T08:20:56.097

> 并希望它以与我不使用 jquery 时相同的方式提交？

这正是该[`.serialize()`](http://api.jquery.com/serialize/)方法所做的 :-) 它使用[`application/x-www-form-urlencoded`](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1)编码格式化表单数据，这是 html 表单的默认格式。因此，如果您希望服务器以与未使用 javascript**完全相同的格式**`.serialize()`接收数据，请使用该方法。

AJAXify 表单的标准方法如下：

```
$(function() {
    $('#sform').submit(function() {
        $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            success: function(result) {

            }
        });
        return false;
    });
}; 
```

Now whether the user has javascript disabled or not, the server will receive the form POST in exactly the same way.

# php - yii 中的表单行为

> ID：12025180
> 
> 赞同：0
> 
> 时间：2012-08-19T08:20:24.667
> 
> 标签：php, yii

我有一个[Yii 行为](http://www.yiiframework.com/wiki/44/behaviors-events/#hh1)，它添加了一些带有条件的自定义字段

_form.php

```
$form->attachbehavior('users', new DirectoriesBehavior);

// return part of form
echo $form->getDirectory(array('sysName' => 'users', 'useDefaultValue' => true));

// Other form parts (default for yii)
echo $form->labelEx($model, 'name'); 
```

`DirectoriesBehavior::getDirectory()``<select>`使用或`<input>`等字段构建 HTML 表单部分。

但是如何将表单的名称/ID 发送到我的行为中？

渲染后的样子

```
<form method="" id="myForm">
    <!--BEHAVIORS CONTENT-->
    <select>
        <option value="UserId">UserName</option>
    </select>

    <!--Default fields of form-->
    <input type="text" name="myForm[exampleField]" />
</form> 
```

我的行为内容应该看起来像

```
<select name="myForm[users]">
    <option>etc</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:50:49.360

我解决了这个问题：

我们可以在 _form.php 中发送 $model

```
$form->getDirectory(array('model' => $model)); 
```

在 DirectoriesBehavior.php

```
public function getDirectory(array $data)
{
    $this->inputName = get_class($data['model']);
} 
```

另外（对于将与此表单一起使用的脚本，我们可以发送表单的 ID）

_form.php

```
$form->id; 
```

# coffeescript - Coffeescript 编译：不是作为 file2file，而是作为 text2text

> ID：12025181
> 
> 赞同：0
> 
> 时间：2012-08-19T08:20:30.993
> 
> 标签：coffeescript

我们可以使用以下命令将 coffescript 文件编译为 js 文件：

> 咖啡 --join path/to/result.js --compile path/to/coffeescript_dir/

但是如果我想编译一段coffeescript代码（作为文本）并获得一段js代码（也作为文本），它们不是文件。例如：

*   cs 文字：`"func = () -> 55"`

*   js文本结果：`"var func; func = function(){return 55;}"`

它必须从控制台完成，甚至更好地从 python 交互式控制台完成 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T08:39:31.263

您可以使用`--eval`将字符串参数作为咖啡输入，`--bare`以避免将 JS 输出包装在闭包中，并将`--print`输出打印到标准输出而不是文件：

```
$ coffee --print --bare -eval 'func = -> 55' 
var func;

func = function() {
  return 55;
}; 
```

要从 Python 调用它，您可以使用[subprocess](http://docs.python.org/library/subprocess.html)模块：

```
from subprocess import Popen, PIPE
def compile_cs(cs_code):
    args = ['coffee', '--print', '--bare', '--eval', cs_code]
    return Popen(args, stdout=PIPE).communicate()[0] 
```

# java - Java - TCP/HTTP 通信的最快流？

> ID：12025184
> 
> 赞同：4
> 
> 时间：2012-08-19T08:20:48.843
> 
> 标签：java, performance, http, proxy, network-programming

我正在尝试编写一个 Java HTTP 代理隧道程序，并且我需要专家关于用于通信的最佳和最快流的建议。

我已经实现了基本功能，一切正常。唯一的问题是通信速度或性能。我的 HTTP 代理系统由一个在远程服务器上运行的服务器程序和一个在本地机器上运行的客户端程序组成。到目前为止，该程序如下所示：

**监听器.java：**

```
/**
 * Listens and accepts connection requests from the browser
 */
ServerSocket listener = null;
try {
    listener = new ServerSocket(port, 128);
} catch (IOException ex) {
    ex.printStackTrace(System.err);
}

ExecutorService executor = Executors.newCachedThreadPool();

Socket connection;
while (!shutdown) {
    try {
        connection = listener.accept();
        executor.execute(new ProxyTunnel(connection));
    } catch (IOException ex) {
        ex.printStackTrace(System.err);
    }
} 
```

**代理隧道.java：**

```
try {
    byte[] buffer = new byte[8192];  // 8-KB buffer
    InputStream browserInput = browser.getInputStream();
    OutputStream browserOutput = browser.getOutputStream();

    // Reading browser request ...
    StringBuilder request = new StringBuilder(2048);
    do {
        int read = browserInput.read(buffer);
        logger.log(read + " bytes read from browser.");
        if (read > 0) {
            request.append(new String(buffer, 0, read));
        }
    } while (browserInput.available() > 0 && read > 0);

    // Connecting to proxy server ...
    Socket server = new Socket(SERVER_IP, SERVER_PORT);
    server.setSoTimeout(5000);  // Setting 5 sec read timeout
    OutputStream serverOutput = server.getOutputStream();
    InputStream serverInput = server.getInputStream();

    // Sending request to server ...
    serverOutput.write(request.toString().getBytes());
    serverOutput.flush();

    // Waiting for server response ...
    StringBuilder response = new StringBuilder(16384);
    do {
        try {
            read = serverInput.read(buffer);
        } catch (SocketTimeoutException ex) {
            break; // Timeout!
        }
        if (read > 0) {
            // Send response to browser.");
            response.append(new String(buffer, 0, read));
            browserOutput.write(buffer, 0, read);
            browserOutput.flush();
        }
    } while (read > 0);

    // Closing connections ...
    server.close();

} catch (IOException ex) {
    ex.printStackTrace(System.err);
} finally {
    try {
        browser.close();
    } catch (IOException ex) {
        ex.printStackTrace(System.err);
    }
} 
```

服务器程序使用类似的方式将 HTTP 请求发送到目标服务器（例如 www.stackoverflow.com）并将响应转发给客户端程序，客户端程序将响应转发给本地浏览器。

1.  如何提高这些 TCP/HTTP 通信的性能？
2.  是否使用缓冲流等`BufferedInputSream`并`BufferedOutputStream`提高通信性能？
3.  如果我使用`java.nio`Channels 和 Buffers 而不是`java.net`Sockets 和`java.io`Stream，我会获得任何性能改进吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-19T08:39:55.243

## 不要自己做

建议 0：那里有很多代理服务器，更具可扩展性、稳定和成熟。你真的需要自己写吗？

## 不要使用`StringBuilder`/`String`来缓冲请求

```
byte[] buffer = new byte[8192];  // 8-KB buffer
//...
browserInput.read(buffer);
//...
request.append(new String(buffer, 0, read));
//...
serverOutput.write(request.toString().getBytes()); 
```

这是有缺陷的，原因有几个：

*   `String`您假设您的 HTTP 调用仅是文本（ASCII），二进制数据在转换为和返回后将是格式错误的`byte[]`，请参阅：[字符串、字节 [] 和压缩](https://stackoverflow.com/questions/11762975)

*   即使协议是基于文本的，您也使用系统的默认编码。我敢打赌这不是你想要的

*   最后，最重要的部分：**不要缓冲整个请求**。从传入请求中读取数据块，并在一次迭代中立即将其转发到目标服务器。绝对不需要额外的内存开销和延迟。在收到几个字节后立即发送它们并忘记它们。

## 不要使用[`Executors.newCachedThreadPool()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newCachedThreadPool())

这个池可以无限增长，在高峰期创建数千个线程。本质上，您为每个连接创建一个线程（除了池重用空闲线程，但如果没有可用线程则创建新线程）。考虑一下[`Executors.newFixedThreadPool(100)`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool(int))- 在大多数情况下，100-200 个线程就足够了。除此之外，您很可能在上下文切换中几乎不会烧毁您的 CPU，而无需做太多工作。不要害怕延迟，横向扩展。

## 使用非阻塞[网络](https://netty.io/)堆栈

这给我们带来了最后的建议。完全放弃阻塞套接字。*它们很方便，但由于每个连接的线程*要求，它们不能很好地扩展。太多的内存被用来保存堆栈，太多的 CPU 被浪费在上下文切换上。netty 很棒，它在 NIO 之上构建了强大的抽象。

查看[示例](https://netty.io/Documentation/WebHome)，它们包括 HTTP 客户端/服务器代码。有一点学习曲线，但您可以期望性能增长几个数量级。

# android - 模拟器打不开主屏幕

> ID：12025186
> 
> 赞同：3
> 
> 时间：2012-08-19T08:20:56.710
> 
> 标签：android

我的模拟器打不开。

我在stackoverflow中看到了与我的问题类似的其他问题，但我没有得到任何帮助。我也用 2GB 替换了我的 1GB RAM。但它仍然是一样的。模拟器不显示主屏幕。我正在使用 P4 3.0 GHZ 处理器。我还尝试将 1024 mib 分配给 sd 以获得 avd。但它仍然是一样的。

我正在使用 Android SDK 4.0 和 Eclipse Juno。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:47:09.140

等等，你的机器对模拟器不太友好。

第一次运行它只需要更长的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-28T20:20:39.253

我尝试了很多选项来启动并运行模拟器。清理/重新启动/adb killstart 不幸的是，这一切对我不起作用。我正在尝试使用 API 级别 20（Android 4.4W）。但是，没有任何帮助。因此，我尝试使用 API 17/18/19（Android 4.2、4.3 等）。最后 4.3.1 和 API 18 为我工作，我的模拟器开始正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:09:47.807

这是我遇到的同样问题。

但是我通过以下方式解决了它完美地工作。

# php - Wordpress 电子商务网站需要 9 秒才能加载

> ID：12025188
> 
> 赞同：0
> 
> 时间：2012-08-19T08:21:33.987
> 
> 标签：php, wordpress, load-time, stripe-payments, woocommerce

我有一个网站需要 9 秒才能加载任何页面。根据请求，页面会挂起大约 9 秒，然后再提供服务。我试图弄清楚这是否是wordpress安装的问题，主机的问题......或者什么。

网站：[http ://www.drawingwithconfidence.com](http://www.drawingwithconfidence.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T10:32:49.600

你有相当多的资源，这会减慢网站的速度。一个需要一点时间的大来源是 /shopping-cart/#.UDC8a6Ie7nM 加载需要 3.5 秒，这有点奇怪，因为它的 22kb 文件，另一个 88kb 的文件需要 800 毫秒加载。那么这激起了我的好奇心，为什么这么久？...我很想查看它的代码。

嗯，你也从谷歌的网络字体服务中获得了一些字体，这需要很长时间，你为什么使用这个，易于阅读的字体在计算机上已经准备好，所有难以阅读的花哨字体都是自定义字体.

对于一个快速的答案，不要把所有你链接的源都拿出来，是的，它更安全，但它确实会破坏网站的速度。如果您愿意，您可以尝试不使用购物车，但随后您删除了电子商务部分，但它是网站中最慢的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:33:27.773

我有两个可能的建议：

1.  如果电子商务插件使页面变慢，请使用其他插件。WordPress 有许多电子商务插件。
2.  如果没有电子商务插件页面很慢，请使用专用的电子商务解决方案，例如 Zen Cart、OS commerce 等。

如果您的主机提供 CPanel，那么在更改之前尝试一些电子商务解决方案应该相当容易。只需使用 Fantastico 或 Installatron 将它们安装到子目录中即可进行试用。

# jquery - jQuery css 选择器 - 选择除最后一个之外的所有内容

> ID：12025190
> 
> 赞同：1
> 
> 时间：2012-08-19T08:21:51.543
> 
> 标签：jquery, css, jquery-selectors

这是我的html：

```
<!-- Navigation -->
            <nav>
                <ul>
                    <li><a href="#">Products</a></li>
                    <li><a href="#">Gallery</a></li>
                    <li><a href="#">Guestbook</a></li>
                    <li><a href="#">Contacts</a></li>
                    <li><a href="#">Help</a></li>
                    <li><a id="cart" href="#"><span class="glyph general">2</span></a></li>
                </ul>
            </nav> 
```

我想在除了最后一个带有紫色背景的锚和最后一个带有 id="cart" 红色背景的子节点上创建 jQuery 悬停效果，这是我的 jquery：

```
<script>
$(function () {
        $("nav ul li a:not(#cart)").hover(
            function (){
                $(this).hide().css("background-color","#6e0069").fadeIn(500);
            },
            function(){
                $(this).css("background-color","rgb(255,255,255)");
            }
        );
}) 
```

除了红色背景的最后一个元素，如何添加相同的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T08:31:17.410

不知道这是否是你所要求的，但我会做这样的事情：

```
$("nav ul li a").hover(function() {
    var color = $(this).is("#cart") ? "rgb(255,0,0)" : "#6e0069"
    $(this).hide().css("background-color", color).fadeIn(500);
}, function() {
    $(this).css("background-color", "rgb(255,255,255)");
});​ 
```

# mysql - MySQL - 有没有办法在不编写脚本的情况下将 bin 日志位置包含在转储文件中

> ID：12025193
> 
> 赞同：5
> 
> 时间：2012-08-19T08:21:59.197
> 
> 标签：mysql, replication, dump, binlog

有没有办法在不编写脚本的情况下将复制 bin 日志位置包含在转储文件中？

我知道有一些方法可以通过脚本编写，在转储文件中附加一行等。但我记得有一次读到它可以通过 mysqldump 中的一个简单参数来实现，这是真的吗？如果是的话，语法是什么？

非常感谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-19T08:44:30.603

太好了，我找到了答案：

[--master-data 选项允许这样做](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_master-data)

mysqldump --master-data=1 ... 需要在主服务器上运行，并且会包含一个 sql，它会自动将 MySQL 实例的主服务器更改为当前文件/日志位置。

如果使用 2 而不是 1 那么它只写一个注释，这对于手动设置也很有用......

# android - 通过 Python 执行 Android 命令并将结果存储在列表中

> ID：12025195
> 
> 赞同：3
> 
> 时间：2012-08-19T08:22:05.460
> 
> 标签：android, python

我正在通过 Python 执行 ADB 命令，它在某种程度上可以正常工作。代码是：

```
#!/usr/bin/python
import sys
import string
import os
import subprocess

cmd = 'adb shell ls'
s = subprocess.Popen(cmd.split())
print "Again"
t = str(s)
for me in t.split('\n') :
    print "Something"
    print me[1] 
```

我得到的输出是：

```
static-243:Scripts adityagupta$ ./hellome.py 
Again
Something
s
static-243:Scripts adityagupta$ config
cache
sdcard
acct
mnt
vendor
d
etc
ueventd.rc
ueventd.goldfish.rc
system
sys
sbin
proc
init.rc
init.goldfish.rc
init
default.prop
data
root
dev 
```

任何建议我都可以制作一个列表并将每个元素存储在其中。该列表应如下所示

list = [cache, sdcard, acct, mnt, vendor ..] 等等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T10:00:25.167

你不应该使用`check_output`便利功能吗？

```
#!/usr/bin/env python
import subprocess

cmd = 'adb shell ls'
s = subprocess.check_output(cmd.split())
print s.split('\r\n') 
```

它在这里工作得很好（Ubuntu盒子）。请注意，换行符是 '\r\n' 而不仅仅是 '\n'。

# jquery - jquery流沙有线跳跃

> ID：12025196
> 
> 赞同：1
> 
> 时间：2012-08-19T08:22:13.527
> 
> 标签：jquery, html, css, jquery-plugins, quicksand

我在一些站点中使用了一个 jQuery 流沙插件，并在一些教程中使用它来自动`li`按类型对 s 进行排序。

我的网站在两个地方使用该插件：

[http://www.adygraph.co.il/index.php/2012-07-12-15-50-40](http://www.adygraph.co.il/index.php/2012-07-12-15-50-40)

[http://www.adygraph.co.il/index.php/customers](http://www.adygraph.co.il/index.php/customers)

在这两种情况下，插件都很好用，除了动画跳跃。我已经尝试了很多解决方案，但仍然会发生。

有更多的错误只是 UL 的高度没有改变真的只是在 *5 中改变了它应该的高度。

有人可以帮忙吗？

# android - 屏幕亮起时开始活动

> ID：12025197
> 
> 赞同：0
> 
> 时间：2012-08-19T08:22:40.003
> 
> 标签：android

这是我的场景：

我需要在屏幕打开时启动一项活动，没问题，只是它运行缓慢（至少需要一秒钟）。

所以我所做的是在屏幕消失时启动活动，然后等到用户转动他的屏幕。

现在我的问题是活动打开了锁定屏幕，这是我想要的，但是当屏幕消失时它会发出解锁声音。有没有可能取消声音？或者也许在屏幕工作时更快地激活？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:36:52.210

onPause() 和 onResume() 方法在应用程序进入后台并再次进入前台时调用，因此只需在 onPause() 中调用以下函数。

```
public static boolean isApplicationSentToBackground(final Context context) {
ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
List<RunningTaskInfo> tasks = am.getRunningTasks(1);
if (!tasks.isEmpty()) {
  ComponentName topActivity = tasks.get(0).topActivity;
  if (!topActivity.getPackageName().equals(context.getPackageName())) {
    return true;
  }
}

return false;
} 
```

使用权限 android:name="android.permission.GET_TASKS"

您必须将此权限添加到android清单文件

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-19T08:42:56.330

您可以将 ACTION_SCREEN_ON 和 ACTION_SCREEN_OFF 意图用于屏幕关闭和屏幕打开情况。以下链接将使您对此有更多了解

[http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/](http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/)

# ruby-on-rails - 按钮标签中嵌入的 HTML 轨道 button_to

> ID：12025199
> 
> 赞同：4
> 
> 时间：2012-08-19T08:22:50.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

> **可能重复：**
> [有没有一种方法可以使用 rails form helper 来生成提交的按钮标签](https://stackoverflow.com/questions/2254720/is-there-a-way-with-rails-form-helper-to-produce-a-button-tag-for-submit)

这可能是一个很简单的问题，但我有这个 HTML 布局：

```
<button class="btn btn-large btn-inverse"><i class="icon-white icon-shopping-cart"></i> Add to bag</button> 
```

这是一个添加到购物车的按钮，我正在按照敏捷 Web 开发这本书来创建一个购物车。问题是，在按钮标签之间嵌入了 HTML，我如何让它像这样呈现？我试过这个：

```
%= button_to raw('<i class="icon-white icon-shopping-cart"></i> Add to bag'), line_items_path(product_id: product) %> 
```

但首先它打印一个“输入”而不是一个按钮，并且文本在 html 中都是歪斜的，而不是在开始和结束标签之间。

我知道我可以手动编写所有内容，但希望弄清楚是否有一种快捷方式可以使用 rails 标签执行此 HTML 以输出，主要是因为使用 twitter bootstrap 我一直看到这种类型的 HTML 模式......

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:01:26.710

正如 Mischa 所评论的，它类似于[Is there a way with rails form helper to generate a button tag for submit](https://stackoverflow.com/questions/2254720/is-there-a-way-with-rails-form-helper-to-produce-a-button-tag-for-submit)。

content_tag 帮助器可用于在 rails 中编写按钮。然而，这不是一个捷径，因为它需要比原始 html 更长的时间来编写。

但是，如果您需要经常这样做，您可以编写一个自定义帮助方法来按照您想要的方式进行操作！

只需添加到您的 app/helpers/application_helper.rb

```
def my_button_to name, options = {}, html_options = {} # or some variation
  # eg. deal with options hash the way button_to deals with it here?
  content_tag :button, html_options = nil do
    raw name
  end
end 
```

* * *

现在您可以在视图中使用它：

```
<%= my_button_to '<i class="icon-white icon-shopping-cart"></i> Add to bag', {}, :class => "btn btn-large btn-inverse" %> 
```

# image - 在不使用闪光灯的情况下处理图像

> ID：12025200
> 
> 赞同：1
> 
> 时间：2012-08-19T08:22:59.307
> 
> 标签：image, client-side, server-side

我希望用户根据用户需要动态更改图像 - 例如在用户选择时添加或删除图像的任何组件，并在需要时更改任何组件的颜色，例如笔记本电脑颜色。我怎样才能在不使用闪存的情况下实现这一点——可以是服务器端或客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:41:22.013

您可以使用 HTML5 画布很好地处理图像，但您正在寻找的更像是一个*CRUD*图像处理示例。为此，请查看以下内容：

[www.grocerycrud.com/image-crud/](http://www.grocerycrud.com/image-crud/)

# php - 贝宝 IPN 数据

> ID：12025204
> 
> 赞同：0
> 
> 时间：2012-08-19T08:24:58.663
> 
> 标签：php, mysql, paypal, payment, paypal-ipn

我正在将 Paypal 添加到我的网站，并且我还创建了一个页面来接收来自 Paypal IPN 的数据。在我收到我的贝宝 IPN 的 PHP 文件中，我将用于贝宝的用户电子邮件添加到我的数据库中。所以我想知道如果用户没有贝宝电子邮件，直接在贝宝页面选择通过他或她的信用卡付款怎么办。我从 IPN 收到什么样的数据？里面也有邮箱吗？谢谢 ![在此处输入图像描述](../Images/c7e69de6fa56e117d1ed8e221fbab687.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T08:35:46.537

是的，即使用户没有 PayPal 帐户，也会收到一封电子邮件。如果他们选择通过信用卡付款，PayPal 会要求他们在付款表格中输入有效的电子邮件。

*警告*：如果用户没有 PayPal 帐户，则无法保证您获得的电子邮件地址是正确的。PayPal 不会验证他们输入的地址是否确实有效。我个人遇到过一种情况，用户不小心输入了他们的地址，因此从未收到购买确认/产品。

（来源：我在自己的一个网站上使用 PayPal IPN 并对此进行了测试。）

# c++ - 在使用 C++ 的简单文本 RPG 游戏中，变量的值不会改变

> ID：12025207
> 
> 赞同：0
> 
> 时间：2012-08-19T08:25:36.520
> 
> 标签：c++, inheritance, text-based

我正在尝试创建一个非常简单的回合制文本 RPG 游戏。代码编译并运行，但攻击和修复功能似乎没有改变变量的值。我很确定这是与继承有关的问题，但我不确定。

```
#include <iostream>
#include <cstdlib>
#include <string>

using namespace std;

struct Stats {
       int hp;
       int def;
       int atk;
       int skl;
};

class Character {
      public:
             Character();
             virtual void getHit(int) = 0;
             int attack(int);
             void defend();
             virtual int getHP() = 0;

      protected:
              Stats m_Stats;
};

Character::Character() {
   m_Stats.hp = 0;
   m_Stats.def = 0;
   m_Stats.atk = 0;
   m_Stats.skl = 0;
}

int Character::attack(int def) 
{
    return (m_Stats.atk - def);
}

class Player : public Character {
      public:
             Player();
             void getHit(int);
             void healSelf();
             void fireBall();
             int getAtk();
             int getHP();
};

Player::Player()
{
     m_Stats.hp = 100;
     m_Stats.atk = 30;
     m_Stats.def = 10;
     m_Stats.skl = 10;     
}

int Player::getHP()
{
    return m_Stats.hp;
}

int Player::getAtk()
{ return m_Stats.atk; }

void Player::getHit(int atk)
{
   m_Stats.atk += m_Stats.def - atk;     
 }

void Player::healSelf()
{
     m_Stats.hp += m_Stats.skl;
     if(m_Stats.hp > 100)
        m_Stats.hp = 100;
}

class Enemy : public Character {
      public:
             Enemy();
             void getHit(int);
             void chooseAction();
             void rage();
             int choose();
             void defend();
             void resetAtk();
             int getAtk();
             int getHP();
};

Enemy::Enemy()
{
     m_Stats.hp = 150;
     m_Stats.atk = 40;
     m_Stats.def = 5;
     m_Stats.skl = 5;
}

int Enemy::getHP()
{
    return m_Stats.hp;
}

int Enemy::getAtk()
{
     return m_Stats.atk;
}

void Enemy::resetAtk()
{
     m_Stats.atk = 40;
}

int Enemy::choose()
{
     srand(time(0));
     int c = rand() % 3;
     if(c == 0)
        cout << "Enemy chooses to attack!\n";
     else if(c == 1)
        cout << "Enemy is raging!\n";
     else if(c == 2)
        cout << "Enemy chooses to defend!\n";
     return c;
}

void Enemy::rage()
{
     m_Stats.atk += 3;
 }

void Enemy::getHit(int atk)
{
   m_Stats.atk += m_Stats.def - atk;   
   m_Stats.def = 5;  
}

void Enemy::defend()
{
     m_Stats.def += 2;
}

int main()
{
    Player p;
    Enemy e;
    bool done = false; int choice, move;
    cout << "The enemy faces you!\n";
    while(!done)
    {cout << "1) Attack  2) Heal Self. ";
     cin >> choice;
     if(choice == 1)
      {  e.getHit(p.getAtk());}
     else if(choice == 2)
        {p.healSelf(); }

     cout << "Your HP: " << p.getHP() << "\n";
     cout << "Enemy HP: " << e.getHP() << "\n";

     choice = e.choose();
     if(choice == 1)
         {p.getHit(e.getAtk());
         e.resetAtk();
         }
     else if(choice == 2)
         e.rage();
     else if(choice == 3)
         e.defend();

     cout << "Your HP: " << p.getHP() << "\n";
     cout << "Enemy HP: " << e.getHP() << "\n";

     if(p.getHP() == 0 || e.getHP() == 0)
         done = true;
     }

     if(p.getHP() > e.getHP())
         cout << "You won!" << endl;
     else
         cout << "You lost!" << endl;

    system("PAUSE");
    return 0;
} 
```

样本输出

```
敌人面对你！
1) 攻击 2) 治疗自我。1
你的生命值：100
敌人HP：150
敌人选择防守！
你的生命值：100
敌人HP：150
1) 攻击 2) 治疗自我：2
你的生命值：100
敌人HP：150

```

是的，输出并不漂亮，但我会在代码稳定后推迟清理输出。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T08:44:35.273

为什么你会期望这些值会改变？程序中唯一更改`hp`字段值的地方是`Player::healSelf`方法。由于玩家的HP上限为100，而玩家从一开始就有100的HP，因此调用`healSelf`不能将`hp`值提高到100以上。这就是为什么它不会改变。

我希望你的`getHit`方法能够改变`hp`玩家和敌人的价值。但他们没有。你自己看

```
void Enemy::getHit(int atk)
{
   m_Stats.atk += m_Stats.def - atk;   
   m_Stats.def = 5;  
} 
```

该代码中没有提及`hp`。显然，这是一个错误。实施中似乎存在相同的错误`Player::getHit`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T08:34:48.530

从外观上看，当您选择“攻击”时，您正在调用 e.getHit() ，这可能意味着“敌人”被“击中”。但是，那个功能不会改变HP，它会改变ATK......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T08:53:37.797

你正在改变攻击，而不是健康。

通常，球员的防守决定了进攻的规模。

```
void Player::getHit(int atk)
{
    m_Stats.atk += m_Stats.def - atk;     
} 
```

如果你假设你有**100 hp**，防御**0.8**并且有人攻击你**20 点**，你可以这样做：

```
void Player::getHit(int atk)
{
    m_Stats.hp -= m_Stats.def * atk;     
} 
```

你的防御阻碍了攻击，你现在有**84hp**。

# forms - 如何仅在其书籍处于活动状态时打开表单

> ID：12025217
> 
> 赞同：1
> 
> 时间：2012-08-19T08:27:37.397
> 
> 标签：forms, vba, excel

我有一个截图来显示一个表格

```
Form1.Show //shortcut is ctrl+Q 
```

如果我激活另一个工作簿并按 ctrl+Q - 表单也会出现
，我希望它仅在其书籍处于活动状态时出现。
我试过：

```
If ThisWorkbook = ActiveWorkbook Then Form1.Show 
```

或者

```
If ActiveWorkbook = ThisWorkbook Then Form1.Show 
```

并得到语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T08:32:32.283

引用 .name 怎么样？

```
If ThisWorkbook.Name = ActiveWorkbook.Name Then
   MsgBox "Is Active"
End If 
```

即使 Excel 2013 也不会同时打开两个同名的工作簿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:55:21.720

ActiveWorkbook 和 Thisworkbook 是对象；因此，要比较它们，您必须使用`is`而不是`=`.

```
If Thisworkbook is ActhiveWorkbook then Form1.Show 
```

# php - Ajax 调用 PHP 失败，ASP.NET 工作正常

> ID：12025220
> 
> 赞同：0
> 
> 时间：2012-08-19T08:28:11.837
> 
> 标签：php, javascript, asp.net, ajax

我正在做一个简单的 Ajax 调用，该调用在 ASP.NET 中工作，但是当您在 onreadystatechange 函数中放置断点时，由于一些奇怪的 DOM 异常而失败。例如，当您在 Google Chrome 中查看 xmlhttp 变量时，ASP.NET 正在做的额外的标头魔术是什么，而 PHP 没有做到这一点，导致 PHP 的 responseText 为空白，只有 DOM 异常。

```
var xmlhttp;
if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
}
else {// code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        //Here is where you unwrap the data
        var arr = UnWrapVars(xmlhttp.responseText);
        if (callBackFunc) {
            callBackFunc(arr);
        }
    }
};
xmlhttp.open("POST", ajaxURL, true);
if (navigator.userAgent.toLowerCase().indexOf('msie') == -1) {
    xmlhttp.overrideMimeType("application/octet-stream");
}
xmlhttp.send("[FunctionName]" + functionName + "[/FunctionName][CanvasID]" + canvasid + "[/CanvasID][WindowID]" + windowid.toString() + "[/WindowID][Vars]" + getEncodedVariables() + "[/Vars]"); 
```

从 Ajax 页面传入的数据是这样的：[root][Vars][windows]

我是故意这样做的 [ 而不是 < 所以请不要指出这一点，它再次适用于 ASP.NET 页面，但不适用于 PHP 页面。返回的数据与我检查过的服务器端相同。那么，如果任何 ASP.NET 做到了 PHP 没有做到，那么缺少的标头魔法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:35:17.687

这是因为`$_POST`它实际上是访问通过表单发布的数据的简写。它需要适当的标题。将此行放在`xmlhttp.send()`：

```
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); 
```

这将强制 PHP 填充`$_POST`数组。

或者，您可以创建一个`Request`实例，作为`php://input`流的自定义包装器。那么您的 XHR 调用将不需要发送额外的标头。

# x86-64 - AMD 的 MP 规范，如何使用代码来启动与 AMD 相关的多处理器

> ID：12025221
> 
> 赞同：-2
> 
> 时间：2012-08-19T08:28:24.347
> 
> 标签：x86-64, bootstrapping, osdev, amd-processor, multiprocessor

我正在尝试编写一个支持多处理器的操作系统，但是我不知道如何为 AMD 引导多处理器，我已经搜索了 AMD 主页以找到 MP 规范，但没有找到，谁能告诉我链接地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:48:49.073

似乎没有特定于 AMD 的版本。我认为这是合理的，因为 AMD 的 x86 CPU 应该与 Intel x86 CPU 大部分兼容。

引用自[维基百科](http://en.wikipedia.org/wiki/MultiProcessor_Specification)：

> x86 架构的多处理器规范 (MPS) 是一个开放标准，描述了对操作系统和固件的增强，这将允许它们在多处理器配置中与 x86 兼容处理器一起工作。

使用来自英特尔的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:18:08.797

有两个标准允许您获取有关系统中逻辑处理器的信息。首先是英特尔多处理器规范 (MP)，其次是高级配置和电源接口 (ACPI)。

MP 较旧，现在已弃用。虽然它仍然可以在不存在 ACPI 表的旧机器上使用，但不应依赖于较新的机器。事实上，当 ACPI 表存在时，MP 表**不需要是健全的并且很可能包含垃圾**；这可能是您的代码在 32 位机器上工作的原因，而不是在 64 位机器上工作的原因。

在编写(S)MP代码时，首先要**检查**是否有ACPI表可用（查找RSDP，如果存在XSDT，则使用它，否则使用RSDT；接下来，查找MADT并解析表的LAPIC条目以查找LAPIC ID存在逻辑核心），并且**仅当它们不存在时才**回退到 MP。

* * *

所讨论的 CPU 是 AMD 还是 Intel 并不重要。它们*大多是*兼容的，除了少数极端情况下不兼容的指令实现或解释。不同 CPU 型号之间唯一可以改变的是 AP 启动顺序，但在这方面微架构之间的差异在 Intel 和 AMD 手册中有描述。

# jquery - jQuery检查实例数

> ID：12025222
> 
> 赞同：0
> 
> 时间：2012-08-19T08:28:34.367
> 
> 标签：jquery

所以我想这主要是因为我不知道如何用谷歌来表达它，但基本上我正在尝试构建一个菜单，为每个菜单项使用不同的悬停背景颜色。到目前为止我有这个：

```
$(function() {
    $('li').hover(function() {
        $(this).animate({backgroundColor:'#f00'},200);
    }, function() {
        $(this).animate({backgroundColor:'#eee'},200);
    });
}); 
```

我想根据选择的菜单项用不同的值替换“#f00”。我知道我可以使用 :eq 为每个项目编写不同的方法，但如果有更简洁的方法可以做到这一点，那将是首选。我在想一个颜色值数组，然后该函数将用数组 [实例数] 替换实例数。希望这是有道理的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T08:31:49.597

像这样的东西应该工作：

```
$(function() {
    var colors = ['#FFF', '#GGG', ...];

    $('li').hover(function() {
        $(this).animate({backgroundColor: colors[$(this).index()]}, 200);
    }, function() {
        $(this).animate({backgroundColor: '#eee'},200);
    });
}); 
```

`$(this).index()`返回当前元素相对于其父元素的索引。

* * *

一个稍微干净的方法是使用`data`属性：

**HTML**：

```
<li data-hover="#FFF">...</li>
<li data-hover="#GGG">...</li> 
```

**JS**：

```
$(function() {
    $('li').hover(function() {
        $(this).animate({backgroundColor: $(this).data('hover')}, 200);
    }, function() {
        $(this).animate({backgroundColor: '#eee'},200);
    });
}); 
```

# javascript - 点击播放声音

> ID：12025223
> 
> 赞同：4
> 
> 时间：2012-08-19T08:28:39.153
> 
> 标签：javascript, audio

我在几个地方问过这个问题，但还没有找到或收到答案。我是一个代码新手，所以任何帮助将不胜感激。

我在我的一些页面上使用页面内 javascript 来播放声音，点击图像，该图像循环背景音轨以练习音阶/主音吉他。

这是脚本：

```
<script language="javascript" type="text/javascript">
function playSound(soundfile) {
document.getElementById("dummy").innerHTML=
"<embed src=\""+soundfile+"\" hidden=\"true\" autostart=\"true\" loop=\"true\" />";
}
</script>
<span id="dummy"></span> 
```

这就是我为每个图像/mp3 调用它的方式：

```
<p><a title="Play file" href="#" onclick="playSound('mp3 url');"><img title="Play" src="play button url" alt="Play" width="48" height="48" /></a>  Blues in <strong>C</strong> : backing for lead melody. Chords: C,F, G</p> 
```

我的第一个问题 - 曲目没有循环播放 - 脚本有问题吗？

我的第二个问题 - 我如何扩展功能，以便在单击 png 播放文件时将其换成另一个 - 停止按钮 - 单击时停止循环。

非常感谢，扬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T08:36:56.490

欢迎来到堆栈溢出。

将声音嵌入到网页中是一项非常棘手的工作，而获得适用于所有浏览器和移动设备的解决方案是一项真正的挑战。

幸运的是，您可以使用一些库来使 mp3 的嵌入、播放、循环和切换变得更加容易。

我建议您先研究[Soundmanager2](http://www.schillmania.com/projects/soundmanager2/)，然后再深入了解这个项目，看看它是否可以为您节省大量编码时间、精力和挫败感！

# c# - 需要关闭网络请求流吗？

> ID：12025225
> 
> 赞同：5
> 
> 时间：2012-08-19T08:28:57.257
> 
> 标签：c#, stream, httpwebrequest

哪种方式更可取？

A：

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
Stream reqStream = req.GetRequestStream();
reqStream.Write(data, 0, data.Length);
reqStream.Close(); 
```

乙：

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
req.GetRequestStream().Write(data, 0, data.Length); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-19T08:30:57.507

选项 C 改为：

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
using (Stream reqStream = req.GetRequestStream())
{
    reqStream.Write(data, 0, data.Length);
} 
```

但是，是的，我*会*关闭请求流。它*可能*不是绝对必需的，但我不想假设 - 特别是，除非你有充分的理由相信它*不是*必需的（例如文档），否则实现可能会随着时间而改变并破坏“懒惰”代码之后。

如果你发现自己经常这样做，你总是可以编写一个实用方法（甚至可能作为扩展方法）：

```
public static void WriteRequestData(this WebRequest request, byte[] data)
{
    using (Stream reqStream = request.GetRequestStream())
    {
        reqStream.Write(data, 0, data.Length);
    }
} 
```

然后将其称为：

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
req.WriteRequestData(data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T21:41:36.157

我参加聚会有点晚了，但这个问题仍然很重要。我想补充一点： [MSDN 示例](http://msdn.microsoft.com/en-us/library/d4cek6cc%28v=vs.110%29.aspx)还演示/建议在写入完成时关闭流。

```
Stream newStream = myHttpWebRequest.GetRequestStream ();
newStream.Write (byte1, 0, byte1.Length);
Console.WriteLine ("The value of 'ContentLength' property after sending the data is {0}", myHttpWebRequest.ContentLength);
// Close the Stream object.
newStream.Close (); 
```

我喜欢@Jon 的例子并遵循类似的模式。

# android - 实现滑动图片条需要哪些Android组件？

> ID：12025227
> 
> 赞同：1
> 
> 时间：2012-08-19T08:29:14.570
> 
> 标签：android, android-widget, swipe

我正在尝试通过滑动来实现图片库。我想让当前图像占据整个屏幕，并在屏幕底部覆盖一排所有图像。通过滑动当前图像（转到下一个或上一个图像）或滑动小画廊并从中选择图像来进行导航。

我可以将哪些组件（可以容纳单行图像并且可滑动）用于图库？

# javascript - 比较表格中的单元格并将 CSS 类添加到其

> ID：12025228
> 
> 赞同：-1
> 
> 时间：2012-08-19T08:29:21.547
> 
> 标签：javascript, jquery, jquery-ui

我有一张有这么多行的表。它的结构就像这段代码

```
<table border="1" cellpadding="1" cellspacing="1" style="width: 500px">
   <tbody>
      <tr>
         <td>Name</td>
         <td>Criteria</td>
         <td>Grade</td>
      </tr>
      <tr>
         <td>Nick</td>
         <td>5</td>
         <td>5.75</td>
      </tr>
      <tr>
         <td>David</td>
         <td>3</td>
         <td>11.5</td>
      </tr>
   </tbody>
</table> 
```

![jQuery表](../Images/9283e8e95988e2a42480b7c9eefaff02.png)

我希望如果成绩大于标准，则将一个名为的 CSS 类`good`分配给`<tr>`其他类名`bad`（基于一个`<th>`将`<tr>` 有一个类名）。运行时结果会是这样（注意第 11 和 19 行）：

```
<table border="1" cellpadding="1" cellspacing="1" style="width: 500px">
   <tbody>
      <tr>
         <td>Name</td>
         <td>Criteria</td>
         <td>Grade</td>
      </tr>
      <tr class="good">
         <td>Nick</td>
         <td>5</td>
         <td>5.75</td>
      </tr>
      <tr class="bad">
         <td>David</td>
         <td>3</td>
         <td>2.5</td>
      </tr>
   </tbody>
</table> 
```

请注意，我的目的是用 CSS 突出显示好的坏结果行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T08:38:58.797

我建议：

```
$('tbody tr').each(
    function(){
        var that = $(this),
            criteria = parseInt(that.find('td:eq(1)').text(),10),
            grade = parseInt(that.find('td:eq(2)').text(),10),
            trClass = grade > criteria ? 'good' : 'notGood';
        that.addClass(trClass);
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/qtY5f/)。

请注意`tbody`选择器中的 ，为防止将其应用于第一行，我将该行移动到一个`thead`元素中，因为它*似乎*是表格的标题。

请注意，在上面，`each()`严格来说，这是不必要的，因为`addClass()`可以与函数一起使用：

```
$('tbody tr').addClass(function() {
    var that = $(this),
        criteria = parseInt(that.find('td:eq(1)').text(), 10),
        grade = parseInt(that.find('td:eq(2)').text(), 10);
        return grade > criteria ? 'good' : 'notGood';
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/qtY5f/1/)。

* * *

**编辑**以解决我使用过的事实`parseInt()`，而不是`parseFloat()`处理文本到数字的转换：

```
$('tbody tr').addClass(function() {
    var that = $(this),
        criteria = parseFloat(that.find('td:eq(1)').text()),
        grade = parseFloat(that.find('td:eq(2)').text());
        return grade > criteria ? 'good' : 'notGood';
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/qtY5f/2/)。

# haskell - 功能组合提示

> ID：12025230
> 
> 赞同：7
> 
> 时间：2012-08-19T08:29:37.507
> 
> 标签：haskell, monads, type-inference, function-composition, reader-monad

只是在寻找以下组合如何工作的解释：

```
(=<<) . return 
```

在哪里

```
(=<<) ::       (a -> m b) -> m a -> m b
return :: a -> m a
(.) :: (b -> c) -> (a -> b) -> a -> c 
```

最终类型：

```
GHCi> :t (=<<) . return
(=<<) . return :: Monad m => m b -> m a -> m b 
```

我无法理解如何将*ma*与*(a -> mb)*匹配，即。如何将简单类型的*返回结果应用于**(=<<)*期望函数类型的第一个参数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T09:10:25.007

解释是：

1.  你`return`是（也许出乎意料地）与你的不同的单子`=<<`。
2.  它使用的 monad 是 reader monad `(->) r`。

编译器尝试将 的结果`return :: c -> m' c`与 的第一个参数统一`(a -> m b) -> m a -> m b`，因此与[统一](https://en.wikipedia.org/wiki/Unification_(computer_science)) 。唯一的可能是一些读者单子。接下来，它尝试统一with (converted to the prefix notation) ，这通过设置to和to 来解决。所以，统一后，编译器得到最通用的可能类型`m' c``a -> m b``m'``(->) r``r``(->) r c``(->) a (m b)``r``a``c``m b`

```
return :: (m b) -> ((->) a (m b)) 
```

或以通常的中缀表示法

```
return :: (m b) -> (a -> m b) 
```

也可以看看：

*   [如何使用 (->) Monad 实例以及对 (->) 的混淆](https://stackoverflow.com/questions/5310203/how-to-use-instances-of-monad-and-confusion-about)
*   定义实例的源[。](http://hackage.haskell.org/packages/archive/base/4.5.1.0/doc/html/src/Control-Monad-Instances.html)`Monad ((->) r)`

* * *

**编辑：**要定义一个 monad，我们需要一个（部分应用的）[kind 类型](http://www.haskell.org/haskellwiki/Kind) `* -> *`。这些几乎总是部分应用的数据构造函数，但在这种特殊情况下，我们将`->`其视为一个类型运算符，它接受 2 个类型参数并创建一个新类型（函数类型）。所以对于任何给定的类型`r`，部分应用的表达式`(->) r`都是一种类型`* -> *`。事实证明，有一种直接的方法可以描述对它的 monad 操作。请参阅[Control.Reader](http://hackage.haskell.org/packages/archive/mtl/1.1.0.2/doc/html/Control-Monad-Reader.html) monad 以及 解释它的[这篇文章。](http://monads.haskell.cz/html/readermonad.html)for 的 monad 操作的`Reader`实现方式与 for 完全相同`(->)`，唯一的区别是`Reader`将操作包装成不同的数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:21:33.603

我又一次，用涂鸦，把东西并排放置以帮助视觉理解：

```
g = ((=<<) . return)   {-

((=<<) . return) x y 
         ===   (=<<)    (return x)    y               return :: a' -> m' a'
               (=<<) :: (a -> m b) -> m a -> m b      return x :: m' a' , x :: a'
                          m'  a'                      m' ~ ((->) a) , a' ~ m b 

return x === const x             -- instance Monad ((->) a) where return = const
g x y === y >>= (\_ -> x) === y >> x   (!!)
-}

g :: m b -> m a -> m b 
```

所以事实证明（并且可能从类型签名中很明显）**`g === flip (>>)`**，：

```
Prelude> ((=<<).return) [1] "xyz"   -- ===  (=<<) (const [1]) "xyz" 
                                    -- ===  "xyz" >>= const [1]
                                    -- ===  "xyz" >> [1]
                                    -- ===  (>> [1]) "xyz"
[1,1,1] 
```

# django - 带有 Grappelli 的 Django-CMS 弄乱了管理 cms 页面的布局

> ID：12025231
> 
> 赞同：0
> 
> 时间：2012-08-19T08:29:42.810
> 
> 标签：django, django-admin, django-cms, django-grappelli

我刚刚按照标准例程将 grappelli 安装到 Django-CMS 站点中 - `pip install django-grappelli`，将其添加到`INSTALLED_APPS`，添加 url 模式，`syncdb`然后`collectstatic`. 然而，尽管管理区域中的所有其他页面在新的“主题”下看起来都很棒，但 Django-CMS 中 CMS 页面设置的布局（拖放界面）都一团糟。

为什么会这样，还有解决办法吗？

谢谢。

编辑：谢谢，布兰登的回复。有没有办法完全卸载 grappelli 而不会造成任何问题？现在，在我从`INSTALLED_APPS`. 特别是，这些来自控制台：

```
Uncaught ReferenceError: grp is not defined actions.js:134
Uncaught ReferenceError: django is not defined admincompat.js:1
Uncaught ReferenceError: django is not defined collapse.js:24
Uncaught ReferenceError: django is not defined :8000/admin/cms/page/2/:942 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:24:09.200

这是我的解决方案 - 它涉及设置一个子域来为您的站点版本提供服务，其中删除了 grappelli 并从不同的目录提供静态媒体：[https ://stackoverflow.com/a/12900801/473285](https://stackoverflow.com/a/12900801/473285)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-08T11:55:13.410

Grappelli 还与普通的 Django 管理员冲突。另一个可行的解决方案是，如果您已经从其中删除了 Grappelli，`INSTALLED_APPS`也删除了它的 url 配置。

从 url 配置**中删除此行**。

```
path('grappelli/', include('grappelli.urls')) 
```

# javascript - 针对 IE 8 及以下版本？

> ID：12025232
> 
> 赞同：5
> 
> 时间：2012-08-19T08:29:47.643
> 
> 标签：javascript, internet-explorer, internet-explorer-8

我有一个在 IE 9+ 和所有其他浏览器中运行良好的脚本。但在 IE 8 或更低版本中存在视觉错误。我可以通过更改 IE 8 及更低版本的一些动画效果来修复此视觉错误。为此，我需要在我的页面上有两个脚本。一种适用于 IE 9+、Firefox、Chrome、Safari，另一种适用于 IE 8 及更低版本。

这是我尝试过的：

```
// First the Script that runs for non-IE browsers. 
<!--[if !IE]>
<script type="text/javascript">
// Script that runs
</script>
<![endif]-->

// Now for the Script for IE 8
<!--[if lt IE 9]>
<script type="text/javascript">
// Script that runs
</script>
<![endif]--> 
```

第一个问题和主要问题是在尝试这个时它似乎不起作用。IE 开始发疯，脚本根本无法正常运行。如果我删除第一个脚本并保留第二个脚本，则它可以正常工作。似乎`<!--[if !IE]><!-->`无法正常工作。

第二个问题：`<!--[if !IE]><!-->`我只能使用 IE 8 及以下版本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T08:37:15.290

尝试使用[HTML5 Boilerplate](http://html5boilerplate.com/)方式。然后只需在 JS 和 CSS 中按类定位 IE 版本。

用以下内容替换您的开始`<html>`标签。根据您的需要进行调整：

```
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]--> 
```

在 JavaScript 中：

```
var isIE8 = document.getElementsByClassName('lt-ie9').length;
var isIE7 = document.getElementsByClassName('lt-ie8').length;

if (isIE8) {
  ...
}

if (isIE7) {
  ...
} 
```

# jqgrid - 动态改变jqgrid的方向

> ID：12025234
> 
> 赞同：0
> 
> 时间：2012-08-19T08:29:53.180
> 
> 标签：jqgrid

我有一个网格，当默认方向是 ltr 时，我想在 2 个方向上动态显示。

我希望能够将网格方向更改为 rtl 并在单击按钮时重新加载其内容。

如何动态更改网格的方向？

**更新：**

我是`$('#grid').setGridParam({direction: rtl\ltr})`按照自己想要的方向使用的，网格的内容发生了变化，但是列和原来的一样。有没有办法改变列的方向？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T02:31:11.410

如果您有一个 id 为 button 的按钮和一个 jqGrid 的 id 为 grid ，那么：

```
$('#button').on('click', function () {
    if ($('#grid').getGridParam('direction') == 'ltr')
         $('#grid').setGridParam({direction: 'rtl'});
    else
         $('#grid').setGridParam({direction: 'ltr'});

    $('#grid').trigger('reloadGrid');
} 
```

您可以在此处阅读有关网格方法的信息（此处为 getGridParam 和 setGridParam [，](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions "这里")[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods "这里")为 jqGrid 的方向属性）

# ios - 读取复杂的套接字响应

> ID：12025235
> 
> 赞同：2
> 
> 时间：2012-08-19T08:30:00.387
> 
> 标签：ios, sockets, cocoaasyncsocket, gcdasyncsocket

我有一个代码设计问题，我想不出最有效的方式来处理这个问题：

基本上，我想发送一个 JSON 请求并一次性从服务器读取响应。

我有一个方法，例如：

```
-(BOOL)sendString:(NSString *)sendString;
//This should return a NSString and a BOOL
-(NSDictionary *)loginRequestWithEmail:(NSString *)userEmail andPassword:(NSString     *)userPassword;
//This should return a NSString and a BOOL
-(NSDictionary *)requestNewUserAccountWithDisplayName:(NSString *)displayName Email:    (NSString *)userEmail andPassword:(NSString *)userPassword; 
```

我会解释什么

```
-(BOOL)sendString:(NSString *)sendString; 
```

确实，基本上向服务器发送一个 JSON 字符串并获得它是否失败的响应。

我知道如何将它写入服务器并阅读它。问题在于一起执行此操作，因此我可以将该 BOOL 值返回为真或假，以查看它是否有效。

现在，在写入套接字后，我得到了响应，并且必须通过委托方法读取它：

```
-(void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag { 
```

一旦服务器给出响应，就会调用它。问题是，所有这些对套接字的读/写都是异步发生的。

既然发生了这种情况，我就没有办法做到这一点：

```
-(BOOL)sendString:(NSString *)sendString{

NSError *error;

NSLog(@"Sending String: %@",sendString);

NSDictionary *blobData = [NSDictionary dictionaryWithObjectsAndKeys:
                          sendString,@"string",
                          nil];
NSString *blobString = [[NSString alloc]
                        initWithData:[NSJSONSerialization dataWithJSONObject:blobData options:kNilOptions error:&error]
                        encoding:NSUTF8StringEncoding];
NSLog(@"Blob Created: %@", blobString);
NSDictionary *requestData = [NSDictionary dictionaryWithObjectsAndKeys:
                             @"send_string",@"request_type",
                             [NSNumber numberWithInt:0],@"security_level",
                             @"ios",@"device_type",
                             //No Email Provided, This is just for testing
                             blobString,@"blob",
                             nil];

NSData *JSONRequestData = NULL;
JSONRequestData = [NSJSONSerialization dataWithJSONObject:requestData options:kNilOptions error:&error];
        NSLog(@"Contents of JSONRequestData: %@",[[NSString alloc] initWithData:JSONRequestData encoding:NSUTF8StringEncoding]);
JSONRequestData = [[[[NSString alloc] initWithData:JSONRequestData encoding:NSUTF8StringEncoding] stringByAppendingString:@"\\n"] dataUsingEncoding:NSUTF8StringEncoding];
//Write the data
NSMutableData *JSONRequestDataWithLineEnding = [[NSMutableData alloc] initWithData:JSONRequestData];
[JSONRequestDataWithLineEnding appendData:[GCDAsyncSocket CRLFData]];
[asyncSocket writeData:JSONRequestDataWithLineEnding withTimeout:-1 tag:1];

//read a response
[asyncSocket readDataWithTimeout:-1 tag:2];

//This should be done in the didRead delegate
NSString *failure = [serverJSONResponseParsed objectForKey:@"failure"];
NSLog(@"Contents of string failure: %@", failure);

if ([failure isEqualToString:@"none"]) {
    NSLog(@"Success Sending String");
    return TRUE;
}
else {
    NSLog(@"Failure: %@",failure);
    return FALSE;
} 
```

}

由于之后调用的代码

```
[asyncSocket readDataWithTimeout:-1 tag:2]; 
```

在读取数据之前执行（因为它都是异步的）。

我意识到我必须在那个委托方法中做点什么。这很好，但是我收到了不同类型的响应，并且每个响应都必须以不同的方式处理。

我的想法是：标记每个写入命令，然后使用一些

```
if(this_tag) {do this} ....else if(that_tag) {do this} .... 
```

在 didReadData 委托方法中。

但是如何正确返回这些数据呢？有时我需要返回一个 BOOL，有时我需要返回一个 NSDictionary、NSString 等...

我希望能够让上面提到的每个请求方法返回它们的关联数据，但我不能（至少效率不高）。我必须为每个请求制作两种不同的方法吗？

IE

```
sendString
getSendStringResponse 
```

我有点困惑如何处理这个问题。

如果我不清楚，我很抱歉，

我很感激我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T03:05:45.157

我要做的是为这个特定的应用程序创建某种类型的协议。例如，假设您有以下数据类型（与 Obj-C 无关）dat1、dat2、dat3 等，此应用程序需要发送并以 res1、res2、res3 等形式返回适当的响应。您会来为发送部分和响应部分的每种数据类型添加一个签名。在发送每个数据之前，您需要在数据前面加上签名。在使用 readDataWithTimeout 的接收端，在 didReadData 回调方法中，提取接收数据的标头并根据您之前同意/设计的协议决定响应。在完成设计之前还有其他额外的步骤。例如，作为标题信息的一部分，它可能包含其他信息，例如数据长度等。

# file - CakePHP HTTPsocket POST 文件上传

> ID：12025245
> 
> 赞同：2
> 
> 时间：2012-08-19T08:31:25.957
> 
> 标签：file, http, cakephp, post, upload

我有一个 CakePHP 函数，它授权 HTTP 套接字，然后使用该套接字从远程服务器上传文件。该服务器上的某些文件一切正常，但其中一些文件没有完全传输。

我查看了 Wireshark 上发生的事情（尽管我了解的很少），我的服务器似乎正在发送 SSL 警报 21，我相信这意味着它无法解密接收到的数据。然后它开始向被忽略的远程服务器发送重置请求。

当我通过浏览器下载文件时，文件下载正常。我现在完全卡住了，还有什么我可以看的吗？

```
public function connect() {
  $httpSocket = new HttpSocket();
  $zipFile = fopen(TMP . 'cif_schedule.gz', 'w');

  $postData = array('j_username' => 'my_username', 'j_password' => 'my_password');
  $authResponse = $httpSocket->post('https://login_url', $postData, array('redirect' => true));

  $httpSocket->setContentResource($zipFile);
  $fileResponse = $httpSocket->get('file_url', array(), array('redirect' => true));

  fclose($zipFile);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T21:46:26.063

我认为您应该改用 PUT，因为 Post 仅用于传递数据。PUT 用于文件目的。

```
http://api.cakephp.org/2.3/class-HttpSocket.html#_put 
```

# android - Androids MediaPlayer 每进入第二次活动就播放一次视频

> ID：12025250
> 
> 赞同：4
> 
> 时间：2012-08-19T08:32:19.290
> 
> 标签：android, android-activity, android-mediaplayer, android-videoview

我正在编写其中一项活动能够播放视频文件的应用程序。我录制了视频，但是当尝试播放时开始出现问题。活动开始并第一次正常播放视频。然后我按后退按钮，返回上一个活动，选择视频（相同或其他），视频播放活动再次进入，所有视图（按钮，搜索栏等）显示，但视频不显示。我再次返回，选择视频，打开视频播放活动，视频再次正常播放。所以它每秒钟播放一次。我试图调试但找不到问题所在，任何帮助将不胜感激。活动代码在下面，eclipse 的 logCat 输出也在下面。

```
public class FightPlayerActivity extends Activity implements OnSeekBarChangeListener, SurfaceHolder.Callback, OnPreparedListener {

    private MediaPlayer mp=null;
    private SeekBar seekBar;

    private String filePath;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        Toast.makeText(this,"Create ", 2000).show();

        setContentView(R.layout.fight_player);

        filePath=getIntent().getStringExtra("filename");
        filePath=Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM)+"/FightAll_BJJ_Scoring/"+filePath;

        Toast.makeText(this,filePath, 2000).show();
        // seek bar

        seekBar=(SeekBar) findViewById(R.id.seek_bar);
        seekBar.setOnSeekBarChangeListener(this);
        try {
            SurfaceView sv=(SurfaceView) findViewById(id.video_preview);

            SurfaceHolder sh=sv.getHolder();
            sh.addCallback(this);

            sh.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }      
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub

    }

    public void onStop(View view)
    {
        super.onStop();

        mp.stop();
        mp.reset();
        mp.release();
    }

    public void onStart(View view)
    {
        super.onStart();

    }

    public void stop(View view)
    {
        mp.stop();
    }

    public void pause(View view)
    {
        mp.pause();
    }

    public void play(View view)
    {
        mp.start();
    }

    public void surfaceCreated(SurfaceHolder holder) {

        try {
            mp=new MediaPlayer();
            mp.setDataSource(filePath);
            mp.setDisplay(holder);  
            mp.setOnPreparedListener(this);
            mp.setAudioStreamType(AudioManager.STREAM_MUSIC);
            mp.prepare();

        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub

    }

    public void onPrepared(MediaPlayer mediaplayer) {
         mp.start(); 
         seekBar.setMax(mp.getDuration());
    }

    public void onProgressChanged(SeekBar sb,int progress,boolean fromUser)
    {
        //Toast.makeText(this, progress, 2000).show();
        mp.seekTo(progress);
    }

    public void onStartTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub
        onProgressChanged(seekBar,seekBar.getProgress(),true);
    }

    public void onStopTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

 } 
```

并在下面登录：

```
08-19 18:26:39.325: E/MediaPlayer(7057): message received msg=200, ext1=1, ext2=44
08-19 18:26:39.325: W/MediaPlayer(7057): info/warning (1, 44)
08-19 18:26:39.325: E/MediaPlayer(7057): callback application
08-19 18:26:39.325: E/MediaPlayer(7057): back from callback
08-19 18:26:39.325: E/MediaPlayer(7057): message received msg=1, ext1=0, ext2=0
08-19 18:26:39.325: E/MediaPlayer(7057): callback application
08-19 18:26:39.325: E/MediaPlayer(7057): back from callback
08-19 18:26:39.361: E/MediaPlayer(7057): message received msg=5, ext1=176, ext2=144
08-19 18:26:39.361: E/MediaPlayer(7057): callback application
08-19 18:26:39.365: E/MediaPlayer(7057): back from callback
08-19 18:26:39.380: I/MediaPlayer(7057): Info (1,44)
08-19 18:26:45.661: E/MediaPlayer(7057): message received msg=200, ext1=1, ext2=44
08-19 18:26:45.661: W/MediaPlayer(7057): info/warning (1, 44)
08-19 18:26:45.661: E/MediaPlayer(7057): callback application
08-19 18:26:45.661: E/MediaPlayer(7057): back from callback
08-19 18:26:45.661: E/MediaPlayer(7057): message received msg=1, ext1=0, ext2=0
08-19 18:26:45.661: E/MediaPlayer(7057): callback application
08-19 18:26:45.661: E/MediaPlayer(7057): back from callback
08-19 18:26:45.708: I/MediaPlayer(7057): Info (1,44)
08-19 18:26:45.779: W/IMediaDeathNotifier(7057): media server died
08-19 18:26:45.779: E/MediaPlayer(7057): message received msg=100, ext1=100, ext2=0
08-19 18:26:45.779: E/MediaPlayer(7057): error (100, 0)
08-19 18:26:45.779: E/MediaPlayer(7057): callback application
08-19 18:26:45.779: E/MediaPlayer(7057): back from callback
08-19 18:26:45.779: E/MediaPlayer(7057): message received msg=100, ext1=100, ext2=0
08-19 18:26:45.779: E/MediaPlayer(7057): error (100, 0)
08-19 18:26:45.779: E/MediaPlayer(7057): callback application
08-19 18:26:45.779: E/MediaPlayer(7057): back from callback
08-19 18:26:45.779: W/Camera(7057): Camera server died!
08-19 18:26:45.786: E/MediaPlayer(7057): Error (100,0)
08-19 18:26:45.790: E/MediaPlayer(7057): Error (100,0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T09:08:40.503

已解决.. 必须将初始化代码从 onCreate() 移动到 onStart() 并从 onStart() 中删除“查看视图”。

# asp.net - Visual Studio 和 Knockout.js - 捆绑、缩小和约定

> ID：12025251
> 
> 赞同：5
> 
> 时间：2012-08-19T08:32:27.930
> 
> 标签：asp.net, visual-studio, asp.net-mvc-4, asp.net-optimization

我正在使用 ASP.NET MVC4 和 Visual Studio 的捆绑和缩小。

公约说：

*   当“FileX.min.js”和“FileX.js”存在时选择“.min”文件发布。
*   选择非“.min”版本进行调试。
*   忽略仅由 IntelliSense 使用的“-vsdoc”文件（例如 jquery-1.6.2-vsdoc.js）。

问题是 debug.js 扩展也被完全忽略了，当我通过 NuGet 使用淘汰和淘汰映射时，这些扩展附带了这些扩展。所以即使在调试模式下我总是得到缩小版本？

我可以将文件从 .debug.js 重命名为 .min.js 以在调试模式下获得非缩小版本，但这不会通过 nuget 破坏更新功能吗？

.debug.js 文件有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T17:19:18.627

以下是从 RTM 1.0 开始的完整当前忽略列表默认约定：

```
 ignoreList.Ignore("*.intellisense.js");
        ignoreList.Ignore("*-vsdoc.js");
        ignoreList.Ignore("*.debug.js", OptimizationMode.WhenEnabled);
        ignoreList.Ignore("*.min.js", OptimizationMode.WhenDisabled);
        ignoreList.Ignore("*.min.css", OptimizationMode.WhenDisabled); 
```

所以当 debug=false 时 debug.js 将被忽略。重命名或清除忽略列表是两种简单的解决方法。

# html - 为什么访问链接后没有显示正确的精灵？

> ID：12025260
> 
> 赞同：1
> 
> 时间：2012-08-19T08:34:09.050
> 
> 标签：html, css, css-sprites

**细节**

我正在尝试使用精灵图像作为链接。链接，悬停和活动工作，但访问没有。访问链接后，它会返回到原始精灵。我使用的 CSS 和 HTML 如下所示。

**HTML**

```
<a href="#1" class="sprite favourite"> </a>    
<a name="1">link1</a> 
```

**CSS**

```
 .sprite
    {
        width:15px;
        height:15px;
        text-decoration:none;
        display:block;
        background-image:url(everything-spritev2.png);
    }

.favourite:link{background-position:-32px 0;}
.favourite:hover{background-position:-48px 0;}
.favourite:visited {background-position:-64px 0;}  /* visited link */
.favourite:active {background-position:-64px 0;} 
```

**问题**

为什么点击链接后 .favourite:visited 的精灵不工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T08:56:35.997

我认为它正在减轻[CSS 历史攻击](http://www.alanayoub.com/css-history-hack/)。

[通过 CSS 防止对用户历史的攻击](http://dbaron.org/mozilla/visited-privacy)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:52:24.967

不幸的是，`:visited`由于隐私原因，使用背景图像的样式在 Firefox 中已被禁用。本页[的注释](https://developer.mozilla.org/en-US/docs/CSS/%3avisited#Summary)描述了原因，[本页](https://developer.mozilla.org/en-US/docs/CSS/Privacy_and_the_%3avisited_selector)描述了详细信息。其他浏览器可能尚未禁用其`:visited`样式，但可能会在未来的版本中。

可能的解决方法是使用脚本来跟踪单击的链接和本地存储中的时间。

# android - Android自定义ListView重复选择背景

> ID：12025265
> 
> 赞同：5
> 
> 时间：2012-08-19T08:35:04.027
> 
> 标签：android, listview, selection

我有一个自定义适配器：

```
public class PhraseCustomAdapter extends BaseAdapter  
{  
public String original[];  
public String translation[];  
public String transcription[];  

public Activity context;  
public LayoutInflater inflater;  

public PhraseCustomAdapter(Activity context,String[] original, String[] translation, String[] transcription) {  
    super();  

    this.context = context;  
    this.original = original;  
    this.translation = translation;  
    this.transcription = transcription;  

    inflater = LayoutInflater.from(context);
    this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  
}  

@Override  
public int getCount() {  
    // TODO Auto-generated method stub  
    return original.length;  
}  

@Override  
public Object getItem(int position) {  
    // TODO Auto-generated method stub  
     return position;
}  

public String getItemTranlation(int position) {  

    return translation[position];  
}  

public String getItemTranscription(int position) {  
    // TODO Auto-generated method stub  
    return transcription[position];  
}  

public String getItemOriginal(int position) {  
    // TODO Auto-generated method stub  
    return original[position];  
} 

@Override  
public long getItemId(int position) {  
    // TODO Auto-generated method stub  
    return position;  
}  

static class ViewHolder  
{  
    ImageView imgViewLogo;  
    TextView txtViewOriginal;  
    TextView txtViewTranslation;  
    TextView txtViewTranscription; 
}  

@Override  
public View getView(int position, View convertView, ViewGroup parent) {  

    ViewHolder holder;  
    if (convertView == null) {  
        holder = new ViewHolder();  
        convertView = inflater.inflate(R.layout.phrase_row, null);  

        holder.imgViewLogo = (ImageView) convertView.findViewById(R.id.imgViewLogo);  
        holder.txtViewOriginal = (TextView) convertView.findViewById(R.id.txtViewOriginal);  
        holder.txtViewTranslation = (TextView) convertView.findViewById(R.id.txtViewTranslation);  
        holder.txtViewTranscription = (TextView) convertView.findViewById(R.id.txtViewTranscription);   

        convertView.setTag(holder);  
    }  
    else  
        holder=(ViewHolder)convertView.getTag();  

    holder.txtViewOriginal.setText(original[position]);  
    holder.txtViewTranslation.setText(translation[position]);  
    holder.txtViewTranscription.setText(transcription[position]);

    return convertView;  
} 
```

}

而且我需要实现android4风格的多选（长按，然后点击选择项目）。所以：

```
 lview1 = (ListView) findViewById(R.id.listViewPhrase);  
    adapter = new PhraseCustomAdapter(this, original, translation, transcription);  
    lview1.setAdapter(adapter);  
    lview1.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
    lview1.setMultiChoiceModeListener(new MultiChoiceModeListener() {

        @Override
        public void onItemCheckedStateChanged(ActionMode mode, int position,
                                              long id, boolean checked) {
            View view;
            if (checked){
                Log.v ("checked?", "YES");
                Log.v ("Position", Integer.toString(position));

                view = lview1.getChildAt(position);
                view.setBackgroundColor(Color.LTGRAY);

                original_list.add (adapter.getItemOriginal(position));
                translation_list.add (adapter.getItemTranlation(position));
                transcription_list.add (adapter.getItemTranscription(position));

                countSelected += 1;
            }
            if (!checked){
                Log.v ("checked?", "NO");
                Log.v ("Position", Integer.toString(position));

                for (int i = 0; i < original_list.size(); i++)
                {
                    if (original_list.get(i) == adapter.getItemOriginal(position)){
                        original_list.remove (i);
                        translation_list.remove (i);
                        transcription_list.remove (i);  
                    }
                }
                countSelected -= 1;
            }

            mode.setTitle(Integer.toString(countSelected) + " " + getString(R.string.selectItem));
        } 
```

问题是：当我长按项目（例如，第一项）时，第 7 项也突出显示（通过更改背景）。当我尝试“取消突出显示”突出显示的第 7 项时，应用程序崩溃。如果我尝试单击最新项目，应用程序会崩溃。我已经阅读了一些关于如何渲染视图和回收项目的文章，但我不知道我的问题有任何可能的解决方案

UPD：“取消突出显示”第 7 项时的 LogCat 输出：

```
 V/checked?(24966): YES
V/Position(24966): 7
Shutting down VM
threadid=1: thread exiting with uncaught exception (group=0x2b542210)
AndroidRuntime(24966): FATAL EXCEPTION: main
java.lang.NullPointerException
at com.alextee.phrases.PhraseActivity$1.onItemCheckedStateChanged(PhraseActivity.java:145)
at android.widget.AbsListView$MultiChoiceModeWrapper.onItemCheckedStateChanged(AbsListView.java:5688)
at android.widget.AbsListView.performItemClick(AbsListView.java:1040)
at android.widget.AbsListView$PerformClick.run(AbsListView.java:2522)
at android.widget.AbsListView$1.run(AbsListView.java:3183)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
 android.app.ActivityThread.main(ActivityThread.java:4441)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-19T13:28:44.750

列表视图本身很复杂，它的回收也很复杂。如果您观看列表视图的 android 开发人员视频，您将了解更多有关列表视图回收及其问题的信息。
您的应用程序中的问题是由于列表视图回收。
当您在单击或长按时更改列表项的背景时，它的背景会发生变化，并且当该项目滚动出设备的可见区域时，该项目所附的视图将被回收，并将其分配给其他一些列表项当前可见。所以现在该项目也将突出显示。
这张图描述了列表视图回收：

![在此处输入图像描述](../Images/c8c919f13cfe5a8ce437987cd1c69b95.png)

要突出显示列表视图中的项目，您应该执行以下操作：

*   在列表视图上设置 onItemClickListener。
*   在 onItemClick() 方法中更改视图的背景并将当前突出显示的位置保存在列表视图中，并在列表适配器上调用 notifyDataSetChanged()。调用 notifyDataSetChanged() 很重要，因为它会重绘当前可见项。

列表 onItemClick 的代码应该是这样的：

```
grid[pos].setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick (AdapterView<?> parent,
                    View v, int position, long Id)
            {
                    highlighted = position;    //highlighted is a global variable
                    //container is the root view of the list row layout
                    LinearLayout container = (LinearLayout)v.findViewById(R.id.container);
                    container.setBackgroundResource(R.drawable.highlighted_backg);
                    mListAdapter.notifyDataSetChanged();

            }
   }); 
```

getView() 方法应该这样实现：

```
public View getView (int position, View convertView, ViewGroup parent)
{
    ViewHolder holder;

    if(convertView == null) {
        convertView = inflater.inflate(R.layout.row_item, null);
        holder = new ViewHolder();
        holder.itemName1 = (TextView)convertView.findViewById(R.id.text1);
        ...
        holder.container = (LineaLayout)convertView.findViewById(R.id.container);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    if(MainActivity.highlighted == position) {
        holder.container.setBackgroundResource(R.drawable.highlighted_backg);
    }else {
        holder.foodItemCol1.setBackgroundResource(R.drawable.normal_back);
    }

    return convertView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T13:25:25.777

`getView()`根据项目的选中状态设置项目的背景颜色。我不知道您是否可以直接从 ListView 中获取此信息，否则您可以保留例如 a`Set`并将当前选中的位置保留在那里。然后`getView()`查找传递的位置是否在此集合中，这意味着它已被检查并相应地设置背景。如果不是，请将背景设置为未选中的颜色。后一个很重要，因为您可能已经获得了一个背景设置为“已检查”颜色的回收视图。

[可以在此处](https://stackoverflow.com/questions/4831918/how-to-get-all-checked-items-from-a-listview)找到跟踪检查项目的示例。

# emacs - 方案发送区域 emacs

> ID：12025266
> 
> 赞同：4
> 
> 时间：2012-08-19T08:35:10.487
> 
> 标签：emacs, scheme, mit-scheme

我在 emacs 中打开一个 .scm 文件，并尝试使用 ++ 命令在 mit-scheme 劣质缓冲区中对其进行评估，`Ctrl`但是没有任何`x` `Ctrl`反应。`r`我按照页面中“Emacs 中的启动方案”部分中的说明操作，使用“ [http://community.schemewiki.org/?emacs-tutorial](http://community.schemewiki.org/?emacs-tutorial) ” 。

因此，当尝试直接在运行 mit-scheme 的缓冲区中评估某些内容时，我会看到相同的行为：当我按下回车键时，什么都不会被评估。但是当我直接在命令行中使用解释器时效果很好。

我的 .emacs 文件如下所示：

```
;;; Always do syntax highlighting
(global-font-lock-mode 1)

;;; Also highlight parens
(setq show-paren-delay 0
      show-paren-style 'parenthesis)
(show-paren-mode 1)

;;; This is the binary name of my scheme implementation
(setq scheme-program-name "mit-scheme") 
```

我有 XUbuntu 12.04、emacs23 和 mit-scheme 9.1.1。

¿ 对这个问题有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T03:02:24.740

但是`Ctrl`++以`x` `Ctrl`只读`r`模式打开文件。不要向 GNU/MIT 方案解释​​器发送任何缓冲区。您需要使用`M`+`o`而不是。它将当前缓冲区发送到 GNU/MIT 方案解释​​器或`M`+`z`将当前表达式发送到 evulation。

我做了什么让我的 GNU/MIT 方案正常工作：

下载[`xscheme.el`](http://ftp.gnu.org/gnu/mit-scheme/utilities.pkg/xscheme.el)文件；

将此文件`emacs_location/emacs/version/lisp`复制到我的 OpenSUSE 上的目录（注意：它必须替换旧文件），目录是 ``/usr/share/emacs/23.3/lisp`。

放入：`(load-library "xscheme")`放入我的`.emacs`文件中；

完毕！它已安装.. 访问新文件`.ss`或`.scm`文件，键入：`M`+ `x`，然后：`run-scheme`。如果已安装，您可以看到新的缓冲区正在运行`MIT-scheme`解释器。

运行你好世界：

返回文件缓冲区并写入：

```
(display "Hello,world!") 
```

然后`M`+ `o`：

你会看到这样的东西（对不起，最大的图片，我不能在这里剪切/调整大小）：

![在此处输入图像描述](../Images/e127f1ca17d5b9bf965df11d38a6c95c.png)

# jqgrid - 在 jqgrid 标头中设置图像

> ID：12025267
> 
> 赞同：2
> 
> 时间：2012-08-19T08:35:14.410
> 
> 标签：jqgrid

任何人都知道是否可以在 jqgrid 的列标题之一中设置图像？

我尝试了以下方法：

```
$("#jqgh_Jqgrid_1_t_TEST").prepend("<img src='...' alt='test' />"); 
```

我认为这可能有效，但是什么时候应该调用该函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T16:02:30.443

正如 Piyush 提到的，这可以使用该`setLabel`方法来完成。从[方法文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)：

> **设置标签**
> 
> 列名、数据、类、属性
> 
> 在指定列的标题中设置新标签；还可以设置属性和类。参数是：
> 
> *   colname 列名（该参数可以是从0开始的数字（列的索引）
> *   data 可以放入标签的内容。如果为空字符串，则内容不会改变
> *   类 如果类是字符串，那么我们使用 addClass 向标签添加一个类；如果类是一个数组，我们通过 css 设置新的 css 属性
> *   properties 设置标签的属性properties

下面是一个示例，说明如何使用它`setLabel`来显示图像：

```
jQuery(myGrid).jqGrid('setLabel', 
  'myColName', 
  '<img src=images/my-image.png width=16 height=16>'); 
```

您可能希望将高度设置为 16 像素左右，使其与网格文本具有相同的高度，如本例所示，但这完全取决于您。

# squid - Squid 用户外部 AUTH 加白名单

> ID：12025273
> 
> 赞同：2
> 
> 时间：2012-08-19T08:36:50.510
> 
> 标签：squid

不确定我是否在搜索正确的术语，还没有找到解决这个组合问题的方法。

我有一个正在工作的外部身份验证（tp。但是一旦通过身份验证，我想限制为一个小白名单（以配置 www.cnn.com 为例）。

我确定这是一个排序/优先级类型的问题，但我一生都无法弄清楚。

以下 squid.conf 适用于外部身份验证，但允许一切通过（当然）。似乎无法获得白名单以“连接/关联”到 foo，例如经过身份验证的项目

```
# acl whitelist dstdomain .cnn.com
# http_access allow whitelist
auth_param basic children 5
auth_param basic realm Squid Enter your ID into Username & Password

auth_param basic program /usr/local/bin/tp_squidauth.bash

# this works but it allows anything through once authorised
# what we want is to only restrict to the whitelist
acl foo proxy_auth REQUIRED

# how do i connect whitelist & foo together?
http_access allow foo

acl all src 0.0.0.0/0.0.0.0
acl localhost src 127.0.0.1/255.255.255.255
http_access allow localhost
http_access deny all
http_reply_access allow all
icp_access allow all
coredump_dir /var/spool/squid 
```

希望这对某人来说是显而易见的！？

非常感谢本

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-15T16:43:13.543

您可以使用所需的白名单页面创建文件：

/etc/squid/allowed.txt：

> 内容：

.google.com

.yahoo.com

.dropbox.com

然后创建 ACL

> acl allowed_pa​​ges dstdomain "/etc/squid/allowed.txt"

然后你允许http访问并拒绝其余的

> http_access 允许 allowed_pa​​ges
> 
> http_access 全部拒绝

# android - 如何使用 adb 命令获取终端输出？

> ID：12025276
> 
> 赞同：6
> 
> 时间：2012-08-19T08:37:09.217
> 
> 标签：android, adb

我想获取手机的 cpu 使用率，然后在 PC 上绘图。

我想这样做：

首先，在手机中运行一个后台进程，计算 CPU 使用率并显示在终端中。

其次，使用 adb commnad 获取终端输出。

最后，用数据绘制曲线。

我很困惑它是否可以正常工作而没有很大的延迟。一开始，我想把cpu使用情况放到一个文件中，然后使用'adb pull'命令来拉取文件，然后读取文件并进行绘制。我认为这可能会导致很大的延迟。

有人可以帮助我吗？

谢谢。詹姆士。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T08:48:10.397

我不完全确定这是否是您想要实现的目标，但您可以使用：

1.  `adb shell`访问设备的 shell 提示符并从那里运行命令。请参阅：http: [//developer.android.com/tools/help/adb.html#shellcommands](http://developer.android.com/tools/help/adb.html#shellcommands)

2.  `adb logcat`从设备获取实时日志流。您可以使用过滤器等将输出调整为您需要的。请参阅：http: [//developer.android.com/tools/help/adb.html#logcat](http://developer.android.com/tools/help/adb.html#logcat)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T09:13:12.667

1.  将 Android 应用程序写入文件，例如：`cpu_usage.txt`

2.  使用 LogCat 获取输出：`adb shell cat /path_to_your_file/cpu_usage.txt`

解析命令行的输出，然后将其绘制在图表上。高延迟？没有。

编辑：好的，如果您获得`root`许可，请按照您的意愿执行命令，例如，

```
C:\>adb shell top -m -d 1 -n 1 > C:\top_result.txt 
```

在以下位置查看结果：`C:\top_result.txt`。另外，当我阅读您的消息时，您会说`socket`，如果我是您，我将永远不会使用它，因为它总是会导致高延迟。

# r - 将两个动物园对象与为具有相同名称的列汇总的数据合并

> ID：12025281
> 
> 赞同：1
> 
> 时间：2012-08-19T08:37:41.103
> 
> 标签：r, zoo

我想合并两个动物园对象，如果列名相同，则汇总数据。例如，

```
ZooObject1
Date A B C
1/1/2012 2 4 8
1/2/2012 1 3 9
1/3/2012 3 6 4

ZooObject2
Date D B E
1/1/2012 3 4 9
1/2/2012 2 7 2
1/3/2012 1 8 8

MergedObject
Date A B C D E
1/1/2012 2 8 8 3 9
1/2/2012 1 10 9 2 2
1/3/2012 3 14 4 1 8 
```

在这种情况下，由于`ZooObject1`和`ZooObject2`都有名为“B”的列，因此合并的动物园对象中 B 列的数字将是“B”中的数字和“B”中的数字之`ZooObject1`和`ZooObject2`

任何简单的代码都可以实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T13:22:33.100

计算每个输入的通用名称和唯一名称，然后将它们放在一起修复任何损坏的名称：

```
both <- intersect(names(z1), names(z2))
only1 <- setdiff(names(z1), both)
only2 <- setdiff(names(z2), both)

setNames(cbind(z1[, only1], z2[, only2], z1[, both] + z2[, both]),
    c(only1, only2, both)) 
```

这至少适用于样本输入。如果您的实际问题在某些重要方面有所不同，则可能需要也可能不需要进行一些更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T09:31:17.403

它并不漂亮，但这将完成这项工作：

```
library(reshape2)
z <- merge(ZooObject1, ZooObject2)
z <- melt(cbind(data.frame(t=time(z)), as.data.frame(z)), id.vars="t")
z$variable <- gsub("\\..*$", "", z$variable)
z <- dcast(z, t ~ variable, fun.aggregate=sum)
z <- zoo(z[,-1], z[,1]) 
```

对于`zoo`对象，时间索引必须是唯一的，所以这种方法将动物园对象转换回数据帧，以时间索引为列，聚合然后将结果转换回`zoo`对象。这不是防弹的：如果你的`zoo`对象中的字段名称`.`在他们的名字中，它会破坏！

# c# - 实体框架未加载相关对象

> ID：12025286
> 
> 赞同：6
> 
> 时间：2012-08-19T08:39:07.220
> 
> 标签：c#, entity-framework

我是实体框架的新手，但可能会误解某些东西，或者做错了什么。

我的代码，让我得到一个特定人的任务列表：

```
 public List<TaskObject> GetAssignedTasks(int personId)
        {
            var items = (from s in _te.tasks where s.person.person_id == personId select s).ToList();
            var tasks = new List<TaskObject>();
            foreach (var t in items)
            {

                TaskObject tk = Transformer.UnpackTask(t);

                tasks.Add(tk);
            }
            return tasks;
        } 
```

我的问题是，它似乎得到了一个记录列表，但没有加载相关项目。我的“Transformer.UnpackTask”方法采用我加载的任务实体，然后将其转换为不同的对象，该对象通过业务/服务层上升到 UI。

但是，一旦我的 Unpacker 函数尝试引用一个相关对象的项目（例如，一个任务有一个“AssignedPerson”，它有一个带有人员详细信息的 Person 实体。但是我的实体的 AssignedPerson 属性为 NULL。我想它将加载相关项目。

我是不是误会了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T08:44:34.963

您应该使用 Include() 方法显式包含引用。它有两个重载：一个将属性作为 lambda 表达式，另一个将路径作为字符串加载（当您需要加载集合中可用对象的引用时很有用）。

[MSDN 参考](http://msdn.microsoft.com/en-us/library/bb896272.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:17:15.600

试试这个。我们在这里尝试做的是在选择查询本身中包含相关实体，延迟加载。因此，当您解压任务时，您也应该能够获得相关实体。

检查事项：

*   任务实体应该具有对人员实体的浏览能力，否则这将失败。
*   在服务层元数据文件中任务的元数据内的人员实体顶部添加 [Include] 关键字。

-- 例如，您创建的服务的元数据文件。

```
tasks metadata
 {
 ... 
 ... 

  \\these two should already be there you will just have to add the Include and
  \\ Key attribute.

    [Include]
    public EntityCollection<Person> Person {get; set;}
    [Key]  \\ that connects the task and person entity (FK/PK)
    public int PersonID {get;set;}
} 
```

服务文件

```
public List<TaskObject> GetAssignedTasks(int personId)
    {
        var items = (from s in _te.tasks.Include("Person") where s.person.person_id == personId select s).ToList();
        var tasks = new List<TaskObject>();
        foreach (var t in items)
        {

            TaskObject tk = Transformer.UnpackTask(t);

            tasks.Add(tk);
        }
        return tasks;
    } 
```

希望能帮助到你。干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-19T09:18:44.587

你正在寻找的是`.Include`你这样使用它

```
var recordWithParentAttached = db.Tasks.Include(o => o.Person).Single(o => o.person_id == personId); 
```

与`.Include`您的父母（或相关记录）将被附加并传递，而没有他们将是`nulls`。

# android - 需要stariosdk getport失败建议

> ID：12025294
> 
> 赞同：1
> 
> 时间：2012-08-19T08:42:19.407
> 
> 标签：android, plugins, printing, bluetooth, stario-sdk

我在 phonegap（html5、JQuery、JS）中开发了一个应用程序，我想开发一个插件来打印到 BT 打印机。

我下载了打印机制造商的 SDK，并使用我在项目中需要的所有方法将适当的 .jar 文件导入到我的项目中。

我按照互联网教程创建了一个插件，以便从 JS 调用打印机制造商 SDK 的 JAVA 方法。

当我运行我的测试应用程序时，我总是收到“无法连接到打印机”。

我的java代码如下

```
public PluginResult execute(String action, JSONArray data, String callbackId) {

    if (NATIVE_ACTION_STRING.equals(action)) {

        this.ctx.runOnUiThread(new Runnable()
        {
            public void run()
            {
                String resultType = null;
                StarIOPort port = null;
                String message = null;
                String portName = "bt:";
                String portSettings = "mini";
                byte[] texttoprint = new byte[]{0x1b,0x74,0x0D,(byte) 0x91,(byte) 0x92,(byte) 0x93,(byte) 0x94,(byte) 0x95,(byte) 0x96,(byte) 0x97,(byte) 0x98,(byte) 0x99,0x0A,0x0A,0x0A,0x0A,0x0A};

                try 
                {
                    port = StarIOPort.getPort(portName, portSettings, 10000, (Context)ctx);

                    try
                    {
                        Thread.sleep(500);
                    }
                    catch(InterruptedException e) {}

                    port.writePort(texttoprint, 0, texttoprint.length);

                    try
                    {
                        Thread.sleep(3000);
                    }
                    catch(InterruptedException e) {}    

                }
                catch (StarIOPortException e)
                {

                    Builder dialog = new AlertDialog.Builder((Context)ctx);
                    dialog.setNegativeButton("Ok", null);
                    AlertDialog alert = dialog.create();
                    alert.setTitle("Failure");
                    alert.setMessage("Failed to connect to printer");
                    alert.show();
                }
                finally
                {
                    if(port != null)
                    {
                        try 
                        {
                            StarIOPort.releasePort(port);
                        } catch (StarIOPortException e) {}
                    }
                }
            }
        });

    }
     return null;
}} 
```

如果有人对 StarMicronics SDK 有任何了解，请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:47:17.940

添加

```
 <uses-permission android:name="android.permission.INTERNET"></uses-permission>
    <uses-permission android:name="android.permission.BLUETOOTH"></uses-permission> 
```

在你的清单中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T07:43:25.887

请务必将便携式打印机上的蓝牙模式设置为与您使用的操作系统相同：蓝牙模式->Android、蓝牙(IAP)->I-phone

# c# - DotNetOpenAuth 响应对象和属性已设置，但会引发 NullException

> ID：12025297
> 
> 赞同：0
> 
> 时间：2012-08-19T08:42:38.540
> 
> 标签：c#, asp.net, asp.net-mvc, openid, dotnetopenauth

所以！我的头刚刚爆炸，因为这对我来说似乎很奇怪。使用调试模式，我可以看到 Claimsresponse 进入方法，它被填充，Email 属性也是如此。但是当我尝试一个简单的字符串 myStr = response.Email; 它抛出一个 NullException 错误......

我不明白。。

代码：（设置电子邮件失败！）

```
public static bool LoginUserUsingOpenID(BaseDBContext db, ClaimsResponse r)
            {
                string email = r.Email;
                bool doesntExist = !UserHelper.DoesUserExist(db, r.Email);

                User u = null;

                if (doesntExist)
                {
                    u.Email = email;
                    u.Username = "User" + new Random().Next(100000);
                    u.Password = CreateRandomPassword(7);
                    u.prepareForCreationFromThirdParty();
                }
                else
                {
                    u = db.Users.Where(x => x.Email == r.Email).FirstOrDefault();
                }
                SetUserAsAuthenticated(u);
                AddAutomaticLoginKeyForUser(db, u); //Need to get this to the users frontend somehow..
                return true;
            } 
```

这是堆栈跟踪：

```
System.NullReferenceException: Object reference not set to an instance of an object.
   at MusingMonkey.Helpers.SecurityHelper.LoginUserUsingOpenID(BaseDBContext db, ClaimsResponse r) in C:\Users\William-Business\Desktop\TWB\TWB Central\Projects\MusingMonkey\MusingMonkey\Helpers\SecurityHelper.cs:line 170
   at MusingMonkey.Controllers.UsersController.HandleOpenIDResponse() in C:\Users\William-Business\Desktop\TWB\TWB Central\Projects\MusingMonkey\MusingMonkey\Controllers\UsersController.cs:line 78
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T08:47:54.643

呃，你确定那`r.Email`是抛出 NRE 的那条线吗？

因为烟雾似乎来自以下线路：

```
User u = null; 
```

然后你试图在`u`没有实例化这个变量的情况下访问实例：

```
if (doesntExist)
{
    u.Email = email;
    ... 
```

所以你可能意味着别的东西，例如：

```
User u = new User(); 
```

# scala - 单例类型中表面上的不一致

> ID：12025298
> 
> 赞同：6
> 
> 时间：2012-08-19T08:42:47.330
> 
> 标签：scala, types, programming-languages, type-systems, singleton-type

我有几个关于单例类型的问题，但是由于它们都非常密切相关，所以我将它们发布在同一个线程下。

Q1。为什么#1 不编译而#2 编译？

```
def id(x: Any): x.type = x      // #1
def id(x: AnyRef): x.type = x   // #2 
```

Q2。在我尝试过的其他引用类型的情况下，类型被正确推断，但在其他引用类型的情况下`String`却没有。为什么呢？

```
scala> id("hello")
res3: String = hello

scala> id(BigInt(9))
res4: AnyRef = 9

scala> class Foo
defined class Foo

scala> id(new Foo)
res5: AnyRef = Foo@7c5c5601 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T10:27:27.257

单例类型只能引用`AnyRef`后代。有关更多详细信息，请参阅[为什么字符串文字符合 Scala Singleton](https://stackoverflow.com/questions/11594828/why-do-string-literals-conform-to-scala-singleton/11598340#11598340)。

应用程序的参数`id(BigInt(9))`不能通过稳定的路径引用，因此没有有趣的单例类型。

```
scala> id(new {})
res4: AnyRef = $anon$1@7440d1b0

scala> var o = new {}; id(o)
o: Object = $anon$1@68207d99
res5: AnyRef = $anon$1@68207d99

scala> def o = new {}; id(o)
o: Object
res6: AnyRef = $anon$1@2d76343e

scala> val o = new {}; id(o) // Third time's the charm!
o: Object = $anon$1@3806846c
res7: o.type = $anon$1@3806846c 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-19T10:14:13.387

我在 #2 上也遇到错误（使用 Scala 2.9.1.final）：

```
error: illegal dependent method type
  def id(x: AnyRef): x.type = x;          ^
one error found 
```

我相信正确的解决方案是使用`id`类型参数使用 make polymorphic：

```
def id[T <: Any](x: T): T = x; 
```

# jquery - 一个 json 文件中有更多对象

> ID：12025299
> 
> 赞同：1
> 
> 时间：2012-08-19T08:42:55.127
> 
> 标签：jquery, json

我正在开发一个映射工具，我正在使用 jQuery 从服务器下载 JSON 数据。jquery 的代码目前是：

```
$.getJSON("start.json", function(data) {
    var items = [];

    $.each(data, function(key, val) {
        alert("data: " + key + "->" + val);
    });
}); 
```

json 文件如下所示：

```
{
    "type"  :   "obstacle",
    "top"   :   20,
    "left"  :   10,
    "height":   50,
    "width" :   70,
    "tall"  :   10
} 
```

现在，“问题”是，可以清楚地看到，在这种格式下，json 只能包含一个对象。我如何构建我的文件（以及我的 jquery）以拥有多个对象？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T08:51:13.327

您可以像这样创建一个 JSON 对象数组：

```
[
    { 
        "type"  :   "obstacle", 
        "top"   :   20, 
        "left"  :   10, 
        "height":   50, 
        "width" :   70, 
        "tall"  :   10 
    } ,
    { 
        "type"  :   "obstacle", 
        "top"   :   50, 
        "left"  :   10, 
        "height":   50, 
        "width" :   20, 
        "tall"  :   10 
    } 
] 
```

**编辑： jQuery 会是这样的：**

```
$.each(data, function(index, obstacle))
{
    $.each(obstacle, function(key, val) { 
        alert("data: " + key + "->" + val); 
    }); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T08:50:03.520

您可以使用数组来存储它们：

```
{
  "objects": [
    {
      "type"  :   "obstacle",
        "top"   :   20,
        "left"  :   10,
        "height":   50,
        "width" :   70,
        "tall"  :   10
      }, {
      "type"  :   "obstacle",
        "top"   :   20,
        "left"  :   10,
        "height":   50,
        "width" :   70,
        "tall"  :   10
      }, {
      "type"  :   "obstacle",
        "top"   :   20,
        "left"  :   10,
        "height":   50,
        "width" :   70,
        "tall"  :   10
      }
    ]
} 
```

现在，当您迭代时，您可以访问单个对象的属性：

```
$.each(data.objects, function(key, val) {
  console.log(key + ' => ' + val);
}); 
```

# python - django python随机引发mysql操作错误和redis“打开文件太多”错误

> ID：12025302
> 
> 赞同：1
> 
> 时间：2012-08-19T08:43:19.623
> 
> 标签：python, mysql, django, redis, fastcgi

我有一个使用 python+django+fastcgi(flup)+mysql+redis 构建的 Web 服务。

但它总是偶尔会引发一些异常，例如`OperationalError: (2001, "Can't create UNIX socket (24)")`或 `ConnectionError: Error 24 connecting 10.160.94.231:6379\. Too many open files.`

日志文件显示如下：

```
2012-08-19 12:36:36,322 ERROR Internal Server Error: /xxxx
Traceback (most recent call last):
  File "/usr/lib/python2.6/site-packages/django/core/handlers/base.py", line 111, in get_response
  File "/xxxxxx/push_notifi/models.py", line 60, in get_device_token
  File "/usr/lib/python2.6/site-packages/redis-2.4.12-py2.6.egg/redis/client.py", line 773, in sadd
  File "/usr/lib/python2.6/site-packages/redis-2.4.12-py2.6.egg/redis/client.py", line 283, in execute_command
  File "/usr/lib/python2.6/site-packages/redis-2.4.12-py2.6.egg/redis/connection.py", line 260, in send_command
  File "/usr/lib/python2.6/site-packages/redis-2.4.12-py2.6.egg/redis/connection.py", line 243, in send_packed_command
  File "/usr/lib/python2.6/site-packages/redis-2.4.12-py2.6.egg/redis/connection.py", line 191, in connect
ConnectionError: Error 24 connecting 10.160.94.231:6379\. Too many open files.
2012-08-19 12:38:54,942 ERROR Internal Server Error: xxxxx
Traceback (most recent call last):
  File "/usr/lib/python2.6/site-packages/django/core/handlers/base.py", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)
  File "/xxxxxx/users_stat/views.py", line 85, in receiver
    saveUser(user)
  File "/xxxxxx/users_stat/models.py", line 86, in saveUser
  File "/xxxxxxx/users_stat/models.py", line 46, in syncVersionToPushService
  File "/xxxxxxx/utility/db_access.py", line 37, in execNonQuery
  File "/usr/lib/python2.6/site-packages/MySQLdb/__init__.py", line 81, in Connect
  File "/usr/lib/python2.6/site-packages/MySQLdb/connections.py", line 187, in __init__
OperationalError: (2001, "Can't create UNIX socket (24)") 
```

我认为这可能是由某种文件描述符泄漏引起的，但我使用`redis.Redis`连接 redis 并将 redis 连接超时设置为 100 秒。

在 mysql 连接中，我在每次查询后都调用了`cursor.close()`and 。`db.close()`我真的不知道 fd 泄漏发生在哪里。

我也检查了`cat /proc/sys/fs/file-nr`，总是有足够的文件描述符。喜欢：

```
2272    0   170019 
```

你对此有什么想法吗？

# php - 使用ckeditor插件pgrfilemanager上传时如何使用Zend_Auth对用户进行身份验证

> ID：12025307
> 
> 赞同：1
> 
> 时间：2012-08-19T08:44:04.117
> 
> 标签：php, zend-framework, ckeditor, security

你好好人！

我有一个基于 Zend Framework 1.11.12（从 1.10.8 升级）使用“模块化方法”文件夹结构的 Web 应用程序（我的第一个此类），我的意思是所有模块都在`application/modules`. 我使用了 Doctrine 1.2.4

我还`library`为所有第三方库使用文件夹，包括 ZF，除了 2:`CKEditor`和[`PGRFilemanager`](http://pgrfilemanager.sourceforge.net/). pgrfile 管理器，用于从管理面板将文件上传到图像文件夹。这是全局我的文件结构。

```
/application
    /configs
        application.ini
        routes.ini
    /layouts
        /scripts
            /partials
                  *.all_the_partials_files.phtml
            *.all_the_layouts.phtml
    /modules
         all_the_module_folders
    Boostrap.php
/logs
/library
    /Zend
    /Doctrine
    /SwiftMailer
    /Abra //where all my classes reside
        /Model
            User.php
            Role.php
            other_doctrine_entities_class
/public
    /javascript
    /css
    /images
        .htaccess // added an htaccess file here
    /fonts
    `/ckeditor`
        a_lot_of_files_including_php_files
        other_folders
        /plugins
            other_folders
            `/pgrfilemanager`
                /php
                    auth.php
                myconfig.php
                other_folders_and_files_including_php
    index.php
    .htaccess 
```

在我开发这个站点的时候，我没有使用 Zend_Acl，所以 session_start() 在`/public/ckeditor/plugins/pgrfilemanager/php/auth.php`一段时间内工作得很好，因为 pgrfilemanager 带有默认的身份验证功能。但是一旦我开始使用 Zend_Acl，当从文件中调用时，我就会遇到诸如`Class __PHP_Incomplete_Class has no unserializer Array`异常之类的问题。我最初认为这是由于我没有使用的事实，但显然我是因为[这里解释了](https://stackoverflow.com/questions/7658445/zend-session-clean-session-before-calling-start)这个事实 （如果我错了，请纠正我谢谢） `session_start()``~~/auth.php``Zend_Session`

如何使用它？谢谢阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:03:35.487

由于我找到了有关此问题的解决方法，因此我想我会分享，也许我会获得更好的视角。

答案`Class __PHP_Incomplete_Class has no unserializer Array`现在很清楚了，因为 Session 知道哪种格式`unserialize`意味着 php 必须知道存储在会话中的对象的定义。

基于文件结构，我创建了一个身份验证文件`myauth.php`，说`/public/ckeditor/puglins/pgrfilemanager/userfiles`我将引用此路径是`pgr/userdir`

```
$path = realpath("../../../../library");
set_include_path(get_include_path() . PATH_SEPARATOR . $path);

require "Zend/Loader/Autoloader.php";

require_once 'Doctrine/Doctrine.php';
spl_autoload_register(array("Doctrine", "autoload"), true);
$loader = Zend_Loader_Autoloader::getInstance();
$loader->registerNamespace(array("Abra_"));
/*$p seem to be empty throwing error on Zend_Config_Ini but returns the config anyway.I never figured out
*/
$p = realpath("./../../../../application/configs/application.ini"); 
try {
    //     $config = parse_ini_file($p, "production");
    $config = new Zend_Config_Ini($p, "production");
    $conn = Doctrine_Manager::connection($config->doctrine->dsn);
    $user = new Abra_Model_User();
    $role = new Abra_Model_Role();
    $auth = Zend_Auth::getInstance();
    if(!$auth->hasIdentity()|| !in_array($auth->getIdentity()->Role->name,  array("superadmin","administrator")) ){
        die("Not authenticated");
    }
} catch (Exception $ex) {
*/
$p = realpath("./../../../../application/configs/application.ini"); 
try {
    //     $config = parse_ini_file($p, "production");
    $config = new Zend_Config_Ini($p, "production");
    $conn = Doctrine_Manager::connection($config->doctrine->dsn);
    $user = new Abra_Model_User();
    $role = new Abra_Model_Role();
    $auth = Zend_Auth::getInstance();
    if(!$auth->hasIdentity()|| !in_array($auth->getIdentity()->Role->name,  array("superadmin","administrator")) ){
        die("Not authenticated");
    }
} catch (Exception $ex) {

}

} 
```

在`pgr/php/folders.php`和`pgr/php/files.php`我包括

```
$path = realpath("../../../../library");
set_include_path(get_include_path() . PATH_SEPARATOR . $path); 
```

在顶部。然后我包括`pgr/userfiles/myauth.php`在`pgr/myconfig`如下所示

```
include_once dirname(__FILE__) . '/userfiles/myauth.php'; 
```

我希望这会对某人有所帮助。谢谢

# playframework - 如何从项目文件夹外运行播放命令？

> ID：12025318
> 
> 赞同：2
> 
> 时间：2012-08-19T08:45:57.027
> 
> 标签：playframework, playframework-2.0, sbt

是否可以为给定的项目/文件夹调用播放命令？我的意思是不在项目文件夹中？例如 ：

```
play dist /path/to/a/given/folder
play dist /path/to/another/folder 
```

在 CI 中特别有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:59:06.990

我能想象的最快的方法就是依赖 bash 功能：

```
cd /path/to/a/given/folder; pwd; play dist; cd -
cd /path/to/another/folder; pwd; play dist; cd - 
```

当然你不需要一次又一次地写它。您可以为该工作编写小型 bash 脚本。然后就会被`one-line`调用。

# javascript - Javascript：无意的焦点模糊

> ID：12025321
> 
> 赞同：3
> 
> 时间：2012-08-19T08:46:29.930
> 
> 标签：javascript, html

在我努力学习 Javascript 的过程中，我一直在尝试实现一个所见即所得的代码编辑器。我没有实现 content-editable`div`或 a `textarea`，而是从 Ajax.org 的 ACE 书中取出一片（相当多的一片）。

我有一个设置为 0 的侦听`div`器`tabIndex`来处理所有输入事件。编辑器的所有组件，如文本区域、光标和装订线，都是此侦听器的子项。自从实现鼠标事件处理程序以来，我一直有一个问题是焦点丢失在`mousedown`事件上。显然，`blur`即使`mousedown`事件发生在侦听器中，事件也会被触发。

在注释掉某些方法调用并试图查看导致问题的确切原因后，我注意到罪魁祸首是`render`方法。现在，我在每次输入后调用这个方法，所以焦点丢失很奇怪，特别是当我为`mousedown`事件调用它时。在注释掉该`render`方法`blur`时，有事件时不会触发`mousedown`事件。

更进一步，事实证明，在注释掉我替换`innerHTML`文本容器的部分时，问题就消失了。同样，这很奇怪，因为我在`replaceInnerHTML`函数的各个位置都使用了该`render`函数，但问题似乎仅来自于特别更新 text `div`。

这是 replaceInnerHTML 方法（我在[这里](http://blog.stevenlevithan.com/archives/faster-than-innerhtml)发现的）：

```
function replaceInnerHTML(el, html) {
    var newEl = el.cloneNode(false);

    newEl.innerHTML = html;

    el.parentNode.replaceChild(newEl, el);

    return newEl;
} 
```

这是文本层的更新功能，省略不会出现此问题：

```
TextLayer.prototype.update = function(config) {
    html = [];

    var top = config.topRow;
    var last = config.lastRow;

    for(var i=top; i<=last; i++) {
        var line = this._session.getLine(i);
        if(line) {
            html.push('<div class="line" style="height:'+this.$characterSize.height+'px;">');
            this.renderLine(html, line);
            html.push('</div>');
        }       
    }   

    this._text = replaceInnerHTML(this._text, html.join(''));
    this.setSize(config.totalWidth, config.scrollHeight);
}; 
```

为什么焦点会因为替换`innerHTML`特定节点而变得模糊，而且只有在发生事件时才调用它`mousedown`？

或者我在尝试调试时是否朝着完全错误的方向前进，而这个问题是由其他原因引起的？

**编辑：**

感谢 pimvdb，这里有一个重现问题的小提琴。[http://jsfiddle.net/wG4Yy/39/](http://jsfiddle.net/wG4Yy/39/)

由于重组了事件上的节点，该`blur`事件似乎触发了`mousedown`。我不知道如何解决问题。我尝试过使用文档片段而不是 innerHTML，并且我也尝试过使用 安排更新`setTimeout`，但都没有成功。

我应该怎么做才能解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:10:29.797

当您想要一个元素获得焦点时，似乎您必须单击一个停留在那里的元素。如果你用另一个元素替换它，浏览器显然不会被欺骗来关注那个元素。

您可以做的是让浏览器完成其鼠标按下/聚焦等过程，然后手动聚焦元素。这可以通过`setTimeout(..., 0)`调用来完成：http: [//jsfiddle.net/wG4Yy/41/](http://jsfiddle.net/wG4Yy/41/)。

```
setTimeout(function() {
    wrapper.focus();
}, 0); 
```

# arrays - 算法谜题 - 通过它们的差异将数字放入数组中

> ID：12025326
> 
> 赞同：-2
> 
> 时间：2012-08-19T08:48:01.587
> 
> 标签：arrays, algorithm

算法谜语

你得到一个数字 x，你必须在一个大小为 2x 的数组中设置从 1 到 x twic 的所有值。规则是数字必须放在与其值不同的单元格中。例如，如果您像这样设置数字 2：| **2** | | | | | bex 必须是这样的：|2| | **2** | | |

假设 x=4，那么我们有一个 8 个单元格的数组，我们可以这样设置数字：1 2 3 4 5 6 7 8 |4|2|3|2|4|3|1|1|

您可以通过各种方式放置号码。

你可以对数字**10**（数组大小 20）、**12**（数组大小 24）做同样的事情吗？如果是，请说明如何，如果不是，请说明每个数字的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:58:24.250

10 是不可能的。12 是可能的。我尝试了所有不超过 13 的整数，并且有一个明确的模式，我确信可以证明（但我现在不知道如何证明）：

```
1  yes
2  no
3  no
4  yes
5  yes
6  no
7  no
8  yes
9  yes
10 no
11 no
12 yes
13 yes 
```

它可以通过递归函数来解决，该函数尝试所有可能性，如果找不到匹配项，则使用回溯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T09:01:38.883

这个问题是NP-Complete，你必须尝试所有可能性来确定可行性并获得一组可能的解决方案。

如果您想要由函数定义的是否可以完成它的是/否答案`1/2(4n + (-1)^n - 1)`，插入从 1...infinity 开始的 n 值将为您提供是答案的数字序列。不包括证明:)

为了澄清，解决方案集的发现是 NP-Complete 并且可以使用上述公式完成给定 N 的是/否答案。（我希望我没有捏造那个数学，它是一个生成函数）

# javascript - Javascript 附加文件编号

> ID：12025328
> 
> 赞同：1
> 
> 时间：2012-08-19T08:48:35.517
> 
> 标签：javascript, forms, attachment

它在 Google Chrome 和 Mozilla 上运行良好……但不能在 Internet Explorer 上正常运行。

```
var col = document.getElementById('myFormid');
var fields = col.getElementsByTagName('input');

for(x in fields){
if(fields[x].name == 'doc[]' && fields[x].value != ''){
files++;    
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T08:55:55.090

您不应该使用`for...in`迭代数组，因为您将访问数组的原型方法及其元素。只需使用常规`for`语法，看看是否有帮助：

```
var col = document.getElementById('myFormid');
var fields = col.getElementsByTagName('input');

for (var i = 0; i < fields.length; i++) {
  var field = fields[i];

  if ((field.name == 'doc[]') && (field.value != '')) {
    files++;    
  }
} 
```

# javascript - 如何使用 jQuery 显示/隐藏菜单？

> ID：12025329
> 
> 赞同：-2
> 
> 时间：2012-08-19T08:48:36.703
> 
> 标签：javascript, jquery

我有一个菜单，其中包含仅在单击它们时才显示的菜单项。要再次隐藏它们，必须再次单击它们。这一切都很好，但是当单击另一个菜单项时，我还需要隐藏其他可见的菜单项。

我目前使用：

```
$(this).parent().find("element").toggle(); 
```

因此，如果菜单项 2 可见并且菜单项 1 被单击，则菜单项 2 需要再次隐藏并且菜单项 1 需要可见。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T09:05:52.643

您可以在单击时隐藏/显示元素：

```
$('.menu-item').on('click', function() {
    var $this = $(this);
    $this.show();
    $this.parent().children('.menu-item').not($this).hide();
}); 
```

根据嵌套使用 find 而不是 children。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:32:57.927

这个怎么样：

```
$('.submenu').hide();
$('.menuitem').click(function() {
  var thissubmenu = $(this).find('.submenu');   
  $('.submenu').not(thissubmenu).hide();
  $(this).find(".submenu").toggle();
});
​ 
```

我制作了一个[JSFiddle](http://jsfiddle.net/cYUXP/3)，我认为它可以满足您的需求。

但也许有人知道更优雅的方式。

# php - Mac 上 memcached 的 GUI 安装程序？

> ID：12025332
> 
> 赞同：2
> 
> 时间：2012-08-19T08:48:48.353
> 
> 标签：php, terminal, memcached, osx-lion, installation

我正在寻找一种在运行 Lion 的 Mac 上安装 memcached 的方法，但我不知道如何使用终端。是否有一个易于使用的 GUI 包来安装它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:20:13.583

[安装memcached](/questions/tagged/memcached "显示标记为“memcached”的问题")服务器没有简单的 GUI 。您可以使用 OSX 包管理器，例如[HomeBrew](https://brew.sh/)或[MacPorts](https://www.macports.org/)，但仍需要使用终端。我建议从源代码安装所有内容，因为这是对底层 UNIX 系统如何工作的很好的介绍。

## 安装槽包管理器

### 家酿

```
$ brew install memcached 
```

### 麦克波特

```
$ sudo port install memcached 
```

## 从源安装

### 1\. 从 AppStore 安装 XCode

XCode 将安装基本库和应用程序以将源代码编译为可执行应用程序。XCode 在 Mac 随附的安装光盘中提供，但现在可以在 AppStore 中免费下载。根据您的 XCode 版本，将需要额外的设置。

### 2、安装autconfig、automake、libevent，然后安装memcached

Memcached 将需要一些依赖项；其中，由列出的包管理器自动处理。每个依赖项和 memcached 都遵循相同的终端命令来安装：`./configure`、`make`和`make install`. 有了经验，这变得非常容易。这是一个例子。

```
# Download source
$ curl -O http://memcached.googlecode.com/files/memcached-1.4.14.tar.gz

# Extract files
$ tar zvxf memcached-1.4.14.tar.gz

# Change working directory to newly extracted files
$ cd memcached-1.4.14

# Configure source to your local machine
$ ./configure

# Compile the application
$ make

# Install application on your system
$ sudo make install 
```

Heres'您可以在其中找到所需的库等

*   自动配置[http://ftp.gnu.org/gnu/autoconf/autoconf-2.69.tar.gz](http://ftp.gnu.org/gnu/autoconf/autoconf-2.69.tar.gz)
*   [自动制作](http://ftp.gnu.org/gnu/automake/automake-1.12.3.tar.gz)http://ftp.gnu.org/gnu/automake/automake-1.12.3.tar.gz
*   LibEvent [https://github.com/downloads/libevent/libevent/libevent-2.0.19-stable.tar.gz](https://github.com/downloads/libevent/libevent/libevent-2.0.19-stable.tar.gz)
*   内存缓存[http://memcached.googlecode.com/files/memcached-1.4.14.tar.gz](http://memcached.googlecode.com/files/memcached-1.4.14.tar.gz)

# javascript - 运行脚本以禁用脚本

> ID：12025336
> 
> 赞同：1
> 
> 时间：2012-08-19T08:50:18.413
> 
> 标签：javascript, jquery

我需要运行一个脚本来禁用页面上的另一个脚本。我该怎么做呢？

（Internet Explorer 问题是我必须这样做的原因。）我使用的是 jQuery 1.8。

请提供例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T09:09:32.633

使用 jQuery，您可以**测试 IE，然后在**返回 true 时加载脚本。

jQuery.browser 稍后可能会移至插件，如果在您更新库时它会中断，请先开始查看它。

请记住，通常不建议测试特定浏览器，最好测试浏览器可以使用的功能。有时你别无选择：

```
if(jQuery.browser.msie)
{
    $.getScript("lynda-ie.js");
} 
```

如果您需要特定版本的脚本（如果 IE），您还可以测试其版本：

```
if(jQuery.browser.msie)
{
    switch (parseInt(jQuery.browser.version,10))
    {
        case 6 :
            $.getScript("lynda-ie-6.js");
        break;
        case 7 :
            $.getScript("lynda-ie-7.js");
        break;
        case 8 : case 9 : default :
            $.getScript("lynda-ie.js");
        break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T08:53:17.507

为什么不用旗帜？

如果此标志为“1”（例如），代码将运行

否则，它不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T09:52:41.097

根据浏览器是否为 IE，有条件地附加脚本的“更好”方法是使用“条件注释”。这些在 IE5+ 中可用，但由于它们的设计方式而与所有浏览器兼容。它们允许您将 HTML 的某些部分设置为仅用于 IE，或用于所有非 IE 浏览器，或所有浏览器（IE 和非 IE）。

例子：

```
<!--[if IE 8]>
<script src="internet-explorer.js"></script>
<![endif]-->

<![if !IE]>
<script src="not-internet-explorer.js"></script>
<![endif]>

<script src="all-browsers.js"></script> 
```

链接： http: [//msdn.microsoft.com/en-us/library/ms537512 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537512(v=vs.85).aspx)

# python - Weevely 在 Windows 7 上？

> ID：12025346
> 
> 赞同：2
> 
> 时间：2012-08-19T08:52:02.833
> 
> 标签：python, windows, python-2.7

在 Windows 7 上安装 Weevely 时出现错误我是 Python 新手：/

```
C:\Python27\weevely>python weevely.py generate testmypwd

Traceback (most recent call last):
  File "weevely.py", line 108, in <module>
    Terminal (ModHandler(genname, password), True).run_module_cmd(args_list)
  File "C:\Python27\weevely\core\modules_handler.py", line 17, in __init__
    self.__set_path_modules()
  File "C:\Python27\weevely\core\modules_handler.py", line 42, in __set_path_modules
    raise Exception( "No module directory %s found." % self.path_modules )
Exception: No module directory /modules found. 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:25:14.450

由于基本问题是这个模块要在 Linux/Unix 上运行（注意到因为 weevely.py 正在调用 shebang 行`#!/usr/bin/env python`：），但是，WebJuice 试图在 Windows 上运行，我尝试更改第 36 和 37 行文件：C:\Python27\weevely\core\modules_handler.py 到以下内容：

```
root_path = os.path.dirname(current_path)
self.path_modules = os.path.join(root_path,'modules') 
```

但是，仍然有其他依赖模块：readline，它不适用于 Windows（从[http://pypi.python.org/pypi/readline/](http://pypi.python.org/pypi/readline/)可以明显看出），你永远不知道是否还有更多看不见的 linux 相关依赖项。所以，我会得出结论，我们不能在 Windows 上运行它。

**PS**：我指的是我从[http://cloud.github.com/downloads/epinna/Weevely/weevely-0.7.1.tar.gz](http://cloud.github.com/downloads/epinna/Weevely/weevely-0.7.1.tar.gz)下载的weevely包。但是，如果有人找到等效的 linux 包，请发布相应的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:29:42.320

从 1.0 版开始，Weevely 正式支持 Windows 和 MacOS 环境，如教程中所述。

[https://github.com/epinna/Weevely/wiki/Tutorial](https://github.com/epinna/Weevely/wiki/Tutorial)

从官方网站[http://epinna.github.com/Weevely/下载](http://epinna.github.com/Weevely/)

# c# - 为什么我的区域特定 Web API 可以从所有其他区域访问？

> ID：12025347
> 
> 赞同：9
> 
> 时间：2012-08-19T08:52:22.530
> 
> 标签：c#, .net, asp.net-mvc, asp.net-web-api, asp.net-mvc-areas

我目前正在开发一个 ASP.NET MVC 4 Web 应用程序项目，该项目必须遵守以下设计决策：

*   主 MVC 应用程序位于解决方案的根目录中。
*   所有管理员功能都位于一个单独的区域中。
*   每个外部方（例如供应商）都有自己的区域。
*   每个区域，包括根部，都构成了一个分离良好的功能块。一个区域的功能可能不会暴露给另一个区域。这是为了防止未经授权的数据访问。
*   每个区域，包括根，都有自己的 RESTfull API（Web API）。

所有区域中的所有正常控制器，包括根，都按预期工作。但是，我的一些 Web API 控制器表现出意外的行为。例如，拥有两个同名但位于不同区域的 Web API 控制器会产生以下异常：

> 找到了与名为“clients”的控制器匹配的多种类型。如果为该请求提供服务的路由 ('api/{controller}/{id}') 发现多个控制器定义为同名但命名空间不同，则可能会发生这种情况，这是不受支持的。
> 
> 'clients' 的请求找到了以下匹配的控制器： MvcApplication.Areas.Administration.Controllers.Api.ClientsController MvcApplication.Controllers.Api.ClientsController

这似乎很奇怪，因为我有不同的路线应该将两者分开。这是我在管理部分的区域注册：

```
public class AdministrationAreaRegistration : AreaRegistration
{
    public override string AreaName
    {
        get
        {
            return "Administration";
        }
    }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        context.Routes.MapHttpRoute(
            name: "Administration_DefaultApi",
            routeTemplate: "Administration/api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        context.MapRoute(
            "Administration_default",
            "Administration/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

此外，我注意到我可以访问特定于区域的 Web API，同时在调用中省略区域的名称。

这里发生了什么？如何让我的 Web API 控制器像普通的 ASP.NET MVC 控制器一样工作？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-19T08:52:22.530

> ASP.NET MVC 4 不支持跨区域划分 Web API 控制器。

您可以将 WebApi 控制器放置在不同区域的不同 Api 文件夹中，但 ASP.NET MVC 会将它们视为都在同一个位置。

幸运的是，您可以通过覆盖 ASP.NET MVC 基础结构的一部分来克服这个限制。有关限制和解决方案的更多信息，请阅读我的博文“ [ASP.NET MVC 4 RC：让 WebApi 和区域发挥得很好](http://devillers.nl/getting-webapi-and-areas-to-play-nicely/)”。如果您只对解决方案感兴趣，请继续阅读：

**步骤 1\. 让您的路线了解区域**

将以下扩展方法添加到您的 ASP.NET MVC 应用程序并确保它们可以从您的 AreaRegistration 类中访问：

```
public static class AreaRegistrationContextExtensions
{
    public static Route MapHttpRoute(this AreaRegistrationContext context, string name, string routeTemplate)
    {
        return context.MapHttpRoute(name, routeTemplate, null, null);
    }

    public static Route MapHttpRoute(this AreaRegistrationContext context, string name, string routeTemplate, object defaults)
    {
        return context.MapHttpRoute(name, routeTemplate, defaults, null);
    }

    public static Route MapHttpRoute(this AreaRegistrationContext context, string name, string routeTemplate, object defaults, object constraints)
    {
        var route = context.Routes.MapHttpRoute(name, routeTemplate, defaults, constraints);
        if (route.DataTokens == null)
        {
            route.DataTokens = new RouteValueDictionary();
        }
        route.DataTokens.Add("area", context.AreaName);
        return route;
    }
} 
```

要使用新的扩展方法，请`Routes`从调用链中删除该属性：

```
context.MapHttpRoute( /* <-- .Routes removed */
    name: "Administration_DefaultApi",
    routeTemplate: "Administration/api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

**步骤 2\. 使 Web API 控制器选择器区域感知**

将以下类添加到您的 ASP.NET MVC 应用程序并确保它可以从 Global.asax 访问

```
namespace MvcApplication.Infrastructure.Dispatcher
{
    using System;
    using System.Collections.Concurrent;
    using System.Collections.Generic;
    using System.Globalization;
    using System.Linq;
    using System.Net.Http;
    using System.Web.Http;
    using System.Web.Http.Controllers;
    using System.Web.Http.Dispatcher;

    public class AreaHttpControllerSelector : DefaultHttpControllerSelector
    {
        private const string AreaRouteVariableName = "area";

        private readonly HttpConfiguration _configuration;
        private readonly Lazy<ConcurrentDictionary<string, Type>> _apiControllerTypes;

        public AreaHttpControllerSelector(HttpConfiguration configuration)
            : base(configuration)
        {
            _configuration = configuration;
            _apiControllerTypes = new Lazy<ConcurrentDictionary<string, Type>>(GetControllerTypes);
        }

        public override HttpControllerDescriptor SelectController(HttpRequestMessage request)
        {
            return this.GetApiController(request);
        }

        private static string GetAreaName(HttpRequestMessage request)
        {
            var data = request.GetRouteData();
            if (data.Route.DataTokens == null)
            {
                return null;
            } 
            else 
            {
                object areaName;
                return data.Route.DataTokens.TryGetValue(AreaRouteVariableName, out areaName) ? areaName.ToString() : null;
            }
        }

        private static ConcurrentDictionary<string, Type> GetControllerTypes()
        {
            var assemblies = AppDomain.CurrentDomain.GetAssemblies();

            var types = assemblies
                .SelectMany(a => a
                    .GetTypes().Where(t =>
                        !t.IsAbstract &&
                        t.Name.EndsWith(ControllerSuffix, StringComparison.OrdinalIgnoreCase) &&
                        typeof(IHttpController).IsAssignableFrom(t)))
                .ToDictionary(t => t.FullName, t => t);

            return new ConcurrentDictionary<string, Type>(types);
        }

        private HttpControllerDescriptor GetApiController(HttpRequestMessage request)
        {
            var areaName = GetAreaName(request);
            var controllerName = GetControllerName(request);
            var type = GetControllerType(areaName, controllerName);

            return new HttpControllerDescriptor(_configuration, controllerName, type);
        }

        private Type GetControllerType(string areaName, string controllerName)
        {
            var query = _apiControllerTypes.Value.AsEnumerable();

            if (string.IsNullOrEmpty(areaName))
            {
                query = query.WithoutAreaName();
            }
            else
            {
                query = query.ByAreaName(areaName);
            }

            return query
                .ByControllerName(controllerName)
                .Select(x => x.Value)
                .Single();
        }
    }

    public static class ControllerTypeSpecifications
    {
        public static IEnumerable<KeyValuePair<string, Type>> ByAreaName(this IEnumerable<KeyValuePair<string, Type>> query, string areaName)
        {
            var areaNameToFind = string.Format(CultureInfo.InvariantCulture, ".{0}.", areaName);

            return query.Where(x => x.Key.IndexOf(areaNameToFind, StringComparison.OrdinalIgnoreCase) != -1);
        }

        public static IEnumerable<KeyValuePair<string, Type>> WithoutAreaName(this IEnumerable<KeyValuePair<string, Type>> query)
        {
            return query.Where(x => x.Key.IndexOf(".areas.", StringComparison.OrdinalIgnoreCase) == -1);
        }

        public static IEnumerable<KeyValuePair<string, Type>> ByControllerName(this IEnumerable<KeyValuePair<string, Type>> query, string controllerName)
        {
            var controllerNameToFind = string.Format(CultureInfo.InvariantCulture, ".{0}{1}", controllerName, AreaHttpControllerSelector.ControllerSuffix);

            return query.Where(x => x.Key.EndsWith(controllerNameToFind, StringComparison.OrdinalIgnoreCase));
        }
    }
} 
```

`DefaultHttpControllerSelector`通过将以下行添加到`Application_Start`Global.asax 中的方法来覆盖。

```
GlobalConfiguration.Configuration.Services.Replace(typeof(IHttpControllerSelector), new AreaHttpControllerSelector(GlobalConfiguration.Configuration)); 
```

恭喜，您的 Web API 控制器现在将像您的普通 MVC 控制器一样尊重您所在区域的规则！

**更新：2012 年 9 月 6 日**

一些开发人员就他们遇到`DataTokens`的路由变量属性为 的场景与我联系`null`。我的实现假定该`DataTokens`属性始终被初始化，并且如果该属性为`null`. 此行为很可能是由 ASP.NET MVC 框架中的最新更改引起的，实际上可能是框架中的错误。我已经更新了我的代码来处理这种情况。

# php - 如何在条件下退出循环？

> ID：12025350
> 
> 赞同：0
> 
> 时间：2012-08-19T08:52:33.620
> 
> 标签：php

```
$arr = array(1, 2, 3, 4);
foreach ($arr as $value) {
    $i=0;
    if($i==1||$i==2){continue;}
    echo $value;
    $i++;
} 
```

我是PHP的新手，现在我做一个测试，我想退出循环不输出2和3，为什么上面的代码不起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T08:56:50.023

那是因为您`$i = 0;`在每次迭代中都设置了（因此您的检查`$i==1||$i==2`永远不会匹配）。变量初始化在循环之外：

```
$arr = array(1, 2, 3, 4);
$i   = 0;
foreach ($arr as $value) {
    if ($i == 1 || $i == 2) {
        continue;
    }
    echo $value;
    $i++;
} 
```

# wordpress - Wordpress 自定义永久链接到其他页面

> ID：12025356
> 
> 赞同：0
> 
> 时间：2012-08-19T08:53:40.753
> 
> 标签：wordpress

如何在 wordpress 中设置指向不同页面的永久链接？

像这样`www.abc.com/blog.php?id=123`

代替`www.abc.com/?id=123`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:55:14.617

我找到了一种方法来做到这一点。我在第 161 行修改了 wordpress 包含目录中的 link_template.php

在函数中

```
home_url('?p=' . $post->ID); 
```

我简单地说

```
home_url('blog.php?p=' . $post->ID); 
```

这仅适用于永久链接设置中的默认永久链接选项。

# c# - PrintDocument 的设计和布局

> ID：12025357
> 
> 赞同：1
> 
> 时间：2012-08-19T08:53:55.730
> 
> 标签：c#, .net, visual-studio-2008

我可能听起来很傻，但想知道是否有任何方法可以设计打印布局，即正在打印的字符串/文本的字体大小、字体颜色、间距、边距和坐标，并将代码生成为 .graphics.drawstring(. ...)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T09:00:41.740

你可以对元文件做类似的事情。在元文件中，您可以绘制到元文件中，然后在一个命令中绘制它。

更多信息可以在以下位置找到：

*   [在 C# 中绘制内存中的元文件](http://nicholas.piasecki.name/blog/2009/06/drawing-o-an-in-memory-metafile-in-c-sharp/)
*   [在 .Net 中使用元文件图像](http://www.codeproject.com/Articles/177394/Working-with-Metafile-Images-in-Net)

# php - SilverStripe 数据对象作为使用 2 个图像的页面

> ID：12025359
> 
> 赞同：0
> 
> 时间：2012-08-19T08:55:14.113
> 
> 标签：php, silverstripe, data-objects

我正在尝试从[http://www.ssbits.com](http://www.ssbits.com)开发一个使用 Dataobject 作为页面的教程。这是它的链接：[http ://www.ssbits.com/tutorials/2010/dataobjects-as-pages-part-1-keeping-it-simple](http://www.ssbits.com/tutorials/2010/dataobjects-as-pages-part-1-keeping-it-simple)

现在在教程中（我已经在我的项目中使用过）每个员工只有一张图片，我想为每位员工关联 2 张图片（我使用的是产品而不是员工），我想我需要使用$has_many 关系，但是当我尝试它无法正常工作时，它会上传图像，但不会将它们与工作人员（在我的情况下为产品）相关联。我是这样做的：

```
//Relations
static $has_one = array (
   'ProductPage' => 'ProductPage'
);

static $has_many = array (
  'Photo1' => 'Image',
  'Photo2' => 'Image'
); 
```

任何人都知道如何做到这一点？

谢谢
毛罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:30:01.207

只需使用 has_one 而不是 has_many。如果您想拥有“一堆图像”但您需要“正好 2 个”，则可以使用 has_many。

# java - 在同步访问地图期间哪个线程被阻塞？

> ID：12025362
> 
> 赞同：0
> 
> 时间：2012-08-19T08:55:48.257
> 
> 标签：java

我有两个线程需要访问 HashMap。我正在使用`synchronized`关键字并`Collections.synchronizedMap()`确保一次只有一个线程可以使用它。

这些线程中的一个必须永不休眠，而另一个可以。我应该在可以休眠的线程、不能休眠的线程中使用`synchronized`和，还是两者都使用？`Collections.synchronizedMap()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T08:59:12.537

在这种情况下，不可能阻止一个`Thread`人睡觉。如果`Thread`优先级较低的 已经在访问`Map`，则无法中断该操作，您将不得不等待。
为了实现安全的并发访问，两者都`Threads`必须使用`synchronized`，或者您可以使用`Collections.synchronizedMap()`包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T09:05:27.407

使用 synchronized 和 Collections.synchronizedMap() 只是为了保护 Map 是多余的。这两个项目的用例可能会有所不同，这就是为什么两者都在您的“工具箱”中。

如果您需要访问 Map 中的某些内容，请检查它，然后可能将其作为一个操作放回原处，同步是您应该使用的。如果您只是获取并添加到地图，Collections.synchronizedMap() 应该就足够了。

从理论上讲，当“高优先级”线程访问但作为哈希映射时，您可以尝试中断“低优先级”线程，它可能没有做太多等待可以中止。

'高优先级'线程是否正在做一些'低优先级'线程没有做的事情？创建地图的副本可能是您需要做的事情，以便始终有一个可读的版本，但它可能会延迟更新。需要更多信息来从不同的方向解决这个问题。

从技术上讲，您的问题的简单答案是否定的。

# javascript - 我怎样才能“逃避”return 语句的范围？

> ID：12025363
> 
> 赞同：-1
> 
> 时间：2012-08-19T08:55:52.647
> 
> 标签：javascript, function, event-handling, return

我需要设置一个事件处理程序，其工作是返回正在设置处理程序的函数，而不是匿名触发器处理程序本身。如何做到这一点？请看下面的代码：

```
if(subFormToServer())
    doSuccessDance();
else
    doErrorStuff();

function subFormToServer(thaGoods) {
  $('<iframe name="subform-target" style="display: none;"></iframe>')
    .bind('load',  function(){ return 0; }) // how to I "pass" these return statements "up" to my function or "escape" them, so to speak, so that what they're returning isn't the load/error handler functions, but actually the subFormToServer function?
    .bind('error', function(){ return 1; })
    .appendTo('body');

 $('<form method="POST" '+
          'action="http://server/formHandler.php" '+
          'target="subform-target"> '+

        '<input name=inputName              value="'+encodeURIComponent(thaGoods)+'">'+

    '</form>')[0]
    .submit();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T09:14:54.800

那是不可能的。考虑这种情况，如果是：

```
// Assume form takes 10 seconds to respond
var x = subFormToServer(...)

// form has neither loaded nor errored yet - what does x contain?
alert(x) 
```

* * *

你最好的选择是：

```
subFormToServer(thaGoods, doSuccessDance, doErrorStuff);

function subFormToServer(thaGoods, worked, didnt) {
    $('<iframe name="subform-target" style="display: none;"></iframe>')
        .on('load',  worked)
        .on('error', didnt)
        .appendTo('body');

    $('<form />', {
        method: "POST",
        action: "http://server/formHandler.php",
        target: "subform-target"
    }).append(
        $('<input />', {
            name: "inputName",
            value: encodeURIComponent(thaGoods)
        })
    ).submit()
} 
```

# c# - C# 静态方法和属性：对象引用未设置为对象的实例

> ID：12025367
> 
> 赞同：3
> 
> 时间：2012-08-19T08:56:22.243
> 
> 标签：c#, .net, static-methods

我正在使用静态方法和属性，当我调用静态方法时，我得到一个`NullReferenceException`.

样本类：

```
internal class Utils
{
    private static Regex[] _allRegexes = { _regexCategory };
    private static Regex _regexCategory = new Regex(@"(?<name>c(ategory){0,1}):(?<value>([^""\s]+)|("".+""))\s*", RegexOptions.IgnoreCase);

    public static string ExtractKeyWords(string queryString)
    {
        if (string.IsNullOrWhiteSpace(queryString))
            return null;   

        _allRegexes[0];//here: _allRegexes[0]==null throw an exception
    }
} 
```

原因：

> _allRegexes[0]==null

我无法弄清楚为什么会发生这种情况，我认为`_allRegexes`应该在调用该方法时进行初始化。

谁能解释一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T09:11:21.637

静态字段按声明顺序初始化。这意味着`_regexCategory`当`null`你初始化`_allRegexes`.

> 类的静态字段变量初始化器对应于一系列赋值，它们按照它们在类声明中出现的文本顺序执行。

*（引自 C# 语言规范版本 4.0 - 10.5.5.1 静态字段初始化）*

这导致`_allRegexes`成为一个包含单个`null`元素的数组，即`new Regex[]{null}`.

`_regexCategory`这意味着您可以通过在您的课程中添加before来修复您的代码`_allRegexes`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T08:58:45.530

它应该是

```
 private static Regex _regexCategory = new Regex(@"(?<name>c(ategory){0,1}):(?<value>([^""\s]+)|("".+""))\s*", RegexOptions.IgnoreCase);
    private static Regex[] _allRegexes = { _regexCategory }; 
```

在您的代码中，`IL`将加载`_regexCategory`到`_allRegexes` 其中是`NULL`因为 IL 从来没有`initialized`它..

当您使用**新**关键字`initalizes`实例化时`_regexCategory`

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T09:11:39.067

此代码在没有 NRE 的情况下工作

```
internal class Utils
{
    private static Regex _regexCategory = new Regex(
        @"(?<name>c(ategory){0,1}):(?<value>([^""\s]+)|("".+""))\s*", 
        RegexOptions.IgnoreCase);
    private static Regex[] _allRegexes = { _regexCategory };

    public static string ExtractKeyWords(string queryString)
    {
        if (string.IsNullOrWhiteSpace(queryString))
            return null;

        //change it to your needs, I just made it compile
        return _allRegexes[0].Match(queryString).Value;
    }
}    

class Program
{
    static void Main(string[] args)
    {
        string result = Utils.ExtractKeyWords("foo");
    }
} 
```

我相信问题出在参数初始化的顺序上。**

# dojo - 将现有节点变成 dijit

> ID：12025368
> 
> 赞同：1
> 
> 时间：2012-08-19T08:56:23.580
> 
> 标签：dojo

将 EXISTING dom 节点（比如我们的 div 元素）转换为给定类的 dijit（保留所有元素属性）的最佳方法是什么？我尝试将节点上的 dojoType 属性设置为给定的 dijit 类，但它似乎不起作用。我正在使用dojo 1.6。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:59:01.473

在运行时还是作为页面引导程序的一部分（控制 html）？

如果您使用标记解析器，节点层次结构可能会稍有变化，这是在您设置 dojoType 时启动的。为避免这种情况，您需要创建一个程序化小部件并将其附加为所述 DOMNode 的子级。所以，你基本上有三个选择

1.  使用 dojo 配置 parseOnLoad:true 并在 source-html 中设置 dojoType 属性
2.  在运行时，在设置 dojoType 后手动调用节点上的解析器
3.  在运行时，通过编程 api 创建类并使用`.placeAt(domNode)`

比如说，你想扩展一个具有 contentpane 布局能力的节点（如果不是布局小部件，没有说 innerHTML 会发生什么，它取决于每个小部件的标记工厂）：

### 在使用标记解析器方法时：

```
<div id="getme" style="background-color:blue">
  Contents
</div>
<script>
  var n = dojo.byId('getme');               n.dojoType="dijit.layout.ContentPane";
  dojo.require("dijit.layout.ContentPane"); dojo.require("dojo.parser");
  dojo.parser.parse(n);
</script> 
```

### 或程序化方法：

```
<div id="getme" style="background-color:blue"></div>
<script>
  dojo.require("dijit.layout.ContentPane");
  var w = new dijit.layout.ContentPane({ href: 'ajaxContents.html' });
  w.startup();
  w.placeAt('getme');
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:16:14.083

还有一种简单的方法是将节点传递给 dijit 构造函数：

```
var nodeToDigitize = dojo.query('#mynode')[0];
new myDijit({prop1: val1, ...}, nodeToDigitize); 
```

# javascript - jquery fancybox2 - 使用 fancybox 加载 div

> ID：12025372
> 
> 赞同：0
> 
> 时间：2012-08-19T08:57:50.630
> 
> 标签：javascript, jquery, fancybox

我有如下表格：

```
<div id='popUpForm' style="display:none;z-index: 999999;">
some content
</div> 
```

和一个`<div id='overlayFormWrapper'></div>`

我想触发 popUpForm 作为一个花式框弹出。我如何实现它？我需要将该 div 的内容加载到 fancybox2 中。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T21:19:16.240

您需要一个指向具有特定`class`或`ID`类似内容的表单的锚点

```
<a class="fancybox" href="#popUpForm">open form in fancybox</a> 
```

然后，您需要`class="fancybox"`使用此自定义脚本将该选择器 ( ) 绑定到 fancybox ...

```
<script type="text/javascript">
$(document).ready(function() {
 $(".fancybox").fancybox({
   width: 480, // or whatever
   height: 320,
   autoSize : false
 }); // fancybox
}); // ready
</script> 
```

可选地，您的表单可能已经通过 CSS 设置了一些尺寸，因此在这种情况下，您不需要设置`width`也不需要`height`在 fancybox 中设置，而`autoSize` 应该设置为`true`.

PS。没看懂是什么角色`<div id='overlayFormWrapper'></div>`

**更新**：要在事件后启动表单（在花式框中），您可以创建一个*函数*：

```
function fancyForm(){
 $.fancybox({
   href     : "#popUpForm",
   autoSize : true,
   fitToView: false
 });
} 
```

然后在您的活动之后调用该*函数*。由于您`form`已经有了尺寸，`autoSize`因此将根据这些尺寸设置 fancybox 尺寸。

# javascript - 学习 d3.js 进行数据可视化

> ID：12025374
> 
> 赞同：47
> 
> 时间：2012-08-19T08:58:35.627
> 
> 标签：javascript, d3.js

我想开始学习使用该`D3.js`软件包进行数据可视化（作为我博士期间的副项目）。我没有`java`经验，但我确实有 OOP 的背景，因为我主要在`python`. 因此，我想知道学习使用 d3 的最佳方法是什么，以及可以向我推荐哪种环境。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-23T06:11:52.240

Scott Murray 的教程是一个很好的起点：[http ://alignedleft.com/tutorials/d3/](http://alignedleft.com/tutorials/d3/)

关于环境，您可能会发现这很有用： http: [//tributary.io](http://tributary.io)。这是一个交互式编码编辑器，旨在帮助您学习 d3。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-28T03:47:08.297

因为我最近发现了它，所以我建议使用[http://phrogz.net/js/d3-playground/](http://phrogz.net/js/d3-playground/)以及一个沙箱，在其中试用并了解这些部件如何协同工作。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-27T16:54:38.203

Scott Murrays 网站是一个很好的开始[http://alignedleft.com/tutorials/d3/](http://alignedleft.com/tutorials/d3/)。

完成此操作后，我可能会建议您查看此网站[http://techslides.com/over-1000-d3-js-examples-and-demos/](http://techslides.com/over-1000-d3-js-examples-and-demos/)，它列出了 1000 个 d3 示例。您通常可以复制 javascript 数据和代码并在您自己的计算机上本地使用它。

您也可以尝试使用这些地块之一，看看是否可以重建它。

我发现这很有用的原因是您需要能够识别 d3 向您抛出的错误。正是在你不知道为什么会出现错误的时候才是麻烦的。通过有一个你正在重构的例子，你可以保证你自己有一份可以工作的代码副本，这样你就可以更容易地纠正自己。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-13T08:12:22.573

我为初学者编写了一些教程来学习**Javascript 和数据可视化**：

[http://blog.vida.io/2014/06/23/coding-visualization-tutorial-1-variables/](http://blog.vida.io/2014/06/23/coding-visualization-tutorial-1-variables/) [http://blog.vida.io/2014/06/23/coding-visualization-tutorial-2-职能/](http://blog.vida.io/2014/06/23/coding-visualization-tutorial-2-functions/)

我发现 wiki 的前四个教程对于学习**D3 基础**非常有用：

[https://github.com/mbostock/d3/wiki/Tutorials](https://github.com/mbostock/d3/wiki/Tutorials)

简介，三个小圆圈，连接思考，选择的工作原理。

我的团队运行[https://vida.io](https://vida.io)。我们对 d3 使用模板方法，允许用户通过 GUI 编辑器快速创建工作文档、上传新数据以及将数据绑定到文档。查看示例以开始使用：

[https://vida.io/explore](https://vida.io/explore)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-12T00:46:41.607

这是我用来学习 d3js 的资源列表。对于 Web 开发的新手来说，官方网站可能有点让人不知所措，所以这里还有一些：

**教程**

*   官方 D3js 网站在[这里有一个很好的示例和教程列表](https://github.com/mbostock/d3/wiki/Tutorials)
*   [Square 在这里](http://square.github.io/intro-to-d3/)登陆时对 D3 有一个很好的快速介绍
*   [Christophe Viau在这里](http://christopheviau.com/d3_tutorial/)有一个很好的一页介绍
*   Jerome Cukier 在 D3 中的“Hello World”，详细介绍了如何设置您的[环境](http://www.jeromecukier.net/blog/2012/09/04/getting-to-hello-world-with-d3/)
*   Scott Murray（左对齐）很好地解释了事情。他也是我强烈推荐的“交互式数据可视化”的作者。教程[在这里](http://alignedleft.com/tutorials/d3/)

**参考**

*   您将看到许多不同的 d3 函数并想知道它们的作用。[在此处](https://github.com/mbostock/d3/wiki/API-Reference)使用官方 API 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-04T14:28:01.407

我已经阅读了许多 d3.js 教程，发现它们令人困惑。当一个人对 HTML 和 CSS 还不是很熟悉时，他们需要对细节进行更多的解释。这些细节在 NRecursions 中有更好的介绍：第 1部分：http://nrecursions.blogspot.in/2014/11/getting-your-head-around-d3js.html 第2
部分：[http](http://nrecursions.blogspot.in/2014/11/getting-your-head-around-d3js.html)
: [//nrecursions.blogspot.in/2014/12 /getting-your-head-around-d3js-part2.html](http://nrecursions.blogspot.in/2014/12/getting-your-head-around-d3js-part2.html)

# html - HTML电子邮件链接颜色困境

> ID：12025376
> 
> 赞同：25
> 
> 时间：2012-08-19T08:58:55.413
> 
> 标签：html, css, html-email, email-client

我设计了一封 HTML 电子邮件，但遇到以下问题：首先，我的整个设计都是基于蓝色的，因此读者/用户无法阅读任何蓝色文本，文本必须是白色的。GMAIL 自动将电话号码和链接涂成蓝色，但主要问题是 Microsoft Outlook OWA。

要修复 GMAIL 中的电话号码和链接着色，我执行了以下操作：

```
<a style="color: #FFFFFF; 
   text-decoration: none" 
   href="#/">
       <span style="color: #FFFFFF; 
                    text- decoration: none">
           1800-000-0000
       </span>
</a> 
```

这非常适用于 GMAIL 和其他任何地方，但正如我提到的，我的大多数客户都使用 Outlook 或 MS OWA（Outlook Web 应用程序）。

OWA 忽略了我在我的内联样式中设置的颜色，并使链接默认为蓝色；这仅在预览电子邮件时发生。如果您真的打开电子邮件，所有样式都会生效。

我的困境是，我该怎么办？我已经放弃了希望，但这是我最后的手段。有没有办法覆盖 Outlook OWA 的链接颜色？我使用了！IMPORTANT，字体标签，嵌套到 5 度。

这里的问题不是 Outlook，而是 OWA。

这是我在 Chrome 中检查元素时的屏幕截图：

![谷歌浏览器开发者面板截图](../Images/98efbcaa16b20ab4de57ffbfc25402cf.png)

这是FF：

![在此处输入图像描述](../Images/1b0a85fd0a30649d524d50188ffdd1b7.png)

有任何想法吗？

请！

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-11-11T19:59:38.223

通过包含声明，您会发现成功，该`<font>`声明在现代 HTML 中已被弃用，但 OWA 的某些版本仍然尊重它：

```
<a style="color: #FFFFFF; text-decoration: none" href="#/">
  <span style="color: #FFFFFF; text-decoration: none">
    <font color="#FFFFFF">1800-000-0000</font>
  </span>
</a> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-08T22:49:04.927

它是 Outlook 的一个已知错误，如果锚标记不包含有效的 URL，则将忽略所述标记的样式。

在这种情况下，添加 !important 的倾向也会对您不利，因为 Outlook 将完全忽略任何以 !important 为后缀的标签。

将 URL 放在锚标记上，或将文本包装在锚内部的 span 标记中，然后将样式放在那里。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-14T04:12:46.253

Outlook Web App (OWA) 链接颜色从内联样式更改。我花了几个小时试图更改/修复 OWA 中的链接颜色，它去除了我正在创建的电子邮件模板的内联样式。我尝试了各种带有 + 标签的技术，但没有成功。终于找到了一些似乎有效的东西：

```
 <a href="http://www.somewebsite.com.au/" target="_blank" style="color:#FFFFFF;">White Link</a> 
```

将其更改为：

```
 <a href="http://www.somewebsite.com.au/" target="_blank" style="color:#FFFFF6;">White Link (almost)</a> 
```

到目前为止似乎还不错。

进一步测试。我把稍微偏离的颜色放在上面，`<td style="color:#FFFFF6;">`然后把正确的颜色放在上面`<a href="http://www.somewebsite.com.au/" target="_blank" style="color:#FFFFFF;">`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-09-06T17:39:43.993

我已经能够通过在`a`标签内放置一个表格来解决这个问题。

```
<a href="">
    <table>
        <tr>
            <td style="color: #FFFFFF">Link text here</td>
        </tr>
    </table>
</a> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-22T21:35:57.933

数字。就在我们已经习惯了由于 Outlook 不支持而无法使用很酷的新电子邮件技巧时，微软向我们抛出了 OWA，其中包含大量新错误。

我们通过对链接应用 a`display:inline-block`来绕过其糟糕的链接样式。这至少摆脱了下划线。我不知道为什么。

在尝试将链接样式设置为与父元素相同的颜色时，我们遇到了另一个错误。由于某种原因，使父元素的颜色不同修复了它。向上或向下改变一个字符通常会给你一个非常接近的颜色。

```
<td style="color:#CCCCCD">
<a href="http://mylink" style="display:inline-block; color:#CCCCCC">Link</a>
</td> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-19T21:44:14.877

我使用了以下内容，它在 Outlook 2007、2010、2013 和 Outlook.com 中运行良好。我会尽快与 OWA 核实。

```
#outlookLink {text-decoration: none; color: #ffffff !important}
<a href="" id="outlookLink" name="Anchor" style="text-decoration: none; color: #ffffff !important;">Your text and link here.</a> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-20T11:49:10.840

我还注意到，对于 OWA，属性中的项目*顺序*`style=`可能是相关的。我在使用时看到了一些案例：

```
<a href="/some_url" style="text-decoration: none; color: inherit;">...</a> 
```

会导致 OWA 剥离`color`属性（但保留 `text-decoration），但会颠倒顺序，例如：

```
<a href="/some_url" style="color: inherit; text-decoration: none;">...</a> 
```

将使OWA保留两者。我看不出这有什么意义，但事实就是这样……

我还看到标签的上下文会影响这种样式剥离：我上面提到的剥离是在 a 标签前面有`h2`标签时触发的，但是删除它`h2`也会阻止 OWA 剥离标签（我没有但是，调查了这种情况何时或为何发生，只是想指出上下文也可能与此处相关）。

我意识到这些都不是对原始问题的直接答案，但我想这对其他有类似问题的人会有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-07-30T04:06:36.713

```
<a href="#" style="color: #FFF;">
  <strong style="color: #FFF; font-weight: normal;">Example Link</strong>
</a> 
```

它对我有用！确保使用`<strong>`，我尝试使用其他标签，但没有奏效。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-05T04:00:11.893

When sending html emails the best practice is to stick to old HTML3 and HTML4. Email clients do not play well with CSS2 and up. Inline CSS work much better.

Instead of:

```
<a style="color: #FFFFFF; text-decoration: none" href="#/">
 <span style="color: #FFFFFF; text- decoration: none">1800-000-0000</span>
</a> 
```

By the way, you have syntax errors in this line, after each css declaration you need a ;

Corrected:

```
<a style="color: #FFFFFF; text-decoration: none;" href="#">
  <span style="color: #FFFFFF; text- decoration: none;">1800-000-0000</span>
</a> 
```

Try this:

```
<a color="#FFFFFF" text-decoration="none" href="#">
  1800-000-0000
</a> 
```

Do not forget to specify the HTML version on the DOCTYPE.

I've found myself working in both sides of this situation. I worked on a web based email client using PHP with IMAP, I had to strip HTML emails of a lot of things because they'd break not only the layout of the app but also the intended behavior of buttons and forms. How? you might ask. With a desktop email client this probably wouldn't be a problem but with a web based email client loading external css/js files can result into a very large array of potential pitfalls and nasty bugs.

On another occasion I was working on wedding invitations sent over HTMl emails, The amount of inline css we had to do was ridiculous. To make it work on you have to use mostly HTML3 and maybe a bit of HTML4 but not too much.

I recommend you to experiment with tables and deprecated HTML3 inline css.

* * *

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-24T13:38:56.533

OWA 实际上正在剥离 a-tag 的所有样式，包括您包含的 span-tag 的样式。您可以在头部添加样式，但同样，OWA 忽略了超链接的这一点。我在头部添加了 a、a:link、a:visited 的样式，颜色与 a-tag 和包含 span-tag 中的颜色相同。结果？我的链接文本是彩色的，但下划线仍然是默认的蓝色。线索：我没有线索。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-23T14:13:12.830

尝试`my-link`为每个有问题的链接添加一个类，并在您的`style`标签中添加以下 CSS：

```
.my-link a,
a[x-apple-data-detectors] {
  color:inherit !important;
  text-decoration: underline !important;
} 
```

这通常涵盖了我的事情。如果失败了，这里有一个更重的代码版本：

```
.my-link a,
a[x-apple-data-detectors] {
    color: inherit !important;
    text-decoration: none !important;
    font-size: inherit !important;
    font-family: inherit !important;
    font-weight: inherit !important;
    line-height: inherit !important;
} 
```

[资源](https://litmus.com/community/snippets/8-remove-blue-links-on-apple-devices)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-12-21T09:10:48.313

截至今天 21-12-2017，这个问题仍然相关。我在 Outlook、Gmail 中的代码没有问题，但在 Outlook Web App 中没有。我不得不使用这个过时的标签来解决它。

```
<a class="app-link" style="font-size:14px; color:#ff6600 !important; text-decoration:underline;" href="https://somesite/something/"><font color="#ff6600 !important;"> Gå til app</font></a> 
```

奇怪的是，超链接中的样式不适用于 Outlook Web App（OWA），因此，添加`<font color="#ff6600 !important;">`工作！奇怪，但这就是微软想要取笑我们的方式！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-07T13:44:18.857

我看到了这个线程并尝试了上面的选项。TD hack 可以更改十六进制代码，但如果有人想尝试，我只是偶然发现了一个不错的解决方案：

```
<div style="text-decoration: none;">
<a href="LINK" style="display: inline-block; color: #878f93; text-decoration: none;">LINK TEXT</a>
</div> 
```

OWA 支持将 DIV 设置为文本装饰 NONE。我个人被要求删除下划线，所以对我来说它是完美的。

我希望人们觉得这很有用。感谢所有添加解决方案的人。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2019-10-04T00:43:38.553

**

# 支持伪 CSS（2007、2010、2016、2017 等）

## 这就像一个黑客，因为它不支持。

```
<a href="#" target="_blank" style="font-size:20px;">
   <strong style="color:#ffffff;">@Model.TelephoneTextHtml</strong>
</a> 
```

# java - Project Euler #3 在 Java 中需要很长时间

> ID：12025378
> 
> 赞同：4
> 
> 时间：2012-08-19T08:59:35.077
> 
> 标签：java, primes, prime-factoring

Project Euler 的问题 #3 是：

> 13195 的质因数是 5、7、13 和 29。
> 
> 数字 600851475143 的最大质因数是多少？

我的解决方案需要永远。我认为我得到了正确的实施；但是，当使用大数字进行测试时，我无法看到结果。它永远运行。我想知道我的算法是否有问题：

```
public class LargestPrimeFactor3 {

    public static void main(String[] args) {
        long start, end, totalTime;
        long num = 600851475143L;
        long pFactor = 0;

        start = System.currentTimeMillis();

        for(int i = 2; i < num; i++) {
            if(isPrime(i)) {                
                if(num % i == 0) {
                    pFactor = i;                        
                }
            }
        }

        end = System.currentTimeMillis();
        totalTime = end - start;
        System.out.println(pFactor + " Time: "+totalTime);
    }

    static boolean isPrime(long n) {

        for(int i = 2; i < n; i++) {
            if(n % i == 0) {
                return false;
            }
        }        
        return true;
    }     
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T09:17:21.307

尽管不是在 Java 中，但我认为您可能可以理解以下内容。基本上，只需要测试奇数除数和一个数字的平方根来减少迭代。这是一种蛮力方法，可以在 C# 中立即产生结果。

```
static bool OddIsPrime (long oddvalue)  // test an odd >= 3 
{
    // Only test odd divisors.
    for (long i = 3; i <= Math.Sqrt(oddvalue); i += 2)
    {
        if (value % i == 0)
            return false;
    }
    return true;
}

static void Main(string[] args)
{
    long max = 600851475143;   // an odd value
    long maxFactor = 0;

    // Only test odd divisors of MAX. Limit search to Square Root of MAX.
    for (long i = 3; i <= Math.Sqrt(max); i += 2)
    {
        if (max % i == 0)
        {
            if (OddIsPrime(i))  // i is odd
            {
                maxFactor = i;
            }
        }
    }
    Console.WriteLine(maxFactor.ToString());
    Console.ReadLine();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T22:30:24.833

您应该在找到每个因素时对其进行*划分*。那么就不需要测试它们的素数了，当我们按升序枚举可能的除数时（任何这样找到的除数都不能是复合的，它的因子已经被除掉了）。然后您的代码变为：

```
class LargestPrimeFactor4 {

    public static void main(String[] args) {
        long start, end, totalTime;
        long num = 600851475143L;   // odd value is not divided by any even
        long pFactor = 1L;

        start = System.currentTimeMillis();

        for(long i = 3L; i <= num / i; ) 
        {
            if( num % i == 0 ) {
                pFactor = i;
                num = num / i;
            }
            else {
                i += 2;
            }
        }
        if( pFactor < num ) { pFactor = num; }

        end = System.currentTimeMillis();
        totalTime = end - start;
        System.out.println( pFactor + " Time: " + totalTime);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T09:16:34.113

```
public HashSet<Integer> distinctPrimeFactors(int n) //insane fast prime factor generator
{
    HashSet<Integer> factors = new HashSet<Integer>();
    int lastres = n;
    if (n==1)
    {
        factors.add(1);
        return factors;
    }
    while (true)
    {
        if (lastres==1)
            break;
        int c = 2;
        while (true)
        {
            if (lastres%c==0)
                break;
            c++;
        }
        factors.add(c);
        lastres/=c;
    }
    return factors;
} 
```

如果您想为一个数字快速生成不同的素因子，请使用此方法，这会使每次迭代的数字更小。您可以将 int 更改为 long，它应该适合您。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T14:07:53.163

这是通过试除法进行整数分解的伪代码：

```
define factors(n)

    z = 2

    while (z * z <= n)

        if (n % z == 0)
            output z
            n /= z

        else
            z++

    output n 
```

理解这一点的最简单方法是举个例子。考虑 n = 13195 的因式分解。最初 z = 2，但 13195 除以 2 余数为 1，因此 else 子句设置 z = 3 并循环。现在 n 不能被 3 或 4 整除，但是当 z = 5 时，13195 除以 5 的余数为零，因此输出 5 并将 13195 除以 5，因此 n = 2639 和 z = 5 不变。现在新的 n = 2639 不能被 5 或 6 整除，但可以被 7 整除，所以输出 7 并设置 n = 2639 / 7 = 377。现在我们继续 z = 7，留下余数，除法也是乘以 8、9、10、11、12，但 377 / 13 = 29 没有余数，所以输出 13 并设置 n = 29。此时 z = 13，且 z * z = 169，即大于 29，所以 29 是素数，是 13195 的最终因数，所以输出 29。完整的因式分解为 5 * 7 * 13 * 29 = 13195。

有更好的整数因式分解算法使用试除法，甚至更强大的整数分解算法使用除试除法以外的技术，但上面显示的算法将帮助您入门，并且对于 Project Euler #3 来说已经足够了。当您准备好更多时，请看[这里](http://programmingpraxis.com/contents/themes/#Prime%20Numbers)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T09:12:47.600

提高性能的两件事：

```
static boolean isPrime(long n)
{
    for(int i = 2; i <= sqrt(n); i++)  // if n = a * b, then either a or b must be <= sqrt(n).
    {
        if(n % i == 0)
        {
            return false;
        }
    }        
    return true;
} 
```

现在进入主循环

```
for(int i = num; i > 1; i--) // your interested in the biggest, so search from high to low until you have a match
{
    if(num % i == 0 && isPrime(i)) // check for num % i == 0 is faster, so do this first
    {
        pFactor = i;
        break; // break if you have a factor, since you've searched from the top
    }
} 
```

这里仍有一些可以改进的地方，但那是你自己去发现的。想着修改`num`。玩得开心项目 Euler :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-11T07:11:05.937

您可以只对数字进行质因数分解，然后最大的质因数就是答案：

```
import java.util.ArrayList;
import java.util.Collections;

public class PrimeFactorization {

    /* returns true if parameter n is a prime number, 
         false if composite or neither */
    public static boolean isPrime(long n) {
        if (n < 2) return false;
        else if (n == 2) return true;
        for (int i = 2; i < Math.pow(n, 0.5) + 1; i++)
            if (n % i == 0)
                return false;
        return true;
    }

    /* returns smallest factor of parameter n */
    public static long findSmallestFactor(long n) {
        int factor = 2; // start at lowest possible factor
        while (n % factor != 0) { // go until factor is a factor
            factor++; // test the next factor
        }
        return factor;
    }

    /* reduces the parameter n into a product of only prime numbers
       and returns a list of those prime number factors */
    public static ArrayList<Long> primeFactorization(long n) {

        ArrayList<Long> primes = new ArrayList<Long>();
          // list of prime factors in the prime factorization
        long largestFactor = n / findSmallestFactor(n);    

        long i = 2;
        while (i <= largestFactor) { 
          // for all possible prime factors 
          // (2 - largest factor of the number being reduced)

            if (isPrime(i) && n % i == 0) { 
                // if this value is prime and the number is divisible by it

                primes.add(i); // add that prime factor to the list
                n /= i; // divide out that prime factor from the number 
                        // to start reducing the new number
                largestFactor /= i; // divide out that prime factor 
                       // from the largest factor to get the largest 
                       // factor of the new number
                i = 2; // reset the prime factor test
            } else {
                i++; // increment the factor test
            }
        }

        primes.add(n); // add the last prime number that could not be factored
        Collections.sort(primes);
        return primes;
    }
} 
```

然后这样称呼它：

```
ArrayList<Long> primes = PrimeFactorization.primeFactorization(600851475143L);
System.out.println(primes.get(primes.size() - 1)); 
```

整个过程只需要几毫秒。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-26T16:39:10.793

这不是完美的解决方案，但它适用于 600851475143。

```
public static void main(String[] args) {
    long number= 600851475143L;
    int rootOfNumber = (int)Math.sqrt(number)+10;
    for(int i = rootOfNumber; i > 2; i--) {
        if(number % i == 0) {
            if(psudoprime(i)) {
                System.out.println(i);
                break;
            }
        }
    }

}

public static boolean psudoprime(int num) {
    for(int i = 2; i < 100; i++) {
        if(num % i == 0) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-05-11T05:45:11.933

```
public class LargestPrimeFactor {
    static boolean isPrime(long n){
        for(long i=2;i<=n/2;i++){
            if(n%i==0){
                return false;                                               
            }
        }
        return true;    
    }

    static long LargestPrimeFact(long n){
        long largestPrime=0;
        for(long i=2;i<Math.sqrt(n)/2;i++){
            if(n%i==0){
                if(isPrime(i)){
                    largestPrime=i;
                }
                }                                       
            }
        return largestPrime;
    }
    public static void main(String args[]) {
        System.out.println (LargestPrimeFact(600851475143L));
    }
} 
```

资料来源： [http ://crispylogs.com/project-euler-problem-3-solution/](http://crispylogs.com/project-euler-problem-3-solution/)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-08-11T13:14:13.767

**这个完美的工作！**

```
public class Puzzle3 {
public static void main(String ar[])
{
    Long i=new Long("1");
    Long p=new Long("600851475143");
    Long f=new Long("1");
    while(p>=i)
    {
        if(p%i==0)
        {
            f=i;
            p=p/i;
            int x=1;
            i=(long)x;
        }
        i=i+2;
    }
    System.out.println(f);
} 
```

}

# asp.net-mvc - 带有 knockout.js 的 MVVM 中的最佳实践是什么：为每个表单使用域类、DTO 或自定义模型

> ID：12025385
> 
> 赞同：1
> 
> 时间：2012-08-19T09:00:34.377
> 
> 标签：asp.net-mvc, mvvm, knockout.js, dto

我正在使用 knockout.js 和 ASP.MVC 制作一个 MVVM 网站。

在我遇到复杂的 Web 表单之前，这里的一切似乎都很简单。我有一组代表我的域模型对象的 DTO 类。

我正在创建的表单非常复杂，并且不反映我域中的 DTO。所以我在这里有两个选择：

1.  手动创建一个代表我的表单数据的自定义模型类。创建返回/接受此类的 REST 方法，并使 viewmodel 使用此类以从表单中填充/收集数据。

2.  使用仅返回/接受域 DTO 的明确 REST 方法。使用 JavaScript 来调用 REST 方法、获取 DTO 并为 JavaScript 中的表单数据绑定创建复杂对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T09:28:04.123

您的 ViewModel 是*“您的视图的模型”*，因此其界面应密切反映客户端 UI。这意味着视图模型应该调整您的 DTO 以呈现此界面。

# qt - 使用 pyside 和 QtDesigner 损坏的图像路径

> ID：12025389
> 
> 赞同：1
> 
> 时间：2012-08-19T09:00:43.073
> 
> 标签：qt, pyside, qt-designer

我在 QtDesigner 中使用一些自定义背景图像设置了一些复选框的样式，但我发现当我在 pyside 中加载 .ui 文件时，图像不会显示。估计是路径问题。下面是我的文件结构的图像，调用 .ui 文件的 Python 脚本是 test.py。

![文件结构](../Images/d323313387ad3c6473efb48377a73782.png)

这里也是 images.qrc 的内容

```
<RCC>
  <qresource>
    <file>B_active.png</file>
    <file>Button_down_icon.png</file>
    <file>Button_up_icon.png</file>
    <file>B_inactive.png</file>
    <file>A_inactive.png</file>
    <file>A_active.png</file>
    <file>R_icon.png</file>
    <file>toolbar_bg.png</file>
  </qresource>
</RCC> 
```

以及引用图像的样式：

```
#A_button_grp QRadioButton{
    background-image: url(:/A_inactive.png);
}
#A_button_grp QRadioButton:checked{
    background-image: url(:/A_active.png);
} 
```

我应该在这里做些什么不同的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:18:26.823

看起来您需要编译资源模块：

```
pyside-rcc -o resource_rc.py src/images.qrc 
```

请注意，如果`ms_image_viewer.py`是由 生成的`pyside-uic`，则资源模块*必须*命名`resource_rc.py`并保存在同一目录中。

# git - 为 git ssh 设置公钥加密

> ID：12025391
> 
> 赞同：2
> 
> 时间：2012-08-19T09:00:57.013
> 
> 标签：git, version-control, github, public-key-encryption, ssh-keys

我想设置对我的 git shell 应用程序（windowspowershell v1.0）的公钥访问。[它是github for windows](http://windows.github.com/)应用程序附带的 shell 应用程序。

我想将提交推送到远程 CentOS Web 服务器上的裸存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:18:23.897

只需将您的密钥对放入`%USERPROFILE%/.ssh/`，然后将您的公钥上传到服务器`~/.ssh/authorized_keys`。

# iphone - iOS - 将数组对象的副本复制到另一个

> ID：12025394
> 
> 赞同：3
> 
> 时间：2012-08-19T09:01:39.377
> 
> 标签：iphone, ios, ios5, nsmutablearray, nsarray

我有一个小问题，我需要帮助。

我想遍历一个多维数组，每次我找到一个等于 ex 的键 ex."name" 的值。“你好”。我想将该数组对象复制到另一个数组中。

我怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T09:08:28.703

你会这样做：

```
NSArray* newArray = [NSArray arrayWithArray:oldArray] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T09:37:18.043

我假设您有一个二维数组，并且由于我不知道数组中的对象看起来如何，因此我采用了`id`类型和方法`valueForKey`：

```
 NSMutableArray *tmp = [[NSMutableArray alloc] init];
 for(NSArray *dim1Array in yourMultidimensionalArray)
 {
    for(id obj in dim1Array)
    {
       if([[obj valueForKey:@"name"] isEqualToString:@"Hello"])
       {
          [tmp addObject:dim1Array];
          break; // I assume you only want to add it once
       }
    }
 } 
```

# java - IndexOutOfBoundsException Java 后重启

> ID：12025399
> 
> 赞同：-2
> 
> 时间：2012-08-19T09:03:09.340
> 
> 标签：java, loops, while-loop, indexoutofboundsexception

我有一个 IndexOutOfBoundsException，当发生这种情况时，我想重新启动我的程序或跳回我的 while 循环。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T09:06:15.910

您可以将循环包装在循环和 try/catch 块中：

```
boolean done = false;
while (!done) {
    try {
        doStuff();
        done = true;
    } catch (IndexOutOfBoundsException e) {
    }
} 
```

在这段代码中，`doStuff()`是你的循环。您可能还需要做一些额外的簿记，这样您就不会永远重复异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T09:20:31.260

在我看来，你不应该使用 catch 语句。您正在考虑将 indexOutOfBoundsException 作为正常程序流程的一部分。

在某些情况下可能会发生此错误。例如，它可能是一组未完全填写的字段。我的解决方案是测试导致您的异常的情况并采取适当的行动。

```
if (fieldsNotCompleted()){
    restart(); // or continue; or ...
} else {
    while ( ... ) {
        doSomething();
    }
} 
```

这样，您可以使您的程序更具可读性并且更易于修复。您也根据情况采取行动，而不是针对出现的一些您不确定原因的神奇错误。错误捕获不应该是正常程序流程的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T09:06:32.203

您的问题非常笼统，但通常您使用该`catch`语句来继续您的程序流程。

如果要重新启动程序，请将其执行包装在启动脚本中，如果程序以`IndexOutOfBoundsException`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T09:09:17.290

您可以使用 try 和 catch 块：

```
while (condition) {
try {

 // your code that is causing the exception

  } catch (IndexOutOfBoundsException e) {

    // specify the action that you want to be triggered when the exception happens
   continue; // skipps to the next iteration of your while 

 } 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T09:10:01.493

好吧，很难确切地看到需要做什么才能跳回您的 while 循环。但：

当 IndexOutOfBoundsException 发生时，您可以捕获它并执行您需要的操作，例如：

```
public static void actualprogram() {
  // whatever here
}

public static void main(String args[]) {
  boolean incomplete = true;
  while (incomplete) {
    try {
      actualprogram();
      incomplete = false;
    } catch (IndexOutOfBoundsException e) {
      // this will cause the while loop to run again, ie. restart the program
    }
  }
} 
```

# mysql - 像 MySQL 触发器一样的东西，但作为一个整体？

> ID：12025401
> 
> 赞同：3
> 
> 时间：2012-08-19T09:05:17.890
> 
> 标签：mysql, sql, triggers

```
CREATE TRIGGER `after_customer_insert`
AFTER INSERT ON `customer`
FOR EACH ROW BEGIN
    UPDATE `user`
    SET
        `customers_count` = `customers_count` + 1
    WHERE `id` = NEW.`user_id`;
END$$ 
```

与其调用`UPDATE user`中的每个新行`customer`，不如将触发器作为一个“整体”？我的意思是

```
CREATE TRIGGER `after_customer_insert`
AFTER INSERT ON `customer`
BEGIN
    UPDATE `user`
    SET
        `customers_count` = (
            SELECT COUNT(`id`)
            FROM `customer`
            WHERE `user_id` = `id`
        )
END$$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T09:18:36.123

正如 Jake 所指出的，触发器主要用于执行与*单行更改相关的操作，通常是更改另一行。*当然，您可以实现（冗余地）对更新的每一行的大致相同结果集执行相同操作的逻辑，但问题是，为什么您不在`UPDATE`原始语句之后发出单个语句`UPDATE`？你可能有一个很好的理由，因此杰克关于整体情况的问题。

例如（语法*未*测试，但总体思路成立）

```
UPDATE u set u.customer_count = x.newcount
from
user u inner join 
(
select user, count(*) as newcount
from user group by customer_id
) x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T09:11:56.187

好吧，它会起作用，因为我自己做过一次。每次发生新插入时，我都会在桌子上订购一些东西，但在我看来，这不是一个好习惯。您的代码可能会有所改进，这将为您省去这个麻烦。

此外，即使此触发器将处理表上的所有行，它也会在每次 INSERT 发生时被调用......

您能否提供一个总体情况描述，也许我可以帮助您找到更好的解决方案... :-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T09:30:40.743

可能需要这种类型的触发器的唯一情况是查询：

```
INSERT INTO customer SELECT * FROM customer_old; 
```

但是对于这种情况，您可以在查询之前禁用触发器，执行插入更新并重新启用触发器。

我非常怀疑您是否经常一次插入多个客户。或者即使这是真的，你也试图过早地进行优化。

# ios - 通过 Core MIDI 连接两台 iPad

> ID：12025409
> 
> 赞同：0
> 
> 时间：2012-08-19T09:06:32.040
> 
> 标签：ios, objective-c, midi, coremidi

我在 iPad 应用程序中使用 PGMidi 从桌面应用程序接收 MIDI 命令。我将 useNetwork 标志设置为 YES，然后使用音频 MIDI 设置实用程序连接台式计算机。奇迹般有效。

现在我想开发一个 iPad 应用程序，它可以将 MIDI 命令发送到单独设备上的另一个 iPad 应用程序。我无法弄清楚如何通过 Core MIDI 连接两台 iPad。

当设置了 useNetwork 标志时，它会创建一个网络源和目标。我会假设我可以将两个设备都连接到网络会话，但连接两个设备上的端点不允许通信。然后我在 PGMidi 之外设置了我自己的虚拟端点，但其他设备也看不到这些端点。

我想要做的甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:40:14.597

是的，您尝试做的事情是可能的，但这需要更多的工作。基本上，一台 iPad 需要成为另一台 iPad 的客户端。为此，客户端 iPad 必须浏览并选择您想要连接的 iPad。这是通过 Bonjour 和 NSNetServiceBrowser 完成的。

[您可以在http://antifluke.blogspot.com/2011/05/network-midi-on-ios-part-2.html](http://antifluke.blogspot.com/2011/05/network-midi-on-ios-part-2.html)找到一些方便的代码。它并不能做所有事情，但您可能能够获取其中的一部分并将其实施到 PGMidi 中。

# ajax - 如何使用 Javascript Google API 下载电子表格？

> ID：12025410
> 
> 赞同：0
> 
> 时间：2012-08-19T09:06:33.370
> 
> 标签：ajax, google-drive-api, cors

基本上面临与“[如何使用 javascript 中的导出链接使用 Drive SDK 下载 Gdoc？](https://stackoverflow.com/questions/11883057/how-do-i-use-exportlinks-from-javascript-to-download-a-gdoc-using-drive-sdk/12004528#comment16019923_12004528) ”相同的问题。

所以这意味着我不能从我的网站进行 Ajax 调用来下载 Google 电子表格并将其用作数据库？

我可以使用我的驱动器中的 downloadUrl 下载图像，并且它可以正常工作。

有人可以告诉我如何针对我引用的问题中提到的上述问题执行 iframe 代理解决方法吗？

```
$.ajax({url:'https://spreadsheets.google.com/feeds/download/spreadsheets/Export?
      key='+fileid+'&exportFormat=csv&v=3&access_token='+accToken.access_token,
      crossDomain:'true',}).
      done(  function(data){alert(data);}); 
```

我收到以下错误：

```
XMLHttpRequest cannot load https://spreadsheets.google.com/feeds/download/spreadsheets/Export?      key=ABCDEF&exportFormat=csv&v=3&access_token=acctokenhere. Origin http://mywebsite.in is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:47:37.600

Another but restricted solution is to create an [application for Google Chrome](https://developers.google.com/chrome/apps/docs/developers_guide) if your spreadsheet hasn't to be viewed by an anonymous.

With a Google Chrome application, you can override the limits of Access-Control-Allow-Origin by adding url permissions in your manifest.

If you need some help on this subject, I can help you :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:34:29.223

Google 尚未启用 CORS，所以为什么不通过您的服务器代理请求并使用 Ajax 将其提供给您的页面，您不会遇到 Access-Control-Allow-Origin 的问题。

# android - 在 Android 中，您可以设置一个默认应用程序，而不是在启动新活动时要求用户从列表中进行选择吗？

> ID：12025413
> 
> 赞同：2
> 
> 时间：2012-08-19T09:07:16.713
> 
> 标签：android, android-activity, contacts

我正在设计一个需要通过搜索打开联系人应用程序的应用程序。我正在使用代码：

```
Intent intent = new Intent(Intent.ACTION_SEARCH);
intent.putExtra(SearchManager.QUERY, name); 
startActivity(intent); 
```

我遇到的问题是这会打开应用程序选择器并显示大约 40 个应用程序供用户选择，这可能会造成混淆。有没有办法自动将联系人应用程序设置为默认值，甚至最小化列表？

我试过使用命令：

```
intent.setData(ContactsContract.Contacts.CONTENT_URI); 
```

这似乎适用于其他类型的联系人相关活动，例如 ACTION_VIEW，但是当我将它添加到 ACTION_SEARCH 意图时，应用程序只会崩溃。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:00:01.073

我不相信这是您可以设置为应用程序开发人员的东西，因为这会覆盖所有其他类似同类应用程序。因此，这仅设置为用户选择。

这解释了用户如何将应用设置为默认状态。 [http://www.howtogeek.com/howto/43135/how-to-change-the-default-application-for-android-tasks/](http://www.howtogeek.com/howto/43135/how-to-change-the-default-application-for-android-tasks/)

不，我不相信无论如何可以覆盖它。剥夺用户的选择权是一件坏事，你会冒着很多人开始设置和评价你的应用程序的风险。

我已经多次阅读您的问题，每次我都意识到您在问一些不同的问题。我仍然认为这个链接可能会让你走上正轨，它回答了一个类似的问题。

[如何调用安卓联系人列表？](https://stackoverflow.com/questions/866769/how-to-call-android-contacts-list)

它的要点似乎是您需要使用此行直接定位联系人应用程序

```
Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T12:06:47.513

尽管我同意 Emile 的观点，即这与 Android 的工作方式背道而驰，但有一种方法可以让您创建自己的选择器，甚至制作一个默认应用程序来触发该意图。制作默认应用意味着您将在您的应用共享首选项中指定该应用。

更多关于[不同线程的信息。](https://stackoverflow.com/questions/9719125/sensibly-setting-default-app-through-chooser-preference-etc-for-action-send)

# javascript - Firebug 10.0.2——监控 XMLHttpRequests 的错误

> ID：12025424
> 
> 赞同：0
> 
> 时间：2012-08-19T09:09:40.423
> 
> 标签：javascript, xmlhttprequest, firebug

我注意到一些奇怪的东西，我认为这是 Firebug 中的一个错误。

我尝试进行 AJAX 调用，没有任何 jquery，只是普通的 javascript。如果请求被重定向，在我的例子中来自：

```
http://localhost/project/en/?tmpl=ajax 
```

至：

```
http://localhost/project/?tmpl=ajax 
```

比萤火虫控制台显示第二个（重定向的）请求从未像这样完成：

![永无止境的请求](../Images/aeaeea964f37b247fdef5545f7c00b32.png)

所以 ajax 加载器图标永远不会停止转动。当我尝试其他一些 console.log()s 时，firefox 在尝试单击记录的对象时甚至崩溃了。

我尝试的下一步很简单：禁用对请求的监视，将事件添加到 XMLHttpRequest 对象并记录事件。（我通过 addEventListener添加[了此处指定的事件）。](http://dvcs.w3.org/hg/progress/raw-file/tip/Overview.html)

这导致以下输出：

![记录的请求事件](../Images/76981d15bd6dca7f5d777399a535fe2a.png)

所以，一切似乎都很好，因为在 net-monitoring-tab 中我可以看到请求应该已经正确完成。但是查看第二个请求的响应表明没有任何内容，并且单击其中一个记录的事件对象使 firefox 再次崩溃。

我这是 Firefox 中的一个错误，还是我在服务器端犯了一个可怕的错误？

编辑：：

我忘了提到我什至用 jquery.ajax() 方法尝试了所有这些。在萤火虫控制台中同样永无止境的请求日志。

# java - java.lang.IllegalStateException 调用 requestdispathcher.forward(request.respone);

> ID：12025430
> 
> 赞同：0
> 
> 时间：2012-08-19T09:11:36.797
> 
> 标签：java, servlets

```
try {

    PaperDAOImpl objPaperDAOImpl = new PaperDAOImpl();
    AuthorDAOImpl objAuthorDAOImpl = new AuthorDAOImpl();
    List<papersBean> listPaperBean = new ArrayList<papersBean>();
    List<List<Author>> listOfListAuthor = new ArrayList<List<Author>>();

    String title = null;
    String author = null;

    if (request.getParameter("searchtitle") != null) {
        title = request.getParameter("title").trim();
        if (title.trim().equals("")) {
            String error = " You must choice option search";
            request.setAttribute("error", error);

        } else {
            listPaperBean = objPaperDAOImpl.SearchPaperByTitle(title
                    .trim());
            request.setAttribute("listresult", listPaperBean);
            // Get List Author Name , List

            if (!listPaperBean.isEmpty()) {

                for (int i = 0; i < listPaperBean.size(); i++) {
                    List<Author> listAuthor = objAuthorDAOImpl
                            .GetListAuthorByIdPaper(listPaperBean
                                    .get(i).getIdPaper());
                    if (listAuthor != null) {
                        listOfListAuthor.add(listAuthor);
                    }
                }
                int size = 0; // for debug
                size = listOfListAuthor.size(); // for debug

                request.setAttribute("lolAuthor", listOfListAuthor);
                RequestDispatcher rd = request
                        .getRequestDispatcher("front-end/search.jsp");
                rd.forward(request, response);
                return;

            }
        }
    }

} catch (ServletException e) {
    e.printStackTrace();
}

finally {

} 
```

* * *

这是用于搜索数据的 MyServlet。

当我调试到 util 行时：

```
 `RequestDispatcher rd = request.getRequestDispatcher("front-end/search.jsp");` 
```

一切还好。并且 `"listOfListAuthor" , "listPaperBean"`有数据......但是当调试到 row 时：

`rd.forward();`---> 我有一个问题我仍然无法解决。

```
**Aug 19, 2012 3:48:52 PM org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet jsp threw exception
java.lang.IllegalStateException
at managerpapers.system.servletController.FESearchTitle.processRequest(FESearchTitle.java:73)--This is rows : `rd.forward()`;** 
```

这是用于搜索数据的 MyServlet！我为此调试了一整天。这是我的论文。A 不了解 servlet master 。有人有什么主意吗 ？

这是用于搜索数据的 MyServlet！我为此调试了一整天。这是我的论文。A 不了解 servlet master 。有人有什么主意吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T09:45:42.443

正如[Javadoc](http://www.oracle.com/technetwork/java/javaee/servlet/index.html#getRequestDispatcher%28java.lang.String%29) servletContext 的requestDispatcher 中所说，必须以“/”开头，并被解释为相对于当前上下文根。
所以而不是：
`RequestDispatcher rd = request.getRequestDispatcher("front-end/search.jsp");`

尝试这个 ：
`RequestDispatcher rd = request.getRequestDispatcher("/front-end/search.jsp");`

我希望它会帮助你

# html - 如何修复溢出时的表格布局：自动

> ID：12025437
> 
> 赞同：2
> 
> 时间：2012-08-19T09:13:16.047
> 
> 标签：html, css

我有一张简单的桌子。我想使用简单的 CSS 和我的大脑制作一个可滚动的`tbody`.

我知道这个主题被讨论过很多次，但我没有看到其他问题的解决方案。

如果`tbody`是可滚动的，则滚动出现在右侧，`tbody`在这种情况下，会使我的表格和单元格变形。

示例 -> [JsFiddle](http://jsfiddle.net/Fg3Ge/)（我避免发布巨大的 HTML 代码和 CSS 代码）。

当滚动条出现时，您会看到`tbody`单元格变形。

我有两个问题：

1.  为什么表格单元格变形？因为`table-layout: fixed`？

2.  为什么如果我放置 `.ov { height: 30%; overflow: auto; }`而不是`.ov { height: 30px; overflow: auto; }`，滚动条不会出现并且 tbody 高度变满。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:00:39.327

好吧，我需要处理的一些表也有同样的问题，但在 IE 中它们有点棘手。使用相同的代码，我在 jsfiddle 中添加了两种 CSS 样式，并在其中一个引用我的新 css 类的 HTML 元素中添加了一个类。这是链接：[jsfiddle](http://jsfiddle.net/UNCeM/)

这是我添加的代码（请原谅蹩脚的 css 类名）。

```
thead td { width: 49px; }
.extra { width: 67px; vertical-align: top } 
```

我把这个类放在标题部分的第三列

```
<td class="extra">Column 3</td> 
```

我在 FireFox（最新版本）中对此进行了测试。唯一的问题是第三列的标题字段更大，因为它包括滚动条的宽度。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T09:26:28.590

这是很正常的。卷轴出现在您的`tbody`. 但是滚动条需要一些空间来显示它的按钮，这就是它推动你的单元格的原因。`table-layout: fixed`在这里没有任何作用。您可以尝试从小提琴中删除该行。最好尝试一些 JavaScript 滚动条解决方案。

# sencha-touch - sencha touch 2中模态对话框的位置

> ID：12025438
> 
> 赞同：1
> 
> 时间：2012-08-19T09:13:22.287
> 
> 标签：sencha-touch, sencha-touch-2, modal-dialog

我无法使用 Ext.panel 的顶部和左侧配置将模式对话框定位在 sencha touch 按钮下，因为当我使用 chrome 检查元素时，它始终停留在通过 element.style 定义的特定位置（我认为它来自 sencha touch 库）具有 !important 属性，我也无法通过 css 覆盖它。有人可以帮我解决这个问题吗？非常感谢您的先进

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:03:53.857

使用组件的 showBy 方法，例如

```
dialog.showBy(button); 
```

这是[文档](http://docs.sencha.com/touch/2-0/#!/api/Ext.Button-method-showBy)。

# ios - 从 cordova-1.8.1 升级到 cordova-2.0.0 到 iOS 失败

> ID：12025440
> 
> 赞同：4
> 
> 时间：2012-08-19T09:13:28.097
> 
> 标签：ios, cordova, cordova-2.0.0

我将我的 PhoneGap（或更好的 Cordova）项目从 1.8.1 版本升级到 2.0.0。操作在Android和WindowsPhone7项目中成功完成。我在 iOS 项目中遇到问题：当我构建项目以尝试该功能时，输出控制台会发出警报：

```
2012-08-19 11:02:17.480 MyProjectName[1414:13703] Error: executing module function 'setInfo' in module 'cordova/plugin/ios/device'. Have you included the iOS version of the cordova-1.8.1.js file?
2012-08-19 11:02:17.689 MyProjectName[1414:13703] CDVPlugin class CDVDevice (pluginName: Device) does not exist.
2012-08-19 11:02:17.703 MyProjectName[1414:13703] ERROR: Plugin 'Device' not found, or is not a CDVPlugin. Check your plugin mapping in Cordova.plist.
2012-08-19 11:02:17.720 MyProjectName[1414:13703] FAILED pluginJSON = {"className":"Device","methodName":"getDeviceInfo","arguments":["Device1"]} 
```

上面的第一行表示 Cordova 找到了旧的 JS 文件，而不是最新的 2.0.0。

我该如何解决这个问题？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:39:08.587

我确保已将以下条目添加到我的 plist 文件中：

```
Key: Device 
Type: String 
Value: CDVDevice 
```

但即使在添加了上述内容后，我仍然在日志中收到相同的消息。

所以我清理了我的 Xcode 项目并为我修复了它：

```
Product -> Clean 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:43:47.173

在您的 Cordova.plist 文件（在 Supporting Files 组下）的 Plugins 下添加一个新条目 - 键是“Device”，值是“CDVDevice”

# c++ - 为什么 std::complex 不是算术类型？

> ID：12025447
> 
> 赞同：9
> 
> 时间：2012-08-19T09:15:37.623
> 
> 标签：c++, types, complex-numbers

我创建了以下 Matrix 类：

```
template <typename T>
class Matrix
{
    static_assert(std::is_arithmetic<T>::value,"");

public:
    Matrix(size_t n_rows, size_t n_cols);
    Matrix(size_t n_rows, size_t n_cols, const T& value);

    void fill(const T& value);
    size_t n_rows() const;
    size_t n_cols() const;

    void print(std::ostream& out) const;

    T& operator()(size_t row_index, size_t col_index);
    T operator()(size_t row_index, size_t col_index) const;
    bool operator==(const Matrix<T>& matrix) const;
    bool operator!=(const Matrix<T>& matrix) const;
    Matrix<T>& operator+=(const Matrix<T>& matrix);
    Matrix<T>& operator-=(const Matrix<T>& matrix);
    Matrix<T> operator+(const Matrix<T>& matrix) const;
    Matrix<T> operator-(const Matrix<T>& matrix) const;
    Matrix<T>& operator*=(const T& value);
    Matrix<T>& operator*=(const Matrix<T>& matrix);
    Matrix<T> operator*(const Matrix<T>& matrix) const;

private:
    size_t rows;
    size_t cols;
    std::vector<T> data;
}; 
```

我尝试使用 std::complex 矩阵：

```
Matrix<std::complex<double>> m1(3,3); 
```

问题是编译失败（static_assert失败）：

```
$ make
g++-mp-4.7 -std=c++11   -c -o testMatrix.o testMatrix.cpp
In file included from testMatrix.cpp:1:0:
Matrix.h: In instantiation of 'class Matrix<std::complex<double> >':
testMatrix.cpp:11:33:   required from here
Matrix.h:12:2: error: static assertion failed: 
make: *** [testMatrix.o] Error 1 
```

为什么 std::complex 不是算术类型？我想启用 unsigned int (N)、int (Z)、double (R)、std::complex (C) 和一些自制类（例如代表 Q 的类）......获得这种行为？

**编辑1：**如果我删除`static_assert`课程正常工作。

```
Matrix<std::complex<double>> m1(3,3);
m1.fill(std::complex<double>(1.,1.));
cout << m1 << endl; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-19T09:19:55.577

`arithmetic`in`is_arithmetic`是用词不当。或者更确切地说，它是一个 C++ 名词。它的意思与英语中的意思不同。它只是意味着它是内置数字类型（int、float 等）之一。 `std::complex`不是内置的，它是一个类。

你真的需要那个`static_assert`吗？为什么不让用户尝试使用任何类型呢？如果类型不支持所需的操作，那么运气不好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T21:34:36.573

您可以使用通常不被视为“数字”的类型的矩阵来做有趣的事情。矩阵和向量实际上从数字推广到多种“代数环”——基本上，定义了通常的 + 和 * 操作的任何对象集。

因此，您可以拥有向量矩阵、其他矩阵、复数等。任何支持加法、减法和乘法运算符的类或基本类型都可以正常工作。如果你正确定义了操作符，隐式编译炸弹应该会捕捉到大多数滥用行为，比如“matrix<std::string>”。

# c++ - 更快地同步 2 个班级的成员（相同类型的班级）

> ID：12025452
> 
> 赞同：0
> 
> 时间：2012-08-19T09:16:44.087
> 
> 标签：c++, class, synchronization

我有一个类定义为：

```
class ExampleClass
{
public:
ExampleClass(HWND hwnd);
~ExampleClass();
    ....
    ....
    ....
} 
```

它有很多成员。后来，我创建了 2 个指针：

```
ExampleClass *example1 = new ExampleClass(hwndFrame1);
ExampleClass *example2 = new ExampleClass(hwndFrame2); 
```

这里`hwndFrame1`和`hwndFrame2`是两个不同窗口的句柄。

在某些时候，我需要同步`example1`和指向的这两个类的所有成员的值`example2`。当然，我可以每个成员都这样做。但我想知道是否有一个“一次性”的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T09:26:03.720

缺乏任何进一步的信息，我会建议：

```
*example2 = *example1; 
```

如果`ExampleClass`使用编译器声明的复制赋值运算符，则应该按成员复制，否则应该做“适当的事情”。显然，被指向的两个对象将在此之后引用相同的底层窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T09:40:37.180

除了 Charles Bailey 的回答之外，您还可以自己实现两个对象的同步：

```
memcpy(example2, example1, sizeof(ExampleClass)); 
```

之后，您最终可以设置回窗口指针（假设您也不想同步这些），如下所示：

```
HWND wnd = example2->window;
memcpy(example2, example1, sizeof(ExampleClass));
example2->window = wnd; 
```

您可以在您的 ExampleClass 复制赋值运算符中实现这一点（就像 Charles Bailey 建议的那样），但我不建议这样做，因为它不分配窗口指针，因此不是真正的分配。相反，只需在单独的函数或方法中实现它。请注意，这通常仅在两个对象属于完全相同的类时才有效！

# c# - 是否可以通过表格发送电子邮件

> ID：12025455
> 
> 赞同：0
> 
> 时间：2012-08-19T09:17:17.170
> 
> 标签：c#, asp.net, webmatrix, webmatrix-2

嗨，我在我的页面上设置了一个表单。我怎样才能让它通过电子邮件发送给我的电子邮件地址？

```
<form action="#">
    <p>Please contact us</p>
    <input type="text" maxlength="30" value="Name" class="textcontact" />
    <input type="text" maxlength="30" value="E-mail Address" class="textcontact" />
    <input type="text" maxlength="30" value="Subject" class="textcontact" />
    <textarea name="message" id="message" cols="30" rows="10"></textarea>
    <input type="submit" value="" class="submit" />
</form> 
```

我知道这与表单动作有关。但是 webmatrix 2（？）中没有控制器或任何东西。我如何使它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T09:24:45.567

这是 Webforms 2 中的指南，可以完全按照您的要求进行操作。

[http://www.asp.net/web-pages/tutorials/email-and-search/11-adding-email-to-your-web-site](http://www.asp.net/web-pages/tutorials/email-and-search/11-adding-email-to-your-web-site)

创建一个新网站。

添加一个名为 EmailRequest.cshtml 的新页面并添加以下标记：

```
<!DOCTYPE html>
<html>
<head>
   <title>Request for Assistance</title>
</head>
<body>
  <h2>Submit Email Request for Assistance</h2>
  <form method="post" action="ProcessRequest.cshtml">
    <div>
        Your name:
        <input type="text" name="customerName" />
    </div>

    <div>
        Your email address:
        <input type="text" name="customerEmail" />
    </div>

    <div>
        Details about your problem: <br />
        <textarea name="customerRequest" cols="45" rows="4"></textarea>
    </div>

    <div>
        <input type="submit" value="Submit" />
    </div>
  </form>
</body>
</html> 
```

请注意，表单元素的 action 属性已设置为 ProcessRequest.cshtml。这意味着表单将被提交到该页面而不是返回到当前页面。

向网站添加一个名为 ProcessRequest.cshtml 的新页面，并添加以下代码和标记：

```
@{
    var customerName = Request["customerName"];
    var customerEmail = Request["customerEmail"]; 
    var customerRequest = Request["customerRequest"];
    var errorMessage = "";
    var debuggingFlag = false;
    try {
        // Initialize WebMail helper
        WebMail.SmtpServer = "your-SMTP-host";
        WebMail.SmtpPort = 25;
        WebMail.UserName = "your-user-name-here";
        WebMail.Password = "your-account-password";
        WebMail.From = "your-email-address-here";

        // Send email
        WebMail.Send(to: customerEmail,
                subject: "Help request from - " + customerName,
            body: customerRequest
        );
    }
    catch (Exception ex ) {
        errorMessage = ex.Message;
    }
}
<!DOCTYPE html>
<html>
<head>
  <title>Request for Assistance</title>
</head>
<body>
  <p>Sorry to hear that you are having trouble, <b>@customerName</b>.</p>
    @if(errorMessage == ""){
      <p>An email message has been sent to our customer service
         department regarding the following problem:</p>
      <p><b>@customerRequest</b></p>
    }
    else{
        <p><b>The email was <em>not</em> sent.</b></p>
        <p>Please check that the code in the ProcessRequest page has 
           correct settings for the SMTP server name, a user name, 
           a password, and a "from" address.
        </p>
        if(debuggingFlag){
            <p>The following error was reported:</p>
            <p><em>@errorMessage</em></p>
        }
    }
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T09:35:57.353

您可以拥有以下网页并使用[SmtpClient](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)类发送电子邮件：

```
@using System.Net.Mail;
@{
    if (IsPost)
    {
        var email = Request["Email"];       
        var subject = Request["Subject"];       
        var message = Request["Message"];       
        using (var client = new SmtpClient())
        {
             var msg = new MailMessage();
             msg.To.Add(email);
             msg.Subject = subject;
             msg.Body = message;
             client.Send(msg);
             <text>The email has been successfully sent</text>
         }
     }
}

<form action="" method="post">
    <p>Please contact us</p>
    <input type="text" name="email" maxlength="30" value="to@gmail.com" />
    <input type="text" name="subject" maxlength="30" value="Subject" />
    <textarea name="message" cols="30" rows="10"></textarea>
    <input type="submit" value="Send" class="submit" />
</form> 
```

并在您的 web.config 中配置您的 SMTP 服务器。以下是 Gmail 的示例：

```
<system.net>
    <mailSettings>
        <smtp from="youraccount@gmail.com">
            <network 
                host="smtp.gmail.com" 
                password="secret" 
                port="587" 
                userName="youraccount@gmail.com"
                enableSsl="true"
            />
        </smtp>
    </mailSettings>
</system.net> 
```

# security - 这是否会使 SSL 加密易受攻击？

> ID：12025458
> 
> 赞同：-1
> 
> 时间：2012-08-19T09:17:43.503
> 
> 标签：security, encryption, ssl, cryptography, wireless

据我了解，在安全 SSL 通信之前，双方之间建立了对称密钥。现在，如果 SSL 会话涉及不安全的无线接入点，攻击者是否有可能嗅探无线电波并获取已建立的密钥？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T09:29:39.580

SSL 中的密钥交换基于非对称加密。例如，客户端可能使用服务器的公钥加密一个秘密。现在只有服务器可以解密该值，因为他是唯一拥有该公钥的私钥的人。

一个被动的听众将无法了解这个秘密。SSL 对于看到客户端和服务器之间完整通信的攻击者是安全的。

主动攻击者可以尝试发起中间人攻击。这意味着他冒充服务器并向客户端发送不同的证书和公钥。如果客户端接受证书，则攻击者成功。这就是证书验证在 SSL 中必不可少的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:19:31.593

以下是通过不安全连接建立共享密钥的已知方法。最著名的一种是[Diffie-Hellman](http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange)密钥交换，尽管还有其他的。

对于 SSL 本身，请参阅 SSL 文档。

# ember.js - emberjs：有没有办法创建一条包罗万象的路线？

> ID：12025459
> 
> 赞同：2
> 
> 时间：2012-08-19T09:17:50.373
> 
> 标签：ember.js

有没有办法创建一条具有任意深度的动态段的路线？

换句话说，有没有办法设置一条包罗万象的路线？像这样的东西

```
Em.Route.extend({
  route: "/:segment/*"
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:43:46.800

我认为这已经实现了，并且刚刚被推送到 master：见[https://github.com/emberjs/ember.js/pull/1465](https://github.com/emberjs/ember.js/pull/1465)

我还没有尝试过，所以如果你能提供一些反馈，我会很高兴:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T20:27:11.000

是的，您现在可以通过 Route Globbing 创建这样的路由：

```
@resource 'files', path: '/*filepath' 
```

并且`params`发送给`model`回调的参数将包含一个名为`filepath`

它也可以在`link-to`助手中以另一种方式工作，您可以在其中执行类似的操作

```
= link-to 'files' mypath 
```

# objective-c - 在 tableView 的单元格中切换 2 个不同的图像

> ID：12025460
> 
> 赞同：0
> 
> 时间：2012-08-19T09:17:56.973
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我有一个 tableView 来检查一个单元格是否被打开：如果是，它显示一个空单元格（没有图像），如果没有，它显示一个小图像来说明该单元格还没有被读取（打开）。

现在，我的应用程序中有“收藏夹”功能，我想在 tableView 中显示一个小图像，表明该单元格是收藏夹，因此用户可以快速识别那些从表格中添加到收藏夹中的内容。

我试图做，在`cellForRowAtIndexPath`方法

```
NSDictionary *item = [rows objectAtIndex:indexPath.row];
cell.textLabel.text = [item objectForKey:@"name"];
if ([[item valueForKey:@"isRead"] boolValue] == NO) {
    cell.imageView.image = [UIImage imageNamed:@"unread.png"];
} else {
      if ([[item valueForKey:@"isFav"] boolValue] == YES){
          cell.imageView.image = [UIImage imageNamed:@"favorite.png"];
      }
      else{
          cell.imageView.image = nil;
      }
    cell.imageView.image = nil;
} 
```

其中`name`, `isRead`,`isFav`是从我存储所有数据的 plist 中获取的值。当然，当用户打开一个单元格时，“未读”图像就会消失。

现在的问题是我想同时显示未读和收藏夹。在上面的代码中，它只显示那些未读的。

我该怎么做才能做到这一点？我可能错过了一些愚蠢的东西！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:10:03.577

单元格只有一个 imageView 。尝试这个

```
if (cell == nil) 
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    UIImageView *imageView1=[[UIImageView alloc]init];
    imageView1.frame=CGRectMake(0, 0,50,cell.frame.size.height);
    imageView1.tag=1000;
    [cell.contentView addSubview:imageView1];

    UIImageView *imageView2=[[UIImageView alloc]init];
    imageView2.frame=CGRectMake(cell.frame.size.width-50, 0, 50,cell.frame.size.height);
    imageView2.tag=2000;
    [cell.contentView addSubview:imageView2];

}

UIImageView *imageView=(UIImageView *)[cell.contentView viewWithTag:1000];
imageView.backgroundColor=[UIColor redColor];
imageView.image=[UIImage imageNamed:@"unread.png"];

UIImageView *imageView2=(UIImageView *)[cell.contentView viewWithTag:2000];
imageView2.backgroundColor=[UIColor greenColor];
imageView2.image=[UIImage imageNamed:@"favorite"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T19:40:22.233

为什么不只是继承 UITableViewCell 并按照你想要的方式布局呢？这很容易做到。我做了一个项目来展示如何做到这一点。

一个简短的总结：

创建一个名为`MyTableViewCell`或其他的新类。

MyTableViewCell.h：

```
#import <UIKit/UIKit.h>

@interface MyTableViewCell : UITableViewCell

@property (nonatomic, strong) IBOutlet UIImageView *image1;
@property (nonatomic, strong) IBOutlet UIImageView *image2;
@end 
```

MyTableViewCell.m:

```
#import "MyTableViewCell.h"

@implementation MyTableViewCell
@synthesize image1, image2;
@end 
```

在包含您的`TableView`. 将 的父类更改`TableViewCell`为`MyTableViewCell`（在 Interface Builder 中）。确保正确命名重用标识符，然后在`cellForRowAtIndexPath`：

```
static NSString *CellIdentifier = @"TwoImageCell";
MyTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

[cell.image1 setImage:[UIImage imageNamed:@"lion.png"]];
[cell.image2 setImage:[UIImage imageNamed:@"mtlion.png"]];

// Configure the cell...

return cell; 
```

[项目在这里](https://dl.dropbox.com/u/3660978/UITableViewSubclass.zip)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T09:22:15.950

默认实现`UITableViewCell`一次不支持两个图像。您需要对要显示的图像之一进行子类化`UITableViewCell`并添加您自己的子类。`UIImageView`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:38:23.117

感谢一位亲爱的朋友的帮助，我解决了，我最终做了类似的事情

```
int state = 0;
    if ([[item valueForKey:@"isRead"] boolValue] == NO)
        state += 1;
    if ([[item valueForKey:@"isFav"] boolValue] == YES)
        state += 2;

    switch (state){
    case 1:
        cell.imageView.image = [UIImage imageNamed:@"unread.png"];
    break;
    case 2:
        cell.imageView.image = [UIImage imageNamed:@"favorite.png"];
    break;
    case 3:
        cell.imageView.image = [UIImage imageNamed:@"unreadAndFavorite.png"];
    break;
    default:
            cell.imageView.image = nil;
    break;
    } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-19T10:51:30.817

在表格视图单元格中添加两个图像视图。您必须在 cellForRowAtIndexPath 中实现以下代码（默认情况下只有一个图像视图）。在这种情况下，您必须获取两个子视图并将它们添加为内容视图。

```
-(UITableViewCell *)tableView:(UITableView *)tableViewL cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableViewL dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) 
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    UIImageView *imageView1=[[UIImageView alloc]init];
    imageView1.frame=CGRectMake(0, 0,50,cell.frame.size.height);
    imageView1.tag=1000;
    [cell.contentView addSubview:imageView1];

    UIImageView *imageView2=[[UIImageView alloc]init];
    imageView2.frame=CGRectMake(cell.frame.size.width-50, 0, 50,cell.frame.size.height);
    imageView2.tag=2000;
    [cell.contentView addSubview:imageView2];

}

UIImageView *imageView=(UIImageView *)[cell.contentView viewWithTag:1000];
imageView.image=[UIImage imageNamed:@"myImage1.png"];

UIImageView *imageView2=(UIImageView *)[cell.contentView viewWithTag:2000];
imageView2.image=[UIImage imageNamed:@"myImage2.png"];   

 return cell; 
```

}

# c - 添加 libc 支持以在 android ndk 中使用 libintl.h 标头

> ID：12025463
> 
> 赞同：0
> 
> 时间：2012-08-19T09:18:14.687
> 
> 标签：c, android-ndk

我是 Android NDK 的新手，我想使用的标头`#include<libintl.h>`，但是在编译时我遇到的错误是`error: libintl.h : No such file or directory`。[我知道这个链接](http://developer.android.com/tools/sdk/ndk/overview.html#tools)引起的android ndk已经支持libc 。但是，我不知道如何包含和使用它？:-/ 那么，我如何在 android 中使用这个头文件？

我最简单的代码如下：

```
#include <libintl.h>

void main()
{
} 
```

安卓.mk：

```
#
# Compile axel
# 
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

LOCAL_MODULE    := mylib
LOCAL_SRC_FILES := mylib.c
LOCAL_CFLAGS    := -DHAVE_CONFIG_H $(cflags_loglevels)
LOCAL_C_INCLUDES := $(LOCAL_PATH)
LOCAL_LDLIBS    := -llog -lc

include $(BUILD_SHARED_LIBRARY) 
```

日志错误：

```
/home/hossein/workspace/Project/jni/mylib.h: error: libintl.h: No such file or directory 
```

怎么了 ？我怎么能包括`libintl.h`？

提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:13:19.623

libintl.h 中的功能确实包含在 glibc 中，但它不包含在 Android 的精简 libc 中。您必须自己构建一个独立的 libintl 副本。

# c# - 如何搜索树节点并返回它？

> ID：12025465
> 
> 赞同：0
> 
> 时间：2012-08-19T09:18:24.697
> 
> 标签：c#, asp.net, treeview

我写了这个函数，但我不知道如何写它的其余部分它应该是递归的，我不知道

```
 public TreeNode FindNodeByText(TreeView m, string s)
        {
            TreeNodeCollection nodes = m.Nodes;
            foreach (TreeNode n in nodes)
            {
                if (n.Text == s)
                    return n;
                else
                    ??????????
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:24:38.437

像这样的东西：

```
public TreeNode FindNodeByText(TreeView m, string s)
{
    TreeNodeCollection nodes = m.Nodes;
    foreach (TreeNode n in nodes)
    {
        if (n.Text == s)
            return n;
        else
            return FindNodeByTextInTreeNode(n, s);
    }

    return null;
}

public TreeNode FindNodeByTextInTreeNode(TreeNode node, string s)
{
    TreeNodeCollection nodes = node.ChildNodes;
    foreach (TreeNode n in nodes)
    {
        if (n.Text == s)
            return n;
        else
            return FindNodeByTextInTreeNode(n, s);
    }

    return null;
} 
```

# iphone - 如何使用 TapkuCalendar 标记日期

> ID：12025468
> 
> 赞同：1
> 
> 时间：2012-08-19T09:19:32.753
> 
> 标签：iphone, ios5, xcode4.3

我想按保存在 plist 中的日期标记我的日历

![在此处输入图像描述](../Images/d6b8d482e692ccb2f6ee86201bdf6c68.png)

我把这段代码放在marksFromDate里面

```
- (NSArray*)calendarMonthView:(TKCalendarMonthView *)monthView marksFromDate:(NSDate *)startDate toDate:(NSDate *)lastDate
{        
    NSString *documentDirectory = [self applicationDocumentsDirectory];
    NSString *path = [documentDirectory stringByAppendingPathComponent:@"PlainNotes.plist"];
    NSMutableArray *tmpArray = [[NSMutableArray alloc] initWithContentsOfFile:path];
    self.Notes = tmpArray;
    NSString *date = [tmpArray valueForKey:@"CDate"];

    NSArray *data = [NSArray arrayWithObject:date];
    NSLog(@"Mark for this date %@", data);

    // Initialise empty marks array, this will be populated with TRUE/FALSE in order for each day a marker should be placed on.
    NSMutableArray *marks = [NSMutableArray array];

    // Initialise calendar to current type and set the timezone to never have daylight saving
    NSCalendar *cal = [NSCalendar currentCalendar];
    [cal setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

    // Construct DateComponents based on startDate so the iterating date can be created.
    // Its massively important to do this assigning via the NSCalendar and NSDateComponents because of daylight saving has been removed 
    // with the timezone that was set above. If you just used "startDate" directly (ie, NSDate *date = startDate;) as the first 
    // iterating date then times would go up and down based on daylight savings.
    NSDateComponents *comp = [cal components:(NSMonthCalendarUnit | NSMinuteCalendarUnit | NSYearCalendarUnit | 
                                              NSDayCalendarUnit | NSWeekdayCalendarUnit | NSHourCalendarUnit | NSSecondCalendarUnit) 
                                    fromDate:startDate];
    NSDate *d = [cal dateFromComponents:comp];

    // Init offset components to increment days in the loop by one each time
    NSDateComponents *offsetComponents = [[NSDateComponents alloc] init];
    [offsetComponents setDay:1];    

    // for each date between start date and end date check if they exist in the data array
    while (YES) {
        // Is the date beyond the last date? If so, exit the loop.
        // NSOrderedDescending = the left value is greater than the right
        if ([d compare:lastDate] == NSOrderedDescending) {
            break;
        }

        // If the date is in the data array, add it to the marks array, else don't
        if ([data containsObject:[d description]]) {
            [marks addObject:[NSNumber numberWithBool:YES]];
        } else {
            [marks addObject:[NSNumber numberWithBool:NO]];
        }

        // Increment day using offset components (ie, 1 day in this instance)
        d = [cal dateByAddingComponents:offsetComponents toDate:d options:0];
    }

    return [NSArray arrayWithArray:marks];
} 
```

这是用于日志

```
2012-08-19 17:10:50.168 PlainNotes[2852:f803] Mark for this date (
        (
        "2012-08-19 00:00:00 +0000",
        "2012-08-31 00:00:00 +0000"
    )
) 
```

这没有标记我的日历，但下面的代码来自 TapkuCalendar

```
- (NSArray*)calendarMonthView:(TKCalendarMonthView *)monthView marksFromDate:(NSDate *)startDate toDate:(NSDate *)lastDate {    
    NSLog(@"calendarMonthView marksFromDate toDate");   
    NSLog(@"Make sure to update 'data' variable to pull from CoreData, website, User Defaults, or some other source.");
    // When testing initially you will have to update the dates in this array so they are visible at the
    // time frame you are testing the code.
    NSArray *data = [NSArray arrayWithObjects:
                     @"2011-01-01 00:00:00 +0000", @"2011-01-09 00:00:00 +0000", @"2011-01-22 00:00:00 +0000",
                     @"2011-01-10 00:00:00 +0000", @"2011-01-11 00:00:00 +0000", @"2011-01-12 00:00:00 +0000",
                     @"2011-01-15 00:00:00 +0000", @"2011-01-28 00:00:00 +0000", @"2011-01-04 00:00:00 +0000",                   
                     @"2011-01-16 00:00:00 +0000", @"2011-01-18 00:00:00 +0000", @"2011-01-19 00:00:00 +0000",                   
                     @"2011-01-23 00:00:00 +0000", @"2011-01-24 00:00:00 +0000", @"2011-01-25 00:00:00 +0000",                                       
                     @"2011-02-01 00:00:00 +0000", @"2011-03-01 00:00:00 +0000", @"2011-04-01 00:00:00 +0000",
                     @"2011-05-01 00:00:00 +0000", @"2011-06-01 00:00:00 +0000", @"2011-07-01 00:00:00 +0000",
                     @"2011-08-01 00:00:00 +0000", @"2011-09-01 00:00:00 +0000", @"2011-10-01 00:00:00 +0000",
                     @"2011-11-01 00:00:00 +0000", @"2011-12-01 00:00:00 +0000", nil]; 
    NSLog(@"Mark for this date %@", data); 
```

这是TapkuCalendar日志

```
2012-08-19 17:01:08.604 TapkuCalendarTabBarDemo[2807:f803] calendarMonthView marksFromDate toDate
2012-08-19 17:01:08.605 TapkuCalendarTabBarDemo[2807:f803] Make sure to update 'data' variable to pull from CoreData, website, User Defaults, or some other source.
2012-08-19 17:01:08.606 TapkuCalendarTabBarDemo[2807:f803] Mark for this date (
    "2011-01-01 00:00:00 +0000",
    "2011-01-09 00:00:00 +0000",
    "2011-01-22 00:00:00 +0000",
    "2011-01-10 00:00:00 +0000",
    "2011-01-11 00:00:00 +0000",
    "2011-01-12 00:00:00 +0000",
    "2011-01-15 00:00:00 +0000",
    "2011-01-28 00:00:00 +0000",
    "2011-01-04 00:00:00 +0000",
    "2011-01-16 00:00:00 +0000",
    "2011-01-18 00:00:00 +0000",
    "2011-01-19 00:00:00 +0000",
    "2011-01-23 00:00:00 +0000",
    "2011-01-24 00:00:00 +0000",
    "2011-01-25 00:00:00 +0000",
    "2011-02-01 00:00:00 +0000",
    "2011-03-01 00:00:00 +0000",
    "2011-04-01 00:00:00 +0000",
    "2011-05-01 00:00:00 +0000",
    "2011-06-01 00:00:00 +0000",
    "2011-07-01 00:00:00 +0000",
    "2011-08-01 00:00:00 +0000",
    "2011-09-01 00:00:00 +0000",
    "2011-10-01 00:00:00 +0000",
    "2011-11-01 00:00:00 +0000",
    "2011-12-01 00:00:00 +0000"
) 
```

我在这里看到的是我的，TapkuCalendar 日志是一样的，但为什么我的代码不能标记日历？如何解决？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:27:38.763

该方法被定义为`-(NSArray*)...`所以我最初担心的是你没有返回任何东西。

尝试添加`return data;`到`calendarMonthView:marksFromDate:toDate:`. `

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:38:53.597

我已经解决了。我将 NSString 更改为 NSArray ，如下面的代码。

```
NSArray *data = [Notes valueForKeyPath:@"CDate"];
NSLog(@"Mark for this date %@", data); 
```

谢谢大家的帮助。我真的很感激。对不起我的愚蠢问题。我只是一个新手。

# python - 如何从 Python 中的 zip 文件中读取 zip 文件？

> ID：12025469
> 
> 赞同：40
> 
> 时间：2012-08-19T09:19:35.320
> 
> 标签：python, file, zip, unzip

我有一个我想阅读的文件，它本身压缩在一个 zip 存档中。例如，parent.zip 包含 child.zip，其中包含 child.txt。我在阅读 child.zip 时遇到问题。任何人都可以更正我的代码吗？

我假设我需要将 child.zip 创建为类似文件的对象，然后使用第二个 zipfile 实例打开它，但是对于 python 来说，我的 zipfile.ZipFile(zfile.open(name)) 很愚蠢。它会在（独立验证的）child.zip 上引发一个 zipfile.BadZipfile：“文件不是 zip 文件”

```
import zipfile
with zipfile.ZipFile("parent.zip", "r") as zfile:
    for name in zfile.namelist():
        if re.search(r'\.zip$', name) is not None:
            # We have a zip within a zip
            with **zipfile.ZipFile(zfile.open(name))** as zfile2:
                    for name2 in zfile2.namelist():
                        # Now we can extract
                        logging.info( "Found internal internal file: " + name2)
                        print "Processing code goes here" 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-19T09:25:03.693

当您`.open()`在实例上使用调用时，`ZipFile`您确实会获得一个打开的文件句柄。但是，要*读取*zip 文件，`ZipFile`该类还需要更多内容。它需要能够在该文件上查找，并且在您的情况下，返回的对象*是*`.open()`不可查找的。只有 Python 3（3.2 及更高版本）生成`ZipExFile`支持查找的对象（前提是外部 zip 文件的底层文件句柄是可查找的，并且没有尝试写入该`ZipFile`对象）。

解决方法是使用 将整个 zip 条目读取到内存中`.read()`，将其存储在一个对象（可查找*的*`BytesIO`内存文件）中并将其提供给：*`ZipFile`*

 *```
from io import BytesIO

# ...
        zfiledata = BytesIO(zfile.read(name))
        with zipfile.ZipFile(zfiledata) as zfile2: 
```

或者，在您的示例中：

```
import zipfile
from io import BytesIO

with zipfile.ZipFile("parent.zip", "r") as zfile:
    for name in zfile.namelist():
        if re.search(r'\.zip$', name) is not None:
            # We have a zip within a zip
            zfiledata = BytesIO(zfile.read(name))
            with zipfile.ZipFile(zfiledata) as zfile2:
                for name2 in zfile2.namelist():
                    # Now we can extract
                    logging.info( "Found internal internal file: " + name2)
                    print "Processing code goes here" 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-20T14:57:29.643

为了让它与 python33 一起工作（在 windows 下，但这可能无关紧要），我必须这样做：

```
 import zipfile, re, io
    with zipfile.ZipFile(file, 'r') as zfile:
        for name in zfile.namelist():
            if re.search(r'\.zip$', name) != None:
                zfiledata = io.BytesIO(zfile.read(name))
                with zipfile.ZipFile(zfiledata) as zfile2:
                    for name2 in zfile2.namelist():
                        print(name2) 
```

cStringIO 不存在，所以我使用了 io.BytesIO*

# android - 哪种音频格式最适合我在 Android 智能手机上存储音频文件？

> ID：12025476
> 
> 赞同：0
> 
> 时间：2012-08-19T09:21:05.550
> 
> 标签：android, audio, apk, android-music-player, audioformat

我正在开发一个基于 Android 的应用程序，它可以播放专辑中的音频文件。专辑中的音频文件均为**MP3 格式**，**音频比特率 320 KBPS**。由于专辑中有 18 首歌曲，平均歌曲大小为 6MB，因此我的 Android APK 大小**约为 110MB**。

我想问一下哪种音频格式最适合我，它可以减少 APK 大小而不会显着降低音频质量？任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T22:32:48.510

最好用的是 aac 和 mp3 我更喜欢 mp3 但 Shahab 是对的 aac 会起作用

# html - 有没有办法使某些操作仅在特定时间可用？

> ID：12025478
> 
> 赞同：0
> 
> 时间：2012-08-19T09:21:49.820
> 
> 标签：html, css, xhtml

有没有办法让一个动作**只**在 HTML 中预先编程的特定时间可用？

例如：仅在特定时间工作而在其他时间链接不活动的广播播放**器**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:28:01.487

是的，可以使用 JavaScript。查看函数`setTimeout`或`setInterval`. 您可以在此处找到示例 -[在一天中的特定时间调用 javascript 函数](https://stackoverflow.com/questions/4455282/call-a-javascript-function-at-a-specific-time-of-day)。

如果由于某种原因您不能使用 JavaScrip，另一种选择是使用一些服务器端技术（PHP、ASP.Net）在响应返回到浏览器之前修改 html。在这种情况下，后端应检查当前时间是否有效以让用户单击链接并修改 Html 标记，例如链接是否可单击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T09:31:41.623

是的，使用 javascript 来做到这一点。很多种方法：

## 第一种方法 - 由 javascript 函数控制的链接

```
<script>
function is_active() {
  if (/* working at this time */) return true;
  else return false;
}
</script>
<a href="..." onClick="return is_active();">...</a> 
```

这可能是最简单的方法，只要功能由链接控制

## 第二种方法 - 在播放器顶部放置一个框，使其无法点击

```
<div style="position:relative;">
player here - including links to start/stop
<div id="overlaydiv"
 style="position: absolute; left: 0; top: 0; width: 100%; height: 100%;
        opacity: 50%; background-color: white;">&nbsp;</div>
</div>
<script>
setTimeout(function () {
  $(overlaydiv).css("display: block;")
},milliseconds until inactive);
</script> 
```

## 如果安全很重要，请小心

如果您使用 javascript 获取用户计算机上的本地时间，请注意用户可能会操纵他们的时钟。所以你可能无法信任它。

您可以通过让服务器在页面加载时将实际时间保存在 javascript 变量中来降低这种风险。但是，如果您使用计时器来查找时间变化，用户仍然可以操纵他们的时钟。

如果它很重要，您可能应该在允许单击链接以启动播放器之前执行 AJAX 请求以检查服务器时间（例如，使用第一种方法）。

# c# - 对象数组的复选框

> ID：12025483
> 
> 赞同：2
> 
> 时间：2012-08-19T09:23:32.943
> 
> 标签：c#, html, asp.net-mvc-3, razor

我有这个代码：

**模型：**

```
public bool[] ArrayOfBooleans = new bool[2]; 
```

**看法**

```
@using(Html.BeginForm())
{
    @:#1
    <input name="ArrayOfBooleans[0]" type="checkbox" value="true" />
    <input name="ArrayOfBooleans[0]" type="checkbox" value="false" />
    <br />
    @:#2
    <input name="ArrayOfBooleans[1]" type="checkbox" value="true" />
    <input name="ArrayOfBooleans[1]" type="checkbox" value="false" />
    <br />    
    <input type="submit" value="Submit"/>
} 
```

当我发布此内容时，*ArrayOfBooleans*没有任何变化。甚至可以将复选框“附加”到数组元素吗？

注意：这是我的一个实际问题的简化形式。我必须使用集合和更复杂的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T12:29:25.860

试试这个（对我有用）：

```
@using(Html.BeginForm())
{
    @:#1
    <input name="ArrayOfBooleans[0]" type="checkbox" value="true" />
    <input name="ArrayOfBooleans[0]" type="hidden" value="false" />
    <br />
    @:#2
    <input name="ArrayOfBooleans[1]" type="checkbox" value="true" />
    <input name="ArrayOfBooleans[1]" type="hidden" value="false" />
    <br />    
    <input type="submit" value="Submit"/>
} 
```

在模型中：

```
public class A
{
    public bool[] ArrayOfBooleans { get; set; }
} 
```

在控制器中：

```
[HttpPost]
public ActionResult Index(A model)
{
    return View();
} 
```

# mysql - MySQL - 根据周/月数获取 sum()

> ID：12025485
> 
> 赞同：0
> 
> 时间：2012-08-19T09:24:20.740
> 
> 标签：mysql, sql, ruby-on-rails, greatest-n-per-group

我有一个名为“交易”的费用表，其中包括用户 ID、日期时间和金额。

我要做的是根据周数/月查询按 user_id 分组的 sum(amount)，例如：

1) 一周前 10 名的消费用户，比如 22 或 10

2) 例如，第 3 个月的前 10 名消费用户

我确实浏览了该站点，虽然有类似的 SQL 示例，但它们主要基于 7 天滑动窗口或“上周”或“上个月”。我仍在尝试查看是否可以使用 MySQL 文档解决此问题，但希望有任何可以节省一些时间的指针。

谢谢！

PS我正在使用Rails 3，也许框架有一些内置方法？基本的查找器不会做...

后期编辑：

我原以为这会起作用，但它也包括本周的数据：

```
SELECT user_id,  sum(amount) AS t
 FROM transactions
 WHERE YEARWEEK(date_time) = YEARWEEK(now() - interval 1 week) 
group by user_id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T13:08:07.167

以下解决方案应指导您朝着正确的方向前进。这些解决方案还保留了您为字段设置的任何索引的使用`date_time`（查询仍然是 sargable，因为日期比较是在裸`date_time`列上完成的，而不是`date_time`包装在函数内的列）：

```
-- Top 10 users by transaction amount for 3rd month of the year
SELECT   user_id, 
         SUM(amount) AS t
FROM     transactions
WHERE    date_time >= STR_TO_DATE(CONCAT(YEAR(NOW()), '-03-01'), '%Y-%m-%d') AND
         date_time <  STR_TO_DATE(CONCAT(YEAR(NOW()), '-03-01'), '%Y-%m-%d') + INTERVAL 1 MONTH
GROUP BY user_id
ORDER BY t DESC
LIMIT    10 
```

^ 这里我们得到的是一年中第三个月（或三月）发生的用户交易总和。将出现的 替换为`03`您希望从中检索总和的一年中的任何一个月。

* * *

```
-- Top 10 users by transaction amount for 20th week of the year
SELECT   user_id,
         SUM(amount) AS t
FROM     transactions
WHERE    date_time >= MAKEDATE(YEAR(NOW()), 7-(DAYOFWEEK(MAKEDATE(YEAR(NOW()), 7))-1)) +
                      INTERVAL 20     WEEK AND
         date_time <  MAKEDATE(YEAR(NOW()), 7-(DAYOFWEEK(MAKEDATE(YEAR(NOW()), 7))-1)) +
                      INTERVAL 20 + 1 WEEK
GROUP BY user_id
ORDER BY t DESC
LIMIT    10 
```

^ 这个解决方案乍一看可能*看起来很*`YEARWEEK()`笨重，但它正在模拟函数，以便将`date_time`列保持在任何类型的函数包装之外（因此它可以利用前面提到的索引）。

将出现的 替换为`20`您希望从中检索总和的一年中的任何一周。

# c++ - 具有 2 个派生类的基类 - 如何正确构造？

> ID：12025495
> 
> 赞同：2
> 
> 时间：2012-08-19T09:25:39.960
> 
> 标签：c++

我有3节课。我们称它们为 A 类、B 类和 C 类。

C类从B类继承，B类从A类继承。（还有其他类从B类继承）

```
EG
classC -> classB -> classA
classD -> classB -> classA
classE -> classB -> classA 
```

我想创建一个 C 类对象。

A类有一个变量'name' B类有一个变量'choice'

我希望 C 类对象的构造函数创建具有给定名称的对象。

这就是我完成 .h 文件的方式（这显然不起作用） 这些提取来自相关的 .h 文件。每个类都有一个 .h 文件和一个 .cpp 文件。

```
class classC: public classB {
public:
    classC(string name):classA(name){}
};

class classB : public classA {
public: 
classB(string name);
void setChoice();
    string getChoice(); 

protected:
    string choice;
};

class classA {
public:
    classA();
    classA(string name);
    string getName();
    virtual void setChoice();

protected:
    string name;
}; 
```

.cpp 文件的摘录如下：

****C类******

 **```
classC::classC(string name) {}

void classC::setChoice() {
choice = "P";
} 
```

****B类******

 **```
classB::classB(string name):classA(name){}

string classB::getChoice(){
    return choice;
}

void classB::setchoice(string newChoice){
    choice = newChoice;
} 
```

*** A类***

```
classA::classA() {}

classA::classA(string aName):name(aName){}

string classA::getName() {
    return name;
}
void classA::setSelection() {} 
```

司机：

```
classC* classC1 = new classC("tomato");
class1C->setChoice();
cout << "Name is " << classC1->getName() << endl;
cout << "Choice is " << classC1->getChoice() << endl; 
```

我有一个设置为虚拟的 setChoice 方法，因为我希望 Class C - Class Z 中的每个类都有自己特定的 setChoice 函数。该项目的规范还规定该函数必须在 ClassA 中声明。

我收到一条错误消息，指出 ClassB 需要 1 个参数，但没有提供任何参数。

有人可以指出我正确的方向。我没主意了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T09:33:28.153

您的第一个错误是您必须在定义派生类之前定义基类。

第二个问题是你只能调用直接基的构造函数。也就是说，在类 C 的构造函数中，你必须调用类 B 的构造函数，然后它可以将参数传递给类 A。所以完整的代码如下所示：

```
class classA {
public:
    classA();
    classA(string name);
    string getName();
    virtual void setChoice();

protected:
    string name;
};

class classB : public classA {
public: 
classB(string name): classA(name){}
void setChoice();
    string getChoice(); 

protected:
    string choice;
};

class classC: public classB {
public:
    classC(string name):classB(name){}
}; 
```****

# sas - 使用 SAS 读取逗号分隔文件

> ID：12025498
> 
> 赞同：0
> 
> 时间：2012-08-19T09:26:04.490
> 
> 标签：sas

**使用 SAS 读取的原始文件有以下记录：**

123，“哈罗德·威尔逊”，会计，1989 年 1 月 15 日，78,123 美元

128，“朱莉娅孩子”，食品，1988 年 8 月 29 日，89,123 美元

007，“詹姆斯邦德”，证券，2000 年 2 月 1 日，82,100 美元

828，“罗杰·多格”，Acct，1999 年 8 月 15 日，39,100 美元

900，“达文波特伯爵”，食品，1989 年 9 月 9 日，45,399 美元

906，“詹姆斯·斯温德勒”，Acct，1978 年 12 月 21 日，78,200 美元

**SAS 代码：**

```
options nocenter;

filename file1 'D:\files\SAS\raw-files\employee.csv';

data Employ;
infile file1 dsd;
input id       :       $3.
      name     :      $20.
      depart   :       $8.
      datehire : mmddyy10\.  
      salary   :  dollar8\.  
      ;
format datehire mmddyy10.
       salary    dollar8.;
run;

title 'Employee details';

proc print data=Employ;
run; 
```

**输出**

员工详情

Obs id 姓名 离职日期 雇佣 薪水

1 123 哈罗德·威尔逊账户 1989 年 1 月 15 日 78 美元

2 128 朱莉娅儿童食品 1988 年 8 月 29 日 89 美元

3 007 詹姆斯邦德证券 02/01/2000 82 美元

4 828 Roger Doger Acct 08/15/1999 39 美元

5 900 伯爵达文波特食品 09/09/1989 45 美元

6 906 James Swindler Acct 1978 年 12 月 21 日 78 美元

**问题 ：**

如何获取与原始文件中相同格式的薪水，因为逗号后的薪水部分被忽略。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:49:39.327

跟进 Bob 在上面的出色回答，您也可以这样做：

```
 data test;
  infile cards dsd truncover;
  input id name & : $20\. depart : $12\. datehire anydtdte10\. salary comma8.;
  format id z3\. datehire mmddyy10\. salary dollar8.;
  cards;
  123,"Harold Wilson",Acct,01/15/1989,$78,123
  128,"Julia Child",Food,08/29/1988,$89,123
  007,"James Bond",Security,02/01/2000,$82,100
  828,"Roger Doger",Acct,08/15/1999,$39,100
  900,"Earl Davenport",Food,09/09/1989,$45,399
  906,"James Swindler",Acct,12/21/1978,$78,200
  ;
  run;

  proc print;
  run; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T15:09:05.280

如果您自己创建了这个 CSV 文件，您应该重新创建它。SAS 将数据值中的逗号视为字段分隔符（与任何其他应用程序一样）。

如果您无法重新创建文件，您可以将两列作为不同的文本变量读取，用逗号连接它们，然后使用 INPUT 函数“读取”结果：

```
data Employ;
   infile file1 dsd truncover;
   input id       :       $3.
         name     :      $20.
         depart   :       $8.
         datehire : mmddyy10.
         salary_a :       $8.
         salary_b :       $8.
         ;
   salary = input( catx(',',salary_a,salary_b),dollar8.);
   drop salary_a salary_b;

   format datehire mmddyy10.
          salary    dollar8.;
run; 
```

请注意，该`truncover`选项已添加到您的`infile`语句中。这对于允许 SAS 正确处理最后一个变量 (salary_b) 很重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T17:52:07.287

我得到了解决问题的方法，即在读取**薪水变量**而不是**冒号（:) 修饰符**并且不使用**trunco​​ver时使用与号****（&）**

 ******```
数据使用；
    infile 文件 1 dsd;
    输入 ID：3 美元。
          姓名：20美元。
          出发：8 美元。
          约会：mmddyy10。  
          工资和美元 8。  
          ;
    格式化 datehire mmddyy10。
           工资 8 美元；
跑;
```

**&**将继续读取salary 变量，直到遇到两个逗号分隔符。因此，可以正确读取文件。******

# rspec - Mongoid == (equals) 运算符未按预期工作

> ID：12025501
> 
> 赞同：0
> 
> 时间：2012-08-19T09:26:39.167
> 
> 标签：rspec, mongoid

有时在我的测试中，我会比较两个用户对象：

```
transaction.sender.should == user1 
```

Rspec 给了我一些输出，显示对象具有相同的 id（和其他参数）但具有不同的对象 id：

```
 Failure/Error: tx.sender.reload.should == @u1.reload
   expected: #<User _id: 5030afb4f8182bb3a9000005, ...>
        got: #<User _id: 5030afb4f8182bb3a9000005, ...> (using ==)
   Diff:#<User:0x007fc0c7e56cf0>.==(#<User:0x007fc0c7ec53f8>) returned false even though the diff between #<User:0x007fc0c7e56cf0> and #<User:0x007fc0c7ec53f8> is empty. Check the implementation of #<User:0x007fc0c7e56cf0>.==. 
```

我不确定这是为什么。我假设 diff 行上显示的用户 id 意味着它是对象的不同实例，但 Mongoid 应该检查 _id 参数是否相等，对吗？我正在使用 Mongoid 2.4.12。

我认为如果对象已过时但结果相同，这可能会有所帮助：

```
transaction.sender.reload.should == user1.reload 
```

我现在已经开始这样做了，但我担心可能还有其他事情发生。

```
transaction.sender.id.should == user1.id 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T11:34:45.517

Mongoid 首先检查类是否相同，然后检查 id 来检查相等性。

[https://github.com/mongoid/mongoid/blob/master/lib/mongoid/document.rb#L37](https://github.com/mongoid/mongoid/blob/master/lib/mongoid/document.rb#L37)

如果这失败了，我怀疑还有其他东西覆盖了 Document#==，我会 grep 你的 gem 看看是否是这种情况。

# apache - Apache 重写简单规则

> ID：12025504
> 
> 赞同：0
> 
> 时间：2012-08-19T09:27:57.157
> 
> 标签：apache, .htaccess

我只想重写语言（仅此而已）：en > lang/en, es > lang/es ...等。

```
http://domain.com/en  >  http://domain.com/lang/en 
http://domain.com/es  >  http://domain.com/lang/es 
http://domain.com/en/places?User=1  >  http://domain.com/lang/en/places?User=1
http://domain.com/es/places?User=1  >  http://domain.com/lang/es/places?User=1 
```

我当前的 .htacces 是：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteRule ^en(.*)$ lang/en$1 [NC,L]
RewriteRule ^es(.*)$ lang/es$1 [NC,L] 
```

请问，是这样吗？我看到最终 URL：[http://domain.com/lang/en/places?User=1](http://domain.com/lang/en/places?User=1)并且我希望浏览器显示[http://domain.com/en/places?User=1](http://domain.com/en/places?User=1)。有可能吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T10:00:37.593

您希望浏览器显示原始 URL 吗？它需要“直通”。尝试将“[NC]”更改为“[PL]”

# c# - 如何在 Awesomium.net 中检测到 imge 的加载完成？

> ID：12025516
> 
> 赞同：0
> 
> 时间：2012-08-19T09:30:48.067
> 
> 标签：c#, awesomium

我在我的 C#-WPF 应用程序中使用 Awesomium 1.6 来显示来自某个 url 的图像。我想在图像加载和显示完成后，关闭 WebControl。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:48:28.497

[您可以通过注册到WebControl.LoadCompleted](http://awesomium.com/docs/1_6_6/sharp_api/html/6becad6a-eafc-79c9-b02a-c71d1b362e10.htm)事件来确定页面加载何时完成。当页面完成加载和渲染时触发该事件。

您可以使用[WebControl.Close()](http://awesomium.com/docs/1_6_6/sharp_api/html/fc8e4f91-15a7-0f4a-fc40-a3b2ca62fdeb.htm)方法告诉您的 WebControl 关闭。这会杀死您的 WebControl。

# css - 如何让我的 facebook like 按钮不低于其他社交按钮

> ID：12025519
> 
> 赞同：0
> 
> 时间：2012-08-19T09:31:33.473
> 
> 标签：css, facebook, button, facebook-like

我在 stumbleupon 和 google plus 按钮旁边有一个类似 facebook 的按钮，但是 facebook 按钮很顽固，并且比其他按钮低了几个像素。有谁知道解决这个问题？（这是 html5 fb 按钮）但是，我尝试了 CSS，甚至在按钮本身中编辑代码，但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T09:46:57.190

尝试

```
.fb_iframe_widget {
     vertical-align: top;
} 
```

# ios - 在 iPad 上测量函数的运行时间

> ID：12025520
> 
> 赞同：1
> 
> 时间：2012-08-19T09:31:35.557
> 
> 标签：ios, xcode, ipad, time, ctime

我想知道在 iPad 上运行的某个功能所消耗的确切时间。由于某种原因，我在运行应用程序时无法将 iPad 连接到 macbook（USB 被其他设备占用）。

我试过使用时钟（），像这样

```
clock_t start = clock();

/* Do something here */

double executionTime = (double)(clock()-start) / CLOCKS_PER_SEC; 
```

我不知道为什么 executionTime 的值会是 0。开始时间和结束时间的差异大约是 1,000,000,000（我自己计算）。但是我无法得到正确的 CLOCKS_PER_SEC（它每次都会改变），所以我不知道那个数字的含义。

我读了帖子“iOS 设备上的 ctime 不能正确测量时间”，但它没有帮助。有没有办法修复 CLOCKS_PER_SEC？或者还有其他方法可以测量时间。

谢谢

CLK_TCK 的值为 1,000,000。整个程序以 5 秒结束。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T12:12:48.670

`executionTime`是双精度数，而不是整数。您必须使用`%f`格式而不是`%d`格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T09:35:51.823

查看 xcode 提供的分析实用程序。

这里有更多信息：

[如何使用 Instruments 分析内存使用情况和性能？](https://stackoverflow.com/questions/6641540/xcode-4-how-to-profile-memory-usage-performance-with-instruments)

它非常强大，而且很棒:)

# c# - C# 中哪种类型可以渲染这个 json 集合

> ID：12025524
> 
> 赞同：0
> 
> 时间：2012-08-19T09:32:06.710
> 
> 标签：c#, json, types

在 C# 中哪个`type`可以呈现这个 json 结果？

```
[[30.51,46.30],[31.54,45.83]] 
```

我试过`IDictionary<decimal, decimal>`但`dictionary`不支持序列化，我不能使用第三方组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T09:40:55.353

您要查找的类型是`List<List<double>>`. 使用[System.Web.Script.Serialization.JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer%28v=vs.100%29.aspx)

```
string json = "[[30.51,46.30],[31.54,45.83]]";
var listOfLists = new JavaScriptSerializer().Deserialize<List<List<double>>>(json); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T09:57:24.353

一个`list of lists`
或一个`array of arrays`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T09:36:12.440

你有没有尝试过：

[http://james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)

一个出色的 C#/.NET 解决方案，用于与 JSON 相互转换。也可序列化。

# java - 如何减少 JVM 虚拟内存使用量？

> ID：12025525
> 
> 赞同：6
> 
> 时间：2012-08-19T09:32:57.107
> 
> 标签：java, unix, jvm, solaris

我有一个 Java 程序可以在具有 2GB 物理内存和 2GB 交换空间的 Solaris 10 X86 上运行。

该程序在 64 位 Linux 下运行良好，仅消耗约 450MB 内存。

然而，当它在 Solaris 中运行时，它总是报告 OutOfMemoryError，我注意到在错误发生之前，它试图使用 > 4GB 的虚拟内存，这在 32 位系统上绝对不可能。

那么为什么 JVM 会尝试使用那么多虚拟内存呢？有没有办法告诉JVM不要使用那么多虚拟内存？

谢谢你。

编辑：

谢谢大家的意见！这是完整的错误消息：

```
#
# There is insufficient memory for the Java Runtime Environment to continue.
# Native memory allocation (malloc) failed to allocate 32756 bytes for ChunkPool::allocate
# Possible reasons:
#   The system is out of physical RAM or swap space
#   In 32 bit mode, the process size limit was hit
# Possible solutions:
#   Reduce memory load on the system
#   Increase physical memory or swap space
#   Check if swap backing store is full
#   Use 64 bit Java on a 64 bit OS
#   Decrease Java heap size (-Xmx/-Xms)
#   Decrease number of Java threads
#   Decrease Java thread stack sizes (-Xss)
#   Set larger code cache with -XX:ReservedCodeCacheSize=
# This output file may be truncated or incomplete.
#
#  Out of Memory Error (allocation.cpp:211), pid=1052, tid=16
#
# JRE version: 6.0_26-b03
# Java VM: Java HotSpot(TM) Server VM (20.1-b02 mixed mode solaris-x86 )

---------------  T H R E A D  ---------------

Current thread (0x081a3400):  JavaThread "C2 CompilerThread1" daemon 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T09:47:25.617

您可能正在向 JVM 传递参数，使其使用这么多内存。

取决于确切的错误 - 它是堆空间问题还是永久空间问题？- 将参数传递给 jvm，例如 -Xms512m 和 -Xmx512m，或 -XX:PermSize=128m 和 -XX:MaxPermSize=128m，可能会解决您系统上的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T09:41:18.273

尝试设置 jvm 参数`-Xmx1g`以限制最多 1 GB 的使用。

# git - Git - 不包含在导出中的文件

> ID：12025526
> 
> 赞同：1
> 
> 时间：2012-08-19T09:33:14.933
> 
> 标签：git, version-control, github, export, pull

所以问题如下：

1.  我从远程分支拉了一些合并冲突

2.  我曾经`git reset --hard <commit hash>`恢复先前拉动所做的所有更改

问题是在拉取期间发生冲突的文件现在不包括在我执行`git export`或`archive`.

这些文件在我的本地存储库中；[例如，如果我在GitHub 上](http://en.wikipedia.org/wiki/GitHub)浏览它们，我可以看到它们，但如果我执行 Git 导出，或者即使我从 GitHub 将存储库作为 ZIP 文件下载，在拉取期间发生冲突的文件也不包括在内。我可以获得所有文件的唯一方法是进行 Git 签出。

我尝试了提交、推送、拉取，它说`Up to Date`文件在那里并且没有更改，但由于某种原因，它们不包含在 Git 导出或存档中。

同样，只有在从不同远程存储库拉取期间发生冲突的文件才会出现此问题。我该如何解决这个问题，因为我没有想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:05:56.440

当你`git reset --hard`摆脱冲突时，你就摆脱了整个合并，包括你拉下来的东西。您有 3 个选择：

1.  拒绝服务器上的内容并重置您的分支（这是您已经做过的）
2.  拒绝您拥有的内容，只需将分支更新为服务器拥有的内容`git reset --hard origin/master`（假设您正在处理主分支）。
3.  通过编辑冲突的文件来解决冲突。然后`git add -A`和`git merge --continue`。

现在 master 将包含您需要的内容。要导出，您可以`git archive`通过 tar 使用和管道输出。或者您可以`git push master`让服务器反映您所做的事情。`--force`如果您选择拒绝服务器包含的内容，请添加该选项。

# safari - 我可以从 Safari 扩展中检测 Safari 是否是版本 6？

> ID：12025527
> 
> 赞同：0
> 
> 时间：2012-08-19T09:33:15.820
> 
> 标签：safari, safari-extension, safari6

基本上我有一个 Safari 扩展，我想向 Safari 6 提供与我用于 Safari 5.1 的代码略有不同的代码......

有没有办法可以从扩展中检测浏览器版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T21:42:29.083

如果您的 Safari 6 特定代码依赖于 Safari 6 中的新 API，您应该使用功能检测来确定您是否可以使用该功能。例如，如果您想处理 Safari 6 的新 Reader API：

```
var thisTab = safari.application.activeBrowserWindow.activeTab;

if (thisTab.reader) {
    // do something with Reader
} else {
    // do something else
} 
```

如果功能检测对您不起作用，您可以使用`window.navigator.appVersion`来确定 Safari 的主要版本。例如：

```
var majorVersion = /Version\/(\d+\.?\d*)/.exec(navigator.appVersion)[1]; 
```

但是特征检测总是更可取的。

# java - prolog (java) 文件中不允许 SAX 异常内容正常

> ID：12025530
> 
> 赞同：0
> 
> 时间：2012-08-19T09:34:40.260
> 
> 标签：java, xml, feed, sax, podcast

我在使用 JAVA SAX 解析器解析此文件时遇到问题：

[http://feeds.escapeartists.net/PodCastle_Main](http://feeds.escapeartists.net/PodCastle_Main)

大多数时候我得到例外：序言中不允许内容

我用Notepad++查看了文件，prolog还可以，至少我是这么认为的。

许多其他播客提要都有效，例如。[http://feeds.feedburner.com/newz-of-the-world](http://feeds.feedburner.com/newz-of-the-world)

有趣的是：播客提要的成功率约为 10%。

有什么建议么 ？

于尔根

编辑：有趣的是，我手动下载了文件并将其上传到我自己的网站空间。- 从那里一切都很好......奇怪

EDIT2：代码

```
 URL url = new URL(this.urlString);
        _setProxy(); // Set the proxy if needed 
        urlInputStream = url.openConnection().getInputStream();

        spf = SAXParserFactory.newInstance();
        sp = spf.newSAXParser();

        if ( urlInputStream == null) {
            System.out.println("blub blub");
        }
        BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream(), "UTF-8"));

        System.out.println ("<<<<"+this.urlString+">>>> :" +  in.readLine() );
        System.out.println ("<<<<"+this.urlString+">>>> :" +  in.readLine() );
        in.close();

        InputStream is = url.openStream();

        try {

        sp.parse(url.toURI().toString(), this);

        } catch (SAXParseException e) {
            System.err.println(e.getMessage());
        } 
```

输出：

<<<< ttp://feeds.escapeartists.net/PodCastle_Main>>>>：（不可打印字符）<<<< ttp://feeds.escapeartists.net/PodCastle_Main>>>>：（不可打印字符）

com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException：1-Byte-UTF-8-sequence 的字节 1 无效。...

sax 解析器的类似异常...

所以问题不是萨克斯，而是数据传输。它的工作时间大约有一半。所有其他 testet .xml 文件都可以工作。

有人知道这个效果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:49:00.210

现在我已经实现了这个解决方法。我认为发布网站的网络服务器有问题

```
 int TRIES = 10;
        for (int tries = 0; tries < TRIES; tries++) {
            InputStream is = url.openStream();
            try {

                sp.parse(is, this);
                //here succesfull
                tries = TRIES; //break loop

            } catch (SAXParseException e) {
                System.err.println(e.getMessage());
            } catch (MalformedByteSequenceException ex) {
                System.out.println("Connection to " + url.toString() + " failed "+ (tries+1) +" times , trying again... (maximum tries = "+ TRIES +")");
                 Thread.sleep(250);
            }
      } 
```

经过 2 或 3 次尝试后，流工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T13:23:24.840

可能您的文档的开头不干净——可能是一两个额外的字符意外进入。您应该能够从 SAXException 中提取它反对的行和列。

# python - 为什么 1.__add__(2) 不起作用？

> ID：12025531
> 
> 赞同：15
> 
> 时间：2012-08-19T09:34:54.837
> 
> 标签：python, operator-keyword, literals

> **可能重复：**
> [访问 python int 文字方法](https://stackoverflow.com/questions/10955703/accessing-a-python-int-literals-methods)

在 Python 中，`everything is an object`.

但是话又说回来，为什么以下代码段不起作用？

```
1.__add__(2) 
```

但是，这确实有效：

```
n = 1
n.__add__(2) 
```

`n`和 和有什么不一样`1`？

它不起作用不是设计失败吗？例如，它也适用于`string`文字。

```
"one".__add__("two") 
```

相比之下，它也适用于其他纯面向对象的语言。

让我们仔细看看这个编译 c# 的例子：

```
Console.WriteLine(100.ToString()); 
```

话又说回来，`Python`从`C#`的角度来看有什么区别`everything is an object`？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-19T09:47:44.113

Python 的解析器故意非常简单——它对自身施加的约束之一是，要弄清楚一个标记的含义，它只能向右看一个标记（它是一个[LL(1) 解析器](http://en.wikipedia.org/wiki/LL_parser)）。

因此，它看到 [number][dot]，并确定它是浮点文字。`'_'`不是浮点文字中的有效字符，因此会出现语法错误。

克服这个问题的最明显和最常见的方法是将数字放在括号中：

```
(1).__add__(2) 
```

这迫使它`1`在解析器的限制内将 解释为整数文字，并将点解释为属性访问。

另一个有趣的解决方法是：

```
>>> 1 .__add__(2) 
3 
```

也就是说，在`.`. 事实证明，Python 总是允许有一个空间用于任何属性查找：

```
>>> range(4) .count(3)
1 
```

我发现这很令人惊讶，但似乎 Python 处理`.`与 类似的规则`+`，因此会在它周围留出尽可能多的空间。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-19T10:12:59.823

Python 解释`1.`为浮点数，因此您必须添加括号：

```
>>> (1).__add__(2)
3 
```

或空间：

```
>>> 1 .__add__(2)
3 
```

如果你想要浮点值，只需放 2 个点。

```
>>> 1..__add__(2) #float
3.0 
```

# c# - 构建安装项目，错误 1001（自定义操作有问题）

> ID：12025532
> 
> 赞同：0
> 
> 时间：2012-08-19T09:35:48.153
> 
> 标签：c#, windows-installer

对此颇为不解。这不是我第一次建立一个设置 - 从来没有见过这样的东西..

基本上，只要我添加自定义操作并尝试安装，我就会收到此错误。

[![无赖](../Images/a4e3635f5bfdb0a176d534b1a8aa11f1.png)](https://i.stack.imgur.com/oy8rC.png)

我确实有一个安装程序类，其中包含所有必需的代码字段，并且与我在以前的安装程序类中使用的字段相同。

```
[RunInstaller(true)]
public partial class Installer : System.Configuration.Install.Installer
{

    public Installer()
    {
        InitializeComponent();
    }

    public override void Commit(IDictionary savedState)
    {
        base.Commit(savedState);
        // Do some work on commit 
    }
... 
```

来自 Fuselogvw：

```
*** Assembly Binder Log Entry  (19/08/2012 @ 11:57:09) ***

The operation was successful.
Bind result: hr = 0x0\. The operation completed successfully.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  C:\Windows\syswow64\MsiExec.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = NT AUTHORITY\SYSTEM
LOG: Where-ref bind. Location = C:\Program Files (x86)\OrScanTechnologies\CamerasCalibrationApp\CamCalibApplication.exe
LOG: Appbase = file:///C:/Windows/syswow64/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = MsiExec.exe
Calling assembly : (Unknown).
LOG: This bind starts in LoadFrom load context.
WRN: Native image will not be probed in LoadFrom context. Native image will only be probed in default load context, like with Assembly.Load().
LOG: No application configuration file found.
LOG: Using host configuration file: C:\Users\-\AppData\Local\Temp\CFGB105.tmp
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/OrScan Technologies/CamerasCalibrationApp/CamCalibApplication.exe.
LOG: Assembly download was successful. Attempting setup of file: C:\Program Files (x86)\OrScan Technologies\CamerasCalibrationApp\CamCalibApplication.exe
LOG: Entering run-from-source setup phase.
LOG: Assembly Name is: CamCalibApplication, Version=1.5.2.2, Culture=neutral, PublicKeyToken=null
LOG: Re-apply policy for where-ref bind.
LOG: Where-ref bind Codebase does not match what is found in default context. Keep the result in LoadFrom context.
LOG: Binding succeeds. Returns assembly from C:\Program Files (x86)\OrScan Technologies\CamerasCalibrationApp\CamCalibApplication.exe.
LOG: Assembly is loaded in LoadFrom load context. 
```

更多来自 fuselogvw 的 [信息 http://s13.postimage.org/hqn04w1bb/Untitled2.png](http://s13.postimage.org/hqn04w1bb/Untitled2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:23:25.240

谷歌搜索 Windows Installer XML (WiX) 部署工具基础 (DTF) 自定义操作。这是托管代码自定义操作的黄金标准，将消除 1001 错误消息。

也就是说，一定不要重新发明轮子。始终使用本机 Windows Installer 标准表和操作，而不是滚动您自己的进程外自定义操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T09:43:15.777

有时，这种错误是由项目平台目标配置不匹配引起的。检查您的所有解决方案项目是否都是 AnyCPU/x64/x86（无论您喜欢它们是什么）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:59:00.630

解决方案是添加 2 个未添加为依赖项的 opencv dll 文件。成功了。

# c# - 当鼠标悬停在条形图上时，如何在 C# 图表上更改和显示工具提示？

> ID：12025536
> 
> 赞同：9
> 
> 时间：2012-08-19T09:36:38.137
> 
> 标签：c#, charts, tooltip

我有一个`System.Windows.Forms.DataVisualization.Charting.chart`，当您将鼠标悬停在图表上时，我想在图表上显示一些有关条形的信息。但我看不到在哪里设置工具提示。

我可以设置这个`chart3.Series[0].ToolTip = "hello world";`

但是我如何选择我悬停在哪个`x`或值上以修改文本？`y`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-12-20T13:05:45.947

我很惊讶没有人提到简单和标准的解决方案，所以我不得不回答一个 5 岁的问题。

只需将图表关键字添加到工具提示字符串即可。它们会自动替换为您悬停的点的值。像这样的东西：

```
chart3.Series[0].ToolTip = "hello world from #VALX, #VAL"; 
```

这些应该涵盖几乎所有图表工具提示用例。对于他们未涵盖的罕见情况，您可以使用其他答案的建议。

更多信息： [https ://msdn.microsoft.com/en-us/library/dd456687.aspx](https://msdn.microsoft.com/en-us/library/dd456687.aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-02T06:42:52.233

您还可以在构建 DataPoint 时为其添加工具提示

```
DataPoint point = new DataPoint();
point.SetValueXY(x, y);
point.ToolTip = string.Format("{0}, {1}", x, y);
series.Points.Add(point); 
```

在我看来，这比替换 GetToolTipText 事件中的文本更整洁/更干净

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-19T09:57:49.933

```
 this.chart1.GetToolTipText += new System.EventHandler<System.Windows.Forms.DataVisualization.Charting.ToolTipEventArgs>(this.Chart1_GetToolTipText);
...
// [2] in x.cs file.
private void Chart1_GetToolTipText(object sender, System.Windows.Forms.DataVisualization.Charting.ToolTipEventArgs e)
{

   // Check selevted chart element and set tooltip text
   if (e.HitTestResult.ChartElementType == ChartElementType.DataPoint)
   {
      int i = e.HitTestResult.PointIndex;
      DataPoint dp = e.HitTestResult.Series.Points[i];
      e.Text = string.Format("{0:F1}, {1:F1}", dp.XValue, dp.YValues[0] );
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-24T05:12:45.453

这适用于我的财务（棒、烛台）图表。`YValue[0]`不像大多数`DataPoint`例子那样显示，而是`YValue`Y 轴。

```
 Point? prevPosition = null;
    ToolTip tooltip = new ToolTip();

    private void chart_MouseMove(object sender, MouseEventArgs e)
    {
        var pos = e.Location;
        if (prevPosition.HasValue && pos == prevPosition.Value)
            return;
        tooltip.RemoveAll();
        prevPosition = pos;
        var results = chart.HitTest(pos.X, pos.Y, false, ChartElementType.DataPoint); // set ChartElementType.PlottingArea for full area, not only DataPoints
        foreach (var result in results)
        {
            if (result.ChartElementType == ChartElementType.DataPoint) // set ChartElementType.PlottingArea for full area, not only DataPoints
            {
                var yVal = result.ChartArea.AxisY.PixelPositionToValue(pos.Y);
                tooltip.Show(((int)yVal).ToString(), chart, pos.X, pos.Y - 15);
            }
        }
    } 
```

# silverlight - 检测 T4 模板中 CodeClass 对象的最后修改日期和时间

> ID：12025542
> 
> 赞同：1
> 
> 时间：2012-08-19T09:37:54.903
> 
> 标签：silverlight, t4, codedom

在我的 Silverlight 测试项目中，我创建了一个 T4 模板，它检测项目中的所有 CodeClass 对象，这些对象派生自 System.Windows.Controls.UserControl，根据它们的命名空间对它们进行分组，并创建一个包含指向所有用户的链接的导航栏项目中的控制。现在我想以某种方式概述我当前正在处理的 UserControl，那么是否可以在 T4 模板中检测 CodeClass 对象的最后修改 DateTime ？

# php - 此代码是否使用 php 邮件功能？

> ID：12025545
> 
> 赞同：-3
> 
> 时间：2012-08-19T09:38:36.760
> 
> 标签：php, forms, sendmail

我正在使用下面的脚本发送电子邮件，不幸的是，它不适用于我的虚拟主机英国帐户。

他们的帮助台告诉我这可能是因为他们已经停用了 php 邮件功能。

所以我的问题是：下面的代码是使用 php 邮件功能吗？如果是这种情况，使其符合“SMTP 身份验证”的难度有多大？

非常感谢

```
<?php
$sendto   = "myaddress@gmail.com";
$usermail = $_POST['email'];
$username = $_POST['name'];
$content  = nl2br($_POST['msg']);

$subject  = "New Message frm";
$headers  = "From: " . strip_tags($usermail) . "\r\n";
$headers .= "Reply-To: ". strip_tags($usermail) . "\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html;charset=utf-8 \r\n";

$msg  = "<html><body style='font-family:Arial,sans-serif;'>";
$msg .= "<h2 style='font-weight:bold;border-bottom:1px dotted #ccc;'>New message</h2>\r\n";
$msg .= "<p><strong>From:</strong> ".$username."</p>\r\n";
$msg .= "<p><strong>E-mail:</strong> ".$usermail."</p>\r\n";
$msg .= "<p><strong>Message:</strong> ".$content."</p>\r\n";
$msg .= "</body></html>";

if(@mail($sendto, $subject, $msg, $headers)) {
    echo "true";
} else {
    echo "false";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:51:12.327

如果你想让它符合 SMTP，那么我建议你去寻找 PHPMailer 库，它只是几个类（如果我没记错的话，你只需要一个），它会让它符合 SMTP，而且它是比使用更推荐`mail()`。

另外，尝试将 @ 从`mail()`函数中取出，是的，它正在使用`@mail()`.

希望这可以帮助。:)

# php - 使用正则表达式从字符串中删除日期

> ID：12025546
> 
> 赞同：2
> 
> 时间：2012-08-19T09:38:48.810
> 
> 标签：php, regex

好的，所以我有一个字符串 $title_string ，它可能看起来像以下任何一种：

```
$title_string = "20.08.12 First Test Event";
$title_string = "First Test event 20/08/12";
$title_string = "First Test 20.08.2012 Event"; 
```

我需要以两个变量结束：

```
$title = "First Test Event";
$date = "20.08.12"; 
```

无论最初是什么，日期的格式都应转换为句号。

我开始使用的 Regex 字符串看起来像这样：

```
$regex = ".*(\d+\.\d+.\d+).*"; 
```

但我不能让它以我需要的方式工作。所以总而言之，我需要在字符串中找到一个日期，将其从字符串中删除并正确格式化。干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T10:07:22.043

使用正则表达式匹配日期可能非常复杂。有关示例正则表达式，请参阅[此问题。](https://stackoverflow.com/questions/5978510/regex-to-match-date)找到日期后，您可以使用[str_replace()](http://php.net/manual/en/function.str-replace.php)将其从标题中删除。

这是一个基本的实现：

```
$title_string = "20.08.12 First Test Event";

if ( preg_match('@(?:\s+|^)((\d{1,2})([./])(\d{1,2})\3(\d{2}|\d{4}))(?:\s+|$)@', $title_string, $matches) ) {
    //Convert 2-digits years to 4-digit years.
    $year = intval($matches[5]);
    if ($year < 30) { //Arbitrary cutoff = 2030.
        $year = 2000 + $year;
    } else if ($year < 100) {
        $year = 1900 + $year;
    }

    $date = $matches[2] . '.' . $matches[4] . '.' . $year;
    $title = trim(str_replace($matches[0], ' ', $title_string));
    echo $title_string, ' => ', $title, ', ', $date;
} else {
    echo "Failed to parse the title.";
} 
```

输出：

```
20.08.12 First Test Event => First Test Event, 20.08.2012 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:23:50.810

```
<?php
#$title_string = "20.08.12 First Test Event";
#$title_string = "First Test event 20/08/12";
$title_string = "First Test 20.08.2012 Event";

preg_match('~([0-9]{1,2}[\.|/][0-9]{1,2}[\.|/][0-9]{1,4})~', $title_string, $matches);
$date = $matches[1];
$title = preg_replace('~[[:space:]]{2,}~', ' ', str_replace($date, '', $title_string));

echo 'Date: '.$date.'<br />';
echo 'Title: '.$title; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T10:24:23.197

I made some tests and this should be ok the new_title() does a replace of / by . then the preg_split splits the string when the date is met

```
<?php 
$regex = "#(\d+[./]\d+[./]\d+)#";
print $regex . "\n\n";

print "20.08.12 First Test Event";
$title_string = new_string("20.08.12 First Test Event");
print $title_string . "\n";
$var = preg_split($regex,$title_string,-1,PREG_SPLIT_DELIM_CAPTURE);
print "result";
var_dump($var);

print "\n\n";

print "First Test event 20/08/12\n";
$title_string = new_string("First Test event 20/08/12");
print $title_string . "\n";
$var = preg_split($regex,$title_string,-1,PREG_SPLIT_DELIM_CAPTURE);
print "result";
var_dump($var);

print "\n\n";

$title_string = new_string("First Test 20.08.2012 Event");
print $title_string . "\n";
$var = preg_split($regex,$title_string,-1,PREG_SPLIT_DELIM_CAPTURE);
print "result";
var_dump($var);

function new_string($string) {
    return preg_replace_callback( "#(\d+)[./](\d+)[./](\d+)#",
            "new_date",
            $string);
}

function new_date($matches) {
  return $matches[1].'.'.$matches[2].'.'.$matches[3];
} 
```

hope this could help

regards

# php - 使用 $.ajax 将多个变量传递给 php 脚本

> ID：12025547
> 
> 赞同：-1
> 
> 时间：2012-08-19T09:40:04.890
> 
> 标签：php, mysql, ajax

我有这个脚本：

```
 var wall_user_id =  "<?php echo $_SESSION['user_id'];?>";

 $.ajax({
            type: "POST",
            url: "insert.php",
            data: "user_id=" + wall_user_id,
            success: function () {
                $('ul#posts').prepend(wall_post);

            }
        });//end success function 
```

将 wall_user_id 发送到 php 脚本：

```
 <?php
      require 'core/functions/init.php';

      $user_id = mysql_real_escape_string($_POST['user_id']);
      $sql = 'INSERT INTO wall (user_id) VALUES('.$user_id.')';
      mysql_query($sql);
      ?> 
```

这工作正常，但如果我尝试添加更多这样的值，它不会：

```
 var wall_user_id =  "<?php echo $_SESSION['user_id'];?>";
             var wall_userimage = "<?php echo $user_data['imagename']; ?>";

 $.ajax({
            type: "POST",
            url: "insert.php",
            data: "user_id=" + wall_user_id +"userimage="+ wall_userimage,
            success: function () {
                $('ul#posts').prepend(wall_post);

            }
        });//end success function 
```

和 insert.php：

```
 <?php
      require 'core/functions/init.php';

      $user_id = mysql_real_escape_string($_POST['user_id']);
      $userimage = mysql_real_escape_string($_POST['userimage']);

      $sql = 'INSERT INTO wall (user_id, image) VALUES('.$user_id.','.$userimage.')';
      mysql_query($sql);
      ?> 
```

它不会向数据库中插入任何值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T09:41:05.743

您可以在以下内容中传递任意数量的值`data`：

```
data: { user_id: wall_user_id, userimage: wall_userimage } 
```

并在您的示例中用于`&`分隔参数：

```
data: "user_id=" + wall_user_id + "&userimage=" + wall_userimage 
```

但是第一种方法是推荐的方法，因为 jQuery 负责正确地对值进行 url 编码。如果你想正确地做你的例子，你应该写：

```
data: "user_id=" + encodeURIComponent(wall_user_id) + "&userimage=" + encodeURIComponent(wall_userimage) 
```

这显然是太多的代码。所以使用第一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T09:49:27.723

数据查询字符串错误。你忘了`&`

`data : "user_id=" + wall_user_id +"&userimage="+ wall_userimage`

或者你可以使用对象

```
data : { 'user_id': wall_user_id, 'userimage': wall_userimage } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T09:50:46.507

不能这样发送多个变量。您发布的值如下数据：“user_id=" + wall_user_id +"userimage="+ wall_userimage

这不适用于多个变量。您可以执行以下操作

$.post(" 你需要发帖的地址 ",{ "user_id": wall_user_id , "userimage" : wall_userimage}, function(response) { ......... });

或者

数据：{“user_id”：wall_user_id，“userimage”：wall_userimage}

数据应作为数组传递

# wpf - 统一和类型提供者

> ID：12025549
> 
> 赞同：1
> 
> 时间：2012-08-19T09:40:10.957
> 
> 标签：wpf, f#, prism, type-providers

运行以下代码后，在 F# WPF 模板的项目中添加了 Nuget Prism

```
module MainApp

open System
open System.Windows
open System.Windows.Controls
open Microsoft.Practices.Unity
open Microsoft.Practices.Prism.UnityExtensions;
open FSharpx

type Shell = XAML<"MainWindow.xaml">

type App () =
   inherit Application()

   override x.OnStartup e =
      base.OnStartup(e);
      let bt = new BootStrapper()
      bt.Run()

and  BootStrapper () = 
   inherit UnityBootstrapper()

   override x.CreateShell() = 
     let a = x.Container.Resolve<Shell>()

     let b = a.Root
     b :> DependencyObject

   override x.InitializeShell()= 
         base.InitializeShell();
         App.Current.MainWindow <- x.Shell :?> Window
         App.Current.MainWindow.Show()

[<STAThread>]
(new App()).Run() |> ignore 
```

我在编译时没有收到错误，但在运行时出现异常说 a.Root 是一个 FrameworkElement，它不能转换为 Window。

调试时，我看到“a”的运行时内容与 XAML 类型提供程序的内部表示的类型相同，即 {FSharpx.TypeProviders.XamlProvider.XamlFile}，如此[处所示](https://github.com/fsharp/fsharpx/blob/master/src/FSharpx.TypeProviders/XamlProvider.fs)，其内部字典为空。

我不确定 TP 的内部表示是否应该浮出水面。看起来 Unity 忽略了 Type Provider 机制。我想这是因为 Unity 似乎使用反射来找出依赖关系。

有没有人在使用 TP 时遇到过类似的行为，可以提供一些启示？

PS：F# 中的这种差异编译/运行时非常令人惊讶。虽然一定有充分的理由，但我忘记了发生这种情况的可能性！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T18:05:15.600

正如我在 FSharpX 源代码中看到的那样，Xaml 类型提供程序被删除了一个 - 您没有元数据中的 Shell 类型，所有与此类型一起使用的内容都被删除为使用基本类型的操作 - XamlFile。所以这

```
let a = x.Container.Resolve<Shell>() 
```

会被抹去

```
let a = x.Container.Resolve<XamlFile>() 
```

所以 Unity 只会创建新的 XamlFile 实例。相反，如果您尝试直接实例化 Shell - 那么 F# 编译器将使用提供的构造函数，所以这

```
let a = Shell() 
```

实际上意味着

```
let a = XamlFile(XamlReader.Parse( <content-of-xaml-file> )) 
```

在您的情况下，您可能可以实例化 Shell，然后使用 x.Container.BuildUp() 填充其内部。

```
type App () =
   inherit Application()

   override x.OnStartup e =
      base.OnStartup(e);
      let bt = new BootStrapper()
      bt.Run()

and  BootStrapper () = 
   inherit UnityBootstrapper()

   override x.CreateShell() = 
     let a = Shell()
     x.Container.BuildUp(a.Root) :> _

   override x.InitializeShell()= 
         base.InitializeShell();
         App.Current.MainWindow <- x.Shell :?> Window
         App.Current.MainWindow.Show()

[<STAThread>]
(new App()).Run() |> ignore 
```

# iphone - 如何在 x 方向绘制图像？

> ID：12025550
> 
> 赞同：-1
> 
> 时间：2012-08-19T09:40:16.480
> 
> 标签：iphone, ios, core-animation, core-graphics

我有一个问题，我想为图表制作动画。为此，我为每个图都有透明的静态图像，它是水平图意味着从左到右的图。

现在我不想像第一次那样扩展这些图像，我们保持宽度 = 0，并且通过动画我们可以将宽度增加到图像的原始宽度，我不想要这个。

我希望图像看起来像图表正在绘制，例如心电图。我有心电图仪的静态图像，并希望显示它是动画的。

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:17:44.990

在白色背景上创建您的图像。整个图形图像。创建另一个完全白色的视图并将其覆盖在图形图像上。然后您可以为顶部图像设置动画，使左侧慢慢向右移动 - 因此 x 随着宽度的减小而增加。

编辑：例如，如果您有三个视图，并且您想为所有三个视图设置动画，您可以使用类似下面的代码，它会在每个视图上缓慢显示纯色叠加层，然后显然滑出视图到左侧（像窗帘一样）：

```
UIView *coverView1 = [UIView alloc] initWithFrame:(CGRect){ {0,0}, graph1View.frame.size}];
coverView1.backgroundColor = [UIColor redColor];
coverView1.alpha = 0;
[graphView1 addSubview:coverView1];

UIView *coverView2 = [UIView alloc] initWithFrame:(CGRect){ {0,0}, graph2View.frame.size}];
coverView2.backgroundColor = [UIColor greenColor];
coverView2.alpha = 0;
[graphView2 addSubview:coverView2];

UIView *coverView3 = [UIView alloc] initWithFrame:(CGRect){ {0,0}, graph3View.frame.size}];
coverView3.backgroundColor = [UIColor blueColor];
coverView3.alpha = 0;
[graphView3 addSubview:coverView3];

[UIView animateWithDuration:0.5 animations:^
{
  coverView1.alpha = 1;
  coverView2.alpha = 1;
  coverView3.alpha = 1;
}
completion:^(BOOL finished)
{
  [UIView animateWithDuration:0.5 animations:^
  {
    CGRect frame;
    frame = coverView1.frame, frame.size.width = 0, coverView1.frame = frame;
    frame = coverView2.frame, frame.size.width = 0, coverView2.frame = frame;
    frame = coverView3.frame, frame.size.width = 0, coverView3.frame = frame;
  }
  completion:^(BOOL finished)
  {
    [coverView1 removeFromSuperview];
    [coverView2 removeFromSuperview];
    [coverView3 removeFromSuperview];
   } ];
} ]; 
```

此处输入的此代码可能有小错别字等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:22:27.583

您可以将图像用作循环缓冲区。换句话说，您只需移动锚点 x 坐标。

# ruby-on-rails - Rails Rspec 混乱

> ID：12025551
> 
> 赞同：1
> 
> 时间：2012-08-19T09:40:18.140
> 
> 标签：ruby-on-rails, rspec

我正在使用 rspec，并且遇到了一些问题。我在 rspec 中收到以下错误

```
 1) MoviesController find movies with same director should call the model method that searches for movie by director
     Failure/Error: get :samedirector, {:id => 1}
     RuntimeError:
       Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id
     # ./app/controllers/movies_controller.rb:63:in `samedirector'
     # ./spec/controllers/movies_controller_spec.rb:11:in `block (3 levels) in <top (required)>' 
```

这是我的 movies_controller_spec.rb

```
describe MoviesController do  
  describe 'find movies with same director' do  
    let(:movie) { Movie.create }  
    before {movie.id=1, movie.director = "Steven S", movie.title="Hello World"}  
    subject { movie }  
    it 'should call the model method that searches for movie by director' do  
      Movie.should_receive(:find).with("1")  
      #this get is passing a nil id  
      get :samedirector, {:id => movie.id}  
    end  
  end  
end 
```

这是我的 MovieController.rb

```
def samedirector  
    movie = Movie.find(params[:id])  
    @director = movie.director  
  end 
```

任何帮助，将不胜感激。这是一个家庭作业问题，所以如果你能给我更多的直觉并指出我做错的潜在行而不是解决方案代码，那将非常有帮助。

**更新**

我根据您所说的进行了修复，然后将其初始化为

```
before (:each) do
  @movie = Movie.create(:director => "Steven S", :title=>"Hello World")
end 
```

但是，我现在有以下问题。似乎没有认识到导演是控制器中的史蒂文S。不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:47:30.453

您正在对 nil 对象调用 .id 方法。

您在两个地方调用 .id ：

```
before {movie.id=1, movie.director = "Steven S", movie.title="Hello World"} 
```

和

```
get :samedirector, {:id => movie.id} 
```

至少在一个地方，movie == nil。这就是您收到该错误的原因。实际上你在问 nil.id

您不应该尝试`movie`在两者中初始化`let`和`before`，因为它会引起混淆。此外，局部变量不会从`before`子句传递到`it`子句，因为它们是不同的方法（因此不同的局部范围）。请改用实例变量。

相反，只使用 before 子句，并将其称为 @movie：

```
before(:each) do
  @movie = Movie.create(:id => 1, :director => "SS", :title => "hello")
end

it '...' do
  Movie.should_receive(:find).with("1") 
  get :samedirector, {:id => @movie.id}  
end 
```

不过要小心创建行。如果您有 attr_accessible 或类似的东西，它实际上可能不会保存所有属性，在这种情况下您可能需要：

```
before(:each) do
  @movie = Movie.create
  @movie.director = "asdf"
  @movie.title = "asdf"
  @movie.save
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:03:20.593

当你这样做

```
Movie.should_receive(:find).with("1") 
```

你正在改变当你这样做时发生的事情`Movie.find(1)`。这取代了原始实现（即`should_receive`不是测试间谍）。特别是，返回值为 nil（默认情况下）。然后这会破坏您的应用程序代码，因为它不期望`Movie.find`返回 nil

你可以`and_return`用来控制应该返回什么值

```
Movie.should_receive(:find).with("1").and_return(movie) 
```

# java - PrimeFaces 菜单栏未显示（未转换为 HTML）

> ID：12025561
> 
> 赞同：0
> 
> 时间：2012-08-19T09:42:24.143
> 
> 标签：java, jsf, primefaces, menubar

问题是，

```
< p:menubar> ... </p:menubar>
```

正在显示在实际网页中，而不是将其转换为菜单栏。代码片段和页面源代码如下。

下面是一个简单的主菜单：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Main menu</title>
</h:head>
<body>
    <h:form>
        <ui:composition>
            <p:menubar> 
                <p:submenu label="home">
                    <p:menuitem  value="Home" url="/faces/home.jsf"/>
                </p:submenu> 
                <p:submenu label="doStuff">
                    <p:menuitem value="Do Stuff 1" url="#"/> 
                    <p:menuitem value="Do Stuff 2" url="#"/> 
                </p:submenu>
            </p:menubar>
        </ui:composition>
    </h:form>
</body>
</html> 
```

部署时的页面源代码如下（注意来自 xhtml 文件的“代码”正在通过）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="PRAGMA" content="no-cache" />
    <meta http-equiv="EXPIRES" content="-1" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <meta http-equiv="Cache-Control" content="no-store" />
    <meta http-equiv="Cache-Control" content="must-revalidate" />
    <meta http-equiv="Expires" content="Mon,8 Aug 2006 10:00:00 GMT" />
    <title>Main Template</title></head>
<body>
    <div id="header" class="outerFrame">
    </div>
    <div id="navigation" class="outerFrame">
            <p:menubar> 

                <p:submenu label="home">
                    <p:menuitem value="Home" url="/faces/home.jsf"></p:menuitem>
                </p:submenu> 

                <p:submenu label="doStuff">
                    <p:menuitem value="Do Stuff 1" url="#"></p:menuitem> 
                    <p:menuitem value="Do Stuff 2" url="#"></p:menuitem> 
                </p:submenu>

            </p:menubar>
    </div>
    <div id="leftMargin" class="outerFrame">
    </div>
    <div id="rightMargin" class="outerFrame">
    </div>
    <div id="content" class="content">
    </div>
    <div id="footer" class="outerFrame">
    </div>
</body>
</html> 
```

# google-app-engine - simpleauth安装mac的问题

> ID：12025566
> 
> 赞同：0
> 
> 时间：2012-08-19T09:44:06.877
> 
> 标签：google-app-engine, installation

无法安装simpleauth，一直给我“没有模块名称”错误，我安装了它所说的缺失到“google.appengine.api”，我知道它是根据sdk说明安装的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:23:16.123

1.  download simpleauth to the /usr/local/google_appengine directory
2.  edit setup.py

    *   Add to top

    import sys sys.path.append('/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/')

3.  run setup:

    *   from cmd line:

    python setup.py build sudo python setup.py install

# java - 如何使用 Java 中的 PreparedStatement 更新多个列 - JDBC

> ID：12025569
> 
> 赞同：1
> 
> 时间：2012-08-19T09:44:29.510
> 
> 标签：java, mysql, jdbc

我想通过使用 PreparedStatement 使用 Java 应用程序更新 MySQL 数据库中的多列数据，但我不知道该怎么做。

**以下是更新的代码查询：**

```
String s = "UPDATE items SET name =" + u.getName() + ",category="
                + u.getCategory() + ", price=" + u.getPrice()
                + "   ,qunatity=" + u.getQuantity() + " WHERE id = '"
                + u.getId() + "'; "; 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-19T09:51:53.897

**不，不，不，不！**

不要通过连接字符串来构建 SQL 语句**。**我以为我们很久以前就结束了。这是一种*非常*糟糕的做法，也是一种*很好*的方法来创建错误并在您的应用程序中留下*巨大的*安全漏洞。通过连接字符串来创建 SQL 语句是灾难的根源，也是一个需要在它生根之前消除的坏习惯。

[使用准备好的语句](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)- 从长远来看，它将为您节省很多痛苦。

例如，将您编写的内容与以下内容进行比较：

```
PreparedStatement update = connection.prepareStatement
    ("UPDATE items SET name = ?, category = ?, price = ?, quantity = ? WHERE id = ?");

update.setString(1, u.getName());
update.setString(2, u.getCategory());
...
update.setInt(5, u.getId());

update.executeUpdate(); 
```

当然，它稍微有点冗长，但更易读，更不容易出错——更不用说 JDBC 处理了那些使[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)成为可能的讨厌的引用问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T09:46:34.453

您在字符串值周围缺少引号。

```
SET 名称 = '" + u.getName() + "', ...
           ^ ^

```

你也有错别字。`qunatity`应该是`quantity`。

我还建议您查看参数化查询。您当前的代码存在 SQL 注入的风险。

# android - 为什么线程被锁定？

> ID：12025572
> 
> 赞同：0
> 
> 时间：2012-08-19T09:45:09.133
> 
> 标签：android, multithreading, drawing, surfaceview, fingerprint

我下载了它的手指画[教程](https://github.com/droidcode/ThreadPaint)。这个应用程序使用表面视图来实现绘画。

但是，我发现绘图线程被锁定，当我关闭应用程序并重新打开应用程序四五次时系统无法解锁它。

方法调用流程：surfaceCreated -> 开始绘制线程 -> surfaceChanged -> setSurfaceSize()

在setSurfaceSize中同步(pThread)<---等待绘制线程

但是，有时线程没有被系统解锁。

有谁知道问题是什么？

谢谢。

# xcode - 核心数据简单不能得到什么是错的

> ID：12025584
> 
> 赞同：0
> 
> 时间：2012-08-19T09:46:55.453
> 
> 标签：xcode, core-data, save

我在 xcode 中使用 coredata，使用过 ray wonderlich 教程，但是当我尝试声明上下文时它崩溃 - nsmanagedobjectcontext，无法弄清楚到底是什么问题，请帮忙

我创建了只有一个实体 Datum 的核心数据模型，并创建了 nsManagedObjectSublass 文件 Datum.h 和 Datum.m

应用程序委托未更改

看起来对象上下文根本没有创建

**它在 NSManagedObjectContext *context = [self managedObjectContext] 上崩溃了 f...错了这是简单的代码，我实际上复制了所有内容并且它崩溃了**

```
#import <UIKit/UIKit.h>

@interface Start : UIViewController <UIAlertViewDelegate> {

}

- (void) SaveData;

@property (nonatomic, retain) IBOutlet UILabel *timer;
@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;

- (void)saveContext;
- (NSURL *)applicationDocumentsDirectory;

@end

#import "Start.h"
#import "Datum.h"

@implementation Start

@synthesize timer;
@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator;

- (void) SaveData {

    NSLog(@"start 1");

    NSManagedObjectContext *context = [self managedObjectContext];

    NSLog(@"start 2");

    Datum *datumcek = [NSEntityDescription
                                      insertNewObjectForEntityForName:@"Datum"
                                      inManagedObjectContext:context];

    NSLog(@"start 3");

    datumcek.snDatum = [NSDate date];

    NSLog(@"start 4");

    NSError *error;
    if (![context save:&error]) {
        NSLog(@"No save: %@", [error localizedDescription]);
    }

}

- (void)viewDidLoad {

            [self SaveData];

    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc. that aren't in use.
}

- (void)viewDidUnload {

    [UIApplication sharedApplication].idleTimerDisabled=NO;
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {

    [super dealloc];
}

- (void)saveContext
{
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {
            // Replace this implementation with code to handle the error appropriately.
            // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }
}

#pragma mark - Core Data stack

- (NSManagedObjectContext *)managedObjectContext
{
    if (__managedObjectContext != nil)
    {
        return __managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil)
    {
        __managedObjectContext = [[NSManagedObjectContext alloc] init];
        [__managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return __managedObjectContext;
}

- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil)
    {
        return __managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Start" withExtension:@"momd"];
    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return __managedObjectModel;
}

/**
 Returns the persistent store coordinator for the application.
 If the coordinator doesn't already exist, it is created and the application's store added to it.
 */
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil)
    {
        return __persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"Start.sqlite"];

    NSError *error = nil;
    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error])
    {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 

         Typical reasons for an error here include:
         * The persistent store is not accessible;
         * The schema for the persistent store is incompatible with current managed object model.
         Check the error message to determine what the actual problem was.

         If the persistent store is not accessible, there is typically something wrong with the file path. Often, a file URL is pointing into the application's resources directory instead of a writeable directory.

         If you encounter schema incompatibility errors during development, you can reduce their frequency by:
         * Simply deleting the existing store:
         [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]

         * Performing automatic lightweight migration by passing the following dictionary as the options parameter: 
         [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

         Lightweight migration will only work for a limited set of schema changes; consult "Core Data Model Versioning and Data Migration Programming Guide" for details.

         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }    

    return __persistentStoreCoordinator;
}

#pragma mark - Application's Documents directory

// Returns the URL to the application's Documents directory.
- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:57:42.267

确保将其添加到您的应用委托中`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

```
self.window.rootViewController = self.viewController;
self.viewController.managedObjectContext = self.managedObjectContext; 
```

此外，您应该在应用程序委托中添加所有这些 coreDataStack 方法。

并且不要忘记导入 CoreData

```
#import <CoreData/CoreData.h> 
```

编辑：对不起，我意识到您不使用基于视图的应用程序。我认为你不应该打电话`[self saveData]`来`viewDidLoad`。只需添加一个快速按钮或将其添加到`viewWillDispear`

# macos - LSUIElement=YES + kProcessTransformToForegroundApplication：重复的停靠图标

> ID：12025586
> 
> 赞同：4
> 
> 时间：2012-08-19T09:47:01.117
> 
> 标签：macos, cocoa, dock, info.plist

我注意到在 10.7.3 及更高版本（也在 10.8 下）有一些奇怪的行为。

我的应用程序是一个小助手应用程序，默认情况下有一个 NSStatusItem 和一个停靠图标。用户可以配置，如果他只想显示 StatusItem、Dock 图标或两者。为了实现这一点，我`LSUIElement=YES`在 Info.plist 中有。如果用户已配置要显示的 Dock-Icon 我正在做

`TransformProcessType(& (ProcessSerialNumber){ 0, kCurrentProcess }, kProcessTransformToForegroundApplication);`

在 applicationDidFinishLaunching 中。

这在 10.7.3 之前工作正常。从 10.7.3 开始，停靠图标有时会显示两次（尽管只有一个应用程序实例正在运行）。在这种情况下，应用程序可以正常终止，但第二个图标在 Dock 中仍然没有响应。重新启动扩展坞会使图标消失。这主要发生在应用程序是 LoginItem 并在登录时自动启动的情况下。延迟 1 秒或更长时间执行`TransformProcessType(& (ProcessSerialNumber){ 0, kCurrentProcess }, kProcessTransformToForegroundApplication);` 似乎可以解决问题。然而，这不是一个好方法，因为用户没有得到即时反馈，表明应用程序已经启动。

有谁知道这个问题和可能的解决方法/解决方案？一些谷歌搜索显示 Growl 似乎从 10.7.3 开始也有这个问题，但没有任何解决方案。注意：设置`LSUIElement=NO`和使用`kProcessTransformToUIElementApplication`，如果用户选择不显示停靠图标对我不起作用，因为应用程序需要与 10.5 和 10.6 兼容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T07:40:51.453

我将用户的首选项保存到 NSUserDefaults，我做了两件事：首先，在 applicationDidFinishLaunching 中检查应用程序启动：

```
 if ([[[NSUserDefaults standardUserDefaults] objectForKey:@"ShowInDock"] boolValue]) {
    ProcessSerialNumber psn = { 0, kCurrentProcess };
    TransformProcessType(&psn, kProcessTransformToForegroundApplication);
}  else {
    ProcessSerialNumber psn = { 0, kCurrentProcess };
    TransformProcessType(&psn, kProcessTransformToUIElementApplication);
} 
```

if 检查用户偏好（保存在standardUserDefaults 中）是yes 还是no，并相应地设置它。

其次，如果他们在停靠偏好中切换显示，我使用这个：

```
- (IBAction)toggleShowInDock:(id)sender {
if ([showInDockPreference state] == NSOnState) {
    [[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithBool:YES] forKey:@"ShowInDock"];
    ProcessSerialNumber psn = { 0, kCurrentProcess };
    TransformProcessType(&psn, kProcessTransformToForegroundApplication);
}  else {
    [[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithBool:NO] forKey:@"ShowInDock"];
    ProcessSerialNumber psn = { 0, kCurrentProcess };
    TransformProcessType(&psn, kProcessTransformToUIElementApplication);
    }
} 
```

我从来没有遇到过使用这个的双图标问题。希望能帮助到你。

# php - 在不同的文件夹中运行相同的 php 脚本

> ID：12025593
> 
> 赞同：1
> 
> 时间：2012-08-19T09:47:58.967
> 
> 标签：php, readfile

我有一个驻留在单个文件夹中的 php 脚本我想在每个文件夹中运行相同的脚本而不手动上传每个文件中的 php 文件

例如我有 mysite.com/folder/script.php

和文件夹有不同的子文件夹

所以我想创建一个 php 文件，它将在每个文件夹/子文件夹中执行这个 script.php，而无需在每个文件夹中手动上传 script.php

有办法吗？

更新php代码

```
$path = array("./files/","./images/");
$path2=  array("http://".$_SERVER['SERVER_NAME'].dirname($_SERVER["PHP_SELF"])."/files/","http://".$ _SERVER['SERVER_NAME'].dirname($_SERVER["PHP_SELF"])."/images/");
$start="";
$Fnm = "./include.php";
$inF = fopen($Fnm,"w");
fwrite($inF,$start."\n");

$folder = opendir($path[0]);
while( $file = readdir($folder) ) {
       if (($file != '.')&&($file != '..')&&($file != 'index.htm')) {
            $folder2 = opendir($path[1]);
            $imagename ='';
            while( $file2 = readdir($folder2) ) {
                if (substr($file2,0,strpos($file2,'.')) == substr($file,0,strpos($file,'.'))){
                    $imagename = $file2;
                }
            }
            closedir($folder2);
        $result="{\nlevels: [\n{ file: \"$path2[0]$file\" }\n],\nimage: \"$path2[1]$imagename\",\ntitle: \"$file\"\n},\n";
        fwrite($inF,$result);
       }
}
fwrite($inF,"");
closedir($folder);

fclose($inF); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T09:53:50.017

假设您使用的是 Apache，您可以通过创建如下所示的文件来使用[mod_rewrite ：](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)`htaccess`

```
RewriteEngine on
RewriteBase /folder/
RewriteRule  ^.+/script.php$ script.php 
```

并将其上传到您的服务器。这将打开`RewriteEngine`，将基本目录设置为您选择的文件夹，然后无论何时`script.php`在子目录中请求它都会返回`/folder/script.php`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T09:50:46.227

在您的子文件夹页面上，包含以下代码：

```
require_once dirname(__FILE__) . "/folder/script.php"; 
```

你是这个意思吗？

# c++ - 类对象数组中的c ++内存

> ID：12025598
> 
> 赞同：5
> 
> 时间：2012-08-19T09:49:16.543
> 
> 标签：c++, class, memory, layout, member

我有这样的课：

```
class Object {
public: 
    unsigned char data[8];
    // other variables
    // functions etc...
 }; 
```

问题是 - 对象成员是否都存储在内存中相对于对象的相同位置？所以如果我有一个数组：对象数组[3]，给定一个字符指针 `char* data_ptr = array[0].data`， `data_ptr + (sizeof(Object))`那么总是指向数组[1].data？

（我已经阅读了一些关于如何在类和结构的数据成员之间进行填充的 Q/As - 但我认为它们没有回答我的问题。）

在此先感谢，本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T10:00:04.340

`sizeof Object`已经包括类的所有内部填充`Object`。包括结尾处的任何填充。数组不允许任何额外的填充。因此，确实`data_ptr + sizeof Object`会有 的地址`array[1].data`。

*但是*我不确定这是否真的被允许。也就是说，编译器*可能*被允许假定您永远不会将大于 8（成员数组的大小`data`）的值添加到`array[0].data`，因此如果您违反规则，它可能会应用失败的优化。也就是说，您的代码实际上可能表现出未定义的行为（这是“允许编译器在这种情况下做任何事情”的标准术语）。

*但是*，由于您使用的是指向 的指针`char`，对于该指针有更多的许可规则（您可以做许多`char*`一般类型无法做到的事情），因此它可能实际上是定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T10:19:37.590

如果您的问题的目的是了解内存中的内容，那么它是可以接受的。

但是，如果您想**真正做到这一点**：您想做**的实际上是**对所有同事的犯罪。

在 C++ 中进行集合的正确方法不是使用数组，而是使用**std::vector**或另一个 std 集合*（如果确实需要*）。我们不应该再使用 C 算术，而是通过迭代器访问向量集合的项目。这就是 C++ 标准库的原因:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T10:00:22.933

我认为答案是“也许”，这意味着你不应该赌这个。最好的方法是在 IDE 调试器上查找内存地址。当您引入编译器可以优化的成员和方法时，您会发现这很容易被抛弃。例如，任何常量或不访问任何*可能*是静态的成员的方法。前任：

```
void Object::doSomething() {std::cout << "something\n" << std::endl;} 
```

我相信这实际上在静态分配中得到了优化，因为我最近了解到，`((Object)NULL).doSomething();`在你为`Object`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T10:00:43.737

有许多因素决定了 C++ 中类的对象的大小。这些因素是： - 所有非静态数据成员的大小 - 数据成员的顺序 - 字节对齐或字节填充 - 其直接基类的大小 - 虚函数的存在（使用虚函数的动态多态性）。- 正在使用的编译器 - 继承模式（虚拟继承）

在这里检查：[http ://www.cprogramming.com/tutorial/size_of_class_object.html](http://www.cprogramming.com/tutorial/size_of_class_object.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-19T10:01:31.207

是的，相对于对象基址的布局将是不变的。这是 ABI 的要求。对象和数组的任何间距或填充也由 ABI 指定。

# php - 如何在单个 PHP 文件中使用不同的形式？

> ID：12025603
> 
> 赞同：1
> 
> 时间：2012-08-19T09:49:46.857
> 
> 标签：php, mysql, html

我正在尝试使用两个单独的表单创建一个动态网页：

1.  登录表格
2.  报名表格。

这意味着每个表单都有一个提交按钮，单击一个提交按钮应该只从一个表单收集数据。我尝试了下面显示的方法，但数据没有提交到 mySql 数据库。我试过单独运行这些表单，它们确实可以与 mysql 数据库一起使用，所以我想应该还有其他问题。下面的代码没有详细说明，但我认为它的要点在里面。提前致谢！

```
<?php
if(isset($_POST['submit1']))
{ 
doSomething(); 
} 
?>

<form id="form1" name="form1" action="" method="post">
...
<input type="submit" name="submit1" value="Sign in"/>
</form>

<?php
if(isset($_POST['submit2']))
{ 
doSomethngElse(); 
}
?>

<form id="form2" name="form2" action="" method="post">
...
<input type="submit" name="submit2" value="Sign up"/>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:15:16.820

所以我喜欢这样：

使用带有 1 个名称的 2 个按钮：

```
 //========== first form ==========
    <form name="form1" action....>

    fields

    <input type="submit" name="_Submit" value="Login">
    </form>

    // ========== second form ==========

    <form name="form2" action....>

    fields

    <input type="submit" name="_Submit" value="Sign up">
    </form>

    // ========== in php file do this  ==========

    <?php
    $submit = $_POST["_Submit"];

    if($submit=="Login"){

       // get login form data

    }else if($submit=="Sign up"){
       // get sign up form data
    }else{
      // submit is empty or undefined value
    }
    ?> 
```

*   我在一页中将其用于超过 16 个表格！这是使用 if 或 switch 控制表单按钮的非常简单的方法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T11:04:38.093

尝试首先检查发布请求

```
<?php
if($_POST)
{
   echo "post occurs";              // only for testing to check whether post is occur or not

  if(isset($_POST['submit1']))
  { 
      doSomething(); 
  } 

  else if(isset($_POST['submit2']))
  { 
     doSomethngElse(); 
  }
  else
  {
        echo "no form is posted";
  }
 }
 else
 {
      echo "Post not happened";
  }
?>

<form id="form1" name="form1" action="" method="post">
...
<input type="submit" name="submit1" value="Sign in"/>
</form>

<form id="form2" name="form2" action="" method="post">
...
<input type="submit" name="submit2" value="Sign up"/>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T10:00:39.163

就像我说的，你可以检查值是否为空，这样你就可以做到

```
if(isset($_POST['submit2']) == ""){
     //The variable is empty
}
else
{
   //The variable is not empty

} 
```

如果我纠正你可以做

```
 if (!(empty($_POST['submit2'])){
         //This variable is not empty    

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T10:01:25.780

并不是说这直接回答了您的问题，我认为您的其余代码将需要...但是...

为什么不只检查单个表单元素中的值，如下所示：

```
<?php
if(isset($_POST['submit1']))
{ 
    if(!empty($_POST['submit1']) && $_POST['submit1']=='SignIn')
    {
        // Do Some Code... like:
        ?>
        <form id="form1" name="form1" action="" method="post">
        ...
        <input type="submit" name="submit1" value="SignIn"/>
        </form>
        <?php
    }
    if(!empty($_POST['submit1']) && $_POST['submit1']=='SignUp')
    {
        // Do Some Other Code...
        ?>
        <form id="form2" name="form2" action="" method="post">
        ...
        <input type="submit" name="submit1" value="SignUp"/>
        </form>
        <?php
    }
} 
?> 
```

# scala - 基于原点的约束函数（路径依赖类型？类型生成？）

> ID：12025604
> 
> 赞同：7
> 
> 时间：2012-08-19T09:49:58.587
> 
> 标签：scala, path-dependent-type

对不起，糟糕的标题，不确定更好的标题。这是对我的问题的粗略简化（对不起，如果它看起来如此微不足道，那毫无意义）：

```
class RList[T](data: List[T]) {
   def map[V](f: T=>V): RList[V] = ...
} 
```

（受限列表）的想法`RList`是您不能调整它的大小，或更改其中元素的顺序。但是您可以使用为您提供新 RList 的函数，其中包含已更改的数据。

现在需要一个创建 RList 的函数。它可能有一个*类似*的签名：

```
def toRList[T](values: List[T]): RList[T] = ... 
```

到目前为止，一切都很好。但现在是棘手的部分。我需要一个*像*这样工作的函数：

```
def zip[T, V](left: RList[T], right: RList[V]): RList[(T,V)] 
```

`left`但是具有与`right`具有相同起源的附加约束。因此，它们保证大小相同。

例如应该编译的代码：

```
val x = toRList(List(1, 2, 3))
val y = x.map(_ * 2)
val z = y.map(_.toString)
zip(y,z) 
```

例如应该无法*编译的代码*

```
val y = toRList(List(2, 4, 6))
val z = toRList(List("one", "two"))
zip(y,z) 
```

**注意：在我原来的问题中，对 zip 的约束必须是它们来自同一个“来源”。仅仅保证它们的长度相同是不够的（更不用说，列表的大小在编译时是未知的）**

我还需要能够`zip`多次使用，所以应该编译这样的东西

```
zip(a,zip(b,c)) 
```

（假设`a`和来自同一来源）`b``c`

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T11:11:08.033

这对你有用吗？

```
object PathDependentTypes {
  trait RListProducer {
    trait RList[T] {
      def map[V](f: T => V): RList[V]
      def zip[V](r: RList[V]) : RList[(T, V)]
    }
    def getList[T]: RList[T] = ???
  }

  class A extends RListProducer

  def main(args: Array[String]) {
    val aSource = new A
    val a = aSource.getList[Int]
    val anotherSource = new A
    val b = anotherSource.getList[String]

    val m1 = a.map( _ * 2)
    val m2 = a.map( _.toString)

    val z1 = m1.zip(m2)
    //val z2 = a.zip(b) //doesn't compile because A and B aren't the same.
    val z3 : A#RList[(Int, (Int, String))] = a zip (m1 zip m2)
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T13:01:09.913

制作生产者的内在特征的缺点之一`RList`是编写带有生产者之外的参数的方法或函数变得不那么愉快`RList`——你最终会得到很多这样的结果：

```
def foo[P <: RListProducer, T](rl: P#RList[T]) = ??? 
```

另一种方法是`RList`为每个“源”提供一个唯一的类型成员`RList`，但每个源将传递给它的“子代”。像这样的东西：

```
trait RList[T] { outer =>
  type S
  protected val wrapped: List[T]

  def map[V](f: T => V) = new RList[V] {
    type S = outer.S
    protected val wrapped = outer.wrapped.map(f)
  }

  def zip[V](r: RList[V] { type S = outer.S }) = new RList[(T, V)] {
    type S = outer.S
    protected val wrapped = outer.wrapped.zip(r.wrapped)
  }
}

object RList {
  def toRList[T](ts: List[T]) = new RList[T] {
    type S = this.type
    protected val wrapped = ts
  }
} 
```

现在假设我们有以下内容：

```
val a = RList.toRList(1 :: 2 :: 3 :: Nil)
val b = a.map(_.toString)
val c = RList.toRList("1" :: "2" :: "3" :: Nil) 
```

现在`a zip b`（或`a zip b zip a zip a`等）将编译，但如果你抛出 a`c`你会得到一个编译器错误。

* * *

**注意：**我最初是这样写`zip`的：

```
def zip[V](r: RList[V])(implicit ev: r.S =:= S) = new RList[(T, V)] { ... } 
```

这会给出一个更好的编译器错误消息，但如果您使用的是 2.10 之前的版本，则需要使用`-Ydependent-method-types`.

# git - 错误的 git repo 所有者

> ID：12025605
> 
> 赞同：2
> 
> 时间：2012-08-19T09:50:21.730
> 
> 标签：git, repository, permission-denied

我尝试将本地 repo 推送到 github 并收到这样的消息：

```
The remote end hung up unexpectedly.

ERROR: Permission to [repo_name] denied to [user_name] 
```

但我不明白它在哪里找到这样的名字。我的本地计算机上有 2 个，但是对于这个 repo，我明确地为项目设置了另一个名称，

```
cd project_directory 
```

两者，本地：

```
git config user.name [right_user_name] 
```

和全球：

```
git config --global user.name [right_user_name] 
```

...用户名。但它仍然认为真实姓名是 [user_name] 而不是 [right_user_name]。请帮我找出造成这种情况的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T10:14:54.823

在 github 中，身份验证仅使用 SSH 密钥完成。因此，github 使用您发送的任何 SSH 密钥来查找与您关联的帐户，这就是“用户名”的来源。

git 用户名仅在您创建新提交时使用。由于给定的人可以推送任何人的提交，因此 github 不能使用它来获取访问权限（无论如何这都不安全......）

# javascript - 使函数仅对其原型可用

> ID：12025610
> 
> 赞同：0
> 
> 时间：2012-08-19T09:50:49.193
> 
> 标签：javascript, function, methods, prototype

这是我的代码的样子：

```
Random = function(name) {
    this.name = name;

    this.addSomething = function(a, b) {
        return a + b;
    }
}

Random.prototype.addStuff = function(a, b, c, d) {
    return this.addSomething(a, b) + this.addSomething(b, d);
} 
```

我`this.addSomething`只需要在函数本身及其原型中可用，但这不起作用。

有人可以指出我正确的方向并告诉我如何做到这一点吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T09:54:18.897

制作“私人”成员/方法的唯一方法是这样的：

```
Random = function(name) {
    this.name = name;

    function add_something(a, b) {
        return a + b;
    }
    this.addStuff = function(a, b, c, d) {
        return add_something(a, b) + add_something(b, d);
    }
} 
```

**编辑**：正如 RobG 在他的回答中提到的， Douglas Crockford 的[这篇文章](http://javascript.crockford.com/private.html)将帮助您了解公共、私有和特权成员/方法在 Javascript 中的工作方式。这是一本非常推荐的读物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T13:39:09.297

默认情况下，作为构造函数调用的函数返回一个普通的 Object。您可以让它们返回一些其他类型的对象，但该对象不会从构造函数的原型继承。此外，您不能更改`[[Prototype]]`函数对象的 （忽略不推荐使用的[**proto**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)属性）。

构造函数（它是一个函数）和由构造函数创建的对象可以具有相同方法的唯一方法是在它们的`[[Prototype]]`链中共享一个对象。这只能通过扩展 Object.prototype 来完成，因为这是函数和对象都可以共享的唯一对象。

此外，您不能阻止访问对象的公共方法。您可以模拟[private members](http://javascript.crockford.com/private.html)，但它的模拟非常弱。但是，您可以使用方法检查调用对象是否是特定“类”的实例，例如

```
function Foo(){}

Foo.prototype.bar = function() {
  return this instanceof Foo? 'success' : 'failure';
}

var foo = new Foo();
var blah = {};

// Call bar method of an instance of Foo
alert(foo.bar()); // success

// Call bar method on some other object
alert(Foo.prototype.bar.call(blah)); // failure 
```

javascript 中的任何此类解决方案都很容易被欺骗，不可能以一种健壮的方式做你想做的事。

# android - 如何使用 Robolectric 测试 IntentService？

> ID：12025611
> 
> 赞同：19
> 
> 时间：2012-08-19T09:51:06.817
> 
> 标签：android, android-testing, robolectric

我正在尝试测试using的`onHandleIntent()`方法。`IntentService``Robolectric`

我开始服务：

```
Activity activity = new Activity();
Intent intent = new Intent(activity, MyService.class);
activity.startService(intent);

ShadowActivity shadowActivity = Robolectric.shadowOf(activity);
Intent startedIntent = shadowActivity.getNextStartedService();
assertNotNull(startedIntent); 
```

似乎`startedIntent`不是空的，但`onHandleIntent()`似乎没有被调用。

我应该如何测试它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-11-17T11:13:52.207

Robolectric 有一个[`ServiceController`](https://github.com/robolectric/robolectric/blob/robolectric-3.0/robolectric/src/main/java/org/robolectric/util/ServiceController.java)可以像活动一样贯穿服务生命周期的服务。该控制器提供所有方法来执行相应的服务回调（例如`controller.attach().create().startCommand(0, 0).destroy()`）。

理论上我们可以预期[`IntentService.onStartCommand()`](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/app/IntentService.java#130)会触发 `IntentService.onHandleIntent(Intent)`，通过它的内部`Handler`。但是，这`Handler`使用`Looper`在后台线程上运行的 a，我不知道如何使该线程前进到下一个任务。一种解决方法是创建`TestService`模仿相同行为但`onHandleIntent(Intent)`在主线程（用于运行测试的线程）上触发。

```
@RunWith(RobolectricGradleTestRunner.class)
public class MyIntentServiceTest {
    private TestService service;
    private ServiceController<TestService> controller;

    @Before
    public void setUp() {
        controller = Robolectric.buildService(TestService.class);
        service = controller.attach().create().get();
    }

    @Test
    public void testWithIntent() {
        Intent intent = new Intent(RuntimeEnvironment.application, TestService.class);
        // add extras to intent
        controller.withIntent(intent).startCommand(0, 0);
        // assert here
    }

    @After
    public void tearDown() {
        controller.destroy();
    }

    public static class TestService extends MyIntentService {
        public boolean enabled = true;

        @Override
        public void onStart(Intent intent, int startId) {
            // same logic as in internal ServiceHandler.handleMessage()
            // but runs on same thread as Service
            onHandleIntent(intent);
            stopSelf(startId);
        }
    }
} 
```

* * *

**更新**：或者，为 IntentService 创建一个类似的控制器非常简单，如下所示：

```
public class IntentServiceController<T extends IntentService> extends ServiceController<T> {
    public static <T extends IntentService> IntentServiceController<T> buildIntentService(Class<T> serviceClass) {
        try {
            return new IntentServiceController<>(Robolectric.getShadowsAdapter(), serviceClass);
        } catch (IllegalAccessException | InstantiationException e) {
            throw new RuntimeException(e);
        }
    }

    private IntentServiceController(ShadowsAdapter shadowsAdapter, Class<T> serviceClass) throws IllegalAccessException, InstantiationException {
        super(shadowsAdapter, serviceClass);
    }

    @Override
    public IntentServiceController<T> withIntent(Intent intent) {
        super.withIntent(intent);
        return this;
    }

    @Override
    public IntentServiceController<T> attach() {
        super.attach();
        return this;
    }

    @Override
    public IntentServiceController<T> bind() {
        super.bind();
        return this;
    }

    @Override
    public IntentServiceController<T> create() {
        super.create();
        return this;
    }

    @Override
    public IntentServiceController<T> destroy() {
        super.destroy();
        return this;
    }

    @Override
    public IntentServiceController<T> rebind() {
        super.rebind();
        return this;
    }

    @Override
    public IntentServiceController<T> startCommand(int flags, int startId) {
        super.startCommand(flags, startId);
        return this;
    }

    @Override
    public IntentServiceController<T> unbind() {
        super.unbind();
        return this;
    }

    public IntentServiceController<T> handleIntent() {
        invokeWhilePaused("onHandleIntent", getIntent());
        return this;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-29T15:44:20.817

`onHandleIntent`是受保护的方法，因此不能直接调用。

我的解决方案是在我的测试用例中扩展服务类，覆盖`onHandleIntent`使其公开并调用`super.onHandleIntent(intent)`

然后`onHandleIntent`直接从测试用例调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-11T17:07:39.737

## Robolectric 3.1+

创建服务实例

直接调用 onHandleIntent

```
 YourService svc = Robolectric.buildService(YourService.class).get();
    Intent fakeIntent = new Intent();
    fakeIntent.putExtra(YourService.SOME_EXTRA, "debug|fail");

    svc.onHandleIntent(fakeIntent);

    assertThat(something.happened).isEqualTo(true); 
```

注意：即使您正在测试 IntentService，也要 使用`Robolectric.buildService`(not )。据我所知，目前无法正常工作。`.buildIntentService``.buildIntentService`

2017 年 5 月 17 日更新：

问题`buildIntentService`将[在未来修复](https://github.com/robolectric/robolectric/issues/3080#issuecomment-301212291)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T11:25:41.200

我认为您以错误的方式处理了这个问题。你在这里测试：

```
Intent startedIntent = shadowActivity.getNextStartedService();
assertNotNull(startedIntent); 
```

被`startService()`称为。

然后，您必须假设 Android 已经正确实现了它们的结束，并且在调用`startService()`服务之后确实会启动。

我认为如果你想测试 的行为`onHandleIntent()`，你必须直接调用它？？

我不确定……但我认为您要编写的测试只是测试 Android 框架。你应该写两个测试。

1）`startService()`被调用的测试（就像你在你的例子中一样）。

2）测试`onHandleIntent()`（通过直接调用）的行为。

我的经验很少，`Robolectric`但希望这会有所帮助。

干杯

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-10T20:39:41.823

我用这个

```
@Before
public void setup(){
    mainActivity = Robolectric.buildActivity(MainActivity.class)
            .create()
            .start()
            .resume()
            .get();
    context = Robolectric.getShadowApplication().getApplicationContext();
    bt_start = (Button) mainActivity.findViewById(R.id.button);
    bt_stop = (Button) mainActivity.findViewById(R.id.button2);
}

@Test
public void serviceIsOn(){

    bt_start.performClick();
    Intent intent = Robolectric.shadowOf(mainActivity).peekNextStartedService();
    assertEquals(MiService.class.getCanonicalName(),intent.getComponent().getClassName());
} 
```

然后我运行测试，一切正常

# python - GAE Webapp2 - 破坏会话不起作用

> ID：12025612
> 
> 赞同：3
> 
> 时间：2012-08-19T09:51:15.710
> 
> 标签：python, google-app-engine, session, webapp2

还是我误解了破坏的工作原理？这是一个示例代码：

```
class TestHandler(BaseHandler):
    def get(self):
        counter = self.session.get('counter')
        if not counter:
            counter = 0
        counter += 1

        if counter > 5:
            self.auth.unset_session()
        else:
            self.session['counter'] = counter

        return self.response.write ( counter ) 
```

会话有效，计数器计数，但是会话没有被破坏或破坏它不会使值变为空？

是否仅销毁 null 某些值，例如 userid 和 sessionid 还是我完全错过了重点？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T13:26:06.613

unset_session 将*用户*从会话中移除，而不是从其他会话变量中移除。unset_session 方法在 auth 模块上。

如果您更深入地研究代码，您可以查看代码在做什么。 [http://code.google.com/p/webapp-improved/source/browse/webapp2_extras/auth.py](http://code.google.com/p/webapp-improved/source/browse/webapp2_extras/auth.py)

```
 def unset_session(self):
        """Removes a user from the session and invalidates the auth token."""
        self._user = None
        data = self.get_session_data(pop=True)
        .... 
```

如果您试图取消设置计数器，您可以通过调用 self.session.pop('counter') 弹出会话变量

例如：

```
 counter = self.session.get('counter')
    if not counter:
        counter = 0
    counter += 1

    if counter > 5:
        self.session.pop('counter')
    else:
        self.session['counter'] = counter

    return self.response.write ( counter ) 
```

如果要清除会话中的所有内容，可以调用 self.session.clear()

# windows - AWK：确定是否在 Windows 上运行

> ID：12025617
> 
> 赞同：2
> 
> 时间：2012-08-19T09:51:44.223
> 
> 标签：windows, awk

如何确定我是否在 Windows 上？

我需要在 AWK 中执行特定于操作系统的命令。

具体来说，我想 `system("mkdir DIR")`在 Windows 和 `system("mkdir -p DIR")`其他任何地方（Unix/Linux/OS X/BSD）上递归地创建一个目录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T19:52:28.340

[这是Birei](https://stackoverflow.com/users/773159/birei)的一个稍微优化的版本。

环境变量只在`OS`并且（假定）总是在 windows 上指定，并且它应该总是包含某种形式的字符串“windows”，例如“Windows_NT”。

```
awk '
    BEGIN {
        is_windows = 0;
        if (index(tolower(ENVIRON["OS"]), "windows") > 0) {
            is_windows = 1;
        }
    }
    ...
' input-file 
```

感谢#awk 和[Birei](https://stackoverflow.com/users/773159/birei)的伙计们！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T10:32:16.443

我无法测试此答案，因为我无权访问`Windows`系统，但请尝试使用该`ENVIRON`变量。Linux 和 Unix 路径用 分隔，`:`而`Windows`路径用 . 分隔`;`。你可以检查一下，比如：

```
awk '
    BEGIN {
        is_windows = 0;
        if ( index( ENVIRON["PATH"], ";" ) > 0 ) {
            is_windows = 1;
        }
    }
    ...
' input-file 
```

如果路径中只有一个目录，这可能会失败`Windows`，但我希望你明白这一点。也许几个环境变量或类似的组合可能会更有帮助。

# c - c中三元运算符（？：）的概念

> ID：12025618
> 
> 赞同：4
> 
> 时间：2012-08-19T09:51:52.637
> 
> 标签：c, ternary-operator

在**GCC Compiler**中编译给定程序：

```
int main()  
{  
      int a=2,b=3;  
      (a>1)?b=10:b=50;  
      printf("%d",b);  
      return 0;     
} 
```

它显示**“需要左值作为左操作数”**
的错误，但是如果我将第 4 行写为

`(a>1)?b=10:(b=50);`

Then 它显示没有编译错误。谁能解释我为什么？
还有它与 if...else... 有何不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T10:00:44.203

如评论中所述，您对运算符优先级有疑问。您的代码解释如下：

```
((a > 1) ? b = 10 : b) = 50; 
```

上面的代码是无效的，原因与写入 `(b = 10) = 50`无效的原因相同。

代码可以更清楚地写成：

```
b = a > 1 ? 10 : 50; 
```

> 还有它与 if...else... 有何不同？

条件运算符仅适用于作为操作数的*表达式。*语句可以在正文`if`中包含*语句。*

条件运算符总是可以用等效的`if`语句代替。但反之则不然——有些 if 语句不能用等效的条件运算符表达式替换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T09:53:13.610

您遇到的问题是运算符优先级。运算符的`=`优先级低于`?:`运算符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T09:56:06.957

我认为你的代码应该是：

```
int main()  
{  
      int a=2,b=3; 

      b=(a>1)?10:50; 

      printf("%d",b);  
      return 0;     
} 
```

干杯。

# ios - 如何检索各种 iOS 方法调用的“动画”持续时间？

> ID：12025622
> 
> 赞同：4
> 
> 时间：2012-08-19T09:52:44.840
> 
> 标签：ios, animation, duration

许多 iOS 设置器都有“动画”变体，比如`setZoomScale:`on `UIScrollView`，或者，任何有`animated:`参数的东西。

我的问题是，a) 我如何确定正在使用的持续时间，以及 b) 如有必要，我如何修改该持续时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T10:08:34.760

有趣的问题。根据我的经验，这些持续时间确实因平台（iPad 与 iPhone）而异，并且没有记录或以任何方式可访问。许多系统动画的一个非常常见的持续时间似乎是 0.35-0.40 秒左右。较短的动画通常恰好是该时间的一半。较长的动画通常恰好是该时间的两倍。

例如，通过重新定向设备触发的旋转动画在将横向旋转到纵向（反之亦然）时使用 0.4 秒，但在将横向从左旋转到横向右（或从纵向向下到纵向向上）时使用 0.8 秒。

然而也有例外。例如，键盘显示动画在触发的通知中提供其持续时间。它不可修改，但至少您可以阅读它。

# javascript - Javascript 拖动

> ID：12025629
> 
> 赞同：-2
> 
> 时间：2012-08-19T09:54:14.163
> 
> 标签：javascript

我试图制作一个可拖动的元素，但我失败了......我不想使用 jquery。

我得到了以下html代码：

```
<div id='area'>
  <div id='drag'></div>
</div> 
```

我想将 id='drag' 拖到 id='area' 内而不是离开它。

对不起我糟糕的英语和我的新手问题。

编辑：

```
Area.addEventListener("mousemove", function (e) {
    var X, Y;
    X = e.offsetX;
    Y = e.offsetY;
    Information.innerHTML = 'X:' + X + ' - ' + 'Y:' + Y;
});

img.addEventListener("mouseover", function () {
    this.style.cursor = 'move';
    this.addEventListener("mousemove", function (e) {
        var X, Y;
        X = e.offsetX;
        Y = e.offsetY;
        Information2.innerHTML = 'X:' + X + ' - ' + 'Y:' + Y;
    });
}); 
```

idk 如何获取区域的 X 和 Y 以将其添加到 img

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:20:55.363

看看这个。我在网上找到了这个。我认为这是您正在寻找的：

[**Javascript 可拖动**](http://jsfiddle.net/JxKpg/1/)

# hyperlink - 页面加载时指向 Fancybox 弹出窗口的外部链接

> ID：12025631
> 
> 赞同：0
> 
> 时间：2012-08-19T09:55:11.333
> 
> 标签：hyperlink, popup, fancybox

对不起，我有一个简单的问题，但我无法弄清楚。

我想在页面加载时使用 Fancybox 2 制作一个图像弹出窗口，效果很好，但是当用户点击图像弹出窗口时，他应该被定向到外部链接，我无法成功。

这是我的代码： `<script type="text/javascript">
$(document).ready(function() {
$(".modal_link").fancybox().trigger('click');
}); </script>`

在html中： `<a class="modal_link" href="image.PNG"></a>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:09:33.430

尝试

```
<script type="text/javascript">
$(document).ready(function() {
 $(".modal_link").fancybox({
  closeClick : true, // closes fancybox when clicking INSIDE of it
  afterClose : function(){
   // redirect to a new page after closing fancybox
   window.location = 'http://newsite.com/';
   // parent.location = 'http://newsite.com/'; // also works
  }
 }).trigger('click');
}); 
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:00:58.317

```
 <script type="text/javascript">
jQuery(document).ready(function(){
    if (document.cookie.indexOf('visited=true') == -1) {
        var fifteenDays = 1000*60*60*24*15;
        var expires = new Date((new Date()).valueOf() + fifteenDays);
        document.cookie = "visited=true;expires=" + expires.toUTCString();
        $.fn.colorbox({width:"30%", inline:true, href:"#subscribe"});
    }
});

             </script> 
```

# intellij-idea - 如何更改 IntelliJ IDEA 使用的语言环境？

> ID：12025635
> 
> 赞同：5
> 
> 时间：2012-08-19T09:55:29.030
> 
> 标签：intellij-idea, locale, resourcebundle

我尝试使用 IntelliJ IDEA（11.1.3 社区版）创建一个新的 Gradle 项目。不幸的是，我遇到了这个错误：

![在此处输入图像描述](../Images/261b58a160855648ab11047a2b9f82b2.png)

IDE 日志显示此错误：

```
2012-08-19 06:48:50,873 [735372] WARN - .plugins.gradle.util.GradleLog - java.util.MissingResourceException：找不到基本名称 i18n.GradleBundle 的包，语言环境 en_CA
```

那里没有什么大惊喜。

我不确定 IntelliJ IDEA 如何确定要使用的语言环境，但它正确地确定了我住在加拿大。`idea.sh`我尝试通过在shell 脚本中将以下命令行标志传递给 JVM 来将语言环境更改为 en_US ：

```
# Adam 的自定义参数：
LOCALE_ARGS="-Duser.language=en -Duser.country=US -Duser.variant=US"

ALL_JVM_ARGS="$LOCALE_ARGS $VM_OPTIONS $COMMON_JVM_ARGS $IDE_JVM_ARGS $AGENT $REQUIRED_JVM_ARGS"
```

不幸的是，它仍然坚持使用 en_CA。

**如何更改 IntelliJ IDEA 使用的语言环境？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:06:45.100

中的错误信息`idea.log`表明 Grade 插件本身没有复用 IDEA 的系统属性。这是 JetBrains 验证的[已知错误](http://youtrack.jetbrains.com/issue/IDEA-73107)，您可以投票支持它。

# android - ItemizedOverlay OSMDroid

> ID：12025639
> 
> 赞同：1
> 
> 时间：2012-08-19T09:56:28.677
> 
> 标签：android, itemizedoverlay, osmdroid

我是 Android 开发和 Java 的新手，所以请原谅我的无知。

我在使用 ItemizedOverlay 向 Mapnik 地图添加精确点时遇到问题。我正在关注 Google Maps 教程并尝试将其转换为 OSMDroid，但我无法使其正常工作。在课堂打击中，错误以红色突出显示。如果有更多经验的人能指出我哪里出错了，我将不胜感激。

**ItemizedOverlay 类：**

```
public class CustomPoint extends ItemizedOverlay<OverlayItem>{

    private ArrayList<OverlayItem> mItemList = new ArrayList<OverlayItem>();
    private Context c;

public CustomPoint(Drawable pDefaultMarker, ResourceProxy pResourceProxy) {
        super(pDefaultMarker, pResourceProxy);
        // TODO Auto-generated constructor stub
    }

    public CustomPoint(Drawable m, Context context){
        this(m);
       c = context;     
        }

   public void addOverlay(OverlayItem aOverlayItem)
    {
        mItemList.add(aOverlayItem);
        populate();
    }

    public void removeOverlay(OverlayItem aOverlayItem)
    {
        mItemList.remove(aOverlayItem);
        populate();
    }

    @Override
    protected OverlayItem createItem(int i)
    {
        return mItemList.get(i);
    }

    @Override
    public int size()
    {
        if (mItemList != null)
            return mItemList.size();
        else
            return 0;
    }

    public boolean onSnapToItem(int arg0, int arg1, Point arg2, IMapView arg3)
    {
        // TODO Auto-generated method stub
        return false;
    }

    public void insertPinpoint(OverlayItem o) {
        // TODO Auto-generated method stub
        mItemList.add(o); 
        populate();

    }

} 
```

**调用 CustomPoint 类的 MainActivity 类：**

```
public void onClick(DialogInterface dialog, int which) {
    OverlayItem overlayItem = new OverlayItem("Here I am", "2nd String",(GeoPoint)touchedPoint);
    CustomPoint custom = new CustomPoint(d, MainActivity.this);
    custom.insertPinpoint(overlayItem);
    overlayList.add(custom);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T11:23:49.210

你为什么不把你的类扩展到**ItemizedIconOverlay**

```
public class CustomPoint extends ItemizedIconOverlay<OverlayItem>{

    private ArrayList<OverlayItem> mItemList = new ArrayList<OverlayItem>();
    private Context c;

public CustomPoint(Master master,ArrayList<OverlayItem> pList,Drawable marker, ItemizedIconOverlay.OnItemGestureListener<OverlayItem> pOnItemGestureListener, ResourceProxy pResourceProxy) {
        super(pList, marker, pOnItemGestureListener, pResourceProxy);
        // TODO Auto-generated constructor stub
    }
} 
```

# c - 我怎么知道 linux 系统调用是否是线程安全的？

> ID：12025640
> 
> 赞同：2
> 
> 时间：2012-08-19T09:56:36.097
> 
> 标签：c, linux, multithreading, thread-safety, system-calls

linux 中的一些函数由 _r （例如 gmtime_r ）标记为“线程安全”，但大多数系统调用没有被标记，也没有在手册页中提及。所以我的问题是：我如何知道 linux 系统调用是否是线程安全的？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T10:00:15.707

我认为您的意思是“库功能”；由于对线程的内核端数据进行操作，系统调用应该是线程安全的。

答案是：查看相关功能的手册页。“_r”变体是专门为不可重入的函数提供的，这意味着传递给它们的额外参数在非“_r”版本中被静态声明和修改。

大多数 glibc 应该是 IIRC 线程安全的，但您*始终*需要查看手册页；或者，如果你不相信这些，代码本身。没有什么灵丹妙药可以免除您理解您正在编程的接口的责任。

# javascript - 在 node.js 上的多个线程中运行任务

> ID：12025641
> 
> 赞同：5
> 
> 时间：2012-08-19T09:56:56.490
> 
> 标签：javascript, multithreading, node.js

我需要一些关于 node.js 的帮助，因为我是它的新手。我有一个数据数组，并且必须在多个线程中使用该数据运行函数（使用所有 CPU 内核）。在我通常的语言中，我确实创建了具有线程数的线程池，将一些任务推送到它，等到完成，将更多任务发送到队列。但我无法弄清楚如何在nodejs中做到这一点。

PS：我正在使用最新的 0.8 分支。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T10:36:00.657

Nodejs 是为在单个进程上运行而构建的，但您可以[生成](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)其他进程。[cluster](http://nodejs.org/api/cluster.html)模块使用来自 child_process 模块的fork[方法](http://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options)，但它旨在跨进程分配服务器连接并共享同一端口。

我想你想要[exec](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)。例子：

```
var exec = require('child_process').exec,
child;

var array = ["a", "b", "c", "d", "e"]; // your array of data

var n = array.length; // length
var done = 0; // jobs done
var i = n; // iterator

while(i--) { // reverse while loops are faster
    (function (argument) { // A closure
        child = exec('node otherFunction.js '+argument, // Spawn the process, with an item from your array as an argument.
          function (error, stdout, stderr) {
            if (error === null) {
                done += 1;
                if (done === n) {
                    console.log('Everything is done');
                }
            }
        });
    })(array[i]);
} 
```

以上当然是糟糕的代码，甚至没有经过测试，但我认为它会起作用。你所要做的就是调用你想调用的函数来调用数组中的项`otherFunction.js`，在里面你可以找到参数`process.argv`。

# android - 无法使用 SimpleAdapter 将数据放置到不同的 textView

> ID：12025647
> 
> 赞同：0
> 
> 时间：2012-08-19T09:58:45.503
> 
> 标签：android, android-adapter

我从数据库中得到一个对象列表，同时它是两个参数 - 标题和日期时间。我在 main.xml 和 item.xml 中为列表中的每一行创建了一个 listView。我得到所有列表，将其放置到 ArrayList (Map (String, Object)) 并且数组列表在放入适配器时具有所有数据。

```
private void getAllNotesLocal () {

    manager = new NotesManager(this);
    lstNotes = manager.getAllNotes();
    ArrayList<Map<String, Object>> _notesList = new ArrayList<Map<String, Object>>(lstNotes.size());
    Map<String, Object> _map;
    for (NoteObj currNote : lstNotes) {
        _map = new HashMap<String, Object>();
        _map.put(Constants.ATTRIBUTE_NAME_TITLE, currNote.getName());
        _map.put(Constants.ATTRIBUTE_NAME_DATE, currNote.getDate());

        _notesList.add(_map);
    }

    String[] from = {Constants.ATTRIBUTE_NAME_TITLE, Constants.ATTRIBUTE_NAME_DATE};
    int[] to = { R.id.tv_name, R.id.tv_date};

    SimpleAdapter sAdapter = new SimpleAdapter(this, _notesList, R.layout.item, from, to);
    lvAllNotes = getListView();
    lvAllNotes.setAdapter(sAdapter);

} 
```

但是屏幕上什么也没有发生。当我使用 arrayAdapter 时，一切都可以，除了我只能在每一行中放置一个参数。有效的代码在这里：

```
ListView lvAllNotes =  = getListView();
ArrayList<NoteObj> lstNotes = manager.getAllNotes();
ArrayAdapter<NoteObj> adapter = new ArrayAdapter<NoteObj>(this, R.layout.item, R.id.tv_name, lstNotes);
setListAdapter(adapter); 
```

main.xml：

```
<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView> 
```

item.xml：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="50dp"
android:layout_marginTop="10dp" >

<TextView
    android:id="@+id/tv_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="top|left"
    android:layout_marginLeft="5dp"
    android:ellipsize="end"
    android:lines="1"
    android:scrollHorizontally="true"
    android:singleLine="true"
    android:text="@string/empty"
    android:textSize="18sp" />

<TextView
    android:id="@+id/tv_date"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom|right"
    android:layout_marginRight="5dp"
    android:text="@string/empty"
    android:textSize="9sp"
    android:textStyle="italic" >
</TextView>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T10:35:17.837

我建议您使用`SimpleCursorAdapter`，因为数据来自数据库并且列表项仅包含 2 个文本视图。

```
 ListAdapter adapter = new SimpleCursorAdapter(
                 this, android.R.layout.two_line_list_item, mCursor,
                 new String[] {COLUMN1_NAME, COLUMN2_NAME}, 
                 new int[] {android.R.id.text1, android.R.id.text2});

     mList.setListAdapter(adapter); 
```

或者您可以设置一个扩展的新适配器`BaseAdapter`或`ArrayAdapter`. 这是给你的链接。

[两行列表视图](http://www.codercorp.com/blog/android/android-two-line-listview-with-custom-data.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:04:23.203

我认为框架布局是问题所在。这是因为框架布局只向用户显示一个视图。所有剩余的视图都将隐藏在第一个布局下方。这样问题就知道我的解决方案有助于解决问题是多么高兴。

# c++ - 在 C++ 中从 linux 应用程序发送电子邮件

> ID：12025649
> 
> 赞同：1
> 
> 时间：2012-08-19T09:59:03.437
> 
> 标签：c++, c++11, email-client

我正在做学校作业，我想向 gmail 帐户发送电子邮件。我正在创建一个 c++ 应用程序，我该如何继续。我需要安装任何库还是可以使用简单的mailto：就像在网络应用程序中一样。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:03:28.887

您可以使用 linux 上的 QT 框架之类的东西来帮助您。

但你可能只需要这个：[在 Linux 上使用 C++ 中的 SMTP 发送邮件](https://stackoverflow.com/questions/4458460/send-mail-using-smtp-c-linux)

希望有帮助，

~ 丹

# jquery - css/javascript 旋转但不是从中心旋转

> ID：12025650
> 
> 赞同：1
> 
> 时间：2012-08-19T09:59:08.820
> 
> 标签：jquery, css, rotation, transform

我希望使用 css 或 javascript 创建悬停旋转效果，但不是像通常那样从中心旋转，而是希望从正方形的左上角旋转。

悬停时正方形将旋转 90 度，然后在鼠标移出时返回。我可以扩大悬停区域以避免方块颤动（不断重复）。

我将尝试使用糟糕的图表来展示我的思维过程，十字是旋转点。

```
_________
|       |
|   +   |
|       |
--------- 
```

对此：

```
+--------         
|       |   
|       |   
|       |   
--------- 
```

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T10:01:38.480

您可以使用`transform-origin`：

```
transform-origin: 0 0; 
```

还有一个演示：http: [//jsfiddle.net/ssRS4/2/](http://jsfiddle.net/ssRS4/2/)

# apache2 - 带有 suexec 和 mod_fcgid 的 apache 大规模虚拟主机

> ID：12025652
> 
> 赞同：1
> 
> 时间：2012-08-19T09:59:19.990
> 
> 标签：apache2, virtual-hosts, mod-fcgid, suexec

我按照[Falco 的教程](http://www.howtoforge.com/how-to-set-up-apache2-with-mod_fcgid-and-php5-on-ubuntu-11.10)进行操作，现在对于 2 个用户（例如 john 和 alice）及其相关目录（`/var/www/john`和`/var/ww/alice`），一切都按预期工作。

现在，我想更上一层楼：我需要[动态配置大量虚拟主机](http://httpd.apache.org/docs/2.2/vhosts/mass.html)`/etc/apache2/sites-available/<username>`，而不是在Apache 上定义不同的虚拟主机并重新启动。比如说，我的 DNS 服务器有以下记录：，我希望它的主目录位于.`another.site.example.com``/var/www/another.site/web`

问题在于 suexec 和 mod_fcgid 的所有这些配置设置。我结束了我的这份草稿`httpd.conf`（或者我应该创建一个类似的文件`/etc/apache2/sites-available/mass_virtual`？）：

```
NameVirtualHost *:80

#default virtual host
<VirtualHost *:80>
  ServerName www.example.com
  ServerAlias example.com
  ServerAdmin webmaster@example.com
  DocumentRoot /var/www/root/web/

  <IfModule mod_fcgid.c>
    SuexecUserGroup web-admin web-admin
    <Directory /var/www/root/web/>
      Options +ExecCGI
      Options -Indexes
      AllowOverride All
      AddHandler fcgid-script .php
      FCGIWrapper /var/www/php-fcgi-scripts/root/php-fcgi-starter .php
      Order allow,deny
      Allow from all
    </Directory>
  </IfModule>

  # ErrorLog /var/log/apache2/error.log
  # CustomLog /var/log/apache2/access.log combined
  ServerSignature Off

</VirtualHost>

#3rd-level subdomain virtual hosts
<VirtualHost *:80>
  UseCanonicalName Off
  ServerAlias *.example.com
  #problematic email!
  ServerAdmin webmaster@example.com
  #is this /var/www/another.site/web or /var/www/www.another.site/web for
  #a request for www.another.site.example.com ?
  VirtualDocumentRoot /var/www/%-3+/web

  <IfModule mod_fcgid.c>
    #problematic group and user!
    SuexecUserGroup web1 web1
    <Directory /var/www/*/web/>
      Options +ExecCGI
      Options -Indexes
      AllowOverride All
      AddHandler fcgid-script .php
      FCGIWrapper /var/www/php-fcgi-scripts/*/php-fcgi-starter .php
      Order allow,deny
      Allow from all
    </Directory>
  </IfModule>

  # ErrorLog /var/log/apache2/error.log
  # CustomLog /var/log/apache2/access.log combined
  ServerSignature Off

</VirtualHost> 
```

1.  正如您从评论中看到的那样，我有一个有问题`ServerAdmin webmaster@example.com`的，一个`SuexecUserGroup web1 web1`和一个`VirtualDocumentRoot /var/www/%-3+/web`配置！

2.  此外，为了确保安全，我认为`IfModule`不应该存在——如果 `mod_fcgid`无法加载，那么服务器也不应该存在，

3.  而不是`Alow from all`，我想我应该`Deny from all`打开一个 php-library 目录！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T08:15:00.143

好的，因为我没有回复，我将尝试我提出的解决方案的一半（？）：**使用 mod_userdir 强制执行 suexec**

1.  让我们创建以下 /etc/apache2/httpd.conf

    ```
    ##########################################
    ### mod_fcgid configuration directives ###
    ##########################################
    #values should be tuned depending on server memory
    FcgidMaxProcesses 1000
    FcgidMaxProcessesPerClass 100
    FcgidMinProcessesPerClass 3
    #see 'export PHP_FCGI_MAX_REQUESTS=5000' at '/var/www/php-fcgi-scripts/<user>/php-fcgi-starter'
    FcgidMaxRequestsPerProcess 5000
    FcgidIOTimeout 40
    FcgidProcessLifeTime 3600
    FcgidMaxRequestInMem 65536
    FcgidMaxRequestLen 131072
    FcgidOutputBufferSize 65536 
    ```

2.  让我们创建一个`mass_virtual`at`/etc/apache2/sites-available/`

    ```
    #NameVirtualHost *:80

    #default virtual host
    <VirtualHost *:80>
      ServerName www.example.com
      ServerAlias example.com
      ServerAdmin webmaster@example.com
      DocumentRoot /var/www/web-admin/web/

      SuexecUserGroup web-admin web-admin
      <Directory /var/www/web-admin/web/>
        Options +ExecCGI
        Options -Indexes
        AllowOverride All
        AddHandler fcgid-script .php
        #FCGIWrapper /var/www/php-fcgi-scripts/web-admin/php-fcgi-starter .php
        FcgidWrapper /var/www/php-fcgi-scripts/web-admin/php-fcgi-starter .php
        Order allow,deny
        Allow from all
      </Directory>

      # ErrorLog /var/log/apache2/error.log
      # CustomLog /var/log/apache2/access.log combined
      ServerSignature Off

    </VirtualHost>

    #3rd-level subdomain virtual hosts
    <VirtualHost *:80>
      ServerAlias *.example.com
      ServerAdmin webmaster@example.com
      ##################
      ### solution 1 ###
      ##################
      #mod_vhost_alias directives: needs parameterized SuexecUserGroup(?)
      #UseCanonicalName Off
      #VirtualDocumentRoot /var/www/%-3+/web
      ##################
      ### solution 2 ###
      ##################
      #mod_userdir directives for requests: http://www.example.com/~user
      UserDir disabled root
      UserDir /var/www/*/public_html

      #reduntant if using requests: http://www.example.com/~user
      #SuexecUserGroup web1 web1
      <Directory /var/www/*/public_html>
        Options +ExecCGI
        Options -Indexes
        AllowOverride All
        AddHandler fcgid-script .php
        #move to .htaccess
        #FCGIWrapper /var/www/php-fcgi-scripts/*/php-fcgi-starter .php
        #FcgidWrapper /var/www/php-fcgi-scripts/*/php-fcgi-starter .php
        Order allow,deny
        Allow from all
      </Directory>

      # ErrorLog /var/log/apache2/error.log
      # CustomLog /var/log/apache2/access.log combined
      ServerSignature Off

    </VirtualHost> 
    ```

    **问题：**如果我取消注释第一行，我会在服务器重新启动时收到一条警告，指出没有虚拟主机！！

3.  让我们创建我的用户 bob

4.  让我们创建一个 .htaccess 在`/var/www/bob/public_html`

    ```
    FcgidWrapper /var/www/php-fcgi-scripts/bob/php-fcgi-starter .php 
    ```

5.  让我们点击我的浏览器`www.example.com/info.php`或`example.com/info.php`

    ```
    web-admin 
    ```

    ...正如预期的那样，但是，

6.  让我们搬到`www.example.com/~bob/info.php`

    ```
    ...trying to open info.php!!! 
    ```

    让我们看看错误

    ```
    <root># cat /var/log/apache2/error.log
    [notice] caught SIGTERM, shutting down
    [notice] suEXEC mechanism enabled (wrapper: /usr/lib/apache2/suexec)
    [notice] Apache/2.2.20 (Ubuntu) mod_fcgid/2.3.6 configured -- resuming normal operations 
    ```

    **如您所见，没有错误但未`mod_fcgid`启用运行 .php 文件，并且 apache 尝试将其作为普通文件发送！！！任何想法如何解决这个问题？**

# haskell - 这是使用liftM的案例吗？

> ID：12025658
> 
> 赞同：3
> 
> 时间：2012-08-19T10:00:30.197
> 
> 标签：haskell

我有以下功能：

```
sendq :: Socket -> B.ByteString -> String -> IO PortNumber -> IO ()
sendq s datastring host port = do
     hostAddr <- inet_addr host
     sendAllTo s datastring (SockAddrInet port hostAddr) 
```

而 sendAllTo 具有函数签名

```
sendAllTo :: Socket -> ByteString -> SockAddr -> IO () 
```

问题是从以前的函数中我得到了一个 IO PortNumber，其中 SockAddr 只接受一个 PortNumber。我试图通过将 sendAllTo 提升到 IO monad 来使这两者兼容：

```
liftM sendAllTo s datastring (SockAddrInet port hostAddr) 
```

但没有快乐。告诉我一些关于许多争论的事情。这是liftM的情况吗？如何正确应用它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T11:45:32.723

`liftM`和朋友的目的是将*纯*函数提升到一元设置，就像`Applicative`组合器所做的那样。

```
liftM :: Monad m => (s -> t) -> m s -> m t 
```

您尝试的代码有两个问题。一是缺少括号。

```
liftM sendAllTo :: IO Socket -> IO (ByteString -> SockAddr -> IO ()) 
```

这不是你的意思。另一个问题是

```
sendAllTo :: Socket -> ByteString -> SockAddr -> IO () 
```

是一个*单子*操作，所以提升它会提供两层`IO`. 通常的方法是把应用程序的纯前缀括起来，像这样

```
liftM (sendAllTo s datastring) :: IO SockAddr -> IO (IO ()) 
```

然后，您可以使用`liftM2`.

```
liftM2 SockAddrInet ioport (inet_adder host) :: IO SockAddr 
```

那给你

```
liftM (sendAllTo s datastring) (liftM2 SockAddrInet ioport (inet_adder host))
  :: IO (IO ()) 
```

就目前而言，这将一无所获，因为它解释了如何计算操作，但实际上并没有调用它！这就是你需要的地方

```
join (liftM (sendAllTo s datastring) (liftM2 SockAddrInet ioport (inet_addr host)))
  :: IO () 
```

或者，更紧凑

```
sendAllTo s datastring =<< liftM2 SockAddrInet ioport (inet_adder host) 
```

**插头。**[Strathclyde Haskell 增强](https://personal.cis.strath.ac.uk/conor.mcbride/pub/she/)支持成语方[括号](https://personal.cis.strath.ac.uk/conor.mcbride/pub/she/idiom.html)，其中

`(|f a1 .. an|) :: m t`如果`f :: s1 -> ... -> sn -> t`和`a1 :: m s1`... `an :: m sn`_

它们的作用与家庭对 monad 的作用相同`Applicative m`，`liftM`将`f`其视为纯 n 元函数，并将`a1`..`an`视为有效参数。`Monad`s 可以也应该是`Applicative`，所以

```
(|SockAddrInet ioprot (inet_addr host)|) :: IO SockAddr 
```

和

```
(|(sendAllTo s datastring) (|SockAddrInet ioprot (inet_addr host)|)|) :: IO (IO ()) 
```

然后，该表示法允许您调用像上面这样的计算单子计算，后缀为`@`.

```
(|(sendAllTo s datastring) (|SockAddrInet ioprot (inet_addr host)|) @|) :: IO () 
```

请注意，我仍然将应用程序的纯前缀括起来，因此`f`模板的`(sendAllTo s datastring)`. 该符号允许您在任何位置用 a 标记纯参数`~`，因此您可以这样写

```
(|sendAllTo ~s ~datastring (|SockAddrInet ioprot (inet_addr host)|) @|) :: IO () 
```

如果心情带你。

**咆哮。**我们花费太多精力来找出正确的`liftM`, `join`, `=<<`, `do`,`(|...~...@|)`标点符号，以便解释如何`()`在效果解释上下文（此处）中将类型切割为值解释内核（`IO`此处）。如果这种向上切割在类型中更明确，我们应该在程序中需要更少的噪音来将值和计算对齐。我更喜欢计算机来推断`~`和`@`标记的去向，但就目前情况而言，Haskell 类型的文档太模糊，无法实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T10:22:17.380

您应该能够`<-`像这样从 IO monad 中提取端口号

```
sendq s datastring host ioport = do
     hostAddr <- inet_addr host
     port     <- ioport
     sendAllTo s datastring (SockAddrInet port hostAddr) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-19T11:46:46.090

关于什么：

```
sendq s datastring host ioport = (SockAddrInet <$> inet_addr host <*> ioport)
     >>= sendAllTo s datastring 
```

我们使用`liftM`（实际上，我更喜欢，`<$>`但它们是同一件事）来构造`SockAddrInet`然后使用标准`>>=`。

关键是只对表达式中容易被提升的部分使用提升，然后使用其他处理 monad 的方式来形成其余的代码。这给出了简洁易读的代码。

# windows-8 - 最小的 Windows 8 C++ XAML 应用程序？

> ID：12025661
> 
> 赞同：8
> 
> 时间：2012-08-19T10:00:40.130
> 
> 标签：windows-8

如果我在 Visual Studio 2012 Express 中使用“创建空白 C++ XAML 应用程序”，则创建的项目有 18 个文件，源代码超过 25 KB。查看该代码很难区分 Windows 8 应用程序所需的内容和编写的内容，因为负责示例应用程序的经理最近阅读了一些“利维坦企业应用程序的最佳实践模式”一书:)。

所以也许有人知道，可以用 msbuild 编译并显示“hello world”窗口的最小工作 C++ XAML Windows 8 应用程序的源代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:21:20.463

Well, I can tell you from C#, which the folder structure should be similar to C++.

*   **Required**: Properties -> Holds the Assembly Info.
*   **Required**: References -> Holds the necessary frameworks for metro & .NET.
*   **Optional?**: Assets -> Holds the Splash Screen Images & Icons. If you dereference them I guess you can remove them.
*   **Optional?**: Common -> Holds the Standard XAML Styles. I suppose if you don't need to use them you can remove them.
*   **Required**: App.xaml -> Handles the startup and management of the W8 App.

Tell me if you can see any of these files in your C++ Project.

# javascript - 基于浏览器窗口大小的条件javascript执行？

> ID：12025666
> 
> 赞同：3
> 
> 时间：2012-08-19T10:00:55.213
> 
> 标签：javascript, jquery, css

我有一个简单的 jQuery 函数 - 详细信息如下 - 我用来操纵文档标题的位置，我想知道是否可以添加一个参数，以便该函数*仅*在浏览器窗口为一定的尺寸？在这种情况下，我希望仅当浏览器窗口宽度超过 1024 像素时才执行“stickyHeaderTop”函数；这可能吗？

```
<script type="text/javascript">
    $(function(){
    var stickyHeaderTop = $('header').offset().top;

    $(window).scroll(function(){
            if( $(window).scrollTop() > stickyHeaderTop ) {
                    $('header').css({position: 'fixed', top: '0px'});
            } else {
                    $('header').css({position: 'relative', top: '30px'});
            }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T10:10:16.633

您可以使用`screen`-Object 的、`height`和`width`属性。`availHeight``availWidth`

如果您想在小于 800 像素的屏幕上执行一些代码，例如，只需执行以下操作：

```
if (screen.width < 800){
// do stuff
} 
```

请注意，这是一个存在一些跨浏览器陷阱的区域（并且在使用 stumbleupon 工具栏时会出现问题），因此另一种方法是使用 jQuery（您已经在使用）来检测客户端的窗口大小：

```
if ($(window).width() < 800){
// do stuff
} 
```

**[在MDN](https://developer.mozilla.org/en-US/docs/DOM/window.screen.width)**上进一步阅读有关jQuery 部分的纯 JS 和**[jquery.com](http://api.jquery.com/width/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:09:42.400

您可以在`scroll`事件回调中放置类似的内容。

```
If ($(window).width() < 1024) {
    return;
} 
```

# extjs - 如何发送跨域请求以加载 Grid Ext JS 4.1

> ID：12025667
> 
> 赞同：0
> 
> 时间：2012-08-19T10:00:58.883
> 
> 标签：extjs, grid, jsonp, extjs4.1

如何将数据加载到使用 AJAX 向 ws 发送跨域请求的网格中？我可以发送请求，但是如何使用回调方法将数据加载到网格中？

在控制器文件中：

```
if(searchText){
    var resultGrid = Ext.getCmp('myResultGrid');
    store.setProxy({
                            type: 'ajax',
                            // cross domain request
                            url:"http://3.xxx.xxx.77/cs/sid/"+searchText,
                            actionMethods:{read:'GET'},
                            pageParam: false, //to remove param "page"
                            startParam: false, //to remove param "start"
                            limitParam: false,
                            timeout:9000000,
                            noCache : true,
                            reader: {
                            type: 'json'
                            }
                    });

    resultGrid.store.load({
      scope: this,
      callback: function(records, operation, success) 
      {
          var totalcount= 0;
          totalcount = records.count(true);

          if(totalcount > 0)
          {
              // Load the data into grid ???

          }
          else
          {
              Ext.Msg.alert("No Records found.");   
          }
      }
    });
} 
```

存储文件：**SearchResultsStore.js**

```
 Ext.define('AM.store.SearchResultsStore', {
    extend: 'Ext.data.Store',
    model: 'AM.model.SearchModel',
    autoLoad: false
}); 
```

模型：

```
 Ext.define('AM.model.SearchModel', {
    extend: 'Ext.data.Model',
    fields: ['slno', 'customer']
}); 
```

json响应

```
 [{"slno": "12454","customer": "acd"}] 
```

请帮助我卡住了！！！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:58:14.280

您不能使用 ajax 跨域发送请求，这是这里的实际问题。您假设您必须在加载回调中做一些事情，因为您首先没有接收到数据，这与您的问题无关，您不需要使用回调。您需要做的是使用 'jsonp' 代理而不是 ajax 配置您的商店，这样您就可以进行跨域调用：

```
store.setProxy({
                                type: 'jsonp',
                                // cross domain request
                                url:"http://3.xxx.xxx.77/cs/sid/"+searchText,
                                actionMethods:{read:'GET'},
                                pageParam: false, //to remove param "page"
                                startParam: false, //to remove param "start"
                                limitParam: false,
                                timeout:9000000,
                                noCache : true,
                                reader: {
                                type: 'json'
                                }
                        }); 
```

# macos - 什么进程使用我的相机（Macbook）

> ID：12025674
> 
> 赞同：2
> 
> 时间：2012-08-19T10:02:29.930
> 
> 标签：macos, isight

如何在 MacOS 上检测哪些进程使用我的 cam？我想拍照时出现错误：

```
DVFreeThread - CFMachPortCreateWithPort hack = 0x206fde0, fPowerNotifyPort= 0x206fd30
FATAL: setting data channel failed - cam busy/not connected ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T11:57:28.600

我不想承认，但我花了很多时间研究一个（AFAIK）尚未发布的产品，该产品试图确定相同的过程信息。

Apple通过 AVCaptureDevice 类提供了*一些*信息，例如[" `inUseByAnotherApplication`" 属性](http://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVCaptureDevice_Class/Reference/Reference.html#//apple_ref/occ/instp/AVCaptureDevice/inUseByAnotherApplication)，但我*相信*这仅适用于设备*仅*由应用程序使用的情况（并且在大多数情况下，一个相机可以将数据和帧提供给多个应用程序一次）。

这仍然不能为您提供您真正想要的东西，即使用您的 Macintosh 相机的其他应用程序的进程 ID。

而且我认为 Apple 不会轻易放弃这些信息，因为这与 Apple 的隐私和“沙盒”理念相结合：Apple 希望应用程序在自己的沙盒中运行，而不需要了解其他任何信息。应用程序。

我建议在[http://bugreporter.apple.com](http://bugreporter.apple.com)向 Apple 提交增强错误。我自己已经提交了一个（ rdar://9951989 ），但是要求此功能的开发人员越多，Apple 就越有可能在其操作系统的未来版本中向我们提供此功能。

# epplus - 找出工作表中的行尾

> ID：12025678
> 
> 赞同：8
> 
> 时间：2012-08-19T10:03:09.663
> 
> 标签：epplus

我使用 EPPlus 来阅读工作表。在此工作表中，我需要的数据位于 columns 中`B-D`。在列`A`中有静态值，我会忽略。col 中的值`A`被填充到 until 中`Row 1000`。但是，我需要的数据只会在那里，例如`Row 450`。目前我使用

```
int endRow = workSheet.Dimension.End.Row; 
```

计算要读取的最后一行，但这会返回我的值`1000`。有没有办法让我得到 endRow 的价值`450`，而忽略 col `A`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-31T18:05:46.830

这是另一种选择，它应该更有效率，因为它从最后一行倒数

```
int colB = 2;
int colD = 4;

int lastRow = workSheet.Dimension.End.Row;
while(lastRow >= 1) {
    var range = sheet.Cells[row, colB , row, colD ]
    if(range.Any(c => c.value != null))) {
        break;
    }
    lastRow --;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T01:26:06.640

您也可以检查该值是否为空。

```
if(worksheet.cells[row,column].value != null)
   {
         //ok to proceed
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T15:39:16.680

我会使用 Linq 查询来获取您需要的信息。

```
using (ExcelPackage exPackage = new ExcelPackage(aFile))
        {
            ExcelWorksheet sheet = exPackage.Workbook.Worksheets["Sheet1"];

            List<String> checkCol = new List<String>();
            checkCol.Add("B");
            checkCol.Add("C");
            checkCol.Add("D");

            int longestColumn = 0;

            foreach (String col in checkCol)
            {
                var cells = from c in sheet.Cells[col + ":" + col]
                            where c.Value != null & c.Text.ToString() != ""
                            select c;

                if (cells.Count() > longestColumn) longestColumn = cells.Count();

            }

            MessageBox.Show("The endpoint is: " + longestColumn.ToString());
        } 
```

# eclipse - 在 Eclipse rcp 中设置窗口的最大大小

> ID：12025680
> 
> 赞同：2
> 
> 时间：2012-08-19T10:03:27.653
> 
> 标签：eclipse, eclipse-rcp

Eclipse RCP 中有 setMinimumSize 选项，但没有 setMaximumSize，有没有办法实现这种类型的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T19:05:28.653

您无法设置最大值。大小到应用程序。
解决方法可能如下：
在您的`ApplicationWorkbenchWindowAdvisor`课程中`preWindowOpen()`，您可以设置最大值`configurer.setInitialSize()`并阻止该`maximize`功能，通过隐藏按钮`configurer.setShellStyle(SWT.MIN | SWT.CLOSE);`

# node.js - 服务器时间和客户端时间——差异？

> ID：12025682
> 
> 赞同：1
> 
> 时间：2012-08-19T10:03:39.407
> 
> 标签：node.js, socket.io

我写了一个代码，它告诉我一个数据包到达的`server to client`时间以及`client to server to client`再次到达的总时间。这是我的代码。

客户端：

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Ping</title>
<script src="/socket.io/socket.io.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
$(document).ready(function(e) {

    var socket = io.connect('http://pingme.jit.su:80/', {secure: false});
    $('#button').click(function(e) {
        e.preventDefault();
        $(this).attr('disabled','disabled');
        var time = (new Date()).getTime();
        socket.emit('ping', time);  
    });
    socket.on('pong', function(data)    {
        var time2 = (new Date()).getTime();
        var lat = time2 - data.server;
        var roundtrip = time2 - data.init;
        var str = '<br><br><strong>From Server</strong>: '+lat+' ms<br><strong>Roundtrip</strong>: '+roundtrip+' ms<br><br>';
        $('#res').prepend(str);
        $('#button').removeAttr('disabled');
    }); 
});
</script>
</head>
<body style="margin:0;">
<input type="button" name="Button" id="button" value="Latency">
<div id="res"></div>
</body>
</html> 
```

服务器端：

```
var app = require('http').createServer(handler)
, io = require('socket.io').listen(app)
, fs = require('fs')
, path = require('path')
, url = require("url")
, querystring = require("querystring");

app.listen(8080);

io.configure('development', function(){
  io.set('transports', ['xhr-polling']);
});

io.configure('production', function(){
  io.set('transports', ['xhr-polling']);
});

var static = require('node-static');
var fileServer = new static.Server('.', { cache: false });

function handler (request, response) {

    var pathname = url.parse(request.url).pathname;
    if(pathname == '/') {
        pathname = '/app.html';
    }   
    request.addListener('end', function () {
        fileServer.serveFile(pathname, 200, {}, request, response, function(err, result)    {
            if(err) {
                console.log(err);
                console.log(err.status);
            }
            else
                console.log(result);                
        });
    });
}

io.sockets.on('connection', function (socket) {
    socket.on('ping',function(data) {
        var time = (new Date()).getTime();
        socket.emit('pong', {server:time, init:data});
    });

}); 
```

这个问题在本地运行良好，显示以下输出：

```
From Server: 4 ms
Roundtrip: 11 ms

From Server: 10 ms
Roundtrip: 15 ms 
```

在 Nodejitsu 上部署后运行时出现异常结果。它给了我以下输出：

```
From Server: 2223 ms
Roundtrip: 956 ms

From Server: 2265 ms
Roundtrip: 915 ms 
```

数据包从服务器传输到整个往返所需的时间怎么可能比整个往返时间更长？我认为这是由于服务器和客户端之间的时间差异。你认为那是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:07:21.443

发生这种情况的原因有很多。但是如果你想测试你的编程，那么你应该将结果与 traceroute （Linux 上的命令）之类的东西进行比较。

在本地，事情总是会变得更快。当您访问 LAN 外部的内容时，您将获得各种开销和延迟。

一个简单的 traceroute 可能会解释很多。此外，您可以从这里进行操作：

[http://www.traceroute.org/](http://www.traceroute.org/)

//编辑//

有很多方法可以做到这一点，请查看此链接：

[来自浏览器的延迟/Ping 测试](https://stackoverflow.com/questions/12035569/latency-ping-test-from-browser)

但基本原则是您发送多条消息。您可以使用您的第一个请求-响应消息来计算时间。**我对大约 1000 个客户进行此操作，我所做**的是跟踪每个客户的活动。一旦计算出偏移量（即客户端比服务器早 1 小时），您就可以从延迟计算中减去它。看看这个 php 函数

[http://php.net/manual/en/function.timezone-offset-get.php](http://php.net/manual/en/function.timezone-offset-get.php)

这至少应该可以帮助您指出正确的方向:) - 如果您需要更多帮助，请告诉我。

# header - 固定页眉+粘性页脚

> ID：12025684
> 
> 赞同：3
> 
> 时间：2012-08-19T10:04:10.487
> 
> 标签：header, css-position, sticky-footer

嘿 Stackoverflow 团队，

我有一个固定页眉和粘性页脚的小问题。代码可在此处获得：http: [//jsfiddle.net/sgWxh/](http://jsfiddle.net/sgWxh/)

我想要实现的目标： + 始终保持在顶部的页眉，即使在滚动过程中 - 它始终在同一个位置可见， + 页脚粘在页面底部 - 在滚动过程中不可见，除非你会到达底部页的。

我看到以这种方式制作的粘性页脚无法以某种方式固定位置：http://ryanfait.com/resources/footer-stick-to-bottom-of-page/

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T10:03:25.467

刚看到这个页面，因为我遇到了同样的问题。而不是`margin-top`你必须使用`padding-top`and `box-sizing: border-box`：

[http://jsfiddle.net/sgWxh/20/](http://jsfiddle.net/sgWxh/20/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-06T15:21:28.863

亚历山大，你的技术很好。对于我正在从事的项目，我有一些额外的要求。我需要固定的页眉和粘性页脚，还需要一个固定的侧边栏，用于响应式导航。通过您的示例，我能够修改并实现这一点，而无需使用支持不佳的 flexbox 或 cssgrid。谢谢！这是我的解决方案：

[https://jsfiddle.net/jrotondo/zecdv0h5/1/](https://jsfiddle.net/jrotondo/zecdv0h5/1/)

`

```
html, body {
  height:100%;   margin:0;padding:0;
}

html {
  background:#fff;
}

.header-container {
  width:100%;
  height:52px;
  background-color:#ccc;
  margin:0 auto;
  position:fixed !important;
  position: absolute; /*ie6 and above*/
  top:0;
  left:0;
  right:0;
}

header {
  width:80%;
  margin:0 auto;
  height:52px;
  text-align:center;
}

aside.sidebar-container {
  background-color:#ff9900;
  margin: 0 0 -52px 0;
  position:fixed !important;
  position: absolute; /*ie6 and above*/
  top: 52px;
  left:0;
}

#content {
  min-height: 100%;
  height: auto !important;
  height: 100%;
  box-sizing: border-box;
}

footer {
  width:100%;
  height: 75px;
  background-color: #666;
  color: #fff;
  margin:0 auto;
  text-align:center;
}

.push {
  height:75px;
}

/*Mobile View*/
@media only screen and (max-width: 1024px) {
  aside.sidebar-container {
    width:100vw;
    height:42px;
    z-index: 1;
  }
  #content {
    padding-top: 94px;
    width: calc(100vw - 40px);
    margin: 0px 20px -75px 20px;
  }
}

@media only screen and (min-width: 1025px) {
  aside.sidebar-container {
    width:192px;
    height:100vh;
    z-index: -1;
  }
  #content {
    padding-top: 62px;
    width: calc(100vw - 232px);
    margin: 0px 20px -75px 212px;
  }
} 
```

`

```
 <!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Fixed Header / Sticky Footer</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="header-container">
    <header>
      Fixed Header
    </header>
  </div>
  <aside class="sidebar-container">
    <nav class="main-nav">
      Fixed Nav
    </nav>
  </aside>
  <div id="content">
    <p>
      Praesent tortor massa, ultrices in mattis non, viverra vitae eros. Fusce egestas suscipit nulla tincidunt cursus.
      Etiam eget tortor sit amet arcu bibendum bibendum nec in lorem. Phasellus posuere placerat mi, et consequat sem molestie ut.
      Sed eget sapien sed lacus laoreet vestibulum sit amet nec lectus. Aenean sed tortor turpis. Morbi consectetur diam quis augue
      convallis iaculis. Curabitur pulvinar scelerisque euismod. Cras et sagittis mauris. Mauris nisl ipsum, bibendum et congue vitae,
      blandit id sapien. Suspendisse ipsum metus, vehicula quis ultrices at, interdum quis nunc. Aenean fermentum hendrerit nisl vitae
      euismod. Morbi dictum mattis tellus, ac ornare sapien venenatis quis.
    </p>
    <p>
      Praesent tortor massa, ultrices in mattis non, viverra vitae eros. Fusce egestas suscipit nulla tincidunt cursus.
      Etiam eget tortor sit amet arcu bibendum bibendum nec in lorem. Phasellus posuere placerat mi, et consequat sem molestie ut.
      Sed eget sapien sed lacus laoreet vestibulum sit amet nec lectus. Aenean sed tortor turpis. Morbi consectetur diam quis augue
      convallis iaculis. Curabitur pulvinar scelerisque euismod. Cras et sagittis mauris. Mauris nisl ipsum, bibendum et congue vitae,
      blandit id sapien. Suspendisse ipsum metus, vehicula quis ultrices at, interdum quis nunc. Aenean fermentum hendrerit nisl vitae
      euismod. Morbi dictum mattis tellus, ac ornare sapien venenatis quis.
    </p>
    <p>
      Praesent tortor massa, ultrices in mattis non, viverra vitae eros. Fusce egestas suscipit nulla tincidunt cursus.
      Etiam eget tortor sit amet arcu bibendum bibendum nec in lorem. Phasellus posuere placerat mi, et consequat sem molestie ut.
      Sed eget sapien sed lacus laoreet vestibulum sit amet nec lectus. Aenean sed tortor turpis. Morbi consectetur diam quis augue
      convallis iaculis. Curabitur pulvinar scelerisque euismod. Cras et sagittis mauris. Mauris nisl ipsum, bibendum et congue vitae,
      blandit id sapien. Suspendisse ipsum metus, vehicula quis ultrices at, interdum quis nunc. Aenean fermentum hendrerit nisl vitae
      euismod. Morbi dictum mattis tellus, ac ornare sapien venenatis quis.
    </p>
    <p>
      Praesent tortor massa, ultrices in mattis non, viverra vitae eros. Fusce egestas suscipit nulla tincidunt cursus.
      Etiam eget tortor sit amet arcu bibendum bibendum nec in lorem. Phasellus posuere placerat mi, et consequat sem molestie ut.
      Sed eget sapien sed lacus laoreet vestibulum sit amet nec lectus. Aenean sed tortor turpis. Morbi consectetur diam quis augue
      convallis iaculis. Curabitur pulvinar scelerisque euismod. Cras et sagittis mauris. Mauris nisl ipsum, bibendum et congue vitae,
      blandit id sapien. Suspendisse ipsum metus, vehicula quis ultrices at, interdum quis nunc. Aenean fermentum hendrerit nisl vitae
      euismod. Morbi dictum mattis tellus, ac ornare sapien venenatis quis.
    </p>
    <p>
      Praesent tortor massa, ultrices in mattis non, viverra vitae eros. Fusce egestas suscipit nulla tincidunt cursus.
      Etiam eget tortor sit amet arcu bibendum bibendum nec in lorem. Phasellus posuere placerat mi, et consequat sem molestie ut.
      Sed eget sapien sed lacus laoreet vestibulum sit amet nec lectus. Aenean sed tortor turpis. Morbi consectetur diam quis augue
      convallis iaculis. Curabitur pulvinar scelerisque euismod. Cras et sagittis mauris. Mauris nisl ipsum, bibendum et congue vitae,
      blandit id sapien. Suspendisse ipsum metus, vehicula quis ultrices at, interdum quis nunc. Aenean fermentum hendrerit nisl vitae
      euismod. Morbi dictum mattis tellus, ac ornare sapien venenatis quis.
    </p>
    <div class="push"></div>
  </div>
  <footer> Sticky Footer</footer>
</body>

</html> 
```

# asp.net - Asp.Net 和 Asp.Net MVC 中 Ajax 的区别

> ID：12025685
> 
> 赞同：4
> 
> 时间：2012-08-19T10:04:48.413
> 
> 标签：asp.net, ajax, asp.net-mvc

asp WEB FORMS中的ajax和asp mvc有什么区别？从一侧使用**Ajax.ActionLink**和**RenerPartialView**更新某些块的 ajax 请求是否会比从另一侧使用**asp:UpdatePanel**更快？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T10:16:01.670

> 从一侧使用 Ajax.ActionLink 和 RenerPartialView 更新某些块的 ajax 请求是否会比从另一侧使用 asp:UpdatePanel 更快？

是的，它会更快，因为它通过网络发送的信息更少。此外，您可以完全控制通过网络发送的内容并对其进行优化。

另一方面，WebForms UpdatePanel 发送整个视图状态，使请求变得更加庞大，而您几乎没有控制权。它还有另一个缺点：它依赖于微软的 javascrpt 库，这可能是他们创建的库的最大错误。从 ASP.NET MVC 3 开始，他们弃用了 jQuery，转而支持 jQuery，这是一件好事。这就是为什么你会看到越来越多的人甚至在他们的经典 WebForms 应用程序中使用 jQuery 来执行 AJAX 工作，而不是依赖于 UpdatePanel。

但是底层技术是完全一样的：网络浏览器的`XMLHttpRequest`对象。

# java - 导出 .jar 时出现 FileNotFoundException

> ID：12025689
> 
> 赞同：2
> 
> 时间：2012-08-19T10:06:01.813
> 
> 标签：java, jar, applet, inputstream, filenotfoundexception

在我的客户端/服务器应用程序中，我需要将一些文件（`.txt`,`.doc`等）从客户端发送到服务器。当我在 Eclipse 中运行我的代码时它可以工作，但是当我导出 Applet 的签名 JAR 时它不会。它抛出一个`FileNotFoundException`. 我尝试以多种方式保存文件，但均未成功。

```
public static boolean saveFile(File sourceFile) throws IOException {

    DirectoryChooserDialog dialog = new DirectoryChooserDialog();
    filePath = dialog.getDestinationFolder();
    if (filePath != null) {
        InputStream inputFile = ClassLoader.getSystemResourceAsStream(""+sourceFile);

        filePath += File.separator + sourceFile.getName();

        FileOutputStream outputFile = new FileOutputStream(filePath);

        int byteLetti = 0;
        while ((byteLetti = inputFile.read(buffer)) >= 0) {
            outputFile.write(buffer, 0, byteLetti);
            outputFile.flush();
        }

        inputFile.close();

        outputFile.close();

        return true;
    } else
        return false;
} 
```

使用的替代代码：

```
FileInputStream inputFile = new FileInputStream(sourceFile); 
```

或者

```
InputStream inputFile = ClassLoader.class.getResourceAsStream(""+sourceFile); 
```

或者

```
InputStream inputFile = FileSaving.class.getResourceAsStream(""+sourceFile); 
```

原始代码和所有替代代码都在 Eclipse 中工作，并在导出时停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:16:02.333

此代码正在查找类路径上的文件。如果那里没有文件，它会抛出 FNF。当您在 Eclipse 中工作时，您的文件可能在 src 中，因此它被复制到 bin。将文件归档到 jar 后，您可以访问它，`getResource`或者`getResourceAsStream`

```
InputStream inputFile = this.getClass().getClassLoader().getResourceAsStream(sourceFile.getName()) 
```

或使用网址。例如

```
URL url = new URL("jar:file:/c:/path/to/my.jar!/myfile.txt"); 
JarURLConnection conn = (JarURLConnection)url.openConnection();
InputStream inputFile = conn.getInputStream(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:09:08.033

您需要手动将资源复制到 jar 中。

为此，请使用 7zip 或 winRar 或其他任何软件，右键单击并“打开存档”。然后将您的资源（例如 png 等）拖放到适当的文件夹（通常是根目录）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:41:28.567

我生气后找到了解决方案。Windows 没有打开文件的权限。因此，以管理员权限运行您的浏览器，它将正常工作。

# ruby-on-rails - 如何编写一个前置过滤器来实例化一个包含指向任何给定控制器的索引操作的链接的变量？

> ID：12025692
> 
> 赞同：0
> 
> 时间：2012-08-19T10:06:20.937
> 
> 标签：ruby-on-rails

我有许多控制器，我想在其中设置一个变量 @top_tier_link，该变量具有指向这些控制器的索引操作的链接。现在我有这样的：

```
class School::CoursesController < ApplicationController  
  before_filter :set_top_tier_link

  private
    def set_top_tier_link
      @top_tier_link = school_courses_path
    end
end

class School::UsersController < ApplicationController  
  before_filter :set_top_tier_link

  private
    def set_top_tier_link
      @top_tier_link = school_users_path
    end
end 
```

我想在过滤器之前定义一个，它可以为任何控制器自动设置它。我怎么能做到这一点？

编辑：

这只是一个示例，需要这种帮助器的控制器数量要多得多。此变量用于布局级别，因此大多数控制器都需要它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:21:29.643

在 ApplicationController 中定义它。在那里，您可以根据`params[:controller]`变量进行区分。像这样的东西：

```
before_filter :set_top_tier_link

def set_top_tier_link
  case params[:controller]
    when 'Courses'; @top_tier_link = school_courses_path
    when 'Users'; @top_tier_link = school_users_path
  end
end 
```

或者甚至更好地为此指定一个助手，它的作用几乎相同。像这样：

```
def top_tier_link
  @top_tier_link ||= case params[:controller]
    when 'Courses'; school_courses_path
    when 'Users'; school_users_path
  end
end

helper_method :top_tier_link 
```

更新：如果您不想硬编码，路径名可以自动生成。有点危险，但它应该做的工作：

```
def top_tier_link
  @top_tier_link ||= send(params[:controller].gsub("/","_")+"_path")
end 
```

# python - 雅虎状态检测

> ID：12025696
> 
> 赞同：2
> 
> 时间：2012-08-19T10:07:44.683
> 
> 标签：python, yahoo

谁能指导我如何编写一个网站来检查雅虎信使 ID 的可用性（离线-在线-不可见）？我的意思是类似`imvisible.info`和更多类似的网站..我想用python写它，但我不明白我应该如何开始！？雅虎是否有任何标准 API 或类似的东西适合我？

请给我我应该在我的网站上使用的代码以获得 ID 可用性或至少一些关于我的问题的链接.. :) 提前谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T10:29:59.630

[Python 包索引](http://pypi.python.org/pypi)有[几个](http://pypi.python.org/pypi?%3aaction=search&term=yahoo&submit=search)与 Yahoo 打交道的包。

你也可以检查。

1.  [雅虎信使 IM SDK](http://developer.yahoo.com/messenger/guide/chapterintrotomessengersdk.html)。

# jquery - 识别使用 jQuery 时返回的数据类型

> ID：12025697
> 
> 赞同：0
> 
> 时间：2012-08-19T10:08:04.590
> 
> 标签：jquery

使用 jQuery 时是否可以识别页面返回的数据类型？问题是，一个页面是提交给 user_verify.php 的表单。如果表单不包含错误，则 user_verify.php 返回 HTML 并稍后重定向。如果发现错误，则返回 json 数据（一个数组），该数据被发送到 errorDivs。user_verify.php 只进行处理，不包含任何内容标题等。知道如何做这样的事情吗？

```
dataType: //Could be json, Could be HTML 
        url: "user_verify.php",
        success: function(data) {
            //If dataType == json //Form had error - do this
            //If dataType == HTML //Form was ok - say thanks and redirect 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T10:11:27.427

像这样试试

```
try
{
   var json = JSON.parse(data);
}
catch(e)
{
   alert('invalid json Means HTML part');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:26:22.017

一个更好的方法是，如果你总是返回 json，它有一个包含你的 html 的属性：

```
{success: true, html:"Congrat", redirect: "/success"} 
```

# mysql - 尝试支持 mysql 故障转移

> ID：12025706
> 
> 赞同：0
> 
> 时间：2012-08-19T10:10:02.323
> 
> 标签：mysql, failovercluster, database-cluster

我的 MYSQL 服务器没有正确配置故障转移。我正在考虑使用 Redhat 集群或心跳。此外，我需要使用一个浮动 IP 来完成所有任务，因为应用程序不知道多个数据库。有人可以建议最好的路线吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T10:17:31.520

如果您决定使用常规复制，我建议您使用：

[用于 MySQL 复制高可用性的 MHA 工具](http://yoshinorimatsunobu.blogspot.co.il/2012/01/mha-for-mysql-053-released.html)

我对您想要使用的方式没有很好的体验，它们不如集群好，也比我发布的工具的正常复制好不了多少。我相信你应该看看这个工具，也许坚持定期复制或使用 MySQL 集群跳转到严重的 HA。配置集群可能很困难，但使用[几个九的解决方案](http://www.severalnines.com)可能会更容易一些。

# jquery-ui-autocomplete - jquery-ui自动完成默认文本

> ID：12025710
> 
> 赞同：0
> 
> 时间：2012-08-19T10:10:23.227
> 
> 标签：jquery-ui-autocomplete

我有一个 jquery-ui 自动完成文本框，我想为文本框设置默认文本，当文本框获得焦点时，我想删除它。

*   如何设置文本框的初始文本？
*   我如何删除焦点上的文字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T10:22:29.670

试试这个

```
$( ".selector" ).autocomplete({
   focus: function(event, ui) { $(".selector").val('');}
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:36:00.283

我设法解决了它：

1.  使用 value 属性设置自动完成的默认文本
2.  我破坏使用焦点事件的唯一方法是这样的：

    `$("SELECTOR").autocomplete({ .... }).focus( function(event, ui) {
    ...... });`

# emacs - ERC - 修改传入消息

> ID：12025711
> 
> 赞同：3
> 
> 时间：2012-08-19T10:10:37.720
> 
> 标签：emacs, elisp

我正在使用下面的 elisp 代码来修改来自 ERC 的传入消息

```
(defun my-modify (msg)
  (replace-regexp-in-string "abc" "xyz" msg))
(add-hook 'erc-insert-modify-hook 'my-modify) 
```

我收到以下错误

```
error in process filter: Wrong number of arguments: (lambda (msg) 
(replace-regexp-in-string "abc" "xyz" msg)), 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T05:53:50.727

我不确定我以前的代码有什么问题，但我能够使用此代码修改传入的消息（来自[http://mwolson.org/projects/emacs-config/erc-init.el](http://mwolson.org/projects/emacs-config/erc-init.el)）

```
(defun my-modify (proc parsed)
  (let ((msg (erc-response.contents parsed)))
    (when (stringp msg)
      (setf (erc-response.contents parsed)
            (erc-replace-regexp-in-string "abc" "xyz" msg))
      nil)))
(add-hook 'erc-server-PRIVMSG-functions 'my-modify) 
```

这按预期工作，但我真正想要的是去掉一个特定的缺口并只显示消息。但是我认为这在 ERC 级别是不可能的。相反，我将不得不在缓冲区级别尝试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T17:06:55.287

显然，调用的函数`erc-insert-modify-hook`不会像您的代码所期望的那样将传入消息作为参数。

引用[http://www.emacswiki.org/emacs/ErcHooks](http://www.emacswiki.org/emacs/ErcHooks)我们看到：

> 这个钩子在插入实际文本后运行。当它运行时，缓冲区使用窄到区域缩小到插入的文本。因此，您可以使用 (point-min) 和 (point-max) 来确定修改钩子上插入文本的开始和结束。

所以你应该在当前缓冲区中替换。

# python - PyQt4 - python-djvulibre 分段错误

> ID：12025714
> 
> 赞同：0
> 
> 时间：2012-08-19T10:11:24.730
> 
> 标签：python, pyqt4, djvu

当我尝试编写一个小程序来预览 DjVu 文件时，我遇到了一个特殊的问题。这是一个将 DjVu 文档的页面渲染为 PyQt4 的 QImage 类的小函数。

```
import djvu.decode as DjVu
from PyQt4.QtCore import QImage
from PyQt4.QtGui import QPixmap, QApplication, QLabel

def djvu2pixmap( filename, width, height ) :
    doc = DjVu.Context().new_document( DjVu.FileURI( filename ) )
    doc.decoding_job.wait()
    pg = doc.pages[ 0 ]
    pg.decode( wait = True )
    data = pg.thumbnail.render( ( width, height ), DjVu.PixelFormatRgbMask( 0xff0000, 0xff00, 0xff, bpp = 32 ) )
    image = QIamge( data[ 1 ], data[ 0 ][ 0 ], data[ 0 ][ 1 ], QImage.Format_RGB32 )
    image.save( "/tmp/image.png" )
    return QPixmap.fromImage( image )

if __name__ == '__main__' :

    import sys

    app = QApplication( sys.argv )

    lbl = QLabel()
    lbl.setPixmap( djvu2pixmap( "trial.djvu" ), 200, 300 )
    lbl.show()
    lbl.resize( lbl.pixmap().size() )

    exit( app.exec_() ) 
```

现在说我将图像宽度和高度设置`( 300, 500 )`为程序崩溃了`SegmentationFault`。我也意识到图像没有问题。它确实得到了正确的保存。我只是无法显示它。不仅如此，我还可以毫无问题地打开保存的图像并显示它。我很好奇为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:00:58.693

在您调用 lbl.setPixmap 后，您的 QPixmap 可能会立即被删除。试试这个：

```
pixmap = djvu2pixmap( "trial.djvu" )
lbl.setPixmap( pixmap, 200, 300 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-31T15:26:22.397

原来问题出在`python-djvu`包裹上。该软件包的更高版本`python-djvu`解决了该问题。

# button - p:commandButton 在 JSF 2 中不执行 f:setPropertyActionListener

> ID：12025720
> 
> 赞同：3
> 
> 时间：2012-08-19T10:12:30.420
> 
> 标签：button, jsf-2, primefaces

我使用 JSF2 和 PrimeFaces，我想用这个按钮转到另一个页面：

```
<p:column>
    <h:commandButton action="userCommand" value="list of commands" >
        <f:setPropertyActionListener value="#{car}" target="#{userController.u1}" />  
    </h:commandButton>
</p:column> 
```

在目标页面上，我使用了来自 的一些信息`userController.u1`，但`<f:setPropertyActionListener>`标签似乎没有被执行。

因此，我得到以下异常：

```
java.lang.NullPointerException 
```

作为对 Arjan 的回应，感谢您的详细回复，但我认为还有另一种方法可以做到这一点，而不是像我在问题中那样使用新的 managedBean，而是使用一个已经实例化的 (sessionScoped)，然后我调用它在新的构造函数中检索值，

你如何找到这个解决方案？你能帮我从新的 managedBean 的构造函数中调用另一个 managedBean 吗？

因为我测试了这个：

```
 ELContext elContext = context.getELContext();
    Application application = context.getApplication();
    String userid = (String) application.evaluateValueExpressionGet(context,
            "#{userBean.userid}", String.class); 
```

但我对“上下文”有疑问。你有什么主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T12:31:16.437

这取决于您如何设置相应的导航规则`userCommand`和/或`userController`这是否会起作用的范围。

操作侦听器在导航发生之前在 bean 中设置一个值。如果导航导致发生重定向，则 bean 必须在此重定向后可用的范围内。在没有添加任何其他范围的情况下，这将是应用程序范围和会话范围。

如果 bean 在请求范围或视图范围内，您的值将在重定向发生之前设置在与请求对应的 bean 中。在重定向到新页面的新请求完成后，新的请求范围或新的视图范围开始。这意味着您的价值将丢失。

使用应用程序范围或会话范围理论上可以解决此问题，但如果您的应用程序有多个用户（很可能）或单个用户打开多个窗口/选项卡，您会遇到重大问题。

如果您的导航规则*不*使用重定向，它应该确实有效。现在的问题是您将遭受“一个 URL 背后的问题”：浏览器的地址栏仍将显示旧页面。

由于您并没有真正执行任何操作而只是想转到新页面，因此更好的方法是使用`<h:button>`or直接链接到该页面，`<h:link>`并提供所述汽车的 If 作为参数。

这将发出一个 GET 请求，该请求具有可收藏的额外好处。如果你在做 Post-Redirect 的事情，它最初也会表现得更好。在目标页面上，您必须准备好将参数转换回汽车实例。为此，您可以使用`<f:viewParam>`标签。

链接示例：

```
<p:column>
    <h:button outcome="userCommand" value="list of commands">
        <f:param name="car_id" value="#{car.id}"/>
    </h:Button>
</p:column> 
```

目标页面示例：

```
<f:metadata>
    <f:viewParam name="car_id" value="#{userController.u1}" converter="#{carConverter}" />    
</f:metadata> 
```

有关此示例的工作示例，请参阅[此](http://jdevelopment.nl/sample-crud-app-with-jsf-and-richfaces)示例 CRUD 应用程序中的[index.xhtml](http://code.google.com/p/javaee6-crud-example/source/browse/WebContent/index.xhtml?name=default)和[user_edit.xhtml 。](http://code.google.com/p/javaee6-crud-example/source/browse/WebContent/user_edit.xhtml?name=default)

# c# - 将图像添加到 wpf

> ID：12025721
> 
> 赞同：2
> 
> 时间：2012-08-19T10:12:42.047
> 
> 标签：c#, wpf

我想向`Image`wpf 应用程序动态添加一个。

我尝试过的：

```
 Image img = new Image();
            img.Height = 100;
            img.Width = 100;
            img.Visibility = Visibility.Visible;

            Thickness th = new Thickness(100, 100, 0, 0);
            img.Margin = th;

            string strUri2 = String.Format(@"pack://application:,,,/MyFirstWPF;component/Images/tt.jpg");
            img.Source = new BitmapImage(new Uri(strUri2)); 
```

我知道，除非我将图像添加到内容中，否则图像不会显示。

```
this.Content=img; 
```

但是这样一来，应用程序上的现有控件（形状）就会丢失。

现在，我的问题是如何在不丢失应用程序现有控件​​的情况下将图像添加到内容中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T10:48:23.577

当您要动态加载和显示图像时，您仍然需要考虑应用程序的布局。我建议在 XAML 中（例如在网格中）添加一个（最初为空的）图像控件，然后`Source`在代码中设置此控件的属性。

```
<Grid>
    ... other controls ...
    <Image Name="img" Grid.Row="..." Grid.Column="..."
           Width="100" Height="100" Margin="100,100,0,0"/>
</Grid> 
```

`Source`在代码中设置：

```
var uri = new Uri("pack://application:,,,/MyFirstWPF;component/Images/tt.jpg");     
img.Source = new BitmapImage(uri); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T10:26:48.787

默认情况下，窗口内容是一个网格，所以试试

```
(this.Content as Grid).Children.Add(img); 
```

# ruby-on-rails - 从 ActionController 扩展中获取方法名称

> ID：12025722
> 
> 赞同：0
> 
> 时间：2012-08-19T10:12:45.980
> 
> 标签：ruby-on-rails, ruby, activerecord, actioncontroller

我有一个 ActiveRecord 类 ActionController 的扩展：

```
module MyExtension
  def my_method
    "default implementation"
  end
end
ActionController::Base.class_eval { include MyExtension } 
```

我所有的控制器都继承自`ApplicationController`，它继承自`ActionController::Base`. 我想添加并覆盖`MyExtension`继承类中的方法

```
class MyController < ApplicationController
   module MyExtension
     def my_method
       "overridden implementation"
     end
     def my_new_method
       "added method implementation"
     end
   end
 end 
```

然后我想动态查找在 MyExtension 中为特定 Controller 类定义的方法

```
controller = Kernel.const_get("MyController")
methods_in_my_extension = Kernel.const_get("MyController::MyExtension").public_instance_methods 
```

显然，这是行不通的，因为没有`MyController::MyExtension`定义常量。

在更一般的意义上，我想要实现的是：

1.  为继承自的类实现默认行为的分组方法`ActionController::Base`

2.  能够覆盖并添加到类定义中的那些方法

3.  动态获取特定类的分组方法列表

编辑：回答Deefour关于我为什么要这样做：

我正在创建一个 CLI 菜单来环绕控制器。它接受用户的输入来调用控制器方法。菜单直接从控制器收集方法，从而定义有效的命令/输入。

我想要的是定义一个新的封装级别，一个新的访问说明符，一个公共方法的子集，可以通过 CLI 菜单访问。

我可以通过为所有菜单可用的方法创建一个前缀来实现这一点，但我也试图掌握 ruby​​ 的内部工作原理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:52:55.557

我想到了：

动作控制器扩展：

```
module MyExtension
  module MyDefaultImplementations
    def my_method
      "default implementation"
    end
  end
  def get_selected_methods
    default = MyDefaultImplementations.public_instance_methods
    added = Kernel.const_get(self.class.name).const_get("MyImplementation").public_instance_methods
    return (default + added).uniq
  end
end
ActionController::Base.class_eval { include MyExtension } 
```

控制器：

```
class MyController < ApplicationController
  module MyImplementation
    def my_method
      "overridden implementation"
    end
    def my_new_method
      "added method implementation"
    end
  end
  include MyImplementation
end 
```

这似乎暂时有效。如果有人有任何替代/更好的方法，我很乐意看到他们。此外，如果有任何重大警告或与惯例冲突，请告诉我。

# android - Android上GC的日志

> ID：12025724
> 
> 赞同：1
> 
> 时间：2012-08-19T10:13:12.230
> 
> 标签：android, garbage-collection

我在理解 GC 日志时遇到了问题。

日志：GC_EXTERNAL_ALLOC释放82K，释放48% 2829K/5379K，外部1702K/2137K，暂停28ms

任何人都可以解释日志的含义吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T11:20:16.320

在我曾经看过的这个 Google IO 中，我相信演示者 (Patrick Dubroy) 陈述了不同的日志及其关联：[Google I/O：Android 应用程序的内存管理](http://dubroy.com/blog/google-io-memory-management-for-android-apps/)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:22:42.757

我认为这些日志消息没有记录在案。

如果您使用 Eclipse 进行开发，您应该使用 DDMS 透视图 | 分配跟踪器来跟踪您的内存分配。

# jquery-mobile - 在应用程序设置中包装 jquery mobile

> ID：12025725
> 
> 赞同：1
> 
> 时间：2012-08-19T10:13:22.350
> 
> 标签：jquery-mobile, push-notification

我正在测试一些跨平台开发工具来开发移动应用程序。
我对系统（设备）的需求真的很低。

1.  应用程序需要始终在后台（作为服务）存在。
2.  我需要将通知推送到设备，例如：

    ![在此处输入图像描述](../Images/9d589caecaf45090472fe9c69d8ef5a5.png)

我想支持 android 和 ios 手机和平板电脑。

是否有任何工具可以包装我的 jquery mobile 并为我提供通知的 api？

谢谢

# ios - 我想使用 AIR 和 ActionScript 3 开发一个 iPhone 应用程序，我需要该应用程序来接收 MIDI。如何？

> ID：12025726
> 
> 赞同：0
> 
> 时间：2012-08-19T10:13:24.037
> 
> 标签：ios, actionscript-3, air, coremidi

我不完全确定这些协会是如何运作的。iOS 实现了 CoreMIDI。好的。可以使用 XCode 和 Objective C 构建一个支持 CoreMIDI 的应用程序。我没有 Mac，我对 Objective C 的外观感到非常震惊。我不知道我是否想学习。我只是偶然发现了使用 actionscript 3.0 使用 Flash CS5 编写应用程序的可能性。

我的理解是，我在 AS3 中编写源代码，并在编译期间将其移植到原生 iOS 应用程序中。那是对的吗？

我想开发一个应用程序，在现场表演期间播放背景音轨，能够循环当前播放音轨的区域，并能够使用 MIDI 进行控制，更具体地说是脚踏板/MIDI 键盘等...

我可以用 AS3 和 AIR 做到这一点吗？还是我必须承认为了让 MIDI 工作我需要学习 Objective C 并使用 XCode 来做这件事的事实？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T10:46:16.037

在 as3 上为在 AVM 中运行的 iOS 编写的应用程序。它们不是在原生 iOS 代码中编译的。

如果您想使用 CoreMIDI，您可以编写[NativeExtension](http://www.adobe.com/devnet/air/native-extensions-for-air.html)，它允许调用使用 ActionScript 包装的本机代码。

或者您可以尝试使用一些 ActionScript MIDI 库。例如[MidAs3](http://code.google.com/p/midas3/wiki/MidAs3)

# python - 在 Dreamhost 上运行 web.py

> ID：12025727
> 
> 赞同：1
> 
> 时间：2012-08-19T10:13:55.117
> 
> 标签：python, web.py, dreamhost, fastcgi

我正在尝试使用本指南在 Dreamhost 上设置 [web.py：Web.py - Dreamhost Wiki](http://wiki.dreamhost.com/Web.py)

我的问题是这个主题的许多页面都引用了 fcgi.py 并链接到不再存在的 svn 存储库。所以我得到了flup，我可以跑了

```
import web
from flup.server import fcgi 
```

在 Python 中没有错误，但不是`import fcgi`

的`flup.server`版本`fcgi`不能单独存在，所以我不能简单地将一个文件复制到 PYTHONPATH 的某个地方。

当我尝试打开 index.py `500 Internal server error`。我试图检查日志，但它们非常有用——我得到的只是`"GET / HTTP/1.1" 200`。

我已经没有想法如何调试这个东西了。

# c++ - c++字符串函数

> ID：12025732
> 
> 赞同：0
> 
> 时间：2012-08-19T10:14:30.547
> 
> 标签：c++, linux

我正在尝试创建一个可从主函数调用的字符串函数，但这会导致分段错误......任何想法？？？

也可以创建一个返回字符串的字符串函数..

```
#include <iostream>
#include <stdio.h>
#include <sstream>

using namespace std;

string callMe(string& k){

    cout << "String from callMe: " << k;

}

int main(){

   string k;

   k = "K SHK";

   cout << "String from main function: " << k << endl;

   callMe(k);

} 
```

**更新：**

它编译得很好..

```
[root@server dev]# ./stringtest 
String from main function: K SHK
Segmentation fault 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T10:19:28.963

你的函数`callMe`应该返回一个字符串，但你永远不会返回任何东西。

如果您启用了编译器警告，则会收到有关此警告（我建议添加 -Wall 和 -Wextra）

将返回类型从 更改为 是可以解决`string`的`void`。

然而，该`main`函数不需要 return 语句（但对于初学者来说，添加 可能会更好`return 0;`）：

从 C++ 标准：

> main 中的 return 语句具有离开 main 函数（销毁具有自动存储持续时间的任何对象）并以返回值作为参数调用 std::exit 的效果。**如果控制在没有遇到return语句的情况下到达main的末尾，效果就是执行“return 0;”。**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-19T10:18:51.733

问题是您已将函数声明为返回 a `string`，但不返回一个。

有两种方法可以修复它：

*   如果您不打算返回字符串，请更改`callMe`为

    `void callMe(string& k);`

*   如果您确实打算返回一个字符串，那么通过添加一个 return 语句来执行此操作，例如

    `return "I'm returned from callMe, called with " + k;`

此外，一些风格评论：

*   尽可能在定义点初始化变量是个好主意。在你的情况下，你会写：

    ```
    string k = "K SHK"; 
    ```

    或者

    ```
    string k("K SHK"); 
    ```

    如果您以后不打算修改字符串，您也可以考虑定义 is`const`以捕获意外更改（例如，通过使用 of`=`而不是`==`）：

    ```
    string const k = "K SHK"; 
    ```

*   如果不更改 中的参数`callMe`，则应使用对 const 的引用：

    ```
    void callMe(string const& k); 
    ```

    分别

    ```
    string callMe(string const& k); 
    ```

这将允许您在常量字符串和字符串文字上调用函数，例如`callme("I'm a string literal");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T10:18:22.703

```
void callMe(string& k){

    cout << "String from callMe: " << k;

} 
```

由于您已将 Callme 声明为返回字符串的函数，而另一方面您什么也不返回，因此此类代码可能会导致分段错误。（因为 eax 中的值未定义）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T10:20:15.603

callMe() 和 main() 函数必须返回一些东西......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T10:21:24.820

在您的功能`callMe`中没有`return`. 尝试：

```
void callMe(string& k)
{
   cout << "String from callMe: " << k;
} 
```

该`main()`函数必须返回一个`int`（通常为 0）。

Ps：如果不修改函数中的字符串 k ，请使用 const reference `const string&`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-19T11:01:48.827

> 也可以创建一个返回字符串的字符串函数。当然。对上面的原始代码稍作修改，它看起来像这样......

```
string callMe(string& k){
    string returnValue("String from callMe: ");
    returnValue += k;
    cout << returnValue << endl;
    return returnValue;
} 
```

# c# - 如何删除错误类型没有定义构造函数

> ID：12025738
> 
> 赞同：4
> 
> 时间：2012-08-19T10:15:27.920
> 
> 标签：c#

我正在尝试解析网页。但它给出了一个错误。请帮我。谢谢。

这是代码：

```
 static void myMain()
    {
        using (var client = new WebClient())
        {
            string data = client.DownloadString("http://www.google.com");
            HtmlDocument doc = new HtmlDocument();
            doc.LoadHtml(data);

            var nodes = doc.DocumentNode.SelectNodes("//a[@href]");
            foreach (HtmlNode link in nodes)
            {
                HtmlAttribute att = link.Attributes["href"];
                Console.WriteLine(att.Value);
            }
        }
    } 
```

`The type 'System.Windows.Form.HtmlDocument' has no constructors defined.`我已经包含了 HAP ，这是错误的。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T10:18:27.470

改变

```
HtmlDocument doc = new HtmlDocument(); 
```

至

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument(); 
```

因为你不想和`System.Windows.Form.HtmlDocument`

# iphone - 从 web 视图中的有序列表中删除缩进

> ID：12025741
> 
> 赞同：1
> 
> 时间：2012-08-19T10:16:05.230
> 
> 标签：iphone, html, ios, ipad, webview

我正在 webview 中创建一个有序列表，我想从列表中删除缩进，即让列表与第一段对齐。这是HTML：

```
<body  style="font-family: arial""font-size:18">
 <p>First paragraph.</p>
 <p>
  <ol style="margin-left:0px">
    <li>List 1</li>
    <li>List 2</li>
    <li>List 3</li>
  </ol>
 </p>
</body> 
```

请注意，使用`margin-left:0px`，webview 仍然将列表缩进大约 17 个点。如果我说`margin-left:-17px`，我可以通过 hack 让它工作，但我宁愿不这样做，因为它看起来更像是我在构建我的 HTML 时做错了什么。

任何人都可以看到它有什么问题吗？

**更新的 HTML - 仍然不起作用：**

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
    body {
        font-family: arial;
        font-size: 18px;
    }
    ol {
        padding-left: 0px;
    }
    </style>
</head>
<body>
    <p>Paragraph.</p>
    <p>
    <ol>
        <li>List item 1.</li>
        <li>List item 2.</li>
        <li>List item 3.</li>
    </ol>
    </p>
</body>
</html> 
```

我在 iPhone 3GS 上使用 iOS 5.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T10:51:11.013

尝试这个....

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
    body {
        font-family: arial;
        font-size: 18px;
    }
    .flush-left {
        padding-left: 25px;
    }
</style>    
</head>
<body>
    <p>First paragraph.</p>
    <p>
        <ol class="flush-left">
            <li>List 1</li>
            <li>List 2</li>
            <li>List 3</li>
        </ol>
    </p>
</body>
</html> 
```

其他几个指针。在桌面上的 html 测试文件中测试你的东西，然后将它们加载到 Safari 和 iOS 模拟器中（将 html 文件拖到模拟器中打开的 safari 上）。

但是您可以使用常规 Safari 调试工具来检查 html 和 css。或 Firefox 中的 Firebug。

此外，当有疑问时 www.w3schools.com ... :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T10:21:49.453

您可以使用以下方式归档这样的样式：

```
ol {
  list-style-type: none;
  margin: 0;
  padding: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-29T20:46:05.990

如果您仅分配零填充，则项目符号会离开屏幕。我发现以下内容非常适合我的 webview

```
ul,ol {padding-left: 20px;}
li {padding-left:2px;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-04T21:06:55.247

也许我对您的需求有点晚了——我刚刚遇到了这个。

我只在我的 iPhone 上注意到了这一点，而不是我的 iPad，也不是 Mac 上的 Safari。我发现有点奇怪，这个问题只会出现在一个版本的 Safari 中，而不是全部。我也没有发生在 Chrome 中。

在查看 Chrome 开发人员工具时，我注意到用户代理样式表添加了许多 -webkit 前缀样式，所有这些都与边距和填充有关：

```
-webkit-margin-before: 1em;
-webkit-margin-after: 1em;
-webkit-margin-start: 0px;
-webkit-margin-end: 0px;
-webkit-padding-start: 40px; 
```

当我第一次看到它时，我想知道这是否是问题所在，但是，已经很晚了，我不得不休息一下。今天，我再次处理它，但忘记了这些样式。我环顾四周，遇到了@Remover 的问题。但是，设置特定的基于像素的边距或填充并不适合我。

在某个时候，我决定在 Chrome 中缩小我的浏览器窗口，并且发现问题也存在，只是当我将其缩小到接近 iPhone 的宽度时。因此，这不仅仅是 iOS 问题。它是网络套件。

我再次查看了开发工具中的样式，再次看到了 -webkit 样式和 -webkit-padding-start 上的 40px。我玩弄我的css，这确实是罪魁祸首。

然后我将以下内容添加到我的样式表中：

```
ol {
    -webkit-padding-start: 2em;
    -ms-padding-start: 2em;
    -moz-padding-start: 2em;
    -o-padding-start: 2em;
    padding-start: 2em;
} 
```

我做了一些快速的研究，看起来只有 -webkit 和 -moz 正在使用 padding-start，但我添加了其余的，以防万一他们捡起它——不过，既然 Opera 已经切换到 webkit，-o 可能是不需要。

在我的例子中，我使用了 2em，因为这符合我的风格。不确定 2em 是否会全面工作。

**编辑**

我还应该提到它可能只显示在小屏幕上，因为它设置为 40 像素。在我的设计中，我全屏的基本字体大小是 23px，而 480px 及以下是 10px，这有很大的不同。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-19T10:20:55.650

不是吗

```
 <ul><li></li></ul> 
```

不是`<ol>`吗？

看起来你的body标签的样式可能有语法错误

:)

~ 丹

# python - Django：为什么当我在 django 中通过 popen 使用 Ghostscript 时会出现“找不到文件”错误

> ID：12025743
> 
> 赞同：1
> 
> 时间：2012-08-19T10:16:42.707
> 
> 标签：python, django, ghostscript, subprocess

我正在尝试使用 ghostscript 从 Django 内部将 pdf 转换为 jpg，但是当我尝试使用 subprocess.popen 运行 ghostscript 命令时，出现“找不到文件”错误。如果我通过命令行从 py 文件运行完全相同的脚本，它可以正常工作。

这是我的脚本：

```
import os
import subprocess

path =  "/tmp/e15hntd/"

### this next line is what seems to cause the file not found error

sp = subprocess.Popen("gs -dSAFER -dNOPAUSE -dQUIET -dBATCH -sDEVICE=jpeg -sOUTPUTFILE=" + path + "/static.jpg " + path + "/source.pdf") 
```

在四处寻找可能的解决方案后，我尝试了几个替代版本的违规行，例如：

```
sp = subprocess.Popen(['gs', '-dSAFER', '-dNOPAUSE', '-dQUIET', '-dBATCH', '-sDEVICE=jpeg', '-sOUTPUTFILE=' + path + "/static.jpg", path + "/source.pdf"]) 
```

或者：

```
sp = subprocess.call("gs -dSAFER -dNOPAUSE -dQUIET -dBATCH -sDEVICE=jpeg -sOUTPUTFILE=" + path + "/static.jpg " + path + "/source.pdf") 
```

这是完整的错误：

[Errno 2] 没有这样的文件或目录

追溯：

```
File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py" in get_response
111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/contrib/admin/options.py" in wrapper
366\.                 return self.admin_site.admin_view(view)(*args, **kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/utils/decorators.py" in _wrapped_view
91\.                     response = view_func(request, *args, **kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/views/decorators/cache.py" in _wrapped_view_func
89\.         response = view_func(request, *args, **kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/contrib/admin/sites.py" in inner
196\.             return view(request, *args, **kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/utils/decorators.py" in _wrapper
25\.             return bound_func(*args, **kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/utils/decorators.py" in _wrapped_view
91\.                     response = view_func(request, *args, **kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/utils/decorators.py" in bound_func
21\.                 return func(self, *args2, **kwargs2)
File "/usr/local/lib/python2.6/dist-packages/django/db/transaction.py" in inner
209\.                 return func(*args, **kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/contrib/admin/options.py" in change_view
1054\.                 self.save_model(request, new_object, form, True)
File "/home/Django/Update/admin.py" in save_model
41\.             sp = subprocess.call("gs -dSAFER -dNOPAUSE -dQUIET -dBATCH -sDEVICE=jpeg -sOUTPUTFILE=" + unique_path + "/static.jpg " + unique_path + "/source.pdf" + unique_path + "/source.pdf")
File "/usr/lib/python2.6/subprocess.py" in call
480\.     return Popen(*popenargs, **kwargs).wait()
File "/usr/lib/python2.6/subprocess.py" in __init__
633\.                             errread, errwrite)
File "/usr/lib/python2.6/subprocess.py" in _execute_child
1139\.                 raise child_exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T12:39:55.083

您收到的错误意味着`subprocess`模块找不到它想要运行的可执行文件。

如果脚本从命令行运行，那么`gs`可执行文件显然存在，所以看起来`gs`可执行文件不在`PATH`运行 Django 应用程序的文件上。如果您指定`gs`(eg `/usr/bin/gs`) 的完整路径，它会有所帮助吗？

顺便说一句，如果我尝试`subprocess`启动一个不存在的可执行文件，我会收到相同的错误消息：

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import subprocess
>>> subprocess.call("nonexistent")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/subprocess.py", line 493, in call
    return Popen(*popenargs, **kwargs).wait()
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

**编辑**：如果您的进程使用命令行参数，则必须将可执行文件名称和参数指定为单独的列表项，就像您第二次尝试运行时一样`gs`：

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import subprocess
>>> subprocess.call("ls /usr")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/subprocess.py", line 493, in call
    return Popen(*popenargs, **kwargs).wait()
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory
>>> subprocess.call(["ls", "/usr"])
bin  games  include  lib  lib32  lib64  local  sbin  share  src  X11R6
0 
```

第一个示例不起作用，因为我的`ls /usr`系统上的任何位置都没有命名的可执行文件。

您能否尝试修改您的第二次尝试以使用 的完整路径`gs`，例如：

```
sp = subprocess.Popen(['/usr/bin/gs', '-dSAFER', '-dNOPAUSE', '-dQUIET', '-dBATCH', '-sDEVICE=jpeg', '-sOUTPUTFILE=' + path + "/static.jpg", path + "/source.pdf"]) 
```

# android - Android：从网络提供商处获取地名

> ID：12025744
> 
> 赞同：0
> 
> 时间：2012-08-19T10:17:01.513
> 
> 标签：android, gps

我正在构建一个不使用 INTERNET 的 GPS 应用程序。所以我不能使用 API 来获取位置。

我已经从网络提供商那里提取了纬度和经度。我想知道我是否可以从网络提供商处提取当前地名。默认情况下，地名与网络提供商名称一起显示（单元信息显示）。我想以编程方式提取它..我能做到吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:53:02.197

> 我想知道是否可以从网络提供商处提取当前地名

不，对不起。

# xml - oracle pl/sql中的XML解析

> ID：12025748
> 
> 赞同：0
> 
> 时间：2012-08-19T10:17:35.813
> 
> 标签：xml, oracle, plsql

我正在尝试在 PL/SQL 中解析这个 XML

```
<?xml version="1.0" encoding="utf-8"?>
<!--ADOR Acknowledgement 2--> 
<AckTransmission xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.irs.gov/efile">
  <TransmissionHeader recordCount="1">
    <Jurisdiction>ALABAMA</Jurisdiction>
    <TransmissionId>1946157056</TransmissionId>
    <Timestamp>2012-08-16T01:25:47-05:00</Timestamp>
    <Transmitter>
      <ETIN>00000</ETIN>
    </Transmitter>
    <ProcessType>T</ProcessType>
    <AgentIdentifier>ACK</AgentIdentifier>
  </TransmissionHeader>
  <Acknowledgement>
    <SubmissionId>X1684956672</SubmissionId>
    <EFIN>X16849</EFIN>
    <GovernmentCode>ALST</GovernmentCode>
    <SubmissionType>XMLTOM</SubmissionType>
    <TaxYear>9999</TaxYear>
    <SubmissionCategory>MFET</SubmissionCategory>
    <AcceptanceStatus>A</AcceptanceStatus>
    <ContainedAlerts>0</ContainedAlerts>
    <StatusDate>2012-08-16</StatusDate>
  </Acknowledgement>
</AckTransmission> 
```

我将此 XML 存储在一个表中，并使用一个函数从中提取数据。但这并不成功：

```
SELECT EXTRACTVALUE (VALUE (xml_list), '//@GovernmentCode/') AS SysID
  INTO lv_transid      
  FROM TABLE (
            XMLSEQUENCE (
               EXTRACT (in_xmlclob, '/AckTransmission/Acknowledgement',
                        'xmlns="http://www.irs.gov/efile"'))) xml_list; 
```

你能帮我解析这个 XML 并加载到表中吗？

能否请您告诉我如何获得评论部分--ADOR Acknowledgement 2--

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:24:35.640

我认为您在这里有两件事有误：

*   首先，您的 XPath 表达式`//@GovernmentCode/`是错误的。它不应该有一个尾随`/`，你也不想要，`@`因为`GovernmentCode`它是一个元素，而不是一个属性。

*   其次，您必须在对 的调用`EXTRACTVALUE`以及对 的调用中指定 XML 命名空间声明`EXTRACT`。

进行这些更改后，您将获得以下代码。我给了它一个快速测试，它似乎工作：

```
SELECT EXTRACTVALUE (VALUE (xml_list), '//GovernmentCode', 'xmlns="http://www.irs.gov/efile"') AS SysID
  INTO lv_transid      
  FROM TABLE (
            XMLSEQUENCE (
               EXTRACT (in_xmlclob, '/AckTransmission/Acknowledgement',
                        'xmlns="http://www.irs.gov/efile"'))) xml_list; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T22:15:04.077

您可以使用正则表达式将 xmlns 替换为空字符串...然后您可以读取 xml 列

`xml:= regexp_replace(xml,'(xmlns:[a-z]|xmlns).*?(\"|\'').*?(\"|\'')',' ');`

# python - 逐行组合列表（Python）

> ID：12025750
> 
> 赞同：8
> 
> 时间：2012-08-19T10:18:08.817
> 
> 标签：python, list

假设我有 3 个不同的列表

```
col1 = ['2006-03-28','2006-04-05','2006-04-06']
col2 = ['IBM', 'MSFT', 'IBM']
col3 = [1000, 1000, 500] 
```

将这些列表组合到另一个列表中的最有效方法是什么：

```
col = [('2006-03-28', 'IBM', 1000),
       ('2006-04-05', 'MSFT', 1000),
       ('2006-04-06', 'IBM', 500)] 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-19T10:20:15.567

```
>>> col1 = ['2006-03-28','2006-04-05','2006-04-06']
>>> col2 = ['IBM', 'MSFT', 'IBM']
>>> col3 = [1000, 1000, 500]
>>> list(zip(col1, col2, col3))
[('2006-03-28', 'IBM', 1000), ('2006-04-05', 'MSFT', 1000), ('2006-04-06', 'IBM', 500)] 
```

如果您的列已经在一个列表中，您可以使用`zip(*cols)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-09T11:56:28.077

代码如下： Python 3.x

```
>>> col1 = ['2006-03-28','2006-04-05','2006-04-06']
>>> col2 = ['IBM', 'MSFT', 'IBM']
>>> col3 = [1000, 1000, 500]

>>> col = list(zip(col1 ,col2 ,col3 ))

>>> print(str(col))

[('2006-03-28', 'IBM', 1000),
 ('2006-04-05', 'MSFT', 1000),
 ('2006-04-06', 'IBM', 500)] 
```

只是它本身的 zip() 语法适用于 Python 2.x。使用上面的代码在 Python 3.x 中将列表组合为行方式（或电子表格列）。

# c# - 如何获取模板列 Total Throw javascript？

> ID：12025751
> 
> 赞同：-1
> 
> 时间：2012-08-19T10:18:11.827
> 
> 标签：c#, javascript, telerik

如何获取 radgrid 模板列总抛出 javascript 代码隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:42:06.400

我解决了她是脚本的问题

```
function ValueChanged(sender, args) {
        var grid = $find("<%=grd.ClientID %>");//grid id

        var totalAmount = 0;

        if (grid) {
            var MasterTable = grid.get_masterTableView();
            var Rows = MasterTable.get_dataItems();
            var footer = grid.get_masterTableViewFooter().get_element();
            //footer.rows[0].cells[1].innerHTML = 'My Footer Text'; // Set the footer text 

            var TotalQnty = 0;
            var TotalNetAmount = 0;
            for (var i = 0; i < Rows.length; i++) {
                var row = Rows[i];
                var txtIND_QTY = row.findControl("txtgrdIndentQty");//gridcolumns
                var txtNetAmount =Number(row.findControl("txtgrdNetamount"));
                TotalQnty = TotalQnty + parseFloat(txtIND_QTY.get_value());
                TotalNetAmount = TotalNetAmount + txtNetAmount;
            }
            footer.rows[0].cells[2].innerHTML = "Rs. "+TotalQnty;
            footer.rows[0].cells[6].innerHTML = "Rs. "+TotalNetAmount;
            alert(TotalQnty);
            alert(TotalNetAmount);
        }
    } 
```

# javascript - 如何根据另一个已经存在的选择器选择元素？

> ID：12025757
> 
> 赞同：0
> 
> 时间：2012-08-19T10:19:07.923
> 
> 标签：javascript, jquery, iframe, document, designmode

我有以下代码：

```
<html>
    <head>
        <script src="http://www.google.com/jsapi" type="text/javascript"></script>
        <script type="text/javascript">
        google.load("jquery", 1);
        </script>
        <script type="text/javascript">
            var rt, rt2;
            window.onload = function () {
                rt = $('#rt').contents().get(0);
                rt.designMode = 'On';
            }
        </script>
    </head>
    <body>
        <iframe id="rt" width="500" height="500"></iframe>
    </body>
</html> 
```

rt 当前正在选择整个 iframe 文档。我希望 rt2 选择文档元素内的 body 元素，这就是 rt 选择的内容。我试过了：

```
rt2 = jQuery(rt, "html");
rt2 = jQuery(rt2, "body"); 
```

但它似乎没有用。怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T10:22:41.340

根据[文档](http://api.jquery.com/jQuery/)，搜索的上下文应该作为第二个参数提供，而不是第一个参数，所以试试这个：

```
rt2 = jQuery("html", rt); 
```

上下文可以是：

> 用作上下文的 DOM 元素、文档或 jQuery

在内部，上下文是使用该`.find()`方法实现的。所以上面的例子只是一个简短的例子：

```
rt2 = jQuery(rt).find("html"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T10:21:10.003

使用[`find`](http://api.jquery.com/find/)：

```
var myFrame = $('#rt').contents();
var myvar = myFrame.find('body'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T10:22:13.820

尝试：

```
rt2body = iframeElement.find("body"); 
```

进一步阅读 .find：[http ://api.jquery.com/find/](http://api.jquery.com/find/)

# android - 如何通过android中的音频端口获取数据

> ID：12025762
> 
> 赞同：1
> 
> 时间：2012-08-19T10:19:55.130
> 
> 标签：android, android-intent

我想通过音频插孔使用串行端口获取数据。我对此一无所知。我找到了他们通过端口读取数据的应用程序广场。所以有人知道如何获取数据，或者有没有类似的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:32:12.483

[Romotive](http://romotive.com/developers)是一个帮助你用智能手机制作机器人的项目，它使用音频插孔进行数据传输，我认为该软件是开源的。

# android - 如何从 HTC sense 获取图像共享？

> ID：12025766
> 
> 赞同：0
> 
> 时间：2012-08-19T10:20:20.237
> 
> 标签：android, android-intent, sense

我有一个 ICS 及更高版本的应用程序，可以从图库接收共享意图。我的清单意图是接收图像的标准意图：

```
 <intent-filter> 
      <action android:name="android.intent.action.SEND"/> 
      <data android:mimeType="image/*"/>
  </intent-filter> 
```

它在我测试的每台设备上都能正常工作（华硕变形金刚、nexus 7 Galaxy nexus、三星 s2、三星 s3）……但我一直收到 HTC sense 用户的 1 星评级，他们说这不会出现在他们的共享菜单上。

关于如何解决这个废话的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T15:12:14.250

尝试添加：

```
<category android:name="android.intent.category.DEFAULT" /> 
```

到你的`<intent-filter>`. 所有活动`<intent-filter>`元素都应该有一个`<category>`，因为默认情况下，所有`Intent`使用的 s`startActivity()`都会有一些类别，`DEFAULT`默认情况下。

HTC 并没有`queryIntentActivities()`单独使用来填充其共享菜单，因为 Picasa 似乎不支持任何传统`Intent`的共享内容。但是，HTC 菜单中出现的许多其他应用程序都具有与`<intent-filter>`您类似的`<category>`元素，所以运气好的话，它会起作用。

# android - 如何将警报对话框放在视图的最顶部

> ID：12025768
> 
> 赞同：0
> 
> 时间：2012-08-19T10:20:29.207
> 
> 标签：android

我正在制作一个警报对话框，并希望在屏幕的最顶部显示它（它的高度应该从最顶部开始）。我该怎么做？这是代码：

```
AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);
m_rb10Minutes = new RadioButton(this);
            m_rb10Minutes.setText("10 minutes");
            m_rb20Minutes = new RadioButton(this);
            m_rb20Minutes.setText("20 minutes");
            m_rb30Minutes = new RadioButton(this);
            m_rb30Minutes.setText("30 minutes");
LinearLayout linearLayout = new LinearLayout(this);
            linearLayout.setBackgroundColor(getResources().getColor(R.color.black));
            linearLayout.setLayoutParams( new  LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT,
                    LinearLayout.LayoutParams.MATCH_PARENT));
            linearLayout.setOrientation(1);  

            linearLayout.addView(m_rb10Minutes);
            linearLayout.addView(m_rb20Minutes);
            linearLayout.addView(m_rb30Minutes);
            alertTimer = alertDialog.create();
            alertTimer.setView(linearLayout);

            alertTimer.requestWindowFeature((int) Window.FEATURE_NO_TITLE);
            WindowManager.LayoutParams WMLP = alertTimer.getWindow().getAttributes();

            WMLP.x = 0;   //x position
            WMLP.y = 0;   //y position

            alertTimer.getWindow().setAttributes(WMLP);

            alertTimer.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:27:31.980

使用以下代码

```
 private CharSequence[] items = {"Set as Ringtone", "Set as Alarm"};
      AlertDialog.Builder builder = new AlertDialog.Builder(this);
      builder.setItems(items, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int item) {

        if(item == 0) {

        } else if(item == 1) {

        } else if(item == 2) {

        }
    }
    });

 AlertDialog dialog = builder.create();
 dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
 WindowManager.LayoutParams WMLP = dialog.getWindow().getAttributes();

WMLP.x = 100;   //x position
  WMLP.y = 100;   //y position

    dialog.getWindow().setAttributes(WMLP);

   dialog.show(); 
```

# php - 在 https 页面上嵌入 Justin.tv 播放器

> ID：12025769
> 
> 赞同：1
> 
> 时间：2012-08-19T10:20:36.397
> 
> 标签：php, javascript, html, flash, justin.tv

我在尝试将 Justin.tv 播放器嵌入我的页面时遇到了一个小问题。该页面正在使用 https 连接，我想不惜一切代价保持这种状态。

Justin.tv 没有您嵌入其播放器的网站部分的 SSL 证书。

如果我将常规嵌入代码放入，由于某种原因它不会加载它。如果我把它放在 iframe 中然后它会加载它，但玩家知道它在 iframe 中并显示一条错误消息，说明它不能在 iframe 中使用。如果我在协议中将 https 嵌入它，它有时会加载，有时不会。一直以来，它都不允许我在地址栏中保留我漂亮的绿色 https:// :(

谁能想出一些方法来做到这一点？:D

编辑：忘了提，我正在运行 Nginx 和 PHP 5.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T10:28:03.647

好吧，既然他们阻止了你以这种方式添加播放器......

要么删除页面上的 ssl ...

或者您可以让您的页面为播放器弹出一个新窗口。

* * *

顺便说一句，不允许您在地址栏中保留绿色 https：

它是**设计使然**，因此用户知道它并不完全安全。这是因为通常用户会期望**整个页面**是安全的。这让他们知道他们应该小心输入他们**非常公开**的信用卡信息！

# c++-cli - 位运算符的某些使用不清楚

> ID：12025779
> 
> 赞同：0
> 
> 时间：2012-08-19T10:22:01.183
> 
> 标签：c++-cli, clr

为什么声明这个时变量名之前的位运算符

```
Ping ^pingSender = gcnew Ping; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:30:45.760

你说的是这段代码？？

```
Ping ^ pingSender = gcnew Ping;

// When the PingCompleted event is raised, 
// the PingCompletedCallback method is called.
pingSender->PingCompleted += gcnew PingCompletedEventHandler( PingCompletedCallback ); 
```

这意味着 ping 类的实例将从 System.Net.NetworkInformation::Ping 创建。简单地说，这不是 XOR 操作，而是在 .NET 的 C++ 微软实现中声明托管类型对象的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:29:05.017

在这种情况下，`^`不是按位异或；它声明`pingSender`为对托管类型（.NET 的原生类型）的引用`Ping`。

我假设您熟悉 C# 和常规非托管 C++ 的基础知识。

这行代码等于

```
Ping pingSender = new Ping(); 
```

在 C# 中，如果`Ping`是非托管 C++ 类，

```
Ping* pingSender = new Ping; 
```

在 C++ 中。如您所见，`^`在声明中使用时具有另一种含义，就像`*`C/C++ 中的非托管类型一样。

# google-app-engine - 如何在低级 api 数据存储中批量写入、更新和删除实体？

> ID：12025789
> 
> 赞同：0
> 
> 时间：2012-08-19T10:23:54.927
> 
> 标签：google-app-engine, low-level-api

我想向数据存储添加 100 个实体（然后更新和删除它们），但我不知道如何在低级 api 中做到这一点。我在 JDO 中做到了。低级别的文档非常稀缺。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:51:26.840

您可以将实体集合传递给 put 方法 - 这将批量创建/更新实体：（实体[`datastoreService.put(Iterable<Entity>)`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/DatastoreService#put%28java.lang.Iterable%29)集合）。

您还可以批量删除：（[`datastoreService.delete(Iterable<Key> collection)`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/DatastoreService#delete%28java.lang.Iterable%29)键集合）或[`datastoreService.delete(Key.. keys)`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/DatastoreService#delete%28com.google.appengine.api.datastore.Key...%29)（键数组）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T15:54:11.420

文档在这里：[批量操作](https://developers.google.com/appengine/docs/java/datastore/entities#Java_Batch_operations)。

我建议您也看看[异步数据存储 api](https://developers.google.com/appengine/docs/java/datastore/async)，以进一步提高应用程序的性能。

# bash - 如何在 bash 中编写看门狗守护进程？

> ID：12025790
> 
> 赞同：4
> 
> 时间：2012-08-19T10:23:57.720
> 
> 标签：bash, shell, daemon, nohup

我想要一种在 shell 脚本中编写守护程序的方法，它在循环中运行另一个应用程序，如果它死了就重新启动它。

*   当使用`./myscript.sh`SSH 会话运行时，它将启动一个新的守护进程实例，除非守护进程已经在运行。
*   当 SSH 会话结束时，守护进程将继续存在。
*   应该有一个参数（`./myscript -stop`）杀死任何现有的守护进程。

* * *

（***编辑注意事项***- 原始问题指定`nohup`不得使用类似工具。这种人为要求是“XY问题”，而接受的答案实际上使用了OP声称无法使用的所有工具。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T12:25:03.450

根据评论中的说明，您真正想要的是一个守护进程，它可以让子进程保持运行，并在它退出时重新启动它。您想要一种在 ssh 会话中键入“./myscript.sh”并启动守护程序的方法。

```
#!/usr/bin/env bash
PIDFILE=~/.mydaemon.pid
if [ x"$1" = x-daemon ]; then
  if test -f "$PIDFILE"; then exit; fi
  echo $$ > "$PIDFILE"
  trap "rm '$PIDFILE'" EXIT SIGTERM
  while true; do
    #launch your app here
    /usr/bin/server-or-whatever &
    wait # needed for trap to work
  done
elif [ x"$1" = x-stop ]; then
  kill `cat "$PIDFILE"`
else
  nohup "$0" -daemon
fi 
```

运行脚本：它将使用 nohup 为您启动守护进程。守护进程是一个循环，监视子进程退出，并在退出时重新启动它。

为了控制守护进程，`-stop`脚本可以使用一个参数来杀死守护进程。查看系统初始化脚本中的示例以获得更完整的示例以及更好的错误检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T11:58:30.647

最近“后台”进程的 pid 存储在`$!`

```
$ cat &
[1] 7057
$ echo $!
7057 
```

我不知道`fork`bash 中的命令。你确定 bash 是适合这项工作的工具吗？

# maven - 如何让 maven 将 JavaFX 视为 JRE 的一部分

> ID：12025791
> 
> 赞同：1
> 
> 时间：2012-08-19T10:24:05.153
> 
> 标签：maven, javafx

我正在尝试使用 JavaFX。但是，由于 JDK 1.7 JavaFX 现在是 JRE 的一部分，因此当我运行 maven install 并且未指定系统依赖项时，系统依赖项编译失败，因为找不到 JavaFX 类。有没有办法让 Maven 将 JavaFX 视为 JDK 的一部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T16:00:35.203

现在，将 jfxrt.jar 保留为系统依赖项，就像您所做的那样。

从 jdk7u6 开始，尽管 jfxrt.jar 位于 jdk 的 jre/lib 目录中，但由于非 JavaFX 程序的潜在兼容性问题，JavaFX 不在默认的 java 类路径中。在以后的 jdk 版本中，JavaFX 将被添加到默认的 jdk 类路径中，并且不再需要将 JavaFX 指定为项目的 maven 系统依赖项。

# php - PHP将字符串分成几部分

> ID：12025792
> 
> 赞同：0
> 
> 时间：2012-08-19T10:24:13.583
> 
> 标签：php, string

我有以下格式的字符串：

```
$date = "2012-07-22 17:48:24"; 
```

我想在变量中获取年份、月份和日期并忽略时间。我正在尝试以下操作：

```
list($year, $month, $day) = split('[-]', $date); 
```

这将正确的值返回到`$year`and `$month`，但`$day`得到：`"22 17:48:24"`，而我只想得到 22。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-19T10:28:33.003

您可以使用 DateTime 对象，而不是爆炸值：

```
<?php
$date = "2012-07-22 17:48:24";
$dateTime = new DateTime($date);

var_dump(array(
    'year' => $dateTime->format('Y'),
    'month' => $dateTime->format('m'),
    'day' => $dateTime->format('d'),        
)); 
```

这将是最灵活的选择恕我直言。

正如@zerkms 在他的评论中指出的那样，您也可以使用`strtotime()`and `date()`，但我发现自己`DateTime`最近才使用该课程。不仅因为它有一个很好的 OO API，还因为它会在 2038 年后继续工作:-)。不过评论没有错。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T10:45:41.133

还有这个[`sscanf()`](http://php.net/sscanf)功能。

```
sscanf('2012-07-22 17:48:24', '%d-%d-%d', $year, $month, $day); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-19T10:25:22.790

使用[爆炸](http://php.net/manual/en/function.explode.php)：

```
$date = "2012-07-22 17:48:24";
$date = explode(" ", $date);
list($year, $month, $day) = split('[-]', $date[0]); 
```

编辑：

您也应该对日期使用explode：

```
list($year, $month, $day) = explode('-', $date[0]); 
```

不鼓励使用 split ，因为它已被弃用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T10:27:51.370

```
$date = "2012-07-22 17:48:24";
preg_match('~^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$~', $date, $m);
print_r($m); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-19T10:29:53.533

```
$date = date('Y-m-d', strtoime("2012-07-22 17:48:24"));
list($year, $month, $day) = split('[-]', $date); 
```

# java - 问题：Android中的空指针异常

> ID：12025793
> 
> 赞同：-6
> 
> 时间：2012-08-19T10:24:14.110
> 
> 标签：java, android, function, nullpointerexception

我是一个新的android开发人员，我写了一个线程类，当我单击另一个类的按钮但抛出空指针异常时调用线程类，类调用定义公共这是我的代码，A类；

```
done.setOnClickListener(new View.OnClickListener() 
{
@Override
public void onClick(View v) 
  {
    ClassB b=new ClassB();
    b.runalarm();
  } 
```

B类；

```
public void runalarm() 
{
SimpleThread my=new SimpleThread("myclass");
my.start();

}

class  SimpleThread extends Thread 
{
    private static final int None = 0;

    public SimpleThread(String str) 
    {
    super(str);
    }
    public void run() 
    {
        try
        {
               boolean loop=true;
               DatabaseHelper1 dbHelper1=new DatabaseHelper1(getApplicationContext());
} 
```

请提前解决我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:31:56.630

尝试做这样的事情......

```
done.setOnClickListener(new View.OnClickListener() 
{
@Override
public void onClick(View v) 
  {
    ClassB b = new ClassB();

    ClassB.SimpleThread sx = b.new SimpleThread();

    sx.start();
  } 
```

# django - Django - 如何定期提交数据库

> ID：12025796
> 
> 赞同：1
> 
> 时间：2012-08-19T10:24:40.607
> 
> 标签：django, celery

我正在开发 Django 应用程序，100 名用户将使用该应用程序发表评论。对于每条评论，我不能做`Model.save()`哪个提交数据库并且不可扩展。我想使用 celery 定期提交数据库。有没有办法做到这一点？

我在 django 中检查了事务管理，但没有得到任何指示。请帮我。

我想在保存许多模型后手动提交，这应该仅限于少数模型。对于用户创建，我想立即保存并提交。仅适用于我想定期提交的帖子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T12:03:28.470

你的要求是胡说八道。首先，保存和提交是两件不同的事情 - 模型实例可以（并且正在）单独保存到数据库中，而提交与事务有关并且可以涉及一个或多个数据库行。调用`save()`本身并不执行提交 - 默认情况下，事务基于请求/响应周期，其中事务在请求开始时打开并在响应结束时提交。

其次，完全不可能有一个单独的进程来处理提交。事务管理的重点是事务内部的内容*仅对*处理事务本身的连接可见。在该事务之外，就好像数据库根本没有改变。

至于可扩展性，请参阅 dgel 的评论。没有必要将您的承诺外包给一个单独的流程，特别是如果您只与“数百”个用户打交道。这是任何数据库都可以毫不费力地管理的一小部分。

# php - XML php 变量元素号

> ID：12025797
> 
> 赞同：0
> 
> 时间：2012-08-19T10:24:44.193
> 
> 标签：php, xml

```
 $aid= $_GET["aid"];
 echo $xml->orders->ITEM["$aid"]->name; 
```

使用此脚本，我试图显示 XML 页面的值。变量`$aid`是元素的数量。这可以是 0 到 1000。

当我运行这个脚本时，只显示什么。

这工作正常

```
 $aid= $_GET["aid"];
 echo $xml->orders->ITEM[1]->name; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:32:40.777

您分配的键错误，只使用不带撇号的变量名。

```
echo $xml->orders->ITEM[$aid]->name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T10:39:04.750

使用整数键，值来自`$_GET`字符串。

```
$aid = (int) $_GET["aid"];
echo $xml->orders->ITEM[$aid]->name; 
```

对于 SimpleXML，整数值表示集合中的元素（例如`0`，是第一个，`1`是第二个），而字符串值表示该名称的属性。

我假设该值不仅仅是一个数字（因为 SimpleXML 可以识别它，即使是一个字符串）。

# ruby-on-rails-3 - 使用 RSpec，我如何测试使用类的实例调用方法但使用特定属性的特定值？

> ID：12025800
> 
> 赞同：0
> 
> 时间：2012-08-19T10:25:04.793
> 
> 标签：ruby-on-rails-3, rspec2, rspec-rails

我想编写如下测试：

```
account = Account.find(1)
@controller.should_receive(:authorize!).with(:create, instance_of(User, :account_id => account.id)) 
```

（在我的控制器上测试[cancan](https://github.com/ryanb/cancan) gem 的确切示例）

我知道这部分`:account_id => account.id`是无效的。

我的问题在这里：

如何调用`instance_of`但同时测试实例的属性以具有特定值？

我希望这很清楚。否则，让我知道，我怎样才能让它更清楚。

提前致谢

帕纳约蒂斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:24:58.950

你想测试什么？控制器加载正确的实例并将正确的实例传递给`:authorize!`？如果是，那么类似：

```
Account.should_receive(:find).returns(account))
@controller.should_receive(:authorize!).with(account) 
```

会做这项工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:34:05.203

您可以使用块来更好地控制预期的参数，更多信息： [参数匹配器](https://www.relishapp.com/rspec/rspec-mocks/v/2-7/docs/argument-matchers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T04:21:18.343

要扩展已接受的答案，可以使用[参数匹配器](https://www.relishapp.com/rspec/rspec-mocks/v/2-7/docs/argument-matchers)执行以下操作：

```
expect(controller).to receive(:authorize!).with do |symbol, received_user|
  expect(symbol).to eq :create
  expect(received_user).to be_a User
  expect(received_user.account).to eq account
end 
```

# django - Django：LANGUAGE_CODE 设置的目的是什么？

> ID：12025803
> 
> 赞同：3
> 
> 时间：2012-08-19T10:25:20.643
> 
> 标签：django, internationalization, django-settings, django-1.4

我已经制作了一个带有 i18n 文本翻译的原型网站。但是无论我在 settings.py 中设置 LANGUAGE_CODE 设置什么，我都看不到对我的页面有任何影响。它似乎总是被语言环境查找器中间件覆盖。django 的文档没有给出太多解释。这个设置的真正目的是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T10:29:38.147

如果你做一个

```
grep -R LANGUAGE_CODE * 
```

通过 django 代码，您可以看到它在内部使用的位置。

快速浏览告诉我，如果不能使用其他方式，这是一个备用语言环境。如果可以，他们通常还会设置 LANGUAGE_CODE 以便代码的其他部分可以访问它。

# c# - IIS、Nginx 和 HttpListener 基准测试——困惑

> ID：12025808
> 
> 赞同：0
> 
> 时间：2012-08-19T10:26:55.480
> 
> 标签：c#, asp.net, iis, nginx, httplistener

我正在我的开发机器（i7 CPU、4GB RAM、Windows 7 64 位）上运行基准测试，以确定哪个 Web 服务器具有最佳性能来提供静态内容，同时考虑 IIS 和 Nginx，以及自定义控制台应用程序使用 HttpListener (.NET 4.5)。我正在使用 Apache Benchmark 查看每台服务器每秒处理的请求数 (-c 1000 -n 10000)

我不敢相信结果，Nginx 每秒处理 1000 个请求，IIS 每秒处理 700 个请求，使用 HttpListener 的自定义控制台应用程序每秒处理 4500 个请求。一定是出了点问题，谁能解释一下这种情况并解释为什么我会得到这些奇怪的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:29:48.093

首先，确保它们之间没有网络环境差异。

这取决于您的配置。对于 Nginx，例如：worker_connections、open_file_cache、sendfile、keepalive ......所有这些参数都会影响你的“ab -c 1000 ...”测试结果。

更重要的是，Nginx 不是为 Windows 操作系统设计的，但 C# 和 HttpListener 肯定是。

# jquery - 如何 console.log 这个 ajax 调用的结果？

> ID：12025813
> 
> 赞同：28
> 
> 时间：2012-08-19T10:27:22.157
> 
> 标签：jquery, ajax

我在 jQuery 代码中有以下函数：

```
btnLogin.on('click', function(e,errorMessage){
    console.log('my message' + errorMessage);
    e.preventDefault();

    return $.ajax({
        type: 'POST',
        url: 'loginCheck',
        data: $(formLogin).serialize(),
        dataType: 'json'  
    }).promise();
    console.log('my message' + errorMessage);
}); 
```

我正在尝试做的事情：我正在尝试 console.log 错误消息。如果 console.log 行在 ajax 函数之上，我会得到未定义，如果 console.log 在它下面，则什么都没有。

谁能告诉我如何获取这个或另一个新函数中显示的 errorMessage 的值？

此外，任何有关使用 Ajax 检查 php 登录表单的链接都将受到高度赞赏

问候，佐兰

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-19T10:32:23.747

为什么不处理调用中的错误？

IE

```
$.ajax({
    type: 'POST',
    url: 'loginCheck',
    data: $(formLogin).serialize(),
    dataType: 'json',
    error: function(req, err){ console.log('my message' + err); }
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-21T10:02:48.473

[您可以尝试这样的事情（从jQuery Ajax 示例中](http://api.jquery.com/jQuery.ajax/)复制）

```
var request = $.ajax({
  url: "script.php",
  type: "POST",
  data: {id : menuId},
  dataType: "html"
});

request.done(function(msg) {
  console.log( msg );
});

request.fail(function(jqXHR, textStatus) {
  console.log( "Request failed: " + textStatus );
}); 
```

您的原始代码的问题在于您传递给 on 函数的错误参数实际上并不是来自任何地方。JQuery on 不返回第二个参数，即使返回，它也与单击事件有关，而不是与 Ajax 调用有关。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-05-23T16:32:40.947

尝试这样的事情：

```
$.ajax({
    type: 'POST',
    url: 'loginCheck',
    data: $(formLogin).serialize(),
    dataType: 'json',
    success: function (textStatus, status) {
        console.log(textStatus);
        console.log(status);
    },
    error: function(xhr, textStatus, error) {
        console.log(xhr.responseText);
        console.log(xhr.statusText);
        console.log(textStatus);
        console.log(error);
    }
}); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-07-10T07:18:55.933

```
$.ajax({
    type: 'POST',
    url: 'loginCheck',
    data: $(formLogin).serialize(),    
    success: function(result){
        console.log('my message' + result);
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-19T12:49:11.730

如果调用本身失败，将触发 Ajax 调用错误处理程序。

如果登录凭据未通过，您可能正在尝试从服务器获取错误。在这种情况下，您需要检查服务器响应 json 对象并显示适当的消息。

```
e.preventDefault();
$.ajax(
{
    type: 'POST',
    url: requestURI,
    data: $(formLogin).serialize(),
    dataType: 'json',
    success: function(result){
        if(result.hasError == true)
        {
            if(result.error_code == 'AUTH_FAILURE')
            {
                //wrong password
                console.log('Recieved authentication error');
                $('#login_errors_auth').fadeIn();
            }
            else
            {
                //generic error here
                $('#login_errors_unknown').fadeIn();
            }
        }
    }
}); 
```

这里，“结果”是从服务器返回的 json 对象，其结构可能如下：

```
$return = array(
        'hasError' => !$validPassword,
        'error_code' => 'AUTH_FAILURE'
);
die(jsonEncode($return)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-10T08:34:10.203

如果您想检查您的网址。我想你正在使用 Chrome。您可以转到 chrome 控制台，URL 将显示在“XHR 完成加载：”下

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-03-16T04:20:01.057

在 Chrome 中，右键单击控制台并选中“保留登录导航”。

# xamarin.ios - MonoTouch 和 Mono for Android 中的实体框架支持

> ID：12025819
> 
> 赞同：5
> 
> 时间：2012-08-19T10:28:17.757
> 
> 标签：xamarin.ios, xamarin.android

既然即将推出的 Mono 版本包括 EF4，是否有计划将其包括在 MonoTouch 和 Mono for Android 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T18:02:17.650

对于 Android，我们包含它的机会非常高，因为 Android 可以运行整个 CLR。在 iOS 上情况更为复杂，因为iOS 内核施加了各种[限制，阻止某些形式的泛型代码运行。](http://docs.xamarin.com/ios/about/limitations)

此外，所有 EF 工作都在 Mono 2.11 之上运行，而这两种移动产品都基于更旧的代码库，因此任何升级都必须等到这两种产品都基于即将推出的 Mono 2.12 之上，而这不会发生直到十二月左右。

# ajax - 如何在快递中正确发送 ID 数组

> ID：12025820
> 
> 赞同：3
> 
> 时间：2012-08-19T10:28:20.970
> 
> 标签：ajax, node.js, post, express

我有如下的 id 数组：

```
var arr = [1, 23, 6]; 
```

我需要将此数组发送到服务器，对其进行解析，然后从 mongoose db 中删除 id。对于我的后端，我使用的是 nodejs express。所以我需要你的建议，我应该如何使用 jQuery 发送数组以及如何在服务器上解析它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T13:40:21.313

基本上是对@udidu 的好答案的评论，但我想要降价格式，所以我会发布它作为答案。以下是一些小的改进建议：

*   省略除 javascript 端 url "/deleteIds" 的路径之外的所有内容，因此无论它如何提供它都可以工作。

*   您可以将数组作为 JSON 字符串发送，而无需对象包装器

    ```
    $.ajax({
        url: '/deleteIds',
        type: 'DELETE',
        data: JSON.stringify([1, 2, 3]),
        contentType: "application/json",
        processData: false,
        success: function(data){
            console.log(data);
        }
    }); 
    ```

*   在服务器中，阵列将仅可用`req.body`

*   根据 REST 约定，这应该使用 HTTP`DELETE`方法（我已经更改了 jquery。您还需要将 express 代码更改为 do`app.del`而不是`app.post`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T10:51:26.887

好的，请按照以下说明进行操作，您就很好了：

首先，让我们创建我们的节点服务器，我使用 Express 模块来定义 HTTP 服务器：

```
var fs = require('fs'),
    express = require('express'),
    app = express();

app.listen(8080);

app.use(express.bodyParser());

app.get('/', function(req, res){
    var html = fs.readFileSync('index.html');
    res.header("Content-Type", "text/html");
    res.send(html);
});

app.post('/deleteIds', function(req, res){
    console.log(req.body.arr[0]);
    res.json({ success: true });
}); 
```

服务器“/”请求返回一个 HTML 页面，该页面将创建一个 jQuery Ajax 请求，以下是 HTML 文件内容：

```
<html>
<head>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script type="text/javascript">

        $.ajax({
            url: 'http://localhost:8080/deleteIds',
            type: 'POST',
            data: {
                arr: [ 1, 2, 3]
            },
            success: function(data){
                console.log(data);
            }
        });

    </script>

</head>
<body>
</body>
</html> 
```

如您所见，html 文件中的 Ajax 请求作为 POST 请求以数组作为数据发送，`/deleteIds`服务器中的快速路径 POST 函数监听该请求并使用数组获取数组`req.body.arr`，注意我正在使用`app.use(express.bodyParser());`，没有这个行我们将无法从 POST 请求中获取正文内容。

就是这样。我希望这有助于理解使用 express 的 Node + Ajax 请求，从这一点开始，您可以在`arr`数据上运行并做您想做的事情。

# storyboard - 将视图从 xib 更改为情节提要

> ID：12025822
> 
> 赞同：1
> 
> 时间：2012-08-19T10:28:36.947
> 
> 标签：storyboard, xib

我有一个 Storyboard 项目，我需要在启动时加载一个 xib 文件，以显示登录屏幕。它基于 UIWindow 和视图控制器，所以我不能让它在情节提要中工作。无论如何，在开始加载此 xib 以将视图推送到情节提要后，无论如何？

如果我有任何不同，故事板是基于 Tabbar 的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:33:45.143

我认为这可以解决您的问题：[如何以编程方式从课堂上加载情节提要？](https://stackoverflow.com/questions/9896406/how-can-i-load-storyboard-programmatically-from-class)

这绝对是可能的。

# ruby-on-rails - Capybara javascript 驱动程序不工作（环境：Rspec、Spork、Capybara、Webkit）

> ID：12025823
> 
> 赞同：2
> 
> 时间：2012-08-19T10:28:50.600
> 
> 标签：ruby-on-rails, testing, rspec, capybara, spork

这是我的第一个在线问题，所以请发表评论，我会尝试更新我的问题以澄清。

我对 Web 开发很陌生，目前正在为公司项目开发测试套件。当我尝试对涉及javascript的函数进行集成测试时，它工作得很好。我尝试同时使用 webkit（从 gi​​t 捆绑）和 selenium。Webkit 给出了以下错误消息。

```
Wrote response false "Unable to load URL: http://127.0.0.1:56618/ because of error loading http://127.0.0.1:56618/: Connection closed" 
Cleaning database...done
Received "Reset" 
Started "Reset" 
Finished "Reset" 
Wrote response true "" 
  should see invalid message (FAILED - 1)
Failures:
  1) Users GET /sign_in with invalid account should see invalid message
 Failure/Error: visit root_path
 Capybara::Webkit::InvalidResponseError:
   Unable to load URL: http://127.0.0.1:56618/ because of error loading http://127.0.0.1:56618/: Connection closed 
```

在使用 Selenium 时，FireFox 会抱怨：

```
Your Firefox profile cannot be loaded. It may be missing or inaccessible. 
```

有人知道可能是什么问题吗？提前致谢！

我的 sepc_helper.rb

```
Spork.prefork do
  ...
  ..
  .
  RSpec.configure do |config|
    config.use_transactional_fixtures = false
    config.before(:suite) { require "#{Rails.root}/db/seeds.rb" }
    config.before(:each) do
      if Capybara.current_driver == :rack_test
        DatabaseCleaner.strategy = :transaction                                                                               
      else
        DatabaseCleaner.strategy = :truncation
      end
      DatabaseCleaner.start
    end

    config.after(:each) do
      if Capybara.current_driver == :rack_test
        DatabaseCleaner.clean
      else
        DatabaseCleaner.clean
        load "#{Rails.root}/db/seeds.rb"
      end 
    end 

  end
end

Spork.each_run do
  ActiveRecord::Schema.verbose = false
  load "#{Rails.root.to_s}/db/schema.rb"
  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:03:34.430

我不确定，但你可以试试这个，

`spec_helper.rb`在您的文件中添加以下代码

```
require 'spork'
Spork.prefork do

   # This file is copied to spec/ when you run 'rails generate rspec:install'

  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)

  require 'rspec/rails'

  require 'rspec/autorun'

  require 'email_spec'

  # Add this to load Capybara integration:

  require 'capybara/rspec'
  require 'capybara/rails'

  # Database Cleaner
  #require 'database_cleaner'

  # DatabaseCleaner.strategy = :truncation

  # Requires supporting ruby files with custom matchers and macros, etc,
  # in spec/support/ and its subdirectories.

  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

Spork.each_run do
end 
```

做一件事取消注释数据库清理器。

# android - 如何将不同的夏洛克主题应用于不同的小部件

> ID：12025827
> 
> 赞同：0
> 
> 时间：2012-08-19T10:29:14.823
> 
> 标签：android, widget, styles, themes, actionbarsherlock

我正在使用 Theme.HoloEverywhereLight.DarkActionBar.Sherlock 作为我的应用程序的整体外观，但对我来说它太轻了（大部分是正确的）。对于我正在使用的 Spinner，我希望它使用不同的 sherlock 样式，以便背景、文本、菜单等都使用深色。

我对android很陌生，我不知道（我一直在寻找，但仍然不知道）如何实现这个

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:46:56.920

正如您已经说过的，只需将样式应用于小部件。

```
<TextView
style="@style/CodeFont"
android:text="@string/hello" /> 
```

有关更多信息，请查看[样式和主题](http://developer.android.com/guide/topics/ui/themes.html)。

如果您专门寻找 Sherlock 样式，请查看代码库，它是开源的。在那里你会找到所有使用的样式，你可以用它们制作你自己的样式。

# javascript - self href 后从一页调用函数到另一页

> ID：12025835
> 
> 赞同：0
> 
> 时间：2012-08-19T10:32:16.440
> 
> 标签：javascript

我想在点击page1的链接后，会显示page 2，page 2会运行其页面的功能：`function() {$('a.poin1').trigger("click");`

我搜索了许多相关主题并尝试编写如下代码，但没有成功。

如果有人可以提供帮助，我将不胜感激。非常感谢。

```
<a target="_self" href="page2.html" onclick="MyFunction();>
link to page 2
</a>

<script type="text/javascript">
function MyFunction(){
function() {$('a.poin1').trigger("click");
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:44:14.797

我想你现在正在学习 hmtl、javascript 和其他一些代码。仅复制/粘贴并希望一切都按您认为的那样工作是不够的。

当您从 page1 跳到 page2 时，一切都会丢失。没有人会为您记住任何功能。

相反，您可以做的是将参数传递给 page2。这样做页面将理解它需要运行在其中声明的一些函数。

也许您需要一个表单来将隐藏的值从 page1 传递到 page2。也许一个“get”参数就足够了。也许这里需要一些 php 代码或其他东西来做你想做的事情。

只需尝试、学习并打破您需要的所有键盘 :)

# c++ - 交通标志检测与识别

> ID：12025837
> 
> 赞同：6
> 
> 时间：2012-08-19T10:32:24.463
> 
> 标签：c++, opencv

交通标志检测和识别的最佳方法是什么？我回顾了最近文献中流行的流行交通标志检测方法，但不知道哪种方法最好！我想使用基于颜色和基于形状的检测方法。

我在 Visual Studio C++ 中使用 opencv 进行图像处理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T10:40:56.747

试试这个： [https ://sites.google.com/site/mcvibot2011sep/](https://sites.google.com/site/mcvibot2011sep/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-01T23:34:34.620

检查[dlib](http://dlib.net/)。文件[`example/train_object_detector.cpp`](http://dlib.net/train_object_detector.cpp.html)* 有一些关于如何实现的细节。它使用一种称为[**定向梯度直方图 (HOG)**](https://en.wikipedia.org/wiki/Histogram_of_oriented_gradients)的特征描述技术。

检查以下链接以获取起点：

*   [使用 dlib C++ 检测 Mapillary 图像中的路标](https://gist.github.com/iandees/f773749c47d088705199)
*   [Dlib 18.6 发布：制作你自己的物体检测器！](http://blog.dlib.net/2014/02/dlib-186-released-make-your-own-object.html)

* * *

* 注意：不要只使用示例来训练您的检测器！阅读这些文件作为指南/教程！这些示例程序假设您正在尝试检测面部并在此基础上进行一些改进（例如在训练中使用图像镜像，因为面部是对称的，这对于某些标志可能是灾难性的）。

* * *

**编辑：使用 dlib 检查我的交通标志检测器和分类器的实现：**

[https://github.com/fabioperez/transito-cv](https://github.com/fabioperez/transito-cv)

# algorithm - 是否有一种有效的算法来检测复杂数据结构中的依赖循环？

> ID：12025839
> 
> 赞同：1
> 
> 时间：2012-08-19T10:32:37.073
> 
> 标签：algorithm, language-agnostic, dependencies, cycle

我有一个小而复杂的数据库（几百万条记录分成非常少的数千张表）。这些记录可以被认为是业务规则。用户可以根据现有规则（包括其他用户定义的规则）定义自己的规则。这些规则依赖于其他规则，有时通过复杂的路径。依赖关系形成一个扩展的网络，而不是一个层次结构。

我正在寻找一种算法来确定，在新定义的规则（或规则集）中，新规则本身是否是循环的，或者它是否与现有规则一起创建循环。

我需要一种在以下情况下有效的算法：

1.  算法的结果只需要是一个布尔值 - 如果有一个循环，则为 true，否则为 false。
2.  可以假设现有数据库是无循环的。
3.  一旦发现循环，处理就可以停止。通常的情况（95% ??）是没有循环。不幸的是，这正是（我认为）处理必须完成提议的新规则的所有可能路径的情况，以确定没有循环。
4.  该算法用于验证新的用户定义规则，因为它们被输入到数据库中。对于通常的情况，它需要尽可能快——我不希望这种验证成为创建过程中的瓶颈。
5.  获取数据的成本相对较高——通常涉及一个或多个查询，其中一些非常复杂。新定义的规则集可以被约束以便在内存中完全可用。如果可以对新规则的输入施加任何其他限制，这将有助于提高检查的效率，我不知道它们可能是什么。

**编辑**

我接受了尼克的回答，但做了一处修改。存储依赖项是对数据库的一个非常简单的修改。我将只存储直接​​依赖项而不是所有依赖项，无论是直接的还是间接的。我可以将两组依赖项 C、D、F、G 和 X、Y、Z（在尼克的回答中）视为树结构，并使用各种技术中的一种从单级依赖表派生层次结构。我认为在这种情况下，这样做的成本是可以接受的。

**编辑**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:54:13.677

我希望我正确理解了您的问题：

假设您将规则 A 添加到数据库中，然后您还添加了依赖信息，例如`A depends on C,D,F,G`和`X,Y,Z depend on A`。

我认为如果不真正查看整个结构，就无法在插入时检测循环，你说这是不允许的。

所以我的想法是预先计算和存储所有内容，即对于每个规则 R 存储它依赖的所有其他规则（不仅直接，而且间接）。现在，当您插入规则 A 时，只需从其中获取所有依赖`C, D, F, G`项并查看它们是否包含任何一个，`X,Y,Z or A`如果它们不存在则没有循环，您可以安全地将 A 添加到您的规则集中并将所有依赖项从`C, D, F, G`加上`C, D, F, G`它们自己存储为 A 的依赖项。

这当然需要对数据库进行一些重组（和重建）。

# postgresql - 如何在 JPA 中使用 WHERE 子句注释唯一约束

> ID：12025844
> 
> 赞同：8
> 
> 时间：2012-08-19T10:33:10.787
> 
> 标签：postgresql, jpa, unique-constraint

我需要在 PostgreSQL 中使用这些独特的约束

```
CREATE UNIQUE INDEX favorites_3col_uni_idx
ON favorites (user_id, menu_id, recipe_id)
WHERE menu_id IS NOT NULL;

CREATE UNIQUE INDEX favorites_2col_uni_idx
ON favorites (user_id, recipe_id)
WHERE menu_id IS NULL; 
```

我在 JPA 中注释的第一个：

```
@Table(uniqueConstraints= {
@UniqueConstraint(name="favorites_3col_uni_idx", columnNames = {"user_id", "menu_id", "recipe_id"})
}) 
```

但是，¿可以在 JPA 中注释第二个唯一索引吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T14:46:36.367

您似乎想要使用 JPA 约束定义创建[部分索引](http://www.postgresql.org/docs/current/static/indexes-partial.html)( )。`CREATE INDEX ... ON ... WHERE`

这些是相当特定于 PostgreSQL 的，并且没有由 JPA 指定。您将需要使用本机语法来创建它们。我不相信 JPA 为索引定义提供任何功能。

您不能为此目的使用唯一约束，因为唯一部分索引不是唯一约束。不能`CONSTRAINT constraint_name UNIQUE(columns)`在 PostgreSQL 中创建部分唯一索引。PostgreSQL 为唯一约束创建唯一索引只是一个实现细节。

看：

*   [使用 JPA 指定索引（非唯一键）](https://stackoverflow.com/questions/3405229/specifying-an-index-non-unique-key-using-jpa)
*   [JPA：定义索引列](https://stackoverflow.com/questions/6453231/jpa-defining-an-index-column)

Some JPA providers offer extension annotations specific to that JPA provider that add features for running native DDL scripts, defining indexes with annoations, etc. Since you haven't mentioned which JPA provider you are using I can't tell you more. Here's the [documentation for EclipseLink index DDL](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Indexes); this *will* *not* *work* if you are using Hibernate, OpenJPA, or something other than EclipseLink.

A JPA standard workaround is to check for the presence of those indexes during startup by querying `pg_catalog.pg_index`. If you don't find them, use an EntityManager native query to send the appropriate native SQL `CREATE UNIQUE INDEX` commands. A `@Startup @Singleton` bean is useful for this sort of task if you're using EJB3.1\. See the PostgreSQL documentation for the structure of `pg_catalog.pg_index`. To just check if an index of a given name exists, run:

```
SELECT EXISTS(
    SELECT 1 
    FROM pg_index 
    WHERE indexrelid = 'public.indexname'::regclass
); 
```

Note that the above query does nothing to verify it's the index you expect, but you can do that with some additional checks. Just examine the contents of `pg_index` after creating the index so you know what to test for. I don't recommend trying to check for any particular value of `indpred`; just make sure it isn't null.

# java - 更新：Android：java.lang.RuntimeException：无法启动活动 ComponentInfo

> ID：12025845
> 
> 赞同：3
> 
> 时间：2012-08-19T10:33:31.113
> 
> 标签：java, android, eclipse, logcat, android-logcat

更新**所以我做了下面所说的几乎所有事情，但仍然出现此错误（请参阅新的 logcat 文件）。虽然它不同，所以我不知道如何解决它。**好吧，我是初学者，所以我真的不知道发生了什么。当我尝试在模拟器中运行这个应用程序时，它只是“不幸的是这个应用程序已经停止了”。我搜索了所有与此类似的问题，但未能找到答案。顺便说一句，这不是一个完成的应用程序，甚至还没有真正开始，但我想让它在我继续之前运行。继承人日志猫文件的事情。

```
 error opening trace file: No such file or directory (2)
08-19 06:09:04.579: D/AndroidRuntime(1006): Shutting down VM
08-19 06:09:04.599: W/dalvikvm(1006): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
 FATAL EXCEPTION: main
 android.content.res.Resources$NotFoundException: Resource ID #0x7f080001 type #0x12 is not valid
    at android.content.res.Resources.loadXmlResourceParser(Resources.java:2103)
    at android.content.res.Resources.getLayout(Resources.java:852)
    at android.view.MenuInflater.inflate(MenuInflater.java:107)
    at com.nickymilton.testbasebal3.MainActivity.onCreateOptionsMenu(MainActivity.java:22)
    at android.app.Activity.onCreatePanelMenu(Activity.java:2476)
    at com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:393)
    at com.android.internal.policy.impl.PhoneWindow.invalidatePanelMenu(PhoneWindow.java:747)
    at com.android.internal.policy.impl.PhoneWindow$1.run(PhoneWindow.java:2913)
    at android.os.Handler.handleCallback(Handler.java:615)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4745)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    at dalvik.system.NativeStart.main(Native Method) 
```

现在是 activty_main.xml

```
 <?xml version="1.0" encoding="utf-8"?>

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="50dp"
        android:layout_marginRight="50dp"
        android:orientation="vertical" >

         <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="30dp"
            android:text="@string/EnterHome"
            android:textColor="@color/White" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="30dp"
            android:ems="10" 
            android:hint="@string/home_team"
            android:layout_below="@id/textView1"
            android:shadowColor="@color/ICSBlue" >

            <requestFocus />
        </EditText>

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/editText1"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="30dp"
            android:text="@string/EnterAway"
            android:textColor="@color/White" />

        <EditText
            android:id="@+id/editText2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/textView2"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="30dp"
            android:ems="10"
            android:hint="@string/away_team"
            android:shadowColor="@color/ICSBlue" />

        <Button
            android:id="@+id/button3"
            android:layout_width="115dp"
            android:layout_height="wrap_content"
            android:layout_below="@id/editText2"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="40dp"
            android:text="@string/Enter" />

        <Button
            android:id="@+id/button2"
            android:layout_width="250dp"
            android:layout_height="wrap_content"
            android:layout_below="@id/button3"
            android:layout_centerHorizontal="true"
  android:layout_marginTop="40dp"
                android:text="@string/Skip" />

    </RelativeLayout> 
```

现在activity_display_message.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world"
        tools:context=".DisplayMessageActivity" />

</RelativeLayout> 
```

然后这里是mainActivity.java文件

```
package com.nickymilton.testbasebal3;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity {

    public final static String EXTRA_MESSAGE = "com.nickymilton.Testbasebal3.MESSAGE";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void sendMessage(View view) {
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.editText1);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }
} 
```

然后是第二个活动 DisplayMessageActivity.java

```
package com.nickymilton.testbasebal3;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

public class DisplayMessageActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Get the message from the intent
        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        // Create the text view
        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);

        // Set the text view as the activity layout
        setContentView(textView);
    }

    } 
```

最后是 mainfest 文件

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.nickymilton.testbasebal3"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".DisplayMessageActivity"
            android:label="@string/title_activity_display_message" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.nickymilton.testbasebal3.MainActivity" />
        </activity>
    </application>

</manifest> 
```

就这样。有人请帮忙谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T10:47:44.323

您的 XML 存在问题 - 您可以从以下行看出：

```
Binary XML file line #54: Error inflating class <unknown> 
```

我发现的一件事是，当您声明一个 android:id 属性时，它需要在其中包含一个 +，如下所示：

```
android:id="@+id/location" 
```

这是因为您正在*创建*一个 id，而不仅仅是指在别处定义的预先存在的一个（就像您可能使用字符串一样，例如“@string/hello”可能在 values 文件夹中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T10:47:29.753

我注意到一件事，您没有在某些 xml 中正确声明“id”值。

```
android:id="@id/button3" 
```

应该

```
android:id="@+id/button3" 
```

对于您的其他 id 声明同样明智。

您会注意到，在您的堆栈跟踪中，它会在您的 xml 中为您提供错误位置的行号。

```
java.lang.RuntimeException: Unable to start activity
ComponentInfo{com.nickymilton.testbasebal3/com.nickymilton.testbasebal3.MainActivity}:
android.view.InflateException: Binary XML file line #54: Error inflating class <unknown> 
```

这可能是另外一回事。但本质上你的 xml 格式不正确。

**错误二**

您需要向后查看堆栈跟踪以找到错误的根源，然后您很可能会自己找到解决方案。

```
 android.content.res.Resources$NotFoundException: Resource ID #0x7f080001 type #0x12 is not valid
    at android.content.res.Resources.loadXmlResourceParser(Resources.java:2103)
    at android.content.res.Resources.getLayout(Resources.java:852)
    at android.view.MenuInflater.inflate(MenuInflater.java:107)
    at com.nickymilton.testbasebal3.MainActivity.onCreateOptionsMenu(MainActivity.java:22)
    at android.app.Activity.onCreatePanelMenu(Activity.java:2476) 
```

从上到下，您将到达*MainActivity.oncreateOptionsMenu()*行 ，您会看到它试图膨胀（您的选项菜单 xml），即*loadXmlResourceParser()*

它并没有给你一个 xml 行号，但它确实告诉你有一个资源 ID 无效的问题。

如果您想要答案，您需要在您的问题中发布您的选项 xml。但我会看看你是否可以先解决自己的问题。尝试注释掉元素并将它们放回原处以查看损坏的内容。我这么说是因为只有这么多一个堆栈溢出问题应该回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T10:50:33.637

在您的一个人的声明中`TextViews`：

```
android:textSize="@string/TextSizefifteen" 
```

`textSize`应该是一个数字或一个维度，例如：

```
android:textSize="@dimen/TextSizefifteen" 
```

查看您拥有什么`TextSizefifteen`以及如何声明它（请参阅[http://developer.android.com/guide/topics/resources/more-resources.html#Dimension](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)）。

例如：

```
<dimen name="TextSizefifteen">25dp</dimen> 
```

# ios - Beta 测试和应用内购买

> ID：12025847
> 
> 赞同：3
> 
> 时间：2012-08-19T10:34:04.097
> 
> 标签：ios, in-app-purchase, beta-testing

我们正在使用 TestFlight 进行 beta 测试，并且我们的应用程序中有一个 IAP 商店。

Beta 测试人员能否从沙盒环境中购买软件包？

我们如何测试这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T10:41:28.487

如果 Beta 测试人员在他们的设备上安装了适当的开发配置文件，那么可以。

对于应用程序的开发版本，该应用程序将在 IAPS、Game Center 的沙盒环境中运行，并且 beta 测试人员将能够通过以与 iTunes Connect 帐户关联的测试用户身份登录来购买应用程序内购买（您需要首先在 iTunes Connect 中的“用户 - 测试用户”选项卡下创建）。

# c++ - 在同一个迭代器中修改向量

> ID：12025848
> 
> 赞同：0
> 
> 时间：2012-08-19T10:34:38.913
> 
> 标签：c++, oop, iterator, std-pair, push-back

假设我有以下向量：

```
std::vector<std::pair <int, bool> > myV;
std::vector<std::pair <int, bool> >::iterator it; 
```

然后我将它们初始化为 10 行：

```
 for (i = 0 ; i < 10; i++){
           if (i % 2 == 0 )
                j = true;
            else 
                j = false
           myV.push_back(std::make_pair(i,j));
  } //end of for 
```

现在，我需要在节点 5 或每个节点处修改我的向量，一种方法是：我从中获取备份，然后，`erase`然后`push_back`，但由于特定原因，我需要保持我的顺序`vector`，你有没有主意？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T10:41:01.533

向量提供随机访问；您可以简单地重新分配元素：

```
myV[5] = std::make_pair(42, true);
*it = std::make_pair(35, false); 
```

# javascript - 循环遍历数组中的键：值对以匹配 javascript 中的用户代理字符串

> ID：12025849
> 
> 赞同：0
> 
> 时间：2012-08-19T10:35:08.143
> 
> 标签：javascript, regex, arrays, loops, key-value

我有一个键值对数组，其中包含在用户代理字符串中找到的关键字。我需要遍历这些对并将每个值匹配到 navigator.userAgent 字符串。我知道浏览器嗅探是不受欢迎的，但这不取决于我。我可以使用 for 循环代替 Ext.each（我不太熟悉）。这是我第一次解决这个问题的 jsfiddle [http://jsfiddle.net/tagZN/83/](http://jsfiddle.net/tagZN/83/)但我被告知要以其他方式代替。

```
<script type="text/javascript"> 

var deviceProfiles = 
[ 
    '{match:Macintosh, name:Mac Desktop}',
    '{match:Windows NT, name:Windows Desktop}',
    '{match:Ubuntu, name:Ubuntu,layout:desktop}',
    '{match:Silk, name:Kindle Fire,layout:tablet}'

];     

var ua = navigator.userAgent;
var re = new RegExp(deviceProfiles.join("|"), "i");    
var identifyDevice = function( ua )
{
    Ext.each(
        deviceProfiles,
        function( profile )
        {
            return ua.match( profile.match ) == nil;
        }

    );
}    

</script> 
```

我最初也被赋予 deviceProfile 为（并被告知填写匹配和名称的值）：

```
var deviceProfiles =
[
    { 
        match: 'user agent regular expression here', 
        name: 'name of device here',        
    },

    { 
        match: 'user agent regular expression here', 
        name: 'name of device here'             
    },

    { 
        match: 'user agent regular expression here', 
        name: 'name of device here',            
    }
];​ 
```

但它没有用，所以我把它改成了你在上面看到的。这是一个糟糕的电话。我试图破译我得到了什么。我也创造了

```
var re = new RegExp(deviceProfiles.join("|"), "i"); 
```

即使它还没有被使用，我相信它是必要的。我已经通过将 ua 设置为等于我复制并粘贴到关键字包含在数组 deviceProfiles 中的实际用户代理字符串来对此进行了测试，但仍然没有运气。

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:03:17.697

你说得对，浏览器嗅探是一种有缺陷的策略，除了休闲娱乐之外。

您的代码存在许多问题，尤其是*deviceProfiles*是字符串数组，而不是对象。此外，代码试图检测用户代理，然后对平台进行猜测。它实际上与设备无关，例如在非 Windows 笔记本电脑上的虚拟机中运行 IE 返回“Windows 桌面”，这是完全错误的。应该如何处理不匹配的用户代理字符串？

手机、笔记本电脑、游戏机和电视等设备上有数以千计的浏览器。每天都有更多的设备访问互联网和网页，你能嗅出**它们**吗？

无论如何，这里是如何做你想做的事情：

```
function getDevice() {
  var deviceProfiles = [ 
      {match: 'Macintosh', name: 'Mac Desktop'},
      {match: 'Windows NT', name: 'Windows Desktop'},
      {match: 'Ubuntu', name: 'Ubuntu', layout:'desktop'},
      {match: 'Silk', name: 'Kindle Fire', layout:'tablet'}
  ];     

  var ua = navigator.userAgent;
  var profile, re;

  for (var i=0, iLen=deviceProfiles.length; i<iLen; i++) {
    profile = deviceProfiles[i];

    if (ua.match(profile.match)) {
      return profile.name;
    }
  }
}

alert(getDevice()); 
```

# javascript - jQuery动画函数可能的语法错误

> ID：12025852
> 
> 赞同：1
> 
> 时间：2012-08-19T10:35:21.800
> 
> 标签：javascript, jquery, jquery-animate

javascript/jquery 的新手。

我收到以下错误...

“未捕获的引用错误：$ 未定义”

它似乎在以下脚本的第一行...

```
$('#button').toggle(
    function(){
        $('#menu-bar').animate({marginLeft: -200 }, 'slow', function(){
            $('#button').html('Close');
        });
    },
    function(){
        $('#menu-bar').animate({marginLeft: 200 }, 'slow', function(){
            $('#button').html('Menu');
        });
    }
); 
```

CSS：

```
#button {
    position: relative;
    top: 0px;
    left: 200px;
    z-index: 100000;
    width: 50px;
    height: 50px;
    cursor: pointer;
}
#menu-bar {
    height: 100%;
    width: 200px;
    background-color: #2D2D2D;
    position: absolute;
    top: 0px;
    margin-left: -200px;
    padding-top: 12px;
    z-index: 100;
} 
```

和html：

```
<div id="menu-bar">
        <div id="button">Menu</div>
        <ul>
            <li>
            </li>
        </ul>   
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:39:09.343

您可能希望显示如何导入 jquery 库的代码。正如我认为它所说的是'$'未定义，建议的jquery尚未加载。

这显示了如何初始化 jquery[我应该如何初始化 jQuery？](https://stackoverflow.com/questions/2215904/how-should-i-initialize-jquery)

# mysql - 为什么 count(id) 会产生 3 维数组？

> ID：12025853
> 
> 赞同：0
> 
> 时间：2012-08-19T10:35:27.927
> 
> 标签：mysql, cakephp

我在 cakephp 中使用这种直接查询方法来获得计数（违反 MVC 的规范）。

```
$count = $this->History->query("SELECT count(id) AS x FROM ratings WHERE id='3' AND employee='28'"); 
```

但事实证明，我需要使用`$count[0][0]['x']`来获取价值。

为什么它不可用`$count['x']`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:43:02.880

在您的情况下，它将以一般方式返回它：0 = 遍历所有模型，再次返回 0，因为您没有特定的模型名称）。你的结果将永远在`$count[0][0]['fieldname']`那时。如果可能，强烈建议始终使用包装器方法。

您为什么不使用文档中的 cakephp 数据库包装方法？

```
$count = $this->History->find('count', array('conditions'=>array('id'=>3, 'employee'=>28)); 
```

?

这将导致预期的输出`x`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:51:07.227

很简单，因为函数

```
$this->History->query(....); 
```

不返回一维数组。我会建议你创建一个`helper function`，它提取一维数组并返回它。

```
function single_query($query) {
    $result = $this->History->query($query);
    return $result[0][0];
} 
```

然后使用它

```
$count = $this->single_query("SELECT count(id) AS x FROM ratings WHERE id='3' AND employee='28'"); 
```

# html - 在电子邮件中设置 tr 或 td 样式？

> ID：12025857
> 
> 赞同：3
> 
> 时间：2012-08-19T10:37:22.373
> 
> 标签：html, css, email, styles, html-email

我想更改整行单元格的背景颜色和字体大小。（使用**inline-styles**，因为我不能使用样式表或`<style>`标签）

我应该添加这些样式的哪个元素？我应该将它们添加到每一`<td>`行还是一次用于`<tr>`标记？哪种方式更好？

```
<tr>
    <td style="background-color:red;font-size:12px">blah blah</td>
    <td style="background-color:red;font-size:12px">blah blah</td>
</tr> 
```

或者

```
<tr style="background-color:red;font-size:12px">
    <td>blah blah</td>
    <td>blah blah</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:08:27.180

当我设计 HTML 电子邮件时，我将它添加到 tr 和 td 中。只是为了安全。此外，作为某些电子邮件客户端的后备方案，除了 css 之外，还可以添加 bgcolor=""。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T17:09:38.063

您的第一个选择是答案：

```
<tr>
    <td style="background-color:red;font-size:12px">blah blah</td>
    <td style="background-color:red;font-size:12px">blah blah</td>
</tr> 
```

第二种选择永远不会在 Outlook 中起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T14:06:56.707

我通常将它们应用于细胞，只是为了确保。不过，您可以考虑使用某种服务器端语言，这将防止您不得不一遍又一遍地键入它，并且当您想要更改某些内容时也不会那么痛苦。像这样的东西：

```
<?php
  $tdStyle = 'style="background-color:red;font-size:12px"';
?>

<tr>
 <td <?php echo $tdStyle;?> >blah blah </td>
 <td <?php echo $tdStyle;?> >blah blah </td>
</tr> 
```

或者和 smarty 一起工作，这更适合这个。这就是我使用的......它看起来像这样：

```
{$tdStyle = 'style="background-color:red;font-size:12px"'}
<tr>
 <td {$tdStyle}>blah blah </td>
 <td {$tdStyle}>blah blah </td>
</tr> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T13:31:25.997

将属性设置为 on`td`更安全，因为如果您将它们设置为 on `tr`，那么属性的*任何*样式表设置（可能超出您的控制）`td`都将覆盖您的设置。

但是如果您希望控制这种情况并且知道没有其他样式表设置可以干扰，您可以将属性设置为 on `tr`，使用`style`属性时会更短。这样，单元格将继承字体属性并且它们将具有透明背景（默认），因此`tr`背景会发光。

但是，并非所有属性都是继承的。例如，边框属性不是，因此要在单元格上绘制边框，您需要在元素上设置它们`td`（除非您对元素上的 HTML 属性所提供的非常有限的可能性感到满意`table`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T11:02:22.850

你想把它应用到行，那为什么还要问你是否应该把它应用到TD呢？

如果您想要行上的样式将其应用于 TR。如果您想要单元格上的样式将其应用于 TD。直线样式是邪恶的！尽量避免它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-19T10:44:43.887

如果您将样式添加到 TR 标签，则它将适用于该表的整行，如果您将其添加到 TD，则它将仅适用于该 TD

我认为为了避免相同的风格一次又一次地写，你可以写整个 tr

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-22T20:12:55.637

将样式添加到 td 或 tr 应该没问题。内联样式和表格是 html 电子邮件的正确方式，否则您将面临与不同浏览器、移动/电子邮件客户端的 css 兼容性问题。

# asp.net - 如何在asp.net中更新数据集中的特定表

> ID：12025863
> 
> 赞同：0
> 
> 时间：2012-08-19T10:37:45.403
> 
> 标签：asp.net, datatable, dataset, viewstate

我有一个数据集，其中包含三个表 dt1、dt2 和 dt3（按顺序），现在我正在维护每个表的视图状态，以在回发中保留表（即我在视图状态中有最新的 DataTable），现在是问题我是否想将 dt3 的 ViewState 应用于 DataSet 中的相应表，即 dt3，我正在执行以下操作：

```
dataSet.Tables[(it will be dynamically fetched, say for here its) 0] = ViewState["DataTable" + (it will be dynamically fetched, say for here its) 0] 
```

但在这里我收到错误说 dataSet.Tables[] 是只读的。任何人都可以帮助我该怎么做。让我知道是否有人需要有关我的问题的更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T10:44:18.847

你应该使用

```
DataSet ds = new DataSet();
ds.Tables.Add(YourDataTable); 
```

或者

```
ds.Tables.AddRange(YourDataTableArray); 
```

要从中更新现有表，`ds`您`ViewState`可以尝试两种方法。

1.  `DataSet`通过 using方法从表中删除`DataSet.Tables.Remove("Table");`，请注意，您不应依赖`index`从 DataSet 中获取表的方法，而应为表提供一个唯一名称，以便您可以在需要时获取和删除它们。
2.  您可以使用循环方法从您的行中获取行`ViewState DataTable`，然后将它们一一插入到 DataSet 的表中，就像这样。

* * *

```
ds.Tables[0].Rows.Clear();
DataTable dtFromViewState = ViewState["dt"] as DataTable;
foreach (DataRow row in dtFromViewState.Rows)
  ds.Tables[0].Rows.Add(row.ItemArray); 
```

# c - Mmap 没有使用给定的地址

> ID：12025867
> 
> 赞同：1
> 
> 时间：2012-08-19T10:38:36.947
> 
> 标签：c, mmap, memory-mapping

虽然请求的映射地址是页起始地址，但它会使用移位了几页的地址。

我正在尝试做这样的事情：

```
char *mapped = mmap(base, page_size, PROT_NONE, MAP_SHARED,
                    file_handle, 0);
printf("Base  : %p\n", base);
printf("Mapped: %p\n", mapped); 
```

样本输出（`page_size`= `4096`= `0x1000`）：

```
Base  : 0x7f22a1047000
Mapped: 0x7f22a1045000 
```

偏移量为 2 页。这似乎也随`length`. 例如，如果我尝试映射 4 页而不是一页，则输出变为：

```
Base  : 0x7fd24d994000
Mapped: 0x7fd24d98f000 
```

这是 5 页偏移量。

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T10:47:03.730

因为操作系统是，当你没有特别要求在固定地址映射时，可以自由选择自己方便的地址；从 mmap(2) 手册页：

```
MAP_FIXED
          Don't interpret addr as a hint: place the mapping at exactly that
          address.  addr must be a multiple of the page size.  If the memory
          region specified by addr and len overlaps pages of any existing
          mapping(s), then the overlapped part of the existing mapping(s) will be
          discarded.  If the specified address cannot be used, mmap() will fail.
          Because requiring a fixed address for a mapping is less portable, the
          use of this option is discouraged. 
```

如果您不需要那个确切的地址，最好让系统选择它（老实说，在大多数情况下应该是这样）。

# java - ccnx android java：未找到

> ID：12025873
> 
> 赞同：0
> 
> 时间：2012-08-19T10:39:56.640
> 
> 标签：java, android

我正在尝试在 Android 上制作 ccnx 项目。我已经在 Linux 上成功构建了 ccnx，但是在作为 Android 的 README 时遇到了错误。

错误是这样说的：

```
make -C CCNx-Android-Lib -j 1
make[1]: Entering directory `/home/android/ccnx-0.6.0/android/CCNx-Android-Lib'
/home/android/android-sdk/android-sdk-linux/tools/android update lib-project -p . -t android-7

/home/android/android-sdk/android-sdk-linux/tools/android: 84: java: not found
/home/android/android-sdk/android-sdk-linux/tools/android: 101: java: not found
exec: 114: java: not found
make[1]: \*** [project.properties] Error 2
make[1]: Leaving directory `/home/android/ccnx-0.6.0/android/CCNx-Android-Lib'
make: \*** [CCNx-Android-Lib] Error 2 
```

我已经检查过`JAVA_HOME PATH JRE_HOME CLASSPATH`，但没有办法解决这个问题。

```
Java -version 1.6.0_27

Java enviroment
\#set JDK environment
export JAVA_HOME=/usr/local/jdk1.6.0_27
export PATH=$PATH:/home/android/jdk1.6.0_27/bin:$JAVA_HOME/bin
export CLASSPATH=.:$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:$CLASSPATH
export JRE_HOME=$JAVA_HOME/jre 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:17:52.317

我坚信这些警告报告了您的问题：

> /home/android/android-sdk/android-sdk-linux/tools/android: 84: java: 未找到 /home/android/android-sdk/android-sdk-linux/tools/android: 101: java: 未找到执行：114：java：未找到

检查文件是否存在以及文件权限是否设置正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:35:05.363

这实际上是`dalvik machine`问题所在。你会`restart`和`emulator`尝试`eclipse`。希望它有效。检查所有 dalvik 文件。

我还没有在模拟器中尝试过。

在我使用的时候我发现了`rooted device`这个，所以我. 它工作正常。`restart``device`

# php - 连接两个表问题

> ID：12025875
> 
> 赞同：0
> 
> 时间：2012-08-19T10:40:20.457
> 
> 标签：php, sql, phpmyadmin

我有两个表：

表 1：注释
![在此处输入图像描述](../Images/34bc0174fafbc5d948f37244fe77808c.png)

表 2：联系人
![在此处输入图像描述](../Images/41fd80c8810290af0f07a6420f51507e.png)

我的基本目标是执行以下查询：
**list * from contacts where（搜索文本存在于联系人中）或（搜索文本存在于该联系人的注释中）**

我编写了以下代码来执行此操作：

```
<?php
require_once('config.php');

$nwhere = "WHERE note_text LIKE '%".addslashes($_GET['s'])."%' ";
$cwhere = "contact_text LIKE '%".addslashes($_GET['s'])."%' ";
$result = mysql_query("SELECT * FROM contacts INNER JOIN notes ON contact_id = note_contact $nwhere OR $cwhere ORDER BY contact_id");

while($row = mysql_fetch_array($result))
{
echo $row['contact_id'];
echo '<br/>';
}
?> 
```

当 Search Text 为`azeem`时，上面的代码只打印`4001`，但是输出应该是：
4000
4001

我也不想`contact_id`在输出中重复。
请建议。

**Fluffeh** 更正后的代码：

```
$where_clause = " where contacts.contact_text like '%".addslashes($_GET['s'])."%' or    notes.note_text like '%".addslashes($_GET['s'])."%'";
$result = mysql_query("select notes.note_id, notes.note_contact, contacts.contact_id,  contacts.contact_text, notes.note_text from contacts left outer join notes on contacts.contact_id=notes.note_contact $where_clause");
while($row = mysql_fetch_array($result))
{
echo $row['contact_id'];
echo '<br/>';
}
?> 
```

此代码从表中提取正确的行，但有一个小问题是它重复输出 (contact_id)。例如，当我给出搜索参数时，它显示以下输出`nawaz`：
4001
4001
4001
4001
4001
4002
4003

感谢您的帮助，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T10:42:56.123

如果您不想重复列，则不能使用`SELECT * FROM`，而是需要使用要选择的列名。

您没有得到预期的 4000 结果，因为您正在对另一个表中不存在的字段进行内部联接。（Azeem = 4000，但用户 4000 不存在 note_contact）。

您应该考虑改用外部联接。也许是这样的：

```
select
    a.note_id,
    a.note_contact,
    b.contact_text,
    b.note_text
from
    contacts a
        left outer join notes b
            on a.contact_id=b.note_contact
where
    a.contact_text like '%azeem%'
    or b.note_text like '%azeem%' 
```

编辑：似乎我们都还在工作 - 我给了一个[sqlFiddle](http://sqlfiddle.com/#!2/9e3663/1)，它具有示例的基本模式和工作外连接。

我的创建架构是：

```
mysql> CREATE TABLE `contacts` (
    ->   `contact_id` int(4) DEFAULT NULL,
    ->   `contact_text` varchar(40) DEFAULT NULL,
    ->   `contact_email` varchar(40) DEFAULT NULL
    -> ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
Query OK, 0 rows affected (0.00 sec)

mysql> 
mysql> CREATE TABLE `notes` (
    ->   `note_id` int(3) NOT NULL AUTO_INCREMENT,
    ->   `note_contact` int(4) DEFAULT NULL,
    ->   `note_text` tinytext,
    ->   PRIMARY KEY (`note_id`)
    -> ) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=7 ;
Query OK, 0 rows affected (0.00 sec)

mysql> 
mysql> INSERT INTO `contacts` (`contact_id`, `contact_text`, `contact_email`) VALUES
    -> (4000, 'azeem', 'azeem@big.com'),
    -> (4001, 'nawaz', 'azeem@big.com'),
    -> (4002, 'nawaz', 'azeem@big.com');
Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> 
mysql> INSERT INTO `notes` (`note_id`, `note_contact`, `note_text`) VALUES
    -> (1, 4001, 'I am text1'),
    -> (2, 4001, 'I am text2'),
    -> (3, 4001, 'my name is azeem'),
    -> (4, 4001, 'come here'),
    -> (5, 4001, 'I don''t want to'),
    -> (6, 4003, 'My text is clear.');
Query OK, 6 rows affected (0.01 sec)
Records: 6  Duplicates: 0  Warnings: 0 
```

外连接查询：

```
mysql> select
    -> b.note_id,
    -> b.note_contact,
    -> a.contact_text,
    -> b.note_text
    -> from
    -> contacts a
    -> left outer join notes b
    -> on a.contact_id=b.note_contact
    -> where
    -> a.contact_text like '%azeem%'
    -> or b.note_text like '%azeem%';
+---------+--------------+--------------+------------------+
| note_id | note_contact | contact_text | note_text        |
+---------+--------------+--------------+------------------+
|    NULL |         NULL | azeem        | NULL             |
|       3 |         4001 | nawaz        | my name is azeem |
+---------+--------------+--------------+------------------+
2 rows in set (0.00 sec) 
```

来自 Nida 的代码：

```
$where_clause = " where contacts.contact_text like '%".addslashes($_GET['s'])."%' or notes.note_text like '%".addslashes($_GET['s'])."%'";
$result = mysql_query("select distinct contacts.contact_id from contacts left outer join notes on contacts.contact_id=notes.note_contact $where_clause") 
```

# javascript - 我可以用 JavaScript 中的 switch 或 case 语句重构 if - else 吗？

> ID：12025876
> 
> 赞同：1
> 
> 时间：2012-08-19T10:40:24.920
> 
> 标签：javascript, jquery

我有以下代码：

```
var btns1 = {
    'Submit': function (win) {
        submitHandler(oLink.$link, $('#main-form'), false);
    },
    'Submit & Close': function (win) {
        submitHandler(oLink.$link, $('#main-form'), true);
    },
    'Close': function (win) {
        modal.closeModal()
    }
}
var btns2 = {
    'Submit & Close': function (win) {
        submitHandler(oLink.$link, $('#main-form'), true);
    },
    'Close': function (win) {
        modal.closeModal()
    }
}

if (oLink.title.substr(0, 4) == "Crea") {
    if (content.match(/data-RowKey="(.{3}).*/)) {
        oLink.title += " " + content.match(/data-RowKey="(.{3}).*/)[1]
    }
    var btns = btns1;
}
if (oLink.title.substr(0, 4) == "Edit") {
    var btns = btns1;
}
if (oLink.title.substr(0, 4) == "Dele") {
    var btns = btns2;
} 
```

有没有办法可以重构代码。我在想的是把它放到一个名为“adminModalBtns”的函数中，让它以 oLink 和 content 作为参数并让它返回 btns。用 if-else 或 case 语句来做这件事最清楚吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:14:59.163

```
function getButtons(oLink, content) {

    var btns1 = {
        'Submit': function(win) {
            submitHandler(oLink.$link, $('#main-form'), false);
        }
    }
    var btns2 = {
        'Submit & Close': function(win) {
            submitHandler(oLink.$link, $('#main-form'), true);
        },
        'Close': function(win) {
            modal.closeModal()
        }
    }
    switch (oLink.title.substr(0, 4)) {
    case "Crea":
        if (content.match(/data-RowKey="(.{3}).*/)) {
            oLink.title += " " + content.match(/data-RowKey="(.{3}).*/)[1]
        }
    case "Edit":
        return $.extend(btns1, btns2);
    case "Dele":
        return btns2;
    }
}

var btns = getButtons(oLink, content); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T11:36:30.530

或者，您可以使用[三元运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)

```
var sub = oLink.title.substr(0, 4)
   ,bttns =  sub === "Crea" ? btns1 
           : sub === "Edit" ? btns1 
           : btns2;
oLink.title += /data-RowKey="(.{3}).*/.test(content) 
               ? ' ' + content.match(/data-RowKey="(.{3}).*/)[1] 
               : ''; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-10T22:32:26.507

您还可以使用哈希映射重构代码`conditionMap`并创建一个变量`re`来存储正则表达式`/data-RowKey="(.{3}).*/`：

```
var getButtons = function (oLink, content) {
        var re = new RegExp(/data-RowKey="(.{3}).*/),
            btns1 = {
                'Submit': function (win) {
                    submitHandler(oLink.$link, $('#main-form'), false);
                }
            },
            btns2 = {
                'Submit & Close': function (win) {
                    submitHandler(oLink.$link, $('#main-form'), true);
                },
                'Close': function (win) {
                    modal.closeModal();
                }
            },
            conditionMap = {
                'Crea': (content.match(re)) && (oLink.title += ' ' + content.match(re)[1]),
                'Edit': $.extend(btns1, btns2),
                'Dele': btns2
            };

        return conditionMap[oLink.title.substr(0, 4)];
    },
    btns = getButtons(oLink, content); 
```

# php - javascript/jquery：获取远程图像的信息

> ID：12025877
> 
> 赞同：2
> 
> 时间：2012-08-19T10:40:43.113
> 
> 标签：php, javascript, jquery

我有一个“src”指向外部服务器的图像，如下所示：

```
 <img src="http://somewhere.com/script.php?id=1234"> 
```

返回的图像是 .png，它可以作为“X”图像或“O”图像返回。

如何使用 javascript/jquery 确定图像是 X 还是 O？计算加载图像的md5？如果我如何访问图像字节并计算 md5？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T12:52:30.330

首先，您正在做的事情可能效率很低。因为您从动态 PHP 脚本加载图像，所以大多数浏览器不会缓存它。此外，从您无权访问的其他站点加载图像始终被认为是不好的做法。

无论如何，最简单的方法是使用像 PHP 这样的服务器端语言。然后，您可以使用 、 或 获取`curl`文件大小。通过将此数字与图像的已知文件大小进行比较，您可以知道加载了哪个图像。查看[此](http://www.m3rlin.ws/?p=14)页面以获取使用 curl 的示例。`fsocketopen``get_headers``fopen`

或者，您也可以使用 JavaScript 执行此操作（如果您真的必须）：看看[这个](https://stackoverflow.com/questions/934012/get-image-data-in-javascript)stackoverflow 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:13:54.770

您可以将图像绘制到画布对象中，然后检查像素。例如，X 可能在左上角有一个黑色像素，而 O 可能有一个透明或白色像素（当然取决于图像）。

# c++ - 我的代码出错：错误：“。”之前的预期主表达式 令牌

> ID：12025883
> 
> 赞同：1
> 
> 时间：2012-08-19T10:41:33.533
> 
> 标签：c++, pthreads, mutex

我有两个文件如下。

**ppnfs_mutex.h**

```
...
struct ppnfs_mutex_t
{
    pthread_mutex_t mutex;
    pthread_t owner;
    const char* context;
};
... 
```

**ppnfs_mutex.cc**

```
#define PPNFS_MUTEX_INITIALIZER  \
    { .mutex = PTHREAD_MUTEX_INITIALIZER, .owner = 0, .context = NULL, }

struct ppnfs_mutex_t ppnfs_metadata_mutex = PPNFS_MUTEX_INITIALIZER; // line 6 
```

我`g++`用来编译这个文件，有一个错误信息：

```
ppnfs_mutex.cc:6:47: error: expected primary-expression before ‘.’ token 
```

代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T10:47:42.123

这种初始化风格在 C 中是允许的，但在 C++ 中是不允许的。

在 C++ 中，要么在不命名字段的情况下进行初始化，并希望没有人重新排序它们：

```
#define PPNFS_MUTEX_INITIALIZER {PTHREAD_MUTEX_INITIALIZER, 0, NULL} 
```

或提供构造函数或工厂函数，或者（如果您使用 C++11）使用标准线程库而不是 posix 线程。

# c# - Ajax 日历扩展器禁用特定日期

> ID：12025884
> 
> 赞同：0
> 
> 时间：2012-08-19T10:41:38.740
> 
> 标签：c#, asp.net

示例：开始日期：4/08/12 结束日期：4/12/12 提交按钮

单击提交按钮时，我想禁用从 4/0812 到 4/12/12 的所有日期。我正在使用 asp.net c#，并且当我的页面被加载并且 CalendarExtender 再次出现时，无法选择 4/08/12 到 4/12/12 （禁用）。

示例数据库日期 4/08/12 4/09/12 4/10/12 4/11/12 4/12/12

这些日期应该被禁用。

我希望任何人都可以帮助我：| 我是使用 calendarExtender 的新手。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T10:52:39.160

看看这个：[使用 Asp.net Ajax Calendar Extender 有条件地禁用日期](https://stackoverflow.com/questions/8711096/disable-dates-conditionally-with-asp-net-ajax-calendar-extender)

尝试执行此操作的另一种方法，它唯一的想法是在按钮单击时返回 false。此外，您必须尝试将 css 应用于您想要禁用的那些（以使它们看起来被禁用/变灰），您必须深入了解哪些样式需要应用于哪些元素。要记住的一件显而易见的事情是，您不能仅仅依靠客户端验证，因为 javascript 可能会被禁用。所以请确保在服务器端也添加验证。

# mysql - 不确定如何进行正确的 mySQL 查询以在 1 个查询中从多个表中获取数据

> ID：12025886
> 
> 赞同：0
> 
> 时间：2012-08-19T10:42:17.260
> 
> 标签：mysql, database

我需要从数据库中的多个表中获取数据，并且需要使用 1 个查询，但我无法让它工作。

我得到了这些表：
**项目：**

```
id    name        start_date           end_date             project_leader    finished
1     project_1   2012-08-01 00:00:00  2012-29-01 00:00:00  2                 0 
```

**用户**

```
id    username    password    email      status
1     user_1      pass_1      email_1    1
2     user_2      pass_2      email_2    1 
```

**user_has_project**

```
userid   projectId
1        1 
```

**任务**

```
id   project  description          end_date               user
1    1        test description 1   2012-29-01 00:00:00    1
2    1        test description 2   2012-29-01 00:00:00    1 
```

所以我需要做的是做一个查询，应该给我这个结果：
**结果：**

```
project_id  project_name    start_date           end_date             project_leader    finished       tasks
1           project_1       2012-08-01 00:00:00  2012-29-01 00:00:00  user_2            0              2 
```

我让它一直工作到我需要计算项目任务数量的部分。我收到了这个查询，但这不起作用：

```
SELECT projects.id, projects.name, projects.start_date, projects.end_date,
       projects.finished, users.username AS project_leader, COUNT(tasks.id) AS tasks
FROM projects, tasks
INNER JOIN user_has_project ON user_has_project.projectId = projects.id
INNER JOIN users ON projects.project_leader = users.id
WHERE user_has_project.userId = 1 
```

SQL 转储，因此人们可以尝试为我测试他们的查询：

```
-- phpMyAdmin SQL Dump
-- version 3.4.5
-- http://www.phpmyadmin.net
--
-- Machine: localhost
-- Genereertijd: 20 aug 2012 om 19:42
-- Serverversie: 5.5.16
-- PHP-Versie: 5.3.8

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `project-deadline`
--

-- --------------------------------------------------------

--
-- Tabelstructuur voor tabel `projects`
--

CREATE TABLE IF NOT EXISTS `projects` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(45) DEFAULT NULL,
  `start_date` datetime DEFAULT NULL,
  `end_date` datetime DEFAULT NULL,
  `project_leader` int(11) DEFAULT NULL,
  `finished` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ;

--
-- Gegevens worden uitgevoerd voor tabel `projects`
--

INSERT INTO `projects` (`id`, `name`, `start_date`, `end_date`, `project_leader`, `finished`) VALUES
(1, 'Project 1', '2012-08-01 00:00:00', '2012-09-18 00:00:00', 1, 0);

-- --------------------------------------------------------

--
-- Tabelstructuur voor tabel `tasks`
--

CREATE TABLE IF NOT EXISTS `tasks` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `project` int(11) DEFAULT NULL,
  `description` varchar(100) DEFAULT NULL,
  `end_date` datetime DEFAULT NULL,
  `user` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Tabelstructuur voor tabel `users`
--

CREATE TABLE IF NOT EXISTS `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL,
  `password` varchar(32) NOT NULL,
  `email` varchar(100) NOT NULL,
  `status` int(11) NOT NULL,
  `timezone` varchar(10) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ;

--
-- Gegevens worden uitgevoerd voor tabel `users`
--

INSERT INTO `users` (`id`, `username`, `password`, `email`, `status`, `timezone`) VALUES
(1, 'DijkeMark', '37540da17c71d40c656b97b32c00f692', 'mark.dijkema@gmail.com', 1, 'UP1');

-- --------------------------------------------------------

--
-- Tabelstructuur voor tabel `user_has_project`
--

CREATE TABLE IF NOT EXISTS `user_has_project` (
  `userId` int(11) NOT NULL,
  `projectId` int(11) NOT NULL,
  PRIMARY KEY (`userId`,`projectId`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Gegevens worden uitgevoerd voor tabel `user_has_project`
--

INSERT INTO `user_has_project` (`userId`, `projectId`) VALUES
(1, 1),
(1, 6);

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:00:56.870

```
SELECT projects.id,
        projects.name,
        projects.start_date,
        projects.end_date,
        projects.finished,
        users.username AS project_leader,
        COUNT(tasks.id) AS tasks
FROM projects
LEFT JOIN tasks ON (tasks.project = projects.id)
JOIN user_has_project ON (user_has_project.projectId = projects.id)
JOIN users ON (projects.project_leader = users.id)
WHERE user_has_project.userId = 1
GROUP BY projects.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:51:18.537

当您将聚合函数（即 COUNT() ）与其他列一起使用时，您必须使用 group by 子句。还有一件事，我还将查询修改如下；还要记住，只要您想从 GROUP BY 子句中过滤某些内容，就使用 HAVING 子句而不是 WHERE 子句。

```
SELECT projects.id, projects.name, projects.start_date, projects.end_date,
       projects.finished, users.username AS project_leader, COUNT(tasks.id) AS tasks
FROM projects 
INNER JOIN user_has_project ON user_has_project.projectId = projects.id
INNER JOIN users ON user_has_project.userid = users.id
INNER JOIN tasks ON users.id = task.user
GROUP BY projects.id, projects.name, projects.start_date, projects.end_date, 
         projects.finished, project_leader
HAVing user_has_project.userid = 1 
```

**注意：**请根据您的需要修改此查询，我认为这将非常适合您。

# java - BindingResult 和普通目标对象都不是...异常

> ID：12025888
> 
> 赞同：1
> 
> 时间：2012-08-19T10:42:31.910
> 
> 标签：java, spring, exception

是的，我读过这是一个很常见的问题，但是阅读那些帖子并没有真正帮助我。

简短的**故事**是我想在 showAllComments.jsp 上提交一个表单

```
<form:form method="post" action="postNewComment.html">
        <table>
            <tr>
                <td><form:label path="comment">
                        COMMENT
                    </form:label></td>
                <td><form:input path="comment" /></td>
            </tr>
            <tr>
                <td colspan="2"><input type="submit"
                    value="WRITE" /></td>
            </tr>
        </table>
    </form:form> 
```

这是控制器：

```
@Controller
@SessionAttributes
public class CommentController {

    @Autowired
    private CommentService commentService;

    @RequestMapping(value = "/postNewComment", method = RequestMethod.POST)
    public ModelAndView showAllUsers(@ModelAttribute("command") Comment comment, BindingResult result) {

        System.out.println(comment.getComment());

        Map<String, Object> model = new HashMap<String, Object>();
        model.put("COMMENTS", commentService.getComments());

        return new ModelAndView("showAllComments", model);
    }
} 
```

结果如下： **java.lang.IllegalStateException: Bean name 'command' 的 BindingResult 和普通目标对象都不能用作请求属性**

但是您可能需要从头看到**整个故事**：用户通过单击在 index.jsp 上启动应用程序

```
<a href="toLoginPage.html">Log in</a> 
```

该链接将他带到 LoginController

```
@RequestMapping("/toLoginPage")
    public ModelAndView goToLoginPage() {
        return new ModelAndView("login", "command", new User());
} 
```

然后他被带到 login.jsp，在那里他提供了他的用户名和密码。

```
<form:form method="post" action="log_in.html">

        <input type="text" name="uName" />
        <input type="password" name="pW" />

        <input type="submit" value="Log IN">
    </form:form> 
```

他提交表单并被带回 LoginController

```
@RequestMapping(value = "/log_in", method = RequestMethod.POST)
    public ModelAndView tryToLogin(@RequestParam("uName") String uName, @RequestParam("pW") String pW, HttpServletResponse response, HttpServletRequest request) {
        ModelAndView ret = new ModelAndView("login", "command", new User());
        User user = userService.existingUser(uName, pW);
        loggedInUser = new User();
        if (user != null) {
            Map<String, Object> model = new HashMap<String, Object>();
                model.put("COMMENTS", allComments);
                model.put("LOGGED_IN_USER", loggedInUser);
            ret = ModelAndView("showAllComments", model);
        }
        return ret;
    } 
```

成功登录后，他在 showAllComments 页面上看到了所有评论，他应该能够添加自己的评论，但提交上述表单会引发上述异常。我觉得有些东西不见了，但我不知道它是什么。只是为了记录，我展示了 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>Spring3MVC</display-name>

    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

和 spring-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <context:property-placeholder location="classpath:jdbc.properties" />
    <context:component-scan base-package="net" />

    <tx:annotation-driven transaction-manager="hibernateTransactionManager" />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${database.driver}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.user}" />
        <property name="password" value="${database.password}" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>net.model.User</value>
                <value>net.model.Comment</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            </props>
        </property>
    </bean>

    <bean id="hibernateTransactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages" />
        <property name="defaultEncoding" value="UTF-8" />
    </bean>

    <bean id="localeChangeInterceptor"
        class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <property name="paramName" value="lang" />
    </bean>

    <bean id="localeResolver"
        class="org.springframework.web.servlet.i18n.CookieLocaleResolver">
        <property name="defaultLocale" value="en" />
    </bean>

    <bean id="handlerMapping"
        class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
        <property name="interceptors">
            <ref bean="localeChangeInterceptor" />
        </property>
    </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:02:22.960

当您在 logincontroller 中显示 showAllComments.jsp 时，您需要添加一个表单 bean 类，即 Comment，作为模型的属性。

```
@RequestMapping(value = "/log_in", method = RequestMethod.POST)
public ModelAndView tryToLogin(@RequestParam("uName") String uName, @RequestParam("pW") String pW,      HttpServletResponse response, HttpServletRequest request) {
    ModelAndView ret = new ModelAndView("login", "command", new User());
    User user = userService.existingUser(uName, pW);
    loggedInUser = new User();
    model.addAttribute("command", new Comment());
    if (user != null) {
        Map<String, Object> model = new HashMap<String, Object>();
            model.put("COMMENTS", allComments);
            model.put("LOGGED_IN_USER", loggedInUser);
        ret = ModelAndView("showAllComments", model);
    }
    return ret;
} 
```

这应该可以正常工作。

**更新**

使用“command”作为命令对象名称不是一个好习惯。对于课程评论，您可以使用“评论”或类似的东西。如果您这样做，请使用以下代码更新您的表单。

```
<form:form method="post" action="postNewComment.html" commandName="comment">
    <table>
        <tr>
            <td><form:label path="comment">
                    COMMENT
                </form:label></td>
            <td><form:input path="comment" /></td>
        </tr>
        <tr>
            <td colspan="2"><input type="submit"
                value="WRITE" /></td>
        </tr>
    </table>
</form:form> 
```

在所有其他地方做同样的改变，即

```
model.addAttribute("comment", new Comment()); 
```

和

```
@ModelAttribute("comment") 
```

**更新 2**

```
 @RequestMapping(value="userRegistration", method = RequestMethod.GET)
public ModelAndView showUserRegistrationForm(Model model){
    model.addAttribute("user", new AccountDetailsForm());
    return new ModelAndView("userRegistration");
} 
```

# nhibernate - 我可以将 NHibernate SysCache 与非 Web 应用程序一起使用吗？

> ID：12025894
> 
> 赞同：1
> 
> 时间：2012-08-19T10:43:16.957
> 
> 标签：nhibernate, caching, nhibernate-3, syscache2, syscache

我有一个使用 NHibernate (3) 和 SQL Server 2008 的 Windows 服务。WPF 客户端通过 WCF 连接到该服务以使用 DataAccess。我现在的问题是：我可以在这个场景中使用 SysCache 或 SysCache2 - 还是它们只能在 Web-/ASP.NET-Applications 中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:16:50.137

是的，它工作得很好。

如果您愿意，您甚至可以在控制台应用程序中使用它（前提是计算机安装了完整的 .NET Framework 而不仅仅是客户端配置文件）。

# java - 通过 Android SDK 连接 MySQL 数据库

> ID：12025895
> 
> 赞同：1
> 
> 时间：2012-08-19T10:43:34.230
> 
> 标签：java, android, mysql

谁能告诉我在哪里可以找到一个简单的教程，该教程展示了如何制作一个连接到外部 MySQL 数据库的 Android 应用程序，并报告一些数据？

我在 Internet 上找到的教程并不准确 - 它们不起作用或代码不完整。

```
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;
import android.widget.Toast;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.methods.HttpRequestBase;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import android.preference.PreferenceActivity;
import android.preference.PreferenceManager;
import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.TextView;

public class main extends Activity {
    /** Called when the activity is first created. */
    Button login;
    String name = "", pass = "";
    EditText username, password;
    TextView tv;
    byte[] data;
    HttpPost httppost;
    StringBuffer buffer;
    HttpResponse response;
    HttpClient httpclient;
    InputStream inputStream;
    SharedPreferences app_preferences;
    List<NameValuePair> nameValuePairs;
    CheckBox check;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        app_preferences = PreferenceManager.getDefaultSharedPreferences(this);
        username = (EditText) findViewById(R.id.username);
        password = (EditText) findViewById(R.id.password);
        login = (Button) findViewById(R.id.login);
        check = (CheckBox) findViewById(R.id.check);

        String Str_user = app_preferences.getString("username", "0");
        String Str_pass = app_preferences.getString("password", "0");
        String Str_check = app_preferences.getString("checked", "no");
        if (Str_check.equals("yes")) {
            username.setText(Str_user);
            password.setText(Str_pass);
            check.setChecked(true);
        }

        login.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                name = username.getText().toString();
                pass = password.getText().toString();
                String Str_check2 = app_preferences.getString("checked", "no");
                if (Str_check2.equals("yes")) {
                    SharedPreferences.Editor editor = app_preferences.edit();
                    editor.putString("username", name);
                    editor.putString("password", pass);
                    editor.commit();
                }
                if (name.equals("") || pass.equals("")) {
                    Toast.makeText(main.this, "Blank Field..Please Enter",
                            Toast.LENGTH_LONG).show();
                } else {
                    try {
                        httpclient = new DefaultHttpClient();
                        httppost = new HttpPost(
                                "http://www.****.com/android/check.php");

                        // Add your data
                        nameValuePairs = new ArrayList<NameValuePair>(2);
                        nameValuePairs.add(new BasicNameValuePair("UserEmail",
                                name.trim()));
                        nameValuePairs.add(new BasicNameValuePair("Password",
                                pass.trim()));
                        httppost.setEntity(new UrlEncodedFormEntity(
                                nameValuePairs));

                        // Execute HTTP Post Request
                        response = httpclient.execute(httppost);
                        inputStream = response.getEntity().getContent();

                        data = new byte[256];

                        buffer = new StringBuffer();
                        int len = 0;
                        while (-1 != (len = inputStream.read(data))) {
                            buffer.append(new String(data, 0, len));
                        }

                        inputStream.close();
                    } catch (Exception e) {
                        Toast.makeText(main.this, "error" + e.toString(),
                                Toast.LENGTH_LONG).show();
                    }

                    if (buffer.charAt(0) == 'Y') {
                        Toast.makeText(main.this, "login successfull",
                                Toast.LENGTH_LONG).show();
                    } else {
                        Toast.makeText(main.this,
                                "Invalid Username or password",
                                Toast.LENGTH_LONG).show();
                    }
                }
            }
        });
        check.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Perform action on clicks, depending on whether it's now
                // checked
                SharedPreferences.Editor editor = app_preferences.edit();
                if (((CheckBox) v).isChecked()) {

                    editor.putString("checked", "yes");
                    editor.commit();
                } else {
                    editor.putString("checked", "no");
                    editor.commit();
                }
            }
        });
    }

    public void Move_to_next() {
        // startActivity(new Intent(this, zzz.class));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:50:32.433

我很难找到一个完整描述的例子。但这是我要开始的地方。

1.  查看内容提供商来管理您的应用程序数据并访问它并将其存储以供本地使用。下面的链接对内容提供商的工作方式进行了广泛的解释。虽然你不必使用一个。

[http://www.satyakomatineni.com/akc/display?url=DisplayNoteIMPURL&reportId=2882&UserId=satya](http://www.satyakomatineni.com/akc/display?url=DisplayNoteIMPURL&reportId=2882&ownerUserId=satya)

android 内容提供程序示例也显示了这一点。

1.  在您家中的服务器上，为您的应用程序提供一个完整的服务层来请求信息。而不是试图直接访问数据库本身。在某种程度上讨论了该做什么（不是具体如何做）[https://groups.google.com/forum/?fromgroups#!topic/android-developers/rzV9tYpQZ5Y%5B1-25%5D](https://groups.google.com/forum/?fromgroups#!topic/android-developers/rzV9tYpQZ5Y%5B1-25%5D)

恐怕我没有编码示例。

# jquery - Jquery：无法选择附加元素

> ID：12025896
> 
> 赞同：0
> 
> 时间：2012-08-19T10:44:13.870
> 
> 标签：jquery, html, jquery-ui, appendto

当我单击 ul li 内的链接时，我试图显示警报，但不知何故它不起作用。我的 jquery 无法选择我附加它的链接。

我的 HTML

```
<ul id="typeList"></ul> 
```

我的查询

```
 $("a.type").on("click", function(){                
            alert("click");
 });

$("<li><a href='#' class='type' type =" +results.rows.item(i).Type + " >"+ results.rows.item(i).Type +"</a></li>").appendTo('ul#typeList'); 
```

已创建所需行

```
<ul>
   <li><a class="type" href='#' type ='People'>People</a></li>
   <li><a class="type" href='#' type ='Places'>Places</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T10:45:45.820

修改您的`on`触发器以捕获内部的点击事件`ul`：

```
 $("#typeList").on("click", "a.type", function(){                
            alert("click");
 }); 
```

这仅将事件处理程序附加到一个元素（您的`ul#typeList`），但它仅适用`a.type`于`ul`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:55:04.723

您不能将事件处理程序附加到尚不存在的元素！

将事件委托给确实存在的元素，例如@des给出的答案，或者在附加处理程序之前附加元素：

```
$("<li><a href='#' class='type' type =" +results.rows.item(i).Type + " >"+ results.rows.item(i).Type +"</a></li>").appendTo('ul#typeList');

$("a.type").on("click", function(){                
    alert("click");
});
​ 
```

[**小提琴**](http://jsfiddle.net/2f5kw/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-19T10:45:58.487

试试这个以获得点击

```
$(function(){
   $(".type").click(function(){                
                alert("click");
     });
}); 
```

# linux - 如何在 mac os x 中加载 linux .so 文件

> ID：12025901
> 
> 赞同：5
> 
> 时间：2012-08-19T10:44:45.337
> 
> 标签：linux, macos

我有一个.so文件，在ubantu中可以正常使用fopen()，但是当我在mac os x 10.6中使用fopen()时，失败。错误是文件类型无法识别。我如何使Linux库或工具工作在没有重新编译的 Mac 上。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-19T11:32:14.680

Linux 二进制文件与 Mac OS X 完全不同，即使在相同的架构上也是如此。首先，Linux 二进制文件使用[ELF](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)格式，而 Mac OS X 二进制文件基于[Mach-O](http://en.wikipedia.org/wiki/Mach-O)格式。但即使格式相同，操作系统界面也不相同。

因此，Mac OS X 无法直接运行 Linux 二进制文件。最安全的方法是在虚拟机中安装 Linux，例如使用[VirtualBox](http://www.vitualbox.org/)。然后，您将拥有一个成熟的 Linux 系统来做任何您想做的事情，包括通过共享文件夹访问 Mac OS X 主机上的文件。

# performance - 在具有更高处理能力的设备上，精灵在场景中移动得更快：-和引擎

> ID：12025902
> 
> 赞同：0
> 
> 时间：2012-08-19T10:45:35.023
> 
> 标签：performance, sprite, andengine, processing

我正在开发一个游戏，其中精灵在屏幕上随机移动。它们在 PathModifiers 定义的路径上移动，它们的行进时间为 7 秒。现在的问题是，当我将游戏安装在处理速度为 800MHz 的手机上时，它似乎可以正常工作，但是当我将其安装在处理速度为 1GHz 的设备上时，它似乎要快得多。这种行为正常还是我出了点问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:13:56.807

用计时器检查这两种情况。“较慢”的是否在 7 秒内移动？是多还是少？用更快的做同样的事情。如果两者都在 7 秒内完成移动，但它“感觉更快”，这意味着这是一个 fps“问题”。

# opencv - 如何检测单色文本/徽标图案的位置？

> ID：12025905
> 
> 赞同：0
> 
> 时间：2012-08-19T10:45:51.897
> 
> 标签：opencv

我想使用 opencv 来检测图像中的徽标/文本模式。我对模式位置的中心点感兴趣。检测需要缩放（0.5x - 2.0x）和旋转不变（-/+ 20 度）。

我尝试过 SIFT、SURF 和 FAST。虽然前两个经常出现在正确的位置，但我发现它们非常慢（我不得不将图像大小调整到至少 1200x1600，但这可能是一个单独的问题）。

我希望有一种算法只匹配线条，而不是模式。例如，我尝试过`matchShapes()`，但似乎该方法不是旋转和比例不变的。

图案：

![图案](../Images/394a8f02554200be822a03569ffae138.png)

图片：

![图片](../Images/9636e5b1bb636933f726316d71bd45dc.png)

精明之后：

![精明的](../Images/060c145fe9cf381880e655bc2454ed6a.png)

# mysql - 大型 JSON 数据段的数据库与纯文本文件

> ID：12025912
> 
> 赞同：1
> 
> 时间：2012-08-19T10:47:23.387
> 
> 标签：mysql, json, file, text, flat

我正在将大型 3d 文件（最大 50Mb）转换为 JSON 数据以显示在网页上。此数据将占用 MYSQL 中的单个数据库字段。没有缩放，只是要存储的纯文本。我想知道什么会更有效；将数据存储在大型文本文件或 MySQL 数据库字段中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:21:09.593

你有多少这样的文件？他们管理起来有多难（也就是说，你每天有多少新的，你每天有多少过时或删除）？您将使用多少台不同的服务器来向您的观众提供这些内容？

您需要这些问题的答案来证明您使用 MySQL 的合理性。

如果您只有几千个或更少的这些文件，而且它们几乎是静态的，您应该将它们视为媒体资产——如 JPEG 或 MP3 文件。将它们存储在文件系统中并从文件系统中交付它们。只有当你有无数的它们，并且它们一直在变化，并且你必须将它们从数十台服务器交付给你的观众时，你才应该把它们放在 MySQL 中。甚至那时也可能不是。

原因如下：如果它们在 MySQL 中，您将有一个额外的网络跃点。您的 Web 应用程序必须执行 MySQL 查询，然后读取响应，然后将内容交付给您的受众。这是 (a) 复杂的，并且 (b) 会导致延迟（响应时间）增加一点。Web 服务器擅长将文件作为数据流传递给您的受众，而且它们的效率很高。

这是另一个原因。如果您的受众规模扩大，MySQL 资产很难投入到内容交付网络中。

文件系统。一路！

# iphone - 使用水平滚动表视图时的滑动标题视图栏

> ID：12025913
> 
> 赞同：2
> 
> 时间：2012-08-19T10:47:25.600
> 
> 标签：iphone, ios, uitableview, uiscrollview, horizontalscrollview

我正在构建一个应用程序，该应用程序在启用了分页并水平滚动的滚动视图中具有多个表视图。每个 tableview 都有一个标题。

我希望能够水平滚动，并在表格视图上方有一个栏（在导航栏下方显示表格视图的所有标题，并且以表格视图的另一种速度滚动。

我附上了两张截图，以帮助您理解我的意思。

1）我有一个自定义的导航栏和一个过滤器按钮。我想保留它而不是碰它。

2）我有一个酒吧（俱乐部 1、俱乐部 2、俱乐部 3，我希望能够水平滚动）。我们称之为“标题栏”

3）我有表格视图，我也希望能够水平滚动。每个表格视图都有它的标题，我称之为“标题栏”

正如您在第二张图片中看到的，红色矩形内的内容是需要修复的。当我水平滚动时，我希望栏保持在原位，表格视图的标题平滑自然地移动。

![带有 tableview 的页面示例](../Images/ac72f37bf96e4da57efc5f585b52f413.png) ![当我滚动时会发生什么](../Images/db4dfabdea58da32689e1f6070bea57e.png)

**我现在正在做**的是为每张桌子使用 HEADER VIEWS 而不是使用特殊的真实栏，这绝对不符合我的目的。

**我想要**的是一个显示标题并跟随我自然滚动的表格视图的栏，而不是贴在每个表格视图上的标题视图。我想要的示例是Android 上的[Zite](http://itunes.apple.com/us/app/zite-personalized-magazine/id419752338?mt=8)或[Google Play 音乐](https://lh5.ggpht.com/IvSpTcmdyUOC9GoX-x528xAzy9jEPjWCLcNcru4CBEcUNZ-YHo0y2TQHcGmuvOQ2zg)

感谢您的时间！如果有人有任何问题、解决方案或任何可以提供帮助的想法，请分享。再次感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:12:14.740

我给你的建议如下：

在没有这个标题的情况下，在这个滚动视图（我们称之为 containerScrollView）旁边制作表格视图。然后，您创建另一个滚动视图（我们称之为 headerScrollView），并将此 headerScrollView 的高度设置为红色方块内的此高度，并将其设置`userInteractionEnabled`为`NO`.

现在，对于添加到 containerScrollView 的每个 tableView，您还添加了一个包含这些标签的 UIView（俱乐部 1、俱乐部 2...）。在委托方法 `scrollViewDidScroll' 中，您会知道 containerScrollView 是否被滚动，并以编程方式滚动 headerScrollView 以显示不同的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:22:19.207

在您的主容器视图中，您需要两个视图，而不仅仅是滚动视图。所以顶部视图是您的标题，底部较大的视图是滚动视图。当滚动视图页面时，您可以执行任何您想要的动画来更改标题，但该视图不会移动。事实上，你可以翻转它，让它看起来垂直旋转 - 一些光滑的东西。

# powershell - Powershell、Powershell 管理单元、AppCmd.exe

> ID：12025917
> 
> 赞同：0
> 
> 时间：2012-08-19T10:47:43.883
> 
> 标签：powershell

我刚刚开始阅读一些 Powershell 教程 - 因为我想编写脚本来创建网站/虚拟目录/appPool
但是我对这些术语感到困惑 -

*   电源外壳
*   Powershell 管理单元
*   AppCmd.exe

似乎它们都可以用于 IIS 7.0 管理任务。
请分享一些关于这三个如何相互不同的知识？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T11:24:52.643

Powershell 本身不能真正用于 IIS 管理 - 它“只是”一个 shell。但是，它是可扩展的，通过管理单元和模块，例如 IIS 模块“WebAdministration”。您可以使用 powershell 中的 Import-Module 命令加载它。这将使许多与 IIS 管理相关的命令可用，例如`New-Website`和朋友。您还可以访问新的 PSDrive，它是您的 IIS 配置的逻辑表示。它由 提供`cd IIS:\`，您可以在此处浏览您的应用程序池和网站。查看[这篇 MSDN 文章](http://technet.microsoft.com/en-us/library/ee790599.aspx)了解更多信息。

AppCmd 的作用基本相同，但不需要 powershell。您可以将其中任何一个用于大多数任务。不过，我更喜欢带有 IIS 模块的 Powershell，因为脚本更容易阅读，而且 PSDrive 可以进行许多使用 AppCmd 不容易做到的检查（例如，在创建网站之前检查天气是否存在） ，在设置脚本中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T13:28:55.173

AppCmd.exe 是管理 IIS 的单一命令行工具，您可以在部署时使用 powershell 创建网站/虚拟目录/appPool

希望这个回答你的问题..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-31T15:22:11.827

确保将 appcmd.exe 的路径添加到 $PROFILE 文件中的 ENV 路径，以便可以从任何地方访问它。

```
$env:Path = $env:Path + ";C:\Windows\System32\inetsrv" 
```

# html - html垂直对齐并在h2标签中对齐中心

> ID：12025924
> 
> 赞同：10
> 
> 时间：2012-08-19T10:49:12.340
> 
> 标签：html

你能告诉我下面的代码有什么错误吗？它既不将文本居中对齐也不居中（垂直）。

```
<td> <h2 style = "align:center; vertical-align:middle;">TEXT</h2></td> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-19T11:06:12.103

您正在寻找的风格实际上是称为`text-align`，而不是`align`。此外，`vertical-align`如果您想要的是在其单元格内垂直对齐标题，则该样式在这里对您没有帮助。尝试以下操作：

```
<td style="vertical-align: middle;">
    <h2 style="text-align: center;">TEXT</h2>
</td> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T11:57:13.690

要将元素在页面上居中（水平和垂直），您可能需要使用边距。有不同的方法可以做到这一点；这只是其中之一。边距将是容器元素大小的一半。例子：

```
<td style="width:100%; height:100%;"> 
 <h2 style="position:absolute;top: 50%; left: 50%;">TEXT</h2> 
</td> 
```

**注意**：vertical-align 属性适用于图像，而不适用于文本，这就是为什么您需要找到其他解决方案来将文本置于页面或元素内的中心。一种方法是这样；边距。

这种方法的一个**缺点**是元素的中心没有在页面上居中。可以这么说，它从元素的边界被推到中间。这意味着对于较大的元素，左上角将位于页面的中心，而不是元素的中心点。您可以通过使用给定元素大小的负边距来解决此问题。您需要知道要居中的元素的大小。例子：

如果要居中的元素（类 .centered）是 200 像素乘 100 像素，则将其从**元素中心居中的****CSS**如下所示：

 **```
.centered { 
 position: fixed;  
 top: 50%;  
 left: 50%;  
 margin-top: -50px;  
 margin-left: 100px;
} 
```**

# unix - UNIX 中的格式化字段宽度

> ID：12025929
> 
> 赞同：0
> 
> 时间：2012-08-19T10:50:10.110
> 
> 标签：unix

我有以下格式的数据：

![有](../Images/0ba26159842044998b5959051a59e337.png)

![要求](../Images/5596de2aff3cbb3baf1ab3d7d0825272.png)

* * *

我的主要问题是，我有一个文件，其字段/列中的数据太长。

如果我只是简单地显示输出（通过命令 filename.xls|awk -F"|" '{print $1,$2,$3)），那么就不好看了……而且阅读起来非常复杂。如： *fghfhgjhhhkkkkkkkkkkkkkkkjggihkjlkkkkkkkkkkkkkkkkkkkkmnkbjguyuyu yyuyguggugyrdgvjbkjnkl fuyffffhgghfhfhfddtdxgxgfugjb uguyffhhigguyt7gbjtujbkb.......*

....是否可以设置字段宽度？？？

谢谢

更新...到**ghoti**和**Tripleee**（如果不清楚，请放大）输入文件是制表符分隔的......

![在此处输入图像描述](../Images/d5baf8fc90576b9413eb075ae2246e8e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T11:03:53.873

使用 awk 的 substr() 函数。例如： **awk '{print substr($3,0,10)}'**

**man awk**了解详情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T11:40:30.493

在 shell 中，您可以使用“fmt”命令在多个列处换行：

```
[ghoti@pc ~]$ text="dfgkjfd vonhsadoi djo asdoi sdojvdjkdo soij dsmioo broingli."
[ghoti@pc ~]$ printf '%30s\n' | tr \  -
------------------------------
[ghoti@pc ~]$ fmt -30 <<<"$text"
dfgkjfd vonhsadoi djo asdoi
sdojvdjkdo soij dsmioo
broingli.
[ghoti@pc ~]$ 
```

您应该`man fmt`在您的环境中验证命令行选项。该`<<<Text`符号由`bash`shell 使用，不一定是您想要使用此命令的方式。

表格内的布局更为复杂，不能仅靠 awk 来完成。

# jquery - jQuery 集合中的每个第 n 个元素

> ID：12025931
> 
> 赞同：7
> 
> 时间：2012-08-19T10:50:33.903
> 
> 标签：jquery

我想选择一组 jQuery 元素中的每一个。

例如。

```
<ul>
  <li>A</li>
  <li>B</li>
  <li>C</li>
  <li>D</li>
  <li>E</li>
  <li>F</li>
  <li>G</li>
</ul> 
```

1.  如何选择每三个（C 和 F）元素？
2.  如何选择不是同一集合中每隔三分之一（A、B、D、E、G）的所有其他元素？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-19T10:54:55.810

您可以使用将[`$.grep`](http://api.jquery.com/jQuery.grep/)集合中的每个元素及其索引（基于 0）传递给回调的函数。因此，由您决定要保留哪一个：

```
var elements = $('<ul><li>A</li><li>B</li><li>C</li><li>D</li><li>E</li><li>F</li><li>G</li></ul>').find('li');
var result = $.grep(elements, function(element, index) {
    return (index + 1) % 3 == 0;
}); 
```

如果您想要其他元素，只需反转条件：`(index + 1) % 3 != 0`

另一种可能性是使用该[`.filter()`](http://api.jquery.com/filter/)功能：

```
var result = $('<ul><li>A</li><li>B</li><li>C</li><li>D</li><li>E</li><li>F</li><li>G</li></ul>')
    .find('li')
    .filter(function(index) {
        return (index + 1) % 3 == 0;    
    }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-19T11:14:18.297

[**工作演示**](http://jsfiddle.net/asbkp/)

* * *

(1) `$('li:nth-child(3n)')`- 每隔三个列表项选择一次

[http://api.jquery.com/nth-child-selector/](http://api.jquery.com/nth-child-selector/)

(2节) `$('li').not(':nth-child(3n)')`- 选择其他人

[http://api.jquery.com/not/](http://api.jquery.com/not/)

* * *

如果您在 DOM 中没有元素，而只有在问题中指定的字符串中，请将这些技术与[`.children()`](http://api.jquery.com/children/)：

```
var thirds = $('<ul><li>A</li>...</ul>').children('li:nth-child(3n)');

var others = $('<ul><li>A</li>...</ul>').children('li').not(':nth-child(3n)'); 
```

在这种情况下，[`.children()`](http://api.jquery.com/children/)并且[`.find()`](http://api.jquery.com/find/)可以互换使用，因为列表项中没有任何嵌套元素；不过一般来说，前者只向下搜索一个级别，而后者搜索所有后代（如果你知道你只想向下一级，那效率就不高了）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-14T10:40:21.037

我只是在一般意义上回答，您可以说扩展您的问题定义（因此它对许多人有用）。

假设您要选择每个第 3 个元素，但元素的开头不一定是第 3 个元素。如果您想将第一个元素作为开始元素意味着选择应该是 A、D、G 或跳过这些元素跟随

1.  `$('li:nth-child(3n - 2)')`
2.  `$('li').not(':nth-child(3n- 2)')`

这里 3 of "3n" 将选择第三个元素，而 "- 2" 将选择带到第一个元素。

广义形式

1.  `$('li:nth-child(3n - x)')`
2.  `$('li').not(':nth-child(3n- x)')`

这里`x`是变量来定义第一个元素，如前所述。多于

谢谢和问候，
Rk_Hirpara

# gwt - 出现错误：找不到方法 createFile($Proxy841)

> ID：12025941
> 
> 赞同：0
> 
> 时间：2012-08-19T10:53:00.303
> 
> 标签：gwt, google-apps-script, google-apps

我实际上正在使用谷歌应用程序脚本并且我试图使用一种上传文件的方法，所以我执行了我在网站上找到的这段代码：

```
 function doGet(e) {

 var app = UiApp.createApplication().setTitle("Upload CSV to Sheet");
 var form = app.createFormPanel().setId('frm').setEncoding('multipart/form-data');
 var formContent = app.createVerticalPanel();
 form.add(formContent);  
 formContent.add(app.createFileUpload().setName('thefile'));
 formContent.add(app.createSubmitButton('Submit'));
 app.add(form);
 return app;
 }

function doPost(e) {      // data returned is a blob for FileUpload widget 
var fileBlob = e.parameter.thefile; 
var doc = DocsList.createFile(fileBlob);  
var app = UiApp.getActiveApplication();           
//Display a confirmation message                           
var label = app.createLabel('file uploaded successfully');
app.add(label);  
 return app;  
  } 
```

首先我收到消息错误 TypeError: **Cannot read property "parameter" from undefined。（第 15 行）**而不是我用这个改变了这一行：

```
 var app = UiApp.getActiveApplication();    
   var fileBlob = app.getElementById('thefile');// in the doPost function      

   formContent.add(app.createFileUpload().setId('thefile'));</b>// I remplaced the setName with setId in the doSet function;</br> 
```

而当我再次执行代码时，我遇到了这个错误：**找不到方法 createFile($Proxy841)**；

真不知道是什么问题！

任何人都可以帮助我！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:21:35.700

你的第一个版本是正确的，你确定你使用这个版本来运行你的测试吗？您使用的是“开发”版本还是“执行”版本？您不应该做出您在问题第二部分中建议的更改，这不是它的工作方式。

请参阅下面的屏幕截图：

![在此处输入图像描述](../Images/8cbe4b0573bb493ef431833360c41112.png)

# r - 雷达图轴范围

> ID：12025943
> 
> 赞同：4
> 
> 时间：2012-08-19T10:53:28.840
> 
> 标签：r, plot

我使用 R 软件中“fmsb”包中的“radarchart”功能创建了一个雷达图。

我使用的矩阵如下：

```
x<-c(c(rep(4.5,7),c(rep(0,7)), 3.34, 3.28, 1.37, 1.12, 3.52, 4.07, 3.66));
a<-as.data.frame(matrix(x,nrow=3, ncol=7,byrow=T))
radarchart(a,axistype=4,seg=3,cglty=3,pty=32,cglcol=1,plwd=3,pcol=1,axislabcol=1) 
```

我想显示`c(0,5)`轴上的范围而不是 `c(0,100)`or `c(0,1)`。如果有人能指导我，我真的很感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T10:19:50.213

通过使用相当快速的调整，`radarchart`现在有一个额外的参数允许您手动指定轴上的数字：

```
require(fmsb)
x = c(rep(4.5,7),rep(0,7), 
      3.34, 3.28, 1.37, 1.12, 3.52, 4.07, 3.66)
a = as.data.frame(matrix(x,nrow=3, ncol=7,byrow=T))
radarchart(a, axistype = 4, seg = 3, cglty = 3, 
           pty = 32, cglcol = 1, plwd = 3, pcol = 1, axislabcol = 1,
           labels = seq(from = min(x), to = max(x), length = 4)) 
```

![在此处输入图像描述](../Images/90bdd67fb2c5f501fe610d9484853216.png)

更新的源代码，我的补充用注释标记：

```
radarchart = function (df, axistype = 0, seg = 4, pty = 16, pcol = 1:8, plty = 1:6, 
          plwd = 1, cglty = 3, cglwd = 1, cglcol = "navy", axislabcol = "blue", 
          title = "", maxmin = TRUE, na.itp = TRUE, labels = NULL, ...) 
{
  if (!is.data.frame(df)) {
    cat("The data must be given as dataframe.\n")
    return()
  }
  if ((n <- length(df)) < 3) 
    return()
  if (maxmin == FALSE) {
    dfmax <- apply(df, 2, max)
    dfmin <- apply(df, 2, min)
    df <- rbind(dfmax, dfmin, df)
  }
  plot(c(-1.2, 1.2), c(-1.2, 1.2), type = "n", frame.plot = FALSE, 
       axes = FALSE, xlab = "", ylab = "", main = title, asp = 1, 
       ...)
  theta <- seq(90, 450, length = n + 1) * pi/180
  theta <- theta[1:n]
  xx <- cos(theta)
  yy <- sin(theta)
  for (i in 0:seg) {
    polygon(xx * (i + 1)/(seg + 1), yy * (i + 1)/(seg + 1), 
            lty = cglty, lwd = cglwd, border = cglcol)
    if (axistype == 1 | axistype == 3) 
     ## Changes by me  
     if(is.null(labels)) labels = paste(i/seg * 100, 
                                         "(%)")
      text(-0.05, (i + 1)/(seg + 1), labels[i+1], col = axislabcol)
    if (axistype == 4 | axistype == 5) 
      ## Changes by me
      if(is.null(labels)) labels = sprintf("%3.2f", i/seg)
      text(-0.05, (i + 1)/(seg + 1), labels[i+1], 
           col = axislabcol)
  }
  arrows(xx/(seg + 1), yy/(seg + 1), xx * 1, yy * 1, lwd = cglwd, 
         lty = cglty, length = 0, col = cglcol)
  if (axistype == 2 | axistype == 3 | axistype == 5) {
    text(xx[1:n], yy[1:n], df[1, 1:n], col = axislabcol)
  }
  text(xx * 1.2, yy * 1.2, colnames(df))
  series <- length(df[[1]])
  if (length(pty) < (series - 2)) {
    ptys <- rep(pty, series - 2)
    pcols <- rep(pcol, series - 2)
    pltys <- rep(plty, series - 2)
    plwds <- rep(plwd, series - 2)
  }
  else {
    ptys <- pty
    pcols <- pcol
    pltys <- plty
    plwds <- plwd
  }
  for (i in 3:series) {
    xxs <- xx
    yys <- yy
    scale <- 1/(seg + 1) + (df[i, ] - df[2, ])/(df[1, ] - 
      df[2, ]) * seg/(seg + 1)
    if (sum(!is.na(df[i, ])) < 3) {
      cat(sprintf("[DATA NOT ENOUGH] at %d\n%g\n", i, df[i, 
                                                         ]))
    }
    else {
      for (j in 1:n) {
        if (is.na(df[i, j])) {
          if (na.itp) {
            left <- ifelse(j > 1, j - 1, n)
            while (is.na(df[i, left])) {
              left <- ifelse(left > 1, left - 1, n)
            }
            right <- ifelse(j < n, j + 1, 1)
            while (is.na(df[i, right])) {
              right <- ifelse(right < n, right + 1, 1)
            }
            xxleft <- xx[left] * (1/(seg + 1) + (df[i, 
                                                    left] - df[2, left])/(df[1, left] - df[2, 
                                                                                           left]) * seg/(seg + 1))
            yyleft <- yy[left] * (1/(seg + 1) + (df[i, 
                                                    left] - df[2, left])/(df[1, left] - df[2, 
                                                                                           left]) * seg/(seg + 1))
            xxright <- xx[right] * (1/(seg + 1) + (df[i, 
                                                      right] - df[2, right])/(df[1, right] - 
                                                        df[2, right]) * seg/(seg + 1))
            yyright <- yy[right] * (1/(seg + 1) + (df[i, 
                                                      right] - df[2, right])/(df[1, right] - 
                                                        df[2, right]) * seg/(seg + 1))
            if (xxleft > xxright) {
              xxtmp <- xxleft
              yytmp <- yyleft
              xxleft <- xxright
              yyleft <- yyright
              xxright <- xxtmp
              yyright <- yytmp
            }
            xxs[j] <- xx[j] * (yyleft * xxright - yyright * 
              xxleft)/(yy[j] * (xxright - xxleft) - xx[j] * 
              (yyright - yyleft))
            yys[j] <- (yy[j]/xx[j]) * xxs[j]
          }
          else {
            xxs[j] <- 0
            yys[j] <- 0
          }
        }
        else {
          xxs[j] <- xx[j] * (1/(seg + 1) + (df[i, j] - 
            df[2, j])/(df[1, j] - df[2, j]) * seg/(seg + 
            1))
          yys[j] <- yy[j] * (1/(seg + 1) + (df[i, j] - 
            df[2, j])/(df[1, j] - df[2, j]) * seg/(seg + 
            1))
        }
      }
      polygon(xxs, yys, lty = pltys[i - 2], lwd = plwds[i - 
        2], border = pcols[i - 2])
      points(xx * scale, yy * scale, pch = ptys[i - 2], 
             col = pcols[i - 2])
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T10:07:26.543

我通过重新缩放图表轴找到了答案，如下所示：

```
for(i in 0:seg) #seg=The number of segments
text(-0.05, (i + 1)/(seg + 1), sprintf("%3.2f", i/seg)) 
```

就我而言，

```
radarchart(a,axistype="",seg=3,cglty=3,pty=32,cglcol=1,plwd=3,pcol=1,axislabcol=1,title="")
text(-0.05, (0:3 + 1)/4, sprintf("%3.2f", quantile(0:5,probs=c(0,0.33,0.67,1))),col = 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-25T15:25:35.230

fmsb 0.6.1 版更新：

**！！`labels`参数已更改为`caxislabels`!!**

现在，在 x 轴上显示值而不是百分比的正确脚本是：

```
require(fmsb)
x = c(rep(4.5,7),rep(0,7), 
      3.34, 3.28, 1.37, 1.12, 3.52, 4.07, 3.66)
a = as.data.frame(matrix(x,nrow=3, ncol=7,byrow=T))

windows()
radarchart(a, axistype = 4, seg = 3, cglty = 3, 
           pty = 32, cglcol = 1, plwd = 3, pcol = 1, axislabcol = 1,
           caxislabels = seq(from = min(x), to = max(x), length = 4)) 
```

[![在此处输入图像描述](../Images/821387dc3f4fa2b3aa4a1f756729f501.png)](https://i.stack.imgur.com/KZTQ5.png)

# ios - 后台模式下的IOS应用

> ID：12025944
> 
> 赞同：1
> 
> 时间：2012-08-19T10:53:43.227
> 
> 标签：ios

如果我的应用程序被推到后台，有没有办法保证为它分配一些最小的 CPU 资源（〜 5-10%）？

我使用 UIBackgroundMode 属性的“位置”值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:06:39.927

并不真地。在 UIApplication 上使用此函数发送到后台后，您可以要求 iOS 给您几个周期来执行某些操作：

```
beginBackgroundTaskWithExpirationHandler: 
```

也可以为某些服务注册您的应用程序，并在您处于后台时收到通知……但 iOS 不允许您在后台获得一些周期来执行任何操作。

解决细节的文档在这里： [Apple Docs](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# c - 如何使用C打印带有空格的xml文件？

> ID：12025945
> 
> 赞同：0
> 
> 时间：2012-08-19T10:54:00.837
> 
> 标签：c, xml-parsing, whitespace

我写了这个函数：

```
 void printDFS(pXml_Element root)
    {
    int i ;

    printf("< %s > \n", root->data->name);

    for ( i = 0 ; i < root->childrenList->num_of_items ; i++)
    {
        void*           voidElem;
        pXml_Element    currElem;

        voidElem  = getStructDataAtIndex(root->childrenList, i);
        if (!voidElem)
        {
            printf("error: couldn't get data.. \n");
            return;
        }

        currElem = (pXml_Element)voidElem;

        printDFS(currElem);

      }

    } 
```

它像 DFS 搜索一样运行，但我想添加空格。

我的 DS 是一棵树，其中每个节点都有子节点（我知道它们的数量）我使用深度搜索运行并打印我的上下文，但我没有空格。我希望它看起来像 XML 格式：

```
<node>
   <n1> 
   <n2>
      <o1>
      <o2>
  <n3> 
```

像那样。

我也写了这个函数：

```
 void printSpace(int numOfspaces)
       {
         while(numOfspaces > 0)
          {
             printf("  ");
             numOfspaces--;
         }
      } 
```

但我仍然没有这样做:(任何人都可以帮助我>希望得到一个解释如何正确地做......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:01:11.227

基本上，制作一个全局或静态变量来计算递归深度，并在输入函数时增加它：

```
void printDFS(pXml_Element root)
{
   static int Depth=-1;
   ...

   Depth++; 
```

然后，用适当数量的空格缩进每一行：

```
printSpace(3*Depth);
printf("< %s > \n", root->data->name); 
```

在函数结束时，再次减小它：

```
 printDFS(currElem);
    }
    Depth--;
} 
```

编辑：一个线程安全的替代方案将是一个额外的“深度”参数；您只需在递归调用中传递“Depth+1”，并为初始调用传递“0”。

```
void printDFS(pXml_Element root, unsigned int Depth)
{
   ....
   printDFS(currElem,Depth+1);
   ...
} 
```

# xcode - 在 XCode 中为 Snippets 创建快速快捷方式

> ID：12025948
> 
> 赞同：1
> 
> 时间：2012-08-19T10:54:29.887
> 
> 标签：xcode, code-snippets, shortcuts

我正在使用德语键盘布局，因此在编程时不同的括号 ()、[]、{} 不能“流畅地”访问。我尝试了美国布局，但也不喜欢它。所以我想出了一个对我来说效果很好的解决方案：

我安装了一个名为 xType 的应用程序，它可以替换文本模式。我想到了一个几乎从未使用过的字符组合，我想出了德语键盘上“Shift+3”上的§。我将它与 Shift+1、Shift+2、Shift+3 结合使用以访问不同的括号。

*例如：**§!** 将自动**替换为 ()**，**§" 替换为 []**和**§§ 替换为 {\n\n\n}**。这使我的工作流程更加轻松流畅。*

**但是**：此软件复制并粘贴括号，因此它会覆盖我的上一个副本。

所以我尝试以这种方式使用 xCode Codesnippets，但它们非常慢并且不允许特殊字符。**有没有办法在xCode**中为您想要快速访问的片段创建快速快捷方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:34:23.857

过了一会儿，我找到了一个对我有用的解决方案。我在 AppStore 上购买了应用程序“Dash”，它具有内置的代码片段功能，可以按我的意愿工作。

当使用此工具填充片段时，它们不会填充我的剪贴板，因此我可以粘贴我想要的内容。此外，我可以将光标放在我希望它在片段中的位置。

所以我可以制作一个名为 §! 它将写入括号内的光标：（@cursor）

而且它的工作速度非常快。

编辑：只是想确保我不是在宣传我自己的应用程序，也不是与 Dash 的开发者有关。这只是最适合我的解决方案。

# facebook - 如果访问者已连接并且喜欢粉丝专页，我需要一个 DIV 消失

> ID：12025951
> 
> 赞同：0
> 
> 时间：2012-08-19T10:54:52.533
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我想在 Wordpress 中添加一个带有 likebutton 的 DIV，用于 fanpage。

如果正在浏览博客的用户喜欢粉丝专页，则这个赞按钮和 div 中的文本内容必须消失。

你能告诉我实现这一目标的指示吗？

例如，如何使这段代码消失？

```
<div id="disappear-if-likes">
text <br>
facebook like button code
</div> 
```

Ps 我不是 PHP 专家，所以请考虑一下 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:38:34.770

为了让你的 div 消失，你必须知道你的用户是谁，并且能够阅读他们喜欢的内容。为了获取此信息，您需要让用户通过您创建的 Facebook 应用程序登录，然后查询他们的用户记录。这不是您很快就能完成的事情，而且如果没有一些中级 PHP 或 javascript，您将无法做到。

最好的办法是使用[Facebook 登录按钮](https://developers.facebook.com/docs/reference/plugins/like)。这存在于您网站上的 Facebook 托管 iframe 中，因此 Facebook 可以与他们认识的用户进行交互（但您不知道）。他们的按钮会根据用户的点赞状态改变状态。

要使此按钮“喜欢”您的粉丝页面，只需在参数中添加您的粉丝页面的网址 (https://facebook.com/PAGE_USERNAME_OR_ID) 而不是您网站的网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:41:40.707

你自己找到了这个链接，Pikk，但似乎不确定它是否是你想要的。我想我会在这里发帖澄清。

[http://www.parorrey.com/blog/facebook-apps-development/how-to-check-facebook-page-liked-by-user-like-gate-facebook-iframe-tab-using-php-graph- api](http://www.parorrey.com/blog/facebook-apps-development/how-to-check-facebook-page-liked-by-user-like-gate-facebook-iframe-tab-using-php-graph-api)

这就是你所需要的。问题在于，除非您已将 facebook API 与您的网站集成，并且用户正在使用它进行连接和身份验证，否则您无法真正判断他们在访问您的网站时是否喜欢您。

现在，直接在 facebook 上托管的页面/应用程序可以告诉这些信息。因此，您要做的是使用链接中引用的代码创建一个 facebook 应用程序，除了让它显示图像或不显示任何内容。然后在您的 wordpress 网站上，您将在每个帖子的底部创建一个 iframe，并加载该 facebook 应用程序的 URL。

正如您所提到的，您不是 PHP 专家，它可能有点超出您的舒适区，但这应该可以实现您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T12:28:56.540

Facebook 添加了事件回调。

```
FB.Event.subscribe('edge.create',
    function(response) {
        alert('You liked the URL: ' + response);
    }
); 
```

[http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

我认为这会有所帮助。

# hibernate - 在 Tomcat 上运行 JPA

> ID：12025956
> 
> 赞同：4
> 
> 时间：2012-08-19T10:55:20.273
> 
> 标签：hibernate, spring-mvc, jpa-2.0, maven-3, tomcat7

我正在构建一个 maven 测试项目，它运行：Spring MVC 3.1.1 JPA，Hibernate 4.1.4 作为 jpa 提供程序 MYSQL 5.5.x TOMCAT 7

我正在尝试创建一个简单的端到端基本用例，其中涉及从数据库读取和更新。因为我喜欢坚持使用纯 JPA，所以我使用 spring 的 LocalContainerEntityManagerFactoryBean，使用 @PersistenceContext 注释注入到我的 dao 中。

我此时遇到的问题：

1.  我无法坚持到 DB（没有抛出异常，但也没有 db 反射）。
2.  我无法删除表单 DB（没有抛出异常，但也没有 db 反射）。

我可以从数据库中读取。

在查看文档后，我发现我可能会缺少一些 JPA 支持，因为 TOMCAT 不包括开箱即用。

我经历了[这个](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch14s06.html#orm-jpa-setup-lcemfb-tomcat)，[这个](http://rockhoppertech.com/blog/spring-3-hibernate-jpa-tomcat-transactions/)和[那个](http://www.abcseo.com/tech/java/running-spring-jpa-under-tomcat)（还有更多......）并应用了以下内容：

*   在我的 pom.xml 中添加了 spring-instrument-tomcat 依赖项（只是为了检索 jar）。
*   我将那个 jar 复制到我的 tomcat 的 lib 目录
*   在 META-INF 目录下，我创建了一个 context.xml 文件，内容如下：

    ```
    <Context docBase="SpringTest" path="/SpringTest" reloadable="true"
        source="org.eclipse.jst.jee.server:SpringTest">
        <Loader
            loaderClass="org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader"
            useSystemClassLoaderAsParent="false" />
    </Context> 
    ```

*   我将 InstrumentationLoadTimeWeaver 添加到我的实体管理器定义中

这应该可以解决问题 - 但事实并非如此。我经历了同样的行为。

然后我从stackoverflow遇到了[这个问题。](https://stackoverflow.com/questions/9420750/spring-3-1-jpa-not-inserting-data-while-running-in-tomcat)建议添加事务定义的答案之一：`<tx:annotation-driven proxy-target-class="true" />`到 DispatcherServlet 上下文（到目前为止，我只在我的根应用程序上下文中使用它）。在做完这些事情开始解决之后，事务被提交到数据库。

在这一点上，我开始怀疑是否仍然需要所有其余的东西，所以我回滚了除了添加到 DispatcherServlet 之外所做的所有事情，它仍然可以正常工作！

所以，我的问题：它是如何工作的？我真的需要所有这些来支持tomcat中的JPA吗？最后，为什么我需要将声明复制到 DispatcherServlet 才能解决这个问题？

在此先感谢，瑜伽士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:36:40.490

您不需要“spring-instrument-tomcat 对我的 pom.xml 的依赖”来对您的数据库进行 CRUD。您可以读取但不能写入或更新数据库的事实为零，这表明缺少 spring-transactions 的配置良好（正确注释 @Transactional，正确声明注释驱动的 spring 上下文）。不要用 unessecary jar 加载 Tomcat。在 Spring-source 工具包中启动一个新的 spring 模板项目（Simple spring jpa utility project）并检查 spring-hibernate-jpa 项目真正需要哪些依赖项

# c++ - 编程任务问

> ID：12025957
> 
> 赞同：-7
> 
> 时间：2012-08-19T10:55:32.340
> 
> 标签：c++

```
C++ Template:
class MyClass
{
public:
 getNiCount(...)
  {
  }
 replaceNiWithNI(...)
  {
  }
};
int main()
{
 const char *szTestString1 = "Ni nI NI nI Ni";
 const wchar_t *szTestString2 = L"Ni nI NI nI Ni";
 // Invoke getNiCount(...) of class MyClass
 // Invoke replaceNiWithNI(...) of class MyClass
 // Display on screen: "Found X occurrences of Ni. New string: Y"
} 
```

任务描述：

1.  实现两个函数`getNiCount`和`replaceNiWithNI`类`MyClass`：
    *   `getNiCount`应该返回“Ni”的出现次数`szTestString1/2`（区分大小写）
    *   `replaceNiWithNI`应将所有出现的“Ni”替换为`szTestString1/2`“NI”（区分大小写）
2.  调用这两个函数`getNiCount`和`replaceNiWithNI`。
3.  在屏幕上显示最后一条评论中给出的字符串。`X`并`Y`应替换为实际值。
4.  该类`MyClass`应该能够处理`szTestString1`（ASCII）和`szTestString2`（Unicode）。

一般要求：

代码应该是

*   易于理解和维护（优先级 1）
*   技术优雅（优先级 2）
*   尽可能（CPU）高效（优先级 3）

您可以使用所有基于 C++ 语言的技术、工具包和框架。

我的解决方案（不完整）

逻辑如下......但是在我的系统中，function2“replace”正在崩溃。无法修复它。

```
#include<iostream>
#include<string>
using namespace std;

class MyClass
{
public:
 void getNiCount(const char*,const wchar_t*);
  //cout<<"\nCount is :"<<count;

void replaceNiWithNI(const char*,const wchar_t*);

};

void MyClass::getNiCount(const char* x,const wchar_t* y)
{
     int count=0;
     int ycount=0;
   for(int i=0; x[i]!='\0';i++)
   {
       if(x[i]=='N')
       {   if(x[i+1]=='i')
                          count++;
       }
       }
   for(int i=0; y[i]!='\0';i++)
   {
       if(y[i]=='N')
       {   if(y[i+1]=='i')
                          ycount++;
       }
       }
       cout<<"\nFound "<<count<<" occurences of Ni in String 1";
       cout<<"\nFound "<<ycount<<" occurences of Ni in String 2";
}

void MyClass:: replaceNiWithNI(const char* x,const wchar_t* y)
{    char* a;
     wchar_t* b;
     strcpy(a,x);

     for (int i=0;a[i]!='\0';i++)
     {
         if (a[i]=='N')
         {  if(a[i+1]=='i')
            {
                           a[i+1]='I';
                           }
         }
         }
     for (int i=0;y[i]!='\0';i++)
     {
         b[i]=y[i];
     }
     for (int i=0;b[i]!='\0';i++)
     {
         if (b[i]=='N')
         {  if(b[i+1]=='i')
            {
                           b[i+1]='I';
                           }
         }
     }

     cout<<"\nNew String 1 is :";
     puts(a);
     cout<<"\nNew String 2 is :";<<b

}

int main()
{
 const char *szTestString1 = "Ni nI NI nI Ni";
 const wchar_t *szTestString2 = L"Ni nI NI nI Ni";
 MyClass ob1;
 ob1.getNiCount(szTestString1,szTestString2);
 ob1.replaceNiWithNI(szTestString1,szTestString2);
 getchar();
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T02:27:57.940

这里有几个问题：

1.  您的程序由于分号错误而无法编译

    ```
    cout<<"\nNew String 2 is :";<<b 
    ```

2.  您的程序崩溃是`strcpy(a,x);`因为您正在复制`a`未初始化的程序 - 它没有分配内存。您需要调用`new`它`a`才能工作，这也意味着您需要知道所需数组的大小（可能是函数的另一个参数）。

3.  使用`std::string`and`std::wstring`几乎总是比处理原始字符数组更可取。例如，请参阅[此问题](https://stackoverflow.com/questions/1032243/should-i-return-stdstrings)。我看到你可能已经考虑过了，因为你有`#include <string>`

4.  由于您需要对不同类型执行相同的操作，我怀疑练习的重点可能是使用模板。

5.  你说

    > `getNiCount`应该返回出现的次数......

    但你`getNiCount`没有返回任何东西。

6.  `using namespace std;`通常[被认为是不好的做法](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)。

7.  通常值得[支持 pre-increments 而不是 post-increments](https://stackoverflow.com/questions/24901/is-there-a-performance-difference-between-i-and-i-in-c?answertab=votes#tab-top)，尽管在这种特殊情况下，没有开销。

* * *

举个例子，包括上面的建议：

```
#include <iostream>
#include <string>

template<typename StrType>
class MyClass {
 public:
  int getNiCount(const StrType& input) const;
  void replaceNiWithNI(StrType& input) const;
};

template<typename StrType>
int MyClass<StrType>::getNiCount(const StrType& input) const {
  int count = 0;
  for (int i = 0; i < input.size() - 1; ++i) {
    if (input[i] == 'N' && input[i + 1] == 'i')
      ++count;
  }
  return count;
}

template<typename StrType>
void MyClass<StrType>::replaceNiWithNI(StrType& input) const {
  for (int i = 0; i < input.size() - 1; ++i) {
    if (input[i] == 'N' && input[i + 1] == 'i')
      input[i + 1] = 'I';
  }
}

int main() {
  const char* szTestString1 = "Ni nI NI nI Ni";
  MyClass<std::string> ob1;
  std::string testString1(szTestString1);
  int count1 = ob1.getNiCount(testString1);
  ob1.replaceNiWithNI(testString1);
  std::cout << "Found " << count1 << " occurences of Ni in String 1\.  "
            << "New string: " << testString1 << '\n';

  const wchar_t* szTestString2 = L"Ni nI NI nI Ni";
  MyClass<std::wstring> ob2;
  std::wstring testString2(szTestString2);
  int count2 = ob2.getNiCount(testString2);
  ob2.replaceNiWithNI(testString2);
  std::wcout << L"Found " << count2 << L" occurences of Ni in String 2\.  "
             << L"New string: " << testString2 << '\n';

  getchar();
  return 0;
} 
```

我通常会保留您定位和替换`Ni`字符的方式。在[library的](http://en.cppreference.com/w/cpp/algorithm)[成员函数中`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)提供了更复杂的选项。[`<algorithm>`](http://en.cppreference.com/w/cpp/algorithm)

# android - 拖放 TableLayout 示例？

> ID：12025958
> 
> 赞同：1
> 
> 时间：2012-08-19T10:55:46.830
> 
> 标签：android, drag-and-drop, tablelayout

在浏览了整个互联网后，没有找到如何将拖放到未运行 3.0 或更高版本的设备上。我问这个问题是关于一个很常见的问题。

是否有一个示例/游戏引擎/SDK/jar 可以让您将视图拖放到 TableLayout 中？如果有人早些时候做了一些事情，他们可以分享他们的代码。我已经尝试过修改 GridView 和 ListView 示例，但没有成功。

请帮助我了解如何对 3.0 之前运行的设备执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:01:47.190

在网格视图中[拖放图像阴影中的](https://stackoverflow.com/questions/11998694/image-shadow-in-drag-and-drop-on-grid-view)[karan421 ？](https://stackoverflow.com/users/1171061/karan421)介绍了这些链接：
[拖放 ui 元素](http://www.edumobile.org/android/android-beginner-tutorials/drag-and-drop-ui-element/)
[http://www.youtube.com/watch?v=QEOpHg7ZMNk](http://www.youtube.com/watch?v=QEOpHg7ZMNk)
并且 Ganesh 还介绍了此链接
[改进的 gridview 拖放](http://blahti.wordpress.com/2012/03/03/improved-drag-drop-for-gridview/)
希望以上链接对您有所帮助。

# objective-c - 带有 UITableViews 和 UISearchBar 的 UIViewController

> ID：12025963
> 
> 赞同：0
> 
> 时间：2012-08-19T10:56:29.433
> 
> 标签：objective-c, xcode, uitableview, uiviewcontroller, uisearchbar

以前我有`UITableViewController`a`UISearchBar`并且它通过使用显示在顶部`self.tableView.tableHeaderView = searchBar;`

现在我不得不重做一些事情，最后得到了 a `UIViewController`which shows 2 `UITableView's`。我希望上面的显示搜索栏，但现在没有显示。

现在我使用`[MyView setTableHeaderView:searchBar];`in `viewDidLoad`Method 将 searchBar 添加到 TableView。

在`UIViewController`代码中几乎与`UITableView`（搜索栏初始化和框架创建以及表格视图初始化）中的相同

任何想法我做错了什么？

编辑：这一切背后的想法是在上部表格视图（包括搜索栏）和另一个 uitableview 中有一个列表，我可以在其中选择一些过滤选项。

```
(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
    searchResult = [[NSMutableArray alloc] init];

    LexikonView = [[UITableView alloc] initWithFrame:CGRectMake(0, 44, 320, 337) style:UITableViewStylePlain];
    LexikonView.dataSource = self;
    LexikonView.delegate = self;
    [self.view addSubview:LexikonView];

    FilterView = [[UITableView alloc] initWithFrame:CGRectMake(0, 381, 320, 0) style:UITableViewStylePlain];
    //FilterView.dataSource = self;
    //FilterView.delegate = self;
    [self.view addSubview:FilterView];
}
return self;
}

(void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view from its nib

searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
searchBar.autocorrectionType = UITextAutocorrectionTypeYes;

searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:searchBar contentsController:self];

searchDisplayController.delegate = self;
searchDisplayController.searchResultsDataSource = self;

[LexikonView setTableHeaderView:searchBar];
} 
```

现在我只想让搜索栏再次工作（就像使用 uitableviewcontroller 一样）。如果我减小上部表格视图的大小，我只会看到空白空间。我在 IB 中添加了一个 UISearchBar，瞧，它就在那里，但没有调用委托方法。
是的，我希望搜索栏始终在表格视图的顶部可见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T11:08:01.337

我想你想要一个`TableView`总是`SearchBar`可见的，对吧？如果是这种情况，您只需将 a 添加`TableView`到 a`ViewController`并在顶部为`SearchBar`. 添加`SearchBar`独立的TableView。我有一篇文章展示了这是如何完成的，并且还为您提供了一些快速搜索`TableView`.

If this isn't what you are after, please be a little more specific in what your goals are here. Also please post the code you are using to try to accomplish what you are trying to do.

# android - Android 猴子在 Spinner 内触发 NullPointerException

> ID：12025966
> 
> 赞同：4
> 
> 时间：2012-08-19T10:57:50.527
> 
> 标签：android, android-monkey

我试图在我的代码中找到一些难以重现的问题。我使用了猴子工具。但在这里，问题似乎出在 Android 微调器内部。这是 API/框架问题吗？我再次尝试了相同的结果。

```
// CRASH: com.panguso.mobile.client (pid 11171)
// Short Msg: java.lang.NullPointerException
// Long Msg: java.lang.NullPointerException
// Build Label: google/soju/crespo:4.1.1/JRO03E/403059:user/release-keys
// Build Changelist: 403059
// Build Time: 1342214487000
// java.lang.NullPointerException
//  at android.widget.Spinner$DialogPopup.dismiss(Spinner.java:828)
//  at android.widget.Spinner$DialogPopup.onClick(Spinner.java:862)
//  at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:924)
//  at android.widget.AdapterView.performItemClick(AdapterView.java:298)
//  at android.widget.AbsListView.performItemClick(AbsListView.java:1086)
//  at android.widget.AbsListView.onKeyUp(AbsListView.java:2996)
//  at android.widget.ListView.commonKey(ListView.java:2196)
//  at android.widget.ListView.onKeyUp(ListView.java:2051)
//  at android.view.KeyEvent.dispatch(KeyEvent.java:2633)
//  at android.view.View.dispatchKeyEvent(View.java:7086)
//  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1354)
//  at android.widget.ListView.dispatchKeyEvent(ListView.java:2026)
//  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
//  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
//  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
//  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
//  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
//  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1892)
//  at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1369)
//  at android.app.Dialog.dispatchKeyEvent(Dialog.java:702)
//  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1819)
//  at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3575)
//  at android.view.ViewRootImpl.deliverKeyEvent(ViewRootImpl.java:3531)
//  at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3113)
//  at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4153)
//  at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4132)
//  at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4224)
//  at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
//  at android.view.InputEventReceiver.nativeConsumeBatchedInputEvents(Native Method)
//  at android.view.InputEventReceiver.consumeBatchedInputEvents(InputEventReceiver.java:163)
//  at android.view.ViewRootImpl.doConsumeBatchedInput(ViewRootImpl.java:4203)
//  at android.view.ViewRootImpl$ConsumeBatchedInputRunnable.run(ViewRootImpl.java:4243)
//  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
//  at android.view.Choreographer.doCallbacks(Choreographer.java:555)
//  at android.view.Choreographer.doFrame(Choreographer.java:523)
//  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
//  at android.os.Handler.handleCallback(Handler.java:615)
//  at android.os.Handler.dispatchMessage(Handler.java:92)
//  at android.os.Looper.loop(Looper.java:137)
//  at android.app.ActivityThread.main(ActivityThread.java:4745)
//  at java.lang.reflect.Method.invokeNative(Native Method)
//  at java.lang.reflect.Method.invoke(Method.java:511)
//  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
//  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
//  at dalvik.system.NativeStart.main(Native Method)
// 
** Monkey aborted due to error.
Events injected: 1801
:Sending rotation degree=0, persist=false
:Dropped: keys=5 pointers=0 trackballs=0 flips=0 rotations=0
## Network stats: elapsed time=17738ms (0ms mobile, 17738ms wifi, 0ms not connected)
** System appears to have crashed at event 1801 of 10000 using seed 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T12:08:25.203

您发布的堆栈跟踪没有提及您的代码中的任何类，这意味着这个问题至少不是由您直接引起的。

很少分析堆栈跟踪，从下到上，因为这是代码所采用的路径（可以使用[http://www.grepcode.com/?st=true](http://www.grepcode.com/?st=true)找到该堆栈跟踪的源代码）：

```
...
at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171) 
```

Monkey 发出一个键事件，就像你可以用软/硬键盘产生的一样。

然后将关键事件转发到包含您的应用内容和 ActionBar的[DecorView 。](https://developer.android.com/reference/android/view/Window.html#getDecorView())将`DecorView`事件转发到`Dialog`.

```
...
at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1819)
at android.app.Dialog.dispatchKeyEvent(Dialog.java:702) 
```

从这里通过视图层次结构，直到它到达`ListView`

```
at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
at android.widget.ListView.dispatchKeyEvent(ListView.java:2026)
at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1354)
at android.view.View.dispatchKeyEvent(View.java:7086)
at android.view.KeyEvent.dispatch(KeyEvent.java:2633)
at android.widget.ListView.onKeyUp(ListView.java:2051)
at android.widget.ListView.commonKey(ListView.java:2196) 
```

将`ListView`密钥转发到它的内容似乎是 a`Spinner`并且单击似乎触发 a`.dismiss()`到显示的`Dialog`（下拉列表）`Spinner`。

```
at android.widget.AbsListView.onKeyUp(AbsListView.java:2996)
at android.widget.AbsListView.performItemClick(AbsListView.java:1086)
at android.widget.AdapterView.performItemClick(AdapterView.java:298)
at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:924)
at android.widget.Spinner$DialogPopup.onClick(Spinner.java:862)
at android.widget.Spinner$DialogPopup.dismiss(Spinner.java:828) 
```

A`Spinner`和未提及您的代码的堆栈跟踪可能是系统 UI 的一部分，即 ActionBar。

[![例子](../Images/a07ceb0c8e0c09339eb7677aad9f1347.png)](https://i.stack.imgur.com/xvSPI.png)
[（来源：[android.com](http://developer.android.com/design/media/action_bar_pattern_spinner.png)）]

正如您在图片（[取自此处](https://material.io/components/app-bars-top/)）中看到的那样，下面有一个`Spinner`（显示日期）和`Dialog`一个`ListView`（日，周，...）。单击其中一项或微调器本身或外部某处将关闭对话框。

发生在以下`NullPointerException`代码中

```
public void dismiss() {
    mPopup.dismiss();  // Spinner.java:828
    mPopup = null;
} 
```

`mPopup`很明显`null`。仅当弹出窗口之前未显示时才会发生这种情况，因为它已设置

```
public void show() {
    AlertDialog.Builder builder = new AlertDialog.Builder(getContext());
    if (mPrompt != null) {
        builder.setTitle(mPrompt);
    }
    mPopup = builder.setSingleChoiceItems(mListAdapter,
            getSelectedItemPosition(), this).show();
} 
```

> 这是 API/框架问题吗？

我不知道，但猴子可以点击普通用户不一定能到达的东西，它可以点击用户无法点击的时间/速率。所以这个问题可能是由于API程序员没有预见/测试的方式点击造成的。是可能的，特别是因为堆栈跟踪是纯粹的框架，他们在其他地方而不是在这里检查`null`。`mPopup`

但除了这种可能性之外，它也可能与您的代码有关。也许您`Spinner`在布局（或 ActionBar）中添加了一个地方，并用它做一些不打算做的事情。而且我猜如果您不覆盖任何默认行为（尤其是关键事件处理），则框架不需要跳转到您的代码中并且会产生完全相同的堆栈跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T04:41:01.113

不幸的是，我的所有 Android 设备都遇到了同样的问题。[这个答案](https://stackoverflow.com/questions/12327369/nullpointerexception-from-spinner-java828-dismiss/12327635#12327635)中有一个假设，我想对此进行扩展：

> 但这是奇怪的部分。堆栈跟踪似乎是单击 mPopup 的项目时，因为 DialogPopup 设置为其 OnClickListener。因此，此时 mPopup 不应为空。但是当 DialogPopup.dismiss() 它是空的。
> 
> 这有什么可以解释的？这是我的假设。好吧，猴子通常很快。比实际用户更快。在第一个 DialogPopup.onClick() 真正解除 mPopup 之前，它可能能够单击两个项目。所以我们有两次调用 DialogPopup.dismiss()，第二次调用 NPE。

考虑到这个错误[仍然存​​在](http://code.google.com/p/android/issues/detail?id=39564)，我认为是时候想出解决这个问题的解决方案了。以下是我也注意到的一些事情：

1.  当我在模拟器上运行 monkeytester 时，它永远不会因为微调器空指针错误而崩溃。我相信这是真的，因为模拟器比 Android 设备慢很多，而且猴子测试器不能足够快地发出触摸事件以导致崩溃。

2.  当使用带有猴子测试器的 Android 设备时，使用相同的种子几乎总是会导致相同的崩溃。这是有道理的，因为设备将为每个种子接收相同的伪随机触摸事件。我不再使用 0 种子，因为它几乎总是在我的几次触摸事件后导致崩溃。

* * *

# 解决方法

从我所做的所有搜索来看，这个问题没有真正的解决方案。但是您可以采取一些措施来避免崩溃。

1.  使用模拟器进行持续时间超过几分钟的测试。模拟器的执行速度比实际设备慢很多，因此猴子测试器无法以足够快的速度发出命令以导致崩溃。如果您使用的是英特尔硬件加速器 (HAXM)，我建议您创建一个不使用它的 AVD。确保启用快照并禁用 GPU 加速，这样您就不必永远等待 AVD 启动。

2.  如果您想在实际设备上进行测试，请确保将`--throttle <millis>`参数传递给猴子测试器。这是文档中的定义：

    > 在事件之间插入固定延迟。您可以使用此选项来减慢猴子的速度。如果未指定，则没有延迟，并且事件会尽快生成。
    > 
    > *   [http://developer.android.com/tools/help/monkey.html](http://developer.android.com/tools/help/monkey.html)

这是使用的示例命令`--throttle`：

```
adb -s shell monkey --throttle 200 -p com.your.package -v 500000 
```

您应该尝试为您的设备找到最佳延迟。对于我的三星 Galaxy Nexus，延迟必须接近一秒才能防止崩溃。这不言而喻，但延迟的时间越长，完成猴子测试所需的时间就越长。这就是为什么找到一个设备不会崩溃但也不会超慢的值很重要的原因。

# android - 未知铬错误：-6

> ID：12025967
> 
> 赞同：4
> 
> 时间：2012-08-19T10:58:49.523
> 
> 标签：android, jquery, jquery-mobile, cordova

我正在使用 PhoneGap 和 jQuery Mobile 开发一个移动应用程序。当我调用一个包含调用的函数时，`$.get`我得到了可怕的`Unknown chromium error: -6`错误。

```
$.get(apiurl, {
    'action' : 'get_mobile_content',
    'request' : 'search_jobs'
}, function(data) {
    console.log("inside");
}, 'json'); 
```

我从来没有得到`console.log("inside")`. 请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T10:49:46.830

发现了问题。我真笨。但问题的实际技术细节`apiurl`是错误的 url，并且没有返回我猜的任何内容。一旦修复此问题以存储正确的 url，问题就解决了。

# c - 与c中的指针相关的问题

> ID：12025973
> 
> 赞同：1
> 
> 时间：2012-08-19T11:00:24.473
> 
> 标签：c, linux, pointers

```
#include<stdio.h>
int* check(int,int);

int main()
{
    int *c,t = 2;
    c = check(10,20);
    printf("t = %d\n",t);
    printf("c = %d\n",*c);

    return 0;

}

int* check(int i,int j)
{
    int *p,*q;

    p = &i;
    q = &j;

    if(i>=45)
       return (p);
    else
       return (q);
} 
```

我得到的代码输出为：

```
t = 2
c = 2 
```

为什么？因为根据概念返回给c的值是j地址，即*c的值是20，但是由于c的printf语句之前有一个printf语句，因此，*c的值应该是一些垃圾值作为堆栈被改变。

任何人都可以帮助我吗？请帮忙 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T11:08:54.963

[悬空指针](http://en.wikipedia.org/wiki/Dangling_pointer)就是这种情况。引用悬空指针是`Undefined`什么时候可以给出任何`unpredictable value`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T11:09:08.210

这是非常危险的编码

```
int *p,*q;

    p = &i;
    q = &j; 
```

i & j 两个值都在堆栈上，一旦检查程序结束，它们就会从内存中删除。

通过传递左值而不是右值以其他方式执行此操作（因为您想要返回指针）

```
#include<stdio.h>
    int* check(int*,int*);

    int main()
    {
        int *c,t = 2;int dummy=30;
        c = check(&t,&dummy);
        printf("t = %d\n",t);
        printf("c = %d\n",*c);

        return 0;

    }

    int* check(int *i,int *j)
    {

        if(*i>=45)
           return (i);
        else
           return (j);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T11:07:09.623

编辑：在我的 gcc C 上被破坏了 :) 所以你很幸运。只是不要在生产中这样做:)
实际上 gcc -O3 表现出无堆栈更改行为，而 gcc 更改堆栈。所以“未定义的行为”。

# html - 如何使侧边栏适合窗口和谷歌地图以适合屏幕的其余部分？

> ID：12025976
> 
> 赞同：0
> 
> 时间：2012-08-19T11:01:10.773
> 
> 标签：html, css, google-maps-api-3

这是我正在处理的网站的链接：http: [//thoughtfi.com/practiceIMR3.html](http://thoughtfi.com/practiceIMR3.html)

我试图让侧边栏延长浏览器窗口的长度，宽度约为 200 像素，然后让地图填充浏览器窗口的其余部分。我花了很多时间弄乱css来让它工作，但没有任何运气。当我将地图 div 的 css 设置为屏幕的一部分时，它会切掉大部分地图。当我将滚动条的长度设置为 100% 时，它包含所有信息，并且没有单独的滚动条来扩展页面的长度。

这是我的css目前的样子：

```
<style type="text/css">
html, body, #map_canvas {
    width:   800px;
    height:  600px;
}
#sidebar {
    width:200px;
    height:600px;
    overflow:auto;
}
</style> 
```

这是我身体的重要部位：

```
<body onload="initialize_page()" style = "height:100%; margin:0">
    <button onclick="hide_markers_kml();">hide</button>
    <button onclick="unhide_markers_kml();">unhide</button>

    <table style="width:100%;">
        <tr>
            <td>
                  <div id="sidebar"></div>
            </td>
            <td>
                  <div id="map_canvas"></div>
            </td>
        </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:33:26.080

`TABLE`尝试使用绝对定位，而不是使用for 布局。例如，看我的小提琴，[一个简单的 100% 布局](http://jsfiddle.net/thirdender/Bn5Lt/3/)。诀窍是绝对定位侧边栏和内容，指定`left`、`top`、`right`或`bottom`属性，并让浏览器在需要时自动计算宽度和高度。

在演示中，我将侧边栏设置为`left: 0; width: 200px;`，内容设置为`left: 200px; right: 0;`. 这会创建一个 200px 宽的侧边栏区域，并且浏览器会为内容区域计算页面的剩余宽度。

# java - Android 如何设置列表 在列表视图中

> ID：12025978
> 
> 赞同：0
> 
> 时间：2012-08-19T11:01:22.053
> 
> 标签：java, android, shell

请这是我的代码，但它不能正常工作，我不确定问题出在哪里！有什么可以帮忙的！我正在尝试这个！

```
List<String> array= new ArrayList<String>();
    array.add("Some Text");
    array.add("Some Text");
    array.add("Some Text");

    ListView listView=(ListView)findViewById(R.id.listViews);
    ArrayAdapter<String> mHistory = new ArrayAdapter<String>(this,android.R.layout.simple_expandable_list_item_2, array);
    listView.setAdapter(mHistory); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T11:24:35.383

不要使用`simple_expandable_list_item_2`布局。您应该`simple_list_item_1`改用。

```
ListView listView=(ListView)findViewById(R.id.listViews);
    ArrayAdapter<String> mHistory = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, array)
    listView.setAdapter(mHistory); 
```

# java - RadioButton 无法正常工作

> ID：12025980
> 
> 赞同：0
> 
> 时间：2012-08-19T11:01:41.617
> 
> 标签：java, android

有人可以看看下面的内容并尝试解释我所缺少的吗？我之前在应用程序中使用过以下方法，并且效果很好。我确定它是我错过的一些愚蠢的东西，并且很想找人来看看它......

我输入风量和压力，然后单击我的 RadioButton ForwardCBD。这应该会产生双重力量，然后应该将其输出到屏幕上，但会导致应用程序崩溃。

有任何想法吗？

```
EditText AirVolume, Pressure,FCBD,BCBD,BCDD;
TextView Power;
RadioGroup Fans;
RadioButton ForwardCBD, BackwardCBD, BackwardCDD;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.car);

    AirVolume=(EditText)findViewById(R.id.AirVolume);
    Pressure=(EditText)findViewById(R.id.Pressure);

    Power=(TextView)findViewById(R.id.Power);

    ForwardCBD=(RadioButton)findViewById(R.id.ForwardCBD);
    BackwardCBD=(RadioButton)findViewById(R.id.BackwardCBD);
    BackwardCDD=(RadioButton)findViewById(R.id.BackwardCDD);

    Fans=(RadioGroup)findViewById(R.id.Fans);
    Fans.setOnCheckedChangeListener(this);

}   

public void onCheckedChanged(RadioGroup Fans, int aplication) {

    if (aplication==R.id.ForwardCBD){

        double airVolume = Double.parseDouble(AirVolume.getText().toString());
        double pressure = Double.parseDouble(Pressure.getText().toString());
        double fCBD = Double.parseDouble(FCBD.getText().toString());        
        double power = (airVolume * pressure) / (fCBD /100);
        DecimalFormat df = new DecimalFormat();
        Power.setText(df.format(power)+("W"));

    }
    if (aplication==R.id.BackwardCBD){

        double airVolume = Double.parseDouble(AirVolume.getText().toString());
        double pressure = Double.parseDouble(Pressure.getText().toString());
        double bCBD = Double.parseDouble(BCBD.getText().toString());        
        double power = (airVolume * pressure) / (bCBD /100);
        DecimalFormat df = new DecimalFormat();
        Power.setText(df.format(power)+("W"));

    }
    if (aplication==R.id.BackwardCDD){
        double airVolume = Double.parseDouble(AirVolume.getText().toString());
        double pressure = Double.parseDouble(Pressure.getText().toString());
        double bCDD = Double.parseDouble(BCDD.getText().toString());        
        double power = (airVolume * pressure) / (bCDD /100);
        DecimalFormat df = new DecimalFormat();
        Power.setText(df.format(power)+("W"));
    }

}   
} 
```

请参阅下面的 LogCat。

不太确定如何在这里以体面的格式呈现它，所以提前抱歉！

```
08-19 12:10:24.576: E/AndroidRuntime(11733): FATAL EXCEPTION: main
08-19 12:10:24.576: E/AndroidRuntime(11733): java.lang.NullPointerException
08-19 12:10:24.576: E/AndroidRuntime(11733):    at com.test.will.CarSystems.onCheckedChanged(CarSystems.java:46)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at android.widget.RadioGroup.setCheckedId(RadioGroup.java:172)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at android.widget.RadioGroup.access$600(RadioGroup.java:52)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at android.widget.RadioGroup$CheckedStateTracker.onCheckedChanged(RadioGroup.java:342)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at android.widget.CompoundButton.setChecked(CompoundButton.java:128)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at android.widget.CompoundButton.toggle(CompoundButton.java:87)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at android.widget.RadioButton.toggle(RadioButton.java:75)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at android.widget.CompoundButton.performClick(CompoundButton.java:99)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at android.view.View$PerformClick.run(View.java:14400)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at android.os.Handler.handleCallback(Handler.java:605)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at android.os.Looper.loop(Looper.java:154)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at android.app.ActivityThread.main(ActivityThread.java:4945)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at java.lang.reflect.Method.invokeNative(Native Method)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at java.lang.reflect.Method.invoke(Method.java:511)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-19 12:10:24.576: E/AndroidRuntime(11733):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:17:26.430

您在哪里为 FCBD、BCBD、BCDD 分配了组件；这可能是空指针。

你的呼唤

```
double fCBD = Double.parseDouble(FCBD.getText().toString()); 
```

但是您在哪里定义/分配了 FCBD 即

```
FCBD=(EditText)findViewById(R.id.FCBD); 
```

否则，在调试模式下单步执行，您会发现您的一个属性为空，您试图调用一个方法。

# c++ - 一个比较奇怪的现象 Excel MFC ADO 数据库编程

> ID：12025985
> 
> 赞同：1
> 
> 时间：2012-08-19T11:02:31.133
> 
> 标签：c++, sql, sql-server, windows, visual-studio-2010

现在我正在使用 MFC Ado 数据库编程处理 Excel。我已成功连接到 Excel。

但我发现当我连接到现有的 Excel 文件时，Excel 文件包含标题名称。但是，Excel中的内容是输入的，而不是使用Ado SQL插入的。结果是我收到错误消息：找不到指定的对象。我确定指定的工作表名称拼写正确。

当我使用 Ado SQL 插入数据时，我可以成功执行 SAME SQL。事实上，用 ADO SQL 插入到 Excel 中的数据和我之前输入的完全一样。

用 ADO SQL 不能查询类型化的数据？我想知道我错过了什么重要的东西？

我不知道为什么会这样。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T02:21:45.807

我发现了问题。

事实上，我确实在拼写工作表名称时犯了错误，工作表名称应该附加一个符号'$'。只是'$'符号卡住了我。

例如，如果显示工作表名称为“Demo”，则 SQL 中的工作表名称应为“Demo$”。

最终正确的 SQL 是 *

```
Select * from [Demo$] 
```

# javascript - JSON3 中的 Facebook xd_arbiter.php 错误

> ID：12025987
> 
> 赞同：9
> 
> 时间：2012-08-19T11:02:37.437
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我们最近开始从 facebook 的文件中收到错误`xd_arbiter.php`，我不记得我们所做的任何更改，所以我开始认为问题出在 facebook。

此错误发生在 firefox 14.0.1 中，（chrome、safari、opera（最新版本））似乎工作正常。

该项目是一个 facebook 连接站点，我们正在使用 js api。我们基本上使用与 facebook 提供的相同代码。

[http://developers.facebook.com/docs/guides/web/#login](http://developers.facebook.com/docs/guides/web/#login)

仅当用户在进入我们的网站之前登录到 Facebook 时才会发生该错误。在 all.js 文件的异步加载之后，我们得到了这个错误。

```
JSON.parse: bad control character in string literal 
```

在`xd_arbiter.php?version=10`. 这是在调用 FB.init 方法之前。

我看到了这个帖子，但这并没有多大帮助，是吗..

[如何避免指向 http://static.ak.facebook.com/connect/xd_arbiter.php 的链接无限期挂起](https://stackoverflow.com/questions/10590850/how-to-avoid-links-to-http-static-ak-facebook-com-connect-xd-arbiter-php-hangi)

任何人都可以确认他们也遇到了这个问题，并确认问题出在 facebook 上。？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T19:10:01.297

我有一个类似的问题，但从`all.js`昨天（10/2/2012）开始在我的 Firebug 调试中。我在 Mac Lion 上的 Firefox 15.0.1 上测试 Firebug 1.10.3。

Firebug 在以下位置显示此 Javascript 错误`all.js`：

```
JSON.parse: bad control character in string literal 
You can disable/enable break notifications in panel's tab menu.

Line 17:  (line 17 is super long - so I'm not putting it in here.  
          Somewhere in all.js:17 is a bad-control character I guess) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T23:42:41.560

这是一个受控错误，用于对 JSON 实现进行功能测试。如果您查看源代码，它会被 try/catch 捕获，因此不应该有任何后果。那

Chrome 有两种调试模式，一种会在所有错误上停止，另一种只会在未捕获的错误上停止 - Firebug 没有类似的东西吗？

# django - Facebook - 通过 API 获取用户名

> ID：12025988
> 
> 赞同：-1
> 
> 时间：2012-08-19T11:02:38.367
> 
> 标签：django, facebook-graph-api

如果我做

```
https://graph.facebook.com/user-id 
```

完整的 JSON 响应是：

```
{
  "id": "525190867", 
  "name": "Syed Saqlain", 
  "first_name": "Syed", 
  "last_name": "Saqlain", 
  "link": "https://www.facebook.com/syed.saqlain.77", 
  "username": "syed.saqlain.77", 
  "birthday": "08/14/1985", 
  "locale": "en_US", 
  "updated_time": "2012-06-04T23:23:57+0000"
} 
```

如果我只想在 jinja 模板上获取名称，有没有办法只获取全名而不解析 JSON 数据包？

例如：

```
https://graph.facebook.com/user-id/name/ 
```

我正在使用 python-django，顺便说一句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:27:17.847

您可以通过请求限制结果

```
https://graph.facebook.com/USER_ID?fields=name 
```

但是您仍然会得到一个需要解析的[JSON对象。](http://en.wikipedia.org/wiki/JSON)

# c++ - 将中缀转换为使用 N 位数字后修复计算？

> ID：12025993
> 
> 赞同：0
> 
> 时间：2012-08-19T11:04:40.160
> 
> 标签：c++

我刚刚将中缀转换为后缀并用一位数字进行计算，但我无法转换为后缀并用 N 位进行计算。可能有人帮我解决这个问题！非常感谢 ：-）

这是我的个位数代码

字符堆栈.h

```
#define MAX 100
typedef struct
{
    int top;
    char a[MAX];
} CHARACTER_STACK;

void Initialize(CHARACTER_STACK &stack);
bool IsEmpty(CHARACTER_STACK stack);
bool IsFull(CHARACTER_STACK stack);
bool Push(CHARACTER_STACK &stack, char x);
char Pop(CHARACTER_STACK &stack);
char GetTop(CHARACTER_STACK stack);
void Display(CHARACTER_STACK stack); 
```

整数堆栈.h

```
#define MAX 100
typedef struct
{
    int top;
    int a[MAX];
} INTEGER_STACK;

void Initialize(INTEGER_STACK &stack);
bool IsEmpty(INTEGER_STACK stack);
bool IsFull(INTEGER_STACK stack);
bool Push(INTEGER_STACK &stack, int x);
int Pop(INTEGER_STACK &stack);
int GetTop(INTEGER_STACK stack);
void Display(INTEGER_STACK stack); 
```

波兰符号.h

```
#include "string"
using namespace std;
string Infix2Postfix(string infix);
int CalcPostfix(string postfix); 
```

字符堆栈.cpp

```
#include "CharacterStack.h"
#include "iostream"
using namespace std;

void Initialize(CHARACTER_STACK &stack)
{
    stack.top = 0;
}

bool IsEmpty(CHARACTER_STACK stack)
{
    if (stack.top == 0)
        return true;
    return false;
}

bool IsFull(CHARACTER_STACK stack)
{
    if (stack.top == MAX)
        return true;
    return false;
}

bool Push(CHARACTER_STACK &stack, char x)
{
    if ( !IsFull(stack) )
    {
        stack.a[stack.top] = x;
        stack.top++;
        return true;
    }
    return false;
}

char Pop(CHARACTER_STACK &stack)
{
    if ( !IsEmpty(stack) )
    {
        stack.top--;
        return stack.a[stack.top];
    }
    return NULL;
}

char GetTop(CHARACTER_STACK stack)
{
    if ( !IsEmpty(stack) )
    {
        return stack.a[stack.top-1];
    }
    return NULL;
}

void Display(CHARACTER_STACK stack)
{
    cout << "Stack characters: ";
    if ( !IsEmpty(stack) )
    {
        for (int i = stack.top - 1; i >= 0; i--)
            cout << stack.a[i] << " ";
        cout << endl;
    }
    else
    {
        cout << "is EMPTY !!!" << endl;
    }
} 
```

整数堆栈.cpp

```
#include "IntegerStack.h"
#include "iostream"
using namespace std;

void Initialize(INTEGER_STACK &stack)
{
    stack.top = 0;
}

bool IsEmpty(INTEGER_STACK stack)
{
    if (stack.top == 0)
        return true;
    return false;
}

bool IsFull(INTEGER_STACK stack)
{
    if (stack.top == MAX)
        return true;
    return false;
}

bool Push(INTEGER_STACK &stack, int x)
{
    if ( !IsFull(stack) )
    {
        stack.a[stack.top] = x;
        stack.top++;
        return true;
    }
    return false;
}

int Pop(INTEGER_STACK &stack)
{
    if ( !IsEmpty(stack) )
    {
        stack.top--;
        return stack.a[stack.top];
    }
    return NULL;
}

int GetTop(INTEGER_STACK stack)
{
    if ( !IsEmpty(stack) )
    {
        return stack.a[stack.top-1];
    }
    return NULL;
}

void Display(INTEGER_STACK stack)
{
    cout << "Stack integers: ";
    if ( !IsEmpty(stack) )
    {
        for (int i = stack.top - 1; i >= 0; i--)
            cout << stack.a[i] << " ";
        cout << endl;
    }
    else
    {
        cout << "is EMPTY !!!" << endl;
    }
} 
```

波兰符号.cpp

```
 #include "string"
    #include "limits"
    using namespace std;
    #include "CharacterStack.h"
    #include "IntegerStack.h"
    #include "TemplateStack.cpp"
    #include "stack"

    int Precedence(char operatorr)
    {
        if (operatorr == '+' || operatorr == '-') return 1;
        if (operatorr == '/' || operatorr == '*' || operatorr == '%') return 2;
        return 0;
    }

    bool IsOperand(char operand)
    {
        if (operand >= '0' && operand <= '9')
            return true;
        return false;
    }

    string Infix2Postfix(string infix)
    {
        string postfix = "";

        //CHARACTER_STACK stack;
        STACK<char> stack; // using template
        Initialize(stack);
        string temp;
        //char ch;
        // step 1
        for (int i = 0 ; i < infix.length(); i++)
        {
            char item = infix[i];
            //
            if (IsOperand(item)) // step 1.1
                postfix += item;
            else if (item == '(') // step 1.2
                Push(stack, item);
            else if (item == ')') // step 1.3
            {
                char x;
                while ( (x = Pop(stack)) != '(' )
                    postfix += x;
            }
            else // step 1.4
            {
                while ( !IsEmpty(stack) && Precedence(GetTop(stack)) >= Precedence(item) )
                {
                    postfix += Pop(stack);
                }
                Push(stack, item);
            }
            //Display(stack); // for DEBUG
        }
        // step 2
        char x;
        while ( (x = Pop(stack)) != NULL )
            postfix += x;

        return postfix;
    }

    int CalcPostfix(string postfix)
    {
        int result = 0;

        //INTEGER_STACK stack;
        STACK<int> stack; // using template
        Initialize(stack);

        // step 1
        for (int i = 0 ; i < postfix.length(); i++)
        {
            char item = postfix[i];

            if (IsOperand(item)) // step 1.1
            {
                int x = item - '0';
                Push(stack, x);
            }
            else // step 1.2
            {
                int x = Pop(stack);
                int y = Pop(stack);

                int z = numeric_limits<int>::min(); // minimum value
                if (item == '+') z = y + x;
                else if (item == '-') z = y - x;
                else if (item == '*') z = y * x;
                else if (item == '/') z = y / x;
                else if (item == '%') z = y % x;
                Push(stack, z);
            }
            //Display(stack); // for DEBUG
        }
        // step 2
        result = GetTop(stack);

        return result;
    } 
```

模板堆栈.cpp

```
#include "iostream"
using namespace std;

#define MAX 100

template<class T>
struct STACK
{
    int top;
    T a[MAX];
};

template<class T>
void Initialize(STACK<T> &stack)
{
    stack.top = 0;
}

template<class T>
bool IsEmpty(STACK<T> stack)
{
    if (stack.top == 0)
        return true;
    return false;
}

template<class T>
bool IsFull(STACK<T> stack)
{
    if (stack.top == MAX)
        return true;
    return false;
}

template<class T>
bool Push(STACK<T> &stack, T x)
{
    if ( !IsFull(stack) )
    {
        stack.a[stack.top] = x;
        stack.top++;
        return true;
    }
    return false;
}

template<class T>
T Pop(STACK<T> &stack)
{
    if ( !IsEmpty(stack) )
    {
        stack.top--;
        return stack.a[stack.top];
    }
    return NULL;
}

template<class T>
T GetTop(STACK<T> stack)
{
    if ( !IsEmpty(stack) )
    {
        return stack.a[stack.top-1];
    }
    return NULL;
}

template<class T>
void Display(STACK<T> stack)
{
    cout << "Stack members: ";
    if ( !IsEmpty(stack) )
    {
        for (int i = stack.top - 1; i >= 0; i--)
            cout << stack.a[i] << " ";
        cout << endl;
    }
    else
    {
        cout << "is EMPTY !!!" << endl;
    }
} 
```

主文件

```
#include "PolishNotation.h"
#include "string"
#include "iostream"
using namespace std;
  void main()
    {
        string infix ;
        cout<<"insert infix ";
        cin>>infix;
        cout << "infix = " << infix << endl;

        string postfix = Infix2Postfix(infix);
        cout << "postfix = " << postfix << endl;

        int result = CalcPostfix(postfix);
        cout << "result = " << result << endl;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:20:24.620

在下面检查 IsOperand：

```
 if (IsOperand(item)) // step 1.1
    {
        int x = item - '0';
        Push(stack, x);
    } 
```

在你检查它是一个数字之后，你会想尽可能多地阅读，尝试：

```
if (IsOperand(item)) // step 1.1
{
  int x;
  sscanf(infix.c_str()+i,"%d",&x); // read x in
  Push(stack, x);
  while ( i+1 < infix.length() // guard to stop reading past end of string
     && IsOperand(infix[i+1]) ) i++; // increment i until integer read completely
} 
```

以上可能是更改代码以支持多位整数的最简单/最短的方法（编码方式）。

请务必`#include <cstdio>`使用 sscanf。

同样在空格的情况下，在：

```
 // step 1
    for (int i = 0 ; i < postfix.length(); i++)
    {
        char item = postfix[i]; 
```

将其更改为

```
 while (postfix[i]==' ') i++; // get rid of spaces
    // step 1
    for (int i = 0 ; i < postfix.length(); i++)
    {
        char item = postfix[i];

        .... // other code in for loop

        while (postfix[i]==' ') i++; // get rid of spaces
    } 
```

# java - 许多类使用一个对象，但对它有不同的看法

> ID：12025994
> 
> 赞同：2
> 
> 时间：2012-08-19T11:04:44.577
> 
> 标签：java, design-patterns, interface, readonly

对不起标题，我想不出一个更自我描述的。

在我正在开发的独立应用程序（这是一项大学作业）中，我面临着这个问题：
我的实体（或模型对象或业务对象等）只不过是 POJO。

自然会有（将有）许多类使用它们，但其中一些类不应该被允许修改它们的值（例如使用它们的设置器）；我们可以说我需要将一个对象传递给具有不同权限的不同类：对某些类只读，对允许修改对象状态的其他类读写。

一个例子是一个只显示对象信息的 GUI 窗口：我想确保这个类完全不知道如何修改对象的状态。

我阅读了很多相关问题（只读接口、只读实现、防御性副本等）的主题，但我没有找到适合我的情况的任何内容。

假设我只想将**对象的 setter 方法的访问权限授予特定的类**，但我找不到实现此目的的方法。

我最初认为接口会很好（例如`ReadOnlyObject`，使用 getter 和`WriteOnlyObject`setter 并`Object`实现它们），但问题是`WriteOnlyObject`任何使用`ReadOnlyObject`. 除此之外，我不相信只用 getter 或 setter 编写接口是一个好习惯。

请帮忙！@_@

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T01:23:42.277

OOP 就是遵守合同。如果一个方法的契约声明它不会修改一个对象，即使它可以修改它也不应该这样做——如果是这样，那就是一个错误。将业务对象直接传递给 GUI 并没有错。

当然，您应该尽可能将类设计为不可变的，但大多数业务对象都不是不可变的，试图解决这个问题会导致笨拙的解决方案。如果您仍然担心暴露 setter，最好的解决方案是创建一个包含原始值副本的不可变传输对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T01:50:08.537

对于给定的 pojo，将其称为“客户”，您应该创建两个接口。创建一个名为 ICustomerRO 的接口，它只有 getter 方法。创建一个名为 ICustomer 的接口，该接口扩展了 ICustomerRO 并添加了 setter 方法。最后，使用功能齐全的 getter 和 setter 方法创建您的 pojo，并实现 ICustomer。

当然，您可以使用任何您喜欢的命名约定。

在您的代码中，无论您在何处创建对 pojo 具有只读访问权限的方法，请务必将参数键入为 ICustomerRO。当您有一个应该对 pojo 具有读写访问权限的方法时，将参数键入为 ICustomer。无论哪种情况，都传入一个 Customer 对象。这使您可以控制谁可以访问哪些方法，并利用 java 编辑器仅显示适合使用上下文的方法的能力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T11:27:17.827

使您的模型接口并分发只读实现 - 即在设置器中抛出 UnsupportedOperationException 的那些，类似于`Collections.unmodifiableXXX()`那些具有只读权限的进程。

诀窍是知道哪些调用者有什么权限。不要让 pojo 知道/决定。使用某种可以注册谁是谁以及谁获得什么样的副本的工厂类。

# c# - WPF中重叠的GridView和Canvas

> ID：12025996
> 
> 赞同：0
> 
> 时间：2012-08-19T11:05:06.797
> 
> 标签：c#, wpf

我有一个`Canvas`and a`GridView`我要添加多个`Rectangle`and `Images`。我想要的是矩形和图像重叠并作为一个显示。

我为矩形和图像编写了几乎相同的代码，但出于某种原因，我没有将它们放在一起。

这是代码：

```
 for (int i = 0; i < 8; i++)
        {
            for (int j = 0; j < 8; j++)
            {

                rect = new Rectangle();

                rect.Height = canvas1.Height / 8;
                rect.Width = canvas1.Width / 8;

                th = new Thickness((i * canvas1.Height / 8) + 10, (j * canvas1.Width / 8) + 10, 0, 0);
                rect.Margin = th;

                rect.Visibility = Visibility.Visible;
                canvas1.Children.Add(rect);
             }
         } 
```

类似的是 Image 的代码，但使用的是 Grid 而不是 canvas1。我应该做哪些更改以使图像与矩形重叠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:22:51.297

您也许应该定义一个 Grid 具有 8 行和列，然后为您的矩形和图像设置行和列索引：

```
<Grid Name="grid">
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
        <ColumnDefinition/>
        <ColumnDefinition/>
        <ColumnDefinition/>
        <ColumnDefinition/>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition/>
        <RowDefinition/>
        <RowDefinition/>
        <RowDefinition/>
        <RowDefinition/>
        <RowDefinition/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <Rectangle Grid.Column="0" Grid.Row="0" Fill="Red"/>
    <Image Grid.Column="0" Grid.Row="0" Name="image00" />
    ... more rectangles and images ...
</Grid> 
```

您可以选择设置`Width`每个 ColumnDefinition 的 和`Height`每个 RowDefinition 的 。

如果您需要将控件动态添加到 Grid，您可以这样做：

```
Image image = ...
int column = ...
int row = ...
Grid.SetColumn(image, column);
Grid.SetRow(image, row);
grid.Children.Add(image); 
```

* * *

此外，为了您的信息，Canvas 提供了[Left](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.left%28v=vs.100%29)、[Top](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.top%28v=vs.100%29)、[Right](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.right%28v=vs.100%29)和[Bottom](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.bottom%28v=vs.100%29)属性来排列其子项。您通常不会像在代码中那样设置边距，而是设置`Left`and `Top`：

```
Canvas.SetLeft(child, left);
Canvas.SetTop(child, top); 
```

# java - JPA（休眠）与列表创建有序的一对多关系

> ID：12025997
> 
> 赞同：1
> 
> 时间：2012-08-19T11:05:54.287
> 
> 标签：java, hibernate, jpa, one-to-many

我正在尝试使用 JPA 2（使用 Hibernate）与有序多端（使用 List）建立双向关系。

基于以下问题报告的问题`@OneToMany(mappedBy`：
[Hibernate 3.5 中的 JPA 2.0 @OrderColumn 注释](https://stackoverflow.com/questions/2956171/jpa-2-0-ordercolumn-annotation-in-hibernate-3-5)
和
[https://hibernate.onjira.com/browse/HHH-5732](https://hibernate.onjira.com/browse/HHH-5732)

我尝试了不同的方法，建议在：http:
[//josian.wordpress.com/2006/09/09/hibernate-annotations-bidirectional-one-to-many/](http://josian.wordpress.com/2006/09/09/hibernate-annotations-bidirectional-one-to-many/)

但是，在持久化数据时，我遇到了异常。

考虑以下实体类：

```
@Entity
public class Schedule implements Serializable {
    private List<Presentation> presentations;
    private String name = null;

    ...

    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval = true)
    @JoinColumn (name = "SCHEDULE_NAME")
    @IndexColumn(name = "PRESENTATION_POSITION")
    public List<Presentation> getPresentations() {
        return presentations;
    }

    @Id
    @NotNull
    @Index(name = "ScheduleNameIdx")
    @Column(name = "SCHEDULE_NAME")
    public String getName() {
        return name;
    }

...
}

@Entity
public class Presentation implements Serializable {
    private Long id;
    private Schedule schedule;

    ...

    @Id
    @GeneratedValue
    @Index(name = "PresentationIdIdx")
    @Column(name = "PRESENTATION_ID")
    public Long getId() {
        return id;
    }

    @ManyToOne(optional = false)
    @JoinColumn(name="SCHEDULE_NAME", nullable = false, updatable = false, insertable = false)
    public Schedule getSchedule() {
        return schedule;
    }
...
} 
```

我得到的例外是：

```
07:39:43.265 [12937429@qtp-9708927-7] DEBUG o.h.util.JDBCExceptionReporter - could not insert: [com.google.code.yourpresenter.entity.Presentation] [insert into Presentation (PRESENTATION_ID, bgImage_id, media_id, name, song_id) values (default, ?, ?, ?, ?)]
java.sql.SQLIntegrityConstraintViolationException: integrity constraint violation: NOT NULL check constraint; SYS_CT_10066 table: PRESENTATION column: SCHEDULE_NAME
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source) ~[hsqldb-2.2.6.jar:2.2.6]
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source) ~[hsqldb-2.2.6.jar:2.2.6]
    at org.hsqldb.jdbc.JDBCPreparedStatement.fetchResult(Unknown Source) ~[hsqldb-2.2.6.jar:2.2.6]
    at org.hsqldb.jdbc.JDBCPreparedStatement.executeUpdate(Unknown Source) ~[hsqldb-2.2.6.jar:2.2.6]
    at org.hibernate.id.IdentityGenerator$GetGeneratedKeysDelegate.executeAndExtract(IdentityGenerator.java:94) ~[hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:57) ~[hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2345) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2852) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.action.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:71) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:320) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:203) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:129) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.ejb.event.EJB3MergeEventListener.saveWithGeneratedId(EJB3MergeEventListener.java:62) [hibernate-entitymanager-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.event.def.DefaultMergeEventListener.saveTransientEntity(DefaultMergeEventListener.java:415) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.event.def.DefaultMergeEventListener.mergeTransientEntity(DefaultMergeEventListener.java:341) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.event.def.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:303) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.event.def.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:258) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.impl.SessionImpl.fireMerge(SessionImpl.java:877) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.impl.SessionImpl.merge(SessionImpl.java:859) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.engine.CascadingAction$6.cascade(CascadingAction.java:279) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:392) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:335) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:204) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.engine.Cascade.cascadeCollectionElements(Cascade.java:425) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.engine.Cascade.cascadeCollection(Cascade.java:362) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:338) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:204) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.engine.Cascade.cascade(Cascade.java:161) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.event.def.DefaultMergeEventListener.cascadeOnMerge(DefaultMergeEventListener.java:630) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.event.def.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:490) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.event.def.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:255) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.event.def.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:84) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.impl.SessionImpl.fireMerge(SessionImpl.java:867) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.impl.SessionImpl.merge(SessionImpl.java:851) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.impl.SessionImpl.merge(SessionImpl.java:855) [hibernate-core-3.6.7.Final.jar:3.6.7.Final]
    at org.hibernate.ejb.AbstractEntityManagerImpl.merge(AbstractEntityManagerImpl.java:686) [hibernate-entitymanager-3.6.7.Final.jar:3.6.7.Final]
    at sun.reflect.GeneratedMethodAccessor20.invoke(Unknown Source) ~[na:na]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ~[na:1.6.0_15]
    at java.lang.reflect.Method.invoke(Method.java:597) ~[na:1.6.0_15]
    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240) [spring-orm-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at $Proxy34.merge(Unknown Source) [na:na]
    at com.google.code.yourpresenter.service.ScheduleServiceImpl.persist(ScheduleServiceImpl.java:71) [classes/:na]
    at com.google.code.yourpresenter.service.ScheduleServiceImpl.addPresentation(ScheduleServiceImpl.java:122) [classes/:na]
    at com.google.code.yourpresenter.service.ScheduleServiceImpl$$FastClassByCGLIB$$52d414d3.invoke(<generated>) [cglib-2.2.2.jar:na]
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204) [cglib-2.2.2.jar:na]
    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689) [spring-aop-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) [spring-aop-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155) [spring-tx-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) [spring-aop-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110) [spring-tx-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) [spring-aop-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622) [spring-aop-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at com.google.code.yourpresenter.service.ScheduleServiceImpl$$EnhancerByCGLIB$$9dfe2fc9.addPresentation(<generated>) [cglib-2.2.2.jar:na]
    at com.google.code.yourpresenter.view.ScheduleView.dropped(ScheduleView.java:154) [classes/:na]
    at com.google.code.yourpresenter.view.ScheduleView.dropped(ScheduleView.java:92) [classes/:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.6.0_15]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) ~[na:1.6.0_15]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ~[na:1.6.0_15]
    at java.lang.reflect.Method.invoke(Method.java:597) ~[na:1.6.0_15]
    at com.sun.el.parser.AstValue.invoke(AstValue.java:187) [jsp-2.1-glassfish-2.1.v20091210.jar:na]
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297) [jsp-2.1-glassfish-2.1.v20091210.jar:na]
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at org.richfaces.event.MethodExpressionDropListener.processDrop(MethodExpressionDropListener.java:45) [richfaces-components-ui-4.2.2.Final.jar:4.2.2.Final]
    at org.richfaces.event.DropEvent.processListener(DropEvent.java:69) [richfaces-components-api-4.2.2.Final.jar:4.2.2.Final]
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769) [jsf-api-2.1.0.jar:2.1.0-FCS]
    at org.richfaces.component.AbstractDropTarget.broadcast(AbstractDropTarget.java:123) [richfaces-components-ui-4.2.2.Final.jar:4.2.2.Final]
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794) [jsf-api-2.1.0.jar:2.1.0-FCS]
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259) [jsf-api-2.1.0.jar:2.1.0-FCS]
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:409) [jsf-api-2.1.0.jar:2.1.0-FCS]
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1221) [jetty-6.1.26.jar:6.1.26]
    at com.google.code.yourpresenter.filter.ScheduleSelectedFilter.doFilter(ScheduleSelectedFilter.java:47) [classes/:na]
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) [spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) [spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212) [jetty-6.1.26.jar:6.1.26]
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88) [spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) [spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.jetty.Server.handle(Server.java:326) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:945) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410) [jetty-6.1.26.jar:6.1.26]
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) [jetty-util-6.1.26.jar:6.1.26]
Caused by: org.hsqldb.HsqlException: integrity constraint violation: NOT NULL check constraint; SYS_CT_10066 table: PRESENTATION column: SCHEDULE_NAME
    at org.hsqldb.error.Error.error(Unknown Source) ~[hsqldb-2.2.6.jar:2.2.6]
    at org.hsqldb.Table.enforceRowConstraints(Unknown Source) ~[hsqldb-2.2.6.jar:2.2.6]
    at org.hsqldb.Table.insertSingleRow(Unknown Source) ~[hsqldb-2.2.6.jar:2.2.6]
    at org.hsqldb.StatementDML.insertRowSet(Unknown Source) ~[hsqldb-2.2.6.jar:2.2.6]
    at org.hsqldb.StatementInsert.getResult(Unknown Source) ~[hsqldb-2.2.6.jar:2.2.6]
    at org.hsqldb.StatementDMQL.execute(Unknown Source) ~[hsqldb-2.2.6.jar:2.2.6]
    at org.hsqldb.Session.executeCompiledStatement(Unknown Source) ~[hsqldb-2.2.6.jar:2.2.6]
    at org.hsqldb.Session.execute(Unknown Source) ~[hsqldb-2.2.6.jar:2.2.6]
    ... 96 common frames omitted
07:39:43.265 [12937429@qtp-9708927-7] WARN  o.h.util.JDBCExceptionReporter - SQL Error: -10, SQLState: 23502
07:39:43.265 [12937429@qtp-9708927-7] ERROR o.h.util.JDBCExceptionReporter - integrity constraint violation: NOT NULL check constraint; SYS_CT_10066 table: PRESENTATION column: SCHEDULE_NAME
07:39:43.265 [12937429@qtp-9708927-7] DEBUG o.h.ejb.AbstractEntityManagerImpl - mark transaction for rollback
07:39:43.265 [12937429@qtp-9708927-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction rollback
07:39:43.265 [12937429@qtp-9708927-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Rolling back JPA transaction on EntityManager [org.hibernate.ejb.EntityManagerImpl@b840d2]
07:39:43.265 [12937429@qtp-9708927-7] DEBUG o.h.transaction.JDBCTransaction - rollback
07:39:43.265 [12937429@qtp-9708927-7] DEBUG o.h.transaction.JDBCTransaction - re-enabling autocommit
07:39:43.265 [12937429@qtp-9708927-7] DEBUG o.h.transaction.JDBCTransaction - rolled back JDBC Connection
07:39:43.265 [12937429@qtp-9708927-7] DEBUG org.hibernate.jdbc.ConnectionManager - aggressively releasing JDBC connection
07:39:43.265 [12937429@qtp-9708927-7] DEBUG org.hibernate.jdbc.ConnectionManager - releasing JDBC connection [ (open PreparedStatements: 0, globally: 0) (open ResultSets: 0, globally: 0)]
07:39:43.265 [12937429@qtp-9708927-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [org.hibernate.ejb.EntityManagerImpl@b840d2] after transaction
07:39:43.265 [12937429@qtp-9708927-7] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
19.8.2012 7:39:43 com.sun.faces.lifecycle.InvokeApplicationPhase execute
WARNING: /presenter/presenter.xhtml @302,44 dropListener="#{scheduleView.dropped}": org.springframework.dao.DataIntegrityViolationException: could not insert: [com.google.code.yourpresenter.entity.Presentation]; SQL [insert into Presentation (PRESENTATION_ID, bgImage_id, media_id, name, song_id) values (default, ?, ?, ?, ?)]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not insert: [com.google.code.yourpresenter.entity.Presentation]
javax.el.ELException: /presenter/presenter.xhtml @302,44 dropListener="#{scheduleView.dropped}": org.springframework.dao.DataIntegrityViolationException: could not insert: [com.google.code.yourpresenter.entity.Presentation]; SQL [insert into Presentation (PRESENTATION_ID, bgImage_id, media_id, name, song_id) values (default, ?, ?, ?, ?)]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not insert: [com.google.code.yourpresenter.entity.Presentation]
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:111)
    at org.richfaces.event.MethodExpressionDropListener.processDrop(MethodExpressionDropListener.java:45)
    at org.richfaces.event.DropEvent.processListener(DropEvent.java:69)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at org.richfaces.component.AbstractDropTarget.broadcast(AbstractDropTarget.java:123)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:409)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1221)
    at com.google.code.yourpresenter.filter.ScheduleSelectedFilter.doFilter(ScheduleSelectedFilter.java:47)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:945)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not insert: [com.google.code.yourpresenter.entity.Presentation]; SQL [insert into Presentation (PRESENTATION_ID, bgImage_id, media_id, name, song_id) values (default, ?, ?, ?, ?)]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not insert: [com.google.code.yourpresenter.entity.Presentation]
    at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:641)
    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:104)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:403)
    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:58)
    at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:213)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:163)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
    at com.google.code.yourpresenter.service.ScheduleServiceImpl$$EnhancerByCGLIB$$9dfe2fc9.addPresentation(<generated>)
    at com.google.code.yourpresenter.view.ScheduleView.dropped(ScheduleView.java:154)
    at com.google.code.yourpresenter.view.ScheduleView.dropped(ScheduleView.java:92)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:187)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    ... 35 more
Caused by: org.hibernate.exception.ConstraintViolationException: could not insert: [com.google.code.yourpresenter.entity.Presentation]
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:96)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:64)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2345)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2852)
    at org.hibernate.action.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:71)
    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273)
    at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:320)
    at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:203)
    at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:129)
    at org.hibernate.ejb.event.EJB3MergeEventListener.saveWithGeneratedId(EJB3MergeEventListener.java:62)
    at org.hibernate.event.def.DefaultMergeEventListener.saveTransientEntity(DefaultMergeEventListener.java:415)
    at org.hibernate.event.def.DefaultMergeEventListener.mergeTransientEntity(DefaultMergeEventListener.java:341)
    at org.hibernate.event.def.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:303)
    at org.hibernate.event.def.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:258)
    at org.hibernate.impl.SessionImpl.fireMerge(SessionImpl.java:877)
    at org.hibernate.impl.SessionImpl.merge(SessionImpl.java:859)
    at org.hibernate.engine.CascadingAction$6.cascade(CascadingAction.java:279)
    at org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:392)
    at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:335)
    at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:204)
    at org.hibernate.engine.Cascade.cascadeCollectionElements(Cascade.java:425)
    at org.hibernate.engine.Cascade.cascadeCollection(Cascade.java:362)
    at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:338)
    at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:204)
    at org.hibernate.engine.Cascade.cascade(Cascade.java:161)
    at org.hibernate.event.def.DefaultMergeEventListener.cascadeOnMerge(DefaultMergeEventListener.java:630)
    at org.hibernate.event.def.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:490)
    at org.hibernate.event.def.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:255)
    at org.hibernate.event.def.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:84)
    at org.hibernate.impl.SessionImpl.fireMerge(SessionImpl.java:867)
    at org.hibernate.impl.SessionImpl.merge(SessionImpl.java:851)
    at org.hibernate.impl.SessionImpl.merge(SessionImpl.java:855)
    at org.hibernate.ejb.AbstractEntityManagerImpl.merge(AbstractEntityManagerImpl.java:686)
    at sun.reflect.GeneratedMethodAccessor20.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
    at $Proxy34.merge(Unknown Source)
    at com.google.code.yourpresenter.service.ScheduleServiceImpl.persist(ScheduleServiceImpl.java:71)
    at com.google.code.yourpresenter.service.ScheduleServiceImpl.addPresentation(ScheduleServiceImpl.java:122)
    at com.google.code.yourpresenter.service.ScheduleServiceImpl$$FastClassByCGLIB$$52d414d3.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)
    ... 49 more
Caused by: java.sql.SQLIntegrityConstraintViolationException: integrity constraint violation: NOT NULL check constraint; SYS_CT_10066 table: PRESENTATION column: SCHEDULE_NAME
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.JDBCPreparedStatement.fetchResult(Unknown Source)
    at org.hsqldb.jdbc.JDBCPreparedStatement.executeUpdate(Unknown Source)
    at org.hibernate.id.IdentityGenerator$GetGeneratedKeysDelegate.executeAndExtract(IdentityGenerator.java:94)
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:57)
    ... 92 more
Caused by: org.hsqldb.HsqlException: integrity constraint violation: NOT NULL check constraint; SYS_CT_10066 table: PRESENTATION column: SCHEDULE_NAME
    at org.hsqldb.error.Error.error(Unknown Source)
    at org.hsqldb.Table.enforceRowConstraints(Unknown Source)
    at org.hsqldb.Table.insertSingleRow(Unknown Source)
    at org.hsqldb.StatementDML.insertRowSet(Unknown Source)
    at org.hsqldb.StatementInsert.getResult(Unknown Source)
    at org.hsqldb.StatementDMQL.execute(Unknown Source)
    at org.hsqldb.Session.executeCompiledStatement(Unknown Source)
    at org.hsqldb.Session.execute(Unknown Source)
    ... 96 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:03:15.213

在您的 Presentation 实体中，将 getSchedule() 的 insertable 和 updateble 属性更改为**true**。见下文;

```
 @ManyToOne(optional = false)
   @JoinColumn(name="SCHEDULE_NAME", nullable =false, updatable = true, insertable = true)
   public Schedule getSchedule() {
      return schedule;
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:04:09.730

对于你的persist策略，hibernate会先将记录插入'Presentation'表，然后更新它的'schedule_id'，但是你设置schedule_id不为null，所以插入会失败。

一种解决方案是删除“非空”约束。</p>

第二种方案是重新设计关系配置，让hibernate只执行一个插入语句（包括'schedule_id'），不需要更新

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T11:36:12.763

删除@NotNull。非关键字段不允许空值。考虑输入数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T13:41:16.690

为什么要`updatable = false, insertable = false`在`Presentation`to`Schedule`映射中指定？

当然，这个值需要是可插入和可更新的以维持关系。尝试删除它，您应该在尝试插入时看到 SQL 更改。

# java - javax.naming.AuthenticationException

> ID：12025998
> 
> 赞同：3
> 
> 时间：2012-08-19T11:06:07.387
> 
> 标签：java, active-directory, ldap, kerberos, gssapi

我正在尝试使用带有 NTLM 的 Windows 凭据为 ActiveDirectory（客户端和服务器都是 Windows）创建上下文。

这是我的代码：

```
public void func() {
    try {
      URL configURL = getClass().getResource("jaas_ntlm_configuration.txt");
        System.setProperty("java.security.auth.login.config", configURL.toString());

        // If the application is run on NT rather than Unix, use this name
        String loginAppName = "MyConfig";

        // Create login context
        LoginContext lc = new LoginContext(loginAppName, new SampleCallbackHandler());

        // Retrieve the information on the logged-in user
        lc.login();

        // Get the authenticated subject
        Subject subject = lc.getSubject();

        System.out.println(subject.toString());

        Subject.doAs(subject, new JndiAction(new String[] { "" }));
    }
    catch (LoginException e) {
      e.printStackTrace();
    }
}

class JndiAction implements java.security.PrivilegedAction {
    private String[] args;

    public JndiAction(String[] origArgs) {
        this.args = (String[])origArgs.clone();
    }

    public Object run() {
        performJndiOperation(args);
        return null;
    }

    private static void performJndiOperation(String[] args) {

        // Set up environment for creating initial context
        Hashtable env = new Hashtable(11);

        env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");

        // Must use fully qualified hostname
        env.put(Context.PROVIDER_URL, "ldap://server:389");

        // Request the use of the "GSSAPI" SASL mechanism
        // Authenticate by using already established Kerberos credentials
        env.put(Context.SECURITY_AUTHENTICATION, "GSSAPI");

        try {
            /* Create initial context */
//          DirContext ctx = new InitialDirContext(env);

              // Create the initial context
            DirContext ctx = new InitialLdapContext(env, null);

            // Close the context when we're done
            ctx.close();
        } catch (NamingException e) {
            e.printStackTrace();
        }
    }
} 
```

我的 jaas_ntlm_configuration.txt 文件包含：

```
MyConfig { com.sun.security.auth.module.Krb5LoginModule required
useTicketCache=true
doNotPrompt=false;
}; 
```

当我尝试启动上下文时，出现以下异常：

```
javax.naming.AuthenticationException: GSSAPI [Root exception is javax.security.sasl.SaslException: Final handshake failed [Caused by GSSException: Token had invalid integrity check (Mechanism level: Corrupt checksum in Wrap token)]]
        at com.sun.jndi.ldap.sasl.LdapSasl.saslBind(Unknown Source)
        at com.sun.jndi.ldap.LdapClient.authenticate(Unknown Source)
        at com.sun.jndi.ldap.LdapCtx.connect(Unknown Source)
        at com.sun.jndi.ldap.LdapCtx.<init>(Unknown Source)
        at com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(Unknown Source)
        at com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(Unknown Source)
        at com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(Unknown Source)
        at com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(Unknown Source)
        at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)
        at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)
        at javax.naming.InitialContext.init(Unknown Source)
        at javax.naming.ldap.InitialLdapContext.<init>(Unknown Source)
        at JndiAction.performJndiOperation(JndiAction.java:204)
        at JndiAction.run(JndiAction.java:181)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Unknown Source)
        at MyTest.Do(MyTest.java:59)
        at MyTest.main(MyTest.java:68)
Caused by: javax.security.sasl.SaslException: Final handshake failed [Caused by GSSException: Token had invalid integrity check (Mechanism level: Corrupt checksum in Wrap token)]
        at com.sun.security.sasl.gsskerb.GssKrb5Client.doFinalHandshake(Unknown Source)
        at com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(Unknown Source)
        ... 18 more
Caused by: GSSException: Token had invalid integrity check (Mechanism level: Corrupt checksum in Wrap token)
        at sun.security.jgss.krb5.WrapToken_v2.getData(Unknown Source)
        at sun.security.jgss.krb5.WrapToken_v2.getData(Unknown Source)
        at sun.security.jgss.krb5.Krb5Context.unwrap(Unknown Source)
        at sun.security.jgss.GSSContextImpl.unwrap(Unknown Source)
        ... 20 more 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:54:06.273

您实际上正在使用 Kerberos 身份验证。如果这是您的意思，我可以告诉您我是如何设法使其工作的：

```
- add somewhere a file called krb5.conf with inside :

[libdefaults]
default_realm = YOUR_REALM
default_tkt_enctypes = arcfour-hmac-md5
default_tgs_enctypes = arcfour-hmac-md5
permitted_enctypes = arcfour-hmac-md5

dns_lookup_kdc = true
dns_lookup_realm = false

[realms]
YOUR_REALM = {
kdc = KERBEROS_SERVER
default_domain = YOUR_REALM
} 
```

*   将此行添加到您的代码中：

    System.setProperty("java.security.krb5.conf",PATH_TO_KRB5CONF_FILE); System.setProperty("sun.security.krb5.principal", PRINCIPAL_NAME_WITHOUT_DOMAIN);

如果您不知道您的 Kerberos 服务器，则无法从命令行启动 klist，并使用使用 LDAP 协议的服务（LDAP/server@domain -> 服务器）。

如果它仍然不起作用，请尝试添加

```
System.setProperty("sun.security.krb5.debug", "true"); 
```

并发布输出。